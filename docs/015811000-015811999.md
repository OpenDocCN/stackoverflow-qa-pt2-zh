# StackOverflow 问答 15811000-15811999

# php - php 404页面重定向

> ID：15811001
> 
> 赞同：0
> 
> 时间：2013-04-04T12:22:31.993
> 
> 标签：php, html

我在设置重定向页面时遇到问题。它似乎没有加载。

目前我有这个它可以处理页面的情况，但由于某种原因它没有进入默认状态？？想出页面不存在。

这个位不工作它不会因为某种原因切换到默认值？

```
 //get the page information
    $pageInfo = $model -> getPageInfo($_GET['page']);

    //select which page to include when the user clicks
    //on either register/home/my account/my bids/my sell/completed auctions/edit etc..etc..etc..
    switch($_GET['page']) {

        case 'Register':
            include 'views/register.php';
            $view = new HomeView($pageInfo, $model);
            break;

        case 'Home':
            include 'views/homeView.php';
            $view = new HomeView($pageInfo, $model);
            break;

        case 'My Account':
            include 'views/myaccount.php';
            $view = new myaccount($pageInfo, $model);
            break;

        case 'My Bids':
            include 'views/mybids.php';
            $view = new Mybids($pageInfo, $model);
            break;

        case 'My Sell':
            include 'views/mysell.php';
            $view = new mysell($pageInfo, $model);
            break;

        case 'Completed Auctions':
            include 'views/checkout.php';
            $view = new checkout($pageInfo, $model);
            break;

        case 'editProduct':
            include 'views/editProductView.php';
            $view = new EditProductView($pageInfo, $model);
            break;

        case 'addProduct':
            include 'views/addProductView.php';
            $view = new AddProductView($pageInfo, $model);
            break;

        case 'deleteProduct':
            include 'views/deleteProductView.php';
            $view = new DeleteProductView($pageInfo, $model);
        break;

        case 'deleteUser':
            include 'views/deleteUserView.php';
            $view = new DeleteUserView($pageInfo, $model);
        break;

        case 'search':
            include 'views/search.php';
            $view = new search($pageInfo, $model);
        break;   

        case 'product':
            include 'views/productView.php';
            $view = new ProductView($pageInfo, $model);
        break;

        default: 
            include 'views/404.php';
            $view = new error($pageInfo,$model);
        break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:29:10.447

第一：我认为你不需要指令`break;`，`default:`

第二，如果我是你，我会补充以下内容。

```
if(!$_GET['page'] && empty($_GET['page'])){
include 'views/404.php';
$view = new error($pageInfo,$model);

} 
```

所以，如果没有设置page id，你只能回显，默认的，会给出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:30:09.863

```
if($_GET['page']){
    switch ($_GET['page']) {
    case 'product':
        include 'views/productView.php';
        $view = new ProductView($pageInfo, $model);
        break;
    default:
        include 'views/404.php';
        $view = new error($pageInfo,$model);
    }
} 
```

应该管用。确保在`if($_GET...`支票中添加一些额外的验证

# excel - 通过中间处理从 MS Excel 导出到 MS Access

> ID：15811004
> 
> 赞同：2
> 
> 时间：2013-04-04T12:22:37.313
> 
> 标签：excel, ms-access, ms-access-2010

我有一个以 Excel (.XLS) 格式生成报告的应用程序。我需要将这些报告中的数据附加到 MS Access 2010 数据库中的现有表中。一个典型的记录是：

```
INC000000004154 Closed  Cbeebies    BBC Childrens   HQ6 monitor wall dropping out.  HQ6 P3  3/7/2013 7:03:01 PM 3/7/2013 7:03:01 PM 3/7/2013 7:14:15 PM The root cause of the problem was the power supply to the PC which was feeding the monitor. HQ6 Monitor wall dropping out. BBC Third Party Contractor supply this equipment. 
```

复杂之处在于我需要对数据进行一些有限的处理。即

![图表](https://i.imgur.com/v7MII5i.jpg)

具体来说，我需要进行几次查找，将名称转换为数字并解析日期字符串（由于某种原因，报告将日期以文本格式而不是日期格式放入电子表格中）。

现在我*可以*使用 XLRD/XLWT 在 Python 中执行此操作，但更喜欢在 Excel 或 Access 中执行此操作。有人对解决此问题的好方法有任何建议吗？我非常希望不使用 VBA，所以我可以做一些事情，比如记录一个 MS Excel 宏，然后在新创建的 XLS 文件上执行该宏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:15:52.980

您可以直接将一些 Excel 数据导入 MS Access，但如果您的要求是进行一些处理，因为我不知道您将如何在没有以下情况下实现这一目标：

*   [ETL](http://en.wikipedia.org/wiki/Extract,_transform,_load)应用程序，例如[Pentaho](http://www.pentaho.com/)或[Talend](http://www.talend.com/products/data-integration)或[其他](http://en.wikipedia.org/wiki/Category%3aETL_tools)。但这肯定就像用锤子压碎蚂蚁一样。

*   其他一些外部数据处理管道，使用 Python 或其他一些编程语言。

*   VBA（通过宏或手动编码）。几十年来，VBA 一直非常擅长在 Access 中做这类事情。
    由于您使用的是 Excel 和 Access，因此停留在该领域内似乎是解决您的问题的最佳解决方案。

*   只使用查询：
    您无需转换即可将数据导入到一个表中，该表的唯一目的是容纳来自 Excel 的数据；然后您从该原始数据创建查询以添加缺失的信息并在将结果附加到最终目标表之前对数据进行处理。
    该解决方案的优点是让您可以在 Access 中创建简单的步骤，您可以使用宏轻松记录这些步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T17:29:38.230

我前段时间问过这个问题，并决定用 Python 来做会更容易。戈德让我分享，就在这里（抱歉耽搁了，其他项目暂时优先）。

```
"""
Routine to migrate the S7 data from MySQL to the new Access
database.

We're using the pyodbc libraries to connect to Microsoft Access
Note that there are 32- and 64-bit versions of these libraries
available but in order to work the word-length for pyodbc and by
implication Python and all its associated compiled libraries must
match that of MS Access. Which is an arse as I've just had to
delete my 64-bit installation of Python and replace it and all
the libraries with the 32-bit version. 

Tim Greening-Jackson 08 May 2013 (timATgreening-jackson.com)
"""

import pyodbc
import re
import datetime
import tkFileDialog
from Tkinter import *

class S7Incident:
    """
    Class containing the records downloaded from the S7.INCIDENTS table 
    """
    def __init__(self, id_incident, priority, begin, acknowledge,
         diagnose, workaround,fix, handoff, lro, nlro,
         facility, ctas, summary, raised, code):
    self.id_incident=unicode(id_incident)
    self.priority = {u'P1':1, u'P2':2, u'P3':3, u'P4':4, u'P5':5} [unicode(priority.upper())]
    self.begin = begin
    self.acknowledge = acknowledge
    self.diagnose = diagnose
    self.workaround = workaround
    self.fix = fix
    self.handoff = True if handoff else False
    self.lro = True if lro else False
    self.nlro = True if nlro else False
    self.facility = unicode(facility)
    self.ctas = ctas
    self.summary = "** NONE ***" if type(summary) is NoneType else summary.replace("'","")
    self.raised = raised.replace("'","")
    self.code = 0 if code is None else code
    self.production = None
    self.dbid = None

    def __repr__(self):
    return "[{}] ID:{} P{} Prod:{} Begin:{} A:{} D:+{}s W:+{}s F:+{}s\nH/O:{} LRO:{} NLRO:{} Facility={} CTAS={}\nSummary:'{}',Raised:'{}',Code:{}".format(
        self.id_incident,self.dbid, self.priority, self.production, self.begin,
        self.acknowledge, self.diagnose, self.workaround, self.fix,
        self.handoff, self.lro, self.nlro, self.facility, self.ctas,
        self.summary, self.raised, self.code)

    def ProcessIncident(self, cursor, facilities, productions):
    """
    Produces the SQL necessary to insert the incident in to the Access
    database, executes it and then gets the autonumber ID (dbid) of the newly
    created incident (this is used so LRO, NRLO CTAS and AD1 can refer to
    their parent incident.

    If the incident is classed as LRO, NLRO, CTAS then the appropriate
    record is created. Returns the dbid.
    """
    if self.raised.upper() in productions:
        self.production = productions[self.raised.upper()]
    else:
       self.production = 0

    sql="""INSERT INTO INCIDENTS (ID_INCIDENT, PRIORITY, FACILITY, BEGIN,
    ACKNOWLEDGE, DIAGNOSE, WORKAROUND, FIX, HANDOFF, SUMMARY, RAISED, CODE, PRODUCTION)
    VALUES ('{}', {}, {}, #{}#, {}, {}, {}, {}, {}, '{}', '{}', {}, {})
    """.format(self.id_incident, self.priority, facilities[self.facility], self.begin,
       self.acknowledge, self.diagnose, self.workaround, self.fix,
       self.handoff, self.summary, self.raised, self.code, self.production)
    cursor.execute(sql)
    cursor.execute("SELECT @@IDENTITY")
    self.dbid = cursor.fetchone()[0]

    if self.lro:
        self.ProcessLRO(cursor, facilities[self.facility])

    if self.nlro:
        self.ProcessNLRO(cursor, facilities[self.facility])

    if self.ctas:
        self.ProcessCTAS(cursor, facilities[self.facility], self.ctas)

    return self.dbid

    def ProcessLRO(self, cursor, facility):
    sql = "INSERT INTO LRO (PID, DURATION, FACILITY) VALUES ({}, {}, {})"\
          .format(self.dbid, self.workaround, facility)
    cursor.execute(sql)

    def ProcessNLRO(self, cursor, facility):
    sql = "INSERT INTO NLRO (PID, DURATION, FACILITY) VALUES ({}, {}, {})"\
          .format(self.dbid, self.workaround, facility)
    cursor.execute(sql)

    def ProcessCTAS(self, cursor, facility, code):
    sql = "INSERT INTO CTAS (PID, DURATION, FACILITY, CODE) VALUES ({}, {}, {}, {})"\
          .format(self.dbid, self.workaround, facility, self.ctas)
    cursor.execute(sql)

class S7AD1:
    """
    S7.AD1 records.
    """
    def __init__(self, id_ad1, date, ref, commentary, adjustment):
    self.id_ad1 = id_ad1
    self.date = date
    self.ref = unicode(ref)
    self.commentary = unicode(commentary)
    self.adjustment = float(adjustment)
    self.pid = 0
    self.production = 0

    def __repr__(self):
    return "[{}] Date:{} Parent:{} PID:{} Amount:{} Commentary: {} "\
           .format(self.id_ad1, self.date.strftime("%d/%m/%y"), self.ref, self.pid, self.adjustment, self.commentary)

    def SetPID(self, pid):
    self.pid = pid

    def SetProduction(self, p):
    self.production = p

    def Process(self, cursor):
    sql = "INSERT INTO AD1 (pid, begin, commentary, production, adjustment) VALUES ({}, #{}#, '{}', {}, {})"\
          .format(self.pid, self.date.strftime("%d/%m/%y"), self.commentary, self.production, self.adjustment)
    cursor.execute(sql)

class S7Financial:
    """
    S7 monthly financial summary of income and penalties from S7.FINANCIALS table.
    These are identical in the new database
    """
    def __init__(self, month, year, gco, cta, support, sc1, sc2, sc3, ad1):
    self.begin = datetime.date(year, month, 1)
    self.gco = float(gco)
    self.cta = float(cta)
    self.support = float(support)
    self.sc1 = float(sc1)
    self.sc2 = float(sc2)
    self.sc3 = float(sc3)
    self.ad1 = float(ad1)

    def __repr__(self):
    return "Period: {} GCO:{:.2f} CTA:{:.2f} SUP:{:.2f} SC1:{:.2f} SC2:{:.2f} SC3:{:.2f} AD1:{:.2f}"\
           .format(self.start.strftime("%m/%y"), self.gco, self.cta, self.support, self.sc1, self.sc2, self.sc3, self.ad1)

    def Process(self, cursor):
    """
    Insert in to FINANCIALS table
    """
    sql = "INSERT INTO FINANCIALS (BEGIN, GCO, CTA, SUPPORT, SC1, SC2, SC3, AD1) VALUES (#{}#, {}, {}, {}, {}, {}, {},{})"\
          .format(self.begin, self.gco, self.cta, self.support, self.sc1, self.sc2, self.sc3, self.ad1)
    cursor.execute(sql)

class S7SC3:
    """
    Miscellaneous S7 SC3 stuff. The new table is identical to the old one. 
    """
    def __init__(self, begin, month, year, p1ot, p2ot, totchg, succchg, chgwithinc, fldchg, egychg):
    self.begin = begin
    self.p1ot = p1ot
    self.p2ot = p2ot
    self.changes = totchg
    self.successful = succchg
    self.incidents = chgwithinc
    self.failed = fldchg
    self.emergency = egychg

    def __repr__(self):
    return "{} P1:{} P2:{} CHG:{} SUC:{} INC:{} FLD:{} EGY:{}"\
           .format(self.period.strftime("%m/%y"), self.p1ot, self.p1ot, self.changes, self.successful, self.incidents, self.failed, self.emergency)

    def Process(self, cursor):
    """
    Inserts a record in to the Access database
    """
    sql = "INSERT INTO SC3 (BEGIN, P1OT, P2OT, CHANGES, SUCCESSFUL, INCIDENTS, FAILED, EMERGENCY) VALUES\
        (#{}#, {}, {}, {}, {}, {}, {}, {})"\
          .format(self.begin, self.p1ot, self.p2ot, self.changes, self.successful, self.incidents, self.failed, self.emergency)
    cursor.execute(sql)

def ConnectToAccessFile():
    """
    Prompts the user for an Access database file, connects, creates a cursor,
    cleans out the tables which are to be replaced, gets a hash of the facilities
    table keyed on facility name returning facility id
    """
    # Prompts the user to select which Access DB file he wants to use and then attempts to connect
    root = Tk()
    dbname = tkFileDialog.askopenfilename(parent=root, title="Select output database", filetypes=[('Access 2010', '*.accdb')])
    root.destroy()
    # Connect to the Access (new) database and clean its existing incidents etc. tables out as
    # these will be replaced with the new data
    dbcxn = pyodbc.connect("Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ="+dbname+";")
    dbcursor=dbcxn.cursor()
    print("Connected to {}".format(dbname))
    for table in ["INCIDENTS", "AD1", "LRO", "NLRO", "CTAS", "SC3", "PRODUCTIONS", "FINANCIALS"]:
    print("Clearing table {}...".format(table))
    dbcursor.execute("DELETE * FROM {}".format(table))
    # Get the list of facilities from the Access database...
    dbcursor.execute("SELECT id, facility FROM facilities")
    rows = dbcursor.fetchall()
    dbfacilities = {unicode(row[1]):row[0] for row in rows}
    return dbcxn, dbcursor, dbfacilities

# Entry point

incre = re.compile("INC\d{12}[A-Z]?") # Regex that matches incident references

try:
    dbcxn, dbcursor, dbfacilities = ConnectToAccessFile()
    # Connect to the MySQL S7 (old) database and read the incidents and ad1 tables
    s7cxn = pyodbc.connect("DRIVER={MySQL ODBC 3.51 Driver}; SERVER=localhost;DATABASE=s7; UID=root; PASSWORD=********; OPTION=3")
    print("Connected to MySQL S7 database")
    s7cursor = s7cxn.cursor()
    s7cursor.execute("""
    SELECT id_incident, priority, begin, acknowledge,
    diagnose, workaround, fix, handoff, lro, nlro,
    facility, ctas, summary, raised, code FROM INCIDENTS""")
    rows = s7cursor.fetchall()
    # Discard any incidents which don't have a reference of the form INC... as they are ancient
    print("Fetching incidents")
    s7incidents = {unicode(row[0]):S7Incident(*row) for row in rows if incre.match(row[0])}

    # Get the list of productions from the S7 database to replace the one we've just deleted ...

    print("Fetching productions")    
    s7cursor.execute("SELECT DISTINCT RAISED FROM INCIDENTS")
    rows = s7cursor.fetchall()
    s7productions = [r[0] for r in rows]

    # ... now get the AD1s ...

    print("Fetching AD1s")    
    s7cursor.execute("SELECT id_ad1, date, ref, commentary, adjustment from AD1")
    rows = s7cursor.fetchall()
    s7ad1s = [S7AD1(*row) for row in rows]

    # ... and the financial records ...

    print("Fetching Financials")    
    s7cursor.execute("SELECT month, year, gco, cta, support, sc1, sc2, sc3, ad1 FROM Financials")
    rows = s7cursor.fetchall()
    s7financials = [S7Financial(*row) for row in rows]
    print("Writing financials ({})".format(len(s7financials)))
    [p.Process(dbcursor) for p in s7financials]

    # ... and the SC3s.

    print("Fetching SC3s")    
    s7cursor.execute("SELECT begin, month, year, p1ot, p2ot, totchg, succhg, chgwithinc, fldchg, egcychg from SC3")
    rows = s7cursor.fetchall()
    s7sc3s = [S7SC3(*row) for row in rows]
    print("Writing SC3s ({})".format(len(s7sc3s)))
    [p.Process(dbcursor) for p in s7sc3s]

    # Re-create the productions table in the new database. Note we refer to production
    # by number in the incidents table so need to do the SELECT @@IDENTITY to give us the
    # autonumber index. To make sure everything is case-insensitive convert the
    # hash keys to UPPERCASE.

    dbproductions = {}
    print("Writing productions ({})".format(len(s7productions)))
    for p in sorted(s7productions):
    dbcursor.execute("INSERT INTO PRODUCTIONS (PRODUCTION) VALUES ('{}')".format(p))
    dbcursor.execute("SELECT @@IDENTITY")
    dbproductions[p.upper()] = dbcursor.fetchone()[0]

    # Now process the incidents etc. that we have retrieved from the S7 database

    print("Writing incidents ({})".format(len(s7incidents)))
    [s7incidents[k].ProcessIncident(dbcursor, dbfacilities, dbproductions) for k in sorted(s7incidents)]

    # Match the new parent incident IDs in the AD1s and then write to the new table. Some
    # really old AD1s don't have the parent incident reference in the REF field, it is just
    # mentioned SOMEWHERE in the commentary. So if the REF field doesn't match then do a
    # re.search (not re.match!) for it. It isn't essential to match these older AD1s with
    # their parent incident, but it is quite useful (and tidy).

    print("Matching and writing AD1s".format(len(s7ad1s)))
    for a in s7ad1s:
    if a.ref in s7incidents:
        a.SetPID(s7incidents[a.ref].dbid)
        a.SetProduction(s7incidents[a.ref].production)
    else:
        z=incre.search(a.commentary)
        if z and z.group() in s7incidents:
        a.SetPID(s7incidents[z.group()].dbid)
        a.SetProduction(s7incidents[z.group()].production)

    a.Process(dbcursor)

    print("Comitting changes")
    dbcursor.commit()
finally:
    print("Closing databases")
    dbcxn.close()
    s7cxn.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T06:58:32.223

It turns out that the file has additional complications in terms of mangled data which will require a degree of processing which is a pain to do in Excel but trivially simple in Python. So I will re-use some Python 2.x scripts which use the XLWT/XLRD libraries to munge the spreadsheet.

# mysql - 复杂搜索，按地区和议会搜索以及其他几个领域，需要表格结构帮助

> ID：15811005
> 
> 赞同：0
> 
> 时间：2013-04-04T12:22:37.627
> 
> 标签：mysql, sql, search, structure

我需要一个搜索功能来搜索数据库中的项目，但我什至不确定如何正确地将它们保存在数据库中。

我想按位置、区和议会搜索，其余的更直接。

但是每个项目可以有多个区和议会，我如何将它们保存在数据库中？添加另一个将项目 ID 与地区相关联的表和另一个与议会相关的表？

就像是

```
|id|item_id|district|
----------------------
|1 | 1     |dis_1   |
|2 | 1     |dis_2   |
|3 | 1     |dis_3   |
|4 | 1     |dis_4   | 
```

然后是类似的理事会表格？

然后搜索会将地区/议会与 item_id 匹配。

我在想正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:52:39.027

通常，当您有一个多对多关系时，您可以使用关系表来解决它。因此，在上面的示例中，如果您有一个 Item 表和一个 District 表，那么您将创建一个 ItemDistrict 表，它只有两列：ItemId 和 DistrictId。该表不需要自己的 id 键，因为 ItemId 和 DistrictId 的组合是主键。

如果议会独立于地区，并且一个项目可以有多个议会，那么您将有第二个表 ItemCouncil，其中包含 ItemId 和 CouncilId 列。

但是，如果地区与议会相关并且项目与地区/议会组合的子集相关，则您需要一个与所有三个表相关的表：ItemDistrictCouncil，它具有 3 列：ItemId、DistrictId 和 CouncilId。

如果该项目真的只与 District 相关，并且 District 与理事会相关，因此通过推断该 Item 与对应于该 District 的任何理事会相关，则您只需要 ItemDistrict 表。在这种情况下，您将通过议会的区外键加入议会。

# windows - 检查处理器是 32 位还是 64 位

> ID：15811006
> 
> 赞同：0
> 
> 时间：2013-04-04T12:22:37.823
> 
> 标签：windows, windows-8, vb6

何时将处理器视为 32 位或 64 位？我想检查 PC 是 32 位还是 64 位处理器。那么如何在 vb6 代码中检查它呢？当我研究它时，我知道我应该检查[SYSTEM_INFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724958%28v=vs.85%29.aspx)中的 wProcessorArchitecture 。当我根据它检查时，我的 Windows 8 电脑返回为 32 位。但是当我检查计算机属性时，它显示基于 x64 的处理器。这是代码的一部分

```
Option Explicit

Private Type SYSTEM_INFO
 wProcessorArchitecture        As Integer
 wReserved                     As Integer
 dwPageSize                    As Long
 lpMinimumApplicationAddress   As Long
 lpMaximumApplicationAddress   As Long
 dwActiveProcessorMask         As Long
 dwNumberOfProcessors          As Long
 dwProcessorType               As Long
 dwAllocationGranularity       As Long
 wProcessorLevel               As Integer
 wProcessorRevision            As Integer
End Type

Private Declare Sub GetNativeSystemInfo Lib "kernel32" (lpSystemInfo As SYSTEM_INFO)

'Constants for GetSystemInfo and GetNativeSystemInfo API functions (SYSTEM_INFO structure)
Private Const PROCESSOR_ARCHITECTURE_AMD64      As Long = 9         'x64 (AMD or Intel)
Private Const PROCESSOR_ARCHITECTURE_IA64       As Long = 6         'Intel Itanium Processor Family (IPF)
Private Const PROCESSOR_ARCHITECTURE_INTEL      As Long = 0         'x86
Private Const PROCESSOR_ARCHITECTURE_UNKNOWN    As Long = &HFFFF&   'Unknown architecture

Public Function IsOS64Bit() As Boolean
On Error GoTo ProcError

Dim typ_si      As SYSTEM_INFO

Call GetNativeSystemInfo(typ_si)
If (typ_si.wProcessorArchitecture = PROCESSOR_ARCHITECTURE_AMD64) Or (typ_si.wProcessorArchitecture = PROCESSOR_ARCHITECTURE_IA64) Then
    IsOS64Bit = True
    MsgBox "64 bit"

Else
    IsOS64Bit = False
    MsgBox "32 bit"
     MsgBox typ_si.wProcessorArchitecture
End If

ProcClean:
Debug.Print "Exiting Function m_OS64.IsOS64Bit()"
Exit Function

ProcError:
If Err.Number <> 0 Then
    Debug.Print "An error occured in m_OS64.IsOS64Bit()"
    Debug.Print Err.Number & ": " & Err.Description
    Resume ProcClean
End If
End Function

Private Sub Command1_Click()
Call IsOS64Bit
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:55:50.530

`GetNativeSystemInfo`不返回处理器的体系结构。相反，它返回操作系统的体系结构。即，在 32 位版本的 Windows 中调用它时，您总是得到“32 位”。

从您在问题中引用的 MSDN 文章中：

> **w处理器架构**
> 
> **已安装操作系统**的处理器架构。此成员可以是以下值之一。

有关如何确定 CPU 架构的信息，请参阅此问题：[检查操作系统和处理器是 32 位还是 64 位？](https://stackoverflow.com/questions/15765804/check-os-and-processor-is-32-bit-or-64-bit?rq=1)

# objective-c - 我怎样才能得到未来一天的日期 - Objective C

> ID：15811007
> 
> 赞同：0
> 
> 时间：2013-04-04T12:22:49.963
> 
> 标签：objective-c, nsdate, nsdateformatter, ios6.1

如果我说`upcoming monday`那我怎么能得到日期`upcoming monday`？

就像，今天`Thu, 04-04-2013`比我怎么知道即将到来的日期`wednesday`？

希望我能够澄清你。

这里问了类似的问题，但我无法理解：

[在Objective-C中获取下周六的日期？](https://stackoverflow.com/questions/4579294/get-the-date-of-next-saturday-in-objective-c)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T13:17:26.890

```
NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
NSDate *date = [NSDate date];
NSDateComponents *weekdayComponents = [gregorian components:NSWeekdayCalendarUnit fromDate:date];
NSInteger todayWeekday = [weekdayComponents weekday];

enum Weeks {
    SUNDAY = 1,
    MONDAY,
    TUESDAY,
    WEDNESDAY,
    THURSDAY,
    FRIDAY,
    SATURDAY
};

NSInteger moveDays=WEDNESDAY-todayWeekday;
if (moveDays<=0) {
    moveDays+=7;
}

NSDateComponents *components = [NSDateComponents new];
components.day=moveDays;

NSCalendar *calendar=[[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
NSDate* newDate = [calendar dateByAddingComponents:components toDate:date options:0];

NSLog(@"%@",newDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:43:44.293

只是为了激怒Anoop；）：

```
NSDate* now = [NSDate date];
NSTimeInterval nowInterval = [now timeIntervalSince1970];
int days = (int)(nowInterval / (24 * 60 * 60));
int today = (days + 4) % 7;
NSDate* saturday = [NSDate dateWithTimeIntervalSince1970:nowInterval + (6 - today) * 24 * 60 * 60];
NSLog(@"saturday = %@", saturday); 
```

# c# - backgroundworker 只触发一次

> ID：15811009
> 
> 赞同：0
> 
> 时间：2013-04-04T12:22:53.993
> 
> 标签：c#, multithreading, winforms, web-services, backgroundworker

我正在将文件读入内存，然后尝试为每一行进行 Web 服务调用。我正在尝试做的事情是这样的：1.读入文件2.创建新线程->为第1行执行Web服务调用3.创建新线程->为第2行执行Web服务调用4.更新“状态" 带有服务调用 1 或 2 的结果的框，哪个先返回

所以换句话说，我正在尝试为文件中的每一行进行多个 Web 服务调用，并在它们返回时更新状态框。我不想打一个电话，然后在第一个电话返回后开始第二个电话。

编辑：忘了提到在调试时，我注意到只进行了一次调用，因为在`readFileBackgroundWorker.IsBusy`通过`true`foreach 循环时，但是如果我删除它，我会收到一个错误`This BackgroundWorker is currently busy and cannot run multiple tasks concurrently.`

读取文件：

```
private void uxReadFileButton_Click(object sender, EventArgs e)
    {
        uxFileStatusLabel.Text = String.Empty;
        this.uxReadFileButton.Enabled = false;
        this.uxCancelReadingFileButton.Enabled = true;
        var clientList = ReadFile(uxFileNameBox.Text);

        foreach (var client in clientList)
        {
            if (readFileBackgroundWorker.IsBusy != true)
            {
                readFileBackgroundWorker.RunWorkerAsync(client);
            }
        }
    }

 private void readFileBackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        var worker = (BackgroundWorker)sender;
        ProcessClient((ClientObject)e.Argument, worker, e);
    }

 private void ProcessClient(ClientObject client, BackgroundWorker worker, DoWorkEventArgs e)
    {
        try
        {
            client.FileClientDischarge(SystemCode, UserName, Password);
            int percent = (int)(Math.Ceiling(((double)(client.RecordNumber + 1) / 121) * 100));
            worker.ReportProgress(percent, client);
        }
        catch (Exception ex)
        {
            worker.CancelAsync();
        }
        e.Result = client.RecordNumber;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:34:38.960

您的后台工作人员只运行一次的原因是您`RunWorkerAsync()`第二次调用时它很忙。您应该为循环的每次迭代创建一个后台工作程序。

```
private void uxReadFileButton_Click(object sender, EventArgs e)
{
    uxFileStatusLabel.Text = String.Empty;
    this.uxReadFileButton.Enabled = false;
    this.uxCancelReadingFileButton.Enabled = true;
    var clientList = ReadFile(uxFileNameBox.Text);
    BackGroundWorker bgw;

    foreach (var client in clientList)
    {
        bgw = new BackgroundWorker();
        bgw.DoWork += readFileBackgroundWorker_DoWork;
        //bgw.RunWorkerCompleted += 

        bgw.RunWorkerAsync(client);
    }
}

private void readFileBackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    var worker = (BackgroundWorker)sender;
    ProcessClient((ClientObject)e.Argument, worker, e);
}

private void ProcessClient(ClientObject client, BackgroundWorker worker, DoWorkEventArgs e)
{
    try
    {
        client.FileClientDischarge(SystemCode, UserName, Password);
        int percent = (int)(Math.Ceiling(((double)(client.RecordNumber + 1) / 121) * 100));
        worker.ReportProgress(percent, client);
    }
    catch (Exception ex)
    {
        worker.CancelAsync();
    }
    e.Result = client.RecordNumber;
} 
```

[请在取消 BackGroundWorker DoWork](https://stackoverflow.com/questions/7471470/c-background-worker)上查看这个 SO 问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:29:21.713

您应该在工作人员完成工作之前尝试使用多线程作为 foreach 循环完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:35:37.507

您可以使用类似的方法启动多个后台工作人员以并行执行您的 Web 服务调用

```
foreach (var client in clientList)
    {
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += new DoWorkEventHandler(worker_DoWork);
        worker.RunWorkerAsync(i);
    } 
```

# jsp - 无法从 Internet 访问我在 Apache Tomcat 6.0 上部署的 JSP 页面

> ID：15811015
> 
> 赞同：0
> 
> 时间：2013-04-04T12:23:06.433
> 
> 标签：jsp, tomcat

我无法找到这个问题的解决方案，这就是我在这里发布它的原因。如果之前有人问过这个问题，请原谅我并提供有用的链接。

**如何从 Internet 访问我在家用 PC 上的 Apache Tomcat 上部署的 JSP 页面**？以下是配置。

操作系统：Windows XP SP2
防病毒或防火墙：未安装
连接到 LAN：否（通过宽带连接直接连接到 Internet）
Web 服务器：Apache Tomcat 6.0，未安装其他服务器。
IP类型：动态/非静态
使用端口：8080

如果它连接到局域网，我可以在其他电脑上访问它。

我是否需要在 tomcat 配置文件中进行一些更改才能获得成功？

# c# - 用 async 和 await 重写普通方法

> ID：15811017
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:23:09.160
> 
> 标签：c#, windows-8, windows-runtime, async-await, c#-5.0

我在我的应用程序中使用这样的方法结构，

```
 public void BiginAuthenticate()
 {

    if (condtion == true)
    PerformSecondLevelAuthenitcation();

 }

 public void secondlevelAuthendiation()
 {

 } 
```

我在单例类中编写了这段代码，我将通过我的视图模型访问这段代码。我想要实现的是，我需要用 asyc 重写这段代码并等待。我需要等待我的第一个方法调用，即 BiginAuthenticate()，直到它完成两个方法执行。因此，为了实现这一点，我需要在现有代码中实现什么更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:26:55.920

如果我理解正确的话：

```
 await BiginAuthenticate();

 public async Task BiginAuthenticate()
 {

    if (condtion)
        await PerformSecondLevelAuthenitcation();

 }

 public async Task PerformSecondLevelAuthenitcation()
 {

 } 
```

# highcharts - 如何通过 Highcharts 中的自定义按钮控制图例项？

> ID：15811018
> 
> 赞同：0
> 
> 时间：2013-04-04T12:23:10.513
> 
> 标签：highcharts

我正在寻找一种通过我的自定义按钮控制图例项目的方法。该按钮将被放置在画布区域之外。如何获取图例项目列表，并通过复选框切换它们？通过这样做，我可以给用户更多的空间来查看图表。

谢谢，

杨成岩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:38:22.783

您可以使用查看图例项目名称

```
chart.series[0].name
chart.series[1].name 
```

要打开和关闭轴，请使用

chart.series[0].show() chart.series[0].hide()

例如[http://jsfiddle.net/BasRN/](http://jsfiddle.net/BasRN/)显示隐藏和显示带有按钮的第一个系列，包括将按钮文本设置为系列名称。

# c# - 数据库循环算法让我发疯

> ID：15811020
> 
> 赞同：-2
> 
> 时间：2013-04-04T12:23:13.740
> 
> 标签：c#, loops, datatable

这是一个 C# Windows 应用程序。

`GoodTable`我在内存中有 2 个数据表，我将它们称为`BadTable`. 行数和列数相同，列名也相同。中的所有行在`BadTable`大多数列中都有错误数据。我需要遍历中的所有行`BadTable`并将所有列中的数据替换为中匹配行中的数据`GoodTable`。但是，在进行更新时我需要跳过 2 个列名，我将它们`SkipColumn1`称为`SkipColumn2`.

我已经尝试了许多版本的嵌套`foreach`循环和嵌套 for 循环来跟踪列数，而我的结果到处都是。如果那里有任何数据库循环忍者，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:32:27.743

像这样的东西：

```
 var goodTable = new DataTable();
        var badTable = new DataTable();

        // some initialization code (add columns, fill with data)...

        var columnNames = goodTable
            .Columns
            .Cast<DataColumn>()
            .Where(column => column.ColumnName != "SkipColumn1" && column.ColumnName != "SkipColumn2")
            .Select(column => column.ColumnName)
            .ToArray();

        for (var i = 0; i < goodTable.Rows.Count; i++)
        {
            foreach (var columnName in columnNames)
            {
                badTable.Rows[i][columnName] = goodTable.Rows[i][columnName];
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:08:34.517

这是我接受的答案，因为在我看来它是最干净和最简单的。

```
for (var i = 0; i < GoodDT.Rows.Count; i++)
{
    for (var x = 0; x < GoodDT.Columns.Count; x++)
    {
        if (BadDT.Columns[x].ColumnName != "skip1" && BadDT.Columns[x].ColumnName != "skip2")
        {
            BadDT.Rows[i][x] = GoodDT.Rows[i][x];
        }
    }
} 
```

# python - 在圆柱体表面上生成随机点

> ID：15811027
> 
> 赞同：5
> 
> 时间：2013-04-04T12:23:44.950
> 
> 标签：python

我想在圆柱体表面生成随机点，使点之间的距离在 230 到 250 之间。我使用以下代码在圆柱体表面生成随机点：

```
import random,math
H=300
R=20
s=random.random()
#theta = random.random()*2*math.pi
for i in range(0,300):
    theta = random.random()*2*math.pi
    z = random.random()*H
    r=math.sqrt(s)*R
    x=r*math.cos(theta)
    y=r*math.sin(theta)
    z=z
    print 'C'  , x,y,z 
```

如何生成随机点，使其落在范围内（在圆柱体表面上）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:29:13.060

创建一组在它们之间的位置上具有约束条件的随机点的基本方法是使用一个函数来调节点放置在某个位置的概率。这个函数一开始是一个常数，每当放置一个点时，该点周围的禁止区域都会设置为零。这对于连续变量来说很难做到，但如果你离散化你的问题，那就相当容易了。

要注意的另一件事是位于圆柱体部分。将其视为周期性重复的矩形区域上的随机点可能更容易。这可以通过两种不同的方式处理：

1.  最简单的方法是不仅要考虑放置点的矩形瓷砖，还要考虑其相邻的瓷砖。每当您在主图块中放置一个点时，您也会在相邻的点中放置一个点，并计算它们对图块内概率函数的影响。

2.  一种更复杂的方法考虑概率函数，然后考虑对禁止区域进行编码的内核的卷积，以及与已放置的点相对应的 delta 函数的总和。如果这是使用 FFT 计算的，则周期性是不自然的乘积。

第一种方法可以编码如下：

```
from __future__ import division
import numpy as np

r, h = 20, 300
w = 2*np.pi*r
int_w = int(np.rint(w))
mult = 10
pdf = np.ones((h*mult, int_w*mult), np.bool)
points = []
min_d, max_d = 230, 250

available_locs = pdf.sum()
while available_locs:
    new_idx = np.random.randint(available_locs)
    new_idx = np.nonzero(pdf.ravel())[0][new_idx]
    new_point = np.array(np.unravel_index(new_idx, pdf.shape))
    points += [new_point]
    min_mask = np.ones_like(pdf)
    if max_d is not None:
        max_mask = np.zeros_like(pdf)
    else:
        max_mask = True
    for p in [new_point - [0, int_w*mult], new_point +[0, int_w*mult],
              new_point]:
        rows = ((np.arange(pdf.shape[0]) - p[0]) / mult)**2
        cols = ((np.arange(pdf.shape[1]) - p[1]) * 2*np.pi*r/int_w/mult)**2
        dist2 = rows[:, None] + cols[None, :]
        min_mask &= dist2 > min_d*min_d
        if max_d is not None:
            max_mask |= dist2 < max_d*max_d
    pdf &= min_mask & max_mask
    available_locs = pdf.sum()
points = np.array(points) / [mult, mult*int_w/(2*np.pi*r)] 
```

如果您使用您的值运行它，输出通常只有一两个点，因为较大的最小距离禁止所有其他点。但如果你以更合理的值运行它，例如

```
min_d, max_d = 50, 200 
```

以下是放置前 5 个点后概率函数的样子： ![在此处输入图像描述](https://i.stack.imgur.com/ZzWLd.png)

请注意，这些点以坐标对的形式返回，第一个是高度，第二个是沿圆柱圆周的距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:02:56.750

这不是一个完整的解决方案，而是应该有所帮助的见解。如果将圆柱体的表面“展开”成一个宽`w=2*pi*r`和高的矩形`h`，则查找点之间的距离的任务就简化了。您还没有解释如何测量圆柱顶部和侧面上的点之间的“沿表面的距离”——这是一个有点棘手的几何形状。

至于在我们创建人工“接缝”时计算沿表面的距离，只需同时使用 (x1-x2) 和 (w -x1+x2) - 提供较短距离的那个就是您想要的。

我确实认为@VincentNivoliers 使用泊松磁盘采样的建议非常好，但是在 h=300 和 r=20 的约束下，无论如何你都会得到糟糕的结果。

# css - Divs不会在IE8中浮动

> ID：15811029
> 
> 赞同：3
> 
> 时间：2013-04-04T12:23:45.203
> 
> 标签：css, internet-explorer-8, css-float

这将是主要标记：

```
<div class="mancha">
    <div class="logo"></div>    
    <div id="content-area" class="espacio">
             <div class="eltitular">HEADER</div>
             <div class="lacarta">LEFT CONTENT</div>
             <div id="sidebar">RIGHT CONTENT</div>
        </div>
</div> 
```

在哪里（尽管在链接中可以看到更多规则，但这是宽度）

```
.espacio{
    margin-left: 192px;
    background: transparent;
        width:808px !important
}
.lacarta{
        width:595px;
        float:left;
}
#sidebar{
        width:210px;
        float:right
} 
```

问题是 .lacarta 和 #sidebar 不是一个接一个地浮动（这只发生在 IE8 或更低版本中）

可以在这里进行测试：http: [//goo.gl/ksFQI](http://goo.gl/ksFQI)（如果您与 firefox/chrome 进行比较，您会发现侧边栏不在容器的右侧......）

我检查了 IE8 开发人员工具，容器似乎对于这两个元素都足够大。

知道我错过了什么吗？

-编辑-

当前的IE： ![在此处输入图像描述](https://i.stack.imgur.com/C9cXX.png)

通缉（如在 Firefox 中）： ![在此处输入图像描述](https://i.stack.imgur.com/ggfjd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:02:31.407

实际上，IE8 中存在一个错误，其中右浮动元素似乎清除：左。

[http://blogs.msdn.com/b/askie/archive/2009/03/23/right-floated-element-in-internet-explorer-8-is-positioned-differently-than-internet-explorer-7。 aspx](http://blogs.msdn.com/b/askie/archive/2009/03/23/right-floated-element-in-internet-explorer-8-is-positioned-differently-than-internet-explorer-7.aspx)

如果您根本不想在 HTML 中添加任何内容，您可以稍微重构它以快速修复。首先将右浮动`sidebar`，即：

```
<div id="content-area" class="espacio">
  <div class="eltitular">HEADER</div>
  <div id="sidebar">RIGHT CONTENT</div>
  <div class="lacarta">LEFT CONTENT</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:33:11.030

添加父容器：

```
<div class="mancha">
    <div class="logo"></div>    
    <div id="content-area" class="espacio">
             <div class="eltitular">HEADER</div>
             <div>
                 <div class="lacarta">LEFT CONTENT</div>
                 <div id="sidebar">RIGHT CONTENT</div>
             </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:39:58.307

这个jsfiddle是否修复它：http: [//jsfiddle.net/hgrHq/](http://jsfiddle.net/hgrHq/)

```
.lacarta{
    width:590px;
    float:left;
} 
```

只是稍微减小了 .lacarta 的宽度。

顺便说一句，您可能需要考虑一个响应式网格系统来像这样布置您的 coulmns。例如：

[http://cssgrid.net/](http://cssgrid.net/)

[http://semantic.gs/](http://semantic.gs/)

这样你就不会遇到这样的排队问题......它会响应所有屏幕尺寸。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-04T12:36:59.260

Prob到底是什么……？？我刚刚测试了链接，发现那些菜单没有对齐..这里的解决方案是`.menu li{ float:left}`..如果可能的话，只需放一个屏幕截图:)

# java - JavaMail getSentDate 如何让我获得正确的当地时间？

> ID：15811036
> 
> 赞同：0
> 
> 时间：2013-04-04T12:23:57.967
> 
> 标签：java, email, jakarta-mail

我知道在电子邮件标题中，发送日期相对于 UTC 表示，但是当我使用 getSentDate() 时，它会显示正确的本地时间。

为了防止将来出现错误，我想知道这到底是怎么发生的？JavaMail 如何知道我的时区并正确转换标题中的发送日期？我会提到，在我的代码中我从未指定过时区。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:56:59.327

JavaMail 不这样做，它是 JDK Date 类。它会向您的操作系统询问您的本地时区。

# java - 在 Hibernate 中预取一些查询结果有意义吗？

> ID：15811038
> 
> 赞同：1
> 
> 时间：2013-04-04T12:24:00.797
> 
> 标签：java, performance, hibernate, caching, ehcache

在探索我的新项目时，我遇到了一些遗留代码，其含义是将一些查询结果显式预取到 Hibernate 缓存中。

该代码解决的任务是根据某些属性值选择实体。

例如：

```
 SELECT c
    FROM MyEntity c
    LEFT OUTER JOIN c.relatedEntity relatedEntity
    WHERE c.field1 = :param1 AND relatedEntity.field1 = :param2 AND relatedEntity.field2 = :param3 
```

建议的改进是在运行此查询之前预取所有实体，即在主要查询之前运行以下查询之一：

```
 SELECT c, relatedEntity FROM MyEntity c LEFT OUTER JOIN c.relatedEntity relatedEntity 
```

或者

```
 SELECT FROM MyEntity;
    SELECT FROM RelatedEntity; 
```

您如何看待这种优化？能有用吗？如果“是”，在哪些情况下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:02:33.310

当然它会很有用。如果您的 ehcache 和应用程序代码配置正确，这就是某种“[缓存预热](https://stackoverflow.com/questions/434259/what-is-a-warm-up-cache)”。这将使您的应用程序立即受益于二级缓存，甚至可能从数据库缓存中受益，从而提高“首次”性能。
我们实际上做了很多缓存预热，以便将新启动的主机直接暴露给流量，而不会让我们的用户体验到由于缓存初始化而导致的性能下降。

# oracle - 每个项目明智地计算条件

> ID：15811039
> 
> 赞同：2
> 
> 时间：2013-04-04T12:24:02.633
> 
> 标签：oracle

我在表 emp 中有 2 列工作和部门。

```
job                   department
-------------------------------------------
manager              accounting
president            accounting
manager              accounting
clerk                accounting
manager              accounting
manager              accounting
manager              accounting
clerk                accounting
analyst              accounting
security             accounting
security             accounting
clerk                accounting
analyst              accounting
security             accounting 
```

我需要提取如下数据

```
status       status_numbers        status2           status_numbers2            outstanding                     total
-----------------------------------------------------------------------------------------------------------------
manager             5              manager               14                 total-status_numbers2               14
president           1              president             9                  total-status_numbers2               14 
clerk               3              clerk                 8                  total-status_numbers2               14
analyst             2              analyst               5                  total-status_numbers2               14
security            3              security              3                  total-status_numbers2               14 
```

在 status_numbers2 列中，我们需要按以下方式为 manager o 从 progress_cmc_status_numbers 字段 (14) 中提取经理、总裁、文员、分析师、安全性的数据

总裁、文员、分析师、progress_cmc_status_numbers 字段中的安全的总和 (9)

对于来自 progress_cmc_status_numbers 字段的文员、分析师、安全的文员总和 (8)

对于分析员的分析员总和，来自 progress_cmc_status_numbers 字段的安全性 (5)

来自 progress_cmc_status_numbers 字段的安全总和 (3)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:57:50.060

尝试这样的事情：

```
select status ,status_numbers, SUM(status_numbers) OVER (ORDER BY ordr desc ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) status_numbers2
from
(
select "job" status, count(*) status_numbers , decode("job", 'manager', 1, 'president',2, 'clerk', 3,'analyst', 4, 'security', 5) ordr
from emp
group by "job") t 
```

[这是一个sqlfiddle](http://www.sqlfiddle.com/#!4/1d7ba/9)

# javascript - jQuery动画功能不适用于显示和-webkit-transform属性

> ID：15811045
> 
> 赞同：1
> 
> 时间：2013-04-04T12:24:20.483
> 
> 标签：javascript, jquery

以下代码适用于除 display 和 -webkit-transform 属性之外的所有属性。

```
// Example 1 :

$(this).animate({
               "color":"#efbe5c",
               "display":"block"
},1000);

 // Example 2 :

$(this).animate({
              "-webkit-transform":"rotate(30deg)"
},1000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:28:01.277

来自[`animate`](http://api.jquery.com/animate/)s 文档：

> 所有动画属性都应动画为单个数值，除非以下说明；**大多数非数字属性无法使用基本的 jQuery 功能进行动画处理**（例如，宽度、高度或左侧可以进行动画处理，但背景颜色不能进行动画处理，除非使用 jQuery.Color() 插件）。

但是，`opacity`会褪色到给定的值。

jQuery 在他们的页面上的“基本用法”下有一个这样的例子[`animate`](http://api.jquery.com/animate/)来动画任何元素，比如一个简单的图像：

**HTML**

```
<div id="clickme">
  Click here
</div>
<img id="book" src="book.png" alt="" width="100" height="123"
  style="position: relative; left: 10px;" /> 
```

**jQuery**

```
$('#clickme').click(function() {
  $('#book').animate({
    opacity: 0.25,
    left: '+=50',
    height: 'toggle'
  }, 5000, function() {
    // Animation complete.
  });
}); 
```

您还可以设置一个`toggle`值，`opacity`如下所示：

```
$( "p" ).animate({
  height: "toggle", opacity: "toggle"
}, "slow" ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T12:28:53.617

您应该为元素的 opacity 属性而不是它的显示类型设置动画。

首先将它的 css 设置为`display:block`并`opacity:0`使其不可见，然后将其 opacity 属性设置为`opacity:1`.

```
$(this).css({"display":"block","opacity":0})animate({"opacity":"1"},1000); 
```

如果没有外部 jQuery 插件，颜色也无法动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T12:29:22.013

.animate() 方法允许我们在任何数字 CSS 属性上创建动画效果。唯一需要的参数是 CSS 属性的普通对象。这个对象类似于可以发送到 .css() 方法的对象，只是属性的范围更受限制。

```
$("#block").animate({
    width: "70%",
    opacity: 0.4,
    marginLeft: "0.6in",
    fontSize: "3em",
    borderWidth: "10px"
    }, 1500 ); 
```

[演示](http://jsfiddle.net/CmgH9/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T13:23:22.150

`opacity`这是一个为和 设置动画的示例`-webkit-transform`。

请注意，我们正在使用`step`回调`-webkit-transform`函数，因为 jQuery 不知道如何`rotate(30deg)`开箱即用地制作动画：

```
var $test = $('#test');
$test.animate({
    opacity: 1
}, {
    step: function(now, fx) {
        $test.css('-webkit-transform', 'rotate(' + (30 * now) + 'deg)');
    }
}, 1000); 
```

演示：http: [//jsfiddle.net/CBWjh/](http://jsfiddle.net/CBWjh/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T12:35:46.850

你可以这样写你的代码：

```
 $(this).animate({
                   "color":"#efbe5c"                   
    },1000).show(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T12:36:44.890

更好地使用不透明度

```
$(this).animate({
           "color":"#efbe5c",
           "opacity":"1",},1000); 
```

# extjs - 如何扩展 Ext.grid.header.container 类

> ID：15811047
> 
> 赞同：0
> 
> 时间：2013-04-04T12:24:22.590
> 
> 标签：extjs, extjs4.1, extjs-mvc

我的项目中有 10 个网格，我想在其中定义一个额外的标题，该标题将在双击时打开菜单，单击将返回 null。此功能在我的 3.4 版本中运行良好。但不知何故，我无法扩展“Ext.grid.header.container”类。任何建议为什么？请参考下面我的代码。

```
Ext.define('Ext.grid.HeaderColumnModel', {

    extend: 'Ext.grid.header.container',

    initComponent: function()
    {
         this.callParent();
    }
}

Usage

columns : new Ext.grid.HeaderColumnModel()
OR
colModel:  new Ext.grid.HeaderColumnModel() 
```

# ios - 带有 UIAlertViewStyleSecureTextInput 的 UIAlertView：重新获得活动后清除字段

> ID：15811053
> 
> 赞同：0
> 
> 时间：2013-04-04T12:24:33.047
> 
> 标签：ios, objective-c, uialertview

我有`UIAlertView`风格`UIAlertViewStyleSecureTextInput`。它工作完美。但是当应用程序退出活动，然后重新激活时，之前输入到文本输入中的文本......仍然可见。但是当我试图附加一些下一个字符时，所有以前的文本都突然消失了。这种行为可能是什么原因，以及如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:37:30.280

这是 的默认行为`UIAlertViewStyleSecureTextInput`。

该功能类似于`UITextField`将属性`secureTextEntry`设置为`YES`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:26:42.253

**第一种方式**

**在你的 ViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    alert = [[UIAlertView alloc]init];
    [alert setDelegate:self];
    [alert setAlertViewStyle:UIAlertViewStyleSecureTextInput];
    [alert show];
}

- (void)setText
{
    UITextField *txt =   [alert textFieldAtIndex:0];
    [txt setText:@""];
} 
```

**在你的 viewController.h**

**设置委托**

```
#import "AppDelegate.h"
@interface ViewController : UIViewController <UIPopoverControllerDelegate,alerttext> 
```

**在你的 appdelegate.h**

```
@protocol alerttext <NSObject>
- (void)setText;
@end
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    id <alerttext> delegate;
}
@property (strong, nonatomic) id <alerttext> delegate;
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *viewController;
@end 
```

**在你的 appDelegate.m**

```
@synthesize delegate;

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [self.viewController setText];
} 
```

**第二种方式**

**在你的 viewcontroller.m**

```
UITextField *text;
@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    alert = [[UIAlertView alloc]init];
    [alert setDelegate:self];
    [alert setAlertViewStyle:UIAlertViewStyleSecureTextInput];
    [alert show];
     text =   [alert textFieldAtIndex:0];
}
- (void)setText
{
    [text setText:@""];
} 
```

**在您的 ViewController.h 中，只需声明此方法**

```
- (void)setText; 
```

**在你的 appdelegate.m 中只需放置这个**

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [self.viewController setText];
} 
```

# php - 不能从 localhost 上的 ipn 获取 post vars 吗？

> ID：15811054
> 
> 赞同：-2
> 
> 时间：2013-04-04T12:24:34.343
> 
> 标签：php, paypal, paypal-ipn

我在 google 中搜索了很多关于在 localhost 中使用 ipn(paypal) 的信息。但是我无法找到任何解决方案。甚至有可能获得 IPN post vars ?? `http://locahost/web_folder/page.php`我在通知网址中试过这个 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:27:41.343

您需要使您的网络服务器可公开访问才能使用 IPN。IPN**不是**基于返回的机制（PDT 就是这样做的）。相反，当交易进入时，PayPal 会自动 ping 您的服务器。

贝宝的本地主机不是您的本地主机。为了让 PayPal 准确 ping 正确的服务器，您需要将其公开，并将您的 IPN URL 设置为正确的、外部可访问的 URL。

希望这有帮助。

# javascript - Angular JS 从 1.1.0 升级到 1.1.1 后失败

> ID：15811062
> 
> 赞同：4
> 
> 时间：2013-04-04T12:24:56.797
> 
> 标签：javascript, angularjs, angularjs-ng-repeat, angular-resource

当我升级 ng-repeat 需要非常长的时间来加载并尝试显示更多内容框而没有 $resource 提供的内容。

我已将问题缩小到 1.1.0 和 1.1.1 之间的更新。我查看了更新日志，但没有任何内容显示我是罪魁祸首，但它一定在里面。

变更日志 => [https://github.com/angular/angular.js/blob/master/CHANGELOG.md#111-pathological-kerning-2012-11-26](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#111-pathological-kerning-2012-11-26)

此应用程序的存储库 => [https://github.com/brianpetro/resume](https://github.com/brianpetro/resume)

目前我的角度看起来像：

```
app = angular.module("Resume", ["ngResource"])

app.factory "Entry", ["$resource", ($resource) ->
  $resource("/entries")
]

@EntryCtrl = ["$scope", "Entry", ($scope, Entry) ->
  $scope.entries = Entry.query()
] 
```

这发生在使用 ng-repeat 的多个视图上：

```
<html ng-app="Resume">
  <div ng-controller="EntryCtrl">
    <ul>
      <li ng-repeat="entry in entries">
        {{entry.title}}
      </li>
    </ul>
  </div>
</html> 
```

这是 AngularJS 版本 1.1.0： ![这是 AngularJS 版本 1.1.0](https://i.stack.imgur.com/0TjA1.jpg) 这是 AngularJS 版本 1.1.1： ![这是 AngularJS 版本 1.1.1](https://i.stack.imgur.com/fyG9i.jpg)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T20:43:19.183

您必须添加 .json 并不完全正确——至少从我从 1.0.x 切换到 1.1.x 时的经验来看是这样。

为了使 Rails 应用程序返回 json 而无需在 Angular 1.1.x 的 URL 中指定扩展名，您需要使 Angular 向 http 请求添加额外的标头：

```
myModule.config(['$httpProvider', function ($httpProvider) {
    $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
}]);
```

没有那个 Rails 默认会渲染整个 HTML 而不是返回 JSON。

[Github问题反映了这一点](https://github.com/angular/angular.js/issues/1004)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:21:17.710

答案在 URL 文件扩展名中。从 Angular 1.1.1 版开始，需要在资源中包含“.json”。

```
 app = angular.module("Resume", ["ngResource"])

 app.factory "Entry", ["$resource", ($resource) ->
-  $resource("/entries")
+  $resource("/entries.json", {}, {}, {})
 ]

 app.factory "Done", ["$resource", ($resource) ->
-  $resource("/dones", {}, {update: {method: "PUT"}})
+  $resource("/dones.json", {}, {update: {method: "PUT"}}, {})
 ]

 app.factory "Resource", ["$resource", ($resource) ->
-  $resource("/resources", {}, {})
+  $resource("/resources.json", {}, {}, {})
 ] 
```

有人可以澄清这是因为我的 Rails 4 后端还是新的 Angular 要求？

# java - java_give_question_to_me

> ID：15811067
> 
> 赞同：0
> 
> 时间：2013-04-04T12:25:09.217
> 
> 标签：java

我有一个应用程序，其中带有 SIN、COS 的图片。如果用户这样做，TextArea1 会告诉某人：“点击图片中的 SIN”，textArea2 告诉他：“它是正确的”

之后，textArea1.append "点击图片中的COS"-但程序仍在等待点击SIN :(你能帮帮我，给我一点建议吗？

有一些代码：

```
private class KlikaniMysi implements MouseListener {
    @Override
    public void mouseClicked(MouseEvent e) {
        System.out.println(e.getX() + "  " + e.getY());
        //for finding coordinates (by console)
        //textArea2 = "try" at start !!
        //textArea1 = "Find SIN" at start !!!!!!!!
        if(textArea2.equals("try")){
            if( (((e.getX()) > 420)&&((e.getX()) < 580)) && ( ((e.getY()) > 164)&&((e.getY()) < 178) )){
                textArea2.setText("");
                textArea2.append("RIGHT1");
                textArea1.append("Find COS"); //!!!! work!!
                //How to stop the IF cycle here and run class KlikaniMysi (mouselistener) again ?
            }
            else{
                textArea1.setText("");  
                textArea1.append("try again");
            }
        }else{
            if( (((e.getX()) > 586)&&((e.getX()) < 594)) && ( ((e.getY()) > 174)&&((e.getY()) < 282) )){
                //This isnt nice, but I dont know how to expres range better.                        
                textArea1.setText("");
                textArea2.append("Right2");
                textArea1.append("Find  TAN");
            }
            else{
                vystup.setText("");  
                textArea1.append("Try again");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:34:26.927

这段代码还有很多“次优”的方面，但我认为你的问题在这里：

```
if(textArea2.equals("try")) 
```

您想测试该区域的内容，而不是该区域本身，因此将其更改为

```
if(textArea2.getText().equals("try")) 
```

# ios - UIBarButtonItem 活动鼠标区域

> ID：15811069
> 
> 赞同：0
> 
> 时间：2013-04-04T12:25:23.420
> 
> 标签：ios, ios5

我使用了两个 uibarbuttonitems 并在它们之间添加了一个灵活的样式来左右调整它们。但是，当我在按钮附近单击时，会调用相应的操作，即使我没有单击按钮（这里是狐狸示例，我在右栏按钮之前单击了大约 20px）。任何人都可以解释为什么当我单击按钮外部而不是按钮内部时执行该操作。我也用自定义 uitoolbar 检查它，它显示了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:27:50.297

Cocoa-Touch 控件通常具有比它们在屏幕上可见的更大的活动触摸区域。尤其是条形按钮，如果附近没有其他条形按钮，触摸区域可以动态放大。

# validation - 用户名验证在 CreateUserWizard 中不起作用

> ID：15811071
> 
> 赞同：0
> 
> 时间：2013-04-04T12:25:28.630
> 
> 标签：validation, umbraco, createuserwizard

我有一个 CreateUserWizard 供用户注册新帐户。

我添加了我的文本字段和必填字段验证器

但是，当我使用空用户名单击注册按钮时，出现错误：

> 异常详细信息：System.ArgumentException：成员的用户名必须不同于空字符串
> 
> 参数名称：登录名

用户名字段有它的 requiredfieldvalidator 所以它应该可以工作。我还添加了

> 用户名RequiredErrorMessage

属性给向导，但它没有任何区别。

*上面错误信息中提到的loginName*是 LoginView 的一个控件。我在同一页面上有这个，但在注册 CreateUserWizard 期间没有使用它。

为什么会这样？

我的代码：

```
<asp:Panel ID="pnlRegister" runat="server">

<asp:CreateUserWizard ID="cuwRegister" RequireEmail="false"
OnContinueButtonClick="cuwRegister_ContinueButtonClick" 
    OnCreatedUser="cuwRegister_CreatedUser"  
runat="server">
<WizardSteps>
    <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
<ContentTemplate>
<asp:ValidationSummary ID="uxValSummaryRegister" DisplayMode="BulletList" runat="server" ValidationGroup="CreateUserWizard" ForeColor="#FF5555" />
<asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>

            <div class="row">
                <label>Email</label>
                <asp:TextBox ID="UserName" runat="server" />
      <asp:requiredfieldvalidator runat="server" 
                        controltovalidate="UserName" 
                        tooltip="Email is a required"
                        id="reqEmail" 
                        validationgroup="CreateUserWizard" 
                        errormessage="Email is a required" Display="Dynamic">
                        *
                      </asp:requiredfieldvalidator>
                <asp:RegularExpressionValidator ID="revEmail" runat="server" 
                    ControlToValidate="UserName" 
                    ErrorMessage="Enter correct email address" 
                    ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*">*
                </asp:RegularExpressionValidator>
            </div>
            <div class="row">
                <label><umbraco:Macro Item="Confirm email" Alias="Dictionary-Item" runat="server" /></label>
                <asp:TextBox ID="ConfirmEmail" runat="server" />
      <asp:requiredfieldvalidator runat="server" 
                        controltovalidate="ConfirmEmail" 
                        tooltip="Confirm Email address is a required"
                        id="reqConfirmEmail" 
                        validationgroup="CreateUserWizard" 
                        errormessage="Confirm Email address is a required">
                        *
                      </asp:requiredfieldvalidator>
                <asp:CompareValidator runat="server" 
                    id="cmpNumbers" 
                    controltovalidate="ConfirmEmail" 
                    controltocompare="UserName" 
                    operator="Equal"
                    type="String"
                    errormessage="Email and Confirm Email do not match" />
            </div>
            <div class="row">
                <label><umbraco:Macro Item="Password" Alias="Dictionary-Item" runat="server" /></label>
                <asp:TextBox ID="Password" runat="server" TextMode="Password" />
      <asp:requiredfieldvalidator runat="server" 
                        controltovalidate="Password" 
                        tooltip="Password is a required"
                        id="reqPassword" 
                        validationgroup="CreateUserWizard" 
                        errormessage="Password is a required">
                        *
                      </asp:requiredfieldvalidator>
            </div>
            <div class="row">
                <label><umbraco:Macro Item="Confirm password" Alias="Dictionary-Item" runat="server" /></label>
                <asp:TextBox ID="ConfirmPassword" runat="server" TextMode="Password" />
      <asp:requiredfieldvalidator runat="server" 
                        controltovalidate="ConfirmPassword" 
                        tooltip="Confirm Password is a required"
                        id="Requiredfieldvalidator1" 
                        validationgroup="CreateUserWizard" 
                        errormessage="Confirm Password is a required">
                        *
                      </asp:requiredfieldvalidator>
                <asp:CompareValidator runat="server" 
                    id="CompareValidator1" 
                    controltovalidate="ConfirmPassword" 
                    controltocompare="Password" 
                    operator="Equal"
                    type="String"
                    errormessage="Password and Confirm Password do not match" />
            </div>

            <div class="row">
                <label><umbraco:Macro Item="First name" Alias="Dictionary-Item" runat="server" /></label>
                <asp:TextBox ID="txtFirstName" runat="server" />
            </div>
            <div class="row">
                <label><umbraco:Macro Item="Surname" Alias="Dictionary-Item" runat="server" /></label>
                <asp:TextBox ID="txtSurname" runat="server" />
            </div>
            <div class="row">
                <label><umbraco:Macro Item="Date of birth" Alias="Dictionary-Item" runat="server" /></label>
                <asp:TextBox ID="DOB" runat="server" />
      <asp:requiredfieldvalidator runat="server" 
                        controltovalidate="DOB" 
                        tooltip="Date of birth is a required"
                        id="Requiredfieldvalidator2" 
                        validationgroup="CreateUserWizard" 
                        errormessage="Date of birth is a required">
                        *
                      </asp:requiredfieldvalidator>
            </div>

            </ContentTemplate>
            </asp:CreateUserWizardStep>
    <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server"></asp:CompleteWizardStep>
</WizardSteps> 
```

在后面的代码中：

```
protected void cuwRegister_CreatedUser(object sender, EventArgs e)
{
    string email = cuwRegister.UserName;
    string username = cuwRegister.UserName;
    string password = cuwRegister.Password;
    Page.Validate("CreateUserWizard");
    if(Page.IsValid)
        CreateUser(email, username, password);
}

protected void Page_Load(object sender, EventArgs e)
{
    btnRegister.Text = cuwRegister.CreateUserButtonText = umbraco.library.GetDictionaryItem("Register");
    cuwRegister.DuplicateUserNameErrorMessage = umbraco.library.GetDictionaryItem("Duplicated email");
    cuwRegister.DuplicateEmailErrorMessage = umbraco.library.GetDictionaryItem("Duplicated email");
    cuwRegister.InvalidEmailErrorMessage = umbraco.library.GetDictionaryItem("Email address incorrect");
    cuwRegister.InvalidPasswordErrorMessage = umbraco.library.GetDictionaryItem("Password incorrect");
    cuwRegister.EmailRequiredErrorMessage = umbraco.library.GetDictionaryItem("Email required");
    cuwRegister.PasswordRequiredErrorMessage = umbraco.library.GetDictionaryItem("Password required");
    cuwRegister.ConfirmPasswordCompareErrorMessage = umbraco.library.GetDictionaryItem("Password not matching");
    cuwRegister.UserNameRequiredErrorMessage = umbraco.library.GetDictionaryItem("Password not matching");

    Login lwPanelLogin = (Login)lwLogin.FindControl("lwLoginPanel");
    if (lwPanelLogin != null)
    {
        lwPanelLogin.TitleText = umbraco.library.GetDictionaryItem("Already registered? Log in here");
        lwPanelLogin.LoginButtonText = umbraco.library.GetDictionaryItem("Login");
        lwPanelLogin.RememberMeText = umbraco.library.GetDictionaryItem("Remember me next time");
        lwPanelLogin.PasswordLabelText = umbraco.library.GetDictionaryItem("Password");
        lwPanelLogin.UserNameLabelText = "Email";
    }
}

protected void CreateUser(string email, string username, string password)
{
    bool isLoggedIn = System.Web.HttpContext.Current.User.Identity.IsAuthenticated;
    if (Membership.GetUserNameByEmail(email) == null)
    {
        MembershipUser member = Membership.CreateUser("aaa", password, email);
    }

    if(!isLoggedIn)
        if (System.Web.Security.Membership.ValidateUser(username, password))
        {
            FormsAuthentication.SetAuthCookie(username, true);
        }
} 
```

（请注意，我使用用户名字段获取电子邮件，然后使用电子邮件登录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T12:53:54.997

看起来您正在“OnCreatedUser”方法中设置您的用户名。这在向导尝试创建该用户*后触发。*您需要在预先触发的“OnCreatingUser”方法中设置您的用户名。

作为快速获胜，请尝试使用此：

```
... 
<asp:CreateUserWizard ID="cuwRegister" RequireEmail="false" OnContinueButtonClick="cuwRegister_ContinueButtonClick" OnCreatingUser="cuwRegister_CreatedUser" runat="server">
   <WizardSteps>
... 
```

# javascript - javascript 在不同的函数中带回变量；用于天气脚本的谷歌竞价

> ID：15811078
> 
> 赞同：0
> 
> 时间：2013-04-04T12:25:49.913
> 
> 标签：javascript

我有以下 google adwords 脚本，它基本上通过从 wunderground 带回天气来自动调整每日 adword 出价预算（因为产品取决于天气）

它工作正常，这对某些人来说可能是一个简单的解决方案，但这不是我的语言。

目前，它从 google adwords 中带回了名为（名为“getBudget”的函数）的实时每日预算。我想要做的是从我已经连接的 Excel 表中带回每日预算。您可以从下面的 excel 表中看到它从 excel 表中带回了活动名称和位置名称。我补充说，它带回了名为 dbudget 的第三列，这很好，但是

我的问题是这条线

`if (keyword.getBudget()) { keyword.setBudget(keyword.getBudget() * bidMultiplier); } }`

我想带回那个变量（dudget）并在这里使用它，所以它使用 dbudget 而不是 getbudget

IE

`if keyword.dbudget()) { keyword.setBudget(keyword.dbudget() * bidMultiplier); } }`

但它现在不起作用？

脚本是

```
 ----------------

// Register for an API key at http://www.wunderground.com/weather/api/
// and enter the key below.
var WEATHER_UNDERGROUND_API_KEY = "";

// Create a copy of http://goo.gl/IPZo3 and enter the URL below.
var SPREADSHEET_URL = "";

/**
 * The code to execute when running the script.
 */
function main() {
  var data = getSpreadsheetData(SPREADSHEET_URL);
  for (var i = 0; i < data.length; i++) {
    var row = data[i];
    var campaignName = row[0];
    var locationName = row[1];
    var dbudget = row[2];
    try {
      var weather = getWeather(locationName);
      Logger.log(format('Weather for {0} is {1} °F, {2} mph, and {3} in of rain. Current Daily Budget of £{4}',
          locationName, weather['temp_f'], weather['wind_mph'],
          weather['precip_today_in'], dbudget));
    } catch (error) {
      Logger.log(format('Error getting weather for {0}: {1}', locationName, error));
      continue;
    }
    var bidMultiplier = getBidMultiplier(weather);
    if (bidMultiplier != 1) {
      Logger.log(format('Setting bids to {0}% for campaign "{1}"',
          Math.floor(bidMultiplier * 100), campaignName));
      adjustBids(campaignName, bidMultiplier);
    } else {
      Logger.log(format('No bid changes for campaign "{0}".', campaignName));
    }
  }
}

/**
 * Retrieves the campaign names and weather locations from the spreadsheet.
 * @param {string} spreadsheetUrl The URL of the spreadsheet.
 * @return {Array.<Array.<string>>} an array of campaign names and location
 *     names.
 */
function getSpreadsheetData(spreadsheetUrl) {
  var spreadsheet = SpreadsheetApp.openByUrl(spreadsheetUrl);
  var sheet = spreadsheet.getSheets()[0];
  var range =
    sheet.getRange(2, 1, sheet.getLastRow() - 1, sheet.getLastColumn());
  return range.getValues();
}

/**
 * Retrieves the weather for a given location, using the Weather Underground
 * API.
 * @param {string} location The location to get the weather for.
 * @return {Object.<string, string>} The weather attributes and values, as
 *     defined in the API.
 */
function getWeather(location) {
  var url = format('http://api.wunderground.com/api/{0}/conditions/q/{1}.json',
      encodeURIComponent(WEATHER_UNDERGROUND_API_KEY),
      encodeURIComponent(location));
  var response = UrlFetchApp.fetch(url);
  if (response.getResponseCode() != 200) {
    throw format('Error returned by API: {1}', response.getContentText());
  }
  var result = JSON.parse(response.getContentText());
  if (!result['current_observation']) {
    throw format('Invalid location: {0}', location);
  }
  return result['current_observation'];
}

/**
 * Determines the bid multiplier to use based on the weather data.
 * @param {Object} weather The weather data to analyze.
 * @return (number) The bid multiplier to apply.
 */
function getBidMultiplier(weather) {
  // Higher score means higher bids.
  var score = 0;
  // Temperature.
  if (weather['temp_f'] < 30) {score-= 5;} 
  else if (weather['temp_f'] >= 30 && weather['temp_f'] <= 35 ) {score-= 4;}
  else if (weather['temp_f'] >= 36 && weather['temp_f'] <= 40 ) {score-= 3;}
  else if (weather['temp_f'] >= 41 && weather['temp_f'] <= 45 ) {score-= 2;}
  else if (weather['temp_f'] >= 46 && weather['temp_f'] <= 50 ) {score-= 1;}
  else if (weather['temp_f'] >= 51 && weather['temp_f'] <= 55 ) {score-= 0;}
  else if (weather['temp_f'] >= 56 && weather['temp_f'] <= 60 ) {score-= 0;}
  else if (weather['temp_f'] >= 61 && weather['temp_f'] <= 65 ) {score+= 1;}
  else if (weather['temp_f'] >= 66 && weather['temp_f'] <= 70 ) {score+= 2;}
  else if (weather['temp_f'] >= 71 && weather['temp_f'] <= 75 ) {score+= 3;}
  else if (weather['temp_f'] >= 76 && weather['temp_f'] <= 80 ) {score+= 4;}
  else if (weather['temp_f'] > 81) {score+= 5;} 

  // Increase/decrease bid by 10% for each score point.
  return 1 + (0.1 * score);
}

/**
 * Adjusts the bids on all keywords in the campaign using the bid multiplier.
 * @param {string} campaignName The name of the campaign.
 * @param {number} bidMultiplier The bid multiplier to use.
 */
function adjustBids(campaignName, bidMultiplier, dbudget) {
  var selector = AdWordsApp.campaigns().withCondition(
      format('CampaignName = "{0}"', campaignName));
  var iterator = selector.get();
  while (iterator.hasNext()) {
    var keyword = iterator.next();
    if (keyword.getBudget()) {
      keyword.setBudget(keyword.getBudget() * bidMultiplier);  }
     }

}

/**
 * Formats a string using "{0}" style placeholders.
 * @param {string} str The format string.
 * @param {...string} var_args The values to insert into the format string.
 * @return {string} The formatted string.
 */
function format(str, var_args) {
  for (var i = 0; i < arguments.length - 1; i++) {
    var reg = new RegExp('\\{' + i + '\\}', 'gm');
    str = str.replace(reg, arguments[i + 1]);
  }
  return str;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:40:35.613

您似乎想使用已连接的电子表格中的预算值；而不是从 Google AdWords 函数返回的预算值。那是对的吗？

如果是这样，那么您需要做的是将 dbudget 值从您计算的任何位置传递到函数中并使用它。

似乎您在 main() 内部计算 dbudget ，因此您会将其传递给 adjustBids()

由于 adjustBids 在其函数声明中已经将 dbudget 作为第三个参数，因此您不必更改它。相反，您只需更改对 adjustBids 的调用（来自主函数）

```
adjustBids(campaignName, bidMultiplier, dbudget); 
```

然后像这样更改 adjustBids 函数：

```
if (dbudget) {
  keyword.setBudget(dbudget * bidMultiplier);
 } 
```

请记住，这假设您与电子表格中的广告系列名称与 Google Ad 函数将返回的广告系列名称保持 1:1 的关系。如果存在不匹配，那么事情可能会变得……奇怪。

# javascript - 停止在 javascript 中重定向

> ID：15811079
> 
> 赞同：2
> 
> 时间：2013-04-04T12:25:51.843
> 
> 标签：javascript, html

您好正在开发一个包含在 sharepoint 应用程序中的 webpart，在某些情况下我需要停止重定向。但它不起作用，我正在尝试使用

```
$('a').click(function(event){
                event.preventDefault();
                event.stopImmediatePropagation();
                return false;
            }); 
```

它执行并且无论如何重定向完成。我怎样才能打破它？

目的是：当用户在页面上更改某事时，我需要询问他是否要继续，然后停止从他可能点击的其他链接的任何重定向。

编辑：我刚刚检查并使用带有链接的常规 a 它可以工作，但问题在于这样的链接：

```
<a title="Delivery And Technology" class="ms-cui-ctl-large" id="someId" role="button" onclick="return false;" href="javascript:;" unselectable="on" mscui:controltype="" jQuery182001210093900916337="93"> 
```

里面有这个html

```
<SPAN class=ms-cui-ctl-largeIconContainer unselectable="on"><SPAN class=" ms-cui-img-32by32 ms-cui-img-cont-float ms-cui-imageDisabled" unselectable="on"><IMG style="TOP: -96px; LEFT: -160px" alt="Delivery And Technology" src="/_layouts/1033/images/ps32x32.png" unselectable="on"></SPAN></SPAN><SPAN class=ms-cui-ctl-largelabel unselectable="on">Delivery And<BR>Technology</SPAN> 
```

所以似乎当我点击这个java脚本时识别它并重定向我所以我想要实现的是检测它并在它将我重定向到其他页面之前停止。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T12:28:35.007

这也将防止动态添加的锚点导航：

```
$(document).on('click', 'a', function(e){
     e.preventDefault();
     e.stopImmediatePropagation();
     return false;
}); 
```

steveukx 建议速记：

```
$(document).on('click', 'a', false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:29:14.867

我最好的猜测是您在 DOM 准备好之前运行此代码。尝试将其包装在[DOM-ready 回调](http://api.jquery.com/ready/)中：

```
$(function () {
    $('a').click(function(event){
        return false;
    });
}); 
```

*请注意，返回 false 等价于`.preventDefault()`and`.stopImmediatePropagation()`一起，因此仅返回 false 就足够了。在您的情况下，仅使用它可能更合适，`.preventDefault()`但没有别的。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:50:42.490

如果元素在代码执行之前附加了处理程序，则无法可靠地删除或阻止处理程序运行。

假设你`jQuery`有空，并且在元素被添加到 DOM 并附加了它的处理程序之后运行这个函数，你可以用相同的元素替换它：

```
jQuery('a').replaceWith(function(index, innerHTML) {
  return jQuery(this.cloneNode(false)).html(innerHTML);
}); 
```

# python - python包开发如何实现跨平台持续集成？

> ID：15811082
> 
> 赞同：1
> 
> 时间：2013-04-04T12:25:55.493
> 
> 标签：python, jenkins, continuous-integration, travis-ci

我正在开发一些 python 包，我确实想在将它们发布到 PyPi 之前执行适当的测试。

这将需要运行单元测试

*   不同的python版本：2.5、2.6、2.7、3.2
*   不同的操作系统：OS X、Debian、Ubuntu 和 Windows

现在我正在使用 pytest

问题：我怎样才能轻松地实现这一点，最好将结果公开并与 github 集成，这样任何推送的人都会知道结果。

注意：我已经知道[https://travis-ci.org/](https://travis-ci.org/)但这似乎缺少跨平台部分，这在这种情况下是必不可少的。

我正在考虑的另一个选择是使用 Jenkins，但我不知道如何提供矩阵测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:34:55.597

我用过 Jenkins，我会推荐它。它有大量的插件，并且是非常可配置的。

我用它在 windows/linux/mac/mobile 平台上运行项目，进行健全性、单元、组件和回归测试。

它可以支持项目和测试的链接，在您的测试环境进行时对要监控的项目进行指纹识别，您还可以设置用户并跟踪更改。

您可以将它同时用于生产和测试，将其连接到您的 git 存储库，您所做的任何更改都会自动通过您想要的所有挑战。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:29:40.157

您可以使用它[`tox`](http://codespeak.net/tox/index.html)来自动设置虚拟环境并跨 Python 版本运行测试：

```
[tox]
envlist = py25,py26,py27,py32
[testenv]
commands=py.test 
```

Tox 支持 Python 2.4 及更高版本，以及 Jython 和 PyPy。

如果您想查看使用 的真实项目`tox`，请查看[`zope.configuration` `tox.ini`配置](https://github.com/zopefoundation/zope.configuration/blob/master/tox.ini)。该软件包包括[关于如何运行`tox`测试](http://docs.zope.org/zope.configuration/hacking.html#running-tests-on-multiple-python-versions-via-tox)的优秀文档。这些测试由[Zope 每晚测试构建器](http://docs.zope.org/zopetoolkit/process/buildbots.html#the-nightly-builds)自动运行。

将 tox 配置为[在 Jenkins 下运行](http://tox.readthedocs.org/en/latest/example/jenkins.html)很简单，并且有完整的文档记录。

# c# - 从类库中引用父窗体

> ID：15811083
> 
> 赞同：1
> 
> 时间：2013-04-04T12:25:57.230
> 
> 标签：c#, forms, reference, class-library

我一直在尝试将我所有的类编译成一个类库，这是一个非常好的特性。我的目标是在其中包含不包含特定应用程序代码的所有代码。当我尝试添加一个引用父表单的类时，我遇到了问题，因为类库中没有父表单。如何创建对在应用程序中创建父类之前未知的表单的引用？

```
public class Form1 : Form
{

private Child child;

public Form1()
{
    child = new Child(this);
}

}

public class Child
{

    private Form1 parent;
    public Child(Form1 parent)
    {
        this.parent = parent;
    }

} 
```

此代码在标准应用程序中工作，但是当我将 Child 类添加到类库时，“Form1”文本将无法编译，因为 Form1 不包含在类库中。有没有办法解决？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:27:42.670

由于`Form1`派生自`Form`，为什么不将`Form`其作为构造函数的参数`Child`？

```
public class Child
{
    private Form parent;
    public Child(Form parent)
    {
        this.parent = parent;
    }
} 
```

这至少会打破你的类库对你的应用程序的依赖，但它仍然需要对 WinForms 的依赖`Form`。这取决于您打算`parent`在代码中做什么，但这是否足够。

# c# - 如何将字符串转换为 nvarchar？

> ID：15811084
> 
> 赞同：2
> 
> 时间：2013-04-04T12:25:59.773
> 
> 标签：c#, winforms, entity-framework

我有一个文本框，我想将输出结果保存为**Unicode** （`nvarchar`在 SQL Server 中），对于我使用实体框架的保存操作，我的代码工作正常，我的问题只是将文本框结果转换为 Unicode，因为当我将结果保存为“？” 在 Sql 服务器中。注意：**我使用阿拉伯字母。**，这是我的代码，列定义： **代码**：

```
//Button add new car into database
    private void BtnAddNewCar_Click(object sender, EventArgs e)
    {
        v.brand = TxBoxBrand.Text;
        v.car_number = TxBoxCarNumber.Text;//Text Box that i want to convert to Unicode (Arabic letters)
        v.color = CmBoxColorPicker.Text;
        v.model = TxBoxModel.Text;
        v.picture = ImageToByteArray(filename);
        v.cin_driver= CmBoxCarOwner.Text;
        context.Vehicles.Add(v);
        context.SaveChanges();
        NotifyWelcome.ShowBalloonTip(1000, "The vehicle " + TxBoxBrand.Text + " was successfully added", " Have a ice drive", ToolTipIcon.Info);
        CarClear();
        VLoad.Enabled = true;
        CmVLoad.Enabled = false;
        MyMessageBox.ShowBox("The vehicle " + TxBoxBrand.Text + " as successfully added", "Notify");
    } 
```

**列定义**：

```
// TxBoxCarNumber
        // 
        this.TxBoxCarNumber.Font = new System.Drawing.Font("Ubuntu", 9F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.TxBoxCarNumber.Location = new System.Drawing.Point(272, 30);
        this.TxBoxCarNumber.Name = "TxBoxCarNumber";
        this.TxBoxCarNumber.Size = new System.Drawing.Size(142, 21);
        this.TxBoxCarNumber.TabIndex = 0;
        this.TxBoxCarNumber.TabStop = false; 
```

# r - 如何在 R 中指定列表的级别？

> ID：15811085
> 
> 赞同：1
> 
> 时间：2013-04-04T12:26:01.117
> 
> 标签：r, list

我想命名列表的级别，就像在命名矩阵的行`rownames()`和`colnames()`列时一样。

例子：

```
a<-matrix(rep(1,4),2,2)
b<-matrix(rep(2,9),3,3)
list<-list(a,b)
print(list) 
```

`[[1]]`我不想在第一级返回，而是希望列表使用一些字符串，如“矩阵 a”。也许这很简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:28:09.017

只需使用`names`：

```
names(list) = c("A","B")

> list
$A
     [,1] [,2]
[1,]    1    1
[2,]    1    1

$B
     [,1] [,2] [,3]
[1,]    2    2    2
[2,]    2    2    2
[3,]    2    2    2

list[["A"]]
     [,1] [,2]
[1,]    1    1
[2,]    1    1 
```

请注意，一般来说，使用 R 保留字（例如`list`变量名）并不是一个好习惯。

# grails-2.0 - 如何在grails控制器中获取完整路径

> ID：15811088
> 
> 赞同：0
> 
> 时间：2013-04-04T12:26:07.220
> 
> 标签：grails-2.0

我想使用类似于 HttpServletRequest.getPathInfo(); 它返回请求的整个路径。这在java中使用，我试图在Grails中找到类似的东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:02:47.717

该`request`对象是 Servlet API 的 HttpServletRequest 接口的一个实例。

您应该在您的控制器中尝试：（为了在网页中显示请求的整个路径）

```
def index = { render request.forwardURI } 
```

# linq - 从对象列表中获取值

> ID：15811089
> 
> 赞同：0
> 
> 时间：2013-04-04T12:26:10.273
> 
> 标签：linq, list, c#-3.0

我有一个对象列表 Employee

```
public struct Employee
{
    public string role;
    public string id;
    public int salary;
    public string name;  
    public string address;          
} 
```

我想获取 name 和 id 属性与条件匹配的对象。我试过用这个：

```
List<Employee> EleList = new List<Employee>();
var employee=  EleList.Find(sTag => sTag.id == 5b && sTag.name== "lokendra"); 
```

这非常耗时，因为列表大小介于`20000-25000`. 是否有任何其他方法可以检索结果。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:33:08.330

您可以通过使用适当的集合类型（例如字典）来加快这一速度。

如果 的`id`是`Employee`唯一的，您可以将其用作类型字典中的键`Dictionary<string, Employee>`。搜索将如下所示：

```
Employee employee;
if(dict.TryGetValue("5b", out employee) && employee.name == "lokendra")
    // employee found
else
    // employee not found 
```

创建字典如下所示：

```
dict = EleList.ToDictionary(x => x.id, x => x); 
```

* * *

如果它不是唯一的但合理集中（只有少数员工具有相同的 id），您可以将其用作类型字典中的键`Dictionary<string, List<Employee>>`。搜索将如下所示：

```
Employee GetEmployee(string id, string name)
{
    List<Employee> employees;
    if(!dict.TryGetValue(id, out employees))
        return null;
    return employees.FirstOrDefault(x => x.name == name);
} 
```

创建字典如下所示：

```
dict = EleList.GroupBy(x => x.id)
              .ToDictionary(x => x.Key, x => x.ToList()); 
```

* * *

请注意：
在这两种情况下，您应该只创建一次字典，而不是每次搜索。所以基本上，而不是`EleList`你应该有字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:13:43.290

展示 John Skeet 在对 Daniel Hilgarth 的评论中的设想

```
static ILookup<string, Employee> _employeeMap = EleList.ToLookup(x => x.id);

Employee GetEmployee(string id, string name)
{
    return employeeMap[id].FirstOrDefault(x => x.Name == name);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T12:31:50.310

您可以尝试使用 Linq

```
yourList.Where(sTag => sTag.id == 5 && string.Equals(sTag.name, "lokendra", StringComparison.OrdinalIgnoreCase)).ToList(); 
```

# android - 在android的不同xml文件中使用相同的id名称

> ID：15811090
> 
> 赞同：3
> 
> 时间：2013-04-04T12:26:12.017
> 
> 标签：android, xml

我可以在不同的 xml 文件中的其他布局中使用相同的 id 名称吗？？？因为我已经这样做了，也许是因为我得到了一个空指针异常，而我对该 xml 的活动没有开始......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:41:32.963

绝对地。您可以在所需的任意数量的布局中为相同`Widget`类型使用相同的 ID。**只是同一布局 XML 中的 ID 不同。**当然，无需讨论是否推荐这样做。

是什么让几个开发者感到困惑，我承认，当我开始时，它也让我感到困惑。例如，在 Activity 中投射一个 Widget 时，我经常感到困惑，为什么我只有一个匹配的 ID，而我在几个不同的布局中有相同的 ID。

您唯一需要注意的是，例如，考虑这个场景：

我有两个 XML 命名为 say`layout_1.xml`和`layout_2.xml`2 个对应`Activities`的命名为 say`Act1`和`Act2`。现在，两者都具有相同`Widget`的 ，`TextView`即在两个 XML 中具有相同 ID 的相同。( `Although I am using this example, this is not hypothetical. This is actually how it is in an application of mine`)。*这与NullPointer*在他的评论中所说的完全矛盾。我认为他的意思是你不能在同一个 XML 中使用同一个 ID。

```
<TextView
    android:id="@+id/txtFromName"
    style="@style/UserName"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:ellipsize="marquee"
    android:gravity="top|left|center"
</TextView> 
```

现在，当我在我的代码中投射这个时，看看我开始输入时建议中显示的内容`findViewById(R.id.txtFrom...)`

![在此处输入图像描述](https://i.stack.imgur.com/S9uE7.png)

当您在多个 XML 文件中使用相同的 ID 时，为什么会出现**NPE**可能是由于对 ID 是什么的一些混淆。保持相应的 XML 打开并在投射时检查 ID，你应该一切顺利。如果它仍然存在，我建议使用您的 XML 代码、Java 代码和 LogCat 崩溃报告更新您的帖子。

我通过逐字复制 ID 并在投射时使用与 Widget 实例相同的名称来跟踪这一点。但是，这只是我想的方式。

# c# - c#异常进程无法访问文件

> ID：15811093
> 
> 赞同：4
> 
> 时间：2013-04-04T12:26:23.627
> 
> 标签：c#, .net, ioexception

我遇到了一个例外：该进程无法访问该文件。

这是代码：

```
if (!Monitor.TryEnter(lockObject))
    return;
try
{
    watcher.EnableRaisingEvents = false;
    try
    {
        XmlDocument xdoc = new XmlDocument();
        xdoc.Load(FileName);
        xdoc = null;
    }
    catch (XmlException xe)
    {
        using (StreamWriter w = File.AppendText(FileName))
        {
            Console.WriteLine(xe);
            w.WriteLine("</test>");
            w.WriteLine("</testwrapper>");
        }
    }
    System.Threading.Thread.Sleep(2000);
    XPathDocument myXPathDoc = new XPathDocument(new StreamReader(FileName, System.Text.Encoding.GetEncoding("windows-1256")));
    XslCompiledTransform myXslTrans = new XslCompiledTransform();
    myXslTrans.Load("D:/GS/xsl/test.xsl");
    XmlTextWriter myWriter = new XmlTextWriter(destinationFile, null);
    myWriter.Formatting = Formatting.Indented;
    myWriter.Indentation = 4;
    myXslTrans.Transform(myXPathDoc, null, myWriter);
    myWriter.Close();
}
catch (Exception e)
{
    Console.WriteLine("The process failed: {0}", e.ToString());
}
finally
{
    Monitor.Exit(lockObject);
    watcher.EnableRaisingEvents = true;
    GC.Collect();
    GC.WaitForPendingFinalizers();
    GC.Collect();
} 
```

在我添加这些行之前，代码运行良好。这些主要用于测试 xml 文件是否没有结束标签（我通常会添加这些标签）。添加以下代码后，它开始给我这个异常。

```
try
{
    XmlDocument xdoc = new XmlDocument();
    xdoc.Load(FileName);
    xdoc = null;

}
catch (XmlException xe)
{
    using (StreamWriter w = File.AppendText(FileName))
    {
        Console.WriteLine(xe);
        w.WriteLine("</test>");
        w.WriteLine("</testwrapper>");
    }
} 
```

这里有什么问题？

**编辑：我得到的错误**

> 进程失败：System.IO.IOException：进程无法访问文件“z:\TF_B1BBA.xml”，因为它正被另一个进程使用。在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions 选项, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath) at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize) at System.Xml.XmlDownloadManager.GetStream(Uri uri, System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofO bjectToReturn) 在 System.Xml 中的 ICredentials 凭据、IWebProxy 代理、RequestCachePolicy cachePolicy)。XmlTextReaderImpl.OpenUrlDelegate(Object xmlResolver) 在 System.Threading.CompressedStack.runTryCode(Object userData) 在 System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCl eanup(TryCode 代码, CleanupCode backoutCode, Object userData) 在 System.Threading.CompressedStack.Run(CompressedStack在 System.Xml.XmlTextReaderImpl.OpenUrl() 在 System.Xml.XmlTextReaderImpl.Read() 的压缩堆栈，Cont extCallback 回调，对象状态。在 System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean prese veWhitespace) at System.Xml.XmlDocument.Load(XmlReader reader) at System.Xml.XmlDocument.Load(String filename) at GSelInterface.Program.convert( C 中的对象源 FileSystemEventArgs f)：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:32:21.720

在您的尝试块中，您已经打开了文件。你需要关闭它。

```
XmlDocument xdoc = new XmlDocument();
xdoc.Load(FileName); 
```

按照这个例子。

[http://msdn.microsoft.com/en-us/library/zcsyk915.aspx](http://msdn.microsoft.com/en-us/library/zcsyk915.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T12:31:35.120

这可能是因为观察者（然后 FileShare.ReadWrite 是重要的部分）。

尝试：

```
XmlDocument xdoc = new XmlDocument();
FileStream fs = new FileStream(FileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
xdoc.Load(fs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:30:09.310

您正在尝试写入已在 try 块中打开的“文件名”文件。

编辑1：

似乎锁定是由保存文件的进程设置的。当 convert() 被触发时，文件系统还没有完成保存文件。如果你有一个大的 xml，它会特别发生。如果您在尝试写入文件之前添加睡眠，则不会引发异常。

这是一个快速而肮脏的补丁。

如果 xml 文件的保存频率很高，则需要对更改的 xml 文件添加某种锁定。

编辑2：

还可以尝试在执行操作之前删除观察者的事件，并在一切完成后再次添加，这样可以防止多个事件被触发。不太确定 EnableRaisingEvents = false 是否会以正确的方式工作。另见这篇文章：

[EnableRaisingEvents（启用和禁用它）](https://stackoverflow.com/questions/7284530/enableraisingevents-enabling-and-disabling-it)

```
try
{
    watcher.EnableRaisingEvents = false;
    //Edit2: Remove the watcher event
    watcher.Changed -= new FileSystemEventHandler(convert);

    try
    {
      XmlDocument xdoc = new XmlDocument();
      xdoc.Load(FileName);
    }
    catch (XmlException xe)
    {
      System.Threading.Thread.Sleep(1000);  //added this line
      using (StreamWriter w = File.AppendText(FileName))
      {
        Console.WriteLine(xe);
        w.WriteLine("</test>");
        w.WriteLine("</testwrapper>");
      }
    }
}

/*
   Here all xslt transform code
*/

    //Edit2: Add again the watcher event
    watcher.Changed += new FileSystemEventHandler(convert);
}
catch (Exception e)
{
   Console.WriteLine("The process failed: {0}", e.ToString());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:24:36.420

这个问题的解决方案就在这个链接上：

[xml处理期间的异常](https://stackoverflow.com/questions/15833525/exception-during-xml-processing/15834920#15834920)

这是我提出的另一个问题。感谢所有花时间帮助我的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-19T16:37:49.327

确保该文件不存在。

我不得不重新创建我的构建配置并且旧文件仍然存在。一旦我删除了旧的转换，我就能够重新创建新的转换。

# audio-streaming - 在 WMP 中播放流式波形时被剪切

> ID：15811095
> 
> 赞同：0
> 
> 时间：2013-04-04T12:26:29.587
> 
> 标签：audio-streaming, wave, wmp, wmplib

我们在 C# 应用程序中使用 WMPLib 作为嵌入式播放器，但此问题也出现在 Windows Media Player 中。

我们的服务器流式传输音频并启用了偏移量流式传输。给定网址：

```
http://ourserver.com/playback?id=400 
```

它返回一个八位字节或 x 波流（两者都不起作用）。

WMP 开始缓冲并播放来自给定 URL 的 2 分钟长波形文件（一切正常），但是当我抓住轨道滑块并将其拖放到其长度的 90% 左右时，播放被切断并且 WMP 显示一般音频错误（ c00d11b1)。当我将滑块放得更近（进一步 10-20%）时，播放继续进行，没有任何错误，并且可以正确播放偏移量。我使用的是 Windows 7 Home Premium 64 位。

当我在其他媒体播放器应用程序 (VLC) 中使用相同的 URL 时，不会发生错误。

是什么导致了这样的问题？

来自这种情况的 TCP 数据包：

*WMP=>Server - 获取浪潮*

```
GET http://ourserver.com/playback?id=400
Cache-Control: no-cache
Connection: Keep-Alive
Pragma: getIfoFileURI.dlna.org
Accept: */*
Cookie: PHPSESSID=7e5156ec44280a9210570158c5d31475
User-Agent: NSPlayer/12.00.7601.17514 WMFSDK/12.00.7601.17514
GetContentFeatures.DLNA.ORG: 1
Host: 192.168.0.5 
```

*服务器=>WMP - 返回文件*

```
HTTP/1.1 200 OK
X-Powered-By: PHP/5.3.6
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-cache
Pragma: no-cache
Content-Description: File Transfer
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-Dis; filename="sound.wav"
Content-Length: 833658
Accept-Ranges: bytes
Date: Tue, 02 Apr 2013 10:46:01 GMT
Server: lighttpd/1.4.28 
```

*播放声音，我们移动滑块... WMP=>Server - 获取带偏移的声音（在范围内设置）*

```
GET http://ourserver.com/playback?id=400
Cache-Control: no-cache
Connection: Keep-Alive
Pragma: getIfoFileURI.dlna.org
Accept: */*
Cookie: PHPSESSID=7e5156ec44280a9210570158c5d31475
Range: bytes=733184-833657
User-Agent: NSPlayer/12.00.7601.17514 WMFSDK/12.00.7601.17514
GetContentFeatures.DLNA.ORG: 1
Host: 192.168.0.5 
```

*服务器=>WMP - 返回声音*

```
HTTP/1.1 206 Partial Content
X-Powered-By: PHP/5.3.6
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Content-Range: bytes 733184-833657/
Cache-Control: no-cache
Pragma: no-cache
Content-Description: File Transfer
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-Dis; filename="sound.wav"
Content-Length: 833658
Accept-Ranges: bytes
Date: Tue, 02 Apr 2013 10:46:10 GMT
Server: lighttpd/1.4.28 
```

*流继续，但 WMP 中断播放并显示错误。*

我们如何解决这个问题？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T08:23:12.797

正如您在第二个响应中看到的那样，服务器从一开始就使用完整的八位字节流进行响应。假设您在服务器端拥有足够低的控制权，您的服务器必须使用`Range: bytes=733184-833657`客户端发送的 http 标头来读取此范围的字节`soud.wav`并将其发送到客户端。

我不确定是否需要 http 响应标头，但作为一个线索：这与恢复 http 下载的行为相同。

[在这里](http://forums.asp.net/t/1218116.aspx)，您可以看到构建 Content-Range 响应的服务器端 C# 代码。

[在这里](https://stackoverflow.com/questions/12711922/how-to-play-stream-audio-from-a-blob-in-php?rq=1)您可以看到 PHP 代码构建响应。

# wordpress - 忽略本地 git 文件，但不要从存储库中删除它们

> ID：15811100
> 
> 赞同：1
> 
> 时间：2013-04-04T12:26:36.167
> 
> 标签：wordpress, git

我的团队正在开发一个 git 存储库，其中包含一个完全可部署的 Wordpress 应用程序。这是以这种方式配置的，因此可以很容易地将其部署到 AWS 堆栈。存储库包含一个缓存插件，它在 wp-content/ 文件夹中创建两个文件夹，名为

```
cache/
w3tc-config/ 
```

当开发人员检查此应用程序时，他们正在删除用于开发的缓存功能，因此插件将这些更改写入它使用的两个目录。然后鼓励 .git 将它们暂存以进行提交。

无论如何我们可以忽略开发机器上的这些文件夹，但不能将它们从存储库中删除？我也有兴趣听到其他可能帮助我解决这个问题的解决方案，即使它是一个更大的变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:06:05.683

你不能同时拥有它。文件要么被跟踪，要么不被跟踪。您不能将文件保留在存储库中，但要避免跟踪对它们的更改。一旦他们被跟踪，您就可以决定不要`git add`他们。（值得注意的是，git 永远不会跟踪文件夹。）

创建一个名为的存档`UnzipMeRightAfterCloning.zip`，其中包含您想要忽略的所有内容。任何克隆 repo 的人都需要提取该存档，它将添加您的`.gitignore`设置阻止的所有文件/文件夹。（鉴于您当前的设置，您必须先取消跟踪这些文件夹中的文件。）

把这些放在你的`.gitignore`文件中。（不要加星号。）

```
cache/
w3tc-config/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:39:12.277

如果您检查您的存储库并`master`遵循它，那么您可以创建一个`devel`分支，您只需将缓存 w3tc-config 添加到`.gitignore`.

我在工作中做了类似的事情，我使用 git-svn 来处理一个 svn 存储库，该存储库在另一个 svn 存储库中为子模块“链接”。Git clone 没有获取那个子模块，所以我只是从 svn checkout 中复制了内容，签入到一个 devel 分支（在 svn trunk 分支之后留下 master），并将子模块目录添加到 .gitignore。

这是一个需要每个开发人员采取特定行动的解决方案，而不是您可以从存储库中推出的解决方案。但与 git hooks 类似，如果您创建一个`tools/do_it.sh`执行所需操作的脚本，则可以大大降低门槛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:35:01.653

是的，在项目目录中创建一个本地`.gitignore`文件。在文件中粘贴以下内容

```
cache/*
w3tc-config/* 
```

现在，这些文件将从 git 中排除，但不会从存储库中删除。

# php - 在php中将mysql数据导出为CSV

> ID：15811101
> 
> 赞同：0
> 
> 时间：2013-04-04T12:26:36.740
> 
> 标签：php, mysql, csv, export

在我的代码中，我需要在 CSV 导出中的 mysql 表中保留每个字段中的所有逗号...

为此，我对所有字段都使用了双引号。此代码在 Linux 系统中完美运行。在 Windows 中运行相同的代码时，双引号也显示在导出的 CSV 文件中。这是什么问题？谁能告诉我为什么会这样？

```
 function  arrayToCSV($array, $header_row = true, $col_sep = ",", $row_sep = "\n", $qut = '"',$pgeTyp ="")
    {
    /*col_sep =htmlentities($col_sep);
    $row_sep =htmlentities($row_sep);
    $qut =htmlentities($qut);*/
    if (!is_array($array) or !is_array($array[0])) return false;
    //Header row.
    if ($header_row)
    {
    foreach ($array[0] as $key => $val)
    {
    //Escaping quotes.
    $key = str_replace($qut, "$qut$qut", $key);
    $output .= $col_sep.$qut.$key.$qut;
    }
    $output = substr($output, 1)."\n".$row_sep;
    }
    //Data rows.
    foreach ($array as $key => $val)
    {
    $tmp = '';

    foreach ($val as $cell_key => $cell_val)
    {  
    if($pgeTyp!="twitter" && $pagTyp!="jigsaw" && $pgeTyp=="")
    $timeValue = @checkTimeStamp($cell_val);
    else  $timeValue = '';
    if($timeValue=="True")
    {
    $cell_val = str_replace($qut, "$qut$qut", convert_time_zone($cell_val,'d-M-y h:i:s'));
    }
    else
    {
    $cell_val = str_replace($qut, "$qut$qut", $cell_val);
    }

    $tmp .= $col_sep.$qut.$cell_val.$qut;
    }
    $output .= substr($tmp, 1).$row_sep;
    }
    return $output;
    } 
```

函数调用是，

```
$dbResult1[] =array('url_twitter_userid' => $selecttwittermainFtch['url_twitter_userid'],'url_tweet_name' => "$url_tweet_name",'url_twitter_uname' => "$url_twitter_uname",'url_twitter_url' => $selecttwittermainFtch['url_twitter_url'],'url_twitter_location' => "$url_twitter_location",'url_twitter_followers' => $selecttwittermainFtch['url_twitter_followers'],'url_twitter_following' => $selecttwittermainFtch['url_twitter_following'],'url_modified_on' => $modifiedon);   
echo arrayToCSV($dbResult1, true, ", ", "\n",  '','twitter'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:00:09.527

试试这个：

```
function sqlQueryToCSV($filename, $query)
{
    $result = mysql_query($query);
    $num_fields = mysql_num_fields($result);
    $headers = array();
    for ($i = 0; $i < $num_fields; $i++) {
            $headers[] = mysql_field_name($result , $i);
    }
    $fp = fopen(mysql_real_escape_string(getcwd().'\\'.$filename), 'w');
    if ($fp) {
 fputcsv($fp, $headers);
 while ($row = mysql_fetch_array($result)) {
     $arrayValues = array();
     foreach ($headers as $header)
     {
         $arrayValues[] = $row[$header];
     }
     fputcsv($fp, $arrayValues);
 }
    }
    fclose($fp);
} 
```

来源：[http ://forums.exchangecore.com/topic/907-function-to-convert-mysql-query-to-csv-file-with-php/](http://forums.exchangecore.com/topic/907-function-to-convert-mysql-query-to-csv-file-with-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:47:30.150

当您使用任何程序（猜测 Excel）在 Windows 中打开它时，您应该能够指定用于分隔/包围字段的字符。这可能只是假设您只想使用逗号分隔但忽略它们周围的双引号。

# sql - 在sql查询中解析日期

> ID：15811104
> 
> 赞同：2
> 
> 时间：2013-04-04T12:26:41.380
> 
> 标签：sql, sql-server-2005, datetime

我正在使用 SQL Server 2005。

我的`Trade_Date`专栏是 datatype `datetime`。

它的值如下：`2/12/2013 11:59:00 PM , 2/13/2013 11:59:00 PM`

即不同的日期与时间。

我想比较 where 子句中的日期 [仅日期]。

我正在尝试以下查询：

```
select * 
from foclosing 
where CONVERT(varchar(11), Trade_Date) like '2/12/2013 %' 
```

或者

```
select * 
from foclosing 
where Trade_Date = CONVERT(datetime, '2/12/2013') 
```

但是这两个查询都不起作用。

可能是什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T12:28:29.147

```
select * from foclosing
where Trade_Date >= '20130212' AND Trade_Date < '20130213' 
```

1.  使用对 SQL Server 安全的 yyyymmdd
2.  不要将函数应用于列，然后比较（您的第一个查询）
    在此处查看错误 2：[https ://www.simple-talk.com/sql/t-sql-programming/ten-common-sql-programming-mistakes/](https://www.simple-talk.com/sql/t-sql-programming/ten-common-sql-programming-mistakes/)
3.  不要将基于语言环境的日期与 varchar 进行比较（您的第一个查询）
4.  Trade_Date 有一个时间元素，这就是您的第二次查询失败的原因

总之，日期转换不应该用于这样的示例： datetime is a range

# sql - SQL：从 A 列中选择全部，并从 B 列中添加一个值（如果存在）

> ID：15811107
> 
> 赞同：2
> 
> 时间：2013-04-04T12:26:47.933
> 
> 标签：sql, join, firebird

我在使用 SQL 时遇到了一个非常简单的问题，我只是无法正确地用词（因此我在谷歌上没有找到任何东西，而且我的标题可能具有误导性）

问题是：我有一个大表，其中包含格式为（ID、EmployeeID、Date、Value）的交易信息（还有一些，但目前只有这些）和所有 EmployeeID 的列表。我想要的是一个结果表，显示所有员工 ID 及其在给定时间跨度内的交易总值。问题是：如何让那些在给定时间段内没有条目的员工进入结果表？

例如

```
ID EMPLID DATE       VALUE
1  1      2013-01-01 1000
2  2      2013-02-02 2000
3  1      2013-01-03 3000
4  2      2013-04-01 2000
5  2      2013-03-01 2000
6  1      2013-02-01 4000

EMPLID NAME
1      bob
2      alice 
```

现在我想要像这样的 2013-03-01 之后所有交易的总值

```
EMPLID VALUE
1      0          <- how to get this based on the employee table?
2      4000 
```

正在使用的 SQL Server 是 Firebird，我通过 JDBC 连接到它（如果重要的话）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:29:27.537

```
SELECT  a.EmpID, a.Name,
        COALESCE(SUM(b.Value), 0) TotalValue
FROM    Employee a
        LEFT JOIN Transactions b
            ON  a.EmpID = b.EmpID AND
                b.Date >= '2013-03-01'
GROUP   BY a.EmpID, a.Name 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# html - 中心绝对定位框？

> ID：15811109
> 
> 赞同：1
> 
> 时间：2013-04-04T12:26:52.950
> 
> 标签：html, css, alignment

我用 jquery 制作了一个简单的幻灯片，现在我遇到的问题是我无法将 div 框居中，幻灯片的名称是淡入淡出：

```
<style>
body, html { margin:0; padding:0; width:100%; height:100%; }
.fadein { position:relative; width:auto; height:100%; }
.fadein img { position:absolute; left:0; top:0; }
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
$(function(){
    $('.fadein img:gt(0)').hide();
    setInterval(function(){
        $('.fadein :first-child').fadeOut().next('img')
                                 .fadeIn().end()
                                 .appendTo('.fadein');
    }, 3000);
 });
</script>
</head>

<body>
<div class="fadein">
    <img src="1.png" width="auto" height="100%">
    <img src="2.png" width="auto" height="100%">
    <img src="3.png" width="auto" height="100%">
    <img src="4.png" width="auto" height="100%">
    <img src="5.png" width="auto" height="100%">
    <img src="6.png" width="auto" height="100%">
    <img src="7.png" width="auto" height="100%">
    <img src="8.png" width="auto" height="100%">
</div>
</body> 
```

我知道我不能简单地居中的问题是它的位置是相对的，而 img 的位置是绝对的！不知怎的，有人知道如何让它工作！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:29:27.413

添加`left:0; right:0`（这将删除绝对定位 div 的默认值），然后`margin:0 auto`将其带到中心。

```
.fadein img { position:absolute; left:0; right:0; top:0; margin:0 auto} 
```

**[演示](http://jsfiddle.net/ffM6d/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:38:03.423

您可以尝试删除图像上的绝对定位并添加`text-align:center`到它们的 parent `.fadein`。

保持盒子模型尽可能简单通常是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:40:03.760

您不能将没有设置宽度的块元素居中。在 .fadein 上设置像素或百分比宽度。

宽度像素宽度：

```
.fadein {
    position: relative;
    width: 500px; /* or using percentage: 50% */
    margin: 0 auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:48:16.290

与@Rodik 建议的相同，增加了一些要点。

```
 .fadein {
      /* dont give height:100% here */
      text-align:center;
 }
 .fadein img {
     height: 100%;  /* don't give in html code */
 } 
```

*   Give`height: auto`而不是`height: 100%`to，`.fadein`因为图像来自父元素。（或者不要提及任何东西，因为它是默认的）。
*   从父元素和子元素中删除定位。
*   将所有 CSS 样式保存在外部样式表中。
*   尽量让你的代码尽可能简单。（来自@Rodik 的好建议）

如果你想有定位，那么@Sowmya 的解决方案肯定会为你工作。

**[工作小提琴](http://jsfiddle.net/ffM6d/5/)**

# php - 当用户非管理员使用时，我的 Facebook 标签应用程序无法将照片发布到页面的墙上

> ID：15811111
> 
> 赞同：0
> 
> 时间：2013-04-04T12:26:59.510
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

好吧，这就是我所面临的：

我为我的 facebook 粉丝页面制作了一个应用程序，我的应用程序是 Facebook Page Tab 应用程序。

我已通过以下方式将应用程序添加到我的 Facebook 页面：

[http://developers.facebook.com/docs/appsonfacebook/pagetabs/](http://developers.facebook.com/docs/appsonfacebook/pagetabs/)

分别输入：

[http://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL](http://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL)

并选择要添加到哪个页面。

完成此操作后，我与我的 Facebook 页面管理员用户一起完成了此操作。

我已经允许**manage_pages**和**publish_stream**和**publish_actions**权限。

这是我的代码：

```
$objFacebook = App_Utils_Facebook::getFacebook();

    $user_id = $objFacebook->getUser();
    $objFacebook->setFileUploadSupport(true);

    if(isset($_REQUEST['pageId'])){
        $arrPriv = $objFacebook->api("/".$_REQUEST['pageId']."/", array('fields'=>'access_token'));
        $link = 'http://link/here/'.$this->objAnunt->id;
    }

    $privacy = json_encode(array('value'=>'SELF'));

    if(isset($arrPriv['access_token'])){
        $access_token = $arrPriv['access_token'];
    }else{
        $access_token = $objFacebook->api("/".$_REQUEST['pageId']."/", array('fields'=>'access_token'));
    }

    if($user_id){
        try{
            $ret=$objFacebook->api("/".$arrPriv['id']."/photos",'POST',array(
                    'source'=>'@link/to/pic.jpg',
                    'message'=>$strTitle.'

                               For more details click here  '.$link,
                    'access_token'=>$access_token,
                    'privacy'=>$privacy
                                                )
            );
            unlink('link/to/pic.jpg');
        }catch(FacebookApiException $e) {
            echo $e;
        }
    }else{
            $permissions = $objFacebook->api("/me/permissions");
            if( !array_key_exists('publish_stream', $permissions['data'][0]) ||
            !array_key_exists('manage_pages', $permissions['data'][0])) {
                // We don't have one of the permissions
                // Alert the admin or ask for the permission!
                header( "Location: " . $objFacebook->getLoginUrl(array("scope" => "publish_stream, manage_pages")) );
            }
    } 
```

所以我再重复一遍，我想让普通用户访问我的应用程序，并让页面本身发布在它自己的墙上。

我可以做吗？如果没有，还有其他选择。

感谢您的时间和耐心帮助我解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:05:29.653

据我所知，您不需要`manage_pages`发布到页面的权限。

请参阅[本文档](https://developers.facebook.com/docs/reference/api/page/#feed)。

`/{page_id}/feed`使用有效用户进行 API 调用`access_token`应该足以发布到页面的提要。

* * *

正如评论中提到的，Facebook 可能不允许普通用户将照片上传到页面的相册。您需要`access_token`来自该页面的管理员（确保`manage_pages`已授予权限），检索页面访问令牌，并以这种方式上传照片。

该页面访问令牌*应该*适用于用户访问令牌的生命周期。

# java - 我可以从 JButton 的事件处理程序类中调用 ActionPerformed 方法吗？

> ID：15811119
> 
> 赞同：0
> 
> 时间：2013-04-04T12:27:18.600
> 
> 标签：java, button, user-interface, event-handling, actionlistener

我有一个名为“select”的 JButton 在创建该 JButton 和其他类的类中，我想使用带有 ActionPerformed 方法的 if 条件。

类似的东西（伪代码）

```
if(_selectListener.actionPerformed(ActionEvent)) { //i.e., if select Button is clicked,
    //do something
} 
```

这可能吗？

我想调用这个方法是因为我必须处理玩家应该能够通过单击“选择”按钮或另一个“滚动”按钮来选择某些东西的情况，并且我想使用类似于一堆的东西来控制它if 语句类似于上面的语句。

如果可能，它的语法是什么？ActionEvent 的参数是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:30:08.463

不，您不能调用，`if`需要`boolean`表达式/值，但此方法返回 void。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:31:18.107

最简单和最干净的方法是为每个按钮添加一个专用的、特定的动作监听器。这样，当调用 actionPerformed() 方法时，您就可以确定关联的按钮已被单击，而无需测试单击了哪个按钮：

```
selectButton.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        // handle click on select button
    }
});

scrollButton.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        // handle click on scroll button
    }
}); 
```

另一种方式是使用普通的ActionListener，通过`getSource()`ActionEvent的方法知道是哪个组件触发了事件。将结果与每个潜在按钮进行比较，以确定哪个是已单击的按钮：

```
 @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == selectButton) {
            // handle click on select button
        }
        else if (e.getSource() == scrollButton) {
            // handle click on scroll button
        }
    } 
```

*ActionEvent 的参数是什么？*

答案在[文档](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html#actionPerformed%28java.awt.event.ActionEvent%29)中。阅读。

# sql - SQL 有计数 - 不工作

> ID：15811132
> 
> 赞同：3
> 
> 时间：2013-04-04T12:27:40.437
> 
> 标签：sql

我有一个标签表。该表中与此问题相关的行是：tag_id 和 taggable_id。我想选择一个包含所有 tag_id 的 taggable_id。但是这个查询是空的：

```
SELECT taggable_id, 
       tag_id 
FROM   taggings 
WHERE  tag_id IN( 73, 76 ) 
       AND taggable_id = 3238 
GROUP  BY tag_id 
HAVING Count(tag_id) = 2 
```

现在，当我使用不带计数的查询时，我得到 2 行结果：

```
SELECT taggable_id, 
       tag_id 
FROM   taggings 
WHERE  tag_id IN( 73, 76 ) 
       AND taggable_id = 3238 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:32:11.720

您需要将`GROUP BY`列更改为分组，`taggable_id`并且您需要更改having子句以计算不同的tag_id：

```
SELECT taggable_id
FROM   taggings 
WHERE  tag_id IN( 73, 76 ) 
GROUP  BY taggable_id 
HAVING Count(DISTINCT tag_id) = 2 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/33883/2)。这种类型的查询称为[关系除法](https://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)。

您当前的查询不工作，因为您是按`tag_id`而不是分组`taggable_id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:33:51.107

您确定要按 tag_id 分组并按 tag_id 本身计数吗？

看看这里：

[http://www.w3schools.com/sql/sql_have.asp](http://www.w3schools.com/sql/sql_having.asp)

SELECT Customer,SUM(OrderPrice) 从 Orders GROUP BY SUM(OrderPrice)<2000 的客户

# python - 使用索引迭代 2 列表的简单语法

> ID：15811140
> 
> 赞同：0
> 
> 时间：2013-04-04T12:27:55.023
> 
> 标签：python, list

需要遍历两个列表。

有没有办法让它更容易？

```
for idx, (l1, l2) in enumerate(zip(list1, list2)): 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:32:02.873

尽管我更喜欢问题中的解决方案，但另一种选择是：

```
from itertools import count

for i, x, y in zip(count(), seq1, seq2): 
    pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:44:58.803

对于不同长度的列表，我会改用[izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)，它看起来像这样：

```
from itertools import izip_longest

for index, (item1, item2) in enumerate(izip_longest(list1, list2, fillvalue=None)): 
    # code 
```

# node.js - 在切换到 stomp-client 时使用 node-amqp 库的身份验证失败，它可以工作

> ID：15811141
> 
> 赞同：5
> 
> 时间：2013-04-04T12:27:59.697
> 
> 标签：node.js, amqp, stomp, node-amqp

我正在使用[node-amqp](https://github.com/postwait/node-amqp)库连接到在线 stomp 服务，在我使用[stomp-client](https://github.com/easternbloc/node-stomp-client)之前，它连接非常成功，但它不支持自动故障检测和重新连接，所以我想切换到node-amqp 以获得更强大的支持。

```
var amqp = require('amqp');
var option = { 
  host: 'host'
, port: 61618
, login: 'my username'
, password: 'my password'
};

var implOpts = {
      reconnect: true,
      reconnectBackoffStrategy: 'exponential',
      reconnectBackoffTime: 500
};

var connection  = amqp.createConnection(option,implOpts);
connection.addListener('ready', function(){
    console.log('ready connection ');

});

connection.on('error', function (error) {
    console.log('Connection error' ,error);

});

connection.on('close', function () {
    console.log('Connection close ');

}); 
```

主机名、密码、用户名和端口是正确的，并且在 stomp-client 库示例中工作。但是，通过使用上面的代码，我收到一条错误**消息，提示连接错误 { 消息：'连接已结束：可能是由于身份验证失败。' }**。我查看了代码，没有发现我的身份验证或代码有任何问题。

这是 stomp-client 库中的工作代码。

```
var StompClient = require('stomp-client').StompClient;

var client = new StompClient('host', 61618, 'my username', 'my password', '1.0');

client.connect(function(sessionId) {
   console.log('Trying to connect the real time service...');

}); 
```

谁能告诉我如何使用 node-amqp 来连接 stomp 服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-18T05:49:50.340

不知道你是否找到了这个问题的答案，但我发现自己在这个问题上打了我的头，并在谷歌搜索的顶部附近点击了这个，所以我想我会分享我的发现：

一些快速信息；

*   兔MQ 3.5.6
*   节点JS 6.2.2
*   amqplib 0.4.2

在四处挖掘之后，我在 github 上找到了该项目，并深入测试以找到[https://github.com/squaremo/amqp.node/blob/master/test/connect.js](https://github.com/squaremo/amqp.node/blob/master/test/connect.js)，它有一个简单的身份验证示例。我发现的关键是您必须调用一个特殊函数来格式化凭据，然后将它们作为对象传递：

```
var credentials = require('amqplib/lib/credentials');
var options = {};
options.credentials = credentials.plain(configuration.rabbitmq.user, configuration.rabbitmq.pass);
amqp.connect(connstr, options .... 
```

还提到将用户名和密码嵌入到 URL 中，即：

```
amqp://user:pass@server:port 
```

但是，这对我的情况不起作用。

# ajax - 在 jquery 图像列表视图中显示图像

> ID：15811144
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:28:05.240
> 
> 标签：ajax, cordova, jquery-mobile, jsonp

为什么iOS模拟器的jQuery Mobile图像列表视图中没有显示一些图片？

它显示一个带有问号的蓝色框，而不是图像。如果有 URL 问题，当然所有图像都会显示带有问号的图标，但有些图像显示得非常好。

我将图像调整为更小的尺寸，但这并没有解决问题。我该如何解决这个问题？

这是从 mysql 数据库中获取图像的 javascript。所有图像都在后端根文件夹中。

```
.$(function () {
        var serviceUrl = 'http://localhost/Backend/getDinner.php?jsoncallback=?';
        var dataStore = {};
        $.ajax({
                  url: serviceUrl,
                  crossDomain: true,
                  dataType: "jsonp",
                  contentType: "application/json; charset=utf-8",
                  jsonpCallback:'jsoncallback',
                })
            .success(function(data) {
            $.each(data, function(i, item){
            // Stash the items by id for later retrieval.           
            dataStore[item.ID] = item;
            var $row = $(
            '<li>' +
             '<a data-transition="slide" href="#detailsPage">' +
            '<img src="' + item.ImageURL + ' ">' + 
            '<h2>' + item.Title + '</h2>' +
            '<h2>' + 'Price :'+ item.Price + '</h2>' +
            '</a>' +  '</li>');
          $('#output').append($row); 
```

这是获取列表视图的 HTML。

```
<div data-role="content" data-scroll="true" > 
  <ul id="output" data-role="listview" ></ul> 
```

这是IOS屏幕的截图。

![](https://i.stack.imgur.com/mBfkA.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:36:07.740

我见过的唯一一次是图像名称输入不正确或文件位置不正确。

例如：正确的文件名：“images/myimage.png”被错误输入为“images/myimge.png”或url或文件位置不正确。

您可能需要重新检查您的 url 位置和文件名是否正确键入且没有错误。

# jquery - 点击3次后触发jquery事件

> ID：15811149
> 
> 赞同：0
> 
> 时间：2013-04-04T12:28:23.110
> 
> 标签：jquery, fancybox

 `<a>`我正在尝试设置仅在用户单击标签 3 次时才会触发的通知。

为了生成通知，我使用了一个名为 fancybox 的 jQuery 灯箱。

到目前为止，我已经完成了 fancybox 的所有设置，但我不确定如何仅在单击 a 标签 3 次后触发它。

有什么想法我会怎么做？

我用来调用灯箱的js是：

```
 $(document).ready(function() {
        $('.fancybox').fancybox();
    }); 
``` 

我已经设置了一个[jsFiddle 来说明](http://jsfiddle.net/pudle/XWHga/1/)它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:30:33.203

只需跟踪元素被点击的次数：

```
var clicked = 0;

$('.fancybox').on('click', function (e) {
    clicked++;

    if (clicked >= 3) {
        clicked = 0;
        $('.fancybox').fancybox();
    } else {
        e.preventDefault();
    }
}); 
```

[**小提琴**](http://jsfiddle.net/XWHga/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T17:55:15.130

@adeneo 的答案是正确的，如果您**只需要第一次使用**该功能。使用该代码，如果您关闭fancybox，然后再次单击链接一次，fancybox 将在第一次单击时触发。

如果您想要的是 fancybox 总是在 3 次点击后随时触发，然后以这种方式调整 @adeneo 的代码：

```
$(document).ready(function () {
    var clicked = 0;
    $('.fancybox').on('click', function (e) {
        clicked++;
        if (clicked >= 3) {
            clicked = 0;
        } else {
            return false;
        }
    }).fancybox();
}); 
```

请参阅**[分叉的 JSFIDDLE](http://jsfiddle.net/YJYh8/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T12:33:42.533

您可以`.data()`用来跟踪：

```
$(document).ready(function() {
     $('.fancybox').click(function(e) {
        e.preventDefault();
        var $this = $(this),
            count = ($this.data('click-count') || 0) + 1;
         if (count === 3) {
             $('.fancybox').fancybox();
         }
         $this.data('click-count', count);
     });         
}); 
```

演示：http: [//jsfiddle.net/XWHga/3/](http://jsfiddle.net/XWHga/3/)

使用的优点`.data()`是计数与链接本身相关，因此，如果您碰巧有多个链接来跟踪，那么尝试跟踪哪些外部计数器属于哪些链接就不会很麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:30:27.113

您可以创建一个单击侦听器并保留一个在单击时更新的变量。

像这样的东西：

```
var clickCounter = 0;
object.addEventListener('click', function() {
    clickCounter++;
    if (clickCounter == 3) {
        //Open it
    }
}); 
```

# c# - 如何使用任何第三方库/软件从 C# 中的支票中捕获手写金额

> ID：15811154
> 
> 赞同：1
> 
> 时间：2013-04-04T12:28:35.670
> 
> 标签：c#

我必须从 C# 中的 Check(US) 中捕获手写金额。我应该使用哪个软件？我试过 A2iA 软件，但这并不能解决我的问题。

如果有人使用任何其他可以从支票中获取金额的软件或库，请告诉我。

# php - 如何在不使用mysql事件的情况下每年插入新记录

> ID：15811160
> 
> 赞同：0
> 
> 时间：2013-04-04T12:28:44.723
> 
> 标签：php, mysql

我的目标是能够每年增加学生表格，即明年表格 1 成为表格 2。我尝试使用 **mysql 事件 **，但对于我的情况来说似乎很复杂。我有以下表格

```
 id       student_id        form      year
----------
  1       2013-04-04888       1        2013
  2       2013-04-01920       2        2013 
```

**一年**后我想拥有这样的东西

```
id       student_id       form       year
----------
1       2013-04-04888       1        2013
2       2013-04-01920       2        2013
3       2013-04-04888       2        2014
4       2013-04-01920       3        2014 
```

任何对我如何以专业的方式做这件事有想法或建议的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:33:04.777

由于这是一个每年运行一次的进程，我将创建一个运行该查询的外部进程（如果这是一个 Web 应用程序，则在您的管理模块中再添加一个页面，或者类似的东西，具体取决于您在做什么）；这样，用户可以准确地控制它何时发生，并且实现起来非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:35:15.397

一个 cron 工作或其他代理可能吗？

插入将是这样的：

```
INSERT INTO people(student_id,form,year)
SELECT student_id,max(form)+1,max(year)+1
FROM people
WHERE form < 10 -- or something
GROUP BY student_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:49:34.327

听起来您这里的数据库设计很差。您有一个学生，对于每个学生，您都想知道他们的表格。您似乎可以访问他们加入的年份，因此您可以存储“表格 1”年份。

为了精确起见，假设表格年份从 4 月 1 日开始。

数据库表看起来像

```
students (
     -- added an int primary key for use later
     id INT PRIMARY,
      -- update this as needed
     student_id VARCHAR(20) UNIQUE ,
     yearStartedForm1 INT UNSIGNED
) 
```

使用您的示例，您可能有以下记录

```
id    student_id       yearStartedForm1
1     2013-04-04888    2013
2     2013-04-01920    2012 
```

从这个“表格 1”年份，您可以使用类似以下两个的方法计算他们当前的年份。首先，如果您想将 form>4 替换为“已完成”

```
SELECT
    d.id,
    d.student_id,
    IF(d.form > 4,'completed',d.form) AS form,
    d.yearStartedForm1
FROM (
    SELECT
        s.id,
        s.student_id,
        v.currentFormYear - s.yearStartedForm1  + 1 AS form,
        s.yearStartedForm1
    FROM students s,(
        SELECT IF(MONTH(CURRENT_DATE)<4,YEAR(CURRENT_DATE)-1,YEAR(CURRENT_DATE)) AS currentFormYear
    ) v
) d 
```

其次，如果您想将形式限制为最大 5

```
SELECT
    s.id,
    s.student_id,
    LEAST(v.currentFormYear - s.yearStartedForm1  + 1,5) AS form,
    s.yearStartedForm1
FROM students s,(
    SELECT IF(MONTH(CURRENT_DATE)<4,YEAR(CURRENT_DATE)-1,YEAR(CURRENT_DATE)) AS currentFormYear
) v 
```

这将动态地为您提供当前的表单编号，而无需重复的行。当然，您可以轻松地将 yearStartedForm1 更改为 DATE 字段，并使用 DATEDIFF 或类似功能。这个想法仍然是相同的，因为目前您正在复制每个学生行，而实际上您所要做的只是根据经过的时间得出一个表格编号。

# asp.net - DotNetOpenAuth 示例中 ProviderUserName 列的用途

> ID：15811162
> 
> 赞同：0
> 
> 时间：2013-04-04T12:28:50.363
> 
> 标签：asp.net, openid, dotnetopenauth, asp.net-4.5, google-openid

我已经使用 Microsoft 预定义模板在 Visual Studio 中创建了一个 ASP.NET 网站。这是为了帮助我了解 ASP.NET 中的 OpenID。

在示例站点内包含的 SQL 数据库中，有一个名为的表`UsersOpenAuthAccounts`，其中包含一个名为`ProviderUserName`.

谁能告诉我这个专栏的目的？在我的测试中，这似乎存储了我登录 OpenID 站点时使用的用户名（例如，我的 Google 用户名 - 我的电子邮件地址）。但是，我也看到该`ProviderUserId`列包含该`IAuthenticationResponse.ClaimedIdentifier`值，例如

```
https://www.google.com/accounts/o8/id?id=AIt................g3c 
```

...这将用于根据 OpenID 提供程序识别用户以供将来请求。

因此，包含该`ProviderUserName`列有什么意义吗？它实际上并未在 Microsoft 示例站点中的其他任何地方使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:01:38.880

ProviderUserName 是......一个坏主意（IMO）。

OpenID Claimed Identifier 是检查返回用户的正确字符串。它降低了使用其他任何东西的安全性，包括电子邮件地址。如果您只对 OpenID 登录感兴趣，那么您可能只想丢弃 ASP.NET 提供的代码并`OpenIdRelyingParty`直接使用 DotNetOpenAuth 并自己处理用户表。它将与您当前的代码一样简单，但没有不必要的列。

ASP.NET 团队的附加列和外观类为您提供了混合 OpenID 登录和 OAuth 登录的能力，这使您也可以在您的站点上接受 Twitter 和 Facebook 帐户。OAuth 并非旨在成为一种身份验证协议，因此使用它的人必须自己构思用户名。为了使其全局唯一，它必须由发布该用户名的提供者作为前缀。因此，您有 ProviderName（“twitter”或“google”）和一个 ProviderUsername，它是来自 OAuth 服务提供商的帐户的用户名（或用户 ID）。

# c# - 如何使用 XmlTextWriter 元素？

> ID：15811164
> 
> 赞同：0
> 
> 时间：2013-04-04T12:28:58.443
> 
> 标签：c#, xmltextwriter

我有以下 XML：

```
<Account>
    <nr>6134</nr>
    <name>Summ</name>
    <Accounting>
      <income>200</income>
    </Accounting>
    <summincome>200</summincome>
</Account> 
```

我尝试过但没有成功：

```
myXmlTextWriter2.WriteStartElement("Account");
myXmlTextWriter2.WriteAttributeString("nr", AccountNumber.ToString());
myXmlTextWriter2.WriteAttributeString("name", Name);

double summ=0;
foreach (AccountRecord ar in kp)
{
 myXmlTextWriter2.WriteStartElement("Accounting");
 myXmlTextWriter2.WriteAttributeString("income", ar.Amount.ToString());
 myXmlTextWriter2.WriteEndElement();
 summ += ar.Amount;
 }

myXmlTextWriter2.WriteAttributeString("summincome", summ.ToString());
myXmlTextWriter2.WriteEndElement(); 
```

如您所见，我输入了一个 foreach 循环来计算总和并将其值分配给“summincome”。提前谢谢你的小费

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:36:03.640

试试这个

```
using (XmlWriter writer = XmlWriter.Create("accounts.xml"))
{
    writer.WriteStartDocument();
    writer.WriteStartElement("Account");
    writer.WriteElementString("nr", AccountNumber.ToString());
    writer.WriteElementString("name", Name);

    double summ=0;
    foreach (AccountRecord ar in kp)
    {
    writer.WriteStartElement("Accounting");
    writer.WriteElementString("income", ar.Amount.ToString());
    writer.WriteEndElement();
    summ += ar.Amount;
    }
    writer.WriteElementString("summincome", summ.ToString())
    writer.WriteEndElement();
    writer.WriteEndDocument();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:39:22.663

它们不是属性而是元素

```
myXmlTextWriter2.WriteStartElement("Account");
myXmlTextWriter2.WriteAttributeString("nr", AccountNumber.ToString());
myXmlTextWriter2.WriteAttributeString("name", Name);

double summ=0;
foreach (AccountRecord ar in kp)
{
 myXmlTextWriter2.WriteStartElement("Accounting");
 myXmlTextWriter2.WriteElementString("income", ar.Amount.ToString());
 myXmlTextWriter2.WriteEndElement();
 summ += ar.Amount;
 }

myXmlTextWriter2.WriteElementString("summincome", summ.ToString());
myXmlTextWriter2.WriteEndElement(); 
```

# android - 打开蓝牙耳机的插座后音频暂停（Android 2.x）

> ID：15811165
> 
> 赞同：0
> 
> 时间：2013-04-04T12:28:59.763
> 
> 标签：android, audio, bluetooth

我编写了一个应用程序来通过蓝牙连接到扬声器底座。该应用程序控制均衡器、低音/高音等。

与底座配对后，Android 设备会通过其内置的媒体播放器自动开始播放音乐，因为它将底座视为耳机。

但是，一旦我启动我的应用程序，音频就会在大多数 2.x 设备上暂停。

在我打开设备的插座后，我会询问它的固件/硬件版本。在查看日志时，我看到这些命令被成功接收，然后显示：

```
04-04 07:23:16.566: E/BluetoothIntentReceiver(5616): onReceive() Action : android.intent.action.MEDIA_BUTTON
04-04 07:23:16.566: D/BluetoothIntentReceiver(5616): onReceive() KeyEvent : KeyEvent{action=0 code=85 repeat=0 meta=0 scancode=200 mFlags=8}
04-04 07:23:16.566: E/BluetoothIntentReceiver(5616): onReceive() Command : togglepause,mDown=false
04-04 07:23:16.632: E/BluetoothIntentReceiver(5616): onReceive() Action : android.intent.action.MEDIA_BUTTON
04-04 07:23:16.632: D/BluetoothIntentReceiver(5616): onReceive() KeyEvent : KeyEvent{action=1 code=85 repeat=0 meta=0 scancode=200 mFlags=8}
04-04 07:23:16.632: E/BluetoothIntentReceiver(5616): onReceive() Command : togglepause,mDown=true 
```

这就是暂停音乐的原因。我不确定这些 KeyEvent 是从哪里生成的，因为我什至没有拿着设备。

正如我提到的，这似乎只发生在 2.x 设备上。

有谁知道为什么音频会暂停，以及如何停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:44:23.277

我从来没有弄清楚为什么会生成 keyevent，但幸运的是我的应用程序能够捕捉到它。我创建了一个 onKeyDown 方法，并寻找 KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE。如果我在启动应用程序的前 5 秒内找到该代码，我会返回 true。

这适用于我的情况，但没有找到根本原因。

# android - Android NullPointerException when savin picture (FileOutputStream - write method)

> ID：15811169
> 
> 赞同：1
> 
> 时间：2013-04-04T12:29:05.213
> 
> 标签：android, nullpointerexception, photo, fileoutputstream

I recently got a crash report in an Android App that takes photographs and saves them on SD card. I tried to reproduce it, but it was unsuccessful. The stack trace is the following

```
> java.lang.NullPointerException at
> java.io.FileOutputStream.write(FileOutputStream.java:256) at
> com.infobest.slices.SlicesActivity$1.onPictureTaken(SlicesActivity.java:115)
> at android.hardware.Camera$EventHandler.handleMessage(Camera.java:562)
> at android.os.Handler.dispatchMessage(Handler.java:99) at
> android.os.Looper.loop(Looper.java:130) at
> android.app.ActivityThread.main(ActivityThread.java:3683) at
> java.lang.reflect.Method.invokeNative(Native Method) at
> java.lang.reflect.Method.invoke(Method.java:507) at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
> at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633) at
> dalvik.system.NativeStart.main(Native Method) 
```

The exception is triggered here:

```
private PictureCallback mPicture = new PictureCallback()
    {

        public void onPictureTaken(byte[] data, Camera camera)
        {
                            (...)       
 File pictureFile = PicturePathProvider.getInstance().getOutputMediaFile(MEDIA_TYPE_IMAGE, mSession.getPath());
                        if (pictureFile == null)
                        {
                            (...)
                        }
                        else
                        {
                            (...)
                                FileOutputStream fos = new FileOutputStream(pictureFile);
                                fos.write(data);
                                fos.close();
                            (...) 
```

The (...) are toasts and logs (no majour operations/actions done). It is just an isolated case, but I wonder what could be the reasons for this to happen. Thank you! :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:33:10.447

Check the "data" array against null, it is possible to be null.

# maven - 将艾玛覆盖范围提供给声纳

> ID：15811170
> 
> 赞同：0
> 
> 时间：2013-04-04T12:29:06.597
> 
> 标签：maven, sonarqube

我正在尝试为声纳提供多模块项目的 emma 结果

```
mvn sonar:sonar  -Dsonar.dynamicAnalysis='true' -Dsonar.core.codeCoveragePlugin=emma -Dsonar.emma.reportPath=target 
```

对于我得到的每个模块：

```
instrumentation path processed in 1798 ms
[146 class(es) instrumented, 19 resource(s) copied]
metadata merged into [<module>/target/coverage.em] {in 152 ms} 
```

然后：

```
[INFO] [12:24:32.514] Sensor EmmaSensor...
[INFO] [12:24:32.514] Parse reports: <module>/target
[WARN] [12:24:32.514] No coverage (*.ec) file found in <module>/target
[INFO] [12:24:35.123] Sensor EmmaSensor done: 2609 ms 
```

所以我在声纳中得到 0% 的覆盖率为什么它试图找到 .ec 文件而不是 .em 文件？

声纳版本为：3.5.1

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:44:16.887

如果您提到您使用的 Sonar 版本，那就太好了。

但是我认为参数 sonar.dynamicAnalysis 的值应该是 'reuseReports' 而不是 'true' 还要确保目标文件夹下存在 em 文件有关更多信息，请参阅[http://docs.codehaus.org/display /SONAR/Code+Coverage+by+Unit+Tests+for+Java+Project](http://docs.codehaus.org/display/SONAR/Code+Coverage+by+Unit+Tests+for+Java+Project) 和 [http://docs.codehaus.org/display/SONAR/Emma+Plugin](http://docs.codehaus.org/display/SONAR/Emma+Plugin)

# javascript - 如何使用对话框使fuelux数据网格（由主干集合生成）每一行可编辑

> ID：15811171
> 
> 赞同：1
> 
> 时间：2013-04-04T12:29:07.833
> 
> 标签：javascript, backbone.js, datagrid, fuelux

新的 StaticDataSource 将为燃料网格构建数据源。格式化程序将设置属性以在数据网格单元格中生成可编辑按钮。代码如下：

```
 app.PlayersView = Backbone.View.extend({
    template: _.template( $("#players-template").html() ),
    events: {
        "click #addUser" : "addUser",
    },
    initialize: function () {
        if(this.collection){
            this.collection.fetch();
        }
        this.listenTo(this.collection, 'all', this.render);
    },
    render: function () {           
        this.$el.html( this.template );
               var dataSource = new StaticDataSource({
            columns: [
                {
                    property: 'username',
                    label: 'Username',
                    sortable: true
                },
                {
                    property: 'group',
                    label: 'Groups',
                    sortable: true
                },
                {
                    property: 'edit',
                    label: 'Edit',
                    sortable: true
                }
            ],
             formatter: function (items) {
                  $.each(items, function (index, item) {
                    item.edit = '<div class="btn-group"><a id="editGroup" class="btn">Edit</a></div>';
                  });
             },
            data: this.collection.toJSON(),
            delay: 250
        });
          $('#MyGrid').datagrid({
            dataSource: dataSource,
            stretchHeight: true
        });
  }); 
```

app.Playerview 对象在 bakcbone 路由器的某处创建，如下所示：

```
 new app.PlayersView({
            collection : new app.UsersCollection
        })); 
```

在这里，列是用户名、组和编辑。每行的编辑列包含编辑按钮。当我单击任何行中的编辑按钮时，我想将特定的行模式或行数据传递给任何其他主干视图。我们怎么能做到这一点？

实际上，我将打开允许编辑该特定行的对话框。我希望 modal 由该行值预先填充。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:17:59.977

如果您的玩家有唯一标识符，您可以如下更改您的编辑按钮，以包含玩家 ID：

前：

```
<a id="editGroup" class="btn">Edit</a> 
```

后：

```
<a id="editGroup" data-id="3" class="btn">Edit</a> 
```

当然，您可以在现有的格式化程序函数中插入正确的 ID。然后，您可以从 click 事件中访问此 ID，以填充您的对话框并选择要更新的正确模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:23:38.647

从 Backbone 的角度来看，您无法控制网格。所以基本上，目前，你的行不代表任何模型。
现在的情况是，如果您只想预先填充模态框，我想您可以使用 jQuery 轻松完成。
但是，我假设您还希望同时更改模型。我不知道 Fuel UX，所以我不知道你是如何做到这一点的，但是（但我仍然很确定你可以，如果你想要更新你的模型，应该这样做）：等到创建网格，通过创建一个视图将您的模型绑定到网格，该视图将是每个元素的行，并在此视图中监听您的按钮的点击。在这里，您可以直接访问您的模型，从而访问您的数据。

如果您要发布更多代码（例如模型的定义）和网格的 HTML（或简化版本，因为我确信它充满了自定义类等等），如果您愿意，我可以提供帮助.

# graphics - 寻找不需要阵列的炫酷 LED 图形例程

> ID：15811175
> 
> 赞同：4
> 
> 时间：2013-04-04T12:29:10.553
> 
> 标签：graphics, arduino

我使用 Arduino、移位寄存器和[TLC5940s](http://playground.arduino.cc/learning/TLC5940)制作了一个 24 x 15 LED 矩阵。

[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)的内存只有区区 32 KB，因此图形不会事先存储到数组中。相反，我编写算法来使用数学方程式生成艺术动画。

彩虹正弦波的示例代码是：

```
for (int iterations = 0; iterations < times; iterations++)
{
    val += PI/500;

    for (int col = 0; col < NUM_COLS; col++)
    {
        digitalWrite(layerLatchPin, LOW);
        shiftOut(layerDataPin, layerClockPin, MSBFIRST, colMasks[col] >> 16 );
        shiftOut(layerDataPin, layerClockPin, MSBFIRST, colMasks[col] >> 8 );
        shiftOut(layerDataPin, layerClockPin, MSBFIRST, colMasks[col] );
        digitalWrite(layerLatchPin, HIGH);

        Tlc.clear();
        int rainbow1 = 7 + 7*sin(2*PI*col/NUM_COLS_TOTAL + val);
        setRainbowSinkValue(rainbow1, k);
        Tlc.update();
    }
} 
```

其中 setRainbowSinkValue 将其中一个 LED 从 1 到 15 设置为某种颜色，并`val`在每次迭代时将波向右移动。

所以我正在寻找像这样的简单图形例程，以便获得很酷的动画，而不必将所有内容存储在数组中，因为 15 x 24 x RGB 很快就会用完所有 32 KB 的 RAM。

我会尝试买一个 Arduino Mega，但让我们假设现在这不是一个选择。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:26:35.397

我一直在使用 Arduino 从事类似的图形风格项目，并考虑了各种策略来处理有限的问题。就个人而言，我发现算法动画相当平庸和通用，除非它们与其他事物结合或以某种方式指导。

无论如何，我一直在研究的两种方法：

*   定义自定义格式以将数据打包为位，然后使用位移位对其进行解包

*   在 PROGMEM 中存储简单的 SVG 图形，然后使用精灵技术在屏幕上移动它们（屏幕环绕等）。通过使用布尔运算将多个图形合并在一起，可以获得动画层效果并建立复杂性/多样性。

我只使用单色 LED，因此在概念上和数据上都更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:29:35.950

如果您开始叠加简单的函数（如 sin 或 cos），您可以获得许多效果。[这家伙](http://lodev.org/cgtutor/plasma.html)创造了“等离子”效应，我认为这总是一件很酷的事情：）

另一种方法是使用噪声函数来计算像素的颜色。如果你在谷歌上搜索“Arduino Perlin noise”，你会得到很多例子（取决于你的 Arduino 模型，你可能无法获得高帧率，因为 Perlin 噪声需要一些 CPU 能力）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T16:46:40.127

我将回答相关问题，但不完全是您提出的问题，因为我不是图形专家....

首先，不要忘记[PROGMEM](http://www.arduino.cc/en/Reference/PROGMEM)，它允许您将数据存储在闪存中。闪存比 SRAM 多得多，实际上，通常要做的就是在闪存中存储额外的数据。

其次，有一些可用的压缩技术可以减少内存消耗。无论如何，这些“压缩”技术对于您正在执行的任务来说是很自然的，所以“压缩”这个词有点误导。

首先，我们观察到，因为人类对光强度的感知是指数级的（无耻链接到我自己关于这个主题的[答案](https://stackoverflow.com/questions/15803986/fading-arduino-rgb-led-from-one-color-to-the-other/15816597#15816597)），取决于你如何准确地使用 LED 驱动器，你不需要存储确切的强度。看起来您在 TLC5940 上仅使用 8 位强度，而不是完整的 12 位。对于 8 位 LED 驱动器强度，您只有 8 或 9 个不同的强度值（因为您告诉 LED 驱动器使用的强度是`2^perceptible_intensity`）。8 个不同的值只能存储在三位中。以字节为单位存储三位块可能有点麻烦，但您仍然可以将数组中的每个“像素”视为`uint16_t`，但存储整个颜色信息。因此，您将内存消耗减少到原来的 2/3。此外，您可以对图像进行调色：每个像素都是一个字节（`uint8_t`)，并索引调色板中的位置，如果您愿意，可以是三个字节。调色板不必很大，事实上，您根本不需要调色板，这只是意味着在代码中有调色板：您的代码知道如何将一个字节转换为一组强度。然后在将它们移出之前生成 TLC5940 需要的实际强度值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T12:38:20.243

一个很好的问题，但由于平台的性质，您可能不会找到任何东西。

您有使用算法生成效果的一般想法，因此您应该继续编写更多疯狂的函数。

你可以打包你的函数，让每个人都可以使用它们。

此外，如果您允许，请使用串行端口与拥有更多资源并可以提供无尽模式流的主机进行通信。

使用发射器和接收器也可以连接到另一台计算机。

# jqgrid - jqgrid - 使用数据库中的数据复制行

> ID：15811177
> 
> 赞同：0
> 
> 时间：2013-04-04T12:29:15.203
> 
> 标签：jqgrid, copy, row

我正在尝试复制一行，但我正在使用数据库中的数据，并且我正在使用 JSON 返回它。我想知道是否可以复制一行，是否可以限制复制行的次数。例如，我需要复制 id = 6 的行，但我需要对这一行进行 5 个副本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:19:49.917

使用 getRowData 从 jqgrid 中获取单行，然后通过 var s = new Array() 创建一个数组，并推送您想要的单行次数。

在 jqgrid 中创建一个新列 .. 使用格式化程序[Formatter 在 jQgrid 中](http://www.trirand.com/blog/jqgrid/jqgrid.html#t65)放置一个链接在该列写入处理程序中以单击该链接.. 在该处理程序上使用 getrowdata 并获取字段，然后进行 ajax 调用以发送到服务器.. .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:54:27.583

您可以在服务器端而不是在客户端进行主要工作

在 jqgrid 声明中是这样的：

```
grid.jqGrid({
    ...
    loadComplete: function(data) {
        var ids = grid.jqGrid('getDataIDs');

        for (var i=0;i<ids.length;i++) {
            var id=ids[i];
            var rowData = thisGrid.jqGrid('getRowData', id);

            grid.jqGrid('setCell', id, 'buttons', '<input type="button" class="copy" value="Copy">');
        }

        $('button.copy').click(function (e) {
            var id = $(e.target).parents('tr')[0].id;

            $.ajax({
                url: 'some_url',
                dataType : "json",
                data: {'id': id},
                timeout: 10000,
                type: 'POST',
                success: function (data) {
                    grid.trigger('reloadGrid');
                },
            });
        });
    }
    ....
}); 
```

在 php 部分是这样的

```
$array = array(
    'success'=>false
);

if(isset($_POST['id])) {
    if($db -> num_rows($q = $db->query("SELECT FROM ... WHERE `id` = ".intval($_POST['id'])) == 1) {
        $row = $db -> fetch_assoc($q);

        $db->query("INSERT INTO .....);
        $array['success'] = true;
    }
}

echo json_encode($array); 
```

如果要复制多次，可以在客户端添加一些对话框以输入副本数

# android - 我想在 listfragmnet （标题片段）中添加图标

> ID：15811179
> 
> 赞同：1
> 
> 时间：2013-04-04T12:29:17.687
> 
> 标签：android, android-fragments, tablet

我正在使用片段开发平板电脑应用程序，。我想在列表片段中添加图标。我从列表视图中尝试过，但没有完成。帮帮我....

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.support.v4.app.ListFragment;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Toast;

public class HeadlinesFragment extends ListFragment {
    OnHeadlineSelectedListener mCallback;

    // The container Activity must implement this interface so the fragment can deliver  messages
public interface OnHeadlineSelectedListener {
    /** Called by HeadlinesFragment when a list item is selected */
    public void onArticleSelected(int position);
}
static String[] Headlines = {
    "Article One",
    "Article Two",
    "Article 3"
};
int[] flags = new int[]{
        R.drawable.ic_11,
        R.drawable.ic_12,
        R.drawable.ic_13

    };
String[] currency = new String[]{
        "Indian Rupee",
        "Pakistani Rupee",
        "Sri Lankan Rupee",

    };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);

 // Each row in the list stores country name, currency and flag
    List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();        

    for(int i=0;i<10;i++){
        HashMap<String, String> hm = new HashMap<String,String>();
        hm.put("txt", "Headlines: " + Headlines[i]);
        hm.put("cur","Currency : " + currency[i]);
        hm.put("flag", Integer.toString(flags[i]) );            
        aList.add(hm);        
    }

    // Keys used in Hashmap
    String[] from = { "flag","txt","cur" };

    // Ids of views in listview_layout
    int[] to = { R.id.flag,R.id.txt,R.id.cur};        

    // Instantiating an adapter to store each items
    // R.layout.listview_layout defines the layout of each item
    SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.list, from, to);

    // Getting a reference to listview of main.xml layout file
    ListView listView = ( ListView ) findViewById(R.id.listview);

    // Setting the adapter to the listView
    listView.setAdapter(adapter);                  

}
@Override
public void onCreateOptionsMenu(Menu menu,MenuInflater inflater) {

  inflater.inflate(R.menu.mainmenu, menu);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
  switch (item.getItemId()) {
  case R.id.action_refresh:
    //Toast.makeText(this, "Action refresh selected", Toast.LENGTH_SHORT)
    //    .show();
    return true;

  case R.id.action_settings:
   // Toast.makeText(this, "Action Settings selected", Toast.LENGTH_SHORT)
   //     .show();
      return true;

  default:
    break;
  }

  return true;
}

// Other methods which this class implements

@Override
public void onStart() {
    super.onStart();

    // When in two-pane layout, set the listview to highlight the selected list item
    // (We do this during onStart because at the point the listview is available.)
    if (getFragmentManager().findFragmentById(R.id.article_fragment) != null) {
        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    }
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception.
    try {
        mCallback = (OnHeadlineSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnHeadlineSelectedListener");
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // Notify the parent activity of selected item
    mCallback.onArticleSelected(position);

    // Set the item as checked to be highlighted when in two-pane layout
    getListView().setItemChecked(position, true);
} 
```

ArticalFragmnet.java 在此处输入代码 import android.support.v4.app.Fragment; 导入android.os.Bundle；导入 android.view.LayoutInflater；导入android.view.View；导入android.view.ViewGroup；导入 android.widget.TextView；

```
 public class ArticleFragment extends Fragment {
        final static String ARG_POSITION = "position";
    int mCurrentPosition = -1;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {

    // If activity recreated (such as from screen rotate), restore
    // the previous article selection set by onSaveInstanceState().
    // This is primarily necessary when in the two-pane layout.
    if (savedInstanceState != null) {
        mCurrentPosition = savedInstanceState.getInt(ARG_POSITION);
    }

    // Inflate the layout for this fragment
    return inflater.inflate(R.layout.article_view, container, false);
}

@Override
public void onStart() {
    super.onStart();

    // During startup, check if there are arguments passed to the fragment.
    // onStart is a good place to do this because the layout has already been
    // applied to the fragment at this point so we can safely call the method
    // below that sets the article text.
    Bundle args = getArguments();
    if (args != null) {
        // Set article based on argument passed in
        updateArticleView(args.getInt(ARG_POSITION));
    } else if (mCurrentPosition != -1) {
        // Set article based on saved instance state defined during onCreateView
        updateArticleView(mCurrentPosition);
    }
}

public void updateArticleView(int position) {
    TextView article = (TextView) getActivity().findViewById(R.id.article);
    article.setText(Ipsum.Articles[position]);
    mCurrentPosition = position;
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    // Save the current article selection in case we need to recreate the fragment
    outState.putInt(ARG_POSITION, mCurrentPosition);
}
 } 
```

MainActivity.java

```
enter code hereimport android.os.Bundle;
              import android.support.v4.app.FragmentActivity;
              import android.support.v4.app.FragmentTransaction;

    public class MainActivity extends FragmentActivity 
    implements HeadlinesFragment.OnHeadlineSelectedListener {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

      setContentView(R.layout.news_articles);

    // Check whether the activity is using the layout version with
    // the fragment_container FrameLayout. If so, we must add the first fragment
    if (findViewById(R.id.fragment_container) != null) {

        // However, if we're being restored from a previous state,
        // then we don't need to do anything and should return or else
        // we could end up with overlapping fragments.
        if (savedInstanceState != null) {
            return;
        }

        // Create an instance of ExampleFragment
        HeadlinesFragment firstFragment = new HeadlinesFragment();

        // In case this activity was started with special instructions from an Intent,
        // pass the Intent's extras to the fragment as arguments
        firstFragment.setArguments(getIntent().getExtras());

        // Add the fragment to the 'fragment_container' FrameLayout
        getSupportFragmentManager().beginTransaction()
                .add(R.id.fragment_container, firstFragment).commit();
    }
}

public void onArticleSelected(int position) {
    // The user selected the headline of an article from the HeadlinesFragment

    // Capture the article fragment from the activity layout
    ArticleFragment articleFrag = (ArticleFragment)
            getSupportFragmentManager().findFragmentById(R.id.article_fragment);

    if (articleFrag != null) {
        // If article frag is available, we're in two-pane layout...

        // Call a method in the ArticleFragment to update its content
        articleFrag.updateArticleView(position);

    } else {
       // If the frag is not available, we're in the one-pane layout and must swap    

        // Create fragment and give it an argument for the selected article
        ArticleFragment newFragment = new ArticleFragment();
        Bundle args = new Bundle();
        args.putInt(ArticleFragment.ARG_POSITION, position);
        newFragment.setArguments(args);
        FragmentTransaction transaction =                
                getSupportFragmentManager().beginTransaction();
        // Replace whatever is in the fragment_container view with this fragment,
        // and add the transaction to the back stack so the user can navigate back
        transaction.replace(R.id.fragment_container, newFragment);
        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit();
    }
}
 } 
```

# algorithm - 二维形状识别和解析算法

> ID：15811192
> 
> 赞同：1
> 
> 时间：2013-04-04T12:29:45.527
> 
> 标签：algorithm, shape, gesture-recognition

我正在寻找一种算法，用于从给定的一组 (x,y) 点中检测矩形、三角形、正方形和圆形等简单形状。我也在寻找一种方法，一旦检测到，将路径转换为更干净的形状。

我扰乱了互联网，但没有找到任何“简单”的方法。对于我的简单实现，几乎所有这些都是高级方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:40:38.090

检测时：

很可能没有简单的通用方法可以将任何点集分类为一个形状。但是，您可能可以构建一些基本函数，这些函数对于对许多形状进行分类很有用。例如：

1.  点是否形成一条直线
2.  点是否形成凸/凹多边形（用于取消点匹配某些形状的资格）
3.  找到点的中心并找到每个点到中心的距离
4.  两点是否共用一个轴

使用上述函数，您应该能够编写一些基本逻辑来对几种形状进行分类。

# c# - 更新整个 Winform

> ID：15811194
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:29:50.783
> 
> 标签：c#, winforms

我是 C# 的初学者，决定在 Winform 中创建基于文本的冒险游戏，但我一直在努力更新表单，只要它需要更新。过去，我曾经`something.Invalidate();`更新图像，但显然这不适用于整个表单。

我有一组基于整数显示文本的标签，每当整数的值更新时，我希望表单显示它。

到目前为止我所尝试的：

```
public partial class GameWindow : Form
{
    public void buttonInventory_Click(object sender, EventArgs e)
    {
        Basic.HP = Basic.HP++;
        this.Refresh();
    }
} 
```

当 HP 更新时，表单不会显示它。还有什么我应该使用的`Refresh();`吗？大量的谷歌搜索主要导致了关于 Backgroundworkers 的解释，但我真的需要另一个线程来完成这么简单的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:37:12.170

为什么不单独创建一个更新值的例程，在每次值更改后调用它。IE：（注意——我不会用 C# 编程）：

```
public partial class GameWindow : Form
{
    public void buttonInventory_Click(object sender, EventArgs e)
    {
        Basic.HP = Basic.HP++;
        updateValues();
    }

    public void updateValues()
    {
        hp.text = HealthInteger;
        basic.text = BasicInteger;
    }
} 
```

并称其为每一个价值变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:38:24.090

标签不能绑定到字符串值，就像图像可以绑定到图片框一样。

这里最简单的解决方案是在每次更改 HP 属性时过于明确地设置标签的 Text 属性：

```
private void RefreshFormWithModel(Basic basic)
{
    labelHP.Text = basic.HP;
}

public void buttonInventory_Click(object sender, EventArgs e)
{
    Basic.HP = Basic.HP++;
    this.RefreshFormWithModel(Basic);
} 
```

如果你真的想要复杂的绑定，[这里有一些讲座。](https://stackoverflow.com/questions/3935431/databinding-a-label-in-c-sharp-with-additional-text)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:52:53.850

我将假设类名`Basic`只是`Basic`

在课堂里`Basic`

```
private int hp;
public int HP
{
    get { return hp; }
    set { hp = value; HP_Changed(); }
}

public event EventHandler HPChanged;
private void HP_Changed()
{
    if (HPChanged != null) { HPChanged(this, new EventArgs()); }
} 
```

在里面`GameWindow`

```
//where ever you create a new Basic, add to the event handler
Basic Basic = new Basic();
Basic.HPChanged += Basic_HPChanged;

private void Basic_HPChanged(object sender, EventArgs e)
{
    Basic b_sender = (Basic)sender;
    int NewHealth = b_sender.HP;
    //Update whatever value needs to be updated, here
} 
```

然后，每当 Basic 的 HP 发生变化时，它都会在 GameWindow 中触发一个事件以更新相应的字段。

# c# - Rest Sharp - 406 错误 - 接受标头不匹配

> ID：15811202
> 
> 赞同：0
> 
> 时间：2013-04-04T12:30:10.933
> 
> 标签：c#, rest, restsharp, http-status-code-406

尝试使用 RestSharp 向第三方应用程序发布请求时出现 406 错误。我是 REST 新手，所以我不得不承认我什至不知道你可以添加标题。我尝试添加这些，但我仍然遇到同样的问题：

```
 var client = new RestClient(myURL);            

    RestRequest request = new RestRequest("restAction", Method.POST);     

    request.AddHeader("Accept", "text/plain"); 
    request.AddHeader("Content-Type", "text/plain");

    request.AddParameter("parameter1", param1);
    request.AddParameter("parameter2", param2);

    var response = client.Execute(request); 
```

从我读过的内容来看，这可能是在处理一个名为“accept”的标头。是对的吗？

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T16:54:51.813

一般来说，在 HTTP 中，当客户端向服务器发出请求时，它会告诉服务器它准备理解（接受）哪种格式。这个可接受格式的列表就是 Accept 标头的用途。如果服务器无法使用 Accept 标头中的任何媒体类型进行响应，它将返回 406。否则，它将在响应的 Content-Type 标头中指示它选择的媒体类型。将“*/*”放在 Accept 标头中告诉服务器客户端可以处理任何响应媒体类型。

在我对您的问题的原始评论中，我说 RestSharp 看起来默认情况下在 Accept 标头中包含“*”，但仔细观察我现在发现它实际上不是。因此，如果您没有像在此处所做的那样覆盖 Accept 标头，则默认标头值为`"application/json","application/xml","text/json","text/x-json","text/javascript","text/xml"`，并且您正在与之交谈的服务器似乎不会使用这些媒体类型中的任何一种。

如果您使用的服务器不会说 json 或 xml，我认为您不能使用 RestSharp，除非您创建自己的反序列化器。我不确定您是否可以从公共 API 执行此操作，或者您是否必须自己修改源代码并根据自己的需要重新编译它。

由于您仍然从服务器收到 HTTP 错误，因此我建议您现在将 RestSharp 排除在等式之外，直接将 HTTP 与服务器对话，直到您真正从服务器获得正确的响应。您可以使用[Fiddler 之](http://www.fiddler2.com/fiddler2/)类的工具直接发出 HTTP 请求。当您发送请求时（目前处于调试阶段），发送一个“*/*”的 Accept 标头以绕过 406。一旦您确定了服务器可以发回给您的媒体类型，您应该更改这又回到了您知道可以阅读并且知道服务器可以发送的媒体类型。

听起来这里的主要问题实际上只是不知道服务器的协议。如果您正在与之交谈的服务有任何文档，我会非常仔细地阅读以找出它准备响应的媒体类型以及如何制作它期望的 URL。

# python - 将 list/str 从批处理文件传递给 python

> ID：15811203
> 
> 赞同：0
> 
> 时间：2013-04-04T12:30:11.337
> 
> 标签：python, batch-file

我的批处理文件是：

```
SET TESTLIST=['text1','text2']
python test.py %TESTLIST% 
```

但是python不将其识别为列表。我需要 Python 将 TESTLIST 理解为 ["text1","text2"]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:42:32.617

而不是`TEST = sys.argv[1]`，让

```
TEST = sys.arv[1:] 
```

* * *

例如，

```
import sys
TEST = sys.argv[1:]
print(TEST) 
```

运行`% test.py text1 test2`产量

```
['text1', 'test2'] 
```

# python - 如何将输入转换为 Python 类中的参数

> ID：15811204
> 
> 赞同：1
> 
> 时间：2013-04-04T12:30:11.783
> 
> 标签：python, class, parameters

我想使用 a`class`和 a`main()`函数找到三角形的周长。我只需要以某种方式使输入等于类中的参数。我不知道该怎么做。

这是到目前为止的代码：

```
class Triangle:
    def __init__(self):
        self.__side1 = 1.0
        self.__side2 = 1.0
        self.__side3 = 1.0
    def getPerimeter(self):
        return self.__side1+self.__side2+self.__side3
    def __str__(self):
        return "side1 : "+str(self.__side1)+" side2 : "+str(self.__side2)+" side3 : "+str(self.__side3)  

def main():
    side1 = input("Enter first side: ")
    side2 = input("Enter second side: ")
    side3 = input("Enter third side: ")
    t1 = Triangle()
    print("The Perimeter of Triangle : ",t1.getPerimeter())
    print(t1)

main() 
```

所以基本上我如何使周长​​等于输入。

```
self.__side1 = side1
self.__side2 = side2
self.__side3 = side3 
```

例如，假设我输入

```
side1 = 4
side2 = 5
side3 = 2 
```

那么周长应该是`11`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:32:07.977

像这样：

```
class Triangle:
    def __init__(self, a, b, c):
        self.__side1 = a
        self.__side2 = b
        self.__side3 = c

    def getPerimeter(self):
        return self.__side1 + self.__side2 + self.__side3

    def __str__(self):
        return "side1 : " + str(self.__side1) + " side2 : " + str(self.__side2) + " side3 : " + str(self.__side3)  

def main():
    side1 = input("Enter first side: ")
    side2 = input("Enter second side: ")
    side3 = input("Enter third side: ")
    t1 = Triangle(int(side1), int(side2), int(side3))
    print("The Perimeter of Triangle : ", t1.getPerimeter())
    print(t1)

main() 
```

请注意，您必须将输入转换为整数，否则您将得到`'4' + '5' + '2' = '452'`：

```
t1 = Triangle(int(side1), int(side2), int(side3)) 
```

PS：`__str__`方法可以通过使用字符串格式化来简化：

```
return "side1: {} side2: {} side3: {}".format(self.__side1, self.__side2, self.__side3) 
```

而且，如果您不使用名称损坏的准私有属性：

```
class Triangle:
    def __init__(self, a, b, c):
        self.side1 = a
        self.side2 = b
        self.side3 = c

    def getPerimeter(self):
        return self.side1 + self.side2 + self.side3

    def __str__(self):
        return "side1: {0.side1} side2: {0.side2} side3: {0.side3}".format(self) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:33:40.553

```
def __init__(self, side1, side2, side3):
    self.side1 = side1
    self.side2 = side2
    self.side3 = side3 
```

然后它是这样调用的：

```
t = Triangle(3, 4, 5)  # send in the side lengths 
```

# android - 如何在 android gridview 单元格中设置 colspan

> ID：15811209
> 
> 赞同：5
> 
> 时间：2013-04-04T12:30:21.080
> 
> 标签：android, gridview, android-gridview

我如何拥有一个包含跨列的单元格的 GridView？我有几组需要动态加载的数据（因此我不需要网格布局）并在 GridView 上以不同的方式直观地呈现。下面是我能够实现的图形表示，“x”显示显示某些内容的单元格，而空单元格不显示任何内容

[![不需要的](https://i.stack.imgur.com/jXQ6s.png)](https://i.stack.imgur.com/jXQ6s.png)

有了我这里的东西，当我想在一行中显示 4 个项目时，中心有一个丑陋的单元格。

我想要的是能够让一行均匀地显示 5 个项目，而另一行可以显示 4 个项目，依此类推。下图显示了我想要实现的目标

[![通缉](https://i.stack.imgur.com/fy5QQ.png)](https://i.stack.imgur.com/fy5QQ.png)

我想使用 Gridview，因为填充网格的数据是动态提供的。所以我可以使用gridview的适配器。如果除了gridview之外还有另一种方法，那么我愿意接受建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-04T19:14:38.320

迟到的答案..您不能为此使用`GridView`组件，因为它在列方面起作用。必须定义列数。

您可以做的是使用自定义`LayoutManager`for `RecyclerView`. 这是一个很好的例子。[RecyclerView LayoutManager 不同行上的不同跨度计数](https://stackoverflow.com/questions/31112291/recyclerview-layoutmanager-different-span-counts-on-different-rows)

现在有很多关于这个主题的信息，因为这种定制是`RecyclerView`. 谷歌应用程序使用它来遵循材料设计模式。

# java - 番石榴加载缓存 - 保持新鲜直到到期

> ID：15811210
> 
> 赞同：2
> 
> 时间：2013-04-04T12:30:23.453
> 
> 标签：java, caching, guava

我有一个在 Guava 中使用 LoadingCache 的特定用例。

1.  30m内未访问的过期key
2.  只要密钥在缓存中，无论访问如何，都保持最新

我只能通过使用一些外部组件来获得这些语义。 [https://gist.github.com/kashyapp/5309855](https://gist.github.com/kashyapp/5309855)

在这里发帖看看人们是否可以提供更好的想法。

**问题**

1.  refreshAfterWrite() 仅在访问时触发
2.  cache.refresh() -> CacheLoader.reload()
    *   即使我们返回 oldValue 也会更新访问/写入的计时器
    *   返回 immediateCancelledFuture() 会导致丑陋的日志记录
    *   reload() 基本上没有办法说没有任何改变

**解决方案**

1.  在缓存上设置 expireAfterAccess
2.  使用外部执行器服务为每个键安排一个 refreshJob
3.  refreshJob.run() 检查缓存是否还有密钥
    *   (asMap().containsKey()) 不更新访问时间
4.  查询上游，并且只有在值发生变化时才执行 cache.put()

**差不多好了**

但这并不是我打算做的，虽然足够接近。如果上游没有改变，那么未访问的密钥就会过期。上游更改的键不会在缓存中过期。

# jquery - 通过cshtml填充一个selectList

> ID：15811212
> 
> 赞同：0
> 
> 时间：2013-04-04T12:30:26.997
> 
> 标签：jquery, razor, postback, html-select

我正在尝试更新`select`列表，具体取决于另一个`select`. 在调用服务器时。有没有办法在没有 JSON 的情况下做到这一点。我不介意做一个完整`Postback`的网站，但更喜欢另一种解决方案。

我使用 csHTML 和 jQuery。

编码：

```
<form action="" method="post">
    <select name="SelectProductGroup" id="SelectProductGroup">
        <option value="0" disabled selected>
            select group
        </option>

        @{
            foreach (ProductGroup vg in productGroupList)
            {
                <option value="@vg.id">
                    @vg.name
                </option>
            }
       }
    </select>

    <select name="UpdateProduct" id="UpdateProduct">
        <option value="0" disabled selected>
            select product
        </option>
    </select>

    <input type="submit" name="btn" value="updateProduct" />
</form>

<script>
    $().ready(function () {
        $('#SelectProductGroup').on('change', function () {
            var options = {
                @{
                    int temp_ID = 0;
                    if(Request["SelectProductGroup"] != null)
                    {
                        temp_ID = int.Parse(Request["SelectProductGroup"]);
                    }
                    int counter = 0;
                    List<Product> productList = Product.getListBy_ProductGroup(temp_ID, connection);
                    string result = "";

                    foreach(Product v in productList)
                    {
                        result += "val" + v.id + " : " + v.name;

                        if(counter < productList.Count())
                        {
                            result += ",";
                        }
                    }

                    <text>
                        @result
                    </text>
                }
            };

            $.each(options, function (val, text) {
                $('UpdateProduct').append(
                        $('<option></option>').val(val).html(text)
                    );
            });
        });
    });
</script> 
```

JSON 应该是一个很好的解决方案。只是似乎无法理解它。因此，我正在寻找 JSON 解决方案的替代方案^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:03:10.757

JSON 只是一种序列化数据以在（通常）Web 服务器和 Web 浏览器之间传输的方式。为了让您以大多数网站的方式利用它，您必须执行以下操作：

1.  拥有一个将 getListBy_ProductGroup() 函数实现为 AJAX 方法的服务器网页，该方法返回 List 结果的 JSON 编码。看到您正在使用 MVC，您将为此使用 WebAPI，也许将其实现为[http://myserver.com/api/products?id=XXX](http://myserver.com/api/products?id=XXX)（有一整套思想称为 REST 致力于组织您的 web api） .

2.  在 Web 浏览器上，您将连接一个 JavaScript 事件处理程序，以便当第一个下拉列表的值更改时，向 WebAPI 页面发出 AJAX 请求，将选定的下拉值作为参数传递。

3.  当收到对 AJAX 请求的响应时，您将有更多的 JavaScript 将第二个下拉列表的内容替换为一组新的 HTML 元素。

有很多库可以帮助您实现 (2) 和 (3)，我会推荐 jQuery。

抱歉，这不是更详细，但这是一个很大的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:37:25.737

jQuery 有一个[.load](http://api.jquery.com/load)方法，允许您发出 AJAX 请求并将响应添加到包含元素中。

例如：

```
$('#UpdateProduct').load('http://myserver.com/getProductsAsHtml?id=XXX'); 
```

只要确保网页只返回应该进入元素内部的`<select>`内容，例如：

```
<option>Product 1</option>
<option>Product 2</option> 
```

您可以在 SelectProductGroup 元素的更改事件处理程序中使用它：

```
$('#SelectProductGroup').on('change', function() {
  var id=$(this).val();
  $('#UpdateProduct').load('http://myserver.com/getProductsAsHtml?id=' + id);
}); 
```

# javascript - 点击更改样式

> ID：15811214
> 
> 赞同：1
> 
> 时间：2013-04-04T12:30:31.570
> 
> 标签：javascript, jquery, html, class, addclass

我想使用类 onclick 更改标签的样式（基本上我想更改类）。这是我的 HTML 代码：

```
<div class="menutext"><a href="#" onclick="javascript:removeClass('menutext').addClass('menutext2');" class="scroll">Feedback</a></div> 
```

我不知道出了什么问题，为什么它不起作用！如果无法使用 javascript，我也想使用 JQUERY 制作此代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:32:32.683

调用点击事件比内联javascript更好...可读且易于调试...

尝试这个

**html**

```
<div class="menutext"><a href="#" class="scroll">Feedback</a></div> 
```

**jQuery**

```
 $('.menutext a').click(function(e){
     e.preventDefault(); //to prevent the default behaviour of <a>
     $(this).parent().removeClass('menutext').addClass('menutext2'); 
      //parent() because i think you want to change the class of the div ...
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:33:56.160

[这](http://jsfiddle.net/Vd4tT/)有效：

```
<div class="menutext"><a href="#" onclick="$(this).parent().removeClass('menutext').addClass('menutext2');" class="scroll">Feedback</a></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:40:19.100

正如我对你的问题的理解，这就是你想要的。jQuery

```
 $('.childDiv').click(function(){
     $(this).parent().find('.childDiv').css('background-color','#ffffff');
     $(this).css('background-color','#ff0000');
   }); 
```

html

```
 Group 1
 <div id="child1" class="childDiv">
    Child 1
</div>
<div id="child2" class="childDiv">
    Child 2
</div>
</div>
<div id="divParent2" class="parentDiv">
Group 2
<div id="child1" class="childDiv">
    Child 1
</div>
<div id="child2" class="childDiv">
    Child 2
</div> 
</div> 
```

CSS

```
 .parentDiv{
  border:1px solid black;
  padding:10px;
  width: 80px; 
  margin:5px;  
  display:relative;
}

.childDiv{
border:1px solid blue;
height: 50px;   
margin:10px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T12:33:08.137

您没有在 onclick 事件中编写 jquery 选择器。

```
<div class="menutext">
    <a href="#" onclick="javascript:$(this).removeClass('menutext').addClass('menutext2');" class="scroll">Feedback</a>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T12:36:28.123

尝试使用`jQuery`并删除`onclick`链接中的属性：

```
$('div.menutext > a').click(function(){
     $(this).parent().removeClass('menutext').addClass('menutext2');
}); 
```

# c# - 将文本框中的数字转换为浮点C#

> ID：15811215
> 
> 赞同：4
> 
> 时间：2013-04-04T12:30:32.563
> 
> 标签：c#, string-conversion

我有接受数字的文本框。这些数字将保存在数据库中。当我输入像 2,35 这样的数字并转换为浮点数并发送到数据库时出现错误，因为数据库只接受带点的数字，例如 2.35

```
float num = float.Parse(textBox1.Text); 
```

num 仍然是 2,25

如何管理？我试过了，`CultureInfo.InvariantCulture`但我从来没有得到我想要的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-30T06:41:02.407

您可以尝试以下方法：

```
float.Parse(textBox1.Text.Trim(), CultureInfo.InvariantCulture.NumberFormat); 
```

我希望这可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:15:36.057

用这个：

```
CultureInfo.CreateSpecificCulture("en-US"); 
```

我当时有同样的问题，它通过上面的代码解决了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:49:32.050

这是一个普遍的全球化问题。您必须定义的是存储数据本身的单一文化，因为您将其存储为字符串值。然后，使用该文化进行所有数据输入和处理。在我们的代码中，为了处理多文化数学和数据显示，我们有几个看起来类似的块：

```
//save current culture and set to english
CultureInfo current = System.Threading.Thread.CurrentThread.CurrentCulture;
System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");

//Do Math and Data things

//restore original culture
System.Threading.Thread.CurrentThread.CurrentCulture = current; 
```

通过这种方式，您可以确保以相同的方式处理和存储所有数据，而不管用于生成或显示数据的文化。

**编辑**

要进行数据保存，并将数字转换为字符串，您会以完全相同的方式进行操作。当您将当前线程 CultureInfo 设置为“en-US”时，`.ToString()`所有数字中的方法都将使用“。” 而不是“，”代表小数点。另一种方法是在调用 .ToString() 时指定格式提供程序。

```
decimalNumber.ToString(new CultureInfo("en-US")); 
```

这指定当您将数字转换为字符串时，使用提供的区域性中的 NumberFormat。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T13:19:38.080

`num`是`2,25`因为它在*你的*文化中向你展示。如果您使用通常的机制（即带参数的预准备语句），它将正确地传递给数据库。如果你坚持手动将 SQL 粘合在一起，那么一定要使用`InvariantCulture`格式化数字，但一般情况下，请不要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T13:08:48.230

最简单的方法是将 ',' 替换为 '.' 就像：

```
float num = float.Parse(textBox1.Text);
string stringValue = num.ToString().Replace(',', '.'); 
```

然后将“stringValue”发送到数据库。

我希望这对你有帮助。

# oracle - Oracle NUMBER(3) = -999 到 999 或 -99 到 99（是精度的符号部分）？

> ID：15811217
> 
> 赞同：2
> 
> 时间：2013-04-04T12:30:34.400
> 
> 标签：oracle, plsql

oracle数字格式精度包括符号吗？

Oracle NUMBER(3) 是从 -999 到 999 还是从 -99 到 99？

符号是否算作精度值中的数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T12:36:22.853

number(3) 表示它将保存从 -999 到 999 的值。符号不计入精度。

例如：

```
SQL> create table numcheck(a number(3));

Table created.

SQL> insert into numcheck values (-999);

1 row created.

SQL> insert into numcheck values (999);

1 row created.

SQL> select a, vsize(a), dump(a) from numcheck;

         A   VSIZE(A) DUMP(A)
---------- ---------- ------------------------------
      -999          4 Typ=2 Len=4: 61,92,2,102
       999          3 Typ=2 Len=3: 194,10,100 
```

# c# - 使用缩放的 GraphicsPath 真的很慢

> ID：15811223
> 
> 赞同：0
> 
> 时间：2013-04-04T12:30:58.533
> 
> 标签：c#, graphics, gdi, graphicspath

您知道 Graphics 对象如何使用资源吗？

我在面板上绘制了数千个带有经纬度坐标的 GraphicsPath 对象。最初，那些 Graphicspaths 必须被缩放（转换 - 实际上是 4 个矩阵转换）。然后用户可以移动地图，缩放，每个动作都需要重新绘制图形路径。

问题是，当缩放级别在 2000-10000 左右时，整个东西仍然响应，但是当它达到数十万（这是街道级别缩放）时，绘制时间太长，导致整个应用程序无响应。检查可用内存，仍然很多。CPU使用率还可以。

当缩放因子增加时，如何绘制相同的数千个图形路径，每个具有相同的 4 个矩阵变换变得非常慢？处理大量图形路径坐标时 System.Graphics 本身存在问题吗？你们有没有遇到过同样的问题？

*   对不起，好人，不包括代码：所以这里是“慢”代码的一部分：基本上是 _paint 方法的迭代部分。它运行超过 30,000 个图形路径，大多数是从 esri shp 文件中提取的折线。x 的坐标是 + 并且 y 是 - 并且上下翻转，因此需要在面板上绘制所需的矩阵变换。问题在于低值变量 zI，它比高值变量 zI 快得多。高值 zi 意味着大部分图形路径在绘制区域之外。我尝试通过检查 isVisible 或通过与矩形边界相交来减少 zi 的数量。但这还不够快。有任何想法吗？

    ```
     foreach (GraphicsPath vectorDraw in currentShape.vectorPath)
                {
                    GraphicsPath paintPath = (GraphicsPath)vectorDraw.Clone();

                    OperationMatrix = new Matrix();
                    OperationMatrix.Translate(-DisplayPort.X, -DisplayPort.Y);
                    paintPath.Transform(OperationMatrix);
                    OperationMatrix = new Matrix();
                    OperationMatrix.Scale(zI, zI);
                    paintPath.Transform(OperationMatrix);
                    OperationMatrix = new Matrix(1, 0, 0, -1, 0, DisplaySize.Height);
                    paintPath.Transform(OperationMatrix);

                    OperationMatrix = new Matrix();
                    OperationMatrix.Translate(ClientGap.Width, -ClientGap.Height);
                    paintPath.Transform(OperationMatrix);

                    //if (WiredPort.IsVisible(paintPath.GetBounds())) //Futile attempt
                    //{

                    Pen LandBoundariesPen = new Pen(Color.FromArgb(255, 225, 219, 127));

                    GraphContext.DrawPath(LandBoundariesPen, paintPath); // this is the slowest part. When commented it goes faster.

                    pathCountX++;
                } 
    ```

帮助 .... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:48:00.853

对于高性能渲染，directX 优于 WPF。您也可以考虑在 C# 中使用 opengl。

编辑：有关如何通过 TAO 框架在 C# 中使用 Open GL 的教程，请访问以下链接：http: [//xinyustudio.wordpress.com/2008/12/01/using-opengl-in-c-taoframework/](http://xinyustudio.wordpress.com/2008/12/01/using-opengl-in-c-taoframework/)

# c# - 静态字符串中的属性长度是在运行时还是在编译期间计算的？

> ID：15811224
> 
> 赞同：2
> 
> 时间：2013-04-04T12:31:02.393
> 
> 标签：c#, performance

如果我有这个代码

```
if ("test".Length == 4) 
```

它甚至计算过这个`Length`或编译器计算它并在IL代码中使用一个数字吗？

如果它在运行时完成，则意味着包含此类内容的代码比包含数字的代码要慢。

例如

```
int length = 2 + 4; 
```

会比

```
int length = 2 + "test".Length; 
```

这就是我想知道的

编辑：每个咆哮我自己对此进行了基准测试，它似乎运行得同样快，但是我不明白为什么，因为回复告诉我它正在生成 2 个不同的 IL 代码？

那么在不降低性能的情况下在代码中使用它是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:39:39.370

在我的平台上，使用 VS 2010 为 .NET 4 编译的代码，IL DASM 显示

### 调试

```
...
IL_0001:  ldstr      "test"
IL_0006:  callvirt   instance int32 [mscorlib]System.String::get_Length()
... 
```

### 释放

```
...
IL_0000:  ldstr      "test"
IL_0005:  callvirt   instance int32 [mscorlib]System.String::get_Length()
... 
```

这意味着没有编译时优化。但是，CLR 抖动可能会对此进行优化。通过查看汇编代码可以看到这种优化的结果，这是结果

![在此处输入图像描述](https://i.stack.imgur.com/s7uvR.png)

在我的平台上，在 Release for platform 中编译的代码`x86`似乎进行了运行时比较，并且抖动没有优化代码。

我使用的代码

```
class Program
{
    static void Main(string[] args)
    {
        if ("test".Length == 4) { }
    }
} 
```

这是为`if`块生成的汇编代码的一部分。`test`在线比较字符串的值`17`。

```
if ("test".Length == 4)
00000000  push        ebp 
00000001  mov         ebp,esp 
00000003  sub         esp,8 
00000006  mov         dword ptr [ebp-4],ecx 
00000009  cmp         dword ptr ds:[00148ED4h],0 
00000010  je          00000017 
00000012  call        5D664D0A 
00000017  mov         ecx,dword ptr ds:[035F2188h] 
0000001d  cmp         dword ptr [ecx],ecx 
0000001f  call        5D4CA74B 
00000024  mov         dword ptr [ebp-8],eax 
00000027  nop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:33:01.923

我只是在 LINQPad 中编译它，这是生成的 IL。

```
IL_0001:  ldstr       "test"
IL_0006:  callvirt    System.String.get_Length
IL_000B:  ldc.i4.4    
IL_000C:  ceq 
```

所以看起来它是在运行时完成的。开启和不开启编译器优化的结果是一样的。

确实是的，当 C# 编译器能够转换`2 + 4`为`ldc.i4.6`，但`2 + "test".Length`需要函数调用时。但是，正如其他人指出的那样，JIT 编译器可能比 C# 编译器能够对这段代码进行更多优化。

# ios - SDWeb图像滚动

> ID：15811225
> 
> 赞同：3
> 
> 时间：2013-04-04T12:31:04.363
> 
> 标签：ios, objective-c, xcode, uiscrollview, sdwebimage

我使用 SDWebimage 来加载和缓存图片，现在我正在寻找一种在图像中滑动/滚动的方法。我尝试了不同的方法，但似乎无法正常工作，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:55:42.460

您只需像其他方式一样进行滚动图像浏览器，但不是`image`同步设置属性，您只需调用`SDWebImage`方法`setImageWithURL`（从其`UIImageView`类别中）。

为了向您展示一个快速而肮脏的实现，请创建一个`UIScrollView`，打开分页，然后`viewDidLoad`您可以设置内容大小并加载第一个图像，如下所示：

```
[self.scrollView setContentSize:CGSizeMake(self.view.bounds.size.width * [self.objects count],
                                           self.view.bounds.size.height)];

dispatch_async(dispatch_get_main_queue(), ^{
    ImageBrowserObject *object = self.objects[0];
    [object scrollView:self.scrollView addImageViewIfNeededForIndex:0];
}); 
```

您还希望将控制器设置为该滚动视图的委托，然后处理该`scrollViewDidScroll`事件：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    static NSInteger lastKnownIndex = -1;

    NSInteger currentIndex  = scrollView.contentOffset.x / scrollView.frame.size.width + 0.5f;
    NSInteger nextIndex = currentIndex + 1;
    NSInteger prevIndex = currentIndex - 1;
    if (prevIndex < 0) prevIndex = 0;

    if (currentIndex == lastKnownIndex)
        return;

    // add the imageviews we need, remove the ones we don't

    [self.objects enumerateObjectsUsingBlock:^(ImageBrowserObject *object, NSUInteger idx, BOOL *stop) {
        if (idx >= prevIndex && idx <= nextIndex)
            [object scrollView:scrollView addImageViewIfNeededForIndex:idx];
        else
            [object scrollView:scrollView removeImageViewIfNeededForIndex:idx];
    }];

    lastKnownIndex = currentIndex;
} 
```

我`ImageBrowserObject`的定义如下：

```
@interface ImageBrowserObject : NSObject

@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSURL *url;
@property (nonatomic, weak) UIImageView *imageView;

@end

@implementation ImageBrowserObject

- (id)initWithTitle:(NSString *)title URL:(NSURL *)url
{
    self = [super init];
    if (self) {
        _title = title;
        _url = url;
    }
    return self;
}

- (void)scrollView:(UIScrollView *)scrollView addImageViewIfNeededForIndex:(NSInteger)index
{
    if (self.imageView)
        return;

    CGRect frame = CGRectMake(index * scrollView.frame.size.width,
                              0.0,
                              scrollView.frame.size.width,
                              scrollView.frame.size.height);
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:frame];
    [scrollView addSubview:imageView];
    [imageView setImageWithURL:self.url placeholderImage:[UIImage imageNamed:@"placeholder.png"]];
    self.imageView = imageView;
}

- (void)scrollView:(UIScrollView *)scrollView removeImageViewIfNeededForIndex:(NSInteger)index
{
    if (!self.imageView)
        return;

    [self.imageView removeFromSuperview];
    self.imageView = nil;
}

@end 
```

这是一个非常简单的实现，但我怀疑你明白了。

# php - 在其他方法中使用来自 __construct() 的变量

> ID：15811232
> 
> 赞同：7
> 
> 时间：2013-04-04T12:31:26.020
> 
> 标签：php, oop, constructor, global-variables

我在其中定义了一个新变量`__construct()`，我想在另一个`function`中使用它`class`。但是我的变量在另一个函数中是空的！

这是我的代码：

```
class testObject{
     function __construct() {
           global $c;
           $data = array("name"=>$c['name'],
                         "family"=>$c['family']);
     }

     function showInfo() {
           global $data;
           print_r($data);
     }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T12:35:32.003

`$data`在构造函数中将变量声明为全局变量：

```
 function __construct() {
       global $c;
       global $data;
       $data = array("name"=>$c['name'],
                     "family"=>$c['family']);
 } 
```

然后，它也将在其他功能中可见。

请注意，*强烈建议不要广泛使用全局变量*，请考虑重新设计您的类以使用带有 getter+setter 的类变量。

更合适的方法是使用

```
class testObject
{
     private $data;

     function __construct(array $c) 
     {
         $this->data = array(
             "name"=>$c['name'],
             "family"=>$c['family']
         );
     }

     function showInfo() 
     {
         print_r($this->data);
     }

     // getter: if you need to access data from outside this class
     function getData() 
     {
         return $this->data;
     }
} 
```

此外，请考虑将数据字段分成单独的类变量，如下所示。然后你就有了一个典型的、干净的数据类。

```
class testObject
{
     private $name;
     private $family;

     function __construct($name, $family) 
     {
         $this->name = $name;
         $this->family = $family;
     }

     function showInfo() 
     {
         print("name: " . $this->name . ", family: " . $this->family);
     }

     // getters
     function getName() 
     {
         return $this->name;
     }

     function getFamily() 
     {
         return $this->family;
     }

} 
```

您甚至可以使用全局变量中的数据构造此对象，`$c`直到将其从代码中排除：

```
new testObject($c['name'], $c['family']) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T12:36:36.220

你可以这样做。而不是声明`$data`为变量，根据您的使用情况在类中`global`声明为`public`或`private`或变量。`protected`然后在里面设置数据`_construct`。

在类中使用 global 不是一个好方法。您可以使用类属性。

```
class testObject{
    public $data;

    function __construct() {
        global $c;
        $this->data = array("name"=>$c['name'],
                        "family"=>$c['family']);
    }

    function showInfo() {
        print_r($this->data);
    }

} 
```

# aem - 没有对话框的组件不会显示在 Sidekick 中

> ID：15811239
> 
> 赞同：3
> 
> 时间：2013-04-04T12:31:40.240
> 
> 标签：aem

如果创建了一个组件，但其中`dialog.xml`不包含文件，则即使在设计模式下启用并指定了组件组，它也不会在 Sidekick 中显示为可用 - 为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:35:40.040

如果您将 cq:editConfig 节点添加到组件，它将显示在 sidekick 中，在 parsys 的设计对话框中启用后，没有对话框。

作为参考：[http://dev.day.com/docs/en/cq/5-3/developing/components.html#Components 及其结构](http://dev.day.com/docs/en/cq/5-3/developing/components.html#Components%20and%20their%20structure)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:04:26.073

对话框用于向组件动态添加内容。如果组件中没有对话框，则组件没有理由显示在 sidekick 中。你可以像这样直接对组件进行硬编码。

```
<cq:include path="par0" resourceType="/apps/...." /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:49:17.853

您是否进入设计部分以允许您的组件？我经常创建一个新组件，但无法添加它只是因为我忘记在该页面的设计模式下允许它。

编辑

好点 - 我确实相信它需要一个 dialog.xml 文件才能显示在 Sidekick 中。否则，您必须在需要的地方对组件的包含进行硬编码。我建议添加一个 dialog.xml 文件，即使它只是为了在 Sidekick 中显示它，所以您可以将它动态添加到不同的页面。

# security - ExpressionEngine Safecracker 的安全性

> ID：15811240
> 
> 赞同：0
> 
> 时间：2013-04-04T12:31:44.390
> 
> 标签：security, expressionengine, safecracker

我正在使用ExpressionEngine，但我想制作一些与控制面板相比非常简单的“内容管理”模板。

假设如下：

*   只有管​​理员可以注册新成员。
*   成员是值得信赖的人。
*   所有使用 safecracker 的模板仅对已登录的会员可用。

以这种方式使用安全破解器会削弱网站的安全性吗？有什么理由不这样做吗？这是为“内容管理”获得非常自定义外观的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:09:24.053

我认为 EE 中任何安全性的关键是密码的强度。如果您的所有成员都使用强密码（并确保他们的存储安全！），那么没有理由说明 safecracker 的安全性低于 CP。

为用户简化内容管理的另一种方法是使用 zoo 灵活管理。 [http://devot-ee.com/add-ons/zoo-flexible-admin](http://devot-ee.com/add-ons/zoo-flexible-admin)我在很多网站上都使用它。

# c# - ORDER BY 排序键类型必须是可排序的

> ID：15811242
> 
> 赞同：1
> 
> 时间：2013-04-04T12:31:45.913
> 
> 标签：c#, asp.net, asp.net-mvc, jqgrid

希望有人可以提供帮助。尝试在 ASP.NET MVC 4 C# 中实现 jqGrid。尝试对列进行排序时，我不断收到以下错误。此列实际上是来自使用外键的对象的字段。不确定应如何更改代码以解决此问题。网格对我正在使用的模型中的字段进行正确排序，而不是来自外键的字段。我应该改用 ViewModel 吗？我正在使用 Oleg 示例中的代码。item.Name 是对象， item.Name.FullName 是我要排序的列，它会引发下面的错误。谢谢！

**ORDER BY 排序键类型必须是可排序的。近成员访问表达式，第 6 行，第 3 列。**

```
public JsonResult DynamicGridData(string sidx, string sord, int page, int rows, bool search, string filters)
    {
        var context = new TeamContext();
        var objectContext = ((IObjectContextAdapter)context).ObjectContext;
        var set = objectContext.CreateObjectSet<Team>();

        var serializer = new JavaScriptSerializer();

        Filters f = (!search || string.IsNullOrEmpty(filters)) ? null : serializer.Deserialize<Filters>(filters);

        ObjectQuery<Team> filteredQuery =
        (f == null ? (ObjectQuery<Team>)set : f.FilterObjectSet((ObjectQuery<Team>)set));

        filteredQuery.MergeOption = MergeOption.NoTracking; // we don't want to update the data

        var totalRecords = filteredQuery.Count();

        var pagedQuery = filteredQuery.Skip("it." + sidx + " " + sord, "@skip",
                                            new ObjectParameter("skip", (page - 1) * rows))
                                     .Top("@limit", new ObjectParameter("limit", rows));

        // to be able to use ToString() below which does NOT exist in the LINQ to Entity
        var queryDetails = (from item in pagedQuery
                            select new { item.TeamId, item.Year, item.Name }).ToList();

        return Json(new
        {
            total = (totalRecords + rows - 1) / rows,
            page,
            records = totalRecords,
            rows = (from item in queryDetails
                    select new[] {
                                    item.TeamId.ToString(),
                                    item.Year,
                                    item.Name.FullName
                                }).ToList()
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:31:13.743

这可能由于各种原因而失败：

*   item.Name.FullName 是数据库中的二进制字段？
*   要通过 item 访问 Name 对象，必须启用延迟加载。你确定是吗？

无论如何，使用仅包含您需要的数据的视图模型始终是一个好主意，并且是将数据访问层与控制器分离的好方法。

# matlab - 使用 Matlab 对图像进行非抽取小波变换

> ID：15811246
> 
> 赞同：2
> 
> 时间：2013-04-04T12:31:56.863
> 
> 标签：matlab, image-processing

我是 Matlab 的新手，我正在尝试使用 Matlab 中的小波工具箱。我希望在输入图像上使用未抽取的小波变换来创建一系列图像。但是我想知道如何才能得到每个级别的小波变换的结果？

我在程序中使用的功能是

```
WTSource = ndwt2(Source, n, 'db1'); 
```

其中 Source 是输入图像，n 是变换的级别，“db1”或 haar 变换用于生成图像。

我原以为 WTSource.dec 是结果图像，但我发现 WTSource.dec 中元素的大小与输入图像不同。随着 n 的增加，图像变得更大。所以我想知道我应该如何获得转换的结果图像以供进一步使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:42:50.883

如果您在 命令后查看文档
 [http://www.mathworks.nl/help/wavelet/ref/ndwt2.html ：](http://www.mathworks.nl/help/wavelet/ref/ndwt2.html)

```
 WTSource= ndwt2(Source,n,'db1'); 
```

输出`WTSource`是一个`dec`包含所有这些字段的字段的记录。

dec{ 1 } 近似级别 n
dec{2 : 4} 细节级别 n-1（通道 LH、HL、HH）
dec{5 : 7} 细节级别 n-2（通道 LH、HL、HH）
 ...
dec{ 3n-1 : 3n+1} 细节级别 1（通道 LH、HL、HH）

的每个元素的`dec`大小与您的输入图像相同。

另见：
 [http ://www.mathworks.nl/products/wavelet/examples.html?file=/products/demos/shipping/wavelet/ndwtdemo.html](http://www.mathworks.nl/products/wavelet/examples.html?file=/products/demos/shipping/wavelet/ndwtdemo.html)

# php - 在 php 中加载 php 文件内容

> ID：15811248
> 
> 赞同：0
> 
> 时间：2013-04-04T12:32:01.013
> 
> 标签：php

我正在尝试访问 php 文件，当我使用

下面的代码

```
if(is_file('template1.php')){

     $return = file_get_contents("template1.php?content=1");

} 
```

它显示错误：无法打开流：没有这样的文件或目录

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:35:35.903

`file_get_contents()`用于从文件系统或绝对 URL 中读取内容。您必须指定要读取的文件的完整 URL，即[http://www.example.com/template1.php?content=1](http://www.example.com/template1.php?content=1)。或者，如果您正在读取文件系统上的文件，则必须指定该文件的路径。

我假设您正在尝试读取您网站上的文件，因此您必须做类似`file_get_contents("path/to/file.php")`或更好的事情，只需使用 include 包含文件（[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:38:20.253

我想您想获取**PHP 生成的内容**，如果是这样，请使用：

```
$yourData = file_get_contents('http://example.com/template1.php?content=1'); 
```

否则如果要获取**PHP文件的源代码**，就和.txt文件一样：

```
$yourData = file_get_contents('/template1.php?content=1'); 
```

如果您的服务器关闭了**allow_url_fopen** ，则 file_get_contents() 将不起作用。由于安全风险，大多数共享网络主机默认关闭。此外，在 PHP6 中，**allow_url_fopen**选项将不再存在，所有函数都将作为永久设置为关闭。所以这是一个非常糟糕的使用方法。

如果您通过 http 访问文件，最好的选择是 cURL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:01:00.910

如果文件名`./`在当前文件的当前目录中，或者`../`如果它在父目录中，则以文件名开头。如果您的语法没有问题，请尝试一下：

```
if (is_file('/template1.php')) {
    $return = file_get_contents("/template1.php?content=1");
} 
```

或者

```
if (is_file('./template1.php')) {
    $return = file_get_contents("./template1.php?content=1");
} 
```

或者

```
if (is_file('../template1.php')) {
    $return = file_get_contents("../template1.php?content=1");
} 
```

# python - 如何从python中的文件将项目分配给字典？

> ID：15811252
> 
> 赞同：0
> 
> 时间：2013-04-04T12:32:08.357
> 
> 标签：python, python-2.7

所以我是一个初学者程序员，正在学习编程：在 couera 上制作高质量的代码课程。我有一个文件`restaurant_small.txt`

restaurant.txt 格式是餐厅评分，

```
georgieporgie:50
dumpling r us:70
queens cafe:60 
```

我可以逐行阅读

```
dictionary = {}
our_file = open(file)
#using an iterator to read files
for line in iter(our_file):
    dictionary = ?? 
```

我希望能够建立一个字典`{'restaurant':'rating'}` 我该怎么做，一个简单的一步一步的赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:56:18.473

类似于列夫的答案，但构建一个行生成器，首先从末尾拆分，并使用 dict 理解一次构建它......

```
with open('input') as fin:
    lines = (line.rsplit(':', 1) for line in fin)
    dictionary = {k:int(v) for k, v in lines} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:35:39.137

```
dictionary = {}
with open('restaurant_small.txt') as our_file:
    for line in our_file:
       rest, rating = line.split(':')
       dictionary[rest] = int(rating) 
```

该[`with`语句](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)是使用文件的推荐方法，可以正确处理异常等情况并确保文件始终在最后关闭。大致相当于

```
our_file = open('restaurant_small.txt')
# do the rest
our_file.close() 
```

除了如果之前出现问题`close()`，无论如何都会调用它。`with`该声明的更接近的等价物是

```
our_file = open('restaurant_small.txt')
try:
    # do the rest
finally:
    our_file.close() 
```

# c# - 如何在 C# 中将数据源设置为 Datagridview 控件

> ID：15811254
> 
> 赞同：1
> 
> 时间：2013-04-04T12:32:09.493
> 
> 标签：c#, data-binding, binding, datagridview

这可能看起来很简单，但我不知道该怎么做。我不是 C# 数据绑定方面的专家。

我有一个类对象列表（它是一个嵌套类），看起来像这样：

```
public class IntVector
{
    private string customerid;
    private string hash_id;
    private string client_name;
    private string mobile_no;
    private string address;

    //Table

    private List<CustomerInfo> customerinfo;
} 
```

我有一个清单`IntVector`

```
private List<IntVector> UserData; 
```

现在如何设置`CustomerInfo`作为`DatagridView`UserData 列表成员的控件的数据源。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:58:07.373

首先，您必须以某种方式公开您的 customerinfo 列表（它现在是私有的，因此您无法从 IntVector 类之外获取它）。

如果是公开的：

```
BindingSource bs = new BindingSource(); 

int indexInUserDataList = 0;
bs.DataSource = UserData[indexInUserDataList].customerinfo;

datagridview.DataSource = bs; 
```

此外，如果您想以编程方式修改列表并希望将这些更改传播到控件，您可能需要考虑使用 BindingList 而不是 List （这里解释了[List<T> 与 BindingList<T](https://stackoverflow.com/questions/2243950/listt-vs-bindinglistt-advantages-disadvantages) >

您的 CustomerInfo 类是什么样的？我假设您想将 DataGridView 的列绑定到 CustomerInfo 类的公共属性，例如：

```
class CustomerInfo 
{
   public int Id {get;set;}
   public string Name {get;set;}
   public string Address {get;set;}

   private string somePrivateData;
} 
```

现在，如果您的 DataGridView 中的 AutoGenerateColumns 设置为 true，那么将在您的 DataGridView 中自动创建 3 列“Id”、“Name”和“Address”。“somePrivateData”将被忽略。

如果你想自己定义列，你可以这样做：

```
// make sure to do it before binding DataGridView control
datagridview.AutoGenerateColumns = false;

DataGridViewTextBoxColumn col1 = new DataGridViewTextBoxColumn();
col1.DataPropertyName = "Name";
col1.HeaderText = "Customer name";
col1.Name = "column_Name";
datagridview.Columns.Add(col1);

DataGridViewTextBoxColumn col2 = new DataGridViewTextBoxColumn();
col2.DataPropertyName = "Address";
col2.HeaderText = "Address";
col2.Name = "column_Address";
datagridview.Columns.Add(col2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:03:11.427

您需要将客户的私人列表设置为公开：

```
public class IntVector
{
    private string customerid;
    private string hash_id;
    private string client_name;
    private string mobile_no;
    private string address;

    //Table

    public List<CustomerInfo> customerinfo; 
```

}

```
private List<IntVector> UserData;

//Populate the UserData list here 
```

然后您可以将数据源设置为 DataGridView，例如：

```
DataGridView.DataSource = UserData[0].customerinfo; 
```

我希望这会有所帮助...

# c++ - 为什么 staticMetaObject.className() 返回父类的类名？

> ID：15811266
> 
> 赞同：0
> 
> 时间：2013-04-04T12:32:53.067
> 
> 标签：c++, classname, metaobject

我有一个从“单位”类派生的“默认”类，当我这样做时：

```
Default::staticMetaObject.className()) 
```

它返回`Units`而不是`Default`. 这是为什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:39:44.383

将我的评论变成答案。

这通常发生在您忘记将宏`Q_OBJECT`放入派生类时。

从 Qt 的元类型系统的角度来看，该类与它的父类（即，与确实有`Q_OBJECT`内部的最近的父类）是无法区分的。

# wpf - WPF DataGrid 缩放到鼠标位置

> ID：15811267
> 
> 赞同：0
> 
> 时间：2013-04-04T12:32:55.447
> 
> 标签：wpf, datagrid, mouse, zooming

我有一个 DataGrid，它的 LayoutTransform 绑定到这样的 Slider：

```
<DataGrid.LayoutTransform>
            <ScaleTransform 
                ScaleX="{Binding ElementName=MySlider, Path=Value}"
                ScaleY="{Binding ElementName=MySlider, Path=Value}" />
        </DataGrid.LayoutTransform>
    </DataGrid>

    <Slider x:Name="MySlider"
            Minimum="0.3"
            Maximum="2.0"
            SmallChange="0.1"
            LargeChange="0.1"
            Value="1.0" 
            IsSnapToTickEnabled="True"
            TickFrequency="0.1"
            TickPlacement="TopLeft"
            VerticalAlignment="Bottom"
            HorizontalAlignment="Right"
            Width="200"
            Margin="0,0,61,0"  />

    <TextBlock Name="Lstate"
               Text="{Binding ElementName=MySlider, Path=Value, StringFormat={}{0:P0}}"
               VerticalAlignment="Bottom"
               HorizontalAlignment="Right"
               Width="50" Height="20"
               Margin="0,0,0,1" /> 
```

现在，在代码中，我有带有以下代码的 PreviewMouseWheel 事件：

```
bool handle = (Keyboard.Modifiers & ModifierKeys.Control) > 0;
        if (!handle)
            return;

        double value;

        if (e.Delta > 0)
            value = 0.1;
        else
            value = -0.1;

        MySlider.Value += value; 
```

我的问题是：如何滚动到实际的鼠标位置，如 AutoCad 或其他一些程序？

谢谢

对不起，我的英语不好...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:45:26.267

我现在有一个非常好的解决方案：

```
VirtualizingStackPanel.IsVirtualizing="True" 
VirtualizingStackPanel.VirtualizationMode="Standard"
EnableColumnVirtualization="False"
EnableRowVirtualization="True"
ScrollViewer.CanContentScroll="True"

    private void Data_OnPreviewMouseWheel(object sender, MouseWheelEventArgs e)
    {
        // Scroll to Zoom
        if (Keyboard.IsKeyDown(Key.LeftCtrl) || Keyboard.IsKeyDown(Key.RightCtrl))
        {
            // Prevent scroll
            e.Handled = true;

            var scrollview = FindVisualChild<ScrollViewer>(Data);
            if (scrollview != null)
            {  
                // The "+20" are there to account for the scrollbars... i think. Not perfectly accurate.
                var relativeMiddle = new Point((Data.ActualWidth + 20) / 2 + (Mouse.GetPosition(Data).X - Data.ActualWidth / 2), (Data.ActualHeight + 20) / 2 + (Mouse.GetPosition(Data).Y - Data.ActualHeight / 2));
                var oldLocation = Data.LayoutTransform.Transform(Data.PointFromScreen(relativeMiddle));

                // Zoom
                MySlider.Value += (e.Delta > 0) ? MySlider.TickFrequency : -MySlider.TickFrequency;

                // Scroll
                var newLocation = Data.LayoutTransform.Transform(Data.PointFromScreen(relativeMiddle));

                // Calculate offset
                var shift = newLocation - oldLocation;

                if (scrollview.CanContentScroll)
                {
                    // Scroll to the offset (Item)
                    scrollview.ScrollToVerticalOffset(scrollview.VerticalOffset + shift.Y / scrollview.ViewportHeight);
                }
                else
                {
                    // Device independent Pixels
                    scrollview.ScrollToVerticalOffset(scrollview.VerticalOffset + shift.Y);
                }

                // Device independent Pixels
                scrollview.ScrollToHorizontalOffset(scrollview.HorizontalOffset + shift.X);
            }
        }
    } 
```

它在有和没有虚拟化的情况下缩放到 Datagrid 上的鼠标位置。

# django - 懒惰滚动直到页面结束，然后显示下一页

> ID：15811272
> 
> 赞同：0
> 
> 时间：2013-04-04T12:33:00.760
> 
> 标签：django, django-endless-pagination

我正在使用 django-endless-pagination 来加载我的对象。它工作正常，但我想在滚动时加载一些页面，然后在这些页面之后，我想要一个“显示更多”，当点击时加载下一组页面（再次滚动）

如果我使用

```
<script>$.endlessPaginate();</script> 
```

和

```
{% lazy_paginate 100 entries %} 
```

我希望这些条目会延迟加载，但事实并非如此，它们一次只加载全部 100 个。另外，我不能使用类似的东西

```
<script>
    $.endlessPaginate({
        paginateOnScroll: true,
        paginateOnScrollMargin: 20
    });  </script> 
```

因为这会在滚动时加载所有页面，而不是一组页面。

这就是我想要做的：[http](http://www.flipkart.com/mens-clothing/trousers/pr?sid=2oq%2Cs9b%2C9uj&otracker=hp_submenu_clothing_Trousers&_pop=flyout) ://www.flipkart.com/mens-clothing/trousers/pr?sid=2oq%2Cs9b%2C9uj&otracker=hp_submenu_clothing_Trousers&_pop=flyout 在这里，每个页面在我们滚动时加载，在 20 之后页面，有一个“显示更多页面”，它在滚动时加载第 21 页和其他页面，依此类推。

对此的任何帮助都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T15:23:12.553

首先，如果您使用`{% lazy_paginate 100 entries %}`您得到的行为是正确的：您要求在每页上输入 100 个条目。

在此处阅读文档：http: [//django-endless-pagination.readthedocs.org/en/latest/templatetags_reference.html#paginate](http://django-endless-pagination.readthedocs.org/en/latest/templatetags_reference.html#paginate)

至于第二部分：是的，您可以在一定数量的页面后显示“显示更多”链接：http: [//django-endless-pagination.readthedocs.org/en/latest/javascript.html#on-scroll-分页使用块](http://django-endless-pagination.readthedocs.org/en/latest/javascript.html#on-scroll-pagination-using-chunks)

此外，您可能想编写 js 调用

```
 $(document).ready(function() {
       $.endlessPaginate();
   }); 
```

# vba - vba excel通过缓存或新创建数据透视表

> ID：15811279
> 
> 赞同：0
> 
> 时间：2013-04-04T12:33:10.550
> 
> 标签：vba, excel, excel-2010

在 vba excel 宏工具上，我需要从两个数据表创建许多新工作表和数据透视表。

我们有两种方式

1.  使用数据透视缓存创建新的数据透视表。
2.  一次又一次地使用相同的数据表创建新的数据透视表。

如果我选择第二种方法会有什么影响，

这会使我们的excel文件变重吗？

想要跳过第一种方法，因为如果需要依赖第一个数据透视表应该存在于每个 excel 工作簿中？

使用excel 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:25:56.773

我做了一个项目，它将在现有工作表中创建数据透视表并将数据复制到新的电子表格。如果这是你的问题..请参考下面的代码

```
Dim objtable as pivottable, objfield as pivotfield
set objtable = sheet1.pivotwizard
   ptname = activesheet.pivottables(1).name 'this code is to give pivot table name which will help in creating new pivot tables
   set objfield.objtable.pivotfields("Month") 'this code will select month in page field
 objfield.orientation = xlpagefield
set objfield = objtable.pivotfields ("Dept & Mgr") 'this code will select dept & mgr in page field
objfield.orientation = xlpagefield
set objfield = objtable.pivotfields("Legal Entity") 'this code will select legal entity in row field
objfield.orientation = xlrowfield
set objfield = objtable.pivotfields("Cost Code") 'this code will select cost code in row field
objfield.orientation = xlrowfield
set objfield = objtable.pivotfields("CC Description") 'this code will select CC Description in row field
objfield.orientation = xlrowfield
set objfield = objtable.pivotfields("User") 'this code will select Usr in row field
objfield.orientation = xlrowfield
set objfield = objtable.pivotfields("Carrier") 'this code will select carrier in row field
objfield.orientation = xlrowfield
set objfield = objtable.pivotfields("Description") 'this code will select Description in row field
objfield.orientation = xlrowfield
set objfield = objtable.pivotfields("Amount Incl Tax") 'this code will amount incl tax in Datafield
objfield.orientation = xlDatafield
activesheet.pivottables(ptname).format xlreport6 ' 
```

# ajax - ajaxfileupload 问题ajaxFileUpload 不是函数

> ID：15811282
> 
> 赞同：1
> 
> 时间：2013-04-04T12:33:13.873
> 
> 标签：ajax, codeigniter, ajax-upload

我正在使用 ajaxfileupload 上传文件，每当我上传文件时，它都会给我这个错误。我尝试了很多来修复它，但没有运气。

```
 TypeError: $.ajaxFileUpload is not a function  
 success: function (data, status) 
```

这是我的代码。

```
 $id =$("#id").val();
    $.ajaxFileUpload
    (
        {
            type: "POST",
            url: "main_page/save_image_data",
            secureuri:false,
            fileElementId:'userfile'+id,
            dataType: 'json',
            data: { "image_id":id},
            success: function (data, status)
            {
                if(typeof(data.error) != 'undefined')
                {
                    if(data.error != '')
                    {
                        alert(data.error);
                    }else
                    {
                        alert(data.msg);
                    }
                }
            },
            /*error: function (data, status, e)
            {
                alert(e);
            }*/
        }
    )

    return false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:24:27.527

jQuery 的核心中没有命令`$.ajaxFileUpload`。

因此，您可能正在尝试使用外部库，但尚未将其包含在您的`<head>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T11:02:25.163

如果您在页面中包含 jquery.min.js，则可能会发生这种情况。删除该文件后问题将得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T11:05:57.167

**将此添加到您的文件中。此方法已从 jquery 的较高版本中删除。**

```
jQuery.extend({
    handleError: function( s, xhr, status, e ) {
        // If a local callback was specified, fire it
        if ( s.error )
            s.error( xhr, status, e );
        // If we have some XML response text (e.g. from an AJAX call) then log it in the console
        else if(xhr.responseText)
            console.log(xhr.responseText);
    }
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-06T03:47:32.177

这是我的解决方案-----按照官方的格式：

```
<script type="text/javascript">

    $(document).ready(function() {
        var interval;

        function applyAjaxFileUpload(element) {
            $(element).AjaxFileUpload({
                action: "MyJsp.jsp",
                onChange: function(filename) {
                    // Create a span element to notify the user of an upload in progress
                    var $span = $("<span />")
                        .attr("class", $(this).attr("id"))
                        .text("Uploading")
                        .insertAfter($(this));

                    $(this).remove();

                    interval = window.setInterval(function() {
                        var text = $span.text();
                        if (text.length < 13) {
                            $span.text(text + ".");
                        } else {
                            $span.text("Uploading");
                        }
                    }, 200);
                },
                onSubmit: function(filename) {
                    // Return false here to cancel the upload
                    /*var $fileInput = $("<input />")
                        .attr({
                            type: "file",
                            name: $(this).attr("name"),
                            id: $(this).attr("id")
                        });

                    $("span." + $(this).attr("id")).replaceWith($fileInput);

                    applyAjaxFileUpload($fileInput);

                    return false;*/

                    // Return key-value pair to be sent along with the file
                    return true;
                },
                onComplete: function(filename, response) {
                    window.clearInterval(interval);
                    var $span = $("span." + $(this).attr("id")).text(filename + " "),
                        $fileInput = $("<input />")
                            .attr({
                                type: "file",
                                name: $(this).attr("name"),
                                id: $(this).attr("id")
                            });

                    if (typeof(response.error) === "string") {
                        $span.replaceWith($fileInput);

                        applyAjaxFileUpload($fileInput);

                        alert(response.error);

                        return;
                    }

                    $("<a />")
                        .attr("href", "#")
                        .text("x")
                        .bind("click", function(e) {
                            $span.replaceWith($fileInput);

                            applyAjaxFileUpload($fileInput);
                        })
                        .appendTo($span);
                }
            });
        }

        applyAjaxFileUpload("#demo1");
    });

</script> 
```

至少，不再有这个错误。并且action会收到请求

# javascript - -webkit-transform (rotateX) 导致 z-index 被忽略，影响单独 div 中的按钮

> ID：15811285
> 
> 赞同：2
> 
> 时间：2013-04-04T12:33:28.080
> 
> 标签：javascript, css, less

***已解决：在重新阅读 w3 转换规范后，我意识到由于 DOM 结构，页脚被认为是 3d 上下文的一部分，并且受到旋转元素的影响。我只是将 .cardsContainer 放在另一个元素 .cards3dContainer 中，而页脚现在不被视为 3d 上下文的一部分。***

***-webkit-透视：1000px；似乎表明 3d 上下文从 DOM 中的那个点开始。***

* * *

使用 css3 转换和覆盖另一个 div 中的按钮点击区域的一部分进行旋转的容器存在重大问题。

变换在视觉上起作用，并且容器向后倾斜（使用 rotateX）。然而，尽管页脚中的按钮具有更高的 z-index 并且自然堆叠到容器上方，但在旋转的容器和按钮视觉重叠的地方，它的命中区域被忽略了。该按钮仍然“看起来”在旋转容器的顶部，但就像它在它下面一样。

我应该提到我在 CSS 中使用了 Less（并且所有的 Less 代码都可以工作）。

我查看了很多类似的问题，但各种解决方案对我不起作用。在那些不起作用（省略供应商前缀）中： translate3d(0px, 0px, 0px); 变换风格：扁平化；

这是代码的简短版本：

```
html:
    <div class="screen snap" style="display: block;">
        <div class="container">**<!-- has perspective set to 1000 -->**
            <div class="cardsContainer"> **<!-- is rotated on x using transform -->**
                <div class="card" style="left: 130px; display: block;">
                    <div class="cardBack"></div>
                    <div class="cardFront" style="opacity: 0;">
                        <div class="cardContent">A piece of fruit.</div>
                    </div>
                </div>
            </div>
            <footer>
                        **<!-- at certain screen sizes, when the container and footer overlap, top half of this buttons hit area is inactive-->**
                <button class="checkButton">Start</button>
            </footer>
        </div>
    </div> 
```

**以下是完整的文件，期待任何建议/提示：**

.html 文件：

```
<div class="screen snap" style="display: block;">
    <div class="container">
        <div class="cardsContainer">
            <div class="card" style="left: 130px; display: block;">
                <div class="cardBack"></div>
                <div class="cardFront" style="opacity: 0;">
                    <div class="cardContent">A piece of fruit.</div>
                </div>
            </div>

            <div class="card" style="left: 420px; display: block;">
                <div class="cardBack"></div>
                <div class="cardFront" style="opacity: 0;">
                    <div class="cardContent">Paint</div>
                </div>
            </div>

            <div class="card" style="left: 420px; display: none;">
                <div class="cardBack"></div>
                <div class="cardFront">
                    <div class="cardContent">Nail</div>
                </div>
            </div>

            <div class="card" style="left: 420px; display: none;">
                <div class="cardBack"></div>
                <div class="cardFront">
                    <div class="cardContent">Apple</div>
                </div>
            </div>

            <div class="card" style="left: 420px; display: none;">
                <div class="cardBack"></div>
                <div class="cardFront">
                    <div class="cardContent">House</div>
                </div>
            </div>

        </div>

        <footer>
            <button class="checkButton">Start</button>
        </footer>
    </div>
</div> 
```

.less 文件：

```
.screen.snap .container{
    padding: 0;
    margin: 0;
    border: 0;
    left: 0;
    right: 0;
    bottom: 0;
    top: 0;
    border-radius: 0;
    box-shadow: none;
    vertical-align: baseline;
    background-color: #efe8b6;
    -webkit-perspective:1000px;

    .cardsContainer{
        position:absolute;
        width:800px;
        height:350px;
        top:100px;
        text-align: center;
        background-color: lighten(#efe8b6, 10%);
        -webkit-transform: rotateX(20deg);

        .card {
            position: absolute;
            width:250px;
            height:350px;
            border-radius: 10px;

            .cardFront{
                background-image: url('images/snap_card_front.png');
                background-repeat: no-repeat;
                width:250px;
                height:350px;
                position: absolute;

                .cardContent{
                    width:200px;
                    height:300px;
                    font-size: 37px;
                }
            }

            .cardBack{
                background-image: url('images/snap_card_back.png');
                background-repeat: no-repeat;
                width:250px;
                height:350px;
                position: absolute;
            }
        }
    }
}

footer{
    z-index:999;
    background-color: #f00;
    position: relative;

    .button{
        position:absolute;
        width:50px;
        height:50px;
        background-color: #ccc;
        border-radius: 5px;
        font-size: 25px;
        cursor: pointer;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:57:02.583

After re-reading the w3 spec for transforms, I realised what the problem was.

-webkit-perspective:1000px; seems to state that the 3d context begins at that point in the DOM. I was applying the perspective style to the container which both the footer and the cardsContainer were part of. The footer was then being considered part of the 3d context due to DOM structure and was being affected by rotated elements.

I simply put .cardsContainer inside of another element .cards3dContainer and the footer is now not considered part of the 3d context because it is now not inside the dom structure which has perspective style set.

The new structure is now this:

```
.screen.snap .container{
    .cards3dContainer{
        -webkit-perspective:1000px;

        .cardsContainer{
                }
     }

     .footer{
     }
} 
```

*   Apologies to anyone who may have been working on an answer at the moment.

# java - 从 Flyingsaucer 实现类的 ReplacedElementFactory 中为元素添加图像样式信息

> ID：15811286
> 
> 赞同：2
> 
> 时间：2013-04-04T12:33:29.583
> 
> 标签：java, pdf, pdf-generation, itext, flying-saucer

我正在使用 Flyingsaucer 生成 PDF。我正在尝试通过实现 ReplacedElementFactory 将图像嵌入到 pdf 中。我可以生成替换为图像的pdf。没问题。

但我想要的是在类中动态设置图像的高度和宽度。我需要将图像缩放到确定的大小。我将找到图像的新缩放高度和宽度，并希望为嵌入的图像设置这些比例。

我可以在从 BlockBox 获取的元素中添加样式属性并更新此元素吗？这行得通吗？我尝试使用 blackBox.setElement，但它不起作用。

有人可以帮忙吗？

编辑：

飞碟谷歌集团的彼得布兰特提出以下建议

> 在 ReplacedElement 实现中覆盖 getIntrinsicHeight / getIntrinsicWidth。请注意，这些值将在渲染“点”中而不是像素中，因此您可能必须适当地缩放。

但不幸的是，它对我不起作用。我覆盖了飞碟的 ReplaceElement 并返回了高度和宽度。它对我不起作用。我试过的示例代码在这里

```
public class MyITextImageElement implements ITextReplacedElement
{
      private final FSImage fsImage;
      private float[] scaledWidthAndHeight = null;

      public MyITextImageElement(FSImage image)
      {
        fsImage = image;

        try
        {
            ITextFSImage itextFSImage = (ITextFSImage) image;
            Image itextImage = itextFSImage.getImage();

            byte[] imageByteArr = itextImage.getOriginalData();
            //Getting scaled image height and width
            scaledWidthAndHeight = getScaledWidthAndHeight(imageByteArr);
        }
        catch (Exception e)
        {
            //Exception Handling
        }

    }

    @Override
    public int getIntrinsicWidth()
    {
        if (scaledWidthAndHeight != null)
        {
            return Math.round(scaledWidthAndHeight[0]);
        }
        return fsImage.getWidth();
    }

    @Override
    public int getIntrinsicHeight()
    {
        if (scaledWidthAndHeight != null)
        {
            return Math.round(scaledWidthAndHeight[1]);
        }
        return fsImage.getHeight();
    }

      ...........
      ...........
} 
```

# itext - 如何在java中使用iText设计pdf时修复行数

> ID：15811287
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:33:30.563
> 
> 标签：itext

我正在创建一个 pdf 文件，显示所有员工及其工资的列表。在页面的末尾，它显示了所有工资的总和。

我正在使用 for 循环向表中添加多行。

问题是：在最后一行，总工资不适合在同一页上，它显示在下一页上。

那么有什么方法可以计算页面的高度，然后修复每个单元格的高度？然后相应地限制行数。

这样在页面的末尾，我可以显示总行数并从下一页进一步记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:08:42.650

计算页面的高度：嗯......您在创建`Document`对象时决定页面的大小。你可以选择任何你想要的尺寸。

计算 a 的高度：[我的书](http://itextpdf.com/book)`PdfPTable`的第 4 章对此进行了解释。创建 a时，会将对象添加到仅存在于内存中且对页面大小一无所知的对象中。默认情况下，宽度表示为您将添加. 只有当您添加到特定时，才会计算确切的宽度和高度（这对您来说为时已晚）。`PdfPTable``PdfPCell``PdfPTable``PdfPTable``Document`

如果你想提前知道高度，你需要定义一个绝对宽度（不是百分比）。具有相同内容和不同宽度的表格将具有不同的高度。定义绝对宽度是这样完成[的](http://itextpdf.com/examples/iia.php?id=80)：

```
table.setTotalWidth(width);
table.setLockedWidth(true); 
```

在此代码段中（取自[TableHeight](http://itextpdf.com/examples/iia.php?id=80)示例），`width`等于页面宽度减去左右边距。您在创建`Document`对象时定义页面的宽度和边距。默认情况下，页面大小为 A4，因此默认宽度为 595 个用户单位，默认页边距为 36 个用户单位。

因此，解决您的问题的一种方法是在循环中添加行并使用该方法计算每行`getRowHeight()`的高度或使用该方法计算整个表格的高度`getTotalHeight()`（如果您省略设置总高度，两种方法都将返回 0 ）。如果您发现没有足够的空间来添加摘要行，您可以使用该`deleteLastRow()`方法删除最后一行并在下一页的新表中重新创建它。

这是一种解决方案。另一种解决方案可能是使用表格和单元格事件，但这更难以解释。

# css - css 媒体查询：桌面和最新智能手机分辨率之间的冲突

> ID：15811294
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:33:45.317
> 
> 标签：css, responsive-design, smartphone

由于新手机有一个非常大的分辨率显示屏（例如：1280），我想知道什么是最聪明的方式来做一个 CSS 媒体查询，专门用于 1280 的手机。我遇到的问题是，如果我这样做：

```
@media only screen and (min-width:1136px) and (max-width:1280px) 
```

我将包括一些桌面分辨率大小，并且我希望在桌面视图和移动视图之间有不同的 UI。

有什么好的做法/解决方案吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:36:07.810

对于移动设备，只需尝试检查`min-device-width`和/或`max-device-width`.

另一种可能性是检查您定位的设备的像素比

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:36:08.023

定位智能手机等设备的一个好方法是使用`min-device-width`和`max-device-width`，例如

```
@media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
  /* Smartphone queries here */
}

@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) {
  /* iPad queries here */
} 
```

或者，您可以使用[检测移动浏览器](http://detectmobilebrowsers.com/)进行移动/平板电脑检测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:37:06.950

用户代理嗅探。

这不是一个好的做法，但是如果您在服务器端嗅探用户代理并向客户端（电话、桌面）提供不同的内容（html/css/js），它就可以工作。

更好的是，你应该问问自己你的 UI 是为哪些功能而设计的，比如触摸、屏幕尺寸等。要检测到这一点，你可以使用 CSS 媒体查询和[http://modernizr.com/](http://modernizr.com/)

# php - 当数组中的值为 0 时，它变成 -

> ID：15811295
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:33:45.640
> 
> 标签：php, arrays

我有一个这样的数组：

```
Array
(
    [played] => 2
    [random] => 0
    [win] => 2
    [draws] => 11
    [passes] => 2
    [swaps] => 6
    [hpoints] => 0
    [lpoints] => -12
    [hmoves] => 11
    [lmoves] => 0
    [hpasses] => 1
    [lpasses] => 0
    [hswaps] => 3
    [lswaps] => 0
    [today] => 2013-04-04
    [tdpoints_temp] => -24
    [tdpoints] => -24
    [htdpoints] => 0
    [ltdpoints] => -12
) 
```

然后我将数组分成单独的值，如下所示：

```
foreach($userStats as $singleStat){
    $played = $singleStat['played'];
    $random = $singleStat['random'];
    $win = $singleStat['win'];
    $draws = $singleStat['draws'];
    $passes = $singleStat['passes'];
    $swaps = $singleStat['swaps'];
    $hpoints = $singleStat['hpoints'];
    $lpoints = $singleStat['lpoints'];
    $hmoves = $singleStat['hmoves'];
    $lmoves = $singleStat['lmoves'];
    $hpasses = $singleStat['hpasses'];
    $lpasses = $singleStat['lpasses'];
    $hswaps = $singleStat['hswaps'];
    $lswaps = $singleStat['lswaps'];
    $today = $singleStat['today'];
    $tdpoints_temp = $singleStat['tdpoints_temp']-$playeridPoints;
    $tdpoints = $singleStat['tdpoints']-$playeridPoints;
    $htdpoints = $singleStat['htdpoints'];
    $ltdpoints = $singleStat['ltdpoints'];
} 
```

除了没有问题。当我回显它们时，所有为“0”的变量（$random、$hpoints、$lmoves、$lpasses、$lswaps 和 $htdpoints）都显示为“-”？我不知道为什么，我希望他们按应有的方式返回“0”。

任何帮助表示赞赏并提前感谢:-)

//＃＃＃＃＃＃＃＃＃＃＃ 编辑 ＃＃＃＃＃＃＃＃＃＃＃＃＃//

这是完整的代码：

```
if($cacheAvailable == true){ // WE GOT A CACHE
    //$memcache->delete('stats_'.$opponent);
    $userStats = $memcache->get('stats_'.$opponent);

    echo '<pre>';
    print_r($userStats);
    echo '</pre>';

    foreach($userStats as $singleStat){
        $played = $singleStat['played'];
        $random = $singleStat['random'];
        $win = $singleStat['win'];
        $draws = $singleStat['draws'];
        $passes = $singleStat['passes'];
        $swaps = $singleStat['swaps'];
        $hpoints = $singleStat['hpoints'];
        $lpoints = $singleStat['lpoints'];
        $hmoves = $singleStat['hmoves'];
        $lmoves = $singleStat['lmoves'];
        $hpasses = $singleStat['hpasses'];
        $lpasses = $singleStat['lpasses'];
        $hswaps = $singleStat['hswaps'];
        $lswaps = (int)$singleStat['lswaps']; 
        $today = $singleStat['today'];
        $tdpoints_temp = $singleStat['tdpoints_temp']-$playeridPoints;
        $tdpoints = $singleStat['tdpoints']-$playeridPoints;
        $htdpoints = $singleStat['htdpoints'];
        $ltdpoints = $singleStat['ltdpoints'];
    }
    echo 'This swap: '.$lswaps.'<br><br>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:40:52.477

0 不能转换为'-' 一定是你做了一些转换

尝试使用类型转换

```
$played = (int)$singleStat['played'];
$random = (int)$singleStat['random']; 
```

# javascript - JavaScript 双重表单验证

> ID：15811296
> 
> 赞同：0
> 
> 时间：2013-04-04T12:33:50.193
> 
> 标签：javascript, jquery, forms, validation

我是 JavaScript 新手，我一直在做基于 HTML 和 JavaScript 的大学作业。在这项任务中，我被要求创建一些表格，以允许一个人注册某种形式的教育课程。我被要求使用 HTML 创建表单并仅使用 JavaScript 验证条目。

`firstname`我一直在努力弄清楚的是如何使用一个验证块来验证多个表单输入（如果可能的话），我想`familyname`只使用`validateForm`.

这是我一直在测试的一段：

```
<head>
    <script>
        function validateForm() {
            var x = document.forms["nameform"]["firstname"].value;
            if (x == null || x == "") {
                alert("first name must be filled out");
                return false;
            }
        }
    </script>
</head>
<body>
    <form name="nameform" , action="demo_form.asp" , onsubmit="return validateForm()" , method="post">
<b>First name:</b> 
        <input type="text" name="firstname">
        <br>
<b>Family name:</b> 
        <input type="text" name="familyname">
        <br>
        <input type="submit" value="Submit">
    </form>
</body> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:38:03.450

您可以检查所有输入、存储错误消息（如果有）并在最后返回 false（如果有一个失败）。

IE

```
function validateForm() {
    var x = document.forms["nameform"]["firstname"].value, errors = [];
    if (x == null || x == "") {
        errors.push("first name must be filled out");
    }
    x = document.forms["nameform"]["familyname"].value;
    if (x == null || x == "") {
        errors.push("family name must be filled out");
    }
    if(errors.length > 0) { // check if there were any errors
        alert(errors.join("\n")); // alert all messages together
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:38:57.797

```
<head>
<script>
function validateForm()
{
  var firstname=document.getElementById('txtfirstname');
  var familyname=document.getElementById('txtfamilyname');

   if (firstname.value=="")
       {
         alert("first name must be filled out");
         return false;
        }
  if (familyname.value=="")
     {
         alert("familyname must be filled out");
         return false;
     }

 }
</script>
</head>

<body>
<form name="nameform", action="demo_form.asp", onsubmit="return validateForm()", method="post">
<b>First name:</b> <input type="text" id="txtfirstname" name="firstname">
<br>
<b>Family name:</b> <input type="text" id="txtfamilyname" name="familyname">
<br>
<input type="submit" value="Submit">
</form>

</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:41:04.587

只需将其存储在多个变量中并具有多个 if 语句：

```
<script>
    function validateForm() {
        // name the variables appropriately
        var firstname = document.forms["nameform"]["firstname"].value;
        var familyname = document.forms["nameform"]["familyname"].value;
        // check if either of them are correct, if not alert and return false.
        if (firstname == null || firstname == "") {
            alert("first name must be filled out");
            return false;
        } else if (familyname == null || familyname == ""){
            alert("family name must be filled out");
            return false;
        }
        return true;
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:46:11.353

几种可能性...

```
<script>
function validateForm()
{
    var x=document.forms["nameform"]["firstname"].value;
    if (x==null || x=="")
    {
        alert("first name must be filled out");
        return false;
    }
    x=document.forms["nameform"]["lasttname"].value;
    if (x==null || x=="")
    {
        alert("last name must be filled out");
        return false;
    }
return true;
}
</script> 
```

将在验证失败时为每个字段显示警报，如果所有字段都正常，则返回 true。

```
<script>
function validateForm()
{
    var errorString="";
    var x=document.forms["nameform"]["firstname"].value;
    if (x==null || x=="")
    {
        errorString+="first name must be filled out\n";
    }
    x=document.forms["nameform"]["lasttname"].value;
    if (x==null || x=="")
    {
        errorString+="last name must be filled out\n";
    }
    if(errorString=="")
    {
        return true;
    }
    else
    {
        alert(errorString);
        return false;
    }
}
</script> 
```

将返回一个警报，列出所有未通过验证的字段。

此外，我总是喜欢在第一个验证失败的字段上使用 focus() 方法将光标放在需要更正的字段中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T12:46:48.133

试试这个..

```
function validateForm() 
{
    var msg='';
    var flag=false;
        var x = document.forms["nameform"]["firstname"].value;
        if (x == null || x == "") 
        {
            flag = true;
            msg = ' First Name '
        }
        x = document.forms["nameform"]["familyname"].value;
        if (x == null || x == "") 
        {
            if(flag==true)
                msg = msg + 'And Family Name '
            else
                msg = msg +  ' Family Name ';
            flag = true;
        }
        if (flag==true) {
            msg = msg + " must be filled out";
        alert(msg);
        }
        return false;
} 
```

# javascript - 如何在 mocha 框架中更正这个测试用例？

> ID：15811297
> 
> 赞同：1
> 
> 时间：2013-04-04T12:33:50.960
> 
> 标签：javascript, node.js, express, mocha.js

我正在尝试为节点应用程序编写测试用例，它使用 mocha 作为测试框架。

**测试.js**

```
var register = require('../routes/users');
var request = require('request');
var baseUrl = 'http://localhost:5000';

describe('registerUser()', function() {

    it('check email is already registered', function (done) {
        request.post({uri:baseUrl+'/register', form :{
            username: 'test',
            email: 'test@test.com'
        }}, function (e, res, body) {
            res.should.have.property('statusCode', 201);
            res.should.have.property('regErr', 'This email is already taken!');
        })
    });

}) 
```

在渲染`regErr`函数中作为参数给出。`registerUser`我预计该参数`regErr`将被设置为响应的属性，并且可以进行测试。请检查我在 github 中的[registerUser 函数。](https://github.com/justin-john/node-user-management/blob/master/routes/users.js#L117-L119)我正在尝试为此功能创建一个测试用例。

上面的代码没有`regErr`在测试用例中获取的响应中调用的属性。

如何更正以使渲染参数也可以作为响应的属性？

我是否需要更改实际功能`registerUser`才能获得此功能？如果是这样，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:27:22.937

执行 HTTP 请求时，回调函数使用三个参数调用：

*   err（可能的错误返回）
*   res (HTTPRequest 对象)
*   正文（结果正文的缓冲区）

因此，regErr 在 body 变量中。而且由于您正在渲染 HTML 页面，因此您必须自己解析正文才能找到它。一种可能的解决方案是渲染 JSON 并在生成的正文缓冲区上使用 JSON.parse()。

# shell - Cronjobs：有没有办法为所有 cronjobs 只设置一次 shell 变量的范围？

> ID：15811303
> 
> 赞同：0
> 
> 时间：2013-04-04T12:34:04.367
> 
> 标签：shell, cron, cron-task

我想知道是否有一个更优雅的解决方案，只定义一次我的 shell 变量的范围？( `export QUERY_STRING;`)

这是我的几个 crontasks，请注意我目前正在为每个任务导出每个 shell 变量：

```
2 0 1 * * QUERY_STRING='drink/beer/carlsberg'; export QUERY_STRING; /usr/local/bin/php -e /home/myuserdir/public_html/index.php
4 0 1 * * QUERY_STRING='food/pizza/hawai'; export QUERY_STRING; /usr/local/bin/php -e /home/myuserdir/public_html/index.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:37:12.237

使用`env(1)`：

```
env QUERY_STRING=food/pizza/hawai /usr/local/bin/php -e /home/myuserdir/public_html/index.php 
```

或 的缩写形式`export`：

```
export QUERY_STRING=food/pizza/hawai; /usr/local/bin/php -e /home/myuserdir/public_html/index.php 
```

# r - 我怎样才能让这个 deparse 函数工作

> ID：15811305
> 
> 赞同：1
> 
> 时间：2013-04-04T12:34:15.533
> 
> 标签：r

`deparse`如果我这样做，我希望能够使用该功能

```
g = function(x) deparse(substitute(x)) 
```

那么就可以了

```
R) g(test)
[1] "test" 
```

但是如果我想测试的论点`g`是否是`character`

```
h = function(x) {if(is.character(x)){return(x)}; deparse(substitute(x))}
R) h(test)
Error in h(test) : object 'test' not found 
```

为什么会发生这种情况，我可以修复它吗？

编辑：转载自新`R --vanilla`

```
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252
[2] LC_CTYPE=English_United Kingdom.1252
[3] LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C
[5] LC_TIME=English_United Kingdom.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:50:04.657

问题中的代码试图评估一个`test`不存在的变量 ，因此出现错误。试试这个：

```
g = function(x) {
    x.try <- try(x, silent = TRUE)
    if (!inherits(x.try, "try-error") && is.character(x.try)) x.try
    else deparse(substitute(x))
}

# test it out
if (exists("test")) rm(test)

g(test) # "test"
g("test") # "test"

test <- "xyz"
g(test) # "xyz"
g("test") # "test"

test <- 3
g(test) # "test"
g("test") # "test" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:43:05.290

因为`test`在全球环境中不存在。`substitute`不评估它的论点，所以它不寻找 object `test`。 `is.character`确实评估了它的论点，因此当它找不到时会抛出一个错误`test`。

```
h <- function(x) {if(is.character(x)) x else deparse(substitute(x))}
test <- "hello"
h(test) 
```

你如何解决你的问题取决于当对象不存在时你希望函数做什么。如果您希望它返回对象名称，请执行以下操作：

```
h <- function(x) {
  var <- deparse(substitute(x))
  if(exists(var) && is.character(x)) x else var
} 
```

# php - php中的javascript将值传递给javascript值

> ID：15811306
> 
> 赞同：0
> 
> 时间：2013-04-04T12:34:15.987
> 
> 标签：php, javascript

我使用的代码如下所示：

```
 <?  
$sql = mysql_query("select * from tbl_item where item_category = '$item_cat'");
$i=1;
  while($crows = mysql_fetch_array($sql))
  {
    ;
  ?>    

  <tr>
    <td width="57" align="center" ><? echo $i;?></td>
    <td width="540" align="center" onClick=><div align="center"><? echo $crows["item_name"];?> </div></td>
    <td width="385" align="center">
      1<input name="<? echo $crows["item_name"];?>" type="radio" id="radioqty<? echo $i;?>" value="1" checked="checked"  />

      2<input type="radio" name="<? echo $crows["item_name"];?>" id="radioqty<? echo $i;?>" value="2" />

      3<input type="radio" name="<? echo $crows["item_name"];?>" id="radioqty<? echo $i;?>" value="3" />

      4<input type="radio" name="<? echo $crows["item_name"];?>" id="radioqty<? echo $i;?>" value="4" />
    </td>
    <td width="249" align="center" >
      Full<input name="radioplate<? echo $i?>" type="radio" id="radioplate<? echo $i?>" value="full" checked="checked" /> 
      Half<input type="radio" name="radioplate<? echo $i?>" id="radioplate<? echo $i?>" value="half" /></td>

    <td width="281" align="center">
      <input name="serve" type="button" value="Serve" onclick="get_code('a','get_item_save.php?item_id='+<? echo $crows["item_id"];?>+'&cat_id='+document.exB.item_category.value+'&plate_type='+document.exB.radioplate<? echo $i?>.value+'&qty='+exB.radioqty<? echo $i;?>.value+'&bill_no='+document.exB.bill_summary_bill_no.value+'&bill_date='+document.exB.bill_summary_date.value),get_code('b','get_item_sale_list.php?bill_no='+document.exB.bill_summary_bill_no.value)"/>      </td>
  </tr>
  <? $i++; }?> 
```

在这里，当我调用函数时我做错了，`get_code`我无法弄清楚我错了。有人可以弄清楚我在这行代码上做错了什么：

```
<td width="281" align="center">
    <input name="serve" type="button" value="Serve" onclick="get_code('a','get_item_save.php?item_id='+<? echo $crows["item_id"];?>+'&cat_id='+document.exB.item_category.value+'&plate_type='+document.exB.radioplate<? echo $i?>.value+'&qty='+exB.radioqty<? echo $i;?>.value+'&bill_no='+document.exB.bill_summary_bill_no.value+'&bill_date='+document.exB.bill_summary_date.value),get_code('b','get_item_sale_list.php?bill_no='+document.exB.bill_summary_bill_no.value)"/>      </td> 
```

我在以下位置收到错误：`document.exB.radioplate<? echo $i?>.value`show `undefined`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:38:57.963

也许`mysql_fetch_array($sql, MYSQL_ASSOC)`在 while 语句中。

使用 ，`MYSQL_ASSOC`您可以按名称检索字段，例如`crows['item_name']`.

# eclipse - 我可以在 maven gae 项目中使用 google app engine eclipse 插件吗？

> ID：15811308
> 
> 赞同：1
> 
> 时间：2013-04-04T12:34:23.330
> 
> 标签：eclipse, google-app-engine, eclipse-plugin, gae-eclipse-plugin, maven-gae-plugin

[我使用官方方式（ https://developers.google.com/appengine/docs/java/tools/maven](https://developers.google.com/appengine/docs/java/tools/maven) ）将 GAE 项目迁移到 Maven 项目，但我不想使用 Maven 来部署/使用 devserver。

当我使用 GAE Eclipse 插件时，出现错误：

```
Could not locate /path/to/project/target/WEB-INF/appengine-web.xml 
```

是否可以使用 GAE eclipse 插件或者我必须使用 Maven 来部署/本地服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T15:41:54.417

我发现当前执行此操作的过程有点棘手，但这*是*可能的。在摆弄它之后它工作得很好......我很高兴让 Maven 管理依赖项，我发现自己也用它来测试/部署。让它工作的关键可以[在 GWT 文档](https://developers.google.com/eclipse/docs/faq#gwt_with_maven)中找到：特别是，您需要在 Eclipse 中使用“动态 Web 项目”，而不是普通的（对我而言）GAE 项目。

1.  [按照上面的链接](https://developers.google.com/eclipse/docs/faq#gwt_with_maven)创建 Eclipse 动态 Web 项目，包括将源文件夹更改为适当的类似 maven 的位置，并将 Web 模块位置更改为 maven 位置。

2.  将源文件复制到正确的位置。

3.  将 pom.xml 文件添加到目录中。此时，您应该可以转到命令行并运行`mvn appengine:devserver`

4.  回到 Eclipse，转到项目属性并打开 Google -> App Engine：使用 GAE，然后使用 HRD。

5.  为了能够使用 m2eclipse 管理 Maven 依赖项并在 Eclipse 中执行 Maven 操作，您需要将项目转换为 Maven 项目，[根据这个 StackOverflow 问题](https://stackoverflow.com/questions/2037188/how-to-configure-eclipse-build-path-to-use-maven-dependencies)

6.  您可能需要关闭 Eclipse，通过 Maven 重建，重新启动/刷新 Eclipse。此时，您应该能够通过 Eclipse 或 Maven 构建/调试/部署！

# c# - 将参数传递给使用 MSTest.exe 从命令行运行的编码 UI 测试

> ID：15811310
> 
> 赞同：5
> 
> 时间：2013-04-04T12:34:31.157
> 
> 标签：c#, visual-studio-2012, mstest, coded-ui-tests

我有一个 CodedUiTest，它有几种测试方法。每次我通过 MSTest 从命令行执行测试时，我都希望能够将不同的路径传递给测试。我怎样才能做到这一点？

这就是我现在执行测试的方式：

```
{
    System.Diagnostics.Process codedUIProcess = new System.Diagnostics.Process();
    System.Diagnostics.ProcessStartInfo codedUIStartInfo = new System.Diagnostics.ProcessStartInfo();

    codedUIStartInfo.FileName = @"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe";
    codedUIStartInfo.Arguments = @"/testcontainer:C:\DailyBuildAutoTest.dll /test:MyUITestAssembly\MyCodedUITest";
    codedUIStartInfo.CreateNoWindow = true;

    codedUIProcess.StartInfo = codedUIStartInfo;

    codedUIProcess.Start();
} 
```

有没有办法将字符串等参数传递给“MyCodedUITest”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:13:46.507

不，不幸的是，没有办法做到这一点。检查[MSTest 命令行选项](http://msdn.microsoft.com/en-us/library/ms182489%28v=vs.110%29.aspx)

我能想到的唯一可能的方法是将 与 关联`CodedUi Tests`并从[Microsoft Test Manager](http://msdn.microsoft.com/en-us/library/dd286680.aspx)`Test Cases`运行它们。

[然后，您可以通过向测试用例添加参数来](http://msdn.microsoft.com/en-us/library/dd997832.aspx)轻松参数化测试。这些参数是`DataSource`相关测试的参数，您可以[从 CodedUi Test 中读取它们](https://stackoverflow.com/questions/8163098/how-to-read-parameter-values-from-a-testcase-in-microsoft-test-manager)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T10:56:44.097

如果要更改测试容器或 mstest.exe 的路径，可以使用 bat 文件，路径是文件的参数，并从进程执行 bat 文件。

```
 string _myBatchFile = "batFileFullPath;
 string _testContainer = "DllfileFullpath";
 string _testMethodName = "testMethodName";
 string _result = "resulFileName.trx";
 Process _process = new Process();

 _process.StartInfo.Arguments = string.Format("{0} {1} {2}", "\"" + _testContainer + "\"", _result, "\"" + _testMethodName + "\"");
                        _process.StartInfo.FileName = _myBatchFile;
                        _process.Start();
                        _process.WaitForExit(); 
```

如果路径之间包含空格，请在路径前后使用引号字符。否则，将它们作为参数发送到 bat 文件将是一个问题。

创建一个如下所示的 bat 文件以由进程调用它。

```
@ECHO on

"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\mstest.exe" /testcontainer:%1 /test:%3 /resultsfile:%2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T11:11:10.560

可以在调用前设置一个环境变量`mstest`，然后用它的值生成路径字符串吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-24T03:45:11.857

是的。现在 MSTest 中没有传递参数的选项，但是我在项目中实现了一些解决方法。您需要传递的任何参数都可以保存在文本文件中（或者您可以保存在数据库中）并在执行测试用例时从文本文件中获取参数值。

# javascript - 使用期货的javascript dom

> ID：15811319
> 
> 赞同：2
> 
> 时间：2013-04-04T12:34:49.097
> 
> 标签：javascript, dom, future

[dom 标准](http://dom.spec.whatwg.org/#futures)现在显然包括`futures`

从我从文档中可以看出，这似乎与大多数人宣传的不同风味`futures`- 特别是似乎没有我读过`join`的其他文档的核心功能。`futures`

这是怎么回事？

有没有关于 dom 使用的方法的标准示例？

这种方法实际上在实际的 javascript 中实现了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:58:06.387

Tab Atkins, Jr在一篇[非常好的文章](http://www.xanthir.com/b4PY0?utm_source=javascriptweekly&utm_medium=email)中描述了“dom futures”

# java - 在 Java 中提取存档文件

> ID：15811324
> 
> 赞同：0
> 
> 时间：2013-04-04T12:35:05.963
> 
> 标签：java, extract, archive

我正在寻找一个库来提取存档文件。例如，zips、rars、tars、wars、...

到目前为止，我的应用程序仅支持 .ZIP 和 .RAR，但我想增加对其他几种存档类型的支持。不仅如此，我还希望库“检测”存档文件，即使我给它们另一个扩展名或根本没有扩展名。

基本上，我正在寻找某种可以传递文件和路径的接口，然后检查文件是否为存档文件，如果不是则返回错误，如果是则将文件提取到指定路径. 我猜测不同的文件类型有不同的实现，但如果库检测到这一点并自动将其传递给正确的实现，那将非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:04:21.473

您可以使用[Apache Commons Compress](http://commons.apache.org/proper/commons-compress/)。

这个库也被伟大的[Apache Tika](http://tika.apache.org/)使用，它可以用来检测不同的文件格式，也没有扩展名（但也许巨大的 Apache Tika 对你的任务来说太过分了）。

# javascript - 无法让点击事件在 Raphael SVG 元素上工作

> ID：15811329
> 
> 赞同：0
> 
> 时间：2013-04-04T12:35:21.087
> 
> 标签：javascript, svg, raphael

我已经浏览了以前的问题，但仍然无法解决这个问题。

我正在做一些测试，我想使用 Raphael 绘制一个元素并将事件绑定到单击/鼠标悬停等。

它是一个简单的演示页面（从 Raphael 演示页面复制澳大利亚形状），其中填充了澳大利亚每个部分的路径。我想要一些单击和鼠标悬停事件处理程序来更改每个部分的颜色等。

代码中是否有一些愚蠢的错字，或者事件范围有问题？

提前喝彩。

```
 <script type="text/javascript">

 // Constants
 var code_rev       = "0010";
 var map_width      = 800;
 var map_height     = 800;

 // Globally acessible map elements
 var map_canvas;
 var map_elements = Array();

 // Master on-load function
 $(document).ready(function()
 {
    /* Startup debug message */
    dlog("Def-Risk Script "+code_rev);
 });

 // Log function
 function dlog(a)
 {
    console.log(a);
 }

 function init()
 {
    initMap();
 }

 // Initialise Map, no colour
 function initMap()
 {
    /* Debug log */
    dlog("initMap(): Initialising map canvas");

    /* Create drawing canvas (using Raphael) */
    map_canvas = Raphael(0, 0, map_width, map_height);
 }

 function test()
 {
    drawTest();
 }

 function change()
 {
  var attr2= {
                    fill:                   "#0F0",
                    stroke:                 "#666",
                    "stroke-width":         1,
                    "stroke-linejoin":      "round"
                };   

    map_elements['aus_vic'].attr(attr2);
 }

 function drawTest()
 {
    dlog("drawTest(): starting draw test");

    var attr = {
                    fill:                   "#333",
                    stroke:                 "#666",
                    "stroke-width":         1,
                    "stroke-linejoin":      "round"
                };

    var attr2= {
                    fill:                   "#00F",
                    stroke:                 "#666",
                    "stroke-width":         1,
                    "stroke-linejoin":      "round"
                };   

    /* Start drawing in paths for each part of australia */
    map_elements['aus_vic'] = map_canvas.path("M252.869,203.121l-0.873-0.643l-1.721-0.121l-8.182-4.065l0.178-1.349l-0.354-1.082l-0.722-1.028l-0.566-1.235l0.204-1.168l-1.433-0.73l-0.899,0.326l-0.711,0.295l-0.74,0.111l-1.083,0.354l-1.451,0.408l-1.961-0.461l-1.037-0.603l-0.896,0.327l-0.658,0.666l-1.164-0.204l-1.223-0.571l-0.925,0.139l-1.434-0.729l-1.85,0.28l-0.823-0.444l-0.741,0.11l-0.471,0.638l0.223,1.481l-1.295,0.195l-1.619-0.701l-1.277-0.943l-0.379-1.268l-1.973-1.783l-1.619-0.701l-1.138-0.018l-1.444-2.054l-0.604-2.748l-1.008-0.413l-1.721-0.119l-0.98-0.232l-1.055,0.539l-0.045,0.953l-1.092-0.971l-0.492-2.009l-1.73-1.44l-2.12-0.248l-1.748-0.305l-1.024,0.723l-1.834-0.86l-1.109,0.168l-0.08,0.038v28.152l0.436,0.031l2.342,1.916v1.065l0.64-0.214l0.638,0.427l1.278-1.491l2.556,1.278l1.703-0.427l7.881,4.261l3.193-3.195l2.557-1.704h1.49l0.428-1.275l-1.492,0.425l-0.853-0.64h1.063l2.771-2.129l1.277,2.555l-1.277,1.703l-1.917-0.424l1.917,1.702l1.277-0.852l0.64,0.213l0.211-1.703h1.492l0.426,1.276l-0.852,0.214l-0.215,1.276l1.49,1.065l1.491-0.213l0.214,0.426l-0.639-0.213l1.064,1.916l0.851-0.64l0.853,0.427l-0.213-0.64l0.854,1.705l1.064,1.063l0.426-2.769l-1.277,0.852l-0.426-1.703h2.13l2.526-0.843l4.074-4.269l2.768-1.703l-3.406,1.489l1.917-1.278l-0.071-0.07l-0.568-0.567l1.492,0.427l1.703-0.64l-0.213,0.427l9.371-0.853l1.915-1.703l-0.638-0.64H252.869z").attr(attr);
    map_elements['aus_nsw'] = map_canvas.path("M278.939,132.632l-0.641-0.853l0.183-1.97l-0.975,0.091l-0.92-0.092l-0.506,0.415l-0.526,0.234l-0.541,0.053l-0.939-0.271l-1.049,0.468l-0.813-0.833l-0.938-0.272l-0.851,0.631l-0.67,0.614l-1.083,0.106l-0.904,0.09l-0.108,0.741l0.288,1.068l0.722-0.073l-0.651,0.795l-0.129,0.559l-1.049,0.47l-0.757-0.291l-0.433-0.688l-0.651,0.794l-0.651,0.795l-0.309,0.578l-0.688,0.433l-0.47-1.049l-0.069-0.723l-0.435-0.688l-0.415-0.507l-0.631-0.85l-1.121-0.254l-1.643-0.021l-0.577-0.309l-0.761-0.29l-0.722,0.071l-0.235-0.524l-0.903,0.089l-1.41,0.504l-1.3-0.237l-1.321-0.416l-0.541,0.053L250,132.249l-1.104-0.073l-0.073,1.102l-0.722,0.072l0.053,0.543l-0.869,0.449l-53.113-0.052l-0.002,0.043v45.292l0.08-0.038l1.109-0.168l1.834,0.86l1.024-0.723l1.748,0.305l2.12,0.248l1.73,1.44l0.492,2.009l1.092,0.971l0.045-0.953l1.055-0.539l0.98,0.232l1.721,0.119l1.008,0.413l0.604,2.748l1.444,2.054l1.138,0.018l1.619,0.701l1.973,1.783l0.379,1.268l1.277,0.943l1.619,0.701l1.295-0.195l-0.223-1.481l0.471-0.638l0.741-0.11l0.823,0.444l1.85-0.28l1.434,0.729l0.925-0.139l1.223,0.571l1.164,0.204l0.658-0.666l0.896-0.327l1.037,0.603l1.961,0.461l1.451-0.408l1.083-0.354l0.74-0.111l0.711-0.295l0.899-0.326l1.433,0.73l-0.204,1.168l0.566,1.235l0.722,1.028l0.354,1.082l-0.178,1.349l8.182,4.065l1.721,0.121l0.873,0.643h0.513l-0.213,0.64l0.112-0.336l0.227,0.167l0.939-0.471l-0.213-1.704l0.427-0.212h0.425l-0.425-1.065l-0.853-0.213l0.426-0.853l-0.426-1.064l0.426,0.214l0.427-1.491l0.851-3.406l-0.213-2.131l0.426-1.277h-0.426l1.065-0.852l-0.64-0.853l0.854,0.213l1.703-4.046l1.49-0.428l-0.641-1.275l0.641-0.214v0.853l0.424-0.214l-0.424-1.276l-0.426,0.213l0.213-0.426l-0.854-0.213l1.49-0.64l0.427-1.491l-0.427-0.639l0.64-0.215v-1.489l1.703-1.703l-0.638-0.214l1.063-0.213l-1.276-0.426l1.489-0.213l0.214-1.064l-0.64,0.426l-0.427-0.426l0.64,0.213l-0.213-0.639l0.64,0.426l0.213-1.704v-0.212l-0.427,0.425v-0.639l-0.213,0.214l-0.213-0.641l0.64,0.427l0.213-1.064v0.853l0.852-0.426l0.214-1.064l-0.427-0.427h0.854l0.637-1.703l-0.637,0.853l-0.214-0.853h0.638v-0.853l0.213,0.853l0.854-1.491l-0.213-0.426h0.427v0.64l2.556-1.491l-0.853-0.213l-0.853,0.639l-0.213-0.213l0.426-0.426l-0.213-0.426l0.853,0.426l0.638-0.426l0.215,0.426l0.853-1.277l1.489-0.853l0.214-1.702l-0.64-0.215v0.428l-0.852-0.428h1.064l0.213-1.49l1.49-1.277l1.918-6.176l-0.213-4.26l1.489-3.834l0.213-0.639l0.64-3.62l-0.64-0.426l0.64,0.213l-0.213-0.853l1.703-3.193h-0.426l0.426-0.214L278.939,132.632z M261.268,143.072h-0.215l-0.213-0.639l0.641-0.214L261.268,143.072z").attr(attr);
    map_elements['aus_wa']  = map_canvas.path("M112.615,33.818l-0.426-0.425l-0.852-0.213l-1.278,0.213l0.852,0.639l0.213,0.852l-0.852-1.065l0.638,1.065l-0.212-0.213l-0.213,0.426l-0.426-0.426l-0.213,0.852l-0.426-1.064l-0.426,0.639l1.064,2.982h-0.426l-0.213-1.065l-1.065-1.065v1.704l-0.639,0.639l0.426-0.852l-0.426-0.639l0.426-0.213l-0.213-1.277l0.639-1.491h-0.426l0.852-0.212l-0.426-0.639l0.426-0.212l-1.491-1.065l-0.212,0.425l-1.917-2.981l-1.491-0.852l-0.213-0.852l-0.639-0.213l0.213,0.638l-0.639-0.638l-0.426,0.425V27.22l-0.426,0.425l-0.426-1.064l-1.278-0.427v0.427l-0.852-0.213l0.426,1.065l0.852,0.425l-0.373-0.053l-1.118-0.16l0.213,0.64L98.77,28.71l-0.213-0.425l-0.213,1.277l-0.639-1.277l-0.426,0.212l0.426-1.064l-1.277,0.852l-0.213,0.425l0.426,0.426l-0.852,0.426l-0.213-1.065H95.15l0.426-0.425H95.15l0.426-0.426l-0.639,0.426l-0.639-0.213v0.427l-0.213-0.427v0.427l1.278,0.639l-0.852,0.639l0.213,0.638l-0.639,0.427l0.426,0.852h-0.852v1.065l-0.639-0.639l0.212-0.853l-0.852,0.213v-0.639l-0.639,1.704l0.213-1.917l0.426-0.639l-0.852-0.426v2.343l-0.639-0.213l-0.426,0.852l-0.213-0.639l-0.426,0.425l0.213-0.852l-0.852,0.852l0.426,0.213l-1.278,0.639l0.639,0.853h0.639l-0.852,0.64l1.278,0.425l0.213-0.425l0.426,0.212l-0.852,0.852l1.064,0.426h-1.064l-0.426-0.639l-0.852,0.639l-0.639-1.49l-0.426,0.212l0.213,0.852l-1.278,0.213l0.426,0.213l-0.213,0.639l1.278-0.852l-1.278,1.065l0.426,0.426l1.065-0.64v0.426h0.426l-0.639,0.639l1.277,1.064l-1.064-0.852l-0.426,0.425l-0.426-0.852l-0.852-0.212v-0.426l-0.639,0.426l-0.426,0.852l-0.213-0.427l-0.212,0.639l-0.852-0.212l0.213,0.212l-0.852,0.64l0.426,0.212l-0.639,0.213l0.852,2.342l0.213-0.372v0.16l0.426-0.64l-0.355,0.355l0.568-0.994l0.639-0.425l-0.426,0.425h0.639l-0.852,0.639l-0.213,1.491h0.426l-0.852,0.425l0.426,0.213l-0.426,0.213l-0.426-1.065l-0.426,1.917l1.491-0.213l1.278,0.639l1.065-0.212l-1.065,0.425l-0.426-0.425l-1.917,0.212l-0.426-0.426l-0.426,0.426l0.373,0.224l-1.011,0.203l0.639-0.213l-0.639-0.213l-0.639-0.852l-1.491-0.639l0.639,0.639h-0.426l0.426,0.64l-0.852-0.64v0.213l-1.065-0.426h0.426l-0.212-0.426h0.426l-0.852-0.425v0.425l-0.639-0.213l0.213,0.427l-0.426-0.427l0.426,0.64l-0.426,0.212l0.852,0.213l0.212,0.426l-0.639-0.213l0.639,0.426H77.48l1.064,0.639h-1.49l0.426,0.639l0.212-0.426l0.639,0.213l-0.852,0.639l1.49,0.426l0.426,1.278l0.852-0.426v-0.426l0.426,0.213l-1.064,1.065l0.426,0.426l-0.639-0.213l1.065,1.917l-1.917-1.917l-0.639,0.213l0.852,1.49l-0.426-0.213l-0.426,1.065v1.065l-1.278-1.278l-0.639-2.129l-0.852-0.64v-1.704h-0.639l-0.639-0.639l0.213-0.852l0.639-0.213l-0.426-0.639l-0.639,0.213l-1.278,2.129l0.639,0.639l-1.704-0.212l-0.213,0.639l0.426,0.852l-0.852-0.426v0.426l-0.852,0.213l-0.639,0.852l0.426,0.213l-1.065,0.852l-0.213,1.916l0.639,1.491l-0.426,1.491l1.491,0.213v0.852l-2.981,2.13l-0.852,0.212l-0.639,0.852l0.426,0.64l-1.065,0.212l0.213,0.852l-1.065,1.917l-2.555,3.195l-5.963,2.556l-1.491,0.213h-1.491L51.924,69.6l-0.852,0.639L50.434,69.6l-1.917-0.426L48.73,69.6v0.213L48.517,69.6l-0.426-0.213L47.878,69.6l-1.491,1.917l-4.472,0.852v-0.426l-1.704,1.065l0.213,0.426h-0.639l-0.426,0.852l-1.065,0.213v-0.213l-1.704,0.852l-1.278-0.639l-0.213-0.64l-1.491,0.852l-0.639-0.212l-0.426-0.213l0.639-1.065h-0.426l-1.065,1.278l0.212,0.212h-0.426l-2.129,1.065l-0.639-0.426l-0.213,1.064l-1.704,0.852l-0.639,1.278l-1.064,0.213l-1.065,1.704l-4.046,1.065l-1.704,1.064l-0.213,1.278l-0.426,0.213l-0.426-0.213l0.213,0.852l-0.639,1.065l0.426,0.426l-0.426-0.212l0.212,0.425l-0.852,1.065l-0.426-0.639l-1.065,0.639l0.426-1.49l-0.426,0.425l-0.213-1.49l0.852-2.556L13.8,82.804l-2.129,5.111l1.065,2.769l-0.426,1.278l0.213,2.555l-2.129,2.982l-0.426,3.833l1.704,2.769l-0.213,0.427l0.426,1.704l0.852,0.639l2.342,4.685l0.639,0.213l0.212,1.064h-0.639l0.213,2.343l-1.064,1.277l-1.065-1.704l-0.213-2.342v1.065l-1.065,0.852l0.213-2.343l-1.704-2.769l-0.639,1.704l0.426,0.426v-0.852l0.639,3.194l2.13,1.704l-0.213,1.917l-1.277,0.64l-0.213-1.491l-0.213,1.278l-0.426-2.556l-0.213,1.277l-0.852-3.407l0.213,2.769l-0.639-0.426v-2.342l-0.213,1.704l-0.852-0.639l5.537,8.093l1.278,3.407l-0.426,1.065l0.426,2.129l2.343,2.769l0.639,1.278l-0.213,0.852l1.917,2.557l0.852,2.98l-0.213,3.833v0.427l0.639,3.407l4.259,8.944l0.213,3.193l1.065-0.639v0.425l-1.065,0.214l0.213,1.064l-0.426,0.639l0.213,1.491l-0.852,1.704l0.639,4.896l-2.342,2.77h-1.065l-1.278-0.853v4.474l0.852,2.342l0.212-0.426l1.278-0.213l2.342,1.277l1.917,2.98l2.555,0.853l0.213-0.639l0.852,0.639h-1.065l1.704,1.063l0.639-0.639l1.278,0.639l2.981-0.424l1.704,1.062l0.426-0.852l1.917,0.64l0.426-0.213l-1.064-0.427l0.426-0.853l0.426-0.213l-0.213,0.853h1.704l-0.213-0.64l1.491-0.213l0.213-1.278l1.917-0.852l0.212-0.852l1.065-0.428l-0.426-0.425l2.769,0.853l0.213-0.853l0.852,0.213v-0.853l1.065,0.213l-0.852-0.853l2.981-2.769h0.639l2.768,0.426l1.065-0.852l5.324-0.64l2.769,0.853l1.49-0.639l0.852,1.49h1.065l0.426-0.854l1.491,0.427l0.212-0.64l2.769-0.213l0.639,0.426l0.213,0.854l1.491-1.064l1.064,0.426l2.982-2.981l0.852-3.407l0.852-0.852l3.833-1.278l7.667-4.472l1.704-0.426l3.195,0.426l3.62-0.214l6.814-2.129l4.642-2.321V44.302l-0.381,0.381l-0.427-0.213v1.704l-0.638,0.851v-0.212l0.213-0.426l-1.278-0.426l0.213-0.852l-0.639,0.426l0.852-1.491l-0.213-0.638h0.638l-0.425-0.64l1.065-0.638l-0.426,0.638l0.426,0.213l0.852-0.638l0.168,0.042v-8.565H112.615z M83.443,45.535v-0.81l0.639,0.384L83.443,45.535z M113.852,44.081V43.35l-0.168,0.056L113.852,44.081z").attr(attr);
    map_elements['aus_nt']  = map_canvas.path("M166.71,26.155v0.639h-0.851l-0.213-0.852l0.213-0.425l-1.066,0.212l0.428,0.64l-1.49,0.425v1.065l0.213,0.852l-0.641,0.852l0.641-0.426l1.49,0.852h1.916l-0.213-1.065l-0.214,0.426l-1.063-0.213v-0.851l0.639-0.214l-0.213-0.638l1.064-0.852L166.71,26.155zM172.666,43.192l-2.13-0.639l-2.769-1.917l-0.64,0.212l0.213,0.426l-1.065-0.426l-0.639,0.213v-0.852l-2.343-1.065l-0.851-1.704l-3.407-2.129l-0.214,0.212V35.1l-0.641,0.213l-1.062-1.065l-0.428-1.49l1.277-0.426l1.066-2.556l1.277-0.639l0.213-1.278l1.063-2.342l-0.853,0.639l-0.426-0.213l-0.214-1.917l0.427,0.213l0.426-0.426l-0.639-0.213l0.213-0.639l0.639-0.426l0.213,0.639l0.64-1.277l0.214,1.065l0.213-1.065l0.639,0.213l0.213-0.639l0.427,1.065l-0.427,0.639l0.854-0.426l0.637-1.278l-0.637-0.639l1.276,0.213l-1.276-1.491l0.424,0.213l0.213-0.426l0.428,0.639l-0.213-0.852h0.639l0.428-1.065l-0.213-0.639h0.424v0.639l1.278-1.491l-1.278-1.278l-0.639,0.427l0.428,0.425h-0.641l-0.854-1.917h-0.424l0.637-0.852l-2.555,1.917l1.491,0.427l-0.64,1.277l-0.639,0.427l-0.853-0.213l-0.427,0.426v-0.64h-0.426l0.639-1.064l-0.639,0.212l-0.213-0.425l0.852-1.065l-1.703,0.852l-0.214,0.639l-0.638-0.425l1.703-1.917l-2.344,1.277l-0.213-0.425l-1.062,0.213l-1.066,0.639l0.854,0.426l-1.277-0.213l0.425,0.639l-2.556-1.065l-0.639-1.49l-0.852,1.065l-2.557-0.64l-0.641,1.278l0.428-1.065l-0.428-0.852l-0.424,0.213l-0.214-0.639l-0.853,0.639l-0.639-0.639l0.639-0.64l-0.852-0.212l-1.917,1.064l0.213-0.852l-0.427,0.426l-0.426-0.639l-0.638,0.426l0.212-0.639l-1.278,0.213l-1.49-2.556h-0.426l0.212,0.64l-0.425-0.213l-1.065,0.852l-1.491-2.13l-0.426,0.639l-0.213-1.278l-0.638,0.426l0.212,0.639l-1.065-1.065l0.213,1.278l0.426,0.212l-0.426,0.64l-0.426-1.491l-0.851-0.639v0.852l-1.066-0.213l0.213,0.426l-0.425,0.425l1.065-0.212l0.213,0.426l-0.213,0.213l0.852,0.213l0.212,0.639l0.853-0.426l1.917-0.213v0.425h0.426l-0.426,0.213l0.638,0.213h-0.426l0.426,0.213l-0.426,0.212h1.278l-1.065,1.065l0.852,0.639L138.6,13.59l-0.213,1.278l1.065,0.425l-1.491-0.425l-0.639,0.425l-0.213,1.278l-0.426-1.065l-0.638,0.426l-0.213-0.64l-1.065,1.065l-1.065-0.639l-2.981,0.425l-0.853-0.639l-0.213-1.065l-0.426,1.278l-1.704-0.427l0.426,1.492l-1.065-0.213l-0.426,0.425l1.065,0.852l-0.852-0.212l0.399,0.665l-0.399,0.399l-0.426-0.852v0.213l-0.426,0.213l0.213-1.065l-1.278-0.213l0.213,1.492h-0.426l1.277,0.639h-0.639v0.425l-1.065-1.064l-0.639,0.212l0.213,0.426l-0.425-0.426v1.491l-1.491,0.425v1.491l1.278,1.491l-0.426-0.213l-1.704,1.278l-0.639-0.213v-0.426l-0.639,0.426l-0.213,1.917l0.426-0.213l-0.852,0.639l0.213,1.065l-0.639,0.427l-0.426-0.427l0.426,1.065l-0.426-0.427l-0.426,0.852l-0.213-0.639l-0.852,1.49v0.64l0.639,0.639l0.426-0.426v0.64l0.852-0.213l0.213,0.426l0.852-0.426l-0.213,0.426l-1.065,0.639h0.639v0.426h-0.212l0.142,0.284l0.163,0.081l0.547-0.365l-0.213,0.639l1.491-0.852v0.639h-0.852l0.426,0.425l-0.639-0.212h-0.426h-0.852l0.426,0.852l-0.426-0.426l0.213,1.49l-0.639,0.213l-0.639-1.491l-0.639-0.213l0.213,1.065l-0.852-1.278l0.213,0.426h-0.639l0.426,0.639l-0.426,0.426l0.639,0.212h-0.639l-0.213,0.852v-0.639l-0.426,0.852l0.426-1.065l-0.213-0.213l0.213-0.639l-0.426-0.212v0.212l0.212,0.639l-0.426-0.426v-0.852l-0.426,0.639v-0.852h-0.713v8.557l0.716,0.18l-0.213,0.639l-0.503,0.168v0.586l0.077,0.31l-0.077,0.077v73.016h59.58V44.169L172.666,43.192z M125.184,12.525l2.129,1.278l2.13-1.278l0.639-1.064l0.64,0.212v-0.852l0.638-0.212l-0.851-1.278h-0.853l-0.212-0.639l-0.639,0.852l0.426,1.065l-0.638-1.491l-0.213,0.639l-0.426-0.212v1.277l-0.213-1.065h-0.213l-0.639-0.212l-1.278,0.426l0.852,1.278l-0.852-0.426l-0.213-1.065l-0.426,0.426l0.213,0.213h-0.213v-0.213V9.332l-1.491-0.852l0.525,2.797l-0.737,0.185l0.425-0.426l-0.425,0.213l0.425-0.852l-0.425-0.852l-1.491,1.065l0.852,0.426h-0.426v0.852l0.212,0.142v0.497l-0.212-0.639l-0.213,0.426l-0.639-0.426v0.852h-0.426l4.046,0.426L125.184,12.525z M123.906,12.525l0.157-0.939l0.056,0.3l1.064,0.638l-1.064-0.425L123.906,12.525z").attr(attr);
    map_elements['aus_sa']  = map_canvas.path("M113.819,117.351v38.96l0.502-0.251l6.602-0.641l1.064-0.212l4.26,0.426l2.343-1.276l4.046,2.129l2.981,2.342h1.917l-0.213-0.426l0.426-0.213h1.491l2.555,2.131h2.556l-0.64-0.64l0.426-0.214l0.427,0.426l0.426-0.639l2.341,2.343l-0.638,0.214v1.063l1.276-0.64l0.853,0.213l0.853,1.703l-0.64,0.854l0.213-0.639h-1.062l0.424,0.852l-0.424,0.641l0.851,0.211l-0.427,0.641l1.278,1.277l-0.426-1.277l0.64,1.277l0.639-0.426l1.277,0.853l-0.64-0.64l1.063,0.213l-0.424,0.427l1.276,1.702v1.277l2.344,2.131l1.277,5.75l0.213-0.64l0.213,0.64l0.425,0.213l-0.851,0.213l-0.427-0.853l0.213-0.213l-0.854-0.214v-0.425l-0.638,1.276l0.851-0.426l2.558,3.194l1.063-0.64l1.065,1.278l0.425-2.344l-1.49,0.64l0.641-0.427l0.213-1.703l0.851-0.427l0.427,0.427v-1.489l3.194-3.621l2.556-1.277l-0.64,0.213l0.427-0.852l0.428,0.424l1.49-0.424l1.489-4.261l1.277-1.491l0.853,0.428v-4.26l1.064,2.342l0.213,1.918l0.64,0.639l-1.704,1.49l1.277,2.343l-2.557,2.556l-0.637,1.918l-0.428,0.213l0.428,1.276l-0.641,1.278l0.426-0.213l0.215,1.277l-0.428,2.556l-0.427,0.426l-2.554-0.64l-1.066,3.194l2.13-0.214l1.704-1.275l1.49,0.638l0.853-0.425l-0.426-0.428l1.063-2.342l0.213-2.13l1.279-2.981l3.193,5.537l-0.428,0.213l-0.213-0.639l-0.213,4.686l-2.342,2.129l2.981,0.214l1.276-1.064l1.065,0.214l3.188,2.549l-3.188-2.336l2.769,2.129l1.812,2.353l-1.383-2.138l1.062,0.851l1.277,2.769l-0.564-0.873l1.631,4.281l-0.213,1.064l-1.063,1.064l0.851,1.276l-0.426,0.64l1.703,2.342l2.477,3.302l0.08,0.319l1.277,1.064l2.547,0.182v-90.426H113.819z M172.887,189.499l0.213-1.065h-1.492l0.428-1.277l-7.028,1.49l-0.426,1.064l1.278,1.491l1.918-0.213l1.49-0.427l1.703,0.853l0.852-0.64l0.213-0.853h2.77l0.424-0.851l-1.49-0.639L172.887,189.499z").attr(attr);
    map_elements['aus_qld'] = map_canvas.path("M278.516,129.443l-0.851-0.852l-0.606-2.546l-0.459-1.926l-0.639-0.852l-0.641,0.425l0.428-0.639l-0.854-0.426l0.641-0.639l-0.641-0.639l0.854-0.426l-0.641-0.639v-0.639l1.064,1.277l-0.638-1.917l-0.214,0.64l0.427-1.704l-0.42-0.279l0.207-1.851h-0.427l0.853-3.407h-0.426l-0.427-0.852l-0.428,1.277l0.215-1.064h-0.639l0.424-0.426l-0.851-0.639v-1.278l0.638-0.639l-1.277,0.426l1.066-0.426l-0.214-1.065l-2.343-0.639l0.64-0.426l-1.278-1.491l0.213-0.852l-0.639-0.426l-0.213,0.426l0.213-0.639l-1.277-0.64v0.213l-1.064-1.065l-1.064-2.769l-0.853-0.212l0.213-0.852l-0.426,0.639V98.35l-0.64-0.213l0.426,0.852l-0.852-0.426v0.426l-0.853-0.426v0.426l-2.769-3.833l-0.64,0.852l-0.851-1.277l0.424-0.213l-0.639-1.278l0.426-0.425l-0.639-2.342h0.428l0.211-1.705l-0.426-1.064v0.639l-0.426-0.213l-0.427-0.852l0.64,0.213l0.213-0.213l-0.64-1.065v0.852l-0.213-0.852l-0.426-0.212l-0.212,0.639l0.638,1.065l-0.426-0.213l0.426,1.065l-2.979-2.13l-1.066-1.704l-0.211,0.426l-0.641,1.064l0.641,1.491l0.425,0.852l-0.425-0.426l-1.279-1.49l-1.277,1.49l0.641-1.49h-0.854l0.426-0.213l-0.213-0.425l-0.851,0.212l0.851-0.426l-1.276-2.981l0.427-2.342l-0.214,0.425l-0.853-0.852l-0.213,0.427v-1.917l-0.852,0.425l0.213-0.639h-0.213l0.424-1.065l-0.851-0.852l-0.64,0.426l0.213-0.852h-1.49l-0.213-0.639l0.426-0.213l-1.062-0.639l0.211-0.426l-0.639-0.639l0.639-0.213l-0.425-0.426l0.638,0.213l0.213-0.426l1.065,0.852l-1.278-2.13l-0.424,0.213v-0.639h-0.641l-0.213-0.852h-0.854v0.852l-0.639-0.213l-0.854-0.852l0.215-0.213v-0.213l-1.064-0.639l-1.277,0.213l-0.426-1.492h-0.64l0.426,1.065l-0.853-0.213l-1.277-1.277l0.854,0.425l-1.279-2.768v0.852l-1.916,0.212l-0.852-1.916l-0.213,0.852h-0.641l-0.639-0.852l-2.129-0.853l-1.277-1.49l0.425-2.342h-0.853l-1.489-2.556l1.063-3.62h-0.427v-1.704l-1.276-2.343l0.426-1.064l-1.065,0.212l-2.554-3.407v-1.065h0.426v-1.49l-0.854-1.065l-0.213-2.342l-0.852-0.852l1.064-1.278v-0.213l-0.641,0.213l-0.211-1.065l0.852-1.064h-0.428l-0.424-0.852l-1.279-0.213l-0.852-1.278l-1.49-0.425l-1.064-2.769l-1.277,1.065l-0.854-0.426l-0.424,1.278l-1.279,0.639l-1.063-0.852l-0.64-2.769l-1.064-1.704l0.428-2.13l-0.641-2.129l0.213-1.917l-1.277,0.426l0.639-1.916l-1.277-0.852v-0.852l-1.062-0.213l-0.215-1.491l1.277-1.064l-1.062-0.427l-0.854,0.213l-0.638-0.639V9.97l-0.854-2.556h-0.64l-0.424-0.852v0.426l-0.854,0.425l1.066-1.704l-0.213-0.213l-0.214-0.212l-0.853,0.212l-0.639,1.278L202.055,7.2l0.215,1.065l-0.64,2.769h-0.213l-0.213,1.49h0.638l-0.852,0.213l-0.213,1.278l0.427,0.639l0.426-0.427l-0.426,0.64l-0.427-0.213l-0.213,0.852l-0.213-1.49l-1.064,1.704l0.64,0.213h-0.64l-0.854,2.129h0.641l-0.213-0.852l0.639,0.213l-0.426,0.213l0.853,0.639h1.064l-1.064,0.426l1.064,0.426l-0.427,0.213l0.213,1.064l-0.852-1.491l-0.427,1.065l-1.065,0.852l0.641,1.917l-0.213,0.639l0.426-0.213l-0.213,0.213l0.426,0.213h-0.854l-1.062,3.194l1.062,2.343l-0.638,2.129l0.853,3.833l-1.277,3.407l-0.641,2.555l0.427,1.065l-1.49,4.259l-1.703,2.13l-0.427,2.769l-1.917,1.491l-3.62,0.852l-0.427-0.213l-1.277-0.852l-1.489-0.213l-0.854-1.064l-1.49-0.639l-0.427-1.916l-0.851-0.852l-2.769-0.853l-3.409-0.425l-1.822-2.43v73.182h20.771v16.982l0.002-0.043l53.113,0.052l0.869-0.449l-0.053-0.543l0.722-0.072l0.073-1.102l1.104,0.073l0.796-1.173l0.541-0.053l1.321,0.416l1.3,0.237l1.41-0.504l0.903-0.089l0.235,0.524l0.722-0.071l0.761,0.29l0.577,0.309l1.643,0.021l1.121,0.254l0.631,0.85l0.415,0.507l0.435,0.688l0.069,0.723l0.47,1.049l0.688-0.433l0.309-0.578l0.651-0.795l0.651-0.794l0.433,0.688l0.757,0.291l1.049-0.47l0.129-0.559l0.651-0.795l-0.722,0.073l-0.288-1.068l0.108-0.741l0.904-0.09l1.083-0.106l0.67-0.614l0.851-0.631l0.938,0.272l0.813,0.833l1.049-0.468l0.939,0.271l0.541-0.053l0.526-0.234l0.506-0.415l0.92,0.092l0.975-0.091l-0.183,1.97L278.516,129.443zM274.258,109.85l0.852,1.491l1.916-5.751l-0.426-0.852v-1.49l-1.063,0.852l0.85,1.278l-1.704,1.917h0.428l-0.428,1.49L274.258,109.85z").attr(attr);
    map_elements['aus_tas'] = map_canvas.path("M214.201,220.805l-0.639,1.277l0.213,2.555v0.853l0.426,0.426l1.279-1.278l-0.213-2.98L214.201,220.805z M243.377,238.691l-0.425-1.276l0.638-1.704l-0.638-0.638l0.638-1.705l-1.703-2.129l-1.066-0.214l-0.424,1.279l-1.278-0.64l-1.491,1.703l-1.064-0.64l-1.064,0.854l-0.852-0.426l-1.49,0.638l1.064,1.065l-0.215,0.426l-1.277-1.491l-1.062,0.853l0.21,0.853l-0.424-1.065l-1.916,0.426l-4.899-2.982h-1.277l-0.428-1.064v0.853l-0.85-0.213v0.425l-2.982-1.49l0.215,1.703l-0.641,1.278l0.852,3.621l1.492,2.13l-0.428,0.425l2.131,2.769v1.916l0.639-0.639l1.064,1.917h0.426l-0.426,1.491l-0.213-1.277l-1.917-1.705l0.638,3.834l0.641,0.213l1.064,3.194l1.065,0.427l1.063,2.342h0.641l-0.428-0.213l0.428-0.853l0.426,1.279h1.704l-0.214,0.426l-1.49-0.426v0.638l-0.426-0.212l0.638,1.704l1.492-0.641l2.34,0.428l-0.21-0.639l0.85,1.489h1.277l0.854-1.278l-0.641-0.639l0.854,0.215l0.214-0.853l-0.64-0.213l0.853-0.427l-0.853-1.063l0.213-0.427v0.638l0.427,0.427l0.213-0.638v0.638l0.851,0.426l0.213-2.343l0.641,0.214v-1.277l-1.067-1.704l1.491,1.917l0.426-0.213l-0.426,1.277l0.854-0.64l-0.215-1.063l0.641-0.213l-1.066-0.64l1.066,0.212l0.425,1.066l0.853-0.213l1.064-1.918l-0.639-1.064l0.852-0.426l0.212-1.703l-0.64,0.212l1.066-2.129h0.639l-0.639-0.213l0.852-1.278l-0.426,1.278l1.064,0.425v1.279l0.428-0.641l-0.64-1.49L243.377,238.691z M241.248,228.257h2.129l0.213,0.64l0.852-0.64l-0.852-1.065L241.248,228.257z M240.396,224.637l0.852,0.853l0.639,1.491l1.703-0.641l-0.425-1.064l-0.427,0.427l0.427-1.065l0.212-0.426h-0.852l-1.705-2.129l-1.276,1.491l0.853,0.212V224.637z").attr(attr);

    map_elements['aus_tas'].click(function(e){alert("click");});

 }

 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T09:20:01.263

只是为了看家，邦迪的评论回答了这个问题。

> 在节点上添加事件侦听器而不是像这样的引用 $(map_elements['aus_tas'].node).click(function(e){alert("click")})

# perl - Perl IO::Socket::UNIX DGRAM 循环中的非阻塞套接字块

> ID：15811330
> 
> 赞同：1
> 
> 时间：2013-04-04T12:35:22.113
> 
> 标签：perl, sockets, nonblocking, epoll, datagram

我定义为非阻塞的套接字块有问题。

这样我就制作了一个新的套接字：

```
 unlink "/tmp/mysock";
   $socket = IO::Socket::UNIX->new(Local => "/tmp/mysock",
                                   Type      => SOCK_DGRAM,
                                   )
   or die "SOCKET CREATION FAILED: $!\n";
   $socket->blocking(0);

   $client = IO::Socket::UNIX->new(Peer => "/tmp/mysock",
                                   Type => SOCK_DGRAM
                                  )
   or die "CLIENT SOCKET: $!\n";
   $client->blocking(0); 
```

这就是我从线程#1 发送消息的方式：

```
while ( $client->send(pack("LLLL", $_[0], $_[1], $_[2], $_[3]).join(':', @_[4..$#_]), 0) eq undef)
{
    #Error logging here
}
$client->flush(); 
```

这就是我在线程#2 中接收消息的方式

```
while (1)
{
    my $fds=epoll_wait($poll, 10000, -1) or next; # next when error

    foreach my $fd (@{$fds})
    {
        if ($fd->[0] == fileno($socket))
        {

            while ($socket->recv($msg,64,0))
            {
                #Processing the message
            }
        }
    }
} 
```

问题是尽管任何一个`$socket`或被`$client`定义为非阻塞循环`$socket`中的块，`while ($socket->recv($msg,64,0))`直到下一条消息到来。我在这里错过了什么吗？我能做些什么来避免这种阻塞？

提前致谢！:)

**更新**

这样它的工作原理：

```
use Socket; 
```

和

```
while ( !defined(send($client,pack("LLLL", $_[0], $_[1], $_[2], $_[3]).join(':', @_[4..$#_]),0)))
{
} 
```

和

```
while (defined(recv($server,my $msg,64,0)))
{
} 
```

# c# - 获取进程的自定义状态

> ID：15811331
> 
> 赞同：0
> 
> 时间：2013-04-04T12:35:27.007
> 
> 标签：c#

我想在一台机器上允许我的应用程序的多个进程。项目（来自本地数据库）可以在每个进程中加载​​，我想确保一个项目只能在我的应用程序的一个进程中打开。

因此，在打开项目之前，我想检查我要打开的项目是否已经在另一个进程中打开。

我知道这不是最佳编程实践，但在我们在数据级别实现更复杂的锁定机制之前，这只是一个临时解决方案。

我可以检测到另一个正在运行的进程，但是我可以以某种方式访问​​或将其转换为更适合获取我想要的信息的东西吗？

像这样的：

```
 Process[] allProcesses = Process.GetProcessesByName("MyApp");

  foreach (Process process in allProcesses)
  {
    var projects = process.OpenedProjects; 
```

遇到过 .net 远程处理、WCF、IPC，但发现它们对于这个相当“简单”的任务来说是非常重量级的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:44:23.560

如果是临时解决方案，只需选择简单的方法：
当进程加载项目时，只需在 app 目录中写入一个带有项目名称或 ID 的文件。如果该文件已存在，则表示该项目已在另一个进程中加载​​。如果您想知道哪个进程打开了一个项目，您也可以将进程 ID 写为文件内容。

当然，您需要在该过程完成后删除该文件。确保您处理所有异常，以便在不删除此文件的情况下无法完成该过程。即拦截AppDomain.UnhandledException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:44:29.050

如果这是您所说的临时解决方案，您可以为每个项目提供一个标识符（例如文件名）并将其显示在主窗口的标题中，例如

> C:\Project1.proj C:\Project2.proj C:\Project3.proj

然后检查项目是否以`process.MainWindowTitle.Split(' ').Contains`.

# php - json_decode($data, true); 不工作

> ID：15811332
> 
> 赞同：3
> 
> 时间：2013-04-04T12:35:26.833
> 
> 标签：php, json

我正在尝试通过 Google 财经访问股票行情

通过这样做：

```
$quote = file_get_contents('http://finance.google.com/finance/info?client=ig&q=VSE:APG1L'); 
$json = str_replace("\n", "", $quote);
$data = substr($json, 4, strlen($json) -5);
print_r($data);  
$json_output = json_decode($data, true);
print_r($json_output);  
echo "\n".$json_output['l']; 
```

`json_decode`假设给我一个带有键和值的普通数组，但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:46:29.283

如果您在`json_last_error()`尝试后`json_decode()`查看，您会发现您正在获得：

```
JSON_ERROR_UTF8 Malformed UTF-8 characters, possibly incorrectly encoded 
```

尝试这个：

```
$quote = file_get_contents('http://finance.google.com/finance/info?client=ig&q=VSE:APG1L');
$json = substr($quote, 4, -5);
$json_output = json_decode($json, true, JSON_UNESCAPED_UNICODE);
print_r($json_output); 
```

见：http: [//3v4l.org/jkInl](http://3v4l.org/jkInl)

请注意，`JSON_UNESCAPED_UNICODE`仅从 php 5.4 开始可用

另一种选择是做...

```
$quote = utf8_decode($quote); 
```

......在你拿到它之后。这会将欧元符号转换为`?`字符。可能不是您想要的，但至少您可以让 json_decode 向您返回一个数组。

**更新**：有关更多信息，请参见此处：

[PHP解码和编码带有unicode字符的json](https://stackoverflow.com/questions/7381900/php-decoding-and-encoding-json-with-unicode-characters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:31:25.807

# .net - WinForms ComboBox DataBound to Enum - 格式化字符串

> ID：15811335
> 
> 赞同：1
> 
> 时间：2013-04-04T12:35:32.570
> 
> 标签：.net, winforms, combobox, enums, string-formatting

这只是对在`ComboBox`源自`Enum`.

我知道我可以将 a 数据绑定`ComboBox`到`Enum`这样的：

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    protected override void OnLoad(EventArgs e)
    {
        comboBoxNames.DataSource = Enum.GetValues(typeof (Names));
    }
}

public enum Names
{
    JohnDoe,
    JaneDoe,
    JohnJackson,
    JackJohnson
} 
```

这是结果：

![在此处输入图像描述](https://i.stack.imgur.com/hzRCG.png)

我想格式化显示值，`ComboBox`使得 PascalCase 字符串值之间有一个空格，同时还传递`Enum`我可以在`switch`稍后的语句中使用的所选项目的值：

```
switch ((Names)comboBoxNames.SelectedItem)
{
    case Names.JohnDoe:
        // Do something John Doe-specific
        break;
    case Names.JaneDoe:
        // Do something Jane Doe-specific
        break;
    case Names.JohnJackson:
        // Do something John Jackson-specific
        break;
    case Names.JackJohnson:
        // Do something Jack Johnson-specific
        break;
} 
```

我知道有一个`ComboBox.FormatString`属性，但我不确定如何使用它来`Names`按照我想要的方式格式化枚举。

这可能吗？我宁愿不使用属性，`Enum`因为使用它最终涉及使用反射，这对于看起来如此简单的事情来说似乎有点过分了。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:35:19.953

这很简单，只需在您的组合框上添加格式事件并使其看起来像这样：

```
private void comboBoxNames_Format(object sender, ListControlConvertEventArgs e)
{
    StringBuilder newText = new StringBuilder(e.Value.ToString().Length +1);
    newText.Append(e.Value.ToString()[0]);
    for (int i = 1; i < e.Value.ToString().Length; i++)
    {
        if (char.IsUpper(e.Value.ToString()[i]) && e.Value.ToString()[i - 1] != ' ')
            newText.Append(' ');
        newText.Append(e.Value.ToString()[i]);
    }
    e.Value = newText.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:30:57.907

我想出了一种方法来格式化`ComboBox`源自`Enum`我喜欢的 a 的字符串值，而不需要`ComboBox.FormatString`属性或`Format`事件：使用`Dictionary<Enum, string>`. 下面的示例代码：

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    protected override void OnLoad(EventArgs e)
    {
        comboBoxNames.DataBindToEnum(default(Names).ToDictionary());
    }

    private void btnOK_Click(object sender, EventArgs e)
    {
        switch (((KeyValuePair<Names, string>)comboBoxNames.SelectedItem).Key)
        {
            case Names.JohnDoe:
                // Do something John Doe-specific
                MessageBox.Show(@"John Doe!");
                break;
            case Names.JaneDoe:
                // Do something Jane Doe-specific
                MessageBox.Show(@"Jane Doe!");
                break;
            case Names.JohnJackson:
                // Do something John Jackson-specific
                MessageBox.Show(@"John Jackson!");
                break;
            case Names.JackJohnson:
                // Do something Jack Johnson-specific
                MessageBox.Show(@"Jack Johnson!");
                break;
        }
    }
}

public enum Names
{
    JohnDoe,
    JaneDoe,
    JohnJackson,
    JackJohnson
}

public static class EnumExtensions
{
    public static Dictionary<T, string> ToDictionary<T>(this T enumeration)
    {
        if (!enumeration.GetType().IsEnum) return null;

        var enumValues = Enum.GetValues(typeof(T)).OfType<T>().ToList();
        return enumValues.ToDictionary(enumValue => enumValue, enumValue => enumValue.ToString().Spaceify());
    }
}

public static class StringExtensions
{
    public static string Spaceify(this string self)
    {
        for (var i = 1; i < self.Length - 1; i++)
        {
            if (char.IsLower(self[i - 1]) && char.IsUpper(self[i]) ||
                self[i - 1] != ' ' && char.IsUpper(self[i]) && char.IsLower(self[i + 1]))
            {
                self = self.Insert(i, " ");
            }
        }
        return self;
    }
}

public static class ControlExtensions
{
    public static void DataBindToEnum<T>(this ListControl listControl, IDictionary<T, string> enumAsDictionary)
    {
        listControl.DataSource = new BindingSource(enumAsDictionary, null);
        listControl.DisplayMember = "Value";
        listControl.ValueMember = "Key";
    }
} 
```

有几点需要注意：

*   不要`ComboBox.DataSource`直接将 设置为 的列表`enum`，而是使用 a 设置它并相应`Dictionary<Enum, string>`地设置and （扩展方法）`DisplayMember``ValueMember``DataBindToEnum`
*   目前我们不能使用`enum`关键字作为类型限制（类似`public static Dictionary<T, string> ToDictionary<T>(this T enumeration) **where T : enum**`）。这就是为什么`enum`需要在该方法的主体中进行检查的原因
*   `Spaceify`扩展方法将空格添加到 PascalCase 字符串（也处理首字母缩略词）
*   “魔术”行是我使用`default`关键字的地方，`enum`以便我可以将其作为列表类型对象处理并解决在“实例”的“*实例*”上调用方法的问题`enum`
*   最后，当使用 out 时，`ComboBox.SelectedItem`我需要将其转换为 a`KeyValuePair<Enum, string>`并拉出`Key`我可以在我的`switch`语句中使用的。没有更多的魔术字符串！

希望这可以帮助！

# javascript - 没有数组名称的JSONarray？

> ID：15811338
> 
> 赞同：2
> 
> 时间：2013-04-04T12:35:36.523
> 
> 标签：javascript, jquery, json, getjson

我有一个 Json 文件

```
{
   "info":[
      {
         "Name":"Noob Here1",
         "Department":"Language",
         "Sex":"Male",
         "Basic_Salary":"175",
         "ESI":"58",
         "Employee_PF":"60.50",
         "Bonus":"2.60"
      },
      {
         "Name":"Noob Here2",
         "Department":"Employee_PF",
         "Sex":"Female",
         "Basic_Salary":"10.5",
         "ESI":"4.0",
         "Employee_PF":"20",
         "Bonus":"0.5"
      },
      {
         "Name":"Noob Here3",
         "Department":"Physics",
         "Sex":"Male",
         "Basic_Salary":"165",
         "ESI":"55",
         "Employee_PF":"875",
         "Bonus":"200"
      }
   ]
} 
```

我使用 getJson 从中获取数据

```
loadData(myFile).done(function (data1) {

    // check if we acutally get something back and if the data has the info property
    if (data1 && data1.info) {
        data = data1;
        var html = "";
        var head = "";
        $.each(data1.info[0], function (key, value) {
            html += "<td><input data-bind='value:" + key + "'></td>";
            head += "<th>" + key + "</th>";
        });
        html += "<td><input data-bind='value: result'/></td>";
        head += "<th>Result</th>";
        $("#div1 thead").append(head);
        $("#div1").append("<tr></tr>");
        $("#div1 tr").append(html);
    }
}); 
```

**注意：myFile 属性给出 JSON 文件的名称**

并将数据附加到 DOM

我可以使用 JSON 之类的吗

```
{
   [
      {
         "Name":"Noob Here1",
         "Department":"Language",
         "Sex":"Male",
         "Basic_Salary":"175",
         "ESI":"58",
         "Employee_PF":"60.50",
         "Bonus":"2.60"
      },
      {
         "Name":"Noob Here2",
         "Department":"Employee_PF",
         "Sex":"Female",
         "Basic_Salary":"10.5",
         "ESI":"4.0",
         "Employee_PF":"20",
         "Bonus":"0.5"
      },
      {
         "Name":"Noob Here3",
         "Department":"Physics",
         "Sex":"Male",
         "Basic_Salary":"165",
         "ESI":"55",
         "Employee_PF":"875",
         "Bonus":"200"
      }
   ]
} 
```

如果有怎么称呼它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:51:35.953

使用[JSONLint](http://jsonlint.com/)或[JSLint](http://www.jslint.com/)来查看你的语法是否正确，你会得到：

```
Parse error on line 1:
{    [        {        
-----^
Expecting 'STRING', '}' 
```

虽然无论如何都可以解析它，但你永远不应该这样做。

正如 Marco S. 在评论中指出的那样，您可以改用[这个](https://stackoverflow.com/questions/6964387/how-to-parse-json-array-with-no-object-name)：

```
[
    {
         "Name":"Noob Here1",
         "Department":"Language",
         "Sex":"Male",
         "Basic_Salary":"175",
         "ESI":"58",
         "Employee_PF":"60.50",
         "Bonus":"2.60"
     },
     ...
] 
```

并像访问它一样

```
result[0]["Name"] 
```

# ios - 预期标识符或“（”目标C

> ID：15811340
> 
> 赞同：0
> 
> 时间：2013-04-04T12:35:37.117
> 
> 标签：ios, objective-c, xcode

我对 xcode 非常陌生，我正在为学校项目制作应用程序。我正在编写背景音乐代码以在同一个按钮上播放/暂停（找到代码但对其进行了一些修改）。我已经能够清除其他错误，但我不知道该怎么做......预期的标识符或“（”

```
@implementation settingscontroller2

-(void) btnAction:(UIButton*)button{
button.selected = !button.selected;}

{ //expected Identifier or "("

if (button.selected){

    // Play
    NSString *path = [[NSBundle mainBundle] pathForResource:@"app" ofType:@"mp3"];
    theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate = self;
    theAudio.numberOfLoops = -1;
    [theAudio play];
}

else (!button.selected){

    // Pause
    [theAudio pause];
    return.nil
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:38:14.760

一旦检查这个，

```
-(void) btnAction:(UIButton*)button{
    button.selected = !button.selected;

    if (button.selected){

        // Play
        NSString *path = [[NSBundle mainBundle] pathForResource:@"app" ofType:@"mp3"];
        theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
        theAudio.delegate = self;
        theAudio.numberOfLoops = -1;
        [theAudio play];
    }

    else if(!button.selected){//here also one problem in your code.

        // Pause
        [theAudio pause];
        //return.nil
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:39:27.027

在你的行

```
button.selected = !button.selected;} 
```

"}" 与后面的 "{" 一样多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:40:57.990

```
-(void) btnAction:(UIButton*)button{
    button.selected = !button.selected;}

{ //expected Identifier or "(" 
```

这里有两个方法体。看起来您可能应该删除 first`}`和 next `{`，并且可能重新格式化一下，以便您拥有：

```
-(void) btnAction:(UIButton*)button
{
    button.selected = !button.selected;
    if (button.selected){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:38:53.633

尝试用return替换倒数第二行；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T12:39:50.610

尝试删除`}`末尾的

```
button.selected = !button.selected; 
```

和给你错误的行。

# html - 在从数据库中提取的列表视图中显示数据

> ID：15811342
> 
> 赞同：0
> 
> 时间：2013-04-04T12:35:39.123
> 
> 标签：html, jquery-mobile, jquery-plugins, markup, jquery-mobile-listview

尝试使用 listview 的 data-filter 属性，但它像普通的 html listview 一样工作，在 listview HTML 代码的“刷新”方面出现一些错误：

```
<html lang="en" dir="ltr">
<head>
<link rel="stylesheet" href="css/app/app-style.css"/>
<link rel="stylesheet" href="css/lib/jquery.mobile.structure-1.1.1.css"/>
<link rel="stylesheet" href="css/lib/jquery.mobile.theme-1.1.1.css"/>
<link rel="stylesheet" href="css/lib/simpledialog.min.css"/>
<link rel="stylesheet" href="css/lib/jquery-ui-1.10.2.custom.css"/>
<link href="css/lib/mobiscroll.css" rel="stylesheet" type="text/css"/>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script type="text/javascript" src="js/lib/jquery.js"></script>
<script type="text/javascript" src="js/lib/jquery-ui-1.10.2.custom.js"></script>
<!-- <script type="text/javascript" src="js/lib/jquery.mobile-1.1.1.js"></script> -->
<script type="text/javascript" src="js/lib/jquery.validate.js"></script>
<script type="text/javascript" src="js/lib/additional-methods.js"></script>
<script type="text/javascript" src="js/lib/cordova-2.0.0.js"></script>
<script type="text/javascript" src="js/lib/jqm.page.params.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript" defer>     
$(document).ready(function()
{ $('#viewtag').on('click',function(e)
    {
        e.preventDefault();
        getRegisterdUser();
        $('#viewinformation').show();
    });
});
</script>
</head>
<body>
    <div data-role="page" id="logininfo" data-theme="b">
        <div data-role="content">
            <div class="ui-grid-a" data-theme="a">
                <div class="ui-block-a" data-theme="e" style="width:50%;"><a href="#" id="viewtag" data-role="button">VIEW</a></div>
            </div>
        </div>
    </div>
    <div data-role="page" id="viewinformation" data-theme="d">
        <div data-role="header"> </div>
        <div data-role="content">
            <ul id="list" data-role="listview" data-filter="true" data-filter-placeholder="Search Student Name..."  data-filter-theme="e" style="margin-top:20%;">
            </ul>
        </div>
    </div>
</body>
</html> 
```

（已写入 alldatabsae.js 文件） JQUERY CODE 从 localDB 中提取数据并在列表视图中仅显示用户名

```
 var db;
   function getRegisterdUser()
{
    var query = 'SELECT username FROM loginTable';
    console.log("query for username selection:" + query);
    db.transaction(function(tx)
   {
    tx.executeSql(query,[],successCBofUsername,errorCBofUsername)
   },errorCB,successCB);

}

function successCBofUsername(tx,results)
{  
    var resultslength = results.rows.length;
    if(results!= null && results.rows.length > 0 && results.rows != null)
        {
        for(var i = 0; i <resultslength; i++)
            {
            var name = results.rows.item(i);
            $('<li>'+ name.username +'</li>').appendTo($('#list'));
            }
        $('#list').listview('refresh');
         //$('#displayinfo').empty().append('html').trigger('create');
        }

    else
        {alert("no records exists");}
}
function errorCBofUsername()
{
alert("error of usernmae query");   
} 
```

但出现错误：
1\. 未捕获的错误：无法在初始化之前调用 listview 上的方法；试图在[http://code.jquery.com/jquery-1.8.2.min.js:2](http://code.jquery.com/jquery-1.8.2.min.js:2)
调用方法“刷新” 2\. 未捕获的错误：无法在初始化之前调用 listview 上的方法；试图`file:///android_asset/www/js/lib/jquery.js:506` 在这行代码中出现错误时 调用方法“刷新”

```
$('#list').listview('refresh'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:50:36.857

只需在您的代码中替换以下函数。

```
function successCBofUsername(tx,results)
{   var listdata='';
    var resultslength = results.rows.length;
    if(results!= null && results.rows.length > 0 && results.rows != null)
        {
        for(var i = 0; i <resultslength; i++)
            {
            var name = results.rows.item(i);
            listdata+='<li>'+ name.username +'</li>';
            }

           $("#list").append(listdata).listview('refresh');  
            }

    else
        {alert("no records exists");}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:36:40.073

你应该使用：

```
$('#list').listview().listview('refresh'); 
```

因为 listview 是动态创建的，实际上并不存在，所以必须先初始化它，然后才能增强它的标记。

要了解为什么请查看我的其他答案：**[jQuery Mobile：动态添加内容的标记增强](https://stackoverflow.com/a/14550417/1848600)**。搜索章节：**标记增强问题**：

# iphone - 在主 ViewController 中使用自己的 TableViewController 翻转 tableview 的动画

> ID：15811344
> 
> 赞同：0
> 
> 时间：2013-04-04T12:35:45.040
> 
> 标签：iphone, ios, xcode, animation, view

相对基本的问题，但我花了一整天的时间弄清楚没有任何成功。我有带有主全屏视图的 ViewController 和单独的 TableViewController 和不覆盖整个屏幕的 TableView。我需要在 TableView 上使用 UIRefreshControl，因此需要单独的 TVC。

我想在单元格选择中实现这一点，现有的 TableView 将翻转以替换为另一个 TableView（如用户选择的第 2 步）。我希望现有的主视图在 TableViews 转换期间可见。

我能够使用开始动画/提交动画方法将完整的视图翻转过渡到不同的视图，但不能仅使用子视图，也不能使用新的动画块方法。您能否建议动画代码以及我应该如何介绍第二个表格视图（在现有的 TVC 下或在它自己的 TVC 下）？

```
@implementation ViewController
TableViewController *tableVC;
- (void)viewDidLoad
{
    [super viewDidLoad];
    tableVC = [self.storyboard instantiateViewControllerWithIdentifier:@"TableVC"];
    [self addChildViewController:tableVC];
    tableVC.view.frame = CGRectMake(8, 177, 304, 371);
    [self.view addSubview:tableVC.view];
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:43:34.987

请参阅此示例代码，它可能会对您有所帮助

[https://github.com/GrioSF/spincard](https://github.com/GrioSF/spincard)

# c# - 'System.Windows.Data.BindingListCollectionView' 视图不支持过滤

> ID：15811347
> 
> 赞同：1
> 
> 时间：2013-04-04T12:35:48.160
> 
> 标签：c#, wpf, xaml, wpfdatagrid

我的应用程序中有一个数据网格和一个组合框。我必须过滤所选项目，我试图在我的应用程序中实现`datagrid`事件，但我收到此错误。`combobox`[`CollectionViewSource.Filter`](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.filter.aspx)

!['System.Windows.Data.BindingListCollectionView' 视图不支持过滤](https://i.stack.imgur.com/7dSd8.png)

我做了什么 ：

**代码隐藏：**

```
 private CollectionViewSource logViewSource;
    IEnumerable<LogEntry> Query;
    DB_Entities db = new DB_Entities();

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        this.Query = db.LogEntries;
        this.logViewSource=(CollectionViewSource)(FindResource("logEntriesViewSource"));
        logViewSource.Source = this.Query;
    }

    private void CollectionViewSource_Filter(object sender, FilterEventArgs e)
    {
        LogEntry log = e.Item as LogEntry;
        ComboBoxItem cbi = (ComboBoxItem)comboBox1.SelectedItem;

        if (cbi != null)
        {
            string s = cbi.Content.ToString();
            if (log.Type == s)  
            {
                e.Accepted = true;
            }
            else
            {
                e.Accepted = false;
            }
        }

    }

    private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        CollectionViewSource cvs = FindResource("logEntriesViewSource") as CollectionViewSource;
        cvs.View.Refresh();
    } 
```

**XAML：**

```
<Window.Resources>
    <CollectionViewSource x:Key="logEntriesViewSource" d:DesignSource="{d:DesignInstance my:LogEntry, CreateList=True}" Filter="CollectionViewSource_Filter" />
</Window.Resources>

<Grid DataContext="{StaticResource logEntriesViewSource}">

    <ComboBox Height="29" HorizontalAlignment="Left" SelectionChanged="comboBox1_SelectionChanged"
              Name="comboBox1" VerticalAlignment="Top" Width="115" Margin="388,2,0,0">
        <ComboBoxItem Content="Warning"/>
        <ComboBoxItem Content="Error"/>
        <ComboBoxItem Content="Exception"/>            
    </ComboBox>

    <DataGrid AutoGenerateColumns="False" 
              EnableRowVirtualization="True" Height="274" HorizontalAlignment="Left" ItemsSource="{Binding}" 
              Name="logEntriesDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" VerticalAlignment="Top" Width="503" Margin="0,37,0,0">
        <DataGrid.Columns>
            <DataGridTextColumn x:Name="iDColumn" Binding="{Binding Path=ID}" Header="ID" Width="auto" />
            <DataGridTextColumn x:Name="fileNameColumn" Binding="{Binding Path=FileName}" Header="File Name" Width="auto" />
            <DataGridTextColumn x:Name="typeColumn" Binding="{Binding Path=Type}" Header="Type" Width="auto" />
            <DataGridTextColumn x:Name="criticalColumn" Binding="{Binding Path=Critical}" Header="Critical" Width="auto" />
        </DataGrid.Columns>
    </DataGrid>       
</Grid> 
```

**输出**窗口如下所示：

![输出](https://i.stack.imgur.com/GvFfH.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:44:22.873

[ObjectSet<T>](http://msdn.microsoft.com/en-us/library/dd412719.aspx)派生自 ObjectQuery，它实现了 WPF 用来生成可绑定集合的 IListSource。由于您指定的是接口，而不是实现，因为您的可绑定集合 WPF 正在生成（或者可能是强制转换？）您的集合到 BindingListCollectionView。您的 CollectionViewSource 将过滤委托给它的底层集合 ObjectSet（被解释为 BindingListCollectionView），[它不支持过滤](https://stackoverflow.com/a/9385582/371298)。

我相信解决方案是将您的 db.Query 集合包装在支持过滤的东西中——可能是 List<T> 或 ObservableCollection<T>。也许是这样的：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    this.Query = new ObservableCollection<LogEntry>(db.LogEntries);
    this.logViewSource=(CollectionViewSource)(FindResource("logEntriesViewSource"));
    logViewSource.Source = this.Query;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:10:14.817

这是我试过的代码：

```
 CollectionViewSource logViewSource;
   IEnumerable<object> Query;
   IEnumerable<string> objects= new List<string> { "a", "b" };
   Query = objects;
   logViewSource=(CollectionViewSource)(FindResource("logEntriesViewSource"));
   logViewSource.Source = Query; 
```

# c# - LINQ 更新表用 EmptyString 替换 NULL 100 万条记录

> ID：15811348
> 
> 赞同：0
> 
> 时间：2013-04-04T12:35:52.120
> 
> 标签：c#, linq, time, records

我一直在尝试更新具有 100 万条记录的表，并将其 4 个字段的 NULL 值替换为空字符串（ "" ）。foreach 和 for 似乎需要很长时间。我花了 1 分钟更新了 3 000 条记录。有没有更简单的方法来使用 linq 或可能的过程来更新表？

这是我目前使用的，但它需要很长时间，我可能需要经常这样做：

```
foreach (MG_Backup item in mg)
{
    lblAllNulls.Text +="<br />ID:"+item.ID+" ";
    if (item.Name == null )
    {
        item.Name = "";
        lblAllNulls.Text += "Name ";
    }
    if (item.Company == null)
    {
        item.Company = "";
        lblAllNulls.Text += "Company ";
    }
    if (item.Addr1 == null)
    {
        item.Addr1 = "";
        lblAllNulls.Text += "Addr1 ";
    }
    if (item.Addr2 == null)
    {
        item.Addr2 = "";
        lblAllNulls.Text += "Addr2 ";
    }
    if (item.FullAddress == null)
    {
        item.FullAddress = "";
        lblAllNulls.Text += "FullAddress ";
    }
    if (item.City == null)
    {
        item.City = "";
        lblAllNulls.Text += "City ";
    }
    //saves the changes
    db.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:41:33.503

至于 db 代码，您正在单独更新每条记录。尝试移出`SaveChanges()`循环。或者用一个计数器保护它，只保存每 N 条记录。

您的代码`lblAllNulls`显示了需要 StringBuilder 的经典模式：

```
foreach (MG_Backup item in mg)
{
   lblAllNulls.Text +="<br />ID:"+item.ID+" ";
   ...
} 
```

字符串在 foreach 循环中连接。`lblAllNulls.Text`必须不断地重新分配一个副本。几千轮之后，这变得非常缓慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:48:32.280

你没有显示你的 LINQ 语句，但是从你的代码中我假设你做了这样的事情：

```
var mg = from mgs in <Table>
         select mgs;
//loop you showed 
```

这会导致 LINQ 获取所有项目，无论它们是否必须更新。

根据实际需要更新的记录数量，使用以下方法会更快：

```
var mg = from mgs in <Table>
         where mgs.Name == null || mgs.Company == null // || and so on and so forth
         select mgs;
//loop you showed 
```

# haskell - 我想做一个有线世界移动，但它显示了一个错误

> ID：15811352
> 
> 赞同：0
> 
> 时间：2013-04-04T12:35:55.717
> 
> 标签：haskell, parse-error

我被要求进行一次有线世界的移动。所以我写了以下代码，（代码中的所有函数都以某种方式在其他模块中定义，所以，不用担心那个XD，如果你想看看那些“预定义的函数”，请随时问我）但是，当我在终端上运行它时，它会显示错误，这是代码：

```
module Transitions.For_List_2D (
   transition_world -- :: List_2D Cell -> List_2D Cell
) where

import Data.Cell (Cell (Head, Tail, Conductor, Empty))
import Data.Coordinates
import Data.List_2D

transition_world :: List_2D Cell -> List_2D Cell
transition_world world = case world of
    (Head,(x,y)):rest-> (Tail,(x,y)): transition_world rest
    (Tail,(x,y)):rest -> (Conductor, (x, y)): transition_world rest
    (Empty, (x, y)):rest ->(Empty, (x, y)): transition_world rest
    (Conductor, (x, y)):rest
      | element_occurrence==1 || element_occurrence==2 = (Head, (x, y)): transitio
        n_world    rest
      | otherwise = (Conductor, (x, y)): transition_world rest
    [] -> [] 
```

但是，当我通过“./'hs 文件的名称'”在终端上运行它时，它显示以下错误：

```
For_List_2D.hs:23:56: parse error on input '=' 
```

我完全被这个错误弄糊涂了 提前感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:38:44.917

这些线

```
 | element_occurrence==1 || element_occurrence==2 = (Head, (x, y)): transition_world    rest
  | otherwise = (Conductor, (x, y)): transition_world rest 
```

应该

```
 | element_occurrence==1 || element_occurrence==2 -> (Head, (x, y)): transition_world    rest
  | otherwise -> (Conductor, (x, y)): transition_world rest 
```

我们`=`在方程（例如函数定义）和`->`案例表达式中使用。

# android - Titanium studio vs“原生”工具 - 更新

> ID：15811354
> 
> 赞同：3
> 
> 时间：2013-04-04T12:35:57.637
> 
> 标签：android, iphone, cross-platform, titanium

阅读之前的帖子，我并没有真正理解 Titanium studio 是否是开发 Android 和 iOS 应用程序的好选择，因为这里所说的 SO 似乎已经过时了，Titanium studio 现在是 v. 3.x。

我正在尝试构建一个非常简单的应用程序，它将具有简单的图形（主要是表格视图和类似视图）和低 CPU/内存需求。

我已经开始使用 Xcode 和 Eclipse 进行编码，并设法完成了一些工作，但这种方法的缺点是显而易见的。工作的两倍。更不用说我对iOS语法不太了解，而且一开始就相当复杂。

然后我遇到了钛。乍一看，它似乎很完美。简单的 javascript，转换为原生 UI（我知道只有 UI）和简单的编码。在我看来，通过一些变通方法，可以构建具有“客观语言”逻辑的应用程序。

但另一方面，我敢肯定有数百个不那么明显的缺点。

所以我想知道，除了显而易见的事情之外，在那些已经（成功）为 Android 和 iOS 开发过 Titanium 的人的经验中，使用 Titanium 的优点和缺点是什么？

PS 我不考虑电话差距有很多原因，一个是本机 UI 与 Web 环境

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:49:25.887

取决于您是谁以及您在做什么，对于您的用例，Titanium 听起来像是一个巨大的胜利，对我来说，我会在 Titanium 中开始一个项目而不是原生路线的三个重要原因，基本上如果您愿意：

*   JavaScript 中的程序（如 Obj-C 和 JAVA 中的非程序）
*   在 UI 中使用跨平台原生控件
*   快速创建功能性的东西

我不会选择 Titanium 的唯一原因（这取决于应用程序，并且假设您对 Obj-C 和 android JAVA 感到满意）是如果您的应用程序执行高性能计算类型的任务，那么如果您正在执行图像处理或类似的事情那。一般来说，如果你足够精明，即使这些也可以包装在模块中。

总的来说，如果您对 JavaScript 及其工具链感到满意，有在 Eclipse 风格环境中工作的经验，并且在 Obj-C 和 JAVA 中工作的本机移动经验有限，那么 Titanium 是一个胜利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:39:57.613

自那些讨论以来，平台的基础没有改变，无论是 Titanium、iOS、Android 还是其他。因此，同样的论点仍然适用。改变的是错误修复和功能。查看自讨论以来 Titanium 的发行说明，您将看到错误修复、平台一致性修复和性能改进。这就是现在不同的一切。

# linux - 从 strace 获取互斥量变量

> ID：15811367
> 
> 赞同：2
> 
> 时间：2013-04-04T12:36:33.053
> 
> 标签：linux, pthreads, mutex, strace

我`strace`用来获取有关我的应用程序的信息。我对像下面这样的线程函数很感兴趣。

```
 futex(0xf70d34, FUTEX_WAIT_PRIVATE, 23853, NULL <unfinished ...> 
```

如果我没记错的话，这是用来锁定互斥锁的。

有什么方法可以检索代码中的哪个互斥锁是从此信息中锁定的互斥锁？

# .net - WPF ListBox 有时会忽略 SelectedItem 更改

> ID：15811368
> 
> 赞同：0
> 
> 时间：2013-04-04T12:36:35.487
> 
> 标签：.net, wpf, mvvm, binding, listbox

我有带有下一个属性的列表框：

```
SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
x:Name="listBox"
ItemsSource="{Binding Items}" 
```

在代码中，我有一个静态模型，它可以在几个窗口中使用。

只能同时显示一个窗口。

如果 UI 已经加载，一切正常。但是当窗口刚刚准备好加载时，我设置 SelectedItem 什么都不做（第一个项目被选中）

当我设置刹车点时，我注意到 SelectedItem 从视图中调用了 NULL 或第一个项目。（StackTrace 不包含我的代码）

我试图在视图加载之前和之后设置选定的项目：

```
model.SelectedItem=first;

view.Loaded += (o, e) => 
{
    model.SelectedItem=first; 
} 
```

我仍然有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:57:46.030

我认为在加载窗口期间会评估 Xaml DataBinding。因此，如果它在发生之前被触发，那么`SelectedItem`在事件中为空是正常的。`SelectionChanged``Window.Loaded`

您可以通过在窗口完全加载之前检查您的列表框是否有项目来验证这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:07:21.497

Сhanging order of properties解决了这个问题。先绑定 ItemsSource，然后再绑定 SelectedItem。

# java - 为什么 XMLBeans 不能解析我的有效 XML 文档？

> ID：15811376
> 
> 赞同：1
> 
> 时间：2013-04-04T12:36:54.160
> 
> 标签：java, xml, xmlbeans

我有一个 XML 模式，它定义了一堆复杂的类型，它们是各种命令、响应和事件。

作为一个特定示例，我有一个 Response 复杂类型，它由所有响应共有的元素组成，无论类型如何。然后，我有各种特定类型的响应。除了 Response 复杂类型中的元素之外，一些响应不会添加任何其他元素，而另一些则非常复杂，并且包含可能复杂或简单的各种其他元素：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="urn:Command" targetNamespace="urn:Command" elementFormDefault="qualified" version="0.0.5.0">
    <xs:complexType name="Response">
        <xs:annotation>
                <xs:documentation>...</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element ref="commandID"/>
            <xs:element ref="responseToID"/>
            <xs:element ref="commandStatus"/>
            <xs:element ref="creationTime"/>
            <xs:element ref="completionTime"/>
        </xs:sequence>
</xs:complexType>
...
<xs:complexType name="SpecificResponse">
    <xs:annotation>
        <xs:documentation>...</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
        <xs:extension base="Response"/>
    </xs:complexContent>
</xs:complexType>
... 
```

当我收到一个包含响应的 xs:extension 以及许多其他字段的特定响应时，XML 实际上看起来像：

```
<Response xsi:type="SpecificResponse" xsi:schemaLocation="urn:Command {file path}" xmlns="urn:Response" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <commandID>...</commandID>
  <responseToID>...</responseToID>
  <commandStatus>...</commandStatus>
  <creationTime>...</creationTime>
  <completionTime>...</completionTime>
</Response> 
```

当我在此 XML 上使用`SpecificResponse.Factory.parse(...)`or`SpecificResponseDocument.Factory.parse(...)`方法时，它会失败，因为“元素响应不是有效的 SpecificResponse 文档或有效的替换”。在这个特定的示例中，这并不是什么大问题——拥有一个 SpecificResponse 或 SpecificResponseDocument 的实例不会添加任何新的方法供我调用，因为所有字段都存在于两者中。但是，在 DifferentSpecificResponse 包含其他元素的情况下，这是有问题的。另外，当我将它们添加到可以包含任何扩展 Response 的任何内容的数据结构中时，我宁愿拥有更准确的类型信息。

完整的文档在外部工具中针对模式进行验证。尽管它具有 SpecificResponse 的所有元素（未在 Response 元素中定义），但具有 xsi:type 的 SpecificResponse 似乎使 XML 有效（这是一个不正确的假设吗？）。但是，看起来 XMLBeans 正在查看根元素，而不是我试图解析的 XML 的 xsi:type。

到目前为止，我找到的解决方案是使用 解析响应`ResponseDocument.Factory.parse(...)`，然后在其上调用`getResponse()`函数，然后将其类型转换为适当的特定响应。这对我来说似乎很笨拙，但是一旦我完成了转换，我就可以使用 XMLBeans 访问器和修改器方法，以及它的类层次结构（这是我所期望的——SpecificResponse 是 Response 的子类）。有没有更好的方法来处理这个，假设消息的来源不能改变发送XML`<SpecificResponse...`并且必须继续发送`<Response xsi:type="SpecificResponse"...`

# c# - 在 Linq 中嵌套查询到具有相同 dbset 的实体

> ID：15811383
> 
> 赞同：1
> 
> 时间：2013-04-04T12:37:16.613
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我有以下 Linq 查询：

```
 var date = (from TA in _context.TAs
             where TA.Id == (from TB in _context.TAs
                             join TC in _context.TCs on TB.Id equals TC.Id
                             where TB.XXX == TA.XXX &&
                                   TB.YYY == yyy &&
                                   TB.Date < _Date
                             group TB by 1 into grouped
                             select grouped.Max(x => x.Id)).FirstOrDefault()
             select TA.Date).FirstOrDefault().AddMonth(1); 
```

当我运行查询时，我得到一个异常：

```
ORA-00904: "Extent1"."XXX": invalid identifier 
```

我知道这个异常意味着什么，但是参与这个查询的所有类都被正确配置并映射到数据库，因为我在其他 LINQ to entity 查询中使用它们，没有任何无效标识符异常。

你能帮我找出这个查询中的问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:53:22.173

试试这个查询：

```
var date = (from TA in _context.TAs
            join TC in _context.TCs on TB.Id equals TC.Id
            where TA.YYY == yyy &&
                  TA.Date < _Date
            orderby TA.Id
            select TA.Date).Last(); 
```

# php - 如何使用 PHP 将关键字传递到登录页面？

> ID：15811384
> 
> 赞同：0
> 
> 时间：2013-04-04T12:37:20.253
> 
> 标签：php

我正在使用登录页面重定向到我的跟踪网址，如何将关键字传递到我的登录页面，然后将其传递到我的跟踪链接？这是我的跟踪链接的结尾：

```
&keyword={keyword} 
```

我试过做[http://www.foo.com?keyword=](http://www.foo.com?keyword=) {keyword} 但没有运气。

我的登陆页面有这个代码：

```
<?php

header("Location: http://trackinglink.com&keyword={keyword}");

exit;
?> 
```

请帮忙！！

编辑：抱歉不清楚，我正在做 PPC，我需要使用登录页面而不是直接链接（跟踪 url），所以我需要能够从登陆器传递关键字（我要给PPC 网络）到我的跟踪链接，这样我就可以看到哪些关键字转换了。

我需要知道如何格式化 url 以传递关键字以及将什么代码放入登录页面。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:40:45.880

要么是下面，要么我根本不知道你问了什么

```
<?php

$keyword = 'location'; 

header("Location: http://foo.com?keyword=".$keyword);

exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:41:37.507

类保存键 {

```
public function setKeyword($keyword) {
    $this->keyword = $keyword;
}

public function getKeyword() {
     return $this->keyword;
} 
```

}

```
$keyword = new saveKeys();
$keyword->setKeyword($_GET['keyword']); 
```

现在您将关键字保存在 setter 中，您可以在其他页面上获取它。

# javascript - 向 javascript 文件添加时间戳会禁用此文件的缓存？

> ID：15811385
> 
> 赞同：0
> 
> 时间：2013-04-04T12:37:20.903
> 
> 标签：javascript, caching

我的网站上有这个脚本`<head>`：

```
function check_messages() {
$('#messages').load('/check.php?tt='+(new Date()).getTime(),
function(responseText, textStatus, XMLHttpRequest) {
if(responseText != "") {
$("html,body").scrollTop("messages",0);
}
});
}
var auto_refresh = setInterval(check_messages, 180000); 
```

现在我将此函数移至外部 javascript 文件。该文件大约 20 KB。

此脚本包含时间戳，我想确保浏览器将使用此 javascript 的缓存版本？他们会吗？我不希望他们一次又一次地加载整个 20 KB 的脚本。

# mvvm - 在 Knockout 中进行标准 POST 表单验证

> ID：15811386
> 
> 赞同：1
> 
> 时间：2013-04-04T12:37:22.740
> 
> 标签：mvvm, knockout.js

为了允许在提交之前验证表单，我想从我定义的 Submit 方法进行简单的 HTTP POST 提交。

**视图代码：**

```
 <form data-bind="submit: BaseSubmit" id="FormId">
      <!-- Some rows ... -->
      <button type="submit">Create</button>
   </form> 
```

**以及 JS 的行为**

```
this.viewModel.BaseSubmit = 
   function(formElements) {
      //Here the code to make the submit redirection
    }; 
```

这可能吗 ？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:19:12.937

成功验证后，请确保并`return true`从您的绑定处理程序：

```
this.viewModel.BaseSubmit = 
    function(formElements) {
        if (/* validation is successful */) {
            return true;
        } else {
            /* handle validation errors */
        }
    }; 
```

**示例：http:** [//jsfiddle.net/CCNtR/22/](http://jsfiddle.net/CCNtR/22/)

从[文档中](http://knockoutjs.com/documentation/event-binding.html#note_3_allowing_the_default_action)：

> 默认情况下，Knockout 将阻止事件采取任何默认操作。例如，如果您使用事件绑定来捕获输入标签的按键事件，浏览器将只会调用您的处理函数，并且不会将键的值添加到输入元素的值中。一个更常见的示例是使用 click 绑定，它在内部使用此绑定，您的处理程序函数将被调用，但浏览器不会导航到链接的 href。这是一个有用的默认值，因为当您使用点击绑定时，通常是因为您将链接用作操作视图模型的 UI 的一部分，而不是作为指向另一个网页的常规超链接。
> 
> **但是，如果您确实想让默认操作继续进行，只需从事件处理函数返回 true**

# corba - Corba Trading Service 检查工具

> ID：15811387
> 
> 赞同：1
> 
> 时间：2013-04-04T12:37:25.670
> 
> 标签：corba, tao

是否有任何工具可以查看 CORBA 交易服务中的注册类型，或者可以对对象进行一些简单的查询？

如果重要的话，我正在使用 TAO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:42:54.320

不是我知道的。也许您可以编写自己的代码并将其回馈给 TAO。或许可以考虑为客户端使用脚本语言，例如带有 R2CORBA 实现的 Ruby，它可以与 TAO 互操作

# c++ - 从纹理中获取字节数组

> ID：15811389
> 
> 赞同：2
> 
> 时间：2013-04-04T12:37:26.707
> 
> 标签：c++, directx-11

我可以从中获取字节数组（ARGB）`D3D11Texture2D`吗？DirectX 11 没有这些功能`GetSurfaceLevel`和`LockRect`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:42:42.737

在您的 DeviceContext 上使用 Map/Unmap 函数。这仅适用于支持读取的纹理类型。

例如

```
D3D11_MAP eMapType = D3D11_MAP_READ;
D3D11_MAPPED_SUBRESOURCE mappedResource;

pDeviceContext->Map(m_pTexture, 0, eMapType, NULL, &mappedResource);

BYTE* pYourBytes = (BYTE*)mappedResource.pData;
unsigned int uiPitch = mappedResource.RowPitch;

// Do stuff here

pDevice->GetDeviceContext()->Unmap(m_pTexture, 0); 
```

如果要读取渲染纹理的内容，则需要首先创建与渲染纹理格式相同的暂存纹理，然后使用 DeviceContext->CopyResource() 将渲染纹理复制到暂存纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:23:55.703

为什么要读回纹理的数据？您将数据保存在 RAM 中，然后将其上传到 VRAM。您仍应将其保存在 RAM 或磁盘中。我错过了什么吗？

您可能想看看它是如何在[DirectX 11 帧缓冲区捕获中解决的（C++，没有 Win32 或 D3DX）](https://stackoverflow.com/questions/10623787/directx-11-framebuffer-capture-c-no-win32-or-d3dx)

# amazon-s3 - Ember 自动更新，托管在 S3 上的用户头像在新数据进来时发送 get 请求

> ID：15811393
> 
> 赞同：2
> 
> 时间：2013-04-04T12:37:32.640
> 
> 标签：amazon-s3, ember.js

我在 Ember 中有一个小型通信应用程序，每 10 秒轮询一次服务器以获取新数据。

在每个线程旁边，或在线程下回复，都有一个用户区域，显示用户的电子邮件、头像和徽章。头像托管在 s3 上，每次站点发送 JSON 数据时，都会为 s3 上的每个头像发送一个获取请求。

头像旁边还有其他图像，例如徽章图标，但它们托管在 Rails 公共文件夹中，不会触发获取请求。

为什么会这样？每次从服务器返回 JSON 时，有没有办法缓存或抑制 get 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:21:03.190

> 为什么会这样？

1.  听起来您的某些视图在获取新数据时会重新渲染。可以通过更改模板的结构来防止这种情况发生，但这对于这种情况来说可能是多余的。如果您想查看发生了什么，请尝试在视图重新渲染时将检测添加到您的应用程序到 console.log：[如何分析 ember 的页面渲染性能？](https://stackoverflow.com/questions/15673161/how-to-profile-the-page-render-performance-of-ember)

2.  假设头像和其他图像都被重新渲染，s3 可能会触发新的 get 请求，因为 s3 返回的标头未设置为允许浏览器缓存。

> 每次从服务器返回 JSON 时，有没有办法缓存或抑制 get 请求？

是的，调整 s3 图像的设置，以便浏览器缓存它们。

*   在 s3 管理控制台中，转到要更新的每个文件的属性 -> 元数据部分
*   为您的文件设置`Expires`标题
*   其他要查看的标题是`Cache-Control`和`Last-Modified`
*   请参阅[如何将浏览器缓存与 Amazon S3 结合使用？](https://stackoverflow.com/questions/15502416/how-to-use-browser-caching-with-amazon-s3)

# android - 在我的 android 应用程序中绑定 Facebook SDK 时，如何解决“重复状态消息”问题？

> ID：15811395
> 
> 赞同：0
> 
> 时间：2013-04-04T12:37:35.147
> 
> 标签：android, facebook

当我在我的 Facebook 墙上分享短信时，我收到了以下回复。

```
{
   "error":{
      "message":"(#506) Duplicate status message",
      "type":"OAuthException",
      "code":506,
      "error_data":{
         "kError":1455006
      }
   }
} 
```

我使用了以下代码片段：

```
SharedPreferences mPreferences = ShareLsevenPage.this
                    .getSharedPreferences("facebook-credentials",
                            MODE_WORLD_READABLE);
            String tokenVal = mPreferences.getString("access_token", null);
            Log.v("Token Value", tokenVal);

            AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
            Bundle params = new Bundle();
            params.putString(Facebook.TOKEN, tokenVal);
            params.putString("message",
                    "I am playing MegaCandy mobile right now!!");
            mAsyncRunner.request("me/feed", params, "POST",
                    new TestRequestListener(), null); 
```

笔记：

**该消息是在第一时间发布的。当我在登录后单击共享按钮时，第二次（从其他一些活动回来后）我收到此错误消息。**

# database - Haskell - 格式化问题

> ID：15811398
> 
> 赞同：2
> 
> 时间：2013-04-04T12:37:53.880
> 
> 标签：database, function, haskell, formatting, higher-order-functions

这是我必须显示数据库信息的当前代码，但是当打印出来时，阅读起来不是很清楚..

```
type Title = String
type Cast = String
type Year = Int
type Fans = String

type Film = (Title, [Cast], Year, [Fans])
type Database = [Film]

testDatabase :: Database
testDatabase = [("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2006, ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
    ("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
        ("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2002, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"])] 
```

运行此功能时：

```
displayAllFilms :: Database ->[(Title, [Cast], Year, [Fans])]
displayAllFilms [] = []
displayAllFilms ((i, j, k, l): xs)
        |l == [] = (i, j, k, []) : displayAllFilms xs
        |otherwise = (i, j, k, l) : displayAllFilms xs 
```

它打印这个：

[("皇家赌场",["丹尼尔·克雷格","伊娃·格林","朱迪·丹奇"],2006 ["加里","戴夫","佐伊","凯文","艾玛"]),("牛仔与外星人”，[“哈里森福特”，“丹尼尔克雷格”，“奥利维亚王尔德”]，2011，[“比尔”，“乔”，“加里”，“凯文”，“奥尔加”，“莉兹”]） ,(“如果可以的话，抓住我”，[“莱昂纳多·迪卡普里奥”，“汤姆·汉克斯”]，2002，[“佐伊”，“海蒂”，“乔”，“艾玛”，“莉兹”，“山姆”，奥尔加","凯文","蒂姆"])]

这显然是不可读的：有没有办法让每个电影信息（在这种情况下）打印在单独的行上，即。使用 /n 符号？

帮助将不胜感激，在此先感谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:47:45.760

```
displayAllFilms :: Database -> IO ()
displayAllFilms db = mapM_ print db 
```

这是如何运作的？

*   `print`定义为

    ```
    print :: Show a => a -> IO ()
    print x = putStrLn (show x) 
    ```

*   如何解释`mapM_`？...你知道是什么`map`，是吗？给定一个函数和一个列表，它将函数应用于列表的每个元素，并返回一个结果列表。

    `map`采用 type 的函数`a -> b`，但`mapM_`采用 type 的函数`a -> IO b`（我正在简化）。这`IO`意味着该函数可能会执行一些 i/o（在这种情况下：写入屏幕，就是这样`print`做的）。

    `mapM_`将所有这些单独的 i/o 片段连接在一起，并确保它们以正确的顺序发生。

笔记：

*   您的原件`displayAllFilms`实际上并没有做任何事情：输出与输入相同，任何内容都打印到屏幕上的唯一原因是您从 ghci 提示符运行它
*   它是拼写的`\n`，不是`/n`（尽管我没有明确使用它，因为`print`/`putStrLn`在末尾自动添加换行符）

# c# - YouTube API - 视频上传 - 401 未经授权

> ID：15811400
> 
> 赞同：0
> 
> 时间：2013-04-04T12:37:56.843
> 
> 标签：c#, youtube-api

这真让我抓狂！我正在使用下面的代码。**90％的时间**我收到以下错误。时不时地工作没有问题。请帮忙。我检查了开发人员密钥、用户名和密码。

> 错误：System.Net.WebException：远程服务器返回错误：（401）未经授权。在 System.Net.HttpWebRequest.GetResponse()
> 在 Google.GData.Client.ResumableUpload.ResumableUploader.UploadStreamPart(Int32 partIndex, String httpMethod, Uri sessionUri, Authenticator authentication, Stream payload, String mediaType, AsyncData data)
> Google.GData.Client.ResumableUpload.ResumableUploader.UploadStream(String httpMethod, Uri sessionUri, Authenticator authentication, Stream payload, String mediaType, AsyncData data) at Google.GData.Client.ResumableUpload.ResumableUploader.Insert(Authenticator authentication, AbstractEntry payload, AsyncData data) 在 Google.GData.Client.ResumableUpload.ResumableUploader.AsyncInsertWorker(AsyncResumableUploadData data, AsyncOperation asyncOp, SendOrPostCallback completionMethodDelegate) 值不能为空。参数名称：inputStream 不能为空

```
 **My Code:**

                newVideo.Tags.Add(new MediaCategory("Nonprofit", YouTubeNameTable.CategorySchema));
                newVideo.Description = DateTime.Now.ToShortDateString();
                newVideo.YouTubeEntry.Private = false;
                ResumableUploader m_ResumableUploader = null;
                Authenticator YouTubeAuthenticator;

                m_ResumableUploader = new ResumableUploader(100); //chunksize 1 MB
                m_ResumableUploader.AsyncOperationCompleted += new AsyncOperationCompletedEventHandler(m_ResumableUploader_AsyncOperationCompleted);
                m_ResumableUploader.AsyncOperationProgress += new AsyncOperationProgressEventHandler(m_ResumableUploader_AsyncOperationProgress);

                YouTubeAuthenticator = new ClientLoginAuthenticator(ConfigurationManager.AppSettings["APPLICATION_NAME"].ToString(), ServiceNames.YouTube, ConfigurationManager.AppSettings["LOGIN_USERNAME"].ToString(), ConfigurationManager.AppSettings["LOGIN_PASSWORD"].ToString());

                YouTubeAuthenticator.DeveloperKey = ConfigurationManager.AppSettings["DEVELOPER_KEY"].ToString();
                string contentType = MediaFileSource.GetContentTypeForFileName(fileName);
                newVideo.MediaSource = new MediaFileSource(filePath, contentType);

                AtomLink link = new AtomLink("http://uploads.gdata.youtube.com/resumable/feeds/api/users/" + ConfigurationManager.AppSettings["YT_USERNAME"].ToString() + "/uploads");
                link.Rel = ResumableUploader.CreateMediaRelation;
                newVideo.YouTubeEntry.Links.Add(link);

                m_ResumableUploader.InsertAsync(YouTubeAuthenticator, newVideo.YouTubeEntry, new object()); 
```

我想我应该添加.. 它在最后一行 ytr.ParseVideo(e.ResponseStream);

```
void m_ResumableUploader_AsyncOperationCompleted(object sender, AsyncOperationCompletedEventArgs e)
        {

                YouTubeRequestSettings ys = new YouTubeRequestSettings(ConfigurationManager.AppSettings["APPLICATION_NAME"].ToString(),
                   ConfigurationManager.AppSettings["DEVELOPER_KEY"].ToString(), ConfigurationManager.AppSettings["LOGIN_USERNAME"].ToString(),
                                                   ConfigurationManager.AppSettings["LOGIN_PASSWORD"].ToString());

                YouTubeRequest ytr = new YouTubeRequest(ys);
                Video v = ytr.ParseVideo(e.ResponseStream);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:30:50.577

我的猜测是您没有上传到与您拥有的存储凭据相对应的帐户中。通常，您不应该`ConfigurationManager.AppSettings["YT_USERNAME"].ToString()`在 GData API v2 代码中执行此类操作；相反，您应该将该值`default`用作 URL 的用户部分，它指的是当前经过身份验证的用户。

# php - 使用 canvg 和 amcharts 添加下载链接

> ID：15811401
> 
> 赞同：0
> 
> 时间：2013-04-04T12:37:57.770
> 
> 标签：php, jquery, html, canvg

我正在尝试将下载链接添加到使用 AmCharts 和 CanVG 的页面。整个图形和img显示部分都正常工作。

现在我需要一个下载链接来为用户提供显示的图形图像。

我已经尝试为图像创建一个 HTML 链接元素，但在那一刻，我收到一条错误消息，提示“请求的 URI 太长”。

我也尝试过使用表单，将图像中的源代码（通过 jQuery 获得）解析到新页面，并在那里显示，但这也行不通。

有人可以帮助我吗？每个使用 html/php/jquery/javascript 的解决方案都非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:59:48.913

正如我所发现的，由于 url 的长度，这是不可能的。最好的解决方案是将图像显示在 div 中，在图表旁边或图表下方，作为缩略图。通过那里，用户可以将其保存到他们的文档中。

# delphi - 画布不允许绘图

> ID：15811404
> 
> 赞同：5
> 
> 时间：2013-04-04T12:38:00.993
> 
> 标签：delphi, delphi-xe3

我想将整个屏幕的屏幕截图绘制到 TForm1 画布上。

此代码在 Delphi XE3 中运行良好

```
procedure TForm1.Button1Click(Sender: TObject);
var
  c,scr: TCanvas;
  r,r2: TRect;
begin

  c := TCanvas.Create;
  scr := TCanvas.Create;
  c.Handle := GetWindowDC(GetDesktopWindow);
  try

    r := Rect(0, 0, 200, 200);
    form1.Canvas.CopyRect(r, c, r);

  finally
    ReleaseDC(0, c.Handle);
    c.Free;
  end; 
```

现在我想先把截图复制到另一个画布上。有没有办法做到这一点而不会出现此错误？

```
procedure TForm1.Button1Click(Sender: TObject);
var
  c,scr: TCanvas;
  r,r2: TRect;
begin

  c := TCanvas.Create;
  scr := TCanvas.Create;
  c.Handle := GetWindowDC(GetDesktopWindow);
  try

    r := Rect(0, 0, 200, 200);

    scr.CopyRect(r,c,r); <-- Error, canvas does not allow drawing
    form1.Canvas.CopyRect(r, scr, r); <-- Error, canvas does not allow drawing

  finally
    ReleaseDC(0, c.Handle);
    c.Free;
  end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:47:28.570

如果您需要使用额外的画布，则必须分配 HDC，例如

```
var
  WindowHandle:HWND;
  ScreenCanvas,BufferCanvas: TCanvas;
  r,r2: TRect;
  ScreenDC,BufferDC :HDC;
  BufferBitmap : HBITMAP;
begin
  WindowHandle := 0;
  ScreenCanvas := TCanvas.Create;
  BufferCanvas := TCanvas.Create;

  ScreenDC:=GetWindowDC(WindowHandle);
  ScreenCanvas.Handle := ScreenDC;

  BufferDC := CreateCompatibleDC(ScreenDC);
  BufferCanvas.Handle := BufferDC;
  BufferBitmap := CreateCompatibleBitmap(ScreenDC,
                     GetDeviceCaps(ScreenDC, HORZRES),
                     GetDeviceCaps(ScreenDC, VERTRES));
  SelectObject(BufferDC, BufferBitmap);

  try
    r := Rect(0, 0, 200, 200);
    BufferCanvas.CopyRect(r,ScreenCanvas,r);
    form1.Canvas.CopyRect(r, BufferCanvas, r);
  finally
    ReleaseDC(WindowHandle, ScreenCanvas.Handle);
    DeleteDC(BufferDC);
    DeleteObject(BufferBitmap);
    BufferCanvas.Free;
    ScreenCanvas.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:30:12.807

是时候把我的解决方案扔进锅里了！

```
procedure TForm1.FormClick(Sender: TObject);
var
  ScreenCanvas: TCanvas;
begin
  ScreenCanvas := TCanvas.Create;
  try
    ScreenCanvas.Handle := GetWindowDC(GetDesktopWindow);
    Win32Check(ScreenCanvas.HandleAllocated);
    Canvas.CopyRect(Canvas.ClipRect, ScreenCanvas, ScreenCanvas.ClipRect);
  finally
    ReleaseDC(GetDesktopWindow, ScreenCanvas.Handle);
    ScreenCanvas.Free;
  end;
end; 
```

# selenium - Selenium WebDriver 可靠测试

> ID：15811409
> 
> 赞同：5
> 
> 时间：2013-04-04T12:38:04.627
> 
> 标签：selenium, selenium-rc, selenium-webdriver

我知道这个问题以前被问过很多次，但我仍然找不到适合我的解决方案。当我大多数时候使用 Selenium WebDriver 运行测试时，它们会因“NoSuchElementException”而失败。我尝试使用显式和隐式等待，但似乎没有任何效果。那么，除了使用 Waits 之外，还有其他方法可以让我的测试更可靠吗？

我将 selenium-java-2.31.0 与 FirefoxDriver 一起使用。下面是一些我试图让我的测试更可靠的代码示例：

```
public void waitAndClickElement(WebDriver driver, final By selector) {
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(50, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);
        WebElement elementToClick = wait
                .until(new Function<WebDriver, WebElement>() {
                    public WebElement apply(WebDriver driver) {
                        return driver.findElement(selector);
                    }

                });
        waitForElementVisible(driver, selector);
        elementToClick.click();
         } 
```

..和这个：

```
public WebElement waitForElementPresent(WebDriver driver, final By selector){
    Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
            .withTimeout(70, TimeUnit.SECONDS)
            .pollingEvery(5, TimeUnit.SECONDS)
            .ignoring(NoSuchElementException.class);
    WebElement elementToClick = wait
            .until(new Function<WebDriver, WebElement>() {
                public WebElement apply(WebDriver driver) {
                    return driver.findElement(selector);
                }
            });
    return elementToClick;

    } 
```

...和这个：

```
WebDriverWait wait = new WebDriverWait(driver, 50);
WebElement user_name = wait.until(visibilityOfElementLocated(By.xpath("//*@id='userName']"))); 
```

...和这个：

```
driver.manage().timeouts().implicitlyWait(50, TimeUnit.SECONDS); 
```

...最后是我试图使其更可靠的测试之一：

```
@Test
public void test1{
 waitAndClickElement(driver, By.xpath("//*[@id='linkLogIn']"));
        waitForElementPresent(driver, By.xpath("//*[@id='userName']")).sendKeys("name");
        waitForElementPresent(driver, By.xpath("//*[@id='inputEmail']")).sendKeys("email@gmail.com");
        waitForElementPresent(driver,By.xpath("//*[@id='resetPassword']")).click();
        assertTrue(isElementPresent(By.xpath("//*[@id='moduleMain']"))); 
```

}

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:57:50.620

试试下面的自定义方法。这对我来说可以，

```
public boolean waitForElementToBePresent(By by, int waitInMilliSeconds) throws Exception
    {
        WebDriver driver = getDriver();
        int wait = waitInMilliSeconds;
        int iterations  = (wait/250);
        long startmilliSec = System.currentTimeMillis();
        for (int i = 0; i < iterations; i++)
        {
            if((System.currentTimeMillis()-startmilliSec)>wait)
                return false;
            List<WebElement> elements = driver.findElements(by);
            if (elements != null && elements.size() > 0)
                return true;
            Thread.sleep(250);
        }
        return false;
    } 
```

像这样使用它，

```
waitForElementToBePresent(By.id("linkLogIn", 5000);
driver.findElement(By.id("linkLogIn")).click(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:25:48.533

如果您正确处理异常，WebDriver 将非常稳定。问题是 ExpectedConditions 类的方法不会为您处理异常，尽管*大多数人会像这样回答您的问题*。

如果你愿意，可以试试我的方法。此方法在 0 到 90 秒之间返回，具体取决于场景。您可能更愿意稍微更改此方法，但它应该可以工作。这里的**重要概念**是：

```
1\. Use the new FluentWait class with the .ignoring method (or .ignoreAll() ).
2\. Use findElement() BUT make sure you catch (and nicely handle) the possible   
    exceptions (that you are ignoring in the wait).
3\. Use a loop to retry after exceptions but govern that by either time or
    # of tries. 
```

和代码：

```
public WebElement getElementByLocator( final By locator ) {
  LOGGER.info( "Get element by locator: " + locator.toString() );  
  final long startTime = System.currentTimeMillis();
  Wait<WebDriver> wait = new FluentWait<WebDriver>( driver )
    .withTimeout(30, TimeUnit.SECONDS)
    .pollingEvery(5, TimeUnit.SECONDS)
    .ignoring( NoSuchElementException.class ) 
    .ignoring( StaleElementReferenceException.class ) ;
  int tries = 0;
  boolean found = false;
  WebElement we = null;
  while ( (System.currentTimeMillis() - startTime) < 91000 ) {
   LOGGER.info( "Searching for element. Try number " + (tries++) ); 
   try {
    we = wait.until( ExpectedConditions.visibilityOfElementLocated( locator ) );
    found = true;
    break;
   } catch ( StaleElementReferenceException e ) {      
    LOGGER.info( "Stale element: \n" + e.getMessage() + "\n");
   } catch ( NoSuchElementException nse ) {      
    LOGGER.info( "No such element: \n" + nse.getMessage() + "\n");
   }
  }
  long endTime = System.currentTimeMillis();
  long totalTime = endTime - startTime;
  if ( found ) {
   LOGGER.info("Found element after waiting for " + totalTime + " mill." );
  } else {
   LOGGER.info( "Failed to find element after " + totalTime + " mill." );
  }
  return we;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T20:15:44.920

当你运行 findElement 时，如果找不到它，你会得到一个错误。发生这种情况的三个原因之一：

**您的选择器错误**

如果选择器错误，最好进行调试，直到您到达该位置并暂停测试执行。然后使用控制台找出正确的选择器来找到元素。

**元素不存在**

在您的第一个操作中，您可能会注意到您正在寻找的元素实际上并不存在。在这种情况下，找出你处于错误状态的原因并修复它。如果您希望该元素不存在，[这里有一个很棒的 C# 示例](http://brantleytec.blogspot.com/2013/08/webdriver-iwebelementexists.html)，说明如何扩展您的 IWebElement 对象以允许使用 .Exists() 方法。

**元素晚了**

确定元素是否迟到很容易。正常运行测试一次，然后以调试模式运行，手动跳过每个步骤。如果在您的手动步骤有效时正常测试运行失败，您就知道您找到了问题。通常，该问题是由于页面加载时未发生 AJAX 加载。在这些情况下，一个好的 webdev 通常会添加一些你可以轻松搜索的微调器图像。我创建了一个名为 WaitForPageLoad() 的辅助方法，它首先等待页面加载，然后验证微调器不存在，然后再次等待页面加载完成。您想要 2 个页面加载等待，因为模态将旋转然后加载，而新页面加载将加载然后旋转。最后，页面完成，您的元素将出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:48:49.770

I have faced with the same type of problem, while using WebDriver with C#. I can propose 2 different ways on how you can avoid(not completely, but minimize) NoSuchElementException in your tests:

1.  First of all you should figure out how your application works - does it use a lot of Ajax and other asynch. requests/responses. Then you can use explicit wait for every element, which can not be located at once.

2.  You can write your own implementation of WebElement class based on Selenium WebDriver WebElement class. Main idea - everytime you will use your webelement it will relocated - so you will not be worry about NoSuchElement or StaleElementException.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T13:45:59.827

您是否尝试在没有所有这些等待和等待的情况下逐个元素地捕捉元素？

就像：`WebElement username = driver.findelement(By.id("userName"));`

顺便说一句，你能放下你的 html 吗？

编辑：

我可以建议的是：

```
protected void sleep(int i) {
driver.manage().timeouts().implicitlyWait(i, TimeUnit.SECONDS); 
}

@test
void test(){
driver.findElement(By.id("linkLogIn")).click(); sleep(6);
driver.findElement(By.id("userName")).sendKeys("user"); sleep(1);
driver.findElement(By.id("inputEmail")).sendKeys("mail@gmail.com"); sleep(1);
driver.findElement(By.id("resetPassword")).click(); sleep(10);
Assert.assertTrue(isElementPresent(By.id("moduleMain")));
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-08T10:08:40.320

那么你的代码告诉我你只是在等到元素出现。

```
waitForElementPresent(driver, By.xpath("//*[@id='userName']")).sendKeys("name");
waitForElementPresent(driver, By.xpath("//*[@id='inputEmail']")).sendKeys("email@gmail.com"); 
```

它没有告诉我您单击该字段，然后使用发送键输入文本。如何添加点击

```
 waitForElementPresent(driver, By.xpath("//*[@id='userName']"));
driver.findElement(by.id ="userName").click(); 
driver.findElement(by.id ="userName").sendKeys("name"); 
```

问题是鼠标焦点在webdriver上，它需要集中在适当的字段AFAIK

# java - java应用程序中的高CPU利用率-为什么？

> ID：15811411
> 
> 赞同：53
> 
> 时间：2013-04-04T12:38:11.207
> 
> 标签：java, multithreading, performance, web-applications, cpu-usage

我有一个 Java 应用程序（基于 Web），它有时会在几个小时内显示出非常高的 CPU 利用率（几乎 90%）。Linux`TOP`命令显示了这一点。在应用程序重新启动时，问题就消失了。

***所以要调查***：

我使用 Thread Dump 来查找线程在做什么。有几个线程处于`'RUNNABLE'`状态，一些处于其他状态。在进行重复的线程转储时，我确实看到了一些始终处于`'RUNNABLE'`状态的线程。所以，他们似乎是罪魁祸首。

但我无法确定，哪个线程占用了 CPU 或进入了无限循环（从而导致高 CPU 利用率）。

日志不一定有帮助，因为有问题的代码可能没有记录任何内容。

***如何调查 - 应用程序的哪个部分或哪个线程导致 CPU 使用率高？- 还有其他想法吗？***

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-04T15:45:52.510

如果分析器不适用于您的设置，您可以尝试按照[本文](http://web.archive.org/web/20190403090107/http://code.nomad-labs.com/2010/11/18/identifying-which-java-thread-is-consuming-most-cpu/)中的步骤识别线程。

基本上，分为三个步骤：

1.  运行`top -H`并获取 CPU 最高的线程的 PID。
2.  将PID转换为十六进制。
3.  在您的线程转储中查找具有匹配 HEX PID 的线程。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-04T13:11:42.363

您可能是垃圾收集问题的受害者。

当您的应用程序需要内存并且配置为使用的内存不足时，垃圾收集器将经常运行，这会消耗大量 CPU 周期。如果它无法收集任何东西，您的内存将保持低位，因此它将一次又一次地运行。当您重新部署应用程序时，内存会被清除，垃圾收集不会超出要求，因此 CPU 利用率会一直保持在较低水平，直到它再次满为止。

您应该检查您的应用程序中没有可能的内存泄漏，并且它的内存配置良好（检查`-Xmx`参数，请参阅[Java 选项 -Xmx 代表什么？](https://stackoverflow.com/questions/5374455/what-does-java-option-xmx-stand-for)）

另外，您使用什么作为Web框架？JSF 非常依赖会话，消耗大量内存，最多考虑无状态！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-29T06:50:02.627

在线程转储中，您可以找到如下所示的行号。

对于当前正在运行的主线程...

```
"main" #1 prio=5 os_prio=0 tid=0x0000000002120800 nid=0x13f4 runnable [0x0000000001d9f000]
   java.lang.Thread.State: **RUNNABLE**
    at java.io.FileOutputStream.writeBytes(Native Method)
    at java.io.FileOutputStream.write(FileOutputStream.java:313)
    at com.rana.samples.**HighCPUUtilization.main(HighCPUUtilization.java:17)** 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T13:06:15.703

在这些 CPU 高峰期，用户负载如何？你说这是一个基于 Web 的应用程序，所以想到的罪魁祸首是内存利用率问题。例如，如果您在会话中存储了很多东西，并且会话计数变得足够高，则应用服务器将开始颠簸。这也是 GC 可能会使事情变得更糟的情况，具体取决于您使用的方案。有关应用程序和服务器配置的更多信息将有助于指出更多调试想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-20T14:34:59.403

火焰图有助于识别消耗最多 CPU 时间的执行路径。

简而言之，以下是生成火焰图的步骤

```
yum -y install perf

wget https://github.com/jvm-profiling-tools/async-profiler/releases/download/v1.8.3/async-profiler-1.8.3-linux-x64.tar.gz

tar -xvf async-profiler-1.8.3-linux-x64.tar.gz
chmod -R 777 async-profiler-1.8.3-linux-x64
cd async-profiler-1.8.3-linux-x64

echo 1 > /proc/sys/kernel/perf_event_paranoid
echo 0 > /proc/sys/kernel/kptr_restrict

JAVA_PID=`pgrep java`

./profiler.sh -d 30 $JAVA_PID -f flame-graph.svg 
```

`flame-graph.svg`也可以使用浏览器打开，简而言之，堆栈跟踪中元素的宽度指定了相对包含执行流的线程转储的数量。

生成它们的其他方法很少

*   通过引入[此处](https://netflixtechblog.com/java-in-flames-e763b3d32166)`-XX:+PreserveFramePointer`描述的 JVM 选项
*   [如此处](https://github.com/jvm-profiling-tools/async-profiler)`-XX:+UnlockDiagnosticVMOptions -XX:+DebugNonSafepoints`所述使用 async-profiler

但是使用 async-profiler 而不提供任何选项虽然不是很准确，但可以在不更改正在运行的 Java 进程的情况下利用进程的 CPU 开销低。

他们的[wiki](https://github.com/jvm-profiling-tools/async-profiler/wiki)提供了有关如何利用它的详细信息。更多关于火焰图的信息可以在[这里找到](http://www.brendangregg.com/flamegraphs.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T12:48:10.597

您的第一种方法应该是找到对[Thread.sleep](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep%28long%29)的所有引用并检查：

1.  睡觉是正确的做法——如果可能的话，你应该使用某种等待机制——也许小心使用 a`BlockingQueue`会有所帮助。

2.  如果睡觉**是**正确的事情，那么你的睡眠时间是否正确——这通常是一个很难回答的问题。

多线程设计中最常见的错误是认为在等待某事发生时您需要做的就是检查它并在一个紧密的循环中休眠一段时间。这很少是一个有效的解决方案 - 您应该始终尝试`wait`以防万一。

第二个最常见的问题是在**没有 sleep**的情况下循环。这甚至更糟，而且不太容易追踪。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-15T20:14:41.203

您没有将“linux”分配给问题，但您提到了“Linux top”。因此这可能会有所帮助：

使用 Linux 小工具 threadcpu 来识别使用线程最多的 cpu。它调用 jstack 来获取线程名称。通过管道中的“sort -n”，您可以获得按 CPU 使用情况排序的线程列表。

更多细节可以在这里找到： [http ://www.tuxad.com/blog/archives/2018/10/01/threadcpu_-_show_cpu_usage_of_threads/index.html](http://www.tuxad.com/blog/archives/2018/10/01/threadcpu_-_show_cpu_usage_of_threads/index.html)

如果您仍然需要更多详细信息，请创建线程转储或在线程上运行 strace。

# python-2.7 - 熊猫数据框合并问题

> ID：15811414
> 
> 赞同：2
> 
> 时间：2013-04-04T12:38:18.697
> 
> 标签：python-2.7, pandas

我正在通过 Wes McKinney 的*Python for Data Analysis*学习 python 和 pandas 。第 2 章中的一个示例是在 movie_id 上合并 MovieLens 数据，但它不起作用。我认为问题在于，在评级中，movie_id 是一个 int64，而在电影中它是一个对象。合并返回一个空数据框。

我已经阅读了之前关于 pandas 和自动数据类型分配的一些帖子，并在 pandas.io.parsers.read_table 文档中找到了 dtype，但无法更改类型。

原代码：

```
mnames = ['movie_id', 'title', 'genres']
movies = pd.read_table('ch02/movielens/movies.dat', sep='::', header=None, names=mnames) 
```

我的研究表明什么应该起作用：

```
movies = pd.read_table('ch02/movielens/movies.dat', sep='::', header=None, names=mnames, dtype={'movie_id':np.int64}) 
```

不幸的是，类型没有改变，合并仍然返回一个空集。我正在运行熊猫 0.10.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T05:34:59.910

（注意我没有查书的代码，只是你的帖子）

首先确认dtypes：

```
print ratings_df.dtypes
print movies_df.dtypes 
```

如果您发现它们是不同的类型，您可以尝试（假设 ratings_df.movi​​e_id 是 object 而不是 int）：

```
ratings_df.movie_id = ratings_df.movie_id.astype(int) 
```

看看你的合并现在是否有效。

# linux - 写入 .log 文件

> ID：15811420
> 
> 赞同：0
> 
> 时间：2013-04-04T12:38:26.053
> 
> 标签：linux, bash

我正在制作一个脚本，每次完成某件事时，我都想写入我的自定义 .log 文件。我怎么做？

最后..我只想用 Bash 阅读它，..我只使用 cat 吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:08:07.147

我一直使用的最简单的语法是`2>&1 | tee -a file_name.log`.

该语法可以在命令或文件执行之后使用。例如

```
find . -type f 2>&1 | tee -a file_name.log 
```

或者

```
./test.sh 2>&1 | tee -a file_name.log 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:00:39.943

只是`cat <log message here> >> custom.log`。

该`>>`方法添加到文件的底部，而不是`>`删除文件的内容然后写入消息。

# php - PHP 中的 imageflip() 未定义

> ID：15811421
> 
> 赞同：1
> 
> 时间：2013-04-04T12:38:29.790
> 
> 标签：php, image, image-rotation, php-ini

每当我尝试使用该功能`imageflip()`时，它都会向我显示以下消息

> `imageflip()`致命错误：在`D:\xampp\htdocs\temp1\image_flip.php`第 6 行调用未定义函数

然而，一旦我调用了该`imap_open`函数，我已经安装了 imap 扩展并配置了所有内容。但是，它仍然显示相同的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:21:09.747

`imageflip()`仅**在[PHP 5.5](http://www.php.net/manual/en/function.imageflip.php)**之后可用。但是，您仍然可以自己定义它，如此[处](http://maettig.com/?page=PHP/imageflip)所述（尽管如果您计划升级到 PHP 5.5，不建议实现您的，或者至少更改名称以避免重复问题）。为了stackoverflow，我将代码粘贴在这里：

```
<?php

/**
 * Flip (mirror) an image left to right.
 *
 * @param image  resource
 * @param x      int
 * @param y      int
 * @param width  int
 * @param height int
 * @return bool
 * @require PHP 3.0.7 (function_exists), GD1
 */
function imageflip(&$image, $x = 0, $y = 0, $width = null, $height = null)
{
    if ($width  < 1) $width  = imagesx($image);
    if ($height < 1) $height = imagesy($image);
    // Truecolor provides better results, if possible.
    if (function_exists('imageistruecolor') && imageistruecolor($image))
    {
        $tmp = imagecreatetruecolor(1, $height);
    }
    else
    {
        $tmp = imagecreate(1, $height);
    }
    $x2 = $x + $width - 1;
    for ($i = (int) floor(($width - 1) / 2); $i >= 0; $i--)
    {
        // Backup right stripe.
        imagecopy($tmp,   $image, 0,        0,  $x2 - $i, $y, 1, $height);
        // Copy left stripe to the right.
        imagecopy($image, $image, $x2 - $i, $y, $x + $i,  $y, 1, $height);
        // Copy backuped right stripe to the left.
        imagecopy($image, $tmp,   $x + $i,  $y, 0,        0,  1, $height);
    }
    imagedestroy($tmp);
    return true;
} 
```

并使用它：

```
<?php

$image = imagecreate(190, 60);
$background = imagecolorallocate($image, 100, 0,   0);
$color      = imagecolorallocate($image, 200, 100, 0);
imagestring($image, 5, 10, 20, "imageflip() example", $color);
imageflip($image);
header("Content-Type: image/jpeg");
imagejpeg($image); 
```

我还没有尝试过，而且代码根本不是我的，但是通过一些技巧你可以根据你的需要调整它。

# javascript - 为什么我的 jQuery 模板方法不再适用于 jQuery 1.9.1？

> ID：15811424
> 
> 赞同：3
> 
> 时间：2013-04-04T12:38:40.097
> 
> 标签：javascript, jquery, templating

请看这个小提琴：http: [//jsfiddle.net/VdZJx/2/](http://jsfiddle.net/VdZJx/2/)

```
$(function()
{
    var li = $($("#link-item-template").html()).find("a").attr({
        href: "javascript:;"
    }).html("Toggle");

    $("ul").append(li);
}); 
```

这是我的一种模板方法，正如我所见，甚至其他一些库也用于存储和生成 html 模板。

[如果您使用 jQuery 版本1.9.1](http://sizzlejs.com/)，让此演示运行并观察控制台结果，当您尝试从`$().html()`. 看：

> 未捕获的错误：语法错误，无法识别的表达式：<li> <input type="checkbox" /> <a></a> </li>

我该怎么做才能让它再次工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:45:02.963

由于您并没有真正获得正确的元素，而是将脚本标记的内容作为字符串（恰好是 HTML），因此大量空格和换行符被添加到 HTML 字符串中，您需要对其进行修剪以使其工作一个有效的选择器：

```
$($.trim($("#link-item-template").html())) 
```

[**小提琴**](http://jsfiddle.net/VdZJx/3/)

# excel - Excel VBA循环列，搜索str，查找打开的工作簿，复制单元格范围

> ID：15811428
> 
> 赞同：0
> 
> 时间：2013-04-04T12:38:54.797
> 
> 标签：excel, vba

我有一个小问题。我从事产品开发工作，每年管理 100 多个项目，给定项目的运行时间是流动的，有些需要比计划完成的时间更长，而另一些则更快。对于每个项目，时间/成本工作簿都会设置计划成本/时间，然后在项目完成后估算实际成本/时间。到目前为止，每个表格都是手动创建、填写并保存到一个文件夹中的，这些文件的名称从未相同，并且最终以不同的标题格式结束。这使得审查项目的年平均成本/运行时间变得非常困难。

这个想法是使时间/成本工作簿的创建更简单。

工作流程：

1.  打开工作簿“项目”
2.  在 A 列输入项目编号：xxx-yyyy-zz（xxx = 项目编号 | yyyy = 年份 | zz = 项目类型）
3.  在 B 列中输入项目名称
4.  选择带有项目点击按钮“Create_Open”的行
5.  使用模板创建新工作簿
6.  项目编号 和项目名称被复制到模板
7.  工作簿以文件名保存（项目编号“_”项目名称“.xml”）

那部分很简单，代码如下，它看起来不是很好，但它完成了工作。

```
Function FileExists(FullFileName As String) As Boolean
     'returns TRUE if the file exists
     FileExists = Len(Dir(FullFileName)) > 0
End Function

Sub Create_Workbook()

Dim selRow As Integer
Dim file_path As String
Dim file_extension As String

file_path = "...dir"                                    ' Speicherpfad festlegen
file_extension = ".xls"                                 ' Speichermedium festlegen

selRow = ActiveCell.Row 'aktive Zeile finden
    If Range("A" & selRow) = "" Then   ' prüfen ob Zeile ein Projekt enthält
        MsgBox ("Bitte eine ausgefullte Zeile auswählen")
        End
    End If

project_nr = Mid(Range("A" & selRow), 1, 11) ' zuweisen Projekt-Nr.
project_be = Mid(Range("B" & selRow), 1, 100) ' zuweisen Projekt Bezeichnung

'If Workbook Exists Open if not Create and write to Workbook
If Not FileExists(file_path & project_nr & "_" & project_be & file_extension) Then
   'Workbook null setzen und Template laden
    Set new_workbook = Nothing 'null setzen
    Set new_workbook = Workbooks.Add(Template:="dir") 'Postfach laufwerk einstellen

    'Projekt-Nr. und Projektbezeichnung in Controllingblatt speichern
    Range("C1") = project_be 'Projektbezeichnung setzen
    Range("C2") = project_nr 'Projektnummer setzen
    Range("C3") = Format(Date, "mm-dd-yyyy") 'Heutiges Datum setzen

    'Workbook speichern "Projekt-Nr._Projektbezeichnung"
    new_workbook.SaveAs Filename:=file_path & project_nr & "_" & project_be & file_extension

Else
    Workbooks.Open file_path & project_nr & "_" & project_be & file_extension
End If

End Sub 
```

现在是我有解决所有问题的母亲的部分。在 A 列中搜索一年，一旦找到来自给定年份的项目，就会打开相应的工作簿。一系列单元格从打开的工作簿复制到项目列表工作簿中的新工作表。单元格的范围被粘贴到新的工作表中，该工作表给出了搜索年份的名称。搜索循环遍历 A 列的所有行，直到它到达一个空行。

工作流程：

1.  Buttonclick 打开用户窗口“输入年份”
2.  在没有年份输入的情况下单击确定按钮返回错误
3.  输入年份 点击 OK 按钮
4.  创建具有输入年份标题的新工作表
5.  在 A 列中搜索年份。
6.  一旦从打开项目工作簿的对应年份找到项目
7.  从工作簿复制一系列单元格
8.  将单元格范围粘贴到步骤 4 中工作表中的项目列表工作簿
9.  关闭在步骤 6 中打开的工作簿
10.  循环 5-9 直到空单元格

到目前为止，我所拥有的并不多（代码如下），我遇到了坚固的墙壁。我想知道是否有人可以帮助我，或者我的逻辑是否完全有缺陷，我应该从头开始并以不同的方式构建系统。

```
Private Sub cmdOK_Click()
    If Len(Me.TextBox1 & "") = 0 Then   ' prüfen ob Zeile ein Projekt enthält
        MsgBox ("Bitte Jahr eingeben")
    Else
        'Loop through cells on a sheet to find strFind1
    End If
End Sub 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:04:33.547

希望这可以帮助。我尝试了一个测试，我想我得到了它非常接近你的问题。我有一个 projectList 工作簿，在第一张表上我在 A 列中有以下值

*   111-2010-222
*   222-2010-333
*   333-2010-144
*   444-2011-111
*   555-2011-222

然后我有一个名为的按钮`sumProjects`，在单元格中`D2`我有我想要总计的年份。对于上面的每个项目名称，我创建了一个名称相同的电子表格，并在这些电子表格中将一些数据放入 column `D`。然后在点击`sumProjects`按钮时，我把这个代码

```
Private Sub CommandButton1_Click()
    Dim lngLR As Long
    Dim wb As Workbook
    Dim sh, sourceSheet As Worksheet
    Dim i, x as Integer

    With Me
        lngLR = .Cells(.Rows.Count, "A").End(xlUp).Row 'finds the last row of column A
    End With

    'creates a new worksheet with the name of the given year
    With ThisWorkbook
        Set sh = .Worksheets.Add(after:=.Sheets(.Sheets.Count))
        sh.Name = (Range("D2").Value)
    End With

    x = 1 'this will be used to keep track if which row to input
          'data on the destination sheet, we set it to 1 because
          'we know the destination sheet is a new sheet so we know
          'where the first row is, we do not have to calculate it

    'loops through all of the project names in column A
    'looking for one that contains the year given in D2
    For i = 1 To lngLR
        'look for year in project name 
        If InStr(Range("A" & i), Range("D2")) Then
            'project of given year found. Open workbook and get data
            Set wb = Application.Workbooks.Open("C:\Desktop\" & Range("A" & i) & ".xlsx")
            Set sourceSheet = wb.Worksheets(1)
            sh.Range("C" & x).Value = sourceSheet.Range("D5").Value
            x = x + 1 'x is only incremented when a value is placed on the new sheet
            wb.Close
        End If
    Next i 
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:09:08.460

所以我编辑了loveforvdubs代码以满足我的需要。我确信工作表模板的复制可以更优雅地解决，但我无法得到任何其他解决方案。

再次感谢loveforvdubs的帮助！

```
Private Sub CommandButton1_Click()
Dim lngLR As Long
Dim wb As Workbook
Dim sh, sourceSheet As Worksheet

If Len(Me.TextBox1 & "") = 0 Then   ' If TextBox1 is empty returns Msg
    MsgBox ("Bitte Jahr eingeben")
Else
    With Me
        lngLR = .Cells(.Rows.Count, "A").End(xlUp).Row 'finds the last row of column A
    End With

    'creates a new worksheet with the name of the given year
    With ThisWorkbook
        Worksheets("Auswertung").Visible = True
        Worksheets("Auswertung").Select
        Worksheets("Auswertung").Copy After:=Sheets(1)
        Worksheets("Auswertung (2)").Select
        Worksheets("Auswertung (2)").Name = TextBox1
        Worksheets("Auswertung").Visible = False
        Set sh = Worksheets(2)
    End With

    'loops through all of the project names in column A
    'looking for one that contains the year given in TextBox1
    For i = 1 To lngLR
        'look for year in project name
        If InStr(Range("A" & i), TextBox1) Then
            'project of given year found. Open workbook and get data
            Set wb = Application.Workbooks.Open("K:\Projektplanung\Projektkosten\" & Range("A" & i) & "_" & Range("B" & i) & ".xlsx")
            Set sourceSheet = wb.Worksheets(1)
            sh.Range("A" & i).Value = sourceSheet.Range("I30").Value
            wb.Close
        End If
    Next i
End If
End Sub 
```

# iphone - MBProgressHUD 没有停止

> ID：15811430
> 
> 赞同：0
> 
> 时间：2013-04-04T12:38:56.837
> 
> 标签：iphone, ios, mbprogresshud

这是我的代码

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.mode = MBProgressHUDModeIndeterminate;
hud.labelText = @"Loading..";
dispatch_queue_t dispatchQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
dispatch_async(dispatchQueue, ^(void)
{
    [self information];
    [hud hide:YES];
}); 
```

我知道方法信息会在一段时间后完成。但即使完成后，进度条也不会消失。可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:54:03.503

像这样做

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.mode = MBProgressHUDModeIndeterminate;
hud.labelText = @"Loading..";
dispatch_queue_t dispatchQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
dispatch_async(dispatchQueue, ^(void)
{
[self information];
dispatch_sync(dispatch_get_main_queue(), ^{ 
[hud hide:YES];
});
}); 
```

# c++ - Qt错误，个性套路

> ID：15811433
> 
> 赞同：0
> 
> 时间：2013-04-04T12:39:02.093
> 
> 标签：c++, qt, undefined

我正在尝试使用 Qt 4.8.4 和 Qt Creator 2.6.2 在 Windows XP 32 位中构建 Qt 项目。在得到数十万个问题后，编译器报告了 2 个错误：

```
c:\Qt\4.8.4\lib\libqtmaind.a(qtmain_win.o)(.eh_frame+0x12):-1: In function`Z4qMinIiERKT_S2_S2_':

..\..\src\corelib\thread\qbasicatomic.h:95: error: undefined reference to `__gxx_personality_v0'

:-1: error: collect2: ld returned 1 exit status 
```

一个想法如何解决这个问题？

操作系统：Windows XP 32 位，带有 MingW 编译器。

# iphone - 如何将 Cocos2d 应用程序缩放到 iPhone 5 屏幕？

> ID：15811435
> 
> 赞同：0
> 
> 时间：2013-04-04T12:39:04.470
> 
> 标签：iphone, ios, xcode, ipad, cocos2d-iphone

我有一个 Cocos3d v1.01 应用程序，我目前正在尝试使其适合 iPhone 5 全屏。

对于大多数屏幕来说，简单地拉伸背景就足够了，因为它只是一种填充屏幕的图案，不需要更改任何 UI 部分，但是在其中一个屏幕上我正在努力改变。

这是我认为为其设置背景的代码部分；

```
-(void)animations
{

    AppDelegate *app=(AppDelegate *)[[UIApplication sharedApplication]delegate];
    CGSize size = [[CCDirector sharedDirector] winSize];

        NSMutableArray *bodyanimframeBuddyBack =[[NSMutableArray alloc]init];
        for(int j = 1;j<=4;++j)
        {

            [bodyanimframeBuddyBack addObject:[[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:[NSString stringWithFormat:@"shark_sea_waves5%d.png",j]]];

        }

        CCAnimation *BuddyAnimBack = [CCAnimation animationWithFrames:bodyanimframeBuddyBack delay:0.3f];
        self.backgroundAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:BuddyAnimBack restoreOriginalFrame:NO]];

        CCSprite  *bg=[CCSprite spriteWithSpriteFrameName:@"shark_sea_waves51.png"];

        bg.position=ccp(size.width/2, size.height/2);
        [self addChild:bg];
        [bg runAction:backgroundAction]; 
```

有没有办法调整它？我猜这是 bg.position 需要更改的部分来告诉它是否是 iPhone5？

提前致谢，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:36:43.927

```
bg.scaleX = size.width / bg.contentSize.width; 
```

这将拉伸背景宽度以匹配屏幕宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:55:05.263

为什么不能像为 iPad 一样为 iPhone5 放置单独的背景。

```
#define IS_IPHONE5 (([[UIScreen mainScreen] bounds].size.height-568)?NO:YES)

#define TEX_MM_BG   (IS_IPHONE5) ? ( @"shark_sea_waves51-whd.png") : ( @"shark_sea_waves51.png")

-(void)setupBackground
{
    CCSprite *bg = [CCSprite spriteWithFile:TEX_MM_BG];
    bg.position  = ccp(mS.width*0.5f, mS.height*0.5f);
    [self addChild:bg z:-3 tag:kTagBackground];
} 
```

//也将这些图像放入硬盘。

```
shark_sea_waves51.png       //480x320
shark_sea_waves51-hd.png    //960x640
shark_sea_waves51-whd.png   //1136x640
shark_sea_waves51-ipad.png  //1024x768
shark_sea_waves51-ipadhd.png //2048x1536 
```

# javascript - 定义 img 自定义属性

> ID：15811439
> 
> 赞同：0
> 
> 时间：2013-04-04T12:39:12.927
> 
> 标签：javascript, dom, opera, mozilla

我正在尝试为 DOM 元素“img”分配属性“itemId”

这是代码

```
var img = document.createElement('IMG');
window.console.log(itemId);
img.itemId = itemId;
window.console.log(img.itemId); 
```

执行控制台后包含以下消息：

```
41
http://example.domain/41 
```

其中 example.domain - 是我网站的地址。

此问题出现在 Opera 和 Mozilla 中，但在 Chrome 中此代码工作正常（img.itemId == 41）。示例：http: [//jsfiddle.net/uwPY5/](http://jsfiddle.net/uwPY5/)

谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:40:49.250

非常奇怪的行为，但尝试标准方式：

```
img.setAttribute("itemId", itemId); 
```

不过，为了与 HTML5 兼容，您应该像这样为属性名称添加前缀：

```
img.setAttribute("data-itemId", itemId); 
```

然后读回来：

```
var itemId = img.getAttribute("data-itemId"); 
```

# java - Collections.binarySearch(List list, K key) 澄清。爪哇

> ID：15811440
> 
> 赞同：7
> 
> 时间：2013-04-04T12:39:13.733
> 
> 标签：java, return, binary-search

给定以下语句，取自[此](http://docs.oracle.com/javase/tutorial/collections/algorithms/index.html#shuffling)Oracle java 教程，与 Collections 类的 binarySearch() 方法相关：

> 两种形式的返回值相同。如果 List 包含搜索键，则返回其索引。如果不是，则返回值为 **(-(insertion point) - 1)**，其中插入点是值将被插入到 List 中的点，或者是大于该值或 list.size 的第一个元素的索引() 如果 List 中的所有元素都小于指定值。

为什么`binarySearch()`not的返回值只返回负索引而不是负索引减1？（上面引用的粗体部分）。

简而言之：为什么`(-(insertion point) - 1)`而不只是`(-(insertion point))`？

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-04T12:46:09.693

那是因为`-(insertion point)`会模棱两可。您将无法区分以下内容：

*   在位置找到的项目`0`；
*   未找到项目，插入点为`0`。

与`-(insertion point) - 1`，上述两种情况导致不同的返回值（`0`和`-1`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T12:44:36.017

从你的链接

> 这个公认的丑陋公式保证当且仅当找到搜索键时返回值将> = 0。将布尔值（找到）和整数（索引）组合成单个 int 返回值基本上是一种技巧

# c# - 具有泛型的类型化类

> ID：15811441
> 
> 赞同：1
> 
> 时间：2013-04-04T12:39:13.743
> 
> 标签：c#, .net, generics

我有这样的方法：

```
public static void Map<TEntityTrack>() 
```

在哪里`TEntityTrack`实现：

```
public abstract class EntityTrack<TEntity> : EntityTrack, IChangeTrackingService<TEntity> 
```

在`Map`方法内部，我怎么知道 TEntityTrack 的 TEntity 类类型？我不想在 Map 中指定`TEntity`，因为我想映射我的实现，例如：

```
TrackMap.Map<MyImplOfTrackByEntity>(); 
```

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:42:28.977

您应该在`Map`方法上添加第二个类型参数，以及适当的[类型约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)：

```
public static void Map<TEntityTrack, TEntity>() 
   where TEntityTrack : EntityTrack<TEntity>
{
    var entityType = typeof(TEntity);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:48:23.597

如果要在运行时获取类型，可以执行以下操作：

```
Type[] genericTypes = typeof(TEntityTrack).GetGenericArguments();
Type entityType = genericTypes[0]; 
```

当然，添加所有适当的边界检查等。

编辑：为了找到基本类型的通用参数。

```
Type type = typeof(TEntityTrack);
while (type != typeof(object))
{
    Type[] genericTypes = type.GetGenericArguments();
    if (genericTypes.Length == 0)
    {
        type = type.BaseType;
    }
    else
    {
        Type entityType = genericTypes[0];
        return entityType;
    }
}
// Throw an exception or other appropriate action
throw Exception("Does not have generic argument."); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T12:42:24.140

如果我理解正确，您可以使用以下语句获取泛型参数的类型：

```
Type param = typeof(TEntity); 
```

# javascript - JavaScript：将 NaN 转换为 0

> ID：15811442
> 
> 赞同：0
> 
> 时间：2013-04-04T12:39:14.293
> 
> 标签：javascript

我目前正在为我的公司制作一个巨大的在线时间表，使用 JavaScript 来计算总字段中的每一行。

一切都在使用数字输入，但如果用户在其中一个文本框中插入非数字值，则总值将为：NaN 错误。

如何更改我的 JavaScript 代码，以便如果用户在文本框中输入例如 SYG，那么它将计为 0？

这是整个脚本：

```
<script language="javascript">  
function addsum()

{
var man_1, man_2, man_3, man_4, man_5, man_6, man_7, man_8, man_9, man_10, man_11,  total_1;
var tir_1, tir_2, tir_3, tir_4, tir_5, tir_6, tir_7, tir_8, tir_9, tir_10, tir_11, tota l_2;
var ons_1, ons_2, ons_3, ons_4, ons_5, ons_6, ons_7, ons_8, ons_9, ons_10, ons_11, total_3;
var tor_1, tor_2, tor_3, tor_4, tor_5, tor_6, tor_7, tor_8, tor_9, tor_10, tor_11,  total_4;
var fre_1, fre_2, fre_3, fre_4, fre_5, fre_6, fre_7, fre_8, fre_9, fre_10, fre_11,   total_5;
var lør_1, lør_2, lør_3, lør_4, lør_5, lør_6, lør_7, lør_8, lør_9, lør_10, lør_11, total_6;
var søn_1, søn_2, søn_3, søn_4, søn_5, søn_6, søn_7, søn_8, søn_9, søn_10, søn_11, total_7;
var oa_1, oa_2, oa_3, oa_4, oa_5, oa_6, oa_7;

man_1 = Number(document.form1.man_1.value);
man_2 = Number(document.form1.man_2.value);
man_3 = Number(document.form1.man_3.value);
man_4 = Number(document.form1.man_4.value);
man_5 = Number(document.form1.man_5.value);
man_6 = Number(document.form1.man_6.value);
man_7 = Number(document.form1.man_7.value);
man_8 = Number(document.form1.man_8.value);
man_9 = Number(document.form1.man_9.value);
man_10 = Number(document.form1.man_10.value);
man_11 = Number(document.form1.man_11.value);
tir_1 = Number(document.form1.tir_1.value);
tir_2 = Number(document.form1.tir_2.value);
tir_3 = Number(document.form1.tir_3.value);
tir_4 = Number(document.form1.tir_4.value);
tir_5 = Number(document.form1.tir_5.value);
tir_6 = Number(document.form1.tir_6.value);
tir_7 = Number(document.form1.tir_7.value);
tir_8 = Number(document.form1.tir_8.value);
tir_9 = Number(document.form1.tir_9.value);
tir_10 = Number(document.form1.tir_10.value);
tir_11 = Number(document.form1.tir_11.value);
ons_1 = Number(document.form1.ons_1.value);
ons_2 = Number(document.form1.ons_2.value);
ons_3 = Number(document.form1.ons_3.value);
ons_4 = Number(document.form1.ons_4.value);
ons_5 = Number(document.form1.ons_5.value);
ons_6 = Number(document.form1.ons_6.value);
ons_7 = Number(document.form1.ons_7.value);
ons_8 = Number(document.form1.ons_8.value);
ons_9 = Number(document.form1.ons_9.value);
ons_10 = Number(document.form1.ons_10.value);
ons_11 = Number(document.form1.ons_11.value);
tor_1 = Number(document.form1.tor_1.value);
tor_2 = Number(document.form1.tor_2.value);
tor_3 = Number(document.form1.tor_3.value);
tor_4 = Number(document.form1.tor_4.value);
tor_5 = Number(document.form1.tor_5.value);
tor_6 = Number(document.form1.tor_6.value);
tor_7 = Number(document.form1.tor_7.value);
tor_8 = Number(document.form1.tor_8.value);
tor_9 = Number(document.form1.tor_9.value);
tor_10 = Number(document.form1.tor_10.value);
tor_11 = Number(document.form1.tor_11.value);
fre_1 = Number(document.form1.fre_1.value);
fre_2 = Number(document.form1.fre_2.value);
fre_3 = Number(document.form1.fre_3.value);
fre_4 = Number(document.form1.fre_4.value);
fre_5 = Number(document.form1.fre_5.value);
fre_6 = Number(document.form1.fre_6.value);
fre_7 = Number(document.form1.fre_7.value);
fre_8 = Number(document.form1.fre_8.value);
fre_9 = Number(document.form1.fre_9.value);
fre_10 = Number(document.form1.fre_10.value);
fre_11 = Number(document.form1.fre_11.value);
lør_1 = Number(document.form1.lør_1.value);
lør_2 = Number(document.form1.lør_2.value);
lør_3 = Number(document.form1.lør_3.value);
lør_4 = Number(document.form1.lør_4.value);
lør_5 = Number(document.form1.lør_5.value);
lør_6 = Number(document.form1.lør_6.value);
lør_7 = Number(document.form1.lør_7.value);
lør_8 = Number(document.form1.lør_8.value);
lør_9 = Number(document.form1.lør_9.value);
lør_10 = Number(document.form1.lør_10.value);
lør_11 = Number(document.form1.lør_11.value);
søn_1 = Number(document.form1.søn_1.value);
søn_2 = Number(document.form1.søn_2.value);
søn_3 = Number(document.form1.søn_3.value);
søn_4 = Number(document.form1.søn_4.value);
søn_5 = Number(document.form1.søn_5.value);
søn_6 = Number(document.form1.søn_6.value);
søn_7 = Number(document.form1.søn_7.value);
søn_8 = Number(document.form1.søn_8.value);
søn_9 = Number(document.form1.søn_9.value);
søn_10 = Number(document.form1.søn_10.value);
søn_11 = Number(document.form1.søn_11.value);

oa_1 = Number(document.form1.oa_1.value);
oa_2 = Number(document.form1.oa_2.value);
oa_3 = Number(document.form1.oa_3.value);
oa_4 = Number(document.form1.oa_4.value);
oa_5 = Number(document.form1.oa_5.value);
oa_6 = Number(document.form1.oa_6.value);
oa_7 = Number(document.form1.oa_7.value);

total_1 = man_1 + man_2 + man_3 + man_4 + man_5 + man_6 + man_7 + man_8 + man_9 + man_10 + man_11;
total_2 = tir_1 + tir_2 + tir_3 + tir_4 + tir_5 + tir_6 + tir_7 + tir_8 + tir_9 + tir_10 + tir_11;
total_3 = ons_1 + ons_2 + ons_3 + ons_4 + ons_5 + ons_6 + ons_7 + ons_8 + ons_9 + ons_10 + ons_11;
total_4 = tor_1 + tor_2 + tor_3 + tor_4 + tor_5 + tor_6 + tor_7 + tor_8 + tor_9 + tor_10 + tor_11;
total_5 = fre_1 + fre_2 + fre_3 + fre_4 + fre_5 + fre_6 + fre_7 + fre_8 + fre_9 + fre_10 + fre_11;
total_6 = lør_1 + lør_2 + lør_3 + lør_4 + lør_5 + lør_6 + lør_7 + lør_8 + lør_9 + lør_10 +  lør_11;
total_7 = søn_1 + søn_2 + søn_3 + søn_4 + søn_5 + søn_6 + søn_7 + søn_8 + søn_9 + søn_10 +           søn_11;
samlet_1 = man_1 + tir_1 + ons_1 + tor_1 + fre_1 + lør_1 + søn_1;
samlet_2 = man_2 + tir_2 + ons_2 + tor_2 + fre_2 + lør_2 + søn_2;
samlet_3 = man_3 + tir_3 + ons_3 + tor_3 + fre_3 + lør_3 + søn_3;
samlet_4 = man_4 + tir_4 + ons_4 + tor_4 + fre_4 + lør_4 + søn_4;
samlet_5 = man_5 + tir_5 + ons_5 + tor_5 + fre_5 + lør_5 + søn_5;
samlet_6 = man_6 + tir_6 + ons_6 + tor_6 + fre_6 + lør_6 + søn_6;
samlet_7 = man_7 + tir_7 + ons_7 + tor_7 + fre_7 + lør_7 + søn_7;
samlet_8 = man_8 + tir_8 + ons_8 + tor_8 + fre_8 + lør_8 + søn_8;
samlet_9 = man_9 + tir_9 + ons_9 + tor_9 + fre_9 + lør_9 + søn_9;
samlet_10 = man_10 + tir_10 + ons_10 + tor_10 + fre_10 + lør_10 + søn_10;
samlet_11 = man_11 + tir_11 + ons_11 + tor_11 + fre_11 + lør_11 + søn_11;
samlet_12 = total_1 + total_2 + total_3 + total_4 + total_5 + total_6 + total_7;
samlet_13 = oa_1 + oa_2 + oa_3 + oa_4 + oa_5 + oa_6 + oa_7;

document.form1.total_1.value = total_1;
document.form1.total_2.value = total_2;
document.form1.total_3.value = total_3;
document.form1.total_4.value = total_4;
document.form1.total_5.value = total_5;
document.form1.total_6.value = total_6;
document.form1.total_7.value = total_7;
document.form1.samlet_1.value = samlet_1;
document.form1.samlet_2.value = samlet_2;
document.form1.samlet_3.value = samlet_3;
document.form1.samlet_4.value = samlet_4;
document.form1.samlet_5.value = samlet_5;
document.form1.samlet_6.value = samlet_6;
document.form1.samlet_7.value = samlet_7;
document.form1.samlet_8.value = samlet_8;
document.form1.samlet_9.value = samlet_9;
document.form1.samlet_10.value = samlet_10;
document.form1.samlet_11.value = samlet_11;
document.form1.samlet_12.value = samlet_12;
document.form1.samlet_13.value = samlet_13;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:01:40.203

要回答您的问题而不是尝试修复这个效率极低的脚本，请更改

```
man_1 = Number(document.form1.man_1.value) 
```

至

```
man_1 = getNumber(document.form1.man_1.value); 
```

并添加

```
function getNumber(str) {
  return isNaN(str)|| str==null?0:Number(str);
} 
```

并在所有其他日子重复

但请查看数组

我创建了一个包含以下代码的[小提琴](http://jsfiddle.net/mplungjan/VSGsL/)，我无法调试，因为我目前只有一个 iPad

```
var days = "man,tir,ons,tor,fre,lør,søn".split(",");
window.onload=function() {
  var content=document.getElementById("content");
  for (var i=0;i<days.length;i++) {
    content.innerHTML += '<br/>'+days[i]+'<br/>';
    for (var j=1;j<=11;j++) {
      content.innerHTML+='<input type="text" name="'+days[i]+"_"+j+'" onkeyup="total(this)"/>';
    }
    content.innerHTML+='<input type="text" readonly="readonly" name="total_'+(i+1)+'"/>';
  }
  content.innerHTML += '<br/>oa<br/>';
  for (var i=0;i<days.length;i++) {
    content.innerHTML+='<input type="text" name="oa_'+(i+1)+'"/>';
  }
  content.innerHTML += '<br/>samlet<br/>';
  for (var i=1;i<=13;i++) {
    content.innerHTML+='<input type="text" name="samlet_'+i+'"/>';
  }
}
function total(fld) {
  var form=fld.form,tot=0,sam=0,oa=0;
  for (var tot=0,i=0;i<days.length;i++) {
    for (var day=0,j=1;j<=11;j++) {
      day=getNum(form.elements[days[i]+'_'+j].value);
      tot+=day;
      form.elements["samlet_"+j].value=getNum(form.elements["samlet_"+j].value)+day;
    }
    form.elements["total_"+(i+1)].value=tot;
    var oaTot=tot>8?tot-8:0;
    var thisOa = getNum(form.elements["oa_"+i].value)+oaTot;
    sam+=tot;
    oa+=thisOa;;
  }
  form.elements["samlet_12"].value=sam;
  form.elements["samlet_13"].value=oa;
}
function getNum(str) {
  return str==null || str=="" || isNaN(str)?0:Number(str);
} 
```

# facebook - 无法在 facebook 上创建聚合？

> ID：15811444
> 
> 赞同：2
> 
> 时间：2013-04-04T12:39:18.903
> 
> 标签：facebook, facebook-graph-api, facebook-apps

我在 Facebook 上拥有开发者帐户。我已经在其中一个应用程序中实现 Facebook 图形 API 聚合，并且我尝试在另一个应用程序中使用和创建聚合的相同实现方法。但是在新的应用编辑部分中没有创建聚合的选项。
这该怎么做？？
附上两张图片供参考。
在第一个图像中它具有聚合选项，而在第二个图像中它没有它。
感谢您的帮助

![实施聚合](https://i.stack.imgur.com/SzlCH.png)

![未实现聚合](https://i.stack.imgur.com/Zce3Y.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T11:21:55.663

这可能是因为您可能没有定义任何 Open Graph Object 或 Action 类型。定义相同或创建一个故事，然后您可以选择聚合这些故事。

# java - 语法正确时 LIKE 在 MYSQL 中不起作用

> ID：15811445
> 
> 赞同：2
> 
> 时间：2013-04-04T12:39:22.550
> 
> 标签：java, mysql, sql

```
public ResultSet getResourcesById(String id, String type)
{
    try {
        conn = connect();
        selectStatement = "SELECT * FROM " + type + "WHERE ID LIKE ?";
        preparedStatement = conn.prepareStatement(selectStatement);
        preparedStatement.setString(1, "%ba%");
        res = preparedStatement.executeQuery();
        return res;

    } catch (SQLException ex) {
        Logger.getLogger(CatalogDB.class.getName()).log(Level.SEVERE, null, ex);
    }
    return null;
} 
```

大家好。我在我的系统中使用java。我试图输入一个任意字符串，但它一直告诉我这个错误：

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'LIKE '%ba%'' 附近使用正确的语法

有人可以向我解释为什么会出现这个错误，我很确定我正确地遵循了语法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T12:39:59.933

错误不在`LIKE`. `WHERE`您刚刚在子句之前错过了一个额外的空格。

```
selectStatement = "SELECT * FROM " + type + " WHERE ID LIKE ?";
                                             ^  add space here 
```

# sql - 与外键链接时展开数据

> ID：15811447
> 
> 赞同：1
> 
> 时间：2013-04-04T12:39:23.260
> 
> 标签：sql, sql-server

使用 Microsft SQL Server 2012 Management Studio，我有两个通过主键/外键链接列的表。

当我跑

```
SELECT * FROM tblCars 
```

你得到表格的结果。如何显示小加号，以便展开行并查看另一个表中的链接数据？我附上了一张显示加号的图片。我用红色添加了它们。

![图片](https://s7.postimg.org/3qsb4lukr/Capture.png)

谢谢！迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:29:49.120

据我所知，您无法做到这一点，并且在任何普通规模的真实商业数据库中，您都不想这样做。这最终可能会拉动数百万的记录！您可以通过运行带有连接的 SQL 语句来查看数据。并且由于您正在学习使用显式连接而不是隐式连接，并改掉编写 select * 的习惯。

示例查询类似于：

```
select a.carname, b.partname
from cars a
join parts b on a.carid = b.carid 
```

# php - 非对象错误上的成员函数 bind_param()

> ID：15811452
> 
> 赞同：0
> 
> 时间：2013-04-04T12:39:30.043
> 
> 标签：php, function

我特别傻眼。问题是什么？[我已经从http://www.php.net/manual/en/mysqli-stmt.bind-param.php](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)复制了默认的 PHP OOS ，它一直在抛出错误。

```
<?php
$mysqli = new mysqli('localhost', 'root', 'hidden', 'hidden');

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$stmt = $mysqli->prepare("INSERT INTO users VALUES (?, ?)");
$stmt->bind_param('ss', $name, $password);

$name = "Test";
$password = "Test";

/* execute prepared statement */
$stmt->execute();

printf("%d Row inserted.\n", $stmt->affected_rows);

/* close statement and connection */
$stmt->close();

/* close connection */
$mysqli->close();
?> 
```

> 致命错误：在第 11 行的 C:\xampp\htdocs\cms\index.php 中的非对象上调用成员函数 bind_param()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:41:41.420

更改这些行：（当您将 2 个字符串参数插入用户表时）

```
$stmt = $mysqli->prepare("INSERT INTO users VALUES (?, ?)");
$stmt->bind_param('sssd', $name, $password); 
```

with : (我假设你必须插入名称和密码字段...如果没有，请使用你的适当字段名称作为名称和密码)

```
if (!($stmt = $mysqli->prepare("INSERT INTO users(name,password) VALUES (?, ?)"))) {
    echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
}
$stmt->bind_param('ss', $name, $password); 
```

# xml - 使用 CXF 动态客户端记录请求/响应

> ID：15811455
> 
> 赞同：0
> 
> 时间：2013-04-04T12:39:43.610
> 
> 标签：xml, logging, soap, cxf, interceptor

我正在使用 CXF 动态客户端并想做一些日志记录。我想记录传入和传出的soap xml。我需要使用拦截器来做到这一点，但不知道如何连接它们，以便客户端使用它。

示例代码：

```
 MyWebservice ws = new MyWebservice_Service().getChargePointServiceSoap12(); 
```

如何向此客户端添加拦截器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T02:41:01.647

要输出消息，请创建一个拦截器，如下所示：

```
import java.io.InputStream;

import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.interceptor.Fault;
import org.apache.cxf.message.Message;
import org.apache.cxf.phase.AbstractPhaseInterceptor;
import org.apache.cxf.phase.Phase;

public class LogInterceptor extends AbstractPhaseInterceptor<Message> {

    public LogInterceptor() {
        super(Phase.PRE_INVOKE);
    }

    @Override
    public void handleMessage(Message message) throws Fault {
        InputStream contentInputStream = message.get(InputStream.class);
        // Do whatever you want with the content (the soap xml)
    }

    public void addInterceptor(Object portType) {
        Client client = ClientProxy.getClient(portType);
        client.getInInterceptors().add(this);
    }
} 
```

您的代码应该调用 addInterceptor：

```
MyWebservice ws = new MyWebservice_Service().getChargePointServiceSoap12();
LogInterceptor logInterceptor = new LogInterceptor();
logInterceptor.addInterceptor(ws); 
```

最后，对于收入消息，您更改拦截器构造函数的阶段。

文档：[http ://cxf.apache.org/docs/interceptors.html](http://cxf.apache.org/docs/interceptors.html)

# c# - 在一组单元格周围绘制刻度边框（TableLayoutPanel C#）

> ID：15811456
> 
> 赞同：1
> 
> 时间：2013-04-04T12:39:45.090
> 
> 标签：c#, border, tablelayout, cells, sudoku

我正在 Windows 窗体应用程序中制作数独字段（c#）

我已经使用 TableLayout 来制作我的盒子来为数独中显示的数字放置标签，现在我需要在每组 3x3 单元格（如数独）周围设置一个粗边框......

我正在尝试使用 CellPaint 对象，但我无法在一组边框周围设置边框......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:48:40.283

您可以尝试在左上角单元格中添加一个面板并将其 RowSpan 和 ColSpan 设置为 3。之后您可以在其上绘制任何边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:14:08.330

第1步

*   创建用户控件
*   将背景设置为黑色，边距设置为 0、0、0、0，将填充设置为 3、3、3、3
*   添加一个具有 3 行和 3 个单元格的 TableLayoutControl（每个 33%）
*   将 TableLayoutControl Dock 设置为 Fill 并将 BackColor 设置为 Black
*   为每个单元格添加标签，边距 1，背景色白色

第2步

*   创建另一个具有 3x3 单元格的 UserControl（每个 33%）
*   将您的第一个 UserControl 的实例添加到每个单元格
*   现在您有两个控件彼此相邻的双边框，但是您可以通过为单个用户控件设置填充来轻松调整它。我建议您将中间的那个保留为 3, 3, 3, 3 并修改外部控件

这是一个示例，左边是 UserControl1，右边是带有 9x UserControl1 的 UserControl2
我在外侧使用填充 4，在内侧使用填充 2。

![样本](https://i.stack.imgur.com/bBF2u.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T16:47:49.613

我们不得不更改制作标签的代码，并且正在这样做......

```
    常量 int 间距 = 30; //ruimte tussen kotjes
                    int aantal = (int)nudColsPerBlock.Value * (int)nudRowsPerBlock.Value; //每 rij/kolom 的总 aantal kotjes
                    标签[][] SudokuRaster = 新标签[aantal][];
                    对于 (int x = 0; x
```

但是我仍然需要一些标签之间的粗边框，有什么提示吗？

# iphone - IOS GooglePlus 迭代错误

> ID：15811458
> 
> 赞同：0
> 
> 时间：2013-04-04T12:39:51.097
> 
> 标签：iphone, ios, ipad, ios5

使用 app 为 lgoin 添加 google plus sdk 时出现编译错误。此帖子附有屏幕截图。![在此处输入图像描述](https://i.stack.imgur.com/wqW8U.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:14:28.973

根据您的描述，您将 GooglePlus 第三方库包含到您的项目文件中。所以你必须将库路径设置为项目设置。

```
Step to edit project Setting:

1) Select your project at top -> Target -> Build setting-> Search path -> library search path

2)double click on Library search Path -> click + -> "$(SRCROOT)/ThirdPartyLibraryFolderName") 
```

`Note:`右键单击项目文件并选择在查找器中打开。这个打开的文件是一个根目录。例如，这个打开的文件夹有 ShaDevice/GooglePlus/libGooglePlus.a 之类的文件夹，你必须将库路径设置为`"$(SRCROOT)/ShaDevice/GooglePlus/"`

# r - 使用 R 的偏最小二乘回归

> ID：15811462
> 
> 赞同：0
> 
> 时间：2013-04-04T12:39:57.627
> 
> 标签：r, statistics

我是 R 新手。我想使用“pls”包对我的数据进行偏最小二乘分析。

数据信息是设计元素，无论是否存在，在0和1中，最后一列包含情感分数。我想找到有助于情感的设计元素。

从我在互联网上找到的例子，我需要打电话

```
> plsr(density ~ NIR, 6, data=yarn, validation="CV") 
```

当我尝试这个时：

> 请（密度〜近红外，6，数据=我的数据，验证=“CV”）

我收到此错误：

```
Error: object 'NIR' not found 
```

如何使用我的数据正确调用函数？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:31:58.593

This works for me (I downloaded your pastebin and saved it as a file called "junk.dat")

```
dat <- read.csv("junk.dat")
library("pls")
summary(plsr(Adorable~.,data=dat)) 
```

The formula `Adorable~.` says that `Adorable` (your last column name) is the response variable and that all of the remaining columns in the data frame should be used as predictors.

# sencha-touch-2 - 在 Sencha Touch 2 中处理滑动事件

> ID：15811465
> 
> 赞同：7
> 
> 时间：2013-04-04T12:39:59.617
> 
> 标签：sencha-touch-2, carousel, swipe

我在 Sencha Touch 2 中使用轮播。如何处理向左滑动和向右滑动事件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T13:34:52.323

一种方法是监听轮播项目上的[滑动](http://docs.sencha.com/touch/2-1/#!/api/Ext.dom.Element-event-swipe)事件，同时使用 [Ext.event.Event.direction](http://docs.sencha.com/touch/2-1/#!/api/Ext.event.Event-property-direction)来处理滑动的方向：

```
listeners: {
    initialize: function(c) {
        this.element.on({
            swipe: function(e, node, options) {
                if(e.direction == "left") {
                    alert("Hey! I swipe left");
                } else {
                    alert("Hey! I swipe right");
                }
            }
        });
    }
} 
```

工作演示：[http ://www.senchafiddle.com/#TLBZB](http://www.senchafiddle.com/#TLBZB)

# javascript - 使用 video-js 设置链接以在不同时间播放视频

> ID：15811470
> 
> 赞同：3
> 
> 时间：2013-04-04T12:40:14.863
> 
> 标签：javascript, video, video.js

我正在尝试设置侧面导航以在网页上的不同时间播放主要功能视频。

这是我不工作的代码，显然我使用的是 video.js 插件，并且没有这个侧面导航它工作得很好。

HTML

```
<video id="myVideo" class="video-js vjs-default-skin box" controls preload="none" width="720" height="540" poster="images/myPoster.jpg" data-setup="{}">
  <source src="myVideo.mp4" type='video/mp4'>
  <source src="myVideo.oggtheora.ogv" type='video/ogg'> 
</video>

<a onClick="introduction()">Introduction</a>
<a onClick="chapertOne()">Chapter One</a> 
```

JS

```
<script type="text/javascript">
 var myPlayer = _V_("myVideo");
   function(introduction){
 // Do something when the event is fired
    myPlayer.currentTime(120); // 2 minutes into the video
    myPlayer.play();
};
</script>

 <script type="text/javascript">
 var myPlayer = _V_("myVideo");
   function(chapterOne){
 // Do something when the event is fired
    myPlayer.currentTime(440); // 4 minutes into the video
    myPlayer.play();
};
</script>
... 
```

代码不起作用。当我按下链接时没有任何反应。你认为这是因为它是一部很长的电影（大约10m）。我也在考虑将电影分成几章，然后每个链接加载一章。您认为正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:18:14.507

`function(chapterOne){ ... }`此代码创建未分配给任何变量的匿名函数。所以也许你应该试试这个：

```
<script type="text/javascript">
    var myPlayer = _V_("myVideo");

    function introduction() {
        // Do something when the event is fired
        myPlayer.currentTime(120); // 2 minutes into the video
        myPlayer.play();
    };

    function chapterOne() {
        // Do something when the event is fired
        myPlayer.currentTime(440); // 4 minutes into the video
        myPlayer.play();
    };
</script> 
```

`onClick`还将属性更改为`onclick`

# java - 水平冻结一个表格列

> ID：15811472
> 
> 赞同：1
> 
> 时间：2013-04-04T12:40:17.740
> 
> 标签：java, android, scroll, tableview, horizontalscrollview

我有一个活动，其中我实现了一个表格视图，表格视图有一个标题和一个正文，表格可以水平和垂直滚动。

这是**活动的源代码**：

```
public class ReportListActivity extends Activity {

    TableLayout report_table;
    TableRow tr_data;

    int j = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_report_list);

        report_table=(TableLayout) findViewById(R.id.report_table);

        //---------------Table Header-----------------------------------------------
        TableRow tr_head = new TableRow(this);
        tr_head.setId(10);
        tr_head.setBackgroundColor(Color.GRAY);
        tr_head.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));

        TextView label_sr_no = new TextView(this);
        label_sr_no.setId(20);
        label_sr_no.setText("S.No.");
        label_sr_no.setTextColor(Color.WHITE);
        label_sr_no.setPadding(5,5,5,5);
        tr_head.addView(label_sr_no);// add the column to the table row here

        TextView label_test_name = new TextView(this);
        label_test_name.setId(21);// define id that must be unique
        label_test_name.setText("Test Name"); // set the text for the header 
        label_test_name.setTextColor(Color.WHITE); // set the color
        label_test_name.setPadding(5,5,5,5); // set the padding (if required)
        tr_head.addView(label_test_name); // add the column to the table row here

        TextView label_test_date = new TextView(this);
        label_test_date.setId(21);// define id that must be unique
        label_test_date.setText("Date"); // set the text for the header 
        label_test_date.setTextColor(Color.WHITE); // set the color
        label_test_date.setPadding(5,5,5,5); // set the padding (if required)
        tr_head.addView(label_test_date); // add the column to the table row here

        TextView label_ro = new TextView(this);
        label_ro.setId(21);// define id that must be unique
        label_ro.setText("R.O."); // set the text for the header 
        label_ro.setTextColor(Color.WHITE); // set the color
        label_ro.setPadding(5,5,5,5); // set the padding (if required)
        tr_head.addView(label_ro); // add the column to the table row here

        TextView label_wo = new TextView(this);
        label_wo.setId(21);// define id that must be unique
        label_wo.setText("W.O."); // set the text for the header 
        label_wo.setTextColor(Color.WHITE); // set the color
        label_wo.setPadding(5,5,5,5); // set the padding (if required)
        tr_head.addView(label_wo); // add the column to the table row here

        TextView label_lo = new TextView(this);
        label_lo.setId(21);// define id that must be unique
        label_lo.setText("L.O."); // set the text for the header 
        label_lo.setTextColor(Color.WHITE); // set the color
        label_lo.setPadding(5,5,5,5); // set the padding (if required)
        tr_head.addView(label_lo); // add the column to the table row here

        TextView label_max = new TextView(this);
        label_max.setId(21);// define id that must be unique
        label_max.setText("Max."); // set the text for the header 
        label_max.setTextColor(Color.WHITE); // set the color
        label_max.setPadding(5,5,5,5); // set the padding (if required)
        tr_head.addView(label_max); // add the column to the table row here

        TextView label_tm = new TextView(this);
        label_tm.setId(21);// define id that must be unique
        label_tm.setText("T.M."); // set the text for the header 
        label_tm.setTextColor(Color.WHITE); // set the color
        label_tm.setPadding(5,5,5,5); // set the padding (if required)
        tr_head.addView(label_tm); // add the column to the table row here

        TextView label_rank = new TextView(this);
        label_rank.setId(21);// define id that must be unique
        label_rank.setText("Rank"); // set the text for the header 
        label_rank.setTextColor(Color.WHITE); // set the color
        label_rank.setPadding(5,5,5,5); // set the padding (if required)
        tr_head.addView(label_rank); // add the column to the table row here

        report_table.addView(tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

      //---------------Table Header-----------------------------------------------

        //--------------------Table Body---------------------------
        for (int i=1; i<=10; i++)
        {
            tr_data = new TableRow(this);
            tr_data.setId(10);
            tr_data.setBackgroundColor(Color.TRANSPARENT);
            tr_data.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));

            final TextView sr_no = new TextView(this);
            sr_no.setId(20);
            sr_no.setText(""+i);
            sr_no.setTextColor(Color.BLACK);
            sr_no.setPadding(5,5,5,5);
            tr_data.addView(sr_no);// add the column to the table row here

            final TextView test_name = new TextView(this);
            test_name.setId(21);// define id that must be unique
            test_name.setText("Speed Test 60(min) Demo-ST-01"); // set the text for the header 
            test_name.setTextColor(Color.BLACK); // set the color
            test_name.setPadding(5,5,5,5); // set the padding (if required)
            tr_data.addView(test_name); // add the column to the table row here

            final TextView test_date = new TextView(this);
            test_date.setId(21);// define id that must be unique
            test_date.setText("12 Mar 2013"); // set the text for the header 
            test_date.setTextColor(Color.BLACK); // set the color
            test_date.setPadding(5,5,5,5); // set the padding (if required)
            tr_data.addView(test_date); // add the column to the table row here

            final TextView test_ro = new TextView(this);
            test_ro.setId(21);// define id that must be unique
            test_ro.setText("2"); // set the text for the header 
            test_ro.setTextColor(Color.BLACK); // set the color
            test_ro.setPadding(5,5,5,5); // set the padding (if required)
            tr_data.addView(test_ro); // add the column to the table row here

            final TextView test_wo = new TextView(this);
            test_wo.setId(21);// define id that must be unique
            test_wo.setText("3"); // set the text for the header 
            test_wo.setTextColor(Color.BLACK); // set the color
            test_wo.setPadding(5,5,5,5); // set the padding (if required)
            tr_data.addView(test_wo); // add the column to the table row here

            final TextView test_lo = new TextView(this);
            test_lo.setId(21);// define id that must be unique
            test_lo.setText("85"); // set the text for the header 
            test_lo.setTextColor(Color.BLACK); // set the color
            test_lo.setPadding(5,5,5,5); // set the padding (if required)
            tr_data.addView(test_lo); // add the column to the table row here

            final TextView test_max = new TextView(this);
            test_max.setId(21);// define id that must be unique
            test_max.setText("101"); // set the text for the header 
            test_max.setTextColor(Color.BLACK); // set the color
            test_max.setPadding(5,5,5,5); // set the padding (if required)
            tr_data.addView(test_max); // add the column to the table row here

            final TextView test_tm = new TextView(this);
            test_tm.setId(21);// define id that must be unique
            test_tm.setText("-1.5"); // set the text for the header 
            test_tm.setTextColor(Color.BLACK); // set the color
            test_tm.setPadding(5,5,5,5); // set the padding (if required)
            tr_data.addView(test_tm); // add the column to the table row here

            final TextView test_rank = new TextView(this);
            test_rank.setId(21);// define id that must be unique
            test_rank.setText("5810"); // set the text for the header 
            test_rank.setTextColor(Color.BLACK); // set the color
            test_rank.setPadding(5,5,5,5); // set the padding (if required)
            tr_data.addView(test_rank); // add the column to the table row here

            final TextView test_exam_set = new TextView(this);
            test_exam_set.setId(21);// define id that must be unique
            test_exam_set.setText("123456"); // set the text for the header
            test_exam_set.setTextSize((float) 0.01);
            test_exam_set.setTextColor(Color.TRANSPARENT); // set the color
            test_exam_set.setPadding(5,5,5,5); // set the padding (if required)
            tr_data.addView(test_exam_set); // add the column to the table row here

            report_table.addView(tr_data, new TableLayout.LayoutParams(
                    LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));

            //----------------------On click table row---------------------------------------

            tr_data.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

//                  Toast.makeText(getApplicationContext(), test_name.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), test_date.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), sr_no.getText().toString(), Toast.LENGTH_LONG).show();
                    //Toast.makeText(getApplicationContext(), test_exam_set.getText().toString(), Toast.LENGTH_LONG).show();

                    Intent intent = new Intent(ReportListActivity.this, ReportListDetailsActivity.class);
                    finish();
                    ReportListActivity.this.startActivity(intent);
                }
            });
            //----------------------On click table row---------------------------------------

        }

      //--------------------Table Body---------------------------

    }
    //onclick device back button
    @Override
    public void onBackPressed() {
        // do something on back.

        Intent intent = new Intent(ReportListActivity.this, TakeTestActivity.class);
        finish();
        ReportListActivity.this.startActivity(intent);
        return;
    }

  //method to show toast message
        public void makeAToast(String str) {
            //yet to implement
            Toast toast = Toast.makeText(this,str, Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();
        }
} 
```

这是**布局文件**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".ReportListActivity" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

         <HorizontalScrollView
                    android:id="@+id/horizontalScrollView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TableLayout
                    android:shrinkColumns="0,1,2,3,4,5,6,7,8,9"
                    android:id="@+id/report_table" android:layout_weight="1" android:layout_height="wrap_content" android:layout_width="match_parent">

            </TableLayout>

        </RelativeLayout>
         </HorizontalScrollView>

    </ScrollView>

</RelativeLayout> 
```

**表格可以水平和垂直滚动。**

**如果水平滚动，这就是现在的样子：**

滚动位置 1： ![滚动位置 1](https://i.stack.imgur.com/Mg8IX.png)

滚动位置 2： ![滚动位置 2](https://i.stack.imgur.com/ypEhA.png)

**我想要的是，如果表格水平滚动，S.No. 列应该被冻结，其余的应该滚动。表头也应该发生同样的情况。我应该如何实现这一目标？**

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:39:45.793

问题已经解决了...............

**活动源代码：**

```
public class ReportListActivity extends Activity {

    TableLayout srno_table;
    TableRow srno_report_tr_data;

    TableLayout report_table;
    TableRow report_tr_data;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_report_list);

        srno_table=(TableLayout) findViewById(R.id.srno_table);

        //---------------Serial no Table Header-----------------------------------------------
        TableRow srno_tr_head = new TableRow(this);
        srno_tr_head.setId(10);
        srno_tr_head.setBackgroundColor(Color.GRAY);
        srno_tr_head.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));

        TextView label_sr_no = new TextView(this);
        label_sr_no.setId(20);
        label_sr_no.setText("S.No.");
        label_sr_no.setTextColor(Color.WHITE);
        label_sr_no.setPadding(5,5,5,5);
        srno_tr_head.addView(label_sr_no);// add the column to the table row here
        label_sr_no.setTextSize(20);    

        srno_table.addView(srno_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

      //---------------Serial no Table Header-----------------------------------------------

        report_table=(TableLayout) findViewById(R.id.report_table);

        //---------------report Table Header-----------------------------------------------
        TableRow report_tr_head = new TableRow(this);
        report_tr_head.setId(10);
        report_tr_head.setBackgroundColor(Color.GRAY);
        report_tr_head.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));

        TextView label_test_name = new TextView(this);
        label_test_name.setId(20);
        label_test_name.setText("Test Name");
        label_test_name.setTextColor(Color.WHITE);
        label_test_name.setPadding(5,5,5,5);
        report_tr_head.addView(label_test_name);// add the column to the table row here
        label_test_name.setTextSize(20);    

        TextView label_test_date = new TextView(this);
        label_test_date.setId(21);// define id that must be unique
        label_test_date.setText("Date"); // set the text for the header 
        label_test_date.setTextColor(Color.WHITE); // set the color
        label_test_date.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_test_date); // add the column to the table row here
        label_test_date.setTextSize(20);

        TextView label_ro = new TextView(this);
        label_ro.setId(21);// define id that must be unique
        label_ro.setText("R.O."); // set the text for the header 
        label_ro.setTextColor(Color.WHITE); // set the color
        label_ro.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_ro); // add the column to the table row here
        label_ro.setTextSize(20);

        TextView label_wo = new TextView(this);
        label_wo.setId(21);// define id that must be unique
        label_wo.setText("W.O."); // set the text for the header 
        label_wo.setTextColor(Color.WHITE); // set the color
        label_wo.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_wo); // add the column to the table row here
        label_wo.setTextSize(20);

        TextView label_lo = new TextView(this);
        label_lo.setId(21);// define id that must be unique
        label_lo.setText("L.O."); // set the text for the header 
        label_lo.setTextColor(Color.WHITE); // set the color
        label_lo.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_lo); // add the column to the table row here
        label_lo.setTextSize(20);

        TextView label_max = new TextView(this);
        label_max.setId(21);// define id that must be unique
        label_max.setText("Max."); // set the text for the header 
        label_max.setTextColor(Color.WHITE); // set the color
        label_max.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_max); // add the column to the table row here
        label_max.setTextSize(20);

        TextView label_tm = new TextView(this);
        label_tm.setId(21);// define id that must be unique
        label_tm.setText("T.M."); // set the text for the header 
        label_tm.setTextColor(Color.WHITE); // set the color
        label_tm.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_tm); // add the column to the table row here
        label_tm.setTextSize(20);

        TextView label_rank = new TextView(this);
        label_rank.setId(21);// define id that must be unique
        label_rank.setText("Rank"); // set the text for the header 
        label_rank.setTextColor(Color.WHITE); // set the color
        label_rank.setPadding(5,5,5,5); // set the padding (if required)
        report_tr_head.addView(label_rank); // add the column to the table row here
        label_rank.setTextSize(20);

        report_table.addView(report_tr_head, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

      //---------------Serial no Table Header-----------------------------------------------

        //--------------------Sr No Table Body---------------------------
        for (int i=1; i<=10; i++)
        {
            srno_report_tr_data = new TableRow(this);
            srno_report_tr_data.setId(10);
            srno_report_tr_data.setBackgroundColor(Color.TRANSPARENT);
            srno_report_tr_data.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));

            final TextView sr_no = new TextView(this);
            sr_no.setId(20);
            sr_no.setText(""+i);
            sr_no.setTextColor(Color.BLACK);
            sr_no.setPadding(5,5,5,5);
            srno_report_tr_data.addView(sr_no);// add the column to the table row here

            srno_table.addView(srno_report_tr_data, new TableLayout.LayoutParams(
                    LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));

            //----------------------On click table row---------------------------------------

            srno_report_tr_data.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

//                  Toast.makeText(getApplicationContext(), test_name.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), test_date.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), sr_no.getText().toString(), Toast.LENGTH_LONG).show();
                    //Toast.makeText(getApplicationContext(), test_exam_set.getText().toString(), Toast.LENGTH_LONG).show();

//                  Intent intent = new Intent(ReportListActivity.this, ReportListDetailsActivity.class);
//                  finish();
//                  ReportListActivity.this.startActivity(intent);
                }
            });
            //----------------------On click table row---------------------------------------

        }

      //--------------------Sr No Table Body Table Body---------------------------

        //=================Report table body============================

        for (int i=1; i<=10; i++)
        {
            report_tr_data=new TableRow(this);
            report_tr_data.setId(10);
            report_tr_data.setBackgroundColor(Color.TRANSPARENT);
            report_tr_data.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));

            final TextView test_name = new TextView(this);
            test_name.setId(20);
            test_name.setText("Speed Test 60(min) Demo-ST-01");
            test_name.setTextColor(Color.BLACK);
            test_name.setPadding(5,5,5,5);
            report_tr_data.addView(test_name);// add the column to the table row here

            final TextView test_date = new TextView(this);
            test_date.setId(21);// define id that must be unique
            test_date.setText("12 Mar 2013"); // set the text for the header 
            test_date.setTextColor(Color.BLACK); // set the color
            test_date.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_date); // add the column to the table row here

            final TextView test_ro = new TextView(this);
            test_ro.setId(21);// define id that must be unique
            test_ro.setText("2"); // set the text for the header 
            test_ro.setTextColor(Color.BLACK); // set the color
            test_ro.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_ro); // add the column to the table row here

            final TextView test_wo = new TextView(this);
            test_wo.setId(21);// define id that must be unique
            test_wo.setText("3"); // set the text for the header 
            test_wo.setTextColor(Color.BLACK); // set the color
            test_wo.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_wo); // add the column to the table row here

            final TextView test_lo = new TextView(this);
            test_lo.setId(21);// define id that must be unique
            test_lo.setText("85"); // set the text for the header 
            test_lo.setTextColor(Color.BLACK); // set the color
            test_lo.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_lo); // add the column to the table row here

            final TextView test_max = new TextView(this);
            test_max.setId(21);// define id that must be unique
            test_max.setText("101"); // set the text for the header 
            test_max.setTextColor(Color.BLACK); // set the color
            test_max.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_max); // add the column to the table row here

            final TextView test_tm = new TextView(this);
            test_tm.setId(21);// define id that must be unique
            test_tm.setText("-1.5"); // set the text for the header 
            test_tm.setTextColor(Color.BLACK); // set the color
            test_tm.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_tm); // add the column to the table row here

            final TextView test_rank = new TextView(this);
            test_rank.setId(21);// define id that must be unique
            test_rank.setText("5810"); // set the text for the header 
            test_rank.setTextColor(Color.BLACK); // set the color
            test_rank.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_rank); // add the column to the table row here

            final TextView test_exam_set = new TextView(this);
            test_exam_set.setId(21);// define id that must be unique
            test_exam_set.setText("123456"); // set the text for the header
            test_exam_set.setTextSize((float) 0.01);
            test_exam_set.setTextColor(Color.TRANSPARENT); // set the color
            test_exam_set.setPadding(5,5,5,5); // set the padding (if required)
            report_tr_data.addView(test_exam_set); // add the column to the table row here

            report_table.addView(report_tr_data, new TableLayout.LayoutParams(
                     LayoutParams.FILL_PARENT,
                     LayoutParams.WRAP_CONTENT));

//----------------------On click table row---------------------------------------

            report_tr_data.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    Toast.makeText(getApplicationContext(), test_name.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), test_date.getText().toString(), Toast.LENGTH_LONG).show();
//                  Toast.makeText(getApplicationContext(), sr_no.getText().toString(), Toast.LENGTH_LONG).show();
                    Toast.makeText(getApplicationContext(), test_exam_set.getText().toString(), Toast.LENGTH_LONG).show();

//                  Intent intent = new Intent(ReportListActivity.this, ReportListDetailsActivity.class);
//                  finish();
//                  ReportListActivity.this.startActivity(intent);
                }
            });
            //----------------------On click table row---------------------------------------

        }

      //=================Report table body============================

    }
    //onclick device back button
    @Override
    public void onBackPressed() {
        // do something on back.

        Intent intent = new Intent(ReportListActivity.this, TakeTestActivity.class);
        finish();
        ReportListActivity.this.startActivity(intent);
        return;
    }

  //method to show toast message
        public void makeAToast(String str) {
            //yet to implement
            Toast toast = Toast.makeText(this,str, Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();
        }
} 
```

**布局文件代码：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".ReportListActivity" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <RelativeLayout
                android:id="@+id/relativeLayout1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true" >

                <TableLayout
                    android:id="@+id/srno_table"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true" >
                </TableLayout>
            </RelativeLayout>

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/relativeLayout1" >
                <HorizontalScrollView
                android:id="@+id/horizontalScrollView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/relativeLayout1" >

                    <TableLayout
                        android:id="@+id/report_table"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

                    </TableLayout>

            </HorizontalScrollView>
            </RelativeLayout>

        </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

**屏幕截图：**

![1](https://i.stack.imgur.com/EkqLv.png)

![2](https://i.stack.imgur.com/TmXdY.png)

![3](https://i.stack.imgur.com/alJ7Z.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T07:10:19.350

**activity_main.xml**

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TableLayout
                android:id="@+id/report_table1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:shrinkColumns="0" >

                <TableRow>

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="5dip"
                        android:text="S.No" />
                </TableRow>
            </TableLayout>
        </RelativeLayout>
    </HorizontalScrollView>
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <HorizontalScrollView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TableLayout
                android:id="@+id/report_table"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <TableRow>

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="5dip"
                        android:text="Test name" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="5dip"
                        android:text="Date" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="5dip"
                        android:text="R.O" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="5dip"
                        android:text="W.O" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="5dip"
                        android:text="L.O" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="5dip"
                        android:text="Max." />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="5dip"
                        android:text="T.M." />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="5dip"
                        android:text="Rank" />
                </TableRow>
            </TableLayout>
        </HorizontalScrollView>
    </ScrollView>
</LinearLayout> 
```

**MainActivity.java**

公共类 MainActivity 扩展 Activity {

```
TableLayout report_table, report_table1;
TableRow tr_data, tr_data1;

int j = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    report_table = (TableLayout) findViewById(R.id.report_table);
    report_table1 = (TableLayout) findViewById(R.id.report_table1);

    // ---------------Table
    // Header-----------------------------------------------
    TableRow tr_head = new TableRow(this);
    tr_head.setId(10);
    tr_head.setBackgroundColor(Color.GRAY);
    tr_head.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));

    /*
     * TextView label_sr_no = new TextView(this); label_sr_no.setId(20);
     * label_sr_no.setText("S.No."); label_sr_no.setTextColor(Color.WHITE);
     * label_sr_no.setPadding(5,5,5,5); tr_head.addView(label_sr_no);// add
     * the column to the table row here
     * 
     * TextView label_test_name = new TextView(this);
     * label_test_name.setId(21);// define id that must be unique
     * label_test_name.setText("Test Name"); // set the text for the header
     * label_test_name.setTextColor(Color.WHITE); // set the color
     * label_test_name.setPadding(5,5,5,5); // set the padding (if required)
     * tr_head.addView(label_test_name); // add the column to the table row
     * here
     * 
     * TextView label_test_date = new TextView(this);
     * label_test_date.setId(21);// define id that must be unique
     * label_test_date.setText("Date"); // set the text for the header
     * label_test_date.setTextColor(Color.WHITE); // set the color
     * label_test_date.setPadding(5,5,5,5); // set the padding (if required)
     * tr_head.addView(label_test_date); // add the column to the table row
     * here
     * 
     * TextView label_ro = new TextView(this); label_ro.setId(21);// define
     * id that must be unique label_ro.setText("R.O."); // set the text for
     * the header label_ro.setTextColor(Color.WHITE); // set the color
     * label_ro.setPadding(5,5,5,5); // set the padding (if required)
     * tr_head.addView(label_ro); // add the column to the table row here
     * 
     * TextView label_wo = new TextView(this); label_wo.setId(21);// define
     * id that must be unique label_wo.setText("W.O."); // set the text for
     * the header label_wo.setTextColor(Color.WHITE); // set the color
     * label_wo.setPadding(5,5,5,5); // set the padding (if required)
     * tr_head.addView(label_wo); // add the column to the table row here
     * 
     * TextView label_lo = new TextView(this); label_lo.setId(21);// define
     * id that must be unique label_lo.setText("L.O."); // set the text for
     * the header label_lo.setTextColor(Color.WHITE); // set the color
     * label_lo.setPadding(5,5,5,5); // set the padding (if required)
     * tr_head.addView(label_lo); // add the column to the table row here
     * 
     * TextView label_max = new TextView(this); label_max.setId(21);//
     * define id that must be unique label_max.setText("Max."); // set the
     * text for the header label_max.setTextColor(Color.WHITE); // set the
     * color label_max.setPadding(5,5,5,5); // set the padding (if required)
     * tr_head.addView(label_max); // add the column to the table row here
     * 
     * TextView label_tm = new TextView(this); label_tm.setId(21);// define
     * id that must be unique label_tm.setText("T.M."); // set the text for
     * the header label_tm.setTextColor(Color.WHITE); // set the color
     * label_tm.setPadding(5,5,5,5); // set the padding (if required)
     * tr_head.addView(label_tm); // add the column to the table row here
     * 
     * TextView label_rank = new TextView(this); label_rank.setId(21);//
     * define id that must be unique label_rank.setText("Rank"); // set the
     * text for the header label_rank.setTextColor(Color.WHITE); // set the
     * color label_rank.setPadding(5,5,5,5); // set the padding (if
     * required) tr_head.addView(label_rank); // add the column to the table
     * row here
     * 
     * report_table.addView(tr_head, new TableLayout.LayoutParams(
     * LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
     */

    // ---------------Table
    // Header-----------------------------------------------

    // --------------------Table Body---------------------------
    for (int i = 1; i <= 15; i++) {
        tr_data = new TableRow(this);
        tr_data.setId(10);
        tr_data.setBackgroundColor(Color.TRANSPARENT);
        tr_data.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        tr_data1 = new TableRow(this);
        tr_data1.setId(10);
        tr_data1.setBackgroundColor(Color.TRANSPARENT);
        tr_data1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        final TextView sr_no = new TextView(this);
        sr_no.setId(20);
        sr_no.setText("" + i);
        sr_no.setTextColor(Color.BLACK);
        sr_no.setPadding(5, 5, 5, 5);
        tr_data1.addView(sr_no);// add the column to the table row here

        final TextView test_name = new TextView(this);
        test_name.setId(21);// define id that must be unique
        test_name.setText("Speed Test 60(min) Demo-ST-01"); // set the text
                                                            // for the
                                                            // header
        test_name.setTextColor(Color.BLACK); // set the color
        test_name.setPadding(5, 5, 5, 5); // set the padding (if required)
        tr_data.addView(test_name); // add the column to the table row here

        final TextView test_date = new TextView(this);
        test_date.setId(21);// define id that must be unique
        test_date.setText("12 Mar 2013"); // set the text for the header
        test_date.setTextColor(Color.BLACK); // set the color
        test_date.setPadding(5, 5, 5, 5); // set the padding (if required)
        tr_data.addView(test_date); // add the column to the table row here

        final TextView test_ro = new TextView(this);
        test_ro.setId(21);// define id that must be unique
        test_ro.setText("2"); // set the text for the header
        test_ro.setTextColor(Color.BLACK); // set the color
        test_ro.setPadding(5, 5, 5, 5); // set the padding (if required)
        tr_data.addView(test_ro); // add the column to the table row here

        final TextView test_wo = new TextView(this);
        test_wo.setId(21);// define id that must be unique
        test_wo.setText("3"); // set the text for the header
        test_wo.setTextColor(Color.BLACK); // set the color
        test_wo.setPadding(5, 5, 5, 5); // set the padding (if required)
        tr_data.addView(test_wo); // add the column to the table row here

        final TextView test_lo = new TextView(this);
        test_lo.setId(21);// define id that must be unique
        test_lo.setText("85"); // set the text for the header
        test_lo.setTextColor(Color.BLACK); // set the color
        test_lo.setPadding(5, 5, 5, 5); // set the padding (if required)
        tr_data.addView(test_lo); // add the column to the table row here

        final TextView test_max = new TextView(this);
        test_max.setId(21);// define id that must be unique
        test_max.setText("101"); // set the text for the header
        test_max.setTextColor(Color.BLACK); // set the color
        test_max.setPadding(5, 5, 5, 5); // set the padding (if required)
        tr_data.addView(test_max); // add the column to the table row here

        final TextView test_tm = new TextView(this);
        test_tm.setId(21);// define id that must be unique
        test_tm.setText("-1.5"); // set the text for the header
        test_tm.setTextColor(Color.BLACK); // set the color
        test_tm.setPadding(5, 5, 5, 5); // set the padding (if required)
        tr_data.addView(test_tm); // add the column to the table row here

        final TextView test_rank = new TextView(this);
        test_rank.setId(21);// define id that must be unique
        test_rank.setText("5810"); // set the text for the header
        test_rank.setTextColor(Color.BLACK); // set the color
        test_rank.setPadding(5, 5, 5, 5); // set the padding (if required)
        tr_data.addView(test_rank); // add the column to the table row here

        final TextView test_exam_set = new TextView(this);
        test_exam_set.setId(21);// define id that must be unique
        test_exam_set.setText("123456"); // set the text for the header
        test_exam_set.setTextSize((float) 0.01);
        test_exam_set.setTextColor(Color.TRANSPARENT); // set the color
        test_exam_set.setPadding(5, 5, 5, 5); // set the padding (if
                                                // required)
        tr_data.addView(test_exam_set); // add the column to the table row
                                        // here

        report_table.addView(tr_data, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        report_table1.addView(tr_data1, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        // ----------------------On click table
        // row---------------------------------------

        tr_data.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                // Toast.makeText(getApplicationContext(),
                // test_name.getText().toString(),
                // Toast.LENGTH_LONG).show();
                // Toast.makeText(getApplicationContext(),
                // test_date.getText().toString(),
                // Toast.LENGTH_LONG).show();
                // Toast.makeText(getApplicationContext(),
                // sr_no.getText().toString(), Toast.LENGTH_LONG).show();
                // Toast.makeText(getApplicationContext(),
                // test_exam_set.getText().toString(),
                // Toast.LENGTH_LONG).show();

                // Intent intent = new Intent(ReportListActivity.this,
                // ReportListDetailsActivity.class);
                // finish();
                // ReportListActivity.this.startActivity(intent);
            }
        });
        // ----------------------On click table
        // row---------------------------------------

    }

    // --------------------Table Body---------------------------

}

// onclick device back button
@Override
public void onBackPressed() {
    // do something on back.

    // Intent intent = new Intent(ReportListActivity.this,
    // TakeTestActivity.class);
    // finish();
    // ReportListActivity.this.startActivity(intent);
    return;
}

// method to show toast message
public void makeAToast(String str) {
    // yet to implement
    Toast toast = Toast.makeText(this, str, Toast.LENGTH_SHORT);
    toast.setGravity(Gravity.CENTER, 0, 0);
    toast.show();
} 
```

}

# internet-explorer - 如何让 IE 支持 -webkit-overflow-scrolling？

> ID：15811475
> 
> 赞同：0
> 
> 时间：2013-04-04T12:40:28.417
> 
> 标签：internet-explorer, webkit

我正在开发一个只能在内部系统中使用的 Web 应用程序，使用 iPad 或带有 IE10 的大触摸屏。我有一些内容我想使用溢出来滚动：auto。

对于 iPad，我可以使用 -webkit-overflow-scrolling: touch 将 iOS 样式的滚动引入内容区域——我想要的主要功能是能够通过触摸内容区域中的任意位置来向上或向下滚动内容（就像在任何触摸设备上滚动一样）。iPad 是完美的，但我很难找到可以在 IE10 中使用的等效设备。在 IE10 中，正常的滚动条出现在内容区域的右侧，但这在触摸屏上使用起来有点繁琐。

有谁知道将复制 -webkit-overflow-scrolling 功能的 JavaScript 解决方案：在 IE10 中触摸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:23:18.527

参考：[http ://www.quirksmode.org/css/css2/mobile.html](http://www.quirksmode.org/css/css2/mobile.html)

上面的链接是跨各种平台的各种移动浏览器功能的兼容性图表。与此问题相关的滚动位位于页面底部。

在讨论每个平台的默认滚动质量时，作者指出：

> 此条目的要点是，只有那些默认滚动质量差的浏览器才需要`-webkit-overflow-scrolling: touch`.

他列出了 iOS 的默认滚动质量很差，而 IE10 的滚动质量很好。因此（在该页面的作者看来），IE10 不需要`overflow-scrolling: touch`.

这是幸运的，因为 IE10 不支持它，而且我看不出它很容易填充它。

# ios - 打印出一个连接的字符串显示 (null)

> ID：15811476
> 
> 赞同：1
> 
> 时间：2013-04-04T12:40:30.007
> 
> 标签：ios, objective-c, string

我想以以下格式创建一个字符串：`id[]=%@&stringdata[]=%@&id[]=%@&stringdata[]=%@&id[]=%@&stringdata[]=%@&`等。在for循环中我得到了id和stringdata，但是当我打印出testString时说（null），但是当我打印出Ident和Stringdata时（第一个两个 NSLogs) id 确实打印出来了，stringdata 也显示为 (null)，因为此时字符串是空的，所以这很正常。

```
for(NSUInteger i = 0; i<self.childViewControllers.count; i++) {

        NSLog(@"Ident: %@",((myViewController*)[self.childViewControllers objectAtIndex:i]).ident);
        NSLog(@"Stringdata: %@",((myViewController*)[self.childViewControllers objectAtIndex:i]).getQAnswer);

        testString = [testString stringByAppendingString:([NSString stringWithFormat: @"id[]=%@&stringdata[]=%@&",((myViewController*)[self.childViewControllers objectAtIndex:i]).ident ,((myViewController*)[self.childViewControllers objectAtIndex:i]).getQAnswer])];

        NSLog(@"PostString : %@",testString);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:43:39.630

这意味着`testString`当`nil`你进入这个循环时。因此，每次调用时`stringByAppendingString:`，您都将其传递给一个`nil`对象，该对象什么都不做。在循环结束时，`testString`仍然是`nil.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:44:30.947

```
NSMutableString *mString = [NSMutableString string];
for(NSUInteger i = 0; i<self.childViewControllers.count; i++)
{
    [mString appendFormat:@"%@id[]=%@",(i>0)?@"&":@"",((myViewController*)[self.childViewControllers objectAtIndex:i]).ident];
    [mString appendFormat:@"&stringdata[]=%@",((myViewController*)[self.childViewControllers objectAtIndex:i]).getQAnswer];
}
NSLog(@"PostString : %@",mString); 
```

希望这可以帮助

使用它输出的测试字符串：

> 2013-04-04 23:46:54.619 PagingScrollView[93543:c07] PostString : id[]=TESTI&stringdata[]=TESTQ&id[]=TESTI&stringdata[]=TESTQ&id[]=TESTI&stringdata[]=TESTQ&id[]=TESTI&stringdata[]= TESTQ&id[]=TESTI&stringdata[]=TESTQ&id[]=TESTI&stringdata[]=TESTQ&id[]=TESTI&stringdata[]=TESTQ&id[]=TESTI&stringdata[]=TESTQ&id[]=TESTI&stringdata[]=TESTQ&id[]=TESTI&stringdata[]=TESTQ

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:44:31.337

您正在将该格式附加到`testString`. 由于它没有被初始化，它`nil`和任何消息都`nil`返回`nil`。

你应该使用：

```
testString = [NSString stringWithFormat: @"id[]=%@&stringdata[]=%@&",((myViewController*)[self.childViewControllers objectAtIndex:i]).ident ,((myViewController*)[self.childViewControllers objectAtIndex:i]).getQAnswer]; 
```

# linux - windows 嵌入式 CE 设备到 linux

> ID：15811477
> 
> 赞同：1
> 
> 时间：2013-04-04T12:40:30.513
> 
> 标签：linux, arm, windows-ce

我有一个 Windows 嵌入式 CE 6.0 设备（带有触摸屏和 OTG、SDHC、RS232、USB、网络端口）。他的处理器类型是：飞思卡尔，ARM1136_Mx31。如果可以安装 linux 以获得 Linux 设备，有人吗？有什么教程可以做到这一点吗？市场上是否有类似的 Linux 设备？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:20:07.903

这不是那么简单。您处于“桌面”思维模式，其中 BIOS、所有硬件和总线都是非常标准的，因此您可以使用一个操作系统并轻松地与另一个操作系统进行交换。

嵌入式设备，尤其是 ARM 设备并不是那么简单。首先，没有 BIOS，而是一个引导加载程序，它是在处理器通电时开始执行的代码。引导加载程序的工作是设置 RAM、处理器和类似的东西，然后跳转到操作系统的起始地址。您当前的引导加载程序不太可能跳转到 Linux 操作系统的正确位置。它可能是可配置的，但您没有给出任何指示引导加载程序是什么。

嵌入式硬件通常具有内存映射外设、CPLD 等。这些设备的地址不是标准化的，因此您必须知道它们在内存映射中的物理位置，以便您可以配置操作系统以正确使用它们。它们也可能有需要服务的中断，您必须知道要屏蔽什么以及何时屏蔽这些外围设备。该知识通常需要非常详细的规格。

典型的方法是询问设备 OEM 是否为相同的硬件提供 Linux。许多人都这样做。如果他们不这样做，而您仍然想要 Linux，请转移到支持它的其他一些硬件。市场上有许多运行 Linux 并支持您列出的外围设备的板和设备。您需要确定您想要的合身度和外形尺寸。搜索引擎应该很容易找到至少十几个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:49:46.823

正如[ctake 所](https://stackoverflow.com/users/13154/ctacke)指出的，可能存在外部硬件和引导加载程序问题。此外，某些*iMX*处理器使用*安全启动*，很难/不可能添加未经授权的代码；根据iMX31 手册*第 7 章*，它支持 HAB/RTIC，如果供应商已正确熔断保险丝，则可能难以/不可能在此设备上加载未经授权的软件；我猜是这种情况，即使付出了很多努力，您仍然无法加载另一个操作系统，除非您可以[越狱破坏](http://en.wikipedia.org/wiki/IOS_jailbreaking)设备。

对于这个处理器 ( [*iMX31*](http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=i.MX31) )，有一个 Linux 配置。此外，提到的外围设备，OTG、SDHC、RS232、USB 和网络端口，都在 SOC 芯片中。即，它们直接内置在*iMX31*芯片中。所以这些驱动程序在 Linux 中是标准的。

可能有一些 GPIO 引脚可以设置外部 UART 收发器（3V 至 +/- 12V）等，这是为该板/机器定制的；*该板的IOMUX*配置也可能很困难。这将是问题所在。此外，像让 SDRAM 运行这样的基本事情可能很复杂，并且不由 Linux 处理（它们由引导加载程序处理）。SDRAM 也可能由*熔断器*自动设置。

如果设备有一个标准的引导加载程序，如[uboot](/questions/tagged/uboot "显示标记为“uboot”的问题")等。那么获得一个功能正常的 Linux 将非常容易，但可能不是所有外围设备都可以正常工作。这种特殊*的 iMX*没有安全功能，因此您应该能够打开设备并探测/观察电气连接。但是，由于*安全启动*功能，它一点也不简单，甚至可能是不可能的。

# c# - 在 C# 中从 Window 服务启动应用程序

> ID：15811478
> 
> 赞同：2
> 
> 时间：2013-04-04T12:40:31.387
> 
> 标签：c#, windows-services, uac

我正在尝试从在 LocalSystem 帐户上运行的 Windows 服务启动应用程序。我能够启动应用程序，但它要求 UAC 运行。

是否可以在不提示 UAC 的情况下从 Windows 服务启动应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:45:51.583

UAC 是专门为防止此类行为而设计的。它怎么知道哪个exe是好的，哪个是恶意的？

你可以尝试的事情：

*   以管理员权限运行 Windows 服务
*   允许它与桌面交互
*   关闭 UAC

但我宁愿忘记这一点，除非你试图扩展僵尸网络......

这是您可以以管理员身份运行它的方式

*   跑`services.msc`
*   选择服务右键，进入属性
*   输入用户名和密码（如果您更改密码，您必须为服务手动更新它）

![在此处输入图像描述](https://i.stack.imgur.com/zQX7x.png)

# c++ - 如何从类中的函数返回类的实例？

> ID：15811486
> 
> 赞同：1
> 
> 时间：2013-04-04T12:40:45.083
> 
> 标签：c++

在本练习中，我应该创建一个由向量​​支持的优先级队列类。除了最后的 Merge 功能外，此代码有效。如何从一和二创建类的新实例，并返回该类的实例？

```
 #include "pqueue-vector.h"
    #define PR(x) cout << #x " = " << x << "\n";
    using namespace std;

    VectorPQueue::VectorPQueue() {
        Vector<string> pQueue;
    }

    VectorPQueue::~VectorPQueue() {

    }

    string VectorPQueue::peek() const {
        if(isEmpty()) {
            error("peek; Attempting to peek at an empty queue");
        }
        string result = pQueue.get(0);
        return result;
    }

    string VectorPQueue::extractMin() {
        if (isEmpty()) {
            error("extractmin; Queue is empty");
        }
        int min = 0;
        string minimum = pQueue.get(0);
        for (int i= 1; i < logSize; i++) {
            string check = pQueue.get(i);
            if (check < minimum) {
                min = i;
                minimum = check;
            }
        }
        pQueue.remove(min);
        logSize--;
        return minimum;
    }

    void VectorPQueue::enqueue(const string& elem) {
        pQueue.add(elem);
        logSize++;
    }

    VectorPQueue *VectorPQueue::merge(VectorPQueue *one, VectorPQueue *two) {

        VectorPQueue result;
        for (int i = 0; i < one->size(); i++) {
        string test1 = one->extractMin();
        string test2 = two->extractMin();

                result.enqueue(test1);
                result.enqueue(test2);
            }
        // placeholder so method compiles..
        // replace with your own implementation
        return new VectorPQueue result;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:42:17.363

我不会为你解决这个问题，但会给你一个提示。

大纲应如下所示：

```
VectorPQueue *VectorPQueue::merge(VectorPQueue *one, VectorPQueue *two) {
    VectorPQueue* result = new VectorPQueue;
    // TODO: populate *result
    return result;
} 
```

# mysql - LEFT OUTER JOIN 保留第一个表的所有匹配结果，仅用于第二个表

> ID：15811488
> 
> 赞同：0
> 
> 时间：2013-04-04T12:40:48.783
> 
> 标签：mysql, select, join, where

当我在这里尝试执行下面的 mysql 查询时，我不会返回 WHERE 子句中给出的所有记录 ID。

我正在尝试做的事情：

1.  通过 id (IN) 获取所有结果记录
2.  JOIN 第二张表 (websites_thumbs) 由表 1 的 website_salt 记录结果

    *通过表 1 中记录的盐以及来自父站点的盐 ($parent_salt)*

3.  SUM 投票并在记录结果中返回（如果在第二个表中没有找到结果返回 0）

ID 119 和 250 在第二个表中有投票结果，其他没有。我遇到的问题是，当我执行查询时，它只返回记录 1,119 和 250，其他 id 存在但不返回？

查询：

// VxZQ85cByb98wUx0f3 => 来自另一个查询的父盐（页面数据查询）

```
SELECT 
    SUM(CASE t.thumb when 1 then 1 else 0 end) as thumbs_up,
    SUM(CASE t.thumb when -1 then 1 else 0 end) as thumbs_down,
    w.*, t.*
FROM websites as w
  LEFT OUTER JOIN websites_thumbs AS t 
  ON t.similar_website_salt = w.salt AND t.website_salt = 'VxZQ85cByb98wUx0f3' 
WHERE w.id IN ('1', '20', '31', '4', '199', '250', '633953')
GROUP BY t.similar_website_salt 
```

第一张桌子

![在此处输入图像描述](https://i.stack.imgur.com/a2Zk2.png)

第二张桌子 ![在此处输入图像描述](https://i.stack.imgur.com/Cz3gm.png)

执行结果

![在此处输入图像描述](https://i.stack.imgur.com/hHsoM.png)

希望有人可以帮助我解决这个问题！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:12:46.833

并非所有记录在第二个表中都有子记录，因此我们不能 GROUP BY t.similar_website_salt 并在没有此值的情况下将记录保留在结果集中。

```
SELECT 
    SUM(CASE t.thumb when 1 then 1 else 0 end) as thumbs_up,
    SUM(CASE t.thumb when -1 then 1 else 0 end) as thumbs_down,
    w.*, t.*
FROM websites as w
  LEFT OUTER JOIN websites_thumbs AS t 
  ON t.similar_website_salt = w.salt AND t.website_salt = 'VxZQ85cByb98wUx0f3' 
WHERE w.id IN ('1', '20', '31', '4', '199', '250', '633953')
//GROUP BY t.similar_website_salt
GROUP BY w.id <-- this does the trick 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:46:24.163

而不是`LEFT OUTER JOIN`尝试`INNER JOIN`。另外，不要`'`在`IN`子句中使用。最后，我改变了你的顺序`JOIN`只是因为我很挑剔:)

```
SELECT 
    SUM(CASE t.thumb when 1 then 1 else 0 end) as thumbs_up,
    SUM(CASE t.thumb when -1 then 1 else 0 end) as thumbs_down,
    w.*, t.*
FROM websites as w
  INNER JOIN websites_thumbs AS t 
  ON w.salt = t.similar_website_salt AND t.website_salt = 'VxZQ85cByb98wUx0f3' 
WHERE w.id IN (1, 20, 31, 4, 199, 250, 633953)
GROUP BY t.similar_website_salt 
```

没有看到表模式很难说，所以如果你想把其中的一些放在那里，那会很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:02:53.957

您的使用`GROUP BY`是消除任何带有 null 的行`similar_website_salt`。您需要将`null`值更改为其他值（例如空字符串），然后按此分组。请注意，有两行`COALESCE`添加：

```
SELECT 
    SUM(CASE t.thumb when 1 then 1 else 0 end) as thumbs_up,
    SUM(CASE t.thumb when -1 then 1 else 0 end) as thumbs_down,
    w.*, t.*,

    COALESCE(t.similar_website_salt, '')

FROM websites as w
  LEFT OUTER JOIN websites_thumbs AS t 
  ON t.similar_website_salt = w.salt AND t.website_salt = 'VxZQ85cByb98wUx0f3' 
WHERE w.id IN ('1', '20', '31', '4', '199', '250', '633953')

GROUP BY COALESCE(t.similar_website_salt, '') 
```

# sharepoint - 使用 WebService 将文档从本地计算机上传到 SharePoint 2013 库

> ID：15811494
> 
> 赞同：0
> 
> 时间：2013-04-04T12:41:00.037
> 
> 标签：sharepoint, sharepoint-2013

我有以下代码来自[http://ktskumar.wordpress.com/2009/03/03/upload-document-from-local-machine-to-sharepoint-library/](http://ktskumar.wordpress.com/2009/03/03/upload-document-from-local-machine-to-sharepoint-library/)使用 Web 服务将文档上传到共享点库。我已添加[https://mysite.sharepoint.com/_vti_bin/Copy.asmx](https://mysite.sharepoint.com/_vti_bin/Copy.asmx)（此站点位于 sharepoint Online 上）作为我的服务参考。

```
 //Copy WebService Settings
        string webUrl = "https://mySite.sharepoint.com";

        WSCopy.Copy copyService = new WSCopy.Copy();

        copyService.Url = webUrl + "/_vti_bin/copy.asmx";
        copyService.Credentials = System.Net.CredentialCache.DefaultCredentials;

        //Source and Destination Document URLs
        string sourceUrl = "http://localhost/Shared Documents/Sample.doc";
        string destinationUrl = "E:\\DocumentsSample.doc";

        //Variables for Reading metadata’s of a document
        WSCopy.FieldInformation fieldInfo = new WSCopy.FieldInformation();
        WSCopy.FieldInformation[] fieldInfoArray = { fieldInfo };
        WSCopy.CopyResult cResult1 = new WSCopy.CopyResult();
        WSCopy.CopyResult cResult2 = new WSCopy.CopyResult();
        WSCopy.CopyResult[] cResultArray = { cResult1, cResult2 };

        //Receive a Document Contents  into Byte array (filecontents)
        byte[] fileContents = new Byte[4096];
        uint copyresult = copyService.GetItem(sourceUrl, out fieldInfoArray, out fileContents);

        if (copyresult == 0)
        {
            Console.WriteLine("Document downloaded Successfully, and now it's getting saved in location " + destinationUrl);

            //Create a new file and write contents to that document
            FileStream fStream = new FileStream(destinationUrl, FileMode.Create, FileAccess.ReadWrite);
            fStream.Write(fileContents, 0, fileContents.Length);
            fStream.Close();

        }
        else
        {
            Console.WriteLine("Document Downloading gets failed...");
        }

        Console.Write("Press any key to exit...");
        Console.Read(); 
```

这里 WSCopy 是服务引用，在我的项目中找不到“WSCopy.Copy”复制类。我该如何解决这个问题，或者有其他方法可以实现我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:46:22.140

参考这篇文章 [http://www.ktskumar.com/blog/2009/03/upload-document-from-local-machine-to-sharepoint-library/](http://www.ktskumar.com/blog/2009/03/upload-document-from-local-machine-to-sharepoint-library/)

*您必须在 Web Reference 中添加 Web 服务 url，而不是 Service Reference。在 Visual Studio 项目中，右键单击引用，然后选择添加服务引用。在“添加服务引用”弹出窗口中，单击框底部的“高级”按钮，现在将打开“服务引用设置”弹出窗口，我们必须单击“添加 Web 引用”按钮。然后给出 Web 服务 url 并单击“添加引用”按钮以将 web 服务 url 包含到项目中。*

# android - Android 刷卡，使用不带标签的 ViewPager

> ID：15811496
> 
> 赞同：15
> 
> 时间：2013-04-04T12:41:03.330
> 
> 标签：android, android-viewpager, swipe

我正在尝试制作一个具有滑动导航类型的应用程序。这是我走了多远：

片段活动：

```
package com.app.BoomBase;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class Fragment_control extends Fragment {

String tag = this.getClass().getSimpleName();
@Override
public void onCreate(Bundle savedInstanceState) {
    Log.i(tag, "onCreate");
    super.onCreate(savedInstanceState);
    /** Getting the arguments to the Bundle object */
    Bundle data = getArguments();

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    Log.i(tag, "onCreateView");

    View view = inflater.inflate(R.layout.fragment_controle,container, false ); 

    return view;
  }

  } 
```

片段页面适配器：

```
package com.app.BoomBase;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

  public class Fragment_Pager extends FragmentPagerAdapter {

final int PAGE_COUNT = 3;
public Fragment_Pager(FragmentManager fm) {
    super(fm);
    // TODO Auto-generated constructor stub
}

@Override
public Fragment getItem(int arg0) {

    Fragment_control myFragment = new Fragment_control();
    Bundle data = new Bundle();
    data.putInt("current_page", arg0+1);
    myFragment.setArguments(data);
    return myFragment;

}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return PAGE_COUNT;
}

} 
```

主要活动：

```
package com.app.BoomBase;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

String tag = this.getClass().getSimpleName();
@Override
protected void onCreate(Bundle savedInstanceState) {
    Log.i(tag, "onCreate");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    /** Getting a reference to the ViewPager defined the layout file */
    ViewPager pager = (ViewPager) findViewById(R.id.pager);

    /** Getting fragment manager */
    FragmentManager fm = getSupportFragmentManager();

    /** Instantiating FragmentPagerAdapter */
    Fragment_Pager pagerAdapter = new Fragment_Pager(fm);

    /** Setting the pagerAdapter to the pager object */
    pager.setAdapter(pagerAdapter);

}
} 
```

但我的问题是我无法弄清楚如何将片段添加到代码中。我想用按钮和东西滑动到下一个活动。我怎么做 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-04T12:55:14.030

`PageAdapter`使用您`getItem()`在 之间切换`Fragments`，这是您要声明哪个页面做什么的地方。“位置”`0`是第一页，`1`是第二页，依此类推。如果您愿意，您可以简单地返回其他实例的新实例`Fragments`或传递参数。

例如：

```
@Override
public Fragment getItem(int position) {
    switch (position) {
    case 0:
        // Your current main fragment showing how to send arguments to fragment
        Fragment_control myFragment = new Fragment_control();
        Bundle data = new Bundle();
        data.putInt("current_page", position+1);
        myFragment.setArguments(data);
        return myFragment;
    case 1:
        // Calling a Fragment without sending arguments
        return new MySecondFragment();
    case 2:
        return new MyThirdFragment();
    default:
        return null;
    }
} 
```

* * *

`Fragment`然后，您将为要合并的每个人创建一个类。`MySecondFragment`在我的示例中，您将有一个类`MyThirdFragment`

```
public class MySecondFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.second_fragment, null); 
        return view;
    }

} 
```

和

```
public class MyThirdFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.third_fragment, null); 
        return view;
    }

} 
```

* * *

任何片段都可以简单地扩充一个标准的 xml 布局文件，要访问布局中的子项，您必须记住使用以下内容，我将使用以下内容`MySecondFragment`作为示例。

假设您有两个`Buttons`带有 id 的`R.id.button1`，并且`R.id.button2`在一个名为“second_fragment”的布局文件中：

```
public class MySecondFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.second_fragment, null);

        // Make sure to add the parent inflater before and layout child call
        Button btn_one = (Button)view.findViewById(R.id.button1);
        Button btn_two = (Button)view.findViewById(R.id.button2);

        return view;
    }

} 
```

* * *

**编辑**

要从其他页面`0`或第一个位置开始，您只需`setCurrentItem()`在 中使用`MainAvticity`，如下所示：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    Log.i(tag, "onCreate");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ViewPager pager = (ViewPager) findViewById(R.id.pager);
    FragmentManager fm = getSupportFragmentManager();
    Fragment_Pager pagerAdapter = new Fragment_Pager(fm);
    // Here you would declare which page to visit on creation
    pager.setAdapter(pagerAdapter);
    pager.setCurrentItem(1);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T06:16:17.463

我在片段类中添加了这个..

我得到的问题是无法解决无法解决获取支持片段管理器（）。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
Log.i(tag, "onCreate");
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

ViewPager pager = (ViewPager) findViewById(R.id.pager);
FragmentManager fm = getSupportFragmentManager();
Fragment_Pager pagerAdapter = new Fragment_Pager(fm);
// Here you would declare which page to visit on creation
pager.setAdapter(pagerAdapter);
pager.setCurrentItem(1);

} 
```

# python - 带导入的 Python 函数作用域

> ID：15811500
> 
> 赞同：1
> 
> 时间：2013-04-04T12:41:11.697
> 
> 标签：python, python-import

我有以下模块：

主文件

```
import my_import

my_import.a_func() 
```

my_import.py

```
FOO = "foo"
BAR = []

def a_func():
   BAR.append("bar") #ok
   FOO = FOO + "foo" #UnboundLocalError: 
                     #local variable 'FOO' referenced before assignment 
```

这可能是由于导入，但如何？

[编辑]

从我得到的答案中，罪魁祸首不是导入，但以下情况仍然很奇怪：

```
FOO = "foo"
BAR = []
def a_func():
    BAR.append("bar")
    print(FOO)
a_func() 
```

--> 打印“foo”

```
FOO = "foo"
BAR = []
def a_func():
    BAR.append("bar")
    print(FOO)
    FOO = FOO + "foo"    
a_func() 
```

--> 失败，出现“UnboundLocalError：赋值前引用局部变量 'FOO'”并且不打印“foo”

看起来解释器在实际运行代码之前正在寻找当前范围内的分配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:47:40.327

当 Python 解析函数定义时，它会记下赋值语句左侧的所有变量名，例如

```
FOO = FOO + "foo" 
```

它将所有这些变量名注册为**局部变量**。

让我强调一下，赋值语句导致 Python在*解析函数定义*`FOO`时注册为局部变量，而不是在调用函数时。所以稍后，当函数被调用时，即使**在赋值之前**发生的引用仍然引用局部变量并且可以引发.*`FOO`**`UnboundLocalError`***

 ***```
def a_func():
    BAR.append("bar")
    print(FOO)       #<--- "Freaky" UnboundLocalError occurs here!
    FOO = FOO + "foo" 
```

所以在里面`a_func`， FOO 是一个局部变量。在没有`print(FOO)`语句的情况下，Python 到达赋值并首先评估右侧。它遇到变量名 ，`FOO`将其识别为**局部变量**并询问其值是什么？它没有任何价值！所以它提出了一个`UnboundLocalError`.

要修复，请使用`global FOO`声明`FOO`内部`a_func`引用全局变量：

```
FOO = "foo"
BAR = []

def a_func():
   global FOO
   BAR.append("bar") #ok
   FOO = FOO + "foo" assignment 
```

相反，它`BAR.append('bar')`之所以有效，是因为 Python 首先查找变量`BAR`——它不认为它是一个局部变量，因为没有对表单进行赋值`BAR = ...`。它`BAR`在全局范围内查找，然后查找其 append 方法，然后 mutates `BAR`。因此，您可以变异`BAR`但不能分配给`FOO`（没有`global FOO`语句。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:48:00.760

不，它与进口无关。即使在交互式解释器中，它也会发生在单个模块或脚本中。

一个最小的例子是

```
a = 1
def f():
    a = a + 1 
```

这个赋值产生`a`了一个局部变量。在这种情况下，全局变量被遮蔽，因此无法访问。

`global`如果你想改变全局，你可以解决这种情况：

```
a = 1
def f():
    global a
    a = a + 1 
```

或者如果您想在本地保留更改，则使用不同命名的本地变量：

```
a = 1
def f():
    b = a
    b = b + 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:50:32.287

我可能是错的，但 FOO 和 BAR 的范围可能是问题吗？看起来好像您进入了不同的范围。尝试在您的方法中将 FOO 和 BAR 标记为全局变量。***

# android - 我可以用安卓模拟器模拟相机闪光灯吗？

> ID：15811501
> 
> 赞同：3
> 
> 时间：2013-04-04T12:41:26.403
> 
> 标签：android

我可以用安卓模拟器模拟相机闪光灯吗？我无法在设置中找到任何与闪存相关的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:38:04.297

通过在拍照或预览之前设置闪光灯模式来通过相机对象操作闪光灯。模拟器将允许您执行此操作。但我发现不同设备之间的闪存行为极其不一致。

真正的相机应用程序使用未记录的本机 API，这些 API 专用于手机和相机型号。

# php - 检查 url 上是否存在 pdf 文件？

> ID：15811509
> 
> 赞同：3
> 
> 时间：2013-04-04T12:41:45.443
> 
> 标签：php, curl

```
<?php
set_time_limit(0);
$url  = 'http://www.some.url/file.pdf';
$path = 'files/file.pdf';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$data = curl_exec($ch);
curl_close($ch);
file_put_contents($path, $data);
?> 
```

这是我用来从给定 url 下载特定 pdf 文件的代码。如果该 url 中有很多文件，名称为 file1.pdf、file2.pdf 等。如何在运行循环时检查，何时结束循环，因为文件的数量有限？

请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:40:28.600

检查 404 代码：

```
$httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
if($httpCode == 404) {
    /* file NOT found */
} 
```

检查 mime 类型：

```
$mimeType = curl_getinfo($ch, CURLINFO_CONTENT_TYPE);
if($mimeType == 'application/pdf') {
    /* It IS pdf file */
} 
```

但请注意，mime 类型可以是其他类型，但它仍然是 PDF 文件！此外，检查您的 PDF 文件的 mime 类型：`echo`它们以了解您必须查找的内容。我不确定，`if`语句中的代码是否正确（仅作为**示例**）

`curl_get_info()`之后就可以打电话了`curl_exec()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-21T05:08:32.287

```
pass image link inside file_get_contents();
then check using preg_match();
<?php $link = $image->img1;
$filecontent=file_get_contents($link);
if(preg_match("/^%PDF-1.5/", $filecontent)){
    echo "Valid pdf";
}else{
    echo "In Valid pdf";
}
?>

You can also check: to get last three character of your file

<?php
$img_type = substr($image->img1, -3); ?> 
<?php if(preg_match("/^%PDF-1.5/", $filecontent) || $img_type == 'pdf' ){ }?> 
```

# python - AppEngine Python API 异常处理

> ID：15811513
> 
> 赞同：1
> 
> 时间：2013-04-04T12:41:56.700
> 
> 标签：python, google-app-engine

在我目前正在处理的应用程序（2.7 运行时）中，我试图确保在我的应用程序中正确处理 API 级别的异常（即不是我的代码）。但是，Google/AppEngine 似乎在内部处理了这些异常，并没有将它们冒泡。例如，使用`Thing`which 是先前定义的`ndb.Model`

```
t = Thing(id=1,name='thingy')
try:
   t.put()
except Exception as e:
   self.log(e)
   self.abort(500) 
```

万一出现问题，`put()`我无法捕捉/记录该事件——或者是否存在？

将数据存储到 blobstore 时也会发生类似的事情，其中​​异常显然是在内部捕获和引发的，而我没有机会记录这些异常。

也许我错过了一个关键点？我查看了 API 文档，但服务引发的异常以及如何捕获它们似乎并不是文档团队的优先事项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:01:36.287

实际上 App Engine 会记录每个请求。只需转到应用程序的仪表板并单击**Logs**。

如果你想自己记录一些东西，你应该使用日志库，你可以在文档中阅读更多关于它的[信息](https://developers.google.com/appengine/articles/logging)。

因此，`self.log`您应该使用`logging.error`.

# php - CKFinder - 浏览服务器 - 获取系统错误消息

> ID：15811514
> 
> 赞同：0
> 
> 时间：2013-04-04T12:41:57.167
> 
> 标签：php, ckfinder

我在 config.php 中为 CKFinder（我认为是 2.02）做了一些修改（然后我恢复了），但是因为我只是在记事本中快速修改它们，它似乎破坏了我的格式，导致程序出现问题。

现在，当我尝试“浏览服务器”时，我得到“系统错误”

我修复了文件中的格式（据我所知），我没有看到任何明确的代码错误，但我希望你们能注意到我可能遗漏的任何内容。

我还尝试取消注释此部分：

```
//error_reporting(E_ALL);
//ini_set('display_errors', 1); 
```

没有运气。

无论如何，这是代码：

```
<?php

/*
* ### CKFinder : Configuration File - Basic Instructions 
* 
* In a generic usage case, the following tasks must be done to configure 
* CKFinder: 
*     1\. Check the $baseUrl and $baseDir variables; 
*     2\. If available, paste your license key in the "LicenseKey" setting; 
*     3\. Create the CheckAuthentication() function that enables CKFinder for authenticated users; 
* 
* Other settings may be left with their default values, or used to control 
* advanced features of CKFinder. 
*/
// LicenseKey : Paste your license key here. If left blank, CKFinder will be
// fully functional, in demo mode.

$config['LicenseName'] = '';
$config['LicenseKey'] = '';

/* 
Uncomment lines below to enable PHP error reporting and displaying PHP errors.
Do not do this on a production server. Might be helpful when debugging why CKFinder does not work as expected.
*/

//error_reporting(E_ALL);
//ini_set('display_errors', 1);

/*
To make it easy to configure CKFinder, the $baseUrl and $baseDir can be used.

Those are helper variables used later in this config file.
*/

/*
$baseUrl : the base path used to build the final URL for the resources handledin CKFinder. If empty, the default value (/userfiles/) is used.

Examples:   

$baseUrl = 'http://example.com/ckfinder/files/';

$baseUrl = '/userfiles/';

ATTENTION: The trailing slash is required.
*/

/*

$baseUrl = '/ckfinder/userfiles/';

*/

$baseUrl = '/ckfinder/userfiles/';

/*
$baseDir : the path to the local directory (in the server) which points to theabove $baseUrl URL.

This is the path used by CKFinder to handle the files inthe server.

Full write permissions must be granted to this directory.

Examples:   

// You may point it to a directory directly:
    $baseDir = '/home/login/public_html/ckfinder/files/';   
    $baseDir = 'C:/SiteDir/CKFinder/userfiles/';

    // Or you may let CKFinder discover the path, based on $baseUrl.    

    // WARNING: resolveUrl() *will not work* if $baseUrl does not start with a slash ("/"), 

    // for example if $baseDir is set to  http://example.com/ckfinder/files/    $baseDir = resolveUrl($baseUrl);

    ATTENTION: The trailing slash is required.
    */

    $baseDir = resolveUrl($baseUrl);
    require_once '../../../../includes/filemanager.config.php';

    /*
    * ### Advanced Settings 
    */

    /*Thumbnails : thumbnails settings.
    All thumbnails will end up in the samedirectory, no matter the resource type.
    */

    $config['Thumbnails'] = Array(
    'url' => $baseUrl . '_thumbs',
    'directory' => $baseDir . '_thumbs',
    'enabled' => true,
    'directAccess' => false,
    'maxWidth' => 100,
    'maxHeight' => 100,
    'bmpSupported' => false,
    'quality' => 80);

    /*
    Set the maximum size of uploaded images.

    If an uploaded image is larger, itgets scaled down proportionally.

    Set to 0 to disable this feature.
    */

    $config['Images'] = Array(
    'maxWidth' => 1600,
    'maxHeight' => 1200,
    'quality' => 80);

    /*
    RoleSessionVar : the session variable name that CKFinder must use to retrievethe "role" of the current user.

    The "role", can be used in the "AccessControl"settings (bellow in this page).
    To be able to use this feature, you must initialize the session data byuncommenting the following "session_start()" call.
    */

    $config['RoleSessionVar'] = 'CKFinder_UserRole';

    //session_start();

    /*
    AccessControl : used to restrict access or features to specific folders.
    Many "AccessControl" entries can be added.

    All attributes are optional.Subfolders inherit their default settings from their parents' definitions.
    - The "role" attribute accepts the special '*' value, which means     "everybody".
    - The "resourceType" attribute accepts the special value '*', which   means "all resource types".

    */

    $config['AccessControl'][] = Array(
    'role' => '*',
    'resourceType' => '*',
    'folder' => '/',
    'folderView' => true,
    'folderCreate' => true,
    'folderRename' => true,
    'folderDelete' => true,
    'fileView' => true,
    'fileUpload' => true,
    'fileRename' => true,
    'fileDelete' => true);

    /*
    For example, if you want to restrict the upload, rename or delete of files inthe "Logos" folder of the resource type "Images", you may uncomment thefollowing definition, leaving the above one:

    $config['AccessControl'][] = Array(
    'role' => '*',
    'resourceType' => 'Images',
    'folder' => '/Logos',
    'folderView' => true,
    'folderCreate' => true,
    'folderRename' => true,
    'folderDelete' => true,
    'fileView' => true,
    'fileUpload' => false,
    'fileRename' => false,
    'fileDelete' => false);

    */
    /*
    ResourceType : defines the "resource types" handled in CKFinder.
    A resourcetype is nothing more than a way to group files under different paths, each onehaving different configuration settings.

    Each resource type name must be unique.

    When loading CKFinder, the "type" querystring parameter can be used to displaya specific type only.

    If "type" is omitted in the URL, the"DefaultResourceTypes" settings is used (may contain the resource type namesseparated by a comma).

    If left empty, all types are loaded.maxSize is defined in bytes, but shorthand notation may be also used.

    Available options are: G, M, K (case insensitive).1M equals 1048576 bytes (one Megabyte), 1K equals 1024 bytes (one Kilobyte), 1G equals one Gigabyte.Example: 'maxSize' => "8M",

    */

    $config['DefaultResourceTypes'] = '';
    $config['ResourceType'][] = Array(
    'name' => 'Files', // Single quotes not allowed
    'url' => $baseUrl . 'files',
    'directory' => $baseDir . 'files',
    'maxSize' => 0,
    'allowedExtensions' => '7z,aiff,asf,avi,bmp,csv,doc,docx,fla,flv,gif,gz,gzip,jpeg,jpg,mid,mov,mp3,mp4,mpc,mpeg,mpg,ods,odt,pdf,png,ppt,pptx,pxd,qt,ram,rar,rm,rmi,rmvb,rtf,sdc,sitd,swf,sxc,sxw,tar,tgz,tif,tiff,txt,vsd,wav,wma,wmv,xls,xlsx,zip',
    'deniedExtensions' => '');

    $config['ResourceType'][] = Array(
    'name' => 'Images',
    'url' => $baseUrl . 'images',
    'directory' => $baseDir . 'images',
    'maxSize' => "16M",
    'allowedExtensions' => 'bmp,gif,jpeg,jpg,png,avi,iso,mp3',
    'deniedExtensions' => '');

    $config['ResourceType'][] = Array(
    'name' => 'Flash',
    'url' => $baseUrl . 'flash',
    'directory' => $baseDir . 'flash',
    'maxSize' => 0,
    'allowedExtensions' => 'swf,flv',
    'deniedExtensions' => '');

    /* Due to security issues with Apache modules, it is recommended to leave the following setting enabled. How does it work?

    Suppose the following:
    - If "php" is on the denied extensions list, a file named foo.php cannot be   uploaded.
    - If "rar" (or any other) extension is allowed, one can upload a file named   foo.rar.
    - The file foo.php.rar has "rar" extension so, in theory, it can be also      uploaded.In some conditions Apache can treat the foo.php.rar file just like any PHPscript and execute it.

    If CheckDoubleExtension is enabled, each part of the file name after a dot ischecked, not only the last part. In this way, uploading foo.php.rar would bedenied, because "php" is on the denied extensions list.

    */

    $config['CheckDoubleExtension'] = true;

    /*If you have iconv enabled (visit http://php.net/iconv for more information),you can use this directive to specify the encoding of file names in yoursystem.

    Acceptable values can be found at:  http://www.gnu.org/software/libiconv/

    Examples:
    $config['FilesystemEncoding'] = 'CP1250';

    $config['FilesystemEncoding'] = 'ISO-8859-2';

    */

    $config['FilesystemEncoding'] = 'UTF-8';

    /*
    Perform additional checks for image filesif set to true, validate image size
    */
    $config['SecureImageUploads'] = true;

    /*
    Indicates that the file size (maxSize) for images must be checked onlyafter scaling them. Otherwise, it is checked right after uploading.
    */
    $config['CheckSizeAfterScaling'] = true;

    /*
    For security, HTML is allowed in the first Kb of data for files having thefollowing extensions only.
    */
    $config['HtmlExtensions'] = array('html', 'htm', 'xml', 'js');

    /*
    Folders to not display in CKFinder, no matter their location.No paths are accepted, only the folder name.The * and ? wildcards are accepted.
    */
    $config['HideFolders'] = Array(".svn", "CVS");

    /*
    Files to not display in CKFinder, no matter their location.No paths are accepted, only the file name, including extension.The * and ? wildcards are accepted.
    */

    $config['HideFiles'] = Array(".*");

    /*
    After file is uploaded, sometimes it is required to change its permissionsso that it was possible to access it at the later time.
    If possible, it is recommended to set more restrictive permissions, like 0755.
    Set to 0 to disable this feature.Note: not needed on Windows-based servers.
    */

    $config['ChmodFiles'] = 0777;

    /*
    See comments above.Used when creating folders that does not exist.
    */

    $config['ChmodFolders'] = 0755;
    /*
    Force ASCII names for files and folders.
    If enabled, characters with diactric marks, like å, ä, ö, ć, č, đ, šwill be automatically converted to ASCII letters.
    */
    $config['ForceAscii'] = false;
    include_once "plugins/imageresize/plugin.php";
    include_once "plugins/fileeditor/plugin.php";
    $config['plugin_imageresize']['smallThumb'] = '90x90';
    $config['plugin_imageresize']['mediumThumb'] = '120x120';
    $config['plugin_imageresize']['largeThumb'] = '180x180'; 
```

![系统错误信息](https://i.stack.imgur.com/Lk0jI.png)

这家伙有完全相同的问题：

[http://ckeditor.com/forums/Support/Ckfinder-blank-server-error-drupal...-my-whits-end](http://ckeditor.com/forums/Support/Ckfinder-blank-server-error-drupal...-my-whits-end)

# php - PHP-SQL-无效参数号：绑定变量的数量与标记的数量不匹配

> ID：15811517
> 
> 赞同：1
> 
> 时间：2013-04-04T12:42:03.283
> 
> 标签：php, sql

这段代码给了我这个错误：无效的参数号：绑定变量的数量与令牌的数量不匹配

```
$fields[':email']=$_GET["email"];
$fields[':password']=$_GET["password"];
$fields[':telefono']=$_GET["telefono"];
$fields[':old_email']=$_GET["old_email"];
$fields[':isAdmin']=0;
$qry.="UPDATE utente SET Email:=email, Password:=password ,Telefono:=telefono, isAdmin=:isAdmin WHERE Email=:old_email";
$sth=$CONNESSIONE->prepare($qry);
$sth->execute($fields); 
```

字段的 var_dump 打印这个

array(5) { [":email"]=> string(5) "test2" [":password"]=> string(1) "b" [":telefono"]=> string(7) "0415600" [":old_email"]=> 字符串(4) "测试" [":isAdmin"]=> int(0) }

我的桌子是这个

```
CREATE TABLE IF NOT EXISTS `utente` (
  `Email` varchar(150) COLLATE utf8_unicode_ci NOT NULL,
  `Password` varchar(150) COLLATE utf8_unicode_ci NOT NULL,
  `Telefono` varchar(150) COLLATE utf8_unicode_ci NOT NULL,
  `isAdmin` tinyint(1) NOT NULL,
  UNIQUE KEY `Email` (`Email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T12:43:45.817

改变这个

```
$qry.="Email:=email, Password:=password ,Telefono:=telefono, isAdmin=:isAdmin WHERE Email=:old_email"; 
```

到

```
$qry.="Email=:email, Password=:password ,Telefono=:telefono, isAdmin=:isAdmin WHERE Email=:old_email"; 
```

`:`你之前打错了`=`

# c# - Dynamics Crm：通过 API 创建连接实体

> ID：15811518
> 
> 赞同：3
> 
> 时间：2013-04-04T12:42:04.753
> 
> 标签：c#, dynamics-crm-2011

因此，Dynamics CRM 中的连接提供了一种将事物链接在一起的通用方式。

Connections 实体在内部具有 Record1Id 属性和 Record2Id 属性等。

当您[通过 UI 创建连接时](http://community.dynamics.com/crm/b/crmpowerobjects/archive/2012/04/23/creating-a-connection-in-microsoft-dynamics-crm-and-how-to-search-for-related-records.aspx#.UV1u0JOcesY)，CRM 实际上“*在数据库的 Connection 表中创建了两个条目。每个条目都允许您从原始记录或相关记录中搜索相关记录。* ”

也就是说，如果您连接 A 和 B，它会将两行保存到（幕后）表中：

*   Record1Id = A 和 Record2Id = B 的一个
*   一个 Record1Id = B 和 Record2Id = A

这是为了使搜索连接更容易。如果您对连接进行高级查找，则只需“单向”进行搜索。

**所以我的问题是：**

当您通过 API（后期绑定）创建连接时，如下所示：

```
Entity connection = new Entity("connection");
connection["record1id"] = new EntityReference("contact", someContactId);
connection["record1objecttypecode"] = new OptionSetValue(2);
connection["record1roleid"] = new EntityReference("connectionrole", someConnectionRoleId);
connection["record2id"] = new EntityReference("incident", someCaseId);
connection["record2objecttypecode"] = new OptionSetValue(122);
connection["record2roleid"] = new EntityReference("connectionrole", someOtherConnectionRoleId);
var newId = service.Create(connection); 
```

...像上面那样“单向”创建它们是否足够，然后在幕后 CRM 将在两个方向上创建连接？
...或者您是否需要在两个方向上手动创建它们？（通过保存两次并交换 record1id record2id 值等）

或者，换句话说，用于连接的 CRM API 是否封装了“它实际上在幕后的两个连接”功能，还是您需要自己手动处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:55:15.477

您只需要创建一个连接记录。需要注意的一件事是，我认为您不需要像上面那样设置类型代码。只需在实体引用中设置逻辑名称就足够了。以下是 SDK 中的示例：

```
Connection newConnection = new Connection
{
    Record1Id = new EntityReference(Account.EntityLogicalName,
        _accountId),
    Record1RoleId = new EntityReference(ConnectionRole.EntityLogicalName,
        _connectionRoleId),                             
    Record2RoleId = new EntityReference(ConnectionRole.EntityLogicalName,
        _connectionRoleId),                            
    Record2Id = new EntityReference(Contact.EntityLogicalName,
        _contactId)
};
_connectionId = _serviceProxy.Create(newConnection); 
```

# php - 如何将每篇文章分享到 Facebook

> ID：15811519
> 
> 赞同：0
> 
> 时间：2013-04-04T12:42:05.963
> 
> 标签：php

我需要为不同用户发布的每篇文章保持 facebook 的喜欢和分享。一旦我登录到该网站并分享特定文章，它应该在 Facebook 中分享，并且它应该在该个别文章的分享按钮附​​近显示计数.....以下是我的编码，请帮助我摆脱这个问题。非常感谢！

```
function selfURL() {
    $s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : ""; 
    $protocol = strleft(strtolower($_SERVER["SERVER_PROTOCOL"]), "/").$s; 
    $port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]);    
    return 

$protocol."://".$_SERVER['SERVER_NAME'].$port.$_SERVER['REQUEST_URI'];
} 

function strleft($s1, $s2) { 
    return substr($s1, 0, strpos($s1, $s2)); 
}

<div id="fb-root">
</div>

<script src="http://connect.facebook.net/en_US/all.js#appId=204703199589477&amp;xfbml=1">
</script>
<fb:like href="<?php print(selfURL()); ?>" send="false" width="90" show_faces="false" action="like" font="" layout="button_count">
</fb:like>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:51:07.177

在您的页面上包含一次 JavaScript，最好是在开始`<body>`标记之后。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/nl_NL/all.js#xfbml=1&appId=182934585182826";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

将插件代码放置在您希望插件出现在页面上的任何位置。

```
<div class="fb-like" data-href="http://www.test.com" data-send="true" data-width="450" data-show-faces="true"></div> 
```

替换`http://test.com`为您文章的 URL。如果您将DIV 3次

至于共享按钮，您将需要这段脚本。再次，将域更改为您的文章网址

```
<div class="fb-send" data-href="http://example.com"></div> 
```

# vb.net - 使用 VB.net 将 Json 字符串转换为 DataTable

> ID：15811521
> 
> 赞同：2
> 
> 时间：2013-04-04T12:42:13.543
> 
> 标签：vb.net, json

我一直在咀嚼这个两天，但无法使用我找到的样本让它工作。我真的很挣扎 json 解析。

所以我需要做的是将此字符串放入数据表中。我能够达到我有字符串的地步，我只需要解析它。

```
{"total": 35799, "results": [{"publisher": "bamamatch.com", "first_seen": "2011-08-01", "times_seen": 1598, "monthly_uniques": null, "last_seen": "2013-04-02"}, {"publisher": "catholicdatingforfree.com", "first_seen": "2011-08-01", "times_seen": 1554, "monthly_uniques": null, "last_seen": "2013-04-02"}], "page_size": 100, "offset": 0} 
```

你们能告诉我一种使用VB.net将其解析为数据表的清晰方法吗？

更新

```
 Dim url As String
        Dim request As HttpWebRequest
        Dim response As HttpWebResponse = Nothing
        Dim reader As StreamReader

        url = "http://api.mixrank.com/v2/json/d73f10e7b22fbc69b79f0e0074913c14/advertisers/" & LCase(txtKeywords.Text) & "/gdn/publishers?page_size=100"

        request = DirectCast(WebRequest.Create(url), HttpWebRequest)
        response = DirectCast(request.GetResponse(), HttpWebResponse)
        reader = New StreamReader(response.GetResponseStream())

        Dim myDataTable As DataTable = DirectCast(JsonConvert.DeserializeObject(reader.ReadToEnd, (GetType(DataTable))), DataTable) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:36:20.170

这似乎是一个错误（可能在某个地方的 VB 中。）

对于我的测试，我使用了 JsonTextReader() 但出现了同样的错误。我没有尝试创建 DataTable。

请注意下面的代码（第 3 行），它从测试字符串中删除了最后一个字符。如果没有此调整，则会出现“附加文本”错误。

另外 - 在 OP 中，我需要将提供的 JSON 包装起来`[ ]`以使其与此代码一起使用。

```
 Try
        Dim s As String = TextBox1.Text
        s = s.Remove(s.Length - 1)
        Dim txt As New System.IO.StringReader(s)
        txt.Read()
        Dim reader As New JsonTextReader(txt)
        Do While reader.Read
            If reader.Value IsNot Nothing Then Debug.Print(reader.Depth & ": " & reader.TokenType & ": " & reader.Path & ": " & reader.Value)
        Loop
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

# microsoft-metro - 在 Winjs listview 按钮上传递值单击

> ID：15811523
> 
> 赞同：0
> 
> 时间：2013-04-04T12:42:18.423
> 
> 标签：microsoft-metro, winjs

## 在 Winjs listview 按钮上传递值单击

嗨，我正在开发一个 winJS 应用程序。我在 listview 中有一个 winjs 列表和一个按钮。我需要在按钮单击时传递一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:50:37.773

建议在列表视图上使用“iteminvoked”事件。

```
test.html:
<div class="listview-host">
    <div id="listView" data-win-control="WinJS.UI.ListView" data-win-options="{ selectionMode: 'none', tapBehavior: 'invokeOnly', swipeBehavior: 'none' }"></div>
</div>   

test.js:
WinJS.UI.Pages.define('/pages/test/test.html',
{
    ready: function onready(element, options)
    {   
        ...     
        listView.addEventListener('iteminvoked', this._oniteminvoked.bind(this));
    },
    _oniteminvoked: function oniteminvoked(event)
    {
    } 
} 
```

# c# - 重用 WPF 样式 - 更改子属性

> ID：15811526
> 
> 赞同：1
> 
> 时间：2013-04-04T12:42:23.350
> 
> 标签：c#, wpf, .net-4.0, wpf-4.0

我的`Expander`风格定义如下：

```
<Style x:Key="MyStyle" TargetType="{x:Type Expander}">
    <Setter ... />
    <!-- More setters -->

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Expander}">
                <Border>
                    <DockPanel>
                        <ToggleButton x:Name="ChangeStyleHere" ... />
                        <Border ... />
                    </DockPanel>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我想创建一个相同的样式，但更改`Style`inner 的属性`ToggleButton`。

我可以在不复制样式定义的情况下做到这一点吗？我应该使用该`BasedOn`物业吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:31:53.157

这是我目前的方法，我想知道是否有更好的方法：

```
<Style x:Key="MyStyle" TargetType="{x:Type Expander}">
    <Setter ... />
    <!-- More setters -->

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Expander}">
                <Border>
                    <DockPanel>
                        <ToggleButton x:Name="ChangeStyleHere" Style="{DynamicResource InnerStyle}" />
                        <Border ... />
                    </DockPanel>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="DerivedStyle" TargetType="{x:Type Expander}" BasedOn="{StaticResource MyStyle}">
    <Style.Resources>
        <Style x:Name="InnerStyle" ... />
    </Style.Resources>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:52:15.010

如果控件是您自己的，我将始终为样式、模板等添加新的依赖属性。例如，如果您有一个自定义 ItemsControl，其中模板包含 ScrollViewer，我将添加一个依赖属性`ScrollViewerStyle`。如果它不是您的控件或基本控件之一，您始终可以为此使用附加属性。就像是

```
<TextBox myNs:TextBoxStyle.ScrollViewerStyle="{StaticResource myScrollViewer}"/> 
```

`TextBoxStyle`只是一个简单的类，带有一个名为`ScrollViewerStyle`. 当然，您应用的样式和模板必须使用此附加属性。但在那之后，您可以轻松地在任何 TextBox 上更改它。

# python - Python ftplib 问题

> ID：15811535
> 
> 赞同：1
> 
> 时间：2013-04-04T12:42:46.030
> 
> 标签：python, ftplib

当我从 iPython 0.13 运行这段代码时：

```
import ftplib
f=ftplib.FTP('ftp://ftp.ncbi.nih.gov/genomes/Bacteria/') 
```

我收到以下错误：gaierror: [Errno 8] nodename nor servname provided, or not known

完整的错误如下。我在 Mac OS X v10.7.5 (Lion) 上运行 python 2.7.1。我做了一些搜索，似乎在其他情况下也产生了类似的错误。奇怪的是我能做到

```
import urllib2
tt= urllib2.urlopen('ftp://ftp.ncbi.nih.gov/genomes/Bacteria/') 
```

它可以工作，但如果我可以使用 FTP 功能，我可以避免解析 urlopen，因为我的最终目标是选择一个目录子集并下载它们的内容。

知道如何解决或绕过此错误吗？提前致谢

```
---------------------------------------------------------------------------
gaierror                                  Traceback (most recent call last)
<ipython-input-2-91f3bda2d528> in <module>()
----> 1 f=ftplib.FTP('ftp://ftp.ncbi.nih.gov/genomes/Bacteria/')

/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ftplib.pyc in        __init__(self, host, user, passwd, acct, timeout)
115         self.timeout = timeout
116         if host:
--> 117             self.connect(host)
118             if user:
119                 self.login(user, passwd, acct)

/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ftplib.pyc in connect(self, host, port, timeout)
130         if timeout != -999:
131             self.timeout = timeout
--> 132         self.sock = socket.create_connection((self.host, self.port), self.timeout)
133         self.af = self.sock.family
134         self.file = self.sock.makefile('rb')

/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.pyc in create_connection(address, timeout, source_address)
551     host, port = address
552     err = None
--> 553     for res in getaddrinfo(host, port, 0, SOCK_STREAM):
554         af, socktype, proto, canonname, sa = res
555         sock = None

gaierror: [Errno 8] nodename nor servname provided, or not known 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T12:51:22.020

构造函数的第一个参数`FTP()`必须是主机名，而不是 URL：

```
f=ftplib.FTP('ftp.ncbi.nih.gov')
f.cwd('/genomes/Bacteria/') 
```

（您可能需要在`FTP()`调用之前登录或在调用中提供用户名/密码`cwd`）

# c# - Webbrowser forButton 单击并设置 TextBox 的文本

> ID：15811539
> 
> 赞同：1
> 
> 时间：2013-04-04T12:43:04.657
> 
> 标签：c#, wpf

我在 WPF/C# VS2012/2010 中编程。我试图制作一个应用程序，您可以在其中单击按钮登录帐户。我使用的第一个网络浏览器是 C# System.Windows.Forms.WebBrowser。

很好，所有方法都很好并且易于使用：

```
Browser.Document.GetElementById("Email").SetAttribute("value", "xxx");
Browser.Document.GetElementById("signin").InvokeMember("Click"); 
```

或者

```
HtmlElementCollection textArea = Browser.Document.GetElementsByTagName("textarea");
foreach (HtmlElement element in textArea)
{
    if (element != null)
    {
        element.Focus();
        element.InnerText = "Very nice :]";
    }
} 
```

这个网络浏览器使用起来非常简单，但还不够好：它崩溃了，不使用 Active-X、HTML5、Silverlight 等等……所以我尝试使用的下一个是“Awensomium” .

这是一个很好的网络浏览器，没有崩溃，可以轻松使用我上面描述的所有东西，但它不是那么简单，它没有点击按钮的方法，或者任何东西，我不知道该怎么做这个。

你知道一些用于 WPF/C# 的 webbrowser 搜索引擎，它允许我单击按钮等...并使用 Active-X、HTML5 和其他技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:48:19.850

如果你在 WPF 中开发，你应该使用 System.Windows.Controls.WebBrowser 而不是 Forms.WebBrowser。它使用您安装的 Internet Explorer 实例，因此功能取决于您的 IE 版本。如果您升级到 IE9，您将能够显示和处理 html5、css3 .. 项目。但如果你喜欢 Awesomium，那么你应该试试这个：[http](http://wpfchromium.codeplex.com/) ://wpfchromium.codeplex.com/ （也有一些例子）。

# android - 如何在 android 中使用 accesstoken 在 Facebook 墙上发布消息？

> ID：15811543
> 
> 赞同：2
> 
> 时间：2013-04-04T12:43:09.343
> 
> 标签：android

我使用以下代码发布带有文本的图像。它工作正常。

```
 HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpPost httpPost = new HttpPost(
                "https://graph.facebook.com/me/photos?access_token="
                        + accessToken);
        URL url = new URL("Some Image URL");
        HttpURLConnection connection = (HttpURLConnection) url
                .openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap bi = BitmapFactory.decodeStream(input);

        MultipartEntity entity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bi.compress(CompressFormat.PNG, 100, bos);
        byte[] data = bos.toByteArray();
        entity.addPart("source", new ByteArrayBody(data, "sample.png"));
        entity.addPart("message", new StringBody("Text need to be posted"));
        httpPost.setEntity(entity);
        HttpResponse response = httpClient.execute(httpPost,
                localContext);
        Log.v("response ", response + ""); 
```

在我的另一个活动中，我只需要发布消息（文本），所以我评论了这一行`entity.addPart("source", new ByteArrayBody(data, "sample.png"));`，文本不会发布在我的墙上。我如何修改此代码以仅发布文本

# c# - 表单中的某些代码行没有被执行？

> ID：15811550
> 
> 赞同：0
> 
> 时间：2013-04-04T12:43:39.547
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio

我的程序中有一个表单，它有两个下拉菜单和三个按钮。当我运行表单时，我希望两个下拉菜单为空白，并且其中一个按钮被禁用。我有这个设置并且工作正常，但是我一直在处理程序中的其他类和表单，并且回来改进一些东西，我发现代码不再有效。特别是这些行是：

```
private void mainForm_Load(object sender, EventArgs e)
{
    this.roomsTableAdapter.Fill(this.bookingSystemDatabaseDataSet.rooms);
    timeBox.ResetText();
    roomBox.ResetText();
    updateTextOutput();
    bookButton.Enabled = false;
} 
```

第一行使用 TableAdapter 填充关联的“房间”下拉框，它可以工作，但是此行之后的代码似乎根本没有执行。注释掉该行意味着它们已被执行，但显然我的“房间”下拉列表将为空。我尝试将这些行移动到表单的主要执行点，但同样的事情发生了。

此外，我尝试以“其他方式”填充“房间”下拉菜单，包括：

```
roomBox.DataSource = roomsTableAdapter.Fill(bookingSystemDatabaseDataSet.rooms); 
```

和：

```
roomsTableAdapter.Fill(bookingSystemDatabaseDataSet.rooms);
roomBox.DataSource = roomsTableAdapter; 
```

当然，这些尝试非常相似，但我想我会试一试。事实证明，在每种情况下都会发生完全相同的事情。'roomBox' 被填满，然后其余代码被忽略。通过单步调试来备份我已经认为是真的，据我所知，代码甚至没有被执行。没有错误，程序运行，为什么这些行被忽略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:05:28.580

虽然代码看起来运行良好，但实际上抛出了一个异常——正如 sgmoore 所怀疑的那样，但它并没有导致中断。gunr2171 给出了预测：

按 Ctrl+Alt+E 调出 Exceptions 窗口，然后勾选`Common Language Runtime Exceptions`下面的框`Thrown`。这使我看到错误 ( `Failed to enable constraints. One or more rows contain values violating non-null, unique, or foreign-key constraints.`) 实际上很明显。我通过删除对数据集中房间的引用并重新创建它来解决这个问题。

在 sgmoore 和 gunr2171 的帮助下解决。

# c++ - boost::is_same 与模板化基类

> ID：15811555
> 
> 赞同：3
> 
> 时间：2013-04-04T12:43:54.267
> 
> 标签：c++, templates, metaprogramming

我对以下问题感到困惑。我想写一些特征结构来测试某个类是否派生自另一个。这可以通过 boost::is_base_of<> 解决。但是，我要测试的基类有一个免费的未定义模板参数。

这是一些代码示例：

```
template<typename T> class Base {};

class IntDeriv : Base<int> {};

class Foo {};

template< class TestClass >
struct is_derived_from_Base {
   // how to create something that does the following and forces the compiler to deduce T
   static const bool value = boost::is_base_of< Base<T> , TestClass >::value;
};

int main() {
    cout << is_derived_from_Base<Foo> << endl;         // should print 0
    cout << is_derived_from_Base<IntDeriv> << endl;    // should print 1
} 
```

问题是如何推导出`T`里面`Base<T>`的`is_base_of`。这可能吗？我闻到了一些 enable_if 但我不知道如何把它放在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:31:27.427

你想要的都是可能的。使用的技巧在 C++03 中是可能的，但由于你没有指定，我会给你 C++11 版本（使用`decltype`，在 C++03 中不可用）：

```
template<class TestClass>
struct is_derived_from_Base
{
    template<typename T>
    static std::true_type inherited(Base<T>*);
    static std::false_type inherited(void*);

    static const bool value = decltype(inherited(new TestClass()))::value;
}; 
```

你可以在这里看到一个[现场版本](http://ideone.com/xaerUH)。

那么，它是如何工作的呢？

当结构被实例化并被`value`需要时，编译器将获得`inherited(new TestClass())`. 这将调用适当的函数：如果`TestClass`inherits `Base<T>`，则`TestClass*`（由 返回`new`）可转换为`Base<T>*`，`T`由编译器自动推导。返回类型是`std::true_type`. 如果`TestClass`不继承`Base<T>`，则选择另一个重载，返回类型为`std::false_type`。其余的很简单：`std::true_type::value = true`和`std::false_type::value = false`.

还有一些极端情况：

*   使用私有继承会导致编译错误。我不知道如何解决它，因为我不知道答案：如果A私有继承B，A是从B派生的吗？（一般来说，私有继承被认为是一种实现继承）。另请注意，在这种情况下，`A* a = new B();`将无法编译。
*   使用私有构造函数会阻止前面解释的技巧正常工作。这将导致编译时错误。由于这违背了该方法的全部要点，因此您必须为此类类找到另一种方法。

*请注意，您必须按以下方式使用它：`is_derived_from_Base<Foo>::value`，而不是您编写的 ( `is_derived_from_Base<Foo>`)。*

# android - android - 如何在android中打开kml文件

> ID：15811558
> 
> 赞同：3
> 
> 时间：2013-04-04T12:44:02.403
> 
> 标签：android, google-maps, kml

我在我的 SD 卡中存储了一个 kml 文件。我想通过我的应用程序中的谷歌地图打开它，所以我使用了下面的代码，但我收到错误消息“android 非法状态异常无法执行活动的方法”

我不想绘制地图，我只想打开一个已经存储在我的 sdcard 中的 kml 文件并显示它。

当我用谷歌搜索时，我得到了很多与基于数据绘制地图相关的项目，这是我不想要的。

我的代码：

```
public void showmap(View v){

    File file = new File(Environment.getExternalStorageDirectory(), "10.kml");
    Intent map_intent = new Intent(Intent.ACTION_VIEW);
    map_intent.setClassName("com.google.earth", "com.google.earth.EarthActivity");
    map_intent.setDataAndType(Uri.fromFile(file), "application/vnd.google-earth.kml+xml");
    startActivity(map_intent);
} 
```

我的 Android 清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.lyold"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.CAMERA" /> 

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.lyold.LoginActivity"
            android:screenOrientation="landscape"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:screenOrientation="landscape"
            android:name=".Home" />

        <activity android:name="com.google.earth.EarthActivity" android:screenOrientation="landscape"/>

    </application>

</manifest> 
```

我的 logcat 错误：

```
04-04 18:01:05.387: E/AndroidRuntime(5846): FATAL EXCEPTION: main
04-04 18:01:05.387: E/AndroidRuntime(5846): java.lang.IllegalStateException: Could not execute method of the activity
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.view.View$1.onClick(View.java:3044)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.view.View.performClick(View.java:3511)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.view.View$PerformClick.run(View.java:14105)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.os.Handler.handleCallback(Handler.java:605)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.os.Looper.loop(Looper.java:137)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at java.lang.reflect.Method.invokeNative(Native Method)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at java.lang.reflect.Method.invoke(Method.java:511)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at dalvik.system.NativeStart.main(Native Method)
04-04 18:01:05.387: E/AndroidRuntime(5846): Caused by: java.lang.reflect.InvocationTargetException
04-04 18:01:05.387: E/AndroidRuntime(5846):     at java.lang.reflect.Method.invokeNative(Native Method)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at java.lang.reflect.Method.invoke(Method.java:511)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.view.View$1.onClick(View.java:3039)
04-04 18:01:05.387: E/AndroidRuntime(5846): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/10.kml typ=application/vnd.google-earth.kml+xml }
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.app.Activity.startActivityForResult(Activity.java:3190)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at android.app.Activity.startActivity(Activity.java:3297)
04-04 18:01:05.387: E/AndroidRuntime(5846):     at com.example.ashadegreen.Basement.showmap(Basement.java:106) 
```

我是android的新手。请帮助我..非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:05:37.913

检查 AndroidManifest.xml 文件相关权限并确保您尝试打开的文件路径 (10.kml)。除此之外，您的代码中的一切都很好。

# asp.net - ASP.NET MVC - 选择要使用的验证注释

> ID：15811559
> 
> 赞同：1
> 
> 时间：2013-04-04T12:44:03.063
> 
> 标签：asp.net, asp.net-mvc, validation, data-annotations

我有一个具有如下属性的模型：

```
public class YourDetails {

  [Required(ErrorMessage = "Code is required")]
  [StringLength(10, ErrorMessage = "Code length is wrong", MinimumLength = 2)]
  [Range(0, int.MaxValue, ErrorMessage = "Please enter a value bigger than {1}")]
  public int Code { get; set; }

} 
```

UI 验证是通过不显眼的 JS 验证插件以通常的开箱即用方式设置的。

**问题：**我有 2 个导航操作，返回和下一步。接下来很好，当事情出错时验证触发，当事情正确时，即`.isValid()`返回 true，数据被传递给 DB 服务等。

但是，当我按“返回”时，我需要在保存之前以不同方式验证表单/ViewModel。即确保`Code`是一个正整数，但不要打扰`Required`or`StringLength`验证。

所以基本上我想在 Next 上完全验证，但在 Back 上部分验证。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:53:34.397

当我过去做过类似的事情时，我发现最简单的方法是使用流利的验证[http://fluentvalidation.codeplex.com/wikipage?title=mvc](http://fluentvalidation.codeplex.com/wikipage?title=mvc)。您可以将参数传递给验证器并切换到不同的规则集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:04:03.683

我过去使用过以下条件“必需”和“字符串长度”属性，它们运行良好。

**必需的 If 属性：**

```
using System;
using System.ComponentModel.DataAnnotations;
using System.Reflection;

namespace Website.Core.Mvc.DataAnnotations
{
    [AttributeUsage(AttributeTargets.Parameter | AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = true)]
    public class RequiredIfAttribute : RequiredAttribute
    {
        public string OtherProperty { get; set; }

        public object OtherPropertyValue { get; set; }

        public RequiredIfAttribute(string otherProperty, object value)
            : base()
        {
            OtherProperty = otherProperty;
            OtherPropertyValue = value;
        }

        private object _TypeId = new object();

        public override object TypeId
        {
            get
            {
                return _TypeId;
            }
        }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            PropertyInfo property = validationContext.ObjectType.GetProperty(this.OtherProperty);
            if (property == null)
            {
                return new ValidationResult(this.OtherProperty + " not found");
            }

            // Get 
            object actualOtherPropertyValue = property.GetValue(validationContext.ObjectInstance, null);

            // If the other property matches the expected value then validate as normal
            if (IsRequired(OtherPropertyValue, actualOtherPropertyValue))
            {
                // Call base and validate required as normal
                ValidationResult isValid = base.IsValid(value, validationContext);
                return isValid;
            }
            return ValidationResult.Success;
        }

        protected virtual bool IsRequired(object otherPropertyValue, object actualOtherPropertyValue)
        {
            return object.Equals(OtherPropertyValue, actualOtherPropertyValue);
        }
    }
} 
```

**字符串长度 If 属性：**

```
using System.ComponentModel.DataAnnotations;
using System.Reflection;

namespace Website.Core.Mvc.DataAnnotations
{
    public class StringLengthIfAttribute : StringLengthAttribute
    {
        public string OtherProperty { get; set; }

        public object OtherPropertyValue { get; set; }

        public StringLengthIfAttribute(int maximumLength, string otherProperty, object value)
            : base(maximumLength)
        {
            OtherProperty = otherProperty;
            OtherPropertyValue = value;
        }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            PropertyInfo property = validationContext.ObjectType.GetProperty(this.OtherProperty);
            if (property == null)
            {
                return new ValidationResult(this.OtherProperty + " not found");
            }

            // Get 
            object actualOtherPropertyValue = property.GetValue(validationContext.ObjectInstance, null);

            // If the other property matches the expected value then validate as normal
            if (object.Equals(OtherPropertyValue, actualOtherPropertyValue))
            {
                // Call base and validate required as normal
                return base.IsValid(value, validationContext);
            }
            return null;
        }
    }
} 
```

**示例用法：**

```
public class MyModel
{
    [RequiredIf("IsBack", false)]
    public string Name { get; set; }

    public bool IsBack { get; set; } 
} 
```

# php - 记录每个用户的所有 MySQL 事务

> ID：15811562
> 
> 赞同：1
> 
> 时间：2013-04-04T12:44:12.563
> 
> 标签：php, mysql

我有一个 PHP 应用程序，它为多个用户使用单个数据库。用户登录后，他们的 ID 存储在会话中，他们使用应用程序检索或更新数据库中的数据。

出于安全/存档的目的，我想以每个用户为基础记录每个 SQL 事务。请注意，“用户”不是 MySQL 用户，因为他们只使用一个用户。我该怎么做呢？

我目前正在运行 Centos 5.8、PHP 5.3.18 和 MySQL 5.5。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:13:41.797

您可以配置 MySQL 以生成**[通用查询日志](http://dev.mysql.com/doc/refman/5.0/en/query-log.html)**(GQL)。此日志记录已建立的客户端连接和从所有客户端接收到的语句。它是一个常规的文本日志文件，它按照接收到的顺序记录针对您的 DBMS 的每个命令。它包含时间戳、ID、命令和参数。

IP 地址和会话不存在，因为数据库请求通过服务器在本地运行。时间戳允许与来自 Web 服务器的客户端的 IP 条目进行相当精确的匹配，即 Apache httpd 或 Tomcat**[访问日志文件](http://tomcat.apache.org/tomcat-7.0-doc/config/valve.html#Access_Log_Valve)**(ALF)。

我们使用 GQL 来增强 GWT Web 应用程序产生的稀疏 ALF 信息。

此示例常规查询日志应该给您的想法：

```
110602 12:55:20     3 Connect   root@localhost on w2p
            3 Query /* mysql-connector-java-5.1.15 ( Revision: ${bzr.revision-id} ) */SHOW VARIABLES WHERE Variable_name ='language' OR Variable_name = 'net_write_timeout' OR Variable_name = 'interactive_timeout' OR Variable_name = 'wait_timeout' OR Variable_name = 'character_set_client' OR Variable_name = 'character_set_connection' OR Variable_name = 'character_set' OR Variable_name = 'character_set_server' OR Variable_name = 'tx_isolation' OR Variable_name = 'transaction_isolation' OR Variable_name = 'character_set_results' OR Variable_name = 'timezone' OR Variable_name = 'time_zone' OR Variable_name = 'system_time_zone' OR Variable_name = 'lower_case_table_names' OR Variable_name = 'max_allowed_packet' OR Variable_name = 'net_buffer_length' OR Variable_name = 'sql_mode' OR Variable_name = 'query_cache_type' OR Variable_name = 'query_cache_size' OR Variable_name = 'init_connect'
110602 12:55:21     3 Query /* mysql-connector-java-5.1.15 ( Revision: ${bzr.revision-id} ) */SELECT @@session.auto_increment_increment
            3 Query SHOW COLLATION
            3 Query SET NAMES utf8mb4
            3 Query SET character_set_results = NULL
            3 Query SET autocommit=1
            3 Query select * from user where username = 'asdasd' and password = 'aa'
            1 Query show global status
110602 12:55:25     1 Query show global status
110602 12:55:30 3 Query select * from user where username = 'costis' and password = 'snafu' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:30:30.913

您可以打开并阅读[MySQL 一般查询日志](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)。它包含所有这样的查询：

```
...
130404 19:02:50   476 Connect   test@localhost on test
          476 Query SET NAMES utf8
          476 Query SELECT * FROM `table1`
130404 19:02:52   476 Quit
130404 19:03:33   477 Connect   test@localhost on test
          477 Query SET NAMES utf8
... 
```

476、477 等是**MySQL 线程 ID**。每个新连接都拥有它的 ID。您只需要知道**用户的线程 id**即可。对于 PHP mysqli 扩展，您可以使用[mysqli_thread_id()](http://php.net/mysqli_thread_id)

```
echo $_SESSION['username'].' '.
     date('Y-m-d H:i:s').' '.
     mysqli_thread_id($link); 
```

将此值存储到某个位置以在日志中匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:00:49.890

```
$sql = "UPDATE table SET col = ?"
$db->prepare($sql);
//some params etc... 
$filename = '/dir/logs/log-' . $_SESSION['username'] . '';
$handle = fopen($filename, "wr");
$db->execute();
fwrite($handle, $sql); 
```

这是一个简单的示例，您如何使用查询来执行和写入以用户命名的文件。好吧，使用这种方式也许你会在执行之前得到 $sql 的内容，但我想你已经明白了。

PS：谢谢编辑:)

# php - 提交父页面后，Fancybox 无法正常工作

> ID：15811568
> 
> 赞同：1
> 
> 时间：2013-04-04T12:44:28.290
> 
> 标签：php, jquery, yii, fancybox

我在一个页面中有两个按钮。一个用于提交页面，一个用于 Fancybox。单击提交按钮后，Fancybox 无法正常工作。我在提交按钮单击时使用 YII 模型验证。

我的 facybox js 是：

```
 $(function(){
$(".various3").fancybox({
'width'             : '75.65%',
'height'            : '100%',
'top'               : '-1020',
'autoScale'         : false,
'autoDimensions'                : false,
'scrolling'                     :'No',
'transitionIn'                  : 'none',
'transitionOut'                 : 'none',
'type'              : 'iframe',
'padding'                       : 0,
'margin'                        : 0,
'onComplete'                    : function(){$('.fancybox-iframe').contents().find('#MerchantLocations_location_name').focus();}
    });

}); 
```

这是我的看法：

```
<a href="<?php echo Yii::app()->createAbsoluteUrl('/admin/addlocation/');?>" class="various3 " ><input type="button" class="big-btns-small floatright" value="Add Location"/></a> 
```

同样在Mozilla的错误控制台“错误：TypeError：t未定义”出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:17:44.983

如果您正在使用 Yii 网格及其搜索功能，那么在 ie 搜索查询的响应中，您很可能会在`jQuery`AJAX 响应中再次传递。然后重新初始化会`jQuery`破坏您现有的 FancyBox 小部件。

快速的解决方法是在组件`scriptMap`部分禁用 jQuery，`clientScript`有关详细信息，请参阅此问题：[How to disable jQuery autoloading on Ajax request in Yii？](https://stackoverflow.com/questions/12445488/how-to-disable-yii-jquery-autoload-on-ajax-request)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:05:24.517

终于修好了……

我将花式盒子从 1.3.4 更新到最新版本 2.1.4

现在发生的是弹出窗口即将到来。但是具有“fancybox-overlay”类的 div 将出现 2 次。即第一个弹出内容和另一个空白（无内容）。由于空白 div 正在覆盖另一个。当我单击弹出窗口时，弹出窗口立即关闭。

为了克服这个问题，fancybox 脚本和样式表的包含移动到了站点的标题部分（它到 view/layout/main.php）。

感谢@schmunk 的宝贵时间。

# r - 在 R 中打开 100 个文件

> ID：15811571
> 
> 赞同：3
> 
> 时间：2013-04-04T12:44:31.063
> 
> 标签：r, file

我需要读取许多带有数据的文件，但我无法使其工作。

例如：我有 6 个名为“rain,wind,etc...”的 ASCII 文件

这就是我的想法：

```
namelist<-c("rain","wind","sunshine hour","radiation","soil moisture","pressure")
for (i in 1:6){
 metedata<-read.table('d:/namelist[i].txt')
 metedata
} 
```

但这没有用。我应该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T12:46:34.740

尝试这个 ：

```
namelist<-c("rain","wind","sunshine hour","radiation","soil moisture","pressure")
for (name in namelist){
 metedata<-read.table(paste0('d:/',name,'.txt')
 metedata
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T12:54:32.763

或使用 将它们读入列表`lapply`。假设您的工作目录位于文件的位置：

```
dat = lapply(list.files(pattern = "txt"), read.table) 
```

这会列出`.txt`工作目录中的所有文件，并调用`read.table`它们，返回它们的内容列表。

或者直接读入一个大data.frame：

```
library(plyr)
dat = ldply(list.files(pattern = "txt"), read.table) 
```

# clearcase - ClearCase 仅删除查看私有文件

> ID：15811574
> 
> 赞同：3
> 
> 时间：2013-04-04T12:44:34.150
> 
> 标签：clearcase

是否有任何要删除仅在 CC 动态视图中查看私人文件的方法。在我看来，有一堆黯然失色的文件和查看私有文件。我只需要删除查看私有文件并保留已签出和已消失的文件。

我试过以下 -

```
cleartool ls -r | grep -v eclipsed | grep -v checkedout | xargs rm -v 
```

但看起来黯淡的文件以`cleartool ls`. 所以它也删除了黯淡的文件:(

`eclipsed`cleartool ls -r 为动态视图中的文件生成两个输出。

```
src.mk
src.mk@@ [eclipsed] 
```

所以删除`cleartool ls -rec | grep -v "Rule:" | grep -v "eclipsed" | grep -v "-->" | xargs rm -v`也删除了黯淡的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:49:26.550

你是对的，这两个解决方案都不起作用：

```
 cleartool ls -rec | grep -v "Rule:" | grep -v "eclipsed" | grep -v "-->"  | xargs rm -v 
```

    cleartool lsprivate | grep -v "黯然失色" | xargs rm -v

[资料来源：我在“命令以递归方式查找当前目录中的所有查看私有文件](https://stackoverflow.com/a/7657120/6309)”的旧答案。

像任何其他私有文件一样单独列出黯淡的`lsprivate`文件：

```
M:\yourDynView\yourVob\aDir\>ct lsprivate

M:\yourDynView\yourVob\aDir\aFile.vsd
M:\yourDynView\yourVob\aDir\aPrivateFile 
```

但是，一个`lsprivate -l`列表两次使文件黯然失色：

```
M:\yourDynView\YourVob>ct lsprivate -long

view private object    M:\yourDynView\yourVob\aDir\aFile.vsd
file element           M:\yourDynView\yourVob\aDir\aFile.vsd@@ [eclipsed]
view private object    M:\yourDynView\yourVob\aDir\aPrivateFile 
```

所以你需要三遍

*   一个生成那个`cleartool lsprivate -l`
*   一个删除包含的行*上方的任何行*`eclipsed`
*   一个读取该文件并删除该文件中列出的剩余私有文件

第二步可能是（在[这个线程](http://computer-programming-forum.com/11-awk/a9312d13f49f1fb8.htm)之后松散测试）

```
gawk "{if ((NR!=1)&&($0!~/eclipsed/)) {if ($lastlin!~/eclipsed/) {print astlin};lastlin=$0} } END{print lastlin} " s 
```

使用 ' `s`' 包含 a 的结果的文件`cleartool lsprivate -l`。

# iphone - 如何使示例运行 Open CV

> ID：15811578
> 
> 赞同：7
> 
> 时间：2013-04-04T12:44:51.877
> 
> 标签：iphone, ios, xcode, opencv, augmented-reality

我正在尝试为模板匹配制作 Open CV 项目示例，如此[处](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)所述。到目前为止我所做的步骤包括：

[在我的项目中下载](http://opencv.org/)和导入的 Open CV 框架将 .m 扩展文件更改为 .mm 并且在 .pch 文件中我包含了代码

```
 #ifdef __cplusplus
 #import <opencv2/opencv.hpp>
 #endif

 #ifdef __OBJC__
 #import <UIKit/UIKit.h>
 #import <Foundation/Foundation.h>
 #endif 
```

我还从[链接](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)下载并导入了 MatchTemplate_Demo.cpp 文件。但是这里有图书馆链接问题

```
 ld: warning: directory not found for option '-L/Users/G1/Desktop/Xcode'
   ld: warning: directory not found for option '-Lprojects/FirstOpenCv/opencv/lib/debug'
   ld: library not found for -lopencv_calib3d
   clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我按照相同的步骤来包含[这里](http://computer-vision-talks.com/2012/06/opencv-tutorial-a-collection-of-opencv-samples-for-iphoneipad-part-1/)给出的库。

```
2) Add $(SRCROOT)/opencv to header search path and $(SRCROOT)/opencv/lib/debug for library search path for debug configuration and $(SRCROOT)/opencv/lib/release for release build.

3) Add OpenCV libs to linker input by modifying "Other Linker Flags" option with "-lopencv_calib3d -lzlib -lopencv_contrib -lopencv_legacy -lopencv_features2d -lopencv_imgproc -lopencv_video -lopencv_core". 
```

现在可以请任何人告诉我应该如何使项目运行。我已经获取了源和模板图像并导入到项目中。

![在此处输入图像描述](https://i.stack.imgur.com/oSdId.png)

![在此处输入图像描述](https://i.stack.imgur.com/x44li.png)

我基本上有 ViewController.h 和 ViewController.mm 文件，现在我不知道我应该在这些文件中编写什么代码才能看到结果。

![在此处输入图像描述](https://i.stack.imgur.com/RpVkG.png)

第 2 步：我需要使用相机视图实时扫描图像（这样当我将相机放在源图像上时，它应该扫描并找到模板）。

在关注此[链接时，我在导入 .cpp](http://docs.opencv.org/doc/tutorials/ios/hello/hello.html#opencvioshelloworld)[文件](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)时遇到链接器错误：

```
ld: 1 duplicate symbol for architecture i386 clang:
error: linker command failed with exit    code 1 (use -v to see invocation) 
```

请任何人建议我应该如何实施它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T13:09:16.927

您在这里有三个相互关联的问题：

1/ 如何让 openCV 框架在 iOS 项目中运行
2/ 如何让模板匹配 c++ 示例代码在 iOS 项目中运行
3/ 如何使用相机视图进行实时模板匹配

**1/ 如何让 openCV 框架在 iOS 项目中运行**

*   按照您的描述下载并导入openCV框架
*   按照您的描述更改 .pch 文件
*   检查目标构建设置中的 c++ 标准库是否设置为 libc++（这是新项目的默认设置）

*   *不要*只导入 demo.cpp 而不进行如下所述的更改（它是一个具有自己`main`功能的“原始”c++ 程序，需要进行更改才能作为 iOS/Cocoa 项目的一部分工作）。

*   *不要*乱用标头搜索路径、其他链接器标志等，如果您从 openCV.org 导入了预构建的框架，则没有必要这样做。

*   *除非您知道需要，否则*不要将 .m 文件更改为 .mm。*我的建议是尽可能将你的 c++ 代码与你的 Objective-C 代码分开，所以大多数文件应该是 .m 文件（objective-C）或 .cpp 文件（c++）。您只需要 .mm 前缀作为“objective-C++”，您打算在同一个文件中混合使用objective-C 和c++。*

 ***2/ 如何让模板匹配 c++ 示例代码在 iOS 项目中运行**

我们将进行设置，以便您的 iOS viewController - 以及您的大部分 iOS 代码 - 不需要知道图像是使用 openCV/C++ 处理的，同样 C++ 代码不需要知道它的输入位置或输出图像数据正在路由到。我们通过在两者之间创建一个小型包装类来实现这一点，它将 Objective-C 方法调用转换为 c++ 类成员函数并返回。我们还将在 UIImage 上设置一个类别，将图像格式从 iOS 友好的 UIImage 转换为 openCV-native cv::Mat。

*UIImage+OpenCV 分类*

您需要一些实用方法来从 UIImage 转换为 cv::Mat 并返回。放置这些的好地方是 UIImage 类别。在 XCode 中：*File>New FIle>Cocoa Touch>Objective-C 类别*将为您设置。调用类别*OpenCV*并使其成为*UIImage*上的类别。您需要将此 .m 文件更改为 .mm，因为它需要了解 openCV 框架中的 c++ 类型。

标头应如下所示：

```
#import <UIKit/UIKit.h>

@interface UIImage (OpenCV)

    //cv::Mat to UIImage
+ (UIImage *)imageWithCVMat:(const cv::Mat&)cvMat;

    //UIImage to cv::Mat
- (cv::Mat)cvMat;

@end 
```

.mm 文件应该通过密切遵循[这个适用于类别方法的 openCV.org 代码示例](http://docs.opencv.org/doc/tutorials/ios/image_manipulation/image_manipulation.html#opencviosimagemanipulation)来实现这些方法（例如，您不将 UIImage 传递给实例方法，而是使用 引用它`self`）。

您可以像使用 UIImage 类和实例方法一样使用类别方法，如下所示：

```
UIImage* image = [UIImage imageWithCVMat:matImage];  //class method

cv::Mat matImage = [image cvMat];  //instance method 
```

*openCV 包装类*

制作一个包装类来将你的 Objective-C 方法（从 viewController 调用）转换为 C++ 函数

像这样的标题

```
//  CVWrapper.h
#import <Foundation/Foundation.h>

@interface CVWrapper : NSObject

+ (NSImage*) templateMatchImage:(UIImage*)image
                          patch:(UIImage*)patch
                         method:(int)method;
@end 
```

我们发送模板图像、补丁图像和模板匹配方法，并返回显示匹配的图像

实现（.mm 文件）

```
//  CVWrapper.mm
#import "CVWrapper.h"
#import "CVTemplateMatch.h"
#import "UIImage+OpenCV.h"

@implementation CVWrapper

+ (UIImage*) templateMatchImage:(UIImage *)image
                          patch:(UIImage *)patch
                         method:(int)method
{
    cv::Mat imageMat = [image cvMat];
    cv::Mat patchMat = [patch cvMat];

    cv::Mat matchImage = 
           CVTemplateMatch::matchImage(imageMat, 
                                        patchMat,
                                        method);

    UIImage* result =  [UIImage imageWithCVMat:matchImage];
    return result;
} 
```

我们有效地采用标准的 Objective-C 方法和 UIImage 类型，并将它们转换为对具有 c++（openCV 框架）类型的 C++ 成员函数的调用，并将结果转换回 UIImage。

*C++ 模板匹配类*

标题：

```
//  TemplateMatch.h

#ifndef __CVOpenTemplate__CVTemplateMatch__
#define __CVOpenTemplate__CVTemplateMatch__

class CVTemplateMatch
{
public:
    static cv::Mat matchImage (cv::Mat imageMat,
                               cv::Mat patchMat, 
                               int method);
};

#endif /* defined(__CVOpenTemplate__CVTemplateMatch__) */

@end 
```

执行：

这是模板匹配 openCV 示例代码，重新编写为类实现：

```
//  TemplateMatch.cpp
/*
 Alterations for use in iOS project
 [1] remove GUI code (iOS supplies the GUI)
 [2] change main{} to static member function 
     with appropriate inputs and return value
 [3] change MatchingMethod{} signature 
     to return Mat value
 */

#include "CVTemplateMatch.h"

    //[1] #include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <iostream>
#include <stdio.h>

using namespace std;
using namespace cv;

    /// Global Variables
Mat img; Mat templ; Mat result;
    //[1] char* image_window = "Source Image";
    //[1] char* result_window = "Result window";

int match_method; 
    //[1]  int max_Trackbar = 5; 

    /// Function Headers
Mat MatchingMethod( int, void* );  //[3] (added return value to function)

    // [2] /** @function main */
    // [2] int main( int argc, char** argv )

Mat CVTemplateMatch::matchImage (Mat image,Mat patch, int method)
    // [2]
{
        /// Load image and template
        //[2]  img = imread( argv[1], 1 );
        //[2] templ = imread( argv[2], 1 );

    img = image;           //[2]
    templ = patch;         //[2]
    match_method = method; //[2]

        /// Create windows
        //[1] namedWindow( image_window, CV_WINDOW_AUTOSIZE );
        //[1] namedWindow( result_window, CV_WINDOW_AUTOSIZE );

        /// Create Trackbar
        //[1] char* trackbar_label = "Method: \n 0: SQDIFF \n 1: SQDIFF NORMED \n 2: TM CCORR \n 3: TM CCORR NORMED \n 4: TM COEFF \n 5: TM COEFF NORMED";
        //[1] createTrackbar( trackbar_label, image_window, &match_method, max_Trackbar, MatchingMethod );

    Mat result = MatchingMethod( 0, 0 );

        //[1] waitKey(0);
        //[2] return 0;
    return result;  //[2]
}

    //[3] void MatchingMethod( int, void* )
Mat MatchingMethod( int, void* )

{
        /// Source image to display
    Mat img_display;
    img.copyTo( img_display );

        /// Create the result matrix
    int result_cols =  img.cols - templ.cols + 1;
    int result_rows = img.rows - templ.rows + 1;

    result.create( result_cols, result_rows, CV_32FC1 );

        /// Do the Matching and Normalize
    matchTemplate( img, templ, result, match_method );
    normalize( result, result, 0, 1, NORM_MINMAX, -1, Mat() );

        /// Localizing the best match with minMaxLoc
    double minVal; double maxVal; Point minLoc; Point maxLoc;
    Point matchLoc;

    minMaxLoc( result, &minVal, &maxVal, &minLoc, &maxLoc, Mat() );

        /// For SQDIFF and SQDIFF_NORMED, the best matches are lower values. For all the other methods, the higher the better
    if( match_method  == CV_TM_SQDIFF || match_method == CV_TM_SQDIFF_NORMED )
        { matchLoc = minLoc; }
    else
        { matchLoc = maxLoc; }

        /// Show me what you got
    rectangle( img_display, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );
    rectangle( result, matchLoc, Point( matchLoc.x + templ.cols , matchLoc.y + templ.rows ), Scalar::all(0), 2, 8, 0 );

        //[1]  imshow( image_window, img_display );  
        //[1] imshow( result_window, result );       

    return img_display; //[3] add return value
} 
```

现在`viewController`你只需要调用这个方法：

```
UIImage* matchedImage = 
       [CVWrapper templateMatchImage:self.imageView.image
                               patch:self.patchView.image
                              method:0]; 
```

看不到c++。

**3/ 模板匹配与实时摄像机视图**

简短的回答：`matchTemplate`在实时相机环境中不会很好地工作。该算法正在图像中寻找与补丁具有相同比例和方向的匹配项：它以原始方向和大小在图像上滑动补丁块，比较最佳匹配。如果图像是透视倾斜的、不同的大小或旋转到不同的方向，这不会产生很好的结果。

您可以查看 OpenCV 的[特征检测算法](http://docs.opencv.org/modules/features2d/doc/features2d.html)，其中一些已[移至非免费](http://docs.opencv.org/modules/nonfree/doc/nonfree.html)。这是[对 SIFT 的一个很好的描述，](http://www.aishack.in/2010/05/sift-scale-invariant-feature-transform/)可以为您提供这个想法。对于视频捕获，您可能还想查看：[这里是一个](http://docs.opencv.org/doc/tutorials/ios/video_processing/video_processing.html#opencviosvideoprocessing)`cap_ios.h`教程。`opencv2/highgui`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:14:41.133

实际上，您已经下载了已编译的库，因此无需按照您在问题中提到的步骤和问题（即您遵循了不正确的步骤），因为这些步骤是将源代码编译到静态库中。

按照以下步骤操作即可

*   解压下载的框架。您可以看到名为“opencv2.framework”的文件夹
*   将该文件夹直接拖到项目中（注意。当您将该文件夹拖到 xcode 中时，xcode 会提示您对话框，将有一个勾选标记以实际将其复制到文件夹中。请勾选该复选框）
*   在您的 .pch 文件中导入 openCV 就像您在问题中提到的正确方法
    现在编译。
    还有一件事，无论你想在哪里使用 openCV 的功能，该文件应该具有 .mm 扩展名（即目标 C++ 源）它将完美运行。 [帮助链接：](http://docs.opencv.org/doc/tutorials/ios/hello/hello.html#opencvioshelloworld)*

# android - 片段与片段活动

> ID：15811579
> 
> 赞同：4
> 
> 时间：2013-04-04T12:44:53.100
> 
> 标签：android, android-fragments, android-fragmentactivity

我是 Android 编程新手。我想做一个Fragment，我见过使用Fragment和FragmentActivity的例子，它们有什么区别，分别应该使用哪些情况？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T12:46:31.677

FragmentActivity 是我们的经典 Activity，支持 Fragment，仅此而已。因此需要 FragmentActivity，当一个 Fragment 将附加到 Activity 时。

那么 Fragment 是一个很好的组件，它复制了 Activity 的基本行为，仍然不是像 Activity 那样的独立应用程序组件，需要附加到 Activity 才能工作。

在这里阅读[Fragment 和 FragmentActivity 之间的区别](https://stackoverflow.com/questions/10609268/difference-between-fragment-and-fragmentactivity?rq=1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T12:57:11.830

`FragmentActivity`是`google-support-v4`lib 的一部分，它基本上是为 2.3 以下操作系统的系统添加片段支持。如此`FragmentActivity`简单`Activity`，只是它使您能够向其中添加 Fragment。

`Fragment`是一个共享部分`Activity`生命周期的对象，可以作为 UI 的一部分添加到`Activity`逻辑`FragmentActivity`中。s的美妙之处`Fragment`在于它可以`Activities`在您的应用程序中重复使用。

# asp.net - 如何在控制器中添加 orderby

> ID：15811580
> 
> 赞同：3
> 
> 时间：2013-04-04T12:44:54.350
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我知道伙计们，这个问题并不难，但我似乎无法弄清楚如何将 orderby 添加到我的控制器中。抱歉，伙计们，我是菜鸟 :(。这是我的场景。

我的视图上有一个标签列表。每当我选择一个标签时，就会出现一个帖子列表，其中包含与所选标签相同的标签名。我的代码工作正常。只是每当我选择一个标签时，它显示的列表是按降序排列的。最新的在底部。我希望它在顶部。:(

**当前我的输出**
3
2
1

**我想要实现的目标**
1
2
3

这是我的控制器。我似乎无法弄清楚如何在浏览器中执行 orderby 的逻辑。

```
 public ActionResult PostTags() // This is one is ok
    {
        IQueryable<Tag> tags = from tg in db.Tags
                               orderby tg.Name ascending
                               select tg;
        return View(tags);
    }

   public ActionResult Browse(string tag) // This is where I can't seem to figure out how add orderby 
    {
        var tagModel = db.Tags.Include("Posts").Single(ts => ts.Name == tag);

        return View(tagModel);
    } 
```

提前感谢任何可以帮助我的人。

更新：这是我的帖子标签视图

```
@model IEnumerable<Blog.Models.Tag>

@{
    ViewBag.Title = "PostTags";
}

<h3>Tags</h3>

@foreach (var item in Model)
{ 
    <ul>
            <li>
            @Html.ActionLink(item.Name, "Browse", "Post",
                   new { Tag = item.Name }, null)
           </li>
    </ul>
}

//and this is my browse View
@model List<ProjectPAL.Models.Tag>

@foreach (var tag in Model.Posts)
{   

  <div><a href="@Href("~/Post/Details/" + tag.ID)">@tag.Title</a></div> 
   <a href="@Href("~/Post/Details/" + tag.ID + "#leavecomment")">Add a Comment</a>          
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:31:38.497

我猜你想获得purticular **Tag的****Post**集合。假设你有这样的实体

 **```
public class Post
{
    public int ID { set; get; }
    public string Title { set; get; }
    public virtual ICollection<Tag> Tags { set; get; }
}
public class Tag
{
    public int ID { set; get; }
    public string Name { set; get; }
    public virtual ICollection<Post> Posts { set; get; }
} 
```

并且您已经覆盖了`OnModelCreating`DBContext 类的方法以创建第三个表来存储您的`PostId`and `TagId`（假设它是多对多关系）

然后，您可以像下面这样更新您的操作方法代码，以获取与用户传递给操作方法的标签相同的帖子。您可以将方法添加到`OrderBy`方法的结果中`Where`。

```
public ActionResult Browser(string tag)
{
    using (MyDBContext db = new MyDBContext())
    {
        var postsForTag = db.Posts
                           .Where(x => x.Tags.Any(o => o.Name == tag)) 
                           .OrderBy(y => y.ID).ToList();

        // TO DO : Return the above collection / appropriate view model.         

    }
} 
```

**编辑：**在您之前的评论中，您想要显示标签的 Post 列表，因此您应该更新您的视图以将其强类型化为 Post 的集合。

```
@model List<Blog.Models.Post>
<h2>Posts</h2>
@foreach(var item in Model)
{
  <p>@item.Title</p>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:19:21.883

根据您的导航属性的设置方式，我会搜索帖子，而不是您的搜索方式：

```
var tagModel = db.Posts.Where(p => p.Tag.Name == tag).OrderBy(p => p.PostPropertyYouWantToOrder); 
```

您所做的是使语句检索所有带有帖子的标签，然后缩小范围。走阻力最小的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T19:02:00.977

当您将 tagModel 返回到视图时，我想您通过 foreach 循环呈现帖子，如下所示：

```
@foreach(var post in Model.Posts)
{
    //your html
} 
```

如果我是对的，您可以这样做以按您的意愿订购帖子：

```
@foreach(var postin Model.Posts.OrderByDescending(p => p.PostID))
{
    //your html
} 
```**

# regex - Perl：快速替换数组中多个单词的出现

> ID：15811583
> 
> 赞同：2
> 
> 时间：2013-04-04T12:44:58.953
> 
> 标签：regex, arrays, perl

对不起，如果它是一个重复的主题，但我在论坛内搜索过，我只发现了类似但不相同的问题。

我的问题是：

我有一个这样的字符串数组：

```
@array = ("My name is "Annie" \n", "My mother's name was "Annie", too. \n", "I am "27" years old \n", "I live in "Minnesota" \n"); 
```

还有另一个像这样的字符串数组：

```
@subs = ("Annie", "22", "Minnesota"); 
```

我想：

1) 在第一个数组中查找第二个数组中出现的任何单词（例如：Annie 将匹配第一个和第二个元素，Minnesota 只匹配最后一个元素）。

2) 将与第二个数组的任何元素匹配的所有单词替换为相同的单词，后跟“-DATA”（例如：“My name is "Annie-DATA"\n"）。

我想这可以通过一两个 for 循环轻松完成，但我想知道是否有更快的方法，也许可以巧妙地使用 PERL 的正则表达式。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:47:29.467

你可以这样替换：

```
s/(Annie|22|Minnesota)/\1-DATA/g 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:07:27.607

一种解决方案：

```
use strict;
use warnings;
my @array = ("My name is \"Annie\" \n",
   "My mother's name was \"Annie\", too. \n",
   "I am \"27\" years old \n",
   "I live in \"Minnesota\" \n");
my @subs = ("Annie", "22", "Minnesota");

my @new_array = map { my $line = $_; 
                      $line =~ s/$_/$_-DATA/g foreach @subs; 
                      $line } @array; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:35:05.060

另一个也逃避元字符的解决方案：

```
# escape possible meta characters and join
my $sub = join '|', map { quotemeta } @subs;

# replace in the array
s/($sub)/$1-DATA/g for @array; 
```

如果您不想直接更改`@array`使用中的值`map`而不是`for`. 例如：`my @new = map s/($sub)/$1-DATA/g, @array;`

# ssh - 下载 CVS 存储库会生成服务器连接错误

> ID：15811592
> 
> 赞同：2
> 
> 时间：2013-04-04T12:45:23.840
> 
> 标签：ssh, eclipse-plugin, cvs, libssh2

我有一个“org.eclipse.team.internal.ccvs.ssh2...”错误，导致连接超时使用 extssh 下载 CVS 存储库。

我尝试安装不同版本的 Eclipse，仍然存在相同的连接超时问题。

我可以下载其他 svn/git 项目。只有这个 CVS 存储库有问题。我检查了我的 Java 版本并尝试使用命令行提取代码。

显示错误的屏幕截图：
[![在此处输入图像描述](https://i.stack.imgur.com/eBjAK.png)](https://i.stack.imgur.com/eBjAK.png)

当我尝试从命令提示符中提取代码时：
[![在此处输入图像描述](https://i.stack.imgur.com/LWHRE.png)](https://i.stack.imgur.com/LWHRE.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:09:25.073

这看起来像一个防火墙问题。转到首选项 -> 常规 -> 网络连接以设置您的代理等。

此外，这在命令行上不起作用的原因是没有为命令行定义 extssh 协议。您应该能够使用`ssh`or `pserver`（用于匿名访问）。

# r - 使用索引为 colnumber 的 columname 订购数据框

> ID：15811596
> 
> 赞同：1
> 
> 时间：2013-04-04T12:45:30.600
> 
> 标签：r

我可以轻松地订购这样的数据框：

```
df<-data.frame(a=c(1,2,5,7,2),b=(1:5))
# indexing by column name, works
df2<-df[with(df,order(a)),] 
```

但是如何通过使用列号进行索引来实现相同的目标？

```
# indexing with column number, attemps failed
df2<-df[with(df,order(colnames(df[1]))),]
df2<-df[with(df,order(deparse(colnames(df[1])))),]
df2<-df[with(df,order(paste(colnames(df[1])))),]
df2<-df[with(df,order(paste(deparse(colnames(df[1]))))),] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:48:16.737

像这样 ？

```
df2 <- df[order(df[,1]),] 
```

如果您使用`with`，您将无法使用列号。

# wpf - wpf实体框架两张表

> ID：15811602
> 
> 赞同：1
> 
> 时间：2013-04-04T12:45:55.783
> 
> 标签：wpf, entity-framework

我有两个数据库表：第一个：项目

*   商品编号
*   项目名
*   项目类型 FK

第二：物品类型

*   项目类型 ID
*   项目类型名称

我想将此对象绑定到 devexpress GridControl 并在网格控件、项目名称和项目类型名称中显示 2 列。

# python - PyQt 将 graphicsScene 对象分组为一个对象

> ID：15811603
> 
> 赞同：1
> 
> 时间：2013-04-04T12:45:57.383
> 
> 标签：python, qt, pyqt, pyqt4

**背景：**我正在尝试使用 python 和 pyqt 制作网格工具。具体来说，我想使用 graphicsView/graphicsScene 组合来允许用户放置和编辑网格部分。在这种情况下，网格只是垂直线的集合。

就像是：
![在此处输入图像描述](https://i.stack.imgur.com/YfkVI.png)

**问题：**如何将一组线条组合成一个对象，以便线条集合充当一个对象（即上下文菜单、拖动等）

**当前代码：（**仅图形类）

```
from PyQt4 import QtGui, QtCore

class graphicsView(QtGui.QGraphicsView):
    def __init__(self,parent=None):
        super(graphicsView, self).__init__(parent)
        self.parent=parent
    def wheelEvent(self,event):
        super(graphicsView, self).wheelEvent(event)
        factor = 1.2
        if event.delta()<0:
            factor = 1.0/factor
        self.scale(factor,factor)

class graphicsScene(QtGui.QGraphicsScene):
    def __init__(self,parent=None):
        super(graphicsScene, self).__init__(parent)
        self.meshPen=QtGui.QPen(QtCOre.Qt.blue, 1, QtCore.Qt.SolidLine)
    def newGrid(self, xmax,ymax,xcells,ycells,xmin=0,ymin=0):
        for i in range(xcells+1):
            x=i*(xmax-xmin)/xcells-abs(xmin)
            self.addLine(x,ymin,x,ymax,self.meshPen)
        for j in range(ycells+1):
            y=j*(ymax-ymin)/ycells-abs(ymin)
            self.addLine(xmin,y,xmax,y,self.meshPen) 
```

**系统：**
Python 2.7.2、PyQt4 4.9.5-2、windows 7

* * *

**可能的解决方案：（**我的随机想法）

1.  在网格上实现一个不可见的矩形来处理交互

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:46:19.843

另一种方法是[QGraphicsItemGroup](http://pyqt.sourceforge.net/Docs/PyQt4/qgraphicsitemgroup.html)：

```
def newGrid(...):
     group = QtGui.QGraphicsItemGroup(scene=self)
     group.setFlag(QtGui.QGraphicsItem.ItemIsMovable) #let't test how it works

     for i in range(xccells + 1):
         ...
         group.addToGroup(self.addLine(x,ymin,x,ymax,self.meshPen))
     ... 
```

# c - 对 pthread 使用 mutex 会导致随机答案

> ID：15811605
> 
> 赞同：3
> 
> 时间：2013-04-04T12:46:03.073
> 
> 标签：c, pthreads, mutex

我写了一个简单的 pthread 代码

```
#include <pthread.h>
#include <stdio.h>
#include <math.h>

#define ITERATIONS 500

// A shared mutex
pthread_mutex_t mutex;
int target;

void* opponent(void *arg)
{
  int i;
  printf("opp, before for target=%d\n", target);
  pthread_mutex_lock(&mutex);
  for(i = 0; i < ITERATIONS; ++i)
  {
    target++;
  }
  pthread_mutex_unlock(&mutex);
  printf("opp, after for target=%d\n", target);

  return NULL;
}

int main(int argc, char **argv)
{
  pthread_t other;

  target = 5;

  // Initialize the mutex
  if(pthread_mutex_init(&mutex, NULL))
  {
    printf("Unable to initialize a mutex\n");
    return -1;
  }

  if(pthread_create(&other, NULL, &opponent, NULL))
  {
    printf("Unable to spawn thread\n");
    return -1;
  }

  int i;
  printf("main, before for target=%d\n", target);
  pthread_mutex_lock(&mutex);
  for(i = 0; i < ITERATIONS; ++i)
  {
    target--;
  }
  pthread_mutex_unlock(&mutex);
  printf("main, after for target=%d\n", target);

  if(pthread_join(other, NULL))
  {
    printf("Could not join thread\n");
    return -1;
  }

  // Clean up the mutex
  pthread_mutex_destroy(&mutex);

  printf("Result: %d\n", target);

  return 0;
} 
```

然后我用这个命令编译

```
gcc -pedantic -Wall -o theaded_program pth.c -lpthread 
```

但是，每次运行程序，我都会得到不同的结果！！

```
 $ ./theaded_program
 main, before for target=5
 main, after for target=-495
 opp, before for target=5
 opp, after for target=5
 Result: 5

 $ ./theaded_program
 main, before for target=5
 opp, before for target=5
 opp, after for target=5
 main, after for target=-495
 Result: 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:49:56.573

当互斥锁被锁定并且它们正在访问时，这些`printf()`语句不会被执行`target`：

```
printf("opp, before for target=%d\n", target);
pthread_mutex_lock(&mutex); 
```

这意味着一个线程可能会更改 的值，`target`而另一个线程正在尝试读取它（在 中`printf()`）。移动`printf()`要在互斥锁锁定时执行的语句：

```
pthread_mutex_lock(&mutex);
printf("opp, before for target=%d\n", target);
/* snip */
printf("opp, after for target=%d\n", target);
pthread_mutex_unlock(&mutex); 
```

这将防止`target`被一个线程读取并同时被另一个线程修改。但是，不能保证哪个线程将首先获取互斥锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:50:18.820

这个结果和预期的一样，你的代码保证 main 和对手没有做

```
for(i = 0; i < ITERATIONS; ++i)
{
  target--; //or ++ for the opponent
} 
```

同时。

`printf`s 不受互斥体的任何保护。`printf`为了避免这种情况，在互斥锁/解锁中插入s

# wpf - WPF 中的多重绑定和突变

> ID：15811610
> 
> 赞同：1
> 
> 时间：2013-04-04T12:46:09.723
> 
> 标签：wpf, data-binding, null, multibinding

我有一个带有一些多重绑定的按钮，它附加了一个命令：

```
<Button Content="remove" HorizontalAlignment="Right" VerticalAlignment="Top" Cursor="Hand" Focusable="False">
  <Button.Command>
      <Binding  Path="DataContext.DeleteColumnCommand"  ElementName="treeView" />
  </Button.Command>
  <Button.CommandParameter>
      <MultiBinding  Converter="{StaticResource midConverter}">
              <Binding Path="Text"  ElementName="tableName"/>
              <Binding Path="Name" />
      </MultiBinding>
  </Button.CommandParameter>
</Button> 
```

我看到当我在转换器中放置一个断点时，每个值都被设置并且**看起来**它正在工作。

但是，当实际调用该命令时，我收到**一个填充了 null 的数组**作为参数 ！

我想 WPF 重用并改变了我在转换器中看到的数组，这并不无意义，因为这是我没有分配的引用类型，并且在 WPF 的上下文中最大性能是非常需要的。

我的问题是：什么最能概括 WPF 中围绕突变的指导/保证？

有这方面的规则吗？

PS：我[在这里](https://stackoverflow.com/questions/7617375/why-is-this-multibinding-not-working)看到其他人有同样的问题，显然不明白起源。

PPS：我的问题可能不够清楚，但很自然地，必须在堆上分配一个新的结构、列表、数组等，因为你得到的那个可能会被重用。问题是：从这个特别的例子来看，在这种情况下 WPF 的规则是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:47:29.220

[这](https://stackoverflow.com/questions/9108044/how-to-pass-parameters-to-command-using-multibinding)是一个类似问题的答案

你可以使用多重绑定和转换器

```
<Button Content="Add" Command="{Binding AddCommand}"
 <Button.CommandParameter>
    <MultiBinding Converter="{StaticResource YourConverter}">
         <Binding Path="Text" ElementName="txt1"/>
         <Binding Path="Text" ElementName="txt2"/>
    </MultiBinding>
 </Button.CommandParameter>
</Button> 
```

转换器：创建一个新数组很重要！

```
public class YourConverter : IMultiValueConverter
{
 public object Convert(object[] values, ...)
 {
    //.Net > 4.0
    return new Tuple<int, int>((int)values[0], (int)values[1]); //<-- this is important

    //or .Net < 4.0
    //return values.ToArray();//<-- this is important
 }

 ...
} 
```

命令

```
private void  CommandExecute(object parameter)
{
    var o= (Tuple<int, int>)parameter;
    var a= o.Item1;
    var b= o.Item2;
    Calculater calcu = new Calcu();
    int c = calcu.sum(a, b);      
} 
```

ps：请检查我的语法 - 它是从我的脑海中写出来的......

# android - 如何在android中所有屏幕支持任何版本？

> ID：15811613
> 
> 赞同：0
> 
> 时间：2013-04-04T12:46:21.520
> 
> 标签：android, xml, android-layout

我想要所有屏幕尺寸的所有屏幕支持，但小设备不能很好地显示屏幕我的主布局在下面。自定义行布局在下面。我在清单文件添加中使用了屏幕支持。如何解决它>

主布局 xml::

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/main_lay"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_gravity="center_horizontal"
        android:background="@drawable/greybackground" >

        <Button
            android:id="@+id/all_btn"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:layout_alignBaseline="@+id/accepted_all"
            android:layout_alignBottom="@+id/accepted_all"
            android:layout_alignParentLeft="true"
            android:layout_margin="1dip"
            android:background="@drawable/list" />

        <TextView
            android:id="@+id/accepted_all"
            android:layout_width="100dip"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="@string/menu_download_video"
            android:textSize="12sp"
            android:textStyle="bold" />

        <Button
            android:id="@+id/not_shown"
            android:layout_width="50dip"
            android:layout_height="50dip"
             android:layout_alignBaseline="@+id/accepted_all"
            android:layout_alignBottom="@+id/accepted_all"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_margin="1dip"
           android:background="@drawable/download1" />

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/main_progressBar"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center_horizontal" >

        <com.example.testhopequeue.TextProgressBarFree
            android:id="@+id/progressBar1"
            style="@android:style/Widget.ProgressBar.Horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="30dip"
            android:layout_marginRight="30dip"
            android:layout_marginTop="5dip"
            android:progressDrawable="@drawable/memory_indicator_progress" 
            />

        <TextView
            android:id="@+id/occupiedSpace"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="30dip"
            android:layout_marginTop="5dip"
            android:gravity="left"
            android:textColor="@android:color/black"
            android:textIsSelectable="true"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/freeSpace"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="30dip"
            android:layout_marginTop="5dip"
            android:gravity="right"
            android:textColor="@android:color/black"
            android:textIsSelectable="true"
            android:textStyle="bold" />

        <com.example.testhopequeue.TextProgressBarReq
            android:id="@+id/progressBar2"
            style="@android:style/Widget.ProgressBar.Horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/progressBar1"
            android:layout_marginBottom="5dip"
            android:layout_marginLeft="30dip"
            android:layout_marginRight="30dip"
            android:progressDrawable="@drawable/reqmemory_indicator_progress" />

        <TextView
            android:id="@+id/occupiedSpace1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/occupiedSpace"
            android:layout_marginBottom="5dip"
            android:layout_marginLeft="30dip"
            android:gravity="left"
            android:textColor="@android:color/black"
            android:textIsSelectable="true"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/freeSpace1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/freeSpace"
            android:layout_marginBottom="5dip"
            android:layout_marginRight="30dip"
            android:gravity="right"
            android:textColor="@android:color/black"
            android:textIsSelectable="true"
            android:textStyle="bold" />
    </RelativeLayout>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="10dip" >

        <LinearLayout
            android:id="@+id/listView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

我在下面的 XML 文件的滚动视图中添加自定义行添加：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:descendantFocusability="blocksDescendants"
    android:orientation="vertical" >

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:background="#000000" />

    <RelativeLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="100dip"
        android:gravity="center_vertical" >

        <ImageView
            android:id="@+id/colImgPath"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="10dip"
            android:contentDescription="@string/desc" />

        <Button
            android:id="@+id/btnDelete"
            android:layout_width="40dip"
            android:layout_height="40dip"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="10dp"
            android:background="@drawable/delete1"
            android:visibility="gone" />

        <Button
            android:id="@+id/btnDownload"
            android:layout_width="40dip"
            android:layout_height="40dip"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="10dp"
            android:background="@drawable/download1"
            android:visibility="visible" />

        <com.example.testhopequeue.TextProgressBar
            android:id="@+id/progressBar"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="180dip"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:layout_margin="2dip"
            android:max="100"
            android:maxHeight="50dip"
            android:maxWidth="50dip"
            android:progress="0"
            android:progressDrawable="@drawable/progressbar" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:58:14.757

我建议您阅读此文档 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

或这篇文章“多屏设计”

[http://developer.android.com/training/multiscreen/index.html](http://developer.android.com/training/multiscreen/index.html)

# android - 另一个 R.Java 文件丢失

> ID：15811619
> 
> 赞同：0
> 
> 时间：2013-04-04T12:46:30.500
> 
> 标签：android, eclipse, r.java-file

我刚刚加入 StackOverflow，因为我找不到任何问题的答案。:(

但是，我在这方面找到了其他线程，但似乎没有一个可以解决它..我不知道为什么。

所以基本上，我正在尝试制作一个android应用程序，我启动了一个新项目并且已经缺少R.Java（导致重大问题，我什至无法从中编译:(），我试过了：，，`import.android.R;`我`import.(packagename).R;`试过了`"clean"`，还有很多其他的东西。从字面上看，我能想到的一切。

发生了什么事，我该如何解决？

```
 package com.nicco.compare;

 import android.os.Bundle;
 import android.app.Activity;
 import android.view.Menu;

  public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:53:35.410

R.java 是自动生成的。

```
 1\. Do you have a import statement like import android.R;. If so remove the import

 2\. Do you have errors in your xml files. If so fix them

 3\. Clean and build project. 
```

我猜你正在导入`android.R`删除这个导入语句（`import android.R;`）。清理并构建您的项目。这应该可以解决您的问题。

右键单击项目转到属性选择左侧的android。检查您是否检查了正确的版本。

还要在清单文件中查找 sdk 版本

![在此处输入图像描述](https://i.stack.imgur.com/WhXj7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:51:15.060

这是我在 Eclipse 中解决此问题的方法：

在 gen 文件夹中手动创建 R.java 并保存。之后转到项目并单击“清理”将显示以下消息，并且您的文件将自动重写：

**R.java 是手动修改的！恢复到生成的版本！**

这是替代方法

R 是一个自动生成的类，其中包含用于标识您的 >resources 的常量。如果您没有 R.java 文件（在 1.5 SDK 的 >Eclipse 中将是 gen/com.techfuze.app_name/R.java），我建议关闭并重新打开您的项目或转到 >Project > Build all （并按照 >Josef 的建议在那里选择“自动构建”）。如果这不起作用，不如尝试创建一个新项目，如果问题被重新创建，那么 >post here 再次，我们将更详细地介绍。

但我发现还有另一个问题导致了第一个问题。SDK 目录下的工具没有执行权限，所以就好像 Eclipse 不存在一样，所以没有构建 R.java 文件。

所以修改权限并选择“自动构建”解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:59:20.260

试试这个，首先“右键单击”“项目”，然后选择“属性”并选择“java构建路径”，然后选择“版本复选框”并保存更改。

如果它不起作用，则关闭所有文件并清理项目......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:48:45.437

尝试验证您的布局文件（即）xml 文件中没有任何错误。因为只有在.xml文件干净时才会生成R.java

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-19T23:01:42.813

当我添加搜索操作但未能将搜索字符串添加到`values/strings.xml`. 然后我做了一个清洁，然后`R.java`消失了。添加字符串后，构建成功并重新生成`R.java`.

# sql - SQL Server 查询奇怪的输出

> ID：15811623
> 
> 赞同：4
> 
> 时间：2013-04-04T12:46:34.847
> 
> 标签：sql, sql-server, database, sql-server-2008

我有以下 SQL Server 查询：

```
SELECT ISNULL(MIN(P), 999) AS FLD
FROM (SELECT '0' AS P) AS T
WHERE (1 > 4) 
```

为什么这个查询的输出是 '*' ？

请解释

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T12:48:08.310

`ISNULL`使用第一个参数的数据类型。

这是`varchar(1)`因为那是文字的数据类型`'0'`

`999`将被截断，因此 SQL Server 显示“*”

# python - 在视频中记录图形输出

> ID：15811625
> 
> 赞同：0
> 
> 时间：2013-04-04T12:46:50.863
> 
> 标签：python, bash, video, pygame

我如何用 bash 记录 pygame python 脚本的输出？

我在 gource 软件中找到了这个例子，但我不知道如何使命令适应 pygame/python 图形脚本。

```
gource -1280x720 -o - | ffmpeg -y -r 60 -f image2pipe -vcodec ppm -i - -vcodec libx264 -preset ultrafast -crf 1 -threads 0 -bf 0 gource.mp4 
```

首先，是否可以使用 pygame/python 脚本来做类似的事情，如果可以，怎么做？

# c# - 如何在字符串中表示逗号？

> ID：15811626
> 
> 赞同：0
> 
> 时间：2013-04-04T12:47:00.337
> 
> 标签：c#, string

我有一个像这样的整数，即`3356890`。我正在将其转换为字符串并显示在屏幕上。现在我想这样显示`3,356,890`。

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:48:53.410

您可以使用：

```
value = 1234567890;
Console.WriteLine(value.ToString("0,0", CultureInfo.InvariantCulture)); 
// Displays 1,234,567,890 
```

但是，出于[国际化和本地化](http://en.wikipedia.org/wiki/Internationalization_and_localization)的目的，最好允许用户当前的文化设置来确定数字的格式。

**延伸阅读**

*   [自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:49:02.543

请看这里， [数字字符串格式](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:49:41.177

```
string res = string.Format(CultureInfo.InvariantCulture, "{0:#,##0}", 3356890); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:50:20.777

```
int val = 3356890;

string valString = val.ToString("#,##0") 
```

# ios - iOS 中 XML 到 JSON 的转换

> ID：15811629
> 
> 赞同：1
> 
> 时间：2013-04-04T12:47:09.723
> 
> 标签：ios, xcode, json, jquery-mobile, xml-parsing

我需要将 XML 响应转换为 JSON 并将沙子转换为 json 到 javaScript 代码。

```
My XML response:
<cell>
       <Result>True</Result>
       <sguid>02291c402-2220-422b-b199-f92f22e56d2f</sguid>
</cell> 
```

我正在使用来自该站点的 XMLReader 支持文件：

XML阅读器

我正在使用此代码将 XML 转换为 JSON：

```
+ (NSString*) XMLToJson:(CXMLDocument *)xmlDocument
{
    NSError *error = nil;

    NSArray *resultNodes = [xmlDocument nodesForXPath:@"//cell" error:&error];

    if(error)
        NSLog(@"%@",error.description);

    CXMLNode *cellNode = [resultNodes objectAtIndex:0];

    NSLog(@"%@",cellNode.XMLString);

    NSError *parseError = nil;
    NSDictionary *xmlDictionary = [XMLReader dictionaryForXMLString:cellNode.XMLString   error:&parseError];

    NSLog(@"%@", xmlDictionary);

  //{print this.
  //  cell =     {
  //      Result =         {
  //          text = True;
  //      };
  //      sguid =         {
  //          text = "0391c402-1120-460b-b199-f92fffe56d2f";
  //      };
  //  };
  //}

    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:xmlDictionary
                                                       options:NSJSONWritingPrettyPrinted // Pass 0 if you don't care about the readability of the generated string
                                                         error:&error];
    if(error)
        NSLog(@"%@",error.description);

     NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
    NSLog(@"%@", jsonString);

    return jsonString;
} 
```

我得到这样的 JSON 响应：

```
{
  "cell" : {
    "Result" : {
      "text" : "True"
    },
    "sguid" : {
      "text" : "0391c402-1120-460b-b199-f92fffe56d2f"
    }
  }
} 
```

我需要这样的 JSON 响应：

```
{
  "cell": {
    "Result": "True",
    "sguid": "02291c402-2220-422b-b199-f92f22e56d2f"
  }
} 
```

因为然后我将此 json 发送到 javascript 代码，所以我得到了异常 jquery mobile 不知道解析器并抛出语法错误异常。

我见过程序员使用这个解决方案并正在帮助他们，但我仍然在这个解决方案中得到相同的结果。

[iOS 中 XML 到 JSON 的转换](https://stackoverflow.com/questions/15498989/xml-into-json-conversion-in-ios?answertab=active#tab-top)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T21:05:04.017

我刚刚为您的问题编写了一个函数，我用几个 XML 进行了尝试。如果您发现任何问题，请告诉我

```
- (NSMutableDictionary *)extractXML:(NSMutableDictionary *)XMLDictionary
{
    for (NSString *key in [XMLDictionary allKeys]) {
        // get the current object for this key
        id object = [XMLDictionary objectForKey:key];

        if ([object isKindOfClass:[NSDictionary class]]) {
            if ([[object allKeys] count] == 1 &&
                [[[object allKeys] objectAtIndex:0] isEqualToString:@"text"] &&
                ![[object objectForKey:@"text"] isKindOfClass:[NSDictionary class]]) {
                // this means the object has the key "text" and has no node
                // or array (for multiple values) attached to it. 
                [XMLDictionary setObject:[object objectForKey:@"text"] forKey:key];
            }
            else {
                // go deeper
                [self extractXML:object];
            }
        }
        else if ([object isKindOfClass:[NSArray class]]) {
            // this is an array of dictionaries, iterate
            for (id inArrayObject in (NSArray *)object) {
                if ([inArrayObject isKindOfClass:[NSDictionary class]]) {
                    // if this is a dictionary, go deeper
                    [self extractXML:inArrayObject];
                }
            }
        }
    }

    return XMLDictionary;
} 
```

并像这样使用它

```
NSDictionary *clearXML = [[self extractXML:[yourParsedXMLDictionary mutableCopy]] copy]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-18T15:39:12.170

您在使用 XMLReader 时遇到的问题。为了解决这个问题，您可以使用[XMLConverter](https://github.com/rsoldatenko/XMLConverter)而不是 XMLReader。

# c - 可变长度的字符串数组

> ID：15811631
> 
> 赞同：1
> 
> 时间：2013-04-04T12:47:12.677
> 
> 标签：c

我正在编写一个 C 代码来逐行读取包含字母、CR、LF、'\0' 的文件。下面是我附加的代码示例。我只想将每行中的字母存储到一个数组中，这样数组中的行数等于文件中的行数，并且列的长度应该是不同的（取决于第 i 行中的字符数）。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char *buffer[100];
    char temp[128];
    int c,i=0,j=0;
    int pos=0;
    FILE *file;
    file = fopen("input", "r");
    if (file) {
        while ((c = getc(file)) != EOF){
            if ((c>=65 && c<=90) || (c>=97 && c<=122))
                temp[pos++]=c;
            else if(pos>1) {
                temp[pos]='\0';
                buffer[i]=temp;
                printf ("%s\n",temp);
                i++;
                pos=0;
            }
        }
    }
    fclose(file);
    while (j<i){
        printf("%s\n",buffer[j]);
        j++;
    }
} 
```

如果我运行上面的代码，我的所有缓冲区 [j] 都包含相同的字符串。任何人都可以帮助我找出代码中的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:52:56.603

`buffer[]`是一个*指针*数组，在您的`while`循环中，您将每个指针指向您的数组`temp[]`

```
buffer[i]=temp; // assign the address of temp to buffer[i] 
```

然后，您正在更改数组的内容*，*`temp[]`但地址始终相同。

如果要将数据*存储*`temp`到每个位置，`buffer[]`则需要分配内存并将数据复制到那里。更像：

```
buffer[i]=malloc(strlen(temp) + 1);
strcpy(buffer[i], temp); 
```

# codeigniter - 获取网址，以便可以通过电子邮件发送

> ID：15811632
> 
> 赞同：0
> 
> 时间：2013-04-04T12:47:16.403
> 
> 标签：codeigniter

我需要获取 url 并将其放在我的代码中，以便可以通过电子邮件中的链接发送它。

所以如果我有 localhost/interiors/accessories/clocks/mantle-clocks/mantle-clock

我需要获取此 url，以便我可以将其放置在我的控制器中以将其作为电子邮件链接发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:24:56.873

您的问题很简单，您可以调用 Codeigniter 的 current_url() 辅助方法

```
$url = current_url(); 
```

使用此 URL 发送电子邮件。或者，如果这不是您想要的，那么您将不得不手动生成 url。

```
$url = http://localhost/interiors/accessories/clocks/mantle-clocks/mantle-clock'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:50:49.680

使用 $_SERVER 全局变量。它应该包含您需要的信息，例如 REQUEST_URI 等

# asp.net - 传递参数到点击事件

> ID：15811633
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:47:17.133
> 
> 标签：asp.net

如何从动态链接按钮将参数传递给单击事件处理程序？我不想使用命令事件。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:49:22.377

使用视图状态。将您的参数存储在 ViewState 中，然后在您处理的事件中访问它们：

```
link += new.EventHandler(this.link_Click);
ViewState[Param 1]="Value"; 
```

# jsf - 如何从 JSF 视图嵌入外部 JavaScript

> ID：15811634
> 
> 赞同：0
> 
> 时间：2013-04-04T12:47:21.717
> 
> 标签：jsf, jsf-2

如何在 JSF 视图中嵌入外部 JavaScript 库，例如 Google 地图？

在传统的 HTML 中，我会这样做`<script src="http://maps.google.com/maps/api/js?v=3.6&sensor=false"></script>`。

我想知道 `< h:outputScript>`当我想在 JSF 视图中包含外部 JS 库时是否必须使用标记，因为我能够找到的关于这个主题的所有示例都假设实际的 JS 文件包含在 Web 应用程序项目中，因此用过`<h:outputScript>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:29:57.300

您可以在 JSF 视图中插入标准 HTML 元素，例如`<div>`或`<script>`，就像您的情况一样。此外，JSF 最终将呈现`<h:outputScript>`为普通`<script>`元素。我们通常使用前者让 JS 文件*通过`FacesServlet`*.

所有这些都会导致您的`<script>`元素应“按原样”插入。

# sencha-touch-2 - 嵌套列表中的列表分页

> ID：15811636
> 
> 赞同：1
> 
> 时间：2013-04-04T12:47:27.803
> 
> 标签：sencha-touch-2, nested-lists

是否可以在嵌套列表中使用列表分页插件？当我直接放置代码时，该应用程序将不再工作。

我的代码：

```
requires: ['Ext.field.Search','Ext.Toolbar','Ext.plugin.ListPaging'],
    config: {
        store: 'CatalogStore',
        plugins: [
            {
                xclass: "Ext.plugin.ListPaging",
                autoPaging: true
            }
        ], 
```

我的商店：

```
Ext.define('Catalog_Demo.store.CatalogStore', {
    extend: 'Ext.data.TreeStore',
    requires: ['Catalog_Demo.model.CatalogModel'],
    config :{
        model: 'Catalog_Demo.model.CatalogModel',
        proxy: {
            type: 'ajax',
            url: 'enter code hereosc_demo.php',

            reader:{
                type: 'json',
                rootProperty: 'categories'
                }
            },
        pageSize: 2,
        autoLoad: true,
    }
}); 
```

它显示以下错误

> 未捕获的类型错误：无法调用未定义
> ListPaging.js:114的方法“getScroller”

有原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T12:14:23.377

您必须将插件配置放在`listConfig`您的嵌套列表中。所以你发布的代码片段会变成这样：

```
requires: ['Ext.field.Search','Ext.Toolbar','Ext.plugin.ListPaging'],
config: {
    store: 'CatalogStore',
    listConfig: {
            plugins: [
            {
                xclass: "Ext.plugin.ListPaging",
                autoPaging: true
            }
        ],       
    }
} 
```

# javascript - 当用户手动更改滚动位置时，如何在 ajax 计时器异步回发期间停止保持滚动位置？

> ID：15811641
> 
> 赞同：0
> 
> 时间：2013-04-04T12:47:32.903
> 
> 标签：javascript, asp.net, ajax, c#-4.0

我通过使用异步回发将多行文本框用作聊天窗口。我能够保持滚动位置，但是当用户阅读聊天消息时，文本框会自动滚动到最底部。我能够保持用户所在的位置或使其自动向下滚动。但是，我想两者都做。

这是我的代码：

```
var prm = Sys.WebForms.PageRequestManager.prm.add_beginRequest(BeginRequestHandler);
prm.add_endRequest(EndRequestHandler); 
function BeginRequestHandler(sender, args) { 
  xPos = $get('txtChatBox').scrollLeft; 
  yPos = $get('txtChatBox').scrollTop; 
  zpos =$get('txtChatBox').scrollHeight; 
} 

function EndRequestHandler(sender, args) { 
  $get('txtChatBox').scrollLeft = xPos + 1; 
  $get('txtChatBox').scrollTop = yPos + 1; 
  $get('txtChatBox').scrollTop =zpos+1; 
} 
```

谁能帮帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:46:15.663

您可以使用该[`scroll`事件](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/scroll)来检测用户是否手动滚动离开。

```
var xPos, yPos, hasScrolled, timer, box = $get('txtChatBox');
box.onscroll = function(e) {
  hasScrolled = true;
  /* if you want to invalidate the flag after the user has not scrolled
     for a certain period, use
  clearTimeout(timer);
  timer = setTimeout(function() {
    hasScrolled = false;
  }, 60000) // 1 min for example
  */
};
function BeginRequestHandler(sender, args) { 
  xPos = box.scrollLeft; 
  yPos = box.scrollTop;
  zPos = box.scrollHeight;
  hasScrolled = false;
}
function EndRequestHandler(sender, args) {
  if (!hasScrolled) {
    box.scrollLeft = xPos + 1; 
    box.scrollTop = zPos+1;
  }
} 
```

或者您只需将存储的 scrollTop ( `yPos`) 与当前的进行比较，以检测用户是否滚动离开（而不是返回）：

```
function EndRequestHandler(sender, args) {
  if (box.scrollTop == yPos) {
    box.scrollLeft = xPos + 1; 
    yPos = box.scrollTop = zPos+1;
  }
} 
```

# android - imageview 未加载 image.app 正在关闭

> ID：15811647
> 
> 赞同：0
> 
> 时间：2013-04-04T12:47:43.997
> 
> 标签：android, imageview

我在 xml 文件中有一个 imageview 和按钮。加载 image1 并播放 song1.mp3 文件。当歌曲结束时，它应该加载下一张图像并播放 song2.mp3 歌曲，它应该一直播放到最后一张图像。用于关闭和退出应用程序的按钮。

```
 import android.media.MediaPlayer;
      import android.media.MediaPlayer.OnCompletionListener;
      import android.os.Bundle;
      import android.widget.ImageView;
      import android.app.Activity;
      import android.content.res.AssetFileDescriptor;

    public class MainActivity extends Activity {
    public MediaPlayer mpp;
    final int image[] = {R.drawable.apple,R.drawable.ball,R.drawable.cat};
    int i=0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
            final ImageView img = (ImageView) findViewById(R.id.img);

    String audio[]={"song1.mp3","song2.mp3","song3.mp3"};

    AssetFileDescriptor descriptor;
            try {
                descriptor = getAssets().openFd(audio[i]);
                mpp.setDataSource( descriptor.getFileDescriptor(), descriptor.getStartOffset(),descriptor.getLength());
                descriptor.close();
                mpp.prepare();
                mpp.start();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            mpp.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer arg0) {
                    // TODO Auto-generated method stub
                    img.setImageResource(image[i]);
                    i++;
                    mpp.start();
                }
            });
} } 
```

main.RuntimeException 中的致命异常无法启动活动

# html - 在纯 CSS 上具有固定标题和固定列的表

> ID：15811653
> 
> 赞同：117
> 
> 时间：2013-04-04T12:48:04.140
> 
> 标签：html, css, html-table, markup, fixed-header-tables

我需要创建一个带有固定标题和固定第一列的 html 表（或类似的外观）。

到目前为止我看到的每个解决方案都使用 Javascript 或`jQuery`设置 scrollTop/scrollLeft，但它在移动浏览器上运行不顺畅，所以我正在寻找一个纯 CSS 解决方案。

我在这里找到了固定列的解决方案：[jsfiddle.net/C8Dtf/20/](http://jsfiddle.net/C8Dtf/20/)但我不知道如何增强它以使标题也固定。

我希望它在 webkit 浏览器上工作或使用一些`css3`功能，但我再说一遍，我不想`Javascript`用于滚动。

**编辑：**这是我想要实现的行为示例：[https ://web.archive.org/web/20130829032141/http://datatables.net/release-datatables/extras/FixedColumns/css_size.html](https://web.archive.org/web/20130829032141/http://datatables.net/release-datatables/extras/FixedColumns/css_size.html)

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2018-05-24T18:50:37.133

# 具有固定标题行和第一列的纯 CSS 解决方案

在现代版本的 Chrome、Firefox 和 Edge 中，该`position: sticky`属性支持顶部和侧面。这可以与`div`具有`overflow: scroll`属性的 a 相结合，为您提供一个带有固定标题的表格，该表格可以放置在页面上的任何位置。

把你的桌子放在一个容器里：

```
<div class="container">
  <table></table>
</div> 
```

在您的容器上使用`overflow: scroll`以启用滚动：

```
div.container {
  overflow: scroll;
} 
```

正如[Dagmar](https://stackoverflow.com/users/1912127/dagmar)在评论中指出的那样，容器还需要 a`max-width`和 a `max-height`。

用于`position: sticky`让表格单元格粘在边缘和`top`, `right`, 或`left`选择要粘在哪个边缘：

```
thead th {
  position: -webkit-sticky; /* for Safari */
  position: sticky;
  top: 0;
}

tbody th {
  position: -webkit-sticky; /* for Safari */
  position: sticky;
  left: 0;
} 
```

正如评论中提到的[MarredCheese](https://stackoverflow.com/users/5405967/marredcheese)，如果您的第一列包含`<td>`元素而不是`<th>`元素，则可以`tbody td:first-child`在 CSS 中使用而不是`tbody th`

要将第一列中的标题固定在左侧，请使用：

```
thead th:first-child {
  left: 0;
  z-index: 1;
} 
```

```
/* Use overflow:scroll on your container to enable scrolling: */

div {
  max-width: 400px;
  max-height: 150px;
  overflow: scroll;
}

/* Use position: sticky to have it stick to the edge
 * and top, right, or left to choose which edge to stick to: */

thead th {
  position: -webkit-sticky; /* for Safari */
  position: sticky;
  top: 0;
}

tbody th {
  position: -webkit-sticky; /* for Safari */
  position: sticky;
  left: 0;
}

/* To have the header in the first column stick to the left: */

thead th:first-child {
  left: 0;
  z-index: 2;
}

/* Just to display it nicely: */

thead th {
  background: #000;
  color: #FFF;
  /* Ensure this stays above the emulated border right in tbody th {}: */
  z-index: 1;
}

tbody th {
  background: #FFF;
  border-right: 1px solid #CCC;
  /* Browsers tend to drop borders on sticky elements, so we emulate the border-right using a box-shadow to ensure it stays: */
  box-shadow: 1px 0 0 0 #ccc;
}

table {
  border-collapse: collapse;
}

td,
th {
  padding: 0.5em;
}
```

```
<div>
  <table>
    <thead>
      <tr>
        <th></th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
    </tbody>
  </table>
</div>
```

[https://jsfiddle.net/qwubvg9m/1/](https://jsfiddle.net/qwubvg9m/1/)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-10-24T20:32:09.960

如今，这**可以**通过仅使用带有属性的**CSS**来实现。`position: sticky`

这是一个片段：

（jsFiddle：[https](https://jsfiddle.net/hbqzdzdt/5/) ://jsfiddle.net/hbqzdzdt/5/ ）

```
.grid-container {
  display: grid; /* This is a (hacky) way to make the .grid element size to fit its content */
  overflow: auto;
  height: 300px;
  width: 600px;
}
.grid {
  display: flex;
  flex-wrap: nowrap;
}
.grid-col {
  width: 150px;
  min-width: 150px;
}

.grid-item--header {
  height: 100px;
  min-height: 100px;
  position: sticky;
  position: -webkit-sticky;
  background: white;
  top: 0;
}

.grid-col--fixed-left {
  position: sticky;
  left: 0;
  z-index: 9998;
  background: white;
}
.grid-col--fixed-right {
  position: sticky;
  right: 0;
  z-index: 9998;
  background: white;
}

.grid-item {
  height: 50px;
  border: 1px solid gray;
}
```

```
<div class="grid-container">
  <div class="grid">
    <div class="grid-col grid-col--fixed-left">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
      <div class="grid-item">
        <p>Hello</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
      <div class="grid-item">
        <p>P</p>
      </div>
    </div>

    <div class="grid-col grid-col--fixed-right">
      <div class="grid-item grid-item--header">
        <p>HEAD</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
      <div class="grid-item">
        <p>9</p>
      </div>
    </div>

  </div>
</div>
```

关于兼容性。它适用于所有主流浏览器，但不适用于 IE。有一个 polyfill，`position: sticky`但我从未尝试过。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-09-23T21:42:12.487

所有这些建议都很棒，但它们要么只修复标题或列，而不是两者，要么使用 javascript。原因 - 它不相信它可以在纯 CSS 中完成。原因：

如果可以做到这一点，您需要将多个可滚动的 div 嵌套在另一个内部，每个 div 都有一个不同方向的滚动。然后你需要将你的表格分成三部分——固定的标题、固定的列和其余的数据。

美好的。但是现在的问题 - 你可以让其中一个在滚动时保持原状，但另一个嵌套在 first 的滚动区域内，因此会被滚动到视线之外，因此无法固定在屏幕。'啊哈'你说'但我可以以某种方式使用绝对或固定位置来做到这一点' - 不，你不能。一旦你这样做，你将失去滚动该容器的能力。这是一个先有鸡还是先有蛋的情况——你不能两者兼得，它们会相互抵消。

我相信唯一的解决方案是通过 javascript。您需要完全分离出三个元素并通过 javascript 保持它们的位置同步。此页面上的其他帖子中有很好的示例。这个也值得一看：

[http://tympanus.net/codrops/2014/01/09/sticky-table-headers-columns/](http://tympanus.net/codrops/2014/01/09/sticky-table-headers-columns/)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-04-05T05:39:01.450

**这绝非易事。**

以下链接是一个工作演示：

**链接根据 lanoxx 的评论更新**

[http://jsfiddle.net/C8Dtf/366/](http://jsfiddle.net/C8Dtf/366/)

只要记住添加这些：

```
<script type="text/javascript" charset="utf-8" src="http://datatables.net/release-datatables/media/js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="http://datatables.net/release-datatables/media/js/jquery.dataTables.js"></script>
<script type="text/javascript" charset="utf-8" src="http://datatables.net/release-datatables/extras/FixedColumns/media/js/FixedColumns.js"></script> 
```

我没有看到任何其他方式来实现这一目标。**尤其不是仅使用 css。**

这要经历很多。*希望这可以帮助 ：）*

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-10-16T02:37:19.307

仅使用 CSS 的示例：

```
.table {
  table-layout: fixed;
  width: 500px;
  border-collapse: collapse;
}

.header th {
  font-family: Calibri;
  font-size: small;
  font-weight: lighter;
  border-left: 1px solid #000;
  background: #d0d0d0;
}

.body_panel {
  display: inline-block;
  width: 520px;
  height: 300px;
  overflow-y: scroll;
}

.body tr {
  border-bottom: 1px solid #d0d0d0;
}

.body td {
  border-left: 1px solid #d0d0d0;
  padding-left: 3px;
  font-family: Calibri;
  font-size: small;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
```

```
<body>

  <table class="table">

    <thead class="header">

      <tr>
        <th style="width:20%;">teste</th>
        <th style="width:30%;">teste 2</th>
        <th style="width:50%;">teste 3</th>
      </tr>

    </thead>
  </table>

  <div class="body_panel">

    <table class="table">
      <tbody class="body">

        <tr>
          <td style="width:20%;">asbkj k kajsb ksb kabkb</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

        <tr>
          <td style="width:20%;">2</td>
          <td style="width:30%;">2</td>
          <td style="width:50%;">3</td>
        </tr>

      </tbody>
    </table>

  </div>

</body>
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-04-04T13:06:26.950

我在 jsfiddle 中做了一些更改。这可能是你想要做的。

> [http://jsfiddle.net/C8Dtf/81/](http://jsfiddle.net/C8Dtf/81/)

我对标题进行了硬编码，如下所示：

```
<table id="left_table" class="freeze_table">
    <tr class='tblTitle'>
         <th>Title 1</th>
         <th>Title 2</th>
    </tr>
</table> 
```

我还添加了一些样式。

```
.tblTitle{
   position:absolute;
    top:0px;
    margin-bottom:30px;
    background:lightblue;
}
td, th{
    padding:5px;
    height:40px;
    width:40px;
    font-size:14px;
} 
```

*希望这是你想要的:)*

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-08-14T09:13:00.693

要修复标题和列，您可以使用以下插件：

*   [http://www.fixedheadertable.com/](http://www.fixedheadertable.com/)

* * *

***2019 年 7 月更新***

最近还出现[了一个纯 CSS 解决方案](https://css-tricks.com/position-sticky-and-table-headers/)，它基于应用于每个项目（而不是它们的父容器）的CSS 属性`position: sticky;`（[这里有更多详细信息）](https://developer.mozilla.org/en-US/docs/Web/CSS/position)`TH`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-07-25T09:39:04.587

我为这个问题找到了 Paul O'Brien 的出色解决方案，并希望分享链接： [https ://codepen.io/paulobrien/pen/LBrMxa](https://codepen.io/paulobrien/pen/LBrMxa)

我删除了页脚的样式：

```
html {
  box-sizing: border-box;
}
*,
*:before,
*:after {
  box-sizing: inherit;
}
.intro {
  max-width: 1280px;
  margin: 1em auto;
}
.table-scroll {
  position: relative;
  width:100%;
  z-index: 1;
  margin: auto;
  overflow: auto;
  height: 350px;
}
.table-scroll table {
  width: 100%;
  min-width: 1280px;
  margin: auto;
  border-collapse: separate;
  border-spacing: 0;
}
.table-wrap {
  position: relative;
}
.table-scroll th,
.table-scroll td {
  padding: 5px 10px;
  border: 1px solid #000;
}
.table-scroll thead th {
  position: -webkit-sticky;
  position: sticky;
  top: 0;
}

th:first-child {
  position: -webkit-sticky;
  position: sticky;
  left: 0;
  z-index: 2;
  background: #ccc;
}
thead th:first-child {
  z-index: 5;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-07-07T14:39:18.780

我最近不得不创建一个具有固定标题组和固定第一列的解决方案。我将表拆分为 div 并使用 jquery 来捕获窗口滚动。

[http://jsfiddle.net/TinT/EzXub/2346/](http://jsfiddle.net/TinT/EzXub/2346/)

```
var prevTop = 0;
var prevLeft = 0;

$(window).scroll(function(event){
  var currentTop = $(this).scrollTop();
  var currentLeft = $(this).scrollLeft();

  if(prevLeft !== currentLeft) {
    prevLeft = currentLeft;
    $('.header').css({'left': -$(this).scrollLeft()})
  }
  if(prevTop !== currentTop) {
    prevTop = currentTop;
    $('.leftCol').css({'top': -$(this).scrollTop() + 40})
  }
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-06T16:18:02.837

经过两天与 Internet Explorer 9 + Chrome + Firefox (Windows) 和 Safari (Mac) 的斗争，我找到了一个系统

*   兼容所有这些浏览器
*   不使用 javascript
*   仅使用 une div 和一张表
*   固定页眉和页脚（IE 除外），正文可滚动。具有相同列宽的标题和正文

结果： ![在此处输入图像描述](https://i.stack.imgur.com/G68Qv.png)

HTML：

```
 <thead>
    <tr>
      <th class="nombre"><%= f.label :cost_center %></th>
      <th class="cabecera cc">Personal</th>
      <th class="cabecera cc">Dpto</th>
    </tr>
  </thead>
  <tbody>
    <% @cost_centers.each do |cc| %>
    <tr>
      <td class="nombre"><%= cc.nombre_corto %></td>
      <td class="cc"><%= cc.cacentrocoste %></td>
      <td class="cc"><%= cc.cacentrocoste_dpto %></td>
    </tr>
    <% end %>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="3"><a href="#">Mostrar mas usuarios</a></td>
    </tr>
  </tfoot>
</table> 
```

CSS：

```
div.cost_center{
  width:320px;
  font-size:75%;
  margin-left:5px;
  margin-top:5px;
  margin-bottom: 2px;
  float: right;
  display: inline-block;
  overflow-y: auto;
  overflow-x: hidden;
  max-height:300px;  
}

div.cost_center label { 
  float:none;
  font-size:14px;
}

div.cost_center table{
  width:300px;
  border-collapse: collapse; 
  float:right;
  table-layout:fixed;
}

div.cost_center table tr{
  height:16px;
}
div.cost_center th{
  font-weight:normal;
}

div.cost_center table tbody{
  display: block;
  overflow: auto;
  max-height:240px;
}

div.cost_center table thead{
  display:block;
}

div.cost_center table tfoot{
  display:block;
}
div.cost_center table tfoot td{
  width:280px;
}
div.cost_center .cc{
  width:60px;
  text-align: center; 
  border: 1px solid #999;
}

div.cost_center .nombre{
  width:150px;
}
div.cost_center tbody .nombre{
  border: 1px solid #999;
}

div.cost_center table tfoot td{
 text-align:center;  
 border: 1px solid #999; 
} 

div.cost_center table th, 
div.cost_center table td { 
  padding: 2px;
  vertical-align: middle; 
}

div.cost_center table tbody td {
  white-space: normal;
  font:  .8em/1.4em Verdana, sans-serif;
  color: #000;
  background-color: white;
}
div.cost_center table th.cabecera { 
  font:  0.8em/1.4em Verdana, sans-serif;
  color: #000;
  background-color: #FFEAB5;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-02-25T03:39:21.440

我和一位同事刚刚发布了一个新的 GitHub 项目，该项目提供了一个 Angular 指令，您可以使用该指令用固定标题装饰您的表格：[https ://github.com/objectcomputing/FixedHeader](https://github.com/objectcomputing/FixedHeader)

它仅依赖于 css 和 angular，并带有添加一些 div 的指令。不需要 jQuery。

此实现不像其他一些实现那样功能齐全，但如果您的需要只是添加固定表，我们认为这可能是一个不错的选择。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-09-27T12:27:51.750

现有答案将适合大多数人，但对于那些希望在固定标题下和第一（固定）列右侧添加**阴影的人，这是一个工作示例（纯 css）：**

[http://jsbin.com/nayifepaxo/1/edit?html，输出](http://jsbin.com/nayifepaxo/1/edit?html,output)

使其工作的主要技巧是使用在`::after`each 中的每个第一个的右侧添加阴影：`td``tr`

```
tr td:first-child:after {
  box-shadow: 15px 0 15px -15px rgba(0, 0, 0, 0.05) inset;
  content: "";
  position:absolute;
  top:0;
  bottom:0;
  right:-15px;
  width:15px;
} 
```

我花了一段时间（太长了......）才能让它全部工作，所以我想我会为那些处于类似情况的人分享。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-05-06T15:00:55.570

```
/* Use overflow:scroll on your container to enable scrolling: */

div {
  max-width: 400px;
  max-height: 150px;
  overflow: scroll;
}

/* Use position: sticky to have it stick to the edge
 * and top, right, or left to choose which edge to stick to: */

thead th {
  position: -webkit-sticky; /* for Safari */
  position: sticky;
  top: 0;
}

tbody th {
  position: -webkit-sticky; /* for Safari */
  position: sticky;
  left: 0;
}

/* To have the header in the first column stick to the left: */

thead th:first-child {
  left: 0;
  z-index: 1;
}

/* Just to display it nicely: */

thead th {
  background: #000;
  color: #FFF;
}

tbody th {
  background: #FFF;
  border-right: 1px solid #CCC;
}

table {
  border-collapse: collapse;
}

td,
th {
  padding: 0.5em;
}
```

```
<div>
  <table>
    <thead>
      <tr>
        <th></th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
        <th>headheadhead</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
      <tr>
        <th>head</th>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
        <td>body</td>
      </tr>
    </tbody>
  </table>
</div>
```

需要修复页眉页脚

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-11-11T01:08:55.293

### 纯 CSS 示例：

```
<div id="cntnr">
    <div class="tableHeader">
        <table class="table-header table table-striped table-bordered">
            <thead>
                <tr>
                    <th>this</th>
                    <th>transmission</th>
                    <th>is</th>
                    <th>coming</th>
                    <th>to</th>
                    <th>you</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>we've got it...</td>
                    <td>alright you are go</td>
                    <td>uh, we see the Earth now</td>
                    <td>we've got it...</td>
                    <td>alright you are go</td>
                    <td>uh, we see the Earth now</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="tableBody">
        <table class="table-body table table-striped table-bordered">
            <thead>
                <tr>
                    <th>this</th>
                    <th>transmission</th>
                    <th>is</th>
                    <th>coming</th>
                    <th>to</th>
                    <th>you</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>we've got it...</td>
                    <td>alright you are go</td>
                    <td>uh, we see the Earth now</td>
                    <td>we've got it...</td>
                    <td>alright you are go</td>
                    <td>uh, we see the Earth now</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>

#cntnr {
    width: auto;
    height: 200px;
    border: solid 1px #444;
    overflow: auto;
}

.tableHeader {
    position: fixed;
    height: 40px;
    overflow: hidden;
    margin-right: 18px;
    background: white;
}

.table-header tbody {
    height: 0;
    visibility: hidden;
}

.table-body thead {
    height: 0;
    visibility: hidden;
} 
```

[http://jsfiddle.net/cCarlson/L98m854d/](http://jsfiddle.net/cCarlson/L98m854d/)

**缺点：**固定的标头结构/逻辑相当依赖于特定维度，因此**抽象可能不是一个可行的选择**。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-04-04T12:55:34.533

像这样的东西可能对你有用......它可能需要你为标题行设置列宽。

```
thead { 
    position: fixed;
} 
```

[http://jsfiddle.net/vkhNC/](http://jsfiddle.net/vkhNC/)

**更新：**

我不相信您提供的示例仅使用 CSS 即可。我希望有人能证明我错了。 [这是我到目前为止所拥有的](http://jsfiddle.net/vkhNC/6/)。它不是成品，但它可能是您的开始。我希望这可以为您指明一个有用的方向，无论它在哪里。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-09-25T17:11:46.860

另一种解决方案是使用 AngularJS。AngularUI 模块有一个名为的指令`ng-grid`，它支持称为列固定的功能。它不是 100% 纯 CSS，但也不是其他解决方案。

[http://angular-ui.github.io/ng-grid/#columnPinning](http://angular-ui.github.io/ng-grid/#columnPinning)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-11T22:50:12.327

这是我有点困惑后刚刚提出的解决方案。似乎需要设置一些 z-index 属性才能使其正常工作，我的解决方案并非完美无缺，但它适用于我的应用程序：

CSS（在 SCSS 中）的关键是首先设置非粘性元素的属性以建立 z-index 属性。

```
.wrapper {
position: relative;
white-space: nowrap;
overflow: auto;
height: 200px;
table {
    border-collapse: collapse;
    tbody {
        tr {
            td {
                padding: .5em .75em;
                box-shadow: inset 0px -1px 0px 0px #000000;
                position: relative;
                z-index: -9999;
                background: white;
                &:first-of-type {
                    position: -webkit-sticky;
                    position: sticky;
                    left: 0px;
                    background: #eee;
                    z-index: -999;
                    box-shadow: inset -1px -1px 0px 0px #000000;
                }
            }
            &:first-of-type {
                position: sticky;
                top: 0;
                td {
                    background: #eee; 
                    &:first-of-type {
                        left: 0;
                        top: 0;
                        background: #eee;
                        z-index: 999;
                    }
                }
            }
            &:nth-of-type(2) {
                position: sticky;
                top: calc(1em + 1em + 2px);
                background: white;
                td:first-of-type {
                    position: sticky;
                    left: 0;
                    z-index: 998;
                }
            }
        }
    }
} 
```

}

[https://codepen.io/the_Northway/pen/VwMmwXG](https://codepen.io/the_Northway/pen/VwMmwXG)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-02-15T08:34:07.353

这是我刚刚根据此处的答案使用 css 网格构建的另一个解决方案：

[https://codesandbox.io/s/sweet-resonance-m733i](https://codesandbox.io/s/sweet-resonance-m733i)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-06-09T15:06:34.263

Position : sticky 不适用于 chrome 中的 (thead) 和其他 webkit 浏览器（如 safari）中的某些元素。

但它适用于 (th)

```
body {
  background-color: rgba(0, 255, 200, 0.1);
}

.intro {
  color: rgb(228, 23, 23);
}

.wrapper {
  overflow-y: scroll;
  height: 300px;
}

.sticky {
  position: sticky;
  top: 0;
  color: black;
  background-color: white;
}
```

```
<div class="container intro">
  <h1>Sticky Table Header</h1>
  <p>Postion : sticky doesn't work for some elements like (thead) in chrome and other webkit browsers like safari. </p>
  <p>But it works fine with (th)</p>
</div>
<div class="container wrapper">
  <table class="table table-striped">
    <thead>
      <tr>
        <th class="sticky">Firstname</th>
        <th class="sticky">Lastname</th>
        <th class="sticky">Email</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>James</td>
        <td>Vince</td>
        <td>james@example.com</td>
      </tr>
      <tr>
        <td>Jonny</td>
        <td>Bairstow</td>
        <td>jonny@example.com</td>
      </tr>
      <tr>
        <td>James</td>
        <td>Anderson</td>
        <td>james@example.com</td>
      </tr>
      <tr>
        <td>Stuart</td>
        <td>Broad</td>
        <td>stuart@example.com</td>
      </tr>
      <tr>
        <td>Eoin</td>
        <td>Morgan</td>
        <td>eoin@example.com</td>
      </tr>
      <tr>
        <td>Joe</td>
        <td>Root</td>
        <td>joe@example.com</td>
      </tr>
      <tr>
        <td>Chris</td>
        <td>Woakes</td>
        <td>chris@example.com</td>
      </tr>
      <tr>
        <td>Liam</td>
        <td>PLunkett</td>
        <td>liam@example.com</td>
      </tr>
      <tr>
        <td>Jason</td>
        <td>Roy</td>
        <td>jason@example.com</td>
      </tr>
      <tr>
        <td>Alex</td>
        <td>Hales</td>
        <td>alex@example.com</td>
      </tr>
      <tr>
        <td>Jos</td>
        <td>Buttler</td>
        <td>jos@example.com</td>
      </tr>
      <tr>
        <td>Ben</td>
        <td>Stokes</td>
        <td>ben@example.com</td>
      </tr>
      <tr>
        <td>Jofra</td>
        <td>Archer</td>
        <td>jofra@example.com</td>
      </tr>
      <tr>
        <td>Mitchell</td>
        <td>Starc</td>
        <td>mitchell@example.com</td>
      </tr>
      <tr>
        <td>Aaron</td>
        <td>Finch</td>
        <td>aaron@example.com</td>
      </tr>
      <tr>
        <td>David</td>
        <td>Warner</td>
        <td>david@example.com</td>
      </tr>
      <tr>
        <td>Steve</td>
        <td>Smith</td>
        <td>steve@example.com</td>
      </tr>
      <tr>
        <td>Glenn</td>
        <td>Maxwell</td>
        <td>glenn@example.com</td>
      </tr>
      <tr>
        <td>Marcus</td>
        <td>Stoinis</td>
        <td>marcus@example.com</td>
      </tr>
      <tr>
        <td>Alex</td>
        <td>Carey</td>
        <td>alex@example.com</td>
      </tr>
      <tr>
        <td>Nathan</td>
        <td>Coulter Nile</td>
        <td>nathan@example.com</td>
      </tr>
      <tr>
        <td>Pat</td>
        <td>Cummins</td>
        <td>pat@example.com</td>
      </tr>
      <tr>
        <td>Adam</td>
        <td>Zampa</td>
        <td>zampa@example.com</td>
      </tr>
    </tbody>
  </table>
</div>
```

或[访问我的 codepen 示例](https://codepen.io/yogavicky/pen/QReepb)：

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2014-08-28T15:15:35.843

我认为这会对您有所帮助： [https ://datatables.net/release-datatables/extensions/FixedHeader/examples/header_footer.html](https://datatables.net/release-datatables/extensions/FixedHeader/examples/header_footer.html)

简而言之，如果你知道如何创建一个数据表，你只需要在你的底部添加这个 jQuery 行：

```
$(document).ready(function() {
    var table = $('#example').DataTable();

    new $.fn.dataTable.FixedHeader( table, {
        bottom: true
    } );
} ); 
```

bottom: true // 用于固定底部标题。

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2014-07-26T18:55:36.517

如果您只想使用纯 HTML 和 CSS，我有一个解决您的问题的方法：
在这个[jsFiddle 中](http://jsfiddle.net/lsAge/vR2qA/5/)，您可以看到一个非脚本解决方案，它提供了一个带有固定标题的表格。为固定的第一列调整标记也应该不是问题。您只需要为`hWrapper`-div 内的第一列创建一个绝对定位表并重新定位`vWrapper`-div。
使用服务器端或浏览器端的诱人引擎提供动态内容应该不是问题，我的解决方案适用于所有现代浏览器和 IE8 以后的旧浏览器。

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2017-03-21T13:52:56.230

只需要将样式更改为

```
<table style="position: relative;">
   <thead>
      <thead>
        <tr>
           <th></th>
        </tr>
      </thead>
   </thead>
   <tbody style="position: absolute;height: 300px;overflow:auto;">
      <tr>
         <td></td>
      </tr>
   </tbody>
</table> 
```

演示：[https ://plnkr.co/edit/Qxy5RMJBXmkaJAOjBtQn?p=preview](https://plnkr.co/edit/Qxy5RMJBXmkaJAOjBtQn?p=preview)

# magento - 更改 Magento 标头结帐 URL

> ID：15811657
> 
> 赞同：0
> 
> 时间：2013-04-04T12:48:11.750
> 
> 标签：magento, url, header, checkout

在 Magento 的标头中，结帐 url 转到 /checkout/onepage/。如何将其更改为 /onepagecheckout/？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:31:58.447

在这种情况下，请使用 url 重写。

你可以参考这个[链接](http://www.excellencemagentoblog.com/simple-url-rewrite-using-magento-xml)

# php - Swift Mailer：多收件人选项不起作用

> ID：15811658
> 
> 赞同：2
> 
> 时间：2013-04-04T12:48:11.970
> 
> 标签：php, email, swiftmailer

尽管有许多相同的问题，但没有一个解决方案对我有用。**仅当只有一个**收件人时才会发送邮件，否则会在下面生成错误。另外，我只发送内部电子邮件，没有外部电子邮件。

任何的想法？

**代码：**

```
$to = 'one@example.com, two@example.com, three@example.com';

$transport  = Swift_SmtpTransport::newInstance('192.168.whatever', 25);
$mailer     = Swift_Mailer::newInstance($transport);
$message    = Swift_Message::newInstance('Test')
                ->setFrom(array('myself@example.com'))
                ->setTo(array($to))
                ->setBody('html content goes here', 'text/html');

$result = $mailer->send($message);

echo $result; 
```

**错误**：

```
Fatal error: Uncaught exception 'Swift_RfcComplianceException' with message 'Address in mailbox given [one@example.com, two@example.com, three@example.com] does not comply with RFC 2822, 3.6.2.' in C:\wamp\www\ssl\swift_emailer\lib\classes\Swift\Mime\Headers\MailboxHeader.php:308 Stack trace: #0 C:\wamp\www\ssl\swift_emailer\lib\classes\Swift\Mime\Headers\MailboxHeader.php(238): Swift_Mime_Headers_MailboxHeader->_assertValidAddress('lukas.borecki@l...') #1 C:\wamp\www\ssl\swift_emailer\lib\classes\Swift\Mime\Headers\MailboxHeader.php(96): Swift_Mime_Headers_MailboxHeader->normalizeMailboxes(Array) #2 C:\wamp\www\ssl\swift_emailer\lib\classes\Swift\Mime\Headers\MailboxHeader.php(60): Swift_Mime_Headers_MailboxHeader->setNameAddresses(Array) #3 C:\wamp\www\ssl\swift_emailer\lib\classes\Swift\Mime\SimpleHeaderFactory.php(60): Swift_Mime_Headers_MailboxHeader->setFieldBodyModel(Array) #4 C:\wamp\www\ssl\swift_emailer\lib\classes\Swift\Mime\SimpleHeaderSet.php(75): Swift_Mime_SimpleHead in C:\wamp\www\ssl\swift_emailer\lib\classes\Swift\Mime\Headers\MailboxHeader.php on line 308 
```

**看着：**

[Swift 网站](http://swiftmailer.org/docs/sending.html) [swift 邮件程序错误 'Swift_RfcComplianceException'....](https://stackoverflow.com/questions/1490042/swift-mailer-error-swift-rfccomplianceexception-on-an-email-that-actually-work) [Google 论坛](https://groups.google.com/forum/?fromgroups=#!topic/swiftmailer/xuhi7RCe95c) 等等。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T12:56:37.227

尝试

```
$to = array('one@example.com', 'two@example.com', 'three@example.com');
....
->setTo($to) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T08:40:45.200

用 swiftmailer 试试这个例子：

## 参数.yml

目标：[email1，email2，email3]

## 服务：

您的服务名称：类：您的命名空间参数：["%destinatarios%"]

## 服务等级：

受保护的$destinatarios；

```
public function __construct($destinatarios)
{
    $this->destinatarios = $destinatarios;
}

->setCc($this->destinatarios) 
```

# amazon-web-services - Amazon VPC 到 VPC 连接

> ID：15811662
> 
> 赞同：2
> 
> 时间：2013-04-04T12:48:18.517
> 
> 标签：amazon-web-services, ipsec, amazon-vpc

我创建了一个运行 Racoon 的 Amazon EC2 Linux 实例，这个实例正在尝试连接其他 Amazon VPC IPSec 接口。我使用我的弹性 IP 地址作为客户网关，但我遇到了这些故障。

有人对此有任何想法吗？

```
2013-04-04 12:43:29: DEBUG: db :0x7f2583cda3b0: 169.254.255.93/30[0] 169.254.255.94/30[0] proto=any dir=fwd
2013-04-04 12:43:29: DEBUG: sub:0x7fff9bd61ba0: 169.254.255.93/30[0] 169.254.255.94/30[0] proto=any dir=in
2013-04-04 12:43:29: DEBUG: db :0x7f2583cda630: 169.254.255.93/30[0] 169.254.255.94/30[0] proto=any dir=in

2013-04-04 12:43:29: DEBUG: suitable inbound SP found: 169.254.255.93/30[0] 169.254.255.94/30[0] proto=any dir=in.

2013-04-04 12:43:29: DEBUG: new acquire 169.254.255.94/30[0] 169.254.255.93/30[0] proto=any dir=out

2013-04-04 12:43:29: [72.21.209.192] DEBUG: configuration "72.21.209.192[500]" selected.

2013-04-04 12:43:29: DEBUG: getsainfo params: loc='169.254.255.94/30' rmt='169.254.255.93/30' 
peer='NULL' client='NULL' id=0

2013-04-04 12:43:29: DEBUG: evaluating sainfo: loc='169.254.255.90/30', rmt='169.254.255.89/30', 
peer='ANY', id=0

2013-04-04 12:43:29: DEBUG: check and compare ids : value mismatch (IPv4_subnet)

2013-04-04 12:43:29: DEBUG: cmpid target: '169.254.255.94/30'

2013-04-04 12:43:29: DEBUG: cmpid source: '169.254.255.90/30'

2013-04-04 12:43:29: DEBUG: evaluating sainfo: loc='169.254.255.94/30', rmt='169.254.255.93/30', 
peer='ANY', id=0

2013-04-04 12:43:29: DEBUG: check and compare ids : values matched (IPv4_subnet)

2013-04-04 12:43:29: DEBUG: cmpid target: '169.254.255.94/30'

2013-04-04 12:43:29: DEBUG: cmpid source: '169.254.255.94/30'

2013-04-04 12:43:29: DEBUG: check and compare ids : values matched (IPv4_subnet)

2013-04-04 12:43:29: DEBUG: cmpid target: '169.254.255.93/30'

2013-04-04 12:43:29: DEBUG: cmpid source: '169.254.255.93/30'

2013-04-04 12:43:29: DEBUG: selected sainfo: loc='169.254.255.94/30', rmt='169.254.255.93/30', 
peer='ANY', id=0

2013-04-04 12:43:29: DEBUG:  (proto_id=ESP spisize=4 spi=00000000 spi_p=00000000 encmode=Tunnel 
reqid=0:0)

2013-04-04 12:43:29: DEBUG:   (trns_id=AES encklen=128 authtype=hmac-sha)

2013-04-04 12:43:29: DEBUG: in post_acquire

2013-04-04 12:43:29: [72.21.209.192] DEBUG: configuration "72.21.209.192[500]" selected.

2013-04-04 12:43:29: INFO: IPsec-SA request for 72.21.209.192 queued due to no phase1 found.

2013-04-04 12:43:29: DEBUG: ===

2013-04-04 12:43:29: INFO: initiate new phase 1 negotiation: 54.236.196.228[500]<=>72.21.209.192[500]

2013-04-04 12:43:29: INFO: begin Identity Protection mode.

2013-04-04 12:43:29: DEBUG: new cookie:
6d61a8ce6f870d1d

2013-04-04 12:43:29: DEBUG: add payload of len 52, next type 13

2013-04-04 12:43:29: DEBUG: add payload of len 16, next type 0

2013-04-04 12:43:29: ERROR: phase1 negotiation failed due to send error. 
6d61a8ce6f870d1d:0000000000000000

2013-04-04 12:43:29: ERROR: failed to begin ipsec sa negotication. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-30T16:35:24.360

如果您的两个 VPC 在同一个 AWS 区域中，那么您可以使用新发布的 VPC 对等连接功能。它允许您在两个 VPC 之间创建连接并通过它路由流量。请参阅 AWS 文档：[http ://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-peering.html](http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-peering.html)

如果您的 VPC 位于不同的区域，请参阅 Amir 的回答。

# excel - 从另一个工作簿在指定工作表中运行宏

> ID：15811663
> 
> 赞同：0
> 
> 时间：2013-04-04T12:48:20.040
> 
> 标签：excel, vba

这是我的问题：我有两个工作簿，一个是我的，比如 Projet.xlsm，另一个不是，比如 Query.xlsm。Query.xlsm 在我和我公司的很多人之间共享，所以我无法修改它。

我的 project.xlsm 旨在绘制一些用 Query.xlsm 提取的数据。我的工作是让它成为一个自动化的过程。

Query.xlsm 如何工作：在第一张表上有一些选项可供选择；然后我们只需单击第一张纸上的按钮。最后，所有数据都被提取并出现在第二张表中。

我在 project.xlsm 中构建了一个宏，它打开 Query.xlsm 并选择我想要的选项。现在我尝试从我的 project.xlsm 中的宏中“单击按钮”（Query.xlsm 中的 sheet1）。我尝试过这样的事情：[从另一个工作簿运行 excel 宏](https://stackoverflow.com/questions/2806065/running-excel-macro-from-another-workbook) 但我想我必须在某处提及我的工作表的名称。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:39:29.220

假设您打开了工作簿（听起来像您这样做），即使在 Private CommandButton Sub 上也对我有用。

```
Workbooks("Query.xlsm").Sheets("Sheet1").CommandButton1 = True
Workbooks("Query.xlsm").Sheets("Sheet1").CommandButton1 = vbClick 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:15:26.443

**您可以在第一张工作表的Query.xlsm**工作簿中创建一个公共过程。cmdClick 指的是activex 命令按钮的名称。下面是示例代码。

```
Public Sub cmdClick()
    CommandButton1_Click
End Sub 
```

您可以使用以下语法从**project.xlsm**调用此过程 。

```
Workbooks("testing.xlsm").Sheets("Sheet1").cmdClick 
```

# mysql - 使用mysql队列列出学生人数

> ID：15811666
> 
> 赞同：0
> 
> 时间：2013-04-04T12:48:28.063
> 
> 标签：mysql, sql, join

我正在学习 mySQL，但我有点困惑如何使用 mySQL 查询来表示...列出部门中的员工总数。

Emp(eid: integer, ename: string, age: integer, sale: real) Works(eid: integer, did: integer, pct_time: integer) Dept(did: integer, budget: real, managerid: integer)

*这是我的书正在使用的示例，但我想我只是在问有人可以帮助我使用 sum 聚合函数完成示例吗？或者我会完全用这个来表示......列出员工总数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:51:16.867

您需要先使用加入表`Dept`，以便所有记录（*所有部门*）显示在最终结果中，那些没有员工的部门将在列表中但值为。`Works``LEFT JOIN`*`0`*

 *```
SELECT  a.Did, COUNT(b.DId) TotalEmployee
FROM    Dept a
        LEFT JOIN Works b
            ON a.Did = b.DId
GROUP   BY a.Did 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:53:22.337

你会想要使用`SUM`，就像你说的那样。因此，您首先需要`Join`表，然后获取employee_id 行的总和。

```
Select Emp.eid, SUM(Emp.eid) as employee_sum From, Dept.did
Emp
LEFT JOIN Works On
Emp.eid = Works.eid
INNER JOIN Dept ON
Works.did = Dept.did
Group By Emp.eid, Dept.did 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:24:27.003

最简单的方法是简单地使用连接：

**选择计数（E.eid）**

**来自 Emp E,Works W,Dept**

**其中（E.eid = W.eid AND D.did = W.did**）；

**Works**表将两个表链接在一起，即**Emp**和**Dept**。因此，此查询将仅返回部门中的员工编号。*

# c# - jquery如何在c#中编写正确的json对象

> ID：15811670
> 
> 赞同：2
> 
> 时间：2013-04-04T12:48:37.640
> 
> 标签：c#, jquery, asp.net, json

在 C# 中编写 json 对象的最佳方法是什么？我有一段代码应该从 DB 中获取数据并写入 json 对象，但我对此并不清楚

```
[WebMethod]
public static string get_specialities(string ProfessionalID)
{
    Database db = DatabaseFactory.CreateDatabase("Connection String2");
    DbCommand dbCommand;
    dbCommand = db.GetStoredProcCommand("select_Professionals_Speciality");
    db.AddInParameter(dbCommand, "prof_id", DbType.Int16, Convert.ToInt16(ProfessionalID));
    IDataReader dr = db.ExecuteReader(dbCommand);
    //[{ id: 3, name: "test3" }]
    string return_str="[";
    int i = 0;
    while (dr.Read()) {
        if (i > 0)
            return_str += ",";
        return_str += "{id:" + dr["SpecialtyID"].ToString().Trim() + ",name:" + dr["SpecialtyName"].ToString().Trim() + "}";
        i++;
    }
    return_str += "]";
    return return_str;
} 
```

这将返回下面的对象，该对象格式错误

```
{"d":"[{id:67,name:Kardiyoloji}]"} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:08:17.120

尝试使用[JavaScriptSerializer 类](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)：

```
List<Person> people = new List<Person>();
Person p = new Person();

while (dr.Read()) {
    p = new Person();
    p.id = dr["SpecialtyID"].ToString().Trim();
    p.name = dr["SpecialtyName"].ToString().Trim();
    people.Add(p);
}

JavaScriptSerializer serializer = new JavaScriptSerializer();
string return_str = serializer.Serialize(people); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:54:56.427

关于您提供的代码，正确的 json 应该是：

```
{"d":[{"id":67,"name":"Kardiyoloji"}]} 
```

您可以使用 jsonlint 检查：http: [//jsonlint.com/](http://jsonlint.com/)

使用序列化程序。我建议 NewtonSoft。您可以在周围找到很多示例，否则请在此处索取代码片段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:55:17.073

直接转换为字符串通常不是一个好主意...您应该使用诸如作业之类的序列化...但是您可以像这样尝试

```
{"d":'[{"id":67,"name":"Kardiyoloji"}]'} 
```

你会再次反序列化 d 的值吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:00:24.653

我假设您不知道如何在您的字符串中编写特殊字符，这`"`在您的情况下是双倍配额？

代替： `"{id:" + dr["SpecialtyID"].ToString().Trim() + ",name:" + dr["SpecialtyName"].ToString().Trim() + "}";`

为了

`"{\"id\":" + dr["SpecialtyID"].ToString().Trim() + "\",\"name\":\"" + dr["SpecialtyName"].ToString().Trim() + "\"}";`

会做你需要的。但更好的方法是使用`NewtonSoft`序列化程序进行 JSON 处理。

希望它有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T13:00:59.667

我建议您避免手动构建 JSON 字符串。

而是将 db 数据映射到相应的对象（实体？），然后将其序列化为 JSON。

您可以使用[Javascript 序列化](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)器。我也使用[JayRock 库](http://jayrock.berlios.de/)。

# java - 检查队列以打印所有元素

> ID：15811678
> 
> 赞同：0
> 
> 时间：2013-04-04T12:48:50.573
> 
> 标签：java, oop, queue

我目前正在为我的编程考试进行修改，我在过去的一篇论文中遇到了一个让我相当困惑的问题。

我有两个类，队列和节点，如下所示。

该问题指出，我必须通过将必要的代码添加到将存储在队列中的所有数据打印到控制台的 inspectQueue 方法中来扩展 Queue 类的行为。

我能想到的唯一解决方案，它非常弱，是有一个简单的 ArrayList 并且每次元素入队/出队时，然后将节点添加到列表中/从列表中删除节点。

我是否有更好的解决方案？我真的很感激一些指导。

我已经评论了我实现“解决方案”的代码，其余代码是它在试卷中的显示方式。

谢谢你的时间。

队列.java

```
public class Queue {

protected Node head;
protected Node last;

    //added by me
    private ArrayList<Node> nodes = new ArrayList<Node>();
    //end my add

public boolean isEmpty() {
    return (this.head == null);
}

public void enqueue(Object d) {
    Node n = new Node();
    n.setData(d);
    nodes.add(n); //added by me
    if (this.isEmpty()) {
        head = n;
        last = n;

    }
    else {
        last.setNext(n);
        last = n;
    }
}

public Object dequeue() {
    if(this.isEmpty()) {
        this.last = null;
        return null;
    }
    else {
        Node h = this.head;
                    nodes.remove(h); //added by me
        head = h.getNext();
        return h.getData();
    }

}

public Object peek() {
    if(this.isEmpty()) {
        return null;
    }
    else {
        Node t = this.head;
        return t.getData();
    }
}

public void clearQueue() {
    this.head = null;
    this.last = null;
}

public void inspectQueue() {
         //added by me (all below)
     System.out.println("Inspecting Queue: (contains " + nodes.size() + " nodes)");
     for(Node n : nodes) {
      System.out.println(n.getData());
     }
}

} 
```

节点.java

```
public class Node  {

protected Object data;
protected Node next;

public void setNext(Node e) {
    this.next = e;
}

public Node getNext() {
    return this.next;
}

public void setData(Object d) {
    this.data = d;
}

public Object getData() {
    return this.data;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:54:34.607

你的节点形成一个链表，所以就这样做

```
public void inspectQueue() {
    Node n = head;
    while (n != null) {
        System.out.println(n.getData());
        n = n.getNext();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:54:12.707

您不需要数组，您将这些信息存储在 Node`next`属性中：

```
public void inspectQueue() {
    Node current = head;
    while(current != null) {
        System.out.println(n.getData());
        current = current.getNext();
    }
} 
```

该数据结构称为[链表](http://en.wikipedia.org/wiki/Linked_list)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:00:28.623

这是一个非常基本的数据结构，称为 LinkedList。在 Node 类的代码中，您可以看到以下内容：

```
protected Node next; 
```

这意味着每个节点还拥有对列表中下一个节点的引用。如果此 Node 是`null`，则列表中没有更多元素。知道了这一点，您可以像这样循环：

```
Node currentNode = this.head;
while(currentNode != null) {
    System.out.println(currentNode.getData().toString());
    currentNode = currentNode.getNext();
} 
```

这消除了 ArrayList 来存储您的引用的需要。LinkedList 是一种非常常用的数据结构，理解起来非常重要。如果您有任何问题，请继续提问！

如果您还想要大小，请保留一个计数器，每次调用时递增它`getNext()`，并在 for 循环后打印大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:53:30.227

更简单的解决方案是使用 开始`queue.head`并遍历节点的链表，并在进行过程中`node.next`打印数据。

# php - 传递一个 PHP 对象以在外部 JS 脚本中使用

> ID：15811681
> 
> 赞同：0
> 
> 时间：2013-04-04T12:48:54.093
> 
> 标签：php, javascript, ajax

我正在从数据库中获取一些信息并使用`json_encode()`. 行：`var row_data = <?php echo $month_stats ?>;`将对象转储到 JS 中。

但是现在我想将我的 JS 抽象到一个外部文件中，所以突然间我不能只`echo`将对象的内容放入 JS 中，因为 PHP 在那里不会有任何存在。

所以我需要以某种方式（通过 AJAX？）将 PHP 对象`$month_stats`直接发送到 JS，以便它可以独立于 PHP 使用信息，但我不确定这是如何实现的。任何指针？

```
<?php

include 'db.php';

$month_stats = generate_monthly_count_stats($conn);
?>

<!DOCTYPE html>
<html>
    <head>

    <script type="text/javascript">

    var row_data = <?php echo $month_stats ?>;
    console.log(row_data);

    </script>

    </head>

    <body>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:52:51.340

当你把 JS 放到一个外部文件中时，使它成为一个带有一个参数的函数。

在您的 .js 文件中：

```
function logRowData(var1)
{
    console.log(var1);
} 
```

在您的 .php 文件中：

```
<head>
<?php
    include(filename.js);
?>
</head> 
```

要记录统计信息，您可以调用 php 文件。

```
<script type="text/javascript">
    logRowData($month_stats)
</script> 
```

[更多关于 JS 函数的信息](http://www.w3schools.com/js/js_functions.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:53:10.343

您可以简单地回显变量并在外部文件中访问它：

```
<script type="text/javascript">var row_data = <?php echo $month_stats ?>;</script>
<script type="text/javascript" src="external.js"></script> 
```

row_data 现在是一个全局变量，因此您可以在 external.js 中访问它。但是，如果您有很多其他变量，最好将其添加到命名空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:53:44.993

您可以在 .js 文件中创建一些 javascripn 函数

```
myFunction(obj) {
    console.log(obj);
} 
```

在您的 php 文件中，您可以这样做：

```
<script type="text/javascript">
myFunction(<?php echo $month_stats ?>);
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:52:39.067

如果您`row_data`在包含的 Javascript 文件中引用该变量，它应该可以工作，因为您在全局范围内声明它。这是一篇供参考的文章： http: [//snook.ca/archives/javascript/global_variable](http://snook.ca/archives/javascript/global_variable)

# java - apache 扭矩项目的入口点

> ID：15811682
> 
> 赞同：3
> 
> 时间：2013-04-04T12:48:55.783
> 
> 标签：java, jsp, jboss, xdoclet, apache-torque

我有一个项目，其中包含`webroot`文件夹名称战争并包含类似的结构

![在此处输入图像描述](https://i.stack.imgur.com/2N9dk.png)

但它不包含`web.xml`Web 项目的其他常见入口点。我如何启动这个扭矩项目？扭矩网络项目的入口点是什么？我的另一个问题是`xdoclet`我结构中的文件夹包含一个文件夹名称`merge`，其中包含一些文件。`servlet mapping`所以什么是`xdoclect`servlet 的连接和映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T08:50:09.913

我想您会在 build.xml 中找到问题的答案。可能您需要构建您的项目（描述符和 xdoclet 工作都将由 ANT 完成）。

为了做到这一点，一个好的起点可能是：

*   你在哪里下载了这个项目结构
*   打开一个shell，进入build.xml所在的目录并输入

    蚂蚁——项目帮助

我假设蚂蚁在你的路径中。否则，您可以在 ant 命令的前面加上 ant 命令的整个路径。

# matlab - MATLAB：按扩展名从文件夹加载文件

> ID：15811683
> 
> 赞同：5
> 
> 时间：2013-04-04T12:48:56.833
> 
> 标签：matlab, filesystems

将具有相同扩展名的文件夹中的所有文件加载到 MATLAB 中的最简单方法是什么？

我以前的解决方案：

```
%%% Will load a file if its filename is provided
%%% USAGE: (Best save data to a variable to work with it.)
%%% >> x = loadwrapper('<file_name>')
%%% ... and then use 'x' all the way you want.
%%% <file_name> works with absolute and relative paths, too.

function [ loaded_data ] = loadwrapper( file_name )

    files = dir(file_name);
    loaded_data = load(files.name);

end 
```

和

```
%%% put this in a new script, in a function it WILL NOT WORK!
%%% and fix your paths, ofc. i left mine in here on purpose.

%%% SETTINGS
folderName='/home/user/folder/';
extension='*.dat';

%%% CODE
concattedString=strcat(folderName, extension);
fileSet=dir(concattedString); 

% loop from 1 through to the amount of rows
for i = 1:length(fileSet)

    % load file with absolute path, 
    % the fileSet provides just the single filename
    load (strcat(folderName, fileSet(i).name)); 

end

%%% TIDY UP
%%% only imported files shall stay in workspace area
clear folderName;
clear extension;
clear concattedString;
clear fileSet;
clear i; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T12:54:26.783

您可以使用`dir`来获取所有需要的文件。然后，您可以使用 for 循环遍历它们并`load`为每个循环调用。例如，以下内容：

```
files = dir('C:\myfolder\*.txt');
for k = 1:length(files)
    load(files(k).name, '-ascii')
end 
```

加载扩展名为“txt”的“C:\myfolder”中的所有文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T12:53:26.880

如果要从目录中导入所有函数，可以使用 addpath ：

在 matlab 中，您位于 c:\matlab\work 目录中，然后点击：

```
addpath directory_where_all_my_functions_are 
```

导入所有功能`c:\matlab\work\directory_where_all_my_function_are`

`help addpath`在 matlab 中获取更多信息

# android - 电源按钮中断时无法暂停声音

> ID：15811688
> 
> 赞同：1
> 
> 时间：2013-04-04T12:49:12.170
> 
> 标签：android, andengine

嗨，我正在使用andengine 开发游戏。电源按钮中断时我无法暂停音乐。在清单文件中，我添加了：

```
 android:configChanges="orientation|keyboard|keyboardHidden" 
```

code-onPause 和 onResume 方法

```
protected void onPause() {
    if(menumusic!=null)
    menumusic.pause();
    super.onPause();
    this.mEngine.onPause() ;
}
protected void onResume() {
    if(menumusic!=null)
    menumusic.resume();
    super.onResume();
    this.mEngine.onResume();
} 
```

问题是按下电源按钮时`onPause()`方法正在调用并立即`onResume()`调用。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:17:19.510

试试这个..希望这可以帮助你使用 onWindowFocusChanged 来帮助恢复游戏。直到你回到游戏中，它才能工作并且音乐不会恢复： [http ://www.andengine.org/forums/gles2/onresume-being-called-when-device-should-be-paused-t8748.html#p42961](http://www.andengine.org/forums/gles2/onresume-being-called-when-device-should-be-paused-t8748.html#p42961)

# javascript - phantomjs 获取所有 img 元素

> ID：15811690
> 
> 赞同：1
> 
> 时间：2013-04-04T12:49:16.877
> 
> 标签：javascript, phantomjs, dom-traversal

在我为自己做的练习中，我有以下代码：

```
var imgs = page.evaluate(function() {
   return document.images;
});

for (var i in imgs){
    console.log("source: " + i.src);
} 
```

但我只收到多个“未定义”消息。

当我尝试 getAttribute('src') 时，我得到：“'undefined' is not a function...”错误消息。

我已经验证该页面具有带有 src 属性的 img 元素。

解决方案：

我按照这里的建议解决了这个问题：

```
for (var i = 0; i < imgs.length; i++){
    if (imgs[i])
        console.log("source: " + imgs[i].src);
} 
```

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/9329446/for-each-in-an-array-how-to-do-that-in-javascript)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:08:13.970

试试这个：

```
for (var i = 0; i < imgs.length; i++) {
    console.log("source: " + imgs[i].src);
} 
```

反而

```
for (var i in imgs){
    console.log("source: " + i.src);
} 
```

# html - 花式边框分隔线

> ID：15811693
> 
> 赞同：0
> 
> 时间：2013-04-04T12:49:24.033
> 
> 标签：html, css

我正在尝试创建以下内容（注意两端的 1 像素间隙）：

![花式分隔线](https://i.stack.imgur.com/yubJP.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:24:37.370

如果你试试：

```
<hr class="fancy"> 
```

使用以下 CSS：

```
hr.fancy {
    border: 1px solid black;
    border-width: 1px 0px;
    color: black;
    height: 5px;
    position: relative;
}
hr.fancy:after {
    content: '\A';
    position: absolute;
    bottom: -1px;
    right: 0px;
    display: block;
    width: 1px;
    height: 7px;
    border-left: 1px solid white;
}
hr.fancy:before {
    content: '\A';
    position: absolute;
    bottom: -1px;
    left: 0px;
    display: block;
    width: 1px;
    height: 7px;
    border-right: 1px solid white;
} 
```

看看：http: [//jsfiddle.net/audetwebdesign/P7umD/](http://jsfiddle.net/audetwebdesign/P7umD/)

您可以使用像素宽度来获得更大胆的外观。

**浏览器兼容性**
我在 Firefox 和 Chrome 中检查了这一点，并且标记呈现一致。

但是，在 IE9 中不起作用，您只会得到双线而不是书尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:06:19.397

也许`border-image`会成功

[http://www.w3schools.com/cssref/css3_pr_border-image.asp](http://www.w3schools.com/cssref/css3_pr_border-image.asp)

[http://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

或者您可以使用`div`基于解决方案

```
<div class="border">
    Content

    <div class="left"></div>
    <div class="right"></div>
</div>

.border {
    border-width:0px;
    border-style: double;
    border-color: grey;
    border-bottom-width: 3px;
    position: relative;
}
.left,
.right{
    position: absolute;
    width: 1px;
    height: 3px;
    bottom: -3px;
    background-color: white;
}
.left {
    left: 1px;
}
.right {
    right: 1px;
} 
```

[http://jsfiddle.net/zCEKp/](http://jsfiddle.net/zCEKp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:55:03.407

这是你想要的吗？

HTML：

```
<div class="box">
        <div class="top-left"></div>
        <div class="top-right"></div>
        <div class="bottom-left"></div>
        <div class="bottom-right"></div>
</div> 
```

CSS：

```
.box{
    position:relative;
    border:3px double;
    width:100px;
    height:50px;
}
.top-left, .top-right, .bottom-left, .bottom-right {
    position:absolute;
    width:4px;
    height:4px;
    border-left:1px #fff solid;
    border-right:1px #fff solid;
}
.top-left, .top-right{
    top:-4px;
}
.top-left, .bottom-left{
    left:-4px;
}
.top-right, .bottom-right{
    right:-4px;
}
.bottom-left, .bottom-right {
    bottom:-4px;
} 
```

[这是 jsFiddle 示例。](http://jsfiddle.net/H3rwr/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:15:14.630

这个纯 CSS 解决方案可能对您有用：

html标记：

```
<div class="fancydivider">
    <div class="left">&nbsp;</div>
    <div class="middle">&nbsp;</div>
    <div class="right">&nbsp;</div>
</div> 
```

CSS：

```
.fancydivider {
    clear: both;
}
    .fancydivider .left {
        border-bottom: double black;
        width: 1px;
        float: left;
    }
    .fancydivider .middle {
        border-bottom: double black;
        width: 50px;
        float: left;
        margin: 0 1px 0 1px;
    }
    .fancydivider .right {
        border-bottom: double black;
        width: 1px;
        float: left;
    } 
```

结果：

~~[http://jsfiddle.net/KNqR8/](http://jsfiddle.net/KNqR8/)~~

[http://jsfiddle.net/Lucidus/ZjGpS/1/](http://jsfiddle.net/Lucidus/ZjGpS/1/) [编辑：第一个链接中的 css 错误-我不知道发生了什么；-)]

![在此处输入图像描述](https://i.stack.imgur.com/phoSL.png)

# javascript - IE10 触控点间距

> ID：15811694
> 
> 赞同：5
> 
> 时间：2013-04-04T12:49:25.313
> 
> 标签：javascript, touch, flot, internet-explorer-10

我正在开发插件 flot.touch.js，它在 webkit 浏览器的图表上添加触摸交互（平移和缩放）。我也想让它在 IE10 上工作，但**我不知道如何检索我的接触点之间的空间**（我需要这个来计算比例）。

在 webkit 浏览器上，我们可以通过使用这些变量来做到这一点：

```
evt.originalEvent.touches[0].pageX
evt.originalEvent.touches[0].pagey
evt.originalEvent.touches[1].pageX
evt.originalEvent.touches[1].pageY 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:26:25.987

使用 IE 的指针事件，每个触摸点都会触发一个单独的事件。与 iOS 触摸事件（也由其他浏览器实现）不同，每个“指针”的状态都是单独跟踪的。将其视为一个更通用的事件，它将多个基于指针的输入设备分组。

每个事件对象都有一个`pointerId`属性，可用于跟踪其状态。要跟踪多次触摸，您需要将该 pointerId 与任何其他变量一起存储在事件处理程序函数范围之外的对象中，以及您可能需要的任何其他数据。例如：

```
var pointers = {};
function pointerDown(evt) {
    if (evt.preventManipulation)
        evt.preventManipulation();

    pointers[evt.pointerId] = [evt.PageX, evt.PageY];

    for (var k in pointers) {
        // loop over your other active pointers
    }
}
function pointerUp(evt) {
    delete pointers[evt.pointerId];
} 
```

进一步阅读：

*   [IEBlog - 在所有浏览器中处理多点触控和鼠标输入](http://blogs.msdn.com/b/ie/archive/2011/10/19/handling-multi-touch-and-mouse-input-in-all-browsers.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T13:36:52.317

就像安迪 E 说的。跟踪屏幕上有多少指针并存储每个指针的属性（在您的情况下，x 和 y 坐标，获取的表单事件）

可以在这里找到一个很好的多点触控示例：http: [//ie.microsoft.com/testdrive/Graphics/TouchEffects/](http://ie.microsoft.com/testdrive/Graphics/TouchEffects/)，您可以使用 F12 工具进入代码并获取 Script 标签下的所有代码：[http:// ie.microsoft.com/testdrive/Graphics/TouchEffects/Demo.js](http://ie.microsoft.com/testdrive/Graphics/TouchEffects/Demo.js)

在那里你可以找到这部分代码：

```
function addTouchPoint(e) {
    if(touchCount == 0) {
        document.addEventListener(moveevent, moveTouchPoint, false);
    }

    var pID = e.pointerId || 0;
    if(!touchPoints[pID]) {
        touchCount++;
        touchPoints[pID] = {x : e.clientX, y : e.clientY};
    }
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T15:11:14.627

如果您使用的是 Windows 8 平台，则 IE10 支持 MSGesture 对象。这个对象可以像 iOS 版本的手势事件一样使用。要初始化对象，我们必须设置目标对象以及在 MSPointerDown 上添加 MSPointer。例如：

```
var myGesture = new MSGesture();
var myElement = document.getElementById("MyCanvas");
myGesture.target = myElement;  //sets target
myElement.addEventListener("MSPointerDown", function (event){
   redGesture.addPointer(evt.pointerId);  // adds pointer to the MSGesture object
}, false); 
```

从这里，您可以为 MSGestureChange 函数添加一个事件侦听器来处理 event.scale 属性。请注意，如果没有设置目标，则会发生 InvalidStateError 异常。

# android - 为什么我当前的位置返回不同的结果#Android

> ID：15811696
> 
> 赞同：1
> 
> 时间：2013-04-04T12:49:27.737
> 
> 标签：android

每次我在 Galaxy Note 10.1 上运行我的应用程序时，我的当前位置都会得到不同的位置，尽管我没有移动一步！

下面是 GPS 类，我们在不同的类中使用它的一个对象

```
public class GPSTracker extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location = null; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            /*if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }*/
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS", "GPS is Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener Calling this function will stop using GPS in your
 * app
 * */
public void stopUsingGPS() {
    if (locationManager != null) {
        locationManager.removeUpdates(GPSTracker.this);
    }
}

/**
 * Function to get latitude
 * */
public double getLatitude() {
    if (location != null) {
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude() {
    if (location != null) {
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * 
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog On pressing Settings button will
 * lauch Settings Options
 * */
public void showSettingsAlert() {
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS settings");

    // Setting Dialog Message
    alertDialog
            .setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    Intent intent = new Intent(
                            Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                    mContext.startActivity(intent);
                }
            });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });

    // Showing Alert Message
    alertDialog.show();
}

@Override
public void onLocationChanged(Location location) {
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
} } 
```

这是清单

```
uses-permission android:name="com.fltirha.faltirha.permission.MAPS_RECEIVE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

我需要获得准确的数据，这些是我为当前位置获得的所有结果位置：

```
21.536638661233727 , 39.23742879844281
21.536857937756533 , 39.237249447421995
21.536522367052235 , 39.237391639089886 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:23:55.087

GPS 不是 100% 准确的。第一次读数和第二次读数之间的距离只有 30 米，您很容易出现如此大的误差，尤其是在室内时。

除了纬度和经度，GPS 位置提供程序还为您提供以米为单位的精度测量值。精度代表 1 个标准差的误差，这意味着大约 2/3 的时间您的真实位置与给定位置的距离不超过给定的米数。但这也意味着大约 1/3 的时间你的真实位置在更远的地方。我认为您的下一步应该是查看 GPS 精度读数是否正确。

一种有帮助的方法是对所有提供商的读数使用[卡尔曼滤波器](http://en.wikipedia.org/wiki/Kalman_filter)。这样做的好处是，它将准确度读数合并到对您位置的猜测中，因此低准确度的读数会被忽略，而准确度高的读数会得到更多的权重。如果你想使用卡尔曼滤波器，我建议从我上个月发布在“[平滑 GPS 数据”上的代码开始。](https://stackoverflow.com/questions/1134579/smooth-gps-data/15657798)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:18:21.410

没关系，以米为单位计算您的点之间的距离，您会发现它们之间的差异小于约 50 米。GPS有这样的精度是正常的，即使你根本不动，你也永远不会得到完全相同的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T19:03:48.787

如果您希望结果更准确，我建议：

1.  在户外清晰的天空中进行测量。

2.  不要只接受报告的第一个修复。根据我的经验，就准确性而言，“第一次修复是最糟糕的修复”。我会等到收到四五份职位报告后才决定使用一份。

3.  如果您需要多个位置，请不要停止 GPS 接收器！如果您停止它们，大多数 GPS 接收器都会丢失数据。诸如频率偏移、精确时间等之类的东西。所有这些都必须重新确定。如果您需要在 2 秒内修复，只需保持接收器运行即可。

不过，您不会每次都得到相同的答案。这就是 GPS 的本质。这是关于准确性，而不是完美。大多数情况下，大多数商用手机在开阔的天空中所能达到的最佳距离约为 3 到 5 米。

# c# - System.IO.out of memory 异常未处理以定义 List

> ID：15811697
> 
> 赞同：-2
> 
> 时间：2013-04-04T12:49:34.060
> 
> 标签：c#, .net, out-of-memory

目录相当大，大约 2 GB。我已经定义了一个名为 results 的新列表，它将在其中获取所有值。

我的代码在这里：

```
IEnumerable<string> textLines =  
              Directory.GetFiles(@C:\Users\karansha\Desktop\watson_query\, "*.*")
                        .Select(filePath => File.ReadLines(filePath))
                        .SelectMany(line => line)
                        .Where(line => !line.Contains("appGUID: wx"))
                        .ToList();

string searchKeyword = "WX Edit Bug";
List<string> results = new List<string>();

textLines.ToList().ForEach(textLine =>
{
   if (textLine.Contains(searchKeyword))
   {
      results.Add(textLine);
   }
});

int WX_Edit = results.Count;
Console.WriteLine("WX_Edit_Api=" + WX_Edit); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:52:51.877

不要使用`SelectMany`/ `ToList`，`ReadLines`因为它会枚举所有文件行并将巨大的结果存储在内存中。`ReadLines`您可以使用 a枚举`foreach`，或手动使用 a`StreamReader`仅逐行读取。例如，请参阅[http://msdn.microsoft.com/en-us/library/aa287535(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287535(v=vs.71).aspx)。

此外，如果只有计数相关，请使用`int`您增加的值，并避免将结果存储在`List<string>`.

试一试：

```
string searchKeyword = "WX Edit Bug";
int WX_Edit = Directory.GetFiles(@C:\Users\karansha\Desktop\watson_query\, "*.*")
                        .Select(filePath => File.ReadLines(filePath))
                        .SelectMany(line => line)
                        .Count(line => !line.Contains("appGUID: wx") && line.Contains(searchKeyword)); 
```

# gstreamer - Gstreamer:: g_signal_emit_by_name 的使用

> ID：15811699
> 
> 赞同：0
> 
> 时间：2013-04-04T12:49:38.320
> 
> 标签：gstreamer

我正在开发一个使用 gstreamer 播放 H264 转储的应用程序

管道是：appsrc - h264parse - ffdec_h264 - ffmpegcolorspace - deinterlace - autovideosink

数据流是:: PULL Mode from appsrc { 使用信号：need-data}

我想从应用程序中使用 PUSH 模式验证相同的应用程序：在文档中提到：我们需要调用“推送缓冲区”信号并发送缓冲区

我的代码片段是：

```
gst_app_src_set_emit_signals(source, TRUE);
g_signal_connect (source, "push-buffer", G_CALLBACK (start_feed), source); 
```

尽管创建了管道，但我没有收到任何回调：`start_feed()`

谁能帮助我，对于appsrc的'PUSH'模式操作到底需要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:52:29.130

根据[文档](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-libs/html/gst-plugins-base-libs-appsrc.html#gst-app-src-set-emit-signals)：

> 让appsrc 发出“new-preroll”和“new-buffer”信号。默认情况下禁用此选项，因为当应用程序更喜欢在拉模式下运行时，信号发射很昂贵且不需要。

因此，您可以尝试添加“新缓冲区”信号。“push-buffer”是一个动作，所以附加一个信号处理程序不会做任何事情，因为它是你应该在有数据时调用的东西，而不是调用回调的东西。

根据您的`start_feed`工作，您可能还在寻找“需要数据”信号（大概是管道需要更多数据时的信号）。

# android - 为android中的自定义切换设置禁用状态的图像

> ID：15811701
> 
> 赞同：2
> 
> 时间：2013-04-04T12:49:40.607
> 
> 标签：android, custom-controls, togglebutton

我在android中制作了一个自定义切换按钮，选中状态和未选中状态与两个图像一起工作正常，现在我想为切换按钮的禁用状态设置禁用图像。我该怎么做？谢谢！

这是我的代码

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_checked="false" android:drawable="@drawable/record_off" />
    <item android:state_checked="true" android:drawable="@drawable/record_on" />
</selector> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T13:11:19.723

在您的`selector`

```
<item android:drawable="@drawable/record_off" android:state_checked="false" android:state_enabled="true"/>
<item android:drawable="@drawable/record_on" android:state_checked="true" android:state_enabled="true"/>
<item android:drawable="@drawable/record_disabled" android:state_enabled="false"/> 
```

我正在使用这个：`@drawable/record_disabled`仅作为示例。您可以为其创建自己的名称，`drawable`就像您必须使用 ON 和 OFF 按钮一样。;-)

*请注意，我已`android:state_enabled="true"`为所有项目添加了一个属性。*

在这种情况下，您可以做的最简单的事情是转到放置 SDK 的位置。然后选择您正在构建的平台。转到该`data\res\drawable`文件夹​​，看看 Google 是如何做到的。

由于您正在自定义 a `Toggle button`，因此请搜索 this:`btn_toggle_holo_dark`或`btn_toggle_holo_light`在**drawable**文件夹中。

# telerik - Telerik 下拉菜单

> ID：15811704
> 
> 赞同：0
> 
> 时间：2013-04-04T12:49:45.540
> 
> 标签：telerik

我已将 Telerik 下拉列表与 viewbag 绑定。它运作良好。但是列出的项目是包装好的。
而不是像“阿拉伯联合酋长国”那样单行，而是 像
阿拉伯联合酋长国 一样

我如何打开订单项

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:48:30.860

这与 Telerik ASP.net 控件有关吗？

如果是这样，

您是否尝试在组合框的 aspx 中设置“NoWrap”属性？

```
NoWrap="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T04:33:51.297

我会检查控件的宽度，其中包括下拉列表值的容器。您可能必须更改 CSS 宽度......但它不会根据下拉值动态。

这是[Telerik 的建议](http://www.telerik.com/forums/dropdown-list-without-ellipsis-or-wrapping)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T15:29:20.573

您实际上是在使用下拉列表，还是在使用 Telerik ComboBox？组合框比普通下拉列表有更多的选项，并且在大多数情况下，从一个控件转换到另一个控件非常容易。这就像 steriods 上的下拉列表。使用组合框，有一个很棒的属性，称为 DropDownAutoWidth，您可以将其设置为启用/禁用。启用将根据下拉菜单中的项目自动调整下拉菜单的宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-13T18:14:30.633

试试这个演示中的代码：[Prevent Wrap of Kendo UI Drop down list item](http://jsfiddle.net/sun21170/TBkEe/487/)。

在演示中，您可以更改下拉菜单中任何项目的文本，您会注意到下拉菜单的宽度会自动调整，因此不会发生任何项目的换行。将此演示中的 JavaScript 放入`document.ready`事件中。

**标记**

```
<select id="ddl1">
    <option value="1">1</option>
    <option value="2">option 2</option>
    <option value="3">longer option 3</option>
    <option value="4">even longer option 4 dssd s dssas </option>
</select> 
```

**JavaScript**

```
$(document).ready(function() {
    $("#ddl1").kendoDropDownList();
    setWidth($("#ddl1"));
});

function setWidth(el)
{
    var d = el;
    var p = d.data("kendoDropDownList").popup.element;
    var w = p.css("visibility","hidden").show().outerWidth();
    p.hide().css("visibility","visible");
    d.closest(".k-widget").width(w);
} 
```

# android - 没有scrollView的Android滚动布局

> ID：15811706
> 
> 赞同：0
> 
> 时间：2013-04-04T12:49:50.330
> 
> 标签：android, scrollview

我有`listView`布局，所以我不能使用`ScrollView`. 问题很简单：当软键盘打开或所有布局都不可见时，如何使布局滚动？

# makefile - Makefile：为命令选项拆分输入文件

> ID：15811708
> 
> 赞同：0
> 
> 时间：2013-04-04T12:49:52.753
> 
> 标签：makefile, gnu-make

我当前的项目包含一个makefile，它的规则包括（简化后没有依赖项）：

```
SOURCES : = "file1.txt file2.txt file3.txt" # and so on

assembled.txt:
    myprog -I $(SOURCES) 
```

问题是它`myprog`不想要单个值，而是期望：

```
myprog -I file1.txt -I file2.txt ... 
```

如何在 Makefile 中处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:53:29.613

又快又脏：

```
SOURCES := file1.txt file2.txt file3.txt

SOURCES := $(addprefix -I , $(SOURCES))

assembled.txt:
    myprog -I $(SOURCES) 
```

稍微优雅一点：

```
SOURCES := file1.txt file2.txt file3.txt

assembled.txt:
    myprog $(foreach S, $(SOURCES),-I $(S)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T20:43:28.703

@Beta，

您的第一个示例（使用 addprefix）有点偏离。应该看起来像

```
SOURCES := file1.txt file2.txt file3.txt

assembled.txt:
    myprog $(addprefix -I , $(SOURCES)) 
```

我认为这比你的 foreach 版本好一点。

# ruby-on-rails - Rails：安装 active_merchant_payu_india 时出错

> ID：15811709
> 
> 赞同：1
> 
> 时间：2013-04-04T12:49:53.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, payment-gateway, activemerchant

有人安装了PayU支付网关吗？根据自述文件，需要安装 gem

```
 gem 'active_merchant_payu_india' 
```

并运行

```
 bundle install 
```

但它给出了错误：“在这台机器上的可用 gem 中找不到 gem 'active_merchant_payu_india (>= 0) ruby​​'。” 在捆绑安装。

有没有人遇到过这样的问题？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:14:25.040

[Gem 在https://rubygems.org/](https://rubygems.org/)上不可用。所以在你的 gemfile 中使用

```
gem 'active_merchant_payu_in', git: 'https://github.com/anujaware/active_merchant_payu_in.git' 
```

# macos - 实现 NSBrowserDelegate 协议的问题

> ID：15811712
> 
> 赞同：3
> 
> 时间：2013-04-04T12:49:59.707
> 
> 标签：macos, cocoa, nsbrowser

我可以让我的 NSBrowser 实例在第一列中显示正确的数据。但是，当我选择其中一个选项时，下一列只会显示同一组选项。我已经阅读了文档，查看了 Apple 的所有相关示例代码，以及我在互联网上可以找到的所有内容，但我根本无法找出实现所需方法的正确方法。我提供给浏览器的数据是一个字典数组。每个字典依次包含一个“子”键，它是另一个字典数组。这些字典有自己的“子”键，它们也是字典数组等。使用 JSON 进行描述（对象是字典，数组是数组），它看起来像这样：

```
data = [
    {
        name: 'David',
        children:[
            {
                name: 'Sarah',
                children: {...}
            },
            {
                name: 'Kevin',
                children: {...}
            }
        ]
    },
    {
        name: 'Mary',
        children:[
            {
                name: 'Greg',
                children: {...}
            },
            {
                name: 'Jane',
                children: {...}
            }
        ]
    }
] 
```

所以第一列应该显示“大卫”和“玛丽”。如果选择“David”，则下一列应显示“Sarah”和“Kevin”，依此类推。

我当前的实现依赖于我创建的自定义方法，该方法应该将浏览器的索引路径从提供的数据转换为相应的 NSArray 级别。这个方法看起来像：

```
- (NSArray *)getSelectionInBrowser:(NSBrowser *)browser
{
    NSArray *selection = browserData;
    NSIndexPath *path = [browser selectionIndexPath];
    for (NSUInteger i = 0; i < path.length; i++) {
        selection = [[selection objectAtIndex:i] objectForKey:@"children"];
    }
    return selection;
} 
```

我对所需 NSBrowserDelegate 协议方法的实现如下所示：

```
- (NSInteger)browser:(NSBrowser *)sender numberOfRowsInColumn:(NSInteger)column
{
    return [[self getSelectionInBrowser:sender] count];
}

- (NSInteger)browser:(NSBrowser *)browser numberOfChildrenOfItem:(id)item {
    return [[self getSelectionInBrowser:browser] count];
}

- (id)browser:(NSBrowser *)browser child:(NSInteger)index ofItem:(id)item {
    return [self getSelectionInBrowser:browser];
}

- (BOOL)browser:(NSBrowser *)browser isLeafItem:(id)item {
    return ![item isKindOfClass:[NSMutableArray class]];
}

- (id)browser:(NSBrowser *)browser objectValueForItem:(id)item {
    return nil;
}

- (void)browser:(NSBrowser *)browser willDisplayCell:(NSBrowserCell *)cell atRow:(NSInteger)row column:(NSInteger)column {
    NSArray *selection = [self getSelectionInBrowser:browser];
    cell.title = [[selection objectAtIndex:row] objectForKey:@"name"];
} 
```

NSBrowser 的第一列填充了正确的名称。但是，一旦我做出选择，程序就会因错误而崩溃`-[__NSArrayM objectAtIndex:]: index 4 beyond bounds [0 .. 0]`。进行一些调试后，它崩溃的代码行是`objectAtIndex:`我自定义的调用`getSelectionInBrowser:`。

这并不完全让我感到惊讶，因为即使在崩溃之前，我就认为我做错了，因为我依靠该自定义方法来检索当前选择。我想这项工作应该在委托方法本身内完成，并且当正确实施时，当前选择应该可以`item`在许多这些方法中提供的变量中访问。但是，我无法让它发挥作用。该`item`变量似乎总是只是根数据对象，而不是反映最“深入”的选择。

那么我该如何纠正我的实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T21:53:25.950

解决了！这是我的最终工作代码。不需要那个自定义`getSelection...`方法，而且我有几个委托方法是不必要的（只使用你不使用“基于项目的 API”）。

```
- (NSInteger)browser:(NSBrowser *)browser numberOfChildrenOfItem:(id)item {
    if (item) {
        return [[item objectForKey:@"children"] count];
    }
    return [browserData count];
}

- (id)browser:(NSBrowser *)browser child:(NSInteger)index ofItem:(id)item {
    if (item) {
        return [[item objectForKey:@"children"] objectAtIndex:index];
    }
    return [browserData objectAtIndex:index];
}

- (BOOL)browser:(NSBrowser *)browser isLeafItem:(id)item {
    return [item objectForKey:@"children"] == nil;
}

- (id)browser:(NSBrowser *)browser objectValueForItem:(id)item {
    return [item objectForKey:@"name"];
} 
```

第一种方法是告诉 NSBrowser 应该有多少行。第二种方法是您确定应在给定行（索引）中表示哪些数据。在这两种情况下，您必须首先检查是否`item`确实存在。如果不是，那是因为您位于数据的根目录（NSBrowser 中的第一列）。只有当 NSBrowser 中的一行（或项目！）被选中时，该`item`变量才会保留任何内容。最后一个方法应该返回您希望在给定行中显示的字符串。

希望这对未来的人们有所帮助。

# excel - VBA 嵌套在错误转到

> ID：15811713
> 
> 赞同：4
> 
> 时间：2013-04-04T12:50:00.087
> 
> 标签：excel, vba, error-handling, nested, goto

我有应该是嵌套错误检查的 VBA 代码，但它没有。代码是伪代码如下。但是，只要在错误中发生错误（例如，在循环中触发错误，发生goto SmallError，在SmallError 中发生错误），则不使用第二个GoTo。然后错误会破坏代码。

前任：

循环错误

转到小错误

SmallError 中的错误

代码中断（这里的代码应该 GoTo FatalError）

```
Sub DoThings()
    On Error GoTo SmallError
    'Coding Happens
    Do While(conditionhere)
       'Looping things happen
    GoTo LoopResume
SmallError:
    source = Err.source
    descript = Err.Description
    On Error GoTo Fatal Error
    'Small error processing happens
    Resume LoopResume
FatalError:
    source = Err.source
    descript = Err. Description
    On Error GoTo ExitError
    'Fatal Error processing happens
ExitError:
    Exit Sub
LoopResume:
count = count + 1 
Loop

On Error GoTo FatalError
'Finishing code happens
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:32:55.080

您不能在错误处理程序中使用 On Error 语句。参见例如[解释这一点的这篇文章](http://www.cpearson.com/excel/errorhandling.htm)。

但是，您可以做的是有一个单独的例程来处理“常规错误”。该例程可以有一个“致命错误”处理程序。您的代码将如下所示：

（编辑：编辑代码以在出现致命错误时启用退出）：

```
Sub DoThings()
On Error GoTo SmallError
    Dim fatalExit As Boolean
    'Coding Happens
    Do While(conditionhere)
       'Looping things happen
LoopResume:
       count = count + 1 
    Loop
On Error Goto SmallError2
'Finishing code happens
  Exit Sub
SmallError:
    handleError Err.Source, Err.Description, fatalExit
    If fatalExit Then 
       Exit Sub
    Else
      Resume LoopResume
    End If
SmallError2:
    handleError Err.Source, Err.Description, fatalExit
    Exit Sub
End Sub

Private Sub handleError(ByVal source As String,ByVal description As String, ByRef fatalExit As Boolean)
On Error Goto FatalError
  'Do "small error" handling here
   Exit Sub
FatalError:
  fatalExit = True
  'Do "fatal error" handling here
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:15:45.827

......你有`Fatal Error`你的`Goto`而不是`FatalError`，那不会让你到正确的位置......

将您的代码更新为：

```
On Error GoTo FatalError 
```

# ios - UIButton 不出现

> ID：15811714
> 
> 赞同：0
> 
> 时间：2013-04-04T12:50:00.617
> 
> 标签：ios, objective-c

我是新手`objective-c.`
谁能告诉我为什么在我运行代码时按钮没有出现。

这是我的代码：

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    button1 = [[UIButton buttonWithType:UIButtonTypeRoundedRect]initWithFrame:CGRectMake(3, 3, 30, 30)];
    [button1 setTitle:@"haha" forState:UIControlStateNormal];
    [button1 setBackgroundColor: [UIColor blackColor]];
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view addSubview:button1];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:57:02.667

在前面添加 `[self.view addSubview:button1];`行`initWithNibName``return self;`

**除此以外**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    button1 = [[UIButton buttonWithType:UIButtonTypeRoundedRect]initWithFrame:CGRectMake(3, 3, 30, 30)];
    [button1 setTitle:@"haha" forState:UIControlStateNormal];
    [button1 setBackgroundColor: [UIColor blackColor]];
    [self.view addSubview:button1]; 
} 
```

**编辑：**

检查，你设置`@property`好了吗`@synthesize`？？？

# ftp - phpDesigner 8 FTP

> ID：15811716
> 
> 赞同：0
> 
> 时间：2013-04-04T12:50:03.160
> 
> 标签：ftp, phpdesigner

所以我想我会在使用 Dreamweaver 多年后尝试一下这个软件，但是我用它的 ftp 浏览器浏览我的文件时遇到了问题。当我使用不同的 ftp 客户端登录时，我可以看到我的文件没有任何问题，但在 phpD 客户端中，我只能浏览“aspnet_client”。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:26:07.217

似乎一些损坏的 FTP 客户端无法获得您的用户名目录的正确路径，这个特定的客户端试图访问根目录，您所要做的就是向他提供您的 ftp 路径（而不是默认的“/”），通常 - 你的用户名。

# sql - 为什么 SQL Server 中的输出不同而 Oracle 中的输出相同？

> ID：15811720
> 
> 赞同：5
> 
> 时间：2013-04-04T12:50:14.227
> 
> 标签：sql, sql-server, oracle, tsql, plsql

为什么以下两个查询的输出在 SQL Server 中不同而在 Oracle 中相同？

```
SELECT 20.0/-2.0/5

SELECT 20/(-2.0)/5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:12:21.227

我不同意您关于输出应该相同的说法。
如果你问我 20/-2/5 多少输出，我会回答你它可以输出 -2 或 -50，取决于实现细节。

[在 Oracle](http://docs.oracle.com/html/A95915_01/sqopr.htm#i1004611)中，您唯一知道的是运算符 '*' 和 '/' 在 '+' 和 '-' 之前计算。但仅此而已。我没有找到任何关于优先级给予操作员 '*' 和 '/' 的文档。
由于两个查询都给出-2，所以可以假设括号是剩下的，计算是从左到右进行的。

[在 SQL Server 中，文档指定](http://msdn.microsoft.com/en-us/library/ms190276.aspx)

> 当表达式中的两个运算符具有相同的运算符优先级时，将根据它们在表达式中的位置从左到右计算它们。

所以这个计算符合规范：

```
20/2/5 = (20/2)/5 = 2 
```

现在添加减号

```
20/-2/5 = 20/(-2/5) = -50 
```

再次添加括号

```
20/(-2)/5 = (20/-2)/5 = -2 
```

所以不仅括号改变了顺序，减号也改变了。

事实上，结果应该被认为是未定义的，你不能依赖它。
添加一些括号以获得明确的结果并防止头痛。

# c++ - 如何替换所有shared_ptr (new_w ) 与 make_shared ()?

> ID：15811731
> 
> 赞同：0
> 
> 时间：2013-04-04T12:50:26.690
> 
> 标签：c++, regex, visual-studio-2010, replace

如何将正则表达式替换`shared_ptr<\w+\>\(new_w<\w+\>\(\)\)`为`make_shared<$1>()`where `$1`will be first `\w+`（通常全部替换`shared_ptr<T>(new_w<T>())`为`make_shared<T>()`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:09:33.027

添加捕获组：

```
shared_ptr<(\w+)\>\(new_w<\w+\>\(\)\) 
```

# windows-phone-7 - 如何为 Windows 手机列表（数据绑定应用程序）上的每个项目添加操作？

> ID：15811734
> 
> 赞同：0
> 
> 时间：2013-04-04T12:50:37.637
> 
> 标签：windows-phone-7

我是 Windows Phone 编程的新手。如何为 Windows Phone 数据绑定应用程序列表上的每个项目添加操作。

在 Android 编程中，我们可以添加 Click listener 以将操作添加到按钮或列表中开另一门课或做某事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:11:14.690

您可以使用 ListBox 显示数据列表。 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.controls.listbox(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.controls.listbox(v=vs.105).aspx)

然后您可以使用其“SelectionChanged”事件并执行您想要的操作。您可以使用“SelectedItem”属性来检查用户选择了哪个项目。

有关“LIstBox”的更多详细信息，请参阅本文：[http ://www.geekchamp.com/tips/wp7-listbox-selecteditem](http://www.geekchamp.com/tips/wp7-listbox-selecteditem)

# sql - 在 PostgreSQL 中，generate_series() 无法按预期使用 sum

> ID：15811735
> 
> 赞同：0
> 
> 时间：2013-04-04T12:50:39.163
> 
> 标签：sql, postgresql, join, sum, generate-series

我有一些名为分类的表，其中包含`classification_indicator_id`.
我需要总结这一点`ID`并放入 1 天系列。
我需要添加大约 20 列（与另一列`classification_indicator_id`）。
我修改了[上一个问题](https://stackoverflow.com/questions/15806497/sum-and-generate-series-doest-work-in-postgresql)的一些答案：

```
select
data.d::date as "data",
sum(c.classification_indicator_id)::integer as "Segment1",
sum(c4.classification_indicator_id)::integer as "Segment2",
sum(c5.classification_indicator_id)::integer as "Segment3"
from 
  generate_series(
    '2013-03-25'::timestamp without time zone,
    '2013-04-01'::timestamp without time zone,
    '1 day'::interval
) data(d)
left join classifications c on (data.d::date = c.created::date and c.classification_indicator_id = 3)
left join classifications c4 on (data.d::date = c4.created::date and c4.classification_indicator_id = 4)
left join classifications c5 on (data.d::date = c5.created::date and c5.classification_indicator_id = 5)
group by "data"
ORDER BY "data" 
```

但仍然无法正常工作。`sum`因为每一行都很大，并且当我添加额外的列时会增长。在`segment1`2013-03-26 有 4 列的第二个表中应该与第一个表等中的数量相同。

```
 With 3 column                      With 4 columns
data       | Segment1 | Segment2   data       | Segment1 | Segment2 | Segment3
--------------------------------   -------------------------------------------
2013-03-25 | 12       | 16         2013-03-25 | 12       | 16       | 20
--------------------------------   -------------------------------------------
2013-03-26 | 18       | 24         2013-03-26 | 108      | 144      | 180 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:54:59.727

正如[您之前的回答](https://stackoverflow.com/questions/15806497/sum-and-generate-series-doest-work-in-postgresql?noredirect=1#comment22487845_15811336)所评论的那样，您遇到了“代理交叉连接”。
我在这个相关答案中更详细地解释了它：
[两个 SQL LEFT JOINS 产生不正确的结果](https://stackoverflow.com/questions/12464037/two-sql-left-joins-produce-incorrect-result/12464135#12464135)

您的查询应该像这样工作：

```
SELECT d.created AS data
      ,c3.segment1
      ,c4.segment2
      ,c5.segment3
FROM (
   SELECT generate_series('2013-03-25'::date
                         ,'2013-04-01'::date
                         ,interval '1 day')::date AS created
    ) d
LEFT JOIN (
    SELECT created
          ,sum(classification_indicator_id)::integer AS segment1
    FROM   classifications
    WHERE  classification_indicator_id = 3
    GROUP  BY 1
    ) c3 USING (created)
LEFT JOIN (
    SELECT created
          ,sum(classification_indicator_id)::integer AS segment2
    FROM   classifications
    WHERE  classification_indicator_id = 4
    GROUP  BY 1
    ) c4 USING (created)
LEFT JOIN (
    SELECT created
          ,sum(classification_indicator_id)::integer AS segment3
    FROM   classifications
    WHERE  classification_indicator_id = 5
    GROUP  BY 1
    ) c5 USING (created)
ORDER  BY 1; 
```

假设这`created`是一个`date`，而不是一个`timestamp`。

或者，对于更快的查询，因为这已成为一个主题：

```
SELECT d.created AS data
      ,count(classification_indicator_id = 3 OR NULL)::int * 3 AS segment1
      ,count(classification_indicator_id = 4 OR NULL)::int * 4 AS segment2
      ,count(classification_indicator_id = 5 OR NULL)::int * 5 AS segment3
FROM (
   SELECT generate_series('2013-03-25'::date
                         ,'2013-04-01'::date
                         ,interval '1 day')::date AS created
    ) d
LEFT   JOIN classifications c USING (created)
GROUP  BY 1
ORDER  BY 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:05:00.017

无需连接：

```
select
    data.d::date as "data",
    sum((classification_indicator_id = 3)::integer * classification_indicator_id)::integer as "Segment1",
    sum((classification_indicator_id = 4)::integer * classification_indicator_id)::integer as "Segment2",
    sum((classification_indicator_id = 5)::integer * classification_indicator_id)::integer as "Segment3",
from 
    generate_series(
        '2013-03-25'::timestamp without time zone,
        '2013-04-01'::timestamp without time zone,
        '1 day'::interval
    ) data(d)
    left join
    classifications c on data.d::date = c.created::date
group by "data"
ORDER BY "data" 
```

# .net - 更改数据表（来自 AS400）列格式

> ID：15811741
> 
> 赞同：1
> 
> 时间：2013-04-04T12:50:50.863
> 
> 标签：.net, oledb, ibm-midrange

我有这个问题：

我们的 AS400 将日期保留为**十进制**，格式为*yyyyMMdd*，但是当我在我们的软件中需要它们时，它们应该是格式*为 ddMMyyy的***DateTime**

 *我怎样才能最好地获得正确的格式和类型？我查看了 IBM 网站以设置连接时的格式...但似乎您需要将日期放在 DateTime 类型的列中才能开始设置格式。

**[http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzaik%2Frzaikconnstrkeywordsformatprop.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzaik%2Frzaikconnstrkeywordsformatprop.htm)**

我还尝试克隆数据表并将适当的列设置为正确的数据类型，但随后我需要循环所有行和每个单元格以进行转换，这在大型查询中几乎是不可能的。

有人可以帮帮我吗？

这是我用来更改执行查询的日期字段的代码：

```
' convert date for selects
        If type = Operation.SelectMultipleRows Or type = Operation.SelectSingleValue Then

            For Each s As String In _datefields
                sql = sql.Replace(s, "REPLACE(CHAR(DATE(SUBSTR(CHAR(" & s & "), 1, 4) ||'-'|| SUBSTR(CHAR(" & s & "), 5, 2) ||'-'|| SUBSTR(CHAR(" & s & "), 7, 2)),EUR),'.','/') as " & s)
            Next

        End If 
```

只有在选择查询中给出了请求的字段时，上述方法才有效。如果您使用 * 那么它根本不起作用。

在 iSeries AS400 中，如果您知道表名，您可以获得所有列名的列表，但我不能依赖它，因为传递的查询可能包含连接，...。

例子：

```
SELECT COLUMN_NAME FROM QSYS2/COLUMNS WHERE TABLE_NAME = 'MYTABLE' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:15:23.377

在您的字段选择中请求重新格式化日期：

```
date(substr(datefield,1,4) || '-' || substr(datefield,5,2)|| '-' || substr(datefield,7,2)) as datefield 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T13:21:12.827

DB2 for IBM i 上有一个实际可用的日期数据类型。有一些较旧的数据库仍然使用十进制数而不是日期数据类型，这就是您所遇到的情况。

如果 IBM 管理员允许您将软件加载到 i 上，请尝试 Alan Campin 的[iDate 服务程序](http://www.think400.dk/downloads.htm)。它将为您提供一组用户定义的函数，这些函数将执行十进制到日期的转换，以便您可以使用相当简单的 SQL 语句来操作这些数字数据类型。

如果您无法将软件加载到 IBM 端，您将被迫通过以下一些丑陋的变体自己进行转换：

```
date(
     substr(char(numericDate),1,4) concat 
     '-' concat 
     substr (char(numericDate),5,2) concat 
     '-' concat 
     substr(char(numericDate),7,2)
  ) 
```

因为 DATE() 函数需要 ISO 格式的字符字段，所以需要这种变形。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T22:09:15.430

如果您无法下载或使用@Buck 的回答中提到的 SQL 函数，或者，我建议您（或某人）在数据库中创建一个 SQL 用户定义函数。

将其设为`DETERMINISTIC`函数，这意味着只要函数的输入相同，结果就会相同。这允许 DB2 缓存结果，这将为您提供更好的性能，因为它不必在每次再次看到相同的值时都重复计算。

也许是这样的：

```
CREATE FUNCTION YMD2DATE (ymd dec(8,0) )
                        returns  date
       SPECIFIC YMD2DATE_dec8
       LANGUAGE SQL
       CONTAINS SQL
       DETERMINISTIC
       NO EXTERNAL ACTION
       RETURNS NULL ON NULL INPUT
       NOT FENCED
       SET OPTION DBGVIEW = *SOURCE
prc:       BEGIN NOT ATOMIC  -- not atomic means dont rollback on error
             DECLARE ans    date    default '0001-01-01';
             SET     ans = date( insert(insert( trim(digits(ymd)) ,7,1,'-'),5,1,'-'))  );
             RETURN  ans;
           END prc
; 
```*

# javascript - 渲染后如何为fancybox2设置回调？

> ID：15811742
> 
> 赞同：1
> 
> 时间：2013-04-04T12:50:51.333
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我想在fancybox 渲染后为fancybox 2 设置一个回调函数。这可能吗？

我正在努力：

```
//myRenderedPopup.jsp
parent.$.fancybox.afterClose = function(){
    console.log("test");
} 
```

但它不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:04:23.857

您可以挂钩`afterShow`回调。[Fancybox 文档](http://fancyapps.com/fancybox/#docs)中还有其他可用的钩子。

> afterShow ：在打开的动画结束后调用

# c++ - 有什么办法可以使这个坐标比较功能更有效吗？

> ID：15811744
> 
> 赞同：0
> 
> 时间：2013-04-04T12:50:56.073
> 
> 标签：c++, visual-studio-2010

以下函数采用三个单词对象，并相互检查每个单词的字母坐标（在表格中）。这个想法是从没有相交字母坐标的列表中获取三个单词的组合。但是，当您有超过 600000 种可能的组合时，这将变得非常耗时。

```
bool lettersIntersect(word one, word two, word three)
{
    for(int i = 0; i < one.getLength(); i++)
        for(int j = 0; j < two.getLength(); j++)
            if(one.getLetterPosition(i).x == two.getLetterPosition(j).x && one.getLetterPosition(i).y == two.getLetterPosition(j).y)
                return true;
    for(int i = 0; i < two.getLength(); i++)
        for(int j = 0; j < three.getLength(); j++)
            if(two.getLetterPosition(i).x == three.getLetterPosition(j).x && two.getLetterPosition(i).y == three.getLetterPosition(j).y)
                return true;
    for(int i = 0; i < three.getLength(); i++)
        for(int j = 0; j < one.getLength(); j++)
            if(three.getLetterPosition(i).x == one.getLetterPosition(j).x && three.getLetterPosition(i).y == one.getLetterPosition(j).y)
                return true;
    return false;
} 
```

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:39:55.933

我可以给你一个让我立即印象深刻的提示。如果它具有误导性，请不要怪我。您可以在最后尝试一次并查看性能。

为每个单词对象创建映射（使用 stl），即`map_one`,`map_two`和`map_three`

将坐标值作为给定单词对象的每个字母的键添加到其各自的映射中。

然后使用这些地图检查是否有交叉路口。 [检查 C++ 中的地图是否包含来自另一个地图的所有键](https://stackoverflow.com/questions/12775028/check-if-map-in-c-contains-all-the-keys-from-another-map)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:13:16.920

我认为唯一可以优化的是避免双重检查：

```
 for(int i = 0; i < one.getLength(); i++)
        for(int j = i+1; j < two.getLength(); j++)
            if(one.getLetterPosition(i).x == two.getLetterPosition(j).x && one.getLetterPosition(i).y == two.getLetterPosition(j).y)
            return true; 
```

第二个 for 循环从 j = 0 更改为 j = i+1，这使您可以用一半的时间进行检查。

在两个坐标点之间进行检查是一个 ^2（n 平方）问题，这意味着进行检查所需的时间与您可以检查的元素数量的平方成正比。我认为除了避免双重检查之外，没有其他方法可以优化这一点，就像我解释的那样。

当然，除了通过引用传递之外，已经向您建议了like。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:27:19.860

在这个家庭作业问题或其他学习练习中，您打算使用以前教过的方法重新排列数据以加快搜索速度。重新排列数据后，您应该能够找到一种有效扫描数据以查找重复数据的方法。

# c++ - 重载的调用不明确

> ID：15811745
> 
> 赞同：4
> 
> 时间：2013-04-04T12:51:02.593
> 
> 标签：c++, compiler-errors, ambiguity

我有以下**编译器错误**：`"call of overloaded ‘reduceColors(ipl_image_wrapper&, ipl_image_wrapper&, int)’ is ambiguous"`

我有一个 IplImage (DrawingDetection.h) 的包装类：

```
#include <opencv2/opencv.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/objdetect/objdetect.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <boost/shared_ptr.hpp>

#include "Utils.h"

class ipl_image_wrapper
{
public:
    typedef boost::shared_ptr< IplImage > ipl_image_ptr_t;

    ipl_image_wrapper() {}
    ipl_image_wrapper( IplImage* img ) : _img( img, ipl_deleter ) {}

    IplImage*       get()       { return _img.get(); }
    const IplImage* get() const { return _img.get(); }

private:

static void ipl_deleter( IplImage* ipl_img )
{
 //some code
}

   ipl_image_ptr_t _img;
}; 
```

我有以下功能（Utils.h）：

```
#include "DrawingDetection.h"

int calculateHomogeneity(const ipl_image_wrapper &img, Factor & factor);
void reduceColors(const ipl_image_wrapper &img, ipl_image_wrapper &out, int levels);
int calculateCComponentsSize(const ipl_image_wrapper &img, Factor &factor); 
```

此函数没有其他声明（！）。我没有让它们超载。

**和有**错误的源代码（Utils.cpp）：

```
#include <boost/shared_ptr.hpp>
#include "Utils.h"

int calculateCComponentsSize(const ipl_image_wrapper img, Factor &factor)
{
    // some calculations
}
 void reduceColors(const ipl_image_wrapper &img, ipl_image_wrapper out, int levels)
{
    // some calculations
}
int calculateHomogeneity(const ipl_image_wrapper &img, Factor & factor)
{
    // some calculations
}
void getFactorsOfImage( const ipl_image_wrapper &image, Factor& factor )
{
    ipl_image_wrapper gray = cvCreateImage( cvGetSize ( image.get() ), IPL_DEPTH_8U, 1);

    // some calculations
    calculateHomogeneity( gray, factor ); // ok
    reduceColors( gray, gray, 20 ); // ambiguity !!
    int n1 = calculateCComponentsSize( gray, factor );// ambiguity !!
    reduceColors( gray, gray, 8 );// ambiguity !!
    int n2 = calculateCComponentsSize( gray, factor );// ambiguity !!

    // some calculations
} 
```

calculateHomogeneity(...) 函数与其他函数有什么区别？它们具有类似的参数列表。编译器在哪里发现了歧义？

**编辑：**

函数的声明顺序非常重要。

**没有**错误的源代码（Utils.cpp）：

```
#include <boost/shared_ptr.hpp>
#include "Utils.h"

void getFactorsOfImage( const ipl_image_wrapper &image, Factor& factor )
{
    ipl_image_wrapper gray = cvCreateImage( cvGetSize ( image.get() ), IPL_DEPTH_8U, 1);

    // some calculations
    calculateHomogeneity( gray, factor ); // ok
    reduceColors( gray, gray, 20 ); // ambiguity !!
    int n1 = calculateCComponentsSize( gray, factor );// ambiguity !!
    reduceColors( gray, gray, 8 );// ambiguity !!
    int n2 = calculateCComponentsSize( gray, factor );// ambiguity !!

    // some calculations
}
// After getFactorsOfImage function
int calculateCComponentsSize(const ipl_image_wrapper img, Factor &factor)
{
    // some calculations
}
 void reduceColors(const ipl_image_wrapper &img, ipl_image_wrapper out, int levels)
{
    // some calculations
}
int calculateHomogeneity(const ipl_image_wrapper &img, Factor & factor)
{
    // some calculations
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:27:04.940

实际上**有**两个不同`reduceColors`的函数：一个是声明的，它的第二个参数是`ipl_image_wrapper&`，另一个是定义的，它的第二个参数是`ipl_image_wrapper`。使它们相同。

# ruby-on-rails - 通过 ajax 在 rails 中保存从视图接收到的数据

> ID：15811749
> 
> 赞同：0
> 
> 时间：2013-04-04T12:51:10.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在控制器中止时，这是我从 Ajax 调用中获得的 javascript 对象的格式：

```
{
        "j_identifier" = > "24942",
        "charge" = > {
          "0" = > {
                  "complainant" = > "",
                  "address" = > "",
                  "name" = > "",
                  "agency" = > "",
                  "codefendant" = > {
                    "0" = > {
                            "name" = > "sdfsdsd",
                            "address" = > "fsdf",
                            "phone" = > "sdf"
                    },
                    "1" = > {
                           "name" = > "sdfs",
                           "address" = > "sdfs",
                           "phone" = > "sdf"
                    }
                  }
          },
          "1" = > {
                  "complainant" = > "",
                  "address" = > "",
                  "name" = > "",
                  "agency" = > "",
                  "codefendant" = > {
                    "0" = > {
                            "name" = > "sdfsdsd",
                            "address" = > "fsdf",
                            "phone" = > "sdf"
                    },
                    "1" = > {
                           "name" = > "sdfs",
                           "address" = > "sdfs",
                           "phone" = > "sdf"
                    }
                  }
         }
    }
} 
```

这就是我正在做的获取数据并保存它：

```
 jcharge = params[:charge]
 if !jcharge.nil?
    jcharge.each do |key,charge|
         e = JCharge.new(charge)
         e.cmap_id = data.id
         e.save
         charge_id = e.id
         codefd = charge.codefendant
         if !codefd.nil?
              codefd.each do |k,codef|
                  cod = JuCharge.new(codef)
                  cod.jucharge_id = data.id
                  cod.save                       
              end
         end

     end
 end 
```

我收到此解析错误：

```
 undefined method `codefendant' for #<ActiveSupport::HashWithIndifferentAccess:0x44b5ab0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:01:09.850

在你的例子`charge`中是一个哈希。您可以使用方括号访问其值：

```
charge.codefendant # undefined method
charge[:codefendant] #=> ... 
```

# radius - freeradius 在会计上执行脚本

> ID：15811750
> 
> 赞同：0
> 
> 时间：2013-04-04T12:51:12.963
> 
> 标签：radius, freeradius

我正在使用freeradius2，我想从Accounting-Request 上发送的radius 属性之一中提取数据。

你能告诉我会计部分需要哪些参数，以便我可以执行脚本并提取半径标题吗？

```
 accounting {
            acct_unique
            detail

        #update request {
           #execute script here
}

            sql_accounting
            attr_filter.accounting_response
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T20:37:40.700

```
update request {
    Tmp-String-0 := `/my/script "%{hex:Attribute}"`
} 
```

然后，您的脚本可以解析传递的十六进制并返回格式正确的属性。

# objective-c - 目标c中的@Property和{fields}有什么区别？

> ID：15811751
> 
> 赞同：3
> 
> 时间：2013-04-04T12:51:13.833
> 
> 标签：objective-c

我是一名 C# 程序员，现在我已经开始学习 Objective-c，一开始我有一些问题。我试图按照教程进行操作，所以在这里我遇到了标题所说的第一个问题。

我的目的是在C#中定义一些所谓的属性，我想给一个C#语言示例，它会是这样的。

```
public class Person
{
   public string name {get;set;}
   public int age  {get;set;}
} 
```

所以在这里我找到了两种实现方式。

1.

```
@interface Person : NSObject

@property NSString *name;
@property int age;

@end 
```

2.

```
@interface Person : NSObject
{
    NSString *name;
    int age;
}

@end 
```

我很想弄清楚有什么区别。

非常感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:56:10.957

您的第二个界面将转换为 C#，如下所示：

```
class Person {
    string name;
    int age;
} 
```

换句话说，实例变量类似于 C# 的字段，而属性与 C# 的属性非常相似。C# 的“自动”属性与 Objective C 的属性之间的最大区别在于，在 C# 中它是“全有或全无”：您要么使属性自动，要么为它声明一个变量。在 Objective C 上，您可以拥有一个自动生成的 getter 和一个手动编写的 setter（或相反）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:54:51.320

对于第二个，您只创建实例变量。
`@property`自动生成这些作为它们关联的 getter 和 setter 方法。

# java - 如何在不提交到服务器的情况下将大数据传递给jsp

> ID：15811756
> 
> 赞同：1
> 
> 时间：2013-04-04T12:51:27.167
> 
> 标签：java, javascript

我需要从 jsp 打开一个弹出窗口并将 json 数据传递到新窗口。我尝试通过查询字符串传递数据/将其设置在 cookie 中，即 setCookie("dataString",dataString,10);
但它们无法保存大量数据。弹出窗口显示表单的预览，所以我不想将这些数据存储在任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:00:16.177

这是一个很老的问题，简单的答案是让孩子从父母那里访问数据：

```
var opener = window.opener;
if(opener) {
    var oDom = opener.document;
    var elem = oDom.getElementById("your element");
    if (elem) {
        var val = elem.value;
    } 
```

}

# asp.net - 如何从作为链接提供的 Web 应用程序中获取 ms 字中的图像？

> ID：15811757
> 
> 赞同：0
> 
> 时间：2013-04-04T12:51:32.370
> 
> 标签：asp.net, ms-word

场景：我有一个在我的应用程序中生成报告（带有文本和图像内容）的选项，可以以 Web 格式和 Ms word 格式查看。

在 Word 中，报表中的图像是一个链接。这里的情况是，即使我删除了链接，图像也应该变得可见（在我的情况下它不是）。

我的问题是，如何将图像提取到word文档中，即使我们删除它的链接也可以查看它。

用于生成 ms word 报告即时使用 -“Response.AppendHeader("Content-Type", "application/msword");"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:10:37.120

- 转到插入 - 快速部件 - 字段...

在字段名称中，选择“包含图片”。

在“文件名或 URL”字段中，输入图片的 URL。

取消选中“数据未存储在文档中”。

如果在线图像的大小可以更改，最终会出现 2 个“调整大小...”复选框。

# c# - 在 Visual Studio 2010 中找不到 DataGridViewComboBoxColumn 的“SelectedIndex”属性

> ID：15811759
> 
> 赞同：0
> 
> 时间：2013-04-04T12:51:39.307
> 
> 标签：c#, winforms, visual-studio-2010, selectedindex, datagridcomboboxcolumn

我是 Windows 窗体应用程序开发的新手。

我正在使用可编辑的网格视图进行数据输入。

网格视图中的字段之一是 ComboBoxColumn 类型。我正在用代码填充数据。

我的问题是，如果数据项计数大于 0，则应自动选择第一项。

我的代码`Page_Load()` 是：

```
private void Form1_Load(object sender, EventArgs e)
{
    cn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=E:\Study\sem 6\Practice\WindowsFormsApplication1\Practice.accdb");
    cn.Open();
    cmd = new OleDbCommand("Select * from Grade", cn);
    da = new OleDbDataAdapter(cmd);
    ds = new DataSet();
    da.Fill(ds);
    cn.Close();
}

private void dataGridView1_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
{
    DataGridViewComboBoxCell cmb = (DataGridViewComboBoxCell)(dataGridView1.Rows[e.RowIndex].Cells[1]);
    cmb.DataSource = ds.Tables[0];
    cmb.DisplayMember = "Grd";
    cmb.ValueMember = "ID";

    if(cmb.Items.Count > 0)
    // Here I am not finding the the combo box's SelectedIndex Property.
} 
```

请帮助解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:17:44.533

该类`DataGridViewComboBoxCell`没有这些属性。在[文档中查看](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcomboboxcell.aspx)

[其他](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/be964ef4-daf9-4c5b-8e5a-08bd9d5ad3f9/)人尝试了不同的方法。在您的代码中，它看起来像这样：

```
 private ComboBox _chashedComboBox;

    private void dataGridView1_EditingControlShowing()
    {
       _chashedComboBox = e.Control as ComboBox;
    }

    private void dataGridView1_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
    {
            var cmb = _chashedComboBox;
            if(cmb != null)
            {
              cmb.DataSource = ds.Tables[0];
              cmb.DisplayMember = "Grd";
              cmb.ValueMember = "ID";

              if(cmb.Items.Count > 0) 
                cmb.SelectedIndex = 0;
             }
    } 
```

# jsdoc - 为什么 JSDoc 将所有 JS 模块的文档注释合并到一个文件中？

> ID：15811761
> 
> 赞同：1
> 
> 时间：2013-04-04T12:51:43.887
> 
> 标签：jsdoc, js-amd

我在一个目录中有多个 JS 文件（AMD 模块）。当我运行 jsdoc 命令时，它会生成一个 index.html 文件，其中包含所有文件中所有方法的文档注释。为什么将所有方法合并到一个文件中？

我正在使用以下命令

```
jsdoc D:\JSworks\shell\widgets -r -d D:\output 
```

我希望 index.html 具有指向每个模块的链接，单击它应该显示仅该特定模块的方法的文档。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T15:49:35.037

我不知道您的类的外观如何，但这里有一个示例，说明如何注释 AMD 模块以便 JSDoc 为其正确生成文档：

```
/**
 * A Model for users
 * @module  UserModel
 * @exports UserModel
 * @extends AbstractModel
 */

define(["model/AbstractModel"], 
function(AbstractModel ) {

    return UserModel = new Class(
        /** @lends module:UserModel */
        {
            Extends : AbstractModel,

            /**
             * Constructor
             * @memberOf module:UserModel#
             */

            initialize: function() {
                this.parent();
            },

            /**
             * Sets the model value
             * @memberOf module:UserModel#
             * @param {object} value Value to set the model to           
             */

             setValue: function(value){
                // do something
             }

            /**
             * Responsible for returning user metadata
             * @memberOf module:UserModel#
             * @param {object} user User
             */

            getMetaData: function(user) {
                // do something
            }
        }
    );
}); 
```

此类将生成以下文档： ![在此处输入图像描述](https://i.stack.imgur.com/FRNpY.jpg)

在 JSDOC 中使用的完整标签列表可在[http://usejsdoc.org/index.html#JSDoc3_Tag_Dictionary获得](http://usejsdoc.org/index.html#JSDoc3_Tag_Dictionary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T21:18:30.480

您还可以为所有 AMD 依赖项添加 @require 模型/AbstractModel（参见先前的答案）和 @require。

我认为@lends 注释不适用于新的 Class()。

# c# - 到 ORACLE DB 的 ASMX Web 服务在第一次连接时超时

> ID：15811763
> 
> 赞同：0
> 
> 时间：2013-04-04T12:51:47.587
> 
> 标签：c#, web-services, oracle, asmx, odp.net

我编写了一个 C# 应用程序，它与部署在另一台机器上的 (ASMX) Web 服务进行通信。Web 服务连接到位于第三层的后端数据库并对其执行操作。

应用程序中的所有数据库操作都是从名为`DataLayerFunctor`. 这是该课程的一个片段：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using WebserviceTest.DataLayer;
using WebserviceTest.SecurityLayer;
using SettingsAlias = WebserviceTest.Properties;

namespace WebserviceTest
{
    public static class DataLayerFunctor
    {
        public static MyWebserviceReference.Service1 myWebService;
        private static string HOST = "192.168.1.100";
        private static string PORT = "1521";
        private static string DATABASE = "orcl";
        private static string USERNAME = "MY_USER";
        private static string PASSWORD = "123";
        private static string ORACLE_CONNECTION_STRING = "Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST={0})(PORT={1})))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME={2})));Users Id={3};Password={4};";
        public static List<UserGroup> UserGroupsList { get; set; }
        public static List<Role> RolesList { get; set; }

        public static Dictionary<UserGroup,Role> GroupsToRoles { get; set; }

        static DataLayerFunctor()
        {
            HOST = CryptoServices.DecryptText(SettingsAlias.Settings.Default.HOST,CryptoServices.DEFAULT_KEY) ?? HOST;
            PORT = CryptoServices.DecryptText(SettingsAlias.Settings.Default.PORT,CryptoServices.DEFAULT_KEY )?? PORT;
            DATABASE = CryptoServices.DecryptText(SettingsAlias.Settings.Default.DATABASE,CryptoServices.DEFAULT_KEY) ?? DATABASE;
            USERNAME = CryptoServices.DecryptText(SettingsAlias.Settings.Default.USER_NAME,CryptoServices.DEFAULT_KEY) ?? USERNAME;
            PASSWORD = CryptoServices.DecryptText(SettingsAlias.Settings.Default.PASSWORD,CryptoServices.DEFAULT_KEY) ?? PASSWORD;
            ORACLE_CONNECTION_STRING = SettingsAlias.Settings.Default.ORACLE_CONNECTION_STRING ?? ORACLE_CONNECTION_STRING;

            HOST = "192.168.1.6";
            PORT = "1521";
            DATABASE = "orcl";
            USERNAME = "ALAMAL_BANK";
            PASSWORD = "123";

            myWebService = new MyWebserviceReference.Service1();

            myWebService.Url = "http://192.168.1.6/MyWebservice/Service1.asmx";
            //myWebService.Url = CryptoServices.DecryptText(SettingsAlias.Settings.Default.WebserviceURL,CryptoServices.DEFAULT_KEY);
            myWebService.Timeout = 36000;            

            //Load enumeration tables
            LoadGroupsToRoles();
        }

        public static void LoadGroupsToRoles() {
            string query = "SELECT * FROM GROUPS_TO_ROLES";
            DataTable groupsToRoles = myWebService.GetTableParamOracle(query, HOST, PORT, DATABASE, USERNAME, PASSWORD);
            GroupsToRoles = new Dictionary<UserGroup, Role>();
            foreach (DataRow groupsToRolesRow in groupsToRoles.Rows)
            {
                Role role = RolesList.First((i) => i.RoleId == groupsToRolesRow["ROLE_ID_FK"] as long?);
                UserGroup userGroup = UserGroupsList.First((i) => i.GroupId == groupsToRolesRow["GROUP_ID_FK"] as long?);
                GroupsToRoles.Add(userGroup, role);
            }
        }
    }
} 
```

问题是第一次连接到数据库总是失败。因此，我需要重新运行应用程序以获得部署应用程序时无法接受的连接。另一件事是连接会在几分钟后重置。我怎样才能保持连接活跃？

我正在使用：
ORACLE 11g DB
ODP.NET
C# 4
SOAP Webservice

网络服务代码：

```
public class Service1 : System.Web.Services.WebService
{

logger.LogCreator _log = new logger.LogCreator(@"C:\GDW_logs");
public static long DataTableCounter = 1;
string oracleConnection = "Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST={0})(PORT={1})))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME={2})));User Id={3};Password={4};";                

    [WebMethod]
    public DataTable GetTableParamOracle(string sqltext, string host, string port, string database, string username, string password)
    {
        OracleConnection SQLConnection = new OracleConnection(string.Format(oracleConnection, host, port, database, username, password));

        OracleDataAdapter dad = new OracleDataAdapter(sqltext, SQLConnection);
        DataTable dtb = new DataTable("DataTable" + (DataTableCounter++));
        SQLConnection.Open();

        try
        {

            dad.Fill(dtb);
        }
        catch (Exception ex)
        {
            _log.WriteLine(ex.Message);
        }
        finally
        {
            SQLConnection.Close();
        }

        return dtb;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:25:15.833

我的第一个想法是这是一个提供商问题，尤其是名称解析。确保 GetTableParamOracle 方法的“主机”参数是完全限定的。即，“myoracleinstance.mydomain.org”，而不仅仅是“myoracleinstance”。

您可以通过确保 tnsnames.ora 中存在此实例的别名并使用 tnsping 进行测试来隔离问题。第一个 ping 会比其他 ping 恢复得慢。

如果这似乎不是问题，那么您可能需要跟踪提供商并查看您是否可以识别挂断的呼叫部分：

```
 <oracle.dataaccess.client>
    <settings>
      <add name="TraceFileName" value="c:\temp\odpnet1.trc"/>
      <add name="TraceLevel" value="63"/>
    </settings>
  </oracle.dataaccess.client> 
```

关于“连接已重置”，了解您遇到的错误会有所帮助。它可能是终止旧连接的 DBA 作业，应该为服务帐户关闭或最大化旧连接。您可以/应该设置 min pool size=0，这最终将允许终止所有连接。如果您的流量非常“尖峰”，您可能没有太多选择来设置 Validate Connection = true、禁用池或处理手动打开陈旧连接的错误。有关更多信息，请参阅[有关连接池的 odp.net 文档](http://docs.oracle.com/html/E10927_01/featConnecting.htm#i1006393)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:25:09.523

> 另一件事是连接会在几分钟后重置。我怎样才能保持连接活跃？

如果您谈论的是客户端和 Web 服务器之间的连接，那么您不会。ASMX SOAP 服务不是这样工作的。它创建一个连接，发出请求，然后关闭它。您可以将相同的服务对象保留一段时间，但即使您这样做，它也总是会建立新的连接。（因为我倾向于相当频繁地丢弃服务对象，并且只有一种方法可以在需要时获取新对象。）

如果您正在谈论数据库连接......那么您的代码并没有试图保持连接打开。它在方法调用的上下文中创建连接。它会创建它，使用它，然后在方法结束时让它消失。您可以通过启用连接池来保持一些连接打开（[请参阅文档](http://docs.oracle.com/html/B28089_01/OracleConnectionClass.htm)），这样当您的代码尝试建立连接时，数据库将打开一个连接以加快速度。

请注意，有些评论是完全正确的。您的连接应该在 using 语句中创建：

```
using (OracleConnection SQLConnection = new OracleConnection(string.Format(oracleConnection, host, port, database, username, password))) {
// do stuff
} 
```

这将确保它被正确处理，并在下次需要时使连接再次可用于连接池。在您的应用程序代码中，您将打开/关闭连接，但实际上它们将在服务器和数据库之间自动保持打开状态（ODP.net 处理它）。

> 问题是第一次连接到数据库总是失败。因此，我需要重新运行应用程序以获得部署应用程序时无法接受的连接。

数据库失败时会出现什么错误？只是服务超时，还是存在数据库错误？如果只是超时，已知 ODP.net 在某些情况下首次加载需要一段时间。另一种可能性是，由于您让客户端发送连接信息，因此它可能在第一次请求时发送了错误信息。

# javascript - 如何使用 Phonegap 和 javascript 在 iPhone 上隐藏和显示键盘

> ID：15811766
> 
> 赞同：1
> 
> 时间：2013-04-04T12:51:50.947
> 
> 标签：javascript, jquery, css, cordova

在我的 Phonegap 应用程序中，我有一个屏幕，如果用户在文本区域之外点击或单击，则键盘应该隐藏。我使用了该`.blur(`功能，但是通过这样做，屏幕会上升，并且用户无法看到顶部的应用程序栏（但屏幕本身不会移动）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:57:17.057

调用 blur 后，尝试`window.scrollTo(0,0)`.

如果我没记错的话，您可能必须将其包装在 0ms setTimeout

```
$('#someInput').blur();
setTimeout(function(){
  window.scrollTo(0, 0);
}, 0); 
```

# ios6 - 如何在 iOS 版 Google 地图 sdk 中获取点击标记的标题？

> ID：15811772
> 
> 赞同：0
> 
> 时间：2013-04-04T12:52:06.467
> 
> 标签：ios6, google-maps-sdk-ios

我在我的应用程序中使用适用于 iOS 的 Google map sdk（版本 1.1.2）。我在地图上有多个标记。在点击特定标记信息后，我必须调用另一个包含该地点详细信息的视图。

我知道我必须用哪种方法编码。它在

```
-(void)mapView:(GMSMapView *)mapView
didTapInfoWindowOfMarker:(id<GMSMarker>)marker 
```

但是，我如何获得点击标记的标题字符串？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:33:10.147

I think you should be able to just use:

```
-(void)mapView:(GMSMapView *)mapView 
    didTapInfoWindowOfMarker:(id<GMSMarker>)marker
{
    NSString* title = marker.title;
    ...
} 
```

# android - android imageview setvisibility

> ID：15811776
> 
> 赞同：0
> 
> 时间：2013-04-04T12:52:32.130
> 
> 标签：android, imageview

如果 value= x 我想改变 imageview 的可见性

但我在 Eclipse 上有错误消息。

这是我的java的一部分

```
 if (success == 1) {
                    // products found
                    // Getting Array of Products
                    products = json.getJSONArray(TAG_PRODUCTS);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String name = c.getString(TAG_NAME);
                        String price = c.getString(TAG_PRICE);
                        String cu = c.getString(TAG_CU);
                        /////////////
                                                ///HERE THE BUG////
                        if (cu == "1"){

                            cu = "oui";
                        }
                        else {  
                            ImageView image_A_wrong = (ImageView) findViewById(R.id.imageView1);
                            image_A_wrong.setVisibility(View.GONE);

                        } 
```

这里是我的 xml 文件

```
<ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/quo100px"
        android:visibility="gone" /> 
```

tks提前为您提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:53:57.130

使用`cu.equals("1")`而不是`cu == "1"`，你会没事的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-22T13:25:02.937

为此，您必须检查是否使用字符串进行压缩而不是使用 .equalsIgnoreCase("") 函数，否则使用 == 进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:54:23.660

您正在检查 a`String`在这种情况下`.equals("your_constraint")`使用了。

所以，改变这个：

```
if (cu == "1") {
    cu = "oui";
} else {
    ImageView image_A_wrong = (ImageView) findViewById(R.id.imageView1);
    image_A_wrong.setVisibility(View.GONE);
} 
```

对此：

```
if (cu.equals("1")) {
    cu = "oui";
} else {
    ImageView image_A_wrong = (ImageView) findViewById(R.id.imageView1);
    image_A_wrong.setVisibility(View.GONE);
} 
```

# facebook - facebook：fql 按喜欢计数 desc 从流顺序中选择

> ID：15811780
> 
> 赞同：0
> 
> 时间：2013-04-04T12:52:46.047
> 
> 标签：facebook, facebook-fql

我试图在一个页面上获得前 10 个喜欢的帖子。我的查询是：

```
select message,likes from stream where
source_id=<pageid> and is_published=1
limit 10 
```

这是返回的数据结构：

```
 "message": "message",
  "likes": {
    "href": "https://www.facebook.com/browse/likes/?id=<id>",
    "count": <likecount>, <- THIS IS THE FIELD I WANNA ORDER BY
    "sample": [
    ],
    "friends": [
    ],
    "user_likes": false,
    "can_like": true 
```

如何使用 order by 子句按喜欢排序：计数字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:04:32.497

您需要做的就是在查询部分`ORDER BY likes.count`之后`WHERE`和查询部分之前添加`LIMIT`。

使用该`stream`表，您可能需要升级`LIMIT`以获得所需的结果，然后在脚本中截断返回的结果。流表在设计上有一些严重的限制：

*   如果您允许其他人在您的页面上发布帖子，则某些用户的隐私设置将被配置，因此 API 不会返回他们的帖子。Facebook在完成对 FQL 的评估*后*会过滤这些内容，因此当您请求 10 个帖子时，您实际上很少会收到 10 个帖子。

*   `stream`Facebook 限制了它在表格中搜索的历史记录数量。我发现如果您想查看超过 1 个月大的帖子，您需要`LIMIT`至少 100 个。我一直很难用`stream`表格检索超过 3 个月大的帖子。

# sql - 从特定列获取特定值

> ID：15811786
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:52:57.137
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一张像下面这样的表格

```
Table_Name

id   Column_Desc
1    <p><img src="images/abc.png" alt=""/></p> 
```

我想从此列中获取此 src“imageUrl”
实际上我想在删除数据时使用此 src
我想从服务器中删除图像，
我需要一种方法如何从列中获取此路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:11:59.590

您可以使用字符串函数的尴尬组合从列中提取图像 URL：

```
select substring(
        html,
        charindex('<img src="',html)+10,
        charindex(
           '"',
           html,
           charindex('<img src="',html) + 10
        ) -
        charindex('<img src="',html) - 10
    )
    from foo; 
```

[在此处查看一个有效的 SQLFiddle 示例](http://www.sqlfiddle.com/#!3/46c33/3)。

它标记`<img src="`字符串中第一次出现的开始，并在开始之后的第一次出现结束`"`。这些是简化的假设，不适用于所有可能的有效 HTML 输入。但它应该在合理的输入上起作用。

**更新 2：这可以通过递归查询来扩展以查找所有 URL：**

*还更新以处理没有图像 url 的情况*

```
with all_img_urls as (
   select id,
        cast(null as char(1000)) as url,
        html
    from foo
    where charindex('<img src="',html) > 0
    union all
   select id,
       cast(substring(
        html,
        charindex('<img src="',html)+10,
        charindex(
           '"',
           html,
           charindex('<img src="',html) + 10
        ) -
        charindex('<img src="',html) - 10
    ) as char(1000)) as url,
    cast(substring(
        html,charindex('"',html,charindex('<img src="',html) + 10),1000
    ) as char(1000)) as html
    from all_img_urls
    where charindex('<img src="',html) > 0
)
select id,url from all_img_urls where url is not null; 
```

[更新了 SQLFiddle](http://www.sqlfiddle.com/#!3/e6f99/7)。

这有点乱，但它有效。基本思想是找到第一个图像 url，然后在该图像 url 结束后再次执行搜索。

如果你需要做得更好，你可能不应该尝试在 SQL 中处理它；而是使用可以解析 HTML 的编程语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:26:50.520

```
public List<String> FetchLinksFromSource(string htmlSource)
    {
    List<String> links = new List<String>();
    string regexImgSrc = @"<img[^>]*?src\s*=\s*[""']?([^'"" >]+?)[ '""][^>]*?>";
    MatchCollection matchesImgSrc = Regex.Matches(htmlSource, regexImgSrc, RegexOptions.IgnoreCase | RegexOptions.Singleline);
    foreach (Match m in matchesImgSrc)
    {
        string href = m.Groups[1].Value;
        links.Add(href);
    }
    foreach (string s in links)
    {
        string FilePath = Server.MapPath("~/");
        FilePath += s;
        if (File.Exists(FilePath))
       {
           File.Delete(FilePath);
       }
        FilePath = "";
    }
    return links;
} 
```

谢谢你们所有人......我已经用这个逻辑实现了我的目标

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:58:38.693

我认为您所追求的是以下内容：

```
delete from "Table_Name" where "Column_Desc" like '%images/abc.png%' 
```

我认为这会给你你想要的，虽然我会用

```
select "Column_Desc" from "Table_Name" where "Column_Desc" like '%images/abc.png%' 
```

首先确保它只返回你想要的。

# java - 将动态 xml 转换为特定格式的 xml 的最佳方法是什么

> ID：15811789
> 
> 赞同：1
> 
> 时间：2013-04-04T12:53:11.437
> 
> 标签：java, xml, xslt

我有一种情况，应将任何格式（DITA、QTI 等）的 xml 转换为通用格式。定义了要转换的其他格式的通用格式 xml 结构。如果这甚至可以实现，我不知道。如果是这样，最好的方法是什么。

我想到的选项是，

1）使用Dom或Sax解析器解析xml文档，然后转换成通用格式。感觉这会很沉重。

2) 使用 XSLT：大多数 XSLT 语法要求标签是已知的。不确定我是否能够使用 XSLT 做到这一点。

由于标签名称和格式不知道什么是解决这个问题的最佳方法。

如果这个问题听起来很愚蠢，请原谅我，因为我还不太熟悉 xml 解析器和 XSLT。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:59:46.280

您最好的选择可能是 XSLT，您可以在其中将*源*格式转换为*目标*格式，毕竟，这正是 XSLT 的全部意义所在。但是，不，XSLT 不能转换*任何源*格式——您必须指定源和目标的每种组合，那里真的没有捷径。

# java - ConcurrentModificationException 问题

> ID：15811799
> 
> 赞同：0
> 
> 时间：2013-04-04T12:53:36.280
> 
> 标签：java, linkedhashmap, concurrentmodification

我有一个方法 test()，在其中我试图将两个 LinkedHashMap 相互比较，并通过删除键/值对来修改其中一个映射的内容（如果它在两个 LHM 中都找到）。运行此方法时，我不断收到 ConcurrentModificationException。我了解为什么会出现异常（因为我正在尝试修改正在循环的列表）。但是，我不确定如何进行此操作。到目前为止我有这个代码：

```
private void test() {    

LinkedHashMap<String, BigDecimal>testBene = new LinkedHashMap<String, BigDecimal>();
LinkedHashMap<String, BigDecimal>testDly = new LinkedHashMap<String, BigDecimal>();

testBene.put("ABCDEFG", BigDecimal.ZERO);
testBene.put("BCDEFGH", BigDecimal.ONE);
testBene.put("CDEFGHI", BigDecimal.TEN);

testDly.put("BCDEFGH", BigDecimal.ONE);
testDly.put("Foo", BigDecimal.TEN);
testDly.put("Bar", BigDecimal.TEN);

for (Entry<String, BigDecimal> beneKeySet : testBene.entrySet()) {
    if (testDly.containsKey(beneKeySet.getKey())) {
        for (Entry<String, BigDecimal> dlyKeySet : testDly.entrySet()) {
            if ((dlyKeySet.getKey().equals(beneKeySet.getKey())) && 
                dlyKeySet.getValue().equals(beneKeySet.getValue())) {
                    testBene.remove(dlyKeySet.getKey());
            }
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:55:25.423

不要删除元素，而是将要删除的键放入单独的集合中。最后，遍历其他集合，从地图中删除键。

或者，使用[`Iterator`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)接口而不是 for-each 循环。这将使您能够[`Iterator.remove()`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)在迭代时使用删除元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:55:13.593

您不能从当前使用 for each 迭代的列表中删除。使用列表的迭代器来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:59:09.160

您可以使用迭代器：

```
for (Iterator<Entry<String, BigDecimal>> it = testBene.entrySet().iterator(); it.hasNext();) {
    Entry<String, BigDecimal> beneKeySet = it.next();
    if (testDly.containsKey(beneKeySet.getKey())) {
        for (Entry<String, BigDecimal> dlyKeySet : testDly.entrySet()) {
            if ((dlyKeySet.getKey() == beneKeySet.getKey()) && dlyKeySet.getValue() == beneKeySet.getValue()) {
                it.remove();
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:55:52.537

您可以使用 EntrySet 的迭代器，或者将所有重复的键保存在另一个列表中，然后从映射中删除它们。另外，不要使用 == 比较对象，使用 equals() 函数。

# asp.net - 将 Dynamics CRM SDK 与 ASP MVC 集成

> ID：15811803
> 
> 赞同：1
> 
> 时间：2013-04-04T12:53:46.067
> 
> 标签：asp.net, asp.net-mvc, design-patterns, dynamics-crm-4

[我最近一直在阅读ASP.NET](http://www.asp.net/mvc)上的 MVC 教程，如果不是全部，大多数教程都使用 Entity Framework 和 DbContext 对数据执行 CRUD 操作。

我计划创建一个使用 Dynamics CRM 4 作为数据存储的 ASP MVC 应用程序。考虑到这一点，最好的地方是编写逻辑以使用 CRM SDK、模型、控制器或其他东西执行 CRUD 操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:20:41.873

我鼓励您将所有 CRM 数据访问逻辑封装在一个单独的层/组件中，然后由您的控制器使用。无论使用 EF/DbContext，这些教程都不应该直接从控制器进行数据库通信。或者他们至少应该指出一种更好的组织方式。

# google-apps-script - Google 电子表格脚本 - 如何测试单元格是否为粗体

> ID：15811805
> 
> 赞同：7
> 
> 时间：2013-04-04T12:53:50.463
> 
> 标签：google-apps-script, google-docs, google-drive-api

我需要测试给定的电子表格单元格是否为粗体。到目前为止，这是我的脚本代码。

```
function ifBold(cell, val1, val2) {
    if(cell.getFontWeight() == 'bold')
        return val1;
    return val2;
} 
```

它出错，告诉我“单元格”没有函数 getFontWeight()。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T15:37:17.637

您必须将单元格作为字符串传递。ifBold("A1", 1, 0)

```
function ifBold(a1Notation, val1, val2) {
    var cell = SpreadsheetApp.getActiveSpreadsheet().getRange(a1Notation);

    if(cell.getFontWeight() == 'bold')
        return val1;
    return val2;
} 
```

如果您传入一个单元格或范围而不将其作为字符串发送，那么它将分别作为字符串或数组接收。而且它不能作为范围对象处理。有关这方面的更多信息，请参阅以下链接：
[http ://code.google.com/p/google-apps-script-issues/issues/detail](http://code.google.com/p/google-apps-script-issues/issues/detail?id=354)
[?id=354 如何将单元格参数从电子表格传递给 custum作为一个范围起作用？](https://stackoverflow.com/questions/12371434/how-do-i-pass-a-cell-argument-from-a-spreadsheet-to-a-custum-function-as-a-range)

**编辑：**
要以动态的方式编写函数，它需要使用内置函数 ROW 和 COLUMN。
=ifBold(行(A1), 列(A1), 1, 0)

```
function ifBold(row, column, val1, val2) {
    var range = SpreadsheetApp.getActiveSpreadsheet().getDataRange().getCell(row, column);

    if(range.getFontWeight() == 'bold')
        return val1;
    return val2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:07:30.307

getFontWeight() 是 Range 的函数，因此只要您传递给上面的函数的是 Range 对象 (sheet.getRange(...))，它应该可以工作：

[https://developers.google.com/apps-script/reference/spreadsheet/range](https://developers.google.com/apps-script/reference/spreadsheet/range)

这是一个通用脚本，它将检查 A 中的每个元素是否为粗体：

```
function ifBold() {
  var sheet = SpreadsheetApp.getActive().getSheetByName('Bold');
  var cells = sheet.getRange('A2:A');
  for (var i=1; i <= cells.getNumRows(); i++) {
    var isBold = false;
    if(cells.getCell(i, 1).getFontWeight() == 'bold')
      isBold = true;
    sheet.getRange(i+1, 2).setValue(isBold);
  }
} 
```

参见示例：

[https://docs.google.com/spreadsheet/ccc?key=0AmR0r1Y14zgydG03QS1Dd0dLRDA3SWgtLXp6TzV3d3c#gid=3](https://docs.google.com/spreadsheet/ccc?key=0AmR0r1Y14zgydG03QS1Dd0dLRDA3SWgtLXp6TzV3d3c#gid=3)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-26T02:18:00.600

这很好，但由于单元格地址位于“”注释中，因此无法将该函数拖到不同的单元格中。

```
function ifBold() {
  var sheet = SpreadsheetApp.getActive().getSheetByName('Bold');
  var cells = sheet.getRange('A2:A');
  for (var i=1; i <= cells.getNumRows(); i++) {
    var isBold = false;
    if(cells.getCell(i, 1).getFontWeight() == 'bold')
      isBold = true;
    sheet.getRange(i+1, 2).setValue(isBold);
  }
} 
```

为了能够将函数从一个单元格拖动到下一个单元格，您需要使用此功能：如果您想将其用于一个单元格：

=ifBold(CELL("address"; A1)) 或 =ifBold(CELL("address", A1))

; 或 , 可能因您的语言区域而异

新的谷歌表：=myFunction(CELL("address",A1)&":"&CELL("address",A2)) 或旧的谷歌表：=myFunction(ADDRESS(row(A1),COLUMN(A1),4) &":"&地址(行(A2),列(A2),4))

您可能需要将 , 更改为 ; 再次为此。像：

=myFunction(CELL("地址";A1)&":"&CELL("地址";A2))

参考： [https ://webapps.stackexchange.com/questions/10629/how-to-pass-a-range-into-a-custom-function-in-google-spreadsheets](https://webapps.stackexchange.com/questions/10629/how-to-pass-a-range-into-a-custom-function-in-google-spreadsheets)

# c# - C# 自定义控件组作为 ListView 行

> ID：15811808
> 
> 赞同：0
> 
> 时间：2013-04-04T12:54:01.123
> 
> 标签：c#, winforms, listview

我正在尝试创建一个自定义`ListView`WinForms 控件，以便每一行都有一个标题、副标题、图像图标和操作图标。[这里有很多](https://stackoverflow.com/questions/8156141/c-sharp-custom-listbox-gui)描述如何覆盖该`OnDrawItem`方法的答案，但我也想要的是行为，即能够连续单击一个图标并拥有一个事件处理程序。

有没有办法将控制组作为行元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:05:24.613

我将其作为答案，因为我无法在评论中添加图像。

你想得到这样的效果吗：

![在此处输入图像描述](https://i.stack.imgur.com/GB3aW.png)

如果是，请将 ListView.View 更改为 Tile。如果这符合您的要求，您不必使用所有者抽奖。

# iphone - 结果不返回 FMDB 中的任何数据

> ID：15811813
> 
> 赞同：0
> 
> 时间：2013-04-04T12:54:23.073
> 
> 标签：iphone, ios, sqlite, fmdb

我正在使用[本](http://www.highoncoding.com/Articles/836_Persisting_iOS_Application_Data_in_SQLite_Database_Using_FMDB.aspx)教程在我的项目中实现 FMDB。但是我的代码没有返回任何值。这是检索值的代码。

```
-(NSMutableArray *) getCustomers
{
    NSMutableArray *customers = [[NSMutableArray alloc] init];
    FMDatabase *db = [FMDatabase databaseWithPath:[Utility getDatabasePath]];
    [db open];
    FMResultSet *results = [db executeQuery:@"SELECT * FROM customers"];
    NSLog(@"results %i,%@,%@",[results intForColumn:@"id"],[results stringForColumn:@"firstname"],[results stringForColumn:@"lastname"]);
    while([results next]) 
    {
        Customer *customer = [[Customer alloc] init];
        customer.customerId = [results intForColumn:@"id"];
        customer.firstName = [results stringForColumn:@"firstname"];
        customer.lastName = [results stringForColumn:@"lastname"];
        [customers addObject:customer];
    }
    [db close];
    return customers; 
} 
```

当我在文档目录中检查 db 而不是 db 时，这里是日志

```
CRUD[47363:f803] db /Users/pingdanehog/Library/Application Support/iPhone Simulator/5.1/Applications/D9F19E7D-A232-4C4A-8218-58BC136053A7/Documents/Customers.db 
```

这是我的数据库 ![在此处输入图像描述](https://i.stack.imgur.com/tCKkQ.png)

它包含数据

![在此处输入图像描述](https://i.stack.imgur.com/TMmP1.png)

但是我的结果值始终为空，请帮助之前运行过此代码，但是当我为该项目创建具有相同名称的新数据库时，它已经停止了。

这是结果的值。

```
results 0,(null),(null) 
```

我已经在 appdelegate 文件中初始化了我的数据库

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    databaseName = @"Customers.db";

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDir = [documentPaths objectAtIndex:0];
    databasePath = [documentDir stringByAppendingPathComponent:databaseName];

    [self createAndCheckDatabase];

    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

-(void) createAndCheckDatabase
{
    BOOL success;

    NSFileManager *fileManager = [NSFileManager defaultManager];
    success = [fileManager fileExistsAtPath:databasePath];

    if(success) return;

    NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:39:52.987

会发生什么，如果你把线

> > NSLog(@"结果 %i,%@,%@",[结果 intForColumn:@"id"], ....

在 [results next] 之后，例如在 while 循环内？

FMDB 的文档说：“在尝试访问查询中返回的值之前，您必须始终调用 -[FMResultSet next]，即使您只期待一个”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:02:12.597

确保您已将您的数据库初始化为 AppDelegate 或您使用 FMDB 的任何文件。

如果是并且您已在某处对其进行了初始化，则尝试运行此 SQL "SELECT * FROM customers" 。在数据库本身，在 SQL 选项卡中。并检查数据库是否包含这些值。

```
Before that make sure you are running SQL in databse which resides into **Application Support** 
```

享受编程！

# slider - 按文本框值调整滑块

> ID：15811816
> 
> 赞同：0
> 
> 时间：2013-04-04T12:54:25.177
> 
> 标签：slider, dojo

*   有一个演示来获取文本框中的滑块值。
*   是否可以在为文本框提供一些值后调整滑块。
*   我应该不使用鼠标按文本框值移动滑块。

    以下链接在文本框中具有滑块值。副cersa是可能的吗？如果是这样我可以有代码吗？ [水平滑块的编程示例](http://dojotoolkit.org/reference-guide/1.8/dijit/form/HorizontalSlider.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:21:41.890

您可以通过调用 set 方法来设置滑块的值：

```
var slider = new HorizontalSlider(...);
    slider.set('value', 2); 
```

# openssl - 将 OpenSSL 与 _huge_ RSA 密钥一起使用

> ID：15811817
> 
> 赞同：2
> 
> 时间：2013-04-04T12:54:25.840
> 
> 标签：openssl, rsa

我尝试使用带有巨大 RSA 密钥的 OpenSSL。

昨晚，我生成了一个 65536 位的 RSA 密钥（花了我 6 个小时）。虽然 OpenSSL 似乎能够生成这样的密钥，但它无法使用它们进行操作：

```
openssl rsautl -inkey 65536.pem -in text.txt -out foo.bar
RSA operation error
139666197399208:error:04067069:rsa routines:RSA_EAY_PUBLIC_DECRYPT:modulus too large:rsa_eay.c:644: 
```

这么大的按键可以操作吗？

[这](http://pastebin.com/gPh60GsH)是生成的密钥，所以你不需要自己生成一个:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:39:39.073

根据在 crypto/rsa/rsa.h 中定义的 OPENSSL_RSA_MAX_MODULUS_BITS，OpenSSL 只允许最多 16384 位的密钥：

```
# define OPENSSL_RSA_MAX_MODULUS_BITS   16384 
```

您可以尝试使用更大的值重新编译 openssl，但我不能保证它会起作用。

# git - 从 mercurial 到 git - 合并？

> ID：15811820
> 
> 赞同：1
> 
> 时间：2013-04-04T12:54:28.857
> 
> 标签：git, mercurial, merge

我使用 mercurial 已经有一段时间了，现在我改用 git，因为我的新团队使用它作为默认的版本控制工具。

让我解释一下 - 在我从 bitbucket 克隆项目的 mercurial 中，我对项目进行了一些更改。然后我再次从 bitbucket 中提取并将我的更改与 bitbucket 上已更改的所有内容合并。然后我推动一切。

它与 git 一样吗？我已经克隆了项目，进行了一些更改，对它们进行了一些提交，现在我提取了项目，并且我想合并。这些前面的步骤工作正常，但合并有点不同，或者至少在我看来不同。如何将我的提交与我刚刚从服务器中提取的新提交合并？

PS：我在服务器上的更改和更改都已在主分支上完成，我不希望合并 2 个分支。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:57:10.103

```
git pull --rebase origin master 
```

拉入更改并将您的本地更改堆叠在顶部。

但是，为几乎所有新功能创建分支是 Git 的预期工作流程，因此您可能无论如何都想了解它们。快速分支和合并是 Git 的杀手级功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T09:29:35.610

我的建议是远离 git rebase/pull --rebase 直到你对 git 分支感到满意。现在，我很惊讶没有人提到的最重要的事情：

hg pull 只是将新的变更集添加到您的本地存储库中，并且不会影响您的工作副本。

git pull 获取新的提交并尝试自动将刚刚拉取的 HEAD 与本地 HEAD 合并。如果您有未提交的更改，可能会给您带来一些麻烦。

解决方案：至少现在，总是使用 git fetch。这不会影响您的工作副本，并允许您在自己的时间进行合并，就像 Mercurial 一样。换句话说，git fetch = hg pull。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T08:49:47.313

作为一名 Mercurial 用户，我对它的理解是，在 Git 中，所有头都必须有唯一的名称。因此，除非您给它一个新名称，否则它不会创建新的头部。所以在 Mercurial 中你可以这样做：

```
hg pull   / git pull
hg commit / git commit
hg commit / git commit

----B----C1----C2 
```

您最初提取的基本修订版在哪里`B`，C1 和 C2 是您的更改。然后，您从服务器中提取更新。

```
hg pull

----B----C1----C2
     \
      ----o----o----o 
```

Git 不会这样做，因为它必须创建另一个头。因此，您必须在服务器之上重新调整/移植您的更改。

```
git pull --rebase

----B----o----o----o----C1----C2 
```

* * *

另一种方法是，当您在 Git 中开始工作时，您可以为自己的头脑命名。Git 称之为分支，Hg 称之为书签。

```
hg pull     / git pull
hg bookmark / git branch
hg commit   / git commit
hg commit   / git commit

----B----C1----C2 
                ^ New-Feature 
```

现在头部有了一个名字（在这个例子中是“New-Feature”）。现在 Git 会像 Hg 一样愉快地拉动。

```
hg pull / git pull

----B----C1----C2
     \          ^ New-Feature
      ----o----o----o 
```

然后，您也可以以相同的方式合并。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T14:50:24.370

您可能会声称您不打算合并两个分支，但从根本上说您是。

考虑初始状态：我们有两个头，`master`并且`origin/master`都指向 commit `A`。然后有人添加提交`B`并`C`推送到`origin`远程，你`fetch`. 但是，在您获取之前，您将提交`D`、、`E`和添加`F`到您的`master`分支中，因此在`fetch`DAG 布局之后如下所示：

```
A ->  B -> C [origin/master]
|
\--> D -> E -> F [master] 
```

并且您想将更改推送到`origin`存储库。但是您的更改显然与`origin/master`分支冲突，为此，您必须合并`origin/master`和`master`.

有很多合并可能很难看，所以在一些重要的条件下，我们可以执行变基。但是，您必须小心 - 您不能将这些更改推送到任何其他外部存储库或类似的东西，否则您将破坏基于这些提交的任何其他内容。根据您的 current ，我也不会有任何其他内容`master`，因为这些提交现在已经过时了。

因此，您有两个选择：

*   合并`origin/master`为`master`：`git merge origin/master && git push origin master`
*   重新定位`master`到`origin/master`：`git rebase origin/master && git push origin master`

这两者都可以与`git-fetch`create结合`git-pull`使用，除非您提供 option ，否则它将自动使用合并方法`--rebase`，在这种情况下它会执行 a `rebase`。

`--rebase`由于命令的性质，请记住要小心始终使用`rebase`。

使用合并后的最终状态：

```
A ->  B -> C -----> G
|                   |
\--> D -> E -> F ---- 
```

使用变基后的最终状态：

```
A -> B -> C -> D -> E -> F 
```

# oracle - FULL 外部加入 Oracle

> ID：15811823
> 
> 赞同：0
> 
> 时间：2013-04-04T12:54:33.233
> 
> 标签：oracle

我有来自不同表的以下数据集

```
Table1
-------
EMPID    DEPID   C1  C2  SUM
---------------------------
100      200     2    3   111
100      200     4    4   222

 Table2
-------
EMPID    DEPID   C1  C2  SUM
---------------------------
100      200     4    4   333
100      200     5    6   444 
```

我正在寻找的结果---

```
Table1
-------
EMPID    DEPID   T1.C1  T1.C2  T2.C1   T2.C2    T1.SUM   T2.SUM
--------------------------------------------------------------
100      200       2      3     NULL    NULL     111      NULL
100      200       4      4      4        4      222      333
100      200       NULL   NULL   5        6      NULL     444 
```

任何帮助都非常受欢迎。我使用了完全外连接，但无法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:05:53.087

你想要一个`INNER JOIN`on`(emp_id, dep_id)`和一个`FULL OUTER JOIN`on `(c1, c2)`。我认为您将无法一步编写此连接条件。我提出了一个两步查询（a`FULL OUTER JOIN`后跟一个过滤子查询）。

```
SQL> WITH t1 AS (
  2  SELECT 100 emp_id, 200 dep_id, 2 c1, 3 c2, 111 sum FROM dual UNION ALL
  3  SELECT 100 emp_id, 200 dep_id, 4 c1, 4 c2, 222 sum FROM dual
  4  ), t2 AS (
  5  SELECT 100 emp_id, 200 dep_id, 4 c1, 4 c2, 333 sum FROM dual UNION ALL
  6  SELECT 100 emp_id, 200 dep_id, 5 c1, 6 c2, 444 sum FROM dual UNION ALL
  7  SELECT 100 emp_id, 300 dep_id, 7 c1, 8 c2, 555 sum FROM dual
  8  )
  9  SELECT COALESCE(t1.emp_id, t2.emp_id) emp_id,
 10         COALESCE(t1.dep_id, t2.dep_id) dep_id,
 11         t1.c1, t1.c2, t2.c1, t2.c2, t1.sum, t2.sum
 12    FROM t1
 13    FULL OUTER JOIN t2
 14      ON t1.emp_id = t2.emp_id
 15     AND t1.dep_id = t2.dep_id
 16     AND t1.c1 = t2.c1
 17     AND t1.c2 = t2.c2
 18   WHERE (COALESCE(t1.emp_id, t2.emp_id), COALESCE(t1.dep_id, t2.dep_id))
 19         IN (SELECT t1.emp_id, t1.dep_id
 20               FROM t1
 21               JOIN t2 ON t1.emp_id = t2.emp_id
 22                      AND t1.dep_id = t2.dep_id)
 23  ORDER BY t1.c1;

    EMP_ID     DEP_ID         C1         C2         C1         C2  SUM  SUM
---------- ---------- ---------- ---------- ---------- ---------- ---- ----
       100        200          2          3                        111 
       100        200          4          4          4          4  222  333
       100        200                                5          6       444 
```

请注意，我在`T2`您的示例中添加了一行来演示`INNER JOIN`.

# java - Java 小程序可排序列表

> ID：15811826
> 
> 赞同：2
> 
> 时间：2013-04-04T12:54:42.670
> 
> 标签：java, jquery, applet

我正在寻找Java代码，适用于接近JQuery Sortable功能的java-applet：http: [//jqueryui.com/sortable/](http://jqueryui.com/sortable/)

有人知道合适的吗？（最好是免费的，但不是绝对必要的......）

或者，您是否知道连接 Java 小程序 JQuery 的方法...？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:05:10.483

Java Swing 还支持其几乎大部分组件的拖放功能。你需要

```
myColorChooser.setDragEnabled(true); 
```

您可以在此处阅读文档。

[http://docs.oracle.com/javase/tutorial/uiswing/dnd/defaultsupport.html](http://docs.oracle.com/javase/tutorial/uiswing/dnd/defaultsupport.html)

[http://docs.oracle.com/javase/tutorial/uiswing/dnd/basicdemo.html](http://docs.oracle.com/javase/tutorial/uiswing/dnd/basicdemo.html)也提供了一个演示

# java - 在代码中删除 XML 文件中的内容

> ID：15811829
> 
> 赞同：3
> 
> 时间：2013-04-04T12:54:47.843
> 
> 标签：java, android, xml

我正在开发一个 android 应用程序，我想在我的应用程序代码中删除我的 XML 文件中的一个小内容。我想删除以下内容：

```
<pma:structure_schemas>
    <pma:database name="test" collation="latin1_swedish_ci" charset="latin1">
        <pma:table name="agenda">
            CREATE TABLE `agenda` (
              `id` int(2) NOT NULL AUTO_INCREMENT,
              `title` varchar(60) NOT NULL,
              `description` varchar(1000) NOT NULL,
              `town` varchar(30) NOT NULL,
               PRIMARY KEY (`id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;
        </pma:table>
    </pma:database>
</pma:structure_schemas> 
```

你有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:08:37.563

您可以使用以下代码：

```
import java.io.File;
import javax.xml.*;
import org.w3c.dom.*;

public class DeleteXmlNode {

    public static void deleteNode(String nodedetailsExpression) {//Use your expression here depending upon the node you wnt to delete

        try{
        XPathFactory xPathFactory = XPathFactory.newInstance();
        XPath xpath = xPathFactory.newXPath();
        XPathExpression expression = xpath.compile(nodedetailsExpression);
        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
        Document document = documentBuilderFactory.newDocumentBuilder().parse(new File("test.xml"));
        Node node = (Node) expression.evaluate(document, XPathConstants.NODE);
        node.getParentNode().removeChild(node);
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        transformer.transform(new DOMSource(document), new StreamResult(System.out));
        }catch(Exception e){
        //Do your Exception handling over here.
    }

} 
```

这里需要传递要删除的节点的表达式字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:58:55.657

看看[这个问题](https://stackoverflow.com/questions/2523381/best-java-xml-parser-to-manipulate-edit-an-existing-xml-document)。这是一个很热门的问题，下次google问题再问这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-18T21:49:06.923

[这是使用VTD-XML](http://vtd-xml.sf.net)删除元素的代码。请注意，它比 DOM 更加简洁和高效

```
import com.ximpleware.*;
import java.io.*;

public class removeElement {
    public static void main(String s[]) throws VTDException,IOException{
        VTDGen vg = new VTDGen();
        if (!vg.parseFile("input.xml", false))
            return;
        VTDNav vn = vg.getNav();
        XMLModifier xm = new XMLModifier(vn);
        AutoPilot ap = new AutoPilot(vn);
        ap.selectXPath("/ClOrdIDS/ClOrdID[@id='3']");
        int i=0;
        while((i=ap.evalXPath())!=-1){
            xm.remove();
        }
        xm.output("output.xml");
    }
} 
```

# java - Spring 集成 - 队列/轮询器似乎在没有任何操作的情况下耗尽了线程池

> ID：15811831
> 
> 赞同：4
> 
> 时间：2013-04-04T12:54:49.633
> 
> 标签：java, spring, rabbitmq, amqp, spring-integration

我有一个附加到 AMQP 代理的 Spring 集成应用程序。

我想从 amqp 队列接收消息，并更新数据库记录。

为了提高性能，我有一个工人池，允许同时发生多个更新。

我有以下配置：

```
<int-amqp:inbound-channel-adapter queue-names="pricehub.fixtures.priceUpdates.queue" 
                            channel="pricehub.fixtures.priceUpdates.channel"
                            message-converter="jsonMessageConverter"/>

<int:channel id="pricehub.fixtures.priceUpdates.channel">
    <int:queue  />
</int:channel>

<int:service-activator ref="updatePriceAction" 
     method="updatePrices" 
     input-channel="pricehub.instruments.priceUpdates.channel">
    <int:poller fixed-delay="50" time-unit="MILLISECONDS" task-executor="taskExecutor" />
</int:service-activator>

<task:executor id="taskExecutor" pool-size="5-50" keep-alive="120" queue-capacity="500"/> 
```

如果我开始运行，并且在 AMQP 通道上没有要处理的入站消息，我很快就会看到 thredpool 耗尽，并开始拒绝。

这是日志：

```
[Thu Apr 2013 23:41:51.153] DEBUG [] (org.springframework.amqp.rabbit.listener.BlockingQueueConsumer:185) - Retrieving delivery for Consumer: tag=[amq.ctag-w4qPp60jVEQOIEovR4cERv], channel=Cached Rabbit Channel: AMQChannel(amqp://guest@127.0.0.1:5672/,1), acknowledgeMode=AUTO local queue size=0
[Thu Apr 2013 23:41:51.160] DEBUG [] (org.springframework.amqp.rabbit.listener.BlockingQueueConsumer:185) - Retrieving delivery for Consumer: tag=[amq.ctag-Q3Lq4R9g9E8WBNVLYzaFmq], channel=Cached Rabbit Channel: AMQChannel(amqp://guest@127.0.0.1:5672/,2), acknowledgeMode=AUTO local queue size=0
[Thu Apr 2013 23:41:51.166] DEBUG [] (org.springframework.amqp.rabbit.listener.BlockingQueueConsumer:185) - Retrieving delivery for Consumer: tag=[amq.ctag-w8bg7ltEV2mot8QXDPCmfK], channel=Cached Rabbit Channel: AMQChannel(amqp://guest@127.0.0.1:5672/,3), acknowledgeMode=AUTO local queue size=0
[Thu Apr 2013 23:41:51.170] DEBUG [] (org.springframework.amqp.rabbit.listener.BlockingQueueConsumer:185) - Retrieving delivery for Consumer: tag=[amq.ctag-A-0KdqhFjpc-Hvjmv7aZAc], channel=Cached Rabbit Channel: AMQChannel(amqp://guest@127.0.0.1:5672/,4), acknowledgeMode=AUTO local queue size=0
[Thu Apr 2013 23:41:51.180] DEBUG [] (org.springframework.integration.endpoint.PollingConsumer:71) - Received no Message during the poll, returning 'false'
[Thu Apr 2013 23:41:51.180] DEBUG [] (org.springframework.integration.endpoint.PollingConsumer:71) - Received no Message during the poll, returning 'false'
[Thu Apr 2013 23:41:51.199] DEBUG [] (org.springframework.integration.endpoint.PollingConsumer:71) - Received no Message during the poll, returning 'false'
[Thu Apr 2013 23:41:51.200] DEBUG [] (org.springframework.integration.endpoint.PollingConsumer:71) - Received no Message during the poll, returning 'false'
[Thu Apr 2013 23:41:51.220] DEBUG [] (org.springframework.integration.endpoint.PollingConsumer:71) - Received no Message during the poll, returning 'false' 
```

很快，线程池开始拒绝执行：

```
[Thu Apr 2013 23:47:15.363] ERROR [] (org.springframework.integration.handler.LoggingHandler:126) - org.springframework.core.task.TaskRejectedException: Executor [java.util.concurrent.ThreadPoolExecutor@6ff3cb0e] did not accept task: org.springframework.integration.util.ErrorHandlingTaskExecutor$1@78615c8b
    at org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor.execute(ThreadPoolTaskExecutor.java:244)
    at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:49)
    at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller.run(AbstractPollingEndpoint.java:231)
    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)
    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.util.concurrent.RejectedExecutionException
    at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:1768)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:767)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:658)
    at org.springframework.sched 
```

uling.concurrent.ThreadPoolTask​​Executor.execute(ThreadPoolTask​​Executor.java:241) ... 还有 12 个

我怀疑罪魁祸首在这里：`BlockingQueueConsumer`- 表明每次对消息的轮询都会阻塞线程，直到消息到达......导致线程池迅速耗尽。

配置它的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T13:47:31.877

`QueueChannel`为什么不简单地增加`concurrent-consumers`入站适配器上的属性，而不是使用和轮询器？

```
 <xsd:attribute name="concurrent-consumers" type="xsd:string">
        <xsd:annotation>
            <xsd:documentation>
Specify the number of concurrent consumers to create. Default is 1.
Raising the number of concurrent consumers is recommended in order to scale the consumption of messages coming in
from a queue. However, note that any ordering guarantees are lost once multiple consumers are registered. In
general, stick with 1 consumer for low-volume queues.
            </xsd:documentation>
        </xsd:annotation>
    </xsd:attribute> 
```

并且，删除`<queue/>`and `<poller/>`。

另外，我总是建议在日志中包含线程名称（`%t`对于 log4J）；它使调试线程问题变得更加容易。

编辑：

使用轮询器，您用完线程的原因是轮询器的默认`receive-timeout`值为 1 秒。您每 50 毫秒调度一个线程，但每个线程都等待`QueueChannel`1 秒。最终，您的任务队列会填满。

为避免这种情况，如果您希望继续使用此技术，只需将其设置`receive-timeout`为`0`on `<poller/>`- 但在适配器中使用更高的并发性会更有效，因为没有轮询或切换到另一个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:29:41.003

看来我需要一个桥来映射 amqp-inbound 队列（这是一个 pub/sub 样式队列）和一个队列通道。

```
<int-amqp:inbound-channel-adapter queue-names="pricehub.fixtures.priceUpdates.queue" 
                            channel="pricehub.fixtures.priceUpdates.subpub"
                            message-converter="jsonMessageConverter"/>

<int:publish-subscribe-channel id="pricehub.fixtures.priceUpdates.subpub" />
<int:bridge input-channel="pricehub.fixtures.priceUpdates.subpub" 
    output-channel="pricehub.fixtures.priceUpdates.channel" />

<int:channel id="pricehub.fixtures.priceUpdates.channel">
    <int:queue  />
</int:channel>

<int:service-activator ref="updatePriceAction" 
     method="updatePrices" 
     input-channel="pricehub.instruments.priceUpdates.channel">
    <int:poller fixed-delay="50" time-unit="MILLISECONDS" task-executor="taskExecutor" />
</int:service-activator>

<task:executor id="taskExecutor" pool-size="5-50" keep-alive="120" queue-capacity="500"/> 
```

这似乎有很多代码来完成一项相当微不足道的任务 - 所以如果有人有更好的解决方案或改进建议，我很乐意看到它们。

# javascript - 捕获显示在 JavaScript 警报消息上的文本

> ID：15811833
> 
> 赞同：1
> 
> 时间：2013-04-04T12:54:51.390
> 
> 标签：javascript, html

目前不知道有没有可能？

我的场景之一是我想通过注入我的 JavaScript 文件来捕获将显示在第三方网站的警报框中的文本。

有没有办法使用 JavaScript 捕获/检索显示在警报消息框上的文本内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:59:25.847

您可以尝试遮蔽该`alert`功能：

```
window.alert = (function(al) {
    return function(text) {
        // your stuff here...
        al(text);
    };
})(window.alert); 
```

# ios - QLPreviewController 隐藏底部工具栏

> ID：15811834
> 
> 赞同：3
> 
> 时间：2013-04-04T12:54:52.780
> 
> 标签：ios, objective-c, qlpreviewcontroller

我`QLPreviewController`在我的应用程序中使用并希望隐藏允许在其数据源项中移动的底部工具栏。有可能以某种方式做吗？

我试图将其作为`subview`of进行搜索，`QLPreviewController's view`但它只有一个`_UISizeTrackingView`class 的子视图。据我了解，这是一个私人课程，所以我无权在那里寻找东西。

有什么方法可以隐藏此工具栏，Apple 是否允许这样做？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-21T19:49:29.653

`QLPreviewViewController`里面可以有多个工具栏。这就是为什么你需要`UIToolbar`在子视图中找到所有并隐藏它们。

您还需要观察`hidden`属性的变化，因为当用户点击`QLPreviewViewController`它时，它会改变工具栏和导航栏的可见性。

斯威夫特 3：

```
var toolbars: [UIToolbar] = []

override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    toolbars = findToolbarsInSubviews(forView: view)
    for toolbar in toolbars {
        toolbar.isHidden = true
        toolbar.addObserver(self, forKeyPath: "hidden", options: .new, context: nil)
    }
}

override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)
    for toolbar in toolbars {
        toolbar.removeObserver(self, forKeyPath: "hidden")
    }
}

private func findToolbarsInSubviews(forView view: UIView) -> [UIToolbar] {
    var toolbars: [UIToolbar] = []
    for subview in view.subviews {
        if subview is UIToolbar {
            toolbars.append(subview as! UIToolbar)
        }
        toolbars.append(contentsOf: findToolbarsInSubviews(forView: subview))
    }
    return toolbars
}

override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
    if let keyPath = keyPath,
        let toolbar = object as? UIToolbar,
        let value = change?[.newKey] as? Bool,
        keyPath == "hidden" && value == false {
        toolbar.isHidden = true
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T09:27:13.807

找了很多答案，终于找到了解决办法。如果你想一直隐藏底部工具栏，你可以按照下面的步骤来做。

1.  QLPreviewController 的第一个子类
2.  实现“getToolBarFromView”函数获取QLPreviewController的toolBar

    ```
    - (UIToolbar *)getToolBarFromView:(UIView *)view {
     // Find the QL ToolBar
     for (UIView *v in view.subviews) {
         if ([v isKindOfClass:[UIToolbar class]]) {
             return (UIToolbar *)v;
         } else {
             UIToolbar *toolBar = [self getToolBarFromView:v];
             if (toolBar) {
                 return toolBar;
             }
         }
     }
     return nil;
    } 
    ```

3.  获取工具栏并添加一个观察者来观察它的“隐藏”属性。

    ```
    - (void)viewWillAppear:(BOOL)animated{

      [super viewWillAppear:animated];
      // Get the ToolBar
      self.qlToolBar = [self getToolBarFromView:self.view];

      self.qlToolBar.hidden = true;
      if (self.qlToolBar) {
          [self.qlToolBar addObserver:self forKeyPath:@"hidden" options:NSKeyValueObservingOptionPrior context:nil];
      }  
    }

    - (void)viewWillDisappear:(BOOL)animated{

      [super viewWillDisappear:animated];
      [self.navigationController removeObserver:self forKeyPath:@"hidden"];
    } 
    ```

4.  实现 - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context 方法

    ```
    - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{

      BOOL isToolBarHidden = self.qlToolBar.hidden;
      // If the ToolBar is not hidden
      if (!isToolBarHidden) {
          dispatch_async(dispatch_get_main_queue(), ^{
              self.qlToolBar.hidden = true;
          });
      }
    } 
    ```

你应该做的最后一件事是从你自己的 navigationController 中展示这个控制器。希望它对你有用！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-17T16:38:40.627

```
public override void ViewDidLayoutSubviews()
        {
            this.NavigationController.Toolbar.Hidden = true;

        } 
```

这肯定会奏效

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-09-07T08:49:03.613

1.QLPreviewController的第一个子类

2.编码

```
(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [self.navigationController.view.subviews enumerateObjectsUsingBlock:^(__kindof UIView * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        if ([obj isKindOfClass:[UIToolbar class]]) {
            obj.hidden = YES;
        }
    }];

    [self.view.subviews enumerateObjectsUsingBlock:^(__kindof UIView * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        if ([obj isKindOfClass:[UIToolbar class]]) {
            obj.hidden = YES;
        }
    }];
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-05-23T14:20:37.800

有一个更简单的解决方案，您必须更改 QLPreviewControllerDataSource 方法。

```
func numberOfPreviewItemsInPreviewController(controller: QLPreviewController) -> Int {
    return 1
} 
```

将预览项目的数量设置为 1 将自动隐藏底部工具栏。

# windows-8 - Windows 8 应用程序启动画面上的背景图像

> ID：15811839
> 
> 赞同：0
> 
> 时间：2013-04-04T12:54:59.967
> 
> 标签：windows-8, windows-runtime, winrt-xaml, splash-screen

有没有办法用背景图像替换 Windows 商店应用程序启动画面的背景颜色？（我不是在说扩展的启动画面，而是关于固定/第一个）

清单文件只允许放置徽标图像和背景颜色，但有人设法绕过这个限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:10:40.513

目前这是不可能的。扩展飞溅是您唯一的选择。

# ibm-mobilefirst - 访问部署在其上的工作灯服务器时出现工作灯 - 错误

> ID：15811842
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:55:12.610
> 
> 标签：ibm-mobilefirst

[/mobile/apps/services/api/BOMApp/common/query] 失败。状态：500，响应：唯一约束：发现 2 个实现接口 com.worklight.server.report.api.GadgetReportsService 的 bean（在 4 个 spring 应用程序上下文中）。worklight.js:1097

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:30:32.470

好像您在服务器上运行了多个 Worklight 实例。确保您只部署了一个 worklight-jee*.jar 和一个 .war。

# c# - ASP.NET MVC，modelstate.isvalid 这种方式永远不会有效

> ID：15811854
> 
> 赞同：3
> 
> 时间：2013-04-04T12:55:42.747
> 
> 标签：c#, asp.net-mvc, entity-framework-5, mvc-editor-templates

我有一个问题要问你们。我正在编写一个应用程序，我可以在其中创建具有多个答案的练习。几天前我问了一些问题，现在它完全有效。

[Asp.net MVC with Entity，使用 jquery 将数据传递到 List。不工作](https://stackoverflow.com/questions/15772964/asp-net-mvc-with-entity-using-jquery-to-pass-data-into-list-does-not-work)

源头已经不一样了。我只有一个关于`modelstate.isvalid`.

让我给你们举个例子。我有一个`ExerciseModel`带有列表的答案。使用 jQuery 即时创建新答案并且`EditorTemplates`效果很好。唯一的问题是验证现在永远不会起作用。我想添加`modelstate.isvalid`到我`httpPost`的验证方法中。

问题是关于编辑/创建新答案

```
public ActionResult EditQuestion(int id)
{
    ExerciseModel exercisemodel = db.Exercise.Find(id);
    if (exercisemodel == null)
    {
        return HttpNotFound();
    }
    exercisemodel.Answers = GetAnswers(id);
    ViewBag.CourseId = new SelectList(db.Course, "CourseId", "CourseName", 
                                 exercisemodel.CourseId);
    return View(exercisemodel);
}

[HttpPost]
public ActionResult EditQuestion(ExerciseModel exercisemodel)
{
    foreach (var answer in exercisemodel.Answers)
    {
        db.Entry(answer).State = answer.AnswerId == 0 ?
                        EntityState.Added :
                        EntityState.Modified;
    }
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

这样做的原因是因为我可以创建新答案，同时我也可以编辑现有答案并将它们添加到我的答案列表中`ExerciseModel`。所以`ExerciseModel`当我创建新答案时我的变化。这就是为什么`modelstate.isvalid`永远不会是真的原因。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:16:02.887

知道了 ！谢谢你们的回复。奇怪，但它有效.. 我已经有一个隐藏的 ID。我有一个只有几行表格的部分。这用于使用 jQuery 将新答案添加到我现有的页面中。

我有；

```
 <input type="hidden" id="Answers_@(Model.AnswerId)__Id" class="iHidden"  name='Answers[@Model.AnswerId].AnswerId' /> 
```

因为它创建了一个带有答案的新行。现在我把它换成了。

```
 @Html.HiddenFor(x=>x.AnswerId, new { @class = "iHidden" }) 
```

它现在有效。不知道为什么，但是，剃须刀可以完成这项工作。

# c# - c#程序在最小化到系统托盘时崩溃/关闭

> ID：15811857
> 
> 赞同：1
> 
> 时间：2013-04-04T12:55:47.940
> 
> 标签：c#, wpf, minimize, tray

我写了一个小工具，当出现诸如内存使用率过高等问题时，它应该监视我的服务器并给我写邮件......

现在我的问题是，我想将我的程序最小化到系统托盘并且它工作正常:) 我在托盘中看到了几秒钟的图标。之后我的程序消失了......关闭......不知道进程消失了：D。

这是我最小化到托盘的代码：

```
InitializeComponent();
var icon = new NotifyIcon();
icon.Icon = new Icon("watchdog.ico");
icon.Visible = true;
icon.DoubleClick +=
       delegate(object sender, EventArgs args)
       {
           this.Show();
           this.WindowState = WindowState.Normal;
       };

protected override void OnStateChanged(EventArgs e)
       {
           if (WindowState == WindowState.Minimized)
                this.Hide();

           base.OnStateChanged(e);
       } 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-16T16:17:22.620

在 Server 2012 上，我在最小化到托盘时也遇到了异常，但它在 Windows 7 Pro 计算机上可以正常工作。在我能够远程调试之后，问题就很清楚了：

> 抛出异常：System.Windows.Forms.dll 中的“System.ArgumentException”
> 
> 附加信息：气球提示文本必须具有非空值。

解决方法是向图标添加气球提示文本：

```
var icon = new NotifyIcon();
icon.BalloonTipText = "Program is minimized. Click the tray icon to restore it."; 
```

# php - 在提交另一个表格时发布附加表格

> ID：15811859
> 
> 赞同：2
> 
> 时间：2013-04-04T12:55:54.763
> 
> 标签：php, jquery, zend-framework

我的网页上有 2 个表单，为了在第一个表单上保留数据，以防提交第二个表单，我也想将 1sr 表单发送到服务器。我正在使用 zend 框架，如果我在服务器上获得第一种形式，我可以将其设置为持久数据。知道如何使用 jquery 来做到这一点吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:45:02.373

如果您想同时发布两个表单，您可以使用 ajax。

形式：

```
<form id="form1" method="post" action="test.php">
    <input type="text" name="field1" />
</form>
<form id="form2" method="post" action="test.php">
    <input type="text" name="field2" />
    <input type="submit" name="submit" id="submit2" />
</form> 
```

JS：

```
$('#submit2').click(function(e) {
  e.preventDefault();
    $.ajax({
      type: "POST",
      url: $("#form2").attr("action"),
        data: {form1 : $("#form1").serialize(), form2 : $("#form2").serialize()},
    });
}); 
```

希望有帮助！

# java - 如何仅在我的战争中包含依赖项？

> ID：15811861
> 
> 赞同：1
> 
> 时间：2013-04-04T12:55:57.920
> 
> 标签：java, maven, maven-3, war

我想在我的战争中包含（maven）依赖项，同时确保它们**不在**运行时或测试范围内。

问题如下：

1.  我在战争中需要许多罐子（比如说罐子 A、B 和 C）。这是因为使用了 CDI。

2.  我有许多使用项目产生的战争的集成测试。这些集成测试是基于[arquillian](http://arquillian.org)的测试。

3.  但是，我还有其他*不是*集成测试的测试，它们会受到在类路径中包含 jar A、B 和 C 的不利影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:02:53.940

`war`不是依赖范围。有效范围是`provided`, `compile`, `runtime`, `test`, `system`. 您只能选择其中一个，它们是唯一的选项，并且它们都不排除在`test`范围之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:58:53.600

你有几个选项的属性：运行时、测试、编译等。

例如：

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>jcl-over-slf4j</artifactId>
  <version>${org.slf4j.version}</version>
  <scope>runtime</scope>
</dependency> 
```

更多你可以[在这里](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:00:21.387

您可以在依赖项部分中指定范围，如下所示。它可以被称为测试、编译或运行时。

```
 <dependency>
        <groupId>org.springframework.integration</groupId>
        <artifactId>org.springframework.integration.adapter</artifactId>
        <version>1.0.3.RELEASE</version>
        <scope>runtime</scope>            
    </dependency> 
```

希望这可以帮助。谢谢，KJ

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:34:35.973

**不错的选择**：

啊哈！可以通过使用 surefire-plugin 从测试阶段排除某些依赖项。这在这个[StackOverflow 答案](https://stackoverflow.com/a/12068045/376390)中有所描述。

这样我就可以创建我的战争并且在测试范围内没有依赖项（感谢[Peter Mularien](https://stackoverflow.com/users/159538/peter-mularien)）！

**不好的选择**：

看起来 Maven 程序集插件要求您`include`在依赖范围内也有任何可用的依赖项。因为`test`它是最小的范围，所以不可能在你的战争中包含一个依赖项，而不让它在项目的测试范围内也可用。

maven war 插件不允许您包含（或排除）依赖项。

另一种选择是创建第二个“分发”模块，在它的 pom.xml 中包含所需的依赖项。然而，这意味着 arquillian 测试引用了之前构建的战争——这也不理想。

另一种选择是使用 Shrinkwrap 创建一个带有测试的 jar 并派生 JVM 来运行“测试”jar——我之前需要使用多个 ORM 测试我的代码时已经这样做了（否则，在你的路径中有 OpenJPA例如，与在您的路径中使用 Hibernate 冲突）。但这会使您的测试与测试框架（JUnit、TestNG 等）断开连接，并使测试难以调试。

# objective-c - 过早调用 UITableView 的 reloadData 时崩溃

> ID：15811869
> 
> 赞同：2
> 
> 时间：2013-04-04T12:56:34.140
> 
> 标签：objective-c, cocoa-touch, uitableview

我有一个文本字段，在用户键入名称时显示建议的表格视图。数据源的过滤是在后台线程中进行的，因为它可能需要一些时间。

```
- (IBAction)personNameChanged:(UITextField *)sender
{
    NSString *name = sender.text;

    [backgroundThread performBlock:^{
            [self.personsDataSource filterDataSourceByName:name];
            [mainThread performBlock:^{
                [self.autoCompleteTableView reloadData];
            }];
    }];
} 
```

`[UITableView reloadData]`调用：

*   `-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`

...同步，而所有单元格：

*   `- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

...在稍后的时间点调用。

问题是当用户快速键入时，可能会`filterDataSourceByName`在所有单元格加载之前调用它。然后`cellForRowAtIndexPath`为不存在的 indexPath 调用。

**当调用 reloadData 太快以至于没有加载上次重新加载的所有单元格时，你应该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T13:11:56.460

表格视图的新数据源数组的分配也必须在主线程上完成，例如：

```
- (IBAction)personNameChanged:(UITextField *)sender
{
    NSString *name = sender.text;
    [backgroundThread performBlock:^{
            // Store filtered array into separate array here:
            NSArray *filteredPersons = [self.personsDataSource filterDataSourceByName:name];
            [mainThread performBlock:^{
                // Assign to table view data source array here:
                self.dataSourceArray = filteredPersons;
                [self.autoCompleteTableView reloadData];
            }];
    }];
} 
```

否则，当主线程上的表视图访问数据源数组时，可能会在后台线程上修改数据源数组。

# php - 使用本地 Windows 用户名和密码使用 PHP 和 LDAP 进行身份验证的 Intranet Web 应用程序

> ID：15811870
> 
> 赞同：0
> 
> 时间：2013-04-04T12:56:36.517
> 
> 标签：php

我们正在尝试修改我们的 Intranet Web 应用程序，每个用户都使用自己的用户名和密码登录身份验证来登录所有 Intranet Web 应用程序。

为此我们尝试使用他们本地的 windows /linux 系统用户名和密码。

一旦用户登录到他们的系统，他/她就可以在浏览 Web 应用程序后直接访问所有 Intranet Web 应用程序。他/她无需为每个 Intranet Web 应用程序每次都登录。

我读了很多文章（[一](http://www.techrepublic.com/article/take-advantage-of-php-and-ldap-authentication-for-windows-and-unix/5032010)、[二](https://stackoverflow.com/questions/2501729/using-windows-authentication-with-php)、[三](https://stackoverflow.com/questions/12754437/get-windows-username-of-current-user-using-php)、[四](https://stackoverflow.com/questions/6611797/find-windows-username-in-php)等等..），但我不明白我如何获得本地 windows/linux 系统用户名和密码那些使用 PHP 登录到该系统的人，至少用户名单独是够多了。

我试过`<?php echo getenv("username"); ?>` 这个，但它显示空白。

请给我一个解决方案。请不要拒绝这个问题。

提前感谢您的回答和评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:37:37.847

**简短答案**：您无法在服务器端获取本地用户 machine-loginname。这将是一个安全漏洞！

**长答案**：您可以使用 PHP 来查询您公司的 LDAP 是否在登录表单中给出的用户名和密码匹配，并使用该信息来验证该用户的给定服务。那是*一切的一个密码*-策略。

但据我了解，您需要一个*SingleSignOn* -Policy (SSO)，以便坐在其客户端的用户在访问网站时甚至不需要提供她的凭据。这只能使用处理“票证”之类的不同工具链来实现。这样的工具链将是Microsoft 的 ActiveDirectory 或 Apple 的 OpenDirectory 使用的**Kerberos 。**这个工具链可以使用 LDAP 作为后端来存储它的密码。

但是使用 Kerberos 绝非易事。必须对提供 Intranet 服务的 WebServer 进行*kerberized*，以便它可以处理从 kerberos-server 获得的票证。

你应该看看那个方向。在您最喜欢的搜索引擎中尝试将 Kerberos 或 SSO 作为搜索字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:04:18.730

您必须在 PHP 中使用 LDAP 进行身份验证。

脚步：

1) 制作登录表单 2) 接收输入并与您的数据库进行比较（通过 ldap）。3) 如果没问题，用 PHP 开始一个会话，保存一个 Cookie。4) 在您的所有站点中使用 session_start()，这样您就可以获得会话信息。

Cookie 只能由创建它的站点使用，因此您应该将您的 Intranet 放在同一个域中或将此信息保存在数据库中。

PHP 不会像您发布的那样获取您的系统变量，PHP 没有集成在任何操作系统中，它就像任何编程语言一样，您可以构建您想要的东西。

# c++ - 如何从精神语义规则绑定/调用存储在 fusion::vector 中的 boost::function？

> ID：15811875
> 
> 赞同：3
> 
> 时间：2013-04-04T12:56:48.313
> 
> 标签：c++, boost, boost-spirit, boost-fusion

我正在尝试通过 qi::symbols 使用 boost::function 类型的值映射一些关键字处理程序（方法）。所以如果找到关键字我想调用方法。但我无法从这张地图绑定方法。编译器因 phoenix::bind 上的一堆错误而失败。我做错了什么？

部分代码如下：

```
template <typename Iterator>
struct Grammar : qi::grammar<Iterator, AST::FunctionCall(), ascii::space_type>
{
    Grammar():
        Grammar::base_type(query),
    {
        ...
        operand =
          predicate [phoenix::bind(phoenix::at_c<0>(qi::_1), this, phoenix::at_c<1>(qi::_1))]; // **Compiler fails here**
        ...

        predicate = 
            (pred_tbl > '(')
         > -(primary_expr % ',')
         > ')';
        ... 

        pred_tbl.add
            ("composing",    &RQL::composing)
        );
    }

    qi::rule<Iterator, fusion::vector<Predicate, PredicateArgList>(), ascii::space_type>   predicate;

    typedef std::vector<AST::Value> PredicateArgList;
    typedef boost::function<void (Grammar*, const PredicateArgList& args)> Predicate;   
    qi::symbols<char, Predicate> pred_tbl;

    void composing(const PredicateArgList& args);
}; 
```

编译器错误：

```
error C2903: 'result' : symbol is neither a class template nor a function template  c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  115 
error C2039: 'result' : is not a member of 'boost::function<Signature>' c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  115 
error C2059: syntax error : '<' c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  115 
error C2238: unexpected token(s) preceding ';'  c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  116 
error C2065: 'function_apply' : undeclared identifier   c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  124 
error C2955: 'boost::mpl::eval_if' : use of class template requires template argument list  c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  125 
error C2146: syntax error : missing ';' before identifier 'type'    c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  126 
error C3254: 'boost::phoenix::detail::function_eval<2>::result<Env,F,A0,A1>' : class contains explicit override 'type' but does not derive from an interface that contains the function declaration c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  126 
error C2838: 'type' : illegal qualified name in member declaration  c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  126 
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  126 
error C2602: 'boost::phoenix::detail::function_eval<2>::result<Env,F,A0,A1>::type' is not a member of a base class of 'boost::phoenix::detail::function_eval<2>::result<Env,F,A0,A1>'   c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  126 
error C2868: 'boost::phoenix::detail::function_eval<2>::result<Env,F,A0,A1>::type' : illegal syntax for using-declaration; expected qualified-name  c:\work\include\boost-1_41\boost\spirit\home\phoenix\core\detail\function_eval.hpp  126 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T23:44:56.660

我想丢失的链接可能是

```
#define BOOST_SPIRIT_USE_PHOENIX_V3 
```

**[在http://liveworkspace.org/code/3uvyb4$1](http://liveworkspace.org/code/3uvyb4%241)**上现场观看

它打印

```
Hello world from 'Grammar::composing(PredicateArgList const&)' args:3 
```

正如预期的那样。

**更新**PS。我可能更喜欢这样编写绑定调用：

```
Grammar(): Grammar::base_type(predicate)
{
    using phx::bind;
    using namespace qi;

    as<PredicateArgList> coerce;

    predicate = 
        (pred_tbl > '('
                  > coerce [ -(primary_expr % ',') ]
                  > ')') 
        [ phx::bind(_1, this, _2)]
        ;

    // ... 
```

我认为使用`_1`而`_2`不是`at_c<n>`调用更清楚。

这是供参考的代码：

```
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/function.hpp>
#include <boost/phoenix/fusion.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/qi.hpp>

namespace qi     = boost::spirit::qi;
namespace fusion = boost::fusion;
namespace ascii  = boost::spirit::ascii;
namespace phx    = boost::phoenix;

namespace AST
{
    struct FunctionCall {};
    using Value = int;
}

template <typename Iterator>
struct Grammar : qi::grammar<Iterator, AST::FunctionCall(), ascii::space_type>
{
    Grammar(): Grammar::base_type(predicate)
    {
        using phx::bind;
        using namespace qi;

        as<PredicateArgList> coerce;

        predicate = 
            (pred_tbl > '('
                      > coerce [ -(primary_expr % ',') ]
                      > ')') 
            [ phx::bind(_1, this, _2)]
            ;

        pred_tbl.add
            ("composing",    &Grammar::composing)
        ;

        primary_expr = qi::int_;
    }

    typedef std::vector<AST::Value> PredicateArgList;
    typedef boost::function<void (Grammar*, PredicateArgList const&)> Predicate;   
    qi::symbols<char, Predicate> pred_tbl;

    qi::rule<Iterator, AST::Value(), ascii::space_type>   primary_expr;
    qi::rule<Iterator, AST::FunctionCall(), ascii::space_type>   predicate;

    void composing(const PredicateArgList& args) 
    {
        std::cout << "Hello world from 'Grammar::composing(PredicateArgList const&)' args:" << args.size() << "\n";
    }
};

int main()
{
    const std::string input("composing (1, 2, 3)");
    auto f = begin(input), l = end(input);

    Grammar<decltype(f)> p;

    bool ok = qi::phrase_parse(f,l,p,ascii::space);
    return ok?0:255;
} 
```

# parsing - 带有 HTTP 数据的 TCP 段

> ID：15811876
> 
> 赞同：3
> 
> 时间：2013-04-04T12:56:48.960
> 
> 标签：parsing, http, tcp

我正在实现一个http解析器；作为 http 数据的指示符，我正在搜索“HTTP/1.? CRLF' 在流中。TCP 层可以将应用程序提供的缓冲区切割成适合通过网络传输的块。是否有可能在 TCP 标头之后不紧跟http 数据（例如 GET [http://www.google.com/index.html HTTP/1.1 CRLF）？](http://www.google.com/index.html)此外，是否可以在 TCP 段之间拆分例如“GET ..”查询？

谢谢。

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:16:59.227

使用 TCP，您需要基本上假设分段可以发生在任何地方。在设计解析堆栈时，您必须考虑这一点。您不能阅读一个片段并假设您有足够的阅读量。因此，明智的做法是将 TCP 视为流并将其放在词法分析器下方。您只需要适应对解析器/词法分析器的调用可能需要更长的时间或错误的事实。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:41:47.300

> 是否有可能在 TCP 标头之后不紧跟http 数据（例如 GET [http://www.google.com/index.html HTTP/1.1 CRLF）？](http://www.google.com/index.html)

可能是的。[HTTP Pipelining](http://en.wikipedia.org/wiki/HTTP_pipelining)使得在一个段中拥有多个请求成为可能。

> 此外，是否可以在 TCP 段之间拆分例如“GET ..”查询？

是的。请求大小可以大于段大小。此外，TCP 段的分段可能发生在 IP 层。

这将是一种不常见的自然事件，但可能是故意逃避的一部分。

唯一可以确定的方法是重新组装流，但这在处理和内存方面是昂贵的。如果您非常在意，则最好使用透明的 HTTP 代理。

# image - 在 Internet Explorer 10 中随机不加载图像：如何解决？

> ID：15811877
> 
> 赞同：4
> 
> 时间：2013-04-04T12:56:53.500
> 
> 标签：image, wordpress, loading, internet-explorer-10

我正在开发一个 WordPress 主题，在 IE 10 中，图像随机不显示。我得到的只是这样的框架：

![IE10中未加载帧图像](https://i.stack.imgur.com/8afDt.png)

如果我重新加载图像可能会显示，但另一个会有相同的行为。查看 IE 开发工具的网络部分，这就是我得到的：

![网络工具 IE10](https://i.stack.imgur.com/Z53Rm.png)

“Terminato”是意大利语，意为“终止”。似乎它甚至无法发出请求：没有响应标头或请求标头，什么都没有。

奇怪的是，如果我在图像的上下文菜单中单击“显示图像”，图像就会显示得很好。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T18:00:09.130

从来没有见过类似的东西，但这里有一些建议：

**1.删​​除浏览历史：** 使用CRTL + SHIFT + DEL。

**2\. 重置 Internet Explorer：** 打开 IE > 工具 > Internet 选项 > 高级 > 重置 > 勾选“删除个人设置” > 重置 > 重启 IE。

**3\. 最重要的是：使用未安装附加组件的 Internet Explorer：** 单击屏幕右侧的齿轮图标，然后单击“管理附加组件”。然后禁用所有这些并重试。

**4\. 将文件上传到在线服务器而不是本地主机。**

# java - 如何在 GUI 上使用 try/catch 块来测试 Deck 类上的方法

> ID：15811883
> 
> 赞同：0
> 
> 时间：2013-04-04T12:57:16.930
> 
> 标签：java, user-interface, exception-handling, try-catch, numberformatexception

嘿伙计们在为我的 Java2 类编写程序时遇到了另一个问题。
我创建了一个 Deck() 类，在其中定义了以下方法：
[ isEmpty()、shuffleDeck()、dealCards()、cut()、putCardsInDeck()，最后是 toString()]
我已经为所有这些，到目前为止，它们都运行良好，这要感谢一些在这个网站上帮助过我的用户。

无论如何，我正在尝试创建一个应用程序类，在该类中测试我在甲板上的几种方法。我知道我可以很容易地调用方法打印出来并硬编码大多数其他的东西来测试这些方法。但我想超越这一点。
我正在创建一个允许用户通过按下按钮来测试这些方法的 GUI，在这里我遇到了 dealCards() 和 putCardsInDeck() 方法的小问题。
这是他们应该做什么的简要描述：

**dealCards()：**这个方法将移除并返回存储在 theDeck 开头的卡片。

```
public String dealCard()
{
    Node current;
    Card cTemp = null; 

    if(isEmpty())
        throw new DeckException("theDeck","empty");
    else
    {
        current = theDeck;
        cTemp = current.getItem();
        theDeck = theDeck.getNext();
        numCards--;
    }

    return cTemp.toString();
} 
```

**putCardsInDeck()：**这将接受对 Card 数组的引用。阵列中的牌将被移除并存储在牌组中，阵列为空。从阵列中取出的牌应存放在牌组的底部。如果数组中的卡片数量会导致牌组大小大于 52，则应抛出 DeckException 并应包含适当的消息。

```
 public void putCardsInDeck( Card [] cards ) throws DeckException
{
    Card[] theCards = cards;
    Node current = theDeck;
    Node lastCard = theDeck;
    Node temp;
    int totalCards = theCards.length + numCards;

    if (totalCards > 52)
        throw new DeckException("Deck", "full");
    else
    {
        // Using current to go to the end of the deck
        for(int j=0; j< ( numCards - 1 ); j++)
            current = current.getNext();

        // Storing the where current landed in lastCard
        lastCard = current;

        // Using a for loop to go thru the array and put the cards after the lastCard
        for (int i=0; i < theCards.length; i++)
        {
            temp = new Node(new Card(theCards[i].getValue()), null);
            lastCard.setNext(temp);
            lastCard = lastCard.getNext();
            theCards[i] = null;
            numCards++;
        }
    }
} 
```

这是我的 DeckException 类的代码

```
@SuppressWarnings("serial")
public class DeckException extends RuntimeException {

   public DeckException (String collection, String status)
   {
    super ("The " + collection + " is "+ status  + ".");
   }
} 
```

**GUI 代码**
好的，现在到给我带来问题的部分。在下面的代码中，我使用了一个在甲板上执行方法的 GUI（我还没有完成： putCardsInDeck （还没有完成，因为我认为我会遇到与使用 DealCards 方法相同的问题）或顺便说一句，新的甲板按钮（你会看到）。

```
public static void main (String [] args)
{
    // Creating a new Deck
    Deck theDeck = new Deck();

    String listOfCards = "";
    int numCardsDealt;

    String[] choices = {"Display Deck", "Shuffle Deck", "Cut Deck", "Deal Deck","PutCardsInDeck", "New Deck", "Exit"}; 
    int choice = JOptionPane.showOptionDialog(null, 
            "Enter your choice....", 
            "Main Menu", 
            JOptionPane.YES_NO_CANCEL_OPTION, 
            JOptionPane.QUESTION_MESSAGE, 
            null, 
            choices, 
            choices[0]);

    while(choice !=6 && choice !=-1) 
    {
        //try{

            switch(choice)
            {
            // Just calls theDeck.toString() and displays it on a scrollpane
            case 0:
                JTextArea text = new JTextArea(20,20);
                JScrollPane scroll = new JScrollPane(text);
                text.setText(theDeck.toString());
                JOptionPane.showMessageDialog(
                        null, 
                        scroll, 
                        "The Deck", 
                        JOptionPane.DEFAULT_OPTION);
                break;

            // Displays the status of theDeck before the deck is shuffled and then after
            case 1:
                text = new JTextArea(20,20);
                scroll = new JScrollPane(text);
                text.setText("TheDeck before shuffleDeck method:\n" + theDeck.toString());
                theDeck.shuffleDeck();
                text.append("\n\nTheDeck after shuffleDeck method:\n" + theDeck.toString());
                JOptionPane.showMessageDialog(
                        null, 
                        scroll, 
                        "Testing the shuffleDeck() method on theDeck.", 
                        JOptionPane.DEFAULT_OPTION);

                break;

            // Displays the status of theDeck object before the cut method and after
            case 2:
                text = new JTextArea(20,20);
                scroll = new JScrollPane(text);
                text.setText("TheDeck before cut method: \n" + theDeck.toString());
                theDeck.cut();
                text.append("\n\nTheDeck after cut method: \n" + theDeck.toString());
                JOptionPane.showMessageDialog(
                        null, 
                        scroll, 
                        "Testing out the cut() method on theDeck", 
                        JOptionPane.DEFAULT_OPTION);

                break;

            // Displays the status of theDeck before cards are dealt
            // Asks user to select a number of cards and deals that amount of cards
            // Displays the status of theDeck after the cards have been dealt
            case 3:
                text = new JTextArea(20,20);
                scroll = new JScrollPane(text);
                text.setText("TheDeck before dealCard method: \n" + theDeck.toString());
                numCardsDealt = Integer.parseInt(JOptionPane.showInputDialog(null, "Please enter the number of cards you want dealt..."));

                try
                {
                    for( int i = 0; i<numCardsDealt; i++)
                        listOfCards+="Card dealt " +  (i+1) + ": " +theDeck.dealCard() + "\n";

                    text.append("\n\nList of cards dealt:\n" + listOfCards);
                    text.append("\n\nTheDeck after dealCard method: \n" + theDeck.toString());
                    JOptionPane.showMessageDialog(
                            null, 
                            scroll, 
                            "The Deck before its been cut.", 
                            JOptionPane.DEFAULT_OPTION);
                }
                catch(DeckException ex)
                {
                    JOptionPane.showMessageDialog(null, "There are not enough cards in \nthe deck" +
                            "to satisty the number\nof cards you have entered to be dealt.");// \n"Please try a different number");
                }
                break;

            } // ends switch

            choice = JOptionPane.showOptionDialog(null, 
                    "Enter your choice....", 
                    "Main Menu", 
                    JOptionPane.YES_NO_CANCEL_OPTION, 
                    JOptionPane.QUESTION_MESSAGE, 
                    null, 
                    choices, 
                    choices[0]);

        //} // ends try

        //catch(NullPointerException ex)
        //{

            //System.out.println("NullPointerException");
        //}

        //catch(NumberFormatException ex)
        //{
            //System.out.println("NumberFormatException");
        //}

    }// ends while loop 
```

当我的应用程序类运行并且用户单击 DealCard 按钮时，系统会要求用户输入一个数字，但假设用户没有输入我得到的数字：

**NumberFormatException (NFE):**线程“main”java 中的异常。 lang.NumberFormatException：对于输入字符串：“”

，当我按下取消时，我得到
**NumberFormatException (NFE)：**线程“main”中的异常 java.lang.NumberFormatException: null

当我按下红色 X 关闭输入对话框时，我得到另一个
**NumberFormatException ( NFE）：**线程“main”中的异常 java.lang.NumberFormatException：null

**最后**我的观点是：
我希望能够弥补这些情况，如果用户没有输入任何内容，弹出窗口应该会继续要求用户输入一个数字，直到他们按下红色 X 或取消。

但是当我使用 try/catch 块时，无论我是否按下红色 X，输入对话框都会不断返回，不要输入任何内容或按下取消。=/（我的另一个想法是如果用户将输入对话框留空，则生成一个随机数......但一次一步^_^）

PS您将在我的代码中看到我有另一个 try/catch 块以防案例 3那是为了捕获另一个异常，以防止用户发的牌比牌组中的牌多。（我想我必须创建另一种名为 size() 的方法来查看牌组中有多少张牌，但是 IDK ......你们怎么看）

所以是的，就是这样。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:58:23.873

*所以我设法弄清楚了，到目前为止它有效。

```
String parseThis;
 do {
     parseThis = JOptionPane.showInputDialog(null, "Please enter the number of cards you want dealt...");
    } while (parseThis == "");

 if (parseThis == null)
    break;

 numCardsDealt = Integer.parseInt(parseThis); 
```

如果用户不插入值，这将使输入对话框不断返回。一旦用户按下取消或关闭输入对话框，它就会消失

无论如何谢谢

# ruby-on-rails - 我的 Rails Javascript 清单文件既不编译也不包含任何必需的文件

> ID：15811889
> 
> 赞同：8
> 
> 时间：2013-04-04T12:57:38.137
> 
> 标签：ruby-on-rails, asset-pipeline

我看过一些类似的帖子，但没有解决方案，所以我想我会提出一个更多记录的问题。

**清单文件中的我的问题**JS 不包含或编译任何 JS。

在本地运行我的服务器并打开 JS 文件时，我没有看到任何编译的内容，只有标准的 application.js 清单文件：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require underscore
//= require backbone
//= require backbone_rails_sync
//= require backbone_datalink
//= require backbone/myapp
//= require_tree . 
```

我的 development.rb ：

```
MyApp::Application.configure do
  config.cache_classes = false  
  config.whiny_nils = true
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false
  config.action_mailer.raise_delivery_errors = false
  config.active_support.deprecation = :log
  config.action_dispatch.best_standards_support = :builtin
  config.active_record.mass_assignment_sanitizer = :strict
  config.active_record.auto_explain_threshold_in_seconds = 0.5
  config.assets.compress = false
  config.assets.debug = true
end 
```

我的 application.rb ：

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  Bundler.require(*Rails.groups(:assets => %w(development test)))
end

module MyApp
  class Application < Rails::Application
    config.encoding = "utf-8"
    config.filter_parameters += [:password]
    config.active_support.escape_html_entities_in_json = true
    config.active_record.whitelist_attributes = true
    config.assets.enabled = true
    config.assets.version = '1.0'
  end
end 
```

我的日志：

```
Started GET "/questions" for 127.0.0.1 at 2013-04-04 08:56:09 -0400
Processing by QuestionsController#index as HTML
Completed 200 OK in 204ms (Views: 16.0ms | ActiveRecord: 17.4ms)

Started GET "/assets/application.css" for 127.0.0.1 at 2013-04-04 08:56:09 -0400
Served asset /application.css - 304 Not Modified (2ms)

Started GET "/assets/application.js" for 127.0.0.1 at 2013-04-04 08:56:09 -0400
Served asset /application.js - 304 Not Modified (0ms)

Started GET "/assets/favicon.png" for 127.0.0.1 at 2013-04-04 08:56:09 -0400
Served asset /favicon.png - 304 Not Modified (0ms) 
```

**需要注意**的是，当我从 MongoDB 构建迁移到 Postgres 构建时，这个应用程序是从另一个应用程序中挑选出来的。所以我认为这很可能与一些*未经挑选的*细节有关。

可以通过执行此问题来重现此问题 ..

1.  `$ rvm use ruby-2.0.0-p0`
2.  `$ rails new project`
3.  `alert('hey')`在其中创建一个javascript文件`/assets/javascripts/`
4.  `$ rails s`

我认为这个问题是因为 Ruby 2 还不能与 Rails 一起工作:(

* * *

我已将其正式确定为与 Rails 3.2.6 不兼容的 Ruby 2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-29T07:16:31.890

Rajesh 的解决方案也对我有用。我使用的是 2.0.0-p195 和 rake assets:precompile on production 并没有真正读取 application.js，我最终得到了大小为 1kb 的文件 application-###.js。

所以我回到 ruby​​ 1.9.3，更新包，手动清除缓存

```
rm -rf tmp/cache/assets/*
rm -rf tmp/cache/sass/* 
```

接着

在我的 application.js 中，我有

```
//= require jquery
//= require bootstrap
//= require_tree . 
```

请注意，我不使用 jquery-ui 或 jquery_ujs

然后我跑了

```
rake RAILS_ENV=production RAILS_GROUP=assets assets:clean
rake RAILS_ENV=production RAILS_GROUP=assets assets:precompile 
```

现在它起作用了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-17T06:24:06.950

我遇到了同样的问题，花了很长时间才找到解决方案。

我刚刚切换回`ruby-1.9.3-p429`，它解决了问题。我不知道如何管理它`ruby 2 patches`。我用过`ruby-2.0.0-p247`和`ruby-2.0.0-p195`。

所以，就做吧`rvm use ruby-1.9.3-p429`。然后运行“捆绑更新”。然后通过在控制台中运行来清除 Rails 缓存，`Rails.cache.clear`并且不要忘记清除浏览器缓存。

希望一切顺利。:)-

# javascript - TinyMCE - mceInsertContent 不将 html 转换为实体

> ID：15811890
> 
> 赞同：2
> 
> 时间：2013-04-04T12:57:43.653
> 
> 标签：javascript, tinymce, entities

我正在编写一个插件，允许我将准备好的 html 部分添加到我的编辑器中。

我的问题是，当我运行 mceInsertContent 命令时，它会自动将我的 < > 括号转换为实体。

我想通过将 entity_encondig 设置为“命名”并将实体定义为 null 来更改它，但这没有帮助。看起来在命名模式下它仍然转换所有在“原始”模式下转换的实体。

[http://www.tinymce.com/wiki.php/Configuration:entity_encoding](http://www.tinymce.com/wiki.php/Configuration:entity_encoding)

我正在为此寻找解决方案。

# jquery - jQuery可拖动appendTo不起作用

> ID：15811896
> 
> 赞同：1
> 
> 时间：2013-04-04T12:57:58.670
> 
> 标签：jquery, html, css, draggable

以下代码：

**jQuery**

```
 $('.dragBox').draggable({ 
        axis: 'y',
        appendTo: 'parent',
        containment: [0,0,0,150],
        start: function() {
            $(this).addClass('grabbing');
        },
        stop: function() {
            $(this).removeClass('grabbing');
        }
    }); 
```

**HTML**

```
<div class="container">
    <div class="cropBox"><div class="dragBox"></div></div>
</div> 
```

但是 .dragBox 不会附加到 .cropBox。内盒的 y 轴不是从 0 开始，而是从 -117 开始。117 是 .cropBox 和窗口上边缘之间的像素距离。

**编辑**

我修好了它

```
startDrag();

$(window).resize(function(){
    startDrag();
});
function startDrag(){
    var xAxis = $('.dragBox').outerWidth() - $('.cropBox img').outerWidth();
    var yAxis = $('.dragBox').outerHeight() - $('.cropBox img').outerHeight();
    var x1 = $('.dragBox').position().left;
    var y1 = $('.dragBox').position().top;
    if( $('.dragBox img').outerWidth() > $('.dragBox img').outerHeight() ) {
        var axis = 'x';
        var containment = [xAxis+x1,0,x1,0];
    } else {
        var axis = 'y';
        var containment = [0,yAxis+y1,0,y1];
    }

    $('.dragBox img').draggable({ 
        axis: axis,
        appendTo: 'parent',
        containment: containment,
        start: function() {
            $(this).addClass('grabbing');
        },
        stop: function() {
            $(this).removeClass('grabbing');
        }
    }); 
} 
```

感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:03:49.497

据我了解您的帖子，您正在寻找：

```
 $('.dragBox').draggable({ 
    axis: 'y',
    containment: 'parent',
    start: function() {
        $(this).addClass('grabbing');
    },
    stop: function() {
        $(this).removeClass('grabbing');
    }
}); 
```

# javascript - 如何将带有图像的画布保存为 PNG 文件

> ID：15811897
> 
> 赞同：1
> 
> 时间：2013-04-04T12:57:59.640
> 
> 标签：javascript, jquery, html, canvas, png

我正在使用以下代码

**画布和图像的HTML**代码

```
<canvas id="myCanvas" style="display:none" width="400" height="400"></canvas>
<img id="canvasImg" /> 
```

**用于从服务器获取图像并显示在画布上然后显示图像的**JavaScript代码****

 **```
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");

baseimage        = new Image();
baseimage.src    = 'what.jpg';
baseimage.onload = function() {
    ctx.drawImage(baseimage,1,1);
}

var dataURL = canvas.toDataURL("image/png");
document.getElementById('canvasImg').src = dataURL;
$("#myCanvas").show(); 
```

图像正在显示，但没有“what.jpg”文件。在画布上文件是可见的，但在 IMG 标签中什么都看不到。我在最新版本的 Chrome 上运行它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T15:48:13.477

您的代码有几个问题。

1.  您在加载和绘制 jpeg 图像之前调用 toDataUrl，因此您获得了空画布的数据 URL。将示例的最后三行移动到 image.onload 的处理函数中，它应该可以工作。

2.  您在 canvas 元素上调用 .show() ，而不是您将 dataUrl 分配给的 img 元素。但是我想知道您为什么要这样做，因为您的意图似乎是使用 invisible`<canvas>`来为 visible 生成内容`<img>`，这就是 CSS 样式所说的。

3.  应该在设置 src 之前定义 onload 处理程序，因为当图像在浏览器缓存中时，可以在设置 src 属性的那一刻调用 onload 函数，这是在您定义自己的加载处理程序之前。

这是固定代码（未经测试）：

```
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");

baseimage        = new Image();
baseimage.onload = function() {
    ctx.drawImage(baseimage,1,1);    
    var dataURL = canvas.toDataURL("image/png");
    document.getElementById('canvasImg').src = dataURL;
}
baseimage.src    = 'what.jpg'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:04:07.730

我认为 onload 调用应该在 src 之前。

像这样：

```
baseimage = new Image();
baseimage.onload = function() {
ctx.drawImage(baseimage,1,1);
}
baseimage.src = 'what.jpg'; 
```**

# c# - c# website - 分析代码和查询

> ID：15811899
> 
> 赞同：2
> 
> 时间：2013-04-04T12:58:12.490
> 
> 标签：c#, asp.net, sql-server, visual-studio-2010, profiling

我正在开发一个预先存在的 c#/asp 网站，并且正在尝试对其进行优化。

为此，我想了解在每个页面上进行了多少 SQL 查询。如果可能的话，找出它给服务器带来了多少负载，或者如果不可能，找出执行请求所花费的时间。

我可以使用哪些工具，我该怎么做？

我正在使用 Visual Studio 2012 Ultimate，并且正在连接到 SQL Server 2005。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:03:47.273

如果您想知道，在给定页面上，有多少 sql 查询进入您的数据库服务器，最好的分析方法是使用[SQL Profiler](http://msdn.microsoft.com/en-in/library/aa173918%28v=sql.80%29.aspx)。

```
SQL Profiler is a graphical tool that allows system administrators to monitor 
events in an instance of Microsoft® SQL Server™. You can capture and save data 
about each event to a file or SQL Server table to analyze later. For example,
you can monitor a production environment to see which stored procedures are 
hampering performance by executing too slowly. 
```

[在此处](http://msdn.microsoft.com/en-us/library/ms181091.aspx)和[此处](http://www.codeproject.com/Articles/21371/SQL-Server-Profiler-Step-by-Step)阅读有关此内容的更多信息

现在，如果您想基于其 XHTML 标记来分析您的页面的性能，那么有很多工具可以做到这一点。我使用并认为非常有用的是 Firefox 插件[YSlow](https://addons.mozilla.org/en-us/firefox/addon/yslow/)

```
YSlow analyzes web pages and suggests ways to improve their performance based 
on a set of rules for high performance web pages. 
```

现在，如果您想在语义、性能、代码构造方面优化您的 C# 代码，请使用 Microsoft.NET 这个免费的可用工具，称为[FxCop](http://msdn.microsoft.com/en-us/library/bb429476%28v=vs.80%29.aspx)。

```
FxCop is an application that analyzes managed code assemblies (code that 
targets the .NET Framework common language runtime) and reports information 
about the assemblies, such as possible design, localization, performance, 
and security improvements. Many of the issues concern violations of the 
programming and design rules set forth in the Design Guidelines, which are 
the Microsoft guidelines for writing robust and easily maintainable code by 
using the .NET Framework. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:16:23.997

我也可能会建议[New Relic](http://newrelic.com/)，它是一项商业服务，一开始是免费试用的，然后如果您不想付费，则将您转移到应用程序性能检查的免费层。

我用它来检查我的应用程序中的瓶颈，它确实有助于发现问题。它会告诉您代码中花费最多时间的位置。

注意：您需要完全访问服务器才能安装监控服务。

# php - 我可以连接来自不同数据库的两个表吗？

> ID：15811900
> 
> 赞同：1
> 
> 时间：2013-04-04T12:58:13.123
> 
> 标签：php, mysql, sql-server, arrays, join

我有两个不同的数据库表，它们必须（内部）相互连接。一张来自 MSSQL 数据库，一张来自 MySQL 数据库。我几乎可以肯定不可能在数据库级别加入这些表，所以我必须在 PHP（我正在使用的脚本语言）中执行此操作。

只是为了说明一些事情，这是关于获取订单信息。我的 MSSQL 数据库有 、 、 等列`order_id`。`order_description`我`delivery_date`的 MySQL 数据库具有相同的订单 ID 和状态（例如“已启动”、“已暂停”、“准备好”、“已交付”）。我想要的是在一张表中加入所有信息。

我正在考虑从 MSSQL 数据库中获取所有信息，然后从 MySQL 数据库中为每个组选择状态，但这是一个巨大的性能问题：如果我有 1000 行，我将不得不执行 1000 次 SELECT。

真正完美的是在两个数据库上执行简单的 SELECT 操作，将结果放入两个不同的数组中并合并数组。我知道有一个名为 的 PHP 函数`array_merge_recursive()`，但这只是将两个数组粘在一起，而不是将它们连接到主键 ( `order_id`) 上。

在一个概览中获取两个数据库表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:07:36.940

我会考虑从 SQL Server 创建到 MySQL 服务器的链接服务器。然后，您可以编写两个表之间的连接，就好像它们在同一台服务器上一样。如果创建视图，则可以从应用程序中选择视图。我认为这会比在您的应用程序中“加入”更快。它当然应该更容易编码。

要对视图进行编码，您将使用由四部分组成的命名约定来引用 MySQL 服务器：

例子：

```
select *
from mysqlsrv.mydb1..mytbl join
mssql.mydb2.dbo.myOtherTbl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:08:42.430

如果你想使用两个数组中的键，它们相等，并且只替换值，你只需要[array_merge()](http://php.net/manual/en/function.array-merge.php)。

> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加。
> 
> 带有数字键的输入数组中的值将使用从结果数组中的零开始的递增键重新编号。

但是，从两个数据库中获取信息并将其写入数组仍然与使用 SELECT 获取信息并将获取的行用作另一个 SELECT 中的匹配项相同。

# typo3 - 是否可以在 TYPO3 4.7 中设置默认预览模式？

> ID：15811903
> 
> 赞同：2
> 
> 时间：2013-04-04T12:58:27.813
> 
> 标签：typo3, typoscript

有没有办法配置哪个[预览模式（滑块，水平，垂直）](http://www.ndsu.edu/cms/kb/preview/)用作工作区预览的默认预览模式，从*工作区预览链接*调用？

升级到 TYPO3 4.7 后，默认模式设置为滑块，这在某些浏览器中相当有问题。因此，我们想设置另一个默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T23:35:55.590

[我无法成功设置它，但尝试在您的页面 TSConfig](http://docs.typo3.org/typo3cms/TSconfigReference/PageTsconfig/Field/Index.html)中摆弄这个值：

```
workspaces.workspaces.splitPreviewModes.value = vbox, hbox 
```

或者

```
tx_workspaces.workspaces.splitPreviewModes.value = vbox, hbox 
```

默认值为`slider, vbox, hbox`。恕我直言，您只能删除滑块，但不能将其他模式设置为默认模式。

* * *

如果您知道如何驯服 PHP 代码，请检查系统文件中的精确渲染`typo3/sysext/workspaces/Classes/Controller/PreviewController.php`> `$splitPreviewModes`

# php - Laravel URL 重写

> ID：15811907
> 
> 赞同：0
> 
> 时间：2013-04-04T12:58:36.473
> 
> 标签：php, url-rewriting, laravel

通过访问直接进入我的 laravel 访问的控制器：

```
http://localhost/laravel/public/home 
```

我必须不要使用**/public**吗？我可以使用：

```
http://localhost/laravel/home 
```

这是因为该目录位于导致此问题的公用文件夹上并且应该是这样的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:03:18.520

取决于你的 Laravel 实例所在的位置，以及是否设置了重写规则。

假设你的 Apache/nginx 文档根目录是 /my/dir/ 并且你的公共文件夹是 /my/dir/public/ （这使得 Laravel 目录 /my/dir/laravel/），你将需要 /public/。

但是，如果你的根目录是 /my/dir/ 并且你的 laravel 文件夹在 /my/laravel/ 中，你可以将 public 重命名为 dir 并跳过使用 public 部分，因为它现在映射到 web 服务器的 documentRoot。

您可以在多个位置更改所有路径：

*   文件的位置`paths.php`（定义所有其他路径）`index.php`在您的公用文件夹中
*   所有其他路径的位置在 中`paths.php`一一定义。公共的是 $paths["public"]。您可以将其更改为您喜欢的任何内容，它将影响 Laravel 和 Artisan CLI 界面。请记住，Laravel 在设置变量后会进行一个小的目录转换（仍在该文件中）。

# php - 请求无效，因为应用程序密钥与客户端令牌相同

> ID：15811909
> 
> 赞同：4
> 
> 时间：2013-04-04T12:58:40.783
> 
> 标签：php, facebook, api, facebook-graph-api

我的 Facebook 应用昨天运行良好，但今天它无法获取 access_token。

我的代码是：

```
$token_url="https://graph.facebook.com/oauth/access_token?"."client_id=".$app_id."&redirect_uri=".urlencode($my_url)."&client_secret=".$app_secret."&code=".$code;
$response=file_get_contents($token_url);
print_r($response);
$params = null;
parse_str($response, $params);
echo  $params['access_token']; 
```

错误是：

```
{
   "error": {
      "message": "The request is invalid because the app secret is the same as the client token",
      "type": "OAuthException",
      "code": 1
   }
} 
```

如何解决这个问题？

我也使用了 curl，但响应是：

```
object(stdClass)#121 (1) {
    ["error"]=> object(stdClass)#11 (3) {
        ["message"]=> string(77) "The request is invalid because the app secret is the same as the client token"
        ["type"]=> string(14) "OAuthException"
        ["code"]=> int(1)
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T07:57:17.867

确保客户端令牌不同于应用程序机密（高级 > 安全性），并确保您的应用程序是 Web 应用程序而不是本机应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-20T07:36:44.333

当您收到此错误时，您需要：

1）将本机/桌面应用程序设置为“否”

[![Facebook 对话框的屏幕截图](https://i.stack.imgur.com/0Ti85.png)](https://i.stack.imgur.com/0Ti85.png)

2) 重置之前的客户端令牌。 [![Facebook 客户端令牌重置](https://i.stack.imgur.com/4rofu.png)](https://i.stack.imgur.com/4rofu.png)

3）将新生成的令牌放入您的应用程序

您可以在 Facebook 应用设置的高级页面上找到这两个： [https ://developers.facebook.com/apps/[your_app_id]/settings/advanced/](https://developers.facebook.com/apps/[your_app_id]/settings/advanced/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:56:14.723

我重置 app_secret 然后正常工作，并将 Advanced->security 更改为 WEB

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-19T10:42:35.913

我有同样的问题，几天来，我搜索并寻找解决方案。但是当我将“本机或桌面应用程序”设置为“否”时，一切正常 - 在“应用程序->设置->高级”中

# google-chrome - 谷歌地图在 chrome 中被截断

> ID：15811911
> 
> 赞同：1
> 
> 时间：2013-04-04T12:58:43.053
> 
> 标签：google-chrome, google-maps-api-3

googlemaps js api 遇到了一个奇怪的问题。我生成了一张地图，它在所有浏览器中完美显示，但在 chrome 中。在那里它以某种方式被切断或放大太多，因此左侧的控件被切断。

看这个截图：![在此处输入图像描述](https://i.stack.imgur.com/Va6l0.png)

我搜索了问题，但找不到有效的解决方案，添加

```
google.maps.event.trigger(map, "resize"); 
```

就像我在几个线程中阅读的那样没有帮助..

这是我的代码：

js：

```
var myLatlng = new google.maps.LatLng(52.458641, 13.380887);
  var myOptions = {
    zoom: 15,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("Map"), myOptions);
  marker = new google.maps.Marker({
        position: myLatlng,
        map: map
    });
    google.maps.event.trigger(map, "resize"); 
```

html:

```
<div id='Map'></div> 
```

CSS：

```
#Map {
width: 250px;
height: 250px;
border: 1px solid #000;
float: right; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:22:12.640

我在这个线程中通过 geocodezip 找到了解决方案：[缩放控制和街景没有显示在我的谷歌地图上？](https://stackoverflow.com/questions/8511436/zoom-control-and-streetview-not-showing-on-my-google-map)

添加

```
#Map img {
max-width: none;
} 
```

到 css 成功了。

# envi - IDL 将值设置为单元格

> ID：15811912
> 
> 赞同：1
> 
> 时间：2013-04-04T12:58:51.830
> 
> 标签：envi

我正在编写测试应用程序，它应该读取文件名并将其打印在电子表格的单元格中。我不明白如何将文件名值放入单元格。这是我的代码：

```
PRO test
;D:\Proj\2\test1\data\HTML5_Logo_256.png
title='my example'
base = WIDGET_BASE(xsize=500, ysize=400, MBAR=mbar, TITLE=title, COLUMN=3, TLB_FRAME_ATTR=1)
fmenu = WIDGET_BUTTON(mbar, VALUE='File')  
open_file = WIDGET_BUTTON(fmenu, value='Open file', uvalue='Open')
table = WIDGET_TABLE(base, XSIZE=4, YSIZE=4, COLUMN_LABELS=["name", "FID", "size", "foo"], X_SCROLL_SIZE=0)

WIDGET_CONTROL, base, /REALIZE
info={base:base}
infoptr=PTR_NEW(info)
WIDGET_CONTROL, base, SET_UVALUE=infoptr
XMANAGER,'test', base,/NO_BLOCK
END

PRO test_EVENT, event

WIDGET_CONTROL,event.top, GET_UVALUE=infoptr
info=*infoptr
WIDGET_CONTROL,event.id, GET_UVALUE=widget

IF (widget EQ 'Open') THEN BEGIN 
  filename=DIALOG_PICKFILE(PATH='D:\Proj\2')
  envi_open_file, filename, r_fid=fid

  if (fid eq -1) then return

ENVI_FILE_QUERY, fid, filename=filename, ns=ns

print,'filename=',filename
WIDGET_CONTROL, table, SET_VALUE = filename ; here is my attempt

ENDIF

END 
```

# php - 在 php 电子邮件的主题行中传递参数

> ID：15811916
> 
> 赞同：-5
> 
> 时间：2013-04-04T12:59:00.073
> 
> 标签：php, email, html-email

我正在尝试将用户输入的输入参数作为主题行传递。当我尝试这个时：

```
$mail->Subject ='.$vehicle_type'; 
```

它打印`.$vehicle_type`为电子邮件的主题，而不是它保存的参数。

我是这里的新手。尝试搜索这个，但似乎所有示例都只是传递一个文本字符串而不是传递输入参数。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:03:10.057

发生这种情况的原因是因为您将字符串传递给变量。

```
$item->something = '$var'; 
```

将传递字符串“$var”。

双引号（可能）起作用的原因是 PHP 解释器将尝试解析它在字符串中找到的变量。

如果您不想添加任何其他内容

```
$mail->Subject = $vehicle_type; 
```

将工作。

如果要向变量添加额外的字符串部分，可以使用

```
$mail->Subject = "Vehicle type: " . $vehicle_type; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:59:58.377

简单地 ：

```
$mail->Subject = $vehicle_type; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:00:28.977

替换为：

```
 $mail->Subject =$vehicle_type; or $mail->Subject ="'".$vehicle_type."'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:00:32.200

`$mail->Subject = $vehicle_type;`

# python - 将多个输入迭代连接成一个字符串

> ID：15811920
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:59:09.333
> 
> 标签：python, string, concatenation

抱歉，如果有人问过这个问题，但我发现的类似问题并没有完全回答我的问题。

我知道如何获取单个输入并将其转换为字符串，或任何硬编码。然而，我想要做的是接受多个输入并将它们转换为单个字符串。

例子：

```
Enter a letter: h
Enter a letter: e
Enter a letter: l
Enter a letter: l
Enter a letter: o 
```

...等等，无论用户输入“s”需要多长时间。

```
Enter a letter: s 
```

然后程序将所有先前的迭代打印为单个字符串。

```
Result: hello 
```

如何将来自单独的、可能无限的输入的字符串拼凑在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-11T02:51:27.490

我意识到这篇文章很旧，但是，这就是我在 Python 3 中编写解决方案的方式

```
mylist = []
results = ""
while True:
    c = input("Enter a letter:")
    if c == "s":
        result = "\n".join(mylist)
        print('Items entered: \n'+ result)
        break
    mylist.append(c) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:11:48.770

```
my_list = []

while len(my_list) == 0 or my_list[-1] != 's':
    my_list.append(raw_input("Enter a letter: "))

print ''.join(my_list[:-1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:01:38.860

> 如何将来自单独的、可能无限的输入的字符串拼凑在一起？

您可以使用

```
''.join(inputs) 
```

`inputs`任何[可迭代](http://docs.python.org/2/glossary.html#term-iterable)的字符串在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:01:51.263

假设您的输入会产生一个字符（或字符串）列表（或任何其他可迭代），例如您将从中获得的：

```
mylist = []
while True:
   c = raw_input("Enter a letter:")
   if c == "s":
       break
   mylist.append(c) 
```

那么你可以简单地使用`join()`它们：

```
result = "".join(mylist) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T13:06:04.527

```
''.join(iter(lambda: raw_input('Enter a letter: '), 's')) 
```

# android - 解析整数时出错

> ID：15811926
> 
> 赞同：0
> 
> 时间：2013-04-04T12:59:32.367
> 
> 标签：android, parsing

这是我的**代码：**

```
 TextView headerVal = (TextView) nextChild.findViewById(R.id.textView3); 
  String tt = ((String)headerVal.getText()).replaceAll(",",""); //it was 1,000 and it became 1000           
    int longueur = tt.length();
    String aux2 = (String) tt.substring(0,longueur - 2);
    int contenu = (int) Integer.parseInt(aux2);// here is the error "unable to  parse 1000 as an integer". 
```

**PS：**它可以在模拟器上运行，但我在手机上遇到了这个错误

**日志猫**：

```
04-04 13:04:15.210: E/AndroidRuntime(31718): FATAL EXCEPTION: main

04-04 13:04:15.210: E/AndroidRuntime(31718): java.lang.NumberFormatException: unable to parse '1 000' as integer

04-04 13:04:15.210: E/AndroidRuntime(31718):at java.lang.Integer.parse(Integer.java:433)

04-04 13:04:15.210: E/AndroidRuntime(31718):at java.lang.Integer.parseInt(Integer.java:422)

04-04 13:04:15.210: E/AndroidRuntime(31718):at java.lang.Integer.parseInt(Integer.java:382)
04-04 13:04:15.210:E/AndroidRuntime(31718):at com.example.appui.BarGraphActivity.setColumnParts(BarGraphActivity.java:408)
04-04 13:04:15.210: E/AndroidRuntime(31718):at com.example.appui.BarGraphActivity.access$2(BarGraphActivity.java:282)
04-04 13:04:15.210: E/AndroidRuntime(31718):at com.example.appui.BarGraphActivity$Desired_pension.onStopTrackingTouch(BarGraphActivity.java:162) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:15:12.030

```
Try this

public static void main(String[] args) {

        String test = ",100,0,0,";
        int newTest;
        test = test.replaceAll(",","");

        int longueur = test.length();
              // If the longueur length is greater than or equal to test.length() then it will return error, so put a check to see the longueur is not exceeding the test length.
        String aux2 = (String) test.substring(0,longueur - 2);

        newTest = Integer.parseInt(aux2);

        System.out.println(newTest);

    } 
```

**结果 100，如果 longueur - 1 返回 1000**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:18:13.553

您只需在替换后使用**修剪功能：-**

```
String str2 = str.trim(); 
```

上面的代码删除字符串中的所有空格，然后将字符串转换为整数：-

```
TextView headerVal = (TextView) nextChild.findViewById(R.id.textView3); 
String tt = ((String)headerVal.getText()).replaceAll(",",""); //it was 1,000 and it became 1000           

 String str2 = tt .trim();
int longueur = str2 .length(); 
```

然后做你想做的事情......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:10:03.603

使用[DecimalFormat](http://developer.android.com/reference/java/text/DecimalFormat.html)如下：

```
 DecimalFormat format =(DecimalFormat) DecimalFormat.getInstance();
 format.applyPattern("#,###");
 try {
     integer = (Integer)format.parse(tt);
 } catch (ParseException e) {
     System.err.println(new Date()+": "+e.getMessage());
 } 
```

# wordpress - 插件更新后，Flexslider 无法在 wordpress 站点中工作

> ID：15811927
> 
> 赞同：1
> 
> 时间：2013-04-04T12:59:40.203
> 
> 标签：wordpress, flexslider

有问题的[网站](http://formacaoformadores.info/)使用以下主题：[改编](http://www.wpexplorer.com/adapt-free-responsive-wordpress-theme/)Wordpress 主题，该主题的滑块效果非常好。直到昨天，它停止工作。我停用了所有插件以尝试查找是否有帮助，但没有。你能帮我找出问题所在吗？

通过源代码，我可以看到应该出现在滑块上的图像正在被获取，但滑块无法加载

# ios - Desire2Learn：如何从新闻附件中下载文件？

> ID：15811929
> 
> 赞同：2
> 
> 时间：2013-04-04T12:59:45.760
> 
> 标签：ios, desire2learn

我正在将desire2Learn 集成到IOS 中。请在下面找到新闻对象：

```
{
        Attachments =         (

                        {
                FileId = 401485;
                FileName = "iOS Simulator Screen shot 04-Apr-2013 4.09.48 PM.png";
                Size = 171857;
            }
        );
        Body =         {
            Html = "<p>Audio and file</p>
\n<p></p>";
            Text = "Audio and file
\n";
        };
        EndDate = "<null>";
        Id = 43905;
        IsGlobal = 0;
        IsHidden = 0;
        IsPublished = 1;
        ShowOnlyInCourseOfferings = 0;
        StartDate = "2013-04-04T10:38:00.000Z";
        Title = "Audio and File attachment";
    } 
```

我想下载文件。有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:39:48.843

要检索新闻项目的附件，请使用[按文件 ID 获取附件的路由](http://docs.valence.desire2learn.com/res/news.html#get--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-news-%28D2LID-newsItemId%29-attachments-%28D2LID-fileId%29)。此路由应返回一个文件流，其中包含由您提供的 ID 标识的文件的文件附件数据。在您的情况下，文件 ID 似乎是`401485`.

# java - 我们如何在 JPQL 中包含/替换“ON”关键字

> ID：15811934
> 
> 赞同：0
> 
> 时间：2013-04-04T13:00:03.390
> 
> 标签：java, mysql, jpa, jpql

我有两个表要离开连接，我的查询如下

> SELECT * FROM BP_USER a LEFT JOIN BP_USER_BUSINESS b ON a.bpin = b.bpin;

当我试图在 jpql 中包含 ON 时，它会引发一个异常，请分享实现它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:18:53.887

显然那是 SQL 而不是 JPQL，JPQL 中没有星号。类似地，连接上的“ON”子句仅存在于 JPA2.1 中，而不存在于早期版本中。一些实现（比如[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_2/)）已经提供了这个，但你的可能没有。如果您仅限于一个不允许它的实现，那么您必须将*ON 子句*放入 JPQL 的 WHERE 子句中

# algorithm - 动态规划：最优二叉搜索树和霍夫曼

> ID：15811937
> 
> 赞同：0
> 
> 时间：2013-04-04T13:00:12.723
> 
> 标签：algorithm, binary-search-tree, dynamic-programming, huffman-code

是否可以通过贪心算法而不是动态规划（DP）（例如霍夫曼算法）来构建最佳二叉搜索树（OBST）？如果是这样，为什么在构建 OBST 时首选 DP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:13:28.217

没有有效的贪心算法来总是构造一个**最优**的二叉搜索树。然而，可能存在启发式算法，例如构造接近最优树的贪心算法，这在实践中可能更可取。

# android - 将选项卡放在操作栏下方

> ID：15811940
> 
> 赞同：0
> 
> 时间：2013-04-04T13:00:16.430
> 
> 标签：android, tabs, android-actionbar

如何将选项卡放在操作栏下方？谢谢。对不起，我忘记粘贴我的代码。我对这条线做了一些变化：`actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);` 但它还不起作用。

[http://www.imgbox.de/show/img/9nasrIPHg1.png](http://www.imgbox.de/show/img/9nasrIPHg1.png)

```
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.os.Bundle;

public class ActionBarFragmentsActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ActionBar actionbar = getActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab TabA = actionbar.newTab().setText("Fragment A");
        ActionBar.Tab TabB = actionbar.newTab().setText("Fragment B");
        ActionBar.Tab TabC = actionbar.newTab().setText("Fragment C");

        Fragment fragmentA = new fragmentA();
        Fragment fragmentB = new fragmentB();
        Fragment fragmentC = new fragmentC();

        TabA.setTabListener(new MyTabsListener(fragmentA));
        TabB.setTabListener(new MyTabsListener(fragmentB));
        TabC.setTabListener(new MyTabsListener(fragmentC));

        actionbar.addTab(TabA);
        actionbar.addTab(TabB);
        actionbar.addTab(TabC);
    }
}

class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // wenn das Tab erneut gewählt wird.
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T03:17:28.703

Set setDisplayShowHomeEnabled(true). This will do.

# prolog - Prolog内存问题

> ID：15811951
> 
> 赞同：3
> 
> 时间：2013-04-04T13:00:41.873
> 
> 标签：prolog, profiling, swi-prolog, yap

我想找到一种方法来分析我在 prolog 中编写的谓词（一个巨大的）的内存使用情况。我目前正在使用[swi](http://www.swi-prolog.org/)和[yap](http://www.dcc.fc.up.pt/~vsc/Yap/documentation.html)运行它，我可以从这些进程的内存消耗中看到分配了大量内存。

问题是当谓词终止时它不会被释放/释放/垃圾收集（我必须停止解释器才能看到它）加上内存量只会在谓词运行时不断*增长*（无论它是否应该因为尾巴我猜，递归优化应该在每次迭代时缓解这个问题）。

有没有办法发现增加使用的内存的子谓词/调用并检查是否有效地调用了尾递归优化？

任何其他关于如何优化问题的建议将不胜感激。如果有必要，我将提供有关谓词正在做什么的更多详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:12:36.743

在 SWI-Prolog 中，查看递归谓词是否实际上正在进行尾部优化的一种简单方法是使用`prolog_current_frame`（[看这里](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27B.1%27,swi%28%27/doc/Manual/manipstack.html%27%29%29)）：

```
foo :-
    prolog_current_frame(F), format('~d~n',[F]),
    do_something,
    foo. 
```

如果执行了尾部优化，每次您通过递归调用输入谓词时，它将返回相同的整数。我遇到的问题是我没有意识到我正在使用的谓词正在创建选择点并阻止尾部优化。

如果没有尾部优化是实际问题，那么您可以做的其他事情就是在递归调用之前简单地进行切割：

```
foo :-
    do_something,
    !, foo. 
```

这将删除由创建的任何选择点`do_something`。如果您的内存使用量仍在增长，那么问题可能出在其他地方。您的谓词是否创建了大型数据结构？还是使用很多中间列表？

# html - “相邻”元素的 CSS 选择器

> ID：15811953
> 
> 赞同：2
> 
> 时间：2013-04-04T13:00:44.190
> 
> 标签：html, css, css-selectors

需要一些关于 CSS 选择器的帮助，因为我还不确定如何在 CSS 中表达这一点。`:invalid`当伪类出现在`input`元素上时（当然在不`:invalid`存在时隐藏），我如何让最后一个跨度“错误”显示出来？没有 Javascript，只有 CSS。

```
<div class="row-fluid">
    <div class="control-group control-field-nickname">
        <span class="span3 offset1">
            <label>{{ msgs.mid("nickname") }}</label>
        </span>
        <span class="span3 input-prepend">                              
            <i class="add-on icon-user"></i>
            <input class="form-field" type="email" id="field-nickname">
        </span>
        <span class="span1">Error!</span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T13:04:07.780

你不能。

CSS 没有表示“包含”的选择器/组合器，因此您不能说“与包含无效输入的跨度相邻的跨度”。

选择器级别 4的建议[主题](http://dev.w3.org/csswg/selectors4/#subject)功能将允许您选择除选择器中出现的最后一个元素之外的元素，但（AFAIK）不允许您先上再下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:36:52.360

## 如果你可以修改你的 HTML

使用这个 HTML 结构（`.span1`实际上移动到相邻的位置）：

```
<div class="row-fluid">
    <div class="control-group control-field-nickname">
        <span class="span3 offset1">
            <label>{{ msgs.mid("nickname") }}</label>
        </span>
        <span class="span3 input-prepend">                              
            <i class="add-on icon-user"></i>
            <input class="form-field" type="email" id="field-ni
ckname">
            <span class="span1">Error!</span>
        </span>

    </div>
</div> 
```

然后这个 CSS 应该可以工作（对于识别`:invalid`伪类的浏览器）：

```
.span1 {
    display: none;
}

input:invalid + .span1 {
    display: inline-block; /* or block */
} 
```

如果你不能重构你的 HTML，那么就没有 CSS 解决方案。

# excel - 值范围内子集的 Excel 最小值/最大值

> ID：15811954
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:00:45.593
> 
> 标签：excel, max, min

我有一个包含两列数据的 Excel 表，我需要返回 column2 中的最小值和最大值的公式，其中 column1 中的值在一个范围内（给定日期）

即 2013 年 3 月 4 日，最小值为 428.80，最大值为 431.40

```
Date&Time               Value
===================     ======
02/04/2013 10:15:05     429.10
02/04/2013 12:37:42     429.30
03/04/2013 15:45:00     430.50
03/04/2013 15:50:00     429.70
03/04/2013 15:55:00     428.80    <== Min
03/04/2013 16:00:00     429.40
03/04/2013 16:05:00     429.50
03/04/2013 16:10:00     429.60
03/04/2013 16:15:00     429.80    <== Max
03/04/2013 16:20:00     429.60
03/04/2013 16:25:00     430.40
03/04/2013 16:50:12     431.40
03/04/2013 17:10:01     429.60
04/04/2013 08:20:00     431.88
04/04/2013 08:25:00     431.70
04/04/2013 08:30:00     431.30
04/04/2013 08:35:00     430.90
04/04/2013 08:40:00     430.70
04/04/2013 08:45:00     429.90
04/04/2013 08:50:00     429.10
04/04/2013 09:00:00     429.50 
```

非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:13:45.720

假设您的日期在 A 列中并且值都是正数并且在 B 列中，如果 A 在范围内并且 0 不在范围内，则创建包含 1 的列 C。然后创建具有公式 =B2*C2 的 D 列，并找到 =max(D:D) 为所选中的最大值对于最小值，将公式 =C2/B2 放入 E 列中，并计算所选中的最小值为 =1/max(E: E)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:16:15.073

如果您的日期标准，例如 03/04/2013 在 D2 中，那么在 A2:A100 中的日期/时间值和在 B2:B100 中的数值，您可以在 E2 中使用这样的“数组公式”

`=IFERROR(SMALL(IF(INT(A$2:A$100)=D2,B$2:B$100),1),"No match")`

`CTRL`用+ `SHIFT`+确认，`ENTER`以便像 { 和 } 这样的花括号自动出现在公式周围

给出 MIN 值，将 SMALL 替换为 LARGE 以获得 MAX 值

# php - JOIN 和 ON 子句（NULL 值）

> ID：15811960
> 
> 赞同：1
> 
> 时间：2013-04-04T13:00:57.200
> 
> 标签：php, mysql, join

我有两张桌子

```
tableA (id,randomNumber) (2,1),(3,5),(3,2),(6,0),(8,0),...
tableB (id,randomNumber2) (0,2),(1,3),(2,0),(4,2)... 
```

现在我想从两个表中获取 id、randomnumber 和 randomnumber2 其中 ID IN (0,1,2,3)。

所以应该返回：

```
(2,1), (3,5), (3,2), (0,2), (1,3), (2,0) 
```

我尝试了使用 JOIN 和 LEFT JOIN 的结构。

问题是当 ON 子句（a.id=b.id 上的 JOIN tableB b）不正确时，它会为 id 返回 NULL。但我还需要知道 NULL 值。例如，对于 tableB，它会为第一个结果返回 (NULL,2)。

```
(2,1), (3,5), (3,2), (NULL,2), (NULL,3), (2,0) 
```

我怎样才能获得 NULL 值，我应该使用其他东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:51:21.613

`JOIN`当表有相关数据时使用 s。在这里，两张桌子彼此无关。更好的选择是使用`UNION`.

```
SELECT id, randomNumber
FROM tableA
WHERE ID IN (0,1,2,3)

UNION ALL

SELECT id, randomNumber2
FROM tableB
WHERE ID IN (0,1,2,3) 
```

或者，只需使用 2 个单独的查询并组合结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:03:40.203

您可以将 a`UNION`与子查询一起使用：

```
SELECT id, rn
FROM (
    SELECT Id, randomNumber rn
    FROM tableA
    UNION
    SELECT Id, randomNumber2
    FROM tableB
) t
WHERE id IN (0,1,2,3) 
```

`UNION ALL`如果您想要重复值，您可能需要使用 a 。

# c# - .Net Modal vs Modeless，关于线程的实现

> ID：15811963
> 
> 赞同：-2
> 
> 时间：2013-04-04T13:01:01.263
> 
> 标签：c#, multithreading, modal-dialog

我在哪里可以找到有关 Show() 与 ShowDialog() 的模态与非模态实现的详细信息。到目前为止，我一直认为调用无模式实现会创建一个单独的线程，但我找不到任何来源来支持或证实它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:47:39.050

`Show`并且`ShowDialog`永远不会创建新线程。您可能知道，所有 UI 元素都托管在一个且只有一个线程上。通常这个线程是调用`Application.Run`. UI 表单和控件需要一个消息循环才能正确运行。`Application.Run`是创建此消息循环的机制之一（也是最常见的）。

模态对话框的有趣之处在于它`ShowDialog`会为对话框创建自己的消息循环。这就是为什么即使从主 UI 线程以外的线程调用它通常也会工作^(1 。)

所以回答你的问题：两者都不会创建新线程，但`ShowDialog`会创建自己的消息循环。

* * *

¹*我在这里松散地使用术语“工作”。是的，它会正确显示，响应大多数用户操作等。但是，不建议您这样做，因为它可能会导致其他地方出现问题，甚至可能表现得很奇怪。请参阅上面的规则，即所有 UI 元素都应由单个线程托管。*

# jquery - 添加具有动态内容的选项卡

> ID：15811964
> 
> 赞同：0
> 
> 时间：2013-04-04T13:01:02.890
> 
> 标签：jquery, tabs, href

嗨，当我单击列表的选项时，我想添加具有动态内容的新选项卡。内容通过给定的 href url 获取。

```
<script type="text/javascript" src="http://www.jankoatwarpspeed.com/wp-content/uploads/examples/dynamic_tabs/jquery-1.4.min.js" ></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#documents a").click(function() {
            addTab($(this));
        });

        $('#tabs a.tab').live('click', function() {
            // Get the tab name
            var contentname = $(this).attr("id") + "_content";

            // hide all other tabs
            $("#content p").hide();
            $("#tabs li").removeClass("current");

            // show current tab
            $("#" + contentname).show();
            $(this).parent().addClass("current");
        });

        $('#tabs a.remove').live('click', function() {
            // Get the tab name
            var tabid = $(this).parent().find(".tab").attr("id");

            // remove tab and related content
            var contentname = tabid + "_content";
            $("#" + contentname).remove();
            $(this).parent().remove();

            // if there is no current tab and if there are still tabs left, show the first one
            if ($("#tabs li.current").length == 0 && $("#tabs li").length > 0) {

                // find the first tab    
                var firsttab = $("#tabs li:first-child");
                firsttab.addClass("current");

                // get its link name and show related content
                var firsttabid = $(firsttab).find("a.tab").attr("id");
                $("#" + firsttabid + "_content").show();
            }
        });
    });
    function addTab(link) {
        // If tab already exist in the list, return
        if ($("#" + $(link).attr("rel")).length != 0)
            return;

        // hide other tabs
        $("#tabs li").removeClass("current");
        $("#content p").hide();

        // add new tab and related content
        $("#tabs").append("<li class='current'><a class='tab' id='" +
            $(link).attr("rel") + "' href='#'>" + $(link).html() + 
            "</a><a href='#' class='remove'>x</a></li>");

        $("#content").append("<p id='" + $(link).attr("rel") + "_content'>" + 
            $(link).attr("href") + "</p>");

        // set the newly added tab as current
        $("#" + $(link).attr("rel") + "_content").show();
    }
</script> 
```

**这是我的 html 代码**

```
<div id="main">
<div id="doclist">
    <h2>Documents</h2>
    <ul id="documents">
        <li><a href="#" rel="Document1" title="This is the content of Document1">Document1</a></li>
        <li><a href="http://www.dynamicdrive.com" rel="Document2" title="This is the content of Document2">Document2</a></li>
        <li><a href="http://www.dynamicdrive.com" rel="Document3" title="This is the content of Document3">Document3</a></li>
        <li><a href="http://www.dynamicdrive.com" rel="Document4" title="This is the content of Document4">Document4</a></li>
        <li><a href="http://www.dynamicdrive.com" rel="Document5" title="This is the content of Document5">Document5</a></li>
    </ul>
</div>
<div id="wrapper">
    <ul id="tabs">
        <!-- Tabs go here -->
    </ul>
    <div id="content">
        <!-- Tab content goes here -->
    </div>
</div>
</div>
<div id="Document1" style="display:none;">anvdsanvidsnvsidvnsdovnsdoivnsdovsdovnsovsvsmvpsmvlksdvsmdkvmsdkvmsvsd</div> 
```

它正在工作，但我不想这样。我想显示我在href中提到的内容。请帮助我，我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:32:13.600

它基本上取决于您从 url 接收到的数据类型以及什么样的请求。假设您只想显示一个 HTML 页面，您可以按如下方式附加 iframe。

### HTML

```
<div class="dynamic_content">
    <ul class='url_list'>
        <li><a href='#' data="http://www.example.com">Load Example</a></li>
    </ul>
</div> 
```

### jQuery

```
$(document).ready(function(){
    $('ul.url_list > li > a').click(function(){
        var me = $(this);
        var url = me.attr('data'); 
        $('.dynamic_content > iframe').remove();
        $('.dynamic_content').append('<iframe src="' + url + '" width="100%" height="300px"></iframe>');
    });
}); 
```

另外，请注意我没有测试上面的代码。这只是我的想法，所以你可能需要测试它。

### 更新：

好的，我已经更新并测试了代码。另外，这是一个[工作示例（JSFiddle）](http://jsfiddle.net/DZhr2/1/)

### 更新：

这是一个更新的[JSFiddle](http://jsfiddle.net/c9FZX/1/)

# security - SSL 证书未使用 WWW 前缀激活，在 Plesk 中添加重定向？

> ID：15811965
> 
> 赞同：1
> 
> 时间：2013-04-04T13:01:03.123
> 
> 标签：security, ssl, plesk

几天前为我的 VPS 购买了 SSL 证书，并最终设置了它，但注意到了一些事情......

[当我在http://www.mirageot.com](http://www.mirageot.com)进入网站时，它工作正常，但显然 SSL 没有激活，因为我仍在使用 http，而不是 https。同样适用于[http://mirageot.com](http://mirageot.com)。我不介意，如果可能的话，我想将这些请求转发到[https://mirageot.com](https://mirageot.com)，但如果需要，我可以接受。

更大的问题是我设置了 SSL，如果我访问[https://www.mirageot.com/](https://www.mirageot.com/)，那么 SSL 似乎不起作用，而如果我访问[https://mirageot.com](https://mirageot.com)，它会起作用。我知道 SSL 证书仅适用于 1 个子域（或至少一些仅适用于 1 个子域），并且我假设我只是输入了没有该子域的 URL，但我肯定至少可以转发具有 www. 还是不是 https:// 到正确的域？

如果有人可以（简单地）向我解释如何解决这个问题，那就太好了。我看到了另一个问题，我可能会重复，但我不明白答案，它们不够简单，我无法理解。这个问题可以在[这里](https://stackoverflow.com/questions/9637283/ssl-certificate-for-www-and-www-free-within-plesk-and-plesk-admin-panel)找到。

仅供参考，我正在使用带有 Parallels Plesk 11.0 的 Windows 2008 服务器。SSL 证书只有两部分，证书和一些密钥，但我不怀疑这是问题所在。

谢谢

# linux - 意外标记“fi”附近的语法错误

> ID：15811967
> 
> 赞同：0
> 
> 时间：2013-04-04T13:01:04.130
> 
> 标签：linux, bash, shell, unix

我有以下代码

```
#!/bin/bash
export PATH=/usr/bin:/usr/local/bin
ssh -o PasswordAuthentication=no -q pspew@8.76.82.179 exit
test=$?
echo "return value  is $test"
if [ $test -eq 127 ] ; then
    echo "welcome"
fi 
```

每当我执行脚本时，我都会得到 $test 并得到一些错误行

意外标记“fi”附近的语法错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:12:22.910

编码

```
#!/bin/bash
export PATH=/usr/bin:/usr/local/bin
ssh -o PasswordAuthentication=no -q pspew@8.76.82.179 exit
test=$?
echo "return value  is $test"
if [ $test -eq 127 ] ; then
echo "welcome"
fi 
```

没有语法错误，您可以将“set -vx”放在脚本的第二行，看看会发生什么

# javascript - 这两个代码片段是否相同（使用 var 与使用 this）

> ID：15811968
> 
> 赞同：4
> 
> 时间：2013-04-04T13:01:05.780
> 
> 标签：javascript

我看到了一些看起来像这样的代码：

```
function foo(bar) {
   this.bar = bar;
}; 
```

你能像这样重写它吗：

```
function foo(bar) {
   var bar = bar;
}; 
```

因为那样你就不需要继续写`this`哪个更好了。这两段代码做同样的事情吗？

非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T13:04:42.927

## 使用`this`

这将创建一个*对象*的属性。它是公开的，具有读写访问权限。根据调用函数的方式（使用`new`？），`this`将指向不同的对象。 [更多关于这里的主题。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

```
function foo(bar) {
   this.bar = bar;
};

foo(10);
console.log(bar); // bar or this.bar .. prints 10

var tmp = new foo(20); 
console.log(tmp.bar); // prints 20
console.log(bar);     // still prints 10 
```

## 使用`var`

这将创建一个局部变量（注意：该变量已经通过函数参数在范围内）。这是本地的，只能从`foo`函数的范围内访问。

```
function foo(bar) {
   var bar = bar;
} 
```

## 什么时候用哪个？

除非您编写 oo js，否则您可能希望坚持使用第二个选项，甚至更好 - 跳过`bar`任何重新定义。您可以获得封装的所有常见好处。

```
function foo(bar) {
   // just use argument bar 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T13:04:10.347

它们是不相同的。在第一个示例中，您正在创建一个在对象上调用的新属性`bar`，`foo`这意味着您可以这样做以从函数外部访问分配的值（用作对象构造函数）：

```
function foo(bar) {
   this.bar = bar;
};
var f = new foo(1);
console.log(f.bar);    // => 1 
```

在第二个示例中，您正在创建一个名为的变量，该变量`bar`在函数之外是不可访问的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:05:06.713

不同之处在于您的函数范围内是否有 otehr 函数，如下所示：

```
function foo(bar) {
   var foo = bar;
    alert(bar); //works

    $.ajax({
      [....],
      success : function(response) {
           alert(bar);//not works
           alert(foo);//works
      }
      });
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:05:20.160

```
function foo(bar) {
    this.bar = bar; 
    // this == window -if foo()
    // this == a -if a = new foo();
}; 
```

* * *

```
foo('asd'); // assigns 'asd' to global variable window.bar
console.log(bar); //logs 'asd' (window.bar) 
```

* * *

```
var a = new foo('asd');
console.log(a.bar); // logs 'asd'
console.log(bar); // logs undefined 
```

* * *

```
function foo(bar) {
    var bar2 = bar; //bar2 acts only in scope of this function
}; 
```

# webkit - 如何检测浏览器是webkit支持的浏览器？

> ID：15811973
> 
> 赞同：2
> 
> 时间：2013-04-04T13:01:15.997
> 
> 标签：webkit

如何通过代码（javascript或jquery或html）检查我工作的浏览器是否支持webkit？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T13:08:28.147

```
var isWebkit = (window.webkitURL != null);

if(isWebkit){
    alert("i am a webkit based browser!");
} 
```

# sql - 事务不回滚 - 范围问题？

> ID：15811977
> 
> 赞同：1
> 
> 时间：2013-04-04T13:01:37.247
> 
> 标签：sql, vb.net, transactions, scope, rollback

我很难理解为什么我不能让这个事务回滚。我有一个处理连接/事务的 DataAccess 对象。我有一个 MailingData 业务对象和一个 MailingDataAccess 对象，它从 MailingData 对象中获取 DataAccess 对象 byRef 并执行一个存储过程。我立即回滚更新，但它不会回滚。我猜这是一个范围问题。帮助？我正在使用数据访问进行 byval，但这不起作用，所以我改为 byref。

vb.net 控制台应用程序 - 代码：

```
 Dim da As DataAccess = New DataAccess("mydb")

     Try
        ' business object
        Dim mailingData as New MailingData()

        ' start a transaction
        da.StartTransaction()

        ' do stuff, set properties...

        ' pass the data access object byref to a method that calls a stored proc
        mailingData.UpdateCategorize(da)

        ' testing, this doesn't roll back the update from the above stored proc            
        da.RollBackTransaction()

        'da.CommitTransaction()
    Catch ex As Exception
        da.RollBackTransaction()

    End Try 
```

我的数据访问对象：

```
 Private _database As Database
    Private _transaction As Data.IDbTransaction
    Private _connection As Data.IDbConnection

    Public ReadOnly Property Database() As Database
        Get
            Return _database
        End Get
    End Property

    Public ReadOnly Property Connection() As IDbConnection
        Get
            Return _connection
        End Get
    End Property

    Public ReadOnly Property Transaction() As Data.IDbTransaction
        Get
            Return _transaction
        End Get
    End Property

    Public Sub New()
        _database = GetDatabase()
    End Sub

    Public Sub New(ByVal database As String)
        _database = GetDatabase(database)
    End Sub

    Private Function GetDatabase() As Database

        Return DatabaseFactory.CreateDatabase()

    End Function

    Private Function GetDatabase(ByVal database As String) As Database
            Return DatabaseFactory.CreateDatabase(database)
    End Function

    '-- if not transaction started, start new one.
    Public Sub StartTransaction()
        If _transaction Is Nothing Then
            _connection = _database.CreateConnection()

            _connection.Open()
            _transaction = _connection.BeginTransaction
        End If
    End Sub

    Public Sub CommitTransaction()
        _transaction.Commit()
        If Not IsNothing(Connection) Then
            Connection.Close()
        End If

    End Sub

    Public Sub RollBackTransaction()

        _transaction.Rollback()

        If Not IsNothing(Connection) Then
            Connection.Close()
        End If
    End Sub

End Class 
```

mailingData.UpdateCategorize() 在 mailingData 业务对象中定义为：

```
Public Function UpdateCategorize(ByRef da As DataAccess) As Integer
    Dim mailingDA As New MailingDataAccess

    Return mailingDA.UpdateCategorize(da, Me)
End Function 
```

MailingDataAccess.UpdateCategorize 定义为：

```
Public Function UpdateCategorize(ByRef da As DataAccess, ByVal clsMailing As MailingData) As Integer
        Dim db As Database = da.Database

        Dim DbCommand As DbCommand
        Dim dbStatus As Integer = 0

        DbCommand = da.Database.GetStoredProcCommand("proc_UpdateCategorize")
        With db
            .AddInParameter(DbCommand, "@pMailingID", Data.DbType.Int32, clsMailing.MailingID)

        dbStatus = db.ExecuteNonQuery(DbCommand)

        Return dbStatus
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:27:26.067

我想通了，这一行：

```
 dbStatus = db.ExecuteNonQuery(DbCommand) 
```

应该：

```
 dbStatus = db.ExecuteNonQuery(DbCommand, da.Transaction) 
```

# google-app-engine - AppEngine 数据存储区 - 以编程方式备份

> ID：15811982
> 
> 赞同：4
> 
> 时间：2013-04-04T13:01:41.110
> 
> 标签：google-app-engine

我想定期以编程方式备份​​我的应用程序的数据存储。

[根据https://developers.google.com/appengine/articles/scheduled_backups](https://developers.google.com/appengine/articles/scheduled_backups)，似乎可以创建一个备份数据存储的 cron

但是，我需要一个更细粒度的解决方案：为动态更改命名空间创建不同的备份文件。

是否可以简单地使用 GET/POST 调用 /_ah/datastore_admin/backup.create url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:03:29.970

是的; 我这样做是为了实现一些 cron 无法完成的逻辑。

使用 taskqueue API 添加 URL 请求，如下所示：

```
from google.appengine.api import taskqueue
taskqueue.add(url='/_ah/datastore_admin/backup.create',
              method='GET',
              target='ah-builtin-python-bundle',
              params={'kind': ('MyKind1', 'MyKind2')}) 
```

如果您想使用更多会进入 cron url 的参数，例如“文件系统”，请将这些参数放在 params 字典中的“种类”旁边。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T14:35:16.763

**基于环境以编程方式备份​​数据存储**

这是杰米回答的补充。我需要根据环境（暂存/生产）将数据存储备份到 Cloud Storage。不幸的是，这不能再通过 cronjob 来实现，所以我需要以编程方式完成它并为我的脚本创建一个 cron。我可以确认下面的内容是有效的，因为我看到有人抱怨他们得到了 404。但是，它只在实时环境中工作，而不是在本地开发服务器上。

```
from datetime import datetime

from flask.views import MethodView

from google.appengine.api import taskqueue
from google.appengine.api.app_identity import app_identity

class BackupDatastoreView(MethodView):

    BUCKETS = {
        'app-id-staging': 'datastore-backup-staging',
        'app-id-production': 'datastore-backup-production'
    }

    def get(self):

        environment = app_identity.get_application_id()

        task = taskqueue.add(
            url='/_ah/datastore_admin/backup.create',
            method='GET',
            target='ah-builtin-python-bundle',
            queue_name='backup',
            params={
                'filesystem': 'gs',
                'gs_bucket_name': self.get_bucket_name(environment),
                'kind': (
                    'Kind1',
                    'Kind2',
                    'Kind3'
                )
            }
        )

        if task:
            return 'Started backing up %s' % environment

    def get_bucket_name(self, environment):

        return "{bucket}/{date}".format(
            bucket=self.BUCKETS.get(environment, 'datastore-backup'),
            date=datetime.now().strftime("%d-%m-%Y %H:%M")
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-02T00:51:50.007

您现在可以使用托管导出和导入功能，该功能可以通过 gcloud 或 Datastore Admin API 访问：

[导出和导入实体](https://cloud.google.com/datastore/docs/export-import-entities)

[安排导出](https://cloud.google.com/datastore/docs/schedule-export)

# c++ - POS 终端应用程序开发 - SDK、编程语言、模式、IDE

> ID：15811986
> 
> 赞同：3
> 
> 时间：2013-04-04T13:01:54.320
> 
> 标签：c++, c, gcc, sdk, terminal-emulator

关于 POS（销售点）终端应用程序开发，我至少想知道以下信息之一（任何经验和相关网站的链接也将不胜感激）：

1.  此类终端最常见的 SDK（可能是专有的）
2.  最常用的语言、编译器和数据库（可能是 C/C++、GCC、SQLite？）
3.  使用的最佳设计模式
4.  最常见的IDE
5.  测试框架

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T13:42:30.783

我只想分享我关于 POS 开发的经验。

> 1.此类终端最常见的SDK（可能是专有的）

首先，选择您的设备，例如您可以为 Castles/VEGA7000 编写应用程序。转到相关[站点](http://www.castech.com.tw/)并下载 SDK。Cygwin 下有一个用于 Castles/VEGA7000 的 SDK。

> 2.最常用的语言、编译器和数据库（可能是C/C++、GCC、SQLite？）

例如，Castles/VEGA7000 支持标准 C。

> 3.best design patterns to use

我不记得任何需要特定设计模式的特殊情况。像普通 PC 程序一样思考。

> 4.最常见的IDE

提到的 SDK 有一个用于 Netbeans 的插件。

> 5.测试框架

在这种情况下，我无能为力了！

如果有帮助，我可以向您展示 Castles/VEGA7000 的 Hello-World 示例：

```
#include <string.h>
#include <stdio.h>
#include <ctosapi.h>
#include <ctos_newlib_startup.h>

int main()
{
    BYTE key;

    sysheap_setup ( 256 * 1024 );

    CTOS_LCDTClearDisplay();    
    CTOS_LCDTPrint("Hello World!"); 
    CTOS_KBDGet(&key);  

    return 1;
} 
```

编译后，它会生成一个名为的二进制文件，`xyz.s19`然后您应该制作一个 CAP 文件并将其写入设备。SDK 有一个工具。

![在此处输入图像描述](https://i.stack.imgur.com/7qb0Q.png)

# wpf - WPF TreeView 风格类似于 Mac NSOutlineView

> ID：15811989
> 
> 赞同：0
> 
> 时间：2013-04-04T13:01:55.890
> 
> 标签：wpf, treeview

我想像 Mac NSOutlineView 一样设置 TreeView 的样式。

[http://s3.amazonaws.com/cocoacontrols_production/osx_screens/44/full.png?1299027729](http://s3.amazonaws.com/cocoacontrols_production/osx_screens/44/full.png?1299027729)

主要特点是：

1.  TreeView全宽突出显示所选项目
2.  背景颜色
3.  根标题项目的不同样式

我相信我可以找到 2 和 3，但找不到与 1 相关的任何东西。

好像我真的做不到，但我会和 Blend 一起玩。绘图没有代码访问权限吗？像这里是一个框替换行绘图代码？我刚才在 wxPython 中使用 AGW 的纯 python HyperTreeList 做了一个原型，看起来一样，但不幸的是拖放有严重的图形/刷新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:06:08.400

我刚刚在[Mongoose](http://mongoose.codeplex.com/)存储库中推送了一个 TreeViewItem 样式，它可以满足您的需求。

你可以在这里找到它：[StretchedTreeViewItemControlTemplate](http://mongoose.codeplex.com/SourceControl/changeset/view/838b68ea535aaa05b1fd85d2652be01a9bfc422a#Mongoose/Mongoose.Windows/Themes/Generic/TreeViewItem.xaml)

这是一个示例代码：

```
<TreeView ItemContainerStyle="{StaticResource StretchedTreeViewItemControlTemplate}">
    <TreeViewItem Header="Item 1">
        <TreeViewItem Header="Item 1.1">
            <TreeViewItem.Style>
                <Style BasedOn="{StaticResource StretchedTreeViewItemControlTemplate}" TargetType="{x:Type TreeViewItem}">
                    <Setter Property="FontSize" Value="15" />
                </Style>
            </TreeViewItem.Style>
        </TreeViewItem>
    </TreeViewItem>
    <TreeViewItem Header="Item 2" Background="AntiqueWhite" />
</TreeView> 
```

![在此处输入图像描述](https://i.stack.imgur.com/fBZlf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:08:07.213

ItemsControl.ItemContainerStyle 合适吗？[http://msdn.microsoft.com/fr-fr/library/system.windows.controls.itemscontrol.itemcontainerstyle(v=vs.85).aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.itemscontrol.itemcontainerstyle(v=vs.85).aspx)

**Blend 下的快速测试带来了以下结果：**

对于父母：

![在此处输入图像描述](https://i.stack.imgur.com/bPZBr.png)

对于孩子：

![在此处输入图像描述](https://i.stack.imgur.com/fBc9N.png)

注意它是不均匀的，看起来不太好。

有人可能会问，为什么不把它延伸到左边界呢？我想这是不可能的（从我在 Blend 上看到的），除非您当然重新创建大部分模板。此外，如果它们的选择器左侧与相同的水平值对齐，这肯定会破坏项目之间的分层外观。

现在另一件事是，即使您这样做（按照您的要求），扩展三角形也会丢失在一片蓝色中……我认为糟糕的用户体验。

最后，您的控件看起来更像是 ListBox，而不是 TreeView。

无论如何，这是程序（我编辑了 TreeView 的 ItemContainerStyleTemplate）

![在此处输入图像描述](https://i.stack.imgur.com/n8eeR.png)

（抱歉没看清楚你最后的评论，最后我的结果和你的很像）

在 Blend 哪里做：

![在此处输入图像描述](https://i.stack.imgur.com/1xZwI.png)

# apple-push-notifications - 您不能只向 Apple 的报亭发送一条推送通知吗？

> ID：15811991
> 
> 赞同：0
> 
> 时间：2013-04-04T13:01:59.843
> 
> 标签：apple-push-notifications, newsstand-kit

我们正在开发一个报亭应用程序，目前正在处理推送通知，以让用户知道新问题已经到来。从[模棱两可的 Apple 文档](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)看来，我们需要为每个下载该应用程序的用户发送单独的推送通知；每个通知应包含每个应用程序实例的唯一设备令牌。

标题为“**信任组件**”的部分似乎暗示您可以使用设备令牌*或*证书来验证您的推送通知，但它也暗示您需要两者。

我们需要为每个已安装的实例发送单独的推送通知是否正确？我们真的可以不发送*一个*推送通知并让 Apple 通知应用程序的所有用户有新问题出现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:27:52.397

简短的回答是“是”，您所做的陈述是正确的。

您必须向必须存储在您的服务器（提供者）中的每个设备令牌发送推送通知。发送多个通知的首选方式是不进行多个连接，而是重用一个连接来发送多个通知。以下是[Apple Doc的段落](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW2)

> 您还应该跨多个通知保留与 APN 的连接。APN 可能会将快速且重复地建立和拆除的连接视为拒绝服务攻击。发生错误时，APNs 会关闭发生错误的连接

# xpath - Xpath 使用前同级获取不同的节点

> ID：15811992
> 
> 赞同：1
> 
> 时间：2013-04-04T13:02:00.577
> 
> 标签：xpath, distinct, siblings

我需要得到不同的值 //name() 没有 distinct-values(//*/name())

我试过这样做，但它的作用不大。

```
//*/name()[.!=//preceding-sibling::*] 
```

我该如何修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:55:42.617

使用**`XPath 1.0`**, 获取不同的值

对于名称属性，

```
/*/*[not(@name = preceding::*/@name)] 
```

对于节点名称，

```
/*/*[not(name() = preceding::*/name())] 
```

## 我的示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <friend1 name="abc"/>
    <friend2 name="def"/>
    <friend3 name="abc"/>
    <friend1 name="abcd"/>
    <friend5 name="abcd"/>
    <friend6 name="xyz"/>
    <friend8 name="789"/>
    <friend0 name="pqr"/>
    <friend9 name="lmn"/>
    <friend2 name="lmn"/>
    <friend5 name="123"/>
    <friend7 name="456"/>
    <friend12 name="789"/>
</root> 
```

# qt - Qt Popup 作为完成窗口

> ID：15811995
> 
> 赞同：2
> 
> 时间：2013-04-04T13:02:03.857
> 
> 标签：qt, popup, text-editor

我需要制作某种弹出窗口，其中包含在文本编辑器（QTextPlainEdit）中完成句子的命题。此窗口需要位于此应用程序的所有窗口之上。此外，此弹出窗口出现时不得中断在文本编辑器中的输入。我为实现这个完成器的 QWidget 尝试了不同类型的标志，但我所得到的只是这个完成器窗口被放置在操作系统的所有窗口之上（即使这个应用程序不活动），或者它会中断在文本编辑器中的输入并使主窗口出现时不活跃。

我应该为完成器小部件使用哪些标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:21:41.257

你可以尝试使用`QWidget::setWindowFlags(Qt::Window | Qt::FramelessWindowHint)`. 否则，您可以`Qt::Popup`通过覆盖自动关闭行为来使用自定义版本。

你也可以试试这个：如果你将 QTextPlainEdit 的父级设置为完成者的父级，它应该做你想做的事情，前提是父级没有布局（否则它不会“浮动”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T20:17:53.643

Qt 文档包含一个实现基于 google 的自动完成小部件的示例，此处为：http: [//qt-project.org/doc/qt-4.8/network-googlesuggest.html](http://qt-project.org/doc/qt-4.8/network-googlesuggest.html)。

据我所知，他们做了两件事可能与您的情况有关。一个是他们在弹出窗口小部件上设置的标志：

```
popup = new QTreeWidget;
popup->setWindowFlags(Qt::Popup);
popup->setFocusPolicy(Qt::NoFocus);
popup->setFocusProxy(parent); 
```

另一个是弹出小部件上的自定义事件过滤器，它将大多数按键事件转发到编辑器小部件，并在 Enter 或 Escape 时关闭自动完成器。