# StackOverflow 问答 15387000-15387999

# ruby-on-rails-3 - 使用 capistrano 和乘客部署 rails 应用程序时应该如何设置用户权限？

> ID：15387000
> 
> 赞同：1
> 
> 时间：2013-03-13T13:40:39.630
> 
> 标签：ruby-on-rails-3, centos, capistrano, passenger

我正在使用 capistrano 和乘客（apache）创建和部署一个 rails 应用程序。我想知道应该如何设置用户权限？现在我的centos服务器有一个根，这就是我正在使用的。我相信我应该创建一个单独的帐户仅用于部署？如果用户应该拥有什么样的权限？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:40:56.317

这将是非常通用的，但最佳实践是创建一个新用户，该用户拥有完成工作的最小权限集。

# javascript - 自动填充 SharePoint NewForm.aspx 中的查找列

> ID：15387003
> 
> 赞同：0
> 
> 时间：2013-03-13T13:40:44.413
> 
> 标签：javascript, sharepoint-2010, sharepoint-designer

我有 2 个名为 Projects 和 Projecttasks 的 SharePoint 任务列表。在 Projecttasks 中，我创建了一个查找字段，用于查找项目中的标题。然后，我使用 DVWP-Webpart 为项目创建了一个新的 DispForm，为 Projecttasks 添加了一个 XSLTListViewer，并使用查找字段过滤了项目。现在它可以工作，如果我打开一个 Project-Listitem，我可以在表单底部看到为该项目打开的所有任务。

我想要的是在项目列表的 DispForm 中添加一个按钮或链接，它打开一个 Projecttask-NewForm，其中查找列“项目”从我单击“新任务”链接或按钮的原始 Project-DispFrom 自动填充.

我更愿意在 JavaScript 中获得解决方案，但任何提示我如何填写该字段或连接表单的方式都会受到青睐。

提前致谢！麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T08:44:15.843

好吧，这并不像我预期的那么难。

1.  我在第二个任务列表中创建了一个自定义新表单。
2.  我创建了一个自定义“添加任务” - 链接到第二个列表中的新自定义字段，其中包含一个
    参数，该参数发送第一个列表中项目的 listid。
3.  我从新表单中的自定义链接中获取了参数
4.  我在第二个列表的查找字段中自动填充了参数，并在 javascript 中将文本字段设为只读

这只是一个通用的操作方法，因为我认为我编写的所有代码都很有可能改进。如果您在网上搜索上述特定关键字，您将很容易自动填充该字段。

# android - Android：用户界面：LinearGradient 不使用自定义颜色

> ID：15387004
> 
> 赞同：5
> 
> 时间：2013-03-13T13:40:44.533
> 
> 标签：android, user-interface, textview, linear-gradients

我正在尝试使用 Shader 和 LinearGradient 为 TextView 中的文本添加线性渐变。这仅在我使用 Color.LTGRAY、Color.MAGENTA 等标准颜色时才有效。如果我使用 custom_colors.xml 中的颜色，则不会显示渐变。有什么想法可以让我为自定义颜色工作吗？

```
Shader txtShad=new LinearGradient(0, 0, 0, 10, new int[]{R.color.el_amethyst,R.color.el_maroon}, null, TileMode.MIRROR);
textview_dummy.getPaint().setShader(txtShad); 
```

下面是 custom_colors.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <color name="el_maroon">#CD2990</color>
  <color name="el_amethyst">#9D6B84</color>
</resources> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:43:19.863

试试这个：

```
Shader txtShad = new LinearGradient(0, 0, 0, 10, new int[] { getResources().getColor(R.color.el_amethyst), getResources().getColor(R.color.el_maroon) }, null, TileMode.MIRROR); 
```

TL;DR 你需要先解析颜色资源

# c - c 链接时生成错误

> ID：15387006
> 
> 赞同：0
> 
> 时间：2013-03-13T13:40:48.583
> 
> 标签：c

使用外部驱动程序 dll 时，某些程序出现问题。

它编译得很好，但是当我尝试构建它时，我得到：

```
error LNK2001: unresolved external symbol "void __stdcall Function1(void (__fastcall*)(int))" (?Function1@@YGXP6IXH@Z@Z) 
```

函数头定义：

```
void __stdcall                            Function1(TDeviceCallback callback); 
```

现在是“不寻常的部分” 这个项目是一个 dll，它就像设备 dll 和其他一些应用程序之间的代理一样。由于该应用程序能够调用 c 函数的限制，代理 dll 必须使用一些特殊选项构建才能工作：

对象/库

```
winapims.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib 
```

项目选项：

```
winapims.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib /nologo /dll /incremental:no /pdb:"Release/test2.pdb" /machine:I386 /out:"Release/test2.fll" /implib:"Release/test2.lib" 
```

这不是我第一次做这样的代理，但这是我第一次遇到这样的问题。任何想法它可能是什么？

编辑：问题似乎是代理必须用作fastcall，但链接器在该函数中的转换存在问题:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:05:27.043

似乎问题在于 C++ 的名称修改。您需要按如下方式导出 C 函数：在头文件中

```
#define MYLIB_API __declspec(dllexport)
#ifdef __cplusplus
extern "C" MYLIB_API int fnmylib(void);
#else
MYLIB_API int fnmylib(void);
#endif 
```

在您的源文件中，您将它们定义为

```
MYLIB_API int fnmylib(void)
{ ... } 
```

# delphi - 为什么优化器不循环消除 High？

> ID：15387008
> 
> 赞同：10
> 
> 时间：2013-03-13T13:40:51.853
> 
> 标签：delphi, compiler-construction, compiler-optimization

人们说 Delphi 在整数运算上产生了相当不错的优化代码。我在 Delphi 2007 中尝试以下示例，并查看编译器生成的汇编代码。

```
program p1000;
{$APPTYPE CONSOLE}

procedure test;
var
  arr: array of integer;
  i: integer;

begin
  SetLength(arr, 100);
  for i := 0 to High(arr) do
  begin
    if (i = High(arr)) then
    begin
      arr[i] := -9;
    end;
  end;
end;

begin
  test;
  readln;
end. 
```

当构建配置设置为DEBUG时，我可以设置一个断点并使用快捷键`Ctrl`++来查看它的汇编代码，如下所示`Alt`：`D`

```
Project3.dpr.11: for i := 0 to High(arr) do
004045A1 8B45FC           mov eax,[ebp-$04]
004045A4 E8F7FAFFFF       call @DynArrayHigh
004045A9 8BF0             mov esi,eax
004045AB 85F6             test esi,esi
004045AD 7C1D             jl $004045cc
004045AF 46               inc esi
004045B0 33DB             xor ebx,ebx
Project3.dpr.13: if (i = High(arr)) then
004045B2 8B45FC           mov eax,[ebp-$04]
004045B5 E8E6FAFFFF       **call @DynArrayHigh**
004045BA 3BD8             cmp ebx,eax
004045BC 750A             jnz $004045c8
Project3.dpr.15: arr[i] := -9;
004045BE 8B45FC           mov eax,[ebp-$04]
004045C1 C70498F7FFFFFF   mov [eax+ebx*4],$fffffff7
Project3.dpr.17: end;
004045C8 43               inc ebx
Project3.dpr.11: for i := 0 to High(arr) do
004045C9 4E               dec esi
004045CA 75E6             jnz $004045b2 
```

据我了解，它`High()`在循环中一次又一次地调用函数：

```
Project3.dpr.13: if (i = High(arr)) then
    004045B2 8B45FC           mov eax,[ebp-$04]
    004045B5 E8E6FAFFFF       **call @DynArrayHigh**
    004045BA 3BD8             cmp ebx,eax 
```

当构建配置设置为 RELEASE 时，断点不可用，所以我按`F8`/`F7`进入循环。

```
00404589 6A64             push $64
0040458B 8D45FC           lea eax,[ebp-$04]
0040458E B901000000       mov ecx,$00000001
00404593 8B1554454000     mov edx,[$00404554]
00404599 E8B6FCFFFF       call @DynArraySetLength
0040459E 83C404           add esp,$04
004045A1 8B45FC           mov eax,[ebp-$04]
004045A4 E8F7FAFFFF       call @DynArrayHigh
004045A9 8BF0             mov esi,eax
004045AB 85F6             test esi,esi
004045AD 7C1D             jl $004045cc
004045AF 46               inc esi
004045B0 33DB             xor ebx,ebx
004045B2 8B45FC           mov eax,[ebp-$04]
004045B5 E8E6FAFFFF       call @DynArrayHigh
004045BA 3BD8             cmp ebx,eax
004045BC 750A             jnz $004045c8
004045BE 8B45FC           mov eax,[ebp-$04]
004045C1 C70498F7FFFFFF   mov [eax+ebx*4],$fffffff7
004045C8 43               inc ebx
004045C9 4E               dec esi
004045CA 75E6             jnz $004045b2
004045CC 33C0             xor eax,eax
004045BC 750A             jnz $004045c8 
```

同样，`call @DynArrayHigh`产生了同样的结果......
所以我的问题是，为什么编译器不能优化这个？只需将`High()`值保存在本地寄存器/变量中，因为数组大小没有改变。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T18:42:58.183

这不是答案，而是（自毁）评论:)

在我看来，编译器绝不能尝试对此进行优化。

为什么编译器应该尝试优化（非确定性）`High`函数而不是其他函数？（如`Length`）

*动态*数组长度可以通过 或其他方式在循环内更改`SetLenth`。数组可能会在运行时重新初始化，您的代码可能取决于：

```
for i := 0 to High(arr) do
begin
  if (i = High(arr)) then
    arr[i] := -9
  else
    if foo() then
      arr := nil; // or SetLength(arr, 0);

  if High(arr) = -1 then Exit; // arr is nil  
end; 
```

你认为这应该如何优化？编译器是否应该尝试对此进行优化？即使*编译*`High`器将其转换为`@DynArrayHigh`.

如果您希望优化您的代码，请自行优化。*例如*：

```
var
  arrHigh: Integer;

  arrHigh := High(arr);
  for i := 0 to arrHigh do
    if i = arrHigh then... 
```

# c - NEON 简单向量赋值内在？

> ID：15387009
> 
> 赞同：1
> 
> 时间：2013-03-13T13:40:56.023
> 
> 标签：c, arm, simd, neon, intrinsics

`r1`将,`r3`和`r4`类型加载到 NEON 寄存器中，我有`uint32x4_t`以下代码：

```
r3 = veorq_u32(r0,r3);   
r4 = r1;    
r1 = vandq_u32(r1,r3);   
r4 = veorq_u32(r4,r2);   
r1 = veorq_u32(r1,r0); 
```

我只是想知道 GCC 是否真的翻译`r4 = r1`成`vmov`指令。看着反汇编的代码，我并不感到惊讶。（此外，我无法弄清楚生成的汇编代码实际上做了什么）

浏览 ARM 的 NEON 内在函数参考，我找不到任何简单的向量->向量赋值内在函数。

实现这一目标的最简单方法是什么？我不确定内联汇编代码会是什么样子，因为我不知道哪些寄存器`r1`是`r4`由`vld1q_u32`. 我不需要实际的交换，只需要分配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:04:38.247

C 有一个抽象机器的概念。分配和其他操作是根据这个抽象机器来描述的。分配说**在抽象机器中**`r4 = r1;`为 r4 分配 r1 的值。

 **当编译器为程序生成指令时，它通常不会完全模仿抽象机中发生的所有事情。它将抽象机器中发生的操作转换为获得相同结果的处理器指令。如果编译器可以确定没有它们也可以获得相同的结果，编译器将跳过诸如移动指令之类的内容。

特别是，编译器可能不会`r1`每次都保持在同一个地方。它可能会在您第一次需要它时将其从内存加载到某个寄存器 R7 中。但是它可能会`r1 = vandq_u32(r1,r3);`通过将结果放在 R8 中同时将原始值保留`r1`在 R7 中来实现您的语句。然后，当您稍后拥有 时`r4 = veorq_u32(r4,r2);`，编译器可以使用 R7 中的值，因为它仍然包含`r4`（来自`r4 = r1;`语句）抽象机中的值。

即使你显式地编写了一个`vmov`内在函数，编译器也可能不会为它发出指令，只要它发出最终得到相同结果的指令。**

# java - Java 代码测试中的说明

> ID：15387010
> 
> 赞同：3
> 
> 时间：2013-03-13T13:41:00.220
> 
> 标签：java, spring

我已经开始阅读 Spring in Action 这本书。

我不知道我认为我怀疑的 JUnit。

有一个代码片段，作者参考并说很难测试：

```
package com.springinaction.knights;

public classDamselRescuingKnight implements Knight {

    private RescueDamselQuest quest;

    public DamselRescuingKnight() {
       quest = new RescueDamselQuest();
    }

    public voidembarkOnQuest() throwsQuestException {
       quest.embark();
    }
} 
```

作者说：

*为 DamselRescuingKnight 编写单元测试非常困难。在这样的测试中，您希望能够断言在调用骑士的登船任务() 时调用了任务的登船() 方法。但是这里没有明确的方法来实现这一点。不幸的是，DamselRescuingKnight 将保持未经测试。*

作者这是什么意思？

为什么这里的代码很难测试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T13:44:58.037

我最初的想法是很难测试，因为“RescureDamselQuest”对象是在构造函数中初始化的。这使得例如插入模拟对象变得困难。模拟对象将帮助您测试是否在“RescueDamselQuest”对象上调用了 board() 方法。

解决这个问题的更好方法是在构造函数中包含一个参数（通常我更喜欢这种方法）：

```
public DamselRescuingKnight(RescueDamselQuest quest){
   this.quest = quest;
} 
```

或者添加一个设置器：

```
public void setDamselRescuingKnight(RescueDamselQuest quest){
   this.quest = quest;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:00:06.280

我给出的一个常见示例是假设您想要打开一个文件，解析它，然后取出一个数据类。大多数人会做类似的事情：

```
Data openAndParse(String filename) {
  ...openFile
  ...parse
} 
```

通过这种方式，文件打开方法和解析高度耦合并且难以测试。如果您在打开和解析中遇到问题，是解析还是打开？

通过编写 JUnit 测试，为了简单起见，您被迫执行类似...

```
BufferedReader openFile(String filename) {
  ...open file and return reader
}

Data parse(BufferedReader input) {
  ...parse and return data
} 
```

JUnit 引导我们找到一个更有凝聚力的解决方案。我们简单地通过创建一个字符串、构造一个 StringReader 和一个 BufferedReader 来编写 JUnit 测试。你猜怎么着？非常相似，我们现在可以使用 parse 来接受来自各种来源的输入，而不仅仅是文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:45:46.487

很难测试，因为无法换出任务实现。如果没有修改字节码，就没有简单的方法可以查看是否调用了登船。

如果您可以在构造函数或设置器中设置任务实现，则可以传入一个可以监视对启动的调用的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-28T09:50:51.927

需要增加字段和类方法的可访问性以进行测试。例如，如果一个人正在测试一种包私有（默认）的方法，那么通常在不同包中的测试用例将无法测试该方法。因此，建议更改字段的可访问性以测试该方法。*通过将RescueDamselQuest*字段的可访问性从私有修改为默认，可以测试不使用 DI 的*DamselRescuingKnight类。*然后使用 mockito 编写测试用例。这是测试用例的代码

 *```
@Test
public void knightShouldEmbarkOnQuest() throws QuestException {

    DamselRescuingKnight knight = new DamselRescuingKnight();
    RescueDamselQuest quest = mock(RescueDamselQuest.class);
    knight.quest = quest;
    knight.embarkOnQuest();
    verify(quest, times(1)).embark();
} 
```

在 DamselRescuingKnight 类中更改的行以删除私有可访问性

```
RescueDamselQuest quest; 
```*

# eclipse - 混乱的 Eclipse 窗口布局

> ID：15387015
> 
> 赞同：3
> 
> 时间：2013-03-13T13:41:06.867
> 
> 标签：eclipse, ubuntu, ide

我不小心弄乱了默认的 Eclipse 布局，现在我无法恢复以前的样子。[这](http://i.imgur.com/cmgIakd.png)是一张图片。真正让我恼火的是，eclipse 现在占用了顶部不必要的空间。我想要消失但无法摆脱的是右侧的栏，其中包含“Java”。右键单击根本没有帮助。其次，我想摆脱这个“Java”-bar 留下的栏。如您所见，它根本没有任何功能（？？）。摆脱这个奇怪的栏是最重要的事情，因为这会将“Java”和快速搜索移动到上面的位置。

编辑：澄清一下，[这个](http://i.imgur.com/2BZIc60.png)栏就是我的意思，它可以解决所有问题。

实际上，最有用的是将整个 Eclipse 布局恢复为默认值。我已经尝试过 Window->Restore Perspective 但它对我没有帮助:(

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T13:54:43.920

右键单击透视图（右上角的“Java”）并选择重置。这将修复视角。

编辑：这似乎是 Eclipse Juno 中的一个[错误](http://www.eclipse.org/forums/index.php/t/412184/)。一个建议是删除`workbench.xmi`文件，但它并不适用于所有人......

所以如果它不起作用，你必须再次安装你的eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:31:13.823

您可以尝试不同的方法：

1.  您应该能够将栏拖放到它自动停靠并且不会打扰您的位置（例如在底部）

2.  右键单击空栏并选择“隐藏工具栏”

3.  如果一切都失败了：删除你的eclipse安装并加载一个新的。不要删除您的工作区并将新安装指向您当前的工作区。您将拥有现在的所有项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T03:09:16.500

我必须为我的所有视角单击重置，然后退出 Eclipse，然后重新打开它。为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T15:07:54.337

作为一种解决方法，在解决此错误之前，您可以编辑 eclipse\plugins\org.eclipse.platform_4.2.1.v201209141800\css\e4_classic_winxp.css。附加以下代码。

```
.MToolBar.Draggable {
    handle-image:  url(./winXPHandle.png);
}

.MToolControl.Draggable {
    handle-image:  url(./winXPHandle.png);
} 
```

来源：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=389594#c4](https://bugs.eclipse.org/bugs/show_bug.cgi?id=389594#c4)

# oracle - 将物化视图更改为提交时

> ID：15387016
> 
> 赞同：6
> 
> 时间：2013-03-13T13:41:07.233
> 
> 标签：oracle, materialized-views

我有一个物化视图，我想使用快速刷新将其更改为提交时（按需）。

但是我不断得到

```
ora-32337 cannot alter materialized view with pending changes refresh on commit 
```

即使是在刷新之后（并且知道没有进行任何更改）。

这可能是什么原因？MV 使用外连接，这可能是个问题吗？（MV 日志适用于所有表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T13:32:40.350

正如@eaolson 所说，您应该只删除物化视图并将其重新创建为提交时刷新。这是唯一的办法。。

# ruby-on-rails - 提取 has_many 关系中子对象的 id

> ID：15387017
> 
> 赞同：3
> 
> 时间：2013-03-13T13:41:08.457
> 
> 标签：ruby-on-rails, activerecord

我有`User`模型，哪个`has_many`帖子。我想查询用户的帖子ID列表。但是，以下返回 post 对象数组，而不仅仅是`id`

```
@user.posts 
```

获取 id 的 ActiveRecord 方法是什么？我知道我可以使用

```
@user.posts.map{|u| u.id} 
```

但我认为它效率低下（返回帖子对象数组，然后提取 ID）并且冗长。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T13:47:29.953

最好的方法是使用：

```
@user.post_ids 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T13:44:13.607

`@user.posts.pluck(:id)`

我认为这应该抓住他们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:47:58.693

Rails 提供了一个方便的方法来做到这一点：

`@user.post_ids`

应该做你想做的

# javascript - 将变量从 html 传递到 javascript

> ID：15387018
> 
> 赞同：0
> 
> 时间：2013-03-13T13:41:10.343
> 
> 标签：javascript, jquery, html, jplayer

```
<%= semantic_form_for :.........  do |f| %>
<%= f.inputs do%>
    <%= pluralize @size, 'Profitable Routes to test'%>
    <p>User id: <%= @id %><p>
    ....

<title> audio player</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <link href="/skin/pink.flag/jplayer.pink.flag.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">
    $(document).ready(function(){
        var u_id = document.getElementById('id')
        $("#jquery_jplayer_1").jPlayer({
            ......
                ......
                ......
                .......
        });
    });
        //]]>
    </script> 
```

我想将 传递`User id`给 javascript，我正在尝试这样做：`var u_id = document.getElementById('id')`但它说 u_id 为空，我可以通过谁？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:43:02.503

您应该直接在 JavaScript 代码中编写变量：

`var u_id = <%= @id %>;`

实际上，当您`document.getElementById()`在 JavaScript 中使用时，您会得到一个 DOM 元素。而不是变量`@id`。对于 JavaScript ，该变量`@id`不存在。

### 为什么？

我猜你正在使用 Rails。`@id`是一个 Rails 变量。Rails 在将最终的 html 页面发送给用户之前编译模板（在服务器上）。这意味着它用`<% %>`每个纯文本块的结果替换所有的。

JavaScript 然后在客户端浏览器上运行。它不知道Rails。

当您这样做时，`var u_id = <%= @id %>;`Rails 会将其编译`var u_id = 198297;`为发送到客户端浏览器的内容。然后 JavaScript 很高兴，变量设置正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:43:20.877

`document.getElementById('id')`是元素，而不是它的值。你应该使用类似的东西

```
id = document.getElementById('id').innerHTML; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:43:36.067

u_id 是 dom 元素。你应该选择这个元素的一个属性

```
u_id.value 
```

或者

```
u_id.innerHTML 
```

在 jquery 中：

```
u_id.val()
u_id.html() 
```

# spring - Apache Tiles 2.5 - 将菜单元素标记为活动

> ID：15387023
> 
> 赞同：6
> 
> 时间：2013-03-13T13:41:25.947
> 
> 标签：spring, spring-mvc, tiles2, apache-tiles

我正在使用 Spring MVC 3.1 和 Tiles 2。

我有这个瓷砖：

```
<ul class="nav">
  <li class="active"><a href="/person">Person</a></li>
  <li><a href="/student">Student</a></li>
  <li><a href="/superadmin">Superadmin</a></li>
</ul> 
```

还有tiles.xml：

```
<tiles-definitions>
    <definition name="base.definition" template="/WEB-INF/pages/tiles/template.jsp">
        <put-attribute name="meta" value="/WEB-INF/pages/tiles/meta.jsp" />
        <put-attribute name="head" value="/WEB-INF/pages/tiles/head.jsp" />
        <put-attribute name="navbar" value="/WEB-INF/pages/tiles/navbar.jsp" />
        <put-attribute name="sidebar" value="/WEB-INF/pages/tiles/sidebar.jsp" />
        <put-attribute name="body" value="" />
        <put-attribute name="footer" value="/WEB-INF/pages/tiles/footer.jsp" />
    </definition>

    <definition name="user.new" extends="base.definition">
      <put-attribute name="body" value="/WEB-INF/pages/user.new.jsp" />
    </definition>

    <definition name="user.show" extends="base.definition">
      <put-attribute name="page_title" value="Tiles tutorial homepage" type="string"/>
      <put-attribute name="section_title" value="User's list" type="string"/>
      <put-attribute name="body" value="/WEB-INF/pages/user.show.jsp" />
    </definition>

    <definition name="login" template="/WEB-INF/pages/login.jsp">
        <put-attribute name="meta" value="/WEB-INF/pages/tiles/meta.jsp" />
        <put-attribute name="head" value="/WEB-INF/pages/tiles/head.jsp" />
        <put-attribute name="body" value="/WEB-INF/pages/login.jsp" />
    </definition>

</tiles-definitions> 
```

现在，我想为所选菜单设置“活动”类。我可以用 Tiles 做到这一点吗？还是我必须抬头看春天？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T13:59:49.157

**方法 1 - JSP/JSTL 和 Spring/Bean**

更改您的菜单图块以使用一些菜单对象的列表构建菜单，您可以在会话/模型上设置该列表。菜单对象可以有一个布尔标志，指示要在哪一个上设置活动类。

**方法 2 - JavaScript/会话**

如果您不想这样做，您可以使用 HTML 类、JavaScript 和会话/模型属性的组合来完成任务。您要做的是重载 LI 元素上的 class 属性，例如：

```
<ul class="nav">
  <li class="person"><a href="/person">Person</a></li>
  <li class="student"><a href="/student">Student</a></li>
  <li class="superadmin"><a href="/superadmin">Superadmin</a></li>
</ul> 
```

然后你会有一个小 JS，使用 JSTL 来获取类，选择正确的 LI 元素并设置类。使用 jQuery，它可能看起来像：

```
$(document).ready(function() {
  $('.${mySelectedClass}').addClass('active');
}); 
```

这将使用 jQuery 选择正确的 LI 并向其添加“活动”类。

**方法 3 - 使用 URL 的纯 JSTL**

如果您不喜欢将菜单与属性的存在联系起来，并且您知道您的 URL 在解析时将包含一些可用于确定将哪个 LI 设置为活动的信息，您可以使用它。您可以获取当前页面的 URL，例如

```
<c:out value="${pageContext.request.requestURL}"/> 
```

以某种有意义的方式解析 ${pageContext.request.requestURL}，您可以使用它来确定哪个是活动的。

**方法 4 - 使用 URL 的纯 JavaScript**

与上面相同，但使用 JavaScript 获取当前 URL，对其进行解析，并像我们在方法 2 中那样操作 DOM。

希望其中之一对您有所帮助。

# iphone - 在我的 iOS 应用中将图像制作成高分辨率图像

> ID：15387024
> 
> 赞同：-2
> 
> 时间：2013-03-13T13:41:35.150
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone, high-resolution

我正在开发一个应用程序，它通常使用设备的相机并使用应用程序本身的一些迷你图像。在显示图像时，它会从我的应用程序中生成低质量的照片。有没有办法让图像看起来更清晰，或者我可以让它成为高分辨率图像？非常感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:46:37.383

我不确定你是如何在你的应用程序中捕捉图像的，但如果你使用的是，`AVCaptureSession`你可以像这样改变质量：

```
session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetMedium; //change this preset here for different quality 
```

# jquery-ui - jQuery sortable：在动态添加的 OL 中使用 LI 时出现对象预期错误

> ID：15387025
> 
> 赞同：0
> 
> 时间：2013-03-13T13:41:35.053
> 
> 标签：jquery-ui, list, jquery-ui-sortable

我正在为我们大学的一个系创建一个简单的基于 Web 的课程安排程序，目前正在开发 UI。我正在使用 jQuery UI 的手风琴和可排序扩展来创建它。我设置了它，以便您可以添加/删除课程和添加/删除术语，其中术语都是连接的可排序的有序列表。

我遇到的问题是当一个术语已经是 html 页面的一部分时，一切都完美无缺。但是，当您使用 jQuery 添加术语 OL 时，可以添加但不能删除课程。当您尝试删除课程时，您会收到“预期对象”错误。即使您从另一个术语中拖动现有的 li 元素，当您尝试将它们从新术语中删除时，您仍然会收到 Object Expected 错误。

我的想法是 1）我需要刷新新术语或 2）我没有正确初始化新术语。下面是我的javascript。

如果需要，我可以共享 html 代码，但它只是一个带有调用 javascript 函数的按钮的表单。

```
// Remove selected courses from term
function remCourse(term) {
var termDiv = '#term' + term + 'classes';

    $(termDiv).children().children().children(":checked").each(function() {
      $(this).parent().parent().remove();
    });
}

// Add course to term
function addCourse(term) {
var termDiv = '#term' + term + 'classes';

var course = $(termDiv).children().length + 1;

$(termDiv).append('<li class="ui-state-active"><span class="courseAction"><input name="' + term + 'c' + course + 'box" type="checkbox" /> Dept & Num: <input type="text" id="' + term + 'c' + course + 'num" name="' + term + 'c' + course + 'num" size="8" maxlength="6" /> Credits: <input type="text" id="' + term + 'c' + course + 'cred" name="' + term + 'c' + course + 'cred" size="4" maxlength="3" /> # of Meetings: <input type="text" id="' + term + 'c' + course + 'meet" name="' + term + 'c' + course + 'meet" size="8" maxlength="6" /> Title: <input type="text" id="' + term + 'c' + course + 'num" name="' + term + 'c' + course + 'num" size="20" maxlength="50" /> </span></li>'
);
}

// Remove selected terms
function remTerm() {
  $("#terms").children().children().children(":checked").each(function() {
    $(this).parent().parent().remove();
  });
}

// Add new term
function addTerm(term) {
var termDiv = '#term' + term + 'classes';

$("#terms").append('<div id="term' + term + '" class="connectedTerms"> <h4 class="ui-widget-header"><input class="tbox" name="t' + term + 'box" type="checkbox" />Term ' + term + '<input id="addCourse' + term + '" type="button" onclick="addCourse(this.id.substring(9))" value="Add Course" class="ui-button-text-only" /> <input id="remCourse' + term + '" type="button" onclick="removeCourse(this.id.substring(9))" value="Remove Selected Courses" class="ui-button-text-only" /> </h4> <ol id="term' + term + 'classes" class="connectedSortable"> <li class="ui-state-active"><span class="courseAction"> <input name="' + term + 'c1box" type="checkbox" /> Dept & Num: <input type="text" id="' + term + 'c1num" name="' + term + 'c1num" size="8" maxlength="6" /> Credits: <input type="text" id="' + term + 'c1cred" name="' + term + 'c1cred" size="4" maxlength="3" /> # of Meetings: <input type="text" id="' + term + 'c1meet" name="' + term + 'c1meet" size="8" maxlength="6" /> Title: <input type="text" id="' + term + 'c1num" name="' + term + 'c1num" size="20" maxlength="50" /> </span></li> </ol> </div>'
);

$(termDiv).sortable({
    connectWith: ".connectedSortable",
    dropOnEmpty: true,
    placeholder: "ui-state-highlight"
}).disableSelection();

    // I tried doing a refresh below, but it just gave me an error
    // so I commented it out.
//$(termDiv).sortable('refresh');

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T13:50:56.160

我发现这是我的一个简单的错字。在 addTerm() javascript 代码中，我让 Remove Selected Courses 按钮调用 removeTerm() 函数而不是 remTerm() 函数。*叹息*我会停止打错字吗？

更正后的代码是：

```
// Add new term
function addTerm(term) {
var termDiv = '#term' + term + 'classes';

$("#terms").append('<div id="term' + term + '" class="connectedTerms"> <h4 class="ui-widget-header"><input class="tbox" name="t' + term + 'box" type="checkbox" />Term ' + term + '<input id="addCourse' + term + '" type="button" onclick="addCourse(this.id.substring(9))" value="Add Course" class="ui-button-text-only" /> <input id="remCourse' + term + '" type="button" onclick="remCourse(this.id.substring(9))" value="Remove Selected Courses" class="ui-button-text-only" /> </h4> <ol id="term' + term + 'classes" class="connectedSortable"> <li class="ui-state-active"><span class="courseAction"> <input name="' + term + 'c1box" type="checkbox" /> Dept & Num: <input type="text" id="' + term + 'c1num" name="' + term + 'c1num" size="8" maxlength="6" /> Credits: <input type="text" id="' + term + 'c1cred" name="' + term + 'c1cred" size="4" maxlength="3" /> # of Meetings: <input type="text" id="' + term + 'c1meet" name="' + term + 'c1meet" size="8" maxlength="6" /> Title: <input type="text" id="' + term + 'c1num" name="' + term + 'c1num" size="20" maxlength="50" /> </span></li> </ol> </div>'
);

$(termDiv).sortable({
    connectWith: ".connectedSortable",
    dropOnEmpty: true,
    placeholder: "ui-state-highlight"
}).disableSelection();

} 
```

# c - 如何在Arduino或C中将十进制数的整数和小数部分作为两个整数？

> ID：15387028
> 
> 赞同：2
> 
> 时间：2013-03-13T13:41:46.010
> 
> 标签：c, integer, arduino

例如，在 Arduino 或 C 中，如何将 30.8365146 转换为两个整数 30 和 8365146？

当我尝试通过不允许传输分数的[XBee系列 1 发送](http://en.wikipedia.org/wiki/XBee)[GPS](http://en.wikipedia.org/wiki/Global_Positioning_System)数据时，我遇到了这个问题，所以我决定将数据分成两部分。我怎样才能做到这一点？

我尝试过这样的事情：

```
double num=30.233;
int a,b;

a = floor(num); 
b = (num-a) * pow(10,3); 
```

输出是`30`和`232`！输出不是 30 和 233。为什么以及如何修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:44:05.497

```
double value = 30.8365146;
int left_part, right_part;
char buffer[50];
sprintf(buffer, "%lf", value);
sscanf(buffer, "%d.%d", &left_part, &right_part); 
```

你会得到左/右部分分别存储在整数中。

PS 另一种解决方案是将您的数字乘以 10 的幂并以整数形式发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T13:44:10.340

您可以使用 sprintf 将整数输出到 char 数组，然后用`'.'`空格替换 并使用 sscanf 读回两个整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-22T09:30:42.357

我这样做是为了浮动，使用 double 作为临时：

```
int fract(float raw) {

    static int digits = std::numeric_limits<double>::digits10 - std::numeric_limits<float>::digits10 - 1;
    float intpart;
    double fract = static_cast<double>(modf(raw, &intpart));
    fract = fract*pow(10, digits - 1);
    return floor(fract);
} 
```

我想你可以使用四精度浮点格式来实现同样的 double: [libquadmath](https://gcc.gnu.org/onlinedocs/libquadmath/Typedef-and-constants.html#Typedef-and-constants)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:04:51.117

如评论中所述，您需要跟踪小数位。您不能直接转换为整数。一些代码会做这样的事情：

```
#include <stdio.h>
#include <math.h>

#define PLACES 3

void extract(double x)
{
        char buf[PLACES+10];
        int a, b;

        sprintf(buf, "%.*f", PLACES, x);
        sscanf(buf, "%d.%d", &a, &b);

        int n = (int) pow(10, PLACES);

        printf("Number           : %.*f\n", PLACES, x);
        printf("  Integer        : %d\n", a);
        printf("  Fractional part: %d over %d\n", b, n);
}

int main()
{
        extract(1.1128);
        extract(20.0);
        extract(300.000512);
} 
```

产生：

```
Number           : 1.113
  Integer        : 1
  Fractional part: 113 over 1000
Number           : 20.000
  Integer        : 20
  Fractional part: 0 over 1000
Number           : 300.001
  Integer        : 300
  Fractional part: 1 over 1000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T13:46:00.247

可以通过向下舍入（math.h 中的 floor(x)）来提取 30。

小数点后面的数字有点棘手，因为该数字很可能在内部存储为二进制数，这可能无法很好地转换为您要查找的数字，尤其是在涉及浮点数学的情况下。您最好的选择可能是将数字转换为字符串，然后从该字符串中提取数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T17:29:12.237

使用 floor() 获取整数值和 num % 1 （模运算）获取小数部分怎么样？

然后你可以将小数部分乘以 10 的倍数并四舍五入。这也可以让您控制您发送的小数位数，如果这在您的通讯中是有限的。标准。

那行得通吗？

```
#include <math.h>

integer_part = floor(num); 
decimal_part = fmod(num,1)*10^whatever; 
```

# asp.net - 在 asp.net 3.5 中使用查询字符串和没有页面名称的 URL 重写

> ID：15387029
> 
> 赞同：0
> 
> 时间：2013-03-13T13:41:54.200
> 
> 标签：asp.net, url-rewriting

我已经使用 global.asax 实现了 asp.net 3.5 的 URL 重写代码。

这是示例。**www.ABC.com/Content/1/Flowers**或**www.ABC.com/Content/1/Balloons**。

其中“内容”是我的页面名称，“鲜花”和“气球”是我的类别。在我的情况下它工作正常。

现在我想从我的 URL 中删除“内容”。所以我的网址应该是**www.ABC.com/1/Flowers**。

在没有页面名称的 asp.net 3.5 中是否可以？我没有在其中使用“MVC”架构。

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.Add("Home", new Route("Home", new WebFormRouteHandler("~/Client/Index.aspx")));
        routes.Add("Content", new Route("{SitepageID}/{name}", new WebFormRouteHandler("~/Client/Content.aspx")));
        routes.Add("FAQ", new Route("FAQ/", new WebFormRouteHandler("~/Client/Faq.aspx")));  
    } 
```

现在我想删除我的页面名称。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:50:25.043

您可以使用基于 http 模块的 url 重写

你可以使用这个方法`HttpContext.RewritePath`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.httpcontext.rewritepath.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.httpcontext.rewritepath.aspx)

注意：您创建 httpmodule（通过实现 IHttpModule）并注册您的模块

示例链接：Development/URLrewritingHttpModuleC.htm">http://www.java2s.com/Tutorial/ASP.NET/0180_Development/URLrewritingHttpModuleC.htm

# c++ - 使本地 c 库函数可全局访问

> ID：15387031
> 
> 赞同：0
> 
> 时间：2013-03-13T13:41:57.240
> 
> 标签：c++, dynamic, local, dynamic-linking, dlopen

我正在使用一个名为 GLC 的 C 库以编程方式记录我的 OpenGL 缓冲区。GLC 监听按键，这并不是一个以编程方式触发的真正好的解决方案。

因此，我想通过我的软件中的函数调用从 GLC 执行记录。我的 C++ 软件正在链接到包含所需功能的库`start_capture()`。通过 nm 我可以看到这个函数是本地的，用小写的 t 标记。

因为它必须是全局的才能在我的软件中访问它，所以我想重新编译库（我已经完成了）。但是我不知道要更改什么才能使其可访问....

这是`start_capture()`头文件[lib.h中的声明](https://github.com/nullkey/glc/blob/master/src/hook/lib.h)

```
...
__PRIVATE int start_capture(); // No idea where the __PRIVATE is coming from
... 
```

[这是main.c](https://github.com/nullkey/glc/blob/master/src/hook/main.c)`start_capture()`中函数的定义/实现：

```
int start_capture()
...
return ret;
} 
```

这是我的 dlopen 获取功能：

```
void *handle_so;
void (*start_capture_custom)();
char *error_so;
handle_so = dlopen("/home/jrick/fuerte_workspace/sandbox/Bag2Film/helper/libglc-hook.so", RTLD_LAZY);
if (!handle_so)
{
  fprintf(stderr, "%s\n", dlerror());
  exit(1);
}
dlerror(); /* Clear any existing error */
start_capture_custom = (void (*)())dlsym(handle_so, "start_capture");
if ((error_so = dlerror()) != NULL)
{
  fprintf(stderr, "%s\n", error_so);
  exit(1);
}
start_capture_custom();
dlclose(handle_so);
start_capture(); 
```

那么我应该改变什么来通过库文件访问它呢？

我希望这足以说明问题。如果没有，我会尽快回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:21:21.367

`__PRIVATE`是一个`#define`用于 GCC 扩展的隐藏符号。有关定义，请参阅[https://github.com/nullkey/glc/blob/master/src/glc/common/glc.h#L60和有关](https://github.com/nullkey/glc/blob/master/src/glc/common/glc.h#L60)[http://gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility)的更多信息GCC 扩展。

[https://stackoverflow.com/a/12011284/2146478](https://stackoverflow.com/a/12011284/2146478)提供了一种无需重新编译即可取消隐藏符号的解决方案。你会想做这样的事情：

```
$ objcopy --globalize-symbol=start_capture /path/to/your/lib.a /path/to/new/lib.a 
```

# python - 第二次python执行失败

> ID：15387035
> 
> 赞同：4
> 
> 时间：2013-03-13T13:42:00.487
> 
> 标签：python, python-3.x, python-embedding

我在为需要在 python 中运行自定义脚本的应用程序嵌入 python 3 引擎时遇到问题。由于脚本可能完全不同，有时是用户提供的，我试图使每个执行隔离，并且不需要在不同脚本的执行之间保留任何数据。

所以，我的解决方案是将每次执行包装在`Py_Initialize`和之间`Py_Finalize`。它看起来像这样：

```
void ExecuteScript(const char* script)
{
Py_Initialize();

PyRun_SimpleString( script );

Py_Finalize();
} 
```

但是，对于特定的 python 脚本，这在第二次执行脚本时会失败：

```
done!
Traceback (most recent call last):
  File "<string>", line 8, in <module>
  File "\Python33Test\Output\Debug\Python33\Lib\copy.py", line 89, in copy
    rv = reductor(2)
TypeError: attribute of type 'NoneType' is not callable 
```

python 脚本如下所示：

```
class Data:
    value1 = 'hello'
    value2 = 0

import copy

d = Data()
dd = copy.copy( d )
print ( 'done!' ) 
```

如您所见，脚本第一次执行时“完成！” 被打印出来了。但是第二次它在复制函数内部引发了一个异常。

看起来 python 引擎在第一次初始化完成后处于某种奇怪的状态。注意，这是python 3。

另外，值得注意的是 Python 2.7 没有这个问题。

我想可能还有其他例子可以更好地揭示正在发生的事情，但我还没有时间找到。

测试项目的完整来源可以在这里找到： [https ://docs.google.com/file/d/0B86-G0mwwxZvNGpoM1Jia3E2Wmc/edit?usp=sharing](https://docs.google.com/file/d/0B86-G0mwwxZvNGpoM1Jia3E2Wmc/edit?usp=sharing)

请注意，该文件为 8MB，因为它包含 python 发行版。

任何关于如何解决这个问题的想法都值得赞赏。

编辑：我还放了一个包含标志的项目副本以在 Python 3 和 Python 2.7 之间切换（文件为 31 MB）：[https ://docs.google.com/file/d/0B86-G0mwwxZvbWRldTd5b2NNMWM/edit?usp=分享](https://docs.google.com/file/d/0B86-G0mwwxZvbWRldTd5b2NNMWM/edit?usp=sharing)

编辑：嗯，我用 Python3.2 测试过，效果很好。所以它似乎只是 Python3.3 中的错误。添加为问题：[http ://bugs.python.org/issue17408#](http://bugs.python.org/issue17408#)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:29:46.357

嗯，这很快。

他们实际上发现这个问题是 Python 3.3 代码中的一个问题。

[http://bugs.python.org/issue17408#](http://bugs.python.org/issue17408#)

# actionscript-3 - 在 box2D 中缩放多边形

> ID：15387038
> 
> 赞同：0
> 
> 时间：2013-03-13T13:42:03.947
> 
> 标签：actionscript-3, flash, box2d

有没有办法在 box2D 中缩放多边形以使其成为更大的敌人示例。或者是否有任何在线工具可以绘制多边形并返回顶点。

问候

# mvcsitemapprovider - MvcSiteMap 在鼠标悬停时显示子菜单项

> ID：15387052
> 
> 赞同：0
> 
> 时间：2013-03-13T13:42:39.383
> 
> 标签：mvcsitemapprovider

如何在 mvcsitemap 中的主菜单项鼠标悬停时显示子菜单项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:18:39.873

我通过将菜单 css 指定给 MenuHelperModel.cshtml 中的 li 项目来解决，如建议

[埃德斯宾塞的博客](http://edspencer.me.uk/2011/09/20/mvc-sitemap-provider-tutorial-2-breadcrumbs/)

# ruby-on-rails - ember文件上传到rails，用base64编码和解码

> ID：15387055
> 
> 赞同：1
> 
> 时间：2013-03-13T13:42:48.283
> 
> 标签：ruby-on-rails, ajax, file-upload, ember.js, decode

我快到了，但我在解码文件时遇到了问题。解码文件时不正确。

我用来上传文件的代码：

```
 createDataSet: function() {
    var data = new FormData();
    data.append('original_filename', this.get('fileName'));
    data.append('datafile', this.get('newData'));
    data.append('project_id', this.get('content.id'));
    data.append('name', this.get('content.name'));
    $.ajax({
      url: '/data_sets.json',
      data: data,
      cache: false,
      contentType: false,
      processData: false,
      dataType: 'json',
      type: 'POST',
      success: function(data) {
        alert('ok');
      },
      error: function(xhr, data, errorThrown) {
        alert('error');
      }
    });
  } 
```

在 Rails 方面，我试图用以下方法来解决这个问题：

```
 def create
    # take care of the attachement
    datasetfilename = Pathname.new(params[:original_filename]).basename
    newfile = File.open(datasetfilename, 'w') do |f|
      f.write(Base64.decode64(params[:datafile]))
    end

    @dataset = DataSet.new
    @active_data_set = @dataset.active_data_sets.build
    @active_data_set.project_id = params[:project_id]
    @active_data_set.save
    @dataset.name = params[:name]
    @dataset.filename = datasetfilename
    @dataset.tempfilename = @dataset.savefile newfile
    @dataset.save
  end 
```

如果我使用`File.open(datasetfilename, 'w')`我会收到这样的错误`Encoding::UndefinedConversionError - "\xAB" from ASCII-8BIT to UTF-8`。另一方面，如果我打开`'wb'`结果文件是混合的并且无法读取。

我已经为文件编码添加了元标记，`<meta charset="utf-8" />`但没有任何区别。

如果有人有任何提示，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-08T09:32:12.663

刚刚在我自己的一个控制器中工作，有两个主要问题：

1) 要解决编码问题，请使用“w:binary”作为写入标志而不是“w”（默认为 ASCII）

2) :datafile 参数包括一些标题信息“data:text/csv;base64,SUR4CUluZ...”，我目前正在拆分“”，但可能更好地解码“base64”以外的所有内容，因为我m 不确定是否允许使用额外的逗号。

我的工作代码（参数名称略有不同）：

```
if params.key?(:img_file)
  header, data = params[:img_file].split(',')
  img_type = header.match(/image\/([a-z]{1,11});/)[1]
  file_path = "imgtodo/fund_#{@fund.id}.#{img_type}"
  File.open(Rails.root.join('public',file_path).to_s, 'w:binary') do |f|
    f.write(Base64.decode64(data))
  end
end 
```

# jquery - 响应式标签 jQuery

> ID：15387067
> 
> 赞同：1
> 
> 时间：2013-03-13T13:43:06.803
> 
> 标签：jquery, joomla, tabs, conflict

我正在尝试将Pete Love 开发的[Responsive Tabs jQuery](http://www.petelove.com/2013/01/17/responsive-tabs-jquery-script/)与 Joomla 3 集成。成功安装后，我遇到了这个问题。问题是 jquery 与往常一样与另一个应用程序发生冲突。我怀疑这个代码是root引起的：

```
<script src="http://code.jquery.com/jquery-1.8.0.min.js'></script> 
```

为什么这是我的怀疑，因为当我尝试重命名此 url 名称时，冲突已解决。除此之外，我还尝试添加此语法`jQuery.noConflict();` 以防止冲突，但结果是相同的。下面是jquery代码：

```
<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>

<script src="<?php echo JURI::base();;?>modules/mod_tabresponsive/js/responsiveTabs.js"></script>
    <script>

    $(document).ready(function() {
        RESPONSIVEUI.responsiveTabs();
    })
    </script>` 
```

也许，任何人都知道这个问题并帮助找到解决方案

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:57:47.767

谢谢你的想法，现在问题已经解决了。是的，你的答案是正确的。我曾经`<?php JHtml::_('jquery.framework'); ?>`替换`http://code.jquery.com/jquery-1.8.0.min.js`并`$`用`jQuery`. 现在它可以正常工作了。

非常感谢 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:48:21.247

利用

```
<?php JHtml::_('jquery.framework'); ?> 
```

在 Joomla 3 中调用 jQuery 框架。这也将默认调用无冲突！

还要删除 JURI::base() 命令中的两个分号之一

# scripting - Google Drive：将文件移动到文件夹

> ID：15387068
> 
> 赞同：2
> 
> 时间：2013-03-13T13:43:08.427
> 
> 标签：scripting, google-apps-script, google-drive-api

我想了解当您选择谷歌驱动器脚本[http://www.google.com/script/start/](http://www.google.com/script/start/)时作为示例列出的 moveFileToFolder 脚本（单击“开始脚本”，然后在“创建脚本”中选择“驱动器”选项“ 菜单）

代码如下。我的问题是如何更改此代码，以便将文件“Austin”移动到文件夹“Texas”中？这是假设文件“奥斯汀”是一个谷歌文档，目前位于我的主谷歌驱动器文件列表中，文件夹“德克萨斯”目前也位于我的主谷歌驱动器列表中。

还有一些关于在驱动器中移动文件的其他帖子，我了解主要概念，但我似乎无法成功获取文件或文件夹 ID。任何帮助非常感谢？

```
/**
 * This script moves a specific file from one parent folder to another.
 * For more information on interacting with files, see
 * https://developers.google.com/apps-script/class_file
 */
function moveFileToFolder(fileId, targetFolderId) {
  var targetFolder = DocsList.getFolderById(targetFolderId);
  var file = DocsList.getFileById(fileId);
  file.addToFolder(targetFolder);
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-07T13:46:43.513

现在我有同样的任务并使用了这段代码：

```
 var file = DriveApp.getFileById(fileId)
  var folder = DriveApp.getFolderById(folderId); 
  folder.addFile(file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T04:34:17.590

查看[https://gist.github.com/suntong001/7955694](https://gist.github.com/suntong001/7955694)`getFolderByName`中的函数，了解如何通过名称获取文件夹 ID。对于文件，原理是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T16:14:35.033

```
function addDocToPublic() {
// Create random filename
var fn = "doc" + Math.floor(10000 * Math.random()) + ".doc";
// Create file with very MIME TYPE and return file ID
var fh = DriveApp.createFile(fn, "Das ist das " + fn + " Testfile", MimeType.MICROSOFT_WORD);
// Get first/next Iterator ID ( = folder ID) for Folder (with name PUBLIC)
var fid = DriveApp.getFoldersByName("PUBLIC").next();
// Copy File to Folder (using file and folder IDs
fh.makeCopy(fn,fid);
// Remove Source File
fh.setTrashed(true);
} 
```

……也许那样……

# jboss - 是否有 JBoss 实例使用的 Jboss 端口号列表？

> ID：15387072
> 
> 赞同：1
> 
> 时间：2013-03-13T13:43:20.940
> 
> 标签：jboss, port, jboss5.x

我必须配置一个 Jboss 5.1.0 实例以使用不同的端口号（即 8480）。为此，我对 bindings-jboss-beans.xml 进行了以下更改。

```
<parameter>
            <set>
               <inject bean="PortsDefaultBindings"/>
               <inject bean="Ports01Bindings"/>
               <inject bean="Ports02Bindings"/>
               <inject bean="Ports03Bindings"/>
               <inject bean="Ports04Bindings"/>
            </set>
         </parameter>

<bean name="Ports04Bindings" class="org.jboss.services.binding.impl.ServiceBindingSet">
      <constructor>
         <!--  The name of the set -->
         <parameter>ports-04</parameter>
         <!-- Default host name -->
         <parameter>${jboss.bind.address}</parameter>
         <!-- The port offset -->
         <parameter>400</parameter>
         <!-- Set of bindings to which the "offset by X" approach can't be applied -->
         <parameter><null/></parameter>
      </constructor>
   </bean> 
```

更改工作正常，因为我可以使用 URL 访问我的应用程序`http://localhost:8480/XYZApp.`

现在为了能够进行部署，我必须通知基础设施人员应用程序将使用的所有端口号。我知道我们将使用 8480，但我如何知道 Jboss 将基于偏移量 400 用于此实例的所有其他端口号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:19:37.173

JBoss 分别为它的每个服务侦听许多端口，但是如果您的应用程序不使用与这些端口相关的服务，则不需要打开所有这些端口。例如，如果没有外部应用程序将使用命名服务，则您不需要打开端口 1099（在您的情况下为 1499）。

无论如何，如果您需要 Jboss 侦听的所有端口的列表，您可以在文件 conf/bindingservice.beans/META-INF/bindings-jboss-beans.xml 中检查 name="StandardBindings" 的 bean。这些是标准端口，因此如果您定义了偏移量（在您的情况下为 400），则必须将其添加到相应的端口以获取 JBoss 实例使用的端口。

# asp.net - 如何连接到远程托管的 sql server

> ID：15387076
> 
> 赞同：0
> 
> 时间：2013-03-13T13:43:29.263
> 
> 标签：asp.net, sql-server, hosting

我认为我做的一切都是正确的，但我无法在线访问 sql 服务器。我把我的设置放在下面。当然密码是隐藏的。有什么帮助吗？

![在此处输入图像描述](../Images/56b68aff208ff5a3eaf17514ab87b2c8.png) ![在此处输入图像描述](../Images/3cbac679f71ad4974b84ce5a926a0800.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:45:43.933

看起来`Server name`应该是`MSSQL1228.wc1\inst2`。您目前拥有`MSSQL1228\inst2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:47:31.073

您的实例名称错误

替换`mssql1228\inst`为`mssql228.wc1\inst`

如果这不起作用，请尝试 IP 地址`50.57.219.8,4120`

如果这不起作用，您可能需要验证您的用户是否有权访问该特定数据库。

如果不知道您的具体错误信息，很难 100% 知道出了什么问题

# .htaccess - 如何使用 .htaccess 调用不同的索引文件

> ID：15387082
> 
> 赞同：2
> 
> 时间：2013-03-13T13:43:43.477
> 
> 标签：.htaccess, call

如何使用 .htaccess 调用不同的索引文件？

我需要在我的网站上放置一个链接，我需要加载主页但具有不同的索引文件（index2.html），但网址是 www.mysite.com 而不是 www.mysite.com/index2.html

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?mysite\.com\index2.html$ [NC]
RewriteRule ^$ /index2.php [L] 
```

以上规则无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:50:53.530

```
DirectoryIndex newfile.php newfile.html site-down.php 
```

应该在 .htaccess 中解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:15:44.363

我认为使用 htaccess 无法实现您要查找的内容，它完全基于浏览器。所以在您的 index2.html 文件中将其添加到正文中，这是 HTML5，所以我不确定它是否适用于 ie9。

```
<script> window.history.replaceState('Object', 'Title', '/'); </script> 
```

# ruby - 在 Padrino 子应用程序中放置初始化程序的正确路径是什么

> ID：15387084
> 
> 赞同：0
> 
> 时间：2013-03-13T13:43:48.037
> 
> 标签：ruby, facebook, omniauth, padrino, subapplication

我正在使用 OmniAuth-Facebook 并将其初始化为`mysubapp/app.rb`：

```
require 'omniauth-facebook' 

class MySubApp < Padrino::Application
  register Padrino::Rendering
  register Padrino::Mailer
  register Padrino::Helpers

  enable :sessions

  SCOPE = 'email,read_stream'
  ENV['APP_ID'] = '111111111111111'
  ENV['APP_SECRET'] = '11111111111111111111111111111111'

  use OmniAuth::Builder do
    provider :facebook, ENV['APP_ID'], ENV['APP_SECRET'], :scope => SCOPE
  end
end 
```

我只是想知道这是否是你**应该**与帕德里诺合作的方式。这是放置我的初始化程序的正确位置吗，或者您可以创建一个特定的子应用程序 config.ru？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:19:01.700

将代码放入 boot.rb 以进行多应用程序部署，或者将代码放入应用程序 app.rb 中是放置东西的正确位置。

如果你喜欢看起来更干净的东西，你可以创建一个新的 config/initializers 目录，然后将以下内容添加到 boot.rb

```
Padrino.require_dependencies "#{Padrino.root}/config/initializers/**/*.rb" 
```

这是[特殊文件夹](http://www.padrinorb.com/guides/development-commands#special-folders "特殊文件夹")的 Padrino 指南，其中包含更多关于加载或需要额外路径的信息。

# html - 滚动时中心框高度为 90%

> ID：15387085
> 
> 赞同：0
> 
> 时间：2013-03-13T13:43:50.113
> 
> 标签：html, css

我有一个中心框，它占页面的 90%，这是因为在 100% 时留下了一个空白空间来滚动。无论哪种方式，我目前的问题是我有一个包含大量内容的页面，并且它超出了中心框的底部。我会将高度设置为自动，但是在像我的主页这样的页面上，中心框在大屏幕上太小，看起来很糟糕。

继承人的CSS：

```
#centerBox {
width:70%;
min-height: 90%;
height: auto;
background:#ffffff;
text-align: center;
margin:0 auto;
-moz-box-shadow:0px 3px 3px 3px #737374;
-webkit-box-shadow:0px 3px 3px 3px #737374;
box-shadow:0px 3px 3px 3px #737374;
min-height:500px; 
```

任何帮助将不胜感激！

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:52:17.380

首先，如果在给定 100% 宽度后，水平滚动就会出现`reset the layout`

```
body
{
   margin:0;
   padding:0;
} 
```

现在，对于您的大型内容，请始终将您的高度留给自动即`height:auto`

但它会导致一个问题，当没有内容时，高度会太小。

你可以做的是你可以使用jquery来控制高度。

保留整个 CSS 并执行此操作。

```
document.ready(function(){
    if($('.content-container').height()<200)
        $('.content-container').height('500');
}); 
```

where `$('.content-container')` points to the required div i.e. content which want to scale

# javascript - 无法在另一个 js 文件中获取全局变量

> ID：15387088
> 
> 赞同：1
> 
> 时间：2013-03-13T13:44:02.283
> 
> 标签：javascript, variables, global-variables

我目前在已导入主文档的 javascript.js 中声明了这个全局变量。

```
var globalURL = "test URL"; 
```

当我在 javascript.js 文件中尝试警报时，它成功输出了 globalURL 的值。

但是，当我尝试使用当前文档发出警报但调用 globalURL 时出现错误

```
Uncaught ReferenceError: globalURL is not defined 
```

我在这里做错了吗？我按照这里的例子，但它仍然对我不起作用。[我可以从另一个文件访问变量吗？](https://stackoverflow.com/questions/3244361/can-i-access-variables-from-another-file)

更新：我已将我的 javascript.js 文件包含在我当前的文档中，所以我认为不存在错误。否则 javascript.js 中的第一个警报函数根本不会运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:57:48.620

在您的 HTML 文件中，您可能正在加载使用 globalURL 的文件，然后再加载设置 globalURL 的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:48:06.427

打开浏览器的开发人员部分和脚本选项卡。观察两个 js 文件都加载到内存中。我相信其中一个没有加载。js 中的全局变量在组合空间中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:53:12.943

另一种可能性是您可能是从某处的函数内部声明它。如果要从函数内部声明全局变量，请尝试`var`在开头省略 。这看起来像 `globalURL = "test URL";`

# entity-framework - 在实体框架数据库调用上设置断点

> ID：15387103
> 
> 赞同：0
> 
> 时间：2013-03-13T13:44:19.457
> 
> 标签：entity-framework, debugging, entity-framework-5

是否可以在实体框架进行的每个数据库调用上设置断点？这将是一种非常简单的调试意外数据库调用来源的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:13:52.650

这当然是可能的，因为有像[Entity Framework Profiler](http://www.hibernatingrhinos.com/products/EFProf)和[MiniProfiler](http://miniprofiler.com/)这样的工具可以做到这一点。但是我认为为了快速调试目的而自己实现它并不是一件容易的事。

你不想重新发明轮子，所以我建议试试这两个工具。Entity Framework Profiler 甚至可以[显示每个查询在代码中的位置，](http://www.hibernatingrhinos.com/imgs/ScreenShots-EFProf-StatementStacktraces.png)您甚至可以单击源点以跳转到 Visual Studio 中的该位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:46:52.870

您可以尝试 Intellitrace - 使用 VS 2012 进行调试时，打开 Intellitrace 窗口（调试 -> Windows -> Intellitrace 事件）。在那里，您应该看到发送到数据库的所有查询。选择查询并单击“调用堆栈”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:16:06.033

最后，我包含了 MiniProfiler (StackExchange.Profiling) 源代码项目，并在`ProfiledDbCommand`构造函数中使用条件设置了一个断点`command.CommandText != ""`。

也许还有更好的地方来设置断点，但这对我有用！:)

# c++ - 在 Visual Studio 2012 中无法编译但在 Visual Studio 2005 中运行良好的 C++ 类型转换运算符代码

> ID：15387109
> 
> 赞同：11
> 
> 时间：2013-03-13T13:44:32.700
> 
> 标签：c++, c++11, visual-studio-2012, rvalue

我正在尝试更新一个使用 Visual Studio 2005 构建的旧项目以使用 Visual Studio 2012，但我遇到了一个我无法解决的错误。

在 VS2005 下运行良好的代码：

```
#include <iostream>
#include <string>
#include <sstream>

using std::cout;
using std::wcout;
using std::endl;
using std::wstring;
using std::string;

class Value 
{
public:
    Value(const wstring& value) 
    {
        v = value;
    }

    Value(Value& other)
    {
        this->v = other.v; 
    }

    template<typename T>
    operator T() const
    {
        T reply;
        std::wistringstream is;
        is.str(v);
        is >> reply;
        return reply;
    } 

    operator wstring() const 
    {
        return v;
    }

private:
    wstring v;
};

int main()
{
    Value v(L"Hello World");

    wstring str = v;
    wcout << str << endl;

    Value int_val(L"1");
    int i = int_val;

    cout << i + 1 << endl;

    return 0;
} 
```

当我在 VS2012 下编译时，“wstring str = v;”行出现错误，错误是：

```
error C2440: 'initializing' : cannot convert from 'Value' to 'std::basic_string<_Elem,_Traits,_Alloc>'
1>          with
1>          [
1>              _Elem=wchar_t,
1>              _Traits=std::char_traits<wchar_t>,
1>              _Alloc=std::allocator<wchar_t>
1>          ]
1>          No constructor could take the source type, or constructor overload resolution was ambiguous 
```

我可以通过将运算符签名从“operator wstring() const”更改为“operator const wstring&() const”来修复它。但是为什么原始代码不起作用，即使它在VS2005中起作用。

我在“int i = int_val;”行没有收到错误。

这也可以在 cygwin（版本 4.5.3）中使用 GCC（g++）编译和运行。

**Update** To really simulate my real problem there was some information left out in the sample code above. In between the Value class and the usage is a few other classes. One that look like this:

```
class Config
{
public:
    virtual Value getValue(const string& key) const = 0;

    Value operator()(const string& key) 
    {
         return getValue(key);
    }
}; 
```

And the usage const wstring value2 = config("key");

That will give the error above when compiling but also IntelliSense will give other hints on whats wrong and it says: "More than one user-defined conversion from "Value" to "const std::wstring" applies:" and it points at both the regular constructor and the move constructor of basic_string. So it seem to have something to do with rvalues to do and I have been reading up on that, and understand the basics. But there is probably a lot I am missing.

I find that I can fix this problem by changing the usage to: const wstring&& value = config("key");

Then it seem like the VS2012 compiler understand which constructor it should use then.

Questions: * Are there a way to not use && in this example? * What is really happening here?

I put up the sample code on GitHub: [https://github.com/Discordia/ImplicitTypeConversion](https://github.com/Discordia/ImplicitTypeConversion)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:29:53.673

In simple (hopefully not simplified) terms, with C++11, you'll have to start thinking of references in terms of lvalue and rvalue. Basically, C++11 gives you the ability to handle operations on references differently depending on whether or not you are dealing with a "temporary" object. This gives you ability to do things like move data internal to your object rather than copy in different situations. The down side to this is the effect you are seeing, where old code is not specific enough about which you are dealing with. There's more to it than that, it's not really something that can be fully explained in a short SO answer, but previous [answers](https://stackoverflow.com/questions/5481539/what-does-t-mean-in-c11) gave some [good places](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1690.html) to start. I would rework your code to provide both rvalue and lvalue operators (which it sounds like you're already on your way to doing).

# c# - 防止多次处理对象

> ID：15387114
> 
> 赞同：8
> 
> 时间：2013-03-13T13:44:57.617
> 
> 标签：c#, .net, stream, dispose, msdn

考虑以下代码：

```
using (Stream stream = new FileStream("file.txt", FileMode.OpenOrCreate))
{
    using (StreamWriter writer = new StreamWriter(stream))
    {
        // Use the writer object...
    }
} 
```

当`writer`流被处理时，它会在内部处理 FileStream `stream`。

[除了MSDN 建议](http://msdn.microsoft.com/en-us/library/vstudio/ms182334%28v=vs.110%29.aspx)在 finally 子句中处理外部使用的流之外，是否还有其他设计：

```
Stream stream = null;
try
{
    stream = new FileStream("file.txt", FileMode.OpenOrCreate);
    using (StreamWriter writer = new StreamWriter(stream))
    {
        stream = null;
        // Use the writer object...
    }
}
finally
{
    if(stream != null)
        stream.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:48:17.193

这种特殊情况的解决方案是调用[StreamWriter 构造函数的重载，让您告诉它不要释放底层流](http://msdn.microsoft.com/en-us/library/gg712853.aspx)。

不幸的是，这仅适用于 .Net 4.5；否则你将不得不做你已经在做的事情。

另外，请参阅此线程：[有什么方法可以在不关闭其 BaseStream 的情况下关闭 StreamWriter？](https://stackoverflow.com/questions/2666888/is-there-any-way-to-close-a-streamwriter-without-closing-its-basestream)

顺便说一句，当我尝试时，OP 中的代码*不会*导致异常！

下面的示例假设存在一个名为“C:\TEST”的文件夹：

```
using System;
using System.IO;

namespace Demo
{
    public static class Program
    {
        public static void Main(string[] args)
        {
            // This does NOT cause any exceptions:

            using (Stream stream = new FileStream("c:\\test\\file.txt", FileMode.OpenOrCreate))
            {
                using (StreamWriter writer = new StreamWriter(stream))
                {
                    writer.Write("TEST");
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:00:40.503

在这种情况下，FxCop 与 .NET Framework 中的设计选择非常不一致。问题是由 StreamWriter 假设流的所有权引起的。这通常是一种“落入成功之坑”的设计选择，大多数程序员会认为关闭 StreamWriter 足以处理流。特别是当他们使用 Close() 而不是 Dispose() 时。

在绝大多数情况下效果很好。大多数情况下，一种*非常*有问题的特殊用法是 CryptoStream。当底层流在 CryptoStream 被刷新和处置之前关闭时，需要刷新并且无法诊断的故障的类。FxCop 警告适用的情况，尽管它太神秘而无法轻松识别特定问题；）

以及程序员编写自己的 Dispose() 方法并忘记确保它不会被多次调用的一般情况。这就是 FxCop 警告要引起注意的内容，否则它不够聪明，无法看到 Dispose 方法实际上是安全的。

在这种特定情况下，FxCop 警告毫无用处。所有 .NET Framework 提供的 Dispose() 方法实现都是安全的。FxCop 应该自动抑制 .NET 框架代码的此类警告。但不是，微软也使用它。.NET 框架源代码中有**很多**[SuppressMessage] 属性。

解决警告太难看且容易出错。毫无意义，因为实际上没有任何问题。请记住，FxCop 只是一个诊断工具，旨在生成“您是否考虑过*这个*”消息。当你无视规则时，不是警察会把你关进监狱。这就是编译器的工作。

使用 [SuppressMessage] 属性关闭警告。

# jquery - 数据表...排序不适用于数字逗号...为什么？

> ID：15387120
> 
> 赞同：1
> 
> 时间：2013-03-13T13:45:05.290
> 
> 标签：jquery, sorting, numbers, datatables, comma

我使用带有 server_processing 的 jquery 数据表。这让我想起了 datatables 数字（或单词？）中的 server_processing，使用 ',' 分隔小数。

```
$ inter = trim ($ aRow ['carat']);
$ row [] = number_format ($ inter, 2, ',', ''); 
```

当我单击升序和降序箭头时，数字方法中不会发生排序，而是方法文本中发生排序。前任。10.01> 9.99（数字）

如何让它与我的号码一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-25T20:20:41.433

我尝试了数据表页面的示例。它对我来说很好。

数据应为十进制格式

[https://datatables.net/examples/plug-ins/sorting_sType.html](https://datatables.net/examples/plug-ins/sorting_sType.html)

```
$(document).ready(function() {

    jQuery.fn.dataTableExt.oSort['numeric-comma-asc'] = function(a, b) {
        var x = (a == "-") ? 0 : a.replace(/,/, ".");
        var y = (b == "-") ? 0 : b.replace(/,/, ".");
        x = parseFloat(x);
        y = parseFloat(y);
        return ((x < y) ? -1 : ((x > y) ? 1 : 0));
    };

    jQuery.fn.dataTableExt.oSort['numeric-comma-desc'] = function(a, b) {
        var x = (a == "-") ? 0 : a.replace(/,/, ".");
        var y = (b == "-") ? 0 : b.replace(/,/, ".");
        x = parseFloat(x);
        y = parseFloat(y);
        return ((x < y) ? 1 : ((x > y) ? -1 : 0));
    };

    oTable = $('#grid').dataTable({
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "aoColumns": [
            null,
            null,
            null, {
                "sType": "numeric-comma"
            },
            null,
            null
        ]
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:02:04.850

在 JavaScript 中，只有点作为小数分隔符有效。由于 DataTables 使用 JavaScript 对列值进行排序，它会将带有逗号分隔符的数字视为字符串。但是，使用排序插件可以轻松解决这个问题。

```
jQuery.extend(jQuery.fn.dataTableExt.oSort, {
    "numeric-comma-pre": function (a) {
        // prepare number
        a = +(a.replace(",", "."));
        a = (isNaN(a)) ? Number.MAX_VALUE : a;
        return a;
    },
    "numeric-comma-asc": function (a, b) {
        return ((a < b) ? -1 : ((a > b) ? 1 : 0));
    },
    "numeric-comma-desc": function (a, b) {
        return ((a < b) ? 1 : ((a > b) ? -1 : 0));
    }
}); 
```

前面的代码块定义了一种新的数据类型，DataTables 使用它来对列进行排序。[此代码改编自DataTables 官方网站](http://www.datatables.net/plug-ins/sorting#numeric_comma)中的示例。

插件对象中的第一个函数，是将单元格值转换为数字的函数，以便可以通过以下函数对其进行排序。在这种情况下，我遵循了[这篇文章](https://stackoverflow.com/questions/2085275/what-is-the-decimal-separator-symbol-in-javascript)的建议，并使用一元运算符将值转换为数字。如果值不是数字，则返回 NaN，我将其更改为 Number.MAX_VALUE。我这样做是因为我选择在升序排序时最后移动无效数字。

之后，只剩下创建数据表，并为我们想要的列定义新的数据类型。

```
jQuery("#myTable").dataTable( {
    "aoColumnDefs": [
        { "sType": "numeric-comma", "aTargets": [2,3] }
    ]
}); 
```

假设第三和第四列有逗号分隔的数字，它们现在必须正确排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-20T13:17:57.840

尝试在您的头上插入以下代码。请记住更改数据表名称的“示例”。

```
$(document).ready(function() {
    $('#example').DataTable( {
        "language": {
            "decimal": ",",
            "thousands": "."
        }
    } );
} ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-13T20:46:16.883

最新的dataTables版本（1.10.4）处理格式化数字排序，没有任何扩展名，即降序排序时puts `$1,000.00`before ，升序排序时puts before 。`$900.00``$900.00``$1,000.00`

请参阅[http://datatables.net/reference/option/columns.type](http://datatables.net/reference/option/columns.type)`num-fmt`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-31T15:11:05.623

如果您正在执行数据表的服务器端处理实现，则不能使用任何排序插件或 sType 变量，因为它们都驻留在客户端

您需要更新数据库查询以将列正确排序为数字/字符串，然后使用 mRender 或 javascript 更新列格式，以便排序确实与列格式有关

示例：从数据库中将钱作为数字返回，然后使用 mRender 添加逗号/货币类型

# mysql - MySQL 条件查询 + 控制流函数

> ID：15387122
> 
> 赞同：0
> 
> 时间：2013-03-13T13:45:13.197
> 
> 标签：mysql

MySQL：5.5.15-55 Percona 服务器 (GPL)，版本 21.0

我试图通过将表与其他三个值（按顺序）进行比较来从表中获取一个值。如果 value = 'value1' 停止，并使用该值，如果不将其与 'value2' 进行比较，依此类推。

伪查询：

```
SELECT value FROM tbl_variable
IF (WHERE object = 'value1')
ELSE IF (WHERE object = 'value2')
ELSE (WHERE object = 'default'); 
```

我想我需要使用[控制流函数](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)（可能是案例？），但我在理解语法时遇到了问题。

**编辑**

表结构

```
| Field       | Type             | Null | Key | Default | Extra          |
+-------------+------------------+------+-----+---------+----------------+
| id          | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| var_name    | varchar(50)      | NO   |     |         |                |
| object      | varchar(102)     | YES  | MUL | NULL    |                |
| value       | text             | NO   |     | NULL    |                | 
```

最终查询基于绿魔的回答。

```
SELECT (CASE 
WHEN object = 'value1' THEN value
WHEN object = 'value2' THEN value 
WHEN object = 'default' THEN value 
END)
AS value
FROM tbl_variables
WHERE value IS NOT NULL
AND var_name = 'NAME'
LIMIT 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:49:07.480

CASE 几乎是 java 和 c++ 的“switch”函数，它是用于将同一对象与多个变量进行比较的“if”语句。.

试试这个：

```
SELECT CASE object WHEN 'value1' THEN 'value1'  
WHEN  'value2' THEN 'value2' 
ELSE 'value3' END; 
```

或者，可以将 CASE 用作“IF”函数

```
SELECT CASE WHEN object = 'value1' THEN 'value1'  
WHEN  object = 'value2' THEN 'value2' 
ELSE 'value3' END; 
```

编辑1：尝试

```
SELECT (CASE WHEN object = 'value1' THEN 'value1'  
WHEN  object = 'value2' THEN 'value2' 
ELSE 'value3' END)  AS returnVal
WHERE returnVal IS NOT NULL

LIMIT 1 
```

;

第一个条件只返回非空值，limit 1 表示在第一个有效记录处停止。

# sap - SAP HANA 分析视图

> ID：15387124
> 
> 赞同：1
> 
> 时间：2013-03-13T13:45:19.703
> 
> 标签：sap, denormalization

这几天我一直在努力学习hana，但遇到了一些问题。因此，正如我所见，SAP HANA 用于数据的非规范化（根据我看过的一些教程）。因此，我制作了分析视图，并在制作分析视图后对数据进行了非规范化。接下来是什么？。我如何利用/使用这些视图来创建业务分析报告。我需要根据这些非规范化数据生成几份报告（我打算最终将其用于基于网站的产品）。我需要为不同的报告创建不同的分析视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:20:17.880

HANA 不适用于数据的非规范化。您不必创建聚合表和非规范化表来加快分析速度。在正常的分析场景中，您可能会构建这些，但这会导致重复数据、双重维护以保持这些更新等。

取而代之的是，您可以将正常的规范化数据库表用作主/事务数据基础，然后在这些基础上构建分析视图。需要为不同的报表创建多少视图取决于您的实际业务需求，因为视图包含多方面的数据，因此可以重复使用。如果是更复杂的报告，您当然可以创建计算视图以获得所需的准确数据。

高温高压

# c# - RouteValueDictionary 值在 POST 上从字符串更改为数组

> ID：15387132
> 
> 赞同：2
> 
> 时间：2013-03-13T13:45:47.217
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我有一个`RouteValueDictionary`附加到传递给视图的对象。此对象包含一个名为 SelectedItems 的其他对象数组，用于使用用户可以选择的复选框填充网格。由于此对象随后会被传递回控制器并根据用户与 UI 的交互方式进行不同的路由，因此它还包含一个`RouteValueDictionary`称为 ReturnValues。该类的基本设置或多或少如下所示：

```
[Serializable]
public class ItemSelection
{
    public object[] SelectedItems { get; set; }
    public RouteValueDictionary ReturnValues { get; set; }

    public ItemSelection()
    {
        ReturnValues = new RouteValueDictionary()
        {
            { "key1", "routeValue1" },
            { "key2", "routeValue2" },
            { "key3", "routeValue3" }
        }
    }
} 
```

这本来可以完美地工作，除了 ReturnValues 属性在 POST 中返回“null”

在阅读了有关字典映射的[这篇文章后](https://stackoverflow.com/questions/12850169/mvc3-hiddenfor-dictionary-values)，我在视图上提出了以下解决方案：

```
<%
    foreach(var key in Model.Keys)
    {
        Html.Render(Html.HiddenFor(m => m[key]));
    }
%> 
```

这会为每个项目呈现一组隐藏的输入到 html，如下所示：

```
<input id="ReturnValues__key1_" name="ReturnValues.[key1]" type="hidden" value="routeValue1"> 
```

我也尝试过类似于[这篇文章的](https://stackoverflow.com/questions/4358075/model-binding-a-dictionary)东西：

```
<%
    for (var i = 0; i < Model.Count; i++)
    {
        Html.Hidden("ReturnValues[" + i + "].Key", Model.ElementAt(i).Key);
        Html.Hidden("ReturnValues[" + i + "].Value", Model.ElementAt(i).Value);
    }
%> 
```

这呈现了这一点：

```
<input id="ReturnValues_ReturnValues_0__Key" name="ReturnValues.ReturnValues[0].Key" type="hidden" value="key1">
<input id="ReturnValues_ReturnValues_0__Value" name="ReturnValues.ReturnValues[0].Value" type="hidden" value="routeValue1"> 
```

这两种方法都有一定的作用，除了当`RouteValueDictionary`被回发到控制器时，`Values`属性从一个集合`Strings`变为一个集合`String[1]`（即，字符串变成数组）。所以，抽出来，字典条目看起来像这样：

```
{ "key1", "routeValue1" } 
```

对此：

```
{ "key1", { "routeValue1" } } 
```

我已经玩弄了几个小时，但我似乎无法找出问题所在。由于我的控制器中的代码正在路由到`ToString()`关联值，所以我的完整路由最终看起来像`/area/controller/System.String[]/`

`RouteValueDictionary`将我的映射到隐藏字段时，我是否遗漏了什么？

**更新：**我最终为`RouteValueDictionary`对象制作了一个自定义模型绑定器。（见下面的答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T18:58:30.507

我最终为`RouteValueDictionary`对象制作了一个自定义模型绑定器。以下是相关方法：

```
public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    if (bindingContext.ValueProvider.ContainsPrefix(bindingContext.ModelName))
    {
        RouteValueDictionary baseModel = (bindingContext.Model as RouteValueDictionary) ?? (base.BindModel(controllerContext, bindingContext) as RouteValueDictionary);

        if (baseModel != null)
        {    // start off with a direct copy of the bound model            
            var returnModel = new RouteValueDictionary();
            baseModel.ForEach(x => returnModel[x.Key] = item.Value);

            // Sometimes the DefaultModelBinder turns the RouteValueDictionary.Values property into a collection of single-item arrays. This resets them to the correct values.
            foreach (var key in baseModel.Keys)
            {
                returnModel[key] = GetValue(bindingContext, key); // GetValue method body below                        
            }

            return returnModel;
        }
    }

    return null;
}

private object GetValue(ModelBindingContext context, string key)
{
    var name = String.Format("{0}[{1}]", String.IsNullOrEmpty(context.ModelName) ? String.Empty : context.ModelName, key);
    var attemptedResult = context.ValueProvider.GetValue(name);

    if (attemptedResult != null && attemptedResult.AttemptedValue != null)
    {
        return attemptedResult.AttemptedValue;        
    }

    return null;
} 
```

# python - Python：从 3D 投影计算对象的 2D 面积

> ID：15387140
> 
> 赞同：4
> 
> 时间：2013-03-13T13:46:06.687
> 
> 标签：python

**上下文**
我有一个 3D 对象，我有它的坐标。然后我将对象旋转 n 次，当对象投影到网格上时，我想计算对象的 2D 区域（以纳米为单位）。

**例如**，
我在下面有一张图片描述了我的问题。我有相同的对象，但在三个不同的方向。如果我将该对象投影到网格上，我将如何计算对象在 2D 中占据的区域？

**我的问题是**
如何将对象投影到网格上（如有必要）并在该特定方向测量对象的面积？我不一定要寻找代码，但也许人们可以指出我的图书馆。

![示例图像](../Images/e96b6f17774e4544f9dca1cfaa3df65c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:56:43.987

如果我理解正确，如果你的 3d 对象是凸的，那么你只需要投影它的顶点并取它们的凸包。凸包多边形的面积将是您的面积。

# mysql - MySQL 在子查询中使用别名

> ID：15387141
> 
> 赞同：0
> 
> 时间：2013-03-13T13:46:08.983
> 
> 标签：mysql, sql, subquery

有这个查询：

```
SELECT
  gs.PAGE,
  gs.ID,
  gs.CATALOGID
FROM pages gs
WHERE gs.ID = 404
     OR gs.ID = (SELECT
           gs2.ID
         FROM pages gs2
         WHERE gs2.CATALOGID = gs.CATALOGID
             AND gs2.PAGE = gs.PAGE + 1); 
```

应该给我：

```
PAGE | ID  | CATALOGID
2    | 404 | 7
3    | 403 | 7 
```

但它只返回 ID 为 404 的页面。问题似乎是那里的别名。

我得到了一个页面的 ID，还需要获取正确的页面，添加到 pageno +1。

有什么问题？

编辑：

样本数据：

```
PAGE ID    CATALOGID
1    291    7
2    404    7
3    403    7
4    450    7
5    455    7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:14:51.280

```
SELECT *
FROM pages gs
WHERE gs.PAGE = 
(SELECT gs2.PAGE FROM pages gs2 
 WHERE gs2.CATALOGID=gs.CATALOGID AND gs2.ID = 404 ) + 1
OR gs.ID = 404; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:10:24.997

试试这个：

```
SELECT 
  gs.PAGE, 
  gs.ID, 
  gs.CATALOGID
FROM pages gs 
WHERE gs.ID    = 404 
   OR gs.PAGE = ( SELECT PAGE + 1
                  FROM pages x 
                  where x.id = 404 
                  and gs.CATALOGID = x.CATALOGID); 
```

[SQL 演示](http://sqlfiddle.com/#!2/7f9b5/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:15:04.237

```
SELECT
  gs.PAGE,
  gs.ID,
  gs.CATALOGID
FROM pages gs
WHERE gs.PAGE >= (SELECT
         gs2.PAGE
           FROM pages gs2
           WHERE gs2.ID = 404)
LIMIT 2; 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/77bac/1)

输出

```
PAGE    ID  CATALOGID
----------------------
2       404     7
3       403     7 
```

# asp.net-mvc - EntityFramework 迁移指定 web.config

> ID：15387145
> 
> 赞同：6
> 
> 时间：2013-03-13T13:46:23.993
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-5

我正在使用 MV4 和 EF5。有没有办法让 EntityFramework Migration 从 web.debug.config 或 web.release.config 中提取连接字符串。

除非连接字符串在 web.config 中，否则运行 update-database 似乎会引发错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:00:05.207

那是因为 web.config 是应该找到连接字符串的地方。`Web.release.config`并且`Web.debug.config`是基于当前“解决方案配置”的配置转换。有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/vs2010trainingcourse_webdevelopment_topic4.aspx)。

简短的回答是，当然连接字符串应该在 Web.config 中，因为这是它的设计目标。

您可以使用 Update-Database 上的 -ConnectionStringName 或 -ConnectionString 参数为迁移指定不同的连接。

# xcode - 找不到导入 tuneup.js 文件

> ID：15387150
> 
> 赞同：1
> 
> 时间：2013-03-13T13:46:30.807
> 
> 标签：xcode, instruments, ios-ui-automation

使用 Xcode iOS Instruments UI Automation tuneup.js javascript 库[https://github.com/alexvollmer/tuneup_js](https://github.com/alexvollmer/tuneup_js)。

我在理解我推出的仪器的当前工作目录时遇到了挑战。

我无法创建 tuneup/tuneup.js 脚本的相对路径。相对路径的目的地*当然*是“tuneup/tuneup.js”。但起点是什么？

这是代码：

```
// This works:

#import "/Users/mikes/Documents/Full/Path/To/File/Tests/tuneup/tuneup.js"

// These do not work:
//#import "tuneup/tuneup.js"
//#import "Tests/tuneup/tuneup.js"

//
// See https://github.com/alexvollmer/tuneup_js
//

test("First Screen", function(target, app) {

     var window = app.mainWindow();

     window.logElementTree();

}); 
```

有关相关问题，请参阅[tuneup.js 报告 test() 方法](https://stackoverflow.com/questions/15304933/tuneup-js-reports-cant-find-variable-for-test-method)的“找不到变量”。

-谢谢

-麦克风

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T16:34:34.477

我敢打赌，这不起作用的原因是您在 Instruments 文档中创建了一个嵌入式脚本。无需在仪器侧边栏中选择“添加 > 创建脚本”，您需要选择“添加 > 导入”并从文件系统中导入您的脚本文件。这会将 Instruments 文档链接到您的脚本文件，当您使用`#import`关键字时，它将在*相对于您的脚本文件所在*的目录中查找。

嵌入式（与导入相反）脚本没有“当前目录”，这就是为什么您需要`tuneup.js`文件的绝对路径。

# c++ - 正确使用 Poco C++ JSON 解析数据

> ID：15387154
> 
> 赞同：22
> 
> 时间：2013-03-13T13:46:39.183
> 
> 标签：c++, json, poco-libraries

谁能指导我[Poco C++ JSON](http://pocoproject.org/docs-1.5.0/Poco.JSON.html)是如何工作的？

以前我使用过[JsonReader](http://developer.android.com/reference/android/util/JsonReader.html)和 JsonToken。Poco C++ 库似乎没有相应的对象。

例如，我如何使用 json 解析器创建一个对象名称，该名称由标签名称处的 JSON 值组成？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-14T21:25:49.490

编辑：从 1.5.2 开始，通过使 DefaultHandler, 嗯 ... 默认（并将其重命名为正确的名称 - [ParseHandler](https://github.com/pocoproject/poco/blob/42ff341cb90612b5c1ddf21bc2e9f1577dccace8/JSON/include/Poco/JSON/ParseHandler.h) ）简化了事情。因此，如果您只需要解析，则无需再显式提供处理程序：

```
// objects
std::string json = "{ \"test\" : { \"property\" : \"value\" } }";
Parser parser;
Var result = parser.parse(json);
Object::Ptr object = result.extract<Object::Ptr>();
Var test = object->get("test");
object = test.extract<Object::Ptr>();
test = object->get("property");
std::string value = test.convert<std::string>();

// array of objects
std::string json = "[ {\"test\" : 0}, { \"test1\" : [1, 2, 3], \"test2\" : 4 } ]";
Parser parser;
Var result = parser.parse(json);
Array::Ptr arr = result.extract<Array::Ptr>();
Object::Ptr object = arr->getObject(0);//
assert (object->getValue<int>("test") == 0);
object = arr->getObject(1);
arr = object->getArray("test1");
result = arr->get(0);
assert (result == 1); 
```

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/15851867/the-difference-between-parsing-using-a-string-or-a-stream-poco-c?answertab=votes#tab-top)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-12T23:50:18.970

```
#include <iostream>
#include <string>
#include <Poco/JSON/JSON.h>
#include <Poco/JSON/Parser.h>
#include <Poco/Dynamic/Var.h>

using namespace std;
using namespace Poco::JSON;

string GetValue(Object::Ptr aoJsonObject, const char *aszKey) {
    Poco::Dynamic::Var loVariable;
    string lsReturn;
    string lsKey(aszKey);

    // Get the member Variable
    //
    loVariable = aoJsonObject->get(lsKey);

    // Get the Value from the Variable
    //
    lsReturn = loVariable.convert<std::string>();

    return lsReturn;
}

int main(int argc, char *argv[]) {
    string lsJson;
    Parser loParser;

    lsJson = "{\"TransactionCode\":\"000000\",\"FileRecordSequenceNumber\":\"111111\",\"TcrSequenceNumber\":\"222222\",\"TransactionRouteIndicator\":\"ABCDE\",\"MerchantEstablishmentNumber\":\"00000000000\",\"MerchantName\":\"BBBBBBBBB\",\"MerchantCity\":\"CCCCCCCC\"}";

    cout << lsJson << endl;

    // Parse the JSON and get the Results
    //
    Poco::Dynamic::Var loParsedJson = loParser.parse(lsJson);
    Poco::Dynamic::Var loParsedJsonResult = loParser.result();

    // Get the JSON Object
    //
    Object::Ptr loJsonObject = loParsedJsonResult.extract<Object::Ptr>();

    // Get the values for the member variables
    //
    //
    cout << "TransactionCode             " << GetValue(loJsonObject, "TransactionCode")               << endl;
    cout << "FileRecordSequenceNumber    " << GetValue(loJsonObject, "FileRecordSequenceNumber")      << endl;
    cout << "TcrSequenceNumber           " << GetValue(loJsonObject, "TcrSequenceNumber")             << endl;
    cout << "TransactionRouteIndicator   " << GetValue(loJsonObject, "TransactionRouteIndicator")     << endl;
    cout << "MerchantEstablishmentNumber " << GetValue(loJsonObject, "MerchantEstablishmentNumber")   << endl;
    cout << "MerchantName                " << GetValue(loJsonObject, "MerchantName")                  << endl;
    cout << "MerchantCity                " << GetValue(loJsonObject, "MerchantCity")                  << endl;

    return 0;

}

Results:
{"TransactionCode":"000000","FileRecordSequenceNumber":"111111","TcrSequenceNumber":"222222","TransactionRouteIndicator":"ABCDE","MerchantEstablishmentNumber":"00000000000","MerchantName":"BBBBBBBBB","MerchantCity":"CCCCCCCC"}
TransactionCode             000000
FileRecordSequenceNumber    111111
TcrSequenceNumber           222222
TransactionRouteIndicator   ABCDE
MerchantEstablishmentNumber 00000000000
MerchantName                BBBBBBBBB
MerchantCity                CCCCCCCC 
```

# elisp - 在 elisp 中使用语法表信息进行标记化

> ID：15387155
> 
> 赞同：1
> 
> 时间：2013-03-13T13:46:45.280
> 
> 标签：elisp, tokenize

我想使用 elisp 来标记以下内容：

```
variable := "The symbol \" delimits strings"; (* Comments go here *) 
```

作为：

```
<variable> <:=> <The symbol \" delimits strings> <;> 
```

基于来自缓冲区的信息`syntax-table`。

我已经进行了`symbol-table`适当的设置，并且目前正在使用以下函数，该函数除了字符串常量之外正常运行（如果点不在标识符或正则表达式中的运算符之一处，则返回令牌或 nil）。

```
(defun forward-token ()
  (forward-comment (point-max))
  (cond
   ((looking-at  (regexp-opt '("=" ":=" "," ";")))
    (goto-char (match-end 0))
    (match-string-no-properties 0))
   (t (buffer-substring-no-properties
       (point)
       (progn (skip-syntax-forward "w_")
              (point)))))) 
```

我是一个elisp新手，所以任何指针都表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:20:05.223

我认为您`skip-syntax-forward`对字符串的使用不正确。我认为您需要添加这样的`cond`子句：

```
((looking-at "\"")
 (let* ((here (point)) (there (scan-sexps here 1)))
   (goto-char there)
   (buffer-substring-no-properties
    (1+ here) (1- there)))) 
```

处理字符串文字。

# php - 使用 PHP 和新的 Twitter API

> ID：15387161
> 
> 赞同：2
> 
> 时间：2013-03-13T13:47:12.007
> 
> 标签：php, html, twitter

由于新的 Twitter API，我使用 PHP 在我的网页上使用 PHP 显示 1 条最新推文。

目前我已经让它工作了，所以这条推文只是作为一个简单的文本字符串输出。我的问题是如何控制输出的 HTML？如果推文中说明了主题标签或网址，我希望能够将链接显示为链接。我该怎么做呢？

到目前为止，这是我的代码，它将字符串作为推文输出到我的页面中：

```
function get_tweet() {

require 'tmhOAuth.php';
require 'tmhUtilities.php';

$tmhOAuth = new tmhOAuth(array(
'consumer_key' => 'secret',
'consumer_secret' => 'secret',
'user_token' => 'secret',
'user_secret' => 'secret',
'curl_ssl_verifypeer' => false
));

$code = $tmhOAuth->request('GET', $tmhOAuth->url('1.1/statuses/user_timeline'), array(
'screen_name' => 'evanrichards',
'count' => '1'));

$response = $tmhOAuth->response['response'];
$tweets = json_decode($response, true);
echo($tweets[0]['text']);

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T14:11:58.353

这是一些示例代码，用于用 php 中的链接替换链接、主题标签和 attags

```
$tweet = "@george check out http://www.google.co.uk #google";

//Convert urls to <a> links
$tweet = preg_replace("/([\w]+\:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/", "<a target=\"_blank\" href=\"$1\">$1</a>", $tweet);

//Convert hashtags to twitter searches in <a> links
$tweet = preg_replace("/#([A-Za-z0-9\/\.]*)/", "<a target=\"_new\" href=\"http://twitter.com/search?q=$1\">#$1</a>", $tweet);

//Convert attags to twitter profiles in <a> links
$tweet = preg_replace("/@([A-Za-z0-9\/\.]*)/", "<a href=\"http://www.twitter.com/$1\">@$1</a>", $tweet);

echo $tweet; 
```

这给出了输出

```
<a href="http://www.twitter.com/george">@george</a> check out <a target="_blank" href="http://www.google.co.uk">http://www.google.co.uk</a> <a target="_new" href="http://twitter.com/search?q=google">#google</a> 
```

所以你可以将你的代码更改为

```
function get_tweet() {

  require 'tmhOAuth.php';
  require 'tmhUtilities.php';

  $tmhOAuth = new tmhOAuth(array(
  'consumer_key' => 'secret',
  'consumer_secret' => 'secret',
  'user_token' => 'secret',
  'user_secret' => 'secret',
  'curl_ssl_verifypeer' => false
  ));

  $code = $tmhOAuth->request('GET', $tmhOAuth->url('1.1/statuses/user_timeline'), array(
  'screen_name' => 'evanrichards',
  'count' => '1'));

  $response = $tmhOAuth->response['response'];
  $tweets = json_decode($response, true);

  $tweet = $tweets[0]['text'];
  $tweet = preg_replace("/([\w]+\:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/", "<a target=\"_blank\" href=\"$1\">$1</a>", $tweet);
  $tweet = preg_replace("/#([A-Za-z0-9\/\.]*)/", "<a target=\"_new\" href=\"http://twitter.com/search?q=$1\">#$1</a>", $tweet);
  $tweet = preg_replace("/@([A-Za-z0-9\/\.]*)/", "<a href=\"http://www.twitter.com/$1\">@$1</a>", $tweet);
  echo($tweet);

} 
```

我确信正则表达式可以改进。

或者更好的是，您可以将其拆分为自己的功能。

```
function linkify_tweet($tweet) {

  $tweet = preg_replace("/([\w]+\:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/", "<a target=\"_blank\" href=\"$1\">$1</a>", $tweet);
  $tweet = preg_replace("/#([A-Za-z0-9\/\.]*)/", "<a target=\"_new\" href=\"http://twitter.com/search?q=$1\">#$1</a>", $tweet);
  $tweet = preg_replace("/@([A-Za-z0-9\/\.]*)/", "<a href=\"http://www.twitter.com/$1\">@$1</a>", $tweet);

  return $tweet;

}

function get_tweet() {

  require 'tmhOAuth.php';
  require 'tmhUtilities.php';

  $tmhOAuth = new tmhOAuth(array(
  'consumer_key' => 'secret',
  'consumer_secret' => 'secret',
  'user_token' => 'secret',
  'user_secret' => 'secret',
  'curl_ssl_verifypeer' => false
  ));

  $code = $tmhOAuth->request('GET', $tmhOAuth->url('1.1/statuses/user_timeline'), array(
  'screen_name' => 'evanrichards',
  'count' => '1'));

  $response = $tmhOAuth->response['response'];
  $tweets = json_decode($response, true);

  echo(linkify_tweet($tweets[0]['text']));

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T15:56:40.427

一个简单的正则表达式在大多数情况下都可以工作。但是 Twitter 实体为您解决了解析问题，并为您提供了有关链接、用户名等的更多信息。

请参阅此处的完整文档：[https ://dev.twitter.com/overview/api/entities-in-twitter-objects](https://dev.twitter.com/overview/api/entities-in-twitter-objects)

要格式化文本，请获取您需要进行的所有替换的列表，然后以相反的顺序进行替换（以便在文本展开后偏移保持正确）。

```
<?php
function twitter_format($tweet) {
    $text = $tweet['text'];
    $entities = isset($tweet['entities']) ? $tweet['entities'] : array();

    $replacements = array();
    if (isset($entities['hashtags'])) {
        foreach ($entities['hashtags'] as $hashtag) {
            list ($start, $end) = $hashtag['indices'];
            $replacements[$start] = array($start, $end,
                "<a href=\"https://twitter.com/search?q={$hashtag['text']}\">#{$hashtag['text']}</a>");
        }
    }
    if (isset($entities['urls'])) {
        foreach ($entities['urls'] as $url) {
            list ($start, $end) = $url['indices'];
            // you can also use $url['expanded_url'] in place of $url['url']
            $replacements[$start] = array($start, $end,
                "<a href=\"{$url['url']}\">{$url['display_url']}</a>");
        }
    }
    if (isset($entities['user_mentions'])) {
        foreach ($entities['user_mentions'] as $mention) {
            list ($start, $end) = $mention['indices'];
            $replacements[$start] = array($start, $end,
                "<a href=\"https://twitter.com/{$mention['screen_name']}\">@{$mention['screen_name']}</a>");
        }
    }
    if (isset($entities['media'])) {
        foreach ($entities['media'] as $media) {
            list ($start, $end) = $media['indices'];
            $replacements[$start] = array($start, $end,
                "<a href=\"{$media['url']}\">{$media['display_url']}</a>");
        }
    }

    // sort in reverse order by start location
    krsort($replacements);

    foreach ($replacements as $replace_data) {
        list ($start, $end, $replace_text) = $replace_data;
        $text = mb_substr($text, 0, $start, 'UTF-8').$replace_text.mb_substr($text, $end, NULL, 'UTF-8');
    }
    return "<p>$text</p>";
}

echo twitter_format($tweets[0]); 
```

# android - 自动完成文本视图 - 仅选择特定文本而不是整个文本

> ID：15387162
> 
> 赞同：-2
> 
> 时间：2013-03-13T13:47:12.450
> 
> 标签：android, autocompletetextview

假设，自动完成文本视图将提供多个文本数据，我想通过丢弃其他数据仅在自动完成文本视图中显示特定文本。

例子：

文本视图选项是：

goog - Google Inc yhoo - Yahoo msft - Microsoft Corporation

如果用户选择第一个，则 autocompletetextview 应该只包含 goog。

我不知道..我该如何开始。请你用一个例子来解释我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:56:47.273

我想你可以用一个结构作为键/值来设置它。goog 将是关键，而 goog - Google Inc yhoo - Yahoo msft - Microsoft Corporation 的价值。

在数据库或合适的集合中，无论您提供键还是值，您都可以简单地找到另一个。

# java - 通过 GUI 上的按钮在文本字段中输入数字

> ID：15387165
> 
> 赞同：1
> 
> 时间：2013-03-13T13:47:16.693
> 
> 标签：java, swing, user-interface, textfield, calculator

我做了一个简单的计算器

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
public class Calculator extends JFrame implements ActionListener
{
GridLayout layout = new GridLayout(5, 1);
JLabel l1 = new JLabel("Number 1:");
JLabel l2 = new JLabel("Number 2:");
JLabel l3 = new JLabel("Answer:"); 
JTextField t1 = new JTextField(30);
JTextField t2 = new JTextField(30);
JTextField t3 = new JTextField(30);
JButton add = new JButton("+");
JButton sub = new JButton("-");
JButton mul = new JButton("*");
JButton div= new JButton("/");
Float ans; 

public Calculator()
  {
    super("Calculator");
    setSize(250, 200);
    add(l1);
    add(t1);
    add(l2);
    add(t2);
    add(l3);
    add(t3);
    add(add);
    add(sub);
    add(mul);
    add(div);
    setLayout(layout);
    add.addActionListener(this);
    sub.addActionListener(this);
    mul.addActionListener(this);
    div.addActionListener(this);
    setVisible(true);
  }

public void actionPerformed(ActionEvent e)
  {
String n1 = t1.getText();
String n2 = t2.getText();
Float num1 = Float.parseFloat(n1);
Float num2 = Float.parseFloat(n2);   
Object clicked = e.getSource();

if(add == clicked)
{
  t3.setText(String.valueOf(num1+num2));
}

else if(sub == clicked)
{
  t3.setText(String.valueOf(num1-num2));
}

else if(mul == clicked)
{
  t3.setText(String.valueOf(num1*num2));
}

else
{
if(num2 == 0)
t3.setText("Can't Divide By Zero");
else
t3.setText(String.valueOf(num1/num2));
  }
 }
} 
```

和一堂阅读它的课

```
public class UseMyFrame
{
  public static void main(String[] args)
  {
    Calculator calc = new Calculator();
    calc.setVisible(true);
  }
} 
```

我的问题是我想添加另一个功能并放置 9 个按钮 1-9，按下时会将它们各自的数字放在文本字段上，但我不知道如何将它们设置为出现在文本字段中，我首先要设置。 text 但我意识到按钮如何知道将其编号放在哪里，因为如果我确实 set.text 我需要将它放在 textfield1 或 textfield 2 上。我想让数字首先出现在 textfield1 中，然后在 textfield2 上（如果已经有） textfield1 上的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:19:42.237

> 但我不知道如何将它们设置为出现在文本字段中

添加到 JButton 的 Action 应该扩展 TextAction。TextAction 可以访问最后一个焦点文本组件（因此您不必自己跟踪此信息）。您的代码将类似于：

```
public class AddDigitAction extends TextAction
{
    public void actionPerformed(ActionEvent e)
    {
        JButton button = (JButton)e.getSource();
        String digit = button.getActionCommand();
        JTextComponent target = getTextComponent(e);
        target.replaceSelection(digit);
} 
```

您可以对所有按钮使用相同的操作。replaceSelection() 方法是一种将文本添加到文本字段的简单方法。它将在文本字段中插入符号的最后一个位置插入文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-25T03:53:32.760

首先设置 global int curs = 0 和 global string screen 然后在每个数字按钮上放置该代码（所有关于字符串的连接）

```
if(curs==0){
    screen="1";  // change the number for each button
    jTextField1.setText(screen);
    a=Double.parseDouble(screen);
    curs++;
    }else{
    screen=screen+"1";  //  // change the number for each button
    jTextField1.setText(screen);
    a=Double.parseDouble(screen);
    curs++;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:51:18.177

因此，您需要创建一个布尔变量来帮助您跟踪将数字放入哪个字段。然后在按钮的操作中您可以使用它来决定。

```
 if(first){
      textField1.setText("1");
      first = false;
   }else{
      textField2.setText("1");
      first = true;
   } 
```

现在，这个片段非常简单，并没有考虑所有的可能性。它只是在两个字段之间切换。您可以将其扩展到您需要的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T13:51:22.723

如果你只想有个位数：

```
if(t1.getText().length() == 0)
    t1.setText(...);
else
    t2.setText(...); 
```

更好：找出哪个文本字段具有当前`focus`值（请参阅 javadocs）并将数字放在该文本的末尾：

```
tFocused.setText(tFocused.getText() + digit) 
```

# c# - 如何从 xml 创建对象

> ID：15387170
> 
> 赞同：0
> 
> 时间：2013-03-13T13:47:29.837
> 
> 标签：c#, xml, xelement

你如何创建一个对象`XElement`？我可以创建一个列表，但我想要一个对象而不是列表。

这是我的代码：

```
XElement elem = XElement.Load(path);
var myList = from n in elem.Descendants("NodeNumber1")
             select new
             {
                 Name = n.Attribute("Name").Value,
                 MyObj = from o in n.Descendants("NodeChild")
                         select new
                         {
                             var1 = o.Descendants("var1").FirstOrDefault().Value,
                             var2 = o.Descendants("var2").FirstOrDefault().Value,
                         }
             }; 
```

`NodeChild`是`NodeNumber1`一次，所以我希望它作为一个对象而不是一个列表。甚至`var1`和`var2`被定义一次`NodeChild`- 但它们没有问题，因为我使用`FirstOrDefault`)。

我如何将它创建为单个对象而不是列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:54:02.350

```
var axe = elem.Descendants("NodeNumber1")
               .Select(n => new
               {
                   Name= n.Attribute("Name").Value,
                   MyObj= from o in n.Descendants("NodeChild")
                          select new
                          {
                              var1= o.Descendants("var1").FirstOrDefault().Value,
                              var2= o.Descendants("var2").FirstOrDefault().Value,
                          }
               })
               .First(); 
```

或使用现有查询：

```
var axe = axesList.First(); 
```

# sockets - WebDav 协议 VS HTTP 协议

> ID：15387175
> 
> 赞同：1
> 
> 时间：2013-03-13T13:47:43.753
> 
> 标签：sockets, webdav, http-protocols

在上传方面，WebDAV 协议在哪些方面优于 HTTP 协议。

Socket Upload 协议和 WebDav Upload 协议有比较吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:18:14.187

WebDav 是 HTTP 协议的扩展。就像 PHP 的 AJAX。在大型公司网络中，上传过程比 HTTP 常规上传更快、更容易设置。

WebDAV 服务器也支持 SSL（安全套接层）。您可以通过 HTTP-POST 目录上传。

套接字永久连接到目标，直到任务完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T14:26:20.557

WebDAV 上传使用 PUT，与 HTTP 相同。所以真的没有区别。

# mysql - 将函数应用于别名字段

> ID：15387177
> 
> 赞同：0
> 
> 时间：2013-03-13T13:47:46.363
> 
> 标签：mysql

我有一个查询，它创建两个这样的别名文件：

```
 (CASE WHEN `venueID` > 0 THEN `venueLongitude` ELSE `specialLongitude` END) AS `longitude`
 (CASE WHEN `venueID` > 0 THEN `venueLatitude` ELSE `specialLatitude` END) AS `latitude` 
```

它决定了在某个查询中使用哪个经度和纬度（表中有许多 JOIN，但是为了这个示例，唯一的 JOIN 是从`Gigs`执行 a`NATURAL LEFT JOIN`的表到名为`Venues`.

该位工作正常并返回我有兴趣进行距离计算的场地坐标，然后我可以订购。

距离场如下所示：

```
((ACOS(SIN($lat * PI() / 180) * SIN(`latitude` * PI() / 180) + COS($lat * PI() / 180) * COS(`latitude` * PI() / 180) * COS(($lon - `longitude`) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) 
```

但是当我运行查询时，我得到了错误`Unknown column 'latitude' in 'field list'`。有谁知道我如何执行这样的查找。

ps

虽然我知道我可以使用地理空间查询，但我想以一种以后可以用于进一步查询的方式知道答案，即

```
SELECT *,(CASE WHEN `a` > 0 THEN `a` ELSE `b` END) AS `x`,(`x` MOD 3) AS `y` FROM `Foo` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:13:49.837

2种方式：

a) 用 SQL 替换别名

b）用另一个像这样封装您的第一个查询：

```
 SELECT 
          t.latitude,
          t.longitude, 
          ((ACOS(SIN($lat * PI() / 180) * SIN(t.latitude * PI() / 180) + COS($lat * PI() / 180) * COS(latitude * PI() / 180) * COS(($lon - t.longitude) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) as distance

     FROM ( 
       SELECT ((CASE WHEN `venueID` > 0 THEN `venueLongitude` ELSE `specialLongitude` END) AS `longitude`, (CASE WHEN `venueID` > 0 THEN `venueLatitude` ELSE `specialLatitude` END) AS `latitude` FROM Gigs left join Venues on ....
     ) as t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:18:25.467

如果你想`SELECT`拉开距离，那么相信你需要重新声明该值的大小写。又名：而不是使用`SELECT col alias1, alias1 + 1 alias2`你必须做的`SELECT col alias1, col + 1 alias2`。[查看有关Where you can use column aliases](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)的 MySQL 文档。

如果您只是想要`GROUP BY`距离，那么您可以在距离函数中使用别名。但是，如果您想要距离，则需要用评估代码`SELECT`替换距离函数中的别名用法。`CASE`

`ORDER BY`使用别名：

```
SELECT
  (CASE WHEN `venueID` > 0 THEN `venueLongitude` ELSE `specialLongitude` END) longitude,
  (CASE WHEN `venueID` > 0 THEN `venueLatitude` ELSE `specialLatitude` END) latitude
FROM table_name
ORDER BY ((ACOS(SIN(latitude * PI() / 180) * SIN(latitude * PI() / 180) + COS(latitude * PI() / 180) * COS(latitude * PI() / 180) * COS(longitude * PI() / 180)) * 180 / PI()) * 60 * 1.1515) 
```

`SELECT`不能使用别名（它会变得混乱！）：

```
SELECT
  (CASE WHEN `venueID` > 0 THEN `venueLongitude` ELSE `specialLongitude` END) longitude,
  (CASE WHEN `venueID` > 0 THEN `venueLatitude` ELSE `specialLatitude` END) latitude,
  (
    ((ACOS(SIN((CASE WHEN `venueID` > 0 THEN `venueLatitude` ELSE `specialLatitude` END) * PI() / 180) * SIN((CASE WHEN `venueID` > 0 THEN `venueLatitude` ELSE `specialLatitude` END) * PI() / 180) + COS((CASE WHEN `venueID` > 0 THEN `venueLatitude` ELSE `specialLatitude` END) * PI() / 180) * COS((CASE WHEN `venueID` > 0 THEN `venueLatitude` ELSE `specialLatitude` END) * PI() / 180) * COS((CASE WHEN `venueID` > 0 THEN `venueLongitude` ELSE `specialLongitude` END) * PI() / 180)) * 180 / PI()) * 60 * 1.1515)
  ) distance
FROM table_name
ORDER BY distance 
```

# ruby - teamcity中的ruby测试用例失败

> ID：15387179
> 
> 赞同：0
> 
> 时间：2013-03-13T13:47:49.637
> 
> 标签：ruby, cucumber, teamcity, bdd

我是 Ruby 新手，目前正在开发一个 JAVA 项目，该项目的行为测试用例是用`ruby(CUCUMBER BDD)`.`TeamCity`

`"Watir::Exception::NoMatchingWindowFoundException: Unable to locate window,"`

或者

`"Spec::Expectations::ExpectationNotMetError:"`

错误。没有对这些测试用例进行任何更改。关于我应该在哪里查看的任何建议？

这是我的 env.rb 文件。我需要在这里更改任何内容吗？

```
require 'watir'
require 'open-uri'
require 'spec'
require 'win32ole'
require 'rake'
require 'cucumber/rake/task'
require 'net/http'
require 'uri'
require 'mysql'
require 'active_record'
require 'features/db/mysqldb'
require 'features/db/order'
require 'features/db/listener_state'

def clear_all_mock_requests
  open 'http://xxxxxx:8080/httpmockserver/soapResponse!clearAllRequests.action'
end

Mysqldb.connect("xxx", "xxx", "xx", "xxx", "xxxxx")

clear_all_mock_requests()

Watir::Browser.default = ENV['browser'] == 'firefox' ? 'firefox' : 'ie'
#Watir::Browser.default = 'firefox'

BROWSER = Watir::Browser.new

WIN32OLE.class_eval do ||

  def visible?;
    return false if self.style.invoke('display').downcase == 'none';
    return true;
  end

  def type
    {:text_field=>'text', :radio=>'radio', :select_list => 'select-one', :checkbox => 'checkbox'}.each do |method, name|
      return name if BROWSER.method(method).call(:name, self.name).exist?
    end
    return nil
  end

  def exist?
    return true
  end
end

NilClass.class_eval do ||
  def exist?
    return false
  end
end

at_exit do
  BROWSER.close
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:26:19.377

`Watir::Exception::NoMatchingWindowFoundException: Unable to locate window`通常意味着您试图锁定一个不存在的浏览器。检查您的`browser.open`功能。

# android - 如何将单选按钮合并到一个在 Activity 上传播的 Radiogroup 中

> ID：15387191
> 
> 赞同：1
> 
> 时间：2013-03-13T13:48:33.693
> 
> 标签：android, radio-button, radio-group

我有一个带有 2 个单选按钮的活动，但第一个在顶部，第二个在中间附近。在单选按钮之间还有许多其他视图。如何将这 2 个单选按钮合并为一组？当我`<RadioGroup ...</RadioGroup>`将 Activity 的所有内容都放到某个地方时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:08:12.980

组合单选按钮的一种方法是在激活拳头时停用第二个单选按钮，并使用其他单选按钮执行相同操作`OnCheckedChangeListener`

这里基本上是如何做到这一点的。

```
RadioButton1.setOnCheckedChangeListener(new OnCheckedChangeListener(){

            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub

            RadioButton2.setChecked(false);

        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:01:01.873

我不确定您要做什么，但我认为您可以将视图放在单选按钮之间，如下所示：

```
 <RadioGroup
        android:id="@+id/RG"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <RadioButton
                android:id="@+id/RB1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="text1" />

            <TextView
                android:id="@+id/textview"
                android:text="Place your many other views like this" />

            <RadioButton
                android:id="@+id/RB2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="text2" />
        </LinearLayout>
    </RadioGroup> 
```

# delphi - TVirtualInterface 失败，接口包含“对象功能”属性

> ID：15387192
> 
> 赞同：2
> 
> 时间：2013-03-13T13:48:36.207
> 
> 标签：delphi, delphi-xe2, delphi-xe3

我有界面：

```
TOnIntegerValue: function: integer of object;

ITestInterface = interface(IInvokable)
  ['{54288E63-E6F8-4439-8466-D3D966455B8C}']
  function GetOnIntegerValue: TOnIntegerValue;
  procedure SetOnIntegerValue(const Value: TOnIntegerValue);
  property OnIntegerValue: TOnIntegerValue read GetOnIntegerValue 
    write SetOnIntegerValue;
end; 
```

在我的测试中，我有：

```
.....
FTestInterface: ITestInterface;
.....

procedure Test_TestInterface.SetUp;
begin
  FTestInterface := TVirtualInterface.Create(TypeInfo(ITestInterface)) as ITestInterface;
end;
..... 
```

并得到错误：“范围检查错误”

任何的想法？还是 TVirtualInterface 不支持“对象的功能”和“对象的过程”类型？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:49:38.853

似乎`TVirtualInterface`可以很好地使用方法指针，但不喜欢属性。这是一个快速示例来演示：

```
{$APPTYPE CONSOLE}

uses
  SysUtils, Rtti;

type
  TIntegerFunc = function: integer of object;

  IMyInterface = interface(IInvokable)
    ['{8ACA4ABC-90B1-44CA-B25B-34417859D911}']
    function GetValue: TIntegerFunc;
    // property Value: TIntegerFunc read GetValue; // fails with range error
  end;

  TMyClass = class
    class function GetValue: Integer;
  end;

class function TMyClass.GetValue: Integer;
begin
  Result := 666;
end;

procedure Invoke(Method: TRttiMethod; const Args: TArray<TValue>; out Result: TValue);
begin
  Writeln(Method.ToString);
  Result := TValue.From<TIntegerFunc>(TMyClass.GetValue);
end;

var
  Intf: IMyInterface;

begin
  Intf := TVirtualInterface.Create(TypeInfo(IMyInterface), Invoke) as IMyInterface;
  Writeln(Intf.GetValue()); // works fine
  // Writeln(Intf.Value()); // fails with range error
  Readln;
end. 
```

该程序按预期工作。但是，取消注释该属性足以使其失败。这显然是一个 RTTI 错误。我认为除了 Embarcadero 以外的任何人都没有现成的方法来修复它。

似乎是类型为方法指针的属性的组合是问题所在。解决方法是避免此类属性。我建议你提交一份质量控制报告。此答案中的代码正是您所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:43:18.457

正如 David 已经提到的，问题是编译器为返回方法类型的属性生成错误的 RTTI。

所以对于房产

```
property OnIntegerValue: TOnIntegerValue; 
```

编译器为如下所示的方法生成 RTTI：

```
function OnIntegerValue: Integer; 
```

但它不包括此方法的隐式 Self 参数。这就是您收到范围检查错误的原因，因为在读取 RTTI 以创建 TRttiInterfaceType 时，会执行这行代码：

```
SetLength(FParameters, FTail^.ParamCount - 1); 
```

这绝不应该发生，因为所有有效方法都具有隐式 Self 参数。

错误的 RTTI 还有另一个问题，因为它会因为它生成的无效方法而弄乱了虚拟方法的索引。如果方法类型有一个参数，您不会得到范围检查错误，而是一个错误的 TRttiMethod 实例，这会导致所有后续方法具有错误的虚拟索引，这将导致虚拟接口调用失败。

这是我写的一个单元，你可以用它来修复错误的 RTTI。

```
unit InterfaceRttiPatch;

interface

uses
  TypInfo;

procedure PatchInterfaceRtti(ATypeInfo: PTypeInfo);

implementation

uses
  Windows;

function SkipShortString(P: Pointer): Pointer;
begin
  Result := PByte(P) + PByte(P)^ + 1;
end;

function SkipAttributes(P: Pointer): Pointer;
begin
  Result := PByte(P) + PWord(P)^;
end;

procedure PatchInterfaceRtti(ATypeInfo: PTypeInfo);
var
  typeData: PTypeData;
  table: PIntfMethodTable;
  p: PByte;
  entry: PIntfMethodEntry;
  tail: PIntfMethodEntryTail;
  methodIndex: Integer;
  paramIndex: Integer;
  next: PByte;
  n: UINT_PTR;
  count: Integer;
  doPatch: Boolean;

  function IsBrokenMethodEntry(entry: Pointer): Boolean;
  var
    p: PByte;
    tail: PIntfMethodEntryTail;
  begin
    p := entry;
    p := SkipShortString(p);
    tail := PIntfMethodEntryTail(p);
    // if ParamCount is 0 the compiler has generated
    // wrong typeinfo for a property returning a method type
    if tail.ParamCount = 0 then
      Exit(True)
    else
    begin
      Inc(p, SizeOf(TIntfMethodEntryTail));
      Inc(p, SizeOf(TParamFlags));
      // if Params[0].ParamName is not 'Self'
      // and Params[0].Tail.ParamType is not the same typeinfo as the interface
      // it is very likely that the compiler has generated
      // wrong type info for a property returning a method type
      if PShortString(p)^ <> 'Self' then
      begin
        p := SkipShortString(p); // ParamName
        p := SkipShortString(p); // TypeName
        if PIntfMethodParamTail(p).ParamType^ <> ATypeInfo then
          Exit(True);
      end;
    end;
    Result := False;
  end;

begin
  if ATypeInfo.Kind <> tkInterface then Exit;

  typeData := GetTypeData(ATypeInfo);
  table := SkipShortString(@typeData.IntfUnit);
  if table.RttiCount = $FFFF then Exit;

  next := nil;
  for doPatch in [False, True] do
  begin
    p := PByte(table);
    Inc(p, SizeOf(TIntfMethodTable));
    for methodIndex := 0 to table.Count - 1 do
    begin
      entry := PIntfMethodEntry(p);
      p := SkipShortString(p);
      tail := PIntfMethodEntryTail(p);
      Inc(p, SizeOf(TIntfMethodEntryTail));
      for paramIndex := 0 to tail.ParamCount - 1 do
      begin
        Inc(p, SizeOf(TParamFlags));  // TIntfMethodParam.Flags
        p := SkipShortString(p);      // TIntfMethodParam.ParamName
        p := SkipShortString(p);      // TIntfMethodParam.TypeName
        Inc(p, SizeOf(PPTypeInfo));   // TIntfMethodParamTail.ParamType
        p := SkipAttributes(p);       // TIntfMethodParamTail.AttrData
      end;
      if tail.Kind = 1 then // function
      begin
        p := SkipShortString(p);      // TIntfMethodEntryTail.ResultTypeName
        Inc(p, SizeOf(PPTypeInfo));   // TIntfMethodEntryTail.ResultType
      end;
      p := SkipAttributes(p);         // TIntfMethodEntryTail.AttrData

      if doPatch and IsBrokenMethodEntry(entry) then
      begin
        WriteProcessMemory(GetCurrentProcess, entry, p, next - p, n);
        count := table.Count - 1;
        p := @table.Count;
        WriteProcessMemory(GetCurrentProcess, p, @count, SizeOf(Word), n);
        count := table.RttiCount;
        p := @table.RttiCount;
        WriteProcessMemory(GetCurrentProcess, p, @count, SizeOf(Word), n);
        p := PByte(entry);
      end;
    end;
    p := SkipAttributes(p);           // TIntfMethodTable.AttrData
    next := p;
  end;
end;

end. 
```

# c# - Windows 窗体应用程序是否默认支持多实例？C＃

> ID：15387201
> 
> 赞同：0
> 
> 时间：2013-03-13T13:48:52.747
> 
> 标签：c#, .net, wpf, winforms, instance

1.  C# 中的普通 winform 应用程序是否默认支持多实例？

2.  如何防止在 WPF 应用程序中创建多个实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:51:40.613

1.  是的，他们是
2.  看到这篇[msdn 文章](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/d7e9120a-f48a-4d3a-aaab-addc8eb6e0da/)

编辑：甚至更好：[codeproject 文章](http://www.codeproject.com/Articles/84270/WPF-Single-Instance-Application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:55:51.930

1-是的，您可以执行许多应用程序实例。使用一些代码，您可以避免它。

2- 在 App.xaml.cs 中，您可以覆盖一些方法并使用 Mutex ：

```
public partial class App : Application
{
    private Mutex instanceMutex = null;

    protected override void OnStartup(StartupEventArgs e)
    {
        Boolean createdNew;
        this.instanceMutex = new Mutex(true, "MyApplication", out createdNew);
        if (!createdNew)
        {
            this.instanceMutex = null;
            Application.Current.Shutdown();
            return;
        }

        base.OnStartup(e);
    }

    protected override void OnExit(ExitEventArgs e)
    {
        if (this.instanceMutex != null)
        {
            this.instanceMutex.ReleaseMutex();
        }

        base.OnExit(e);
    }
} 
```

# xml - jmeter使用ant和浏览器的xml日志看起来不一样

> ID：15387204
> 
> 赞同：1
> 
> 时间：2013-03-13T13:48:57.510
> 
> 标签：xml, xslt, xpath, ant, jmeter

我做了一些更改，`jmeter-results-report_21.xsl`以在 html 报告中显示测试用例名称。直接在浏览器中打开时效果很好，但是当我使用 ant 生成报告时，它会将页面顶部的案例测试名称和上面的 URL 分组。就像 for 没有嵌套一样。

```
<xsl:for-each select="/testResults/*[not(@tn = preceding::*/@tn)]">
<xsl:variable name="labelCaso" select="@tn" />
<tr><xsl:value-of select="$labelCaso" /></tr>
    <xsl:for-each select="/testResults/*[not(@lb = preceding::*/@lb)] ">
        <xsl:variable name="label" select="@lb"/>
        <xsl:variable name="count" select="count(../*[@lb = current()/@lb] [attribute::tn=$labelCaso])" />
        <xsl:variable name="failureCount" select="count(../*[@lb = current()/@lb][attribute::s='false'][attribute::tn=$labelCaso])" />
        <xsl:variable name="successCount" select="count(../*[@lb = current()/@lb][attribute::s='true'][attribute::tn=$labelCaso])" />
        <xsl:variable name="successPercent" select="$successCount div $count" />
        <xsl:variable name="totalTime" select="sum(../*[@lb = current()/@lb][attribute::tn=$labelCaso]/@t )" />
        <xsl:variable name="averageTime" select="($totalTime div $count)" />
        <xsl:variable name="minTime">
            <xsl:call-template name="min">
                <xsl:with-param name="nodes" select="../*[@lb = current()/@lb][attribute::tn=$labelCaso]/@t" />
            </xsl:call-template>
        </xsl:variable>
        <xsl:variable name="maxTime">
            <xsl:call-template name="max">
                <xsl:with-param name="nodes" select="../*[@lb = current()/@lb][attribute::tn=$labelCaso]/@t" />
            </xsl:call-template>
        </xsl:variable>
        <tr valign="top">
            <xsl:attribute name="class">
                <xsl:choose>
                    <xsl:when test="$failureCount &gt; 0">Failure</xsl:when>
                </xsl:choose>
            </xsl:attribute>

            <td>
                <xsl:value-of select="$label" /> 
            </td>
            <td align="center">
                <xsl:value-of select="$count" />
            </td>
            <td align="center">
                <xsl:value-of select="$failureCount" />
            </td>
            <td align="right">
                <xsl:call-template name="display-percent">
                    <xsl:with-param name="value" select="$successPercent" />
                </xsl:call-template>
            </td>
            <td align="right">
                <xsl:call-template name="display-time">
                    <xsl:with-param name="value" select="$averageTime" />
                </xsl:call-template>
            </td>
            <td align="right">
                <xsl:call-template name="display-time">
                    <xsl:with-param name="value" select="$minTime" />
                </xsl:call-template>
            </td>
            <td align="right">
                <xsl:call-template name="display-time">
                    <xsl:with-param name="value" select="$maxTime" />
                </xsl:call-template>
            </td>
        </tr>
</xsl:for-each> 
</xsl:for-each> 
```

# php - 使用 PDO 将会话存储在数据库中的 PHP 不会产生我预期的错误

> ID：15387207
> 
> 赞同：1
> 
> 时间：2013-03-13T13:49:07.247
> 
> 标签：php, session, pdo, mysqli

**已解决：答案在第二篇文章中**

我尝试使用 PDO 将会话存储在数据库中，但它不会产生我预期的错误，请阅读我的代码。

这是我的会话处理程序类的代码：

```
class MySessionHandler implements SessionHandlerInterface
{
    protected $conn = NULL;

    public function open($savePath, $sessionName)
    {
        if(is_null($this->conn))
        {
            $dsn = 'mysql:host=localhost;dbname=php_advanced';
            $username = 'root';
            $password = 'password';
            try
            {
                 $this->conn = new PDO($dsn, $username, $password);
                 $this->conn->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
            }
            catch(PDOException $e)
            {
                 $this->conn = NULL;
                 die('error in open function ' . $e->getMessage());
            }
        }
        return TRUE;
    }

    public function close()
    {

        echo '<p>close</p>';
        $this->conn = NULL;

        return TRUE;
    }

    public function read($id)
    {

        echo '<p>read</p>';
        $query = 'SELECT data FROM session_table WHERE session_id = :id';
        try
        {
            $pdo = $this->conn->prepare($query);
            $pdo->bindValue(':id', $id);
            $pdo->execute();

            //    Kalo query berhasil nemuin id..
            if($pdo->rowCount() == 1)
            {
                list($sessionData) = $pdo->fetch();

                return $sessionData;
            }

            return FALSE;
        }
        catch(PDOException $e)
        {
            $this->conn = NULL;
            die('error in read function => ' . $e->getMessage());
        }

    }

    public function write($id, $data)
    {

        echo '<p>write</p>';
        $query = 'REPLACE INTO session_table(session_id, data) VALUES(:id, :data)';

        try
        {
            $pdo = $this->conn->prepare($query);
            $pdo->bindValue(':id', $id);
            $pdo->bindValue(':data', $data);
            $pdo->execute();

            // return the value whether its success or not
            return (bool)$pdo->rowCount();
        }
        catch(PDOException $e)
        {
            $this->conn = NULL;
            die('error in write function => ' . $e->getMessage());
        }
    }

    public function destroy($id)
    {

        echo '<p>destroy</p>';
        $query = 'DELETE FROM session_table WHERE session_id = :id LIMIT 1';

        try
        {
            $pdo = $this->conn->prepare($query);
            $pdo->bindValue(':id', $id);
            $pdo->execute();
            $_SESSION = array();
            return (bool)$pdo->rowCount();
        }
        catch(PDOException $e)
        {
            $this->conn = NULL;
            die('error in destroy function => ' . $e->getMessage());
        }
    }

    public function gc($maxLifeTime)
    {

        echo '<p>garbage collection</p>';
        $query = 'DELETE FROM session_table WHERE DATE_ADD(last_accessed INTERVAL :time SECOND) < NOW()';

        try
        {
            $pdo = $this->conn->prepare($query);
            $pdo->bindValue(':time', $maxLifeTime);
            $pdo->execute();

            return TRUE;
        }
        catch(PDOException $e)
        {
            $this->conn = NULL;
            die('error in gc function => ' . $e->getMessage());
        }
    }
}

$SessionHandler = new MySessionHandler();
session_set_save_handler($SessionHandler);
session_name('my_session');

session_start(); 
```

我故意删除了 session_write_close。这可能听起来很愚蠢，但我想获得会话错误以了解更多信息..

这是会话脚本（使用本书的代码）：

```
require('session_class.php');
?><!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>DB Session Test</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<?php
// Store some dummy data in the session, if no data is present:
if (empty($_SESSION)) {

    $_SESSION['blah'] = 'umlaut';
    $_SESSION['this'] = 3615684.45;
    $_SESSION['that'] = 'blue';

    // Print a message indicating what's going on:
    echo '<p>Session data stored.</p>';

} else { // Print the already-stored data:
    echo '<p>Session Data Exists:<pre>' . print_r($_SESSION, 1) . '</pre></p>';
}

// Log the user out, if applicable:
if (isset($_GET['logout'])) {

    session_destroy();
    echo '<p>Session destroyed.</p>';
} else { // Otherwise, print the "Log Out" link:
    echo '<a href="session_link.php?logout=true">Log Out</a>';
}

// Reprint the session data:
echo '<p>Session Data:<pre>' . print_r($_SESSION, 1) . '</pre></p>';

// Complete the page:
echo '</body>
</html>';

// Write and close the session:
// session_write_close() <<<<<--- I REMOVE THIS ON PURPOSE TO GET ERROR
?> 
```

但我没有收到任何错误，然后我尝试使用 book 的 mysqli 脚本连接数据库，它产生了我预期的错误，因为我删除了`session_write_close()`..

谁能解释为什么如果我使用 PDO 它不会产生错误？我什至不使用

```
register_shutdown_function('session_write_close'); 
```

在我的会话类析构函数中（故意）

**注意：我是故意这样做的，因为我想了解更多。**

我期望的错误就像我使用 mysqli 连接时一样（连接在脚本末尾由 php 关闭，然后会话尝试写入并关闭但没有可用的连接）：

```
Warning: mysqli_real_escape_string() expects parameter 1 to be mysqli, null given in /var/www/ullman_advance/ch3/ullman_db.php on line 66

Warning: mysqli_real_escape_string() expects parameter 1 to be mysqli, null given in /var/www/ullman_advance/ch3/ullman_db.php on line 66

Warning: mysqli_query() expects parameter 1 to be mysqli, null given in /var/www/ullman_advance/ch3/ullman_db.php on line 67

Warning: mysqli_close() expects parameter 1 to be mysqli, null given in /var/www/ullman_advance/ch3/ullman_db.php on line 33 
```

**更新 1**

我最近发现 mysqli 每次使用时都需要数据库连接`mysqli_real_escape_string()`，`mysqli_query`并且因为但我认为我的 pdo 在脚本结束时也需要数据库连接-> db 连接关闭->`MySessionHandler`将尝试写入并关闭，但没有 db连接，因为 pdo 已被 php 关闭，但没有产生错误..

**更新 2**

我只是试图传递`session_set_save_handler`函数回调，它会产生错误

```
<?php

$conn = NULL;

function open_session()
{
    echo '<p>open session</p>';
    global $conn;
    $_dsn = 'mysql:host=localhost;dbname=php_advanced';
    $_username = 'root';
    $_password = 'password';
    $conn = new PDO($_dsn, $_username, $_password);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    return TRUE;
}

function close_session()
{
    echo '<p>close session</p>';
    global $conn;

    $conn = NULL;
    return TRUE;
}

function read_session($sid)
{
    echo '<p>read session</p>';
    global $conn;

    $query = 'SELECT data FROM session_table WHERE session_id = :sid';
    $pdo = $conn->prepare($query);
    $pdo->bindValue(':sid', $sid, PDO::PARAM_STR);
    $pdo->execute();

    if($pdo->rowCount() == 1)
    {
        list($session_data) = $pdo->fetch();
        echo '<pre>';
        print_r($session_data);
        echo '</pre>';

        return $session_data;
    }
    else
    {
        return '';
    }
}

function write_session($sid, $data)
{
    echo '<p>write session</p>';
    global $conn;

    $query = 'REPLACE INTO session_table(session_id, data) VALUES(:sid, :data)';
    $pdo = $conn->prepare($query);
    $pdo->bindValue(':sid', $sid, PDO::PARAM_STR);
    $pdo->bindValue(':data', $data, PDO::PARAM_STR);
    $pdo->execute();

    return $pdo->rowCount();
}

function destroy_session($sid)
{
    echo '<p>destroy session </p>';
    global $conn;

    $query = 'DELETE FROM session_table WHERE session_id = :sid';
    $pdo = $conn->prepare($query);
    $pdo->bindValue(':sid', $sid, PDO::PARAM_STR);
    $pdo->execute();

    // clean the session array;
    $_SESSION = array();

    return (bool)$pdo->rowCount();
}

function clean_session($expire)
{
    echo '<p>clean session</p>';
    global $conn;

    $query = 'DELETE FROM session_table WHERE DATE_ADD(last_accessed, INTERVAL :expire SECOND) < NOW()';

    $pdo = $conn->prepare($query);
    $pdo->bindValue(':expire', $expire, PDO::PARAM_INT);
    $pdo->execute();

    return $pdo->rowCount();
}

session_set_save_handler('open_session', 'close_session', 'read_session', 'write_session', 'destroy_session', 'clean_session');
session_name('my_session');
session_start(); 
```

但是当我通过`MySessionHandler`课程时，它不会因为没有连接而产生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:07:32.903

**解决方案**

对不起，伙计们，我的错误实际上是一个非常简单的答案，为什么类不会在脚本末尾`MySessionHandler`产生错误，`session_write_close()`

`session_set_save_handler()`默认情况下将注册`session_write_close()`到`register_shutdown_function()`

因此，如果您想为会话创建自己的关闭功能，请使用： `session_set_save_handler($SessionClass, FALSE)`，如果您这样做，那么您必须`session_write_close()`在您的类析构函数中提供

来源： http: [//php.net/manual/en/function.session-set-save-handler.php](http://php.net/manual/en/function.session-set-save-handler.php)

感谢您的提示和关注

# c# - 如何将文本字符串转换为语音

> ID：15387212
> 
> 赞同：47
> 
> 时间：2013-03-13T13:49:15.847
> 
> 标签：c#, .net, text-to-speech

我正在寻找一种将 ENG 中的文本（字符串）转换为 c# 中的语音（声音）的方法。有人知道可以帮助我完成这项任务的方法或一些开源库吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-13T13:50:35.520

您可以使用 .NET 库（[System.Speech.Synthesis](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.aspx)）。

根据[微软](http://msdn.microsoft.com/en-us/library/hh361668%28v=office.14%29.aspx)：

> System.Speech.Synthesis 命名空间包含允许您初始化和配置语音合成引擎、创建提示、生成语音、响应事件和修改语音特征的类。语音合成通常被称为文本到语音或 TTS。

语音合成器将文本作为输入并产生音频流作为输出。语音合成也称为文本到语音 (TTS)。

合成器必须执行大量分析和处理，以准确地将字符串转换为听起来与说出单词一样的音频流。想象这是如何工作的最简单的方法是描绘一个两部分系统的前端和后端。

**文本分析**

前端专门使用自然语言规则分析文本。它分析一串字符以确定单词的位置（这在英语中很容易做到，但在汉语和日语等语言中并不容易）。这个前端还计算出语法细节，如功能和词性。例如，哪些词是专有名词、数字等；句子开始和结束的地方；短语是问题还是陈述；以及陈述是过去时、现在时还是将来时。

所有这些元素对于为单词、短语和句子选择适当的发音和语调至关重要。考虑到在英语中，一个问题通常以一个上升的音高结束，或者“阅读”这个词的发音根据它的时态非常不同。显然，理解单词或短语的使用方式是将文本解释为声音的关键方面。更复杂的是，每种语言的规则略有不同。因此，正如您可以想象的那样，前端必须进行一些非常复杂的分析。

**声音生成**

后端有完全不同的任务。它接受前端完成的分析，并通过自己的一些重要分析，为输入文本生成适当的声音。较旧的合成器（以及如今占用空间最小的合成器）通过算法生成单独的声音，从而产生非常机械化的声音。现代合成器，例如 Windows Vista 和 Windows 7 中的合成器，使用由数小时和数小时的录音语音组成的声音片段数据库。后端的有效性取决于它在为任何给定输入选择适当的声音片段并将它们平滑地拼接在一起的能力。

**可以使用**

上述文字转语音功能内置于 Windows Vista 和 Windows 7 操作系统中，允许应用程序轻松使用该技术。这消除了创建自己的语音引擎的需要。您可以通过一个函数调用来调用所有这些处理。请参阅说出字符串的内容。

试试这个代码：

```
using System.Speech.Synthesis;

namespace ConsoleApplication5
{
    class Program
    {

        static void Main(string[] args)
        {
            SpeechSynthesizer synthesizer = new SpeechSynthesizer();
            synthesizer.Volume = 100;  // 0...100
            synthesizer.Rate = -2;     // -10...10

            // Synchronous
            synthesizer.Speak("Hello World");

            // Asynchronous
            synthesizer.SpeakAsync("Hello World");

        }

    }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-13T13:50:14.420

[此功能存在于System.Speech](http://msdn.microsoft.com/en-us/library/gg145021.aspx)命名空间的主类库中。特别是，查看[System.Speech.Synthesis](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.aspx)。

*请注意，您可能需要添加对**System.Speech.dll**的引用。*

> SpeechSynthesizer 类提供对安装在主机上的语音合成引擎功能的访问。已安装的语音合成引擎由语音表示，例如 Microsoft Anna。SpeechSynthesizer 实例初始化为默认语音。要将 SpeechSynthesizer 实例配置为使用其他已安装的语音之一，请调用 SelectVoice 或 SelectVoiceByHints 方法。要获取有关安装了哪些声音的信息，请使用 GetInstalledVoices 方法。

与所有 MSDN 文档一样，有一些代码示例可供使用。以下来自 System.Speech.Synthesis.SpeechSynthesizer 类。

```
using System;
using System.Speech.Synthesis;

namespace SampleSynthesis
{
  class Program
  {
    static void Main(string[] args)
    {

      // Initialize a new instance of the SpeechSynthesizer.
      SpeechSynthesizer synth = new SpeechSynthesizer();

      // Configure the audio output. 
      synth.SetOutputToDefaultAudioDevice();

      // Speak a string.
      synth.Speak("This example demonstrates a basic use of Speech Synthesizer");

      Console.WriteLine();
      Console.WriteLine("Press any key to exit...");
      Console.ReadKey();
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-17T15:12:25.977

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Speech.Synthesis; // first import this package

    namespace textToSpeech
    {
        public partial class home : Form
        {
            public string s = "pran"; // storing string (pran) to s

            private void home_Load(object sender, EventArgs e)
                {
                    speech(s); // calling the function with a string argument
                }

            private void speech(string args) // defining the function which will accept a string parameter
                {
                    SpeechSynthesizer synthesizer = new SpeechSynthesizer();
                    synthesizer.SelectVoiceByHints(VoiceGender.Male , VoiceAge.Adult); // to change VoiceGender and VoiceAge check out those links below
                    synthesizer.Volume = 100;  // (0 - 100)
                    synthesizer.Rate = 0;     // (-10 - 10)
                    // Synchronous
                    synthesizer.Speak("Now I'm speaking, no other function'll work");
                    // Asynchronous
                    synthesizer.SpeakAsync("Welcome" + args); // here args = pran
                }       
         }
    } 
```

*   使用“SpeakAsync”会是更好的选择，因为当“Speak”函数正在执行/运行时，其他任何函数都不会工作，直到它完成它的工作（个人推荐）

[改变 VoiceGender](https://msdn.microsoft.com/en-us/library/system.speech.synthesis.voicegender.aspx)
[改变 VoiceAge](https://msdn.microsoft.com/en-us/library/system.speech.synthesis.voiceage.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-01T08:20:54.703

最近 Google 发布了**Google Cloud Text To Speech**。

**.NET**客户端版本的 Google.Cloud.TextToSpeech 可以在这里找到： [https ://github.com/jhabjan/Google.Cloud.TextToSpeech.V1](https://github.com/jhabjan/Google.Cloud.TextToSpeech.V1)

努盖特：`Install-Package JH.Google.Cloud.TextToSpeech.V1`

以下是如何使用客户端的简短示例：

```
GoogleCredential credentials =
    GoogleCredential.FromFile(Path.Combine(Program.AppPath, "jhabjan-test-47a56894d458.json"));

TextToSpeechClient client = TextToSpeechClient.Create(credentials);

SynthesizeSpeechResponse response = client.SynthesizeSpeech(
    new SynthesisInput()
    {
        Text = "Google Cloud Text-to-Speech enables developers to synthesize natural-sounding speech with 32 voices"
    },
    new VoiceSelectionParams()
    {
        LanguageCode = "en-US",
        Name = "en-US-Wavenet-C"
    },
    new AudioConfig()
    {
        AudioEncoding = AudioEncoding.Mp3
    }
);

string speechFile = Path.Combine(Directory.GetCurrentDirectory(), "sample.mp3");

File.WriteAllBytes(speechFile, response.AudioContent); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-28T02:17:02.650

**您可以在System.Speech.Synthesis**命名空间的帮助下做到这一点。为此，您需要先添加对**System.speech.dll**的引用。

试试这个：

```
using System.Speech.Synthesis;

namespace TextToSpeech
{
   public partial class Form1 : Form
   {
     SpeechSynthesizer speak;
     public Form1()
     {
        InitializeComponent();
        speak = new SpeechSynthesizer();
     }

     private void button1_Click(object sender, EventArgs e)
     {
        string text="Speak this";
        speak.SpeakAsync(text);
     }
  }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-10-21T09:52:58.273

您可以使用[System.Speech](https://msdn.microsoft.com/en-us/library/gg145021(v=vs.110).aspx)库来做到这一点。看看[这个例子](http://www.csharp-tutorials1.blogspot.com/2016/10/convert-text-to-speech-in-c.html)

# excel - 更改 Excel 字体渲染以适应各种缩放级别的内容

> ID：15387213
> 
> 赞同：1
> 
> 时间：2013-03-13T13:49:18.483
> 
> 标签：excel, resize

您可以通过选择一系列列并在两个单元格之间双击光标来轻松适应单元格的内容。但是，如果放大或缩小单元格的渲染会发生变化，并且自动调整的内容相对于单元格的大小会发生变化，最终会得到#####。

有没有一种方法可以自动调整单元格，而不管缩放级别如何？

对于 Excel 的软件开发团队来说，这可能是更多问题，但如果问题得到解决，也许可以在此期间实施 VBA 创可贴修复。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:23:23.180

有一个菜单按钮可以自动执行此操作。对我来说，它在功能区“开始”中，而不是“行”，而不是“格式”，而不是 Columnwidth 选项之一。请原谅模糊的描述，我使用的是德语版的 Iffce。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:30:34.963

不幸的是，默认情况下缩放级别（通过鼠标滚轮滚动）无法捕获以触发 VBA 脚本。

唯一的解决方案似乎是在后台不断运行一个 VBA 子例程，该子例程将当前缩放级别和它们应用到的工作表存储在公共变量中。

当该变量与当前从应用程序观察到的变量不同时，您需要再次为所有工作表列激活 Autofit。

或者，您可以只存储一个数字（缩放级别），然后当您在具有不同缩放级别的工作表之间切换时，子例程将立即自动适应您切换到的工作表。

当然，您必须考虑完成此操作的时间间隔。

最后一种选择是每当您发现这种情况时手动使用 Autfit...

# c# - 从表中获取 PrimaryKey

> ID：15387215
> 
> 赞同：1
> 
> 时间：2013-03-13T13:49:24.947
> 
> 标签：c#, sql, sql-server-2008, select, primary-key

我正在尝试使用该表的主键从数据库中获取数据。问题是每个表的主键名称会不同。

例如，用户可能想要拉起员工表，主键是 Emp_ID。然后他们想调出制造商表，主键是 Manu_ID。

由于信息是在同一个 ViewModel 中提取的，所以一切都需要是动态的。

这是查看制造商表的 SQL 语句：

C＃：

```
string strSQLconnection = (connectionString);
SqlConnection sqlConnection = new SqlConnection(strSQLconnection);

tableName = tableName + "AuditLogView";

sqlConnection.Open();
SqlCommand sqlCommand = new SqlCommand("SELECT *  FROM @tableName WHERE ManufacturersID = @primarykey", sqlConnection);
sqlCommand.Parameters.AddWithValue("@tablename", tableName);
sqlCommand.Parameters.AddWithValue("@primarykey", primaryKeyID);

SqlDataReader reader = sqlCommand.ExecuteReader(); 
```

其中一些已经动态实现，例如来自用户的主键和表名。我想如果我总能在我的表中找到主键，那么它应该可以工作。有没有办法做到这一点？我正在使用 SQL Server 2008 R2。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:55:06.010

此查询将获得 pkey 列名称：

```
SELECT 
    cu.CONSTRAINT_NAME, 
    cu.COLUMN_NAME 
FROM 
    INFORMATION_SCHEMA.KEY_COLUMN_USAGE cu 
WHERE 
    EXISTS 
        (
            SELECT tc.* 
            FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc 
            WHERE 
                tc.CONSTRAINT_CATALOG = 'dbName' 
                AND tc.TABLE_NAME = 'tableName' 
                AND tc.CONSTRAINT_TYPE = 'PRIMARY KEY' 
                AND tc.CONSTRAINT_NAME = cu.CONSTRAINT_NAME 
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:03:36.023

那么，您想创建一个接受表名和列名作为参数的通用查询吗？

尝试这个：

首先，创建一个存储过程，这个存储过程会根据参数创建通用查询。

```
-- @tabName = table name
-- @colName = column name
-- @colVal = column value
create proc p1 @tabName varchar(100), @colName varchar(100), @colVal varchar(100)
as
begin
    declare @sql nvarchar(max) = N'select * from ' + @tabName + ' where ' + @colName + ' = ''' + @colVal + ''''
    exec sp_executesql @sql 
end 
```

然后，从您的代码中调用该存储过程：

```
string strSQLconnection = (connectionString);
SqlConnection sqlConnection = new SqlConnection(strSQLconnection);
sqlConnection.Open();
SqlCommand sqlCommand = new SqlCommand("p1", sqlConnection);
sqlCommand.CommandType = CommandType.StoredProcedure;
sqlCommand.Parameters.AddWithValue("@tabName", "table1");
sqlCommand.Parameters.AddWithValue("@colName", "col1");
sqlCommand.Parameters.AddWithValue("@colVal", "1");        

SqlDataReader reader = sqlCommand.ExecuteReader();

sqlConnection.Close(); 
```

# reporting-services - 根据 ssrs 报告中的多列创建小计

> ID：15387217
> 
> 赞同：0
> 
> 时间：2013-03-13T13:49:31.533
> 
> 标签：reporting-services

我在 SSRS 2008 R2 中工作，需要在基于两列的报告中创建小计。例如，我需要根据成本中心和帐号对支出金额进行小计。这似乎是一个足够简单的要求，但我处于停滞状态。

样本数据：

```
Business Segment   Company Code  Cost Center  Account  Ship Date    Ship to   Ship From  Total Amount
Home Furnishing    1008          1234567890    11111    1/1/2013    Tailspin  Contoso      123.45
Baby/Parenting     1536          2234567890    22222    12/31/2012  Bobs Bait Jims Tackle  543.21
Kitchen Appliances 2553          3234567890    33333    11/11/1999  Ajax      Acme         1000.99 
```

我需要根据公司代码、成本中心和帐户提供小计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:33:02.140

由于您在多行上进行分组，只需为这些行中的每一行创建组，但仅在最低级别组的页眉或页脚中显示总计。

例如，我根据您的创建了一个简化的**数据集**：

![在此处输入图像描述](../Images/305565f5bcb34a167c88978d7100ad03.png)

我创建了**Tablix并为***Cost Center*和*Account Number*添加了组。*但是，我只为Account Number*组添加了组页脚行。在此页脚中，我添加了成本*中心*/*帐号*组合的*总金额。*它在设计器中看起来像这样：

 **![在此处输入图像描述](../Images/a7a30b4677e9540cb4a9a86e728e60c4.png)

最终结果如下所示；**它显示数据**集中的每一行以及每个*成本中心*/*帐号*组合的总计：

![在此处输入图像描述](../Images/ff8501ec39033b0ae85f3b71f6325777.png)**

# google-maps - 将东向/北向转换为经度/纬度？

> ID：15387218
> 
> 赞同：2
> 
> 时间：2013-03-13T13:49:33.237
> 
> 标签：google-maps, geocode

我有一个带有 Eastings/Northings 的邮政编码数据库，是否有可以转换这些值的 php 脚本，以便我可以在谷歌地图上使用它们？

我可以遍历数据库并更改每个值吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-07T16:11:03.343

这是我写的一个 API 来做到这一点：

[https://www.getthedata.com/bng2latlong](https://www.getthedata.com/bng2latlong)

句法：

`https://api.getthedata.com/bng2latlong/[easting]/[northing]`

例子：

[https://api.getthedata.com/bng2latlong/529090/179645](https://api.getthedata.com/bng2latlong/529090/179645)

一些非常基本的 PHP 代码可能如下所示：

```
$easting = 529090;
$northing = 179645;

$json = file_get_contents("https://api.getthedata.com/bng2latlong/$easting/$northing");

$arr = json_decode($json, true);

$latitude = $arr['latitude'];
$longitude = $arr['longitude']; 
```

# scala - 在浏览器中构建一个 scala 解释器

> ID：15387220
> 
> 赞同：5
> 
> 时间：2013-03-13T13:49:37.727
> 
> 标签：scala

我第一次接触 Scala 是通过[SimplyScala 教程](http://www.simplyscala.com/)：你不需要安装任何东西，就可以开始编写代码。几个小时后，我爱上了这种语言......

多年后，我为一个作为 Play 应用程序的 Scala 库编写了一个 Web 文档。构建像 SimplyScala 这样的东西并将其集成到文档中会很酷，这样用户就可以在浏览器中输入 Scala 命令并返回结果。

SimplyScala 在 Google App Engine 上的工作方式类似于[LotREPLS](http://lotrepls.appspot.com/)（旧的开源 Java 项目，只有几个 LOC）。

**是否也可以在我自己的服务器上创建这样的东西而不会出现安全漏洞（例如，用户不应该从服务器读取文件......）？**

我只需要 Scala 语言的“基础”而不需要任何导入，就像在 SimplyScala 中一样。

我的第一个想法是编写一个自己的 SecurityManager 并处理超时，这样用户就不会消耗太多的服务器时间。有没有更简单的方法或现有的开源项目？

还是建议用户安装 Scala 并使用终端而不是浏览器更合理？;-)

在 Scala 主页上，有一个类似于[Summer of Code 2012 Scala Projects](http://www.scala-lang.org/gsoc2012#InteractiveDocumentation)的 Play-project 想法：但我找不到任何结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-10T21:49:49.243

到目前为止，最安全的可能是[http://www.scala-js-fiddle.com/（GitHub](http://www.scala-js-fiddle.com/)上的[代码](https://github.com/lihaoyi/scala-js-fiddle)），因为它甚至不在服务器上运行代码，而是在客户端上运行！

问题是：它不是真正的 Scala 代码，它是[Scala.js](http://www.scala-js.org/)，它是 Scala 的一种方言，仍处于实验阶段，等等。但这对于您的用例来说*可能*已经足够了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T14:07:31.563

回答我自己的问题：

**Scala 控制台，不关心安全性（？）：**

*   [Scala Web 控制台](https://github.com/inca/scala-webconsole)
*   [斯卡拉 IDE](https://github.com/themerius/ScalaIde)
*   [特里斯卡拉](http://www.tryscala.com/)

**一个以某种方式处理安全性的 Web 界面：**

令人印象深刻的[Scalakata 项目](http://www.scalakata.com/)Source 在[GitHub 上](https://github.com/MasseGuillaume/ScalaKata/)。

这是一个 Lift 项目，它定义了一个自己的安全管理器（请参阅`src/main/scala/com.github.masseguillaume/security`参考资料）并处理超时（请参阅 参考资料`src/main/scala/com.github.masseguillaume/service/KateEval.scala`）。现在我必须想，如果这足够安全......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-10T21:42:14.040

[https://codebrew.io/](https://codebrew.io/)似乎与 Scala REPL 一样好用

可在[https://github.com/CodeBrew-io获取代码](https://github.com/CodeBrew-io)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-03T18:57:21.293

和：`libraryDependencies += "org.scala-lang" % "scala-compiler" % scalaVersion.value`

## 编译器 ( `scala.tools.nsc.Global`)

这是评估 scala 代码的最准确方法。 [将在类加载器用法](https://github.com/MasseGuillaume/ScalaKata/blob/b80e8acc8bc466980e69220d1c6648cb6507da16/Eval/compile/src/main/scala/com.scalakata.eval/Eval.scala#L13)`compileSources`中添加一个新类

## 重复

### 主

[用法](https://github.com/Bridgewater/scala-notebook/tree/master/kernel/src/main/scala/com/bwater/notebook/kernel)

### JSR-223

```
import javax.script.ScriptEngineManager
val e = new ScriptEngineManager().getEngineByName("scala")
e.put("n", 10)
e.eval("1 + n") // 11 
```

## 反射工具箱

```
import scala.reflect.runtime.{currentMirror => cm}
import scala.reflect.runtime.universe._
import scala.tools.reflect.ToolBox
val tb = cm.mkToolBox()
tb.eval(tb.parse("1+1"))
// res0: Any = 2 
```

## 演示（交互式）编译器 ( `scala.tools.nsc.interactive.Global`)

这是用于自动完成和其他交互功能。 [文档](http://scala-ide.org/docs/dev/architecture/presentation-compiler.html)

[用法](https://github.com/MasseGuillaume/ScalaKata/blob/b80e8acc8bc466980e69220d1c6648cb6507da16/Eval/compile/src/main/scala/com.scalakata.eval/Compiler.scala#L13)

# php - 只允许通过应用程序访问 PHP 文件

> ID：15387221
> 
> 赞同：4
> 
> 时间：2013-03-13T13:49:41.533
> 
> 标签：php, ios, .htaccess

我有一个 PHP 文件，它查询我的数据库，然后以 XML 格式将信息返回给我的应用程序。现在，如果我只是转到浏览器中的 URL 并在 URL 中输入正确的参数，信息就会直接显示给我。有没有办法让 PHP 页面只能通过应用程序（iOS 和 Android）访问？我已经搜索过了，我唯一能找到的就是使该页面只能通过包含访问，但我看不出如果该人找出包含该文件的 php 页面，这将如何限制访问。任何建议表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:57:50.033

您对其施加的几乎所有限制基本上都归结为“在请求中放入只有应用程序才会发送的内容”。

基本方法是“保持 URL 机密”。如果只有应用程序知道它，那么只有应用程序可以向它发出请求。其他任何东西（密码、API 密钥、自定义 HTTP 标头、用户代理嗅探等）都只是围绕同一概念的复杂性。

通过 HTTPS 而不是 HTTP 发出请求将保护机密不被嗅探。

但是，没有什么可以使您免于反编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:55:43.593

您可以在应用程序内的客户端请求中添加自定义 http 标头，并带有质询代码。您的脚本检测标头并验证质询。如果验证通过，则执行脚本，否则返回 403 Forbidden。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:55:45.947

而不是。事实上，每个人都可以在他的浏览器信息中插入虚假数据，你不会发现这是 Windows 95 上的 Microsoft Internet Explorer 还是 Android 手机上的 Chrome。

您可以尝试通过 IP 号码来阻止，但这不是阻止应用程序，而是阻止用户。

我唯一的想法是使用一些用户/密码登录的东西，只有你的应用程序会知道，但它有自己的安全漏洞（比如中间人）。

# c++ - 标准向量，复制数据结构

> ID：15387231
> 
> 赞同：0
> 
> 时间：2013-03-13T13:50:13.577
> 
> 标签：c++, vector

我有以下课程。

```
class Row
{
   Table* parent_table;
   Row(Table* construct);
}
class Table
{
    std::vector<Row>;
} 
```

我创建一个`std::vector<Table> test;`, 并在循环中创建 Table 对象并将它们推回测试向量。问题是我在每一行中都丢失了 Table*。我需要指针，所以当我遍历我的行时，我知道它们属于哪个表。

有没有办法强制 std::vector，而不是在对象被推回时复制对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:53:13.597

而不是存储`Row`在 your `std::vector`, store`std::unique_ptr<Row>`或`std::shared_ptr<Row>`. 对于这类事情，这些往往就足够了（有更复杂的方法可以解决这个问题，例如存储原始指针（维护复杂）或滚动您自己的`pImpl`基于类，或使用自定义语义编写您自己的智能指针）。

`unique_ptr`仅支持移动，因此避免了您的复制问题。 `shared_ptr`而是支持共享所有权，这可能是您不需要的。我建议使用`unique_ptr`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:51:12.487

通过引用或指针推送元素。您正在推送副本，因此复制元素是 C++ 所能做的。我个人建议您使用如下指针向量：`std::vector<Row*>`

实际上，更安全和更清洁的方法是存储 shared_ptr-s 而不是裸指针，这样您就不必处理那么多内存管理。就像是：

`std::vector<std::shared_ptr<Row> >`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T13:57:08.663

你在问两个不相关的问题。请不要在一篇文章中这样做。一篇文章 - 一个问题。这使得回答变得非常容易。

第二：

> 有没有办法强制 std::vector，而不是在对象被推回时复制对象？

已经被别人回答了。

第一的：

> 我创建了一个 std::vector 测试；并在循环中创建了 Table 对象并将它们推回测试向量。问题是我在表内的行内丢失了表*。我需要指针，所以当我遍历我的行时，我知道它们属于哪个表。

很可能您的 ROW 不包含对包含它的表的任何反向引用。这样，当您传递行向量或行本身时，您会丢失有关谁拥有它的信息。您必须将 a-vector-of-rows 与 一起传递`table* owner`，或者将一行与一起传递`table* owner`，或者您必须使您的 Row 更加智能并强制所有 Rows 包含 a `table* owner`（即，让 Rows 包含对所有者的反向引用）

当然，反向引用可以是**任何形状**。它不需要是指针。您可以通过`Table&`、 a `shared_ptr<Table>`、 a`string tablename`或任何可以帮助您直接或通过某个管理器访问表的方法。重要的是，要么 Row 必须包含它，要么它必须单独传递但与行一起传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T13:54:22.507

在这种情况下，最简单的解决方案可能是将迭代器存储到您的表中：

```
class Row
{
    std:vector<Table>::iterator parent_table;
    Row(std:vector<Table>::iterator construct);
} 
```

# git - Qt Creator 上的 Git 超时

> ID：15387235
> 
> 赞同：3
> 
> 时间：2013-03-13T13:50:22.563
> 
> 标签：git, qt-creator

我正在使用 qt creator，但我无法将我的提交推送到 bitbucket。我可以从 qt creator 提交，但不能推送。我已经进行了一些研究，首先要看的地方是 SO，我很幸运地找到了这个[Using git push from Qt 创作者](https://stackoverflow.com/questions/5699684/using-git-push-from-qt-creator)

但是，我正在运行 ssh-agent.exe，我可以在 windows 上从 Git bash 提交和推送。当我从 qt creator 推送时出现此错误

> 命令“C:/Program Files/Git/cmd/git.cmd”在超时​​限制（60000 毫秒）内没有响应。

它是一个已知的错误[https://bugreports.qt.io/browse/QTCREATORBUG-4446](https://bugreports.qt.io/browse/QTCREATORBUG-4446)但已关闭以支持此错误[https://bugreports.qt.io/browse/QTCREATORBUG-2943](https://bugreports.qt.io/browse/QTCREATORBUG-2943)

我的 qt creator 版本是 2.6.2。

是否有解决方案来启用来自 qt 创建者的推送？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-25T10:55:06.773

如果要永久设置凭据，请将以下行添加到Windows 上的**%USERPROFILE%/_netrc**（或Linux 上的**$HOME/.netrc**）：

```
machine site.address.com login <user> password <pass> 
```

如果您希望 Qt Creator 提示您输入密码，请在 linux 上安装 ssh-askpass 或在 Windows 上安装[win-ssh-askpass](http://sourceforge.net/projects/winsshaskpass/)并确保在工具 -> 选项 -> 版本控制 -> 常规（SSH 提示命令）中设置它。

# android - 构造函数 MapView(Context, GoogleMapOptions) 未定义

> ID：15387239
> 
> 赞同：0
> 
> 时间：2013-03-13T13:50:30.993
> 
> 标签：android, google-maps

我正在尝试`MapView`使用选项在 Android 上创建一个但不起作用，因为编译器无法识别**构造函数`MapView(Context, GoogleMapOptions)`**。但是，根据[API Reference](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/MapView#public-constructors) ，这个构造函数确实存在。

这是有问题的代码：

```
private static Context context;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    //some code...
    context = getApplicationContext();

    GoogleMapOptions options = new GoogleMapOptions();
            options.mapType(GoogleMap.MAP_TYPE_SATELLITE)
            .compassEnabled(false)
            .rotateGesturesEnabled(false)
            .tiltGesturesEnabled(false);

    MapView mapView = new MapView(context, options);

    //...
    } 
```

# css - 从其他元素拖动时突出显示文本

> ID：15387242
> 
> 赞同：2
> 
> 时间：2013-03-13T13:50:37.140
> 
> 标签：css, internet-explorer-8, internet-explorer-7, highlighting

我仍然停留在 IE 7/8 中的突出显示问题上。我已经尝试[从这个问题应用 CSS](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)，将`onselectstart`事件更改为返回 false，添加属性`unselectable="on"`，以及我可以在 SO 上找到的任何其他内容。

然后我遇到了对[这个问题](https://stackoverflow.com/questions/6214128/text-unselectable-in-ie)的回答：

> 一旦元素不可选择，用户就不能从该元素中进行选择。但是，他们仍然可以通过从另一个不可选择的元素中拖动来选择元素的文本或框。
> 
> 我试图通过取消 myElement 上的各种事件（ondragenter、oncontrolselect、onmouseenter、onselectionchange ...）来解决这个问题，但它没有用。

这正是我想要做的。我有一个[拉斐尔](http://raphaeljs.com/)画布对象，用户可以拖动它来绘制。但是，如果他们离开画布，我不希望突出显示“外部”元素中的文本。我想知道是否有人为引用的问题找到了破解方法。我只在 IE 7/8 中遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:54:04.643

使用 JQUERY

```
$('#dragelement').onMouseDown(function(){
//YOUR CODE
}); 
```

# java - Apache POI - 使用 XSSFWorkbok + servlet 响应

> ID：15387243
> 
> 赞同：6
> 
> 时间：2013-03-13T13:50:42.577
> 
> 标签：java, excel, servlets, apache-poi, xlsx

我的 java 应用程序无法下载 XLSX 文件时遇到问题。

按照此链接中显示的示例：[使用 Apache POI 创建供用户下载的 excel 文件](https://stackoverflow.com/questions/11226603/create-an-excel-file-for-users-to-download-using-apache-poi-jsp)，我尝试了两种配置来下载/保存电子表格。

首先使用 .XLS 文件：

```
response.setContentType("application/ms-excel");
response.setHeader("Content-Disposition", "attachment; filename=testxls.xls");

HSSFWorkbook wb = new HSSFWorkbook();
HSSFSheet sheet = wb.createSheet();
HSSFRow row = sheet.createRow(0);
HSSFCell cell = row.createCell(0);
cell.setCellValue("Some text");

ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
wb.write(outByteStream);

byte[] outArray = outByteStream.toByteArray();
OutputStream outStream = response.getOutputStream();
outStream.write(outArray);
outStream.flush(); 
```

这行得通。

然后我尝试了一个 XLSX 文件：

```
response.setContentType("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
response.setHeader("Content-Disposition", "attachment; filename=testxls.xlsx");

XSSFWorkbook wb = new XSSFWorkbook();
XSSFSheet sheet = wb.createSheet();
XSSFRow row = sheet.createRow(0);
XSSFCell cell = row.createCell(0);
cell.setCellValue("Some text");

ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
wb.write(outByteStream);

byte[] outArray = outByteStream.toByteArray();
OutputStream outStream = response.getOutputStream();
outStream.write(outArray);
outStream.flush(); 
```

当我尝试这个时，我收到消息：“ **Excel 在 'testxls.xlsx' 中发现了不可读的内容。你想恢复这个工作簿的内容吗？......** ”

尽管有此消息，电子表格仍可正常打开，但我真的想删除此消息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-13T14:55:49.703

我知道这是一个非常古老的（6 年），但是在更新了一些旧代码以从 HSSF 移动到 XSSF 之后，我来到了这里，我的问题是缺少 jar xmlbeans-3.1.0.jar。错误已写入 TomCat localhost 日志“java.lang.ClassNotFoundException: org.apache.xmlbeans.XmlObject”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-01T07:10:02.037

使用这个JSP代码并成功生成excel文件。我已经通过数据库给excel文件输入了你也可以手动输入。

```
<%HSSFWorkbook wb = new HSSFWorkbook();
    HSSFSheet sheet = wb.createSheet();
       try {
        java.sql.Connection con;
        Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/custinfo","root","abc");
            Statement st= con.createStatement(); 
            out.println("hello world");
        ResultSet rs=st.executeQuery("select name ,state ,balance,description from customerdata where customerid='"+Id+"'"); 

        HSSFRow row = sheet.createRow((short)0);
        row.createCell((short)0).setCellValue("NAME");
        row.createCell((short)1).setCellValue("STATE");
        row.createCell((short)2).setCellValue("BALANCE");
        row.createCell((short)3).setCellValue("DESCRIPTION");
        while(rs.next())
        {
             out.println("hello world data");       
            HSSFRow row1 = sheet.createRow((short)i);
            row1.createCell((short)0).setCellValue(rs.getString("name"));
            row1.createCell((short)1).setCellValue(rs.getString("state"));
         row1.createCell((short)2).setCellValue(rs.getString(3));
         row1.createCell((short)3).setCellValue(rs.getString(4));
         i=i+1;
        sheet.autoSizeColumn((short)1); 

        }

       }
      catch(SQLException e) {
        out.println("SQLException caught: " +e.getMessage());
      }%>
    // create a small spreadsheet
    <%

    %>
    <% 

    ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
    wb.write(outByteStream);
    byte [] outArray = outByteStream.toByteArray();
    response.setContentType("application/ms-excel");
    response.setContentLength(outArray.length);
    response.setHeader("Expires:", "0"); // eliminates browser caching
    response.setHeader("Content-Disposition", "attachment; filename=testxls.xls");
    OutputStream outStream = response.getOutputStream();
    outStream.write(outArray);
    outStream.flush();

    %> 
```

# jquery - jquery.twitter.js - 更新以修复 twitter 提要 - 不明白

> ID：15387244
> 
> 赞同：0
> 
> 时间：2013-03-13T13:50:50.090
> 
> 标签：jquery, twitter

尝试更新我的网站 (frowey.com) 上的 twitter 提要，因为它已停止工作。不是网络开发人员，所以只需要计算我们足以保持网站正常运行。我已经下载了 Coda 的最新更新 jquery.twitter.js v1.6 并添加了 .js、min.js 和 css。我完全被困住了。提要默认值现在位于 .js 中，我已对其进行了更新，但在当前有效且未工作的提要中，我在网页 (frowey.com) 上有了默认值。CSS 现在是类而不是 ID。所以，我已经将我的 twitter DIV ID 更改为 twitted 并修改了 CSS（应用我的大小、颜色和字体等），但是查看 .js 它期望的类不是 DIV，所以 twitted DIV 没有做任何事情. 我知道的还不够多。修改后的 CSS 如下，我知道将 .twitted 设为 ID 是错误的，但我迷路了。

```
div#twitterframe {
    width: 252px;
}

div#twitted {
    width: 194px;
    margin-bottom: 2em;
    border: 1px solid #9c7d60;
}

.twitted h2 {
    margin: 0;
    padding: 0.4em 1em;
    font-family:Tahoma;
    font-size: 1.1em;
    font-weight: bold;
    color: #ffffff;
    background-color: #9c7d60;
}

.twitted p.preLoader {
    margin: 0;
    padding: 1em 1em 1em 3em;
    background: transparent url("images/loader.gif") 1em center no-repeat;
    /* generate your own loader gif: http://www.ajaxload.info */
}

.twitted ul#twitter_update_list {
    margin: 0;
    padding: 0 1em 0.5em 1em;
    list-style-type: none;
}

.twitted ul#twitter_update_list li {
    margin: 0;
    padding: 0.8em 0 1em 0;
    border-bottom: 1px solid #9c7d60;
    list-style-type: none;
}

.twitted ul#twitter_update_list li span {
    /* tweet content */
    display: block;
}

.twitted ul#twitter_update_list li span a {
    /* links in tweet content */
    color: #6EAC00;
}

.twitted ul#twitter_update_list li a {
    /* timestamp link */
    color: #aa9689;
}

.twitted ul#twitter_update_list li.firstTweet {
}

.twitted ul#twitter_update_list li.lastTweet {
    border-bottom: none;
}

.twitted p.profileLink {
    display: block;
    padding: 0.3em 1em;
    font-family:Tahoma;
    color: #ffffff;
    background-color: #9c7d60;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:02:33.753

您的 JSON 提要 URL 似乎已过时。

现在你需要解决这个问题的地方就在这里`jquery.twitter.js`

改变这个：

```
$.getScript("http://twitter.com/statuses/user_timeline/"+o.userName+".json?callback=twitterCallback2&count="+o.numTweets, function() { 
```

对此：

```
$.getScript("http://api.twitter.com/1/statuses/user_timeline/"+o.userName+".json?callback=twitterCallback2&count="+o.numTweets, function() { 
```

# ios - UIPickerView 在底部为视网膜 3.5 和 4 设置动画

> ID：15387247
> 
> 赞同：0
> 
> 时间：2013-03-13T13:50:51.267
> 
> 标签：ios, xcode4.5, uipickerview, uiviewanimation, ios6.1

有一个高度为 838 pt 的 UIScrollView (mainScrollView)，因此它比视网膜 3.5 和视网膜 4 的显示高度都大，用户可以向下滚动以查看所有内容。

想要从底部显示动画 UIPickerView，它应该始终保持在屏幕底部，与屏幕高度（视网膜 3.5 或 4）或 mainScrollView（838 pt）高度无关。

考虑到不同屏幕的措施，有没有办法获得“窗口”或“屏幕”高度并添加 UIPickerView？实现这一目标的正确方法应该是什么？

![在此处输入图像描述](../Images/73183dd5c37d3a3ce0810f2500b9e61c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:53:35.107

这将返回屏幕的框架

```
CGRect screenFrame = [[UIScreen mainScreen] applicationFrame]; 
```

有了这个，您可以相应地定位您的选择器！

# mustache - Mustache.js 复制模板

> ID：15387260
> 
> 赞同：0
> 
> 时间：2013-03-13T13:51:28.327
> 
> 标签：mustache

我的应用程序中有以下代码。第一次触发 click 事件时，模板会按预期添加到页面中。

但是第二次添加了两个模板副本，第三次添加了三个等等。所以在点击三下后，我实际上在 DOM 中有 6 个模板副本。

即使我在添加后将 template_view 设置为 null，它也会继续发生。

有人可以解释为什么会发生这种情况以及如何避免它吗？

```
template_path = "/templates/";
var template_html;  

$.get(template_path+"template.html", function(template) {
    template_html = template;
});     

$('#test_add').click(function(){
    var template_data = {name:'whatever'};  
    template_view = Mustache.to_html(template_html, template_data); 
    $(body).append(template_view);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:20:26.867

仍然不确定为什么会这样。最初虽然我的模板是一个静态 html 文件，但其中没有小胡子标签。添加了一些并传递一个数组以循环遍历它现在不再在每次调用函数时都复制模板

# asp.net - 在 Visual Studio 中查找 CSS 类引用的快捷方式？

> ID：15387265
> 
> 赞同：6
> 
> 时间：2013-03-13T13:51:43.067
> 
> 标签：asp.net, visual-studio-2010, c#-4.0

通常，您可以右键单击一个方法并选择“转到定义”(F12) 或“查找所有引用”(SHIFT+F12)。您甚至可以通过按 F12 从您的 aspx 页面转到 css 类的定义（如果您的光标位于 CssClass 名称上）。

从外部样式表中查找 css 类的所有引用是否有类似的快捷方式？我问的原因是我有一个样式表，其中包含一堆可能不再使用或不再使用的 css 类，我想知道哪些是实际被调用的，而不必逐行阅读我的代码。

另外，我尝试了快速查找 (CTRL+F) 工具来搜索特定的 css 类。即使对于正在使用的类，它也不会出现任何结果，所以要么我没有正确使用它，要么它不会因为任何原因检查我的 aspx 页面。（我怀疑是前者！）

PS我使用的是2010 Express版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:58:17.517

您可以使用 CTRL+SHIFT+F 调出“查找和替换”对话框。在那里，确保验证搜索范围设置为整个解决方案，然后尝试。

# leiningen - 在 ClojureScript 中使用 Cljsbuild 编译外部 JS 文件

> ID：15387269
> 
> 赞同：5
> 
> 时间：2013-03-13T13:51:55.620
> 
> 标签：leiningen, clojurescript, cljsbuild

我正在尝试编译我们使用 lein-cljsbuild 拥有的一些 JS 库，以将它们集成到我们的 ClojureScript 代码库中。首先，我在每个文件的顶部添加了一些 goog.provide，这些文件根据它们的命名空间（就像在 Java 中一样）在目录树中分层组织。那就是命名空间 abc 在 src-js/libs/a/b/c.js

我已将 JS 文件放在 src-js/libs 中项目的根目录中，并且我有以下 : lein-cljsbuild 的编译器选项：

```
{:id "prod",
 :source-paths ["src-cljs" "src-js"]
 :compiler
 {:pretty-print false,
  :libs ["libs/"]
  :output-to "resources/public/js/compiled-app.js",
  :optimizations :simple}} 
```

没有任何 JS 文件被编译到已编译的应用程序文件中。怎么了？

我还尝试将它们放入 resources/closure-js/libs 中，但没有成功。

我正在使用 lein-cljsbuild 0.3.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T18:47:27.283

首先，与某些文本中建议的不同，您不需要在 project.clj 的任何类路径配置语句中包含您的私有闭包库位置。因此，除非您的“source-paths:”语句中包含的“src/js”目录用于其他目的，否则您可以将其删除。

其次，为了引入您的私有闭包代码，唯一要添加到您的 project.clj 的是您所做的“libs：”引用；但与您输入的内容不同，该引用必须指向特定的 *.js 文件（或多个文件），而不仅仅是目录。因此，如果您要使用的库位于名为 test.js 的文件中并且位于 /src/js 目录中，则您的 libs: 条目将为：“src/js/test.js”。如果您想使用该插件的默认 :libs 目录选项，请参阅 cljs-build 发行说明。

第三，（看起来您已经知道这一点，但这让我感到困惑）如果您使用的是浏览器支持的 REPL（cljsbuild 的 repl-listen 选项），您仍然无法加载/引用/使用来自该 REPL 的私有库资产，直到您在已编译的 app.js 的源代码中的某处包含 :require 语句（例如“(ns testing (:require [myprivatelib]))”），然后您必须重新编译（lein cljsbuild once）并重新加载您的浏览器页面，其中包含指向已编译应用程序.js 的链接。这带来了该代码库。否则，你的浏览器 REPL 会一直坚持你的闭包库中提供的命名空间没有定义。

我希望这有帮助。

# android - Android DDMS 线程

> ID：15387270
> 
> 赞同：1
> 
> 时间：2013-03-13T13:51:56.613
> 
> 标签：android, ddms

DDMS 线程选项有时会显示我的代码中的哪些方法正在由线程运行，这非常有用。

但大多数情况下，它一直显示到处理程序线程的 Looper.loop() 之后才显示

如何查看线程一个接一个地执行的方法列表。

任何其他类似或更好的调试工具

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:04:03.360

您可以为此目的使用方法跟踪。[在这里](http://developer.android.com/tools/debugging/debugging-tracing.html)您可以阅读如何使用它。AFAIR，在 ddms 中有一个按钮，可让您开始方法分析，并在停止后打开透视图，您可以在其中查看结果。此外，您可以将[startMethodTracing()](http://developer.android.com/reference/android/os/Debug.html#startMethodTracing%28%29)放在要跟踪的方法之前和[stopMethodTracing()之后。](http://developer.android.com/reference/android/os/Debug.html#stopMethodTracing%28%29)

此链接[也](http://developer.android.com/tools/debugging/ddms.html)将对您有用。

# c++ - 编译器可以自动为最后一次使用左值生成 std ::move 吗？

> ID：15387271
> 
> 赞同：16
> 
> 时间：2013-03-13T13:52:00.753
> 
> 标签：c++, c++11, rvalue-reference

像这样的代码经常出现在 r-value 参考文章中：

[Dave Abrams：使用右值引用移动它](http://cpp-next.com/archive/2009/09/move-it-with-rvalue-references/)

```
void g(X);

void f()
{
    X b;
    g(b);              // still need the value of b
    …
    g( std::move(b) ); // all done with b now; grant permission to move
} 
```

编译器是否可以自动生成这种优化，即检测一个左值无论如何都会被破坏并且可以被移除，或者这是否违反标准，假设编译器不知道任何关于如何是的为 X 类实现的移动、复制或破坏？

如果允许这样的优化，它是由一些编译器在实践中执行的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T14:07:20.110

不。考虑：

```
using X = std::shared_ptr<int>;
void g(X);
void f() {
    X b = std::make_shared<int>();
    int &i = *b;
    g(b);              // last use of 'b'
    i = 5;
} 
```

一般而言，编译器不能假设更改副本、移动和析构函数的语义`X`将是合法的更改，而不对围绕使用的所有代码`b`（即整个`f`,`g`以及其中使用的所有类型）进行分析。

实际上，在某些情况下，可能需要进行全程序分析：

```
using X = std::shared_ptr<std::lock_guard<std::mutex>>;
std::mutex i_mutex;
int i;
void g(X);
void f() {
    X b = std::make_shared<std::lock_guard<std::mutex>>(i_mutex);
    g(b);              // last use of 'b'
    i = 5;
} 
```

如果`b`被移动，这将引入与同步访问`i`using的其他线程的数据竞争`i_mutex`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T14:05:27.497

*编译器能做到吗*？*仅作为显式语言扩展，因为标准不允许他们在没有它的情况下进行这样的优化。*

 **他们应该*这样做吗？不， 的含义`g(b)`应该基于 和 的`g`定义`b`。`g`应该是一些可调用的类型，它有一个`b`可以隐式转换成的重载。如果可以访问所有可用`g`s 的定义和 s 的定义`b`，您应该能够*准确*地确定将调用哪个函数。

现在允许这种“优化”意味着这是不可能的。`g(b)` *可能会*执行移动，也可能不会移动，具体取决于`g(b)`函数中的确切位置。这不是一件好事。

`return`被允许逃脱它，但只是因为它仍然具有相同的含义。`return b`将始终尝试从`b`if`b`是一个生命周期受限于函数范围的值类型中移动。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T14:00:22.830

> (...) 假设一个通用情况，编译器不知道如何为 X 类实现移动、复制或破坏？

不，不允许编译器基于信念进行优化。

为了清楚起见，这个问题与复制省略无关：编译器可能被允许省略一个副本，但他们不能将副本更改为随意移动。*

# php - 将数组键的值分配给同一数组 PHP 的另一个键

> ID：15387272
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:52:06.787
> 
> 标签：php, arrays, key

好的，所以这是一个超级新手问题......

创建数组时，有什么方法可以将键的值分配给同一数组中的另一个键？

例如：

```
<?php
$foobarr = array (
    0 => 'foo',
    1 => $foobarr[0] . 'bar',
);
?> 
```

在此示例`$foobarr[1]`中，保存值“bar”。

有什么办法可以做到这一点`$foobarr[1] == 'foobar'`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:54:27.283

不，您不能这样做，因为当您尝试使用`$foobarr[0]`.

您可以保存`'foo'`到另一个变量，然后使用它：

```
$foo = 'foo';
$foobarr = array (
    0 => $foo,
    1 => $foo . 'bar',
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:55:05.910

如果您单独分配键，您可以这样做：

```
$foobarr = array();
$foobarr[0] = 'foo';
$foobarr[1] = $foobarr[0] . 'bar'; 
```

等等。但不是在初始化程序中一次全部 - 数组在那里还不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:54:48.247

当然，您需要在外部引用它。

```
$foobarr = array (
    0 => 'foo'
);
$foobarr[1] = $foobarr[0] . 'bar'; 
```

# linux - 运行 make 时出错：缺少分隔符（您的意思是 TAB 而不是 8 个空格？）

> ID：15387273
> 
> 赞同：3
> 
> 时间：2013-03-13T13:52:15.453
> 
> 标签：linux, makefile, debian, phar

我正在尝试`phar`在我的 Debian VM 上安装 PHP 命令行工具，[这里](https://stackoverflow.com/questions/15373638/how-to-get-where-to-obtain-the-php-phar-command-line-tool?noredirect=1#comment21740410_15373638)如何描述：

> (1) 下载php-src，我假设它在/tmp/php/src
> 
> (2) 制作目录 /tmp/phar
> 
> (3) 另存为/tmp/php-src/ext/phar/Makefile [。](http://pastebin.com/UgpaRda1)
> 
> (4) cd /tmp/php-src/ext/phar
> 
> (5) 运行`sudo make`

现在在第 5 步之后我得到一个错误：

```
:/tmp/php-src/ext/phar# make
Makefile:11: *** missing separator (did you mean TAB instead of 8 spaces?).  Stop. 
```

据我所知，此错误消息可能有两个可能的原因：

1.  make 文件中的选项卡。我已经用`od -t c Makefile`. 该文件不包含制表符 ( `\t`)。

2.  它可能是 v3.81 的[错误](http://buildroot-busybox.2317881.n4.nabble.com/Makefile-904-missing-separator-did-you-mean-TAB-instead-of-8-spaces-Stop-td7469.html)，`make`需要[补丁](http://lists.busybox.net/pipermail/buildroot/2010-November/038615.html)或升级到（但不稳定：“[警告：此软件包来自**实验**发行版。](http://packages.debian.org/en/experimental/make) ”）v3.82。我已经[下载](http://packages.debian.org/de/experimental/amd64/make/download)并安装（`dpkg -i make_3.82-1_amd64.deb`）它，但错误仍然存​​在。

是什么导致错误？如何避免？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-24T16:15:40.147

（在评论中回答：请参阅[没有答案的问题，但在评论中解决了问题（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

@Beta 写道：

> 该行**应**以制表符开头，而不是一堆空格。

OP写道：

> 我已经用制表符替换了所有 8 个空格的序列，现在可以执行 make 脚本了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-30T15:34:37.607

我用了： `cat Makefile|sed "s/ /\t/" > Makefile`

# css - 单击链接后的白框

> ID：15387279
> 
> 赞同：0
> 
> 时间：2013-03-13T13:52:37.977
> 
> 标签：css, internet-explorer, firefox

![在此处输入图像描述](../Images/908d1c1a97570c8e0427430683df74ff.png)

嗨，单击具有 scrollTo 插件的链接后，出现了一些奇怪的框。我如何消除这种影响？，我认为它在集中注意力时会弹出。

我试过`user-select: none`了，但仍然不会消失。帮助表示赞赏。虽然在 Chrome 中这并没有显示出来并且可以干净地工作。不适合 FF 和 IE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:58:43.783

利用：

```
a:focus {
    outline: none;
} 
```

但是，您可能想要使用更具体的选择器 - 从元素中删除轮廓实际上会阻碍可访问性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:54:28.350

```
a{
  outline: 0;
}

a::-moz-focus-inner {
  border: 0; 
} 
```

# java - java.util.Properties 字段的 Spring JavaConfig

> ID：15387282
> 
> 赞同：16
> 
> 时间：2013-03-13T13:52:48.217
> 
> 标签：java, spring, spring-boot, inject

你能告诉我如何使用 Spring Javaconfig 将属性文件直接加载/自动装配到 java.util.Properties 字段吗？

谢谢！

**稍后编辑-仍在寻找答案：** 是否可以使用 Spring JavaConfig 将属性文件直接加载到 java.util.Properties 字段中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T15:03:21.743

XML基础方式：

在春季配置中：

```
<util:properties id="myProperties" location="classpath:com/foo/my-production.properties"/> 
```

在你的课堂上：

```
@Autowired
@Qualifier("myProperties")
private Properties myProperties; 
```

**仅限 JavaConfig**

好像有注解：

```
@PropertySource("classpath:com/foo/my-production.properties") 
```

用这个注释一个类会将文件中的属性加载到环境中。然后，您必须将 Environment 自动连接到类中以获取属性。

```
@Configuration
@PropertySource("classpath:com/foo/my-production.properties")
public class AppConfig {

@Autowired
private Environment env;

public void someMethod() {
    String prop = env.getProperty("my.prop.name");
    ...
} 
```

我看不到将它们直接注入 Java.util.properties 的方法。但是您可以创建一个使用此注释作为包装器的类，并以这种方式构建属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-30T10:07:15.147

声明一个`PropertiesFactoryBean`.

```
@Bean
public PropertiesFactoryBean mailProperties() {
    PropertiesFactoryBean bean = new PropertiesFactoryBean();
    bean.setLocation(new ClassPathResource("mail.properties"));
    return bean;
} 
```

旧代码具有以下配置

```
<bean id="mailConfiguration" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
  <property name="location" value="classpath:mail.properties"/>
</bean> 
```

如上所示，将其转换为 Java 配置非常简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-29T13:08:19.733

这是一个古老的主题，但也有一个更基本的解决方案。

```
@Configuration
public class MyConfig {
    @Bean
    public Properties myPropertyBean() {
        Properties properties = new Properties();
        properties.load(...);
        return properties;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-01T12:23:32.167

还有这种方法可以直接使用 xml 配置注入属性。上下文 xml 有这个

```
<util:properties id="myProps" location="classpath:META-INF/spring/conf/myProps.properties"/> 
```

而java类只是使用

```
@javax.annotation.Resource
private Properties myProps; 
```

瞧！！它加载。Spring 使用 xml 中的 'id' 属性绑定到代码中的变量名称。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-01T12:22:50.633

你可以试试这个

```
@Configuration  
public class PropertyConfig { 

 @Bean("mailProperties")  
 @ConfigurationProperties(prefix = "mail")   
  public Properties getProperties() {
     return new Properties();  
  }

} 
```

确保在 application.properties 中定义属性

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-30T09:53:45.613

**应用程序.yml**：

```
root-something:
    my-properties:
        key1: val1
        key2: val2 
```

您的类型安全 pojo：

```
import java.util.Properties;
import org.springframework.boot.context.properties.ConfigurationProperties;

@ConfigurationProperties(prefix = "root-something")
public class RootSomethingPojo {

    private Properties myProperties; 
```

您的容器配置：

```
@Configuration
@EnableConfigurationProperties({ RootSomethingPojo .class })
public class MySpringConfiguration { 
```

这会将键值对直接注入到`myProperties`字段中。

# c# - 在启用了 LowercaseUrls 的情况下保留路由参数中的大小写

> ID：15387299
> 
> 赞同：14
> 
> 时间：2013-03-13T13:53:56.543
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我`routes.LowercaseUrls = true;`在我的 MVC 4 应用程序中使用它，它运行良好。但是，参数也会小写，所以如果我有类似的路线

```
routes.MapRoute(
    name: "MyController",
    url: "foo/{hash}/{action}",
    defaults: new { controller = "MyController", action = "Details" }
); 
```

生成的链接

```
@Html.ActionLink("my link", "Details", new { hash=ViewBag.MyHash }) 
```

URL 的 - 部分也将`{hash}`小写，例如，如果`ViewBag.MyHash = "aX3F5U"`生成的链接将`/foo/ax3f5u`不是`/foo/aX3F5U`

有没有办法强制 MVC 只小写控制器和动作部分？

对于旧版本的 MVC，要走的路似乎是实现的自定义子类`Route`，但是我不知道如何/在哪里实例化它，因为路由构造函数的签名`MapRoute`与我希望有成为一种更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:24:49.203

我认为具有自定义子类的解决方案`Route`将足够好且简单，但同时有点难看:)

您可以添加`CustomRoute`at`RegisterRoute`方法`RouteConfig.cs`。添加以下代码而不是`routes.MapRoute`

```
var route = new CustomRoute(new Route(
  url: "{controller}/{action}/{id}",
  defaults: new RouteValueDictionary() { 
    { "controller", "Home" }, 
    { "action", "Index" }, 
    { "id", UrlParameter.Optional }
  },
  routeHandler: new MvcRouteHandler()
));
routes.Add(route); 
```

具体的实现`CustomRoute`可能如下所示：

```
public class CustomRoute : RouteBase
{
  private readonly RouteBase route;

  public CustomRoute(RouteBase route)
  {
    this.route = route;
  }

  public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
  {
    values = new RouteValueDictionary(values.Select(v =>
    {
      return v.Key.Equals("action") || v.Key.Equals("controller")
        ? new KeyValuePair<String, Object>(v.Key, (v.Value as String).ToLower())
        : v;
    }).ToDictionary(v => v.Key, v => v.Value));

    return route.GetVirtualPath(requestContext, values);
  }

  public override RouteData GetRouteData(HttpContextBase httpContext)
  {
    return route.GetRouteData(httpContext);
  }
} 
```

但是，这不是最佳实现。一个完整的示例可以使用扩展`RouteCollection`和自定义`Route`子项的组合，以使其尽可能接近原始`routes.MapRoute(...)`语法：

**小写路由类：**

```
public class LowercaseRoute : Route
{
    public LowercaseRoute(string url, IRouteHandler routeHandler) : base(url, routeHandler) { }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
    {
        values = new RouteValueDictionary(values.Select(v =>
        {
            return v.Key.Equals("action") || v.Key.Equals("controller")
              ? new KeyValuePair<String, Object>(v.Key, (v.Value as String).ToLower())
              : v;
        }).ToDictionary(v => v.Key, v => v.Value));

        return base.GetVirtualPath(requestContext, values);
    }
} 
```

**RouteCollectionExtensions 类：**

```
public static class RouteCollectionExtensions
{
    [SuppressMessage("Microsoft.Design", "CA1054:UriParametersShouldNotBeStrings", MessageId = "2#", Justification = "This is not a regular URL as it may contain special routing characters.")]
    public static Route MapLowercaseRoute(this RouteCollection routes, string name, string url)
    {
        return MapLowercaseRoute(routes, name, url, null /* defaults */, (object)null /* constraints */);
    }

    [SuppressMessage("Microsoft.Design", "CA1054:UriParametersShouldNotBeStrings", MessageId = "2#", Justification = "This is not a regular URL as it may contain special routing characters.")]
    public static Route MapLowercaseRoute(this RouteCollection routes, string name, string url, object defaults)
    {
        return MapLowercaseRoute(routes, name, url, defaults, (object)null /* constraints */);
    }

    [SuppressMessage("Microsoft.Design", "CA1054:UriParametersShouldNotBeStrings", MessageId = "2#", Justification = "This is not a regular URL as it may contain special routing characters.")]
    public static Route MapLowercaseRoute(this RouteCollection routes, string name, string url, object defaults, object constraints)
    {
        return MapLowercaseRoute(routes, name, url, defaults, constraints, null /* namespaces */);
    }

    [SuppressMessage("Microsoft.Design", "CA1054:UriParametersShouldNotBeStrings", MessageId = "2#", Justification = "This is not a regular URL as it may contain special routing characters.")]
    public static Route MapLowercaseRoute(this RouteCollection routes, string name, string url, string[] namespaces)
    {
        return MapLowercaseRoute(routes, name, url, null /* defaults */, null /* constraints */, namespaces);
    }

    [SuppressMessage("Microsoft.Design", "CA1054:UriParametersShouldNotBeStrings", MessageId = "2#", Justification = "This is not a regular URL as it may contain special routing characters.")]
    public static Route MapLowercaseRoute(this RouteCollection routes, string name, string url, object defaults, string[] namespaces)
    {
        return MapLowercaseRoute(routes, name, url, defaults, null /* constraints */, namespaces);
    }

    [SuppressMessage("Microsoft.Design", "CA1054:UriParametersShouldNotBeStrings", MessageId = "2#", Justification = "This is not a regular URL as it may contain special routing characters.")]
    public static Route MapLowercaseRoute(this RouteCollection routes, string name, string url, object defaults, object constraints, string[] namespaces)
    {
        if (routes == null)
        {
            throw new ArgumentNullException("routes");
        }
        if (url == null)
        {
            throw new ArgumentNullException("url");
        }

        Route route = new LowercaseRoute(url, new MvcRouteHandler())
        {
            Defaults = CreateRouteValueDictionary(defaults),
            Constraints = CreateRouteValueDictionary(constraints),
            DataTokens = new RouteValueDictionary()
        };

        if ((namespaces != null) && (namespaces.Length > 0))
        {
            route.DataTokens["Namespaces"] = namespaces;
        }

        routes.Add(name, route);

        return route;
    }

    private static RouteValueDictionary CreateRouteValueDictionary(object values)
    {
        var dictionary = values as IDictionary<string, object>;
        if (dictionary != null)
        {
            return new RouteValueDictionary(dictionary);
        }

        return new RouteValueDictionary(values);
    }
} 
```

您现在可以使用`MapLowercaseRoute`代替`MapRoute`，所以

```
routes.MapRoute(
    name: "MyController",
    url: "foo/{hash}/{action}",
    defaults: new { controller = "MyController", action = "Details" }
); 
```

简单地变成

```
routes.MapLowercaseRoute(
    name: "MyController",
    url: "foo/{hash}/{action}",
    defaults: new { controller = "MyController", action = "Details" }
); 
```

暴露期望的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T11:52:45.207

这是一种简单的方法，

```
public class MyRoute : Route
{
    public MyRoute(string url, object defaults): base(url, new RouteValueDictionary(defaults), new MvcRouteHandler())
    { 
    }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
    {
        if (values["action"] != null)
            values["action"] = values["action"].ToString().ToLowerInvariant();
        if (values["controller"] != null)
            values["controller"] = values["controller"].ToString().ToLowerInvariant();
        return base.GetVirtualPath(requestContext, values);
    }
}

routes.Add("Default",new MyRoute("{controller}/{action}/{id}",
                new { controller = "Home", action = "Index", id = MyUrlParameter.Optional })); 
```

有关详细信息，请参阅[此博客文章](http://weblogs.asp.net/imranbaloch/archive/2011/12/19/solving-duplicate-content-issue-in-asp-net.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:38:10.440

如果您查看私有`RouteCollection.NormalizeVirtualPath`方法，您会发现它只是使用`virtualPath.ToLowerInvariant()`. 所以没有办法处理它。即使您创建自己的路线，它也会小写。

但是您可以做的是在 '#' 符号 ie 之后添加哈希`"foo/{action}/#{hash}"`。我没试过，但它应该工作。只看`NormalizeVirtualPath`执行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-17T06:08:07.547

就像 1.2.3 一样简单，

看这个例子

```
 routes.MapRouteLowercase( // changed from routes.MapRoute
       "Default",
       "{controller}/{action}/{id}",
       new { controller = "Home", action = "Index", id = UrlParameter.Optional }
   ); 
```

通过 Nuget 下载和安装很简单，我使用它。 ***`PM> Install-Package LowercaseRoutesMVC`***

[http://lowercaseroutesmvc.codeplex.com/](http://lowercaseroutesmvc.codeplex.com/)

# c# - css 对 argb 的不透明度

> ID：15387300
> 
> 赞同：0
> 
> 时间：2013-03-13T13:54:00.143
> 
> 标签：c#, asp.net, css, image

我正在尝试在图像上设置水印（字符串）和具有一定不透明度（css属性）的pdf（带有itext）

所以，不透明度是一个浮点类型，一切都适用于pdf，因为它有方法

```
PdfGState gstate = new PdfGState();
gstate.FillOpacity = textOpacity; 
```

一切都很好，但是对于我正在使用的图像：

```
Color color = Color.FromArgb(int alpha, Color color) 
```

所以我的问题是如何将 css 不透明度转换为 alpha？

我在某处找到了公式不透明度 = (255 - 透明度) / 255.0

它是否正确？因为当我的不透明度为 1f（无不透明度）时，alpha 将为 0 导致完全透明的文本......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:02:30.590

公式只是小错误。C# 使用 0 到 255 之间的值。您使用的值是 0..1，所以公式必须是这样的：

```
alpha = (int)(textOpacity*255); 
```

# opengl-es - 如何在没有 GLSurfaceRenderer 的情况下使用 OpenGL ES 渲染到 Surface

> ID：15387303
> 
> 赞同：6
> 
> 时间：2013-03-13T13:54:02.547
> 
> 标签：opengl-es, android-ndk, rendering

`android.view.Surface`我需要在 Android 本机 C++ 代码中将解码的视频帧绘制到一个对象中。

我了解执行此操作的常用方法是实现`GLSurfaceView.Renderer`接口并从`onDrawFrame()`. 但我不能使用它，我需要将 Surface 对象传递给本机方法并从那里处理它。

我计划使用 OpenGL ES API 来完成所有渲染工作，因为它是跨平台的。但我不知道 Surface 对象是从哪里来的。

我已经看到了几个使用的例子`ANativeWindow_fromSurface()`。如果我没有被迫使用 OpenGL，我想我可以这样做。

那么，我在本机代码中在哪里“设置”我的 Surface 对象，所以我可以很好地渲染我的场景帧？

**编辑：**好的，我想我只是不知道[EGL 标准](http://www.khronos.org/egl)，这似乎是我在本案中所需要的。

但是，我仍在寻找一种方法来将`android.view.Surface`对象“映射”或“转换”为由 EGL 上下文处理的任何结构，我假设它是`EGLNativeWindowType`，而不需要访问任何 Android 特定的 API。

提前致谢。

# java - 使用 SPRING 在 JSP 中生成下拉框

> ID：15387304
> 
> 赞同：1
> 
> 时间：2013-03-13T13:54:03.483
> 
> 标签：java, spring, jsp, model-view-controller

再会。我有一个 JSP 视图和一个控制器，它为它提供了一个要填充的模型。这是我的控制器的 JSP 方法。

```
@RequestMapping("/seller")
public ModelAndView seller() {
    if(isUserInRole("SELLER_ROLE"))
    {
        List<SellerStatistics> entities = sellerService.getAllStatistics().getContent();
        List<String> statuses = sellerService.getStatuses();
        Map<String, Object> model = new HashMap<String, Object>();
        model.put("gridRows", entities);
        model.put("statuses", statuses);
        return new ModelAndView("seller",model);
    }
    return new ModelAndView("login");
} 
```

gridRows 包含必须插入到 JSP 表中的信息。该表中的一列是“状态”。状态必须是一个下拉框才能更改此行的状态。

这是我的 JSP：

```
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ include file="header.jsp" %>
<div class="container">
    <div class="row">
        <div class="span12">
            <h1>Sellers welcome</h1>

            <div class="top-menu">
                <span>Период</span><input type="text">
                <span>Период</span><input type="text">
                <span>Период</span><input type="text">
                <span>Период</span><input type="text">
                <span>Период</span><input type="text">
                <input type="button">
            </div>
            <table class="table table-bordered table-hover table-condensed">
                <thead>
                <tr>
                    <th>id</th>
                    <th>Email</th>
                    <th>Телефон</th>
                    <th>Дата регистрации</th>
                    <th>Сайт откуда первый раз пришел</th>
                    <th>Первый поисковый запрос</th>
                    <th>Оплата</th>
                    <th>Счет/Реализация/Счет фактура</th>
                    <th>Журнал посещений</th>
                    <th>Журнал коммуникаций</th>
                    <th>Статус</th>
                </tr>
                </thead>
                <c:forEach items="${gridRows}" var="cur">
                    <tr>
                        <td>${cur.id }</td>
                        <td>${cur.email }</td>
                        <td>${cur.phone}</td>
                        <td><fmt:formatDate pattern='dd.MM.yyyy HH:mm' value='${cur.registrationDate}'/></td>
                        <td><a href="${cur.referer}">${cur.referer}</a></td>
                        <td>${cur.searchQuery}</td>
                            <%--Payments--%>
                        <td>
                            <c:forEach items="${cur.payments}" var="payment">
                                <fmt:formatDate pattern='dd.MM.yyyy' value='${payment.created}'/>
                                &nbsp;&nbsp;
                                ${payment.value} рублей
                            </c:forEach>
                        </td>

                        <td>${cur.aii}</td>
                        <td>${cur.visits}&nbsp;страниц<br><a
                                href="/seller/browsing_history?id=${cur.id}">Подробно</a></td>
                        <td>
                            <c:forEach items="${cur.communicationLog}" var="communication">
                                <a href="#">${communication.time}&nbsp;&nbsp;${communication.description}</a>
                            </c:forEach>
                        </td>
                        <td>
                             <!--Status must be here-->
                        </td>
                    </tr>
                </c:forEach>
            </table>
        </div>
    </div>
</div> 
```

如何在 JSP 中创建下拉框，以及如何为每一行选择当前值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:58:59.457

试试这个：

```
<select>  
    <c:forEach var="item" items="${statuses}">  
        <c:choose>
            <c:when test="${cur.status == item}">
                <option selected>${item}</option>
            </c:when>
            <c:otherwise>
                <option>${item}</option>
            </c:otherwise>
        </c:choose>
    </c:forEach>  
</select> 
```

# objective-c - 目标C按字节比较2个文件

> ID：15387308
> 
> 赞同：2
> 
> 时间：2013-03-13T13:54:16.247
> 
> 标签：objective-c

此代码应加载 2 个文件并按字节比较它们并输出差异，但由于某种原因，即使使用相同的文件并且似乎忽略了我的格式，它也会输出差异。

任何帮助将不胜感激。

谢谢。

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {
    NSString *pathA = [[NSBundle mainBundle] pathForResource:@"original/testfile" ofType:@""];
    NSFileHandle *fileA = [NSFileHandle fileHandleForReadingAtPath:pathA];
    NSString *pathB = [[NSBundle mainBundle] pathForResource:@"updated/testfile" ofType:@""];
    NSFileHandle *fileB = [NSFileHandle fileHandleForReadingAtPath:pathB];
    unsigned long long sizeofFile = [fileA seekToEndOfFile];
    [fileA seekToFileOffset:0];
    [fileB seekToFileOffset:0];
    unsigned int fileaValue;
    unsigned int filebValue;
    for (int i = 0; i <= sizeofFile; i++) {
        [[fileA readDataOfLength:1] getBytes:&fileaValue];
        [[fileB readDataOfLength:1] getBytes:&filebValue];
        if (fileaValue != filebValue)
            NSLog(@"File A %02x File B %02x at offset %u:",fileaValue,filebValue,i);
    }
    [fileA closeFile];
    [fileB closeFile];
    }
return 0;
} 
```

示例输出

```
 2013-03-13 13:50:50.580 compareFile[12055:303] File A 7fce File B 5fbff9ce at offset 0:
 2013-03-13 13:50:50.581 compareFile[12055:303] File A 7ffa File B 5fbff9fa at offset 1: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:59:43.313

我认为问题可能是您选择的数据类型（如果您想要一个字节，则使用`uint8_t`），并且几乎可以肯定您`<=`在`for`循环中的使用：

```
uint8_t fileaValue;
uint8_t filebValue;
for (unsigned i = 0; i < sizeofFile; i++) {   // NOT <=
    [[fileA readDataOfLength:1] getBytes:&fileaValue];
    [[fileB readDataOfLength:1] getBytes:&filebValue];
    if (fileaValue != filebValue)
        NSLog(@"File A %02x File B %02x at offset %u:", (unsigned)fileaValue, (unsigned)filebValue,i);
} 
```

（请注意`NSLog()`调用中的强制转换以正确打印值）。

`readDataOfLength`鉴于文件 I/O 是错误的常见原因，还要检查是否成功。

# c# - 为调车场算法建模

> ID：15387313
> 
> 赞同：9
> 
> 时间：2013-03-13T13:54:28.177
> 
> 标签：c#, algorithm, oop, design-patterns

背景：

我正在尝试实现[Shunting-Yard Algorithm](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)的变体，但不是以 RPN 表示法输出表达式，而是希望它在推入令牌时自行更新，以便可以实时显示结果（就好像你正在按下计算器上的按钮，并且需要在每个按钮后更新显示）。

这是Shunting-Yard类...

```
public class ShuntingYard
{
   private Stack<double> _operands;
   private Stack<Operation> _operations;

   public ShuntingYard()
   {
      this._operands = new Stack<double>();
      this._operations = new Stack<double>();
   }
} 
```

课程将`Operation`类似于...

```
public abstract class Operation
{
   public abstract void Evaluate(Stack<double> operands, Stack<Operation> operations);
} 
```

该`Evaluate()`函数相应地更新堆栈，“当前值”将是`_operands.Peek()`

以下是我到目前为止的一些“操作”：

`public class NullaryOperation : Operation { }`
例如 Pi、e 等。
只需将常量推到`_operands`

`public class UnaryOperation : Operation { }`
例如 SquareRoot、Sine、Cosine 等。从 中弹出
一个数`_operands`，评估并将结果推送到`_operands`

`public class BinaryOperation : Operation { }`
例如 +、-、*、/ 等。
检查优先级，根据需要进行评估，将结果推送到`_operands`

* * *

问题是：作为算法的一部分，
我需要将开括号`(`和闭括号`)`推入堆栈的能力。`_operations`此外，当我添加右括号时，我需要不断弹出操作数/操作，直到遇到左括号。

我想避免这样的检查（检查对象类型）：

`while (operations.Peek().GetType() != typeof(OpenParen)) { ... }`

我想避免在以下位置添加这样的方法`Operation`：

`public abstract bool IsOpenParen();`

我可以做这样的事情......

```
public abstract class Operation 
{
   public enum OperationType { Nullary, Unary, Binary, OpenParen, CloseParen };
   public abstract OperationType GetOperationType() { };

   public abstract void Evaluate(Stack<double> operands, Stack<Operation> operations);
} 
```

但是要求所有子类型将它们的类型指定为枚举似乎是一个糟糕的设计。

* * *

我应该如何建模，以便在插入括号时跟踪和处理括号？

附带说明：将括号视为“操作”对我来说似乎没有多大意义。但是，维基百科上的算法以这种方式对待它们，我想不出任何其他方式来跟踪它们相对于其他“真实”操作的位置。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:08:31.907

```
public class Operand {
    private ShuntingYard sy;
    private double d;
    public Operand(double v) {
        d=v;
        sy=null;
    }
    public Operand() {
        d=NaN(); // I'm inept at C#, this should mean "d" is unused
        sy=new ShuntingYard();
    }
}
public class ShuntingYard {
    private Stack<Operand> _operands;
    private Stack<Operation> _operations;

   public ShuntingYard()
   {
      this._operands = new Stack<Operand>();
      this._operations = new Stack<Operation>();
   }
} 
```

StarPilot 给出了正确的建议，将另一个`ShuntingYard`放入堆栈，但正确的方法是将 a`ShuntingYard`作为操作数，而不是作为操作。现在，一旦出现嵌套`ShuntingYard`，所有后续操作数和操作都会传递给它。应该做好准备，以便 a`ShuntingYard`接收右括号操作，顶级的应该抛出错误，内部的应该评估自己并用`Operand`其评估结果替换包含。

# internet-explorer - 强制 IE10 在 IE10 兼容性视图中运行？

> ID：15387325
> 
> 赞同：31
> 
> 时间：2013-03-13T13:55:14.353
> 
> 标签：internet-explorer, internet-explorer-10

我有一个在 IE10 中损坏但在 IE10 兼容性视图中运行良好的应用程序。快速谷歌搜索结果

```
<meta http-equiv="X-UA-Compatible" content="IE=8">
<!-- plus variations such as emulate, quirks, 7, 8, 9 ---> 
```

标签。标签上的一些 MS 文档在[这里](http://msdn.microsoft.com/en-us/library/ie/jj676915.aspx)。如果按 F12，您可以看到它更改了文档模式。我需要将**浏览器模式**更改为 Internet Explorer 10 兼容性视图。有没有可以做到这一点的标签？

![在此处输入图像描述](../Images/74541d252f6dad5b2379fd830c6be390.png)

**更新** 我需要提一下，我已经尝试了以下所有文档类型，但它们都不起作用。我认为让它在 IE10 中工作的唯一方法是使用兼容性视图。

```
<!--
    <!DOCTYPE html>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
    TRIED NO DOCTYPE AT ALL TOO
--> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-10T07:29:21.823

如果要*在浏览器本身*而*不是在 html*中设置兼容模式，请执行以下操作

1.  打开 IE 10
2.  按 ALT 键调出 IE 菜单栏
3.  点击工具菜单
4.  单击兼容性视图设置。
5.  点击复选框；在兼容性视图中显示所有网站 **或**
6.  仅将所需网站添加到兼容性视图

如下图所示。然后该网站应以 IE 10 兼容性视图打开。

![在此处输入图像描述](../Images/2fc09c79ca5d8e8e7f7880e57a0b128f.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-10T07:51:59.127

你可以试试 ：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" > 
```

就像您之前尝试过的一样，但要小心：

**似乎 X-UA-Compatible 标签必须是 <head> 部分中的第一个标签**

如果这个结论是正确的，那么我相信它在 Microsoft 的 blogs/msdn 中没有记录（如果有记录，那么它在文档中的表现还不够好）。确保这是强制 IE9 成功切换到 IE8 模式中的第一个元标记

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-10T05:10:40.610

我遇到了完全相同的问题，这个 - "meta http-equiv="X-UA-Compatible" content="IE=7">" 在 IE8 和 IE9 中效果很好，但在 IE10 中效果不佳。.NET 2.0 和 .NET 4 附带的服务器浏览器定义文件中存在一个错误，即它们包含特定范围浏览器版本的定义。但是某些浏览器（如 IE 10）的版本不再在这些范围内。因此，ASP.NET 将它们视为未知浏览器，并默认为下层定义，这有一定的不便，比如它不支持 JavaScript 之类的功能。

感谢 Scott Hanselman 的修复。

链接在这里 -

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

此 MS KP 修复程序只是将丢失的文件添加到您服务器上的 asp.net。我安装了它并重新启动了我的服务器，它现在可以正常工作了。我原以为 MS 会给这个修复更广泛的分布。

瑞克

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-28T00:28:19.693

我有同样的问题。问题是 MSIE 10 中的一个错误，因此告诉人们解决他们的问题是没有帮助的。也不是告诉您网站的访问者将您的网站添加到兼容性视图中，bleh。就我而言，问题在于以下代码不显示文本：

```
document.write ('<P>'); 
document.write ('Blah, blah, blah... ');
document.write ('</P>'); 
```

经过多次试验和错误，我确定删除 <P> 和 </P> 标记会导致文本正确显示在页面上（因此，问题在于文档模式而不是浏览器模式，至少在我的情况下）。当 userAgent 是 MSIE 时删除 <P> 标记不是我想要放入我的页面的“修复”。

正如其他人所说，解决方案是：

```
<!DOCTYPE HTML whatever doctype you're using....> 
<HTML>
 <HEAD>
  <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8">
  <TITLE>Blah... 
```

是的，元标记必须是 HEAD 之后的第一个标记。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-30T19:17:14.093

虽然您应该修复您的网站，使其在没有兼容性视图的情况下工作，但请尝试将`X-UA-Compatible`元标记作为开头之后的第一件事`<head>`，*在*标题之前

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-05T01:23:42.757

看这里：

[https://softwareengineering.stackexchange.com/questions/194687/how-the-compatibility-view-in-ie-works-behind-the-scenes](https://softwareengineering.stackexchange.com/questions/194687/how-the-compatibility-view-in-ie-works-behind-the-scenes)

利用

`<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE10">`

我刚刚试了一下，在调试窗口中显示了 IE10 兼容模式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-28T08:02:19.160

该`X-UA-Compatible` `meta`元素仅更改文档模式，而不更改浏览器模式。浏览器模式是在请求页面之前选择的，因此无法包含任何标记、JavaScript 等来更改它。虽然文档模式回退到渲染引擎的旧标准和怪异模式，但浏览器模式只是改变了浏览器识别方式等内容，例如用户代理字符串。

如果您想为所有用户更改浏览器模式（而不是在工具中或通过设置手动更改），唯一的方法 (AFAICT) 是将您的网站添加到 Microsoft 的 Copat 视图列表中。这是由 Microsoft 维护的，以将覆盖应用于中断的站点。有[关于如何从兼容视图列表中删除您的站点的信息](http://msdn.microsoft.com/en-us/library/gg699485%28v=vs.85%29.ASPX#removal)，但我找不到请求添加您的信息。

但是，首选方法是先尝试修复站点上的任何问题，因为当您不使用最新的文档和浏览器模式运行时，您无法利用浏览器的改进，例如提高性能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-20T04:41:00.850

你应该试试 IE 5 quirks compatible mod（是默认的 IE10 兼容性视图）

```
<meta http-equiv="X-UA-Compatible" content="IE=5"> 
```

重要：设置在 iframe 结构的顶部（如果您使用 iframe 结构）

更多信息[1](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx) , [2](http://blogs.msdn.com/b/ie/archive/2011/12/14/interoperable-html5-quirks-mode-in-ie10.aspx)

# jquery - 从 iframe 内触发顶级操作

> ID：15387326
> 
> 赞同：0
> 
> 时间：2013-03-13T13:55:19.440
> 
> 标签：jquery, html, css, iframe

我有一个应用程序加载在`iframe`. 我目前正在做的事情如下：

1.  顶部文档创建一个`div`带有旋转轮的
2.  开始`iframe`加载
3.  加载 iframe 后，立即`onload`触发事件以`div`使用旋转轮隐藏
4.  但`iframe`仍然必须加载资产（CSS，JS，...）

我遇到的问题是第 4 步很长，我想继续显示纺车（`onload`从 iframe 定义中删除事件）。一旦`iframe`完全加载，我想在顶级文档中触发一个事件。

如何从内部触发顶级事件`iframe`？`jQuery`会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:02:48.727

您可以在 iframe 代码中尝试此操作：

```
$(document).ready(function () {
         parent.hideSpinningWheel();
}); 
```

您将必须创建一个名为 hideSpinningWheel 的函数，它可以在您的父页面中执行您想要的操作。

# excel - 公式不会自动计算

> ID：15387327
> 
> 赞同：2
> 
> 时间：2013-03-13T13:55:26.133
> 
> 标签：excel, apache-poi, jxls

我有一张大表，上面有很多公式，它们之间有依赖层次结构。它以具有日期值的单元格开头。然后，单元格 x:y（和其他）具有取决于此日期的公式。然后单元格 w:z（和其他）有一个取决于单元格 x:y 的公式。等等...

这个带有日期值的主单元格是使用 apache poi 填充的。

现在我的问题是：当我打开生成的 excel 文件时，日期在那里，但没有计算公式。他们都有错误“ `A value used in the formula is of the wrong data type`”。似乎当公式尝试自我评估时，日期还不存在。

解决方案： 1) 如果我单击单元格，然后按 ENTER，则公式计算正确。但是我必须对所有细胞都这样做。2）我单击日期单元格，将其复制，然后将其粘贴到同一位置，并且对工作表中的所有公式进行评估！3) 我可以在我的应用程序中迭代所有单元格，使用 FormulaEvaluator 类中的 evaluateFormulaCell 方法评估每个单元格。但是我有很多公式，而且性能很糟糕。

有人对此有解决方案吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:14:52.940

您的日期值未被 excel 公式识别为日期，您可以做的是让另一个单元格 dat 将首先采用`DATEVALUE()`使用 Apache poi 填充的单元格的日期值。

然后将您的第一级公式指向该单元格，而不是使用 Apache poi 填充的单元格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T11:59:39.350

因为 Excel 不会自动计算，所以只需更改此设置。

Excel 2010：文件 -> 选项 -> 公式：查找工作簿计算，然后更改为自动。

它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:59:35.560

为了解决这个问题，我更改了模板中的所有公式，以使用以下 sintax 代替常规公式 sintax (=SUM(A:D))：$[SUM(A:D)]

[http://jxls.sourceforge.net/reference/formulas.html](http://jxls.sourceforge.net/reference/formulas.html)

# r - R / Perlin噪声中的真实模拟高程数据

> ID：15387328
> 
> 赞同：6
> 
> 时间：2013-03-13T13:55:26.580
> 
> 标签：r, perlin-noise

有谁知道如何在 R 中创建模拟栅格高程数据集 - 即现实高程值的 2d 矩阵？R`jitter`似乎不合适。在 Java/Processing 中，该`noise()`函数使用[Perlin 噪声](http://en.wikipedia.org/wiki/Perlin_noise)算法来实现这一点，例如：

```
size(200, 200);
float ns = 0.03; // for scaling
for (float i=0; i<200; i++) {
  for (float j=0; j<200; j++) {
    stroke(noise(i*ns, j*ns) * 255);
    point(i, j);
  }
} 
```

![在此处输入图像描述](../Images/fc0518d9ea53146d3770a389795e97fa.png)

但是我在 R 文献中没有发现对 Perlin 噪声的引用。提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T14:58:54.533

这是 R 中的一个实现，遵循 [http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html中的解释](http://webstaff.itn.liu.se/~stegu/TNM022-2005/perlinnoiselinks/perlin-noise-math-faq.html)

```
perlin_noise <- function( 
  n = 5,   m = 7,    # Size of the grid for the vector field
  N = 100, M = 100   # Dimension of the image
) {
  # For each point on this n*m grid, choose a unit 1 vector
  vector_field <- apply(
    array( rnorm( 2 * n * m ), dim = c(2,n,m) ),
    2:3,
    function(u) u / sqrt(sum(u^2))
  )
  f <- function(x,y) {
    # Find the grid cell in which the point (x,y) is
    i <- floor(x)
    j <- floor(y)
    stopifnot( i >= 1 || j >= 1 || i < n || j < m )
    # The 4 vectors, from the vector field, at the vertices of the square
    v1 <- vector_field[,i,j]
    v2 <- vector_field[,i+1,j]
    v3 <- vector_field[,i,j+1]
    v4 <- vector_field[,i+1,j+1]
    # Vectors from the point to the vertices
    u1 <- c(x,y) - c(i,j)
    u2 <- c(x,y) - c(i+1,j)
    u3 <- c(x,y) - c(i,j+1)
    u4 <- c(x,y) - c(i+1,j+1)
    # Scalar products
    a1 <- sum( v1 * u1 )
    a2 <- sum( v2 * u2 )
    a3 <- sum( v3 * u3 )
    a4 <- sum( v4 * u4 )
    # Weighted average of the scalar products
    s <- function(p) 3 * p^2 - 2 * p^3
    p <- s( x - i )
    q <- s( y - j )
    b1 <- (1-p)*a1 + p*a2
    b2 <- (1-p)*a3 + p*a4
    (1-q) * b1 + q * b2
  }
  xs <- seq(from = 1, to = n, length = N+1)[-(N+1)]
  ys <- seq(from = 1, to = m, length = M+1)[-(M+1)]
  outer( xs, ys, Vectorize(f) )
}

image( perlin_noise() ) 
```

![柏林噪声](../Images/a52bf6eeb706bb0c0090d81dcc5b07a2.png)

通过添加具有不同网格大小的矩阵，您可以拥有更分形的结构。

```
a <- .6
k <- 8
m <- perlin_noise(2,2,2^k,2^k)
for( i in 2:k )
  m <- m + a^i * perlin_noise(2^i,2^i,2^k,2^k)
image(m)
m[] <- rank(m) # Histogram equalization
image(m) 
```

![Perlin 噪声，不同网格大小的 Sum](../Images/91313192f388c4ef12b54bffbee9815e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-09T15:11:23.270

另一种方法：

```
require(geoR)
sim <- grf(441, grid="reg", cov.pars=c(1, .25))
image(sim, col=gray(seq(1, .1, l=30))) 
```

[![在此处输入图像描述](../Images/b7c8444bcf0f0cc532b73b50a0e9b0b7.png)](https://i.stack.imgur.com/76PuS.png)

可以提取对象数据`cbind(sim[[1]], z = sim[[2]])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-16T09:12:54.630

现在还有 {ambient} 包中的一些功能。

# c++ - 多个程序共享的插件/模块

> ID：15387329
> 
> 赞同：2
> 
> 时间：2013-03-13T13:55:31.503
> 
> 标签：c++, oop, design-patterns, plugins

我想为我的程序定义类似对象的插件。它们应该如下所示：

```
class ModuleBase
{
public :
   void baseFunction1();
   void baseFunction2();
   ...   
   virtual void init() = 0;
   virtual void finalize() = 0;
};

class SpecificModule : public ModuleBase
{
public :
   virtual void doSpecificTask() = 0;
}; 
```

因此，我将有 SpecificModule 实现：

```
class ConcreteSpecificModule1 : public SpecificModule
{
public :
   void init();
   void finalize();
   void doSpecificTask();
}; 
```

为了掩盖实现和复杂性，我希望我的模块通过外观接口看到底层系统：

```
class SystemViewForSpecificModule
{
public :
   virtual SystemData& getData(//some parameters) = 0;
   virtual void doSystemAction1() = 0;
   virtual void doSystemAction2() = 0;
   ...
}; 
```

最后，我希望能够制作几个可以处理模块和/或`SpecificModule`实例的程序。

考虑到我有 prog1、prog2和prog3，我将不得不实现 `Prog1View`和作为接口的具体实现。`Prog2View``Prog3View``SystemViewForSpecificModule`

此外，我必须考虑以下情况：

**Prog2 将嵌入 Prog1**，我希望能够做到这一点：

1.  实例化`SpecificModule`实例
2.  运行调用的 prog1 部分`SpecificModule::doSpecificTask();`
3.  运行也调用的 prog2 部分`SpecificModule::doSpecificTask();`

**我的问题是：**如何在 SpecificModule 实例中传递/存储对系统的引用（或指针）？

**1 - 在构建时存储参考：**

因此SpecificModule 接口应该喜欢

```
class SpecificModule : public ModuleBase
{
   SystemViewForSpecificModule& m_sys;
public :
   SpecificModule(SystemViewForSpecificModule& sys):m_sys(sys){}
   virtual void doSpecificTask() = 0;
}; 
```

这是解决我的问题的好方法，但不要忘记在 prog2 中我必须首先使用 prog1 运行我的模块，因此在这种情况下我必须动态地从 SystemViewForSpecificModule 实现切换。

*   (+) 模块可以在其整个生命周期中访问系统，并且所有方法都可以访问它。
*   (-) 参考设定后，不可更改

我们可以认为使用引用不是一个好的解决方案，或者使用这样的东西：

```
class SystemView : public SystemViewForSpecificModule
{
    SystemViewForSpecificModule* concreteSystem; 
public
    SystemView(SystemViewForSpecificModule& sys)
    {concreteSystem = &sys;}

    void setSystem(SystemViewForSpecificModule& sys)
    {concreteSystem = &sys;}

    void doSystemAction1()
    {concreteSystem->doSystemAction1();}
    ...
} 
```

这样，模块甚至不知道实现已更改但是，我担心它会由于额外的 vtable 访问而降低性能。

**2 - 使用setter指定系统视图**

SpecificModule 接口应如下所示：

```
class SpecificModule : public ModuleBase
{
   SystemViewForSpecificModule* m_sys;
public :
   setSystem(SystemViewForSpecificModule& sys){m_sys = &sys;}
   virtual void doSpecificTask() = 0;
}; 
```

这似乎是一个方便的解决方案，但我不喜欢该模块具有的事实：

*   知道这种变化
*   处理这个变化
*   在使用它之前检查指针的有效性

**3 - 传递对 SpecificModule 方法的引用**

至少`SpecificModule`界面看起来像这样：

```
class SpecificModule : public ModuleBase
{
   virtual void doSpecificTask(SystemViewForSpecificModule& sys) = 0;
}; 
```

我不喜欢将相同的引用 10000 次传递给同一个函数（prog1 和 prog2 部分都会多次调用它）。

此解决方案的另一个坏点是：我无权访问`ModuleBase`方法中的系统视图（例如`init()`和`finalize()`）。显然，将它们移动到子类会降低继承的兴趣。

在这个示例案例中你会使用什么解决方案（我希望看到除了所提供的 3 个解决方案之外的其他解决方案）？

# jquery - 来自 javascript 或差异文件的 JQuery Mobile 1.3.0 面板

> ID：15387331
> 
> 赞同：0
> 
> 时间：2013-03-13T13:55:34.510
> 
> 标签：jquery, jquery-mobile, panel

像这样创建面板时来自 jQuery Mobile 的标准示例：

```
<div data-role="page">
    <div data-role="header">
        <h1>Example</h1>
        <a href="#main-panel" data-icon="bars" data-iconpos="notext">Navigation</a>
    </div>

    <div data-role="content">
        Your Content
    </div>

    <div data-role="footer">
        Your Footer
    </div>

    <div data-role="panel" id="main-panel">
        Your Panel
    </div>
</div> 
```

我可以从 javascript 或差异文件创建面板，以便创建动态内容面板吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:57:56.107

看看我关于这个解决方案的其他答案：[https ://stackoverflow.com/a/15223926/1848600](https://stackoverflow.com/a/15223926/1848600)

这是您可以动态添加它的方式：

```
$(document).on('pagebeforeshow', '[data-role="page"]', function(){                
    $('<div>').attr({'id':'mypanel','data-role':'panel'}).appendTo($(this));
    $('<a>').attr({'id':'test-btn','data-role':'button'}).html('Click me').appendTo('mypanel');
    $.mobile.activePage.find('#mypanel').panel();
    $(document).on('click', '#open-panel', function(){   
        $.mobile.activePage.find('#mypanel').panel("open");       
    });    
}); 
```

# java - GWT中的TabPanel和TabLayoutPanel有什么区别

> ID：15387334
> 
> 赞同：4
> 
> 时间：2013-03-13T13:55:44.520
> 
> 标签：java, gwt

GWT 中的 TabPanel 和 TabLayoutPanel 有什么区别？我在 Google 中找不到答案，阅读文档也很难理解

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T14:33:49.323

`TabLayoutPanel`是一个*布局面板*：它是由外向内调整大小的，它必须被赋予明确的尺寸并在它们发生变化时得到通知（`RequiresResize`），并且同样会调整其子项的大小并在这样做时通知他们（`ProvidesResize`）。

`TabPanel`不是; 它的大小是从内到外的：它会根据所选选项卡中小部件的大小自行调整大小。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T19:16:43.143

除了托马斯所说的

在 GWT 中，要在屏幕中布局小部件，有两种面板：（`Panels` ***例如：TabPanel）***和`Layout Panels` ***（例如：TabLayoutPanel）***

## 面板或非布局面板

这些面板（TabPanel、DockPanel、Horizo​​ntal panel、Vertical Panel、AbsolutePanel ...）允许您以显式方式布局小部件。它将按照想象呈现小部件（*提供正确的想象*；））。当浏览器调整大小时，它的子小部件***不会***自动调整大小。

## 布局面板

这些面板（TabLayoutPanel、DockLayoutPanel、ScrollPanel、FlexTable、SplitLayoutPanel...）允许您以显式方式布局小部件，但还可以在浏览器调整大小时调整子小部件的大小，因为它们中的每一个都实现`RequiresResize`和/或`providesResize`提供您在整个过程中维护布局面板层次结构并以百分比形式提供面板和小部件的大小。

**资料来源：** GWT Docs 和 Personal Experience

# orchardcms - 来自代码的新 ContentItem，何时保存？

> ID：15387345
> 
> 赞同：2
> 
> 时间：2013-03-13T13:56:17.083
> 
> 标签：orchardcms

我无法理解这一点。

如果我有一个`ContentType`叫`Contacts`. `ContentType`有两个附加到它的字段。

`FirstName (textfield)`和`LastName (textfield)`。

如果我想创建一个新`contentitem`的这种类型，那么我可以编写这样的代码。

```
dynamic contact = _services.ContentManager.New("Contacts");
contact.Contacts.FirstName.Value = "John";
contact.Contacts.LastName.Value = "Doe";
_services.ContentManager.Create(contact, VersionOptions.Published); 
```

这不起作用。被`Contentitem`创建但字段为空。

但是，如果我这样写它就可以了。这是为什么？`ContentManager.Create`我必须在调用后设置字段值吗？

```
dynamic contact = _services.ContentManager.New("Contacts");
_services.ContentManager.Create(contact, VersionOptions.Published);
contact.Contacts.FirstName.Value = "John";
contact.Contacts.LastName.Value = "Doe"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:51:51.790

您观察到的确实是预期的行为，并且是设计使然。我以前也遇到过这个问题，也[提出了一个问题](http://orchard.codeplex.com/workitem/18412)。如您所见，它已被首席开发人员 Sebastien 关闭，他说这是设计使然，但遗憾的是没有解释原因。

仅供参考，管理内容项的标准工作流程如下：

1.  实例化项目。
2.  创造它。
3.  更新其值。
4.  如果更新是通过模型绑定器发生的，则检查 ModelState 是否有效。如果没有，请取消交易并返回。
5.  如果一切正常并且内容类型设置为可草稿，请发布该项目。

[您可以在Orchard 培训演示模块](https://orchardtrainingdemo.codeplex.com/SourceControl/changeset/view/d289c6fd344d#Controllers/ContentsAdminController.cs)(ContentsAdminController.PersonListDashboardPost())中看到一个解释示例。

# java - Weblogic 在 javax.ejb.EJBException 中包装应用程序异常

> ID：15387346
> 
> 赞同：3
> 
> 时间：2013-03-13T13:56:24.110
> 
> 标签：java, jakarta-ee, ejb-3.0, weblogic-10.x, ear

我的耳朵应用程序工作正常。但是突然它开始在一些方法调用中抛出 javax.ejb.EJBException，而不是返回原始的应用程序异常（用 @ApplicationException(rollback=true) 注释。现在原始应用程序异常被包装在 EJBException 中。目前其他开发人员在该项目中工作的人正在休假。因此我不知道他对发生这种情况的代码做了什么。此应用程序异常和 ejb 远程接口位于一个单独的 jar 文件中，该文件部署为 weblogic 中的共享库。

我想知道是什么负责抛出这个 EJBException 而不是抛出应用程序异常。我认为可能是 weblogic 没有正确检测到 @ApplicationException 注释。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T17:43:28.653

我能够通过在 ejb 方法签名的“throw”子句中添加应用程序异常来解决这个问题。

以前所有的 ejb 类和应用程序异常类都在同一个 jar 文件中。但后来应用程序异常类和ejb远程接口被放到另一个jar文件中，称为“api”jar文件，相关的ejb文件保存在之前的jar文件中。

如果我们需要在所有类都在同一个 jar 文件中时将其视为应用程序异常，使用 @ApplicationException 声明应用程序异常似乎就足够了。但是如果应用程序异常类在单独的jar文件中，我们需要在ejb方法签名的“throw”子句中添加这个应用程序异常，以便weblogic服务器将其解释为应用程序异常。

# java - 正则表达式 Java 条件

> ID：15387351
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:56:39.813
> 
> 标签：java, regex

我想在 java 的帮助下制作一个具有以下条件的正则表达式。

他们是离开应用程序

```
(1) CL
(2) RH 
```

我想为字符串写正则表达式

```
CLCLRHRHCL 
```

任何组合，但`RH not more than 2`

所以写这个

```
^([CL]* | ?> [RH]{1,4})*$ 
```

但 RH 2 条件不起作用

* * *

嗨，我想在这个问题上添加一些更清楚的内容

字符串不固定

CLCLRHRHCL

字符串也可以以 RH 开头

喜欢

RHCLCLRHCL CLRHCLRH

或任何组合

但我希望在所有字符串中 RH 不超过 2 我正在阅读 Java 文档和其他正则表达式书籍，但仍未找到解决方案。

我的正则表达式是：

^([CL] *|[RH]{1,4})* $

这个正则表达式：^[CL]*|[RH]{1,4}$

工作正常，但是当我添加 * 表示没有发生 RH 条件停止工作。

注意：不要担心空格，我不会在输入中提供任何空格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T14:39:07.540

你真的需要阅读正则表达式教程。

我假设空格不仅仅是为了清楚起见，否则正则表达式甚至不会编译（注意代码编译和正则表达式编译之间的区别），但即使这样，下面类似的论点也会成立。

```
^([CL]* | ?> [RH]{1,4})*$ 
```

**意思如下：**

*   字符串开头 ( `^`)
*   后跟以下零个或多个： ( `(...)*`)
    *   以下任一：( `...|...`)
        *   零个或多个字符是**C 或 L** ( `[CL]*`)，然后**是空格**( `" "`)（是的，空格很重要）
        *   **一个可选的空格**( `" ?"`)**后跟`"> "`1 到 4 个字符，R 或 H** ( `[RH]{1,4}`)
            要成为一个独立的非捕获组`(?>...)` **，它实际上需要放在括号中**
*   后跟字符串结尾 ( `$`)

**这应该有效：**

```
^(CL)*(RH(CL)*){0,2}$ 
```

**解释：**

*   字符串开头 ( `^`)
*   后跟零个或多个`"CL"`字符串 ( `(CL)*`)
*   后跟以下的 0 到 2 ( `{0,2}`)：
    *   一个`"RH"`字符串
    *   后跟零个或多个`"CL"`字符串 ( `(CL)*`)
*   后跟字符串结尾 ( `$`)

**一个更容易理解的版本：**

```
^(CL)*(RH)?(CL)*(RH)?(CL)*$ 
```

**解释：**

*   字符串开头 ( `^`)
*   后跟零个或多个`"CL"`字符串 ( `(CL)*`)
*   后跟一个可选`"RH"`字符串 ( `RH?`)
*   后跟零个或多个`"CL"`字符串 ( `(CL)*`)
*   后跟一个可选`"RH"`字符串 ( `RH?`)
*   后跟零个或多个`"CL"`字符串 ( `(CL)*`)
*   后跟字符串结尾 ( `$`)

[参考](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

# xml - xslt 验证

> ID：15387352
> 
> 赞同：1
> 
> 时间：2013-03-13T13:56:39.767
> 
> 标签：xml, xslt

我有以下 XML 代码，我需要使用 xslt 提取一些特定属性。可能有 1000 行。它应该遍历每一行。如果 FeatureDisplay 无效，它应该向用户显示相应的部分和特征代码是错误的。我的验证条件是：

1.  如果 FeatureDisplay 长度小于 5 则抛出错误
2.  如果 FeatureDisplay 长度大于 5，则在验证部分，将字符串分成长度为 6 的子字符串。测试子字符串。子字符串的最后一个值应该是 ; 或|。如果位置 0 或 4 处的值是空格，则抛出错误。如果位置 0 到 4 的值不是字母数字值或“@”或空格，则抛出错误。如果有更多子字符串，请重复测试过程。

如果 FeatureDisplay 值为 12345;98765; 它应该打破为 12345；和 98765；如果存在任何无效字符串，它应该测试每个子字符串并抛出错误。

我的xml代码是

```
<sample>
<row>
  <FeaturesDisplay>
     <NewValue>VLTUB2</NewValue>
  </FeaturesDisplay>
  <part>
    <NewValue>a</NewValue>
  </part>
</row>
<row>
  <FeaturesDisplay>
     <NewValue>VLTU</NewValue>
  </FeaturesDisplay>
  <part>
    <NewValue>b</NewValue>
  </part>
</row>

</sample> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:22:18.753

你可以这样做：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
    <list>
        <xsl:apply-templates/>
    </list>
</xsl:template>

<xsl:template match="//NewValue">
    <output>
    <xsl:choose>
        <xsl:when test="string-length(.)&lt;5">
            <xsl:value-of select="."/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="substring(.,1,1)"/>
        </xsl:otherwise>
    </xsl:choose>
    </output>
</xsl:template>

</xsl:stylesheet> 
```

如果字符串长度`NewValue`小于 5，则给出该值，否则只给出第一个字符。应用于您的 XML 源的 XSL 会给出以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<list>
<output>V</output>
<output>VLTU</output>
</list> 
```

请根据您的特定需求调整 XSLT。

# c# - 将 DateTime 值转换为 Integer8 以进行 ActiveDirectory 查询

> ID：15387353
> 
> 赞同：0
> 
> 时间：2013-03-13T13:56:40.587
> 
> 标签：c#, active-directory

我正在尝试创建一个 ldap 查询来搜索 Active Directory 并过滤结果以仅返回 lastLogonTimestamp 字段的值超过 30 天的用户。

我正在寻找的 ldap 过滤器是这样的：

```
"(&(ObjectClass=User)(lastLogonTimestamp<=" + lastLogonTimeStampLimit + "))" 
```

我的问题是我无法找到任何方法将 .net DateTime 值转换为 Active Directory 中 lastLogonTimestamp 字段的正确格式，我读到该字段是“Integer8”数据类型。

如果有帮助，我发现了另一种方式的转换：

```
DateTime.FromFileTime((long)(user.Properties["lastLogonTimestamp"][0])) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-23T22:08:43.307

此代码用于将 AD 对象转换为有效的 DateTime。您可以将它用于 AD 中的任何日期值（此示例用于 lastLogon）。关键似乎是 ActiveDs 库。演员阵容`long`似乎不起作用，但`IADsLargeInteger`做得很好！

下面是一个代码示例，包括您需要从 AD 类型转换为 DateTime 的所有内容：

```
using System.DirectoryServices;
using System.DirectoryServices.AccountManagement;
using ActiveDs; // Namespace added via ref to C:\Windows\System32\activeds.tlb

private DateTime? getLastLogin(DirectoryEntry de)
{
    Int64 lastLogonThisServer = new Int64();

    if (de.Properties.Contains("lastLogon"))
    {
        if (de.Properties["lastLogon"].Value != null)
        {
            try
            {
                IADsLargeInteger lgInt =
                (IADsLargeInteger) de.Properties["lastLogon"].Value;
                lastLogonThisServer = ((long)lgInt.HighPart << 32) + lgInt.LowPart;

                return DateTime.FromFileTime(lastLogonThisServer);
            }
            catch (Exception e)
            {
                return null;
            }
        }
    }
    return null;
} 
```

# python - 显示使用本地化（Django 模板）过滤的日期时如何摆脱小时、分钟和秒？

> ID：15387354
> 
> 赞同：1
> 
> 时间：2013-03-13T13:56:41.150
> 
> 标签：python, django, date, django-templates

`{{ post.pub_date|localize }}`当我在 Django 模板中显示本地化日期 ( ) 时，如何摆脱小时、分钟和秒？

如果我只使用普通日期（类似`post.pub_date|date:"d m Y"`），我只能显示日、月和年（而不是小时、分钟和 s）。使用本地化过滤器，我似乎无法控制我显示的内容。

作为最后的手段，我在发送帖子之前已将日期时间对象转换为视图中的日期对象，但这需要更多的工作（我在帖子列表中循环）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:22:08.853

Django has built-in support for localized dateformatting; it's just disabled by default. Check out [the official docs](https://docs.djangoproject.com/en/dev/topics/i18n/formatting/#format-localization) for more information, but the short answer is that you just set `USE_L10N=True` in your settings.py.

# .net - 编码的 UI 测试，CLR 错误

> ID：15387355
> 
> 赞同：1
> 
> 时间：2013-03-13T13:56:43.510
> 
> 标签：.net, visual-studio-2010, visual-studio, automated-tests, coded-ui-tests

编码的 UI 测试是用 VS2010 构建的，并用 VS2012 开放。在VS2012中打开后，我在另一台计算机上的VS2010中打开它，然后显示此错误：

> 检测到 FatalExecutionEngineError 消息：运行时遇到致命错误。错误地址位于线程 0x1838 上的 0x67ba416e。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

装有 VS2010 的计算机具有 .NET Framework 4.0，装有 VS2012 的计算机具有 .NET Framework 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:00:59.370

在VS2012中打开项目时，检查项目属性，确保目标框架为.NET 4.0。

> 项目 -> 属性 -> 应用程序选项卡 -> 目标框架

可能是 VS2012 错误地将目标框架设置为 .NET 4.5？无论如何尝试检查它。如果它设置为 .NET 4.5，则将其更改为 .NET 4.0。那应该让VS2010高兴。

我不能再帮忙了，但也许这对你有用？

[如何调试 .net 致命执行引擎错误？](https://stackoverflow.com/questions/1205111/how-do-i-debug-a-net-fatal-execution-engine-error)

# java - Eclipse Android SDK：添加第二个活动后无法访问布局

> ID：15387357
> 
> 赞同：1
> 
> 时间：2013-03-13T13:56:44.347
> 
> 标签：java, android, eclipse, layout, android-activity

我对 Android 和 Java 开发非常陌生。到目前为止，一切都运行良好。但是我一直无法添加第二个活动并访问其布局元素。我使用了 manifest.xml 向导和 file->new->other->android 活动。这很好用，添加了一个新的 java 文件和布局。开始活动也很好。

我的问题是我无法访问新布局的任何元素。当我尝试通过“findViewById(R.id.?)”创建按钮时，它会显示布局中不存在的元素，但未显示我的布局中的元素。似乎使用了以前项目的布局。

此外，eclipse 编辑器在上面的一行中显示警告： `setContentView(R.layout.activity_secondactivity);` “activity_secondactivity 无法解析或不是字段”。

在我输入“R.id”之前，此警告不存在。即使我删除它，它也不会消失。

在网络和 youtube 上的所有教程中，它似乎工作得很好，我尝试了两天不同的东西，但无法弄清楚。如果有人可以帮助我，我会很高兴:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:59:05.653

确保您导入了正确的“R”（yourpackage.R）而不是 android.R。例如，如果你的包名是 com.my.package，那么你必须导入 com.my.package.R。并尝试清理您的项目（项目->清理）。

# c# - 更改 Visual Studio 2010 中的输出详细程度会影响构建时间吗？

> ID：15387358
> 
> 赞同：2
> 
> 时间：2013-03-13T13:56:44.543
> 
> 标签：c#, build, msbuild, console, solid-state-drive

我最近在我们的系统中安装了一个 SSD，希望能缩短我们大型项目的构建时间。

在测试这些驱动器时，我发现我可以将 MSBuild 输出详细程度更改为正常，以在输出窗口中显示构建计时器。

我的问题是，与将其设置为最小相比，这种详细程度的变化是否会影响构建时间？

# json - yii 文本字段输入如何调用 json 动作

> ID：15387359
> 
> 赞同：0
> 
> 时间：2013-03-13T13:56:44.913
> 
> 标签：json, function, yii, action, call

当我尝试调用 json 操作时遇到问题

首先，在**yii _form.php**中，我有一个包含输入名称的文本字段的表单，如下所示：

```
<div class="row">
<?php echo $form->labelEx($model,'name'); ?>
<?php echo $form>textField($model,'name'); ?>
<?php echo $form->error($model,'name'); ?>
</div> 
```

我想要的是，当我输入字符“n”时，该字段实现（**调用）我在****独立 json 文件**中定义的操作（例如 index.php?r=user/getuserdata），

```
read: {
        url:"index.php?r=user/getuserdata",
        dataType: "json",
        type:"post"
      }, 
```

在**UserController.php**中，有一个名为“actionGetUserData()”的函数，它告诉细节这个动作究竟做了什么。

```
public function actionGetUserData(){
    $amount = User::model()->findAll("1 = 1 order by id DESC"); //為了排序
    $count = count($amount); 
    for ($i=0;$i<$count;$i++){
         $arr[$i]['id'] = $amount[$i]['id'];
        $arr[$i]['username'] = $amount[$i]['username'];
        $arr[$i]['userpwd'] = $amount[$i]['userpwd'];
        $arr[$i]['usertype'] = $amount[$i]['usertype'];
        $arr[$i]['modifytime'] = $amount[$i]['modifytime'];
        $arr[$i]['createtime'] = $amount[$i]['createtime'];
        $arr[$i]['allowip1'] = $amount[$i]['allowip1']; 
        $arr[$i]['allowip2'] = $amount[$i]['allowip2'];
        $arr[$i]['allowip3'] = $amount[$i]['allowip3'];
        $arr[$i]['allowip4'] = $amount[$i]['allowip4'];
        $arr[$i]['allowip5'] = $amount[$i]['allowip5'];

        /* $arr[$i][] = $amount[$i]->attributes; */
        /* echo "<pre>";
        print_r($amount[$i]->attributes);
        echo "</pre>"; */
    }
    $result = json_encode($arr);
    echo $result;       
} 
```

在这种情况下，让我们忽略函数究竟做了什么（只是一个例子）。我想知道，文本字段如何调用/触发 json 文件中的 getuserdata 操作**index.php?r=user/getuserdata**。这意味着如何在文本字段和 json 文件的操作之间建立关系。

请告诉我如何在 yii 中完成这项工作

**_form.php(textfield) 触发json文件（动作）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:09:23.210

使用 javascript，您可以实现一个函数，该函数根据某个 javascript 事件对控制器 actioncall 进行 ajax...

```
<?php Yii::app->clientScript->registerScript('makeAjaxCall',
     'function makeAjaxCall(){
         $.ajax({
             url:"index.php?r=user/getuserdata",
             dataType: "json",
             type:"post"
             /*Any Other Ajax Options here, like the beforeSend, then, done and fail callbacks*/
         })
     });?>
<?php echo $form->textField($model,'name',array('onblur'=>'js:makeAjaxCall();')); ?> 
```

为了实现这一点，您可以研究[jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)的功能和参考，以便您可以构建*异步调用*以及您的应用程序如何围绕它旋转。

# java - NullPointerException，在线程

> ID：15387361
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:56:56.543
> 
> 标签：java

我正在编写 Java 应用程序来解码将从文本文件中读取的 TCAP 帧，然后将解码后的数据插入数据库（Oracle）中！因此，一开始解码和集成是完美执行的，但是当它达到有限数量的解码和插入数据时，它开始在假定插入数据库的线程上触发此错误：

```
 " java.lang.OutOfMemoryError: unable to create new native thread "
    " Exception in thread "Thread-465" java.lang.NullPointerException " 
```

代码摘录：

```
public void run(){ 
    Conn_BD connexion=new Conn_BD("thin:@localhost:1521:XE", "SYSTEM", "SYSTEM");     
    java.sql.Connection cn=connexion.connect(); 
    try { 
        Statement instruction = cn.createStatement(); 
        instruction.executeUpdate("update tcapBegin set "+ 
            trame+"='"+trame_val+"' where "+message+" like '"+trameId+"'"); 
        cn.close(); 
    } catch(SQLException e) { 
        System.out.print(e); 
    }
} 
```

有没有人有解决这个问题的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:13:11.310

与其为每个插入（或您执行的任何其他操作）实例化一个线程，不如尝试创建一个“任务”队列，每个任务将代表一个这样的线程应该执行的插入。当你有这样一个队列时，你需要有一个线程将任务“推送”到队列中，以及通过将它们“拉”出队列并执行它们来执行实际任务的线程。通过这种方式，您将不需要每个任务一个线程，而是可以使用一小组通用线程，这些线程将从队列中获取任务，执行它，然后返回队列以进行更多工作。

ps当你重用你的线程时，不要在run方法中创建连接，你不必每次都重新创建连接。

阅读有关[Executors 和 Thread Pooling](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)
的 信息 请参阅[Producer Consumer](https://stackoverflow.com/questions/2332537/producer-consumer-threads-using-a-queue)
请参阅[DB Connection pooling](https://stackoverflow.com/questions/10204832/how-to-do-connection-pooling-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:14:50.020

你在 trhead 的开头有这个声明

```
Conn_BD connexion=new Conn_BD("thin:@localhost:1521:XE", "SYSTEM", "SYSTEM"); 
```

似乎每次创建新线程时您都在创建新连接。创建一个连接然后执行语句需要时间，所以当你的第一个连接关闭时，已经创建了很多其他连接，你不能再创建了。

如果您使用一个静态参考进行连接，则更好的选择是。

```
private static Conn_BD connexion=new Conn_BD("thin:@localhost:1521:XE", "SYSTEM", "SYSTEM");     
private static java.sql.Connection cn=connexion.connect();
public void run(){
Statement instruction = cn.createStatement();
//code here 
instruction.close();
} 
```

一旦所有线程完成执行关闭连接。

# symfony - 在 Symfony 2 中创建命令行：添加私有字段

> ID：15387362
> 
> 赞同：1
> 
> 时间：2013-03-13T13:57:02.107
> 
> 标签：symfony, command-line

我阅读了有关在 Symfony 2 中创建命令行的文档。我想创建一个稍微不同的 Command 类。确实，我想将翻译器添加为我班级的私有字段......就像这样：

```
<?php

namespace myVendor\myBundle\Command;

use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;

class ThemeCommand extends ContainerAwareCommand {
private $translator;

public function __construct() {
    $this->translator = $this->getContainer()->get('translator');
}

protected function configure() {
    $this->setName('viewkit:color')
         ->setDescription($this->translator->trans('command.theme.description'))
         ->addArgument('theme', InputArgument::REQUIRED, 'le thème jquery');
}

protected function execute(InputInterface $input, OutputInterface $output) {
    $theme = $input->getArgument('theme');        
    $output->writeln($this->translator->trans('command.theme.success'));
} 
```

}

```
?> 
```

正如您可以想象的那样，由于构造函数它不起作用，我有这个例外：

```
Call to a member function getKernel() on a non-object in C:\wamp\www\viewkit\vendor\symfony\symfony\src\Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand.php 
```

问题是抽象类*ContainerAwareCommand中的***getContainer**方法，它可能返回 null 并且由于此类来自*Command.php*类，因此问题更具体地说是返回非对象（可能为 null）的 Command.php **getApplication方法。**

 ****不知何故，Command.php 类的**应用程序**字段被填充了，但是由于我的*ThemeCommand*中有我的构造函数，所以出现了问题

所以我的问题是：我怎样才能在我的 ThemeCommand 类中有私有字段并用一个做得好的构造函数初始化它们

谢谢

* * *

我做了另一个测试，摆脱了构造函数并像文档中那样做......同样的问题，构造函数不是问题，但 getContainer 不返回对象，因为Command.php 中的**getApplication**为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:22:59.793

你忘了调用父构造函数！

```
public function __construct() {
    parent::__construct();
    $this->translator = $this->getContainer()->get('translator');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:57:10.107

问题是在调用configure方法时，或者在调用constructor时，应用程序对象为null。只有在执行方法中才能调用服务，因为与此同时，应用程序对象已被填充****

# android - 设置textView的边框和背景颜色

> ID：15387366
> 
> 赞同：15
> 
> 时间：2013-03-13T13:57:10.813
> 
> 标签：android, background, textview, border, background-color

我在 XML 中定义了一个 TextView，我想为其设置背景颜色和边框。我遇到的问题是在 XML 中我已经`android:background`用于设置边框资源，所以我不能再次将它用于背景颜色。有人可以指导我正确的方向吗？

边框.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <solid android:color="#ffffff" />
   <stroke android:width="1dip" android:color="#7F000000"/>
</shape> 
```

文本视图

```
<TextView
        android:id="@+id/editor_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:background="@drawable/title_border"         
        android:padding="5dp"
        android:text="@string/editor_title"               
        android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-13T14:02:01.320

您应该为此创建一个 XML 可绘制对象，然后可以将其设置为您的单一背景。这就是您想要的（具有不同颜色边框的矩形 - 如果您不想要，请将渐变替换为）。

这将进入您的“drawable”文件夹：

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <stroke android:width="3dp" android:color="@color/blue_button_border" />
    <gradient
      android:startColor="@color/gradient_end"
      android:endColor="@color/gradient_start"
      android:angle="-90" /> 
</shape> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-18T10:52:53.633

通过 Java：

```
TextView c1 = new TextView(activity);
c1.setTextColor(getResources().getColor(R.color.solid_red));
c1.setText("My Text");    

TextView test = (TextView) view.findViewById(R.id.textView2);
test.setBackgroundResource(R.color.holo_green_light); 
```

通过 XML：

```
 <TextView
        android:text="2"
        android:textSize="200sp"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/textView2"
        android:style="@style/textviewStyle" 
        android:background="@android:color/holo_green_light"
        android:gravity="center"
        android:textColor="#EEEEEE"
        android:layout_alignParentRight="true" /> 
```

这是有关此主题的 API 页面：http: [//developer.android.com/guide/topics/resources/accessing-resources.html#ResourcesFromXml](http://developer.android.com/guide/topics/resources/accessing-resources.html#ResourcesFromXml)

# asp.net - 按钮控件不适用于 RowCommand 事件

> ID：15387367
> 
> 赞同：2
> 
> 时间：2013-03-13T13:57:11.357
> 
> 标签：asp.net

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Button ID="lbShowGroup" CommandName="View" CommandArgument='<%# Eval("Topic") %>'
                            runat="server" Text="View"></asp:Button>
    </ItemTemplate>
</asp:TemplateField> 
```

后面的代码：

```
protected void tblTopics_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "View")
    {
        Response.Redirect("Group.aspx?Topic=" + e.CommandArgument.ToString());
    }
} 
```

调试没有到达`RowCommand`事件，但是当我将按钮控件更改为 时`LinkButton`，它可以工作。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:01:01.263

您是否在回发时对您的网格进行数据绑定？

您**不能**在 中的回发上绑定您的网格`Page_Load`，只有当某些更改导致`GridView`重新加载数据（fe 排序，分页）并且仅在适当的偶数处理程序中。

因此，将数据绑定包装在`PostBack`-check 中：

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        DataBindGrid();
    }
} 
```

另一个可能的原因：您是否在`ViewState`某个地方禁用过？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T22:41:56.990

我遇到了同样的问题，发现我的问题出在母版页中`EnableViewState="false"`。

我将母版页更改为使用`EnableViewState="True"`.
并且`rowcommand`事件按预期触发。

# javascript - 两个按钮确认 - Jquery

> ID：15387368
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:57:13.213
> 
> 标签：javascript, jquery, event-handling, client-side, confirmation

目前我有一个提交按钮，它会弹出一个确认，允许处理或不处理表单数据。

我需要我的表单页面上名为“取消”的另一个按钮来执行相同的操作。如何扩展此代码以向同一表单添加第二个确认？

这些是我在表单上的按钮：

![在此处输入图像描述](../Images/9c145d0e981445363776537c9d63753f.png)

这是我当前有效的代码：

```
 </script>
        <script>
            $(document).on('submit', "#signinform", function(e)
            {
                if (!confirm("By clicking 'OK' you will be placed in queue! Please take a seat."))
                {
                    e.preventDefault();
                    return;
                }
            });
        </script> 
```

> 只是补充：

提交是提交按钮。Cancel 只是一个带有边框的href。

也再次

目前这仅适用于提交按钮。

我需要表单上名为“取消”的另一个按钮来执行相同的操作，就像您点击确定一样，您的提交数据将被删除，然后您将返回表单。如果您点击取消，那么您将留在页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:09:36.807

我想你只需要类似的东西

```
$(document).on('click', "#cancelButtonID", function(e)
{
    if (!confirm("By clicking 'OK' you cancel the submission and the form is cleared."))
    {
        e.preventDefault();
        return;
    }
    else {
        //Clear the form or perform whatever actions are needed
    }
}); 
```

但是，我认为您可能希望用适当的`<input type="reset">`按钮替换取消链接，因为当您让默认操作发生时，它将自动清除表单。然后你应该能够摆脱`else`上面的部分。

# c++ - 如何让 std::stringsteam 排列浮点数的小数位？

> ID：15387369
> 
> 赞同：2
> 
> 时间：2013-03-13T13:57:14.293
> 
> 标签：c++, floating-point, string-formatting, stringstream, text-alignment

在 C++ 中，我有一些这样的代码：

```
float hits = 10.12;
float mins = 2.19;
std::ostringstream ss;

ss.precision(2);

ss << std::fixed << hits << "%\n"
   << std::fixed << mins << "%";

std::cout << ss.str(); 
```

这给了我这个输出：

```
10.12%
2.19% 
```

而相反，我希望小数位对齐：

```
10.12%
 2.19% 
```

有没有办法在小数点前用空格填充小数点前两位数的固定宽度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T13:59:52.253

用于`width`设置列大小，然后使用[std::right](http://msdn.microsoft.com/en-us/library/wyezay2f.aspx)来证明输出的合理性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:01:49.017

有`setw()`和`setprecision()`来确定浮点值的输出宽度和精度。所以你应该可以像这样使用它

```
ss << setw(8) << hits << "%\n"; ... 
```

看[这里](http://www.gibson.vero-beach.fl.us/classes/cop2000/output_formatting.html)以供参考。

# android - 从 Android 的 Contact Provider 获取每个字段（不仅仅是填充 ListView）

> ID：15387371
> 
> 赞同：0
> 
> 时间：2013-03-13T13:57:16.490
> 
> 标签：android, android-contacts, dto, contactscontract

我有以下代表联系人的 DTO 对象：

```
public class ContactDTO {

    private String name;
    private String eMail;

    public ContactDTO(String name, String eMail){
        this.name = name;
        this.eMail = eMail;
    }

    public void setName(String name){
        this.name = name;
    }

    public String getName(){
        return this.name;
    }

    public void setEmail(String eMail){
        this.eMail = eMail;
    }

    public String getEmail(){
        return this.eMail;
    }

} 
```

我想从 Contact Provider 数据中获取一个 ContactDTO 数组，我已经看到了 arround，并且我知道如何使用该联系人数据填充列表视图；但我不知道如何获取每个联系人的字段以填充该 ContactDTO。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:01:58.530

您的问题是您收到了联系人列表，而不是您自己的自定义实现。

首先，如果有任何方法，我会按使用标准联系人。它将具有相同且更多的信息和方法。

如果您需要向此类添加方法，您还可以查看您的自定义类是否可以扩展 Contact 并且您的问题也基本解决了。

如果您坚持使用自己的类而不扩展 Contact，则必须从每个 Contact 创建一个 ContactDTO。您可以向您的 ContactDTO 添加一个构造函数，该构造函数将 Contact 作为参数并提取所需的字段。

# shell - cat 命令不显示以 + 号开头的文件内容

> ID：15387372
> 
> 赞同：-1
> 
> 时间：2013-03-13T13:57:28.457
> 
> 标签：shell

我创建了一个文件，其内容如下。

> +----------------------------+
> | 任务
> +----------------------------+
> | 1) 选项一
> | 2) 选项二
> +----------------------------+

但是当我尝试运行以下命令时它没有显示任何内容

> 猫<文件名

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:00:57.980

使用`cat filename`. 重定向不是必需的。

（你也可以这样做`cat - < filename`）。

# ios - 强制 iOS 不使用 AGPS

> ID：15387373
> 
> 赞同：1
> 
> 时间：2013-03-13T13:57:29.290
> 
> 标签：ios, titanium, titanium-mobile

有没有办法强制 iOS 设备不使用 AGPS，而只使用具有 Titanium.Geolocation 方法的普通卫星 GPS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:08:33.027

即使使用原生 iOS 本身，您也无法访问真正的 GPS。您唯一能做的就是将[准确度](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Geolocation-property-accuracy)设置为最好，就像在原生 iOS 编程中一样。除此之外，您还可以使用指南针功能，如此[处](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Geolocation)所述。您还可以查看本机[实现](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)。

# c# - 无效的回发或回调参数/无效的视图状态

> ID：15387375
> 
> 赞同：2
> 
> 时间：2013-03-13T13:57:46.460
> 
> 标签：c#, asp.net, iis-7.5

我们有在 IIS 7.5 上运行的 asp.net (v3.5) 网站，我们的应用程序池在 2.0 中。该站点还位于具有粘性会话的负载平衡服务器场上。平均而言，我们每天会收到大约 200 到 300 个视图状态错误，而回发错误是每天 1,000 到 2,000 个。

具有最多回发错误的页面包含一个 asp 数据列表，其中绑定了许多项目。以及用于过滤和分页的下拉菜单，以及一些回发的 asp 超链接。

对于视图状态，这些页面使用 ajax 选项卡、asp 超链接、模式弹出扩展器和 asp 下拉菜单。

该网站确实获得了大量的流量，并且有许多机器人，如谷歌和 MSN 访问它。

我们尝试了以下方法：

*   在某些控件上禁用视图状态以最小化视图状态大小
*   将视图状态移动到数据库中
*   压缩视图状态
*   将视图状态移动到页面底部

以上都没有帮助我们解决我们的问题。

非常感谢您解决此问题的任何帮助，谢谢。

更新错误信息：

*   视图状态

错误来源：System.Web

错误尝试/捕获：System.Web.UI.ViewStateException：无效的视图状态。客户端 IP **：.****.* **.** **港口： **** 用户代理：Mozilla/4.0（兼容；Synapse）视图状态：00ytitesern5vnudvqgz rneo/nncjwe2gqvm9hwsejfneaemuijx m43rkjqdgmurhezuvzjtw fcu/cbzrx0xfscog4bv07c1fi7ali/883amvbby5owiliaihufk4fvbn1wgarkbwxmmionsf0jcgw6wlnppj3ww8nmd3 423pu91yexxuyuygxpnu9osgzvxre5wfjlhlhg4ngo1bxdgekgfilzqbxjq58w2aqc7gvdj1ytz4xshkzvjdldiecewgfokt/ot2cpecb bavgiy2f/lvfjg4h9kmuvumsgrbkc6enfnfa0eqce2fi2hj3jo1qqchwsvty8l9uaq6k8oq6ctsggrtyr3xnd 654w6nmldj w8 u vvbaez6hm5zofqxnfrzobik6qbqq5dd7qrozuiu abdvgg xaa5jjm9o5/rroxkrx2fzzhkzjij0xc9p6jenvht 0mplciq4xnewyotosx86axuioyb0yww2phkothy2zok7j2q/ xz4j29zz2drnmqj1km 3j mofii0kk0qe0/s8mkotmhtk4k rfyfja/h7wtebpualg3hg9ydru3yn6pfimay2aasoloydvmj/xfffd tknfqeg7da7/n2flq6hczcolanyjsxf9ofstomby4flhcyuuq/hqg7pc8qvrqy0s/seqyqkr 1ne7bktrazjwlgygpprawneml8f1kbujtbjtz7feieyzu76j1mntagwlrhgchwjmux58cjlu2bbh7ayitfevapzt21pn92du5zcnmiajfxfou1motqkl8hqmlbjj0hxhpi5j5gg5xdxpz5xkqfdflw2wgqfjxilhqm6mwyjsmif6r8wtdjkrsxxmapyeq61lfa18 70sntc2v z3cfy...**

 **错误信息：视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保 |machineKey| 配置指定相同的validationKey 和验证算法。AutoGenerate 不能在集群中使用。

HttpErrorCode：500

堆栈跟踪：在 System.Web.UI.ObjectStateFormatter.Deserialize(String inputString) 在 System.Web.UI.Util.DeserializeWithAssert 的 System.Web.UI.ViewStateException.ThrowError(Exception inner, String persistedState, String errorPageMes​​sage, Boolean macValidationError) （IStateFormatter 格式化程序，String serializedState）在 System.Web.UI.HiddenFieldPageStatePersister.Load() 在 System.Web.UI.Page.LoadPageStateFromPersistenceMedium() 在 System.Web.UI.Page.LoadAllState() 在 System.Web.UI。 Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 在 System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 在 System.Web.UI.Page.ProcessRequest() 在 System.Web.UI.Page.ProcessRequest( HttpContext 上下文）在 ASP.content_aspx。System.Web.HttpApplication.ExecuteStep 的 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 处的 ProcessRequest（HttpContext 上下文）（IExecutionStep 步骤，布尔值和同步完成）

浏览器：Mozilla/4.0（兼容；Synapse）

*   回发错误来源：System.Web

错误尝试/捕获：System.ArgumentException：回发或回调参数无效。使用 |pages enableEventValidation=|true|/| 启用事件验证 在配置中或 |%@ 页面 EnableEventValidation=|true| %| 在一个页面中。出于安全目的，此功能验证回发或回调事件的参数是否源自 **_sQueEl_clean 最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。在 System.Web.UI.ClientScriptManager.ValidateEvent(String uniqueId, String argument) 在 System.Web.UI.WebControls.TextBox.LoadPostData(String postDataKey, NameValueCollection postCollection) 在 System.Web.UI.Page.ProcessPostData(NameValueCollection postData,

错误信息：类型异常 |System.Web.HttpUnhandledException| 被抛出。

HttpErrorCode：500

堆栈跟踪：在 System.Web.UI.Page.HandleError(Exception e) 在 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 在 System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint ) 在 System.Web.UI.Page.ProcessRequest() 在 System.Web.UI.Page.ProcessRequest(HttpContext context) 在 ASP.category_aspx.ProcessRequest(HttpContext context) 在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web。 System.Web.HttpApplication.ExecuteStep 处的 HttpApplication.IExecutionStep.Execute()（IExecutionStep 步骤，布尔值&完成同步）

浏览器: Mozilla/5.0 (iPhone; CPU iPhone OS 6_0_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A523 Safari/8536.25

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:28:02.933

场中所有服务器上的机器密钥 ( [http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.71%29.aspx ) 值是否相同？](http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:05:43.287

我见过类似的问题，经过调查，我们能够得出结论，这是由垃圾邮件机器人攻击我们的网站引起的 - 即在没有首先获得正确的视图状态的情况下尝试提交值，并且视图状态正在执行它的设计目的（保护您的回发免受无效数据的影响 - 恶意或其他）。

我预计，这可能也是您所看到的。如果您遇到了*许多机器人，例如 Google 和 MSN*，那么几乎可以肯定您也遇到了糟糕的机器人。

参考这些 SO 搜索结果：[https ://stackoverflow.com/search?q=asp.net+spambot](https://stackoverflow.com/search?q=asp.net+spambot)

像[这样](http://madskristensen.net/post/Invalid-postback-or-callback-argument.aspx)的文章可能有助于减轻您对错误的担忧。

令我感到奇怪的是，错误消息让我们疯狂地试图检测复杂的*内部*问题，而不是仅仅明确说明“在野外，这种情况最简单和最可能的原因”是您被垃圾邮件机器人击中”，并附有一些建议或文章来参考建议如何确认这一点。**

# c# - 使用指令与限定符

> ID：15387377
> 
> 赞同：0
> 
> 时间：2013-03-13T13:57:47.637
> 
> 标签：c#, performance, configuration

我偶尔会参考在课堂上只使用一次的项目。这些往往是配置调用，但这可以适用于任何事情。

**选项1）**

```
using System.Web.Configuration

private static readonly string conn = WebConfigurationManager.OpenWebConfiguration...... 
```

**选项 2)**

```
private static readonly string conn = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration....... 
```

选项 1 的好处是更易于阅读，如果我稍后添加其他相同类型的对象，我就没有那么多可键入的内容了。这一切都遵循 DRY 原则。除此之外，有人知道我想知道在创建变量时放置 using 指令与命名完整限定符之间是否存在编译差异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:00:25.710

假设编译并最终引用同一个成员 - 不，没有区别。

如果您创建`WebConfigurationManager`在不同命名空间中调用的类型，最终可能会出现命名冲突，但这种情况非常罕见。

在代码主体中使用完全限定名称几乎*从来都不*是一个好主意。基本上只是为了消歧，即使这样也有替代方案，例如：

```
// Make sure it's really unique
using swc = global::System.Web.Configuration;
...

private static readonly string conn = swc::WebConfigurationManager.[...]; 
```

# java - Java ogg 到 wav 的转换

> ID：15387380
> 
> 赞同：6
> 
> 时间：2013-03-13T13:57:52.083
> 
> 标签：java, audio, wav, javasound, ogg

我有以下代码片段：

```
File file = new File(sourceFile);
AudioInputStream in = AudioSystem.getAudioInputStream(file);
AudioInputStream din = null;
AudioFormat baseFormat = in.getFormat();

AudioFormat decodedFormat = new AudioFormat(
                AudioFormat.Encoding.PCM_SIGNED, baseFormat.getSampleRate(),
                16, baseFormat.getChannels(), baseFormat.getChannels() * 2,
                baseFormat.getSampleRate(), false);

din = AudioSystem.getAudioInputStream(decodedFormat, in);
AudioSystem.write(din, AudioFileFormat.Type.WAVE, new File(targetFile)); 
```

我编写了这段代码来将 MP3 和 OGG 文件转换为 WAV 文件。据我了解，默认情况下java不支持这些格式，因此我必须将不同的jar添加到我的类路径中，如下所述：

[http://www.javazoom.net/mp3spi/documents.html](http://www.javazoom.net/mp3spi/documents.html)

[http://www.javazoom.net/vorbisspi/documents.html](http://www.javazoom.net/vorbisspi/documents.html)

当我转换 MP3 文件时，代码运行良好。但是当我尝试转换 OGG 文件时，出现以下错误：

```
java.lang.IllegalArgumentException: Unsupported conversion: PCM_SIGNED 44100.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian from VORBISENC 44100.0 Hz, unknown bits per sample, stereo, 1 bytes/frame, 16000.0 frames/second 
```

现在只有在获取解码的输入流本身时才会抛出这个，这意味着 ogg 文件已成功解析。

```
AudioSystem.getTargetEncodings(sourceFormat) 
```

上面的代码在处理 MP3 或 OGG 文件时不会返回任何值。唯一的区别是 MP3 可以正常工作。

我添加了 ogg 转换所需的上一个链接引用的所有 jar，但最新版本的 jogg-0.0.7.jar 除外，因为我找不到它。

我尝试了不同的解决方案，比如 JAVE，但我也需要它在 MAC 上运行，如果没有一些特殊的实现，JAVE 将无法在 MAC 上运行。

有没有人有任何建议可能导致问题？是否有任何解决方法可以将 OGG 文件转换为 WAV？

**编辑：**

哇哇，我意识到问题出在哪里……阅读手册上的所有内容后，我了解到使用两种不同类型的 SPI（如在本例中为 MP3 和 OGG）可能会导致问题。我删除了 MP3 spi maven 依赖项，错误消失了。以为结果 wav 基本上是空的。对此有何建议？如果我能让 OGG 到 WAV 转换工作，我会很高兴，我可以用另一种方式转换 MP3。

我的 pom 依赖项如下所示：

```
<dependency>
    <groupId>com.googlecode.soundlibs</groupId>
    <artifactId>vorbisspi</artifactId>
    <version>1.0.3-1</version>
</dependency> 
```

这个下载我猜我需要让 OGG 转换工作的所有罐子。（好像没有。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:19:07.257

使用[tritonus_jorbis-0.3.6.jar](http://tritonus.org/tritonus_share-0.3.6.jar)替换 vorbisspi1.0.2.jar。

在解码原始AudioInputStream时，AudioSystem获取所有SPI的FormatConversionProvider，并一一检查，直到找到一个可以工作的。所以类路径的顺序很重要。

检查您的类路径以确保使用“org.tritonus.sampled.convert.jorbis.JorbisFormatConversionProvider”。检查类路径中的每个 JAR；在其中搜索以下文件。或者只是将 tritonus_jorbis-0.3.6.jar 放在类路径的最开头。

```
META-INF\services\javax.sound.sampled.spi.FormatConversionProvider 
```

有关如何在 Maven 中指定类路径顺序，请查看这篇文章：[Maven 类路径顺序问题](https://stackoverflow.com/a/793193/2086065)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T15:07:27.163

实际上，您可以同时使用 mp3spi 和 vorbisspi。您只需要确保 Maven 将使用正确版本的 tritonus-share。如果你依赖 Maven 的传递依赖机制，你最终会得到 tritonus-share 0.3.7-1，它缺少类 org.tritonus.share.sampled.convert.TMatrixFormatConversionProvider。这就是破坏 vorbisspi 的原因。

我只需要在我的 pom.xml 中显式添加对 tritonus-share 0.3.7-2 的依赖项，现在 ogg 和 mp3 播放都可以通过 Java 声音 API 工作。

有关详细信息，请参阅我的博客文章：http: [//odoepner.wordpress.com/2013/07/19/play-mp3-or-ogg-using-javax-sound-sampled-mp3spi-vorbisspi/](http://odoepner.wordpress.com/2013/07/19/play-mp3-or-ogg-using-javax-sound-sampled-mp3spi-vorbisspi/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T18:01:36.137

您可能想尝试[FFsampledSP](http://www.tagtraum.com/ffsampledsp/index.html)（[SampledSP](http://www.tagtraum.com/sampledsp.html)的一部分）。

这是实现接口的基于[FFmpeg](http://www.ffmpeg.org)`javax.sound.sampled`的 Win 和 OSX 实现。支持OGG、[FLAC](http://xiph.org/flac/)等。[它与其他 FFmpeg 应用程序（如VLC](http://www.videolan.org/vlc/index.html)播放器等）中使用的解码器基本相同。

# ember.js - Ember.js - TypeError：DynamicCanvas.getContext 不是函数

> ID：15387382
> 
> 赞同：1
> 
> 时间：2013-03-13T13:58:03.153
> 
> 标签：ember.js

如何获取画布元素的上下文？这条线

```
DynamicContext = DynamicCanvas.getContext("2d"); // ERROR 
```

抛出此错误：

```
TypeError: DynamicCanvas.getContext is not a function   
         DynamicContext = DynamicCanvas.getContext("2d"); 
```

**源代码**

html

```
script type="text/x-handlebars">
    {{view "App.Canvas"}}   
</script> 
```

Ember.js

```
App.Canvas = Em.View.extend({
    //attrs for canvas element
    tagName: "canvas",
    attributeBindings: ['height', 'width'],
    height: 300,
    width: 300,
    faceRadius: 40,

    didInsertElement: function(){

        this.drawStaticCanvas();
        this.drawDynamicCanvas();
    },

    drawDynamicCanvas: function(){      
    // How to get the context?

    DynamicContext = DynamicCanvas.getContext("2d"); // ERROR

    // face 
    DynamicContext.beginPath();
    DynamicContext.arc(300/2, // x x,y is at the center
        300/2, // y
        100, // arc radius
        0, // starting angle
        (360 * Math.PI)/180, // ending angle
        true); // counter-clockwise
    DynamicContext.fillStyle = "#ffddee";
    DynamicContext.fill();
    DynamicContext.stroke();    
    }
}); 
```

# jquery - 如何在 jQuery 移动或单选按钮中捕捉点击？

> ID：15387385
> 
> 赞同：5
> 
> 时间：2013-03-13T13:58:16.937
> 
> 标签：jquery, jquery-mobile, radio-button

我有一组按钮使用`jquery mobile`：

```
<fieldset data-role="controlgroup" data-type="horizontal" data-mini="true" style="text-align:center">
    <input id="radio1" name="" value="site" type="radio">
    <label for="radio1">
        Site
    </label>
    <input id="radio2" name="" value="transmitter" type="radio">
    <label for="radio2">
        Transmitter
    </label>
    <input id="radio3" name="" value=" channel" type="radio">
    <label for="radio3">
        Channel
    </label>
</fieldset> 
```

我需要在点击或点击时显示弹出窗口并手动显示。问题是它自己`jquery mobile`渲染了这个内容。那么有可能做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T15:31:59.603

因为 jQuery Mobile 创建了新的按钮样式，所以点击事件必须绑定到伪装成按钮的 span 元素。Fieldset 必须被赋予一个 id 或任何其他标识符，我们将使用它来访问按钮元素。

Click 事件无法绑定到原始单选元素，因为它们具有活动的 css 属性 display: none;

这是一个工作示例：http: [//jsfiddle.net/Gajotres/dCEnC/](http://jsfiddle.net/Gajotres/dCEnC/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('#custom-fieldset').find('.ui-btn').on('click', function(){      
        $('#popupBasic').popup('open');
    });    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:04:33.987

我会在您的单选按钮中添加一个名称，然后是一些基本的 jQuery：

```
$('input[name="myRadioName"].click(function() {
    alert('You clicked' + $(this).val());
} 
```

当然，将它包装在 document.ready 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T09:19:13.773

**jQueryMobile 1.4.1**

从所有解决方案中发现没有一个对我有用，除了这个：

```
$('#myFieldset').find('[type="radio"]').on('click', function( event ){    

        console.log("Yes");

        if ($(this).attr("id") == "radio-choice-h-2a") { // do something... } 
        else { // do something else...}

    }); 
```

其中`#myFieldset`是字段集`#radio-choice-h-2a`的 id 和触发事件的单选按钮的 id。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T14:08:04.593

尝试：

```
$( document ).on( "vclick", "input:radio", function() {
    console.log("click");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T14:13:12.607

我已经解决了你的问题

看看我的小提琴

[http://jsfiddle.net/nikhilagrawal60/hB4CF/](http://jsfiddle.net/nikhilagrawal60/hB4CF/)

```
<a href="#popupBasic" data-role="button" data-rel="popup">Reject & SMS</a>
<div data-role="popup" id="popupBasic" data-theme="c" class="ui-corner-all">
    <form>
        <div style="padding: 10px 20px;">
                <h3>Please enter reason</h3>

            <label for="un" class="ui-hidden-accessible">Reason:</label>
            <textarea cols="40" rows="8" name="textarea" id="un" data-theme="c" placeholder="Reason"></textarea>
            <button type="submit" data-theme="c">Ok.</button>
        </div>
    </form>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-11T18:40:45.487

```
<fieldset data-role="controlgroup" data-type="horizontal" id="custom-fieldset">            
        <label for="utilPlayBtn">Record</label>
        <input type="radio" name="rbtn" id="utilPlayBtn" value="rb1" checked="checked"/>
        <label for="utilRecordBtn">Play</label>
        <input type="radio" name="rbtn" id="utilRecordBtn" value="rb2"/>
</fieldset>  

$('#custom-fieldset').click(function() {                                          
    if ($("#utilPlayBtn").is(":checked")) {
       alert("PlayChecked");
    }else{
       alert("PlayNotChecked");
    }
}); 
```

# ios - ARC：没有调用 Dealloc

> ID：15387386
> 
> 赞同：2
> 
> 时间：2013-03-13T13:58:17.293
> 
> 标签：ios, objective-c, c, automatic-ref-counting

我不明白为什么我需要在某些方面表现出弱自我，而其他方面似乎工作正常。

如果我在 Notification 块中没有对 self 的弱引用，则不会释放 dealloc。不过，它与第二个配合得很好。

```
//When using this, dealloc is NOT being called
[[NSNotificationCenter defaultCenter] addObserverForName:PROD_DONE object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
    [self hideAds];
}];

//When using this, dealloc IS being called
[_match endMatchInTurnWithMatchData:_match.matchData completionHandler:^(NSError *error) {
    [self hideAds];
}]; 
```

如果我为自己创建一个弱引用，它会起作用：

```
__weak GameViewController *weakSelf = self;
[[NSNotificationCenter defaultCenter] addObserverForName:PROD_DONE object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
    [weakSelf hideAds];
}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:01:15.220

这是因为一个引用随着时间的推移而消失（例如 - 当调用完成处理程序时），该块被释放。在这种情况下，没有保留循环，因为对 self 的引用将被释放。

但是，对于 NSNotification 示例，必须始终保留块引用（除非手动删除它），因为它仍在侦听 NSNotification。在这种情况下，对 self 的引用会导致一个保留循环，从而导致类不被保留。

# php - 我想要回显/打印更新查询值，如下所示

> ID：15387391
> 
> 赞同：0
> 
> 时间：2013-03-13T13:58:37.410
> 
> 标签：php

```
$rowdata = mysql_query("DESC ".$table_name."");
$names = array();
while($row = mysql_fetch_array($rowdata)) 
{
    $names[] = $row['Field'];
    $var_names[] = $row['Field'];
}

$qu1="\$qu=\"update ".$table_name." set ";
$qu1.="".implode('=\'".'."$"."jj.\"'".",", $names)."='Y'\";"."";
$qu3="'\".$".implode(".\"', '\".$", $var_names).".\"')\";";
echo $qu1; 
```

输出：

> 更新 inmines_contractor 设置contractor_id='".$contractor_id."',contractor_name='".$contractor_name."'

我想要回显/打印更新查询值，如以下方式更新 inmines_contractor setcontractor_id='".$contractor_id."',contractor_name='".$contractor_name."'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:27:02.707

```
<?php
while($row = mysql_fetch_array($rowdata)) 
{
    $names[] = $row['Field'];
    $var_names[] = $$row['Field'];
}

$qu1="insert into ".$table_name."";
$qu1.=" (".implode(', ', $names)."";
$qu1.=" ) values ( "."'".implode('\', \'', $var_names)."' )"."";
?> 
```

试试这个。这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:30:23.653

```
$var_names[0] = "test";$var_names[1]= "test2";$qu1 = "";

$qu1.=" ) values ( '\".$".implode(".\"', '\".$", $var_names).".\"')";

echo $qu1; 
```

) 值 ('".$test." ',' ".$test2." ')

# com - 非托管 COM 兼容语言可用 C++ 以外的其他语言

> ID：15387395
> 
> 赞同：0
> 
> 时间：2013-03-13T13:58:41.100
> 
> 标签：com, programming-languages, clr, unmanaged

阅读[CLR 分析概述](http://msdn.microsoft.com/en-us/library/bb384493.aspx)：

> 可以从任何（非托管）COM 兼容语言调用分析 API。

除了 C++（和 VB6？），还有哪些非托管 COM 兼容语言可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:57:33.153

这些是我知道的，请大家随时编辑答案以添加更多内容。

你提到了前两个。

*   C++：COM 基于 Windows/Intel C++ ABI。
*   Delphi/Object Pascal 提供了出色的本机支持。
*   VB6 支持最常用的结构
*   C 能够使用 COM，但工作量很大。
*   VBScript 和 JavaScript（至少在 MS 实现中）支持自动化子集。
*   Jython 有一些 COM 支持，但我不知道这是否仅限于自动化子集
*   Python 支持 COM 并且能够在需要的地方编写填充程序。
*   Perl 可以通过在需要的地方编写填充程序来支持 COM。

SWIG 允许许多其他语言与 COM 一起使用。

# android - android中的iOS容器视图

> ID：15387398
> 
> 赞同：0
> 
> 时间：2013-03-13T13:58:45.313
> 
> 标签：android, ios

我是android开发的新手。我正在寻找一个我已经在 ios 上为 android 开发的应用程序，我想知道是否有人可以指出我从哪里开始以及我需要什么的正确方向。我的 iPhone 应用程序有一个带有 8 个按钮的初始菜单屏幕，其中一个链接到带有搜索功能的表格视图，并附有表格和结果的详细视图。然后，我有 4 个按钮链接到带有可滑动详细视图的容器视图，然后有两个按钮链接到 Web 视图，最后一个按钮链接到具有呼叫、电子邮件、方向功能的另一个菜单。

任何关于从哪里开始、帮助或示例代码的指针将不胜感激

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:07:00.923

这个网站是一个很好的起点。

[http://developer.android.com/tools/index.html](http://developer.android.com/tools/index.html)

您将需要下载一个 IDE。Eclipse 是大多数 Android 开发人员使用的典型免费 IDE。我建议下载 Eclipse Classic，但有很多理由选择其他版本。

[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)

第一个链接有大量资源，包括示例代码。

# apache2 - 无法使用 enable_dl() 加载扩展

> ID：15387400
> 
> 赞同：0
> 
> 时间：2013-03-13T13:58:50.017
> 
> 标签：apache2, php-extension

我有一个与[这里类似的问题](https://stackoverflow.com/questions/12221650/php-5-3-enable-dl-not-enabling-dl)

我正在使用 Apache2 服务器。

我做了一个名为 extensionV2.so 的简单扩展，所以我可以加载扩展并在我的代码中使用它

```
extension = extensionV2.so in php.ini. 
```

并在我的 php 文件中使用它的功能。

但如果我使用

```
<?php

dl('extensionV2.so');
var_dump(get_loaded_modules());

?> 
```

我得到错误

```
Fatal error: Call to undefined function dl() in /var/www/html/My.php on line 9 
```

笔记：

我正在使用 php 5.3

根据`phpinfo()`

```
Thread Safety - disabled
Safe Mode - Off
enable_dl()  = On 
```

我通过终端中的 php -r 获得所需的输出。**我知道 dl() 不再通过 apache2handlers 使用**......是否有任何替代选项来解决 dl() 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:51:03.290

您不需要 dl() 来加载您的扩展，如果您的扩展与您的 PHP 兼容（PHP 扩展应该在线程安全、API 编号和编译器版本方面与 PHP 服务器匹配），那么在重新启动服务器后您应该会看到您`phpinfo()`页面中的扩展名（在您的情况下为 extensionV2），否则加载扩展时会出现问题。
**编辑-1**

`dl()`这是在您的代码中使用的替代方法：

```
// Try to load our extension if it's not already loaded.
if (!extension_loaded('extensionV2')) {
  if (strtolower(substr(PHP_OS, 0, 3)) === 'win') {
    if (!dl('extensionV2.dll')) return;
  } else {
    // PHP_SHLIB_SUFFIX gives 'dylib' on MacOS X but modules are 'so'.
    if (PHP_SHLIB_SUFFIX === 'dylib') {
      if (!dl('extensionV2.so')) return;
    } else {
      if (!dl('extensionV2.'.PHP_SHLIB_SUFFIX)) return;
    }
  }
} 
```

# c# - currentdomain.setdata 不工作

> ID：15387401
> 
> 赞同：2
> 
> 时间：2013-03-13T13:58:50.443
> 
> 标签：c#, configuration

我有 3 个工作站都打开并使用来自 TFS 的相同代码。

在其中 2 台计算机上`appdomain.currentdomain.setdata("APP_CONFIG_FILE", configLocation)`拾取并加载正确的配置密钥。**一 1 它没有**。

谁能告诉我为什么？

该文件`configLocation`存在并且路径指向该文件。实际的配置文件与两台工作计算机使用的完全相同**。**

似乎 1 台计算机没有使用正确的配置文件或已经加载了配置，但为什么它会适用于其他 2 台呢？

# android - 创建具有三角形背景的自定义 SeekBar

> ID：15387409
> 
> 赞同：5
> 
> 时间：2013-03-13T13:59:15.920
> 
> 标签：android

我正在尝试创建一个具有三角形背景的自定义 SeekBar。没有拇指图标。下面是一些我想要实现的图像

![空搜索栏](../Images/07de96f9a7b467a9f78d53ba760efbd3.png)

![3/4 全搜索栏](../Images/96b3a958ce7341451aa9ffd939147d73.png)

![全搜索栏](../Images/1cb3343decd9377e4ee0e0b021ada72b.png)

以下是我到目前为止的代码

Res/Drawable/segment_bg

```
<?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <clip>
            <shape>
                <gradient
                    android:startColor="#FF5e8ea3"
                    android:centerColor="#FF32a0d2"
                    android:centerY="0.1"
                    android:endColor="#FF13729e"
                    android:angle="270"
                />
            </shape>
        </clip>
    </item>
</layer-list> 
```

Res/Drawable/segment

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <nine-patch
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:src="@drawable/slider"
            android:dither="true"
         />
    </item>
    <item android:id="@android:id/secondaryProgress">
        <clip>
            <shape>
                <gradient
                    android:startColor="#80028ac8"
                    android:centerColor="#80127fb1"
                    android:centerY="0.75"
                    android:endColor="#a004638f"
                    android:angle="270"
                />
            </shape>
        </clip>
    </item>
    <item
        android:id="@android:id/progress"
        android:drawable="@drawable/segment_bg"
    />
</layer-list> 
```

活动.xml

```
<SeekBar
    android:id="@+id/frequency_slider"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="100dp"
    android:max="20"
    android:progress="0"
    android:secondaryProgress="0"
    android:progressDrawable="@drawable/segment"
/> 
```

使用的 9-patch 图像是

![9 补丁滑块](../Images/4f707f8806c028dd04f2d317ebb7173f.png)

结果看起来像这样

![不正确的搜索栏](../Images/af2329f3ca0077a98ea4fb756905d2a7.png)

我的问题是如何让搜索栏适应三角形？那么如何删除拇指图标，不需要一个。

谢谢

# c++ - 递归 C++ 中的 Pow 函数

> ID：15387410
> 
> 赞同：0
> 
> 时间：2013-03-13T13:59:21.407
> 
> 标签：c++, recursion, pow

pow 函数可以在递归函数中使用吗？例如：

```
double exponencial(double x, int n){
if(n>0)
return (pow(x,n)/n)+exponencial(x,n-1);
return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:39:00.373

**是的你可以**

它只是一个与您编写的任何其他函数类似的函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:03:11.427

递归对您可以使用和不能使用的功能没有任何限制。所以是的，`pow`可以在递归函数中使用。

在您的示例中，`pow(x,n)`将首先调用（最有可能），并且返回值将除以 n。然后，所有相关数据都被压入堆栈（包括我们刚刚计算的结果），并被`exponencial(x,n-1)`调用。当这个递归调用返回时，再次从栈中弹出数据，计算并返回我们的最终结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:59:56.037

您可以在递归中使用任何函数。`pow`只是一个没有什么特别之处的函数。

# c++ - C ++中的多线程多线程读取，很少写入数组/向量迭代

> ID：15387414
> 
> 赞同：1
> 
> 时间：2013-03-13T13:59:28.353
> 
> 标签：c++, performance, stl, locking

我需要以只读方式几乎不断地迭代一系列结构，但是对于每 1M+ 次读取，其中一个线程可能会附加一个项目。我认为在这里使用互斥锁会有点矫枉过正，我还在某处读到读/写锁对读者有其自身的缺点。

我正在考虑在 std::vector 上使用 reserve() 但这个答案[Iterate over STL container using indices safe way to avoid using locks?](https://stackoverflow.com/questions/15370644/iterate-over-stl-container-using-indices-safe-way-to-avoid-using-locks) 似乎使这一点无效。

关于哪种方式可能最快的任何想法？最重要的是让读者能够在尽可能少的争用情况下快速有效地进行迭代。写入操作对时间不敏感。

更新：我的另一个用例是“列表”可以包含指针而不是结构。即，std::vector。同样的要求也适用。

更新 2：假设示例

全球可访问：

```
typedef std::vector<MyClass*> Vector;
Vector v;
v.reserve(50); 
```

阅读器线程 1-10：（这些几乎一直在运行）

```
.
.
int total = 0;
for (Vector::const_iterator it = v.begin(); it != v.end(); ++it)
{
   MyClass* ptr = *it;
   total += ptr->getTotal();
}
// do something with total
.
. 
```

作家线程 11-15：

```
MyClass* ptr = new MyClass();
v.push_back(ptr); 
```

这基本上就是这里发生的事情。线程 1-15 都可以同时运行，尽管通常只有 1-2 个读取线程和 1-2 个写入线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T09:23:36.297

What I think *could* work here is own implementation of `vector`, something like this:

```
template <typename T> class Vector
{
// constructor will be needed of course
public:
    std::shared_ptr<const std::vector<T> > getVector()
        { return mVector; }
    void push_back(const T&);

private:
    std::shared_ptr<std::vector<T> > mVector;
}; 
```

Then, whenever readers need to access a specific `Vector`, they should call `getVector()` and **keep** the returned `shared_ptr` until finished reading.

But writers should always use `Vector`'s `push_back` to add new value. This `push_back` should then check if `mVector.size() == mVector.capacity()` and if true, allocate **new** `vector` and assign it to `mVector`. Something like:

```
template <typename T> Vector<T>::push_back(const T& t)
{
    if (mVector->size() == mVector->capacity())
    {
        // make certain here that new_size > old_size
        std::vector<T> vec = new std::vector<T> (mVector->size() * SIZE_MULTIPLIER);

        std::copy(mVector->begin(), mVector->end(), vec->begin());
        mVector.reset(vec);
    }
// put 't' into 'mVector'. 'mVector' is guaranteed not to reallocate now.
} 
```

The idea here is inspired by RCU (read-copy-update) algorithm. If storage space is exhausted, the new storage should not invalidate the old storage as long as there is at least one reader accessing it. But, the new storage should be allocated and any reader coming after allocation, should be able to see it. The old storage should be deallocated as soon as no one is using it anymore (all readers are finished).

Since most HW architectures provide some way to have atomic increments and decrements, I think `shared_ptr` (and thus `Vector`) will be able to run completely lock-less.

One disadvantage to this approach though, is that depending on how long readers hold that `shared_ptr` you might end up with several copies of your `data`.

PS: hope I haven't made too many embarrassing errors in the code :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:56:09.497

> ... 在 std::vector 上使用 reserve() ...

*仅*当您可以*保证*向量永远不需要增长时，这才有用。您已声明如果项目的数量*不受*上述限制，因此您无法提供该保证。

Notwithstanding the linked question, you could conceivable use `std::vector` just to manage memory for you, but it would take an extra layer of logic on top to work around the problems identified in the accepted answer.

* * *

The actual answer is: the fastest thing to do is minimize the amount of synchronization. What the minimal amount of synchronization *is* depends on details of your code and usage that you haven't specified.

* * *

For example, I sketched a solution using a linked-list of fixed-size chunks. This means your common use case should be as efficient as an array traversal, but you're able to grow dynamically without re-allocating.

However, the implementation turns out to be sensitive to questions like:

*   whether you need to remove items
    *   whenever they're read?
    *   only from the front or from other places?
*   whether you want the reader to busy-wait if the container is empty
    *   whether this should use some kind of backoff
*   what degree of consistency is required?

# php - 在php中显示超链接

> ID：15387416
> 
> 赞同：0
> 
> 时间：2013-03-13T13:59:37.080
> 
> 标签：php, html, session

我是 php 新手。这是检查用户是否使用会话登录然后允许用户的代码。

# 验证

```
<?php

session_start();

$uname = $_POST['uname'];
$pass = $_POST['pass'];

if($uname  == "admin"  &&  $pass == "admin")
{
    $_SESSION['uname'] = $uname;
    $_SESSION['auth'] = 1;
    echo "Welcome Mr ".$uname.". You are now logged in ";
    echo "<br>";
    echo "<a href='TakeMeHome.html'>Click here to access the application </a>";
}
else
{
    echo "Invalid username or password";
}

?> 
```

# 页

```
<?php

session_start();

if($_SESSION['auth'] != 1)
{
    echo "You are not logged in! ";
    echo "<a href = \"TakeMeHome.html\">";
    echo "Access Application";
    echo  "</a>";
    exit();
}

?>

<html>
You are now logged in
</html> 
```

但是链接标签正在显示

```
"; echo "Access Application"; echo ""; exit(); } ?> 
```

连同html数据。没有进行验证。我知道有很多更好的方法来验证用户是否登录。但我正在学习课程，因此我正在使用课程。你能告诉我哪里出错了吗？
问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:14:21.503

在您的回声代码中使用单引号，如下所示：

```
<html>
  <head>
  </head>
  <body>
    <?php
      echo "<a href='pageToGoTo.html' title='Page to go to' class='whatEver'>Anchor text</a>";
    ?>
  </body>
</html> 
```

已经告诉了，html应该放在正文中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:21:41.957

我不知道为什么@Andy 建议你把你的 PHP 放在你的 head 标签中——它不是 javascript。您有 2 种方法可以格式化您的 PHP 和 HTML，第一种是将所有 PHP 放在您的开始 html 标记之上，就像这样

```
<?php
    session_start();
    if($_SESSION['auth'] != 1) {
      $message = 'You are not logged in! <a href="TakeMeHome.html">Access Application</a>';
    } else {
      $message = 'You are logged in!';
    }
?>
<html>
  <head>      
  </head>
  <body>
    <?php echo $message; ?>
  </body>
</html> 
```

或者，将它放在页面的正文中，如下所示：

```
<?php
    session_start();
?>
<html>
  <head>      
  </head>
  <body>
    <?php
      if($_SESSION['auth'] != 1) {
        echo 'You are not logged in! <a href="TakeMeHome.html">Access Application</a>';
      } else {
        echo 'You are logged in!';
      }
    ?>
  </body>
</html> 
```

如果您仍然没有得到想要的结果，请使用`var_dump($_SESSION);`打印出您的会话数组并确保它包含正确的信息。

# full-text-search - 在视图控件中使用 ftsearch 以及排好序的列

> ID：15387417
> 
> 赞同：1
> 
> 时间：2013-03-13T13:59:38.807
> 
> 标签：full-text-search, xpages

我使用视图控件的搜索参数来执行全文搜索，但我想获得根据在相应视图中按降序排序的某一列排序的结果。我按照上述相关问题的步骤进行操作：

[如何使用 ftsearch 方法对视图面板进行排序以像视图一样排序？](https://stackoverflow.com/questions/9815386/how-do-i-sort-a-view-panel-using-the-ftsearch-method-to-sort-like-the-view)

因此，尽管我为 sortColumn 参数选择了正确的列并为 sortOrder 参数选择了降序，但出现以下异常：

```
The design of column F_Estate_AAA does not provide for sorting the view as requested.

com.ibm.xsp.FacesExceptionEx: The design of column F_Estate_AAA does not provide for sorting the view as requested.
com.ibm.xsp.model.domino.viewnavigator.AbstractViewCollectionNavigator.readEntries(AbstractViewCollectionNavigator.java:95)
com.ibm.xsp.model.domino.wrapped.DominoViewEntryArray.readEntries(DominoViewEntryArray.java:104)
com.ibm.xsp.model.domino.DominoViewDataContainer.readViewEntries(DominoViewDataContainer.java:548)
com.ibm.xsp.model.domino.DominoViewDataContainer.getRowCount(DominoViewDataContainer.java:527)
com.ibm.xsp.model.domino.DominoViewDataModel.getRowCount(DominoViewDataModel.java:109)
com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:76)
com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:71)
com.ibm.xsp.component.UIPager.createPagerState(UIPager.java:540)
com.ibm.xsp.renderkit.html_extended.XPagerRenderer.encodeChildren(XPagerRenderer.java:61)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
com.ibm.xsp.renderkit.html_extended.ViewPanelRenderer.processPagerCell(ViewPanelRenderer.java:656)
com.ibm.xsp.renderkit.html_extended.ViewPanelRenderer.encodeBegin(ViewPanelRenderer.java:354)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeBegin(ReadOnlyAdapterRenderer.java:146)
javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:956)
javax.faces.component.UIData.encodeBegin(UIData.java:788)
com.ibm.xsp.component.UIDataEx.encodeBegin(UIDataEx.java:413)
com.ibm.xsp.component.UIViewPanel.encodeBegin(UIViewPanel.java:288)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:840)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
com.ibm.xsp.component.UIViewRootEx._renderView(UIViewRootEx.java:1317)
com.ibm.xsp.component.UIViewRootEx.renderView(UIViewRootEx.java:1255)
com.ibm.xsp.application.ViewHandlerExImpl.doRender(ViewHandlerExImpl.java:641)
com.ibm.xsp.application.ViewHandlerExImpl._renderView(ViewHandlerExImpl.java:320)
com.ibm.xsp.application.ViewHandlerExImpl.renderView(ViewHandlerExImpl.java:335)
com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:103)
com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210)
com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:120)
com.ibm.xsp.controller.FacesControllerImpl.render(FacesControllerImpl.java:264)
com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:209)
com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:204)
com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:138)
com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1281)
com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1265)
com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653)
com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:476)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)

NotesException: The design of column F_Estate_AAA does not provide for sorting the view as requested.
lotus.domino.local.View.NFTSearchSorted(Native Method)
lotus.domino.local.View.FTSearchSorted(Unknown Source)
com.ibm.xsp.model.domino.viewnavigator.FTViewNavigatorEx.createCollection(FTViewNavigatorEx.java:79)
com.ibm.xsp.model.domino.viewnavigator.AbstractViewCollectionNavigator.readEntries(AbstractViewCollectionNavigator.java:76)
com.ibm.xsp.model.domino.wrapped.DominoViewEntryArray.readEntries(DominoViewEntryArray.java:104)
com.ibm.xsp.model.domino.DominoViewDataContainer.readViewEntries(DominoViewDataContainer.java:548)
com.ibm.xsp.model.domino.DominoViewDataContainer.getRowCount(DominoViewDataContainer.java:527)
com.ibm.xsp.model.domino.DominoViewDataModel.getRowCount(DominoViewDataModel.java:109)
com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:76)
com.ibm.xsp.component.UIPager$PagerState.<init>(UIPager.java:71)
com.ibm.xsp.component.UIPager.createPagerState(UIPager.java:540)
com.ibm.xsp.renderkit.html_extended.XPagerRenderer.encodeChildren(XPagerRenderer.java:61)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
com.ibm.xsp.renderkit.html_extended.ViewPanelRenderer.processPagerCell(ViewPanelRenderer.java:656)
com.ibm.xsp.renderkit.html_extended.ViewPanelRenderer.encodeBegin(ViewPanelRenderer.java:354)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeBegin(ReadOnlyAdapterRenderer.java:146)
javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:956)
javax.faces.component.UIData.encodeBegin(UIData.java:788)
com.ibm.xsp.component.UIDataEx.encodeBegin(UIDataEx.java:413)
com.ibm.xsp.component.UIViewPanel.encodeBegin(UIViewPanel.java:288)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:840)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderChildren(FacesUtil.java:871)
com.ibm.xsp.renderkit.html_extended.HtmlBasicRenderer.encodeChildren(HtmlBasicRenderer.java:206)
com.ibm.xsp.renderkit.ReadOnlyAdapterRenderer.encodeChildren(ReadOnlyAdapterRenderer.java:162)
javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:979)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:842)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
com.ibm.xsp.util.FacesUtil.renderComponent(FacesUtil.java:851)
com.ibm.xsp.component.UIViewRootEx._renderView(UIViewRootEx.java:1317)
com.ibm.xsp.component.UIViewRootEx.renderView(UIViewRootEx.java:1255)
com.ibm.xsp.application.ViewHandlerExImpl.doRender(ViewHandlerExImpl.java:641)
com.ibm.xsp.application.ViewHandlerExImpl._renderView(ViewHandlerExImpl.java:320)
com.ibm.xsp.application.ViewHandlerExImpl.renderView(ViewHandlerExImpl.java:335)
com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:103)
com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210)
com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:120)
com.ibm.xsp.controller.FacesControllerImpl.render(FacesControllerImpl.java:264)
com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:209)
com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:204)
com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:138)
com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1281)
com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1265)
com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653)
com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:476)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272) 
```

如果我去掉 sortColumn 和 sortOrder 参数，也不例外，但是结果当然不会像在相应视图中那样排序。

步骤中是否缺少某些内容？谁能告诉我任何可能的原因？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:45:06.110

您需要确保该列被标记为“已排序”，并且您在单击标题时检查了排序选项。你可能要小心你的方法。每个数据库恰好有一个 FT 索引。所以 view.ftsearch 实际上在数据库中进行了一次 ftsearch（速度很快），然后将所有命中与视图中的文档进行比较（如果你有很多，那是令人毛骨悚然的慢，即使你只显示前 20 个命中）。

# iphone - 从ios中的应用程序转到应用程序商店时如何返回应用程序

> ID：15387418
> 
> 赞同：1
> 
> 时间：2013-03-13T13:59:39.213
> 
> 标签：iphone, ios6, app-store

使用此代码从应用程序转到应用程序商店

```
NSURL *myApplicationURL = [NSURL URLWithString:stringURL];

[[UIApplication sharedApplication]openURL:myApplicationURL]; 
```

现在我如何使用取消按钮从应用商店返回到应用。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:09:55.963

退出应用程序后，您无法自动返回，用户必须再次打开应用程序。

您可以使用显示模式[SKStoreProductViewController](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html)（在 iOS 6 上可用）在您的应用程序中显示 AppStore。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T21:52:26.867

SKStoreProductViewController 作为 redent84 的回答很容易，它是在 iOS 6+ 中引入的。这样，用户就可以直接在应用程序中购买您的其他应用程序。

首先将 StoreKit.framework 添加到您的项目中，并将#import 添加到头文件中。

然后通过进入 iTunes 连接管理应用程序找到应用程序的 Apple id，单击应用程序将显示 Apple id 和其他详细信息，并将其传递给 SKStoreProductViewController。

下面是代码

```
#import "ViewController.h"
#import <StoreKit/SKStoreProductViewController.h>

@interface ViewController ()<SKStoreProductViewControllerDelegate>
@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
[self showMyApps];
}

-(void)AppStoreAction:(id)sender{

NSDictionary *appParameters = [NSDictionary dictionaryWithObject:@"533886215"
                                                          forKey:SKStoreProductParameterITunesItemIdentifier];

SKStoreProductViewController *productViewController = [[SKStoreProductViewController alloc] init];
[productViewController setDelegate:self];
[productViewController loadProductWithParameters:appParameters
                                 completionBlock:^(BOOL result, NSError *error)
{

}];
[self presentViewController:productViewController
                   animated:YES
                 completion:nil];

}

 -(void)productViewControllerDidFinish:(SKStoreProductViewController *)viewController
  {
[self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

在早期版本中，您可以链接到 App Store： [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@" [http://itunes.apple.com/de/artist/apple/id284417353?mt=12](http://itunes.apple.com/de/artist/apple/id284417353?mt=12) "]] 但使用一旦您退出应用程序，您将无法返回您的应用程序。

但是使用这个 SKProductViewController 你可以点击取消按钮并返回到你的应用程序。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T14:08:14.977

试试这个........如果您可以控制网页，则可以使用 URL 方案。只需使用您的方案添加一个链接。

如果您的方案是 myapp: 那么：

返回应用程序

请参阅此站点以获取教程。 [http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/) 参考：[从 safari 返回 iPhone 应用程序](https://stackoverflow.com/questions/15341637/return-back-to-iphone-app-from-safari)

# api - 在 ios 中以编程方式连接到 WiFi

> ID：15387423
> 
> 赞同：4
> 
> 时间：2013-03-13T13:59:47.127
> 
> 标签：api, ios5, wifi

我的问题是关于 IOS 中的私有 API。是否有一些 API 来管理 WiFi 连接？例如，我正在使用 Apple80211.framework 来扫描 WiFi 网络，但它无法用于连接。

我的应用不适用于应用商店。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-09-19T15:26:19.640

我们可以在 iOS 11 公共 API 之后以编程方式连接 wifi 网络。您可以使用 SSID 和密码连接 wifi，如下所示。

迅速

```
var configuration = NEHotspotConfiguration.init(ssid: "wifi name", passphrase: "wifi password", isWEP: false)
configuration.joinOnce = true

NEHotspotConfigurationManager.shared.apply(configuration) { (error) in
    if error != nil {
        //an error occurred
        print(error?.localizedDescription)
    }
    else {
        //success
    }
} 
```

别忘了`import NetworkExtension`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T05:10:16.917

去年我遇到了这个问题，经过一番挖掘后，我发现了一个有用的例子，叫做 SOLStumbler。要使此应用程序正常工作，您的设备必须越狱。我修改了 SOLStumbler 并在 github 上抛出了一个示例应用程序。它使用 IPConfiguration 包来访问 Apple80211 框架，该框架允许您关联到网络。自述文件包含自定义构建说明。

[https://github.com/devinshively/wifiAssociate](https://github.com/devinshively/wifiAssociate)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-16T17:00:03.907

不再需要私有 API！在 iOS 11 中，Apple 提供了一个公共 API，您可以使用它以编程方式加入 WiFi 网络，而无需离开您的应用程序。

您需要使用的类称为`NEHotspotConfiguration`.

要使用它，您需要`Hotspot`在您的 App Capabilities 中启用该功能（[添加功能](https://developer.apple.com/library/content/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html)）。快速工作示例：

```
NEHotspotConfiguration *configuration = [[NEHotspotConfiguration
 alloc] initWithSSID:@“SSID”];
configuration.joinOnce = YES;

[[NEHotspotConfigurationManager sharedManager] applyConfiguration:configuration completionHandler:nil]; 
```

这将提示用户加入“SSID”WiFi 网络。在用户离开应用程序之前，它将保持与 WiFi 的连接。

这不适用于您需要使用实际设备运行此代码才能使其工作的模拟器。

更多信息在这里： [https ://developer.apple.com/documentation/networkextension/nehotspotconfiguration](https://developer.apple.com/documentation/networkextension/nehotspotconfiguration)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T06:55:53.620

在任何版本的 iOS 中都可以加载配置文件：应用程序需要生成具有所需网络凭据的配置文件，并托管将配置文件提供给 Mobile Safari 的 Web 服务器。

# javascript - 流星事件处理程序抑制问题

> ID：15387425
> 
> 赞同：0
> 
> 时间：2013-03-13T13:59:48.633
> 
> 标签：javascript, meteor

这是我的按钮单击处理程序：

```
Template.kanjifinder.events({
  'click input.btnOK': function () {
    console.log("click");
        SetCharacters();
      }
}); 
```

但是在我为我的文本输入添加下面的事件处理程序后，上面的按钮单击代码已停止工作。

```
Template.kanjifinder.events = ({
'keydown input.txtQuery': function (evt) {
  if (evt.which === 13) {
     SetCharacters();
  }
 }
}); 
```

如何使 keydown 事件处理程序和按钮单击事件处理程序都工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:30:06.323

不要使用`=`

```
Template.kanjifinder.events({
'keydown input.txtQuery': function (evt) {
  if (evt.which === 13) {
     SetCharacters();
  }
 }
}); 
```

您也可以将两者合二为一：

```
Template.kanjifinder.events({
    'click input.btnOK': function () {
        console.log("click");
        SetCharacters();
    },
    'keydown input.txtQuery': function (evt) {
        if (evt.which === 13) {
            SetCharacters();
        }
    }
}); 
```

# delphi - 如何检查 Variant 是否为 TDateTime？

> ID：15387427
> 
> 赞同：4
> 
> 时间：2013-03-13T13:59:50.150
> 
> 标签：delphi, variant, tdatetime

我有一个对象，它有一个值，但该值可以是`integer`,`string`或. 所以，它是一个.`boolean``TDateTime``Variant`

我`VarType()`用来检查它的类型，但由于`VarType()`没有“varDate”或“varDateTime”，所以我使用“varDouble”，因为据我所知，a`TDateTime`是`double`.

但这返回错误。我也不能`is`用来检查是否`Variant`是`TDateTime`. 有没有办法，或者我应该制作某种类型变量来确定值是哪种类型并使用它来检查它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T14:04:14.040

您的假设不正确；实际上有一个`varDate`.

# c# - 错误消息：Windows 服务无法在您的本地计算机 windows 7 操作系统上启动

> ID：15387430
> 
> 赞同：0
> 
> 时间：2013-03-13T13:59:53.563
> 
> 标签：c#, asp.net

我对 Windows 服务很陌生。我希望我的 Windows 服务具有与我的 asp.net Web 应用程序相同的功能。

它没有任何用户界面。

我在这里简要介绍了我的 Web 应用程序，因此您可以指导我如何在 Windows 服务中进行操作。

1.  根据特定条件从驻留在我的 Web 应用程序中的**IMAGE**文件夹中检索非常大的图像。

2.  调整这些图像的大小并将其存储到数据库中。

3.  检索存储在数据库中的调整大小的图像并将其存储到名为**Large**的服务器文件夹中，然后再次将该图像调整为另外 3 种不同的大小，并保存到它们各自大小的三个文件夹中，称为**List**、**Mini**、* *Thumb* * 在服务器上。

现在我想构建具有相同功能的 Windows 服务，它每 15 分钟在服务器上运行一次。

希望现在我更清楚了。请在这方面帮助我。

我的 Web 应用程序代码运行良好。但我不知道将此代码放在我的 Windows 服务中的哪个位置，因为我对 Windows 服务非常陌生。

我尝试将该代码**放在 onstart**和**oncontinue**方法上，但不允许启动该时间服务。它给出了错误消息，此服务无法在您的本地计算机上启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:04:24.140

`OnStart`必须在 30 (??? iirc) 秒超时内完成。我建议分拆一个线程`OnStart`来完成这项工作，以便`OnStart`立即完成。

```
 protected override void OnStart(string[] args)
    {
        (new Thread(() => DoLongRunningStartupWork()){IsBackground = true})
           .Start();

    }

    void DoLongRunningStartupWork()
    {
        //actual startup code
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:04:39.870

您将需要创建一个从方法中调用的`OnStart`方法。该`OnStart`方法纯粹用于在服务启动时配置服务。你会想要这样的东西：

```
void OnStart()
{
    DoSomething();
}

void DoSomething()
{
     // Your code here
} 
```

我见过人们使用`Thread`s 来启动 Windows 服务，然后`Thread`完成所需的工作。

# jquery - 在 spring mvc 项目中放置 Jquery UI 对话框的地方（使用 JSP）

> ID：15387432
> 
> 赞同：0
> 
> 时间：2013-03-13T13:59:59.730
> 
> 标签：jquery, jquery-ui, jsp, spring-mvc, jquery-ui-dialog

我在 Eclipse 中有一个 Spring mvc 项目。在大多数情况下，对于网页，我有各种 jsp 的组合，从主要布局 jsp 到其他 jsp 文件。

我尝试放置一个 jquery UI 对话框，但我遇到了各种问题。

首先，我不知道放置对话 UI 的 div 的最佳位置在哪里。我希望，对话框显示在页面的上部，居中，但是有这么多的jsp和div，我很困惑。

其次，当显示对话框时，这没有正确的样式或采用其他div的样式。我知道使用主题滚轮可以自定义样式，但我不知道放置 css 文件的最佳位置，以及包含它的方式和位置。

¿ 何时显示 jquery ui 对话框，如何使页面变暗？以及如何阻止页面上的其他元素？（我尝试使用modal：true，但不起作用，并且我在某些页面上显示对话框显示在其他元素后面）

对不起，很长的问题，但我真的很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:58:43.733

1.  您可以只制作元素`div`的直接子`body`元素。

2.  使用 Themeroller 配置样式后，您将能够下载一组文件，包括 Themeroller 根据您的选择生成的 CSS 文件。您应该将该 CSS 文件放在`head`您的 jsp 页面中，例如： `<link href="/yoursite/css/custom-theme/jquery-ui-1.9.2.custom.css" type="text/css" rel="stylesheet"/>`

3.  该`modal`选项是实现此处所述的正确方法：http: [//api.jqueryui.com/dialog/#option-modal](http://api.jqueryui.com/dialog/#option-modal)

# jquery - 如何仅为尚未具有奇/偶类的表行添加奇/偶类？

> ID：15387441
> 
> 赞同：0
> 
> 时间：2013-03-13T14:00:18.113
> 
> 标签：jquery, html-table, row

如何仅为尚未具有奇/偶类的表行添加奇/偶类？（对于某些表我使用 PHP 循环函数）。

这个对吗？

```
$("table tbody tr td")
  .parent("tr:nth-child(odd):not(.odd)")
  .addClass("odd")
  .end()
  .parent("tr:nth-child(even):not(.even)")
  .addClass("even"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:12:19.283

如果已经定义了类，jQuery 将不会复制它。您当然可以随时检查使用`.hasClass()`，但在这种情况下没有必要。

尝试：

```
$("table tbody tr:nth-child(odd)").addClass("odd");
$("table tbody tr:nth-child(even)").addClass("even"); 
```

[编辑]：从您的问题来看，似乎*某些*（但不是全部）行已经添加了“奇数”或“偶数”类。最安全的方法是剥离所有类并使用 JS 将它们添加回来 -`$("table tbody tr").removeClass("odd even")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T12:10:08.437

为什么不能如下使用？

```
$("table tbody tr:odd").addClass("odd");
$("table tbody tr:even").addClass("even"); 
```

# visual-studio-2010 - 更改 Visual Studio 设计的背景颜色

> ID：15387452
> 
> 赞同：1
> 
> 时间：2013-03-13T14:00:34.533
> 
> 标签：visual-studio-2010

我在我的 Visual Studio 中几乎对所有东西都进行了装扮，但我不知道如何更改 WinForm 设计器的背景颜色。它的白色:(

已经安装了主题编辑器，我几乎将每个值都更改为 444444，但 Desinger 背景保持白色。

我找不到有关此主题的任何信息。

请帮忙

# jquery - 在 trigger('click') 之后运行 .slideDown();

> ID：15387456
> 
> 赞同：0
> 
> 时间：2013-03-13T14:00:42.787
> 
> 标签：jquery, triggers

在页面加载时，我需要模拟对标签的点击，然后，当它被点击时，我想要 slideDown(); #commenter 信息。

所以我正在寻找的是这样的：

```
 if ($(this).attr('id') == 'true') {
        $(this).trigger("click", function() {
                       $(this).closest('form').find('#commenter-info').slideDown();
                    });
    } 
```

如果 id 为“true”，点击链接，然后执行 slideDown();

问题是“#commenter-info”是在点击事件中添加的，而不是在页面加载中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:09:25.357

您必须分两步进行。

```
if ($(this).attr('id') == 'true') {

  // First set up the listener :

  $(this).bind("click", function() {
    $(this).closest('form').find('#commenter-info').slideDown();
  });

  // Then, fire the click event

  $(this).click();
} 
```

# focus - 不能简单地强制关注使用 HtmlService 的独立 Google App 中的文本输入？

> ID：15387457
> 
> 赞同：2
> 
> 时间：2013-03-13T14:00:44.370
> 
> 标签：focus, google-apps-script, textinput

我想编写单击输入框的脚本。

这是一个 focus() 应该做到这一点的例子，但事实并非如此！为什么？

代码.gs：

```
function doGet(e) {

  return HtmlService.createHtmlOutputFromFile('myFile');

} 
```

我的文件.html：

```
<input type="text" id="new" onchange="adding(this)"/>

<div id="data"></div>

<script>

   document.getElementById('new').focus();

   function adding(a){

      document.getElementById('data').innerHTML += a.value;

      a.value = '';
   }

</script> 
```

我也尝试过将 focus() 放在它自己的函数中并拥有一个其 onload 调用该函数的 body 元素，但没有成功。

起作用的是有一个按钮，其 onclick 调用该函数，因此 focus() 最终会变为活动状态。我可以使用其他事件来触发它吗？

我正在使用 Chromebook。这可能是问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:29:42.727

这是 Caja 中的一个有意的安全决定。某些容易（在网络上）被严重恶意滥用的函数，例如 submit() 和 focus()，只能在用户发起的事件（例如按钮单击）的上下文中执行。

# php - PHP：检测我们是否在外部 try..catch 块内

> ID：15387458
> 
> 赞同：2
> 
> 时间：2013-03-13T14:00:50.720
> 
> 标签：php, exception, exception-handling, try-catch

是否可以判断我们是否在外部 try..catch 块内？

示例代码（请**仅**作为示例）：

```
<?php
class Foo{
    public function load($id)
    {
        try{
            // Model throw NodeNotFoundException only in rare cases
            $node = $this->getModel()->loadById($id);
        }
        catch(NodeNotFoundException $nle)
        {
            // @here I need to tell if im in the First case or in the Second one,
            // detecting the external try..catch block
            if(externalTryCatchBlock() === true)
            {
                throw $nle;
            }
            else
            {
                watchdog('Unable to find node', $nle->details);
            }
            return false;
        }
        catch(Exception $e)
        {
            watchdog('Something gone wrong.');
            return null;
        }
        return $node;
    }
}

$foo = new Foo();

// First case, no external try..catch 
$node = $foo->load(2);

// Second case: we need to do here something different if the node load
// throw an exception
try{
    $another_node = $foo->load(3);
}
catch(NodeNotFoundException $nle)
{
    watchdog('Unable to find node, using default.');
    $another_node = Bar::defaultNode(); // This is JUST for example
}

// Do something with $another_node
?> 
```

`NodeNotFoundException`基本上，只有当有另一个 catch 块等待它时，我才需要重新抛出异常 ( )，以避免`Fatal error: Uncaught exception`.

当然，对于上面的示例，我可以使用 2 种加载方法（一种使用 try..catch，另一种不使用 try..catch），但我想避免这种情况。我很想知道是否可以检测到 try。 PHP 中的 .catch 块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:08:34.827

一段代码的工作不是担心它是如何被调用的。代码总是抛出异常，故事结束。因此代码具有“属性”*可能会抛出异常 x*：

```
/**
 * Does something.
 *
 * @return mixed Some value.
 * @throws SomeException if something went wrong.
 */
function foo() {
   ...
} 
```

现在，无论谁调用这段代码，都需要做好随时抛出异常的准备。代码不必担心是否有人可以捕获异常。如果出现异常情况，它会抛出异常，因为它无法继续完成它的工作。*调用者*需要为此做好准备，而不是相反。

# c - 如何旋转 cvMat 中的值？

> ID：15387464
> 
> 赞同：0
> 
> 时间：2013-03-13T14:01:03.580
> 
> 标签：c, opencv, image-processing

我正在制作一个可控导数线滤波器。我希望能够将它旋转任意角度。所需的情况如下：

```
cvMat myMat; 
```

> ```
> contains:
> 0, 0, 0
> 0, 0, 1
> 0, 0, 0 
> ```

```
float angle = radians(45);
UnknownRotateMethod(myMat, angle); 
```

> ```
> myMat desired result:
> 0, 0, 0
> 0, 0, 0
> 0, 0, 1 
> (or similar due to discretization and aliasing) 
> ```

注意我使用的是 C OpenCV API。

编辑：尽管我的示例显示了它，但我想说明我希望在不同于 (0,0) 的轴点上完成旋转。在此示例中，我希望枢轴位于矩阵的中心点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:34:43.957

解决了：

```
cv2DRotationMatrix(pivot,angleDegrees,scale,outRotationMat);
cvWarpAffine(myMat,myMat,outRotationMat); 
```

# javascript - 在 for 循环中设置对象

> ID：15387466
> 
> 赞同：1
> 
> 时间：2013-03-13T14:01:10.063
> 
> 标签：javascript

我在 for 循环中设置数据对象的值时遇到问题。

```
// data object
var data = {
  title: '',
  x: {
    something: 'test',
    someVar: ''
  },
  y : {
    something: '',
    someVar: ''
  },
  dots: []
} 
```

例如，我想设置（或更新） data.x.something = "tested"; 我可以 console.log 并查看经过测试的更新值。但是，在我的 for 循环中，它会产生一个错误：

```
 for(var i = 0, len = data.length; i < len; i++) {
      data.x.something = "x";
      console.log('data.x.something', data.x.something);
      // log says "Uncaught TypeError: Cannot set property 'something' of undefined". How come I can't set the var inside my for loop? 
    } 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:20:17.597

**使用以下代码工作的 jsFiddle 在[这里](http://jsfiddle.net/alexflav23/YrB8U/)**

首先，您的数据对象设计不佳。如果您想对其进行迭代，则意味着它包含 x 个相同类型的对象。

```
 var data = [
    {// first object with the properties.
      title: '',
      x: {
        something: 'test',
        someVar: ''
      },
      y : {
        something: '',
        someVar: ''
      },
      dots: []
    }, {// second object with same properties
      title: '',
      x: {
        something: 'test2',
        someVar: ''
      },
      y : {
        something: '',
        someVar: ''
      },
      dots: []
    }
]; 
```

其次，这不是您迭代对象的方式。这是因为 JavaScript 对象没有长度属性，这不是迭代对象的正确方法。如果您需要一个集合来保存 k 类型的 n 个对象（具有一组特定的属性），那么请使用数组，否则您将需要更多无用的嵌套。请参阅我对[这个](https://stackoverflow.com/questions/12973706/javascript-collection/12973883#12973883)关于 JS 中的数组和对象的问题的回答。

```
 for (var i = 0, len = data.length; i < len; i++) {
        data[i].x.something = "x";
        console.log(data[i].x.something);
    }; 
```

# android - 我无法在 Google 地图 API V2 的市场位图前绘制文本？

> ID：15387467
> 
> 赞同：1
> 
> 时间：2013-03-13T14:01:10.293
> 
> 标签：android, android-maps-v2

嗨，天才！
有什么问题？
我试图在标记前绘制文本。我将获得清晰的位图并绘制文本，但位图仍然清晰 - 文本在哪里？
我试图将视图转换为位图，但这也不是一个好主意。
**PS：** `scale >= 1`

```
mMap.addMarker(new MarkerOptions()
.position(new LatLng(56.83789, 60.5986))                              .icon(BitmapDescriptorFactory.fromBitmap(drawTextToBitmap(getApplicationContext(), R.drawable.ic_maps_marker,"19"))));

    //here I'm trying to draw text bitmap
             public static Bitmap drawTextToBitmap(Context gContext,int gResId,String gText) {
                    Resources resources = gContext.getResources();
                    float scale = resources.getDisplayMetrics().density;
                    Bitmap bitmap =
                            BitmapFactory.decodeResource(resources, gResId);

                    android.graphics.Bitmap.Config bitmapConfig =
                            bitmap.getConfig();
                    if(bitmapConfig == null) {
                        bitmapConfig = android.graphics.Bitmap.Config.ARGB_8888;
                    }
                    bitmap = bitmap.copy(bitmapConfig, true);

                    Canvas canvas = new Canvas(bitmap);
                    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
                    paint.setColor(Color.BLACK);
                    paint.setTextSize((int) (14 * scale));
                    paint.setShadowLayer(1f, 0f, 1f, Color.WHITE);

                    Rect bounds = new Rect();
                    paint.getTextBounds(gText, 0, gText.length(), bounds);
                    int x = (bitmap.getWidth() - bounds.width())/2;
                    int y = (bitmap.getHeight() + bounds.height())/2;

                    canvas.drawText(gText, x * scale, y * scale, paint);

                    return bitmap;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:46:47.197

**密度**只需要确定文本的大小。在**画布**上绘制文本不应使用**比例**，因为位移 x 和 y 是针对特定**位图**计算的。
尝试这个：

```
canvas.drawText(gText, x, y, paint); 
```

这适用于 4 台设备：

[![](../Images/88ac493c8999361f46d9f37d86158a06.png)](https://radikal.ru/fp/c3ed5d200299452a99091556aaeb0bd4) [![](../Images/5a048b12063c951ff0aeb930bb382607.png)](https://radikal.ru/fp/54b06c9afb0b412c832c1c391adf2e56) [![](../Images/c08228d04e95767053a633a62d4d4593.png)](https://radikal.ru/fp/b847506ab425423d9fe75d73d46309d7) [![](../Images/ec2729b921658b4eb95260c53292aa7c.png)](https://radikal.ru/fp/b28bf7d2fe9e499fbfa069f72eeaf8dd)

# php - 我可以用 mysql_select_db 切换数据库吗？

> ID：15387471
> 
> 赞同：-2
> 
> 时间：2013-03-13T14:01:17.667
> 
> 标签：php, mysql, mysql-connect, mysql-select-db

这会起作用吗，还是我应该先断开连接？

```
<?php
mysql_connect('localhost','root','');
mysql_select_db('DB1');
//Code... 
//Now I need to change of db
mysql_select_db('DB2');
//More code... 
```

我知道 mysql() 已被弃用，但我正在使用旧的（不是那么多）系统。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:04:36.937

文档说是的：

参考： http: [//php.net/manual/en/function.mysql-select-db.php](http://php.net/manual/en/function.mysql-select-db.php)

所有查询都将在当前活动数据库上运行，在本例中为 DB2。

****在与指定链接标识符**关联的服务器上**设置当前活动数据库**。**每次对 mysql_query() 的后续调用都将在活动数据库上进行。****

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:04:37.320

你可以在 sql 中使用它

```
SELECT `database`.`table`.`value` FROM `database`.`table` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:06:07.240

[文档](http://php.net/manual/en/function.mysql-select-db.php)说：

> 在与指定链接标识符关联的服务器上设置当前活动数据库。每次对 mysql_query() 的后续调用都将在活动数据库上进行。

所以是的。`use <database>`我想它可以与客户端上的命令相媲美。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:07:20.327

您可以拥有多个活动连接

```
$db1=mysql_connect('localhost','root','');
mysql_select_db('DB1', $db1);

$db2=mysql_connect('localhost','root','');
mysql_select_db('DB2', $db2);

mysql_query("SELECT * FROM table", $db1);
mysql_query("SELECT * FROM table", $db2); 
```**

# android - 将用户输入的值传递给 url 并显示结果

> ID：15387472
> 
> 赞同：0
> 
> 时间：2013-03-13T14:01:17.613
> 
> 标签：android, rest

基本上我试图将用户输入的值传递给一个 url 并基于它显示结果....因为我没有收到任何错误，我不太确定出了什么问题。任何帮助是极大的赞赏

当我单击按钮时，什么也没有发生...我添加了事件监听器等

```
package com.example.jsonrestclient;

import org.json.JSONException;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;
import android.widget.EditText;

public class MainActivity extends Activity {

protected TextView tv1;
protected TextView tv2;
protected TextView tv3;
protected TextView tv4;
protected EditText ET1;
protected String ET2;

 @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tv1 = (TextView) findViewById(R.id.textView1);
        tv2 = (TextView) findViewById(R.id.textView2);
        tv3 = (TextView) findViewById(R.id.textView3);
        tv4 = (TextView) findViewById(R.id.textView4);
        ET1 = (EditText) findViewById(R.id.editText1);
        ET2 = ET1.getText().toString();
    }

    public void button1OnClick(View v) {
        String patientString = HttpHandler.HttpGetExec(HttpHandler.baseURI + ET2);

        String patientFName = "NOT FOUND",
                patientLName = "NOT FOUND",
                DOB = "NOT FOUND",
                patientGender = "NOT FOUND",
                hospitalNumber = "NOT FOUND";
        JSONObject patientObj = null;

        try {
            patientObj = new JSONObject(patientString);
            patientFName = (String) patientObj.get("PatientFName");
            patientLName = (String) patientObj.get("PatientLName");
            DOB = (String) patientObj.get("DOB");
            patientGender = (String) patientObj.get("PatientGender");
            hospitalNumber = (String) patientObj.get("HospitalNumber");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        tv1.setText(patientFName + " " + patientLName);
        tv2.setText("DOB" + "  " + DOB);
        tv3.setText("Gender" + " " + patientGender);
        tv4.setText("Hospital" + " " + hospitalNumber);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T14:19:07.080

正如 njzk2 提到的，您对 ET2 的评估为时过早。

您在 onCreate() 中执行此操作，这意味着在用户有机会在 ET1 中键入任何内容之前已经分配了 ET2，因此它始终为空。

您需要做的是`ET2 = ET1.getText().toString();`向下移动，作为`button1OnClick`.

大概`button1OnClick`是绑定到`android:onClick`你视图xml中的参数吧？

另外，什么是HttpHandler？我无法从你的进口中看出。我不确定它是什么，但可能值得考虑将其余调用移到 AsyncTask 中。

# asp.net - 使用 ASP.net 创建“Web 服务”——DLL 中有什么？

> ID：15387473
> 
> 赞同：3
> 
> 时间：2013-03-13T14:01:20.643
> 
> 标签：asp.net

全部，

提前抱歉 - 我是ASP.net的**新手。**

我正在做一个相当简单的项目。我有一个收集用户输入的 HTML 页面。输入完成后 - html 页面使用 AJAX 将数据发布到 Web 服务。该服务接收数据，对其进行一些处理，然后发回响应。

这个应用程序的“客户端”部分是纯 HTML/Javascript（不是 ASP.net），并且完整且运行良好。

这个应用程序（MyHandler.ashx）的“服务”部分是使用 ASP.net 构建的。从技术上讲 - 它所做的是从 AJAX 帖子接收数据。然后，它`Microsoft.Office.Interop.Excel`用于打开 Excel 电子表格，将用户的输入传递**到该电子表格中，然后****从**电子表格中检索几个计算值，并将这些值返回到 AJAX 帖子的响应中。

使用 Visual Studio VS，我已经在我的 PC 上本地运行了整个过程。

当我“发布”项目时，VS 会创建大量文件。我将这些文件发送给管理服务器的团队；他们部署了它们，瞧——它起作用了。（必要的 Office 互操作库安装在服务器上）。

所以 - 我的问题 - 当我对处理程序 - MyHandler.ashx 进行一些适度的更改（例如，验证，错误处理）时 - 这些已发布文件中的哪些实际更改了？如果我想重新部署 - 我是否只需要重新发送 MyHandler.ashx 的更新版本？或者，对该文件的简单编码更改是否需要更改 DLL？

我想我的问题是，一般来说 - DLL**中有什么？**（例如，它是 MyHandler.ashx 的编译版本吗？）

更具体地说 - 发布我的项目会创建以下我不太了解的文件：

*   网页配置
*   Global.asax（在我的项目中，这里没有太多内容）
*   bin/MyProject.dll

那么，如果我对 MyHandler.ashx 进行更改 - 我可以简单地重新部署该文件吗？或者，我是否需要“发布”，然后“重新部署”thd dll？（通过更改 - 我的意思是简单的代码更改，而不是包含/排除其他外部依赖项的决定）。

抱歉 - 对于知识渊博的 ASP.net 开发人员来说，这个问题一定是无稽之谈。但是，对于我使用过的其他技术，事情很清楚：

*   如果您正在开发 Flash 项目，您可以在 .FLA 文件中编写源代码，然后编译，然后部署生成的 .SWF 文件。
*   如果您正在开发 HTML/JavaScript/PHP 项目，则编写这些文件，然后部署这些相同的文件

我试图更好地理解 ASP.net 是什么。

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:07:32.997

DLL 包含文件后面的编译代码`ASHX`。这`ASHX`只是 HTTP 处理程序的服务定义。当您更改服务（例如代码）时，只需像以前一样发出另一个**Publish并发送整个包。**

但简而言之，当您更改代码时，DLL 就是在更改的内容。

# java - 如何在 Java 中修复 JobExecutionException？

> ID：15387479
> 
> 赞同：-3
> 
> 时间：2013-03-13T14:01:45.070
> 
> 标签：java, listener

我的程序有错误：

```
[DefaultQuartzScheduler_Worker-1] INFO org.quartz.core.JobRunShell - Job DEFAULT_GROUP.HelloJob threw a JobExecutionException: 
org.quartz.JobExecutionException: Testing Exception
    at CronTriggertes.HelloJob.execute(HelloJob.java:15)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:206)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:548) 
```

我不知道如何解决它。

```
package CronTriggertes;
package CronTriggertes;
import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;
import java.util.Date;

public class HelloJob implements Job {
    public void execute(JobExecutionContext arg0) throws JobExecutionException{
        System.out.println("Hello World Quartz Scheduler with CronTrigger: " + new Date());                 throw new JobExecutionException("Testing Exception");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:04:35.063

您可以在此处找到此异常的描述：

[http://quartz-scheduler.org/api/2.0.0/org/quartz/JobExecutionException.html](http://quartz-scheduler.org/api/2.0.0/org/quartz/JobExecutionException.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:38:01.060

从代码中去掉`throw new JobExecutionException("Testing Exception");`...直接相关`Job DEFAULT_GROUP.HelloJob threw a JobExecutionException`

# math - 从数字中删除位

> ID：15387482
> 
> 赞同：3
> 
> 时间：2013-03-13T14:02:00.167
> 
> 标签：math, boolean-logic

我有一些标志，其中：

```
A = 1 (0001)
B = 2 (0010)
C = 4 (0100)
D = 8 (1000) 
```

我想在我的标志中设置位 A 和 C：flag = A | C

现在我的标志是 5 (0101)。

我需要从标志中删除位 C。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T14:29:02.203

要清除标志，您通常`AND`使用它的*补码*，例如在 C 和相关语言中：

```
x = 5;           // x = 0101
x = x & ~C;      // x = x & 1011 = 0101 & 1011 = 0001 
```

注意：这可以稍微简洁地表达为：

```
x &= ~C; 
```

或者，如果您已经知道某个特定位是 1，并且您想将其设置为 0，那么您可以使用 XOR 切换（反转）它：

```
x = x ^ C;       // x = x ^ 0100 = 0101 ^ 0100 = 0001 
```

或者：

```
x ^= C; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:08:53.890

我的解决方案是：

1) 检查，是否位设置

```
flag & C == C 
```

2) 如果位设置应用 XOR 操作：

```
flag ^ C 
```

现在我的标志是 5 (0001)。

可能有更简单的解决方案吗？

# sql - 在 Oracle 中将多对多关系重构为多对一

> ID：15387488
> 
> 赞同：1
> 
> 时间：2013-03-13T14:02:12.480
> 
> 标签：sql, oracle

给定下表排列：

A - B - C

其中 B 是 A 和 C 之间的连接表。事实证明 A 和 C 之间的域关系确实是一对多（A 侧有很多），我想重构我们的模式以反映这一事实。

是否可以编写一条 SQL UPDATE 语句将 C 的所有正确 id 插入 A 的正确行（A 的每一行都将有一个 C id）？还是需要什么手续？

注意：我将接受仅 Oracle 的答案，因为这是唯一需要进行迁移的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:07:19.447

```
update tableA 
   set foreignKeyColumn = (
      select columnC 
         from tableB
         where columnA = tableA.columnA
   ); 
```

实际上看到完整的表结构会更容易，但这应该可行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:09:54.197

```
-- assuming you have tableA (id_a), tableB (id_a,id_c), tableC (id_c)

alter table tableA add id_c int;
alter table tableA add constraint foreign key (id_c) references tableC(id_c);

merge into tableA a
using tableB b
on (a.id_a = b.id_a)
when matched then update set
  a.id_c = b.id_c;

commit; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:10:57.907

当然

```
Alter Table C Add FK2A int Null
Update C Set c.FK2A =
      (Select FK2A From B
       Where FK2C = C.PK)
Alter Table C Alter Column FK2A int Not Null
Alter Table C Add Constraint FKTableCToA 
              Foreign Key (FK2A)
              References A (PK) 
```

# visual-studio-2010 - 为什么将我的解决方案转换为 Visual Studio 2012 后 de testrunner 崩溃

> ID：15387491
> 
> 赞同：0
> 
> 时间：2013-03-13T14:02:14.923
> 
> 标签：visual-studio-2010, visual-studio-2012, mstest

在将解决方案转换为 Visual Studio 2012（以前的版本是 Visual Studio 2010）后，我尝试在解决方案中运行单元测试。现在 testrunner 在执行单个测试之前崩溃。我收到一条相当笼统的错误消息。如果我选择调试 Visual Studio，我会得到以下堆栈跟踪：

```
Microsoft.VisualStudio.QualityTools.TMI.dll!Microsoft.VisualStudio.TestTools.TestManagement.AssemblyKeyExtractor.ExtractPublicKeyFromKeyFile(string keyFile, out bool isPublicKey)
[Managed to Native Transition]
Microsoft.VisualStudio.QualityTools.TMI.dll!Microsoft.VisualStudio.TestTools.TestManagement.PublicKeyHolder.this[string].get(string file)
Microsoft.VisualStudio.QualityTools.TMI.dll!Microsoft.VisualStudio.TestTools.TestManagement.DeploymentHelper.GetPublicKey(string keyFile, Microsoft.VisualStudio.TestTools.TestManagement.PublicKeyHolder publicKeyHolder)
Microsoft.VisualStudio.QualityTools.TMI.dll!Microsoft.VisualStudio.TestTools.TestManagement.DeploymentHelper.ProcessCodeCoverageItemsForDeployment(System.Collections.Generic.List<Microsoft.VisualStudio.TestTools.TestManagement.DeploymentCoverageItem> deploymentCoverageItems)
Microsoft.VisualStudio.QualityTools.TMI.dll!Microsoft.VisualStudio.TestTools.TestManagement.DeploymentManager.DoDeployment(Microsoft.VisualStudio.TestTools.Common.TestRun run, Microsoft.VisualStudio.TestTools.Common.FileCopyService fileCopyService)
Microsoft.VisualStudio.QualityTools.TMI.dll!Microsoft.VisualStudio.TestTools.TestManagement.ControllerProxy.SetupTestRun(Microsoft.VisualStudio.TestTools.Common.TestRun run, bool isNewTestRun, Microsoft.VisualStudio.TestTools.Common.FileCopyService fileCopyService, Microsoft.VisualStudio.TestTools.TestManagement.DeploymentManager deploymentManager)
Microsoft.VisualStudio.QualityTools.TMI.dll!Microsoft.VisualStudio.TestTools.TestManagement.ControllerProxy.SetupRunAndListener(Microsoft.VisualStudio.TestTools.Common.TestRun run, Microsoft.VisualStudio.TestTools.Common.FileCopyService fileCopyService, Microsoft.VisualStudio.TestTools.TestManagement.DeploymentManager deploymentManager)
Microsoft.VisualStudio.QualityTools.TMI.dll!Microsoft.VisualStudio.TestTools.TestManagement.ControllerProxy.QueueTestRunWorker(object state)
mscorlib.dll!System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(object state)
mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)
mscorlib.dll!System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
mscorlib.dll!System.Threading.ThreadPoolWorkQueue.Dispatch()
mscorlib.dll!System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()
[Native to Managed Transition] 
```

堆栈跟踪表明我正在测试签名程序集这一事实可能会触发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:02:14.923

经过一番试验，我发现我可以通过在测试运行配置文件中禁用测试运行的代码覆盖来解决这个问题。您可以通过打开 LocalTestRun.testrunco​​nfig 文件（位于解决方案项下）-> 数据和诊断然后禁用“代码覆盖率（Visual Studio 2010）”来执行此操作

# ruby-on-rails - 尽管在 has_many 中强制执行模型的唯一性

> ID：15387492
> 
> 赞同：0
> 
> 时间：2013-03-13T14:02:16.607
> 
> 标签：ruby-on-rails, activerecord

我有一个`User`模型，它 has_many `Dish`through `Recommendation`。我想强制 的唯一性`Dish`，以及 的唯一性`Recommendation`。

我应该怎么做`ActiveRecord`呢？

在我的`dish.rb`：

```
validate_uniqueness_of :dish_name 
```

我想要的是：当用户推荐一道菜时，如果它不存在，则创建一个新菜，然后创建推荐。如果菜已经存在，那么只需创建推荐并指向现有菜。

我是否需要手动处理这些情况（即检查`dish`控制器中是否存在），或者 ActiveRecord 有办法在内部处理它？

更新： `validate_uniqueness_of :dish_name`只检查并返回错误消息，如果`dish`在那里创建。它可能不会创建`recommendation`指向现有`dish`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:15:46.997

你总[`.find_or_create_by_<attribute>`](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Dynamic+attribute-based+finders)能找到这道菜

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:17:44.320

如我所见，不止一个用户可以推荐同一道菜。

您的模型应如下所示：

```
Class User < ActiveRecord::Base
has_many :recommendations
has_many :dishes, :through => :recommendations
end

Class Dish < ActiveRecord::Base
has_many :recommendations
has_many :users, :through => :recommendations
end 
```

因此，您在数据库中的 Recommendations 表应该有两列（除了它的 id 和时间戳），称为`user_id`and `dish_id`。要验证用户不会两次推荐同一道菜，请执行以下操作：

```
Class Recommendations < ActiveRecord::Base
belongs_to :dish
belongs_to :user
validates_uniqueness_of :dish_id, :scope => :user_id
end 
```

而且我不知道`.find_or_create_by`丹推荐的方法，所以一定要尝试使用类似的方法。

希望我帮助:)

# javascript - 单击后CSS下拉菜单未关闭

> ID：15387504
> 
> 赞同：0
> 
> 时间：2013-03-13T14:02:36.483
> 
> 标签：javascript, css, drop-down-menu

我正在使用以下教程：[http ://www.script-tutorials.com/css3-metal-menu-with-icons/](http://www.script-tutorials.com/css3-metal-menu-with-icons/)

问题是当我单击子菜单上的任何元素时，子菜单不会关闭。我的应用程序正在使用 jQuery UI 选项卡动态添加一个选项卡，其内容作为一个局部视图 (mvc4)，以便不会重新加载应用程序页面。我想在单击某个项目时隐藏子菜单，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:11:58.313

子菜单都位于类名为 subs 的 div 中。你可以用 JQuery 隐藏它。

```
$('html').click(function() {
  $(".subs").hide();
}); 
```

现在，任何地方的所有点击都应该隐藏子菜单或具有类 subs 的任何其他元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:07:40.617

由于您使用的是 jQuery，如果您知道确切的深度，我会使用 click 事件处理程序（事件在哪里`e`）执行类似遍历父母的操作： `$(e.target).parent().parent().hide(), etc`

如果它可以是动态的，您可以稍微降低效率，但一口气： `$(e.target).parents('.thedropdownmenuclass').hide()`

# ios - 使用谓词查找以 A 开头和结尾的字符串

> ID：15387507
> 
> 赞同：0
> 
> 时间：2013-03-13T14:02:48.517
> 
> 标签：ios, objective-c, cocoa, nsarray, nspredicate

我能够从包含以 . 开头和结尾的字符串的数组中找到所有值`A`。

我可以使用和`-hasPrefix`上课。`-hasSuffix``NSString`

但我没有找到任何方法来找到相同的使用`NSPredicate`类。

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T14:09:30.513

试试这个可能对你有帮助

```
NSPredicate *p = [NSPredicate predicateWithFormat:@"SELF like [c]'A*A'"];
    NSArray *a = [NSArray arrayWithObjects:@" AhfjA ", @"test1", @"Test", @"AntA", nil];
    NSArray *b = [a filteredArrayUsingPredicate:p];
    NSLog(@"%@",b); 
```

# node.js - Node.js - new Date() 上的“RangeError：超出最大调用堆栈大小”错误

> ID：15387510
> 
> 赞同：0
> 
> 时间：2013-03-13T14:02:52.363
> 
> 标签：node.js, datetime, stack

我正在创建一个 Node.js 模块来增强基本控制台输出（我知道有 100 多个节点模块可以做到这一点，我唯一的目的是练习节点）。

我想用控制台消息显示时间。这是模块代码：

```
getTime = function(){
    var date = new Date()
    return date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()
}

module.exports.log = function(text){
    console.log(getTime() + ' - ' + text)
} 
```

所以我可以使用我的模块：

```
myConsole = require('./myconsole.js')
myConsole.log('Hello from my own console module') 
```

它适用于少数测试，但 myConsole 的多次调用（在短时间内）会导致来自节点的以下错误消息：

```
 var date = new Date()
               ^
RangeError: Maximum call stack size exceeded 
```

知道如何避免这种情况吗？我必须销毁日期实例吗？（我尝试使用`delete date`但它不起作用）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:10:14.320

当我使用您的代码进行测试时，不会发生 RangeError。我认为它不会导致调用堆栈溢出。超出最大调用堆栈大小错误通常是由程序中的调用循环引起的。我想您需要检查程序的调用流程以找出导致错误的原因。

# c++ - 二进制操作的类型擦除

> ID：15387511
> 
> 赞同：2
> 
> 时间：2013-03-13T14:02:55.303
> 
> 标签：c++, type-erasure

可以编写一个包装器，它采用支持特定操作的任何类型，例如

```
#include <iostream>

class Houdini
{
  struct I_Houdini_Impl
  {
    virtual void foo_impl(int x) const = 0;

    virtual ~I_Houdini_Impl() { }
  };

  template <typename T>
  struct Houdini_Impl : I_Houdini_Impl
  {
    Houdini_Impl(T const & t) : m_t(t) { }

    void foo_impl(int x) const { m_t.foo(x); }

    T m_t;
  };
public:
  template <typename T>
  Houdini(T const & t) : m_impl(new Houdini_Impl<T>(t)) { }

  void foo(int x) const { m_impl->foo_impl(x); }
protected:
private:

  std::unique_ptr<I_Houdini_Impl> m_impl;
};

class A
{
public:
  void foo(int x) const { std::cout << "A::foo(" << x << ")" << std::endl; }
};

class B
{
public:
  template <typename T>
  char foo(T const & t) const { std::cout << "B::foo(" << t << ")" << std::endl; return 'B';}
};

void houdini()
{
  A a;
  B b;
  Houdini ha(a);
  Houdini hb(b);

  ha.foo(7);
  hb.foo(8);
} 
```

我可以在 Houdini 类中包装任何支持可以用 int 调用的 const 方法 foo 的东西，无论它是普通成员函数（如 A 类）还是函数模板（如 B 类）（和让我们暂时忽略 Houdini 应该表现出价值语义学）。到目前为止一切都很好，但我想做的是编写一个支持二进制操作的包装器，例如编写一个接受任何类型的包装器，你可以说，只要可以添加包装的对象，就可以添加任何两个包装器并从添加返回包装的返回对象：

```
class A { };
class B { };
class C { };

C operator+(A, B) { return C(); }

class Randi
{
public:
  template <typename T> Randi(T ) { }

/* magic stuff goes here */
};

void randi()
{
  A a;
  B b;

  Randi ra(a);
  Randi rb(b);

  Randi rc = ra + rb;
  // rc is a Randi-object that wraps an object of type C
} 
```

如果我事先知道我要存储什么类型，我可以通过写访问者来做到这一点，但这正是我*不想*做的。我需要打开两个对象，尝试在两个展开的对象上调用 operator+ 并再次包装结果，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:17:14.280

考虑以下

```
class Number
{
virtual Number* sum(Number* other) = 0;
};

class Int
     : public Number
{
    virtual Number* sum(Number* other)
    {
        // hard to implement since we doesn't know the type of other
    }
};

class Double
     : public Number

{
    virtual Number* sum(Number* other)
    {
        // hard to implement since we doesn't know the type of other
    }
}; 
```

我们可以在 sum 实现中做 dynamic_casts 来分别处理每个案例，或者我们可以使用双重调度。

```
class Double;
class Int;

class Number
{
public:
    virtual Number* sum(Number* other) = 0;
protected
    virtual Number* sum(Int* other) = 0; 
    virtual Number* sum(Double* other) = 0; 
};

class Int
     : public Number
{
    virtual Number* sum(Number* other)
    {
        return other->sum(this);
    }

    virtual Number* sum(Int* other)
    {
        // implement int + int
    }

    virtual Number* sum(Double* other)
    {
        // implement int + double
    }
};

class Double
     : public Number

{
    virtual Number* sum(Number* other)
    {
        return other->sum(this);
    }

    virtual Number* sum(Int* other)
    {
        // implement double + int
    }

    virtual Number* sum(Double* other)
    {
        // implement double + double
    }
}; 
```

在机器人案例中，实现应该了解所有派生类。这意味着 Randi 类的 Houdini_Impl 类比应该知道可能传递给 Randi 构造函数的所有其他类型，这是不可能的。

# python - 计数在输出文件中不匹配......（应该得到匹配的记录）

> ID：15387515
> 
> 赞同：0
> 
> 时间：2013-03-13T14:03:10.037
> 
> 标签：python

在 tmp 文件夹中，所有文件的 PUT_LOG 标记的总数为 156……但我在这里面临的问题是在输出文件中获得相同的计数，而我没有得到……

我正在尝试从 PUT_LOG 中提取前 2 个参数并将其转储到 outfiles

```
captive.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RECVD_SIGCHLD, 3, INT, pid,
captive.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_EXECUTE_CMD,1,STRING, cmd);
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_EXECUTE_CMD_FAILED,1, STRING, cmd);
captive.c:        PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_NO_RAD_SERVERS, 3, IP_INT,
captive.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_GET_RAD_GRP_FAILED,
captive.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_GET_RAD_GRP_FAILED, 0);
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_LOGIN_COUNT,1,
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USER_MAC_COUNT, 2,
captive.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_SEND_USER_LIST, 1, INT, resp->count);
captive.c:    PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ADD_ACCOUNT, 4, INT,
captive.c:    PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_DEL_ACNT, 1, STRING, req->account_name);
captive.c:    PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ACCNT_EDIT, 3, STRING,
captive.c:        PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ADD_RAD_USER, 1, STRING,
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USR_ALREADY_CREATED, 1,
captive.c:                PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_CALCULATE_EXPIRY_FAILED,
captive.c:                PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_EXPIRY_SCHEDULE_FAILED,
captive.c:                    PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_USER_ALREADY_EXPIRED,
captive.c:                    PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_CALCULATE_EXPIRY_FAILED,
captive.c:                    PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_EXPIRY_TIME_ERR, 0);
captive.c:        PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_MAX_CLIENTS_REACHED,
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_MALLOC_FAILED,0);
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_MALLOC_FAILED, 0);
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_AUTH_TO_APMGR_FAILED, 0);
captive.c:        PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ADD_GUEST, 1,
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USR_GUEST_IDX, 2,
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_MALLOC_FAILED,0);
captive.c:        PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ADD_USER, 1, STRING, req->user);
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USR_GUEST_IDX, 2,
captive.c:            PUT_LOG(LOG_LEVEL_INFO,CAPTIVE_ADD_USER_ACCOUNT,
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_CALCULATE_EXPIRY,4, STRING,
captive.c:    PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_USER_EXPIRED, 1, STRING,
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_USER_DONT_EXIST,
captive.c:        PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_USER_ALREADY_EXPIRED,
captive.c:    PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_USER_EXPIRY_SCHEDULE, 4,
captive.c:    PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_DELETE_USER, 1,
captive.c:    PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_EDIT_USER, 2,
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_CALCULATE_EXPIRY,4, STRING,
captive.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_CFG_CHANGE_NOT_FAILED,0);
captive.c:    PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_REAUTH_AND_MAX_CL_CFG,
captive.c:            PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_UPLOAD_FAILED, 0 );
captive.c:            PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_FILE_COPY_FAILED, 0);
captive.c:            PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_ERR_COPY_F_TO_SERV, 0);
captive.c:                PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_EULA_COPY_FAILED, 0);
captive.c:            PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_EULA_OPEN_FAILED, 0);
captive.c:            PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_EULA_TO_CONF_ERR, 0);
captive.c:    PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_URL_REDIR_STRING,1, STRING,
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_SEND_NOTIF_APMGR,
captive.c:        PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_NULL_MAC_ERR, 0);
captive.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_ADD_MAC_TO_USR, 2,
captive.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_MAC_COUNT, 1, INT, 
captive.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USER_AUTH, 2,
captive.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_USR_NOT_FOUND, 1,
captive.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_ACCNT_NAME, 1, STRING,
captive.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_MAX_CLIENTS_REACHED, 1,
captive.c:            PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_CLEAR_ALL_GUEST,0);
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_INDEX_USED, 2,
captive.c:                        PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_RAD_REDUND_AVOID,
captive.c:            PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_UNKNWN_MSG, 1, INT,
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_REPLYING_NOW,0);
captive.c:   PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_UPD_USR_ASSOC_INFO, 3, STRING,
captive.c:        PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_USER_DONT_EXIST, 1,
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG , CAPTIVE_SYSTEM_READY,0);
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_RAD_CFG_EDIT, 0);
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_REDUND_DISABLE,0);
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_REDUND_STATE, 1,
captive.c:                PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_UPD_ASSOC_FAILED,0);
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_LOG_LEVEL_CHANGE, 1, INT, *captive_log_level);
captive.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_CREATE_EULA_FILE, 0);
captive.c:                    PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_EULA_COPY_FAILED, 0);
captive.c:                PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_EULA_OPEN_FAILED, 0);
captive.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_URL_REDIR_STRING,1, STRING,
captive.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_INIT,0);
captive.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_CONFIG_INIT_FAILED,0);
captive.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_IPC_INIT_FAIL,
captive_cfg.c:            PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_CONFIG_VER_ERR,1,INT,version);
captive_dm.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_DM_REG_FAILED, 1, INT, errno);
captive_radius_auth.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_RAD_GROUP, 1, INT, rad_cfg->group);
captive_radius_auth.c:                PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_RAD_ID_GRP_GET_FAILED, 1,
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_INVALID_RAD_GRP_ID, 1, 
captive_radius_auth.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_INVALID_RAD_GRP_ID, 1,
captive_radius_auth.c:        PUT_LOG (LOG_LEVEL_DEBUG_ERR, CAPTIVE_CANCEL_TIMEOUT_ERR, 0);
captive_radius_auth.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_RAD_RECV_ERR, 1, STRING,
captive_radius_auth.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_RAD_REPLY_SHORT, 0);
captive_radius_auth.c:        PUT_LOG (LOG_LEVEL_DEBUG_ERR, CAPTIVE_RAD_INVALID_VAL_PAIR, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_VALUE_PAIR, 4,
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_USR_SESSN_TOUT, 2,
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_USR_SSN_ERR, 1,
captive_radius_auth.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_RAD_SSN_TERM_TIME, 1,
captive_radius_auth.c:                PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_RAD_SESSN_TERM_TIME_ERR, 1,
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_USR_SSN_TERM_TIME, 2,
captive_radius_auth.c:                PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_RAD_SESSN_TERM_TIME_ERR, 1,
captive_radius_auth.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_RAD_TERM_USR_TIME, 2,
captive_radius_auth.c:            PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_RAD_SSN_TIME_NOT_RECV, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_RAD_AUTH_FAIL_SERV, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_AUTH_SND_SUCC,2, INT,
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_SOC_REG_FAILED, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_SET_RESP_TOUT, 1,
captive_radius_auth.c:            PUT_LOG (LOG_LEVEL_DEBUG_ERR, CAPTIVE_REG_TIMEOUT_FAIL, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_RAD_AUTH_SND_FAIL, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_AUTH_RESULT, 2,
captive_radius_auth.c:            PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_RAD_USER_INFO, 5,
captive_radius_auth.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_TRY_AGAIN, 4,
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_SEND_TO_FAILED, 1,
captive_radius_auth.c:            PUT_LOG (LOG_LEVEL_ERR, CAPTIVE_RAD_NO_RESP, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_OPEN_RAD_CONF_FAIL, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_OPEN_RAD_FILE_ERR, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_RAD_SERV_INVALID, 2, INT,
captive_radius_auth.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_RAD_READ_FILE_ERR, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_DIC_FILE_ERR, 1,
captive_radius_auth.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_RAD_CONF_CREATE_FAIL, 0);
captive_radius_auth.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_RAD_CONF_CREATE_FAIL, 0);
captive_radius_auth.c:       PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_RAD_CONF_GET_TIMEOUT, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_GROUP, 1, INT,
captive_radius_auth.c:            PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_RAD_INIT_FAIL, 1, INT,
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_MALLOC_FAILED, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_CTX_ALLOC, 1,
captive_radius_auth.c:        PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_RAD_AUTH_SND_FAIL, 1,
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_RAD_AV_PARSE_ERR, 1,
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_USR_AUTH_SUCC, 1,
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_RAD_AUTH_SND_FAIL, 1, STRING,
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_INVALID_RAD_GRP_ID, 1, INT,
captive_radius_auth.c:        PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_MALLOC_FAILED, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_SND_TO_SRV_SUCC, 0);
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_GUEST_CTX_FAILED, 0);
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_GUEST_CTX_INFO, 3,
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_AUTH_SND_SUCC, 2,
captive_radius_auth.c:            PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_SOC_REG_FAILED, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_SET_SERV_TOUT, 1, INT,
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_REG_TIMEOUT_FAIL, 0);
captive_radius_auth.c:        PUT_LOG( LOG_LEVEL_ERR, CAPTIVE_RAD_SEND_AUTH_FAIL, 0 );
captive_radius_auth.c:       PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_RAD_CONF_GET_TIMEOUT, 0);
captive_radius_auth.c:            PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RAD_INDEX, 1, INT,
captive_radius_auth.c:                PUT_LOG ( LOG_LEVEL_DEBUG_ERR, CAPTIVE_RAD_INIT_FAIL, 1, INT,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_USR_INFO, 3,
captive_table.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_BUCKET_SRCH, 2,
captive_table.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_HASH_INDEX, 2,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_USR_NOT_FOUND, 1,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_USR_INDEX, 2,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_INDEX, 2,
captive_table.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_HASH_GUEST_IDX, 1,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_FIND_USR, 1,
captive_table.c:        PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_HASH_LOOP_ERR, 3,
captive_table.c:            PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_HASH_ERR_INFO,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_ADD_USR, 1,
captive_table.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_OVERWRITE, 2,
captive_table.c:        PUT_LOG( LOG_LEVEL_DEBUG_ERR, CAPTIVE_HASH_NO_FREE_ENTRY, 0);
captive_table.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_HASH_ADD_USER, 2,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_ADD_USR, 1,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_USR_INDEX, 2,
captive_table.c:    PUT_LOG ( LOG_LEVEL_DEBUG, CAPTIVE_HASH_DEL_USR, 2,
captive_table.c:    PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_HASH_DEL_IDX, 1,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_DEL_IDX, 1,
captive_table.c:        PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_HASH_USR_MARK_INVLD, 0);
captive_table.c:        PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_ALRDY_DEL_USR, 0);
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_SET_DEL_FLAG, 1,
captive_table.c:    PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_HASH_DEL_IDX, 1, 
```

请找到以下代码以供参考：

```
#!/usr/bin/env python

import os
import re

def extract_lines(file_in, file_out):
    print "file in extract_lines is " + file_in
        with open(file_in, "a+") as f_in:
            try:
            f_out = open(file_out,"a+");
            for line in f_in:
                    res = re.search("(PUT_LOG\()(.*)(\)\;)", line)
            print res
                        i = 0
                    if res is not None:
                        for segment in res.group(2).split(","):
                                segment = segment.strip()
                                if i == 2:
                        f_out.write("\n")
                        break

                    f_out.write(segment+ " : ")
                                    i += 1

            except IOError as e:
        print 'Operation failed: %s' % e.strerror

script_dir = os.path.dirname(os.path.abspath(__file__))
target_dir = os.path.join(script_dir, 'tmp')
for dirpath, dirnames, filenames in os.walk(target_dir):
    print filenames
    for files in filenames:
        print "files are these"+files
        extract_lines(files,os.path.realpath("outfile.txt"))

My expected result is something like this and it should match with count:

   LOG_LEVEL_DEBUG : CAPTIVE_EXECUTE_CMD : 
LOG_LEVEL_DEBUG_ERR : CAPTIVE_EXECUTE_CMD_FAILED : 
LOG_LEVEL_ERR : CAPTIVE_GET_RAD_GRP_FAILED : 
LOG_LEVEL_DEBUG : CAPTIVE_SEND_USER_LIST : 
LOG_LEVEL_INFO : CAPTIVE_DEL_ACNT : 
LOG_LEVEL_ERR : CAPTIVE_EXPIRY_TIME_ERR : 
LOG_LEVEL_DEBUG_ERR : CAPTIVE_MALLOC_FAILED : 
LOG_LEVEL_DEBUG_ERR : CAPTIVE_MALLOC_FAILED : 
LOG_LEVEL_DEBUG_ERR : CAPTIVE_AUTH_TO_APMGR_FAILED : 
LOG_LEVEL_DEBUG_ERR : CAPTIVE_MALLOC_FAILED : 
LOG_LEVEL_INFO : CAPTIVE_ADD_USER : 
LOG_LEVEL_ERR : CAPTIVE_CFG_CHANGE_NOT_FAILED : 
LOG_LEVEL_ERR : CAPTIVE_UPLOAD_FAILED : 
LOG_LEVEL_ERR : CAPTIVE_FILE_COPY_FAILED : 
LOG_LEVEL_ERR : CAPTIVE_ERR_COPY_F_TO_SERV : 
LOG_LEVEL_ERR : CAPTIVE_EULA_COPY_FAILED : 
LOG_LEVEL_ERR : CAPTIVE_EULA_OPEN_FAILED : 
LOG_LEVEL_ERR : CAPTIVE_EULA_TO_CONF_ERR : 
LOG_LEVEL_DEBUG_ERR : CAPTIVE_NULL_MAC_ERR : 
LOG_LEVEL_INFO : CAPTIVE_CLEAR_ALL_GUEST : 
LOG_LEVEL_DEBUG : CAPTIVE_REPLYING_NOW : 
LOG_LEVEL_DEBUG : CAPTIVE_SYSTEM_READY : 
LOG_LEVEL_DEBUG : CAPTIVE_RAD_CFG_EDIT : 
LOG_LEVEL_DEBUG : CAPTIVE_REDUND_DISABLE : 
LOG_LEVEL_DEBUG_ERR : CAPTIVE_UPD_ASSOC_FAILED : 
LOG_LEVEL_DEBUG : CAPTIVE_LOG_LEVEL_CHANGE : 
LOG_LEVEL_DEBUG : CAPTIVE_CREATE_EULA_FILE : 
LOG_LEVEL_DEBUG_ERR : CAPTIVE_EULA_COPY_FAILED : 
LOG_LEVEL_DEBUG_ERR : CAPTIVE_EULA_OPEN_FAILED : 
LOG_LEVEL_DEBUG : CAPTIVE_INIT : 
LOG_LEVEL_ERR : CAPTIVE_CONFIG_INIT_FAILED : 
```

# magento - 安装 - 必须加载 PHP 扩展“pdo_mysql”

> ID：15387518
> 
> 赞同：1
> 
> 时间：2013-03-13T14:03:12.877
> 
> 标签：magento

这就是我在 phpinfo() 上看到的；

pdo_mysql PDO Driver for MySQL 启用客户端 API 版本 5.1.68

指令本地值主值 pdo_mysql.default_socket /var/lib/mysql/mysql.sock /var/lib/mysql/mysql.sock

但我仍然收到 magento 消息：“必须加载 PHP 扩展“pdo_mysql””

这是为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-05T19:37:29.017

打开或制作`php.ini`文件到根目录并添加以下代码：

```
extension=pdo.so
extension=pdo_sqlite.so
extension=sqlite.so
extension=pdo_mysql.so 
```

# php - MYSQL LIKE 在同一列中多次

> ID：15387525
> 
> 赞同：-4
> 
> 时间：2013-03-13T14:03:49.240
> 
> 标签：php, mysql

我有 3 个下拉列表的过滤器，每个列表都包含相同的条件（运营商、服务、SIM 卡）。当这些下拉列表包含不同的搜索类别时，搜索功能可以正常工作，但如果 2 或 3 个下拉列表中的类别相同，则过滤器无法正常工作。由于不正确的 SQL 查询：

`"SELECT * FROM table WHERE id = " . $_GET['id'] . " AND operator like %tele% AND operator like %bite%"`

应该

`"SELECT * FROM table WHERE id = " . $_GET['id'] . " AND operator like %tele% OR operator like %bite%"`

这是我的过滤器 php 代码：

```
 $this->_sql['where'].= $this->reg['post']['flt_find_1'] ? " AND ".$this->reg['post']['flt_field_1']." like '%".$this->reg['post']['flt_find_1']."%' " : "";      
 $this->_sql['where'].= $this->reg['post']['flt_find_2'] ? " AND ".$this->reg['post']['flt_field_2']." like '%".$this->reg['post']['flt_find_2']."%' " : "";  
 $this->_sql['where'].= $this->reg['post']['flt_find_3'] ? " AND ".$this->reg['post']['flt_field_3']." like '%".$this->reg['post']['flt_find_3']."%' " : ""; 
```

如何检查过滤器中的所有类别是否不同，然后`AND`用于每个类别，但类别相同，使用`OR`（或者可能有其他方法来解决）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:20:19.390

1.  您的代码容易受到 sql-injections 的攻击，因此请检查 get 参数；
2.  如果我理解正确，请尝试如下：

```
SELECT * FROM table WHERE id = '".($_GET['id']*1)."' AND ( operator LIKE '%tele%' AND operator LIKE '%bite%' )";
```

# php - 如何从相同的输入ID中获取所有值

> ID：15387528
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:04:00.393
> 
> 标签：php, jquery, html

jQuery：

```
//value
var user_input = [];

$("#user_input").each(function() {
    user_input.push($("#user_input").val());
});
//test
user_input.push("hi"); 
```

继承人的html：

```
City: <input id="user_input" type="text">
Month: <input id="user_input" type="text">
Year: <input id="user_input" type="text"> 
```

而我的 var_dump 只显示：

```
 array(2) {
    [0]=>
    string(0) ""
    [1]=>
    string(2) "hi"
    } 
```

输出应该是：

```
 array(4) {
    [0]=>
    string(0) ""
    [1]=>
    string(0) ""
    [2]=>
    string(0) ""
    [3]=>
    string(2) "hi"
    } 
```

看起来 jquery 函数根本不循环。希望这不是非法的，在这里发布太多问题:))

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:06:12.250

更改您的 HTML：

```
City: <input class="user_input" type="text">
Month: <input class="user_input" type="text">
Year: <input class="user_input" type="text"> 
```

JS

```
$(".user_input").each(function() {
    user_input.push($(this).val()); // you also had an error here, you should refer current field with this
}); 
```

ID 必须是**唯一的**。这是新开发人员最常犯的错误之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:05:57.677

ID 是 DOM 元素内的唯一标识符。您不应该对多个元素使用相同的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:04:47.390

不可以。您不能对多个元素使用相同的 ID。来自[jQuery 文档](http://api.jquery.com/id-selector/)（重点由我添加）：

> 每个 id 值*在一个文档中只能使用一次*。如果为多个元素分配了相同的 ID，则使用该 ID 的查询将*仅选择 DOM 中第一个匹配的元素*。

尝试上课。

# c# - 在结对编程时我可以使用任何基本的字符串混淆吗？

> ID：15387529
> 
> 赞同：2
> 
> 时间：2013-03-13T14:04:06.683
> 
> 标签：c#, passwords, obfuscation

在与数据库系统配对编程时，有时我们最终会临时硬编码凭据（通常是我们自己的帐户），这会导致合作伙伴在屏幕上出现密码时试图将视线移开，这会导致轻微的尴尬。是否有任何简单的方法可以使用基本混淆（*即*rot13）对密码进行硬编码，而无需其他开发人员快速查看并查看我的密码？

它不需要是安全的。它只需要润滑社会方面。我不想要任何涉及超级安全加密或从文件中读取密码等复杂的事情。这必须在动态编码时快速实施（即最多 10 秒）。理想情况下，我想要类似的东西：

```
string password = string.rot13("zlcnffjbeq"); 
```

类似的东西已经存在了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:08:42.930

我建议将您的密码存储在配置文件中。对于源代码控制，请使用虚拟的。然后在您的 PC 上获取最新版本的配置文件后，您可以通过添加密码来修改配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:10:03.947

***为 Windows 集成安全性配置 SQL Server***

1.  从 Windows 开始菜单中，选择 Microsoft SQL Server，然后选择企业管理器。

2.  打开服务器节点并展开您要授予用户权限的数据库的节点。

3.  右键单击用户节点并选择新建数据库用户。

4.  在“数据库用户属性”对话框中，在“登录名”框中输入域\用户名，然后单击“确定”。此外，配置 SQL Server 以允许所有域用户访问数据库。

来自[MSDN](http://msdn.microsoft.com/en-us/library/bsz5788z%28v=vs.80%29.aspx)。连接字符串变为`Server=x;Initial Catalog=y;Integrated Security=true`而不是`Server=x;Initial Catalog=y;User=you;Pwd=yourpassword`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:44:12.553

也许您可以将密码存储在像这里这样的字符串变量中

```
/* Variable that stores the password */                                             string pwd = "12345";

string password = string.rot13(pwd); 
```

并将其移出编辑器的可视范围。这将是您问题的正确解决方案。

然后您可以在代码中的其他地方使用字符串变量，除非他向右滚动，否则没有人可以看到您的密码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:07:19.063

您可以使用[base64](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)并将您的密码的 base64 版本保存在方便剪切和粘贴的地方，请记住，如果您的系统管理员发现这一点，他们将有一个蓝色的配合。imo 中的两个建议（@Oli/@CodeCaster）都比这个更可取。

[DPAPI](http://msdn.microsoft.com/en-us/library/ms229741.aspx)的工作量更大，但可以说是满足您要求的平衡解决方案，具有一定的安全性。

> .NET Framework 提供对数据保护 API (DPAPI) 的访问，它允许您使用来自当前用户帐户或计算机的信息来加密数据。当您使用 DPAPI 时，您可以缓解显式生成和存储加密密钥的难题。

# android - Android Dex：意外的顶级异常：已添加

> ID：15387530
> 
> 赞同：36
> 
> 时间：2013-03-13T14:04:11.383
> 
> 标签：android, intellij-idea

我的应用程序依赖于一个库项目。这个库项目依赖于 Android Compatibility Package V4。我**没有**导出库项目的依赖项。在我自己的项目中，我添加了 ACL V13 作为依赖项，但是在编译时我得到一个错误，即本质上存在重复的依赖项。我认为不导出库项目的依赖项可以解决此问题，但事实并非如此。

我该如何解决这个问题？

**编辑**

此外，根据[Android 工具文档](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)：

> android-support-v4.jar 和 android-support-v13.jar 的特殊情况。
> 
> 我们为这两个库制作了一个特殊情况，因为 -v13 内部包含 -v4 的完整版本。如果两者都找到，则仅使用 -v13。

所以它应该只是工作......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-14T17:05:33.247

如果您在不同的项目（libs 项目或标准项目）中使用完全相同的 lib jar，apk 工具会自动删除重复的。

当您有两个名称相同但版本不同的库时，问题就开始了。

android-support-v4.jar 和 android-support-v13.jar 文件可以来自不同的版本，因为在不同的支持包版本中总是有相同的名称（[http://developer.android.com/tools/extras/support -library.html#Notes](http://developer.android.com/tools/extras/support-library.html#Notes) )

我会检查您在主项目和 lib 项目中使用的支持库的版本是否完全相同。

为了确保，将两个支持库 jar（位于`android-sdk`文件夹中）复制到您的项目 libs 文件夹中。

```
{android-sdk}/extras/android/support/v4/android-support-v4.jar
AND
{android-sdk}/extras/android/support/v13/android-support-v13.jar 
```

它应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-15T08:32:01.417

从库中删除 v4 包。

清理项目。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-22T11:05:50.590

就我而言，我刚刚将 libs/ 文件夹中的一个 JAR 更新为新版本。

修复它所需要的只是运行 Build -> Rebuild Project，即在“assembleDebug”等之前发出“clean”任务。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-12T19:10:59.787

好吧，在我的故事中，我必须删除相同的模块依赖项，将其添加到库中，然后将此库作为依赖项添加到每个模块中。

所以：

*   模块 a ：取决于 android-v4（并在它的 lib 文件夹中）
*   模块 b ：取决于 android-v4（并在它的 lib 文件夹中）

    1.  添加到项目“android-v4”的库（例如来自第一个模块）。在模块 b lib 文件夹中删除它。

    2.  删除 android-v4 的模块 a 和 b 依赖

    3.  添加到每个模块依赖 -> 库 -> android-v4（您在 2 步中创建）

我不确定这是否是正确的解决方案，但它有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-14T04:29:57.003

您是否尝试将库的依赖项从 v4 更改为 v13 并导出？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-01T15:26:59.600

有时简单地删除 v4 支持库是行不通的，你还需要重新构建或项目。

# asp.net-2.0 - SelectedIndexChanged 未触发

> ID：15387533
> 
> 赞同：1
> 
> 时间：2013-03-13T14:04:17.967
> 
> 标签：asp.net-2.0, selectedindexchanged

我的问题是ddlObra**控件的****SelectedIndexChanged**没有触发，但是当我删除**Page_Load的****Page.ClientScript.RegisterOnSubmitStatement**时，一切正常。我无法理解这种行为。

 ******这是代码：

```
protected void Page_Load(object sender, EventArgs e)
{   
    if (!IsPostBack)
    {            
        CarregarDropDownLists();            
    }
    Page.ClientScript.RegisterOnSubmitStatement(Page.GetType(), "OnSubmitScript", "return handleSubmit()");
}

protected void ddlObra_SelectedIndexChanged(object sender, EventArgs e)
{
    List<Entidades.Empreendimento.Unidade> unidades = Entidades.Empreendimento.Unidade.ListaUnidades(txtLogin.Text);
    ddlBloco.Items.Clear();
    ddlUnidade.Items.Clear();
    ddlBloco.Items.Insert(0, new ListItem("----- Bloco -----", ""));
    ddlUnidade.Items.Insert(0, new ListItem("----- Unidade -----", ""));
    //if (unidades.Count == 1) return;

    foreach (Entidades.Empreendimento.Unidade Un in unidades)
    {
        if (Un.ObraVinculo.idObraCrm.ToString() == ddlObra.SelectedValue)
        {
            if (!ddlBloco.Items.Contains(new ListItem(Un.BlocoCRM.Nome, Un.BlocoCRM.CodigoCRM)))
            {
                ddlBloco.Items.Add(new ListItem(Un.BlocoCRM.Nome, Un.BlocoCRM.CodigoCRM));
            }

            Bandeira = Un.Bandeira;
            Estado = Un.Estado;
        }
    }
    ddlBloco.SelectedIndex = 0;
    ddlUnidade.SelectedIndex = 0;

    LoadAreas();
} 
```

此代码位于**.aspx**文件中

```
<script type="text/javascript">
    function handleSubmit() {
        if (typeof (ValidatorOnSubmit) == 'function' && ValidatorOnSubmit() == false) {
            return false;
        } else {
            $("#btnEnviar").click(function () { return false }).fadeTo(200, 0.5);
            return true;
        }
    }
</script> 
```

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:49:46.997

提交表单所执行的客户端脚本必须返回 true 才能允许表单提交。这使客户端脚本能够有条件地阻止提交表单。******

# python - 在 Python 中替换空格和元字符

> ID：15387550
> 
> 赞同：0
> 
> 时间：2013-03-13T14:04:47.653
> 
> 标签：python, regex

我有一个这样的字符串：

```
str1 = "/path/happy (dog)" 
```

出于某种目的，我想要它：

```
str2 = "/path/happy\ \(dog\)" 
```

我尝试使用重新：

```
str1 = "happy (dog)"
tuple_1 = ('\s+','(',')')

for i in tuple_1:

   match = re.search(r"("+i+")",str1)

   if match:
      str1 = re.sub(match.group(),"\\"+match.group(),str1)

print str1 
```

但它给出了错误：

```
sre_constants.error: unbalanced parenthesis 
```

我知道我在这里遗漏了一些东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:06:27.327

您需要转义任何特殊字符，例如括号：

```
tuple_1 = (r'\s+', r'\(', r'\)') 
```

否则它们将被解释为正则表达式字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:10:00.610

当 i 是 '(' 时，生成的正则表达式将是 '(()'。两个左括号和一个右括号。因此错误消息“不平衡括号”。

您必须转义 tuple_1 中的两个括号：

```
tuple_1 = (r'\s+', r'\(', r'\)') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:22:44.760

即使您应用其他答案提到的更改（转义元组中的搜索词），这是有效且重要的，您仍然会得到

```
Traceback (most recent call last):
  File "<pyshell#4>", line 6, in <module>
    str1 = re.sub(match.group(),"\\"+match.group(),str1)
error: unbalanced parenthesis 
```

但这次在不同的路线上。所以当你使用[正则表达式的子函数](http://docs.python.org/2/library/re.html#re.sub)时，第一个参数需要是一个有效的正则表达式。`match.group()`可以是任何东西，不一定是平衡的。这是正则表达式令人窒息的地方。因此，我们可以从中获取字符串`match.group()`并将[其转义](http://docs.python.org/2/library/re.html#re.escape)，因此我们正在搜索文字。从而将线路更改为

```
str1 = re.sub(re.escape(match.group()),"\\"+match.group(),str1) 
```

另一方面，我们可以只编译一次模式，然后记住它

```
pattern = re.compile(r"("+i+")")
str1 = re.sub(pattern,"\\"+match.group(),str1) 
```

最终代码是：

```
str1 = "/path/happy (dog)"
tuple_1 = (r'\s+', r'\(', r'\)')
for i in tuple_1:
     pattern = re.compile(r"("+i+")")

     match = pattern.search(str1)

     if match:
         str1 = re.sub(pattern,"\\"+match.group(),str1) 
```

str1 现在是`'/path/happy\\ \\(dog\\)'`

# performance - SPDY + Nginx - 建议尽可能使用？

> ID：15387551
> 
> 赞同：5
> 
> 时间：2013-03-13T14:04:51.657
> 
> 标签：performance, nginx, spdy

因此，我们为 SSL 请求/响应运行了 nginx + spdy。

一切正常。

不幸的是，spdy 仅在这一点上是 SSL。

现在，我们的服务相当重 ajax。

我们可以选择相当快速地进行所需的更改，以便将请求发送到我们的 ssl 处理程序，我们的 ssl 处理程序将它们反向代理到它们需要去的地方。

**spdy 真的会加快速度吗？**花几个小时让 chrome / latest firefox 将我们的 ajax 请求发送到我们的 ssl 处理程序并让我们的 ssl 处理程序将它们反向代理到他们需要去的地方是否值得？

笔记：

a) 这仅对选定的一组白名单浏览器有效（例如：chrome latest / firefox latest）。相当简单的js在那里改变。

b) 是的，我们知道如何在这些白名单浏览器上发出 http -> https ajax 请求。

c) 根据我们相当广泛的测试，nginx + spdy 组合运行良好。所以是的，我们知道它在这一点上略显 alpha/beta。我们愿意承担的小风险。

d) 请记住，我们的服务是 90%+ ajax。只有初始条目是通过非 ajax 提供的，所有其他“页面视图”都是通过 ajax 处理的。因此，这有可能为我们的大部分用户加快速度。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T18:56:43.600

简短的回答：地狱是的。

长答案：这取决于。[https://www.phusionpassenger.com](https://www.phusionpassenger.com)非常注重图片。加载首页需要大量请求。通过从纯 HTTP 切换到 SPDY，我们将加载时间减少了 25%，因为浏览器可以用更少的往返次数下载更多资源。但是 SPDY 需要最新的 Chrome 和 Firefox 版本。在我们的案例中，我们的大多数用户都是技术用户，所以这不是问题。如果您的访问者主要是 MSIE，或者如果您不以可以从并行性中受益的方式加载资产，那么 SPDY 不会对您有太大帮助。在所有其他情况下，SPDY 都很棒。

# ios - 如何提高 CGContextDrawPath / drawInContext 的速度：

> ID：15387553
> 
> 赞同：4
> 
> 时间：2013-03-13T14:04:58.193
> 
> 标签：ios, objective-c, core-animation, core-graphics, quartz-core

**我在下面有以下代码，它基本上是PieChart**的一个切片，其中包含许多切片。每个切片都是以自己的方式绘制的，`CALayer`并使用`addSublayer:`.

问题是我在用户拖动手指时动态更新饼图（他们可以通过拖动来编辑饼图值）。它运行良好，但在重新绘制这些饼图“切片”时存在非常明显的滞后。我查看了 iOS 分析工具，它显示 > 50% 的时间都在`CGContextDrawPath()`，因为每次用户移动一定度数时它都必须重新绘制饼图。

我的问题是，我能做些什么来提高这段代码的速度？有什么我想念的吗？

另外作为旁注，这段代码在 iPad 2 上运行良好（可接受的 fps 水平）但在 iPad 3 上运行很糟糕，据我估计它慢了 2 倍。谁能解释一下？它只是视网膜显示吗？

```
-(void)drawInContext:(CGContextRef)ctx {

    // Create the path
    CGRect insetBounds = CGRectInset(self.bounds, self.strokeWidth, self.strokeWidth);
    CGPoint center = CGPointMake(self.bounds.size.width/2, self.bounds.size.height/2);
    CGFloat radius = MIN(insetBounds.size.width/2, insetBounds.size.height/2);

    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, center.x, center.y);

    CGPoint p1 = CGPointMake(center.x + radius * cosf(self.startAngle), center.y + radius * sinf(self.startAngle));
    CGContextAddLineToPoint(ctx, p1.x, p1.y);

    int clockwise = self.startAngle > self.endAngle;
    CGContextAddArc(ctx, center.x, center.y, radius, self.startAngle, self.endAngle, clockwise);

    CGContextClosePath(ctx);

    // Color it
    CGContextSetFillColorWithColor(ctx, self.fillColor.CGColor);
    CGContextSetStrokeColorWithColor(ctx, self.strokeColor.CGColor);
    CGContextSetLineWidth(ctx, self.strokeWidth);

    CGContextDrawPath(ctx, kCGPathFillStroke);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:13:23.723

在 iPad 3 Retina 显示屏上绘制图形比在 iPad 2 非 Retina 显示屏上绘制要慢。

我记得苹果最初声称 iPad 3 是“比 iPad 2 快 4 倍的图形”。情况似乎并非如此。如果将 Retina（像素多 4 倍）渲染到屏幕上，其速度*至少*应与非 Retina iPad 2 相同。

苹果发布 iPhone 4 时也发生了同样的问题。iPhone 4 实际上比 3GS 和 3G 都慢。

[iPhone4 上的 CoreGraphics 比 3G/3GS 上的慢](https://stackoverflow.com/questions/3610432)

要增加 fps，您需要减少 drawRect 需要绘制的像素数。我建议将与 CoreGraphics 相关的内容绘制为半分辨率上下文。然后将该上下文作为位图并将其放大到全分辨率。但仅在用户拖动时。

# .net - ODBC Oracle 错误

> ID：15387554
> 
> 赞同：7
> 
> 时间：2013-03-13T14:05:05.697
> 
> 标签：.net, oracle, oracle10g, odbc

我有一个被要求修改的 .net 应用程序，它使用 .net framework 2.0

我已经在我的本地机器上设置了一个带有 Oracle DB 连接详细信息的 ODBC DSN，测试了连接，它工作正常。

现在我运行我的应用程序，它没有问题并完成，我检查了我们的错误日志，发现了几个与这个问题无关的错误，但这个错误没有出现。

所以我用断点再次运行应用程序以解决这些错误。这次它因以下错误而崩溃

> 错误 [IM004] [Microsoft][ODBC Driver Manager] SQL_HANDLE_ENV 上的驱动程序 SQLAllocHandle 失败

现在让我明白的是，它甚至在 10 分钟前运行良好，我只添加了一个断点。

我找到了一些答案，并给了他们一个机会。

1.  我将 oracle 驱动程序文件夹上的读取/执行设置为关闭而不是打开以重置权限，这没有任何区别
2.  我检查了“路径”环境变量，没问题
3.  使用 ODBC 管理器我测试了没有错误的连接。
4.  验证指向 DSN 的连接字符串仍然正确 5\. 列表项
5.  已验证我的应用程序设置为运行 32 位，因为驱动程序是 32 位的。

我唯一没有做的就是保存，关闭重新启动计算机并重试。我将在这篇文章之后立即执行此操作，如果它有效，我会发布。

无论如何，如果有人知道什么可能导致这种行为，我会非常感谢你。

电脑是Win7，.net FrameWork是2.0，是VB.net，Oracle驱动是10g（10.2）

更新：好的，我使用 ODBC 管理器删除 DSN 并重建它。我运行了我的应用程序并且它有效。

我今天晚些时候在没有更改后回来并重新运行了应用程序并再次收到错误。尝试重建DSN，但没有帮助，我尝试重新启动，但没有帮助。

下面是堆栈跟踪。

```
StackTrace:
       at System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode)
       at System.Data.Odbc.OdbcConnectionHandle..ctor(OdbcConnection connection, OdbcConnectionString constr, OdbcEnvironmentHandle environmentHandle)
       at System.Data.Odbc.OdbcConnectionOpen..ctor(OdbcConnection outerConnection, OdbcConnectionString connectionOptions)
       at System.Data.Odbc.OdbcConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
       at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
       at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
       at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
       at System.Data.Odbc.OdbcConnection.Open() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T14:38:34.807

你是在远程桌面上运行这个吗？如果是这样，您可能必须将远程桌面用户的“创建全局对象”添加到本地策略中。

如果您在本地桌面上，请检查您正在运行的 ODBC 驱动程序的版本。如果它早于 11.2.xx，您可能应该从 Oracle 安装更新的 ODBC 驱动程序（不要使用 Microsoft Oracle ODBC 驱动程序 - 它有问题）。

# servicestack - 是否有使用新 API 的相当完整的示例项目 servicestack？

> ID：15387560
> 
> 赞同：3
> 
> 时间：2013-03-13T14:05:20.867
> 
> 标签：servicestack, ormlite-servicestack

我从工作中得到了一周的时间来学习 servicestack，我对它的简单、强大和速度感到敬畏。

我是 Multiplesight 订阅者，我正在学习 Jon Somnez 课程，该课程很棒，据我所知正在使用新的服务堆栈 api。

但是，pluralsight 课程中的示例非常简单，因此我正在寻找一个使用新 API 的工作示例。我看到 wiki 是最新的，这非常有帮助......但我希望找到一个使用新 API 的工作实现，似乎我下载或浏览的所有示例都使用旧 API。

是否有使用新 API 的新工作示例/实现（与解决方案和项目相比）？

如果我可以偷偷问另一个问题。是否有建议（希望在示例项目中你能指出我）解释了构建你的 servicestack API 项目的最佳实践。（文件夹中的 DTO，文件夹中的服务，文件夹中的响应对象？？）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:17:37.967

更新：ServiceStack Live Demo 和 Examples 现在正在[LiveDemos GitHub Project](https://github.com/ServiceStackApps/LiveDemos)上发布。

* * *

[ServiceStack.Examples](https://github.com/ServiceStack/ServiceStack.Examples/)中的大多数示例已切换为使用[新 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)，并且大部分都可以在[servicestack.net](http://www.servicestack.net)主页上进行演示。

[ServiceStack.UseCases](https://github.com/ServiceStack/ServiceStack.UseCases)包含许多小型的单一用途应用程序，这些应用程序专注于如何为不同的用例启用特定功能。

部署在[bootstrapapi.apphb.com](http://bootstrapapi.apphb.com/)上的[SocialBootstrap API](https://github.com/ServiceStack/SocialBootstrapApi/)是 MVC 和 ServiceStack 网站的一个示例，同时提供了所有可用的身份验证选项。

[Razor Rockstars](http://razor.servicestack.net/)是一个独立的ServiceStack 应用程序示例，它展示了它的网站和 HTML 功能，展示了如何将 razor 和 markdown 视图添加到现有服务中，以创建一个增强现有服务的网站。有 3 个版本的 Razor Rockstars 可用：

1.  [一个 ASP.NET 主机](https://github.com/ServiceStack/RazorRockstars/tree/master/src/RazorRockstars.WebHost)
2.  [使用 HttpListener 的独立自托管](https://github.com/ServiceStack/RazorRockstars/tree/master/src/RazorRockstars.SelfHost)
3.  [Windows 服务](https://github.com/ServiceStack/RazorRockstars/tree/master/src/RazorRockstars.WinService)

另一个与 Razor Rockstars 精神相似的网站是[Nortwind 数据库编辑器](http://northwind.mattjcowan.com/customers)，它演示了如何启用功能齐全的服务器端 HTML 网站来增强现有服务。[它在随附的博客文章](http://www.mattjcowan.com/funcoding/2013/03/10/rest-api-with-llblgen-and-servicestack)中全面介绍了他如何开发它及其功能。

# svn - 将 svnserve 指向现有的存储库目录 - (Windows)

> ID：15387561
> 
> 赞同：1
> 
> 时间：2013-03-13T14:05:22.693
> 
> 标签：svn, restore, recovery

我在 Windows 下使用 SVN 进行个人项目。我的硬盘最近崩溃了，但幸运的是，我的存储库中有一个备份文件夹。

我没有转储文件。（所以不能使用推荐的方法：[http](http://svnbook.red-bean.com/en/1.2/svn.reposadmin.maint.html#svn.reposadmin.maint.migrate) ://svnbook.red-bean.com/en/1.2/svn.reposadmin.maint.html#svn.reposadmin.maint.migrate ）

如何将新安装的 svnserve 指向该备份文件夹。

我找到了这些相关的帖子：

有人谈到将新的 SVN 服务器“指向”该目录，但没有提及如何： [Recover svn from directory backup after server failure](https://stackoverflow.com/questions/610652/recover-svn-from-directory-backup-after-server-failure)

最接近我需要的答案建议我应该使用 svnadmin 针对该文件夹创建一个转储文件：[Recovering a SVN Repository without a dump file](https://stackoverflow.com/questions/1147428/recovering-a-svn-repository-with-out-a-dump-file?rq=1)。如果这样可以解决它，我是否要查找创建存储库的确切 svn 版本（不记得），或者我可以使用全新安装，这可能比旧版本早几个版本？

如果答案存在，请提前道歉，我找不到它。

谢谢！

蒂诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:16:55.857

1.  下载并安装[VisualSVN 服务器](http://www.visualsvn.com/server/download/)，
2.  将您现有的存储库放在`C:\Repositories\` （或您在安装过程中选择的其他存储库根文件夹）下，
3.  如果需要，启动 VisualSVN 服务器管理器并配置对存储库的访问权限。您的存储库将在 URL 上可用`https://<hostname>/svn/<repository-name>`

如果您的存储库较旧，您可能希望通过[转储加载周期](http://subversion.apache.org/faq.html#dumpload)运行它来升级它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T05:46:55.337

我很幸运，我有一份安装程序的副本，用于创建我在硬盘驱动器崩溃之前使用的 SVN 存储库。所以这就是我所做的：

1.  安装了那个版本
2.  项目清单
3.  重新定位存储库以指向我的备份副本
4.  [由于这里的一些帖子](https://superuser.com/questions/229983/how-to-change-subversion-working-copy-uuid)和[svn 红皮书](http://svnbook.red-bean.com/en/1.5/svn.reposadmin.maint.html)，我解决了 UUID 问题
5.  我在一些资源的帮助下解决了一些缺失的修订问题
6.  创建了一个 SVN 服务（我首选的 svn:// 浏览设置），指向恢复的存储库
7.  安装 Tortoise SVN 并执行升级
8.  升级了最新的工作文件夹
9.  签出新工作文件夹的最新版本（我的新干净版本）
10.  将文件从升级的工作文件夹（在第 8 项中）复制到新的工作文件夹（在第 9 项中）
11.  签入新工作文件夹中的所有内容
12.  现在启动并运行:)

即将迁移到替代 VCS。不幸的是，我只允许 2 个链接，一旦我获得更多积分就会更新。

# java - FileOutputStream 是否截断现有文件

> ID：15387567
> 
> 赞同：11
> 
> 时间：2013-03-13T14:05:36.460
> 
> 标签：java, file

做

```
 final OutputStream output = new FileOutputStream(file); 
```

截断`file`如果它已经存在？令人惊讶的是，[Java 6 的 API 文档](http://docs.oracle.com/javase/6/docs/api/index.html?java/io/FileOutputStream.html)没有说明。[Java 7](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File%29)的 API 文档也没有。语言本身的[规范对](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)类的语义没有任何规定`FileOutputStream`。

我知道

```
 final OutputStream output = new FileOutputStream(file, true); 
```

导致附加到文件。但是追加和截断并不是唯一的可能性。如果将 100 字节写入 1000 字节文件，一种可能性是最后的 900 字节保持原样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-07-14T10:11:18.907

### `FileOutputStream`没有该`append`选项*会*截断文件。

请注意，`FileOutputStream`打开的是*Stream*，而不是随机访问文件，所以我想它的行为方式确实有意义，尽管我同意文档可以更明确地说明它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T18:49:44.663

我在 Windows 2008 x86 和 java 1.6.0_32-b05 上试过这个

我创建了 2 个进程，它们不断地向同一个文件写入一个 1Mb 的字符“b”和另一个 4Mb 的字符“a”。除非我用

```
out = new RandomAccessFile(which, "rw");
out.setLength(0);
out.getChannel().lock(); 
```

我发现第三个阅读器进程可以读取似乎是一个文件，该文件以 1Mb 的 'b' 开头，然后是 'a's

我发现首先写入一个临时文件然后重命名它

```
File.renameTo 
```

到文件也有效。

我不会依赖 Windows 上的 FileOuputStream 来截断可能被第二个进程读取的文件......

*   不是新的 FileOutputStream(file)
*   也不是 FileOutputStream(file, false) （不截断）
*   也不

这个;

```
out = new FileOutputStream(which, false);
out.getChannel().truncate(0);
out.getChannel().force(true); 
```

然而

```
out = new FileOutputStream(which, false);
out.getChannel().truncate(0);
out.getChannel().force(true);
out.getChannel().lock(); 
```

确实有效

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-13T14:10:36.890

`FileOutputStream`用于写入最常被覆盖的二进制数据。

如果你在操作文本数据，你最好使用一个[`FileWriter`](http://docs.oracle.com/javase/6/docs/api/index.html?java/io/FileOutputStream.html)方便的`append`方法。

# java - 3个按钮的通用动作监听器

> ID：15387570
> 
> 赞同：4
> 
> 时间：2013-03-13T14:05:42.673
> 
> 标签：java, swing, radio-button, awt, mixing

我的代码设计有问题。我有 3 个按钮不在按钮组中。我想 - 基于选定的按钮 - 执行一个动作。现在该操作需要修改类中的对象。这意味着我不能使用内部类，因为它无法访问外部。如果我可以将事件侦听器添加到按钮组，这会容易得多，但正如我所见，我将需要每个单选按钮的事件处理程序，这是正确的吗？如果不是，我还能怎么做？谢谢

一个简单的例子

```
public class Test(){
    RadioButton 1 = new RadoButton();
    RadioButton 2 = new RadoButton();
    RadioButton 3 = new RadoButton();
    Object myObject = new Object();

   public void clickEvent(){
       if(1.isSelected()){
           myObject.doOne();
       }else if(2.isSelected()){
           myObject.doTwo();
       }.....
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:21:47.283

您可以为所有按钮设置相同的侦听器。

伪代码：

```
radioButton1 = new RadioButton();
radioButton2 = new RadioButton();
radioButton3 = new RadioButton();

listener = new ActionListener() {
...
}

radioButton1.addActionListener(listener);
radioButton2.addActionListener(listener);
radioButton3.addActionListener(listener); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:51:53.953

这是为了说明如何**使用内部类**：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JRadioButton;

public class TestInnerClass {

    JRadioButton radioOne = new JRadioButton();
    JRadioButton radioTwo = new JRadioButton();
    JRadioButton radioThree = new JRadioButton();
    Object myObject = new Object();

    public TestInnerClass() {
        ActionListener myInnerClass = new MyActionListener();
        radioOne.addActionListener(myInnerClass);
        radioTwo.addActionListener(myInnerClass);
        radioThree.addActionListener(myInnerClass);
    }

    private class MyActionListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent event) {
            if(radioOne.isSelected()) myObject.toString();
            else if(radioTwo.isSelected()) myObject.notify();
            else if(radioThree.isSelected()) myObject.getClass().getName();
        }
    }
} 
```

*   请注意内部类如何不是静态的，如 gontard 的评论中所述，因此对 myObject 具有可见性。将其保密是最安全的。

在这种情况下，让一个侦听器处理所有事件通常是件好事。但是，在其他情况下，您希望事件处理更具体到每个组件。例如，在这些情况下，radioThree 可能会触发事件，并且由于这些按钮不在一个组中，因此 radioOne 可能仍处于选中状态。这个单一的处理程序将触发并仅在第一个无线电上起作用。解决此问题的一种方法是添加对源的检查，如下所示：

```
public void actionPerformed(ActionEvent event) {
    if(event.getSource() == radioOne && radioOne.isSelected()) 
        myObject.toString();
    if(event.getSource() == radioTwo && radioTwo.isSelected()) 
        myObject.notify();
    if(event.getSource() == radioThree && radioThree.isSelected())
        myObject.getClass().getName();
} 
```

另一种方法是为每个组件使用一个侦听器。这就是匿名类非常方便的地方：

```
radioOne.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        myObject.doOne();
    }
}); 
```

我最喜欢的模式之一，尤其是在工作不平凡的情况下，是首先创建一个方法来完成工作，然后从侦听器中调用它。我还将调用包装在 SwingUtilities.invokeLater() 中，以从 Swing 事件线程中获取工作。

```
public class Test {

    JRadioButton radioOne = new JRadioButton();

    Object myObject = new Object();

    private void handleRadioOne() {
        myObject.toString();
        // etc, etc.
    }

    public Test() {

        radioOne.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        handleRadioOne();
                    }
                });
            }
        });
    }
} 
```

这提供了两个不错的功能：

1.  它将您的操作工作封装到一个方法中，如果以后需要，可以进行编程访问
2.  它确保方法的工作远离 Swing 事件线程，因此您的 GUI 不会在密集处理期间挂起

# sql - 将 NULL 添加到 varchar 时使用 ISNULL

> ID：15387573
> 
> 赞同：5
> 
> 时间：2013-03-13T14:05:44.890
> 
> 标签：sql, sql-server

在尝试使用 MSSQL 时，我遇到了一些我无法解释的行为。

我正在查看将 NULL 值添加到 varchar 时会发生什么，以及当我执行以下查询时：

```
SELECT
   ISNULL(NULL + ' ', 'test') 
```

我得到结果'te'。同样，如果我将单词 test 更改为任何其他单词，我只会得到前两个字母。如果我增加 + ' ' 中的空格数，我的结果中会出现额外的字母（所以 NULL + '[两个空格]' 给我 'tes'）。有什么想法吗？

如果我声明一个变量并将其设置为 NULL 例如

```
DECLARE @testnull AS varchar(32)

SET @testnull = NULL

SELECT
ISNULL(@testnull + ' ', 'test') 
```

然后我得到结果“测试”（如我所料）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T14:06:56.543

使用`COALESCE`. `ISNULL`采用第*一个*NON-NULL 数据类型，在这种情况下，因为它没有被声明，所以你得到 a `VARCHAR(1)`，`NULL`然后`VARCHAR(2)`当你添加空间时它变成 a （这仍然是`NULL`在评估时，但 SQL Server 在此之前做了一个假设步）。在某些情况下，`varchar`没有长度的默认值是 1，而在其他情况下，它是 30。我会让你猜猜这里使用的是哪一个。

```
SELECT
 ISNULL(NULL + ' ', 'test'), COALESCE(NULL + ' ', 'test'); 
```

结果：

```
----  ----
te    test 
```

您可以通过以下方式明确看到这一点：

```
SELECT
   x = ISNULL(NULL + ' ', 'test')
   INTO #a1;

SELECT
   x = COALESCE(NULL + ' ', 'test')
   INTO #a2;

SELECT LEFT(t.name, 3), TYPE_NAME(c.user_type_id), max_length
FROM tempdb.sys.columns AS c
  INNER JOIN tempdb.sys.tables AS t
  ON c.[object_id] = t.[object_id]
  WHERE t.name LIKE '#a[1-2]%'; 
```

结果：

```
---  -------  ----
#a1  varchar     2
#a2  varchar     4 
```

在几乎所有情况下，我更`COALESCE`喜欢`ISNULL`. 我在此提示中解释了原因（以及存在异常的位置）：

*   [在 SQL Server 中决定 COALESCE 和 ISNULL](http://www.mssqltips.com/sqlservertip/2689/deciding-between-coalesce-and-isnull-in-sql-server/?utm_source=AaronBertrand)

# django - 为什么使用 django TemplateTag 标签？

> ID：15387575
> 
> 赞同：4
> 
> 时间：2013-03-13T14:05:49.407
> 
> 标签：django, templates, syntax, templatetag

我最近一直在阅读一些 django 代码，并且标签 Templatetag 被大量使用：

```
 {% templatetag openblock %} block page_title {% templatetag closeblock %}
  Page Title 
  {% templatetag openblock %} endblock page_title {% templatetag closeblock %} 
```

与以下较短语法相比有什么优势：

```
 {% block page_title %}Page Title{% endblock %} 
```

文档说 templatetag 可用于：

```
openblock   {%
closeblock  %}
openvariable {{;
closevariable }};
openbrace {;
closebrace };
opencomment {#;
closecomment #}; 
```

对我来说，它只是让代码更长，所以在什么情况下我应该使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T14:10:09.803

那些根本不一样。`templatetag`标签输出*文字*字符。所以第一个实际上在输出中呈现为`{% block page_title %}`，而第二个解释标签并呈现块。

我不知道您的模板是如何使用的，但看起来好像它正在动态输出另一个模板，然后将依次渲染。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-28T14:59:33.667

创建项目模板很有用，因为“startproject”命令的预处理器将处理这些符号（{%、{{ 等）并在没有这种方法的情况下错误地删除它们。

示例：[https ://github.com/twoscoops/django-twoscoops-project/blob/develop/project_name/templates/base.html](https://github.com/twoscoops/django-twoscoops-project/blob/develop/project_name/templates/base.html)

# c++ - 在 C 或 C++ 中取消引用数组时使用小数参数

> ID：15387577
> 
> 赞同：2
> 
> 时间：2013-03-13T14:05:51.803
> 
> 标签：c++, c, arrays

我想问如果我们在 C 或 C++ 中取消引用数组时传递小数会发生什么。我的意思的一个例子：

```
int arr1[],arr2[];
for (i = 0; i < 5; ++i)
{
  if (i % 2 == 0)
    arr1[i]=i;
  else 
    arr2[i/2]=i;
} 
```

编译器看到时会做什么`arr2[3/2]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T14:09:12.063

`i/2`是整数除法。此除法的结果将再次为整数，即除法的结果向 0 截断。 ( `3/2==1; -5/2==-2;`) （作为旁注，除法和截断都是一次操作：整数除法。大多数编译器将在一次时钟周期。）所以你不会将分数传递给数组索引。

如果您尝试传递可以是分数的数据类型（例如 a `double`），编译器将生成错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:07:36.127

除法将首先发生，然后将答案用作数组索引。因此，在您的示例中，`3/2`将解析为`1`（截断），然后分配`arr2[1]=i`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:07:45.757

3/2 产生一个等于 1 的整数结果。这样的行中永远没有“分数”。

```
arr2[3/2] ==== arr2[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:19:29.500

1.  数组索引应该是整数。如果您使用浮点类型，它将被强制转换为整数。

2.  integer1 / integer2 在 c/c++ 中产生另一个整数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T14:25:29.437

> 当它看到 arr2[3/2] 时，编译器会做什么？

编译器什么也不做。表达式“3/2”是有效的，并且在运行时会产生一个整数。

# c# - jQuery Web 方法调用上的 500 内部错误 - IIS 5.1（：-/ 是的，我知道...）

> ID：15387580
> 
> 赞同：3
> 
> 时间：2013-03-13T14:06:01.437
> 
> 标签：c#, jquery, asp.net, webmethod, iis-5

我不知道我错过了什么，是否有需要更改的 IIS 设置，可能吗？

```
$(document).ready(function () {

    function AjaxSuccess(result) {

        alert('result: ' + result);
    }

    function AjaxError(result) {
        alert("error");
        alert(result.status + ' ' + result.statusText);
    }

    $(".hlp").click(function () {
        var myVal= $(this).val();
        var id = $(this).attr('id');

        $.ajax({
            type: "POST",
            url: "AjaxWebMethods.aspx/GetHelpText",
            contentType: "application/json; charset=utf-8",
            data: "{'helpText' : '" + id + "'}",
            dataType: "json",
            success: AjaxSuccess,
            error: AjaxError
        });
    });

}); 
```

我的网络方法如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class AjaxWebMethods : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e){ }

    #region Exposed WebMethods
    [System.Web.Services.WebMethod()]
    public string GetHelpText(string helpItem)
    {
        string helpText = "testing web method";
        return helpText;
    }
    #endregion
} 
```

我不断收到 2 个弹出窗口“错误”，然后是 501 错误。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:09:26.600

您需要将此行更改 `data: "{'id' : '" + id + "'}",`为 `data: "{'helpItem' : '" + id + "'}",`

因为 webmethod 将`helpItem`作为参数名称。

所以ajax函数最终会是

```
$.ajax({
            type: "POST",
            url: "AjaxWebMethods.aspx/GetHelpText",
            contentType: "application/json; charset=utf-8",
            data: "{'helpItem' : '" + id + "'}",
            dataType: "json",
            success: AjaxSuccess,
            error: AjaxError
        }); 
```

并使您的服务器端方法像这样静态

```
[System.Web.Services.WebMethod()]
    public static string GetHelpText(string helpItem)
    { 
```

检查文章帮助你：[从客户端脚本调用服务器端函数](http://pranayamr.blogspot.ca/2012/01/calling-server-side-function-from.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:09:39.990

您的数据是`id`并且您的 Web 方法是预期的`helpItem`。尝试对齐两者。

`data: "{helpItem: '" + id + "'}"`

要尝试的另一件事是添加`static`到您的 WebMethod 声明中。

```
[System.Web.Services.WebMethod()]
public static string GetHelpText(int helpItem)
{ 
```

# c++ - 派生类中的方法多于基类

> ID：15387581
> 
> 赞同：1
> 
> 时间：2013-03-13T14:06:07.053
> 
> 标签：c++, coding-style, polymorphism

在这种派生类的情况下，我想问一个关于编程风格的问题：

```
class A
{
public:
   virtual foo1()=0;
}

class B: public A
{
 public:
  virtual foo1();
  virtual foo2();
 }

class C: public A
{
 public:
  virtual foo1();
 }

int main() {
 B mB();
 C mC();
 mB.foo2() //OK!
 mC.foo2() // obviously, it is not correct
return 0;} 
```

因此，派生类的公共方法是否应该少于或等于抽象基类？

如果派生类需要更多方法，这些方法应该是私有的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:12:48.737

派生类几乎总是比基类拥有更多的公共功能。这就是继承的要点：您可以定义一个仅概述变量基本行为的抽象基类，然后派生类可以针对特定情况扩展此基本行为。

继承的类始终是基类的特化。它实现了更具体的功能（通常是更多的功能）。在您的示例中，您期望两个不同的专业化在基类定义的行为之外以相同的方式表现。（`foo2`未在 中定义`A`）。这就是问题所在。如果您需要在 之外定义常见行为`A`，则解决方案是创建一个中间类。

```
class Intermediate : public A
{
public:
    virtual foo1()=0;
    virtual foo2()=0;
}

class B: public Intermediate
{
public:
    virtual foo1();
    virtual foo2();
} 
```

现在任何可以实现的类都`foo2`应该扩展`Intermediate`，任何需要功能的函数`foo2`都应该要求一个至少具有 type 的变量`Intermediate`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:09:13.057

这种类结构没有任何问题。派生类拥有比父类更多的方法并没有错——这很常见。这条线`mC.foo2();`是错误的，这不是班级的错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:09:36.537

派生类必须至少实现基类的**所有**抽象方法。这是最低限度。如果您确实添加了其他方法、成员或其他任何内容，则取决于您。
但是从类派生并且不添加任何内容并不是很聪明，因为这不是继承的目的（至少是`IS-A`-关系）。如果你去，`private inheritance`它可能会有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:12:10.317

在我从事的几乎所有项目中，我们的基类的功能都比派生类少——在极端情况下，基类甚至可能几乎没有功能，但派生类有几十个函数和六个成员变量。

这正是派生类的本意。

显然，您需要知道您拥有什么样的派生类，并且只有在派生类可用时才使用派生类的“额外”功能。

# asp.net - Http.Page.Request[" "] 没有返回正确的值

> ID：15387583
> 
> 赞同：2
> 
> 时间：2013-03-13T14:06:07.613
> 
> 标签：asp.net, request

**情况：-** 有一个 Home.aspx 页面，可由唯一用户（“userName”变量）打开。

此页面有一个弹出窗口控件名称“alertWindow”。

在 Home.aspx.cs 的 pageLoad 事件中，Welcome.aspx 页面使用 NavigateUrl 属性在“alertWindow”中打开。

传递给 Welcome.aspx 页面的查询字符串包含一个参数“UserName”，该参数设置为登录用户的名称（“userName”变量）。

现在，当代码执行到 Welcome.aspx.cs 页面时，"Request["UserName"]" 用于获取\检索查询字符串中存在的当前 "userName" 参数。

**问题：-** 当登录用户的名称包含空格或其他非常用字符时，“Request["UserName"].ToString()” 不会检索到实际和正确的值。

对于前。如果登录的 "userName" = "A&T Telecom"，则 "Request["UserName"].ToString() 仅检索 "A" 而没有其他内容。

但是如果 userName 字符串是像“micheal”这样的正确值，那么“Request[”UserName”].ToString() 只会正确检索“Micheal”

**要求：-** 请提供一种方法，以便我从 Request["UserName"] 获取任何类型的“userName”字符串值的正确值。

**主页.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (user is valid)
       alertWindow.NavigateUrl = "Welcome.aspx?userName=" + currentUser.ToString();
} 
```

**Welcome.aspx.cs** :-

```
currentUserName = Request["userName"].ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:08:21.100

这是合乎逻辑的，因为您不[编码您的 url](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)。试试这个：

```
alertWindow.NavigateUrl = "Welcome.aspx?userName=" + Server.UrlEncode(currentUser.ToString()); 
```

再说几句，它们是 URL 上使用的一些特殊字符，例如

`: / # ? & @ % + (and the space)`.

所有这些字符都必须编码为不同的格式，因此 url 不会中断，UrlEncode 正是这样做的。

两个笔记。

1.  我选择`Server`调用 UrlEncode 是因为它不依赖于请求，您可以在线程内使用它，或者任何不从页面调用的函数。
2.  使用`Request.QueryString`时生成 UrlDecode。要获取编码网址，您可以调用`Request.RawUrl`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:16:46.363

您不能在 url 中添加空格，它需要编码：

```
//uses HttpUtility.UrlEncode internally

Server.UrlEncode("something with spaces"); 
```

或者

```
HttpUtility.UrlEncode("something with spaces"); 
```

# javascript - 在 d3.js 中为大数添加逗号

> ID：15387585
> 
> 赞同：2
> 
> 时间：2013-03-13T14:06:15.750
> 
> 标签：javascript, d3.js, string-formatting

我在一条线上有数据点，当光标经过它们时，会出现一个工具提示 div，其中包含有关该点的数据。div的html代码如下。

```
 div.html("The Avengers Box Office: $" + d.Avengers) 
```

d.Avengers 将 207438708 作为字符串返回。那么有没有办法在 d3.js 中为大数添加逗号？

我的值从数千到数亿不等，阅读它们可能会很棘手。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:48:18.470

**解决方案**：您不能使用 d3 添加逗号，但您可以通过纯 JavaScript：[Number.toLocaleString()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toLocaleString)

```
// convert Avengers to a Number and use the toLocaleString on it
div.html("The Avengers Box Office: $" + (1*d.Avengers).toLocaleString() ) 
```

**高级解决方案**：如果您的主要问题是数字太大（即使使用逗号），您需要为您的数字编写一些非常酷的转换函数

1.  计算小数和
2.  选择一个非常好的格式来显示漂亮的数字

查看一个[相关的答案](https://stackoverflow.com/questions/13513177/display-only-whole-values-along-y-axis-in-d3-js-when-range-is-0-1-or-0-2/13531659#13531659)，我在其中添加了一些代码来执行此操作，将大数字转换为“kilo”、“mega”、“giga”和“terra”。你可能想采用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:53:15.747

谢谢大家的回复。我在这里找到了答案。它不是添加逗号，而是在数百万或数千之后添加 M 或 K。我认为这实际上更好。

[https://groups.google.com/forum/?fromgroups=#!topic/d3-js/YFsSmzu4JZk](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/YFsSmzu4JZk)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-01-22T10:22:30.027

d3.format(',')(1999222) //// 输出=1,999,222

# ruby-on-rails-3 - 生产服务器上的 Globalize 3 无法正常工作

> ID：15387593
> 
> 赞同：0
> 
> 时间：2013-03-13T14:06:52.333
> 
> 标签：ruby-on-rails-3, internationalization, globalize3

我正在尝试使用 Globalize3 gem 将模型转换为 Active Record，即数据库的国际化。阅读文档后，我能够在开发和生产环境的本地服务器上成功实现它。但是当我尝试在生产服务器上实现它时，它失败了。它表现出荒谬的行为，即它有效而有时无效。尝试通过用户输入设置语言环境。使用下面的函数来设置语言环境。

```
def set_language
    if params[:locale]    
      I18n.default_locale = params[:locale]
    end
    redirect_to :back
  end 
```

[globalize3 gem 文档的链接](https://github.com/svenfuchs/globalize3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:20:49.033

您只是使用该代码设置后备语言环境。它也可能有助于调整当前的语言环境，如

```
def set_language
    if params[:locale]    
      I18n.default_locale = params[:locale]
      I18n.locale = params[:locale]
    end
    redirect_to :back
end 
```

# opencv - 在 Xcode 的 64 位 mac 上编译 opencv 2.4

> ID：15387596
> 
> 赞同：8
> 
> 时间：2013-03-13T14:07:01.953
> 
> 标签：opencv

我有一个我一直在 ubuntu 12.04 下开发的 opencv 项目，在具有 x86_64 架构的 mac 上的 parellels VM 上。我认为有许多屏幕切换性能问题是由于 VM 造成的，其中 linux 视频模式会翻转几秒钟，而摄像头访问是由 opencv 应用程序进行的。我决定把项目移到电脑mac端的Xcode中继续opencv开发。但是，我对 xcode 不太熟悉，并且无法让项目在那里正确构建。

我已经安装了 xcode。我在 mac 上下载并解压缩了最新版本的 opencv，然后运行：~/src/opencv/build/cmake-gui -G Xcode .. 根据来自 willowgarage 和其他各种位置的说明。这似乎工作正常（但是我现在想知道我是否在这里缺少架构设置，尽管它在 Xcode 中是 64 位英特尔）。然后，我使用 linux 项目中的源文件设置了一个 xcode 项目，并将包含目录更改为使用 /opt/local/include/... 而不是 /usr/local/include/... 我将 xcode 切换为使用项目构建设置中的 LLVM GCC 编译器然后将 Apple LLVM Dialog for C++ 设置为 Language Dialect 为 GNU++11（这似乎与上面的行不一致）

我没有在 xcode 中使用 makefile，（我知道 - 它有自己的项目文件......）

我还遇到了一个链接器问题，看起来可以通过添加此链接器标志来解决它们：

```
 -lopencv_video 
```

基于此处类似的帖子：[other thread](https://stackoverflow.com/questions/5781198/compiling-opencv-code-on-a-64-bit-mac) 然而，在这种情况下，该人在他们的项目中使用了 Makefile。

我尝试在 xcode 构建设置中的“其他链接器标志”下添加此链接器标志，但仍然出现构建错误。
我想我在这里可能有两个问题，一个是使用 Cmake 构建 opencv 库时的架构设置，另一个是我的项目中的链接器标志设置。

目前构建错误列表如下所示：

```
 Undefined symbols for architecture x86_64:
    "cv::_InputArray::_InputArray(cv::Mat const&)", referenced from:
    _main in main.o
    "cv::_OutputArray::_OutputArray(cv::Mat&)", referenced from:
    _main in main.o
    "cv::Mat::deallocate()", referenced from:
    cv::Mat::release()    in main.o
    "cv::Mat::copySize(cv::Mat const&)", referenced from:
    cv::Mat::Mat(cv::Mat const&)in main.o
    cv::Mat::operator=(cv::Mat const&)in main.o
    "cv::Mat::Mat(_IplImage const*, bool)", referenced from:
    _main in main.o
   "cv::imread(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)", referenced from:
   _main in main.o
   ---SNIP---
   ld: symbol(s) not found for architecture x86_64
   collect2: ld returned 1 exit status 
```

任何人都可以就下一步尝试提供一些指导吗？

谢谢，沃尔特

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T15:28:47.590

使用 cmake 2.8.10 和 xcode 4.6.1 在 mac os x lion 10.7.5 上编译和运行 c++ opencv 2.4.4 的步骤编辑：在 mac os x mountain lion 10.8.3 和 Xcode 4.5 上使用 opencv 2.4.5 成功测试

**拥有合适的工具**

1.  [从http://sourceforge.net/projects/opencvlibrary/files/](http://sourceforge.net/projects/opencvlibrary/files/)下载 opencv-unix并在任何地方解压
2.  [从http://www.cmake.org/cmake/resources/software.html](http://www.cmake.org/cmake/resources/software.html)下载 cmake .dmg并安装
3.  我假设您在 os x lion 上安装了 xcode 4.6，其中包括 ios sdk 6.1
4.  转到 xcode 首选项以下载并安装命令行工具，以便您拥有 g++ 等。

**使用cmake编译opencv**

1.  转到提取的opencv文件夹
2.  创建构建目录

    ```
    mkdir build
    cd build
    cmake -D WITH_TBB=OFF -D BUILD_NEW_PYTHON_SUPPORT=OFF -D BUILD_FAT_JAVA_LIB=OFF -D BUILD_TBB=OFF -D BUILD_EXAMPLES=ON -D CMAKE_CXX_COMPILER=g++ CMAKE_CC_COMPILER=gcc -D CMAKE_OSX_ARCHITECTURES=x86_64 -D BUILD_opencv_java=OFF -G "Unix Makefiles" ..
    make -j8
    sudo make install 
    ```

3.  从构建文件夹中，转到 bin/ 并运行其中一项测试

    ```
    ./opencv-test-photo 
    ```

**创建自己的 c++ opencv xcode 项目**

1.  启动 xcode 并创建一个新的 xcode 项目
2.  os x下项目类型选择Command Line Tool
3.  打开项目的构建设置
4.  在架构下，将架构设置为 64 位英特尔。还将有效架构设置为 x86_64
5.  在 Build Options 下，将 Compiler for C/C++ 设置为 Default Compiler
6.  在 Search Paths 下，将 Header Search Paths 设置为 /usr/local/include
7.  同样在搜索路径下，将库搜索路径设置为 /usr/local/lib
8.  在 Apple LLVM 编译器 4.2 - Language set C++ Standard Library to libstd++ 下（对于 OpenCV 2.4.6、Xcode 5、LLVM 5.0 和 10.8.5，将语言方言和 std 库都设置为“编译器默认值”）

**将编译好的 opencv 库添加到你的项目中**

1.  转到您所在的“构建设置”选项卡旁边的“构建阶段”选项卡
2.  在 Link Binary With Libraries 中，单击 + 号并选择 Add Other
3.  点击键盘上的前斜杠 / 并输入 /usr/local/lib
4.  点击回车并选择要在项目中使用的库
5.  确保您始终选择 libopencv_core.2.4.4.dylib
6.  点击回车，您将在项目下看到选定的 dylib

**写一些代码**

1.  首先让我们组织文件，右键单击您的项目蓝图图标并选择新建组
2.  将新组命名为 opencv 或其他
3.  将 dylib 拖放到该组中
4.  打开 main.cpp
5.  从 opencv 附带的任何示例测试中复制代码并将其粘贴到此处
6.  确保添加了所有必需的dylib，例如，如果您将opencv_test_stitching.cpp代码复制到main.cpp中，则需要在前面的步骤中添加以下库

    *   libopencv_core.2.4.4.dylib
    *   libopencv_highgui.2.4.4.dylib
    *   libopencv_stitching.2.4.4.dylib

干杯。

# sql - 如何从表中的一个或列中提取唯一的字符列表

> ID：15387599
> 
> 赞同：2
> 
> 时间：2013-03-13T14:07:13.113
> 
> 标签：sql, sql-server

作为数据清理练习的一部分，我需要提供在几个名称字段中使用的唯一字符列表。因此，例如，假设我有一个 person 表，其中有两列名为 first_name 和 last_name，只有一行，如下所示：

```
first_name last_name 
Elizabeth  Smith 
```

我希望能够产生以下结果：

```
letter
a
b
e
E
h
i
l
m
S
t
z 
```

我认为递归公用表表达式是要走的路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:20:41.853

试试这个`SQL-Server 2005+`

```
declare @tbl table (v1 varchar(100), v2 varchar(100))

insert into @tbl values ('asd','ssft'),(null,'la')

;with cte
as
(SELECT isnull(t.v1,'')+ISNULL(t.v2,'') as V, 1 as i, SUBSTRING(isnull(t.v1,'')+ISNULL(t.v2,''),1,1) Vi
FROM @tbl t
UNION ALL
SELECT V, CTE.i+1, SUBSTRING(V,i+1,1)
FROM cte
WHERE LEN(CTE.v)>=CTE.i+1
)
SELECT DISTINCT Vi --COLLATE Latin1_General_CS_AS
FROM cte
ORDER BY Vi --COLLATE Latin1_General_CS_AS 
```

此外，如果您希望大写字母和小写字母都出现在结果集中，您可能需要使用（在代码中注释）指定 CASE Sensitive[排序规则。](http://msdn.microsoft.com/en-us/library/ms184391.aspx)`COLLATE Latin1_General_CS_AS`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:23:53.603

一种可能的方法：创建一个字母表并使用 CHARINDEX() 将其与名称挂钩，然后返回匹配项。

```
with letters (letter) as (

select TOp 253 CHAR(ROW_NUMBER() OVER (ORDER BY (SELECT 1)) )
 from 
 master.dbo.spt_values t1 CROSS JOIN master.dbo.spt_values t2 
order by
 ROW_NUMBER() OVER (ORDER BY (SELECT 1))
),

name (name) as (

select  'Elizabeth Smith' COLLATE Latin1_General_CS_AS as name 
)

select  letters.* from 
letters
inner join name on charindex(letter,  name) > 0 
and letter <> ' ' 
```

# python - 在python中获取类和实例的属性

> ID：15387600
> 
> 赞同：3
> 
> 时间：2013-03-13T14:07:16.560
> 
> 标签：python, class, instance, metaclass, getattr

在 python 工作下一个代码：

```
class MyClass(object):
    field = 1

>>> MyClass.field
1

>>> MyClass().field
1 
```

当我想要自定义字段的返回值时，我使用下一个代码：

```
class MyClass(object):
    def __getattr__(self, name):
       if name.startswith('fake'):
           return name
       raise AttributeError("%r object has no attribute %r" %
                            (type(self).__name__, name))

>>> MyClass().fake
fake 
```

但：

```
>>> MyClass.fake
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: class MyClass has no attribute 'fake' 
```

好的，对于我可以使用下一个代码的类：

```
class MyClassMeta(type):
    def __getattr__(cls, name):
       if name.startswith('fake'):
           return name
       raise AttributeError("%r object has no attribute %r" %
                            (type(self).__name__, name))

class MyClass(object):
    __metaclass__ = MyClassMeta

>>> MyClass.fake
fake 
```

但：

```
>>> MyClass().fake
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'MyClass' object has no attribute 'fake' 
```

为了解决这个问题，我使用下一个代码：

```
class FakeAttrMixin():
   def __getattr__(self, name):
       if name.startswith('fake'):
           return name
       raise AttributeError("%r object has no attribute %r" %
                            (type(self).__name__, name))

class MyClassMeta(type, FakeAttrMixin):
    pass

class MyClass(object, FakeAttrMixin):
    __metaclass__ = MyClassMeta

>>> MyClass.fake
fake

>>> MyClass().fake
fake 
```

`MyClass.fake`将调用`__getattr__`with`MyClass`和`fake`arguments。

`MyClass().fake`将调用实例和`__getattr__`参数。`MyClass``fake`

`__getattr__`如果我只在我的 mixin 上实现逻辑并且不使用`self`参数，那也没关系。

我可以编写更漂亮的类和实例的自定义值解析吗？如果与方法相比，为什么值解析和定义的`field`工作`MyClass.field`方式不同？因为当我想首先在实例中搜索时，然后在课堂上，但我不明白为什么以另一种方式工作。`MyClass().field``MyClass(object): field = 1``__getattr__``field``__getattr__`

类似的问题：[类上的 __getattr__ 而不是（或以及）实例](https://stackoverflow.com/questions/11559120/getattr-on-a-class-and-not-or-as-well-as-an-instance)和[访问实例属性和类属性之间的区别](https://stackoverflow.com/questions/1304868/difference-between-accessing-an-instance-attribute-and-a-class-attribute)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:13:26.400

不，如果您必须同时支持对类和实例的任意属性查找，那么您唯一的选择是`__getattr__`在元类和类上实现一个钩子方法，每个方法都支持对类和实例的查找。

这是因为特殊的钩子方法*总是*在类型上查找，所以`type(obj).__getattr__`. 因此，`MyClass.fake`使用元类`__getattr__`。请参阅[新式类的特殊方法查找](http://docs.python.org/2/reference/datamodel.html#new-style-special-lookup)；我解释了为什么这是在[以前的答案](https://stackoverflow.com/a/14102566)中。

简短的原因是，在您的情况下，`MyClass.fake`将转换为`MyClass.__getattr__('fake')`然后`__getattr__`是一个未绑定的方法，需要*两个*参数（`self`和`name`），这将失败。

# mysql - Wordpress 导出-导入表弄乱了类别

> ID：15387605
> 
> 赞同：0
> 
> 时间：2013-03-13T14:07:20.603
> 
> 标签：mysql, wordpress, import

我有多个使用相同帖子的 wordpress 网站。因此，基本上我更新了 1 个主站点并更新了其他我只是从 phpmyadmin 导出的表：

*   wp_posts、wp_postmeta、wp_terms、wp_term_relationships、wp_term_taxonomy

之后，我从想要更新和导入 sql 文件的 wordpress 站点清空相同的表。

通常，直到最近我才开始把类别弄乱了。当我进入类别页面时，我只看到与子类别一起显示的父类别。奇怪的是，我去了帖子，我看到了带有子类别的可用帖子。该数据库在父母编号方面看起来不错。我确定没有代码问题，因为如果我导入我的备份 5 个表，它会很好地显示子类别......

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T12:55:52.160

*我遇到了同样的问题（通过 MySQL 导入了所有 3 个术语表、数据库中*的子类别和其他页面，但没有显示在类别页面上），这似乎是 Wordpress 中的一个错误。

我刚刚添加了一个新的子类别作为测试，突然我的所有其他子类别都出现在列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T12:58:10.470

您的解决方案可能是使用 FeedWordPress 或类似插件通过 RSS 自动将内容从源站点拉到其他站点。它使您可以对类别、标签、自定义字段等进行大量控制，此外还可以选择是否更新匹配的现有帖子。

我遇到了同样的问题，但到目前为止，FeedWordPress 等人都无济于事，因为他们不处理自定义帖子类型中的自定义字段，而这正是我所需要的。

# parsing - Magento Dataflow 错误：适配器中未定义方法“解析”

> ID：15387606
> 
> 赞同：0
> 
> 时间：2013-03-13T14:07:22.953
> 
> 标签：parsing, magento, methods, import

我有一个导入产品的方法，我所做的是，我在 local/Mage/Catalog/Model/Convert/Adapter 中创建一个新文件并覆盖 saveRow 函数，这个文件类是 Mage_Catalog_Model_Convert_Adapter_Product 的扩展。

Everythings 在本地运行良好。我的电脑没有问题，在我的本地服务器上。所以是时候在客户端服务器上测试它了，我上传了 de 文件，也上传了 csv，当我在数据流 Advances 配置文件中执行时，我遇到了这个错误：

**适配器目录/convert_adapter_productconfigurable 中未定义方法“解析”**

我再说一遍，我在本地检查它并且它可以工作，但不是在服务器上。

我禁用，刷新然后再次启用缓存，重新索引数据，我不做什么。由于某种原因，在服务器中找不到类或类似的东西。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-18T12:37:58.993

定义“本地”代码文件的类名一定有错误，请检查本地文件product.php的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T10:39:53.547

1）而不是上传文件，我认为您应该在客户端服务器magento上明确编写新的适配器类...在此之前请检查版本冲突 2）如果问题仍然存在，请尝试显式调用父类解析方法或覆盖它...希望这会有所帮助....实际上在不知道代码的情况下很难预测您应该做什么...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T22:20:06.133

解决问题的最佳方法是检查位于您的 magento 根文件夹中的日志：

```
var/log/system.log
var/log/exception.log 
```

我的猜测是你还没有编译插件。请在您的管理面板系统 -> 工具 -> 编译中运行

# c# - 方法“部分”返回

> ID：15387609
> 
> 赞同：4
> 
> 时间：2013-03-13T14:07:24.293
> 
> 标签：c#, asynchronous

我正在开发一种在非常大的表中搜索信息的方法。由于我没有`ORDER BY`在查询中使用或任何特殊的东西（只是一个简单的`SELECT id,description FROM complain WHERE description like 'YOUR TEXT HERE'"`），我希望通过返回批量结果来提供更动态的用户体验。这类似于在 Management Studio 中运行查询。

一些细节，我的调用堆栈不大，但并非所有内容都在同一个方法中。有`buttonSearchClick`,`performCleanSearch`并且`searchComplainBasedOnDetailInfo`每一个都在不同的层（分别为接口、SearchBLL 和 SearchDAL）。

我考虑过创建一个异步方法来填充类似 a`List<Complain>`但看起来不那么干净的东西。我将不得不进行 3 层异步。有没有人对如何实现这一点有更好的想法？或者这是最好的方法吗？

**Edit1：**我已经设法在连接字符串上使用 SqlCommand.BeginExecuteReader 和异步处理来从查询中获取结果，因为它们出现了......现在我必须想办法让我的 DAL 方法异步所以上层也可以异步获取结果......我正在考虑实现某种缓冲区......也许是一个队列......

**Edit2：**我不是在寻找分页解决方案或 twitter 之类的（滚动并搜索新结果），因为我知道用户将不得不阅读我获取的所有信息......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:21:06.273

您可以使用 a `BackgroundWorker`and 在您`DoWork`的批次中执行以下操作：

```
DataTable dt;
int iRecords = 0;
do
{
  dt = new DataTable();
  using(SqlConnection con = new SqlConnection(""))
  {
    SqlCommand cmd = new SqlCommand(string.Format("SELECT TOP 100 * FROM complain where ID > {0}", iRecords));
    SqlDataAdapter sda = new SqlDataAdapter(cmd);
    sda.Fill(dt);
    //Report your progress here
  }
} while(dt.Rows.Count != 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:28:52.270

您可以从您的方法返回一个`IEnumerable<Task<IEnumerable<T>>>`（T 将设置为您的项目的任何类型）。每个`Task<IEnumerable<T>>`将代表未来可能收到的一批信息。该方法本身可以是一个迭代器块，它在获取每个批次时产生每个批次，或者根据您的查询方法，您可以批量处理整个序列而无需编写迭代器块。

然后从调用者的角度来看，他们可以这样写：

```
foreach(Task<IEnumerable<T> batch in GetBatches())
{
    updateUIWithBatch(await batch);
} 
```

# android - 如何使用 TextView 进行多行处理

> ID：15387611
> 
> 赞同：0
> 
> 时间：2013-03-13T14:07:27.560
> 
> 标签：android, textview, multiline

我有一个`Activity`被调用的`MainActivity.java`，带有一个`activity_main.xml`文件。但是当我尝试添加第二行时，我不知道如何创建多行文本视图，它将两行放在同一行的同一空间。

activity_main.xml 文本视图

```
<TextView  android:id="@+id/txtView"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="" 
    android:textSize="12sp"
    android:textColorLink="#FFFF00"
    android:textStyle="bold"
/
<TextView  android:id="@+id/txtView1"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="" 
    android:textSize="12sp"
    android:textStyle="bold"
/> 
```

MainActivity.java

```
public class MainMenuActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.alatecinc.eema.MESSAGE";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu);

    //Main Menu Links
    String str = "Directions";
    SpannableString content = new SpannableString(str);
    content.setSpan(new UnderlineSpan(), 0, str.length(), 0);
    final TextView txtView = (TextView) findViewById(R.id.txtView);
    txtView.setText(content);
    txtView.setTextColor(Color.BLUE);
    Linkify.addLinks(txtView, Linkify.ALL);     
    txtView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            MainMenuActivity.this.startActivity(new Intent(MainMenuActivity.this, DirectionActivity.class));
        }
    });

    String mapStr = "Map View";
    SpannableString mapContent = new SpannableString(mapStr);
    mapContent.setSpan(new UnderlineSpan(), 0, mapStr.length(), 0);
    final TextView mapTxtView = (TextView) findViewById(R.id.txtView1);
    mapTxtView.setText(mapContent);
    mapTxtView.setTextColor(Color.BLUE);
    Linkify.addLinks(mapTxtView, Linkify.ALL);      
    mapTxtView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            MainMenuActivity.this.startActivity(new Intent(MainMenuActivity.this, DirectionActivity.class));
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
              getMenuInflater().inflate(R.menu.main_menu, menu);
          return true;
     }

 } 
```

所以我需要的是有两条线，一条是方向，另一条是地图视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:18:45.587

使用相对布局并将 txtView2 显式设置为低于 txtView1。我不会选择 HTML 解决方案，因为它违背了拥有单独布局文件的目的。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/relativeLayout1">
    <TextView android:id="@+id/txtView1"
        android:text=""
        android:textSize="12sp"
        android:textStyle="bold"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
    <TextView android:id="@+id/txtView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="" 
        android:textSize="12sp"
        android:textStyle="bold" 
        android:layout_below="@id/txtView1"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:16:01.107

试试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     tools:context=".yourActivity" >
<TextView  android:id="@+id/txtView"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="" 
    android:textSize="12sp"
    android:textColorLink="#FFFF00"
    android:textStyle="bold"/>
<TextView  android:id="@+id/txtView1"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:layout_below="@+id/txtView"
    android:text="" 
    android:textSize="12sp"
    android:textStyle="bold"/>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:13:35.573

试试这个，

```
yourTextView.setText(Html.fromHtml("<div>line1</div> <br /> <div>line2</div>")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:18:29.407

`\n`当你想添加新行时使用它。像

```
String str = "Title:\nHere title"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T14:32:48.477

您需要在 strings.xml 文件中定义您的文本。是的，您也可以在其中定义格式化的 html。

所以你可以试试这个：

```
<string name="nice_html">
<![CDATA[Don&apos;t worry we will never share this with anyone<br/>
By Clicking register you are indicating that you have read and agreed to the <br/>
 <u>Terms of services</u>  and <u>Privacy Policy</u>
]]></string> 
```

然后，在您的代码中：

```
TextView foo = (TextView)findViewById(R.id.foo); foo.setText(Html.fromHtml(getString(R.string.nice_html))); 
```

[原始答案。](https://stackoverflow.com/questions/3235131/set-textview-text-from-html-formatted-string-resource-in-xml/3237438#3237438)

这是最干净的方法。Inshallah。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-07T06:03:03.160

您可以在 xml 文件的 textview 中添加 android:maxLines="5" 属性。

```
<TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:maxLines="5"
        android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

就是这样

# ios - 子类化库中的私有类

> ID：15387622
> 
> 赞同：1
> 
> 时间：2013-03-13T14:07:46.093
> 
> 标签：ios, objective-c, xcode

所以我们有一个包含如下头文件的库（例如）：

**上市**

*   MyCustomClass.h（子类 MyClass）

**私人的**

*   我的类.h

当它被导入应用程序时，它会抱怨它找不到`MyClass.h`. 这很公平。它被`#import`编入`MyCustomClass.h`并隐藏起来。

所以我把它改成了一个前向类声明`@class MyClass`。现在它抱怨我不能对超类使用前向声明（这也是有道理的）。

那我该如何解决呢？我需要对某些东西进行子类化，但我只希望使用该库的人能够访问子类，而不是超类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:28:33.190

您正在编写一个库，并且您希望客户端实例化继承自 MyClass 的 MyCustomClass。但是客户端永远不应该实例化 MyClass。

**方法 1**：您实际上不需要或不想隐藏 MyClass。您只想避免实例化它的实例。

*   a) 将其构造函数设为私有
*   b) 创建一个创建 MyCustomClass 实例的工厂方法。

工厂可能是 MyClass 的一部分，也可能在其他地方。

```
@implemenation MyClass
+ (MyCustomClass*) createWith: (Param*) someData; 
```

**方法2**：考虑组合而不是继承。让 MyCustomClass*拥有*一个 MyClass 类型的对象，并让它完成所有工作：

```
 @implementation MyCustomClass
 @property (nonatomic,strong) MyClass* myClassInstance;
 - (void) doSomething 
 {
      [self.myClassInstance doSomething];
 } 
```

由于客户端无论如何都不能子类化 MyClass，因此继承是一个实现细节。不需要的时候不要继承。

**方法 3**：您确定要公开 MyCustomClass 吗？它真的是一个对象，还是一个协议？也许您的库应该公开提供接口，而 MyClass 和 MyCustomClass 都是私有实现。

# c++ - 将python对象转换为c数组

> ID：15387624
> 
> 赞同：0
> 
> 时间：2013-03-13T14:07:51.753
> 
> 标签：c++, python, numpy, python-c-api

从python对象创建c连续数组的简单有效方法是什么？假设我希望创建可以使用 python 对象构造的 C++ Matrix 类。

```
template<typename T>
struct Matrix
{
    Matrix(PyObject* obj)
    {
        // extract nrows, ncols, allocate data and copy content
    }

    T*  data;
    int nrows;
    int ncols;
}; 
```

这个构造函数应该接受 python 对象，例如：

```
[[0., 1.], [1\. 0.]]
((1, 2), (2, 3), (3, 4))
numpy.zeros((3, 5)) 
```

# solr - 用solr批量分析文档（提取tf idf信息）

> ID：15387633
> 
> 赞同：0
> 
> 时间：2013-03-13T14:08:14.213
> 
> 标签：solr

嗨，我想提取文档中术语的 tf-idf 值。经过一番搜索后，我在示例配置中找到了一个可以执行此操作的请求处理程序：`http://localhost:8983/solr/tvrh/?q=id:documentid&qt=tvrh&tv=true&tv.all=true`

我想做的是批量分析文档。这就是我所做的：

1.  使用 commit=true 将新文档发送到 solr 更新处理程序
2.  使用上述 url 查询术语向量的 solr

问题是插入带有 commit=true 的文档大约需要 600 毫秒，这对于我的用例来说是不可接受的。

然后我找到了[http://wiki.apache.org/solr/RealTimeGet](http://wiki.apache.org/solr/RealTimeGet)并尝试将其与 termvector 请求处理程序结合起来：

```
<requestHandler name="/tvrh" class="solr.RealTimeGetHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <bool name="tv">true</bool>
    </lst>
    <arr name="last-components">
      <str>tvComponent</str>
    </arr>
  </requestHandler> 
```

但是当我尝试查询处理程序时，我得到了这个作为响应：http: [//pastebin.com/KtB7DBSv](http://pastebin.com/KtB7DBSv)我想将这两者结合起来是不可能的？

无论如何，我怎样才能提高性能？有什么建议么？是否有另一种方法来获取 tf idf 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T07:43:42.110

我没有找到问题中具体问题的解决方案，但发现使用 softCommit=true 更快。

# xamarin.ios - Xamarin 2.0 Iphone 资源前缀

> ID：15387635
> 
> 赞同：1
> 
> 时间：2013-03-13T14:08:15.163
> 
> 标签：xamarin.ios, xamarin, xamarin-studio

我已经安装了 Xamarin 2.0，现在可以从 Visual Studio 启动 iphone 模拟器。我在我的项目资源中添加了另一个 Iphone 资源前缀；图像当我从 Visual Studio 运行应用程序时，图像文件夹中的资源不包含在应用程序中。如果我从 Mac 上的 Xamarin 工作室运行它，一切正常。对于如何解决这个问题，有任何的建议吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:22:55.587

这似乎是 VS 的 Xamarin.iOS 插件中的一个错误。我[归档了](https://bugzilla.xamarin.com/show_bug.cgi?id=11143)。

# git - Github Windows '无法同步这个分支'

> ID：15387640
> 
> 赞同：124
> 
> 时间：2013-03-13T14:08:24.523
> 
> 标签：git, github, github-for-windows

我使用的是 Github Windows 1.0.38.1，当我在提交后单击“同步”按钮时，出现错误

![在此处输入图像描述](../Images/e95a7c0f5b74b963ae4b8f91747dd593.png)

我该如何调试这个问题？如果在shell中，我该怎么办？

如果我执行`git push`or `git pull`，同步工作正常，但下次我想使用 Github windows 同步时，我得到同样的错误。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-03-13T16:08:59.537

当它这么说时，只需打开外壳并执行`git status`. 这将使您对可能出现的问题以及您的回购状态有一个不错的了解。

我不能给你一个具体的错误，因为它在 Github for Windows 中发生的原因有很多，比如在更新子模块时出现一些问题等。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-06-28T01:40:47.610

出现此错误是因为文件中的合并冲突。在我更新了我的 Maven 项目的 pom.xml 但没有提交它之后，我遇到了它。使用

```
git status
error: Your local changes to the following files would be overwritten by merge:
<my project>/pom.xml
Please, commit your changes or stash them before you can merge.
Aborting 
```

正如上面的帖子所建议的那样，有助于发现任何有冲突的更改，您可以决定放弃或提交。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-11-16T07:18:13.393

我有同样的问题。由于一些相互矛盾的变化，它发生在我身上。我从桌面上删除了我的项目的本地存储库，然后从 github 网站再次克隆它（使用我帐户中的克隆选项），错误消失了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-21T03:23:01.840

当我从 Visual Studio 内部尝试时，我遇到了同样的问题，shell 中的“git status”显示没有问题。但我设法通过 shell 使用“git push”推送本地更改。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-07T11:36:04.400

我遇到了这个问题，发现它与代理有关。我使用这个命令解决了这个问题：

```
 git config --global http.proxy %HTTP_PROXY% 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-01T11:54:26.713

我有同样的问题。在我的情况下，git 找不到全局变量`%HTTP_PROXY%`，仅仅是因为 Windows 没有提供/使用它。

我通过从 git 配置文件（位于`%USERPROFILE%\.gitconfig`）中排除变量来解决它：

```
[http]
#   proxy = %HTTP_PROXY% 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-06-15T13:16:10.267

这可能是一个极端情况，但每次我遇到这个特定错误都是因为我最近在 Windows 中映射了一个驱动器，`powershell`但找不到它。

计算机重新启动（所有事情）为我修复了错误，`powershell`现在可以拿起新映射的驱动器。只需确保在打开 github 客户端之前连接到映射驱动器即可。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-07T01:58:08.257

您最近是否更改了 Windows 密码，或者至少更改了您用来连接代理的密码？

这是我的问题，`git status`无法帮助我。我必须在“.git/config”文件中更改我的登录凭据才能克服这个错误。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-06-02T15:43:16.190

如果您尝试同步的分支已被删除，也会出现此错误。

`git status`不会告诉你，但如果你尝试`git pull`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-23T21:47:14.207

可能导致此问题的另一件事是，在 GitHub Desktop 已启动后映射网络驱动器或连接 VHD。原因是 GitHub Desktop 使用可移植 GIT 安装中的 ssh-agent 来建立连接，并且永远不会关闭它……即使您卸载了应用程序。该过程在不了解新驱动器的情况下开始，并且从不刷新自身，并且当它用于运行 GIT 命令以处理您的存储库时，它会失败，因为它不了解路径。

此实例中的解决方案是关闭 GitHub Desktop 并使用任务管理器终止正在运行的 ssh-agent，然后再重新启动它。这将在需要时启动一个新的 ssh-agent 实例，它将获取新的驱动器映射等。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-03-22T20:21:35.500

确保您尝试推送到的分支不受保护。我试图推送到受保护的分支，但和你一样失败了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-19T07:37:38.183

检查 shell 中的“ **git status** ”和“ **git pull** ”，找出问题所在。我的问题是配置中的 http.proxy 节点，因此 Github Windows 应该更智能，就像弹出 shell 并在错误发出后提供更多提示。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-03-10T06:48:49.423

根据 HTTP 代理答案，这也可能是由于 VPN 连接而发生的。断开我的 VPN 连接为我解决了这个问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-10-27T06:20:25.003

我尝试使用 Android Studio 提交更改并将其推送到 master 但是 Window 显示了一个弹出窗口，我必须输入 Github Credentials ( [https://github.com](https://github.com) )。我使用我的 Gmail 帐户进行了注册，所以我尝试输入我的 Gmail id 及其密码，显然 Git 没有我的 Gmail 密码，并且无法将其与我提供的内容匹配，所以我最终取消了推送。
当我尝试通过 GitHub GUI 窗口同步我的更改时，我遇到了这个错误。在`git status`命令 Git Shell 建议将更改推送为

```
Your branch is ahead of 'origin/master' by 1 commit.
  (use "git push" to publish your local commits) 
```

我按照 Git Shell 的建议 () 做了同样的`git push`事情，现在一切正常。

**注意：**对于刚接触 git 的人，您必须将路径更改为 .git 文件所在的文件夹，否则在您输入的每个命令 Git Shell 都会显示错误，表明它不是 git 存储库。

```
fatal: Not a git repository (or any of the parent directories): 
```

例如，如果您的项目`D`位于某个文件夹的驱动器中，则您必须像`cmd`更改目录一样执行以下操作。

```
cd D:\someFolder     // if your project is not deep in `D` 
```

如果它在嵌套文件夹中`D`

```
cd D:\somefolder\someNestedFolder\nestedInNested     // if your project is not deep in `D` 
```

**如果**有人知道如何从 Windows 登录到 Github 弹出窗口，就像我使用 google 帐户注册时一样，这里只有 Github 用户名、密码 2 个字段，请告诉我。我已经解决了这个问题，但是浪费了一些时间，所以我也想知道登录。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-07T17:56:23.673

调试日志可能会提供一些见解。我使用的是 v3.3.4.0，您的体验可能会有所不同，但应该是相似的。从设置菜单中选择“关于 Github Desktop...”。点击链接查看调试日志。就我而言，有一个非常明显的错误：

*** 致命错误 - 检测到 cygheap 基础不匹配 - 0x1157408/0x1167408。此问题可能是由于使用了不兼容的 cygwin DLL 版本。

它甚至提供了一些有用的提示来解决问题。

我不确定为什么错误提示中没有显示此信息，但至少它是可用的。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-05-25T09:28:16.107

我遇到了同样的问题，“git status”也没有问题，然后我**重新启动**了 windows 的神圣 GitHub 客户端，它就像魅力一样工作。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-28T14:26:25.840

我遇到过同样的问题。我从 GitHub Windows 客户端（右键菜单）中删除了 repo 并重新添加了它。当我重新添加时，我注意到我有大约 300 个未提交的更改，并且报告了内存错误。我放弃了所有更改，然后同步再次开始正常工作。（菜鸟 Git 用户 - 我确信在命令行上有更好的方法来执行此操作）

# itext - iText - 使用 ColumnText 的奇怪列/页面更改行为

> ID：15387642
> 
> 赞同：2
> 
> 时间：2013-03-13T14:08:33.837
> 
> 标签：itext

我对 iText 很陌生，并试图完成以下任务：

*   从本地高清读取文本文件列表
*   将文件的文本排列在 2 列布局的 pdf 文件中
*   在每个文本之前添加一个连续编号的索引

我从 MovieColumns1 示例 ( [http://itextpdf.com/examples/iia.php?id=64](http://itextpdf.com/examples/iia.php?id=64) ) 开始，最后得到以下代码：

```
 final float[][] COLUMNS_COORDS = { { 36, 36, 296, 806 }, { 299, 36, 559, 806 } };

    Document document = new Document(PageSize.A4);
    PdfWriter writer = PdfWriter.getInstance(document, resultFile);
    document.open();

    ColumnText ct = new ColumnText(writer.getDirectContent());
    ct.setSimpleColumn(COLUMNS_COORDS[0][0], COLUMNS_COORDS[0][1],
        COLUMNS_COORDS[0][2], COLUMNS_COORDS[0][3]);

    File textDir = new File("c:/Users/raddatz/Desktop/123/texts/");
    File[] files = textDir.listFiles();

    int i = 1;
    int column = 0;
    for (File file : files) {
        String text = FileUtils.readFileToString(file, "UTF-8");
        float yLine = ct.getYLine();
        System.out.println("adding '" + file.getName() + "'");

        PdfPCell theText = new PdfPCell(new Phrase(text, new Font(Font.HELVETICA, 10)));
        theText.setBorder(Rectangle.NO_BORDER);
        theText.setPaddingBottom(10);
        PdfPCell runningNumber = new PdfPCell(new Phrase(new DecimalFormat("00").format(i++), new Font(
            Font.HELVETICA, 14, Font.BOLDITALIC,
            new Color(0.7f, 0.7f, 0.7f))));
        runningNumber.setBorder(Rectangle.NO_BORDER);
        runningNumber.setPaddingBottom(10);
        PdfPTable table = new PdfPTable(2);
        table.setWidths(new int[] { 12, 100 });
        table.addCell(runningNumber);
        table.addCell(theText);
        ct.addElement(table);
        int status = ct.go(true);
        if (ColumnText.hasMoreText(status)) {
            column = Math.abs(column - 1);
            if (column == 0) {
                document.newPage();
                System.out.println("inserting new page with size :" + document.getPageSize());
            }
            ct.setSimpleColumn(
                COLUMNS_COORDS[column][0], COLUMNS_COORDS[column][1],
                COLUMNS_COORDS[column][2], COLUMNS_COORDS[column][3]);
            yLine = COLUMNS_COORDS[column][3];
            System.out.println("correcting yLine to: " + yLine);
        } else {
            ct.addElement(table);
        }
        ct.setYLine(yLine);
        System.out.println("before adding: " + ct.getYLine());
        status = ct.go(false);
        System.out.println("after adding: " + ct.getYLine());
        System.out.println("--------------------------------");
    }

    document.close(); 
```

在这里你可以看到结果： [http ://d.pr/f/NEmx](http://d.pr/f/NEmx)

查看生成的 PDF 的第一页，我认为一切正常。

但是在第二页上，您可以看到问题：

*   文本#31 未完全显示（第一行 + 索引被剪切/不在可见区域）
*   文本 #46 未完全显示（前三行 + 索引被剪切/不在可见区域）

在第 3 页上，一切似乎又好了。我真的迷路了。

**-- 更新 (2013-03-14) --**

我现在已经分析了 PDF 的内容。问题不在于内容显示在不可见区域中，而是内容根本不存在于 pdf 中。内容的缺失部分恰好适合上一栏/页。所以看起来 ColumnText.go(true) 正在操纵 addElement() 之前传递的对象。有人可以证实这一点吗？如果是这样：我该怎么办？

**-- 结束更新 (2013-03-14) --**

期待你的答复

问候，斯文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:17:13.847

解决了！一旦 ColumnText 指示表格不适合当前列，我就会使用 ColumnText 的新实例重新初始化 ct 并再次添加表格。

换句话说：ColumnText 的每个实例都在处理我的文档的一列。

```
if (ColumnText.hasMoreText(status) || mediaPoolSwitch) {
  column = Math.abs(column - 1);
  if (mediaPoolSwitch) {
      currentMediaPool = mediapool;
      column = 0;
  }
  if (column == 0) {
      document.newPage();
      writeTitle(writer.getDirectContent(), mediapool.getName());
  }
  ct = new ColumnText(writer.getDirectContent());
  ct.addElement(table);
  ct.setSimpleColumn(
      COLUMNS_COORDS[column][0], COLUMNS_COORDS[column][1],
      COLUMNS_COORDS[column][2], COLUMNS_COORDS[column][3]);
  yLine = COLUMNS_COORDS[column][3];
  LOG.debug("correcting yLine to: " + yLine);
} else {
  ct.addElement(table);
}
ct.setYLine(yLine);
ct.go(); 
```

# java - Java：为什么 Observer 不是接口

> ID：15387647
> 
> 赞同：3
> 
> 时间：2013-03-13T14:08:41.797
> 
> 标签：java, interface

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import java.applet.Applet;

class Client extends Button implements Observer, ActionListener{
...
} 
```

使用上面的代码，当我尝试使用 jdk (v 1.7.0_17) 编译它时，我收到以下错误：

```
error: interface expected here
class Client extends Button implements Observer, ActionListener{
                                       ^ 
```

而在其他计算机上它可以工作（我只在 2 个不同的 linux 上检查过）就好了。我使用的是 64 位 Windows 7 专业版。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T14:10:55.967

[`java.util.Observer`](http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html)绝对*是*一个界面。

我怀疑你`Observer`在同一个包中有一个类`Client`，这肯定会导致这个问题。

完整示例：

这编译得很好：

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;

class Client extends Button implements Observer, ActionListener {
    public void update(Observable x, Object y) {}
    public void actionPerformed(ActionEvent event) {}
} 
```

这不会：

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;

class Observer {} // Awooga! Awooga!

class Client extends Button implements Observer, ActionListener {
    public void update(Observable x, Object y) {}
    public void actionPerformed(ActionEvent event) {}
} 
```

# sql-server - 在 SQL SERVER 中执行具有 while(true) 循环的 SP 的问题

> ID：15387650
> 
> 赞同：2
> 
> 时间：2013-03-13T14:08:48.583
> 
> 标签：sql-server, sql-server-2008, tsql

我知道这不是好方法，可能有很多问题。但是任何人都可以告诉执行具有while循环的SP有什么问题。

```
CREATE PROC udpParseData
BEGIN
WHILE(true)
BEGIN
    --logic goes here
END
END

EXEC udpParseData 
```

我想像服务一样运行它。而不是运行使用 SQL Dependancy 连续检查数据库的服务。对此有任何问题，而且我主要关心的是如何停止正在运行的 SP udpParseData。我还有一个选择是在调度程序作业中运行相同的 SP。我想知道使用它的限制和缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:10:45.350

你不想这样做——即使是 Windows 服务也不能那样工作。Windows 服务将利用`Timer`在某个时间间隔唤醒并启动消息泵的 a。

在存储过程中编写您想要执行的工作，然后[`Job`](http://msdn.microsoft.com/en-us/library/ms190268.aspx)在执行该存储过程的 SQL Server 上创建一个，并设置您希望它运行的时间。`Job`代替`Timer`Windows 服务中的。

# build - 构建永远不会在 TFS2012 上启动

> ID：15387652
> 
> 赞同：4
> 
> 时间：2013-03-13T14:08:50.573
> 
> 标签：build, tfs, build-automation

我正在尝试在我们的 TFS 基础架构中设置一些构建控制器和代理。我们的 TFS 服务器设置为构建控制器，我也设置了一些构建代理。

当我在我的系统上排队一个新的构建时，一切似乎都很好。没有出现错误消息，并且构建出现在我系统的队列中。然而，这就是所有发生的事情。当我转到 Visual Studio 中的构建页面时，它表明它一直在“运行 0 秒”。查看我们 TFS 服务器上的管理控制台，控制器声明它“就绪”，但仅此而已。所有代理都被类似地列为“就绪”。

我不知道有任何日志可以用来诊断这个问题。我已将 Logging Verbosity 设置为“Diagnostic”，但“Diagnostics”下拉列表中的选项显示为灰色。该活动也是完全空白的。

查看构建控制器上的数据库，dbo.tbl_BuildController 表确实列出了构建。不过，我觉得奇怪的是 StartTime 是`NULL`. 如果我停止在 VS 中构建，则开始时间和结束时间在数据库中设置为相同的时间。

所以，我知道构建正在向构建控制器注册，并且不存在通信问题；构建永远不会开始，也永远不会出错。我该如何解决这个问题？（或者，至少得到一个我可以追查的错误）。

编辑：该问题似乎与 TFS 服务器有关。以下是我在事件日志中发现的内容：

```
WebHost failed to process a request.
 Sender Information: System.ServiceModel.ServiceHostingEnvironment+HostingManager/10411892
 Exception: System.ServiceModel.ServiceActivationException: The service '/tfs/queue/GPA/Services/v4.0/MessageQueueService2.svc' cannot be activated due to an exception during compilation.  The exception message is: This collection already contains an address with scheme http.  There can be at most one address per scheme in this collection. If your service is being hosted in IIS you can fix the problem by setting 'system.serviceModel/serviceHostingEnvironment/multipleSiteBindingsEnabled' to true or specifying 'system.serviceModel/serviceHostingEnvironment/baseAddressPrefixFilters'.
Parameter name: item. ---> System.ArgumentException: This collection already contains an address with scheme http.  There can be at most one address per scheme in this collection. If your service is being hosted in IIS you can fix the problem by setting 'system.serviceModel/serviceHostingEnvironment/multipleSiteBindingsEnabled' to true or specifying 'system.serviceModel/serviceHostingEnvironment/baseAddressPrefixFilters'.
Parameter name: item
   at System.ServiceModel.UriSchemeKeyedCollection.InsertItem(Int32 index, Uri item)
   at System.Collections.Generic.SynchronizedCollection1.Add(T item)
   at System.ServiceModel.UriSchemeKeyedCollection..ctor(Uri[] addresses)
   at System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses)
   at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses)
   at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   --- End of inner exception stack trace ---
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.EnsureServiceAvailableFast(String relativeVirtualPath, EventTraceActivity eventTraceActivity)
 Process Name: w3wp
 Process ID: 3756 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:17:42.073

我会开始查看事件日志。

1.  控制面板 -> 管理工具
2.  事件查看器

我假设那里会出现某种类型或错误。如果您的构建代理在不同的机器上，请确保您也查看那里的事件日志。

**从原始海报评论更新**

事件日志中有一个异常指向我们：[TFS2012 Build Service offline](https://stackoverflow.com/questions/15378001/tfs2012-build-service-offline/15378482#15378482)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:22:59.573

去检查`security`用于`build service properties`. 我遇到了几乎相同的问题，这是因为我为那个特定用户更改了一些安全设置，他突然无法再构建了。

要查找用户：

1.  转到您的 TFS 服务器
2.  打开 Team Foundation Server 管理控制台
3.  打开构建配置
4.  构建服务的打开属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T12:06:28.850

生成控制器和代理必须运行相同版本的 Team Foundation Build。（Buid Service 版本类似于 v4.0 或 v4.1，它不同于 tfs 产品版本，例如 11.0.50727.1）

因此，如果构建代理和控制器部署在不同的机器上，请检查两台机器上的构建服务版本。它必须是相同的。

TFS 阻止将构建代理分配给具有不同构建服务版本的构建控制器。但是，您可以在不分离控制器和代理的情况下将其中一台构建机器升级到不同的版本（例如 Visual Studio 更新 2），在某些情况下构建服务版本保持不变（例如尽管升级到更新 2 版本留在 v4.0)

在这种情况下，如果您想应用新版本的构建服务

在 tfs 2012 或 2013 中检查构建服务版本：

1.  去建造机器
2.  打开 Team Foundation Server 管理控制台
3.  打开构建配置
4.  打开构建服务属性（单击注销链接旁边的属性链接）
5.  “侦听构建代理通信”文本框

应用构建服务版本的更改

1.  停止服务
2.  单击“更改”按钮
3.  设置不同的端口号
4.  重置之前的端口号

构建服务版本将从 v4.0 立即更改为 v4.1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-15T14:27:37.430

这对我有用，用于访问托管在不同服务器上的 TFS 的用户帐户的密码已过期。

密码重置为我修复了它。

# javascript - 防止 MathJax 在启动时操纵 dom

> ID：15387653
> 
> 赞同：0
> 
> 时间：2013-03-13T14:08:52.803
> 
> 标签：javascript, math, markdown, mathjax

当我告诉它这样做时，我希望 MathJax 只操作我页面上的某些元素。

我有这个代码。

```
var converter = new Markdown.Converter();
converter.hooks.chain("preConversion", removeMath);
converter.hooks.chain("postConversion", replaceMath);

$(".exec-math").each(function(index, el){
  var str = converter.makeHtml($(el).html());
  $(el).html(str);
});

MathJax.Hub.Config({
 tex2jax: {
   inlineMath: [ ['$','$'] ],
   processEscapes: true
 }
});

MathJax.Hub.Queue(["Typeset",MathJax.Hub]);

// <span class="exec-math">**Markdown** and $a > b$</span> 
```

它基本上使数学远离降价引擎。

现在的问题是 MathJax 看起来像这样运行了两次。

1.  MathJax 已加载，操作 dom
2.  执行我的代码并安排另一次运行

**那么，有没有办法告诉 MathJax 不要在启动时运行？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:48:29.933

是的。在您的配置中设置`skipStartupTypeset`为`true`。有关详细信息，请参阅[核心选项](http://docs.mathjax.org/en/latest/options/hub.html)文档。

# .net - 调试后无法打开带断点的文件

> ID：15387656
> 
> 赞同：13
> 
> 时间：2013-03-13T14:08:55.980
> 
> 标签：.net, debugging, visual-studio-2012

我有一个奇怪的问题。每当我开始调试并停止调试时，如果文件有断点，我将无法直接在 Visual Studio 中打开它。

我安装了 ReSharper 7.1 和 StyleCop，但禁用并安装了 VS 2012 Update 2，但它没有解决我的问题。

如果我单击断点，则会出现错误：

```
Unable to go to the breakpoint. The ViewManager.ActiveView must be a View contained within the ViewManager.WindowProfile. 
```

如果我再次调试并且 Visual Studio 必须达到断点，我会得到：

```
'TheFile' not found.
You need to find 'TheFile' to view the source for the current call stack frame. 
```

让我的文件再次打开的唯一解决方案是关闭并重新打开 Visual Studio。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-18T14:32:54.200

要在调试后停止关闭*所有*文件，只需转到

```
Tools > Import and Export Settings > Reset Settings 
```

这将修复此错误，我保存了导致此错误的旧设置，但我不确定在设置中具体导致它的原因。在令人沮丧地寻找这个问题的明确答案之后，我希望这可以帮助其他可能遇到这个问题的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T18:37:30.013

我在 Reshaper 7.1 中遇到过几个类似的调试问题。卸载它解决了我的问题。我不会声称问题出在 Reshaper 中，因为我安装了其他插件，但是其他插件不会产生这种问题，所以 Reshaper 不得不去。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-12-06T07:44:05.470

尝试从 Visual Studio 打开我的一个 .cs 文件时，我遇到了同样的错误。事实证明，我一次打开了太多文件，我一定是达到了某种内部限制。在 VS 中关闭所有打开的文件后，它停止发生在我身上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T17:45:28.000

我遇到了同样的问题并设法通过检查解决方案配置来解决它（右键单击解决方案并选择“配置管理器”。在那里我发现出于调试目的未选中“构建”复选框。Doh。检查它已修复问题。

# javascript - JavaScript & jQuery 循环解析 JSON

> ID：15387657
> 
> 赞同：5
> 
> 时间：2013-03-13T14:09:03.817
> 
> 标签：javascript, jquery, html, json

很抱歉问这个问题，即使查看其他问题我也无法让它工作......

我在“json.php”中有一个 JSON 输出，例如：

```
 [
       {"serverid":"1","servername":"Server One"},
       {"serverid":"2","servername":"Server Two"}
    ] 
```

我有一个脚本，用于获取数据并将其解析为变量

```
var servers;
jQuery.get('json.php', function(data) {
     servers =    JSON.parse(data);
     jQuery('#servers').servers.servername
}); 
```

我有一个 div 将结果输出到：

```
<div id="servers"></div> 
```

无论我尝试什么，我总能得到某种

> “未捕获的 TypeError：无法读取未定义的属性 'servername'”错误。

我也想看看结果，但是我什至不能让它打印 atm。

再次为这样的另一个问题感到抱歉

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T14:11:05.640

你说的不是这样的吗？jQuery 对象（它是对您的 div 的引用）对`servername`. 此外，您需要**遍历**项目数组以获取所有项目：

```
servers = $.parseJSON(data);

$.each(servers, function(index, value) {
    $("#servers").text($("#servers").text() + " " + value.servername);
}); 
```

小提琴：http: [//jsfiddle.net/H2RC2/1/](http://jsfiddle.net/H2RC2/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T14:14:56.787

错误消息就是您所需要的。将`jQuery('#servers')`#servers div 包装在jQuery 对象中。并且这个对象没有诸如`servers`.

相反，您可以使用：

```
 var servers = JSON.parse(data);
    var res = '';
    for(var i = 0; i<servers.length; i++){
        res = res + '<p>' + servers[i].servername +'</p>';
    }

    $('#servers').append(res); 
```

# knockout.js - 敲除按钮单击绑定作为属性

> ID：15387658
> 
> 赞同：0
> 
> 时间：2013-03-13T14:09:06.770
> 
> 标签：knockout.js

我一直在尝试使用敲除将单击事件数据绑定为按钮中的属性，但发现很难使其正常工作。

```
<button data-bind="attr:{click :test }">Test1</button>

function ViewModel() {

       self.test = function ( data  ) {
       alert('hit me!');
       }
};

var viewModel = new ViewModel();
ko.applyBindings(viewModel); 
```

点击绑定不应该与 attr 绑定一起使用，还是我在这里遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:10:16.053

这不是一个属性：

```
<button data-bind="click :test, attr: { id: 'theId' }">Test1</button> 
```

# vba - 将表格导出到文本字段但在日期/时间字段中获取 hhmmss

> ID：15387663
> 
> 赞同：3
> 
> 时间：2013-03-13T14:09:12.980
> 
> 标签：vba, ms-access

我尝试使用以下过程将表导出到文本文件：

右键单击表 | 出口 | 文本文件

这一切都很好，但我的字段之一是数据/时间字段，并像这样导出其中的值：

```
0:00:00 
```

我对此进行了一些研究，并通过 Microsoft [http://support.microsoft.com/kb/291245](http://support.microsoft.com/kb/291245)发现了这一点，它解释了为什么会发生这种情况并提供了一些解决方案。

这些解决方案中没有一个实际上对我有用，因为我需要 , 作为分隔符并且不希望 0:00:00 出现。母猪这样做的最佳方法是什么？

谢谢

我愿意接受通过 VBA 或 MS 向导提出的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:19:01.907

将您的表添加到查询设计窗口。将您需要的所有字段添加到设计网格中。将日期字段更改为：

```
MyDate: Format(TheDateField,"yyyy/mm/dd") 
```

或任何其他适合您的年、月、日组合。保存查询。选择导出查询。您可以通过右键单击、外部数据选项卡或通过 VBA 执行此操作：

```
DoCmd.TransferText acExportDelim, , "MyQuery", "z:\docs\myquery.csv" 
```

![添加表](../Images/17d90c4e242c7f8028f86953c08b3cf4.png)

参考： http: [//msdn.microsoft.com/en-us/library/office/bb214141 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb214141(v=office.12).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T21:24:57.770

另一种解决方案可能是首先基于具有正确日期格式的查询创建一个表，然后导出该表。

通过这种方式，您仍然可以在导出的文件中包含日期而不是字符串，因此可以对其进行排序！

Microsoft 在这里为我们提供了有关此解决方案的更多详细信息： [当您将日期字段导出为文本时，包含时间格式摘要](https://support.microsoft.com/en-us/kb/291245)

# linux - yum 安装 apt 错误

> ID：15387665
> 
> 赞同：-3
> 
> 时间：2013-03-13T14:09:20.120
> 
> 标签：linux, yum, apt

安装 apt 时出现以下错误。看来我缺少需要包。

```
Error: Package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64 (rpmforge)
               Requires: librpm-4.4.so()(64bit)
    Error: Package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64 (rpmforge)
               Requires: librpmio-4.4.so()(64bit)
    Error: Package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64 (rpmforge)
               Requires: librpmdb-4.4.so()(64bit) 
```

以前有人遇到过类似的事情吗？我需要一个一个安装丢失的包吗？

谢谢。

```
[root@db8 src]# uname -r
2.6.32-279.22.1.el6.x86_64

[root@db8 src]# yum install apt
 Loaded plugins: fastestmirror, refresh-packagekit
 Loading mirror speeds from cached hostfile
 * base: centos.vipernetworksystems.com
 * extras: mirror.sanctuaryhost.com
 * rpmforge: mirror.us.leaseweb.net
 * updates: mirror.linux.duke.edu
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package apt.x86_64 0:0.5.15lorg3.94a-5.el5.rf will be installed
--> Processing Dependency: librpmio-4.4.so()(64bit) for package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64
--> Processing Dependency: libreadline.so.5()(64bit) for package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64
--> Processing Dependency: librpm-4.4.so()(64bit) for package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64
--> Processing Dependency: librpmdb-4.4.so()(64bit) for package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64
--> Running transaction check
---> Package apt.x86_64 0:0.5.15lorg3.94a-5.el5.rf will be installed
--> Processing Dependency: librpmio-4.4.so()(64bit) for package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64
--> Processing Dependency: librpm-4.4.so()(64bit) for package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64
--> Processing Dependency: librpmdb-4.4.so()(64bit) for package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64
---> Package compat-readline5.x86_64 0:5.2-17.1.el6 will be installed
--> Finished Dependency Resolution
Error: Package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64 (rpmforge)
           Requires: librpm-4.4.so()(64bit)
Error: Package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64 (rpmforge)
           Requires: librpmio-4.4.so()(64bit)
Error: Package: apt-0.5.15lorg3.94a-5.el5.rf.x86_64 (rpmforge)
           Requires: librpmdb-4.4.so()(64bit)
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:54:24.577

首先尝试安装/更新 rpm-libs-4.4。如果在 rpmforge 发布 repo 中找不到，请尝试 epel 发布。

# windows - 使用 Windows 批处理脚本复制最新的 2 个文件

> ID：15387667
> 
> 赞同：0
> 
> 时间：2013-03-13T14:09:22.530
> 
> 标签：windows, batch-file

相关：[如何在 Windows 中使用批处理脚本获取最新文件](https://stackoverflow.com/questions/11539726/how-to-get-the-most-recent-file-using-a-batch-script-in-windows)

我想使用 Windows 批处理脚本从目录中复制最新的 2 个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:43:16.883

```
@ECHO OFF
SETLOCAL
SET transfer=xx
FOR /f "delims=" %%i IN ('dir/b/a-d/o-d *.*') DO IF DEFINED transfer CALL SET transfer=%%transfer:~1%%&ECHO %%i 
```

只需将 TRANSFER 设置为 #transfers 的长度即可执行；显然`echo %%i`用适当的 COPY 命令替换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:07:22.593

我的版本基于[Peter Wright](https://stackoverflow.com/users/2128947/peter-wright)的回答...

```
@ECHO OFF
setlocal EnableDelayedExpansion
set j=0

FOR /f "delims=" %%i IN ('dir /b /a-d /o-d *.*') DO (
    echo %%i
    set /A j=j+1
    if !j! geq 2 (
        goto :end
    )
)
:end 
```

# .net - DML 参考 DAL 是技术问题吗？（.net 书中的依赖注入）

> ID：15387677
> 
> 赞同：1
> 
> 时间：2013-03-13T14:09:40.097
> 
> 标签：.net, dependency-injection, n-tier-architecture

在 .net 中的依赖注入一书中（一本很棒的书，感谢标记）。在第 41 页其他问题：他谈到了一种反模式，引用 DAL 和 BLL 的 ui，定义域对象（实体框架自动生成的对象）的 DAL 他说：

> 大多数领域模型似乎都在数据访问库中实现。 **域模型库引用数据访问库是一个技术问题，**而数据访问库将这样的类定义为 Product 类是一个概念问题。公共产品类属于领域模型。

我明白 DAL 不能定义域对象。但我不明白为什么 DML 参考 DAL 是一个技术问题？当他谈到域模型库时，我们是在谈论 BLL（业务逻辑层）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:15:23.937

是的，领域模型库 (DML) 是一个业务逻辑层 (BLL)。这个库应该包含域模型实体（应该是持久无知的）和域服务。

为什么这是一个技术问题？DAL 中的任何更改都需要编译 DML。如果您要反向依赖，那么 DAL 将充当您域的插件。您可以随意更改它（将数据保存在内存、文件中或使用其他数据库提供程序）而不影响 BLL。

# node.js - 使用 Node.js 以 64 位整数响应

> ID：15387682
> 
> 赞同：2
> 
> 时间：2013-03-13T14:09:50.370
> 
> 标签：node.js, integer

我正在创建一个 Web 应用程序 API，它需要使用 JSON 对象响应所有 HTTP POST 请求。

我遇到的一个障碍是其中一个 JSON 字段需要包含 64 位 int，但是，Node.js 本身只支持 64 位双精度，因此不包括所需的精度级别。

不需要对这个整数进行任何计算，它只是一个请求“ID”，它允许使用 API 的服务了解来自 Node.js 的响应。不幸的是，将值转换为字符串会破坏访问此 API 的服务，因此，响应需要是有效的 64 位 int。

有没有办法在响应 JSON 中使用 64 位 int 进行响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:36:47.087

JavaScript 遵循 ECMA-262 标准，其中 JavaScript 中的所有数字（整数和浮点数）都是 64 位浮点数（[IEEE_754](http://en.wikipedia.org/wiki/IEEE_754-1985#Double-precision_64_bit)）。它最多可以使用 53 位的整数值。所以本机你不能处理 64 位整数运算。

使用[node-int64](https://npmjs.org/package/node-int64)包在节点中支持 64 位整数

# html - 使用 CSS 对齐跨度中的 IMG 和文本

> ID：15387687
> 
> 赞同：0
> 
> 时间：2013-03-13T14:09:58.287
> 
> 标签：html, css

我正在尝试使用跨度制作一个带有图像的按钮。以下工作，但问题是文本垂直居中对齐，但保存按钮 img 不是。我需要所有内容在中间垂直对齐。我的代码有什么问题？

```
.ButtonSPAN{
display:inline-block;
color: white;
background-color:#00537B;
border: 1px solid #1E90FF;
height: 25px;

padding:3px;
vertical-align:middle;
font-weight: bold;
}
.ButtonSPAN:hover{
color: #F0E68C;
cursor: hand; cursor: pointer;  
}

<span class="ButtonSPAN"><img src="/common/images/save.png" onclick="Save()">&nbsp;Save</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:45:01.457

看看[这个小提琴](http://jsfiddle.net/cherryflavourpez/csSef/)，说明可用的不同值`vertical-align`。您的示例 CSS 显示您应用`inline-block`到父级（`.ButtonSPAN`），这无助于对齐其中的内容。

实现您所追求的最简单的方法是将文本包装在一个单独的文件中`span`，然后使用它：

```
<button><img src="http://placehold.it/36x36"> <span>Middle</span></button>

button {
    color: white;
    background-color:#00537B;
    border: 1px solid #1E90FF;
    padding: 3px;
    font-weight: bold;
}

img, span {
    display: inline-block;
    vertical-align: middle;
} 
```

这是上面 jsFiddle 的截图。我将图像稍微放大了一点，并给出了`span`a`background-color`以更好地说明变体：

![垂直对齐示例](../Images/5858f1542048943bb8953fa5469230f0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:12:02.337

**[更新]**将您的“保存”包装在一个 中`span`，并添加到您的 css

```
.ButtonSPAN{
    line-height:25px;
}

.ButtonSPAN *{
    vertical-align:middle; //Align everything nested in .ButtonSPAN to the middle
} 
```

演示[在这里](http://jsfiddle.net/bigood/zSDtv/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:17:33.400

有些想法可能会奏效。我的第一个选择是将图像设置为`background:url(image_path)`跨度并给出高度、宽度和边距以正确对齐。您可以放置​​多个背景，只需在您希望点击的位置添加一个锚点，或者使您的所有跨度都可点击。第二种选择是将该图像与`vertical-align:middle`. 第三是编辑该图像以在图像上方留出透明空间。

希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:17:51.183

这里有几个选项：

您可以将图像作为背景图像应用到您的跨度：

```
.ButtonSPAN{
    background:#00537B url(/common/images/save.png) 3px center no-repeat;
} 
```

你将不得不把你`onClick="save()"`的`span`元素。

[背景图像属性](http://www.w3schools.com/cssref/pr_background-image.asp)

或者，如果您知道图像的高度，这应该可以：

（我假设图像高度为 16px）

```
.ButtonSPAN{
    position:relative;
}
.ButtonSPAN img{
    position:absolute;
    top:50%;
    margin-top:-8px;
} 
```

或者，或者，看看这个[页面](http://www.brunildo.org/test/img_center.html)

PS 最好以小写字母开头类名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T14:43:52.887

由于您将文本和图像都保存在一个`span`元素中，因此您需要按照以下小提琴中所示的方法解决：

**[工作小提琴](http://jsbin.com/ozodig/3/edit)**

在这里，我添加`marign-bottom:-3px`了使它看起来像在文本中间。

```
.ButtonSPAN img{  
   margin-bottom:-3px;  /* fix until the img comes to mid */
   width:16px;height:16px; /* giving fixed widths for demo */
} 
```

我也`vertical-align`从`.ButtonSPAN`班级中删除并添加了`line-height`等于高度的值。

# matrix - 使用 jblas 的数组索引越界异常

> ID：15387688
> 
> 赞同：0
> 
> 时间：2013-03-13T14:10:00.187
> 
> 标签：matrix, indexoutofboundsexception, java

```
 double [][] AdjacencyMat = new double[baseSize][baseSize];
        for (int i = 0; i < baseSize; ++i)
        {
            for (int j =0; j < baseSize; ++j)
            {
                AdjacencyMat[i][j] = 0;
            }
        }
        DoubleMatrix matrix = new DoubleMatrix(AdjacencyMat); 
```

我正在尝试使用 JBLAS 进行矩阵运算。在下面的代码中，我得到`ArrayIndexOutOfBoundsException`.

```
java.lang.ArrayIndexOutOfBoundsException: 0  
at org.jblas.DoubleMatrix.<init>(DoubleMatrix.java:370) 
```

我做错了什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:16:12.693

与创建一个新矩阵并用零填充它相反，您可以`DoubleMatrix`像这样在类中使用静态工厂方法

```
DoubleMatrix matrix = DoubleMatrix.zeros(baseSize, baseSize); 
```

这是解决问题的一种方法。请参阅[javadoc](http://jblas.org/javadoc/org/jblas/DoubleMatrix.html)了解更多很棒的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:44:27.563

您根本不需要将 0 分配给您的元素。

```
double[][] a = new double[10][10]; 
```

将自己创建数组，默认情况下所有元素都为 0.0。

# java - 为什么Java中有一个随机数的函数和一个类？

> ID：15387693
> 
> 赞同：1
> 
> 时间：2013-03-13T14:10:12.810
> 
> 标签：java, random

在 Java 中有一个函数 `Math.random()`和一个类`Random`。*为什么看似相同的操作（即随机数生成*）有两个实体，什么时候应该使用哪一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T14:11:13.060

如果您需要设置一个明确的随机种子（是的，有时您会这样做，当您想要可重现的随机数时），那么您可以使用`Random`.

除此之外，该`random()`方法只是固定`Random`对象的快捷方式，因此您可以使用它来简洁，并且当您不关心随机种子时（我猜大多数情况下）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:13:35.333

“不同之处”在于 java.util.Random 具有返回不止一种数字类型的方法。无需铸造。一个构造函数允许用户为重复序列的生成器播种。

java.lang.Math.random() 使用 java.util.Random。它只提供双打并且没有播种能力。

# ruby - Module#included 和 Module#extended 和 Module#prepended 对比讨论

> ID：15387695
> 
> 赞同：0
> 
> 时间：2013-03-13T14:10:15.697
> 
> 标签：ruby, module, ruby-2.0

任何人都可以帮助我了解以下 3 种有关其功能差异和用途的方法吗？

> *   **Module#included** : *mod.included(other)*在*other.include(mod)之后调用*
>     
>     
> *   **Module#extended** : *mod.extended(obj)*在*obj.extend(mod)之后调用*
>     
>     
> *   **Module#** prepended : *mod.prepend(other)*在*other.prepend(mod)之后调用*

可以用一个例子来比较理解以上三者吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:18:17.253

在红宝石中。您可以将一个模块包含到另一个类中，并且这些方法将可用于该类的实例。Extend 类似，只是方法作为类方法添加到该类。[更多信息在这里](http://www.railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)或[这里](http://techbot.me/2008/09/including-and-extending-modules-in-ruby/)。

[Prepend](http://dev.af83.com/2012/10/19/ruby-2-0-module-prepend.html)是 2.0 的新功能。“有时，您希望模块中的方法优先于类中的方法。有一些解决方案可以完成此任务，例如 alias_method_chain，但它比任何东西都更像是一种 hack - 而且并不安全。” -- 也就是说，有时您希望将包含的方法放在类中的方法之前，然后您可以使用它`super`来调用类中的原始方法。

这两个链接都有详细的示例，因此请务必查看这些示例。但是对于包含、前置和扩展使用的内容呢？好吧，在你想要包含/扩展/前置的模块上，你可以定义这些函数，当实际的包含/扩展/前置发生时，这个方法将被调用，`obj`参数设置为你正在扩展的类。这很有用，例如，当您不想只向类添加方法，而是想向其中添加类变量或实例变量之类的东西，或者初始化值时......无限的可能性。

**例子**

假设我有大量的模型，比如评论、帖子、图片等。不必复制和粘贴相同的代码来实现一个功能，例如“喜欢”事物的能力，我可以创建类似这样的东西：

```
module Likable
  def self.included(obj)
    obj.instance_variable_set(:@like_count, 0)
  end
end

class Comment
  include Likable
end

class Picture
  include Likable
end 
```

如您所见，这会自动将一个名为`like_count`0 的新实例变量设置为几个不同的班级。即使您只向单个类添加功能，有时也会使用此功能，因为这样做的好处是某个功能被提取到单独的类中，您可以比将代码与其他功能混合更容易理解和调整代码.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:15:36.503

`Module#prepended`[在这里](http://blog.crowdint.com/2012/11/05/3-killer-features-that-are-coming-on-ruby-2-0.html)很好地描述了 Ruby 2.0 中的另一个新特性

`Module#included`并以与和`Module#extended`类似的方式工作`include``extend`

这是 Rails 项目中使用的一种流行模式：

```
module Talker

  def self.included(base)
    base.extend ClassMethods
  end

  module ClassMethods
    def say(*args)
      args.each do |arg|
        method_name = ("say_" + arg.to_s).to_sym
        send :define_method, method_name do
          puts arg
        end
      end
    end
  end

end 
```

`included`是挂钩事件（与on`include`相同），它在模块包含到另一个类时调用。`extended``extend``Talker`

通过这个功能，我们可以扩展原始类而不是这种模式：

```
class Original
  include Talker
  extend Talker::ClassMethods
  ...
end 
```

# ruby - 查找忽略字符串内数字的xpath

> ID：15387697
> 
> 赞同：0
> 
> 时间：2013-03-13T14:10:18.803
> 
> 标签：ruby, regex, ruby-on-rails-3, xpath

实际的 xpath 是`//*[@id="location_in_196548881_chzn"]`，中间的数字是随机生成的。我想搜索这个节点。

当 id 不变时，我的搜索调用是这样的

```
find(:xpath,'//*[@id="location_in_196548881"]') 
```

试过这个但没有用

```
//id[contains(text(), 'location_in_')] 
```

在找到这个 id 时，我怎么能忽略这个数字？

HTML 片段是

```
<div class='control-group'>
<label class='control-label' for='inputLocation'>
Location
</label>
<div class='controls location'>
<select class="span6 first" data-chosen_select="true" data-placeholder="via Location" id="location_in_196548881" name="browse[relation][location_in][]"><option value=""></option>
<optgroup label="Top"><option value="43705">Bangalore</option>
<option value="43767">Chennai</option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:14:55.657

您的想法是正确的，但是如果您的原始 XPath 用于静态数字，那么只需将`@id=''`部分替换为您在第二个 XPath 中尝试的部分，如下所示：

```
//*[contains(@id,'location_in_')] 
```

如果`id`是一个属性，那么您使用第一个 XPath 正确地引用了它，这就是您返回某些东西的原因。在您的第二次调用中，您引用它就好像它是一个包含您要查找的文本的节点。

换句话说，`//id[contains(text(), 'location_in_')]`将适用于类似的东西

```
<root>
<id>location_in_12345</id>
</root> 
```

但你实际上似乎在寻找的是

```
<root>
<node1 id="location_in_1235">text</node1>
<node2 id="location_in_5678">text</node2>
</root> 
```

因此，您可以用我提供的内容替换您原来的 XPath：

```
find(:xpath,'//*[contains(@id,"location_in_")]') 
```

# c# - 引用类库而不必引用库的服务引用

> ID：15387706
> 
> 赞同：0
> 
> 时间：2013-03-13T14:10:39.970
> 
> 标签：c#, nuget, service-reference

我正在使用只能通过 Web 和服务引用访问的第 3 方系统。在构建处理自动化处理的 Windows 服务时，我发现如果解决方案使用 Web/服务引用，则还必须在引用第一个的任何解决方案中设置它们。

有没有办法防止这种情况？我想创建一个类库来保存所有实际的 API 调用并将其用作 NuGet 包，而不必同时添加对每个项目的引用。

**编辑：**这是我当前如何调用 API 的示例：

```
internal class ApiAccess
{
    private readonly Account_SSPSoapClient _apiAccount;

    public ApiAccess()
    {
        _apiAccount = new Account_SSPSoapClient();
    }

    public string GetAccountId(string accountName)
    {
        return _apiAccount.GetID(accountName);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:21:07.983

这是一个问题，但不是它看起来的问题。

您实际上并不需要在使用您的代码的所有项目中的服务引用 - 您所需要的只是 app.config 中的一些信息。具体来说，绑定和端点地址。您可以将它们硬编码到您的代码中，然后您应该能够很好地引用它。

最简单的情况：

```
var request = new MyServiceRequest { /* set properties here */ };
var client  = MyServiceReferenceClient(new BasicHttpBinding(), new EndpointAddress(@"https://my.service.com/path/to/service"));
var channel = client.ChannelFactory.CreateChannel();
var result  = channel.MyService(request); 
```

您需要在 上设置一些参数`BasicHttpBinding`以匹配 app.config 文件中的内容，并且 URL 也来自那里。

请参阅[此答案](https://stackoverflow.com/a/529828/298754)以了解为什么默认情况下它不起作用。

* * *

编辑：对于您的代码，您只需替换`new Account_SSPSoapClient();`为以下内容：

```
new Account_SSPSoapClient(new BasicHttpBinding(), new EndpointAddress(@"https://my.service.com/path/to/service")); 
```

其他一切都应该相同，但它将使用这些值而不是 app.config 值（这是它在没有参数的情况下所做的）。

在 app.config 文件中查找类似内容：

```
 <bindings>
        <basicHttpBinding>
            <binding name="LabelRecoveryBinding" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding> 
```

其中的所有内容都对应于您可以`BasicHttpBinding`在上面创建的对象上设置的属性 - 其中大部分是默认值，但您可能希望手动设置所有内容以确保安全。

同样，寻找

```
<client>
        <endpoint address="http://153.2.133.60:48010/xoltws_ship/LBRecovery"
            binding="basicHttpBinding" bindingConfiguration="LabelRecoveryBinding"
            contract="UPSLabelRecoveryService.LabelRecoveryPortType" name="LabelRecoveryPort" />
</client> 
```

这会告诉您要提供给`new EndpointAddress`.

# javascript - how to change the target with a variable

> ID：15387712
> 
> 赞同：1
> 
> 时间：2013-03-13T14:10:58.833
> 
> 标签：javascript, jquery, variables, hyperlink

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:22:08.860

Instead of repeating the same code over and over again for each unique ID, try this:

HTML: `<a href="#" id="aX">` and `<a href="#qX">`

JS:

```
// Select for all links that start with "#q(...)"
$("a[href^='#q']").click(function(e) {

    // Prevent default
    e.preventDefault();

    // Define some variables
    var x = $(this).attr("href").substr(2),
        content = $(this).text();

    // Select the correct element to replace text
    $("#a" + x).text(content);
}); 
```

[Edit]: For the sake of completeness - should the content of the link contain HTML tags and you would like to clone them over, use `.html()` instead of `.text()` ;)

See fiddle here - [http://jsfiddle.net/teddyrised/c69P6/](http://jsfiddle.net/teddyrised/c69P6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:23:04.430

Take a look at this fiddle: [http://jsfiddle.net/H6j6g/1/](http://jsfiddle.net/H6j6g/1/)

```
$("a[id^=q]").click(function(){
    $("#a" + this.id.substring(1)).text($(this).text());
}) 
```

`$("a[id^=q]")` Will select all links with IDs starting with the letter "q". Then it finds the element with an id with the same number but instead starts with the letter "a" and replaces that link's text with the text of the link that was clicked.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:15:13.223

Try this:

```
$('#q1 a').click(function () {
    $('#a1').text($(this).text());
});
$('#q2 a').click(echoAnswer, function () {
    $('#a2').text($(this).text());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:17:26.223

# android - 如何知道片段是否已重新创建

> ID：15387724
> 
> 赞同：0
> 
> 时间：2013-03-13T14:11:26.407
> 
> 标签：android

我需要在 ListFragment 中显示一些数据。我正在使用 AsyncTask 从 Internet 下载数据，然后使用 Adapter 更新数据。

```
public void onActivityCreated(Bundle savedInstanceState) {

    super.onActivityCreated(savedInstanceState);
    activity = getActivity();
    context = activity.getApplicationContext();
    res = activity.getResources();
    resFactory = createFactory(context);
    dataFolder = resFactory.getDataFolder();
    dataFile = resFactory.getDataFile();
    ArrayList list = resFactory.getArrayList();
    setListAdapter(resFactory.getAdapter(context, list));
    linkToData = resFactory.getDataLink(res);
    getData();

} 
```

在`getData`我开始`AsyncTask`。

我只想`getData`在一个用户会话中执行一次。因此，如果片段被分离然后再次附加，我不想再次下载数据。但是，如果刚刚创建片段，我希望它下载数据。

对此的简单答案是调用`getData`from `onCreate()`，但随后我得到 nullPointer，因为那时我没有`AsyncTask`. 所以我需要以某种方式知道片段是刚刚创建还是刚刚分离然后再次附加。

英语不是我的母语。所以我很抱歉如果我的问题不是很容易理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:19:40.527

```
package com.example.gridview;

import android.os.Bundle;
import android.support.v4.app.Fragment;

/**
 * @author rajeshcp
 */
public class FrgamentX extends Fragment {

    private boolean mIsCreated;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        if(!mIsCreated)
        {
                    mIsCreated = true;
            //load data
        }
    }
} 
```

这也将起作用。

# r - 在 R 中使用对象名称作为列表名称

> ID：15387727
> 
> 赞同：12
> 
> 时间：2013-03-13T14:11:33.597
> 
> 标签：r, list, naming

当然，我可以像这样手动命名列表中的对象：

```
 #create dfs
    df1<-data.frame(a=sample(1:50,10),b=sample(1:50,10),c=sample(1:50,10))
    df2<-data.frame(a=sample(1:50,9),b=sample(1:50,9),c=sample(1:50,9))
    df3<-data.frame(a=sample(1:50,8),b=sample(1:50,8),c=sample(1:50,8))

    #make them a list
    list.1<-list(df1=df1,df2=df2,df3=df3) 
```

但是，如果我有 50 个长名称的对象，它会做很多工作。那么有什么方法可以自动执行此操作并使列表中的名称与外部对象相同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T14:18:34.163

找到名字，然后调用`mget`。
如果每个单独变量的名称都有一个模式，那么这很简单。

```
var_names <- paste0("df", 1:3)
mget(var_names, envir = globalenv())  #or maybe envir = parent.frame() 
```

如果命名系统更复杂，您可以使用正则表达式来查找它们，使用类似

```
var_names <- ls(envir = globalenv(), pattern = "^df[[:digit:]]+$") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:19:02.293

如果您只想使用共享某些内容的环境中的名称命名一个列表，在本例中为“df”：

```
names(list.1) <- grep("df",ls(),value=TRUE) 
```

如果要将环境推送到列表中：

```
list.1 <- globalenv()
list.1 <- as.list(list.1) 
```

要反转该过程，请参阅`?list2env`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-14T18:01:43.047

正如可能重复的问题的回答中所述：

从 tidyverse，使用`tibble:lst`： [https ://tibble.tidyverse.org/reference/lst.html](https://tibble.tidyverse.org/reference/lst.html)

# vbscript - 如何在批处理脚本中调用或嵌入 VBS

> ID：15387730
> 
> 赞同：0
> 
> 时间：2013-03-13T14:11:54.523
> 
> 标签：vbscript, batch-file, batch-processing

我想批量发送电子邮件，但由于 mailto 命令不会在没有我单击发送按钮的情况下通过 Outlook 发送电子邮件。

我在网上找到了这个 VBS 脚本，它无需人工交互即可发送电子邮件。

我只需要帮助电话或者是否可以将 VBS 嵌入到 BATCH 文件中。

```
' Create email object
Set oolApp = CreateObject("Outlook.Application")
Set email = oolApp.CreateItem(0)
email.Recipients.Add("myemail@esomeemail.com")

' Create the body of the email
MailBody = "<!DOCTYPE HTML PUBLIC ""-//W3C//DTD W3 HTML//EN"">"
MailBody = MailBody & "<HTML>" & vbcrlf
MailBody = MailBody & "<HEAD><TITLE>No Invoices</TITLE></HEAD>"
MailBody = MailBody & "<BODY>" & vbcrlf
MailBody = MailBody & "<B>For Your Information</B>,<BR><BR>"
MailBody = MailBody & "No invoices were issued today.<BR><BR>"
MailBody = MailBody & "</BODY></HTML>"

' Send the Email
email.Subject = "No Invoices Issued"
email.HTMLBody = MailBody
email.Send 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:36:45.020

**编辑：**现在我重新阅读了你的问题，我不确定你在问什么。您是在问如何运行 vbscript 吗？只需将其保存`filename.vbs`并执行它

```
cscript filename.vbs 
```

（或者`cscript /nologo filename.vbs`如果您想避免显示 Microsoft 的 cscript 虚荣垃圾邮件）。

* * *

另一方面，如果您想将其合并到批处理脚本中，那么有很多方法可以将批处理脚本中的内容回显到外部文件。大多数人只是做类似的事情

```
echo Set oolApp = CreateObject^("Outlook.Application"^)>> vbsfile 
```

或类似的，`^`根据需要转义。但是，您可能会发现[此页的 heredoc 方法](https://stackoverflow.com/questions/1015163/)很有用。这是使用我昨天[帮助您制作](https://stackoverflow.com/questions/15364653)的脚本的示例：

```
@if (@X)==(@Y) @end /* (batch + jscript hybrid script init)

:: *** Batch script *****

@echo off
setlocal enabledelayedexpansion

set recipient=myemail@esomeemail.com

for /f "delims=" %%I in ('wget "%~1" -O- -q 2^>NUL ^| findstr /i "last.*updated.*as.*of"') do (
    for /f "delims=" %%x in ('cscript /nologo /e:jscript "%~f0" "%%I"') do (
        set /a "thirtyMinutes = 30 * 60 * 1000"
        if %%x GEQ !thirtyMinutes! (
            call :doEmail
        )
    )
    exit /b
)
exit /b

:doEmail
call :heredoc vbs >email.vbs && goto endvbs
' Create email object
Set oolApp = CreateObject("Outlook.Application")
Set email = oolApp.CreateItem(0)
email.Recipients.Add("!recipient!")

' Create the body of the email
MailBody = "<^!DOCTYPE HTML PUBLIC ""-//W3C//DTD W3 HTML//EN"">"
MailBody = MailBody & "<HTML>" & vbcrlf
MailBody = MailBody & "<HEAD><TITLE>No Invoices</TITLE></HEAD>"
MailBody = MailBody & "<BODY>" & vbcrlf
MailBody = MailBody & "<B>For Your Information</B>,<BR><BR>"
MailBody = MailBody & "No invoices were issued today.<BR><BR>"
MailBody = MailBody & "</BODY></HTML>"

' Send the Email
email.Subject = "No Invoices Issued"
email.HTMLBody = MailBody
email.Send
:endvbs

cscript /nologo email.vbs
del email.vbs
goto :EOF

:: https://stackoverflow.com/a/15032476/1683264
:heredoc <uniqueIDX>
setlocal enabledelayedexpansion
set go=
for /f "delims=" %%A in ('findstr /n "^" "%~f0"') do (
    set "line=%%A" && set "line=!line:*:=!"
    if defined go (if #!line:~1!==#!go::=! (goto :EOF) else echo(!line!)
    if "!line:~0,13!"=="call :heredoc" (
        for /f "tokens=3 delims=>^ " %%i in ("!line!") do (
            if #%%i==#%1 (
                for /f "tokens=2 delims=&" %%I in ("!line!") do (
                    for /f "tokens=2" %%x in ("%%I") do set "go=%%x"
                )
            )
        )
    )
)
goto :EOF

:: *** JScript script *****/
var args = [];
for (var i=0; i<WScript.arguments.length; i++) { args.push(WScript.arguments(i)) }
var t = args.join(' ').replace(/^\s+|<[^>]+>|\s+$/g,'').replace(/\&nbsp;/g, ' ').split(' ');
var h = t[4].split(':')[0];
if (/pm/i.test(t[5])) h = h * 1 + 12;
var ds = t[6] + ' ' + t[7] + ', ' + new Date().getFullYear() + ' ' + h + ':' + t[4].split(':')[1];
var diff = new Date() - new Date(ds);
WScript.echo(diff); 
```

我没有对此进行测试，但请尝试一下，看看您的想法。

# ms-access - 使用字母计算访问报告中的行数

> ID：15387738
> 
> 赞同：0
> 
> 时间：2013-03-13T14:12:10.780
> 
> 标签：ms-access

我知道如何使用文本框计算 Access 报告中的行数，以及如何使用数字计算行数。

我正在通过报告创建多项选择文本，并且需要为每个问题的答案使用字母，并且想知道如何使用字母标记答案行。

前任

```
a. Choice 1
b. Choice 2
c. Choice 3
<...> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:22:17.863

`Chr(Asc("a") + n - 1)`会将 1 转换为 'a'，将 2 转换为 'b'，依此类推。

假设您的报告中有一个名为“运行总和”的文本框`[answerNum]`，其数字回答如下：

```
1  This is the first answer 
2  This is the second answer 
... 
```

您可以通过创建另一个名为的文本框`[answerLetter]`并将其控制源设置为

`=Chr(Asc("a") + [answerNum] - 1)`

将`[answerNum]`的“可见”属性设置为 False（但不要删除它）并将`[answerLetter]`文本框移动到所需位置。您的报告现在将如下所示：

```
a  This is the first answer
b  This is the second answer
... 
```

# if-statement - 检查 FlexGrid 中选定单元格的背景颜色

> ID：15387742
> 
> 赞同：0
> 
> 时间：2013-03-13T14:12:23.130
> 
> 标签：if-statement, vb6, backcolor, msflexgrid

我需要在 中做一些事情`MyFlexGrid_DblClick()`，但前提是背景颜色未设置为 vbInactiveBorder，我尝试了以下代码但没有成功

```
Private Sub MyFlexGrid_DblClick()  

    If Not MyFlexGrid.BackColor = vbInactiveBorder Then  
        _what I need to do_  
    End If

End Sub 
```

在调试内部“*我需要做什么*”的过程中完美运行，但签入`If`始终为真，即使我双击的单元格的背景色先前设置为`vbInactiveBorder`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:00:34.163

您正在检查错误的属性。

[`.BackColor`](http://msdn.microsoft.com/en-us/library/aa228900%28v=vs.60%29.aspx)指单元格的默认背景颜色。尝试检查[`.CellBackColor`](http://msdn.microsoft.com/en-us/library/aa239821%28v=vs.60%29.aspx)以获取当前单元格的背景颜色。

来自 MSDN：

> BackColor 影响所有非固定单元格的颜色。要设置单个单元格的背景颜色，请使用 CellBackColor 属性。

# django - Django 1.4 + mod_wsgi + apache2 无模块

> ID：15387743
> 
> 赞同：0
> 
> 时间：2013-03-13T14:12:33.837
> 
> 标签：django, apache

这是我的 django.wsgi 文件：

```
import os
import sys

path1 = '/srv/site/app'
path2 = '/srv/site'

if path1 not in sys.path:
    sys.path.insert(0,path1)

if path2 not in sys.path:
    sys.path.insert(1,path2)

os.environ['DJANGO_SETTINGS_MODULE'] = 'app.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler()

    ImportError: Could not import settings 'app.settings' (Is it on sys.path?): No module named app.settings 
```

Apache 没有找到设置文件。我不知道什么时候出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:16:22.730

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "project_name.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

# jms - 如何在启动后停止 mule 流运行

> ID：15387745
> 
> 赞同：0
> 
> 时间：2013-03-13T14:12:39.600
> 
> 标签：jms, mule, endpoint, connector

我有一个以 jms 入站端点开始的 mule 流。我的要求是防止队列读取任何消息，直到我明确启用端点的连接器。所以我有一个实现 MuleContextNotificationListener 的初始化器，覆盖 onNotification 如下所示：

```
@Override
public void onNotification(MuleContextNotification ctxNotification) {

    System.out.println("Notification order event: " + ctxNotification.getActionName() );

    if(ctxNotification.getAction() == MuleContextNotification.CONTEXT_STARTING
            || ctxNotification.getAction() == MuleContextNotification.CONTEXT_STARTED){
        try{
            //Startup with the Staging and Error Q readers disabled.
            System.out.println("STOPPING QUEUES : Staging and Error Queues");
            //ctxNotification.getMuleContext().getRegistry().lookupConnector("lynxJMSConnectorStagingQReaderNormal").stop();
            ctxNotification.getMuleContext().getRegistry().lookupConnector("lynxJMSConnectorStagingQReaderDR").stop();
            ctxNotification.getMuleContext().getRegistry().lookupConnector("lynxJMSConnectorErrorQReader").stop();
            ctxNotification.getMuleContext().getRegistry().lookupEndpointFactory().getInboundEndpoint("errorQueueReader").stop();

            System.out.println("STOPPED QUEUES");

        }catch(MuleException me){
            me.printStackTrace();
        }
    }

} 
```

但即使在应用程序初始化时，流程仍会启动（从 jms 队列中读取消息）。当连接器初始化时我应该怎么做才能阻止它？如果不是，我应该使用什么机制来阻止连接器读取它。我已经有了从 http 调用启动/停止连接器的代码。

我正在使用没有注释的 Mule 3.2.2。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:19:07.803

与其在初始化阶段尝试停止流程，不如将其配置为在 Mule 启动时停止：

```
<flow name="..." initialState="stopped"> 
```

然后让您的自定义逻辑在适当的时候启动它，例如使用 MEL：

```
<expression-component>app.registry.targetFlow.start();</expression-component> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T12:01:30.737

或者，有一个名为**mule-deploy.properties**
的属性文件 ，您可以在那里找到，所有流 xml 文件的名称都是手动写入的：-

```
config.resources=yourFlowName.xml 
```

您可以在 Mule 应用程序启动时删除您不想启动的流程名称。
但是，是的，推荐使用 David 的解决方案，您应该仅将此解决方案用作替代方案。

# xcode - 在 Mac App 中搜索 Value & Key

> ID：15387748
> 
> 赞同：0
> 
> 时间：2013-03-13T14:12:53.450
> 
> 标签：xcode, macos, core-data, key-value-coding

我有一个验证用户凭据、名称和 PIN 的 Mac 应用程序。使用`CoreData`，我如何引用`key`来自特定的`value`？例如，在数据库中，John Doe 的 PIN 为 1234。当用户选择他们的姓名时，他们输入他们的 PIN 并点击登录按钮。如果 pin`CoreData`与其数据库中的内容匹配，则允许用户继续。我已经准备好一切准备就绪，我只是不知道如何从 Core Data 获取 PIN 值。然后，我会将其与用户输入的字符串值进行比较，以验证用户的凭据。它可能很简单，但我无法弄清楚。实体名称：`Employee`属性：“employeeName”和“employeePin”。

```
- (IBAction)loginButton:(NSButton *)sender {
NSString *name = self.chooseNameBox.selectedCell;
NSString *pass = self.pinEntryField.stringValue;

context.???
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:24:49.657

您需要像这样设置获取请求：

```
NSError *aError = nil;
NSEntityDescription *entityDescription = [NSEntityDescription
                                          entityForName:@"Employee" inManagedObjectContext:self.currentManagedObjectContext];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];
NSPredicate* entriesPredicate = [NSPredicate predicateWithFormat:@"employeeName = %@", name];
NSSortDescriptor* sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];

[request setPredicate:entriesPredicate];
[request setSortDescriptors:@[sortDescriptor]];

NSArray *employeeArray = [self.currentManagedObjectContext executeFetchRequest:request error:&aError];

EmployeeObject *retrievedEmployee = [employeeArray lastObject];
NSString *retrievedPin = retrievedEmployee.employeePin; 
```

另外，我同意@trojanfoe 的观点，您需要在将 pin 插入数据库之前对其进行哈希处理。

# c# - 组合布尔 Observables

> ID：15387749
> 
> 赞同：15
> 
> 时间：2013-03-13T14:12:55.040
> 
> 标签：c#, boolean, system.reactive

当某些条件发生变化时，我有两个流信号。我需要一个 Observable ，它会`true`在**所有条件**转变时触发`true`。`false`当**他们中的任何一个**转身时`false`。如果某些条件是`false`并且另一个更改`false`我不需要引发事件。

这是我的做法：

```
// Introducing current states
private bool cond1 = false;
private bool cond2 = false;

void MyHandlingMethod(IObservable<bool> c1, IObservable<bool> c2)
{
    c1.Subscribe(b => _state1 = b);
    c2.Subscribe(b => _state2 = b);

    var c3 = c1.Merge(c2).Select(_ => _cond1 && _cond2);

    c3.Subscribe(b => /* some action goes here /*);
    // ...
} 
```

我想知道这是否是解决我的问题的正确方法以及是否有任何陷阱。例如，由于 rx 的异步特性，c3 订阅在 c1 和 c2 之前触发。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T14:35:41.527

不需要保持状态：

```
c3 = c1.CombineLatest(c2, (a, b) => a && b).DistinctUntilChanged() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:32:58.530

老实说，我可能会采用这种`CombineLatest`方法，但为了接触 Rx 框架中未触及的部分......

虽然不是完美契合，但您可以使用`Observable.When`//模式`Observable.And`：`Observable.Then`

```
var firstStream = new Subject<bool>();
var secondStream = new Subject<bool>();
var thirdStream = new Subject<bool>();
var fourthStream = new Subject<bool>();

var query = Observable.When(firstStream
        .And(secondStream)
        .And(thirdStream)
        .And(fourthStream)
        .Then((v1,v2,v3,v4) => v1 & v2 & v3 & v4));

using(query.Subscribe(Console.WriteLine))
{
    firstStream.OnNext(true);
    secondStream.OnNext(true);
    thirdStream.OnNext(true);
    // output stream will fire after this statement
    fourthStream.OnNext(true);
    Console.ReadLine();
} 
```

这种方法的一个好处是，只有当所有流都具有根据`Then`子句组合的数据时，您才创建输出事件 - 它也读起来相当不错。也就是说，它对您的用例有一个严重的失败：您*必须*在每个传入流上都有数据才能触发输出流：

```
using(query.Subscribe(Console.WriteLine))
{
    firstStream.OnNext(true);
    secondStream.OnNext(true);
    thirdStream.OnNext(true);
    // output stream will fire after this statement
    fourthStream.OnNext(true);

    // this WON'T raise false on the output!
    firstStream.OnNext(false);
    secondStream.OnNext(false);
    thirdStream.OnNext(false);
    // output stream will fire false after this statement
    fourthStream.OnNext(false);
    Console.ReadLine();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:50:31.837

像 JerKimball 一样，我将建议使用 Joins（现在何时）：

```
IObservable<bool> cond1 = new [] { false, true, true, false, false }.ToObservable();
IObservable<bool> cond2 = new [] { true, true, false, false, true }.ToObservable();
Func<bool, bool> isFalse = (x) => x == false;
Func<bool, bool> isTrue = (x) => x == true;
var trueC1s = cond1.Where(isTrue);
var falseC1s = cond1.Where(isFalse);
var trueC2s = cond2.Where(isTrue);
var falseC2s = cond2.Where(isFalse);
var trues = trueC1s.And(trueC2s).Then((_, __) => true);
var falses = trueC1s.And(falseC2s).Then((_, __) => false);
var falses2 = falseC1s.And(trueC2s).Then((_, __) => false);
var falses3 = falseC1s.And(falseC2s).Then((_, __) => false);
Observable.When(trues, falses, falses2, falses3).Dump(); 
```

但是，当有很多 Observable 时，它​​确实会变得有点混乱。

# php - 在文档中，'[' 和 ']' 代表什么？

> ID：15387751
> 
> 赞同：0
> 
> 时间：2013-03-13T14:13:04.730
> 
> 标签：php

我是新手`php`，所以不太了解。我以 php [DOCS](http://php.net/manual/en/function.fwrite.php)为例`fwrite`：

```
int fwrite ( resource $handle , string $string [, int $length ] ) 
```

`[`和`]`表示什么？我到处都能看到它们。他们代表什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T14:13:54.557

这意味着该参数是可选的。通常在参数名称之后使用 指定默认值`= (default)`，详细信息在描述中。

在 的情况下[`fwrite`](http://php.net/fwrite)，即：

> 如果给出了长度参数，写入将在长度字节被写入或到达字符串结尾后停止，以先到者为准。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T14:14:00.013

这意味着该方法的可选参数，您不必传递它们。

通常，会显示一个默认值，例如在 的情况下[`preg_quote`](http://php.net/preg_quote)，默认值为 NULL：

```
string preg_quote ( string $str [, string $delimiter = NULL ] ) 
```

如果您对该默认值感到满意，则可以省略该参数。另一个很好的例子是[`mktime`](http://php.net/mktime).

```
int mktime ([ int $hour = date("H") [, int $minute = date("i") [, int $second = date("s") [, int $month = date("n") [, int $day = date("j") [, int $year = date("Y") [, int $is_dst = -1 ]]]]]]] ) 
```

请注意，在`mktime`的文档中，声明您可以使用特定格式跳过参数：

> 参数可以按从右到左的顺序省略；因此省略的任何参数都将根据本地日期和时间设置为当前值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:13:51.833

它代表一个可选参数。如果不指定，将使用默认值。它会在文档中说明它是哪一个，具体取决于功能。

有时你会想要将可选参数传递给函数，例如，如果你想修剪右边的所有斜线，你可以将可选参数传递给函数

`$string = rtrim($string, '/');`

没有可选参数`'/'`，空白将被修剪

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:15:25.857

这意味着它是一个可选参数。

# android - 在 android 中推送通知和使用 asp.net 网络服务

> ID：15387752
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:13:05.493
> 
> 标签：android, asp.net, json, sql-server-2008, push-notification

我正在开发 android 应用程序。如何远程访问 asp.net 网络服务。我尝试了很多教程下载Ksop jar并使用它....但是无法通过在android中使用dot net web services将数据插入数据库..帮助我..提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:15:52.577

您可以参考这里：[如何从 Android 移动应用程序调用本地 Web 服务](https://stackoverflow.com/questions/7860887/how-to-call-a-local-web-service-from-an-android-mobile-application)

我认为它同样的问题可能会帮助你

您还应该看到本教程：http: [//www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)

# html - 使用 AJAX 添加 HTML 元素

> ID：15387758
> 
> 赞同：1
> 
> 时间：2013-03-13T14:13:24.247
> 
> 标签：html, ajax, tags

我正在`li`根据数据库返回的值生成使用 AJAX，并尝试将 jQuery 应用于动态生成的 jQuery `li`，但它不起作用。任何人都可以帮忙吗？

我的代码是

```
$('.chkbox1').change(function(){
       if($(this).is(':checked'))
       {
       var grpid=this.getAttribute('id')
       //alert(grpid);
       $.ajax({

   type:"POST",
   url:"<?php print $this->Url ?>index.php/presentation/multimedia/getusers?grpid="+grpid,
   data:"grpid="+grpid,
   success:function(response){
               var data=jQuery.parseJSON(response);
               var str="";
                //alert(data[0]['first_name']);
               for(var i=0;i<data.length;i++)
               {
                  str=str+"<div class='img_block'><ul><li id='"+i+"'><img src='<?php print BASE_URL?>libs/publish_cart/product_img/1.jpg' class='items' height='80' alt='' /><br clear='all' /> <input type='checkbox' id='"+i+"' class='chkbox'/><div class='item_name'>"+data[i]['first_name']+"</div></li></ul> </div>";
                  $(".user").html(str);

               }

}

   }); 
```

chkbox的代码`li`如下。我想要它，以便在单击复选框时将值添加到购物车中，但没有任何反应。如果我编写静态`li`代码，那么它可以工作。

```
var Arrays=new Array();

            $('.chkbox').change(function(){
            if($(this).is(':checked'))
            {

        var thisID    = $(this).attr('id');

        var itemname  = $(this).parent().find('.item_name').html();
        var itemprice = 12;

        if(include(Arrays,thisID))
        {
            var price    = $('#each-'+thisID).children(".shopp-price").find('em').html();
            var quantity = $('#each-'+thisID).children(".shopp-quantity").html();
            quantity = parseInt(quantity)+parseInt(1);

            var total = parseInt(itemprice)*parseInt(quantity);

            $('#each-'+thisID).children(".shopp-price").find('em').html(total);
            $('#each-'+thisID).children(".shopp-quantity").html(quantity);

            var prev_charges = $('.cart-total span').html();
            prev_charges = parseInt(prev_charges)-parseInt(price);

            prev_charges = parseInt(prev_charges)+parseInt(total);
            $('.cart-total span').html(prev_charges);

            $('#total-hidden-charges').val(prev_charges);
        }
        else
        {
            Arrays.push(thisID);

            var prev_charges = $('.cart-total span').html();
            prev_charges = parseInt(prev_charges)+parseInt(itemprice);

            $('.cart-total span').html(prev_charges);
            $('#total-hidden-charges').val(prev_charges);

            var Height = $('#cart_wrapper').height();
            $('#cart_wrapper').css({height:Height+parseInt(45)});

            $('#cart_wrapper .cart-info').append('<div class="shopp" id="each-'+thisID+'"><div class="label">'+itemname+'</div><div class="shopp-price"> $<em>'+'abc'+'</em></div><span class="shopp-quantity">1</span><img src="<?php print BASE_URL?>libs/publish_cart/remove.png" class="remove" /><br class="all" /></div>');

        }
                }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:19:25.783

您应该在动态附加 html 后绑定点击事件。按照以下方式进行：

```
$('.chkbox').on("change", chkboxChange);

function chkboxChange() {
    //place your code from "$('.chkbox').change(function(){" here;
} 
```

在成功回调中执行 ajax 请求后，请执行以下操作：

```
success:function(response){
//your logic
    $('.chkbox').off("change").on("change", chkboxChange); //bind event handlers
} 
```

# c++ - Windows 编程。使用空括号创建对象

> ID：15387767
> 
> 赞同：0
> 
> 时间：2013-03-13T14:13:44.267
> 
> 标签：c++, windows

在windows编程中这是什么意思？

```
MSG msg = { }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T02:33:47.667

MSG 是在 Windows SDK 标头中声明的结构，它存储 Windows 消息。

语句的`= { }`一部分是初始化表达式，它设置 MSG 结构的值。由于它在大括号之间不包含任何内容，因此结构的所有成员都将设置为 0。这是对变量进行零初始化的简单方法。

# forms - Spring Form 将两个输入组合在一个路径中

> ID：15387770
> 
> 赞同：0
> 
> 时间：2013-03-13T14:13:48.247
> 
> 标签：forms, spring-mvc, model

我有这个模型：

```
public class User{

private String name;
private String Organization;
private Strin OS;

..Setter and Getters
} 
```

而这种形式：

```
<form:form commandName="User" method="post">
<label for="name">Name:</label>
<form:input path="name" />
<form:errors path="name"></form:errors>

<br />
<label for="name">Organization:</label>
<form:input path="organization" />
<form:errors path="organization"></form:errors> 
```

我可以添加一个输入“姓氏”，然后将输入“名称”组合成一个路径=“名称”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:20:57.990

您必须使用常规的 HTML 输入标签，使名称成为隐藏字段。然后使用 JavaScript 从其他字段中组合名称并发布表单。Spring 没有任何手段在绑定上取两个字段并合二为一。至少我所知道的不是。

# java - 有没有办法从android应用程序拨打电话并完全控制它？

> ID：15387772
> 
> 赞同：3
> 
> 时间：2013-03-13T14:13:51.100
> 
> 标签：java, android, api, voip, skype

有什么方法可以拨打电话并从我的 android 应用程序中完全控制它们？我想拨打电话，如果对方不接听、拒接电话或电话转到语音信箱，我想结束通话并打电话给其他人。

我已经发现，即使使用隐藏的 API，也无法确定是否有人在 android 中接听了您的拨出电话。那么是否有解决方法，还是真的不可能？

如果不可能，我想使用 VoiP 应用程序（如 Skype）来完成，但我似乎找不到具有 API 的 VoiP 应用程序允许我进行、结束和获取呼叫状态。如果我只能给安装了 VoiP 应用程序的人打电话就足够了。

有什么我可以用的吗？

# php - PHP：从二维关联数组访问数据

> ID：15387777
> 
> 赞同：-4
> 
> 时间：2013-03-13T14:14:03.383
> 
> 标签：php, multidimensional-array, get

我有一个页面显示二维数组中的项目列表，如下所示：

```
<?php 
    for ($row = 0; $row < $arrlength; $row++)
    {
       echo "<li>";
       echo "<a href='#item-info' >";              
       echo $items[$row]["Item"];
       echo "</a>"; 
       echo "</li>";
    }
?> 
```

我希望能够让用户单击他们想要的项目的链接，这会将他们带到显示所有项目信息的页面。我的数组看起来像这样：

```
$items = array( array(Item =>"Jeans",
                      Colour =>"Blue",
                      In stock =>"Yes"), 
```

我一直在网上查看 php 教程，我相信我应该在我的 url 中使用 GET 方法，`#item-info`但我不太确定最好的方法是什么。

我想要这个的原因是因为我的数组包含近 1000 个项目，制作 1000 个项目信息页面将是一个漫长的过程，所以我只想制作一个页面，在一个单独的页面上显示所有特定项目信息。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:15:36.117

您需要引用您的密钥：

```
$rooms = array(
    array(
        "Item" =>"Jeans",
        "Colour" =>"Blue",
        "In stock" =>"Yes"
    )
); 
```

另外，我假设您在循环中访问的数组实际上是被调用`$items`的，这里的使用`$rooms`只是一个例子。

我很抱歉，回答你的实际问题：你似乎想要一个书签标签。您将使用以下内容构建它：

```
echo "<a href='" . $items[$row]["Item"] . "-" . $items[$row]["Colour"] . "'></a>"; 
```

然后，您可以在 URL 中使用书签哈希来匹配您要链接到的任何书签。例如，要转到上述示例数组中的项目，您的书签哈希将是：`#Jeans-Blue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:19:03.873

首先，您提供的当前数组返回：

> 解析错误：语法错误，意外的 'stock' (T_STRING)，在第 5 行的 C:\xampp\htdocs\index.php 中需要 ')'

这是因为您没有将密钥封装为字符串。

```
$rooms = array( array(Item =>"Jeans",
                      Colour =>"Blue",
                      In stock =>"Yes") 
```

应该：

```
$rooms = array( array("Item" =>"Jeans",
                      "Colour" =>"Blue",
                      "In stock" =>"Yes") 
```

另外，您没有正确关闭阵列，您错过了关闭`);`

所以你的结束数组应该是：

```
$rooms = array( array("Item" =>"Jeans",
                      "Colour" =>"Blue",
                      "In stock" =>"Yes")); 
```

以及如何访问如下：

执行`print_r($rooms);`退货：

```
Array ( [0] => Array ( [Item] => Jeans [Colour] => Blue [In stock] => Yes ) ) 
```

要访问单个数据，您需要搜索要搜索的内部数组的键：

所以

`echo $rooms[0]['Item'];`将打印：`Jeans`

访问我个人的整个数组（我知道其他开发人员会有他们的方法，所以尊重他们）

```
Foreach ($rooms AS $Primary_Array)
{
   // this searches through your primary array 
   foreach ($Primary_Array AS $Room_Keys => $Room_Value)
   {
      // This searches through your secondary level array so you can return: 
     echo '<b>'.$Room_Keys.'</b>:'.$Room_Value.'<br>'; 
     /*
      with your array provided, you will have the following output:

     **Item**: Jeans
     **Colour**: Blue
     **Instock**: Yes
     */
   }
} 
```

# r - 在R中的表中转换向量

> ID：15387778
> 
> 赞同：1
> 
> 时间：2013-03-13T14:14:03.357
> 
> 标签：r

我是新来的**R**。我们使用 Trip Advisor 的数据集来获取每个指定数组中的“Value”、“OverAll”、“Rooms”等值。结果如下

```
Value <- as.numeric(c("4","3","5","2.5"))

Overall <- as.numeric(c("4","4.5","2","3"))

Rooms <- as.numeric(c("3","4","2","2")) 
```

我想在 Table 中获取值。

```
Value    4    3     5     2.5

Overall    4    4.5    2    3

Rooms    3    4     2     2 
```

我试图将其转换为 2D 数组以及`table(Value,Overall,Rooms)`. 转换为数组会导致错误，并且`table()`没有将其更改为我需要的格式。请指导我哪里错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:17:30.170

采用`rbind`

```
rbind(Value = c("4","3","5","2.5"),
      Overall = c("4","4.5","2","3"),
      Rooms = c("3","4","2","2"))

        [,1] [,2]  [,3] [,4] 
Value   "4"  "3"   "5"  "2.5"
Overall "4"  "4.5" "2"  "3"  
Rooms   "3"  "4"   "2"  "2" 
```

由于您在此处操作分数（TripAdvisor 注释），因此最好在创建矩阵之前将它们转换为数字：

```
rbind(Value = as.numeric(c("4","3","5","2.5")),
      Overall = as.numeric(c("4","4.5","2","3")),
      Rooms =as.numeric( c("3","4","2","2")))

       [,1] [,2] [,3] [,4]
Value      4  3.0    5  2.5
Overall    4  4.5    2  3.0
Rooms      3  4.0    2  2.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:18:30.723

如果你想要数据框：

```
data.frame(Value=Value,Overall=Overall,Rooms=Rooms) 
```

或矩阵：

```
 rbind(Value=Value,Overall=Overall,Rooms=Rooms) 
```

请注意，由于您已通过

```
Value <- c("4","3","5","2.5")
Overall <- c("4","4.5","2","3")
Rooms <- c("3","4","2","2") 
```

代替

```
Value <- c(4,3,5,2.5)
Overall <- c(4,4.5,2,3)
Rooms <- c(3,4,2,2) 
```

你得到字符而不是数字。现在，如果您进行一些建模，值“4”、“3”等被视为因素（请参阅 参考资料`?factors`），因此您不能拥有诸如 3.5 之类的值，我认为您希望拥有它，因为您也拥有 2.5 等。

该函数`table`用于计数表和类似的东西：

```
table(c("a","b","a","d","abc","b","b"))
  a abc   b   d 
  2   1   3   1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-05T18:08:02.853

我建议您收集 JSON 数据集，然后您可以轻松解析它们，因为 R 非常适合从 JSON 中提取数据。您可以访问：[https ://www.rstudio.com/online-learning/](https://www.rstudio.com/online-learning/)

# zend-framework - 通过重载工厂来扩展/替换 ZfcUser 中的表单？

> ID：15387784
> 
> 赞同：0
> 
> 时间：2013-03-13T14:14:23.150
> 
> 标签：zend-framework, module, zend-autoloader, zfcuser

我正在与一个将使用 ZfcUser 的项目中的几个团队成员一起工作。我知道扩展表单的文档化方法是在我们的自定义模块的 init 方法中附加一个监听器到表单事件。

这很好，我们可以这样做。但是，我们试图让 Module 类的逻辑很少，因为如果我们告诉他们所有与表单相关的逻辑都将放在 Forms 目录中，一些初级开发人员往往会迷失方向，除了用户内容之外在 Module 类中。

所以我想知道我是否超载

`'service_manager' => array( 'factories' => array( 'zfcuser_register_form' => function()`

实例来加载我们自己的表单，如果这会因为有时 ZfcUser 模块在我们的应用程序模块之后被加载而吓坏了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T16:27:20.387

如果您将模块名称放在“ZfcUser”下方`/config/application.config.php`，则可以保证您的模块在 ZfcUser 之后加载。

# oracle - 将空白字符串转换为 NULL 日期

> ID：15387785
> 
> 赞同：1
> 
> 时间：2013-03-13T14:14:26.207
> 
> 标签：oracle, plsql

如何将`VARCHAR2`包含多个空格的 a转换`DATE`为`NULL`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:57:38.550

只需`TRIM`将字符串传递给`TO_DATE`

```
SQL> declare
  2    l_my_string varchar2(10) := '          ';
  3    l_my_date   date;
  4  begin
  5    l_my_date := to_date( trim( l_my_string ),
  6                          'mm/dd/yyyy' );
  7    if( l_my_date is null )
  8    then
  9      dbms_output.put_line( 'Yup, the date is NULL' );
 10    end if;
 11  end;
 12  /
Yup, the date is NULL

PL/SQL procedure successfully completed. 
```

# javascript - InsertAfter on Select 具有多个属性而不是将项目滚动到视图中

> ID：15387786
> 
> 赞同：3
> 
> 时间：2013-03-13T14:14:28.360
> 
> 标签：javascript, jquery, html

我有一个 select 元素，它上面有 multiple 属性。我使用 javascript 在列表中上下移动项目。

HTML：

```
<select id="sel" size="10" multiple>
    <option>1</option>
    <option>2</option>
     ...
    <option>14</option>
</select>
<span id="moveDown">Move Down</span> 
```

以及以下 javascript：

```
$("#moveDown").button().click(function () {
    var select = $("#sel");
    var selItem = $("#sel option:selected")
    var next = selItem.last().next();
    selItem.insertAfter(next);
}); 
```

我遇到的问题是，在 Chrome 和 IE 中，如果将所选项目滚动到视图之外，则选择列表不会滚动以保持项目在视图中。Firefox 始终将最顶部的选定项目保留在视图中。

如果我删除了多个属性，那么一切都会按预期工作，但我需要能够为此列表的其他功能选择多个项目。

我的问题是，如何滚动到所选项目？我尝试过使用位置、偏移量和高度，但它们在 chrome 中的选项上都是 0：

```
console.log(selItem.position().top);
console.log(selItem.offset().top);
console.log(selItem.height()); 
```

这是一个演示该问题的小提琴：http: [//jsfiddle.net/ywypB/4/](http://jsfiddle.net/ywypB/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:32:36.363

很奇怪！一种方法是使用[`.scrollTop()`](http://api.jquery.com/scrollTop/).

为什么不尝试这样的事情（我知道不理想但可能的解决方案）：

```
$("#moveDown").button().click(function () {
    var select = $("#sel");
    var selItem = $("#sel option:selected");
    var next = selItem.last().next();
    var index = selItem.insertAfter(next).index() + 1;
    if(index > $('#sel').attr('size')){
        $('#sel').scrollTop(17 * parseInt(index - $('#sel').attr('size'))); //17 is height of option
    }
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/ywypB/16/](http://jsfiddle.net/dirtyd77/ywypB/16/)

# ios - PageviewController 总是返回一个像 2147483648 这样的索引

> ID：15387788
> 
> 赞同：0
> 
> 时间：2013-03-13T14:14:36.127
> 
> 标签：ios, objective-c, storyboard, uipageviewcontroller

我正在尝试实现一个`UIPageViewController`. 我创建了 4 个单独的 viewController 并将其添加到我的故事板中。现在我想用`UIPageViewController`. 这就是我在代码中所做的。

我做了一个modelArray，把所有的VC都放进去：

```
 self.modelArray = [[NSMutableArray alloc] init];
   NSMutableArray *pageData = [[NSMutableArray alloc]init];
    ViewOneViewController *viewOne = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewOne"];
    ViewTwoViewController *viewTwo = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewTwo"];
    ViewThreeViewController *viewThree = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewThree"];
    ViewFourViewController *viewFour = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewFour"];

    [pageData addObject:viewOne];
    [pageData addObject:viewTwo];
    [pageData addObject:viewThree];
    [pageData addObject:viewFour];

    self.modelArray = pageData; 
```

接下来设置 VC 的基础知识`UIPageViewController`并设置 Initial VC ：

```
 ViewOneViewController *cVC = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewOne"];
    NSArray *viewControllers = [NSArray arrayWithObject:cVC];
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];

    // Add the pageViewController as the childViewController
    [self addChildViewController:self.pageViewController];

    // Add the view of pageViewController  to the currentView
    [self.view addSubview:self.pageViewController.view];

    // Call didMoveToParentViewController: of the childViewController, the UIPageViewController instance in our case.
    [self.pageViewController didMoveToParentViewController:self];

    // Assign the gestureRecognizers property of the pageViewController to the view's gestureRecognizers property
    self.view.gestureRecognizers = self.pageViewController.gestureRecognizers; 
```

最后这些是我的`delegate`方法（例如下一个 VC 的方法）

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
       viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:viewController];
    if(currentIndex == self.modelArray.count - 1)
        return nil;

    UIViewController *cVC = [self.modelArray objectAtIndex:currentIndex + 1];
    return cVC;
} 
```

但是当我构建并运行时，我得到以下错误。

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 2147483648 beyond bounds [0 .. 3]' 
```

任何人都可以帮助我吗？

亲切的问候.. **编辑**

```
 thread #1: tid = 0x2403, 0x37776350 libsystem_kernel.dylib`__pthread_kill + 8, stop reason = signal SIGABRT
    frame #0: 0x37776350 libsystem_kernel.dylib`__pthread_kill + 8
    frame #1: 0x33115122 libsystem_c.dylib`pthread_kill + 58
    frame #2: 0x33151972 libsystem_c.dylib`abort + 94
    frame #3: 0x36f2fd4e libc++abi.dylib`abort_message + 74
    frame #4: 0x36f2cff8 libc++abi.dylib`default_terminate() + 24
    frame #5: 0x3165ba76 libobjc.A.dylib`_objc_terminate() + 146
    frame #6: 0x36f2d07a libc++abi.dylib`safe_handler_caller(void (*)()) + 78
    frame #7: 0x36f2d114 libc++abi.dylib`std::terminate() + 20
    frame #8: 0x36f2e598 libc++abi.dylib`__cxa_rethrow + 88
    frame #9: 0x3165b9d0 libobjc.A.dylib`objc_exception_rethrow + 12
    frame #10: 0x38c82f20 CoreFoundation`CFRunLoopRunSpecific + 456
    frame #11: 0x38c82d48 CoreFoundation`CFRunLoopRunInMode + 104
    frame #12: 0x34bbc2ea GraphicsServices`GSEventRunModal + 74
    frame #13: 0x35c14300 UIKit`UIApplicationMain + 1120
    frame #14: 0x0005050c Franke2`main(argc=1, argv=0x2fdb1d20) + 116 at main.m:16
    frame #15: 0x340ccb20 libdyld.dylib`start + 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:28:36.047

2147483648 是 NSNotFound，`-[NSArray indexOfObject:]`如果找不到对象则返回。

所以在你的行中

```
 NSUInteger currentIndex = [self.modelArray indexOfObject:viewController]; 
```

`viewController`不在`modelArray`。这是因为您每次都在创建视图控制器的新实例。

附带说明一下，您正在`self.modelArray = [[NSMutableArray alloc] init];`对该数组执行然后什么也不做，并在您`self.modelArray = pageData;`. 当您只使用一个时，无需在那里创建两个空数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:32:50.327

调用该方法后，`indexOfObject:`您应该验证返回的索引不是`NSNotFound`巫婆是返回的值是对象不在数组中。

你的代码应该看起来更像这样；

```
NSUInteger currentIndex = [self.modelArray indexOfObject:viewController];
if(currentIndex == NSNotFound ||
   currentIndex == self.modelArray.count - 1)
    return nil; 
```

将来您应该能够通过使用[Xcode 异常断点](https://stackoverflow.com/a/6208392/696361)自己找到这些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:27:52.243

```
 ViewOneViewController *cVC = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewOne"];
 NSArray *viewControllers = [NSArray arrayWithObject:cVC];
 [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil]; 
```

在这里，您正在创建 ViewOneViewController 的新对象并添加到 pageViewController 的 viewControllers 数组中。这个 cVC 对象与您之前在 modelArray 中添加的对象无关。它们都是同一类的不同对象，即 ViewOneViewController。

因此，您必须将相同的对象从 modelArray 传递到 pageViewController 的 viewControllers 数组，这样您就不会得到垃圾值

```
NSUInteger currentIndex = [self.modelArray indexOfObject:viewController]; //will return garbage value in your case 
```

从 instanceViewControllerWithIdentifier 的讨论中[：](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html)

> 每次调用此方法时，都会创建指定视图控制器的新实例。

# paypal - 为什么当我点击“商户服务”时，Paypal 沙盒网站会变成普通的 Paypal 网站？

> ID：15387798
> 
> 赞同：6
> 
> 时间：2013-03-13T14:14:58.500
> 
> 标签：paypal

似乎他们最近更改了 Paypal 开发者网站。他们似乎在此过程中删除了我的旧沙盒帐户，因此我创建了两个新的沙盒帐户……一个用于卖方，一个用于买方。现在，当我作为我的测试帐户之一登录沙盒站点时，然后单击“商家服务”（创建一个按钮），它会重定向到[https://www.paypal.com/home](https://www.paypal.com/home)。它要求我登录，当我尝试使用我的沙盒帐户登录时它失败了，因为它是常规的贝宝网站。然后我想也许他们改变了它，这样你就可以从你的普通帐户中制作一个沙盒按钮，但事实并非如此。还有其他人有这个问题吗？今天还有人遇到paypal问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:22:57.470

由于他们改变了网站布局，他们也改变了登录。他们没有删除您的沙盒帐户。

您需要使用您的贝宝帐户登录，然后您可以从那里导入您的旧沙箱帐户。

关于按钮。可能不是您正在寻找的答案，但是：

沙盒用于 SDK 和 API 实现。由于按钮（我认为现在捐赠和购买）总是有效的，因此不需要为它设置沙箱。

> > 点一下，有用吗？惊人的！

如果您确实使用 SDK/API/Old-API，则可以使用沙盒帐户来支付费用，因为这更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-01T08:32:00.297

我也有同样的问题。，无法使用“商家服务”链接创建付款按钮。

后来我找到了创建和管理沙盒链接的直接链接

[https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_button-designer](https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_button-designer)

[https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_button-management](https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_button-management)

# java - 为什么我的 SpringLayout 与示例不同？

> ID：15387801
> 
> 赞同：0
> 
> 时间：2013-03-13T14:15:11.457
> 
> 标签：java, swing, layout, jframe, springlayout

我正在做[这个](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/layout/SpringDemo2Project/src/layout/SpringDemo2.java)例子。我的代码完全相同，但没有得到 ![这](../Images/e6a5957f2841c41a2568c959721aee65.png)

我正进入（状态

![这](../Images/6d2d2e0ea9789b088c2cabc97ec28b6f.png)

谁能解释为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:18:10.700

很可能您正在运行一个不同的项目。运行按钮旁边有一个下拉箭头，单击它并选择要运行的正确项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:17:37.090

您要么是在开玩笑，要么是在执行错误的示例。链接的代码肯定不会创建第二个屏幕截图；-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:33:25.653

您正在 Eclipse 中运行一个单独的项目。确保您正在构建和执行的项目是包含文本框的项目，而不是显示的树结构。

# sql - MySQL加入两个表计数并从第二个表求和

> ID：15387808
> 
> 赞同：12
> 
> 时间：2013-03-13T14:15:28.377
> 
> 标签：sql, join, count, sum

我有两张桌子：

具有某些字段和主键 ID 的经销商

并使用以下字段 id 查询 Dealer_id 费用

每个经销商都有几个项目要查询，我必须计算它们并计算成本。现在我只有这个语句的计数：

```
SELECT a.*, Count(b.id) as counttotal
FROM dealers a
LEFT JOIN inquiries b on a.id=b.dealer_id
GROUP BY a.id
ORDER BY name ASC 
```

但我不知道如何为每个经销商汇总表 b 的成本。有人可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-13T14:17:56.107

您可以使用两个子查询：

```
SELECT  a.*
      , (SELECT Count(b.id) FROM inquiries I1 WHERE I1.dealer_id = a.id) as counttotal
      , (SELECT SUM(b.cost) FROM inquiries I2 WHERE I2.dealer_id = a.id) as turnover
FROM dealers a
ORDER BY name ASC 
```

或者

```
SELECT  a.*
     , COALESCE(T.counttotal, 0) as counttotal   -- use coalesce or equiv. to turn NULLs to 0
     , COALESCE(T.turnover, 0) as turnover       -- use coalesce or equiv. to turn NULLs to 0
 FROM dealers a
 LEFT OUTER JOIN (SELECT a.id, Count(b.id) as counttotal, SUM(b.cost) as turnover
               FROM dealers a1 
               INNER JOIN inquiries b ON a1.id = b.dealer_id
              GROUP BY a.id) T
         ON a.id = T.id
ORDER BY a.name 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T14:24:26.440

```
SELECT a.*, Sum(b.id) as TotalCost
FROM dealers a
LEFT JOIN inquiries b on a.id=b.dealer_id
GROUP BY a.id
ORDER BY name ASC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:18:30.620

如果我理解您的问题，您需要做的就是添加`SUM()`：

```
SELECT a.*, 
  Count(b.id) as counttotal,
  sum(b.costs) TotalCost
FROM dealers a
LEFT JOIN inquiries b on a.id=b.dealer_id
GROUP BY a.id
ORDER BY name ASC 
```

我的建议是使用子查询来获取`count`和`sum`：

```
SELECT a.*, 
  b.countTotal,
  b.TotalCosts
FROM dealers a
LEFT JOIN
(
    select COUNT(ID) countTotal,
        SUM(costs) TotalCosts,
        dealer_id
    from inquiries
    group by dealer_id
) b 
    on a.id=b.dealer_id
ORDER BY name ASC 
```

我从您的原始查询中猜测您正在使用 MySQL。我建议使用子查询，因为 MySQL 使用 GROUP BY 的扩展，它允许选择列表中的项目不聚合并且不包含在`GROUP BY`子句中。然而，这可能会导致意外的结果，因为 MySQL 可以选择返回的值。（参见[MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T14:21:23.113

```
SELECT a.*, COUNT(b.id) AS counttotal, SUM(b.costs) AS total
FROM dealers AS a
LEFT JOIN inquiries AS b ON a.id=b.dealer_id
GROUP BY a.id
ORDER BY name ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T14:18:17.630

只需添加`, Sum(b.costs) as costsTotal`到您的选择列表中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T14:37:57.733

制作一个带有所需字段的子表并加入它，而不是完整的表将使事情变得更容易

> 从经销商中选择 a.*、b.count_total、b.costs_of_table
> 作为
> LEFT JOIN (
> 
> > SELECT aux.dealer_id, Count(aux.id) AS 'count_total', Sum(aux.costs) AS 'costs_of_table'
> > FROM 查询 AS aux
> > GROUP BY Dealer_id)
> 
> AS b ON a.id = b.dealer_id
> WHERE（你想要什么）按
> 名称排序 ASC

对不起，如果有的话，酒吧拼写

# git - Git Svn - 找到可能的分支点

> ID：15387812
> 
> 赞同：33
> 
> 时间：2013-03-13T14:15:43.447
> 
> 标签：git, git-svn

我正在尝试使用`git svn`将 SVN 存储库克隆到 Git 中。

我运行以下命令：

> C:\Projects>git svn clone -T trunk -b 分支 -t 标签 --no-metadata [https://svn.mycompany.com/Projects/MyProject](https://svn.mycompany.com/Projects/MyProject) MyProject

我收到以下错误：

> 找到可能的分支点： [https://svn.mycompany.com/Projects/MyProject/trunk](https://svn.mycompany.com/Projects/MyProject/trunk) => [https://svn.mycompany.com/Projects/MyProject/tags/11.1.9.33334](https://svn.mycompany.com/Projects/MyProject/tags/11.1.9.33334) , 33334
> 
> 在 /usr/lib/perl5/site_perl/Git/SVN.pm 第 106 行使用未初始化值替换 (s///)。
> 
> 在 /usr/lib/perl5/site_perl/Git/SVN.pm 第 106.refs/remotes/MyProject-10.2 行的连接 (.) 或字符串中使用未初始化的值：' [https://svn.mycompany.com/Projects](https://svn.mycompany.com/Projects) '在''中找不到

git的版本是：

1.8.1.msysgit.1

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-05-07T16:30:32.547

我的问题是，由于 SVN（文件和日志）如此庞大，它在某些时候一直崩溃，当我重新启动它时，它在我的 .git/config 文件中创建了多行分支和标签。

```
branches = branches/*:refs/remotes/svn/branches/*
tags = tags/*:refs/remotes/svn/tags/* 
```

我只是删除了这些重复的条目并使用我的命令重新启动

```
git svn fetch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-28T11:34:57.793

我有同样的错误并通过升级到解决它`git version 2.6.2.windows.1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-05T10:28:52.887

同样的错误。我正在将我的 SVN 存储库转换为 Git。

```
git version 2.8.2.windows.1
Windows 8.1 Pro 64bits, running Git For Windows 32bits. 
```

v1，trunk地址错误，误设置为和repository root一样：

```
C:\Windows\system32>git svn clone https://mycompany.svn.beanstalkapp.com/myproject 
        --no-metadata -A c:\temp\svn_to_git_users.txt 
        --trunk=https://mycompany.svn.beanstalkapp.com/myproject 
        --tags=https://mycompany.svn.beanstalkapp.com/myproject/tags 
        --branches=https://mycompany.svn.beanstalkapp.com/myproject/branches
        c:\code\Git_myproject

[...]
W: +empty_dir: branches/20080918_DBDEPLOY/vendor/src/csharp/MS WCSF Contrib/src/Services
W: +empty_dir: branches/20080918_DBDEPLOY/vendor/src/csharp/RealWorldControls/References
r530 = c276e3b039d8e38759c6fb17443349732552d7a2 (refs/remotes/origin/trunk)
Found possible branch point: https://mycompany.svn.beanstalkapp.com/myproject/trunk => https://mycompany.svn.beanstalkapp.com/myproject/branches/20080918_DBDEPLOY, 529
Use of uninitialized value $u in substitution (s///) at /mingw32/share/perl5/site_perl/Git/SVN.pm line 101.
Use of uninitialized value $u in concatenation (.) or string at /mingw32/share/perl5/site_perl/Git/SVN.pm line 101.
refs/remotes/origin/trunk: 'https://mycompany.svn.beanstalkapp.com/myproject' not found in ''

C:\Windows\system32> 
```

v2 有效：更正了路径（并使用相对而不是绝对来缩短行）

```
C:\Windows\system32>git svn clone https://mycompany.svn.beanstalkapp.com/myproject 
        --no-metadata -A c:\temp\svn_to_git_users.txt --trunk=trunk 
        --tags=tags --branches=branches c:\code\Git_myproject
[...]
r529 = 40442d32486f4ca6f713e659b3785a446bd19de6 (refs/remotes/origin/trunk)
Found possible branch point: https://mycompany.svn.beanstalkapp.com/myproject/trunk => https://mycompany.svn.beanstalkapp.com/myproject/branches/20080918_DBDEPLOY, 529
Found branch parent: (refs/remotes/origin/20080918_DBDEPLOY) 40442d32486f4ca6f713e659b3785a446bd19de6
Following parent with do_switch
Successfully followed parent
r530 = 9fefc1b3a892555e315d55c2024cdf3d3a05010f (refs/remotes/origin/20080918_DBDEPLOY)
        A       src/database/sds.dbd
[...] 
```

根据其他人的建议，我打开了配置文件（C:\code\Git_myproject.git\config），第一个版本（损坏）如下。与 v2 相比，fetch 可能是错误的（分支和标签也重复，有人说它也可能导致问题）。

```
[svn-remote "svn"]
noMetadata = 1
url = https://mycompany.svn.beanstalkapp.com/myproject
fetch = :refs/remotes/origin/trunk
branches = branches/*:refs/remotes/origin/*
tags = tags/*:refs/remotes/origin/tags/*
branches = branches/*:refs/remotes/origin/*
tags = tags/*:refs/remotes/origin/tags/* 
```

第二个版本（工作）是：

```
[svn-remote "svn"]
noMetadata = 1
url = https://mycompany.svn.beanstalkapp.com/myproject
fetch = trunk:refs/remotes/origin/trunk
branches = branches/*:refs/remotes/origin/*
tags = tags/*:refs/remotes/origin/tags/* 
```

查看 svn.pm，我可以看到我们在`find_parent_branch()`其中输出消息`"Found possible branch point"`。然后它调用 `other_gs($new_url, $url, $branch_from, $r, $self->{ref_id});` which 本身调用： `Git::SVN->find_by_url($new_url, $url, $branch_from);` which 调用： `resolve_local_globs($u, $fetch, $globspec);` 并且`resolve_local_globs`是在第 100/101 行引发错误的地方：

```
my $u = (::cmt_metadata("$refname"))[0];
$u =~ s!^\Q$url\E(/|$)!! or die 
```

我肯定在命令行中犯了一个错误，修复我的主干路径消除了错误。我从未删除配置文件中的重复行，它们在重新运行命令时自动调整。

# vim - Vim：制作函数 退出插入模式，除非在行尾

> ID：15387819
> 
> 赞同：3
> 
> 时间：2013-03-13T14:16:07.050
> 
> 标签：vim

当光标（*）在一行内时如何`<CR>`设置退出插入模式？像：

```
" pressing <CR> should exit insert mode (in either case)
Lorem *ipsum dolor
Lorem ipsum dol*or 
```

`<CR>`但是当光标位于 EOL 时还要插入换行符吗？

```
" pressing <CR> when cursor @ EOL
Lorem ipsum dolor*
Fusce leo quam

" results in
Lorem ipsum dolor
*
Fusce leo quam 
```

使这两者同时成为可能的功能是什么样的？

**基本原理：**在维护文档时，我发现我会做一些小动作（即转到单词、更改它、退出）。对我来说，这些笔画是我想要“输入”的动作（比如在聊天窗口中发送消息）。因此，`<CR>`退出插入可以让我在维护时保持这种心理模型。另一方面，`<CR>`在作曲时显然很有用。幸运的是，有足够的上下文使两者同时成为可能——我只是还没有 vimscript 技能。这会教我一些:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:31:13.383

您可以使用表达式映射实现依赖于某些条件的映射；见`:help :map-expression`。我们可以通过函数检查行尾的光标`col()`，如下所示：

```
:inoremap <expr> <CR> col('.') == col('$') ? '<CR>' : '<Esc>' 
```

# oracle - 无效的列表索引 1004 错误

> ID：15387821
> 
> 赞同：0
> 
> 时间：2013-03-13T14:16:12.043
> 
> 标签：oracle, coldfusion

我有一个页面，允许用户检查他们想要更新的字段并点击保存。我在页面上有以下代码，可以通过选中复选框来完成多个更新。

```
<cfif isDefined("form.update")> 
    <cfset list1=#form.vselection#>

    <cfif isDefined("form.vselection") and listlen(form.vSelection) gt 0>
        <cfset vempID = #UCase(Right(cgi.remote_user,6))#> 
        <cfloop index="i" from="1" to="#listlen(form.vselection)#">
        <cfset vSelectedval = Listgetat(form.vselection,i)>
        <cfset v_position_id = Listgetat(form.vpostn,vselectedval)>
        <cfset v_sched_grp = Listgetat(form.vschgrp,vSelectedval)>
        <cfset v_accr_prof = Listgetat(form.vaccprof,vSelectedval)>
        <cfset v_pay_rule = Listgetat(form.vpayrul,vSelectedval)>       
        <cfset v_rest_days = Listgetat(form.vrestdays,vSelectedval)>                

        <!--- This is the update query --->
        <cfquery name="updpostn" datasource="mbtran">
            UPDATE KRONOS_IF.POSITION_DETAIL
            SET schedule_group  = '#v_sched_grp#',
                accrual_profile = '#v_accr_prof#',
                pay_rule_name = '#v_pay_rule#',
                rest_days = '#v_rest_days#'
            WHERE position_id = '#v_position_id#'
        </cfquery>               
        </cfloop>
    </cfif>
</cfif> 
```

我收到 Invalid list index 1004 错误。我无法解决这个问题。请建议此代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:47:22.337

如果 form.vselection 是一堆复选框，那么空列表元素应该不是问题。但是，让我们看看这三行。

```
 <cfloop index="i" from="1" to="#listlen(form.vselection)#">
    <cfset vSelectedval = Listgetat(form.vselection,i)>
    <cfset v_position_id = Listgetat(form.vpostn,vselectedval)> 
```

我们还假设 form.vselection 的第一个元素是 1004。下一个命令是查找 form.vpostn 的第 1004 个元素。很可能表单字段是 1 个元素的列表，而不是 1004。

那就是问题所在。如果您需要帮助解决问题，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:21:37.170

我建议将您的列表转换为数组以查找值。比`listGetAt`我认为的更简洁的代码。

```
<cfset list1 = listtoarray(form.vselection,',',true)>//use true to include empty rows for blank list items

<cfif structKeyExists(form,'vselection') and NOT arrayIsEmpty(list1)>
    <cfset vempID = UCase(Right(cgi.remote_user,6))> 
    <cfloop index="i" from="1" to="#listlen(form.vselection)#">
        <cfset vSelectedval = list1[i]>
    </cfloop>
</cfif> 
```

# ruby-on-rails - Ruby on Rails：通过 Twitter Bootstrap 模式登录

> ID：15387826
> 
> 赞同：1
> 
> 时间：2013-03-13T14:16:33.243
> 
> 标签：ruby-on-rails, twitter-bootstrap, devise

我已经在网上搜索了一段时间，但似乎找不到解决方案。我安装了 Devise 身份验证 gem 的 Ruby on Rails。我正在使用 Twitter Bootstrap 进行一些不错的快速布局，我想知道如何通过 Bootstrap 模式登录。

现在，我制作了模态框，当我按下页面上的某个按钮时它会弹出。它向我展示了一个漂亮的登录表单（使用 Devise 组件创建），当我输入登录凭据时它会登录。一切都很好，直到我尝试使用无效的用户名/密码登录而出错。设计将我路由到登录页面 (/users/sign_in)，在该页面上显示我输入了无效的用户名/密码的错误。

由于这不是很流畅和很好，我想在 Bootstrap Modal 中显示错误，而不是重定向到某个登录页面。

我已经更改了表单的提交按钮，所以它不再提交，而是链接到这个 javascript：

```
<script type="text/javascript">
function check_credentials() {
    if(check_form() == true) {
        $("#new_user").submit();
    } else {
        document.getElementById("alert_box").style.display = "block";
    }
}

function check_form() {
    if(true) {
        return true;
    }
    return false;
}
</script> 
```

*check_credentials*：脚本的入口点
将调用 check_form 函数并登录（返回 true）或显示 alert_box 以显示错误（返回 false）。

*check_form*：
**必须**检查输入的凭据是否正确（使用 mysql 数据库检查注册用户），如果正确则返回 true，否则返回 false。

您可能已经注意到，这是行不通的，因为 check_form 函数没有实现。这是因为我卡在这里了，我需要使用 Devise 登录凭据检查器来检查输入的凭据是否正确。所以我开始寻找设计控制器（{Ruby install dir}\lib\ruby\gems\1.9.1\gems\devise-2.2.3\app\controllers\devise），因为我还是 Ruby 的新手，我真的无能为力。

有人可以帮助我调用正确的设计函数来检查凭据或创建一个为我执行此操作的新函数吗？

如果需要更多信息或者有些不清楚的地方，只要问我，我会尽我所能添加这些信息。

感谢您的时间和帮助！

干杯，帕特里克

# java - 以矩阵形式表示碳分子

> ID：15387836
> 
> 赞同：1
> 
> 时间：2013-03-13T14:17:20.217
> 
> 标签：java

[如何生成仅包含 1 和 0 的 14x10 矩阵的所有可能组合](https://stackoverflow.com/questions/5357171/how-to-generate-all-possible-combinations-of-a-14x10-matrix-containing-only-1s)

你好。在搜索我想要的内容时，我发现上面的 URL 很有用，但对我的特定问题并不完全有帮助。我正在寻找的是一种在 n 维方阵中找到数字 1 和 0 的所有可能排列的方法。我意识到这样的矩阵的数量会很大，计算时间也会很长。

因此，我希望对矩阵施加以下限制。1) 矩阵应缩小为上三角矩阵。2) 每列必须至少有一个“1” 3) 矩阵中 1 的数量必须等于或小于 n- 方阵的维数。4）特定列中的总 1 必须小于或等于 4。

我正在寻找这样一个代码的原因是，我可以以矩阵的形式表示一个碳分子，每列代表一个原子，每个元素代表碳原子之间的键 (1) 或无键 (0) （一列一对应行一）

例如

```
 X 1  0  0;
 X X  1  0;
 X X  X  1;
 X X  X  X 
```

其中 X 表明该矩阵现在只是一个上三角矩阵，以避免重复由 ';' 分隔的行 并且每个列条目由空格分隔。上面的示例显示了 0 和 1 的一种特定组合。我正在寻找的是一个可以提供所有可能组合的代码。

谢谢你。

# c# - 在 .NET 中创建一个简单的随机数

> ID：15387838
> 
> 赞同：-3
> 
> 时间：2013-03-13T14:17:22.650
> 
> 标签：c#, random

我需要一个简单的随机数来创建我正在创建的循环，而且我一生都无法弄清楚我在这里做错了什么。有人可以查看下面的代码并向我解释为什么它给我以下错误：

> 错误 1 ​​'System.Random.Next(int, int)' 的最佳重载方法匹配有一些无效参数
> 
> 错误 2 参数 1：无法从 'decimal' 转换为 'int'
> 错误 3 参数 2： 无法从 'decimal' 转换为 'int'

我正在尝试从 Numeric Up/Down 控件中提取范围的最小值和最大值。我会假设 LINQ 或 C# 会有一个简单的单行生成器，但我找不到它。

```
Random rnd1 = new Random();
var integer = rnd1.Next(numericUpDown_RandomMin.Value, 
                                                  numericUpDown_RandomMax.Value);
textbox.Text = integer.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:20:42.927

好吧，首先`numericUpDown_RandomMin.Value`and `..._RandomMax.Value`are not `int`，所以你可能需要转换：

```
var integer = rnd1.Next((int)numericUpDown_RandomMin.Value, (int)numericUpDown_RandomMax.Value); 
```

除此之外，您遇到了什么错误？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:20:45.167

NumericUpDown 是小数，需要转换为 int。

```
var integer = rnd1.Next((int)numericUpDown_RandomMin.Value, (int)numericUpDown_RandomMax.Value); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:20:55.723

`Random.Next`需要两个`Int32`值，但`NumericUpDown.Value`属性是 a `decimal`。因为从`decimal`to 的转换会`int`丢失一些值精度，所以您必须明确地进行：

```
rnd1.Next((int)numericUpDown_RandomMin.Value, (int)numericUpDown_RandomMax.Value); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T14:21:42.197

NumericUpDown.Value 返回一个小数，而 Next() 接受一个整数。您可能想先将其转换为整数：

```
var integer = rnd1.Next((int)numericUpDown_RandomMin.Value, (int)numericUpDown_RandomMax.Value); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T14:28:19.037

由于[`NumericUpDown.Value`](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.value.aspx)的返回类型是`Decimal`，您需要*显式地*将您的`numericUpDown_RandomMin.Value`和`numericUpDown_RandomMax.Value`值转换为，`Int32`因为[`Random.Next(Int32, Int32)`](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)需要两个参数作为`Int32`。像;

```
Random rnd1 = new Random();
var integer = rnd1.Next((int)numericUpDown_RandomMin.Value, (int)numericUpDown_RandomMax.Value);
textbox.Text = integer.ToString(); 
```

# javascript - 在不复制/克隆的情况下将 DOM 元素链接到另一个元素

> ID：15387839
> 
> 赞同：0
> 
> 时间：2013-03-13T14:17:25.787
> 
> 标签：javascript, dom, element

我有一个 HTML 文件，其中包含几个定期更新的计算密集型图表。HTML 文件通过使用 JavaScript 和类似选项卡的界面仅显示整个内容的一小部分。

我的代码类似于以下内容：

```
<a href="">Tab1</a> <a href="">Tab2</a> <a href="">Tab3</a>
<div>
    <div id="tab1">
        charts
    </div>
    <div id="tab2">
        charts
    </div>
    <div id="tab3">
        charts
    </div>
</div> 
```

现在我想（例如）在 tab3 中显示 tab1 的一些内容。我无法复制/克隆它们，因为它会使用太多资源。每次选项卡更改时，我都考虑在 tab1 和 tab2 之间移动 DOM 节点。但这不是很方便。还有其他解决方案吗？我可以以某种方式“链接”到另一个 DOM 元素的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:21:21.667

更新：

在关于 DOM4 突变事件处理程序的 SO 上查看这个答案。也许它更符合您的需要。

[是否有 JavaScript/jQuery DOM 更改监听器？](https://stackoverflow.com/questions/2844565/is-there-a-jquery-dom-change-listener/11546242#11546242)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:28:01.853

或者在需要时使用 appendTo() ( [http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/) ) 将您的表示从一个选项卡移动到另一个选项卡怎么样？

# c# - CodedUI [测试方法] 与 [CodedUITest]

> ID：15387844
> 
> 赞同：3
> 
> 时间：2013-03-13T14:17:39.887
> 
> 标签：c#, visual-studio-2010, class, automation, coded-ui-tests

从每个类的顶部开始的 [testmethod] 和 [CodedUITest] 标签有什么区别？我一直无法从 Microsoft 找到有关这些类声明的内容/行为的任何文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:20:19.047

CodedUITest 是图形测试的元属性，例如可以从 Microsoft Test Manager 记录的数据中生成

链接： http: [//msdn.microsoft.com/en-us/library/dd286681 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd286681(v=vs.100).aspx)

Testmethod ：是您的一种测试方法的元属性

链接：http: [//msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testmethodattribute.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testmethodattribute.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:40:29.510

[CodedUITest] 属性位于类之前，并指示该类提供编码的 UI 测试。还有其他属性来指示其他类型的测试类。例如，使用 Visual Studio 进行单元测试的 [TestClass]。

[TestMethod] 属性在类中的方法之前，并指示应执行该方法以执行测试。TestMethod 属性通常与 [DataSource(...)] 属性一起使用来指定数据驱动的测试。DataSource 属性采用描述数据位置和格式的参数，并指示应使用提供的数据多次运行测试。

请注意，属性名称区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-30T23:13:40.727

我观察到 [CodedUI] 和 [TestClass] 属性之间的一个小区别是，使用 [TestClass] 我们必须显式调用 driver.Close() 或 driver.Quit() 方法来关闭所有打开的浏览器，但使用 [CodedUI] 所有打开的浏览器会自动/隐式关闭。

# c# - 在运行函数之前估计执行时间

> ID：15387851
> 
> 赞同：0
> 
> 时间：2013-03-13T14:17:51.830
> 
> 标签：c#, cpu-usage, execution-time

我有一个在我不是很新的开发机器上运行大约 0.7 秒的功能。（它在我测试的另一台机器上运行了大约 3 秒）

我想在上述功能完成前大约半秒向用户显示一些预先消息。

我不想在函数完成之前显示消息太久，因为只是看着它并等待会很烦人。另一方面，我宁愿不等到函数完成，因为整个事情都是从用户操作开始的，我不想浪费时间 - 如果我可以在另一个函数正在执行它的工作时显示该消息会更好.

如果功能“太快”，我已经添加了一个短循环，`Thread.sleep()`让预消息挂起，但恐怕通常不会是这种情况......所以，我想看看我是否可以根据当前机器规格甚至当前 CPU 使用率粗略估计执行时间，并在运行函数之前执行此操作。此外，由于我们谈论的是秒和毫秒，如果获取此信息将花费超过几毫秒的时间，那么它是不值得的。在这种情况下，我可能只在应用程序加载时计算一次。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:26:29.127

估计时间是没有意义的，而且很可能不可能准确。（尽管可能在某些情况下可以完成）。

查看过去“还剩 10 秒……还剩 2 分钟……还剩 5 秒”的 Windows 文件复制情况，它会根据使用的任何指标不断更改其估计值。最好只显示一个旋转图像或消息，让用户知道正在发生的事情。

如果您正在处理项目列表，那么对您来说会容易得多，因为消息可能是：

> 处理 100 项中的第 4 项。

至少那时用户可以大致知道代码在做什么。如果您没有类似的信息来通知用户，那么我会减少您的损失并显示一个简单的“处理中......”消息或一些图标，无论您喜欢什么解决方案。

# c# - 自定义授权属性问题

> ID：15387852
> 
> 赞同：1
> 
> 时间：2013-03-13T14:17:52.260
> 
> 标签：c#, asp.net-mvc, authorization

**授权属性**

```
public class PSAuthorize : AuthorizeAttribute
{
    protected override bool AuthorizeCore(System.Web.HttpContextBase httpContext)
    {
        return false;
    }        
} 
```

**测试类**

```
[TestClass]
public class Test
{
    [TestMethod]        
    public void TestMethod()
    {
        Assert.IsNotNull(TestMore());
    }

    [PSAuthorize]
    public string TestMore()
    {
        return "Test Success";
    }
} 
```

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<connectionStrings>
    <add name="Defaultconnection" connectionString="Private"/>
</connectionStrings>
<system.web>
    <authentication mode="Forms">
        <forms loginUrl="~/Account/LogOn" timeout="2880"/>
    </authentication>

    <membership defaultProvider="CMSP">
        <providers>

            <add name="CMSP"
                 type="PS.Authentication.CustomMembershipProvider"
                 connectionStringName ="Defaultconnection"/>
        </providers>
    </membership>
</system.web>
</configuration> 
```

**问题**

我已经为此工作了几个小时......

到目前为止，我还没有设法`AuthorizeCore`触发，我不知道出了什么问题。

我试图创建一个新的 MVC (v3) 项目并在那里添加相同的代码并且它可以工作..但是在我们的项目中它突然没有......

我错过了什么..？

我正在尝试将这项工作与自定义成员资格提供程序结合使用，但我不知道如何...首先我需要此属性来在某人未获得授权时触发暂停。

CustomMembershipProvider 是对 Membership 的覆盖，在所有属性/方法中只有“throw new NotImplementedException()”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:20:27.663

您必须使用 Authorize 属性来装饰控制器和操作方法。

为什么？因为该属性需要在每个请求上收到的 http 上下文。测试方法无法提供此上下文，此外，该属性甚至不用于未提供 HttpContext 的情况。

尝试测试一个动作方法，看看是否能解决问题

```
[PSAuthorize]
public ActionResult Home()
{
    return View();
} 
```

如果这可行，请找到一种在您的测试项目中插入 http 上下文的方法。

# install4j - 是否可以更改“可配置表单”的大小？

> ID：15387863
> 
> 赞同：1
> 
> 时间：2013-03-13T14:18:19.320
> 
> 标签：install4j

我正在使用**“可配置表单”**组件（install4j v5.1.5），它有点太小，无法容纳我想要放在上面的所有信息。它是可滚动的，但我想让它更高一点，这样用户就不必滚动了。我试图取消选中表单属性中的“可滚动”，但它只是删除了滚动条并且不会**更改大小**。是否可以 ？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:42:07.460

您必须更改安装程序应用程序的窗口大小。选择“安装程序”节点并增加“窗口高度”属性的值。

# php - 防止 Wordpress 在不更改核心文件的情况下将魔术引号应用于 CI cookie

> ID：15387867
> 
> 赞同：0
> 
> 时间：2013-03-13T14:18:27.050
> 
> 标签：php, wordpress

**我们的问题：**我们在 Wordpress 目录中有一个 CodeIgniter 应用程序，并且正在使用 Wordpress 的功能来生成导航。但是，我们发现由于`wp_magic_quotes`位于 wp-includes/load.php 中的函数，Wordpress 使 Codeigniter Cookie 无用——特别是这一行：

```
$_COOKIE = add_magic_quotes( $_COOKIE ); 
```

我们当前的解决方案是直接使用来修改`wp_magic_quotes`函数`array_walk`以循环`$_COOKIE`变量并应用于`add_magic_quotes`除我们的 CI 会话之外的所有键，如下所示：

```
function ci_ignore_magic_quotes($value,$key)
{
    if($key != "ci_session")
    {
        stripslashes_deep($value);
    }
} 
```

**并将上述行更改`wp_magic_quotes`为：**

```
 array_walk($_COOKIE, 'ci_ignore_magic_quotes');
//$_COOKIE = add_magic_quotes( $_COOKIE ); 
```

但是，这显然是有问题的，因为这些更改将在下一次 WP 升级时被丢弃。

是否可以在不修改此核心文件的情况下解决我们的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:57:07.447

如果不编辑核心文件，您将无法编辑这些函数——`wp_magic_quotes`并且——。`wp_unregister_GLOBALS`

这是基本的 PHP。您不能重新定义函数。试图在该核心文件之外的任何地方定义或重新定义该函数将导致错误，因为无论您做什么，除了编辑核心文件之外，它将在代码中定义两次。

这些函数中也没有可能对您有所帮助的钩子。对不起。如果您解释了您想要完成的工作，而不是询问如何实施某些特定的解决方案，那么三种可能是您想要做的事情的方法。您可能对这个问题有[x/y 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。

# sql - 在多对多关系中选择

> ID：15387878
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:18:48.063
> 
> 标签：sql

如果我有一个可以被视为食谱数据库的数据库，我如何选择我可以用给定成分制作的食谱的所有 id，例如，如果我有成分 1 和 4，它将返回 3，因为这是唯一的我可以用它做的食谱。

将有大约 50 种成分和更多食谱。

我看到了几种可能性，比如使用 UNION/几个连接，......但我没有看到一个简单的简单解决方案来解决这个问题。

```
Recipes   Recipes/Ingredients    Ingredients
   1            1  1                  1
   2            1  2                  2
   3            2  1                  3
                2  3                  4
                2  4
                3  1
                3  4 
```

编辑/

我想解决它的方法：

```
select recipe_id from Recipes
where recipe_id in ( 
    select recipe_id from Recipes_Ingredients where ingredient_Id = 1
    UNION
    select recipe_id from Recipes_Ingredients where ingredient_Id = 4
) 
```

这将导致很长的查询，因为我的数据库实际上并不是关于成分，而是关于其中可以包含 50 种或更多这些东西的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:30:19.877

试试这个（我试图猜测你的列名）：

表食谱：Recipe_id

表Recipes_Ingredients：食谱| 原料

```
 SELECT Recipe_id FROM Recipes   
  EXCEPT (
    SELECT DISTINCT Recipes FROM Recipes_Ingredients
    WHERE Ingredients NOT IN (1,4)  
  ) 
```

我将解释这一点。如果您想知道“您拥有至少一种成分的食谱”（此处：1,4）：

```
SELECT DISTINCT Recipes FROM Recipes_Ingredients
WHERE Ingredients IN (1,4) 
```

所以相反的是“我不能做哪个食谱”，因为你至少错过了一种成分：

```
SELECT DISTINCT Recipes FROM Recipes_Ingredients
WHERE Ingredients NOT IN (1,4) 
```

然后我们采取所有食谱，除了你不能做的食谱：

```
SELECT recipe_id FROM Recipes   
  EXCEPT (
    SELECT DISTINCT Recipes FROM Recipes_Ingredients
    WHERE Ingredients NOT IN (1,4)  
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:39:11.907

尝试：

```
select recipe_id
from recipes_ingredients
group by recipe_id
having count(*)=sum(case when ingredient_id in (1,4) then 1 end) 
```

# java - 如果我在创建对象时已经打开连接，是否需要执行 HTTPUrlConnection.connect()？

> ID：15387879
> 
> 赞同：0
> 
> 时间：2013-03-13T14:18:48.287
> 
> 标签：java, http, url, connection

考虑以下代码。由于我正在执行 url.openConnection()，因此 connection.connect 是否多余。如果是，那么为什么我们有一个 .connect() 方法？我们关闭连接后是否重新连接？

```
URL url;
        url = new URL(
                "http://api.longurl.org/v2/expand?format=json&title=1&user-agent=TwitterProject&url="
                        + someURL);
        HttpURLConnection connection;
        connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        connection.setDoInput(true);
        connection.connect();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));
        String line = null;
        String full = "";
        while ((line = in.readLine()) != null) {
            full = full + line;
        }
        jsonresponse = JSONObject.fromObject(full); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:25:19.233

[公共抽象 void connect() 抛出 IOException](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLConnection.html#connect%28%29)

> 如果此类连接尚未建立，则打开指向此 URL 引用的资源的通信链接。如果在连接已经打开时调用 connect 方法（由值为 true 的 connected 字段指示），则忽略该调用。

在您的情况下，呼叫被忽略。

```
 connection = (HttpURLConnection) url.openConnection();// already established connection. 
```

# php - 更好的 php 错误消息

> ID：15387885
> 
> 赞同：-3
> 
> 时间：2013-03-13T14:19:06.143
> 
> 标签：php

有什么方法可以丰富php中的错误消息？我收到类似的错误

```
Fatal error: Allowed memory size of 268435456 bytes exhausted (tried to allocate 524288 bytes) in /site/lib/Zend/Db/Statement/Pdo.php on line 228 
```

这不是很好。至少调用堆栈会更有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:24:59.107

如果您想要更详细的信息，那么有一种方法可以在函数中拦截错误消息。在那里你可以扔一个`ErrorException`例如。那会给你更多的细节。

尝试类似以下的方法（`catchException`虽然是可选的）

```
function exception_error_handler($errno, $errstr, $errfile, $errline )
{
    if (error_reporting() === 0)
    {
        return;
    }

    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
}

set_error_handler("exception_error_handler");

function catchException($e)
{
    // Do some stuff
}

set_exception_handler('catchException'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:26:32.317

尝试安装[xdebug](http://xdebug.org/)，看看[各种设置...](http://xdebug.org/docs/basic)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T14:21:43.527

PHP 错误对我来说很清楚，但是如果您想要非常详细的信息，为什么不编写异常类并自定义消息，包括异常消息和您自己的详细信息。

# ruby-on-rails - 轨道继承模型的活动模型 JSON 序列化

> ID：15387886
> 
> 赞同：0
> 
> 时间：2013-03-13T14:19:06.267
> 
> 标签：ruby-on-rails, serialization

我有 3 个模型 Persona、Assertion 和类 P2c 是从类 Assertion 继承的

```
class Persona < ActiveRecord::Base
  # create_table "personas", :force => true do |t|
  #  t.text     "name",        :null => false
  #  t.text     "description"
  #  t.datetime "last_change", :null => false
  # end
    has_many :p2cs
end

class Assertion < ActiveRecord::Base
# create table "assertions", :primary_key => "id", :force => true do |t|
#    t.text "rationale",
# end
end

class P2c < Assertion
#create_table "p2cs", :primary_key => "assertion_ptr_id", :force => true do |t|
#  t.integer "persona_id",         :null => false
# end
    belongs_to :persona, :class_name => "Persona", :foreign_key => "persona_id"
end 
```

我需要帮助来使用 gem active_model_serializers 编写序列化类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T19:23:10.790

我不明白你的问题。但我猜你的性病有问题。RailsCast 409 中没有解释 STI 和多态性，但他们在文档中讨论了它。

关键是您必须指定序列化程序。可以说我有一个

```
class Parent < ActiveRecord::Base 
class Child < Parent 
```

我将有以下显示/索引操作：

```
def index
  render json: children, each_serializer: ParentSerializer
end

def show
  render json: child, serializer: ParentSerializer
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:13:14.857

你的问题不清楚，但我假设你想在你的角色中包含 p2cs。`as_json`是在 rails 中实现默认 JSON 序列化的首选方式

```
class Personna < ActiveRecord::Base
  def as_json( options={} )
    super( {include: [:p2cs]}.merge options )
  end
end 
```

如果您的问题是为`P2c`and实现不同的行为`Assertion`，只需`as_json`在每个类中根据需要实现。

**请注意**`as_json`，您可能会发现有关 json 序列化的博客文章很有趣，因为它阐明了和之间的区别：http `to_json`: [//jonathanjulian.com/2010/04/rails-to_json-or-as_json/](http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/)

这个想法是我们需要将 json 序列化分为两个步骤：构建属性的 ruby​​ 哈希 (as_json)，然后将其序列化 (to_json)。这种方式继承和重载更容易，因为我们可以只处理一个 ruby​​ 哈希。

# doctype - 如何从 Oracle ADF 生成有效的 xhtml/xml 输出

> ID：15387891
> 
> 赞同：3
> 
> 时间：2013-03-13T14:19:14.987
> 
> 标签：doctype, oracle-adf, xhtml

我试图找到一种方法让我们的 Oracle ADF 页面输出有效代码。我在[Can we configure Oracle ADF Faces to generate valid XHTML?](https://stackoverflow.com/questions/208295/can-we-configure-oracle-adf-faces-to-produce-valid-xhtml) 但它可以追溯到 2008 年左右。
还是没有办法配置 ADF 输出一致的代码？

在没有配置的情况下，我们得到一个 html 4.01 文档类型，但在起始 html 元素中有一个类属性。对于初学者...如果我们将内容类型更改为 application/xhtml+xml，正如其他人建议的那样，我们会得到更正确的 xhtml 1.0 doctype。

但是，生成的代码仍然是 html 4.0 :( 即`<link href="cmp.css" type="text/css" charset="UTF-8" rel="stylesheet">`，没有结束标记。

那么，有没有人真正解决了这个问题，或者只有解决方法可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-26T10:04:27.767

现在您可能有更好的机会使用 Alta UI，这意味着您将获得比以前更少的验证错误，但直截了当的回答是：不，您将无法从 ADF 输出有效的 XHTML。

ADF 一开始并不是针对 Light Effective HTML 输出，而是针对 Web 浏览器上的桌面式体验。使用 Alta UI，情况会稍微好一些。

# cluster-computing - Neo4j 和集群分析

> ID：15387899
> 
> 赞同：2
> 
> 时间：2013-03-13T14:19:33.133
> 
> 标签：cluster-computing, neo4j, cluster-analysis, graph-databases

我正在开发一个 Web 应用程序，该应用程序在很大程度上取决于它根据具有相似偏好的用户对项目提出建议的能力。我的一个朋友告诉我，我正在寻找的 - 数学上 - 是一些聚类分析算法。另一方面，在 SO 上，有人告诉我 Neo4j（或其他一些 Graph DB）是我应该为这项任务接近的那种 DB（首选项）。

我开始研究这两种工具，我有一些疑问。出于集群分析的目的，在我看来，标准 SQL DB 仍然是完美的选择，而 Neo4j 将更适合神经网络类型的方法（尽管仍然非常适合该任务）。

我错过了什么吗？我是否尝试使用错误的工具组合？

我很想听听关于这个主题的一些想法。

感谢分享

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T09:04:01.520

这取决于您的数据。neo4j 能够为一个特定节点实时提供更复杂的推荐 - 假设您想向用户推荐一些产品，这可以在图形数据库中实时处理

而使用一些集群系统是一次为所有用户推荐的最佳方式（并且可能将其保存在某个地方，这样您就不需要再次计算它）。

**计算差异：**

*   neo4j 没有初始化成本，可以在可接受的时间内给你一个建议
*   聚类需要更多时间进行初始化（例如，不是以秒为单位，但很可能以分钟/小时为单位），并且更好地计算整个数据集的建议。事实上，严格地为特定用户花费时间进行一次计算，这种聚类可以比 Neo4j 更快，但最大的限制是初始初始化 - 因此不适合实时应用程序

**实际区别**：

*   如果您拥有**大部分静态数据**并且可以一次做一次建议而不是使用 SQL 进行集群

*   如果您获得动态数据，其中每次交互都会更新数据，并且您必须**始终提供最新建议**，那么请使用 neo4j

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:38:24.860

我目前正在研究与 Neo4j 的推荐和聚类相关的各种主题。我不确定您要查找的内容，但根据您在图表上实现数据的方式，您可以轻松地计算出基于对各种类型节点的链接计数的聚类算法。

如果您正确规划了节点和关系，则可以识别与一组类别共享最常见链接的节点组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T12:23:27.497

让我介绍一下 Reco4J ( [http://www.reco4j.org](http://www.reco4j.org) )，它是一个开源框架，提供基于图数据库源的推荐。它使用 neo4j 作为图形数据库管理系统。如果您对支持感兴趣，请查看并联系我们。这是一个非常早期的版本，但我们正在努力提供扩展文档和新的有趣功能。

干杯，亚历山德罗

# html - 使用 Excel VBA 将图像从 Excel 工作表添加到 Outlook HTML 正文

> ID：15387901
> 
> 赞同：1
> 
> 时间：2013-03-13T14:19:35.473
> 
> 标签：html, excel, vba, outlook

我正在尝试将 Excel 工作表中的图像添加到 Outlook 电子邮件。

我尝试使用存储在网络位置和 Internet 上的图像的链接。但是，并非所有用户都可以访问这些位置。

是否可以将图像存储在另一个工作表中，然后将其复制到电子邮件正文中？

我知道以下内容不起作用，因为您无法导出形状，但我可以做这样的事情吗？

```
ActiveUser = Environ$("UserName")
TempFilePath = "C:\Users\" & ActiveUser & "\Desktop\"

Sheets("Images").Shapes("PanelComparison").Export TempFilePath & "\PanelComparison.png"
panelimage = "<img src = ""TempFilePath\PanelComparison.png"" width=1000 height=720 border=0>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-29T18:51:05.557

CreateEmail Sub 调用 SaveToImage Sub。SaveToImage 子抓取一个范围，在新页面上创建一个图表，然后将图片（objChart）保存到指定目录。

LMpic 字符串变量调用刚刚保存的图像并将其输入到 HTML 正文中。

```
Public Sub CreateEmail()

Dim OutApp As Object
Dim OutMail As Object
Dim cell As Range
Dim FN, LN, EmBody, EmBody1, EmBody2, EmBody3 As String
Dim wb As Workbook
Dim ws As Worksheet

Application.ScreenUpdating = False
Set OutApp = CreateObject("Outlook.Application")

Set wb = ActiveWorkbook
Set ws = Worksheets("Sheet1")

Call SaveToImage

ws.Activate

LMpic = wb.Path & "\ClarityEmailPic.jpg'"

On Error GoTo cleanup
For Each cell In Columns("D").Cells.SpecialCells(xlCellTypeConstants)
    If cell.Value Like "?*@?*.?*" Then

        FN = Cells(cell.Row, "B").Value
        LN = Cells(cell.Row, "A").Value
        EmBody = Range("Email_Body").Value
        EmBody1 = Range("Email_Body1").Value
        EmBody2 = Range("Email_Body2").Value
        'EmBody3 = Range("Email_Body3").Value

        Set OutMail = OutApp.CreateItem(0)
        On Error Resume Next
        With OutMail
            .To = cell.Value
            .Subject = "Volt Clarity Reminder "
            .Importance = olImportanceHigh
            .HTMLBody = "<html><br><br><br>" & _
                            "<table border width=300 align=center>" & _
                                "<tr bgcolor=#FFFFFF>" & _
                                    "<td align=right>" & _
                                        "<img src='" & objRange & "'>" & _
                                    "</td>" & _
                                "</tr>" & _
                                "<tr border=0.5 height=7 bgcolor=#102561><td colspan=2></td></tr>" & _
                                "<tr>" & _
                                    "<td colspan=2 bgcolor=#E6E6E6>" & _
                                    "<body style=font-family:Arial style=backgroung-color:#FFFFFF align=center>" & _
                                            "<p> Dear " & FN & " " & LN & "," & "</p>" & _
                                            "<p>" & EmBody & "</p>" & _
                                            "<p>" & EmBody2 & "<i><font color=red>" & EmBody1 & "</i></font>" & "</p>" & _
                                    "</body></td></tr></table></html>"
            .Display  'Or use Display
        End With

        On Error GoTo 0
        Set OutMail = Nothing

    End If
Next cell

cleanup:
    Set OutApp = Nothing
    Application.ScreenUpdating = True
End Sub

Public Sub SaveToImage()
'
' SaveToImage Macro
'

    Dim DataObj As Shape
    Dim objChart As Chart
    Dim folderpath As String
    Dim picname As String
    Dim ws As Worksheet

    Application.ScreenUpdating = False

    Set ws = Worksheets("Sheet2")

    folderpath = Application.ActiveWorkbook.Path & Application.PathSeparator 'locating & assigning current folder path
    picname = "ClarityEmailPic.jpg" 'image file name

    Application.ScreenUpdating = False

    Call ws.Range("Picture").CopyPicture(xlScreen, xlPicture) 'copying the range as an image

    Worksheets.Add(after:=Worksheets(1)).Name = "Sheet4" 'creating a new sheet to insert the chart
    ActiveSheet.Shapes.AddChart.Select
    Set objChart = ActiveChart
    ActiveSheet.Shapes.Item(1).Width = ws.Range("Picture").Width 'making chart size match image range size
    ActiveSheet.Shapes.Item(1).Height = ws.Range("Picture").Height

    objChart.Paste 'pasting the range to the chart
    objChart.Export (folderpath & picname) 'creating an image file with the activechart

    Application.DisplayAlerts = False
    ActiveWindow.SelectedSheets.Delete 'deleting sheet4
    Application.DisplayAlerts = True

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:25:17.690

通常，电子邮件图像存储**在 Web 服务器**上，SRC 指向该服务器 ( `http://...`)。它们没有嵌入到电子邮件本身中。

# sql - KXEN 中的回归系数

> ID：15387903
> 
> 赞同：0
> 
> 时间：2013-03-13T14:19:35.923
> 
> 标签：sql, statistics, sas, regression

我们正在考虑开始使用 kxen 在客户数据上构建逻辑回归模型。到目前为止，我们一直使用 SAS 和 R studio，我很难清楚地理解 Kxen 中使用的 K2R 包的逻辑。

`Kxen - (beta, intercept)`1）如果我想在 sql 中构建评分函数，如何获得回归系数？

得到以下 sql 代码（附上部分代码）：

```
SELECT $key, $target_variable, CAST( (CASE 
    WHEN $target_variable <= -1.32354053933e0 THEN 0.0e0
    WHEN $target_variable <= -3.245405264555e-1 THEN 0.0e0
    WHEN $target_variable <= -3.235405393301e-1 THEN  ( 2.283134417281e-3*$target_variable+7.409696685844e-4 ) 
    WHEN $target_variable <= -2.673812457267e-1 THEN  ( 4.065409082516e-5*$target_variable+1.543635190092e-5 ) 
    WHEN $target_variable <= -"2.673250302176e-1 THEN  ( 4.057282329758e1*"$target_variable"+1.084841700789e1 ) 
    ..... [more code here]
    ELSE 0.0e0
    END) AS FLOAT )
AS PROBA0 
into [table_name]
FROM 
(
    SELECT $key, ( 2.191922889118e-2 + CAST( (CASE 
        WHEN ( "predictor1" IS NULL OR "predictor1" = ''  ) THEN -6.39011247354e-3
        WHEN "predictor1" <= -2.432307283e0 THEN -1.541583426389e-1
        WHEN "predictor1" <= 9.41313103e-1 THEN  ( 9.932069236689e-2*"predictor1"+8.742010175092e-2 ) 
        WHEN "predictor1" <= 1.696595422e0 THEN  ( 4.169961790129e-2*"predictor1""+2.454336172985e-1 ) 
        WHEN "predictor1" >= 1.696595402e0 THEN 3.16180997712e-1
        ELSE -6.39011247354e-3
    END) AS FLOAT)+
CAST( (CASE 
    WHEN ( "predictor2" IS NULL OR "predictor2" = ''  ) THEN 3.937894402762e-3
    WHEN "predictor2" <= -9.99550198e-1 THEN -2.797353866946e-2
    WHEN "predictor2" <= -1.27770581e-1 THEN  ( 2.918798485695e-2*"predictor2""+1.201317665409e-3 ) 
    WHEN "predictor2" <= 3.78487285e-1 THEN  ( 2.547969219572e-2*"predictor2"+6.997428207111e-3 ) 
    ...... [more code here]

) AS $target_varialbe FROM [table_name]
) TMPTABLE0 
```

预测变量都是经过WOE变换后输入的，定义为连续变量。

2）当按分配的分数订购客户时，订单与按概率订购时不同 - 从分数到概率的ergo转换不是单调的函数吗？我的目标是为客户分配标准化分数/概率。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:40:18.940

因为我最终能够找到答案，所以它来了：用于稳健回归的 KXEN K2R 引擎与 SAS 或 R 并不完全可比，因为它们使用不同的逻辑。KXEN 回归引擎是基于使用 Vapniks 定理的结构风险最小化构建的，在分数计算中转换预测变量（分数未归一化），然后使用不同分数箱上的一组逻辑方程来获得目标变量的概率，从 0 到 1 归一化。一个因此无法从 KXEN 中提取回归系数。对概率的评分也不是严格的单调函数

# maven - 发布时Maven构建插件的执行顺序：prepare

> ID：15387906
> 
> 赞同：2
> 
> 时间：2013-03-13T14:19:37.300
> 
> 标签：maven, plugins, release, execution

今天我在准备发布（使用 Maven 发布插件）时观察到 Maven 3 中的一个奇怪行为。由于描述往往相当长，我想在描述之前问一个问题：

**如何实现使用发布插件**

*   以便构建分支以正确的顺序执行插件
*   无需多次执行相同的插件#
*   并为 Mojo 获取有效的 plugin.xml

要发布的工件是一个 Maven 插件本身（Mojo with Annotations）。调用 release:prepare 目标时，它首先以交互模式启动进程，请求发布的新版本数据。之后，它会派生一个新流程，对应该发布的项目进行“干净验证”。

如控制台输出所述，调用的执行顺序为

1.  干净的
2.  插件：描述符（Maven-插件-插件）
3.  资源
4.  编译
5.  测试资源
6.  测试编译
7.  测试

似乎 plugin:descriptor 无法找到任何 Mojo，因为尚未进行编译：

```
[INFO] [INFO] --- maven-plugin-plugin:3.2:descriptor (default-descriptor) @ concordion-maven-plugin ---
[INFO] [WARNING] Using platform encoding (Cp1252 actually) to read mojo metadata, i.e. build is platform dependent!
[INFO] [INFO] Applying mojo extractor for language: java-annotations
[INFO] [INFO] Mojo extractor for language: java-annotations found 0 mojo descriptors. 
```

当以正确的方式配置时，插件会因为找不到 mojo 而失败。

如果我将发布插件配置为使用显式调用编译目标

```
<preparationGoals>clean compile verify</preparationGoals> 
```

插件执行顺序更改为：

1.  干净的
2.  插件：描述符（Maven-插件-插件）
3.  资源
4.  编译
5.  plugin:descriptor （这次是找到 Mojo 注释）
6.  资源
7.  编译
8.  测试资源
9.  测试编译
10.  测试

找到 Mojo 后，将使用所有必要的数据创建 plugin.xml。

这是我的 pom 的整个构建部分。

```
<build>
    <plugins>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <showDeprecation>true</showDeprecation>
                <showWarnings>true</showWarnings>
                <fork>false</fork>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-plugin-plugin</artifactId>
            <version>3.2</version>
            <executions>
                <execution>
                    <goals>
                        <goal>
                            descriptor
                        </goal>
                    </goals>
                    <phase>prepare-package</phase>
                </execution>
            </executions>
            <configuration>
                <skipErrorNoDescriptorsFound>true</skipErrorNoDescriptorsFound>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-release-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <dryRun>true</dryRun>
                <preparationGoals>clean compile verify</preparationGoals>
                <goals>deploy</goals>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

# jquery - jQuery.load setTimeout 不起作用

> ID：15387910
> 
> 赞同：0
> 
> 时间：2013-03-13T14:19:51.683
> 
> 标签：jquery, load, settimeout

我正在将 PhP 文件中的内容加载到 div 中。它加载一次很好，但我希望它每 5 秒重新加载一次以显示对数据库的更新。从查看此站点和其他站点来看，这应该可以正常工作，但事实并非如此。

```
 <div id="Total">

     $(document).ready(function(){
      setTimeout(function(){
        $('#Total').load('points.php');
      },5000); });

  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:21:07.907

您需要`setInterval()`用于执行。`setTimeout()`只会执行一次。您还需要确保您的脚本包含在一个`<script>`块中

```
<script type="text/javascript">
    $(document).ready(function(){
        setInterval(function(){
            $('#Total').load('points.php');
        },5000);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:21:46.720

使用[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)并将脚本放在 Total 之外

```
 $(document).ready(function(){
      setInterval(function(){
        $('#Total').load('points.php');
      },5000); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:25:51.600

setTimeout 只触发一次。您应该使用[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp) insted。

# sql - 连接具有不同行数据的表

> ID：15387915
> 
> 赞同：-2
> 
> 时间：2013-03-13T14:20:18.610
> 
> 标签：sql, sql-server, join

我有两张这样的桌子

t1

```
id   value1
BMC  16
EC   22
LLU  60
MC   274
UHC  54
UHS  28 
```

t2

```
id   value2
BMC  5
e900 4
EC   7
LLU  2
MC   1 
```

如何使用 sql server 将其输出？我也使用了完全外连接。但它没有给我正确的结果

```
BMC  16   5
EC   22   7
LLU  60   2
MC   274  1
UHC  54   
UHS  28
e900      4 
```

这是我的外部连接，它用于两个选择语句。不适用于桌子。但是那些选择语句给出了上述结果 (t1, t2)

```
SELECT * FROM 
(

SELECT b.EntityCode, COUNT('a') AS GroupCountUser1 FROM @TempUser a INNER JOIN OP_TB_TRN_Entity b
ON a.Entity=b.EntityID
GROUP BY b.EntityCode
) t1 

FULL OUTER JOIN 

(SELECT b.EntityCode, COUNT('a') AS GroupCountUser2 FROM @TempUser1 a INNER JOIN OP_TB_TRN_Entity b
ON a.Entity=b.EntityID
GROUP BY b.EntityCode) t2

ON t1.EntityCode = t2.EntityCode 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:22:53.703

猜你忘记合并 ID，试试

```
Select coalesce( A.Id, B.Id) id, 
    A.Value1, B.Value2
From A Full Join B On A.Id = B.Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:31:54.230

选择 concat(t1.value1, t2.value2) 作为总值

从 t1 加入 t2，其中 t1.Id = t2.Id

如果我明白你在问什么，这应该会有所帮助。

# java - Class Not found servlet 连接 mysql 的异常

> ID：15387918
> 
> 赞同：0
> 
> 时间：2013-03-13T14:20:20.123
> 
> 标签：java, mysql, servlets, classnotfoundexception

我试图在我的 servlet 中连接 mysql 数据库。然后我得到一个例外。
但是当我从一个普通的 Java 类测试数据库连接时，连接是好的，我从数据库中获取数据。
我在 tomcat 服务器控制台上遇到的异常是： `java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`.
我的代码`DatabaseHandler.java`是：

```
import java.sql.*;
public class DatabaseHandler {
private Statement stmt;
private Connection con;
String username = "root";
String password = "thunder";
String dbname = "bidderboy";
public DatabaseHandler()
{
    this.createConnection();
}

private void createConnection()
{
    //create the connection for first time
    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        con = DriverManager.getConnection("jdbc:mysql://localhost/"+dbname , username , password);
        stmt = con.createStatement();

    } catch (Exception ex) {
        System.out.println(ex.toString());
    }
}
public int executeUpdate(String sql)
{
    int result = 0;

    //before update checks if connection is open
    try {
        if(con.isClosed()) {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            con = DriverManager.getConnection("jdbc:mysql://localhost/"+dbname , username , password);
            stmt = con.createStatement();
        }
    } catch (Exception ex) {
        System.out.println(ex.toString());
    }

    //try to executeUpdate the sql command
    try{
        result = stmt.executeUpdate(sql);
    }
    catch(Exception ex){
        System.out.println("Couldn't executeUpdate sql command");
    }
    return result;
}

public ResultSet executeQuery(String sql)
{
    ResultSet rs = null;
    //before Query checks if connection is open
    try {
        if(con.isClosed()) {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/"+dbname , username , password);
            stmt = con.createStatement();
        }
    } catch (Exception ex) {
        System.out.println(ex.toString());
    }

    //try to executeQuery the sql command
    try{
        rs = stmt.executeQuery(sql);
    }
    catch(Exception ex){
        System.out.println("Couldn't executeQuery sql command");
    }
    return rs;
}

public void closeConnection()
{
    //if connection is open try to close the connection
    try {
        if(!con.isClosed()) {
            con.close();
        }
    } catch (SQLException ex) {
        System.out.println("Failed to close database connection");
    }
}
} 
```

我的 servlet 的代码是：

```
import java.io.IOException;
import java.sql.ResultSet;
import java.sql.SQLException;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
public class UserLogin extends HttpServlet{

public UserLogin()
{

}

@Override
public void init(ServletConfig config) throws ServletException {
    super.init(config);
}

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    this.doPost(req, resp);
}
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    DatabaseHandler dbh = new DatabaseHandler();
    String username="mamun";
    String password="1234";

    String dbusername="";
    String dbpassword="";

    String sql = "select * from users where username='"+username+"' and password='"+password+"'";
    ResultSet rs = dbh.executeQuery(sql);
    try {
        while(rs.next())
        {
            dbusername = rs.getNString(1);
            dbpassword = rs.getNString(2);
        }
    } catch (SQLException e) {}
    System.out.println(dbusername+" "+dbpassword);
}
} 
```

我从中获取数据的普通java类的代码是：

```
import java.sql.ResultSet;
import java.sql.SQLException;

public class DatabaseConnectionTest {

public static void main(String[] args) {
    String sql = "Select * from users";
    DatabaseHandler dbh = new DatabaseHandler();

    ResultSet rs = dbh.executeQuery(sql);

    try {
        while(rs.next())
        {
            String n = rs.getNString(1);
            String c = rs.getNString(2);
            System.out.println("Name: "+n+" Contact: "+c);
        }
    } catch (SQLException ex) {
        System.out.println(ex.toString());
    }
}
} 
```

任何人都请解释为什么我得到这个类没有找到异常以及解决方案是什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:02:23.347

将`mysql-connector-java-5.1.11-bin.jar`文件添加到`WEB-INF/lib`文件夹解决了我的问题。

# c# - 一次从字典中删除多个项目

> ID：15387923
> 
> 赞同：1
> 
> 时间：2013-03-13T14:20:43.867
> 
> 标签：c#, linq

我有一本像这样的字典：

```
Dictionary<KeyValuePair<int, string>, OperationType> clickedList; 
```

其中 OperationType 是一个枚举 { 下载、安装、删除、启用 }

我有另一个 KeyValuePair 列表，如下所示：

```
toRemove = machine.Array
                  .Select(x => 
                      new KeyValuePair<int, string>((int)x.MachineID, x.PackageID))
                  .ToList(); 
```

我需要执行以下操作：

1.  从**clickedList**中删除所有存在于**toRemove**和**OperationType 中的项目！= "Remove"**
2.  从**clickedList**中删除所有具有**OperationType = "Remove"**且不存在于**toRemove**列表中的项目。

有没有这样做的好方法？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:27:51.347

我认为最有效的方法是使用 HashSet> 来存储实际上应该从字典中删除的所有键 - 尽管此解决方案不使用 linq：

```
toRemove = machine.Array
              .Select(x => 
                  new KeyValuePair<int, string>((int)x.MachineID, x.PackageID))
              .ToList();

// create a hash set and initially put all the elements from toRemove in the set
var r = new HashSet<KeyValuePair<int, string>>(toRemove);

// go over each element in the clickedList
//    and check whether it actually needs to be removed
foreach(var kvp in clickedList.Keys)      // O(n);  n = # of keys/elem. in dictionary
{
    if(kvp.Value == OperationType.Remove)
    {
       if(r.Contains(kvp.Key)             // O(1)
          r.Remove(kvp.Key);              //    (1)
       else
          r.Add(kvp.Key);                 //   O(1)
    }
}

foreach(var key in r)                     // O(m); m = # of keys to be removed 
{
    clickedList.Remove(key);
} 
```

我相信上面可能是删除元素的最有效方法，因为它在字典中的键数量上是线性的。

# iphone - NSObject 未存储在目标 c 中的 NSMutableArray 中

> ID：15387927
> 
> 赞同：0
> 
> 时间：2013-03-13T14:20:55.100
> 
> 标签：iphone, ios, objective-c, ios5, ios6

我已经解析了存储在`NSObject`文件中的数据。然后我将目标文件存储在一个数组中：

```
[array addobject: object]; 
```

当我打印数组时，它只包含第一个对象值。

我全局声明了数组，为它分配了内存并为对象分配了内存。

它是这样打印的：

数组计数 2 和数组是：

```
(

    "about 1st orders",

    "about 2nd orders"
) 
```

类是`__NSArrayM`

以前它可以正确存储整个对象。

有什么想法或建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:43:49.530

**以下是为您描述的逻辑，可能对您有所帮助。**

首先创建一个类（*名称随心所欲*）

```
#import <Foundation/Foundation.h>

@interface MyClassName : NSObject {
    NSString *name; // set as per your requirement.
    NSString *address; // set as per your requirement.
   .
   .
   .
}
@property (retain, readwrite) NSString * name;
@property (retain, readwrite) NSString * address;
.
.
. 
```

并正确`@synthesize`发布参考。（*如果不使用`ARC`*）

然后在这个类对象中添加你的数组然后获取数据，比如，

**编辑：**

```
 NSMutableArray *anOtherArray = [[NSMutableArray alloc] init];
    for(int i=0; i < listOfArray.count; i++)
    {
         MyClassName *myData = [self.listOfArray objectAtIndex:i];
         NSLog(@"%@", myData.name);
         NSLog(@"%@", myData.address);
         [anOtherArray addObject:myData.name];
         [anOtherArray addObject:myData.address];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:44:54.157

Here is what i usually do when putting objects into array :

```
#import <Foundation/Foundation.h>

@interface ImageObject : NSObject
{
    NSString *ImageURL;
    NSString *Date;
// put any other stuff here.

}

@property (nonatomic, strong) NSString *ImageURL;
@property (nonatomic, strong) NSString *Date;
// put any other stuff here too.

@end 
```

Then when you want to insert the object :

```
NSMutableArray *yourMutableArray = [[NSMutableArray alloc]init];

NSArray *array = [[NSArray alloc]initWithArray:[self.imageDictionary objectForKey:@"images"]];
        for (NSDictionary *dict in array) {
            ImageObject *imgObj = [[ImageObject alloc]init];
            imgObj.ImageURL = [dict objectForKey:@"ImageURL"];
            imgObj.Date = [dict objectForKey:@"LogDate"];
            [yourMutableArray addObject:imgObj];

        } 
```

and for calling the items inside the array :

```
ImageObject *imgObj = [[ImageObject alloc]init];

imgObj = [yourMutableArray objectAtIndex:indexOfArray]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:24:26.177

您存储在 中的对象的定义是什么`NSArray`？对于存储在数组中的自定义对象，您应该覆盖 NSObject 的`isEqual`方法。

对于存储在地图中的自定义对象，例如`NSDictionary`，您也需要实现`hashcode`。

# c# - 绑定媒体元素

> ID：15387930
> 
> 赞同：1
> 
> 时间：2013-03-13T14:20:56.753
> 
> 标签：c#, .net, wpf, binding

我们正在尝试将我们的应用程序从编码背后的代码切换到 MVVM 模式。

我们的 XAML 文件中有一个 MediaElement：

```
<MediaElement  Name="MyMedia" LoadedBehavior="Manual" UnloadedBehavior="Manual"  MediaEnded="MediaEnd" MediaOpened="MediaBegin" Margin="10,24,13.6,10" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Visibility="Visible" /> 
```

目前，通过代码隐藏编码方法，我们可以直接在 .xaml.cs 文件中访问 MediaElement 以调用类似`MediaElement.play()`or的方法`MediaElement.pause()`。

问题是我们当前在尝试将代码转换为 MVVM 时被阻止，因为我们无法访问 .cs 文件中的 MediaElement。我们正在尝试绑定 MediaElement 本身，以便我们可以调用`play`或`pause`方法，但我们还没有成功。

有任何想法吗 ？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:15:10.217

此链接描述了如何控制它[http://msdn.microsoft.com/en-us/library/ms748248.aspx](http://msdn.microsoft.com/en-us/library/ms748248.aspx) 它使用一个事件但仍然在事件处理程序中调用 MediaElement.play()。

# javascript - 一个应用程序中的多个 javascript 文件

> ID：15387939
> 
> 赞同：1
> 
> 时间：2013-03-13T14:21:19.623
> 
> 标签：javascript

不太确定如何问这个问题，但我只是在寻找一些见解/信息。

如果我在我的应用程序中包含多个 JavaScript 文件，页面/应用程序如何查看所有 JS 代码。是否所有文件中的所有JS都变成一个大JS文件

如果一个 JS 文件有一个变量`foo=true;` ，而另一个 JS 文件有`foo=false`，那么范围是`foo`什么？它是它所在的脚本的本地文件还是在“所有”js代码中都可以看到？

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:22:03.303

是的，在大多数情况下，这就像只有一个文件，通过按导入顺序连接所有文件来构建。

区别：

*   `"use strict";`（假设它存在）仅对每个文件有效
*   浏览器获取 10 个小文件比获取大文件要慢得多，这就是为什么构建大型应用程序的 js 开发人员通常连接（并且经常缩小）所有文件以用于生产

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:30:44.077

如果您在一个文件中定义，而不使用`var`：

`foo = true;`

它将是一个全局变量，并且它可以被您的第二个 JS 文件访问`foo = false`

如果在页面上明确定义了所有脚本，它们将共享相同的全局命名空间。要为变量创建*本地*范围，您必须将其包装在`function`.

请参阅此问题中提供的解释：[JavaScript 中变量的范围是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)

为了轻松处理多个 JavaScript 文件并保持全局范围最小，同时允许不同的脚本共享信息，我建议您尝试 RequireJS ( [http://requirejs.org/](http://requirejs.org/) )，它是一个 JavaScript 文件和模块加载器。它将处理您可能拥有的任何文件依赖项，并将异步加载它们。它还将使您可以轻松地在不同的模块/文件之间传递变量，而不必将它们暴露在全局范围内。

还有其他文件/模块加载器。见： http: [//www.netmagazine.com/features/essential-javascript-top-five-script-loaders](http://www.netmagazine.com/features/essential-javascript-top-five-script-loaders)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:23:50.417

脚本共享的唯一内容是全局范围；单独的部分不会成为一个大文件。

例如，您不能这样做：

```
<script type="text/javascript">
function hello() {
</script>
<script type="text/javascript">
}
</script> 
```

并且`'use strict'`一体`<script>`式不会对所有这些应用严格模式。

# c# - 在不允许任意实现时使用接口隐藏实现细节

> ID：15387940
> 
> 赞同：2
> 
> 时间：2013-03-13T14:21:20.033
> 
> 标签：c#, api, oop

我正在使用 C# 为我们的应用程序构建一个公共 API。我在与 WCF 客户端一起使用的 DTO 之上有一组外观类。它允许 API 使用者从数据库应用程序中获取、更新、创建等。标准的东西：客户有一个订单的集合，订单有一个行项目的集合，等等。

外观类都派生自一个公共基类，并覆盖执行验证、读取/写入 DTO 和其他管道的方法，所有这些都使用各种内部类型。我正在使用工厂来创建新对象并获取现有对象。

现在的问题是如何最好地通过 API 公开类，同时最大限度地减少实现细节的公开。

接口似乎是一种显而易见的方法，是限制暴露内容的最简单方法（并且最终可能无论如何都是必要的，因为正在考虑使用与 COM 兼容的接口）。接口方法的问题在于，在内部我的代码将依赖于接口的特定实现。

假设我有一个公开我的 CustomerFacade 的 ICustomer 接口，以及公开 OrderFacade 的 IOrder。在外部，ICustomer 有一个 IOrder 集合。但在内部，CustomerFacade 有一个 OrderFacade 集合。如果客户端应用程序向客户添加新的 IOrder，我必须检查 IOrder 是否真的是以前从我的工厂创建的 OrderFacade，而不是我控制之外的其他实现 IOrder 的对象。那是因为在内部我需要一个订单来做比 IOrder 可以做的更多的事情。

实际上，这并不重要——API 的用户不会尝试创建自己的 Order 实现。但这对我来说感觉很不雅，就像滥用接口契约的含义一样。

直接暴露外观类并不好，因为必须暴露整个类层次结构，以及受保护方法使用的内部类型，这会使 API 与消费者不会使用和不使用的类型混淆需要了解一下。

我能想到的另一种选择是另一层封装：一个包含私有 OrderFacade 并且只公开应该公开的成员的订单。但这似乎是为了有限的利益而增加了很多额外的代码。

我考虑过抽象基类，但由于继承结构，这并不比暴露外观类更好。例如，如果我有一个继承自 CatalogItem 的 ServiceItem，在两者之间引入一个抽象的 ServiceItemBase 仍然需要我在 CatalogItem 中公开所有受保护的方法。

关于这些方法的任何建议，或者我没有看过的替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:30:24.477

这似乎相当复杂。我不知道您要解决的业务问题，所以我不知道为什么需要各种外观。如果用户将使用您的 api 进行数据操作，您可以考虑使用命令来修改数据，并查询以返回仅包含客户端需要的数据的 DTO。

[http://www.amazon.com/Framework-Design-Guidelines-Conventions-Libraries/dp/0321545613](https://rads.stackoverflow.com/amzn/click/com/0321545613)

这是一本可能会有所帮助的好书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:44:30.360

您还可以公开没有公共构造函数而不是接口的抽象类。这还有一个额外的优势，即抽象类可以作为非破坏性更改进行扩展，这对于接口而言并非如此。

使用*internal*访问修饰符可以隐藏在实现程序集之外不应该可见的成员。

# sql - OPENROWSET 查询的语法

> ID：15387944
> 
> 赞同：1
> 
> 时间：2013-03-13T14:21:23.243
> 
> 标签：sql, excel, openrowset

为了获取 2013-03-04 的数据，以下 SQL 代码的正确语法是什么？

```
SELECT * FROM 
OPENROWSET('Microsoft.ACE.OLEDB.12.0', 'Excel 8.0;Database=C:\Users\SQL Server\DataInput\Info.xlsm;'
, 'SELECT * FROM [Index_Info$]
where [Index_Info_Last Fixed Date] = 2013-03-04 '); 
```

在常见的 SQL 查询中，变量日期应包含在两个“”之间，但写入“2013-03-04”查询返回：

```
Incorrect syntax near '2013'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:26:17.613

您可能需要转义围绕日期文字的撇号，如下所示：

```
'SELECT * FROM [Index_Info$]
where [Index_Info_Last Fixed Date] = ''2013-03-04'' ' 
```

# android - 在特定角落拉伸位图

> ID：15387946
> 
> 赞同：4
> 
> 时间：2013-03-13T14:21:27.373
> 
> 标签：android, matrix, bitmap, camera, transform

是否可以在特定角落拉伸位图？下图显示了我的意图：

![在此处输入图像描述](../Images/73e224690735484c3f0d46b5dd579a24.png)

我用相机拍摄照片，检测图像中的角落并想要转换内容。[据我所知，仅靠Matrix](http://developer.android.com/reference/android/graphics/Matrix.html)类无法做到这一点。[Camera](http://developer.android.com/reference/android/graphics/Camera.html)类应该有帮助，但我需要计算相机的位置。有没有为此目的的算法？你会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:20:52.600

您让我研究了这个非常有趣的问题，并且在 Android 中似乎很容易做到。对 Mesh 的四个点使用绝对坐标：

```
float[] mVerts = {
       topLeftX, topLeftY, 
       topRightX, topRightY, 
       bottomLeftX, bottomLeftY, 
       bottomRightX, bottomRightY
       };

canvas.drawBitmapMesh(myImage, 1, 1, mVerts, 0, null, 0, null); 
```

您必须弄清楚如何获得这些点，但 drawBitmapMesh 会为您拉伸它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:46:24.127

我想在 Android 上进行这种转换的最简单方法是使用 OpenGL。您可以将位图视为纹理。然后您可以将检测到的角用作纹理坐标。将它们中的每一个作为纹理坐标分配给简单矩形的相应顶点。然后让 OpenGL 在你的画布上绘制它。伪代码：

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, pictureId);
glBegin(GL_QUAD);
glVertex(0,0); // left upper corner
glTexCoord(corners[0].x/picture.getWidth(), corners[0].y/picture.getHeight());
glVertex(1,0); // right upper corner
glTexCoord(corners[1].x/picture.getWidth(), corners[1].y/picture.getHeight());
glVertex(1,1); // right lower corner
glTexCoord(corners[2].x/picture.getWidth(), corners[2].y/picture.getHeight());
glVertex(0,1); // left lower corner
glTexCoord(corners[3].x/picture.getWidth(), corners[3].y/picture.getHeight());
glEnd(); 
```

您不需要任何相机或复杂的变换。当然这不是很方便，因为使用 OpenGL 来完成如此简单的任务是相当过分的。但是，除了自己编写这样的纹理之外，真的没有更简单的方法。如果您愿意，您可以从 wiki 开始阅读并转到外部链接并查找纹理方法的示例软件实现：

[http://en.wikipedia.org/wiki/Texture_mapping](http://en.wikipedia.org/wiki/Texture_mapping)

您也可以尝试使用任何 OpenGL 效果视图，它会简化设置，但也会要求您提供一两个着色器：

[http://code.google.com/p/effect-view/](http://code.google.com/p/effect-view/)

# javascript - 文件阅读器不工作？

> ID：15387948
> 
> 赞同：0
> 
> 时间：2013-03-13T14:21:33.667
> 
> 标签：javascript, file-io

这令人沮丧。我一直在 Safari、Firefox 和 Chrome（所有最新版本）中运行此代码，但它不起作用。它对其他人有用吗？我从`<input type='file' id='file' name='file'>`

```
console.log("Have now created a new file reader and it looks like this..." + reader);
reader.onload = function() {
var contents = event.target.result;
console.log("File contents: " + contents );
};
reader.onerror = function(event) {
console.error("File could not be read! Code " + event.target.error.code);
};
reader.readAsText(file);    
}, false); 
```

我究竟做错了什么？

谢谢，

威尔斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:31:14.730

> 我究竟做错了什么？

您似乎忘记了处理程序的`event`参数。`onload`而不是使用`event.target`，您也可以只使用`reader`.

此外，在小提琴中，您正在[`FileReader`](https://developer.mozilla.org/en-US/docs/DOM/FileReader)以一种非常奇怪的方式创建。您可能想阅读[MDN 上的](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)[*使用来自 Web 应用程序的文件*](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)的介绍。

```
document.getElementById("file").addEventListener("change", function(e) {
    var file = e.target.files[0],
        reader = new FileReader();
    console.log("Have now created a new file reader and it looks like this..." + reader);
    reader.onload = function(event) {
//                           ^^^^^
        var contents = event.target.result;
        console.log("File contents: " + contents );
    };
    reader.onerror = function(event) {
        console.error("File could not be read! Code " + event.target.error.code);
    };
    reader.readAsText(file);    
}, false); 
```

# winforms - skybound.geckofx 离线浏览 C# .net 4.0 winforms

> ID：15387957
> 
> 赞同：0
> 
> 时间：2013-03-13T14:21:49.313
> 
> 标签：winforms, geckofx, offline-browsing

我正在使用 skybound.geckofx .net 包装器在我的 winforms 应用程序中显示存储的 Web 内容。有些页面有链接，js指的是在线内容。有什么简单的方法可以禁用 geckofx 包装器中的在线内容下载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:44:24.107

```
browser.Navigating += (sender, args) => { if (IsLinkOnLine(sender.Uri)) args.Cancel = true; }; 
```

其中 IsLinkOnLine 是一个函数，如果 Uri 裁判“在线内容”，则返回 true。

browser 是一个 GeckoWebBrowser 实例。

如果您还没有，我还建议您使用更新版本的 geckofx [https://bitbucket.org/geckofx/ 。](https://bitbucket.org/geckofx/%20geckofx)

# jquery - 将类添加到 tr 备用

> ID：15387959
> 
> 赞同：2
> 
> 时间：2013-03-13T14:21:54.023
> 
> 标签：jquery, html-table, tablerow

我正在使用网格控件，其中隐藏了一个 tr 的表格，单击该按钮即可打开。所以我尝试了以下函数将类添加到奇数行。

```
<script type="text/javascript">
// Activate TableStyling
jQuery(document).ready(function () {
    $('table.management').each(function () {
        $(this).children('tbody').children(':odd').addClass('grey');
    });

}); 
```

但问题是它也计算隐藏的TR..所以我需要不计算隐藏TR的函数并将类添加到查看的Tr

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T14:23:45.397

你可以这样做：

```
$(this).children('tbody').children(':visible:odd').addClass('grey'); 
```

此外，如果您的隐藏`tr`有一些特殊的课程或其他东西，您可以这样做：

```
$(this).children('tbody').children(':not(.<your hidden class>):odd')
    .addClass('grey'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:23:22.507

您可以尝试将`:visible`伪选择器与`:odd`.

现场示例：http: [//jsfiddle.net/SAdEE/](http://jsfiddle.net/SAdEE/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:24:30.153

尝试

```
$(this).children('tbody').children(':visible:odd').addClass('grey'); 
```

[http://jsfiddle.net/K3vCD/](http://jsfiddle.net/K3vCD/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T14:23:39.463

尝试添加`:visible`选择器。

```
$(this).children('tbody').children(':visible:odd').addClass('grey'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T14:31:02.203

大多数（如果不是全部）答案都假设您对“隐藏”的定义与 jQuerys 相同。在其他情况下，“隐藏”可能类似于高度：0px、带有重叠元素的模糊 z 索引等。在这些非常罕见的情况下，可以使用过滤器方法与您自己的逻辑一起对被视为“隐藏”的内容进行分类。

```
$(this).children('tbody').filter(function(){
   return this.isNotAHiddenTR(); // your custom logic.
   // return $(this).is(':visible'); // the most likely solution
}).children(':odd').addClass('grey'); 
```

此外，`:visible`选择器*将*返回具有`visibility: hidden`.

# database - VB.Net 将过滤后的数据视图绑定到列表框

> ID：15387960
> 
> 赞同：0
> 
> 时间：2013-03-13T14:21:54.520
> 
> 标签：database, vb.net, ms-access, data-binding

我正在尝试使用 Visual Studio 2010 对 Access 数据库执行筛选。用户将在文本框中输入搜索条件，我希望结果显示在列表框中，并且能够根据所选项目更新其他字段列表框。我目前的代码是：

```
 Dim dv As New DataView

    With dv
        .Table = subcategoryDataSet.Tables("Subcategory")
        .AllowDelete = False
        .AllowEdit = False
        .AllowNew = False
        .RowFilter = "Description LIKE '" & txtSearchBox.Text & "*'"
        .Sort = "ID"
    End With

 'Now I am lost 
```

不确定是否需要从 dv 表创建数据源？或者如何将它正确绑定到列表框，或者我什至需要将它绑定到列表框？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:29:03.693

您只需将 Listbox 的 DataSource 设置为 DataView 并将 DisplayMember 设置为您希望在 Listbox 中看到的字段。

像这样的东西

```
ListBox1.DataSource = dv
ListBox1.DisplayMember = "Description" 
```

# c# - Foreach 使用两个 viewbag

> ID：15387963
> 
> 赞同：1
> 
> 时间：2013-03-13T14:21:58.103
> 
> 标签：c#, winforms

我想在视图中使用两个视图包进行 foreach，但是在第二个 foreach 中出现错误。

```
@foreach (var item in ViewBag.stages)
{ 
      <div id="style101">
         <h2><span> <strong>@item.NameStage</strong></span></h2>
      </div>
    foreach (var item2 in (ViewBag.actions.IdStage == item.IdStage )) 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:34:58.227

**尽量避免使用 ViewBag / ViewData**将数据从您的操作方法传递给查看。您现在一定已经意识到这使您的视图有点脏。**使用强类型视图模型。**

假设你的观点是创造一些东西。因此，为此创建一个视图模型。假设您在每个阶段都有多个操作。

```
public class CreateSomeThingVM
{
  public string Title { set;get;}  
  public List<Stage> Stages { set;get;}

  public CreateSomeThingVM()
  {
    Stages=new List<Stage>();
  }
}
public class Stage
{
  public int ID { set;get;}
  public string StageName { set;get;}
  public List<Action> Actions { set;get;}
  public Stage()
  {
    Actions =new List<Action>();
  }
}
public class Action
{
  public int ID { set;get;}
  public string ActionName { set;get;}
} 
```

在您的 Action 方法中，获取数据并设置属性。

```
public ActionResult Create()
{
  var vm=new CreateSomeThingVM();

  vm.Stages=GetListOfStagesFromSomeWhereWithItsActions();

  return View(vm);
} 
```

假设`GetListOfStagesFromSomeWhereWithItsActions`方法返回一个`Stage`对象列表及其正确的`Actions`.（您应该根据需要在此处进行过滤以获取每个阶段的相关操作）。

现在在我们的 CreateSomeThingVM 视图模型的强类型视图中，编写一些干净的代码

```
@model CreateSomeThingVM

@foreach(var stage in Model.Stages)
{
  <h2>@stage.StageName</h2>
  foreach(var action in Model.Actions)
  {
    <p>@action.ActionName</p>
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:34:58.783

**在in**关键字计算为布尔值而不是 IEnumerable之后，它看起来像第二个循环中的表达式。您是不是要使用 .where() 来过滤可枚举的对象？
也许：

```
Viewbag.actions.where( a => a.IdStage == item.IdStage) 
```

# c# - GC.KeepAlive() 取消注释时，仍然只有一个实例，如何？

> ID：15387964
> 
> 赞同：0
> 
> 时间：2013-03-13T14:21:59.000
> 
> 标签：c#, .net, winforms, c#-4.0, instance

与下面的参考线程相反，即使我评论 GC.KeepAlive() 也没有发现任何区别，它会阻止任何其他实例的创建。为什么作者明确提到了它的重要线？

[确保只有一个应用程序实例](https://stackoverflow.com/questions/6486195/ensuring-only-one-application-instance)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T14:57:22.083

更新：这个问题是[我 2013 年 6 月博客的主题](http://ericlippert.com/2013/06/10/construction-destruction/)；有关此主题的更多想法，请参阅该文章。谢谢你的好问题！

* * *

让我澄清一下这里发生了什么。让我们忽略它是互斥体这一事实，并考虑一般情况：

```
class Foo 
{ 
    public Foo() 
    {
        this.x = whatever;
        this.y = whatever;
        SideEffects.Alpha(); // Does not use "this"
    }
    ~Foo() 
    { 
        SideEffects.Charlie(); 
    }
    ...
}
static class SideEffects
{
    public static void Alpha() {...}
    public static void Bravo() {...}
    public static void Charlie() {...}
    public static void M()
    {
        Foo foo = new Foo(); // Allocating Foo has side effect Alpha
        Bravo();
        // Foo's destructor has side effect Charlie
    }
} 
```

作者`M`希望产生副作用`Alpha()`，`Bravo()`并`Charlie()`按此顺序发生。现在，您可能会认为这`Alpha()`必须在之前发生，`Bravo()`因为`Alpha()`和`Bravo()`发生在同一个线程上，而 C# 保证在同一个线程上发生的事情会保留副作用的顺序。你是对的。

您可能会认为这`Charlie()`必须在之后发生，`Bravo()`因为`Charlie()`直到存储在其中的引用`foo`被垃圾收集后才会发生，并且局部变量`foo`使该引用保持活动状态，直到控制离开 , 的范围`foo`后调用`Bravo()`. **这是错误的。**允许 C# 编译器和 CLR jit 编译器一起工作，以允许提前声明局部变量“死”。*请记住，C# 仅保证从一个线程观察时*事情以可预测的顺序发生。垃圾收集器和终结器在它们自己的线程上运行！因此，*垃圾*收集器`foo`在`Bravo()`调用`Bravo()`因此副作用可能在另一个线程`Charlie()`之前`Bravo()`或*期间发生。* `Bravo()`

A`KeepAlive(foo)`会阻止编译器进行这种优化；它告诉垃圾收集器`foo`至少在 之前是活动的`KeepAlive`，因此`Charlie()`终结器中的副作用保证在副作用之后出现`Bravo()`。

现在这是一个有趣的问题。*如果没有keepalive，之前*`Charlie()`会发生副作用吗？事实证明，在某些情况下是的！允许抖动非常激进；如果它发现ctor 的 ctor 将在 ctor 结束后立即死亡，那么它可以在 ctor 停止改变 的字段后安排收集。*`Alpha()`*`this``this``this`

除非您`KeepAlive(this)`在`Foo()`构造函数中执行 a，否则垃圾收集器可以在运行`this`前进行收集`Alpha()`！（当然，前提是没有其他东西可以让它保持活动状态。）**一个对象可能在其构造函数仍在另一个线程上运行时完成。** 这也是为什么您需要*非常小心地*编写具有析构函数的类的另一个原因。整个对象需要被设计成在面对析构函数突然被另一个线程意外调用时是健壮的，因为抖动是激进的。

在您的具体情况下，“Alpha”是取出互斥锁的副作用，“Bravo”是运行整个程序的副作用，“查理”是释放互斥锁的副作用。如果没有 keepalive，*则允许*在程序运行之前释放互斥锁，或者更有可能在程序运行时释放。它*不需要*发布，而且大多数时候不会发布。但它*可能是*，如果抖动决定积极地取出垃圾。

* * *

> 有哪些替代方案？

keepalive是正确的，但我个人不会在原始代码中选择keepalive，基本上是：

```
static void Main()
{
    Mutex m = GetMutex();
    Program.Run();
    GC.KeepAlive(m);
} 
```

另一种选择是：

```
static Mutex m;
static void Main()
{
    m = GetMutex();
    Program.Run();
} 
```

抖动允许提前终止局部变量，但*不允许*提前终止静态变量。因此不需要 KeepAlive。

更好的是利用 Mutex 是一次性的这一事实：

```
static void Main()
{
    using(GetMutex())
       Program.Run();
} 
```

这是一个简短的写法：

```
static void Main()
{
    Mutex m = GetMutex();
    try
    {
       Program.Run();
    }
    finally
    {
        ((IDisposable)m).Dispose();
    }
} 
```

现在垃圾收集器无法提前清理互斥体，因为它需要在控制离开*后被*`Run`释放。（如果抖动可以证明释放互斥锁没有任何作用，则允许提前清理它，但在这种情况下，释放互斥锁会产生效果。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:26:10.573

如果您不这样做，互斥锁将在垃圾收集时被销毁，但这不能保证事件立即发生，这就是它仍然可以长时间工作的原因。

我会使用我自己的静态来查看第二个答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:27:10.467

没有多少测试可以证明这`GC.KeepAlive`是多余的，但只有一个（失败的）测试可以证明它是必要的。

换句话说，如果`GC.KeepAlive`省略，则代码*可能*无法正常工作；不能*保证*立即中断。它可能无法正常工作，因为`mutex`它是一个超出范围的局部变量；这使它有资格进行垃圾收集。*如果*GC 决定收集该对象，则互斥锁*将*被释放（并且您将能够启动一个新实例）。

# c# - 自定义 SignalR 的错误消息

> ID：15387970
> 
> 赞同：2
> 
> 时间：2013-03-13T14:22:09.750
> 
> 标签：c#, asp.net, asp.net-mvc-4, signalr, signalr-hub

我使用 SignalR 1.0。当服务器发生异常时，客户端会收到这样的消息

> {"I":"0","E":"抛出了 'System.Exception' 类型的异常。","T":" at METHODNAME in d:\PATH\TO\HUB.cs:line 227\r \n 在 d:\PATH\TO\HUB.cs:line 51"} 中的 METHODNAME

但我想让它更加用户友好。我该怎么做？我已经阅读了将所有服务器方法放入 try-catch 块的建议。但我认为这不是真正的方式。

我跟踪了异常，发现异常是在 Microsoft.AspNet.SignalR.Hubs.HubDispatcher.Incoming 方法中捕获的。但这是我无法自定义的内部静态方法。

在理想情况下，我希望能够将异常转换为有效响应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T17:59:23.430

您可以使用 HubPipelineModule。

例如：

```
using System;
using System.Threading.Tasks;
using Microsoft.AspNet.SignalR.Hubs;

public class MyHubPipelineModule : HubPipelineModule
{
    protected override Func<IHubIncomingInvokerContext, Task<object>> BuildIncoming(Func<IHubIncomingInvokerContext, Task<object>> invoke)
    {
        return async context =>
        {
            try
            {
                // This is responsible for invoking every server-side Hub method in your SignalR app.
                return await invoke(context); 
            }
            catch (Exception e)
            {
                // If a Hub method throws, have it return the error message instead.
                return e.Message;
            }
        };
    }
} 
```

然后在您的 Global.asax.cs 中：

```
protected void Application_Start()
{
    GlobalHost.HubPipeline.AddModule(new MyHubPipelineModule());
    //...
    RouteTable.Routes.MapHubs();
} 
```

# .net - Sencha Touch 使用哪种服务器端 .NET 技术

> ID：15387973
> 
> 赞同：1
> 
> 时间：2013-03-13T14:22:16.083
> 
> 标签：.net, architecture, sencha-touch-2

我想知道哪种 .NET 服务器技术适合用作旨在用 Sencha Touch 编写的丰富移动应用程序项目的后端？

后端应该负责为移动应用程序提供数据、收集用户输入、身份验证、维护会话状态、与服务器数据库通信，并最终在有意义的地方执行一些业务逻辑。作为对象关系映射器，我们目前正在使用自定义框架。

如果您想到更多平台（我偶然发现了 WCF+REST with JSON、ASP.NET MVC、ASP.NET Web API...），它们各自的优缺点是什么？其中哪一个“匹配”最符合 Sencha Touch 中的基本范式？他们的单元可测试性、可维护性和未来前景如何？

# jquery - 使用自动完成禁用区分大小写

> ID：15387974
> 
> 赞同：2
> 
> 时间：2013-03-13T14:22:19.580
> 
> 标签：jquery, autocomplete, case-sensitive

我对 jQuery 自动完成有疑问。当我在“LI”之类的字段中写一些东西时，我需要自动完成返回所有以“LI”开头的单词（小写和大写的单词）。但是当我写这个时，自动完成只会返回大写的单词。有可能改变这个吗？

**更新：**我找到了一种方法，我不知道这是否是正确的方法，但是......我正在使用它。它只是放入自动完成“ILIKE”的“SELECT”，而不是“LIKE”。它对我有用，但是（再次）我不知道这是否是正确的方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T08:15:22.830

最简单的解决方案是什么？我的解决方案是 PHP+MySQL，但您可以简单地将其调整为您想要的每个场景。

```
$upperString = strtoupper($stringToCompare);
$query .= "SELECT blablabla WHERE UPPER(columnName) LIKE '%$upperString%'"; 
```

奇迹般有效

Linuxatico

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:07:32.540

根据您为自动完成构建列表的方式，这可能会自动内置，例如，在我的 C# 代码中，实体框架与 MySQL db 对抗的情况对我来说并不重要。

```
//Builds a search list for Card Name Search boxes
public JsonResult GetACResults(string term) 
{
    return Json((from item in db.tableName
        where item.NameOfInterest.Contains(term)
        select new
        {
            value = item.NameOfInterest
        }).Distinct().OrderBy(x => x.value).ToList(),
        JsonRequestBehavior.AllowGet);
} //public JsonResult GetACResults(string term) 
```

如果这是您必须自己处理的问题，您可以将这篇文章视为解决方案： [Case insensitive 'Contains(string)'](https://stackoverflow.com/questions/444798/case-insensitive-containsstring)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T14:36:40.637

我找到了一种方法，我不知道这是否是正确的方法，但是......我正在使用它。它只是放入自动完成**"ILIKE"**的 "SELECT" ，而不是**"LIKE"**。它对我有用，但是（再次）我不知道这是否是正确的方法！

:)

# javascript - 根据条件输入填写db字段

> ID：15387980
> 
> 赞同：0
> 
> 时间：2013-03-13T14:22:44.163
> 
> 标签：javascript

我有 4 个输入字段：

*   说明（隐藏）
*   促销1
*   促销2
*   促销3

用户只能填写三个促销字段之一。

我使用单选按钮管理这部分，因此促销字段根据选中的单选显示。

如何根据选中的单选按钮使用来自促销（1、2 或 3）的相同数据填充描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:48:27.983

如果你真的想将 description 输入的值设置为 promo 输入的值，你可以使用 'keyup' javascript 事件来设置该字段的值。在 CoffeeScript 中是这样的：

```
$('.promo-inputs').on keyup: ->
    $('#description-input').val($(this).val()) 
```

见[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

# database - 如何维护两个以上表的关系

> ID：15387982
> 
> 赞同：1
> 
> 时间：2013-03-13T14:22:48.233
> 
> 标签：database

请帮助我维护两个以上表之间的关系。我将解释我现在面临的一种情况。表 1 包含我在应用程序中使用的所有代码，示例状态代码表示 Active 的代码为 10，InActive 的代码为 20，这样我维护所有代码，表 2 有 5 列，

```
column 1 is auto generated key
column 2 - has the id of table 1
column 3 - also has the id of table 1
column 4 - also has the id of table 1
column 5 - has description. 
```

因此，我需要在从这两个表中检索数据时执行多个连接。我的问题是，维护表是否正确？

此外，我正在使用 Spring 和 Hibernate 从数据库中获取数据。关于如何使用 Hibernate 做到这一点的任何想法？请就此向我提出建议。

# ruby-on-rails - MyApp::Application.initialize 是做什么的！打电话？

> ID：15387983
> 
> 赞同：2
> 
> 时间：2013-03-13T14:22:51.553
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, initialization

我试图弄清楚 rails 3 的初始化。而且我知道每个应用程序都会调用 environment.rb 中的以下函数来初始化整个应用程序：

MyApp::Application.initialize！

从它我们应该期待初始化！是 Rails::Application 的类方法。但是在我红了源代码之后，我发现改为初始化！是一个实际调用的实例方法：

```
def initialize!(group=:default) #:nodoc:
  raise "Application has been already initialized." if @initialized
  run_initializers(group, self)
  @initialized = true
  self
end 
```

那么为什么要调用实例方法，尽管我们期望一个类方法呢？有像方法委托这样的技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:35:58.910

是的。代表团有一个小技巧。如果您查看 gem 中的文件`lib/rails/railtie/configurable.rb`，`railties`您将看到以下委托给实例的代码。

```
def method_missing(*args, &block)
  instance.send(*args, &block)
end 
```

如果您不知道 method_missing 钩子，您可以在此处阅读更多信息：[http ://rubylearning.com/satishtalim/ruby_method_missing.html](http://rubylearning.com/satishtalim/ruby_method_missing.html)

# java - 如何在netbeans中导入用户定义的包

> ID：15387986
> 
> 赞同：2
> 
> 时间：2013-03-13T14:22:53.307
> 
> 标签：java

我有一个名为`javaapplication3`. 我想`javaapplication3`在另一个名为`javaapplication6`. 如何添加这个用户定义的包`javaapplication6`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T14:25:57.333

如果这些包在同一个项目中：

```
import javaapplication3.*; 
```

如果包在不同的项目中，您必须从 构建一个 Jar `application 3`，然后[将此 jar 作为依赖项添加](https://stackoverflow.com/questions/4879903/how-to-add-a-jar-in-netbeans)到项目`application 6`中。

第三种（也是肮脏的）解决方案是将粘贴包复制`javaapplication3`给您 new `javaapplication6`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:25:25.520

右键单击“源包”->“新建”->“Java 包...”

输入任何你喜欢的名字？！:-)

在第一条评论后编辑：您必须转到项目属性 -> 库 -> 添加项目并添加另一个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T11:12:18.147

虽然这个问题很久以前就被问过了。没有明确的答案可以解决问题。所以：要导入您自己的 jar 或 Java 类，您可以在 netbeans 的文件菜单条中使用项目属性。你创建你的库，比如 MyLibrary，并添加类路径和 jar 文件源

# javascript - 重新加载谷歌地图

> ID：15387991
> 
> 赞同：2
> 
> 时间：2013-03-13T14:23:02.153
> 
> 标签：javascript, google-maps, iframe, refresh

我的网站上有 3 个不同的谷歌地图，一个用于在台式机、平板电脑和移动设备上查看时，当我调整浏览器的大小时，人们可能会执行现在调整大小的新地图指针不在正确的位置，直到我刷新页面，我只想重新加载 iframe，我对 javascript 非常陌生，并尝试了这个，但它不起作用

```
<script type="text/javascript">
            if( $(window).width() == 985){

                document.getElementById('map-desk').contentWindow.location.reload(true);
            }

            if( $(window).width() == 975){

                document.getElementById('map-tab').contentWindow.location.reload(true);
            }

            if( $(window).width() == 765){

                document.getElementById('map-mob').contentWindow.location.reload(true);
            }

        </script> 
```

就像当屏幕等于某个宽度时，具有该 ID 的 iframe 会重新加载或刷新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:35:04.227

没有实际的事件处理程序，因此它只会在浏览器加载时触发一次（这显然不是您想要的）。当您使用 jQuery 时，将您的代码包装在：

```
$(window).resize(function() {

    // code goes here...

}); 
```

...它会在每次浏览器大小发生一分钟变化时运行代码。尽管您会遇到`$(window).width()`很少会达到*确切*像素值的问题。我不确定最佳解决方案，但涉及检查条件 +/- 30 像素的方法可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:36:00.917

我认为您正在 jQuery 中寻找以下事件

```
window.onresize = function(event) {
  //your code to resize and reload here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:48:38.343

如果调整了 mapdiv 的大小，Google 地图会自行重新加载。给 mapdiv 100% 的宽度。它将适合窗口的大小。如果您想更改地图的内容（图层、标记、路线...），您应该使用谷歌地图事件。此处列出了事件、选项和方法：[https ://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

# iphone - 如何在 iphone 的导航栏中禁用 UIpangesture 识别器（如果有）？

> ID：15387993
> 
> 赞同：0
> 
> 时间：2013-03-13T14:23:05.580
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我在导航栏中启用了 UIpangesture 识别器以放置菜单。但我只需要在我的菜单的基本视图中使用它。当我们进入详细视图时，我需要仅在此处禁用它。任何机构都可以帮助我找出如何禁用导航栏中的识别器（如果存在任何东西）。我需要先检查导航栏视图是否已启用，如果它启用了，那么我需要禁用它吗？有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:41:54.477

[UIGestureRecognizer](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)有一个`enabled`属性，您可以在它仍附加到`UIView`. 这将阻止回调完全触发。

`UIView`或者，您可以使用'方法暂时删除手势识别器`removeGestureRecognizer:`并稍后重新添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:29:24.857

在 UIPanGestureRecongniser 的回调中，您可以检查应用程序的当前状态，即加载了哪个视图，然后相应地显示您的菜单。

```
- (void)gestureCallback:(UIGestureRecogniser*)gesture{
    if(state == firstLevel)
       // Show the menu
    else
      // return without doing anything.
} 
```

# c# - C# xml (de) 子对象的序列化

> ID：15387995
> 
> 赞同：1
> 
> 时间：2013-03-13T14:23:10.263
> 
> 标签：c#, xml

我有以下类结构

```
[Serializable]
public class Manager
{
    List<item> items
    List<Mod> mods

    [XmlArray("Items"), XmlArrayItem(typeof(Item), ElementName = "Item")]
    public List<Item> Items
    {
        get
        {
            return items;
        }
    }

    [XmlArray("Mods"), XmlArrayItem(typeof(Mod), ElementName = "Mod")]
    public List<Mod> Mods
    {
        get
        {
            return mods;
        }
    }
}
[Serializable]
public class Item
{
    string name;
    Mod mod;

    public string Name
    {
        get
        {
            return name;
        }
        set
        {
            name = value;
        }
    }
    public Mod Mod
    {
        get
        {
            return mod;
        }
        set
        {
            mod = value;
        }
    }

    private Item()
    { }

    public Item(string name, Mod mod)
    {
        this.Name = name;
        this.Mod = mod;
    }
} 
```

序列化按预期进行，但是当我反序列化时，我希望 item.Mod 对象指向 mods 列表中的对象。相反，它会创建一个新实例。有没有办法做到这一点？

我现在要做的是在反序列化后手动收集正确的实例

```
foreach (Item item in instance.Items)
{
  item.Mod = instance.Mods.Find(x => x.Name == item.Mod.Name);
} 
```

如果不可能，那么有没有办法只序列化项目中的 mod.Name ？（所以 mod 本身应该完全序列化，但 item.mod 应该只序列化名称）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:29:18.813

您必须在反序列化后手动设置。在反序列化期间，不会调用您的构造函数。这是默认行为。

# jquery - 可排序的 li 中的表单字段不起作用

> ID：15387999
> 
> 赞同：0
> 
> 时间：2013-03-13T14:23:21.930
> 
> 标签：jquery, jquery-ui

我创建了一些可排序的 li，在每个 li 内部都有一个表单，单击按钮会显示该表单。除了这些 li 中的表单字段不起作用之外，一切都运行良好，但是是的，当我们右键单击它们时，它们开始正常运行。点击这里进行[现场演示](http://jsfiddle.net/Abhimanue/UD52G/)。

```
 $(function() {
        $( "#sortable" ).sortable({
            placeholder: "ui-state-highlight"
        });
        $( "#sortable" ).disableSelection();

        var fieldsCount = $(".remove").length;
        $(".btn").click(function (e) {

            e.preventDefault();

            if(fieldsCount){
                number = $('ul#sortable li:last').attr("id");
                fieldsCount++;
                $("#sortable").append('<li id ="'+fieldsCount+'" class="ui-state-default"><a class="remove ui-icon hello'+fieldsCount+'">remove</a><span class="ui-icon down_arrow"></span>row '+fieldsCount+' <div class="toggle_div" id="toggle_div"><div class="field_left" id="field_left"><input type="text" name="" class="" id="" placeholder="label"></input></div><div class="field_right" id="field_right"><select name="" class="" id="" ><option>Text field</option><option>Textarea</option><option>Dropdown</option><option>Radio Button</option></select><input type="text" class="" id="" placeholder="discription" ></input></div></div></li>');
                        $("#sortable").sortable('refresh');
                }else{
                    $("#sortable").append('<li id="1" class="ui-state-default"><a class="remove ui-icon hello1">remove</a><span class="ui-icon down_arrow"></span>row 1 <div class="toggle_div" id="toggle_div"><div class="field_left" id="field_left"><input type="text" name="" class="" id="" placeholder="label"></input></div><div class="field_right" id="field_right"><select name="" class="" id="" ><option>Text field</option><option>Textarea</option><option>Dropdown</option><option>Radio Button</option></select><input type="text" class="" id="" placeholder="discription" ></input></div></div></li>');
                    $("#sortable").sortable('refresh');
                }

        });

        $("#sortable").on("click", "a.remove", function(){
            $(this).parent().remove();
            $("#sortable").sortable('refresh');
        });
        var flip = 0;
        $("#sortable").on("click", "span", function(){
            $(this).next(".toggle_div").toggle('slow', function(){
                if(flip++ % 2 == 0){
                    $(this).removeClass("up_arrow");
                    $(this).addClass("down_arrow");
                }else{
                    $(this).removeClass("down_arrow");
                    $(this).addClass("up_arrow");
                }
            });
            $("#sortable").sortable('refresh');
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:59:24.633

从您的代码中删除这一行，它将起作用：

```
 $( "#sortable" ).disableSelection(); 
```

[jsfiddle](http://jsfiddle.net/UD52G/2/)