# StackOverflow 问答 12857000-12857999

# opengl - 一步将剪切的图像与背景混合到目标中

> ID：12857001
> 
> 赞同：2
> 
> 时间：2012-10-12T10:20:30.947
> 
> 标签：opengl, 3d, shader, direct3d

请看一下这张图片。

![预期形象和要求](../Images/2c96442e8128b5aa8bcff4ecf7926638.png)

1.  我想显示纹理的剪裁细节，而剪裁矩形可以动画，因此我无法预先裁剪图像。图像的位置也是动画的。
2.  我想在背景前展示它。背景是颜色或纹理本身。
3.  我想将图像和背景与 opacity < 1.0 混合到目的地。
4.  这里真正的要求是一步渲染它，避免临时缓冲区。显然，为此需要一个（简单的）着色器。

我已经尝试实现这一目标：

*   首先渲染背景，然后渲染图像，每个图像的不透明度 < 1。这里的问题：它让背景在图像中闪耀。不允许在图像本身不透明的情况下看到背景。

*   当使用 opacity = 1 将两者渲染到临时缓冲区中，然后将此缓冲区渲染到 opacity < 1 的目标时，它可以工作，但这需要更多（太多）资源。

*   我可以在着色器中组合两个纹理（背景、图像），用不同的变换矩阵变换纹理坐标。这里的问题是，我无法剪辑图像。渲染的几何图形是一个由两个三角形组成的简单矩形。

有人可以提示我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:03:06.673

您基本上是在尝试渲染它。（图像与背景混合）与目的地混合

括号中的部分，您可以使用着色器，与目标的混合，您必须使用 glBlendFunc，因为目标在像素着色器中不可用。

听起来您知道如何在着色器中剪辑图像并通过动画纹理坐标来旋转它。

让我们将您的图像与 childreb 称为 ImageA 和灰色方形 ImageB

你希望你的着色器在每个像素上产生这个：

```
outputColor.rgb = ImageA.rgb * ImageA.a + ImageB.rgb * (1.0 - ImageA.a); 
```

这会完全按照您的需要混合您的两个图像。现在将像素着色器的 alpha 输出设置为所需的 alpha (<1.0)

```
outputColor.a = <some alpha value> 
```

然后，当您使用着色器渲染四边形时，请按如下方式设置混合功能。

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
<draw quad> 
```

# requirejs - RequireJS 加载脚本文件但传递的引用未定义

> ID：12857003
> 
> 赞同：6
> 
> 时间：2012-10-12T10:20:43.900
> 
> 标签：requirejs, amd

我有以下 requireJS 配置。在尝试引用包/ImagingX 模块时，即使我可以看到脚本已在 firebug 中加载，我也总是未定义。如果我将有问题的 js 文件移动到 baseUrl 目录并删除 package/ 它会按预期工作。

我究竟做错了什么？

```
window.requirejs.config(
        {
            baseUrl: '/Scripts',
            paths: {
                "jquery": "./jquery-1.7.1.min",
                "jqx": "/Content/Plugins/jqWidgets",
                "package" : "/Scripts/packages"
            },
            urlArgs: "bust=" + (new Date()).getTime(),
            shim : {
                'jqx/jqxcore': ['jquery'],
                'jqx/jqxsplitter': ['jquery','jqx/jqxcore']
            }
        }
    );

    window.require(['jquery', 'layoutManager', 'container', 'package/ImagingX'],
        function ($,lm,container,px) {

            px.Focus();

            $(document).ready(function () {
                lm.Init(); // Sets up panes
                container.Init(); //Set up the containers
            });
    }); 
```

**2012 年 15 月 10 日更新**

我现在急切地想解决这个问题，我已经把所有东西都剥离了基础，所以这里是新的主文件：

```
(function () {

    requirejs.config({
        paths: {
            "packages": "packages"
        }
    });

    require([
            'packages/testmodule'
        ],
        function (tm) {
                alert(tm);
    });

})(); 
```

以及位于名为 packages 的子文件夹中的模块。

```
define('testmodule',
function () {

    alert("called");

    return {
        set : 'rar  '    
    };

}); 
```

我可以看到脚本已加载，但它从未被执行，因此我从未得到它的参考。

![在此处输入图像描述](../Images/f8c1591dcb05a86a67110ec57f0c9bcb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T10:25:53.207

```
 requirejs.config({
        paths: {
            //"jquery": "./jquery-1.8.2.min",
            //"jqx": "/Content/Plugins/jqWidgets",
            "templates": 'templates',
            "text": "commonRequireJsModules/text",
            "domReady": "commonRequireJsModules/domReady",
            "packages" : 'packages/'
            //'signalR': './jquery.signalR-0.5.3.min',
            //'knockout': './knockout-2.1.0',
            //'pubsub' : './pubsub'
        }
        //,urlArgs: "bust=" + (new Date()).getTime()
        //,
        //shim : {
        //    'jqx/jqxcore': ['jquery'],
        //    'jqx/jqxsplitter': ['jquery', 'jqx/jqxcore'],
        //    'signalR': ['jquery'],
        //    'pubsub' : ['jquery']
        //}
    }); 
```

包路径上的斜杠似乎已经解决了这个问题，部分原因是还删除了模块定义部分中的名称。所以现在看起来像

```
define(['deps'],function(deps){
}); 
```

而不是

```
define('myMod',['deps'],function(deps){
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:00:41.713

几件事：

*   使用 window.require 而不仅仅是 require 似乎很奇怪
*   'shim' 中的名称必须与 'paths' 中的名称匹配，这里不是这种情况
*   document.ready 由 require 免费完成，无需再做

那么：您的 JS 控制台中是否有任何加载错误？它是否说缺少脚本？

这是一个工作要求配置，路由器位于此代码的同一文件夹中：

```
require.config({
    paths:{
        'jquery':'lib/jquery.min',
        'backbone':'lib/backbone.min',
        'underscore':'lib/underscore.min',
        'router':'Router'
    },
    shim:{
        'backbone':{ deps:['jquery', 'underscore'] },
        'router':{ deps:['backbone'] }
    }
});

require(['router', 'jquery', 'underscore', 'backbone'],
    function (Router) {
        var router = new Router();
        $('img').hide();
    });
}); 
```

和 index.html：

```
<html>
<head>
    <script data-main="assets/js/App.js" src="assets/js/lib/require.min.js"></script>
</head>
<body>...</body>
</html> 
```

# android - 错误：已在此 LayoutInflater 上设置了工厂（更改菜单选项的背景颜色）

> ID：12857007
> 
> 赞同：1
> 
> 时间：2012-10-12T10:21:10.057
> 
> 标签：android, android-layout, background

我想更改菜单选项的背景颜色。我得到**错误**：
`FATAL EXCEPTION: main java.lang.IllegalStateException: A factory has already been set on this LayoutInflater at android.view.LayoutInflater.setFactory(LayoutInflater.java:277)`

我使用这段**代码**：
`private void setMenuBackground() {`

 ````
 getLayoutInflater().setFactory(new Factory() { 
        @Override 
        public View onCreateView (String name, Context context, AttributeSet attrs) { 
            if (name.equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView")) { 
            try { 

                    LayoutInflater f = getLayoutInflater(); 
                    final View view = f.createView(name, null, attrs); 

                    new Handler().post( new Runnable() { 
                        public void run () { 
                            view.setBackgroundColor(Color.GRAY); 
                        } 
                    }); 
                    return view; 
                } 
                catch (InflateException e) { 
                } 
                catch (ClassNotFoundException e) { 
                } 
            } 
            return null; 
        } 
    }); 
```

}`  `我找到了一些答案，但它们对我没有帮助。
我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-04T06:00:56.893

要保持兼容性库正常工作并避免“java.lang.illegalstateexception：已在此 layoutinflater 上设置工厂”，您需要获取对已设置工厂的最终引用并在您自己的 Factory.onCreateView 中调用其 onCreateView。在此之前，必须使用自省技巧来允许您将工厂再设置一次 LayoutInflater ：

```
LayoutInflater layoutInflater = getLayoutInflater();
final Factory existingFactory = layoutInflater.getFactory();
// use introspection to allow a new Factory to be set
try {
    Field field = LayoutInflater.class.getDeclaredField("mFactorySet");
    field.setAccessible(true);
    field.setBoolean(layoutInflater, false);
    getLayoutInflater().setFactory(new Factory() {
        @Override
        public View onCreateView(String name, final Context context, AttributeSet attrs) {
            View view = null;
            // if a factory was already set, we use the returned view
            if (existingFactory != null) {
                view = existingFactory.onCreateView(name, context, attrs);
            }
            // do whatever you want with the null or non-null view
            // such as expanding 'IconMenuItemView' and changing its style
            // or anything else...
            // and return the view
            return view;
        }
    });
} catch (NoSuchFieldException e) {
    // ...
} catch (IllegalArgumentException e) {
    // ...
} catch (IllegalAccessException e) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T10:34:49.490

你可以试试

```
LayoutInfalter inflater = getLayoutInflater.cloneInContext(this); 
```

然后用克隆的布局做你需要的事情

但我不知道您的 onCreateView 是否会以这种方式执行`

# java - 将单个字符串分成两个

> ID：12857008
> 
> 赞同：0
> 
> 时间：2012-10-12T10:21:12.413
> 
> 标签：java, string

我有一个`String`喜欢`test,test1`。我需要分别取出这两个字符串。我将如何阅读 test 和 test1 没有逗号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T10:22:31.883

您可以使用[`String#split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)：

```
String[] parts = yourString.split(","); 
```

`parts[0]`然后将包含`"test"`并将`parts[1]`包含`"test1"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T10:29:11.910

您可以使用 java.lang.String 类中定义的 split 函数或 StringTokenizer 函数。

示例 1：

```
 String s = "test1,test2";
 String[] strArr = s.split(","); 
```

上面的数组将有两个元素，值为 test1 和 test2。

示例 2：

```
StringTokenizer token = new StringTokenizer("test1,test2",",");

        while(token.hasMoreElements()){
            System.out.println(token.nextElement());
        } 
```

问候，贡扬。

# ruby - Ruby 和 SLIP（串行线路 Internet 协议）

> ID：12857013
> 
> 赞同：1
> 
> 时间：2012-10-12T10:21:29.353
> 
> 标签：ruby, windows, tcp, serial-port

有没有可以处理 SLIP 协议的 Ruby gem？我找不到一个。

如果没有，我想知道是否有一个 C 库可以用来制作这样的宝石。（类似于我记得使用相同方法的 serialport.gem）

我需要做的就是阅读并解释串行线路上接收到的内容，我不需要发送任何内容。

我的操作系统是 Windows。

# php - Symfony2 简单的结果缓存？

> ID：12857019
> 
> 赞同：2
> 
> 时间：2012-10-12T10:21:44.427
> 
> 标签：php, caching, symfony

我需要一个非常简单的 Symfony 中的键值缓存。类似的东西，没有任何 Doctrine 或 HTTP 缓存。

```
<?php
$cacheKey = 'blabla';
if(!$cache->has($cacheKey)) {
    // do some heavy work...
    $cache->set($cacheKey, $heavyWorkResult);
}
$result = $cache->get($cacheKey); 
```

我在手册中错过了它还是需要另一个捆绑包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:33:18.610

你为什么不谷歌？或者查看[knpbundles.com](http://www.knpbundles.com)并在那里搜索“缓存”：

[http://knpbundles.com/search?q=Cache](http://knpbundles.com/search?q=Cache)

也许这是您需要的东西：

[https://github.com/winzou/CacheBundle](https://github.com/winzou/CacheBundle)

**用法：**

```
$cache = $this->get('winzou_cache.apc');
// or
$cache = $this->get('winzou_cache.file');
// or
$cache = $this->get('winzou_cache.memcache');
// or
$cache = $this->get('winzou_cache.array');
// or
$cache = $this->get('winzou_cache.xcache');
// or
$cache = $this->get('winzou_cache.zenddata');
// or
$cache = $this->get('winzou_cache'); // in that case, it will use the default driver     defined in config.yml, see below

$cache->save('bar', array('foo', 'bar'));

if ($cache->contains('bar')) {
    $bar = $cache->fetch('bar');
}

$cache->delete('bar'); 
```

***编辑：***

为此使用会话不是一个好主意。会话是每个用户的，缓存的值不能共享。并且当您使用会话时，您必须考虑在会话中存储复杂对象时可能发生的序列化和其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T02:15:13.077

I think you can use [https://github.com/doctrine/cache](https://github.com/doctrine/cache) (the cache system used by doctrine now in standalone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T09:03:19.413

我使用了 LiipDoctrineCache，虽然它使用了 Doctrine 缓存，但它支持多种数据存储——包括文件系统和 APC。

[https://github.com/liip/LiipDoctrineCacheBundle](https://github.com/liip/LiipDoctrineCacheBundle)

以下是我如何使用它来缓存外部 API 响应：

```
$cache_driver = $container->get('liip_doctrine_cache.ns.YOUR_NAME');

if ($cache_driver->contains($cache_key)) {
   return $this->cache_driver->fetch($cache_key);
}

// Do something expensive here...

$cache_driver->save($cache_key, "Mixed Data", strtotime('4 hours')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T02:07:09.243

来自 Symfony 文档：

```
use Symfony\Component\HttpFoundation\Session\Session;

$session = new Session();
$session->start();

// set and get session attributes
$session->set('name', 'Drak');
$session->get('name'); 
```

[http://symfony.com/doc/master/components/http_foundation/sessions.html](http://symfony.com/doc/master/components/http_foundation/sessions.html)

# makefile - GNU make：干净的目标取决于包含

> ID：12857020
> 
> 赞同：14
> 
> 时间：2012-10-12T10:21:55.387
> 
> 标签：makefile, dependencies, gnu-make

我正在使用 gmake 并按照[手册](http://www.gnu.org/software/make/manual/html_node/Automatic-Prerequisites.html)`gcc -MM`跟踪标头依赖项。该机制依赖于 makefile指令来导入计算的依赖项。`include`

因为`.d`文件包含在 makefile 中，所以它们必须存在才能生成任何目标，包括`clean`. 因此，在`clean`做正确的事情之前，必须生成依赖关系，如果构建失败，那么`clean`只会变得更加混乱。

此外`clean`，它希望在构建任何目标之前生成所有依赖项。

此外，如果任何文件被更改为包含一个不存在的文件，那么依赖解析就会中断，并且什么都不会构建。

如果删除了标头，则现有的依赖文件仍然包含将其命名为目标，并且在删除有问题的依赖文件之前不会构建任何内容……这不能用`clean`.

用通配符替换替换模式`include`以包含所有预先存在的依赖文件可以解决一些问题，但它仍然无法清除损坏的依赖项，并且永远不会删除陈旧的依赖项文件。有更好的解决方案吗？手册中的示例真的是为了实际使用吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-12T10:56:25.660

只是不提供生成`.d`文件的规则。Paul Smith 的[“高级自动依赖生成”](http://mad-scientist.net/make/autodep.html) （GNU Make 的维护者）很好地解释了为什么它不那么好（包括你的情况） 。

简而言之，以下模式适用于所有情况：

```
CPPFLAGS += -MMD -MP

%.o: %.c
    $(CC) $(CPPFLAGS) $(CFLAGS) -o $@ -c $<

-include $(OBJS:.o=.d) 
```

另请参阅我之前的相关答案：

*   [GNU 制造。为什么要使用这种复杂的语法来生成依赖项？](https://stackoverflow.com/questions/10694403/gnu-make-why-this-complex-syntax-to-generate-dependencies/10700187#10700187)
*   [Makefile 改进，依赖项生成不起作用](https://stackoverflow.com/questions/10455480/makefile-improvements-dependency-generation-not-functioning/10456349#10456349)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-03T03:43:38.987

解决方案是使用[条件语法](https://www.gnu.org/software/make/manual/html_node/Conditional-Syntax.html)：

```
ifneq ($(MAKECMDGOALS), clean)
-include $(notdir $(SOURCES:.cpp=.d))
endif 
```

这使得干净的目标不会调用`*.d`目标，因为当您运行时`make clean`，`*.d`文件不会包含在 Makefile 中。

参考：[https ://www.gnu.org/software/make/manual/html_node/Goals.html](https://www.gnu.org/software/make/manual/html_node/Goals.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T10:52:35.687

我通常的模式看起来像

```
all: target
target: .depends

## [snip build rules]

.depends:
     gcc -MM $(CPPFLAGS) .... > $@

-include .depends 
```

注意`-include`而不是`include`. 基本上，它有条件地包括：即 iff 文件存在

请参阅文档：[http ://www.gnu.org/software/make/manual/make.html#Include](http://www.gnu.org/software/make/manual/make.html#Include)

# html - 如果用户没有字体，如何在网站上显示缅甸字符并在 MySQL 中记录它们？

> ID：12857021
> 
> 赞同：5
> 
> 时间：2012-10-12T10:22:05.787
> 
> 标签：html, mysql, unicode, fonts

我需要为缅甸的客户开发一个网站。该网站显然将使用缅甸语，他们希望机器上没有缅甸字体的人可以阅读该网站。

我知道维基百科设法在[这里做到了，](http://my.wikipedia.org/wiki/Talk%3a%E1%80%97%E1%80%9F%E1%80%AD%E1%80%AF%E1%80%85%E1%80%AC%E1%80%99%E1%80%BB%E1%80%80%E1%80%BA%E1%80%94%E1%80%BE%E1%80%AC#Enabling_the_web_fonts_extension_here)但我仍然没有找到如何做到的。

我是否必须使用他们的 HTML unicode 代码点编写缅甸字符？如果我提供 Unicode 代码点，我已经找到了一个能够显示缅甸字符的库，所以我想这是一个选项。

另一个问题是他们想在 MySQL 数据库中插入缅甸文本。我将如何存储它？在 MySQL 中使用哪种编码？那么如何在没有安装缅甸字体的机器上显示呢？

我希望我很清楚，不要太混乱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:02:51.683

问题中提到的维基媒体页面使用免费的[Tharlon 字体](http://code.google.com/p/tharlon-font/)作为可下载字体（通过`@font-face'）。它是一种 Unicode 编码的字体，因此您可以以 UTF-8 编码输入真正的缅甸字符。根据您的创作工具，您可能需要一些额外的实用程序来输入字符，例如 Windows 字符映射或我的[完整 Unicode 输入](http://www.cs.tut.fi/~jkorpela/fui.html8)实用程序（选择块缅甸）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:51:52.800

可以嵌入自定义字体，点击下面的链接

[通过 CSS 自定义字体](https://stackoverflow.com/questions/5985097/custom-font-via-css)

存储缅甸语，你可以在你的 SQL 中使用 nvarchar 或 ntext 或类似的数据类型来存储

它将按原样存储并按原样呈现。

# ruby-on-rails - 如何检查查询是否返回结果？

> ID：12857023
> 
> 赞同：0
> 
> 时间：2012-10-12T10:22:25.393
> 
> 标签：ruby-on-rails, foursquare

我正在使用 Rails 3.2，并从 Foursquare 获取场地。我需要检查我返回的任何场地 ID 是否已在我的数据库中注册，然后返回该数组。我尝试以这种方式进行操作，但是对于所有不存在的场所，我得到了 nil （在数组中）。我的代码有什么问题，有没有更好的方法可以做到这一点，这样我就不必进行 20 次查询（每个 FQ 场地的数据库查询一次）。

```
def index
    client = Foursquare::Base.new(CLIENT_KEY, SECRET_KEY)
    @venues = client.venues.search(:ll => "-33.8670522, 151.1957362")

    output = @venues["nearby"].collect do |venue|
      account = Account.find_by_fq_venue (venue.id) if account.present?
    end

    render :json => output, :status => :success
  end 
```

**更新**

我最终像这样解决它：

```
client = Foursquare::Base.new(CLIENT_KEY, SECRET_KEY)
    venues = client.venues.search(:ll => "-33.8670522, 151.1957362")
    ids = venues["nearby"].collect { |venue| venue.id }
    @output = Account.find_all_by_fq_venue (ids)
    render :json => @output, :status => :success 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:26:52.020

改变

```
account = Account.find_by_fq_venue (venue.id) if account.present? 
```

到

```
account = Account.find_by_fq_venue (venue.id) if Account.find_by_fq_venue (venue.id) 
```

我只是在解释为什么`account`在分配给它的值之前使用它是错误的，因此你的 if 条件总是不满足，你得到一个 nil 的 aary。

更好的方法是改变

```
output = @venues["nearby"].collect do |venue|
  account = Account.find_by_fq_venue (venue.id) if account.present?
end 
```

到

```
output = Account.find(:all, 
                 :conditions =>["fq_venue IN (?)", @venues["nearby"].map(&:id) ]) 
```

对于 Rails 3

```
output = Account.where(["fq_venue IN (?)", @venues["nearby"].map(&:id) ]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:55:03.740

嗨，你试试这个。

帐户=[]

```
output = @venues["nearby"].collect do |venue|
  account << Account.find_by_fq_venue (venue.id) if !venue.id.nil?
end 
```

现在在帐户数组中，您将获得所有行。

——维吉库马尔。

# iphone - 不将数据放入我的核心数据数据库

> ID：12857026
> 
> 赞同：0
> 
> 时间：2012-10-12T10:22:46.220
> 
> 标签：iphone, objective-c, ios, core-data, entity

我有一个网络服务，它按以下顺序返回数据。

```
 "club": {
       -"trainingen": [

            {
                "date": "12/10/2012",
                "training": [
                    {
                        "type": "Wedstrijd B-kern Bergen-KRC Genk",
                        "time": "19:30"
                    }
                ]
            },
            {
               {

    "date": "16/10/2012",
    "training": [
        {
            "type": "Training",
            "time": "10:00"
        },
        {
            "type": "Training",
            "time": "14:30"
        }
    ]

},
            }, 
```

在我的核心数据数据库中，我进行了实体培训。带有属性：日期，属性：类型和属性：时间。我创建了这个实体的一个子类和一个类别来将它存储到我的数据库中。为了获取网络服务 url，我正在执行以下操作。

```
+ (NSArray *)getTrainingen
{
    NSString *request = [NSString stringWithFormat:@"http://www.krcgenk.be/mobile/json/request/club/type/ipad"];
    return [[self executeGenkFetch:request] valueForKeyPath:@"club.trainingen"];
} 
```

我像这样在顶部定义了我的价值观。

```
#define TRAINING_TYPE @"training.type"
#define TRAINING_DATE @"date"
#define TRAINING_TIME @"training.time" 
```

在我的类别中，我正在执行以下操作。

```
+ (Training *)trainingWithGenkInfo:(NSDictionary *)genkInfo
            inManagedObjectContext:(NSManagedObjectContext *)context
                         withIndex: (int)index;
{
    Training *training = nil;

    training = [NSEntityDescription insertNewObjectForEntityForName:@"Training"
                                          inManagedObjectContext:context];

    training.type          = [[[genkInfo objectForKey:@"training"] objectAtIndex:index] objectForKey:@"type"];
    training.time          = [[[genkInfo objectForKey:@"training"] objectAtIndex:index] objectForKey:@"time"];
    training.date          = [genkInfo objectForKey:TRAINING_DATE];

    NSLog(@"type: %@", training.type);
    NSLog(@"time: %@", training.time);

    return training;
} 
```

但它一直为上面的 NSLogs 提供（null）。

有人可以帮忙吗？

亲切的问候。

***编辑*** 一天也有可能进行不止一次的培训。我试过这个，但得到一个错误。

```
 int trainingIndex = -1;
     for (NSDictionary *genkInfo in trainingen ) {
          trainingIndex++;         
 [Training trainingWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext withIndex:trainingIndex];

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:58:50.587

您似乎使用[键值编码](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/BasicPrinciples.html)来访问`genkInfo`字典，例如使用*键路径*“training.type”。在这种情况下，您必须使用，`valueForKeyPath:`而不是`objectForKey:`，例如

```
training.type = [genkInfo valueForKeyPath:TRAINING_TYPE]; 
```

**编辑：**正如我现在所看到的，*培训*是一个数组。据我所知，您无法通过键值编码访问数组（但我对此不是 100% 确定）。在任何情况下，您都可以使用

```
training.type = [[[genkInfo objectForKey:@"training"] objectAtIndex:0] objectForKey:@"type"] 
```

**编辑 2：（**这是指您更新的代码。）您需要 2 个循环：trainingen 数组的外循环*和*字典中*训练*数组的内循环。这应该大致是这样的（可能有错别字或错误，因为我实际上并没有运行这段代码）：

```
for (NSDictionary *genkInfo in trainingen) {
    NSArray *training = [genkInfo objectForKey:@"training"];
    for (int i = 0; i < training.count; i++) {
        [Training trainingWithGenkInfo:genkInfo
                inManagedObjectContext:document.managedObjectContext
                             withIndex:trainingIndex];
    }
} 
```

这可能不是最佳代码，但您应该能够找到这样的解决方案。

*备注：*如果某些事情不起作用并且您收到错误消息，那么您应该将确切的错误消息添加到您的问题中，并在代码中找到消息出现的位置。这让其他人更容易帮助你。

# matlab - 如何在 Matlab 中绘制不等式的解决方案

> ID：12857030
> 
> 赞同：4
> 
> 时间：2012-10-12T10:23:06.530
> 
> 标签：matlab, plot

> **可能重复：**
> [如何在 matlab 上绘制 3d 不等式](https://stackoverflow.com/questions/12476447/how-to-plot-3d-inequalities-on-matlab)

我在绘制以下不等式的解决方案时遇到问题

```
S(c,delta,xT)-S(2,1,1)>=0

while 0<c<4, 1<delta<3, f(c,delta)<xT<1. 
```

我想要一个 3 维图来显示哪些三元组 (c,delta,xT) 满足这一点。我试过使用`isosurface`，但我似乎只得到平等的解决方案。

**编辑**

我努力了

```
[xT, delta, c] = meshgrid(0.8:.01:1, 1:.1:3, 0:.1:4);
values = calc.S0Func(2,1, 1)- calc.S0Func(c,delta, xT);            
patch(isosurface(c, delta, values, values, 0), 'FaceColor', 'red');
view(3); 
```

但我只得到满足平等问题的值的图。我希望所有值都满足不等式。

# .htaccess - 使用 .htaccess 文件的子域的虚拟主机

> ID：12857032
> 
> 赞同：1
> 
> 时间：2012-10-12T10:23:24.443
> 
> 标签：.htaccess, virtualhost

我已经在网站上上传了我的产品的源代码。

我的网站名称是例如：- testcoder.com

现在......问题是我有很多客户我想为他们提供服务，但他们希望有域名需要

client1.testcoder.com client2.testcoder.com

我也创建了一个子域，但基本的事情是所有客户端的代码都是相同的，所以我所做的就是将我的代码保存在

code.testcoder.com

现在我想要 .htaccess 虚拟主机，即使客户端也使用

“client1.testcoder.com”浏览器需要从“code.testcoder.com”提供代码，同样“client1.testcoder.com/test1.php”需要是“code.testcoder.com/test1.php” “……

我只想从 .htaccess 执行此操作，因为我正在使用共享主机....

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:55:00.847

你不需要做任何事情。只需确保所有子域都使用与域相同的文档根`code.testcoder.com`。你不需要在 htaccess 中做任何特别的事情，除非你有现有的规则来重写为主机硬编码的规则：`code.testcoder.com`

# xcode - xcode 测验应用程序：如何不重复一个任务。来自 plist 文件

> ID：12857035
> 
> 赞同：0
> 
> 时间：2012-10-12T10:23:38.950
> 
> 标签：xcode

我有 iPhone 的测验应用程序，我可以从 plist 文件中加载随机问题，我想问大约 20 个问题；在我的 plist 文件中，我还有 20 个，但我不希望在一次测验中重复一个问题。这是我的 plist 文件`

```
<key>Domanda1</key>

    <dict>

    <key>immagine</key>

    <string>hpv</string>

    <key>Titolo</key>

    <string>Domanda numero 1</string>

    <key>Risposta1</key>

    <string>Risposta primaD1</string>

    <key>Risposta2</key>

    <string>Risposta seconda</string>

    <key>Risposta3</key>

    <string>Risposta terza</string>

    <key>Risposta4</key>

    <string>Risposta quarta</string>

    <key>Soluzione</key>

    <integer>1</integer>

</dict>

<key>Domanda2</key> 
```

.......`我的视图控制器.m

```
-(void)creaDomanda {

//scelta casuale tra le varie disponibili

int randomValue =  (arc4random() % 20) + 1;

NSString *stringa = [NSString stringWithFormat:@"Domanda%i", randomValue];

// Apre il dictionary

dictionary = [plistData objectForKey:stringa]; 

// e stampa a schermo la domanda

label1.text = [dictionary valueForKey:@"Titolo"];

label1.textColor = [UIColor redColor]; 
```

…………

有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:57:49.887

创建一个可变数组并按数字顺序将您的问题复制到其中。使用随机值从数组中选择问题。当您提出问题时，将其从阵列中移除。要生成新的随机值，请使用仍在数组中的项目数而不是“20”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:32:16.620

试试这个。但我做了 20 个随机数。

```
NSMutableArray *array = [[NSMutableArray alloc] init];
BOOL isflag = NO;
int numberofquestions = 20;

for(int m =0; m<numberofquestions; m++)
{

    int question_number = (arc4random()%numberofquestions)+1;
    isflag = YES;

    for(int n = 0;n < (int)[array count];n++)
    {
        if([[array objectAtIndex:n] intValue] == question_number)
        {
            isflag = NO;
            m--;
            break;
        }
    }

    if(isflag == YES)
    {
        [array addObject:[NSString stringWithFormat:@"%d", question_number]];
    }
} 
```

该数组将为您提供 20 个不重复的随机数。

# maven - Maven多模块问题与依赖层次结构中的工件

> ID：12857038
> 
> 赞同：1
> 
> 时间：2012-10-12T10:23:50.260
> 
> 标签：maven, apache-poi, multi-module

我有一个 Maven 多模块项目。之前我需要 Apache POI 库，但现在我必须删除它们。我从 pom 文件中删除了依赖节点。在父项目中一切正常，但在依赖层次结构中的模块 pom 文件中 POI 仍然可见，但在已解决的依赖项中不可见（在带有 m2p 的 eclipse IDE 中）。如何从依赖层次结构中的模块项目中删除 POI？

我尝试清理 m2p 缓存并在 settings.xml 中更改 updatePolicy，但它不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:44:23.123

首先从命令行检查：`mvn dependency:tree`

查看依赖项是否由组件带来。

如果您看不到它，只需在 Eclipse 中刷新/构建/清理您的项目以清理任何缓存问题。

# c++ - 无法从

> ID：12857047
> 
> 赞同：2
> 
> 时间：2012-10-12T10:24:50.250
> 
> 标签：c++, templates, c++11

它适用于`struct RS : public JV<T,1>`但不适用于`struct RS : public JV<T,2>`.

```
error: could not convert ‘{(0, j), (0, j)}’ from ‘&lt;brace-enclosed initializer list>’ to ‘WJ<float>’ 
```

我必须超载`operator,()`吗？代码：

```
#include<iostream>

struct B {};

template <std::size_t... Is>
struct indices {};

template <std::size_t N, std::size_t... Is>
struct build_indices
  : build_indices<N-1, N-1, Is...> {};

template <std::size_t... Is>
struct build_indices<0, Is...> : indices<Is...> {};

template<class T,int N>
struct JV {

  JV(B& j) : JV(j, build_indices<N>{}) {}
  template<std::size_t... Is>
  JV(B& j, indices<Is...>) : jit(j), F{{(void(Is),j)...}} {}

  B& jit;
  T F[N];
};

template<class T>
struct RS : public JV<T,2>
{
  RS(B& j): JV<T,2>(j) {}
};

template<class T>
struct WJ
{
  WJ(B& j) {
    std::cout << "WJ::WJ(B&)\n";
  }
};

int main() {
  B j;
  RS<WJ<float> > b2(j);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:43:25.350

`{}`如果要使用普通数组，则需要删除多余的部分`F{(void(Is),j)...}`。或者改成`std::array<T, N> F`你说的。

但是，普通数组仅`{}`用于初始化，并且`std::array`是包含数组的聚合，因此它使用双括号。

请参阅[将 std::array 与初始化列表一起使用](https://stackoverflow.com/questions/8192185/using-stdarray-with-initialization-lists)以获得更好的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:45:26.060

你的问题是额外的一对`{}`牙套。改变

```
 JV(B& j, indices<Is...>) : jit(j), F{{(void(Is),j)...}} {} 
```

至

```
 JV(B& j, indices<Is...>) : jit(j), F{(void(Is),j)...} {} 
```

它工作正常。

它使用的原因`std::array`是*包含*实际数组`array`的聚合：

 *```
// from 23.3.2.1 [array.overview]
namespace std {
  template<typename T, int N>
  struct array {
...
    T elems[N];    // exposition only 
```

因此，要初始化，与初始化*实际*数组`array`相比，需要额外的一对大括号。gcc 允许您省略额外的大括号，但抱怨：

 *```
 std::array<int, 3>{1, 2, 3}; 
```

> 警告：'std::array::value_type [3] {aka int [3]}' [-Wmissing-braces] 的初始化器周围缺少大括号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:41:10.887

更换

```
 T F[N]; 
```

和

```
 std::array<T,N> F; 
```

成功了！它似乎`std::array`可以做的不仅仅是 C 数组。**

# c# - MSMQ 服务未读取队列

> ID：12857051
> 
> 赞同：2
> 
> 时间：2012-10-12T10:25:01.523
> 
> 标签：c#, .net, msmq

我正在使用 MSMQ Web 服务从队列中读取数据并将其存储在数据库中。目前我正在使用 Visual Studio 2010 运行该服务（这是问题吗？）。代码片段如下。

合同

```
[ServiceContract]
public interface IService1
{
    [OperationContract(IsOneWay = true,Action="*")]
    void DOWork(MsmqMessage<Param> p);
} 
```

执行

```
public class Service1:IService1
{
    [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
    public void DoWork(Param p)
    {
        new Service1BL().DoWork(p);
    }
} 
```

配置

```
<service name="NameSpace.Service1" behaviorConfiguration="MSMQServiceBehavior">
                <endpoint address="net.msmq://localhost/private/Service1" binding="netMsmqBinding" bindingConfiguration="PoisonBinding" contract="IService1"/>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
            </service>

<behavior name="MSMQServiceBehavior">
    <serviceDebug includeExceptionDetailInFaults="true"/>
    <serviceMetadata httpGetEnabled="True"/>
   </behavior>

<netMsmqBinding>
                <binding name="PoisonBinding" receiveRetryCount="1" maxRetryCycles="5" retryCycleDelay="00:00:05" receiveErrorHandling="Fault">
                    <security mode="None"/>
                </binding>
            </netMsmqBinding> 
```

附加信息

*   我尝试过使用不同的队列名称。像 .\Private$\Service1 和 .\Private$\Service1.svc

    *   消息队列、消息队列触发器、Net.Msmq Listner 适配器和 WAS 服务正在运行
    *   我明确地将消息插入队列

--

```
MessageQueue queue = new MessageQueue(@".\private$\service1");
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required))
{
   queue.Send(p, MessageQueueTransactionType.Single);
   queue.Close();
   scope.Complete();
} 
```

原因是，我正在从另一个 Web 服务调用 MSMQ Web 服务。当我调用 MSMQ 服务时，它不是将消息插入队列，而是调用 MSMQ 服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:16:04.203

检查队列名称格式的拼写。

代替

```
MessageQueue queue = new MessageQueue(@".\private$\service1"); 
```

你应该试试这个：

```
MessageQueue queue = new MessageQueue(@"FormatName:DIRECT=OS:YOURMACHINENAME\private$\service1"); 
```

... 当然，其中 YOURMACHINENAME 需要替换为保存队列的机器的名称。:-)

请注意，第一部分**区分大小写**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T21:25:31.060

我相信这也会起作用（将您的单反斜杠更改为双反斜杠）。而且您不需要使用机器名称（因此，当您将其从本地盒子移动到任何地方时，您无需更改代码）。

```
MessageQueue queue = new MessageQueue(@".\\private$\\service1") 
```

# c# - 将图像文件从我的计算机上传到 Google Drive 帐户

> ID：12857053
> 
> 赞同：0
> 
> 时间：2012-10-12T10:25:21.960
> 
> 标签：c#, .net, google-drive-api

我正在使用 Google drive Api 在 c# .net 中制作桌面应用程序。我想在谷歌驱动器中创建文件夹，并想从我的计算机上传图像到该文件夹​​，请回复我，因为我是谷歌驱动器的新手，等待回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:23:28.360

您需要知道的一切都在[https://developers.google.com/drive/](https://developers.google.com/drive/)

具体来说，您将使用[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

# javascript - 检查表单输入是否已填充并隐藏/取消隐藏 div 元素

> ID：12857054
> 
> 赞同：0
> 
> 时间：2012-10-12T10:25:23.150
> 
> 标签：javascript, jquery, datepicker

我在隐藏/取消隐藏`div`元素时遇到了一些问题。我有`input`由 datepicker 填充的元素。如果该`input`元素为空（始终在开始），`div`则应隐藏该元素。我有这个代码：

```
$("#input#date_from").keyup(function () {
   if ($(this).val()) {
      $("#return_section").show();
   }
   else {
      $("#return_section").hide();
   }
}); 
```

但它没有用。元素还是可见的`div`，不知道问题出在哪里？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:27:56.667

您在选择器的开头有一个额外`#`的，当您选择`input`元素时不需要它，而不是带有`id`“输入”的元素。试试这个：

```
$("#date_from").keyup(function () {
   if ($(this).val()) {
      $("#return_section").show();
   }
   else {
      $("#return_section").hide();
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:58:20.447

如果`#date_from`输入由日期选择器填充，则最好使用它来`change()`代替`keyup()`它监视输入值的变化，而不是键盘敲击。我还将明确检查输入字段是否为空。

```
$("#date_from").change(function () {
    if ($(this).val() !== '') {
        $("#return_section").show();
    }
    else {
        $("#return_section").hide();
    }
}); 
```

# java - 验证输入日期

> ID：12857059
> 
> 赞同：0
> 
> 时间：2012-10-12T10:25:53.417
> 
> 标签：java, android

朋友我有一个包含日期记录的字符串

```
10-Oct-2012 @12-Oct-2012 @$12-Oct-2012 @12-Oct-2012 @$12-Sept-2012 13:50@12-Oct-2012 13:50@$12-Feb-2012 13:50@12-Oct-2012 13:50@$ 
```

表示成对的记录，显示到达和部门日期。我需要以这样一种方式验证此日期，即如果要输入的日期位于已经存在的周期中，则不得添加该日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:41:11.687

您可以使用“@”分割日期，然后使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)将字符串转换为日期。将日期放在 a 中`ArrayList`，然后检查它是否 ArrayList 已经包含日期。

但是，如果这就是您所需要的，您甚至可能不需要将字符串转换为日期，为什么不直接拆分字符串并添加一个 ArrayList 然后比较它们呢？

如果我能看到更多您的代码，我将不胜感激。

# python - 不断检查目录中的新文件

> ID：12857063
> 
> 赞同：0
> 
> 时间：2012-10-12T10:26:06.500
> 
> 标签：python, multithreading, directory

我需要编写一个程序，它不断检查目录中的新文件，并在添加新文件时进行一些处理。显然我可能需要使用一些线程，但是有没有任何人可以建议在 python 中实现这一点的方便方法或指针？（适用于 linux 和 windows）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:30:59.103

“忙碌”的轮询是对资源的浪费。有许多不同的、依赖于操作系统的 API 允许这种监控。

您的一些选择（对于 Linux）包括：

> python-inotifyx - 简单的 Python 绑定到 Linux inotify
> 
> python-pyinotify - 简单的 Linux inotify Python 绑定
> 
> python-gamin - 用于 gamin 客户端库的 Python 绑定

# objective-c - 为什么带有属性的 createDirectoryAtPath 不起作用

> ID：12857065
> 
> 赞同：1
> 
> 时间：2012-10-12T10:26:14.517
> 
> 标签：objective-c, macos, cocoa

在 OS X 桌面应用程序中

```
NSFileManager *manager = [NSFileManager defaultManager];

NSDictionary *dirMeta = [NSDictionary dictionaryWithObjectsAndKeys:@"jack", @"creator", nil];
NSLog(@"%@", [dirMeta objectForKey:@"creator"]);//output jack

[manager createDirectoryAtPath:@"/Users/loki/Desktop/fromCap" withIntermediateDirectories:YES attributes:dirMeta error:NULL];

NSDictionary *attri2 = [manager attributesOfItemAtPath:@"/User/loki/Desktop/fromCap" error:nil];
NSLog(@"value is %@", [attri2 objectForKey:@"creator"]);//output null 
```

我是否错误地使用了 createDirectoryAtPath？为什么 attri2 没有从目录中获取任何数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:37:36.177

*属性*字典用于指定新目录/文件的文件系统属性：

> attributes 新目录和任何新创建的中间目录的文件属性。您可以设置所有者和组编号、文件权限和修改日期。如果您为此参数指定 nil 或省略特定值，则会使用一个或多个默认值，如讨论中所述。有关可以包含在此字典中的键列表，请参阅“常量”部分列出了在属性字典中用作键的全局常量。某些键，例如 NSFileHFSCreatorCode 和 NSFileHFSTypeCode，不适用于目录。

它们不适用于附加任意元数据。您认为这些元数据无论如何都会存储在哪里？

# mysql - 有没有办法一次设置mysql数据库中所有列的默认值？

> ID：12857067
> 
> 赞同：1
> 
> 时间：2012-10-12T10:26:19.740
> 
> 标签：mysql, sql

有没有办法在单个查询中一次设置所有列（int）默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:28:37.840

是的

```
ALTER TABLE table_name
    ALTER COLUMN column_name datatype DEFAULT value 
```

一个 int 的例子

```
ALTER TABLE table_name
    ALTER COLUMN column_name int DEFAULT 0; 
```

如果您实际上想将表中的所有值更改为一个值，请使用：

```
UPDATE table_name
    SET column_name = value; 
```

如果您想更改列名的所有具有 old_value 到 new_value 的条目：

```
UPDATE table_name
    SET column_name = new_value 
    WHERE column_name = old_value; 
```

请更清楚地表述你的问题。

# sencha-touch - 让 Sencha Touch 在 PlayBook 模拟器中工作？

> ID：12857068
> 
> 赞同：1
> 
> 时间：2012-10-12T10:26:22.920
> 
> 标签：sencha-touch, extjs, vmware, playbook, ripple

我一直在成功运行 Sencha Touch Webworks playbook 应用程序。我在 riple 和 VMware 上进行了测试，一切都很酷。但是，在启动画面之后我开始出现白屏并且没有错误日志并且真的很沮丧。任何重新设置的努力都是徒劳的，不知道该怎么做，这几乎结束了，我什至已经将版本 1 发送到 appworld 但现在我无法调试。有趣的是，在涟漪中，一切都按预期运行。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:21:48.203

您是否尝试过使用 Web Inspector？它是一个很好的调试问题的工具，就像这个一样。欲了解更多信息，请访问

[https://developer.blackberry.com/html5/documentation/getting_started_webinsp_microsite_1987477_11.html](https://developer.blackberry.com/html5/documentation/getting_started_webinsp_microsite_1987477_11.html)

提示：一旦一切就绪并运行，Web Inspector 控制台窗口中的 CTRL+R 将重新启动应用程序（这样您就可以在应用程序启动时看到错误）。

# c - sprintf 崩溃

> ID：12857069
> 
> 赞同：1
> 
> 时间：2012-10-12T10:26:24.043
> 
> 标签：c, printf, format-specifiers

```
 int main()
 {
     char buf1[100], buf[100]="ddl";

     sprintf(buf1, "log_name = '%.*s'", buf);
  } 
```

上面的程序崩溃了。我无法理解为什么会崩溃。据我所知，在字符`printf`跳过格式代码并将 buf 分配给下一个格式代码之前。但是这里有什么意义呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:30:13.497

格式说明符`"%.*s"`要求指定要写入的字符数：

```
sprintf(buf1, "log_name = '%.*s'", 3, buf); /* For example */
                                /* ^ */ 
```

仅在发布的代码`buf`中提供了缺少参数，这是未定义的行为（在这种情况下为崩溃）。

请注意，在这种情况下，`"%s"`将与空终止一样提供服务`buf`（不需要长度*，除非*`buf`不得复制其中的所有字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:36:22.767

你可以看到这样的效果如下。

```
int main()
{   
printf("%.*s",13,"stackoverflow rocks");
} 
```

这只会给你`stackoverflow`。

# c# - 突出显示 CrystalReport 2008 中低于平均值的值

> ID：12857071
> 
> 赞同：0
> 
> 时间：2012-10-12T10:26:44.167
> 
> 标签：c#, asp.net, crystal-reports

下面是我在 VS2008 中的水晶报表的图像。我想突出显示低于总值平均值的值（红色）。像“AAG”的总值为 1551，10 天的平均值为 1551/10 = 155.1。现在哪个日期的值低于 155 应该以红色突出显示（150,143,148,129,142）。我怎样才能做到这一点？

![在此处输入图像描述](../Images/c4014226ad4bf55c052ed74c0d3c9a14.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:47:11.080

检查以下

1）转到格式对象->边框选项卡->背景公式字段

粘贴这个公式

```
IF GridRowColumnValue ("Table.Total")  < 1550
then color(150,143,148,129,142)    
else crWhite 
```

# eclipse - 蚂蚁任务“sshexec”，如何在控制台打印远程消息？

> ID：12857076
> 
> 赞同：2
> 
> 时间：2012-10-12T10:27:10.967
> 
> 标签：eclipse, ant, eclipse-plugin, console

我在eclipse中开发了一个插件，这个插件应该叫 ant task `sshexec`。问题是如何在 Eclipse 控制台中打印远程消息？

我的代码如下：

```
 Project p = new Project(); 

 MessageConsole console = new MessageConsole("building", null); 
 IConsoleManager manager = (IConsoleManager) ConsolePlugin.getDefault().getConsoleManager(); 
 manager.addConsoles(new IConsole[] { console }); 
 manager.showConsoleView(console); 

 MessageConsoleStream cs = console.newMessageStream(); 
 cs.setColor(Display.getDefault().getSystemColor(SWT.COLOR_BLUE)); 
 PrintStream ps = new PrintStream(cs); 

 final DefaultLogger consoleLogger = new DefaultLogger(); 
 consoleLogger.setErrorPrintStream(ps); 
 consoleLogger.setOutputPrintStream(ps); 
 consoleLogger.setMessageOutputLevel(Project.MSG_INFO); 

 p.init(); 
 p.addBuildListener(consoleLogger); 
 ProjectHelper helper = ProjectHelper.getProjectHelper(); 
 helper.parse(p, buildFile); 

 p.executeTarget(p.getDefaultTarget()); 
```

执行 sshexec 目标进行编译时，我总是得到如下输出消息

```
[sshexec] cd ...; ls ...; .... 
```

它只打印我写的命令，但远程机器的编译消息无法在控制台打印。并且一旦在编译过程中出现错误，它仍然成功返回构建。
如何在控制台中打印远程消息并获得错误结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:15:40.147

好的，我只是用另一种方式解决这个问题。我使用 process=Runtime.getRuntime().exec("java -jar ant-launcher.jar -f build.xml") 来执行ant任务。但是记得启动两个线程来读取process.getInputStream()和process.getErrorStream()。

# c# - 本地文件夹的大小限制？

> ID：12857077
> 
> 赞同：4
> 
> 时间：2012-10-12T10:27:13.643
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我的 C#/XAML WinRT 应用程序`ApplicationData.LocalFolder`用于存储数据。我想知道这个文件夹是否有任何大小限制。我在 web/MSDN 上没有找到任何信息……这个文件夹的大小是否有限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:49:23.640

您可以在[http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)上的文档中阅读：

> 存储的本地数据没有一般大小限制。

# c# - 添加 Microsoft.Visual Basic 的引用并使用 C# 中的函数是否可以

> ID：12857079
> 
> 赞同：0
> 
> 时间：2012-10-12T10:27:27.373
> 
> 标签：c#, vba, vb6-migration

一个普遍的问题。添加对 C# 的引用`Microsoft.Visualbasic`并在 C# 中使用是否被认为可以，还是会减慢我们的网站速度？

VB有类似的功能`Strings.Format`。

我现在正在将大量代码从 VBA 转换为 C#，而且时间紧迫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:29:39.120

是的，没关系。

中的程序集`Microsoft.VisualBasic`符合 CLS，并且可以安全地与任何 .NET 语言一起使用。

请注意，VBA、VB6 和 VB.NET 之间的某些功能略有不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:31:30.523

我想说你可以使用这些方法，但你应该知道 C# 中的等效代码将非常简单且易于编写。

例如，与主 .NET String 类（VB 或 C#）上`Strings.Format`更广泛使用的可用几乎完全相同。`String.Format`

`String.Chr`将导致相同的结果`(char)intValue`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:44:11.993

如果你时间不够，那么你认为你不能正确地完成工作，那么就不要投入工作。要求更多的时间或资源。但我会说不要使用 MS.VB 参考。使用您正在使用的 C# 或 VB.Net。

# c - 什么功能包括图书馆？

> ID：12857080
> 
> 赞同：2
> 
> 时间：2012-10-12T10:27:29.357
> 
> 标签：c, linux, linker, makefile

`libXX.so`是否有手册或方法可用于从标题 YYY.h中找出哪个文件包含函数等？

例如：

我在里面包含了一个带有函数 foofunk() 的头文件 foo.h。但是链接器说未定义对 foofunk() 的引用。

笔记：

我想使用 Makefile 进行构建和链接过程。(GCC) 我的资源是用 C 语言编写的，但这应该不重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T10:31:07.410

使用[objdump](http://linux.die.net/man/1/objdump)。

```
objdump -T library.so | grep ' Base ' | grep ' function_name$' 
```

现在遍历您怀疑定义给定函数的共享库并使用 objdump 检查每个共享库。

```
for f in /usr/lib/lib*.so; do \
  objdump -T $f | grep ' Base ' | grep -q ' function_name$' && echo $f && break
done 
```

`break`如果您在找到您要查找的库的情况下仍想继续搜索，请删除。

在静态库的情况下，用 s 替换`-T`并`-t`删除其中一个`grep`。

```
objdump -t library.a | grep ' function_name$' 
```

# android - 安卓屏幕尺寸分辨率

> ID：12857081
> 
> 赞同：0
> 
> 时间：2012-10-12T10:27:30.360
> 
> 标签：android, xml, screen-size

我已经为屏幕尺寸分辨率 480x800px 制作了一个应用程序（我在 drawable-hdpi 文件夹中有我所有的布局和 ImageButtons，我使用了 dp 而不是 px），在 xml 中我使用 layout_marginLeft 和 marginTop 来放置所有按钮和所有内容.. 当我在 480x800 的模拟器中运行我的应用程序时，它是完美的，但如果我改变屏幕尺寸和分辨率，所有按钮都会改变屏幕上的位置和尺寸。我很沮丧，因为我不知道该怎么做才能使它适合所有的屏幕尺寸和分辨率？有小费吗？

我应该在不同的文件夹中使用哪些不同的尺寸？我在 hdpi 中有 480x800，我应该在 xhdpi 中有什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:51:24.660

其实很简单。你只需要添加不同尺寸的布局，让android选择最适合的。eg-layout-small(适用于小屏),layout-large(适用于大屏)等。也将图片放在所有三个文件夹(drawable-hdpi,drawable-ldpi,drawable-mdpi),以便android可以根据屏幕进行选择尺寸。只需参考[http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T10:32:07.283

您必须为不同的屏幕维护不同的布局。例如：

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

在 manifest.xml 中添加这个

```
<supports-screens android:smallScreens="true" 
      android:normalScreens="true" 
      android:largeScreens="true"
      android:xlargeScreens="true"
      android:anyDensity="true" /> 
```

检查此链接：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

为了获得最佳的 UI 设计，您应该维护相对布局而不是 LinearLayout。

看到这个：

例如：您要显示一张图像。那么，现在您需要为不同的屏幕保持不同尺寸的相同图像。

```
36x36 for low-density
48x48 for medium-density
72x72 for high-density
96x96 for extra high-density 
```

3:4:6:8 缩放比例

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T10:32:58.197

如果我能看到一些代码，我将不胜感激。

如果您使用dp（密度像素）中`RelativeLayout`的属性和边距，例如它应该可以正常工作。`android:layout_below``android:layout_marginTop="10dp"`

[你可以在这里看到一个例子。](http://www.mkyong.com/android/android-relativelayout-example/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T10:34:51.153

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。 [http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)。检查链接的。

# ruby-on-rails - Rails 将对象链接到其类别页面

> ID：12857082
> 
> 赞同：1
> 
> 时间：2012-10-12T10:27:31.490
> 
> 标签：ruby-on-rails, ruby, routes

我有一个包含标题、正文、作者和类别字段的文章模型。所有文章都按其类别分组，这意味着我有 6 个页面，例如“新闻”、“公告”、“体育”等。

我如何从其显示页面链接到文章类别页面？

文章控制器.rb

```
def news
      @articles = Article.paginate(page: params[:page], per_page: 7).where(category: "News")
    end 
```

耙路线和路线.rb

```
 news        /news(.:format)                                   articles#new

match '/news', controller: "articles", action: "news" 
```

关联

```
<b><%= link_to @article.category, @article.category_path?? %></b> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:15:21.450

With rails 2

```
#routes.rb
map.news       'news',     :controller => "Articles", :action => "news"
map.bulletin   'bulletin', :controller => "Articles", :action => "bulletin" 
```

This will give your `news_path` or `bulletin_path`. In a particular function, you can load the `article_category` as well as all its articles.

Make a helper method `category_path` like below

```
def category_path(article)
    return eval("#{article.category.downcase}_path")
end 
```

and links like

```
<%= link_to @article.category, category_path(@article) %> 
```

# wpf - 登录后如何关闭DialogWIdow并显示主窗口？

> ID：12857083
> 
> 赞同：0
> 
> 时间：2012-10-12T10:27:34.470
> 
> 标签：wpf, xaml

我有一个登录窗口和一个主窗口。现在，我想在成功登录后关闭登录窗口，然后我的主窗口应该打开。但到目前为止，我的两扇窗户都打开了，这让我很恼火。

我在 app.xaml 后面的代码中尝试了下面的代码，但它关闭了整个应用程序......

```
DataRepository repository = new DataRepository();
ViewModelPassword viewModelPassword = new ViewModelPassword(repository);

passwordDialog passwordDialog = new PasswordDialog();
passwordDialog.DataContext = viewModelPassword;

viewModelPassword.RequestClose += (s, ee) => passwordDialog.Close();
passwordDialog.ShowDialog();

Mainviewmodel viewModel = new Mainviewmodel (repository, viewModelPassword.Login);
MainWindow window = new MainWindow();

window.DataContext = viewModel;
window.Show();

base.OnStartup(e); 
```

登录命令启动成功登录后，我想显示主窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:58:23.277

您甚至在运行启动代码之前都显示了两个窗口，因此在应用程序启动时两个窗口都显示。

这是我通常用于此场景的代码：

```
protected override void OnStartup(StartupEventArgs e)
{
    // Run startup code first
    base.OnStartup(e); 

    // Create Login Window and Show it
    var login = new LoginDialog();
    var loginVm = new LoginViewModel();

    login.DataContext = loginVm;
    login.ShowDialog();

    // If login window didn't return true (login failed), exit application
    if (!login.DialogResult.GetValueOrDefault())
    {
        Environment.Exit(0);
    }

    // Providing we have a successful login, start main application window
    var app = new ShellView();
    var context = new ShellViewModel(loginVm.CurrentUser);
    app.DataContext = context;
    app.Show();
} 
```

# java - 资源未出现在新服务器窗口中

> ID：12857084
> 
> 赞同：3
> 
> 时间：2012-10-12T10:27:36.287
> 
> 标签：java, eclipse, tomcat

我正在使用 eclipse Indigo，在项目资源管理器中我可以在那里看到我的项目。我想将服务器添加到我的项目中，以便我可以运行/测试我的 Web 应用程序。

创建 Tomcat > Tomcat 类型的新服务器后 6\. 出现一个窗口，将资源（我的项目）添加/移动到右侧窗口，以便用我的项目配置新服务器。但是那个窗口是空的。如何在左侧窗口中显示我的项目？ ![在此处输入图像描述](../Images/1c34a08229136e26fbd01a2cd098372a.png)

安装了以下项目方面 ![在此处输入图像描述](../Images/a210451f5fc2c1ef0f0973c356b04cf1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-04T15:04:39.207

我在开始新安装“Eclipse Standard”时遇到了您的情况。

您必须安装一些额外的软件：（
帮助->安装新软件）搜索“--所有可用站点--”搜索“Web”并安装**“Web, XML, Java EE and OSGi Enterprise Development”**。

这将允许你设置你的 Project Poperties -> Project Facelets -> “Dynamic Web Module”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:30:58.063

您必须绝对确定您的项目启用了 Web Project Facet。您可以在项目属性中启用构面。通常，您要查找的方面称为**Dynamic Web Module**。

![在此处输入图像描述](../Images/1d6d1211b6cec5366e1b3bd6a0656d49.png)

# ruby-on-rails - 我还需要在铁路中使用第三方 gem 来实现本地化 URI 吗？

> ID：12857088
> 
> 赞同：0
> 
> 时间：2012-10-12T10:27:56.117
> 
> 标签：ruby-on-rails, ruby, localization, internationalization

过去我们需要使用其他模块，例如[https://github.com/kwi/i18n_routing](https://github.com/kwi/i18n_routing)，现在仍然是首选情况吗？

我只想要一些基本的 URI 映射，例如

```
http://www.example.com/users/1 (default)
http://www.example.com/es/users/1 
http://www.example.com/jp/users/1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:19:50.157

并不真地。

您可以像这样设置语言环境前缀。

```
 scope "(:locale)", :locale => /en|de|hr/ do
    get "foo/bar"
  end 
```

这匹配：

*   `/foo/bar`
*   `/en/foo/bar`
*   `/de/foo/bar`
*   `/hr/foo/bar`

# android - 使用android中的achartengine绘制一条水平线，轴和时间的缩放比例

> ID：12857091
> 
> 赞同：1
> 
> 时间：2012-10-12T10:27:58.627
> 
> 标签：android, achartengine

我正在使用 AchartEngine 库来绘制从外部设备接收的输出的折线图，作为我们在 Android 中的项目的一部分。1\. 如何使用 AchartEngine 在整个图形中以恒定值绘制水平线。2.如何设置图形的x轴、y轴的比例。例如，让 y 轴从 0 开始，在 1100 结束 .. 每 100 会有一个比例，但我需要从 50 开始，同时 50 应该出现在 100 的位置（但不仅仅是在 0 之间到100），100应该出现在200的位置，150应该出现在300的位置。（我已经设置了min.axis，max.axis） 3.如何将x轴的当前时间设置为规模？即，而不是 number(1,2,3...) 作为比例，需要时间作为 x 轴比例，它可以系统时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:17:06.797

这 3 个问题应该是 stackoverflow 中的 3 个独立问题。但是，我将尝试至少回答其中的一些问题。

1.  添加一个额外的数据集，其值具有 y = 常数。

2.  要设置轴边界，请使用：renderer.setXAxisMin(0); 渲染器.setXAxisMax(1000); 但是，我不明白你的其余问题。

3.  设置为比例是什么意思？

# c# - 从我在 winRT 中的应用程序中添加联系人中心？

> ID：12857094
> 
> 赞同：0
> 
> 时间：2012-10-12T10:28:26.973
> 
> 标签：c#, windows-runtime, contacts

我正在使用 Windows.ApplicationModel.Contacts 和[http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.contacts.contact.aspx#properties](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.contacts.contact.aspx#properties)。我的疑问是我可以从我的应用程序中将联系人添加到人员中心吗？如果可以，那么如何。我正在使用 c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:49:27.150

您不能直接将联系人添加到人员应用程序。

它必须添加到其他商店，例如 live、facebook、exchange 等，因为 people 是所有这些商店的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:02:28.547

您可以使用[ContactPicker Contract](http://msdn.microsoft.com/en-US/library/windows/apps/hh464906)来完成。

您可以使用[ContactPickerUI.AddContact](http://msdn.microsoft.com/en-US/library/windows/apps/windows.applicationmodel.contacts.provider.contactpickerui.addcontact)添加联系人，但您不能以编程方式添加联系人。

[联系人选择器示例应用程序](http://code.msdn.microsoft.com/windowsapps/Contact-Picker-App-sample-fc6677a1)

# python - Google AppEngine 任务队列长度

> ID：12857097
> 
> 赞同：1
> 
> 时间：2012-10-12T10:28:40.140
> 
> 标签：python, google-app-engine, task-queue

我有一个处理大量记录的 Google AppEngine 后端 cron 任务。此处理程序在循环中逐批读取记录，并为每个批次排队另一个后端处理程序。我为此使用默认任务队列。我为此应用程序配置了 6 个后端实例。然而，只有 6 个任务排队，其余的被忽略。您可以排队的任务数量似乎等于后端的数量，并且进一步的任务请求只会被丢弃。这是预期的行为吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T23:02:10.733

您是否启用[https://developers.google.com/appengine/docs/python/config/appconfig#Using_Concurrent_Requests](https://developers.google.com/appengine/docs/python/config/appconfig#Using_Concurrent_Requests) AsyncTasks 使用请求来启动新任务。

# spotify - 暂停运行轨道

> ID：12857099
> 
> 赞同：3
> 
> 时间：2012-10-12T10:28:51.413
> 
> 标签：spotify, ios5.1, cocoalibspotify-2.0

我无法暂停曲目。

SPSession 上的 -playing 属性和 SPPlaybackMAnager 上的 -setIsPlaying 属性已经提供了此功能，但这一切都会导致停止歌曲而不是暂停歌曲。

我应该怎么做才能暂停跑步轨迹？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T12:27:55.847

仅在使用时才使用`SPPlaybackManager`' 控件。

设置`playing`为`false`暂停播放，`playing`继续播放`true`。请注意，这是为了在您自己的应用程序中播放 Spotify 音乐，而不是控制 Spotify 客户端。

请参阅 CocoaLibSpotify 附带的“简单播放器”示例以了解如何进行播放。

# c++ - 捕获信号：使用成员函数作为信号处理程序

> ID：12857101
> 
> 赞同：8
> 
> 时间：2012-10-12T10:29:03.483
> 
> 标签：c++, linux, signals

我有一个在无限循环中做一些工作的对象。实例化`main()`对象并调用`run()`方法。因为我不想使用线程，所以我需要一个解决方案来让我的对象停止运行。下面你看看我想出了什么。

```
struct Foo
{
    void run()
    {
        running = 1;
        while (running) 
            do_something_useful();

        std::cout << "Execution stopped." << std::endl;
    }

    bool running;

    void catch_signal(int signal)
    {
        std::cout << "Caught signal " << signal << std::endl;
        if( signal == SIGTERM ) 
            running = false;
    }

}; 
```

如您所见，我需要异步发送信号。因此，我使用信号处理程序和`sigaction`. 下面`main`我可以想象使用。

```
int main(int argc, char** argv)
{
    Foo foo;
    struct sigaction sigIntHandler;

    boost::function< void (int) > f;
    f = std::bind1st(
      std::mem_fun(&Foo::catch_signal), &foo);
    f(5);  // this call works

    sigIntHandler.sa_handler = f;           // compiler complains, "cannot assign ..."
    sigemptyset(&sigIntHandler.sa_mask);
    sigIntHandler.sa_flags = 0;
    sigaction(SIGTERM, &sigIntHandler, NULL);
    s.run();

} 
```

我现在期望的是：程序一直运行，直到我发送`SIGTERM`它被捕获并将导致我的对象停止迭代并返回到 main。

我现在有两个问题：

(a) 在代码中，您会看到标有“编译器抱怨”的行，消息类似于

```
boost::function<void(int)> cannot be converted to __sighandler_t {aka void (*)(int)} 
```

我需要改变什么才能使这项工作？我认为`f`就像`void f(int)`信号处理程序在某些示例中获得的功能一样。

(b) 对于那些想知道“那个家伙在做什么？”的人：你有什么建议可以更好地解决这种事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T11:11:21.033

> *   我需要改变什么才能使这项工作？我认为 f 就像 void f(int)，就像信号处理程序在某些示例中获得的函数一样。

编译器会抱怨类型，因此您需要传递函数指针，而不是 type 的对象`boost::function<void(int)>`。创建一个这种类型的全局变量，并添加一个调用这个对象的函数会起作用：

```
boost::function<void(int)> myCb;
void CallCb( int value )
{
  myCb(value);
}

int main(int argc, char** argv)
{
    Foo foo;
    struct sigaction sigIntHandler;

    myCb = std::bind1st(
      std::mem_fun(&Foo::catch_signal), &foo);
    f(5);  // this call works

    sigIntHandler.sa_handler = CallCb;
    sigemptyset(&sigIntHandler.sa_mask);
    sigIntHandler.sa_flags = 0;
    sigaction(SIGTERM, &sigIntHandler, NULL);
    s.run();

} 
```

> *   您对如何更好地解决这种事情有什么建议吗？

并不真地。这个想法没问题。我只想用 c++11 lambda

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T12:35:41.887

您可以在信号处理程序中进行可移植的操作很少。基本上，您可以将值存储在类型为 的对象中`sig_atomic_t`。例如，插入`cout`不必工作。如果你有 C++11，你可以做更多的事情，使用原子类型或显式栅栏，但是对标准库的任何其他调用都不需要做任何明智的事情。

因此，尽管如此，您可以做的是编写一个函数（自由函数或静态成员函数（但这里有一个与 C++ 链接有关的微妙问题：正式静态成员函数不起作用，但实际上它总是这样做））调用成员函数，该函数又设置`running`为`false`（假设您已将类型更改`running`为`sig_atomic_t`）。

# java - 查询webservices。什么时候使用webservice？

> ID：12857102
> 
> 赞同：-2
> 
> 时间：2012-10-12T10:29:08.650
> 
> 标签：java, web-services, jakarta-ee

我刚刚开始在 Java 中使用 Web 服务，并且我已经阅读了 Web 服务的所有优点，但我仍然感到困惑并想知道

1.  究竟什么是网络服务？

2.  为什么我们需要网络服务？

3.  需要使用 Web 服务的情况？

4.  它是为了取代其他一些技术而引入的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:39:36.523

**1-究竟什么是网络服务？**

WebService 是部署在服务器上的组件（程序）。Web 服务的主要优点是它的公共性。每个人都可以用任何语言使用它。

**2-为什么我们需要网络服务？**

如果您正在准备一个简单的 Web 应用程序或将在您的私有域中使用的桌面应用程序，那么您不需要使用该服务。

Web Service 主要用于将您的服务（程序）公开给其他第三方的情况。

例如： PayBack 公司与惠普有合作关系。购买 100 卢比的燃料，您将获得 4 个回报点。

在这种情况下，Payback 将推出一项 Web 服务，供惠普网点使用。这是真实的例子。

所以惠普不需要回报积分的代码。它必须使用 Payback 提供的服务。

**3-需要使用网络服务的情况？**

1> 主要用于 SOA 架构 2> 如果你想将你的服务暴露给第三方，那么你可以使用它。

**4- 它是为了取代其他技术而引入的吗？**

一点都不。它不能替代任何技术。

您可以阅读[此参考资料](http://en.wikipedia.org/wiki/Web_service)以获取更多知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:37:24.970

Web服务只是解决“如何让计算机A在计算机B上运行代码”这一基本问题的另一种方法。这只是实现此目的的众多方法之一，但具有一些明显的优势：

*   通常发生在一个简单的 http 请求上。这意味着它是防火墙友好的（如果浏览有效，Web 服务也可以）。
*   许多实现可供选择。没有供应商或技术锁定。
*   一些 Web 服务以 WSDL 文档的形式提供*契约*，允许技术轻松地提供透明的使用并模拟远程端

以 XML 封装意味着它是一种效率相当低的传输方法，如果您的带宽低或 CPU 功率非常小，这可能很重要。

# tfs-power-tools - 在 TFS powertools 中配置 TFS 服务器位置

> ID：12857105
> 
> 赞同：6
> 
> 时间：2012-10-12T10:29:14.097
> 
> 标签：tfs-power-tools

我正在尝试使用 TFS Powertools 中包含的 tfpt 实用程序将搁置集搁置到另一个分支。但是，由于我安装了 TFS 电动工具，我们已将 TFS 服务器移动到另一台服务器（使用不同的 URL）。

问题是，当我使用 TFS 电动工具时，它会尝试访问旧服务器，这会导致错误提示

> Team Foundation Server 不存在或此时不可访问。技术信息（针对管理员）：请求失败，HTTP 状态 503：服务不可用。

有谁知道我如何告诉 tfpt 使用新的服务器位置？我认为这可以通过在谷歌上进行简单搜索来解决，但我错了：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:07:10.600

问题解决了！:) 我已将新服务器添加到我的 Visual Studio 2008 安装中（在团队资源管理器中）。我以前只为我的 Visual Studio 2010 这样做过。所以现在 tfpt 正在使用新的服务器位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-31T17:15:19.620

我也有这个问题。我正在运行 2013、2015 和 2017，我在每一个中都更新到了新的 tfs 服务器，但我的 shell 扩展不起作用。

我通过重新启动资源管理器解决了这个问题。只需打开任务管理器并重新启动该过程。
（对于像我这样不喜欢一直重启的人）

# php - PHP 方法将 echo/print_r 结果但不会返回它们

> ID：12857106
> 
> 赞同：1
> 
> 时间：2012-10-12T10:29:22.667
> 
> 标签：php

即使我可以在 return 语句之前打印结果，这种方法似乎总是返回 false，但我总是得到 false。有问题的方法....

```
 public static function getGroupOptions($pid=0, $ogid=0) {

        if($data = self::getOptionsData($pid, $ogid)) {
            $Options = array();
            Load::Object('ProductOption');
            foreach($data as $key => $rec) {
                $Option = new ProductOptionObject;
                $Option->Populate($rec);
                array_push($Options, $Option);

            }

            //echo "<pre>";print_r($Options);echo "</pre>";die;  
            return $Options;
        }
        return false;
    } 
```

print_r 用正确的数据转储 ProductOptionObject 的数组，没有问题。

这是电话线...

```
 $Options = ProductOptionFactory::getGroupOptions($this->pId, $this->getBean('ogId'));
            //echo gettype($Options); echo $Options === false ? "FALSE" : "NOT FALSE"; die; 
```

调试行总是打印'Boolean FALSE'。

使用：PHP 5.3.14 / Apache2 2.2.8 / CentOS 5.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:37:26.920

我会使用**静态**而不是**自我**前：

```
self::getOptionsData($pid, $ogid);

/** rather use */ 

static:getOptionsData($pid, $ogid); 
```

但这无论如何都可以正常工作：

```
php> class A {
 ...    public static function getOpt() {
 ...       return array(1,2,3);
 ...    }
 ...    public static function getGrpOpt() {
 ...       if (false != $opt = self::getOpt()) {
 ...          return $opt;
 ...       }
 ...       return false;
 ...    }
 ... }

php> var_export(A::getGrpOpt())
array (
  0 => 1,
  1 => 2,
  2 => 3,
) 
```

所以我相信问题出在你没有向我们展示的 getOptionsData 函数上。

如果您展示如何设法打印内部调试也会有所帮助，因为我确信它会按照指示返回 $Options，它别无选择。

使用 var_dump 或 var_export 可以在调试时轻松查看打印的错误值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:24:25.047

如果您想捕获 print_r 的输出，请使用返回参数：

```
print("<pre>" . print_r($res, true) . "</pre>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:34:19.290

您的实际代码中一定有一些错字。你的代码似乎没问题。尝试调试代码，你就会知道你错过了哪里。

# matlab - 在 Matlab 中最小化简单目标的最佳方法

> ID：12857108
> 
> 赞同：3
> 
> 时间：2012-10-12T10:29:30.560
> 
> 标签：matlab, optimization

找到此图像中蓝线沿 x 轴的偏移以[![不变的](../Images/b27a53a2a2af5fc162599be4c3e78a76.png)](https://i.stack.imgur.com/5WhDu.png) 使其与红线匹配的最佳方法是什么？结果必须看起来像这个图像[![转移](../Images/3d9b07cec60bf1824f68f111cc9a72c5.png)](https://i.stack.imgur.com/DPYkE.png) ）。在 MATLAB 中有像 fminunc 这样的复杂函数，但我必须处理一些时间限制，所以我想知道是否有更有效的方法。

编辑：数据来自模拟环境中激光扫描的距离测量。在 x 轴上，您可以看到以弧度为单位的每次扫描的方位与在 y 轴上以米为单位测量的范围。对于红点（参考扫描），轴承确实是均匀分布的。参考扫描始终是这种情况，但当前扫描（蓝点）则不然。

编辑：红点的数据

```
-1.5708    6.8542
-1.3963    6.9530
-1.2217    7.2137
-1.0472    7.6592
-0.8727    8.3326
-0.6981    9.2984
-0.5236   10.6477
-0.3491   12.5060
-0.1745   15.0092
     0   18.2745
0.1745   22.3368
0.3491   27.1113
0.5236   32.4112
0.6981   38.0010 
```

对于蓝点

```
-1.3963    7.0092
-1.2217    7.3112
-1.0472    7.8065
-0.8727    8.5420
-0.6981    9.5872
-0.5236   11.0407
-0.3491   13.0360
-0.1745   15.7225
     0   19.1849
0.1745   23.4301
0.3491   28.3466
0.5236   32.4114 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:53:45.960

好的，这不是“最佳”方式，但如果您不知道描述曲线的正确模型，这是一种方式：

```
% your first plot
figure(1), clf, hold on
plot(red(:,1), red(:,2), 'ro-')
plot(blue(:,1), blue(:,2), 'bo-')

% approximate reference with splines, so it can be evaluated anywhere
ppred = spline(red(:,1),red(:,2));

% minimize the distance between the curves
f = @(x) norm( ppval(ppred, blue(:,1)+x)-blue(:,2) );    
x0 = fminsearch(f, 0);    
blue(:,1) = blue(:,1)+x0;

% pretty close to your second plot
plot(blue(:,1), blue(:,2), 'ko-') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:54:00.610

为什么不只进行网格搜索？制作一个偏移可能性网格，`delta_x = [0.0001:0.2:0.0001]`然后只评估偏移网格中每个位置的目标函数（最小二乘？），然后选择误差最小的那个。如果您的时间太短而无法使用，`fminfunc`那么网格搜索可能是一个可以接受的近似值。

# gwt - GWT：在服务器端运行 JAR

> ID：12857112
> 
> 赞同：0
> 
> 时间：2012-10-12T10:29:43.773
> 
> 标签：gwt, jar, webserver

我开始用 GWT 开发一个 web 应用程序，到目前为止一切都很好。但是，在如何在服务器端调用 JAR 时，我有点迷失方向。基本上我想要的是单击一个按钮，然后在服务器端启动一个任务以运行 JAR，然后从服务器获得答案以查看是否一切正常。

我在网站上发现了这个问题

[服务器端外部 jar 的奇怪 GWT 错误](https://stackoverflow.com/questions/8991386/strange-gwt-error-with-external-jar-on-server-side)

但不知道发展如何。非常感谢。

请那些专家，我也接受任何其他设计建议，也许我想做的这件事是一个可怕的想法。

编辑：我可以访问应用程序的代码，但它不是一个简单的 Java 应用程序，它广泛使用 SQL 和 SOAP，我认为 GWT 无法编译成 javascript 来运行客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:33:27.750

我建议在你的项目的 Classpath 中包含这个 Jar 并以编程方式调用它的操作，当然前提是你知道这个库的 API。

# asp.net - 视频无法在实时网站上播放

> ID：12857113
> 
> 赞同：0
> 
> 时间：2012-10-12T10:29:45.677
> 
> 标签：asp.net, visual-studio-2010, html, html5-video, dotnetnuke

我制作了一个视频模块，其中用户在视频标签中上传视频和视频播放

```
 <video id="Video1" runat="server" controls="controls" autoplay tabindex="5" visible="false"
                    class="video-js vjs-default-skin" data-setup="{}">
                    <source id="Source1" runat="server" type="video/mp4" />
                    <source id="Source2" runat="server" type="video/flv" />
                </video> 
```

。CS

```
public void getExtension(string Filename)
        {
            string Extension = "";
            Extension = Path.GetExtension(Filename);

            if (Extension == ".mp4")
            {
                Source1.Attributes.Add("src", Finalpath);
            }
            else if (Extension == ".flv")
            {
                Source2.Attributes.Add("src", Finalpath);
            }

        } 
```

特定模块在本地工作，但当我在 Live 网站上安装它时，视频无法播放。我已经在本地检查了页面视频的网址，如下所示

```
http://dc620x_dev2/DesktopModules/DNNCentric-VC_ManageLessions/erf/uyn/2.mp4 
```

并在现场

```
http://videoclasses.webhostcentric.com/DesktopModules/DNNCentric-VC_ManageLessions/Abc/yeghbf/2.mp4 
```

它显示一个错误：

```
The resource you are looking for has been removed, had its name changed, or is temporarily unavailable. 
```

我在代码中缺少什么或错误。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:13:54.513

您的[mp4](http://videoclasses.webhostcentric.com/DesktopModules/DNNCentric-VC_ManageLessions/Abc/yeghbf/2.mp4)文件返回 404 / file not found 错误。1) 文件不在该地址或 2) 您的 IIS 网络服务器没有为 mp4 文件列出正确的 MIME 类型。

如果您知道该文件存在于该位置，请查看这篇关于 IIS 配置的[Microsoft 文章：](http://support.microsoft.com/kb/326965)

> 当您从 IIS 6.0 Web 服务器请求文件，并且该文件的文件扩展名不是 Web 服务器上定义的 MIME 类型时，您会收到以下错误消息： HTTP 错误 404-找不到文件或目录。

您使用的是 IIS 7.5，但概念是相同的。您的服务器上的 MIME 类型设置是否正确？

# javascript - Javascript 来实现这个功能？

> ID：12857120
> 
> 赞同：0
> 
> 时间：2012-10-12T10:30:04.353
> 
> 标签：javascript, user-interface

我正在寻找一个 javascript / API，它可以为我提供类似的功能，如链接技能和背书技能。

我必须创建类似的功能，例如linkedin，用户可以在其中选择属性并显示在他们的个人资料中。（像气泡）

他们的朋友可以看到他们选择的这些属性，并且可以上传图片/文件。

我正在寻找如何在 GUI 中显示它的任何指针，如果有一个 API 脚本已经具有这样的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:35:31.250

也许这个来自 James Smith 的[jQuery TokenInput](http://loopj.com/jquery-tokeninput/)插件会让你朝着正确的方向前进？

它非常易于使用，并且您可以允许自定义输入，因此如果未列出该技能，他们仍然可以添加它。

# php - 警告：in_array() [function.in-array]：Wordpress ACF

> ID：12857121
> 
> 赞同：0
> 
> 时间：2012-10-12T10:30:05.507
> 
> 标签：php, wordpress, plugins

我有一个可变条件的问题

```
Warning: in_array() [function.in-array]: Wrong datatype for second argument in 
```

代码：

```
<?php if( in_array( 'activar', get_field('emergente', 'options') ) ) : ?>
    ....
<?php endif; ?> 
```

任何可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:40:51.343

```
<?php if( is_array(get_field('emergente', 'options')) && in_array( 'activar', get_field('emergente', 'options') ) ) : ?>
    ....
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:34:19.540

一个快速的谷歌搜索表明该功能是这样做的`get_field`：

> 此函数返回一个列值。

我假设这并不意味着数组？但根据[这个页面](http://podsframework.org/codex/get_field)，它确实返回了一个数组。我的建议是使用`print_r(get_field('emergente', 'options'))`并查看它的输出。

您可能需要检查结果`is_array`是否为使用返回数据中正确索引的多维数组。

# python - 在 WSGI 实例之外访问 Pyramid 数据库

> ID：12857122
> 
> 赞同：1
> 
> 时间：2012-10-12T10:30:08.450
> 
> 标签：python, sqlalchemy, pyramid

我想从连接到我的 Pyramid 应用程序的数据库中的条目中创建一个 Whoosh 索引。但是，我不确定如何在应用程序之外访问数据库。

所以我`models.py`的初始化如下：

```
from sqlalchemy import (
    Column,
    Integer,
    Text,
    String,
    ForeignKey,
    Table
    )

from sqlalchemy.ext.declarative import declarative_base

from sqlalchemy.orm import (
    scoped_session,
    sessionmaker,
    relationship,
    backref
    )

from sqlalchemy.dialects.mysql import DATETIME, FLOAT, TEXT

from zope.sqlalchemy import ZopeTransactionExtension

db_session = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))
dbBase = declarative_base()
dbBase.query = db_session.query_property() 
```

然后在 中`__init__.py`，有一个在模型中加载的示例：

```
from pyramid.config import Configurator
from sqlalchemy import engine_from_config
from .models import db_session, Recipe
def main(global_config, **settings):
    """ This function returns a Pyramid WSGI application.
    """
    engine = engine_from_config(settings, 'sqlalchemy.')

    db_session.configure(bind=engine) 
```

我`production.ini`的引擎任务：

```
sqlalchemy.url = mysql+pymysql://username:password@localhost:3306/database?charset=utf8 
```

所以 main 在 WSGI 进程启动时被调用，它从 .ini 文件传递​​引擎。但我想通过一个不依赖 WSGI 进程的脚本来访问数据库。我可以分配引擎并将其绑定到脚本中的会话吗？对`extension=ZopeTransactionExtension()`会话有何影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:14:18.430

`alchemy`脚手架包含一个可以用作示例的[`initialize`脚本。](https://github.com/Pylons/pyramid/blob/master/pyramid/scaffolds/alchemy/+package+/scripts/initializedb.py)设置类似于以下示例，我为您评论过。

```
config_uri = argv[1]  # Get config file name from arguments
setup_logging(config_uri)  # In case you want ti use the logging config from the file
settings = get_appsettings(config_uri)  # Get a settings dir from the file
engine = engine_from_config(settings, 'sqlalchemy.')  # Setup the engine from the settings
DBSession.configure(bind=engine)  # Configure the session to use the engine
with transaction.manager:  # Do stuff in a transaction
    # Do DB stuff 
```

这`ZopeTransactionExtension`只是意味着需要提交数据库工作，因此您要么以 结束代码`transaction.commit()`，要么将其包装成`with transaction.manager:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T09:04:24.443

Pyramid 文档中有一个部分处理编写脚本，但是它隐藏在[Command-Line 部分](http://pyramid.readthedocs.org/en/latest/narr/commandline.html)中。相关的部分是 initializedb.py 已被转换为控制台脚本，该脚本在`bin`目录中创建了一个脚本。这就是`models`使用相对导入来导入的原因。

目前这对我的需求来说似乎有点多余，所以我仍然需要一些更简单的东西。解决方案包括：

```
if __name__ == '__main__':
    main() 
```

在我的脚本中，然后从包含我的`production.ini`文件的目录中调用脚本：

```
../bin/python -m myproject.scripts.whooshindex production.ini 
```

将`-m`模块作为脚本运行。这修复了相对导入，从而利用了预定义`initializedb.py`脚本的所有优点。

# python - PyPI 角色维护 - 所有者与维护者

> ID：12857123
> 
> 赞同：9
> 
> 时间：2012-10-12T10:30:10.560
> 
> 标签：python, pypi

假设只有“所有者”可以推送新版本，或者“维护者”也可以这样做，我是否正确阅读？

维护者的角色被列为“可以提交和更新特定包名称的信息。”。具体来说，维护者可以编辑哪些信息？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T11:33:54.713

在当前支持 PyPI的[*Warehouse*引擎中，Maintainer](https://github.com/pypa/warehouse)[只有*上传*权限](https://github.com/pypa/warehouse/blob/2b63adfeafbed7bd92085e82aa3c70f728da96ae/warehouse/packaging/models.py#L181-L193)。

其他任何事情都要求用户成为所有者。

[Warehouse 是一个 Pyramid 项目，因此您可以在Pyramid *Security*文档](https://docs.pylonsproject.org/projects/pyramid/en/latest/narr/security.html)中了解如何管理访问控制；视图受[特定权限](https://sourcegraph.com/search?q=repo:%5Egithub%5C.com/pypa/warehouse%24+file:%5Ewarehouse/+%5Cbpermission%5Cs*%3D%5B%27%22%5D%5B%5E%27%22%5D%2B%5B%27%22%5D+&patternType=regexp)（或[手动`request.has_permission()`检查](https://sourcegraph.com/search?q=repo:%5Egithub%5C.com/pypa/warehouse%24+file:%5Ewarehouse/+%5Cbrequest.has_permission%5C%28.*%2C+.*%5C%29+lang:python+&patternType=regexp)）保护，大多数项目视图都需要[`manage:project`权限](https://sourcegraph.com/search?q=repo:%5Egithub%5C.com/pypa/warehouse%24+file:%5Ewarehouse/+%5Cbpermission%5Cs*%3D%5B%27%22%5Dmanage:project%5B%27%22%5D+&patternType=regexp)，该权限仅授予项目所有者。

# c# - 队列管理和新线程

> ID：12857125
> 
> 赞同：3
> 
> 时间：2012-10-12T10:30:14.330
> 
> 标签：c#

在 .Net 4.0 框架上使用 C#，我有一个 Windows 窗体主线程（直到现在唯一的一个）等待文件系统事件，然后必须对这些事件提供的文件开始一些预定义的处理。

我打算做以下事情：

*   A1。在主进程启动时立即创建一个单独的线程；
*   A2。让主线程将要处理的文件名放入队列（FIFO）中；
*   A3。每隔 n 秒由计时器触发新线程；
*   A4。让新线程读取队列，如果有项目要执行处理，则让它取消刚刚处理的队列项目。

因为我以前从未编写过线程（我基本上使用 Albahari 作为我的指南针）但我绝对想要，我有几个问题只是为了提前发现可能的严重头痛：

*   Q1。如果主进程只写而新进程只取消队列项，我是否会在队列上遇到并发问题？换句话说：在这种情况下，同步是一个重要问题吗？
*   Q2。我已经看到我可以从头开始创建一个新线程，或者可以重用现有池中可用的线程之一。在这种情况下使用池中的线程更安全/更简单？
*   Q3。让新线程无限期地保持活动状态并且只响应计时器直到主进程关闭有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:42:41.377

如果您的目标是 .Net Framework 4，那么[Blocking Collection](http://www.albahari.com/threading/part5.aspx#_BlockingCollectionT)听起来可以解决您的问题；即当“工作”项在队列上可用时创建一个新的线程池线程（添加新文件时添加到事件处理程序的队列中）并在该线程上异步处理它们。

您可以在生产者/消费者队列中使用一个：

例如：

```
/// <summary>
/// Producer/consumer queue. Used when a task needs executing, it’s enqueued to ensure order, 
/// allowing the caller to get on with other things. The number of consumers can be defined, 
/// each running on a thread pool task thread. 
/// Adapted from: http://www.albahari.com/threading/part5.aspx#_BlockingCollectionT
/// </summary>
public class ProducerConsumerQueue : IDisposable
{
    private BlockingCollection<Action> _taskQ = new BlockingCollection<Action>();

    public ProducerConsumerQueue(int workerCount)
    {
        // Create and start a separate Task for each consumer:
        for (int i = 0; i < workerCount; i++)
        {
            Task.Factory.StartNew(Consume);
        }
    }

    public void Dispose() 
    { 
        _taskQ.CompleteAdding(); 
    }

    public void EnqueueTask(Action action) 
    { 
        _taskQ.Add(action); 
    }

    private void Consume()
    {
        // This sequence that we’re enumerating will block when no elements
        // are available and will end when CompleteAdding is called.
        // Note: This removes AND returns items from the collection.
        foreach (Action action in _taskQ.GetConsumingEnumerable())
        {
            // Perform task.
            action();
        }
    }
} 
```

# visual-c++ - 部署活动目录时在 Windows 8（32/64 位）中无法访问注册表

> ID：12857127
> 
> 赞同：2
> 
> 时间：2012-10-12T10:30:17.630
> 
> 标签：visual-c++, active-directory, windows-8, registry, driver

这是在 Windows 8 pc 中删除打印机驱动程序的问题。

我们的应用程序在 UI 级别部署中运行良好，我们已成功安装和卸载。

我们已经从 UI 级别以及 PUSH 部署测试了我们在 Windows 8（32 位和 64 位）中的应用程序。

但在 PUSH（Active Directory 部署）中，“OpenPrinter()”函数无法获取请求的打印机驱动程序的句柄。然后deleteprinter也失败了。

我们已经验证了该函数正在按照我们的预期获得参数。但它失败了。

由于该问题仅在 Windows 8 中发生。

服务器为 Windows 2003 和 Windows 2008 r2，并基于每台机器进行部署。

使用 VC++ (VS 2008) 开发并使用 InstallShield12 打包的应用程序。

在我们的调查中，我们发现“Openprinter()”函数无法访问注册表，并且无法返回句柄。

当我们从 PUSH 安装应用程序时，它是使用 SYSTEM 帐户安装的。我们已经验证了这一点。

在 Windows 8 PC 中使用注册表是否有任何限制？还是我们需要修复/设置/配置 Windows 8 PC 中的任何设置？或者是否有任何禁止访问系统帐户的注册表？

请帮我解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:06:23.623

***注册表在 Windows 8（32/64 位）中无法访问，而活动目录部署***

最后事情被打破了。
主要原因是 openprinter API 依赖于注册表来获取请求的打印机的句柄。
当我们调用 API 时，注册表对它不可用。
当我们等待完成 2 分钟后，API 返回句柄。
因此我的 PUSH 卸载完成，没有挂起。现在问题在我的情况下得到了解决。
但这是 Windows 8 的限制。

# java - Java，集合构造函数

> ID：12857129
> 
> 赞同：1
> 
> 时间：2012-10-12T10:30:44.860
> 
> 标签：java, collections, constructor, java-7

有什么区别：

```
TreeMap<String, String> myMap = new TreeMap<>(); 
```

和

```
TreeMap<String, String> myMap = new TreeMap<String,String>(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:39:46.677

它们在`<>`引入菱形运算符的 java 7 中是相同的。在旧版本的 java 中，菱形运算符将不起作用。

菱形运算符为构造函数带来类型推断。泛型方法的类型推断在 java 5 及更高版本中可用。在 java 7 之前，要使用编译器的类型推断创建泛型类，您必须使用泛型工厂方法，例如`static <K,T> Map<K,T> createMap()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:44:11.050

第一个仅适用于 Java 7，第二个仅适用于 Java 5+

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:44:21.647

完全没有区别..！它只是一种语言结构。`<>`是`diamond operator`从 java 7 中新引入的运算符。

# xml - 映射xml文件

> ID：12857130
> 
> 赞同：0
> 
> 时间：2012-10-12T10:30:46.920
> 
> 标签：xml, xslt

我可以在不发生内存溢出的情况下解决这个问题（至少使用 altova mapforce），并希望对其他人有所帮助。

我有 2 个 xml 文件：

第一个：

```
<item>
  <id>100</id>
  <title>some title</title>
  <subtitle>some subtitle</subtitle>
</item>
... 
```

第二：

```
<item>
  <id>100</id>
<item>
... 
```

我想通过使用 XSLT匹配（输出 XML）每个匹配 2nd XML`<id>`和 1st XML的项目。`<id>`我想从匹配的第一个 XML 文件中获取所有元素。我希望这对于那些了解 XSL 的人来说很容易，或者我希望我的方法是错误的

我猜第二个 XML 文件将被引用为 XSL 参数，但我不知道如何引用它的元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:06:40.230

是这样的：

```
<xsl:variable name="first" select="document('first.xml')/root" />
. . .
<xsl:template match="item">
  <xsl:variable name="id" select="id" />
  <span>title of item <xsl:value-of select="$id" /> is <xsl:value-of select="$first/item[id=$id]/title" /></span>
</xsl:template> 
```

# php - magento 显示错误：500 内部服务器错误

> ID：12857134
> 
> 赞同：2
> 
> 时间：2012-10-12T10:30:57.303
> 
> 标签：php, magento

我将我的 magento 商店表单 1.6.2 升级到 1.7.0.2 但它显示**Error:500 Internal server Error**。我也更改了文件权限，但没有得到解决。清理了缓存和会话，但它不工作。任何机构都可以告诉我如何解决这个问题吗？

谢谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T10:59:21.520

默认情况下，Mageto 会关闭错误输出。如果您的 php 配置为不记录 php 错误，则 Web 服务器将发送 500 错误以防发生任何致命错误。

您可以检查 /var/log/exception.log 和 /var/log/system.log 中的错误或启用 magento 安装中所有错误的输出：

编辑你的 index.php ：

```
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors', 1); 
```

和.htaccess：

```
SetEnv MAGE_IS_DEVELOPER_MODE "true" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T12:35:50.610

这是唯一真正帮助我的事情（经过整整一周的战斗）......

> 要克服 500 内部服务器错误：
> 
> **将以下文件夹的文件夹权限更改为777**
> 
> *   应用程序/等
>     
>     
> *   变量
>     
>     
> *   媒体
>     
>     
> 
> **将以下文件的文件权限从 664 更改为 644**
> 
> *   index.php（magento 根文件夹中的主索引文件）
>     
>     
> *   下载器/index.php

来源：[http ://blog.luutaa.com/magento/how-to-overcome-500-internal-server-error-when-installing-magento/](http://blog.luutaa.com/magento/how-to-overcome-500-internal-server-error-when-installing-magento/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-16T07:33:11.337

如果您使用的是 Ubuntu，只需执行此命令

```
sudo chmod -R 777 /var/www/html/magento 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-13T16:14:52.620

我没有足够的声誉来评论以下建议：

> sudo chmod -R 777 /var/www/html/magento

永远不要将权限设置为 777 - 你会让你的服务器很容易受到攻击。在 apache 上的文件夹应该是 755，文件是 644。如果这还不够，它可能意味着所有权问题或服务器配置错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-04T16:20:36.580

我能够通过增加 fcgid.conf (etc/apache2/mods-available/fcgid.conf) 的一些值来解决这个问题

```
FcgidIdleTimeout 3600
FcgidProcessLifeTime 7200
FcgidMaxProcesses 64
FcgidMaxProcessesPerClass 8
FcgidMinProcessesPerClass 0
FcgidConnectTimeout 300
FcgidIOTimeout 180
FcgidInitialEnv RAILS_ENV production
FcgidIdleScanInterval 10 
```

# php - Codeigniter 登录失败直接访问控制器

> ID：12857146
> 
> 赞同：0
> 
> 时间：2012-10-12T10:31:40.250
> 
> 标签：php, codeigniter, login

我有登录表单，然后我尝试直接访问控制器，它可以工作！我如何防止这种访问？

我有一些课

```
class C_home extends CI_Controller{

public function __construct() {
    parent::__construct();
    $this->session->set_userdata('islogin'); //to set session islogin
}

function index()
{
    if ($this->session->userdata('islogin') != TRUE) 
    {
        redirect('c_home','refresh'); //caused infinite refresh
    }
        redirect('c_login', 'refresh');
}
} 
```

然后我尝试直接访问控制器，页面显示无限刷新，我希望页面显示登录表单

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:37:50.597

一些评论：

1.  在线上`$this->session->set_userdata('islogin');`，您应该传递第二个参数，该参数是要分配的值（大概， TRUE 是您的意思）
2.  我认为您的重定向行是错误的。如果用户未登录，则您希望重定向到登录。现在，如果用户未登录，您的代码所做的就是重定向到主页，因此是无限循环（因为此代码在主页中！
3.  该`$this->session->set_userdata('islogin', TRUE);`行显然应该在您的登录控制器中，但我猜您将它放在这里只是为了测试目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:38:06.633

您应该访问控制器，这是他们控制事物的关键。如果您有不希望通过 URL 访问的特定函数，请在函数名称前加上 _，例如 _notForPublicFunction。至于无限刷新……

```
if(!$this->session->userdata('isLogin'))
{
    redirect('c_login');
} else {
    redirect('c_home');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:24:32.957

我宁愿这样做

```
class C_home extends CI_Controller {

public function __construct()
{
    parent::__construct();
}

function index()
{
    if ($this->session->userdata('islogin') != TRUE) 
    {
        redirect('c_home/login','refresh'); // go for login
    }

    // do something for loged in users here

}

function login()
{
    if ($this->session->userdata('islogin') == TRUE) 
    {
        redirect('c_home','refresh'); // get back home
    }

    // perform some login logic here
    // then, if successful
    {
        $this->session->set_userdata('islogin',TRUE);
        redirect('c_home','refresh'); // get back home
    }

    // or else
    // display login form here 

} 
```

当然最好使用像这样的第三方登录库[https://github.com/DaBourz/SimpleLoginSecure](https://github.com/DaBourz/SimpleLoginSecure)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T17:24:00.690

您需要做的是设置一个基本控制器，它将为您处理会话并通过继承将您登录的控制器与注销的控制器分开。

在这里如何最好地管理登录和注销状态是一个常见问题。有关如何执行此操作的详细说明，请参阅[此答案。](https://stackoverflow.com/a/12486869/568884)

# javascript - jQuery triggers out event even though it should be still in

> ID：12857147
> 
> 赞同：0
> 
> 时间：2012-10-12T10:31:40.803
> 
> 标签：javascript, jquery

I am facing a rather awkward problem. I register two event handlers, one for `mouseenter` and one for `mouseout` for the `li` elements on the page. It has multiple `div` areas inside it. When I leave the `li` element it calls the `out` handler, which is ok. What is not ok is that the `out` handler is also triggered when I leave a `div` inside that `li`.

Below is an image that illustrates it. The blue area is the `li` element which I register an `enter` and `out` event for.
![enter image description here](../Images/2ced5bcc378538a04945bf64e1554ecc.png)

I tried to register handlers on the inner `divs` that would stop the propagation but it only results in the triggering of the `out` handler when I enter those inner divs.

Any idea what is going wrong here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:38:54.813

Use `mouseleave` instead of mouseout. `Mouseout` triggers everytime your mouse is going off from exactly atop of the target. So when you enter the `divs`, your mouse goes out of the `li` and on the div. But it is still inside the `LI` of course, using mouseleave will make it work.

From JQuery doc:

> The mouseleave event differs from mouseout in the way it handles event bubbling. If mouseout were used in this example, then when the mouse pointer moved out of the Inner element, the handler would be triggered. This is usually undesirable behavior. The mouseleave event, on the other hand, only triggers its handler when the mouse leaves the element it is bound to, not a descendant. So in this example, the handler is triggered when the mouse leaves the Outer element, but not the Inner element.

# javascript - 如何从jQuery中的表单中获取所有输入字段？

> ID：12857148
> 
> 赞同：2
> 
> 时间：2012-10-12T10:31:46.803
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 获取表单输入字段？](https://stackoverflow.com/questions/169506/obtain-form-input-fields-using-jquery)

我有一个包含许多*输入字段的**表单*。

 *获取该表单的所有输入字段的最简单方法是`array`什么？

或`Key:Value`成对的对象

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T10:32:49.070

使用`serializeArray()`jQuery 函数：

```
var fields = $('#formID').serializeArray(); 
```

要获取数据的关联数组（具有名称/值映射的 JSON 对象），请查看此处的代码：[https ://stackoverflow.com/a/1186309/349012](https://stackoverflow.com/a/1186309/349012)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T11:05:07.573

所有输入的对象：-

```
$("form#formId :input").each(function(){
    var input = $(this); // A jquery object of the input
}); 
```

或者

```
$('#formId').submit(function() {
    // get the array of all the inputs 
    var $inputs = $('#formId :input');

    // get an associative array of the values
    var values = {};
    $inputs.each(function() {
        values[this.name] = $(this).val();
    });
}); 
```

这个返回`Key:Value`一对 -

```
var values = {};
$.each($('#formId').serializeArray(), function(i, field) {
    values[field.name] = field.value;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:33:18.220

这很容易：

```
$('input','#formId') 
```

或者

```
$('#formId').find('input'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T10:36:33.523

采用：`var allInputs = $(":input");`*

# delphi - 调整 TDbGrid

> ID：12857151
> 
> 赞同：0
> 
> 时间：2012-10-12T10:32:02.200
> 
> 标签：delphi, tdbgrid

我正在迈出第一步进入数据库感知控件（有什么好的教程吗？）。

我有一个包含 6 列的 MySql 表，并设法将其加载到 TDbGrid 中。

然而，其中一列是另一个表的索引。这是一个条形码，我不想显示它，而是想显示与它相关的产品名称。

我怎么做？

（我可以隐藏左侧显示当前行的“排水沟”（？）吗？）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:40:01.593

您应该始终从 SQL 端执行连接，这比以编程方式执行要容易得多

如：

```
SELECT mytable.id, mytable.column1, another_table.barcode
FROM mytable
JOIN another_table ON another_table.id = mytable.barcode_id 
```

要删除装订线，您需要取消选中`dgIndicator`Options 中的 DBGrid 属性。

至于“DB-Aware 控件”，您应该尝试 delphi 帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:38:30.337

使用查询代替表。然后，使用连接来选择产品名称，如下所示：

```
SELECT
  t.*,
  p.name
FROM
  YourTable t
  INNER JOIN Product p on p.barcode = t.barcode 
```

我使用 t.*，因为我不知道确切的列。在实践中，我不会使用`select *`，而是指定特定的列。如果您仍然要使用`*`，您可以通过将数据集/查询中 TField 对象的 Visible 属性设置为 来隐藏特定列`False`。

我不知道您使用哪些组件连接到表，但它们中的大多数确实有一个查询对应项，允许您插入 SQL 而不是表名。

可以通过转到`Options`对象检查器中的属性来隐藏装订线，展开它，然后设置`dgIndicator`为`False`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:24:15.393

仅作记录：对于像 Paradox 和 DBF 这样的 ISAM 数据库，典型的解决方案就是所谓的`master-detail tables relations`，它仍然可能适用于 SQL。虽然它会非常低效和缓慢。您肯定会阅读一些有关 SQL 的书籍。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T11:03:35.857

使用 TQuery 组件而不是 TTable 并使用上面建议的选择语句设置 SQL 属性。如果您只是添加要在 sql 语句中显示的列，您会得到预期的结果。至于“排水沟”，您将不得不在运行时以某种方式破解网格。

# c++ - 获取存储在矩阵中的图像的 ROI 的平均 R、G 和 B

> ID：12857163
> 
> 赞同：3
> 
> 时间：2012-10-12T10:32:43.323
> 
> 标签：c++, opencv

我在 C++ 中使用 OpenCV。我有一个矩阵来存储来自某个图像的 ROI。现在我想计算所有像素的平均 R、G 和 B 值（基本上是 ROI 矩阵值）。更长的方法是使用两个 for 循环并访问每个像素，然后访问每个流。但是Open CV中有一个功能 `Scalar mean(const Mat& mtx)` 我可以使用吗？如果是，那么我的标量元素到底有什么。文档说明它是一个 4 元素向量。如果有的话，哪些元素将包含平均 R、G 和 B？

```
cv::Mat3b roiMat = imgMat(cv::Rect(hSt,vSt,hEn,vEn));
mean =  cv::mean(roiMat); 
```

有/是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T10:42:29.353

那个怎么样：

```
cv::Mat3b roiMat = imgMat(cv::Rect(hSt,vSt,hEn,vEn));
cv::Scalar mean;
mean =  cv::mean(roiMat);
std::cout<<mean[0]<<std::endl; //blue mean
std::cout<<mean[1]<<std::endl; //green
std::cout<<mean[2]<<std::endl; //red 
```

希望对你有帮助，祝你好运

# svn - 管理主干和功能分支：本地删除，合并时的传入删除

> ID：12857166
> 
> 赞同：1
> 
> 时间：2012-10-12T10:33:16.753
> 
> 标签：svn, merge, conflict

我正在使用带有功能分支方案的 svn。每当我尝试将主干合并到分支时，都会遇到“本地删除，合并时传入删除”的问题。这对我来说没有意义。我做了什么来重现错误：1）使用“svn copy ^/blabla/trunk ^/blabla/branches/test-merge”创建一个分支 2）将一个新文件添加到主干“touch tc；svn add tc；svn commit " 3) 合并到主干到分支 "svn merge ^/blabla/trunk ^/blabla/branches/test-merge" 输出为：

```
--- Merging differences between repository URLs into '.':
 C t.c
Summary of conflicts:
 Tree conflicts: 1 
```

我正在使用版本“1.6.17 (r1128011)”

手动解决冲突（使用 svn accept）没有帮助。新文件不会出现在分支中，并且新的合并会导致相同的冲突。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T16:52:46.640

提取自`svn help merge`

> 4 这种形式称为“2-URL 合并”：
> 
> ```
>  svn merge SOURCE1[@N] SOURCE2[@M] [TARGET_WCPATH] 
> ```
> 
> 指定了两个源 URL，以及两个修订版 N 和 M。在指定修订版处比较两个源，并将差异应用于 TARGET_WCPATH，它是**另一个分支的工作副本的**路径。

我将在合并之前跳过一些初步步骤，并将在某些地方使用 Win 风格的路径（这里没有 bash，抱歉）并稍微改变工作流程（分支将是非空的）

```
z:\>dir /B
svn
localws 
```

* * *

```
z:\>dir localws /B /S
z:\localws\mtree
...
z:\localws\mtree\branches
z:\localws\mtree\trunk 
```

* * *

```
z:\>svn ls -v -R file:///Z:/svn/mtree
      3 Badger                окт 13 21:30 ./
      3 Badger                окт 13 21:30 branches/
      2 Badger                окт 13 21:29 trunk/ 
```

（repo 和 WC 准备好了，但还是空的）

* * *

创建并提交到主干的文件

```
z:\>dir /B z:\localws\mtree\trunk
1.txt
2.txt

z:\>svn ls -v -R file:///Z:/svn/mtree
      4 Badger                окт 13 21:48 ./
      3 Badger                окт 13 21:30 branches/
      4 Badger                окт 13 21:48 trunk/
      4 Badger              9 окт 13 21:48 trunk/1.txt
      4 Badger              9 окт 13 21:48 trunk/2.txt 
```

* * *

分行发起

```
Z:\localws\mtree\trunk>svn copy file:///Z:/svn/mtree/trunk file:///Z:/svn/mtree/branches/test-reintegrate -m "Create test-reintegrate branch"

Committed revision 5. 
```

测试一下

```
Z:\localws\mtree\trunk>svn ls -v -R file:///Z:/svn/mtree
      5 Badger                окт 13 22:17 ./
      5 Badger                окт 13 22:17 branches/
      5 Badger                окт 13 22:17 branches/test-reintegrate/
      4 Badger              9 окт 13 21:48 branches/test-reintegrate/1.txt
      4 Badger              9 окт 13 21:48 branches/test-reintegrate/2.txt
      4 Badger                окт 13 21:48 trunk/
      4 Badger              9 окт 13 21:48 trunk/1.txt
      4 Badger              9 окт 13 21:48 trunk/2.txt 
```

`svn up`并在 Z:\localws\mtree之后获取更新的 WC

```
Z:\localws\mtree>dir /B /S
Z:\localws\mtree\branches
Z:\localws\mtree\trunk
...
Z:\localws\mtree\branches\test-reintegrate\2.txt
Z:\localws\mtree\branches\test-reintegrate\1.txt
Z:\localws\mtree\trunk\1.txt
Z:\localws\mtree\trunk\2.txt 
```

* * *

向主干添加了新文件，在分支中编辑了文件

```
Z:\localws\mtree>svn log -v -r6:7
------------------------------------------------------------------------
r6 | Badger | 2012-10-13 22:28:04 +0600 (Сб, 13 окт 2012) | 1 line
Changed paths:
   A /mtree/trunk/3.txt

Added new file to trunk
------------------------------------------------------------------------
r7 | Badger | 2012-10-13 22:29:20 +0600 (Сб, 13 окт 2012) | 1 line
Changed paths:
   M /mtree/branches/test-reintegrate/2.txt

Some changes
------------------------------------------------------------------------ 
```

服务器端视图

```
Z:\localws\mtree>svn ls -v -R file:///Z:/svn/mtree
      7 Badger                окт 13 22:29 ./
      7 Badger                окт 13 22:29 branches/
      7 Badger                окт 13 22:29 branches/test-reintegrate/
      4 Badger              9 окт 13 21:48 branches/test-reintegrate/1.txt
      7 Badger             17 окт 13 22:29 branches/test-reintegrate/2.txt
      6 Badger                окт 13 22:28 trunk/
      4 Badger              9 окт 13 21:48 trunk/1.txt
      4 Badger              9 окт 13 21:48 trunk/2.txt
      6 Badger              9 окт 13 22:28 trunk/3.txt 
```

* * *

将分支与主干同步 - 将**主干中的更改合并到测试重新集成**

```
Z:\localws\mtree>cd branches

Z:\localws\mtree\branches>cd test-reintegrate
Z:\localws\mtree\branches\test-reintegrate>svn merge file:///Z:/svn/mtree/trunk
--- Merging r5 through r7 into '.':
A    3.txt
--- Recording mergeinfo for merge of r5 through r7 into '.':
 U   . 
```

检查 WC 状态

```
Z:\localws\mtree\branches\test-reintegrate>dir /B
2.txt
1.txt
3.txt 
```

并提交结果

```
Z:\localws\mtree\branches\test-reintegrate>svn commit -m "Sync of test-reintegrate"
Sending        .
Adding         3.txt

Committed revision 8. 
```

服务器端

```
Z:\>svn ls -v file:///Z:/svn/mtree/branches/test-reintegrate
      8 Badger                окт 13 22:47 ./
      4 Badger              9 окт 13 21:48 1.txt
      7 Badger             17 окт 13 22:29 2.txt
      8 Badger              9 окт 13 22:47 3.txt 
```

# 恢复

与您的风格相比，我的变化（以及“胜利失败”的结果）

*   没有 ^ 速记的完整路径（即使在舞台上我也遇到了错误`svn copy`，AFAIK ^ 推荐并在“WC 根中的分支”样式的情况下可用，而不是组合常见的 WC/但我可能是错的/）

*   使用经典的合并形式（单一 URL）

高温高压

# php - 如何使用php获取请求进入的服务器地址的IP地址？

> ID：12857170
> 
> 赞同：0
> 
> 时间：2012-10-12T10:33:21.340
> 
> 标签：php, ip

有 2 台服务器 A 和 B。我在服务器 B 中有我的 php 脚本。现在，客户端将一些数据发送到服务器 A，服务器 A 将其发送到服务器 B。

我想获取请求的 IP 地址（即服务器 A）。我怎样才能使用 php 来做到这一点？

如果我使用`$_SERVER['REMOTE_ADDR']`，我会得到客户端的 IP 地址。如果我使用`$_SERVER['SERVER_ADDR']`，我会得到空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:43:42.103

`$_SERVER['SERVER_NAME']`并且`$_SERVER['HTTP_HOST']`应该返回服务器的 DNS 名称。如果您可以使用 DNS 而不是 IP，我认为您应该尝试使用这些变量之一。虽然，如前所述，如果没有`$_SERVER['SERVER_ADDR']`填充，您可能有错误的配置。

提供有关服务器、IIS/Apache、操作系统、PHP 版本的信息，这可能更容易提供帮助。

此外，尝试`$_SERVER['SERVER_ADDR']`在请求进入的服务器 A 上回显/记录，看看您是否从那里获得一个值，因为`$_SERVER['SERVER_ADDR']`在服务器 B 上读取应该为您提供服务器 B 的 IP。如果您在服务器 A 上获得一个值，您可以保存/传递在代码中将值转发到服务器 B（无论您从服务器 A 到 B 的事务发生在哪里）。

[“执行当前脚本的服务器的 IP 地址。”](http://php.net/manual/en/reserved.variables.server.php)

# java - 在android中使用日期作为文本的Sqlite查询？

> ID：12857173
> 
> 赞同：1
> 
> 时间：2012-10-12T10:33:43.027
> 
> 标签：java, android, sqlite, datetime

我有一个应用程序，它在 sqlite 数据库中有一些措施。

从一个活动（电子邮件活动）中，用户选择将哪些数据发送到医生的电子邮件（过去 1/7/30 天的数据）。

![在此处输入图像描述](../Images/7f9eb29aafcf54e436d5f79c212ab1f1.png)

这是此活动的代码：

```
import com.oikonomopo.blood.pressure.tracker.dao.BpDAO;

...

public class EmailActivity extends Activity implements OnItemSelectedListener {

    Spinner spinner;
    String[] measures = { "today", "7 days", "30 days" };

    private Calendar theStart;
    private Calendar theEnd;
    SimpleDateFormat dateFormat;
    String start;
    String end;

    //this refers to another class for the manipulate of my table
    private BpDAO dao = null;

    private Button sendEmailBtn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.email);

        // ////////////////////////////////////
        theEnd = Calendar.getInstance();
        theStart = (Calendar) theEnd.clone();
        dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm");
        // //////////////////////////////////

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                EmailActivity.this, android.R.layout.simple_spinner_item,
                measures);

        sendEmailBtn = (Button) findViewById(R.id.button1);
        spinner = (Spinner) findViewById(R.id.spinner1);
        spinner.setAdapter(adapter);
        spinner.setOnItemSelectedListener(this);

        // BpDao - refers to my table - see later
        dao = new BpDAO(this);

        // add a click listener to the button
        sendEmailBtn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
/////////////////////////////////////////////////////////////////////////////////////////
                Log.d("BPT", "before"); // it works untill here
                Cursor bpLastDaysList = dao.lastXdays_bp(start, end);
                Log.d("BPT", "after"); //doesn't reach the code here!!
/////////////////////////////////////////////////////////////////////////////////////////
            }
        });
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        dao.close();
    }

    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        int position = spinner.getSelectedItemPosition();
        switch (position) {

                // last day
        case 0:
            theStart.add(Calendar.DAY_OF_MONTH, -1);

            // date boundaries in TEXT format
            start = dateFormat.format(theStart.getTime());
            end = dateFormat.format(theEnd.getTime());
            //
            break;

        // last 7 days
        case 1:
            theStart.add(Calendar.DAY_OF_MONTH, -7);

            // date boundaries in TEXT format
            start = dateFormat.format(theStart.getTime());
            end = dateFormat.format(theEnd.getTime());
            //
            break;

        // last 30 days
        case 2:
            theStart.add(Calendar.DAY_OF_MONTH, -30);

            // date boundaries in TEXT format
            start = dateFormat.format(theStart.getTime());
            end = dateFormat.format(theEnd.getTime());
            //
            break;
        }
    }

} 
```

但它给了我这个**logcat 错误**：

```
 FATAL EXCEPTION: main
android.database.sqlite.SQLiteException: near "09": syntax error: , while compiling: SELECT DISTINCT systolic, diastolic, datetime, _id, notes, pulses FROM bp_import WHERE datetime BETWEEN 2012-10-12 09:44 AND 2012-10-12 09:44 ORDER BY datetime DESC
at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
...
at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
at com.oikonomopo.blood.pressure.tracker.dao.BpDAO.lastXdays_bp(BpDAO.java:76)
at com.oikonomopo.blood.pressure.tracker.EmailActivity$1.onClick(EmailActivity.java:70) 
```

**android.database.sqlite.SQLiteException：接近“09”：语法错误：，编译时：SELECT DISTINCT systolic、diastolic、datetime、_id、notes、pulses FROM bp_import WHERE datetime BETWEEN 2012-10-12 09:44 AND 2012-10 -12 09:44 按日期时间 DESC 排序**

* * *

BpDAO 类的函数代码是：

```
 public class BpDAO {
        private DatabaseHelper_bp dbHelper;
        private SQLiteDatabase database;
        /**
         * Movie table related constants.
         */
        public final static String bp_TABLE = "bp_import";
        public final static String bp_ID = "_id";
        public final static String bp_DT = "datetime";
        public final static String bp_SYS = "systolic";
        public final static String bp_DIA = "diastolic";
        public final static String bp_PUL = "pulses";
        public final static String bp_NOT = "notes";

        public BpDAO(Context context) {
            dbHelper = new DatabaseHelper_bp(context);
            database = dbHelper.getWritableDatabase();
        }

        /**
         * \ Creates a new blood pressure measure
         * 
         * @param datetime
         * @param systolic
         * @param diastolic
         * @param pulses
         * @param notes
         * @return
         */
        public long importBP(String datetime, String systolic, String diastolic,
                String pulses, String notes) {
            ContentValues values = new ContentValues();
            values.put(bp_DT, datetime);
            values.put(bp_SYS, systolic);
            values.put(bp_DIA, diastolic);
            values.put(bp_PUL, pulses);
            values.put(bp_NOT, notes);
            return database.insert(bp_TABLE, null, values);
        }

    // this is working perfect
        /**
         * Fetch all bps sorted DESCending
         * @return
         */
        public Cursor fetchAll_bp() {
            Cursor mCursor = database.query(true, bp_TABLE, new String[] { bp_SYS,
                    bp_DIA, bp_DT, bp_ID, bp_NOT, bp_PUL }, null, null, null, null,
                    bp_DT + " DESC", null);
            if (mCursor != null) {
                mCursor.moveToFirst();
            }
            return mCursor;
        }
    // here is the problem!
        /**
         * Fetch all bps sorted DESCending by date(yyyy-mm-dd hh:mm) of last
         * X[1-7-30] days
         * @return
         */
        public Cursor lastXdays_bp(String start, String end) {
            Cursor mCursor = database.query(true, bp_TABLE, new String[] { bp_SYS,
                    bp_DIA, bp_DT, bp_ID, bp_NOT, bp_PUL }, "datetime BETWEEN "
                    + start + " AND " + end, null, null, null, bp_DT + " DESC",
                    null);
            if (mCursor != null) {
                mCursor.moveToFirst();
            }
            return mCursor;
        }
//
        public void close() {
            database.close();
        }
    } 
```

DatabaseHelper_bp(extends SQLiteOpenHelper) 的代码是：

```
 public class DatabaseHelper_bp extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "bpDB";
    private static final int DATABASE_VERSION = 1;

    // Database creation sql statement
    private static final String DATABASE_CREATE = "create table bp_import ( _id integer primary key, datetime text not null, systolic text not null, diastolic text not null, pulses text not null, notes text not null);";

    public DatabaseHelper_bp(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Method is called during creation of the database
    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE);
    }

    // Method is called during an upgrade of the database,
    @Override
    public void onUpgrade(SQLiteDatabase database, int oldVersion,
            int newVersion) {
        Log.w(DatabaseHelper_bp.class.getName(),
                "Upgrading database from version " + oldVersion + " to "
                        + newVersion + ", which will destroy all old data");
        database.execSQL("DROP TABLE IF EXISTS bp_import");
        onCreate(database);
    }
} 
```

我将日期时间保存为 sqlite 中的文本。(2012-10-12 09:43)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:39:40.967

```
Cursor mCursor = database.query(true, bp_TABLE, new String[] { bp_SYS,
                bp_DIA, bp_DT, bp_ID, bp_NOT, bp_PUL }, "datetime BETWEEN ?
              AND ?" , new String[]{start,end}, null, null, bp_DT + " DESC",
                null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:36:35.423

日期字符串**必须**用 SQL 中的引号括起来 - 错误出现在 BpDAO/lastXdays_bp(String start, String end) 方法中。

而且Sardor Dushamov的方法更好

# mysql - 以 10 秒、20 秒等为一组返回标记行

> ID：12857175
> 
> 赞同：4
> 
> 时间：2012-10-12T10:33:46.817
> 
> 标签：mysql, sql

我有一张这样的座位号和标记表：

```
seat    marks
61      45
62      25
63      45
64      23
65      25
66      9
67      23 
```

最高分是 100。现在我想显示有多少候选人在 10 秒、20 秒、30 秒、.... 100 秒内获得分数

```
marks     candidates_count
10        1
20        4
30        0
..        .. 
```

等等。现在我知道了

```
SELECT seat, marks, count(marks) as counts from <table> group by marks order by counts  desc; 
```

或者每 10 秒、20 秒和 30 秒执行一次

```
SELECT seat, marks from <table> where marks>10 and marks<=20 group by marks; 
```

并获取我的 php 中返回的行数并返回结果，但这不是很优雅。必须有一种方法可以直接在 MySQL 中执行此操作，而无需使用 MySQL for 循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:36:22.757

尝试这个：

```
select (marks/10)*10 as marks,
       count(*) as candidates_count
from <table>
group by (marks/10)*10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:53:16.197

以下肯定会为您工作

```
select (FLOOR(`marks`/ 10)+1)*10 as marks,
       count(*) as candidates_count
from <table>
group by (FLOOR(`marks`/ 10)+1)*10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:56:45.927

Try:

```
select ((marks/10)+1)*10, count(1) 
from tab
group by ((marks/10)+1)*10 
```

But if you want to see `0` you have to prepare expected marks:

```
create table tab2
(  
  marks int
)

insert into tab2 values(10)
insert into tab2 values(20)
insert into tab2 values(30)
insert into tab2 values(40)
insert into tab2 values(50)
insert into tab2 values(60)
....
insert into tab2 values(100) 
```

and use `right join`:

```
select t2.marks, count(tab.marks) 
from tab
right join tab2 t2 on t2.marks = ((tab.marks/10)+1)*10
group by t2.marks
order by 1 
```

# teamcity - 在云端自动授权团队城市构建代理

> ID：12857176
> 
> 赞同：2
> 
> 时间：2012-10-12T10:33:48.743
> 
> 标签：teamcity, rackspace-cloud

我们使用 rackspace 作为我们的云提供商，并在需要时从现有服务器映像中启动新的构建代理。

然后，Team city 会检测构建代理映像，但不会自动对其进行授权。

你能告诉我如何授权构建代理而不需要手动去团队城市并单击授权，因为这些服务器可以启动不同的风格，每个都有不同的配置。

我是否只需将正确的授权密钥写入构建代理配置文件，还是有更好的方法将团队城市与云服务器一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-25T15:17:55.750

在 TeamCity 10 中，您可以使用[REST API](https://confluence.jetbrains.com/display/TCD10/REST+API#RESTAPI-Agents)在启动时使用管理员用户名/密码授权代理：

```
curl -sS -X PUT --data "true" -H "Content-Type:text/plain" -u ${TEAMCITY_SERVER_USERNAME}:${TEAMCITY_SERVER_PASSWORD} ${TEAMCITY_SERVER_URL}/httpAuth/app/rest/agents/${TEAMCITY_AGENT_NAME}/authorized 
```

如果尾随`BuildAgent/logs/teamcity-agent.log`文件，您将看到一条`Registered`消息，然后您可以运行上述命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:07:25.827

对我有用的方法是存储写入构建代理配置文件的唯一授权代码，然后将其传递到团队城市构建步骤。然后，构建步骤使用 powershell 更新构建代理配置文件，并且构建代理在下一次与团队城市服务器通信时被授权。

# php - 将 php 值解析为 javascript 未捕获的 ReferenceError

> ID：12857177
> 
> 赞同：0
> 
> 时间：2012-10-12T10:34:02.647
> 
> 标签：php, javascript, html

> **可能重复：**
> [PHP 回显的 Javascript 未运行](https://stackoverflow.com/questions/8360008/javascript-echod-by-php-doesnt-run)

在下面的代码中，我将 php 表中的值解析为 javascript 函数，但是我得到了 Uncaught ReferenceError: "the php text" is not defined (anonymous function)

```
<html>
    <script type="text/javascript">
        function draw(name ) {
            alert(name);
        }
    </script>

    <body>
        <canvas id="mycanvas" width=800 height=400></canvas>
    </body>
</html>

<?php
    $query = 'SELECT * FROM graph_table';
    $result = mysql_query($query);
    while($val = mysql_fetch_array($result)) {
        $name =  $val['test_name'];
             echo '<script type="text/javascript">    draw('.$name .');          </script>';
        }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:35:37.680

您需要在之间添加引号，`draw`因为您将文本传递给它。`draw(\''.$name.'\');`会让你的问题消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:37:07.387

尝试这个

```
<script type="text/javascript">
    <?php
    $query = 'SELECT * FROM graph_table';
    $result = mysql_query($query);
    while($val = mysql_fetch_array($result)) {
        $name =  $val['test_name'];
             echo "draw('$name');";
        }
?>

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:48:08.390

试试里面的 php 脚本。主要是你应该在之前添加 js 脚本。

# jqgrid - onclick 事件未在添加到 jqGrid 的每个子网格单元的按钮上触发

> ID：12857181
> 
> 赞同：0
> 
> 时间：2012-10-12T10:34:41.783
> 
> 标签：jqgrid

我已经为 jqGrid 的子网格的每一行添加了一个按钮。我只是为此遵循了 inline_editing 的文档。

我想在单击按钮时调用服务器端代码。但是当我看到萤火虫时，它显示没有请求（没有显示任何 url 请求）单击按钮。

下面是我的代码，

```
subGridRowExpanded: function (subgrid_id, row_id) {
 var subgrid_table_id, pager_id;
 subgrid_table_id = subgrid_id + "_t";
 pager_id = "p_" + subgrid_table_id;
 $("#" + subgrid_id)
     .html("<table id='" + subgrid_table_id + "' class='scroll'></table><div id='" + pager_id + "' class='scroll'></div>");
 $mysubgrid = jQuery("#" + subgrid_table_id);
 $mysubgrid.jqGrid({
     url: "serversub.php",
     datatype: "json",
     colNames: ['Product Id', 'Product Name', 'status', ''],
     width: 700,
     colModel: [{
         name: 'productid',
         index: 'productid',
         width: 55
     }, {
         name: 'productname',
         index: 'productname',
         width: 90
     }, {
         name: 'status',
         index: 'status',
         width: 80,
         search: false
     }, {
         name: 'link',
         index: 'link',
         width: 80,
         search: false
     }],
     rowNum: 20,
     sortname: 'num',
     sortorder: "asc",
     gridComplete: function () {
         var ids = $mysubgrid.jqGrid('getDataIDs');
         for (var i = 0; i < ids.length; i++) {
             var cl = ids[i];

           se = "<input style='height:22px;width:20px;'
  type='button' value='Update' onclick=\"$mysubgrid.saveRow('" + cl + "');\" />";
             $mysubgrid.jqGrid('setRowData', ids[i], {
                 link: se
             });
         }
     },
     editurl: "saveserversub.php"
 }); 
```

我在这里错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:09:36.610

您调用的函数`onclick`仅包含**全局**变量。你不能使用局部`$mysubgrid`变量。

我建议您在[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)中创建您需要的按钮并使用（就像在所有其他网格中一样）选项`gridview: true`。它将提高网格的性能。

此外，我认为您不需要`onclick`在插入到网格列中的按钮上设置任何内容。如果`click`事件被触发并且没有[冒泡](http://en.wikipedia.org/wiki/DOM_events#Event_flow)`click`的事件处理程序发生。所以你可以只使用回调。如果您需要单击按钮的原始 DOM 对象，您可以在.`onCellSelect``e.target`

# c++ - 我需要在字段的构造函数中使用互斥锁吗？

> ID：12857182
> 
> 赞同：8
> 
> 时间：2012-10-12T10:34:43.430
> 
> 标签：c++, mutex

假设我有一个简单的 A 类，在 C++ 中有一个字段。该字段在构造函数中初始化。A 类也有一个`doit()`用于修改该字段值的方法。`doit()`将从多个线程调用。如果我只在`doit()`方法中有一个互斥锁，这就足够了吗？我是否可以保证永远不会读取未初始化的字段（因为构造函数中没有锁）？

**编辑：**我可能还不够清楚。没有涉及处理器缓存或类似问题的问题吗？我的意思是，如果没有用于初始化内存区域（即我的字段）的互斥锁 - 是否没有其他线程会读取一些垃圾值的风险？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T10:42:33.263

您的对象只能初始化一次，并且在初始化之前您将无法使用它，因此您不需要在那里使用互斥锁。但是，您将需要在您的函数中使用互斥锁或其他合适的锁`DoIt`，正如您所说，这将跨多个线程访问。

**已编辑问题的更新：**不，您无需担心处理器缓存。您必须先构造您的对象，然后才能拥有它的句柄。只有拥有此句柄后，才能将其传递给其他线程以供使用。我想说的是，产生的线程**必须**在原始对象构建之后开始，它不可能反过来发生！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:45:41.123

无法调用`doit()`尚未创建的对象，因此您不需要在构造函数中使用互斥锁。

如果`doit()`是访问该字段的唯一方法，那么您应该没问题。

如果您的类的其他方法也访问该字段，即使是从单个线程，那么您也必须在这些方法中使用互斥锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:11:37.583

1.  您首先需要在那些讨厌的线程得到它之前构造对象。操作系统将为仅由一个线程调用的构造函数分配内存。Ths OS 负责该分配，因此您无需执行任何操作。地狱，您甚至可以在两个不同的线程中创建同一类的两个对象。
2.  您可以非常保守，并在使用该字段锁定它的任何方法的开头使用互斥锁，然后释放它并结束。

或者，如果您了解各种方法与各种算法的交互，您可以对使用该字段的代码的[关键部分](http://en.wikipedia.org/wiki/Critical_section)使用互斥锁——即，该部分代码需要确保该字段在执行期间不会被另一个线程更改。处理，但你的方法可以在临界区之后释放锁，做其他事情然后可能有另一个临界区。

# xml - 如何跟踪存储在 Oracle Berkeley DB XML 中的文件的更改

> ID：12857188
> 
> 赞同：1
> 
> 时间：2012-10-12T10:34:59.750
> 
> 标签：xml, version-control, clearcase, berkeley-db

我想知道如何跟踪对存储在 Berkeley DB XML 中的 XML 文件所做的修改。

例如

我们有许多存储一些参数的 XML 文件。我们打算将它们存储在 Berkeley DB XML 中。

但我们希望能够使用版本控制工具（Clearcase、svn、...）跟踪存储在 Berkeley DB XML 中的同一 XML 文件的两个版本之间的更改

有可能吗？Berkeley DB XML 的版本控制是一种选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:04:42.713

您将不得不自己将这种变更管理架构到需要变更管理的应用程序中。或者，如果您正在寻找一种更加取证的方法，您可以挖掘交易日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:57:11.637

# cmake - 如何在 CMake 文件中添加头文件路径

> ID：12857189
> 
> 赞同：5
> 
> 时间：2012-10-12T10:34:59.493
> 
> 标签：cmake, opencl

我是 OpenCL 的新手。在 Internet 的帮助下，我在 OpenCL 中编写了矢量添加代码。我已经包含了一个头文件，即`CL/cl.h`使用`#include`.

我使用的是 NVIDIA 显卡，OpenCL 实现是 NVIDIA_GPU_Computing_SDK。我的 OpenCL 头文件位于此路径`/opt/NVIDIA_GPU_Computing_SDK/OpenCL/common/inc`。通过在编译代码时添加此路径，我可以通过 linux 终端运行 OpenCL 程序。但现在我想为这段代码编写 CMake 文件。由于此路径问题，CMake 文件对 C 程序运行良好，但对 OpenCL 程序运行不正常。在终端，我以前输入`$cmake .`，之后`$make`，它会搜索一个由cmake创建的Makefile，现在我的错误是输入命令后`make`

```
fatal error: CL/cl.h: No such file or directory! 
```

现在告诉我如何将这个头文件包含到 CMake 文件中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-12T12:19:27.770

您需要将这些行放入 CMakeLists.txt：

```
include_directories(/opt/NVIDIA_GPU_Computing_SDK/OpenCL/common/inc)
link_directories(/opt/NVIDIA_GPU_Computing_SDK/OpenCL/common/<lib or something similar>)

add_executable(yourexe src1.c ...)
target_link_libraries(yourexe OpenCL) 
```

但请注意，这不是可移植的，因为 OpenCL SDK 可以位于另一台机器上的其他位置。正确的方法是使用`FindOpenCL.cmake`模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:21:03.683

也许您可以使用 CMake“查找”脚本，例如：

*   [http://gitorious.org/findopencl/findopencl/blobs/master/FindOpenCL.cmake](http://gitorious.org/findopencl/findopencl/blobs/master/FindOpenCL.cmake)
*   [http://code.google.com/p/opencl-book-sa​​mples/source/browse/trunk/cmake/FindOpenCL.cmake?r=14](http://code.google.com/p/opencl-book-samples/source/browse/trunk/cmake/FindOpenCL.cmake?r=14)

OpenCL Programming Guide Book 中的 CMake 文件示例：[http ://code.google.com/p/opencl-book-sa​​mples/source/browse/trunk/CMakeLists.txt?r=14](http://code.google.com/p/opencl-book-samples/source/browse/trunk/CMakeLists.txt?r=14)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-16T14:58:21.843

我一直在寻找在 Windows、OSX 和 Linux 上运行良好的 FindOpenCL.cmake 宏...我找不到在每个平台上运行良好的宏，所以我编写了新的宏，我在几个项目中使用（webcl-验证器和 opencl-testsuite）。

[https://github.com/elhigu/cmake-findopencl](https://github.com/elhigu/cmake-findopencl)

特别是 Windows 支持在这一方面得到了改进。

在 Windows 中，它会检查是否应该使用 64 位或 32 位库，它还会尝试根据 Nvidia、Intel 和 AMD OpenCL SDK 设置的环境变量来查找库。

它还尝试在 Cygwin 中查找 .lib，但它不适用于我尝试过的其他脚本。

# c# - 窗口服务的通知图标

> ID：12857191
> 
> 赞同：15
> 
> 时间：2012-10-12T10:35:24.763
> 
> 标签：c#, visual-studio-2010, windows-services

我已经开发了一个 win 服务程序，它从我的本地驱动器读取一个 excel 文件，然后将此文件值保存到数据库中，现在我想开发一个通知图标，它将在之后显示一条消息（“Excel 文件保存在数据库中”）我的服务将启动并将 excel 文件保存到数据库。

请给我一些提示来解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T10:37:31.940

从 Vista 开始，您的服务将不允许与桌面交互，因此不能让 UI 直接在服务之外运行。您需要构建一个代理应用程序，该应用程序在用户登录时启动，可以与您的服务聊天（可能使用 WCF）。

以下是[MS](http://msdn.microsoft.com/en-us/windows/hardware/gg463353.aspx)对此的评价：

> 对于更复杂的交互，开发人员应该将他们的 UI 代码移动到在用户会话中运行并处理所有 UI 要求的代理中。代理通过 RPC 或命名管道与服务通信。如果用户使用控制面板、Internet Explorer 或类似的 UI 体验启动 UI 交互，则该 UI 体验应启动代理。然后代理处理所有 UI 交互。如果需要 UI 但用户未启动，则服务必须请求代理启动任何所需的 UI，而不是尝试自行启动该 UI。在服务必须启动用户交互并且代理尚未运行的极少数情况下，服务应调用 CreateProcessAsUser API 来启动代理。然后代理可以启动所有 UI 交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:47:54.007

这里的问题是windows服务在后台运行，对用户桌面没有影响。

您可以创建一个与此类似的应用程序（没有 windows 窗体）：[Notify Icon control in .Net 2.0](http://www.codeproject.com/Articles/12312/Notify-Icon-control-in-NET-2-0-with-balloon-tips)

然后在应用程序中使用类似以下类的东西与 Windows 服务进行通信：

```
public class Program
{
    public int Setting { get; set; }
}

[ServiceContract]
public interface ISettingService
{
    [OperationContract]
    void SetSetting(int setting);
}

public class SettingService : ISettingService
{
    private readonly Program program;

    public SettingService(Program program)
    {
        this.program = program;
    }

    public void SetSetting(int setting)
    {
        program.Setting = setting;
    }
}

internal class CustomInstanceProvider : IInstanceProvider
{
    private readonly Program program;

    public CustomInstanceProvider(Program program)
    {
        this.program = program;
    }

    public object GetInstance(InstanceContext instanceContext, Message message)
    {
        return GetInstance(instanceContext);
    }

    public object GetInstance(InstanceContext instanceContext)
    {
        return new SettingService(program);
    }

    public void ReleaseInstance(InstanceContext instanceContext, object instance)
    {
        IDisposable disposable = instance as IDisposable;
        if (disposable != null)
        {
            disposable.Dispose();
        }
    }
}

internal class CustomInstanceProviderBehaviorAttribute : Attribute, IServiceBehavior
{
    private readonly IInstanceProvider instanceProvider;

    public CustomInstanceProviderBehaviorAttribute(IInstanceProvider instanceProvider)
    {
        this.instanceProvider = instanceProvider;
    }

    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ChannelDispatcher cd in serviceHostBase.ChannelDispatchers)
        {
            foreach (EndpointDispatcher ed in cd.Endpoints)
            {
                if (!ed.IsSystemEndpoint)
                {
                    ed.DispatchRuntime.InstanceProvider = instanceProvider;
                }
            }
        }
    }

    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters) { }
    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase) { }
}

public class CustomServiceHost : ServiceHost
{
    private readonly Program p;

    public CustomServiceHost(Program program, params Uri[] baseAddresses)
    : base(typeof(SettingService), baseAddresses)
    {
        this.p = program;
    }

    protected override void OnOpening()
    {
        Description.Behaviors.Add(new CustomInstanceProviderBehaviorAttribute(new CustomInstanceProvider(p)));
        base.OnOpening();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:33:47.620

我认为您需要`NotifyIcon.ShowBalloonTip`Method 在您的服务中实施。您可能需要阅读[此](http://msdn.microsoft.com/en-us/library/ms160064.aspx)内容。

# c# - C# WinForms 自定义控件默认属性

> ID：12857194
> 
> 赞同：10
> 
> 时间：2012-10-12T10:35:37.150
> 
> 标签：c#, .net, winforms, custom-controls, controls

如何设置自定义控件的默认属性，即当它们第一次被拖到设计器中的表单上时？

在此处或通过 Google 找不到答案；我得到的只是如何约束这些值。

以宽度和高度为例，如果我在构造函数中设置它们，则每次打开设计器时它们都会应用于控件。如何将它们设置为用户更改属性后不再应用的默认值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:59:15.903

尝试使用[DefaultValue](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute%28v=vs.90%29.aspx)属性。

```
private int height;

[DefaultValue(50)]
public int Height
{
    get 
    {
       return height;
    }
    set 
    {
       height=value;
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-01T02:42:21.567

对于我无法覆盖的属性，对我有用的是使用`new`运算符。例如，控件`MultiSelect`上的属性。`ListView`我想`MultiSelect`默认为`false`，但我仍然希望能够更改它。

如果我只是`false`在构造函数中将其设置为，或者在 中`InitializeComponent`，问题（我认为）是默认值仍然是`true`，所以如果我`true`在设计器中将值设置为，设计器会注意到这`true`是默认值，所以只是没有'根本不设置属性，而不是将其显式设置为它认为已经是默认值的值。但是值最终变成`false`了，因为这是在构造函数中设置的。

为了解决这个问题，我使用了以下代码：

```
/// <summary>Custom ListView.</summary>
public sealed partial class DetailsListView : ListView
{
   ...

   [DefaultValue(false)]
   public new bool MultiSelect {
      get { return base.MultiSelect; }
      set { base.MultiSelect = value; }
   } 
```

这允许控件仍然具有`MultiSelect`默认为`false`而不是的功能属性`true`，并且仍然可以在新控件上切换该属性。

编辑：我遇到了与使用抽象形式有关的问题。我一直在使用抽象表单类，并在需要使用设计器时切换到具体实现。我发现当我切换我继承的类时，我的自定义控件上的属性将重置为旧的默认值。我似乎通过在自定义控件的构造函数中将属性设置为默认值来纠正这种行为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T10:45:33.940

下面将允许您在显示表单时添加值，之后您可以根据需要进行设置。

```
private int widthLength = 5;  

public int Width {      

     get { return widthLength ; } 
     set { widthLength = value;   
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T10:41:00.000

在构造函数中，设置您希望在将其拖到画布上时显示的属性值。或者，如果它们是基本控件的内置属性，则在设计器代码类中设置它们。

# iphone - 如何创建一个 iOS UISlider 来显示一个 UILabel，该 UILabel 显示一个 1 到 10 范围内的值？

> ID：12857196
> 
> 赞同：3
> 
> 时间：2012-10-12T10:35:39.197
> 
> 标签：iphone, ios, uislider

我是 iOS 开发新手，在`UISlider`. 我已在连接到文件中添加了一个`UISlider`，并且可以在文件中看到操作方法，但是当我尝试在 UISlider 属性中设置文件中的最小值和最大值时，XCode 崩溃。我认为这与在文件中的方法中创建值有关，但我做错了，因为我尝试的一切都会导致 XCode 崩溃。`.xib``.h``.m``.xib``- (IBAction)slider:(id)sender``.m`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T10:58:14.117

```
CGRect frame = CGRectMake(0.0, 0.0, 200.0, 10.0);

// sliderAction will respond to the updated slider value
UISlider *slider = [[UISlider alloc] initWithFrame:frame];
[slider addTarget:self action:@selector(sliderAction:) forControlEvents:UIControlEventValueChanged]; 
```

***// Set minimum and maximum value of Slider***

```
 slider.minimumValue = 0.0;
    slider.maximumValue = 10.0;
    slider.continuous = YES;

    // Initial value
    slider.value = 25.0; 
```

**// Add slider to view**

```
 [self.view addSubview:slider];

- (IBAction)sliderAction:(id)sender{
    UISlider *MYslider = (UISlider *)sender;
    int SliderValue = (int)roundf(MYslider.value);
    uilable *sliderLabel.text = [NSString stringWithFormat:@"%d", SliderValue];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:42:34.273

试试这个代码...

```
@interface SliderDemoViewController : UIViewController {

      UILabel *sliderLabel;
}

@end 
```

将以下代码放入“SliderDemoViewController.m”文件中。

```
@implementation SliderDemoViewController

@synthesize sliderLabel;

- (void)dealloc {
  [sliderLabel release];
  [super dealloc];

}

-(IBAction) sliderChanged:(id) sender{

  UISlider *slider = (UISlider *) sender;

  int progressAsInt =(int)(slider.value + 0.5f);

  NSString *newText =[[NSString alloc]
                  initWithFormat:@"%d",progressAsInt];

  self.sliderLabel.text = newText;
  [newText release];
}

@end 
```

并从下面的链接中查看有关 UISlider 的更多信息。

[http://www.xprogress.com/post-35-uislider-tutorial-example-how-to-use-slider-in-iphone-sdk-xcode/](http://www.xprogress.com/post-35-uislider-tutorial-example-how-to-use-slider-in-iphone-sdk-xcode/)

我希望这对你有帮助..

:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:54:59.587

make sure your slider is connected to the action method..and assuming that the label has an outlet by the name sliderLabel..the action method for the slider to call as it’s value is changed can be implemented as:

```
- (IBAction)slider:(id)sender{
    UISlider *slider = (UISlider *)sender;
    int progressAsInt = (int)roundf(slider.value);
    sliderLabel.text = [NSString stringWithFormat:@"%d", progressAsInt];
} 
```

here the value is rounded off to show integer values only..I am assuming that the sider isnt being implemented for a very small range like 0-1 but a larger range..and you have mentioned that you implemented slider in nib..minimum and maximum values can be set in the attribute inspector for the slider..if you do it programatically, it will be slightly different..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-31T03:28:18.777

**斯威夫特 4：**

**初始化：**

```
override func viewDidLoad() {
    super.viewDidLoad()

    let slider = UISlider()
    slider.frame = CGRect(x: 0, y: 0, width: 250, height: 35)
    slider.center = self.view.center

    slider.minimumTrackTintColor = .green
    slider.maximumTrackTintColor = .red
    slider.thumbTintColor = .black

    slider.maximumValue = 100
    slider.minimumValue = 0
    slider.setValue(50, animated: false)

    slider.addTarget(self, action: #selector(ViewController.changeVlaue(_:)), for: .valueChanged)

    self.view.addSubview(slider)

} 
```

**处理程序**

```
@objc func changeVlaue(_ sender: UISlider) {
    print("value is" , Int(sender.value));
} 
```

# node.js - API renren.com 与 nodejs

> ID：12857197
> 
> 赞同：1
> 
> 时间：2012-10-12T10:35:47.460
> 
> 标签：node.js, request, social-networking, express

我需要`like.getCount`从[renren.com API 调用](http://wiki.dev.renren.com/wiki/API) 我听不懂中文并且使用谷歌翻译我无法完全理解如何进行调用我已经在 nodejs 中有这段代码但它不起作用：

```
var postdata='[{"v":"1.0","call_id":"1333106764755", "urls":urltest}]' ;
var finalurl = 'http://api.renren.com/restserver.do';
request({  url: finalurl ,  headers: default_headers,  method: 'POST',  body: postdata},
function(error, response, body) {

    var result= JSON.parse(body);

    console.log(result);
}); 
```

有人可以帮我吗？

我有这个代码：

```
var postdata='[{"v":"1.0","call_id":"1333106764755","method":"like.getCount", "urls":'+urltest+'}]' ;
var finalurl = 'http://api.renren.com/restserver.do';
var default_headers = { 'Content-type': 'application/json' };

request({  url: finalurl ,  headers: default_headers,  method: 'POST',  body: postdata},
function(error, response, body) {
    console.log(body);
}); 
```

我总是得到`error_code=101`，`error_msg=???api_key??????????`有没有一种简单的方法可以调用这个 ren api？就像在 Facebook 或 twitter 中可能使用 nodejs 模块之类的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T07:49:02.850

您还必须在请求中传递**api_key**，您可以在此处**注册**开发者帐户[http://app.renren.com/developers](http://app.renren.com/developers)并可以创建一个应用程序，您将在其中获取 api_key。

# javascript - Javascript 货币格式

> ID：12857198
> 
> 赞同：2
> 
> 时间：2012-10-12T10:35:57.440
> 
> 标签：javascript, formatting, currency

我有一个讨厌的问题...

我正在使用一个小的 javascript 来格式化货币，例如

2990 到 2.990 和 129900 到 129.900 使用当前行：

```
var wdiscount2 = wdiscount.toFixed(3); 
```

但是，当我有一个低于 1000 的数字（例如 789）时，它会显示为 0.789

你有办法让我轻松解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:43:08.903

看起来问题可能已经得到解答，但还有另一种可能很有趣的替代方法，即使用正则表达式。

例子：

```
var num  = 2990;
var formattedNumber = num.toString().replace(/(\d)(?=(\d{3})(?!\d))/g, "$1.") 
```

几个测试用例（`num`在左边，`formattedNumber`在右边）：

*   `2990`=>`2.990`
*   `129900`=>`129.900`
*   `789`=> `789`（`.`这个没有）

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:38:26.313

```
 var wdiscount2 = wdiscount > 999 ? wdiscount.toFixed(3) : wdiscount; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:37:34.347

也许使用一个库，比如来自 Joss Crowcroft 的[accounting.js](http://josscrowcroft.github.com/accounting.js/)是个好主意？它支持各种格式，我相信很多人都在使用它。

```
wdiscount2 = accounting.formatMoney(wdiscount) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-21T16:50:57.170

我发现的最佳解决方案是使用[toLocaleString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString)：

```
const formatCurrency = (num, locale = 'en-US', currency = 'USD', minimumFractionDigits = 2) => {
    if (isNaN(num)) {
        return num;
    }
  return num.toLocaleString(locale, {style: 'currency', currency, minimumFractionDigits});
}; 
```

这是一个示例[小提琴](http://jsfiddle.net/oob68ef1/)

# css - iPad 覆盖问题

> ID：12857199
> 
> 赞同：0
> 
> 时间：2012-10-12T10:36:00.397
> 
> 标签：css

我正在处理的网站有许多不同的叠加层，它们由 CSS 控制，如下所示（每种方法都有不同的属性，但方式相同）：

```
 .box_4, .box_5, .box_6 {
   position: fixed;
   top: -1900px;
   left: 50%;
   z-index: 101;
   width: 883px;
   margin-left: -400px; 
```

}

当我关闭叠加层时，将应用这些属性。

然而，在 iPad 上发生了一些奇怪的事情，当我滚动网站只是为了检查它时，一些叠加层会在我再次触摸屏幕时出现和消失。

这可能是由于css吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:44:45.970

移动设备存在很多问题`position:fixed;`

与其将它们放置在视口之外，不如隐藏/显示这些框。

一些参考资料：

*   [http://www.8164.org/designing-for-the-ipad/](http://www.8164.org/designing-for-the-ipad/)
*   [http://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios/](http://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios/)
*   [http://blog.mspace.fm/2009/10/01/iphone-mobile-safari-css-position-fixed/](http://blog.mspace.fm/2009/10/01/iphone-mobile-safari-css-position-fixed/)

# ios - 从 safari 启动 iOS 导航

> ID：12857200
> 
> 赞同：0
> 
> 时间：2012-10-12T10:36:00.640
> 
> 标签：ios, navigation

有没有办法在 Safari 中使用超链接在 iOS 6 中打开地图应用程序？我想让用户可以从当前位置驾车导航到目的地。所以这个超链接需要目的地作为参数之一。

坦克很多！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:53:43.163

此 URL 将打开 iOS 6 地图应用程序，其中包含从库比蒂诺到旧金山的路线。

[http://maps.apple.com/maps?daddr=San+Francisco,+CA&saddr=cupertino](http://maps.apple.com/maps?daddr=San+Francisco,+CA&saddr=cupertino)

对于一个目的地：

[http://maps.apple.com/maps?daddr=10690+North+De+Anza+Boulevard,Cupertino,CA+95014](http://maps.apple.com/maps?daddr=10690+North+De+Anza+Boulevard,Cupertino,CA+95014)

供参考： [https ://developer.apple.com/library/archive/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html](https://developer.apple.com/library/archive/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html)

# javascript - 模态中的jquery函数仅在第一次打开时起作用，在关闭并重新打开后它们停止工作

> ID：12857211
> 
> 赞同：0
> 
> 时间：2012-10-12T10:36:35.617
> 
> 标签：javascript, jquery, modal-dialog

我正在使用 jquery modal，在每个模态中我都有一个表单。然后我将某些 jquery 函数加载到表单元素上，例如 jquery 自动完成。

当我第一次打开模式时，脚本中的所有 jquery 函数都可以正常工作，但是一旦我关闭第一个模式并再次打开，所有函数都不起作用。

就好像它们在页面加载时绑定到表单一样，然后当为模态单击按钮时，它的工作原理，然后关闭模态将解除绑定。

有没有人知道为什么他们会在第一个模式打开/关闭后停止工作？

```
$(document).ready(dialogForms);
function dialogForms() {    
 $('a.menubutton').click(function() {
    var a = $(this);
    $.get(a.attr('href'),function(resp){
      var dialog = $('<div>').attr('id','formDialog').html($(resp).find('form:first').parent('div').html());
      $('body').append(dialog);
      dialog.find(':submit').hide();
      dialog.dialog({
        title: a.attr('title') ? a.attr('title') : '',
        modal: true,
        buttons: {
          'Save': function() {

                if($(this).find('form').valid()){
                // do stuff if form validates
                submitFormWithAjax($(this).find('form'));               
                $('#homepage').trigger('click');    
                $(this).dialog('close');
                } 
                else {

                }             
                },
          'Cancel': function() {$(this).dialog('close');}
        },
        width: 650,
        height: 400,        
        show: "fade",
        hide: "fade"
      });

$('#edit_vle').bind('change', function (e) { 
    if( $('#edit_vle').val() == 'FE') {
      $('#fe_automcomplete1').show();
      $('#he_automcomplete1').hide();
      $("#edit_he_title").val("");
      $("#edit_he_code").val("");
    }
    else{
      $('#fe_automcomplete1').hide();
      $('#he_automcomplete1').show();
      $("#edit_fe_title").val("");
      $("#edit_fe_code").val("");
    }         
});

$('#delete_vle').bind('change', function (e) { 
    if( $('#delete_vle').val() == 'FE') {
      $('#fe_automcomplete2').show();
      $('#he_automcomplete2').hide();
      $("#delete_he_title").val("");
      $("#delete_he_code").val("");
    }
    else{
      $('#fe_automcomplete2').hide();
      $('#he_automcomplete2').show();
      $("#delete_fe_title").val("");
      $("#delete_fe_code").val("");
    }         
});

    var epronames = [<?php 
    $eprotmp = Array();
    while($eprorow = mssql_fetch_array($epro_course)) $eprotmp[] = 
    '{
                title: "'.$eprorow['Name'].'",
                label: "'.$eprorow['Code'].' - '.$eprorow['Name'].'",
                code: "'.$eprorow['Code'].'",
                user: "'.$eprorow['fname'].' '.$eprorow['sname'].'",
    }'; 
    echo join(',', $eprotmp);
?>];

    var fenames = [<?php 
    $fetmp = Array();
    while($ferow = mysql_fetch_array($feinactive)) $fetmp[] = 
    '{
                title: "'.$ferow['course'].'",
                label: "'.$ferow['shortname'].' - '.$ferow['course'].'",
                code: "'.$ferow['shortname'].'",
    }'; 
    echo join(',', $fetmp);
?>];

    var henames = [<?php 
    $hetmp = Array();
    while($herow = mysql_fetch_array($heinactive)) $hetmp[] = 
    '{
                title: "'.$herow['course'].'",
                label: "'.$herow['shortname'].' - '.$herow['course'].'",
                code: "'.$herow['shortname'].'",
    }'; 
    echo join(',', $hetmp);
?>];

        $("#title").autocomplete({
            minLength: 3,
            source: epronames,
            focus: function( event, ui ) {
                $("#title").val( ui.item.label );
                return false;
            },
            select: function( event, ui ) {
                $("#title").val( ui.item.title );
                $("#code").val( ui.item.code );
                $("#ctl").val( ui.item.user );
                return false;
            },
            change: function(event, ui) {
            if (!ui.item) {
                $("#title").val("");
            }
            }
        })
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "</a>" )
                .appendTo( ul );
        };

        $("#edit_he_title").autocomplete({
            minLength: 3,
            source: henames,
            focus: function( event, ui ) {
                $("#edit_he_title").val( ui.item.label );
                return false;
            },
            select: function( event, ui ) {
                $("#edit_he_title").val( ui.item.title );
                $("#edit_he_code").val( ui.item.code );
                return false;
            },
            change: function(event, ui) {
            if (!ui.item) {
                $("#edit_he_title").val("");
            }
            }
        })
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "</a>" )
                .appendTo( ul );
        };

        $("#edit_fe_title").autocomplete({
            minLength: 3,
            source: fenames,
            focus: function( event, ui ) {
                $("#edit_fe_title").val( ui.item.label );
                return false;
            },
            select: function( event, ui ) {
                $("#edit_fe_title").val( ui.item.title );
                $("#edit_fe_code").val( ui.item.code );
                return false;
            },
            change: function(event, ui) {
            if (!ui.item) {
                $("#edit_fe_title").val("");
            }
            }
        })
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "</a>" )
                .appendTo( ul );
        };      

if($("#clearform").length > 0){
$("#clearform").click(function() {
    $("#title").val('');
    $("#code").val('');
    $("#ctl").val('');
});
}

if($("#delete_fe_clearform").length > 0){
$("#delete_fe_clearform").click(function() {
    $("#delete_fe_title").val('');
    $("#delete_fe_code").val('');
});
}
if($("#edit_fe_clearform").length > 0){
$("#edit_fe_clearform").click(function() {
    $("#edit_fe_title").val('');
    $("#edit_fe_code").val('');
});
}

if($("#delete_he_clearform").length > 0){
$("#delete_he_clearform").click(function() {
    $("#delete_he_title").val('');
    $("#delete_he_code").val('');
});
}
if($("#edit_he_clearform").length > 0){
$("#edit_he_clearform").click(function() {
    $("#edit_he_title").val('');
    $("#edit_he_code").val('');
});
}

}, 'html');
return false;
});

}

function submitFormWithAjax(form) {
  form = $(form);
  $.ajax({
    url: form.attr('action'),
    data: form.serialize(),
    type: (form.attr('method')),
    dataType: 'script',
    success: function(data){
   }
  });
  return false;
} 
```

这是每个模式的按钮。

```
<a href="new_course.php" class="menubutton" id="new_course" title="New Course">New Course</a>
<a href="edit_course.php" class="menubutton" id="edit_course" title="Edit Course">Edit Course</a>
<a href="delete_course.php" class="menubutton" id="delete_course" title="Delete Course">Delete Course</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:08:37.583

我将 jquery 函数放入 open 方法中

```
open: function(){ 
```

要关闭对话框而不是使用：

```
$(this).dialog('close'); 
```

我用了

```
dialog.remove(); 
```

现在每次打开对话框时我的功能都可以使用

# java - 上传文件而不等待其上传并在同一页面上开始一些其他工作

> ID：12857214
> 
> 赞同：1
> 
> 时间：2012-10-12T10:36:43.813
> 
> 标签：java, jakarta-ee, tomcat, servlets

我们如何减少将文件从jsp上传到apche tomcat中的servlet并将其放入队列并在上传文件的同时开始其他事情的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:16:34.573

服务器应该能够处理任何（合理）数量的同时请求：只需让上传发生并做其他事情！

现在，如果您使用带有表单的普通 HTTP POST，则无法在与上传“相同”的页面上执行此操作。相反，您必须使用其中一种基于 Flash 的上传工具，或者您可以使用 Javascipt 中的一种以其他方式发送上传（XMLHTTPRequest？）。然后您可以运行上传，但页面本身仍然可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:50:07.887

您可以使用异步调用`@Asynchronous`

# android - 用于呼叫应答的 BroadcastReceiver

> ID：12857217
> 
> 赞同：0
> 
> 时间：2012-10-12T10:37:02.910
> 
> 标签：android, android-intent, telephony, intentservice, telephonymanager

我正在尝试以编程方式拦截呼叫应答。

我有一个使用以下方法的 BroadcastReceiver：

```
@Override
public void onReceive(Context context, Intent intent) {
    Bundle extras = intent.getExtras();
    if (extras != null) {
        String state = extras.getString(TelephonyManager.EXTRA_STATE);
        if(state.equals("OFFHOOK")) {
            // ...
        }
        // ANSWER ??
    }
} 
```

虽然如果电话接到电话，代码会成功运行（摘机与应答有关，因为在我得到振铃状态之前）我无法检测到相对于已拨电话的应答：在这种情况下，摘机是相对于铃声。

我如何拦截与已拨电话相关的答案？

# solr - Solr 4.0 中的版本控制和乐观锁定？

> ID：12857218
> 
> 赞同：0
> 
> 时间：2012-10-12T10:37:04.857
> 
> 标签：solr

我看见

> 版本控制和乐观锁定——结合实时获取，这允许读取-更新-写入功能，确保其他客户端不会同时进行冲突更改。

来自[http://searchhub.org/dev/2012/05/21/solr-4-preview/](http://searchhub.org/dev/2012/05/21/solr-4-preview/)和其他来源。虽然很有趣，但**很少有人提到**这个话题。

有人可以解释这个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:40:08.223

我无法完全解释此功能。但是，这里有一些来自 Solr 问题和 Wiki 的附加链接，它们提供了更多详细信息。随着今天 Solr 4.0 的正式发布，我希望这些功能如何工作的更多细节和示例将开始出现。

*   [SOLR-3178 - 版本控制 - 乐观锁定](https://issues.apache.org/jira/browse/SOLR-3178)
*   [更新语义](http://wiki.apache.org/solr/Per%20Steffensen/Update%20semantics)
*   [实时获取](http://wiki.apache.org/solr/RealTimeGet?highlight=%28nosql%29)

# ruby-on-rails - rails_admin 重复操作

> ID：12857226
> 
> 赞同：1
> 
> 时间：2012-10-12T10:37:36.973
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-admin

我想为 rails_admin 进行自定义操作，它将数据库中某些项目（id 除外）中的整个数据复制到创建新项目的表单中（rails_admin“新”操作）。

我不想让用户创建项目而无需填写表单中的所有字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T15:13:39.550

我自己没有尝试过，但是这个库似乎向 rails_admin 添加了一个重复的操作：

[https://github.com/dalpo/rails_admin_clone](https://github.com/dalpo/rails_admin_clone)

# javascript - YUI Compressor 在 javascript 中删除分号

> ID：12857227
> 
> 赞同：1
> 
> 时间：2012-10-12T10:37:37.450
> 
> 标签：javascript, jquery, yui, yui-compressor

我正在使用以下行使用 yuicompressor 创建 js 的压缩版本：

java -jar /home2/java/yuicompressor-2.4.2.jar --type js /home/site/libs/javascript/photos_functions.js >/home/site/libs/javascript/photos_functions-min.js

但由于某种原因，yui 似乎错误地将分号 (;) 放在了整个地方。我才开始注意到它。它似乎是在使用 jquery ajax 函数 $ajax({}); 之后发生的。

它似乎做的是删除分号，然后将其添加到下一个 } （奇怪）。

其他人看到这个或没有办法/选项来解决它？

**之前的例子：**

```
function photo_load_vs_breakdown(photo_id,page) {

    display_white_box('photo_vs_box');

    url =  SITEURL + "/libs/ajax/vs_mode_breakdown.php";
    params = 'photo_id='+photo_id+'&page='+page;

    $.ajax({ 
        url: url,
        cache:false, 
        type: 'POST',
        data: params,
        dataType: 'json',
        success: function(data) {

            if(page == 0){
                $('#photo_vs_box_contents').html(data.content);
            }
            else{

                newpage = page + 1;
                $('#vs_mode_wins').append(data.wins_append);
                $('#vs_mode_losses').append(data.lose_append);
                $('#vs_load_more').attr('onclick','photo_load_vs_breakdown('+photo_id+','+newpage+')');
                if(data.disable_vs_load_more == 'yes'){
                    $('#vs_load_more').attr('disabled','disabled');
                }

            }

        }
    }); 
} 
```

**示例之后：**

```
function photo_load_vs_breakdown(a,b){display_white_box("photo_vs_box");url=SITEURL+"/libs/ajax/vs_mode_breakdown.php";params="photo_id="+a+"&page="+b;$.ajax({url:url,cache:false,type:"POST",data:params,dataType:"json",success:function(c){if(b==0){$("#photo_vs_box_contents").html(c.content)}else{newpage=b+1;$("#vs_mode_wins").append(c.wins_append);$("#vs_mode_losses").append(c.lose_append);$("#vs_load_more").attr("onclick","photo_load_vs_breakdown("+a+","+newpage+")");if(c.disable_vs_load_more=="yes"){$("#vs_load_more").attr("disabled","disabled")}}}})}; 
```

注意末尾分号的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:53:05.577

YUI Compressor 就像许多其他代码转换工具一样，不会通过删除或移动部分代码来真正“编辑”您的代码。实际上，它会将其编译为某种中间形式，完全删除您的所有样式和其他无意义的部分，然后根据自己的内部规则重新生成新代码。没有办法以某种方式“保留”本质上无操作的符号 - 例如空格、额外的括号、额外的分号等，因为它们根本没有保存在任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:05:05.623

YUI 压缩器在这里所​​做的似乎并不是完全放错或移动分号，而是实际上在函数中的最后一个表达式之后删除分号，**并**在代码末尾添加一个分号（以避免连接两个或多个时出现问题脚本一起）。

例如这段代码：

```
function x() { a(); b(); c(); }
function y() { a(); b(); c(); } 
```

将被压缩为以下代码：

```
function x(){a();b();c()}function y(){a();b();c()}; 
```

请注意，两个函数中的最后一个分号都被删除了，但在第二个函数之后只添加了一个分号。

请参阅[使用 YUI Compressor 进行在线 JavaScript/CSS 压缩以](http://refresh-sf.com/yui/)进行一些快速实验。还将它与[UglifyJS](http://marijnhaverbeke.nl//uglifyjs)进行比较，这是另一个用于 JavaScript 缩小的工具，在此示例中输出：

```
function x(){a(),b(),c()}function y(){a(),b(),c()} 
```

有关更多选项，请参阅：[UglifyJS 自述文件。](https://github.com/mishoo/UglifyJS/#readme)（还有一个更高级的[UglifyJS2](https://github.com/mishoo/UglifyJS2#readme)正在开发中。）

# svn - SVN 外部的来源必须是存储库吗？

> ID：12857231
> 
> 赞同：1
> 
> 时间：2012-10-12T10:37:52.730
> 
> 标签：svn, tortoisesvn, svn-externals

我正在尝试使用 TortoiseSVN 在本地 Windows 机器上设置 svn externals。我通过选择创建了一个工作目录`SVN Checkout`。它包含一个名为的目录`lib`，其内容应从外部位置导入。我遵循[了本教程](http://justaddwater.dk/2007/10/23/setting-up-subversion-externals-with-tortoisesvn/)和[本](http://troyworks.com/blog/2009/08/19/svn-externals-how-to-use-multiple-svns-in-one-using-tortoisesvn/)教程，但仍然很难设置它。

当前的结构如下所示：

> /myproject/trunk/core.php
> 
> /myproject/trunk/lib/
> 
> /myanotherproject/trunk/core.php
> 
> /myanotherproject/trunk/lib/lib01.php

我想让它自动`myproject`从`myanotherproject`目录中导入 lib 文件。该`myanotherproject`目录不是存储库。它也是另一个项目的工作目录。

我做了什么：

1.  右键单击他的`myproject/trunk/lib`文件夹并选择`TortoiseSVN -> Properties`
2.  已选中`New -> Externals`
3.  单击`New`按钮并在输入的 URL 字段中，`file:///Z:/myanotherproject/trunk/lib`
4.  已点击`OK`

然后我得到了错误：

> 解析 'Z:\myproject\trunk\lib' 上的 svn:externals 属性时出错：'file:///Z:/myanotherproject/trunk/lib'

那么导入源是否必须是存储库，因为必须指定 URL？感谢你的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:19:11.353

@bahrep 的后续行动

外部必须使用 Repo-path URL，而不是 WC-URL，因为从“超级项目”的 WC 你可以

*   查看
*   更新
*   甚至承诺

使用外部，这对于工作副本是不可能的，仅适用于存储库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:49:45.020

您不能将工作副本指定为来源`svn:externals`，我也不明白您为什么需要它。

`svn:externals`必须指向**存储库位置**；您可以指向不同的存储库 BTW。在某些情况下，您可能需要指定`svn:externals`源的修订号。

我建议您查看[`svn:externals`SVNBook 中的参考资料](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)。前两句话回答了你的问题：

> 有时构建一个由许多不同的结帐组成的工作副本很有用。例如，您可能希望**不同的子目录来自存储库中的不同位置，或者可能完全来自不同的存储库**。

另请查看有关此主题的[TortoiseSVN 手册。](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-externals.html)

# database-design - 买卖双方徽章分配模块数据库设计

> ID：12857233
> 
> 赞同：1
> 
> 时间：2012-10-12T10:38:01.300
> 
> 标签：database-design, application-design, web-application-design

我正在开发一个 B2B 交易应用程序，它有各种产品的买家和供应商。

我正在尝试开发一个“徽章分配模块”，该模块将用于根据买家和供应商的验证、购买/销售实力、+ve 反馈等，通过管理面板将徽章分配给他们。用户可以获得一个或多个徽章。

分配的徽章应该有一个有效期。请帮助我进行数据库设计 - 所需的表和列是什么？

请建议在 asp.net 中是否有任何开源/入门工具包应用程序正在实现相同的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:26:31.127

一方面，买家和卖家应该在同一张表中，并且您应该使用[表继承](http://martinfowler.com/eaaCatalog/singleTableInheritance.html)对它们进行建模。

买方有许多徽章分配。

徽章也有许多徽章任务。

因此，它是一个多对多的关系。

派对能否获得徽章，让它过期，然后再获得相同的徽章，稍后？

您的架构应如下所示：

```
create table party_type(
  id smallint primary key,
  description text not null
);

insert into party_type values (1, 'Buyer'), (2, 'Seller');    

create table party(
  id bigint identity primary key,
  type smallint not null references party_type (id),
  name text not null
);

create table badge(
  id bigint identity primary key,
  name text not null
);

create table party_badge(
  party_id bigint not null references party (id),
  badge_id bigint not null references badge (id),
  from_date datetime not null default current_timestamp,
  to_date datetime null default null,

  check (to_date > from_date),

  primary key (party_id, badge_id, from_date)
); 
```

# spring-mvc - 如何使用 jstl c:foreach 遍历返回的 spring 安全标签

> ID：12857236
> 
> 赞同：1
> 
> 时间：2012-10-12T10:38:22.760
> 
> 标签：spring-mvc, spring-security, jstl

在我使用 spring security 的应用程序中，我需要遍历返回的权限

```
<sec:authentication property="authorities"/> 
```

所以我这样做：

```
<c:forEach var="auth" items="${'<sec:authentication property="authorities"/>'}" >
   <h3> Each- <c:out value="${auth.authority }"></c:out> </h3><br />
</c:forEach> 
```

但它不起作用。这是控制台中的错误：

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/portal] threw exception [Request processing failed; nested exception is org.apache.tiles.impl.CannotRenderException: ServletException including path '/WEB-INF/views/layouts/standard.jsp'.] with root cause org.apache.jasper.JasperException: /WEB-INF/views/resman/about/about.jsp (line: 40, column: 85) equal symbol expected 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T11:00:32.830

将权限分配给新变量，然后执行循环：

```
<sec:authentication property="authorities" var="authorities" />
<c:forEach items="${authorities}" var="auth">
   <h3>Each- ${auth.authority}</h3>
</c:forEach> 
```

# java - Java - 从文本文件创建字符串数组

> ID：12857242
> 
> 赞同：1
> 
> 时间：2012-10-12T10:38:49.613
> 
> 标签：java, string

我有一个这样的文本文件：

```
abc def jhi
klm nop qrs
tuv wxy zzz 
```

我想要一个字符串数组，如：

```
String[] arr = {"abc def jhi","klm nop qrs","tuv wxy zzz"} 
```

我试过了 ：

```
try
    {
        FileInputStream fstream_school = new FileInputStream("text1.txt");
        DataInputStream data_input = new DataInputStream(fstream_school);
        BufferedReader buffer = new BufferedReader(new InputStreamReader(data_input));
        String str_line;
        while ((str_line = buffer.readLine()) != null)
        {
            str_line = str_line.trim();
            if ((str_line.length()!=0)) 
            {
                String[] itemsSchool = str_line.split("\t");
            }
        }
    }
catch (Exception e)  
    {
     // Catch exception if any
        System.err.println("Error: " + e.getMessage());
    } 
```

请任何人帮助我......所有答案将不胜感激......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T10:40:55.360

[如果您使用 Java 7，由于该`Files#readAllLines`方法](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllLines%28java.nio.file.Path,%20java.nio.charset.Charset%29)，它可以分两行完成：

```
List<String> lines = Files.readAllLines(yourFile, charset);
String[] arr = lines.toArray(new String[lines.size()]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:40:02.697

使用[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)读取文件，使用[readLine](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)作为字符串读取每一行，然后将它们放入 ArrayList 中，在循环结束时调用 toArray 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:06:38.503

根据您的输入，您就快到了。您错过了循环中从文件中读取每一行的位置。由于您事先不知道文件中的总行数，因此请使用集合（动态分配的大小）来获取所有内容，然后将其转换为数组`String`（因为这是您想要的输出）。

像这样的东西：

```
 String[] arr= null;
    List<String> itemsSchool = new ArrayList<String>();

    try 
    { 
        FileInputStream fstream_school = new FileInputStream("text1.txt"); 
        DataInputStream data_input = new DataInputStream(fstream_school); 
        BufferedReader buffer = new BufferedReader(new InputStreamReader(data_input)); 
        String str_line; 

        while ((str_line = buffer.readLine()) != null) 
        { 
            str_line = str_line.trim(); 
            if ((str_line.length()!=0))  
            { 
                itemsSchool.add(str_line);
            } 
        }

        arr = (String[])itemsSchool.toArray(new String[itemsSchool.size()]);
    } 
```

那么输出 ( `arr`) 将是：

```
{"abc def jhi","klm nop qrs","tuv wxy zzz"} 
```

这不是最佳解决方案。其他更*聪明的*答案已经给出。这只是您当前方法的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-24T07:28:14.703

这是我生成随机电子邮件的代码，从文本文件创建一个数组。

```
import java.io.*;

public class Generator {
    public static void main(String[]args){

        try {

            long start = System.currentTimeMillis();
            String[] firstNames = new String[4945];
            String[] lastNames = new String[88799];
            String[] emailProvider ={"google.com","yahoo.com","hotmail.com","onet.pl","outlook.com","aol.mail","proton.mail","icloud.com"};
            String firstName;
            String lastName;
            int counter0 = 0;
            int counter1 = 0;
            int generate = 1000000;//number of emails to generate

            BufferedReader firstReader = new BufferedReader(new FileReader("firstNames.txt"));
            BufferedReader lastReader = new BufferedReader(new FileReader("lastNames.txt"));
            PrintWriter write = new PrintWriter(new FileWriter("emails.txt", false));

            while ((firstName = firstReader.readLine()) != null) {
                firstName = firstName.toLowerCase();
                firstNames[counter0] = firstName;
                counter0++;
            }
            while((lastName= lastReader.readLine()) !=null){
                lastName = lastName.toLowerCase();
                lastNames[counter1]=lastName;
                counter1++;
            }

            for(int i=0;i<generate;i++) {
                write.println(firstNames[(int)(Math.random()*4945)]
                        +'.'+lastNames[(int)(Math.random()*88799)]+'@'+emailProvider[(int)(Math.random()*emailProvider.length)]);
            }
            write.close();
            long end = System.currentTimeMillis();

            long time = end-start;

            System.out.println("it took "+time+"ms to generate "+generate+" unique emails");

        }
        catch(IOException ex){
            System.out.println("Wrong input");
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T10:44:32.573

```
 Scanner scanner = new Scanner(InputStream);//Get File Input stream here
    StringBuilder builder = new StringBuilder();
    while (scanner.hasNextLine()) {
        builder.append(scanner.nextLine());
        builder.append(" ");//Additional empty space needs to be added
    }
    String strings[] = builder.toString().split(" ");
    System.out.println(Arrays.toString(strings)); 
```

输出 ：

```
 [abc, def, jhi, klm, nop, qrs, tuv, wxy, zzz] 
```

[您可以在此处](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)阅读有关扫描仪的更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T11:13:39.847

您可以使用 readLine 函数读取文件中的行并将其添加到数组中。

例子 ：

```
 File file = new File("abc.txt");
  FileInputStream fin = new FileInputStream(file);
  BufferedReader reader = new BufferedReader(fin);

  List<String> list = new ArrayList<String>();
  while((String str = reader.readLine())!=null){
     list.add(str);
  }

  //convert the list to String array
  String[] strArr = Arrays.toArray(list); 
```

上面的数组包含您需要的输出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T10:41:51.417

您可以使用某些输入流或扫描仪逐行读取文件，然后将该行存储在字符串数组中。示例代码将是..

```
 File file = new File("data.txt");

        try {
            //
            // Create a new Scanner object which will read the data 
            // from the file passed in. To check if there are more 
            // line to read from it we check by calling the 
            // scanner.hasNextLine() method. We then read line one 
            // by one till all line is read.
            //
            Scanner scanner = new Scanner(file);
            while (scanner.hasNextLine()) {
                String line = scanner.nextLine();
                //store this line to string [] here
                System.out.println(line);
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } 
```

# liferay - 如何以编程方式从 Liferay 自定义 portlet 中注销

> ID：12857247
> 
> 赞同：2
> 
> 时间：2012-10-12T10:39:03.920
> 
> 标签：liferay, logout, liferay-6

我正在创建一个自定义 portlet。

在用户在我的自定义 portlet 中执行某些操作后，我需要从门户中注销用户。我正在延长 liferay 的`MVCPortlet`.

在其中一种`MyPortlet`操作方法中，我需要编写代码以注销用户，然后将其重定向到主页。

**更新：**
我尝试了以下我认为注销用户但在注销后不重定向到主页的方法：

```
actionResponse.sendRedirect(PortalUtil.getPortalURL(actionRequest) + "/c/portal/logout"); 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T14:06:43.383

好吧，这可能是一个很晚的回复，但它可能对某人有所帮助

首先，您必须验证会话并重定向到注销 URL。否则，即使我们重定向到注销 url，会话仍然存在并且用户被移动到登录页面。所以，这是一个人应该做的

```
HttpServletRequest request = PortalUtil.getHttpServletRequest(actionRequest);
request.getSession().invalidate();
actionResponse.sendRedirect(themeDisplay.getURLSignOut()); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-14T12:59:46.040

我也没有找到使用 liferay 的默认注销 (/c/portal/logout) 发送特定重定向的方法。所以我使用 util 类以编程方式注销用户`AuthenticatedSessionManagerUtil`，然后在响应对象中发送特定的重定向位置，例如`response.sendRedirect(yourLocation)`

注意：在 Liferay 7.2 中，我使用`AuthenticatedSessionManagerUtil.signOutSimultaneousLogins(userId)`的不是对我有用的`AuthenticatedSessionManagerUtil.logout(userId)`。hth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:56:06.377

您可以更精确地重定向到 c/portal/logout：

> actionResponse.sendRedirect("/c/portal/logout/");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-05T14:11:22.153

遇到这个问题（LR7）后，就把它留在这里：

```
 try {
        AuthenticatedSessionManagerUtil.logout(request, response);

        request.setAttribute(WebKeys.LOGOUT, true);

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-08T11:44:50.623

你所要做的就是

执行操作：在操作结束时使用：

```
HttpSession session = PortalUtil.getHttpServletRequest(request).getSession();
session.invalidate();

try {
    System.out.println(" redirecting to the required page");
                    response.sendRedirect(themeDisplay.getPortalURL() + "/page-on-which-to-be-redirected");

    } catch (IOException e1) {

          e1.printStackTrace();
        } 
```

# csv - 如何从目录中读取特定文件？

> ID：12857250
> 
> 赞同：2
> 
> 时间：2012-10-12T10:39:14.647
> 
> 标签：csv, abap

我有一个包含很多文件的目录，但我只想读取`.CSV`文件。我把目录中的所有文件都传给了一个内部表，现在我想读取这些文件（将这些文件的内容读取到屏幕上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:59:36.410

假设您按照[此问题](https://stackoverflow.com/questions/152919/get-the-contents-of-a-server-side-directory-in-sap-abap)`EPS2_GET_DIRECTORY_LISTING`中的建议使用，您可以删除表中所有不以以下结尾的行：`.csv`

```
DELETE lt_file_list WHERE name NP '*.CSV'. 
```

请注意，CP/NP 运算符不区分大小写（这可能是本例中的预期行为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:10:00.907

我解决问题。当我将信息传递（连接）到内部表中时，我传递了一些错误的数据。谢谢。

# android - 如何在 google play 中过滤我在 android 中使用使用功能电话的平板电脑版本应用程序？

> ID：12857254
> 
> 赞同：0
> 
> 时间：2012-10-12T10:39:41.170
> 
> 标签：android, android-manifest, google-play, android-market-filtering

我开发了 android 应用程序并上传到 google play 中的手机。现在我做了具有相同功能的平板电脑版本。在我的平板电脑版本中，我使用`<uses-feature android:name="android.hardware.telephony">`了用于电话呼叫服务的属性。我为调用支持和不支持的平板电脑开发了我的应用程序。在这里我想只为平板电脑显示我的平板电脑版本，即使那些启用/禁用了调用功能的平板电脑也是如此。我知道下面的一件事，它将过滤应用程序商店并仅显示适用于 android 手机的应用程序。

```
 <uses-feature android:name="android.hardware.telephony" android:required="true"/> 
```

有没有其他方法可以过滤我的应用程序并仅适用于平板电脑（启用/禁用调用功能）

请给我建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:41:30.970

您可以在清单上添加支持屏幕尺寸 xlarge，然后您放置支持屏幕尺寸小、中、大的手机版本。您也可以在 google play 发布网站上查看多个 APK 的内容。我从未使用过，我认为它正是用于此目的。

# javascript - 如何检测 div 中点击事件发生的位置？

> ID：12857257
> 
> 赞同：3
> 
> 时间：2012-10-12T10:39:45.713
> 
> 标签：javascript

我想检测我点击了 id 为 clickdetectiondiv 的 div 中的哪个位置。我使用的代码为我提供了相对于 HTML 页面正文左上角的位置。我花了很多时间来弄清楚如何做到这一点，但无法找到答案。我有一个解决方案是减去这个绝对定位的 div 的位置。但并不总是我会得到 div 的位置，因为屏幕尺寸可能会有所不同。请告诉我另一种方法来做到这一点。

提前致谢，

```
<html>
<head>
<script type="text/javascript"> 
function clicked(event){
    var x=event.clientX
    var y=event.clientY
    document.getElementById("outputdiv").innerHTML= "X coords: " + x + ", Y coords: " + y;
}
</script>

<style type="text/css">
#clickdetectiondiv{
    position: absolute;
    top: 100px;
    left: 100px;
    height: 100px;
    width: 500px;
    background: gray;
}
#outputdiv{
    position: absolute;
    top: 300px;
    left: 100px;
    height: 100px;
    width: 500px;
    background: #eee;
    text-align: center;
}
</style>

</head>

<body>
<div id="clickdetectiondiv" onmousedown="clicked(event);"></div>
<div id="outputdiv"></div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:43:32.470

您想使用像 jquery 或 mootools 这样的 javascript 框架，它们具有获取元素相对于您想要以跨浏览器方式编写的任何其他元素的相对位置的功能。为什么要重新发明轮子？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:45:12.753

如果你可以使用jquery

```
$('#A').click(function(e) {   //Default mouse Position 
              alert(e.pageX+ ' , ' + e.pageY);
       }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:54:46.780

我想这可以是解决方案：

```
function clicked(event){
    var x = event.x;
    var y = event.y;

    var divClicked = document.getElementById("clickdetectiondiv");

    x -= divClicked.offsetLeft;
    y -= divClicked.offsetTop;
    document.getElementById("outputdiv").innerHTML= "X coords: " + x + ", Y coords: " + y;
} 
```

# hibernate - 多对多关系——休眠

> ID：12857259
> 
> 赞同：0
> 
> 时间：2012-10-12T10:40:00.453
> 
> 标签：hibernate, many-to-many, cascade

我正在使用 hibernate-jpa-2.0-api 1.0.0.Final 和 hibernate 3.5.5-Final。

我有用户和角色实体，每个实体彼此之间都有多对多的关系（双向）。我有以下要求：

**1-**如果调用了deleteRole(role)方法并且这个角色有用户，那么hibernate应该抛出异常，否则角色可以被成功删除。
**2-**如果调用deleteUser(user)方法，用户可以成功删除，相关记录自动从关系表中删除，但其角色不应该被删除。
**3-**此外；如果我创建新角色并将一些用户添加到其集合中并最终保留角色，则应保留其用户而无需额外的持久操作。

假设**Role**是**Test1**，**User**是**Test2**。实体：

***测试1（角色）***

```
import java.util.HashSet;
import java.util.Set;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;

import com.ttnet.model.BaseModel;

@Entity
public class Test1 extends BaseModel {

    @ManyToMany(targetEntity = Test2.class, cascade = { CascadeType.ALL })
    @JoinTable(name = "test1_test2", joinColumns = { @JoinColumn(name = "id1", nullable = false, updatable = false) }, inverseJoinColumns = { @JoinColumn(name = "id2", nullable = false, updatable = false) })
    private Set<Test2> test2s = new HashSet<Test2>(0);

    public Set<Test2> getTest2s() {
        return test2s;
    }

    public void setTest2s(Set<Test2> test2s) {
        this.test2s = test2s;
    }
} 
```

***测试2（用户）***

```
import java.util.HashSet;
import java.util.Set;

import javax.persistence.Entity;
import javax.persistence.ManyToMany;

import com.ttnet.model.BaseModel;

@Entity
public class Test2 extends BaseModel {

    @ManyToMany(targetEntity=Test1.class, mappedBy = "test2s")
    private Set<Test1> test1s = new HashSet<Test1>(0);

    public Set<Test1> getTest1s() {
        return test1s;
    }

    public void setTest1s(Set<Test1> test1s) {
        this.test1s = test1s;
    }
} 
```

测试代码

```
 Test1Bo test1Bo = (Test1Bo) context.getBean("test1Bo");
    Test2Bo test2Bo = (Test2Bo) context.getBean("test2Bo");

    Test1 t1 = new Test1();
    Test2 t21 = new Test2();
    Test2 t22 = new Test2();

    Set<Test2> t2Set = t1.getTest2s();
    t2Set.add(t21);
    t2Set.add(t22);

    test1Bo.addTest1(t1); 
```

此代码成功地将预期的整体添加到所有 3 个表中。但是，起初我只尝试了 Cascade.PERSIST 和 Cascade.MERGE，它给出了未保存的对象异常。然后我尝试了ALL，它成功完成了。有趣的是，我添加了所有 javax Cascade 操作，我的意思是个别但没有成功抛出相同的异常（未保存的 obj ...）。现在，问题是每当我删除 t1 时，它也会删除 t21 和 t22，这违反了 req.1。

# android - 在 Android 中使用 Google Transit API

> ID：12857262
> 
> 赞同：4
> 
> 时间：2012-10-12T10:40:03.543
> 
> 标签：android, google-maps, google-api

我想在 Android 应用程序中使用 Google Transit API。但我正在从服务中获取数据。我使用了以下参数：

[http://maps.googleapis.com/maps/api/directions/json?origin=Brooklyn&destination=Queens&sensor=false&departure_time=1343605500&mode=transit](http://maps.googleapis.com/maps/api/directions/json?origin=Brooklyn&destination=Queens&sensor=false&departure_time=1343605500&mode=transit)

我总是得到这样的回应：

```
{
   "routes" : [],
   "status" : "ZERO_RESULTS"
} 
```

我想我在上面 URL 中使用的任何参数中传递了一些错误，也许`departure_time`是错误的？

谁能告诉我们应该传递什么参数？
谁能帮我找出带有返回值的此类参数的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:19:46.170

您只需将department_time 参数设置为将来的某个时间（例如几天）。从[这里](https://developers.google.com/maps/documentation/directions/)：

> 请求公交路线时，请务必指定出发时间或到达时间。请注意，在此示例中，出发时间指定为 2012 年 7 月 30 日上午 09:45。在提交请求之前将参数更新为将来的某个时间点。

试试[http://maps.googleapis.com/maps/api/directions/json?origin=Brooklyn&destination=Queens&sensor=false&departure_time=1350472557&mode=transit](http://maps.googleapis.com/maps/api/directions/json?origin=Brooklyn&destination=Queens&sensor=false&departure_time=1350472557&mode=transit)，它可以工作。

# mysql - 添加索引以优化查询，并分析 EXPLAIN 结果

> ID：12857263
> 
> 赞同：0
> 
> 时间：2012-10-12T10:40:14.100
> 
> 标签：mysql

我问[了这个问题](https://stackoverflow.com/questions/12842068/join-statement-shows-all-users-who-have-allocated-points-is-there-a-way-to-als)，我解释说我正在尝试从员工那里获得每周的积分分配——包括那些分配为零的人。

我有两张桌子：

**职员**(140 行) `ID`, `Firstname`, `Surname`, `Position`, `Faculty`, `Subject`, `Hours`,`Allocation`

**事务**（140,000 行）`Transaction_ID`, `Datetime`, `Giver_ID`, `Recipient_ID`, `Points`, `Category_ID`,`Reason`

我一直在尝试的 SQL 语句是这样的：

```
SELECT
  CONCAT(s.Firstname, " ", s.Surname) AS `Staff Name`,
  COALESCE(SUM(t.Points), 0) AS `Points Allocated`
FROM staff s
LEFT JOIN transactions t ON t.Giver_ID = s.ID and t.Datetime >='2012-10-08'
GROUP BY s.ID
ORDER BY `Points Allocated` ASC 
```

查询按预期工作，但**运行大约需要 6 秒**。

`index`我在两张桌子上唯一的就是他们的主键。

此查询的结果`EXPLAIN`表明：

![奖励系统 - 解释查询](../Images/cda6adaff855bd948db3b8c24346fc6b.png)

可悲的是，我不知道那是什么意思！如何优化我的查询或表以提高此查询的运行时间？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:47:30.303

您是否尝试过在 transaction.Giver_Id 和 transaction.dateTime 上简单地添加索引键

# java - Android - 库创建和使用

> ID：12857269
> 
> 赞同：-3
> 
> 时间：2012-10-12T10:40:43.387
> 
> 标签：java, android, libraries

如何创建在 android 功能中使用的库？以及如何将此库添加到我的应用程序并使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:46:39.483

对于创建库，请按照以下步骤操作：

`project`从（eclipse）中选择`Package Explorer`或创建一个新的并`Properties`通过按`Alt+Enter`（或右键单击+属性）打开对话框并选中`IsLibray`复选框。

请参阅此链接：`http://developer.android.com/tools/projects/projects-eclipse.html`

要将库项目添加到您的应用程序中，请按照以下步骤操作：

```
1.File->New->Other
2.Select Android Project
3.Select "Create Project from existing source"
4.Click "Browse..." button and navigate to johannilsson-android-actionbar\actionbar
5.Finish (Now action bar project in your workspace)
6.Right-click on your project -> Properties
7.In Android->Library section click Add
8.select recently added project -> Ok 
```

希望，这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:48:39.843

还有很多其他类似的问题，请使用搜索功能。

我会给你一些提示：

*   在eclipse中创建一个常规的android项目

*   去礼节

*   在 Android 部分选中“是库”复选框。

现在您可以转到其他 Eclipse 项目属性，现在您可以将您的库项目包含在其他项目中

# magento - 以编程方式更改现有订单中的 Magento 运输方式

> ID：12857272
> 
> 赞同：1
> 
> 时间：2012-10-12T10:40:52.753
> 
> 标签：magento

我尝试在订单中设置任意送货方式。（在管理区域）

```
$order = Mage::getModel('sales/order')->load($orderId);
$order->getShippingAddress()->setShippingMethod('shipping_method');
$order->save(); 
```

当我打电话时

```
Mage::log($order->getShippingAddress()->getShippingMethod()); 
```

我得到`shipping_method`了，但运输方式没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:53:09.067

如果你想设置运输方式，你应该这样写：

```
$order->setShippingMethod('flatrate_flatrate'); 
```

对于统一运费的运输方式，您应该使用任何运输方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:40:25.610

改变运输方式也会导致成本和服务的各种变化。还需要检查发货方式是否对订单有效。据我所知，对于现有订单的系统内置此功能没有简单的方法。

如果你真的只想修改运输方式，我认为你应该写一个直接查询数据库。

# python - 使用 boost::python 的跨平台 setup.py

> ID：12857274
> 
> 赞同：3
> 
> 时间：2012-10-12T10:40:57.707
> 
> 标签：python, cross-platform, distutils, boost-python

我想将一个小的基于 setup.py (distutils) 的模块上传到 pypi，以便它易于安装（也在 windows 下）。该模块是从多个文件编译的单个编译扩展。它再次链接`boost_python`并需要安装[Eigen3](http://eigen.tuxfamily.org)标头。目前我在`setup.py`

```
 setup(
    # usual stuff here
    ext_modules=[Extension('foo',sources=[...],
       libraries=['boost_python'],
       include_dirs=['/usr/include/eigen3'],
    )]
 ) 
```

这在 Linux 下工作得很好，但是 Windows 呢？我想我很快就会遇到麻烦。我不受约束`distutils`，一个解决方案使用`distutils2`or`setuptools`或任何会很棒。

**编辑：**我更多地询问查找`boost_python`库（因为 boost::python 被广泛使用，因此 somone 可能面临同样的问题）而不是查找 Eigen3 标头。

# ios - 调用 HTML 表格时 iPhone 的字体没有减少

> ID：12857276
> 
> 赞同：0
> 
> 时间：2012-10-12T10:41:01.443
> 
> 标签：ios, objective-c, iphone, fonts, html-table

在我的 iPhone 应用程序中，我使用 HTML 标签以表格格式显示数据，但我必须减少相同的字体。这是我的代码

```
- (void) setStats:(NSArray*)stats {
NSString * htmlString;
if ( [UIHelper isPad] )
    htmlString = @"<html><style type=\"text/css\">body{padding:15px 40px 0 40px; font-family: Helvetica;"
    "font-size: 16px;"
    "color: #888888"
    "},</style><body><table cellpadding=4>";
else
    htmlString = @"<html><style type=\"text/css\">body{padding:8px 20px 0 20px; font-family: Helvetica;"
    "font-size: 11px;"
    "color: #888888;"
    "},</style><body><p align=\"left\">";

for ( NSDictionary *val in stats ) {
    NSString *statTitle = [NSString stringWithFormat:@"%@", [val objectForKey:@"title"]];
    NSString *statValue = [NSString stringWithFormat:@"%@", [val objectForKey:@"value"]];
    NSString * str = [NSString stringWithFormat:@"<tr><td width=\"60%%\">%@</td><td width=\"40%%\">%@</td></tr>", statTitle, statValue];

    htmlString = [NSString stringWithFormat:@"%@%@", htmlString, str];
}
htmlString = [NSString stringWithFormat:@"%@%@", htmlString, @"</table></body></html>"];

if ( [contentView respondsToSelector:@selector(loadHTMLString:baseURL:)] )
    [contentView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.secondprizm.com"]];
} 
```

# c# - 与会话数据集一起使用时的对象引用错误

> ID：12857281
> 
> 赞同：0
> 
> 时间：2012-10-12T10:41:12.363
> 
> 标签：c#, asp.net

上周我一直在使用以下代码，它的工作没有问题，然后由于某种原因今天早上它抛出：

> System.NullReferenceException：对象引用未设置为对象的实例。

我的代码：

```
DataSet icanData = (DataSet)HttpContext.Current.Session["icanDataSession"];
if (!(icanData == null))
{
     return icanData;
} 
```

我使用的原因`HttpContext.Current.Session`是因为它在一个类中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:46:30.787

好像`Session["icanDataSession"];`已经丢失了。

它在您的代码中的哪个位置设置？也许最初存储在 IIS 中的任何会话都已通过应用程序池回收丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:49:38.620

在将会话对象转换为数据集之前检查会话是否为空

```
if(HttpContext.Current.Session["icanDataSession"]=!null)
{
  DataSet icanData = (DataSet)HttpContext.Current.Session["icanDataSession"];
  if (!(icanData == null))
   {
     return icanData;
   }
}
else 
{
return new Dataset();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:49:57.843

我认为，如果此代码由 aspx.cs 调用，那么它将正常工作。但是如果这被任何无状态服务调用，那么它会像你报告的那样抛出错误。最好先检查 if(HttpContext.Current != null) ..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:24:59.660

您说您`public static DataSet IcanData()`在 ASPX 文件的顶部调用。`Page_Load`相反，请从您的事件中调用该方法。在您访问会话的时间点，它将不可用。

关于为什么会话可以为空的信息可以在这个问题中找到：[如果当前的 ASP.NET 会话为空，我应该怎么做？](https://stackoverflow.com/questions/1382791/asp-net-what-to-do-if-current-session-is-null)

# javascript - jQuery中的动画切换未链接

> ID：12857291
> 
> 赞同：0
> 
> 时间：2012-10-12T10:41:47.520
> 
> 标签：javascript, jquery

我试图制作一个动画列表，当单击一个项目时，一个子 UL 切换显示并变得可见。然而，问题是，当用户然后单击新可见列表中的子 LI 时，显示会再次切换，而不是链接到新页面...

我的 jQuery 是...

```
//Product range expander
$('.product-range ul li a').click(function() {
  $(this).parents("li").find("ul").toggle('slow')
  return false;
}); 
```

标记...

```
<ul>
<li>
   <a href="#">United Kingdom</a>
       <ul style="display: none;">
           <li><a href="page1.html">Product</a></li>
           <li><a href="page2.html">Product</a></li>
           <li><a href="page3.html">Page</a></li>
        </ul>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:51:26.160

更改您的选择器，使其仅使用仅选择直接后代的 CSS2[子选择器定位第一个锚点。](http://meyerweb.com/eric/articles/webrev/200006b.html)

```
$('.product-range > ul > li > a').click(function(e) {
  $(this).parents("li").find("ul").toggle('slow')
  return false;
}); 
```

您当前的选择器将您的函数应用于`a`嵌套在 a 中的所有标签，无论深度如何，`li`该标签都嵌套在标签中。`ul`

这里的工作示例：http: [//jsfiddle.net/P9k9w/9/](http://jsfiddle.net/P9k9w/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:46:01.450

试试这个选择器

```
$('.product-range > ul > li > a').click(function() { 
```

所以你将点击处理程序绑定到那些锚元素，这些锚元素是外部的直接子元素`ul li`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:47:45.263

使用属性选择器：

```
$('.product-range ul li a[href="#"]').click(function() {
  $(this).parents("li").find("ul").toggle('slow')
  return false;
}); 
```

或者，您可以将不同的类添加到锚点，这些类是链接和仅切换子列表的锚点：

```
$('.product-range ul li a.handle').click(function() {
  $(this).parents("li").find("ul").toggle('slow')
  return false;
});

<ul>
<li>
   <a href="#" class="handle">United Kingdom</a>
       <ul style="display: none;">
           <li><a href="page1.html" class="truelink">Product</a></li>
           <li><a href="page2.html" class="truelink">Product</a></li>
           <li><a href="page3.html" class="truelink">Page</a></li>
        </ul>
</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T10:50:31.583

尝试将此添加到您的代码中：

```
$('.product-range ul li a').click(function() {
var parent_ul = $(this).parents("li").find("ul")

  if(parent_ul.is(':visible')) { // if vizible, go to link
    return true
  } else { // if hidden, show
    parent_ul.toggle('slow')
    return false;
  }
} 
```

或者给你的ul添加一个类，这样你就可以检查你选择了哪一个

# visual-studio-2010 - VS2010 添加新文件 throws Set property 'System.Windows.ResourceDictionary.DeferrableContent' 抛出异常

> ID：12857294
> 
> 赞同：5
> 
> 时间：2012-10-12T10:41:57.553
> 
> 标签：visual-studio-2010

在 Visual Studio 2010 中，当我右键单击一个项目并选择添加新项目时，光标会闪烁一秒钟但没有任何反应。如果我去文件>新建>文件，我得到

设置属性“System.Windows.ResourceDictionary.DeferrableContent”引发异常

在对话框中，无法添加新文件。

我有 Devexpress 项目模板，当谷歌搜索此错误时，会看到一些与其 WPF 组件相关的问题。我也在使用 Windows 8 发布预览版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-07T10:56:54.827

我有**用于 Microsoft VisulStudio 2013-v2.2 的 Windows azure 工具和用于 Microsoft lightswitch VisulStudio 2013-v2.2**的**Windows azure 工具**。

**我只卸载microsoft lightswitch vs 2013**的 Windows azure 工具。

它工作正常...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:47:53.590

我在检查项目的引用时解决了它，对我来说，它是 Microsoft.Office.Interop.Excel 和 Microsoft.Office.Interop.Word，它们的版本与我开始编写这个项目时的版本不同。加载旧参考时，一切都很顺利。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T10:04:40.747

在我的情况下，解决方案是卸载，`Windows Azure Tools for Visual Studio 2010`然后我重新启动了 VS，错误立即消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-23T09:02:03.823

在我的例子中，它是以安全模式启动 Visual Studio 并删除 Nuget 包为 Paradox 游戏引擎安装的相关扩展。

通过“程序和功能”（我做了）卸载 Paradox 后，扩展程序本身仍然在 Visual Studio 中注册，可能会导致隐藏的`NullReferenceException`.

# php - if else 数组中的数组

> ID：12857296
> 
> 赞同：1
> 
> 时间：2012-10-12T10:42:06.460
> 
> 标签：php, wordpress, if-statement

我在我的 Wordpress 网站的 functions.php 文件中定义了以下函数，它应该提供打开或关闭评论的选项：

```
$wp_customize->add_section( 'display_comments', array(
    'title'     => 'Comments',
    'priority'  => 36,
) );

$wp_customize->add_setting( 'mytheme_comments' );

$wp_customize->add_control( 'mytheme_comments', array(
    'label'   => 'Comments on or off',
    'section' => 'display_comments',
    'type'    => 'select',
    'default' => 'Off',
    'choices' => array(
        'value1' => 'On',
        'value2' => 'Off',
        ),
) ); 
```

然后我在我的 single.php 文件中有这个，这是显示单个博客文章的页面：

```
<?php if (get_theme_mod ( 'mytheme_comments' == 'On' ) ) : ?>
<?php comments_template(); ?>
<?php elseif (get_theme_mod ( 'mytheme_comments' == 'Off' ) ) : ?>
<?php endif ?> 
```

默认情况下评论是关闭的，但从下拉列表中选择“开启”没有任何效果。

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:43:38.953

你应该改变

```
if (get_theme_mod ( 'bistheme_comments' == 'On' ) ) 
```

到

```
if (get_theme_mod ( 'bistheme_comments') == 'On'  ) 
```

和

```
elseif (get_theme_mod ( 'mytheme_comments' == 'Off' ) ) 
```

到

```
elseif (get_theme_mod ( 'mytheme_comments') == 'Off'  ) 
```

重写代码的更好方法

```
$var = get_theme_mod('mytheme_comments');
if ($var == 'On') {
    comments_template();
} else if ($var == 'Off') {
    // Var is Off
} else {
    // Var was not set 
} 
```

# c++ - 重载函数的调用 - 以继承的类作为参数 - 是模棱两可的

> ID：12857297
> 
> 赞同：0
> 
> 时间：2012-10-12T10:42:15.243
> 
> 标签：c++

这个标题已被多次使用，但在搜索了大约 5-6 个示例后，我找不到任何与我的问题相匹配的内容：

我有一个简单的继承实践。

类**A**是一个基类，类**B**和**C**继承自它：

```
class A {

};

class B : public A { public:    int i; };

class C : public A { public:    int j; }; 
```

还有一个类 P 包含这样的重载函数：

```
class P
{
public:
    void change(B *b)
    {
        b->i =1;
    }

    void change(C *c)
    {
        c->j =1;
    }
}; 
```

当我使用如下功能时：

```
int main()
{
    A *b = new B();
    A *c = new C();
    P p;
    p.change(b);
    p.change(c);
    return 0;
} 
```

它给出了一个错误说：

```
inherit2.cpp: In function ‘int main()’:
inherit2.cpp:37:12: error: call of overloaded ‘change(A*&)’ is ambiguous
inherit2.cpp:37:12: note: candidates are:
inherit2.cpp:21:7: note: void P::change(B*) <near match>
inherit2.cpp:21:7: note:   no known conversion for argument 1 from ‘A*’ to ‘B*’
inherit2.cpp:26:7: note: void P::change(C*) <near match>
inherit2.cpp:26:7: note:   no known conversion for argument 1 from ‘A*’ to ‘C*’
inherit2.cpp:38:12: error: call of overloaded ‘change(A*&)’ is ambiguous
inherit2.cpp:38:12: note: candidates are:
inherit2.cpp:21:7: note: void P::change(B*) <near match>
inherit2.cpp:21:7: note:   no known conversion for argument 1 from ‘A*’ to ‘B*’
inherit2.cpp:26:7: note: void P::change(C*) <near match>
inherit2.cpp:26:7: note:   no known conversion for argument 1 from ‘A*’ to ‘C*’ 
```

如果您能帮我解决问题，我将不胜感激。拉赫曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:47:17.593

你可以：

*   `i`通过为and添加虚拟 setter 函数来使用多态性`j`：

    ```
    class A {
    public:
        virtual void set( int ) = 0;
    };

    class B : public A {
    public:
        void set( int value )
        {
            i = value;
        }

    private:
        int i;
    };

    class C : public A {
    public:
        void set( int value )
        {
            j = value;
        }

    private:
        int j;
    };

    class P
    {
    public:
        void change(A * obj)
        {
            obj->set(1);
        }
    };

    int main()
    {
        A *b = new B();
        A *c = new C();
        P p;
        p.change(b);
        p.change(c);
        return 0;
    } 
    ```

*   在传递指针之前对指针进行大小写：

    ```
     A *b = new B();
     A *c = new C();
     P p;
     p.change(static_cast<B*>(b));
     p.change(static_cast<C*>(c)); 
    ```

*   将变量放入基类（并去掉两个`change()`函数）：

    ```
    class A {
    public:
        int i;
    };

    class B : public A {};

    class C : public A {}; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T10:51:25.860

```
Polymorphism is one answer

class A
{
public:
    virtual void set() = 0;
};

class B : public A
{
public:
    virtual void set() { i = 1; }
private:
    int i;
};

class C : public A
{
public:
    virtual void set() { j = 1; }
private:
    int j;
};

class P
{
public:
    void change(A *a)
    {
        a->set();
    }
};

int main()
{
    A *b = new B();
    A *c = new C();
    P p;
    p.change(b);
    p.change(c);
    return 0;
} 
```

有了多态性，就不需要多个`change`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:50:44.723

我会调整你的类层次结构以使用多态性：

```
class A
{
public:
    virtual void SetVariable(const int value) = 0;
};

class B : public A
{
public:
    virtual void SetVariable(const int value) override { i = value; }
    int i;
};

class C : public A
{
public:
    virtual void SetVariable(const int value) override { j = value; }
    int j;
};

class P
{
public:
    void change(A *a)
    {
        a->SetVariable(1);
    }
}; 
```

这样，您可以使用指向基类 ( `A`) 的指针，而无需知道它们是哪种特定的派生类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T10:52:16.437

**根本原因：**

当你调用`change()`你传递的参数是类型`A *`时，类中的这个函数没有完全匹配`P`。编译器试图找到最佳匹配，它有两个选择：

```
void change(B *); 
void change(C *); 
```

它们都不是最佳匹配，因为每个都需要从`A*`to`B*`或转换`C*`。并不是说您的类不提供此转换功能，因此编译器会报告错误。

**解析度：**

您可以通过使用强制转换来准确地告诉编译器要选择哪个版本的函数。

```
p.change(static_cast<B*>(b));  
p.change(static_cast<C*>(c)); 
```

在上述两种情况下，您都知道所指向对象的实际类型，`A *`因此您可以使用`static_cast`并指导编译器找到最佳匹配函数。

# iphone - 将自定义字体加载到我的应用程序中（Titanium Studio iPhone）

> ID：12857298
> 
> 赞同：0
> 
> 时间：2012-10-12T10:42:20.653
> 
> 标签：iphone, ios, customization, font-face, titanium-mobile

我是 Titanium Studio 移动开发的新手，我正在开发一个 iPhone 应用程序。我从下面的链接中发现 Iphone 包含一些 Mac 中的字体，

但我想加载我自己的字体（OTF 或 TTF）文件并在我的应用程序中使用它。任何人都可以帮助我解决问题。谢谢是提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:44:00.140

**视频教程：**

[http://mobile.tutsplus.com/tutorials/appcelerator/titanium-mobile-custom-font/](http://mobile.tutsplus.com/tutorials/appcelerator/titanium-mobile-custom-font/)

**Appcelerator 博客中的步骤：**

[http://developer.appcelerator.com/blog/2010/04/adding-custom-fonts-to-ipad.html](http://developer.appcelerator.com/blog/2010/04/adding-custom-fonts-to-ipad.html)

# python - FindWindow 失败

> ID：12857300
> 
> 赞同：4
> 
> 时间：2012-10-12T10:42:23.530
> 
> 标签：python, pywin32

我在`FindWindow`使用`pywin32`扩展时遇到了麻烦。简单的 C 代码：

```
int main()
{
  HWND h = FindWindow(NULL, TEXT("SomeApp"));
  if (h != INVALID_HANDLE_VALUE)
      SetForegroundWindow(h);
  return 0;
} 
```

效果很好。与python相同：

```
import win32gui

h = win32gui.FindWindow(None, "SomeApp")
if h:
    win32gui.SetForegroundWindow(h)
else:
    print "SomeApp not found" 
```

失败，未找到 SomeApp。我建议文本编码可能会在这里造成麻烦，但在文档中找不到如何指定文本的任何信息。

**更新：** 我在其他机器上测试过代码，没有发现任何问题。所以，我第一台机器上的配置应该是不正确的。如果发现问题，我会更新我的调查结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:21:41.797

在 C 代码中，您正在检查`h != INVALID_HANDLE_VALUE`, 在 Python 中`h != None`。`INVALID_HANDLE_VALUE`不是`0`// 。`null`_`None`

Python`win32file.INVALID_HANDLE_VALUE`通过`win32file`导入定义。

此外，您可以执行以下操作，而不是打印“SomeApp not found”：

```
gle = win32api.GetLastError()
err = win32api.FormatMessage(gle)[:-2]
print 'SomeApp not found: LastError=%d - %s' % (gle, err) 
```

This should give you more details on the failure if `FindWindow` has legitimately failed for some reason (or "Success" if it worked).

# objective-c - UICollectionView 装饰和补充视图不能移动

> ID：12857301
> 
> 赞同：16
> 
> 时间：2012-10-12T10:42:25.213
> 
> 标签：objective-c, ios, ipad, uicollectionview

在`UICollectionView`装饰和补充观点上似乎是个大谜。目前似乎几乎没有示例代码。我设法让这两种类型都在自定义布局中工作（有关详细信息，请参阅这篇[文章](https://stackoverflow.com/questions/12810628/uicollectionview-decoration-view/12824761#12824761)）。只要他们保持在相同的位置，一切都很好（即如果他们`layoutAttributes.frame`没有改变）。

但是，一旦我重新布局并更改`layoutAttributes`了装饰或补充视图，它们就会在视觉上重复 - 即在其原始位置的背景中有一个副本，在他们的新位置有一个副本。如果我从 XIB 或完全在代码中实例化它们，则行为是相同的，并且对于正常单元格不会发生该行为。

起初我认为这是某种重绘问题，但这些“副本”在重新布局、重绘等后仍然存在。然而，它们不是真正的副本，因为`layoutAttributesForDecorationView`它们从来没有被调用过（仅适用于新位置）。在后台似乎有一些缓存`UICollectionView`。

有没有人得到这个工作或有任何想法。我必须说我是 iOS 平台的新手，所以它也可能是简单的事情，比如设置“剪辑绑定”或“清除图形上下文”属性（我试过这些，但可能是类似的）。

这让我发疯，奇怪的是那里绝对没有示例代码。

我在问自己：装饰和补充观点不是要重新定位吗？（我希望不是）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-12T21:58:58.360

嗨，这是一个老问题，但有一个答案。

实际上，当我实现自己的 Layout 对象时，我也遇到了这些问题，直到我意识到必须缓存您在自定义布局中创建的任何布局属性对象。在文档中实际上对此有一个非常模糊的引用（我现在不记得确切的位置），这很容易被误解。

基本上，一旦您为索引路径中的单元格请求了 layoutAttributes 对象，您应该保留属性对象（例如，将其保留在字典中，索引路径作为键）并为任何和所有后续返回相同的属性对象属性请求。如果您不这样做，而是重新创建新的布局属性，批量更新的动画会导致严重的图形故障和伪影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:55:31.290

我遇到过同样的问题。UICOllectionview 似乎存在一些错误（这不是我第一次看到）。我通过不使用“performBatchUpdates”来修复它。我失去了动画 - 但在列表中没有不需要的视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T22:32:04.880

我有类似的症状。我的问题是我在创建自定义布局时不小心包含了补充视图的重用**ID**而不是**kindID 。**

 **具体来说我有这个（**错误**）

```
UICollectionViewLayoutAttributes *attributes = 
  [UICollectionViewLayoutAttributes
    layoutAttributesForSupplementaryViewOfKind:myViewReuseID
    withIndexPath:sectionIndexPath]; 
```

当我应该拥有这个（**对**）

```
UICollectionViewLayoutAttributes *attributes = 
  [UICollectionViewLayoutAttributes
    layoutAttributesForSupplementaryViewOfKind:myViewKindID
    withIndexPath:sectionIndexPath]; 
```

这意味着 prepareForReuse 永远不会被调用，我的旧观点也永远不会消失。相反，他们一直在堆积。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:25:55.863

I think Apple is going to indicate at least in the case of Decoration views that they are working as intended. I ran into this same problem as I was re-sizing the last section and trying to setup the Decoration view to surround the sections as they changed. Using a simple view at first that just had a red background the entire background of my app became red and this confused me. I subsequently changed the alpha to 0.3f on the layout attributes of the decoration views and I was able to see them layer upon each other as the sections changed.

What really tipped me off that this might be by design though was a line I read in a tutorial on [UICollectionView](http://mobile.tutsplus.com/tutorials/iphone/uicollectionview-layouts/)

> On the other hand, decoration views are “ornamental” rather than data-driven: think of the bookshelf backdrop in the iBooks app.

The key is that Decoration Views aren't data-driven and shouldn't be changing as your data changes regardless of if you being able to do this in the custom layout. Like in the case of a bookshelf the size of the shelves don't change after they've been created.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-20T08:50:05.187

我知道这是一个老问题，但是当使布局无效时，补充视图在各处重复出现问题时，我遇到了这个问题。我相信这是一个错误，我通过覆盖`invalidateLayout`我的布局对象并删除补充视图来修复它，如下所示：

```
- (void)invalidateLayout {
    [super invalidateLayout];
    // Manually remove all suplementary views of a certain type
    /**
     ** This appears to be a BUG. Invalidate view does not remove suplementary view
     **     from the view hierachy. But they are Orphaned so stay on screen. 
     **/
    for (UIView *subview in [self.collectionView subviews]) {
        if ([subview isKindOfClass:[UICollectionReusableView class]]) {
            [subview removeFromSuperview];
        }
    }
} 
```

替换`UICollectionReusableView`为留在屏幕上的可重用视图的类。

希望这可以帮助某人。**

# html - 如何在 Internet Explorer 和 Google chrome 的多个页面上打印表格标题？

> ID：12857306
> 
> 赞同：1
> 
> 时间：2012-10-12T10:42:40.887
> 
> 标签：html, css, jsp

我正在做一个项目，我必须打印具有多列和多行的数据。我想在每个打印页面上打印标题，以便更容易理解每​​个页面上的标题。我知道`THEAD`，但它只支持 Firefox。我想要它用于 IE 和 chrome。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T09:41:15.553

[http://www.evagoras.com/2011/02/10/printing-table-headers-on-every-page/](http://www.evagoras.com/2011/02/10/printing-table-headers-on-every-page/)
这个链接帮助我解决了这个问题。它在 IE 上运行成功。

```
<style type="text/css" media="print,screen" >
th {
    font-family:Arial;
    color:black;
    background-color:lightgrey;
}
thead {
    display:table-header-group;
}
tbody {
    display:table-row-group;
}
</style> 
```

感谢您的所有回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:49:27.497

将标题放在实际`<thead>`元素中。这在过去似乎对我有用。我现在正在使用手机，因此无法在您提到的特定浏览器中对其进行测试。

### 参考

*   [http://www.quackit.com/html/tags/html_thead_tag.cfm](http://www.quackit.com/html/tags/html_thead_tag.cfm)

# php - magento : 用户文件上传

> ID：12857311
> 
> 赞同：1
> 
> 时间：2012-10-12T10:43:09.463
> 
> 标签：php, magento

我需要允许客户在将产品放入购物车时上传与该产品相关的图片或文本区域中的文本。

我查看了可配置的产品属性，但您只能进行下拉或多选，没有文本区域或上传字段。

有没有内置的解决方案？阅读 magento 论坛，我看到用户上传选项在 magento 1.3 中实现，但在我的 magento 版本中不可用。(1.7.0.2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:56:12.770

您可以使用输入类型“文件”的自定义选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:47:05.023

我不认为有任何内置的方法可以做到这一点，你可以为它创建一个属性。

您可以允许您的客户在使用此免费扩展程序下订单之前写评论：http: [//www.magentocommerce.com/magento-connect/customer-order-comment.html](http://www.magentocommerce.com/magento-connect/customer-order-comment.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T10:56:49.087

[http://www.magentocommerce.com/magento-connect/](http://www.magentocommerce.com/magento-connect/)上提供了一些扩展，但我没有测试它们，因为它们主要是成本。我还找到了一个免费的，但也没有测试：http: [//www.magentocommerce.com/magento-connect/product-attachments-extension.html](http://www.magentocommerce.com/magento-connect/product-attachments-extension.html)

# php - 重新加入分块的 HTML 5 上传

> ID：12857320
> 
> 赞同：3
> 
> 时间：2012-10-12T10:43:38.920
> 
> 标签：php, fileapi, chunking

我们从头开始使用文件 api 构建了一个 HTML5 上传器，没有外部库，它工作正常，直到我们尝试上传大于 150MB 的文件。此时我们意识到我们需要将文件作为块上传。

Javascript 方面正在由拆分文件和上传的其他人进行排序。我正在处理 PHP 方面的工作，需要知道我需要查看什么来确定如何重新加入这些块。

我需要修改每个块的标题吗？

在等待下一个时我应该如何排队？

我们在做这个很长的路要走吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:46:40.990

在我看来，您需要与执行 javascript 方面的 gui 交谈，或者至少从他那里获取完成的脚本并查看代码，很可能块号将在请求的标头之一中发送。

由于您将在不同的 php 脚本中接收块，我建议您将它们存储在数据库或文件系统中，文件系统会有点困难，因为您还需要添加块编号，如果您真的想去文件系统路径 我建议您将它们存储在一个文件夹中，该文件夹以文件名作为文件名，将块作为 0...chunk_count-1 作为该文件夹内的文件。

您还应该通过标头接收块的总数，并在上传后比较您拥有的块数。当你拥有所有的块时，只需按照它们的块 ID 的顺序组装它们。如果您为此使用文件系统，则应注意所有文件实际上都已完全写入（通常如果总大小与原始大小匹配）。数据库使这变得更加简单，因为当您拥有所有数据时，您可以在其中插入一行。

确保所有文件都已完全写入的文件系统方法的解决方法是将它们写入不同的文件夹，并在完成写入后将它们移动到目标文件夹。两个文件夹应位于同一文件系统上，因此移动不会改为生成副本+删除。

# facebook - fb_ca_chain_bundle.crt 危险吗

> ID：12857337
> 
> 赞同：1
> 
> 时间：2012-10-12T10:44:47.673
> 
> 标签：facebook, security

我正在使用 Facebook PHP API，我需要在我的服务器上有文件 fb_ca_chain_bundle.crt。如果这个文件在网络上是可见的，这是否很危险？如果有人找到它可以用它做什么（假设他没有 API 秘密）？

我无法编辑 .htaccess 文件，所以我唯一的选择是将 facebook 库隐藏在目录树中的某个位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:03:52.443

该文件对每个人都是一样的，并且不包含有关您或您的应用程序的任何内容。有人从您的服务器上读取它没有危险。它包含中间 FB 证书，以便您的代码可以与他们的代码建立 SSL 连接。

# java - 如何在 Java 中进行后期绑定

> ID：12857338
> 
> 赞同：1
> 
> 时间：2012-10-12T10:44:53.220
> 
> 标签：java, android, soap, xml-serialization, android-ksoap2

我有一些用于在 Soap Web 服务访问中生成请求的点网代码。

```
 List<Employee> Employees = new List<Employee>{
new Employee{firstname="Aamir",lastname="Hasan",age=20},
new Employee{firstname="awais",lastname="Hasan",age=50},
new Employee{firstname="Bill",lastname="Hasan",age=70},
new Employee{firstname="sobia",lastname="khan",age=80},  
}; 
```

现在我想在 Android 中做同样的事情。那么我如何在java中创建这种后期绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:45:57.207

```
Arrays.asList(new Employee[]{new Employee("Aamir", "Hasan", 20), new Employee("awais", "Hasan", 50)}); 
```

请注意，您必须使用 Java 中的所有参数创建一个正确的构造函数。“{parameter=value}”表示法不起作用。

更新：

通过适当的构造函数，我的意思是所有属性的显式构造函数：

```
public class Employee {

    public Employee(String firstName, String lastName, int age) {
        // set property values
    }
} 
```

# java - java中变量的命名限制

> ID：12857340
> 
> 赞同：12
> 
> 时间：2012-10-12T10:45:06.910
> 
> 标签：java

为什么Java 变量名中不允许使用特殊字符（除了`$`, ）？`_`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-12T10:46:37.310

情况并非如此——许多特殊字符实际上对标识符有效。它[在 JLS #3.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)中定义：

> 标识符是 Java 字母和 Java 数字的无限长度序列，其中第一个必须是 Java 字母。
> [...]
> “Java 字母”是该方法`Character.isJavaIdentifierStart(int)`返回 true 的字符。
> “Java 字母或数字”是该方法`Character.isJavaIdentifierPart(int)`返回 true 的字符。

例如，这是一个有效的变量名：

```
String sçèêûá¢é£¥ = "bc"; 
```

您可以使用以下简单代码查看所有有效字符：

```
public static void main(String args[]) {
    for (int i = 0; i < Character.MAX_VALUE; i++) {
        if (Character.isJavaIdentifierPart(i)) {
            System.out.println("i = " + i + ": " + (char) i);
        }
    }
} 
```

ps：[@PeterLawrey 博客上的好例子](http://vanillajava.blogspot.co.uk/2012/08/uses-for-special-characters-in-java-code.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-12T10:52:46.567

实际上，Java 标识符中允许使用大量特殊字符。例如，您可以拥有每个货币符号和所有 10 个连续字符（不仅仅是 _）

```
if( ⁀ ‿ ⁀ == ⁀ ⁔ ⁀ || ¢ + ￠== ₡) 
```

更奇怪的是，您可以使用不可见的字符或导致文本向后打印。

以下程序`\u202e`在其标识符中具有“特殊”外观。

```
for (char c⁯‮h = 0; c⁯‮h < Character.MAX_VALUE; c⁯‮h++)
    if (Character.isJavaIdentifierPart(c⁯‮h) && !Character.isJavaIdentifierStart(c⁯‮h))
        System.out.printf("%04x <%s>%n", (int) c⁯‮h, "" + c⁯‮h); 
```

这将打印编译和运行的标识符中允许的所有特殊字符。

[http://vanillajava.blogspot.co.uk/2012/09/hidden-code.html](http://vanillajava.blogspot.co.uk/2012/09/hidden-code.html)

[http://vanillajava.blogspot.co.uk/2012/08/uses-for-special-characters-in-java-code.html](http://vanillajava.blogspot.co.uk/2012/08/uses-for-special-characters-in-java-code.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-12T10:51:28.047

以下代码在Java中都是有效的......

```
int Δ = 1;
double π = 3.141592;
String 你好 = "hello";
Δ++;
System.out.println(Δ); 
```

我会说这些对于变量名来说是非常特殊的字符。

来源：[http ://rosettacode.org/wiki/Unicode_variable_names#Java](http://rosettacode.org/wiki/Unicode_variable_names#Java)

# iphone - 即使相机是在反向 iPhone 上拍摄的，如何正确使用图像

> ID：12857342
> 
> 赞同：0
> 
> 时间：2012-10-12T10:45:07.637
> 
> 标签：iphone, objective-c, ipad, uiimageview, image-capture

在我的应用程序中，我在两个位置使用了捕获的图像，

1.  ***`view1`***：捕获图像后立即在 imageView1 中使用/设置。
2.  ***`view2`***:在第二个视图**的 imageView2 中重新使用 imageview1.image 。**

在第一个图像 view1 中，即使我们采取**相反的方向，图像也被正确设置，**

但是在第二张图片中，当我们`imageviw1.image`以相反的方向重复使用 It 设置时。

如何按原样重用图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:12:47.107

利用

```
[UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]]; 
```

**例子：**

```
typedef void (^ALAssetsLibraryAssetForURLResultBlock)(ALAsset *asset);
typedef void (^ALAssetsLibraryAccessFailureBlock)(NSError *error);  

ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
{
    ALAssetRepresentation *rep = [myasset defaultRepresentation];
    CGImageRef iref = [rep fullResolutionImage];
    if (iref) {

        UIImage *images  = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];

    }                               
};

ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
{

};    

NSURL *asseturl = [NSURL URLWithString:@"fileURL"];
assetslibrary = [[ALAssetsLibrary alloc] init];
[assetslibrary assetForURL:asseturl 
               resultBlock:resultblock
              failureBlock:failureblock]; 
```

# java - 总和为 A 的 N 个整数的不同组的数量

> ID：12857344
> 
> 赞同：12
> 
> 时间：2012-10-12T10:45:09.733
> 
> 标签：java, math, combinatorics

我想计算 N 个整数的**不同**有序组的数量，以便每个组的元素总和为 A

例如：如果 N = 3 且 A = 3，则结果应为 10：
1 = [3, 0, 0]
2 = [2, 1, 0]
3 = [1, 2, 0]
4 = [0, 3 , 0]
5 = [2, 0, 1]
6 = [1, 1, 1]
7 = [0, 2, 1]
8 = [1, 0, 2]
9 = [0, 1, 2]
10 = [0, 0, 3]

我这样做的方式是蛮力：

```
public static int calc(int a, int n){
    if (n <= 1 || a == 0) return 1;

    int sum = 0;
    for (int i=0; i<=n; i++)
        sum += calc(a - i, n - 1);

    return sum;
} 
```

我怀疑可能有更好的方法（我错过了一些数学计算..）有吗？

**编辑** 在最初的问题中，我忘了考虑顺序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:56:02.210

这是A 到 N 部分（包括零部分）的组合**组合。**对 (A, N) 的组合数等于 C(A + N - 1, A)，其中 C() 是组合数，即二项式系数。[在此处](http://mathworld.wolfram.com/Composition.html)和[此处](http://en.wikipedia.org/wiki/Composition_%28number_theory%29)查看相同的公式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T12:02:18.067

想象一下大段的长度`A`。想象一下`N-1`有序的分隔符，将段分成几部分。因此，每个部分都是一个和，而整个段是一个和。

因此，您所需要的只是提供算法来枚举分隔符位置。

您可以将第一个分隔符放入任何`N+1`位置 P_0={0,1,...N}

第二个分隔符可以进入任何 P_1={P_0,...N}

等等。

您可以使用递归来实现这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T10:55:28.537

我确信有一个数学计算可以回答这个问题，但由于这是一个编程问答，我会告诉你如何让你的程序更快地给出答案：你可以使用[*memoization*](http://en.wikipedia.org/wiki/Memoization)。

`calc(a, n)`目前，您的程序每次都会重新计算答案。但是，答案可以计算一次，因为它在后续调用中不会改变。为 的结果添加一个 2D 数组`calc(a,n)`，用 初始化`-1`，并在计算结果之前使用它来查找结果，以节省大量时间来一遍又一遍地重新计算相同的数字：

```
private static int[][] memo = new int[30][30];
static {
    for(int i = 0 ; i != 30 ; i++)
        for(int j = 0 ; j != 30 ; j++)
            memo[i][j] = -1;
}
public static int calc(int a, int n){
    if (n <= 1 || a == 0) return 1;
    if (memo[a][n] > 0) return memo[a][n];
    int sum = 0;
    for (int i=0; i<=n; i++)
        sum += calc(a - i, n - 1);
    return (memo[a][n] = sum);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T23:55:50.783

对于枚举：使用上面其他解决方案中给出的公式，更有效。除非需要，否则您永远不想实际生成完整的 n 整数组合。它们带有难以处理的属性，特别是如果您只想汇总它们而不是生成它们。生成它们是另一个问题......

对于生成：使用无环算法......有许多 O(1)-per 格雷码序列结果。很少有限制整数组合的变体没有或可以有无环算法。这类整数组合问题中的许多算法，其中大多数都是非常具体的，但是对于这个特定问题存在大量现代无环算法。超级高效。除非您可以使用大量并行计算，否则蛮力永远不是解决此问题的方法。Google 或 Google Scholar 随时为您服务！:D

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T14:18:08.817

我找到了另一种解决方案，只是使用递归且没有分隔符：

```
public class App201210121604 {

public static Vector<int[]> split(int sum, int count) {

    if( sum < 0 ) {
        throw new IllegalArgumentException("Negative sum is not allowed");
    }

    Vector<int[]> ans = new Vector<int[]>();

    // "reserved" end of recursion
    if( count <= 0 ) {
        // nothing to do
    }

    // end of recursion
    else if( count == 1 ) {
        ans.add(new int[] {sum});
    }

    // body of recursion
    else {
        // for each first summand from 0 to summ
        for(int i=0; i<=sum; ++i) {

            // do a recursion to get the "tail"
            for(int[] tail : split(sum-i, count-1)) {

                int[] group = new int[count];
                group[0] = i;
                System.arraycopy(tail, 0, group, 1, count-1);

                ans.add(group);
            }
        }
    }

    return ans;
}

public static void main(String[] args) {

    Vector<int[]> ans = split(8, 4);

    for(int[] group : ans) {
        for(int i=0; i<group.length; ++i) {
            if( i>0 ) System.out.print("+");
            System.out.print(group[i]);
        }
        System.out.println("");
    }
}

} 
```

# google-app-engine - 获取更多大小的 NULL 属性类型：Google App Engine Datastore

> ID：12857345
> 
> 赞同：0
> 
> 时间：2012-10-12T10:45:11.387
> 
> 标签：google-app-engine, google-cloud-datastore

在我的应用程序中，各种 db Kind 是用多种类型的属性定义的（有些已编入索引，有些未编入索引）

但是很惊讶，看到20 GB 中的**Null大小间距约为 950 MB，**

![在此处输入图像描述](../Images/382083bc3bdd562476d508f7bf982a68.png)

有没有办法优化这个？

**注意**：在少数种类的属性没有默认值，我需要定义默认值吗？

前任。

```
class terminals(db.Model):
   location_code = db.StringProperty()
   terminal_code = db.StringProperty(default='')
   pass_code = db.StringProperty(indexed=False)
   print_format = db.StringProperty(indexed=False)
   start_invoice_no = db.IntegerProperty(indexed=False, default=1)
   next_invoice_no = db.IntegerProperty(indexed=False)
   use_jzebra = db.BooleanProperty(default=False, indexed=False)
   last_doc_details = db.TextProperty(default='{}')
   last_modified_on = db.DateTimeProperty(auto_now=True) 
```

而且，一些属性很少使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:44:11.083

您可以在构建数据存储属性时缩短它们本身的名称，因为我相信它们也计入总存储限制。

```
username = ndb.StringProperty(name='un')
username = db.StringProperty(name='un') 
```

您可以参考，`.username`但它会像存储`'un'`在数据存储中一样存储，从而节省宝贵的字节。

因此，也许您的空字段具有“长”名称，并且有很多实例。

db 链接：[https ://developers.google.com/appengine/docs/python/datastore/propertyclass](https://developers.google.com/appengine/docs/python/datastore/propertyclass)

```
name 
```

> 属性的存储名称，在查询中使用。这默认为用于属性的属性名称。因为模型类具有属性以外的属性（不能用于属性），所以属性可以使用名称来使用保留的属性名称作为数据存储中的属性名称，并为属性属性使用不同的名称。有关详细信息，请参阅不允许的属性名称。

# android - 重置活动安卓

> ID：12857350
> 
> 赞同：0
> 
> 时间：2012-10-12T10:45:23.027
> 
> 标签：android, android-intent, android-activity

我的第一页有一个微调器，它将解析第二个活动的值。我在第二页上设置了 onBackPressed 以返回我的主页，但问题是，微调器选择没有被重置。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:35:20.273

试试这个

它会刷新你的 1stActivity

```
@Override
public void onResume()
{
    super.onResume();
    startActivity(getIntent());
} 
```

**编辑**

**解释**

您可以[在此处查看 Android 的生命周期](http://developer.android.com/reference/android/app/Activity.html)

当您从第一个 Activity 转到第二个 Activity`OnPause()`方法时。同样，当您从第二个活动`onResume()`方法返回第一个活动时，将被调用。

有两种方法可以重置 Spinner

**第一**

正如您要求通过此方法重新启动您的第一个活动

```
startActivity(getIntent()); // It refresh your activity 
```

更多细节`startActivity(getIntent())`

```
Intent refresh = new Intent(FirstActivity.this,FirstActivity.class)
startActivity(refresh); 
```

**第二种方式**

```
 Spinner yourSpinner = (Spinner)findViewById(R.id.yourSpinnerId);
 yourSpinner.setSelection(0);// Which reset Spinner to default 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:56:47.547

在应用的 onStart 方法中设置 Adapter，或者在 onStart() 方法中调用 notifyDataSetChanged() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:57:56.633

当你从activity B返回到activity A时，会调用activity A中的onRestart方法。
您可以覆盖该方法并在那里清除您的微调器。

```
@Override
public void onRestart()
{
   //clear your spinner here... spinner.setSelection(0) or something..
   super.onResume();
} 
```

这是一个解释：

> onRestart ：在您的活动停止后，在重新开始之前调用。始终跟随 onStart()

# javascript - 在画布中旋转 imageData

> ID：12857351
> 
> 赞同：1
> 
> 时间：2012-10-12T10:45:24.897
> 
> 标签：javascript, html, html5-canvas

好的，我想我必须说得更清楚:)

我的代码适用于方形图像，但它对矩形图像没有任何作用。我认为这是因为 imageData.width 和 imageData.height 仍然相同并且无法更改。

你们知道我怎样才能让它工作吗？

```
var canvas = document.getElementById("canvas0calc");
var ctx  = canvas.getContext('2d');

var objImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);

// swap canvas size
var temp = canvas.width;
canvas.width = canvas.height;
canvas.height = temp;

//create new Array for Data
var newImageData = new Array(objImageData.height);
for (var k = 0; k < newImageData.length; k++) {
    newImageData[k] = new Array(objImageData.width);
}

//the actual matrix-rotate algorithm which is working perfectly
for (var i = 0; i < objImageData.height; i++) {
    for (var j = 0; j < objImageData.width; j++) {
        newImageData[i][j] = [objImageData.data[((i*(objImageData.width*4)) + ((objImageData.width - j - 1)*4))], objImageData.data[((i*(objImageData.width*4)) + ((objImageData.width - j - 1)*4)) + 1],objImageData.data[((i*(objImageData.width*4)) + ((objImageData.width - j - 1)*4)) + 2],objImageData.data[((i*(objImageData.width*4)) + ((objImageData.width - j - 1)*4)) + 3]];
    }
}

var resultArray = new Array(objImageData.width * objImageData.height * 4);
var count = 0;
for (var y = 0; y < newImageData.length; y++) {
    for (var x = 0; x < newImageData[0].length; x++) {
        for (var z = 0; z < 4; z++) {
            resultArray[count++] = newImageData[x][y][z];
        }
    }
}

for (var u = 0; u < objImageData.data.length; u++) {
    objImageData.data[u] = resultArray[u];
}

ctx.putImageData(objImageData, 0, 0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:23:28.367

它不仅仅是交换宽度和高度值！如果我取一个正方形，然后将其旋转 45°，然后交换宽度和高度将无济于事 - 图像实际上是 sqrt(2) 的宽度和高度的两倍（从一个对角角到另一个对角线的长度是 sqrt ( 1^2 + 1^2) 乘以相邻角之间的长度。关键是，您需要比简单的交换更好地计算新的图像尺寸。

我似乎无法像 10 或 15 年前那样轻松地在网上找到图像旋转例程 - 正是我们现在拥有的所有快速图形硬件使得它对于很多人的需求来说是多余的。

目前尚不清楚您是否想旋转 90°、180° 或 270° - 我怀疑是通过简单地交换宽度和高度，但我不能确定。如果是这样，请在此处查看这篇文章：http: [//www.codeproject.com/Articles/21446/Fast-Image-Rotation-For-NET-Compact-Framework](http://www.codeproject.com/Articles/21446/Fast-Image-Rotation-For-NET-Compact-Framework)

但是，如果您想旋转任意角度，请继续阅读。

我意识到它是 C 并且您正在使用 javascript - 但无论如何，旋转数学是一样的，只需根据需要忽略/使用等效的 javascript 函数。

```
// RotateMemoryDC rotates a memory DC and returns the rotated DC as well as its dimensions
HBITMAP RotateMemoryDC(HBITMAP hBmpSrc, float angleDeg)
{
    HBITMAP hBmpDst;
    float x1, x2, x3, x4, y1, y2, y3, y4, cA, sA;
    float CtX, CtY, orgX, orgY, divisor;
    int OfX, OfY;
    int stepX, stepY;
    int iorgX, iorgY;
    RECT rt;
    pBGR src, dst, dstLine;
    BITMAPINFO bi;
    // my edits
    BITMAP bm;
    int SrcX, SrcY, dstX, dstY;     // were input variables, with the & symbol in front of them (input/output vars)\

    HDC hdcSrc, hdcDst, hdcScreen;

    HBITMAP oldDstBmp, oldSrcBmp;

    GetObject(hBmpSrc, sizeof(bm), &bm);
    SrcX = bm.bmWidth;
    SrcY = bm.bmHeight;

    // Rotate the bitmap around the center
    CtX = ((float) SrcX) / 2;
    CtY = ((float) SrcY) / 2;

    // First, calculate the destination positions for the four courners to get dstX and dstY
    float angleRad = angleDeg * 3.1415926 / 180.0;
    cA = (float) cos(angleRad);
    sA = (float) sin(angleRad);

    x1 = CtX + (-CtX) * cA - (-CtY) * sA;
    x2 = CtX + (SrcX - CtX) * cA - (-CtY) * sA;
    x3 = CtX + (SrcX - CtX) * cA - (SrcY - CtY) * sA;
    x4 = CtX + (-CtX) * cA - (SrcY - CtY) * sA;

    y1 = CtY + (-CtY) * cA + (-CtX) * sA;
    y2 = CtY + (SrcY - CtY) * cA + (-CtX) * sA;
    y3 = CtY + (SrcY - CtY) * cA + (SrcX - CtX) * sA;
    y4 = CtY + (-CtY) * cA + (SrcX - CtX) * sA;

    OfX = ((int) floor(min4(x1, x2, x3, x4)));
    OfY = ((int) floor(min4(y1, y2, y3, y4)));

    dstX = ((int) ceil(max4(x1, x2, x3, x4))) - OfX;
    dstY = ((int) ceil(max4(y1, y2, y3, y4))) - OfY;

    // Create the new memory DC
    hdcScreen = GetDC(NULL);
    hdcDst = CreateCompatibleDC(hdcScreen);
    hdcSrc = CreateCompatibleDC(hdcScreen);
    hBmpDst = CreateCompatibleBitmap(hdcScreen, dstX, dstY);
    oldDstBmp = (HBITMAP)SelectObject(hdcDst, hBmpDst);
    oldSrcBmp = (HBITMAP)SelectObject(hdcSrc, hBmpSrc);

    // Fill the new memory DC with the current Window color
    rt.left = 0;
    rt.top = 0;
    rt.right = dstX;
    rt.bottom = dstY;
    HBRUSH redBrush = CreateSolidBrush(RGB(255,0,0));

    FillRect(hdcDst, &rt, redBrush);
    DeleteObject(redBrush);

    // Get the bitmap bits for the source and destination
    src = MyGetDibBits(hdcSrc, hBmpSrc, SrcX, SrcY);
    dst = MyGetDibBits(hdcDst, hBmpDst, dstX, dstY);

    dstLine = dst;
    divisor = cA*cA + sA*sA;
    // Step through the destination bitmap
    for (stepY = 0; stepY < dstY; stepY++)
    {
        for (stepX = 0; stepX < dstX; stepX++)
        {
            // Calculate the source coordinate
            orgX = (cA * (((float) stepX + OfX) + CtX * (cA - 1)) + sA * (((float) stepY + OfY) + CtY * (sA - 1))) / divisor;
            orgY = CtY + (CtX - ((float) stepX + OfX)) * sA + cA *(((float) stepY + OfY) - CtY + (CtY - CtX) * sA);
            iorgX = (int) orgX;
            iorgY = (int) orgY;
            if ((iorgX >= 0) && (iorgY >= 0) && (iorgX < SrcX) && (iorgY < SrcY))
            {
                // Inside the source bitmap -> copy the bits
                dstLine[dstX - stepX - 1] = src[iorgX + iorgY * SrcX];
            }
            else
            {
                // Outside the source -> set the color to light grey
                //  dstLine[dstX - stepX - 1].b = 240;
                //  dstLine[dstX - stepX - 1].g = 20;
                //  dstLine[dstX - stepX - 1].r = 240;
            }
        }
        dstLine = dstLine + dstX;
    }

    // Set the new Bitmap
    bi.bmiHeader.biSize = sizeof(bi.bmiHeader);
    bi.bmiHeader.biWidth = dstX;
    bi.bmiHeader.biHeight = dstY;
    bi.bmiHeader.biPlanes = 1;
    bi.bmiHeader.biBitCount = 32;
    bi.bmiHeader.biCompression = BI_RGB;
    bi.bmiHeader.biSizeImage = dstX * 4 * dstY;
    bi.bmiHeader.biClrUsed = 0;
    bi.bmiHeader.biClrImportant = 0;
    SetDIBits(hdcDst, hBmpDst, 0, dstY, dst, &bi, DIB_RGB_COLORS);

    // Free the color arrays
    free(src);
    free(dst);
    SelectObject(hdcSrc, oldSrcBmp);
    SelectObject(hdcDst, oldDstBmp);
    ReleaseDC(NULL, hdcScreen);
    DeleteDC(hdcSrc);
    DeleteDC(hdcDst);
    return hBmpDst;
} 
```

# php - excel中的整数值变化，包括E+11类似的值

> ID：12857354
> 
> 赞同：1
> 
> 时间：2012-10-12T10:45:32.073
> 
> 标签：php, excel, header

将整数值转换为 XLS 文件后，如何保持其原始格式？目前它发生了变化，我在原始值的末尾看到了**E+符号和一些数字。**开头的零（0）也消失了。

谢谢

```
$OUTPUT.= "<td>".$row["telephone"]."</td>";    //Original value 0852055504077

header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;Filename=file.xls');
echo $OUTPUT; 
```

**结果是 8.52056E+11**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:46:29.483

`'`一种可能的解决方案是在电话号码前添加撇号 ( )：

```
$OUTPUT.= "<td>'".$row["telephone"]."</td>"; 
```

这样，您就可以让 Excel 知道不要解释该单元格中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:08:23.023

您可以使用某种格式存储它，例如

```
countrycode XXXX XXXX 
```

例如-> 091 98980 12345

这里 ：

```
 $telephone =  $row["telephone"];    // Suppose 0919898098980
 $OUTPUT.= "<td>".$telephone.substring."</td>";
 $len = strlen($telephone);
 echo $t = substr($telephone, 0,3)." ".substr($telephone, 3,5)." ".substr($telephone, 8); // Output : 091 98980 98980
 // Or you do can 
 echo $t = substr($telephone, 0,  ($len/2)+($len%2))." ".substr($telephone, ($len/2)+($len%2)); // output : 0919898 098980 
```

# matlab - 根据公式设置刻度

> ID：12857360
> 
> 赞同：1
> 
> 时间：2012-10-12T10:46:13.257
> 
> 标签：matlab, matlab-figure, axis-labels

给定一个由频谱图函数创建的图形，如何根据以下公式设置刻度？

```
(12 × log2 (f / 440)) + 69 
```

[`f`是轴上的当前值，公式的结果应该替换它]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:05:07.790

如果我正确理解您的问题...可能有更有效的方法，但我认为这可行：

```
data = rand(1,1000);

plot(data)
f = get(gca,'Xtick');
new_ticks = (12 * log2((f / 440) + 69))
set(gca,'Xticklabels', new_ticks) 
```

这使 x 轴缩放保持不变，但会根据您提供的公式更改刻度标签。

# c# - 如何更改 CheckedListBox 项目颜色

> ID：12857367
> 
> 赞同：1
> 
> 时间：2012-10-12T10:46:37.097
> 
> 标签：c#, .net, colors, checkedlistbox

我以为这很简单

```
CheckedListBox1.Item[i].BackColor = .... 
```

**但我在智能感知**或谷歌搜索中找不到任何东西。

我想为 Checked List Box 中的每个项目设置特定的颜色

# android - 当您从 phonegap 应用程序中的 android 4.0.4 ICS 中的数字字段导航时，值会从文本框中截断

> ID：12857372
> 
> 赞同：0
> 
> 时间：2012-10-12T10:46:44.830
> 
> 标签：android, html, cordova, android-4.0-ice-cream-sandwich, phone-number

我的 phonegap 应用程序中有两个字段，一个是“tel”类型，另一个是“text”类型。

问题：

我在文本字段中输入一些值假设“abcdefghijkl”

现在我在数字字段中输入一些值，`12345`然后单击文本字段。

文本字段中的值被截断为“fghijkl”。您在 num 字段中输入的位数，文本字段中相同数量的字符将被删除。

此问题仅出现在三星 Galaxy S3 手机上的 Android 4.0.4 中，我还测试了带有 Android 4.0.4 的 Galaxy Nexus，它运行良好。其他安卓版本也可以。

任何输入/帮助表示赞赏。

代码：

```
<input type="tel" class="ui-shadow-inset" id="telNumber" placeholder="NUMBER" tabindex="1"/>
<input type="text" class="ui-shadow-inset" id="email" placeholder="EMAIL" tabindex="2"/> 
```

# java - 在构建 javax.sampled 的 Android 版本时需要帮助。音频输入流

> ID：12857375
> 
> 赞同：0
> 
> 时间：2012-10-12T10:46:50.350
> 
> 标签：java, android, wav, javasound

由于 Android 不支持 javax.sampled 声音 api，我正在尝试为 WAV 文件构建 AudioInputStream 和 Audioformat。[我尝试通过使用此https://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)读取 WAV 文件来构建 WAVE FILE 类 并使用此波形对象我尝试创建自己的 AudioInputStream .. 但它是不工作。任何帮助都受到高度赞赏？AudioInputstream 是否仅包含 PCM 数据或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:55:32.320

> Does AudioInputstream contains only PCM data or what ?

No, it can contain various types.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:22:57.130

好的，我明白了... AudioInputStream 切断了音频数据的前 14 个字节并相应地更新了长度。因此，我能够看到差异..

# iphone - 在 iPhone 中发生标记检测时显示视频

> ID：12857376
> 
> 赞同：1
> 
> 时间：2012-10-12T10:46:52.603
> 
> 标签：iphone, objective-c, augmented-reality

我正在研究增强现实。我只是按照这个[https://ar.qualcomm.at/sdk/ios](https://ar.qualcomm.at/sdk/ios)链接下载了 vuforia-videoplayback-ios-1-0-2.zip。

当我在 xcode 4.2 中构建它时，会出现一个错误，指出：

> 找不到词法或预处理器问题“QCAR/Tool.h”文件

我就是无法解决。如果有人能指出任何可以帮助我摆脱这种情况的更多信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:52:06.440

我在官方论坛中找到了这个，也许它包含有价值的信息：

[https://ar.qualcomm.at/content/ios-getting-started-tutorial](https://ar.qualcomm.at/content/ios-getting-started-tutorial)

有一个关于 SO 的问题的链接：

[将系统头搜索路径添加到 Xcode](https://stackoverflow.com/questions/3428216/adding-system-header-search-path-to-xcode)

这似乎对有类似问题的人有所帮助：

[https://ar.qualcomm.at/content/problems-linking-qcar-files](https://ar.qualcomm.at/content/problems-linking-qcar-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T20:28:33.217

在项目 Build Settings -> 从 Basic 设置为 ALL -> Search Path -> 在行 Header Search Paths 中填充正确的构建路径

如果你还有问题 set chmod -R 0777 {sdk vuforia}/

# c# - 点击事件不会触发

> ID：12857387
> 
> 赞同：0
> 
> 时间：2012-10-12T10:47:31.460
> 
> 标签：c#, asp.net, sharepoint, web-parts

我有一个用于共享点的可视化 Web 部件，代码如下，但点击处理程序的代码永远不会触发。我的代码有什么问题？：

```
protected Button btApply;
protected void Page_Load(object sender, EventArgs e)
{
    ... some code ...
    btApply = new Button();
    btApply.Text = "Apply";
    btApply.CssClass += "InputControl";
    btApply.Click += new EventHandler(btApplyClick);
    this.Controls.Add(btApply);
    ... some code ...
}

protected void btApplyClick(object sender, EventArgs e)
{
    ... some code ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:00:43.973

如果要动态创建控件，则必须在`Page_PreInit`. 引自`MCTS Self-Paced Training Kit (Exam 70-515): Web Applications Development with Microsoft .NET Framework 4`第 106 页：

> 您可以在运行时通过处理 Page.PreInit 事件（如果您不使用母版页）或 Page.Init 事件（如果您正在使用母版页并将控件添加到内容页）将控件添加到表单

页面（以及 Web 部件、用户控件等）生命周期在 MSDN“ [ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.80%29.aspx)”文章中进行了说明。

另外，请参阅非常相似的问题[Event for Dynamically created Controls in ASP.Net](https://stackoverflow.com/questions/9485800/event-for-dynamically-created-controls-in-asp-net)

因此，只需将您的控件创建和事件连接移入`Page_PreInit`，就可以了。

# java - Jersey @InjectParam 创建一个新对象而不是从 Spring 中获取

> ID：12857390
> 
> 赞同：1
> 
> 时间：2012-10-12T10:47:48.993
> 
> 标签：java, spring, jersey

我有一个使用 Spring 的 Jersey 应用程序我正在使用**@InjectParam**希望（以及文档中写的内容）Jersey 会从 Spring Container 获取对象，但似乎 Jersey 是在创建对象而不是向 Spring 请求它.

有没有办法检查 Spring IOC 是否在 Jersey 注册？

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/classes/log4j.properties</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:appContext.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<servlet>
    <servlet-name>SpringDispatcher</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>SpringDispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>
</web-app> 
```

我的班级提供对工厂的基本访问，但工厂是新的

```
public FileStoreService(@InjectParam("dataAccessFactory") factory ) {  
   this.factory = factory;    
} 
```

我已经添加了**@Component**，但仍然没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:31:17.893

使用了错误的 servlet。它应该是

```
<servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class> 
```

当前使用 Jersey 自己的容器，它只会使用默认构造函数创建对象。Spring Servlet 允许 Jersey 附加到 Spring Container。

# orbeon - 新重复控件中的文本控件内的计算

> ID：12857392
> 
> 赞同：1
> 
> 时间：2012-10-12T10:48:00.777
> 
> 标签：orbeon

我正在 Orbeon 表单生成器中开发一个 eform。在这里，我使用的是中继器（新重复）控件。在该控件中有许多行文本控件。我想用用户将在这些控件中插入的值进行一些计算。假设有两列是“商品数量”和“单价”。其中有很多行，即用户将动态插入值。

此中继器控件旁边是一个文本控件，其中必须显示总金额，而无需任何按钮事件。

例如，假设一个中继器结构就像一个表：

```
column name(Number of items---unit price)
 first value(1 ----100)
 second value(5----200) 
```

总金额必须在文本控件上显示为 1100。网格的数量可能会根据用户而增加（此处为 2）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:46:48.833

为了找出总成本，我想不出正常的计算技巧。所以我使用了一个非常小的 XQuery 来解决这个问题。

我不知道您使用的是表单生成器还是“手动”编码的 Xforms，但我使用“手动”进行开发。下面是完整的 Xforms 代码，您可以在 Orbeon Xforms Sandbox 上运行它。

```
<xhtml:html xmlns:xforms="http://www.w3.org/2002/xforms"
    xmlns:f="http://orbeon.org/oxf/xml/formatting"
    xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    >

    <xhtml:head>

        <xforms:model xmlns:xforms="http://www.w3.org/2002/xforms"
                xmlns:xs="http://www.w3.org/2001/XMLSchema" id="main-model">

          <xforms:instance id="form-instance">
            <form>
                <sale>
                    <number-of-units>1</number-of-units>
                    <unit-price>100</unit-price>
                </sale>
                <sale>
                    <number-of-units>2</number-of-units>
                    <unit-price>500</unit-price>
                </sale>
            </form>
          </xforms:instance>

        </xforms:model>
    </xhtml:head>

    <xhtml:body>

      <table>
        <tr>
            <td>
                Total price:
            </td>
            <td>
                <xforms:output value="sum(
                                        for $i in instance('form-instance')/sale
                                            return $i/number-of-units * $i/unit-price
                                        )
                                        " /> 
            </td>
        </tr>
      </table>

    </xhtml:body>
</xhtml:html> 
```

浏览器输出：

![在此处输入图像描述](../Images/8e3598b0fe63bd5ece3eaeae763397d9.png)

如果您使用的是表单生成器，您可以根据需要选择结果表达式并用于计算绑定定义的属性。

表达：

```
sum(
    for $i in instance('form-instance')/sale
        return $i/number-of-units * $i/unit-price
    ) 
```

祝你好运！

# java - 如何在 android 应用程序代码中使用 PIL 代码？

> ID：12857395
> 
> 赞同：0
> 
> 时间：2012-10-12T10:48:20.077
> 
> 标签：java, android, python, python-imaging-library

我知道有[Jython](http://www.jython.org/downloads.html)和[android SDK](http://developer.android.com/sdk/index.html)。而且我知道如何在 PC中使用[PIL 。](http://www.pythonware.com/products/pil/)

我想创建一个从[这里](http://www.pythonware.com/library/pil/handbook/introduction.htm)运行此代码的 Android 应用程序：

```
def roll(image, delta):
    "Roll an image sideways"

    xsize, ysize = image.size

    delta = delta % xsize
    if delta == 0: return image

    part1 = image.crop((0, 0, delta, ysize))
    part2 = image.crop((delta, 0, xsize, ysize))
    image.paste(part2, (0, 0, xsize-delta, ysize))
    image.paste(part1, (xsize-delta, 0, xsize, ysize))

    return image 
```

1.  如何在 Android Java 应用程序源代码中运行 python 代码？
2.  如何在 Android Java 应用程序源代码中运行 PIL python 代码？这意味着如何将 PIL 库添加到项目中？
3.  我可以将整个 python 应用程序制作到 android 以上传到 Market 上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T07:11:29.693

我不确定 Jython 是不是正确的选择，应该考虑在他的 java Android 应用程序中运行 python：[Is there a way to run Python on Android?](https://stackoverflow.com/questions/101754/is-there-any-way-to-run-python-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:51:23.717

您不能在 Android 上使用 Jython。

# python - 使用 minidom 从 URL 中使用 Python 解析 XML

> ID：12857396
> 
> 赞同：1
> 
> 时间：2012-10-12T10:48:23.767
> 
> 标签：python, xml, parsing, minidom

我在从 url 解析以下 xml 时遇到问题。

我的 url 路径中的示例 XML：

```
<?xml version="1.0" encoding="utf-8"?> 
<Documents>
    <class>
        <mid name="yyyyyyyyyyyyy"></mid>
        <person name="yyyyyyyyyy"></person>
        <url name="yyyyyyyyy"></url>
    </class>
    <class>
        <mid name="xxxxx"></mid>
        <person name="xxxxxxxxxx"></person>
        <url name="xxxxxxxxxxx"></url>
    </class>
</Documents> 
```

下面是我的python代码；

```
def staff_list(request):

    url = http://path.to.url/
    dom = minidom.parse(urlopen(url))
    person = dom.getElementsByTagName('person')
    for i in person:
        print i.attributes['name'].value 
```

在 forloop 中，我想在属于同一父类的 xml 中打印人员和 url 标记值。

我尝试了**以下**迭代方法，但得到**“太多值无法解包”**错误

```
def staff_list(request):

    url = http://path.to.url/
    dom = minidom.parse(urlopen(url))
    person = dom.getElementsByTagName('person')
    mid = dom.getElementsByTagName('mid')
    url = dom.getElementsByTagName('url')
    for i,j,k in person,mid,url:
        print i.attributes['name'].value,j.attributes['name'].value,k.attributes['name'].value 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:03:54.950

你想用来`zip()`组合元素，我认为：

```
for i,j,k in zip(person, mid, url): 
```

不过，请帮自己一个大忙，改用[ElementTree API](http://docs.python.org/library/xml.etree.elementtree.html)；该 API 远比 XML DOM API 更 Pythononic 且更易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:07:38.067

如果您想坚持下去，`minidom`可以将循环更改为：

```
for cls in dom.getElementsByTagName('class'):
    person = cls.getElementsByTagName('person')[0]
    mid = cls.getElementsByTagName('mid')[0]
    url = cls.getElementsByTagName('url')[0]

    print person.attributes['name'].value
    print mid.attributes['name'].value
    print url.attributes['name'].value 
```

正如@Martijn Pieters 所说，看看 ElementTree 作为替代 API。例如：

```
import xml.etree.ElementTree as ET
documents = ET.fromstring(xmlstr)
for cls in documents.iter('class'):
    person = cls.find('person')
    mid = cls.find('mid')
    url = cls.find('url')

    print person.get('name'), mid.get('name'), url.get('name') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:43:35.040

I would use xpath and lxml.html: A minimalist approach:

```
import lxml.html as lh
doc=lh.parse(test.xml)

In [70]: persons = doc.xpath('.//person/@name')

In [71]: urls=doc.xpath('.//person[@name]/following-sibling::url/@name')

In [72]: mids=doc.xpath('.//person[@name]/preceding-sibling::mid/@name')

In [73]: [[p,m,u]for p,m,u in zip(persons, mids, urls)]
Out[73]: 
[['yyyyyyyyyy', 'yyyyyyyyyyyyy', 'yyyyyyyyy'],
 ['xxxxxxxxxx', 'xxxxx', 'xxxxxxxxxxx']] 
```

# r - 根据变量的值生成数据总和

> ID：12857397
> 
> 赞同：1
> 
> 时间：2012-10-12T10:48:26.153
> 
> 标签：r, aggregate

我有类似这样的数据：

```
Hosp    Score   Var1    Var2    Var3
1       0       5       3       0
1       1       10      8       1
1       2       11      8       2
1       3       5       3       2
2       0       6       4       0
2       2       10      6       1
2       3       10      7       2
3       1       4       3       2
etc... 
```

大约有 800 家医院和 4 个等级的因子得分（0、1、2、3）。一些医院没有对特定分数水平的观察

我想生成一个新的数据框，其中变量 Var1、Var2 和 Var3 相加。所以使用上面的数据会给出

```
Hosp    Var1    Var2    Var3
1       32      22      5
2       26      17      3
3       4       3       2 
```

这在 SQL 中将是微不足道的（我猜它也在 R 中！）但到目前为止我发现的唯一方法是使用循环，每次 Hosp 更改时都会添加一个新行，并在变量不变时增加变量（当然数据是在 Hosp 上排序的）。

有没有一种巧妙的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:54:18.500

使用`aggregate()`. 假设您`data.frame`的名称为“temp”，请使用：

```
aggregate(list(Var1 = temp$Var1, Var2 = temp$Var2, Var3 = temp$Var3), 
          list(Hosp = temp$Hosp), sum)
#   Hosp Var1 Var2 Var3
# 1    1   31   22    5
# 2    2   26   17    3
# 3    3    4    3    2 
```

要`slick`做到这一点，请使用以下公式表示法`aggregate()`：

```
aggregate(cbind(Var1, Var2, Var3) ~ Hosp, temp, sum) 
```

但是请注意，使用默认方法和方法`NA`处理值的方式有所不同。`data.frame``formula`

### 更新

您在使用 SQL 的原始问题中提到。我对 SQL 没有太多经验，但也有`sqldf`包，您可以使用它执行以下操作：

```
sqldf("select Hosp, 
      sum(Var1) `Var1`, sum(Var2) `Var2`, sum(Var3) `Var3` 
      from temp 
      group by Hosp")
#   Hosp Var1 Var2 Var3
# 1    1   31   22    5
# 2    2   26   17    3
# 3    3    4    3    2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T05:27:04.480

`data.table`内存、编码和时间效率的解决方案。

鉴于您习惯于使用`SQL`，`data.table`一旦您查看了`data.table`.

```
# assuming your data is in DF
library(data.table)
DT <- data.table(DF)

DT[, lapply(.SD, sum), by = hosp, .SDcols = c('Var1', 'Var2', 'Var3')] 
```

在这种情况下，您可以使用简写`lapply(.SD, FUN)`，设置`.SDcols`为要运行的变量`lapply`。

产生相同结果的更冗长但`SQL`类似的方法是

```
DT[, list(Var1 = sum(Var1), Var2 =sum(Var2), Var3 = sum(Var3)), by = hosp] 
```

但是，当您不需要时，为什么要编写所有这些额外的代码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:43:21.740

[以 mrdwab](https://stackoverflow.com/a/12857499)的解决方案为基础，但提供更短的语法：

```
aggregate(temp[3:5], temp[1], sum) 
```

这使用了数据框是一个列表的事实，因此单括号子集将生成一个包含列子集的数据框。这避免了所有的`list`调用。

* * *

还有另一种选择：

```
library(plyr)
ddply(temp[-2], .(Hosp), colSums, na.rm = TRUE) 
```

这将数据帧拆分为多个块`Hosp`，并以这种方式计算每个此类块的列总和`colSums(chunk, na.rm = TRUE)`。从输入中`[-2]`删除`Score`列，因此您不会得到总和。

唉，正如 mrdwab 在下面的评论中正确指出的那样，上面的内容也将汇总该`Hosp`列。我对这个问题的第一个解决方法如下：

```
ddply(t[-2], .(Hosp), function(d){colSums(d[-1], na.rm = TRUE)}) 
```

这会将`Hosp`列从参数中删除`colSums`，以便它不会覆盖`ddply`默认提供的该名称的原始列。总的来说，不再是一个漂亮的解决方案，也不是一个快速的解决方案。但是由于它确实具有对块进行明确说明的功能，因此非常灵活，因此我将其留作参考。

在另一条评论中，mrdwab 提出了一个更好的解决方案：

```
ddply(temp[-2], .(Hosp), numcolwise(sum)) 
```

这是有效的，因为`numcolwise`基于 的`colwise`内部调用`strip_splits`又删除了那些用于执行拆分的列，即`Hosp`在这种情况下。上一句中的所有函数都来自`plyr`.

# objective-c - 关闭当前视图时将值推送到下一个视图

> ID：12857398
> 
> 赞同：0
> 
> 时间：2012-10-12T10:48:33.847
> 
> 标签：objective-c, nsstring, uitableview

我有一个带有按钮的 UITableViewController，该按钮触发模态翻转水平 segue 动画到另一个 UITableViewController。在“反面”上，我有一个简单的完成按钮，如果按下它会关闭视图。关闭视图时，我想根据 FlipsideViewController 中“test”字符串的值在 MainTableViewController 中设置“test”字符串。我无法使该连接正常工作。在下面发布我的代码：

**MainTableViewController.h**

```
#import <UIKit/UIKit.h>

@interface MainTableViewController : UITableViewController

@property NSString *test;

@end 
```

**MainTableViewController.m**

```
#import "MainTableViewController.h"

@interface MainTableViewController ()

@end

@implementation MainTableViewController

@synthesize test;

-(void)viewDidAppear:(BOOL)animated{

    NSLog(@"%@", test);

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{return 1;}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{return 10;}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"MainCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    return cell;

} 
```

**FlipsideTableViewController.h**

```
#import <UIKit/UIKit.h>

#import "MainTableViewController.h"

@interface FlipsideTableViewController : UITableViewController

- (IBAction)done:(id)sender;

@end 
```

**FlipsideTableViewController.m**

```
#import "FlipsideTableViewController.h"

@interface FlipsideTableViewController ()

@end

@implementation FlipsideTableViewController

- (IBAction)done:(id)sender{

    NSString *test = @"Hello!";
    // Push the test string to MainTableViewController

    [self dismissViewControllerAnimated:YES completion:nil];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{return 1;}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{return 10;}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"FlipsideCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    return cell;

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:52:30.117

使用**委托**向后传递数据

请参阅[simple-delegate-tutorial-for-ios-development](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)链接。

另请参阅[basic-delegate-example](http://coderchrismills.wordpress.com/2011/05/05/basic-delegate-example/)链接。

# asp.net - ASP.NET 报表查看器照片

> ID：12857402
> 
> 赞同：-2
> 
> 时间：2012-10-12T10:48:56.530
> 
> 标签：asp.net, reportviewer

我需要使用 Report Viewer 创建一个报告来显示我的员工列表。对于每个员工，我需要显示个人数据和照片。照片存储在服务器内的磁盘中。此外，照片是使用算法编码的，并且基于员工 ID（整数）。

我已经有了报告，从数据库中获取了所有数据。唯一的问题是显示照片。

这是 ASP.NET c#

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:45:59.053

我认为您需要实现一项服务，该服务将根据某种类型的参数读取并返回照片。

例如[http://mydomain.com/getphoto/100500](http://mydomain.com/getphoto/100500)（其中 100500 是一个 ID）。

所以你只需要在你的输出中添加标签。

您也可以使用现成的 ASP.NET 报告组件。有很多可用的。例如，您可以使用 [SharpShooter Reports](http://www.perpetuumsoft.com/SharpShooter-Reports-Web.aspx)（这是我们的产品，所以我把它放在第一位 :) 和其他报告软件（公平地说），例如[Telerik 报告](http://www.telerik.com/products/reporting.aspx)、组件一的[活动报告](http://www.componentone.com/SuperProducts/ActiveReports/)等。

然而，这些组件的成本很高，所以如果我不需要复杂的报告解决方案，我不会使用它。

# javascript - 选中的选择器在 Opera 和 IE 中无法用于动态生成的单选按钮

> ID：12857403
> 
> 赞同：0
> 
> 时间：2012-10-12T10:48:56.950
> 
> 标签：javascript, jquery

我正在使用 jQuery 将一堆**SELECT**元素转换为**RADIO**按钮。然后，当用户单击特定的**SELECT**选项时
，我想更改特定**RADIO按钮的****CHECKED状态。**为此，我做了一些检查并设置了一些变量。在 Chrome 和 Firefox 中一切正常，但在其他浏览器中则不然。Opera 的控制台告诉我，一旦我将 ":checked" 添加到用于检查用户检查了哪些 RADIO 按钮的变量中，该变量就未定义（因此该函数的其余部分不再起作用）。这是我用于该变量的代码：

 ****```
var bedrukking = $("form#specificatie input:checked[name='staffeldim_5287\\:1192']", window.parent.document).val(); 
```

关于为什么失败的任何想法？顺便说一句，我不能直接操作 DOM，jQuery 是我唯一的选择。

这是更改选中选项的全部代码：

```
// Verander Bedrukking als Papier wordt ingesteld op 90 of 80 grams wit bankpost
$("form#specificatie select#staffeldim_5285\\:1192", window.parent.document).on("change", function(){
    var papier = $(this).val();
    // 90 grams wit bankpost FSC lasergeschilkt is value 27567, 80 grams wit bankpost FSC lasergeschilkt is value 27565
    if (papier == "27567" || papier == "27565") {
        var bedrukking = $("form#specificatie input:checked[name='staffeldim_5287\\:1192']", window.parent.document).val();
        console.log(bedrukking);
        // 1 zijdig full-color is value 27579, 2 zijdig full-color is 27580
        if (bedrukking == "27579" || bedrukking == "27580") {
            // Zet de value van Bedrukking op iets anders en laat hem knipperen om aandacht te trekken
            $("form#specificatie input[name='staffeldim_5287\\:1192']:checked", window.parent.document).removeAttr('checked');
            $("form#specificatie input[name='staffeldim_5287\\:1192'][value='27583']", window.parent.document).attr('checked', 'checked').animate({opacity: 0}, 200, "linear", function() {
                $(this).animate({opacity: 1}, 200);
            });
            // Geef aan dat deze combinatie niet mogelijk is
            $('table.staffels #combinatieControle', window.parent.document).remove(); // Verwijder de waarschuwing indien hij al aanwezig is, voordat we een nieuwe toevoegen
            $("table.staffels", window.parent.document).eq(0).prepend('<tr id="combinatieControle"><td><div style="margin-bottom: 15px; color: red;">Full-color bedrukking kan niet worden gecombineerd met 80 en 90 grams wit papier. (Deze combinatie is wel mogelijk met het artikel "budget briefpapier".) Uw specificaties zijn gewijzigd.</div></td></tr>');
        }
    }
    // Deze combinatie is wel mogelijk, dus verwijder de waarschuwing indien hij aanwezig is
    else {
        $('table.staffels #combinatieControle', window.parent.document).remove();
    }
}); 
```

里面有一些荷兰语的评论，希望你不要介意。这是我用来将 SELECT 元素更改为 RADIO 按钮的代码（从 Stackoverflow 获得）：

```
$('form#specificatie select', window.parent.document).each(function(i, select){
    var $select = $(select);

    // Als er meer dan 10 opties zijn voor de huidige select, converteren we hem niet naar radio buttons
    var nrOptions = $(this).find('option').length;
    if (nrOptions > 10) {
        return
    }

    var counter = 1
    $select.find('option').each(function(j, option){
        var $option = $(option);
        // Create a radio:
        var $radio = $('<input type="radio" />');
        // Set name and value:
        $radio.attr('name', $select.attr('name')).attr('value', $option.val());
        // Set ID:
        $radio.attr('id', $option.val() + '_' + counter );
        // Set checked if the option was selected
        if ($option.attr('selected')) $radio.attr('checked', 'checked');
        // Insert radio before select box:
        $select.before($radio);
        // Insert a label:
        $select.before(
          $("<label />").attr('for', $option.val() + '_' + counter).text($option.text())
        );
        // Insert a <br />:
        $select.before("<br/>");

        counter++;
    });
    $select.remove();
}); 
```

**更新**：我尝试将 jQuery 版本从 1.8.1 更改回 1.7.1：现在除了 Internet Explorer 8 和 9 之外的所有浏览器都可以正常工作。为什么 jQuery 版本会有所不同，我可以尝试什么来解决 IE 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:28:08.330

我看到一个 IE 8 错误，表示未定义 console.log。从代码中删除 console.log 修复了 IE 中的问题，现在它可以在每个浏览器中正确运行。****

# ios - 为什么 sqlite3_prepare_v2 关闭数据库？

> ID：12857404
> 
> 赞同：0
> 
> 时间：2012-10-12T10:49:01.680
> 
> 标签：ios, database, sqlite

在这个数据库中有一个名为“菜单”的表。我想在我的 ViewController 中打印此表，但此方法不起作用并立即关闭数据库。

在 DatabaseMenu.h 中：

```
@interface DatabaseMenu : NSObject {
    sqlite3 *databaseMenu;
    DataBaseMenu *rowMenu;
}

@property (nonatomic, assign) int ID; 
@property (nonatomic, copy)NSString *descrizione;
@property (nonatomic, assign) BOOL haSubMenu;
@property (nonatomic, assign) int IDPadre;
@property (nonatomic, copy) NSString *tabelleFigli;
@property (nonatomic, assign) int ordine;
@property (nonatomic, copy) NSString *custView;
@property (nonatomic, assign) BOOL visMappa;
@property (nonatomic, copy) NSMutableArray *menuArray;

-(NSMutableArray*) loadDataFromMenu;
+(DatabaseMenu*) database;

@end 
```

在 DatabaseMenu.m 中

```
static DatabaseMenu * database;

+(DatabaseMenu*) database{
    if (database==nil) {
        database =[[DatabaseMenu alloc]init];
    }
    return database;
}

-(NSMutableArray*) loadDataFromMenu{ 

    NSString *query = @"SELECT * FROM Menu";

    sqlite3_stmt *statement;

    if (sqlite3_prepare_v2(databaseMenu, [query UTF8String], -1, &statement, nil)
        == SQLITE_OK) {

        while (sqlite3_step(statement) == SQLITE_ROW) {

            //.......

        }
        sqlite3_finalize(statement);

    } else {        
        sqlite3_close(databaseMenu);
    }

    return self.menuArray;  
}

  -(id) init{ //open database
        self =[super init];
        if(self){
        NSString *sqliteDb = [[NSBundle mainBundle]pathForResource:@"China" ofType:@"sqlite"];

         if(sqlite3_open([sqliteDb UTF8String], &databaseMenu)!=SQLITE_OK){

                     NSLog(@"Failed to open database");

            }else {

                     NSLog(@"open the database");

                  [self loadDatiFromMenu];
    }

    return self;
} 
```

}

调试器无法进入 while 循环。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:17:43.457

您在头文件中定义了一个实例变量`database`，但也在`database`您的实现文件中定义了一个静态变量（不是 sqlite3 对象）。

你确定你使用的是正确的对象`loadDataFromMenu`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:15:12.970

您所做的不是从数据库读取数据的正确方法。

初始化后 sqlite3 变量必须先打开数据库，然后必须访问数据库，如下所示

```
if(!sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK)
{
     NSLog(@"An error has occured");
}

const char *sql = "SELECT * FROM Menu";
sqlite3_stmt *sqlStatement;
if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
{
     NSLog(@"Problem with prepare statement.");
}

while(sqlite3_step(sqlStatement) == SQLITE_ROW)
{
    //get all data from 
} 
```

这`dbPath`是 ivar 用于存储指向数据库的整个路径

# c# - XmL 文件，需要写入“通道”元素的末尾

> ID：12857405
> 
> 赞同：2
> 
> 时间：2012-10-12T10:49:11.590
> 
> 标签：c#, xml, rss, itunes, xelement

我正在寻找一个程序来为 iTunes 播客编写一个 rss 文件。我知道你可以买一个，但这是为了经验和非营利组织。这是我的 C# 代码

```
XDocument doc = XDocument.Load(fileLocation);
        XNamespace itunes = "http://www.itunes.com/dtds/podcast-1.0.dtd";

        XElement root = new XElement("item",
        (new XElement("title", textBoxPodcastTitle.Text)),
        (new XElement(itunes + "author", textBoxAuthor.Text)),
        (new XElement(itunes + "subtitle", textBoxSubtitle.Text)),
        (new XElement(itunes + "summary", textBoxSummary.Text)),
        (new XElement("enclosuer",
                    new XAttribute("url", "\"http://www.jubileespanish.org/Podcast/\"" + textBoxFileName.Text + "\"" + " length=\"" + o_currentMp3File.Length.ToString() + "\" type=\"audio/mpeg\""))),
        (new XElement("guid", "http://www.jubileespanish.org/Podcast/" + textBoxFileName.Text)),
        (new XElement("pubDate", o_selectedMP3.currentDate())),
        (new XElement(itunes + "duration", o_selectedMP3.MP3Duration(openFileDialogFileName.FileName.ToString()))),
        (new XElement("keywords", textBoxKeywords.Text)));

        doc.Element("channel").Add(root);
        doc.Save(fileLocation); 
```

一切正常，除非我正在编写我制作的根 XElement。它无法编写它，因为在 iTunes 频道元素中，除了“项目”元素之外还有其他元素。（播客信息的其余部分）。我怎样才能将它附加在通道元素内但就在结束标记之前。这是 xml 文件的外观。谢谢，我是新人，请温柔...

```
<rss xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" version="2.0">
<channel>
     <title>Non Profit company</title>
     <itunes:keywords>keywords</itunes:keywords>
     <itunes:image href="http://www.podcast.org/Podcast/podcastlogo.png" />
     <itunes:explicit>no</itunes:explicit>
     <itunes:block>no</itunes:block>

<item>
  <title>Red, Whine, &amp; Blue</title>
  <itunes:author>Various</itunes:author>
  <itunes:subtitle>Red + Blue != Purple</itunes:subtitle>
  <itunes:summary>This week we talk about surviving in a Red state if you are a Blue person. Or vice versa.</itunes:summary>
  <itunes:image href="http://example.com/podcasts/everything/AllAboutEverything/Episode3.jpg" />
  <enclosure url="http://example.com/podcasts/everything/AllAboutEverythingEpisode1.mp3" length="4989537" type="audio/mpeg" />
  <guid>http://example.com/podcasts/archive/aae20050601.mp3</guid>
  <pubDate>Wed, 1 Jun 2005 19:00:00 GMT</pubDate>
  <itunes:duration>3:59</itunes:duration>
  <itunes:keywords>politics, red, blue, state</itunes:keywords>
</item>

</channel>
</rss> 
```

我想在

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:03:22.907

这应该有效：

```
 doc.Root.Element("channel").Add(root); 
```

Element retrieved by accessing the `Root` property is `rss` and the `Add` method will add the element to the end of the element's content by default.

Other possible ways to do this would be:

```
 doc.Element("rss").Element("channel").Add(root); 
```

or:

```
 var el = doc.Descendants("channel").FirstOrDefault();
        if (el != null)
            el.Add(root); 
```

But the first one (using `Root` property) would be the cleanest.

# c# - 为什么当调制解调器处于数据模式时 System.IO.Ports.SerialPort.DataReceived 事件不会触发？

> ID：12857410
> 
> 赞同：2
> 
> 时间：2012-10-12T10:49:42.633
> 
> 标签：c#, .net, serial-port, modem

目前在我的大学里，我们正在这些旧的 56k 调制解调器之间进行通信。由于从 PC 到调制解调器的消息通过串行端口，我想使用 System.IO.Ports.SerialPort .NET 类。

我编写了相当大的 C# 应用程序来与调制解调器通信，拨号到其他调制解调器并通过它们进行通信。在我设法在两个调制解调器之间建立连接之前，一切都很好。发生这种情况时，两个调制解调器（应该如此）从 COMMAND 模式（我可以将 Hayes 的命令发送到调制解调器）切换到 DATA 模式（我发送到调制解调器的所有数据都被转发到另一个调制解调器）。

我的应用程序可以发送东西到串口，也可以从串口接收东西。它安装在两台连接的 PC 上。但是当我在我的应用程序中输入一些内容时，例如“你好”，另一端没有收到它。奇怪的部分来了。这是我通过串行端口发送消息的方式（'port' 是 SerialPort 类的实例，'data' 是字符串的实例）：

```
port.Write(data); 
```

所以它有效。它必须工作。特别是，因为如果我使用我的应用程序一方面发送，另一方面使用 PuTTy 接收 - 它可以工作！连接到有效串行端口的 PuTTy 收到我的消息。它还暗示，不仅我的信息到达了第一个调制解调器；它通过网络发送到另一个调制解调器，然后另一个调制解调器通过串行端口将它发送到接收PC。但这还不是全部。当我使用我的应用程序接收时，我使用 SerialPort.DataReceived 事件，如下所示（当然方法已被 +=ed 到事件处理程序）：

```
void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    //this message box should pop up if event hit:
    MessageBox.Show("Data from serial port received!");
    //calling my method to handle incoming message
    DataReceived((SerialPort)sender); 
} 
```

当调制解调器（连接到接收 PC 的调制解调器）处于命令模式时，它可以工作。例如，当我向调制解调器发送“AT”Hayes 的命令（这意味着只是一个“ping”）时，调制解调器会响应“OK”，然后我会收到它。SerialPort.DataReceived 事件触发。但是当这个调制解调器处于数据模式时（当我无法向它发送 Hayes 的命令时），它接收到来自发送调制解调器的消息，并将其转发到串行端口 - 什么都没有。事件甚至不会触发。我检查得很好。

有点奇怪！

这只是让我得出结论，调制解调器向串行端口发送消息的方式在 DATA 模式和 COMMAND 模式下略有不同，并且 PuTTy 以某种方式确实理解了另一种方式，而 SerialPort 类则没有。

我真的不明白这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T18:41:07.417

`SerialDataReceivedEventHandler`没有触发，因为没有`Handshake`正确设置。

我不得不使用硬件流控制，它`Handshake.RequestToSend`现在对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T21:24:32.417

您说当调制解调器处于命令模式时 DataReceived 事件不会触发，作为在串行/调制解调器通信方面有个人经验的人，我敢说您在从串行端口收集数据时正在执行一些阻塞操作。

到目前为止，我已经完成了几个使用 SerialPort 类的项目来处理使用 .NET40 的调制解调器通信，并且通信按预期工作。

我最好的猜测是你的方法**DataReceived((SerialPort)sender);** 正在阻止进一步接收数据。

我在收集接收到的数据时避免死锁，从锁中的端口读取数据，但在锁外处理它们并确保处理完成某些事情并完成（不要做任何冗长的事情，否则它会挂起接收），一些喜欢：

```
void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    var com = sender as SerialPort;
    var lst = new List<byte>();

    if (com != null)
    {
        lock (com)
        {
            do
            {
                if (com.BytesToRead == 0) break;
                var one = com.ReadByte();
                if (one >= 0 && one < 256) lst.Add(Convert.ToByte(one));
            } while (one >= 0 && one < 256);

            // lst.ToArray(); // get bytes
        }

        // ... // do something with received data
    }
} 
```

您没有提供有关数据处理的详细信息，所以我只能猜测该代码中有某种块。

在提供的样本中，有两个要点：

1.  独占读取数据，但只有当有数据要读取时，不要等待数据
2.  尽快处理锁外接收到的数据并完成函数执行

此外，提供的代码（以类似的形式）总是在多线程应用程序中使用，因此 Main 上的 [MTAThread] 属性！

解决串行通信问题的最快方法之一可能是从 [http://com0com.sourceforge.net/](http://com0com.sourceforge.net/)安装虚拟串行端口 com0com， 并尝试在没有调制解调器的情况下进行直接通信，以确保数据交换正常工作。

实际上你可以在你的应用程序中使用它。只需安装一对虚拟 com 端口，将您的应用程序连接到一个串行端口，将 putty 连接到另一个，当您在 putty 上看到 ATZ 时，只需回复 OK\r\n :) 但是如果您正在使用引脚读数，那么 putty 不能帮助你，至少我不知道从腻子改变标志的方法。

我知道该线程有点旧，但欢迎提供一些反馈。

快乐编码。

# php - 数组计数、求和和排序一步到位

> ID：12857411
> 
> 赞同：-1
> 
> 时间：2012-10-12T10:49:44.813
> 
> 标签：php, arrays

我有一个表示足球比赛“结果”的数组（**team1** - 由数字表示的名称和**team1_points**表示这支球队从这场比赛中获得的分数（3 表示胜利，1 表示平局，0 表示失败）。

这是代码：

```
 array (size=9)
  0 => 
    array (size=2)
      'team1' => string '2' (length=1)
      'team1_points' => string '0' (length=1)
  1 => 
    array (size=2)
      'team1' => string '2' (length=1)
      'team1_points' => string '0' (length=1)
  2 => 
    array (size=2)
      'team1' => string '2' (length=1)
      'team1_points' => string '0' (length=1)
  3 => 
    array (size=2)
      'team1' => string '14' (length=2)
      'team1_points' => string '0' (length=1)
  4 => 
    array (size=2)
      'team1' => string '14' (length=2)
      'team1_points' => string '3' (length=1)
  5 => 
    array (size=2)
      'team1' => string '1' (length=1)
      'team1_points' => string '3' (length=1)
  6 => 
    array (size=2)
      'team1' => string '13' (length=2)
      'team1_points' => string '1' (length=1)
  7 => 
    array (size=2)
      'team1' => string '5' (length=1)
      'team1_points' => string '1' (length=1)
  8 => 
    array (size=2)
      'team1' => string '7' (length=1)
      'team1_points' => string '0' (length=1) 
```

正如您所看到的，一些**team1**正在重复，例如**'team1' => '2'**有 3 次，而 id="14" 的团队有 2 次**'team1' => '14'**等等。

我需要根据**team1**列对相同的团队进行分组（具有相同 id 的团队，例如 2 或 14 等，并创建一个名为 eg **team_1_occurrences**的新别名列，它将保存数组中该团队的数量以及一个列，例如**team1_total_points**将对所有**team1_points**（3,1 或 0）求和。

然后按 team1_total_points 列 DESC 排序。

所以，最后我需要这样的东西：

```
team1 | team1_occurrences | team1_total_points
----------------------------------------------
14    | 2                 | 3
----------------------------------------------
2     | 3                 | 0 
```

...

我从while循环创建的数组只包含2列**team1**和**team1_points**（结果是我问题开头的var_dump：

```
$matches_array[] = array(
     'team1'=> $team_1_id,
     'team1_points'=> $team1_points
); 
```

我想我需要以某种方式使用 php 函数**array_count_values**并创建一个新列，但我不知道如何。

提前感谢您提供任何解决此问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:02:23.377

你可以试试

```
$array = array(
        0 => array('team1' => '2','team1_points' => '1'),
        1 => array('team1' => '2','team1_points' => '1'),
        2 => array('team1' => '2','team1_points' => '0'),
        3 => array('team1' => '14','team1_points' => '0'),
        4 => array('team1' => '14','team1_points' => '3'),
        5 => array('team1' => '1','team1_points' => '3'),
        6 => array('team1' => '13','team1_points' => '1'),
        7 => array('team1' => '5','team1_points' => '1'),
        8 => array('team1' => '7','team1_points' => '1'));

$list = array();

array_map(function($var){}, $array);
foreach ( $array as $value ) {
    $key = $value['team1'];

    if (array_key_exists($key, $list)) {
        $list[$key]['team1_points'] += $value['team1_points'];
        $list[$key]['team_1_occurrences'] ++;
    } else {
        $list[$key] = $value;
        $list[$key]['team_1_occurrences'] = 1;
    }
}

usort($list ,function($a, $b){ $a = $a['team1_points'] ; $b = $b['team1_points'] ; return ($a == $b) ? 0 : (($a < $b) ? 1 : -1 ) ;});
var_dump($list); 
```

输出

```
array
  0 => 
    array
      'team1' => string '14' (length=2)
      'team1_points' => int 3
      'team_1_occurrences' => int 2
  1 => 
    array
      'team1' => string '1' (length=1)
      'team1_points' => string '3' (length=1)
      'team_1_occurrences' => int 1
  2 => 
    array
      'team1' => string '2' (length=1)
      'team1_points' => int 2
      'team_1_occurrences' => int 3
  3 => 
    array
      'team1' => string '7' (length=1)
      'team1_points' => string '1' (length=1)
      'team_1_occurrences' => int 1
  4 => 
    array
      'team1' => string '13' (length=2)
      'team1_points' => string '1' (length=1)
      'team_1_occurrences' => int 1
  5 => 
    array
      'team1' => string '5' (length=1)
      'team1_points' => string '1' (length=1)
      'team_1_occurrences' => int 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:09:50.260

```
function cmp_by_teampoints($a, $b) {
        return $b["points"] - $a["points"] ;
}

$mr = array(
    array('team1' => '2','team1_points' => '1'),
    array('team1' => '2','team1_points' => '1'),
    array('team1' => '2','team1_points' => '0'),
    array('team1' => '14','team1_points' => '0'),
    array('team1' => '14','team1_points' => '3'),
    array('team1' => '1','team1_points' => '3'),
    array('team1' => '13','team1_points' => '1'),
    array('team1' => '5','team1_points' => '1'),
    array('team1' => '7','team1_points' => '1'));
$s = array();
foreach ($mr as $t => $r) {
    $key = $r['team1'];
    if(!isset($s[$key])) {
        $s[$key]['team']=$key;
        $s[$key]['points']+=$r['team1_points'];
        $s[$key]['occurrence']=1;
    }
    else {
        $s[$key]['points']+=$r['team1_points'];
        $s[$key]['occurrence']++;
    }
}

usort($s, "cmp_by_teampoints"); 
```

# c# - 如何在 Web 服务响应 C# 中使用 Gzip？

> ID：12857416
> 
> 赞同：-3
> 
> 时间：2012-10-12T10:50:21.417
> 
> 标签：c#, javascript, jquery

我正在从 javascript 调用 web 服务，我希望在 gzip 中回复，但目前我的回复不是 gzip。任何人都可以帮助我...

编辑：这是我使用的代码

```
$.ajax({

    type: "POST",
    url: "wsDashboard.asmx/" + 'Banner_GetAll',

    dataType: "json",
    contentType: 'application/json; charset=utf-8',
    success: function (response) {
        response = response.d;
        if (!response.isSucceeded) {
            j.Alert(response.message, "Error");
            return;
        }
        var result = response.result;

        var arrBanner = [];
        for (var index = 0; index < result.length; index++) {
            var newBanner = new Banner(result[index].Id, result[index].BannerName, result[index].Url, result[index].HyperLink);
            arrBanner.push(newBanner);
        }
        if (callback) callback(arrBanner);

    }
}); 
```

我已将 iis 配置为在 gzip 中给出响应 所有其他内容都在进行 Gziped，除了 Web 服务响应我也想压缩它（响应以 json 格式给出）请求标头包含标头接受编码 Gzip

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:53:39.060

您要么在 IIS 级别允许它，要么通过代码检查 GZipStream 类

[http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)

我会去改变IIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:55:17.513

It may be that the client is not stating that is accepts GZip, you need to do this in the Accept-Encoding header, e.g.

Accept-Encoding: gzip, deflate

# php - PHP Codeigniter 多语言站点使用会话变量来存储语言密钥

> ID：12857419
> 
> 赞同：0
> 
> 时间：2012-10-12T10:50:28.043
> 
> 标签：php, codeigniter, multilingual

我目前正在使用 codeigniter 2.1.2 构建一个网站。现在我遇到了有效构建多语言网站的问题。

我已经通读了语言课教程和助手，并存储了两个语言文件夹“中文”和“英文”。

我打算做的是我想要一个名为“lang”的语言会话变量。我想要以下内容：

1.  如果不存在会话变量“lang”，我将创建一个并将其指向“english”
2.  如果会话变量已设置并且用户单击更改语言，则会话变量将从“中文”更改为“英文”或“英文”更改为“中文”。

我对 PHP 和 Codeigniter 还很陌生，我现在能想到的就是以下内容。任何人都可以对我如何有效地允许用户更改我的网站上的语言有所了解吗？

我不知道如何根据用户的点击事件更改会话变量。

```
// Load Language Files 
if(!$this->session->userdata('lang')) {
    $this->session->set_userdata('lang','english');
    $lang = 'english';
} else {
    $lang = 'chinese';
}
$this->lang->load('pages/header',$lang); 
```

我创建了一个语言控制器并设置了会话变量，然后将页面重定向回上一页。这是一个好方法吗？

```
 <?php

Class language Extends CI_Controller {

    function index() {
        if(!$this->session->userdata('lang')) {
            $this->session->set_userdata('lang','english');
        } else {
            $lang = $this->session->userdata('lang');
            if ($lang =="chinese") {
                $this->session->set_userdata('lang','english');
            } elseif ($lang == "english") {
                $this->session->set_userdata('lang','chinese');
            } else {
                $this->session->set_userdata('lang','english');
            }
        }
        header('Location: ' . $_SERVER['HTTP_REFERER']);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T11:03:38.620

做一个语言控制器。[当用户点击语言链接http://www.yoursite.com/language/english](http://www.yoursite.com/language/english)为英语和类似的中文时，将用户引导至相关方法 。我使用了 cookie 而不是会话变量。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Language extends CI_Controller{
    function __construct(){
        parent::__construct();
    }

    public function index(){
        $this->english();
    }

    public function english(){
        $this->lang->load('labels', 'english');
        //$this->session->set_userdata("LANGUAGE","english");
        $cookie = array(
                    'name'   => 'LANGUAGE',
                    'value'  => 'english',
                    'expire' => 604800
                );
        $this->input->set_cookie($cookie);
        header("location: ".$_GET["ref"]);
    }

    public function chinese(){
        $this->lang->load('labels', 'chinese');
        //$this->session->set_userdata("LANGUAGE","chinese");
        $cookie = array(
                    'name'   => 'LANGUAGE',
                    'value'  => 'chinese',
                    'expire' => 604800
                );
        $this->input->set_cookie($cookie);
        header("location: ".$_GET["ref"]);
    }

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T13:11:28.830

使用 CodeIgniter 构建多语言网站的最佳方式是使用 Language 类、钩子和控制器。

如果要使用唯一的控制器，请创建一个语言切换器控制器（LanguageSwitcher）并编写以下代码。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class LanguageSwitcher extends CI_Controller
{
    public function __construct() {
        parent::__construct();
        $this->load->helper('language');
        $siteLang = $this->session->userdata('site_lang');
        if ($siteLang) {
            $this->lang->load('message',$siteLang);
        } else {
            $this->lang->load('message','english');
        }   
    }

    function switchLang($language = "") {

        $language = ($language != "") ? $language : "english";
        $this->session->set_userdata('site_lang', $language);

        redirect($_SERVER['HTTP_REFERER']);

    }
} 
```

完整的多语言教程可以从这里找到 - [CodeIgniter 中的多语言实现](http://www.codexworld.com/multi-language-implementation-in-codeigniter/)

# php - 生成访问代码

> ID：12857423
> 
> 赞同：0
> 
> 时间：2012-10-12T10:50:34.423
> 
> 标签：php, access-token

我想为我正在制作的网站生成访问代码，并使其只能通过该令牌访问。现在，我希望令牌具有特定信息 - 电子邮件地址、时间 +24 小时。我想每小时执行一次 cron 作业以检查是否已达到 24 小时并删除令牌（如果有）。

我想过使用哈希码，但是如何从哈希码中检索信息？php中有这样的函数来解码哈希码吗？因为没找到...

如果没有，生成访问代码的替代算法是什么？

编辑：我将使用 base64_encode()。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:52:10.247

不要将信息存储在令牌中。将信息存储在数据库中。令牌应该是随机生成的（并用作键值）。

（哈希被设计为单向的，你不应该能够解码它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:52:34.970

您无法逆转散列过程。你能做的最好的就是蛮力它几乎不可靠。

您应该创建一个散列字符串并将其与其他信息一起存储在数据库中。然后在您的 cron 脚本中，检查数据库。

# java - 在java中通过反射设置对象字段的值

> ID：12857425
> 
> 赞同：6
> 
> 时间：2012-10-12T10:50:41.320
> 
> 标签：java, reflection

首先，我有一个这样的对象：

```
public class Entity {
    public int data1;
    public String data2;
    public float data3;
    public SubEntity data4;
}

public class SubEntity{
    public int id;
    public SubEntity(int id){
      tis.id = id;
    }
} 
```

还有一个HashMap：

```
 HashMap<String, Object> map = new HashMap<String, Object>();
  map.put("data1", 1);
  map.put("data2", "name");
  map.put("data3", 1.7);
  map.put("data4", new SubEntity(11)); 
```

我需要正确的方法通过使用 hashmap 中的反射来为实体动态的所有字段设置值。像这样的东西：

```
 for (Field f : entity.getClass().getDeclaredFields()) {
       String name = f.getName();
       Object obj = map.get("name");
       // Need set value field base on its name and type. 

} 
```

我怎样才能做到这一点？假设我在实体中有很多子类。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T10:52:37.053

如果您想采用反射路线，那么为什么不使用[Field.set(Object, Object)](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html#set%28java.lang.Object,%20java.lang.Object%29)及其更多类型安全的兄弟姐妹（请参阅文档）

```
f.set(myEntity, obj); 
```

笔记。如果它是私有/受保护的，您可能需要首先[使该字段可访问。](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29)

但是，如果可以的话，我可能会委托给该对象，它可以通过地图填充自己，例如

```
myEntity.populateFromMap(myMap); 
```

并在您的班级内完成艰苦的工作。

# oracle - ORA-00979: 不是 GROUP BY 表达式

> ID：12857427
> 
> 赞同：1
> 
> 时间：2012-10-12T10:50:42.440
> 
> 标签：oracle

我怎么了`group by`？[SQL小提琴](http://sqlfiddle.com/#!4/54916/23)

```
with age_range as (
    select 0 as "bottom", 29 as "top", '<30' as "range" from dual union
    select 30, 34, '30-34' from dual union
    select 35, 39, '35-59' from dual union
    select 40, 49, '40-49' from dual union
    select 50, 54, '50-54' from dual
)
select 
    ar."range" as Age,
    count(case when Department = 'IT' and Gender = 'M' then 1 end) as IT_Male,
    count(case when Department = 'IT' and Gender = 'F' then 1 end) as IT_Female,
    count(case when Department = 'Finance' and Gender = 'M' then 1 end) as Finance_Male,
    count(case when Department = 'Finance' and Gender = 'F' then 1 end) as Finance_Female,
    count(case when Department = 'HR' and Gender = 'M' then 1 end) as HR_Male,
    count(case when Department = 'HR' and Gender = 'F' then 1 end) as HR_Female
from 
    JOB_Details jd
    inner join
    age_range ar on jd.Age between ar."bottom" and ar."top"
group by ar."range"
order by ar."bottom" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T10:59:55.580

如果您愿意，`ORDER BY ar.bottom`则需要将其包含在`GROUP BY`：

```
with age_range as 
(
    select 0 as bottom, 29 as top, '<30' as range from dual union
    select 30, 34, '30-34' from dual union
    select 35, 39, '35-59' from dual union
    select 40, 49, '40-49' from dual union
    select 50, 54, '50-54' from dual
)
select 
    ar.range as Age,
    count(case when Department = 'IT' and Gender = 'M' then 1 end) as IT_Male,
    count(case when Department = 'IT' and Gender = 'F' then 1 end) as IT_Female,
    count(case when Department = 'Finance' and Gender = 'M' then 1 end) as Finance_Male,
    count(case when Department = 'Finance' and Gender = 'F' then 1 end) as Finance_Female,
    count(case when Department = 'HR' and Gender = 'M' then 1 end) as HR_Male,
    count(case when Department = 'HR' and Gender = 'F' then 1 end) as HR_Female
from JOB_Details jd
inner join age_range ar 
  on jd.Age between ar.bottom and ar.top
group by ar.range, ar.bottom
order by ar.bottom 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/54916/69)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:57:29.423

Remove your last:

```
order by ar."bottom" 
```

# windows - 本地网络 URL 重定向

> ID：12857432
> 
> 赞同：1
> 
> 时间：2012-10-12T10:50:45.107
> 
> 标签：windows, webserver, windows-server-2008

您好我最近在运行 Windows Server 2008 的本地 Intranet 上创建了一个服务器。

虚拟服务器正在 Windows 服务器上运行，我知道我可以更改我机器上的主机文件以指向例如 192.168.1.212

但我最理想的做法是让网络（内联网）上的每台计算机都得到与主机文件完全相同的重定向，但不必总是更新每台计算机。

我确定一定有可能我正在查看 IIS 在其中创建网站吗？但我不确定，也不想在不知道自己在做什么的情况下乱搞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:32:23.213

您需要在为您的网络提供 DNS 的任何服务器上创建一个主机 (A) 记录，将所需的主机名解析为该 IP 地址。

# batch-file - 通过网络中的 .bat 文件打开 exe

> ID：12857435
> 
> 赞同：0
> 
> 时间：2012-10-12T10:50:50.037
> 
> 标签：batch-file

我已经厌倦了必须进入多台计算机来运行相同的 exe，我只想通过单击一个按钮来打开所有这些计算机。我已经设法使用 .bat 在计算机之间传递我的文件，并且效果很好。我所追求的只是我将要做的事情是正确的。

到目前为止，我的 bat 文件如下所示：

```
echo off
echo Sending to all Clients
START \\destinationPC\C$\Users\Administrator\Desktop\exefolder\test.exe
pause 
```

我感到困惑的是，如果我运行它；它会简单地在我运行 .bat 文件的计算机上打开所需的 exe，以免我打开多个相同的 exe，还是会在保存 exe 的计算机上打开 exe？它将显示在自己的显示器上的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:54:42.717

它在本地运行程序的副本，但代码从同一位置加载。

当您执行此操作时，您运行命令的计算机上的窗口 - 将查看`\\destinationPC\C$\Users\Administrator\Desktop\exefolder\test.exe`并解析它以确定文件的绝对位置，就像文件在本地计算机上一样。然后它将（如果它具有安全权限）执行正常的程序加载。

在内存中，代码被加载并且执行全部发生在您正在运行 bat 文件的计算机上。

编辑：要远程运行该程序，您可以使用[来自 sysinternals.com 的 PSEXEC等实用程序](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

> PsExec 是一种轻量级 telnet 替代品，可让您在其他系统上执行进程，并与控制台应用程序完全交互，而无需手动安装客户端软件。

# iphone - 除法结果不正确

> ID：12857438
> 
> 赞同：1
> 
> 时间：2012-10-12T10:51:17.527
> 
> 标签：iphone, objective-c, ios

```
CGFloat result=100/126;
NSLog(@"%0.5f",result); 
```

上面代码的输出是 0.00000，但是当我在计算器上检查它时，它的值是 0.79365。问题是什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:53:47.377

问题在于除法的两个操作数都是整数，因此执行整数除法，结果为 0。要获得正确的值，您需要确保至少有一个操作数是浮点数：

```
CGFloat result=100.0f/126; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:56:36.487

May be because your variables are integers. Do this

```
CGFloat result=100.0/126.0;
NSLog(@"%0.5f",result); 
```

# sql - 使用 SQL Server 存储过程构建报表

> ID：12857446
> 
> 赞同：3
> 
> 时间：2012-10-12T10:51:33.647
> 
> 标签：sql, sql-server, stored-procedures, reporting

构建显示来自多个表的数据并且可以按某些字段（例如按日期）搜索的报告的最佳实践是什么？

报告的结构如下：

```
 Today    Yesterday  Last 7 days     All
New Users         0         10        20           1000
Sold Products     11        21        31           25000 
```

我能想到的只是使用存储过程和 OUTPUT 参数构建报告，它工作得很好，但在 SQL Server 端和应用程序中都是一项乏味的工作。我只是不知道这样做的任何其他方式。

也许可以通过使用游标或使用不同的存储过程或其他一些技术来完成。你能引导我找到更好的方法吗？我很感激任何帮助。

这是我目前的方法

```
CREATE PROCEDURE sp_Statistics
    @DateFrom datetime = NULL, 
    @DateTo datetime = NULL,

    @UsersRegisteredToday int = 0 OUTPUT,
    @UsersRegisteredYesterday int = 0 OUTPUT, 
    @UsersRegisteredLastSevenDays int = 0 OUTPUT,
    @UsersRegisteredTotal int = 0 OUTPUT,
    @UsersRegisteredDate int = 0 OUTPUT,

    @SoldProductsToday int = 0 OUTPUT,
    @SoldProductsYesterday int = 0 OUTPUT, 
    @SoldProductsLastSevenDays int = 0 OUTPUT,
    @SoldProductsTotal int = 0 OUTPUT,
    @SoldProductsDate int = 0 OUTPUT
AS
BEGIN

--------------------- REGISTERED USERS -----------------------
IF (@DateFrom IS NOT NULL OR @DateTo IS NOT NULL)
    BEGIN
        SELECT @UsersRegisteredDate = COUNT(*)
        FROM [User] u
        WHERE DATEADD(DAY, DATEDIFF(D, 0, u.Date), 0) BETWEEN @DateFrom AND @DateTo
    END
ELSE IF @DateFrom IS NULL AND @DateTo IS NULL
    BEGIN
        SELECT @UsersRegisteredToday = COUNT(DISTINCT u.idUser)
        FROM [User] u
        LEFT JOIN [Order] e ON u.idUser = e.idUser
        WHERE DATEDIFF(d, GETDATE(), u.Date) = 0

        SELECT @UtilizadoresYesterday = COUNT(DISTINCT u.idUser)
        FROM [User] u
        LEFT JOIN [Order] e ON u.idUser = e.idUser
        WHERE DATEDIFF(d, GETDATE(), u.Date) = -1

        SELECT @UsersRegisteredLastSevenDays = COUNT(DISTINCT u.idUser)
        FROM [User] u
        LEFT JOIN [Order] e ON u.idUser = e.idUser
        WHERE DATEDIFF(d, GETDATE(), u.Date) >= -7

        SELECT @UsersRegisteredTotal = COUNT(DISTINCT u.idUser)
        FROM [User] u
        LEFT JOIN [Order] e ON u.idUser = e.idUser
    END

--------------------- SOLD PRODUCTS --------------------------
IF (@DateFrom IS NOT NULL OR @DateTo IS NOT NULL)
    BEGIN
        SELECT @SoldProductsDate = COUNT(*)
        FROM [Order] e
        WHERE e.idPaymentState = 2
              AND
              DATEADD(DAY, DATEDIFF(D, 0, e.Date), 0) BETWEEN @DateFrom AND @DateTo
    END
ELSE IF @DateFrom IS NULL AND @DateTo IS NULL
    BEGIN

        SELECT @SoldProductsToday = COUNT(*) 
        FROM [Order] e 
        LEFT JOIN [User] u ON e.idUser = u.idUser
        WHERE e.idPaymentState = 2 AND DATEDIFF(d, GETDATE(), e.Date) = 0

        SELECT @SoldProductsYesterday = COUNT(*)
        FROM [Order] e
        LEFT JOIN [User] u ON e.idUser = u.idUser
        WHERE e.idPaymentState = 2 AND DATEDIFF(d, GETDATE(), e.Date) = -1

        SELECT @SoldProductsLastSevenDays = COUNT(*)
        FROM [Order] e
        LEFT JOIN [User] u ON e.idUser = u.idUser
        WHERE e.idPaymentState = 2 AND DATEDIFF(d, GETDATE(), e.Date) >= -7

        SELECT @SoldProductsTotal = COUNT(*)
        FROM [Order] e
        LEFT JOIN [User] u ON e.idUser = u.idUser
        WHERE e.idPaymentState = 2
    END
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:09:12.890

您是否考虑过使用 SSRS？SQL Reporting Services，它与 SQL 捆绑在一起。我在这里叫错树了吗？

我会考虑使用它来创建报告，因为它是一个报告工具

你只需用一些参数写你的数据'SELECT'

例如

```
SELECT SomeValue, SomeOtherValue FROM SomeTable WHERE SomeValue = @SomeParameter 
```

参数是可配置的等...您以前没有听说过/见过/使用过它吗？

例如，这是我们的一份报告——写这份报告只需要一个小时……

![我们的一份报告](../Images/214e79a971ea2e82ac3be2ac1353fc72.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T11:12:51.743

我不会使用输出参数，而是在 sp 中创建一个临时表并将数据插入其中，然后一旦所有数据都在那里，就对其进行选择。

如果您在应用程序中使用网格或 Charleh 建议使用 SSRS 的更好选择，那么创建报告本身应该相当容易。然后，您可以将 SSRS 报告查看器嵌入到您的应用程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:23:35.403

最好使用[表值 UDF](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)

```
CREATE FUNCTION fn_Statistics
(
    @DateFrom datetime = NULL, 
    @DateTo datetime = NULL
)
RETURNS @Report TABLE(
    Today int,
    Yesterday,
    LastSevenDays,
    Total int,
    [Date] int)
AS    
BEGIN
--------------------- REGISTERED USERS -----------------------
IF (@DateFrom IS NOT NULL OR @DateTo IS NOT NULL)
    BEGIN
        INSERT @Report
        SELECT 0,0,0,0,COUNT(*)
        FROM [User] u
        WHERE DATEADD(DAY, DATEDIFF(D, 0, u.Date), 0) BETWEEN @DateFrom AND @DateTo;
--------------------- SOLD PRODUCTS --------------------------        
        INSERT @Report
        SELECT 0,0,0,0,COUNT(*)
        FROM [Order] e
        WHERE e.idPaymentState = 2
              AND
              DATEADD(DAY, DATEDIFF(D, 0, e.Date), 0) BETWEEN @DateFrom AND @DateTo;

    END
    ELSE IF @DateFrom IS NULL AND @DateTo IS NULL
    BEGIN
        DECLARE @UsersRegisteredToday int,
                @UsersRegisteredYesterday int,
                @UsersRegisteredLastSevenDays int,
                @UsersRegisteredTotal int;

        SELECT @UsersRegisteredToday = COUNT(DISTINCT u.idUser)
        FROM [User] u
        LEFT JOIN [Order] e ON u.idUser = e.idUser
        WHERE DATEDIFF(d, GETDATE(), u.Date) = 0

        SELECT @UtilizadoresYesterday = COUNT(DISTINCT u.idUser)
        FROM [User] u
        LEFT JOIN [Order] e ON u.idUser = e.idUser
        WHERE DATEDIFF(d, GETDATE(), u.Date) = -1

        SELECT @UsersRegisteredLastSevenDays = COUNT(DISTINCT u.idUser)
        FROM [User] u
        LEFT JOIN [Order] e ON u.idUser = e.idUser
        WHERE DATEDIFF(d, GETDATE(), u.Date) >= -7

        SELECT @UsersRegisteredTotal = COUNT(DISTINCT u.idUser)
        FROM [User] u
        LEFT JOIN [Order] e ON u.idUser = e.idUser

        INSERT @Report VALUES(@UsersRegisteredToday,
                              @UsersRegisteredYesterday,
                              @UsersRegisteredLastSevenDays,
                              @UsersRegisteredTotal,
                              0);
        --------------------- SOLD PRODUCTS --------------------------

        DECLARE @SoldProductsToday int,
                @SoldProductsYesterday int,
                @SoldProductsLastSevenDays int,
                @SoldProductsTotal int;

        SELECT @SoldProductsToday = COUNT(*) 
        FROM [Order] e 
        LEFT JOIN [User] u ON e.idUser = u.idUser
        WHERE e.idPaymentState = 2 AND DATEDIFF(d, GETDATE(), e.Date) = 0

        SELECT @SoldProductsYesterday = COUNT(*)
        FROM [Order] e
        LEFT JOIN [User] u ON e.idUser = u.idUser
        WHERE e.idPaymentState = 2 AND DATEDIFF(d, GETDATE(), e.Date) = -1

        SELECT @SoldProductsLastSevenDays = COUNT(*)
        FROM [Order] e
        LEFT JOIN [User] u ON e.idUser = u.idUser
        WHERE e.idPaymentState = 2 AND DATEDIFF(d, GETDATE(), e.Date) >= -7

        SELECT @SoldProductsTotal = COUNT(*)
        FROM [Order] e
        LEFT JOIN [User] u ON e.idUser = u.idUser
        WHERE e.idPaymentState = 2

        INSERT @Report VALUES(@SoldProductsToday,
                              @SoldProductsYesterday,
                              @SoldProductsLastSevenDays,
                              @SoldProductsTotal,
                              0);
    END
    RETURN
 END 
```

# asp.net - 用于上传大文件大小的测试图像

> ID：12857447
> 
> 赞同：0
> 
> 时间：2012-10-12T10:51:41.713
> 
> 标签：asp.net, asp.net-mvc, file, jpeg, filesize

我有一个 ASP.NET MVC 页面站点，需要对图像文件进行文件上传大小验证。我允许上传 jpeg、jpg、bmp、png 和 gif 文件，我可以通过上传表单检查它们的扩展名。我需要的是图像文件（任何扩展名）来验证文件大小。

我需要制作一个文件大小超过 40kb 的 jpeg 文件。

任何帮助，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:19:15.923

假设您`imageFile`是`HttpPostedFileBase`or的一个实例`HttpPostedFile`，您可以使用该`ContentLength`属性来确定大小

```
 int KBSize = (imageFile.ContentLength / 1024);  //size in KiloBytes
  if(KBSize > 40)
  {
  }
  else
  {

  } 
```

希望有帮助

# css - 具有浮动 div 和合并列的 CSS3 列数

> ID：12857449
> 
> 赞同：1
> 
> 时间：2012-10-12T10:51:43.723
> 
> 标签：css, html, merge, floating

我试图达到这样的效果：

[http://i.imgur.com/GkcjX.jpg](http://i.imgur.com/GkcjX.jpg)

如您所见，有六列（对我来说 4 就足够了）。有一些浮动 div 和图像跨越 4 列。使用以下代码，在 Chromium (Chrome) 中插入的 div 的宽度被限制为列的宽度。

[http://i.imgur.com/hK4Nk.png](http://i.imgur.com/hK4Nk.png)

```
<div style="column-count: 4; -moz-column-count:4; -webkit-column-count:4; text-align: justify">
    <p>Header</p><hr />
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero. Proin vitae magna vitae leo auctor consectetur. Pellentesque tempor pretium leo at volutpat. Nunc ultricies, est id ultrices pulvinar, nisl nunc porttitor nisi, aliquet pulvinar dolor neque sed lacus. Integer a risus quis nunc rutrum pellentesque. Praesent non ligula massa, nec gravida mauris. Quisque vitae libero nec augue sollicitudin gravida. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum porttitor, tortor ultricies lacinia gravida, nibh purus ultrices lacus, sed tempus augue ligula ac tortor. Proin urna tortor, tempus quis commodo id, eleifend ut augue. Nulla sit amet dolor tellus. Maecenas et pharetra tellus. Vivamus auctor odio id est imperdiet in tincidunt felis gravida. Vestibulum ultricies mauris ut dolor vulputate lacinia. In imperdiet urna a neque sollicitudin dictum sit amet ut tortor. Duis commodo volutpat mauris, quis euismod magna mattis non. Duis dapibus, felis eu bibendum ultricies, erat urna accumsan sapien, eu congue magna neque in massa. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nulla nec pretium sem. Proin aliquet nisl at orci cursus auctor. Praesent lacus quam, aliquet at vestibulum nec, euismod sit amet dui. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam fringilla tincidunt tincidunt. Integer tincidunt vehicula cursus. Quisque sed est auctor arcu ultricies iaculis eget id justo. Sed suscipit tellus et purus dignissim tristique. Ut non purus arcu, sed imperdiet odio. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
        Mauris in magna orci. 

        <div style="float: left; width: 700px; height: 200px; background-color: gray">
            ff

        </div>
        Etiam leo lectus, accumsan at imperdiet sit amet, tincidunt ac tortor. Aenean tellus est, condimentum vitae scelerisque tempus, cursus et nisi. Vivamus ligula lacus, viverra id sodales quis, tempus in lectus. In ut ipsum libero. Aenean vitae orci ligula, non ultricies mauris. Donec metus dolor, feugiat ut blandit vitae, lobortis nec erat. Praesent sapien diam, egestas sit amet commodo a, varius at nulla. Vestibulum fermentum auctor porttitor. Vivamus tristique enim bibendum nulla consectetur molestie. Vivamus lacus velit, dignissim at iaculis id, sodales volutpat odio. Sed mollis consectetur aliquam. Cras rhoncus, nulla non congue porttitor, sapien ipsum lacinia ipsum, pharetra tincidunt arcu ligula id justo. Praesent nec enim tellus, eu aliquam orci.Integer lacinia accumsan nisl at tristique. Sed eget aliquam ipsum. In et magna ut erat posuere ultrices rutrum eget nulla. Nullam mauris nibh, sollicitudin eu aliquet sit amet, pulvinar sit amet tortor. Nunc at nulla sed urna pretium tristique eget quis massa. Quisque ultricies sagittis orci, sed dignissim ante egestas varius. Vivamus et ipsum libero, sagittis euismod enim. Donec volutpat feugiat orci, ut pellentesque nulla sodales gravida. Nulla egestas cursus pharetra. Praesent varius nibh vitae ligula auctor at sollicitudin lacus dapibus. Donec condimentum porttitor sem ac auctor. Mauris a nunc sit amet eros ornare accumsan. Nullam mauris purus, vestibulum id imperdiet sit amet, imperdiet id ante. Nullam nibh leo, pharetra eget fringilla nec, lobortis quis mauris. Fusce varius nulla non orci dapibus ut convallis dolor dictu
        Duis bibendum, dui sit amet sagittis scelerisque, lectus eros luctus dui, a rhoncus justo nisl sed lectus. Proin placerat suscipit lectus id malesuada. Vestibulum vitae nisl et orci fermentum facilisis. Pellentesque malesuada lacinia tristique. Mauris posuere lorem vitae dolor imperdiet porttitor. Maecenas eu tortor sem. Donec non eros dolor, sed interdum magna. Vivamus id commodo urna. Curabitur dapibus bibendum tincidunt. Praesent tincidunt consectetur metus, ut placerat sem volutpat interdum. Praesent sit amet posuere ipsum. Nunc posuere dolor quis erat pulvinar vitae ornare nibh ultricies. Vestibulum molestie porttitor mauris sed viverra. Nunc rutrum rhoncus lacus ac tincidunt. Nam at arcu ut erat pharetra porttitor. Fusce accumsan dui eget diam placerat vel sodales nisl feugiat.In consectetur orci eu velit porta non tristique velit faucibus. Etiam ac pellentesque sapien. Cras bibendum lorem in felis commodo nec pellentesque mauris fringilla. Maecenas magna augue, facilisis eu dignissim nec, interdum et enim. Pellentesque auctor sapien eu augue volutpat sit amet pretium ipsum vehicula. Aliquam erat volutpat. Nam ut leo eros. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Etiam tortor dolor, molestie at vestibulum nec, dignissim ut est. Donec iaculis vulputate purus et mattis. Morbi pulvinar accumsan mollis. Nulla a est lacus. Ut nisl enim, accumsan ut accumsan et, ultricies sit amet nulla. Nunc lacus purus, cursus et vulputate eget, pharetra id sem.
        Mauris in magna orci. Etiam leo lectus, accumsan at imperdiet sit amet, tincidunt ac tortor. Aenean tellus est, condimentum vitae scelerisque tempus, cursus et nisi. Vivamus ligula lacus, viverra id sodales quis, tempus in lectus. In ut ipsum libero. Aenean vitae orci ligula, non ultricies mauris. Donec metus dolor, feugiat ut blandit vitae, lobortis nec erat. Praesent sapien diam, egestas sit amet commodo a, varius at nulla. Vestibulum fermentum auctor porttitor. Vivamus tristique enim bibendum nulla consectetur molestie. Vivamus lacus velit, dignissim at iaculis id, sodales volutpat odio. Sed mollis consectetur aliquam. Cras rhoncus, nulla non congue porttitor, sapien ipsum lacinia ipsum, pharetra tincidunt arcu ligula id justo. Praesent nec enim tellus, eu aliquam orci.Integer lacinia accumsan nisl at tristique. Sed eget aliquam ipsum. In et magna ut erat posuere ultrices rutrum eget nulla. Nullam mauris nibh, sollicitudin eu aliquet sit amet, pulvinar sit amet tortor. Nunc at nulla sed urna pretium tristique eget quis massa. Quisque ultricies sagittis orci, sed dignissim ante egestas varius. Vivamus et ipsum libero, sagittis euismod enim. Donec volutpat feugiat orci, ut pellentesque nulla sodales gravida. Nulla egestas cursus pharetra. Praesent varius nibh vitae ligula auctor at sollicitudin lacus dapibus. Donec condimentum porttitor sem ac auctor. Mauris a nunc sit amet eros ornare accumsan. Nullam mauris purus, vestibulum id imperdiet sit amet, imperdiet id ante. Nullam nibh leo, pharetra eget fringilla nec, lobortis quis mauris. Fusce varius nulla non orci dapibus ut convallis dolor dict
    </p>                
</div> 
```

火狐上的效果也坏了。

[http://i.imgur.com/80B9k.png](http://i.imgur.com/80B9k.png)

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:13:03.293

[CSS3 多列布局模块](http://www.w3.org/TR/css3-multicol)提供了[column-span](http://www.w3.org/TR/css3-multicol/#column-span)属性，它“使一个元素可以跨越多个列”。
不幸的是，此属性只能假定值“all”或“none”（例如，如果您使用 4 列布局，则不能仅将元素跨越 2 列）并且不能应用于浮动或绝对定位的元素。
在[以前版本](http://www.w3.org/TR/2001/WD-css3-multicol-20010118/)的 W3C 规范中，`column-span`property 也可以假设一个整数值（以准确指定元素跨越多少列），但这个选项在 W3C 规范的最新版本中不存在；旧规范还提供了对列之间浮动元素的支持，但此功能也已从最新规范中删除。
在网上你可以找到一些关于 CSS3 多列布局模块的教程；在我看来，最好的[一个是这个](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/an-introduction-to-the-css3-multiple-column-layout-module/)，即使有点旧（2011 年 11 月），它也包含一些有用的示例和进一步的参考。
请注意，并非所有浏览器都支持 CSS3 多列模块（有关详细信息，请参阅[此页面](http://caniuse.com/multicolumn)），因此如果您正在寻找跨浏览器解决方案，这可能不是最佳选择。
也就是说，我试图通过使用一些浮动 div 来达到您想要的结果：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
        #leftblock { 
            width: 66%;
            margin-right: 10px;
            float: left;
        }
        #rightblock { 
            width: 32%;
            float: left;
        }
        .lefttext { 
            column-count: 2; 
            -moz-column-count: 2; 
            -webkit-column-count: 2; 
            text-align: justify;
        }
        #righttext {
            column-count: 2; 
            -moz-column-count: 2; 
            -webkit-column-count: 2; 
            text-align: justify;
        }
        #image1 {
            width: 100%;
            height: 200px;
            background-color: red;
            margin-bottom: 20px;
        }
        #image2 {
            width: 100%;
            height: 100px;
            background-color: green;
        }
        h3 {
            color: blue;
        }
        h4 {
            padding: 0;
            margin: 0;
        }
        p {
            margin-top: 0;
            padding-top: 0;
            margin-bottom: 20px;
        }
        .column1 {
            float: left; 
            width: 50%;
        }
        .column2 {
            float: right; 
            width: 49%;
        }
        </style>
    </head>
    <body>
        <div id="leftblock">
            <div id="image1"></div>
            <div>
                <div class="column1">
                    <div>
                        <p><b>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.</b></p>
                        <h3>Author</h3>
                        <hr>
                    </div>
                    <div class="lefttext">
                        <h4>Title</h4>
                        <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        </p>                
                        <h4>Title</h4>
                        <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        </p>                
                    </div>
                </div>
                <div class="column2">
                    <div class="lefttext">
                        <h4>Title</h4>
                        <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        </p>                
                        <h4>Title</h4>
                        <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        </p>                
                        <h4>Title</h4>
                        <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                        </p>                
                    </div>
                </div>
            </div>
        </div>
        <div id="rightblock">
            <div id="righttext">
                <h4>Title</h4>
                <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                </p>                
                <h4>Title</h4>
                <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                </p>                
                <h4>Title</h4>
                <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                </p>                
                <h4>Title</h4>
                <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eget mi a odio dapibus ornare. Phasellus magna lacus, pharetra scelerisque accumsan nec, feugiat ac libero.
                </p>                
            </div>
            <div id="image2"></div>
        </div>            
    </body>
</html> 
```

此解决方案的主要缺点是您必须仔细“平衡”每个 div 中文本的长度以获得相同（或几乎相同）的高度。
我已经在 Chromium、Opera 和 Firefox 上测试过这个页面；因为我在 Linux 上工作，所以我不能说它是否也可以在 Internet Explorer 上工作（它可能不会）。
我知道这可能根本不是最好的解决方案，但我希望它可以成为进一步试验的起点。

# c# - 将命令传递给其他类

> ID：12857451
> 
> 赞同：0
> 
> 时间：2012-10-12T10:52:02.650
> 
> 标签：c#, wpf, mvvm

我刚开始使用 WPF，并尝试以 MVVM 方式做事（在[这篇](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)精彩的文章之后）。

我有一个所有视图模型都需要与之交互的中央管理器类。我使用单例实现了这个，所以我有我的单例类：

```
public class FakeManager
    {

        private FakeManager() {}

        static FakeManager instance;
        public static FakeManager Instance
        {
            get { return instance ?? (instance = new FakeManager()); }
        }

        ...
    } 
```

在我的视图模型中，我像这样与之交互：

```
public ICommand TriggerChannelChange
{
    get
    {
        return new RelayCommand(() => FakeManager.Instance.SetupChangeRequest(_hardwareItem), () => true);
    }
} 
```

我的问题是 - 有没有更好的方法？我知道 WPF 中通常用于在 ViewModel 之间发送消息的事件调解器模式，这在这里会更好吗？我想我所做的事情的问题是我与 FakeManager 紧密耦合，而且感觉有点笨拙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:56:36.037

首先，我同意 blinmeis 的观点，即在属性 getter 中创建新命令违反了属性 getter 的一般期望，包括：

*   它们非常轻巧
*   他们返回相同的对象，除非它被替换（可能通过设置器）

但这是一个旁白，所以我不会努力。

至于您的问题，我建议您研究一种服务模式，即您为服务定义一个接口，然后您的视图模型依赖于该服务。他们获得服务的方式多种多样。您可能想从[服务定位器模式](http://en.wikipedia.org/wiki/Service_locator_pattern)开始，或者研究[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)或[MEF](http://mef.codeplex.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:37:44.923

您已经提到的发布/订阅者模式将是我在这里的首选方法。Prism 与`EventAggregator`.

像这样设置它的好处是，除了代码解耦之外，您可以以更清晰的方式推理您的问题域。您可以将您的视图模型作为独立的“岛屿”，通过系统发送定义明确的（以领域语言）消息。视图模型不必知道其他部分如何作用于它们。这些消息在概念上是系统的一个组成部分，值得这样建模。它还简化了测试并大大简化了引入新功能和修复与这些消息交互的错误的任务。

# android - 如何在 Android 中设置 ActionaBar Tab 文本的样式？

> ID：12857459
> 
> 赞同：7
> 
> 时间：2012-10-12T10:52:11.667
> 
> 标签：android, android-actionbar, actionbarsherlock, android-theme

我正在使用 ActionBarShrelock 为预蜂窝设备提供操作栏。我的主题.xml 文件中有以下代码...

```
 <style name="My.Tab.Style" parent="@android:style/Widget.TabWidget">
        <item name="android:textAppearance">@style/MyCustomTabTextStyle</item>
    </style>

   <style name="MyCustomTabTextStyle" parent="Widget.Sherlock.ActionBar.TabText">
        <item name="android:textAppearance">@android:style/TextAppearance.Medium</item>
        <item name="android:textSize">14sp</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textColor">@color/tabbar_text_color</item>
    </style> 
```

比我用它作为

```
<item name="android:actionBarTabTextStyle">@style/My.Tab.Style</item>
<item name="actionBarTabTextStyle">@style/My.Tab.Style</item> 
```

谁能解释为什么我在 Tab 的最后一个字母上有一些阴影？我怎样才能摆脱它？请帮助..我已经尝试了一切，但那个影子总是在那里..

![在此处输入图像描述](../Images/7beef7efccf848ff251f7d1d97a940ed.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T07:04:00.380

我使用自定义样式解决了这个问题。

1.  首先我创建了一个自定义样式

    ```
    <style name="My.TabText.Style" parent="@style/Widget.Sherlock.ActionBar.TabText">       
        <item name="android:textAppearance">@android:style/TextAppearance.Medium</item>
        <item name="android:textSize">16sp</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textColor">@color/tabbar_text_color</item>
        <item name="android:textAllCaps">false</item>
        <!-- <item name="android:ellipsize">none</item> --> 
        <item name="android:maxLines">1</item>
    </style> 
    ```

2.  比我在我的主题中使用的那种风格

    ```
    <item name="actionBarTabTextStyle">@style/My.TabText.Style</item>
    <item name="android:actionBarTabTextStyle">@style/My.TabText.Style</item> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:59:07.653

据我所知，ActionBar Shelock 使用与普通操作栏相同的内容。基于这个假设：

之前的回答我给了 [ActionBar 文字颜色](https://stackoverflow.com/questions/5861661/actionbar-text-color/9219891#9219891)

和一个生成器[http://jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-21T01:10:17.190

在文件夹值中添加

```
<item name="actionBarTabTextStyle">@style/My.TabText.Style</item> 
```

在文件夹值-v14

```
<item name="android:actionBarTabTextStyle">@style/My.TabText.Style</item> 
```

# javascript - 使用 Django 进行下划线/主干模板

> ID：12857461
> 
> 赞同：1
> 
> 时间：2012-10-12T10:52:19.993
> 
> 标签：javascript, django, templates, backbone.js, underscore.js

在定义我的 javascript 模板时

```
<script type="text/template">
</script> 
```

它们不会在我的 Django 应用程序中以 html 呈现（我的意思是，我在页面中看不到它们）。也许我声明的过滤器/中间件之一是选择退出？

这是从`settings.py`

```
COMPRESS_PRECOMPILERS = (
    ('text/less', 'lessc {infile} {outfile}'),
)
if DEBUG:
    COMPRESS_REBUILD_TIMEOUT = 1

TEMPLATE_CONTEXT_PROCESSORS = (
     "django.core.context_processors.request",
     "django.contrib.auth.context_processors.auth",
     "django.core.context_processors.debug",
     "django.core.context_processors.i18n",
     "django.core.context_processors.media",
     "django.core.context_processors.static",
     "django.core.context_processors.tz",
     "django.contrib.messages.context_processors.messages",
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.middleware.transaction.TransactionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'debug_toolbar.middleware.DebugToolbarMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
) 
```

如果是这样，如何解决这个问题？

**编辑** 模板：

```
<script type="text/template" id="new-catalog-template">

    <div class="catalog" data-id="<%= responseJSON.catalog.id %>" style="display: none">
        <div class="catalog-main-content">
            <div class="preview"><img src="<%= responseJSON.user_dir %>/catalogs/<%= responseJSON.catalog.id %>/ipad-preview-icon-large.png" alt="" /></div>
            <div class="name"><%= responseJSON.catalog.name %></div>
            <div class="last-build"><em>Last build:</em><%= responseJSON.catalog.last_build_natural %> (<%= responseJSON.catalog.last_build %>)</div>
            <div class="description"><%= responseJSON.catalog.description %></div>
        </div>
    </div>

</script> 
```

** 编辑 编辑 **

我的错，脚本标签在主块之外，因此没有呈现 ¬_¬ ...谢谢你让我知道`{{ verbatim }}`，顺便说一句

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:08:40.100

我可以看看那个模板吗？

如果没有 - 也许您可以使用[escapejs-Filter](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#escapejs)或更好的新[逐字](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#verbatim)标记。

# ios - phoneGap (Cordova) 如何在内部工作，特定于 iOS

> ID：12857462
> 
> 赞同：12
> 
> 时间：2012-10-12T10:52:21.387
> 
> 标签：ios, cordova, cordova-2.0.0

我已经开始为多个平台开发 html 应用程序。我最近听说了 Cordova 2.0（PhoneGap），从那以后我就很想知道这个桥是如何工作的。经过大量代码遍历，我看到 Exec.js 是发生来自 JS -> Native 调用的代码

```
execXhr = execXhr || new XMLHttpRequest();
        // Changeing this to a GET will make the XHR reach the URIProtocol on 4.2.
        // For some reason it still doesn't work though...
        execXhr.open('HEAD', "file:///!gap_exec", true);
        execXhr.setRequestHeader('vc', cordova.iOSVCAddr);
        if (shouldBundleCommandJson()) {
            execXhr.setRequestHeader('cmds', nativecomm());
        }
        execXhr.send(null);
    } else {
        execIframe = execIframe || createExecIframe();
        execIframe.src = "gap://ready"; 
```

但是想了解它是如何工作的，这里的概念是什么，file:///!gap_exec 或 gap://ready 是做什么的？以及调用如何传播到较低层（本机代码层）

提前感谢一堆。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T21:52:14.677

诀窍很简单：

有一个网页视图。这将显示您的应用程序。webview 将处理所有导航事件。

如果浏览器导航到：

```
file:///!gap_exec 
```

或者

```
gap:// 
```

webview 将取消导航。这些字符串后面的所有内容都被重新用作标识符，以获取具体的插件/插件方法和参数：

伪网址示例：

```
gap://echoplugin/echothistext?Hello World 
```

这将导致 phonegap 查找`echoplugin`并调用该`echothistext`方法以将文本发送`"Hello World"`到（本机）插件。

**更新**

从本机返回到 javascript 的方法是（或可能是）将`javascript:`url 加载到 webview 中。

具体实现稍微复杂一些，因为 javascript 必须向本机代码发送回调 ID。可能有多个本地调用同时运行。但事实上，这根本不是魔法。只需一个数字即可将正确的 JSON 传递给正确的 javascript-callback。

平台和javascript之间有不同的通信方式。对于 Android，有三到四种不同的网桥。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T11:38:35.017

我也试图更详细地解决这个问题。基本上iOS端有2种方法可以帮助......

*   [- webView:shouldStartLoadWithRequest:navigationType:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)和
*   [- stringByEvaluatingJavaScriptFromString：脚本](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

从消息来源看来，cordova 使用 webView:shouldStartLoadWithRequest:... 发送了一条“READY”消息，然后使用第二条消息获取结果，但我不确定。

[Cordova 源 iOSExec](https://git-wip-us.apache.org/repos/asf?p=cordova-js.git;a=blob;f=lib/ios/exec.js;h=1c2c1f2cf7819ea9ae6cb576ba78699f2a99e7cf;hb=24d65ab645742e8360c3dd16d7a36411cc3383e0)

那里有很多东西要学。

# java - 使用 Apache POI 如何读取特定的 excel 列

> ID：12857469
> 
> 赞同：20
> 
> 时间：2012-10-12T10:52:37.647
> 
> 标签：java, excel, apache-poi

我在使用 Apache POI 时遇到了 Excel 问题。我可以跨行阅读，但有时我只想阅读特定列。

那么是否可以读取任何特定列，例如仅“A”列或仅“C”列。

为此，我使用**Java**语言。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-12T11:21:57.217

heikkim 是对的，这里有一些示例代码改编自我的一些代码：

```
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Row;
...
for (int rowIndex = 0; rowIndex <= sheet.getLastRowNum(); rowIndex++) {
  row = sheet.getRow(rowIndex);
  if (row != null) {
    Cell cell = row.getCell(colIndex);
    if (cell != null) {
      // Found column and there is value in the cell.
      cellValueMaybeNull = cell.getStringCellValue();
      // Do something with the cellValueMaybeNull here ...
      // break; ???
    }
  }
} 
```

对于`colCount`使用类似`row.getPhysicalNumberOfCells()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-14T11:49:18.283

```
 Sheet sheet  = workBook.getSheetAt(0); // Get Your Sheet.

  for (Row row : sheet) { // For each Row.
      Cell cell = row.getCell(0); // Get the Cell at the Index / Column you want.
  } 
```

我的解决方案，更简单的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-16T17:29:36.260

好的，从您的问题来看，您只是想阅读特定的专栏。因此，在遍历一行然后遍历其单元格时，您可以简单地检查列的索引。

```
Iterator<Row> rowIterator = mySheet.iterator(); // Traversing over each row of XLSX file
        while (rowIterator.hasNext()) {
            Row row = rowIterator.next(); // For each row, iterate through each columns
            Iterator<Cell> cellIterator = row.cellIterator();
            while (cellIterator.hasNext()) {
                Cell cell = cellIterator.next();
                println "column index"+cell.getColumnIndex()//You will have your columns fixed in Excel file
                if(cell.getColumnIndex()==3)//for example of c
                {
                print "done"            
                }
          }
     } 
```

我正在使用 POI 3.12-- 'org.apache.poi:poi:3.12' 希望对您有所帮助。干杯!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T10:56:09.477

您可以循环行并从每一行读取相同的单元格（这不包括一列吗？）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-13T10:59:03.657

```
import java.io.*;

import org.apache.poi.hssf.util.CellReference;
import org.apache.poi.ss.usermodel.*;
import java.text.*;

public class XSLXReader {
    static DecimalFormat df = new DecimalFormat("#####0");

    public static void main(String[] args) {
        FileWriter fostream;
        PrintWriter out = null;
        String strOutputPath = "H:\\BLR_Team\\Kavitha\\Excel-to-xml\\";
        String strFilePrefix = "Master_5.2-B";

        try {
            InputStream inputStream = new FileInputStream(new File("H:\\BLR_Team\\Kavitha\\Excel-to-xml\\Stack-up 20L pure storage 11-0039-01 ISU_USA-A 1-30-17-Rev_exm.xls"));
            Workbook wb = WorkbookFactory.create(inputStream);
           // Sheet sheet = wb.getSheet(0);
            Sheet sheet =null;
            Integer noOfSheets= wb.getNumberOfSheets();

            for(int i=0;i<noOfSheets;i++){
                sheet = wb.getSheetAt(i);
                System.out.println("Sheet : "+i + " " + sheet.getSheetName());
                System.out.println("Sheet : "+i + " " + sheet.getFirstRowNum());
                System.out.println("Sheet : "+i + " " + sheet.getLastRowNum());

            //Column 29
            fostream = new FileWriter(strOutputPath + "\\" + strFilePrefix+i+ ".xml");
            out = new PrintWriter(new BufferedWriter(fostream));

            out.println("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
            out.println("<Bin-code>");

            boolean firstRow = true;
            for (Row row : sheet) {
                if (firstRow == true) {
                    firstRow = false;
                    continue;
                }
                out.println("\t<DCT>");
                out.println(formatElement("\t\t", "ID", formatCell(row.getCell(0))));
                out.println(formatElement("\t\t", "Table_name", formatCell(row.getCell(1))));
                out.println(formatElement("\t\t", "isProddaten", formatCell(row.getCell(2))));
                out.println(formatElement("\t\t", "isR3P01Data", formatCell(row.getCell(3))));

                out.println(formatElement("\t\t", "LayerNo", formatCell(row.getCell(29))));
                out.println("\t</DCT>");
            }
            CellReference ref = new CellReference("A13");
          Row r = sheet.getRow(ref.getRow());
          if (r != null) {
             Cell c = r.getCell(ref.getCol());
           System.out.println(c.getRichStringCellValue().getString());
          }

            for (Row row : sheet) {
                  for (Cell cell : row) {

                      CellReference cellRef = new CellReference(row.getRowNum(), cell.getColumnIndex());

                      switch (cell.getCellType()) {
                      case Cell.CELL_TYPE_STRING:
                          System.out.println(cell.getRichStringCellValue().getString());
                          break;
                      case Cell.CELL_TYPE_NUMERIC:
                          if (DateUtil.isCellDateFormatted(cell)) {
                              System.out.println(cell.getDateCellValue());
                          } else {
                              System.out.println(cell.getNumericCellValue());
                          }
                          break;
                      case Cell.CELL_TYPE_BOOLEAN:
                          System.out.println(cell.getBooleanCellValue());
                          break;
                      case Cell.CELL_TYPE_FORMULA:
                          System.out.println(cell.getCellFormula());
                          break;
                      case Cell.CELL_TYPE_BLANK:
                          System.out.println();
                          break;
                      default:
                          System.out.println();
                  }
                  }

            }
            out.write("</Bin-code>");
            out.flush();
            out.close();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static String formatCell(Cell cell)
    {
        if (cell == null) {
            return "";
        }
        switch(cell.getCellType()) {
            case Cell.CELL_TYPE_BLANK:
                return "";
            case Cell.CELL_TYPE_BOOLEAN:
                return Boolean.toString(cell.getBooleanCellValue());
            case Cell.CELL_TYPE_ERROR:
                return "*error*";
            case Cell.CELL_TYPE_NUMERIC:
                return XSLXReader.df.format(cell.getNumericCellValue());
            case Cell.CELL_TYPE_STRING:
                return cell.getStringCellValue();
            default:
                return "<unknown value>";
        }
    }

    private static String formatElement(String prefix, String tag, String value) {
        StringBuilder sb = new StringBuilder(prefix);
        sb.append("<");
        sb.append(tag);
        if (value != null && value.length() > 0) {
            sb.append(">");
            sb.append(value);
            sb.append("</");
            sb.append(tag);
            sb.append(">");
        } else {
            sb.append("/>");
        }
        return sb.toString();
    }
} 
```

这段代码做了 3 件事：

1.  Excel 到 XML 文件生成。英。姓名董金
2.  打印特定单元格的内容：A13
3.  还将excel内容打印成普通文本格式。要导入的罐子：poi-3.9.jar,poi-ooxml-3.9.jar,poi-ooxml-schemas-3.9.jar,xbea‌​n-2.3.0.jar,xmlbeans‌​-xmlpublic-2.4.0.jar‌​ ,dom4j-1.5.jar

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-18T07:25:08.677

这是按列读取excel数据的代码。

```
public ArrayList<String> extractExcelContentByColumnIndex(int columnIndex){
        ArrayList<String> columndata = null;
        try {
            File f = new File("sample.xlsx")
            FileInputStream ios = new FileInputStream(f);
            XSSFWorkbook workbook = new XSSFWorkbook(ios);
            XSSFSheet sheet = workbook.getSheetAt(0);
            Iterator<Row> rowIterator = sheet.iterator();
            columndata = new ArrayList<>();

            while (rowIterator.hasNext()) {
                Row row = rowIterator.next();
                Iterator<Cell> cellIterator = row.cellIterator();
                while (cellIterator.hasNext()) {
                    Cell cell = cellIterator.next();

                    if(row.getRowNum() > 0){ //To filter column headings
                        if(cell.getColumnIndex() == columnIndex){// To match column index
                            switch (cell.getCellType()) {
                            case Cell.CELL_TYPE_NUMERIC:
                                columndata.add(cell.getNumericCellValue()+"");
                                break;
                            case Cell.CELL_TYPE_STRING:
                                columndata.add(cell.getStringCellValue());
                                break;
                            }
                        }
                    }
                }
            }
            ios.close();
            System.out.println(columndata);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return columndata;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-15T11:52:01.147

请注意，使用行单元格迭代器 ( ) 遍历列`Iterator<Cell> cellIterator = row.cellIterator();`可能会导致静默跳过列。我刚刚遇到了一份暴露这种行为的文件。

在 for 循环中迭代使用索引并使用`row.getCell(i)`并没有跳过列，而是在正确的列索引处返回值。

# ios - 为 mac 编译 stasm

> ID：12857474
> 
> 赞同：3
> 
> 时间：2012-10-12T10:52:52.130
> 
> 标签：ios, linux, macos, opencv

我正在尝试在我的 mac 上构建 stasm 库，并希望将其移植到 iphone。stasm 下载： http: [//www.milbo.users.sonic.net/stasm/download.html](http://www.milbo.users.sonic.net/stasm/download.html)

我正在使用为 linux 提供的 makefile。在对标头进行一些更改后，包括 libjpeg 和 opencv 的路径，我遇到了这个错误

```
g++ -c ../stasm/violajones.cpp -O3 -Wall -pedantic -I/home/john/OpenCV-2.1.0/include/opencv -I../gsl -I../gsl/gsl -I../image -I../jpeg -I../mat -I../rowley -I../stasm -I../tasm 
In file included from ../stasm/violajones.cpp:24:
/opt/local/include/opencv/cv.h:63:33: error: opencv2/core/core_c.h: No such file or directory 
/opt/local/include/opencv/cv.h:64:33: error: opencv2/core/core.hpp: No such file or directory
/opt/local/include/opencv/cv.h:65:39: error: opencv2/imgproc/imgproc_c.h: No such file or directory
/opt/local/include/opencv/cv.h:66:39: error: opencv2/imgproc/imgproc.hpp: No such file or directory
/opt/local/include/opencv/cv.h:67:38: error: opencv2/video/tracking.hpp: No such file or directory
/opt/local/include/opencv/cv.h:68:45: error: opencv2/features2d/features2d.hpp: No such file or directory
/opt/local/include/opencv/cv.h:69:35: error: opencv2/flann/flann.hpp: No such file or directory 
/opt/local/include/opencv/cv.h:70:39: error: opencv2/calib3d/calib3d.hpp: No such file or directory
/opt/local/include/opencv/cv.h:71:43: error: opencv2/objdetect/objdetect.hpp: No such file or directory
/opt/local/include/opencv/cv.h:72:37: error: opencv2/legacy/compat.hpp: No such file or directory
/opt/local/include/opencv/cv.h:79:37: error: opencv2/core/internal.hpp: No such file or directory In file included
from ../stasm/violajones.cpp:25:
/opt/local/include/opencv/highgui.h:47:39: error: opencv2/highgui/highgui_c.h: No such file or directory
/opt/local/include/opencv/highgui.h:48:39: error: opencv2/highgui/highgui.hpp: No such file or directory 
```

原始makefile在这里上传[https://github.com/tsaizhenling/stuff/blob/master/makefile](https://github.com/tsaizhenling/stuff/blob/master/makefile)

我已尝试按照 trojanfoe 的建议更改目录，但仍然出现相同的错误:(

我有 opencv 和 opencv2 位于 /opt/local/include/

**更新：**

尝试了 J-16 SDiZ 的建议，这让我前进了。我不得不删除迂腐标志，但我仍然遇到以下错误

> g++ -c ../stasm/tab.cpp -O3 -Wall -I/opt/local/include/opencv -I/opt/local/include -I../gsl -I../gsl/gsl -I. ./image -I../jpeg -I../mat -I../rowley -I../stasm -I../tasm make: ***没有规则来制作目标`-lm', needed by`stasm'。停止。

生成文件已更新

**更新：**

终于在 J-16 SDiZ 的帮助下解决了所有问题。

必须更新链接器标志，因为 opencv 更改了库名称

如果有人需要，makefile 会更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:19:26.840

改变

```
INCL=\
    -I$(OPENCV_HOME)/include/opencv\
    -I../gsl\ 
```

到

```
INCL=\
    -I$(OPENCV_HOME)/include/opencv\
    -I$(OPENCV_HOME)/include \
    -I../gsl\ 
```

而且您不应该`${LIB}`在依赖项中使用。

改变

```
something: xxxxxx $(LIBS) $(OBJ) 
```

到

```
something: xxxxxx $(OBJ) 
```

我认为您应该了解 Makefile 的工作原理，这是一个 makefile 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T20:59:07.290

这里有 Stasm 的 Mac/Linux 构建脚本： [https ://github.com/juan-cardelino/stasm](https://github.com/juan-cardelino/stasm)

您可以使用以下方法轻松构建 iOS： [https ://code.google.com/p/ios-cmake/wiki/HowTo](https://code.google.com/p/ios-cmake/wiki/HowTo)

# git - 获取编辑器：在 git 中上传 repo 时出错，使用 cygwin 编辑器

> ID：12857475
> 
> 赞同：1
> 
> 时间：2012-10-12T10:52:55.243
> 
> 标签：git, cygwin, repository

尝试回购上传时出现错误

命令运行如下 -

```
git add <merged Files>
git commit -a -m ""
repo sync
**repo upload** - here I got the error 
```

[从http://git-scm.com/downloads](http://git-scm.com/downloads)下载 git

```
Traceback (most recent call last):
  File "/home/choudhar/Dev/.repo/repo/main.py", line 385, in <module>
    _Main(sys.argv[1:])
  File "/home/choudhar/Dev/.repo/repo/main.py", line 365, in _Main
    result = repo._Run(argv) or 0
  File "/home/choudhar/Dev/.repo/repo/main.py", line 137, in _Run
    result = cmd.Execute(copts, cargs)
  File "/home/choudhar/Dev/.repo/repo/subcmds/upload.py", line 399, in Execute
    self._MultipleBranches(opt, pending, people)
  File "/home/choudhar/Dev/.repo/repo/subcmds/upload.py", line 235, in _MultipleBranches
    script = Editor.EditString("\n".join(script)).split("\n")
  File "/home/choudhar/Dev/.repo/repo/editor.py", line 96, in EditString
    % (str(e), editor, path))
error.EditorError: editor failed, [Errno 2] No such file or directory: vi /tmp/tmp9S5ZRI 
```

我只是 git add ， commit -a -m ， repo sync 然后尝试了 repo sync。我是 git 的新用户

# ruby-on-rails - rails 服务器，用于对 3rd 方 API 的长期请求

> ID：12857477
> 
> 赞同：0
> 
> 时间：2012-10-12T10:52:59.663
> 
> 标签：ruby-on-rails, webserver, thin, unicorn

请告知服务器对第 3 方 API 服务器的长期请求。当我使用独角兽时，有时工作人员的数量不足，并且客户端请求会因超时而中断。

瘦，彩虹！，其他任何东西。什么是更好的？我找到了 async-rails，但它有“堆栈级别太深”的问题，即使我禁用资产

感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:41:23.503

[https://github.com/hakanensari/async-rails](https://github.com/hakanensari/async-rails)和[http://dev.af83.com/2011/09/20/fighting-with-eventmachine.html](http://dev.af83.com/2011/09/20/fighting-with-eventmachine.html)的组合看起来像我需要的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:27:58.737

将您的请求作为后台作业（[Resque 与 Redis](https://github.com/defunkt/resque)，延迟作业），或使用允许您指定超时的[Curb 。](https://github.com/taf2/curb)

您可以相应地处理超时。

# arrays - 将存储过程结果传递给数组

> ID：12857478
> 
> 赞同：1
> 
> 时间：2012-10-12T10:53:00.863
> 
> 标签：arrays, vb.net

快速提问，我有点不确定如何处理数组问题。

基本上我有一个输出一些课程类别的存储过程，我想将所有行传递给一个数组。

```
Subject            SubjectCode

Applied Science    F04
Access to HE       F05 
```

所以基本上上面是我从存储过程中得到的一个例子，我想将主题的结果传递给一个数组。

```
Dim num as Integer
Dim strNumResult as String

num = 0

Do While (rsData.Read())

num = num + 1

strNumResult = num.ToString()

Dim array(strNumResult) as String

loop 
```

我假设我需要先计算过程中的行数，然后将此结果放入数组中？然后，我将如何系统地将程序中的所有主题拉入数组？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:18:24.500

最简单的方法是使用`List(Of Subject)`可以调整大小的替代。由于您有两个字段，因此我还将为该主题创建一个类。

```
Dim subjects = New List(Of Subject)
Using con = New SqlConnection(connectionString)
    Using cmd = New SqlCommand("StoredProcedureName", con)
        cmd.CommandType = CommandType.StoredProcedure
        Try
            con.Open()
            Using reader = cmd.ExecuteReader()
                While reader.Read
                    Dim subject = reader.GetString(0)
                    Dim subjectCode = reader.GetString(1)
                    subjects.Add(New Subject() With {
                                 .Subject = subject,
                                 .SubjectCode = subjectCode
                             })
                End While
            End Using
        Catch ex As Exception
            ' log exception 
        End Try
    End Using
End Using 
```

这是该类的简单实现：

```
Public Class Subject
    Public Subject As String
    Public SubjectCode As String
End Class 
```

如果您坚持使用数组，则可以调用`subjects.ToArray()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:06:58.670

您需要`GetRows`将记录集数据放入数组的方法：

```
array = recordset.GetRows(Rows, Start, Fields ) 
```

基本上执行你的存储过程，当你得到结果时，使用 GetRows 方法，它从结果中返回一组行，给定一个唯一列 ID 的数组。

[你可以在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677500%28v=vs.85%29.aspx)看到一个例子。

在确保您返回了一些记录之后，您可以执行以下操作：

```
arrData = rsData.GetRows() 
```

希望这可以帮助。

# android - 如何设置进度条

> ID：12857481
> 
> 赞同：0
> 
> 时间：2012-10-12T10:53:12.770
> 
> 标签：android

```
package com.example.tabactivity;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.net.ParseException;
import android.os.AsyncTask;
import android.os.Bundle;

import android.app.ActivityGroup;
import android.app.ProgressDialog;
import android.content.Intent;

import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class circularlistparsing extends ActivityGroup {

    public int currentPage = 1;
    public ListView lisView1;
    static final String KEY_ITEM = "docdetails";
    static final String KEY_ITEM2 = "info";
    static final String KEY_NAME1 = "";
    static final String KEY_NAME = "heading";
    static final String KEY_DATE = "date";
    public Button btnNext;
    public Button btnPre;
    public static String url = "http://dev.taxmann.com/TaxmannService/TaxmannService.asmx/GetCircularList";
    TextView txtreord;
    TextView totalpage;
    TextView pagenumber;
    ProgressDialog dialog;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        txtreord = (TextView) findViewById(R.id.recored);
        totalpage = (TextView) findViewById(R.id.totalpage);
        pagenumber = (TextView) findViewById(R.id.pagenumber);

        // listView1
        lisView1 = (ListView) findViewById(R.id.listView1);
    //  new YourTask().execute();
        // Next
        btnNext = (Button) findViewById(R.id.btnNext);
        // Perform action on click
        btnNext.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage + 1;

    //          new YourTask().execute();
                ShowData();
                pagenumber.setText("Of" + currentPage+"]");
            }
        });

        // Previous
        btnPre = (Button) findViewById(R.id.btnPre);
        // Perform action on click
        btnPre.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                currentPage = currentPage - 1;

        //      new YourTask().execute();
                ShowData();
                pagenumber.setText("Of" + currentPage+"]");
            }
        });

    //  new YourTask().execute();
        ShowData();
    }

    public void ShowData() {
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(url); // getting XML

        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        NodeList n2 = doc.getElementsByTagName(KEY_ITEM2);

        int displayPerPage = 10; // Per Page
        int TotalRows = nl.getLength();

        txtreord.setText( TotalRows+"Records|"); // number of records

        int indexRowStart = ((displayPerPage * currentPage) - displayPerPage);
        int TotalPage = 0;
        if (TotalRows <= displayPerPage) {
            TotalPage = 1;
        } else if ((TotalRows % displayPerPage) == 0) {
            TotalPage = (TotalRows / displayPerPage);
        } else {
            TotalPage = (TotalRows / displayPerPage) + 1; // 7
            TotalPage = (int) TotalPage; // 7
        }

        totalpage.setText("Page[" + TotalPage);

        int indexRowEnd = displayPerPage * currentPage; // 5
        if (indexRowEnd > TotalRows) {
            indexRowEnd = TotalRows;
        }

        // Disabled Button Next
        if (currentPage >= TotalPage) {
            btnNext.setEnabled(false);
        } else {
            btnNext.setEnabled(true);
        }

        // Disabled Button Previos
        if (currentPage <= 1) {
            btnPre.setEnabled(false);
        } else {
            btnPre.setEnabled(true);
        }

        // Load Data from Index
        int RowID = 1;
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map;

        // RowID
        if (currentPage > 1) {
            RowID = (displayPerPage * (currentPage - 1)) + 1;
        }

        for (int i = indexRowStart; i < indexRowEnd; i++) {
            Element e = (Element) nl.item(i);

            Element e2 = (Element) n2.item(i);

            String date = e2.getAttribute(KEY_DATE);
            // adding each child node to HashMap key => value

            map = new HashMap<String, String>();
            map.put("RowID", String.valueOf(RowID));

            map.put(KEY_DATE, date);

            // String Heading = parser.getValue(e, KEY_NAME).replace("|", "|\n")
            // .replace("|", "");
            //

            String mytime = date;
            SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmdd");
            Date myDate = null;
            try {
                myDate = dateFormat.parse(mytime);

            } catch (ParseException t) {
                t.printStackTrace();
            } catch (java.text.ParseException t) {
                // TODO Auto-generated catch block
                t.printStackTrace();
            }

            SimpleDateFormat timeFormat = new SimpleDateFormat("yyyy-MM-dd");
            String finalDate = timeFormat.format(myDate);

            // System.out.println("rrrrrrrrrrrrr"+finalDate);

            String Heading = parser.getValue(e, KEY_NAME);

            int a = Heading.indexOf("|");
            String beforeSubString = Heading.substring(0, a);
            String afterSubString = Heading.substring(a, Heading.length())
                    .replace("|", "") + "[" + finalDate + "]";
            // String
            // final1="<b>"+beforeSubString+"<b>"+"|"+afterSubString.replace("|",
            // "|\n")
            // .replace("|", "");
            // String k=Html.fromHtml(final1).toString();
            //
            // Html.fromHtml(final1);

            map.put(KEY_NAME, beforeSubString);
            map.put(KEY_NAME1, afterSubString);

            // adding HashList to ArrayList
            menuItems.add(map);

            RowID = RowID + 1;

        }

        SimpleAdapter sAdap;
        sAdap = new SimpleAdapter(circularlistparsing.this, menuItems,
                R.layout.list_item,
                new String[] { "RowID", KEY_NAME1, KEY_NAME }, new int[] {
                        R.id.ColRowID, R.id.ColName, R.id.textView1 });
        lisView1.setAdapter(sAdap);

        lisView1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub

                Intent i = new Intent(circularlistparsing.this, detail.class);
                // sending data to new activity
                // i.putExtra("product", product);
                startActivity(i);

            }
        });

        }

    class YourTask extends AsyncTask<Void, Void, Void> {
        protected void onPreExecute() {
                   dialog = ProgressDialog.show(circularlistparsing.this, "", "Please wait..");
        }

        protected Void doInBackground(Void... unused) {
            try {
               // doSomethingHeavy();
                   // publishProgress(...);

                ShowData();
            } catch(Exception e) {
                //...
            } 

            return null;
        }

        protected void onProgressUpdate(Void... unused) {
        }

        protected void onPostExecute(Void unused) {
            dialog.dismiss();

        }
    }

} 
```

您好，此代码显示数据功能用于在我使用 new YourTask().execute() 时显示数据；代替显示数据，然后显示进度条但不显示数据但能够读取数据，而当我们使用 showdata() 函数它显示数据时，请告诉我如何实现进度条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:13:36.117

```
private class YourTask extends AsyncTask<Object, Integer, Object> {

ProgressDialog dialog = new ProgressDialog(Currentactivity.this);
    @Override
    protected void onPreExecute() {
        this.dialog.setMessage("Loading...");
        this.dialog.show();
        this.dialog.setCancelable(false);

        super.onPreExecute();
    }

    @Override
    protected Object doInBackground(Object... params) {
        //do hard work here
                            return params;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        progress.getProgress();

    }

    @Override
    protected void onPostExecute(Object result) {

        progressBar.dismiss();

        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:59:28.360

实现这段代码

```
private class YourTask extends AsyncTask<Object, Integer, Object> {

    @Override
    protected void onPreExecute() {

         ProgressDialog dialog = ProgressDialog.show(Activity.this, "",
                "Loading...");

        super.onPreExecute();
    }

    @Override
    protected Object doInBackground(Object... params) {
       try {
       // doSomethingHeavy();
           // publishProgress(...);

        ShowData();
    } catch(Exception e) {
        //...
    } 

    return null;
}

    @Override
    protected void onProgressUpdate(Integer... values) {
        dialog .getProgress();

    }

    @Override
    protected void onPostExecute(Object result) {

        dialog .dismiss();

        super.onPostExecute(result);
    }
} 
```

# javascript - 类型错误：显示不是函数

> ID：12857485
> 
> 赞同：-5
> 
> 时间：2012-10-12T10:53:27.110
> 
> 标签：javascript, jquery

我正在将 jQuery 用于网站上的动态内容行为。我有一个错误：

> TypeError: $("#id").attr("src", thisContent.attr("data-attr")).show 不是函数

首先，我认为它与浏览器有关，但事实证明并非如此。错误在这一行：

```
$('#id').attr('src', thisContent.attr('data-attr')).show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:06:37.993

如果第二个参数`.attr()`是`undefined`getter 将被调用。似乎调用了 getter 而不是 setter。

吸气剂：

```
$(...).attr(String) // returns String which has no method .show() 
```

二传手：

```
$(...).attr(String, String) // returns jQuery object, which has method .show() 
```

`thisContent.attr('data-attr')`在某些情况下可能会返回`undefined`，因此会调用 getter 而不是所需的 setter 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:59:40.993

试试下面的。

将您的数据属性重命名为其他名称。

查看 thisContect.attr 中是否存在 data-attr。

记录以下行并转到控制台。在那里，您将看到 data-attr 不存在或位于错误的位置。

console.log(thisContent);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:06:26.920

随机问题，但可以肯定...

你是通过他们的 CDN 访问 jQuery 吗？

如果是，两台机器都可以正常加载 jQuery 代码吗？两者都可以毫无问题地看到 CDN（都连接到互联网）？和其他一些 jQuery 代码正在工作？

浏览器在渲染/处理 JS 的方式上会有所不同是非常罕见的，因为它是一种非常成熟的语言。所以我的建议是，它不是基于浏览器的问题，而是你的代码之外的东西。

只是一个想法..

# java - Primefaces MenuBar第三项不可点击？

> ID：12857493
> 
> 赞同：0
> 
> 时间：2012-10-12T10:53:50.887
> 
> 标签：java, primefaces

我对 JSF2+Primefaces Menubar 有疑问。我[在这里使用 Primefaces MenuBar](http://www.askkuber.com/IndianStock/topStocks/Index_Movements)

但是菜单项的第三项不可点击，我无法找出这里的问题。或者用户无法在子菜单中有超过 2 个选项的位置单击第三个选项。示例：- 在菜单中，如果您单击“**研究**” ，则无法轻松单击“**库存”以观看**项目。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:00:33.083

@Subodh：我认为是浏览器问题。因为当我在 IE 中查看这个网站时，我点击了 Stock to Watch，但在 Mozilla 的情况下它不起作用。

# c# - 删除从不同用户收到的批量电子邮件的重复

> ID：12857495
> 
> 赞同：0
> 
> 时间：2012-10-12T10:53:53.500
> 
> 标签：c#, vba, vb.net, outlook, outlook-addin

我有五个用户使用 Outlook 电子邮件客户端。他们每个人都从电子邮件营销中接收邮件。我需要从我所有的五个用户那里获取所有独特的邮件。我用了以下，

> **Outlook 电子邮件**标头的消息 ID。

如果同一用户收到相同的邮件，则 Message-ID 相同。这样我就可以消除重复的邮件。

如果同一封邮件接收到不同的用户，那么 Message-ID 是不一样的。这样我就可以消除重复的邮件。

有没有更好的方法来消除来自不同用户的重复邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:41:38.033

据我所知，消息 ID 正是您不能使用的。它总是不同的。检查电子邮件的属性并找到相似之处并检查这些。第一个将是 From then Subject 然后可能是身体的一部分。

# css - 从 div 溢出的文本

> ID：12857496
> 
> 赞同：0
> 
> 时间：2012-10-12T10:53:56.983
> 
> 标签：css, overflow

我想要主 div 的静态宽度为 300px。但是当任何用户从 Word 程序中复制和粘贴文本时，就会更改表格宽度并从 div 溢出文本。但我网站的宽度必须最大为 300 像素。我怎么解决这个问题？

```
<html>
<head>
<style>
#main td{
max-width:300px;
}

#main table{
max-width:300px;
}

</style>
</head>

<body>
<div id="main">
<table width="700" border="1">
<tr>
<td width="800"><p width="900">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</td>
</tr>

<tr>
<td width="800"><p with="900">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p></td>
</tr>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:57:40.747

Change

```
#main table{
max-width:300px;
} 
```

To

```
#main *{
max-width:300px;
} 
```

That way, the TD, img and others will still be sized. Also, you could use `overflow-x:hidden` on your `#main` div to hide the content that is too big to fit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:40:40.383

我建议对 Word 文本进行某种类型的清理，以删除不需要的内联样式。无论如何，您应该始终清理从单词到网络的文本。你可以使用 tinyIMCE 或类似的东西。这样您就不必担心他们复制的内容，它将始终遵守 CSS。

# asp.net-mvc - 如何获取 ASP.Net MVC 中方法的开始时间和结束时间？

> ID：12857505
> 
> 赞同：2
> 
> 时间：2012-10-12T10:54:40.047
> 
> 标签：asp.net-mvc, datetimepicker

我的控制器上传方法中有一个方法可以将上传的图像文件转换为三种不同的大小。我想显示从文件上传到转换停止的方法结束所花费的时间，谁能告诉我我该怎么做

```
 this is my controller

           public ActionResult Upload()
    {
        //ViewBag.ProcessingTime = DateTime.Now;
        return View();
    }

        [HttpPost]
        public ActionResult Uploading(ImageModel model)
        {
            if (ModelState.IsValid)
            {

                Console.WriteLine("time is"+System.DateTime.Now);

                string fileName = Guid.NewGuid().ToString() + System.DateTime.Now.ToString("yyyy/MM/dd/hh/mm/ss/fff");
                string serverPath = Server.MapPath("~");
                string imagesPath = serverPath + "Content\\Images\\";
                string thumsise = Path.Combine(imagesPath, "Thumb" + fileName);
                string thumbPath = Path.Combine(imagesPath, "Thu" + fileName);
                //string thumbPath = imagesPath + "Thumb\\";
                string fullPath = Path.Combine(imagesPath, "Full" + fileName);
                //string fullPath = imagesPath + "Full\\";
               // string Bigpath = imagesPath + "big\\";
                string Bigpath = Path.Combine(imagesPath, "big" + fileName);
                string Bigpatha = Path.Combine(imagesPath, "biga" + fileName);
                string Bigpathb = Path.Combine(imagesPath, "bigb" + fileName);
                //string Bigpatha = imagesPath + "biga\\";
                //string Bigpathb = imagesPath + "bigb\\";
                string Bigpathc = Path.Combine(imagesPath, "bigc" + fileName );
                //string Bigpathc = imagesPath + "bigc\\";
                //var firstSize = Path.Combine(uploadFolder, "bigsize-" + Path.GetFileName(uploadedFile));
                ImageModel.ResizeAndSave(thumsise, fileName, model.ImageUploaded.InputStream, 80, true);
                ImageModel.ResizeAndSave(thumbPath, fileName, model.ImageUploaded.InputStream, 100, true);
                ImageModel.ResizeAndSave(fullPath, fileName, model.ImageUploaded.InputStream, 500, true);
                ImageModel.ResizeAndSave(Bigpath, fileName, model.ImageUploaded.InputStream, 200, true);
                ImageModel.ResizeAndSave(Bigpatha, fileName, model.ImageUploaded.InputStream, 250, true);
                ImageModel.ResizeAndSave(Bigpathb, fileName, model.ImageUploaded.InputStream, 150, true);
                ImageModel.ResizeAndSave(Bigpathc, fileName, model.ImageUploaded.InputStream, 50, true);
                Console.WriteLine("Time is " + System.DateTime.Now);
            }
            Console.WriteLine("Time is "+System.DateTime.Now);

            Console.ReadLine();
            return View();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:57:43.860

您将不得不在您的`Model`：

```
 public DateTime StartTime { get; set; }
 public DateTime OperatingTime { get; set; }
 public DateTime EndTime { get; set; } 
```

然后适当地分配每个，即`StartTime = DateTime.Now;`

然后在你的`View`：

```
@Html.DisplayFor(m=>m.StartTime); 
```

**额外的**

我会亲自将上传图像功能包装到一个新方法中，最好是在你的`ImageModel`班级中。然后你可以这样做：`model.UploadImage(fileName, imagePath);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:59:46.653

使用秒表

```
 var stopwatch = new Stopwatch();
   stopwatch.Start();    
   //whatever you want to time
   stopwatch.Stop();
   var result1 = string.Format("{0} to run whatever ", 
                               stopwatch.Elapsed.ToString());
   Console.WriteLine(result1); 
```

对于多个计时，您可以重置秒表并进行更多计时，类似于第一个计时。

# c# - 将委托作为变量存储/传递

> ID：12857508
> 
> 赞同：1
> 
> 时间：2012-10-12T10:54:48.037
> 
> 标签：c#, multithreading, delegates

我对 C# 相当陌生，并且正在研究一种实现使用串行通信的动态 GUI 的方法。我原来是C语言的，所以函数指针的概念很熟悉。

基本上，我想在处理完串行命令后调用 answerFunction() 函数。理论上：
我有一个在运行时动态创建的类 lbl_txtBox_Pair。
我有一个与串行端口通信的类 comObject。
我有一个第三类 comPacket，它包含有关一个串行命令的所有信息。

1.  在类 lbl_txtBox_Pair 的对象中，我实例化了一个数据包并告诉它在串行命令完成时应该调用哪个函数。
2.  我将数据包对象提供给 comObject 实例。
3.  处理后，comObject 想要通过调用存储在数据包对象中的委托来通知数据包的原始发送者。

出于某种原因，我无法让它工作。它告诉我数据包的属性不可调用。我做错了什么吗？

这是代码：首先是“lbl_txtBox_Pair”类中的代码。我在这里创建 comPacket 并将其提供给 comObject。

```
public delegate void answerHandler( comPacket packet);
public void txb_value_KeyPress(object sender, KeyPressEventArgs e)
{
   if (e.KeyChar == (char)Keys.Return)
   {
      answerHandler answerMethod = new answerHandler(this.processAnswer);
      comPacket question = new comPacket(this.command, answerMethod, 1);
      comObject.addPacket(question);
    }
 } 
```

comPacket 的构造函数。在这里，委托被存储以供以后调用。

```
public Delegate answerFunction;
public comPacket(string cmd, Delegate func, int prio)
{
    this.cmd = cmd;
    answerFunction = func;
    this.prio = prio;
} 
```

在 comObject 中，数据包得到处理。完成后，我想调用存储在 Packet 中的函数。顺便说一下，comObject 在不同的线程中运行。

```
if (this.isEndtocken(inputline))
 {
    listen = false;
    packet.answerFunction(packet);
 } 
```

就在这里，它打破了。数据包.answerFunction（数据包）；不会执行并说它不能被称为方法。

有人能看出哪里出错了吗？我认为代表似乎失去了它是代表或其他东西的信息。还是我必须完全重构代码才能使用其他类型的回调/事件方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:11:42.167

更改您`comPacket`以采用强类型委托：

```
public answerHandler answerFunction;
public comPacket(string cmd, answerHandler func, int prio)
{
    this.cmd = cmd;
    answerFunction = func;
    this.prio = prio;
} 
```

如果您仍想保持弱类型的委托引用，您可以利用：http `DynamicInvoke`: [//msdn.microsoft.com/en-us/library/system.delegate.dynamicinvoke.aspx](http://msdn.microsoft.com/en-us/library/system.delegate.dynamicinvoke.aspx)

编辑：如果您想维护强类型委托但有不同的用法，另一个选择是利用泛型。您的委托可以放在一个泛型类中，并将其签名与该泛型类型联系起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:42:59.037

我不能发表评论，所以我必须将其发布为答案。委托（以及事件和东西）通常只能由包含它们的对象“调用”。

所以如果你有

```
class MyClass {
    public event Action someEvent;
    // you can also replace Action with the name of your delegate type
} 
```

你试着去做

```
MyClass x = new MyClass();
x.someEvent.Invoke(); 
```

那么这是一个错误。如果您希望其他对象能够调用该事件，您必须添加一个方法来`MyClass`像这样：

```
public void InvokeMyEvent() {
    someEvent.Invoke();
} 
```

（我忘了你是否还需要为静态事件这样做）

# java - 在非焦点窗口上编辑 Jtable

> ID：12857509
> 
> 赞同：4
> 
> 时间：2012-10-12T10:54:48.193
> 
> 标签：java, swing, jtable, window

我创建了我自己的所见即所得编辑器，它由一个设计窗口和一个工具调色板窗口组成。设计窗口是一个 JFrame，工具面板是一个 JDialog，其中 FocusableWindowState 设置为 false。但是，通过将 FocusableWindowState 切换为 false，我不再能够在工具面板窗口上编辑 JTable 中的单元格。将其更改为 true 允许我编辑单元格。

这是我的代码示例：

```
JFrame frame = new JFrame();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setBounds(0, 0, 1024, 768);

JDialog paletteWindow = new JDialog(frame, false);
paletteWindow.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
paletteWindow.setResizable(false);
paletteWindow.setFocusableWindowState(false);
paletteWindow.setBounds(1024, 0, 320, 768);

JTable grid = new JTable(new DefaultTableModel(new String[] {"Name", "Value"}, 5));
paletteWindow.getContentPane().add(new JScrollPane(grid));

frame.setVisible(true);
paletteWindow.setVisible(true); 
```

即使 FocusableWindowState 设置为 false，我如何仍能编辑单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:07:22.163

我找到了我的问题的答案，尽管它可能不符合每个人的需求。我使用 KeyEventDispatcher 将关键事件从焦点帧分派到编辑单元格编辑器。这是我的代码示例：

```
JFrame frame = new JFrame();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setBounds(0, 0, 1024, 768);

JDialog paletteWindow = new JDialog(frame, false);
paletteWindow.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
paletteWindow.setResizable(false);
paletteWindow.setFocusableWindowState(false);
paletteWindow.setBounds(1024, 0, 320, 768);

JTable grid = new JTable(new DefaultTableModel(new String[] {"Name", "Value"}, 5)) {
    private KeyEventDispatcher dispatcher;

    @Override
    public Component getEditorComponent() {
        final Component c = super.getEditorComponent();
        if (dispatcher == null) {
            dispatcher = new KeyEventDispatcher() {
                public boolean dispatchKeyEvent(KeyEvent e) {
                    e.setSource(c);
                    for (KeyListener keyListener : c.getKeyListeners()) {
                        if (e.getID() == KeyEvent.KEY_PRESSED) {
                            keyListener.keyPressed(e);
                        } else if (e.getID() == KeyEvent.KEY_RELEASED) {
                            keyListener.keyReleased(e);
                        } else if (e.getID() == KeyEvent.KEY_TYPED) {
                            keyListener.keyTyped(e);
                        }
                    }
                    return false;
                }
            };
            KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(dispatcher);
        }
        return c;
    }

    @Override
    public void removeEditor() {
        if (dispatcher != null) {
            KeyboardFocusManager.getCurrentKeyboardFocusManager().removeKeyEventDispatcher(dispatcher);
            dispatcher = null;
        }
        super.removeEditor();
    }
};
paletteWindow.getContentPane().add(new JScrollPane(grid));

frame.setVisible(true);
paletteWindow.setVisible(true); 
```

# c - 如果我使用 libnetfilter_queue 对其进行更改，网络数据包将被拒绝

> ID：12857513
> 
> 赞同：2
> 
> 时间：2012-10-12T10:54:53.850
> 
> 标签：c, linux, network-programming, linux-kernel, netfilter

我正在使用 iptables 队列捕获一些数据包，并在 libnetfilter_queue 模块中分析它们，现在我希望对数据包进行一些更改，但是即使我更改了单个字符，数据包也可能在检查校验和时被拒绝！有什么办法可以防止它被拒绝：

```
static int callBack(struct nfq_q_handle *qh, struct nfgenmsg *nfmsg,struct nfq_data *nfa, void *data)
{
 int len=0,id=0;
 char *pktData;
 string pktString;
 struct nfqnl_msg_packet_hdr *pktHeader;
 pktHeader = nfq_get_msg_packet_hdr(nfa);
 if (pktHeader) 
 {
   id = ntohl(pktHeader->packet_id);
 }
 len = nfq_get_payload(nfa, &pktData);
 if(len) 
 {
  int pos;
  pktString.assign(pktData,len);
  pos=pktString.find("oldstring",0);
  if(pos>0)
 {
    pktString.replace(pos,9,"newstring");
    unsigned char* newPktData=(unsigned char*)pktString.c_str();
    len=pktString.size();
    return nfq_set_verdict(qh, id, NF_ACCEPT,len,newPktData);
}
}   
return nfq_set_verdict(qh, id, NF_ACCEPT, 0, NULL);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T12:39:06.847

如果您更改任何内容，则必须更新校验和以防止拒绝，否则数据包将被视为已损坏...
编辑：假设您正在处理 IP 数据包，以上仅适用于 IP 标头的更改，因为只有标头，而不是有效负载，由 IP 校验和“保护”。

# linq - 使用 list.Add 将集合添加到列表时出现问题

> ID：12857523
> 
> 赞同：1
> 
> 时间：2012-10-12T10:55:33.193
> 
> 标签：linq, c#-4.0, generics

```
 private List<T> ParsePolicyDetails<T>(List<HouseHoldview> lsthousehold)
    {
        List<T> lstPolicyInfo = new List<T>();

        var checkInHouseHold = from c in lsthousehold
                               where c.PolicyDetail.Any(p => p.LineOfBusiness.Trim().ToUpper() == "A" && p.PolicySourceSystem.ToUpper().Trim() != "PLCS"
                                   && p.PolicySourceSystem.ToUpper().Trim() != "APS"
                                   && p.PolicySourceSystem.ToUpper().Trim() != "FOREMOST")
                               select c.PolicyDetail;

        foreach (var policies in checkInHouseHold)
        {
            var chek=policies.Where(p => p.LineOfBusiness.Trim().ToUpper() == "A" && p.PolicySourceSystem.ToUpper().Trim() != "PLCS"
                                     && p.PolicySourceSystem.ToUpper().Trim() != "APS"
                                     && p.PolicySourceSystem.ToUpper().Trim() != "FOREMOST" && p.LineOfBusiness.ToUpper().Trim() == "A");
            lstPolicyInfo.Add(chek);
        }
        return lstPolicyInfo;
    } 
```

看起来很简单的代码，但给出了错误。由于 chek 不是类型 T 如何处理这个

错误是 'System.Collections.Generic.List.Add() 的最佳重载方法匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:59:49.590

这种方法不是通用的；你想更换

*   `List<T>`和`List<WhateverTypeHouseHoldview.PolicyDetailIs>`
*   `ParsePolicyDetails<T>`和`ParsePolicyDetails`
*   `lstPolicyInfo.Add`和`lstPolicyInfo.AddRange`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:08:41.947

我认为 var 的使用可能会造成混淆。

尝试将它们更改为实际类型，这可能会帮助您了解发生了什么。

如果没有看到其他班级是如何设置的，很难说清楚。

# android - Android：使用服务的状态栏通知

> ID：12857524
> 
> 赞同：3
> 
> 时间：2012-10-12T10:55:34.223
> 
> 标签：android, android-pendingintent

在我的一项活动**Activity_A**中，我以这种方式覆盖了**onResume()**：

```
protected void onResume() {

super.onResume();
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
Intent i = new Intent(this, NotificationsService.class);
PendingIntent pi = PendingIntent.getService(this, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);
am.cancel(pi);
am.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime() + 20000, 20000, pi);
} 
```

在 20 秒后启动通知，然后每 20 秒重复一次。

但这不起作用，即使在 5-10 分钟后我也没有收到任何通知。我错过了什么。

通知服务类：

```
public class NotificationsService extends Service {

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        handleIntent(intent);
        return START_NOT_STICKY;
    }

    private NotificationManager nm;
    private WakeLock mWakeLock;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mWakeLock.release();
    }

    private void showNotification() {

        nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.icon,
                "This is a Notification", System.currentTimeMillis());
        notification.flags = Notification.FLAG_AUTO_CANCEL;
        Intent i = new Intent(this, Activity_B.class);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, i,
                PendingIntent.FLAG_UPDATE_CURRENT);
        notification.setLatestEventInfo(this, "New Notifications",
                "Notification Content", contentIntent);
        nm.notify(R.string.app_name, notification);
    }

    private class PollTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {
            showNotification();
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {

            stopSelf();
        }
    }

    private void handleIntent(Intent intent) {

        PowerManager pm = (PowerManager) getSystemService(POWER_SERVICE);
        mWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                "NotificationsService");
        mWakeLock.acquire();
        ConnectivityManager cm = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
        if (!cm.getBackgroundDataSetting()) {
            stopSelf();
            return;
        }
        new PollTask().execute();
    }
} 
```

我调用此通知的 BroadcastService 类是：

```
public class MyScheduleReceiver extends BroadcastReceiver {

    private static final long REPEAT_TIME = 60000;

    @Override
    public void onReceive(Context context, Intent intent) {
        AlarmManager service = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(context, NotificationsService.class);
        PendingIntent pending = PendingIntent.getService(context, 0, i,
                PendingIntent.FLAG_CANCEL_CURRENT);
        service.cancel(pending);
        service.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                SystemClock.elapsedRealtime() + REPEAT_TIME, REPEAT_TIME, pending);
    }
} 
```

我已将其包含在 Manifest.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.Android.WiC_MobileApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="14" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light" >
        <activity
            android:name=".Activity_A"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Activity_B"
            android:configChanges="orientation|keyboardHidden"
            android:excludeFromRecents="true"
            android:label="@string/app_name"
            android:launchMode="singleTask"
            android:screenOrientation="portrait"
            android:taskAffinity="" />

        <service
            android:name="NotificationsService"
            android:icon="@drawable/icon"
            android:label="Notifications"
            android:process=":my_process" >
        </service>

        <receiver android:name=".MyScheduleReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:58:12.490

你应该`PendingIntent.getService`改为`PendingIntent.getActivity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:28:10.230

问题在于清单中的**服务名称**

```
<service
   android:name="NotificationsService"
   android:icon="@drawable/icon"
   android:label="Notifications">
</service> 
```

该服务与 Activity 不在同一个包中，因此将其更改为以下工作。

```
<service
   android:name="com.android.myApp.Services.NotificationsService"
   android:icon="@drawable/icon"
   android:label="Notifications">
</service> 
```

# html - Chrome 中的 z-index 问题

> ID：12857525
> 
> 赞同：1
> 
> 时间：2012-10-12T10:55:34.647
> 
> 标签：html, css

我在 Chrome 中设置 z-index 时遇到问题，这里是我的示例[http://dev.fama.net.pl/tides/index.html](http://dev.fama.net.pl/tides/index.html)，单击直角三角形，新图像应该在字母上方并且它在除了 Chrome 之外的所有浏览器，所有元素都被绝对定位，所以它应该可以工作但它没有，任何人都知道为什么？

CSS

```
#central {
    color: #76b2d1;
    font-size: 22px;
    top: 50%;
    margin-top: -15px;
    left: 50%;
    margin-left: -215px;
    position: absolute;
    text-transform: uppercase;
    z-index: 0;
    font-family: 'gothic';
}
#container01 {
    position: absolute;
    top: 180px;
    left: 0;
    z-index: 1;
}
#container02 {
    position: absolute;
    top: 55px;
    right: 0;
    z-index: 1;
}
#container03 {
    position: absolute;
    bottom: 25px;
    right: 0;
    z-index: 1;
}
#container01 > div, #container02 > div , #container03 > div  {
    position: absolute;
    white-space: nowrap;
    font-family: 'gothic';
    text-transform: uppercase;
}
#p1text01 { 
    font-size: 41px;
    color: #f7ebd3;
    top: 0px;
    left: 50px;
}
#p1text02 {
    font-size: 26px;
    color: #f7ebd3;
    top: 55px;
    left: 245px;
}
#p1text03 {
    font-size: 75px;
    color: #f7ebd3;
    top: 55px;
    right: 80px;
}
#p1text04 {
    font-size: 28px;
    color: #f7ebd3;
    top: 145px;
    right: 365px;
}
#p1text05 {
    font-size: 160px;
    color: #f7ebd3;
    bottom: 40px;
    right: 100px;
}
#p1text06 {
    font-size: 36px;
    color: #f7ebd3;
    bottom: 35px;
    right: 200px;
}

#bg {
    position:fixed; 
    top:-50%; 
    left:-50%; 
    width:200%; 
    height:200%;
}
#bg img {
    position:absolute; 
    top:10px; 
    left:10px; 
    right:10px; 
    bottom:10px; 
    margin: auto; 
    min-width:50%;
    min-height:50%;
}
#bg img.blank {
    z-index: 0;
    display: none;
}
#bg img.pic {
    z-index: 2 !important;
    left: 20%;
    opacity: 0;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
}
.arrow {
    position: absolute;
    top: 50%;
    margin-top: -120px;
    width: 0;
    height: 0;
    opacity:.2;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";
    cursor: pointer;
    border-top: 120px solid transparent;
    border-bottom: 120px solid transparent;         
}
.arrow:hover {
    opacity:.5 !important;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)" !important;
}
#arrow-left {
    border-left: 120px solid #83bedd;
    left: -125px;
    z-index: 3;
}
#arrow-right {
    border-right: 120px solid #83bedd;
    right: -15px;
    z-index: 3;
} 
```

HTML

```
<div id="bg">
        <img class="blank" src="img/bg.jpg" alt="" data-xrange="20" data-yrange="20" />
        <img class="blank" src="img/bg.png" alt="" data-xrange="10" data-yrange="10"/>
        <img class="pic" src="img/bga.jpg" alt="" />
    </div>
    <div id="central">some text</div>
    <div id="container01">
        <div id="p1text01" data-xrange="30" data-yrange="10">some text</div>
        <div id="p1text02" data-xrange="10" data-yrange="10">some text</div>
    </div>
    <div id="container02">
        <div id="p1text03" data-xrange="40" data-yrange="10" data-invert="true">some text</div>
        <div id="p1text04" data-xrange="20" data-yrange="10" data-invert="true">some text</div>
    </div>
    <div id="container03">
        <div id="p1text05" data-xrange="50" data-yrange="10">some text</div>
        <div id="p1text06" data-xrange="25" data-yrange="10">some text</div>
    </div>  

    <div id="arrow-left" class="arrow"></div>
    <div id="arrow-right" class="arrow"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:01:56.547

`position`将`#bg`div 从切换`fixed`为`relative`解决问题，但我不确定这是否会产生连锁反应......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:05:31.177

`position:absolute`总是在其他类型的位置之上。`#bg`我在*Chrome 的开发工具*中对此进行了更改，图像位于文本上方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:01:53.300

尝试添加：

```
#bg {
     z-index: 2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T11:03:41.127

`#bg {z-index: 2;}`似乎工作。虽然不太确定这个错误是如何发生的

# c++ - 在 C++ 中通过字符串获取输入

> ID：12857526
> 
> 赞同：2
> 
> 时间：2012-10-12T10:55:39.337
> 
> 标签：c++, c, string, input

在 C 中，假设我需要从字符串中获取输入

```
 int num,cost;
 char *name[10];
 printf("Enter your  inputs [quantity item_of_name at cost]");
 scanf("%d%*c%s%*c%*s%*c%d",&num,name[0],&cost);

 printf("quantity of item: %d",num);
 printf("the cost of item is: %d",cost);
 printf("the name of item is: %d",name[0]); 
```

**输入**

12点出书

**输出**

商品数量：1

商品价格：12

物品名称：书

现在我想在 C++ 中做同样的事情。我不知道如何接近。gets() 返回整个字符串。是否有我遗漏的特定函数？请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T10:58:31.460

```
int num,cost;
std::string name;
std::cout << "Enter your  inputs [quantity item_of_name at cost]: ";
if (std::cin >> num >> name >> cost)
{ } else 
{ /* error */ } 
```

您将要添加错误处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:59:05.873

在 C++ 中，您应该使用`cin`,`cout`和`string`来自标准库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T10:59:16.613

您可以使用 iostream 的 cin。

```
int num,cost;
 char *name[10];
 std::cout <<"Enter your quantity"<<std::endl;
 std::cin>> num;
 std::cout<<" Enter the cost"<<std::endl;
 std::cin>>cost;
 std::cout<<"Enter the name"<<std::endl;

 std::cout<<"The quantity of the item is: "<<num<<" costing: "<<cost<<" for "<<name[0]<<std::endl; 
```

然后当然你也可以使用 std::string 代替 char*。

或者将cin的精简为cin >> num >> cost >> name；

此外，正如**Griwes 所**指出的，您需要对结果执行错误检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T11:01:23.283

在 c++ 中，[std::stream](http://www.cplusplus.com/reference/iostream/)通过操作符提供与用户的读写通信`>>`。

您的代码转换为

```
int num,cost;
std::string name;

std::cout << "Enter your  inputs [quantity item_of_name at cost]" << std::flush;
std::cin >> num >> name;
std::cin >> at; // skip the at word
std::cin >> cost;

std::cout << "quantity of item: " << num << std::endl;
std::cout << "the cost of item is: " << cost << std::endl;
std::cout << "the name of item is: " << name << std::endl; 
```

# c - Make a long string of encrypted substrings in c

> ID：12857528
> 
> 赞同：0
> 
> 时间：2012-10-12T10:55:47.220
> 
> 标签：c, encryption, mcrypt, string-length

I'm trying to create a long string that is produced out of encrypted substrings. For the encryption I'm using `AES128` and `libmcrypt`. The code is working, but I get a shorter output then I should and a beeping sound. I guess it's because I'm using `strlen`, but I have no idea, how I can avoid that. I will be very grateful for some suggestions. Here is my code:

```
char *Encrypt( char *key, char *message){   
    static char *Res;
    MCRYPT mfd;
    char *IV;
    int i, blocks, key_size = 16, block_size = 16;
    blocks = (int) (strlen(message) / block_size) + 1;

    Res = calloc(1, (blocks * block_size));

    mfd = mcrypt_module_open(MCRYPT_RIJNDAEL_128, NULL, "ecb", NULL);
    mcrypt_generic_init(mfd, key, key_size, IV);

    strncpy(Res, message, strlen(message));
    mcrypt_generic(mfd, Res, block_size);
    //printf("the encrypted %s\n", Res);

    mcrypt_generic_deinit(mfd);
    mcrypt_module_close(mfd);

     return (Res);
}

char *mkline ( int cols) {
    int j;
    char seed[] = "thesecretmessage", key1[]="dontusethisinput", key2[]="abadinputforthis";

    char *encrypted, *encrypted2, *in = malloc(cols * 16);
    encrypted = Encrypt(key1, seed);
    sprintf(in, "%s", encrypted);
    encrypted2= Encrypt(key2, encrypted);
    printf("encrypted2 before for-loop %s\n", encrypted2);
    printf("encrypted2 before for loop len %d\n", strlen(encrypted2));
    for (j=1; j<cols; j++) {
        strcat(in, encrypted2);
        memmove(encrypted2, Encrypt(key2, encrypted2),strlen(seed));
        printf("encrypted2 %s on position %d\n" , encrypted2,j);
        printf("encrypted2 len %d\n", strlen(encrypted2));
    }
    free(encrypted);
    free(encrypted2);
    return in;
}

int main(int argc, char *argv[]) {
    char *line = mkline(15);
    printf("line %s\n", line);
    printf("line lenght %d\n", strlen(line));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:25:37.197

您会听到哔声，因为您正在打印控制字符。

还`strlen`返回大小直到第一个 '\0' 字符（因为字符串以零结尾）。这就是为什么你得到的长度比你预期的要少，因为加密的消息可能包含零。

您可以执行以下操作来返回结果长度：

```
 char *Encrypt(const char *key, const char *message, int *result_len)
 {
   *result_len = blocks * block_size;
 } 
```

还

```
memmove(encrypted2, Encrypt(key2, encrypted2),strlen(seed)); 
```

这条线应该会产生内存泄漏，因为每次`Encrypt`您调用`calloc`（分配新内存）时，您都需要在完成后释放它。

您可能应该使用 memcpy，如果有机会目标和源可能重叠，则主要使用 memmove。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:18:32.337

您尝试打印的加密字符串包含一个字节流，其中单个字节的值范围从 0 到 255。因为您使用的是加密安全算法，所以值的分布非常接近均匀。

由于您尝试通过控制台打印加密字符串，因此控制台将某些字节解释为不可打印但具有其他效果的控制字符（请参阅[Bell character ），例如播放哔哔声。](http://en.wikipedia.org/wiki/Bell_character)

此外，`strlen`没有做您认为应该做的事情，因为加密的字符串不是以空字符结尾的，而是在其他字节中包含零，并且与以空字符结尾的字符串不同，它们没有特殊含义。您需要将字符串的长度存储在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:19:51.650

很简单，您将二进制输出（任何字节值）直接视为可打印文本。代码点低于 32（十六进制 20）的任何字符都不是。例如，BELL 的 ASCII 值（查找）可能对您有意义。以十六进制打印结果字节，你应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T11:39:18.030

我想补充一点，一般来说，如果可以的话，最好在加密后清除任何保存明文/未加密消息的内存。这不是好的编码实践，而是好的密码学实践。

这可以通过以下方式完成： memset(buffer, 0, length_of_buffer);

不用担心，编译器不会优化它。实际上，判断您是否会再次使用该区域还不够聪明。

# python - how to generate word from a to z

> ID：12857529
> 
> 赞同：0
> 
> 时间：2012-10-12T10:55:46.253
> 
> 标签：python, python-3.x

is it possible to create a method that generate a word from a to z ? cause i only know random generate word but what i want was a word that exist using python code

this is the random generate word code i have:

```
import random
wordLen = random.randint(1, 5)
def get_random_word(wordLen):
    word = ''

    for i in range(wordLen):
        word += random.choice('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz')
    print(word)
    return word
get_random_word(wordLen) 
```

or is it possible if i have a list of letter like example list= ['a','t','n','s','d','e','x'], then i want to generate real word from this list??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:06:28.227

你的意思是类似的吗？**（未经测试）**：

```
from collections import defaultdict
from string import ascii_lowercase
from random import choice

words = defaultdict(list)
with open('/usr/share/dict/words') as fin:
    for word in fin:
        if len(word) == 5: 
            words.append(word)

for letter in ascii_lowercase:
    print letter, 'is for', choice(words[letter]) 
```

如果您不在具有`/usr/share/dict/words`（或者您想要更全面的列表）的系统上，那么[http://www.findthatzip.com/search-10655738-hZIP/winrar-winzip-download-ukacd16.zip.htm](http://www.findthatzip.com/search-10655738-hZIP/winrar-winzip-download-ukacd16.zip.htm)是合理的好吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:02:07.610

您可能需要一个单词列表供您选择...曾几何时，我需要一个单词，然后我在 Google 上搜索了类似英语词典 txt 之类的内容...找到了一些并保留了对我来说最好的

然后很明显你会弄清楚你将如何管理你的列表......不经常使用只是读取磁盘，也许存储文件开头的行数，这样你就可以选择一个数字并只读取你需要......或者将它们存储在内存中以供经常使用，可能是一个数组

# blackberry - 如何在黑莓设备中安装黑莓的 .cod 文件

> ID：12857531
> 
> 赞同：0
> 
> 时间：2012-10-12T10:56:00.367
> 
> 标签：blackberry

我想在黑莓设备中告诉我的黑莓应用程序。我搜索了，发现您必须放置 .cod、.jad 和 .alx 文件，然后下载并安装 .jad 文件到设备中。我这样做了，但它说没有找到 Class net.rim.device.api.command.Command。

我想我必须添加更多文件或者我应该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:30:19.697

如果您创建了此 cod 文件，则在将其安装到黑莓设备之前，您需要先对其进行签名。看这个视频如何签名。

```
http://supportforums.blackberry.com/t5/Java-Development/Deploying-and-Signing-Applications-in-the-BlackBerry-JDE-Plug-in/ta-p/446877 
```

签署 cod 文件后，您可以通过 .COD 文件或 .JAD 文件将其安装在 BB 手机上。

如果您想使用 .JAD 文件安装，请将您的 .COD 文件也复制到 SDCARD 和 .JAD 中。请记住，如果您有超过 60KB 的 .COD 文件大小，则需要将其提取为 60KB 大小（使用 7 Zip 提取）并放入与 .jad 文件相同的文件夹中并从电话中打开 .Jad 文件并按照 istruction .

如果您想通过 .COD File 安装，那么您可能使用过 BB Eclipse Env。去

```
<installed Eclipse folder>/plugins\net.rim.ejde.componentpack<SDK Ver>\components\bin 
```

并将您的 cod 文件粘贴到 bin 文件夹中。现在打开命令提示符指向此文件夹并在通过 USB 将您的 BB 电话连接到计算机之前使用此命令

```
JavaLoader load <cod file name> 
```

点击此链接获取更多指导

```
 http://www.bbgeeks.com/blackberry-guides/blackberry-guide-how-to-install-third-party-applications-onto-your-blackberry-88400/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T19:47:23.970

带有 alx 文件的 cod 文件用于通过 USB 电缆进行桌面安装。启动 BB 桌面管理器，指定 alx 文件，BB 桌面管理器将安装 cod 文件（在 alx 文件中描述）到连接的设备。

cod 文件和 jad 文件用于无线安装。设备在浏览器中打开 jad 文件，下载并安装 jad 文件中描述的所有 cod 文件。

就是这样。

# java - Eclipse Maven 更新导致 JVM 设置损坏

> ID：12857535
> 
> 赞同：1
> 
> 时间：2012-10-12T10:56:11.297
> 
> 标签：java, eclipse, scala, maven, m2eclipse

我有一个使用 maven 的 scala 项目设置（在 OSX、Juno 上运行）。由于某些莫名其妙的原因，运行 m2e 更新会导致 JVM 更改为 1.7 JRE（我的系统上不存在，并且未设置）。

特别是，当我将项目导入 eclipse 时（首先通过 sbt 生成项目之后），这似乎发生了：

在 .classpath

```
<classpathentry path="org.eclipse.jdt.launching.JRE_CONTAINER" kind="con"></classpathentry> 
```

改为：

```
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7">
    <attributes>
        <attribute name="maven.pomderived" value="true"/>
    </attributes>
</classpathentry>
<classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER">
    <attributes>
        <attribute name="maven.pomderived" value="true"/>
    </attributes>
</classpathentry> 
```

`org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7`不存在（系统有1.6）。

听起来 m2e 正在写这个，但我似乎无法找到如何/为什么，以及我可以在哪里更改此设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:08:00.130

您的 POM 可能包含类似

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <source>1.7</source>
        <target>1.7</target>
    </configuration>
</plugin> 
```

这将导致 m2e 更新您的项目以使用 Java 7。更改`<source>1.7</source>`为`<source>1.6</source>`（当然，同样适用于`<target>`），您应该准备好了。

# android - How to move up text fields in a scroll view when on focus for input

> ID：12857540
> 
> 赞同：0
> 
> 时间：2012-10-12T10:56:25.890
> 
> 标签：android, android-layout

I have the following activity as rendered from a 320 x 480 low-density screen (don't mind the black strip on the right, it's a problem with the screen capture).

![enter image description here](../Images/7d9bf372c387f67c5d02da33851125e5.png)

The `EditText`s are enclosed in a `ScrollView`--there's six of them, actually. The sign up button shares a `LinearLayout` with the `ScrollView` via weight measurement, while everything else is positioned via a `RelativeLayout`. When I tap on the "E-mail" text field (the fourth one), this is what shows:

![enter image description here](../Images/56c1c2e884d3b2cf6d4c651c7860c8d2.png)

My question is, how can I make the parent `RelativeLayout` move up and not just the `ScrollView` to make the e-mail text field more visible? Also, the hint of the sign-up button there is quite ugly. Is there any way I can avoid that? Here's the XML code for the layout.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bg_320x480">

    <TextView android:id="@+id/signup_logo_txt"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#0a6698"
        android:textColor="#ff7f00"
        android:text="Blackened App Name"
        android:textStyle="bold"
        android:textSize="10pt"
        android:gravity="center"
        android:padding="8dp"
        />

    <ImageView android:id="@+id/signup_icons_ghost_img"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/icons_ghost_320x112"
        android:layout_below="@id/signup_logo_txt"
        android:contentDescription="lalalala"
        android:layout_marginTop="-21dp"
        />

    <TextView android:id="@+id/signup_tagline_txt"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="The easiest way to find a mobile plan that best suits how you use your phone."
        android:textColor="#000"
        android:textSize="5pt"
        android:gravity="center"
        android:layout_below="@id/signup_logo_txt"
        android:layout_marginTop="10dp"
        />

    <TextView android:id="@+id/signup_getstarted_txt"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Sign up and let's get started!"
        android:textColor="#0a6998"
        android:textSize="6pt"
        android:textStyle="bold"
        android:gravity="center"
        android:layout_below="@id/signup_tagline_txt"
        android:layout_marginTop="6dp"
        />

    <LinearLayout android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:weightSum="1.0"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_below="@id/signup_getstarted_txt"
        >
        <ScrollView android:id="@+id/signup_fields_view"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight=".8">
            <LinearLayout android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                >
                <EditText android:id="@+id/signup_name_fld"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:singleLine="true"
                    android:hint="Navn"
                    android:layout_marginTop="5dp"
                    />

                <EditText android:id="@+id/signup_carrier_fld"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:singleLine="true"
                    android:hint="Nuvaerende mobilselskab"
                    android:layout_marginTop="3dp"
                    />

                <EditText android:id="@+id/signup_plan_fld"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:singleLine="true"
                    android:hint="Mobilforbrug i kroner"
                    android:layout_marginTop="3dp"
                    />

                <EditText android:id="@+id/signup_email_fld"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:singleLine="true"
                    android:hint="E-mail"
                    android:layout_marginTop="3dp"
                    />

                <EditText android:id="@+id/signup_verify_email_fld"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:singleLine="true"
                    android:hint="Bekraeft e-mail"
                    android:layout_marginTop="3dp"
                    />

                <EditText android:id="@+id/signup_mobile_number_fld"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:singleLine="true"
                    android:hint="Mobilnummer"
                    android:layout_marginTop="3dp"
                    />
            </LinearLayout>
        </ScrollView>

        <Button android:id="@+id/signup_signup_btn"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight=".2"
            android:text="SIGN UP"
            android:textColor="#fff"
            android:layout_gravity="center"
            android:layout_marginBottom="8dp"
            />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:01:03.580

`android:windowSoftInputMode="adjustPan"`我的事情你没有设置在清单文件的活动中调整 pan.set

# ruby-on-rails - How to execute :action before rendering its view using "render" in Rails?

> ID：12857541
> 
> 赞同：2
> 
> 时间：2012-10-12T10:56:35.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3

I understand that `render :action` only renders an action's view. But I was wondering.. Is there no easy way to execute the code in that action before its view is rendered?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T12:29:40.840

如果您尝试在两个不同的控制器中重用逻辑，为什么不将该逻辑从其当前控制器中拉出到更可重用的东西中，例如辅助方法或类？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:11:15.557

就在这里。

```
class TestolaController < ApplicationController
  def foo
    redirect_to :action => "bar"
  end

  def bar
    puts "in bar"
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:41:00.820

```
 def foo
    bar
  end

  def bar
    puts "in bar"
  end 
```

# stored-procedures - Procedure to recreate changes to user permissions

> ID：12857545
> 
> 赞同：1
> 
> 时间：2012-10-12T10:56:51.757
> 
> 标签：stored-procedures, sap-ase

I encountered a problem yesterday. When I recreate a stored procedure which selects data from a view, the permissions have been revoked for view objects (like used tables in view) for all users except for the current user. For example;

The version of sybase ase is 12.5

Procedure;

```
drop proc testproc
go
create proc testproc
as 
begin 
....
    select * from testView
....
end
go
grant exec on testproc to public
go 
```

View;

```
create view testView as
   select * from testTable
go
grant all on testView to public
go 
```

And the error is

> SELECT permission denied on object 'testTable', database 'Mytest', owner 'dbo'.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:21:41.397

我不认为您将视图创建为 DBO。如果 testTable 是 DBO，为什么您的视图属于另一个用户？

# c# - Facebook messages in the windows application C#

ID：12857547

赞同：1

时间：2012-10-12T10:56:52.020

标签：c#, facebook

# asp.net - passing gridview particular row datas to another page in asp.net?

> ID：12857548
> 
> 赞同：-1
> 
> 时间：2012-10-12T10:56:52.820
> 
> 标签：asp.net

i want to set session in login page and want to pass one page girdview data to another page.

```
slno  title     author    publication    takenby
  1    book1    author1   pub1           sendrequest (button) 
```

Above image showing gridview. when i click the Request Book button(1st one). it will redirect to sendrequest.aspx page. and have to bring that row data (i.e)

```
slno=1
title=book1
Author=author1
publication=publ 
```

i tried below code user.aspx.cs

```
 protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
            {
                string user = (string)(Session["User"]);
                if (e.CommandName.Equals("SendRequestCmd"))
                {
                    if (user == null)
                    {
                        Session["slno"] = null;
                        Session["bookname"] = null;
                        var clickedRow = ((Button)e.CommandSource).NamingContainer as GridViewRow;
                        // now access the cells like this
                        SlNo = clickedRow.Cells[0].Text;
                        Session["slno"] = SlNo.ToString();
                        BookName = clickedRow.Cells[1].Text;
                        Session["bookname"] = BookName.ToString();
                    }
                }
            } 
```

sendquest.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
        {
            string slno = "", bookname = "";
            slno = (string)(Session["slno"]);
            bookname = (string)(Session["bookname"]);
            if (slno == null || bookname == null)
            {
                Response.Write("serial no: " + slno + "\nbookname: " + bookname);
            }
        }
        protected void Logout()
        {
            Session.Clear();
        } 
```

but i got error in

```
slno=(string)(Session["slno"]);
bookname=(string)(Session["bookname"]); 
```

why? anybody correct it? else say better way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:05:30.050

如果不发布您的错误，就很难看出问题所在。您可以检查您的应用程序中是否启用了会话。

另一种方法（可能更好）是仅将 id/slno（通过 QueryString）传递到您的其他页面，然后在该阶段执行查找以获取您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:08:55.730

我一定会为预订创建一个类型（类）

具有 `slno title author publication`属性和

```
public class Booking
{
    public Booking()
    {
        //
        // TODO: Add constructor logic here
        //
    }
    public int slno { get; set; }
    public string Title { get; set; }
    public string author { get; set; }
    public string publication { get; set; }

} 
```

设置预订类型对象的所有属性并在会话中传递该对象

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        string user = (string)(Session["User"]);
        if (e.CommandName.Equals("SendRequestCmd"))
        {
            if (user == null)
            {
                Booking b = new Booking();
                b.slno = clickedRow.Cells[0].Text;
                b.Title = BookName.ToString();

                Session["Booing"] = b;

            }
        }
    } 
```

并且在接收端，只需将该会话值再次放入该对象中，并通过使用带有对象名称的点来访问每个属性。

```
 Booking b=(Booking)Session["Booking"]
       int slno=b.slno;
    string Title=b.Title; 
```

如果不发布错误就不可能给出建议或更正，我的回答是如何使用会话将多个值从一个页面传递到另一个页面。

谢谢

# simulink - Simulink Slip Rate Control (ABS Modelling)

> ID：12857557
> 
> 赞同：1
> 
> 时间：2012-10-12T10:57:44.940
> 
> 标签：simulink

I am trying to limit one input (Tb, which is a step input) while comparing some other variable (s, calculated in the model) to a set of conditions: [https://www.dropbox.com/s/4y2ni6dd1bf6ui9/11.jpg](https://www.dropbox.com/s/4y2ni6dd1bf6ui9/11.jpg)

The picture shows the variation of Tb as required for a give s curve

How do i implement this logic in a simulink model. I need to add this logic to an existing model.

# java - 寻找继承解决方案

> ID：12857561
> 
> 赞同：1
> 
> 时间：2012-10-12T10:57:57.737
> 
> 标签：java, inheritance, interface

这是我在 Java 中的场景：

```
interface I{}
class A implements I{}
class B extends A{} 
```

那么，现在哪个类需要实现接口的 I 方法呢？如果 A 类和 B 类共享实现怎么办？最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T10:59:57.573

`class A`必须提供所有实现，因为它不是`abstract`. 有关更多详细信息，请参见[此处](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)。

`class`B 可以覆盖任何/所有这些方法。

如果您制作`A`抽象（作为一个类），那么它可以为`abstract`接口中的这​​些方法提供方法（基本上只是将它们声明为`abstract`）并`B`提供唯一的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:01:44.173

1）A类必须实现接口I的方法。

2) 但是，如果需要，B 类可以覆盖这些定义。

3) 如果 A 类未实现，则应将其声明为抽象类，在这种情况下，B 类应实现这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:00:24.097

只需要在A类中实现I接口即可。可选地，您可以在 B 类中覆盖该实现，但如果您不这样做，两个类的行为方式将相同（使用 A 实现）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T11:23:45.573

声明`implements`您承诺该类将实现某些接口。声明`extends`您允许自己重用基类的实现。`extends`暗示`implements`。

因此，在您的情况下，您承诺`A`将实施`I`. 接下来，您承诺`B`也会实施`I`，但将使用`A`' 实施作为基础。

因此，您的模式假设与作为源`B`共享一些实现。如果这是你想要的，那没关系。`A``A`

你也可以：

1）`class B implements I`在这种情况下，状态`B`将是它自己的。

2）在一些第三类中持有大部分实现，例如`Base`，如下所示

```
interface I {}
class Base implements I {}
class A extends Base{}
class B extends Base{} 
```

这样`A`，`B`将享有平等的权利。

3）您可以在任意类中保存实现并使用聚合和装饰它：

```
interface I {
   String method1(String a);
   String method2(String a);
}
class ImplementationHolder1 // does not implement I!
{ 
   String method1impl(String a) {};
}
class ImplementationHolder2 // does not implement I!
{ 
   String method2impl(String a) {};
}

class A implements I {
     ImplementationHolder1 h1;
     ImplementationHolder2 h2;
     String method1(String a) {
         return h1.method1impl();
     };
     String method2(String a) {
         return h2.method2impl();
     };
} 
```

请记住，`abstract`如果类没有完全实现接口，则应该创建类。

如果它不符合您的需求，您也可以覆盖后代类中的任何基类实现。

# javascript - Jquery Modal window - Modal property breaks code

> ID：12857562
> 
> 赞同：0
> 
> 时间：2012-10-12T10:58:00.087
> 
> 标签：javascript, jquery, html, forms, modal-dialog

I hope someone can help. I am missing some logic and styles while I am running the form in JQuery modal window with the 'modal' property is set to 'true'. I am trying to utilize the form from [http://jqueryui.com/dialog/#modal-form](http://jqueryui.com/dialog/#modal-form).

The same code used outside modal window is running correctly. I am not sure how to fix it and decided to share it with you.

I created a page in JSFiddle - [http://jsfiddle.net/vladc77/GcQRg/16](http://jsfiddle.net/vladc77/GcQRg/16) to show the code. However, the modal window cannot be ran from there. As a result, I uploaded the same test in here - [http://www.vladcdesign.com/modalWindow](http://www.vladcdesign.com/modalWindow)

When I set (modal: true) then I am getting the following problems.

1.The check boxes in work hours form should enable/disable menus to set the time

2.“More” check box should show/hide a text field

3.I lost ability to set margins between elements in Hours settings form. Now all menus are touching each other even though I use margins styles. They just don’t apply.

All of these issues are present only while I run this DIV in a modal window. It works OK outside the modal window. I am wondering if someone can help and explain what is wrong with the code. Any advice is highly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T09:16:48.527

查看小提琴和您在网站上发布的示例，您会收到以下错误：

> 未捕获的 ReferenceError：未定义 closedHours

问题似乎来自这一行：

```
$(this).append(' <span class="closed custom-checkbox"><input type="checkbox" name="closed" value="closed" class="closed" id="closedHoursElement" onchange="closedHours()"><span class="box"><span class="tick"></span></span></span>Closed'); 
```

此外，您无法在小提琴上加载对话框的原因是您以错误的顺序包含 JS 文件。应该是jquery，jquery ui，然后是jquery ui.selectmenu。

您对复选框的更改功能也有一个错误，应该是这样的：

```
$('input[type=checkbox]').change(function() {
    if (!this.checked) {
        $(this).parent().siblings('select').removeAttr("disabled");
    }
    else {
        $(this).parent().siblings('select').attr('disabled', 'disabled');
    }
}); 
```

即使我改变了所有这些，复选框仍然不起作用，所以我删除了您的自定义 jquery 和 jquery ui 引用。当我这样做时，它们工作得很好，所以您为自定义这些所做的事情就是导致您的问题的原因。[您可以在此处](http://jsfiddle.net/bhayden1/GcQRg/17/)查看我的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T09:01:23.723

第**一个** `$(document).ready(function(){});` **和第二个** `$(function() { });` **是相同**的，代码将按照它们在这些块中的顺序执行。

但是`$(window).load(function(){ });` **有点不同**，它稍后会执行。检查这篇[文章](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)，看看有什么不同。

您可以通过将单击事件定义为“打开模式窗口”按钮来进行一些实验，并在触发时执行所有绑定：

```
$('#create-user').bind('click',function(e){
  // To avoid navigating by link
  e.preventDefault();
  e.stopPropagation();
  // Do every binding / appending 
  // $('.workDayHours').each(function() { ...
}); 
```

# javascript - dojo/on with mouseenter，mouseleave 在 Google Chrome 中不起作用

> ID：12857569
> 
> 赞同：1
> 
> 时间：2012-10-12T10:58:25.003
> 
> 标签：javascript, html, google-chrome, dojo, dom-events

我对 dojo/on 和处理 mouseenter 和 mouseleave 有问题。它对我不起作用......我准备了示例代码：

```
<!doctype html>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.8/dojo/dojo.js" data-dojo-config="async: 1"></script>
    </head>
    <body>
        <div id="test">TEST</div>
    </body>
</html>
<script type="text/javascript">
require(["dojo/dom", "dojo/on","dojo/domReady!"], function(dom, on) {
    on(dom.byId('test'), 'mouseenter', function() { alert('12'); });
});
</script> 
```

如果您尝试在 Chrome 中打开它，它不起作用，但如果您在 Opera、FF 或 IE 中打开它，它就可以正常工作。我做错了什么还是有其他方法可以在 mouseenter 和 mouseleave 上使用？一遍又一遍地在 Chrome 中工作，但想留在进入和离开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:11:05.233

使用模块的[扩展事件](http://livedocs.dojotoolkit.org/dojo/on#extension-events)[`dojo/mouse`](http://livedocs.dojotoolkit.org/dojo/mouse)：

```
require(["dojo/dom", "dojo/on", "dojo/mouse"], function(dom, on, mouse) {

    on(dom.byId('test'), mouse.enter, function() { alert('12'); });

}); 
```

看看它在这个 jsFiddle 中是如何工作的：http: [//jsfiddle.net/phusick/gUNuC/](http://jsfiddle.net/phusick/gUNuC/)

# cordova - 我在哪里可以获得最新版本的 Phonegap/Cordova？(2.2.0)

> ID：12857571
> 
> 赞同：2
> 
> 时间：2012-10-12T10:58:28.687
> 
> 标签：cordova

如何获得最新版本的 PhoneGap / Cordova

正如我从他们的网站上看到的，应该有一个 2.2.0 版本（未发布）

[https://issues.apache.org/jira/browse/CB#selectedTab=com.atlassian.jira.plugin.system.project:summary-panel](https://issues.apache.org/jira/browse/CB#selectedTab=com.atlassian.jira.plugin.system.project%3asummary-panel)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:30:41.417

最新的二进制版本始终可以从[phonegap.com 获得](http://phonegap.com/download#)。最新的源代码版本始终可以从[Apache.org](https://www.apache.org/dist/incubator/cordova/)获得。

直到星期一，我们才会标记 2.2.0 候选版本 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:58:26.550

[如果您想要比您在此处](http://phonegap.com/download)获得的已发布版本（2.1 是当前活动版本）更新的版本，那么您需要前往[cordova/phonegap github](https://github.com/apache/incubator-cordova-ios)并下载该版本。

编辑：我提供的链接为您提供了仍在测试中的最新版本，不能保证安全。西蒙在他的回答中提供的链接是最新的发布/发布候选，并且是人们应该使用的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-24T05:39:16.643

```
sudo npm install -g phonegap 
```

[http://registry.cnpmjs.org/phonegap](http://registry.cnpmjs.org/phonegap)

```
{"_id":"phonegap","_rev":"520762","name":"phonegap","description":"PhoneGap command-line interface and node.js library.","dist-tags":{"3.5.0-0.19.23":"3.5.0-0.19.23","latest":"3.5.0-0.21.14"}, 
```

3.5.0-0.19.23 是最新版本。

# silverlight - Silverlight 4 DataGrid 是否支持这种分组？

> ID：12857573
> 
> 赞同：1
> 
> 时间：2012-10-12T10:58:33.893
> 
> 标签：silverlight, datagrid, silverlight-4.0

Silverlight DataGrids 是否可以进行这种分组？

![Silverlight 数据网格分组](../Images/ba6d0d3b799d888b8ba02e5dcf7f2611.png)

第一列的前三行合并为一个块，因为它们的数据相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:31:10.993

不，默认 Silverlight 数据网格控件不支持这种分组，但是您可以使用模板列获得类似的结果：

首先，您应该创建一个包含分组数据的类，如下所示：

```
MySourceClass
{
   string GroupColumn {get;set;}
   List<object> GroupedColumn1 {get;set;}
} 
```

然后将您的 DataGrid 绑定到一个集合`MySourceClass`（或您所称的任何名称），并`TextColumn`为 Column1 创建一个，并为 Column2创建一个`TemplateColumn`具有`ListBox`或类似的，并将源绑定`Listbox`到`GroupedColumn`属性。

您可能需要对样式进行一些思考，但我很确定您可以使用这种方法来完成一个坚实的外观。

编辑：或者你可以使用默认的 DataGrid 分组，她是一个很好的例子： http: [//www.codeproject.com/Articles/134340/Grouping-Records-in-Silverlight-DataGrid-using-Pag](http://www.codeproject.com/Articles/134340/Grouping-Records-in-Silverlight-DataGrid-using-Pag)

# c# - c# 相当于 fscanf()

> ID：12857577
> 
> 赞同：0
> 
> 时间：2012-10-12T10:58:51.723
> 
> 标签：c#, scanf

> **可能重复：**
> [寻找与 scanf 等效的 C#](https://stackoverflow.com/questions/472202/looking-for-c-sharp-equivalent-of-scanf)

我正在尝试将一行代码从 c 转换为 c#

```
fscanf(fp, "%d %d\n", &x,&y); 
```

c# 中有 fscanf() 的等效函数吗？我如何转换这行代码？

更新： fp 是指向包含这样输入的文本文件的文件指针

```
0 0 
```

我需要将整数输入分别保存到 x 和 y。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:32:26.157

```
var parts = streamReader.ReadLine().Split(new char[]{' '}, StringSplitOptions.RemoveEmptyEntries);
int x = Int32.Parse(parts[0]);
int y = Int32.Parse(parts[1]); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-12T11:08:08.077

```
String.Format("someFormatString", MyFileStreamReader.ReadLine()); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-12T11:08:41.530

查看[BinaryReader](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)类。在 C# 中，您将使用 Stream 对象代替 C FILE 指针。像这样的东西应该工作

```
System.IO.Stream fp = System.IO.File.OpenRead(@"C:\Path\To\My\File.txt");
double x, y;
using (var reader = new System.IO.BinaryReader(fp))
{
    x = reader.ReadDouble();
    y = reader.ReadDouble();
} 
```

# java - ImageJ - 即使遇到错误如何继续批处理

> ID：12857581
> 
> 赞同：0
> 
> 时间：2012-10-12T10:58:55.827
> 
> 标签：java, error-handling, batch-processing, imagej

我在 ImageJ 中编写了一个宏来在 BMP 图像文件列表上运行批量“测量”。我正在使用 headless.jar 以无头模式在远程 linux 机器上运行代码。

每当 ImageJ 在读取/加载列表中的图像时遇到错误或异常时，它都会退出该过程。因此，我必须不断监控该过程并手动强制 ImageJ 跳过该文件。

有没有一种方法可以强制 ImageJ 继续该过程，即使它遇到错误/异常？并报告文件名可能在日志或其他文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:23:43.060

在 ImageJ 宏语言中无法显式处理异常。但是，您可以通过在进行有问题的宏调用之前检查先决条件等来防止某些类型的异常。

例如，如果您的文件列表包含不存在的文件，您可以使用`File.exists(path)` [[1]](http://imagej.nih.gov/ij/developer/macro/functions.html#File.exists)确保文件存在，然后再尝试打开它。

当然，并非所有错误情况都可以通过这种方式轻松检查（例如，格式错误的 BMP），因此我同意[medPhys-pl](https://stackoverflow.com/users/1128171/medphys-pl)的观点，即将您的宏重写为 Imagej 插件是最完整的解决方案。`Plugins > Macros > Record`您可以使用设置为以插件模式而不是宏录制的宏录制器 ( ) 来获得良好的开端。[一旦你有相关的命令要执行，你可以使用Fiji](http://fiji.sc/)的[Script Editor](http://fiji.sc/Using_the_Script_Editor)轻松地将它们打包到一个插件中：

1.  `File > New > Script`
2.  `Language > Java`
3.  `Templates > Java > Bare PlugIn`
4.  将您的命令粘贴到`run`方法中。

有关编写 ImageJ 插件的更多详细信息，请参阅 Fiji wiki 的[开发插件简介。](http://fiji.sc/Introduction_into_Developing_Plugins)

# android - 微调项目对点击没有影响!!!，列表只保留在屏幕上

> ID：12857582
> 
> 赞同：0
> 
> 时间：2012-10-12T10:59:04.677
> 
> 标签：android, android-spinner, onitemclicklistener

我有一个活动，它从用户那里获取银行名称和帐号。银行名称和相应的帐号存储在数据库中。现在在另一个活动中有两个微调器，其中一个获取银行名称并用它们填充自己，另一个获取与该银行对应的帐号。我成功填充了微调器。我遇到的唯一问题是，第一个微调器中的条目（包含银行名称）不可点击，因此第二个微调器也变得无用。我无法理解为可能是什么原因。这是微调器的代码：

```
 // in onCreate() function
   // for the spinner holding bank name
    Cursor cursor = myDatabase.getData();
    cursor.moveToFirst();
    myAdapter = new SimpleCursorAdapter(AddTransaction.this,
                R.layout.spinnerlayout, cursor,
                new String[] { DatabaseClass.KEY_BANK_NAME_ID },
                new int[] { R.id.bankName },
                SimpleCursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
    mySpinner.setAdapter(myAdapter);

    get_datafrom_spinner = cursor.getString(cursor
                .getColumnIndex(DatabaseClass.KEY_BANK_NAME_ID));
        // Toast.makeText(AddTransaction.this, get_datafrom_spinner,
        // Toast.LENGTH_LONG).show();

        // mySpinner.setOnItemSelectedListener(this);

    myDatabase.close();

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int position,
        long arg3) {
    // TODO Auto-generated method stub
    try {
        myDatabase.open();

        int pos = position;
        Cursor cursor = (Cursor) myAdapter.getItem(pos);
        bank_name = cursor.getString(cursor // name of the bank
                                            // selected
                .getColumnIndex(DatabaseClass.KEY_BANK_NAME_ID));
        myAdapter = new SimpleCursorAdapter(AddTransaction.this,
                R.layout.spinnerlayout, cursor,
                new String[] { DatabaseClass.KEY_BANK_NAME_ID, },
                new int[] { R.id.bankName },
                SimpleCursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        mySpinner.setAdapter(myAdapter);

        // Toast.makeText(AddTransaction.this, s,
        // Toast.LENGTH_SHORT).show();

        // returns the account numbers corresponding to this bank name
        Cursor c = myDatabase.getAccountData(bank_name);
        c.moveToFirst();

        myAdapter_for_account = new SimpleCursorAdapter(
                AddTransaction.this, R.layout.account_number_spinner, c,
                new String[] { DatabaseClass.KEY_ACCOUNT_NUMBER_ID },
                new int[] { R.id.accNum },
                SimpleCursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

        mySpinner_for_account.setAdapter(myAdapter_for_account);

        // position of the the clicked in the spinner for account
        int position_account = mySpinner_for_account
                .getSelectedItemPosition();

        Cursor cursor2 = (Cursor) myAdapter_for_account
                .getItem(position_account);

        // holds the account number for the spinner item selected
        account_number_selected = cursor2.getString(cursor2
                .getColumnIndex(DatabaseClass.KEY_ACCOUNT_NUMBER_ID));

        // Toast.makeText(AddTransaction.this, account_number_selected,
        // Toast.LENGTH_LONG).show();
        Cursor balance = myDatabase
                .getAmountfor_Account(account_number_selected);
        balance.moveToFirst();

        /*
         * c = myDatabase.getAmountfor_Account(account_for_spiiner_account);
         * c.moveToFirst();
         */

        // get the balance as a string

        balance_in_account = balance.getString(balance // <--
                .getColumnIndex(DatabaseClass.KEY_CURRENT_BALANCE_ID));

        // Toast.makeText(AddTransaction.this, balance_in_account,
        // Toast.LENGTH_SHORT).show();

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    myDatabase.close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:04:11.410

```
Spinner s = (Spinner) findViewById(R.id.spinner_id);
s.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){

@Override
public void onItemSelected(AdapterView adapter, View v, int i, long lng) {
//do something here
}

@Override
public void onNothingSelected(AdapterView arg0) {
//do something else
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:28:49.807

终于让它工作了，问题是我在同一个 onItemSelected() 函数中声明了两个微调器，每个微调器都应该有自己的 onItemSelected 函数才能工作。

# php - php根据访问者的语言重定向的最佳方法

> ID：12857587
> 
> 赞同：1
> 
> 时间：2012-10-12T10:59:14.470
> 
> 标签：php, redirect, region

我想确定访问者的区域。我的网站有 4 种语言版本，我想检测访问者是否从英语国家或俄语国家或阿拉伯语或西班牙语国家访问我的网站。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:09:38.583

这就是我们在脚本中用来进行类似检测的方法：

```
function get_preferred_lang() {
    if (isset($_SERVER["HTTP_ACCEPT_LANGUAGE"])) {
        preg_match_all('#([a-z-]+) *(?:; *q=([0-9.]+))?#', strtolower($_SERVER["HTTP_ACCEPT_LANGUAGE"]), $matches);
        $accept = array_combine($matches[1], $matches[2]);
        foreach ($accept as $key => $val)
        $accept[$key] = $val == '' ? 1.0 : (float) $val;
        arsort($accept);
        return substr(array_shift(array_keys($accept)),0,2); 
      } else {
        return 'unknown';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:20:37.213

请使用 MaxMind API for PHP：

[指示](http://www.finalwebsites.com/forums/topic/how-to-use-maxmind-geoip-for-websites)

[下载](http://dev.maxmind.com/geoip/downloadable)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T11:10:22.507

您可以使用`$_SERVER['REMOTE_ADDR'];`获取用户 IP 地址并在此基础上使用此链接根据您的要求进一步进行[GEOIP](http://php.net/manual/en/book.geoip.php)

# php - 通过客户端用户交互控制 jquery 插件选项

> ID：12857589
> 
> 赞同：0
> 
> 时间：2012-10-12T10:59:15.780
> 
> 标签：php, javascript, jquery, html, dom

我在将一些客户端数据传递到第三方插件时遇到了一点困难。

我正在尝试获得一个插件选项来处理通过用户单击`<li>`下面的创建和填充的变量。

简短的：

我有一些 HTML 作为交互的处理程序。

```
<ul class="subpage-list" id="intro-subpage-list">
    <li data-slide="1">slide 1</li>
    <li data-slide="2">slide 2</li>
    <li data-slide="3">slide 3</li>
    <li data-slide="4">slide 4</li>
    <li data-slide="5">slide 5</li>
    <li data-slide="6">slide 6</li>
</ul> 
```

当用户单击任何一个时，`<li>`我有以下代码：

```
$("#intro-subpage-list li").click(function() {
    var slideID = $(this).attr('data-slide');

    $("body").css('overflow','hidden');
    $("#intro-overlay").fadeIn(1000,function() {
        $("#intro-subpage").show();
    });
}); 
```

JS交互后加载的HTML如下：

```
<div id="intro-overlay" class="overlay">
    <div id="overlay-close">X</div>
    <div id="loading"></div>
    <section id="intro-subpage">
        <div class="ls-layer">
            <img class="ls-bg" alt="layer1-background" src="/<? echo ASSETS . IMAGES . BGS . LIGHTSLIDER; ?>intro/1.jpg">
        </div>
        <div class="ls-layer">
            <img class="ls-bg" alt="layer2-background" src="/<? echo ASSETS . IMAGES . BGS . LIGHTSLIDER; ?>intro/2.jpg">
        </div>
    </section>
</div> 
```

加载和控制插件的代码如下：

```
$(".overlay section").layerSlider({
    autoStart:  false,
    imgPreload: true,
    slideDelay: '6000'
}); 
```

这个插件有一个名为“firstLayer”的选项，对我来说，它是一个非常有意义的选项，可以控制滑块根据`<li>`单击的内容加载正确的幻灯片。

我有一个名为 functions.php 的文件来处理 HTML，还有一个名为 jquery.php 的文件来处理插件和 JS。

如果我错过了任何重要的事情，请提出要求，我将使用这些详细信息编辑这篇文章。

提前致谢。

担。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:50:34.393

由于没有人能够帮助解决这个问题，我继续尝试再次尝试解决方案，我意识到创建自己的插件；虽然耗时，但它是最好的选择，因为我可以定制插件以完全按照我想要的方式工作。

感谢所有至少看过这个问题并可能思考过的人。

# java - 为什么 Tomcat 支持休眠？

> ID：12857594
> 
> 赞同：0
> 
> 时间：2012-10-12T10:59:32.537
> 
> 标签：java, jakarta-ee, servlet-container

为什么 Tomcat 支持休眠？Hibernate 是 JPA 的实现，但 Tomcat 不支持 Java EE。那么为什么我们可以在Tomcat中使用Hibernate呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:19:14.993

Tomcat 不*提供*Java EE 支持（这意味着它不包含 Java EE 各个部分的实现，显然，除了 servlet 部分），但这并不意味着它不能运行像 Hibernate 这样*提供*实现的代码的 JPA 并且没有 Tomcat 本身或其他库无法满足的其他 Java EE 依赖项。

# c# - 如何在 windows phone 中放置 xaml 控件以显示在辅助磁贴中？

> ID：12857596
> 
> 赞同：1
> 
> 时间：2012-10-12T10:59:37.877
> 
> 标签：c#, windows-phone-7.1

我想为我的 windows phone 应用程序创建一个辅助磁贴，它在我的主页中显示控件，例如，如何显示一个面板控件（其中包含内部图像）以显示在辅助磁贴中。

```
 public void CreateSecondaryTile()
    {
        ShellTile secTile = ShellTile.ActiveTiles.SingleOrDefault(x => x.NavigationUri.ToString().Contains("MainPage.xaml"));
        if (secTile == null)
        {
            StandardTileData fullTile = new StandardTileData()
            {
                //'*** Primary Tile Properties ***
                BackgroundImage = new Uri(controlName, UriKind.Relative),
                Count = DateTime.Now.Second,
                Title = "Front Title",

                //'*** Secondary Tile Properties ***
                BackBackgroundImage = new Uri("Background.png", UriKind.Relative),
                BackContent = "Back Content",
                BackTitle = "Back Title"
            };
            ShellTile.Create(new Uri("/MainPage.xaml", UriKind.Relative), fullTile);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T20:47:24.417

从您的控件生成图像

> /// /// 执行渲染和存储图像 /// /// 渲染 UIElement /// 存储图像的 Uri private static void RenderAndStoreImage(UIElement element, string uri) { try { var writeableBitmap = new WriteableBitmap(173, 173) ; writeableBitmap.Render(element, new TranslateTransform());
> 
> ```
>  using (var store = IsolatedStorageFile.GetUserStoreForApplication())
>   {           using (var stream = store.OpenFile(uri, FileMode.OpenOrCreate))
>       {
>           writeableBitmap.Invalidate();
>           writeableBitmap.SaveJpeg(stream, 173, 173, 0, 100);             }       }   }   catch (Exception ex)    {       Logger.Log(ex);     } 
> ```
> 
> }

创建辅助磁贴

[http://www.windowsphonegeek.com/articles/How-to-add-and-remove-Secondary-Tiles-in-Windows-Phone-apps](http://www.windowsphonegeek.com/articles/How-to-add-and-remove-Secondary-Tiles-in-Windows-Phone-apps)

# xcode - 使用 Handbrake CLI 的视频到图像序列

> ID：12857597
> 
> 赞同：2
> 
> 时间：2012-10-12T10:59:40.167
> 
> 标签：xcode, cocoa, command-line, video-processing

我正在尝试创建一个供内部使用的 Mac App，它获取用户指定的电影文件，将其转换为特定格式并将每一帧作为图像保存在硬盘上。我已经完成了转换部分，使用了很棒的 Handbrake CLI。

现在我试图找到一种方法将每一帧保存为图像，但我找不到这样做的方法。

似乎 ffmpeg 有一个命令可以将帧提取到图像中。以下将单个帧拉入五秒钟：

```
ffmpeg -i "infile.mp4" -r 1 -ss 00:00:05 -t 00:00:01 -vframes 1 -f image2 -y "image.jpg" 
```

**但是，我宁愿使用 QTKit 或 Handbrake CLI**，所以我不必将 ffmpeg 和 Handbrake 都添加到应用程序中。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:33:57.703

试试这个（用视频中每秒的帧数替换 25）

```
ffmpeg -i infile.mp4 -r 25 -f image2 /tmp/image-%4d.jpg 
```

然后使用 NSTask 从您的 xcode 项目中运行此命令

[下载 FFMPEG O.11.1 for mac osx](http://code.google.com/p/kakola/downloads/detail?name=video-tools-0.11.1-x86_64.dmg&can=2&q=)

[下载适用于 mac osx 的 FFMPEG git 版本](http://code.google.com/p/kakola/downloads/detail?name=video-tools-latest-git-x86_64.dmg&can=2&q=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:24:36.837

所以，在他们的 IRC 频道讨论之后，我确定你不能用 Handbrake 做到这一点。

但是，这是使用 ffmpeg 的一种相对轻松的方式：

```
NSNotificationCenter *defaultCenter = [NSNotificationCenter defaultCenter];
outputPipe = [NSPipe pipe];
taskOutput = [outputPipe fileHandleForReading];
current_task = [[NSTask alloc] init];

NSString *resourcePath = [[NSBundle mainBundle] resourcePath];

NSString *stillName = [NSString stringWithFormat:@"%@_still%d.png", [MY_FILE substringToIndex:([draggedFile length]-4)], MY_STILL_NUMBER];

[current_task setLaunchPath: [NSString stringWithFormat:@"%@/ffmpeg", resourcePath]];

// save just frame at current time
// by leaving -ss before the -i, we enable direct indexing within ffmpeg, which saves a still in about a second, rather than a minute or so on a long video file
NSArray *arguments = [NSArray arrayWithObjects:@"-ss", currentFrameTime, @"-i", draggedFile, @"-vframes", @"1", @"-f", @"image2", stillName, nil];

[current_task setArguments:arguments];
[current_task setStandardInput:[NSPipe pipe]];
[current_task setStandardOutput:outputPipe];
[current_task setStandardError:outputPipe];

[defaultCenter addObserver:self selector:@selector(saveTaskCompleted:) name:NSTaskDidTerminateNotification object:current_task];

[current_task launch];
[taskOutput readInBackgroundAndNotify]; 
```

所以，我正在使用 Handbrake 任务（转换视频），然后使用另一个任务来保存静止图像。我可以只使用 ffmpeg，但我喜欢 Handbrake，所以我会以这种方式利用 2。

希望这可以帮助那里的任何人。

# android - ActionbarSherlock 列表导航 - 滚动到顶部/聚焦第一行

> ID：12857598
> 
> 赞同：2
> 
> 时间：2012-10-12T10:59:40.213
> 
> 标签：android, actionbarsherlock

我需要一些有关夏洛克列表导航的帮助。目标：当您打开导航时，我想滚动到顶部/焦点到第一行，因此第一项始终可见。问题：现在当列表有更多项目作为屏幕可以显示时（通常在横向模式下），当我选择即第 4 个项目然后打开列表时，第一个项目不可见，它集中在最后一个选定的项目上。它适用于我在自定义微调器中使用下面的代码，但是当我尝试在 IcsSpinner 中覆盖相同的方法时它没有工作。

代码：

```
/** 
```

* Cusrom 微调器类 - 打开时始终关注第一项 * */ 类 CustomSpinnerSelection 扩展 Spinner {

```
private boolean mToggleFlag = true;

//some constructors here

@Override
public int getSelectedItemPosition() {
    // this toggle is required because this method will get called in other
    // places too, the most important being called for the
    // OnItemSelectedListener
    if (!mToggleFlag) {
        return 0; // get us to the first element
    }
    return super.getSelectedItemPosition();
}

@Override
public boolean performClick() {
    // this method shows the list of elements from which to select one.
    // we have to make the getSelectedItemPosition to return 0 so you can
    // fool the Spinner and let it think that the selected item is the first
    // element
    mToggleFlag = false;
    boolean result = super.performClick();
    mToggleFlag = true;
    return result;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:03:49.210

既然您已经使用微调器完成了它，那么有一种可能的方法来做到这一点。

您可以为操作栏使用自定义视图，其中包含一个用于列表导航的微调器，并使用您的自定义微调器类而不是默认微调器。

自定义视图 xml 可能如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

    <Spinner
    android:id="@+id/actionBarSpinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:entries="@array/default_list" />

</LinearLayout> 
```

您将需要从代码中启用和设置自定义视图。

```
View view = this.getLayoutInflater ().inflate (R.layout.actionbar_customview, null);
actionBar.setCustomView (view);
actionBar.setDisplayShowCustomEnabled (true); 
```

此外，您可以保存微调器以设置任何侦听器或执行任何其他操作。

```
Spinner actionBarSpinner = ((Spinner) view.findViewById (R.id.actionBarSpinner)); 
```

只是代替 Spinner，它将是您的 CustomSpinner 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:53:50.250

我不确定这是否是你的情况，但我发现了关于微调器的一件事：有时如果你在 onCreate() 上填充它们，就会发生一些低级的棘手问题。请记住，Android 是基于事件的，因此将数据放入 onCreate 实际上可能不会填充微调器。绘制屏幕后，微调器有时会被填充！

因此，如果发生这种情况，请尝试在 onCreate 之后调用 onWindowFocused 或其他任何调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:58:57.900

setSelection 可能是加载微调器并聚焦第一个项目的唯一方法。尝试这个：

```
Spinner s = (Spinner) findViewById(R.id.spinner_id);
int i = adapter.getPosition("blue");
s.setSelection(i); 
```

# javascript - 使用 JS 访问用户的历史记录

> ID：12857601
> 
> 赞同：3
> 
> 时间：2012-10-12T10:59:44.050
> 
> 标签：javascript, cross-browser, browser-history

**我不是在寻找代码/如何。只是知识。**

一位客户刚刚向我们提出一个问题：我们能否从横幅广告中访问用户的历史记录，以便根据他们的历史记录为他们提供一些有针对性的广告。

显然，这**提出了一个隐私问题**，但我需要给出一个很好的理由来说明为什么它在技术上不是一个可行的选择。

所以我有几个问题...

1.  哪些浏览器*仍然*（如果有）支持访问用户的历史记录，使用`window.history`.
2.  如果有的有，有的没有。那些不允许它的人什么时候不再允许它了？
3.  如果所有浏览器都允许（我还没有找到有效的脚本），为什么它不常用？

最后，在 Amazon.co.uk 上，然后我访问 Macrumors.com，广告根据我购买/看过的产品为我提供广告。我猜这只是基于 cookie/亚马逊实施的系统？

**只是为了说清楚：**

*   我知道这是一个隐私问题。我不是在寻找代码/方法（如上所述）
*   有一些方法可以“嗅探”页面中的已访问链接。
*   曾经有一种使用 JavaScript`history`对象的方法，可以列出历史记录中的所有对象（来自当前站点）。`history.length`现在仍然有效。我似乎记得有些浏览器只`undefined`为每个项目返回，有些则将它们作为不可读的`object`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T11:08:54.410

**不！**

没有浏览器（据我所知）可以合法地让您访问用户的浏览历史记录。

已经有一些[事件可以通过](https://developer.mozilla.org/en-US/docs/CSS/Privacy_and_the_:visited_selector)[利用浏览器的某些行为](http://www.theregister.co.uk/2011/12/05/browser_history_attack_revived/)来做到这一点。最近，在 Firefox 16 中存在一个[漏洞](https://blog.mozilla.org/security/2012/10/10/security-vulnerability-in-firefox-16/)，如果利用得当，您可以查看用户的浏览历史记录。

在您描述的情况下（亚马逊），是的，使用了 cookie。更准确地说，使用了[第三方 Cookie](http://www.ravelrumba.com/blog/third-party-cookies/)。

**更新：** 我对你的上一次编辑非常感兴趣（关于`history`过去完全开放），所以我试着回过头来。

![火狐 3.0.19](../Images/09f1e727b506b38ce40593f551d720a0.png)

![在此处输入图像描述](../Images/24bdffd50ba4e4d1b08ac93ecab1bbd0.png)

# python - Python - 如何检查 Redis 服务器是否可用

> ID：12857604
> 
> 赞同：42
> 
> 时间：2012-10-12T10:59:52.303
> 
> 标签：python, redis

我正在开发一个用于访问 Redis 服务器的 Python 服务（类）。我想知道如何检查 Redis 服务器是否正在运行。而且，如果不知何故我无法连接到它。

这是我的代码的一部分

```
import redis
rs = redis.Redis("localhost")
print rs 
```

它打印以下内容

```
<redis.client.Redis object at 0x120ba50> 
```

即使我的 Redis 服务器没有运行。

因为我发现我的 Python 代码只有在我使用我的 redis 实例执行**set()**或**get()时才会连接到服务器。**

所以我不希望使用我的班级的其他服务得到一个例外说

```
redis.exceptions.ConnectionError: Error 111 connecting localhost:6379\. Connection refused. 
```

我想返回正确的消息/错误代码。我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-19T06:38:54.383

检查 redis 服务器可用性的官方方法是 ping ( [http://redis.io/topics/quickstart](http://redis.io/topics/quickstart) )。

一种解决方案是将 redis 子类化并做两件事：

1.  在实例化时检查连接
2.  发出请求时在没有连接的情况下编写异常处理程序

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-12T13:23:26.200

如果要在启动时测试一次 redis 连接，请使用该`ping()`命令。

```
from redis import Redis

redis_host = '127.0.0.1'
r = Redis(redis_host, socket_connect_timeout=1) # short timeout for the test

r.ping() 

print('connected to redis "{}"'.format(redis_host)) 
```

该命令`ping()`检查连接，如果无效将引发异常。

*   注意 - 执行测试后连接可能仍会失败，因此这不会掩盖以后的超时异常。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-12T13:37:11.523

正如您所说，仅当您尝试在服务器上执行命令时才建立与 Redis 服务器的连接。如果您不想在不检查服务器是否可用的情况下继续前进，您可以向服务器发送随机查询并检查响应。就像是 ：

```
try:
    response = rs.client_list()
except redis.ConnectionError:
    #your error handlig code here 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-07-23T20:41:52.950

这里已经有很好的解决方案，但这是我对 django_redis 的快速而肮脏的解决方案，它似乎不包含 ping 功能（尽管我使用的是旧版本的 django 并且不能使用最新的 django_redis）。

```
# assuming rs is your redis connection
def is_redis_available():
    # ... get redis connection here, or pass it in. up to you.
    try:
        rs.get(None)  # getting None returns None or throws an exception
    except (redis.exceptions.ConnectionError, 
            redis.exceptions.BusyLoadingError):
        return False
    return True 
```

这似乎工作得很好。请注意，如果 redis 正在重新启动并且仍在加载保存磁盘上缓存条目的 .rdb 文件，那么它将抛出 BusyLoadingError，尽管它的基类是 ConnectionError，因此只需捕获它就可以了。

你也可以简单地 except on `redis.exceptions.RedisError`which 是所有 redis 异常的基类。

根据您的需要，另一种选择是创建获取和设置函数，以在设置/获取值时捕获 ConnectionError 异常。然后你可以继续或等待或任何你需要做的事情（引发一个新的异常或只是抛出一个更有用的错误消息）。

如果您绝对依赖于设置/获取缓存值（出于我的目的，如果缓存因我们通常必须“继续”而处于脱机状态），这可能无法正常工作，在这种情况下，有例外并让程序/脚本死亡并使redis服务器/服务恢复到可访问状态。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-09-15T15:02:10.963

当 redis 没有运行时，我还从 sockets 库中遇到了一个`ConnectionRefusedError`，因此我不得不将它添加到可用性检查中。

```
r = redis.Redis(host='localhost',port=6379,db=0)

def is_redis_available(r):
    try:
        r.ping()
        print("Successfully connected to redis")
    except (redis.exceptions.ConnectionError, ConnectionRefusedError):
        print("Redis connection error!")
        return False
    return True

if is_redis_available(r):
    print("Yay!") 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-07-21T17:00:18.800

可以通过对服务器执行 ping 命令来检查 Redis 服务器连接。

```
>>> import redis
>>> r = redis.Redis(host="127.0.0.1", port="6379")
>>> r.ping()
True 
```

使用该`ping`方法，我们可以处理重新连接等。为了了解连接错误的原因，可以按照其他答案中的建议使用异常处理。

```
try:
    is_connected = r.ping()
except redis.ConnectionError:
    # handle error 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-12-12T21:08:48.250

使用 ping()

```
from redis import Redis

conn_pool = Redis(redis_host)
# Connection=Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>

try:
    conn_pool.ping()
    print('Successfully connected to redis')
except redis.exceptions.ConnectionError as r_con_error:
    print('Redis connection error')
    # handle exception 
```

# java - 使用 JDOM/XML 创建 Java xml

> ID：12857606
> 
> 赞同：2
> 
> 时间：2012-10-12T10:59:55.347
> 
> 标签：java, xml, web-services, jdom

我在创建 xml 时遇到问题

```
 <c:condition>
        <a:condition>
            <fieldName>fieldName</fieldName>
            <fieldTest>fieldTest</fieldTest>
            <fieldValues>
                <fieldValue>fieldValue</fieldValue>
            </fieldValues>
        </a:condition>
        <operator>operator</operator>
        <a:condition>
            <fieldName>fieldName</fieldName>
            <fieldTest>fieldTest</fieldTest>
            <fieldValues>
                <fieldValue>fieldValue</fieldValue>
            </fieldValues>
        </a:condition>
    </c:condition> 
```

以上是给我的xml标签。

我需要在 java 中使用 JDOM/XML 创建这个标签。

所以我正在使用

```
Element complexCondition = new Element("c:condition"); 
```

创建“c:condition”标签的代码。

但我收到错误

```
org.jdom.IllegalNameException: The name "c:condition" is not legal for JDOM/XML elements: Element names cannot contain colons. 
```

所以不知道出了什么问题。因为我是 xml 和 JDOM 的新手。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:09:53.297

```
c: 
```

是命名空间前缀。你应该用命名空间创建你的元素。检查构造函数：

```
Element(java.lang.String name, java.lang.String prefix, java.lang.String uri)
  Creates a new element with the supplied (local) name and a namespace given by the supplied prefix and URI combination. 
```

# c# - jQuery确认后的运行方法

> ID：12857611
> 
> 赞同：0
> 
> 时间：2012-10-12T11:00:20.043
> 
> 标签：c#, jquery, asp.net, function

当我有一个带有yes和no按钮的jquery对话时，我将如何在后端运行一个方法来发送电子邮件，如下所示：

```
<script language="javascript" type="text/javascript">
        $(document).ready(function () {
            $("#dialog").dialog({
                autoOpen: false,
                modal: true
            });
        });

        $(".confirmLink").click(function (e) {
            e.preventDefault();
            var targetUrl = $(this).attr("href");

            $("#dialog").dialog({
                buttons: {
                    "Yes": function () {
                        $(this).dialog("close"),
                        SendEmail(),
                    window.location.href = targetUrl;
                    },
                    "No": function () {
                        $(this).dialog("close");
                    }
                }
            });

            $("#dialog").dialog("open");
        });
    </script>

<a class="confirmLink" href="emailsend.aspx"></a>
     <div id="dialog" title="Confirmation Required">
                    <p>
                        Do you want to send an email?</p>
                </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:13:04.343

您必须通过 ajax 与后端进行通信，然后后端将发送电子邮件；有点像这样：

```
function SendEmail(email, content)
{
    var data = "email=" + escape(email) + "&content=" + escape(content);
    $.ajax({
        url: "sendemail.asp",
        type: 'POST',
        data: data,
        success: function(data){
            alert("Hurray");
        },
        error: function() {
            alert("Oh noes! It went wrong");
        }
    }); 
} 
```

# java - 闰年法

> ID：12857612
> 
> 赞同：-2
> 
> 时间：2012-10-12T11:00:23.300
> 
> 标签：java

我试图让 LeapYear 方法返回它是否是 LeapYear（返回它实际上是什么 if 语句）。本质上，我是编码新手，我不知道如何返回字符串值而不是 int 或 double。有人可以帮我吗？

```
public static int LeapYear(int y) {

    int theYear;
    theYear = y;

    if (theYear < 100) {
        if (theYear > 40) {
            theYear = theYear + 1900;
        } else {
            theYear = theYear + 2000;
        }
    }

    if (theYear % 4 == 0) {
        if (theYear % 100 != 0) {
            System.out.println("IT IS A LEAP YEAR");
        } else if (theYear % 400 == 0) {
            System.out.println("IT IS A LEAP YEAR");
        } else {
            System.out.println("IT IS NOT A LEAP YEAR");
        }
    } else {
        System.out.println("IT IS NOT A LEAP YEAR");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:07:15.597

> 我不知道如何返回字符串值而不是 int 或 double。

您将返回类型设置为`String`

```
public static String leapYear(int y) 
```

你返回一个 String 而不是一个 int

```
return "IT IS NOT A LEAP YEAR"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:14:36.667

```
public static String LeapYear(int y) {
 int theYear;
 theYear = y;
 String LEAP_YEAR = "IT IS A LEAP YEAR";
 String NOT_A_LEAP_YEAR = "IT IS NOT A LEAP YEAR";

 if (theYear < 100) {
    if (theYear > 40) {
        theYear = theYear + 1900;
    } else {
        theYear = theYear + 2000;
    }
 }

if (theYear % 4 == 0) {
    if (theYear % 100 != 0) {
        //System.out.println("IT IS A LEAP YEAR");
        return LEAP_YEAR;

    } else if (theYear % 400 == 0) {
        //System.out.println("IT IS A LEAP YEAR");
        return LEAP_YEAR;
    } else {
       // System.out.println("IT IS NOT A LEAP YEAR");
       return NOT_A_LEAP_YEAR ;
    }
  } else {
    //System.out.println("IT IS NOT A LEAP YEAR");
    return NOT_A_LEAP_YEAR ;
  }
 return NOT_A_LEAP_YEAR ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T21:40:42.320

您可以使用以下方法：

```
static boolean isLeapYear(final int year) {
    return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);
} 
```

所以：

```
public static void LeapYear(int y) {
    if (y % 4 == 0 && (y % 100 != 0 || y % 400 == 0)) {
        System.out.println("IT IS A LEAP YEAR");
    } else {
        System.out.println("IT IS NOT A LEAP YEAR");
    }
} 
```

# haskell - 使单个函数适用于列表、字节字符串和文本（可能还有其他类似的表示）

> ID：12857615
> 
> 赞同：9
> 
> 时间：2012-10-12T11:00:27.247
> 
> 标签：haskell, text, fold, bytestring, lenses

我正在编写一个函数，该函数在一系列任意符号中进行一些搜索。我想让它足够通用，以便它适用于列表、`Foldable`s 以及`ByteString`s 和`Text`s。将其概括为`Foldable`很简单。但是如何包含`ByteString`s 和`Text`s 呢？当然我可以转换`ByteString`成一个列表，然后调用我的函数，但我会失去所有的优势`ByteString`。

举一个具体的例子，假设我们要创建一个直方图函数：

```
import Control.Monad.State
import qualified Data.Foldable as F
import Data.Map.Strict (Map)
import qualified Data.Map.Strict as Map
import Data.Word
import qualified Data.ByteString as B
import qualified Data.Text as T

type Histogram a = Map a Int

empty :: (Ord a) => Histogram a
empty = Map.empty

histogramStep :: (Ord a) => a -> Histogram a -> Histogram a
histogramStep k = Map.insertWith (+) k 1

histogram :: (Ord a, F.Foldable t) => t a -> Histogram a
histogram = F.foldl (flip histogramStep) empty 
```

但由于既不`ByteString`是 Text 也不是`Foldable`（它只存储`Word8`s/ `Char`s，而不是任意元素），我坚持创建更多看起来与以前*完全相同*的函数，只是使用不同的类型签名：

```
histogramBS :: B.ByteString -> Histogram Word8
histogramBS = B.foldl (flip histogramStep) empty

histogramText :: T.Text -> Histogram Char
histogramText = T.foldl (flip histogramStep) empty 
```

这是在像 Haskell 这样的函数式语言中人们所不期望的。

**如何使其通用，`histogram`一劳永逸地编写？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T11:15:26.590

您的解决方案几乎就是[ListLike](http://hackage.haskell.org/package/ListLike)包所做的。还有额外的包[listlike-instances](http://hackage.haskell.org/package/listlike-instances-0.2.1)为`Text`和添加实例`Vector`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T11:00:27.247

过了一会儿，我自己做了一个解决方案，但我不确定它是否可以以更好的方式解决，或者是否有人已经在某个库中这样做了。

`TypeFamilies`我用as创建了一个类型类

```
class Foldable' t where
    type Element t :: *
    foldlE :: (b -> Element t -> b) -> b -> t -> b
    -- other functions could be copied here from Foldable 
```

和实例：

```
newtype WrapFoldable f a = WrapFoldable { unwrapFoldable :: f a }
instance (F.Foldable f) => Foldable' (WrapFoldable f a) where
    type Element (WrapFoldable f a) = a
    foldlE f z = F.foldl f z . unwrapFoldable

instance Foldable' B.ByteString where
    type Element B.ByteString = Word8
    foldlE = B.foldl

instance Foldable' T.Text where
    type Element (T.Text) = Char
    foldlE = T.foldl 
```

甚至更好`FlexibleInstances`：

```
instance (F.Foldable t) => Foldable' (t a) where
    type Element (t a) = a
    foldlE = F.foldl 
```

现在我可以写（用`FlexibleContexts`）：

```
histogram :: (Ord (Element t), Foldable' t) => t -> Histogram (Element t)
histogram = foldlE (flip histogramStep) empty 
```

并将其用于`Foldable`s、`ByteString`s、`Text`s 等。

*   **还有另一种（可能更简单）的方法吗？**
*   **是否有一些图书馆可以解决这个问题（以这种或另一种方式）？**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-12T16:45:17.420

您可能会考虑将折叠本身客观化：

```
{-# LANGUAGE GADTs #-}
import Data.List (foldl', unfoldr)
import qualified Data.ByteString.Lazy as B
import qualified Data.Vector.Unboxed as V
import qualified Data.Text as T
import qualified Data.Map as Map
import Data.Word
type Histogram a = Map.Map a Int

empty :: (Ord a) => Histogram a
empty = Map.empty
histogramStep :: (Ord a) => Histogram a -> a -> Histogram a
histogramStep h k = Map.insertWith (+) k 1 h 

histogram :: Ord b => Fold b (Histogram b)
histogram = Fold histogramStep empty id

histogramT :: T.Text -> Histogram Char
histogramT = foldT histogram
histogramB :: B.ByteString -> Histogram Word8
histogramB = foldB histogram 
histogramL :: Ord b => [b] -> Histogram b
histogramL = foldL histogram

-- helper library
-- see http://squing.blogspot.fr/2008/11/beautiful-folding.html
-- note existential type
data Fold b c where  Fold ::  (a -> b -> a) -> !a -> (a -> c) -> Fold b c
instance Functor (Fold b) where  fmap f (Fold op x g) = Fold op x (f . g)

foldL :: Fold b c -> [b] -> c
foldL (Fold f x c) bs = c $ (foldl' f x bs)

foldV :: V.Unbox b => Fold b c -> V.Vector b -> c
foldV (Fold f x c) bs = c $ (V.foldl' f x bs)

foldT :: Fold Char t -> T.Text -> t
foldT (Fold f x c) t = c $ (T.foldl' f x t)

foldB :: Fold Word8 t -> B.ByteString -> t
foldB (Fold f x c) t = c $ (B.foldl' f x t)

sum_, product_ :: Num a => Fold a a
sum_ = Fold (+) 0 id
product_ = Fold (*) 1 id

length_ :: Fold a Int
length_ = Fold (const . (+1)) 0 id
maximum_ = Fold max 0 id 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T10:01:53.410

我找到了另一个使用[lens](http://hackage.haskell.org/package/lens)包的解决方案，它有一个详细的类型类层次结构来识别不同类型的数据结构。它的方法类似于 applicative 的答案 - 它客观化折叠：

```
{-# LANGUAGE RankNTypes #-}
import Control.Monad.State
import qualified Data.Foldable as F
import Data.Map.Strict (Map)
import qualified Data.Map.Strict as Map
import Data.Word
import qualified Data.ByteString as B
import qualified Data.Text as T

import Control.Lens.Fold
import qualified Data.ByteString.Lens as LBS
import qualified Data.Text.Lens as LT

type Histogram a = Map a Int

empty :: (Ord a) => Histogram a
empty = Map.empty

histogramStep :: (Ord a) => a -> Histogram a -> Histogram a
histogramStep k = Map.insertWith (+) k 1

-- Histogram on anything that can be folded into `a`:

histogram :: (Ord a) => Fold c a -> c -> Histogram a
histogram f = foldlOf f (flip histogramStep) empty

-- Specializations are simple:

histogramF :: (Ord a, F.Foldable t) => t a -> Histogram a
histogramF = histogram folded

histogramBS :: B.ByteString -> Histogram Word8
histogramBS = histogram LBS.bytes

histogramText :: T.Text -> Histogram Char
histogramText = histogram LT.text 
```

# php - 将数量添加到购物车

> ID：12857622
> 
> 赞同：0
> 
> 时间：2012-10-12T11:00:43.003
> 
> 标签：php, mysql

我是 php 和 mysql 的新手，我正在尝试将产品添加到购物车。我认为我的代码工作正常，除了“quantitat+1”部分。（如果我只是将它替换为一个有效的数字）我不知道**我应该怎么说我想要更新并添加 1 现有数量**，无论它是什么。

我没有错误，所以我不知道是什么问题。我试过 ($row['quantitat'];)+1 它也不起作用

我是一个绝对的初学者，所以我想我犯了一个非常明显的错误，或者有些东西我不明白。

```
if(isset($_GET["id"])) {
    $result = mysql_query("SELECT * FROM carret 
                            WHERE producte='".$_GET["id"]."'");
    }

if (mysql_num_rows($result)>0) { // if already there is one or more
    mysql_query("UPDATE carret SET quantitat = quantitat + 1
    WHERE producte='".$_GET["id"]."'");
    echo "UPDATE. I have added 1";
}else{
    mysql_query("INSERT INTO carret (producte, quantitat)
    VALUES (".$_GET["id"].",1)");
    echo "INSERT. I have inserted one new product";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:22:31.197

你可以试试以下

```
$mysqli = new Mysqli("localhost", "username", "password", "database");

if (isset($_GET["id"])) {
    $id = $mysqli->real_escape_string($_GET["id"]);
    $mysqli->query("INSERT INTO carret (producte, quantitat)VALUES ('$id',1) ON DUPLICATE KEY UPDATE quantitat = quantitat+1; ");
} 
```

# c# - asp.net登录页面详情存储信息

> ID：12857625
> 
> 赞同：2
> 
> 时间：2012-10-12T11:00:50.057
> 
> 标签：c#, asp.net

创建 asp.net 页面后，如果我们运行该项目，它会显示 asp.net welcome

如果我们创建用户名和密码并登录页面。

之后，如果我们希望用户创建他们的姓名和密码，数据将保存在项目中的位置以及如何检查登录详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:04:30.460

如果您使用 Visual Studio 附带的默认模板，则数据将存储到 App_Data 文件夹下的 aspnetDb.mdf 中。你可以用资源管理器检查它。为此，您还需要 SQL Excpress 版本 默认情况下，这些模板使用该 ASpnetDb.MDF 文件来获取身份验证数据。

这是您的示例屏幕截图。

![在此处输入图像描述](../Images/9ba0dec243547b8bb774b5e83c89ba4b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:03:42.740

如果你访问你的配置文件，你可以找到

```
<connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

注意：`AttachDBFilename=|DataDirectory|\aspnetdb.mdf`是您的数据库的路径。

您可以在服务器资源管理器中打开您的数据库

![在此处输入图像描述](../Images/5cc95dcbd46bf628e9f5e28531e58145.png)

# python - 将参数传递给 Python 中的函数

> ID：12857627
> 
> 赞同：1
> 
> 时间：2012-10-12T11:00:54.763
> 
> 标签：python

我不确定为什么会收到消息错误

> **TypeError: __init__() 正好需要 3 个参数（给定 4 个）**

对于下面描述的代码：

```
class Worker(object):
    def __init__(arg1,arg2,arg3):
        self.arg1 = arg1
        self.arg2 = arg2
        self.arg3 = arg3
    def some_function(self):
        print "it works: " + arg1 + arg2 + arg3

w=Worker("a","b","c")
w.some_function() 
```

我会错过什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T11:05:01.270

应该是`def __init__(self, arg1,arg2,arg3):`。您还需要将`print`语句更改`some_function`为

```
print "it works: " + self.arg1 + self.arg2 + self.arg3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T11:02:35.673

```
def __init__(self,arg1,arg2,arg3): 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:02:35.390

任何类函数的第一个参数应该始终是`self`.

好吧，名字并不重要，但这就是它的意思。

所以你的函数定义应该是这样的：

```
def __init__(self,arg1,arg2,arg3): 
    self.arg1 = arg1 
    self.arg2 = arg2 
    self.arg3 = arg3 
```

# java - 在java中的盒子布局行中将面板居中

> ID：12857631
> 
> 赞同：0
> 
> 时间：2012-10-12T11:01:04.360
> 
> 标签：java, swing, layout, layout-manager, boxlayout

我在下面有这段代码来在选项卡内创建一个页面。我希望每个布局在整体框布局的一行中，但我希望元素保持其原始大小，而不是扩展以填充整个窗口的宽度。有谁知道我需要更改哪些代码行或最好的方法是什么？！附上的图片显示了它目前的样子

![在此处输入图像描述](../Images/4290f044039ff704e1483bf1044fa015.png)

```
public void createPage4() {
    panel4 = new JPanel();
    panel4.setLayout(new BoxLayout(panel4, BoxLayout.Y_AXIS));
    navigatePanel = new JPanel();
    navigatePanel.setLayout(new BoxLayout(navigatePanel, BoxLayout.X_AXIS));
    previousButton.setText("Previous");
    previousButton.setEnabled(false);
    navigatePanel.add(previousButton);
    navigatePanel.add(Box.createHorizontalStrut(10));
    indexTextField.setHorizontalAlignment(JTextField.CENTER);
    navigatePanel.add(indexTextField);
    navigatePanel.add(Box.createHorizontalStrut(10));
    ofLabel.setText("of");
    navigatePanel.add(ofLabel);
    navigatePanel.add(Box.createHorizontalStrut(10));
    maxTextField.setHorizontalAlignment(JTextField.CENTER);
    maxTextField.setEditable(false);
    navigatePanel.add(maxTextField);
    navigatePanel.add(Box.createHorizontalStrut(10));
    nextButton.setText("Next");
    nextButton.setEnabled(false);
    navigatePanel.add(nextButton);
    panel4.add(navigatePanel);
    displayPanel = new JPanel();
    displayPanel.setLayout(new GridLayout(5, 2, 4, 4));
    firstNameLabel.setText("First Name:");
    displayPanel.add(firstNameLabel);
    displayPanel.add(firstNameTextField);
    lastNameLabel.setText("Last Name:");
    displayPanel.add(lastNameLabel);
    displayPanel.add(lastNameTextField);
    panel4.add(displayPanel);
} 
```

图片

![图片](../Images/4290f044039ff704e1483bf1044fa015.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:23:21.737

最简单的方法是将您添加`panel4`到使用的其他面板，`GridBagLayout`然后*将该*面板添加到容器中。然后它将居中，调整大小时不会拉伸。

```
JPanel centeredPanel = new JPanel(new GridBagLayout());
centeredPanel.add(panel4);    // add this panel to the container 
```

您还应该构造具有指定列数的文本字段，例如

```
indexTextField = new JTextField(20); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:13:55.103

*   [BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)接受`Min, Max and PreferredSize`来自`JComponents`

> 我希望整个框布局的一行中的每个布局，但我希望元素保持其原始大小而不是扩展以填充整个窗口的宽度

*   我将使用正确的`LayoutManage`r，[FlowLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)仅接受`PreferredSize`和/或全部`JComponents`由[GridBagLayout 铺设，而 GridBagConstraints 的定义](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)在容器调整大小时保持不变

*   不会让我感觉（我的观点）为什么原因（确定这是你的工作），但为了更好的帮助，请尽快发布[SSCCE](http://sscce.org/)

# bash - 如何与目录名称进行比较并输入最高版本的名称

> ID：12857637
> 
> 赞同：2
> 
> 时间：2012-10-12T11:01:31.990
> 
> 标签：bash

我在同一个子目录中有两个版本的 tcpdump。

tcpdump-4.1.1 和 tcpdump-4.3.0

如何编写 bash 函数以返回最高版本？

***编辑：***

我已经让它工作了。这是代码。

```
#!/bin/bash
# Function to get the latest version of the directory
function getLatestDirVer {
    latestDIR=$(ls -v $1* | tail -n 1)
    stringLen=`expr length "$latestDIR"`
    stringLen=$(($stringLen-1))
    latestDIR2=`expr substr $latestDIR 1 $stringLen`
    echo $latestDIR2
}

# Main function
echo $(getLatestDirVer tcpdump) 
```

这是输出

```
[luke@machine Desktop]$ ./latestDIRversion.sh 
tcpdump-4.3.0 
```

tcpdump-4.1.1 和 tcpdump-4.3.0 目录位于 Desktop 目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:25:46.457

```
ls -1 tcpdump*|sort -rn|head -1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:14:57.907

这是使用`ls`. 您可以使用该`-v`标志按文件名中的版本号从最低到最高排序：

```
ls -v tcpdump* | tail -n 1 
```

* * *

***编辑：***

事实证明，我完全误读了你的问题。我以为您对文件名感兴趣，但实际上您对目录感兴趣。您可以将以下内容添加到您的`~/.bashrc`中，我认为它会为您工作：

```
getLatestDirVer () {
    for i in $(find ./* -type d | sort --version-sort); do :;done
    cd "$i"
} 
```

# c# - 从存储过程记录集中删除记录

> ID：12857638
> 
> 赞同：1
> 
> 时间：2012-10-12T11:01:37.277
> 
> 标签：c#, sql-server-2008, stored-procedures, code-behind

我有一个基于复杂查询返回记录集（结果集 A）的存储过程，并且记录按特定顺序排列。我有另一个查询，它从另一个表（结果集 B）返回 ID 值。

我想做类似“从结果集 A 中获取记录，其中 id 存在于（结果集 B）中”。

我需要在代码隐藏中执行此操作。任何想法如何去做这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:20:32.857

您可以使用这种扩展方法 - 基于产量和`Linq Contains operator`

```
public static IEnumerable<string> Select(this DataReader reader, int index)
{
    while (reader.Read())
    {
        yield return reader[index].ToString();
    }
} 
```

注意：您有两个记录集 reader1 和 reader2，选择扩展方法获取项目 IEnumerable 的列表。

```
var list1 = reader1.Select(0); //Search on first column;
var list2 = reader2.Select(0);
//Get list items of values (index 0) of list2, who exist in list1.
var result = from item on list2.Select(0)
             where list1.Contains(item)
             select item; 
```

# java - SD卡中的Android R.Raw文件？

> ID：12857644
> 
> 赞同：0
> 
> 时间：2012-10-12T11:01:52.353
> 
> 标签：java, android

我们存储在 android R.raw 文件夹（例如 mySong.mp3）中的文件存在于移动内存或 SD 卡中。

我有一首 100MB 的歌曲音频，我在我的 android 应用程序中使用它。

```
 MediaPlayer mPlayer = MediaPlayer.create(context, R.raw.mysong);
      mPlayer.start(); 
```

只是想知道当用户安装.apk 时，这100MB 的歌曲会存储在SD 卡或手机内存中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T11:09:00.143

那么你可以决定。

您可以在根清单元素中设置字段**android:installLocation以首选安装位置。**值可能是：

**internalOnly：**强制内部

**首选外部：**首选 SDCARD

**auto：** 系统将决定

仅支持 android 2.2 及更高版本的设备安装在 sd 卡中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:06:09.773

取决于您的应用程序商店。您将应用程序安装在 SD 卡中，因此 R.Raw 存储在 SD 卡中，否则手机内存。

您问题的一种解决方案。当您安装应用程序时，然后转到应用程序->管理->单击应用程序并单击移动到 sdcard 选项。试试这个

# asp.net-mvc-3 - Windows azure ASP.NET MVC 3 上的成员身份验证 - 找不到列

> ID：12857647
> 
> 赞同：3
> 
> 时间：2012-10-12T11:01:56.330
> 
> 标签：asp.net-mvc-3, azure, asp.net-membership, membership-provider

我尝试将我的 ASP.NET MVC 3 项目（使用 CodeFirst）迁移到 Windows Azure。Offcurse 我更改了提供程序。我检查了 azure sql db 并且有新表，例如：应用程序、成员资格、配置文件、角色、用户

但现在我得到了错误：

```
[SqlException (0x80131904): Invalid column name 'ApplicationId'.
Invalid column name 'UserName'.
Invalid column name 'UserId'.
Invalid column name 'ApplicationId'.
Invalid column name 'UserName'.
Invalid column name 'IsAnonymous'.
Invalid column name 'LastActivityDate'.]
   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +2091750
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5103168
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +260
   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2294
   System.Data.SqlClient.SqlDataReader.ConsumeMetaData() +33
   System.Data.SqlClient.SqlDataReader.get_MetaData() +86
   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +311
   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +987
   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162
   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +32
   System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) +141
   System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior) +12
   System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior) +10
   System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior) +443

[EntityCommandExecutionException: An error occurred while executing the command definition. See the inner exception for details.]
   System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior) +479
   System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute(ObjectContext context, ObjectParameterCollection parameterValues) +736
   System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) +149
   System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() +44
   System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +182
   System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__1(IEnumerable`1 sequence) +41
   System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle(IEnumerable`1 query, Expression queryRoot) +59
   System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute(Expression expression) +150
   System.Data.Entity.Internal.Linq.DbQueryProvider.Execute(Expression expression) +87
   System.Linq.Queryable.FirstOrDefault(IQueryable`1 source) +265
   System.Web.Providers.QueryHelper.GetUser(MembershipContext ctx, String userName, String applicationName) +2104
   System.Web.Providers.DefaultMembershipProvider.Membership_CreateUser(String applicationName, String userName, String password, String salt, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, DateTime& createDate, Boolean uniqueEmail, Int32 passwordFormat, Object& providerUserKey) +151
   System.Web.Providers.DefaultMembershipProvider.CreateUser(String username, String password, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, Object providerUserKey, MembershipCreateStatus& status) +836
   System.Web.Security.Membership.CreateUser(String username, String password, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, Object providerUserKey, MembershipCreateStatus& status) +207
   GameiDemo.Controllers.HomeController.Index(User model) +99
   lambda_method(Closure , ControllerBase , Object[] ) +108
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8969201
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

网络配置：

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>

    <!--
    <add name="ApplicationServices"
         connectionString="data source=mssql01\sql01;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
         -->
    <!--<add name="ApplicationServices" connectionString="Server=tcp:...database.windows.net,1433;Database=...;User ID=...@...;Password={your_password_here};Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" providerName="System.Data.SqlClient" />-->
    <!--<add name="DBConnection" connectionString="Server=tcp:....database.windows.net,1433;Database=...;User ID=...@...;Password={your_password_here};Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" providerName="System.Data.SqlClient" />/-->

    <!--
    <add name="DBConnection" connectionString="data source=.\SQLEXPRESS;initial catalog=GameiDemo;integrated security=True;multipleactiveresultsets=True;" providerName="System.Data.SqlClient" />
    -->
    <!--<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
      providerName="System.Data.SqlClient" />//-->
    <add name="DefaultConnection" providerName="System.Data.SqlClient" 
         connectionString="Data Source=tcp:....database.windows.net,1433;Initial Catalog=gamei_db;User Id=...@...;Password=123aba321!;Trusted_Connection=False;Encrypt=True;Connection Timeout=130;**MultipleActiveResultSets=True**" />
     </connectionStrings>

  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>

    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <clear />
        <!-- <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" /> //-->
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <clear />
        <!-- <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" /> //-->
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />

      </providers>
    </profile>
    <roleManager enabled="false" defaultProvider="DefaultRoleProvider">
      <providers>
        <clear />
        <!--<add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />-->

        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.web>
    <customErrors mode="Off" />
  </system.web>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

我用“...”更改用户名和服务器地址:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:55:24.610

我发现出了什么问题。我的模型中的一个表被命名为用户 - >这导致来自 System.Web.Providers 的用户表确实创建了。

# java - eclipse中的十字符号是什么意思

> ID：12857648
> 
> 赞同：4
> 
> 时间：2012-10-12T11:01:57.200
> 
> 标签：java, eclipse

我在 eclipse 中打开了一个项目，它是一个 java web 应用程序。在eclipse中，我可以看到我的项目名称有一个红十字标志，在扩展我的项目时，我可以看到许多文件具有相同的红十字标志。

这个十字符号在日食中意味着什么？它是否显示一些编译错误？如果错误我怎么能看到错误？还有那个三角形图标是什么意思？

![在此处输入图像描述](../Images/5933319bf6e50ae3814f6177c71fee32.png)

请检查上面的屏幕截图并查看`cross and triangle`标志...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T11:05:09.967

红底叉表示此文件有错误，黄底问号表示警告。您可以在 Eclipse的“**问题”选项卡中看到它们：**

![Eclipse 问题选项卡](../Images/a1a0cf1a10e4f5add6c4f7044bce71fe.png)

您可以自定义被视为错误和警告的内容`Window -> Preferences`，然后搜索`errors/warnings`（另请查看文档：[Java Compiler Errors/Warnings Preferences](http://help.eclipse.org/helios/topic/org.eclipse.jdt.doc.user/reference/preferences/java/compiler/ref-preferences-errors-warnings.htm)

除了资源上的标记外，您还可以在滚动条旁边的打开文件中看到错误和警告：

![在此处输入图像描述](../Images/06a788170b55c02f67709fd1b40ef0fe.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T11:06:21.100

十字符号显示该来源中的错误，三角形表示您的来源有一些警告

只需打开这些文件就可以在源代码编辑器中找到红色`x`下划线和标记，如果警告将在`!`源代码编辑器的侧栏中显示为三角形

如果您的源代码很大，那么您可以使用快捷方式`ctrl + .`查看源文件中的错误。以下快捷方式将在您的eclipse中从上到下移动到警告和错误

在 eclipse 中查看错误的几个捷径：

```
Next error: `Ctrl + .`
Previous error: `Ctrl + ,`
Quick fixes: `Ctrl + 1` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T11:05:19.240

叉号表示文件 web.xml 有一些错误。此外，“jsp”和“lib”目录中的某些文件可能也有错误。

黄色三角形是警告。要查看所有详细信息，请转到`Window -> Show view -> Problems`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T12:41:05.863

我没有看到任何人提到可能会让初学者感到困惑的一件事：红色 X 出现在带有错误的文件**及其**所有父项上。当您的树被折叠时，这些其他标记非常方便——它们会导致您错误地找到文件，但在查看展开的树时也会导致混淆。

**如果视图的过滤器配置正确**，每个标有红色 X 注释的错误也会出现在问题视图中。您可以通过视图的本地菜单配置过滤器（通过视图标题栏右上角的小向下三角形访问）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T11:05:38.263

是的，这意味着你有一个错误，而带有感叹号的黄色三角形意味着你有一个警告。您可以通过打开文件来查看错误。有错误的行将在左边距上显示一个错误标记。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-12T11:05:56.683

如果出现红叉，则表示您的项目包含**错误。**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-12T11:08:54.657

如果显示红色叉号，您的项目似乎包含错误

你可以看到的一般方式`Window > Show View > Problems`

使用关闭键的简单方法`Alt+Shift+Q,X`

# smalltalk - 如何将 Morph 连接到它应该在 Morphic 中可视化的对象？

> ID：12857651
> 
> 赞同：1
> 
> 时间：2012-10-12T11:02:08.913
> 
> 标签：smalltalk, squeak, pharo, morphic

假设我有 Bird 类和 BirdMorph 类。鸟有一个位置，我希望 BirdMorphs 改变它们在屏幕上的位置，只要相应的鸟改变它的位置。

将 Morph 连接到它应该在 Morphic 中可视化的对象的预期方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:11:16.927

通常，BirdMorph 会将 Bird 保存在实例变量中，并在其`step`方法中更新自己的位置。

可以这样想：每个对象都需要在某个地方“持有”。如果没有对它的引用，它会自动被垃圾收集。在 Morphic 中，该引用通常植根于`World`，每个 morph 都通过其容器的`submorphs`集合进行引用。

因此，您的变形坚持“域模型”是有道理的。例如，您可能有一个包含所有鸟类的 BirdSimulation 对象，以及一个保存 BirdSimulation 的屏幕窗口。然后，当您关闭窗口时，模拟对象也将消失。

如果您的程序主要是可视化的，您甚至可能不需要单独的 Bird 类。相反，变形可能只是**“**一只鸟”。这可以大大简化设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T22:51:50.057

恕我直言，您的第一个想法是正确的：MVC 是要走的路。持有从 BirdMorph 到其 Bird 模型的引用似乎是最简单的方法，但是使用 [观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)， 您的 BirdMorph 是您的 Bird 的“观察者”：BirdMorph 在创建时将自己注册到 Bird 以通知每个事件。每当鸟移动时，它都会通知所有观察者他的移动。因此，您可以为鸟设置多个观察者，例如，一个 Morph 用于显示（位置和其他），一个用于记录（例如，网络对等体）等......代码中的“硬”引用更少，spagethi 更少。

许多框架都建立在这种模式之上，因为它打破了对象之间的依赖关系并简化了很多。

* * *

另外，Pharo Announcements 中有一个包 [：对象依赖框架](http://book.pharo-project.org/book/LanguageAndLibraries/announcements/)

# content-management-system - Umbraco 中的新模板，不会显示在内容页面的模板下拉菜单中

> ID：12857653
> 
> 赞同：4
> 
> 时间：2012-10-12T11:02:15.823
> 
> 标签：content-management-system, umbraco

另一个 Umbraco 问题，抱歉。我在主模板列表中创建了一个新模板，但该模板没有显示在内容页面的模板下拉列表中。我想知道我是否遗漏了一些东西，或者是否有一种方法可以发布这个不是立即显而易见的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T13:59:36.030

您需要为页面的文档类型选择模板作为允许的模板类型。假设您的页面文档类型称为“ContentPage”，并且您添加了一个名为“NewTemplate”的新模板。

默认情况下，您在编辑“ContentPage”页面时将无法选择新模板。您需要进入 Umbraco 中的“设置”，然后展开“文档类型”文件夹。您将看到所有文档类型的列表，选择要在其上使用模板的类型（本例中为“ContentPage”）。

您将看到的第一个选项卡是“信息”选项卡。有一个名为“允许的模板”的复选框列表，您需要在其中选择新模板。保存文档类型并返回到内容。您现在应该可以在网站上的“ContentPage”页面上选择“NewTemplate”作为模板！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-30T19:01:41.243

我对从事线程死灵术犹豫不决，但因为这是第一个谷歌结果，而且事情似乎在 7.4.3（我经历过的第一个 Umbraco 版本）中发生了变化，我想分享我使用的过程将模板添加到文档类型。

1.  前往设置”。
2.  展开“文档类型”并选择您要应用模板的文档类型。
3.  点击页面右上角的“模板”。
4.  点击“选择额外模板”。
5.  选择您希望允许的模板，然后单击“关闭”。
6.  点击“保存”。
7.  转到“内容”。
8.  您现在应该能够使用您指定的模板在您选择的文档类型下创建新内容。

我希望这有助于节省另一个新的 Umbraco 开发人员的一些麻烦。

# c++ - 在 Adob e Flex 本机扩展中使用 libc++ 而不是 libstdc++

> ID：12857655
> 
> 赞同：1
> 
> 时间：2012-10-12T11:02:18.370
> 
> 标签：c++, apache-flex, xcode4, standard-library, air-native-extension

我们有一个相当大的 c++ 库，我们将其打包在一个 Adob​​e Flex 扩展中，供我们的 Flex 用户使用。我们为多个平台打包了该 ANE，包括 Mac OS 和 iOS。在 Mac 上，当我们使用传统的标准 C++ 库 ( `libstdc++`) 构建时，一切都很好。当然，我们不想停留在一个过时的即将不受支持的库中，我们切换到当前的`libc++`. 该库（.a 文件）以这种方式构建得很好，调用该库的本机 iOS 应用程序也是如此。

但是，`adt`构建 ANE 的 Adob​​e 工具现在失败，没有有用的错误消息（不要让我开始关注 Adob​​e 工具的质量）。Unix 进程的一些诡计让我们找出`adt`调用 OS 链接器的方法`ld`。复制相同的`ld`调用让我们发现链接器抱怨大量未定义的符号，所有（或可能大多数）都是标准 C++ 库符号。

实际上，该`ld`调用用作`-lstdc++`引用遗留库的参数。我想使用 libc++ 会暗示这个`lc++`论点。`ld`但是，由于（显然）不相关的目录问题，尝试进行此类修改失败。

那么有没有办法告诉`adt`我们的 .a 库使用当前的标准 C++ 库而不是旧的库？该限制是否有任何明智的解决方法`adt`？更一般地说，有没有办法说服`adt`（以及一般的 Flex Builder）不要拦截和吃掉工具错误消息？

欢迎任何建议。这是使用 Xcode 4.5.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:34:21.373

在`platformoptions.xml`iPhone-ARM 目标的文件中，尝试添加该`-lc++`选项。即，一个最小的`platformoptions.xml`文件看起来像这样：

```
<platform xmlns="http://ns.adobe.com/air/extension/3.1">
    <sdkVersion>4.0.0</sdkVersion>
    <linkerOptions>
        <option>-lc++</option>
    </linkerOptions>
</platform> 
```

您的构建命令将是这样的：

`adt -package -target ane Output.ane extension.xml -swc anelib.swc -platform iPhone-ARM -C ios . -platformoptions platformoptions.xml`

# ipad - iOS5 和 iOS6 中拆分视图控制器的奇怪行为

> ID：12857662
> 
> 赞同：2
> 
> 时间：2012-10-12T11:02:48.107
> 
> 标签：ipad, ios5, ios6, uisplitviewcontroller

我在 iOS 5.0 和 iOS 6.0 iPad 模拟器中有一个奇怪的拆分视图控制器行为。我在 Xcode 中创建了 Master View Detail 模板，并将到处的部署目标设置为 5.0。我关闭了自动布局并将方向设置为仅横向。

我的应用程序如下工作 - 拆分视图控制器是我的根 VC，因为我需要先显示登录信息，所以我使用

```
- (void)viewWillAppear:(BOOL)animated {
[self presentModalViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"loginVC"] animated:NO];
} 
```

在 MasterViewController 中。在 iOS 6 模拟器上一切运行顺利，但 5.0 只是不会显示登录 VC 并以纵向模式显示其余部分，而是转向横向。下面附上图片。

有人知道可能出了什么问题吗？

![iOS 5 左 / iOS 6 右](../Images/8ccae4339994879ed963a346e71ed27c.png)

# javascript - 带有 json 数据的 Jquery 全局 ajax 事件处理程序

> ID：12857664
> 
> 赞同：2
> 
> 时间：2012-10-12T11:03:04.677
> 
> 标签：javascript, jquery, ajax

我正在尝试制作通用响应的全局 ajax 处理程序。（例如刷新页面）

是否有任何处理程序或黑客，所以我已经解析了 json，所以我不必解析它两次？

```
$(document).ajaxSuccess(function(e, xhr) {
    // Validate and parse xhr.responseText TWICE!
}); 
```

好的，找到了一些“hacky”解决方案，可能对其他人有用:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:03:04.677

解决方案是覆盖 jquery ajax json 解析器：

```
function parseJsonResponse(d) {
    var json = jQuery.parseJSON(d); // Same as default

    // Do anything with json object :)

    return json;
}
// Override original parser, defaults to jQuery.parseJSON.
jQuery.ajaxSettings.converters['text json'] = parseJsonResponse; 
```

如果你不想`parseJsonResponse`成为一个*全局函数*，那么你可以把这段代码放在[自动执行的匿名函数中](https://stackoverflow.com/questions/440739/what-do-parentheses-surrounding-a-javascript-object-function-class-declaration-m)

# php - php pdo绑定多个值问题

> ID：12857676
> 
> 赞同：1
> 
> 时间：2012-10-12T11:03:40.660
> 
> 标签：php, mysql, pdo

我在 php 中有以下代码来根据客户端发送的数组查询数据库。

```
$limit = $_POST['limit'];
$userArray = json_decode($_POST['arr'], true);
$queryPlaceholders= implode(',', array_fill(0,count($userArray), '?'));
$stmt = $db->prepare("SELECT * FROM tableA
                          WHERE tableA.id IN (".$queryPlaceholders.")
                          LIMIT ?");
foreach($userArray as $k => $val){
    $stmt->bindParam(($k+1), $val);
}
$stmt->bindValue(count($userArray) + 1, (int)trim($limit), PDO::PARAM_INT);
$stmt->execute();
$result = $stmt->fetchAll(PDO::FETCH_ASSOC);
echo $result; 
```

此代码似乎有错误。如果我发送一个包含值 11 和 17 的数组，查询似乎只使用值 17 运行，而不是 11 和 17。

如果`print_r($userArray)`我得到`Array ( [0] => 11 [1] => 17 )`

所以我知道 php 有正确的数组。但是，使用上面的代码运行此查询，并运行下面的查询会产生不同的答案：

```
SELECT * FROM tableA
WHERE tableA.id IN (11,17)
LIMIT 10 
```

运行上面的代码时，它似乎实际上运行了这个查询？

```
SELECT * FROM tableA
WHERE tableA.id IN (17)
LIMIT 10 
```

我还在`foreach`循环中放置了语句，告诉我数组的两个元素（11 和 17）都绑定到 $stmt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:16:04.173

问题是您正在使用[`bindParam()`](http://php.net/manual/en/pdostatement.bindparam.php)：

> 将 PHP 变量绑定到用于准备语句的 SQL 语句中相应的命名或问号占位符。与 不同[`PDOStatement::bindValue()`](http://www.php.net/manual/en/pdostatement.bindvalue.php)的是，该变量被绑定为引用，并且只会在[`PDOStatement::execute()`](http://www.php.net/manual/en/pdostatement.execute.php)调用时进行评估。

由于在循环`$val`的每次迭代中都会更改`foreach`，因此最终执行查询时每个占位符最终都是相同的。

# python - 如何在 x 轴上设置日期刻度标签，仅适用于 matplotlib 上的给定点

> ID：12857683
> 
> 赞同：5
> 
> 时间：2012-10-12T11:03:59.340
> 
> 标签：python, date, matplotlib, label

我正在尝试在 x 轴上设置日期刻度标签，仅针对给定点。例如，如果我有 x 轴上的值的日期时间列表

```
x = [ datetime.datetime(..), ... , datetime.datetime()] 
```

我试过了`ax.xaxis.set_ticklabels(x)`。

我只想为列表中存在的六个点中的每一个绘制日期，但我得到了这个结果：

![阴谋](../Images/13462d4c3e3509e23af99c6d4319d5cc.png)

我用来获取此图的代码如下：

```
# figure's size in inch
fig = Figure(figsize=(8, 8))
# axes' position                                
ax = Axes(fig, [.1, .1, .8, .8])
ax.errorbar(matplotlib.dates.date2num(x), y, yerr=el['e'], fmt=format_string, label=label)

# shrinks current axis to 90%
box = ax.get_position()
ax.set_position([box.x0, box.y0, box.width * 0.9, box.height])
# puts a legend to the right of the current axis
ax.legend(loc='center left', bbox_to_anchor=(1, 0.5))
# autoscales axes following data limits
ax.autoscale(tight=False)

dateFmt = matplotlib.dates.DateFormatter('%Y-%m-%d')
ax.xaxis.set_major_formatter(dateFmt)
monthsLoc = matplotlib.dates.MonthLocator()
daysLoc = matplotlib.dates.DayLocator(interval=1)
ax.xaxis.set_major_locator(monthsLoc)
ax.xaxis.set_minor_locator(daysLoc)
fig.autofmt_xdate(bottom=0.18)

# I tried to set tick labels with this but with no results
#ax.xaxis.set_ticklabels(x)
# adds axes to figure
fig.add_axes(ax)
# creates a canvas from figure
canvas = FigureCanvasAgg(fig)
# saves figure to filesystem in png format
canvas.print_figure(settings.MEDIA_ROOT + file_relative_path) 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T11:47:23.903

要设置刻度及其标签，请使用：

```
x = [ datetime.datetime(..), ... , datetime.datetime()]
ax.xaxis.set_ticks(x) 
```

# intellij-idea - Intellij findbugs 英文版

> ID：12857684
> 
> 赞同：0
> 
> 时间：2012-10-12T11:04:01.833
> 
> 标签：intellij-idea, findbugs

我在 windows 下使用 intellij (10.5) + findbugs。我的问题是 findbugs 用法语报告我的错误。

我能找到英文findbugs的唯一方法是在Windows控制面板中更改区域设置（控制面板\区域和语言\格式：从法语更改为英语）。

有没有其他方法可以告诉 findbugs 使用英语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:57:11.420

语言可以用`-Duser.language=en`line in覆盖`IDEA_HOME\bin\idea.exe.vmoptions`。

# css - 为什么div的位置会根据内容而变化？

> ID：12857685
> 
> 赞同：0
> 
> 时间：2012-10-12T11:04:06.813
> 
> 标签：css, html, position, height

我有一个加载不同页面的内容 div。我无法为其设置固定位置，因为我想滚动浏览它的内容。

这个 div 被加载到一个 100% 高度的表（#main）中。问题是，如果内容 div 的内容高度较小（因此滚动条不会出现），我的 div 会移动到下方，就像应用更多的上边距一样。我希望每个页面都加载到相同的 y 位置。我究竟做错了什么？

请注意：#content 下面有一个页脚 div，它具有相对位置，我也不想在其上应用固定位置属性。似乎#footer 被拖到它正在使用#content 的页面上的次数越多，因为它们位于同一表格行上。

```
#main{
    width:1010px;
    height:100%;
}
#content{   
    margin-top:303px;
    padding: 35px;
}
#footer{
    z-index:2;
    position:relative;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:19:42.520

问题是您的`td`身高是 100%，而您没有`vertical-align`将`top`. 所以它默认为`middle`. ：

```
#main td {
    vertical-align: top;
} 
```

# java - 玩！框架 - 访问“私人”文件

> ID：12857686
> 
> 赞同：0
> 
> 时间：2012-10-12T11:04:09.507
> 
> 标签：java, io, playframework, playframework-2.0, filereader

在我的网站上有一个特定的管理页面。当您加载页面时，它假设解析一个`csv file`. 我遇到了两个问题：

1.  文件应该放在哪里。我不希望它打开，`public`因为这样任何人都可以阅读它。
2.  实际上，页面所做的是使用 class.csv 读取 csv 文件`FileReader`。文件的路径应该是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:39:31.900

如果您不想部署 CSV，可以将其存储在主文件夹中：

使用 Java 类文件：[http ://docs.oracle.com/javase/6/docs/api/java/io/File.html](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)

```
String home = System.getProperty("user.home");
File file = new File(home + File.separator + "aFile.csv"); 
```

要读取小文件，您可以使用 apache fileutils：

```
String fileContents = org.apache.commons.io.FileUtils.readFileToString(file); 
```

[http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html) （可以添加依赖）

# reporting-services - 是否可以阻止 SSRS 2008 R2 在首次使用时升级 2005 RDL？

> ID：12857691
> 
> 赞同：2
> 
> 时间：2012-10-12T11:04:18.693
> 
> 标签：reporting-services, sql-server-2008-r2

我们有一组使用 BIDS 2005 创建的报告，我们正在尝试将它们部署到 2008 R2 服务器上。我们遇到的问题是，在第一次查看我们的一份报告时，SSRS 2008 R2 正在查看它是否可以升级报告和所有子报告，这导致主报告升级到 2008，但子报告包含不允许升级子报告的第三方自定义报告项。如果 2008 R2 根本不尝试升级任何报告，我们会更喜欢它。

正如您从这篇文章中看到的：[http ://technet.microsoft.com/en-us/library/ms143674(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms143674%28v=sql.105%29.aspx)

（部分：使用子报表升级报表）

微软声明：

> 可以升级主报表，但不能升级一个或多个子报表。主报表由 SQL Server 2008 Reporting Services 报表处理器处理，但呈现的报表在无法升级的子报表出现的位置显示消息“错误：无法处理子报表”。

这显然是无用的，因为我们需要能够看到子报表！

所以我的问题是：

**我们可以强制 SSRS 始终使用 2005 RDL 文件而不自动升级吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:37:54.073

我认为最简单的答案是在 BIDS 2005 中编辑父报表并添加一个 CustomReportItem，甚至可能将可见性设置为 false。这应该会强制 SSRS 2008R2 将报告标记为需要向后兼容。

或者，此标志存储在数据库中的某个位置，但我不确定在哪里。我无权访问使用该处理引擎运行的任何 2005 年报告，因此我无法进行搜索。

# android - Google Plus 集成以获取个人资料帖子

> ID：12857692
> 
> 赞同：4
> 
> 时间：2012-10-12T11:04:19.820
> 
> 标签：android, google-plus

是否有任何 API 可用于在 Google Plus for Android App 中获取个人资料帖子？如何使用 Google Plus 中的任何 API 发布任何字符串？如果您有任何参考，请告诉我...

我尝试使用下面的链接获取提要 [https://plusfeed.appspot.com/1080172850624](https://plusfeed.appspot.com/1080172850624) ***** ***（其中“1080172850624* ******* ”是用户的 Google 个人资料 ID）。但是，当我要在浏览器中打开此 URL 时，出现以下错误：“错误：未找到请求的 URL /1080172850624* *******在此服务器上未找到。” 您的帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:21:37.227

您可以使用[适用于 Android](https://developers.google.com/+/mobile/android/)（或[iOS](https://developers.google.com/+/mobile/ios/)）的 Google+ SDK 对用户进行身份验证，获取 OAuth 令牌，然后您可以进行[REST API 调用以获取公共数据](https://developers.google.com/+/api/)，例如用户发布的帖子。

对于第二个问题，您不能在任何 SDK 中向 Google+ 发帖。用户可以使用“分享”功能来控制他们想要分享的内容以及分享给谁。

# mahout - Mahout：如何为新用户推荐

> ID：12857693
> 
> 赞同：6
> 
> 时间：2012-10-12T11:04:19.337
> 
> 标签：mahout, svd

我们计划将 Mahout 用于电影推荐系统。我们还计划使用 SVD 进行模型构建。

当新用户到来时，我们将要求他/她对一定数量的电影（比如 10 部电影）进行评分。

问题是，为了向这个新用户提出建议，我们必须再次重建整个模型。

有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T12:40:20.597

是的……虽然不在 Mahout 中。那里的实现本质上是围绕数据模型的定期重新加载和重建而构建的。在某些实现中，这仍然允许您动态使用新数据，例如基于邻域的实现。我认为基于 SVD 的内存中不会这样做（我没有写。）

从理论上讲，您可以从第一次点击或评分开始，通过折叠将目标项目/电影投影回用户特征空间来进行推荐。为了大大简化——如果你对输入 A 的秩 k 近似分解是 Ak = Uk * Sk * Vk'，那么对于一个新用户 u，你需要一个新的行 Uk_u 来进行更新。你有A_u。

Uk = Ak * (Vk')^-1 * (Sk)^-1。好消息是右边的那两个倒数是微不足道的。(Vk')^-1 = Vk 因为它具有正交列。(Sk)^-1 只是取 Sk 的对角元素的倒数。

所以 Uk_u = Ak_u * (Vk')^-1 * (Sk)^-1。你没有 Ak_u，但是，你有 A_u 大致相同，所以你使用它。

如果你喜欢 Mahout，并且喜欢矩阵分解，我建议你考虑 ALS 算法。这是一个更简单的过程，因此速度更快（但会使折叠变得更难——请参阅[我给出的最近解释](http://www.slideshare.net/srowen/big-practical-recommendations-with-alternating-least-squares)的结尾）。它非常适合推荐。

这也存在于 Mahout 中，尽管没有实现折叠。[Myrrix](http://myrrix.com)是我继续 Mahout 工作的地方，它实现了所有这些。

# cakephp - cakePHP 检查用户是否被允许对特定项目执行操作的方法是什么？

> ID：12857694
> 
> 赞同：0
> 
> 时间：2012-10-12T11:04:19.883
> 
> 标签：cakephp

使用 cakePHP 这是我的情况：

我有用户和`Order`s。`Order`s 由用户创建。只有创建它的用户才被`Order`允许编辑它。（管理员也可以，但我认为这并不重要）。

我正在使用标准的 Auth 组件，并在我的 OrdersController 中有一个 isAuthorized 函数，用于检查用户是否已登录并阻止用户执行他们不允许执行的操作。

我想根据传递的参数和来自数据库的数据来决定用户是否可以执行操作。即用户是否拥有他们试图编辑的订单？如果是这种情况，我目前正在检查每个动作。

有没有一种方法可以触发通过从 isAuthorized 返回 false 触发的相同工作流？也许抛出异常？

我不想在 isAuthorized 函数中进行这些更精细的检查，因为它需要使用丑陋的方法来访问传递的参数，以及重复数据检索。cakePHP 期望我如何处理这个问题？

（我要在其他控制器中进行更复杂的检查）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:33:22.143

这就是你要找的：

[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html#authorization-who-s-allowed-to-access-what](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html#authorization-who-s-allowed-to-access-what)

> 覆盖 AppController 的 isAuthorized() 调用并在内部检查父类是否已经授权用户。如果他不是，那么只允许他访问添加操作，并有条件地访问编辑和删除。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:37:45.373

有几种方法可以让它发挥作用。我在这里概述了一个简单的示例：http: [//nuts-and-bolts-of-cakephp.com/2009/04/22/simplistic-example-of-row-level-access-control-with-auth-security-和-app-model-in-cakephp/](http://nuts-and-bolts-of-cakephp.com/2009/04/22/simplistic-example-of-row-level-access-control-with-auth-security-and-app-model-in-cakephp/)

它应该让您大致了解如何处理此问题，然后您可以在此基础上作为一种方法进行构建。

# css - 启动和悬停时的 CSS3 动画？

> ID：12857700
> 
> 赞同：0
> 
> 时间：2012-10-12T11:05:01.260
> 
> 标签：css, css-transitions

我有一个小问题。我希望当用户访问页面并且将鼠标悬停在元素（它是图像）上时触发以下动画。现在它只是在访问页面时触发，但`.animated:hover`被忽略？有什么建议吗？

```
.animated, .animated:hover {
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both;
    -ms-animation-fill-mode: both;
    -o-animation-fill-mode: both;
    animation-fill-mode: both;
    -webkit-animation: swing 4s;
    -moz-animation: swing 4s;
    -ms-animation: swing 4s;
    -o-animation: swing 4s;
    animation: swing 4s;
}

@-webkit-keyframes swing {
    0%, 10%, 20%, 30%, 40%, 50%, 60%, 70%, 80%, 90%, 100% { -webkit-transform-origin: bottom center; }
    0% { -webkit-transform: rotate(0deg); }
    10% { -webkit-transform: rotate(15deg); }
    20% { -webkit-transform: rotate(-10deg); }  
    30% { -webkit-transform: rotate(10deg); }   
    40% { -webkit-transform: rotate(-8deg); }   
    50% { -webkit-transform: rotate(8deg); }    
    60% { -webkit-transform: rotate(-5deg); }
    70% { -webkit-transform: rotate(5deg); }
    80% { -webkit-transform: rotate(-2deg); }   
    90% { -webkit-transform: rotate(2deg); }    
    100% { -webkit-transform: rotate(0deg); }
}

@-moz-keyframes swing {
    0% { -moz-transform: rotate(0deg); }
    10% { -moz-transform: rotate(15deg); }
    20% { -moz-transform: rotate(-10deg); } 
    30% { -moz-transform: rotate(10deg); }  
    40% { -moz-transform: rotate(-8deg); }  
    50% { -moz-transform: rotate(8deg); }   
    60% { -moz-transform: rotate(-5deg); }
    70% { -moz-transform: rotate(5deg); }
    80% { -moz-transform: rotate(-2deg); }  
    90% { -moz-transform: rotate(2deg); }   
    100% { -moz-transform: rotate(0deg); }
}

@-o-keyframes swing {
    0% { -o-transform: rotate(0deg); }
    10% { -o-transform: rotate(15deg); }
    20% { -o-transform: rotate(-10deg); }   
    30% { -o-transform: rotate(10deg); }    
    40% { -o-transform: rotate(-8deg); }    
    50% { -o-transform: rotate(8deg); } 
    60% { -o-transform: rotate(-5deg); }
    70% { -o-transform: rotate(5deg); }
    80% { -o-transform: rotate(-2deg); }    
    90% { -o-transform: rotate(2deg); } 
    100% { -o-transform: rotate(0deg); }
}

@keyframes swing {
    0% { transform: rotate(0deg); }
    10% { transform: rotate(15deg); }
    20% { transform: rotate(-10deg); }  
    30% { transform: rotate(10deg); }   
    40% { transform: rotate(-8deg); }   
    50% { transform: rotate(8deg); }    
    60% { transform: rotate(-5deg); }
    70% { transform: rotate(5deg); }
    80% { transform: rotate(-2deg); }   
    90% { transform: rotate(2deg); }    
    100% { transform: rotate(0deg); }
}

.swing {
    -webkit-transform-origin: bottom center;
    -moz-transform-origin: bottom center;
    -o-transform-origin: bottom center;
    transform-origin: bottom center;
    -webkit-animation-name: swing;
    -moz-animation-name: swing;
    -o-animation-name: swing;
    animation-name: swing;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T13:52:46.223

不错的动画，悬停正在被取消，因为它正在寻找原始 CSS 类中的更改，您可以通过将悬停声明为动画功能来解决此问题。

```
/*PAGE LOAD ANIMATION*/
  .animated{
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both;
    -ms-animation-fill-mode: both;
    -o-animation-fill-mode: both;
    animation-fill-mode: both;
    -webkit-animation: swing 4s;
    -moz-animation: swing 4s;
    -ms-animation: swing 4s;
    -o-animation: swing 4s;
    animation: swing 4s;
}

@-webkit-keyframes swing {
    0%, 10%, 20%, 30%, 40%, 50%, 60%, 70%, 80%, 90%, 100% { -webkit-transform-origin: bottom center; }
    0% { -webkit-transform: rotate(0deg); }
    10% { -webkit-transform: rotate(15deg); }
    20% { -webkit-transform: rotate(-10deg); }  
    30% { -webkit-transform: rotate(10deg); }   
    40% { -webkit-transform: rotate(-8deg); }   
    50% { -webkit-transform: rotate(8deg); }    
    60% { -webkit-transform: rotate(-5deg); }
    70% { -webkit-transform: rotate(5deg); }
    80% { -webkit-transform: rotate(-2deg); }   
    90% { -webkit-transform: rotate(2deg); }    
    100% { -webkit-transform: rotate(0deg); }
}

@-moz-keyframes swing {
    0% { -moz-transform: rotate(0deg); }
    10% { -moz-transform: rotate(15deg); }
    20% { -moz-transform: rotate(-10deg); } 
    30% { -moz-transform: rotate(10deg); }  
    40% { -moz-transform: rotate(-8deg); }  
    50% { -moz-transform: rotate(8deg); }   
    60% { -moz-transform: rotate(-5deg); }
    70% { -moz-transform: rotate(5deg); }
    80% { -moz-transform: rotate(-2deg); }  
    90% { -moz-transform: rotate(2deg); }   
    100% { -moz-transform: rotate(0deg); }
}

@-o-keyframes swing {
    0% { -o-transform: rotate(0deg); }
    10% { -o-transform: rotate(15deg); }
    20% { -o-transform: rotate(-10deg); }   
    30% { -o-transform: rotate(10deg); }    
    40% { -o-transform: rotate(-8deg); }    
    50% { -o-transform: rotate(8deg); } 
    60% { -o-transform: rotate(-5deg); }
    70% { -o-transform: rotate(5deg); }
    80% { -o-transform: rotate(-2deg); }    
    90% { -o-transform: rotate(2deg); } 
    100% { -o-transform: rotate(0deg); }
}

@keyframes swing {
    0% { transform: rotate(0deg); }
    10% { transform: rotate(15deg); }
    20% { transform: rotate(-10deg); }  
    30% { transform: rotate(10deg); }   
    40% { transform: rotate(-8deg); }   
    50% { transform: rotate(8deg); }    
    60% { transform: rotate(-5deg); }
    70% { transform: rotate(5deg); }
    80% { transform: rotate(-2deg); }   
    90% { transform: rotate(2deg); }    
    100% { transform: rotate(0deg); }
}

.swing {
    -webkit-transform-origin: bottom center;
    -moz-transform-origin: bottom center;
    -o-transform-origin: bottom center;
    transform-origin: bottom center;
    -webkit-animation-name: swing;
    -moz-animation-name: swing;
    -o-animation-name: swing;
    animation-name: swing;
}
/*HOVER ANIMIATION*/
.animated:hover{
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both;
    -ms-animation-fill-mode: both;
    -o-animation-fill-mode: both;
    animation-fill-mode: both;
    -webkit-animation: swingHover 4s;
    -moz-animation: swingHover 4s;
    -ms-animation: swingHover 4s;
    -o-animation: swingHover 4s;
    animation: swingHover 4s;
}

@-webkit-keyframes swingHover {
    0%, 10%, 20%, 30%, 40%, 50%, 60%, 70%, 80%, 90%, 100% { -webkit-transform-origin: bottom center; }
    0% { -webkit-transform: rotate(0deg); }
    10% { -webkit-transform: rotate(15deg); }
    20% { -webkit-transform: rotate(-10deg); }  
    30% { -webkit-transform: rotate(10deg); }   
    40% { -webkit-transform: rotate(-8deg); }   
    50% { -webkit-transform: rotate(8deg); }    
    60% { -webkit-transform: rotate(-5deg); }
    70% { -webkit-transform: rotate(5deg); }
    80% { -webkit-transform: rotate(-2deg); }   
    90% { -webkit-transform: rotate(2deg); }    
    100% { -webkit-transform: rotate(0deg); }
}

@-moz-keyframes swingHover {
    0% { -moz-transform: rotate(0deg); }
    10% { -moz-transform: rotate(15deg); }
    20% { -moz-transform: rotate(-10deg); } 
    30% { -moz-transform: rotate(10deg); }  
    40% { -moz-transform: rotate(-8deg); }  
    50% { -moz-transform: rotate(8deg); }   
    60% { -moz-transform: rotate(-5deg); }
    70% { -moz-transform: rotate(5deg); }
    80% { -moz-transform: rotate(-2deg); }  
    90% { -moz-transform: rotate(2deg); }   
    100% { -moz-transform: rotate(0deg); }
}

@-o-keyframes swingHover {
    0% { -o-transform: rotate(0deg); }
    10% { -o-transform: rotate(15deg); }
    20% { -o-transform: rotate(-10deg); }   
    30% { -o-transform: rotate(10deg); }    
    40% { -o-transform: rotate(-8deg); }    
    50% { -o-transform: rotate(8deg); } 
    60% { -o-transform: rotate(-5deg); }
    70% { -o-transform: rotate(5deg); }
    80% { -o-transform: rotate(-2deg); }    
    90% { -o-transform: rotate(2deg); } 
    100% { -o-transform: rotate(0deg); }
}

@keyframes swingHover {
    0% { transform: rotate(0deg); }
    10% { transform: rotate(15deg); }
    20% { transform: rotate(-10deg); }  
    30% { transform: rotate(10deg); }   
    40% { transform: rotate(-8deg); }   
    50% { transform: rotate(8deg); }    
    60% { transform: rotate(-5deg); }
    70% { transform: rotate(5deg); }
    80% { transform: rotate(-2deg); }   
    90% { transform: rotate(2deg); }    
    100% { transform: rotate(0deg); }
}

.swingHover {
    -webkit-transform-origin: bottom center;
    -moz-transform-origin: bottom center;
    -o-transform-origin: bottom center;
    transform-origin: bottom center;
    -webkit-animation-name: swingHover;
    -moz-animation-name: swingHover;
    -o-animation-name: swingHover;
    animation-name: swingHover;
} 
```

# ms-access - 尝试在 Access 数据库中添加记录时出现错误“80040e07”

> ID：12857707
> 
> 赞同：1
> 
> 时间：2012-10-12T11:05:14.997
> 
> 标签：ms-access, asp-classic

尝试使用经典 ASP 在 Access 中添加记录时出现错误 80040e07。该代码昨天运行良好。

> Microsoft JET 数据库引擎错误“80040e07”
> 
> 条件表达式中的数据类型不匹配。
> 
> /alumni/admin/addvalue.asp，第 3 行

btitle 、*bname*、*baddress*、*bphone*和*bpincode**字段*可以为空，而其他字段为必填项。

 ***我的代码：

```
dim conn, rs, t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, t14, t15, t16, t17, t18, t19, t20, t21, concat, sqlstr
Set conn=Server.createObject("ADODB.Connection")
Set rs=Server.createObject("ADODB.Recordset")
conn.open="Provider=Microsoft.Jet.OLEDB.4.0;Data Source="&Server.MapPath("\alumni/alumni.mdb") & ""
t1=Request.form("txtfname")
t2=Request.form("txtlname")
t3=Request.form("txtprn")
t4=Request.form("txtbdate")
t5=Request.form("gender")
t6=Request.form("txtmail")
t7=Request.form("txtaddrs")
t8=Request.form("txtcity")
t9=Request.form("txtstate")
t10=Request.form("txtpincode")
t11=Request.form("txtpphone")
t12=Request.form("txtsecphone")
t13=Request.form("drpdegree")
t14=Request.form("drppassyear")
t15=Request.form("txtdesg")
t16=Request.form("txtcname")
t17=Request.form("txtcaddr")
t18=Request.form("txtccity")
t19=Request.form("txtcstate")
t20=Request.form("txtcpincode")
t21=Request.form("txtcphone")
t22=Request.form("txtcmail")
concat=t14&t3
if(t20="")then
    t20=0
end if
sqlstr="insert into users(userid,passwd,utype,ufname,ulname,uprnumber,ubdate,ugender,uemail,uaddress,ucity,ustate,upincode,upphone,usphone,udegree,upassyear,btitle,bname,baddress,bcity,bstate,bpincode,bphone,bemail)values('"&t6&"','"&concat&"','student','"&t1&"','"&t2&"','"&t3&"','"&t4&"','"&t5&"','"&t6&"','"&t7&"','"&t8&"','"&t9&"','"&t10&"','"&t11&"','"&t12&"','"&t13&"','"&t14&"','"&t15&"','"&t16&"','"&t17&"','"&t18&"','"&t19&"','"&t20&"','"&t21&"','"&t22&"')"
response.write("this is the string"&sqlstr)
'response.write("THIS IS PASSWORD "+concat)
rs.open "insert into users(userid,passwd,utype,ufname,ulname,uprnumber,ubdate,ugender,uemail,uaddress,ucity,ustate,upincode,upphone,usphone,udegree,upassyear,btitle,bname,baddress,bcity,bstate,bpincode,bphone,bemail)values('"&t6&"','"&concat&"','student','"&t1&"','"&t2&"','"&t3&"','"&t4&"','"&t5&"','"&t6&"','"&t7&"','"&t8&"','"&t9&"','"&t10&"','"&t11&"','"&t12&"','"&t13&"','"&t14&"','"&t15&"','"&t16&"','"&t17&"','"&t18&"','"&t19&"',"&t20&",'"&t21&"','"&t22&"')",conn 
```

JavaScript 代码：

```
var fname = '<%=t1&t2%>';
var email='<%=t6%>';
var passwd='<%=concat%>';
alert('hi,'+fname+'your regestration is successful.'+'\nyour Id='+email+'\nPassword='+passwd);
window.location="http://localhost/alumni/default.asp"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:46:55.383

像这样禁用`rs.open`线路...

```
'rs.open "insert into users ... 
```

然后`addvalue.asp`在浏览器中打开并复制此行的输出。

```
response.write("this is the string" & sqlstr) 
```

启动 Access，创建一个新查询，切换到 SQL 视图，然后将复制的内容粘贴到`sqlstr`. 如果查看 SQL 语句没有立即澄清数据类型不匹配错误，您将必须检查字段列表中每个字段的数据类型，并将其与您尝试插入的值进行比较。

但是，在您的 ASP 代码中，我认为您应该使用 ADO Command 对象，并将您的`INSERT`语句修改为参数查询。然后使用[参数集合](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675869%28v=vs.85%29.aspx)添加值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:57:52.127

如果您正在使用经典 ASP 写入 Access 文件，则上面的代码看起来是用 php 编写的。您不插入到 ASP 中，而是更新或添加新的。由于有多种方法可以建立连接，我不会进入连接字符串，但您的查询语法应该

例子：

```
 rs.open "users", conn, 3, 3
 rs.AddNew

 rs("passwd")=request.form("password")
 rs("username")=request.form("username")
 etc...

 rs.update
 rs.close
 conn.close 
```***

# c# - 从 System.ArgumentException 派生可以吗？

> ID：12857708
> 
> 赞同：40
> 
> 时间：2012-10-12T11:05:15.403
> 
> 标签：c#, exception

如果我有一个检查其参数有效性的方法，是否可以抛出我自己的自定义异常`System.ArgumentException`？我之所以问，是因为`ArgumentException`它本身源自，`System.SystemException`并且我看到关于应用程序是否应源自`SystemException`. （尽管间接地，派生自`ArgumentException`仍等于派生自`SystemException`。）

我看到很多指导方针说不要从 Exception 派生`ApplicationException`，而是从 Exception 派生。我对此很满意。我不确定是否也可以从 SystemException 派生。

如果我不应该派生自`SystemException`，那么我应该从什么派生`"invalid argument"`异常类？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-12T11:17:10.427

[关于处理异常的最佳实践](http://msdn.microsoft.com/en-us/library/seyhszts%28v=vs.110%29.aspx)的MSDN 页面说

> 如果传递了无效参数，则抛出 ArgumentException 或从 ArgumentException 派生的类。

所以我会说没关系，甚至推荐。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T11:14:28.450

从 System.ArgumentException 派生的一个好处是，`catch(System.ArgumentException)`块将能够处理您的自定义异常类型以及`System.ArgumentException`. 这可能是也可能不是您想要的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-12T11:11:44.077

如果您想得出“无效参数”异常并且它们没有除此之外的含义，那么`ArgumentException`听起来像是一个合理的候选者：

> **当调用方法并且至少有一个传递的参数不符合被调用方法的参数规范时，将引发**ArgumentException 。**[--MSDN](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx)**

 *** * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-12T11:16:17.167

.Net 中异常背后的最初想法是，基类库（例如系统程序集）中的异常会引发异常，这些异常源自`System.Exception`并建议所有自定义异常都继承自`System.ApplicationException`以区分 BCL 异常和应用程序异常，但是 Microsoft 已经回溯了这一点想法，现在建议所有异常都继承自`System.Exception`.

`Exception`我的建议是从框架中有意义的最低类继承。

如果您的异常意味着除此参数存在问题之外的特定内容，例如，该类型可以为异常添加语义（就像`ArgumentNullException`和`ArgumentOutOfRangeException`做一样）然后制作一个自定义的，如果不是那么只需使用`ArgumentException`并提供有意义的异常消息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-12T11:12:31.033

如果你 100% 重用 ArgumentException 属性并添加一些额外的功能，那就没问题了。但是，当您仅因为它的名称而重用它时，就不行了。**

# asp-classic - 想检查 Recordset 有没有价值

> ID：12857712
> 
> 赞同：2
> 
> 时间：2012-10-12T11:05:21.347
> 
> 标签：asp-classic, ternary-operator

这是一个记录集。

```
...
 Set adoCommand = CreateObject("ADODB.Command")
 Set adoConnection = CreateObject("ADODB.Connection")
...
 adoCommand.CommandText = strQuery
 Set adoRecordset = adoCommand.Execute 
```

我需要检查这个记录集是否有价值。

```
If adoRecordset.Fields("userid").Value Then 
   'do something...
Else
   'do something...
End If 
```

我只是试图检查，但这段代码会发生错误。 **（下面的错误信息由谷歌翻译）**

```
ADODB.Recordset Error '800a0cc1'
Item cannot be found in the collection corresponding to the requested name or ordinal 
```

如果可能的话，我想使用三元运算符。我不知道哪一部分是错的。

```
userid = adoRecordset.Fields("userid").Value ? adoRecordset.Fields("userid").Value : sw 
```

请理解我是asp的新手，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:12:31.010

在尝试按名称访问它们*之前*，您需要检查结果集中是否存在任何行：

```
If adoRecordset.eof Then 
  '//no rows
else
  '// 
```

VBScript 中没有三元运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:12:18.367

试试下面的例子：

```
if adoRecordset.EOF Then
  REM do something
else
  REM do something
end if 
```

# javascript - AngularJS ng-repeat 没有 html 元素

> ID：12857714
> 
> 赞同：91
> 
> 时间：2012-10-12T11:05:30.707
> 
> 标签：javascript, css, html, angularjs

我目前正在使用这段代码来呈现一个列表：

```
<ul ng-cloak>
    <div ng-repeat="n in list">
        <li><a href="{{ n[1] }}">{{ n[0] }}</a></li>
        <li class="divider"></i>
    </div>
    <li>Additional item</li> 
</ul> 
```

但是，该`<div>`元素在某些浏览器上会导致一些非常小的渲染缺陷。我想知道有没有办法在没有 div 容器的情况下执行 ng-repeat，或者有一些替​​代方法可以达到相同的效果。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-09-16T09:08:00.897

正如 Andy Joslin 所说，他们正在研究基于评论的 ng-repeats [，但显然存在太多浏览器问题](https://github.com/angular/angular.js/pull/1646#issuecomment-21039443)。幸运的是，AngularJS 1.2 添加了对重复的内置支持，而无需使用新指令添加子元素`ng-repeat-start`和`ng-repeat-end`.

[下面是一个添加Bootstrap 分页](http://getbootstrap.com/components/#pagination)的小例子：

```
<ul class="pagination">
  <li>
    <a href="#">&laquo;</a>
  </li>
  <li ng-repeat-start="page in [1,2,3,4,5,6]"><a href="#">{{page}}</a></li>
  <li ng-repeat-end class="divider"></li>
  <li>
    <a href="#">&raquo;</a>
  </li>
</ul> 
```

可以在[此处](http://plnkr.co/edit/NdWS1H?p=preview)找到完整的工作示例。

John Lindquist[在他出色的 egghead.io 页面上也有一个视频教程](http://egghead.io/lessons/angularjs-ng-repeat-start)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-01-30T01:16:50.433

## KnockoutJS 无容器绑定语法

请耐心等待：KnockoutJS 提供了一个非常方便的选项，即使用无容器绑定语法进行绑定，如绑定文档 `foreach`的注释 4 中所述。[http://knockoutjs.com/documentation/foreach-binding.html](http://knockoutjs.com/documentation/foreach-binding.html)`foreach`

正如 Knockout 文档示例所示，您可以像这样在 KnockoutJS 中编写绑定：

```
<ul>
    <li class="header">Header item</li>
    <!-- ko foreach: myItems -->
        <li>Item <span data-bind="text: $data"></span></li>
    <!-- /ko -->
</ul> 
```

我认为 AngularJS 不提供这种类型的语法是相当不幸的。

* * *

## 角的`ng-repeat-start`和`ng-repeat-end`

在 AngularJS 解决`ng-repeat`问题的方法中，我遇到的示例属于 jmagnusson 在他的（有用的）答案中发布的类型。

```
<li ng-repeat-start="page in [1,2,3,4,5]"><a href="#">{{page}}</a></li>
<li ng-repeat-end></li> 
```

看到这种语法，我最初的想法是：真的吗？为什么 Angular 会强制所有这些我不想做的额外标记，而这在 Knockout 中要容易得多？但后来 jmagnusson 回答中的 hitautodestruct 评论开始让我想知道：在单独的标签上使用 ng-repeat-start 和 ng-repeat-end 生成了什么？

* * *

## 更清洁的使用方式`ng-repeat-start`和`ng-repeat-end`

在对 hitautodestruct 的断言进行调查后，在大多数情况下，添加`ng-repeat-end`到单独的标签正是我**不想**做的，因为它会生成完全无用的元素：在这种情况下，`<li>`项目中什么都没有。Bootstrap 3 的分页列表设置了列表项的样式，因此看起来您没有生成任何多余的项，但是当您检查生成的 html 时，它们就在那里。

**幸运**的是，您不需要做太多事情来获得更简洁的解决方案和更短的 html：**只需将`ng-repeat-end`声明放在具有`ng-repeat-start`**.

```
<ul class="pagination">
  <li>
    <a href="#">&laquo;</a>
  </li>    
  <li ng-repeat-start="page in [1,2,3,4,5]" ng-repeat-end><a href="#"></a></li>
  <li>
    <a href="#">&raquo;</a>
  </li>
</ul> 
```

这有 3 个优点：

1.  少写html标签
2.  Angular 不会生成无用的空标签
3.  当要重复的数组为空时，`ng-repeat`不会生成带有的标签，这与 Knockout 的无容器绑定在这方面为您提供的优势相同

* * *

## 但是还有一种更清洁的方法

在进一步查看 github 中关于 Angular 的这个问题的评论后，[https://github.com/angular/angular.js/issues/1891](https://github.com/angular/angular.js/issues/1891)，
您不需要使用`ng-repeat-start`并`ng-repeat-end`获得相同的优势。相反，再次分叉 jmagnusson 的例子，我们可以去：

```
<ul class="pagination">
  <li>
    <a href="#">&laquo;</a>
  </li>
  <li ng-repeat="page in [1,2,3,4,5,6]"><a href="#">{{page}}</a></li>
  <li>
    <a href="#">&raquo;</a>
  </li>
</ul> 
```

那么什么时候使用`ng-repeat-start`and`ng-repeat-end`呢？根据[角度文档](http://docs.angularjs.org/api/ng.directive:ngRepeat)，到

> ...重复一系列元素，而不仅仅是一个父元素...

## 废话不多说，举几个例子吧！

很公平; 这个 jsbin 将通过五个示例来说明当你`ng-repeat-end`在同一个标​​签上使用和不使用时会发生什么。

### [http://jsbin.com/eXaPibI/1/](http://jsbin.com/eXaPibI/1/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-12T20:58:46.723

ngRepeat 可能还不够，但是您可以将其与自定义指令结合使用。如果您不介意一点 jQuery，您可以将添加分隔项的任务委托给代码。

```
 <li ng-repeat="item in coll" so-add-divide="your exp here"></li> 
```

这样一个简单的指令实际上并不需要属性值，但可能会给你很多可能性，比如根据索引、长度等有条件地添加分隔符或完全不同的东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-17T11:54:23.227

我最近遇到了同样的问题，因为我不得不重复任意的跨度和图像集合——在它们周围有一个元素不是一种选择——但是有一个简单的解决方案，创建一个“null”指令：

```
app.directive("diNull", function() {
        return {
            restrict: "E",
            replace: true,
            template: ""
        };
    }); 
```

然后，您可以在该元素上使用重复，其中 element.url 指向该元素的模板：

```
<di-null ng-repeat="element in elements" ng-include="element.url" ></di-null> 
```

这将重复任意数量的不同模板，它们周围没有容器

注意：嗯，我可以发誓这在渲染时删除了 di-null 元素，但再次检查它并没有......仍然解决了我的布局问题......curioser和curioser......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-20T22:40:21.697

真正有效的解决方案

html

```
<remove  ng-repeat-start="itemGroup in Groups" ></remove>
   html stuff in here including inner repeating loops if you want
<remove  ng-repeat-end></remove> 
```

添加一个 angular.js 指令

```
//remove directive
(function(){
    var remove = function(){

        return {    
            restrict: "E",
            replace: true,
            link: function(scope, element, attrs, controller){
                element.replaceWith('<!--removed element-->');
            }
        };

    };
    var module = angular.module("app" );
    module.directive('remove', [remove]);
}()); 
```

简要说明，

ng-repeat 将自身绑定到`<remove>`元素并循环，因为我们使用了 ng-repeat-start / ng-repeat-end 它循环一个 html 块而不仅仅是一个元素。

然后自定义删除指令将`<remove>`开始和结束元素放置在`<!--removed element-->`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-12T12:04:00.873

有一个注释指令限制，但 ngRepeat 不支持它（因为它需要一个元素来重复）。

我想我看到 Angular 团队说他们会处理评论 ng-repeats，但我不确定。您应该在 repo 上为它打开一个问题。 [http://github.com/angular/angular.js](http://github.com/angular/angular.js)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-13T11:49:18.243

如果您使用的是 Bootstrap，则没有 Angular 魔术方法可以做到这一点，对于您的情况，您可以这样做以获得有效的 HTML。然后你会得到与添加 li.divider 相同的效果

创建一个类：

```
span.divider {
 display: block;
} 
```

现在将您的代码更改为：

```
<ul ng-cloak>
 <li div ng-repeat="n in list">
    <a href="{{ n[1] }}">{{ n[0] }}</a>
    <span class="divider"></span>
 </li>
 <li>Additional item</li>
</ul> 
```

# sql - 从 SQL 存储过程中提取毫秒数据

> ID：12857716
> 
> 赞同：2
> 
> 时间：2012-10-12T11:05:30.803
> 
> 标签：sql, datetime, stored-procedures, powershell, sql-server-2000

我一直在寻找有关此主题的答案，并已在另一个论坛上发帖，但这似乎是所有知识的字体。我正在尝试使用 PowerShell 从 SQL Server 2000 数据库中提取数据。Powershell 脚本调用一个存储过程，然后提取数据并将其导出到 CSV 文件中。问题是输出数据中的日期时间字段已经丢失了毫秒。当 PowerShell 将数据库中的数据提取到临时表中时，就会发生这种情况。这是两段代码。

PowerShell 脚本

```
#VARIABLES
$SqlQuery = "SAP_proc"
#Connection Strings
$Server = "server"
$Database = "db_dab"
#Output Files
$OutputPath = "c:\Sapout.csv"
#END OF VARIABLES

#SQL Connection
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server=$Server;Database=$Database;Integrated Security=True"
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.CommandText = "SAP_proc"
$SqlCmd.Connection = $SqlConnection
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd
$DataSet = New-Object System.Data.DataSet
$DataOut = $SqlAdapter.Fill($DataSet)
#$DataOut = $SqlAdapter.FillSchema($DataSet,[System.Data.SchemaType]::Source)
#Data Manipulation
$DataOut | Out-Null
#Export Data to Hash Table
$DataTable = $DataSet.Tables[0] 
#Export Has table to CSV
$DataTable | Export-CSV -Delimiter "," -Encoding Unicode -Path $OutputPath -NoTypeInformation
$SqlConnection.Close() 
```

存储过程

```
ALTER proc [dbo].[SAP_proc]
as
DECLARE @return_value int
DECLARE @starttime datetime
DECLARE @endtime datetime

SET @starttime = DATEADD (dd, -30, CURRENT_TIMESTAMP)
SET @endtime = CURRENT_TIMESTAMP

EXEC    @return_value = [dbo].[sp_agent]
        @starttime
        ,@endtime 

SELECT  'Return Value' = @return_value 
```

因为其他存储过程`SP_agent`是由软件创建的，所以我无法编辑它。此外，我不想在我的命令文本字符串中复制软件定义的存储过程（使用 SELECT 转换为日期时间的 varchar），因为它是一个庞然大物的存储过程。

任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:17:53.610

这不是 Powershell 问题或临时表问题。这是因为当您使用不包括毫秒的默认 tostring 方法调用 export-csv 时，您的日期时间列将转换为字符串。如果你想要毫秒，那么在 tostring 方法调用中指定它：

```
$a = get-date
$a.ToString("d/M/yyyy hh:mm:ss.fff tt")

#To to something similar with your export-csv of a datatable you can create an expression:

$DataTable | select column1, column2, @{n=datecolumn;e={$_.datecolumn.ToString("d/M/yyyy hh:mm:ss.fff tt")}} | export-csv <rest of code> 
```

**编辑于 2012**年 10 月 17 日看来你仍然有这个问题。所以这是一个完整的脚本，我已经测试了输出毫秒。您需要将变量部分更改为您的环境。我希望这有帮助：

```
#VARIABLES
$SqlQuery = "select 'test' as column1, 'milliseconds' as column2, getdate() as datecolumn"
#Connection Strings
$Server = "$env:computername\sql1"
$Database = "tempdb"
#Output Files
$OutputPath = "./millisec.csv"
#END OF VARIABLES

#SQL Connection
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server=$Server;Database=$Database;Integrated Security=True"
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.CommandText = $SqlQuery
$SqlCmd.Connection = $SqlConnection
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd
$DataSet = New-Object System.Data.DataSet
$DataOut = $SqlAdapter.Fill($DataSet)
#$DataOut = $SqlAdapter.FillSchema($DataSet,[System.Data.SchemaType]::Source)
#Data Manipulation
$DataOut | Out-Null
#Export Data to Hash Table
$DataTable = $DataSet.Tables[0] 
#Export Has table to CSV
#$DataTable | Export-CSV -Delimiter "," -Encoding Unicode -Path $OutputPath -NoTypeInformation
$DataTable | select column1, column2, @{n='datecolumn';e={$_.datecolumn.ToString("M/d/yyyy hh:mm:ss.fff tt")}} | export-csv $OutputPath -NoTypeInformation -force

$SqlConnection.Close() 
```

**#另一个带有解释的代码示例。添加于 2012 年 10 月 23 日**

```
#VARIABLES
$SqlQuery = "select getdate() as datecolumn"
#Connection Strings
$Server = "$env:computername\sql1"
$Database = "tempdb"

$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server=$Server;Database=$Database;Integrated Security=True"
$SqlConnection.Open() 
$SqlCmd = new-Object System.Data.SqlClient.SqlCommand($SqlQuery, $SqlConnection) 
$data = $SqlCmd.ExecuteScalar() 
$SqlConnection.Close()

#Notice NO millisecond
Write-Output $data

#See $data is an object of type System.DateTime
$data | gm

#There's a property called millisecond
#Millisecond          Property       int Millisecond {get;} 

#Although you don't "see" millisecond's on screen it's still there
$data.Millisecond

#Powershell uses a types and format rules to define how data is display on screen. You can see this by  looking at 
#C:\Windows\System32\WindowsPowerShell\v1.0\types.ps1xml and searching for "DataTime". This file along with format file define how data is displayed
#When you display datatime screen it's implicitly calling
#Searching for datetime in types.ps1xml you'll find this line:
#"{0} {1}" -f $this.ToLongDateString(), $this.ToLongTimeString()

#for our example

"{0} {1}" -f $data.ToLongDateString(), $data.ToLongTimeString()

#So millisecond is still there, but if you want millisecond in your output to CSV, screen or file you'll need to call a ToString method with a date format. Here's an example:
$data.ToString("M/d/yyyy hh:mm:ss.fff tt") 
```

# ibm-mq - 使用 WebSphere MQ 实现 2 路 SSL 认证

> ID：12857719
> 
> 赞同：4
> 
> 时间：2012-10-12T11:05:53.050
> 
> 标签：ibm-mq

我使用 Java 客户端，使用`JMS/JNDI`. 使用单向 SSL 身份验证时连接正常`SSLCAUTH(OPTIONAL)`。我做的第一步是导出客户端的公共证书：

```
keytool -export -keystore keystore -storepass storepass -alias CLIENT -file client.cer 
```

然后我将此证书添加到 MQ 密钥存储库。

```
gsk7cmd -cert -add -db keydb.kdb -pw password -label ibmwebspheremqclient -file client.cer -format binary 
```

我终于切换到`SSLCAUTH(REQUIRED)`模式。

我收到以下错误日志。消息很清楚，它找不到我的客户端证书。我读到我的客户证书应该有一个标签`ibmwebspheremq<client_user_id>`。因为我是通过 Java 连接的，所以这个用户 ID 是什么？

```
AMQ9637: Channel is lacking a certificate. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:40:20.713

根据 Technote [*Specifying the userid in the SSL certificate label for an MQ 客户端*](http://www-01.ibm.com/support/docview.wss?rs=0&uid=swg21245474)，Java 和 JMS 客户端不会根据标签找到他们的证书。

问题通常是信任存储和密钥存储之间的不匹配。我经常看到两个问题。

1.  应用程序指定了信任库，但没有指定密钥库。这适用于匿名（单向）SSL，但不适用于相互验证的 SSL。应用程序*必须*为相互身份验证指定密钥存储和信任存储。
2.  有时应用程序指定了一个信任存储文件，但私有证书在密钥存储中。或者应用程序为信任存储和密钥存储指定相同的文件，并且个人证书实际上位于单独的信任存储文件中。

这两种方法都能解决问题吗？如果不是，请使用`keytool -cert -list`密钥库和信任库以及设置密钥库/信任库的命令行或代码部分更新问题。

# eclipse - 使用 cmake -> eclipse CDT 项目生成器的项目特定设置？

> ID：12857724
> 
> 赞同：3
> 
> 时间：2012-10-12T11:06:19.333
> 
> 标签：eclipse, cmake, eclipse-cdt

从基于 cmake 的项目生成 eclipse 项目文件效果非常好。我们不再需要将 eclipse 项目文件提交到存储库。

但是像“代码样式”这样的项目特定设置是什么。在一个固定的 Eclipse 项目中，我可以保存并提交这个设置。是否可以在基于 cmake 的项目中为 Eclipse 生成项目文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:50:57.933

我没有看到解决方案，因为 cmake 完全重新生成了项目。这就是我在 Eclipse 中使用 Makefile 项目的原因。我看不出这有什么缺点，因为 eclipse 可以很容易地触发 make 命令。

# php - 如何将 Amazon API JSON 响应保存到 JSON 文件？

> ID：12857729
> 
> 赞同：0
> 
> 时间：2012-10-12T11:06:27.853
> 
> 标签：php, json, amazon

我正在尝试将 Amazon API 响应对象保存到一个名为 items.json 的文件中。响应本身在 json 中，但是当我使用这个函数时，我得到的文件是空的。不要介意 unlink() 函数，这是一项 cron 工作。

```
<?php
/**
 * Amazon ECS library
 */

if ("cli" !== PHP_SAPI)
{
    echo "<pre>";
}

if (is_file('sampleSettings.php'))
{
  include 'sampleSettings.php';
}

defined('AWS_API_KEY') or define('AWS_API_KEY', 'API KEY');
defined('AWS_API_SECRET_KEY') or define('AWS_API_SECRET_KEY', 'SECRET KEY');
defined('AWS_ASSOCIATE_TAG') or define('AWS_ASSOCIATE_TAG', 'ASSOCIATE TAG');

require '../lib/AmazonECS.class.php';

try
{

    $amazonEcs = new AmazonECS('AWS_API_KEY', 'AWS_API_SECRET_KEY', 'com', 'AWS_ASSOCIATE_TAG');

   $amazonEcs->associateTag(AWS_ASSOCIATE_TAG);

   $response = $amazonEcs->category('KindleStore')->responseGroup('Small,Images')->search('free ebooks');

    //Check if the json file exist
   $filename = "/home/myusername/public_html/my/path_to/items.json";
   if(file_exists($filename)){
    //delete it
    unlink($filename);
    file_put_contents("items.json", $response);
   }else{
    file_put_contents("items.json", $response);
   }    
}
catch(Exception $e)
{
  echo $e->getMessage();
}

if ("cli" !== PHP_SAPI)
{
    echo "</pre>";
} 
```

对于如何解决这个问题，有任何的建议吗？

编辑： $response 变量不为空；这是我 var_dump 得到的结果：

```
 ["Item"]=>
    array(10) {
      [0]=>
      object(stdClass)#15 (8) {
        ["ASIN"]=>
        string(10) "B004YDSL9Q"
        ["DetailPageURL"]=>
        string(208) "http://www.amazon.com/The-Love-suspense-mystery-ebook/dp/B004YDSL9Q%3F"
        ["ItemLinks"]=>
        object(stdClass)#16 (1) {
          ["ItemLink"]=>
          array(7) {
            [0]=>
            object(stdClass)#17 (2) {
              ["Description"]=>
              string(17) "Technical Details"
              ["URL"]=>
              string(218) "http://www.amazon.com/The-Love-suspense-mystery-ebook/dp/tech-data/B004YDSL9Q%3F"
            }
            [1]=>
            object(stdClass)#18 (2) {
              ["Description"]=>
              string(20) "Add To Baby Registry"
              ["URL"]=>
              string(215) "http://www.amazon.com/gp/registry/baby/add-item.html"
            }
            [2]=>
            object(stdClass)#19 (2) {
              ["Description"]=>
              string(23) "Add To Wedding Registry"
              ["URL"]=>
              string(218) "http://www.amazon.com/gp/registry/wedding/add-item.html%3Fasin.0%3DB004YDSL9Q%26"
            }
            [3]=>
            object(stdClass)#20 (2) {
              ["Description"]=>
              string(15) "Add To Wishlist"
              ["URL"]=>
              string(219) "http://www.amazon.com/gp/registry/wishlist/add-item.html%3Fasin.0%3DB004YDSL9Q%26"
            }
            [4]=>
            object(stdClass)#21 (2) {
              ["Description"]=>
              string(13) "Tell A Friend"
              ["URL"]=>
              string(184) "http://www.amazon.com/gp/pdp/taf/B004YDSL9Q%3F"
            }
            [5]=>
            object(stdClass)#22 (2) {
              ["Description"]=>
              string(20) "All Customer Reviews"
              ["URL"]=>
              string(188) "http://www.amazon.com/review/product/B004YDSL9Q%3FSubscriptionId%3"
            }
            [6]=>
            object(stdClass)#23 (2) {
              ["Description"]=>
              string(10) "All Offers"
              ["URL"]=>
              string(190) "http://www.amazon.com/gp/offer-listing/B004YDSL9Q%3"
            }
          }
        } 
```

以及其他物品。

我错了：API 响应**不是**JSON，它是一个对象，您必须将其编码为 json。

**这就是我实际解决的方法：**

```
-cut-

   $response = $amazonEcs->category('KindleStore')->responseGroup('Small,Images')->search('free ebooks');
//json_encode on $response because the response of the API is not JSON, but it is an object

$data = json_encode($response);

//Using stripslashes function to delete all the slashed that has been added to $data by the encoding process

$data2 = stripslashes($data);

file_put_contents("items.json", $data2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:21:02.657

如果您创建的文件为空，则`$response`var 为空。做一些调试。`var_dump`响应，看看你得到了什么。如果文件显示在它应该显示的位置，但它是空的，那么它取决于您尝试在其中存储的内容，在这种情况下是 case `$response`。

所以这样做：

```
var_dump( $response ); 
```

然后回到这里告诉我们你看到了什么。

PS：我会将此作为评论发布（因为我知道这不是一个答案），但我没有代表。

# jquery - 删除 CSS 文件

> ID：12857734
> 
> 赞同：11
> 
> 时间：2012-10-12T11:06:56.217
> 
> 标签：jquery, css, jsp, spring-mvc

我正在使用带有jsp页面的spring MVC进行演示，我在一个jsp页面中有三个选项卡假设**A，B**和**C。**在单击 A 选项卡时，会显示 css 文件（例如 aa.css）已加载到带有相应 div 的 head 标记中，并且单击 B 和 C 的方式相同。主要问题是曾经的**Three**。正在加载**CSS文件，它会相互覆盖。**我还想**从头中删除****css**文件，该文件已在使用**jquery**单击上述任何选项卡时加载，如下所示。

 ****```
 $("#A").click(function(){
     alert("Remove bb and cc.css file form head tag");
  }); 
```

任何想法都会对我有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-12T11:10:34.597

给标签`id`一个。`<link>`

```
<link rel="stylesheet" href="style1.css" id="style1" />
<link rel="stylesheet" href="style2.css" id="style2" /> 
```

并使用此**代码**：

```
$("#A").click(function(){
    $("#style1").attr("disabled", "disabled");
}); 
```

**注意：**虽然 HTML 标准中没有 disabled 属性，但 HTMLLinkElement DOM 对象有一个 disabled 属性。

使用 disabled 作为 HTML 属性是非标准的，仅由某些 Microsoft 浏览器使用。不要使用它。要获得类似的效果，请使用以下技术之一：

*   如果该`disabled`属性已直接添加到页面上的元素，则不要包含该`<link>`元素；
*   通过脚本设置`disabled`DOM 对象的属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T11:12:53.467

您可以通过禁用 css 来卸载它，如下所示：

```
$("#A").click(function(){
    $("link[href*=bb.css]").attr("disabled", "disabled");
    $("link[href*=cc.css]").attr("disabled", "disabled");
    $("link[href*=aa.css]").removeAttr("disabled");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-10T12:45:16.093

我不得不在无法指定 id 的情况下禁用 css 文件，因此要删除以下 css 文件：

```
<link rel="stylesheet" type="text/css" href="http://localhost:8092/bootstrap/css/bootstrap.min.css" disabled="disabled"> 
```

我添加了这个脚本

```
<script type="text/javascript">
  $(document).ready(function() {
    $('link[href*="bootstrap.min.css"]').attr("disabled", "true");
  }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-03T14:35:17.227

你只需给那个链接标签一个 id 或一个类（比如 id="deleteMe"）然后像下面这样删除它：

```
$('head').find('link#deleteMe').remove(); 
```

因此，在您的情况下，当您像这样链接它们时，将 id 添加到每个文件中：

```
<link id="aa" rel="stylesheet" href="First.css" type="text/css" />  
<link id="bb" rel="stylesheet" href="Second.css" type="text/css" />  
<link id="bb" rel="stylesheet" href="Third.css" type="text/css" /> 
```

现在要仅删除 Second.css、Third.css，您必须像这样编写 jQuery：

```
(function ($) {  
    $('head').find('link#aa').remove();  
    $('head').find('link#bb').remove();  
})(jQuery); 
```****

# javascript - 如何在 mvc3 中使用 ajax 将 div id 作为数据发送

> ID：12857736
> 
> 赞同：0
> 
> 时间：2012-10-12T11:07:03.157
> 
> 标签：javascript, ajax, asp.net-mvc-3

大家好，我想使用 ajax 将 div id 作为数据发送。正如您在下面看到的，我正在尝试仅发送“辐射”

```
 <script  type="text/javascript">
      var mydiv = $("#fallout").html();
       $.ajax({
           type: "get", url: "test", data: { mydata: mydiv },
             success: function (data) {

                    $("#font).html(data);
             }
         });
    </script> 
```

这是我的 div

```
<div id="fallout"><p id="font>"Test</p></div> 
```

但它返回为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:08:43.063

试试这个：

```
 $.ajax({
       type: "get", url: "test", data: { mydata: $("#fallout").attr('id') },
         success: function (data)
         {
            $("#font).html(data);
         }
   }); 
```

# iphone - 如何从项目中获取音频文件

> ID：12857741
> 
> 赞同：0
> 
> 时间：2012-10-12T11:07:20.753
> 
> 标签：iphone

我在 iphone 中没有声音 这是我的代码

```
NSString *filepath=[[NSBundle mainBundle]pathForResource:@"horror (2)" ofType:@"mp3" ];
NSLog(@"filepath=%@",filepath);
url=[[NSURL alloc]initFileURLWithPath:filepath ];
NSLog(@"url==%@",url);
audioplayer=[[AVAudioPlayer alloc]initWithContentsOfURL:url error:nil ];
[self.audioplayer prepareToPlay];
self.audioplayer.currentTime=0;
[self.audioplayer play];
audioplayer.numberOfLoops=-1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:12:15.560

检查文件是否存在以及 AVAudioPlayer 提供的错误：

```
 NSString *filepath=[[NSBundle mainBundle]pathForResource:@"horror (2)" ofType:@"mp3" ];
if([[NSFileManager defaultManager] fileExistsAtPath:filepath])
{
  url=[[NSURL alloc]initFileURLWithPath:filepath];
  NSLog(@"url==%@",url);
  if(url)
  {
    NSError *error;
    audioplayer=[[AVAudioPlayer alloc]initWithContentsOfURL:url error:&error];
    self.audioplayer.numberOfLoops=-1;
    [self.audioplayer prepareToPlay];

    if (self.audioPlayer == nil)
        NSLog([error description]);             
    else 
        [self.audioplayer play];
  }
  else
  {
    NSLog(@"URL not created");
  }
}
else
{
  NSLog(@"File not exists");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:15:24.170

`audioplayer`检查实例化变量导致的错误：

```
...
NSError *err;
audioplayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&err];
NSLog(@"ERROR: %@", [err localizedDescription]);
... 
```

这可能会为您提供问题根源的线索。

# excel - CSV 日期和分隔符问题

> ID：12857745
> 
> 赞同：2
> 
> 时间：2012-10-12T11:07:44.813
> 
> 标签：excel, csv, formatting, separator

我有一个 CSV 文件，用逗号分隔，里面有一些日期值，比如`"01/13/2010 05:00:00 AM"`, 或`"04/01/2010 05:00:00 AM"`. 问题是，当我使用 Microsoft Excel 打开 CSV 文件时，这些天数将分别显示为`01/13/2010 05:00:00 AM`和`04/01/2010 05:00`。第二个的值是`04/01/2010 05:00:00`，但它仍然显示`04/01/2010 05:00`。我进行了一些测试，发现 Excel 在某些情况下无法确定哪一天是哪一个月。事实上 Excel 得到一个字符串，如：

```
__/__/____ __:__:__ __ 
```

它从最后两个字符（AM/PM）推导出小时的值，它知道分钟和秒是什么，而且它看到四字符长数字序列时确定年份，所以问题是关于月份和天。如果字符串中的第一个和第二个数字都是 <= 12，那么它无法确定哪个是月份，哪个是年份，所以它弄乱了我的日期格式。

我想要一个日期格式，例如

```
MM/dd/yyyy HH:mm:ss AM/PM 
```

我发现使用名为 TEXT 的函数可以做到这一点，如下所示：

```
=TEXT("04/13/2010 05:54:00 AM", "MM/dd/yyyy HH:mm:ss AM/PM") 
```

它就像一个魅力，但它仍然猜测哪一天是哪一个月。但是，假设客户端将具有与 CSV 中的数据相同的默认日期格式，则月份和日期不会倒置。但是，我不想打开 Excel 并输入公式，因为我需要将此文件提供给客户，并且它应该在他们打开文件时显示正确的值。所以，我需要在逗号分隔的文件中编写公式，但是...... TEXT 是二维的，并且有一个逗号将我的日期与我的格式分开。

如果我输入：

```
= ABS(-5),=TEXT("04/13/2010 05:54:00 AM", "MM/dd/yyyy HH:mm:ss AM/PM") 
```

在我的文件中，我会看到 3 个单元格，第一个是`5`，第二个是`=TEXT("04/13/2010 05:54:00 AM"`，第三个是 `"MM/dd/yyyy HH:mm:ss AM/PM")`。

如何防止这种行为？我可以在函数调用中使用其他东西而不是逗号吗？或者我可以更改分隔符吗？还是有更好的解决方案？

你能启发我，了解如何在 CSV 文件中输入函数调用吗？

提前感谢所有试图提供帮助的人，

拉霍斯阿尔帕德。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:19:30.080

> 如果我输入：
> 
> ```
> = ABS(-5),=TEXT("04/13/2010 05:54:00 AM", "MM/dd/yyyy HH:mm:ss AM/PM") 
> ```
> 
> 在我的文件中，我会看到 3 个单元格，第一个是 5 个，第二个是 =TEXT("04/13/2010 05:54:00 AM"，第三个是 "MM/dd/yyyy HH:mm:ss AM /下午”）。

要使此示例正常工作，您需要用双引号将第二个数据项括起来以转义逗号。因此，您需要使用双双引号将它们解释为双引号内的双引号——我希望这是一个可读的句子。

因此，如果您在文件中使用它，您给出的示例应该可以工作：

```
=ABS(-5),"=TEXT(""04/13/2010 05:54:00 AM"", ""MM/dd/yyyy HH:mm:ss AM/PM"")" 
```

# c++ - 如何使用 glReadPixels() 从 FBO 返回调整大小的图像？

> ID：12857747
> 
> 赞同：3
> 
> 时间：2012-10-12T11:07:47.093
> 
> 标签：c++, opengl, fbo, render-to-texture, mipmaps

很快：我需要一种快速的方法来调整缓冲区图像的大小，然后将像素返回给我以将它们保存到文件等。

目前我首先使用 glReadPixels()，然后我自己通过像素来使用我自己的调整大小函数调整它们的大小。

有什么方法可以加快调整大小，例如让 OpenGL 为我完成这项工作？我想我可以在启用 miplevel 和 mipmapping 的情况下使用 glGetTexImage()，但正如我之前注意到的，该功能在我的 GFX 卡上存在错误，所以我无法使用它。

我只需要一个 miplevel，它可以是 1 到 4 之间的任何值，但不是全部，以节省一些 GPU 内存。那么是否可以只生成一个所需大小的 miplevel？

**注意：**我不认为我可以使用多重采样，因为我需要对模板测试进行像素精确渲染，所以如果我用多重采样渲染它，它会产生模糊的像素，并且它们会因模板测试和遮罩而失败，结果将不正确（AFAIK） . **编辑：**我只想缩放颜色（RGBA）缓冲区！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:30:51.777

创建所需目标大小的帧缓冲区，并使用完全调整大小的缓冲区大小的纹理四边形绘制源图像。然后使用 glReadPixels 读取调整大小的帧缓冲区内容。

伪代码：

```
unbind_texture(OriginalSizeFBOattachmentColorTex);

glBindFramebuffer(OriginalSizeFBO);
render_picture();

glBindFramebuffer(TargetSizeFBO); // TargetSizeFBO used a Renderbuffer color attachment
glBindTexture(OriginalSizeFBOattachmentColorTex);
glViewport(TargetSize);
render_full_viewport_quad_with_texture();

glReadPixels(...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:23:48.443

如果您有 OpenGL 3.0 或其他`EXT_framebuffer_blit`可用的（很可能 - 自 2005 年左右以来的所有 nVidia 卡，自 2008 年左右以来的所有 ATI 卡，甚至英特尔高清显卡都声称支持它），那么您可以[`glBlitFramebuffer[EXT]`](http://www.opengl.org/sdk/docs/man3/xhtml/glBlitFramebuffer.xml)进入更小的帧缓冲区（带有分别较小的矩形）并让显卡完成工作。
请注意，即使您要说“我不需要原来的”，您也永远无法在同一个帧缓冲区内安全地重新缩放，因为重叠的 blit 是未定义的（*允许*，但未定义）。

或者，您当然可以使用简单的缩小像素着色器（如果您愿意，可以使用[aniso 抽取）绘制全屏四边形。](http://http.download.nvidia.com/developer/SDK/Individual_Samples/DEMOS/Direct3D9/src/AnisoDecimation/docs/AnisoDecimation.pdf)

事实上，由于您在最后一段中提到了模板……如果您要重新缩放*模板*（或深度），那么您最明确地想要使用着色器绘制全屏四边形，因为它很可能不会给出否则期望的结果。通常，在这种情况下，人们会选择一个`max`过滤器而不是插值（例如，对模板值 0 和 10 进行插值可以得到什么合理、有意义的结果——需要其他东西，例如“任何非零”或“最大值”）样本区域中的值”）。

# colors - 在 SharpDX.Color 中将颜色名称作为字符串传递

> ID：12857760
> 
> 赞同：0
> 
> 时间：2012-10-12T11:08:51.913
> 
> 标签：colors, microsoft-metro, sharpdx

我得到一个颜色名称作为字符串（如“黑色”）。必须为我的 Metro 应用程序将该颜色名称转换为 SharpDX.Color。现在尝试以下方式，

1)SharpDX.Color.FromRgba(int or uint value of color)
2)SharpDX.Color.FromArgb(int or uint value of color)

有可能以这种方式做到这一点。？或任何其他最好的方法来做到这一点。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:34:56.533

使用 Enum Parse 和 System.Drawing 会有所帮助，它不是很好，但会起作用：

```
KnownColor colorenum = (KnownColor)Enum.Parse(typeof(KnownColor),"Black");

Color4 bgcolor = new Color4(Color.FromKnownColor(colorenum).ToArgb()); 
```

否则，您可以使用字符串作为键和 SharpDX.Color4 作为值构建自定义字典，并创建自己的颜色列表。

# c++ - 在 OpenCV C/C++ 中只过滤一个轮廓

> ID：12857764
> 
> 赞同：5
> 
> 时间：2012-10-12T11:08:56.730
> 
> 标签：c++, c, opencv, video-processing

我正在尝试制作一个程序，使用基于 Canny 过滤器和轮廓查找功能的摄像机/网络摄像头检测任何形状的对象。这是我的程序：

```
int main( int argc, char** argv )
{
CvCapture *cam;
CvMoments moments;
CvMemStorage* storage = cvCreateMemStorage(0);
CvSeq* contours = NULL;
CvSeq* contours2 = NULL;
CvPoint2D32f center;
int i;

cam=cvCaptureFromCAM(0);
if(cam==NULL){
    fprintf(stderr,"Cannot find any camera. \n");
    return -1;
}
while(1){
    IplImage *img=cvQueryFrame(cam);
    if(img==NULL){return -1;}
    IplImage *src_gray= cvCreateImage( cvSize(img->width,img->height), 8, 1);
    cvCvtColor( img, src_gray, CV_BGR2GRAY );
    cvSmooth( src_gray,  src_gray, CV_GAUSSIAN, 5, 11);
    cvCanny(src_gray, src_gray, 70, 200, 3);

    cvFindContours( src_gray, storage, &contours, sizeof(CvContour), CV_RETR_EXTERNAL, CV_CHAIN_APPROX_NONE, cvPoint(0,0));
    if(contours==NULL){ contours=contours2;}
    contours2=contours;
    cvMoments(contours, &moments, 1);

    double m_00 = cvGetSpatialMoment( &moments, 0, 0 );
    double m_10 = cvGetSpatialMoment( &moments, 1, 0 );
    double m_01 = cvGetSpatialMoment( &moments, 0, 1 );
    float gravityX = (m_10 / m_00)-150;
    float gravityY = (m_01 / m_00)-150;
    if(gravityY>=0&&gravityX>=0){
        printf("center point=(%.f, %.f) \n",gravityX,gravityY); }

    for (; contours != 0; contours = contours->h_next){
        CvScalar color = CV_RGB(250,0,0);
        cvDrawContours(img,contours,color,color,-1,-1, 8, cvPoint(0,0));
    }

    cvShowImage( "Input", img );
    cvShowImage( "Contours", src_gray );
    cvClearMemStorage(storage);
    if(cvWaitKey(33)>=0) break;
}
cvDestroyWindow("Contours");
cvDestroyWindow("Source");
cvReleaseCapture(&cam);
} 
```

该程序将检测相机捕获的所有轮廓，并打印轮廓的平均坐标。我的问题是**如何仅过滤掉一个对象/轮廓，以便获得更精确的对象（x，y）位置**？如果可能的话，谁能告诉我**如何使用 (x,y) 坐标标记对象的中心**？

提前致谢。干杯

p/s：对不起，我还不能上传截图，但如果有什么帮助，这里[是链接](http://s16.postimage.org/992tlwdhx/question1.png)。

编辑：为了让我的问题更清楚：

*   例如，如果我只想从上面的屏幕截图中过滤掉正方形，我应该怎么做？
*   我要过滤掉的对象具有最大的轮廓区域，最重要的是具有形状（任何形状），而不是直线或曲线
*   我仍在尝试使用平滑和精确的值，所以如果有人在使用我的程序检测轮廓时遇到问题，请更改这些值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T12:53:55.313

我认为它可以相当容易地解决。我建议在轮廓检测*之前进行一些形态学操作。*另外，我建议过滤掉较小的元素，并将最大的元素作为图像中唯一的元素。

我建议：

*   过滤**线条**（直线或曲线）：您必须决定您自己认为“线条”和“形状”之间的边界是什么。假设您将所有厚度为*5 像素或更大*的对象视为对象，而将宽度小于 5 像素的对象视为线条。使用 5x5 正方形或 3 像素大小的菱形形状作为*结构元素*的*形态开口*可以解决此问题。

**   用于过滤掉一般的**小物体**：如果物体是任意形状的，纯粹的*形态开*运算是行不通的：你必须做一个*代数开运算*。一种特殊类型的代数开口是面积开口：一种去除图像中（像素）面积小于给定阈值的所有连通分量的操作。如果您对不感兴趣对象的大小设置了上限，或者对感兴趣对象的大小设置*了*下限*，**则*该*值*应用作阈值。您可能会通过更大的形态开口获得类似的效果，但它不会那么灵活。

    **   用于过滤**除最大对象之外的所有对象**：听起来应该可以将连接的组件从最小的对象移到最大的对象。尝试*标记连接的组件*。在二进制（黑白图像）上，此图像转换通过创建灰度图像、将背景标记为 0（黑色）以及每个分量具有不同的、递增的灰度值来工作。最后，每个对象的像素被标记为不同的值。您现在可以简单地查看灰度直方图，并找到像素最多的灰度值。将所有其他灰度级设置为 0（黑色），图像中唯一剩下的对象是最大的对象。** 

 **这些建议是从最简单的到最复杂的。不过，我认为 OpenCV 可以帮助解决这些问题。在 OpenCV 中实现了形态*腐蚀、膨胀、打开和关闭。*我认为您可能需要自己构建一个代数开运算（或结合 OpenCV 基本形态学），但我确信 OpenCV 可以帮助您标记连接的组件并检查生成的灰度图像的直方图。

最后，当只剩下一个对象的像素时，您进行 Canny 轮廓检测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:24:22.230

这是 OpenCV 本身无法（轻松）解决的 blob 处理问题。看看 cvBlobsLib。这个库扩展了 OpenCV，带有用于连接组件标签的函数/类。

[http://opencv.willowgarage.com/wiki/cvBlobsLib](http://opencv.willowgarage.com/wiki/cvBlobsLib)**

# c++ - 将 ifstream 对象传递给需要 istream 类型的函数

> ID：12857775
> 
> 赞同：1
> 
> 时间：2012-10-12T11:09:52.577
> 
> 标签：c++, inheritance, ifstream, istream

我有这个功能

```
void StrType::saveString(bool skip, InType charsAllowed, std::istream& inStream)
{ //something cool 
}; 
```

而这两个

```
void StrType::getString(bool skip, InType charsAllowed)
{
    saveString(skip, charsAllowed, std::cin);
}
void StrType::getStringFile(bool skip, InType charsAllowed,  std::ifstream& inFile)
{
    saveString(skip, charsAllowed, inFile);
} 
```

你能告诉我为什么编译器抱怨

```
strtype.cpp: In member function ‘void StrType::getStringFile(bool, InType, std::ifstream&)’:
strtype.cpp:42:39: error: no matching function for call to ‘StrType::saveString(bool&, InType&, std::ifstream&)’
strtype.cpp:42:39: note: candidate is:
strtype.cpp:9:6: note: void StrType::saveString(bool, InType, std::istream&)
strtype.cpp:9:6: note:   no known conversion for argument 3 from ‘std::ifstream {aka std::basic_ifstream<char>}’ to ‘std::istream& {aka std::basic_istream<char>&}’ 
```

作为 ifstream 类继承自 istream？还是我在这里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T11:26:20.270

我认为最可能的原因是缺少`<fstream>`头文件。如果您所包含的只是`<iosfwd>`那么编译器将不知道`ifstream`继承自`istream`.

# java - 根据我的需要，我应该使用哪种数据结构？

> ID：12857776
> 
> 赞同：4
> 
> 时间：2012-10-12T11:09:53.423
> 
> 标签：java, data-structures, architecture

**需求：**

*   存储覆盖等于和哈希码的类的对象
*   将循环并将对象推入数据结构
*   需要能够调用`contains`来检查某个对象是否存储在结构中
*   如果`contains`返回 true，则从结构中获取该特定对象并`getter`在该对象上调用某个特定对象

**我考虑过的选项：**

*   地图 - 这适用于所有需求，但我并没有真正的地图（键和值）。我所拥有的只是一堆物体。通过将对象存储为键和整数或值中的某些内容来强制使用映射是否是一种好习惯？

*   Set 可以工作，但是，它没有 get 之类的 fetch 方法。

*   List 也可以，但它没有非基于索引的获取方法。意思是，一旦`contains`返回 true，我将不得不遍历列表以找到我的特定对象的索引，然后获取它。

我愿意使用不同的库，例如 apache commons 或 guava。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:11:29.030

> List 也可以，但它没有非基于索引的获取方法。

`List`有一种[`indexOf(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)方法可以完全满足您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:13:41.330

虽然这里`best thing`使用的`scenario`是**`Map`**，因为它提供了基于`Key-Value`对的快速检索。

但`List`也允许基于索引获取数据。

因此，您可以使用 a`List`或 a `Map`。但为了使您的任务更轻松，我更喜欢`Map`. 因为我的情况是`Map`你不必搜索`index`一个对象，然后`Object`在那个索引处获取。获取只是一个`one-line`操作。

```
// When using a List.
List<String> myList = new ArrayList<String>();
if (myList.contains("rohit")) {
    myList.get(myList.indexOf("rohit"));
}

// When using Map.
Map<String, String> myMap = new HashMap<String, String>();
// You can directly fetch your object, based on some Key if you have one..
myMap.get("key"); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-12T11:14:02.587

你需要一套。您不需要 fetch 方法（您认为您需要），因为就像您说的那样，您只有一堆对象。并且由于这些使用`equals`and `hashCode`，一组正是您所需要的。

当然 map 也可以，因为它的键也是一个集合，但最后你需要更好地指定你的要求，因为看起来你对数据结构的目的有点困惑。据我了解，您确实不需要地图。

哈希集实现就可以了。以下是您可以使用的所有功能：

```
class Foo
{
    final String name;

    Foo(String name)
    {
        this.name = name;
    }

    boolean equals(Object obj)
    {
        return (obj instanceof Foo) && ((Foo)obj).name.equals(name);
    }
}

Set<Foo> fooSet = new HashSet<Foo>();

fooSet.add(new Foo("someFoo"));

assert fooSet.contains(new Foo("someFoo")); 
```

# python - 在 Python 中从一个文件到多个字典

> ID：12857781
> 
> 赞同：1
> 
> 时间：2012-10-12T11:10:23.947
> 
> 标签：python, dictionary

我正在尝试编写一个 Python 脚本，它将一种特殊类型的文件作为输入。
这个文件包含多个基因的信息，一个基因的信息写在多行上，每个基因的行数不一样。一个例子是：

```
 gene            join(373616..374161,1..174)
                 /locus_tag="AM1_A0001"
                 /db_xref="GeneID:5685236"
 CDS             join(373616..374161,1..174)
                 /locus_tag="AM1_A0001"
                 /codon_start=1
                 /transl_table=11
                 /product="glutathione S-transferase, putative"
                 /protein_id="YP_001520660.1"
                 /db_xref="GI:158339653"
                 /db_xref="GeneID:5685236"
                 /translation="MKIVSFKICPFVQRVTALLEAKGIDYDIEYIDLSHKPQWFLDLS
                 PNAQVPILITDDDDVLFESDAIVEFLDEVVGTPLSSDNAVKKAQDRAWSYLATKHYLV
                 QCSAQRSPDAKTLEERSKKLSKAFGKIKVQLGESRYINGDDLSMVDIAWLPLLHRAAI
                 IEQYSGYDFLEEFPKVKQWQQHLLSTGIAEKSVPEDFEERFTAFYLAESTCLGQLAKS
                 KNGEACCGTAECTVDDLGCCA"
 gene            241..381
                 /locus_tag="AM1_A0002"
                 /db_xref="GeneID:5685411"
 CDS             241..381
                 /locus_tag="AM1_A0002"
                 /codon_start=1
                 /transl_table=11
                 /product="hypothetical protein"
                 /protein_id="YP_001520661.1"
                 /db_xref="GI:158339654"
                 /db_xref="GeneID:5685411"
                 /translation="MLINPEDKQVEIYRPGQDVELLQSPSTISGADVLPEFSLNLEWI
                 WR"
 gene            388..525
                 /locus_tag="AM1_A0003"
                 /db_xref="GeneID:5685412"
 CDS             388..525
                 /locus_tag="AM1_A0003"
                 /codon_start=1
                 /transl_table=11
                 /product="hypothetical protein"
                 /protein_id="YP_001520662.1"
                 /db_xref="GI:158339655"
                 /db_xref="GeneID:5685412"
                 /translation="MKEAGFSENSRSREGQPKLAKDAAIAKPYLVAMTAELQIMATET
                 L" 
```

我现在想要的是创建一个字典列表，其中每个字典都包含有关一个基因的信息，如下所示：

```
gene_1 = {"locus": /locus_tag, "product": /product, ...}
gene_2 = {"locus": /locus_tag, "product": /product, ...} 
```

我完全不知道如何让 Python 知道一个基因/字典何时完成而下一个应该开始。
有人可以帮帮我吗？有没有办法做到这一点？

澄清一下：我知道如何提取我想要的信息，将其保存在变量中并将其放入字典中。我只是不知道如何告诉 Python 为每个基因创建一个字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:00:33.650

我已经为此组合了一个可能不太好，但功能性的解析器，纯python，也许它至少可以用作一个基本思想：

```
import re
import pprint
printer = pprint.PrettyPrinter(indent=4)

with open("entities.txt", "r") as file_obj:
    entities = list()

    for line in file_obj.readlines():
        line = line.replace('\n', '')

        if re.match(r'\s*(gene|CDS)\s+[\w(\.,)]+', line):
            parts = line.split()
            entity = {parts[0]: parts[1]}
            entities.append(entity)
        else:
            try:
                (attr_name,) = re.findall(r'/\w+=', line)
                attr_name = attr_name.strip('/=')
            except ValueError:
                addition = line.strip()
                entity[last_key] = ''.join([entity[last_key], addition])
            else:
                try:
                    (attr_value,) = re.findall(r'="\w+$', line)
                    last_key = attr_name
                except ValueError:
                    try:
                        (attr_value,) = re.findall(r'="[\w\s\.:,-]+"', line)
                    except ValueError:
                        (attr_value,) = re.findall(r'=\d+$', line)

                    attr_value = attr_value.strip('"=')

                if attr_name in entity:
                    entity[attr_name] = [entity[attr_name], attr_value]
                else:
                    entity[attr_name] = attr_value

printer.pprint(entities) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:58:39.403

如果有人对我在收到的评论的帮助下找到的初学者解决方案感兴趣，这里是：

```
import sys, re

annot = file("example.embl", "r")
embl = ""
annotation = []

for line in annot:
    embl += line

embl_list = embl.split("FT   gen")

for item in embl_list:
    if "e            " in item:
        split_item = item.split("\n")
        for l in split_item:
            if "e            " in l:
                if not "complement" in l:
                    coordinates = l[13:len(l)]
                    C = coordinates.split("..")
                    genestart = C[0]
                    geneend = C[1]
                    strand = "+"
                if "complement" in l:
                    coordinates = l[24:len(l)-1]
                    C = coordinates.split("..")
                    genestart = C[0]
                    geneend = C[1]
                    strand = "-"

            if "/locus_tag" in l:
                L = l.split('"')
                locus = L[1]

            if "/product" in l:
                P = l.split('"')
                product = P[1]

        annotation.append({
            "locus": locus,
            "genestart": genestart,
            "geneend": geneend,
            "product": product,
        })
    else:
        print "Finished!" 
```

# php - 从 vhost 配置中获取 PHP 中的响应标头

> ID：12857784
> 
> 赞同：4
> 
> 时间：2012-10-12T11:10:35.537
> 
> 标签：php, apache, http

我有一个虚拟主机配置，它有一个指令来为每个请求添加一个响应头，如下所示：

`Header append X-MyHeader "Info Stuff in here"`

如果我在此服务器上运行，我会在标题*HTTP Headers Information*`phpinfo()`下的 apache2handler 部分中看到此标头作为*HTTP Response Headers*。PHP 似乎能够以某种方式访问​​此信息。

 **我尝试为我的脚本获取此信息，但它丢失了`headers_list()`。`apache_response_headers()`

谷歌搜索没有找到解决方案，这似乎是一种罕见的情况。SO上的另一个问题得到了再次真正查询服务器并查看标头的答案，但我不会这样做，因为我需要有关我服务的每个请求的信息 - 子请求似乎对性能造成太大影响。

怎么`phpinfo()`知道价值观？

更新 1：PHP 不显示任何超全局变量（如 等）中的值`$_SERVER`。`$_ENV`我在 phpinfo 页面上看到它的唯一位置是在上面提到的部分。否则，这将是不费吹灰之力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:17:08.910

您可以这样做，但要确保它在文件中高于打印的任何其他内容，否则您将收到错误消息。

```
<?php
foreach($_SERVER as $h=>$v)
 if(preg_match('/HTTP_(.+)/',$h,$hp))
   echo "<li>$h = $v</li>\n";
?> 
```

编辑：你启用了 FastCGI 吗？

试试这个链接：[$_SERVER headers are missing in PHP but present in Python](https://stackoverflow.com/questions/7141566/server-headers-are-missing-in-php-but-present-in-python)**

# java - 为什么 Mainframe JButton 出现在 JInternalFrame 的前台？

> ID：12857785
> 
> 赞同：0
> 
> 时间：2012-10-12T11:10:38.743
> 
> 标签：java, swing, jinternalframe, jdesktoppane

我正在创建一个 Swing 应用程序。我有一个 main`JFrame`和一个 `JDesktopPane`. 我在主框架上添加了一个按钮和一个标签。但是，如果我`JInternalFrame`在 Main Frame 按钮上打开任何一个并且标签覆盖了内部框架。

（*`JButton`和JLabel 出现在前台的`JInternalFrame`）*。如果我单击内部框架按钮转到背景。

你能帮忙解决这个问题吗？

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Frame;
import java.awt.Point;
import java.awt.Rectangle;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JLabel;
import javax.swing.SwingConstants;
import javax.swing.UIManager;

public class MainFrame {

   JFrame frame1 ;
   JDesktopPane desktop ;

       public MainFrame () {
         frame1 = new JFrame("EMPLOYEE LEAVE TRACKER");
         frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         frame1.setExtendedState(Frame.MAXIMIZED_BOTH);
         frame1.repaint();
         desktop = new JDesktopPane();        //Creates a new JDesktopPane.
         frame1.setContentPane(desktop);
         frame1.setSize(900,700);
         frame1.setVisible(true);
         desktop.setBackground(Color.DARK_GRAY );

    //Creates a JLabel on JDesktopPane.
    JLabel label1 = new JLabel("EMPLOYEE LEAVE TRACKER", SwingConstants.CENTER);
       label1.setFont(new Font("SansSerif",Font.ITALIC + Font.BOLD,54));
       label1.setBounds(new Rectangle(new Point(275, 100),label1.getPreferredSize()));
    //Creates a JButon on JDesktopPane.

   JButton Leave = new JButton("Leave Management");
     Leave.setHorizontalTextPosition(JButton.CENTER);
     Leave.setBounds(new Rectangle(new Point(700,200),Leave.getPreferredSize()));
     Leave.setSize(300, 300);
     Leave.addActionListener(new java.awt.event.ActionListener()      {
        @Override
        public void actionPerformed(java.awt.event.ActionEvent e)   {
        frame1.add(LeaveManagment()); 
        }
    });

  //Look and Feel

     try {
        UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch(Exception e) {
          System.out.println("Error setting native LAF: " + e);
        }

    desktop.add(Leave);
    desktop.add(label1);

     }
   //Creating JInternalFrame

    public JInternalFrame LeaveManagment(){              
    final JInternalFrame employeeFrame = new JInternalFrame("LEAVE M" +
            "ANAGEMNT", true, true, true, true);
    employeeFrame.getContentPane().setBackground(Color.white);
    employeeFrame.setSize(900,700);
    employeeFrame.setVisible(true);
    employeeFrame.setMaximizable(true);
    employeeFrame.setResizable(true);
    JComponent c = (JComponent)
    employeeFrame.getContentPane();
    c.setLayout(new FlowLayout());

        return employeeFrame;
}

    public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
      public void run() {
      new MainFrame ();
      }
});
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:51:00.187

从它的声音来看，您已将按钮添加到`JDesktopPane`.

桌面窗格是一种类型`JLayeredPane`，它允许您将组件放置在图层上。

虽然这是一个简洁的功能，恕我直言，只有 JInternalFrames 和偶尔的特殊“窗口”应该出现在桌面上（尽管桌面管理器确实使用一种按钮来表示最小化的窗口）

就个人而言，我会将按钮也放在哪里，而不是在桌面上。

看看[如何使用内部框架](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)和[如何使用分层窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:18:23.163

MadProgrammer 说得对。一种解决方案是将您的组件添加到适当的 JLayeredPane 层。IE，

```
// Note name change of JButton to adhere to Java naming standards:
desktop.add(leaveManagementBtn, JLayeredPane.DEFAULT_LAYER);
desktop.add(label1, JLayeredPane.DEFAULT_LAYER); // note layer component being added to 
```

和，

```
public void actionPerformed(java.awt.event.ActionEvent e) {
  // again method name capitalization changed to adhere to standard
  // again, component added to appropriate layer
  frame1.add(leaveManagment(), JLayeredPane.PALETTE_LAYER);
} 
```

同样，MadProgrammer 是对的，按钮不应位于 JDesktopFrame 上，而应位于桌面之外的按钮栏上。我建议你接受他的回答。

# c# - 在 C#.NET 中接受小数的自定义文本框

> ID：12857787
> 
> 赞同：0
> 
> 时间：2012-10-12T11:10:54.643
> 
> 标签：c#, windows, user-controls, decimal

我使用 C#.NET 为 Windows 应用程序创建了一个自定义文本框。它必须接受十进制（浮点数），如 8.32 和 16.002。

我构建了以下算法。它只接受纯数字。我不知道如何让它也接受浮动。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Text;
using System.Windows.Forms;

namespace SmartTextBoxLib
{
    public partial class SmartTextBox : TextBox
    {
        public SmartTextBox()
        {
            InitializeComponent();
        }
        protected override void OnKeyPress(KeyPressEventArgs e)
        {
            if (!char.IsControl(e.KeyChar) && !char.IsDigit(e.KeyChar))
            {
                e.Handled = true;
            }
            base.OnKeyPress(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:15:22.793

使用

```
System.Windows.Forms.NumericUpDown 
```

相反，它会为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:29:20.757

您可以使用：

```
if (!char.IsDigit(e.KeyChar) && e.KeyChar != '.')
    e.Handled = true;
base.OnKeyPress(e); 
```

这允许数字字符或`.`. `,`如果你用它来分隔小数，你就可以做到。

* * *

或者，您可以这样做：

```
decimal value;
e.Handled = !decimal.TryParse((sender as TextBox).Text + e.KeyChar, out value);
base.OnKeyPress(e); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:31:24.783

您可以使用[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask%28v=vs.110%29.aspx)代替 Texbox 控件。

在 MaskedTextBox 控件上定义了 Mask 属性：

```
maskedTextBoxInstance.Mask = "99.000"; 
```

# php - Zen-Cart 结帐页面 null

> ID：12857793
> 
> 赞同：0
> 
> 时间：2012-10-12T11:11:25.427
> 
> 标签：php, payment-gateway, credit-card, payment-processing, zen-cart

我在结帐页面上收到错误：

> 您的卡已被拒绝。请重新输入您的卡信息，尝试另一张卡，或联系店主寻求帮助。

该页面的 URL 是：`site.com/index.php?main_page=checkout&fecaction=null`

我正在使用 Securepay 支付模块，并通过他们验证了信用卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:29:34.347

如果您正在测试，则需要将 SecurePay 设置为测试模式（在 admin->modules->payment 下）。否则将不接受测试卡。

# excel - 如何将访问查询作为范围访问excel vba

> ID：12857795
> 
> 赞同：1
> 
> 时间：2012-10-12T11:11:31.540
> 
> 标签：excel, vba, ms-access

好的，所以我有这个函数，它使用我传递给它的查询字符串来查询数据库。目前它在工作表中输出查询结果。如何获得函数以将结果作为可在 VBA 中用于执行计算等的范围？然后我将如何引用这个范围？例如，在结果中获取“名称”列。

```
Function Access_Data(query As String)
 'Requires reference to Microsoft ActiveX Data Objects xx Library

Dim Cn As ADODB.Connection, Rs As ADODB.Recordset
Dim MyConn, sSQL As String

Dim Rw As Long, Col As Long, c As Long
Dim MyField, Location As Range

 'Set destination
Set Location = Sheets(1).Range("a1")
 'Set source
MyConn = "S:\Docs\Harry\Engine Client\Engine3.accdb"
 'Create query
sSQL = query

 'Create RecordSet
Set Cn = New ADODB.Connection
With Cn
    .Provider = "Microsoft.ACE.OLEDB.12.0"
    .Open MyConn
    Set Rs = .Execute(sSQL)
End With

 'Write RecordSet to results area
Rw = Location.Row
Col = Location.Column
c = Col
Do Until Rs.EOF
    For Each MyField In Rs.Fields
        Cells(Rw, c) = MyField
        c = c + 1
    Next MyField
    Rs.MoveNext
    Rw = Rw + 1
    c = Col
Loop
Set Location = Nothing
Set Cn = Nothing 
```

结束功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:11:23.167

```
Function Access_Data(query As String)
 'Requires reference to Microsoft ActiveX Data Objects xx Library

Dim Cn As ADODB.Connection, Rs As ADODB.Recordset
Dim MyConn, sSQL As String

Dim Rw As Long, c As Long
Dim MyField, Result

 'Set source
MyConn = "S:\Docs\Harry\Engine Client\Engine3.accdb"
 'Create query
sSQL = query

 'Create RecordSet
Set Cn = New ADODB.Connection
With Cn
    .Provider = "Microsoft.ACE.OLEDB.12.0"
    .CursorLocation = adUseClient
    .Open MyConn
    Set Rs = .Execute(sSQL)
End With

 'Write RecordSet to results
Redim Result(1 To Rs.RecordCount, 1 To Rs.Fields.Count)
Rw = 1
Do Until Rs.EOF
    c = 1
    For Each MyField In Rs.Fields
        Result(Rw, c) = MyField
        c = c + 1
    Next MyField
    Rs.MoveNext
    Rw = Rw + 1
Loop
Set Cn = Nothing

Access_Data = Result
End Function 
```

这将返回一个多维数组。范围必须引用工作表的某些部分：您不能创建“不可见”范围。（尽管您可以使工作表的一部分不可见，如果那是您所追求的。）

要访问结果：

```
Dim v, i As Long
v = Access_Data("select ID, Name from somewhere")
For i = 1 To UBound(v, 1)
    MsgBox v(i, 1) & " / " & v(i, 2)
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:45:08.267

示例如何从 SQL Server 读取数据并将结果插入工作表（此处使用集成安全性）。如果在插入新数据之前目标工作表为空，则使用 UsedRange 属性来引用它。或者计算一下，rng 是最左上角的单元格。

```
Option Explicit

' Add reference to Microsoft ActiveX Data Objects Lib

Public Sub main(): On Error GoTo Err_handler

    Dim cn As ADODB.Connection
    Set cn = New ADODB.Connection

    cn.ConnectionString = "Provider=SQLOLEDB;Data Source=MYSUPERSERVER;Initial Catalog=MYSUPERDATABASE;Integrated Security=sspi"
    cn.Open

    Dim rs As ADODB.Recordset
    Set rs = New ADODB.Recordset

    rs.ActiveConnection = cn
    rs.Open "SELECT * FROM MyTable"

    Dim fld As ADODB.Field
    Dim rng As Range
    Set rng = [a1]
    For Each fld In rs.Fields
        rng.Value = fld.Name
        Set rng = rng.Offset(0, 1)
    Next fld

    Set rng = rng.Offset(1, -rs.Fields.Count)
    rng.CopyFromRecordset rs

    rs.Close
    cn.Close
    Set rs = Nothing
    Set cn = Nothing

    Exit Sub

    Err_handler:
    MsgBox Err.Description

End Sub 
```

# grails - 如何将 JAXB 类型用作 Grails 域类？

> ID：12857796
> 
> 赞同：2
> 
> 时间：2012-10-12T11:11:34.583
> 
> 标签：grails, jaxb

我的系统由一个后端部分组成，用 Java 编写，公开一组使用 WSDL 和 XSD 以契约优先方式定义的 Web 服务。通过 Web 服务传输的数据中有大量产品类型（准确地说，它们是不同类型的银行账户）。我们的前端是一个 Grails Web 应用程序。它使用并公开后端托管的数据和操作。前端出于安全原因没有自己的数据库；所有数据都存储在后端。相当标准的架构。

现在，这组产品庞大、不断增长且不稳定。每个产品类型都必须在 Web 应用程序用户界面上进行 CRUD。如果我能告诉 Grails 使用产品类型的 XSD 规范作为域类型，并为它们生成视图和控制器，那就太好了。

即使经过大量的实验和大量的网页浏览，我还没有找到解决这个难题的方法。我在 Grails 方面拥有大约一年的专业经验。任何帮助或想法将不胜感激。

一些细节：

产品类型是一个简单的 POJO 数据载体。一些简化的例子：

```
package jaxbgenerated;

public class Product1 {
    protected Account from;
    protected Account to;
    protected String name;
    // + getters and setters
}

public class Product2 {
    protected List<Account> accounts;
    protected String name;
    // + getters and setters
}

public class Account {
    protected String id1;
    protected String id2;
    // + getters and setters
} 
```

请注意，“Account”不是产品类型，而是 JAXB 生成的类型。除了 String、int 和 Date 等简单数据类型的属性外，产品还可以包含此类属性，但它们从不包含其他产品类型。

我想要的最终结果是 Grails 生成的表单，用户可以在其中编辑带有嵌套表单的 Product1 实例，以编辑其组成帐户。Product2 也是如此。

我的想法是首先为每个 JAXB 生成的类型手动编写一个 Grails 域类：

```
//in grails-app/domain:

import utilities.Copier

class Product1 extends jaxbgenerated.Product1 {
    Product1(jaxbgenerated.Product1 jaxb) {
        Copier.copy(jaxb, this)
    }

    static constraints = {
    }
} 
```

这里有一些样板代码，但我只能忍受。Copier.copy() 函数（我认为）需要将从后端获取的 jaxbegenerated.Product 实例转换为可以在 Grails 中使用的 Product1 实例。它递归地在 jaxb 源中查找 jaxb 生成的属性，并将它们的值复制到相应的 Grails 域类型。构造函数是从从后端获取数据的层调用的。

我可以使用约束块在需要的地方手动添加语义约束，例如“from”和“to”帐户不一样。

接下来，我为由此构建的所有 Grails 域类生成控制器和视图，并运行应用程序。并得到一堆异常：

```
Caused by MappingException: Could not determine type for: Account, at table:
product1_type, for columns: [org.hibernate.mapping.Column(from)] 
```

我认为这里的问题是Product1 的“from”和“to”属性不是Account 类型，而是jaxbgenerated.Account 类型。

我尝试了不同的方法，但无济于事。一些注意事项：

1.  正如我所说，所有数据存储都发生在我的后端，所以我不需要 Grails 的 GORM/Hibernate 方面。因此，我尝试将“static mapWith =”none”添加到域类中，但这没有帮助。
2.  我尝试通过添加“static mapping = { from type: Account }”明确告诉 Hibernate Product1 中的 Accounts 类型，但这也不起作用。

任何帮助或想法将不胜感激。

/Jan Reher，Systematic A/S，丹麦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:22:25.377

我认为您确实编写了一个与此[simpledb概念相似的 dababase 插件](http://www.grails.org/plugin/simpledb)

# c# - 如何在 Sitecore 中覆盖 Image.BrowseImage()

> ID：12857801
> 
> 赞同：2
> 
> 时间：2012-10-12T11:11:45.347
> 
> 标签：c#, configuration, sitecore, sitecore6

我正在寻找一种方法来覆盖类中`BrowseImage(ClientPipelineArgs args)`方法的行为`Sitecore.Shell.Applications.ContentEditor.Image`（Sitecore 6）。

这篇博文（[将外部媒体库集成到 Sitecore - 第 2 部分](http://www.thescrewballdivision.com/integrate-an-external-media-library-into-sitecore-%E2%80%93-part-2)）证实这是可能的。

我已经创建了`Image`类的自定义实现，但找不到在哪里注册它。我对解决方案中的所有 Sitecore 配置文件进行了搜索，但找不到任何参考。

我怀疑核心数据库中某处有一个配置选项。
关于我在哪里可以找到这个的任何想法？

*编辑：将此发布在 Sitecore 支持上。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:56:06.727

您应该能够在以下站点核心位置添加对新类型的引用：

```
/sitecore/system/Field types/Simple Types/Image 
```

![在此处输入图像描述](../Images/30ef1707996caa78ac5d12585ea3fe2f.png)

您可以以指定程序集和类名称的常规方式注册您的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:19:20.063

找到了解决方案。
问题是我设置`Assembly`了`Class`字段值，但没有清除`Control`字段值。

正确配置如下：

![在此处输入图像描述](../Images/733406fa3a56d0a777cb79796a1e0978.png)

# android - 自制谷歌分析

> ID：12857802
> 
> 赞同：0
> 
> 时间：2012-10-12T11:11:55.473
> 
> 标签：android, event-log

由于 Google 分析会引发许多隐私问题，因此我实现了一个事件记录器。

我的第一个想法是将用户生成的事件跟踪到日志文件中，然后将它们发送回服务器，服务器将为系统管理员和应用工程师执行数据分析。

目前的想法是将 Logger 实例化为一个`Application`或一个`Service`类并使用这些元素`onCreate`并`onDestroy`安全地处理 LogFile。

解决方案非常简单：

1.  打开文件
2.  每次生成事件时附加到它
3.  达到a`MAX_NUM_LINES`后，将日志发送到服务器（可能我会压缩正在生成的文本文件）

我想知道在野外是否已经有任何东西我不知道你可能知道（类似`ACRA`）。每一个贡献都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T15:11:45.980

这是我的实现。然而，任何更好的版本都非常感谢。TSG 对象只是我用作时间管理器的静态类。

只要您重新发布/编辑修改，就可以使用代码并对其进行改进。

```
public class Logger {
    private BufferedWriter logFile;
    private String nameFile;
    public int fileLines;
    private File fTemp;
    private timeStampGenerator TSG;
    private int LOG_LINES_LIMIT = 100;
    private Object mutex;

    public enum EventType {
        BUTTON_PRESSED, 
        PAGE_VIEWED, 
        LOADED_ACTIVITY,  
        GENERIC_EVENT
    }

    public Logger (String fileName) throws IOException {
        nameFile = fileName;

        createLogFile();

        fileLines = countLines();

        TSG = new timeStampGenerator();

        // This is our mutex to access to the file
        mutex = new Object();
    }

    public void createLogFile() throws IOException{
        fTemp = new File (nameFile);

        if (!fTemp.exists()) {
            fTemp.createNewFile();
        }

        logFile = new BufferedWriter(new FileWriter(nameFile, true));

    }

    public void LogEvent(EventType event, String comment, String value) {

        String line = "";
        line += TSG.getTimestampMillis();
        line += ",";
        line += event.name();
        line += ",";

        if (comment != "") {
            line += comment.replaceAll(",", ";");
        } else {
            line += " ";
        }

        line += ",";

        if (value != "") {
            line += value.replaceAll(",", ";");
        } else {
            line += " ";
        }

        line += "\n";

        synchronized (mutex) {
            try {
                logFile.append(line);
            } catch (IOException e) {
                // Do wathever you want here
            }
            fileLines++;
        }
    }

    public int countLines() //throws IOException 
    {
        InputStream is;
        try {
            is = new BufferedInputStream(new FileInputStream(nameFile));
        } catch (FileNotFoundException e1) {
            //let's consider it an empty file
            return 0;
        }

        int count = 0;
        boolean empty = true;

        try {
            int readChars = 0;

            byte[] c = new byte[1024];

            while ((readChars = is.read(c)) != -1) {
                empty = false;
                for (int i = 0; i < readChars; ++i) {
                    if (c[i] == '\n')
                        ++count;
                }
            }
        } catch(IOException e) {
            // Do wathever you want here
        }

        try {
            is.close();
        } catch (IOException e) {
            // Do wathever you want here
        }

        return (count == 0 && !empty) ? 1 : count;
    }

    public boolean isLimitReached() {

        return (fileLines >= LOG_LINES_LIMIT);

    }

    public void close () {
        flush();
        try {
            logFile.close();
        } catch (IOException e) {
            // Do wathever you want here
        }
    }

    /** 
     * clear the content of the file
     */
    public void clearFile() {
        synchronized (mutex) {
            if ( fTemp.delete() ) {
                try {
                    createLogFile();
                } catch (IOException e1) {
                    // Do wathever you want here
                }
            }

        }
    }

    /**
     *  Get the full content of the file
     * @return the content
     */
    public String getContent() {

        StringBuffer fileData = new StringBuffer();

        synchronized (mutex) {
            try {
                BufferedReader reader = new BufferedReader(new FileReader( nameFile ));
                char[] buf = new char[1024];
                int numRead = 0;
                while ((numRead = reader.read(buf)) != -1) {
                    String readData = String.valueOf(buf, 0, numRead);
                    fileData.append(readData);
                }
                reader.close();
            } catch (IOException e) {
                // Do wathever you want here
            }
        }

        return fileData.toString();
    }

    public void flush() {
        try {
            logFile.flush();
        } catch (IOException e) {
            // Do wathever you want here
    }
    }
} 
```

# grails - Grails 资源.groovy bean

> ID：12857815
> 
> 赞同：1
> 
> 时间：2012-10-12T11:12:55.563
> 
> 标签：grails, spring-security, spring-ldap

我在尝试确定我的 bean 是否已正确加载时遇到了一些问题。是否有一些 log4j 属性可以在日志中向我显示正确加载的 bean？

经过一番尝试后，我开始尝试从[这里开始的另一个示例](http://grails.org/doc/latest/guide/spring.html#14.3%20Runtime%20Spring%20with%20the%20Beans%20DSL)

重新定义我的 resources.groovy 如下：

```
import grails.spring.BeanBuilder
BeanBuilder bb = new BeanBuilder()
bb.beans = {
    ldapUserDetailsMapper(example.CustomDetailsContextMapper) {
    }
} 
```

CustomDetailsContextMapper 又被定义为：

```
class CustomDetailsContextMapper implements UserDetailsContextMapper {
def springSecuritySource

@Override
public UserDetails mapUserFromContext(DirContextOperations ctx, String username, Collection authorities) { 
```

这是我在使用这种 resource.groovy 设置时遇到的错误：

```
2012-10-12 12:52:31,663 [main] ERROR spring.GrailsRuntimeConfigurator  - [RuntimeConfiguration] Unable to load beans from resources.groovy
org.codehaus.groovy.runtime.metaclass.MissingPropertyExceptionNoStack: No such property: beans for class: resources
Possible solutions: class 
```

当不使用 beanbuilder 时，我没有收到任何错误，但我无法真正验证我的 bean 是否已加载，因为它们似乎从未被调用过。在另一种情况下，我收到以下错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T12:31:45.707

在 resource.groovy 中简单地写

```
beans = {
    ldapUserDetailsMapper(example.CustomDetailsContextMapper) {
    } 
```

已经为您定义了 BeanBuilder

使用时调用 bean... 在控制器中尝试 thi

```
VeryBeanController{

    def ldapUserDetailsMapper

    def index = {

       render( ldapUserDetailsMapper  )

    }

} 
```

并调用控制器

# android - 如何仅使用 mediaplayer android 通过耳机播放音频

> ID：12857817
> 
> 赞同：1
> 
> 时间：2012-10-12T11:13:00.007
> 
> 标签：android, media-player, ear, speaker

有人知道如何在设备的听筒或耳机中播放音轨吗？

我用过这个：

```
AudioManager audio_service = (AudioManager) getSystemService 
(Context.AUDIO_SERVICE); 
                // set the mode in call, so that the sound can come from earpiece 
                audio_service.setSpeakerphoneOn(false); 
                audio_service.setMode(AudioManager.MODE_IN_CALL); 
                audio_service.setRouting(AudioManager.MODE_NORMAL, 
                                AudioManager.ROUTE_EARPIECE, AudioManager.ROUTE_ALL); 
mediaplayer.start(); 
```

但什么也没发生..：| 谁能给我打电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:07:15.327

刚刚让它在2.2上工作。我仍然需要我不太喜欢的 In_Call 设置，但我现在会处理它。我能够放弃现在已弃用的呼叫路由的东西。我发现你肯定需要 Modfiy_Audio_Settings 权限，没有它就没有错误，但是 setSpeakerPhone 方法什么也不做。这是我使用的代码的模型。

```
private AudioManager m_amAudioManager;  
m_amAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);  
m_amAudioManager.setMode(AudioManager.MODE_IN_CALL); 
m_amAudioManager.setSpeakerphoneOn(false); 
```

Curtsy : [Android - 让音频通过听筒播放](https://stackoverflow.com/questions/2119060/android-getting-audio-to-play-through-earpiece)

# iphone - ios配置门户证书无法安装...？

> ID：12857820
> 
> 赞同：0
> 
> 时间：2012-10-12T11:13:05.767
> 
> 标签：iphone, ios, certificate, private-key, ios-provisioning

我有一个由其他人创建的 iphone 应用程序，现在我正在工作。客户的供应门户已经拥有开发和分发证书。现在我想安装该证书并在该应用程序上工作，所以我下载了该证书并安装（只需双击），所以它显示在我的“钥匙串访问”中，但我认为它们没有正确安装，因为没有私钥。谁能帮我解决这个问题的过程是什么......！？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:20:02.237

您需要证书的私钥，它位于请求证书的 mac 的钥匙串中。

如果您无法获得私钥，则需要创建一个新证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:20:16.303

您必须要求客户向您发送私钥。他可以从他的钥匙串中将私钥导出为 .p12 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:25:17.383

这可能是创建证书的问题。

[这个视频](http://www.youtube.com/watch?v=Q--ZpEsoHUQ)会帮助你。

**或按照以下步骤**

单击钥匙串访问菜单-->CertificateAssistance-->向证书颁发机构请求证书。

将出现一个新窗口，其中包含电子邮件地址、常用名称等部分。

在“用户电子邮件地址”字段中输入您用于 appledeveloper 证书的电子邮件地址。

使用任何一个名称作为通用名称。

单击“保存到磁盘”按钮。

从开发者门户创建证书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T06:29:24.617

您需要要求他们提供以前的开发人员或创建证书签名请求的人提供的 certificate.p12 文件以创建新证书。

他可以从钥匙串访问中导入 certificate.p12 文件。

# php - 没有为实体指定标识符/主键

> ID：12857821
> 
> 赞同：4
> 
> 时间：2012-10-12T11:13:07.713
> 
> 标签：php, doctrine-orm

为什么我会得到这个异常

> Doctrine\ORM\Mapping\MappingException：没有为“”的实体“Entities\Category”子类指定标识符/主键。每个实体都必须有一个标识符/主键。在第 38 行的 /Users/munnik/Sites/doctrine/vendor/doctrine/orm/lib/Doctrine/ORM/Mapping/MappingException.php

对于这个类：

```
<?php

namespace Entities;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="category") 
  **/   
class Category  {

    /** @ORM\Id @ORM\Column(name="id", type="integer") @ORM\GeneratedValue **/
    private $id;

    /** @ORM\Column(name="name", type="string") **/
    private $name;

} 
```

我似乎找不到问题？@ORM\Id 应该将 $id 标记为主键吗？

# java - 部署在 tomcat 上的 Web 应用程序首次访问速度很慢？

> ID：12857823
> 
> 赞同：5
> 
> 时间：2012-10-12T11:13:18.150
> 
> 标签：java, tomcat, web-applications

我们在 Tomcat 7 上部署了一个 Spring MVC Web 应用程序。每次我部署一个新构建时，它第一次运行非常缓慢。即使是登录页面也需要时间才能出现。

造成这种情况的原因是什么，可以做些什么来使它更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:16:12.387

这是一个有效的场景。您的服务器在第一次加热时加载 servlet 和操作。所以第一次访问会很慢。

您可以`<loadonstartup>1</loadonstartup>`在 web.xml 中设置。

上述选项将在服务器启动时加载所需的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:45:58.947

*如果*您使用 Spring 注释，请确保在 <component:scan /> 标记中配置了正确的包。也就是说，在 applicationContext.xml 和 xxx-servlet.xml 文件中不包括要扫描的相同包。Spring 将扫描它们两次，否则，我已经看到了。

还要记住，任何 JSP 都会在您第一次使用它们时被编译，所以在第一次点击时会变慢。

# git - Sourcetree 中的标签消息在哪里

> ID：12857824
> 
> 赞同：8
> 
> 时间：2012-10-12T11:13:18.450
> 
> 标签：git, version-control, git-gui, gitk, atlassian-sourcetree

Sourcetree中的git标签在哪里可以访问到对应的消息。标签的上下文菜单似乎没有提供这样的选项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-26T07:50:08.447

这取决于它是 Mac 还是 Windows，以及您使用的是 Git 还是 Mercurial。由于您使用的是 Git，因此该信息可用 - 您只需上下文单击侧栏中的标签，然后单击“详细信息”，它将显示与该标签相关的元数据。

希望有帮助。

![在此处输入图像描述](../Images/5835a3bbf7c4b95fa6485f7e120c71bf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T01:05:41.220

```
git show tag-name 
```

将向您显示消息和标签指向的提交，包括它的消息。

我不知道如何通过`gitk`.

# jquery - 在jQuery中为鼠标从子级移动到父级创建事件

> ID：12857825
> 
> 赞同：0
> 
> 时间：2012-10-12T11:13:19.013
> 
> 标签：jquery

我有以下 HTML 代码：

```
<body>
    <ul>
        <li>text</li>
    </ul>
</body> 
```

假设我的鼠标当前悬停`<li>`，我希望（使用 jQuery）在鼠标移离 to 时触发一个事件，如果鼠标移离`<li>`to`<ul>`则触发另一个事件。那可能吗？`<il>``<body>`

谢谢！

# android - android 应用程序中的 GSM 信号强度测量值始终显示 0

> ID：12857827
> 
> 赞同：3
> 
> 时间：2012-10-12T11:13:23.690
> 
> 标签：android

信号强度始终显示 0

此代码运行没有错误，但始终显示信号强度为 0。我尝试在我的模拟器和我的 android 设备上运行此代码，但它显示信号强度为 0。

请详细说明获取我的移动网络的正确信号强度以及获取该地区其他网络信号强度的代码（如果可能）。

MainActivity.java

```
 package com.example.termproject;
 import android.os.Bundle;
 import android.view.Menu;
 import android.view.View;
 import android.app.Activity;
 import android.telephony.PhoneStateListener;
 import android.telephony.SignalStrength;
 import android.telephony.TelephonyManager;
 import android.content.Context;
 import android.widget.Toast;

 public class MainActivity extends Activity 
 {
    TelephonyManager Tel;
    MyPhoneStateListener MyListener;
    private int signal;

     @Override
     public void onCreate(Bundle savedInstanceState)
     {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);

     }

     @Override
               public boolean onCreateOptionsMenu(Menu menu) 
     {
         getMenuInflater().inflate(R.menu.activity_main, menu);
         return true;
     }
     class MyPhoneStateListener extends PhoneStateListener
     {
       int signal;
       @Override
       public void onSignalStrengthsChanged(SignalStrength signalStrength)
       {
          super.onSignalStrengthsChanged(signalStrength);
          signal = signalStrength.getGsmSignalStrength();
       }
     }
     public void myaction(View v)
     {
        MyListener = new MyPhoneStateListener();
         Tel = ( TelephonyManager )getSystemService(Context.TELEPHONY_SERVICE);
         Tel.listen(MyListener ,PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);
         Toast.makeText(getApplicationContext(), "GSM signal strength is " +    String.valueOf(this.signal), Toast.LENGTH_SHORT).show();
     }
 } 
```

清单.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.example.termproject"
     android:versionCode="1"
     android:versionName="1.0" >

     <uses-sdk
         android:minSdkVersion="8"
         android:targetSdkVersion="15" />
     <!-- PERMISSIONS -->
    <uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <!-- LICENSE PERMISSIONS -->    
    <uses-permission android:name="com.android.vending.CHECK_LICENSE" />

    <!-- USES -->
    <uses-feature android:name="android.hardware.telephony"      android:required="false"/>
     <application
         android:icon="@drawable/ic_launcher"
         android:label="@string/app_name"
         android:theme="@style/AppTheme" >
         <activity
             android:name=".MainActivity"
             android:label="@string/title_activity_main" >
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />

                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
         </activity>
     </application>

 </manifest> 
```

activity_main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >

     <TextView
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true"
         tools:context=".MainActivity" />
     <Button
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="@string/button_send" 
         android:onClick="myaction"/>

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:39:50.030

该线程似乎确定您的 PhoneStateListener 不正确。从您的问题来看，您似乎有一个 CDMA 设备，因此 GSM 将始终返回 0。不确定模拟器的预期行为是什么。

[检测接收何时返回 Android](https://stackoverflow.com/questions/5048986/detecting-when-reception-returns-android)

```
package com.piusvelte.wapdroid;

import static com.piusvelte.wapdroid.WapdroidService.PHONE_TYPE_CDMA;
import static android.telephony.NeighboringCellInfo.UNKNOWN_RSSI;
import android.telephony.CellLocation;
import android.telephony.PhoneStateListener;
import android.telephony.SignalStrength;
import android.telephony.TelephonyManager;

// PhoneStateListener for api >= 7
public class PhoneListenerApi7 extends PhoneStateListener {
        private WapdroidService mService;

        public PhoneListenerApi7(WapdroidService service) {
                mService = service;
        }

        public void onCellLocationChanged(CellLocation location) {
                // this also calls signalStrengthChanged, since signalStrengthChanged isn't reliable enough by itself
                mService.getCellInfo(location);
        }

        public void onSignalStrengthChanged(int asu) {
                // add cdma support, convert signal from gsm
                if ((mService.mTeleManager.getPhoneType() == TelephonyManager.PHONE_TYPE_GSM) || (mService.mTeleManager.getPhoneType() == PHONE_TYPE_CDMA)) mService.signalStrengthChanged((asu > 0) && (asu != UNKNOWN_RSSI) ? (2 * asu - 113) : asu);
                else mService.release();
        }

        public void onSignalStrengthsChanged(SignalStrength signalStrength) {
                if (mService.mTeleManager.getPhoneType() == TelephonyManager.PHONE_TYPE_GSM) {
                        int asu = signalStrength.getGsmSignalStrength();
                        mService.signalStrengthChanged((asu > 0) && (asu != UNKNOWN_RSSI) ? (2 * asu - 113) : asu);
                }
                else if (mService.mTeleManager.getPhoneType() == PHONE_TYPE_CDMA) mService.signalStrengthChanged(signalStrength.getCdmaDbm() < signalStrength.getEvdoDbm() ? signalStrength.getCdmaDbm() : signalStrength.getEvdoDbm());
                else mService.release();
        }
} 
```

# c# - 将 List/Array 传递给存储过程，并在存储过程中一一检索参数。？

> ID：12857828
> 
> 赞同：0
> 
> 时间：2012-10-12T11:13:25.717
> 
> 标签：c#, asp.net, sql-server-2005, stored-procedures

我的 asp.net 页面中有带有复选框的下拉列表。在该页面中，我将检查多个/单个/所有值。

现在我想将下拉列表中的所有选定值作为参数传递给 sql server 2005 存储过程。

我想将选定值的数组作为字符串传递，每个数组项用“，”分隔

在存储过程中，我想一一检索每个值。（使用拆分功能或任何更好的选择？）

我想处理每个选定参数的插入查询。

请提供任何帮助。

我试过这个存储过程。

```
CREATE PROCEDURE [dbo].[TEST_LIST] 
@ID_LIST VARCHAR(200) 
```

AS
DECLARE @pos int、@nextpos int、@valuelen int

选择@pos = 0，@nextpos = 1

WHILE @nextpos > 0 BEGIN SELECT @nextpos = charindex(',', @ID_LIST, @pos + 1) SELECT @valuelen = CASE WHEN @nextpos > 0 THEN @nextpos ELSE len(@ID_LIST) + 1 END - @pos - 1

```
 INSERT INTO TABLE 
    (ID)
     VALUES (convert(int, substring(@ID_LIST, @pos + 1, @valuelen)))
  SELECT @pos = @nextpos 
```

结束返回结束

但这是正确的吗？

我出错了。

请注意这一点>我要一一检索参数，并且每次我都有插入查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:04:37.690

您可以使用 c# 连接字符串（这也称为“计数表”），然后在 sql 中拆分它们。

一篇关于如何拆分“统计表”的好文章：[http ://www.sqlservercentral.com/articles/T-SQL/62867/](http://www.sqlservercentral.com/articles/T-SQL/62867/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:11:43.053

作为我的问题的答案，您请更改您的存储过程，如下所示。

```
CREATE  PROCEDURE SplitList
@List varchar(500) --list like 1,12,13 or john,12,bobe 
```

开始

```
DECLARE @value varchar(10), @Pos int

SET @List = LTRIM(RTRIM(@List))+ ','
SET @Pos = CHARINDEX(',', @List, 1)

IF REPLACE(@List, ',', '') <> ''
BEGIN
    WHILE @Pos > 0
    BEGIN
        SET @value = LTRIM(RTRIM(LEFT(@List, @Pos - 1)))
        IF @value <> ''
        BEGIN
            -- put your code here 
        END
        SET @List = RIGHT(@List, LEN(@List) - @Pos)
        SET @Pos = CHARINDEX(',', @List, 1)

    END
END 
```

结尾

谢谢大家。

# ruby - 在 Rails 中用于博客评论和星级评定的宝石

> ID：12857829
> 
> 赞同：2
> 
> 时间：2012-10-12T11:13:33.250
> 
> 标签：ruby, ruby-on-rails-3, rubygems

在 Rails 3.2.8 应用程序中包含`Comments`和包含哪些宝石？`Star Rating`另外，如果有任何文章我可以阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:24:41.400

也许您不应该为此使用 gem 而是自己做？

*   [act_as_commentable](https://github.com/jackdempsey/acts_as_commentable) - 为您的模型添加评论

*   [let_rate](https://github.com/muratguzel/letsrate) - 添加评分

# ios - 分组 UITableView 和部分索引

> ID：12857831
> 
> 赞同：5
> 
> 时间：2012-10-12T11:13:36.633
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

Apple的文档中有这条信息`tableView:sectionForSectionIndexTitle:atIndex:`：

> 您只为具有节索引列表的表视图实现此方法——它只能是以普通样式 ( `UITableViewStylePlain`) 创建的表视图。

（来源：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)）

有谁知道这是为什么？我正在制作一个具有`UITableViewStyleGrouped`带索引的分组表视图（）的应用程序，它可以正常工作。文档是错误的还是我遗漏了一些明显的东西？

# windows - 将 Subversion (SVN) 符号链接文本文件转换为 NTFS 符号链接的批处理脚本

> ID：12857837
> 
> 赞同：3
> 
> 时间：2012-10-12T11:13:45.743
> 
> 标签：windows, svn, unix, batch-file, symlink

**我们的设置：**
我们混合使用 Windows XP 和 Windows 7 机器进行开发，以及一些保存我们的 Subversion (SVN) 存储库并托管我们的网站的 unix 服务器。我们的网站存储在 SVN 存储库中，因此当需要对网站进行更改时，我们会将 SVN 的工作副本检出到我们的 Windows 机器上。完成所有更改后，我们将工作副本提交回 SVN 存储库，然后一个 bash 脚本将存储库的头部部署到网络服务器。（很标准的东西）

**我的问题：**
该网站使用（unix）符号链接（无法替换）。因此，检查它并从 unix 服务器提交工作正常，符号链接仍然存在。但是由于我们使用的是 Windows 开发机器，SVN 不会自动将它们的符号链接表示转换为 Windows/NTFS 符号链接，即使它们受支持（我们的 Windows XP 机器已安装相关驱动程序）。SVN 符号链接是没有扩展名的文件，其中包含：

```
link  /path/link/was/pointing/to 
```

**我的问题：**
我不精通批处理脚本（习惯于 unix bash 脚本）。任何关于如何在批处理脚本中将 SVN 的文本符号链接最好地转换为有效的 Windows/NTFS 符号链接的指导都会很受欢迎。

如果我将 Windows 符号链接提交到 SVN 存储库会发生什么？
我是否需要第二个脚本将 Windows 符号链接转换回 SVN 文本链接？
后者会破坏 Unix 端 SVN 文本链接到 Unix 符号链接的转换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-19T13:42:12.000

我建议进入 VBScript 和 Windows Script Host。比如说，我有一个名为的文件`C:\Temp\Hello.txt`，我想创建一个链接`C:\Temp\Sample`。我将创建一个脚本，命名`MakeSample.vbs`如下：

```
Set WshShell = CreateObject("Wscript.shell")
Set oMyShortcut = WshShell.CreateShortcut("C:\Temp\Sample2.lnk")
oMyShortcut.WindowStyle = 3
oMyShortcut.TargetPath = "C:\Temp\Hello.txt"
oMyShortCut.Save 
```

在 VBScript 中读取 LINK 文件很简单，例如：

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set f = fso.OpenTextFile("C:\Temp\linkfile.")
txt = f.ReadAll
f.Close
MsgBox txt 
```

我认为使用上述内容作为起点来破解一些东西应该相对简单。

# php - 调用时间按引用传递，二级引用？

> ID：12857840
> 
> 赞同：2
> 
> 时间：2012-10-12T11:13:55.297
> 
> 标签：php, mongodb, pass-by-reference

## 概括

我正在尝试找到一种方法将引用的变量向上更改两个级别，同时避免`Deprecated: Call-time pass-by-reference has been deprecated`

## 我做过的研究

我已经浏览了[这个](https://stackoverflow.com/questions/4665782/call-time-pass-by-reference-has-been-deprecated)和[这个](https://stackoverflow.com/questions/3968832/php-call-time-pass-by-reference-unavoidable)，似乎`call_user_func_array`可以使警告静音，但我认为我错过了一些东西。

## 问题

我将 MongoDB 与 PHP 一起使用，以下方法属于一个模型，并在保存之前简单地检查通过引用传递给它的输入的架构。

```
// $this->collection is the MongoCollection object
public function save(&$entry) {

    if( empty($entry) ) return false;
    if( !$this->checkSchema($entry) ) $this->throwDbError('Schema violation in `' . get_class($this) . '`');

    try { return $this->collection->save(&$entry); } // <---- want to avoid using &
    catch (Exception $e) { return $this->throwDbError($e); }

} 
```

`MongoCollection::save ($this->collection->save)`将使用新的文档 ID附加该`_id`字段。*但是，除非*我通过引用传递调用时间，否则`$entry`此更改不会反映在`$entry`传递给上述方法的内容上。（本质上我希望能够*向上修改两个级别*）*`MongoCollection::save``$entry`*

 **好吧，这是我解释问题的最佳方法，如果您需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:55:37.653

[MongoCollection::save()](http://www.php.net/manual/en/mongocollection.save.php)和[MongoCollection::insert()](http://www.php.net/manual/en/mongocollection.insert.php)都可以通过设置一个键来修改它们的参数`_id`，尽管它似乎没有记录在案`save()`（[我会尽快修复](https://jira.mongodb.org/browse/PHP-529)）。在内部，这两种方法都在修改传递给 C 函数的原始 zval。如果我不得不猜测，这是因为将第一个参数指定为引用会导致无法传递数组文字。因此，无论如何，扩展都会欺骗并修改参数，其副作用是无法修改通过引用传递的内容。

我测试了以下代码，这似乎以在保存方法中复制数组参数为代价解决了这个问题：

```
public function save(&$entry)
{
    if (empty($entry)) {
        return false;
    }

    if (!$this->checkSchema($entry)) {
        $this->throwDbError('Schema violation in `' . get_class($this) . '`');
    }

    try {
        $entryCopy = $entry;
        $saveResult = $this->collection->save($entryCopy);

        if (!isset($entry['_id']) && isset($entryCopy['_id']) {
            $entry['_id'] = $entryCopy['_id'];
        }

        return $saveResult; 
    } catch (Exception $e) {
        return $this->throwDbError($e);
    }
} 
```

我想如果您愿意，您可以随时将`_id`属性复制回`$entry`。或者，您可以使用数组复制并简单地将`$entry[`_id初始化`]`为新的[MongoId](http://php.net/manual/en/class.mongoid.php)实例（如果尚未设置）。这本质上就是驱动程序在插入没有`_id`.**

# actionscript-3 - flex datagrid 不追加行

> ID：12857841
> 
> 赞同：0
> 
> 时间：2012-10-12T11:13:57.870
> 
> 标签：actionscript-3, flex4.5

如何停止将数据行附加到我的数据网格？我在状态之间切换。每次我回到 update_dg_form 状态时，都会将额外的 networkInfo 行添加到数据网格中。

```
private function update_dg(event:MouseEvent):void
{           
    var ntf:Vector.<NetworkInterface> = NetworkInfo.networkInfo.findInterfaces();
    for each (var interfaceObj:NetworkInterface in ntf)
    {
        networkInfo.addItem({"dg_display_name" : interfaceObj.displayName, "dg_mac_address" : interfaceObj.hardwareAddress});
    }
        currentState = 'update_dg_form';                    
}

<mx:DataGrid id="network_adapter" includeIn="update_dg_form" x="55" y="280" width="516" height="111" dataProvider="{networkInfo}" selectedIndex="0">
    <mx:columns>
        <mx:DataGridColumn dataField="dg_display_name" headerText="Network Adapter"/>
        <mx:DataGridColumn dataField="dg_mac_address" headerText="MAC Address"/>
    </mx:columns>
</mx:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:12:06.920

您可以在使用插入新信息之前从 networkInfo 中删除所有元素`networkInfo.removeAll();`

```
private function update_dg(event:MouseEvent):void {
    var ntf:Vector.<NetworkInterface> = NetworkInfo.networkInfo.findInterfaces();
    networkInfo.removeAll();
    for each (var interfaceObj:NetworkInterface in ntf) {
        networkInfo.addItem({"dg_display_name":interfaceObj.displayName, "dg_mac_address":interfaceObj.hardwareAddress});
    }
    currentState = 'update_dg_form';
}

<mx:DataGrid id="network_adapter" includeIn="update_dg_form" x="55" y="280" width="516" height="111" dataProvider="{networkInfo}" selectedIndex="0">
    <mx:columns>
        <mx:DataGridColumn dataField="dg_display_name" headerText="Network Adapter"/>
        <mx:DataGridColumn dataField="dg_mac_address" headerText="MAC Address"/>
    </mx:columns>
</mx:DataGrid> 
```

# excel - 当存储在远程数据库的字段中时，是否可以（以及如何）在 Excel 中运行 vba 函数？

> ID：12857842
> 
> 赞同：0
> 
> 时间：2012-10-12T11:13:57.327
> 
> 标签：excel, excel-2010, vba

我正在创建一个 XLS，不同的部门/人员将使用它来查看专门适用于该部门、人员或所有事物的不同报告。

因为报告的数量会很多，我想限制文件的大小。当前从 SQL Server 中提取并列出可用的报告，然后用户在所需报告旁边输入“X”并点击 GENERATE。

该报告在工作表中生成，该工作表是动态创建的，并在文件关闭时删除。

此时，我仍然需要为所需的每个特定报告提供一个模块。有些是几行，有些则更多，例如需要大量配置的数据透视表或需要大量格式化的通用表等。

是否可以从数据库中以文本形式检索 vba，然后将其作为 VBA 运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:41:08.063

您可以使用 VBA 动态添加编写代码，但您需要允许对 VB 对象模型进行编程访问，并根据用户将使用的 Excel 版本更改各种信任设置。病毒扫描程序还可以删除引用 VB 对象模型的模块，因为它们将其视为安全威胁。

所以是的，您可以通过动态从字符串创建 VBA 代码来从远程存储的代码中运行代码

Chip Pearson 在这里很好地介绍了这一点：[http ://www.cpearson.com/excel/vbe.aspx](http://www.cpearson.com/excel/vbe.aspx)

也就是说，这不是我真正推荐的东西，VBA 代码不占用太多空间，毕竟它只是文本，所以我很想将所有代码留在工作簿中，它更简单，对用户来说更容易并且并发症更少。

如果您不想这样做，我建议您将所有代码放在加载项中，然后将其与您创建的工作簿分开，但允许所有功能而没有动态生成代码的缺点

# jquery - 单击 jQuery 时为 div 赋予样式

> ID：12857844
> 
> 赞同：-1
> 
> 时间：2012-10-12T11:14:03.547
> 
> 标签：jquery, html, css

我有一个 div `#sideFilter.smallScreenFilter`，点击它时我想分配 css 来显示

```
{left:0;} 
```

我怎样才能在 jQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:15:07.967

您可以使用[点击功能](http://api.jquery.com/click/)：

```
$('#sideFilter').click(function(){
   $(this).css({left:0});
}); 
```

请注意，我`.smallScreenFilter`从您的选择器中删除了 ：如果您只想在类存在时使用此事件处理程序（假设它可能不存在），请将其重新添加到选择器中。如果不忽略：id 是唯一的，通常是最好的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:17:55.340

尝试这个：

```
$('#sideFilter').click(function(){
   $(this).css({left:0});
}); 
```

我认为您在选择器中不需要类...如果需要，您可以添加它

# pdf - 如何修复 PDF 文件并嵌入丢失的字体

> ID：12857849
> 
> 赞同：15
> 
> 时间：2012-10-12T11:14:21.787
> 
> 标签：pdf, fonts, pdf-generation, truetype, pdftk

我曾经`pdftk`修复损坏的 PDF 文件中的一些故障，但我遇到了另一个问题，该问题没有被修复`pdftk`（或者至少我不知道该怎么做）。

我有基于`TrueType`字体的文本的 PDF 文件，但在 PDF 创建期间没有嵌入字体。现在我想将所需的字体嵌入到现有文件中。

是否有命令行工具（如`pdftk`）通过提供文件路径来嵌入丢失的字体`TTF`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-29T23:23:57.287

您可以使用*Ghostscript*嵌入缺失的字体。像这样运行命令：

```
gs                                             \
  -o file-with-embedded-fonts.pdf              \
  -sDEVICE=pdfwrite                            \
  -dEmbedAllFonts=true                         \
  -sFONTPATH="/path/to/ttf;/other/path/to/ttf" \
   input-without-embedded-fonts.pdf 
```

另请参阅此答案：

*   [**如何在现有 PDF 中嵌入字体？**](https://stackoverflow.com/q/4231656/359307)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-25T10:22:21.780

我刚刚遇到了同样的问题（在 Ubuntu 14.04 上），我找到了以下解决方案：

*   安装 Acrobat Reader
*   将“打印到文件”打印到后记文件（“foo.ps”）和“高级 -> 打印为图像”
*   然后在控制台上使用`ps2pdf foo.ps foo.pdf`，结果是一个带有嵌入字体和原始内容的文件

中间后记文件 (650KB) 比输入文件 (56KB) 大得多，但生成的 PDF 大小又适中 (82KB)。

我不知道为什么会这样，即

*   为什么“打印为图像到文件”似乎创建了图像但也保留了字体信息，
*   为什么 ps2pdf 会恢复此字体信息，以及
*   为什么生成的 PDF 中有字体，因为它应该只是一个图像，对吧？

但结果是嵌入了所有字体且大小与原始文件相似的 PDF。

# jquery - 在不再次指定处理程序的情况下切换 jquery 事件状态（开/关）

> ID：12857854
> 
> 赞同：3
> 
> 时间：2012-10-12T11:14:48.137
> 
> 标签：jquery, events, javascript-events, event-handling

我有一个元素，它有 hover(mouseenter/mouseout) 事件和与之关联的处理程序。我想停用此事件一次，让我们说，直到我的页面被加载或执行一个操作，然后我希望它可以重新激活而无需再次指定相同的处理程序。

如果我这样做：

```
$(element).on('mouseout', handler); //Initial state when i prepare my object
$(element).off('mouseout'); //To turn off the event for the time-being. 
```

在这里，如果我想重新打开/重新关联事件，我也必须重新分配他的处理程序。

我的要求是这样的：

1.  我绑定事件和处理程序：

    ```
    $(element).on('eventName', handler) 
    ```

2.  代码：

    ```
    $(element).freezeEvent(); //It wont trigger the mouseenter/mouseout event. 
    ```

3.  代码：

    ```
    $(element).unFreezeEvent(); //It will make mouseenter/mouseout event and its original handler to be called up. 
    ```

请建议。步骤和流程只能这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:58:16.703

一个非常简单的解决方案是在处理程序本身中处理冻结..

```
var handler = function (event) {

  if (!$(event.target).isFrozen()) {

     // do whatever you like...
  }
} 
```

对此的 jQuery 扩展：

```
$.fn.freeze = function () {

  return this.each(function () {

    $(this).data('frozen', true);
  });
}

$.fn.unfreeze = function () {

  return this.each(function () {

    $(this).data('frozen', false);
  });
}

$.fn.isFrozen = function () {

  return !!this.eq(0).data('frozen');
} 
```

像这样冻结和解冻元素：

```
$(element).freeze(); // returns jQuery object for chaining
$(element).unfreeze(); // returns jQuery object for chaining 
```

获取当前状态：

```
var state = $(element).isFrozen(); // returns true or false 
```

为了确保您的处理程序在附加后不会立即触发，只需在附加之前冻结元素：

```
$(element).freeze().on('someEvent', handler); 
```

# mysql - mysql 外键错误 150

> ID：12857856
> 
> 赞同：1
> 
> 时间：2012-10-12T11:14:54.940
> 
> 标签：mysql, sql, foreign-keys

我正在尝试创建一个订单管理系统，但在创建基表（即（`Suppliers,Customers,Categories,Employees,Shippers`））之后，我通过创建产品和订单进入下一个级别，我可以在这些表中添加外键。现在我添加了最后一级表`oderDetail`并尝试将 Foregin 键添加到 OrderID 和 ProdcuID 但它只是给了我错误 150 mysqldump

```
-- MySQL Administrator dump 1.4
--
-- ------------------------------------------------------
-- Server version   5.5.8

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

--
-- Create schema testdrive
--

CREATE DATABASE IF NOT EXISTS testdrive;
USE testdrive;

--
-- Definition of table `categories`
--

DROP TABLE IF EXISTS `categories`;
CREATE TABLE `categories` (
  `CategoryID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Description` varchar(45) NOT NULL,
  `Picture` blob,
  PRIMARY KEY (`CategoryID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `categories`
--

/*!40000 ALTER TABLE `categories` DISABLE KEYS */;
/*!40000 ALTER TABLE `categories` ENABLE KEYS */;

--
-- Definition of table `customers`
--

DROP TABLE IF EXISTS `customers`;
CREATE TABLE `customers` (
  `CustomerID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `CompanyName` varchar(255) NOT NULL,
  `ContactName` varchar(255) NOT NULL,
  `ContactTitle` varchar(255) NOT NULL,
  `Address` text NOT NULL,
  `City` varchar(255) NOT NULL,
  `Region` varchar(255) NOT NULL,
  `PostalCode` varchar(45) NOT NULL,
  `Country` varchar(255) NOT NULL,
  `Phone` varchar(255) NOT NULL,
  `Fax` varchar(255) NOT NULL,
  PRIMARY KEY (`CustomerID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `customers`
--

/*!40000 ALTER TABLE `customers` DISABLE KEYS */;
/*!40000 ALTER TABLE `customers` ENABLE KEYS */;

--
-- Definition of table `employees`
--

DROP TABLE IF EXISTS `employees`;
CREATE TABLE `employees` (
  `EmployeeID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `LastName` varchar(255) NOT NULL,
  `FirstName` varchar(255) NOT NULL,
  `Title` varchar(255) NOT NULL,
  `BirthDate` date NOT NULL,
  `HireDate` date NOT NULL,
  `Address` text NOT NULL,
  `City` varchar(255) NOT NULL,
  `Region` varchar(255) NOT NULL,
  `PostalCode` varchar(45) NOT NULL,
  `Country` varchar(255) NOT NULL,
  `HomePhone` varchar(255) NOT NULL,
  `Extension` varchar(255) DEFAULT NULL,
  `Photo` blob NOT NULL,
  `Notes` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`EmployeeID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `employees`
--

/*!40000 ALTER TABLE `employees` DISABLE KEYS */;
/*!40000 ALTER TABLE `employees` ENABLE KEYS */;

--
-- Definition of table `orderdetail`
--

DROP TABLE IF EXISTS `orderdetail`;
CREATE TABLE `orderdetail` (
  `OrderDetailID` int(10) NOT NULL,
  `ProductID` int(10) NOT NULL,
  `OrderID` int(10) NOT NULL,
  `Quantity` varchar(255) NOT NULL,
  `Discount` varchar(255) NOT NULL,
  PRIMARY KEY (`OrderDetailID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `orderdetail`
--

/*!40000 ALTER TABLE `orderdetail` DISABLE KEYS */;
/*!40000 ALTER TABLE `orderdetail` ENABLE KEYS */;

--
-- Definition of table `ordres`
--

DROP TABLE IF EXISTS `ordres`;
CREATE TABLE `ordres` (
  `OrderID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `CustomerID` int(10) unsigned NOT NULL,
  `EmployeeID` int(10) unsigned NOT NULL,
  `OderDate` date NOT NULL,
  `RequiredDate` date NOT NULL,
  `ShippedDate` date NOT NULL,
  `ShipperID` int(10) unsigned NOT NULL,
  PRIMARY KEY (`OrderID`),
  KEY `Order_Customer` (`CustomerID`),
  KEY `Order_Employee` (`EmployeeID`),
  KEY `Order_Shipper` (`ShipperID`),
  CONSTRAINT `Order_Customer` FOREIGN KEY (`CustomerID`) REFERENCES `customers` (`CustomerID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `Order_Employee` FOREIGN KEY (`EmployeeID`) REFERENCES `employees` (`EmployeeID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `Order_Shipper` FOREIGN KEY (`ShipperID`) REFERENCES `shippers` (`ShipperID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `ordres`
--

/*!40000 ALTER TABLE `ordres` DISABLE KEYS */;
/*!40000 ALTER TABLE `ordres` ENABLE KEYS */;

--
-- Definition of table `products`
--

DROP TABLE IF EXISTS `products`;
CREATE TABLE `products` (
  `ProductID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `ProductName` varchar(255) NOT NULL,
  `SupplierID` int(10) unsigned NOT NULL,
  `CategoryID` int(10) unsigned NOT NULL,
  `QuantityPerUnit` varchar(255) NOT NULL,
  `UnitPrice` varchar(255) NOT NULL,
  PRIMARY KEY (`ProductID`),
  KEY `Product_Supplier` (`SupplierID`),
  KEY `Product_Category` (`CategoryID`),
  CONSTRAINT `Product_Supplier` FOREIGN KEY (`SupplierID`) REFERENCES `suppliers` (`SupplierID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `Product_Category` FOREIGN KEY (`CategoryID`) REFERENCES `categories` (`CategoryID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `products`
--

/*!40000 ALTER TABLE `products` DISABLE KEYS */;
/*!40000 ALTER TABLE `products` ENABLE KEYS */;

--
-- Definition of table `shippers`
--

DROP TABLE IF EXISTS `shippers`;
CREATE TABLE `shippers` (
  `ShipperID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `CompanyName` varchar(255) NOT NULL,
  `Phone` varchar(255) NOT NULL,
  PRIMARY KEY (`ShipperID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `shippers`
--

/*!40000 ALTER TABLE `shippers` DISABLE KEYS */;
/*!40000 ALTER TABLE `shippers` ENABLE KEYS */;

--
-- Definition of table `suppliers`
--

DROP TABLE IF EXISTS `suppliers`;
CREATE TABLE `suppliers` (
  `SupplierID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `CompanyName` varchar(255) NOT NULL,
  `ContractTittle` varchar(255) NOT NULL,
  `Address` text NOT NULL,
  `City` varchar(255) NOT NULL,
  `Region` varchar(255) NOT NULL,
  `PostalCode` varchar(255) NOT NULL,
  `Country` varchar(255) NOT NULL,
  `Phone` varchar(255) NOT NULL,
  `Fax` varchar(255) NOT NULL,
  `HomePage` text NOT NULL,
  PRIMARY KEY (`SupplierID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `suppliers`
--

/*!40000 ALTER TABLE `suppliers` DISABLE KEYS */;
/*!40000 ALTER TABLE `suppliers` ENABLE KEYS */; 
```

这就是我想要做的

```
 ALTER TABLE testdrive.orderdetail
 ADD CONSTRAINT orderDetail_Product FOREIGN KEY (ProductID) REFERENCES testdrive.products (ProductID) ON UPDATE CASCADE ON DELETE CASCADE,
 ADD CONSTRAINT OrderDetail_Order FOREIGN KEY (OrderID) REFERENCES testdrive.ordres (OrderID) ON UPDATE CASCADE ON DELETE CASCADE; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:25:10.370

两个不完全相同的字段之间的外键。字段类型、维度和标志应该相同。

在表格 `unsigned` 的列中添加 int `( productId, orderId )` `testdrive.orderdetail`

# joomla - 在 Joomla 中自动添加新类别

> ID：12857859
> 
> 赞同：0
> 
> 时间：2012-10-12T11:15:12.283
> 
> 标签：joomla, joomla2.5

是否可以在安装组件时自动在组件上的菜单中添加链接？目前我正在通过安装时执行 sql 代码使用硬核方法，但将来在我的情况下可能会出现 id 的一些问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:21:10.067

从技术上讲，答案是肯定的。在安装过程中，您绝对可以添加代码来完成您想要做的任何事情。

然而，这是一个非常糟糕的主意，很可能让人们不使用你的扩展程序。自动添加菜单的问题在于，您无法知道在不应该出现的地方添加新菜单项是否完全搞砸了某人的网站。

您最好创建好的文档来准确解释需要对菜单项执行的操作。

# r - 将属性传递给 Rcpp::Function

> ID：12857860
> 
> 赞同：1
> 
> 时间：2012-10-12T11:15:15.967
> 
> 标签：r, rcpp

我正在尝试将一个向量传递给从 Rcpp 中调用的 R 函数：

```
Rcpp::Function aperm("aperm");
int perm[3] = {2,1,3};
arr = aperm(arr, Rcpp::Named("perm", perm)); 
```

我曾尝试在调用 aperm 之前包装烫发，但在这两种情况下，我都会收到各种 Rcpp 错误：

```
arr = aperm(arr, Rcpp::Named("perm", Rcpp::wrap(perm))); 
```

从 Rcpp 调用时，是否可以将向量作为参数传递给 R 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:17:47.353

是的，但您需要确保使用`Rcpp::wrap()`-- 如果不为您调用隐式模板表单，则可能会明确使用。在这里，您的 C 函数数组`perm`的格式错误。做一个`IntegerVector`和事情应该工作。

一般来说，*发布到 rcpp-devel 列表中的**完整*且*可重复*的示例是解决此问题的最佳方式。

# java - Java - exec 不像 shell

> ID：12857862
> 
> 赞同：0
> 
> 时间：2012-10-12T11:15:21.363
> 
> 标签：java, shell, unix, exec

我希望我的 Java 程序`echo "text" > /home/maxbester/test.txt`在几个基于 Unix 的系统上运行该命令。

我的代码如下所示：

```
private static final Logger LOG = Logger.getLogger(MyClass.class);
public String run(String cmd)  {
    String res = null;
    InputStream is = null;
    try {
        final Runtime rt = Runtime.getRuntime();
        final Process p = rt.exec(cmd);
        int exitStatus = -1;
        try {
            exitStatus = p.waitFor();
        } catch (InterruptedException e) {
            L0G.error(e.getMessage(), e);
        }
        is = p.getInputStream();

        if (exitStatus == 0) {
            if (is != null && is.available() > 0) {
                StringWriter stringWriter = new StringWriter();
                IOUtils.copy(is, stringWriter);
                res = stringWriter.toString();
            } else {
                L0G.error("InputStream is not available!");
            }
        }
    } catch (SecurityException e) {
        L0G.error(e.getMessage(), e);
    } catch (IOException e) {
        L0G.error(e.getMessage(), e);
    }
    return res;
} 
```

当 cmd 等于`echo "text" > /home/maxbester/test.txt`并且文件 test.txt 存在时， res 包含`"text" > /home/maxbester/test.txt`（而不是`echo "text" > /home/maxbester/test.txt`，**回**显消失）并且 test.txt 为空。但是退出值为 0（因此它应该可以正常工作）。

我手动运行`echo "text" > /home/maxbester/test.txt`。没有返回任何内容，退出值也为 0。

那么 exec 命令出了什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:28:32.617

如果你想用 Java 将文本写入文件，你应该看看[FileWriter](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/FileWriter.html)而不是依赖于特定于 shell 的细节，例如流重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:31:44.000

如果你想让 exec 表现得像一个 shell，你必须调用一个 shell。例如

```
String shell = System.getEnv("SHELL");
cmd = shell + " -c \"echo test > /home/maxbester/test\""; 
```

您的测试不读取标准错误。也许那里有一些有趣的东西。

# android - 如何在 ActionBarSherlock 中使用自定义视图

> ID：12857871
> 
> 赞同：0
> 
> 时间：2012-10-12T11:15:56.153
> 
> 标签：android, actionbarsherlock

所以我有一个问题，我正在构建一个 4 标签应用程序。对于标签支持，我使用 ABS。一切正常。然而，我讨厌一个问题。为了在选项卡项目中设置图标，我使用：

```
 tab1 = getSupportActionBar().newTab();
tab1.setTag("1");
tab1.setIcon(R.drawable.androidtopmenu01);
tab1.setTabListener(this);
getSupportActionBar().addTab(tab1); 
```

所以它添加了新标签，没问题。但它也为图像的每一侧添加了很多填充。因此，当我添加 4 个选项卡时，它们比常规屏幕更宽，我的意思是很多，所以根本看不到 4 个选项卡。我知道用户可以在那里滑动，或者当我选择标签 3 时它会自动向右滑动。但我想删除这些填充，所以在启动时用户将看到所有 4 个选项卡。或至少 3 个和 4 个中的大部分。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:10:15.717

好的，我肯定不会使用 ActionBarSherlock，但它可能与样式有关。因此，请尝试在库的值文件夹中设置正确的选项卡样式。我不太确定，但正如我所看到的，它可能是：

```
<style name="Widget.Sherlock.ActionBar.TabView" parent="Widget">
    <item name="android:gravity">center_horizontal</item>
    <item name="android:background">@drawable/abs__tab_indicator_ab_holo</item>
    <item name="android:paddingLeft">16dip</item>
    <item name="android:paddingRight">16dip</item>
</style> 
```

尝试减少这些填充。

# html - 更改所有浏览器中选项卡的宽度

> ID：12857872
> 
> 赞同：1
> 
> 时间：2012-10-12T11:15:57.880
> 
> 标签：html, css, xml, internet-explorer, width

我有一个小问题。我将 XML 文件打印为文本区域中的字符串。但是当我在 Firefox 或 Internet Explorer 中打开 textarea 时，选项卡空间的宽度之间存在巨大差异。在 Internet Explorer 中，tabspace 的宽度大约为 10 个空格，而在 FireFox 和 Chrome 中，它更像是 4 个空格。

谁能告诉我如何为每个浏览器设置选项卡空间，使其看起来都一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:54:22.170

由于要在 textarea 中添加 xml，因此您使用的是字符串，
您可以使用 javascript 将所有制表符转换为空格，如下所示：

```
var tab = RegExp("\\t", "g");
var new_str = str.replace(tab,"&nbsp;&nbsp;&nbsp;&nbsp;"); 
```

这样宽度在任何浏览器中都将保持不变。

# javascript - 在 iOS UIWebView 中调用 Javascript 时的安全限制？

> ID：12857875
> 
> 赞同：1
> 
> 时间：2012-10-12T11:16:03.450
> 
> 标签：javascript, ios, security, uiwebview, webview

我正在研究一个 iOS 应用程序的可行性，该应用程序将在后台打开多个 UIWebView，并根据输入到原始应用程序中的用户数据数据登录多个网站。主应用程序将通过执行 Javascript 来驱动隐藏的 webviews，以从页面获取（抓取）数据以进行成本比较，然后在需要时执行操作。该网站使用https。

我需要注意与此相关的任何安全限制或其他问题吗？

谢谢

Ĵ

# python - Python - 打开新外壳并运行命令

> ID：12857879
> 
> 赞同：5
> 
> 时间：2012-10-12T11:16:13.413
> 
> 标签：python, shell, terminal, command

目前，我正在使用以下方法从 Python 中运行 bash 命令：

```
os.system(cmd) 
```

但是我需要在新的 shell/终端中运行命令。有谁知道如何做到这一点？

谢谢，丹

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T11:20:28.043

我正在使用以下方法（这也会将标准错误重定向到标准输出）：

```
import subprocess    
cmd_line = "echo Hello!"
p = subprocess.Popen(cmd_line, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
out = p.communicate()[0]
print out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:17:36.013

`os.system()`不赞成使用：

```
import subprocess
print subprocess.check_output("command", shell=True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-02T03:11:22.520

Windows“WshShell”，谷歌，就是答案。我的完整步骤：

安装

```
1\. pip install pywin32-221-cp36-cp36m-win_amd64.whl
2\. python.exe pywin32_postinstall.py -install  (DOS command line) 
```

跑

```
3\. import win32com.client
4\. WshShell = win32com.client.Dispatch("WScript.Shell")
5\. WshShell.run("cmd") 
```

WshShell.run() 是您所需要的，有许多不同的运行方式。隐藏窗口、新窗口、全屏、最小化等。

# java - 集合中的唯一性

> ID：12857882
> 
> 赞同：3
> 
> 时间：2012-10-12T11:16:30.493
> 
> 标签：java

如果我以 a 为例`HashSet<E>`，并向其中添加对象，它如何检查对象是否已经存在？

我有以下简单的设置：

```
private class MyObject {
    String text;

    public MyObject(String text) {
        this.text = text;
    }

    @Override
    public boolean equals(Object o) {
        if (o != null && o instanceof MyObject) {
            return ((MyObject) o).text.equals(text);
        }

        return false;
    }

} 
```

在我的项目中，我有很多这样的对象，但都是单独初始化的。我想通过将 all 添加到 a 来过滤双打，`Set`如下所示：

```
MyObject m1 = new MyObject("1");
MyObject m2 = new MyObject("1");
MyObject m3 = new MyObject("2");

System.out.println(m1.equals(m2)); //expected: true, result: true
System.out.println(m1.equals(m3)); //expected: false, result: false

Set<MyObject> myObjects = new HashSet<MyObject>();
myObjects.add(m1);
myObjects.add(m2);
myObjects.add(m3);

System.out.println(myObjects.size()); //expected: 2, result: 3

Set<String> stringList = new HashSet<String>();
stringList.add("1");
stringList.add("1");
stringList.add("2");
System.out.println(stringList.size()); //expected: 2, result: 2 
```

我怎样才能使我的`myObjects`套装不包含这些双打？所以`m1`和`m2`是不同的实例，但具有相同的内容，所以我只需要`m1`.

**编辑**
基于 Mathias Schwarz 的回答，我实现了`hashCode()`如下功能：

```
@Override
        public int hashCode() {
            return text.hashCode();
        } 
```

但是，如果我有一个包含多个字段的更复杂的类，我将如何实现此方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T11:19:26.510

`HashSet`确定两个对象在调用结果`equals`和对象上是否相同`hashCode`。`hashCode`如果你实施，你必须实施`equals`。如果它们不一致，`HashSet`将无法正确运行......所以重要的是这两种方法是如何实现的`MyObject`（顺便说一句，它实际上是一个类......）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T12:07:03.707

如果您使用 Eclipse，则**右键单击 --> 源 --> 生成 hashCode 和 Equals**。如果您想了解更多关于 hash code 和 equals的信息，请从[Effective Java中阅读](https://rads.stackoverflow.com/amzn/click/com/0321356683)[此部分](http://books.google.co.in/books?id=ka2VUBqHiWkC&pg=PA45&lpg=PA45&dq=effective%20java%20hashcode%20equals&source=bl&ots=yYHfIip5S0&sig=kvzj9N56FXje8K9e_oqMIBkBOWc&hl=en&sa=X&ei=8QR4UM2nB8mUrgf-14GICg&ved=0CEsQ6AEwBA#v=onepage&q=effective%20java%20hashcode%20equals&f=false)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:22:57.267

我同意马蒂亚斯·施瓦茨的观点。

更多信息：[http](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#hashCode) ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#hashCode () 和[http://docs.oracle.com/javase/1.5。 0/docs/api/java/lang/Object.html#equals(java.lang.Object](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#equals(java.lang.Object) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T11:21:40.390

将以下内容添加到您的类 MyObject

```
public String hashCode() {
  return text.hashCode();
} 
```

（我想该文本不为空。如果它可能为空，您必须将其纳入 acccoutn 并取消 NPE）

# php - 单击ajax响应HTML的提交按钮时表单未提交

> ID：12857883
> 
> 赞同：0
> 
> 时间：2012-10-12T11:16:33.257
> 
> 标签：php, jquery, ajax

我在 php 中使用 jquery 进行 ajax 调用，并且得到了相同的结果，但是在结果的（响应）HTML 中，我有一个表单在单击提交按钮后未提交。我没有收到任何错误。我也想在不使用 Ajax 的情况下提交这个响应 HTML 表单。请帮我解决这个问题。

阿贾克斯响应：

```
<form method=\"post\" id=\"clientlist\" action=\"addclients.php\">
  //inputs fileds...
</form> 
```

阿贾克斯调用：

```
var $j = jQuery.noConflict();
$j(document).ready(function(){
   $j(".linktext").click(function(){ 

   //check which link is tobe click e.g. Prev or Next
   var link = $j(this).html();
   var limit = 1;
   if(link == 'Prev'){
     limit = document.getElementById('text_prev').value;
   }else if(link =='Next'){ 
     limit = document.getElementById('text_next').value;
   }

   $j.ajax({
     type: "POST",
     data: $j("#clientlist").serialize(),
     url: "agencyclients_ajax.php?start="+limit,
     success: function(response) {
       $j('#mainbody').html(response);
     }
  });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:35:17.527

这是一个例子。将 $('#submit') 替换为您的提交按钮 ID。

```
$('#submit').click(function(){
     $.ajax({
         type:'POST',
         url: '/search.php',
         data: $j("#clientlist").serialize(),
         success: function(data){
            alert('sent');
         }
     });
return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:25:57.640

请使用提交事件的形式。当您单击提交时，只需执行 ajax 调用，然后返回 false 以确保该表单未以正常方式提交。

现在您正在使用链接 CLICK 事件`//not encouraged.`

并且对于 jquery 没有冲突，使用此代码：

```
(function($){
   $(function(){
      //$ can be used in this area without any conflict, provided by jQuery Docs for creating a plugin
   });
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:28:25.440

将 ajax 响应更改为：

```
<form method="post" id="clientlist" action="addclients.php">
  //inputs fileds...
</form> 
```

删除斜线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T11:29:30.347

这是因为事件处理程序在重新加载后未添加到“.linktext”。

您可以使用 JQuery On 函数，以便在 DOM 更改时重新应用事件处理程序。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$j(".linktext").click(function(){ 
```

变成

```
$j(".linktext").on("click", function(event){ 
```

# mongodb - MongoDB 设计 - 具有多个键的同一文档

> ID：12857885
> 
> 赞同：1
> 
> 时间：2012-10-12T11:16:38.037
> 
> 标签：mongodb, database, nosql

我对 MongoDB 完全陌生，我对如何构建数据感到困惑。我需要做的是存储一组可以通过不同键检索的对象。例如，我有对象“CustomerInfo”，它可以通过键“Customer1”、“Customer_1”、“Cust.1”、“Customer 1”等来引用。

在 RDMBS 中，我将创建一个单独的表来存储别名，并为客户信息数据提供一行。然后我会加入他们，使用从客户那里获得的任何别名，并获取数据。它看起来简单明了，但是到目前为止，我无法通过创建一个空数据库。在这种情况下，我在 RDBMS 方面的经验似乎更像是一种障碍，而不是一种资产，因为我倾向于“考虑关系”并且它（显然）不适用于 NoSQL 数据库。

欢迎任何建议，提前感谢所有答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:36:46.190

如果您无法在应用程序中从别名转换为实际 ID（这始终是首选），则一种选择是在 MongoDB 文档中简单地存储一个“别名”数组并为其编制索引：

像这样存储文档：

```
db.customers {
    aliases : ["Customer1", "Customer_1", "Cust.1", "Customer 1"],
    ...other customer info data...
} 
```

添加您的索引：

```
db.customers.ensureIndex({aliases:1}) 
```

然后简单地查询其中任何一个，所有这些都将返回上面的文档：

```
db.customers.find({aliases: "Customer1"})
db.customers.find({aliases: "Customer_1"})
db.customers.find({aliases: "Cust.1"})
db.customers.find({aliases: "Customer 1"}) 
```

该索引是可选的，但会显着提高性能。

# layout - Blackberry 帮助 对齐此布局

> ID：12857887
> 
> 赞同：0
> 
> 时间：2012-10-12T11:17:05.323
> 
> 标签：layout, blackberry, blackberry-jde

![在此处输入图像描述](../Images/72a66343fd49592dde0c58b6031491bb.png)

我已经尝试过了，但无法实现。我用 justifiedfieldmanager 只买了 2 个标签。我使用了horizo​​ntalfieldmanager，但它无法像这样对齐。我只是坚持如何在黑莓中获得这种类型的布局！非常感谢任何帮助！

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:32:54.227

请注意，如果您在不同分辨率的设备上使用您的应用程序，这会给您带来麻烦。因此，您实际上应该通过检查设备分辨率来解决这个问题。

```
if(Display.getWidth>320)
    setMargin(0,0,0,intFor320);
else
    setMargin(0,0,0,intForLessThan320); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:41:19.010

有几种方法可以实现这一点，我建议你使用 AbsoluteFieldManager

```
`//--------this is your toolbar AbsoluteFieldManager
AbsoluteFieldManager    _fieldManagerBottom;
_fieldManagerBottom = new AbsoluteFieldManager(); 
////------------

///--here you add the background image to your toolbar
BitmapField BgField = new BitmapField(BottombackgroundBitmap, Field.NON_FOCUSABLE);
_fieldManagerBottom.add(BgField);

////then you put your buttons and labels to the absolute manager at the position you want
CustumerBitmapButton yourButton;
yourButton = new CustumerBitmapButton (yourButtonBitmap,60,60,Field.FOCUSABLE);

_fieldManagerBottom.add(yourButton ,260,0);` 

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2012-10-12T11:42:28.350

我刚刚找到了解决方案：

```
HorizontalFieldManager hfm = new HorizontalFieldManager();

final ImageButton home = new ImageButton("",Field.FOCUSABLE, "home.png","home.png", 0x9cbe95);
            final ImageButton add = new ImageButton("",Field.FOCUSABLE, "add.png","add.png", 0x9cbe95);
            final ImageButton plus = new ImageButton("",Field.FOCUSABLE, "plus.png","plus.png", 0x9cbe95);
            final ImageButton bin = new ImageButton("",Field.FOCUSABLE, "bin.png","bin.png", 0x9cbe95);

            home.setMargin(0,0,0,50); 
```

其他人的setmargins也相似！！ 
```

# javascript - 仅向父 li 添加类

> ID：12857890
> 
> 赞同：1
> 
> 时间：2012-10-12T11:17:18.540
> 
> 标签：javascript, jquery, html

我有这个结构：

```
<li id="artworks"><a href="#">ARTWORK</a>
                <ul class="submenu">
                    <img src="../img/submenu.png" alt="submenu" width="62" height="1" />
                    <li id="sweetlife"><a href="#">Sweet Life</a></li>
                    <li><a href="#">Pleasure</a></li>
                    <li><a href="#">Bienal de la habana</a></li>
                    <li><a href="#">Estudios de craneos</a></li>width="62" height="1" />
                </ul>
            </li> 
```

我正在使用这个脚本：

```
 <script type="text/javascript">
      $(document).ready(function(){
          $('#artworks li').addClass('active')
      });
    </script> 
```

问题是我只想将活动类添加到“li id="artworks"”元素中，但是使用脚本将它添加到属于#artworks 的所有“li”中。

我怎样才能只指向父 li？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:22:08.217

代码应该是

```
$('#artworks').addClass('active')​; 
```

你可以在[这里看到工作](http://jsfiddle.net/2vaQB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:19:28.680

尝试

```
$('#artworks > a').addClass('active') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:20:44.420

更改此代码：

```
$('#artworks li').addClass('active') 
```

对此：

```
$('#artworks').addClass('active') 
```

为什么这行得通？ `#artworks`标识 ID 为 'artworks' 的任何元素（希望只有一个！） 紧随其后的是一个空格和一个元素，告诉 jQuery 匹配该类型的所有子元素`#artwork`。阅读选择器语法：[http ://www.w3.org/TR/selectors/#selectors](http://www.w3.org/TR/selectors/#selectors)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T11:20:54.750

这就是你想要的我认为：

```
$(document).ready(function(){
      $('li#artworks').addClass('active')
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T11:20:33.543

你应该试试这个

```
$('#artworks').addClass('active')​; 
```

# java - Jenkins 和 JaCoCo 与 sbt

> ID：12857891
> 
> 赞同：8
> 
> 时间：2012-10-12T11:17:22.537
> 
> 标签：java, jenkins, code-coverage, jacoco

我在 Jenkins 中有一个项目，我想创建一个 JaCoCo 代码覆盖率报告。如果我在本地运行`jacoco:test`，`jacoco:report`它会在其中创建正确的文件（.exec、.classes 和源），`myproject/target/scala-2.9.1/jacoco`因此它可以工作。

但是，在 jenkins 上构建时，这只创建了 classes 目录，这意味着它会拾取代码，而不是覆盖它的测试，所以我得到 0% 的代码覆盖率。

有没有人让 jacoco 以这种方式与 sbt 合作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T18:18:56.543

我在尝试开始一个新的 Scala 项目时遇到了同样的问题。在尝试了多种路径配置后，我想出了一个解决方案。

类目录路径的默认值为`**/classes`. 我怀疑问题是该模式允许匹配`target/scala-X.XX/classes/`和`target/scala-X.XX/jacoco/classes/`.

更改类目录路径以`target/*/classes`允许 Jenkins 插件开始报告正确的覆盖率信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T14:12:44.323

您没有提供有关 Jenkins 作业配置的太多信息，所以我做出了一些假设，但您可以在 Jenkins 作业中添加/执行多个构建步骤。构建步骤运行诸如运行 Maven 或运行任意脚本之类的东西。

第一个构建步骤可以是执行“jacoco:test jacoco:report”以运行 Jacoco 的 Maven 构建步骤，然后第二个构建步骤可以是您运行的任何其他查找 jacoco.exec 文件的步骤。

# java - Hazelcast - 组名相同但成员不同

> ID：12857892
> 
> 赞同：3
> 
> 时间：2012-10-12T11:17:23.453
> 
> 标签：java, hazelcast

如果使用非多播成员发现方法，为 Hazelcast 组使用默认名称（例如“我的产品名称”）是不好的做法吗？

我的担心是基于以下情况......如果您在同一网络上有多个 Hazelcast 组但成员不同，这意味着什么？它们会作为单独的组正常运行，还是会出现诸如消息被发送到错误组的成员之类的问题？

例如，如果您有一个名为“dev”的组，其中包含通过 TCP/IP 配置发现的节点 A 和 B（即，成员已明确定义），并且有人在另一台 PC 上启动了一个名为“dev”的新组在同一个网络上并明确定义了成员 C 和 D - 这些集群/组是否会在彼此隔离的情况下完美运行？

此外，如果第一组明确定义其成员，但第二组使用多播发现，那会改变什么吗？多播组是否会意外包含其他组的成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:54:27.527

Even though it would be better to use different group names for separate clusters, creating two TCP-IP clusters with explicitly defined members or one TCP-IP and one multicast cluster also should work without any issue.

In explicitly defined TCP-IP join, Hazelcast only opens connections to defined members.

In multicast join, Hazelcast opens a multicast socket and listens to multicast packets. Because TCP-IP cluster won't listen to multicast packets, creating one TCP-Ip and one multicast cluster will be safe.

Even you can create multiple multicast clusters using different multicast groups.

# asp.net - 存储在 Global.asax 中的列表

> ID：12857899
> 
> 赞同：2
> 
> 时间：2012-10-12T11:17:47.653
> 
> 标签：asp.net, list, store, global-asax

我们可以将应用程序级别的字符串存储在 global.asax 文件中，例如： *Global asax：*

```
void Application_Start(object sender, EventArgs e) 
    {
        Application.Lock();
        Application["msg"] = "";            
        Application.UnLock();        
    } 
```

然后在页面中我们得到“msg”变量： *a.aspx.cs：*

```
protected void Page_Load(object sender, EventArgs e)
 {
        string msg = (string)Application["msg"];
        //manipulating msg..
 } 
```

***但是，我想将对象列表存储为应用程序级变量而不是字符串 msg。***我试过这个： *Global.asax：*

```
void Application_Start(object sender, EventArgs e) 
    {
        Application.Lock();
        List<MyClassName> myobjects= new List<MyClassName>();      
        Application.UnLock();        
    } 
```

*a.aspx.cs：*

```
protected void Page_Load(object sender, EventArgs e)
    {
        //here I want to get myobjects from the global.asax and manipulate with it..
    } 
```

那么，*如何将 List myobjects 存储为 global.asax 中的应用程序级变量并使用它呢？*

此外，我还有一个问题： *当 global.asax 中的全局变量发生更改时，如何向客户端（浏览器）发送任何通知？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:24:44.737

一种方法是将其存储到缓存中：

```
using System.Web.Caching;    

protected void Application_Start()
{
   ...
   List<MyClassName> myobjects = new List<MyClassName>();
   HttpContext.Current.Cache["List"] = myobjects;
} 
```

然后访问/操作它：

```
using System.Web.Caching;

var myobjects =  (List<MyClassName>)HttpContext.Cache["List"];
//Changes to myobjects
...
HttpContext.Cache["List"] = myobjects; 
```

# iphone - 在ios中将日历添加到文本字段单击

> ID：12857904
> 
> 赞同：4
> 
> 时间：2012-10-12T11:18:02.337
> 
> 标签：iphone, ios, xcode

我对 iOS 开发非常陌生。我需要`UITextField`点击一下添加日历。如何添加自定义日历，因为**我不想**添加`UIDatePicker`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:32:25.573

首先以多种方式实现日历。**但是大多数通过TapkuLibrary** [http://github.com/devinross/tapkulibrary](http://github.com/devinross/tapkulibrary)填充和轻松获取日历，然后在您的类文件中实现这个**TapkuLibrary 。**在为显示日历实现以下代码后

**头文件.h**

```
#import <UIKit/UIKit.h>
#import "Libraries/TapkuLibrary/TKCalendarMonthView.h"

@interface calendarViewController : UIViewController<TKCalendarMonthViewDelegate,TKCalendarMonthViewDataSource, UITextFieldDelegate> 
{
    TKCalendarMonthView *calendar;
    UITextField *txtField;
}
@property(nonatomic,retain)UITextField *txtField; 
```

@结尾

**实现文件.h**

// @synthesize.......

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
   [self doAddAction];   
    return YES;
}

-(void)doAddAction
{
    calendar=[[TKCalendarMonthView alloc] init];
    calendar.frame=CGRectMake(0,0,calendar.frame.size.width,calendar.frame.size.height);
    calendar.delegate=self;
    calendar.dataSource=self;
    [self.view addSubview:calendar];
}
#pragma mark -
#pragma mark TKCalendarMonthViewDelegate methods

- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d
{
    NSDateFormatter *objDateFormatter = [[NSDateFormatter alloc] init];
    [objDateFormatter setDateFormat:@"dd-MM-yyyy"];
   NSLog(@"%@",[objDateFormatter stringFromDate:d]);

}

- (void)calendarMonthView:(TKCalendarMonthView *)monthView monthDidChange:(NSDate *)d {
    NSLog(@"calendarMonthView monthDidChange");
}

#pragma mark -
#pragma mark TKCalendarMonthViewDataSource methods

- (NSArray*)calendarMonthView:(TKCalendarMonthView *)monthView marksFromDate:(NSDate *)startDate toDate:(NSDate *)lastDate {
    NSLog(@"calendarMonthView marksFromDate toDate");
    NSLog(@"Make sure to update 'data' variable to pull from CoreData, website, User Defaults, or some other source.");
    // When testing initially you will have to update the dates in this array so they are visible at the
    // time frame you are testing the code.
    NSArray *data = [NSArray arrayWithObjects:
                     @"2011-01-01 00:00:00 +0000", @"2011-01-09 00:00:00 +0000", @"2011-01-22 00:00:00 +0000",
                     @"2011-01-10 00:00:00 +0000", @"2011-01-11 00:00:00 +0000", @"2011-01-12 00:00:00 +0000",
                     @"2011-01-15 00:00:00 +0000", @"2011-01-28 00:00:00 +0000", @"2011-01-04 00:00:00 +0000",
                     @"2011-01-16 00:00:00 +0000", @"2011-01-18 00:00:00 +0000", @"2011-01-19 00:00:00 +0000",
                     @"2011-01-23 00:00:00 +0000", @"2011-01-24 00:00:00 +0000", @"2011-01-25 00:00:00 +0000",
                     @"2011-02-01 00:00:00 +0000", @"2011-03-01 00:00:00 +0000", @"2011-04-01 00:00:00 +0000",
                     @"2011-05-01 00:00:00 +0000", @"2011-06-01 00:00:00 +0000", @"2011-07-01 00:00:00 +0000",
                     @"2011-08-01 00:00:00 +0000", @"2011-09-01 00:00:00 +0000", @"2011-10-01 00:00:00 +0000",
                     @"2011-11-01 00:00:00 +0000", @"2011-12-01 00:00:00 +0000", nil];

    // Initialise empty marks array, this will be populated with TRUE/FALSE in order for each day a marker should be placed on.
    NSMutableArray *marks = [NSMutableArray array];

    // Initialise calendar to current type and set the timezone to never have daylight saving
    NSCalendar *cal = [NSCalendar currentCalendar];
    [cal setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

    // Construct DateComponents based on startDate so the iterating date can be created.
    // Its massively important to do this assigning via the NSCalendar and NSDateComponents because of daylight saving has been removed
    // with the timezone that was set above. If you just used "startDate" directly (ie, NSDate *date = startDate;) as the first
    // iterating date then times would go up and down based on daylight savings.
    NSDateComponents *comp = [cal components:(NSMonthCalendarUnit | NSMinuteCalendarUnit | NSYearCalendarUnit |
                                              NSDayCalendarUnit | NSWeekdayCalendarUnit | NSHourCalendarUnit | NSSecondCalendarUnit)
                                    fromDate:startDate];
    NSDate *d = [cal dateFromComponents:comp];

    // Init offset components to increment days in the loop by one each time
    NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
    [offsetComponents setDay:1];

    // for each date between start date and end date check if they exist in the data array
    while (YES) {
        // Is the date beyond the last date? If so, exit the loop.
        // NSOrderedDescending = the left value is greater than the right
        if ([d compare:lastDate] == NSOrderedDescending) {
            break;
        }

        // If the date is in the data array, add it to the marks array, else don't
        if ([data containsObject:[d description]]) {
            [marks addObject:[NSNumber numberWithBool:YES]];
        } else {
            [marks addObject:[NSNumber numberWithBool:NO]];
        }

        // Increment day using offset components (ie, 1 day in this instance)
        d = [cal dateByAddingComponents:offsetComponents toDate:d options:0];
    }

    [offsetComponents release];

    return [NSArray arrayWithArray:marks];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:23:18.823

没有内置的日历视图控制器有点令人震惊，但实际上没有。我真的希望他们在 iOS4 中使用 EventKit 添加一个，但没有。Kal 有点难以理解，但是一旦你理解了它的想法，它就很容易实现。

[http://github.com/klazuka/Kal](http://github.com/klazuka/Kal)

在此链接上查看日历的整个库...

[http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=日历](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=Calendar)

并且还看到这个tapku库它也是非常有用的库..

[http://maniacdev.com/2011/09/tutorial-using-the-tapku-library-to-create-an-elegant-marked-calendar/](http://maniacdev.com/2011/09/tutorial-using-the-tapku-library-to-create-an-elegant-marked-calendar/)

你也可以触发事件`textFieldDidBeginEditing:`

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:22:01.540

我想你想添加一个日历，但不是通过日期选择器，对吗？？所以这里有一些链接......请检查它们，我认为它们会解决您的问题。

[http://www.cocoacontrols.com/platforms/ios/controls/occalendar](http://www.cocoacontrols.com/platforms/ios/controls/occalendar)

[http://www.cocoacontrols.com/platforms/ios/controls/pmcalendar](http://www.cocoacontrols.com/platforms/ios/controls/pmcalendar)

[http://www.cocoacontrols.com/platforms/ios/controls/ckcalendar](http://www.cocoacontrols.com/platforms/ios/controls/ckcalendar)

它们包括各种类型的定制日历..任何问题请告诉我:)

# arrays - 将 C++ 代码转换为 Mips

> ID：12857905
> 
> 赞同：0
> 
> 时间：2012-10-12T11:18:03.173
> 
> 标签：arrays, assembly, mips, pcspim

我正在用 Mips 汇编语言转换一个 C++ 项目。在 c++ 中，您可以初始化一个数组，如

```
int array[5]={1,2,3,4,5}; 
```

如何在 MIPS 汇编语言中初始化字符数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:49:10.113

在 MIPS 汇编中，您将指示汇编器为数组静态分配足够的内存，并使用指令`.data`和`.word`. 例如：

```
.data
arrayOfInts:
.word 1, 2, 3, 4, 5
arrayOfChars
.word 'a', 'b', 'c' 
```

这适用于编译时定义的变量。如果您的意图是动态分配数组，您必须自己做。

# bash - 调试我的 cron 应用程序

> ID：12857907
> 
> 赞同：1
> 
> 时间：2012-10-12T11:18:11.440
> 
> 标签：bash, shell, ubuntu, amazon-s3, s3cmd

我有这样的代码：

```
set -e
set -x
folderName=$(echo `date +%Y/%m/%d/`);
fileName=x.x.x.x.x.x.x.log 
cp x.x.x.x.x.x/$1 $fileName  
gzip $fileName  
s3cmd put $fileName.gz s3://x.x.x.x.x/$folderName    
rm $fileName.gz 
```

如果我这样运行，这工作正常：

```
./shell logfilelocation 
```

当我像这样添加到 crontab 中时：

```
* * * * * /home/x.x.x/testing/s3 -f x.x.x.log >> /tmp/mys3Log 
```

我等了！文件`mys3Log`被创建。但是里面没有内容！我希望命令执行的结果（正如我`set -e ; set -x`在代码中使用的那样）应该进入`mys3Log`文件，因为我在那里进行重定向。

但是出了点问题。我对 bash 编程和 cron 非常陌生。

我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:26:34.457

`cron`没有像交互式 shell 一样的环境，所以在脚本的开头，在 shebang 之后，添加：

```
source ~/.bashrc || source /etc/profile 
```

并删除`set -e`以查看发生了什么。

在您的`crontab`, 中记录错误和输出 ( `STDERR`, `STDOUT`)，您需要执行以下操作：

```
* * * * * /home/x.x.x/testing/s3 -f x.x.x.log >> /tmp/mys3Log 2>&1 
```

此外，在脚本的第 4 行，您使用的`$name`是从未声明过的变量。

最后但同样重要的是，就像 Janauary 说的，`#!/bin/bash`在第一行添加 shegang 并确保您的脚本具有可执行权限。：`chmod +x script.sh`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T21:27:28.687

如上一个答案中所述，cron 在与您的 shell 不同的环境中工作。这意味着环境变量在 shell 中会有所不同。例如：

在外壳中：

```
$ echo $PATH
/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/aws/bin 
```

而如果您在 cron 中运行以下命令：

```
* * * * * echo $PATH > path.out 
```

你会得到`/usr/bin:/bin`。

使用该命令找出您的 s3cmd 可执行文件在哪里`which s3cmd`，然后相应地修改 cron。例如：

```
$ which s3cmd
/usr/local/bin/s3cmd 
```

然后，cron 应该如下所示：

```
PATH=/usr/bin:/bin:/usr/local/bin
* * * * * echo $PATH > path.out 
```

# java - Spring Ws 客户端中的基本身份验证

> ID：12857908
> 
> 赞同：3
> 
> 时间：2012-10-12T11:18:11.880
> 
> 标签：java, spring, webservices-client

谁能指导我在使用 Spring WS 时如何添加基本 Http 身份验证，即用于编写 Web 服务客户端的 WebserviceTemplate 类？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T13:09:02.533

您需要将 messageSender 设置为使用 Commons HTTP。见这里[http://static.springsource.org/spring-ws/site/reference/html/client.html](http://static.springsource.org/spring-ws/site/reference/html/client.html)

```
<bean id="webServiceTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
    <constructor-arg ref="messageFactory"/>
    <property name="messageSender">
        <bean class="org.springframework.ws.transport.http.CommonsHttpMessageSender">
            <property name="credentials">
                <bean class="org.apache.commons.httpclient.UsernamePasswordCredentials">
                    <constructor-arg value="john"/>
                    <constructor-arg value="secret"/>
                </bean>
            </property>
        </bean>
    </property>
    <property name="defaultUri" value="http://example.com/WebService"/>
</bean> 
```

# android - Android不会滚动txt文件

> ID：12857909
> 
> 赞同：0
> 
> 时间：2012-10-12T11:18:12.923
> 
> 标签：android, scroll, android-xml

我有一个 helpdoc.txt 文件存储在 Eclipse 中的 res/raw 中。它使用以下代码显示在我的应用程序中：

```
public class HelpPage extends Activity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.help);
    //read in
    InputStream iFile = getResources().openRawResource(R.raw.helpdoc);
        try {
            TextView helpText = (TextView) findViewById(R.id.TextView_HelpText);
            String strFile = inputStreamToString(iFile);
            helpText.setText(strFile);
        } catch (Exception e) {
            //nothing here
        }
}//end onCreate

    /**
         * Converts an input stream to a string
            */
        public String inputStreamToString(InputStream is) throws IOException {
            StringBuffer sBuffer = new StringBuffer();
            DataInputStream dataIO = new DataInputStream(is);
            String strLine = null;
            while ((strLine = dataIO.readLine()) != null) {
                sBuffer.append(strLine + "\n");
            }//end while
                dataIO.close();
                is.close();
                return sBuffer.toString();
        }//end method 
```

它正确加载，但并不完全适合屏幕，当我尝试滚动时，我无法阅读其余文本。

这是完整的相关 XML 布局文件：http: [//pastebin.com/PtskJbqt](http://pastebin.com/PtskJbqt)

谁能建议我如何向下滚动以确保用户可以阅读整个文件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:23:20.817

放： `helpText.setMovementMethod(new ScrollingMovementMethod());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:28:55.580

像这样，

```
<ScrollView android:layout_width="fill_parent"
       android:layout_height="fill_parent">

<TextView
       android:id="@+id/TextView_HelpText"
           android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:autoLink="all"
       android:isScrollContainer="true"
       android:textStyle="italic"
       android:drawablePadding="5px"
       android:textColorLink="@color/logo_color"
       android:linksClickable="true"
       android:fadingEdgeLength="25px"
       android:fadingEdge="vertical"
       android:scrollbars="vertical"
       android:padding="@dimen/help_text_padding"
       android:textSize="@dimen/help_text_size"
       android:scrollbarStyle="outsideOverlay"
       android:bufferType="spannable"
        android:textColor="#000000"></TextView>

</ScrollView> 
```

也不推荐使用“px”。使用“dip”代替 fadingLength 和 padding。

# webgl - Three.js 无法加载纹理

> ID：12857910
> 
> 赞同：2
> 
> 时间：2012-10-12T11:18:17.937
> 
> 标签：webgl, three.js, augmented-reality

我有一个带有增强现实的 Three.js 项目，现在我尝试加载一个带有纹理的模型。出于某种原因，我的模型是黑色的，我没有纹理。我选中了搅拌机中的框以导出图像，我还在 t-rex（我正在使用的模型）的 .js 文件中看到它列出了纹理，但我的应用程序不会加载它。

**编辑（添加代码）** 我用来加载模型的代码：

```
new THREE.JSONLoader().load("models/trex.json", function(geometry) {
                var material = new THREE.MeshFaceMaterial();

                var dino = new THREE.Mesh(geometry, material);

                dino.position.z = -50;
                dino.scale.x = dino.scale.y = dino.scale.z = 2;
                dino.updateMatrix();
                dino.overdraw = true;
                marker.object3d.add(dino);
            }); 
```

我将它添加到标记对象，因为我正在使用标记，如果我显示标记，我希望在标记上（或正上方）绘制一个 trex。

trex 模型和这个一样，但是我在 blender 中打开它并使用最新版本的 blender 到 three.js 导出器：[http ://alteredqualia.com/three/examples/webgl_trex.html](http://alteredqualia.com/three/examples/webgl_trex.html)

我的 trex.json 文件也如下所示：

```
{

    "metadata" :
    {
        "formatVersion" : 3.1,
        "generatedBy"   : "Blender 2.63 Exporter",
        "vertices"      : 23273,
        "faces"         : 23268,
        "normals"       : 20842,
        "colors"        : 0,
        "uvs"           : [11497],
        "materials"     : 1,
        "morphTargets"  : 0,
        "bones"         : 0
    },

    "scale" : 0.0500,

    "materials": [  {
    "DbgColor" : 15658734,
    "DbgIndex" : 0,
    "DbgName" : "Material.001",
    "blending" : "NormalBlending",
    "colorAmbient" : [0.2933282256126404, 0.2933282256126404, 0.2933282256126404],
    "colorDiffuse" : [0.2933282256126404, 0.2933282256126404, 0.2933282256126404],
    "colorSpecular" : [0.13438941538333893, 0.13438941538333893, 0.13438941538333893],
    "depthTest" : true,
    "depthWrite" : true,
    "mapDiffuse" : "trex_image_copy.png",
    "mapNormal" : "trex_image_bump.png",
    "mapNormalFactor" : 12.0,
    "mapSpecular" : "trex_image_spec.png",
    "shading" : "Phong",
    "specularCoef" : 511,
    "transparency" : 1.0,
    "transparent" : false,
    "vertexColors" : false
    },

    {
    "DbgColor" : 15597568,
    "DbgIndex" : 1,
    "DbgName" : "Material",
    "blending" : "NormalBlending",
    "colorAmbient" : [0.7257574200630188, 0.7257574200630188, 0.7257574200630188],
    "colorDiffuse" : [0.7257574200630188, 0.7257574200630188, 0.7257574200630188],
    "colorSpecular" : [0.0, 0.0, 0.0],
    "depthTest" : true,
    "depthWrite" : true,
    "mapDiffuse" : "trex_image_copy.png",
    "mapLight" : "trex_image_eye.png",
    "mapLightWrap" : ["repeat", "repeat"],
    "shading" : "Lambert",
    "specularCoef" : 1,
    "transparency" : 1.0,
    "transparent" : false,
    "vertexColors" : false
    },

    {
    "DbgColor" : 60928,
    "DbgIndex" : 2,
    "DbgName" : "Material",
    "blending" : "NormalBlending",
    "colorAmbient" : [0.7257574200630188, 0.7257574200630188, 0.7257574200630188],
    "colorDiffuse" : [0.7257574200630188, 0.7257574200630188, 0.7257574200630188],
    "colorSpecular" : [0.0, 0.0, 0.0],
    "depthTest" : true,
    "depthWrite" : true,
    "mapDiffuse" : "trex_image_copy.png",
    "mapLight" : "trex_image_eye.png",
    "mapLightWrap" : ["repeat", "repeat"],
    "shading" : "Lambert",
    "specularCoef" : 1,
    "transparency" : 1.0,
    "transparent" : false,
    "vertexColors" : false
    }],

    "vertices": 
```

我尝试绘制一个框，然后添加纹理，这可行，但从 json 格式加载文件，然后显示纹理不起作用。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T18:17:47.153

我认为您正在寻找的是从您的 json 加载纹理/材质。JSONLoader 实际上会为您处理。相应的材质作为 loader-callback 的第二个参数返回。这当然只有在 json 包含材料数据时才有效（在你的情况下它确实如此）。

```
new THREE.JSONLoader().load("models/trex.json", function(geometry, materials) {
     var material = new THREE.MeshFaceMaterial(materials);
     var dino = new THREE.Mesh(geometry, material);

     dino.position.z = -50;
     dino.scale.x = dino.scale.y = dino.scale.z = 2;
     dino.updateMatrix();
     dino.overdraw = true;
     marker.object3d.add(dino);
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:19:30.807

> **此解决方案仅适用于以下版本：r58 ~ r69**
> 请查看评论部分和[THREE.js 迁移页面](https://github.com/mrdoob/three.js/wiki/Migration)以获取更多信息

我没有像您尝试的那样导出纹理的好运。我会尝试只使用 JSON 导出器来导出您的几何图形和 uv 映射并自己处理加载纹理。除非有人有更优雅的解决方案供您使用。我已经能够加载我的纹理，然后在回调中创建一个材质并使用加载器从 JSON 中获取几何图形。然后在加载器的回调中，您使用之前创建的几何体和材质创建网格。这是一些示例代码：

```
var tex, mat, mesh;

$(window).load(function () {
    /** Load mesh from JSON, position, scale, add texture and add to scene */
    tex = THREE.ImageUtils.loadTexture('../img/texture.jpg', new THREE.UVMapping(), function () {
            mat = new THREE.MeshPhongMaterial({ map: tex });
            loader.load('model.js', function (geo) {
                mesh = new THREE.Mesh(geo, mat);
                mesh.position.set(0, 0, 0);
                mesh.scale.set(20, 20, 20);
                // etc, etc
                scene.add(mesh);
            });
        });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-03T18:39:31.853

您是否尝试过授予纹理文件权限？...此文件由搅拌机生成，因此您需要授予该文件权限。

# javascript - 您如何设置或覆盖下拉菜单的默认悬停颜色？

> ID：12857915
> 
> 赞同：0
> 
> 时间：2012-10-12T11:18:32.410
> 
> 标签：javascript, jquery, css, drop-down-menu

我知道，不知何故，你可以做到这一点。我只是不确定。我希望覆盖选择菜单（下拉菜单）的默认蓝色悬停，以便我可以在我的选项中添加一个 box-shadow: inset 0 0 3px 3px。

那么，JavaScript、JQuery、（最好是）CSS？

我对 JavaScrip 和 JQuery 了解不多……我还没有走那么远，但是对于这个问题的任何帮助将*不胜*感激。

谢谢！

[http://lrroberts0122.github.com/DWS/lab6/level-1/](http://lrroberts0122.github.com/DWS/lab6/level-1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:24:54.327

并非每个浏览器都允许这样做。事实上，如果您在 chrome 中查看您的网站，您会发现选择框本身甚至没有显示灰色背景。导致白色背景上的白色文本。如果您真的想自己设置下拉菜单的样式，我建议您使用 javascript/jquery 将 select/option 替换为 ul/li，您可以根据需要设置样式。

我将尝试找到一些示例来帮助您入门。等一下。

编辑：这应该让你开始：[http ://tutorialzine.com/2010/11/better-select-jquery-css3/](http://tutorialzine.com/2010/11/better-select-jquery-css3/)

编辑2：这是另一个：[http ://bnotions.com/form-select-replacement-using-jquery-css/](http://bnotions.com/form-select-replacement-using-jquery-css/)

这个人甚至创建了一个插件： http: [//forrst.com/posts/jQuery_plugin_ReplaceDropdown_to_replace_a_selec-NA2](http://forrst.com/posts/jQuery_plugin_ReplaceDropdown_to_replace_a_selec-NA2)

免责声明：我自己没有测试过上面的任何链接。因此，请自行决定使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:00:17.963

使用 jquery 的 unbind() 函数取消绑定悬停，然后尝试通过 .css() 再次绑定，您应该可以更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:34:36.763

我发现投递箱的属性在#103 到#114 行。请更全面地解释您的答案，如框本身或文本中，您不想在它后面做什么？

# asp.net - .Net 子域 cookie

> ID：12857917
> 
> 赞同：0
> 
> 时间：2012-10-12T11:18:43.577
> 
> 标签：asp.net, .net, cookies

我正在尝试在两个子域上登录用户。

考虑这些子域：

forum.mydomain.com、account_a.mydomain.com、account_b.mydomain.com。

用户登录到 account_a.mydomain.com。在我的身份验证功能中，我想为 forum.mydomain.com 创建一个身份验证 cookie。（但不是（！）对于 account_b.mydomain.com）

我尝试创建一个 cookie 并将 .domain 属性设置为 forum.mydomain.com 但不知何故没有创建 cookie。将 .domain 属性设置为 .mydomain.com 不是我想要的，因为它会产生安全问题，因为 account_a 和 account_b 是两个完全不同的用户。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:38:24.657

您无法仅通过 cookie 设置来解决此问题，域​​属性的目的是防止这种情况发生。

如果 forum.mydomain.com 和 account_a.mydomain.com 绝对需要使用相同的身份验证 cookie，您需要将其设置为 .mydomain.com 并有一些逻辑确保它在 account_b.mydomain.com 中无效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:29:20.690

唯一可以创建特定域 cookie 的是在您正在创建的域上解析的机器。如果您想创建一个名为的 cookie，`account_a.mydomain.com`则必须从该特定域访问您的服务器的 url。鉴于此，不可能`account_a.mydomain.com`创建特定于的 cookie，`forum.mydomain.com`因为它们是完全独立的地址。任何创建此类 cookie 的尝试实际上都会为`account_a.forum.mydomain.com`.

至于如何让它工作，你还没有真正说明为什么你首先要以这种方式修改 cookie，所以这很难说。每个浏览器只能为用户拥有一个有效的身份验证 cookie，并且这些 cookie 对浏览器的所有实例都是通用的，因此实际上不可能让 account_a 的 cookie 验证 account_b，而这两个 cookie 不能无论如何都住在同一台机器上。域级身份验证的目的之一是防止这种同时多重性。

**编辑：（** *回复评论）*

在您希望用户能够穿越到多个域服务器的场景中，您不需要接触 cookie 本身。它会自动将自己绑定到`mydomain.com`域并允许这样的遍历。尝试在全局对象上应用单独的系统级安全机制只是有点倒退。打个比方，你不会用带刺铁丝网围住你房子周围的栅栏，以防止有人进入你的地下室。需要在该服务器级别应用防止`account_a`访问域的身份验证控制。`account_b`我的猜测是，您有某种形式的通用代码，其中域针对身份验证进行了合理化，因此您真正需要做的是处理实际授权。

一种方法是将一些自定义代码添加到 Page 基类的 Init 或 Load 事件中。`BeginRequest`此外，您可以在 global.asax 中为事件添加一段逻辑。我见过使用的一种技术（尽管我自己从未使用过）是添加到 global.asax 中的 AuthorizeRequest 事件。我找不到任何描述该主题的文档，但我确实找到了一个显示它是如何完成的示例的文档。[https://nport.svn.codeplex.com/svn/jacky/ccs/CCWeb/Global.asax.cs](https://nport.svn.codeplex.com/svn/jacky/ccs/CCWeb/Global.asax.cs)

# azure - 创建性能计数器时 Azure 模拟器出错

> ID：12857918
> 
> 赞同：3
> 
> 时间：2012-10-12T11:18:43.563
> 
> 标签：azure, azure-compute-emulator

我正在尝试测量我的 Azure 项目上的处理器负载，并且在运行模拟器时，我在模拟器控制台中遇到如下错误：

```
[MonAgentHost] Error: MA EVENT: 2012-10-10T12:15:06.982Z
[MonAgentHost] Error:    2
[MonAgentHost] Error:    9028
[MonAgentHost] Error:    8168
[MonAgentHost] Error:    SysCounterListener.dll
[MonAgentHost] Error:    0
[MonAgentHost] Error:    b9eb57e3-62d5-49a5-b395-abc3bd5
[MonAgentHost] Error:    liscounter.cpp
[MonAgentHost] Error:    SystemCounter::AddCounter
[MonAgentHost] Error:    660
[MonAgentHost] Error:    ffffffffc0000bb9
[MonAgentHost] Error:    0
[MonAgentHost] Error:    
[MonAgentHost] Error:    PdhAddCounter(\Processor(_Total)\% Processor Time) failed 
```

我尝试创建一个新的简单控制台项目（不是 Azure）。在这里，我能够阅读性能指标，因此这个建议[http://www.infosysblogs.com/microsoft/2011/06/mystery_of_the_windows_azure_d.html](http://www.infosysblogs.com/microsoft/2011/06/mystery_of_the_windows_azure_d.html)似乎不是解决方案。

我在 RoleEntryPoint 的 OnStart 中设置了性能计数器，如下所示：

```
public class WebRole : RoleEntryPoint
{
    public override bool OnStart()
    {
        try
        {
            DiagnosticMonitorConfiguration config = DiagnosticMonitor.GetDefaultInitialConfiguration();

            var counters = new List<string>
                    {
                        @"\Processor(_Total)\% Processor Time"
                    };

            if (counters.Count() > 0)
            {
                config.PerformanceCounters.ScheduledTransferPeriod = TimeSpan.FromMinutes(5);
                config.PerformanceCounters.BufferQuotaInMB = 10;

                counters.ForEach(counter =>
                    config.PerformanceCounters.DataSources.Add(
                        new PerformanceCounterConfiguration()
                        {
                            CounterSpecifier = counter,
                            SampleRate = TimeSpan.FromSeconds(10)
                        })
                );
            }

            DiagnosticMonitor.Start(
                    "Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString",
                    config);

        }
        catch (Exception e)
        {
            Trace.TraceError("Exception during WebRole1.OnStart: " + e.ToString());
        }

        return base.OnStart();
    }
} 
```

我已经尝试设置 IIS 日志记录，它工作得很好。追踪也是如此。只是不是性能计数器...

我在安装了 Visual Studio 2010 SP1 和 Azure SDK 1.7 的 Windows 7 Home Premium 上（它不适用于 SDK 1.3 八）。

有人知道我在安装中缺少什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:11:04.160

您是否偶然使用了非英语版本的 Windows？如果是这样，我有坏消息要告诉你。

显然，性能计数器在注册表中进行了本地化，但 Azure 诊断尝试使用它们的英文名称注册它们（请参阅 参考资料`PdhAddCounter(\Processor(_Total)\% Processor Time) failed`）。

我遇到了同样的问题，并在 Azure 论坛（[此处](http://social.msdn.microsoft.com/Forums/en-US/windowsazuretroubleshooting/thread/57c24738-53bd-40da-9819-bb217d0baa72/#16ec43b6-27b3-4f13-921b-01997279d9e4)）上提出了一个问题，但没有提供解决方案或解决方法。我想云中的所有服务器都运行英文版的 Windows，所以这不是问题，但你不能在本地测试。

如果这适用于您，我能提供的唯一解决方案是安装英文版的 Windows。

# javascript - Ext.ComponentLoader 在组件内延迟加载 html+js

> ID：12857923
> 
> 赞同：1
> 
> 时间：2012-10-12T11:19:11.333
> 
> 标签：javascript, model-view-controller, extjs, extjs4

我有四个文件：

```
layout.html //contains ext resources
layout.js //contains my panel
partial.html //contains <script src="partial.js">
partial.js //contains a component 
```

我在 layout.js 中配置了这个面板：

```
var myPanel = Ext.widget('panel',{
    title: 'Load HTML into panel',
    html: 'initial',
    width: 300,
    height: 300,
    loader: {
        url: 'partial.html',
        renderer: 'html',
        scripts: true,
        autoLoad: true
    },
    renderTo: Ext.getBody()
}); 
```

我的 partial.js 中的这段代码

```
Ext.onReady(function(){

    var myDynPanel = Ext.widget('panel',{
        title: 'Is this working',
        html: 'Dynamic test',
        //renderTo: 'myDynPnl'
    });

}); 
```

我想在myPanel*中渲染**myDynPanel*。我知道加载器上的配置可以设置为组件，但我正在使用 C#.NET MVC，并且我将部分视图结果作为 HTML。*`renderer`*

 *我现在的解决方案是创建一个`<div id="myDynPnl"></div>`内部 partial.html 并将动态面板呈现给 div。但我不想在我的页面中使用 id 。

实现这一目标的最佳方法是什么。提前致谢。

使用：ExtJS 4.1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:01:01.347

一个月后，我们创建了一个解决方案:)。

有一个问题？问它！

## PartialViewLoader.js

```
Ext.define('PartialViewLoader', {
    mixins: {
        observable: 'Ext.util.Observable'
    },
    constructor: function(config) {
        this.mixins.observable.constructor.call(this, config);
        this.addEvents(
            'loaded'
        );
    },
    load: function(config) {
        var component;

        if (this.url == undefined) {
            component = this.loadFunction(config);
            this.fireEvent('loaded', component);
        }
        else {
            Ext.Loader.loadScript({
                url: this.url,
                onLoad: function() {
                    component = this.loadFunction(config);
                    this.fireEvent('loaded', component);
                },
                //onError: function(r) {},
                scope: this
            });
        }
    }
}); 
```

## 索引.js

```
Ext.define('MyView', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.myview',
}); 
```

## 索引.cshtml

```
@model MyNameSpace.MyModel
Ext.create('PartialViewLoader', {
    url: '~/Scripts/Index.js',
    loadFunction: function(config){
        return Ext.create('MyView', Ext.apply(config, {}));
    }
}) 
```

## JS文件

```
Ext.Ajax.request({
    scope: this,
    method: 'POST',
    url: '~/Views/Index', //controller action that returns a partial view (Index.cshtml)
    //params: {},
    success: function (response) {
        var loader = Ext.decode(response.responseText);

        loader.on('loaded', function (cmp) {
            //this.add(cmp); //Custom logic
        });
        loader.load();
    }
}); 
```*

# python - 如何将数据值转换为 matplotlib 的颜色信息？

> ID：12857925
> 
> 赞同：15
> 
> 时间：2012-10-12T11:19:22.323
> 
> 标签：python, colors, numpy, matplotlib, scipy

我正在使用 matplotlib.patches.Polygon 类在地图上绘制多边形。实际上，给出了关于多边形角点坐标的信息以及每个“多边形”的浮点数据值。现在我想将这些数据值（范围从 0 到 3e15）转换为颜色信息以很好地可视化它。在 Python 中这样做的最佳实践是什么？

我的代码片段：

```
poly = Polygon( xy, facecolor=data, edgecolor='none')
plt.gca().add_patch(poly) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-12T11:47:13.930

在 RGB 颜色系统中，红色、绿色和蓝色每种颜色使用两位数据。这意味着每种颜色的范围从 0 到 255。黑色是 00,00,00，而白色是 255,255,255。Matplotlib 有很多预定义的颜色图供您使用。它们都被归一化为 255，因此它们从 0 到 1 运行。因此您只需对数据进行归一化，然后您可以手动从颜色图中选择颜色，如下所示：

```
>>> import matplotlib.pyplot as plt

>>> Blues = plt.get_cmap('Blues')
>>> print Blues(0)
(0.9686274528503418, 0.9843137264251709, 1.0, 1.0)
>>> print Blues(0.5)
(0.41708574119736169, 0.68063054575639614, 0.83823145908467911, 1.0)
>>> print Blues(1.0)
(0.96555171293370867, 0.9823452528785257, 0.9990157632266774, 1.0) 
```

这是所有[预定义的颜色图。](http://wiki.scipy.org/Cookbook/Matplotlib/Show_colormaps)如果您对创建自己的颜色图感兴趣，[这里](http://matplotlib.org/examples/pylab_examples/custom_cmap.html)是一个很好的例子。另外[这里](http://www.research.ibm.com/people/l/lloydt/color/color.HTM)是 IBM 的一篇关于仔细选择颜色的论文，如果您使用颜色来可视化数据，您应该考虑这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-05T00:57:42.640

将一个从 0 到 + 无穷大的值转换为从 0.0 到 1.0 的值

```
import matplotlib.pyplot as plt

price_change =  price_change ** 2 / (1 + price_change ** 2)
Blues = plt.get_cmap('Blues')
print Blues(price_change) 
```

颜色图的完整列表在这里： http: [//matplotlib.org/users/colormaps.html](http://matplotlib.org/users/colormaps.html)

# java - 从 Graphics2D 创建 EpsGraphics2D

> ID：12857929
> 
> 赞同：1
> 
> 时间：2012-10-12T11:19:28.367
> 
> 标签：java, image, swing, graphics2d

我正在使用[http://sourceforge.net/projects/jlibeps/](http://sourceforge.net/projects/jlibeps/)库。

我有一个已经绘制到的现有 Graphics2D 对象，然后想从 Graphics2D 对象创建一个新的 EpsGraphics2D 对象。

这是可能的，或者关于如何实现这一点的任何建议？

jlibeps 作者提供了这个例子，但我不明白这`paint(g)`条线是如何做到这一点的：

```
//If you want to paint a Graphics2D in an EPS file, you can do that:
FileOutputStream finalImage = new FileOutputStream(file);
EpsGraphics2D g = new EpsGraphics2D("Title", finalImage, 0, 0, 500, 500);
paint(g);
g.flush();
g.close();
finalImage.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:30:47.663

拥有一个`Graphics2D`对象通常对您没有帮助，因为它允许您*绘制*到某种介质，但不能*读取*当前渲染到该介质的内容，更不用说用于绘制当前内容的指令了。

相反，您必须将`EpsGraphics2D`对象馈送到管道中，就像将`Graphics2D`对象用于屏幕渲染一样。通常你想绘制某个组件的内容。这可以通过调用它的[`paint`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#paint%28java.awt.Graphics%29)方法来完成。因此，通过使用您构造的 eps 图形对象调用该`paint`方法，您可以使所有绘画指令转到 eps 文件。这就是`paint(g)`手册中的行所指的内容。

换种说法：你不需要一个现有的`Graphics2D`对象，你可以神奇地变成一个`EpsGraphics2D`对象。相反，您需要一个方法调用链来对`Graphics2D`对象做一些有用的事情，即向它呈现一些内容。`EpsGraphics2D`然后，您可以通过将对象（这只是对象的一种特殊情况`Graphics2D`，因此也是`Graphics`对象的一种特殊情况）传递给该代码的最外层调用来重新使用该代码来生成一个 eps 文件。

# php - 有没有更好的方法可以使用 Sphinx/MySQL 同时从两个表中获取数据？

> ID：12857931
> 
> 赞同：1
> 
> 时间：2012-10-12T11:19:39.383
> 
> 标签：php, mysql, sphinx

在问这个问题之前，重要的是要了解我实际上在做什么。

与我正在实施的功能的最佳比较是 Facebook 的搜索功能。当您开始键入时，会出现一个带有各种搜索结果的下拉列表。在顶部，您会找到名字与您的搜索匹配的朋友，然后是匹配的其他人，然后是页面、事件等。

我的情况类似，但我只想搜索两件事。用户和文档（在下面的代码中命名为涟漪）。

我有这个工作正常。在我讨论此功能的逻辑时，请多多包涵：

1.  用户关注搜索输入。
2.  Ajax 请求检索登录的用户朋友/关注者/关注者并在客户端缓存它们（这只发生在用户第一次关注搜索输入时）
3.  当用户键入时，高度优化的函数对用户名数组执行正则表达式，并构建一个包含头像等的自动完成列表......
4.  **同时，每次按键都会向下面的脚本触发一个 ajax 请求，该脚本执行以下操作**：

    *   对两个单独的索引执行两个单独的**Sphinx搜索。**一个收集用户 ID，另一个收集文档 ID（rippleid）
    *   用户查询的结果通过检查在 ajax 请求中发送的用户 ID 数组进行循环，以避免重复在初始高速朋友/关注者检查期间已经显示的用户。
    *   接下来我们查询实际数据库以获取剩余用户 ID 的用户数据
    *   然后重复相同的过程，但这次是针对文档（涟漪）

最后，任何返回的结果都会附加到自动完成列表中。

这是执行 sphinx 查找并从数据库中获取数据的 PHP 函数示例。

```
         公共功能搜索（）
                {
                                $this->disableLayout();
                                $request = 新请求（）；
                                $params = $request->getParams(GET);

 `//Perform sphinx textsearch
                            include('/usr/local/lib/php/sphinxapi.php');
                            $sphinx = new \SphinxClient();
                            $sphinx->setMatchMode(SPH_MATCH_ANY);
                            $sphinx->SetLimits(0, 4);
                            $mysqlconn = mysql_connect("127.0.0.1:9306") or die ("Couldn't connect to MySQL.");
                            $users = $sphinx->Query($params['data']['q'], "users");
                            $ripples = $sphinx->Query($params['data']['q'], "ripples");

        /*
         *USERS
         */

            //Loop through users and only collect ID's that are not already present    
            if (!empty($users["matches"])) { 
                $ids = "";
                foreach($users['matches'] as $id => $data) {
                    if($ids > ""){
                        $ids .= ",";
                    }
                    if(!isset($params['data']['e'][$id])){
                        $ids .= $id;
                    }
                }

          //If there any any remaining ID's collect the data from the database and return as JSON
                        if(!empty($ids)){
                                $userdataquery = "select users.userid, users.firstname, users.lastname
                                                    from tellycards_user_data users   
                                                    where userid IN($ids)
                                                ";
                                $query = new Query($userdataquery);
                                $usersoutput = $query->fetchAll();                              
                        }
        }

        /*
         *RIPPLES
         */

        //Loop through ripples and collect ID's 
        if (!empty($ripples["matches"])) { 
            $rippleids = "";
            foreach($ripples['matches'] as $id => $data) {
                if($rippleids > ""){
                    $rippleids .= ",";
                }                       
                    $rippleids .= $id;
            }

        //If there any any remaining ID's collect the data from the database and return as JSON
                        if(!empty($rippleids)){
                                $rippledataquery = "select ripples.id, ripples.name, ripples.screenshot
                                                    from tellycards_ripples ripples   
                                                    where id IN($rippleids)
                                                ";
                                $query = new Query($rippledataquery);
                                $ripplesoutput = $query->fetchAll();                              
                        }
        }

        header('Content-type: text/json');
        echo json_encode(array(
                               'users'      => (!empty($usersoutput)) ? $usersoutput : null,
                               'ripples'    => (!empty($ripplesoutput)) ? $ripplesoutput : null
                        ));` 

}

您可能会问为什么我们要进行初始朋友查找，而不仅仅是对所有内容都使用 sphinx。那么通过实现上面的方法。由于客户端存储了好友数组，用户在打字时会得到即时反馈，尽管 sphinx 的速度非常快，但由于 http 请求，不可避免地会出现一些延迟。在实践中，它的效果非常好，顺便说一下，它似乎也是 facebook 使用的方法。

还有很多 javascript 代码防止不必要的查找，返回的数据被添加到缓存堆等，因此未来的搜索不需要点击 sphinx/db 等......

**现在终于到了我的实际问题....**

这个当前的服务器端功能让我很困扰。目前，Sphinx 执行了两次搜索，MySQL 执行了两次搜索。我怎么可能将所有这些整理成一个 sphinx 查询和一个 MySQL 查询？有什么办法吗？（请记住，文档和用户可能共享相同的 PK ID，因为它们位于 MySQL 中的两个完全不同的表上，并且（当前）分布在两个单独的索引中）。或者有什么方法可以组合两个 MySQL 查询，使它们比两个单独的选择更有效？

或者...由于查询的简单性，我最好将它们分开吗？（两者都是索引主键查询）

我想我要的是任何建议/建议。

非常欢迎任何评论。

            回答 #1

赞同：1

时间：2012-10-12T16:23:28.613

如果没有两个 MySQL 查询，您将无法真正摆脱困境。好吧，您可以使用 UNION 将它们组合成一个。或者通过创建一个新的组合“表”（视图或物化视图） - 但真的不认为它值得付出努力。两个查询非常好-正如您所说的那样，它们已编入索引。

您可以通过创建一个新的组合索引来使用一个 sphinx 索引（因此也可以使用一个搜索查询）。因为您说您的密钥不是唯一的，所以必须创建一个新的合成密钥。

例如...

```
sql_query = SELECT userid*2 AS id, 1 AS table_id, firstname AS one, lastname as two FROM tellycards_user_data \
              UNION \
            SELECT (id*2)+1 as id, 2 AS table_id, name AS one, screenshot AS two FROM tellycards_ripples
sql_attr_unit = table_id 
```

这给了你一个假的 key 和一个属性来识别结果来自哪个表。您可以使用它来获取它来自的原始表。（有许多其他方法可以做同样的事情）

这允许您运行一个查询，可以获得组合结果。

...但不相信这是一个好主意。因为如果结果不对称，您可能会错过结果。假设一个表有 20 个匹配结果，另一个表有 10 个。假设您显示前 10 个结果，现在由于限制，第二个表的结果很可能隐藏在第一个表下方（实际上是极端示例，希望它们混合在一起）。两个单独的查询，允许您保证从每个表中获取一些结果。

......所以毕竟。坚持你得到的。没关系。

            回答 #2

赞同：0

时间：2012-10-12T17:10:16.063

您可以在 Sphinx 中存储和检索有关用户和文档的所有数据，因此不需要 MySQL。

使用 Sphinx QL 而不是 API（更好更容易完成工作 -> [http://sphinxsearch.com/docs/current.html#sphinxql-reference](http://sphinxsearch.com/docs/current.html#sphinxql-reference)）

注意：不要忘记在 sphinx.conf 源中将要从中检索数据的所有文本字段设置为 sql_field_string

```

# c - 未使用 C 从 TCP 套接字正确接收数据

> ID：12857932
> 
> 赞同：3
> 
> 时间：2012-10-12T11:19:42.143
> 
> 标签：c, linux, sockets, tcp

我正在使用 Ubuntu 12.04 32 位版本我编写了一个程序来从 TCP 客户端接收 XML 文件。同一个程序也通过 unix 域套接字从另一个进程接收数据。为此，我正在使用 poll() 系统调用。

我的问题是，有时我没有正确获取 XML 数据，或者有时它也丢失了。但是由于我使用的是 TCP，如果有数据丢失客户端会知道。但客户端没有显示任何错误。有人可以告诉我为什么会这样吗？

我可以提供一些代码：

```
int config_server_tcp（int 端口）
{   
    int sockfd = -1;
    结构 sockaddr_in my_addr; // 我的地址信息
    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1)
    {
        perror("socket() 失败。");
    }
    别的
    {
        my_addr.sin_family = AF_INET;
        my_addr.sin_port = htons(port);
        my_addr.sin_addr.s_addr = htonl(INADDR_ANY); //自动填写我的IP
        memset(&(my_addr.sin_zero), 0, 8); // 将结构的其余部分归零
        if (bind(sockfd, (struct sockaddr *)&my_addr, sizeof(struct sockaddr)) == -1)
        {
            perror("绑定() 失败。");
        }
        别的
        {
            if (听 (sockfd, 8) == -1)
            {
                perror("listen() 失败。");
            }
        }
    }
    返回 sockfd；
}

int send_to_tcp_server(unsigned char * message, int size, char * server_ip, int port)
{
    int sockfd;
    结构 sockaddr_in their_addr;
    整数字节 = -1；
    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1)
    {
        perror("socket() 失败。");
    }
    别的
    {
        他们的地址.sin_family = AF_INET;
        their_addr.sin_port = htons(port);
        their_addr.sin_addr.s_addr=inet_addr(server_ip);
        memset(&(their_addr.sin_zero), '\0', 8); // 将结构的其余部分归零
        if (connect(sockfd, (struct sockaddr *)&their_addr, sizeof (their_addr)) == -1)
        {
            perror("connect() 失败。");
        }
        别的
        {
            if ((numbytes=send(sockfd , message, size, 0)) == -1)
            {
                printf ("发送失败。\n");
            }
        }
        关闭（sockfd）；
    }
    返回字节数；
}

void process_tcp (int sock)
{
    结构 sockaddr_in their_addr; // 说话者的地址信息
    int 收到；
    socklen_t addr_len；
    字符缓冲区[BUFF_SIZE];

    addr_len = sizeof (their_addr);
    int clientfd = 接受 (sock, (struct sockaddr *)&their_addr, &addr_len);
    如果 (clientfd == -1)
    {
        perror("accept() 失败。");
    }       
    别的
    {
        做
        {
            收到 = recv(clientfd, 缓冲区, BUFF_SIZE, 0);
            如果（收到 == -1）
            {
                perror("recv() 失败。");
                休息;
            }
            别的
            {
                //做一点事
            }
        }
        而（收到！= 0）；
        关闭（clientfd）；
    }
}

```

循环调用进程TCP函数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T11:39:30.853

几乎可以肯定，错误出现在您未显示的代码中，该代码根据您的 XML-over-TCP 协议组装应用程序级消息。这是一种方法：

```
void process_tcp (int sock)
{
    struct sockaddr_in their_addr;
    int received, total_received;
    socklen_t addr_len;
    char buffer[BUFF_SIZE];

    addr_len = sizeof (their_addr);
    int clientfd = accept (sock, (struct sockaddr *)&their_addr, &addr_len);
    if (clientfd == -1)
    {
        perror("accept() failed.");
    }       
    else
    {
        total_received = 0;
        do
        {
            received = recv(clientfd, buffer + total_received,
                            BUFF_SIZE - total_received, 0);
            if (received == -1) 
            {
                perror("recv() failed.");
                break;
            }
            if (received > 0)
                total_received += received;
        }
        while (received != 0);
        buffer[total_received] = 0;
        // here we can do something with 'buffer'              
        close (clientfd);
    }
} 
```

请注意，缺少许多错误检查。

# entity-framework - 我可以为现有模型创建初始迁移吗

> ID：12857937
> 
> 赞同：1
> 
> 时间：2012-10-12T11:19:55.780
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我正在使用 Code-First 迁移。现在我希望我的应用程序在发布到新服务器时为模型创建数据库和所有表。

我不想使用自动迁移，因为我想跟踪数据库版本控制。但是当我将我的应用程序部署到新服务器时，我不希望它执行所有步骤以进入当前模型（例如，添加在以后的修订中被删除的表/列）。

我想知道是否有一种方法可以创建一个包含整个（POCO）数据模型的迁移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:46:34.687

当您更改连接字符串以针对您的新数据库时，EF 会比较您的模型，并将其与数据库中存在的模型进行迁移。如果什么都不存在（新数据库），它将创建一个与您所拥有的数据库相匹配的数据库，方法是为您执行每个迁移。如果你想在实现之前查看生成的 sql，运行：

```
update-database -verbose -script 
```

在包管理器控制台中查看生成的内容。

它看起来像：

*   创建表
*   插入迁移
*   历史行修改
*   表格插入
*   迁移历史行
*   ETC...

即使您有大量迁移，它也会将它们全部组合到一个脚本中并一次实现它们。

# ios - 当我按下按钮时，如何在 UIview 中画一条线？(iOS)

> ID：12857940
> 
> 赞同：0
> 
> 时间：2012-10-12T11:20:01.363
> 
> 标签：ios, xcode, drawing

我开始学习 Xcode，但我不明白如何在视图中画一条线，当我按下按钮时，我有这个代码

```
- (void)drawRect:(CGRect)rect
{        
 CGContextRef con = UIGraphicsGetCurrentContext();
 CGContextSetLineWidth(con, 5);
 CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
 CGFloat componen [] = {0.0, 0.0, 1.0, 1.0};
 CGColorRef color = CGColorCreate(space, componen);
 CGContextSetStrokeColorWithColor(con, color);
 CGContextMoveToPoint(con, 0, 0);
 CGContextAddLineToPoint(con, 100, 100);
 CGContextStrokePath(con);
 CGColorSpaceRelease(space);
 CGColorRelease(color);

} 
```

当我启动我的应用程序时，这段代码画了一条线，但是当我用我的参数（x1，x2，y1，y2）按下按钮时，我想启动这段代码。我创建了一个这样的函数

```
- (void)drawLine
{   
    CGContextRef con = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(con, 5);
    CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
    CGFloat componen [] = {0.0, 0.0, 1.0, 1.0};
    CGColorRef color = CGColorCreate(space, componen);
    CGContextSetStrokeColorWithColor(con, color);
    CGContextMoveToPoint(con, x1, y1);
    CGContextAddLineToPoint(con, x2, y2);
    CGContextStrokePath(con);
    CGColorSpaceRelease(space);
    CGColorRelease(color);

} 
```

但是画不出来

这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:33:31.630

我为 UIView 添加一行非常简单。

```
UILabel *line = [[UILabel alloc]init];
line.textColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:0.5];
line.frame = CGRectMake(0, 0, 320, 1);
[self.view addSubview:line]; 
```

然后你可以按下按钮来控制它的可见属性。

你的问题可以吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:38:05.557

- (void)drawRect:(CGRect)rect { }
系统调用的方法。在视图加载之前，它会被系统调用并绘制内容。

因此，如果您在视图加载后更改绘图内容，您必须要求系统调用 drawRect 方法。所以你必须调用相关视图的 setNeedsDisplay 方法。

[myView setNeedsDisplay];

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:48:52.373

定义你的`drawRect:`，以便它决定是否应该画一条线：

```
- (void)drawRect:(CGRect)rect {
    if (self.drawLine) {
        [self drawLineWithContext: UIGraphicsGetCurrentContext()];
        self.drawLine = NO;
    }
} 
```

当点击按钮时，让你的视图控制器设置你的视图参数并告诉系统刷新你的视图：

```
- (IBAction)doDrawing:(id)sender {
    self.drawView.drawLine = YES;
    self.drawView.x1 = 20.0;
    self.drawView.x2 = 200.0;
    self.drawView.y1 = 10.0;
    self.drawView.y2 = 350.0;
    [self.drawView setNeedsDisplay];
} 
```

# java - 适用于 Android 的通用图像加载器，带有 Fragment 中的 ImageView

> ID：12857944
> 
> 赞同：1
> 
> 时间：2012-10-12T11:20:26.597
> 
> 标签：java, android, universal-image-loader

我正在使用 UIL 在 ListFragment 中加载和显示图像，效果很好。在 ListView 中，我使用的是 Handler-Pattern。到目前为止没有问题。

但是，如果我单击 ListEntry 在第二个片段中显示另一个图像，它将失败。

奇怪的是，如果我单击第二个片段中的按钮加载该图像，它就像一个魅力。

日志输出在这两种情况下都显示图像在磁盘缓存中，并且它也被缩放。- 没有错误。

此函数是片段的一部分：（并且总是从线程 1 (UI) 调用）

```
 public void updateStockInfo(final String symbol) {

    if (viewer != null) {
        //final ImageView imageview = (ImageView) viewer.findViewById(R.id.stockinfo);

        urlForStockInfo = "http://chart.finance.yahoo.com/c/3m/d/" + symbol.toLowerCase();

        imageloader.loadImage(getActivity(), urlForStockInfo, new ImageLoadingListener() {
            ...

            @Override
            public void onLoadingComplete(final Bitmap loadedImage) {
                imageview.setImageBitmap(loadedImage);
                logger.debug("Loadinf complete");
            }
        });
    } 
```

从 onActivityCreated 调用 updateStockInfo（与 onCreateView 相同）失败，没有任何异常。加载图像的线程没有启动。在 LoadAndDisplayImageTas:run() 中，第 89 行检查了 Thread.interrupted() - 此检查失败。

Buuuuuttt 如果手动（按下按钮）调用 updateStockInfo 如果有效？？？

在所有情况下，UI 线程都会调用 updateStockInfo。

有什么提示吗？提前谢谢！

[**更新**]
我下载了源代码并在第 92 行删除了对 Thread.interupted() 的检查

```
 if (/* Thread.interrupted() || */checkTaskIsNotActual()) return;
    if (configuration.loggingEnabled) Log.i(ImageLoader.TAG, String.format(LOG_DISPLAY_IMAGE_IN_IMAGEVIEW, imageLoadingInfo.memoryCacheKey)); 
```

你知道吗 - 它有效。这是一个错误还是仅适用于我的特殊情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:32:40.270

`ImageLoader.stop()`你更有可能在活动的某个地方打电话。

# css - WordPress更改特色图像的图像宽度和高度

> ID：12857951
> 
> 赞同：0
> 
> 时间：2012-10-12T11:20:44.753
> 
> 标签：css, wordpress, image-processing, wordpress-theming

我很陌生`Wordpress`。我想知道如何`image width and height size`定义`featured image`？我希望我的所有图像都应该是`100 X 100 px`. 那么该怎么做呢？欢迎任何帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T11:22:25.890

你可以试试这样的东西[吗](http://codex.wordpress.org/Function_Reference/set_post_thumbnail_size)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:40:20.180

使用此代码并调整您的特色图像大小

```
<?php query_posts('cat=ID'.'&showposts=NO. OF POST') ?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
<!-- Thumbnail part start-->
<div style="100px"; width="100px";><?php the_post_thumbnail(); ?></div>
<!-- Thumbnail part End-->
<p><?php echo substr(get_the_excerpt(), 0,65).' [...]'; ?></p>
<a href="<?php the_permalink(); ?>">Read More...</a>

<?php endwhile; ?>
<?php wp_reset_query(); ?>
 <?php endif;?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T11:46:10.860

设置新的帖子缩略图大小后，您必须重新构建缩略图，因为 Wordpress 已经构建了它们。

为此，您可以使用例如[这个插件](http://wordpress.org/extend/plugins/regenerate-thumbnails/)，但请记住，它以存在安全问题而闻名。我的建议是安装它，重新生成缩略图，使它们具有您设置的新大小，然后卸载它。

希望这可以帮助。干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T03:56:42.187

在你的 function.php 文件中使用类似的东西

```
<?php add_image_size( $name, $width, $height, $crop ); ?> 
```

参数将在哪里

`$name (string) (required) The new image size name.`

`$width (int) (optional) The post thumbnail width in pixels.`

`$height (int) (optional) The post thumbnail height in pixels.`

`$crop (boolean) (optional) Crop the image or not. False - Soft proportional crop mode ; True - Hard crop mode.`

有关更多信息，请查看[wordpress codex](http://codex.wordpress.org/Function_Reference/add_image_size)文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T12:17:34.277

把这一行放在`add_image_size('thumb',100,100,TRUE);`functions.php中

并在任何你想要的地方调用它`the_post_thumbnail('thumb');`

有关更多信息，请查看该链接：[http ://codex.wordpress.org/Function_Reference/add_image_size](http://codex.wordpress.org/Function_Reference/add_image_size)

# javascript - 如何挑选要在 jQuery dataTables 中显示的列？

> ID：12857958
> 
> 赞同：0
> 
> 时间：2012-10-12T11:21:07.693
> 
> 标签：javascript, jquery, json, datatables

从服务器返回的 JSON（用于填充[dataTable](http://datatables.net/)）如下所示：

```
[
   {
      "id":1,
      "attributeType":{
         "id":1,
         "name":"test1",
         "tag":"test-type",
         "is-dog":false
      },
      "attributeValue":{
         "id":null,
         "name":"blah",
         "tag":"BLAH"
      },
      "buzz":1,
      "fizz":"53abc"
   }
] 
```

但是，我只想显示以下字段：

*   `id`
*   `attributeValue.name`
*   `buzz`

此外，我希望它们按以下顺序显示（从左到右）：

*   `buzz`
*   `attributeValue.name`
*   `id`

如何配置我的 dataTable 以仅选择这三个字段，并以所需的顺序显示它们？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:01:36.563

您可以做的是动态构建您的表，然后将其发送到数据表。

在以下示例中，我假设 Json 在 jQuery Ajax 调用中返回，并且您的响应中有多个项目：

```
$.ajax({
    type: "POST",
    url: "Controller Url",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
...
...
success: function (response) {

// Assuming you need to parse, you may not need to depending on how the data is returned.
var parsedJson = $.parseJSON(response); 
// Empty var to hold the table content.
var buildTable = "";

$.each(parsedJson, function(i)) {
    buildTable += "<tr>";
    buildTable += "<td>" + parsedJson[i].buzz + "</td>";
    buildTable += "<td>" + parsedJson[i].attributeValue.name + "</td>";
    buildTable += "<td>" + parsedJson[i].id + "</td>";
    buildTable += "</tr>";
});

// Now fill your datatable with the table content in the order you want and with only the fields required.
$("#datatableContent").append(buildTable);

// Configure your datatable
$('#datatableContent').dataTable({ });

} //end success

});// end ajax 
```

在您的视图中，您将拥有：

```
<table id="datatableContent">
<thead>
    <tr>
        <th>Buzz</th>
        <th>Name</th>
        <th>ID</th>
    </tr>
</thead>
<tbody>
</tbody> 
```

要记住的一件事是，如果我`$('#datatableContent').dataTable({ });`在 ajax 调用成功的情况下放置了配置部分，我就会遇到问题。我`$("#datatableContent").append(buildTable);`在成功的线路之后放置了地雷，并且每次都能完美运行。

# jquery - jQuery attr() 方法的奇怪行为

> ID：12857960
> 
> 赞同：2
> 
> 时间：2012-10-12T11:21:25.263
> 
> 标签：jquery

挖掘**[jQuery 源代码](http://code.jquery.com/jquery.js)**后，我仍然无法理解为什么代码如下：

```
$("div").attr("someAttr", undefined); 
```

返回*jQuery 对象*但不是*属性值*，尽管第二个`value`参数设置为`undefined`.

**JSFiddle：http:** [//jsfiddle.net/5jn5D/](http://jsfiddle.net/5jn5D/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T11:25:29.213

这是因为[`.attr("someAttr", undefined)`](http://api.jquery.com/attr/)（带有 2 个参数）是一个 setter 方法，因此为了可链接性而返回对象。将参数设置为`undefined`或任何其他任意值总是会产生相同的效果。如果你知道值是什么，为什么要返回一个值？

如果您使用`attr`作为 getter 方法（只有 1 个参数）`.attr("someAttr")`，它会返回一个带有属性值的字符串。

源代码中的第 2003 行明确检查参数的长度：

```
return jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 ); 
```

第五个参数是`chainable`开关，为`arguments > 1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:26:59.387

这是由于这一点：

```
attr: function( name, value ) {
    return jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );
},

// ...

access: function( elems, fn, key, value, chainable, emptyGet, pass ) {
    // ..
    return chainable ? ...
} 
```

请注意，检查该方法是作为 getter 还是 setter 调用的不是因为“value”的值，而是因为参数的数量：

```
arguments.length > 1 
```

# android - 解决循环依赖 RoboGuice

> ID：12857961
> 
> 赞同：0
> 
> 时间：2012-10-12T11:21:27.810
> 
> 标签：android, dependency-injection, guice, roboguice

我的应用程序中似乎存在循环依赖问题。我已经测试了所有类并且它们运行良好，但是在运行我的应用程序时我无法实例化它们。

问题的根源在这个类

```
public class HttpClientProvider implements Provider<HttpClient> {

    @Inject
    private UserAgent userAgent;
    @Inject
    private HttpResponseInterceptor interceptor;

    private DefaultHttpClient httpClient = new DefaultHttpClient();

    @Override
    public HttpClient get() {
        httpClient.getParams().setParameter(CoreProtocolPNames.USER_AGENT, userAgent.getUserAgent());
        httpClient.addResponseInterceptor(interceptor);
        return httpClient;
    }
} 
```

这个类提供了 httpClient 并添加了一个拦截器。拦截器看起来像这个提供者被用来为这个类提供 httpclient

```
public class ServerCommunicator implements ServerCommunicator {

    public static final String URL = "http://something.com/";

    private HttpClient httpClient;
    private HttpContext httpContext;

    @Inject
    public ServerCommunicator(HttpClient httpClient, HttpContext httpContext) {
        this.httpClient = httpClient;
        this.httpContext = httpContext;
    }

    @Override
    public HttpResponse post(String URN, String entity) throws IOException {
        HttpPost httpPost = new HttpPost(URL + URN);
        httpPost.setHeader("Content-type", "application/json");
        httpPost.setHeader("Accept", "application/json");
        httpPost.setEntity(new StringEntity(entity));
        return httpClient.execute(httpPost, httpContext);
    }

    @Override
    public HttpResponse get(String URN) throws IOException {
        return httpClient.execute(new HttpGet(URL + URN),  httpContext);
    }

    @Override
    public HttpResponse delete(String URN) throws IOException {
        return httpClient.execute(new HttpDelete(URL + URN),  httpContext);
    }

} 
```

问题出现是因为 httpResponseInterceptor 还使用 ServerCommunicator 类在用户未经过身份验证时向服务器发送请求。

如何解决这个问题？

# java - 在 JSP 中从 Javascript 访问 Java 变量

> ID：12857962
> 
> 赞同：1
> 
> 时间：2012-10-12T11:21:27.067
> 
> 标签：java, javascript, jsp, variables

> **可能重复：**
> [JavaScript 中的 JSP 变量访问](https://stackoverflow.com/questions/4803906/jsp-variable-accessing-in-javascript)

我在 jsp 页面上有一个 java 变量和一个 javascript。

```
<% int max=70; %> 
```

如何从脚本中获取变量？

```
var x = ??? 
```

我尝试了 document.getElementById() 但不幸的是它似乎不起作用，因为它不是 html 元素

这是我的错误：

无法为 JSP 编译类：

```
An error occurred at line: 13 in the jsp file: /search.jsp
max cannot be resolved
10:     function validateForm() {
11:         var x=document.forms["search"]["capacity"].value;
12:         var y=document.forms["search"]["date"].value;
13:         var m=<%=max%>;
14:         if (isNaN(x)) {
15:             alert("Capacity must be an Integer");
16:             return false; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T11:24:06.713

JSP 是一个 HTML 代码生成器。JS 是 HTML 的一部分。

只需让 JSP 相应地打印 JS 变量即可。

```
var x = <%=max%>; 
```

在浏览器中打开页面，右键单击并*查看源代码*以验证 JSP 生成的 HTML/JS 语法是否正确。

### 也可以看看：

*   [我们的 JSP 维基页面](https://stackoverflow.com/tags/jsp/info)

* * *

**与具体问题**无关**，十年来一直不鼓励使用小*脚本。*要了解正确的方法，请仔细阅读[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)假设它`max`在 EL 范围内可用，您可以按如下方式打印它：**

 **```
var x = ${max}; 
```**

# mysql - Mysql Udf sys_exec 函数调用 shell 脚本

> ID：12857963
> 
> 赞同：4
> 
> 时间：2012-10-12T11:21:31.600
> 
> 标签：mysql

我正在从 mysql UDF 函数 sys_exec 调用 shell 脚本：

```
 SET cmd = CONCAT('cd /home/enablement;sh execute.sh ', CONCAT('1', ' ', '1', ' ', '1'));
SET result = sys_exec(cmd);
SELECT result FROM DUAL; 
```

但是我得到一个错误代码 32512 结果可能是两个不同的用户，一个用于 mysql，另一个用于 linux（用于 execute.sh 脚本），请您指导我如何让 mysql 用户访问在调用 sys_exec 函数时执行.sh 文件。

感谢进阶

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-21T13:58:39.463

我知道这篇文章很旧，但也许它会对某人有所帮助
你应该这样做，
`$ sudo /etc/init.d/apparmor stop`
因为 AppArmor 限制了你的 UDF 函数的执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T06:02:38.133

请不要完全停止 apparmor，只需在 apparmor 的 mysqld 配置文件中启用您的用例即可。例如我需要在 mysql 中使用 redis。

```
$ sudo vim /etc/apparmor.d/usr.sbin.mysqld 
```

然后在最后插入这一行

```
/usr/bin/redis-cli mr, 
```

保存文件并重新加载 apparmor

```
sudo service apparmor reload 
```

# java - 显式转换背后的逻辑

> ID：12857964
> 
> 赞同：1
> 
> 时间：2012-10-12T11:21:38.300
> 
> 标签：java, inheritance, casting

考虑 Java 中的以下类：

```
interface I{
}
class A implements I{
}

class B extends A {
}

class C extends B{
}
And the following declarations:
A a = new A();
B b = new B(); 
```

获得`a = (B)(I) b;`代码后，将编译并运行。而且完全不明白为什么我需要转换为接口和 B 类。在我看来，如果没问题，它会起作用`a = b;`。有人可以向我解释上述显式转换的逻辑是什么使代码运行良好。

但是一旦你有了`I i = (C) a;`它就会在运行时失败，因为'a'不指向C类的对象。为什么'a'需要指向C类的对象？除此之外，我不明白转换为 C 类的逻辑。无论如何，您将参考 I 接口。最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:29:20.303

仅当转换的对象确实扩展了此类或实现了此接口时，才有可能将对象转换为给定的类或接口。如果不是（即，如果对象不是类或接口的实例），您将获得 ClassCastException。请注意，将对象转换为类不会更改对象的类型。它只允许将其引用为另一种类型，它也是，扩展或实现。

让我们看看你的例子：

```
a = (B)(I) b; 
```

这首先强制转换`b`类型为的对象`B`。到界面`I`。这没关系，因为 B 扩展了 A，而 A 实现了 I，这意味着 B 也实现了 I。

然后它第二次将同一个对象投射到类`B`。`b`是 的一个实例`B`，所以这行得通。

```
I i = (C) a; 
```

`a`这将类型的对象转换`A`为类`C`。A不扩展C，所以这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:30:07.507

Java 中引用类型的转换只是程序员的自检符号。该类型的变量仅保存对对象的引用（指针）。在强制转换期间，引用本身和被引用对象都不会发生变化。实际上，这种铸造什么也没做。

只有在将宽类型变量分配给窄类型变量时才需要进行自检。例如从超类到子类。因为只有在这里才有可能出错。从相等类型的变量或窄类型的变量分配时，不需要检查，因为它总是可能的。

# google-docs-api - Google Documents List API 文件上传 (411error - weblogic)

> ID：12857965
> 
> 赞同：1
> 
> 时间：2012-10-12T11:21:39.063
> 
> 标签：google-docs-api

我对文档列表 API 有疑问。

我们在内部系统中使用 Docs api。该系统使用 WebLogic(Oracle)。

Docs api 在创建、列表等基本功能方面运行良好。

但是文件上传功能在 webLogic 中存在一些问题。

其他环境没有问题。（我们在Tomcat & Jave 测试过）。

这是我的来源和错误日志。

** 资源 **

```
private DocumentListEntry uploadGoogleDocumentFile(String url,
      String file, DocsUploadProgressListener listener, int progressUpdateInterval)
      throws IOException, ServiceException, InterruptedException {

    // Pool for handling concurrent upload tasks
    ExecutorService executor =  Executors.newFixedThreadPool(MAX_CONCURRENT_UPLOADS);

    File f = new File(file);
    MediaFileSource mediaFile = getMediaFileSource(file);

    mediaFile.setContentLength(f.length());

    ResumableGDataFileUploader uploader = new ResumableGDataFileUploader.Builder(service, new URL(url), mediaFile, null)
    .title(mediaFile.getName())
    .chunkSize(DEFAULT_CHUNK_SIZE).executor(executor)
    .trackProgress(listener, progressUpdateInterval)
    .build(); 

        uploader.addHeader("Content-Length", f.length()+"");
    uploader.start(); <-- error point

    // Wait for completion.
    listener.await();

    // Thread clean up.
    executor.shutdownNow();
    executor.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);

    if(uploader.isDone())
        return uploader.getResponse(DocumentListEntry.class);
    else
        return null; 
```

}

** 错误信息 **

```
<html lang=en> 
```

错误 411（需要长度）！！1 *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body {margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100 % 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max -width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}

**411.**那？셲 一个错误。

POST 请求需要一个`Content-length`标题。那？我们所知道的。在 com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:632) 在 com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564) 在 com.google.gdata.client .http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560) 在 com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538) 在 com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest .java:536) 在 com.google.gdata.client.media.MediaService.createResumableUploadSession(MediaService.java:630) 在 com.google.gdata.client.media.ResumableGDataFileUploader$Builder.build(ResumableGDataFileUploader.java:250) 在com.posco.google.documents.v3.DocumentsCore.uploadGoogleDocumentFile(DocumentsCore.java:

# matlab - 在 Matlab/Simulink Stateflow 中设置事件

> ID：12857975
> 
> 赞同：2
> 
> 时间：2012-10-12T09:33:46.277
> 
> 标签：matlab, simulink, stateflow

如何根据某个值在 Simulink Stateflow（状态图）中设置事件。我的意思是这个。我有一个名为“选择”的变量。这个“选择”作为来自 simulink 块的输入。选择的值在 1 到 4 之间。所以我想做的就是：

```
if choice == 1 then trigger/set eventBlue
if choice == 2 then trigger/set eventRed
if choice == 3 then trigger/set eventWhite
if choice == 4 then trigger/set eventGreen
else trigger/set eventYellow 
```

那么我该怎么做呢？命令是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:07:46.123

我建议你看看 stateflow 网络研讨会： http: [//www.mathworks.com/products/stateflow/](http://www.mathworks.com/products/stateflow/)。还有许多状态流示例可以帮助您了解如何使用该库。检查此帮助网页： http: [//www.mathworks.com/help/stateflow/examples/index.html](http://www.mathworks.com/help/stateflow/examples/index.html)

很难确切地知道您想要做什么，但是您可以绘制指示状态更改的箭头并添加一个检查变量选择值的函数。首先，您必须配置您的状态图以承认“选择”作为来自 simulink 的输入。定义状态并在箭头转换中放置“[choice == 1]”、“[choice == 2]”等（没有“”）。

您应该获得这样的模型： ![在此处输入图像描述](../Images/ccb21f26fdf29db788a7417464da2f71.png) ![在此处输入图像描述](../Images/86b001552c629bcd09eb2d8b35fedd4b.png)

脉冲发生器被配置为创建一系列 0 和 1，以激活转换。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:09:01.867

对于您描述的问题，我建议您查看 Stateflow 中的[内部转换](http://www.mathworks.com/help/stateflow/ug/inner-transition-examples.html)。使用内部转换，您可以避免创建从每个状态到每个其他状态的转换，条件如下`[x==1]`......

链接的文档页面上的示例应该让您了解如何实现这一点。

# vb.net - 计算作为更新和插入进入的记录

> ID：12857976
> 
> 赞同：1
> 
> 时间：2012-10-12T11:22:37.950
> 
> 标签：vb.net

如何获取消息框以返回作为更新和插入的记录数。这是我到目前为止提出的代码，但问题在于此代码仅返回值 1。奇怪的是，当我插入 5 条记录时，messagbox 出现 5 次但值为 1。

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) _
    Handles Button2.Click
    Dim i As Integer = 0
    Dim student_id, name ,age dbSQL_query As String
    Dim dbSQL_cmd As New SqlClient.SqlCommand
    Dim dbSQL_con As New SqlClient.SqlConnection

    'dbSQL_con.ConnectionString = "Server=*****;Database=***;Uid=****;Pwd=*****;"
    'dbSQL_con.Open()
    Using SQLConnection As New MySqlConnection(connectionString)
        SQLConnection.Open()
        For i = 0 To DataGridView1.RowCount - 1
            Using sqlCommand As New MySqlCommand()
                student_id = DataGridView1.Item(0, i).Value.ToString
                name = DataGridView1.Item(1, i).Value.ToString
                age = DataGridView1.Item(2, i).Value.ToString

                dbSQL_query = "INSERT INTO students (student_id, name, age )  VALUES  (" + addQoute(student_id) + ", " + _
                      addQoute(name) + ", " + _ addQoute(age) + ") on duplicate key update student_id=(" + addQoute(student_id) + "),name=(" + addQoute(name) + "),age=(" + addQoute(age) + ")"
                With sqlCommand

                    .CommandText = dbSQL_query
                    .Connection = SQLConnection
                    .CommandType = CommandType.Text
                End With
                sqlCommand.ExecuteNonQuery()
                dbSQL_cmd = New SqlClient.SqlCommand(dbSQL_query, dbSQL_con)

            End Using

        Next
        'MessageBox.Show(DataGridView1.RowCount & " bonds have been inserted")
        SQLConnection.Close()
    End Using
End Sub

Public Function addQoute(ByVal str As String) As String
    str = Trim(str)
    Return "'" + str + "'"
End Function 
```

# oracle - 更改原始列导致 Excel 表中的 TEXT 格式

> ID：12857977
> 
> 赞同：1
> 
> 时间：2012-10-12T11:22:38.743
> 
> 标签：oracle, excel, openquery, vba

EXCEL VBA 中的此选择会导致 Excel 中的**数字**格式：

```
strSQL = "SELECT * FROM OPENQUERY(dtb, 'SELECT col from table')" 
```

但是，如果我在列上创建一些函数，它会在 Excel 中以**文本格式生成：**

```
strSQL = "SELECT * FROM OPENQUERY(dtb, 'SELECT sum(col) from table')"
strSQL = "SELECT * FROM OPENQUERY(dtb, 'SELECT col*1.0  from table')"
strSQL = "SELECT * FROM OPENQUERY(dtb, 'SELECT col-1    from table')" 
```

我试过了`to_number(...)`，`to_number(to_char(...))`但没有帮助。

为什么？我该如何解决这种情况？

**解决方案**（使用 SQL 服务器强制转换函数将列转换为数字）

```
strSQL = "SELECT cast(col# as numeric(10, 2)) col# " _
         "FROM OPENQUERY(dtb, 'SELECT sum(col) col# from table')" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:04:08.407

**解决方案**（使用 SQL 服务器强制转换函数将列转换为数字）

```
strSQL = "SELECT cast(col# as numeric(10, 2)) col# " _
         "FROM OPENQUERY(dtb, 'SELECT sum(col) col# from table')" 
```

# javascript - 带有或不带国家代码的手机号码的正则表达式

> ID：12857979
> 
> 赞同：17
> 
> 时间：2012-10-12T11:22:39.810
> 
> 标签：javascript, regex, validation

我需要验证我想要正则表达式的注册表单中的文本字段。

文本框将接受一个手机号码，如 9999999999（10 位 - 以 7 或 8 或 9 开头）。用户也可以写 +919999999999，其中 +91 是国家代码（+91 代表印度，但可以接受任何其他代码，例如 +110 或 +52），或者他也可以写 09999999999（第一个 0 代表本国）

在这里，用户有3个选择，

1.  添加带有国家代码的手机号码
2.  只是没有国家代码或 0 前缀
3.  在手机号码中以零为前缀。

虽然不是必需的，但我的页面在 asp.net 中，并且我正在使用内置的正则表达式验证器。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-12T11:28:16.843

据我所知，这应该有效。前缀是可选的，存储在第一个匹配组中，主号码进入第二组。

```
^([0|\+[0-9]{1,5})?([7-9][0-9]{9})$ 
```

但是，如果您可以为每个测试用例提供一些测试用例，这将有助于我们为您提供所需的工作正则表达式。

在评论中向 SchlaWiener 提出正确限制国家代码长度的建议。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-14T05:17:36.057

印度手机号码验证的简单正则表达式：`/^[0]?[789]\d{9}$/`

支持08888888888（加零）7878787878,8634456876,9545559877（任何手机号码前加7,8,9后加其他9位）

全功能

```
function mobileNumber(){

     var Number = document.getElementById('YOUR ELEMENT ID').value;
     var IndNum = /^[0]?[789]\d{9}$/;

     if(IndNum.test(Number)){
        return;
    }

    else{
        $('#errMessage').text('please enter valid mobile number');
        document.getElementById('profile_telephoneNumber').focus();
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T11:28:00.353

这应该可以解决问题：

```
^(\+[\d]{1,5}|0)?[7-9]\d{9}$ 
```

[http://fiddle.re/av1k](http://fiddle.re/av1k)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-09T10:08:59.340

尝试以下操作：

```
function validateMobile(mobilenumber) {   
    var regmm='^([0|+[0-9]{1,5})?([7-9][0-9]{9})$';
    var regmob = new RegExp(regmm);
    if(regmob.test(mobilenumber)){
        return true;
    } else {
        return false;
    }    
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-12T11:35:19.540

您也可以使用字符串操作来做到这一点。检查此[链接](http://jsfiddle.net/XJ53F/)

```
str = "+919999999999"
cc = str.split(str.slice(-10))[0] 
```

结果将是`+91`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-27T19:33:22.773

**对于手机号码验证 - 请使用此正则表达式**

```
var mobile_number = 9867345673;   // return true
var mobile_number = 1234566667;   // return false
var mob_regex = /^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$/;
if(mob_regex.test(mobile_number)){
   return true;
} else {
   return false;
} 
```

**请参阅随附的屏幕截图以供参考。**

[![在此处输入图像描述](../Images/8dffe9e8047b03031a1ff7314d32a5f5.png)](https://i.stack.imgur.com/Ulh4q.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T11:31:05.220

```
if(document.getElementById('mobile_number').value != ""){

       var y = document.getElementById('mobile_number').value;
       if(isNaN(y)||y.indexOf(" ")!=-1)
       {
          alert("Invalid Mobile No.");
          document.getElementById('mobile_number').focus();
          return false;
       }

       if (y.length>10 || y.length<10)
       {
            alert("Mobile No. should be 10 digit");
            document.getElementById('mobile_number').focus();
            return false;
       }
       if (!(y.charAt(0)=="9" || y.charAt(0)=="8"))
       {
            alert("Mobile No. should start with 9 or 8 ");
            document.getElementById('mobile_number').focus();
            return false
       }
 } 
```

**您还可以在更多示例链接中看到** [单击此处](http://www.giveg.com/itechmentors/content/javascript-email-validation-and-mobile-number-validation)

[http://p2p.wrox.com/javascript-how/64920-validation-phone-number-mobile-number.html](http://p2p.wrox.com/javascript-how/64920-validation-phone-number-mobile-number.html)

# spring - 事务注解避免服务被嘲笑

> ID：12857981
> 
> 赞同：11
> 
> 时间：2012-10-12T11:22:54.750
> 
> 标签：spring, testng, mockito, transactional

我有一个流口水规则文件，它在规则中使用服务类。所以一个规则做这样的事情：

eval(countryService.getCountryById(1) != null)

在使用 @service 和 @Transactional(propagation=Propagation.SUPPORTS) 注释的验证服务中，drools 文件用于无状态知识库中，并添加了应在 drool 中使用的事实。一旦完成，将调用 session.execute(facts) 并启动规则引擎。

为了测试规则，我想存根 countryService.getCountryById()。使用 mockito 没有什么大问题。为其他使用 drools 设置的服务完成此操作，并且效果很好。但是在这种特殊情况下， countryService 没有被存根，我不知道为什么。在花了很多时间检查我的代码之后，我发现在服务上方使用 @Transactional 或缺少此注释会有所不同。缺少@Transaction 使得mockito 可以毫无问题地模拟countryservice，而使用@transactional 会导致mockito 失败（没有任何错误或提示）注入模拟，因此使用了原始的countryservice 对象。

我的问题是为什么这个注释会导致这个问题。为什么在设置@Transactional 时不能模拟注入模拟？我注意到，当我调试和检查 countryService 时，mockito 失败了，当它作为全局添加到 drools 会话时，当我在调试窗口中检查 countryservice 时，我看到以下差异：

*   使用@transactional：countryService 的值为 CountryService$$EnhancerByCGLIB$$b80dbb7b

*   没有 @transactional:countryService 的值为 CountryService$$EnhancerByMockitoWithCGLIB$$27f34dc1

除了@transactional，我在countryservice方法getCountryById中找到了断点，调试器在该断点处停止，但没有@transactional，我的断点被跳过，因为mockito绕过它。

验证服务：

```
@Service
@Transactional(propagation=Propagation.SUPPORTS)
public class ValidationService 
{
  @Autowired
  private CountryService countryService;

  public void validateFields(Collection<Object> facts)
  {
    KnowledgeBase knowledgeBase = (KnowledgeBase)AppContext.getApplicationContext().getBean(knowledgeBaseName); 
    StatelessKnowledgeSession session = knowledgeBase.newStatelessKnowledgeSession();
    session.setGlobal("countryService", countryService);
    session.execute(facts);

  } 
```

和测试类：

```
public class TestForeignAddressPostalCode extends BaseTestDomainIntegration
{

  private final Collection<Object> postalCodeMinLength0 = new ArrayList<Object>();

  @Mock
  protected CountryService countryService;

  @InjectMocks
  private ValidationService level2ValidationService;

  @BeforeMethod(alwaysRun=true)
  protected void setup()
  {
    // Get the object under test (here the determination engine)
    level2ValidationService = (ValidationService) getAppContext().getBean("validationService");
    // and replace the services as documented above.
    MockitoAnnotations.initMocks(this);

    ForeignAddress foreignAddress = new ForeignAddress();
    foreignAddress.setCountryCode("7029");
    foreignAddress.setForeignPostalCode("foreign");

    // mock country to be able to return a fixed id
    Country country = mock(Country.class);
    foreignAddress.setLand(country);
    doReturn(Integer.valueOf(1)).when(country).getId();

    doReturn(country).when(countryService).getCountryById(anyInt());

    ContextualAddressBean context = new ContextualAddressBean(foreignAddress, "", AddressContext.CORRESPONDENCE_ADDRESS);
    postalCodeMinLength0.add(context);
  }

  @Test
  public void PostalCodeMinLength0_ExpectError()
  {
    // Execute
    level2ValidationService.validateFields(postalCodeMinLength0, null);

  } 
```

如果我想保留这个 @transactional 注释但也能够存根 countryservice 方法，知道该怎么做吗？

问候，

迈克尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-07-13T06:23:12.187

请注意，从 Spring 4.3.1 开始，[ReflectionTestUtils](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/util/ReflectionTestUtils.html "反射测试工具")应该自动解包代理。所以

```
ReflectionTestUtils.setField(validationService, "countryService", countryService); 
```

即使您使用, ...`countryService`注释，现在也应该可以工作（也就是说，在运行时隐藏在代理后面）`@Transactional``@Cacheable`

相关问题：[SPR-14050](https://jira.spring.io/browse/SPR-14050)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-09T12:53:31.250

发生的事情是您的 ValidationService 被包装在 JdkDynamicAopProxy 中，因此当 Mockito 将模拟注入服务时，它看不到任何将它们注入的字段。您需要做以下两件事之一：

*   放弃启动您的 Spring 应用程序上下文并仅测试验证服务，迫使您模拟每个依赖项。
*   或者从 JdkDynamicAopProxy 中解开您的实现，并自己处理注入模拟。

代码示例：

```
@Before
public void setup() throws Exception {
    MockitoAnnotations.initMocks(this);
    ValidationService validationService = (ValidationService) unwrapProxy(level2ValidationService);
    ReflectionTestUtils.setField(validationService, "countryService", countryService);
}

public static final Object unwrapProxy(Object bean) throws Exception {
    /*
     * If the given object is a proxy, set the return value as the object
     * being proxied, otherwise return the given object.
     */
    if (AopUtils.isAopProxy(bean) && bean instanceof Advised) {
        Advised advised = (Advised) bean;
        bean = advised.getTargetSource().getTarget();
    }
    return bean;
} 
```

[关于这个问题的博客条目](http://kim.saabye-pedersen.org/2012/12/mockito-and-spring-proxies.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-27T03:50:00.657

基于[SuperSaiyen 的回答](https://stackoverflow.com/a/17548683/1005102)，我创建了一个插入式实用程序类以使其更简单且类型安全：

```
import org.mockito.Mockito;
import org.springframework.aop.framework.Advised;
import org.springframework.aop.support.AopUtils;
import org.springframework.test.util.ReflectionTestUtils;

@SuppressWarnings("unchecked")
public class SpringBeanMockUtil {
  /**
   * If the given object is a proxy, set the return value as the object being proxied, otherwise return the given
   * object.
   */
  private static <T> T unwrapProxy(T bean) {
    try {
      if (AopUtils.isAopProxy(bean) && bean instanceof Advised) {
        Advised advised = (Advised) bean;
        bean = (T) advised.getTargetSource().getTarget();
      }
      return bean;
    }
    catch (Exception e) {
      throw new RuntimeException("Could not unwrap proxy!", e);
    }
  }

  public static <T> T mockFieldOnBean(Object beanToInjectMock, Class<T> classToMock) {
    T mocked = Mockito.mock(classToMock);
    ReflectionTestUtils.setField(unwrapProxy(beanToInjectMock), null, mocked, classToMock);
    return mocked;
  }
} 
```

用法很简单，只需在测试方法的开头，`mockFieldOnBean(Object beanToInjectMock, Class<T> classToMock)`使用要在其上注入模拟的 bean 以及应该模拟的对象的类来调用该方法。例子：

假设您有一个类型为 的 bean，`SomeService`其中包含 的自动装配 bean `SomeOtherService`，例如；

```
@Component
public class SomeService {
  @Autowired
  private SomeOtherService someOtherService;

  // some other stuff
} 
```

要模拟bean，`someOtherService`请`SomeService`使用以下命令：

```
@RunWith(SpringJUnit4ClassRunner.class)
public class TestClass {

  @Autowired
  private SomeService someService;

  @Test
  public void sampleTest() throws Exception {
    SomeOtherService someOtherServiceMock = SpringBeanMockUtil.mockFieldOnBean(someService, SomeOtherService.class);

    doNothing().when(someOtherServiceMock).someMethod();

    // some test method(s)

    verify(someOtherServiceMock).someMethod();
  }
} 
```

一切都应该正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-22T20:32:39.447

另一种解决方案是在 Spring 将所有内容连接在一起之前将模拟对象添加到 Spring 上下文中，以便在测试开始之前它已经被注入。修改后的测试可能如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = { Application.class, MockConfiguration.class })
public class TestForeignAddressPostalCode extends BaseTestDomainIntegration
{

  public static class MockConfiguration {

      @Bean
      @Primary
      public CountryService mockCountryService() {
        return mock(CountryService.class);
      }

  }

  @Autowired
  protected CountryService mockCountryService;

  @Autowired
  private ValidationService level2ValidationService;

  @BeforeMethod(alwaysRun=true)
  protected void setup()
  {

    // set up you mock stubs here
    // ... 
```

`@Primary`注释很重要，确保您的新模拟 CountryService 具有注入的最高优先级，替换正常的。但是，如果将类注入多个位置，这可能会产生意想不到的副作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-01T17:04:27.260

在 Spring Test 模块中存在一个名为[AopTestUtils](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/util/AopTestUtils.html)的 Spring 实用程序。

```
public static <T> T getUltimateTargetObject(Object candidate) 
```

> 获取提供的候选对象的最终目标对象，不仅展开顶级代理，还展开任意数量的嵌套代理。如果提供的候选是 Spring 代理，则返回所有嵌套代理的最终目标；否则，候选人将按原样返回。

您可以在测试期间注入模拟或间谍并取消代理类以安排模拟或验证

# javascript - iframe 无法在 ie8 中运行

> ID：12857985
> 
> 赞同：0
> 
> 时间：2012-10-12T11:23:07.917
> 
> 标签：javascript, internet-explorer, iframe

此脚本中的`iframe`标记在 IE-Version 8 中不起作用，但在 Firefox 和 Chrome 中起作用。是否有任何替代品`iframe`可以在所有浏览器中使用？

```
<script type="text/javascript">

    document.body.onload = function () { onclick(); };

    function onclick() {
      $("#chartdiv").html('<iframe id="Reloader" style="width: 680px; height: 500px;margin-left:250px;" frameborder="0" marginwidth="1" src="charts/deptwise.htm"></iframe>');
    }; 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:26:51.757

尝试使用 jQuery 加载函数而不是 document.body.onload - 我怀疑 IE8 在加载部分有困难：http: [//api.jquery.com/load-event/](http://api.jquery.com/load-event/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:28:15.247

```
$(function() {
  $("#chartdiv").html('<iframe id="Reloader" style="width: 680px; height: 500px;margin-left:250px;" frameborder="0" marginwidth="1" src="charts/deptwise.htm"></iframe>');
}); 
```

可能会更好

在 Chrome FX、IE8 和 IE9 中测试的[DEMO](http://jsfiddle.net/mplungjan/UBWz3/)

如果你想让它在点击正文时执行：

```
$(function() {
  $("body").on("click",function() {
    $("#chartdiv").html('<iframe id="Reloader" style="width: 680px; height: 500px;margin-left:250px;" frameborder="0" marginwidth="1" src="http://msdn.com"></iframe>');
  });
});​ 
```

[演示](http://jsfiddle.net/mplungjan/h93vV/)

# php - 使用 Symfony 2.1 与 Doctrine 2 中的同一数据库的并发连接

> ID：12857986
> 
> 赞同：0
> 
> 时间：2012-10-12T11:23:07.570
> 
> 标签：php, symfony, transactions, doctrine-orm, symfony-2.1

我有一个执行繁重处理的脚本（它从命令行运行）。

此脚本使用事务来确保它成功完成或在失败时保持数据库不变。

该脚本还记录到同一个数据库；日志需要是实时的（用于显示在网站上，以便用户可以看到进度），因此它们不能被收集，然后在数据处理完毕并提交（或回滚）事务后持久化。

所以我的问题是：如何在 Symfony 2.1 中为同一个数据库获取两个实体管理器？

我正在假设我需要两个到数据库的连接，以允许我将每个日志记录插入语句放在它自己的事务中，并在另一个事务中处理数据。

谢谢你的帮助。詹姆斯·班奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T13:40:20.710

您可以在该脚本中创建子任务，一个用于将数据写入数据库，另一个用于记录。您可以使用[流程组件](http://symfony.com/doc/current/components/process.html)。

# iphone - 当CGPointMake遇到大数

> ID：12857992
> 
> 赞同：1
> 
> 时间：2012-10-12T11:23:27.593
> 
> 标签：iphone, objective-c, ios, ipad

我正在尝试制作基于时间的绘图。例如：定义一个点供以后使用。

```
CGPoint testPoint = CGPointMake(2341.2345, 1350046324.1234); 
```

然后 testPoint.y 变为 1350046336.00 ，这不是我们放在那里的。我正在使用 Xcode 4.5。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:47:04.683

`CGPoint`定义在`CGGeometry.h`：

```
struct CGPoint {
  CGFloat x;
  CGFloat y;
}; 
```

在 32 位系统上`CGFloat`是. iPhone/iPad 是 32 位系统。最后一条信息 - C 中的数字（目标 C 是 C 的严格超集）：`typedef``float``float`

> C 中的浮点数使用 IEEE 754 编码。由于这种编码，您永远无法保证您的价值不会发生变化。

你可以在这里阅读整个讨论：[float vs. double precision](https://stackoverflow.com/questions/5098558/float-vs-double-precision)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T11:54:52.057

CGPoint 使用浮点（32 位）数据类型（至少在 iOS6 上）。

从标题：

```
CGPointMake(CGFloat x, CGFloat y) ... 
```

和

```
typedef CGFLOAT_TYPE CGFloat; 
```

和

```
# define CGFLOAT_TYPE float 
```

所以这导致我的测试代码：

```
CGPoint testPoint1 = CGPointMake(2341.2345, 1350046324.1234);
CGPoint testPoint2 = CGPointMake(2341.2345f, 1350046324.1234f);
double d = 1350046324.1234;
float f = 1350046324.1234;

NSLog(@"%f %f %f %f", testPoint1.y, testPoint2.y, d, f); 
```

打印到日志：

```
1350046336.000000 1350046336.000000 1350046324.123400 1350046336.000000 
```

所以你只是离开了单精度浮点数足够好的数字范围。就这样。

顺便说一句：在我偶然发现你的问题之前，我确实认为 CGFloat 是双倍的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T11:43:34.843

如果你写：

```
CGPoint testPoint = CGPointMake(2341.2345f, 1350046324.1234f); 
```

好点吗 ？

# ruby-on-rails - Rails 路由：将根定义到命名空间

> ID：12857996
> 
> 赞同：8
> 
> 时间：2012-10-12T11:23:55.700
> 
> 标签：ruby-on-rails, ruby, rails-routing

我有 2 个控制器：

```
app/
   /controllers
      posts_controllers.rb
      /mobile
         posts_controllers.rb 
```

我的 routes.rb 看起来像这样：

```
root :to => "posts#index"
resources :posts

namespace :mobile do
   root :to => "posts#index"
   resources :posts
end 
```

但是当我访问时`/mobile`，它无论如何都会呈现第一个控制器的索引页面，也试过这个：

```
namespace :mobile do
   root :to => "mobile/posts#index"
   resources :posts
end 
```

但它给了我错误：`uninitialized constant Mobile::Mobile` 我想渲染第二个控制器的索引页面，我该怎么做？

**编辑**

通过输入 /mobile 我想呈现位于此处的文件：

```
app/
   views/
       /mobile
          /posts
             index.html.erb 
```

但它在这里渲染文件：

```
app/
   views/
       /posts
          index.html.erb 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-06-08T17:09:02.733

```
namespace :mobile do
   root :to => "posts#index"
   resources :posts
end

root :to => "posts#index"
resources :posts 
```

代替

```
root :to => "posts#index"
resources :posts

namespace :mobile do
   root :to => "posts#index"
   resources :posts
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-12T11:31:46.827

```
namespace :mobile do
   get "/" => "posts#index"
   resources :posts
end 
```

使用命名空间已经将*mobile*添加到该块内的控制器名称之前。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-23T11:45:18.040

```
Rails.application.routes.draw do

 root to: 'front/homes#index'

 namespace :front do
  resources :homes
 end 

 namespace :admin do 
  resources :interviews 
 end

 resources :meetings do 
  resources :slides
 end

end 
```

在**rails5 中**它可以工作。

# c++ - 没有调试符号的程序崩溃，运行良好（在任何一种情况下都没有优化或任何东西）

> ID：12857998
> 
> 赞同：1
> 
> 时间：2012-10-12T11:24:01.690
> 
> 标签：c++, debugging, visual-c++, crash

我遇到了一个非常令人费解的崩溃，并且在我的程序中无法跟踪它。

我不知道它的来源在哪里，因为每当我尝试与`/debug`标志链接以使用调试符号进行调试时，崩溃就会消失！

这似乎与优化无关（我已经编译`/Od`为禁用编译器优化，并且我**没有**使用链接时代码生成）并且也与调试信息本身无关（我正在编译`/Zi`）。出于某种原因，当在没有`/debug`标志的情况下调用链接器时，一切都会有所不同。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T11:24:01.690

事实证明，罪魁祸首是链接器**合并了`static const int`字段**。

显然，如果您有多个`static const`相同类型和值的字段，链接器将合并它们，但前提是您不链接调试符号。

我使用这些字段的地址来区分它们，结果发现它们对于链接器来说都是一样的，因此对于其余的代码来说也是一样的。

我是怎么想出来的？
**大量**的`print`语句（小时）使我意识到正在执行错误的代码，直到我终于意识到原因。