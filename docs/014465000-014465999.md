# StackOverflow 问答 14465000-14465999

# ruby-on-rails - 使用 rake db:seed 任务在 Spree::BilllingIntergration 中预配置支付网关

> ID：14465003
> 
> 赞同：0
> 
> 时间：2013-01-22T17:56:22.643
> 
> 标签：ruby-on-rails, spree, spree-paypal-express

上帝的日子，

我对所有这些 RoR 东西都很陌生，我正在建立 Spree 商店。

我正在尝试根据使用 seedbank gem 的环境预先配置我的商店。我不知道如何预配置 Spree::BillingIntergration::PaypalExpress 网关。

如果我启动“rails console”并运行，我可以输出所有配置

```
Spree::BillingIntegration::PaypalExpress.find_by_id(1).options 
```

这是一个代码： [https ://github.com/spree/spree_paypal_express](https://github.com/spree/spree_paypal_express)

但是这些值不存储在数据库中。如何使用“rake db:seed”预先填充这些选项？

提前致谢。

环境：rails -v = 3.2.11

ruby -v = ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin11.4.0]

狂欢-v = 1.3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T14:26:55.837

您可以将以下代码添加到 db/seeds.rb （或其他文件，如果有更高级的结构）：

```
Spree::BillingIntegration::PaypalExpress.create!(
    name: 'Paypal (or whatever you want)',
    description: '',
    active: true,
    environment: Rails.env,
    display_on: '',
    preferred_currency: '<fill_here>',
    preferred_login: '<fill_here>',
    preferred_password: '<fill_here>',
    preferred_signature: '<fill_here>',
    preferred_review: false,
    preferred_no_shipping: false,
    preferred_cart_checkout: true,
    preferred_allow_guest_checkout: false,
    preferred_server: 'test',
    preferred_test_mode: true
) 
```

如您所见，所有选项都带有`preferred`前缀。

# r - 频率分布的中位数

> ID：14465004
> 
> 赞同：2
> 
> 时间：2013-01-22T17:56:23.203
> 
> 标签：r, median, frequency-distribution

我想计算大量样本的频率分布的中位数。每个样本都有多个类别（示例中为 3 个）及其各自的频率。每个类都与不同的值相关联

```
data <- data.frame(sample=c(1,2,3,4,5), 
                   freq_class1=c(1,1,59,10,2), 
                   freq_class2=c(1,0,35,44,22), 
                   freq_class3=c(0,4,1,9,2), 
                   value_class1=c(12,11,14,11,13), 
                   value_class2=c(27,33,34,31,29), 
                   value_class3=c(75,78,88,81,65)) 
```

例如，样本 1 的中位数为 19.5。我假设这可以使用`quantile()`每个样本的频率分布来完成，但所有尝试都失败了。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:03:52.607

这可能不是最优雅的方式，但它确实有效：基本上，我正在根据 data.frame 中包含的信息重新创建完整的数据向量，然后找到其中值。编写一个函数来完成它让我`apply`可以快速地对 data.frame 的每一行执行它。

```
find.median <- function(x) {
  full.x <- rep(x[5:7],times=x[2:4])
  return(median(full.x))
}

> apply(data,1,find.median)
[1] 19.5 78.0 14.0 31.0 29.0 
```

# jquery - jQuery Mobile 面板 - 检查它是否打开

> ID：14465005
> 
> 赞同：6
> 
> 时间：2013-01-22T17:56:23.617
> 
> 标签：jquery, mobile, panel

我正在尝试检查我的面板是打开还是关闭。

我试过这样：

```
$(document).on('open', '.ui-panel', function(){
   console.log('open');     
}) 
```

但什么也没发生。

如何为 jQ 移动面板设置事件侦听器？

Open 不是问题，因为我只会添加`.panel('open')`到按钮 click 然后`console.log()`，但是 close 呢？当我点击外部时面板会关闭，如何捕捉那个时刻？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-14T22:10:47.470

您需要检查面板是使用打开还是关闭`hasClass`

```
if( $(".ui-panel").hasClass("ui-panel-open") == true ){
   alert("OPENED");
}else{
   alert("CLOSED");
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T16:52:36.873

好的，我发现了这个：

[http://api.jquerymobile.com/panel/#event-beforeclose](http://api.jquerymobile.com/panel/#event-beforeclose)

所以我需要的是：

```
$( ".selector" ).on( "panelbeforeclose", function( event, ui ) {} ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-03T18:36:22.257

```
$(document).bind('panelopen', function (e, data) {
        $('body').css("overflow", "hidden");
    });

    $(document).bind('panelclose', function (e, data) {
        $('body').css("overflow", "auto");
    }); 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-13T00:20:25.517

我这样使用：

```
if ($("#id").find("div").css("visibility") == "hidden") {
    alert("Closed");
} else {
    alert("Opened");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-08T07:43:31.987

*现在*检查一下，我使用了以下代码。

```
function isSideNavVisible() {
    var sidenav = $("#sidenav");
    var sideNavHidden = sidenav.css("visibility") == "hidden" || sidenav.css("overflow-x") == "hidden" || sidenav.css("overflow-y") == "hidden";
    return !sideNavHidden;
} 
```

如果可以的话，我更愿意绑定到已接受答案中显示的事件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-26T03:20:30.950

```
 function OpenPanel(panel) {
    if ( $( ".ui-page-active" ).jqmData( "panel" ) !== "open" ) {
        $(panel).panel("open");

    }else{
        $(panel).panel("close");
     }
} 
```

用法：

```
<div onclick='OpenPanel("#ui-panel1");'>Click Here</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-22T21:52:36.483

我想你可能想要 pagebeforehide 或 pagehide 事件。

[有关 jquerymobile 事件信息，请参见此处](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-02T23:55:42.720

CSS JQM 应用于面板明确指示其状态。这是一个非常简单的香草 JS 解决方案：

```
1 var document.getElementById("name-of-panel") = my_panel;
2 my_panel.classList.contains("ui-panel-open"); 
```

第 2 行如果打开则返回“true”，否则返回“false”。下一个开发者（或几个月后的你自己）也更容易弄清楚你在做什么。

# c# - 如何在 asp.net 中缓存数据存储库？

> ID：14465006
> 
> 赞同：2
> 
> 时间：2013-01-22T17:56:33.130
> 
> 标签：c#, asp.net

我只是想知道如何缓存我的数据存储库我的意思是我的项目中有一些数据存储库它们非常有用，我必须多次调用它们的方法，所以我需要一些工具或模式来将它们缓存在客户端上以避免获得额外的和重复查询。

```
<asp:DropDownList ID="Dropdownlist1" runat="server" DataTextField="DataTextField" DataValueField="Key">
</asp:DropDownList>

Dropdownlist1.DataSource = dbContext.EntityTest1;
Dropdownlist1.DataBind(); 
```

每当我使用此控件时，对于每个正在运行的页面或 Web 应用程序，它都会生成一个可执行的 linq 查询并从 sql server 缓存数据，然后将它们传输到客户端，但实际上这是不必要的。

我认为 sql server 和应用程序之间有两个不同的缓存服务器端，以避免额外的获取数据。我的应用程序和客户端之间的第二个缓存客户端。

缓存的最佳解决方案是什么？是否有任何示例项目来解释它们？

# java - 如何从 ResourceBundle 切换到 Properties（类）？

> ID：14465007
> 
> 赞同：0
> 
> 时间：2013-01-22T17:56:33.617
> 
> 标签：java, properties, resourcebundle

如何从 ResourceBundle 切换到 Properties（类）？

我有一个应用程序分为 2 个 Java 项目（核心和网络）。核心模块中的 Java 服务必须从位于 Web 模块中的 .properties 文件中读取值。当我使用 ResourceBundle 时，它​​按预期工作。

我想切换到 Properties 类有几个原因（特别是因为 ResourceBundle 被缓存了，我不想实现 ResourceBundle.Control 没有缓存）。不幸的是，我无法让它工作，特别是因为我找不到要使用的正确相对路径。

我阅读了反编译的 ResourceBundle 类（等），并注意到在某些 ClassLoader 上使用了 getResource()。因此，我没有直接使用 FileInputStream，而是在 ServiceImpl.class 或 ResourceBundle.class 上使用 getResource() 或简单地 getResourceAsStream() 进行测试，但仍然没有成功......

有人知道如何完成这项工作吗？谢谢！

这是我的应用程序核心，服务获取属性值：

```
app-core
    src/main/java
        com.my.company.impl.ServiceImpl

            public void someRun() {
                String myProperty = null;
                myProperty = getPropertyRB("foo.bar.key"); // I get what I want
                myProperty = getPropertyP("foo.bar.key"); // not here...
            }

            private String getPropertyRB(String key) {
                ResourceBundle bundle = ResourceBundle.getBundle("properties/app-info");
                String property = null;
                try {
                    property = bundle.getString(key);
                } catch (MissingResourceException mre) {
                    // ...
                }
                return property;
            }

            private String getPropertyP(String key) {
                Properties properties = new Properties();

                InputStream inputStream = new FileInputStream("properties/app-info.properties"); // Seems like the path isn't the good one
                properties.load(inputStream);
                // ... didn't include all the try/catch stuff

                return properties.getProperty(key);
            } 
```

这是属性文件所在的 Web 模块：

```
app-web
    src/main/resources
        /properties
            app-info.properties 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:21:56.300

您应该使用`getResource()`或`getResourceAsStream()`使用正确的路径和类加载器。

> InputStream inputStream = getClass().getClassLoader().getResourceAsStream("properties/app-info.properties");

确保文件名为`app-info.properties`，而不是（当上下文匹配时）`app-info_en.properties`找到的文件，而不是.`ResourceBundle``getResourceAsStream()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T18:22:21.510

您不应该尝试从文件系统中读取属性。更改获取属性的方法以从资源流中加载它们。伪代码：

```
private String getPropertyP(final String key) {
    final Properties properties = new Properties();

    final InputStream inputStream = Thread.currentThread().getContextClassLoader()
       .getResourceAsStream("properties/app-info.properties");
    properties.load(inputStream);

    return properties.getProperty(key);
} 
```

# mysql - 使用 LIMIT 和 JOIN

> ID：14465008
> 
> 赞同：0
> 
> 时间：2013-01-22T17:56:35.333
> 
> 标签：mysql

我有两张桌子：乐队和专辑。这是结构

乐队：id_band 名称

专辑 id_album id_band 名称

所以，我需要一个查询来显示最后插入乐队的所有专辑。

我试试这个：

```
SELECT bands.name, albums.name
FROM bands
JOIN albums ON albums.id_band = bands.id_band
ORDER BY bands.id_band DESC
LIMIT 1 
```

但我只得到第一张专辑。并非最后插入乐队的所有专辑。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:59:04.833

```
SELECT b.name, a.name
FROM (SELECT name, id_band
    FROM bands
    ORDER BY id_band DESC
    LIMIT 1) AS b
JOIN albums a ON a.id_band = b.id_band 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:51:42.287

询问：

```
SELECT b.name,
       a.name
FROM bands b
JOIN albums a ON a.id_band = b.id_band
WHERE b.id_band = (SELECT max(id_band)
                   FROM bands) 
```

# sql - 年龄计算查询

> ID：14465010
> 
> 赞同：0
> 
> 时间：2013-01-22T17:56:47.253
> 
> 标签：sql, sql-server

> **可能重复：如何在 T-SQL 中**[计算年龄，使用 SQL Server 从 sysdate 和birthdate 计算年龄](https://stackoverflow.com/questions/13161401/calculating-age-from-sysdate-and-birthdate-using-sql-server)
> [、月份和天数](https://stackoverflow.com/questions/57599/how-to-calculate-age-in-t-sql-with-years-months-and-days)

在一些年龄计算的过程中。在谈到 SQL 时，我有点新手，但我的任务是挑选出`65yrs`从`31 March 2013`. 到目前为止，我能够根据给定的年龄计算年龄`DOB`，但是我在挑选这些人时遇到了问题。我认为这是一个简单的问题，但我很难过，请参阅 sql 语句。有人可以指出我正确的方向。

```
SELECT ip_master.ssn, ip_master.firstname, ip_master.surname, ip_master.status,

CASE WHEN DATEADD(YEAR, DATEDIFF (YEAR, dob, '2013/03/31'), dob) > '2013/03/31'
THEN DATEDIFF(YEAR, dob, '2013/03/31') - 1
ELSE DATEDIFF(YEAR, dob, '2013/03/31')
END AS 'Age'

FROM test_db.dbo.ip_master ip_master 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:02:54.940

将 WHERE 子句附加到您的语句中：

```
...
WHERE dob = '1948-03-31' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:02:54.117

以下会做吗？我只是将您的查询隐藏在另一个查询中并应用了年龄限制。

```
select * from
(
SELECT ip_master.ssn, ip_master.firstname, ip_master.surname, ip_master.status,

CASE WHEN DATEADD(YEAR, DATEDIFF (YEAR, dob, '2013/03/31'), dob) > '2013/03/31'
THEN DATEDIFF(YEAR, dob, '2013/03/31') - 1
ELSE DATEDIFF(YEAR, dob, '2013/03/31')
END AS 'Age'

FROM test_db.dbo.ip_master ip_master
)
where Age >= 65 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:03:07.467

你所做的一切都是正确的。为了挑出你需要一个 where 子句。

```
SELECT ip_master.ssn, ip_master.firstname, ip_master.surname, ip_master.status,

CASE WHEN DATEADD(YEAR, DATEDIFF (YEAR, dob, '2013/03/31'), dob) > '2013/03/31'
THEN DATEDIFF(YEAR, dob, '2013/03/31') - 1
ELSE DATEDIFF(YEAR, dob, '2013/03/31')
END AS 'Age'
FROM test_db.dbo.ip_master ip_master
WHERE dob = '1948-03-31' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T18:20:49.017

试试下面的查询......它会完美地工作......

```
 DECLARE @CalDate datetime;
   DECLARE @CurDate datetime;
   Declare @count INT   

   SET @CalDate ='03/31/2013'
   SET @count =0
   SELECT @CurDate = DateAdd(Month, 1, @CalDate)

   SET @count = @count + datepart(dd,dateadd(dd,-1,dateadd(mm,1,cast(cast(year(@CurDate) as varchar)+'-'+cast(month(@CurDate) as varchar)+'-01' as datetime))))      

   SELECT ip_master.ssn, ip_master.firstname, ip_master.surname, ip_master.status,DATEDIFF (yy, DOB, cast(@CalDate as DateTime) + @count) - (        
    CASE SIGN (MONTH (DOB) - MONTH (cast(@CalDate as DateTime) + @count))        
     WHEN 1 THEN        
      1        
     WHEN -1 THEN         
      0         
     WHEN 0 THEN         
      CASE SIGN (DAY (DOB) - DAY (@CalDate + @count))        
       WHEN 1 THEN         
        1        
       WHEN 0 THEN        
        1       
       ELSE        
        0        
      END        
    END) as AGE into #temp
    FROM test_db.dbo.ip_master ip_master 

select * from #temp where  AGE >= 65 
```

# php - 在php文件中插入html代码

> ID：14465013
> 
> 赞同：1
> 
> 时间：2013-01-22T17:56:53.717
> 
> 标签：php

我有一个文件，contact.php。我希望它在评估 cookie 变量时显示联系表格。代码如下所示：

```
<?php if (isset($_COOKIE['a12cookie']) { ?>

<table width="400" border="0" align="center" cellpadding="3" cellspacing="1">
<tr>
<td><strong>Contact Form </strong></td>
</tr>
</table>

<table width="400" border="0" align="center" cellpadding="0" cellspacing="1">
<tr>
<td><form name="form1" method="post" action="send_contact.php">
<table width="100%" border="0" cellspacing="1" cellpadding="3">
<tr>
<td width="16%">Subject</td>
<td width="2%">:</td>
<td width="82%"><input name="subject" type="text" id="subject" size="50"></td>
</tr>
<tr>
<td>Detail</td>
<td>:</td>
<td><textarea name="detail" cols="50" rows="4" id="detail"></textarea></td>
</tr>
<tr>
<td>Name</td>
<td>:</td>
<td><input name="name" type="text" id="name" size="50"></td>
</tr>
<tr>
<td>Email</td>
<td>:</td>
<td><input name="customer_mail" type="text" id="customer_mail" size="50"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Submit"> <input type="reset"         name="Submit2" value="Reset"></td>
</tr>
</table>
</form>
</td>
</tr>
</table>

<?php }> 
```

我收到以下错误：

```
Parse error: syntax error, unexpected '{' in /home/looksr5/public_html/contact.php on line 1 
```

如果这是一个明显的错误，我深表歉意，因为我对 php 还是新手。我也使用它而不是回显每一个 HTML 行。请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T17:57:34.367

```
<?php if (isset($_COOKIE['a12cookie']) { ?> 
```

应该

```
<?php if (isset($_COOKIE['a12cookie'])) { ?> 
```

即你错过了`)`之前的第二个`{`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T18:03:05.483

首先，我很高兴您实际上是在打开错误显示的情况下进行开发的。许多新开发人员可能会花费数小时试图找出一个问题，该问题本可以在显示错误消息的情况下在几分钟或几秒钟内解决。

其次，您应该开始了解错误消息。通常，您会发现他们的意思与他们所说的完全一致，并且会为您提供有关如何解决错误的非常好的提示。在这种情况下，消息表明解析器遇到了一个它没有预料到的左括号，并告诉您发生问题的确切代码行 - 您的第一行代码。这意味着这应该是您应该首先查看的地方。

通常会出现这种消息，因为您没有正确关闭括号或前面的括号，这里的情况是您没有关闭括号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T17:57:49.833

你忘`)`了这里`<?php if (isset($_COOKIE['a12cookie']) { ?>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T18:00:08.607

并且不要忘记`?>`文件末尾的关闭（你没有问号）

# sql-server - 在sql server中解析xml

> ID：14465015
> 
> 赞同：2
> 
> 时间：2013-01-22T17:57:00.390
> 
> 标签：sql-server, xml, xml-parsing

我有一个包含 xml 的 ntext 类型列的表。我尝试应用许多示例来说明如何从特定节点的 xml 中提取公司名称的值，但仍然出现语法错误。下面是我所做的，除了用我的 select 语句替换了实际的 xml 输出

```
DECLARE @companyxml xml

    SET @companyxml = 
    '<Home>
      <slideshowImage1>1105</slideshowImage1>
      <slideshowImage2>1106</slideshowImage2>
      <slideshowImage3>1107</slideshowImage3>
      <slideshowImage4>1108</slideshowImage4>
      <slideshowImage5>1109</slideshowImage5>
      <bottomNavImg1>1155</bottomNavImg1>
      <bottomNavImg2>1156</bottomNavImg2>
      <bottomNavImg3>1157</bottomNavImg3>
      <pageTitle>Acme Capital Management |Homepage</pageTitle>
      <metaKeywords><![CDATA[]]></metaKeywords>
      <metaDescription><![CDATA[]]></metaDescription>
      <companyName>Acme Capital Management</companyName>
      <logoImg>1110</logoImg>
      <pageHeader></pageHeader>
    </Home>'

SELECT c.value ('companyName','varchar(1000)') AS companyname 
FROM @companyxml.nodes('/Home') AS c 
```

出于某种原因，select c.value 语句存在我无法弄清楚的语法问题。在 SSMS 中悬停时，它说“找不到列“c”或用户定义的函数或聚合“c.value”，或者名称不明确。

任何有关语法的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:17:46.300

试试这个

```
 DECLARE @companyxml xml

SET @companyxml = 
'<Home>
  <slideshowImage1>1105</slideshowImage1>
  <slideshowImage2>1106</slideshowImage2>
  <slideshowImage3>1107</slideshowImage3>
  <slideshowImage4>1108</slideshowImage4>
  <slideshowImage5>1109</slideshowImage5>
  <bottomNavImg1>1155</bottomNavImg1>
  <bottomNavImg2>1156</bottomNavImg2>
  <bottomNavImg3>1157</bottomNavImg3>
  <pageTitle>Acme Capital Management Homepage</pageTitle>
  <metaKeywords>CDATA</metaKeywords>
  <metaDescription>CDATA</metaDescription>
  <companyName>Acme Capital Management</companyName>
  <logoImg>1110</logoImg>
  <pageHeader></pageHeader>
</Home>'

DECLARE @Result AS varchar(50)

SET @result = @companyxml.value('(/Home/companyName/text())[1]','varchar(50)')

SELECT @result 
```

# html - 为 pdf 输出调整 html 复选框的大小

> ID：14465017
> 
> 赞同：1
> 
> 时间：2013-01-22T17:57:06.613
> 
> 标签：html, css, pdf, wkhtmltopdf

这里是泡菜。要在 html 中调整复选框的大小，通常建议您使用 js 强制浏览器调整元素的大小。

但是，在我们的例子中，我们使用的是 wkhtmltopdf（一个命令行转换器，它利用 webkit 创建 html 输出，然后转换为 PDF），据我所知，它不执行 js。

在这种情况下，我们仍然需要缩小一些复选框和单选按钮（实际上，'some' 是错误的——一大堆！）

这样做的可能方法是什么，如果有多个，最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-05T17:31:59.900

我知道这是一个很老的线程，但是我遇到了同样的问题并且在任何地方都没有找到正确的答案，所以我想帮助其他有类似问题的人。我正在处理 mdpf 生成的 pdf 中复选框的大小。唯一有效的是字体大小。尝试类似：

```
<input type='checkbox' style='font-size: 20pt;'> 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:02:28.137

您是否尝试设置打印样式表以查看它是否会影响输出？

```
@media print { /* css code */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:15:19.947

您是否尝试过使用 CSS 来更改它们的大小？这在基于 webkit 的浏览器 Chrome 中运行良好。

```
input.big{
  height: 2em;
  width: 2em;
}

input.small{
  height: 0.5em;
  width: 0.5em;    
}

<input type="checkbox" id="small" class="small"/><label for="small">Small</label>
<input type="checkbox" id="big" class="big"/><label for="big">Big</label> 
```

[http://jsfiddle.net/Q8AzW/](http://jsfiddle.net/Q8AzW/)

# java - 如何使用谷歌应用引擎绘制图像？

> ID：14465018
> 
> 赞同：0
> 
> 时间：2013-01-22T17:57:11.740
> 
> 标签：java, google-app-engine

我想根据我的谷歌应用引擎数据存储的内容创建一个图像，但我不知道如何使用谷歌图像服务来执行此操作。

Image 有一个方法“setData”，但它需要一个 byte[]，我不知道如何构建这个 byte[]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:23:25.660

我终于找到了这个项目[http://code.google.com/p/pngj/](http://code.google.com/p/pngj/)完全符合我的需要。

# html - 窗口尺寸小（比页面窄）页面结构出错

> ID：14465019
> 
> 赞同：0
> 
> 时间：2013-01-22T17:57:12.553
> 
> 标签：html, css, background, size, width

这是我的标题：

```
<head>
<link href="/css/header.css" rel="stylesheet" type="text/css">
</head>

<body>

<div id="background"><img src="/multi/background.jpg" width="100%" height="100%" alt=""></div>

<div id="content">

<div align="center" class="headtable">
    <table width="980" border="0" height="40">
        <tr>
            <td width="503" rowspan="2" height="35" align="left" valign="middle"><a href="/index.php"><img src="/multi/header.png" width="344" height="32" hspace="0" border="0"/></a></td>

            <td width="424" align="right" valign="top">
                <a href="/index.php" class="headlink">Italiano</a>  
                <span class="headlink">|</span>   
                <a href="/ger/index.php" class="headlink">Deutsch</a>  
                <span class="headlink">|</span>   
                <a href="/fra/index.php" class="headlink">Français</a>  
                <span class="headlink">|</span>   
                <a href="/index.php" class="headlink">Home</a>
                <span class="headlink">|</span>   
                <a href="#" onClick="window.print();" class="headlink">Stampa Pagina</a>
      </tr>
    </table>
</div>

<div class="buttontable">
<table width="1080" border="0" cellpadding="0" align="center">
    <tr>
        <td height="20" align="center"> 

        <a class="button" href="/o.php">o</a>
        <a class="button" href="/p.php">p</a>
        <a class="button" href="/a.php">a</a>
        <a class="button" href="/s.php">s</a>
        <a class="button" href="/st.php">st</a>
        <a class="button" href="/p.php">p</a>
        <a class="button" href="/t.php">t</a>
        <a class="button" href="/c.php">c</a>
       </td>
    </tr>
</table>
</div>
</div>
</body> 
```

和css文件：

```
/* pushes the page to the full capacity of the viewing area */
html {
    height:100%;
}
body {
    height:100%;
    margin:0;
    padding:0;
}
/* prepares the background image to full capacity of the viewing area */
#background {
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
}
/* places the content ontop of the background image */
#content {
    position:relative; z-index:1;
}

/* not apply if IE6 or lower */
* html {
  background-color: #6f6;
}
* body {
    height:100%;
    margin:0;
    padding:0;
}
* #background {
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
}
* #content {
    position:relative; z-index:1;
}
/* END not apply if IE6 or lower */

.headtable {
    background-color:#02346F;
}

.headlink {
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px;
    text-decoration:none;
    color:#d8dfea;
}

.buttontable {
    background-color:#F00;
}

a.button {
    display:inline-block;
    color:#FFF;
    font-family:Calibri;
    font-size:18px;
    font-weight:bold;
    padding:2px 16px;
    text-decoration:none;
    font-variant:small-caps;
}a.button:hover {
    background-color:#F00;
    color:#02346F;
    padding:2px 16px;
    font-size:18px;
    font-weight:bolder;
}

a.buttonselect {
    background-color:#ffffff;
    display:inline-block;
    color:#02346F;
    font-family:Calibri;
    font-size:18px;
    font-weight:bold;
    padding:2px 16px;
    text-decoration:none;
    font-variant:small-caps;
} 
```

现在，当窗口大小比页面（header.php）窄时，表格正在成为背景（我不知道你是否理解我的意思，但我无法解释......）

我得到的第一个解决方案是将 CSS 中的正文宽度大小设置为例如 1000 像素，但随后我将所有页面都对齐了。

我怎么解决这个问题？问题不是来自背景图像，因为我在没有背景的情况下也测试了所有...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:08:23.390

这是因为您的表格是固定宽度，而您的容器是可变宽度。当视口比固定宽度窄时，表格会跳转。此外，如果您想将 div 与表格居中，请使用 CSS 而不是内联样式。

```
.headtable
{
background-color:#02346F;
width:65% /* arbitrary width, use your own discretion */
margin: 0 auto;
} 
```

由于您使用这些表格进行导航，因此我建议您改用无序列表。

这是我用作启动菜单的基础的站点。对于你的代码来说，它在语义上更好，并且使用 CSS 比具有固定宽度的表格更容易控制。

[http://css.maxdesign.com.au/listamatic/index.htm](http://css.maxdesign.com.au/listamatic/index.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:44:26.717

如果可以的话，对您的代码提出一些建设性的意见。

*   您不应该在布局中使用表格。尝试使用语义正确的 html 标签。您的导航是链接列表，因此它应该是`<ul>`
*   尝试将您的内容和样式分开。这样，使您的代码保持最新状态要容易得多。您也可以通过加载不同的样式表来为您的网站提供完全不同的外观。它使更改内容变得更加容易，因为您总是知道在哪里寻找它们。

因为仅仅给出评论会很容易，所以我会给你一个例子，如果我必须编写它，你的 HTML 会是什么样子：

```
<body>

  <div id="wrapper">

    <div id="header">

       <a id="logo" href="/index.php" alt="company logo"><img src="/multi/header.png"/></a>

       <ul id="main-nav">
           <li><a href="/index.php">Italiano</a></li>    
           <li><a href="/ger/index.php" class="headlink">Deutsch</a></li>  
           ...    
       </ul>

       <div class="clear"></div>

    </div>
  </div>
  ... 
```

为了比较，这里是你的小提琴代码：http: [//jsfiddle.net/ERghQ/](http://jsfiddle.net/ERghQ/)
这是我的小提琴代码：http: [//jsfiddle.net/JChZT/](http://jsfiddle.net/JChZT/)

请注意，我还添加了一些快速 CSS 来模仿您在示例中的样式。请注意，现在解决了宽度问题，因为我使用浮点数和 div，而不是表格和固定宽度。使用窗口的大小，您会注意到内容会适应。

再一次，我并不是要分解你的工作，我只是想帮助你并向你展示当今的事情是如何完成的。一开始可能需要一些时间来适应，但您很快就会看到优势。让我知道我的代码是否需要更多解释。希望我能帮助您指出正确的方向！

**编辑：**
该类 的空`div`用于`.clear`解决所谓的 clearfix 问题。大多数浏览器不会给您的标题任何高度，从而使其不可见，因为*所有直接子级都是浮动的*。（在小提琴中删除它，你会明白我的意思。）有很多方法可以解决这个问题，你会发现如果你谷歌 clearfix。我使用的方法可能不是最好的，因为它要求您在内容中添加一个空 div 仅用于布局，这与我自己的主张相悖，即您应该始终将内容和样式分开，但这是一种快速简便的方法. 我建议您在谷歌上搜索一个适当的`.clearfix`类并将该类应用于您的标题（以及任何其他需要清除的容器）。

# android - 为 Android 扩展/修改 Sencha Touch 2 原生封装

> ID：14465021
> 
> 赞同：0
> 
> 时间：2013-01-22T17:57:23.220
> 
> 标签：android, sencha-touch, native

如何修改和扩展适用于 Android 的 Sencha Touch 2 Native Packaging（参见[http://docs.sencha.com/touch/2-0/#!/guide/native_android](http://docs.sencha.com/touch/2-0/#!/guide/native_android)）？我想向 Android 项目添加推送功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:29:04.237

IMO，您应该使用cordova（phonegap）。有了它，您将获得插件以在您的应用程序中添加推送。据我所知，您无法将 PUSH 与 Sencha Touch 本身一起使用。要使用 Push，您必须有一个设备 ID。Sencha 不能给你这个（除非你设法从 javascript 调用你的活动中的函数）。此外，您需要设置广播接收器来收听传入的推送消息。基本上，使用 Push 涉及大量待办事项，因此您不能简单地自动化该工作并让原生打包来完成。

考虑到将花费的时间和精力（如果可能的话），修改/扩展 sencha 工具的原生打包并不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:38:00.040

您应该查看[http://www.pubnub.com/](http://www.pubnub.com/)他们有 Javascript 客户端来监听队列，并且一旦推送消息，您就可以使用它来执行您想要的任何内容。

# mysql - symfony parameters.yml 中的外部数据库 ssh 连接

> ID：14465023
> 
> 赞同：2
> 
> 时间：2013-01-22T17:57:25.777
> 
> 标签：mysql, symfony, ssh

有人在他们的 symfony 应用程序中设置了到外部 mysql 数据库的连接，只能通过 SSH 访问？这可以在parameters.yml中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:07:41.773

您必须打开一个 SSH 隧道。请参阅[我可以使用 GUI 工具通过 SSH 连接到 MySQL 吗？](https://stackoverflow.com/questions/859218/can-i-ssh-to-mysql-with-the-gui-tools)或[通过 SSH 远程访问您的 MySQL 服务器](http://www.howtogeek.com/howto/ubuntu/access-your-mysql-server-remotely-over-ssh/)。

对于 parameters.yml 这看起来像一个本地 MySql 服务器，这意味着没有什么特别的。

# mysql - Mysql UPDATE基于SELECT中的最小值

> ID：14465025
> 
> 赞同：-2
> 
> 时间：2013-01-22T17:57:32.353
> 
> 标签：mysql, sql-update, inner-join

我有以下Mysql结构：

*   `jss_products`
    *   `productID`
    *   `price1`
*   `jss_extrafields_values`
    *   `exvalID`
    *   `productID`
    *   `extraFieldID`
*   `jss_extrafields_prices`
    *   `exvalID`
    *   `price1`

每个产品都有一些额外字段。我感兴趣的是`extraFieldID = 1`

我希望使用`price1`. 我有以下查询，但它只更新每个产品的第一个条目，而不是所有条目。`jss_extrafields_prices``jss_products.price1``jss_extrafields_price`

我正在尝试将价格标准化，`jss_extrafields_prices`以便对于价格为 的产品`20.00`，每个相关条目都`jss_extrafields_prices`变为`CURRENTPRICE - 20`。

那有意义吗？这是我到目前为止所拥有的

```
UPDATE jss_extrafields_prices AS JEP
INNER JOIN (
    SELECT P.productID, P.price1 AS P1, EP.price1, EP.exvalID FROM jss_products AS P
    INNER JOIN jss_extrafields_values AS EV
    ON P.productID = EV.productID
    INNER JOIN jss_extrafields_prices AS EP
    ON EV.exvalID = EP.exvalID
    WHERE EV.extraFieldID = 1
    GROUP BY P.productID
    ORDER BY P.productID DESC, EP.price1 DESC
) AS X
ON JEP.exvalID = X.exvalID
SET JEP.price1 = JEP.price1 - X.P1 
```

我希望内部查询返回如下内容： `productID = 1090` `P1 = 20.8333333` `price1 = 20.8333333` `exvalID = 3236`

知道`productID`1090 有 3 个定价选项，其基本价格是`20.83333`，然后我想将每个匹配的产品更新`jss_extrafields_prices`为当前价格减去基本价格。

这有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:02:17.090

剥离了一些以前类过于本地化的信息，这简化为带有 INNER JOIN 的 UPDATE：

```
UPDATE jss_extrafields_prices 
INNER JOIN (
    SELECT P.productID, P.price1 AS baseprice, JEP.price1 AS optionprice, JEP.exvalID, (JEP.price1 - P.price1) AS adjustedprice FROM jss_products AS P
    INNER JOIN jss_extrafields_values AS JEV
    ON P.productID = JEV.productID
    INNER JOIN jss_extrafields_prices AS JEP
    ON JEV.exvalID = JEP.exvalID
    WHERE JEV.extraFieldID = 1
) AS X
ON jss_extrafields_prices.exvalID = X.exvalID
SET jss_extrafields_prices.price1 = X.adjustedprice 
```

# firefox-addon - 在 Firefox 扩展首选项中设置键盘快捷键

> ID：14465027
> 
> 赞同：1
> 
> 时间：2013-01-22T17:57:42.407
> 
> 标签：firefox-addon

我开发了一个使用键盘快捷键的 Firefox 扩展。这就是我现在在我的主 XUL 文件中实现它们的方式。

```
<keyset>
    <key id="myExtension-key-1" modifiers="alt" keycode="VK_RIGHT" oncommand="myExtension(event);"/>
</keyset> 
```

这可行，但我想让用户在扩展首选项中选择自己的键盘快捷键（包括修饰键）。我已经有了 options.xul 并且对如何在我的扩展中使用首选项有了基本的了解。

我已经搜索过，但还没有真正找到关于这个主题的任何内容。非常感谢任何正确方向的指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T18:31:11.283

下面是一些键盘快捷键扩展开发的参考：

*   [pref-keys.js](http://svn.openkomodo.com/openkomodo/view/openkomodo/trunk/src/chrome/komodo/content/pref/pref-keys.js)
*   [pref-keys.p.xul](http://svn.openkomodo.com/openkomodo/view/openkomodo/trunk/src/chrome/komodo/content/pref/pref-keys.p.xul)
*   [键绑定.p.xml](http://svn.openkomodo.com/openkomodo/view/openkomodo/trunk/src/chrome/komodo/content/keybindings/keybindings.p.xml)
*   [键绑定.p.js](http://svn.openkomodo.com/openkomodo/view/openkomodo/trunk/src/chrome/komodo/content/keybindings/keybindings.p.js)

# javascript - 是否可以扩展私有功能？

> ID：14465031
> 
> 赞同：1
> 
> 时间：2013-01-22T17:57:51.437
> 
> 标签：javascript, jquery, inheritance, extend

我想覆盖灯箱库的私有功能。

这是其代码的一部分：

```
$.fn.lightBox = function(settings) {

    var jQueryMatchedObj = this; // This, in this context, refer to jQuery object

    function _set_interface()
    {
        //....
    }

    function _start(objClicked,jQueryMatchedObj) {
        //...
        _set_interface();
        //...
    }

    function _initialize() {
    _start(this,jQueryMatchedObj);
        return false;
    }

    return this.unbind('click').click(_initialize);
} 
```

我需要覆盖 _set_interface 函数。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:59:27.183

不，这是不可能的......

您无权访问该插件的私有范围。

其中（@crush 在下面的评论中说）是私有函数（或范围）的全部要点。

# tomcat - Tomcat 7 的自定义 context.xml 文件从 NetBeans 7 运行

> ID：14465038
> 
> 赞同：5
> 
> 时间：2013-01-22T17:59:00.600
> 
> 标签：tomcat, netbeans, deployment, tomcat7, netbeans-7

我试图避免将密码放入版本控制文件和打包文件中。为了做到这一点，我的项目中不能有 context.xml（其中包含我的数据库信息）。

我目前正在使用 Tomcat 7.0.35 管理器部署我的 war 文件，因为它允许指定服务器上 context.xml 文件的文件路径。

这一切都很好，除了我还没有找到从 Netbeans 7.2.1 开发的方法。因此，当我尝试在 Netbeans 中运行我的项目时，我收到以下消息

```
In-place deployment at (...)/trace
(...)/trace/target/trace/META-INF/context.xml (No such file or directory) 
```

任何有关配置 Netbeans 或以其他方式实现我的目标的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:37:16.500

Netbeans 需要`META-INF/context.xml`从 IDE 运行您的战争。根据我的观察，如果`context.xml`不存在它就会创建它。

在您的本地项目工作区中保留 a 怎么样`META-INF/context.xml`，但将路径添加到您的`.gitignore`（或 SCM 等效项），这样您就不会意外提交它？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T15:11:47.013

我已经找到了一种适合我的具体情况的方法来解决这个问题。我保留了`context.xml`但使用了Tomcat 支持的 Apache [Ant 样式的变量替换。](https://tomcat.apache.org/tomcat-7.0-doc/config/index.html)

有[几种方法可以定义环境变量](https://tomcat.apache.org/tomcat-7.0-doc/config/index.html)，但我选择使用该`$CATALINA_BASE/conf/catalina.properties`文件，这对我来说似乎更易于维护。`catalina.example.properties`我还在我的源文件中附上了 a来记录应用程序预期的变量。

希望这对其他人有帮助。

# android - 在 ListView 中显示原始文件中的数据

> ID：14465040
> 
> 赞同：0
> 
> 时间：2013-01-22T17:59:03.947
> 
> 标签：android, android-listview

我需要从 res/raw/file.txt 下的 txt 文件中读取数据，并在 ListView 中显示每一行。但是当应用程序启动时 ListView 是空的。这是在 onCreate 之前定义的：

```
private SimpleAdapter sa;
ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>(); 
```

这是代码：

```
 InputStream inputStream = getResources().openRawResource(R.raw.definitions);
    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
    String line;
    try 
    {
        HashMap<String, String> item;
        while ((line = reader.readLine()) != null) 
        {
            String[] strings = TextUtils.split(line, "-");
            if (strings.length < 2) 
            {
                item = new HashMap<String, String>();
                item.put("line1", strings[0].trim());
                item.put("line2", strings[1].trim());
                list.add(item);
            }
        }
        mTextView.setText("");

        sa = new SimpleAdapter(this, list,
                R.layout.result,
                new String[] { "line1","line2" },
                new int[] {R.id.word, R.id.definition});

        mListView.setAdapter(sa);

        reader.close();

    } 
    catch(Exception e)
    {
        Toast.makeText(this, "Error", Toast.LENGTH_SHORT).show();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:26:14.690

它看起来不错，但如果（strings.length **<=** 2）有一个小的逻辑变化。它对我有用。

尝试

```
 if (strings.length <= 2) {
                item = new HashMap<String, String>();
                item.put("line1", strings[0].trim());
                item.put("line2", strings[1].trim());
                list.add(item);
            } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T18:11:55.947

在 onCreate() 之前定义是什么意思。在 onCreate() 之前定义并不意味着它会在 onCreate() 之前被调用。当活动在 onCreate() 中启动时，您需要调用上述代码。

# javascript - 我在 JavaScript 中以正确的方式使用“this”吗？

> ID：14465045
> 
> 赞同：0
> 
> 时间：2013-01-22T17:59:30.203
> 
> 标签：javascript, jquery, oop

这是我的代码

```
ImageCarousel = (function() {
var currentIndex, imageManager, imagesVO, jsonPath, values;

currentIndex = null;

jsonPath = "json/images.json";

imagesVO = [];

values = null;

imageManager = null;

function ImageCarousel() {
  this.loadJson();
}

ImageCarousel.prototype.loadJson = function() {
  var _this = this;
  return $.ajax(jsonPath, {
    success: function(data, status, xhr) {
      console.log("yea " + data);
      _this.currentIndex = 0;
      _this.imagesVO = data.images;
      _this.imageManager = new ImageManager(data.images);
      _this.imagesCount = _this.imagesVO.length;
      _this.switchToImage(_this.currentIndex);
      $('#next').click(function() {
        _this.currentIndex = _this.incrementIndexByOne(_this.currentIndex);
        return _this.switchToImage(_this.currentIndex);
      });
      return $('#prev').click(function() {
        _this.currentIndex = _this.decrementIndexByOne(_this.currentIndex);
        return _this.switchToImage(_this.currentIndex);
      });
    },
    error: function(xhr, status, err) {
      return $('#imageHolder').html("problem loading the json file, </br>make sure you are running this on your local server");
    },
    complete: function(xhr, status) {}
  });
}; 
```

我是否适合使用“this”来引用 ImageCarousel 类中的变量？它会公开这些属性吗？如果是这样，我如何将它们保密？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:05:20.433

不，你没有`this`正确使用。您尝试引用的那些属性都是私有的，因为没有外部代码可以通过调用`ImageCarousel`.

如果您出于某种原因确实想让这些变量公开，请不要使用`var`. 相反，请执行类似`this.currentIndex = null`or的操作`this.jsonPath = "json/images.json"`。当您这样做时，您实际上是在使这些属性可公开访问。任何外部代码都可以通过调用`ImageCarousel.currentIndex`,`ImageCarousel.jsonPath`等来访问这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:27:29.767

这有一些问题。这是带有更正的代码：

```
var ImageCarousel = function () {
    var currentIndex, imageManager, imagesVO, jsonPath, values;

    currentIndex = null;

    jsonPath = "json/images.json";

    imagesVO = [];

    values = null;

    imageManager = null;

    var _this = this;

    this.loadJson = function () {
        return $.ajax(jsonPath, {
            success: function (data, status, xhr) {
                console.log("yea " + data);
                currentIndex = 0;
                imagesVO = data.images;
                imageManager = new ImageManager(data.images);
                imagesCount = imagesVO.length;
                switchToImage(currentIndex);
                $('#next').click(function () {
                    currentIndex = _this.incrementIndexByOne(currentIndex);
                    return _this.switchToImage(_this.currentIndex);
                });
                return $('#prev').click(function () {
                    currentIndex = _this.decrementIndexByOne(currentIndex);
                    return _this.switchToImage(currentIndex);
                });
            },
            error: function (xhr, status, err) {
                return $('#imageHolder').html("problem loading the json file, </br>make sure you are running this on your local server");
            },
            complete: function (xhr, status) {}
        });
    };
    this.loadJson();    
};

var someCarousel = new ImageCarousel(); // Example usage. 
```

实际上，`ImageCarousel`被宣布了两次。一次`ImageCarousel = (function() {`和一次`function ImageCarousel()...`。我选择了前者。

如果我理解正确，您希望`currentIndex`, `imageManager`, `imagesVO`, `jsonPath`, 和 values 是私有的。对于那些，只需在你的功能块内做一个 var ，它们将是该`new`'d 对象的每个实例的私有。你可以在你的`ImageCarousel`函数中安全地使用它们，不用担心（也没有`_this`）。

我留下`_this`了您在其中调用的方法，`loadJson`因为（无法在此处看到它们的定义）我假设它们是公共方法。如果它们是私有的，只需在包装函数中声明它们，它们只能在其中访问。如果您希望它们公开，请`this[functionName]`像我对 loadJson 所做的那样使用。

所以我的代码更改的影响是：

*   currentIndex 等是私有的。
*   loadJson 是公开的。

**编辑** 关于使用的更多内容`prototype`。`prototype`用于“静态”函数 - 意思是，该函数并不存在于每个`ImageCarousel`对象实例中。如果你使用它，你将在函数声明之外使用它。否则，每次您都`new`将不必要`ImageCarousel`地重新定义。`loadJson`这是一个不错的小演示应用程序，可以更清楚地说明我的意思：http: [//jsfiddle.net/d2BbA/](http://jsfiddle.net/d2BbA/)

# c++ - 强制注册派生类型

> ID：14465047
> 
> 赞同：4
> 
> 时间：2013-01-22T17:59:30.593
> 
> 标签：c++

我有一个从某个基类派生的类的注册器实现。目的是让每个派生类注册自己，并在此过程中提供一些关于自身的信息，在下面的示例中，这些信息是通过字符串提供的。

我缺少的是一种`Base`通过初始化静态成员来强制派生自的类注册自己的方法`reg`。换句话说，如果派生类没有定义/初始化静态成员，是否有可能让编译器以某种方式产生错误？

```
struct Registrar {
  Registrar(string type) {
    registry().push_back(type);
  }
  static vector<string> & registry() {
    static vector<string> * derivedTypes = new vector<string>;
    return *derivedTypes;
  }
};

//CRTP
template <typename Derived>
class Base
{
  static Registrar reg;
};

class Derived1 : public Base<Derived1> {/*Class definition*/};
class Derived2 : public Base<Derived2> {/*Class definition*/};
class Derived3 : public Base<Derived3> {/*Class definition*/};
//...

//Initialize the static members of each derived type
//Commenting out any of the following 3 lines doesn't produce an error.
//Ideally, I want it to produce a compile error.
template<> Registrar Base<Derived1>::reg("Derived1");
template<> Registrar Base<Derived2>::reg("Derived2");
template<> Registrar Base<Derived3>::reg("Derived3");

int main() {

  cout << "Registered Types:" << endl;
  for(vector<string>::const_iterator it = Registrar::registry().begin();
      it != Registrar::registry().end(); ++it) {
    cout << *it << endl;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:33:37.170

您至少可以通过向注册器添加一个虚拟函数来导致 g++ 中的链接器错误：`void blah() { }`然后从 CRTP 基类中的虚拟构造函数调用它：

```
public:
    Base() { reg.blah(); } 
```

我找不到更优雅的方法来解决这个问题。

# linux - 使用 echo $RANDOM 在两个数字或范围之间生成随机数的 Shell 脚本

> ID：14465052
> 
> 赞同：1
> 
> 时间：2013-01-22T18:00:04.393
> 
> 标签：linux, shell

我正在尝试确定一些可以与 $RANDOM 一起使用以从特定范围生成随机数但无法找到的选项。有人可以帮我吗。echo $RANDOM 从 shell 生成数字，但它是随机的，并不特定于我的范围。我想在 1 到 100 的范围内生成随机数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:36:57.947

如果你有 GNU 排序：

```
rand=$( seq $start $end | sort -R | head -1) 
```

调用外部工具，因此会比使用 $RANDOM 执行算术慢几毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T18:08:31.617

[使用bash](/questions/tagged/bash "显示标记为“bash”的问题")的另一种解决方案：

```
 printf '%s\n' {1..100} | shuf | head -1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:01:42.503

尝试使用`shell`函数执行此操作：

```
intrandfromrange() { echo $(( ( RANDOM % ($2 - $1 +1 ) ) + $1 )); }
intrandfromrange 1 100 
```

## 解释

*   `foo() { }`是外壳函数的骨架。
*   `$((...))`给出封闭[算术表达式](http://mywiki.wooledge.org/ArithmeticExpression)的结果.
*   `%`代表模，除法运算的余数。
*   `$1`&`$2`是函数的第一个和第二个参数。
*   剩下的只是简单的算术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-04T01:56:36.797

您不需要“shuf | head -1”。“ **shuf -n 1** ”

还：

**序列 1 100 | shuf -n 1**

类似的功能可能是：

```
rnd () {
seq $1 $2 | shuf -n ${3:-1}
} 
```

因此 rnd 1200 5000 5 将输出 5 个介于 1200 和 5000 之间的随机数。每当需要时。如果您只需要一个并且您很赶时间，则无需指定 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T18:56:02.720

如果您对第三代语言持开放态度：

```
python -c 'import random; print(random.randint(1, 100))' 
```

# ios - 检测用户是否移动了地图，或者它是否以编程方式发生 iOS Mapkit

> ID：14465060
> 
> 赞同：4
> 
> 时间：2013-01-22T18:00:19.703
> 
> 标签：ios, mkmapview, mapkit, mkannotation, mkannotationview

好的，所以我有一个加载了远程 JSON 提要的引脚的地图，该提要已加载到应用程序中。这一切都很好。

现在从最初的实验开始`regionDidChangeAnimated`被多次调用，所以我将我的发布请求移动到使用拖动地图手势识别器的方法，然后执行发布请求以从 JSON 提要获取数据并在删除它们后重新加载我的地​​图图钉。这也很完美。

现在我剩下的唯一问题是，如果我选择靠近屏幕边缘的注释，地图会稍微移动以适应注释标注的显示。发生这种情况时会调用问题`regionDidChangeAnimated`，但是我的发布请求不像我使用手势识别器调用它那样，因此地图不是由用户干预而是由操作系统移动的。我不想将我的 Post 请求移动到，`regionDidChangeAnimated`因为这会被多次调用，但我想知道是否有办法进行测试，如果用户导致地图移动或者它自己做了以适应标注如上所述。我看过的 `regionDidChangeAnimated`研究可能会比必要的调用次数更多，因此一些指导会很好地说明如何防止这种情况或检测用户交互与操作系统移动地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:08:15.653

我有一个类似的问题：我想区分地图的显示部分是否已被程序或用户交互更改。显然，`MKMapView`对象并没有告诉我，即`regionDidChangeAnimated`在两种情况下都没有说明原因。
但是由于`MKMapView`是 的子类`UIView`，并且是 的子类，因此`UIResponder`可以实现这些方法`touchesBegan:withEvent:`并`touchesEnded:withEvent:`找出在显示区域的变化过程中是否触摸了地图。
如果是这样，可以假设显示区域的变化是由用户交互引起的。当然，如果您更精确地研究这些方法的触摸集和事件类型，您可以更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:08:17.767

我是这样一个木板，有时写作问题会有所帮助。我只是删除了 regionDidChangeAnimated ，因为我不需要它，并且那里的代码我移到了我的手势上，即在重新添加它们之前删除注释 doh！

# iphone - 如果朋友在应用程序中的进度还没有达到 installInvitationHandler 方法，如何处理游戏中心邀请？

> ID：14465064
> 
> 赞同：7
> 
> 时间：2013-01-22T18:00:35.953
> 
> 标签：iphone, ios, objective-c, game-center, gamekit

我正在创建一个实时比赛游戏，但我对如何处理游戏邀请感到困惑？例如，一个设备上的玩家可以邀请他的朋友参加比赛，然后邀请横幅将出现在朋友的设备上。他们可以点击横幅并接受邀请。现在，如果朋友之前运行过该应用程序并安装了以下邀请处理程序（安装在应用程序的第二个视图控制器中），这将正常工作

```
- (void) installInvitationHandler
{
    [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {
        // Insert game-specific code here to clean up any game in progress.
        if (acceptedInvite)
        {
            if(self.myConnectingVC) return;
            else if(self.myMatchmakerVC)
            {
                [self dismissViewControllerAnimated:YES completion:^{
                    self.myMatchmakerVC = nil;
                    GKMatchmakerViewController *mmvc = [[GKMatchmakerViewController alloc] initWithInvite:acceptedInvite];
                    mmvc.matchmakerDelegate = self;
                    self.myConnectingVC = mmvc;
                    [self presentViewController:mmvc animated:YES completion:nil];
                }];
            }
            else
            {
                GKMatchmakerViewController *mmvc = [[GKMatchmakerViewController alloc] initWithInvite:acceptedInvite];
                mmvc.matchmakerDelegate = self;
                [self presentViewController:mmvc animated:YES completion:nil];
            }
        }
        else if (playersToInvite)
        {
            [self createMatchWithPlayersToInvite:playersToInvite];
        }
    };
} 
```

**问题是，如果朋友之前从未运行过应用程序，或者朋友在应用程序中的进展还不够远，无法达到`installInvitationHandler`方法，我该怎么办？** 如果发生这种情况，如果朋友点击邀请横幅，应用程序将打开，但不会接受邀请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:02:05.970

您应该在应用启动后立即添加邀请处理程序。GKInvite 对象在调用处理程序时传入。

```
[GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {
    //By the time this block is called, you have already received the
    //invite, it's passed as a parameter
    if (acceptedInvite) {
        //This is your invite
    } else if (playersToInvite) {
        //The player has launched your app from the Game Center app, invite these players.
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T15:04:03.097

我发现最好将邀请处理程序作为完成块附加到 GKLocalPlayer 的 authenticateHandler。

这适用于 iOS 6.0 及更高版本...

```
[GKLocalPlayer localPlayer].authenticateHandler = ^(UIViewController *viewController,     NSError *error)
    {
        if([GKLocalPlayer localPlayer].authenticated)
            _gameCenterFeaturesEnabled = YES;

        // Present the view controller if needed
        if (![GKLocalPlayer localPlayer].authenticated)
        {
            if(viewController)
                [self presentViewController:viewController];
            return;
        }

        if (error)
        {
            if(completionHandler)
                completionHandler(error);
        }
        else
        {
            [self authenticationCompleted];
            if(completionHandler)
                completionHandler(nil);
        }
    }; 
```

随着完成处理程序...

```
if(!error)
    {           
        CCLOG(@"Adding invite handler.");
        [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {
            CCLOG(@"Invite recieved.");
            // Insert game-specific code here to clean up any game in progress.
            if (acceptedInvite)
            {
                GKMatchmakerViewController *mmvc = [[GameDataCache sharedData].match createWithInvite:acceptedInvite];
                mmvc.matchmakerDelegate = [GameDataCache sharedData].match;
            }
            else if (playersToInvite)
            {
                GKMatchRequest *request = [[GKMatchRequest alloc] init];
                request.minPlayers = 2;
                request.maxPlayers = 2;
                request.playersToInvite = playersToInvite;

                GKMatchmakerViewController *mmvc = [[GameDataCache sharedData].match createNewRequest:request cancelledBlock:nil];
                mmvc.matchmakerDelegate = [GameDataCache sharedData].match;
            }
        };
    } 
```

Pre iOS6 需要在 localPlayer 上调用 authenticateWithCompletionHandler 而不是分配 authenticateHandler 属性。

# ruby-on-rails - 我设置工厂女孩的方式有问题吗

> ID：14465072
> 
> 赞同：0
> 
> 时间：2013-01-22T18:01:00.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot

我正在关注 micheal hartl rails 教程。我在第10章。我定义工厂女孩的内容的方式有问题吗？当我打电话给 rspec 时，我从工厂女孩那里收到了这个错误。

```
Failure/Error: FactoryGirl.create(:micropost, user: @user, created_at: 1.day.ago)
     NoMethodError:
       undefined method `content=' for #<User:0x0000010343f018> 
```

**工厂.rb**

```
FactoryGirl.define do
  factory :user do
    sequence(:name)    { |n| "Person #{n}" }
    sequence(:email)   { |n| "person_#{n}@example.com" }
    password "foobar"
    password_confirmation "foobar"

    factory :admin do
      admin true
    end

    factory :micropost do 
       content "Lorem ipsum "
       #association :user
       user
    end
  end 
end 
```

**被调用的部分**

```
 before { @user.save }
    let!(:older_micropost ) do 
      FactoryGirl.create(:micropost, user: @user, created_at: 1.day.ago)
    end
    let!(:newer_micropost) do
      FactoryGirl.create(:micropost, user: @user, created_at: 1.hour.ago)
    end
    it " should  have  the right  micropost in the right  order" do 
      @user.microposts.should == [newer_micropost, older_micropost]
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:04:33.697

退出`factory :micropost`，`factory :user`否则会认为`content`是用户的一个属性。

这应该有效：

```
FactoryGirl.define do
  factory :user do
    sequence(:name)    { |n| "Person #{n}" }
    sequence(:email)   { |n| "person_#{n}@example.com" }
    password "foobar"
    password_confirmation "foobar"

    factory :admin do
      admin true
    end
  end 

  factory :micropost do 
    content "Lorem ipsum "
    association :user
  end

end 
```

# actionscript-3 - Setter 并不总是被触发

> ID：14465073
> 
> 赞同：0
> 
> 时间：2013-01-22T18:01:04.327
> 
> 标签：actionscript-3, apache-flex, air

我使用一个代表模型的可绑定变量，并将它传递给几个嵌套组件。

顶级组件是我的变量：

```
[Bindable]
private var meetingInfo:MeetingInfoModel; 
```

我在“预初始化”事件的处理程序中初始化它：

```
meetingInfo = MeetingInfoModel.getInstance(); 
```

然后我将它传递给 1 个组件：

```
<meetingViewStack:MeetingViewStack meetingInfo="{meetingInfo}"/> 
```

在该组件中，我有以下内容：

```
private var _meetingInfo:MeetingInfoModel;

public function set meetingInfo( model:MeetingInfoModel ):void{
    _meetingInfo = model;}

[Bindable]
public function get meetingInfo():MeetingInfoModel{
    return _meetingInfo;
        } 
```

然后我将该变量传递给另一个嵌套组件：

```
<documentShare:DocumentPanel meetingInfo="{meetingInfo}"/> 
```

我在哪里设置了相同的 setter/getter。然后我再次将它传递给另一个嵌套组件：

```
<documentShare:AttachmentFilesPanel meetingInfo="{meetingInfo}" /> 
```

在该组件中，我有一个用于绑定到“meetingInfo”的 DataGroup 组件的 ItemRenderer：

```
<s:DataGroup id="attachmentsList"
                 width="100%"
                 clipAndEnableScrolling="true"
                 dataProvider="{meetingInfo.docsAndAttachmentsList}"
                 itemRenderer="com.fmr.transporter.view.documentShare.DocumentUploadRenderer"
                 visible="{meetingInfo.docsAndAttachmentsList.length > 0}">`enter code here` 
```

当我更新“meetingInfo.docsAndAttachmentsList”ArrayCollection 时，每个嵌套组件中的设置器都会被正确调用，直到......

...这是一个 AIR 应用程序，请注意...

我注销并重新登录。然后，这次不会触发最后一个嵌套组件中的 setter/getter。

为什么，为什么，会发生这种情况？

我已经进行了几天的故障排除，但终生无法解决。

感谢您提供任何有用的提示！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:44:22.143

代码`MeetingInfoModel.getInstance();`提示这`MeetingInfoModel`是一个单例，是吗？如果是这样，setter 只会被触发一次，因为 mxmlc 会生成对象实例更改的检查，所以为 SDk 4.5.1 生成的代码将是这样的：

```
[Bindable(event="propertyChange")]
public function set meetingInfo(value:MeetingInfoModel):void
{
    var oldValue:Object = this.meetingInfo;
    if (oldValue !== value)
    {
        this._883716727meetingInfo = value;
       if (this.hasEventListener("propertyChange"))
           this.dispatchEvent(mx.events.PropertyChangeEvent.createUpdateEvent(this, "meetingInfo", oldValue, value));
    }
} 
```

因此，如果您没有重新创建`MeetingInfoModel`setter 的实例，则不会被触发。

# java - Java获取资源相对路径

> ID：14465075
> 
> 赞同：0
> 
> 时间：2013-01-22T18:01:19.543
> 
> 标签：java, path, resources, relative-path

我正在尝试将 .wav 文件加载到内存中，但它一直告诉我该文件不存在。

```
String filename;

public MyClass(String _filename){
 filename = _filename;
}

public void run(){
   InputStream in = View.class.getClassLoader().getResourceAsStream("/sounds/"+filename);

   File inputFile = new File(in.toString());
   if(!inputFile.exists()){
      System.err.println("Wave file not found: " + in.toString());
      return;
   }
} 
```

安慰：

> 未找到波形文件：java.io.FileInputStream@dd5b524
> 
> 未找到波形文件：java.io.FileInputStream@570add96

该文件位于包文件夹中。在里面

> myPackage/声音/write.wav

**编辑：**

其实我想加载声音：

```
InputStream in = this.getClass().getResourceAsStream("sounds/"+filename);

AudioInputStream audioInputStream = null;
try { 
     audioInputStream = AudioSystem.getAudioInputStream(in);
} catch (UnsupportedAudioFileException e1) { 
         e1.printStackTrace();
         return;
} catch (IOException e1) { 
         e1.printStackTrace();
         return;
} 
```

但是控制台仍然有错误：

> javax.sound.sampled.AudioSystem.getAudioInputStream (Unknown Source) com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source) 处的线程“Thread-6”中的异常 java.lang.NullPointerException ) at com.chrissman.threads.AePlayWave.run(AePlayWave.java:47) java.lang.NullPointerException at com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source) at javax.sound.sampled.AudioSystem.getAudioInputStream( Unknown Source) at com.chrissman.threads.AePlayWave.run(AePlayWave.java:47)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:15:06.280

`in.toString()`不返回用于打开流的路径，它返回类名，后跟哈希：`java.io.FileInputStream@dd5b524`。

该错误是因为您没有`java.io.FileInputStream@dd5b524`在当前目录中命名的文件。

**因为你得到一个对象而不是`null`它`in`找到你的文件**。您不能使用`File`对象来获取此文件，但您可以通过对象访问它`in`。从流中读取内容并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:11:06.633

可以使用绝对路径和相对路径查找资源。您目前拥有的是一个以 . 开头的绝对路径`/`。所以改成`/myPackage/sounds/write.wav`. 一般来说，我更喜欢绝对路径，因为很难确定哪个包是具有相对路径的“当前”包。

# javascript - Backbone.js：将活动类应用于模板中的活动元素？

> ID：14465083
> 
> 赞同：1
> 
> 时间：2013-01-22T18:01:46.397
> 
> 标签：javascript, backbone.js

我有一个看起来像这样的主干模板：

```
<script type="text/html" id="template-switchers">
<strong><%= activeViz %></strong>
<button class="btn" data-viz="lists"><i class="icon-list icon-large"></i></button>
<button class="btn" data-viz="atomic"><i class="icon-spinner icon-large"></i></button>
<button class="btn" data-viz="maps"><i class="icon-map-marker icon-large"></i></button>
<button class="btn" data-viz="charts"><i class="icon-bar-chart icon-large"></i></button>
</script> 
```

传入的`activeViz`参数可以是`lists`、`atomic`和`maps`中的任何一个`charts`。我的问题是：如何将`active`类添加到相应的按钮？

迄今为止，我一直在使用 jQuery 进行此操作：

```
$('#viz-switchers button[data-viz="'+ activeViz + '"]').addClass('active'); 
```

但现在我想重构 Backbone，并使用模板。有没有更好的 Backboney 方式，模板中没有四个`if`语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:02:23.053

您可以创建按钮数组并在循环中呈现它，例如：

```
var buttons = [{viz:'', icon:''}, {}, {}]; 
```

在您的模板渲染按钮中：

```
<% _.each(buttons, function(button) { %>
    <button class="btn" data-viz="<%= button.viz %>">
        <i class="<%= button.icon %> icon-large <% button.viz === activeViz && print('active') %>"></i>
    </button>
<% }) %> 
```

# windows - 多台计算机提交到 GitHub

> ID：14465085
> 
> 赞同：1
> 
> 时间：2013-01-22T18:01:57.353
> 
> 标签：windows, github

每当我从与上次提交不同的计算机提交时（相同的帐户，不同的 SSH 密钥，都使用 Github for Windows），我得到如下结果，其中差异显示整个文件被重写。

[https://github.com/Yttrium-tYcLief/Scrotter/commit/0c012c51bae0db198a10a5fc73294c2eb04d1ea0](https://github.com/Yttrium-tYcLief/Scrotter/commit/0c012c51bae0db198a10a5fc73294c2eb04d1ea0)

在客户端，它确实在 GH for Windows 中同步新提交之前正确显示，但是一旦同步提交，在客户端（和所有其他客户端）上，差异字段会显示整个重写。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:14:05.550

> 它们都不应该以 Unicode 结尾保存。

也许您正在混合**字符编码**和**行尾**的概念。

如果您比较文件的两个版本，您会注意到它们都是 UTF-8 编码的，所以没有问题。正如其他人所建议的那样，问题在于行尾。在最后一次提交中，您如何从 Unix`LF`行尾切换到 Windows`CRLF`行尾。

我发现坚持使用 Unix`LF`行尾是最容易的，即使在 Windows 机器上也是如此。我将文本编辑器设置为`LF`默认使用行尾。从那时起，如果您`CRLF`出于某种原因尝试使用行结尾提交，git 会以`git diff`.

![crlf](../Images/7a91e5d4191a2223ff70ad67bfdb3114.png)

# javascript - 如何检查嵌套对象属性是否在 Javascript 中未定义？

> ID：14465086
> 
> 赞同：0
> 
> 时间：2013-01-22T18:01:58.970
> 
> 标签：javascript, jquery, object, properties, undefined

`postsome`我有一个 Javascript 对象，如果未定义，我正在努力检查循环。

这是我的对象：

```
var indices = [{
    "indexAB": [{
        "postsome": [
            "keyword_abc",
            "keyword_def"
         ]
       }]
    },{
    "indexA": [{
        "postsome": [
            "keyword_abc"
        ]
      }]
    }
 ] 
```

问题是，我无法引用`indexA`，`indexAB`或`postsome`直接引用。一切都会变数。这就是我正在尝试的：

```
// passed parameter
var doc._id = "postsome";

// mapping priv
// "indices": [
//    {"name":"indexA","fields":["findMeA"]},
//    {"name":"indexAB", "fields":["findMeA","findMeB"]}
//    ],

for (var i = 0, l = indices.length; i < l; i += 1) {

  var index = priv.indices[i];
      index_name = index["name"]; // indexAB or indexA

  // I can't reference indexAB directly 
  if ( indices[i].indexAB !== undefined && indices[i].indexAB.length  >  0 )          {
      console.log( indices[i].indexAB );
      console.log( indices[i].indexAB[0][doc._id] );

      if (indices[i].indexAB[0][doc._id] !== undefined) {
        console.log("gotcha");
        trigger = true;
      }
    }
} 
```

因此，当我使用`indexAB`硬编码时，它可以工作，但我需要遍历这些值（'indexA' 和 'indexAB' instea）。

**问题：**
有没有办法`.indexAB[0]`用变量替换？如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:06:55.290

只需使用括号表示法，与使用 . 的方式完全相同`[doc._id]`。

```
if (indices[i][index_name] !== undefined && indices[i][index_name].length > 0) 
```

括号表示法和点表示法是可以互换的，所以这两行是等价的：

```
indices.foo
indices["foo"] 
```

但是，如果您需要使用变量，`indices.varName`则将转换为`indices["varName"]`，因此您必须使用括号表示法以确保它使用变量值而不是变量名作为字符串。

# javascript - 加载动态数组中的最终图像后，如何调用函数？

> ID：14465091
> 
> 赞同：1
> 
> 时间：2013-01-22T18:02:15.457
> 
> 标签：javascript, html, arrays, image

我正在尝试使用与创建它们的函数不同的函数来附加图像元素。这样做的原因是为了实现加载 gif，并且还可以更平滑地加载图像。

PHP

```
$dir = "images/";
$dh = opendir($dir);
while (false !== ($filename = readdir($dh))) {
$files[] = $filename;

}
foreach ($files as $key=>&$value) {
if (strlen($value) < 3) {
    unset($files[$key]);
}

}
foreach($files as $key => $value) { 
if($value == "") { 
unset($array[$key]); 
} 
} 
$sorted_array = array_values($files);  
uasort ( $sorted_array , function ($a, $b) {
        return strnatcmp($a,$b); // or other function/code
    }

);
$filecount = count($sorted_array);
print_r($sorted_array); 
```

javascript

```
 var photos=[];
 var image;
 function map(id){
var name=<?php echo json_encode($sorted_array);?>;
var elements=<?php echo $filecount?>;
for(i=0;i<elements;i++){
    photos[i]=new Array("images/"+name[i]);
    image=new Image();
    image.setAttribute("class","container");
    image.setAttribute("id",photos[i]);
    image.src=photos[i];
    document.getElementById(id).appendChild(image);
    }
    alert(elements);
    return;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:04:36.117

为所有图像添加`onload`事件处理程序。计算多少图像还需要加载，如果它到达`0`你很高兴去。

`images.addEventListener`或`images.attachEvent`（对于 InternetExploder）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:05:13.883

您可以使用`Image.onload`事件处理程序找出图像何时加载`src`. 如果您有多个图像，您可能想要实现一个计数器（保存要加载的图像总数）并在每个图像的 onload 中递减该计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:10:06.060

我准备了 3 张不同大小的图像（让它们异步加载）。

它们是~18 Kb、~70 Kb 和~200 Kb。您可以使用它们（在主题末尾提供）。

**更新代码：**

让我们命名这段代码`index.html`并将其保存到文件中：

```
<!DOCTYPE html>
<html><head>
    <script type="text/javascript">
    window.addEventListener('load', function () {

        // Define images    
        var photos = [
            {url:'./img1.jpg', loaded:false},
            {url:'./img2.jpg', loaded:false},
            {url:'./img3.jpg', loaded:false},
            {url:'./img1.jpg', loaded:false},
            {url:'./img2.jpg', loaded:false},
            {url:'./img3.jpg', loaded:false},
            {url:'./img2.jpg', loaded:false}
        ],
        photos_DOM_Elements = [],
        photosLoaded = 0;// Loaded images counter
        container = document.getElementById('div');// Images container

        /**
        * Each image should have event listener for `onLoad` event...
        */
        photos.forEach(function (photo, photoInd) {
            var currentImage = document.createElement('img');

            currentImage.src = photo.url;
            photos_DOM_Elements.push(currentImage);

            // ...and this event should check whether it was the last image that haven't been loaded
            currentImage.addEventListener('load', function (evt) {
                photosLoaded++;

                if (photos.length === photosLoaded) {
                    alert('Loaded');

                    // Move images to a visible container
                    photos_DOM_Elements.forEach(function (DOM_Elem) {
                        container.appendChild(DOM_Elem);
                    });
                }
            });
        });

    });
    </script>
</head><body>
    <div id="div"></div>
</body></html> 
```

另存为`img1.jpg`： http: [//i.stack.imgur.com/UCKzG.jpg](http://i.stack.imgur.com/UCKzG.jpg)
另存为：http `img2.jpg`: [//i.stack.imgur.com/bnU3c.jpg](http://i.stack.imgur.com/bnU3c.jpg)
另存为：http `img3.jpg`: [//i.stack.imgur.com /TUaYr.jpg](http://i.stack.imgur.com/TUaYr.jpg)

# padding - 错误用空格填充字符串

> ID：14465092
> 
> 赞同：-1
> 
> 时间：2013-01-22T18:02:23.023
> 
> 标签：padding

我正在尝试用空格填充参数，使其始终为`10`字符长。有时数据有时包含`7`字符`8`。我发现当数据都是数字但给出一个

```
Error converting data type `varchar` to float 
```

每当有一封信。数据类型是`Char(10)`，我的参数也是。

```
SELECT *
fROM EC21DATA.CSTMST
WHERE CSTNUM  = REPLACE(STR(@CustomerSeqNo,10),' ',' ') 
```

适用于此 →`RPT_TEST_PADDING '1353287'`
不适用于此 →`RPT_TEST_PADDING 'U122603'`

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T18:12:44.930

Edit = equal 替换为 like 和 % 用于匹配所有填充字符。

你能做到吗？

```
SELECT *
fROM EC21DATA.CSTMST
WHERE CSTNUM  LIKE '%'+@CustomerSeqNo+'%' 
```

# java - 序列化不适用于自定义链表

> ID：14465095
> 
> 赞同：1
> 
> 时间：2013-01-22T18:02:32.863
> 
> 标签：java, serialization, io, try-catch, singly-linked-list

所以这是我的问题：对于一个项目，我必须创建一个自定义链表，我必须向其中添加节点并使用序列化将其保存/加载到磁盘和从磁盘中加载/在我定义问题之前，这是关于我的系统的一些事情

*   我有一个通用的“客户文件”，它充当节点数据
*   这存储在充当列表元素的节点对象中
*   有一个客户文件类，其中存储了姓名和电子邮件地址等信息，以及各种获取和设置方法 - 这些工作正常
*   有一个节点类，其中包含获取和设置数据以及下一个方法，其中下一项是节点对象并充当列表中的下一项
*   有一个带有添加、删除、修改、排序、搜索等方法的单链接类 - 它是自定义类，因此不实现任何 JAVA 预制列表。
*   对所有类分别进行了很多测试并一起使用-这些方法是万无一失的-它们有效
*   有一个主类用于用户和系统之间的主界面 - 它是一个 CLI 系统（命令行）
*   它有一个保存列表到文件函数和从文件函数加载列表（在主类中），每个函数使用序列化或反序列化从磁盘保存/加载列表
*   所有类都实现了可序列化的接口
*   主类中有一个“MAIN”方法，其中运行一个while循环，允许用户以某种方式修改列表（例如添加记录，删除记录等......）
*   该列表在循环之外加载，因此每次循环迭代时都不会清除它（同事之间的常见问题）
*   我有一个系统密码，使用相同的方法将字符串保存到另一个文件位置，并且已经工作了数周 - 密码保存在该位置，可以随意访问、更改和删除
*   这些加载/保存方法具有适当的 try/catch 方法来捕获任何异常

问题是每次我加载我的编程环境并想查看列表时，我发现文件中的列表是“空的”并且不包含我上次添加/删除内容时的记录。

我添加记录并修改列表——在其他类工作时很容易——一旦添加这些，我调用打印函数，它只显示列表中的所有项目，这很好。

但是，在我关闭环境的那一刻，它们就丢失了，当我重新打开环境再次查看列表时，它是空的！

在查看保存这些类的文件夹时，我注意到每次运行程序时都会创建“shell”并保留在那里直到程序关闭/完成，但是应该保存链接列表的“listData.ser”没有任何数据。

同样，密码文件包含保存完好的密码 - 所以我对我的代码为什么不起作用感到有点困惑。

这是我的保存列表方法：

```
private static void saveListToFile(SinglyLinkedList lst) {
    try {
        ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream("ListData.ser"));
        os.writeObject(lst);
        os.flush();
        os.close();
    } 

    catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    catch (IOException e) {
        e.printStackTrace();
    }
} 
```

同样，加载列表方法类似，但使用对象输入流和文件输入流。

有什么建议么？

PS 我的主 while 循环超过 400 行代码，因此无法发布。

更新1.加载列表方法中的反序列化代码：

```
private static SinglyLinkedList loadListFromFile() {
    SinglyLinkedList lst = null;

    try {
        ObjectInputStream is = new ObjectInputStream(new FileInputStream("ListData.ser"));
        lst = (SinglyLinkedList) is.readObject();
        is.close();
    }

    catch(FileNotFoundException e) {
        e.printStackTrace();
    }

    catch(IOException e) {
        e.printStackTrace();
    }

    catch(ClassNotFoundException e) {
        e.printStackTrace();
    }

    return lst;
} 
```

我不认为单链表类本身是问题（回复评论）并且复制是不可行的，因为它也是超过 300 行代码（很多方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:06:10.230

您是否尝试过`close()`在`FileOutputStream`完成文件/对象的编写后调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:45:09.863

我已经解决了它，而不是发布我的代码，我尝试自己做。我发现列表类有一些静态方法 - 这些方法已更改为非静态方法，现在列表每次都按预期保存。谢谢您的帮助

# android - Android 解析 RSS Feed URL

> ID：14465098
> 
> 赞同：0
> 
> 时间：2013-01-22T18:02:37.310
> 
> 标签：android, parsing

当我试图解析来自 rssfeed 的链接标签时

```
url-http://www.mobileapp.pcmac.org/mobile/xml/sisapp.asp?sid=353&pn=news2 
```

我正确获取了链接标签，但我无法使用该链接标签来解析网站内容，为什么解析的链接标签无法使用 jsoup jar 获取文档。是否有任何特定技术来解析 rss 提要中的链接标签。

```
doc = Jsoup.connect(website).get(); 
```

其中网站是来自 rss 提要**http://www.mobileapp.pcmac.org/mobile/xml/sisapp.asp?sid=353&pn=news2的链接标签**

当我硬编码链接标签值代替网站时，它工作正常。有什么想法吗？

# php - PHP 404 响应和重定向

> ID：14465107
> 
> 赞同：1
> 
> 时间：2013-01-22T18:02:55.943
> 
> 标签：php, apache, redirect, http-status-code-404

我知道我可以使用 .htaccess 简单地设置一个 404 错误页面。

据我了解，如果找不到页面，则会将错误发送回浏览器并显示 404 页面。用户可能知道也可能不知道这个“错误”。

我想做的是允许用户输入 page1.php、page2.php、page3.php 等，然后转到分别打印 page1、page2、page3 等的页面。

原因是 page1、page2、page3 等的逻辑非常相似。我认为将用户发送到同一页面可能更容易，然后使用 PHP 服务器变量计算要做什么：确定这是否是页面是否有效，然后抛出 404 错误或打印正确的消息。

这可能吗？还是只是一个愚蠢的想法？

我希望 url 不受影响并保持用户键入的状态。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:27:18.573

这绝对不是一个愚蠢的想法。

提供内容的实例，如果没有找到内容，则提供错误页面，是 Web 服务器。如果您想在 PHP 中处理该逻辑，您可以告诉 Web 服务器将所有请求传递给*同一个*PHP 文件。然后，您可以使用该`$_SERVER`变量来确定用户请求的内容并提供内容并发送正确的状态代码（例如`404`）。

在 Apache 中，如果您使用的是 2.2.16 或更高版本，则可以定义一个[后备资源。](http://httpd.apache.org/docs/2.2/rewrite/remapping.html#fallback-resource)这会将对不存在文件的请求重定向到指定文件。

```
<Directory /var/www/my_blog>
  FallbackResource index.php
</Directory> 
```

在较旧的 Apache 版本中，您可以使用`mod_rewrite`重定向请求：

```
<Directory /var/www/my_blog>
  RewriteBase /my_blog

  RewriteCond /var/www/my_blog/%{REQUEST_FILENAME} !-f
  RewriteCond /var/www/my_blog/%{REQUEST_FILENAME} !-d
  RewriteRule ^ index.php [PT]
</Directory> 
```

# php - 为什么调用 ob_flush() 会大大减慢我的延迟？

> ID：14465113
> 
> 赞同：4
> 
> 时间：2013-01-22T18:03:28.410
> 
> 标签：php, apache, buffer

我正在用 PHP 编写一个应用程序，我决定自己做一些测试以确定 PHP 处理缓冲区和缓冲的能力。`ob_start()`具体来说，我想看看手动调用`ob_flush()`是否会对我的程序产生巨大影响。

我变出 10KB 的 lorem ipsum 并开始工作。我在 PHP 中在 for 循环的开始和结束处放置了一个计时器，该循环将 10KB 的lipsum（在 display:none div 块中）写入 100 次，总共 1MB 的数据，我认为随机 CPU 的工作就足够了load 不会过多地丢弃我的数据。

除了 PHP 计时器，我打开 Chrome 的开发者工具 (F12) 并记录了“时间”和“延迟”字段。如果我的术语正确，“时间”是页面响应和渲染所花费的总时间，而“延迟”只是页面首次从服务器接收数据之前的时间。

所以这就是奥秘：当我只写 10KB 的lipsum 100x 时，我的平均值是：

```
PHP Time: 0.00630ms
Chrome Time: 565.6ms
Chrome Latency: 28.3ms 
```

当我`ob_start()`在一开始和`ob_flush()`最后打电话时：

```
PHP Time: 0.00792ms
Chrome Time: 540ms
Chrome Latency: 33ms 
```

然而，这就是谜团——**当我打电话时`ob_start()`，`ob_flush()`在每个 10KB 文本块的开头和结尾时，我的 Chrome 报告的延迟会增加 4 倍。**

```
PHP Time: 0.005814ms
Chrome Time: 624.7ms
Chrome Latency: 134.9ms ??? 
```

据我所知，chrome 延迟应该**减少**100 倍，因为我正在通过 PHP 输出刷新缓冲区的 1/100。我知道`ob_start()`and`ob_flush()`在更高的缓冲区上运行，并且它们实际上会刷新到较低的缓冲区中，我希望较低的缓冲区以相同的间隔刷新，这意味着我会看到大约相同的延迟。

我的测试设备是一个非常普通的英特尔 ATOM 上网本，配备 Nvidia ION 显卡、Windows 7 家庭高级版（32 位）和运行 Apache 2.2.22 的 WAMPserver，几乎没有默认设置。我用的是 Chrome 24.0.1312.52 m。在测试期间 CPU 负载适中但不是 100%，而且我的内存远未满。

测试代码： http: [//pastebin.com/zf62Y4yz](http://pastebin.com/zf62Y4yz)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:09:04.860

`ob_flush`将内容发送给客户端。通过让 PHP 确定何时执行此操作或一次执行所有`ob_flush`操作，它可以有效地批量发送内部 http 消息。当您在任意点手动分解它时，在这种情况下，每 10K 您正在破坏并强制执行至少一个手动包传输。这种传输到客户端的延迟可能高于实际的 php 缓冲区刷新。

# ios - 在 MonoTouch 中从 CoreGraphics 加载图像资源

> ID：14465121
> 
> 赞同：1
> 
> 时间：2013-01-22T18:04:16.477
> 
> 标签：ios, ios4, xamarin.ios, core-graphics

是否可以使用 MonoTouch 从 CoreGraphics 加载图像资源？

如果是这样，怎么做？

我在 MonoTouch 框架中找不到任何可以让我这样做的东西。

仅供参考，我希望使用 CoreGraphics 来执行此操作，而不是使用 CoreImage。我希望我的应用程序与 iOS4+ 兼容，因此考虑到这一点的任何方式都是可以接受的。

仅供参考，我已经有了我需要的资产对象。我只需要把它变成用户可以在屏幕上看到的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:30:26.767

以下是如何`CGImage`使用 a将 .PNG 加载到 a 中`CGDataProvider`，然后`UIImage`从中初始化 an（类似于您之前关于 CoreImage 的问题）。

```
string file = Path.Combine (NSBundle.MainBundle.ResourcePath, "image.png");
using (var dp = new CGDataProvider (file))
using (var img = CGImage.FromPNG (dp, null, false, CGColorRenderingIntent.Default))
using (var ui = new UIImage (img, 1.0f, UIImageOrientation.Up)) {
    Assert.IsNotNull (ui.CGImage, "CGImage");
} 
```

`FromJPEG`如果您有 JPEG 图像（或根据您的 URL 文件扩展名自动调整），您可以使用该方法。

# java - 从 m 个集合中获取 n 个元素的所有不同组合

> ID：14465122
> 
> 赞同：3
> 
> 时间：2013-01-22T18:04:20.250
> 
> 标签：java, algorithm, math

我正在尝试构建一种算法，该算法从多场比赛中选择 4 匹马的组合。

假设我们有 10 场比赛，每场比赛有 8 匹马在奔跑：我想要这些比赛中 4 匹马的所有组合，条件是 4 匹马必须来自不同的比赛（同一组合中的两匹马不能来自同一个种族）。

这个问题（和现有算法）有名称吗？

我想这只是一系列循环，但我今天没有喝咖啡......干杯

编辑：我应该说对于每个组合，我对组合执行相当长的功能，所以我不想重复我已经完成的组合。

编辑：有比这更好的方法吗？

```
 n = number of races;
            for ( int i = 0; i < n; i++ ) {
                for ( int j = i + 1; j < n; j++ ) {
                    for ( int k = j + 1; k < n; k++ ) {
                        for (int l = k + 1; l < n; l++) {
                            //for each combination of 4 separate sets
                            for(int p = 0; p < races.get(i).getHorses().size(); p++){
                                for(int q = 0; q < races.get(j).getHorses().size(); q++){
                                    for(int r = 0; r < races.get(k).getHorses().size(); r++){
                                        for(int s = 0; s < races.get(l).getHorses().size(); s++){
                                            //each combination of 4 horses
                                            races.get(i).getHorses().get(p)
                                            races.get(j).getHorses().get(q)
                                            races.get(k).getHorses().get(r)
                                            races.get(l).getHorses().get(s)
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:09:25.703

我不太确定，但[Chase 的 Twiddle（算法）](http://www.netlib.no/netlib/toms/382)可以帮助解决您的问题。

请检查：- Phillip J Chase，“[算法 382：M 出 N 个对象的组合](http://dl.acm.org/citation.cfm?id=362502)”（1970 年）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:20:03.250

基本上你有两个问题。从10场比赛中选择4场比赛（顺序无关紧要），即10场！/ (6! * 4!) 或 210 种组合。然后，对于 4 场比赛的每种组合，您可以选择每场比赛的 8 匹马中的任何一匹，即 8^4 或 4096。

# ruby - 在这种情况下，Ruby 运算符 == 做了什么？

> ID：14465124
> 
> 赞同：0
> 
> 时间：2013-01-22T18:04:24.667
> 
> 标签：ruby

我目前正在查看[来自优秀 Rails-composer 的一段代码，但](https://github.com/RailsApps/rails-composer/blob/28855c7a55a2773188d03f5e40d2d35efe35fb28/files/app/views/layouts/_messages-bootstrap.html.erb)我不明白第三行中的 Embedded Ruby 做了什么：

```
<% flash.each do |name, msg| %>
  <% if msg.is_a?(String) %>
    <div class="alert alert-<%= name == :notice ? "success" : "error" %>">
      <a class="close" data-dismiss="alert">&#215;</a>
      <%= content_tag :div, msg, :id => "flash_#{name}" %>
    </div>
  <% end %>
<% end %> 
```

到目前为止，我已经查看了[Ruby 文档，但没有运气。](http://www.ruby-doc.org/docs/ProgrammingRuby/)一旦我理解了这段代码是如何工作的，我想扩展它以支持所有级别的`flash[]`消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T18:09:06.190

这是[**三元运算符**](http://en.wikipedia.org/wiki/%3F:#Ruby)。

```
(condition) ? "true value" : "false value" 
```

意思是 if `name == :notice`use `"success"`else `"error"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:15:14.830

这条线

```
result = (name == :notice ? "success" : "error") 
```

可以翻译成：

```
result =""
if(name == :notice)
{
 result = "success"
}
else
{
 result = "error"
} 
```

在您的情况下，结果不是变量，但它的值被粘贴到 html。

**编辑**

> 我想扩展它以支持所有级别的 flash[] 消息。

这个运算符通常只用于简单的真假条件，但如果你真的想要你可以像这样使用它：

```
name == :notice ? "success" : name == :error ? "error" : "something else" 
```

考虑改用这个（更具可读性）

```
if name == :notice
 "success"
elsif name == :error
 "error"
else
 "something else"
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:21:41.433

该代码动态更改 div 类。它检查 :notice 并且 div 类将获得：

*   “警报警报成功”
*   “警报警报错误”

取决于 :notice 结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T18:11:31.753

它正在显示闪存的内容。flash的每个键值对都显示为一个单独的div，div的类取决于key。

第 3 行根据键是否为 :notice 添加了一类 alert-success 或 alert-failure

# javascript - 未捕获的类型错误：无法设置未定义的属性“已禁用”-在结帐过程中 Magento

> ID：14465126
> 
> 赞同：0
> 
> 时间：2013-01-22T18:04:27.730
> 
> 标签：javascript, magento, dom-events, e-commerce, magento-1.7

我在我的网站 ilgirastore.com 的单页结帐的 Javascript 文件中遇到了这个问题，当客户登录而不是未注册的结帐时会发生这种情况，可能我希望在我重新加载页面后与某些扩展名发生冲突当我在这里[https://ilgirastore.com/checkout/onepage/](https://ilgirastore.com/checkout/onepage/)并且我第二次单击继续按钮时，问题不会再次触发，我可以继续结帐。有什么建议么？触发异常的函数是这样的：

```
_disableEnableAll: function(element, isDisabled) {
    var descendants = element.descendants();
    for (var k in descendants) {
        descendants[k].disabled = isDisabled;
    }
    element.disabled = isDisabled;
} 
```

该文件在这里：http: [//ilgirastore.com/skin/frontend/default/shopper/js/opcheckout.js](http://ilgirastore.com/skin/frontend/default/shopper/js/opcheckout.js) 我正在使用 Magento CE 1.7.0.2 您可以自由地使用假订单进行测试，只需编写测试或随机的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T06:45:34.797

问题可能出在这里， `for (var k in descendants)`因为 JavaScript 中的 foreach 没有按预期工作，它可能会遍历对象的任何属性、它的原型、内部的其他对象等等，你无法确定它得到了什么.

尝试这个

```
_disableEnableAll: function(element, isDisabled) {
    var descendants = element.descendants();
    var keys = Object.keys(descendants);
    for (var k = 0; k < keys.length; k += 1) {
        descendants[keys[k]].disabled = isDisabled;
    }
    element.disabled = isDisabled;
} 
```

后代也可能是一个数组，而不是一个对象，在这种情况下试试这个

```
_disableEnableAll: function(element, isDisabled) {
    var descendants = element.descendants();
    for (var k = 0; k < descendants.length; k += 1) {
        descendants[k].disabled = isDisabled;
    }
    element.disabled = isDisabled;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:05:25.227

对我来说，这个错误是由 twitter 提要（或其他社交插件）引起的。

# jquery - jquery 撤消函数绑定

> ID：14465128
> 
> 赞同：0
> 
> 时间：2013-01-22T18:04:33.550
> 
> 标签：jquery

我将以下内容与地址选择器一起使用。

HTML

```
<form>
<input id="searchByLoc" type='checkbox' >
<input id="searchQuery" type='text' >
<input type="submit' value="search">
</form> 
```

查询：

```
$('#searchByLoc:checkbox ').live('change', function(){
    if($(this).is(':checked')){
        var addresspicker=$(this).addresspicker();//alert('checked');
    } else {
         //I want to un initialize the addresspicker() on the input field
         var addresspicker=die($(this).addresspicker());//alert('un-checked');
    }
}); 
```

我在上面的 ELSE 部分遇到了一些问题。如果未选中该复选框，如何停止初始化以不建议任何位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:06:36.017

使用 jquery 的 unbind() 函数。它将删除该事件。[jQuery绑定](http://api.jquery.com/unbind/)

您还可以查看此帖子以获取最佳使用[方法来删除事件](https://stackoverflow.com/questions/209029/best-way-to-remove-an-event-handler-in-jquery)

低于 jquery 1.7

```
$('#yourDomElement').unbind('click'); 
```

jQuery 1.7+

```
$('#yourDomElement').off('click'); 
```

# c# - WPF - PreviewMouseLeftButtonDown 找到 e.OriginalSource 的视觉拥有控件

> ID：14465132
> 
> 赞同：1
> 
> 时间：2013-01-22T18:04:49.827
> 
> 标签：c#, wpf, events, visual-tree, logical-tree

很简单的问题。

我已附加到 PreviewMouseLeftButtonDown 事件。我知道这个事件隧道，所以视觉树中的第一项将被标记为 e.OriginalSource。

例子：

我有一个名为“MainGrid”的网格。此 Grid 包含一个标签。

如果我在该网格上设置 PreviewMouseLeftButtonDown 事件并单击标签，则将触发 PreviewMouseLeftButtonDown 事件。

为此，MouseButtonEventArgs 包含一个 OriginalSource (e.OriginalSource)。根据我在标签内单击的位置，这可能是一个边框……这可能是一个文本块，也可能是一个边框。

我想走可视化树并找到“MainGrid”。我知道执行此操作的递归方法，但是如果我不知道所有者的类型怎么办。我只知道我想找到所有者（即这需要是通用的）。

类似“e.OriginalSource.ORIGINAL_OWNER”的东西

如果不清楚，将很乐意详细说明。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:10:58.833

听起来你只是在寻找[`e.Source`](http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.source.aspx)？

# javascript - 如何为 Node.js 应用程序管理基于 requireJS 的包

> ID：14465133
> 
> 赞同：2
> 
> 时间：2013-01-22T18:04:52.017
> 
> 标签：javascript, node.js, requirejs

自从遇到 RequireJS 我已经开始全心全意地采用它，因为它似乎是组织依赖关系等的好方法。

对于我当前的项目，我创建了一个由 requireJS 组织的模块的“包”，它将为许多 node.js 应用程序提供所需的数据库 API。

但是我遇到了一个绊脚石......我怎样才能允许第三方应用程序使用我的包，而不需要使用 requireJS？

我的应用程序和 API 的目录结构目前如下：

```
api_package/node_modules
api_package/controllers/*
api_package/views/*
api_package/helpers/*
api_package/models/*
api_package/main.js

application_1/node_modules
application_1/app.js

application_2/node_modules
application_2/app.js 
```

我需要我的应用程序是独立的 - 这样它们就可以轻松部署 - 所以我目前的工作是将 api_package/* 复制到 application_1 和 2 的“node_modules”目录中，并将它们的 requirejs 配置设置为以下：

```
(function() {
  var requirejs;

  requirejs = require('requirejs').config({
    baseUrl: __dirname,
    nodeRequire: require,
    packages: [
      {
        name: 'api_package',
        location: './node_modules/api_package'
      }
    ]
  }); 
```

这感觉有点肮脏和错误！

有没有更好的办法？我是否缺少 requireJS 的一些打包功能？

是否甚至可以隐藏我的 api_package 的实现细节（细节是我正在使用 requireJS）并允许应用程序像使用任何其他模块一样使用它：

```
require('api_package') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:55:49.340

您可以使用该`amdefine`包，它允许您编写 AMD API 并让模块在节点程序中工作，而无需其他程序使用 AMD。

除了[amdefine github 页面](https://github.com/jrburke/amdefine)[上的文档之外，RequireJS 网站上](http://www.requirejs.org/docs/node.html)也有相关文档。

# java - 行人模拟 Java

> ID：14465139
> 
> 赞同：0
> 
> 时间：2013-01-22T18:05:19.653
> 
> 标签：java, simulation

我最近看了这个[视频](https://www.youtube.com/watch?v=Cw1b_RYi784)，并对复制显示的内容感兴趣。我面临的主要问题是决定如何开始。我有一些想法，但我不确定它们是否正确，甚至远程正确。发布视频的人的评论表明使用了微积分，我还没有学过（请注意，我只是在高中）。此外，用户已经在 python 中给出了[代码](http://pastebin.com/meQcwfWw)，但我在 python 中没有效率来深入理解它。

这是我的想法：

1.  建立一个代表一个“人”的类
    1.  类将包含一个“喷射”“粒子”以指示其位置的方法
    2.  环顾四周并调整其位置的检查方法
2.  将设置人员的初始位置并启动程序的主类

如您所见，该计划不是很详细，但这个想法会奏效吗？如果没有，我可以采取哪些路线来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:08:16.200

从您的主要环境开始 - 图形。围绕 OpenGL 有一些微妙的包装`LWJGL`，也有成熟的游戏引擎，如`jMonkeyEngine`. 如果您遵循他们的教程，您将非常清楚如何将您的域映射到对象并基于模拟渲染它们。

至于模拟的想法，这就是我喜欢 OOP 的原因——你从人类行为的角度来思考，并将其直接映射到对象及其行为（方法）中。所以你的想法肯定会奏效。很抱歉这样一个笼统的答案，但它是对一个笼统问题的平等回应。

# kml - KML 可视化数据文件

> ID：14465145
> 
> 赞同：1
> 
> 时间：2013-01-22T18:05:27.017
> 
> 标签：kml

我正在尝试使用 GE 可视化大量天气数据（数据可能会不时更改）。理想情况下，用户可以输入包含位置和天气数据的数据文件。我想知道如何动态创建 KML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:14:31.203

根据您上面的评论，您将从以下两个来源之一获得 KML 数据：请参阅我对这个问题的回答：[在 Maps API V2 中导入 KML](https://stackoverflow.com/questions/14442275/import-kml-in-maps-api-v2/14442632#14442632)（我将忽略作者在此处提供的解决方案）：

如果您可以通过公开的 URL 访问 KML，请遵循 API 的这一部分：[https](https://developers.google.com/kml/documentation/mapsSupport) ://developers.google.com/kml/documentation/mapsSupport 。

如果您想加载本地存储的 KML 文件（即您在服务器上获得一个 .txt 文件），您需要自己解析它们。每种语言都有用于执行此操作的库。以 Javascript 为例：[http ://code.google.com/p/geoxml3/](http://code.google.com/p/geoxml3/)

如果您最终使用 API 执行此操作（您的 kml/kmz 可作为 URL 使用），您的 JavaScript 代码非常简单：

`google.maps.Map`从地图变量是您的对象的 JavaScript API 中的 URL 加载 KML 的 API 调用。

```
var geoLayer = new google.maps.KmlLayer('URL');
geoLayer.setMap(map); 
```

**更新**

请注意，此线程也与您的问题相关，如果使用 GE 插件，您确实有其他选项来加载您的 KML。[无法使用 fetchkml 函数将本地 KMZ 文件加载到带有谷歌地球插件的浏览器中](https://stackoverflow.com/questions/14613726/unable-to-load-a-local-kmz-file-into-a-browser-with-the-google-earth-plugin-usin)

# axis2 - AXIS2 Web 服务 .NET 客户端创建“指定”属性

> ID：14465148
> 
> 赞同：3
> 
> 时间：2013-01-22T18:05:30.667
> 
> 标签：axis2

在调用使用 Visual Studio 2008 中的 Eclipse 4.2 创建的 Java AXIS2 1.6.2 Web 服务时，每个对象生成的代码都包括所有非字符串参数的以“指定”结尾的附加布尔属性。比我必须将其设置为 Ture。否则，当它到达服务器时，参数为空。我每次都必须设置它非常烦人。有什么办法绕过去？？？

例如：

```
public Customer {
    public String name {
        get;
        set;
    }
    public int? age {
      get;
      set;
    }
    public bool ageSpecified {
      get;
      set;
    }
} 
```

# lucene - 用户特定的 Lucene 搜索

> ID：14465149
> 
> 赞同：0
> 
> 时间：2013-01-22T18:05:35.163
> 
> 标签：lucene

我不认为这是一个非常模糊的 Lucene 问题，但不知何故，我似乎无法找到一个好的解决方案。我将使用一个例子。

假设我正在建立一个新闻文章网站。注册用户可以收藏他们感兴趣的文章。我想让用户**只搜索他/她收藏**的文章。作为示例，我们还假设一个用户可能会为数千篇文章添加书签，并且我们的数据库中有数十万用户。我如何为这个问题构建一个可扩展的解决方案？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:04:53.563

这是一个非常典型的 Lucene 问题，因为它不支持连接。更具体地说，没有一流的支持，您必须找到解决方法。我可以推荐几个：

1.  你可以有一个数据库，它有`users`,`articles`和`bookmarks`表（后者会有指向前两个的外键）。您还可以在 Lucene 中索引文章。在对文章进行搜索时，您可以编写一个 Lucene `Filter`，它将排除当前用户未添加书签的所有文章。

2.  您可以为 Lucene 中的所有文章和书签编制索引 - 如果您使用单独的索引这样做可能是最好的。然后你可以运行一个书签查询（检索当前用户收藏了哪些文章），然后运行另一个单独的文章查询。与前面的示例一样，您可以使用第一个查询的结果来排除当前用户未添加书签的所有其他文章。

我个人更喜欢选项#1，因为这是经典的关系结构，而数据库正是为此目的而设计的。使用选项#2，当用户被删除时，您必须同时修改用户存储和 Lucene 索引。

# python - 使用 Python 对文本文件进行排序

> ID：14465154
> 
> 赞同：6
> 
> 时间：2013-01-22T18:05:56.543
> 
> 标签：python, algorithm, file, sorting

我有一个包含超过 1000 万行的文本文件。像这样的行：

```
37024469;196672001;255.0000000000
37024469;196665001;396.0000000000
37024469;196664001;396.0000000000
37024469;196399002;85.0000000000
37024469;160507001;264.0000000000
37024469;160506001;264.0000000000 
```

如您所见，分隔符是“;”。我想根据第二个元素使用 python 对这个文本文件进行排序。我无法使用拆分功能。因为它会导致 MemoryError。我该如何管理它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-22T18:10:47.297

不要对内存中的 1000 万行进行排序。而是分批拆分：

*   运行 100 100k 行排序（使用文件作为迭代器，结合`islice()`或类似选择一个批次）。写出到其他地方的单独文件。

*   合并排序的文件。这是一个合并生成器，您可以传递 100 个打开的文件，它会按排序顺序生成行。逐行写入新文件：

    ```
    import operator

    def mergeiter(*iterables, **kwargs):
        """Given a set of sorted iterables, yield the next value in merged order

        Takes an optional `key` callable to compare values by.
        """
        iterables = [iter(it) for it in iterables]
        iterables = {i: [next(it), i, it] for i, it in enumerate(iterables)}
        if 'key' not in kwargs:
            key = operator.itemgetter(0)
        else:
            key = lambda item, key=kwargs['key']: key(item[0])

        while True:
            value, i, it = min(iterables.values(), key=key)
            yield value
            try:
                iterables[i][0] = next(it)
            except StopIteration:
                del iterables[i]
                if not iterables:
                    raise 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-06T06:11:53.420

Based on [Sorting a million 32-bit integers in 2MB of RAM using Python](http://neopythonic.blogspot.ru/2008/10/sorting-million-32-bit-integers-in-2mb.html):

```
import sys
from functools import partial
from heapq import merge
from tempfile import TemporaryFile

# define sorting criteria
def second_column(line, default=float("inf")):
    try:
        return int(line.split(";", 2)[1]) # use int() for numeric sort
    except (IndexError, ValueError):
        return default # a key for non-integer or non-existent 2nd column

# sort lines in small batches, write intermediate results to temporary files
sorted_files = []
nbytes = 1 << 20 # load around nbytes bytes at a time
for lines in iter(partial(sys.stdin.readlines, nbytes), []):
    lines.sort(key=second_column) # sort current batch
    f = TemporaryFile("w+")
    f.writelines(lines)
    f.seek(0) # rewind
    sorted_files.append(f)

# merge & write the result
sys.stdout.writelines(merge(*sorted_files, key=second_column))

# clean up
for f in sorted_files:
    f.close() # temporary file is deleted when it closes 
```

[`heapq.merge()` has `key` parameter since Python 3.5](https://docs.python.org/3.5/library/heapq.html#heapq.merge). You could try [`mergeiter()` from Martijn Pieters' answer](https://stackoverflow.com/a/14465236/4279) instead or do [Schwartzian transform](http://en.wikipedia.org/wiki/Schwartzian_transform) on older Python versions:

```
iters = [((second_column(line), line) for line in file)
         for file in sorted_files] # note: this makes the sort unstable
sorted_lines = (line for _, line in merge(*iters))
sys.stdout.writelines(sorted_lines) 
```

Usage:

```
$ python sort-k2-n.py < input.txt > output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:12:01.810

您可以通过`os.system()`调用 bash 函数来完成`sort`

```
sort -k2 yourFile.txt 
```

# .htaccess - 如果仅尝试访问主页，则 htaccess 重定向

> ID：14465155
> 
> 赞同：0
> 
> 时间：2013-01-22T18:05:58.740
> 
> 标签：.htaccess, redirect, mobile

我使用了以下描述的方法：[Mobile Redirect using htaccess to redirect mobile](https://stackoverflow.com/questions/3680463/mobile-redirect-using-htaccess)。效果很好。

现在，我的客户想要做的是，如果有人在移动设备上，如果他们试图访问不是主页，那么他们不会被重定向。因此，如果他们正在打开主页，则重定向会正常工作。例如，如果他们正在打开博客等其他任何内容，则它不会重定向到移动网站。因此，他们被重定向的唯一时间是他们试图访问主页。

# javascript - 谷歌可视化完整浏览器窗口

> ID：14465159
> 
> 赞同：0
> 
> 时间：2013-01-22T18:06:07.563
> 
> 标签：javascript, html, google-visualization

我有这个谷歌可视化，我想在我的浏览器窗口上全屏显示：http: [//cl.ly/image/1y0U1m1o2m0m](http://cl.ly/image/1y0U1m1o2m0m)

代码是：

```
<html>
  <head>
    <meta charset="utf-8">
    <title>

    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("jquery", "1.4.2");
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Create and populate the data table.
        var a = <?=$elos?>;
        var data = google.visualization.arrayToDataTable(a);

        var options = {
          title: 'blah blah blah',
          //curveType: "function",
          width: $(window).width(),
          height: $(window).height(),
          vAxis: {
            minValue:800,
            maxValue:2000,
            textStyle: {color: 'black'}
          },
          legend:{position: 'none'}
        };

        // Create and draw the visualization.
        new google.visualization.LineChart(document.getElementById('visualization')).
            draw(data, options);
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body>
    <div id="visualization"></div>
  </body>
</html> 
```

即使它设置为窗口大小并为窗口大小创建一个矩形，图表周围仍有很多可用空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:18:56.167

使图表为整页大小：

```
chartArea: {width: '90%', height: '90%'} 
```

# internet-explorer - Internet Explorer 9 - 打印时未显示网页标题 (document.title)

> ID：14465161
> 
> 赞同：0
> 
> 时间：2013-01-22T18:06:18.543
> 
> 标签：internet-explorer, printing, web, google-chrome-frame

我正在尝试让网页标题显示在我网站的印刷版上。我的目标是 IE9（安装了 Chrome Frame）。我已使用以下 JavaScript 成功更改了标题

```
document.title = "my title"; 
```

我通过在 IE9 选项卡上看到的标题确认了这一点。

我假设设置了一些安全权限，这些权限会干扰页面标题的打印。我在本地创建了一个非常小的基本网页，可以正确打印网页标题（用上面的 JS 更改网页标题），但是什么会阻止我更复杂的网站打印文档标题？我读过一些 ActiveX 设置可以做到这一点。

另一件需要注意的事情是，在我的复杂网站上，当它在本地简单网站上时，打印预览选项不存在。也许这是相关的？任何输入表示赞赏，谢谢！

编辑：我确实尝试过重置 IE（删除所有数据和附加组件），但无济于事。这是示例代码（对于我制作的复杂网站和本地简单网站）。就像我上面所说的，我已经确认 document.title 可以（并且确实）被改变，我只是对为什么没有打印页面标题感到困惑。

```
<script type="text/javascript">
    $(document).ready(
        $('#myDiv').on('click', function(){
            document.title = 'my custom title';
        });
    );      
</script> 
```

**更新：** 我仍然没有找到解决方案，但过了一段时间我确定这是**Google Chrome Frame 的问题**。事实证明，在页面上启用 Google Chrome Frame 会破坏 IE 的打印功能；具体来说，它不会打印任何页眉/页脚、日期、打印网站的当前/总页数或 URL。当在 IE9 的页面上启用 GCF 时，打印预览甚至不再是一个选择 - 我的猜测是因为 GC 在一个屏幕中处理 IE9 定义为打印和打印预览的内容，GCF 只是禁用它。我在这篇文章中添加了 GCF 作为标签，但我不确定如何进一步解决我的问题。我可以说 GCF 显然是这里的问题。如果其他人看到这个并且有同样的问题，请给我发消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:17:17.217

可以配置打印页面的布局。

可以删除标题（与页码或源 URL 完全相同）

您对此无能为力。

你可以做的是一个用于打印的 CSS 资源，它将显示一个特殊的标题（不是标题），只有在打印时才可见。

# jquery-ui - jQ UI Dialog的敲除初始化请求空数据：Chrome中的URL

> ID：14465167
> 
> 赞同：0
> 
> 时间：2013-01-22T18:06:33.990
> 
> 标签：jquery-ui, google-chrome, knockout.js

我在`24.0.1312.52 m`使用 jQuery 1.8.2、jQuery UI 1.8.23 和 Knockout 2.2.0 的页面上的 Google Chrome 版本中出现错误。当我加载页面时，对一个简单的 URL 的 HTTP 请求失败`GET data: HTTP/1.1`，它是从初始化 jQuery UI 对话框的语句生成的（代码见帖子底部）。该页面工作正常，但这会导致状态栏和 JS 控制台中出现错误，我想避免吓到我的用户。该错误不会出现在 IE 9 或 FireFox 15.0.1 中，但会出现在 Safari 5.1.7 (Windows) 中。在 Chrome Inspector 中，错误的调用堆栈如下所示：

```
GET data:  jquery.min.js:2
    a.getComputedStyle.bH                      jquery.min.js:2
    p.extend.css                               jquery.min.js:2
    bZ                                         jquery.min.js:2
    b$                                         jquery.min.js:2
    p.fn.extend.show                           jquery.min.js:2
    p.each.p.fn.(anonymous function)           jquery.min.js:2
    a.fn.extend.show                           jquery-ui.min.js:5
    a.widget._create._renderAxis               jquery-ui.min.js:5
    a.widget._create                           jquery-ui.min.js:5
    a.Widget._createWidget                     jquery-ui.min.js:5
    a.widget.a.(anon function).(anon function) jquery-ui.min.js:5
    a.widget.bridge.a.fn.(anonymous function)  jquery-ui.min.js:5
    p.extend.each                              jquery.min.js:2
    p.fn.p.each                                jquery.min.js:2
    a.widget.bridge.a.fn.(anonymous function)  jquery-ui.min.js:5
    a.widget._makeResizable                    jquery-ui.min.js:5
    a.widget._create                           jquery-ui.min.js:5
    a.Widget._createWidget                     jquery-ui.min.js:5
    a.widget.a.(anon function).(anon function) jquery-ui.min.js:5
    a.widget.bridge.a.fn.(anonymous function)  jquery-ui.min.js:5
    p.extend.each                              jquery.min.js:2
    p.fn.p.each                                jquery.min.js:2
    a.widget.bridge.a.fn.(anonymous  function) jquery-ui.min.js:5
    ko.bindingHandlers.jqDialog.init           QualityWalkViewModel.js:78
    b.j.W                                      knockout-2.2.0.js:11
    g                                          knockout-2.2.0.js:43
    b.j                                        knockout-2.2.0.js:45
    W                                          knockout-2.2.0.js:10
    X                                          knockout-2.2.0.js:12
    Y                                          knockout-2.2.0.js:12
    X                                          knockout-2.2.0.js:12
    Y                                          knockout-2.2.0.js:12
    X                                          knockout-2.2.0.js:12
    b.Ca                                       knockout-2.2.0.js:58
    registerVM                                 3896:378
    (anonymous function)                       3896:362
    p.Callbacks.k                              jquery.min.js:2
    p.Callbacks.l.fireWith                     jquery.min.js:2
    p.extend.ready                             jquery.min.js:2
    D                                          jquery.min.js:2 
```

它在三个地方引用了我的脚本：

```
ko.bindingHandlers.jqDialog.init     QualityWalkViewModel.js:78
registerVM                           3896:378
(anonymous function)                 3896:362 
```

3896 是页面的名称（它是 URL 的 ID 段，例如 `/WalkThrough/Edit/3896`）。引用行的代码是：

```
(anonymous function)                 3896:362
360    <script type="text/javascript">
361    $( function() {
362        registerVM();                          <--- here

registerVM                           3896:378
374    <script type="text/javascript">
375        var vm; // debug
376        function registerVM() {
377            vm = new QualityWalkViewModel( initialQualityWalkData );
378            ko.applyBindings( vm );            <--- here
379        }

QualityWalkViewModel.js:78
68    ko.bindingHandlers.jqDialog = {
69        init: function( element, valueAccessor ) {
70            var options = ko.utils.unwrapObservable( valueAccessor() ) || {};
71            
72            // handle disposal
73            ko.utils.domNodeDisposal.addDisposeCallback( element, function() {
74                $( element ).dialog('destroy');
75            });
76    
77            // init the dialog
78            $( element ).dialog( options );     <--- here
79        }
80    }; 
```

最后一个脚本是一个自定义绑定处理程序，用于初始化 jQuery UI 对话框，改编自[http://jsfiddle.net/rniemeyer/WpnTU/](http://jsfiddle.net/rniemeyer/WpnTU/)，以响应[JQuery 对话框中的 MVC Knockout JS](https://stackoverflow.com/questions/7436160/mvc-knockout-js-inside-jquery-dialog)

如果我注释掉这一行`$( element ).dialog( options );`，错误就会消失。知道为什么 jQuery UI 会生成一个空`data:`url 并尝试请求它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T01:26:25.007

固定的。罪魁祸首是第 260 行左右的`data:`url，在[http://bugs.jqueryui.com/ticket/7233](http://bugs.jqueryui.com/ticket/7233)`jquery-ui.css`有一些讨论：

```
.ui-resizable-handle { background-image:url(data:); } 
```

我不知道为什么他们认为这是一个更好的主意

```
.ui-resizable-handle { background-image: none; } 
```

这就是我覆盖规则的原因，现在 Chrome 中没有页面错误。在某些时候，我需要在 jQUI 错误跟踪器中注册并发布更新。

# c# - 如何为电子阅读器应用程序显示大量文本

> ID：14465172
> 
> 赞同：0
> 
> 时间：2013-01-22T18:06:46.593
> 
> 标签：c#, layout, windows-runtime

我需要创建一个具有电子阅读器功能的 Windows 商店应用程序。我必须提供流畅的阅读体验。目前，我显示文本的知识包括在 UI 上放置文本块或文本框。我不知道如何显示大量文本来创建我正在寻找的电子阅读器体验。我应该使用哪个控件或控件组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:53:34.500

您的文本渲染选项是

XAML 控件

*   文本块
*   富文本块
*   WebView + WebViewBrush

DirectWrite - 以上所有最终使用的内容。您可以通过 SharpDX 将它与 C# 一起使用。

如果您需要进行测量等，这些控件有时使用起来可能有点麻烦，并且可能不会像 DirectWrite 那样为您提供强大的功能或性能，但会给您支持文本选择、复制到剪贴板等（确保IsTextSelectionEnabled 设置为 true）。

为了在 TextBlock 中[测量分页显示的文本](https://stackoverflow.com/questions/10556019/how-to-calculate-the-textbock-height-and-width-in-on-load-if-i-create-textblock)尺寸 - 在后面的代码中创建一个 TextBlock 并调用 Measure() 和 Arrange()，然后获取 ActualWidth/ActualHeight 以获取测量值。

阅读 Charles Petzold 的[分页原理一](http://msdn.microsoft.com/en-us/magazine/hh205757.aspx)文。

考虑在[ReadQuick 应用程序中使用的](http://readquickapp.com/)[快速串行视觉演示 (RSVP)](http://en.wikipedia.org/wiki/Speed_reading#Rapid_Serial_Visual_Presentation_.28RSVP.29)速读方法。

# jquery - .toggle() 替换 jQuery 1.8+

> ID：14465173
> 
> 赞同：0
> 
> 时间：2013-01-22T18:06:50.337
> 
> 标签：jquery

> **可能重复：**
> [替代支持 eventData 的 jQuery 的 .toggle() 方法？](https://stackoverflow.com/questions/2459153/alternative-to-jquerys-toggle-method-that-supports-eventdata)

我只是想知道是否有[`.toggle()`](http://api.jquery.com/toggle-event/)用于将两个事件处理程序绑定到交替点击的函数的替代方法（不是切换可见性的函数）。

它在 jQuery 1.8 中已被弃用，并在 1.9 版中被删除。我只是想知道现在是否有另一个函数能够做到这一点，而我在 jQuery 1.8+ 中不会意识到这一点。我不想要一个如何自己制作的例子，我只想知道 jQuery 中是否有另一个能够做同样事情的函数。

# jquery - 多个ajax调用等待最后一个加载，然后执行

> ID：14465177
> 
> 赞同：17
> 
> 时间：2013-01-22T18:07:02.393
> 
> 标签：jquery, ajax

我有多个同时运行的 ajax 查询，我希望它们等待最后一个返回，然后在所有 ajax 调用上运行成功处理程序。对于一个简化的示例，请考虑：

```
$.ajax({//ajax call 1
    url:page1.php,
    success: function(data1){
        //do something with data1
    }
});

....

$.ajax({//ajax call 2
    url:page2.php,
    success: function(data2){
        //do something with data2
    }
});
//consider more than just two concurrent requests 
```

假设所有请求同时发送。由于它们是异步的，它们将在不同的时间返回。假设一个请求需要 100 毫秒才能返回，而另一个请求需要 3000 毫秒才能返回。我显然不知道哪个会第一个或最后一个返回。它们都以某种方式更新 DOM，我希望在一次更新时立即向查看器显示这些更改。我该怎么做呢？

我能想到的最好的方法是将 data1 和 data2 保存为全局变量。然后有一个计数器变量，每次返回成功时计数。然后，在 counter==TOTAL_NUM_REQUESTS 调用类似 updateAll() 的函数，然后遍历所有全局变量并将它们放在需要去的地方。但这似乎很混乱并且容易出错。另外，这将是很多全局变量。

我理想中想要的是让成功处理程序在返回时休眠，然后在我将所有它们都计算为返回的条件下，向它们发送唤醒消息，它们可以恢复执行。这似乎是最干净的，但我不知道 javascriptland 中有这样的功能。

有人对此有任何巧妙的想法吗？

**答案更新**

感谢下面的李，我能够得到一个解决方案。我的解决方案看起来类似于他的下面。我构建了一个`async`分配给 $.ajax 调用的变量列表。最初，那些 ajax 调用的成功处理程序仍在被调用，所以我将它们删除并将它们放在另一个函数中，该函数随后将由`when`我编写的这个块调用。我`results`像这样传递给函数：

```
var results = [];
results.push(async1);
results.push(async2);
... for all the results ...

$.when.apply(this, results).done(function() {
   for(var i=0;i<arguments.length;i++){
     dataobject=arguments[i][0]
     if(dataobject.variousattribute)
       mySuccessHandlerFirstGuy(dataobject)
     else if(dataobject.anotherattribute)
       mySuccessHandlerSecondGuy(dataobject)
       //etc ....
   }
}; 
```

arguments 对象需要做一些工作来弄清楚它是什么。这是一个二维数组（列表列表）。第一个索引表示对应于给定 ajax 请求的返回对象。这*似乎*是有序的，但最好让您的服务器返回您可以查找的内容并相应地编写一个 if/else 块。然后，在该给定元素中，该列表中似乎有 3 个元素。第一个是从服务器返回的值，即您想要的值。第二个总是一个 string `success`，你大概可以用它来检查调用是否有效。该列表中的第三个元素似乎是初始请求（尽管我不确定）。这对我没有用。

无论如何，我希望这对将来的某人有所帮助。再次感谢 Lee 为我指明了正确的方向。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-22T18:12:58.453

当所有 ajax 调用完成时，使用 jQuery $.when() 函数运行一些东西：

[jQuery.when 文档](http://api.jquery.com/jQuery.when/)

```
var async1 = $.ajax({//ajax call 1
    url:page1.php,
    success: function(data1){
        //do something with data1
    }
});

....

var async2 = $.ajax({//ajax call 2
    url:page2.php,
    success: function(data2){
        //do something with data2
    }
});

$.when(async2, async1).done(function(result2, result1) {
    ... do this when both are successful ...
}); 
```

**在回答问题时添加：**

如果你有一堆 ajax 调用，你可以像这样使用“应用”：

```
var results = [];
results.push(async1);
results.push(async2);
... for all the results ...

$.when.apply(this, results).done(function() {
    ... use 'arguments' array to get results ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:13:35.880

这可能以与您已经提出的非常相似的方式完成。

首先，创建全局变量`var sleep = true`和`var request_count = 0`. 然后启动一个计时器，`request_count`每隔一秒左右检查一次请求的总数。然后，您的成功函数可以递增`request_counter`，然后开始循环直到`sleep == false`。然后，当通过计时器运行的监控功能检测到`request_count == TOTAL_REQUESTS`它设置`sleep = false`时，您的所有成功功能都会在那时继续他们的业务。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-09T01:33:27.593

一个简单的解决方案是使用 PreloaderQ 模块

[https://www.npmjs.com/package/preloaderq](https://www.npmjs.com/package/preloaderq)

如下使用

```
var preloader = new PreloaderQ()
preloader.setEmptyCallback(function(){
    //all tasks are finished
})

preloader.setFirstTaskCallback(function(){
    //started first task
})

preloader.enqueueTask('ajax1')

$.ajax({//ajax call 1
    url:page1.php,
    success: function(data1){
        prealoader.dequeueTask('ajax1')
        //do something with data1
    }
});

preloader.enqueueTask('ajax2')

$.ajax({//ajax call 1
    url:page2.php,
    success: function(data2){
        prealoader.dequeueTask('ajax2')
        //do something with data2
    }
}); 
```

两者都完成后将调用emptycallback

# jquery - JQuery：尝试向 UF Validator 添加自定义验证

> ID：14465179
> 
> 赞同：0
> 
> 时间：2013-01-22T18:07:03.757
> 
> 标签：jquery, regex, validation

我在一个项目中使用[UF Validator](http://labs.utopicfarm.com/ufvalidator/)，我想添加一些自定义验证检查。

我想添加一个用户名检查，如果输入包含 az 0-9 以外的任何内容，则该检查会给出错误。没有空格或任何东西。同样，我想添加一个名称检查，只允许 az，但允许空格。

我的检查基于内置的电子邮件验证。这是过滤器：

```
var mail_filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/; 
```

这是电子邮件检查的代码：

```
// E-MAIL VALIDATION
    if (obj.hasClass('req-email')) {
        tmpresult = mail_filter.test(valAttr);
        if (!tmpresult) errorTxt = (valAttr == '') ? opts.errorMsg.reqMailEmpty : opts.errorMsg.reqMailNotValid;
        result = result && tmpresult;
    } 
```

这是我的过滤器：

```
var username_filter = /^[a-zA-Z0-9]/;
var name_filter = /^[a-zA-Z ]/; 
```

这是我的代码：

```
// USERNAME VALIDATION
    if (obj.hasClass('req-username')) {
        tmpresult = username_filter.test(valAttr);
        if (!tmpresult) errorTxt = (valAttr == '') ? opts.errorMsg.reqUsernameEmpty : opts.errorMsg.reqUsernameNotValid;
        result = result && tmpresult;
    }
// NAME VALIDATION
    if (obj.hasClass('req-name')) {
        tmpresult = name_filter.test(valAttr);
        if (!tmpresult) errorTxt = (valAttr == '') ? opts.errorMsg.reqNameEmpty : opts.errorMsg.reqNameNotValid;
        result = result && tmpresult;
    } 
```

我在这里也引用了它们：

```
// gather inputs & check is valid
    $(merged_options.scope+' .req-email, '+merged_options.scope+' .req-string, '+merged_options.scope+' .req-same, '+merged_options.scope+' .req-both, '+merged_options.scope+' .req-numeric, '+merged_options.scope+' .req-date, '+merged_options.scope+' .req-min, '+merged_options.scope+' .req-username, '+merged_options.scope+' .req-name').each(function() {
        thisValid = $.formValidator.validate($(this),merged_options);
        boolValid = boolValid && thisValid.error;
        if (!thisValid.error) errorMsg  = thisValid.message;
    }); 
```

相应的错误消息也存在，但我认为它们不需要显示。

我认为这会很好，但是当我尝试时，它的行为很奇怪。显示错误的错误消息，而不是按照我想要的方式验证它。我检查了他们的网站并在此处搜索，但找不到与此相关的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:35:21.840

您的正则表达式仅测试字符串开头是否存在单个字符。
您需要添加一个`+`来表示您要匹配*一个或多个*字符，例如`[a-z\d]+`，或者您可以指定一个范围。

例如，下面的正则表达式指定字符串长度必须在 1 到 20 个字符之间。

```
var username_filter = /^[a-z\d]{1,20}$/i;
var name_filter = /^[a-z ]{1,20}$/i; 
```

需要结束字符`$`，或者您只是指定必须在字符串开头的内容。

该`i`标志表示不区分大小写的匹配，假设这是您想要的； `\d`相当于`[0-9]`。

# php - 如何使用函数从mysql中提取多行

> ID：14465182
> 
> 赞同：0
> 
> 时间：2013-01-22T18:07:21.307
> 
> 标签：php, mysql

如何使用函数从数据库中提取多行？

我的功能是：

```
function search($subject, $table) {
    $query = "SELECT {$subject} ";
    $query .= "FROM {$table} ";
    $content = mysql_query($query);
    return $content;
} 
```

在调用该函数的页面上，我拥有：

```
if (isset($_POST['search'])){
    $search = $_POST['search'];
}

$content = search($subjectName, $tableName);

while ($results = mysql_fetch_assoc($content)){
    $phrase = $results[$subjectName];
    //if phrase exists in database
    if (strpos($search,$phrase) !== false) {
        echo $phrase;
    //if phrase does not exist in database
    } else {
        echo 'fail';    
} 
```

此设置不起作用，但是，如果我将所有内容都放入它的功能中：

```
function search($subject, $table, $where = 0, $is = 0) {
    global $search;
    $query = "SELECT {$subject} ";
    $query .= "FROM {$table} ";
    if ($where > 0) {
        $query .= "WHERE {$where} = '{$is}' ";
    }
    $content = mysql_query($query);
    while ($results = mysql_fetch_assoc($content)){
        $phrase = $results[$subject];
        //if phrase exists in database
        if (strpos($search,$phrase) !== false) {
            echo $phrase;
        //if phrase does not exist in database
        } else {
            echo 'fail';
        }
    }
    return $content;
} 
```

在页面上：

```
search('main_subject', 'main_search'); 
```

问题是我想在 if 语句中再次调用该函数以使其搜索另一个短语。有没有更简单的方法来做到这一点？

编辑：当前设置将第一项拉入无限循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:24:39.840

这里有很多问题需要解决：

首先，如果您尝试在字段中搜索特定的部分匹配项，您可能希望使用 SQL`LIKE`构造。

```
SELECT field FROM table WHERE field LIKE '%search phrase%' 
```

这样做将消除您遍历每一行尝试对搜索短语进行字符串比较的需要，因为您只会返回与搜索短语匹配的行，仅此而已。

其次，`global`用于使数据可用于您的功能是非常糟糕的做法。您确实应该将函数所需的任何数据作为参数传递给函数。这将包括您的搜索字符串，可能还有您的数据库连接/对象。

```
function search($field, $table, $search, $db) {
    ...
} 
```

第三，您现在根本没有采取任何措施来防止 SQL 注入。您需要转义输入数据，或者最好使用准备好的语句。

第四，你真的不应该使用这些`mysql_*`功能。它们已被弃用。尝试使用`mysqli`or `PDO`（我强烈建议您继续学习如何将准备好的语句与其中任何一个一起使用。）您可以从`mysqli`开始`mysql_*`更喜欢面向对象的用法）。

第五，你原来的问题。如果您想搜索多个短语，可以采取几种方法。您可以像这样一次传递所有短语：

```
SELECT field FROM table WHERE field LIKE '%search phrase%' OR field LIKE '%another search phrase%' 
```

或者，您可以只进行迭代函数调用以获得您想要的结果。这实际上取决于您是否只想在第一个短语不成功时搜索第二个短语（使用迭代方法），或者您是否只想在一个查询中找到所有可能的匹配项（使用 LIKE-OR-LIKE 方法）。

# python - 模拟模式下的 Python 代码

> ID：14465183
> 
> 赞同：2
> 
> 时间：2013-01-22T18:07:21.057
> 
> 标签：python

我有一个从命令行读取输出的python代码：

```
import subprocess

def get_prg_output():
    p = subprocess.Popen(['ls', '-l'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    out, err = p.communicate()
    return out

print get_prg_output() 
```

在我的办公室里，我想以这种模式模拟结果：

```
def get_prg_output():
    return 'ok - program executed'

print get_prg_output() 
```

有没有一种优雅的方法可以在不注释掉原始功能的情况下做到这一点？

我试过这个：

```
import subprocess

debug = True

if not debug:
    def get_prg_output():
        p = subprocess.Popen(['ls', '-l'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        out, err = p.communicate()
        return out
else:
    def get_prg_output():
        return 'ok - program executed'
print get_prg_output() 
```

但我不喜欢它。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:10:04.683

我会做这样的事情：

```
def _get_prg_output_real():
    p = subprocess.Popen(['ls', '-l'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    out, err = p.communicate()
    return out

def _get_prg_output_fake():
    return 'ok - program executed' 
```

您可以在此处切换：

```
get_prg_output = _get_prg_output_fake 
```

或者

```
get_prg_output = _get_prg_output_real 
```

基于用户输入、命令行参数或配置文件或注释/取消注释单行代码...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:10:04.483

```
def get_prg_output_fake():
    return 'ok - program executed' 
```

然后，如果您想启用此模拟，只需执行

```
get_prg_output=get_prg_output_fake 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:27:42.030

我会使用环境变量（或命令开关）自己控制它，这样您就不必更改代码来测试。

```
import os
import subprocess

def _get_prg_output_real():
    p = subprocess.Popen(['ls', '-l'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    out, err = p.communicate()
    return out

def _get_prg_output_fake():
    return 'ok - program executed'

if os.environ.get('DEBUG').lower() == 'true':
    get_prg_output = _get_prg_output_fake
else:
    get_prg_output = get_prg_output_real 
```

# android - HTTP 请求中的 WebView cookie

> ID：14465185
> 
> 赞同：1
> 
> 时间：2013-01-22T18:07:29.553
> 
> 标签：android

是否可以在 HTTP 请求中使用 WebView 的 cookie？如果是，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:42:17.273

CookieManager 就是您要找的东西！

```
CookieSyncManager.createInstance(context) 
```

创建经理

```
CookieSyncManager.getInstance().startSync() 
```

在 Activity.onResume() 中，并调用

```
 CookieSyncManager.getInstance().stopSync() 
```

在 Activity.onPause() 中。

要获得即时同步而不是等待计时器触发，主机可以调用

```
 CookieSyncManager.getInstance().sync() 
```

请注意，即使 sync() 也是异步发生的，所以不要在您的活动正在关闭时执行此操作。

以下是您可能会如何使用它：

```
// use cookies to remember a logged in status   
CookieSyncManager.createInstance(this);
CookieSyncManager.getInstance().startSync();
WebView webview = new WebView(this);
webview.getSettings().setJavaScriptEnabled(true);
setContentView(webview);      
webview.loadUrl([MY URL]); 
```

[从这个问题引用](https://stackoverflow.com/questions/2566485/webview-and-cookies-on-android)

编辑：如果你想用 HttpClient 来做，你需要创建一个 HttpContext。

```
// Create a local instance of cookie store
CookieStore cookieStore = new BasicCookieStore();

// Create local HTTP context
HttpContext localContext = new BasicHttpContext();
// Bind custom cookie store to the local context
localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

HttpGet httpget = new HttpGet("http://www.google.com/"); 

System.out.println("executing request " + httpget.getURI());

// Pass local context as a parameter
HttpResponse response = httpclient.execute(httpget, localContext); 
```

[从这个问题引用](https://stackoverflow.com/questions/3587254/how-do-i-manage-cookies-with-httpclient-in-android-and-or-java)

# c# - 获取 Windows 上给定路径的可用磁盘可用空间

> ID：14465187
> 
> 赞同：15
> 
> 时间：2013-01-22T18:07:35.420
> 
> 标签：c#, windows

> **可能重复：**
> [以编程方式确定 UNC 路径中的可用空间](https://stackoverflow.com/questions/2050343/programmatically-determining-space-available-from-unc-path)

我正在尝试找到一个可以从 C# 调用来检索该信息的函数。这是我到目前为止所尝试的：

```
String folder = "z:\myfolder"; // It works
folder = "\\mycomputer\myfolder"; // It doesn't work

System.IO.DriveInfo drive = new System.IO.DriveInfo(folder);
System.IO.DriveInfo a = new System.IO.DriveInfo(drive.Name);
long HDPercentageUsed = 100 - (100 * a.AvailableFreeSpace / a.TotalSize); 
```

这工作正常，但前提是我传递了一个驱动器号。有没有办法通过整个路径来检索可用空间？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-22T18:12:08.893

尝试使用 winapi 函数[GetDiskFreeSpaceEx](http://www.pinvoke.net/default.aspx/kernel32.GetDiskFreeSpaceEx)：

```
[DllImport("kernel32.dll", SetLastError=true, CharSet=CharSet.Auto)]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool GetDiskFreeSpaceEx(string lpDirectoryName,
   out ulong lpFreeBytesAvailable,
   out ulong lpTotalNumberOfBytes,
   out ulong lpTotalNumberOfFreeBytes);

ulong FreeBytesAvailable;
ulong TotalNumberOfBytes;
ulong TotalNumberOfFreeBytes;

bool success = GetDiskFreeSpaceEx(@"\\mycomputer\myfolder",
                                  out FreeBytesAvailable,
                                  out TotalNumberOfBytes,
                                  out TotalNumberOfFreeBytes);
if(!success)
    throw new System.ComponentModel.Win32Exception();

Console.WriteLine("Free Bytes Available:      {0,15:D}", FreeBytesAvailable);
Console.WriteLine("Total Number Of Bytes:     {0,15:D}", TotalNumberOfBytes);
Console.WriteLine("Total Number Of FreeBytes: {0,15:D}", TotalNumberOfFreeBytes); 
```

# xcode - 基础知识 - IOS 中的 Hello Image

> ID：14465188
> 
> 赞同：0
> 
> 时间：2013-01-22T18:07:36.507
> 
> 标签：xcode, cocoa-touch

[如何创建具有背景和旋转图像的 iPhone 应用程序](https://stackoverflow.com/questions/14464074/how-do-i-create-an-iphone-app-with-background-and-rotating-images)的答案？说，“然后在 Interface Builder 或 Storyboard 上，从库中拖动一个 Image View（也称为 UIImageView）并将其放在你的画布上，”

我是IOS的新手。如何“从库中拖动图像视图”？我通过界面环顾四周，没有看到库的开口，我可以从中拖动图像视图。在屏幕的 LHS 上有一个 Frameworks 文件夹，让我可以选择 UIImageView.h 并尝试拖动它（我不能将它放在情节提要上）。

如何导航到 Xcode 中的库并对其进行操作，以便将 UIImageView / Image View 拖到情节提要上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:26:52.060

1.  点击`Cmd`+`1`显示*项目导航器*
2.  选择情节提要文件将其打开
3.  点击`Ctrl`+ `alt`+ `Cmd`+`3`显示*对象库*（出现在左下角）
4.  在列表中查找图像视图项（您可以使用搜索字段过滤列表）
5.  将此对象拖到画布或文档大纲中

# jquery - 悬停时动画div高度不断扩展/折叠jQuery

> ID：14465199
> 
> 赞同：0
> 
> 时间：2013-01-22T18:08:32.690
> 
> 标签：jquery, hover, jquery-animate

我目前正在我的网站上添加一个交互式菜单，提供有关鼠标悬停某些功能的信息。
单个列表项在鼠标悬停/鼠标悬停时展开/折叠它们的信息，但是当悬停一个列表项时，它会将其他项目向下推，导致它们穿过您的光标，从而使它们展开，这可能会发生很多次，因此它会在展开和折叠状态之间不断反弹很多次。

如果您将光标移动到列表项上几次，您可以强制执行我正在尝试修复的错误。

我认为必须有一种方法来防止某些列表项的无意扩展。例如，使当前展开的项目必须在另一个可以打开之前折叠？但我不知道如何用代码语言表达。

这是我正在谈论的元素：http: [//jsfiddle.net/JHLQv/3/](http://jsfiddle.net/JHLQv/3/)

下面是我如何编码扩展/折叠机制。下面的代码中包含有关前 2 个列表项的信息，但我对每个列表项都有这样的信息，只是为了让您知道。

```
$("#li_bar_1").hover(
function() {
  $(div_expandable).animate({
    height: '+=130'
    }, 'slow'
  );
},
function() {
  $(div_expandable).animate({
    height: '-=130px'
    }, 'slow'
  );
}
);
$("#li_bar_2").hover(
function() {
  $(div_expandable_2).animate({
    height: '+=130'
    }, 'slow'
  );
},
function() {
  $(div_expandable_2).animate({
    height: '-=130px'
    }, 'slow'
  );
}
); 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:15:42.697

我想你应该使用这个插件[Hover Intent](http://cherne.net/brian/resources/jquery.hoverIntent.html)来防止这种行为。

# .net - 有什么工具可以将我的 CE 数据库升级到 4.0？

> ID：14465206
> 
> 赞同：0
> 
> 时间：2013-01-22T18:08:50.060
> 
> 标签：.net, sql-server-ce-4

我在创建 .NET 项目时遇到问题。我已经有一些扩展名为***.sdf***的数据库，每当我打算连接到它时，我都会收到以下错误：

```
The database file has been created by an earlier version of SQL Server Compact. Please upgrade using SqlCeEngine.Upgrade() method. 
```

此外，我尝试使用以下代码段升级我的数据库：

```
@using System.Data.SqlServerCe
@{
    var connStringCI = "Data Source= CRM.sdf;";
    SqlCeEngine engine = new SqlCeEngine(connStringCI);   
    engine.Upgrade(connStringCI);
} 
```

这次我得到以下编译错误（虽然我已经在我的项目中包含了 .dll 文件）

```
System.Data.SqlServerCe.SqlCeEngine' does not contain a definition for 'Upgrade' and no extension method 'Upgrade' accepting a first argument of type 'System.Data.SqlServerCe.SqlCeEngine' could be found (are you missing a using directive or an assembly reference?) 
```

所以我决定使用可以为我进行升级的第三方工具。可以介绍一个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T06:37:10.033

您必须参考 System.Data.SqlServerCe.dll 版本 4.0.0.0 才能运行 Upgrade()

# php - PHP 错误：open_basedir 限制生效

> ID：14465212
> 
> 赞同：1
> 
> 时间：2013-01-22T18:09:06.557
> 
> 标签：php, require-once, open-basedir

我使用这个 Yubico 身份验证 PHP 类：[https](https://github.com/Yubico/php-yubico) ://github.com/Yubico/php-yubico 。我使用以下代码创建 php 文件 test.php：

```
<?php
 require_once 'Auth/Yubico.php';
 $otp = "ccbbddeertkrctjkkcglfndnlihhnvekchkcctif";

 # Generate a new id+key from https://api.yubico.com/get-api-key/
 $yubi = new Auth_Yubico('42', 'FOOBAR=');
 $auth = $yubi->verify($otp);
 if (PEAR::isError($auth)) {
    print "<p>Authentication failed: " . $auth->getMessage();
    print "<p>Debug output from server: " . $yubi->getLastResponse();
 } else {
    print "<p>You are authenticated!";
 }
?> 
```

并在这个 github 库中执行所有指令。当我打开这个脚本时，我得到：

> 警告：require_once()：open_basedir 限制生效。文件（/usr/share/php/Auth/Yubico.php）不在允许的路径中：/var/www/hmci/data/www/hmci 中的 (/var/www/hmci/data:.)第 2 行的 .ru/php-yubico/test.php 警告：require_once(/usr/share/php/Auth/Yubico.php)：无法打开流：/var/www/hmci/data/www 中不允许操作/hmci.ru/php-yubico/test.php 在第 2 行致命错误：require_once(): 无法打开所需的 'Auth/Yubico.php' (include_path='.:/usr/share/php:/usr/share/ pear') 在第 2 行的 /var/www/hmci/data/www/hmci.ru/php-yubico/test.php

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:19:20.097

`open_basedir`是限制 PHP 访问特定目录的 PHP 选项。

您在包含路径中拥有该目录`/usr/share/php`，但无权访问它。`include_path`通常，PHP 会一一尝试所有路径。`Auth/Yubico.php`这意味着 PHP在当前目录中找不到文件，所以 PHP 在`/usr/share/php`next 中搜索。

确保您要包含的文件确实存在。您还可以`/usr/share/php`从包含路径中删除（通过编辑`php.ini`文件，如果您可以访问它，或者使用该`ini_set()`方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-26T17:12:08.503

使用要包含的文件的显式路径会导致 PHP 跳过目录扫描，从而导致错误：

```
require_once dirname(__FILE__) . '/Auth/Yubico.php'; 
```

# silverlight-5.0 - 我可以确定是否已经按下鼠标按钮来更改光标？

> ID：14465214
> 
> 赞同：1
> 
> 时间：2013-01-22T18:09:16.027
> 
> 标签：silverlight-5.0, out-of-browser, mouse-cursor

我正在为我的 SL 5 OOB 应用程序中的一个控件启用拖放功能。

但是，当用户拖动文件时，光标是我的应用程序各处的“复制文件”光标。

我是否可以确定当光标进入我的应用程序时，鼠标左键是否按下，并适当地更改光标（可放置或不可放置）？

感谢您的任何见解...

# javascript - 用鼠标在缩略图上更改图库中的大图像

> ID：14465218
> 
> 赞同：0
> 
> 时间：2013-01-22T18:09:26.750
> 
> 标签：javascript, hover, gallery, onmouseover, jquery-hover

我目前有一个画廊，当单击较小的图像时，它会更改较大的图像。这是最重要的代码：

```
.n1:focus span
{
background: url('images/Boot.png')
} 
```

然后

```
<a class="thumb n1" href=# tabindex=1>
<img src=images/Boot.png><span>
<img src=""><br>Boot</span></a> 
```

我不知道如何在悬停或鼠标悬停上实现这一点。

这是我需要的一个例子：http: [//thelittleappfactory.com/ripit/](http://thelittleappfactory.com/ripit/)

有没有人有任何见解？我尝试使用 javascript 打开链接 onmousehover，但我的浏览器将其视为弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:07:20.807

首先，您需要有一个缩略图和一个大版本的图像。在您的代码中，您似乎只有一个图像。大图像应使用 css display:none 隐藏并绝对定位，以便它们都在彼此之上。我会使用 jquery 的 mouseenter 和 mouseleave 事件。mouseover 事件在光标移动到元素上时触发，会产生过多的调用。

```
 <div class="item n1">
        <img class="thumb" src="images/boot_thumb.png" alt="boot/>
        <img class="big" src="images/boot_big.png" alt="boot/>
    </div> 
```

这个javascript代码可以解决问题：

```
 $('item').mouseenter(function(){
        $(this).children('big').fadeIn();
    });

    $('item').mouseleave(function(){
        $(this).children('big').fadeOut();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:39:04.510

我实际上找到了一种使用纯 CSS 的方法。我认为这是非常惊人的，因为有人告诉我这是不可能的，而且似乎有必要这样做。这是该技术的源代码：

[http://ostmosis.com/OnHoverChangeImage.zip](http://ostmosis.com/OnHoverChangeImage.zip)

# javascript - 如何在对象表示法 (JSON) 中插入变量字符串？

> ID：14465220
> 
> 赞同：-1
> 
> 时间：2013-01-22T18:09:40.817
> 
> 标签：javascript, jquery, json, object-notation

以这个 JSON 对象为例：

```
"pages": {
    "start": {
        ....
    },
    "page1": {
        ....
    },
    "page2": {
        ....
    },
    ....
} 
```

现在通过 jQuery ajax 函数我加载上面的 JSON 对象并将它的结果保存到一个变量中。到目前为止，一切都很好。然后我有一些像这样的html：

```
<div class="container" page-data="start">
    <h2></h2>
</div>    
<div class="container" page-data="start">
    <h2></h2>
</div>    
<div class="container" page-data="page1">
    <h2></h2>
</div>    
<div class="container" page-data="page2">
    <h2></h2>
</div> 
```

现在我编写了这个函数来使用 JSON 数据：

```
function createContent(el) {
    var page, $obj;
    page = [];
    $obj = el;
    $obj.each(function(index) {
        page[index] = $(this).attr('page-data');
        $(this).find('h2').html(jsonData.pages. + page[index] + .value);
    });
}
//here I start the function
$(document).ready(function(){
    createContent($('.container'));
}); 
```

不起作用的是上述功能的这一部分：

```
$(this).find('h2').html(jsonData.pages. + page[index] + .value); 
```

这很明显，因为 object notaion 不仅仅是一个字符串值。现在，有什么办法可以将它与有效的对象表示法结合起来吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:11:33.777

使用`[]`符号来访问对象成员。

```
...
$(this).find('h2').html(jsonData.pages[page[index]].value);
... 
```

# google-app-engine - 注册应用时自动订阅用户

> ID：14465223
> 
> 赞同：2
> 
> 时间：2013-01-22T18:09:45.577
> 
> 标签：google-app-engine, xmpp, chat, subscription

这是一个非常有趣的问题，我想。我正在使用 google go 中的 xmpp 开发一个聊天应用程序。经过测试，我无法向 google 用户发送聊天消息，除非该用户将我的应用程序添加为联系人或通过 gtalk/chat 在他的 gmail 帐户中启动聊天会话。当用户注册我的应用程序的会员资格时，是否可以订阅我的应用程序？用户服务没有任何属性，也没有哈希、代码或 cookie 供我存储并知道该用户已批准从应用程序发送聊天。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:43:35.613

No, this is not possible. The user has to give explicit permission to add your bot to their contact list; simply signing in is not enough.

# c# - 将 zip 文件中的文件提取到 jar 存档中

> ID：14465230
> 
> 赞同：2
> 
> 时间：2013-01-22T18:10:04.967
> 
> 标签：c#

我有个小问题！我使用 DotNetZip 库在 c# 中开发一个自制的 Minecraft 启动器。所以，这个启动器有一个更新选项，它从服务器下载一个 .zip 文件，并将所有文件从 zip 文件中提取到 minecraft.jar 中！但是一个错误指出“文件已经存在”或者它创建了一个名为 minecraft.jar 的文件夹......有没有可能的方法将文件从 zip 存档中直接提取到其他 zip 存档中？（因为 .jar 与 .zip 几乎相同）这里是下载和提取代码（不要想知道有些文本是德语的）：

```
private void button3_Click(object sender, EventArgs e)
{
    progressBar1.Visible = true; //Dient nur zur Deko
    label1.Text = "Download......";
    WebClient webClient = new WebClient();
    webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
    webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(ProgressChanged);
    webClient.DownloadFileAsync(new Uri("https://dl.dropbox.com/u/97421059/Test.zip"), @"Test.zip"); //Der Link sollte für die Zukünftigen Versionen immer gleich sein!
    button3.Visible = false;

}

private void Completed(object sender, AsyncCompletedEventArgs e)
{
    label1.Text = "Entpacken....."; //In der Box
    progressBar1.Visible = false;
    button3.Visible = true;
    MessageBox.Show("Download abgeschlossen!!\n\rBitte warte bis der Launcher die Dateien entpackt hat."); // Erklärt sich von selbst
    string ExistingZipFile = @"Test.zip";
    string sourceDir = AppDomain.CurrentDomain.BaseDirectory;
    string TargetDirectory = (sourceDir + "minecraft.jar");
    using (ZipFile zip = ZipFile.Read(ExistingZipFile))
    {

        // ab hier komm der restliche script
        // bei dem man eig. nix einstellen soll 
        foreach (ZipEntry ze in zip)
        {
            ze.Extract(TargetDirectory, ExtractExistingFileAction.OverwriteSilently);

        }
        MessageBox.Show("Entpacken der Dateien abgeschlossen!");
        label1.Text = "Entpacken abgeschlossen!";
    }

} 
```

在我粘贴 GemHunter1 代码后（我希望我将名称填写在正确的位置）我没有错误，但在 minecraft.jar 中仍然没有下载 zip 中的任何内容

```
private void Completed(object sender, AsyncCompletedEventArgs e)
{
    label1.Text = "Entpacken....."; //In der Box
    progressBar1.Visible = false;
    button3.Visible = true;
    MessageBox.Show("Download abgeschlossen!!\n\rBitte warte bis der Launcher die Dateien entpackt hat."); // Erklärt sich von selbst
    string ExistingZipFile = @"Test.zip";
    string sourceDir = AppDomain.CurrentDomain.BaseDirectory;
    string TargetDirectory = (sourceDir + "minecraft.jar");
    using (ZipFile zip = ZipFile.Read(ExistingZipFile))
    {

        // ab hier komm der restliche script
        // bei dem man eig. nix einstellen soll 
        if (zip.ContainsEntry("Test.zip"))
        {
            zip.RemoveEntry("Test.zip");
        }
        MessageBox.Show("Entpacken der Dateien abgeschlossen!");
        label1.Text = "Entpacken abgeschlossen!";
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:41:47.343

好的，所以我为您制作了此代码...

```
if (Directory.Exists(temp))
    {
        Directory.Delete(temp, true);
        Directory.CreateDirectory(temp);
    }
    using (ZipFile jar = ZipFile.Read(appdata + "\\.minecraft\\bin\\minecraft.jar"))
    {
        using (ZipFile zip = ZipFile.Read(ExistingZipFile))
        {
            zip.ExtractAll(temp, ExtractExistingFileAction.OverwriteSilently);
        }
        foreach (string file in Directory.GetFiles(temp))
        {
            if (jar.ContainsEntry(file))
            {
                jar.RemoveEntry(file);
            }
            jar.AddFile(file, "\\");
        }
        jar.Save();
        MessageBox.Show("Entpacken der Dateien abgeschlossen!");
        label1.Text = "Entpacken abgeschlossen!";Solved the problem with this code(thanks to GemHunter1 :D ): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:37:57.217

**编辑：** 使用这个：

```
//filename_you_are_going_to_copy is string with name of file with extension, not full path
if (zip.ContainsEntry(filename_you_are_going_to_copy))
{
     zip.RemoveEntry(filename_you_are_going_to_copy);
} 
```

**编辑2：** 在上面的代码写下：

```
mod.AddFile(filename_you_are_going_to_copy); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:53:03.463

使用此代码解决了问题（感谢 GemHunter1 :D ）：

```
 if (Directory.Exists(temp))
    {
        Directory.Delete(temp, true);
        Directory.CreateDirectory(temp);
    }
    using (ZipFile jar = ZipFile.Read(appdata + "\\.minecraft\\bin\\minecraft.jar"))
    {
        using (ZipFile zip = ZipFile.Read(ExistingZipFile))
        {
            zip.ExtractAll(temp, ExtractExistingFileAction.OverwriteSilently);
        }
        foreach (string file in Directory.GetFiles(temp))
        {
            if (jar.ContainsEntry(file))
            {
                jar.RemoveEntry(file);
            }
            jar.AddFile(file, "\\");
        }
        jar.Save();
        MessageBox.Show("Entpacken der Dateien abgeschlossen!");
        label1.Text = "Entpacken abgeschlossen!"; 
```

# javascript - 是否有可以创建我的 javascript 代码层次结构的可视化表示的工具

> ID：14465231
> 
> 赞同：4
> 
> 时间：2013-01-22T18:10:05.300
> 
> 标签：javascript, inheritance, plugins, visualization, hierarchy

我正在寻找一种可以创建我的 JavaScript 代码库的可视化表示的工具。我特别希望看到：

*   A 扩展 B 扩展 C
*   A 有类型 D 的成员
*   A 用于 XML 文件 X
*   理想情况下，该工具将是 Aptana 或 Eclipse 的插件。

*作为旁注：非常感谢您可以建议的任何使跟踪依赖关系更容易的插件：我对 Visual Studio 的**“转到定义”**工具很熟悉，并且真的希望它用于我的 JavaScript。*

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T16:20:08.473

这是迄今为止最好的，也是最近的： [http ://www.objectplayground.com/](http://www.objectplayground.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:45:36.620

听起来您想要为您的 Javascript 代码使用 UML 图。
[https://stackoverflow.com/questions/2802162/javascript-uml-diagrammer](https://stackoverflow.com/questions/2802162/javascript-uml-diagrammer)
[http://objectmix.com/javascript/705504-class-diagrams-javascript.html](http://objectmix.com/javascript/705504-class-diagrams-javascript.html)
[http://jsuml.gaertner-network.de/](http://jsuml.gaertner-network.de/)

至于侧面，注意，依赖管理，[JavaScript依赖管理](https://stackoverflow.com/questions/3202606/javascript-dependency-management)

可能对您来说很有趣的框架， http: [//knockoutjs.com/](http://knockoutjs.com/)

很抱歉只是将您指向其他帖子，但它们似乎解决了您的问题。

# c# - 如何在客户端检查 ListBox 是否为空

> ID：14465233
> 
> 赞同：0
> 
> 时间：2013-01-22T18:10:17.773
> 
> 标签：c#, javascript, asp.net

我创建了一个`javascript confirm`如下。

```
<script Type="Text/Javascript">

function CheckListBox(lvi)
{
    if(lvi == "")
    {
        if(confirm("Are you sure?"))
        {
            return true;
        }
        else
        {
            return false;
        }
    }
}

</script> 
```

我需要测试`ListBox.Items`控件是否为空...我已经在我的 aspx 页面上进行了参考

```
<script language="javascript" type="text/javascript" src="/JS/confirm.js"></script> 
```

我想知道如何在我的`aspx.cs`页面上调用它。. . 所以我可以通过`parameter`：

```
string oi = Listbox_Clubes.Items.Count.ToString();//Its the parameter I want to pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:48:33.670

对于您的 javascript，您可以在没有代码隐藏的情况下获取值（假设脚本代码在同一页面中，以便获取客户端 ID）：

```
 <script>
     function ClickListBox() {
         if ($("#<%= Listbox_Clubes.ClientID  %>").val() === null) {
             if (confirm("Are you sure?")) {
                 return true;
             }
             else {
                 return false;
             }
         }
     }
 </script> 
```

同样，您不使用 javascript 在服务器端进行验证。您发布的代码将返回ListBox 中的**所有**项目。**这是获取所选**项目数量的一种方法（我正在使用`.ToString()`基于 OP 代码示例）：

```
string oi = Listbox_Clubes.Items.Cast<ListItem>().Where(i => i.Selected).Count().ToString(); 
```

但是，您没有理由获取此值并将其传递回客户端进行验证（这听起来像是您想在帖子中执行的操作）。主要是因为这涉及回发，而客户端验证本质上应该在回发之前进行。此外，即使您进行了客户端验证，您仍然需要进行服务器端验证。

相关：在代码隐藏中，您可以测试以查看是否通过以下方式选择了任何内容：

```
bool hasValue = Listbox_Clubes.SelectedItem != null; 
```

`.SelectedItem`返回列表控件中具有最低索引的选定项。当未选择任何内容时，此值为`null`... 所以您知道如果该值不是`null`，则至少选择了一项。

如果您想要求他们至少选择一项，您可以使用[RequireFieldValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)并让它处理两个验证。如果您没有对 ASP.NET 验证器做太多工作，那将是一件值得阅读的好事情。

听起来您可能应该阅读更多有关客户端验证和服务器端验证以及如何使用它们的信息……因为您似乎将它们混合在一起。

*计数代码是[ASP:ListBox Get Selected Items - One Liner 中代码的修改版本？](https://stackoverflow.com/questions/8478992/asplistbox-get-selected-items-one-liner)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:07:01.907

有关如何从后面的代码执行 javascript，请参阅此[链接](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerstartupscript.aspx)

```
protected void Page_Load(object sender, EventArgs e)
{
     ScriptManager.RegisterStartupScript(this, this.GetType(), Guid.NewGuid().ToString(), "CheckListBox(" + Listbox_Clubes.Items.Count.ToString() + ");", false);
} 
```

注意：您必须在 aspx 页面中添加一个 ScriptManager 控件。

# c++ - 具有公共链接的非 POD 对象：应该发生什么？

> ID：14465244
> 
> 赞同：1
> 
> 时间：2013-01-22T18:11:10.000
> 
> 标签：c++

这里有人在文件范围内写了以下内容：

```
std::auto_ptr<ClassWithDestructor> an_auto_ptr; 
```

他们*打算*添加`static`但忽略了它。

然后，两个不同的 linux 共享库，每个都包含包含此声明的 .o，最终链接到一个可执行文件。

该`auto_ptr::~auto_ptr`项目运行了两次，结果很不幸。

这是已定义的行为、未定义的行为还是 gcc+ld 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:35:09.550

这个声明也是一个定义。程序中的同一个对象有两个定义。这违反了一个定义规则，因此违反了未定义的行为。

# node.js - Express.js 应用程序的单元测试与集成测试

> ID：14465245
> 
> 赞同：4
> 
> 时间：2013-01-22T18:11:09.737
> 
> 标签：node.js, express, mocha.js, sinon, supertest

我正在为 Express.js 应用程序编写测试，但我不知道如何在单元测试和集成测试之间进行选择。

目前我尝试过：

单元测试 - 使用 Sinon 进行 stubs/mocks/spies 和 Injects 对模块的依赖注入。使用这种方法，我必须对 MongoDB 和其他外部方法进行存根。

我考虑过对各个路由进行单元测试，然后使用集成测试来验证是否实际调用了正确的路由。

集成测试 - 使用 Supertest 和 Superagent，编写的代码要少得多（无需模拟/存根），但应该存在测试环境（数据库等）

我正在使用 Mocha 来运行两种类型的测试。

我应该如何在这两种不同的方法之间进行选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:23:30.253

你应该两者都做。单元测试每个执行非平凡工作的非辅助方法。通过一些集成测试运行整个事情。如果您发现自己不得不做大量的模拟和存根，这可能是重构的迹象。

# iphone - 应用程序试图呈现一个零模式视图控制器错误

> ID：14465246
> 
> 赞同：0
> 
> 时间：2013-01-22T18:11:13.750
> 
> 标签：iphone, xcode, uitableview, uiwebview

我一直在尝试从 tableview 推送 uiwebview 无济于事。这是我现在拥有的代码，每当我单击单元格时，它都会崩溃并向我显示错误。

课程.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

[tableView deselectRowAtIndexPath:indexPath animated:YES];

if ([[array objectAtIndex:indexPath.row] isEqual:@"GolfClub"])
{
    Blue *changi = [[Blue alloc] initWithNibName:@"Golf Club" bundle:nil];
    [self.navigationController pushViewController:changi animated:YES];
    [changi release];
}
else if ([[array objectAtIndex:indexPath.row] isEqual:@"ExecutiveGolfCourse"])
{
     ExecutiveGolfCourse *egc = [[ExecutiveGolfCourse alloc] initWithNibName:@"Executive Golf Course" bundle:nil];
    [self.navigationController pushViewController:egc animated:YES];
    [egc release];
}

newsClicked.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:newsClicked animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:17:55.450

```
initWithNibName  is not meant for the title of your ViewController 
```

nib 名称实际上是与该 ViewController 关联的 .xib 文件的名称

# jquery - 将变量传递给选择器的jQuery语法

> ID：14465247
> 
> 赞同：0
> 
> 时间：2013-01-22T18:11:14.870
> 
> 标签：jquery, html

我有一个非常基本的问题，我试图将变量传递给以下选择器

```
var image = $('#'+$ID ul li).find('input').eq(0).val(); 
```

但是有一个语法错误我需要改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:12:40.013

我想你只是想要这个：

```
$('#' + $ID + ' ul li')... 
```

你忘了再次打开字符串。

以防万一`$ID`碰巧是一个 jQuery 对象：

```
$('#' + $ID.attr('id') + ' ul li')... 
```

# c++ - 实时保存到 txtfile C++

> ID：14465254
> 
> 赞同：-2
> 
> 时间：2013-01-22T18:11:44.770
> 
> 标签：c++, c++-cli

我有一个问题，我必须将大量数据保存到一个 txt 文件中，问题是我每 100ns 从一个串口接收它们。我能怎么做？我试图将数据放在 RichTextBox 上，但收到线程错误。对不起我的英语不好。

我正在使用 Windows 7 64 位

```
 private: void FindPorts(void)
    {
        array<Object^>^ ListaPorte = SerialPort::GetPortNames();
        this->cmbPort->Items->AddRange(ListaPorte);
    }

private: System::Void btnOpenPort_Click(System::Object^  sender, System::EventArgs^  e)
         {
             if(this->cmbPort->Text==String::Empty || this->cmbBaudRate->Text==String::Empty)
                 this->rtbLog->Text="cmbError";
             else
             {
                 try{
                     if(!this->serialPort->IsOpen)
                     {
                         this->serialPort->PortName = this->cmbPort->Text;
                         this->serialPort->BaudRate = Int32::Parse(this->cmbBaudRate->Text);
                         this->serialPort->Open();
                         this->rtbLog->Text+="Porta aperta\r\n";
                         this->btnOpenPort->Text="Close Port";
                     }
                     else
                     {
                          this->serialPort->Close();
                          this->rtbLog->Text+="Porta chiusa\r\n";
                          this->btnOpenPort->Text="Open Port";
                     }
                 }
                 catch(UnauthorizedAccessException^)
                 {
                    this->rtbLog->Text+="UnauthorizedAccessException\r\n";
                 }
             }
         }

    private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
    {
        if(!lettura)
        {
            lettura = true;
            this->button1->Text="sto leggendo";
        }
        else
        if(lettura)
        {
            lettura=false;
            //rtbLog->Text += letturaBuffer;
            this->button1->Text="sono ferma";
        }
        //serialPort->
    }

    private: System::Void serialPort_DataReceived(System::Object^  sender, System::IO::Ports::SerialDataReceivedEventArgs^  e) 
    {
        if(lettura){
            //letturaBuffer += serialPort->ReadExisting() + "\r\n";
            rtbLog->Text += serialPort->ReadExisting() + "\r\n";
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:17:00.307

如果数据总是以 100ns 的间隔出现，那么使用正常的操作系统，您将无法保持同步。100ns 间隔是 10MHz，因此您应该寻找可以处理该速度的实时操作系统。要实时显示它，您需要轻量级组件，因此实际上您应该对 RichTextBox 进行基准测试并检查它是否可以处理 10MHz。您可能遇到的另一个问题是中断延迟，如果需要 1us 才能获得它，那么您已经错过了 10 次数据传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:02:23.833

您不太可能每 100 ns 获取一次数据：标准串行端口的最大速度为每秒 115,200 位，即最大每秒 11,520 字节。即使您的事件收到的每个字节都收到信号（也不太可能），那是每 87 微秒，而不是每 100 纳秒。

您收到线程错误的原因是因为在`serialPort_DataReceived`线程池线程上调用了该方法，并且只能从 UI 线程访问 UI 组件。让我们解决这个问题，然后担心您想要执行此操作的频率，以及在非 RTOS 中是否可能。

从您的代码来看，您使用的是 WinForms，而不是 WPF。试试这个：

```
void AddAString(String^ s)
{
    this->rtbLog->Text += (s + Environment::NewLine);
}

void serialPort_DataReceived(Object^ sender, SerialDataReceivedEventArgs^ e) 
{
    if(lettura)
    {
        this->BeginInvoke(
            gcnew Action<String^>(this, MyClass::AddAString),
            serialPort->ReadExisting());
    }
} 
```

# sqlite - 带有 ListStore 的 GTK TreeView 不显示任何内容。使用 Python 和 SQLite3

> ID：14465256
> 
> 赞同：1
> 
> 时间：2013-01-22T18:11:49.657
> 
> 标签：sqlite, gtk, pygobject, gtktreeview

我使用 GTK 和 Python 来开发应用程序。我想从 SQLite3 数据库加载 TreeView 元素（1 列）。但是出了点问题（**没有任何错误**）！这是一个完整的代码：

```
#!/usr/bin/python
import sys
import sqlite3 as sqlite
from gi.repository import Gtk
from gi.repository import Notify

def notify(notifer, text, notificationtype=""):
    Notify.init("Application")
    notification = Notify.Notification.new (notifer, text, notificationtype)
    notification.show ()

def get_object(gtkname):
    builder = Gtk.Builder()
    builder.add_from_file("main.ui")
    return builder.get_object(gtkname)

def base_connect(basefile):
    return sqlite.connect(basefile)

class Handler:

    def main_destroy(self, *args):
        Gtk.main_quit(*args)

    def hardwaretool_clicked(self, widget):
        baselist = get_object("subjectlist")
        baselist.clear()
        base = base_connect("subjectbase")
        with base:
            cur = base.cursor()
            cur.execute("SELECT * FROM sub")
            while True:
                row = cur.fetchone()
                if row == None:
                    break
                iter = baselist.append()
                print "row ", row[0]
                baselist.set(iter, 0, row[0])
            cur.close()

    def gamestool_clicked(self, widget):
        print("gamestool clicked!!!!! =)")

    def appstool_clicked(self, widget):
        print("appstool clicked!!!!! =)")

    def fixtool_clicked(self, widget):
        notify("Charmix","Fix Applied", "dialog-ok")

    def brokenfixtool_clicked(self, widget):
        notify("Charmix","Broken Fix Report Sended", "dialog-error")

    def sendfixtool_clicked(self, widget):
        notify("Charmix","Fix Sended", "dialog-information")

class CharmixMain:

    def __init__(self):

        builder = Gtk.Builder()
        builder.add_from_file("main.ui")

        self.window = builder.get_object("main")

        self.subject = builder.get_object("subjectlist")
        self.problem = builder.get_object("problemlist")

        self.toolbar = builder.get_object("toolbar")
        self.hardwaretool = builder.get_object("hardwaretool")
        self.gamestool = builder.get_object("gamestool")
        self.appstool = builder.get_object("appstool")
        self.fixtool = builder.get_object("fixtool")
        self.brokenfixtool = builder.get_object("brokenfixtool")
        self.sendfixtool = builder.get_object("sendfixtool")

        builder.connect_signals(Handler())

        context = self.toolbar.get_style_context()
        context.add_class(Gtk.STYLE_CLASS_PRIMARY_TOOLBAR)

if __name__ == "__main__":
    Charmix = CharmixMain()
    Charmix.window.show()
    Gtk.main() 
```

我对此部分感兴趣（无法正常工作）：

```
def hardwaretool_clicked(self, widget):
        baselist = get_object("subjectlist")
        baselist.clear()
        base = base_connect("subjectbase")
        with base:
            cur = base.cursor()
            cur.execute("SELECT * FROM sub")
            while True:
                row = cur.fetchone()
                if row == None:
                    break
                iter = baselist.append()
                print "row ", row[0]
                baselist.set(iter, 0, row[0])
            cur.close() 
```

TreeView(subjecttree)**不显示任何内容**，但`print "row ", row[0]` **工作正常**并显示所有字符串。

请帮我。也许我需要重新绘制 TreeView 或类似的东西？ **你知道吗，我怎样才能得到它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T01:07:08.453

问题出在你的`get_object`方法上。

当你这样做时：

```
builder = Gtk.Builder()
builder.add_from_file("main.ui") 
```

你实际上是在创建**一个新窗口**；即使您使用相同的 ui 文件，您也在创建一个完全不同的小部件。

解决访问需要使用处理程序处理的小部件问题的一种方法是将它们作为构造函数的参数传递：

```
class Handler(object):
    def __init__(self, widget1, widget2):
        self.widget1 = widget1
        self.widget2 = widget2
... 
```

之后，您可以在处理程序的方法上使用这些小部件。

`connect`以更“解耦”的方式访问小部件的另一种方法是在连接信号时添加要用作方法的最后一个参数的对象；缺点是您必须手动执行此操作（因为 Glade 不提供这种可能性）

```
self.widget.connect('some-signal', handler.handler_method, object_to_use) 
```

# r - ggplot堆积条形图

> ID：14465257
> 
> 赞同：1
> 
> 时间：2013-01-22T18:11:52.460
> 
> 标签：r, ggplot2, stacked

数据链接： [https ://www.dropbox.com/s/ql5jw7eng3plrso/GTAP_MacroValueChange.csv](https://www.dropbox.com/s/ql5jw7eng3plrso/GTAP_MacroValueChange.csv)

代码：

```
 library(ggplot2)
    library(grid)

    #Upload data
    ccmacrosims2 <- read.csv(file = "F:/Purdue University/RA_Position/PhD_ResearchandDissert/PhD_Draft/GTAP-CGE/GTAP_NewAggDatabase/NewFiles/GTAP_MacroValueChange.csv", header=TRUE, sep=",", na.string="NA", dec=".", strip.white=TRUE)

    #Data manipulation for analysis
    ccmacrorsts2 <- as.data.frame(ccmacrosims2)
    ccmacrorsts2[6:10] <- sapply(ccmacrorsts2[6:10],as.numeric)
    ccmacrorsts2 <- droplevels(ccmacrorsts2)
    ccmacrorsts2 <- transform(ccmacrorsts2,region=factor(region,levels=unique(region)))

    #Selecting data of interest
    GDPDecomp1 <- melt(ccmacrorsts2[ccmacrorsts2$region %in% c("TUR","MAR"), ]) 
    GDPDecomp2 <- GDPDecomp1[GDPDecomp1$sres %in% c("AVERAGE"), ]
    GDPDecomp.f <- subset(GDPDecomp2, variable !="GDP")

    #Ploting
    GDPDecompPlot <- ggplot(data = GDPDecomp.f, aes(factor(region),value,  fill=variable))
    GDPDecompPlot + geom_bar(stat="identity", position="stack") + facet_wrap(~tradlib, scales="free_y") +
    theme(axis.text.x = element_text(colour = 'black', angle = 90, size = 12, hjust = 0.5, vjust = 0.5),axis.title.x=element_blank()) + 
    ylab("GDP (Change in $US million)") + theme(axis.text.y = element_text(colour = 'black', size = 12), axis.title.y = element_text(size = 12)) + 
    theme(strip.text.x = element_text(size = 12, hjust = 0.5, vjust = 0.5, face = 'bold')) 
```

手头的问题：使用 ggplot 的条形图（见下文） ![ggplot_barplot](../Images/262ca3e99c5439937c4b1c42cf314784.png)

excel_barplot： ![excel_barplot_sample](../Images/1d09263b07b0676dddaed22b54e78a7f.png)

该图似乎并不能真正正确地表示数据的值。我正在寻找类似于我们从 excel_barplot_sample 获得的东西。例如，将 ggplot 下的面板“TRLIBEU”与使用 excel 的面板进行比较，可以清楚地注意到 ggplot 在堆叠时没有正确捕获数据中的值。

有关如何纠正差异的任何帮助？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:33:18.380

If you need to stack bars in `ggplot2` with negative values then for better result you should make two new data frames - one for positive values and second for negative values.

```
GDPDecomp.f.pos<-GDPDecomp.f[GDPDecomp.f$value>0,]
GDPDecomp.f.neg<-GDPDecomp.f[GDPDecomp.f$value<0,] 
```

Then use each data frame in its own `geom_bar()` call.

```
ggplot()+
  geom_bar(data=GDPDecomp.f.pos,aes(x=factor(region),y=value,fill=variable),stat="identity")+
  geom_bar(data=GDPDecomp.f.neg,aes(x=factor(region),y=value,fill=variable),stat="identity")+
  facet_wrap(~tradlib, scales="free_y") + 
  theme(axis.text.x = element_text(colour = 'black', angle = 90, size = 12, hjust = 0.5, vjust = 0.5),axis.title.x=element_blank()) + 
  ylab("GDP (Change in $US million)") + theme(axis.text.y = element_text(colour = 'black', size = 12), axis.title.y = element_text(size = 12)) + 
  theme(strip.text.x = element_text(size = 12, hjust = 0.5, vjust = 0.5, face = 'bold')) 
```

![enter image description here](../Images/d1b197ad06b70412dca60064c6fa6fbd.png)

# c# - 更新表：数据集或 LINQ

> ID：14465259
> 
> 赞同：0
> 
> 时间：2013-01-22T18:11:55.460
> 
> 标签：c#, asp.net, linq, sql-server-2005, dataset

我正在尝试根据从 Web 应用程序加载到数据表中的输入 csv 文件对 SQL 表执行插入/更新/删除操作。目前，我正在使用 DataSet 进行 CRUD 操作，但想知道使用 LINQ 优于 DataSet 是否有任何优势。我假设代码将减少并且类型更强大，但不确定是否需要切换到 LINQ。任何输入表示赞赏。

**编辑**

这不是批量操作，CSV 最多可能包含 200 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:17:33.707

我使用了非常快的[LumenWorks CSV 阅读器。](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)它有自己的 API 用于提取数据，使用 IDataReader 接口。这是取自 codeplex.com 的一个简短示例。我将它用于我所有的 CSV 项目，因为它读取 CSV 数据的速度非常快。我对它实际上有多快感到惊讶。

如果您要从这样的阅读器出发，那么您实际上是从数据阅读器 API 出发，因此，可能会更轻松地使用数据表（您可以创建与结果集匹配的 DataTable 并轻松复制匹配的数据列到列）。

LINQ 的许多更新可能会变慢，这取决于您使用的是实体框架还是其他东西，以及您使用的是什么风格。一个数据表，恕我直言，可能会更快。我在使用 LINQ 和跟踪大量对象时遇到了问题（如果您使用的是附加实体，而不是使用 POCO）。从 Lumenworks 获取 CSV 文件并将其复制到 DataTable 中，我的表现非常好。

# qt - 如何将 QUrl addQueryItem 移植到 Qt5 的 QUrlQuery？

> ID：14465263
> 
> 赞同：12
> 
> 时间：2013-01-22T18:12:02.903
> 
> 标签：qt, qt5, qurl

4 `Qt`、以下代码使用`QUrl`有效：

```
QUrl u;
foreach (const settings::PostItem & pi, settings.post)
    u.addQueryItem(pi.name, pi.value);
postData = u.encodedQuery(); 
```

**注意**：此代码来自[wkhtmltopdf](https://github.com/antialize/wkhtmltopdf/blob/master/src/lib/multipageloader.cc#L344)，`postData`是一个 QByteArray。

但是，`Qt`5 不再具有该`addQueryItem()`功能。你如何移植这段代码？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-22T18:12:02.903

为了确保与`Qt`4 的兼容性，请在文件顶部添加以下行：

```
#if QT_VERSION >= QT_VERSION_CHECK(5,0,0)
#   include <QUrlQuery>
#endif 
```

这意味着只有在您针对5.0.0 或更高版本进行编译`QUrlQuery`时才会为d。`#include``Qt`

然后在问题中指定的代码上方添加以下行：

```
#if QT_VERSION < QT_VERSION_CHECK(5,0,0) 
```

然后将此代码插入问题中指定的代码下方：

```
#else
    QUrlQuery q;
    foreach (const settings::PostItem & pi, settings.post)
        q.addQueryItem(pi.name, pi.value);
    postData = q.query(QUrl::FullyEncoded).toUtf8();
#endif 
```

**注意**:`toUtf8()`使用是因为`postData`is a`QByteArray`并`query()`返回 a `QString`。`toAscii()`在`Qt`5 中已弃用，但 UTF-8 是 ASCII 的子集，仅在必要时使用 Unicode 字符。

**编辑**：如果您想使用`QUrl`具有 URL 部分的实数，请添加：

```
 QUrl url;
 url.setQuery(q); 
```

# svn - 如何从 svn 复制所有分支和源代码以清除案例

> ID：14465268
> 
> 赞同：0
> 
> 时间：2013-01-22T18:12:21.640
> 
> 标签：svn, unix, clearcase

我的项目已决定从 SVN 转移到 clearcase。所以我们需要移动所有的源代码，从 SVN 分支到清除案例。

任何人都可以提供有关我们如何将文件从 SVN 移动到清除案例的详细信息。

提前致谢

# ios - UISwipeGestureRecognizer 检测滑动对象

> ID：14465269
> 
> 赞同：0
> 
> 时间：2013-01-22T18:12:35.163
> 
> 标签：ios, xcode

我想在滑动 UItextView 时调用一个方法，并确定它的标签。我正在使用这段代码：

```
-(IBAction)donecomment:(id)sender{

UISwipeGestureRecognizer *myLongPressRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(holdpress:)];
[textname addGestureRecognizer:myLongPressRecognizer];

textname.editable = NO;
textname.userInteractionEnabled = YES;

CGRect frame = textname.frame;
frame.size.height = textname.contentSize.height;
textname.frame = frame;

heightInteger = heightInteger + textname.contentSize.height + 6;

[textnameArray addObject:textname];

addComment.hidden = NO;
doneComment.hidden = YES;
cancelComment.hidden = YES;
}

-(void)holdpress:(id)sender{

UITextView *txtChoosen = (UITextView*) sender;

for (UITextView* txt in textnameArray) {
    if (txt.tag == txtChoosen.tag) {

        txt.layer.borderWidth = 5.0f;
        txt.layer.borderColor = [[UIColor whiteColor] CGColor];
    }else{

        txt.layer.borderWidth = 0.0f;
        txt.layer.borderColor = [[UIColor whiteColor] CGColor];
}} 
```

...我收到此错误：原因：'-[PhotoViewController holdpress]：无法识别的选择器已发送到实例 0x22c1a000'

我想我可以使用以下方法解决它：

```
- (void)rightSwipeHandle:(UISwipeGestureRecognizer*)gestureRecognizer 
```

...但使用 htis 意味着删除发件人。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:22:24.770

该错误抱怨名为`holdpress`. 在您发布的代码中，您有一个名为`holdpress:`. 注意区别 - 方法有一个冒号，而错误方法没有。

同样在您发布的代码中，您将手势识别器设置为使用`holdpress:`. 这与您实际拥有的方法正确匹配。那是对的。

由于错误是 about`holdpress`而不是`holdpress:`，您必须有一些其他代码尝试使用`holdpress`选择器而不是`holdpress:`.

贴出的代码是从哪里来的`PhotoViewController`？

在您的代码中搜索对`holdpress`(not `holdpress:`) 的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:34:40.490

最终解决方案：

```
-(IBAction)donecomment:(id)sender{

UISwipeGestureRecognizer *myLongPressRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(leftSwipe:)];
 //[myLongPressRecognizer setDirection:(UISwipeGestureRecognizerDirectionUp)];
[textname addGestureRecognizer:myLongPressRecognizer];

textname.editable = NO;
textname.userInteractionEnabled = YES;

CGRect frame = textname.frame;
frame.size.height = textname.contentSize.height;
textname.frame = frame;

heightInteger = heightInteger + textname.contentSize.height + 6;

[textnameArray addObject:textname];

addComment.hidden = NO;
doneComment.hidden = YES;
cancelComment.hidden = YES;

}

- (void)leftSwipe:(UISwipeGestureRecognizer *)recognizer {

id sender;
UITextView *txtChoosen = (UITextView*) sender;

for (UITextView* txt in textnameArray) {
    if (txt.tag == txtChoosen.tag) {

        txt.layer.borderWidth = 5.0f;
        txt.layer.borderColor = [[UIColor whiteColor] CGColor];
    }else{

        txt.layer.borderWidth = 0.0f;
        txt.layer.borderColor = [[UIColor whiteColor] CGColor];
}} 
```

# ios - 呈现子视图控制器时的 SIGABRT

> ID：14465273
> 
> 赞同：1
> 
> 时间：2013-01-22T18:12:46.417
> 
> 标签：ios, objective-c, uiviewcontroller

我有一个带有内容视图的视图控制器，我试图将一个子视图控制器分配给该内容视图。我的代码适用于 iOS 6.0，但对于 5.0/5.1 会抛出 sigabrt。以下是相关代码：

```
- (void)viewDidAppear:(BOOL)animated {
  [super viewDidAppear:animated];
  ContentWebViewController *initialContentVC = [[ContentWebViewController alloc] init];
  [self addChildViewController:initialContentVC];
  [initialContentVC.view setFrame:self.view.bounds];  // Throws SIGABRT here
  [self.containerView addSubview:initialContentVC.view];
  [initialContentVC didMoveToParentViewController:self];
  self.currentContentVC = initialContentVC;
} 
```

这里发生了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:50:06.747

Xcode 在 IB 的 nib 文件中自动检查了“使用自动布局”。这就是为什么在 6.0 之前的 iOS 上崩溃的原因。取消选中它就可以了。几周前这也让我感到不安，真烦人！

# r - 绘制并报告线性回归的 X 截距 - R

> ID：14465275
> 
> 赞同：4
> 
> 时间：2013-01-22T18:12:48.227
> 
> 标签：r, linear-regression, intercept

我`lm`在 r 中使用线性回归。我想绘制并报告 x 截距。我知道我可以使用代数并通过设置 y = 0 来求解 x，但是有没有办法让 r 向我报告呢？另外，我如何“告诉” r 绘制 x 截距？这是否只需要扩展 x 轴范围以包含它？谢谢。

```
# example r code
plot(y~x)
fit <- lm(y~x)
abline(fit) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:17:33.223

如果要绘制 x 截距，请按照您所说的扩展绘图。您可能需要在 x 和 y 维度上扩展它（使用`xlim=c(0,100)`and`ylim=c(0,100)`或其他），并且您应该注意 R 不会为轴绘制线。`hline`我想您可以根据需要手动添加它们`vline`。

要获得 x 截距的数值，您必须进行代数。

```
> coef(fit)
(Intercept)           x 
  0.8671534   0.4095524 
```

给出 y 截距和斜率，您可以从那里轻松找到 x 截距。

# python - 删除列表中的所有对象

> ID：14465279
> 
> 赞同：42
> 
> 时间：2013-01-22T18:13:14.467
> 
> 标签：python, object, memory, del

我创建了许多对象，然后存储在一个列表中。但是我想在一段时间后删除它们，因为我创建了一个新闻并且不希望我的内存变高（在我的情况下，如果我不删除它，它会跳到 20 gigs 的内存）。

这是一个小代码来说明我想要做什么：

```
class test:
    def __init__(self):
        self.a = "Hello World"
    def kill(self):
        del self

a = test()
b = test()
c = [a,b]

print("1)Before:",a,b)

for i in c:
    del i

for i in c:
    i.kill()   

print("2)After:",a,b) 
```

A 和 B 是我的对象。C 是这两个对象的列表。我正在尝试使用 C 中的 for 循环明确删除它：一次使用 DEL，另一次使用函数。这似乎不起作用，因为打印继续显示对象。

我需要这个，因为我多次创建 100 000 个对象。我第一次创建 100k 对象，第二次创建另一个 100k 但我不需要保留之前的 100k。如果我不删除它们，内存使用率会非常高，非常快。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-22T18:18:22.080

tl;博士;

```
mylist.clear()  # Added in Python 3.3
del mylist[:] 
```

可能是最好的方法来做到这一点。这个答案的其余部分试图解释为什么你的其他一些努力没有奏效。

* * *

cpython 至少适用于引用计数以确定何时删除对象。在这里，您对相同的对象有多个引用。 `a`指的是所`c[0]`引用的同一对象。当你遍历`c`( `for i in c:`) 时，在某些时候`i`也指的是同一个对象。`del`关键字删除单个引用，因此：

```
for i in c:
   del i 
```

在其中创建一个对象的引用`c`，然后删除该引用——但该对象仍有其他引用（`c`例如，一个存储在其中），因此它将持续存在。

以同样的方式：

```
def kill(self):
    del self 
```

仅删除该方法中对该对象的引用。从列表中删除所有引用的一种方法是使用切片分配：

```
mylist = list(range(10000))
mylist[:] = []
print(mylist) 
```

显然，您还可以删除切片以删除适当的对象：

```
del mylist[:]  #This will implicitly call the `__delslice__` or `__delitem__` method. 
```

这将从中删除所有引用，`mylist`并从引用的任何内容中删除引用`mylist`。与简单地删除列表相比——例如

```
mylist = list(range(10000))
b = mylist
del mylist
#here we didn't get all the references to the objects we created ...
print(b) #[0, 1, 2, 3, 4, ...] 
```

最后，最近的 python 修订版添加了一个[`clear`](https://docs.python.org/3.5/tutorial/datastructures.html#data-structures)方法，它做同样的事情`del mylist[:]`。

```
mylist = [1, 2, 3]
mylist.clear()
print(mylist) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-22T18:18:35.090

这是从列表中删除每个项目的方法。

```
del c[:] 
```

下面介绍如何从列表中删除前两项。

```
del c[:2] 
```

以下是如何从列表中删除单个项目（`a`在您的情况下），假设`c`是一个列表。

```
del c[0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-20T09:36:26.890

如果目标是删除对象`a`及其`b`本身（似乎是这种情况），那么形成列表`[a, b]`是没有帮助的。相反，应该保留一个字符串列表，用作这些对象的名称。这些允许人们通过访问`globals()`字典来删除循环中的对象。

```
c = ['a', 'b']
# create and work with a and b    
for i in c:
    del globals()[i] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-23T19:49:56.703

要删除列表中的所有对象，可以直接写`list = []`

这是示例：

```
>>> a = [1, 2, 3]
>>> a
[1, 2, 3]
>>> a = []
>>> a
[] 
```

# json - 测试带有 WCF 服务参数的 POST 请求

> ID：14465287
> 
> 赞同：1
> 
> 时间：2013-01-22T18:13:50.010
> 
> 标签：json, wcf, rest

我创建了一个通过 IIS 在本地托管的 WCF Web 服务。我已经使用 WCF 测试客户端来确认服务是否正常工作，现在我想通过手动 REST 调用进行测试。我正在使用[RESTClient 3.1](http://code.google.com/p/rest-client/)发送 REST 调用。我能够从方法中检索结果，但是我尝试将 JSON 作为参数发送总是会导致参数为空。我究竟做错了什么？我的请求的返回正文是“FAIL :(”提前谢谢！到目前为止，我已经花了一天多的时间来解决这个问题。

**服务合约：**

```
[OperationContract]
    [WebInvoke(
      Method = "POST",
      ResponseFormat = WebMessageFormat.Json,
      BodyStyle = WebMessageBodyStyle.Bare)]
    public string Route2(Position start)
    {
        if (start == null)
        {
            return "FAIL :(";
        }
        else
        {
            return "SUCCESS :)";
        }
    } 
```

** web.config：**

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </modules>
    <handlers>
      <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd"/>
    </handlers>
    <defaultDocument>
      <files>
        <add value="help" />
      </files>
    </defaultDocument>
  </system.webServer>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <services>
      <service name="Primordial.GroundGuidance.Service.GroundGuidanceService">
        <endpoint address="soap" binding="basicHttpBinding" contract="Primordial.GroundGuidance.Service.GroundGuidanceService" />
        <endpoint address="" binding="webHttpBinding" bindingConfiguration=""
      name="web" contract="Primordial.GroundGuidance.Service.GroundGuidanceService"
      kind="webHttpEndpoint" endpointConfiguration="webEndpointWithHelp" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
     </services>
    <standardEndpoints>
      <webHttpEndpoint>
         <standardEndpoint name="webEndpointWithHelp" helpEnabled="true"/>
      </webHttpEndpoint>
    </standardEndpoints>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

因为我使用的是 RESTClient，所以调用不仅仅是一个字符串/文件，而是我拥有的标头值对： Accept: application/json contentType: application/json

正文类型设置为“application/json; charset=UTF-8”正文：

```
{
  "elevation": 0,
  "latitude": 35.31,
  "longitude": -116.41
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:48:27.180

在我的问题又挖了一天之后，它最终变成了我的 JSON，而不是我对 WCF 的使用。我需要在我的 JSON 中指定方法参数名称。对于我的方法

```
[WebInvoke(
      Method = "POST",
      ResponseFormat = WebMessageFormat.Json,
      BodyStyle = WebMessageBodyStyle.WrappedRequest)]
public string Route2(Position start, Position end) 
```

适当的 JSON 是：

```
{
    "start": {
        "elevation": 1,
        "latitude": 35.3,
        "longitude": -116.4
    },
    "end": {
        "elevation": 1,
        "latitude": 35.3,
        "longitude": -116.4
    }
} 
```

# php - MYSQL，如何在多列中搜索关键字？

> ID：14465292
> 
> 赞同：0
> 
> 时间：2013-01-22T18:14:04.200
> 
> 标签：php, mysql, search, syntax

如何在 mysql 语法中搜索多列中的关键字？

现在我有一个变量`$phone`，它存储表单输入，并使用语法在单个列中搜索：

```
SELECT * FROM db.table WHERE 'phone1' = '".$phone."'; 
```

我如何通过“phone1”、“phone2”、“phone3”和“phone4”列进行搜索？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:15:10.620

`OR`在您的`WHERE`条款中使用

```
SELECT * 
FROM db.table 
WHERE 'phone1' = '".$phone."'
OR 'phone2' = '".$phone."'
OR 'phone3' = '".$phone."'
OR 'phone4' = '".$phone."' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:22:05.600

为什么不尝试`in`: =)

```
SELECT * 
FROM db.table 
WHERE '".$phone."' in (`phone1`, `phone3`, `phone3`, `phone4`)
; 
```

# android - Android：设置本地VPN，用于截取数据包

> ID：14465294
> 
> 赞同：8
> 
> 时间：2013-01-22T18:14:23.180
> 
> 标签：android, ip, port, packets, sniffing

我想拦截数据包并获取 IP/端口号，以及连接的 PID/UID。我正在考虑的事情以及不在下面的事情......

*   VpnService：使用应用程序[tPacketCapture](https://play.google.com/store/apps/details?id=jp.co.taosoftware.android.packetcapture&hl=en)时，您可以清楚地看到他们启动了一个 VpnService。这是我认为我能够做到的地方。但是，我将在 Google 上搜索什么/我需要查找有关 VpnService 的哪些内容，以便它充当所有数据包通过的通道，以便我可以读取它们包含的内容？我已经给从事 tPacketCapture 的公司发了电子邮件，但他们还没有回复我。如果有人对此有任何想法，请说出你知道的。
*   /proc/[pid] 文件系统。操作系统的这个区域包含有价值的信息，最重要的是，/proc/net/tcp 和 /proc/net/udp 都很有趣，但我宁愿不要经常阅读这些文件并自己构建所有内容。因此，上面的 VPN 解决方案。
*   它们是次要的其他事情，但最终，它们不会像 VpnService 那样工作，所以如果有人可以帮助我并使其仅“本地化”，或者甚至搜索什么以找到其他语言的其他示例，那会很棒的。

所以，最终，我的问题是，你如何制作一个 VpnService 来重新路由数据包到它们最初去往/来自的地方。

对此问题的任何帮助将不胜感激。

谢谢！

# algorithm - 连接组件标签 - 实施

> ID：14465297
> 
> 赞同：26
> 
> 时间：2013-01-22T18:14:37.457
> 
> 标签：algorithm, image-processing, multidimensional-array, area, neighbours

几天前我问了一个类似的问题，但我还没有找到解决问题的有效方法。我正在开发一个简单的控制台游戏，我有一个像这样的二维数组：

```
1,0,0,0,1
1,1,0,1,1
0,1,0,0,1
1,1,1,1,0
0,0,0,1,0 
```

我试图找到由相邻 1 组成的所有区域（4 路连接）。因此，在此示例中，两个区域如下：

```
1
1,1
  1
1,1,1,1
      1 
```

和 ：

```
 1
     1,1
       1 
```

我一直在研究的算法找到了一个单元格邻居的所有邻居，并且在这种矩阵上运行得非常好。但是，当我使用更大的数组（如 90*90）时，程序非常慢，有时使用的巨大数组会导致堆栈溢出。

我另一个问题的一个人告诉我连接组件标签是解决我问题的有效方法。

有人可以向我展示任何使用该算法的 C++ 代码吗，因为我对它与这种不相交集数据结构的实际工作方式有点困惑......

非常感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-22T19:05:21.350

我先给你代码，然后解释一下：

```
// direction vectors
const int dx[] = {+1, 0, -1, 0};
const int dy[] = {0, +1, 0, -1};

// matrix dimensions
int row_count;
int col_count;

// the input matrix
int m[MAX][MAX];

// the labels, 0 means unlabeled
int label[MAX][MAX];

void dfs(int x, int y, int current_label) {
  if (x < 0 || x == row_count) return; // out of bounds
  if (y < 0 || y == col_count) return; // out of bounds
  if (label[x][y] || !m[x][y]) return; // already labeled or not marked with 1 in m

  // mark the current cell
  label[x][y] = current_label;

  // recursively mark the neighbors
  for (int direction = 0; direction < 4; ++direction)
    dfs(x + dx[direction], y + dy[direction], current_label);
}

void find_components() {
  int component = 0;
  for (int i = 0; i < row_count; ++i) 
    for (int j = 0; j < col_count; ++j) 
      if (!label[i][j] && m[i][j]) dfs(i, j, ++component);
} 
```

这是解决此问题的常用方法。

方向向量只是找到相邻单元格（在四个方向中的每一个方向上）的好方法。

**dfs**函数执行网格的深度*优先搜索*。这仅仅意味着它将访问从起始单元格可到达的所有单元格。每个单元格都将标有**current_label**

**find_components**函数遍历网格的所有单元格，如果找到未标记的单元格（标记为 1），则开始标记组件。

这也可以使用堆栈迭代地完成。如果将堆栈替换为队列，则会获得*bfs*或*广度优先搜索*。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-22T19:07:29.610

这可以通过[union find](http://en.wikipedia.org/wiki/Union_find)解决（尽管如另一个答案所示，DFS 可能更简单一些）。

这种数据结构背后的基本思想是重复合并同一组件中的元素。这是通过将每个组件表示为一棵树来完成的（节点跟踪它们自己的父节点，而不是相反），您可以通过遍历到根节点来检查 2 个元素是否在同一个组件中，您可以合并节点通过简单地使一个根成为另一个根的父级。

一个简短的代码示例演示了这一点：

```
const int w = 5, h = 5;
int input[w][h] =  {{1,0,0,0,1},
                    {1,1,0,1,1},
                    {0,1,0,0,1},
                    {1,1,1,1,0},
                    {0,0,0,1,0}};
int component[w*h];

void doUnion(int a, int b)
{
    // get the root component of a and b, and set the one's parent to the other
    while (component[a] != a)
        a = component[a];
    while (component[b] != b)
        b = component[b];
    component[b] = a;
}

void unionCoords(int x, int y, int x2, int y2)
{
    if (y2 < h && x2 < w && input[x][y] && input[x2][y2])
        doUnion(x*h + y, x2*h + y2);
}

int main()
{
    for (int i = 0; i < w*h; i++)
        component[i] = i;
    for (int x = 0; x < w; x++)
    for (int y = 0; y < h; y++)
    {
        unionCoords(x, y, x+1, y);
        unionCoords(x, y, x, y+1);
    }

    // print the array
    for (int x = 0; x < w; x++)
    {
        for (int y = 0; y < h; y++)
        {
            if (input[x][y] == 0)
            {
                cout << ' ';
                continue;
            }
            int c = x*h + y;
            while (component[c] != c) c = component[c];
            cout << (char)('a'+c);
        }
        cout << "\n";
    }
} 
```

[现场演示](http://ideone.com/4Bg35n)。

上面将使用字母表中的不同字母显示每组。

```
p   i
pp ii
 p  i
pppp 
   p 
```

应该很容易修改它以单独获取组件或获取与每个组件对应的元素列表。一个想法是将`cout << (char)('a'+c);`上面的`componentMap[c].add(Point(x,y))`替换`componentMap`为 a `map<int, list<Point>>`- 然后此地图中的每个条目将对应于一个组件并给出一个点列表。

有各种优化可以提高 union find 的效率，以上只是一个基本的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T11:05:18.760

您也可以尝试这种传递闭包方法，但是当图像中有许多分离的对象时，传递闭包的三重循环会减慢速度，欢迎进行建议的代码更改

干杯

戴夫

```
void CC(unsigned char* pBinImage, unsigned char* pOutImage, int width, int height, int     CON8)
{
int i, j, x, y, k, maxIndX, maxIndY,  sum, ct, newLabel=1, count, maxVal=0, sumVal=0, maxEQ=10000;
int *eq=NULL, list[4];
int bAdd;

memcpy(pOutImage, pBinImage, width*height*sizeof(unsigned char));

unsigned char* equivalences=(unsigned char*) calloc(sizeof(unsigned char), maxEQ*maxEQ);

// modify labels this should be done with iterators to modify elements
// current column
for(j=0; j<height; j++)
{
    // current row
    for(i=0; i<width; i++)
    {
        if(pOutImage[i+j*width]>0)
        {
            count=0;

            // go through blocks
            list[0]=0;
            list[1]=0;
            list[2]=0;
            list[3]=0;

            if(j>0)
            {
                if((i>0))
                {
                    if((pOutImage[(i-1)+(j-1)*width]>0) && (CON8 > 0))
                        list[count++]=pOutImage[(i-1)+(j-1)*width];
                }

                if(pOutImage[i+(j-1)*width]>0)
                {
                    for(x=0, bAdd=true; x<count; x++)
                    {
                        if(pOutImage[i+(j-1)*width]==list[x])
                            bAdd=false;
                    }

                    if(bAdd)
                        list[count++]=pOutImage[i+(j-1)*width];
                }

                if(i<width-1)
                {
                    if((pOutImage[(i+1)+(j-1)*width]>0) && (CON8 > 0))
                    {
                        for(x=0, bAdd=true; x<count; x++)
                        {
                            if(pOutImage[(i+1)+(j-1)*width]==list[x])
                                bAdd=false;
                        }

                        if(bAdd)
                            list[count++]=pOutImage[(i+1)+(j-1)*width];
                    }
                }
            }

            if(i>0)
            {
                if(pOutImage[(i-1)+j*width]>0)
                {
                    for(x=0, bAdd=true; x<count; x++)
                    {
                        if(pOutImage[(i-1)+j*width]==list[x])
                            bAdd=false;
                    }

                    if(bAdd)
                        list[count++]=pOutImage[(i-1)+j*width];
                }
            }

            // has a neighbour label
            if(count==0)
                pOutImage[i+j*width]=newLabel++;
            else
            {
                pOutImage[i+j*width]=list[0];

                if(count>1)
                {
                    // store equivalences in table
                    for(x=0; x<count; x++)
                        for(y=0; y<count; y++)
                            equivalences[list[x]+list[y]*maxEQ]=1;
                }

            }
        }
    }
}

 // floyd-Warshall algorithm - transitive closure - slow though :-(
 for(i=0; i<newLabel; i++)
    for(j=0; j<newLabel; j++)
    {
        if(equivalences[i+j*maxEQ]>0)
        {
            for(k=0; k<newLabel; k++)
            {
                equivalences[k+j*maxEQ]= equivalences[k+j*maxEQ] || equivalences[k+i*maxEQ];
            }
        }
    }

eq=(int*) calloc(sizeof(int), newLabel);

for(i=0; i<newLabel; i++)
    for(j=0; j<newLabel; j++)
    {
        if(equivalences[i+j*maxEQ]>0)
        {
            eq[i]=j;
            break;
        }
    }

free(equivalences);

// label image with equivalents
for(i=0; i<width*height; i++)
{
    if(pOutImage[i]>0&&eq[pOutImage[i]]>0)
        pOutImage[i]=eq[pOutImage[i]];
}

free(eq);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T18:31:01.340

非常有用的文档 => [https://docs.google.com/file/d/0B8gQ5d6E54ZDM204VFVxMkNtYjg/edit](https://docs.google.com/file/d/0B8gQ5d6E54ZDM204VFVxMkNtYjg/edit)

java 应用程序 - 开源 - 从图像中提取对象 - 连接组件标签 => [https://drive.google.com/file/d/0B8gQ5d6E54ZDTVdsWE1ic2lpaHM/edit?usp=sharing](https://drive.google.com/file/d/0B8gQ5d6E54ZDTVdsWE1ic2lpaHM/edit?usp=sharing)

```
 import java.util.ArrayList;

public class cclabeling

{

 int neighbourindex;ArrayList<Integer> Temp;

 ArrayList<ArrayList<Integer>> cc=new ArrayList<>();

 public int[][][] cclabel(boolean[] Main,int w){

 /* this method return array of arrays "xycc" each array contains 

 the x,y coordinates of pixels of one connected component 

 – Main => binary array of image 

 – w => width of image */

long start=System.nanoTime();

int len=Main.length;int id=0;

int[] dir={-w-1,-w,-w+1,-1,+1,+w-1,+w,+w+1};

for(int i=0;i<len;i+=1){

if(Main[i]){

Temp=new ArrayList<>();

Temp.add(i);

for(int x=0;x<Temp.size();x+=1){

id=Temp.get(x);

for(int u=0;u<8;u+=1){

neighbourindex=id+dir[u];

 if(Main[neighbourindex]){ 

 Temp.add(neighbourindex);

 Main[neighbourindex]=false;

 }

 }

Main[id]=false;

}

cc.add(Temp);

    }

}

int[][][] xycc=new int[cc.size()][][];

int x;int y;

for(int i=0;i<cc.size();i+=1){

 xycc[i]=new int[cc.get(i).size()][2];

 for(int v=0;v<cc.get(i).size();v+=1){

 y=Math.round(cc.get(i).get(v)/w);

 x=cc.get(i).get(v)-y*w;

 xycc[i][v][0]=x;

 xycc[i][v][1]=y;

 }

}

long end=System.nanoTime();

long time=end-start;

System.out.println("Connected Component Labeling Time =>"+time/1000000+" milliseconds");

System.out.println("Number Of Shapes => "+xycc.length);

 return xycc;

 }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-29T16:46:04.797

请在下面找到连接组件标签的示例代码。代码是用JAVA编写的

```
package addressextraction;

public class ConnectedComponentLabelling {

    int[] dx={+1, 0, -1, 0};
    int[] dy={0, +1, 0, -1};
    int row_count=0;
    int col_count=0;
    int[][] m;
    int[][] label;

    public ConnectedComponentLabelling(int row_count,int col_count) {
        this.row_count=row_count;
        this.col_count=col_count;
        m=new int[row_count][col_count];
        label=new int[row_count][col_count];
    }

    void dfs(int x, int y, int current_label) {
          if (x < 0 || x == row_count) return; // out of bounds
          if (y < 0 || y == col_count) return; // out of bounds
          if (label[x][y]!=0 || m[x][y]!=1) return; // already labeled or not marked with 1 in m

          // mark the current cell
          label[x][y] = current_label;
         // System.out.println("****************************");

          // recursively mark the neighbors
          int direction = 0;
          for (direction = 0; direction < 4; ++direction)
            dfs(x + dx[direction], y + dy[direction], current_label);
        }

    void find_components() {
          int component = 0;
          for (int i = 0; i < row_count; ++i) 
            for (int j = 0; j < col_count; ++j) 
              if (label[i][j]==0 && m[i][j]==1) dfs(i, j, ++component);
        }

    public static void main(String[] args) {
        ConnectedComponentLabelling l=new ConnectedComponentLabelling(4,4);
        l.m[0][0]=0;
        l.m[0][1]=0;
        l.m[0][2]=0;
        l.m[0][3]=0;

        l.m[1][0]=0;
        l.m[1][1]=1;
        l.m[1][2]=0;
        l.m[1][3]=0;

        l.m[2][0]=0;
        l.m[2][1]=0;
        l.m[2][2]=0;
        l.m[2][3]=0;

        l.m[3][0]=0;
        l.m[3][1]=1;
        l.m[3][2]=0;
        l.m[3][3]=0;

        l.find_components();

        for (int i = 0; i < 4; i++) {
            for (int j = 0; j < 4; j++) {
                System.out.print(l.label[i][j]);
            }
            System.out.println("");

        }

    }

} 
```

# javascript - nodejs 和 mongodb (mongojs)：尝试在 for 循环中查询和更新数据库

> ID：14465299
> 
> 赞同：3
> 
> 时间：2013-01-22T18:14:43.727
> 
> 标签：javascript, node.js, mongodb, mongojs

我正在编写一个多人游戏（mongojs，nodejs）并试图弄清楚如何根据游戏结果更新用户统计数据。我已经编写了用于计算所有赛后统计数据的代码。当我尝试在 for 循环中更新用户的统计信息时，问题就来了。这是我得到的：

```
//Game Stats
var tempgame = {
    gameid: 1234,
    stats: [
        {
            score: 25,
            user: 'user1'
        },
        {
            score: 25,
            user: 'user2'
        }
    ]
}

for(i = 0; i < tempgame.stats.length; i++){
    db.users.find({ username: tempgame.stats[i].user }, function(err, res){
        if( err != null){
            //handle errors here.
        } else {
            var userstats = res[0].stats;
            if( tempgame.stats[i].score > userstats.bestscore ){ //this is where it chokes 
                userstats.bestscore = tempgame.stats[i].score;
            }

            //code here to pass back new manipulated stats
        }
    });
} 
```

一切正常，直到我尝试在回调函数中使用 tempgame 对象。它说“无法读取未定义的属性'分数'”。这只是一个范围问题吗？

另外我认为这可能是回调函数本身的问题。也许循环会在回调运行之前增加。但即使在那种情况下，分数也应该在那里，它只是从错误的数组索引中提取出来的......这就是让我相信它可能只是一个范围问题的原因。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T19:13:16.580

您被臭名昭著的“[在循环中定义函数](https://stackoverflow.com/questions/3927054/jslint-error-dont-make-functions-within-a-loop-leads-to-question-about-javas)”问题所困扰。

改用“forEach”：

```
tempgame.stats.forEach(function (stat) {
    db.users.find({ username: stat.user }, function(err, res){
        if( err != null){
            //handle errors here.
        } else {
            var userstats = res[0].stats;
            if( stat.score > userstats.bestscore ){ //this is where it chokes 
                userstats.bestscore = stat.score;
            }

            //code here to pass back new manipulated stats
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T19:29:45.463

您的问题的一部分正如 mjhm 在他对您问题的回答中所说的那样，并且正如您所怀疑的那样。在`i`调用回调之前，变量正在更改。

问题的另一半是因为您的数据库调用尚未返回。由于 NodeJS 的异步特性，您的循环将在数据库调用完成之前完成。此外，您的数据库调用不一定按照您调用它们的顺序返回。您需要的是某种流控制，例如[async.js](https://github.com/caolan/async)。Using`async.map`将允许您并行地对数据库进行所有调用，并在所有数据库调用完成后将它们作为可以使用的值数组返回。

```
async.map(tempgame.stats, function(stat, callback){
  db.users.find({ username: stat.user }, function(err, res){
      if( err != null){
          callback(err);
      } else {
          callback(null, res[0].stats);
      }
  });      
}, function(err, stats){
  if(err){
    //handle errors
  } else{
    stats.forEach(function(stat){
      //do something with your array of stats
      //this wont be called until all database calls have been completed
    });
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T10:26:57.113

除了上述之外，如果你想将结果返回给应用程序， [http://nodeblog.tumblr.com/post/60922749945/nodejs-async-db-query-inside-for-loop](http://nodeblog.tumblr.com/post/60922749945/nodejs-async-db-query-inside-for-loop)

# ios - 如何将 UITabBarController 连接到 3 个不同的屏幕？

> ID：14465301
> 
> 赞同：1
> 
> 时间：2013-01-22T18:14:44.387
> 
> 标签：ios, ios5, uitabbarcontroller

我刚刚创建了 UITabBarController，然后将 NavigationController 嵌入其中。

我现在遇到的问题是我不确定如何添加标签栏项目。现在我只有一个进入主屏幕的项目。但是我该怎么做才能将标签添加到该标签栏控制器？

我尝试将其控制拖动到其他控制器，但我认为这不是这里的方法。

有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:24:37.567

标签栏项会根据 UITabBarController 拥有的视图控制器数量自动添加。

例如当你打电话时：

```
self.tabBarController.viewControllers = @[viewController1, viewController2]; 
```

将自动为您创建 2 个标签栏项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:43:35.777

您也可以从一开始就完成所有这些。如果您启动的项目是一个选项卡项目，您将自动获得两个选项卡。如果您想要更多，请从对象下方的右窗格中拖动一个视图控制器。然后控制单击并从根视图拖动到新的视图控制器并选择关系标签栏。您可以在没有代码的情况下连接任意数量的设备。希望这可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T19:11:30.680

我假设您正在使用情节提要。

如果您在故事板中选择导航控制器时右键单击选项卡栏视图控制器连接图标（左侧的圆形金色图标）或选择连接检查器（右侧），您将看到“视图“触发的 Segues”下的“控制器”选项。只需从该圆圈拖动到您想要在标签栏控制器中链接的新视图控制器，瞧，新的标签栏项目。

# javascript - 菜单过渡/动画

> ID：14465302
> 
> 赞同：0
> 
> 时间：2013-01-22T18:14:53.260
> 
> 标签：javascript, html, animation, css-transitions

好的，所以我对菜单有这个想法，但我真的不知道如何实现它或需要什么，我对网页设计非常陌生。所以基本上当菜单上的一个项目被突出显示时，我希望滑块在突出显示的项目下移动，就像这样

[http://s7.postimage.org/qa3vfh797/purple.gif](http://s7.postimage.org/qa3vfh797/purple.gif)

因此，当我在一个页面上时，我想要与该页面相关的菜单选项卡下的滑块。当我将鼠标悬停在菜单中的某个项目上时，滑块会从当前选项卡滑动到突出显示的选项卡。当用户取消突出显示它时，它会返回到与用户所在页面相关的选项卡。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:30:43.310

我将为您提供一个 jsfiddle 示例，但无需重新发明轮子。

jQuery MagicLine： [文章](http://css-tricks.com/jquery-magicline-navigation/)和[演示](http://css-tricks.com/examples/MagicLine/)

如果这不是您想要的方向，那么我建议使用[jQuery UI](http://jqueryui.com/)，特别是选项卡部分：[here](http://jqueryui.com/tabs/#mouseover)。确保将 jQueryUI 与[Themeroller](http://jqueryui.com/themeroller/)一起使用，它允许用户自定义。

希望这会有所帮助，如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:11:35.423

我不会给你完整的代码，但我会用一些关键词为你指明正确的方向。您需要为将在菜单项下方滑动的栏创建一个。将每个菜单项封装在一个 div 中，并为每个菜单项实现一个 onMouseOver 事件。然后在 onMouseOver 事件中，需要将 div 从当前位置移动到这个菜单 div 下，即将滑块 div 的 offsetLeft 更改为菜单 div 的 offsetLeft 值（如果你使用 jquery，它提供了方便的函数来获取这个值）。现在更改 div 的位置将直接将其移动到那里。如果你想在“幻灯片”动画中完成它，那么你需要逐步移动它，比如说每次以 5 px 为增量。为此使用 setTimeOut 函数。创建一个函数来更改滑块 div' s offsetLeft 值以 5 px 为增量，并一次又一次地调用此函数，直到它通过 setTimeout 函数到达其目的地。setTimeout 基本上是一个计时器，它将在指定的时间后调用一个函数。

这应该足以让您在 google 上搜索 :)

# android - Viewpager 中的垂直滚动

> ID：14465304
> 
> 赞同：1
> 
> 时间：2013-01-22T18:14:57.303
> 
> 标签：android, scroll, android-viewpager

这里我有两个文件。我想在 viewpager 中启用垂直滚动。页面内容超出页面大小。即使内容超过页面大小......我没有得到滚动。请帮忙。

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:fillViewport="true" 
      >
     <RelativeLayout    

     android:layout_width="match_parent"
     android:layout_height="wrap_content">
    <RelativeLayout      
      android:id="@+id/secAct1"
    android:layout_height="25dip"
    android:layout_width="match_parent"
    android:background="#000000"
    android:layout_alignParentBottom="true"
        >
          <TextView 
        android:id="@+id/cn1"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentLeft="true"
        android:paddingLeft="10dip"
        android:textColor="@color/white"
        android:textSize="15sp"
        android:text="cn"
        />
      <TextView 
        android:id="@+id/si1"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:paddingRight="10dip"
        android:layout_alignParentRight="true"
         android:textColor="@color/white"
        android:textSize="15sp"
         android:text="si"
        />
    </RelativeLayout>
    <LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/secAct1"
    android:orientation="vertical"
    android:gravity="center"
    android:padding="30dip">
    <Button 
    android:id="@+id/submitAll"    
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"   
    android:text="Submit Responses"    
    />   
    <TextView 
    android:id="@+id/lp"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"   
    android:textColor="@color/white"
    android:text="Thank you for your valuable responses!\n On submitting, you will not be able to changes your                            responses.\nYou responses will be uploaded when your device is connected to the internet.\nThank you for your     valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.Thank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.Thank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.\nThank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.Thank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.Thank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.\nThank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.Thank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.Thank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.\nThank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet.Thank you for your valuable responses!\n On submitting, you will not be able to changes your responses.\nYou responses will be uploaded when your device is connected to the internet."
      >
         </TextView>

        </LinearLayout>
           </RelativeLayout></ScrollView> 
```

下一个文件

```
 <?xml version="1.0" encoding="utf-8"?>

    <LinearLayout 
     xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fragQue"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
     >

     <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        android:background="@drawable/radialback"
        >
    <android.support.v4.view.PagerTabStrip
            android:id="@+id/pager_title_strip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:paddingTop="@dimen/fQ_P"
            android:paddingBottom="@dimen/fQ_P" 
            android:background="@color/yellow"
            android:textColor="@color/textGray" 
             /> 
    </android.support.v4.view.ViewPager > 

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:56:58.840

首先，您拥有它，以便 textview 位于 cn 和 si 按钮上方，即使按钮位于屏幕底部，它也无法按照您想要的方式工作。

```
android:layout_above="@+id/secAct1"
//should be
android:layout_below="@+id/secAct1" 
```

这将使您在顶部提交按钮和文本视图，并在下方提供 cn 和 si 按钮，并且可以滚动。如果您想要顶部的 cn 和 si 按钮，在第二个相对布局中，更改

```
android:layout_alignParentBottom="true"
//to
android:layout_alignParentTop="true" 
```

至于第二个文件，我不知道 viewpager 是否有默认滚动，所以你可能只需要将它包装在滚动视图中。

# jms - 通过 JMS 接收消息 - WSO2 CEP

> ID：14465309
> 
> 赞同：0
> 
> 时间：2013-01-22T18:15:07.777
> 
> 标签：jms, wso2, complex-event-processing, wso2cep

我有以下问题 - 1\. WSO2 CEP 是否也可以收听 JMS 队列？如果是，请分享任何文章。2\. 如果上游应用程序向主题发布消息并且我们已经分发（2 节点 CEP 设置）CEP 设置，那么两个节点不应该处理此 JMS 消息并处理重复的消息数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:58:01.963

是的，当使用 JMS 主题消息重复是 CEP 2.0.1 中的一个问题时，您可以在[分布式 WSO2 CEP上提出一个微笑的问题和一个可能的答案](https://stackoverflow.com/questions/14452646/distributed-wso2-cep)

# c# - 如何访问在 ashx 中修改的 aspx 中的会话？

> ID：14465314
> 
> 赞同：2
> 
> 时间：2013-01-22T18:15:18.997
> 
> 标签：c#, asp.net, file-upload, webforms, ashx

我正在使用 uploadify 上传文件，它们会自动发布到处理程序。然后，我在处理程序中修改会话，该处理程序已设置为网站公共类中的静态属性。然后我尝试在 aspx 页面中访问同一个会话，并且值为 null。我有一种感觉，这是因为 cookie，但需要有一种方法来解决这个问题，而不会在 url 中暴露 sessionid。

**阿什克斯：**

```
public class Upload : IHttpHandler, IReadOnlySessionState, IRequiresSessionState 
{

    public void ProcessRequest(HttpContext context)
    {
        ...
        CMSSession.Current.UploadedFiles.Add(fileName);
    }
} 
```

**会话类：**

```
public class CMSSession
{    
    public static CMSSession Current
    {
        get
        {
            CMSSession session = (CMSSession)HttpContext.Current.Session["__CMSSession__"];
            if (session == null)
            {
                session = new CMSSession();
                HttpContext.Current.Session["__CMSSession__"] = session;
            }
            return session;
        }
    }

    public List<string> UploadedFiles { get; set; }
} 
```

**ASPX：**

```
if (CMSSession.Current.UploadedFiles != null)
{
    ...
}
else
{
    IT'S ALWAYS NULL
} 
```

**网络配置：**

```
<sessionState mode="InProc" cookieless="false" /> - causes session to always null in aspx when modified in ashx
<sessionState mode="InProc" cookieless="true" /> - session value is not null, but sessionid is exposed in the url 
```

如何在不将 cookieless 更改为 true 的情况下访问和修改 ASHX 文件中的当前会话，然后从 ASPX 页面访问会话？

我尝试过使用 HttpContext 并使用传递给 ASHX 的上下文......没有任何效果。

与此问题相同，但必须有更安全的方法：[在 ashx 中设置会话并在 aspx 上获取该会话](https://stackoverflow.com/questions/3732978/session-set-in-ashx-and-get-that-session-on-aspx)

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T19:05:30.907

我找到了答案：当从 FLASH（如 swfupload 或 uploadify）调用处理程序时，它不会将当前 sessionid 传递给处理程序。然后处理程序创建一个新会话。要解决此问题，请执行以下操作：

你的用户界面：**JavaScript：**

```
$(Selector).uploadify({
    swf: 'uploadify.swf',
    uploader: 'Upload.ashx?ASPSESSID=<%=Session.SessionID%>'   
}); 
```

添加到：**Global.asax：**

```
void Application_BeginRequest(object sender, EventArgs e)
{
    try
    {
        string session_param_name = "ASPSESSID";
        string session_cookie_name = "ASP.NET_SESSIONID";
        string session_value = Request.Form[session_param_name] ?? Request.QueryString[session_param_name];
        if (session_value != null) { UpdateCookie(session_cookie_name, session_value); }
    }
    catch (Exception) { }
}

void UpdateCookie(string cookie_name, string cookie_value)
{
    HttpCookie cookie = HttpContext.Current.Request.Cookies.Get(cookie_name);
    if (cookie == null)
    {
        HttpCookie cookie1 = new HttpCookie(cookie_name, cookie_value);
        Response.Cookies.Add(cookie1);
    }
    else
    {
        cookie.Value = cookie_value;
        HttpContext.Current.Request.Cookies.Set(cookie);
    }
} 
```

上传并简化来自： [http ://snipplr.com/view/15180/](http://snipplr.com/view/15180/)

如果使用formsauthentication，您可能需要使用authid：

```
&AUTHID=<%= Request.Cookies[FormsAuthentication.FormsCookieName] == null ? "" : Request.Cookies[FormsAuthentication.FormsCookieName].Value %> 
```

将其附加到 jQuery 中的 uploader 参数。

然后将以下内容添加到全局：

```
try
    {
        string auth_param_name = "AUTHID";
        string auth_cookie_name = FormsAuthentication.FormsCookieName;
        string auth_value = Request.Form[auth_param_name] ?? Request.QueryString[auth_param_name];

        if (auth_value != null) { UpdateCookie(auth_cookie_name, auth_value); }
    }
    catch (Exception) { } 
```

您现在可以在 IE、Chrome、FF 等中从处理程序访问相同的会话（即使使用我上面在问题中使用的静态会话对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:28:16.023

`Context.Session is null`..**因为连接`HttpHandler`有另一个`Context.Session`**
（调试并尝试：`Context.Session.SessionId`fileInput在哪里与Upload.ashx不同`Context.Session.SessionId`）！

我建议一种解决方法：**在第二个会话中传递对您需要的元素的引用**（在我的示例中，我`SessionId`使用 sessionId 变量传递原始元素）

```
....
var sessionId = "<%=Context.Session.SessionID%>";
var theString = "other param,if needed";
$(document).ready(function () {
    $('#fileInput').uploadify({
        'uploader': '<%=ResolveUrl("~/uploadify/uploadify.swf")%>',
        'script': '<%=ResolveUrl("~/Upload.ashx")%>',
        'scriptData': { 'sessionId': sessionId, 'foo': theString },
        'cancelImg': '<%=ResolveUrl("~/uploadify/cancel.png")%>',
 .... 
```

并在 .ashx 文件中使用这些项目。

```
public void ProcessRequest(HttpContext context)
{
    try
    {
       HttpPostedFile file = context.Request.Files["Filedata"];
       string sessionId = context.Request["sessionId"].ToString();
      .... 
```

如果您**需要共享复杂元素，请使用 Context.Application 而不是 Context.Session**，使用原始 SessionID： `Context.Application["SharedElement"+SessionID]`

# android - 包资源管理器中的android eclipse项目消失了

> ID：14465316
> 
> 赞同：0
> 
> 时间：2013-01-22T18:15:23.353
> 
> 标签：android, eclipse, package-explorer

嗨，我在使用 Eclipse 进行 android 开发时遇到问题。计算机挂起后，我再次重新启动并打开 Eclipse，包 Explorer 什么也没有显示。

我试图重新启动计算机/重新启动 Eclipse，但仍然失败

然后我尝试重新导入那些之前开发的应用程序（比如 abc 项目），但它说它复制了已经存在的 abc 项目。看起来包文件夹实际上有一些东西，但项目只是看起来不可见。那怎么可能修复？

我已经通过网络进行了研究，但没有找到出路。让我头疼……有什么方法可以修复吗？

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:19:37.790

尝试创建另一个工作区并将项目复制到那里，然后删除旧工作区并重命名创建的工作区。应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:25:34.633

您已经在工作区中拥有该项目，但 Eclipse 无法识别它。在这种情况下，您必须重新导入项目。

*   通过 Windows 资源管理器（或 Mac 中的 finder）从工作区复制代码并将其粘贴到工作区之外。

*   然后使用您刚刚粘贴在外面的代码再次导入它。导入时选中“将项目复制到工作区”选项。

*   删除您在工作区外复制的代码。

    该项目将被重新导入，并且您的工作区中只会有一份副本。

另见：

[如何将现有的 Android 项目导入 Eclipse？](https://stackoverflow.com/questions/2231474/how-to-import-existing-android-project-into-eclipse)

# image - 人脸识别库和在线代码

> ID：14465323
> 
> 赞同：0
> 
> 时间：2013-01-22T18:15:51.793
> 
> 标签：image, image-processing, opencv, face-recognition

> **可能重复：**
> [人脸识别库](https://stackoverflow.com/questions/953714/face-recognition-library)

我想构建一个应用程序。每当我遇到他们时，它都**会认出**这个人的脸。我只是想知道我应该使用什么库来进行面部识别。以及从哪里可以在线获取代码。我需要在 2 天内构建项目。

PS 1 : 我可以工作 24 公顷 :)

PS 2：这是大型项目的一部分

# git - 移动后如何修复本地 git repo 的路径？

> ID：14465326
> 
> 赞同：22
> 
> 时间：2013-01-22T18:16:08.917
> 
> 标签：git, move

移动后如何修复本地 git repo 的路径？

```
previous local location: /C/website
new local location: /C/Projects/website
remote location: git@bitbucket.org:username/website.git 
```

我将我的 git 存储库从一个文件夹移动`/website`到另一个文件夹`/projects/website`，现在出现错误：

```
user@Thinkpad /C/Projects/website (master)
$ git push
fatal: 'C:/website' does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

有没有办法解决这个问题而不必重新克隆项目？我试过：

```
$ git init
Reinitialized existing Git repository in c:/Projects/website/.git/ 
```

它什么也没做，当我尝试推动时，我又得到了完全相同的错误。

**编辑：**

我跑了：`git config remote.origin.url C:/Projects/website`。现在，当我在更改文件后提交时，我得到以下回复：

```
user@Thinkpad /C/Projects/website (master)
$ git commit -m "added something"
[master e163ad9] added something
 0 files changed
 create mode 100644 something

user@Thinkpad /C/Projects/website (master)
$ git push
Everything up-to-date 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-22T18:18:17.303

运行`git config -e`并将远程地址更改为正确的远程位置。在您的情况下，`url = git@bitbucket.org:username/website.git`此命令将打开以编辑`.git/config`存储库的文件。

（感谢@Richard 的命令）

快捷指令：

```
git config remote.origin.url git@bitbucket.org:username/website.git 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:36:53.630

~~您必须将`origin`遥控器更新为新的 url：~~

 ~~```
git remote set-url origin '/C/Projects/website' 
```~~  ~~* * *

如果您只是移动本地克隆，则无需执行任何操作来更新指向 bitbucket 或其他托管服务的指针。只需移动包含所有内容的文件夹（该`.git`目录是必不可少的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T08:35:12.380

如果您使用**SmartGit**，您可以通过这种方式更改存储库 url

打开 smartGit 并双击您的存储库并转到菜单 `Remote>Properties..`并将新存储库路径设置为`path or url.`~~

# emacs - 如何在 Windows 的 mintty 下以 CLI 模式运行 emacs？

> ID：14465330
> 
> 赞同：16
> 
> 时间：2013-01-22T18:16:30.073
> 
> 标签：emacs, cygwin, mingw, msys

我正在使用 mintty + msys。我想用 emacs 来处理它。但没有图形用户界面。
我在cygwin中看到了这种行为。但我不明白他们是怎么做到的。

```
$ emacs -nw
  emacs: standard input is not a tty

$ stty.exe -a
  speed 38400 baud; rows 24; columns 80; line = 0;
  intr = ^C; quit = ^\; erase = ^H; kill = ^U; eof = ^D; eol = <undef>;
  eol2 = <undef>; swtch = ^Z; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R;
  werase = ^W; lnext = ^V; flush = ^O; min = 1; time = 0;
  -parenb -parodd cs8 -hupcl -cstopb cread -clocal -crtscts
  -ignbrk brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff
  -iuclc ixany imaxbel
  opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
  isig icanon iexten echo echoe echok -echonl -noflsh -tostop echoctl echoke

$ echo $TERM
  xterm 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-07-23T17:09:32.290

你应该使用[winpty](https://github.com/rprichard/winpty)：

```
winpty emacs -nw 
```

> winpty 是一个 Windows 软件包，提供类似于 Unix pty-master 的接口，用于与 Windows 控制台程序进行通信。该软件包由一个库 (libwinpty) 和一个用于 Cygwin 和 MSYS 的工具组成，用于在 Cygwin/MSYS pty 中运行 Windows 控制台程序。

在您的情况下，Emacs 实际上是“Windows 控制台程序”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-25T13:22:27.447

如果你想在 mintty 中使用 tty emacs，你可能需要使用 cygwin 的 emacs。本机 win32 emacs 想要与 Windows 控制台窗口对话，而不是与实际的 tty 对话——错误消息在这里具有误导性。

如果您想坚持使用本机 win32 emacs，另一种选择是使用[ConEmu](https://code.google.com/p/conemu-maximus5/)，而不是 mintty。它提供了一个兼容的 Windows 控制台界面，同时还提供了像 mintty 这样的普通终端仿真器的所有细节。

# jquery - jQuery在更改时动态更改颜色/背景颜色

> ID：14465336
> 
> 赞同：0
> 
> 时间：2013-01-22T18:17:05.160
> 
> 标签：jquery

我无法让以下代码工作。知道为什么吗？

值是正确的。我可以使用 alert(field) 测试它们，但背景渐变不起作用。我不知道为什么。

```
 var myOptions = {
                change: function(event, ui){
                    button_text_color = $('#button_text_color').val();
                    button_border_color = $('#button_border_color').val();
                    button_bg_color = $('#button_bg_color').val();
                    button_bg_color2 = $('#button_bg_color2').val();
                    div_preview = $('.ajax-live-preview-custom');
                    div_preview.find('.wp-superlike-button').css({
                        'color': button_text_color,
                        'borderColor' : button_border_color,
                        'backgroundColor': button_bg_color,
                        'backgroundImage': '-webkit-gradient(linear, 0% 0%, 0% 100%, from(' + button_bg_color + '), to(' + button_bg_color2 + '))',
                        'backgroundImage': '-webkit-linear-gradient(top, ' + button_bg_color + ', ' + button_bg_color2 + ')', 
                        'backgroundImage': '-moz-linear-gradient(top, ' + button_bg_color + ', ' + button_bg_color2 + ')', 
                        'backgroundImage': '-ms-linear-gradient(top, ' + button_bg_color + ', ' + button_bg_color2 + ')', 
                        'backgroundImage': '-o-linear-gradient(top, ' + button_bg_color + ', ' + button_bg_color2 + ')'
                    });
                }
            };
            $('.my-color-field').wpColorPicker(myOptions); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:28:26.103

我认为问题是这样的：

```
'backgroundImage': 
```

改成：

```
'background': 
```

在这里找到： http: [//css-tricks.com/examples/CSS3Gradient/](http://css-tricks.com/examples/CSS3Gradient/)

# c# - 如何进行 xml 解析

> ID：14465340
> 
> 赞同：0
> 
> 时间：2013-01-22T18:17:26.330
> 
> 标签：c#, xml, xml-parsing

我有这个 xml 文件： http: [//www.studiovincent.net/list.xml](http://www.studiovincent.net/list.xml)

我需要使用 c# 的解析器来获取值。我使用这段代码：

```
XmlReader xmlReader = XmlReader.Create("http://www.studiovincent.net/list.xml");
        while (xmlReader.Read())
        {
            if ((xmlReader.NodeType == XmlNodeType.Element) && (xmlReader.Name == "field"))
            {
                if (xmlReader.HasAttributes)
                    Console.WriteLine(xmlReader.GetAttribute("name") + ": " + xmlReader.GetAttribute("price"));
            }
        }
        Console.ReadKey(); 
```

但我得到了 OUTPUT 这个结果：

```
name:
username:
age:
hair:
name:
username:
age:
hair:
name:
username:
age:
hair: 
```

我怎样才能得到这个结果？

```
Vincent
Hill
31
black
John
Tedelon
27
brown
Michael
Lopez
20
red
Frank
Lopez
25
black 
```

这个结果呢？

```
 Vincent
 John
 Michael
 Frank 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:49:27.220

以下代码将为您提供第一个结果：

```
 using System.Xml;
        using.System.Xml.Linq;

        XmlReader reader = XmlReader.Create("http://www.studiovincent.net/list.xml");
        XElement el = XElement.Load(reader);
        reader.Close();

        var items = el.Elements("resources").Elements("resource").Descendants().DescendantNodes();

        foreach (XNode node in items)
        {
            Console.WriteLine(node.ToString());
        } 
```

下面的代码会给你，你的第二个结果

```
 var items = from item in el.Elements("resources").Elements("resource").Descendants() where item.Attribute("name").Value == "name" select item.FirstNode;

        foreach (XNode node in items)
        {
            Console.WriteLine(node.ToString());
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:30:35.057

前两行将帮助您：

```
using System.Xml.Linq;
var doc = XDocument.Load("http://www.studiovincent.net/list.xml");
var people = doc.Descendants("resource"); 
```

这个库叫做[Linq for XML](http://msdn.microsoft.com/en-us/library/bb387061.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:31:27.347

您可以使用

```
string URL = "http://www.studiovincent.net/list.xml";
XDocument doc = XDocument.Load(URL);

//To read an element you use
 List<XElement> myElements = doc.Element("list").Element("resources").Elements("resource").Elements("field").ToList();

        foreach (XElement element in myElements)
        {

            Console.WriteLine("{0} : {1}", element.Attribute("name").Value, element.Value);

        } 
```

# c# - C# MVC 3 Partial View 未命中控制器方法

> ID：14465343
> 
> 赞同：0
> 
> 时间：2013-01-22T18:17:33.250
> 
> 标签：c#, jquery, ajax, asp.net-mvc-3, razor

我有一个创建用户页面 - 它当前列出了一个包含系统中所有当前用户的表。我可以单击创建新按钮 - 这会执行 jQuery ajax 提交，它调用我的控制器方法并返回部分视图并加载新的模态 jQuery 对话框，其中包含所有字段，即 Forename、Surname 等。所以我的表在背景和此对话框位于模态视图的屏幕中心，因此优先。如果单击用户名，则调用相同的方法 excpet 传入一个唯一的用户 ID，因此对话框表单不会加载为空白 - 它从数据库加载用户的当前详细信息，并且作为用户 ID，有一个删除按钮已添加到“用户”对话框以及“新建”时的“保存”和“取消”。

现在解决问题 - 我已将我的部分视图页面如下所示 - 我还将其自己的 js 添加到部分视图中，因为我需要根据用户做出的一些选择显示/隐藏差异下拉框。

```
@using (Html.BeginForm("UserAction", "Admin", FormMethod.Post, new { id = "userActionForm" }))
{
//Fields on the dialog box....
} 
```

然后在对话框上 - 我有按钮，即

```
<input id="DoDeleteUser" type="button" class="dialog-button" value="Delete User" style="margin: 5px" /> 
```

然后在我的页面的 JS 文件中，我有以下内容：

```
 $('#DoDeleteUser').click(function (event) {
          //alert("Delete Button Pressed"); - In for debugging
        $('#userID').val($(event.target).attr("userId")); - get id value into hidden field on page
        $('action').val('Delete'); - put action string into hidden field on page
        $('#userActionForm).submit();

      });

    $('#userActionForm').submit(function () {

       var formData = $("#userActionForm").serializeArray();

        $.ajax({
                url: this.action,
                type: this.method,
                data: formData,
            success: function (result) {
                $('#dialogContainer').html(result);
            }

        });
       return false;
}); 
```

我的对话框容器与第一个页面加载的容器相同页面（因此主表将被更新）

然后在我的控制器上我有这样的方法：

```
 public ActionResult UserAction(UserModel model)
    {

        if (ModelState.IsValid)
        {
              if(model.Action == "Delete")

               //Go and do delete
               return PartialView ("UserActionSuccess", model);

          //close if etc etc 
```

但是，我在我的控制器中的 UserAction 方法上设置了一个断点，但是当我点击删除用户按钮或保存用户按钮时它永远不会被击中，这是我卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:58:11.890

您应该考虑为 CRUD 方法使用消息类。它应该使逻辑更清晰。

```
public class CreateUser
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class DeleteUser
{
    public int UserId { get; set; }
} 
```

然后，您将为每个 CRUD 方法设置一个控制器操作，如下所示：

```
public ActionResult Create(CreateUser message)
{
}

public ActionResult Delete(DeleteUser message)
{
} 
```

在 jQuery 中，您将准备 AJAX 调用，如下所示：

```
$.ajax({
    url: "/yourcontroller/create",
    type: "POST",
    data: formData,
    success: function() { console.log('success'); },
    error: function() { console.log('error'); }
});

$.ajax({
    url: "/yourcontroller/delete/" + $("#userId").val(),
    type: "DELETE",
    success: function() { console.log('success'); },
    error: function() { console.log('error'); }
}); 
```

最后，一旦你把它们连接起来，你就可以使用 Firebug 来检查 jQuery 方面的事情，然后在 VS 管理员模式下使用断点来确保调用正确地填充了你的消息对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:21:12.717

您正在发送带有表单数据的帖子，但您希望 UserAction 上有一个模型（json 对象）。您应该使用参数来匹配表单输入。

```
public ActionResult UserAction(string id)
{
    ...
} 
```

# gwt - 在 GWT 中实现 SSL 或 HTTPS

> ID：14465347
> 
> 赞同：-3
> 
> 时间：2013-01-22T18:17:43.723
> 
> 标签：gwt, ssl

我正在 GWT 中构建一个应用程序。我需要在应用程序中实现 SSL 或 HTTPS，因为安全性是我应用程序的关键因素。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:20:22.683

SSL 和 HTTPS 与 GWT 无关。您在 Web 服务器上配置 SSL。

# magento-1.7 - Magento - 挂钩到管理员登录操作

> ID：14465348
> 
> 赞同：1
> 
> 时间：2013-01-22T18:17:45.217
> 
> 标签：magento-1.7, magento

我刚读完

```
http://www.summasolutions.net/blogposts/how-hook-magento-event 
```

但我不确定如何找到不同的动作/事件，例如，上面的链接指的是动作/事件

```
checkout_onepage_controller_success_action 
```

我如何找到这些变量？一个很好的例子是，我想加入管理员登录操作，我如何找到该事件的正确 _success_action？

任何想法都非常感谢！

谢谢！

杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:42:30.823

最好的来源在这里：[http ://www.nicksays.co.uk/magento-events-cheat-sheet-1-7/](http://www.nicksays.co.uk/magento-events-cheat-sheet-1-7/)

你可以`admin_session_user_login_success`在那里看到。

*编辑：对不起 - 没有看到最后两条评论......*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:47:05.003

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/reference/magento_events](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/magento_events) 列出了所有/大多数magento事件

也看看

```
 Mage::getModel('adminhtml/url')->getUrl('youradminurl/controller/action'); 
```

# php - 使除我的 PHP 脚本之外的所有人都无法访问网页

> ID：14465350
> 
> 赞同：1
> 
> 时间：2013-01-22T18:17:45.813
> 
> 标签：php, wampserver, http-status-code-403

除了从中获取数据的 PHP 页面之外，我如何能够使网页返回 HTTP 403 给任何试图访问它的人？如果它有帮助，我正在本地主机上运行[WAMP](http://www.wampserver.com/en/)服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T10:48:24.867

`.htaccess`雅达提到的方法是有效的。另一种方法是在您的 PHP 脚本本身中执行此操作。如果它是通过 CLI 运行的 cronjob：

```
if (!empty($_SERVER['REMOTE_ADDR'])) {
    // If a "remote" address is set, we know that this is not a CLI call
    header('HTTP/1.1 403 Forbidden');
    die('Access denied. Go away, shoo!');
} 
```

或者如果它是由来自其他 PHP 脚本的浏览器请求触发的，只需验证 IP 是否是您的/本地的：

```
if ($_SERVER['REMOTE_ADDR'] != '192.168.1.5') { // Or whatever your local IP is
    header('HTTP/1.1 403 Forbidden');
    die('Get out and stay out!');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:20:27.567

只允许 index.php 访问

.htaccess 文件

```
Order Deny,Allow
Deny from all
Allow from 127.0.0.1

<Files /index.php>
    Order Allow,Deny
    Allow from all
</Files> 
```

# forms - Dojo dijit.form.Select 验证错误显示

> ID：14465360
> 
> 赞同：0
> 
> 时间：2013-01-22T18:18:25.230
> 
> 标签：forms, validation, select, error-handling, dojo

我发现在**Dojo 1.7.3中，** *dijit.form.Select*`required: true`上的设置无法正确地将红色边框错误显示应用​​到 Select，因为它与其他 dijit（如 FilteringSelect）一样。如果它处于错误状态并具有焦点，它会显示工具提示，但不会将红色边框应用于 Select 输入。

 *我过去看到的关于此的答案是：

1.  Select 最初不是为了验证而构建的，因此它在其模板中缺少正确的类/div（例如带有感叹号的红色框），这意味着您需要添加自己的 CSS。

2.  选择框的空白值不一定无效。

我找到[了这个](http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/tests/form/test_Select.html)示例页面，其中正常的 dijit.form.Select`required: true`似乎（几乎）按预期工作。我说几乎是因为当它第一次失去焦点时，它看起来与红色感叹号框保持蓝色边框，并且直到第二个焦点改变（至少在 Firefox 中）才获得完整的红色边框。

在此示例页面中，我无法辨别任何可用于使错误格式适用于*dijit.form.Select*的内容。它似乎使用的是 Dojo 1.7.4，但我在 1.7.4 发行说明中没有看到任何关于修复选择错误显示的内容。

这不被认为是一个需要修复的错误吗？有没有办法轻松应用验证样式而不必弄乱 dijit 模板？

任何帮助/想法表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:57:37.227

I think here is a relative link to a test file:
[http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/tests/form/test_Select.html](http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/tests/form/test_Select.html)*

# java - hidden.edu.emory.mathcs.backport*

> ID：14465367
> 
> 赞同：9
> 
> 时间：2013-01-22T18:19:05.173
> 
> 标签：java, threadpool, stack-trace, java.util.concurrent, thread-dump

在应用程序线程转储中，我可以看到具有五个线程的线程池，如下所示：

```
"pool-1-thread-5" prio=10 tid=0x000000000101a000 nid=0xe1f in Object.wait() [0x00007f3c66086000]
  java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007b8e57af8> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at java.lang.Object.wait(Object.java:503)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
    - locked <0x00000007b8e57af8> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:722) 
```

但我不直接使用这样的东西，也没有在依赖项中看到这样的东西。

这是什么（hidden.edu.emory.mathcs.backport）以及为什么使用它（在 jdk 7 上运行的应用程序）？我可以检测到应用程序的哪个部分启动它吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-22T19:04:23.857

这个`edu.emory.mathcs.backport`包树属于[backport-util-concurrent](http://backport-jsr166.sourceforge.net/index.php)，它是`java.util.concurrent`旧 Java 版本的反向移植。`hidden`前缀可能是由`maven-shade-plugin`.

如果您使用的是 Maven，您可以使用以下命令搜索此依赖项：

```
mvn dependency:tree -Dincludes=backport-util-concurrent:backport-util-concurrent 
```

# c# - Aysnc/等待与。任务/继续 UI 控制访问

> ID：14465368
> 
> 赞同：2
> 
> 时间：2013-01-22T18:19:07.380
> 
> 标签：c#, task, .net-4.5, async-await

总而言之，我有一种情况，我被要求对一个大型的“成本计算”算法进行多线程处理。我对`Task`s 比较有经验，并且有信心采用类似的模式

```
CancellationTokenSource cancelSource = new CancellationTokenSource();
CancellationToken token = cancelSource.Token;
TaskScheduler uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();

Task<bool> asyncTask = null;
asyncTask = Task.Factory.StartNew<bool>(() =>
    SomeMethodAsync(uiScheduler, token, _dynamic), token);

asyncTask.ContinueWith(task =>
{
    // For call back, exception handling etc.
}, uiScheduler); 
```

然后对于我需要提供的任何操作和 UI 操作，我会使用

```
Task task = Task.Factory.StartNew(() =>
{
    mainForm.progressLeftLabelText = _strProgressLabel;
}, CancellationToken.None, 
   TaskCreationOptions.None, 
   uiScheduler); 
```

这可能包含在一个方法中。

现在，我意识到我可以让这一切变得不那么复杂，并利用`async/await`.NET 4.5 的关键字。但是，我有一些问题：如果我有一个长期运行的方法可以使用

```
// Start processing asynchroniously.
IProgress<CostEngine.ProgressInfo> progressIndicator =
    new Progress<CostEngine.ProgressInfo>();
cancelSource = new CancellationTokenSource();
CancellationToken token = cancelSource.Token;
CostEngine.ScriptProcessor script = new CostEngine.ScriptProcessor(this);
await script.ProcessScriptAsync(doc, progressIndicator, token); 
```

哪里`CostEngine.ProgressInfo`是一些用于返回进度信息的基本类，该方法`ProcessScriptAsync`定义为

```
public async Task ProcessScriptAsync(SSGForm doc, IProgress<ProgressInfo> progressInfo,
                                     CancellationToken token, bool bShowCompleted = true)
{
    ...
    if (!await Task<bool>.Run(() => TheLongRunningProcess(doc)))
        return
    ...
} 
```

* * *

我有两个问题：

1.  为了*几乎*`ProcessScriptAsync`立即将控制权返回给 UI ，我等待一个新的委托（这似乎避免了无休止的/ s链）。**这是正确的打电话方式****吗？**['延迟初始化'，通过包装外部方法？]*`Task<bool>``async``await`**`ProcessScriptAsync`***

**   要从内部访问 UI `TheLongRunningProcess`，我只需传入 UI 吗`TaskScheduler` `uiScheduler`？即`TheLongRunningProcess(doc, uiScheduler)`，然后使用：* 

 ** * *

```
Task task = Task.Factory.StartNew(() =>
{
    mainForm.progressLeftLabelText = _strProgressLabel;
}, CancellationToken.None, 
   TaskCreationOptions.None, 
   uiScheduler); 
```

像之前一样？

对不起，长度和感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:45:43.817

1.  这取决于。您已经展示了很多代码，但忽略了您实际提出问题的一点。首先，在不知道代码是什么的情况下，我们无法知道它是否真的需要一段时间。接下来，如果您等待已经完成的任务，它将意识到这一点，而不是安排继续，而是继续（这是一种优化，因为安排任务很耗时）。如果您 await 的任务没有完成，那么继续将在调用中执行`SynchronizationContext`，这将再次保持 UI 线程忙碌。不过，您可以使用它`ConfigureAwait(false)`来确保继续在线程池中运行。这应该处理这两个问题。请注意，通过执行此操作，您将无法再访问`...`部分中的 UI 控件`ProcessScriptAsync`（没有做任何特别的事情）。另请注意，由于`ProcessScriptAsync`现在正在线程池线程中执行，因此您无需`Task.Run`将方法调用移动到后台线程。

2.  这是一种选择，是的。虽然，如果您根据进度更新 UI，这就是`IProgress`目的。我看到你已经在使用它了，所以这是最好的模型。如果这是在更新与您正在传递的现有进度不同类型的进度`IProgress`（即状态*文本*，而不是作为 int 的完成百分比），那么您可以传递一秒钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:11:27.037

我认为试图在后台线程（用于 CPU 密集型操作或不支持的 IO 操作）和 UI 线程（用于操作 UI 控件）之间来回切换`async`通常是糟糕设计的标志。你的计算和你的 UI 代码应该是分开的。

如果您这样做只是为了通知 UI 某种进展，请使用`IProgress<T>`. 然后线程之间的任何编组将成为该接口实现的责任，您可以[`Progress<T>`](http://msdn.microsoft.com/en-us/library/hh193692.aspx)使用`SynchronizationContext`.

如果您无法避免混合后台线程代码和 UI 线程代码，并且您的 UI 工作不是进度报告（因此`IProgress<T>`不适合），我可能会将每一位后台线程代码包含在其自己的`await Task.Run()`中，并保留 UI 代码顶层。

您使用单个`Task.Run()`运行后台线程代码然后使用`StartNew()`with切换到 UI 线程的`uiScheduler`解决方案也可以。在这种情况下，一些辅助方法可能很有用，特别是如果您也想`await`在 UI 代码中使用。（否则，您必须记住将`await`的结果加倍`StartNew()`）

另一种选择是创建一个`SwitchTo(TaskScheduler)`方法，该方法将返回一个在给定调度程序上继续的自定义等待程序。这种方法在一些异步 CTP 中存在，但由于[在处理异常时被认为太危险](http://social.msdn.microsoft.com/Forums/en-US/async/thread/078c7e77-5b16-4130-bbf5-c8e6ac82effa#4f40e5ef-bf29-4b1a-a4df-30f8df7bf3fc)而被删除。*

# preg-replace - 从文本块中去除段落标签

> ID：14465369
> 
> 赞同：0
> 
> 时间：2013-01-22T18:19:15.630
> 
> 标签：preg-replace, paragraph

我只是想让我的头绕着 pregreplace，但它正在驱使我绕过弯道。我似乎找到的所有例子都比我需要的复杂一百万倍。我想要做的只是从一段文本中去除段落标签。

所以.......

```
$text = '<p>Some block of text</p>'; 
```

应该成为

```
$afterreplace = 'Some block of text'; 
```

所以我想知道我到底如何使用 preg_replace($pattern, $replacement, $string);

我有点走得这么远，但我不知道如何告诉它删除段落........

```
preg_replace($pattern, $replacement, $text); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:44:54.127

这最终奏效了>>

```
$text = '<p>Some Long Text String</p>';
$replaced = str_replace(array('<p>','</p>'),array('',''),$text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:27:42.897

对于特定示例，我将只使用 str_replace。它要快得多。您只需将“<p>”和“</p>”替换为“”。

# php - PDO 查询返回很多结果 PHP

> ID：14465370
> 
> 赞同：0
> 
> 时间：2013-01-22T18:19:16.273
> 
> 标签：php, json, pdo

我的 JSON 响应有问题。在我的 mysql 数据库中，我有两个表：用户和游戏。当我尝试从 1 个用户那里获取所有游戏时，我会在我的响应中得到这些游戏，但 * 我的用户表中的不同用户数量。因此，如果我想要一个 id 为 8 的用户的所有游戏，例如 3 个游戏，我会得到这些游戏，但乘以我拥有的唯一用户数量，比如说 9。所以查询返回 27 个游戏（9 * 3相同的游戏）。我在这里做错了什么。

```
 $pm_id = $_POST["pm_id"];
 $pm_pass = $_POST["pm_pass"];
 $pm_timestamp = $_POST["pm_timestamp"];

try {
     $dbconn = 'mysql:host=' . DBHOST . ';dbname=' . DBDATA;
     $db = new PDO($dbconn, DBUSER, DBPASS);
 } catch (PDOException $e) {
     echo 'Connection failed: ' . $e->getMessage();
 }

 $statement = $db->prepare('SELECT * FROM users WHERE user_id = :id AND password =      :pass');
 $statement->execute(array(':id' => $pm_id, ':pass' => $pm_pass));
 $statement->setFetchMode(PDO::FETCH_ASSOC);

 $row = $statement->fetch();
     if($row['timestamp'] == $pm_timestamp){
         #no sync necessary
         echo json_encode("no sync needed");
     }else{
         #start sync
         $games = array();
         $statement_getAllGames = $db->prepare('SELECT game.game_id, game.user_id,       game.name, game.buyin, game.result, game.startDate, game.endDate, game.location,      game.isTournament, game.participants, game.endposition, game.comment, game.blinds,      game.pause,
         game.visibility, users.timestamp FROM game, users WHERE game.user_id = :id AND    game.timestamp > :timestamp');
         $statement_getAllGames->execute(array(':id' => $pm_id, ':timestamp' =>   $pm_timestamp));

         while($row = $statement_getAllGames->fetch(PDO::FETCH_ASSOC)){
             $games[] = array('game'=>$row);
         }
         echo json_encode(array('games'=>$games));

 }; 
```

如果有帮助，我可以添加表格的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:29:40.073

```
FROM game, users 
```

您缺少连接条件`game.user_id = user.user_id`。您可以将其添加到您的 WHERE 子句中，或者您可以使用较新的 SQL-92 连接语法（请参阅[INNER JOIN ON vs WHERE 子句](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)）：

```
FROM game INNER JOIN users ON game.user_id = user.user_id 
```

# c++ - 返回语句与接受要写入的指针

> ID：14465371
> 
> 赞同：1
> 
> 时间：2013-01-22T18:19:17.120
> 
> 标签：c++, function, return

> **可能重复：**
> [在 C++ 中，从函数返回向量仍然是不好的做法吗？](https://stackoverflow.com/questions/3134831/in-c-is-it-still-bad-practice-to-return-a-vector-from-a-function)

在性能方面，当需要像函数`std::vector`或`std::string`从函数返回“更重”的对象时，**建议使用这种形式**：

```
void func(std::vector<int> *dest)
{
} 
```

而不是这种形式：

```
std::vector<int> func()
{
    std::vector<int> arr;
    // ...
    return arr;
} 
```

我假设第一种形式应该更快，但同时我经常看到第二种形式，Qt API 经常返回一个`QString`例如，可能是因为它使用起来更方便或更直观。

另外我想知道是否有编译器优化可以在使用 return 语句时删除不必要的对象复制。

* * *

**编辑**

是否有今天仍在使用的**流行编译器**不执行答案中提到的优化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T18:20:46.323

> 是否建议使用[按指针传递]而不是[按值返回]？

**没有**。

[现代 C++ 编译器执行命名返回值优化 (NRVO)](https://en.wikipedia.org/wiki/Named_return_value_optimization)，这实际上意味着编译器可靠地省略了此处的副本。不执行复制。

请注意，这与您使用的 C++ 版本无关：C++03 和 C++11 一样。C++11 中唯一改变的是，*当无法执行复制*省略时，该语言使库更容易高效地移出一个值（就像这里发生的那样） 。

对于返回值，通常可以执行复制省略——它在其他情况下更相关（例如，按值传递参数）。不过也有例外；以下代码不能使用命名返回值优化。它*可以*使用 C++11 移动：

```
std::string foo() {
    std::string one = "Foo";
    std::string two = "Bar";

    if (rand() % 2 == 0)
        return one;
    else
        return two;
} 
```

原因是现在两个代码路径返回*不同的命名对象*；这可以防止 NRVO。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T18:20:29.673

按值返回：

```
std::vector<int> func(); 
```

C++ 允许在这种情况下进行复制省略，除此之外，新的 C++ 定义的*移动语义*使这些操作变得便宜。编译器通常可以很好地实现这一点。（使用复制省略，您的 local`arr`实际上最终会在接收者调用站点变量中构建。这种情况也称为“返回值优化”。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T18:50:39.560

允许 RVO 和 NRVO 的规则出现在 ARM (1990) 中，因此如果任何编译器没有实现它们，那将是令人惊讶的。

更重要的是，使用 out 参数（指针或对非常量的引用）非常笨拙。不要这样做，直到分析器说您确实因为返回值的复制而遇到时间问题。此时，按照以下方式重载函数：

```
void func( std::vector<int>& dest )
{
    //  ...
}

std::vector<int> func()
{
    std::vector<int> results;
    func( results );
    return results;
} 
```

然后在分析器说您遇到问题的位置尝试两者，并选择一个解决问题的位置（如果它有所作为）。

实际上我必须这样做一次，但那是在 1991 或 1992 年左右的某个时间。从那以后我就再也没有这样做过，在过去的几年里，我一直在研究一些对性能至关重要的东西；我们仍然定期返回`std::vector`或我们的内部`Matrix`课程。没有 C++11 的优点，因为并非所有目标编译器都支持它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T18:20:39.910

```
std::vector<int> func(); 
```

使用 C++11，上面应该是你的函数。当函数返回时，本地`std::vector`对象将被*移动。*如果可能，编译器甚至可以省略*移动。*

简而言之，不用担心。按值返回。

# php - php中的简单if else条件

> ID：14465373
> 
> 赞同：-1
> 
> 时间：2013-01-22T18:19:23.450
> 
> 标签：php

我正在尝试根据 cookie 条件回显一个字符串，代码如下所示：

```
<?php setcookie('a12cookie', '1'); ?>
<?php if (isset($_COOKIE['a12cookie'])) { ?>
<?php echo "hello"; ?>

<?php } ?>

<?php else { ?>

<?php echo "bye"; ?>

<?php } ?> 
```

我对它显示“你好”没有任何问题，只是当我添加 else 条件时，我得到以下错误：

```
Parse error: syntax error, unexpected T_ELSE in /home/looksr5/public_html/cookie1.php on line 6 
```

我知道我在第 6 行遗漏了一些东西，不知道是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:21:46.877

只需把`else`后面的`}`
像这样：

`<?php } else { ?>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:21:51.150

这应该有效：

```
<?php setcookie('a12cookie', '1'); ?>
<?php echo (isset($_COOKIE['a12cookie']) ? "Hello" : "Bye");?> 
```

*我喜欢使用三元运算符的唯一情况是当我有像你这样的简单条件回显语句时。

此外，当使用 PHP 作为一种表示语言时，通常最好使用它的替代语法。这将允许您非常轻松地插入其他演示文稿。

```
<?php if(isset($_COOKIE['a12cookie'])):?>
Hello
<?php else:?>
Bye
<?php endif;?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T18:22:15.850

`}`如果您打算使用`else`语句，则不允许关闭 php 标签。您的代码应如下所示：

```
...
<?php } else { ?>
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T18:26:42.393

您的代码应如下所示：

```
<?php setcookie('a12cookie', '1');
if (isset($_COOKIE['a12cookie'])) {
    echo "hello"; 
  } else {
  echo "bye";
} 
```

或者至少：

```
<?php setcookie('a12cookie', '1');
if (isset($_COOKIE['a12cookie'])) {
 ?>hello<?php } else {
 ?>bye<?php } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T18:28:08.773

你也可以写，有时更容易阅读

```
<?php if (isset($_COOKIE['a12cookie'])): ?>
    <?php echo "hello" ?>
<?php else: ?>
    <?php echo "bye" ?>
<?php endif ?> 
```

# spring - Spring JPA 中的@Transactional 注释问题

> ID：14465374
> 
> 赞同：1
> 
> 时间：2013-01-22T18:19:23.983
> 
> 标签：spring, jpa, junit4, spring-transactions, transactional

我对交易中的交易有疑问。对于背景，我有一个 School 实体对象，其中映射了一组学生实体对象。我正在使用 Spring Data JPA，它负责所有的 crud 操作。我有一个 SchoolManagementService 类，它在类级别设置了 @Transactional(readonly=true) ，并且对于所有更新方法，我在它们上使用 @Transactional 。在我的 SchoolManagementService 类中，我有一个方法 deleteStudents(List)，我将其标记为 @Transactional。在这种方法中，我一次又一次地调用 StudentsRepository.delete(studentId)。我想确定如果任何删除失败，那么事务应该回滚那个检查的异常。

```
@RunWith(SpringJUnit4ClassRunner.class)   
@TestExecutionListeners({DependencyInjectionTestExecutionListener.class, TransactionalTestExecutionListener.class})   
@ContextConfiguration(locations = {"classpath:PPLRepository-context.xml"})
public class TestClass{

@Test
@Transactional
public void testDeleteStudents(){
StudentManagementService.delete(randomList)
} 
```

使用此测试用例，它会删除除最后一条之外的所有记录。理想情况下，它应该回滚并且不应该删除任何条目。

这是我的带有 TransactionMangaer 配置的 sprin 设置文件

```
<bean id="atomikosTransactionManager" class="com.atomikos.icatch.jta.UserTransactionManager" init-method="init"
            destroy-method="close">
            <property name="forceShutdown" value="true" />
            <property name="startupTransactionService" value="true" />
            <property name="transactionTimeout" value="1000" />
        </bean>

        <bean id="atomikosUserTransaction" class="com.atomikos.icatch.jta.UserTransactionImp" />
        <!-- Configure the Spring framework to use JTA transactions from Atomikos -->
        <bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
            <property name="transactionManager" ref="atomikosTransactionManager" />
            <property name="userTransaction" ref="atomikosUserTransaction" />
            <property name="transactionSynchronizationName" value="SYNCHRONIZATION_ON_ACTUAL_TRANSACTION" />
        </bean> 
```

```
 <!-- EntityManager Factory that brings together the persistence unit, datasource, and JPA Vendor -->
            <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="PPL_GMR">
                <property name="dataSource" ref="PPL_GMRDS"></property>
                <property name="persistenceUnitName" value="PPL_GMR"/>
                <property name="persistenceXmlLocation" value="classpath:META-INF/PPL-persistence.xml"/>
                <property name="jpaVendorAdapter" ref="PPL_GMRJPAVendorAdapter"/>
                    <property name="jpaPropertyMap">
                        <map>
                                    <entry key="hibernate.transaction.manager_lookup_class" value="com.atomikos.icatch.jta.hibernate3.TransactionManagerLookup"/> 
                                    <entry key="hibernate.connection.release_mode" value="on_close"/>
                                    <entry key="hibernate.default_schema" value="${PPL.schema}"/>
                        </map>
                    </property>
</bean> 
```

有人可以建议我对交易的理解是错误的吗？无论我从 API 中读到什么，我的印象是，如果某个方法在服务层是 @Transactional，并且如果它调用 Spring Data JPA 存储库的多个 @Transactional 方法，那么如果我遇到任何运行时异常，那么所有事务都应该回滚. 我什至尝试简单地创建一个测试用例方法，如下所示：

```
@Test
@Transactional
public void testDeleteStudents(){
StudentRepository.delete(1);
StudentRepository.delete(2);// 2 id is not present so I will get a runtime exception.
} 
```

尽管在此方法上保留@Rollback(true/false)，但此方法从数据库中删除 id 1 Student。我认为这个测试用例方法中的 @Transactional 将在这里创建一个新事务，并且 StudentRepository 中的所有事务删除方法都将在同一个事务中运行。除非没有抛出运行时异常，否则不会提交学生数据。

请帮助我更好地理解交易，因为我是新手。我正在使用带有 Oracle 数据库的 Spring Data JPA。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:34:48.810

我认为默认行为是（即使您在测试类中没有它）

```
@TransactionConfiguration(defaultRollback = true) 
```

因此它会在您的测试结束时执行回滚。因此，休眠会话没有与数据库同步，也没有向数据库发出查询 SQL。

你有两个可能性。要么指定

```
@TransactionConfiguration(defaultRollback = false) 
```

或将实体管理器注入您的测试并调用

```
@PersistenceContext
protected EntityManager em;

/**
 * Simulates new transaction (empties Entity Manager cache).
 */
public void simulateNewTransaction() {
    em.flush();
    em.clear();
} 
```

这将强制休眠将所有查询发送到数据库。请注意，这将解决您删除不存在实体的问题，但它的行为与新事务不完全相同，例如，当您缺少外键时，它不会抛出任何东西（这是可以预测的。

您可以使用它来检查 em.find(class, id) 返回的实体的内容并检查您的关系映射，而无需提交事务。

# javascript - 加载指定 #element 的 iframe 会将父视点移动到同一位置

> ID：14465378
> 
> 赞同：3
> 
> 时间：2013-01-22T18:19:55.310
> 
> 标签：javascript, jquery, html, iframe

我使用这个 javascript 来加载一个滚动到我需要的区域的网页`<iframe>`。但是每当加载给定的 iframe 时，视口会立即跳转到该点，就像我`#asContainer`在 URL 末尾使用的一样。

HTML：

```
<h3>Audiosurf</h3>
<div id="asContainerWrapper">
    <iframe id="asContainer" scrolling="no"></iframe>
</div> 
```

JavaScript：

```
$(document).ready(function(){
    $('#asContainer').attr('src','//audio-surf.com/mypage.php?u=DJDavid98#favorites_container');
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T19:50:01.803

使用第一个答案我想出了这个：

[http://jsfiddle.net/UZZ4c/1/](http://jsfiddle.net/UZZ4c/1/)

如您所见，它只是在显示之前加载和重新滚动时隐藏和显示 iframe。

我的第一个想法是您不需要滚动。iframe 元素在加载时不可见，并且浏览器不应滚动到锚点[http://jsfiddle.net/UZZ4c/2/](http://jsfiddle.net/UZZ4c/2/)但是我没有测试这个理论，所以我将把它留给你。

我建议您在 iframe 隐藏时放置一个加载程序来代替它。

```
#asContainer { display: none; }

$(document).ready(function() {
    $('#asContainer').attr("src", "//audio-surf.com/mypage.php?u=DJDavid98#favorites_container").on('load', function() {
        $(this).show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:38:03.437

您对此无能为力。问题在于您使用锚点移动页面链接到源站点的方式。带有普通网站的演示：

```
$(document).ready(function(){
    $('#asContainer').attr("src","http://www.lolwut.com");
}); 
```

[http://jsfiddle.net/WGZUj/](http://jsfiddle.net/WGZUj/)

使用您尝试嵌入的网站进行演示：

```
$(document).ready(function(){
    $('#asContainer').attr('src','//audio-surf.com/mypage.php?u=DJDavid98#favorites_container');
}); 
```

[http://jsfiddle.net/UZZ4c/](http://jsfiddle.net/UZZ4c/)

理论上解决这个问题的一种策略是检测 iframe 何时加载，然后移回原始位置，但这是不可能的。

# vim - 如何在 Vim 中导航多个 ctags 匹配项？

> ID：14465383
> 
> 赞同：65
> 
> 时间：2013-01-22T18:20:11.333
> 
> 标签：vim, ctags, exuberant-ctags

我正在使用`Ctrl`-`]`在 Vim 中使用 Ctags 进行导航。如果有多个匹配项，我如何导航到备用文件？

前任。`something.publish`在包含多次出现的代码库中`publish`：

```
class Foo
  def publish
  end
end

class Bar
  def publish
  end
end 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-22T19:25:07.763

使用`g]`而不是`C-]`获取所有匹配项的列表。

您可能想阅读`:help g]`

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2013-01-22T18:23:43.553

`:tn[ext]`转到下一个标签，`:tp[revious]`转到上一个标签。 `:ts[elect]`为您提供一个可供选择的列表。

`:help tag-matchlist`尝试更多有趣和令人兴奋的事情！

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2017-02-06T22:34:03.527

*添加我最终寻找的答案，以防它帮助其他人：*

`g<C-]>`如果只有一个匹配项，将跳转到标签，如果有多个匹配项，将显示一个列表。

我已将此映射添加到我的 .vimrc 以使其默认执行我想要的操作：

`nnoremap <C-]> g<C-]>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-09T10:06:38.030

**`ltag`**

```
ltag the_tag_name
lopen 
```

打开标签匹配的位置窗口。

这对于正则表达式标签搜索特别强大：

```
ltag /tag_na
lopen 
```

它将列出包含字符串的所有标签`tag_na`（因此包括`the_tag_name`）。

然后，您可以在位置列表中进一步搜索，然后按回车键跳转到标签。

要将其用于光标下的单词，您可能需要定义映射：

```
nnoremap <leader>l exec("ltag ".expand("<cword>"))<CR> 
```

那么，如果你是像我一样的标签狂：

```
command! -nargs=1 Ltag silent ltag <args> | execute "normal \<C-o>" | tab lopen 
```

将打开一个包含位置列表和所有匹配项的新选项卡，而不是直接跳转到该选项卡：

```
:Ltag /my_struct 
```

# ruby-on-rails - 我将如何计算 db 列并将其显示在 rails 的视图中？

> ID：14465388
> 
> 赞同：0
> 
> 时间：2013-01-22T18:20:25.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, calculated-columns

我正在尝试为给定用户计算列的值。我的“joblist”表中有一个名为“jobprice”的列，我想计算 current_user 的“jobprice”列值的总和。我尝试了一些想法，但没有奏效。我已经得到了所有相关的东西。只需要弄清楚如何为“joblist”找到 current_user 的所有 user_id，然后取“jobprice”列值并总结总数。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:28:59.410

尝试使用[`sum()`](http://guides.rubyonrails.org/active_record_querying.html#sum)：

```
current_user.joblists.sum('jobprice') 
```

这假设您已经在模型中声明了`has_many :joblists`关联。`User`

# android - 坚持美味的教程，如何获得“活动访问令牌”？

> ID：14465393
> 
> 赞同：1
> 
> 时间：2013-01-22T18:20:34.233
> 
> 标签：android, facebook-graph-api, oauth

标题几乎概括了它，我正在尝试在 Graph API Explorer 中测试我的 Open Graph Actions 但是当我发布到 /me/mynamespace:myaction 时，我收到此错误（使用 Graph API Explorer 为我生成的访问令牌，我只要求publish_actions）

```
{
  "error": {
    "message": "(#15) This method must be called with an app access_token.", 
    "type": "OAuthException", 
    "code": 15
  }
} 
```

我已经完成了我的作业并进行了搜索，以找到一个合适的访问令牌来解决这个问题，采用 APPID|APP_SECRET 格式，但使用它我得到了

```
{
  "error": {
    "message": "An active access token must be used to query information about the current user.", 
    "type": "OAuthException", 
    "code": 2500
  }
} 
```

关于如何解决这个问题的任何想法？

为了提供更多上下文，为 android facebook 应用程序创建了图形操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:23:34.123

`/me`如果没有登录到您的应用程序的用户的用户访问令牌，您将无法发布，“我”是“当前用户”的占位符。

听起来这里发生了两件事：

1.  您已将 Open Graph 操作配置为要求发布应用程序访问令牌（这是操作上的配置选项
2.  当您遇到该错误时，您尝试使用 App Access Token 但没有更改`/me/mynamespace:myaction`为`/<USER ID>/mynamespace:myaction`

一些注意事项：

*   切勿将应用访问令牌放入您的客户端代码中；它可用于修改应用程序设置。如果您确实需要仅通过应用程序访问令牌发布操作，则需要为您的应用程序实现一个服务器端组件，该组件使用应用程序访问令牌发出请求
*   您可能需要更改操作的打开图形操作设置，以便可以使用用户访问令牌发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:48:58.500

您`APP_ID|SECRET`作为应用访问令牌发送的方法是错误的。要获取应用访问令牌，您需要通过此端点请求它：

```
https://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID
   &client_secret=YOUR_APP_SECRET&grant_type=client_credentials 
```

请参阅[此处了解更多详细信息](https://developers.facebook.com/docs/howtos/login/login-as-app/)

# python - matplotlib：AxesSubplot 对象没有属性 tick_params

> ID：14465401
> 
> 赞同：2
> 
> 时间：2013-01-22T18:21:10.923
> 
> 标签：python, numpy, matplotlib, plot

我正在尝试使用通过 pylab 导入的 matplotlib 制作一个简单的绘图： from pylab import *

```
list_of_files=[('EXP001.txt','EXP001'),('EXP002.txt','EXP002'),('EXP003.txt','EXP003'),('EXP004.txt','EXP004')]

datalist = [ ( loadtxt(filename), label ) for filename, label in list_of_files ]

fig=figure()
ax=fig.add_subplot(111)

for data, label in datalist:
line,= loglog( data[:,0], data[:,2], ls='-', marker='.', label=label)

ax.tick_params(axis='x', reset=True, which='minor', labelbottom='on')

legend()
title("EXP001 Simulations")
xlabel("k in $h/Mpc$ ")
ylabel("$P(k)$")
savefig('./pyprueba.png',dpi=200)
show() 
```

但我不断收到错误：

```
File "pyplot.PS.py", line 13, in <module>
ax.tick_params(axis='x', reset=True, which='minor', labelbottom='on')
AttributeError: 'AxesSubplot' object has no attribute 'tick_params' 
```

我已经从本网站的示例和官方文档示例中提取了部分代码，所以我真的不知道这里有什么问题。

# .net - MS Access 中 Odbc 到 oleDb 的必要更改

> ID：14465404
> 
> 赞同：0
> 
> 时间：2013-01-22T18:21:14.853
> 
> 标签：.net, vb.net, visual-studio-2010, odbc, oledb

我在 .net 中有一个类来使用 Odbc 连接 Access，但我想升级到 OleDb

odbc 代码是：

```
Imports System.Data.Odbc
Imports System

Public Class DatabaseFunctions
    Shared con As OdbcConnection

    Const conString = "Dsn=name;uid=sa;pwd=password;"

    Public Shared Function GetDataReader(ByVal SQL As String) As OdbcDataReader
        Dim dr As OdbcDataReader
        Try
            con = New OdbcConnection
            con.ConnectionString = conString
            con.Open()
            Dim cmd As New OdbcCommand(SQL, con)
            dr = cmd.ExecuteReader
            cmd.Connection.Close()
            cmd.Connection.Dispose()
            cmd.Connection = Nothing
            cmd.Parameters.Clear()
            cmd.Dispose()
            cmd = Nothing
            con.Close()
            con.Dispose()
            Return dr
        Catch ex As Exception
            MessageBox.Show("Error:" & ex.Message, "TITLE", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Finally
            If (con.State = System.Data.ConnectionState.Open) Then
                con.Close()
                con.Dispose()
            End If
        End Try
        dr = Nothing
        Return dr
    End Function

    Public Shared Function GetDataReaderVal(ByVal SQL As String) As String
        Dim result As String
        Try
            con = New OdbcConnection
            con.ConnectionString = conString
            con.Open()
            Dim cmd As New OdbcCommand(SQL, con)
            Dim dr As OdbcDataReader
            result = ""
            dr = cmd.ExecuteReader
            dr.Read()
            resultado = dr.GetValue(0).ToString
            cmd.Connection.Close()
            cmd.Connection.Dispose()
            cmd.Connection = Nothing
            cmd.Parameters.Clear()
            cmd.Dispose()
            cmd = Nothing
            con.Close()
            con.Dispose()
            Return resultado
        Catch ex As Exception
            MessageBox.Show("Error GETTING DATA:" & ex.Message, "TITLE", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Finally
            If (con.State = System.Data.ConnectionState.Open) Then
                con.Close()
                con.Dispose()
            End If
        End Try
        resultado = "0"
        Return resultado
    End Function

    Public Shared Function GetDataTable(ByVal SQL As String) As DataTable
        Dim table As New DataTable
        Try
            con = New OdbcConnection
            con.ConnectionString = conString
            con.Open()
            Dim cmd As New OdbcCommand(SQL, con)

            Dim da As New OdbcDataAdapter(cmd)
            da.Fill(table)
            cmd.Connection.Close()
            cmd.Connection.Dispose()
            cmd.Connection = Nothing
            cmd.Parameters.Clear()
            cmd.Dispose()
            cmd = Nothing
            con.Close()
            con.Dispose()
            Return table
        Catch ex As Exception
            MessageBox.Show("Error GETTING TABLE:" & ex.Message, "TITLE", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Finally
            If (con.State = System.Data.ConnectionState.Open) Then
                con.Close()
                con.Dispose()
            End If
        End Try
        Return table
    End Function

    Public Shared Sub ExecuteQuery(ByVal SQL As String)
        Try
            con = New OdbcConnection
            con.ConnectionString = conString
            con.Open()
            Dim cmd As New OdbcCommand(SQL, con)
            cmd.ExecuteNonQuery()
            cmd.Connection.Close()
            cmd.Connection.Dispose()
            cmd.Connection = Nothing
            cmd.Parameters.Clear()
            cmd.Dispose()
            cmd = Nothing
            con.Close()
            con.Dispose()
        Catch ex As Exception
            MessageBox.Show("Error EXE QUERY:" & ex.Message, "TITLE", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Finally
            If (con.State = System.Data.ConnectionState.Open) Then
                con.Close()
                con.Dispose()
            End If
        End Try
    End Sub
End Class 
```

我在做：

```
Imports System.Data.OleDb

Public Class DatabaseFunctions

    Dim Provider As String
    Public OleCn As New OleDbConnection()
    Public OleDa As New OleDbDataAdapter()

    Public Shared Function OledbConnectionString() As String
        Provider = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & My.Application.Info.DirectoryPath & "/dbFile.Accdb;Jet OLEDB:Database Password=password;"
        Return Provider
    End Function

    Public Shared Sub start()
        If OleCn.State <> ConnectionState.Open Then
            OleCn.ConnectionString = OledbConnectionString()
            OleCn.Open()
        End If
    End Sub

    Public Sub finish()
        OleCn.Close()
    End Sub

  Public Shared Sub ExecuteQuery(ByVal SQL As String)
        Dim OleDr As OleDbDataReader
        OleDa.SelectCommand = New OleDbCommand()
        OleDa.SelectCommand.CommandText = SQL 
        OleDa.SelectCommand.Connection = OleCn
        OleDr = OleDa.SelectCommand.ExecuteReader()     
        OleDr.Close()
  End Sub

End Class 
```

我怎样才能像在 odbc 中一样返回一个表、一个值和读取器，我很困惑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:04:07.407

这是很好的代码，看看它：

```
Imports System.Data.SqlClient
Imports System.Data.Common
Imports System.IO

Public Class DbConn
    Private DataCon As DbConnection
    Private DBConnectionOpen As Boolean = False

    ''' <summary>
    ''' Submits a SQL query to an Access database
    ''' </summary>
    ''' <param name="sql">The SQL query</param>
    ''' <returns>A datatable (result set) containing the data requested by the query; returns Nothing if there is a SQL error.</returns>
    ''' <remarks>Use for SELECT queries; use ExecuteSQL for action queries.
    ''' This function does not permanently change whether the connection is open or not.
    ''' If the connection is already open, it gets the data and leaves it open.
    ''' If the connection is closed, it opens it, gets the data, and closes it again.</remarks>
    Public Function GetDataTable(ByVal sql As String) As DataTable
        Dim rsData As New DataTable()
        ' 
        Dim ConnectionWasAlreadyOpen As Boolean = DBConnectionOpen
        If Not ConnectionWasAlreadyOpen Then OpenDatabaseConnection()
        If DBConnectionOpen Then
            Dim cmd As DbCommand = DataCon.CreateCommand
            cmd.CommandType = CommandType.Text
            cmd.CommandText = sql
            Try
                Dim rdr As DbDataReader = cmd.ExecuteReader()
                rsData.Load(rdr, LoadOption.Upsert)
                rdr.Close()
                rdr = Nothing
            Catch ex As Exception
                Throw New System.Exception(ex.Message, ex)
                GetDataTable = Nothing
                Exit Function
            End Try
            GetDataTable = rsData
        Else
            GetDataTable = Nothing
        End If
        If Not ConnectionWasAlreadyOpen Then CloseDatabaseConnection()
    End Function

    ''' <summary>
    ''' Executes a SQL action query (INSERT, UPDATE, DELETE, CREATE, etc.)
    ''' </summary>
    ''' <param name="sql">The text of the SQL action query</param>
    ''' <remarks>Use for action queries; use GetDataTable for SELECT queries
    ''' This sub does not permanently change whether the connection is open or not.
    ''' If the connection is already open, it gets the data and leaves it open.
    ''' If the connection is closed, it opens it, gets the data, and closes it again.</remarks>
    Public Sub ExecuteSQL(ByVal sql As String)
        Dim ConnectionWasAlreadyOpen As Boolean = DBConnectionOpen
        If Not ConnectionWasAlreadyOpen Then OpenDatabaseConnection()
        If DBConnectionOpen Then
            Dim cmd As DbCommand = DataCon.CreateCommand
            cmd.CommandType = CommandType.Text
            cmd.CommandText = sql
            cmd.ExecuteNonQuery()
        End If
        If Not ConnectionWasAlreadyOpen Then CloseDatabaseConnection()
    End Sub

    ''' <summary>
    ''' Creates a new connection to an Access database
    ''' </summary>
    ''' <param name="FileName">The full path of the Access file</param>
    ''' <remarks></remarks>
    Public Sub New(ByVal FileName As String)
        'Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\myFolder\myAccess2007file.accdb;Persist Security Info=False;
        Dim fileData As FileInfo = My.Computer.FileSystem.GetFileInfo(FileName)
        DataCon = New OleDb.OleDbConnection
        Dim csb As OleDb.OleDbConnectionStringBuilder = New OleDb.OleDbConnectionStringBuilder
        csb.ConnectionString = "Data Source=" & FileName
        Select Case fileData.Extension.ToLower
            Case ".mdb" : csb.Add("Provider", "Microsoft.Jet.Oledb.4.0")
            Case ".accdb" : csb.Add("Provider", "Microsoft.ACE.OLEDB.12.0")
        End Select
        DataCon.ConnectionString = csb.ConnectionString
        Try
            DataCon.Open()
            DataCon.Close()
        Catch ex As Exception
            Throw New System.Exception("Unable to connect to database.", ex.InnerException)
        End Try
    End Sub

    ''' <summary>
    ''' Connects to a SQL Server database
    ''' </summary>
    ''' <param name="ServerName">SQL Server server</param>
    ''' <param name="DatabaseName">Default database</param>
    ''' <remarks></remarks>
    Public Sub New(ByVal ServerName As String, ByVal DatabaseName As String)
        DataCon = New SqlConnection()
        Dim csb As SqlConnectionStringBuilder = New SqlConnectionStringBuilder
        csb.DataSource = ServerName
        csb.InitialCatalog = DatabaseName
        csb.IntegratedSecurity = True
        csb.MultipleActiveResultSets = True
        DataCon.ConnectionString = csb.ConnectionString
        Try
            DataCon.Open()
            DataCon.Close()
        Catch ex As Exception
            Throw New System.Exception("Unable to connect to database.", ex.InnerException)
        End Try
    End Sub

    ''' <summary>
    ''' Makes certain that the database connection is closed when the object is destroyed
    ''' </summary>
    ''' <remarks></remarks>
    Protected Overrides Sub finalize()
        Try
            DataCon.Close()
        Catch ex As Exception

        End Try
    End Sub

    ''' <summary>
    ''' Opens a database connection to an access file
    ''' </summary>
    ''' <remarks>Since the procedures in this module share the "DataCon" DbConnection, it is impossible to open multiple connections using these procedures.</remarks>
    Public Sub OpenDatabaseConnection()
        Try
            DataCon.Open()
        Catch ex As Exception
            Throw New System.Exception("Error opening data connection.", ex.InnerException)
            DBConnectionOpen = False
            Exit Sub
        End Try
        DBConnectionOpen = True
    End Sub

    ''' <summary>
    ''' Closes the DataCon DbConnection
    ''' </summary>
    ''' <remarks>Note that the GetDataTable and ExecuteSQL procedures leave (or return) the connection to its previous open/close state. To keep the connection open while running several queries, call OpenDatabaseConnection before the queries and CloseDatabaseConnection after. When running one query at a time, there is no need to explicitly call either function, because GetDataTable and ExecuteSQL will open and close the database if it was closed to begin with.</remarks>
    Public Sub CloseDatabaseConnection()
        DataCon.Close()
        DBConnectionOpen = False
    End Sub
End Class 
```

# android - 监控android默认浏览器链接点击及其在自定义应用程序中的状态

> ID：14465406
> 
> 赞同：0
> 
> 时间：2013-01-22T18:21:16.863
> 
> 标签：android, browser, monitoring, android-internet

我们无法通过侦听器或控制台日志监视默认浏览器链接活动，因为它被称为侵犯隐私参考：[获取在浏览器中查看的当前页面（可能吗？）](https://stackoverflow.com/questions/4470434/get-the-current-page-being-viewed-in-the-browser-possible) 我尝试使用我自己的自定义 Web 视图来覆盖默认 Web 链接单击要检测的事件，但 Ref:problem 仅当网页在此自定义浏览器中加载时才有效。 [如何根据域名使链接在 webview 中打开或默认浏览器打开？](https://stackoverflow.com/questions/4907045/how-to-make-links-open-within-webview-or-open-by-default-browser-depending-on-do)

有什么方法可以检测默认浏览器上的链接点击/页面加载并在我的自定义应用程序中使用它？

# winforms - 我可以在 Visual Studios 上使用 LinkLabel 链接到 Windows 窗体吗？

> ID：14465409
> 
> 赞同：4
> 
> 时间：2013-01-22T18:21:33.930
> 
> 标签：winforms, visual-studio-2010, c#-4.0, hyperlink, linklabel

我一直在 google 上查找如何使用 linklabel 链接到 Windows 窗体。我遇到的所有教程仅将您链接到 URL 或本地磁盘。有什么帮助吗？我不想使用按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:38:48.707

通过`LinkLabel`在 click 事件中执行代码，像使用按钮一样使用 。当用户单击标签时，以编程方式打开表单（如果它已经打开，则将其置于最前面）。您将无法为表单设置 URL。

```
private void linkLabel1_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    Form2 form2 = Application.OpenForms.OfType<Form2>().FirstOrDefault();
    if (form2 == null) {
        form2 = new Form2();
        form2.Show();
    } else {
        form2.BringToFront();
    }
} 
```

# javascript - 如何获取组合框上最后更改的选项的值

> ID：14465410
> 
> 赞同：0
> 
> 时间：2013-01-22T18:21:36.160
> 
> 标签：javascript, jquery, html, backbone.js

纯 jQuery 版本：

```
$('select#register-type').live('change', function () {
  console.log($(this).val());
}); 
```

主干视图委托事件版本：

```
App.Views.register = new (Backbone.View.extend({
  tagName: 'section',
  id: 'content',

  template: _.template($('script.register').html()),

  render: function () {
    this.$el.html(this.template);
    return this;
  },

  events: {
    'change select#register-type': 'type'
  },

  type: function (event) {
    // i want to console.log the current option selected... 
  }
})); 
```

我怎样才能做到这一点？看来我不能像 jquery 版本那样使用 $(this) ，这被称为注册视图对象......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:28:38.917

利用**`event.target`**

```
 type: function (event) {
    $(event.target).find('option:selected').val();

      **OR**

     $(event.target).val();
 } 
```

# android - 如何将可点击项目添加到 AChartEngine 折线图？

> ID：14465411
> 
> 赞同：2
> 
> 时间：2013-01-22T18:21:39.893
> 
> 标签：android, achartengine

示例中有以下代码：

```
/**
 * Copyright (C) 2009, 2010 SC 4ViewSoft SRL
 *  
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *  
 *      http://www.apache.org/licenses/LICENSE-2.0
 *  
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.achartengine.chartdemo.demo.chart;

import java.util.ArrayList;
import java.util.List;

import org.achartengine.ChartFactory;
import org.achartengine.chart.PointStyle;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;

import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Paint.Align;

/**
 * Average temperature demo chart.
 */
public class AverageTemperatureChart extends AbstractDemoChart {
  /**
   * Returns the chart name.
   * 
   * @return the chart name
   */
  public String getName() {
    return "Average temperature";
  }

  /**
   * Returns the chart description.
   * 
   * @return the chart description
   */
  public String getDesc() {
    return "The average temperature in 4 Greek islands (line chart)";
  }

  /**
   * Executes the chart demo.
   * 
   * @param context the context
   * @return the built intent
   */
  public Intent execute(Context context) {
    String[] titles = new String[] { "Crete", "Corfu", "Thassos", "Skiathos" };
    List<double[]> x = new ArrayList<double[]>();
    for (int i = 0; i < titles.length; i++) {
      x.add(new double[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 });
    }
    List<double[]> values = new ArrayList<double[]>();
    values.add(new double[] { 12.3, 12.5, 13.8, 16.8, 20.4, 24.4, 26.4, 26.1, 23.6, 20.3, 17.2,
        13.9 });
    values.add(new double[] { 10, 10, 12, 15, 20, 24, 26, 26, 23, 18, 14, 11 });
    values.add(new double[] { 5, 5.3, 8, 12, 17, 22, 24.2, 24, 19, 15, 9, 6 });
    values.add(new double[] { 9, 10, 11, 15, 19, 23, 26, 25, 22, 18, 13, 10 });
    int[] colors = new int[] { Color.BLUE, Color.GREEN, Color.CYAN, Color.YELLOW };
    PointStyle[] styles = new PointStyle[] { PointStyle.CIRCLE, PointStyle.DIAMOND,
        PointStyle.TRIANGLE, PointStyle.SQUARE };
    XYMultipleSeriesRenderer renderer = buildRenderer(colors, styles);
    int length = renderer.getSeriesRendererCount();
    for (int i = 0; i < length; i++) {
      ((XYSeriesRenderer) renderer.getSeriesRendererAt(i)).setFillPoints(true);
    }
    setChartSettings(renderer, "Average temperature", "Month", "Temperature", 0.5, 12.5, -10, 40,
        Color.LTGRAY, Color.LTGRAY);
    renderer.setXLabels(12);
    renderer.setYLabels(10);
    renderer.setShowGrid(true);
    renderer.setXLabelsAlign(Align.RIGHT);
    renderer.setYLabelsAlign(Align.RIGHT);
    renderer.setZoomButtonsVisible(true);
    renderer.setPanLimits(new double[] { -10, 20, -10, 40 });
    renderer.setZoomLimits(new double[] { -10, 20, -10, 40 });

    Intent intent = ChartFactory.getLineChartIntent(context, buildDataset(titles, x, values),
        renderer, "Average temperature");
    return intent;
  }

} 
```

这是来自 ACharEngine 库示例的代码，它只是绘制了一个简单的折线图。可以设置监听器以按行点击吗？这是不可能的，可能有一些方法可以设置监听器以点击点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:27:49.620

有可能的。看看示例中的[这个](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)类，第 157 行到第 179 行。

[http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)

# domain-driven-design - 领域模型和数据模型之间的复杂映射——我们是否有失去紧密耦合的风险？

> ID：14465413
> 
> 赞同：0
> 
> 时间：2013-01-22T18:21:44.230
> 
> 标签：domain-driven-design

来自[DDD：解决软件核心的复杂性](https://rads.stackoverflow.com/amzn/click/com/0321125215)（第 159/160 页）：

> 当专门创建数据库模式作为对象的存储时，值得接受一些模型限制以保持映射非常简单
> 
> ...
> 
> 这确实需要牺牲对象模型的丰富性，并且有时必须在数据库设计中做出妥协（例如选择性非规范化），但否则就有失去模型和实现的紧密耦合的风险。
> 
> ...
> 
> 但至关重要的是，映射是透明的，通过检查代码或读取映射工具中的条目易于理解。
> 
> ...
> 
> 当数据库被视为对象存储时，无论映射工具的功能如何，都不要让数据模型和对象模型相差甚远。牺牲一些丰富的对象关系以保持接近关系模型。

我确实明白，使用更简单的映射，*数据*映射器将更容易维护，错误更少等，但我不明白为什么我们还可能通过在*DM*和*数据模型*之间进行映射来冒失去*域模型*和*DM 实现*之间紧密耦合的风险复杂的。

 **也就是说，在创建*DM*时，我们应该尽量忽略非域层将如何实现以及它们将使用什么技术。并且由于*数据映射*器位于*DAL*内（因此在*域层*之外），那么*DM*和*数据模型*之间映射的复杂性（以及*数据映射器的复杂性）如何对**DM*和*DM 实现*之间的耦合产生任何影响？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:33:53.997

报价实际上是：

> 但否则会冒失去模型和实现的紧密耦合的风险

它正在谈论*概念*模型及其实现（在代码中）的耦合。这不是关于数据映射器和将数据映射到实现模型的讨论，而是关于在实现概念模型时如何失去对概念模型的保真度的讨论 - 特别是当您需要考虑数据库或其他实现细节时。**

# android - 卡尔曼滤波器：如何在没有“状态转换模型”的情况下使用它？

> ID：14465415
> 
> 赞同：7
> 
> 时间：2013-01-22T18:21:48.147
> 
> 标签：android, filter, accelerometer, kalman-filter

我正在研究安卓手机的加速度计。我希望过滤掉加速度计返回的记录手机动作的可怕噪音。

我正在阅读卡尔曼滤波器，因为低通是不够的。

但是我没有从`ACCELERATION(k-1)`到过渡的模型，`ACCELERATION(k)`因为它是用户的动作。所以我没有状态转移矩阵（不同论文中的 H 或 F，在等式 Xk = H *Xk-1 + B*命令+噪声中乘以 Xk-1 的那个）

我看到一些人在简单的例子中使用单位矩阵。它如何用于动态加速？

我知道卡尔曼滤波器，人们总是会产生一些 H 矩阵，我只是不知道在我的情况下如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:28:59.963

卡尔曼滤波器通常被认为是一个线性滤波器，其中您拥有所有模型矩阵，但滤波器的概念及其最初的应用来自非线性模型。在这种情况下，您使用函数而不是矩阵。

如果预测和更新函数是高度非线性的，您可以使用统计方法在线估计您的参数。您首先可以看到的是[unscented kalman 滤波器](http://www.seas.harvard.edu/courses/cs281/papers/unscented.pdf)，它从确定性采样技术中恢复均值和协方差 - [unscented 变换](http://www.nottingham.ac.uk/ggiemr/downloads/A%20Ajayi%20Phd%20Thesis/Chapter%208.pdf)。我认为在你的情况下，这可能是最好的开始。

卡尔曼滤波器还有其他变体。您可以从[维基百科](http://en.wikipedia.org/wiki/Kalman_filter)开始，但如果您搜索“自适应卡尔曼滤波器”，您可以看到该主题的多样性。

如果您想更深入地了解该主题但没有必要从所有数学开始，我推荐非常好的[书：Kalman Filter for Beginners](http://www.amazon.co.uk/Kalman-Filter-Beginners-MATLAB-Examples/dp/1463648359) to start with Phil Kim。传感器融合还有其他可能性，但它是另一个广泛的主题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-30T12:40:36.210

您可以使用单位矩阵。

**在没有任何新测量的情况下，**状态转移矩阵用于根据当前状态预测未来状态。正如您所说，在您的情况下，您没有任何方法可以预测未来状态（加速度） - 所以您最好的猜测是未来状态（加速度）与当前状态相同。这正是单位矩阵的作用。

在许多卡尔曼滤波器中，有**一些**方法可以根据当前状态预测未来状态，这就是非恒等状态转换矩阵将介入的地方。例如，假设您的卡尔曼滤波器根据 GPS 和速度计估计车辆位置和速度; 那么即使没有新的测量值，您也可以通过根据速度改变位置来预测未来的位置。戴夫的回答展示了如何使用状态转换矩阵来做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T18:50:56.620

给定一个状态向量`[x, v_x, a_x]`，即物体在一个方向上的位置、速度和加速度（同样的逻辑适用于其他两个自由度）。您通常将状态转换矩阵定义为

```
1   dt   0.5*dt*dt
0   1    dt
0   0    1 
```

如果你把它写出来，你会得到：

```
xnew = x+v_x*dt + 0.5*a_x*dt*dt
vnew = v_x + a_x*dt
anew = a_x 
```

这些是物体以恒定加速度运动的运动方程。

在卡尔曼框架中处理未知用户引起的运动的方式是通过植物噪声项。您假设，不是以完全相同的加速度继续前进，而是对加速度（以及状态的其他组件）存在未知的随机扰动。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-31T01:36:12.950

卡尔曼滤波器的作用在于它进行预测，然后根据您的观察纠正您的预测。如果您的模型不是很动态，尽管您的模型假定位置不变，但根据您的观察，您会得到介于两者之间的东西。所以 Identity 可以工作。

# python - 在 Python 中针对一个项目存储属性列表的更好方法是什么？

> ID：14465423
> 
> 赞同：3
> 
> 时间：2013-01-22T18:22:19.530
> 
> 标签：python, class, object, data-structures

我正在生成连接到服务器的计算机列表。对于每台计算机，我都会收集一个属性列表。我是 Python 和编程的新手，我发现我的解决方案相当笨拙。

我是用列表来做这个的。我有一个主列表：`computer_list`每台计算机都是另一个列表，具有状态、日期、配置文件等属性。

```
computer_list = [cname1, cname2, cname3]
cname1 = ['online', '1/1/2012', 'desktop'] 
```

这种方法的缺点越是我工作和更改这个程序就越明显。我希望有更直观的东西。我查看了字典，但这个解决方案似乎和我的一样复杂。一旦我开始迭代和分配，列表中的列表是可行的，但不可读。我确信有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:26:56.043

制作一个`Computer`存储描述计算机属性和状态的字段的对象是一种可行的方法。

您应该阅读更多关于课程的内容，但以下内容应该适合您的需求：

```
class Computer(object):
    def __init__(self, status, date, name):
        self.status = status
        self.date = date
        self.hostname = name

    # (useful methods go here) 
```

也许你会初始化`Computer`对象并将它们存储在一个列表中，如下所示：

```
comp1 = Computer("online", "1/1/2012", "desktop")
comp2 = Computer("offline", "10/13/2012", "laptop")

computers = [comp1, comp2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:29:55.453

使每台计算机成为对象：

```
class Computer(object):
    def __init__(self, name, status, date, kind):
        self.name   = name
        self.status = status
        self.date   = date
        self.kind   = kind

    @classmethod    # convenience method for not repeating the name
    def new_to_dict(cls, name, status, date, kind, dictionary):
        dictionary[name] = cls(name, status, date, kind) 
```

然后将它们存储在字典或列表中。

```
computer_list = []
computer_list.append(Computer("rainier", "online", "1/1/2012", "desktop"))

computer_dict = {}
Computer.new_to_dict("baker", "online", "1/1/2012", "laptop", computer_dict) 
```

现在，当您遍历它们时，它很简单：

```
for comp in computer_list:
    print comp.name, comp.status, comp.date, comp.kind 
```

您还可以`__str__()`在类上定义以定义它们的显示方式，等等。

# c# - 是否可以从 VLC 获得视频文件中帧的精确时间戳？

> ID：14465428
> 
> 赞同：10
> 
> 时间：2013-01-22T18:22:31.760
> 
> 标签：c#, .net, vlc, libvlc

我希望在我用 C# 编写的应用程序中使用 VLC 作为视频播放器的基础（因为 VLC 是少数可以正确解码我正在使用的格式的播放器之一），但我需要它的主要任务要执行的是：

1.  能够在视频文件中的单独帧之间向前和向后浏览。
2.  为每一帧显示精确到毫秒的时间戳，并能够将时间戳中继到应用程序。

现在我正在通过 VLC 扩展 LUA 脚本执行此操作，但是 VLC 通过*vlc.var.get(input, “time”)*返回的时间缺乏精度，并且对于同一视频文件中的同一帧在多个文件读数。框架浏览也不太可靠。另外，以这种方式接收的值不能自动中继到另一个应用程序。

我尝试使用 libVLC 的 LibVLC.NET 包装器，但我仍然无法在帧之间浏览，并且返回的毫秒计数值相当奇怪。这几乎就像 VLC (libVLC) 在播放期间不返回实际时间值，而是返回某种舍入值，当读取精度低至毫秒时，该值具有相当大的延迟。标准的 VLC 界面既不能显示精确到毫秒的时间值，也不能在帧之间浏览。

有没有可行的方法通过从使用 .NET 编写的应用程序运行 VLC 来使用 VLC 执行上述两个任务？还是我应该考虑其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-04T13:30:46.937

我不确定你可以用 VLC 做到这一点。但是你可以使用[这个例子](http://www.codeproject.com/Articles/885869/Stream-Player-control)，它使用了非常好的框架，叫做[ffmpeg](https://www.ffmpeg.org/about.html) 我几乎可以肯定你将能够播放你的流并导航。此外，您可能会使用另一种[解决方案](https://playerframework.codeplex.com/) ，我不得不说我不熟悉它，但值得检查。

基本上尝试找到视频播放器的.Net实现而不是工作VLC

# hadoop - Hive 生成 的 MapReduce 代码

> ID：14465430
> 
> 赞同：3
> 
> 时间：2013-01-22T18:22:40.220
> 
> 标签：hadoop, mapreduce, hive

Apache HiveQL 在哪里存储它生成的 Map/Reduce 代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T18:29:25.790

我相信 Hive 并不会像从 Java 中那样真正生成 Map/Reduce 代码，因为它是由 Hive 查询规划器解释的。

如果您想了解 Hive 查询生成什么样的操作，可以在查询前加上前缀`EXPLAIN`，您将看到抽象语法树、依赖关系图和每个阶段的计划。更多信息在`EXPLAIN` [这里](https://cwiki.apache.org/Hive/languagemanual-explain.html)。

如果您真的想查看一些 Map/Reduce 作业，您可以尝试[使用 YSmart](http://ysmart.cse.ohio-state.edu/)，它将您的 HiveQL 语句转换为有效的 Java Map/Reduce 代码。我没有亲自使用过它，但我知道有人使用过它并说过好话。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-17T02:00:41.207

似乎 Hive 每次执行查询都会更改此方法。

[http://hive.apache.org/docs/r0.9.0/api/org/apache/hadoop/hive/ql/exec/Task.html#execute(org.apache.hadoop.hive.ql.DriverContext)](http://hive.apache.org/docs/r0.9.0/api/org/apache/hadoop/hive/ql/exec/Task.html#execute(org.apache.hadoop.hive.ql.DriverContext))

# visual-studio-2010 - ARM 视觉工作室 2010 2012

> ID：14465431
> 
> 赞同：0
> 
> 时间：2013-01-22T18:22:50.773
> 
> 标签：visual-studio-2010, compiler-construction, cross-platform, arm

我想知道是否有插件可以帮助在 Visual Studio 2010 或 2012 中开发 ARM 目标。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T02:36:09.780

*   Visual Studio 2008 包括一个 ARM 编译器，可以针对 Windows CE/Windows Mobile。
*   Visual Studio 2010 不包含 ARM 编译器。
*   Visual Studio 2012 包含一个 ARM 编译器，可以针对 Windows RT，也可能还针对 Windows Phone 8（我没有尝试为后者进行编译）。

# ios - 我可以自定义 UIReferenceLibraryViewController 的外观和“完成”按钮吗？

> ID：14465433
> 
> 赞同：1
> 
> 时间：2013-01-22T18:22:59.970
> 
> 标签：ios, objective-c, dictionary, uiviewcontroller

我正在使用`UIReferenceLibraryViewController`弹出字典来定义我的应用程序中的某些单词。这是一个非常简单的控制器，我将它称为我的主视图（类似于侧边栏）上的一个较小的视图，而不是使用`UINavigationController`. 结果，当我点击它时，它包含的“完成”按钮什么也不做。

我可以隐藏或自定义此完成按钮的行为吗？

如果做不到这一点，或者，我能否以某种格式或其他格式（HTML、XML、NSData 等）获取定义的内容，以我自己的方式显示？

我的应用程序中确实有第三方词典，但它给出的定义有点偶然，如果可能的话，我更喜欢使用 Apple 的词典。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:20:03.110

根据字典提供者的 DMCA 删除通知的经验，您不能以任何方式操纵此视图控制器。如果你这样做了，你就违反了合同，并让自己面临法律诉讼。

# c# - UserControl 的行为类似于 asp.net 中的面板

> ID：14465435
> 
> 赞同：0
> 
> 时间：2013-01-22T18:23:18.720
> 
> 标签：c#, asp.net, user-controls

我有几个自定义用户控件 (100+)，它们都有一个共同的格式，这基本上要求我们将用户控件包装在目标页面上的面板控件中。为简单起见，我想创建一个处理此问题的基本控件，因为每个自定义控件的几乎所有基本功能都是相同的。

我所做的是创建一个基类，在该基类中创建一个私有面板控件，然后覆盖 Render 以在 base.Render 周围生成面板前/后标签。

现在这很好用，因为我们关心的所有用户控件都继承了它，并且我们向继承的控件公开的少数格式项按预期工作（宽度、CssClass 等）。

我真正想要的是通过基类将所有面板控件项公开给继承的控件，但无需正确的属性/方法来公开每个元素。

关于最好的方法是什么的任何想法？我只是不想手动实现每个面板属性/方法。我们也使用设计时属性（第一是 CssClass 和 Width），但我们一直在向用户提供设计时属性...

我们所拥有的只是寻找更简单/更好的解决方案。

```
using System;
using System.Collections;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public class BaseUserControl : System.Web.UI.UserControl
{
    private Panel _panel;
    private bool _isPanelLoaded;

    public Panel Panel
    {
        get
        {
            if (_panel == null)
            {
                _panel = new Panel();
                _isPanelLoaded = true;
            }
            return _panel;
        }
    }

    public BaseUserControl()
    {

    }

    protected override void Render(HtmlTextWriter writer)
    {
        if (_isPanelLoaded)
        {
            Panel.RenderBeginTag(writer);
            base.Render(writer);
            Panel.RenderEndTag(writer);
        }
        else
        {
            base.Render(writer);
        }
    }

    public Unit Width
    {
        get
        {
            if (Panel.Width.IsEmpty)
            {
                return 0;
            }
            return Panel.Width;
        }
        set
        {
            Panel.Width = value;
        }
    }

    public string CssClass
    {
        get
        {
            return Panel.CssClass;
        }
        set
        {
            Panel.CssClass = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:32:32.877

为了公开所有属性，您必须从 Panel 控件继承。由于您有一个面板属性，您可以在该属性上设置属性。在标记中定义它们是一个挑战......对于大多数简单的对象，如果你给属性一个属性`<PersistenceMode(PersistenceMode.Attribute)>`，你将能够访问 sytnax 中的属性`Panel-CssClass`，但我不知道这是否适合你，因为 Panel 是一个控件。很好尝试。

您本质上是在谈论编写包装您想要的属性的属性，因此如果前一种解决方案不起作用，最好这样做。

# c# - 运行应用程序时 Ultrabutton 不在文本属性中显示 unicode 字符

> ID：14465436
> 
> 赞同：1
> 
> 时间：2013-01-22T18:23:38.127
> 
> 标签：c#, winforms, button, infragistics

我正在尝试将 UltraButton 的文本属性显示为此 unicode 字符- ▼ 。我试图从字符映射中复制它，也尝试过类似的东西 -

```
button1.Text = "\u2129" 
```

问题是它们都在 VS 的设计器模式下显示箭头，但是当我运行应用程序时，它显示一个无法识别的符号。我已经浏览了[这个链接](https://stackoverflow.com/questions/2506996/c-sharp-button-text-unicode-characters)和[这个链接](https://stackoverflow.com/questions/255907/how-to-put-unicode-characters-on-a-system-windows-forms-button-in-c)，但是箭头只显示在设计器视图中，而不是在运行应用程序时。为什么会这样。另外，我已将字体名称设置为“Arial Unicode MS”

![设计器视图中的按钮](../Images/5fbfef8c999ba8e40d3e53ea0417f523.png)

![运行应用程序时的按钮](../Images/0a51db4e89833abbc09a2b858896014d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:41:24.450

我猜您遇到的问题是 UltraButton 独有的。从您刚刚发布的图像的外观来看，您可能只需使用标准的 Windows From 按钮即可。如果可以，只需打开 ClassName.Designer.cs 并找到设置按钮文本的位置。将实际字符复制到文本字符串中：

```
this.YourButton.Text = "▼"; 
```

这在设计器和运行应用程序时都正确显示。

如果您真的不想使用标准的 Windows 窗体按钮，您可以随时将文本转换为图像并将图像添加到按钮。看起来像这样：

```
string text = "▼";
Font font = new Font("Arial Unicode MS", 12f);
Image img = new Bitmap(1, 1);
Graphics drawing = Graphics.FromImage(img);
SizeF textsize = drawing.MeasureString(text, font);
img.Dispose();
drawing.Dispose();
img = new Bitmap((int) textsize.Width, (int)textsize.Height);
drawing = Graphics.FromImage(img);
drawing.Clear(YourButton.BackColor);
Brush textBrush = new SolidBrush(Color.Black);
drawing.DrawString(text, font, textBrush, 0, 0);
drawing.Save();
textBrush.Dispose();
drawing.Dispose();

YourButton.Text = "";
YourButton.Image = img; 
```

# vb.net - 对 DataGridViewImage 列进行排序

> ID：14465439
> 
> 赞同：2
> 
> 时间：2013-01-22T18:23:45.827
> 
> 标签：vb.net, datagridview

我需要能够`DataGridViewImageColumn`通过**单击它的标题来对它**进行排序。我在设计器中将*排序模式设置为自动*，但是当我单击标题时没有任何反应。

这些列是否可排序？

如果是这样，我需要做什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T20:59:32.910

我做了一个示例，展示了如何使用**自定义比较器类***对 dataGridView 进行排序*。正如@Andrew Morton 发布的那样，网上有一些资源，这可能会有所帮助

 **1.  [对 dataGridView 图像列进行排序](http://www.vbforums.com/showthread.php?559639-RESOLVED-Sorting-a-DataGridView-image-column)
2.  [排序 DGV 图像列](http://social.msdn.microsoft.com/forums/en-us/Vsexpressvcs/thread/B7CC00A4-14B6-4461-A812-D700507BA786)
3.  [DataGridView.Sort 方法](http://msdn.microsoft.com/en-us/library/wstxtkxs.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)
4.  [ColumHeaderCell.SortingGlyphDirection](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumnheadercell.sortglyphdirection.aspx)

我个人研究了 1./3。和 4\. 将它们全部结合起来，我们就到了。我用两张图片（100x100 和 200x200px）对其进行了测试，并按宽度排序。当然，您可以将其更改为您想要的任何内容。

首先我创建了一个表格`frmImateColumnSort.vb`

```
Dim colName As New DataGridViewTextBoxColumn
Dim colImage As New DataGridViewImageColumn

Private Sub frmImageColumnSort_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    ' create columns (or create them with designer)
    colName.Name = "colName"
    colName.HeaderText = "Name"
    DataGridView1.Columns.Add(colName)

    colImage.Name = "colImage"
    colImage.HeaderText = "Image"
    ' we are going to set sortMode in source 
    ' so we can show a sortGlyph
    colImage.SortMode = DataGridViewColumnSortMode.Programmatic
    DataGridView1.Columns.Add(colImage)

    ' add some demo data
    DataGridView1.Rows.Add("imageA", Image.FromFile("imageA.jpg"))
    DataGridView1.Rows.Add("imageB", Image.FromFile("imageB.jpg"))
End Sub
Private Sub DataGridView1_ColumnHeaderMouseClick(sender As Object, e As DataGridViewCellMouseEventArgs) Handles DataGridView1.ColumnHeaderMouseClick
    ' in case imageColumnHeader is clicked
    If DataGridView1.Columns(e.ColumnIndex).Name = colImage.Name Then
        ' show correct sortingGlyph
        Dim currentSortOrder = DataGridView1.Columns(e.ColumnIndex).HeaderCell.SortGlyphDirection
        If currentSortOrder = SortOrder.None OrElse currentSortOrder = SortOrder.Descending Then
            currentSortOrder = SortOrder.Ascending
        Else
            currentSortOrder = SortOrder.Descending
        End If
        DataGridView1.Columns(e.ColumnIndex).HeaderCell.SortGlyphDirection = currentSortOrder
        ' use a custom comparerClass to provide sorting abilities for images
        DataGridView1.Sort(New ImageComparer(currentSortOrder))
    End If
End Sub 
```

之后我创建了一个`ImageComparer.vb`类并实现了`IComparer`.

```
Public Class ImageComparer
  Implements System.Collections.IComparer

  Private sortOrderModifier As Integer = 1

  Public Sub New(ByVal sortOrder As SortOrder)
    If sortOrder = sortOrder.Descending Then
        sortOrderModifier = -1
    ElseIf sortOrder = sortOrder.Ascending Then
        sortOrderModifier = 1
    End If
  End Sub

  Public Function Compare(ByVal x As Object, ByVal y As Object) As Integer _
    Implements System.Collections.IComparer.Compare

    Dim DataGridViewRow1 As DataGridViewRow = CType(x, DataGridViewRow)
    Dim DataGridViewRow2 As DataGridViewRow = CType(y, DataGridViewRow)

    ' sort according to eg. Width by accessing column 1 - containing the image
    ' you may access any cell here. You might even sort imageColumn on any other colum
    Dim img1 As Image = CType(DataGridViewRow1.Cells(1).Value, Image)
    Dim img2 As Image = CType(DataGridViewRow2.Cells(1).Value, Image)
    Dim CompareResult As Integer = img1.Width.CompareTo(img2.Width)

    Return CompareResult * sortOrderModifier
  End Function
End Class 
```

这导致以下屏幕截图

![排序状态1](../Images/959bc63106447629a3fe11f6caf5718d.png) ![排序状态2](../Images/088893cbee72c55524cb6c836aa77a0f.png)

如果您正在使用绑定到 dataGridView 的数据源，则必须对数据源进行排序！例如。*[对数据表图像列进行排序 q&a](https://stackoverflow.com/questions/9879635/c-sharp-window-form-datatable-with-image-column-sorting)*

hth

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:26:28.543

在这里提问之前，您应该做一些研究（例如在 google 上搜索）。

你会发现像[http://www.vbforums.com/showthread.php?559639-RESOLVED-Sorting-a-DataGridView-image-column](http://www.vbforums.com/showthread.php?559639-RESOLVED-Sorting-a-DataGridView-image-column)这样的东西。**

# sql-server - 我如何结合这些不同的代码一起工作

> ID：14465443
> 
> 赞同：-1
> 
> 时间：2013-01-22T18:23:58.903
> 
> 标签：sql-server, tsql, formatting

我很尴尬地说这是我在 SQL Server 中的弱点，我不知道如何让这段代码正常运行。它是几个不同的代码之一：

```
SUM(CASE WHEN RRDD Not Like '12%' AND RRDD Not Like '13%' AND RRDD Not Like '16%' AND RRDD
Not Like '17%' AND RRDD Not Like '2706%' AND RRDD Not Like '2707%' AND RRDD Not Like '2331%'
THEN CAST([2011 Total] AS FLOAT)*CASE WHEN IsNumeric [DUR_In_Hours] = 1 THEN
CAST([DUR_IN_Hours] AS FLOAT) ELSE 0 END) AS SP_DOM_COST 
```

我得到的错误如下：

`IsNumeric is not recognized and incorrect syntax near DUR_In_Hours`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:25:49.720

您缺少括号`IsNumeric()`：

```
 WHEN IsNumeric([DUR_In_Hours]) = 1 
```

你也错过了`END`你的第一个`CASE`：

```
SUM(CASE 
        WHEN RRDD Not Like '12%' 
            AND RRDD Not Like '13%' 
            AND  RRDD Not Like '16%' 
            AND RRDD Not Like '17%' 
            AND RRDD Not Like '2706%' 
            AND RRDD Not Like '2707%' 
            AND RRDD Not Like '2331%' 
        THEN CAST([2011 Total] AS FLOAT)
        ELSE 0
        END
    *
    CASE 
        WHEN IsNumeric([DUR_In_Hours]) = 1 
        THEN CAST([DUR_IN_Hours] AS FLOAT) 
        ELSE 0 
        END) AS SP_DOM_COST 
```

最后一个建议，根据`RRDD`字段的数据类型，您可能不需要使用`LIKE`语法。您可能可以将其替换为`NOT IN`：

```
SUM(CASE 
        WHEN RRDD NOT IN ('12', '13', '16', '17', '2706', '2707', '2331')
        THEN CAST([2011 Total] AS FLOAT)
        ELSE 0
        END
    * 
     CASE 
        WHEN IsNumeric([DUR_In_Hours]) = 1 
        THEN CAST([DUR_IN_Hours] AS FLOAT) 
        ELSE 0 
        END) AS SP_DOM_COST 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/489ba/4)

# ios - 与实现 tableview 委托和数据源方法的 UIViewController 相比，使用 UITableViewController 有什么优势吗？

> ID：14465447
> 
> 赞同：23
> 
> 时间：2013-01-22T18:24:14.817
> 
> 标签：ios, uitableview

当`Xcode`我创建一个新的视图控制器来包含一个表格视图时，我有两个选择

1.  创建一个新的`UITableViewController`
2.  创建一个新`UIViewController`的实现`UITableViewDelegate`和`UITableViewDataSource`协议

假设我正确实现了协议的所有必需和可选方法，那么使用`UITableViewController`? 意味着，在类中是否有任何东西（内存管理、缓存等）在幕后实现`UITableViewController`，使选项 1 比选项 2 更好？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-22T18:40:41.050

无论您采用两种方法中的哪一种，都必须编写委托和协议方法。

当您需要带有表格视图的视图控制器时，您应该选择使用`UIViewController`over的可能原因只有两个：`UITableViewController`

1.  您需要表视图小于视图控制器的视图。
2.  您需要向视图控制器添加不随表格视图滚动的其他视图（尽管有解决此问题的方法`UITableViewController`）。

以下是`UITableViewController`您需要复制的所有功能：

1.  定义和设置`UITableView`.
2.  将自身设置为表视图的数据源和委托。
3.  覆盖该`setEditing:animated:`方法以设置`editing`表格视图的属性。
4.  `viewWillAppear:`根据`clearsSelectionOnViewWillAppear`属性取消选择方法中最后选定的行。
5.  在方法中闪烁表格视图的滚动条`viewDidAppear:`。
6.  连接刷新控件（从 iOS 6 开始）。
7.  在第一次出现时重新加载表格视图。
8.  调整表格视图`contentInset`（从 iOS 7 开始）。
9.  当键盘出现时，根据需要滚动表格视图。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-09-04T05:50:32.883

# 0行代码的键盘优势

`UITableViewController`当屏幕键盘出现时提供**自动滚动**`UIViewController`，而常规不提供。

A`UITableViewController`可靠地在视图内移动编辑区域，而无需摆弄键盘通知。自 iOS 诞生之日起，它就已经这样做了，而键盘通知发生了变化，很少提供向后兼容性。

每当需要编辑视图（如登录屏幕）时，请考虑使用`UITableViewController`并利用这一独特功能，只需**0 行代码**。

不幸的是，常规`UIViewController`采用该`UITableViewDelegate`协议不**提供**该功能。

## [![UITableViewController](../Images/c370f9cd23bb75a32fafb6b0ab61ff33.png)](https://i.stack.imgur.com/XfujM.gif)

从**iPhone OS 诞生**到**今天**。

► 在[GitHub 上找到此解决方案，并在](https://github.com/SwiftArchitect/SO-14465447)[Swift Recipes](http://swiftarchitect.com/recipes/#SO-14465447)上找到更多详细信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-22T18:28:29.513

`UITableViewController`允许在 iOS5 上拥有静态表

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T18:30:02.327

唯一 a`UITableViewController`有/做而常规`UIViewController`没有的，是一个`tableView`属性，它符合`UITableViewDelegate`and`UITableViewDataSource`协议。Ad RolandasR 指出，将视图控制器设置为（的后代）`UITableViewController`也可以让您使用静态表格单元格。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-22T18:30:34.307

使用 UITableViewDelegate 的主要优点是简单。但是，创建自己的不假定视图是表的 TableViewController 有一些优点：

1）您可以添加其他元素并使表格占据屏幕的较小部分。2）您可以添加一大堆从您的控制器派生的所有VC都可以访问的辅助方法。当我有不同的 UITableViewCell 类型时，我实现了辅助方法来自动返回行高，并且还自动注册各种单元格、从表中的 CGPoint 获取单元格引用的方法、拉动刷新回调等。

虽然您始终可以从 UITableViewController 派生并添加辅助方法，但我认为主要优点是表格不会占据整个视图。

# cakephp - CakePHP 在控制器外部获取 url 参数

> ID：14465448
> 
> 赞同：0
> 
> 时间：2013-01-22T18:24:18.893
> 
> 标签：cakephp

有人知道，如何在控制器之外获取 url 数组参数（例如 bootstrap.php）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:24:45.700

CakePHP 归根结底仍然是 PHP，因此您可以使用任何有效的 PHP 方法来实现这一点。喜欢：

```
if (!empty($_SERVER['QUERY_STRING'])) {
    // A querystring was set...
} 
```

或者

```
$url = parse_url($_SERVER['REQUEST_URI']);
if (!empty($url['query'])) {
     // A querystring was set...
} 
```

之后你可以做任何你想做的事情。

# c# - WinPcap 过滤字符串语法错误

> ID：14465453
> 
> 赞同：1
> 
> 时间：2013-01-22T18:24:58.780
> 
> 标签：c#, wireshark, packet-capture, winpcap

我正在尝试从配置 UI 生成 WinPcap 过滤器。现在我有一个看起来像这样的过滤器字符串`ip && (((ip.src == 10.10.10.10 && (tcp.port == 10 || udp.port == 10)) && (ip.dst == 20.20.20.20 && (tcp.port == 20 || udp.port == 20))))`。当我将它输入到 Wireshark 时，这个过滤器是有效的，但是当我尝试通过 WinPcap 编译它时，我得到一个`syntax error`. 我已经编译了一个简单的过滤器（`ip and tcp`）没有问题，所以我知道它与这个过滤器字符串有关。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T19:01:35.767

~~您可能需要指定协议，而不仅仅是将`ip`. 例如~~

 ~~```
(ip.proto == TCP) && ... 
```~~  ~~因此，您使用的过滤器选项符合 wireshark 语法。您需要使用[BPF 格式](http://biot.com/capstats/bpf.html)来捕获数据，以便能够在 wireshark 和 WinPcap 之间来回切换。您可以使用您希望收集的特定界面上的“捕获选项”来测试您的过滤器。

![在此处输入图像描述](../Images/c3bb712f9f688826b1542df8f120699e.png)

![在此处输入图像描述](../Images/14a038190e2efc7bc2003a8cfa2b2560.png)

您的 wireshark 过滤器将被转换为以下 BPF 代码：

```
ip && (((ip src 10.10.10.10 && (port 10)) && (ip dst 20.20.20.20 && (port 20)))) 
```

有关详细信息，请参阅 Wireshark 中的[FilterCaptures](http://wiki.wireshark.org/CaptureFilters)部分和WinPcaps 页面上的[过滤器表达式语法。](http://www.winpcap.org/docs/docs_412/html/group__language.html)~~

# ruby-on-rails - 为什么我的 thor copy_file 命令不起作用？

> ID：14465455
> 
> 赞同：0
> 
> 时间：2013-01-22T18:25:06.547
> 
> 标签：ruby-on-rails, templates, thor

我正在尝试设置一个 Rails 应用程序模板，并在我的 sample.rb 模板文件中有这个代码：

```
run "bundle install"

copy_file "/Users/amiterandole/Desktop/current/rails/templates/guard/Guardfile", "." 
```

捆绑安装运行得很好，但复制命令失败并出现以下错误：

```
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/thor-0.16.0/lib/thor/actions/create_file.rb:47:in `binread': Is a directory - /Users/amiterandole/Desktop/current/rails/templates/myapp (Errno::EISDIR) 
```

我无法理解这个错误以及如何解决它。我究竟做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T19:38:54.073

尝试指定包含文件名的目标文件路径。

```
copy_file "/Users/amiterandole/Desktop/current/rails/templates/guard/Guardfile", "my_destination_path/Guardfile" 
```

# visual-studio-2010 - 必须重建报告项目才能预览

> ID：14465461
> 
> 赞同：0
> 
> 时间：2013-01-22T18:25:23.053
> 
> 标签：visual-studio-2010, reporting-services

在 VS2010 中，我每次都必须重建一个报告项目来预览更改。

以前，我可以保存以进行预览。有人知道修复吗？

# python - python可以制作瓷砖图吗？

> ID：14465463
> 
> 赞同：0
> 
> 时间：2013-01-22T18:25:33.990
> 
> 标签：python, matplotlib, plot

python（例如matplotlib）可以制作如下图，其中颜色表示每个数据点的强度？谢谢！

![在此处输入图像描述](../Images/d4053218174851d2e9fa43c9dd659aa4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:27:29.403

如果您希望鼠标报告鼠标下数据的值，则只需要所有这些机器。要生成图像，您真正需要的是 [(doc)](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow)：

```
plt.imshow(data, interpolation='nearest') 
```

`cmap`您可以通过关键字控制颜色映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:29:07.243

这是取自[http://matplotlib.org/examples/api/image_zcoord.html](http://matplotlib.org/examples/api/image_zcoord.html)的示例：

![在此处输入图像描述](../Images/81dd3b3e6d403e343715b5ce5e0d0c17.png)

```
"""
Show how to modify the coordinate formatter to report the image "z"
value of the nearest pixel given x and y
"""
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cm as cm

X = 10*np.random.rand(5,3)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.imshow(X, cmap=cm.jet, interpolation='nearest')

numrows, numcols = X.shape
def format_coord(x, y):
    col = int(x+0.5)
    row = int(y+0.5)
    if col>=0 and col<numcols and row>=0 and row<numrows:
        z = X[row,col]
        return 'x=%1.4f, y=%1.4f, z=%1.4f'%(x, y, z)
    else:
        return 'x=%1.4f, y=%1.4f'%(x, y)

ax.format_coord = format_coord
plt.show() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:28:02.997

您正在寻找[`image_zcode`](http://matplotlib.org/examples/api/image_zcoord.html)给出的示例是：

```
"""
Show how to modify the coordinate formatter to report the image "z"
value of the nearest pixel given x and y
"""
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cm as cm

X = 10*np.random.rand(5,3)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.imshow(X, cmap=cm.jet, interpolation='nearest')

numrows, numcols = X.shape
def format_coord(x, y):
    col = int(x+0.5)
    row = int(y+0.5)
    if col>=0 and col<numcols and row>=0 and row<numrows:
        z = X[row,col]
        return 'x=%1.4f, y=%1.4f, z=%1.4f'%(x, y, z)
    else:
        return 'x=%1.4f, y=%1.4f'%(x, y)

ax.format_coord = format_coord
plt.show() 
```

# php - 将所有 POST 数据存储在 SESSION 中

> ID：14465464
> 
> 赞同：11
> 
> 时间：2013-01-22T18:25:34.270
> 
> 标签：php, session

我有更多来自 $_POST 的值（超过 20 个），像这样......

```
$name = $_POST['name'];
$username = $_POST['username'];
$city = $_POST['city'];
$mobile = $_POST['mobile'];
$address = $_POST['address']; 
```

注意：我已经阻止了 SQL 注入的值。

我的问题是我能知道有没有办法一次将所有这些 POST 值存储在 SESSION 中？而不是这种方法..

`$_SESSION['name'] = $name;`ETC

任何答案将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-22T18:27:23.360

```
$_SESSION['post-data'] = $_POST; 
```

这将在单个会话变量中创建一个帖子值数组。这些值可以作为

```
$_SESSION['post-data']['name']
$_SESSION['post-data']['username']
... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-22T18:27:13.703

您可以将一个数组添加到另一个数组。
`$_POST`并且`$_SESSION`只是数组。
请注意，第二个数组中的键在重复的情况下优先。

```
$_SESSION += $_POST; 
```

但是，我不认为这个结局很好，因为客户端可以向会话注入任何他想要的东西，例如劫持您的用户会话 ID。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T18:39:37.060

如果您查找使用与发布的数组相同的键设置的会话变量，您可以使用：

```
foreach ($_POST as $key => $value) {
    ${$key} = $value;
    $_SESSION[$key] = $value;
} 
```

这将使您的 $_POST 数组成为基于数组键的变量，并同时设置会话。`name`然后，您可以使用`$_SESSION['name']`或访问您的帖子`$name`。

这意味着您将不再需要使用：`$name = $_POST['name'];`。由于上面的代码将为您设置名称变量并设置会话变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-09T03:42:04.580

在 php 中使用表单发布或标头位置重定向传递变量的最佳解释查看我在此线程中的答案：[如何通过 php 标头重定向传递在 GET 字符串中接收的变量？](https://stackoverflow.com/questions/11803343/how-to-pass-variables-received-in-get-string-through-a-php-header-redirect/)

# ios - 简单视图拆分视图ios编程

> ID：14465467
> 
> 赞同：0
> 
> 时间：2013-01-22T18:25:48.877
> 
> 标签：ios, objective-c, ipad

我想知道是否有可能有一个充当菜单的第一个视图（有几个按钮，其中一个是编辑）。我希望能够在单击编辑时显示拆分视图。现在，当我这样做时，我得到了错误：

应用程序试图以模态方式呈现拆分视图控制器

我在编辑按钮的操作方法中的代码是：

```
UIStoryboard *editorStoryboard = [UIStoryboard storyboardWithName:@"EditorStoryboard" bundle:nil];
UIViewController *editorViewController = [editorStoryboard instantiateInitialViewController];

editorViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentViewController:editorViewController animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:40:54.283

所以我假设，`ViewController`包含按钮的是根VC。您应该`SplitVC`在点击按钮时更改它（添加一个漂亮的动画），因为拆分应该是您的应用程序的根（它不应该以模态方式呈现）。希望这可以帮助！

**编辑：**

它应该看起来像：

```
AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
appDelegate.window.rootViewContrller = mySplitViewController; 
```

如果你有一个，你也可以在你的自定义 segue 中执行此操作。

# wpf - 在没有数据绑定的情况下使用 WPF？

> ID：14465471
> 
> 赞同：0
> 
> 时间：2013-01-22T18:25:58.923
> 
> 标签：wpf, architecture

我需要创建一个应用程序，它将采用一个 .ini 文件，该文件将包含

*   分钟
*   最大限度
*   默认

元素的值，允许用户编辑这些值并保存一个新的 .ini 文件。由于 .ini 文件不能包含指定组中的不同元素，因此需要动态生成 GUI。从我所读到的关于 WPF 的内容中，它主要体现在数据绑定和通知属性更改上。

由于我的视图模型需要容纳不同数量的变量，因此我无法绑定到属性，因此我计划将一个事件处理程序附加到所有文本框，当 TextBox 失去焦点或 Enter 时，它将选择相应的验证规则被按下。之后，如果它通过验证，它应该相应地更新模型，并使用模型更新视图以获得相应的值。

我想知道这听起来是否是一个有效的想法，是否有类似的设计模式我应该阅读或者我应该完全远离 WPF？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:41:15.550

您仍然可以使用绑定 - 因为 WPF 支持项目模板，并且由于您使用的是 MVVM 模式，您只需为列表中的每个子项目创建一个 VM（您甚至*不需*要这样做，您可以直接在每个列表项的模板到 DTO 或业务对象）

我现在正在做类似的事情 - 我有一个客户的材料测试列表，他们希望对每种材料进行可变数量和类型的测试，但也能够为他们的每个订单调整和更改这些测试顾客

他们实际上有两种测试类型，但为了描述这两种情况中更简单的一种（不需要子虚拟机本身），我刚刚创建了一个`ItemsControl`具有项目模板的项目：

```
<ItemsControl ItemsSource="{SomeBinding}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{PropertyDescription}" />
                <TextBox Text="{PropertyValue}" />
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

在这种情况下，模型只包含一个属性名称/值列表并将它们显示在堆栈面板中（您可能需要`ItemPanel`使用`ItemsPanelTemplate`. WPF 已经支持每种类型的数据模板）。`ItemsControl``DataTemplateSelector`

我目前正在使用 Caliburn.Micro 它实际上为您设置了很多子模板 - 因此，如果您将绑定项目创建为 VM，您可以执行以下简单操作：

```
<ItemsControl x:Name="SomeBinding" /> 
```

只要`SomeBinding`属性中的子项是虚拟机本身，CM 就会负责其余的工作（尽管这是另一回事：P）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:29:45.587

使用实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)的​​类包装[此库](http://code.google.com/p/ini-parser/)，以便 WPF 可以在属性更改后自行更新。这样您就可以有效地将数据绑定到 INI 文件。

# sql - 完全以 SQL 形式任意字符串解析 XML 元素值

> ID：14465472
> 
> 赞同：0
> 
> 时间：2013-01-22T18:26:04.450
> 
> 标签：sql, xml, sql-server-2008, tsql

我们有一段时间编译的日志/审计，我们希望在上面运行一些简短的报告。

日志中的一列是 JSON，但包含 XML。我们希望能够为每一行解析出某个 XML 标记的值。所以给定一个任意字符串，如下所示：

```
{ "XmlData" :"<tag1><tag2><TagToParse>234</TagToParse></tag2><tag1>".....} 
```

我想运行一个 sql 查询，当我给它提供标签名称**TagToParse时返回 234**

在 SQL 中完全做到这一点的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:52:01.537

给您的容器将始终是 tag1，然后应该这样做：

```
DECLARE @MyXML XML
SET @MyXML = '<tag1><tag2><TagToParse>234</TagToParse></tag2></tag1>'

SELECT
 a.b.value('(/tag1//TagToParse/node())[1]', 'nvarchar(max)') AS Tag
FROM @MyXML.nodes('tag1') a(b) 
```

祝你好运。

# c++ - 嵌入python错误不支持按文件名导入

> ID：14465473
> 
> 赞同：7
> 
> 时间：2013-01-22T18:26:11.710
> 
> 标签：c++, python

我正在尝试将 python 嵌入到我的应用程序中，并且很早就被卡住了。

我将 python 嵌入到我的 C++ 应用程序中，并使用本教程中的代码：http: [//docs.python.org/2/extending/embedding.html#pure-embedding](http://docs.python.org/2/extending/embedding.html#pure-embedding)

我的应用程序完全匹配并且编译成功，没有错误。但是，在运行应用程序`pModule = PyImport_Import(pName);`行时返回 0 失败，这意味着我从 PyErr_Print() 得到错误输出

```
Failed to load "C:\Users\workspace\dpllib\pyscript.py"
ImportError: Import by filename is not supported. 
```

正在使用命令调用应用程序`C:\Users\workspace\ndnlib\pyscript.py multiply 50 150`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T19:00:22.513

我不能确定，但​​我认为由于 pName 设置为 argv[1] 并且您使用完整路径来调用脚本，因此 argv[1] 是完整路径。这意味着代码将尝试导入“C:\Users\workspace\dpllib\pyscript.py”，而 python 不能（它只能导入“pyscript”）。

尝试通过在目录中键入“pyscript.py”来运行脚本，并查看错误是否更改为“无法加载“pyscript.py””。如果是这样，那么您必须修复它，以便它不只是导入 argv[1] 并修改字符串以获取模块名称而不是文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T14:54:29.563

如果将文件创建为模块会更简单。

例如，

创建这个：

`<project>/MyModule/__init__.py`

然后运行你的文件`<project>/script.py`

```
dyn_module_name = (... get module name 'MyModule' from console arguments ...)
my_dynamic_module = __import__(dyn_module_name) 
```

由于它将是一个模块，因此它将在您的 scripy.py 执行时加载

# javascript - 我的程序总是调用默认的 servlet

> ID：14465475
> 
> 赞同：1
> 
> 时间：2013-01-22T18:26:26.177
> 
> 标签：javascript, ajax, servlets, dom-events

我在调用 servlet 时遇到问题，所以我需要帮助。这是我的 web.xml

```
<servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/test/*</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>ajaxServlet</servlet-name>
        <servlet-class>org.finki.exercise.servlet.AjaxServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ajaxServlet</servlet-name>
        <url-pattern>/ajaxServlet/*</url-pattern>
    </servlet-mapping></servlet> 
```

我有一个用于测试目的的 jsp 页面，我试图从 ajax 调用 servlet

```
<a href="#" onclick="loadXMLDoc('eva')">proba</a> 
```

阿贾克斯的乐趣

```
function loadXMLDoc(value1)
            {
                var xmlhttp;

                var url="ajaxServlet";
                if (window.XMLHttpRequest)
                {
                    xmlhttp=new XMLHttpRequest();
                }
                else
                {
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.onreadystatechange=function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {

                        document.getElementById("mid_title").innerHTML=xmlhttp.responseText;
                    }
                }

                xmlhttp.open("GET", url+"?url="+value1, true);
                xmlhttp.send();
            } 
```

函数 loadXMLDoc 调用调度程序 servlet `http://localhost:8097/mavenproject1/test/ajaxServlet`。
如何调用 ajaxServlet - `http://localhost:8097ajaxServlet`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:32:25.907

`ajaxServlet`没有前导`/`，因此它被解释为相对路径。因此，如果您向`ajaxServlet`from发送请求`http://localhost:8097/mavenproject1/test/foo`，请求将被发送到`http://localhost:8097/mavenproject1/test/ajaxServlet`。

因此，您需要添加前导`/`. 但这还不够，因为您还需要添加应用程序的上下文路径 ( `/mavenproject1`)。在 JSP 页面中，您可以自动执行如下操作（假设您导入了 JSTL 标签库）：

```
var url= "<c:url value = "ajaxServlet" />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:35:42.100

这是因为您使用的是相对链接，以单词开头`ajaxServlet`。试试吧

```
var url = "../ajaxServlet"; 
```

或者，假设您可以使用 JSTL，

```
var url = "${pageContext.request.contextPath}/ajaxServlet"; 
```

# php - mysql查询中对大小写敏感

> ID：14465476
> 
> 赞同：0
> 
> 时间：2013-01-22T18:26:30.183
> 
> 标签：php, mysql, codeigniter

我有一个验证码，例如我在数据库表中有一个：.`Nag14I`如果我把它写成：`nag14i`在下面的 mysql 查询中，我有一个输出：

```
$query = "SELECT * FROM captcha WHERE word = 'nag14i' AND captcha_time > '$expiration'";
print_r($query); //[num_rows] => 1 
```

我的输出为：

```
word = Nag14I => [num_rows] => 1 
word = nag14I => [num_rows] => 0 
word = Nag14i => [num_rows] => 0 
word = nag14i => [num_rows] => 0 
```

如果通过mysql查询是大写还是小写，如何匹配所有字母？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T18:30:35.627

MySQL 默认情况下不区分大小写，为了使查询区分大小写，请尝试 BINARY 运算符：

```
$query = "SELECT * FROM captcha WHERE BINARY word = nag14i AND captcha_time > '$expiration'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:33:04.333

如果您计划使用区分大小写的匹配，您应该对该字段使用区分大小写或二进制排序规则。这将使您获得预期的结果。

# mysql - 使用 mysql 过滤时间序列数据

> ID：14465477
> 
> 赞同：0
> 
> 时间：2013-01-22T18:26:40.557
> 
> 标签：mysql

我正在从包含时间戳、值对的表中选择每个 X 点。例如：

```
CREATE TABLE data (
value double NOT NULL,
timestamp datetime NOT NULL,
PRIMARY KEY (timestamp),
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

如果我运行：

```
SELECT * FROM data where timestamp < a and timestamp > b order by timestamp desc 
```

我可以接收所有值并在代码中过滤它们，但是有没有更好的方法来做到这一点（希望直接在 sql 中）。我们可以放心地假设数据点将每 X 分钟出现一次。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:32:38.780

如何以分钟为单位获取时间戳和零参考点之间的差异，并检查它是否在间隔内？假设您的参考点是`b`：

```
WHERE MOD(TIMESTAMPDIFF(MINUTE, timestamp, b), @interval) = 0 
```

当然，您将无法使用索引，但至少您可以避免返回所有数据。

# arrays - Matlab从坐标列表中查找邻居

> ID：14465478
> 
> 赞同：1
> 
> 时间：2013-01-22T18:26:40.870
> 
> 标签：arrays, matlab, nearest-neighbor, neighbours

我有一个由 m 属性组成的 n 元素数组。id1 x1 y1 id2 x2 y2 ... idn xn yn

我有一个坐标 (x,y)，我想找到 (x,y) 的左侧、上、下和下的所有元素的 id，这意味着 (x-1,y), (x ,y+1), (x+1,y), (x, y-1)。

我怎样才能快速做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:09:46.667

假设坐标（除了感兴趣的坐标）位于 X (1 xn) 和 Y (1 xn) 中。

1 - 计算到所有坐标的欧几里得距离：

```
D = sqrt((X - x).^2 + (Y - y).^2)); 
```

2 - 对距离向量 D 排序以找到欧几里得距离最小的 4 个坐标

```
[M idx] = sort(D); 
```

3-获取最近点的坐标

```
X(idx(1:4))
Y(idx(1:4)) 
```

检查它是否有效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:58:57.090

@Oliver：我相信它不会起作用，因为你可以让所有邻居都在围绕有趣点的同一四分之一圈内。

在我看来，更好的解决方案应该是将每个感兴趣点周围的区域划分为 4 个区域（在 dX 正、dX 负、dY 正和 dY 负（dX、dY 对的 4 种组合）方面不同。在每个区域中，它是需要找到最小的欧几里得差异。

# sqlalchemy - 如何从 sqlalchemy 查询中获取表名

> ID：14465480
> 
> 赞同：5
> 
> 时间：2013-01-22T18:26:44.297
> 
> 标签：sqlalchemy

我已经通读了查询文档，如果有办法从查询中获取表名，我看不到任何地方——例如，如果我有`q = query(Users)`，我可以从中`Users`退出`q`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:50:29.143

请注意，像您这样的事件简单查询可能涉及其他表，然后是用户，以防它们相关。所以你需要迭代它。

以下应该做你需要的[`.selectable.locate_all_froms()`](http://docs.sqlalchemy.org/en/latest/core/expression_api.html#sqlalchemy.sql.expression.Select.locate_all_froms)：

```
for t in query.selectable.locate_all_froms():
    print repr(t)
    print "table name: %s " % t.name 
```

会产生类似的结果：

```
>>>Table('order', MetaData(bind=None), Column('id', Integer(), table=<order>, primary_key=True, nullable=False, default=Sequence('order_seq', metadata=MetaData(bind=None))), Column('name', String(length=127), table=<order>), schema=None)
>>>table name: order 
```

这应该适用于从 Mapped 对象构建查询，也适用于从 Table 对象构建查询。

# php - 通过 google php client api v3 将大型视频发布到 youtube

> ID：14465491
> 
> 赞同：4
> 
> 时间：2013-01-22T18:27:24.190
> 
> 标签：php, youtube-api, google-api-php-client

我正在尝试通过最新版本的谷歌客户端 api（v3，最新签出源）将大型视频上传到 youtube

我让它发布视频，但我可以让它工作的唯一方法是将整个视频读入一个字符串，然后通过 data 参数传递它。

我当然不想将巨大的文件读入内存，但 api 似乎没有提供其他方法来做到这一点。它似乎期望一个字符串作为`data`参数。下面是我用来发布视频的代码。

```
$snippet = new Google_VideoSnippet();
$snippet->setTitle("Test title2");
$snippet->setDescription("Test descrition");
$snippet->setTags(array("tag1", "tag2"));
$snippet->setCategoryId("22");

$status = new Google_VideoStatus();
$status->privacyStatus = "private";

$video = new Google_Video();
$video->setSnippet($snippet);
$video->setStatus($status);

$videoData = file_get_contents($pathToMyFile);
$youtubeService->videos->insert("status,snippet", $video, array("data" => $videoData, "mimeType" => "video/mp4")); 
```

有没有办法以块的形式发布数据，或者以某种方式流式传输数据以避免将整个文件读入内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:43:56.287

以前似乎不支持此用例。这是一个适用于最新版本的 Google APIs PHP 客户端的示例（来自[https://code.google.com/p/google-api-php-client/source/checkout](https://code.google.com/p/google-api-php-client/source/checkout)）。

```
if ($client->getAccessToken()) {
  $videoPath = "path/to/foo.mp4";
  $snippet = new Google_VideoSnippet();
  $snippet->setTitle("Test title2");
  $snippet->setDescription("Test descrition");
  $snippet->setTags(array("tag1", "tag2"));
  $snippet->setCategoryId("22");

  $status = new Google_VideoStatus();
  $status->privacyStatus = "private";

  $video = new Google_Video();
  $video->setSnippet($snippet);
  $video->setStatus($status);

  $chunkSizeBytes = 1 * 1024 * 1024;
  $media = new Google_MediaFileUpload('video/mp4', null, true, $chunkSizeBytes);
  $media->setFileSize(filesize($videoPath));

  $result = $youtube->videos->insert("status,snippet", $video,
      array('mediaUpload' => $media));

  $status = false;
  $handle = fopen($videoPath, "rb");
  while (!$status && !feof($handle)) {
    $chunk = fread($handle, $chunkSizeBytes);
    $uploadStatus = $media->nextChunk($result, $chunk);
  }

  fclose($handle);
} 
```

# python - 调用 readline() 时，文件打开过滤器显然被忽略了

> ID：14465492
> 
> 赞同：2
> 
> 时间：2013-01-22T18:27:24.167
> 
> 标签：python, python-3.x, readline, flags

我正在运行以下代码：

```
def displayFileOld(file_path):
    f = open(file_path, mode = 'rt', encoding = 'cp1252', errors = 'replace')  
    while True:
        line = f.readline()
        if len(line) == 0:
            break
        print(line) 
```

在 Python 3.3、Windows 8 Pro 下。

我正在“解析”的文件（Java 源文件）由 Eclipse 显示为在 Cp1252 中编码（“从主容器继承”）。Notepad++ 在编码菜单下只说“ANSI”。这两个匹配。

首先，我希望 Unicode 的编码能够......工作。但是，它失败了，并显示以下消息：

```
Traceback (most recent call last):
  File "C:\work\test.py", line 69, in <module>
    main()
  File "C:\work\test.py", line 65, in main
    displayFileOld(r'C:\work\CVSProvisioningFeatures.java')
  File "C:\work\test.py", line 48, in displayFileOld
    print(line)
  File "C:\Python33\lib\encodings\cp437.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_map)[0]
UnicodeEncodeError: 'charmap' codec can't encode characters in position 62-63:     character maps to <undefined> 
```

其次，我不希望我的堆栈跟踪提到 cp437.py，而不是与我在标志中提到的编码相对应的 *.py 文件。（遇到“†”字符时解析失败，不确定 Unicode 如何不包含这个字符 - 这是上下文：'new FeatureDescription(i++,"†† "+str));'）。

第三，我不确定为什么完全忽略错误标志。

我花了几个小时尝试在通用“ANSI”保护伞下托管的不同编码，但徒劳无功。我所能做的就是捕获异常并忽略该行（不可接受）。另一种方法是使用一些“异国情调”的编码，例如 MacRoman，但是在遍历整个源代码树之后，仍然会留下一些意想不到的字符（尽管我只得到 12 个错误而不是 431）......我最终需要的字符转发工作，传递大量字符串。我有大约 50 MB 的 Java 源代码可用于使用脚本，因此非常感谢任何帮助进行此设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:29:25.070

您的问题不在于读取文件，而在于*打印*；回溯显示该行在`print(line)`（`UnicodeEncodeError`注意该异常中的编码）之前。当您读取文件时，您正在从 cp1252*解码*`unicode`为对象，这工作得很好。

您的 Windows 终端正在使用代码页 437，无法处理您尝试打印的字符。Python 需要将您的数据从 unicode 转换为您的终端正在使用的任何内容，以便能够向您显示字符。

`chcp 65001`您可以使用命令（不是 Python 表达式，而是 Windows 命令行工具）切换终端代码页。代码页 65001 是 UTF-8 代码页，它可以处理所有 Unicode 代码点。您可能还需要切换字体才能显示这些字符。请参阅[Windows 命令行中的 Unicode 字符 - 如何？](https://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how)

# three.js - 如何停止 requestAnimationFrame

> ID：14465495
> 
> 赞同：25
> 
> 时间：2013-01-22T18:27:36.270
> 
> 标签：three.js

我需要删除一个画布并建立一个新的。我遇到了一个问题，我不知道如何停止/中断 Three.js 或 webGL 更新过程。如果我强制一个 javascript 错误，我可以停止它（但这真的很愚蠢）。

有谁知道如何停止这个过程，这样我就不会开始堆积那些没有做任何有用或与新进程冲突的进程？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-22T19:15:23.670

```
var id;

function animate() {

    id = requestAnimationFrame( animate );

    renderer.render( scene, camera );

} 
```

取消

```
cancelAnimationFrame( id ); 
```

三.js r.55

# twitter-bootstrap - Bootstrap中的背景颜色泄漏到边距

> ID：14465498
> 
> 赞同：0
> 
> 时间：2013-01-22T18:27:43.063
> 
> 标签：twitter-bootstrap

我在引导程序中遇到了这个问题，我试图在 2 个 .span6 div 上设置背景颜色，但背景泄漏到左侧的边距中。

![](../Images/00abedcbc54aadbfd0a4cd7b8e6e457e.png)

有什么方法可以防止这种情况发生？以下是使用的 HTML。

```
<div class="row">
        <div class="featured-post">
            <div class="span6">
                <!-- thumbnail image here -->
            </div>
            <div class="span6">
                <!-- text here -->
                </div>
            </div>
 </div> 
```

这是 .featured-post div 的 css。

```
.featured-post {
  margin-bottom: 15px;
  background-color: rgba(0, 0, 0, 0.5);
  min-height: 320px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:34:31.557

使用 firebug/chrome 开发者工具，你会看到。

```
@media (min-width: 1200px)
[class*="span"] {
float: left;
min-height: 1px;
margin-left: 30px;
} 
```

左边距正在创造额外的空间。

您可以通过像这样放置 div 来避免这些边距：

```
<div class="featured-post">
   <div class="row">
      <div class="span6">
         <!-- thumbnail image here -->
      </div>
      <div class="span6">
         <!-- text here -->
      </div>
   </div>
</div> 
```

这使 .featured-post 具有 .container 的宽度。

# multithreading - pthreads：可重入/可重用线程的线程池同步方法？

> ID：14465502
> 
> 赞同：0
> 
> 时间：2013-01-22T18:27:49.813
> 
> 标签：multithreading, synchronization, pthreads, threadpool

这是我在这里的第一篇文章，提前感谢您的宽容。

我有一个带有作业队列>>线程数的线程池。

工艺流程：

1.  初始化线程池（M个线程）
2.  将N个任务放入队列（N可以是>> M）
3.  线程开始执行任务；完成当前任务线程后自动执行下一个可用任务。
4.  同步点 - 所有任务都必须完成。
5.  数据处理（单线程）
6.  根据处理后的数据生成任务或退出
7.  转到 2

问题是同步点。我已经使用 counter 和 mutex 实现了简单的信号量：在第 2 步计数器初始化之前，使用要加载的任务数以及每个任务完成时计数器递减。如果计数器 == 零，那么我从工作线程发送 pthread_cond_signal，并且在第 4 步的 pthread_cond_wait 捕获它。

我觉得它不是最有效的方法（我不喜欢在每个线程中锁定/解锁以进行计数器递减，这是一个很大的开销，尤其是在任务有效负载很小的情况下），但不知道如何改进。我知道障碍，但我不能在线程中使用 pthread_barrier_wait，因为它们必须在同步事件发生之前多次重用。

pthread_spin_lock 队列中的任务数？即使队列为空，也不意味着线程没有运行——它们可能在最后 M 个任务上。我无法加入线程，因为它们将在下一个周期中重复使用。

我将不胜感激任何输入/想法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:53:55.127

好吧，你可以稍微优化一下，也许，通过使用原子递减指令而不是计数器上的内核锁 - 将计数器递减为零的线程然后可以调用一些“OnComplete(something)”方法/函数，也许，发信号给原始线程，（就像你现在正在做的那样）。

无论您如何设计队列和屏障/集合点，都不值得将琐碎的任务线程化。无论如何，当您的原始线程进入等待时，通常会有两次上下文更改，并且当它在任务完成后再次运行时，如果池不忙并且池线程在队列中被阻塞，则更多。旋转完成计数将从您的 CPU 池中吸出一个核心 - 不太可能有太大帮助，（特别是如果您将池设计为并行运行一组以上的任务 - 将会有多个原始线程在旋转） .

不要线程化 CPU-trivial-only 任务。如果有很多 CPU 工作要做，或者任务执行阻塞操作并且线程多于内核，那很好。

# php - 如何使用上下文点查询 MySQL 图形数据

> ID：14465504
> 
> 赞同：0
> 
> 时间：2013-01-22T18:27:55.043
> 
> 标签：php, mysql, graph, flot

我的[网站](http://tools.fifaguide.com/player.php?id=1342178905)上有一个工作图表，但图表数据在 24 小时时间范围内开始和结束，而实际上它应该从框架开始。我的查询看起来像：

```
select * where timestamp > 24hrs 
```

如何查询时间范围内的所有数据，加上时间范围之前的第一个数据点？我不能使用恒定值，因为有时离屏点在 10 小时之外，有时在 10 秒之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:10:50.023

您可以选择时间范围之前的第一个数据点：

```
SELECT * FROM yourtable WHERE timestamp <= 24 ORDER BY timestamp DESC LIMIT 1 
```

如果可能有多个相同的时间戳，那么这可以随机选择一个 - 如果这是不可接受的，则使用`ORDER BY timestamp DESC, primary_key`。

所以你可以通过 a 得到你想要的`UNION`：

```
/* This gets the first item previous to your range limitation */
SELECT
    * FROM yourtable
    WHERE timestamp <= 24 ORDER BY timestamp DESC LIMIT 1
UNION
/* Your original query */
SELECT
    * FROM yourtable
    WHERE timestamp > 24; 
```

我在这里假设（根据您的问题）时间戳是一个整数，但如果它是一`DATETIME`列，则可以调整上述内容。

# java - 如何使用 testng 实例化对象并传递给方法

> ID：14465508
> 
> 赞同：0
> 
> 时间：2013-01-22T18:28:08.313
> 
> 标签：java, selenium, selenium-webdriver, testng

我正在尝试将正确实例化的对象传递给其他方法。这是我的代码：

```
public class CreateAndDeleteCollector {

private static WebDriver driver = new FirefoxDriver();
private LoginPage login;
private AdminRtcpCollectorPage rtcp;
private AdminFunctions admin;

//DesiredCapabilities capability = DesiredCapabilities.firefox();
//String hubUrl = "http://localhost:4444/wd/hub";
//WebDriver d = new RemoteWebDriver(new URL(hubUrl), capability);

@BeforeMethod
public void setup() throws Exception {
    LoginPage login = new LoginPage(driver);
    AdminRtcpCollectorPage rtcp = new AdminRtcpCollectorPage(driver);
    AdminFunctions admin = new AdminFunctions();
}

@Test
public void newCollector() throws Exception {
    login.login("192.168.1.100", "admin", "admin");
    rtcp.goToRtcpCollectorPage();
    rtcp.newRtcpCollector("test-1", "test", "test", "192.168.1.100");
}

@Test(dependsOnMethods = { "newCollector" })
public void deleteCollector() throws Exception {
    admin.initialize(driver);
    rtcp.goToRtcpCollectorPage();
    admin.delete("test-1");
}

@AfterTest
public void logoutAndClose() {
    Util.logout(driver);
    driver.close();
}
} 
```

当我使用 TestNG 运行它时，一旦我到达第一个测试方法，它就会出现 NullPointerException 错误，因为登录、rtcp 和管理员。我确定我误解了 @BeforeMethod 注释应该做什么。

我可以把我的所有声明和实例化放在一个设置方法之外，顺便说一句，这很好用，但是把它们放在一个方法中的原因是，当我在 RemoteWebDriver 行中评论时，我得到一个“默认构造函数不能处理异常类型。 ..“ 错误。

有没有人有什么建议？

我认为使用 TestNG 的工厂和数据提供者可能是一个答案，但我不确定如何将其应用于我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:10:39.110

你得到一个空指针异常，因为你在你的方法中重新声明了变量。只需从中删除“登录页面”

登录页面登录 = ...

使用登录 =...

# wpf - 在 Windows 8 上运行导致希伯来语子菜单打开到错误的方向

> ID：14465510
> 
> 赞同：0
> 
> 时间：2013-01-22T18:28:13.247
> 
> 标签：wpf, windows-8, menu, right-to-left

我有一个奇怪的问题 -

RTL 菜单。在 Windows 7 中，子菜单从右侧打开并向左延伸在 Windows 8 中，子菜单从每个菜单项的左侧打开并向右延伸 - 就像在英文菜单中一样。

发生了什么（代码没有变化）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:25:05.817

这可能与 Windows 8 中的平板电脑设置有关吗？因为默认情况下，Win8 似乎假设您使用的是触控控件并且您是惯用右手的，这使得菜单在左侧打开，因此您的手指不会挡住菜单的视图（即使您没有实际触摸屏幕以调出菜单）。

试试看这个网站：[http ://www.articulate.com/support/kb_article.php?product=ve9&id=jtroshyyzr8s](http://www.articulate.com/support/kb_article.php?product=ve9&id=jtroshyyzr8s)

# drupal - 字段取决于其他字段问题

> ID：14465511
> 
> 赞同：0
> 
> 时间：2013-01-22T18:28:13.093
> 
> 标签：drupal, drupal-6, drupal-webform

我正在使用带有 Webform 6.x-3.18 的 Drupal 6.28。我有一个多步骤表单设置。我的某些字段仅在您选择单选按钮时才会显示。在这种特殊情况下，这是一个登记表，其中一个问题是“你会带客人来吗？”。如果他们选择是，那么与他们的客人有关的一些附加字段会下拉。所以这很好用。他们可以提交表格，一切正常。问题是，如果他们返回表单进行编辑并决定单独进行，而现在他们没有带客人，客人字段会按预期从表单中消失，但数据仍然存在于幕后，特别是在数据库。因此，现在当我们针对某些特定的客户字段运行报告时，

谁能想到处理这个问题的最佳地点？我是否应该制作一个自定义模块，以某种方式连接到网络表单并捕获它并重置所有来宾字段？我只是不知道处理这个问题的最佳地点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:32:36.543

您可以对数据的提交有一些逻辑。如果这是他们第一次提交（尚未在 DB 中），请按计划进行。如果数据已经存在，请对相关字段进行前后比较。如果它关闭，您可以清除该用户的数据库点。

您还可以在表单代码中包含一些内容，因此如果未选中该单选按钮，请始终将一些空白/空/无论您如何处理它都插入数据库。这样，即使数据之前存在，它也始终将这些字段写入空白（如果您继续重写数据库中的整行）。

# c - 有条件地列出一个字符串数组

> ID：14465519
> 
> 赞同：2
> 
> 时间：2013-01-22T18:28:48.640
> 
> 标签：c, arrays, string

我正在尝试在 C 中列出给定目录中的所有文件和文件夹，出现以下代码错误，我不知道出了什么问题

```
#include <sys/types.h>
#include <dirent.h>
#include <regex.h>
#include <stdio.h>

#include <unistd.h>
#include <pwd.h>

enum {
    WALK_OK = 0,
    WALK_BADPATTERN,
    WALK_BADOPEN,
};

int walk_directories(const char *dir, const char *pattern, char* strings[])
{
    struct dirent *entry;
    regex_t reg;
    DIR *d; 
    int i = 0;
    //char array[256][256];

    if (regcomp(&reg, pattern, REG_EXTENDED | REG_NOSUB))
    return WALK_BADPATTERN;
    if (!(d = opendir(dir)))
    return WALK_BADOPEN;
    while (entry = readdir(d))
    if (!regexec(&reg, entry->d_name, 0, NULL, 0) )
            //puts(entry->d_name);
        strings[i] = (entry->d_name);
        i++;
    closedir(d);
    regfree(&reg);

    return WALK_OK;
}

void main()
{
    struct passwd *pw = getpwuid(getuid());
    char *homedir = pw->pw_dir;
    strcat(homedir, "/.themes");

    int n = 0;
    char *array[256][100];
    char *array2[256][100];

    walk_directories(homedir, "", array);
        for (n = 0; n < 256; n++)
        {
            //do stuff here later, but just print it for now
            printf ("%s\n", array[n]);
        }

    walk_directories("/usr/share/themes", "", array2);
        for (n = 0; n < 256; n++)
        {
            //do stuff here later, but just print it for now
            printf ("%s\n", array2[n]);
        }
} 
```

编译时的错误是

```
test2.c: In function ‘main’:
test2.c:42:2: warning: incompatible implicit declaration of built-in function ‘strcat’ [enabled by default]
test2.c:48:2: warning: passing argument 3 of ‘walk_directories’ from incompatible pointer type [enabled by default]
test2.c:15:5: note: expected ‘char **’ but argument is of type ‘char * (*)[100]’
test2.c:52:6: warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘char **’ [-Wformat]
test2.c:55:2: warning: passing argument 3 of ‘walk_directories’ from incompatible pointer type [enabled by default]
test2.c:15:5: note: expected ‘char **’ but argument is of type ‘char * (*)[100]’
test2.c:59:6: warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘char **’ [-Wformat] 
```

如果有帮助，我已经在 python 中实现了我想要的，这是 C 的期望结果

```
import os
DATA_DIR = "/usr/share"

def walk_directories(dirs, filter_func):
    valid = []
    try:
    for thdir in dirs:
        if os.path.isdir(thdir):
            for t in os.listdir(thdir):
                if filter_func(os.path.join(thdir, t)):
                     valid.append(t)
    except:
    logging.critical("Error parsing directories", exc_info=True)
    return valid

def _get_valid_themes():
    """ Only shows themes that have variations for gtk+-3 and gtk+-2 """
    dirs = ( os.path.join(DATA_DIR, "themes"),
         os.path.join(os.path.expanduser("~"), ".themes"))
    valid = walk_directories(dirs, lambda d:
            os.path.exists(os.path.join(d, "gtk-2.0")) and \
            os.path.exists(os.path.join(d, "gtk-3.0")))
    return valid

print(_get_valid_themes()) 
```

谢谢你

[编辑] 感谢您的帮助，我现在唯一的问题是 printf 全部吐出垃圾而不是我所期望的，我尝试了一些事情，while 循环现在看起来像这样

```
 while (entry = readdir(d))
    if (!regexec(&reg, entry->d_name, 0, NULL, 0) )
            //printf("%s\n",entry->d_name);
        strcpy(strings[i], (entry->d_name));
        //strings[i] = (entry->d_name);
        printf("%i\n",i);
        i++;
    closedir(d); 
```

我也没有正确打印，这就是我从 3 个 printf 语句中得到的全部

```
0
Adwaita2

\@

0
Radiance

��

\@

�K��
� `���
����
�

��
�
.N=

�O��
�

� 
```

应该提到，如果我启用

```
 printf("%s\n",entry->d_name); 
```

然后它会打印预期的输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:33:59.347

1.  您应该包括`string.h`以获取`strcat(3)`.

2.  在您的声明中：

    ```
    int walk_directories(const char *dir, const char *pattern, char* strings[]) 
    ```

    这`char *strings[]`只是语法糖的意思`char **strings`。由于您要传递一个二维数组，因此这是行不通的。在我看来，您打算创建两个字符串数组，但这不是这些声明的作用：

    ```
    char *array[256][100];
    char *array2[256][100]; 
    ```

    你可能不想要`*`那里的 s 。如果你把它们取下来，你可以将签名更改为`walk_directories`：

    ```
    int walk_directories(const char *dir, const char *pattern, char strings[][100]) 
    ```

    它应该可以工作，并在您的函数内部进行必要的更改以匹配。作为奖励，此更改将使您的`printf`通话也开始工作。

3.  看起来您的`while`循环体周围缺少一些大括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:35:15.647

第一个警告表明编译器无法确定`strcat()`函数应该采用哪些参数。由于这是标准 C 函数，因此此警告意味着您缺少`#include`指令。具体来说，您需要`#include <string.h>`. 当你修复这个问题时，你可能会发现你得到不同的错误和警告，所以从那里开始工作。

# java - 配方解决方案

> ID：14465520
> 
> 赞同：1
> 
> 时间：2013-01-22T18:28:51.510
> 
> 标签：java, netbeans, structure, multimap, file-io

下面是我正在处理的输入示例：

**一个以String,Double**为参数的linkedHashMap

```
NumericMap: { p=20.0, r=5.0, i=2.0} 
```

和文件输入：

```
p = i * i * r 
```

我现在需要做的是获取文件输入并将其作为数据结构存储在程序中，该数据结构允许重复并根据插入维护文件中项目的顺序。从那里我需要能够以相关顺序将双打应用到文件输入中，从而导致：

```
20 = 2 * 2 * 5 
```

从这里我需要说：

```
If(the file input structure .contains("*"){
Double1 = the double in front of the *
Double2 = the double after the *
Answer1 = Double1 * Double2
} 
```

到目前为止，我已经设法通过将文件输入也放入linkedHashMap 来实现所有这些，但是linkedHashMaps 不允许重复条目。有人建议我使用这样的 multiMap：

```
Multimap map = ArrayListMultimap.create();
map.put(key, value1);
map.put(key, value2);
List values = map.get(key); 
```

但不幸的是，这只会返回错误。我也尝试过使用 arrayLists 来做到这一点，但显然 arrayLists 一旦调整后就不会保持那里的顺序。

关于我可以将什么用于我的文件输入以获得上述所有内容以及我应该如何去做的任何想法。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:42:07.573

您可以编写自己的多个地图类。这是实现之一：

```
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;

public class MultiMap<K, V> {
    Map<K, List<V>> map = new HashMap<K, List<V>>();

    public void put(K key, V value) {
        List<V> values = null;
        if(!map.containsKey(key)) {
            values = new LinkedList<V>();
            map.put(key, values);
        } else {
            values = map.get(key);
        }

        assert(values != null);
        values.add(value);
    }

    public List<V> get(K key) {
        return map.get(key);
    }
} 
```

# c# - 如何创建/使用可移动样条线？

> ID：14465522
> 
> 赞同：1
> 
> 时间：2013-01-22T18:29:00.307
> 
> 标签：c#, math, unity3d, spline

我正在创建一个系统，其中玩家角色沿着定义的样条路径移动。这是我需要做的：

1.  输入 Vector3 (XYZ) 坐标数组。
2.  从这些 Vector3 生成样条数据。
3.  沿样条线返回给定相对距离的 Vector3 (0.0 - 1.0)

我正在使用[这里](http://wiki.unity3d.com/index.php?title=Hermite_Spline_Controller)提供的库，它可以满足我的需要，但是生成的样条曲线倾向于通过在曲线周围减速并在直线上加速来在控制点周围“弹弓”。这似乎是样条插值的自然副作用。

不幸的是，我的角色需要以恒定的速度旅行，我需要一种方法来推导出这一点。

我可以使用 C#（或我可以转换的 C++）中的一个好的库吗？

如果做不到这一点，是否有关于样条数学如何工作的不错的参考资料，我可以从中学习？

谢谢！

# leaflet - 传单层排序

> ID：14465523
> 
> 赞同：11
> 
> 时间：2013-01-22T18:29:05.303
> 
> 标签：leaflet

我在传单中遇到关于图层排序的问题。我已经关注了这个页面 [http://leafletjs.com/examples/layers-control.html](http://leafletjs.com/examples/layers-control.html)

确切的问题是......我如何重新排序图层（前景背景等）。

可以说，我的“基础层”之一是由半透明瓷砖制成的，我想通过我的基础层看到“覆盖层”（它应该在前台）

根据页面示例，这里有一个片段来解释有关该问题的更多信息：

```
var baseMaps = {
    "Minimal": minimal,
    "Night View": midnight,
    "My Custom Layer": customlayer
};

var overlayMaps = {
    "Motorways": motorways,
    "Cities": cities
}; 
```

换句话说，我想知道如何将“我的自定义图层”设置为将在前景（overlayMaps 上方）的图层。

我试过设置层的 zindex 值，没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T15:51:17.547

图层控件有两组图层，一组基础图层和一组覆盖图层。覆盖层将绘制在基础层之上。因此，通常，您需要将透明层添加到覆盖层。

该`autoZIndex`选项默认为 On，指定控件必须按照添加顺序为其每个层分配 z 索引，这意味着它们将按该顺序绘制。

请参阅[http://leafletjs.com/reference.html#control-layers](http://leafletjs.com/reference.html#control-layers)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-06T23:36:47.513

设置切片图层的 zIndex。

```
setZIndex( <Number> zIndex )

myLayer1.setZIndex(4);
myLayer2.setZIndex(5); 
```

第 2 层高于第 1 层

# c# - linq 连接返回类型

> ID：14465526
> 
> 赞同：1
> 
> 时间：2013-01-22T18:29:15.410
> 
> 标签：c#, linq

> **可能重复：**
> [LINQ to SQL：返回匿名类型？](https://stackoverflow.com/questions/534690/linq-to-sql-return-anonymous-type)

linq 连接上的 List<> 使用什么返回类型？我正在加入下面的多个表格，我收到了错误`'Cannot implicitly convert type System.Collections.Generic.List<AnonymousType#1> to System.Collections.Generic.List<CargoTanksDAL.aspnet_Users>`

```
 public List<> GetAspnetUsersWithMembershipAndCompany()
    {

        using (DevCargoEntities db = new DevCargoEntities())
        {
            var users = from u in db.aspnet_Users
                        join mem in db.aspnet_Membership on u.UserId equals mem.UserId
                        join cl in db.CT_CompanyLogIn on u.UserName equals cl.UserLogIn
                        join companies in db.CT_Companies on cl.CompanyID equals companies.CompanyID
                        select new
                        {
                            u.UserId,
                            u.UserName,
                            mem.Email,
                            mem.IsLockedOut,
                            mem.IsApproved,
                            mem.CreateDate,
                            companies.CompanyName
                        };

            return users.ToList();
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:32:08.403

没有任何。在这里加入无关紧要，选择很重要，并且您选择匿名类型。您不能返回匿名类型。最好创建一个包含您要返回的属性并实例化该类型的新类。

理论上你可以返回动态或对象，但这是你真的不想走的路径。相信我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:35:37.827

我会为这个用户开设一个新课程..

```
public class SomeKindOfUser
{
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Email { get; set; }
    public bool IsLockedOut { get; set; }
    public bool IsApproved { get; set; }
    public DateTime CreateDate { get; set; }
    public string CompanyName { get; set; }
} 
```

现在你可以使用

```
public List<SomeKindOfUser> GetAspnetUsersWithMembershipAndCompany() 
```

然后在选择中：

```
select new SomeKindOfUser
                        {
                            UserId = u.UserId,
                            UserName = u.UserName,
                            Email = mem.Email,
                            IsLockedOut = mem.IsLockedOut,
                            IsApproved = mem.IsApproved,
                            CreateDate = mem.CreateDate,
                            CompanyName = companies.CompanyName
                        }; 
```

# jquery - jquery/rails 回调一个函数来刷新数据表

> ID：14465527
> 
> 赞同：2
> 
> 时间：2013-01-22T18:29:15.363
> 
> 标签：jquery, ruby-on-rails, datatables

我启动并运行了数据表，以及漂亮的 jquery-ui，就像在数据表的首页中一样。

但是，我遇到的主要问题是我很讨厌 CoffeeScript/JS

我试图每 1 秒重新加载一次数据表，但没有看到任何请求进入网络服务器，因此网页本身没有刷新。

这是我的代码：

应用程序/资产/javascripts/comments.js.coffee

```
jQuery ->
  $('#comments_id').dataTable
    sPaginationType: "full_numbers"
    bJQueryUI: true
    bProcessing: true
    sAjaxSource: $('#coments')
  setInterval('$("#comments_id").dataTable().fnReloadAjax()', 3000); 
```

似乎未执行 setInterval 回调以使用 fnDraw 重绘表格。

看来我的 setInterval 编码错误。

这是我的 app/view/comments/index.html.erb 中的代码

```
<h1>Listing comments</h1>

<table id="comments_id" class="display">
<thead>
  <tr>
    <th>String</th>
  </tr>
</thead>
<% @comments.each do |comment| %>
<tbody>
  <tr>
    <td><%= comment.string %></td>
  </tr>
<% end %>
</tbody>
</table>

<br />

<%= link_to 'New Comment', new_comment_path %> 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:38:06.240

您必须设置`sAjaxSource`and 而不是只重绘数据表，您应该重新加载它：

`.dataTable().fnReloadAjax();`.

请参阅：[JQuery 数据表 - AJAX 重新加载不起作用](https://stackoverflow.com/questions/8043076/jquery-datatables-ajax-reloading-not-working?rq=1)

# php - PHP array_key_exists 不起作用；数组不是多维的

> ID：14465533
> 
> 赞同：4
> 
> 时间：2013-01-22T18:29:41.980
> 
> 标签：php, html, arrays, forms, array-key-exists

我有世界上所有国家的数组：

```
$countries = array(
  "GB" => "United Kingdom",
  "US" => "United States",
  "AF" => "Afghanistan",
  "AL" => "Albania",
  "DZ" => "Algeria",
  "AS" => "American Samoa",
  "AD" => "Andorra",
  "AO" => "Angola",
  "AI" => "Anguilla",
  "AQ" => "Antarctica",
  "AG" => "Antigua And Barbuda",
  "AR" => "Argentina",
  "AM" => "Armenia",
  "AW" => "Aruba",
  "AU" => "Australia",
  "AT" => "Austria",
  "AZ" => "Azerbaijan",
  "BS" => "Bahamas",
  "BH" => "Bahrain",
  "BD" => "Bangladesh",
  "BB" => "Barbados",
  "BY" => "Belarus",
  "BE" => "Belgium",
  "BZ" => "Belize",
  "BJ" => "Benin",
  "BM" => "Bermuda",
  "BT" => "Bhutan",
  "BO" => "Bolivia",
  "BA" => "Bosnia And Herzegowina",
  "BW" => "Botswana",
  "BV" => "Bouvet Island",); 
```

等等所有国家；我 100% 肯定每个国家/地区都被正确列出。

我有一个申请表，它将结果存储在服务器上的文件中。目前，该应用程序的审核页面是一个基本的文本版本，我现在正在将其放入一个模拟表单中，以便为我的客户提供一种更具视觉吸引力的审核应用程序的方法。

所以一个名为的数组`$in_data`存储来自文件的结果。这个数组的结构是这样的`"emergency_medical_insurance" => "value_user_entered"`。每个键是它形成的 HTML 元素的名称，值是用户输入的内容。

表单上的国家选择列表返回国家的两个字母代码。所以我想要做的是搜索`$countries`的值，`$in_data['country_select']`然后返回国家的名称。

`echo $in_data['country_select'];`返回“CA”加拿大和我输入的测试国家的字母代码。

`echo $countries['CA'];`返回“加拿大”

```
if (array_key_exists($in_data['country_select'], $countries)){ 
      echo "Country Found";
} 
else { echo "failed"; } 
```

什么都不返回。

```
if (array_key_exists('CA', $countries)){ 
      echo "Country Found";
} 
else { echo "failed"; } 
```

也不返回任何内容。而当我什么都不说时，我的意思是什么，不是空的，不是真的，不是假的；只是甚至不运行。

我的问题很简单；下面的代码（取自官方 PHP 手册）如何与我的代码完全一样，工作，但我的代码甚至不会返回*任何东西*？

```
<?php
$search_array = array('first' => 1, 'second' => 4);
if (array_key_exists('first', $search_array)) {
    echo "The 'first' element is in the array";
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T18:42:31.833

由于您正在从文件中读取，您可能会得到其他字符，请尝试 trim()：

```
if (array_key_exists(trim($in_data['country_select']), $countries)){ 
      echo "Country Found";
} 
else { echo "failed"; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-14T19:55:01.560

从文件中读取时我遇到了类似的问题。解决方案是从第一行删除 BOM。

```
function remove_utf8_bom($text) {
    $bom = pack('H*','EFBBBF');
    $text = preg_replace("/$bom/", '', $text);
    return $text;
} 
```

# c++ - 链接器错误编译 keyczar 程序

> ID：14465536
> 
> 赞同：2
> 
> 时间：2013-01-22T18:29:50.313
> 
> 标签：c++, linux, linker, g++, static-libraries

我正在使用`g++ -lkeyczar -lcrypto -o basic_encrypt -Wall -O2 base_encrypt.cpp`编译以下代码：

```
#include <cassert>
#include <iostream>
#include <string>
#include <keyczar/keyczar.h>

void EncryptAndDecrypt(const std::string& location) {
  keyczar::Keyczar* crypter = keyczar::Crypter::Read(location);
  if (!crypter)
    return;

  std::string input = "Secret message";
  std::string ciphertext;
  std::cout << "Plaintext: " << input << std::endl;

  bool result = crypter->Encrypt(input, &ciphertext);
  if (result) {
    std::cout << "Ciphertext (Base64w): " << ciphertext << std::endl;
    std::string decrypted_input;
    bool result = crypter->Decrypt(ciphertext, &decrypted_input);
    if (result)
      assert(input == decrypted_input);
  }
  delete crypter;
}

int main(int argc, char** argv) {
  if (argc != 2) {
    std::cout << "An absolute key set location must be provided as argument"
              << std::endl;
    return 1;  // error
  }

  // The first argument must represent the keyset's location
  const std::string location(argv[1]);

  EncryptAndDecrypt(location);
  return 0;
} 
```

这是从[这里获取的教程](http://code.google.com/p/keyczar/wiki/CppTutorial)

但是，我遇到了以下错误：

```
/tmp/ccNlack3.o: In function `EncryptAndDecrypt(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
base_encrypt.cpp:(.text+0xf): undefined reference to `keyczar::Crypter::Read(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
collect2: ld returned 1 exit status 
```

我无法解决这个问题，因为我知道我已经在编译时给出了库标志。为什么仍然无法正确链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:34:29.040

将库标志放在命令行的末尾：

```
g++ -o basic_encrypt -Wall -O2 base_encrypt.cpp -lkeyczar -lcrypto 
```

# bash - 如何捕获后台进程的输出

> ID：14465542
> 
> 赞同：3
> 
> 时间：2013-01-22T18:30:03.753
> 
> 标签：bash, shell, ipc, zsh

在后台运行进程并仅在需要时接收其输出的最佳方式是什么？

预期用途：使具有大量初始化的提示输出脚本在每个会话中初始化一次，而不是在每次提示运行时初始化。注意：需要双向通信：shell 需要告诉何时需要新的提示，最后的命令状态是什么。

已知解决方案：

*   一些在文件系统上显式创建的文件（FIFO 文件、UNIX 套接字）：最好避免这种情况，因为这意味着我需要选择文件名，确保在退出时对其进行垃圾收集并添加一些内容以清理不再使用的文件崩溃的情况。
*   zsh/zpty 模块：这个工作有点矫枉过正，在 bash 中不起作用。
*   协进程：在 bash 和 AFAIK 中不起作用，每个会话只允许一个协进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:41:47.233

Bash 从 4.0 开始支持协进程，但多个协进程仍处于试验阶段。

我会使用一些明确创建的文件，`~/.myThing-$HOSTNAME/fifo`如果它们是按用户和主机命名的。您可以使用`flock`相对容易地确定命令是否仍在运行并可选择启动它：

```
(
  flock -n 123 || exit 1
  rm/mkfifo ..
  exec yourServer < .. > ..
) 123> ~/".myThing-$HOSTNAME/lockfile" 
```

如果命令或服务器死了，锁会自动释放，你只有几个零长度的文件。下次服务器启动时，它会删除并重新设置它们。

查询服务器将是类似的，但如果锁*未*使用则退出（并且可选地使用等待锁以避免争用）。

# c++ - 如何让我的 TileSheet 换行？

> ID：14465543
> 
> 赞同：2
> 
> 时间：2013-01-22T18:30:05.990
> 
> 标签：c++, bitmap, allegro5

我从一个关卡文件加载地图，这些文件只是与图块表中的图块相对应的数字。

这是关卡文件

```
[Map]
0 1 0 0 0 0 0 0
0 0 20 0 0 0 0 0
0 0 0 40 0 0 0 0
0 0 0 0 63 0 0 0
0 0 0 0 0 79 0 0
0 0 0 0 0 0 0 0 
```

这是解释它的代码

```
void LoadMap(const char *filename, std::vector< std::vector <int> > &map)
{
    std::ifstream openfile(filename); 
    if(openfile.is_open())
    {
        std::string line, value;
        int space;

        while(!openfile.eof())
        {
            std::getline(openfile, line);

            if(line.find("[TileSet]") != std::string::npos)
            {
                state = TileSet;
                continue;
            }
            else if (line.find("[Map]") != std::string::npos)
            {
                state = Map;
                continue;
          }

            switch(state)
            {
            case TileSet:
                if(line.length() > 0)
                    tileSet = al_load_bitmap(line.c_str());
                break;
            case Map: 

                std::stringstream str(line);
                std::vector<int> tempVector;

                while(!str.eof())
                {
                    std::getline(str, value, ' ');
                    if(value.length() > 0)
                        tempVector.push_back(atoi(value.c_str()));
                }
                map.push_back(tempVector);
                break;
            }
        }
    }
    else
    {
  }
  } 
```

这就是它的外观 [http://i.imgur.com/6W49eWf.jpg](http://i.imgur.com/6W49eWf.jpg)

好的，所以我的 Tilesheet 是 1000 x 200，它看起来像这样[http://i.imgur.com/Y83zBxj.png](http://i.imgur.com/Y83zBxj.png)

在地图文件中放入 20 或 40 时，如何使其环绕到 20 或 40？

```
void DrawMap(std::vector <std::vector <int> > map)
{    
    for(int i, j = 0; i < map.size(); i ++)
    {
        for(j = 0; j < map[i].size(); j ++)
        {
          al_draw_bitmap_region(tileSet, map[i][j] * TileSizeX, 0, TileSizeX, TileSizeY, j   * TileSizeX, i * TileSizeX, NULL);
        }
    }
} 
```

TileSizeX 和 TileSizeY 也是 50

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:02:04.113

您需要计算您的目标图块所在的图块集的哪个单元格。你有图块集索引。根据图块集的尺寸，使用一点数学来确定该图块的列和行。

```
//This is how many columns your tileset can have.
//You could even dynamically calculate this if you wanted.
static const int TILESET_COLCOUNT = 20;

void DrawMap(std::vector<std::vector<int> > map)
{    
    int mapRowCount = map.size();

    for (int i = 0; i < mapRowCount; ++i)
    {
        int mapColCount = map[i].size();

        for (int j = 0; j < mapColCount; ++j)
        {
            //This is your tileset index in your level map.
            int tilesetIndex = map[i][j];

            //The tileset row can be calculated by dividing the tileset index by the number of columns in a tileset row.
            int tilesetRow = floor(tilesetIndex / TILESET_COLCOUNT);

            //The tileset column can be calculated by retrieving the remainder of the modulus operation on the total number of columns in a row.
            int tilesetCol = tilesetIndex % TILESET_COLCOUNT;

            al_draw_bitmap_region(
                tileSet, //The tileset
                tilesetCol * TileSizeX, //multiply the tileset column by the size of a tile to get the source x
                tilesetRow * TileSizeY, //multiply the tileset row by the size of a tile to get the source y
                TileSizeX, //width
                TileSizeY, //height
                j * TileSizeX, //destination x
                i * TileSizeX, //destination y
                NULL //flags
            );
        }
    }
} 
```

# jquery - 弹性图像幻灯片

> ID：14465547
> 
> 赞同：1
> 
> 时间：2013-01-22T18:30:31.010
> 
> 标签：jquery

我一直在使用这个幻灯片

[http://tympanus.net/codrops/2011/11/21/elastic-image-slideshow-with-thumbnail-preview/](http://tympanus.net/codrops/2011/11/21/elastic-image-slideshow-with-thumbnail-preview/)

这里有演示...... [http://tympanus.net/Tutorials/ElasticSlideshow/](http://tympanus.net/Tutorials/ElasticSlideshow/)

我想要的只是底部的导航显示当前索引，因此 .ei-slider-thumbs div 的子 li 如果它们是选定的幻灯片，则具有类似“当前”的类。

不想粘贴一大堆代码，所以只提供了链接，希望在 firebug 中查看演示？

任何帮助，将不胜感激！非常感谢

- - 编辑 - -

```
$('.ei-slider-element').addClass("active1");
    $('ul.ei-slider-thumbs li').click(function (e) {
        var currentEle = $(this).index();
        // alert(currentEle);
        e.preventDefault();         
        $('[class*="active"]').removeClass(function (i, c) {
            return c.match(/active\d+/g).join(" ");
        });
        $('.ei-slider-element').addClass("active" + currentEle);
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:43:42.380

我观察到活动元素是“ `ei-slider-element`”并且它正在向单击的元素移动。您可以编写自己的函数来定位当前元素的索引。

```
$('ul.ei-slider-thumbs li').click(function(){
    var currentEle = $(this).index();
    alert(currentEle);
}); 
```

# spring - Spring、Camel、JMS 集成

> ID：14465557
> 
> 赞同：2
> 
> 时间：2013-01-22T18:31:40.310
> 
> 标签：spring, jms, apache-camel

我对 JMS 和 Camel 是 100% 的新手

这是场景

我有一个 Spring Web 应用程序、一个 JMS (ActiveMQ)、Camel

Web 应用程序需要通过camel 以异步方式向JSM 发送信息。即向Camel发送信息后，网站不应等待响应。网页应该继续。

而且，我的应用程序应该在队列中监听队列中的任何响应。一旦收到任何响应，就必须调用特定的 bean。

这可能吗？？？

这是我客户端中的配置

**骆驼语境：**

```
<!-- START SNIPPET: e1 -->
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xsi:schemaLocation="
         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
         http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">
  <!-- END SNIPPET: e1 -->

  <!-- START SNIPPET: e2 -->
  <camel:camelContext id="camel-client">
    <camel:template id="camelTemplate"/>
  </camel:camelContext>
  <!-- END SNIPPET: e2 -->

  <!-- START SNIPPET: e3 -->
  <!-- Camel JMSProducer to be able to send messages to a remote Active MQ server -->
  <bean id="jms" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="brokerURL" value="tcp://localhost:61610"/>
  </bean>
  <!-- END SNIPPET: e3 -->

</beans> 
```

**骆驼代码：**

```
ApplicationContext context = new ClassPathXmlApplicationContext("camel-client.xml");

// get the camel template for Spring template style sending of messages (= producer)
ProducerTemplate camelTemplate = context.getBean("camelTemplate", ProducerTemplate.class);

System.out.println("Invoking the multiply with 22");
// as opposed to the CamelClientRemoting example we need to define the service URI in this java code
int response = (Integer)camelTemplate.sendBody("jms:queue:numbers", ExchangePattern.InOut, 22);
System.out.println("... the result is: " + response); 
```

这工作得很好。但问题是，这是同步的。

我希望这是异步的。

怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:00:12.157

您不需要在 Camel Remoting 示例中做所有这些事情（我怀疑您已经开始使用）。

因此，您想通过队列进行一些处理。只是为了不让我误解：

```
Web Request -> JMS queue -> Camel -> Bean -> Done 
```

创建路线：

```
<camel:camelContext id="camel-client">
   <camel:template id="camelTemplate"/>
   <camel:route>
      <camel:from uri="jms:queue:myQueue"/>
      <camel:bean ref="someBean"/>
    </camel:route>
</camel:camelContext> 
```

然后在您的代码中，只需触发消息：camelTemplate.asyncSendBody("jms:queue:myQueue", ExchangePattern.InOnly, someData);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T11:36:52.013

答案很简单

```
int response = (Integer)camelTemplate.sendBody("jms:queue:numbers", ExchangePattern.InOut, 22); 
```

这应该是

```
int response = (Integer)camelTemplate.sendBody("jms:queue:numbers",22); 
```

只是不要提及`ExchangePattern`你就完成了。

**道德：**请正确阅读文档。

# applescript - 预期行尾等，但发现“””

> ID：14465559
> 
> 赞同：4
> 
> 时间：2013-01-22T18:31:57.050
> 
> 标签：applescript

我正在尝试制作一个可以切换蓝牙的 AppleScript，但我似乎无法克服以下错误：

```
Expected end of line, etc. but found “"”. 
```

这是我的代码：

```
tell application "System Preferences"
reveal pane id "com.apple.preferences.Bluetooth"
tell application "System Events" to tell process "System Preferences"
    set bluetooth to checkbox "On" of window 1
    set bluetoothBool to value of checkbox "On" of window 1 as boolean
    tell bluetooth
        if bluetoothBool = false then
            click bluetooth
            display dialog "Bluetooth on" with title "Bluetooth"
                buttons "OK" "Turn Bluetooth off"
                default button "OK"
        else if bluetoothBool = true then
            click bluetooth
            display dialog "Bluetooth off" with title "Bluetooth"
                buttons "OK" "Turn Bluetooth on"
                default button "OK"
        end if
    end tell
end tell
quit 
```

结束告诉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:38:48.527

`"OK" "Turn Bluetooth off"`需要`{"OK", "Turn Bluetooth off"}`。

此外，`display dialog`语句需要全部放在一行中，除非您`¬`通过键入 Option-l（小写 L）输入“继续”一行。

```
tell application "System Preferences"
    reveal pane id "com.apple.preferences.Bluetooth"
    tell application "System Events" to tell process "System Preferences"
        set bluetooth to checkbox "On" of window 1
        set bluetoothBool to value of checkbox "On" of window 1 as boolean
        tell bluetooth
            if bluetoothBool = false then
                click bluetooth
                display dialog "Bluetooth on" with title ¬
                    "Bluetooth" buttons {"OK", "Turn Bluetooth off"} ¬
                    default button "OK"
            else if bluetoothBool = true then
                click bluetooth
                display dialog "Bluetooth off" with title ¬
                    "Bluetooth" buttons {"OK", "Turn Bluetooth on"} ¬
                    default button "OK"
            end if
        end tell
    end tell
    quit
end tell 
```

来源：[AppleScript 语言指南](https://developer.apple.com/library/mac/documentation/applescript/conceptual/applescriptlangguide/AppleScriptLanguageGuide.pdf)

# visual-studio-2010 - 在 Visual C++ Express 2010 下构建的 wxWidgets 2.9.4 给出未解决的外部错误

> ID：14465561
> 
> 赞同：0
> 
> 时间：2013-01-22T18:32:14.583
> 
> 标签：visual-studio-2010, visual-studio, visual-c++, wxwidgets

我一直在尝试从旧的 2.8.12 升级到 wxWidgets 2.9.4，但遇到了问题。我从命令行编译它没有错误，但是当我尝试在以前版本下运行良好的程序中使用它们时，我得到未解决的外部问题。我将它缩减为一个裸框架和 TextCtrl 对象，它仍然这样做（它与目前的示例代码之一基本相同）。

我尝试了以下命令来构建静态库：

1.  nmake -f makefile.vc SHARED=0 BUILD=release + nmake -f makefile.vc SHARED=0 BUILD=debug
2.  nmake -f makefile.vc SHARED=0 MONOLITHIC=0 BUILD=release + nmake -f makefile.vc SHARED=0 MONOLITHIC=0 BUILD=debug
3.  nmake -f makefile.vc SHARED=0 BUILD=release UNICODE=0 + nmake -f makefile.vc SHARED=0 BUILD=debug UNICODE=0
4.  nmake -f makefile.vc SHARED=0 BUILD=release UNICODE=0 MONOLITHIC=0 + nmake -f makefile.vc SHARED=0 BUILD=debug UNICODE=0 MONOLITHIC=0

请注意，我尝试将它们与推荐的 unicode 和不再支持的非 unicode 一起使用（相应地更改了 Configuration Properties->General 中的项目属性）。此外，我使用了 wxWidgets 手册推荐的多线程 DLL /MD 和 /MDd 链接。

编辑：也尝试使用 \MT 和 \MTd，效果相同。

从以上所有内容中，我在编译我的应用程序时得到了下面列出的相同链接器错误。请告诉我该怎么做，因为我的想法已经用完了......

此外，作为最后的手段，我使用来自 ../build/msw 文件夹的转换后的 MSVS 项目构建了整个东西，但它给了我相同的结果。

**调试编译**

```
1>hworld.obj : error LNK2001: unresolved external symbol "public: virtual bool __thiscall wxApp::Initialize(int &,unsigned short * *)" (?Initialize@wxApp@@UAE_NAAHPAPAG@Z)
1>hworld.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall wxAppConsoleBase::OnAssertFailure(unsigned short const *,int,unsigned short const *,unsigned short const *,unsigned short const *)" (?OnAssertFailure@wxAppConsoleBase@@UAEXPBGH000@Z)
1>hworld.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall wxAppConsoleBase::OnAssert(unsigned short const *,int,unsigned short const *,unsigned short const *)" (?OnAssert@wxAppConsoleBase@@UAEXPBGH00@Z)
1>hworld.obj : error LNK2001: unresolved external symbol "unsigned short const * const wxEmptyString" (?wxEmptyString@@3PBGB)
1>hworld.obj : error LNK2019: unresolved external symbol "private: static struct wxString::SubstrBufFromType<class wxScopedCharTypeBuffer<unsigned short> > __cdecl wxString::ConvertStr(char const *,unsigned int,class wxMBConv const &)" (?ConvertStr@wxString@@CA?AU?$SubstrBufFromType@V?$wxScopedCharTypeBuffer@G@@@1@PBDIABVwxMBConv@@@Z) referenced in function "private: static class wxScopedCharTypeBuffer<unsigned short> __cdecl wxString::ImplStr(char const *,class wxMBConv const &)" (?ImplStr@wxString@@CA?AV?$wxScopedCharTypeBuffer@G@@PBDABVwxMBConv@@@Z)
1>hworld.obj : error LNK2019: unresolved external symbol "void __cdecl wxOnAssert(char const *,int,char const *,char const *,unsigned short const *)" (?wxOnAssert@@YAXPBDH00PBG@Z) referenced in function "public: void __thiscall wxControlContainerBase::SetContainerWindow(class wxWindow *)" (?SetContainerWindow@wxControlContainerBase@@QAEXPAVwxWindow@@@Z)
1>wxpngd.lib(wxpng_pngread.obj) : error LNK2019: unresolved external symbol _inflateInit_ referenced in function _png_create_read_struct_2
1>wxpngd.lib(wxpng_pngread.obj) : error LNK2019: unresolved external symbol _inflate referenced in function _png_read_row
1>wxpngd.lib(wxpng_pngrutil.obj) : error LNK2001: unresolved external symbol _inflate
1>wxpngd.lib(wxpng_pngread.obj) : error LNK2019: unresolved external symbol _inflateEnd referenced in function _png_read_destroy
1>wxpngd.lib(wxpng_png.obj) : error LNK2019: unresolved external symbol _crc32 referenced in function _png_reset_crc
1>wxpngd.lib(wxpng_png.obj) : error LNK2019: unresolved external symbol _inflateReset referenced in function _png_reset_zstream
1>wxpngd.lib(wxpng_pngrutil.obj) : error LNK2001: unresolved external symbol _inflateReset
1>wxpngd.lib(wxpng_pngwrite.obj) : error LNK2019: unresolved external symbol _deflate referenced in function _png_write_flush
1>wxpngd.lib(wxpng_pngwutil.obj) : error LNK2001: unresolved external symbol _deflate
1>wxpngd.lib(wxpng_pngwrite.obj) : error LNK2019: unresolved external symbol _deflateEnd referenced in function _png_write_destroy
1>wxpngd.lib(wxpng_pngwutil.obj) : error LNK2001: unresolved external symbol _deflateEnd
1>wxpngd.lib(wxpng_pngwutil.obj) : error LNK2019: unresolved external symbol _deflateInit2_ referenced in function _png_zlib_claim
1>wxpngd.lib(wxpng_pngwutil.obj) : error LNK2019: unresolved external symbol _deflateReset referenced in function _png_zlib_release 
```

**发布编译**

1>wxpng.lib(wxpng_png.obj) : 错误 LNK2001: 无法解析的外部符号 _crc32 1>wxpng.lib(wxpng_png.obj) : 错误 LNK2001: 无法解析的外部符号 _inflateReset 1>wxpng.lib(wxpng_pngrutil.obj) : 错误 LNK2001:未解析的外部符号 _inflateReset 1>wxpng.lib(wxpng_pngread.obj)：错误 LNK2001：未解析的外部符号*inflateInit* 1>wxpng.lib(wxpng_pngread.obj)：错误 LNK2001：无法解析的外部符号 _inflate 1>wxpng.lib(wxpng_pngrutil.obj)：错误 LNK2001：无法解析的外部符号 _inflate 1>wxpng.lib(wxpng_pngread.obj)：错误 LNK2001：未解析的外部符号_inflateEnd 1>wxpng.lib(wxpng_pngwrite.obj)：错误LNK2001：未解析的外部符号_deflate 1>wxpng.lib(wxpng_pngwutil.obj)：错误LNK2001：未解析的外部符号_deflate 1>wxpng.lib(wxpng_pngwrite.obj) : 错误 LNK2001: 无法解析的外部符号 _deflateEnd 1>wxpng.lib(wxpng_pngwutil.obj) : 错误 LNK2001: 无法解析的外部符号 _deflateEnd 1>wxpng.lib(wxpng_pngwutil.obj) : 错误 LNK2001: 无法解析的外部符号*deflateInit2* 1>wxpng.lib(wxpng_pngwutil.obj) : 错误 LNK2001: 无法解析的外部符号 _deflateReset 1>MSVCRT.lib(crtexe.obj) : 错误 LNK2001: 无法解析的外部符号 _main

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:24:45.413

来自 libpng 的所有错误都是由于未链接到`wxzlib[d].lib`，只需将其添加到项目中的库列表中即可。或者使用推荐的方式使用 MSVC 构建 wxWidgets 项目，并通过预先添加`-I$(WXWIN)/include/msvc`到编译器头文件搜索路径来使用自动链接。

其余的错误（只有在调试版本中才会出现，这本身就是可疑的）是由于 ANSI 和 Unicode 版本之间的不匹配造成的。我不知道您最终使用哪个版本，因为您似乎已经在某一时刻构建了所有这些版本，但是如果您使用默认构建，那么您需要在项目选项中拥有`_UNICODE`和/或`UNICODE`定义。

最后，为避免将来出现此类构建不匹配，请在未来为每个构建`nmake -f makefile.vc clean`使用唯一的，或者使用不同的构建目录。`COMPILER_PREFIX`这真的不是火箭科学，你只需要避免一次做太多事情而让自己感到困惑。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:52:37.467

转到项目的设置并相应地更改 General -> Character Set 属性。如果您使用 UNICODE=0（但推荐值为 1）编译 wx 库，那么您需要使用`Multi-Byte Character set`. 如果使用 UNICODE=1 编译，则将该属性设置为`Unicode`

至于运行时库，如果您使用 SHARED=0 进行编译，那么在您的项目设置中，您将需要使用 C++ -> 代码生成 -> 运行时库属性以及“多线程调试”和“多线程”进行调试和发布构建因此。

最简单的方法是从 Visual Studio 构建 wxWidgets 库（有一个 build/msw 文件夹，其中包含 VS2010 的解决方案文件），并在您的项目中设置与 wx 库项目相同的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:06:00.997

我也有这个问题。我通过更改以下设置解决了这个问题：

```
 C/C++ | Language | Treat WChar_t as built in type 
```

是的。

# java - 在 GWTQuery 中定义 click 元素的通用处理程序

> ID：14465562
> 
> 赞同：2
> 
> 时间：2013-01-22T18:32:19.670
> 
> 标签：java, gwt, gwtquery

在我的 GWTQuery 项目中，我遇到了一个有 4 个自定义下拉菜单的情况。每当用户更改任何当前菜单选项时，都会使用 4 个菜单的值（其中一个是该菜单的新更改值）发出 AJAX 请求。由于所有 4 个菜单都触发了类似的请求，我认为我将编写一个通用类来处理 AJAX 请求，然后让 clickhandlers 扩展该类。

但是，菜单是动态生成的，我不得不求助于 GWTQuery 的`live`方法。这需要一个类型的变量`Function`作为参数。因为它已经扩展了 Function，所以我不能让它也扩展我的 Ajax 处理程序类。那么我该怎么做呢？我正在寻找这样的东西：

```
class f extends Funnction, AJAX_Handler {
 public boolean f(Event e) {
  ...
  return true;
  }
 public void request(int i1,int i2,int i3,int i4) {
  //for handling the request, defined in the AJAX_Handler class
  ...
  }
 } 
```

有一件事，为所有 4 个包含 AJAX_handler 函数的菜单定义一个通用处理程序，然后检测哪个菜单是当前处理程序所指的，这是一个禁忌。AJAX_handler 类必须是一个单独的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:48:28.573

而是定义接口。

```
 public interface AJAX_Handler
 {
    public void request(int i1,int i2,int i3,int i4);

 } 
```

然后在您的实际类中实现定义的接口。

```
 class f extends Funnction implements AJAX_Handler
 {
   public boolean f(Event e) {
      ...
    return true;
    }
   public void request(int i1,int i2,int i3,int i4) {
   //for handling the request, defined in the AJAX_Handler class
    ...
    }
  } 
```

[编辑] 鉴于您需要将功能保留在同一个地方。我认为最简单的解决方法是定义 AJAX_Handler 接口然后有一个实现的类。例如：

```
 public class AJAX_HandlerImpl implements AJAX_Handler
 {
    public void request(int i1,int i2,int i3,int i4){
         //do whats necessary
     }
 } 
```

然后在你的 f 类中使用组合。就像是：

```
 class f extends Funnction implements AJAX_Handler
 {
   private AJAX_HandlerImpl impl = new AJAX_HandlerImpl();

   public boolean f(Event e) {
      ...
    return true;
    }

   public void request(int i1,int i2,int i3,int i4) {
          impl.request(i1,i2,i3,i4);
    }
  } 
```

# python - 是否有通过 asyncore 实现 websocket 服务器的 python 实现

> ID：14465568
> 
> 赞同：2
> 
> 时间：2013-01-22T18:32:42.370
> 
> 标签：python, websocket, asyncore

是否有一个基于 asyncore 的 websocket 服务器的 python 实现，它支持所有版本的 Hixie 和 HyBi？

我查看了来自 Google 的结果，[例如](http://ldalab.ru/primer/websocket/websocket.py)[https://gist.github.com/719381、http://ldalab.ru/primer/websocket/websocket.py](https://gist.github.com/719381)。他们似乎支持 Hixie，但不支持 HyBi 及其更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:34:06.347

有一些基于[Twisted](http://twistedmatrix.com/)的[websocket服务器实现（](https://github.com/MostAwesomeDude/txWS) [http://autobahn.ws/、https://github.com/MostAwesomeDude/txWS），Twisted](http://autobahn.ws/)是 Python 的备用异步 I/O 和事件驱动编程库。

# java - 如何从 Java 中查找和杀死正在运行的进程？

> ID：14465569
> 
> 赞同：1
> 
> 时间：2013-01-22T18:32:45.437
> 
> 标签：java, kill, runtime.exec, processbuilder

我需要一种 Java 方法来查找正在运行的操作系统进程，我知道从中可以找到可执行文件的名称和路径。我想看看它现在是否正在运行，如果我找到它，我需要一种方法来终止该进程。

我的问题类似于[how-to-find-and-kill-running-win-processes-from-within-java](https://stackoverflow.com/questions/81902/how-to-find-and-kill-running-win-processes-from-within-java)但不限于 Windows。

我是否被迫为每个平台执行一个实现，或者是否有一些我缺少的技巧/库/api可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:43:13.580

SIGAR库对这样的[东西](http://support.hyperic.com/display/SIGAR/Home#Home-license)有一些非常酷的支持。它具有用于列出和终止系统进程的 java API。

# java - 调试未捕获的 Java KeyBinding 的方法

> ID：14465570
> 
> 赞同：0
> 
> 时间：2013-01-22T18:32:52.463
> 
> 标签：java, key-bindings

由于我已经为我的 JFrame 中的每个 JPanel 添加了绑定，因此我会假设在我按下`W`键时至少会触发其中一个。我的`KeyStroke`不正确吗？

SSCCE：

```
public class TestTemp extends JFrame {

    public TestTemp() {
        setSize(1000, 800);

        JPanel parentPanel = new JPanel(new MigLayout("", "grow, fill",
                "grow, fill"));
        parentPanel.setBackground(Color.GREEN);
        setContentPane(parentPanel);
        parentPanel.setSize(1000, 800);

        JPanel videoPanel = new JPanel();
        videoPanel.setBackground(Color.CYAN);

        JPanel contentPanel = new JPanel();
        contentPanel.setLayout(new MigLayout("fillx", "[fill]", "[nogrid]"));
        contentPanel.setBackground(Color.YELLOW);

        parentPanel.getInputMap().put(KeyStroke.getKeyStroke("W"), new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("W pressed, parent panel");          
            }                   
        });     

        contentPanel.getInputMap().put(KeyStroke.getKeyStroke("W"), new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("W pressed, content panel");         
            }                   
        });

        videoPanel.getInputMap().put(KeyStroke.getKeyStroke("W"), new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("W pressed, video panel");           
            }                   
        });

        parentPanel.add(videoPanel, "wmin 200");
        parentPanel.add(contentPanel);
    }

    public static void main(String[] args) {
        JFrame frame = new TestTemp();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

编辑：我尝试`parentPanel`使用以下方法集中注意力：

```
parentPanel.setFocusable(true);
parentPanel.requestFocus(); 
```

但它似乎没有任何效果。

编辑2：为了确保它不是不正确的击键，我使用了文档在他们的示例中给出的击键：

```
KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0) 
```

但同样，击球`Enter`没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:07:19.773

试试这个：

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import net.miginfocom.swing.MigLayout;

public class T extends JFrame {

    public T() {
        setSize(1000, 800);

        JPanel parentPanel = new JPanel(new MigLayout("", "grow, fill",
                "grow, fill"));
        parentPanel.setBackground(Color.GREEN);
        getContentPane().add(parentPanel);
        parentPanel.setSize(1000, 800);

        JPanel videoPanel = new JPanel();
        videoPanel.setBackground(Color.CYAN);

        JPanel contentPanel = new JPanel();
        contentPanel.setLayout(new MigLayout("fillx", "[fill]", "[nogrid]"));
        contentPanel.setBackground(Color.YELLOW);

        parentPanel.getActionMap().put("enter", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("Enter pressed, parent panel");
            }
        });

        InputMap inputMap = parentPanel.getInputMap();
        inputMap.put( KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,0), "enter");

        parentPanel.add(videoPanel, "wmin 200");
        parentPanel.add(contentPanel);
    }

    public static void main(String[] args) {
        JFrame frame = new T();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

我不认为 MigLayout 是问题所在。

1.  使用`getActionMap`而不是`getInputMap`等待动作事件。
2.  分开`InputMap`监听击键。

键盘事件现在`enter`被写入标准输出。

有关详细信息，请参阅这些链接：

*   [Java Swing KeyStrokes：如何使 CTRL 修饰符起作用](https://stackoverflow.com/questions/2419608/java-swing-keystrokes-how-to-make-ctrl-modifier-work)
*   [http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

一般来说，当你遇到一个难题时，尽量让最简单的案例工作。一旦你有最简单的情况（例如，一个面板接受键盘输入），然后建立复杂性。例如，您甚至可以删除 MigLayout，以查看它是否会影响键盘输入。

# android - 带有按钮的活动显示空白

> ID：14465576
> 
> 赞同：0
> 
> 时间：2013-01-22T18:33:32.807
> 
> 标签：android, android-layout, android-button

**注意我编辑了 XML 文件！！！！**

我有一个创建按钮的 Activity，当您单击该按钮时，它会调用另一个 Activity，但是当我运行该应用程序时，它只显示一个空白页面。活动：

```
package com.elichai.tfillin;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {
public void OnCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    addListenerOnButton();
}
private void displayCamera() {
    Intent i = new Intent(this, CameraActivity.class);
    startActivityForResult(i, 0);
}
public void addListenerOnButton() {
    final Button button1 = (Button) findViewById(R.id.button1);
    //Button button2 = (Button) findViewById(R.id.button2);
    //Button button3 = (Button) findViewById(R.id.button3);
    //Button button4 = (Button) findViewById(R.id.button4);
    button1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            displayCamera();
            //finish();
        }
      });
}
} 
```

这是activity_main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <Button
        android:id="@+id/button1"
        android:layout_width="166dp"
        android:layout_height="216dp"
        android:layout_marginLeft="7dp"
        android:text="@string/button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="166dp"
        android:layout_height="216dp"
        android:layout_marginLeft="182dp"
        android:text="@string/button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="166dp"
        android:layout_height="216dp"
        android:layout_marginLeft="7dp"
        android:layout_marginTop="260dp"
        android:text="@string/button" />

<Button
        android:id="@+id/button4"
        android:layout_width="166dp"
        android:layout_height="216dp"
        android:layout_marginLeft="182dp"
        android:layout_marginTop="260dp"
        android:text="@string/button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="223dp"
        android:layout_height="52dp"
        android:layout_marginLeft="85dp"
        android:layout_marginTop="215dp"
        android:text="@string/switch_cam"
        android:textSize="30sp" />

</LinearLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:30:28.330

布局没有任何问题。在您的 MainActivity 类中，onCreate() 方法签名写入不正确。使用 onCreate() 而不是 OnCreate()。（小'o'）系统在创建活动时调用onCreate()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:46:09.157

尝试使用 A **RelativeLayout**代替**FrameLayout**，除非需要使用它。

或者如果你想使用 FrameLayout 试试这个

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/camera_preview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" >

    <Button
        android:id="@+id/button1"
        android:layout_width="166dp"
        android:layout_height="216dp"
        android:layout_gravity="top"
        android:layout_marginLeft="7dp"
        android:text="@string/button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="166dp"
        android:layout_height="216dp"
        android:layout_gravity="top"
        android:layout_marginLeft="182dp"
        android:text="@string/button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="166dp"
        android:layout_height="216dp"
        android:layout_gravity="top"
        android:layout_marginLeft="7dp"
        android:layout_marginTop="260dp"
        android:text="@string/button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="166dp"
        android:layout_height="216dp"
        android:layout_gravity="top"
        android:layout_marginLeft="182dp"
        android:layout_marginTop="260dp"
        android:text="@string/button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="223dp"
        android:layout_height="52dp"
        android:layout_gravity="top"
        android:layout_marginLeft="85dp"
        android:layout_marginTop="215dp"
        android:text="switchcam"
        android:textSize="30sp" />

</FrameLayout> 
```

**布局_边距在*****FrameLayout***中不起作用，直到您还设置子视图布局重力，例如

```
android:layout_gravity="top" 
```

（用于**框架布局**）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:48:21.247

将**FrameLayout**替换为垂直**LinearLayout**

# c# - Linq 对象分组方式和总和

> ID：14465578
> 
> 赞同：2
> 
> 时间：2013-01-22T18:33:46.890
> 
> 标签：c#, linq, dataset, sum

我有一个包含“No”和“Total”列的数据表。我想带回每个“否”的“总计”列的总和。我已经尝试了以下方法，但是由于我在语法上苦苦挣扎，所以遇到了几个错误。

```
var Values =
        (from data in DtSet.Tables["tblDetails"].AsEnumerable()
         group data by data.Field<"No">
         select new
         {
             name_1 = data.Field<double>("No"),
             name_2 = data.Field<double>("Total"),
         }
         ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:38:01.860

`Total`这将为您提供属性中的字段总和，并在属性`name_2`中进行分组（我认为您需要在这里更好地命名）`No``name_1`

```
var Values = from row in DtSet.Tables["tblDetails"].AsEnumerable()
             group row by row.Field<double>("No") into g
             select new
             {
                 name_1 = g.Key,
                 name_2 = g.Sum(r => r.Field<double>("Total"))
             }; 
```

考虑名称`No`，`TotalSum`而不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:42:14.637

你开始使用 linq，但老`DataTable`有它[自己的方式](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute%28v=VS.80%29.aspx)：

```
var total = DtSet.Tables["tblDetails"].Compute("sum(Total)", "No = x"); 
```

我必须把它留`x`在里面，因为我不知道“否”列的值。该部分`"No = x"`是一个过滤器。如果它为 null 或空字符串，则所有行都将用于计算。

# plugins - DLL 在一个应用程序中工作，但在另一个应用程序中不工作——环境差异？

> ID：14465579
> 
> 赞同：0
> 
> 时间：2013-01-22T18:33:52.920
> 
> 标签：plugins, dll, com, driver

泛泛而谈...

我有一个在运行时加载的 COM DLL。该 DLL 从注册表中指定的绝对路径加载另一个 DLL。当我在独立的测试可执行文件中加载 COM DLL 时，找到并加载了第二个 DLL。但是，当我在不同的可执行文件中加载 COM DLL 时，找不到第二个 DLL。两个可执行文件位于同一目录中并具有相同的权限。COM DLL 是为可执行文件提供高级接口的驱动程序；从理论上讲，这两个可执行文件都进行了相同的调用。

任何可能导致这种情况的要调查的事情的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:49:03.507

对于一个不那么令人兴奋的结论：取消注册第二个 DLL 并重新注册它解决了这个问题。我已经多次注册了 DLL，但没有想到先取消注册它会做任何不同的事情。

谢谢@CareyGregory

# python - 傻瓜的 PYPY 安装 - 如何处理 zip 文件

> ID：14465583
> 
> 赞同：5
> 
> 时间：2013-01-22T18:33:59.230
> 
> 标签：python, installation, pypy

我正在尝试使用 Pypy 使我的代码运行得更快，但我不知道如何处理从网站下载的 zip 文件（我试图阅读说明，但它移动得太快，我不知道这是怎么回事）。我想知道是否有人对如何安装和使用 Pypy 有简单的分步说明。另外，我在 Windows 上使用 Wing

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T18:41:57.697

将 zip 文件解压缩到合适的位置，例如，`C:\pypy`然后`pypy.exe`从您解压缩到的文件夹中运行。pypy 没有安装。与卸载类似，只需删除该文件夹即可。

Running`C:\pypy\pypy.exe`给你一个交互式提示，就像你运行任何其他版本的 Python 时得到的一样，除了它使用四个 chevrons `>>>>`。

要使用 pypy 运行脚本，您可以显式命名解释器：

```
C:\pypy\pypy.exe script.py 
```

或者，如果您在同一系统上安装了 Python 3.3，则可以使用 Windows Python 启动器。编辑 ini 文件 (%USERPROFILE%\AppData\Local\py.ini)，将 %USERPROFILE% 替换为您的主文件夹名称以包含：

```
[commands]
pypy=c:\pypy\pypy.exe 
```

然后你可以简单地在任何脚本的开头放置一个 hashbang 行，当你从命令行运行脚本时，它会自动运行 pypy，例如`script.py`，或者当你点击它的图标时：

```
#!pypy
import sys
print(sys.version) 
```

或用于`#!python27`使脚本与 Python 2.7 一起运行，或`#!python33`使其与 Python 3.3 一起运行。

# c# - WaitHandle.WaitAll 和 ManualResetEvent.Set() - 首先应该是什么？

> ID：14465589
> 
> 赞同：0
> 
> 时间：2013-01-22T18:34:37.320
> 
> 标签：c#, .net, multithreading

我对 WaitHandle.WaitAll 的工作有疑问，希望能提供任何帮助。

假设我有这样的情况：父线程正在打开几个子线程，并且必须等待“做其他事情”，直到子线程完成它们的工作。

我使用 WaitHandle.WaitAll 并希望继续使用这种方法。（没有线程。加入等，请:)）

```
ManualResetEvent[] events = new ManualResetEvent[list.Count];

foreach (string row in list)
{
    events[i] = new ManualResetEvent(false);                

    Thread thread = new Thread(new ParameterizedThreadStart(DoSomething));
    thread.Start(events[i]); // start child thread

    System.Threading.Thread.Sleep(1000000);

    i++;
}

WaitHandle.WaitAll(events); // wait for child threads finish their work
...
...

private DoSomething(object sth)
{
// some stuff that executes only 1 second
ManualResetEvent.Set()
} 
```

因此，第一个新启动的子线程的情况是 ManualResetEvent.Set() 的调用在父线程中调用 WaitHandle.WaitAll(events) 之前。因为打开新子线程的循环有一些长时间的超时。

**所以我的问题是，这样的时间线不是问题吗？在调用 ManualResetEvent.Set() 之前不应该调用 WaitHandle.WaitAll 吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T18:37:53.953

It does not matter. The wait returns when all events are signaled (set) - whether or not that happened before or after wait was called.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T18:45:22.100

As it was said, it does not matter, however, you should consider using the [`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx) class for that kind of things.

It also allows you to run your tasks either simultaneously or consequentially.

Your code then will be only this:

```
Task.WaitAll(
    Task.Factory.StartNew(() =>
    {
        Thread.Sleep(1000);
    }),
    Task.Factory.StartNew(() => { Thread.Sleep(1000); }),
    Task.Factory.StartNew(() => { Thread.Sleep(1000); })
    ); 
```

# linux - 用户无法上传文件，即使使用 vsftpd 为他们设置了权限

> ID：14465591
> 
> 赞同：1
> 
> 时间：2013-01-22T18:34:40.283
> 
> 标签：linux, vsftpd

我有一个云托管 linux 解决方案。我有 vsftpd 正在处理它，但是在遇到问题并修改了很多设置之后，我现在遇到了一个问题，用户可以使用 FTP 登录并连接到正确的主目录，在其中导航，下载文件，但他们无法将文件上传到服务器。他们得到一个超时错误，这似乎是一个权限错误，但我无法缩小范围。/var/logs/syslog 什么都没有。

文件夹属于用户。父 www 文件夹设置为 555。任何人都可以帮助解决这个问题吗？

干杯，

吨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:39:39.023

尝试将权限设置为`755`，`555`不允许为任何人写作。您的用户和组是否不同？

您可能还需要为 FTP 服务器启用日志记录。超时错误可能包括其他一些错误，而不仅仅是权限被拒绝。

要扩展日志记录，请更改 ftp 配置文件中的变量：

```
dual_log_enable=YES
log_ftp_protocol=YES
xferlog_enable=YES
syslog_enable=NO 
```

并在那里检查日志文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-13T03:50:11.340

您必须在用户文件夹中创建一个文件夹（例如：/var/www/user1/upload）。并设置权限 777（例如：chmod 777 /var/www/user1/upload）。然后将文件上传到此文件夹中。

# ide - 如何防止 Arduino IDE 将草图移动到新目录？

> ID：14465597
> 
> 赞同：0
> 
> 时间：2013-01-22T18:35:17.547
> 
> 标签：ide, arduino

我有一些草图想一起分发。它们都使用位于同一文件夹中的自定义库。当前的目录结构是完全平坦的。所有 .ino 文件都在一个文件夹中，就在库的 .cpp 和 .h 文件旁边。这使得分发和更新变得容易。

这将完美地工作，除了每次我打开一个要上传的草图时，Arduino IDE 都会强制我将它移动到一个子文件夹中，然后它就找不到自定义库。有什么方法可以禁用此行为，或者任何人都可以提出解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:23:55.177

起初我试图做所有的平坦，发现它永无止境的战斗。我不是一直在解决这个问题，而是使用它。我的[例子](https://github.com/mpflaga/Sparkfun-MP3-Player-Shield-Arduino-Library)。

我在某个任意位置有我的本地仓库，然后在 ./arduino/library/ 中有符号链接。指向它们的目录在 repo 中的适当目录。在示例中，我在 ./library/ 中有 SdFat 和 SFEMP3shield 的符号链接。目录。我使用 Windows，而不是链接（或 ln -s 命令），我使用“硬[连接](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)”。

请注意，这些库使用 ./ardunio/library/foo/example/bar/bar.ino 的目录结构。所以我实际上在 ./example/bar/bar.ino 草图中完成了我所有的项目。另外值得注意的是，我使用了外部编辑器（如记事本++）。

这样，我的回购可以或多或少地包含我指定的内容。

# kendo-ui - Kendo.UI Grid 悬停时更改行颜色

> ID：14465603
> 
> 赞同：1
> 
> 时间：2013-01-22T18:35:46.263
> 
> 标签：kendo-ui, kendo-grid

在我的部分视图中，我在这样的 Kendo Splitter 内声明了一个 Kendo Grid。

```
@(Html.Kendo().Splitter()
  .Name("adminSplitter")
  .Orientation(SplitterOrientation.Horizontal)

  .Panes(p =>
             {
                 p.Add()
                    .HtmlAttributes(new
                                            {
                                                id = "adminLeftHandPane"
                                            })
                    .Resizable(false)
                    .Size("150px")
                    .Content(@<text>
                                @(Html.Kendo().Grid<AdministrativeTask>()
                                    .Name("grdAdminTasks")
                                    .ClientRowTemplate("<tr class=\"gridRow\"><td style=\"cursor:pointer\"><img src=\"#=ImageUrl#\" style=\"height: 16px; width: 16px;\" />&nbsp;#=Title#</td></tr>")

                                    .Columns(c => c.Bound(i => i.Action)
                                                   .Title("Administrative Tasks"))
                                    .Selectable(s => s.Mode(GridSelectionMode.Single))
                                    .DataSource(ds => ds.Ajax().Read("LoadAdministrativeTasks", "Admin").ServerOperation(false))
                                    .Events(e => e.Change("change"))
                                )
                            </text>);
                 p.Add()

                    .HtmlAttributes(new
                                            {
                                                id = "adminRightHandPane"
                                            })
                    .Content(@<text>
                                  <div id="adminRightHandPaneContent"></div>
                              </text>)
                                            ;
             }
  )

  ) 
```

在同一个局部视图中，我的脚本看起来像这样

```
<script>
function change() {
    var row = this.select();
    var item = this.dataItem(row);

    $.ajax({
        url: '/' + item.Controller + '/' + item.Action,
        contentType: 'application/html; charset=utf-8',
        type: 'GET',
        dataType: 'html',
        cache: false,
    })
                .success(function (result) {
                    // Display the section contents.
                    $('#adminRightHandPaneContent').html(result);
                })
                .error(function (xhr) {
                    $('#adminRightHandPaneContent').html("ERROR: <br><br>" + xhr.responseText);
                    //alert(xhr.responseText);
                });

}

$(document).ready(function () {
    alert($('.gridRow'));
    $(".gridRow").hover(

   function () {
       alert("hit");
       $(this).addClass("highlightRow");
   },
        function() {
            $(this).removeClass("highlightRow");
        }

 );
}); 
```

当部分视图加载时，我收到警报“[object Object]”，它告诉我 Jquery 找到了该行。但是，当我将鼠标悬停在有问题的行上时，我没有收到“命中”警报消息，所以此时我不知道如何继续。

当用户将鼠标悬停在该行上时，我试图突出显示该行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T21:23:39.287

如果您只想在光标位于表格行上时更改行的样式，您可以简单地将 CSS 样式定义为：

```
#grid tbody tr:hover {
    background: #ff0000;
} 
```

哪里`grid`是`id`网格。

看看这里是否运行[http://jsfiddle.net/OnaBai/uN2W5/](http://jsfiddle.net/OnaBai/uN2W5/)

所以你甚至不需要添加 CSS 类、悬停函数处理程序，......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-27T10:53:26.603

通用形式：

```
.k-grid table tr:hover td {
background :rgb(107, 188, 242) !important;
cursor: pointer !important;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-12T18:02:07.310

在 2016 年第一季度，剑道 ui 在 css 中有这条线

```
.k-grid tr:hover{background-image:url(textures/highlight.png);background-image:none,-webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,.45)),to(rgba(255,255,255,0)));background-image:none,-webkit-linear-gradient(top,rgba(255,255,255,.45) 0,rgba(255,255,255,0) 100%);background-image:none,linear-gradient(to bottom,rgba(255,255,255,.45) 0,rgba(255,255,255,0) 100%);background-color:#88c5e0} 
```

所以它应该开箱即用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T15:14:43.897

```
.k-grid table tr.k-state-selected{background: red;color: black; } 
```

# python - Python For 循环列表有趣的结果

> ID：14465604
> 
> 赞同：1
> 
> 时间：2013-01-22T18:35:48.483
> 
> 标签：python, python-2.7

```
a = [0,1,2,3,4,5]
for b in a:
  print ":"+str(b)
  a.pop(0) 
```

认为这可以按顺序遍历整个列表及其所有项目，我运行了此代码并期望这一点。

```
:0
0
:1
1
:2
2
:3
3
:4
4
:5
5 
```

相反，我得到了这个：

```
:0
0
:2
1
:4
2 
```

现在我明白为什么会发生这种情况，但这是python中的错误吗？它不应该仍然遍历所有原始对象而不是当前列表的长度吗？为什么这没有抛出和越界错误？IE：它不应该已经完成​​了吗：

```
:0
0
:1
2
:2
4
:3
Error
:4
Error
:5
Error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:37:10.027

这完全是“预期的”和记录的行为。当您遍历列表时，您基本上是在遍历内存位置。当您从列表中弹出某些内容时，列表中的所有内容都会将 1 个索引移到更靠近列表开头的位置。因此，您最终会跳过项目。当您到达列表末尾时，迭代停止。

通常，在执行此类操作时，您希望遍历列表的副本：

```
for b in a[:]:
    ... 
```

如评论中所示，如果您以相反的顺序遍历列表：

```
for b in reversed(a):
    a.pop() 
```

这可以按预期工作，因为您不断地拉出最终元素，因此您不会改变您尚未看到的任何元素列表中的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T18:36:57.097

您正在循环列表并同时更改它。通过使用`.pop()`，您正在缩短列表，但迭代器指针不会更新。

请改用副本：

```
for b in list(a): 
```

或者

```
for b in a[:]: 
```

其中`[:]`切片表示法返回列表副本。

另一种方法是使用`while`循环代替：

```
while a:
    print a.pop(0) 
```

因为空列表测试为 boolean `False`。

python`for`循环使用它的参数作为迭代器，它本身并不保留索引。循环无法`for`“知道”您删除了元素。相反，它`list()`是保留该指针的迭代器：

```
>>> a = [0,1,2,3,4,5]
>>> itera = iter(a)
>>> itera.next()  # index 0 -> a[0] is 0
0
>>> a.pop(0)
0
>>> a
[1,2,3,4,5]
>>> itera.next()  # index 1 -> a[1] is 2
2 
```

该迭代器保留一个计数器，每次调用`next()`迭代器时，它都会为您提供下一个索引处的值，*无论该值可能是什么*，直到计数器等于列表的*当前*长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:42:34.350

如果你想`.pop()`在循环中使用，一个常见的习惯用法是使用它`while`：

```
a = [0,1,2,3,4,5]
while a:
  print ":{}".format(a.pop(0)) 
```

或者，如果您想要那里的印刷图案：

```
a = [0,1,2,3,4,5]
while a:
    print ":{}\n{}".format(a[0],a.pop(0)) 
```

印刷

```
:0
0
:1
1
:2
2
:3
3
:4
4
:5
5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T18:56:03.663

在循环的每次迭代中，`for`我们必须检查条件`b in a`所以当你开始时：

```
a = [0,1,2,3,4,5]
for b in a:
  print ":"+str(b)
  a.pop(0) 
```

`b = 0`和`in a`（意思是a中的元素）是`5`。现在打印字符串化版本，`a[b]`然后删除数组的第一个元素。因此迭代二变为：

```
a = [1, 2, 3, 4, 5]
b = 1 (it incremented)
size of a = 4 (it shrank) 
```

接下来它们将是`b=2`，a 的大小变为 3。最后一次迭代会产生您所期望的越界错误，因为`b`它将大于数组的大小，所以我们完成了。

# java - 在没有程序焦点的情况下监控键盘状态

> ID：14465608
> 
> 赞同：0
> 
> 时间：2013-01-22T18:36:36.487
> 
> 标签：java, multithreading

我想在我的程序中调用一个线程，该线程不断监视键盘，如果按下某个键，然后告诉我（system.out）。

问题是 KeyListener 接口必须具有焦点才能返回 keystate。 [http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

是否有不同的方法来确定键盘上的按键状态？

我的目标是查看用户是否按下了 ctrl+n，如果是，则将系统剪贴板文本更新为某些内容。

代码：

```
class KeyboardWatcher extends Thread 
{
    boolean flag = false;
    public void run()
    {
        while(!flag)
        {
            if (shift & n are pressed)
            {
                StringSelection stringSelection = new StringSelection("Clip Text");
                Clipboard clpbrd = Toolkit.getDefaultToolkit().getSystemClipboard();
                clpbrd.setContents(stringSelection, null);
                flag = true;
            }
        }
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:37:57.007

没有`Java Native Interface`. 您将需要 OS API 级别的键盘挂钩。您可以重复使用许多可用的解决方案。看看[这个](http://ksquared.de/blog/2011/07/java-global-system-hook/)就是一个这样的例子。

# javascript - Canvas - 在不考虑透明像素的情况下将 png 图像粘贴在一起

> ID：14465609
> 
> 赞同：0
> 
> 时间：2013-01-22T18:36:49.160
> 
> 标签：javascript, html, canvas, html5-canvas, kineticjs

我在 Photoshop 中有很大的水平条形图像，它由许多较小的元素组成。背景是透明的，条带从较小的元素（左）到较大的元素（右）。我的目标是让这条带与鼠标事件交互。

每个元素都是某种多边形图像，它被左右修剪，然后导出为 png。然后将其导入画布。

问题是我可以将它们并排放置，但由于它们不是矩形，我需要一种方法来计算由每个元素每一侧的透明像素组成的偏移量，以使它们正确地粘在一起......我正在使用**KineticJs**为每个元素获得一个精确的命中区域......所以也许有一种方法可以使用 kineticjs 自动完成，或者我可以使用每个图像数据进行某种操作？

我的问题说明：

![我的问题说明了](../Images/670e3b4b3eed5608c5ef3c73903139ef.png)

有任何想法吗？

另外我这样做只是因为我更喜欢每个项目上的精确 mouseOver 边界框（而不是简单的矩形），并且宁愿避免手动计算每个偏移量的解决方案......但这也许不值得？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:36:11.743

您还可以编写一个函数，通过查看图像数据中的所有像素来计算最左边、最上面、最右边和最下面的像素。这是一个教程：

[http://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-tutorial/](http://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:17:55.510

如果您想要精确的区域，请使用[图像地图](https://developer.mozilla.org/en-US/docs/HTML/Element/map)。通过一些巧妙的处理和空白图像 gif，只要将鼠标悬停在图像映射的任何特定区域上（可能需要 javascript），您就应该能够拥有所需的背景。

我能想到的另一个选择是使用 SVG 本身或现有的众多库之一在您的页面中构建交互式矢量图形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:15:09.773

好的，所以你有一个你想要使用的自定义形状，这里有一个教程：[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shape-tutorial/)，你可以做的最简单的事情，甚至看起来相当长，是计算该形状的边界线。（两条有点垂直的线和两条有点水平的线）。然后测试形状一的右垂直线是否与形状二的左垂直线交叉，如果交叉，则将图像的坐标设置为相同的坐标。

[http://www.mathopenref.com/coordintersection.html](http://www.mathopenref.com/coordintersection.html)

```
line1 = ax + b ..... line2 = cx+d //see possible tests
if(...intersection test...){  // or just test if some coordinate is left of some other coordinate
    shape2.setX(shape1.getX()+shape1.getWidth()); //account for image width, so they don't overlap
    shape2.setY(shape1.getY()) // no need to account for height
} 
```

更新：这是解决问题的一个非常粗略的解决方案。下一步将是根据每个图像进行更多微调。

[http://jsfiddle.net/9jkr7/15/](http://jsfiddle.net/9jkr7/15/)

# javascript - 在 javascript 中规范化现有数据集的最有效方法

> ID：14465614
> 
> 赞同：0
> 
> 时间：2013-01-22T18:36:58.467
> 
> 标签：javascript, arrays, sorting, normalize

我有一个想要标准化的平面数据集。数据集是存在的，源是不可更改的，因此定义更好的数据结构不是一种选择。我已经设法“规范化”并重组数据，但我不确定当行数开始增长时它的效率如何？这就是我所拥有的，就像我说的那样，它只是在寻找更优雅的解决方案......

这是理想输出的样子

```
 {ArticleID: "ABC123", 
Status: "Scheduled", 
Articles: { 
  ArticleID: "ABC123", 
  Region: US, 
  PubTypeID: "EO", 
  PubType: "Europe Order", 
  Created: "01/01/2013", 
  Scheduled: "03/02/2013"
  },{ 
  ArticleID: "ABC234", 
  Region: US, 
  PubTypeID: "EO", 
  PubType: "Europe Order", 
  Created: "01/01/2013", 
  Scheduled: "03/02/2013"
  }
} 
```

[这是 jsFiddle 的链接](http://jsfiddle.net/jeremywrags/TLENN/)

```
$(document).ready(function(){

var data = new Array( 
{ 
  ArticleID: "ABC123", 
  Region: 'US', 
  PubTypeID: "EO", 
  PubType: "Europe Order", 
  Created: "01/01/2013", 
  Scheduled: "03/02/2013"
},
{ 
  ArticleID: "ABC123", 
  Region: 'RU', 
  PubTypeID: "EO", 
  PubType: "Europe Order", 
  Created: "01/01/2013", 
  Scheduled: "04/02/2013"
},
{ 
  ArticleID: "ABC763", 
  Region: 'EO', 
  PubTypeID: "EO", 
  PubType: "Europe Order", 
  Created: "01/01/2013", 
  Scheduled: "03/02/2013"
},
{ 
  ArticleID: "ABC498", 
  Region: 'JP', 
  PubTypeID: "EN", 
  PubType: "Europe Order", 
  Created: "01/01/2013", 
  Scheduled: "03/02/2013"
}
);

var Articles = new Array(); 
var pID = "";
var cID = "";

$.each(data, function(i, item) {
cID = item.ArticleID;
var entries = new Array();
if(cID != pID)
{
    $.each(data, function(j, item2) {
        var entry = new Object();
        if(cID === item2.ArticleID)
        {
            entry.ArticlID = item2.ArticleID;
            entry.Region = item2.Region;
            entry.PubTypeID = item2.PubTypeID
            entries.push(entry);
        }
    });
    Articles.push({ArtilceID: cID, Entries: entries})
    pID = cID
}
});

alert(Articles.length);
alert(Articles[0].Entries.length);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:29:23.307

一次迭代就足够了。您可以使用`groupBy`利用查找对象的操作：

```
var byId = {};
for (var i=0; i<data.length; i++)
    if (data[i].ArticleID in byId)
        byId[data[i].ArticleID].push(data[i]);
    else
        byId[data[i].ArticleID] = [data[i]]; 
```

我不知道您到底需要什么，但是您可以通过以下方式轻松获取原始代码构建的结构：

```
var Articles = [];
for (var id in byId)
     Articles.push({
        ArtilceID: id,
        Entries: $.map(byId[id], function(item) {
            return {
                ArticlID: item.ArticleID,
                Region: item.Region,
                PubTypeID: item.PubTypeID
            };
        }) // not sure why you need to clone them, though
     }); 
```

# javascript - || 的含义 在 javascript 参数中

> ID：14465615
> 
> 赞同：2
> 
> 时间：2013-01-22T18:37:01.057
> 
> 标签：javascript, jquery

> **可能重复：**
> [“options = options || 是什么意思？{}”在 Javascript 中是什么意思？](https://stackoverflow.com/questions/2851404/what-does-options-options-mean-in-javascript)

|| 是什么意思 在第二个论点？

```
 var obj = this;
   var settings = $.extend({
       param: 'defaultValue'
   }, options || {}); 
```

如果有人知道如何在这里或在谷歌中搜索该字符（“|”），那就太好了！谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T18:38:31.977

那将是逻辑或。该语句将返回它找到的第一个真值。

在这种情况下，如果`options`为 null（或任何其他非真值），它将评估为假。然后`||`将返回空对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:38:13.500

那是某种后备值或默认值。因此，如果对象为 null 或 false，则使用第二个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T18:41:05.277

更重要的是，在这种情况下，如果未定义选项，则将空对象`{}`作为参数传递。它是逻辑 OR 运算符的一种副作用用例。更具体地说，它使用短路。例如在下面的情况下

```
a || b 
```

如果`a`为真则 b 永远不会被执行，但如果`a`为假则被`b`执行。因此，在您展示的示例中，如果`options`未定义并因此为假，则将`{}`被执行并因此作为参数传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T18:38:09.417

|| = 或

与比较运算符一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T18:41:57.117

`||`=“或”。例子：

`alert(false || false || false || "I'm valid!"); // alerts "I'm valid"`

在您的问题中，上面的示例演示了该函数需要一个对象作为其选项。在这种情况下，如果局部变量“options”不可用，则只需传递一个空对象。稍后，在被调用的函数中，它可能会在该新对象中设置默认值。

# asp.net - ASP.NET 解析 App_Code 文件夹中的符号数据集

> ID：14465619
> 
> 赞同：0
> 
> 时间：2013-01-22T18:37:20.637
> 
> 标签：asp.net

我有一个项目，其中一些带有表适配器的数据集存储在 VS 2010 的 App_Code 文件夹中。我无法从后面的代码访问表适配器。我尝试按照为 VS 2005 编写[的](http://weblogs.asp.net/scottgu/archive/2006/01/15/435498.aspx)指南进行操作，但是 VS 2010 表示它无法解析符号。我需要为 VS 2010 添加任何其他命名空间来解析符号吗？

我的代码类似于以下代码，但使用了正确的数据集和表适配器名称。

var tableAdapter = new NorthwindTableAdapters.SuppliersTableAdapter();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:12:35.433

谢谢你们的回复。问题原来是在将项目从 VS 2008 移植到 VS 2010 时出现问题。

# ios - 无法在沙盒 iTunes Connect 中创建排行榜

> ID：14465620
> 
> 赞同：0
> 
> 时间：2013-01-22T18:37:23.143
> 
> 标签：ios, app-store-connect, game-center

我正在尝试为我的游戏创建排行榜。不幸的是，在按照 iTunes connect 的说明填写排行榜和排行榜的 1 种语言规范后，保存按钮只是用编辑数据刷新屏幕，但没有创建排行榜。

我疯了吗？我错过了一条关键信息吗？

1）创建捆绑应用程序 ID 2）在 iTunes Connect 中创建应用程序 3）启用游戏中心 4）去游戏中心编辑排行榜 5）添加新排行榜​​（单个排行榜） 6）填写表格 7）所有在失败的船上。（实际上并不保存和创建排行榜，只是刷新页面）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-04T20:25:14.863

以防万一其他人偶然发现...我有相同的灰色“保存”按钮，原因是我只设置了排行榜得分的最小值，而将最大值留空。我的印象是框下方显示的数字意味着它将被使用。我不得不把它复制到盒子里，它解决了这个问题。

该死的Apple可以在该页面上添加一些opoup/tip

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:46:53.450

我发现了问题。显然，您的排行榜名称中不能有破折号。但是，对话框中没有出现错误。呸!

# java - 使用 DI 时如何处理对象的特殊“常量”实例

> ID：14465624
> 
> 赞同：2
> 
> 时间：2013-01-22T18:37:42.283
> 
> 标签：java, design-patterns, dependency-injection

我的项目大量使用依赖注入，我非常小心避免服务定位器反模式。所有对象都是使用构造函数注入构造的，允许容易识别的依赖项列表。现在我正在构建一个对象，它有一个特殊的“常量”实例，它基本上是静态/单例（考虑像 Integer.MinValue 这样的例子）。所以我最初的反应是使用静态“getter”方法创建一个静态字段，如果之前没有创建对象的实例，它将创建该对象的实例。然而，对象本身具有依赖关系，所以我对实例化这个“特殊实例”的最佳实践感到困惑。我正在寻找有关如何在这种情况下最好地构造代码的建议，理想情况下，无需调用容器来解决依赖关系。一些代码：

```
public class PressureUnit extends DataUnit {
    private static PressureUnit standardAtmosphere;
    public static PressureUnit StandardAtmosphere() {
        if(standardAtmosphere == null){
            standardAtmosphere = new PressureUnit(1013.25); // this line is what is bothering me as I need to resolve other dependencies (have to use new as it's a static method and can't be injected like everywhere else)
        }
        return standardAtmosphere;
    }

    @AssistedInject
    public PressureUnit(ITimeProvider timeProvider, IUnitProvider unitProvider, @Assisted double value) {
        this(timeProvider, unitProvider, value, PressureUnits.hPa);
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:47:49.920

我真的没有在您的代码中看到任何问题，因为您没有在这里和那里更新依赖项，现在据说我可以提出一些建议：

*   如果您特别希望容器调用现有的静态工厂方法，可以使用[StaticFactoryExtension](http://aspiringcraftsman.com/2009/06/15/unity-static-factory-extension/)。
*   你为什么不使用工厂。
*   如果可能，请考虑重构您的设计并删除静态方法。

# hadoop - Apache PIG：仅当参数大于 0 时才应用 LIMIT

> ID：14465632
> 
> 赞同：0
> 
> 时间：2013-01-22T18:38:08.050
> 
> 标签：hadoop, apache-pig

如何在 PIG 中实现以下目标`foreach`：

```
REL = foreach RELS {
 if ( cnt == 0 )
 limited_result = NULL/Empty;
 else
 limited_result = LIMIT results cnt ;

 generate limited_result.some_field;
} 
```

我不能使用`LIMIT`，因为它验证 'cnt' 大于 0；我尝试使用 a `SPLIT`，但显然它不支持在`foreach`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:43:30.253

`FILTER`在你的 ing 之前怎么样`FOREACH`？

```
REL = foreach (filter RELS by cnt > 0) {
 limited_result = LIMIT results cnt ;
 generate limited_result.some_field;
} 
```

如果你还需要`cnt`为0的记录，你可以`SPLIT`先在为0的时候生成一个空包`cnt`：

```
split RELS into ZERO if cnt == 0, NONZERO if cnt > 0;

NZ_LIM = foreach NONZERO {
 result = LIMIT results cnt ;
 generate limited_result.some_field;
}
Z_LIM = foreach ZERO generate {} as some_field;

REL = union NZ_LIM, Z_LIM; 
```

# drupal-7 - 在 Drupal 7 的视图中内联添加/编辑/删除数据

> ID：14465636
> 
> 赞同：7
> 
> 时间：2013-01-22T18:38:27.480
> 
> 标签：drupal-7, drupal-views

我正在尝试创建一个内容类型（比如 Meter）。每个仪表由一个“仪表读数”组成。此抄表内容包含三个字段，例如标题、日期范围和使用情况。我有一个面板页面，其中显示了与父仪表相关的所有仪表读数。我以表格格式显示了仪表读数。

我希望用户能够添加新的仪表读数，而无需转到默认的仪表读数创建页面。用户应该能够在提供的表格视图中输入数据，而不是默认的表单类型的页面，并且应该自动将其保存到项目本身中。

所以，我希望功能类似于：-

1.  用两个链接显示所有仪表读数，即编辑和删除，
2.  当用户点击编辑链接时，抄表行应该变成可编辑的并且用户应该能够在同一个表中进行内联更改，
3.  在页脚中应该有一个用于添加新仪表读数的链接，当用户单击它时，应该将一个新的空白行动态添加到表格中，并且用户应该能够在其中进行新条目。

Drupal 7中是否有这样做的模块？我已经为此尝试了几个模块，例如[SlickGrid](http://drupal.org/project/slickgrid)、[jQGrid](http://drupal.org/project/jqgrid)和[jEditable](http://drupal.org/project/jeditable)

任何帮助都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T07:54:59.117

恐怕我不知道开箱即用的模块。但如果您继续使用自定义编码，您可以查看以下内容：

> 1.  视图中每行的编辑和删除选项

使用[视图 Megarow](http://drupal.org/project/views_megarow)。对于工作示例，您可以查看其在[商业后台](http://drupal.org/project/commerce_backoffice)的使用方式。请注意，您需要在自定义模块中为快速编辑表单编写表单结构（ FORM api ）。Views Megarow 负责 ajax 填充编辑表单，在客户端提交，并在服务器响应后刷新原始行。

> 1.  当用户点击编辑链接时，读表行应该变成可编辑的并且用户应该能够在同一个表中进行内联更改。

视图 Megarow 不支持内联编辑。但是@nmc 建议的另一个模块可以做到这一点。它的[可编辑字段](http://drupal.org/project/editablefields)。但它没有任何编辑/删除按钮。您直接单击视图中的文本（前提是用户具有编辑字段数据的适当权限）。

如果您要使用可编辑字段，则必须在视图中添加另一个删除按钮，一个确认将重定向到触发删除操作的页面。

由于删除按钮会重定向到默认确认页面，因此您可能需要编写自定义删除操作来覆盖此操作。

> 1.  在页脚中应该有一个用于添加新仪表读数的链接，当用户单击它时，应该将一个新的空白行动态添加到表格中，并且用户应该能够在其中进行新条目。

我建议创建一个小的 ajax 表单。在其中创建一个“添加抄表”按钮，提交时将在服务器中创建一个抄表节点。ajax 表单应该在隐藏字段中包含父信息（即 Meter id）。此表单的 ajax 响应可能是另一个在客户端加载/刷新视图的脚本。

刷新视图的客户端代码可以在 Views Hacks的[Views Autorefresh子模块中找到。](http://drupal.org/project/views_hacks#views_autorefresh)

如果使用视图 megarow，您必须在刷新视图后在 ajax 响应上添加另一个 jquery 函数 - 触发编辑按钮。否则，您可能必须向新创建的行添加一些类或主题以使它们成为焦点。

*刷新整个视图很重要，以便将 drupal 行为附加到表中新创建的条目。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T14:12:07.787

我不知道是否有一个模块可以满足您的所有需求，但您可以组合使用一些模块。

[查看批量操作 (VBO)](http://drupal.org/project/views_bulk_operations) - 支持 Drupal 7

> 该模块通过允许对显示的行执行批量操作来增强视图。它通过在每个节点前面显示一个复选框，并添加一个包含可以应用的操作的选择框来实现。可以使用 Drupal Core 或规则操作。

[editablefields](http://drupal.org/project/editablefields) - 开发中的 Drupal 7 版本

> 该模块允许在节点的显示上（例如在 node/123）上编辑 CCK 字段，而不仅仅是在节点编辑页面上（例如 node/123/edit）。它也适用于视图等。任何可以选择“格式化程序”的地方，您都可以选择可编辑（或单击以编辑）。

[editview](http://drupal.org/project/editview) - 还没有 Drupal 7 支持，但我想我会提到它，以防你能够自己调整代码

> Editview 是 Views 模块的插件。它允许您创建节点可编辑的视图，并且可以创建新节点。

# php - 如何在php中将具有相同值的行作为一个组显示

> ID：14465644
> 
> 赞同：0
> 
> 时间：2013-01-22T18:38:58.907
> 
> 标签：php, mysql, sql, grouping

数据库结构：

```
ID | USERID | ENTRYDATE | EXITDATE | PRICE | ROOMID
-----------------------------------------------------
1  | 2      | 2012-10-1 | 2012-10-4| 100   | 1 
2  | 2      | 2012-10-1 | 2012-10-4| 100   | 2 
3  | 2      | 2012-10-1 | 2012-10-4| 100   | 3 
4  | 2      | 2012-10-6 | 2012-10-9| 100   | 4 
5  | 2      | 2012-10-6 | 2012-10-9| 100   | 55 
```

我需要一些帮助。我想显示该数据库中的一组记录。我想显示所有具有相同 USERID 的人，但将具有相同 ENTRYDATE 和 EXITDATE 的人分组在同一个 DIV 中。例如，结果应该是这样的......

```
ID | USERID | ENTRYDATE | EXITDATE | PRICE | ROOMID
------------------------------------------------------
1  | 2      | 2012-10-1 | 2012-10-4| 100   | 1
2  | 2      | 2012-10-1 | 2012-10-4| 100   | 2
3  | 2      | 2012-10-1 | 2012-10-4| 100   | 3 
```

```
ID | USERID | ENTRYDATE | EXITDATE | PRICE | ROOMID
----------------------------------------------------
4  | 2      | 2012-10-6 | 2012-10-9| 100   | 4
5  | 2      | 2012-10-6 | 2012-10-9| 100   | 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:10:41.760

我不确定我是否正确理解了您的问题。我假设您有一个字符串索引数组，并且您想根据 ENTRYDATE 和 EXITDATE 值对其进行拆分。也许是这样的：

```
$currentEntry = $data[0]['ENTRYDATE'];
$currentExit = $data[0]['EXITDATE'];
$splitted = array();
$i = 0;
foreach ($data as $row) {
  if ($row['ENTRYDATE'] == $currentEntry && $row['ENTRYDATE'] == $currentExit) {
    $splitted[$i] []= $row;
  } else {
    $currentEntry = $row['ENTRYDATE'];
    $currentExit = $row['EXITDATE'];
    $i++;
  }
} 
```

# python - 无法让简单的 Python 线程工作

> ID：14465646
> 
> 赞同：0
> 
> 时间：2013-01-22T18:39:02.600
> 
> 标签：python, multithreading

我是线程新手（虽然不是 Python 的初学者），但我无法让线程工作。我有以下 simpl(est) 程序，但我似乎无法调用函数 do_something()。我必须做一些非常基本的错误。谁能告诉我什么？万分感谢！

```
import threading

def do_something():
    print 'Function called...'

t = threading.Thread(target=do_something) 
```

* * *

当然，我之前无意中删除了 t.start() 指令（该死的 Synaptic 触摸板！！！！！！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:40:52.703

您应该启动线程：

```
import threading

def do_something():
    print 'Function called...'

t = threading.Thread(target=do_something)
t.start() # you forgot this line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:41:03.650

你需要开始你的线程：

```
t.start() 
```

# java - 使用嵌套的 for 循环查找重复项

> ID：14465649
> 
> 赞同：0
> 
> 时间：2013-01-22T18:39:16.843
> 
> 标签：java, if-statement, for-loop, arraylist, duplicates

我一直在尝试编写这段代码一段时间，但我无法弄清楚我的嵌套 for 循环有什么问题。我认为我的 if 语句可能有问题，但我不确定。该代码应该搜索十张随机扑克牌以找到任何重复。我知道其余的代码正在工作，但我无法弄清楚我在这部分做错了什么。如果有人可以提供帮助，我将不胜感激。（爪哇）

```
 /*
 * Return true if there is a duplicate card in the pack
 */
public boolean hasDuplicate() {
    for (int i = 0; i < pack.size(); i++){
        for (int j = i; j < pack.size(); j++) {
            if (i != j && pack.get(i).equals(pack.get(j))){
                pos = i;
                return true;
            } 
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:01:36.993

您正在使用的类 ( `Card`) 没有适当的重写`.equals()`方法，因此它使用`Object`默认值 - 相等运算符 ( `==`) - 来检查两个对象是否相等。您正在为数组中的每个项目填充一个`new`对象，因此它们都不等于`==`，因此它们都不等于`.equals()`。您需要重写其`.equals()`方法以返回卡片在语义上是否相等（即相同的等级和花色）。当您使用它时，您也应该重写`hashCode`，以维护一般合同（如果`x.equals(y)`那么`x.hashCode() == y.hashCode`）。

# jms - 使用多个 mule 实例处理 activemq jms 消息无效

> ID：14465652
> 
> 赞同：0
> 
> 时间：2013-01-22T18:39:25.267
> 
> 标签：jms, cluster-computing, activemq, mule

我遇到了一个带有 activemq 的多个 mule 实例的问题。我们的设置就像我们在前端服务器中有一个 mule 实例，并且我们有多个后端/应用程序服务器（比如说 A、B、C、D），以便更快地处理安装了 mule 实例的请求。前端和后端之间的通信是通过activemq JMS 消息传递。一旦消息发布到队列上，任何后端服务器（activemq 侦听器）都会获取消息并且应用程序会使用该消息。我的场景是当后端服务器 A 收到消息时，应用程序突然处理消息，应用程序（守护程序）关闭。我的期望是任何其他后端服务器（比如 B.C、D）应该接受请求并继续处理它。我也尝试过使用 maxRedelivery 属性，

注意：我使用了 JMS 事务。

当处理服务器最终出现故障时，是否有人知道如何将工作委派给其他应用程序服务器（mule 实例）？

# php - 有没有更有效的方法来编写这 4 个 MYSQL 查询以使用更少的查询？

> ID：14465653
> 
> 赞同：0
> 
> 时间：2013-01-22T18:39:27.030
> 
> 标签：php, mysql, performance

我目前的查询。我可以将它们组合成更少以获得相同的结果吗？我正在尝试将有关线索的特定信息放入名为 $trail 的数组中。

```
$result = mysql_query("SELECT meta_value FROM wp_postmeta WHERE `post_id` = $id AND `meta_key` = 'location_city' ");
$result = mysql_fetch_array($result);
$trail[city] = $result[0];

$result = mysql_query("SELECT meta_value FROM wp_postmeta WHERE `post_id` = $id AND `meta_key` = 'length' ");
$result = mysql_fetch_array($result);       
$trail[length] = $result[0];

$result = mysql_query("SELECT meta_value FROM wp_postmeta WHERE `post_id` = $id AND `meta_key` = 'location_state' ");
$result = mysql_fetch_array($result);
$trail[state] = $result[0];

$result = mysql_query("SELECT meta_value FROM wp_postmeta WHERE `post_id` = $id AND `meta_key` = 'difficulty' ");
$result = mysql_fetch_array($result);
$trail[difficulty] = $result[0];

$result = mysql_query("SELECT guid FROM wp_posts WHERE `post_parent` = $id AND `post_type` = 'attachment' ");
$result = mysql_fetch_array($result);
$trail[image] = $result[0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:42:50.330

这将适用于 meta_values：

```
SELECT meta_value, meta_key
...
WHERE (post_id = $id) AND (meta_key IN ('location_city', 'length', ...) 
```

guid 查询作为单独的查询可能会更好。如果您坚持减少到单个查询调用，那么联合就可以了

```
SELECT 'meta' AS source, meta_value, meta_key
WHERE ...

UNION ALL

SELECT 'guid' AS source, guid, null
FROM ...
WHERE post_parent = $id and post_type = 'attachment' 
```

然后使用这个派生的“源”字段来确定哪些值属于哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:44:26.187

如果您想要列中的数据，那么您可以`JOIN`查询：

```
SELECT lc.meta_value Location_City,
    l.meta_value Location,
    ls.meta_value LocationState,
    d.meta_value Difficulty,
    p.guid
FROM wp_postmeta lc
LEFT JOIN wp_postmeta l
    on lc.`post_id` = l.`post_id`
    and l.`meta_key` = 'length'
LEFT JOIN wp_postmeta ls
    on lc.`post_id` = ls.`post_id`
    and ls.`meta_key` = 'location_state'
LEFT JOIN wp_postmeta d
    on lc.`post_id` = d.`post_id`
    and d.`meta_key` = 'difficulty'
LEFT JOIN wp_posts p
    on lc.`post_id` = p.`post_parent`
    and p.`post_type` = 'attachment'
WHERE lc.`post_id` = $id 
    AND lc.`meta_key` = 'location_city' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:42:31.327

```
SELECT meta_value FROM wp_postmeta WHERE `post_id` = $id AND (`meta_key` = 'difficulty' OR `meta_key` = 'location_state' OR `meta_key` = 'length'  OR `meta_key` = 'location_city' ) 
```

# javascript - 如何将按钮从“单击”重置为“未单击”

> ID：14465656
> 
> 赞同：0
> 
> 时间：2013-01-22T18:39:31.527
> 
> 标签：javascript, button, reset, click

我尝试了以下类似的方法，但无济于事。（我是一个新手程序员，所以要友善。）

```
document.getElementById('Button1').clicked = false;
document.getElementById('Button1').value = false;
document.getElementById('Button1').value = document.getElementById('Button1').defaultValue; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:53:04.320

普通按钮不会以这种方式运行。链接可以，但按钮不行。我在想任何在您的页面中 ID 为“Button1”的东西实际上是一个链接`<a href="" id="Button1">Some Text</a>`，它具有 CSS 样式（或根本没有），一旦您至少单击一次，它就会显得不同，对吗？

如果是这样，你现在不需要 javascript。您应该创建（或编辑现有的）CSS 表，并在其中设置“Button1”的样式。怎么做？[在这里阅读](http://www.w3schools.com/css/css_link.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:41:39.090

使用 CSS 来做到这一点，你可以使用 CSS`visited`属性来显示链接是否被点击

# c# - C#中的3位随机数

> ID：14465661
> 
> 赞同：6
> 
> 时间：2013-01-22T18:39:42.563
> 
> 标签：c#, .net

有没有比以下更好的方法来生成 3 位随机数：

```
var now = DateTime.Now.Ticks.ToString(CultureInfo.InvariantCulture);
string my3digitrandomnumber = now.Substring(now.Length - 7, 3); 
```

谢谢..

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-22T18:42:05.917

是的 - 您当前的代码根本不是*随机*的。它基于系统时间。特别是，如果您同时在多个线程中使用它 - 或者甚至在同一线程中快速连续多次使用它 - 您每次都会得到相同的数字。

您应该使用[`Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)or [`RandomNumberGenerator`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.randomnumbergenerator.aspx)（更安全）。

例如，一旦你有了 的实例`Random`，你可以使用：

```
int value = rng.Next(1000);
string text = value.ToString("000"); 
```

（假设您希望将数字作为文本。如果您想要一个保证为三位数的*整数*`rng.Next(100, 1000)`，请使用。）

但是，有一些警告`Random`：

*   您*不想*每次使用时都创建一个新实例；除非您指定种子，否则这也是基于时间的
*   它不是线程安全的

因此，理想情况下，您可能希望每个线程一个。我[关于随机性的文章](http://csharpindepth.com/Articles/Chapter12/Random.aspx)对此进行了更多讨论，并提供了一些示例代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T18:41:57.960

```
int r = (new Random()).Next(100, 1000); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T18:40:51.053

您可以使用`Random`该类并调用`Next(10)`3 次。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T18:42:37.797

嗯，首先，你有一个奇怪的设置，你为什么要先得到日期？

您应该使用它来获得 3 位数字（小于 1000）。

```
Random rand = new Random(); // <-- Make this static somewhere

const int maxValue = 999;
string number = rand.Next(maxValue + 1).ToString("D3"); 
```

这`maxValue + 1`是因为参数 for`Random.Next(int)`是一个排他性的上限，这意味着返回的数字将始终小于参数。它永远不可能与它相等。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-22T18:44:25.857

```
new Random.NextDouble() * 1000 
```

# cocos2d-iphone - Cocos2d 掉帧

> ID：14465665
> 
> 赞同：0
> 
> 时间：2013-01-22T18:40:22.107
> 
> 标签：cocos2d-iphone, frame-rate, kobold2d

我非常接近完成我的 cocos2d 项目，但我遇到了一个问题，我的游戏某些部分的帧速率一直在下降。我试图查看 fps 下降时正在执行的代码，但问题是它并不总是在同一点下降。所以我的问题是如何分析我的代码并查看帧速率下降的位置和原因？我正在使用 cocos2d v1.1.0-beta2b

# laravel - Laravel 不尊重 routes.php 文件

> ID：14465666
> 
> 赞同：0
> 
> 时间：2013-01-22T18:40:24.723
> 
> 标签：laravel, laravel-routing

我有一个奇怪的问题。我最近将我的 Laravel 站点从我的本地主机（在 Mac 上）中的一个目录移动到另一个目录。从那以后没有什么是对的。我不得不将我的 .htaccess 从标准 Laravel 4 .htaccess 更改为：

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule . index.php [L] 
```

这是 L4 的替代 Laravel .htaccess。这至少使我的公用文件夹不被禁止。但是现在 Laravel 完全忽略了路由文件。事实上，所有路由（文件中的和不存在的）似乎都有效并且似乎没有一个调用 404 错误，即使我尝试调用存在的路由和不存在的路由。我什至删除了路由文件中除了基本路由之外的所有内容，并且没有任何改变。

怎么可能调用不存在的路由而我没有找到页面未找到错误？我得到的只是一个白屏。除了基本路线外，情况也是如此。为什么它只尊重基本路线（即''）？如果我将该路由更改为其他控制器之一，它将调用该控制器。简而言之，唯一有效的路线是''。为什么自从我移动网站后一切都发生了变化？

# macos - 使用 make 安装 Perl 模块时出错 - Mac OSX 10.7

> ID：14465667
> 
> 赞同：1
> 
> 时间：2013-01-22T18:40:29.017
> 
> 标签：macos, makefile, perl-module

问题：

我似乎无法正确安装 perl 模块，尤其是 JSON-2.53。

我做了以下事情：

*   搜索了一个类似的问题并尝试了它的解决方案 - 没有奏效。
*   [perl ".../config.h, `Makefile' 需要" 在 OSX Lion 升级后不起作用](https://stackoverflow.com/questions/6793499/perl-config-h-needed-by-makefile-problem-after-osx-lion-upgrade)
*   安装了 XCode 命令行开发工具（c 编译器、make 等）
*   阅读有关此特定 perl 模块的版本兼容性文档：http: [//metacpan.org/pod/JSON](http://metacpan.org/pod/JSON)
*   运行以下命令来制作和安装所需的 perl 模块：

    $perl Makefile.PL

    # 欢迎使用 JSON (v.2.53)

    如果您安装 JSON::XS v.2.27，它会使 JSON 更快。

    ****************************** 注意 ************************* ***

    *   这是“JSON 版本 2”，有很多不同 *
    *   到版本 1.xx *
    *   请检查您使用旧版本的应用程序。*
    *   请参阅“旧版本的不兼容更改”和“提示”*

        * * *

    为 JSON 编写 Makefile

（验证Makefile已经写好了）

```
$make
make: *** No rule to make target `/System/Library/Perl/5.12/darwin-thread-multi-2level/CORE/config.h', needed by `Makefile'.  Stop. 
```

这个错误甚至意味着什么？我该怎么做才能成功完成`make install`这个模块？

以下是一些可以帮助您调试此问题的附加项目：

```
$which make
/Applications/Xcode.app/Contents/Developer/usr/bin/make
$which perl
/usr/bin/perl
$perl -v
This is perl 5, version 12, subversion 3 (v5.12.3) built for darwin-thread-multi-2level 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:34:48.357

我认为您需要下载并重新安装 XCode。如果我没记错 10.7，从应用商店下载 Xcode 后，它会将安装程序放入您的应用程序文件夹中。您需要运行它并尝试再次安装命令行工具（从 Xcode 的首选项窗格中）。我知道您提到您已经这样做了，但是更多的背景知识可能会解释为什么值得再次尝试。

以下是我 Mac 的 Makefile 中的相关行：

```
PERL_INC = /System/Library/Perl/5.12/darwin-thread-multi-2level/CORE
# Where is the Config information that we are using/depend on
CONFIGDEP = $(PERL_ARCHLIB)$(DFSEP)Config.pm $(PERL_INC)$(DFSEP)config.h 
```

稍后在 Makefile 中，CONFIGDEP 被用作目标中的依赖项。我相信在您的情况下，make 正在寻找 /System/Library/Perl/5.12/darwin-thread-multi-2level/CORE/config.h 并且找不到它。您看到的错误是 make 说文件未找到的钝方法。

config.h 包含有关操作系统的特定信息，但运行脚本不需要。仅当您要编译模块时才引用它。使用股票 OSX，您可以获得足够的 perl 来执行脚本。安装 XCode，你就会得到一些东西（比如 config.h）来做 perl “开发”。我使用引号是因为您可以在没有 Xcode 的情况下编写和运行 perl 脚本。但正如您所发现的，编译模块需要 Xcode 提供的附加文件。（顺便说一下，R​​edHat 做同样的事情。你必须安装 perl-devel 包来获取 config.h。perl 运行时在一个单独的包中。）

以下是您可以尝试的一些事情：

1.  验证 /System/Library/Perl/5.12/darwin-thread-multi-2level/CORE/config.h 是否存在。如果没有，Xcode 命令行实用程序没有正确安装。再试一次。
2.  如果 config.h 存在，请检查其内容并确保它看起来正常。它是一个 C 头文件，由注释和#define 语句组成。
3.  如果您无权查看 config.h，则说明存在权限问题。尝试`sudo make`用作旁路。磁盘实用程序（在应用程序 -> 实用程序中找到）可能能够永久修复此问题。
4.  您可能会冒险从 CONFIGDEP 中删除“$(PERL_INC)$(DFSEP)config.h”来更改 Makefile。我在我的 10.8 Mac 上做了这个，它没有问题（它也通过了所有测试）。但是，如果您没有找到 config.h 问题的根本原因，那么下次您想要安装 perl 模块时，您可能会发现自己又回到了开始的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T19:20:40.440

我有这个完全相同的错误，虽然这可能不是你的解决方案....在重新安装与 OSX 版本兼容的更新 xcode 后（安装后重新启动）我仍然有错误 - 长话短说我注意到错误发生后 /CORE/ 中没有 config.h .....解决方法是先触摸 config.h 并创建文件，然后重新运行 make。希望这可以帮助某人。

# database - 弹性搜索，多个索引与不同数据集的一个索引和类型？

> ID：14465668
> 
> 赞同：179
> 
> 时间：2013-01-22T18:40:36.683
> 
> 标签：database, search, elasticsearch

我有一个使用 MVC 模式开发的应用程序，现在我想索引它的多个模型，这意味着每个模型都有不同的数据结构。

*   使用多个索引是否更好，每个模型一个或每个模型在同一索引中都有一个类型？我认为这两种方式都需要不同的搜索查询。我刚开始做这个。

*   如果数据集很小或很大，两个概念之间是否存在性能差异？

如果有人可以为此目的向我推荐一些好的样本数据，我会自己测试第二个问题。

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2013-01-28T02:47:58.883

两种方法都有不同的含义。

假设您使用 Elasticsearch 的默认设置，每个模型有 1 个索引将显着增加您的分片数量，因为 1 个索引将使用 5 个分片，5 个数据模型将使用 25 个分片；虽然在 1 个索引中有 5 个对象类型仍将使用 5 个分片。

将每个数据模型作为索引的含义：

*   在索引中高效快速地搜索，因为每个分片中的数据量应该更小，因为它分布到不同的索引。
*   从 2 个或更多索引中搜索数据模型的组合会产生开销，因为必须将查询发送到跨索引的更多分片、编译并发送回用户。
*   如果您的数据集很小，则不建议这样做，因为创建每个额外的分片都会产生更多的存储空间，并且性能提升是微不足道的。
*   如果您的数据集很大并且您的查询需要很长时间来处理，建议您使用，因为专用分片存储您的特定数据，并且 Elasticsearch 更容易处理。

将每个数据模型作为索引中的对象类型的含义：

*   更多数据将存储在索引的 5 个分片中，这意味着当您跨不同数据模型进行查询时，开销问题会更小，但您的分片大小会大得多。
*   分片中的更多数据将需要更长的时间让 Elasticsearch 搜索，因为要过滤的文档更多。
*   如果您知道您正在处理 1 TB 的数据，并且您没有将数据分布在 Elasticsearch 映射中的不同索引或多个分片中，则不推荐使用。
*   推荐用于小型数据集，因为每个分片都会占用硬件空间，因此您不会为了边际性能提升而浪费存储空间。

如果您要问什么是太多数据与小数据？通常，它取决于处理器速度和硬件的 RAM、您在 Elasticsearch 映射中每个变量中存储的数据量以及您的查询要求；在您的查询中使用许多方面会显着减慢您的响应时间。对此没有直接的答案，您必须根据自己的需要进行基准测试。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2017-03-13T11:27:47.447

尽管当时乔纳森的回答是正确的，但世界已经在前进，现在看来 ElasticSearch 背后的人有一个长期计划放弃对多种类型的支持：

[我们想要达到的目标：我们希望从 Elasticsearch 中移除类型的概念，同时仍然支持父/子。](https://github.com/elastic/elasticsearch/issues/15613#issuecomment-239435920)

所以对于新项目，每个索引只使用一个类型将使最终升级到 ElasticSearch 6.x 更容易。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-07-28T11:29:22.527

乔纳森的回答很棒。我只想添加其他几点考虑：

*   可以根据您选择的解决方案自定义分片数量。您可能有一个包含 15 个主分片的索引，或者将其拆分为 5 个分片的 3 个索引 - 性能观点不会改变（假设数据平均分布）
*   考虑数据使用情况。IE。如果您使用 kibana 进行可视化，则更容易包含/排除特定索引，但必须在仪表板中过滤类型
*   数据保留：对于应用程序日志/指标数据，如果您需要不同的保留期，请使用不同的索引

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-21T16:01:38.237

以上两个答案都很棒！

我在索引中添加了几种类型的示例。假设您正在开发一个应用程序来搜索图书馆中的书籍。有几个问题要问图书馆的主人，

问题：

1.  您打算存放多少本书？

2.  你打算在图书馆存放什么样的书？

3.  你打算怎么找书？

答案：

1.  我计划存储 5 万到 7 万本书（大约）

2.  我将拥有15 k -20 k 技术相关书籍（计算机科学、机械工程、化学工程等），15 k 历史书籍，10 k 医学书籍。10 k 的语言相关书籍（英语、西班牙语等）

3.  按作者名字、作者姓氏、出版年份、出版商名称搜索。（这让您了解应该在索引中存储哪些信息）

从上面的答案我们可以说我们索引中的模式应该看起来像这样。

//这不是确切的映射，仅用于示例

```
 "yearOfPublish":{
                "type": "integer"
            },
            "author":{
                "type": "object",
                "properties": {
                    "firstName":{
                        "type": "string"
                    },
                    "lastName":{
                        "type": "string"
                    }
                }
            },
            "publisherName":{
                "type": "string"
            }
        } 
```

为了实现上述目的，我们可以创建一个名为 Books 的索引，并且可以有多种类型。

索引：书

类型：科学、艺术

（或者，如果您有更多书籍，您可以创建多种类型，例如技术、医学、历史、语言）

这里要注意的重要一点是架构相似但数据不相同。另一个重要的事情是您存储的总数据。

希望以上内容有助于何时在索引中使用不同类型，如果您有不同的架构，您应该考虑不同的索引。少数据的小索引。大数据的大索引:-)

# google-chrome - 无法读取 master_preferences 文件 - Watir

> ID：14465670
> 
> 赞同：3
> 
> 时间：2013-01-22T18:40:48.857
> 
> 标签：google-chrome, webdriver, watir, watir-webdriver

尝试使用 watirs Web 驱动程序驱动 chrome 时出现此错误.....即工作正常。

```
C:\Users\rallen26346>irb
irb(main):001:0> require "watir-webdriver"
=> true
irb(main):003:0> browser = Watir::Browser.new :chrome
Started ChromeDriver
port=9515
version=26.0.1383.0
log=C:\Users\rallen26346\chromedriver.log
[4636:5120:0122/113039:ERROR:master_preferences.cc(104)] Failed to read master_preferences file at C:\Program Files\Google\Chrome\Application\master_p
references. Falling back to default preferences.
[4636:5120:0122/113039:ERROR:gpu_info_collector_win.cc(91)] Can't retrieve a valid WinSAT assessment.
[4636:5120:0122/113039:ERROR:bluetooth_adapter_win.cc(23)] NOT IMPLEMENTED
=> #<Watir::Browser:0x..fb028c9b0 url="about:blank" title="about:blank"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:14:30.647

试试这个：

```
browser = Watir::Browser.new :chrome 
```

# c# - 属性卡住了一层

> ID：14465674
> 
> 赞同：0
> 
> 时间：2013-01-22T18:40:54.817
> 
> 标签：c#, linq, entity-framework, lambda

我在访问数据或设置数据时对查询没有太大问题，因此我可以将其传递给视图。

这是表达式

```
 var distinctReplies = pd.Project.ProjectDoc
        .SelectMany(i => i.Comment
            .SelectMany(k => k.CommentReply
                .Select(u => u.User)
            ).Distinct()
        ).Select(g => new {FirstName = g.FirstName, LastName = g.LastName, UserID = g.UserID})
        .ToList(); 
```

在这个表达式之后，我想将它与另一个从同一用户模型获取值的表达式连接起来，我想将 distinctReplies 分配给 ViewBag 变量，然后能够循环它并 `foreach (var user in @ViewBag.distinctReplies)`在剃刀视图中执行此操作。

但是，要真正获得我必须做的价值观`distinctReplies.Select(i => i.FirstName)`。不知道如何处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:51:30.570

用这个：

```
@foreach (var reply in (IEnumerable)ViewBag.distinctReplies) 
{
} 
```

您不能枚举 a 的实例`dynamic`。将其转换`IEnumerable`为允许语句。

有关更详尽的解释，请参阅[此问题。](https://stackoverflow.com/questions/2939024/c-sharp-4-0-dynamic-and-foreach-statement)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:13:31.073

我建议创建一些 ViewModel 对象来填充查询结果。能够访问`@foreach`循环内的属性。

**模型**

```
public class UserVM
{
    public int UserID{get; set;}
    public string FirstName {get; set;}
    public string LastName {get; set;}  
} 
```

**更新的查询**

```
 var distinctReplies = ....
                .Select(g => new UserVM {FirstName = g.FirstName, 
                                         LastName = g.LastName, 
                                         UserID = g.UserID}).ToList(); 
```

然后，在视图中，您需要将 cast 添加到`IEnumerable<UserVM>`.

**看法**

```
@foreach (var user in (IEnumerable<UserVM>) ViewBag.distinctReplies) 
```

# javascript - Chrome jQuery AJAX 失败，不是跨域问题

> ID：14465675
> 
> 赞同：8
> 
> 时间：2013-01-22T18:40:57.103
> 
> 标签：javascript, ajax, jquery

我有一些简单的 JS/jQuery 代码来进行 AJAX 调用以获取一些 HTML 并将其推入我页面上的 div 中。这在 Firefox 中运行良好，但在 Chrome 中失败。

在 Chrome 控制台中，我可以看到带有“（失败）”状态文本的 AJAX 请求并输入“待处理”。

我所做的所有搜索都与跨域问题有关。这不适合这里，我在一个网络服务器上运行它，有一个域名，没有附加端口号。

这是我的代码示例（您可以看到我最初尝试使用 .load()，同样的问题）：

```
$('#brochure2012navigation a').click(function(event)
{
    event.preventDefault();

    //$('#brochurePage').load($(this).attr('href'));

    $.ajax({
        url: $(this).attr('href'),
        dataType: 'html',
        success: function(html) {
            $('#brochurePage').html(html);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            console.log(xhr);
            console.log(thrownError);
        },
    });
}); 
```

在 Chrome 的控制台中，记录的 xhr 对象如下所示：

```
Object {readyState: 0, setRequestHeader: function, getAllResponseHeaders: function, getResponseHeader: function, overrideMimeType: function…}
abort: function (a){a=a||"abort",p&&p.abort(a),w(0,a);return this}
always: function (){i.done.apply(i,arguments).fail.apply(i,arguments);return this}
complete: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
done: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
error: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
fail: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
getAllResponseHeaders: function (){return s===2?n:null}
getResponseHeader: function (a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c}
isRejected: function (){return!!i}
isResolved: function (){return!!i}
overrideMimeType: function (a){s||(d.mimeType=a);return this}
pipe: function (a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()}
progress: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
promise: function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}
readyState: 0
responseText: ""
setRequestHeader: function (a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this}
state: function (){return e}
status: 0
statusCode: function (a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this}
statusText: "error"
success: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
then: function (a,b,c){i.done(a).fail(b).progress(c);return this}
__proto__: Object 
```

抱歉，这看起来有点乱，但我认为重要的是 0 的状态。

监控日志，请求没有命中我的服务器。

我真的很难过，我会很感激任何帮助！

干杯，艾尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-24T14:45:05.197

AdBlock Chrome 插件可能会阻止 ajax 调用。

根据 adblock 黑名单上的键，某些 URL 可能会被阻止。在 DevTools Network 选项卡上，此类请求被标记为“失败”，处于“待处理”状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:17:43.743

你的代码看起来很完美，但在你的代码中发现了一些错别字，我添加了一些其他元素

```
 $('#brochure2012navigation a').click(function(event){
    event.preventDefault();
    $.ajax({
       url: $(this).attr('href'),
       dataType: 'html',
       async:false, // <------------------try with adding this
       type:'post', // <------------------try adding this too
       success: function(data) {
         $('#brochurePage').html(data);
       },
       error: function (xhr, ajaxOptions, thrownError) {
         console.log(xhr);
         console.log(thrownError);
       } // <----------------------comma found here
    });
}); 
```

或者你可能会对此感兴趣：

```
 $('#brochure2012navigation a').click(function(event){
    event.preventDefault();
    $.ajax({
       url: $(this).attr('href'), 
       type:'POST',
       success: function(response, status, xhr){ 
             var ct = xhr.getResponseHeader("content-type") || "";
             if (ct.indexOf("html") > -1) {
                $('#brochurePage').html(data);
             }
             if (ct.indexOf("json") > -1) {
                // handle json here
             }  
       },
       error: function (xhr, ajaxOptions, thrownError) {
         console.log(xhr);
         console.log(thrownError);
       }
    });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:43:29.253

我对您的代码做了一些小改动：

```
var url = $(this).attr('href');
$.ajax({
    url: url,
.... 
```

之后，我将您的代码设置为在 jsfiddle 上工作：

[http://jsfiddle.net/kyz69/1/](http://jsfiddle.net/kyz69/1/)

我正在获取 /_display/ 的内容（[http://fiddle.jsshell.net/_display](http://fiddle.jsshell.net/_display)）我正在链接到该内容，因为您没有提供您要加载的网址，这是我唯一的页面可以发现它会返回数据，因为它不是跨域的。

我在 Windows + Google Chrome 版本 24.0.1312.52 m 上测试了代码

您可以测试小提琴并在此处发布结果吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T00:39:37.537

可能是错误函数的右大括号后面的逗号吗？通常，如果有其他对象，您只会使用逗号...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T21:26:28.430

我希望我有足够的声誉来发表评论以询问更多细节，但我没有。所以我会根据经验给出我最好的猜测。

如果是跨域问题，Chrome 会在控制台中以红色记录错误消息。[在这个 Fiddle 中测试](http://jsfiddle.net/3qrfj/)。

我知道可以提供帮助的一种方法是使用嗅探器。幸运的是 Chrome 内置了一个简单的`Chrome Developer Tool`，通过按`Ctrl + Shift + I`，我猜你可能知道这一点，因为你已经复制了控制台输出，但是这次转到`Network`选项卡，确保当你点击触发这个点击的链接时它保持打开状态事件处理程序。

您将在表中看到一条新记录，单击其名称，您可以查看请求和响应标头，甚至呈现响应。希望这会给你更多有用的信息，因为我通常在这里得到我的信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T00:02:00.987

为什么你不试试这个

```
$('#brochurePage').load($(this).attr('href'),function(){
alert('Load was performed.');
}); 
```

祝你好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T12:06:10.967

ajax 或 json 的最后一个属性不以逗号结尾，毫无疑问它在 chrome 和 IE 中失败了，但为什么在 firefox 中运行良好，我很难过:)，试试这个：

```
 $('#brochure2012navigation a').click(function(event)
{
    event.preventDefault();

    //$('#brochurePage').load($(this).attr('href'));

    $.ajax({
        url: $(this).attr('href'),
        dataType: 'html',
        success: function(html) {
            $('#brochurePage').html(html);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            console.log(xhr);
            console.log(thrownError);
        }
    });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-31T22:22:05.660

如果是跨域脚本问题，大多数浏览器实际上不会返回任何有趣的错误。正如您所展示的，我使用过的任何一个都返回“错误”的 StatusText 和 0 的 readyState。您可能认为没有跨域操作发生，因为您实际上是从同一个域调用某些东西，可能是不同的子域或不同的端口（https/non-https）。您可能拥有无法弥补跨域限制的过时版本的 Firefox。您可以通过查看过去的海报所建议的网络请求来验证您的 Chrome，并查找属性：“Origin：null”

如果它确实是一个跨域问题（我认为是），您将需要将以下 PHP 行（或您选择的后端语言中的类似标头）添加到*您所在文件*的顶部在任何 HTML 代码之前*请求。*

```
<?php header("Access-Control-Allow-Origin: example.com"); ?> 
```

如果你使用 jquery，你可能还需要：

```
<?php header("Access-Control-Allow-Headers: x-requested-with"); ?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-01T00:26:28.337

如果您的服务器没有收到任何请求，那么问题一定出在您正在使用的 URL 中。

您是在输入协议和完整 URL 还是只是部分？

如果你硬编码一个链接并使用它会发生什么？（如下）

```
$('#brochure2012navigation a').click(function(event)
{
    event.preventDefault();

    //$('#brochurePage').load($(this).attr('href'));

    $.ajax({
        url: $(this).attr('http://www.google.com'),
        dataType: 'html',
        success: function(html) {
            $('#brochurePage').html(html);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            console.log(xhr);
            console.log(thrownError);
        },
    });
}); 
```

如果我是你，我会首先通过硬编码一个已知目标来确保 $.ajax 真的达到了它的目标。

如果硬编码的目标没有收到任何请求，则问题出在其他地方。

# android - 无线电流安卓

> ID：14465678
> 
> 赞同：0
> 
> 时间：2013-01-22T18:41:04.740
> 
> 标签：android, streaming, radio

嗨，我想在我的应用程序中实现收音机……我写了这段代码，它在模拟器 YouWave 中工作，但我在智能手机和另一台平板电脑上不工作，我不知道为什么..你能帮帮我吗?

这是收音机的代码：

```
public class radio extends Activity {
    MediaPlayer media;
    Button buttonplay;
    Button buttonStopRecord;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.radio);

                buttonStopRecord = (Button) findViewById(R.id.Stop);
                buttonStopRecord.getBackground().setAlpha(150);
                buttonStopRecord.setEnabled(false);

                buttonStopRecord.setOnClickListener(new OnClickListener()
                  {

                    @Override
                            public void onClick(View view) {
                         if ( media.isPlaying() ) {
                        media.stop();
                    }
                     }
                  });

                buttonplay = (Button) findViewById(R.id.play);
                buttonplay.getBackground().setAlpha(150);

                buttonplay.setOnClickListener(new OnClickListener()
                  {

                    @Override
                            public void onClick(View view) {
                        try
                       {
                             media = new MediaPlayer();
                            media.setAudioStreamType(AudioManager.USE_DEFAULT_STREAM_TYPE);
                            media.setDataSource("http://indiespectrum.com:9000");
                            media.prepare();
                            media.start();
                          if ( media.isPlaying()) {
                                buttonplay.setEnabled(false);

                                buttonStopRecord.setEnabled(true);
                        }
                        }
                        catch(Exception e)
                        {
                            //Getting Exception
                        }
                    }
                  });

                Button accueil=(Button)findViewById(R.id.accueilr);
              accueil.getBackground().setAlpha(200);
              accueil.getBackground().setAlpha(150);
                accueil.setOnClickListener(new OnClickListener()
                {

                    @Override
                            public void onClick(View view) {
                    try{    
                        if ( media.isPlaying() ) {
                            media.stop();
                        }
                    }catch (Exception e)
                    {
                        Intent i=new Intent(radio.this,main.class);
                        startActivity(i);   
                    }
                        Intent i=new Intent(radio.this,main.class);
                        startActivity(i);           

                    }
                });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T22:15:27.847

据我所知，这段代码应该适用于 Api 高于 8 的每台设备。

```
 media = new MediaPlayer(); 
media.setAudioStreamType(AudioManager.STREAM_MUSIC); 
media.setDataSource("http://indiespectrum.com:9000"); 
media.prepareAsync(); 
media.seOnPreparedListener(this); 
```

在 OnPrepared 方法里面放`media.start()`。这对我有用。

# css - @font-face 未在 Chrome (Windows) 中显示

> ID：14465679
> 
> 赞同：-1
> 
> 时间：2013-01-22T18:41:08.157
> 
> 标签：css, google-chrome, font-face

我在我的页面上使用了三种不同的字体，它们都在不同的浏览器中出色地显示，但其中一种在 Chrome 中不起作用（仅限 Windows。它适用于 Chrome MAC OS X&Linux）。首先，出现错误“资源解释为字体但使用 MIME 类型应用程序/八位字节流传输：”我通过添加 .htaccess 以下代码来修复此错误：

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
AddType application/x-font-woff .woff 
```

但我的字体没有显示。我的 CSS 和字体：

```
@font-face{
font-family:'PopularScript';
src:url('http://test.dubrovka.dn.ua/stc/eot/PopularScript.eot');
src:url('http://test.dubrovka.dn.ua/stc/eot/PopularScript.eot?#iefix') format('embedded-opentype'),
    url('http://test.dubrovka.dn.ua/stc/wof/PopularScript.woff') format('woff'),
    url('http://test.dubrovka.dn.ua/stc/ttf/PopularScript.ttf') format('truetype'),
    url('http://test.dubrovka.dn.ua/stc/svg/PopularScript.svg#PopularScript') format('svg');
font-weight:normal;
font-style:normal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T23:34:11.773

问题解决了。Font Squirrel 破坏了我的字体，所以我使用了[fontface.codeandmore.com](http://fontface.codeandmore.com) 服务，他的@font-face 套件完美地显示在包括 Chrome (Windows) 在内的任何浏览器上。感谢大家的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:44:42.297

跨浏览器和平台处理字体的方式有很多怪癖。我建议使用[Font Squirrel](http://www.fontsquirrel.com/)等地方的默认字体并查看它们的编码。如果需要，可以模仿它，但它们创建了很好的 CSS 规则集，允许像样的跨浏览器字体显示。

# performance - 在 MongoDB 中编写繁重的 dml 操作

> ID：14465680
> 
> 赞同：0
> 
> 时间：2013-01-22T18:41:10.077
> 
> 标签：performance, mongodb, indexing, dml

我在 Linux 上运行 MongoDB (2.2)，我有几个问题。

我有包含许多字段 + 子字段和该字段的一个索引的架构。

1.  更新/删除索引的速度有多快——我每秒大约有 3 次更新/删除等。
2.  是否有规则，例如在 10,000 次更新后您必须压缩或重建索引？
3.  字段的更改是否立即在索引中可见？如果没有，此更新/删除是否有延迟或临时表？

在此先感谢 - 布兰登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:37:21.060

1.  索引在插入/更新/删除时更新。关于性能，最好的答案就是测试它。
2.  不是我会知道的。如果您需要定期进行压缩或修复，您也应该进行复制（但如果资源允许，您可以在同一主机上进行复制）
3.  是的（嗯，在同一个数据库连接上 - 在其他数据库连接上可能需要更多时间。但如果你遇到这个问题，我不是回答你的合适人选；）

话虽如此，我强烈建议您查看[http://www.10gen.com/presentations](http://www.10gen.com/presentations)上的一些演示文稿- 抱歉，我无法指出特别有趣和有用的演示文稿，我建议您浏览并选择您认为有趣的那些。

请注意，MongoDB 做的事情非常不同，并且对于没有准备的人有很多陷阱。然而，一旦你知道如何使用它，它就是一个很棒的数据库。

# oracle - Oracle PL/SQL 块使用硬编码值成功但没有变量

> ID：14465682
> 
> 赞同：1
> 
> 时间：2013-01-22T18:41:15.317
> 
> 标签：oracle, plsql

以下 PL/SQL 按预期成功执行：

```
declare
    myCount number;
begin
    select count(*)
    into myCount
    from myTable
    where id = 1;
end; 
```

但是，以下内容不会，而是会引发此错误：

> ORA-01422: 精确提取返回的行数多于请求的行数

```
declare
    myCount number;
    myId number := 1;
begin
    select count(*)
    into myCount
    from myTable
    where id = myId;
end; 
```

从概念上讲，我理解错误的含义，但我不知道它如何适用于我的情况。我所做的只是将硬编码的值移动到`declare`块中的一个变量中。`select`当它是完全相同的数字时，为什么会影响结果？

版本是`Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:53:20.183

你的系统中发生了一些你没有在这个问题中重现的事情。`myTable`如果我在本地系统中创建一个表，您的代码运行没有错误

```
SQL> create table myTable( id number );

Table created.

SQL> declare
  2      myCount number;
  3      myId number := 1;
  4  begin
  5      select count(*)
  6      into myCount
  7      from myTable
  8      where id = myId;
  9  end;
 10  /

PL/SQL procedure successfully completed. 
```

您发布的代码与您实际运行的代码之间是否可能存在一些差异？

# java - Java：数据结构的内置实现是否效率低下？

> ID：14465684
> 
> 赞同：0
> 
> 时间：2013-01-22T18:41:18.030
> 
> 标签：java, data-structures

我喜欢使用 Java（与 C 相比）的一个重要原因是有很多可用的内置数据结构（如 Collections API）。但是，这些数据结构的实现是否次优？为了获得更好的性能，我是否会更好地编写自己的实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T18:50:57.323

在解决具体的性能问题之前，我不会浪费任何时间重新实现 Java 集合库中的任何类。内置类已经过数千人的测试。它们被证明是有效的，并且对于大多数一般用例来说都是高性能的。我发现大多数时候当我发现 Collection 类的性能问题时，这是因为有人为问题选择了错误的数据结构，而不是该数据结构的错误实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:04:12.750

内置实现非常快（它们在构建时考虑到了性能）并且对于绝大多数应用程序来说足够快。

对于您的情况，它是否足够快取决于您的应用程序和硬件，例如，如果您有一个快速的 CPU，但内存受到限制，反之亦然，这可能会产生巨大的影响。

如果您正在开发一些*需要*极高性能的东西，我建议您首先创建一个小测试项目，该项目具有您需要支持的数据负载和处理级别，以让您自己更有信心它会足够快地运行您的目标硬件。如果不是，您可以调整算法、购买更好的硬件、使用缓存等，或者切换到“更接近金属”的语言。

注意不要落入优化一切的陷阱——通常它只是需要优化的应用程序的一小部分。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-22T19:04:06.433

JCF最大的优势在于灵活性不一定是性能；它具有出色的设计，可让您轻松地从一个系列更改为另一个系列。它具有使它们成为线程安全、不可变等的实用程序类，或者您可以实现自己的自定义集合（通过实现接口并将其与最近的现有实现组合）：

```
public MyList<E> implements List<E> {
    private List<E> holdingList = new ArrayList<E>();

    @Override
    public boolean add(E e) {
        //your custom needs
    }
    //delegate non custom ones to holdingList    
} 
```

如果您真的被性能问题所困扰，那么您可能应该使用良好的旧数组，但在大多数情况下，这并不一定。

但是，您应该对 JCF 的内部结构有所了解，以便从中获得最佳性能；从某种角度来看，它们可能会受到批评，因为它们往往会消耗大量内存。

一些基本的事情：很高兴知道使用的排序是合并排序，它对就地排序进行排序，但比快速排序慢一点。您应该预测要使用的集合的大小，并将其作为值传递给构造函数，而不是总是依赖默认值。另一个重要的事情是选择合适的收藏；当 List 可以使用时不要使用 Map，因为它会占用更多内存。您还应该确保不要保留无用的空集合，因为它们也占用内存。[您可以在此处](http://www.ibm.com/developerworks/java/library/j-codetoheap/index.html)找到有关集合和内存使用的精彩文章。

# python - 类型检查/定义类型检查

> ID：14465686
> 
> 赞同：0
> 
> 时间：2013-01-22T18:41:25.657
> 
> 标签：python, types, ctypes

请原谅我的拙劣标题，我真的想不出一个合适的标题。

这是我的问题。假设我得到了一个字符串列表：

```
['2010.01.01',
'1b',
'`abc'
'12:20:33.000'] 
```

而且我想做一个“类型检查”，以便给定第一个字符串，它返回类型日期，第二个布尔值，第三个一个符号，一次第四个......等等。返回的值可以是一个字符串或任何东西，因为所有我想做的是转换正确的ctypes。

有什么办法吗？

ps：我的python是2.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:00:19.793

```
>>> str = ['2010.01.01',
... '1b',
... '`abc'
... '12:20:33.000']
>>> [type(x) for x in str]
[<type 'str'>, <type 'str'>, <type 'str'>] 
```

假设您使用 eval 来确定此列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T18:59:16.677

如果您完全确定您可以信任内容 - 例如，它不是来自可以以某种方式将代码潜入列表的用户 - 您可以将列表映射到**eval**，它将捕获像数字这样的本机类型。但是，没有简单的方法可以知道这些字符串的全部含义——例如，如果您尝试升级 '2010.01.01'，python 会认为您正在尝试解析一个数字，然后由于额外的小数而失败。

所以你可以尝试一个两阶段的策略：首先使用 eval 将列表转换为字符串与数字：

```
def try_cast (input_string):
    try:
        val = eval(input_string)
        val_type = type(val)
        return val, val_type
    except:
        return input_string, type('')

cast_list = map (try_cast, original_list) 
```

这将给出一个元组列表，其中第二项是类型，第一项是转换后的项。对于更专业的事情，例如日期，您需要对第一次传递后剩余的字符串使用相同的策略，使用 try/except 块尝试使用**time.strptime()**将它们转换为日期。您需要弄清楚预期的时间格式并为每个格式生成一个解析表达式（您可以查看 python 文档或类似[http://www.tutorialspoint.com/python/time_strptime.htm](http://www.tutorialspoint.com/python/time_strptime.htm)之类的内容）尝试所有选项并查看哪些选项正确转换 - 如果一个有效，则值为日期；如果没有，它只是一个字符串。

# autocomplete - 是否可以让 Windows 自动完成自定义命令？

> ID：14465687
> 
> 赞同：11
> 
> 时间：2013-01-22T18:41:27.493
> 
> 标签：autocomplete, console, customization

我正在运行 Console2，我相信它只是 windows cmd 的一个接口

我有一个自定义批处理文件，它为我完成了大部分繁琐的工作，但现在里面有很多命令。有没有办法让我在 Windows 命令提示符下获得点击自动完成功能？

例如：我的脚本名为 rob.bat，它接受不同数量的参数

它想输入 rob set{Tab} 然后让它循环

setup_envvars setup_userprefs setup_whateverothersetupscriptsIhave

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-22T14:50:08.553

Console2 没有针对制表符补全的特殊规定，而是依赖于其中运行的程序来提供此类功能。把 Console2 想象成一个运行隐藏在某个地方的控制台程序的东西，它会定期轮询隐藏的窗口以进行更改，并将所有输入转发到该窗口；从本质上讲，这就是正在发生的事情。

请注意，Console2 对`cmd`. 您可以在其中运行任何 shell。至于自定义选项卡完成，`cmd`没有提供任何此类功能。您可以通过安装[clink](https://github.com/mridgers/clink)来改变这一点，它具有 Lua 代码的扩展点。另一种选择是 PowerShell，它具有开箱即用的可自定义选项卡完成，可以通过将程序包装在[提供必要参数的函数中](https://foxdeploy.com/2017/01/13/adding-tab-completion-to-your-powershell-functions/)，或者通过编写自定义`TabExpansion`或`TabExpansion2`函数。

# xcode - 你如何在 Xcode 中生成 Info.plist，因为它无法找到？

> ID：14465690
> 
> 赞同：1
> 
> 时间：2013-01-22T18:41:45.150
> 
> 标签：xcode, macos

您如何在 Xcode 中生成 Info.plist，因为我在构建项目时收到以下错误？

错误：无法从“../dists/xcode/Info.plist”读取数据：文件“Info.plist”无法打开，因为没有这样的文件。

我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:49:11.497

听起来您的 Info.plist 文件只是丢失了。

搜索您的项目以查看是否有名称为“ `Info.plist`”的文件，或者名称中是否包含“ `Info.plist`”（例如“ `TopNotchCoderProjectInfo.plist`”）。

一旦你找到它，你可以重置你的项目设置以使用正确的 Info.plist 文件——这个特定文件的路径可以输入到项目设置中：

![可以在此处输入 Plist 设置](../Images/4dfec3cd4b4978dbbcc12864471710c1.png)

另外，确保 plist 文件存在于项目的文件和文件夹列表中（并且它不是“红色”，这是 Xcode 告诉您它丢失的方式）。

# css - 每个标题等级的不同样式

> ID：14465691
> 
> 赞同：1
> 
> 时间：2013-01-22T18:41:51.960
> 
> 标签：css, html

HTML5 的新大纲结构使用户代理在您向下浏览部分时使用相同的标签以不同的大小呈现标题。有没有办法控制这个，最好是通过 CSS 选择器？

我喜欢使用“h1 for everything”的方法，因为我可以在不重新标记标题的情况下将部分移入和移出大纲，但我想不出一种方法来准确控制用户代理为每个部分使用的样式等级。

理想情况下，我可以说类似`h1:level1{ font-size: 18pt }`，这只会更改部分标题并`h1:level2`选择子部分标题。诚然，我可以很容易地使用`section h1`and `section section h1`，但我想知道是否有比重复“部分”更清晰的东西，就像我的大纲一样深。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:44:24.423

将您的字体大小设置为`em`s，然后将您`section`的字体大小设置为`1em`.

例如：

```
section {
    font-size: .9em;
}

h1 {
    font-size: 1.8em;
} 
```

这是小提琴：http: [//jsfiddle.net/LLhFc/](http://jsfiddle.net/LLhFc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:46:29.497

等级是标签名称的一部分。没有独立于标签中数字的等级概念。`<h1>`无论它们在文档中的什么位置，两个标签都具有相同的排名。

> 这些元素的排名**由其名称中的数字**给出。- [http://www.w3.org/TR/html5/sections.html#rank](http://www.w3.org/TR/html5/sections.html#rank)

如果您想对所有内容使用 h1 并根据元素在结构中的嵌套程度来设置不同的样式，那么您可以做的最好的事情就是根据父元素设置不同的样式。

例如：

```
<section class"rank1">
   <h1>Heading of Rank 1</h1>
</section>

<section class"rank2">
   <h1>Heading of Rank 2</h1>
</section> 
```

并像这样使用 CSS：

```
.rank1 h1 {
// make it big
}

.rank2 h1 {
// make it smaller
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T18:59:43.413

最简单的方法？

```
h1 { font-size: 2em }

section h1 { font-size: 1.8em }

section section h1 { font-size: 1.6em }

section section section h1 { font-size: 1.4em } 
```

如果您也需要它来处理文章（或部分+文章的任何组合），那么您还需要添加这些组合（这可能会产生*非常*长的选择器）。

如果您对 CSS 预处理器持开放态度，您可以节省大量的重新输入。这个特殊的 mixin 将涵盖其他标题排名的情况，而不仅仅是 h1。

Sass + 指南针：

```
$gh-selectors: 'section, article' !default;
@mixin graduated-headlines($hn: 1, $sizes: 2em 1.8em 1.4em 1.2em 1em .8em) {
    $sel: $gh-selectors;
    @for $i from 1 through length($sizes) {
        #{$sel} {
            @for $j from 1 through $hn {
                @if $i + $j - 1 <= length($sizes) {
                    h#{$j} {
                        font-size: nth($sizes, $i + $j - 1);
                    }
                }
            }
        }
        $sel: nest($sel, $gh-selectors);
    }
} 
```

# android - 启动计算器，返回启动 calc 的活动

> ID：14465702
> 
> 赞同：1
> 
> 时间：2013-01-22T18:42:13.183
> 
> 标签：android, android-intent, flags

我正在从活动启动设备的标准计算器，但如果我关闭计算器，它不会返回到启动计算器的活动。我必须设置某个 FLAG 吗？

代码：

```
public void LaunchDeviceCalculator(){
        ArrayList<HashMap<String,Object>> packages =new ArrayList<HashMap<String,Object>>();
        final PackageManager pm = getPackageManager();
        List<PackageInfo> packs = pm.getInstalledPackages(0);  
        for (PackageInfo pi : packs) {
        if( pi.packageName.toString().toLowerCase().contains("calcul")){
            HashMap<String, Object> map = new HashMap<String, Object>();
            map.put("appName", pi.applicationInfo.loadLabel(pm));
            map.put("packageName", pi.packageName);
            packages.add(map);
    }
        }

        if(packages.size()>=1){
            String packageName = (String) packages.get(0).get("packageName");
            Intent i = pm.getLaunchIntentForPackage(packageName);

            if (i != null)
              startActivity(i);
            } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:41:45.163

对于它的价值，第三方计算器可以处理这种情况： [http ://www.efalk.org/RpnCalcFinancial/](http://www.efalk.org/RpnCalcFinancial/)

搜索开发人员说明。

开发人员列出了将启动应用程序的 Intent 以及返回的 Intent 和 extras。

据我记得，它是免费的。

它确实使用反向波兰表示法又名 RPN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T11:31:51.147

启动计算器可以通过以下代码完成。请查看此链接了解更多详情：[Android Intents For App Integration（调用计算器、播放视频、打开编辑器）](http://www.intertech.com/Blog/android-intents-for-app-integration-call-a-calculator-play-video-open-an-editor/)

我还没有尝试过，但代码看起来很简单很好。让我知道这个是否奏效。

```
// activity name and package for stock calculator    
    private static final String CALCULATOR_PACKAGE_NAME = "com.android.calculator2";    
    private static final String CALCULATOR_CLASS_NAME = "com.android.calculator2.Calculator";
    public void launchCalculator() {   
         Intent intent = new Intent();   
         intent.setAction(Intent.ACTION_MAIN);   
         intent.addCategory(Intent.CATEGORY_LAUNCHER);  
         intent.setComponent(new Component Name(CALCULATOR_PACKAGE_NAME, CALCULATOR_CLASS_NAME));   
    try {   
         this.start Activity(intent); 
    } catch (ActivityNotFoundException noSuchActivity) {  
         // handle exception where calculator intent filter is not registered  
    }  
} 
```

# c# - 我可以禁用 AutoMapper 引用缓存吗？

> ID：14465704
> 
> 赞同：10
> 
> 时间：2013-01-22T18:42:15.233
> 
> 标签：c#, .net, automapper, object-reference

我相信 AutoMapper 在将对象列表从一种类型映射到另一种类型时使用缓存。看看下面的代码：

```
namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            Mapper.CreateMap<Source, Destination>()
                       .ForMember(dest => dest.SomeOtherNumber, opt => opt.Ignore());

            Mapper.AssertConfigurationIsValid();

            var sourceList = new List<Source>();

            var s1 = new Source {SomeNumber = 10};
            var s2 = new Source {SomeNumber = 69};

            sourceList.Add(s1);
            sourceList.Add(s1);
            sourceList.Add(s1);
            sourceList.Add(s2);

            var destList = Mapper.Map<List<Source>, List<Destination>>(sourceList);

            destList[0].SomeOtherNumber = 100;

            destList.ForEach(x => Console.WriteLine("SomeNumber: {0}, SomeOtherNumber: {1}", x.SomeNumber, x.SomeOtherNumber));
            Console.ReadLine();
        }
    }

    public class Source
    {
        public int SomeNumber { get; set; }
    }

    public class Destination
    {
        public int SomeNumber { get; set; }
        public int SomeOtherNumber { get; set; }
    }

} 
```

代码的输出表明，即使我只设置了 destList 列表中第一个对象的 SomeOtherNumber，前三个项目也具有相同的属性值，因为它们引用了相同的对象引用。我想知道我是否可以禁用此行为，因此即使我在源列表中有重复的引用，我也不会在目标列表中有重复的引用。这有意义吗？

这是输出：

```
SomeNumber: 10, SomeOtherNumber: 100
SomeNumber: 10, SomeOtherNumber: 100
SomeNumber: 10, SomeOtherNumber: 100
SomeNumber: 69, SomeOtherNumber: 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T20:08:00.867

我想说**这暂时不能用 AutoMapper 来完成**。实例缓存内置相当深，目前不能轻易关闭。尽管您的用例很奇怪......在列表中多次使用相同的源对象但您仍然想要不同的目标对象在我看来是非常不寻常的。

但它可以通过一个非常糟糕的 hack 来解决，因为它将全局关闭实例缓存并依赖于 AutoMapper 的实现细节，因此请谨慎使用。如果您仍然想尝试一下，**下面提到的解决方案不适用于 Automapper 2.2.0** [，因为该错误](https://github.com/AutoMapper/AutoMapper/issues/264)仅在开发分支中修复，因此您需要从源代码构建 AutoMapper 或等待下一个版本。

但是这里有细节

实例缓存由`TypeMapObjectMapperRegistry.CacheMappingStrategy` [[source]](https://github.com/AutoMapper/AutoMapper/blob/master/src/AutoMapper/Mappers/TypeMapObjectMapperRegistry.cs)处理，与所有其他`ITypeMapObjectMapper`实现一样，它是一个私有类。

然而`TypeMapObjectMapperRegistry.AllMappers`，应该返回所有的字段是一个可以被覆盖`ITypeMapObjectMapper`的公共：`Func`

**因此，在第一次使用 Mapper 类之前**添加此代码：

```
var baseMappers = TypeMapObjectMapperRegistry.AllMappers();
TypeMapObjectMapperRegistry.AllMappers = () => 
    baseMappers.Where(m => m.GetType().Name != "CacheMappingStrategy").ToArray();

Mapper.CreateMap<Source, Destination>(); 
```

# java - 当存在 AtomicReferenceArray 时，并发列表和集合的意义何在？

> ID：14465709
> 
> 赞同：3
> 
> 时间：2013-01-22T18:42:26.553
> 
> 标签：java, performance, concurrency, atomic

据我了解，[AtomicReferenceArray](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicReferenceArray.html)类允许以原子方式更新各个元素。这将使集合线程安全。并发集合采用各种算法来允许集合是线程安全的，但也是非阻塞的。我了解某些集合类提供了方便的方法，例如`add(...)`，或某些功能，例如排队。但是忽略这一点，只关注添加和检索元素，是否有理由使用其中一个并发集合而不是 AtomicReferenceArray？

另外，性能怎么样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T18:45:05.967

> 是否有理由使用其中一个并发集合而不是 AtomicReferenceArray？

是的，如果您需要动态大小的集合。允许您以原子方式获取和设置数组中的`AtomicReferenceArray`元素，但不能增加数组的大小。

两个线程*可以*`AtomicReferenceArray`在with和其他方法中可靠地更改相同的元素`compareAndSet(...)`，但它们不能像集合一样向数组添加数据。例如，如果每个线程都有一个唯一的 ID，并且它们正在更新数组中的个人值，则使用 an`AtomicReferenceArray`很有用。但是，如果您有两个制作人想要将工作添加到工作列表中，这将不起作用。

最后，它的复杂性`AtomicReferenceArray`远低于真正的并发集合。并发集合允许迭代器、删除、添加等安全地同时发生。该类`AtomicReferenceArray`允许测试和设置自旋循环和其他功能，但不能很好地替代完整的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:47:11.127

并发非阻塞收集算法在多核机器上的性能将优于阻塞算法几个数量级。这是更喜欢并发算法的最重要原因。

查看[LMAX](http://martinfowler.com/articles/lmax.html)架构，了解更多关于非阻塞算法显着性能提升的信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T23:12:32.813

并发集合和 AtomicReferenceArrays 几乎没有共同之处。不知道你想如何比较它们。它们有不同的用途和特性。

# c - gets() 在 while 循环中只接受一次输入

> ID：14465713
> 
> 赞同：3
> 
> 时间：2013-01-22T18:42:32.270
> 
> 标签：c, gets

我是 C 新手，正在做一些练习，但在 while 循环中遇到了 get() 问题。在搜索中，我相信它可能与 \n 字符有关，但我希望有人能够更彻底地解释这里发生的事情：

这个循环只会运行一次——它会再次打印“输入姓氏”到屏幕上，然后在 gets() 有机会第二次接受任何输入之前退出循环：

```
while (employee_num <= 10)
{
    printf("Enter last name ");
    gets(employee[employee_num].last_name);
    if(strlen(employee[employee_num].last_name) == 0)
        break;
    printf("Enter first name ");
    gets(employee[employee_num].first_name);
    printf("Enter title ");
    gets(employee[employee_num].title);
    printf("Enter salary ");
    scanf("%d", &employee[employee_num].salary);        
    ++employee_num;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:48:50.870

`\n`读取薪水后，您将在输入缓冲区中有一个换行符 ( )。在第二次迭代中，它被选为姓氏。`getchar()`您可以通过在最后一次 scanf 之后添加 a 来忽略它：

```
while (employee_num <= 10) {
    ...
    printf("Enter salary ");
    scanf("%d", &employee[employee_num].salary);        
    ++employee_num;
    getchar();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T18:51:24.467

参考skjaidev的回答，

使用`gets()`，如果找到**换行符**（`\n`），则不会将其复制到字符串中，这就是您出现问题的原因。

此外，请注意，gets 与 完全不同`fgets`：gets 不仅`stdin`用作源，而且它不包括`newline`结果字符串中的结束字符，并且不允许为 str 指定最大大小（这可能导致缓冲区溢出）。

在程序中使用被认为是一种**不好**的做法`gets()`

# mysql - mysql IN子句不使用可能的键

> ID：14465716
> 
> 赞同：1
> 
> 时间：2013-01-22T18:42:41.380
> 
> 标签：mysql, query-optimization, sql-execution-plan

我有一个相当简单的 mysql 查询，其中包含一些内部联接，然后是 where 子句。我已经为连接中使用的所有列以及主键创建了索引。我还有一个包含 IN 运算符的 where 子句。当只有 5 个或更少的 id 被传递到 IN 子句时，查询优化器使用我的索引之一在合理的时间内运行查询。当我使用解释时，我看到类型是范围，键是 PRIMARY。我的问题是，如果我在 IN 子句中使用超过 5 个 id，优化器会忽略所有可用索引，并且查询运行速度非常慢。当我使用解释时，我看到类型是 ALL，键是 NULL。

有人可以说明这里发生的事情以及我如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:59:42.077

在检查我遇到的类似问题时发现了这一点。认为我的发现可能会在将来帮助其他有类似问题的人。

我有一个大约 30 行的 MyISAM 表（包含类似单词的常见拼写错误，用于搜索，其中可能的原始拼写错误和替代单词都可能是有效的拼写，表格的大小会慢慢增加）。然而，对我来说，截止日期是如果 IN 子句中有 4 个项目，则使用索引，但是当 IN 子句中有 5 个项目时，索引将被忽略（注意我没有尝试过替代词，所以 IN 子句中的实际单个项目可能是一个因素）。与 OP 非常相似，但字数不同。

*使用索引*不起作用，索引仍然会被忽略。*强制索引*确实有效，尽管我更愿意避免指定索引（以防有人删除索引）。

对于一些测试，我用额外的 1000 个随机唯一行填充了表，即使 IN 子句中有 80 个项目，查询也会使用相关索引。

因此，MySQL 似乎根据 IN 子句中的项目数与表中的行数（可能还有其他一些因素在起作用）来决定是否使用索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:59:24.623

无论表上的“主键”索引如何优化 JOIN，您还应该有一个基于您应用 WHERE 的通用标准的索引。您的查询列需要更多信息，但您的 WHERE 条件也应该有一个索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:43:27.103

您也可以尝试使用 Mysql 索引提示。它允许您指定在查询执行期间应使用哪个索引。

例子：

```
 SELECT * FROM table1 USE INDEX (col1_index,col2_index)
  WHERE col1=1 AND col2=2 AND col3=3; 
```

-

```
SELECT * FROM table1 IGNORE INDEX (col3_index)
  WHERE col1=1 AND col2=2 AND col3=3; 
```

更多信息在这里： [Mysql 索引提示](http://dev.mysql.com/doc/refman/5.0/en/index-hints.html)

# ios - 在自定义 tableviewcell 中更改 UIImage

> ID：14465719
> 
> 赞同：0
> 
> 时间：2013-01-22T18:42:48.677
> 
> 标签：ios, objective-c, uitableview

我有一个表格视图，它由包含图像视图的自定义表格视图单元格组成。在`cellForRowAtIndexPath`我设置每个单元格的图像。我希望在选择单元格时更改图像，所以在`didSelectRowAtIndexPath`我获取单元格并更改图像时，没有问题。但是，当我滚动表格（阅读：表格重新加载单元格）时，新图像不再存在。此外，当不再选择单元格时，我希望图像切换回原始图像。

我尝试过以下操作`cellForRowAtIndexPath`：

```
if(cell.isSelected){
cell.imageview.image = [UIImage ImageNamed: @"selected.png"];
}
else
cell.imageview.image = [UIImage ImageNamed: @"not selected.png"]; 
```

我也尝试过使用 BOOL 值`cell.highlighted`或`cell.selected`无济于事。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:49:17.807

尝试使用类型的类`selectedCellIndexPath`变量`NSIndexPath`。在`didSelectRow...`你设置它的价值，并在`cellForRow...`你写：

```
if([selectedCellIndexPath isEqual:indexPath]){
    cell.imageview.image = [UIImage ImageNamed: @"selected.png"];
} else {
    cell.imageview.image = [UIImage ImageNamed: @"not selected.png"];
} 
```

**编辑：**

或者你可以简单地写：

```
if([indexPath isEqual:[tableView indexPathForSelectedCell]]){
    cell.imageview.image = [UIImage ImageNamed: @"selected.png"];
} else {
    cell.imageview.image = [UIImage ImageNamed: @"not selected.png"];
} 
```

但第一个解决方案效率更高一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:00:53.480

如果您有一个带有图像名称的数组，那么最简单的方法是更改​​数组中选定索引处的名称并重新加载表......像这样：

```
myImageArray = [[NSMutableArray alloc] init];
[myImageArray addObject:@"name1.jpg"];
[myImageArray addObject:@"name2.jpg"];
// etc.. 
```

而在 cellForRowAtIndexPath 方法中：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
}

[cell.imageView setImage:[UIImage imageNamed:[myImageArray objecAtIndex:indexPath.row]]];

} 
```

在 didSelectRowAtIndexPath 中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

[myImageArray setObject:@"newName.jpg" atIndexedSubscript:indexPath.row];
[tableView reloadData];

} 
```

# maven-2 - maven，通过命令行客户端浏览中央存储库

> ID：14465721
> 
> 赞同：11
> 
> 时间：2013-01-22T18:42:59.127
> 
> 标签：maven-2

是否可以通过常规 mvn 命令行客户端浏览中央存储库，并可能执行特定搜索？

例如：我想获取在其工件 ID 中具有“log4j”的所有工件的列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-04T17:48:58.927

我编写了一个小 Groovy 脚本来执行此操作：

```
import groovyx.net.http.URIBuilder
import groovy.json.JsonSlurper

class Fun {
    public static void main(String[] args) {
        def uri = new URIBuilder("http://search.maven.org/solrsearch/select")
        uri.addQueryParam 'rows', 20
        uri.addQueryParam 'wt', 'json'
        uri.addQueryParam 'q', args[0]

        def text = uri.toURL().getText()

        def json = new JsonSlurper()

        def result = json.parseText( text )

        result.response.docs.each { doc ->
            println "$doc.id:$doc.latestVersion"
        }
    }
} 
```

这是一个做同样事情的 Ruby 脚本（使用`httparty`gem）：

```
require 'httparty'

query = ARGV[0]

class MavenCentral
    include HTTParty
    base_uri 'search.maven.org'

    def initialize(query, rows=20)
        @options = { query: {rows: rows, wt: 'json', q: query} }
    end 

    def artifacts
       self.class.get('/solrsearch/select', @options)
    end 
end

maven_central = MavenCentral.new(query)
maven_central.artifacts['response']['docs'].each do |doc|
    puts "#{doc['id']}:#{doc['latestVersion']}"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-24T04:48:09.220

为此有一个 SBT 插件：[sbt-search-maven-plugin](https://github.com/blstream/sbt-search-maven-plugin)

```
$ sbt "searchMaven log4j"
[info] Loading global plugins from ~/.sbt/0.13/plugins
[info] Set current project to foo (in build file:~/projects/)
[info] Results for log4j:
[info] "com.jkoolcloud.tnt4j.logger"      % "log4j"                % "0.1"
[info] "org.apache.logging.log4j"         % "log4j"                % "2.6.1"
[info] "org.darkphoenixs"                 % "log4j"                % "1.2.17"
[info] "log4j"                            % "log4j"                % "1.2.17"
[info] "de.huxhorn.lilith"                % "log4j"                % "0.9.41"
[info] "org.mod4j.org.eclipse.xtext"      % "log4j"                % "1.2.15"
[info] "org.apache.logging.log4j"         % "log4j-bom"            % "2.6.1"
[info] "org.apache.logging.log4j.samples" % "log4j-samples"        % "2.0.1"
[info] "org.apache.logging.log4j.osgi"    % "log4j-osgi"           % "2.0-rc1"
[info] "ro.fortsoft.log2j"                % "log2j-parent"         % "0.4"
[info] "ant"                              % "ant-apache-log4j"     % "1.6.5"
[info] "ant"                              % "ant-jakarta-log4j"    % "1.6.1"
[info] "plexus"                           % "plexus-log4j-logging" % "1.0"
[info] "org.apache.logging.log4j"         % "log4j-liquibase"      % "2.6.1"
[info] "org.apache.logging.log4j"         % "log4j-jul"            % "2.6.1"
[info] "org.apache.logging.log4j"         % "log4j-iostreams"      % "2.6.1"
[info] "org.apache.logging.log4j"         % "log4j-nosql"          % "2.6.1"
[info] "org.apache.logging.log4j"         % "log4j-jmx-gui"        % "2.6.1"
[info] "org.apache.logging.log4j"         % "log4j-taglib"         % "2.6.1"
[info] "org.apache.logging.log4j"         % "log4j-web"            % "2.6.1"
[success] Total time: 1 s, completed 24/06/2016 2:47:24 PM 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-18T18:23:38.400

```
mvn -q com.jarcasting:search-maven-plugin:search -Dq="com google guava" 
```

[搜索 Maven 插件](https://jarcasting.com/artifacts/com.jarcasting/search-maven-plugin/)

# c# - 哪种编组方法更好？

> ID：14465722
> 
> 赞同：0
> 
> 时间：2013-01-22T18:43:00.443
> 
> 标签：c#, bytearray, structure, marshalling

我找到了两种转换`byte[]`为结构的方法。但我不知道这两种方法有什么区别吗？谁能知道哪个更好（性能，...）？

**#1：**

```
public static T ByteArrayToStructure<T>(byte[] buffer)
{
    int length = buffer.Length;
    IntPtr i = Marshal.AllocHGlobal(length);
    Marshal.Copy(buffer, 0, i, length);
    T result = (T)Marshal.PtrToStructure(i, typeof(T));
    Marshal.FreeHGlobal(i);
    return result;
} 
```

**#2：**

```
public static T ByteArrayToStructure<T>(byte[] buffer)
{
    GCHandle handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
    T result = (T)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(T));
    handle.Free();
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:04:57.970

我使用以下代码为您做了一个基准测试：

```
const int ILITERATIONS = 10000000;

const long testValue = 8616519696198198198;
byte[] testBytes = BitConverter.GetBytes(testValue);

// warumup JIT
ByteArrayToStructure1<long>(testBytes);
ByteArrayToStructure2<long>(testBytes);

Stopwatch stopwatch = new Stopwatch();
stopwatch.Start();

for (int i = 0; i < ILITERATIONS; i++)
{
    ByteArrayToStructure1<long>(testBytes);
}

stopwatch.Stop();
Console.WriteLine("1: " + stopwatch.ElapsedMilliseconds);

stopwatch.Reset();

stopwatch.Start();

for (int i = 0; i < ILITERATIONS; i++)
{
    ByteArrayToStructure2<long>(testBytes);
}

stopwatch.Stop();
Console.WriteLine("2: " + stopwatch.ElapsedMilliseconds);

stopwatch.Reset();

stopwatch.Start();

for (int i = 0; i < ILITERATIONS; i++)
{
    BitConverter.ToInt64(testBytes, 0);
}

stopwatch.Stop();
Console.WriteLine("3: " + stopwatch.ElapsedMilliseconds);

Console.ReadLine(); 
```

我得出以下结果：

```
1: 2927
2: 2803
3: 51 
```

# c++ - 限制 boost::odeint 集成的步数

> ID：14465725
> 
> 赞同：4
> 
> 时间：2013-01-22T18:43:04.237
> 
> 标签：c++, boost, differential-equations, odeint

假设我有以下`boost::odeint`代码：

```
#include <iostream>
#include <boost/array.hpp>
#include <boost/numeric/odeint.hpp>
using namespace std;
using namespace boost::numeric::odeint;

const double sigma = 10.0;
const double R = 28.0;
const double b = 8.0 / 3.0;

typedef boost::array< double , 3 > state_type;

void lorenz( const state_type &x , state_type &dxdt , double t ){
    dxdt[0] = sigma * ( x[1] - x[0] );
    dxdt[1] = R * x[0] - x[1] - x[0] * x[2];
    dxdt[2] = -b * x[2] + x[0] * x[1];
}

void write_lorenz( const state_type &x , const double t ){
    cout << t << '\t' << x[0] << '\t' << x[1] << '\t' << x[2] << endl;
}

int main(int argc, char **argv){
    state_type x = { 10.0 , 1.0 , 1.0 }; // initial conditions
    cout<<"Steps: "<<integrate( lorenz , x , 0.0 , 25.0 , 0.1 , write_lorenz )<<endl;
} 
```

如何修改代码以使集成在一定数量的步骤后中断？我正在运行大量集成，并希望避免在集成任何特定系统上花费太多时间。

我曾考虑过使用`integrate_n_steps()`，但这可能意味着集成会持续到我感兴趣的结束时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T20:10:30.187

目前没有针对此任务的集成例程。不过，您有几种选择：

**首先，**在integrate() 中使用观察者，如果超过最大步数，则在此处抛出异常。当然，这不是很优雅：

```
struct write_lorenz_and_check_steps
{
    size_t m_steps;
    write_lorenz_and_check_steps( void ) : m_steps( 0 ) { }
    void operator()( const state_type &x , const double t ) const {
       cout << t << '\t' << x[0] << '\t' << x[1] << '\t' << x[2] << endl;
       ++m_steps;
       if( m_steps > max_steps ) throw runtime_error( "Too much steps" );
    }
};

// ...

size_t steps = 0;
try {
    steps = integrate( lorenz , x , 0.0 , 25.0 , 0.1 , write_lorenz );
} catch( ... ) { steps = max_steps; }
cout << steps << endl; 
```

**其次**，您可以自己编写步进循环：

```
// Attention: the code has not been check to compile
double tmax = 25.0;
size_t imax = 1000;
size_t i = 0;
auto stepper = make_dense_output( 1.0e-6 , 1.0e-6 , runge_kutta_dopri5< state_type >() );
stepper.initialize( x , t , dt );
while ( ( stepper.current_time() < tmax ) && ( i < imax ) )
{
    observer( stepper.current_state() , stepper.current_time() );
    stepper.do_step( lorenz() );
    ++i;
}
x = stepper.current_state(); 
```

在此示例中，您还直接使用`stepper.current_state()`而`stepper.current_time()`不是调用观察者。此外，如果您的编译器不支持自动，即您有一个 C++03 编译器，只需使用

```
typedef runge_kutta_dopri5< state_type > stepper_type;
result_of::make_dense_output< stepper_type >::type stepper =
    make_dense_output( 1.0e-6 , 1.0e-6 , stepper_type() ); 
```

我们也正在为此任务开发一个特殊的集成例程。但它仍然需要几个星期才能完成。此外，我们还开发了 ode 迭代器，它们也可以使用，并且很快就会准备好（我希望在下周的下周）。

# entity-framework - 第一次使用实体框架

> ID：14465726
> 
> 赞同：0
> 
> 时间：2013-01-22T18:43:06.010
> 
> 标签：entity-framework

我正在尝试学习并开始使用实体框架 5.0

我能够创建我的数据模型（只有一个表），但我无法找到允许我发送 sql 查询并访问结果以及保存和更新...等的命令/函数/方法。有人可以编写一小段代码来展示如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:39:17.520

您可以像这样编写原始 SQL 来返回实体：

```
var entities = context.MyEntities.SqlQuery("SELECT * FROM dbo.MyEntities").ToList(); 
```

或者对于非实体：

```
var myAttributeValues = context.Database.SqlQuery<string>(
                      "SELECT MyAttribute FROM dbo.MyEntities").ToList(); 
```

但是，您不应该仅仅因为您喜欢它而使用原始 sql。您应该在原始 sql 为您提供优于生成查询的情况下使用它。如果您更喜欢编写 SQL，那么您应该重新考虑是否真的要使用 EF 或任何其他 ORM。有关查询实体的信息，[请](http://msdn.microsoft.com/en-us/data/jj573936)参阅[此处](http://msdn.microsoft.com/en-us/data/ef.aspx)了解一些 EF 文档和示例。

# php - 如何在 PHP PDO 查询中插入“now() -interval '2 minutes'”之类的内容？

> ID：14465727
> 
> 赞同：9
> 
> 时间：2013-01-22T18:43:09.600
> 
> 标签：php, postgresql, pdo

我有这样的查询：（在 Postgresql 8.4，PHP-fpm 5.3.10 (fpm-fcgi) 上）

```
select * from users where now() - interval '2 minutes' < seenlast ORDER BY seenlast; 
```

我想使用 PHP/PDO 查询，所以：

```
$mymin=5; //this is a variable can be changed by $_GET
$query = $db_conn->prepare("select * from users where now() - interval ':myminute minutes' < seenlast ORDER BY seenlast"); 
$query->bindParm(":myminute",$mymin)
$query->execute; 
```

这不起作用，我找不到以适当方式通过分钟（**$mymin**）的方法。如果我对时间进行硬编码，一切正常，那么代码的另一部分必须是正确的。

我也试过：

```
$temp=$mymin." minutes";
$query = $db_conn->prepare("select * from users where now() - interval :myminute < seenlast ORDER BY seenlast"); 
$query->bindParm(":myminute",$temp) 
```

[我已经看到了，没有帮助](https://stackoverflow.com/questions/10067782/php-pdo-insert-current-date-plus-one-month-into-mysql)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T19:37:33.790

间隔可以乘以数字。因此，解决此问题的一种方法是准备语句，`interval '1 minute' * :myminutes`改为将“myminutes”参数作为简单整数传递。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T19:42:02.230

我不太了解 PDO 或 PHP，但我想我知道这里出了什么问题。

当你这样说时：

```
interval '3 minutes' 
```

您实际上正在执行与以下相同的强制转换操作：

```
'3 minutes'::interval
cast('3 minutes' as interval) 
```

因此，您正在做的是将 TEXT 值转换为 INTERVAL。这意味着您需要生成一些看起来像 string 的东西`'3 minutes'`。您可以使用字符串连接将字符串片段粘贴在一起：

```
# Use cast to make the precedence cleaner.
$query = $db_conn->prepare("select * from users where now() - cast(:myminute || ' minutes' as interval) < seenlast ORDER BY seenlast"); 
$query->bindParm(":myminute", $mymin) 
```

或者你应该能够在 PHP 中进行字符串处理：

```
$query = $db_conn->prepare("select * from users where now() - interval :myminute < seenlast ORDER BY seenlast"); 
$query->bindParm(":myminute", $mymin . ' minutes') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T02:08:24.633

我在 Phalcon 及其内部 Models PDO 解析器上苦苦挣扎了几个小时，也遇到了同样的问题。

我找到了这个解决方案：

```
public static function getTimedoutRequests($secsThreshold) {
    return self::find(
        array(
            // PDO is buggy here, can't use INTERVAL
            "DATE_PART('epoch', create_time) < DATE_PART('epoch', NOW()) - ?0",
            "bind" => array(
                $secsThreshold
            )
        )
    );
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-22T18:46:36.997

```
... - INTERVAL :myminute MINUTES ... 
```

没有引号是正确的方法。如果有帮助，请将占位符视为使用老式的基于变量的查询构建方法的等价物

```
... - INTERVAL $myminute MINUTES 
```

除了占位符处理变量不处理的注入漏洞。仅仅因为您使用占位符并不意味着您可以更改 SQL 语法，所以

```
... - INTERVAL '2 minutes'
... - INTERVAL ':myminute minute' 
```

不是有效的 SQL。

* * *

mu的后续行动：

```
mysql> select now() + interval '2 minute';
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1
mysql> select now() + interval 2 minute;
+---------------------------+
| now() + interval 2 minute |
+---------------------------+
| 2013-01-22 13:38:24       |
+---------------------------+
1 row in set (0.02 sec) 
```

# php - 未定义的索引角色？

> ID：14465732
> 
> 赞同：0
> 
> 时间：2013-01-22T18:43:29.503
> 
> 标签：php

```
<?php
if(isset($_SESSION['username'],$_SESSION['password']))
 $role = $_SESSION['role'];
 if($_SESSION["role"] == "member"){
?>

<form name ="add_cart" method="post" action="Shoppingcart.php" onSubmit="alert('Item added!')">
 <input type='hidden' name='id' id="id" value='<?php echo $id; ?>'>
<input  type="text" name="quantity" id="quantity" value="1" size="3" maxlength="3">
<input  type="submit" name="Add" value="ADD TO CART" style="width:150px; background-color:black; border:none; color:White "/>
                </td>
            </form>

        <?php
    }}

    ?> 
```

这是我的错误：

`NOTICE: UNDEFINED INDEX: ROLE IN C:\XAMPP\HTDOCS\FYP2\FOODCATALOG.PHP ON LINE 181`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:53:02.570

这意味着`$_SESSION['role']`没有设置。这很可能发生在这一行：

```
$role = $_SESSION['role']; 
```

在使用数组键之前，您应该始终检查它是否存在，除非您绝对知道它会被设置（即您在代码的其他地方硬编码它）。所以像这样

```
$role = '';
if(!empty($_SESSION['role'])) {
    $role = $_SESSION['role'];
} 
```

然后，您还应该更新您有条件使用`$role`而不是`$_SESSION['role']`.

```
if($role == "member") { 
```

在这里，您知道`$role`保证会设置它，因此在条件中使用它是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:58:11.457

if(isset($_SESSION["role"]) && $_SESSION["role"] == "member"){

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:58:13.407

你应该先给它赋值`$_SESSION['role'];`。快速但简单的方法是..

```
<?php
if(isset($_SESSION['username'],$_SESSION['password']))
  $_SESSION['role'] = 1;
  $role = $_SESSION['role'];
 if($_SESSION["role"] == "member"){
?> 
```

# php - 通过在 PHP 中调用 URL 进行远程 XML 解析

> ID：14465738
> 
> 赞同：0
> 
> 时间：2013-01-22T18:43:38.117
> 
> 标签：php, url, xml-parsing

我正在尝试通过在 php 中通过**file_get_contents()调用 url 来解析 xml 数据。**结果是：

```
<?xml version="1.0" encoding="UTF-8" ?>
<RESPONSE>
<SINGLE>
<KEY name="sitename"><VALUE>RedCross Test</VALUE>
</KEY>
<KEY name="username"><VALUE>test1</VALUE>
</KEY>
<KEY name="firstname"><VALUE>Test1</VALUE>
</KEY>
<KEY name="lastname"><VALUE>testTest1</VALUE>
</KEY>
</SINGLE>
</RESPONSE> 
```

这是程序：

```
<?php

header('Content-type: text/html; charset=utf-8');

$xml_obj = file_get_contents("http://localhost/example/webservice/rest/server.php?wstoken=".$token."&function=get_info");

$data = $xml_obj->SINGLE->KEY[2]->VALUE;
echo $data;

?> 
```

响应是：第 2 行第 1 列的错误：注意：试图在第 7 行获取非对象的属性。有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T18:47:23.847

[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)只是将 XML 代码作为字符串返回，而不对其进行解析。您可能想[`simplexml_load_file`](http://php.net/manual/en/function.simplexml-load-file.php)改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T18:47:56.287

错误说明这`$xml_obj`不是一个对象。那是因为它不是。它只是一个 var 存储来自`file_get_contents`.

代替：

```
$xml_obj = file_get_contents("http://localhost/example/webservice/rest/server.php?wstoken=".$token."&function=get_info"); 
```

尝试：

```
$xml_obj = simplexml_load_file("http://localhost/example/webservice/rest/server.php?wstoken=".$token."&function=get_info"); 
```

或者，如果您需要将内容用于其他内容并希望将其放在单独的变量中：

```
$contents = file_get_contents("http://localhost/example/webservice/rest/server.php?wstoken=".$token."&function=get_info");

$xml = new DOMDocument();
$xml->loadXML( $contents ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:48:01.207

file_get_contents 返回一个**STRING**。例如原始 xml。您需要先将该字符串加载到 DOM 或 Simple_XML 中，然后才能`->xxx`对其进行处理：

```
$xml = file_get_contents('...');
$dom = new DOMDocument();
$dom->loadXML($xml);
etc... 
```

# java - 透明度 webView

> ID：14465740
> 
> 赞同：1
> 
> 时间：2013-01-22T18:43:40.507
> 
> 标签：java, android, transparency

我正在尝试使我的背景 webView 像这样透明：

```
webView.setBackgroundColor(0x00000000); 
```

但它不起作用，如果我添加这一行，一切都是透明的（我没有看到我的 html 页面）：

```
webView.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null); 
```

我读到有时清单中存在此 android:hardwareAccelerated="true" 时会出现问题，但我没有此行。

HTML：

```
<BODY style=\"padding:0;margin:0;\">
<div style="padding:0;margin:0;background:transparent;border:none;position:relative;cursor:pointer;overflow:hidden;height:165px;">
<object ggnoclick ggswfcid name="fo_GGUID" id="fo_GGUID" width="100%" height="165" data="http://c.gumgum.com/ads/com/cesar/big_dogs/cesar_250x100_01.swf?modalURL=GGUID" type="application/x-shockwave-flash" allowscriptaccess="always" wmode="transparent" background="transparent" style="background:transparent;">
    <param name="AllowScriptAccess" value="always" />
    <param name="wmode" value="transparent" />
</object>
</div>
</BODY> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:10:42.157

```
myWebView.setBackgroundColor(0); 
```

这适用于我的情况。我使用 android 2.2。[在此链接](https://stackoverflow.com/questions/5003156/android-webview-style-background-colortransparent-ignored-on-android-2-2)
中查看相同的主题

# solr - SOLR - 根据另一个字段的字段值更新某个字段值

> ID：14465742
> 
> 赞同：0
> 
> 时间：2013-01-22T18:43:42.550
> 
> 标签：solr

我有一个默认值为 false 的字段：

```
<field indexed="true" multiValued="false"
  name="has_status" default="false" /> 
```

我还有另一个领域：

```
<field indexed="true" multiValued="false"
  name="status_value"
 type="string" default="false" /> 
```

有没有办法根据索引期间 status_value 是否为空来计算 has_status 的值？所以，当一个文档被索引时，如果一个项目有status_list，我们把“true”设置为有状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:48:35.190

如果您使用 DataImportHandler，则可以使用转换器。否则，您想使用 UpdateRequestProcessor 并且[几乎相同的示例](http://wiki.apache.org/solr/UpdateRequestProcessor#Implementing_a_conditional_copyField)在 wiki 上，或者您可以将一些东西与[FieldMutating Update Processors](http://lucene.apache.org/solr/4_1_0/solr-core/org/apache/solr/update/processor/FieldMutatingUpdateProcessorFactory.html)之一放在一起。

# jquery - jquery 组合选择器

> ID：14465745
> 
> 赞同：0
> 
> 时间：2013-01-22T18:44:03.467
> 
> 标签：jquery, jquery-selectors, checkbox

简而言之：我想选中我页面中的所有“已选中”复选框，但其中一个除外！
所以我尝试了这个：

```
$('input:checkbox').not('#SpecificChbx').is(':checked') 
```

我也试过这个：

```
$('input:checkbox:not(#SpecificChbx)').is(':checked') 
```

我已经尝试了很多替代方法，但仍然无法正常工作..有什么帮助吗？
这是一个[jsfiddle](http://jsfiddle.net/L7Dwe/)示例

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T18:46:07.857

[`.is`](http://api.jquery.com/is)返回 true 或 false（如果选中其中一个匹配复选框，它将返回 true，否则返回 false），您想要的是一个 jQuery 集合：`$('input:checkbox:checked:not(#SpecificChbx)')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:46:23.923

你需要遍历它们......

```
$('input:checkbox').not('#SpecificChbx').filter(function () {
    return $(this).is(':checked');
}).each(function () {
    // Whatever you want here
}); 
```

# heroku - heroku pg:psql 不工作

> ID：14465746
> 
> 赞同：6
> 
> 时间：2013-01-22T18:44:05.757
> 
> 标签：heroku

我尝试通过运行命令“heroku pg:psql”在 heroku 上为我的应用程序连接到 Postgres 数据库，并收到以下错误消息：

```
psql: could not connect to server: Connection timed out (0x0000274C/10060)
    Is the server running on host "URL.com"(IP address)  and accepting
    TCP/IP connections on port 5432? 
```

我也尝试使用[Pgadmin](https://dba.stackexchange.com/questions/21869/connecting-pgadmin3-to-postgres-on-heroku)连接并得到错误：

```
Server doesn't listen. Is the server running on host "URL.com" (IP address) and accepting
    TCP/IP connections on port 5432? 
```

谁能告诉我如何修复这些错误并正确连接到我的数据库。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-13T10:08:32.537

尝试这个：

```
heroku pg:psql DATABASE_URL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-05T04:33:30.333

这个答案可能很愚蠢，但它以前发生在我身上。我所在的互联网连接阻止了该端口上的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T10:27:07.090

正如开始暗示已经使用 DATABASE_URL 一样，还有一些事情需要考虑。

如果您在 Heroku 中有多个应用程序，最好指定要连接到添加 DB 的应用程序。如果您有多个数据库来指定数据库名称（如果它不是默认的 DATABASE_URL），则同样适用。

如何连接的一些示例：

```
-- Defining to what DB and app you want to connect to:
heroku pg:psql [lower case generated name] -a myapp
heroku pg:psql [lower case generated name] --app myapp
heroku pg:psql HEROKU_POSTGRESQL_[upper case generated name]_URL -a myapp

-- This will fall back to default DATABASE_URL part of your app:
heroku pg:psql -a myapp 
```

还要记住这里所说的[https://devcenter.heroku.com/articles/heroku-local#copy-heroku-config-vars-to-your-local-env-file](https://devcenter.heroku.com/articles/heroku-local#copy-heroku-config-vars-to-your-local-env-file)：

> 请记住，您部署的生产应用程序可能连接到与本地开发应用程序不同的服务。例如，您部署的生产应用程序可能有一个引用 Heroku Postgres 数据库的 DATABASE_URL 配置变量，但您的本地应用程序可能在 .env 文件中有一个引用您本地安装的 Postgres 的 DATABASE_URL 变量。

Heroku 指南 – [https://devcenter.heroku.com/articles/heroku-postgresql#pg-psql](https://devcenter.heroku.com/articles/heroku-postgresql#pg-psql)（但它对多数据库和多应用案例的解释很少）。

Heroku 外部连接指南 - [https://devcenter.heroku.com/articles/connecting-to-heroku-postgres-databases-from-outside-of-heroku](https://devcenter.heroku.com/articles/connecting-to-heroku-postgres-databases-from-outside-of-heroku)

# java - Java 使用 Saxparser 导致抛出异常

> ID：14465747
> 
> 赞同：1
> 
> 时间：2013-01-22T18:44:09.557
> 
> 标签：java, xml, saxparser

**代码：**

```
public void parse(byte[] payload)
{
    try
    {

        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser saxParser = factory.newSAXParser();

        DefaultHandler handler = new DefaultHandler()
        {
            boolean eid = false;
            boolean msg_id = false;
            boolean date_time = false;
            boolean temp = false;

            public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException
            {
                if (qName.equalsIgnoreCase("eid"))
                {
                    eid = true;
                }

                if (qName.equalsIgnoreCase("msg_id"))
                {
                    msg_id = true;
                }

                if (qName.equalsIgnoreCase("date_time"))
                {
                    date_time = true;
                }

                if (qName.equalsIgnoreCase("temperature"))
                {
                    temp = true;
                }
            }

            public void characters(char ch[], int start, int length) throws SAXException
            {

                if (eid)
                {
                    XMLMessagePacket.this.eid = new String(ch, start, length);
                    eid = false;
                }

                if (msg_id)
                {
                    XMLMessagePacket.this.msgId = new String(ch, start, length);
                    msg_id = false;
                }

                if (date_time)
                {
                    XMLMessagePacket.this.time =  new String(ch, start, length);
                    date_time = false;
                }

                if (temp)
                {
                    XMLMessagePacket.this.temperature.parseDouble(new String(ch, start, length));
                    temp = false;
                }

            }

        };

        saxParser.parse(new ByteArrayInputStream(payload), handler);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

**XML**

```
<?xml version="1.0"?>
<event>
        <eid>345345</eid>
        <msg_id>3242</msg_id>
        <date_time>11342345</date_time>
        <temperature>100</temperature>
</event> 
```

**问题：**

org.xml.sax.SAXParseException：prolog 中不允许有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:50:26.540

只是要检查一下：一位朋友曾经整晚都在与这个“错误”作斗争。您的文件是否可能在开头有一个[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)？将其解析为字符串可能会使其消失。XML 的默认编码是 UTF-8（不需要 BOM）。你有可能被你看不到的东西绊倒了。

# ruby-on-rails-3 - 如何管理 Rails 引擎 + 虚拟应用程序的迁移

> ID：14465754
> 
> 赞同：8
> 
> 时间：2013-01-22T18:44:31.393
> 
> 标签：ruby-on-rails-3, rake, rails-engines

我刚刚加入了一个开发 Rails 引擎的项目，该项目还有一个用于测试的虚拟应用程序。

```
foo/
foo/spec/dummy/ 
```

有相同的迁移

```
foo/db/migrate/
foo/spec/dummy/db/migrate/ 
```

如果我`rake db:migrate`来自虚拟应用程序，一切都很好。如果我从引擎（当前目录 = foo）中执行相同操作，则会收到有关具有相同名称的多个迁移的错误。

Q1) Rakefiles 是不是很无聊？（应该`db:migrate`递归到虚拟应用程序吗？）

Q2) 迁移应该只在一个目录中吗？如果有，是哪一个？

我们使用的是 Rails 3.2.9，ruby 1.9.3p194。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T04:49:32.770

**问题 1**
Rakefile 应该有一个条目来说明规范/虚拟应用程序。例如，

```
Bundler::GemHelper.install_tasks
APP_RAKEFILE = File.expand_path("../spec/dummy/Rakefile", __FILE__)
load 'rails/tasks/engine.rake' 
```

这是更详细的示例 rakefile，[https://github.com/twinge/questionnaire_engine/blob/engine2/Rakefile](https://github.com/twinge/questionnaire_engine/blob/engine2/Rakefile)

**问题 2**
IMO，迁移应该只存在于 foo/db/migrate 文件夹中，而**不是**foo/spec/dummy/db/migrate。事实上，我不对虚拟对象的 db/migrate 或 db/schema 进行版本控制。

为什么？我使用虚拟应用程序确保我的引擎的完整安装工作 100%。因此，如果我对 foo/spec/dummy db 状态进行版本控制，我会像以前安装一样进行测试。

**示例引擎**
[https://github.com/twinge/questionnaire_engine/tree/engine2](https://github.com/twinge/questionnaire_engine/tree/engine2)

# rdf - Jena 规则：如何执行从 float 到 double 的文字值类型转换（反之亦然）？

> ID：14465759
> 
> 赞同：0
> 
> 时间：2013-01-22T18:44:46.620
> 
> 标签：rdf, jena, owl, semantics, jena-rules

我有以下耶拿规则来执行加法：

```
@prefix pm:     <http://example.org/ProductionMesure#>.
@prefix rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix owl:    <http://www.w3.org/2002/07/owl#>.
@prefix pr:     <http://example.org/Production#>.

[r1:
(?mesCavTur rdf:type        pr:Mesure)
(?cavTur    owl:ensemble_de ?mesCavTur)
noValue(?cavTur owl:valeur ?x)
-> 
(?cavTur    owl:valeur      0.0)
]

[r2:
(?mesCavTur rdf:type        pr:Mesure)
(?mesCavTur owl:valeur      ?valeur)
noValue(?mesCavTur pm:flag pm:done)
(?cavTur    owl:ensemble_de ?mesCavTur)
(?cavTur    owl:valeur      ?oldValeur)
sum(?valeur, ?oldValeur, ?somme)
-> 
drop(4)
(?cavTur    owl:valeur      ?somme)
(?mesCavTur pm:flag pm:done)
hide(pm:flag)
] 
```

该规则几乎可以正常工作以执行所需的加法结果。我遇到的问题是传递给 sum 函数的值都是浮点数，但返回的值 (?somme) 以双精度形式返回。

出乎意料的结果是它在结果中添加了一个小的十进制数（我认为这与类型转换有关）。

例如，如果我想求三个值 2.2、2.5 和 2.7 的总和；我得到的结果是 7.1000000953674316 （接近但不太正确）。

有没有办法使用这个 Jena 规则，我可以将我的浮点值 (?valeur & ?oldValeur) 转换为 double 类型，然后使用这些新的 double 值执行 sum 函数，然后最终转换输出 (?somme)变成浮点值？

我认为这样做可能不会将额外的小数位添加到我的输出中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:22:22.310

显示浮点数时舍入问题很常见，因为大多数浮点数[在 binary 中没有精确的表示](https://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding)。因此，即使您使用`float`s 代替`doubles`，仍然会出现小的近似误差问题。

你有两个选择。您只能使用整数，例如通过将所有数字缩放（乘以）100 或 1000，然后记住在为用户生成输出时将它们缩小。或者，您可以将显示问题视为一个单独的问题，当您在输出中呈现数字时，请使用数字格式库，例如[Java 内置的](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)库，或[StackOverflow 上的其他建议](https://stackoverflow.com/questions/4733089/formatting-floating-point-numbers)。就个人而言，我会选择第二个。

# html - 如何使整个跨度落入新行？

> ID：14465765
> 
> 赞同：12
> 
> 时间：2013-01-22T18:45:10.630
> 
> 标签：html, css

这个片段显示了我想要的：http: [//jsfiddle.net/945Df/3/](http://jsfiddle.net/945Df/3/)

```
<div class="sup" id="pr">
    <strong>
        <a href="#">Rosario, Santa Fe, Argentina.</a> <span class="date">17 de septiembre de 2013.</span></strong>
</div>
<div class="sup">
    <strong>
        <a href="#">Rosario, Santa Fe, Argentina.</a> <span class="date">17 de septiembre de 2013.</span>
    </strong>
</div> 
```

当没有更多空间时，我希望跨度在 div 的宽度（在项目中，视口中）下降到一个新行。

对不起我不好的解释。我不知道该怎么做。谢谢！

编辑：在第二个示例中，短语“SEPTIEMBRE DE 2013”​​。掉进一个新行。但是“17 DE”这句话仍然在最上面一行。我想要“2013 年 9 月 17 日”。掉进一个新行。知道了？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-22T18:48:09.170

如果您希望跨度不换行，而是完全移动到其他文本下方，您可以使用`white-space: nowrap;`

```
.date {
    text-transform: uppercase;
    color:#848484;
    white-space:nowrap;
} 
```

[演示](http://jsfiddle.net/945Df/5/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-22T18:49:45.213

要在空间不足时使 span 转到下一行，可以将其设置为`display: inline-block;`

```
.date {
    display: inline-block;
    ...
} 
```

检查这个：http: [//jsfiddle.net/945Df/7/](http://jsfiddle.net/945Df/7/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-10-18T20:55:56.327

这就是我实现它的方式：

```
#spantomovedown{
    clear: both;
    display: inline-block;
    width: 100%;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-22T18:53:53.830

```
.date{display:inline-block;} 
```

当日期比div长时，换行显示

示例：http: [//jsfiddle.net/TqRyK/](http://jsfiddle.net/TqRyK/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T18:49:24.547

```
.date {
    white-space: nowrap;
} 
```

[http://jsfiddle.net/945Df/6/](http://jsfiddle.net/945Df/6/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T18:49:54.600

如果你漂浮：对；当整个事情不再有空间时，它应该落到下一行。

之后您将需要一个清算元素。

# ruby - 我可以使用不在表格中的 Mechanize 获取 HREF 值吗？

> ID：14465769
> 
> 赞同：0
> 
> 时间：2013-01-22T18:45:39.060
> 
> 标签：ruby, mechanize, mechanize-ruby

我的一个页面中有类似的 HTML（带有表单名称）：

```
<form name="test">
<td> <A HREF="http://www.edu/st/file.html">bla bla</A> </td>
<td> <A HREF="http://www.mac/spgm/file.html">boo bla</A> </td>
<td> <A HREF="http://www.dom/st/file.html">foo</A> </td>
</form> 
```

另一个没有表单名称的页面：

```
<td> <A HREF="http://www.edu/st/file.html">bla bla</A> </td>
<td> <A HREF="http://www.mac/spgm/file.html">boo bla</A> </td>
<td> <A HREF="http://www.dom/st/file.html">foo</A> </td> 
```

在这两种情况下，我都有值`bla bla`, `boo`, `foo`。`href`使用这些值，我可以使用 Mechanize获得相应的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:10:48.167

您可以`href`从链接中获取属性：

```
m = Mechanize.new
page = m.get("yourpage")
page.link_with(:text => "bla bla").href #=> "http://www.edu/st/file.html" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T19:10:59.773

您可以尝试遍历页面上的所有链接并检查文本是否相同。

```
doc.xpath('//a[@href]').each do |link|
  if link.text.strip == "bla bla"
    # Your code here.
end 
```

# java - 将 jPedal pdf 转换为 PDFDocumentGraphics2D 的方法

> ID：14465772
> 
> 赞同：0
> 
> 时间：2013-01-22T18:45:45.540
> 
> 标签：java, pdf, graphics2d, apache-fop, jpedal

我使用 jPedal 中的 PdfDecoder 类来尝试将 pdf 文件转换/绘制为 PDFDocumentGraphics2D 对象。PDFDocumentGraphics2D 是 javas AWT Graphics 类的扩展，是 Apache FOP (http://xmlgraphics.apache.org/fop/) 的一部分。

除了使用 jPedals PdfDecoder 类中的商业专用函数 renderPageOntoGraphics2D 之外，还有其他方法可以将 .paint(...) pdf 到 PDFDocumentGraphics2D 上吗？我有一种感觉，它可以通过遍历 pdf 的整个树和 .paint() 来完成。但这似乎很乏味，因为根据我的经验，使用 PdfDecoder 类很难从 pdf 文件中获取所有文本、图像和表单。

我也愿意以替代/更好的方式阅读 pdf 文件，并将其绘制到 PDFDocumentGraphics2D 对象上！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:08:03.153

您可以破解 PdfStreamDecoder 中的主解析引擎，或者实现您自己的 DynamicVectorRenderer JPedal 写入的版本，但这将是相当困难的。

# ckeditor - 如何手动设置ckeditor的脚本路径

> ID：14465777
> 
> 赞同：3
> 
> 时间：2013-01-22T18:46:09.090
> 
> 标签：ckeditor

通常我们只需要将 ckeditor 网站上的包解压到字典中，像`CKEDITOR.replace('editor1');`. 但我的问题是 ckeditor 无法正确识别插件和其他文件的路径，导致编辑器无法加载。

有没有办法手动设置其文件的路径？

谢谢

**UPDATE** 我试过设置`CKEDITOR.basePath`，编辑器加载成功，但是插件不起作用，异常 `[CKEDITOR.dialog.openDialog] Dialog "paste" failed when loading definition.` 问题依旧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T21:15:54.007

我知道这很旧，但是设置`CKEDITOR.plugins.basePath`应该可以解决您的问题。

# ios - iOS 上的 Chrome 是否支持文件系统 API

> ID：14465779
> 
> 赞同：5
> 
> 时间：2013-01-22T18:46:09.407
> 
> 标签：ios, api, google-chrome, filesystems

我知道 chrome 现在支持桌面上的 HTML5 文件系统 api，我相信在 Android 上，但我没有看到任何关于 ios 上支持它的 chrome 的引用。有谁知道它是否有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:52:57.693

不，因为 iOS 没有开放/公共文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:53:49.957

iOS 上的 Chrome 使用 Mobile WebKit，它不支持 FileSystem 或 FileWriter API。您可以通过将设备或模拟器指向[此测试页面](http://html5-demos.appspot.com/static/filesystem/filer.js/demos/index.html)来测试它。

[您可以在 Apple Developer 网站的这一部分了解](http://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Introduction/Introduction.html)可用的客户端存储和缓存选项。

# jquery-mobile - 如何在 Jquery Mobile 中更改输入类型 =“日期”的日期格式

> ID：14465781
> 
> 赞同：2
> 
> 时间：2013-01-22T18:46:12.190
> 
> 标签：jquery-mobile

我正在使用 jquery mobile 开发 android 应用程序。我想更改输入类型 =“日期”的默认日期格式。怎么能做到这一点？日期选择器加载的另一件事是什么？有人帮忙吗？

例如：- 默认情况下以以下格式显示日期：“mm/dd/yy”。但我需要动态设置此日期格式。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:51:24.610

放

```
 input_type = TYPE_DATETIME_VARIATION_DATE 
```

在您的 android.text 字段中。这允许只输入一个日期。

你可以通过这样做在你的java脚本中解析它：

```
 DateFormat df = new SimpleDateFormat("EEE, dd MMM yyyy", Locale.getDefault()); 
```

# json - Json 文件中缺少引号

> ID：14465782
> 
> 赞同：1
> 
> 时间：2013-01-22T18:46:16.157
> 
> 标签：json, d3.js

我有一个非常大的 Json 文件。它包含 27000 条记录。

记录如下所示：

```
 {
adlibJSON: {
recordList: {
record: [
{
@attributes: {
priref: "4372",
created: "2011-12-09T23:09:57",
modification: "2012-08-11T17:07:51",
selected: "False"
},
acquisition.date: [
"1954"
],
acquisition.method: [
"bruikleen"
],
association.person: [
"Backer, Bregitta"
],
association.subject: [
"heraldiek"
],
collection: [
"Backer, collectie"
], ... ... 
```

问题是这不是有效的 Json。名称中缺少引号。

例如`acquisition.date`应该是`"acquisition.date":`

我需要编辑这个大 json 文件并添加所有引号，否则该文件不会解析为例如 D3.js

修复此 Json 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:00:08.223

我会使用具有正则表达式查找和替换功能的体面的文本编辑器（例如，Visual Studio、UltraEdit 等）。

然后做：找到

`^\s*(\w+\.\w+)\s*:`

并替换为

```
"$1": 
```

或者你可以使用 powershell：

```
$allText = gc yourfile.txt
$allText -replace '^\s*(\w+\.\w+)\s*:', '"$1":' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:53:22.327

如果您可以在文本编辑器中打开它，我认为您可以简单地使用替换功能：

> ```
> ],   -->    ]," 
> ```

和

> ```
> : [   -->   ":  [ 
> ```

如果您的 JSON 的格式始终相同并且不包含这些字符，那么这应该可以。

--

请注意，您必须自己手动编辑第一个键。

# java - JSP 写入服务器目录

> ID：14465790
> 
> 赞同：0
> 
> 时间：2013-01-22T18:46:51.977
> 
> 标签：java, javascript, jsp, resumablejs

所以我正在使用 resumable.js 将文件上传到服务器。

我要保存到的目录类似于

```
/dir/files/upload/ 
```

明明只是编造的，但是这个目录有用户写入的权限。我正在使用 JSP 来监听 resumable.js 发出的 POST 请求，并编写

```
.part 
```

文件到该目录。示例监听器：

```
<%          if(request.getMethod().equals("POST") && request.getParameter("resumableFilename") != null){
               long chunkSize = StringUtils.isEmpty(request.getParameter("resumableChunkSize"))? 0:Long.parseLong(request.getParameter("resumableChunkSize"));
               String fileName = request.getParameter("resumableFilename");
               long totalSize = StringUtils.isEmpty(request.getParameter("resumableTotalSize"))? 0:Long.parseLong(request.getParameter("resumableTotalSize"));
               String temp_dir = "/dir/files/upload/"+request.getParameter("resumableIdentifier");//Add in user_id
               String dest_dir = temp_dir+fileName+".part"+request.getParameter("resumableChunkNumber");
               File fDir = new File(temp_dir);
               fDir.mkdirs();
               if(ServletFileUpload.isMultipartContent(request)){
                   DiskFileItemFactory factory = new DiskFileItemFactory(); 
                   factory.setRepository(new File(temp_dir));                          ServletFileUpload upload = new ServletFileUpload(factory);
                   List items = upload.parseRequest(request);
                   ArrayListIterator iter = (ArrayListIterator)items.iterator();
                   FileItem item = (FileItem)iter.next();
                   File fileWithNewDir = new File(dest_dir);
                   item.write(fileWithNewDir);  // write file to dest_dir (fileName.part*CHUNK_NUM*)
                   }
                }
%> 
```

该脚本托管在

```
www.site.com/pubs/res.jsp 
```

根据JS本身的resumable，上传的过程就完成了，但是根本没有新建一个目录。我知道这不是写权限，所以它必须是别的东西。

这是我在 javascript 中调用一个新的可恢复对象

```
var resume = new Resumable({
    target:"res.jsp",
    resumableChunkSize: 1*1024*1024,
    simultaneousUploads: 3,
    testChunks: false,
    throttleProgressCallbacks: 1
    }); 
```

它似乎正在命中 jsp 文件，但没有发生任何事情。

我按照 Apache 的文件上传页面来实现那个监听器，但也许我在某些时候出错了。

[Apache 的文件上传](http://commons.apache.org/fileupload/using.html)

[可恢复的.js](https://github.com/23/resumable.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:52:21.470

目录的位置很重要。它必须在 WAR 的上下文中。您不能写入容器上下文之外的任何位置。如果您查看日志，您可能会看到可以解释这一点的错误消息。

# android - 使用 Google Map 的 API V2 Fragment Map 进行缩放控制的空白地图：

> ID：14465794
> 
> 赞同：1
> 
> 时间：2013-01-22T18:47:12.550
> 
> 标签：android, google-maps-android-api-2

我正在尝试使用新的谷歌地图 api v2 来实现谷歌地图，但由于某种原因我没有看到地图。

我认为问题是当我在模拟器上运行它时出现这两行错误：

```
 E/ActivityThread( 1373): Failed to find provider info for com.google.settings
 E/ActivityThread( 1373): Failed to find provider info for com.google.android.gsf
.gservices 
```

当我在设备上运行应用程序时，会产生以下错误：

```
Could not find class 'maps.j.k', referenced from method map.y.ae.a 
```

我的问题看起来与此链接相同：[http ://android-er.blogspot.co.il/2012/12/google-maps-android-api-v2-with-blank.html](http://android-er.blogspot.co.il/2012/12/google-maps-android-api-v2-with-blank.html)

那里说问题可能是我的关键，所以我去使用以下教程复制它： [http](http://android-er.blogspot.co.il/2012/12/displaying-sha1-certificate-fingerprint.html) ://android-er.blogspot.co.il/2012/12/displaying-sha1-certificate-fingerprint.html 。但这仍然没有帮助我。

支持文件当然会添加到项目以及 Google Play 服务库中。我在模拟器上看到了相同的结果（在手动添加允许在模拟器上使用谷歌地图 v2 的两个文件之后）以及在运行 android 2.2 的摩托罗拉 Defy 上看到了相同的结果。

也许我使用了错误的 debug.keystore？我正在使用我的 User.android 文件夹中的那个。如果是这样，那么我如何找到正确的文件？

编辑：我的日食说我的调试密钥在默认文件夹中。所以我重命名了 debug.keystore 文件并运行 Eclipse 重新创建它。这导致产生了一个新的 SHA1 密钥。我用它创建了一个新的 Google Maps API v2 密钥，但结果还是一样。我还是看不到地图。

EDIT2：愚蠢的我，我选择了 Google Map API V2 而不是 Google Maps Android API V2。这个问题可以关闭。谢谢。

以下是所有代码文件：

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
 <fragment
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    map:cameraBearing="112.5"
    map:cameraTargetLat="-33.796923"
    map:cameraTargetLng="150.922433"
    map:cameraTilt="30"
    map:cameraZoom="13"
    map:mapType="normal"
    map:uiCompass="false"
    map:uiRotateGestures="true"
    map:uiScrollGestures="false"
    map:uiTiltGestures="true"
    map:uiZoomGestures="true" /> 
</LinearLayout> 
```

地图片段活动类：

```
package com.eadesign.skygiraffefinalv2;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import android.os.Bundle;
import com.google.android.gms.maps.*;
import android.widget.ImageView;
import android.widget.TextView;
public class Map extends android.support.v4.app.FragmentActivity
{
private GoogleMap map;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);

        if (GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext()) == 0)
        {
            map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        //  map.setMapType(GoogleMap.MAP_TYPE_HYBRID);
        }
}} 
```

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.eadesign.skygiraffefinalv2"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk android:minSdkVersion="8"  android:targetSdkVersion="17"/>
<permission android:name="com.eadesign.skygiraffefinalv2.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
<uses-permission android:name="com.eadesign.skygiraffefinalv2.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
  android:glEsVersion="0x00020000"
  android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/sgicon90"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">       

    <activity
        android:name=".Map"
        android:label="@string/app_name"> 
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>                 
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="My key"/>            
</application> 
```

从 logcat 记录：

```
ent.category.LAUNCHER] flg=0x10000000 cmp=com.eadesign.skygiraffefinalv2/.Map u=
0} from pid 1362
W/WindowManager(  148): Failure taking screenshot for (246x410) to layer 21010
D/AndroidRuntime( 1362): Shutting down VM
I/ActivityManager(  148): Start proc com.eadesign.skygiraffefinalv2 for activity
com.eadesign.skygiraffefinalv2/.Map: pid=1373 uid=10046 gids={3003, 1015, 1028}
D/dalvikvm( 1373): Not late-enabling CheckJNI (already on)
D/dalvikvm( 1362): GC_CONCURRENT freed 99K, 77% free 483K/2048K, paused 1ms+1ms,
total 13ms
D/jdwp    ( 1362): Got wake-up signal, bailing out of select
D/dalvikvm( 1362): Debugger has detached; object registry had 1 entries
E/jdwp    ( 1373): Failed sending reply to debugger: Broken pipe
D/dalvikvm( 1373): Debugger has detached; object registry had 2 entries
E/Trace   ( 1373): error opening trace file: No such file or directory (2)
D/dalvikvm( 1373): GC_CONCURRENT freed 204K, 3% free 8264K/8519K, paused 89ms+6m
s, total 161ms
D/dalvikvm( 1373): WAIT_FOR_CONCURRENT_GC blocked 33ms
E/ActivityThread( 1373): Failed to find provider info for com.google.settings
E/ActivityThread( 1373): Failed to find provider info for com.google.settings
D/dalvikvm( 1373): GC_CONCURRENT freed 312K, 5% free 8471K/8839K, paused 82ms+10
5ms, total 268ms
E/ActivityThread( 1373): Failed to find provider info for com.google.android.gsf
.gservices
E/ActivityThread( 1373): Failed to find provider info for com.google.android.gsf
.gservices
D/dalvikvm( 1373): GC_CONCURRENT freed 227K, 4% free 8797K/9095K, paused 91ms+11
0ms, total 300ms
D/libEGL  ( 1373): Emulator without GPU support detected. Fallback to software r
enderer.
I/Choreographer( 1373): Skipped 54 frames!  The application may be doing too muc
h work on its main thread.
D/gralloc_goldfish( 1373): Emulator without GPU emulation detected.
D/libEGL  ( 1373): loaded /system/lib/egl/libGLES_android.so
I/ActivityManager(  148): Displayed com.eadesign.skygiraffefinalv2/.Map: +3s545ms
I/Choreographer( 1373): Skipped 75 frames!  The application may be doing too muc
 h work on its main thread. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:22:56.050

就我而言，我选择了**Google Maps** API V2 而不是**Google Maps Android** API V2。改了之后问题就没有了。因此，此代码非常适合创建全屏 Google 地图，并且可以关闭问题。

谢谢。

# java - 我的 Android 应用程序崩溃了，不理解 Eclipse 中的 Logcat

> ID：14465795
> 
> 赞同：2
> 
> 时间：2013-01-22T18:47:13.927
> 
> 标签：java, android, eclipse, android-mapview, logcat

我正在开发一个显示地图视图的应用程序，并覆盖我从互联网下载的图像。

应用程序等待用户按下按钮，然后将地图以用户当前位置为中心。

一切都在某一时刻工作正常。但是我认为当我将我的测试手机 (Galaxy SIII) 更新为 Jelly Bean 时，事情变得一团糟。

当我按下按钮获取当前 GPS 位置、使地图居中并覆盖图像时，应用程序崩溃。

以下是 LogCat 的输出。我不确定它是什么意思，所以如果你能帮助我理解它，我将非常感激！

摘自我认为是问题的代码：

按钮监听器：

```
mUpdateButton.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View arg0) 
        {
            // Start listening for location
            myLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,myLocationListener);

            // Get Lat and Long coordinates, and format them
            MyLat = (int)(myLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER).getLatitude()*1000000);
            MyLong = (int)(myLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER).getLongitude()*1000000);

            // Save the Lat and Long into a GeoPoint
            GeoPoint initGeoPoint = new GeoPoint(MyLat,MyLong);

            // Center location on current pos
            CenterLocatio(initGeoPoint, 10);

            // Stop listening for location
            myLocationManager.removeUpdates(myLocationListener);
        }
    }); 
```

中心位置功能：

```
private void CenterLocatio(GeoPoint centerGeoPoint, int zoomLevel)
{
    myMapController.animateTo(centerGeoPoint);
    myMapController.setZoom(zoomLevel);

    myLongitude.setText("Longitude: "+
            String.valueOf((float)centerGeoPoint.getLongitudeE6()/1000000)
            );
    myLatitude.setText("Latitude: "+
            String.valueOf((float)centerGeoPoint.getLatitudeE6()/1000000)
            );

    // Get location of the storage location
    File extStore = Environment.getExternalStorageDirectory();
    String PATH = extStore + "/data/tntechpie/";
    // Add new overlay to Map
    List<Overlay> mapOverlays = myMapView.getOverlays();
    // Set drawable to the downloaded image from the storage location
    //Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);

    @SuppressWarnings("deprecation")
    Drawable drawable = new BitmapDrawable(PATH + "testMap.gif");
    myItemizedOverlay itemizedoverlay = new myItemizedOverlay(drawable, this);

    OverlayItem overlayitem = new OverlayItem(centerGeoPoint, "", "");
    itemizedoverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedoverlay);
}; 
```

LogCat 输出：

```
01-22 12:34:31.062: I/MapActivity(6919): Handling network change notification:CONNECTED
01-22 12:34:31.062: E/MapActivity(6919): Couldn't get connection factory client
01-22 12:34:33.465: D/AndroidRuntime(6919): Shutting down VM
01-22 12:34:33.465: W/dalvikvm(6919): threadid=1: thread exiting with uncaught exception (group=0x41f44438)
01-22 12:34:33.475: E/AndroidRuntime(6919): FATAL EXCEPTION: main
01-22 12:34:33.475: E/AndroidRuntime(6919): java.lang.NullPointerException
01-22 12:34:33.475: E/AndroidRuntime(6919):     at com.androidlocation.MainActivity$1.onClick(MainActivity.java:120)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at android.view.View.performClick(View.java:4198)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at android.view.View$PerformClick.run(View.java:17158)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at android.os.Handler.handleCallback(Handler.java:615)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at android.os.Looper.loop(Looper.java:137)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at android.app.ActivityThread.main(ActivityThread.java:4918)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at java.lang.reflect.Method.invokeNative(Native Method)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at java.lang.reflect.Method.invoke(Method.java:511)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
01-22 12:34:33.475: E/AndroidRuntime(6919):     at dalvik.system.NativeStart.main(Native Method)
01-22 12:34:41.924: I/Process(6919): Sending signal. PID: 6919 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:51:29.110

```
java.lang.NullPointerException 
    at com.androidlocation.MainActivity$1.onClick(MainActivity.java:120) 
```

这个错误意味着在第 120 行，您要求一个不等于任何值的变量（即`null`）做某事。问题可能发生在您的`onClick()`方法中：

```
MyLat = (int)(myLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER).getLatitude()*1000000);
MyLong = (int)(myLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER).getLongitude()*1000000); 
```

但如果最近没有可用的修复程序，`getLastKnownLocation()`可能会返回。`null`在尝试读取它之前，您应该检查它是否返回一个可用的值。

```
Location lastknown = myLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
if(lastKnown != null) {
    // Read the lat / long data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:16:04.363

我猜你没有初始化你的**myLocationManager**但你没有标记哪一行是 120 我不能确定。

试试这样。（或者最好将此行移到您的 onCreate 方法中 - 您无需在每次单击按钮时都对其进行初始化。）

```
myLocationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); // add this line
myLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,myLocationListener); 
```

另一种可能性是这段代码：

```
(myLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER) 
```

返回 null - 比 Sam 建议的（检查它是否不为 null）。

# javascript - 由于更新 wordpress 3.5 导致的 Jquery 错误

> ID：14465819
> 
> 赞同：1
> 
> 时间：2013-01-22T18:48:27.233
> 
> 标签：javascript, wordpress, jquery, jquery-plugins

我已将 WordPress 更新到 3.5 并出现错误，J-query 无法正常工作。我已经查看了 wordpress 3.5 主列表并尝试了调试器脚本，但它不起作用。出现此错误（未捕获的 TypeError：无法调用未定义的方法 'ajax'）。

错误的相关资料：

1）。在 Chrome、firefox、safari、internet explorer 中出现错误。2）。SCRIPT_DEBUG (define;) 没有修复错误。3）。J-查询错误 4)。文件位置：/themes/ *** */library/includes 文件名为 image_uploader.php 行号为 769。

错误：未捕获的类型错误：无法调用未定义的方法“ajax”

```
function goToIndexforsave() { 

document.getElementById('sorted_successmsg_div').innerHTML = 'processing ...';
var img_save_url = 'http://www.holidayvillas4hire.com/index.php?page=sort_image&pid='+document.getElementById('image_sort').value;

$.ajax({
    url: img_save_url ,
    type: 'GET',
    dataType: 'html',
    timeout: 20000,
    error: function() {
        alert('Error loading agent favorite property.');
    },
    success: function(html) {
        document.getElementById('sorted_successmsg_div').innerHTML = html;
    }
});
return false;
} 
```

# android - 我们可以通过在android中使用单个按钮来显示时间和日期吗？

> ID：14465821
> 
> 赞同：0
> 
> 时间：2013-01-22T18:48:33.493
> 
> 标签：android

我是 Android 开发的新手。我需要帮助来使用单个按钮显示日期和时间值吗？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:56:44.480

当然。以下是步骤：

*   创建一个按钮。
*   添加一个`OnClickListener()`。
*   在侦听器内部，编写代码以显示时间和日期。

现在您需要了解如何执行每个步骤。这些是 Android 开发的基础知识。参加 Google 提供的[开发人员培训课程](http://developer.android.com/training/index.html)，让自己开始了解 Android 的所有方面。

以下是一些可能对您有所帮助的资源：

*   [纽扣](http://developer.android.com/guide/topics/ui/controls/button.html)
*   [时间和日期](http://mobile.tutsplus.com/tutorials/android/java_android_date-and-time/)

欢迎来到 StackOverflow 和 Android 开发！祝你好运！

# jquery - jQuery 手风琴和 jQuery mobile 相处得不是很好

> ID：14465823
> 
> 赞同：0
> 
> 时间：2013-01-22T18:48:39.817
> 
> 标签：jquery, css, jquery-mobile, jquery-ui-accordion

我在我的一个内容页面中使用了手风琴。样式表和 jQuery 源文件在母版页的 head 部分中定义。

现在，在母版页中，我将 jQuery 移动列表视图包含在 div 中，当调用移动电话的媒体查询时会显示该视图。

因此，我有两对 jquery-ui 和 jquery-css 源文件：一对用于 jQuery mobile，一对用于手风琴。

问题是，我不能同时使用两者，因为它们似乎相互冲突。当一个工作时，另一个不工作。有人可以帮我解决吗？

我尝试了 noConflict 方法，但这并没有太大帮助。我只能找到一些不太清楚的来源。感谢你的帮助。

*PS：我可以为您提供源代码，但它有点庞大。以一种像样的方式格式化它需要时间。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:55:03.083

如果您使用 JQM，是否需要 JQuery UI 手风琴？JQueryMobile 允许您创建可折叠的“手风琴”样式 div 并将它们组合在一起 - 请参阅[此页面](http://jquerymobile.com/test/docs/content/content-collapsible-set.html)以获取其工作原理的示例。

# android - OpenGL ES，我应该如何从 onDrawFrame (Android) 中的打开文件加载新纹理

> ID：14465826
> 
> 赞同：0
> 
> 时间：2013-01-22T18:48:44.780
> 
> 标签：android, file-io, opengl-es

我正在编写一个 Android 应用程序来使用 OpenGL ES 2.0 从二进制文件播放视频。有一个大视频文件，其中包含完全未格式化的二进制像素数据（价值 1000 帧）。我正在使用 RandomAccessFile 打开文件，导航到正确的点并提取所需帧的像素数据。

我最初通过打开文件并在每次调用 onDrawFrame 时再次关闭它来**非常粗略地完成此操作。**

```
 //The following sits within the onDrawFrame activity:

    long time = SystemClock.uptimeMillis() % 4000L
    long frame = 0;
    frame = time/10;

    int w = 640; //width in pixels
    int h = 512; //height in pixels
    int nP = w * h; //number of pixels in frame and size of frame in bytes

    byte[] byteArray = new byte[nP]; //array to hold one frame

    try {

    RandomAccessFile f = new RandomAccessFile("//sdcard/8bitvid.bin", "r"); //open the video file

    f.seek(nP*frame);   //navigate to the correct frame
    f.read(byteArray);  //read frame
    f.close();          //close file
    } 
```

我意识到这在很多方面都是错误的，但我刚刚从 Labview 迁移到 Java，这真是一个飞跃！所以我的问题是：

- 我应该如何在 onDrawFrame 调用之间保持文件打开？

- 如何在 onDrawFrame 的交互之间传递变量（即帧号）？

快速解释或只是指向相关示例的指针会很棒。

谢谢

卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:34:23.393

所以有几件事......你的二进制文件中可能有颜色信息，所以你应该在你的数组初始化中包含它 -

```
 int nP = w * h *3;  // RGB = 3 bytes, RGBA = 4 bytes. 
```

另一件事是，每次调用 ondrawframe 时，您都需要重新打开文件。您只需执行一次。您可以将 RandomAccessFile f 声明为渲染器类的私有成员，并在构造函数上打开文件。如果您将其保持打开状态，则不会每次都重新打开它。这实际上可能是也可能不是问题。不过，为了跟踪您看到的帧数，我建议在类中创建一个私有 int 并在每次绘制帧时递增它。

所以这是我的建议：

```
class glVideoRenderer implements GLSurfaceView.Renderer{
  private int frameNumber = 0;
  RandomAccessFile f;

  public glVideoRenderer(){
     try{
        f= new RandomAccessFile("//sdcard/8bitvid.bin", "r");
      }
      catch(...
  }

  public void onDrawFrame(GL10 unused){
     ..... // whatever you need here    
     f.seek(nP*frameNumber++);   //navigate to the correct frame,  frameNumber increments after the line is executed
     ....... // update whatever you need here.
  }

} 
```

# regex - 使用正则表达式在多行之间抓取文本

> ID：14465831
> 
> 赞同：1
> 
> 时间：2013-01-22T18:49:01.810
> 
> 标签：regex, vb.net

我试图从这个 HTML 页面代码中获取标签之前的单词 Juwelier。

我对 RegEx 不是很好，尤其是在多行上使用它。不会是动态的东西：

*   `<p>Rubriek:`
*   `class="category"`
*   当然还有html标签`<p> , </p> , <a> , </a>`

这是 HTML 页面代码

```
 <p>Rubriek: 

      <a href="http://www.detelefoongids.nl/juwelier/4-1/?oWhat=Juwelier"
         title="Juwelier"
         class="category">
           Juwelier
      </a>
   </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:45:10.547

下面的正则表达式是您可以使用的众多表达式之一。
它使用零宽度正向后视`(?<=)`和前瞻`(?=)`断言来定位目标字符串。

```
Dim str As String = _
"<p>Rubriek:" & vbCrLf &
"  <a href=""http://www.detelefoongids.nl/juwelier/4-1/?oWhat=Juwelier""" & vbCrLf &
"     title = ""Juwelier""" & vbCrLf &
"     class=""category"">" & vbCrLf &
"       Juwelier" & vbCrLf &
"  </a>" & vbCrLf &
"</p>"

Dim match As Match = Regex.Match(str, _
    "(?<=<p>Rubriek:[^>]+?class=""category"">\W*)\w+(?=\W*</a>)")

If (match.Success) Then
    MsgBox(match.Value)
End If 
```

尽管上面没有使用，但在尝试匹配多行时要记住的重要一点是，如果要使用通配符元字符，请使用单行模式`.`，以便匹配每个字符，*包括换行符*。这可以通过使用`RegexOptions.Singleline`或放在`(?s)`正则表达式的开头来指定。

`\w+`用于匹配一个或多个单词字符，即`a-zA-Z0-9_`
`\W*`用于匹配零个或多个非单词字符。
`[^>]`用于匹配不是`>`.

# email - Outlook Express 在行尾使用“=”保存 eml 文件

> ID：14465834
> 
> 赞同：4
> 
> 时间：2013-01-22T18:49:11.960
> 
> 标签：email, outlook, eml

我正在尝试从 OutLook Express 保存一个 .eml 文件，但保存的文件在某些​​行的末尾有字符“=”（等于）。

在源模式下编辑消息时，html 看起来很正常，只需保存它，“=”就会出现。

这对我不利，因为我会在发送之前在我的应用程序中编辑 .eml。我必须找到 /BODY 标签并插入一个文本。一个例子：

```
</DIV></DIV></DIV></DIV></DIV><FONT=20
style=3D"FONT-STYLE: normal; FONT-FAMILY: calibri; COLOR: rgb(0,0,0); =
FONT-SIZE: small; FONT-WEIGHT: normal"=20
face=3DCalibri><A=20
target=3D_blank></A></FONT></DIV></DIV></DIV></DIV></DIV></DIV></DIV></BO=
DY></HTML> 
```

在这种情况下，我找不到正文，因为它写为 BO=DY。

我曾尝试将其保存在各种编码中，但结果相同。为什么 OutLook 以这种方式保存它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T18:57:05.607

Outlook`=`用作*转义*符号。if`X`和`Y`are hex 数字`=XY`必须替换为带有 ASCII 码的字符`XY`。如果`=`后跟换行符，则必须删除此换行符并加入行。

Outlook 这样做是因为只有有限范围的字节值可以通过 SMTP 安全传输，并且必须引用此范围之外的字节。行长度也有限制，因此 Outlook 默认会拆分长度超过 75 个字节的行。我相信这被称为`Quotted-Printable`编码。

检查`Content-Transfer-Encoding:`.eml 文件中的标头并在应用过滤器之前通过解码器运行文件。并在过滤后再次编码。

# java - 如何使用 JSP 页面中的参数在 Java 类中搜索数据？

> ID：14465839
> 
> 赞同：1
> 
> 时间：2013-01-22T18:49:25.247
> 
> 标签：java, jquery, ajax, jsp, servlets

这是迄今为止我的项目的屏幕截图：

![在此处输入图像描述](../Images/e68a7b24d640ffc113cafb49c4e5f631.png)

这个程序的目的也是从我的 servlet 中的 ArrayList 中找到特定的类。您从左侧定义的内容中搜索您想要的课程（即 X 位置的课程、Y 学期和 Z 老师）。到目前为止，使用此代码，我可以检索屏幕截图中显示的每个类：

脚本：

```
//Serves up the data THIS IS THE WHAT GETS THE TABLE DATA
$('#btnData').click(function() {

    $("#searchAnimation").fadeTo(0,1, function(){
        $.get('daoServlet', function(responseText) {
            $('#dataDisp').html(responseText);
        }).complete(function(){$("#searchAnimation").fadeTo(0,0);});
    });

}); 
```

爪哇：

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException
{
    //String that gets returned as HTML
    StringBuilder returnAsHTML = new StringBuilder();

    //See if the class is closed, has a lab, or is just a regular class
    for(ClassInfo classes : allClassListings)
    {
        //Class is full, style accordingly
        if(classes.getSectionMeetingInfo().contentEquals("LEC") && classes.getSectionEnrolled().contentEquals("0"))
        {
            returnAsHTML.append(closedClass(classes));
        }
        else if(classes.getSectionMeetingInfo().contentEquals("LAB")) //These are labs, style accordingly
        {
            returnAsHTML.append(labClass(classes));
        }
        else //These are normal classes without lab components
        {
            returnAsHTML.append(openClass(classes));
        }

    }

    response.setContentType("text/html");
    response.setCharacterEncoding("UTF-8");
    response.getWriter().write(returnAsHTML.toString());
} 
```

我的问题是，我将如何开始发送​​用户在 JSP 页面上选择的数据，然后通过 ArrayList 排序找到它？我知道我可以使用 <% //code %> 直接将 java 代码注入 JSP 页面，但由于项目要求，我不能在页面本身的正文中编写脚本，它全部都在外部链接。

例如，如果用户选中了 Location 下的“Springfield”，并在学期下选择了“Summer”，则它应该生成一个夏季 Springfield 中所有课程的表格。**我只是不知道如何/从哪里开始学习如何发送这些参数以在 servlet 中搜索。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:54:41.633

根据[文档，您可以](http://api.jquery.com/jQuery.get/)[将`$.get()`](http://api.jquery.com/jQuery.get/)JS 对象作为第二个参数（`data`在文档中调用）传递。

因此，以下示例应该为您完成：

```
// Do your thing to prepare them.
var param1 = "value1";
var param2 = "value2";

// Now send it as JS object.
$.get('daoServlet', { param1: param1, param2: param2 }, function(responseText) {
    // ...
}); 
```

它们位于通过`HttpServletRequest#getParameter()`通常方式可用的 servlet 中。

```
String param1 = request.getParameter("param1"); // value1
String param2 = request.getParameter("param2"); // value2 
```

如果您实际上是在对 HTML 进行 ajaxifying `<form>`，那么您还可以使用它[`$.serialize()`](http://api.jquery.com/serialize/)来发送整个表单数据，而不是手动摆弄单个输入元素的松散值。这是一个假设它是的示例`<form id="search">`：

```
$.get('daoServlet', $('#search').serialize(), function(responseText) {
    // ...
}); 
```

或者

```
$('#search').submit(function() {
    $.get('daoServlet', $(this).serialize(), function(responseText) {
            // ...
    });
}); 
```

### 也可以看看：

*   [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax/)

# python - 如何在 Python 中控制 GAE 日志记录？

> ID：14465848
> 
> 赞同：0
> 
> 时间：2013-01-22T18:50:05.547
> 
> 标签：python, google-app-engine

我需要帮助来弄清楚默认 GAE python 日志中的字段是什么。然后我需要弄清楚如何控制日志中显示的内容。

我在 GAE Python 应用程序日志条目中看到以下内容。一些实际的识别数据已更改：

```
2013-01-22 12:39:58.002 /api/v1/entrypoint 400 768ms 0kb Mozilla/5.0 (Linux; U; Android 2.3.3; en-ca; GT-I9100M Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
204.101.237.139 - user [22/Jan/2013:09:39:58 -0800] "POST /api/v1/entrypoint HTTP/1.1" 400 188 "http://www.mysite.com/view/?csrfmiddlewaretoken=XXXX&formfield_1=Abc+Def+G&formfield_2=xyz"Mozilla/5.0 (Linux; U; Android 2.3.3; en-ca; GT-I9100M Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1" "www.mysite.com" ms=768 cpu_ms=172 cpm_usd=0.000081 instance=00c61b137c6d7e0a2f5a15b9210fc3134c24b7 
```

这是在基于 Django 的站点上运行的，在该站点上向用户呈现[http://www.mysite.com/view](http://www.mysite.com/view)的表单被提交到[http://www.mysite.com/api/v1/entrypoint](http://www.mysite.com/api/v1/entrypoint)。日志来自表单提交。

首先，我相信所有这些日志都是由 GAE 自动生成的。我没有记录这些信息，尽管 Django 框架有可能在我不知道的地方生成日志。

我想从日志中隐藏表单数据提交。我认为我没有看到每次提交表单时都会记录表单数据。谁能提出为什么它以某些形式出现而不是其他形式？

有没有办法控制 GAE 日志记录，以便不记录表单数据？虽然它对调试很有用，但我担心安全性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:08:37.537

记录的字段记录在[RequestLog](https://developers.google.com/appengine/docs/python/logs/requestlogclass)类中。

带有表单数据的字段是引用者。您可以使视图改为使用 post 来防止字段被记录。

# java - 为什么我得到“这里不允许使用'void'类型”？

> ID：14465849
> 
> 赞同：0
> 
> 时间：2013-01-22T18:50:05.457
> 
> 标签：java, binary-search-tree

对于以下代码，我收到以下错误：

```
SearchTree.java:19: error: 'void' type not allowed here
  this.setRoot(this.insertgt(this.insertionSort(value))); 
```

有什么问题？

代码：

```
import java.util.Arrays;

public class SearchTree {
    private TreeNode root;
    private static int sum = 0;
    public void setRoot(TreeNode n){
        this.root = n;  
    }

    public TreeNode getRoot(){
        return this.root;   
    }

    // returns a SearchTree
    public void insert(int[] value) {
        System.out.println(value == null);
        this.setRoot(this.insertgt(this.insertionSort(value)));
    }

    public void insertgt(int[] value) {
        if (value.length == 0) return;
        TreeNode currentNode;
        currentNode.left = new TreeNode(ArrayMinimum.minimum(value));
        if (value.length > 0) {
            currentNode = new TreeNode(insertgt(value));
            currentNode.right = new TreeNode(insertgt(value));
        }
        return currentNode;
    }

    // returns sum of node.values
    public int sum() {
        if (this.left == null && this.right == null) return sum;
        sum = this.value + sum;
        if (this.left != null && this.right != null) {
            sum = this.left.sum();
            sum = this.right.sum();
        }
    }

    // returns number of nodes
    public int numberOfLeafs() {
        if (this.left == null && this.right == null)
            return(1 + this.left.numberOfLeafs() + this.right.numberOfLeafs());
        return(1 + this.left.numberOfLeafs() + this.right.numberOfLeafs() );
    }   

    // returns zahl if searchTree contains zahl
    public int search(int zahl) {
        if (this.value == zahl) return null;
        return(1 + this.left.search(zahl) + this.right.search(zahl));
    }   

    public int[] insertionSort(int[] data) {
        for(int i = 1; i < data.length; i++) {
            int t = data[i];
            int j = i - 1;
            while(j >= 0 && data[j] > t) {
                data[j + 1] = data[j];
                j--;
            }
            data[j + 1] = t;
        }
        return data;
    }   
}

class ArrayMinimum {
    // removes and returns the minimum element
    static int minimum(int [] v) {
        int min = v[0]; 
        for (int i = 0; i < v.length; i++) {
            if (v[i] < min) {
                min = v[i];
            }
        }
        ArrayUtils.remove(value, min);
        return min;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:53:26.553

```
 this.setRoot(this.insertgt(this.insertionSort(value))); 
```

`insertgt`方法似乎返回`void`并且您将其传递给`setRoot`期望 a 的方法`TreeNode`，这就是您收到错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:53:55.390

方法 setRoot 期望接收一个 TreeNode 作为参数，问题是您将作为参数传递的方法 insertgt 的结果是无效的，您必须从 insertgt 方法返回一个 TreeNode 对象

```
this.setRoot(this.insertgt(this.insertionSort(value))); 
```

# vb.net - 显示主机名和 IP 地址

> ID：14465854
> 
> 赞同：0
> 
> 时间：2013-01-22T18:50:16.013
> 
> 标签：vb.net, hostname

我正在尝试为我们网络上的用户创建一个工具，以向 IT 部门报告他们的 PC 主机名和 IP 地址。为了寻求帮助，我们有一个仓库部门，喜欢在 PC 和用户之间来回移动，所以我无法可靠地判断谁在哪台 PC 上。这是一种快速阻止他​​们说出“Jim 的 PC”并让他们给我提供有用信息的方法，例如“WAREHOUSE_WINXP_4”。

我创建了我认为应该是一个工作程序，虽然它编译和执行没有错误，但我似乎无法正确设置文本框内容。该程序非常简单——只是一个带有 2 个文本框的表单。

（注意：我更像是 sysadmin/netadmin/infosec 专家，所以我可能在这里犯了一些 id10t 错误，但我自己有点没有想法。）

```
Public Class Form1
    Dim strHostname As String
    Dim strIPAddress As String

    Public Sub getHostname()
        strHostname = System.Net.Dns.GetHostName()
        'txtHostname.Text = strHostname  Apparently putting it here won't work.  In Load() maybe?
    End Sub

    Public Sub getIPAddress()
        strIPAddress = System.Net.Dns.GetHostEntry(strHostname).AddressList(0).ToString()
        'txtIPAddress.Text = strIPAddress Apparently putting it here won't work.  In Load() maybe?
    End Sub

    Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        getIPAddress()
        getHostname()
        txtHostname.Text = strHostname
        txtIPAddress.Text = strIPAddress
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:05:39.643

正如其他人所提到的，您以错误的顺序调用这些方法。您的`getIPAddress`方法使用该`strHostname`变量。`strHostname`变量由方法设置`getHostname`。因此，您需要先调用`getHostname`，然后才能调用`getIPAddress`。

但是，真正的问题是您设计的代码*可能*会以错误的顺序调用方法。最好不要有这样容易导致错误的隐藏规则。例如，如果您编写这样的代码，则调用方法的顺序将不再重要：

```
Imports System.Net

Public Class Form1
    Public Function GetHostName() As String
        Return Dns.GetHostName()
    End Sub

    Public Function GetIpAddress() As String
        Return Dns.GetHostEntry(GetHostname()).AddressList(0).ToString()
    End Sub

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
        txtHostname.Text = GetHostName()
        txtIPAddress.Text = GetIpAddress()
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:00:34.817

`strHostname`您在对 的调用中设置全局变量的值`getHostname`，但在对 的调用中使用了该变量`getIPAddress`。但是，您在调用`getIPAddress` *之前先*调用`getHostName`。颠倒调用的顺序，它应该可以工作。

更好的是，您可能会重新考虑使用全局变量来防止这样的依赖关系。函数参数将以更容易调试的方式工作。您可以将`System.Net.Dns.GetHostEntry(strHostname).AddressList(0).ToString()`其用作`getIPAddress`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:00:47.877

更改您的`getIPAddress`和`getHostname`方法调用的顺序。您正在方法中使用该`strHostname`值`getIPAddress`，但尚未为其分配值。

# javascript - 如何自动分析我的页面的 JavaScript？

> ID：14465855
> 
> 赞同：2
> 
> 时间：2013-01-22T18:50:19.447
> 
> 标签：javascript, testing, profiling, benchmarking

我有一个包含大量 JavaScript 的网页。我应该优化页面的性能。

理想情况下，我想设置一个自动测试，它将悬停在页面周围并单击几件事。完成测试后，我想要页面上的 JavaScript 执行配置文件。这样我可以进行更改，看看页面是否会运行得更快。

如果我不能达到这个理想的目标，在自动化和标准化我的网页性能测试方面，我能做的最好的事情是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:21:40.000

这很难，总有一天我会把它作为我的开发程序的一部分。唯一经过验证的解决方案是**持续开发**实践：

将自动化 JS 测试与构建服务器一起使用

您可以在[此处找到用于 js 测试的优秀框架列表](https://stackoverflow.com/questions/300855/looking-for-a-better-javascript-unit-test-tool)

您的构建服务器必须支持客户端 javascript 执行，因为我知道有[phantomJS](http://phantomjs.org/index.html)脚本与不同的构建服务器有很多集成，例如与众所周知的[Jenkins](http://www.readmore.ch/post/18940470535)之一。

完整地说，您可以使用[Selenium](http://seleniumhq.org/)之类的工具来代替构建服务器，但个人认为这不是正确的方法，尽管它也可能效果很好。

# json - Jsonc 不能在 IE 上运行？

> ID：14465857
> 
> 赞同：0
> 
> 时间：2013-01-22T18:50:28.440
> 
> 标签：json, jquery, youtube-api

以下代码 - 带有缩略图的 youtube 加载器 - 在 FF 和 Chrome 中有效，但在 IE 中无效。我想知道这是否与 Jsonc 通话有关。我听说最好在 IE 中使用 Jsonp。尽管如此，我还是想在我的项目中使用 Jsonc。请问有人能告诉我这个问题吗？我被困住了...

```
<script>
var player;

$(document).ready(function(){

    window.onYouTubeIframeAPIReady = function() {
        player = new YT.Player('video', {
            events: {
                'onReady': function () {
                     $.getJSON("http://gdata.youtube.com/feeds/api/users/diasporaduo/uploads?v=2&alt=jsonc", function (json) {
                         videoid = json.data.items[0].id;
                            player.cueVideoById(videoid);
                    });
                }
            }
        });
    }

});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:47:27.003

What you're trying to do is make a CORS call, and that's not supported in Internet Explorer versions earlier than 10: [http://apiblog.youtube.com/2012/05/unlocking-javascripts-potential-with.html](http://apiblog.youtube.com/2012/05/unlocking-javascripts-potential-with.html)

You should use JSONP if you care about compatibility with older versions of IE. jQuery makes that pretty easy with its `$.ajax()` method.

# html - 使用 Adob e Illustrator 导出到 SVG 的 SVG 在 Raphael.js 中无法很好地显示

> ID：14465859
> 
> 赞同：0
> 
> 时间：2013-01-22T18:50:32.577
> 
> 标签：html, svg, raphael, adobe-illustrator, eps

[我从http://all-free-download.com/free-vector/vector-misc/animal_character_illustrations_58511.html](http://all-free-download.com/free-vector/vector-misc/animal_character_illustrations_58511.html)下载了 Adob​​e illustrator 文件

并使用 Adob​​e illustrator 打开，然后将其导出为 SVG，并尝试使用 raphael.js 在 Html 页面上显示它。SVG 显示在 html 上，但它看起来已损坏，某些颜色已更改并且行已移动。

有没有人有从 Illustrator 导出到 SVG 并使用 Raphael.js 的经验。任何想法都会很棒。

我还尝试使用 jquery.vectron 来显示 SVG 以及[http://readysetraphael.com/](http://readysetraphael.com/)转换器，但同样糟糕的结果。如果有人会尝试这个并告诉我我做错了什么会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:17:48.780

假设您使用 Raphael.js 进行 IE8=< 覆盖，我必须从您的 readysettraphael.com 链接中注意到，radialGradients“径向渐变仅呈现部分准确”（我从 illustrator 文件生成的 SVG 包含多个）。

# asp.net-mvc - Moq MembershipProvider

> ID：14465860
> 
> 赞同：0
> 
> 时间：2013-01-22T18:50:33.920
> 
> 标签：asp.net-mvc, tdd, moq

我正在尝试使用 Moq 来模拟 MembershipProvider。我收到以下错误

{"访问路径'C:\PROGRAM FILES\MICROSOFT VISUAL STUDIO 11.0\

我猜我没有正确地嘲笑 MembershipProvider。通常我会做一个 mock.Object() 来获取新的模拟对象，但我不确定如何处理我的模拟 MembershipProvider。

```
[TestMethod]
public void LogUserIntoSystem_post_CorrectUsernameAndPassword()
{
    var model = new LoginModel
    {
        LoginName = "Bobby",
        Password = "bob",
        RememberMe = true
    };

    var membership = new Mock<MembershipProvider>();
    membership.Setup(x => x.ValidateUser("Bobby", "bob")).Returns(true);
    var controllerUnderTest = _testModel.ReturnController();

    //act
    controllerUnderTest.Login(model, string.Empty);

    //assert
    var actionResult = (RedirectToRouteResult)controllerUnderTest.Home();
    Assert.AreEqual("Home", actionResult.RouteValues["action"]);
    Assert.AreEqual("P", actionResult.RouteValues["controller"]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:09:11.467

我看不到你在哪里使用`MembershipProvider`

因此，从外到内，控制器似乎实际上在使用一个真实的或具体的 MembershipProvider。在 MSDN 上检查后，该类是一个抽象基类，因此 Moq 应该可以与该类一起使用，尽管我会推荐一种不同的方法。

```
class TwistedInfernosMembershipProvider : IMembershipProvider
{
    public bool ValidateUser(string username, string password) 
    { 
        // Call the real .NET membership provider here...
    }
} 
```

然后在您的控制器中，我将执行以下操作：

```
var testProvider = new Mock<IMembershipProvider>();
testProvider.Setup(x => x.ValidateUser("Bobby", "bob").Returns(true);
var subject = new ControllerUnderTest(testProvider.Object()); 
```

通过这样做，您已经抽象了如何验证用户的详细信息。您可以为任何实现 IMembershipProvider 的类切换此实现，您的代码或测试甚至都不会关心。这也意味着你可以很容易地用这个抽象来测试你的控制器。请记住，Moq 需要一个接口或基类/虚拟方法才能正常运行。

查看这篇论文 [PDF]，了解为什么应该[模拟角色而不是对象](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://jmock.org/oopsla2004.pdf&ei=yuQgUfniDsSm4ASc2IDgCQ&usg=AFQjCNG1hoMD7NunoONsaOmVDgaQYkNmFA&sig2=_DeZ_Jfv2ijQDk_zI323yg&bvm=bv.42553238,d.bGE)以获取更多信息。

# ios - 我应该如何在 xcode 故事板中链接视图控制器？

> ID：14465861
> 
> 赞同：2
> 
> 时间：2013-01-22T18:50:36.383
> 
> 标签：ios, uiviewcontroller, xcode4.5, uistoryboard, uistoryboardsegue

我想在 xcode 故事板中链接视图控制器以实现以下效果：

A -> B -> C -> D -> E -> B -> C -> D -> E -> B -> ...

其中上述字母代表单独的视图控制器（全尺寸场景）。我希望在视图之间进行从右到左的水平滑动转场，并且我不希望或不需要保留先前视图的状态（即没有推送或模态转场）。我确实需要在视图之间转移一些状态。

关于如何使用故事板编辑器、代码或两者的某种组合来最好地实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T19:11:32.367

我有几个选择：

1.  与旧版本的 iOS 具有最大向后兼容性的最简单的解决方案是使用导航控制器，在`B`某处保留对视图控制器的引用，然后您可以在 处`E`进行一些`IBAction`操作：

    ```
    [self.navigationController popToViewController:B animated:YES]; 
    ```

    在这个模型中，所有的 segues 都将在故事板中表示，除了 from `E`to `B`，您可以在 an `IBAction`（或其他）中使用上面的代码。

2.  如果你可以抛弃 iOS 5 的兼容性，你也可以使用`unwind`segue。在这种情况下，所有的转场都将在故事板中表示。但是我们中的许多人还不愿意放弃 iOS 5 的兼容性，所以也许你不想考虑这个解决方案。但是，如果您确实想使用展开转场，您只需在 中定义一个展开动作`B`，例如：

    ```
    - (IBAction)backToB:(UIStoryboardSegue *)segue
    {
        // if you need to do any UI update because we got an unwind segue
        // back to this controller, do that here
    } 
    ```

    一旦你在 IB 中有这个 unwind 动作`B`，你会突然`backToB`在 IB 中看到一个新的 segue 类型（不过，我建议你给它一个更好的名字），你可以使用它来从`E`到`B`。显然，所有其他的 push segues 都会像往常一样出现在你的故事板中。

3.  如果您真的不想使用导航控制器，但又不需要 iOS 4 兼容性，您也可以使用视图控制器包含来实现这一点，其中您有一个父自定义容器控制器`ParentVC`，并且`A`通过`E`将是子控制器。然后，您可以使用自定义 segues 在子控制器序列中进行转换。

4.  最后一种变体可能如下：

    ![BABCDE](../Images/826ca6b0a27ba8becb511697d3374a11.png)

    在这种情况下，就像选项 1 一样，您只是使用导航控制器，当`B`第一次加载时，它将以编程方式立即执行以下操作`viewDidLoad`

    ```
    [self presentViewController:A animated:NO]; 
    ```

    虽然`B`是根视图控制器，但感觉就像`A`是。完成`A`后它会解散回`B`，此时您可以执行您的标准`B`- `C`-推动 segue 进程，但是因为我们制作`D`了根控制器，所以可以返回到，并且您无需担心保持指向周围的指针。如果是登录控制器或启动屏幕，或者有些超出正常流程的东西，这个模型很有意义。`E``B``E``popToRootViewControllerAnimated``B``B``A`

其中，1 可能是最简单的，2 可能被认为是最优雅的（尽管您失去了 iOS 5 和更早的支持），如果您不介意编写更多（某些复杂的）代码并且内存使用至关重要，则可以选择 3 , 和 4 和 1 一样，非常简单，但这只是流程是否对您的应用有意义的问题。就个人而言，我倾向于选项 1 或 4，这取决于视图控制器`A`是什么。如果需要 iOS 4 兼容性，这两个选项也适用于 NIB。

# java - Cron 作业检查存储在 mysql 数据库中的每个用户的邮箱的所有文件夹

> ID：14465864
> 
> 赞同：0
> 
> 时间：2013-01-22T18:50:46.507
> 
> 标签：java, cron, imap, jakarta-mail, cron-task

我正在使用`javamail`阅读邮箱。现在我需要轮询邮箱并检查是否收到、发送、保存草稿等任何新邮件。有什么好的方法可以做到这一点`push mail`？现在我正在接受`imap`并且`gmail`必须扩展对`pop3`其他常见电子邮件帐户的支持。所以我想知道在大多数情况下使用什么以及如何做到这一点。是否有任何计划作业支持`javamail`立即触发邮箱中的任何活动并读取它或任何现成的脚本可用以查找数据库中每个用户的邮箱的所有文件夹并立即触发java代码来读取用户的邮件对于定期间隔时间的任何新电子邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:05:59.087

调度作业与 JavaMail 完全正交。您可以在 Java 中找到许多作业调度的解决方案；选择一个你喜欢的然后写一个使用 JavaMail 的工作。

检查您描述的那种“新”活动并非易事。您将需要跟踪每个用户的邮箱状态，以便下次查看邮箱时可以看到发生了什么变化。

当然，为多个用户执行此操作意味着您需要拥有所有这些用户的身份验证凭据（例如密码）。

使用 pop3 完成这一切基本上是不可能的，因为您只能访问用户的收件箱。

# javascript - javascript -- 锚标记解析为 chrome://plugins

> ID：14465867
> 
> 赞同：0
> 
> 时间：2013-01-22T18:50:59.843
> 
> 标签：javascript, html, google-chrome, plugins

我有一个网站，我们需要使用 Adob​​e Reader 的插件，结果我们遇到了 Chrome 内置的通用 PDF 插件的问题

（注意：请不要用“如果您对通用 PDF 插件有问题，请向 Chrome 提交错误，以便我们修复此问题”来回答这个问题......我们有特定的理由需要 Adob​​e 插件.. .这不是关于该主题的问题）

结果，我构建了一个脚本来检查通用插件是否是当前活动的插件（基于 'navigator.mimeTypes["application/pdf"].enabledPlugin.name'），这非常适合告诉我们的客户他们没有启用正确的插件。从那里我们提示他们启用正确插件的分步说明。

话虽如此，如果我们可以告诉他们单击链接以启动插件管理页面，而不是告诉他们在他们的网络浏览器中输入“chrome://plugins”，那将是理想的

我尝试将 'chrome://plugins/' 和 'about:plugins' 设置为锚标记的 href 位置，但单击它什么也没做（我认为这是设计使然）...我也尝试使用 window.open ('chrome://plugins') 和 'about:plugins' 这也不起作用...是否可以从 javascript 启动此页面？

如果这不是一个选项，我们可以编写一个 chrome 扩展来自动为我们的客户切换活动插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:59:04.573

如果用户在锚元素上单击（这是用户发起的操作）时未遵循 URI，则*无法*通过自动方式打开给定的 URI ¹。

Chrome 将其视为“受限协议” ，*除了*手动输入位置栏外`file://`，*不会*支持任何导航（例如，用户单击、拖放、模拟单击、window.open、location.href 等）.

 ** * *

¹这假定没有额外的插件/扩展来促进此操作（即[LocalLinks](https://chrome.google.com/webstore/detail/locallinks/jllpkdkcdjndhggodimiphkghogcpida?hl=en)），并且该操作是从“不受信任的”页面/文档启动的。*

# java - ClassNotFoundException 存储自己的原因副本

> ID：14465871
> 
> 赞同：1
> 
> 时间：2013-01-22T18:51:26.193
> 
> 标签：java, classnotfoundexception, standard-library

我有 Oracle 的 Java 实现（1.6.0_37），我对`ClassNotFoundException`源代码很感兴趣。如果你查看它，你会看到这个类存储了它自己的原因副本：

```
private Throwable ex; 
```

我只是看不出它有什么意义——它与`Throwable`类中声明的字段完全相似。

谁能解释一下为什么 Java 类库开发人员决定这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:57:10.867

可能是因为没有人想删除它。

被`cause`添加到`Throwable`JDK [1.4](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Throwable.html)中；它不存在于[1.3](http://docs.oracle.com/javase/1.3/docs/api/java/lang/Throwable.html)中。

但是，[1.3](http://docs.oracle.com/javase/1.3/docs/api/java/lang/ClassNotFoundException.html)版本`ClassNotFoundException`确实有原因，因为当静态初始化程序失败时（实际上是由于任何加载问题），可能会发生此异常，并且在不知道原因的情况下进行调试可能会非常令人沮丧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:18:26.247

可能是他们希望向后兼容使用旧 Java 版本序列化的异常对象。保留字段似乎比维护自定义 writeObject/readObject 方法更简单。

# php - while 循环内的 while 循环

> ID：14465874
> 
> 赞同：0
> 
> 时间：2013-01-22T18:51:29.803
> 
> 标签：php, while-loop, addition

我很确定你可以在 while 循环中放置一个 while 循环，就像我以前做过的那样，但我似乎在这里遇到了问题。由于这非常复杂，请发布我的代码然后解释它。

PHP：

```
//post vars
$port=$_POST['ports'];
$super=$_POST['super'];
$col=$_POST['columns'];
$row=$_POST['rows'];
//rest of vars
$half_col=$col/$super;
$halfer_col=$col/$super;
$i=1;
$count=1;
$and=1;
$one=1;
$sector=array();
$dat_array=array();

echo $port."<br>";

echo $super."<br>";

echo $col."<br>";

echo $row."<br><br><br><br>";
echo "<h1>here goes nothen</h1><br><br>";

while($count<$port){
    while($i<=$half_col){
        $dat_array[]=$halfer_col;
        $i+=$and;
        $halfer_col-=$and;
        echo "<br>halfer_col:".$halfer_col."<br>";
    }
print_r($dat_array);
$sector[]=implode(',',$dat_array);
$count+=$half_col;
$halfer_col+=$half_col;
}

echo "<br><br>ANNNNNNND...<br><br>";
print_r($sector); 
```

现在，这是用户输入 port:24 super:2 col:12 row:2 结果：

```
24
2
12
2

here goes nothen

halfer_col:5

halfer_col:4

halfer_col:3

halfer_col:2

halfer_col:1

halfer_col:0
Array ( [0] => 6 [1] => 5 [2] => 4 [3] => 3 [4] => 2 [5] => 1 ) Array ( [0] => 6 [1] => 5 [2] => 4 [3] => 3 [4] => 2 [5] => 1 ) Array ( [0] => 6 [1] => 5 [2] => 4 [3] => 3 [4] => 2 [5] => 1 ) Array ( [0] => 6 [1] => 5 [2] => 4 [3] => 3 [4] => 2 [5] => 1 ) 

ANNNNNNND...

Array ( [0] => 6,5,4,3,2,1 [1] => 6,5,4,3,2,1 [2] => 6,5,4,3,2,1 [3] => 6,5,4,3,2,1 ) 
```

基本上，它接受用户输入，将其分解并以基于“，”的探测器顺序内爆。但是据我所知，它没有在这里添加：`$halfer_col+=$half_col;`这导致数据不增加，任何人有什么想法吗？甚至解释为什么这不会以设置方式添加和影响我的内部while循环。

最后的最终数组应该是这样的：

```
Array ( [0] => 6,5,4,3,2,1 [1] => 12,11,10,9,8,7 [2] => 18,17,16,15,14,13 [3] => 24,23,22,21,20,19 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:30:51.977

您可以将代码更改为以下内容：

```
$port = (int)$_POST['ports'];
$super = (int)$_POST['super'];
$col = (int)$_POST['columns'];
$row = (int)$_POST['rows'];

$colHalf = $col / $super;

$finalArray = array();
for ($i = $port; $i >= 1; $i -= $colHalf) {
    $tempArray = array();
    for ($j = 0; $j < $colHalf; $j++) {
        $tempArray[] = $i - $j;
    }
    $finalArray[] = implode(",", $tempArray);
}
$finalArray = array_reverse($finalArray);

echo "<pre>" . print_r($finalArray, true) . "</pre>"; 
```

这将打印您想要的内容（端口 = 24，超级 = 2，列 = 12，行 = 2）：

```
Array
(
    [0] => 6,5,4,3,2,1
    [1] => 12,11,10,9,8,7
    [2] => 18,17,16,15,14,13
    [3] => 24,23,22,21,20,19
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:59:08.033

您可以尝试将外部 while 设为 for 循环。

```
for(; $count<$port; $count+=$half_col){
    while($i<=$half_col){
        $dat_array[]=$halfer_col;
        $i+=$and;
        $halfer_col-=$and;
        echo "<br>halfer_col:".$halfer_col."<br>";
    }
print_r($dat_array);
$sector[]=implode(',',$dat_array);
$halfer_col+=$half_col;
} 
```

# activemq - 使用 spring camel 和 atomikos 的 ActiveMQ.Advisory.Consumer.Queue 主题泛洪

> ID：14465879
> 
> 赞同：2
> 
> 时间：2013-01-22T18:51:46.030
> 
> 标签：activemq, apache-camel, spring-jms, atomikos

想知道在使用 Atomikos + Camel + ActiveMQ 的组合时是否有人遇到过这个问题。我正在使用此组合以交易方式从队列中剥离消息。它似乎运作良好。问题是我现在处于需要在 ActiveMQ 中打开咨询消息的情况。在我这样做之后，我注意到所有队列都在不断地重新创建连接。ActiveMQ.Advisory.Consumer.Queue 主题的泛滥证明了这一点。在 DEBUG 日志中也很明显，因为它不断创建连接、打开事务、提交事务并关闭连接。这发生在没有任何实际应用程序生成的消息的情况下。所有其他非事务队列/主题都没有这个问题。我在其他几篇文章中读到了连接池和缓存可以缓解这个问题。看来我不应该使用缓存，而且我已经在连接池了。我正在使用这个配置：

```
<bean id="txq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="configuration" ref="txJmsConfig" />
</bean>
<bean id="txJmsConfig" class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="atomikosConnectionFactory" />
    <property name="concurrentConsumers" value="1" />
    <property name="transacted" value="true" />
    <property name="maxConcurrentConsumers" value="${consumers.concurrent.max}" />
    <property name="transactionManager" ref="jtaTransactionManager" />
    <property name="cacheLevelName" value="CACHE_NONE" />
</bean>
<bean id="atomikosConnectionFactory" class="com.atomikos.jms.AtomikosConnectionFactoryBean"
    init-method="init" destroy-method="close">
    <property name="uniqueResourceName">
        <value>XA-JMS-ATOMIKOS</value>
    </property>
    <property name="localTransactionMode">
        <value>false</value>
    </property>
    <property name="poolSize">
        <value>4</value>
    </property>
    <property name="xaConnectionFactory">
        <ref bean="xaJmsConnectionFactory" />
    </property>
</bean>
<bean id="xaJmsConnectionFactory" class="org.apache.activemq.ActiveMQXAConnectionFactory">
    <property name="brokerURL"
        value="${queue.address}?jms.watchTopicAdvisories=false&amp;jms.prefetchPolicy.all=0" />
</bean>
<bean id="userTransactionService" class="com.atomikos.icatch.config.UserTransactionServiceImp"
    init-method="init" destroy-method="shutdownForce">
    <constructor-arg>
        <props>
            <prop key="com.atomikos.icatch.service">
                com.atomikos.icatch.standalone.UserTransactionServiceFactory
            </prop>
            <prop key="com.atomikos.icatch.max_actives">${batch.transactions.concurrent.max}</prop>
        </props>
    </constructor-arg>
</bean>
<bean id="atomikosTransactionManager" class="com.atomikos.icatch.jta.UserTransactionManager"
    init-method="init" destroy-method="close" depends-on="userTransactionService">
    <property name="forceShutdown" value="false" />
</bean>
<bean id="atomikosUserTransaction" class="com.atomikos.icatch.jta.UserTransactionImp">
    <property name="transactionTimeout" value="300" />
</bean>
<bean id="jtaTransactionManager"
    class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager" ref="atomikosTransactionManager" />
    <property name="userTransaction" ref="atomikosUserTransaction" />
</bean> 
```

它使用了我认为实现池的 AtomikosConnectionFactoryBean。也许我错了？我很想知道是否有其他人和我一起在这艘船上，以及他们做了什么来修复它。

**@PeterSmith 建议实施**

彼得，谢谢你的建议。我将配置更改为使用 XaPooledConnectionFactory。春天对此并不满意。它认为 XaPooledConnectionFactory 没有实现 XAConnectionFactory。

```
<bean id="atomikosConnectionFactory" class="com.atomikos.jms.AtomikosConnectionFactoryBean"
    init-method="init" destroy-method="close" depends-on="xaJmsPooledConnectionFactory">
    <property name="uniqueResourceName">
        <value>XA-JMS-ATOMIKOS</value>
    </property>
    <property name="localTransactionMode">
        <value>false</value>
    </property>
    <property name="maxPoolSize">
        <value>32</value>
    </property>
    <property name="xaConnectionFactory">
        <ref bean="xaJmsPooledConnectionFactory" />
    </property>
</bean>
<bean id="xaJmsPooledConnectionFactory" class="org.apache.activemq.pool.XaPooledConnectionFactory"
     init-method="start" destroy-method="stop" depends-on="xaJmsConnectionFactory">
    <property name="maxConnections" value="2" />
    <property name="connectionFactory" ref="xaJmsConnectionFactory" />
</bean> 
<bean id="xaJmsConnectionFactory" class="org.apache.activemq.ActiveMQXAConnectionFactory">
    <property name="brokerURL"
        value="${queue.address}?jms.watchTopicAdvisories=false&amp;jms.prefetchPolicy.all=0" />
</bean> 
```

java.lang.IllegalStateException：无法将类型 [org.apache.activemq.pool.XaPooledConnectionFactory] ​​的值转换为属性“xaConnectionFactory”所需的类型 [javax.jms.XAConnectionFactory]：找不到匹配的编辑器或转换策略

文档指出 XaPooledConnectionFactory 类实现了 javax.jms.XAConnectionFactory，所以我现在有点迷失了。看来这应该有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:11:27.573

使用上述组合，我也看到了这一点。

似乎是 Spring DMLC（它正在实现骆驼 jms 消费者）正在使用一个 consumer.receive() 循环来能够在 XA 事务中登记读取操作。

如果没有在 DMLC 中进行 XA 缓存，甚至没有使用不轮询的 SMLC，都是可能的。

尝试将您的 activemq CF 包装在 org.apache.activemq.pool.PooledConnectionFactory 中，看看是否有帮助。

# spring - 如何以一种方法正确注入 Spring Environment 而不是另一种方法？

> ID：14465882
> 
> 赞同：5
> 
> 时间：2013-01-22T18:51:57.183
> 
> 标签：spring, spring-annotations, spring-data-neo4j

`neo4jDatabase()`很好，但`environment`总是为空`graphDatabaseService()`......如何/为什么？

```
@Configuration
@PropertySource("classpath:/neo4j.properties")
@EnableNeo4jRepositories("reservation.repository.neo4j")
public class Neo4jConfig extends Neo4jConfiguration {

    @Inject
    Environment environment;

    @Bean(initMethod = "setupDb")
    public Neo4jDatabase neo4jDatabase() {
        // Environment fine here...
        return new Neo4jDatabase(this.environment.getProperty("data.file.path"));
    }

    @Bean(destroyMethod = "shutdown")
    public GraphDatabaseService graphDatabaseService() {
        if (environment == null) {
            // Always gets here for some reason...why?
            return new EmbeddedGraphDatabase("/Temp/neo4j/database");
        } else {
            return new EmbeddedGraphDatabase(this.environment.getProperty("database.path"));
        }
    }
} 
```

版本：Spring 3.2.0.RELEASE、spring-data-neo4j 2.1.0.RELEASE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T19:21:48.107

如果其他人遇到同样的问题 - 以下对我有用：

```
@Configuration
@PropertySource("classpath:neo4j.properties")
@EnableNeo4jRepositories(basePackages = "com.mydomain.neo4j.repo")
public class Neo4jConfig 
{
    @Autowired
    Environment environment;

    @Bean(name="graphDatabaseService", destroyMethod = "shutdown")
    public GraphDatabaseService getGraphDatabaseService() 
    {
        // any custom graph db initialization
        return new EmbeddedGraphDatabase(this.environment.getProperty("database.path"));
    }
} 
```

注意：我没有扩展 Neo4jConfiguration。它只是调整成自动装配依赖项的意大利面条，其中环境成员变量在初始化 graphDatabaseService 所需的时间从未设置。您*可以*使用 a 使其工作，`@PostConstruct`但最终会得到一堆`NotInTransactionException`'。我没有时间深入研究原因 - 相反，在您的主 AppConfig 类中，您只需导入您的自定义 Neo4j 配置以及基本的抽象 Neo4j 配置类。本质上，您正在代码中执行 XML 配置将执行的操作。

```
@Configuration
@Import({Neo4jConfig.class, Neo4jConfiguration.class})
@ComponentScan(basePackages = {"com.mydomain"}, excludeFilters = @Filter({Controller.class, Configuration.class}))
public class MainConfig
{
    // any other configuration you have
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T13:18:54.977

**mwielbut**的答案部分正确，但还不够 100%，因为还必须为域类指定基本包。

> 检查以下源代码以获取完整的工作实现
> 
> 属性文件加载

```
package com.example.analytics.config;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

import javax.annotation.PostConstruct;

@Component
@ConfigurationProperties(locations = "classpath:application.yml", ignoreUnknownFields = false, prefix = "neo4j")
public class DatabaseConnectionProperties {

    private static final Logger LOG = LoggerFactory.getLogger(DatabaseConnectionProperties.class);

    private String uri;
    private String username;
    private String password;

    public String getUri() {
        return uri;
    }

    public void setUri(final String uri) {
        this.uri = uri;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(final String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(final String password) {
        this.password = password;
    }

    @PostConstruct
    public void uponConstruction(){
        LOG.debug("Construction of the class {} has been completed!", this.getClass().getName());
        LOG.debug("Database connection properties have been loaded from application.yml in the classpath");
        LOG.debug("Initialised URI: {} , username: {}, password: {}", uri, username, password);
    }
} 
```

> 数据库连接配置

```
package com.example.analytics.config;

import org.neo4j.graphdb.GraphDatabaseService;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.context.properties.EnableConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.neo4j.rest.SpringCypherRestGraphDatabase;

@Configuration
@ComponentScan(basePackages = "com.example.analytics.config")
@EnableConfigurationProperties(DatabaseConnectionProperties.class)
public class DatabaseConnectionConfiguration {

    private static final Logger LOG = LoggerFactory.getLogger(DatabaseConnectionConfiguration.class);

    @Autowired
    private DatabaseConnectionProperties databaseConnectionProperties;

    /**
     * Connect to the remote instance of Neo4j through its REST interface
     * @return
     */
    @Bean(name="graphDatabaseService", destroyMethod = "shutdown")
    public GraphDatabaseService graphDatabaseService() {

        LOG.debug("Creating the graph database service with credentials");

        final String uri = databaseConnectionProperties.getUri();
        final String username = databaseConnectionProperties.getUsername();
        final String password = databaseConnectionProperties.getPassword();

        LOG.debug("URI: {}", uri);
        LOG.debug("Username: {}", username);
        LOG.debug("Password: {}", password);
        final SpringCypherRestGraphDatabase graphDatabase = new SpringCypherRestGraphDatabase(uri, username, password);
        LOG.debug("Graph database instance has been successfully created!");
        return graphDatabase;
    }

} 
```

> 主要配置

```
package com.example.analytics.config;

import org.springframework.context.annotation.AdviceMode;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Import;
import org.springframework.data.neo4j.config.EnableNeo4jRepositories;
import org.springframework.data.neo4j.config.Neo4jConfiguration;
import org.springframework.transaction.annotation.EnableTransactionManagement;

@Configuration
@EnableNeo4jRepositories(basePackages = "com.example.analytics.repository")
@EnableTransactionManagement(mode = AdviceMode.PROXY)
@Import({DatabaseConnectionConfiguration.class})
public class MainConfiguration extends Neo4jConfiguration {

    public MainConfiguration() {
        setBasePackage("com.example.analytics.model");
    }
} 
```

> 主要应用

```
package com.example.analytics;

import com.example.analytics.config.DatabaseConnectionConfiguration;
import com.example.analytics.config.MainConfiguration;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Import;

import javax.annotation.PostConstruct;

@EnableAutoConfiguration
@ComponentScan(basePackages = {"com.example.analytics"})
@Import(MainConfiguration.class)
public class AnalyticsApplication {

    private static final Logger LOG = LoggerFactory.getLogger(DatabaseConnectionConfiguration.class);

    public static void main(final String[] args) {

        SpringApplication.run(AnalyticsApplication.class, args);
    }

    @PostConstruct
    public void uponConstruction() {
        LOG.debug("Construction of the class {} has been completed!", this.getClass().getName());
    }
} 
```

# android - 演员输入未触发任何输入事件

> ID：14465885
> 
> 赞同：0
> 
> 时间：2013-01-22T18:52:15.257
> 
> 标签：android, libgdx

我已经在 stackoverflow 上阅读了一些答案，试图弄清楚为什么我的 SpriteActor 输入事件在没有任何运气的情况下不会被触发。不知道我做错了什么。如果有人可以提供帮助，我将不胜感激。

- 屏幕类

```
public class MainGameScreen implements Screen
{

Stage _stage;

public MainGameScreen()
{
    float w = Gdx.graphics.getWidth();
    float h = Gdx.graphics.getHeight();

    _stage=new Stage(w,h,true);
    Gdx.input.setInputProcessor(_stage);

    TextureAtlas atlas = new TextureAtlas(Gdx.files.internal("data/texturesHD.atlas"));

    SpriteActor actor= new SpriteActor(atlas,"BtTemple",true);
    actor.x=w/2.0f;
    actor.y=h/2.0f;

    _stage.addActor(actor);
}

public void     dispose()
{
}

public void     hide()
{
}

public void     resize(int width, int height)
{
}

public void     resume()
{
}

public void     show()
{
}

public void render(float deltaTime) 
{
    _stage.draw();
}   
public void pauseGame() 
{
}

// this is called by android 
public void pause() 
{
} 
```

}

这里是我的 SpriteActor 类：

```
class SpriteActor extends Actor 
{
private Sprite _sprite;

public SpriteActor(TextureAtlas atlas, String regionName, boolean touchable) 
{   
    super();

    _sprite = atlas.createSprite(regionName);

    //setWidth(_sprite.getWidth());
    //setHeight(_sprite.getHeight());
    //setBounds(x,y,getWidth(),getHeight());

    this.touchable=touchable;
}

@Override
public void draw(SpriteBatch batch, float parentAlpha) 
{
    /*Color color = getColor();
    batch.setColor(color.r, color.g, color.b, color.a * parentAlpha);*/
    batch.draw(_sprite, x, y);
}

@Override
public Actor hit(float x, float y)
{
    return null;
}

@Override
public boolean touchDown (float x, float y, int pointer) 
{
    Gdx.app.debug("Game", "TestActor.touchDown()");
    return true;  // must return true for touchUp event to occur
}
@Override
public void touchUp (float x, float y, int pointer) 
{
    Gdx.app.debug("Game", "TestActor.touchUp()");
}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:29:36.757

尝试这样的事情：

```
public class MainGameScreen implements Screen, InputProcessor { 
```

将 setInputProcessor 移至 show() 方法，如下所示：

```
@Override
public void show() {
    Gdx.input.setInputProcessor(this);
} 
```

并从 InputProcessor 实现方法：

```
@Override
public boolean keyDown(int keycode) {
    //do whatever you want
    return _stage.keyDown(keycode);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:45:07.193

好吧，我会回答我自己的问题。问题是我提供了一个返回 null 的 hit 方法，所以当系统检查时，它从未被击中。

# assembly - JFE 和 JNE 是否必须组装，或者我可以删除它们吗？

> ID：14465886
> 
> 赞同：1
> 
> 时间：2013-01-22T18:52:20.630
> 
> 标签：assembly, processor, cpu-architecture

为了好玩，我正在设计一个带有 4 位指令的 8 位处理器架构，并且遇到了 4 位指令的一些限制。

我想包括`SHR`（右移）和`SHL`（左移）指令，但我似乎没有空间放置它们。我目前有`JGE`(jump if greater or equal), `JLE`(jump if less or equal), `JFE`(jump if equal), and `JNE`(jump if not equal)，我想知道这四个是否都是必要的。

所有这四个跳转条件对于干净的代码都是必需的，还是我可以安全地放弃`JFE`and `JNE`for `SHR`and `SHL`？

编辑：我确实有`JMP`，而且不是绝对的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:19:28.550

除了 Carl Norum 的回答之外，如果您支持无条件跳转指令 (JMP)，那么一旦您拥有 JFE，您就不需要它的补充 JNE，因为您可以将其编码为 JMP 的 JFE。同样，如果您有 JG、JFE 和 JMP，则不需要 JLE。

对于移位，如果您的指令带有一个参数并且该参数允许值大于您的字长，您可以对左移和右移使用相同的指令，并让参数值确定它是一个还是另一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T18:53:49.153

如果“干净”是指“易于阅读”，则说明越多越好。好吧，无论如何。

在实践中，您只*需要*一个条件跳转指令。

[例如， Brainfuck](http://en.wikipedia.org/wiki/Brainfuck)只有 8 条“指令”。它有两次跳跃——一次向前跳跃，一次向后跳跃，但如果你的处理器使用绝对跳跃，那可能是一样的。

您是否正在为您的处理器编写汇编程序？如果是这样，您可以添加管理不同跳转形式的宏指令，并将它们转换为您的芯片实际支持的任何低级操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T19:20:21.300

这是删除 JFE 和 JNE 的一种方法。

此代码将根据测试是否相等（分支到 absolute_equal）或不（分支到 absolute_not_equal）分支到不同的位置。

```
 JGE maybe_equal
   JLE definitely_not_equal
maybe_equal:
   JLE definitely_equal
   JGE definitely_not_equal 
```

我将由您决定这是否算作干净的代码......

# c++ - 构造函数的继承问题

> ID：14465892
> 
> 赞同：1
> 
> 时间：2013-01-22T18:52:59.753
> 
> 标签：c++, inheritance

我有三个班。基类被称为`Jet`：

```
class Jet
{
public :
    Jet(int fuel);
    void fly();

protected:
    int mfuel;
};

Jet::Jet(int fuel): mfuel(fuel) {} 
```

第二类称为`F16`：

```
class F16 : public Jet
{
public:
    F16(int fuel, int numMissiles);
    void fireMissile();

protected:
    int mNumMissles;
};

F16::F16(int fuel, int numMissiles): Jet(fuel), mNumMissles(numMissiles) {} 
```

第三个类`B18`通常从以下继承一切`F16`：

```
class B18 : public F16
{
public:
    B18(int fuel, int numMissiles, int bullets);
    void fireBullets();

private:
    int mBullets;

}; 
```

现在我的问题是这里的成员成员初始化程序中有一种方法：

```
B18::B18(int fuel, int numMissiles, int bullets) :
        F16(fuel, numMissiles), mBullets(bullets) {} 
```

...所以我可以删除`int fuel`from `B18`，只继承`numMissiles`from `F16`？例如：

```
B18::B18(int numMissiles, int bullets) :
        F16(numMissiles), mBullets(bullets) {} 
```

类似上面的东西*（当然不起作用，并且可能有逻辑错误）*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:00:53.637

我怀疑在这种情况下是否可以完全阻止继承，但是您确实提到了成员初始化程序代码行。因为你应该能够做这样的事情：

```
B18::B18(int numMissiles,int bullets): F16(30,numMissiles),mBullets(bullets)   {} 
```

你可能已经知道了。另一种选择是这样的：

```
public:
    F16(int numMissiles, int fuel = 45); 
```

和：

```
B18::B18(int numMissiles,int bullets): F16(numMissiles),mBullets(bullets)   {} 
```

我不确定这是否正是您所需要的，但也许它会有所帮助。同样，我对此可能是错误的，但我有点怀疑您是否可以通过继承设置基类的变量。最接近的方法是将指针变量保持未初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:14:10.017

您的评论提供了有关该问题的更多信息。因此，为了可见性，我在这里引用：

> 如果有可能将 F16 的一部分初始化为 b18，就像 numMussiles 部分而不是构造函数的燃料一样，我正在试验的事情......简而言之，选择我想在成员中继承的内容初始化器

看起来重载的构造函数可以解决您的问题。向您的类添加另一个构造函数`F16`，以便您可以根据要初始化的内容在派生类中选择适当的构造函数。

这是您可以执行的操作：

```
class F16 : public Jet
{
public:
  F16(int numMissiles); //<------ add this
  F16(int fuel,int numMissiles);
  void fireMissile();

  protected:
  int mNumMissles;
}; 
```

然后您可以根据要初始化的内容选择构造函数：

```
//unchanged : from your code!
B18::B18(int numMissiles,int bullets): F16(numMissiles),mBullets(bullets) {} 
```

它从 中选择第一个构造函数`F16`。请注意，最好完全初始化类，这意味着将每个成员初始化为一些 [默认] 值（即使您在特定情况下不需要它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:12:03.143

不太清楚你的意思是什么，因为你可以继承一个不存在的值。但也许你想要做的涉及默认参数？因此，例如，您将拥有：

```
class Jet
{
public :
   Jet(int fuel);
   void fly();

protected:
   int mfuel;
};

Jet::Jet(int fuel): mfuel(fuel) {}

class F16 : public Jet
{
public:
   F16(int numMissiles = 10, int fuel = 20);
   void fireMissile();

protected:
   int mNumMissles;
};

F16::F16(int numMissiles, int fuel): Jet(fuel), mNumMissles(numMissiles) {}

class B18: public F16
{
public :
   B18(int bullets, int numMissiles, int fuel);
   B18(int bullets);
   void firebullets();

private:
   int mBullets;
};

B18::B18(int bullets, int numMissiles, int fuel) : F16(numMissiles, fuel), mBullets(bullets) {}
B18::B18(int bullets): F16(), mBullets(bullets) {} 
```

这样，使用单个 int 参数创建 B18 对象将使用其默认参数调用 F16 构造函数。

# android - 上传文件时进度条卡住并且移动太快

> ID：14465897
> 
> 赞同：0
> 
> 时间：2013-01-22T18:53:11.753
> 
> 标签：android, android-progressbar

我已经编写了以下代码来通过服务器上传 wav 文件，我面临的问题是进度条移动得太快，直到 99% 并且一旦服务器返回 200 OK 响应就完成。

但我在 Dropbox 中看到，当我上传文件时，我可以看到进度条正在逐渐移动，看起来很有说服力。

任何人都知道我如何显示无缝进度条。

```
 @Override
        protected String doInBackground(Void...args) {
            // TODO Auto-generated method stub

            System.out.println(uploadLink);
            FileInputStream sourceFile = null;

            try {
                sourceFile = new FileInputStream(to);
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            URL url;
            try {

                byte[] bytes = new byte[(int) to.length()];
                sourceFile.read(bytes);

                url = new URL(uploadLink);
                connection = (HttpURLConnection) url.openConnection();
                connection.setDoInput(true);
                connection.setDoOutput(true);
                connection.setUseCaches(false);
                connection.setRequestMethod("POST");    

                connection.setRequestProperty("Connection", "Keep-Alive");
                connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
                out = new DataOutputStream( connection.getOutputStream() );
                out.writeBytes(twoHyphens + boundary + lineEnd);                
                out.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + templateID + ".wav" + "\"" + lineEnd);
                out.writeBytes(lineEnd);
                bytesAvailable = sourceFile.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                buffer = new byte[bufferSize];

                Log.d("BYTES" , bytesAvailable + " "+bufferSize +" "+  bytes.length);

                int bufferLength = 1024;

                for (int i = 0; i < bytes.length; i += bufferLength) {

                    int progress = (int)((i / (float) bytes.length) * 100);
                    publishProgress(progress);

                    if (bytes.length - i >= bufferLength) {
                        out.write(bytes, i, bufferLength);
                    } else {
                        out.write(bytes, i, bytes.length - i);
                    }
                }

               out.writeBytes(lineEnd);
               out.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
               sourceFile.close();
               out.flush();
               out.close();            

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();

                return null;
            } 
             try {
                 in = new DataInputStream ( connection.getInputStream() );
                 String str;

                 Log.d("STATUS",connection.getResponseCode()+ " ");

                 if(connection.getResponseCode() == 200)
                 {                   
                     while (( str = in.readLine()) != null)
                     {
                      Log.e("Debug","Server Response "+str);
                      publishProgress(100);

                     }
                 }

                 in.close();

           }
           catch (IOException ioex){
                Log.e("Debug", "error: " + ioex.getMessage(), ioex);
           }

            // Get the source File

            return "success";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:30:55.703

我也很难做到这一点，客户总是说进展不是真的。

我发现的解决方案是`setFixedLengthStreamingMode`在`HttpURLConnection`对象中使用（请参阅`setFixedLengthStreamingMode` [此处](https://stackoverflow.com/questions/13105592/httpurlconnection-what-does-setfixedlengthstreamingmode-want-the-size-of)的更多信息）。基本上这样做是`Content-Length`标题设置得更快，因此`URLConnection`可以更频繁地刷新。

你的代码应该是这样的：

```
String header = twoHyphens + boundary + lineEnd + "Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + templateID + ".wav" + "\"" + lineEnd + lineEnd;
String closingHeader = lineEnd + twoHyphens + boundary + twoHyphens + lineEnd;

int bytesToBeSent = header.lenght() + closingHeader.lenght() + (int)to.length();

connection.setFixedLengthStreamingMode(bytesToBeSent); 
```

这必须在使用前设置`setRequestMethod()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:56:23.033

如果它很快，它很快，不是吗？我建议的唯一方法是在 `publishProgress(100);`完成上传后致电，而不是在收到回复之前致电。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-08T09:21:46.757

关键是 setChunkedStreamingMode()。您需要在 setRequestMethod() 之前将其设置为您的文件长度。这将以块的形式发送字节，并让您感觉进度条的进度。设置好之后，您可以使用问题中提供的代码。

# php - Magento - 获取“库存”项目的类别 ID

> ID：14465902
> 
> 赞同：0
> 
> 时间：2013-01-22T18:53:25.790
> 
> 标签：php, magento, stock

这是我到目前为止所拥有的，以获取库存物品：

```
$productCollection = Mage::getModel('cataloginventory/stock_item')
                     ->getCollection()
                     ->addQtyFilter('>', 0);

echo $productCollection->getSelect();

foreach ( $productCollection as $currentProduct ) {

    $categoryIds = $currentProduct->getCategoryIds();

    print_r( $categoryIds );

} 
```

它可以很好地获取产品，但是我需要获取每个项目的当前类别 ID，因此在上面的代码`$currentProduct->getCategoryIds()`中不起作用。

有谁知道如何检索 IN STOCK 项目及其类别 ID？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:43:50.237

您可以尝试以下代码示例：

```
...
foreach ( $productCollection as $currentProduct ) {
    $categoryIds = Mage::getModel('catalog/product')->load($currentProduct->getId())
        ->getCategoryIds();

    print_r( $categoryIds );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:05:15.947

这似乎已经在这里得到了回答。

请参阅以下网址了解如何检索产品类别 ID：

[来自产品 ID 的 Magento 类别 ID](https://stackoverflow.com/questions/4413565/magento-category-id-from-product-id)

[获取产品的类别 ID 和名称](https://stackoverflow.com/questions/7024808/get-products-category-ids-and-names)

您可以通过以下方式检查它是否有库存`if statement`：

```
<?php   
$__manStock = $_product->getStockItem()->getManageStock();
$__invAmt = (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty();
    if ($__invAmt >= 1)
        {
    //Do Something here
    }
?> 
```

乃至：

```
<?php if ($_product->isAvailable()): ?>
Do Something here
<?php endif; ?> 
```

# java - Java - 复制构造函数 - java.lang.NullPointerException

> ID：14465907
> 
> 赞同：0
> 
> 时间：2013-01-22T18:53:50.410
> 
> 标签：java, arrays, constructor

我正在尝试使用复制构造函数复制对象，但它输出错误：

```
Exception in thread "main" java.lang.NullPointerException
at Polynomial.<init>(Polynomial.java:30)
at Polynomial.showDerivative(Polynomial.java:59)
at Program.main(Program.java:9) 
```

这是我的复制构造函数：

```
public Polynomial(Polynomial poly)
{
    for(int i = 0; i < a.length; i++)
        a[i] = poly.a[i];
    for(int i = 0; i < b.length; i++)
        b[i] = poly.b[i];
} 
```

这就是我实例化对象的方式：

```
Polynomial pol = new Polynomial(this); 
```

我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:00:52.793

[`System.arraycopy`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)使用创建数组的副本会更好。

此外，将您的复制构造函数更改为： -

```
public Polynomial(Polynomial poly)
{
    int aLen = poly.a.length;
    int bLen = poly.b.length;

    // Initialize arrays for this object
    a = new int[aLen];  // Assuming `a` and `b` are integer arrays
    b = new int[bLen];  // Change accordingly.

    // A better way to create copy of arrays would be to use `System.arraycopy
    System.arraycopy( poly.a, 0, a, 0, aLen);
    System.arraycopy( poly.b, 0, b, 0, bLen);

    /*** You can avoid using below loops ***/

    // Iterate till the `aLen` of `poly` object passed 
    // and add elements to `a` array of this object
    /*for(int i = 0; i < aLen; i++)
        a[i] = poly.a[i];

    // Iterate till the `bLen` of `poly` object passed 
    // and add elements to `b` array of this object
    for(int i = 0; i < bLen; i++)
        b[i] = poly.b[i]; */
} 
```

您的`for`循环应该运行到`poly.a`and`poly.b`和 not `a`and的长度`b`，因为它们尚未初始化，因此`NPE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:02:14.457

假设您的`Polynomial`课程如下所示：

```
public class Polynomial {

    private int[] a;
    private int[] b;

    public Polynomial(int length) {
        a = new int[length];
        b = new int[length];
    }

    public Polynomial(Polynomial poly)
    {
        for(int i = 0; i < a.length; i++)
            a[i] = poly.a[i];
        for(int i = 0; i < b.length; i++)
            b[i] = poly.b[i];
    }

    public static void main(String[] args) {
        Polynomial p = new Polynomial(2);
        Polynomial q = new Polynomial(p);
    }

} 
```

那么问题是实例变量`a`并`b`没有在复制构造函数中初始化。每个构造函数都是独立的，如果你想从一个内部执行操作，你必须通过调用一个通用的初始化函数来明确地做到这一点，例如

```
public class Polynomial {

    private int[] a;
    private int[] b;

    private void init(int length) {
        a = new int[length];
        b = new int[length];
    }

    public Polynomial(int length) {
        init(length);
    }

    public Polynomial(Polynomial poly)
    {
        init(poly.a.length);
        for(int i = 0; i < a.length; i++)
            a[i] = poly.a[i];
        for(int i = 0; i < b.length; i++)
            b[i] = poly.b[i];
    }

    public static void main(String[] args) {
        Polynomial p = new Polynomial(2);
        Polynomial q = new Polynomial(p);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:07:32.623

你可以只使用：

```
public Polynomial(Polynomial poly) {
    a=poly.a.clone(); 
    b=poly.b.clone();
    } 
```

这将在一个步骤中创建和复制数组。

# iis - IIS 中的 ColdFusion 自定义 404 处理程序 - 如何返回状态 200 OK？

> ID：14465908
> 
> 赞同：0
> 
> 时间：2013-01-22T18:53:51.463
> 
> 标签：iis, coldfusion, iis-7.5, http-status-code-404, coldfusion-10

我有一个用于 IIS（IIS 7.5，Win2K8 R2）的 ColdFusion（CF10）自定义 404 处理程序，它检查“友好的 url”，如果找到，则返回适当的内容。例如：

[http://www.domain.com/user1返回与](http://www.domain.com/user1)[http://www.domain.com/?user=user1](http://www.domain.com/?user=user1)相同的内容

似乎 IIS 只返回页面的前 x（1000？）字节，并且还返回 404 错误。是否可以强制 IIS 返回 200 OK？我尝试添加：

```
<cfheader statusCode="200" statusText="OK"> 
```

到 404 处理程序，但 IIS 仍将 404 错误返回给浏览器。

作为后续问题，有没有更好的方法来做到这一点？我可以使用 URL 重写模块吗？我认为这可能很困难，因为我认为它只匹配 URL 中的模式，友好的 URL 也可以匹配可能存在的文件夹名称。这就是我的 404 处理程序检查的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:46:51.057

你在这里谈到了几个不同的事情。对于第一部分，SEO 友好的 URL，我会说 IIS Rewrite 是要使用的工具。无需在这些上浪费 ColdFusion 的处理时间。让 IIS Rewrite 处理它，只将有意义的东西传递给 ColdFusion。如果你用谷歌搜索类似[iis rewrite for seo friendly urls](https://www.google.com/#hl=en&newwindow=1&tbo=d&sclient=psy-ab&q=iis+rewrite+for+seo+friendly+urls&oq=iis+rewrite+for+seo+friendly+urls&gs_l=hp.12...0.0.3.119835.0.0.0.0.0.0.0.0..0.0.les;..0.0...1c.k6bH7z-eFbc&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.41248874,d.b2U&fp=99bbb1d5e9938d35&biw=1012&bih=917)之类的东西，你可以找到数千个示例。

对于您问题的第二部分，处理 404 错误。我建议您不要`200 OK`为这些返回状态代码。毕竟他们是404的。而是通过发出`301 Moved Permanently`状态代码让您的 404 处理程序（如果可能）重定向到新的（或想要的）页面。它不仅会将您的访问者推送到正确的页面，而且还会让搜索引擎机器人感到高兴。如果您没有页面来重定向访问者，那么一定要返回正确的`404 Not Found`状态代码。可能会在生成的 404 页面上包含一些指向您网站最常见页面的链接。同样，谷歌是你的朋友，搜索类似[301 重定向的 404 错误](https://www.google.com/#hl=en&newwindow=1&tbo=d&sclient=psy-ab&q=301+redirect+for+404+errors&oq=301+redirect+for+404+errors&gs_l=hp.3..33i29.35562.39374.2.40412.27.19.0.6.6.0.215.2406.9j9j1.19.0.les;..0.0...1c.1.ERDbiQOnQ7I&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.41248874,d.b2U&fp=99bbb1d5e9938d35&biw=1012&bih=917)示例。请记住，对于 301 重定向，您还需要包含新位置（用于重定向）。像这样：

```
<cfheader statuscode="301" statustext="Moved Permanently">
<cfheader name="Location" value="http://www.newlocation.com"> 
```

顺便说一句，您并没有真正提到如何在 IIS 和/或 ColdFusion 中进行 404 处理设置。这些可以单独设置，也可以设置为一起工作（即您的 IIS 404 处理程序可以指向您的 ColdFusion 404 处理模板）。这就是我通常设置服务器的方式。这使您能够记录、发送电子邮件、重定向等所有 404 错误。

# jquery - 使用 Jquery 模板的 json 动态输出

> ID：14465913
> 
> 赞同：0
> 
> 时间：2013-01-22T18:53:59.010
> 
> 标签：jquery, json, templates, getjson

我正在尝试将一些 json 附加到 jquery 模板中。现在，代码工作正常。但是，当 .click 甚至发生时，我想一次只从我的 json 中显示一张幻灯片。

这是代码：

```
<head>
<style type="text/css"></style>
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta/jquery.tmpl.min.js"></script>
<script id="ititemplate" type="text/x-jquery-tmpl">

        <h1>${title}</h1>
        <div>${author}</div>

            <ol>{{each slides}}
            <figure style="${css}">

                <h2 style="${headcss}">${header}</h2>
                <p style="">${Slide}</p>
                <img style="${imagecss}" width="${width}" height="${height}" src="${imagesrc}"></img>
            <ol>
                {{each Content}}
                <li style="${contcss}">${bullet}</li>
            {{/each}}</ol>

            </figure>
            {{/each}}</ol>

    </script>

<script type="text/javascript">
    $(document).ready(function() {
    $('#myppt').click(function() {
        //var jsonloc = "ppt.json";
            $.when($.getJSON('ppt.json') ).then(function(info){
            $('#header').empty();
            $('#ititemplate').tmpl(info).appendTo('#header');                   
                });                                 
            }); 

});             

</script>
</head>
<body>
<a href="#" id="myppt">My Powerpoint presentation </a>
<div id="header">
</div>
</body> 
```

这是JSON：

```
{
"title": "The ppt presenation",
    "date_created": "9242010",
    "last_modified": "9242011",
    "author": "Mistic Frenzies",
    "slides": [
                 {
    "Slide": "1",
        "header": "My life",
        "headcss": "text-align: center",
        "imagesrc": "cool.jpg",
    "imagecss": "{float:right}",
    "width": "100px;",
    "height": "100px;",
    "contcss":"{background-color:#97FB98; border-bottom: thin dotted #888888;}",
    "Content": [{
        "bullet": ""
    }, {
        "bullet": ""
    }, {
        "bullet": ""
    }, {
        "bullet": ""
    }, {
        "bullet": ""
    }]
}, {
    "Slide": "2",
        "header": "Early Stages",
        "headcss": "text-align: center",
        "imagesrc": "cool.jpg",
    "imagecss": "{float:right}",
    "width": "100px;",
    "height": "100px;",
    "contcss":"{background-color:#97FB98; border-bottom: thin dotted #888888;}",
    "Content": [{
        "bullet": ""
    }, {
        "bullet": ""
    }, {
        "bullet": ""
    }, {
        "bullet": ""
    }, {
        "bullet": ""
    }]
}, {
    "Slide": 3,
        "header": "Crazy Teenager",
        "headcss": "text-align: center",
        "imagesrc": "cool.jpg",
    "imagecss": "{float:right}",
    "width": "100px;",
    "height": "100px;",
    "contcss":"{background-color:#97FB98; border-bottom: thin dotted #888888;}",
    "Content": [{
        "bullet": ""
    }, {
        "bullet": ""
    }, {
        "bullet": ""
    }, {
        "bullet": ""
    }, {
        "bullet": ""
    }]
}]
} 
```

所以，我不确定如何从我的 JSON 幻灯片数组中的 1 张幻灯片中获取 JSON。我应该稍微改变一下我的Json吗？或者我应该如何为 jquery 模板实现更好的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:10:03.720

我认为最好的方法是使用一次显示**一张**幻灯片的模板（删除 `each slides`等）。并更改脚本以分离从点击绑定中获取的 json。所以基本上（在伪代码中）这看起来像：

```
var current_slide, slides
getjson(){
  slides = results['slides'] //array with the results. all the slides from the json object
  current_slide = 0;
  display_slide(current_slide); //showing the first slide
 }
$('#myppt').click(function() { //binding the slide switching to the click
   current_slide++;
   displaySlide(current_slide);
};

function display_slide(num){ //basically just the display code, didn't check if it really works
  $('#header').empty();
  info = slides[num]
  $('#ititemplate').tmpl(info).appendTo('#header');                   

  } 
```

# android - 如何在android中使单个类可搜索

> ID：14465915
> 
> 赞同：-1
> 
> 时间：2013-01-22T18:54:07.993
> 
> 标签：android, android-searchmanager

我想在 android 中使用标准搜索功能，但不想要两个不同的活动。我有一个活动，它也是我的应用程序登陆活动，我想调用`onSearchRequested()`并将结果返回到同一个活动。

这是我的清单代码-

```
<activity
            android:name=".TaskManagerActivity"
            android:label="@string/title_activity_task_manager" 
            android:noHistory="false"
            android:launchMode="singleTop">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>

        </activity> 
```

已经在另一个问题中有详细信息..没有得到任何回应。

问题/14445966/activity-not-getting-populated-on-search-in-same-activity

任何帮助请..!! 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:28:09.957

很容易做到。请参阅 [http://developer.android.com/guide/topics/search/index.html](http://developer.android.com/guide/topics/search/index.html)。您可以将 SearchView 设置为菜单内的操作视图。最简单的实现将获得搜索文本。如果需要，您可以添加其功能。

搜索是 Android 系统中一个非常强大的部分，这对于来自搜索公司的操作系统来说当然是有意义的！出于这个原因，您应该尝试使用 Android 的搜索功能，而不是尝试“自己动手”。您将获得用户期望的界面和功能。

# php - 是否可以有一个离线数据库

> ID：14465919
> 
> 赞同：0
> 
> 时间：2013-01-22T18:54:24.420
> 
> 标签：php, javascript, sql, database

短篇小说：我下载了一个 java/flash 上传器，其中一个文件是 .db。经过一番研究，我发现这是一个数据库。这提示了这个问题。我可以创建一个数据库 (.db) 文件并将其保存在我的根目录的文件夹中，而不必依赖另一个服务器和 sql 查询吗？从而理论上通过仅访问本地文件来加速我的网站。

问题：我做了很多研究，但没有找到答案。主要是因为我以前从未处理过这个问题，所以我不知道在哪里看。

问题：有没有人听说过这样的事情？如果是这样，您能否将我推荐给一个教程网站或提供一个简短的定义/解释/示例，说明这将如何工作以及文件之间将使用哪种类型的通信语言？SQL？别的东西？我只是不知道！

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:01:58.743

**[好的部分]** 理论上，是的，你可以做到。一个例子是[sqlite 数据库](http://www.sqlite.org/)。该数据库是一个文件，您可以将其存储在任何您想要的位置。如果您使用 PHP 进行编码，则需要在 PHP 中安装相应的扩展程序才能访问/查询该数据库。

**[不好的部分**] 这只有在您处理少量数据并且查询相对简单时才有意义。Sqlite 数据库速度很慢，只支持有限的一组 sql 操作。它们也不支持许多标准数据类型，并且缺少许多您可能依赖的内置函数。如果您想在独立应用程序（例如具有本地数据的移动应用程序）中提供简单的数据库支持，则 Sqlite 数据库非常好，但对于存储大量事务数据来说不是很好。

**[结论]** 如果您希望加快 Web 应用程序的速度，从适当的数据库切换到 sqlite 可能只会阻碍您的应用程序，而不是帮助它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:57:36.893

SQLlite 可以提供一个无需使用服务器即可工作的数据库。它提供了一个标准的 SQL 接口，就像您使用 reguar sql 服务器（MySQL 等）一样。它可能不会更快，因为它比标准数据库服务器依赖更多的磁盘 I/O。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T18:58:50.720

[SQlite](http://www.sqlite.org)是无服务器的。这是有据可查的。PHP 也有一个[扩展](http://php.net/manual/en/book.sqlite.php)来使用它。但如果你真的想加快速度，你应该看看[memcached](http://memcached.org/)、[redis](http://redis.io/)、[MongoDB](http://www.mongodb.org/)等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T18:59:15.210

我真正认为您要问的是平面文件数据库。

[http://www.databasedev.co.uk/flatfile-vs-rdbms.html](http://www.databasedev.co.uk/flatfile-vs-rdbms.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T19:04:11.820

几乎所有您可以命名的数据库解决方案都依赖文件作为存储机制，因此仅将数据存储在文件中并不会为您的应用程序带来任何内在的性能优势。像 SQLite 这样的无服务器数据库确实存在，但选择它们的原因很少与性能有关，而是与可移植性有关。

您可以运行 MySQL 或其他数据库的本地实例，以消除在线传输成本。如果配置得当，它们在大多数情况下都会胜过 SQLite 之类的东西，因为除了磁盘存储之外，MySQL 还依赖于内存存储。

因为听起来你对这类东西很陌生，所以我会提醒你不要担心这些过早的性能优化。也许从与您的 Web 服务器在同一台服务器上的传统关系数据库（如 MySQL）开始。

一旦达到足够的流量，就需要将数据库分离到不同的服务器上（为数据库或 Web 应用程序分配更多资源，或者能够允许多个负载平衡的 Web 应用程序服务器与单个后端数据库通信），那么您可以开始更多地担心这些性能调整。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T19:18:52.210

您所说的似乎只是在客户端所在的同一台计算机上运行服务器。这当然是可能的。

优点是它仍然使用 SQL，甚至网络协议，但在同一台计算机上是自包含的。稍后切换到生产环境将是最小的配置更改。

它实际上不会使用网络，而是会在内存中进行所有网络调用。这将运行得非常快，并且是一个很好的开发环境。

# image-processing - 如何将来自两个目录的两层图像批量编译

> ID：14465920
> 
> 赞同：1
> 
> 时间：2013-01-22T18:54:40.310
> 
> 标签：image-processing, imagemagick

我有两个目录，其中的图像具有相同的文件名。我想从每个目录中获取一个图像并编译它们并展平。然后为每个文件名批量重复。

我可以以某种方式使用 mogrify 吗？还是我需要编写脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:12:44.527

您确实必须编写脚本，但它不必很复杂——它可以是一个单行 shell 脚本。假设您有文件`fg/001.jpg`, `fg/002.jpg`, ..., `bg/001.jpg`, `bg/002.jpg`, ... 并且您想将它们分层并将结果放入`out`.

然后这个单行 shell 脚本会做你想做的事：

```
for F in fg/*; do composite "${F}" bg/"${F#fg/}" out/"${F#fg/}"; done 
```

shell 变量`F`循环遍历所有文件，而凌乱`"${F#fg/}"`的部分只是剥离目录前缀的 shell 魔术。

# python - 创建使用 libssh2 访问远程服务器的 python 脚本

> ID：14465924
> 
> 赞同：0
> 
> 时间：2013-01-22T18:54:46.047
> 
> 标签：python, libssh2

创建使用libssh2访问远程服务器的python脚本-我想制作访问远程服务器的python脚本，该远程服务器在同一会话中进一步访问另一台服务器。这应该将通道返回给主机comp。然后我想执行命令这个频道说例如访问数据库。我已经尝试使用 libssh2 库但卡住了。有人可以帮我解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:24:54.460

SSH2 的事实上的 Python 模块是[paramiko](http://pypi.python.org/pypi/paramiko/1.9.0)，它不使用 libssh2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:49:49.720

libssh2已经有一个[python 绑定。](http://www.no-ack.org/2010/11/python-bindings-for-libssh2.html)也许它可以使您的任务更轻松...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-14T18:37:32.937

带有 Python 绑定的 Libssh2 比 Paramiko 快得多。

Python 绑定：[https](https://pypi.org/project/ssh2-python/)
://pypi.org/project/ssh2-python/ API：[https ://pypi.org/project/ssh2-python/](https://pypi.org/project/ssh2-python/)

```
#!/usr/bin/python3
import socket
import os
import time

from ssh2.session import Session  #@UnresolvedImport in eclipse

class ssh_session:
    def __init__(self,user, password, host = "localhost",port=22):
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.connect((host, port))
        self.s = Session()
        self.s.handshake(sock)
        self.s.userauth_password(user, password)        
        self.chan = self.s.open_session()
        self.chan.shell()
        self.s.set_blocking(False)  #switch to non-blocking
        self.received_bytes=0

    def read(self,minwait=0.01):   #10 ms wait are enough for localhost  
        buf = b""                  #when you send simple commands
        startread=time.time()
        while True:
            size, data = self.chan.read()
            if size > 0: 
                buf+=data
                self.received_bytes+=size
                time.sleep(0.01)
            if minwait > 0:  # if we have a larger minwait than wait
                timedelta = time.time()-startread
                if timedelta > minwait: 
                    break    
            else:
                break  # non-blocking return with zero minwait
            #repeat the while loop until minwait       
        return (buf.decode())      

    def write(self,cmd):
        self.chan.write(cmd+"\n")       

user="<user>"
passwd="<pass>"
contime = time.time()    
timedelta = 0            
con1 = ssh_session(user,passwd)   #create connection instance

#skip banner aka os welcome message
#banner should be done after 1 second or more than 200 received Bytes
while timedelta < 1 and con1.received_bytes < 200:
    timedelta = time.time() - contime
    con1.read()   #just read but do not print

#send command to host
con1.write("pwd")
#receive answer, on localhost connection takes just about 0.3ms
print (con1.read())   #you can pass a minimum wait time in seconds here
                      #e.g. con1.read(0.8) # wait 0.8 seconds 
```

# c++ - 使用 /Command 选项从命令行为 Visual Studio C++ 项目创建一个新文件

> ID：14465926
> 
> 赞同：3
> 
> 时间：2013-01-22T18:55:04.340
> 
> 标签：c++, visual-studio, command-line, command-line-arguments, projects-and-solutions

从命令行，我需要为现有项目创建一个新的 C++ 源文件或头文件。

我发现 Visual Studio 提供了从命令窗口直接与 IDE 交互的命令。该页面 ( [http://msdn.microsoft.com/en-us/library/f42eyh2e.aspx](http://msdn.microsoft.com/en-us/library/f42eyh2e.aspx) ) 提供了新文件命令，但没有说明是否可以使用此命令为任何特定的文件创建新文件项目。（我假设可以从命令窗口完成的操作可以从命令行完成）。

您能否让我知道这是否可以使用命令选项来完成，如果可以，那么如何？

我找到了相关的问题：[创建新的 Visual Studio 项目，添加文件并运行它 - 命令行](https://stackoverflow.com/questions/7865700/create-new-visual-studio-project-add-files-and-run-it-command-line)。它建议使用 CMake 更新 vcxproj 文件。如果可能的话，我更喜欢通过命令行来执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T08:41:26.613

无论是头文件还是源文件，都可以通过使用复制或回显来简单地创建代码文件，因为它们是简单的文本文件。现在，为了将它们附加到您的 VS 项目中，您需要更加努力地工作。

项目文件：*.vcxproj 用于定义项目的设置。它包含有关如何构建它以及包含它的文件的信息。

就像在[那个线程](https://stackoverflow.com/questions/7865700/create-new-visual-studio-project-add-files-and-run-it-command-line)上一样，我建议使用 CMake 来生成你的**vcxproj**文件。基本上你唯一需要的是一个文本文件来定义你的依赖。

# algorithm - 基于各种属性解析和修剪集合的算法

> ID：14465927
> 
> 赞同：0
> 
> 时间：2013-01-22T18:55:09.193
> 
> 标签：algorithm

```
public class PCE
{
        public string ActivityType { get; set; }
        public string ActivitySubtype { get; set; }
        public int Id { get; set; }            
}

public class ActionLimit
{
    public string PropertyName { get; set; }
    public string PropertyValue { get; set; }
    public int Nos { get; set; }
} 
```

我收集了 PCE。说 -

```
 PCE pce = new PCE();
            pce.ActivityType = "Sales";
            pce.ActivitySubtype = "Loan2";
            pce.Id = 1;
            listPCE.Add(pce);

            pce = new PCE();
            pce.ActivityType = "Sales";
            pce.ActivitySubtype = "Loan1";
            pce.Id = 2;
            listPCE.Add(pce);

            pce = new PCE();
            pce.ActivityType = "Sales";
            pce.ActivitySubtype = "Subcat";
            pce.Id = 3;
            listPCE.Add(pce);

            pce = new PCE();
            pce.ActivityType = "Loyalty";
            pce.ActivitySubtype = "Loan";
            pce.Id = 4;
            listPCE.Add(pce); 
```

我有一组 ActionLimits。说 -

```
 ActionLimit al = new ActionLimit();
        al.PropertyName = "ActivityType";
        al.PropertyValue = "Sales";
        al.Nos = 2;
        listActionLimit.Add(al);

        al = new ActionLimit();
        al.PropertyName = "ActivitySubtype";
        al.PropertyValue = "Loan";
        al.Nos = 1;
        listActionLimit.Add(al); 
```

问题陈述：我需要算法通过 ActionLimit “Nos” 属性来限制 PCE 的收集。在上面的示例中，我需要将 PCE 限制为 2 个销售活动类型和 1 个贷款活动子类型。对于 PCE 的任何属性（不仅仅是 ActivityType 和 ActivitySubtype），该算法需要足够通用。此外，各种 ActionLimits 的结果应该是 ANDed。（所以在上面的例子中——在 2 个销售 PCE 中，如果其中一个不是 Loan ActivitySubtype，则将其排除在外）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:36:03.797

您只需要遍历 PCE 项目列表并将符合条件的项目添加到选定项目列表中。为了推广到 Java 中 PCE 的任何属性，您可以使用反射（例如查看本[教程](http://docs.oracle.com/javase/tutorial/reflect/index.html)）。

# c# - SQL DataAdapter.Update 中的逐行更新

> ID：14465928
> 
> 赞同：2
> 
> 时间：2013-01-22T18:55:11.113
> 
> 标签：c#

我遇到了问题`DataAdapter.Update`。

场景是这样的：我有一个这样的数据库表

```
Student
(StudentID INT NOT NULL,
 STUDENTNAME NVARCHAR(100),
 STUDENTIdentity    INT DEFAULT 10) 
```

在我`Datatable`的行中，例如

**ds学生**

```
StudentID   STUDENTNAME STUDENTIdentity 
1           AAA         
2           BBB             20
3           CCC 
```

当我试图`Datatable`像这样更新学生时

```
ds.Update(dsStudent,"Student"); 
```

这工作正常。但是我`studentidentity`在数据库中的列，插入 NULL 值而不是默认值 10。

我想到了实现`OnRowUpdating`事件并更改参数以实现逐行更新语句的更改。

但问题是这已经在我的项目中实施了。那么我们有没有通用的解决方案来做到这一点？

我尝试更新的示例代码

> ```
>  dr = ds.Tables["Student"].NewRow();
> 
>         dr["StudentId"] = 534;
> 
>         dr["StudentName"] = "robin";
> 
>         ds.Tables["Student"].Rows.Add(dr);
> 
>         cmdBuilder = new SqlCommandBuilder(da);
> 
>         da.Update(ds, "Student"); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T07:30:40.000

`DataAdapter.Update`方法用于`DataAdapter.UpdateCommand.CommandText`与数据库对话。如果您查看字符串，默认情况下您会看到足以：

```
UPDATE [Student]
SET [StudentID] = @StudentID,
    [STUDENTNAME] = @STUDENTNAME,
    [STUDENTIdentity] = @STUDENTIdentity
WHERE
    ... 
```

问题在于`[STUDENTIdentity] = @STUDENTIdentity`命令明确`DBNull`设置为列的位置。这就是为什么数据库中的默认值不起作用的原因。

看到这`DataAdapter.UpdateCommand.CommandText`是一个可写的属性。因此，最简单但不是通用的解决方案是复制以前的原始命令文本，删除有问题的行并将修改后的版本设置回来，所以有：

```
UPDATE [Student]
SET [StudentID] = @StudentID,
    [STUDENTNAME] = @STUDENTNAME
WHERE
    ... 
```

之后，STUDENTIdentity 将不会显式更新，因此将使用数据库中的默认值。

您可能也应该更新`InsertCommand`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:48:55.997

不要使用 sqlcommandbuilder 生成更新命令，而是使用您自己的 sql 命令。

更新：

```
 SqlCommand upCmd = new SqlCommand(
"update emp set Name=@Name, Age=@Age where No=@No",con);
 upCmd.Parameters.Add("@Name", SqlDbType.NChar, 10, "Name");
 upCmd.Parameters.Add("@Age", SqlDbType.Int, 4, "Age");
 upCmd.Parameters.Add("@No", SqlDbType.Int, 4, "No");
 sqlDa.UpdateCommand = upCmd;
 sqlDa.Update(dSet,"emp"); 
```

对于插入：

```
 SqlCommand insCmd = new SqlCommand(
 "insert into emp (Name, Age) values(@Name, @Age)",con);
 insCmd.Parameters.Add("@Name", SqlDbType.NChar, 10, "Name");
 insCmd.Parameters.Add("@Age", SqlDbType.Int, 4, "Age");
 sqlDa.InsertCommand = insCmd;
 sqlDa.Update(dSet,"emp"); 
```

在参数值中给出您的新行值。

试试这个，让我知道/

# jquery - 将一列csv加载到javascript变量中

> ID：14465930
> 
> 赞同：0
> 
> 时间：2013-01-22T18:55:24.547
> 
> 标签：jquery, csv, d3.js

我有一个格式为 String1、String2、Int1、Int2 的 CSV 文件。我想使用 D3 将每一行放在一个散点图上，并将整数作为轴。所以我想出了如何使用 D3 将 CSV 数据加载到表中，但后来我意识到，为什么不直接将 CSV 列加载到变量中呢？

那么，有谁知道如何使用 D3 或 jQuery 一次加载 CSV 的单列？或者更好的是，是否有更好的解决方案我应该考虑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:22:52.313

首先，感谢 thecodingtutorials.blogspot.com 上的 Andrew Davis，他对使用 D3 尤其是使用 D3 加载 CSV 文件非常有帮助。

D3 教程：[http ://www.thecodingtutorials.blogspot.com/2012/07/introduction-to-d3.html](http://www.thecodingtutorials.blogspot.com/2012/07/introduction-to-d3.html)

加载 CSV：[http ://thecodingtutorials.blogspot.com/2012/07/using-csv-and-text-files-with-d3.html](http://thecodingtutorials.blogspot.com/2012/07/using-csv-and-text-files-with-d3.html)

多列 CSV：[http ://thecodingtutorials.blogspot.com/2012/08/using-multi-column-data-with-d3-part-1.html](http://thecodingtutorials.blogspot.com/2012/08/using-multi-column-data-with-d3-part-1.html)

无论如何，简短的回答是 CSV 列可以被视为对象中的属性。

我以前在哪里

```
var vis = d3.select("#tryHere").append("svg:svg").attr("width", w).attr("height", h);
vis.selectall("circle")
   .data(data).enter().append("svg:circle")
   .attr("cx", function(d) { return x(d.x) })
   .attr("cy", function(d) { return y(d.y) })
   .... 
```

我需要将绘图代码包含在

```
 d3.csv("MyFile.csv", function(rawData) { 
```

并将最后两行替换为：

```
 .attr("cx", function(d) {return x(d["XColumnName"] )}
 .attr("cy", function(d) {return y(d["YColumnName"] )}
 .... 
```

# facebook-graph-api - Graph API - 无法打开流：HTTP 请求失败！HTTP/1.0 400 错误请求

> ID：14465932
> 
> 赞同：0
> 
> 时间：2013-01-22T18:55:40.217
> 
> 标签：facebook-graph-api, graph, sdk, facebook-opengraph, token

我需要你的帮助来解决一个问题。在我获得令牌后的某个时间，当尝试获取有关用户的数据时会发生此错误：

```
A PHP Error was encountered

Severity: Warning

Message: file_get_contents(https://graph.facebook.com/me?access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx): failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request 
```

执行此操作的代码是：

```
 $url = "https://graph.facebook.com/me?access_token=".$token;
 $dados = @json_decode(file_get_contents($url)); 
```

我该如何解决这个问题？为什么会这样？

我搜索了很多，但没有找到解决方案。请有人帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:07:33.913

我推荐使用 PHP SDK：[https ://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

如果您向下滚动到“使用”，还有一些示例代码，包括正确的登录处理。有了这个，你真的不需要考虑访问令牌，这一切都发生在后台。另请记住，访问令牌的有效期最长为 2 小时，如果您想延长它：使用 PHP SDK 的“setExtendedAccessToken”函数将其延长至最长 60 天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:52:22.523

尝试 urlencode() 您的令牌并将值传递给 file_get_contents()。这可能有效。

```
file_get_contents will only work if you have allow_url_fopen = 1 in your php.ini 
```

对于上述远程文件访问，请考虑使用 PHP 提供的[cURL](http://phpsec.org/projects/phpsecinfo/tests/allow_url_fopen.html)函数。

```
function url_get_contents ($Url) {
    if (!function_exists('curl_init')){ 
        die('CURL is not installed!');
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $Url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $output = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); //get the code of request
    curl_close($ch);

    if($httpCode == 400) 
       return 'No donuts for you.';

    if($httpCode == 200) //is ok?
       return $output;

} 
```

# c# - Entity Framework 6 中的自定义约定

> ID：14465935
> 
> 赞同：3
> 
> 时间：2013-01-22T18:55:48.690
> 
> 标签：c#, entity-framework, configuration, entity-framework-6

我想创建一个约定，其中 EF 可以序列化为`IEnumerable<String>`一种格式（比如逗号分隔值）并将它们存储在一个列中，并在将它们取回时`IEnumerable<String>`再次创建一个。

msdn 链接[http://msdn.microsoft.com/en-us/data/jj819164.aspx](http://msdn.microsoft.com/en-us/data/jj819164.aspx)提到了以下示例

```
class DateTimeColumnTypeConvention : IConfigurationConvention<PropertyInfo, DateTimePropertyConfiguration>
{
    public void Apply(
        PropertyInfo propertyInfo, Func<DateTimePropertyConfiguration> configuration)
    {
        // If ColumnType hasn't been configured...
        if (configuration().ColumnType == null)
        {
            configuration().ColumnType = "datetime2";
        }
    }
} 
```

但我需要类似的东西

```
class DateTimeColumnTypeConvention : IConfigurationConvention<PropertyInfo, IEnumerable<string>>
   {
       public void Apply(PropertyInfo propertyInfo, Func<IEnumerable<string>> configuration)
        {
           // Get all the values of the property here, create a comma separated string ,ask EF to store this string by setting the ColumnType to varchar and then get it back.
        }
    } 
```

我找不到任何明显的方法来做到这一点。有任何想法吗 ？

# matlab - 需要在matlab中使用具有使用多个参数的函数的遗传算法工具的指导

> ID：14465942
> 
> 赞同：0
> 
> 时间：2013-01-22T18:56:08.733
> 
> 标签：matlab, genetic-algorithm

我需要一些关于在 matlab 中使用 ga 函数的指导。我发现的所有示例都处理一个变量（参数），例如。

```
 function y = two_min(x)
 if x<=20
     y = x+1; 
 else
     y = x+1;
 end 
```

所以我可以打电话给 ga(@two_min,1) 开始。

但是当我尝试使用多个变量时，例如。

```
 function y = two_min(x,z)
 if x<=20
     y = x+1+z;
 else
     y = x+1+z;
 end 
```

它一直向我显示错误：没有足够的输入参数..不是因为我没有设置约束或其他选项吗？我应该以什么格式设置其他选项.. 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:04:46.330

当它执行你的函数 two_min 时，它会传入 x 的值，并且 z 在使用之前不会在任何地方定义，因此你的错误。您可以尝试的一件事是在调用 ga 之前绑定您的 z 值：

```
a = 500; %the value that will be used for z
fitness_fun = @(x) two_min(x,a);
n_var = 1;
[x,fval] = ga(fitness_fun,n_var) 
```

请注意，这只会将创建fitness_fun 时的a 值作为z 的值，因此如果稍后再次更改“a”的值，它将不会对two_min 中的z 值产生任何影响，除非您重新创建匿名函数（这是因为 matlab 匿名函数是闭包，它们的内部状态是在创建时从工作区获取的）。

这是做你所问的一种方法；你有别的想法吗？

# php - SimpleXML XML 解析

> ID：14465945
> 
> 赞同：1
> 
> 时间：2013-01-22T18:56:25.420
> 
> 标签：php, xml, xml-parsing

我创建了一个从 URL 获取 XML 并更新 mysql 数据库并将数据解析为 csv 文件的脚本。

我在 XML 中得到 HTML 字符串，它们不应该在那里。解析时如何删除它们？

我像这样加载 XML 文件：

```
$xml = simplexml_load_file(utf8_encode($xml_url), 'SimpleXMLElement', LIBXML_NOCDATA); 
```

运行脚本时出现的错误：

```
Warning: simplexml_load_file() [function.simplexml-load-file]: http://domain.com/api/get_catalog.php?id=351&user=878&key=b8:1: parser error : Space required after the Public Identifier in /dokumenti/skripte/xmlupdate/lost/test/lost_xml.php on line 59

Warning: simplexml_load_file() [function.simplexml-load-file]: <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"> in /dokumenti/skripte/xmlupdate/lost/test/lost_xml.php on line 59

Warning: simplexml_load_file() [function.simplexml-load-file]: ^ in /dokumenti/skripte/xmlupdate/lost/test/lost_xml.php on line 59

Warning: simplexml_load_file() [function.simplexml-load-file]: http://domain.com/api/get_catalog.php?id=351&user=878&key=b8:1: parser error : SystemLiteral " or ' expected in /dokumenti/skripte/xmlupdate/lost/test/lost_xml.php on line 59

Warning: simplexml_load_file() [function.simplexml-load-file]: <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"> in /dokumenti/skripte/xmlupdate/lost/test/lost_xml.php on line 59

Warning: simplexml_load_file() [function.simplexml-load-file]: ^ in /dokumenti/skripte/xmlupdate/lost/test/lost_xml.php on line 59

Warning: simplexml_load_file() [function.simplexml-load-file]: http://domain.com/api/get_catalog.php?id=351&user=878&key=b8:1: parser error : SYSTEM or PUBLIC, the URI is missing in /dokumenti/skripte/xmlupdate/lost/test/lost_xml.php on line 59

Warning: simplexml_load_file() [function.simplexml-load-file]: <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"> in /dokumenti/skripte/xmlupdate/lost/test/lost_xml.php on line 59

Warning: simplexml_load_file() [function.simplexml-load-file]: ^ in /dokumenti/skripte/xmlupdate/lost/test/lost_xml.php on line 59
xml $ not loaded. 
```

当我使用 Firefox 并将 XML 从 url 保存到磁盘时，当我尝试从 url 获取它时解析它没有问题。

XML 看起来不错： XML 的一部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<RecroKatalog>
<viewCustomerDiscount>
    <BrojArtikla>10214</BrojArtikla>
    <Naziv>Eksterno kucište 2.5&quot; S-ATA+IDE HDD, Aluminium, USB 2.0</Naziv>
    <NetoPrice>81.8224</NetoPrice>
    <Status>Dostupno</Status>
    <Opis></Opis>
    <dugi_opis>Isporucuje se u SIVOJ boji</dugi_opis>
    <Image>http://shop.lost.hr/data/images/big/10.jpg</Image>
    <WEB_Grupa>Ladice i eksterna kucišta - OSTALO</WEB_Grupa>
    <Akcija>0</Akcija>
    <Proizvodjac></Proizvodjac>
    <Klasifikacija>PH-25SD-B/VK220</Klasifikacija>
</viewCustomerDiscount> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T19:03:09.980

错误消息中有一些**巨大**的线索。它抱怨看到：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN"> 
```

它是该网站提供的 HTML 文档的开始……而不是您要查找的 XML。

这通常发生在您必须针对远程服务进行身份验证时（因此在您登录时在浏览器中工作），但您并没有告诉 SimpleXML 为您执行此操作。

# javascript - 将 Python 代码合并到 JavaScript Web 应用程序中

> ID：14465947
> 
> 赞同：1
> 
> 时间：2013-01-22T18:56:30.213
> 
> 标签：javascript, python, django

我主要是一名 Java 和 Python 开发人员，最近我开始学习 JavaScript 来设计我目前正在开发的应用程序。为了设计应用程序，我想将一些必要的 Python 代码合并到 JavaScript 框架中。但是，我不太确定如何执行此操作。我想实现的特定脚本是 Python 中的文件编写脚本，它采用从 JavaScript 生成的一些变量，并编写一个包含信息并以某种方式格式化以适应特定文本文件格式的文件。代码如下。我还在应用程序中使用了 PHP。是否可以使用 Django 来合并 Python 代码（我以前从未使用过 Django）或其他方式？谢谢。

Python：

```
 newfile = open(newfile.txt, "w")
 newfile.write("New File")
 newfile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:23:21.173

好的，对于 Web 应用程序，对 python 的支持将取决于浏览器是否具有作为插件提供或内置于浏览器中的 python 支持。对于大多数查看应用程序的人来说，依靠这种情况可能不是一个好主意。如果这样做，只需将脚本包含`<SCRIPT type="text/x-python" src="path-to-your-pyfile.py">`在 html 的标记中即可。作为替代方案，由于 html5，javascript 现在支持写入包含文本和二进制数据的文件。[请参阅此处](http://www.w3.org/TR/file-writer-api/)的文件 api 。

如果使用文件 api 出现问题，您始终可以创建一个指向文件的链接，供用户使用数据 URI 从 javascript 中保存，如下所示：

数据：文本/纯文本；base64，aGVsbG8gZnJvbSBhIGRhdGEgdXJpISEh

这是一个 html 文件的示例，它从 javascript 注意我推出了自己的 base64 编码器，但有许多 js 库可用于此。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>
<SCRIPT type="text/javascript" >
var BASE_64_ALPHABET =//for encoding base64
[
 'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
 'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
 '0','1','2','3','4','5','6','7','8','9','+','/'
];
var BASE_64_PAD = '=';
function valueAt(source,index)
{
    var result = null;

    if(source.charAt)
        result = source.charAt(index);
    else 
        result = source[index];

    if(result.charCodeAt)
        result = result.charCodeAt(0);

    if(result === null | result === undefined)
        return 0;

    return result;
}
function toBase64(data, offset, length)
{
    var padSize = (3-(length % 3));

    if(padSize == 3 && length != 0)
        padSize = 0;

    var bufferSize = ((4*(length-(length%3)))/3); + padSize;
    var buffer = new Array(bufferSize);

    var iterationLimit = length + (length % 3) - 1;

    var octetMask = 0xFF;
    var sextetMask = 0x3F;

    for(var sourceIndex=0,destinationIndex=0;sourceIndex<iterationLimit;sourceIndex+=3,destinationIndex+=4)
    {
        var readBlock =
        (
            ((valueAt(data, offset+sourceIndex) & octetMask) << 16) |
            ((valueAt(data, offset+sourceIndex+1) & octetMask) << 8) |
            (valueAt(data, offset+sourceIndex+2) & octetMask)
        );

        buffer[destinationIndex] = BASE_64_ALPHABET[(readBlock >>> 18) & sextetMask];
        buffer[destinationIndex+1] = BASE_64_ALPHABET[(readBlock >>> 12) & sextetMask];
        buffer[destinationIndex+2] = BASE_64_ALPHABET[(readBlock >>> 6) & sextetMask];
        buffer[destinationIndex+3] = BASE_64_ALPHABET[readBlock & sextetMask];
    }
    for(var i = 0; i < padSize; i++)
        buffer[buffer.length - 1 - i] = BASE_64_PAD;

    return buffer.join("");
}

function makeDataURI()
{
    var data = document.getElementById("datasource").value;
    var mime = document.getElementById("mimesource").value;
    alert("data:"+mime+";base64,"+toBase64(data,0,data.length));
}

</SCRIPT>
</head>
<body>
<INPUT id="datasource" type="text" value="enter your file data here"></INPUT>
<INPUT id="mimesource" type="text" value="enter your mime type here"></INPUT>
<INPUT type="button" onclick="makeDataURI();" value="Generate URI"></INPUT>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:31:28.297

注意：有关完整的客户端解决方案，请参阅 Aaron 的回答。

* * *

您可以调用服务器端脚本以生成文件。

这是使用 ajax 完成的（从客户端到服务器进行异步调用）

你可以[用 Django做到这一点](http://www.b-list.org/weblog/2006/jul/31/django-tips-simple-ajax-example-part-1/)

这是[Django Ajax 资源的列表](https://code.djangoproject.com/wiki/AJAX)

或者你可以单独做，网上有很多关于 Ajax 的资源

### 关于 Javascripts 文件 API

其他一些人建议使用 Javascript 的文件编写 API，但假设我对您的理解正确并且您正在编写浏览器代码（不是 Node.js），我建议您不要这样做。这些 API 尚未得到广泛支持。以下是该 API 支持的浏览器列表：http: [//caniuse.com/#feat=filesystem](http://caniuse.com/#feat=filesystem)

# java - 在 Jsoup 中设置不同的本地地址值

> ID：14465948
> 
> 赞同：0
> 
> 时间：2013-01-22T18:56:42.497
> 
> 标签：java, jsoup

有人知道 Jsoup 有可能设置不同的本地地址吗？就像在多主机或集群环境中一样。Apache HttpClient 框架之类的东西

```
HttpClient.getHostConfiguration().setLocalAddress(InetAddress.getByName(ipAddress)) 
```

也许这是未来版本中计划的内容？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:29:42.883

我认为那是不可能的（还）。唯一可访问的连接设置在[Connection](http://jsoup.org/apidocs/org/jsoup/Connection.html)类中。

`connect()`您可以通过以下方法获得这些设置：

```
Connection c = Jsoup.connect("http://your.url.here"); 
```

[查看HttpConnection](http://jsoup.org/apidocs/org/jsoup/helper/HttpConnection.html)的源代码（实现`Connection`）。

如果您有来自 httpclient 的输入流，则可以将它与 jsoup 一起使用，因为它具有输入流的[解析方法](http://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse%28java.io.InputStream,%20java.lang.String,%20java.lang.String,%20org.jsoup.parser.Parser%29)（目前似乎是最好的解决方案）。

顺便提一句。您可以在此处发布功能请求：[https ://github.com/jhy/jsoup/issues](https://github.com/jhy/jsoup/issues)

# symfony - Symfony2 和 Doctrine，具有 OneToOne 关系的列不能为空

> ID：14465956
> 
> 赞同：3
> 
> 时间：2013-01-22T18:57:28.690
> 
> 标签：symfony, orm, doctrine, one-to-one

这是一个实体（已**编辑：完整文件内容**）

```
// Eve\MoonBundle\Entity\MoonMaterial.php

namespace Eve\MoonBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

//use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Table(name="_moon_material")
 * @ORM\Entity()
 */
class MoonMaterial
{

    public function __construct()
    {
        //$this->invTypes_byTypeID = new ArrayCollection();
    }

    // relations start

    /**
     * @ORM\OneToOne(targetEntity="Eve\DumpBundle\Entity\invTypes")
     * @ORM\JoinColumn(name="typeID", referencedColumnName="typeID")
     */
    private $invTypes_byTypeID;

    public function get_invTypes_byTypeID()
    {
        return $this->invTypes_byTypeID;
    }

    // relations end

    /**
     * @ORM\Column(name="userID", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="NONE")
     */
    private $userID;

    /**
     * @ORM\Column(name="moonID", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="NONE")
     */
    private $moonID;

    /**
     * @ORM\Column(name="typeID", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="NONE")
     */
    private $typeID;

    /**
     * Set userID
     *
     * @param integer $userID
     * @return MoonMaterial
     */
    public function setUserID($userID)
    {
        $this->userID = $userID;

        return $this;
    }

    /**
     * Get userID
     *
     * @return integer
     */
    public function getUserID()
    {
        return $this->userID;
    }

    /**
     * Set moonID
     *
     * @param integer $moonID
     * @return MoonMaterial
     */
    public function setMoonID($moonID)
    {
        $this->moonID = $moonID;

        return $this;
    }

    /**
     * Get moonID
     *
     * @return integer
     */
    public function getMoonID()
    {
        return $this->moonID;
    }

    /**
     * Set typeID
     *
     * @param integer $typeID
     * @return MoonMaterial
     */
    public function setTypeID($typeID)
    {
        $this->typeID = $typeID;

        return $this;
    }

    /**
     * Get typeID
     *
     * @return integer
     */
    public function getTypeID()
    {
        return $this->typeID;
    }

} 
```

控制器中的代码（**已编辑**）

```
// Eve\MoonBundle\Controller\IndexController.php
namespace Eve\MoonBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Eve\MoonBundle\Entity\MoonMaterial;

class IndexController extends Controller
{

    public function defaultAction($moonName)
    {
        // ...
        $dc = $this->getDoctrine();
        $form = $this
            ->createFormBuilder()
            ->add('typeID', 'choice', $choiceSettings)
            ->getForm();

        if ($this->getRequest()->isMethod('post'))
        {
            $form->bind($this->getRequest());
            {
                $data = $form->getData();
                $typeID = $data['typeID'];

                if (is_int($typeID))
                {
                    $em = $dc->getEntityManager();
                    $mm = $em->getRepository('EveMoonBundle:MoonMaterial');

                    $result = $mm->findOneBy(array(
                            'userID' => $this->getUser()->getID(),
                            'typeID' => $typeID,
                            'moonID' => $moon->getItemID()));

                    if ($result)
                    {
                        $em->remove($result);
                        $em->flush();
                    }

                    $moonMaterial = new MoonMaterial();
                    $moonMaterial
                        ->setUserID($this->getUser()->getID())
                        ->setTypeID($typeID)
                        ->setMoonID($moon->getItemID());

                    $em->persist($moonMaterial);
                    $em->flush();
                }
            }
        }

        $twig = 'EveMoonBundle:Index:default.html.twig';
        return $this->render($twig, array(
                'formAddMoonMaterial' => $form->createView()));
    }

} 
```

当我尝试这个时，我得到错误

```
An exception occurred while executing 'INSERT INTO _moon_material (userID, moonID, typeID) VALUES (?, ?, ?)' with params {"1":38,"2":40001583,"3":null}:

SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'typeID' cannot be null 
```

但是当我评论 OneToOne（上面的代码）关系时，它可以正常工作，所以主要问题在于描述 OneToOne 关系......请帮助处理它

我想要什么，如果表“_moon_material”中存在，我想重写条目，如果不存在则简单地写它

ps：我只需要“读取”的关系（通过id连接名称）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T20:53:06.360

如果要允许设置空值

```
@ORM\JoinColumn(name="typeID", referencedColumnName="typeID") 
```

到

```
@ORM\JoinColumn(name="typeID", referencedColumnName="typeID", nullable=true) 
```

并且您应该让“typeID”列也可以为空。（请参阅[如何修改 MySQL 列以允许 NULL？](https://stackoverflow.com/questions/212939/how-do-i-modify-a-mysql-column-to-allow-null)）

如果您不想拥有 NULL，则相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:18:30.900

我不知道为什么，我不能做单向关系，所以我通过向 invTypes 表注释添加一些代码来解决它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:56:58.043

我会检查您实体中的方法 setTypeID() ，这很可能没有按照您的预期设置属性，因此为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T17:22:10.960

`$invTypes_byTypeID`和属性都`$typeID`映射到同一`typeID`列。你不能用教义来做到这一点。

我建议您删除该`$typeID`属性，而不是使用“类型 ID”，而是使用类型实例并将其设置为`$invTypes_byTypeID`属性。

我想这将意味着改变你的形式等......

# android - Win7 64位无法安装ADT

> ID：14465960
> 
> 赞同：0
> 
> 时间：2013-01-22T18:57:46.433
> 
> 标签：android, eclipse, adt, windows-7-x64

> **可能重复：**
> [安装 ADT 插件时出现“找不到所需项目”错误](https://stackoverflow.com/questions/7082158/required-items-could-not-be-found-error-when-installing-adt-plugin)

我是android开发的新手。我能够设置整个环境并在我的工作场所运行一些安卓应用程序示例。在工作中，我使用 Windows 7、32 位。

我想在家里尝试一些东西，所以尝试在 Windows 7 64 位操作系统上在家中设置相同的环境。

我下载了所需软件的 64 位版本：

**Eclipse 4.2 Juno**， **Android ADK** **64 位 JDK**。

但是现在每当我尝试为 Eclipse 安装 ADT 插件时，它都会显示错误：

"**无法完成安装，因为找不到一个或多个必需项。正在安装的软件：Android 开发工具 21.0.1.v201212060256-543035 (com.android.ide.eclipse.adt.feature.group** "

我整天搜索这个并尝试了所有可能的解决方案，例如以管理员权限运行，使用 http 和所有排序但没有帮助。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:21:38.347

我遇到了同样的问题，我从来没有发现如何解决这个错误，但这个下载包括一切准备就绪和设置。下载整个捆绑包，而不是使用现有 IDE 的选项

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

# python-2.7 - 我应该避免使用对象作为变量名吗？

> ID：14465961
> 
> 赞同：2
> 
> 时间：2013-01-22T18:57:50.233
> 
> 标签：python-2.7

在我了解旧式类和新式类之间的区别之前，我不知道`object`解释器用于任何事情。现在我知道要创建新样式的类，您必须执行以下操作：

```
class Spam(object):
    pass 
```

在我的旧代码中，我通常使用以下内容遍历对象列表：

```
for object in xml_objects:
    pass 
```

我不知道我是否在做危险的事情，我应该回去寻找我这样做的任何案例并创建新名称。据我了解，我`object`从 for 循环的范围内征用，但它应该保留在外面。

我应该回去重写这些循环吗？如果是这样，是因为它的形式不好还是因为它会导致真正的错误（或两者兼而有之）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:02:33.807

只要您只`for`在函数范围内编写此类循环，它很可能不会立即引起任何问题。在顶层，您可能会遇到问题。例如，

```
for object in [1, 2, 3]:
    pass

class foo(object):
    pass 
```

给出这个输出：

```
Traceback (most recent call last):
  File "foo.py", line 4, in <module>
    class foo(object):
TypeError: Error when calling the metaclass bases
    int() takes at most 2 arguments (3 given) 
```

所以，我会在有机会时修复它。一般来说，避免隐藏现有名称是一种很好的形式，这样可以避免潜在的混淆以及潜在的运行时错误。在极少数情况下，您可能会认为这是值得的，但在 的情况下`object`，缩写名称如`o`or`obj`是习惯性的。

# r - 让 R 控制台以红色突出显示错误

> ID：14465962
> 
> 赞同：2
> 
> 时间：2013-01-22T18:57:50.570
> 
> 标签：r, error-handling

很多时候，我将用于评估的代码粘贴到 R 控制台中。有时我粘贴的语句中间会出现错误，我想念它们，因为它们与屏幕上的其他内容融为一体。有没有办法通过颜色编码让它们脱颖而出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:06:11.187

from `?base::options`error：控制处理非灾难性错误的函数或表达式，例如由停止以及信号和内部检测到的错误产生的错误。如果选项是函数，则生成对该函数的不带参数的调用作为表达式。默认值为 NULL：在这种情况下的行为请参见 stop。函数 dump.frames 和 recover 提供了允许事后调试的替代方法。请注意，这些需要在诸如“.Rprofile”之类的启动文件中指定为例如选项（error=utils::recover）。

所以，我想你可以修改你的 .Rprofile 以不同的方式处理错误，如果停止太多，也许你可以用一些换行符包围它们，使它们在你的代码中脱颖而出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T19:12:17.417

在 linux 或 mac 上，您可以简单地加载**colorout**包，您的错误将显示为红色。

![在此处输入图像描述](../Images/b5c57558f0bf2bf4b6205fedf3f71eda.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-29T17:11:47.097

试试这些：

`stop("an error occurred")`

`message("an error occurred")`

`cat("error occurred", file=stderr())`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-29T17:20:06.690

我建议使用[RStudio](http://www.rstudio.com/)。它有许多用于控制台和文件文本的颜色选项，更改起来非常简单。

这是我的样子。它使错误、警告和消息非常容易被发现。

![在此处输入图像描述](../Images/0691f2dff9aedbd5219b106f880f102a.png)

# mysql - 在 MySQL 中使用 group by 时 count(*) 不返回 0

> ID：14465970
> 
> 赞同：2
> 
> 时间：2013-01-22T18:58:35.227
> 
> 标签：mysql, count, group-by

我有以下查询

```
SELECT info, count(*) as info_cnt 
FROM T
WHERE uid = 1 and info IN ('a', 'b','c', 'd')
GROUP BY info 
```

它返回

```
+----------+--------+
| info_cnt | info   |
+----------+--------+
|      334 | a      |
|        2 | b      | 
|     1400 | d      |
+----------+--------+ 
```

如何编写查询以使其返回`c`as的计数`0`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:05:52.357

您可以创建一个临时表：

```
CREATE TEMPORARY TABLE info_values (v CHAR(1));
INSERT INTO info_values VALUES ('a'), ('b'), ('c'), ('d'); 
```

然后做一个`LEFT JOIN`：

```
SELECT v, count(uid) as info_cnt 
FROM info_values
LEFT JOIN T ON uid = 1 AND T.info = info_values.v
GROUP BY v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:05:41.053

您不能以编写查询的方式返回零。如果你有`info`一个表中的值，你可以加入它们，或者你可以使用类似于这样的子查询：

```
SELECT c.info, count(t1.info) as info_cnt 
FROM 
(
  select 'a' info
  union all
  select 'b'
  union all
  select 'c'
  union all
  select 'd'
) c
left join T t1
  on c.info = t1.info
  and t1.info IN ('a', 'b','c', 'd')
where uid = 1
GROUP BY c.info 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f2675/5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:18:37.553

请试试这个：

[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/39680/1)

```
select distinct t.info, coalesce(a.cnt,0) counts
from T
left join 
(select info, count(*) as cnt
 from T where
 uid = 1
 and info in ('a', 'b', 'c', 'd')
group by info)a
 on t.info = a.info
 group by t.info
;

| INFO | COUNTS |
-----------------
|    a |      2 |
|    b |      1 |
|    c |      0 |
|    d |      3 | 
```

# bash - BASH 中的变量赋值

> ID：14465972
> 
> 赞同：1
> 
> 时间：2013-01-22T18:58:39.240
> 
> 标签：bash

重新措辞以便更好地理解。

我正在定制一个基于 git flow 的插件，我试图让 init 的尾部创建一个 repo。我知道手动执行的所有命令，但由于这个原因我无法自动化它。

```
REPO_NAME= `${PWD##*/}`
    echo $REPO_NAME
    ORG=':org_name'
    curl -u 'user:pass' \
      -d '{ "name": "'$REPO_NAME'",  "private": "true", "has_issues": "true", "has_wiki": "false", "has_downloads": "true"}' -i "https://api.github.com/orgs/$ORG/repos" 
```

而且无论我对命令做什么，我总是得到这个并且 curl 失败。

```
/usr/local/bin/git-hf: 1: /usr/local/bin/git-hf: test-testy: not found

errors": [
{
  "code": "custom",
  "field": "name",
  "resource": "Repository",
  "message": "name is too short (minimum is 1 characters)"
} 
```

], "message": "验证失败"

我知道这可能是一个愚蠢的问题，但我更关心的是我的逻辑中的错误，而不是直接的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:03:13.467

试试这样做：

```
dir=${PWD##*/}
echo "$dir" 
```

# windows - 在 Windows Batch 和 Bash 中逐字读取文件

> ID：14465973
> 
> 赞同：1
> 
> 时间：2013-01-22T18:58:44.227
> 
> 标签：windows, bash, cmd

我需要打印文件中每个单词的重复次数的所有单词。但我无法理解如何在 Win CMD 和 Bash 中逐字读取文件。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:10:22.480

**仅限 Windows 批处理**

这将枚举文件中的每个单词并显示该单词及其计数。

**限制**

1.  批处理行长度限制为[8191](http://support.microsoft.com/kb/830473) (Windows XP+)。[2047](http://support.microsoft.com/kb/830473)用于较旧的操作系统。

**脚本**

```
@echo off
setlocal EnableExtensions DisableDelayedExpansion
for /f "delims=" %%A in (file.txt) do (
    set "_=%%A"
    call :Expand_
)

:: Display the Word and Count
rem set word:
for /f "tokens=2,3 delims=:=" %%X in ('set word:') do echo %%X = %%Y
goto End

:Expand_
:: Clean Special Characters
set "_=%_:"=%"
set "_=%_:^=%"
set "_=%_:<=%"
set "_=%_:>=%"
set "_=%_:&=%"
set "_=%_:|=%"
:: Replace Whitespace
set "_=%_:  =%"
:: Remove Plurals
rem set "_=%_:'s=%"
:: Clean Punctuation
:WordLoop
for /f "tokens=1,* delims=`~!@#$%%*()-_+=\[]{};:/?., " %%X in ("%_%") do (
    set ".=%%X"
    call :Expand.
    set "_=%%Y"
)
if defined _ goto WordLoop
goto :eof

:Expand.
:: Count the Words
if defined word:%.% (
    set /a "word:%.%+=1"
) else (
    set "word:%.%=1"
)
goto :eof

:End
endlocal 
```

# java - 在方法中使用扫描仪类

> ID：14465976
> 
> 赞同：2
> 
> 时间：2013-01-22T18:59:01.097
> 
> 标签：java, class

我目前有一个项目，它全部在一个类中，并且有多种方法。到目前为止，在每种方法中，我都必须在顶部使用这行代码来初始化我的扫描仪。从用户那里获取输入。

```
Scanner input = new Scanner(System.in); 
```

我的问题是，有没有更有效的方法来做到这一点？

编辑：高效我的意思是，减少我必须编写这一行代码的次数？无论如何我可以初始化一次并重新使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:21:27.433

它可能对你的表现的影响可以忽略不计，但如果你像我一样想要以神经质有效的方式来做这件事，我建议`input`你在课堂上做一个领域。这样，它将享受类范围并且可以访问您的所有方法。为了确保它始终是一个有效的扫描器（从不为空），它可能应该`public static final`：

```
class TheClass
{
    public static final Scanner input = new Scanner(System.in);

    public void someMethod()
    {
          String text = input.readLine();
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:15:57.397

```
Scanner input 
```

外部方法，并被所有人使用？也许将其创建为静态？

在构造函数中你可以把这段代码

```
input = new Scanner(System.in); 
```

或者如果您采用静态方式，您可以添加此代码

```
static Scanner input;

static {
  input= new Scanner(System.in); 
 } 
```

这对你有用吗？

不确定您的目标到底是什么。

# python - 在 MySQL 数据库中存储字典字典

> ID：14465982
> 
> 赞同：1
> 
> 时间：2013-01-22T18:59:10.847
> 
> 标签：python, mysql

假设我有一本包含成对比较的字典：

```
 dict_of_dict = {"apple":{"apple":1, "orange":.5, "banana":.7}, "orange":{"orange":1, "apple": .3, "banana":.8}, "banana":{"banana":1, "apple":.7, "orange":.8}} 
```

每个嵌入式字典可以包含约 20 万个条目。

在 MySQL 中存储它的一种（可怕的）方法是创建两个表*fruit*和*fruit 映射*，其中*fruit*存储每个水果的id，而*fruit 映射*存储每个成对的分数。

*fruit*是一个带有 id 和 fruit 的两列表：

```
 fruit_id fruit
 0        apple
 1        orange
 2        banana 
```

*水果映射将**水果*的 id映射到每个成对比较的分数。

```
 fruit_id_A   fruit_id_B    score

       0               0         1        
       0               1        .5
       0               2        .7 
```

...对于fruit_ids 1 和2 以此类推。在处理约200k 个条目时，您会看到明显的问题。在实际应用中，我们不会有 ~200k**2 行，因为只比较了水果的一个子集，但即使假设 50,000 个水果获得的分数也会给我们 10,000,000,000 行。有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:51:39.387

> 将其存储在 MySQL 中的一种（可怕的）方法是创建两个表 fruit 和 fruit 映射，其中 fruit 存储每个水果的 id，而fruit 映射存储每个成对的分数。

这不是一个糟糕的方法，而是关系数据库的明智方法。

当且仅当您的一组水果永远不会改变时，您可以只使用一个表格，识别水果和一个包含所有分数的浮点数组。但是您需要知道数组的哪个索引映射到哪个其他水果。

我会选择明显的关系方法。拥有 200M 行有什么不好，如果你索引你需要访问的列，也不会有性能问题。

# django - django 视图不存在

> ID：14465987
> 
> 赞同：0
> 
> 时间：2013-01-22T18:59:22.377
> 
> 标签：django, django-views

我有一些正在工作的视图，但是现在我添加了一个新视图，它不再起作用，并且我不断收到错误消息`ViewDoesNotExist`。

追溯：

```
 File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response 101.request.path_info)

  File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve 300.sub_match = pattern.resolve(new_path)

  File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve 
209\. return ResolverMatch(self.callback, args, kwargs, self.name)

  File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in callback  216\. self._callback = get_callable(self._callback_str)

  File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py" in wrapper 27.result = func(*args)

  File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in get_callable 101.(lookup_view, mod_name))

  Exception Type: ViewDoesNotExist at /login/
  Exception Value: Could not import owners.views.login_request. View does not exist in module owners.views. 
```

关于我可能做错的任何其他信息/指示都会有所帮助。

我的观点

```
def login_request(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile')

    elif request.method == 'POST':
        form = Loginform(request.POST)

        if form.is_valid():
            username = form.cleaned_data['username']
            password = form.cleaned_data['password']
            site_user = authenticate(username= username,password = password )

            if site_user is not None:
                login(request,site_user)
                return HttpResponseRedirect('/profile')
            else:
               return render_to_response('login.html',{'form':form},context_instance = RequestContext(request))
        else:
            return render_to_response('login.html',{'form':form},context_instance = RequestContext(request))

    else:
        '''user not subinting show loging form'''
        form = Loginform()
        context = {'form': form}
        return render_to_response('login.html',context,context_instance = RequestContext(request)) 
```

我的网址看起来像这样

```
(r'^login/$','owners.views.login_request'), 
```

我有大约 70 次观看，但只有 '/' 有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:50:30.780

确保视图函数的名称与在 url 中传递的名称相同。否则，请传递视图函数和您的 url，是的所有 urls 文件:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:26:21.987

问题在于模型从各地进口时感到困惑，所以我制作了一个中央应用程序来管理所有事情。

# symfony - 实体是否总是必须基于 Symfony2 中的数据库？

> ID：14465991
> 
> 赞同：9
> 
> 时间：2013-01-22T18:59:37.450
> 
> 标签：symfony

我有一个项目，其中 DB 隐藏在 Web 服务（其中很多）后面。简而言之 - 直接访问数据库是不可能的。

我使用 Symfony2 并且每次当我有对象“存储数据”（例如：用户、汽车、房间）和服务（可从容器访问）/模型时，当涉及更重的逻辑时（例如TransactionMaker、RoomBooker、CarDestroyer 等）。

没有任何 ORM 描述的实体被选择而不是数组，因为框架提供了非常简单的方法来验证、构建表单和 IDE 智能感知。

现在它工作正常，但一些开发人员声称实体必须始终反映数据库中的表。真的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T20:46:06.517

实体仅在配置为这样做时才映射到数据库表，从书中读取：

> 该类——通常称为“实体”，意思是保存数据的基本类——很简单，有助于满足应用程序中需要产品的业务需求。[http://symfony.com/doc/current/book/doctrine.html#creating-an-entity-class](http://symfony.com/doc/current/book/doctrine.html#creating-an-entity-class)

以比使用简单数组更正式的方式对数据建模是一种很好的做法，这就是它们存在的原因。

也许它们最常用于将数据映射到数据库，但这不是必需的。它们实现了作为数据容器的目的，以一种有意义的方式对应用程序的信息进行建模。（即在用户实体中对用户建模）

如果您不使用数据库来持久化您的实体，请随意使用它们来传递数据、创建表单、使用验证服务、安全性等等。创建一个服务以允许从 Symfony 应用程序访问 Web 服务上的信息也是一个好主意，这样您就可以拥有类似的东西：

```
$user = $this->get('some_persistance_service_you_write')->find($id,'user');
$user->setName('new value');
$err = $this->get('validator')->validate($user);
//....
$this->get('some_persistance_service_you_write')->persist($user); 
```

当然，这是题外话，但它是一个示例，说明如何使用没有数据库访问权限的实体。

# django - 如何在 django 中设置和获取会话变量？

> ID：14465993
> 
> 赞同：63
> 
> 时间：2013-01-22T18:59:44.617
> 
> 标签：django, session

当用户登录时，我需要在会话中设置一个变量。我怎样才能做到这一点？

```
if request.user.is_authenticated():
profile = request.user.get_profile()
request.session['idempresa'] = profile.idempresa 
```

我的另一个问题是一种形式：

```
class PedidoItensForm(ModelForm):
class Meta:
    model = ItensPedido

def __init__(self, *args, **kwargs):
    profile = kwargs.pop('vUserProfile', None)
    super(PedidoItensForm, self).__init__(*args, **kwargs) 
```

如何获得会话的“idempresa”值，以在我的查询集中使用？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2014-08-27T07:52:48.123

对于设置会话变量：

```
request.session['idempresa'] = profile.idempresa 
```

获取会话数据：

```
if 'idempresa' in request.session:
    idempresa = request.session['idempresa'] 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-08-07T05:34:11.360

对于设置会话变量：

```
request.session['fav_color'] = 'blue' 
```

用于获取会话数据

```
fav_color = request.session.get('fav_color', 'red') 
```

参考：[https ://docs.djangoproject.com/en/dev/topics/http/sessions/](https://docs.djangoproject.com/en/dev/topics/http/sessions/)

# xcode - 从 Xcode Workspace 中分离一个项目

> ID：14465994
> 
> 赞同：0
> 
> 时间：2013-01-22T18:59:47.667
> 
> 标签：xcode

我在我的 Xcode 工作区中添加了两个项目，这两个项目共享很多类和艺术品。现在我想将我以后的项目与工作区分开或不分开，但我也想要后面项目文件夹中的所有类，但是当我直接打开项目文件夹时看不到它们。有没有办法做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:15:23.373

打开应该分开的项目。选择文件 > 将文件添加到 ProjectName。在打开面板中找到共享文件。选中将项目复制到目标组的文件夹复选框以将共享文件复制到项目的文件夹中。

![在此处输入图像描述](../Images/8ecb58357c690e2016281b8b3d3f1ab1.png)

# r - R子集具有多个键的数据帧

> ID：14465996
> 
> 赞同：0
> 
> 时间：2013-01-22T18:59:58.967
> 
> 标签：r, subset

我有以下数据框

```
id val
a  1
a  2
a  3
b  4
b  5
c  6 
```

我想使用 id 的子集找到这个数据框的子集。我知道如果子集标准只是 1 个值，我可以执行以下操作，例如

```
y = subset(x,id=='a') 
```

但是，如果我有一组多个 id，我如何获得一个子集。例如 c('a','b')。正在做

```
y = subset(x,id==c('a','b')) 
```

没有给我我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T19:02:39.013

您可以使用逻辑运算符进行子集化，例如

```
y=subset(x,id=='a' | id=='b') 
```

或者您可以使用`%in%`运算符：

```
y=subset(x,id %in% c('a','b')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T19:07:02.080

试试 %in% 运算符。

```
> id<-c("a","a","a","b","b","c")
> val<-c(1,2,3,4,5,6)
> x<-data.frame(cbind(id,val))
> subset(x,id %in%c('a','b'))
  id val
1  a   1
2  a   2
3  a   3
4  b   4
5  b   5 
```

# php - 使用 php 获取图像尺寸

> ID：14465997
> 
> 赞同：0
> 
> 时间：2013-01-22T19:00:04.513
> 
> 标签：php, html, image

我正在尝试将图像的宽度和高度回显到我拥有的循环数组中。除了宽度和高度之外的所有东西似乎都在那里。图像显示在我拥有的轮播中。为了让轮播正常工作，它喜欢拥有图像的宽度和高度。我不想输入手动值并扭曲图像！

这是我的代码片段。

```
 <?php do {
 $image = $_SERVER['DOCUMENT_ROOT'].$row_rs_imgpath['userimagespath'].$row_rs_smimg['thumbfile'];
 $x= imagesx($image);
 $y = imagesy($image);

 ?>

    <img src="<?php echo $row_rs_imgpath['userimagespath'].$row_rs_smimg['thumbfile']; ?>" alt="<?php echo $row_rs_smimg['imgname']; ?>" width="<?php echo $x;?>" height="<?php echo $y;?>" />

 <?php } while ($row_rs_smimg = mysql_fetch_assoc($rs_smimg)); ?> 
```

当您查看页面源代码时，您会得到以下信息：

```
<img src="/images/uploads/my-future-car-1358783315_thumb.jpg"width="" height="" />
<img src="/images/uploads/albert_docks_liverpool-1358872736_thumb.jpg" width="" height="" /> 
```

我也试过

```
list($width, $height)= getimagesize($image); 
```

但这也不起作用。任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:05:14.907

*使用getimagesize()*时，您是否尝试使用文件的完整路径？当它找不到图像时，它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T19:09:24.567

你的电流`$image`是一个字符串。您尝试使用的函数旨在用于 GD 库中的资源。

如果您只需要尺寸，更简单的方法是根本不使用 GD 库（这对于您正在做的事情来说太过分了）。我建议使用`getimagesize`. [http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

```
$size = getimagesize($filename);
echo $size[0]; //width
echo $size[1]; //height 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:05:27.833

`imagesx`并`imagesy`处理图像资源，而不是文件名。那行代码`getimagesize`是正确的，但是您处理图像的方式只能在浏览器中工作，而不是在文件系统中。

`/images/image.gif`将在浏览器中工作，但您需要相对路径 ( `../../images/image.gif`) 或文件系统特定路径 ( `/users/joe/www/images/image.gif`) 才能让`getimagesize`函数找到正确的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:11:45.280

### 从 Image 对象获取图像大小：

```
$source = imagecreatefrompng(...);
$width = imagesx($source);
$height = imagesy($source); 
```

对于`imagesx`和`imagesy`函数，您需要传递资源，而不是像您正在做的字符串。

### 从路径获取图像大小：

```
$size= getimagesize('sample-image.jpg');
$width = $gis[1];
$height = $gis[1]; 
```

或者

```
list($width, $height) = getimagesize($filename) 
```