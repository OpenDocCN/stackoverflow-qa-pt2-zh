# StackOverflow 问答 15792000-15792999

# asp.net-mvc - 带有 Url 重写的 MVC 图像处理程序

> ID：15792004
> 
> 赞同：2
> 
> 时间：2013-04-03T15:48:25.423
> 
> 标签：asp.net-mvc, image, url-rewriting, handler

我正在尝试构建一个以友好方式返回图像的处理程序，例如[http://mydomain.com/images/123/myimage.jpg](http://mydomain.com/images/123/myimage.jpg)甚至 .../123/myimage

在使用 .NET Forms 和 ashx 文件之前，我曾这样做过。

我现在正在使用 MVC 4（我是新手）并且正在尝试做同样的事情。我重新使用了很多旧代码，并在我的项目中添加了一个 ashx 文件，并通过查询字符串成功生成了我的图像。但是，我就是无法让 Url Rewrite 工作！

在我的旧代码中，我使用了：

```
 RouteTable.Routes.MapHttpHandlerRoute("imagestoret", "imagestore/{fileId}", "~/Images/ImageHandler.ashx");
        RouteTable.Routes.Add(new Route("imagestore/{fileId}", new PageRouteHandler("~/Images/ImageHandler.ashx"))); 
```

其中 MapHttpHandlerRoute 是在 Internet 上找到的自定义类，其中包含：

```
 public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        if (!string.IsNullOrEmpty(_virtualPath))
        {
            return (IHttpHandler)System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(_virtualPath, typeof(IHttpHandler));
        }
        else
        {
            throw new InvalidOperationException("HttpHandlerRoute threw an error because the virtual path to the HttpHandler is null or empty.");
        }
    } 
```

从那以后，我尝试将其转换为与查询字符串一起成功工作的控制器，但是，当我尝试在其中添加路由时，仍然返回 404 错误。

```
routes.MapRoute(
            "ImageProvider",
            "imagestore/{fileId}/",
            new { controller = "File", action = "GetFile", id = UrlParameter.Optional }); 
```

我还尝试了 Internet 上的 ImageRouteHandler：

```
 public class ImageRouteHandler : IRouteHandler
{
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        // Do stuff
    }
} 
```

然后将以下内容添加到我的 RouteConfig.cs 中：

```
 routes.Add("MyImageHandler",
            new Route("imagex/{fileId}",
            new ImageRouteHandler())
        ); 
```

有谁知道我要去哪里错了？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:28:11.437

我还没有找到一个完美的解决方案，但有一个妥协。如果没有 {controller} 方面，我根本无法让路线工作。所以我最后做的是添加一条新路线：

```
 routes.MapRoute(
            "FileProvider",
            "{controller}/{action}/{id}/{name}",
            new { controller = "File", action = "GetFile", id = UrlParameter.Optional },
            new[] { "mynamespace.Controllers" }
        ); 
```

这允许路由到我的 Controller > FileController > GetFile 方法，例如

```
 public FileResult GetFile(int id, string name)
    {
        DB.UploadedFile file;

        file = DB.UploadedFile.GetFile(4, DB.UploadedFile.UploadedFileType.IMAGE, id, name);

        if (file != null && DB.UploadedFile.IsImage(file.Filename))
        {
            ImageFormat imgFormat = GetImageFormat(file.Extension);

            if (imgFormat != ImageFormat.Icon)
            {
                return File(file.FileContentsAsByteArray, file.ContentType);
            }
        }
        return null;
    } 
```

因此，这使我可以提供以下图像：

```
http://mydomain.com/File/GetFile/1/DogsAndCats 
```

该代码确保 id 和 name 匹配，因此人们不能只搜索文件数据库。

目前该文件没有扩展名，这可能会导致问题，但到目前为止 - 只要设置了内容类型），图像就会正确加载。

在我的代码中还有更多工作要做以服务其他文件类型，但也许这种妥协对其他人有用。

# java - 为什么 XMLStreamReader/StAXSource 会从 XML 中去除注释？

> ID：15792007
> 
> 赞同：3
> 
> 时间：2013-04-03T15:48:31.553
> 
> 标签：java, xml, stax, xml-comments, xmlstreamreader

下面的代码（基于来自[http://jax-ws.java.net/nonav/jax-ws-20-fcs/arch/com/sun/xml/ws/util/xml/StAXSource.html](http://jax-ws.java.net/nonav/jax-ws-20-fcs/arch/com/sun/xml/ws/util/xml/StAXSource.html)的示例代码）

```
String xml = "<a><b>a text</b><!--a comment--><b/></a>";
StringReader sr = new StringReader(xml);
XMLStreamReader reader = XMLInputFactory.newInstance().createXMLStreamReader(sr);
Source source = new StAXSource(reader);     
//Source source = new StreamSource(sr);
Result result = new StreamResult(System.out);      
TransformerFactory.newInstance().newTransformer().transform(source, result); 
```

产生以下结果：

```
<?xml version="1.0" encoding="UTF-8"?><a><b>a text</b><b/></a> 
```

即它去掉了xml 注释。如果我用 StreamSource 替换 StAXSource/XMLStreamReader，则保留注释。

有谁知道为什么 XMLStreamReader/StAXSource 组合将它们剥离出来，是否有任何方法可以防止它？测试是在没有第三方 jar 的 1.6 和 1.7 环境中完成的，因此 XMLStreamReader 成为

```
com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-24T10:53:45.730

[编辑：刚刚按照这里](https://docs.oracle.com/cd/E13222_01/wls/docs92/xml/stax.html#wp1076314)的描述尝试过，即

```
case XMLStreamConstants.COMMENT:
  System.out.print("<!--");
  if (xmlr.hasText())
     System.out.print(xmlr.getText());
... 
```

它确实阅读了评论。虽然这还没有回答原来的问题......

# joomla - 如何获取具有特定组 ID-link 的 Joomla 用户名列表？

> ID：15792011
> 
> 赞同：1
> 
> 时间：2013-04-03T15:48:42.567
> 
> 标签：joomla, get, usergroups

是否可以通过简单的用户 ID 链接获得特定用户组的用户列表，例如“注册用户”组？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:58:51.883

注册用户属于 id 为 2 的组。我试图在某处找到组名常量，但在研究我的项目时失败了，所以我最终制作了自己的常量。

无论如何，要获取属于某个组的用户，您可以使用

```
$registeredUsers = JAccess::getUsersByGroup(2); // in my project it was $self::REGISTERED_GROUP 
```

添加

```
jimport('joomla.access.access');
jimport('joomla.user.user'); 
```

如果没有加载必要的类之前。

然后你可以做

```
foreach($registeredUsers as $user_id) {
    $user = JFactory::getUser($user_id);
    echo $user->name;
} 
```

**重要提示：**在使用传入的链接选择用户之前，请确保`id`它属于您想要公开的 id 组列表。我猜您不想公开超级管理员用户名等

# android - 从另一个活动完成活动

> ID：15792014
> 
> 赞同：3
> 
> 时间：2013-04-03T15:48:56.957
> 
> 标签：android, android-activity, activity-finish

我有 3 个活动 A、B 和 C。A 导致 B 导致 C。我希望能够在 A 和 B 之间来回移动，但是一旦 C 开始，我想完成 A 和 B。我了解如何在通过意图启动 C 时关闭 B，但是如何在 C 启动时关闭 A？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-03T16:09:28.043

在您的`onCreate()`方法中，将静态实例分配给变量以创建单例：

```
public static ActivityA instance = null;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    instance = this;
}

@Override
public void finish() {
    super.finish();
    instance = null;
} 
```

然后在 C 中：

```
public void onCreate(Bundle savedInstanceState) {
    if(ActivityA.instance != null) {
        try {  
            ActivityA.instance.finish(); 
        } catch (Exception e) {}
    }
} 
```

（对 B 和 A 重复上述代码）

我会说这并不优雅，并且必然会引入奇怪的生命周期错误。

如果您可以调整您的要求会更好 - 如果您不能，您也许可以使用单个 Activity 并将 A、B 和 C 更改为`Fragments`?

我会建议广播，但据我了解，您不能在“非恢复”活动中使用实例级广播接收器。

使用 a`Service`绑定到活动似乎有点矫枉过正 - 但如果上述方法不起作用，您可能需要考虑这一点。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-16T07:21:35.540

```
((Activity)context_of_another_activity).finish(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-27T22:46:33.277

我意识到这是一个很晚的回应，但我觉得这`BroadcastReceiver`是解决这个问题的最佳方法。

在活动 A 中添加这个

```
 //class object
    BroadcastReceiver receiver;

    //add this to onCreate()
    receiver =new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            finish();
        }
    };
    IntentFilter filter =new IntentFilter();
    filter.addAction("FINISH_A");
    registerReceiver(receiver, filter);

   //add this to Activity A as well
    protected void onDestroy() {
        super.onDestroy();
        unregisterReceiver(receiver);
    } 
```

然后，在活动 C onCreate() 中（或者当你想完成活动 A 时）

```
Intent local =new Intent();
    local.setAction("FINISH_A");
    sendBroadcast(local); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T16:01:24.333

当你从 B 开始 C 时，这样做：

```
Intent intent = new Intent(this, A.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

现在，C 开始了，但是 A 和 B 已经消失了。

但是，我认为最好重新考虑您的设计，使 C 不依赖于 A 是否完成。

# puppet - 在自定义类型中使用 Puppet 用户资源

> ID：15792016
> 
> 赞同：0
> 
> 时间：2013-04-03T15:49:01.347
> 
> 标签：puppet

我正在编写 Puppet 自定义类型。这种类型所做的一件事是创建和删除用户。我可以做到这一点的一种方法是使用`useradd`and`userdel`命令。但是有没有办法使用 Puppet 中已经存在的用户资源类型来做到这一点？这似乎是一种更便携的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:54:24.210

你在寻找这样的东西吗？

```
#Defined inside a module name 'testmodule'
#/etc/puppet/modules/testmodule/manifests/userdefine.pp

class testmodule::userdefine ($ensure, $group, $home, $shell) {
  user { $name :
    ensure => $ensure,
    group => $group,
    home => $home,
    shell => $shell,
  }
}

testmodule::userdefine { 'puppet' :
  ensure => present,
  group => "puppet",
  home => "/var/lib/puppet",
  shell => "/sbin/nologin",
} 
```

# python - 如何访问 DataFrame pandas 中的时间戳？

> ID：15792018
> 
> 赞同：3
> 
> 时间：2013-04-03T15:49:11.240
> 
> 标签：python, pandas

使用从雅虎下载股票的数据后，`get_data_yahoo`我想访问每一行的时间......我该怎么做？

我想出的一种方法是：

```
it = stock.iterrows()
st0 = it.next()
resultIWant = st0[0].value # this gives what I want (almost)
print resultIWant 
```

编辑：

所以基本上我想要一些类似的东西，`stock['Open']`但对于时间来说，smth like`stock['Time']`会是理想的..

有人要求输出`.head`

```
 Open  High   Low  Close  Volume  Adj Close
Date                                                  
2012-04-03  2.06  2.09  2.01   2.08  463200       2.08
2012-04-04  2.04  2.05  2.01   2.02  335600       2.02 
```

函数的预期输出：

```
print find_time(stock,2) # function I'm looking for
1333497600000000000      # resulting output 
```

预期的输出是数组中每个日期的最后一个纪元的时间或获取每个条目时间的其他方式。我给出的示例代码给了我想要的结果，但是如果我想访问第 4 个元素，唯一的方法就是访问`.next`迭代器 4 次，这似乎是一个不好的方法。

第一个问题：有没有更明显的方法，我正在做的似乎不是最好的方法。

第二个问题：结果是什么单位？我认为这是纳秒，但不确定......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:05:27.073

时间戳有一个`time`方法：

```
In [1]: t = pd.Timestamp('200101011300')

In [2]: t
Out[2]: <Timestamp: 2001-01-01 13:00:00>

In [3]: t.time()
Out[3]: datetime.time(13, 0) 
```

这`value`是自 1970 年 1 月 1 日午夜以来的**纳秒，即**[unix 时间](http://en.wikipedia.org/wiki/Unix_time)* 10 ** 9：

```
In [4]: t.value
Out[4]: 978354000000000000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-19T13:37:58.070

刚看到问题。但可能对某人来说很有趣。

在这种情况下，您可以执行下一个命令：

```
stock['Time'] = stock.index 
```

然后你会得到新的列，`'Time'`因为你`Date`是索引。要将 DateTime 转换为 Unix Time 更改为：

将 numpy 导入为 np

股票['时间'] = stock.index.astype(np.int64)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T16:51:38.597

[我最后在这里](http://pandas.pydata.org/pandas-docs/stable/pandas.pdf)找到的正确答案

`st.ix[index_val]`您可以使用参考的第 5.2.8 节访问这些行。

ts = st.ix[2].Name

它返回一个时间戳

`ts``st[0]`与问题中的相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:37:29.723

实际上每一行都包含一个包含索引和数据的元组，所以你可以这样做：

```
for index, row in stock.iterrows():
    print index 
```

# php - 在 Yii 中循环使用事务

> ID：15792019
> 
> 赞同：7
> 
> 时间：2013-04-03T15:49:11.300
> 
> 标签：php, yii, transactions, yii1.x

我有一组活动记录，并希望以这种方式通过循环更改其中的某些字段：

```
$error = false;
foreach ($items as $item) {
    $item->is_paid = self::PENDING;
    $error = $error || !$item->save();
}
return $error; 
```

我想要做的是更改`is_paid`所有这些项目的属性。如果 on 失败，则回滚其他。如何使用事务来解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T16:07:46.803

[通过这里](http://www.yiiframework.com/forum/index.php/topic/14082-transaction-on-multiple-ar/page__view__findpost__p__152783)的简要介绍，我能够在 yii 中找到事务管理，如下所示应该适合您：

```
$transaction = Yii::app()->db->beginTransaction();
try {
    foreach ($items as $item) {
        $item->is_paid = self::PENDING;
        $item->save();
    }
    $transaction->commit();
    // actions to do on success (redirect, alert, etc.)
} catch (Exception $e) {
    $transaction->rollBack();
    // other actions to perform on fail (redirect, alert, etc.)
} 
```

# perl - 这些正则表达式之间有什么区别 - perl

> ID：15792027
> 
> 赞同：0
> 
> 时间：2013-04-03T15:49:29.383
> 
> 标签：perl

我在文件 image1.hd 中有一行文本

```
axial rotation:=0.880157 
```

我要号码。使用核心 perl 我这样做

```
open FILE, "<", "$Z_DIR/image1.hd" or die $!;
  while (<FILE>){
    if (/axial rotation:=(\S+)/)
      {
    $axial_rot = $1;
      }
  }
  close FILE; 
```

它返回 =0.880157 的所需输出

我更喜欢一个衬里，因为我会做与其他一些文件类似的事情。早些时候我了解了模块 File::Slurp 并尝试了以下内容，并积极看待断言背后

```
my $axial_rot = read_file("$Z_DIR/image1.hd") =~ /(?<=axial rotation:=)\S+/ 
```

这将返回 1 - 无论正则表达式如何。如何更改后一个正则表达式以实现所需的输出

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:55:09.477

问题是您在标量上下文中使用赋值，这使得匹配返回匹配的数量。通过切换到列表上下文，您可以使用匹配组来返回所需的子字符串：

```
my ($axial_rot) = read_file("$Z_DIR/image1.hd") =~ /axial rotation:=(\S+)/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:24:21.313

除非需要，否则您真的不应该将整个文件读入内存。

```
use strict;
use warnings;
use autodie;

sub find_in_file{
  my($filename,$regex) = @_;
  my @return;

  open my $fh, '<', $filename; # or die handled by autodie

  while( my $line = <$fh> ){
    last if (@return) = $line =~ $regex
  }

  close $fh; # or die handled by autodie

  return $return[0] unless wantarray;
  return @return;
}

my $Z_DIR = '.';
my $axial_rot = find_in_file( "$Z_DIR/image1.hd", qr'\baxial rotation:=(\S+)' ); 
```

# python - 如果我在 python 中使用 for 循环，我需要将用于计数的变量设置为 0 还是 for 循环会设置它？

> ID：15792029
> 
> 赞同：1
> 
> 时间：2013-04-03T15:49:37.690
> 
> 标签：python

很抱歉有一个措辞不好的问题，但我基本上是在问我是否有：

```
for i in range(0,10): 
```

我需要`i = 0`在前一点设置还是 for 循环设置`i = 0`？

我是 python 的新手，主要使用 C 语言，而在 C 语言中，总是有一部分`for`循环设置`i = 0`（或其他）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T15:50:55.167

`for`python 中的循环与`foreach`其他语言中的循环类似。 `range (0, 10)`定义从 0 到 10 的数字列表，不包括 10。然后 for 循环依次设置`i`列表中的每个值。所以你不需要`i`事先定义或初始化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T15:50:29.653

不，您不需要`i`事先设置任何内容。

在 python 中，您不需要预先声明变量。`for`循环只是在循环的每次迭代中从 to 分配下一个值`range()`。`i`

在 C 中，您需要一个`for`循环来生成数组的索引，而在 python 中，您通常只需*直接*循环序列：

```
for element in somelist:
    # do something with element 
```

而不是

```
for i in range(len(somelist)):
    element = somelist[i] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T15:53:10.617

您可以`enumerate()`简单地使用 for count 循环。

```
>>> for i,c in enumerate('abcde') :
...  print i,c
... 
0 a
1 b
2 c
3 d
4 e 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T15:57:17.360

for 的工作方式与您期望的有所不同：它直接在所谓的“迭代器”上“迭代”，而不是在变量上。如果你有一个支持迭代或生成的对象或函数，你可以使用 for 语句。

Range() 实际上是返回一个数字序列，这是 for 语句所采用的。它为每个数字执行其主体。

# c++ - boost::mpl 变换操作元函数参数错误

> ID：15792031
> 
> 赞同：2
> 
> 时间：2013-04-03T15:49:42.987
> 
> 标签：c++, boost, template-meta-programming, boost-mpl

在[Boost MPL 网络文档](http://www.boost.org/doc/libs/1_53_0/libs/mpl/doc/tutorial/implementing.html)中，它谈到了将元函数类作为参数传递给 boost::mpl::transform。在这种情况下，元函数参数应该是在 mpl::ForwardSequence 上执行的某种操作。但是，当使用简单的元函数类将 mpl::transform 应用于 mpl::map 时，我遇到了模板错误。（由于这些错误非常广泛，我只包括了我认为是相关的部分。如果需要，我非常乐意发布更广泛的错误报告。）

错误：

```
/usr/include/boost/mpl/aux_/preprocessed/gcc/bind.hpp:207:21: error: no type named     ‘type’ in ‘struct boost::mpl::apply_wrap2<boost::mpl::push_front<mpl_::na, mpl_::na>, boost::mpl::map0<>, boost::mpl::pair<unsigned int, INT32U> >’
test_boost_mpl.cpp:106:1: error: ‘from_native_tmap’ was not declared in this scope 
```

在我的特殊情况下，我的代码如下所示：

```
/* stl includes */
#include <cstdint>

/* boost includes */
#include <boost/type_traits.hpp>
#include <boost/type_traits/is_same.hpp>

#include <boost/mpl/at.hpp>
#include <boost/mpl/map.hpp>
#include <boost/mpl/empty.hpp>

#include <boost/mpl/assert.hpp>
#include <boost/mpl/transform.hpp>

struct Boolean {
  enum { tag_value = 0x83 };
};

struct INT32U {
  enum { tag_value = 0x84 };
};

typedef mpl::map
< 
  mpl::pair<Boolean, bool>,
  mpl::pair<INT32U, std::uint32_t>
> to_native_tmap;

struct swap_f {
  template<typename PAIR>
  struct apply {
    typedef typename mpl::pair<typename PAIR::second, typename PAIR::first> type;
  };
};

typedef mpl::transform<to_native_tmap, swap_f>::type from_native_tmap;

BOOST_MPL_ASSERT(( is_same
                   <mpl::at<from_native_tmap, bool>::type, Boolean> ));
BOOST_MPL_ASSERT(( is_same
                   <mpl::at<from_native_tmap, std::uint32_t>::type, INT32U> ));

int main(void) { return 0; } 
```

我的意图是映射到本地 c++ 类型，`to_native_tmap`然后在`from_native_tmap`.

`BOOST_MPL_ASSERT()`如果我尝试实例化`to_native_tmap`mpl::map 类型，此代码将失败。

非常感谢你！' 任何愿意提供帮助的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:41:03.837

```
/* stl includes */
#include <cstdint>

/* boost includes */
#include <boost/type_traits.hpp>
#include <boost/type_traits/is_same.hpp>

#include <boost/mpl/at.hpp>
#include <boost/mpl/map.hpp>
#include <boost/mpl/empty.hpp>

#include <boost/mpl/assert.hpp>
#include <boost/mpl/transform.hpp>

#include <boost/mpl/inserter.hpp> //ADDED
#include <boost/mpl/insert.hpp> //ADDED

namespace mpl= boost::mpl; //ADDED
using boost::is_same; //ADDED

struct Boolean {
  enum { tag_value = 0x83 };
};

struct INT32U {
  enum { tag_value = 0x84 };
};

typedef mpl::map
< 
  mpl::pair<Boolean, bool>,
  mpl::pair<INT32U, std::uint32_t>
> to_native_tmap;

struct swap_f {
  template<typename PAIR>
  struct apply {
    typedef typename mpl::pair<typename PAIR::second, typename PAIR::first> type;
  };
};

//The default inserter used by mpl::transform requires that the container have a push_front algorithm
//This isn't the case for mpl::map (as the assertion in g++4.8.0 reveals: REQUESTED_PUSH_FRONT_SPECIALIZATION_FOR_SEQUENCE_DOES_NOT_EXIST)
//In this case you need to add a custom inserter
typedef mpl::inserter<mpl::map0<>, mpl::insert<mpl::_1,mpl::_2> > map_inserter; //ADDED
typedef mpl::transform<to_native_tmap, swap_f, map_inserter >::type from_native_tmap; //CHANGED

BOOST_MPL_ASSERT(( is_same
                   <mpl::at<from_native_tmap, bool>::type, Boolean> ));
BOOST_MPL_ASSERT(( is_same
                   <mpl::at<from_native_tmap, std::uint32_t>::type, INT32U> ));

int main(void) { return 0; } 
```

# php - 我无法将新文本附加到 mysql 中的现有文本

> ID：15792032
> 
> 赞同：0
> 
> 时间：2013-04-03T15:49:47.680
> 
> 标签：php, mysql

```
mysql> update articlestat set usr_id="someone@gmail.com" where articleid=11;
Query OK, 1 row affected (0.05 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> update articlestat set usr_id=usr_id+ ",some2@gmail.com" where artic
leid=11;
Query OK, 1 row affected, 1 warning (0.04 sec)
Rows matched: 1  Changed: 1  Warnings: 1

Warning (Code 1292): Truncated incorrect DOUBLE value: ',praveen2dj@gmail.com' 
```

帮助我被困在这里，我需要的只是一种将两个邮件ID附加到同一字段中的方法。

```
Field Type
usr_id varchar(1024) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:53:18.303

MySQL 使用该`concat()`函数进行连接。`+`纯粹是算术加法。

```
UPDATE articlestat 
SET usr_id = CONCAT(usr_id, ",some@gmail.com"); 
```

总体而言，您真的想通过在单个字段中存储看似 CSV 数据的内容来颠覆关系数据的目的吗？在几乎所有标准用例中，这都是非常糟糕的表格设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:56:14.337

在我的服务器上：

```
UPDATE test SET uname= CONCAT(uname, ",some@gmail.com") 
```

所以您的查询将是：

```
UPDATE articlestat 
SET usr_id = CONCAT(usr_id, ",some@gmail.com"); 
```

对加号的引用用于数学查询。

```
update Test SET ID=`ID`+2; 
```

例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:56:56.290

如果要在 mysql 中连接字符串，请使用[concat()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)函数...

```
update articlestat set usr_id=CONCAT(usr_id, ",some@gmail.com")
where articleid=11; 
```

# filesystems - 使用文件系统的 SL 5 异常

> ID：15792036
> 
> 赞同：0
> 
> 时间：2013-04-03T15:50:02.100
> 
> 标签：filesystems, silverlight-5.0, out-of-browser

在 OOB 应用程序上工作。

```
dynamic fileSystem = AutomationFactory.CreateObject("Scripting.FileSystemObject");
dynamic drives = fileSystem.Drives;

foreach (var drive in drives)
{
DriveCollection.Add(new Drive{
                    VolumeName = drive.VolumeName,
                    DriveLetter = drive.DriveLetter,
                    TotalSpace = drive.TotalSize,
                    FreeSpace = drive.FreeSpace
                    });
listBox.Items.Add(string.Format("{0}  {1}", drive.DriveLetter, drive.VolumeName));
} 
```

在调试器中运行时，会枚举“C”驱动器，然后引发异常：

“来自 HRESULT 的异常：0x800A0047”
当我从桌面运行应用程序时，在引发异常之前没有枚举任何驱动器。

有关如何防止此异常的任何提示？在 Drive 构造函数中引用它之前以某种方式检查“驱动器”对象的有效性？

# sql - SQL 列中的循环值

> ID：15792039
> 
> 赞同：0
> 
> 时间：2013-04-03T15:50:09.637
> 
> 标签：sql, tsql, asp.net-mvc-4

我有一个后端有 SQL 的 ASP.Net 页面。我需要能够向用户呈现一个自动生成的值，比如 200，然后将该值自动递增 1，但是在它达到某个值比如 300 之后，我需要将该值循环回 200。什么是解决这个问题的最好方法是什么？我正在考虑使用一个存储过程来查看当前值，然后根据它是更新还是循环。这是解决这个问题的最好方法吗？如果是这样，那么如何将存储过程与 ASP.Net MVC4 网页链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:22:11.463

这是一些示例代码，可帮助您入门

```
-- prevent "row(s) affected" messages in message pane
set nocount on

create table dbo.LoopGenerator (
    id bigint identity(0,1),
    date_generated datetime default getdate()
)

-- example use within a loop demonstrating the looping behavior requested

declare @i int = 0, @value int

while @i < 101
begin
    insert dbo.LoopGenerator default values
    -- scope_identity(): the generated id
    -- 100: the difference between the min value and max value
    -- 200: the min value
    set @value = scope_identity() % 100 + 200
    -- print the looping value; you can see this in your Messages pane after running it
    print @value
    set @i += 1
end

-- Show the resulting data stored in the table
select *
from dbo.LoopGenerator

drop table dbo.LoopGenerator 
```

# vbscript - HTA (VBScript) - Shell.Run 使用变量

> ID：15792047
> 
> 赞同：0
> 
> 时间：2013-04-03T15:50:53.313
> 
> 标签：vbscript, hta

我正在尝试创建一个将文件复制到另一个系统的小程序。系统名称是先前选择的（是一个变量 = “testsystem”）。我有这个子和功能：

```
Sub tst
    Dim copythis
    copythis = "xcopy.exe /Y c:\temp\version.bat " & testsystem & "\temp"
    Set objShell = CreateObject("Wscript.Shell")
    Msgbox AddQuotes(copythis)
    objShell.Run AddQuotes(copythis)
End Sub

Function AddQuotes(strInput)
    AddQuotes = Chr(34) & strInput & Chr(34)
End Function 
```

messageBox 准确地显示了我需要的字符串：完整的命令。另外，如果我手动执行命令，它可以工作：

```
C:\temp>xcopy /Y c:\temp\version.bat \\testsystem3\temp
C:\temp\version.bat
1 File(s) copied 
```

我已经为此奋斗了2天。我想我在某处遗漏了一些引号，但无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:51:42.793

您不会缺少引号，而是需要很多引号。您的函数在执行之前在命令周围放置了额外的双引号。这会导致整个命令字符串被解释为单个文件名（其中包含空格）。当您像这样运行命令时，您将获得完全相同的结果`cmd`：

```
C:\temp>"xcopy /Y c:\temp\version.bat \\testsystem3\temp"
The filename, directory name, or volume label syntax is incorrect. 
```

只需更改此行

```
objShell.Run AddQuotes(copythis) 
```

进入这个

```
objShell.Run copythis 
```

问题应该消失了。

如果要添加双引号，请像这样添加它们：

```
copythis = "xcopy.exe /Y " & AddQuotes("c:\temp\version.bat") & " " _
  & AddQuotes(testsystem & "\temp") 
```

# php - 无法重新声明函数（即使在 die(); 之后）

> ID：15792050
> 
> 赞同：1
> 
> 时间：2013-04-03T15:51:00.483
> 
> 标签：php

这是我的代码：

```
 if (ismobile()) {
        // Include mobile version of this page
        require_once("mobile_signup.php");

        // Die so it will not include desktop version below mobile version
        die();
    }
    function this_is_a_function() {
        // Some code here
    }

   // Desktop version of code here 
```

mobile_signup.php 中还声明了名为“this_is_a_function()”的函数。我怎样才能正确地做到这一点？我意识到有一个“function_exists('this_is_a_function')”，但是这两个代码中都有很多函数，所以对两个页面上的所有函数都这样做是不切实际的。

这个网站是预先建立的，我正试图把它变成一个适合移动设备的网站。因此，重写整个脚本并非易事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:58:22.460

您的问题有点令人困惑，但是我假设您需要不同的功能，具体取决于它们是否在移动设备上。

要做到这一点，如果它们在移动设备上，只需要一个具有移动功能的页面，如果它们不在移动设备上，则需要一个单独的页面，并在主页上保留在移动设备和其他设备上使用的功能。这样它就不会遇到函数被定义两次的任何问题。

如果您因为页面彼此**不**相关而需要此功能，那么只需调用不同的函数是最简单的答案。

再一次，我不确定上述哪一个是您的问题，因为您的问题对于每个页面做了什么、当前页面做了什么等不够详细。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:58:43.557

如果您必须`die()`在页面开头包含您的移动版本文件后立即运行，并且仍然希望它能够正常运行，这意味着您的移动文件可以独立运行；因此重定向是一个更好的选择。

```
header("Location: mobile_signup.php"); 
```

`die()`确实会停止执行，但这并不意味着如果你在某个地方使用它，那么它下面的所有代码都会变得无用，它仍然会被 PHP 解析

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:02:47.267

所有函数在解析过程中都在 php 系统中注册，所以如果你的重复函数在动态和条件包含中，可以确保不会出现重复的函数，那么就可以了，但是如果它们在同一个脚本中或在一个执行过程中，然后它会给出你的错误，记住它的解析时间错误，

记住php先解析脚本然后执行，所以先声明函数，然后执行脚本`die()`，解析后执行，

在类似wordpress的环境中，函数在全局命名空间中被贴花，使用这种编码风格的最佳实践

```
if (!function_exists('HelloFunc'))
     function HelloFunc(){
         // do
     } 
```

或者在您当前的代码中，我建议您使用这种模式

```
if (ismobile()) {
    // Include mobile version of this page
    require_once("mobile_signup.php");
} else {
    // Include mobile version of this page
    require_once("desktop_signup.php");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:04:53.457

die() 将停止正在运行的脚本。它不会阻止 php 解析器在遇到 die() 的行之后解析代码。当您包含文件时...解析器将在包含代码后将其完全编译，而 die() 与此无关...

您必须检查函数是否已经存在..或使用不同的函数名称

# object - java中RSA加密的替代方案

> ID：15792051
> 
> 赞同：2
> 
> 时间：2013-04-03T15:51:07.277
> 
> 标签：object, encryption, size, key, rsa

密钥大小为 1024 的 RSA 加密系统的大小限制为 117 字节，可用于加密。这是用于加密对象。任何人都可以提出替代解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:46:37.663

使用 AES 等对称算法加密对象，然后使用 RSA 加密用于加密对象的密钥。这将为您提供 RSA/公钥加密的好处，但可以自由加密比 RSA 密钥大小更多的数据。

对于它的价值，这是大多数公钥加密协议使用的那种方案（如 PGP/GPG）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:06:34.057

通常，使用 TripleDES、AES 或 Camellia 等对称密码对批量数据进行加密和身份验证。由于您要确保数据不被篡改，因此请尽可能选择 GCM 或 EAX 等模式，而不是 CBC（与单独的身份验证原语配对）等模式。然后使用公钥/私钥对加密对称密钥。

您可以将大消息分解为较小的消息，然后对较小的消息进行加密。在这种情况下，您在 ECB 模式下操作非对称密码 (RSA)（如果我没记错的话）。应用密码学[手册 (HAC)](http://cacr.uwaterloo.ca/hac/)对这种做法提出警告。

此外，无需过多详细说明，请尝试匹配安全级别。因此，如果您使用的是 AES-128，请使用 3072 位的 RSA 模数。作为对立面，许多人认为没有必要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:54:08.993

你遇到了这个限制，因为 1024 是位数。将它除以 8 得到 128。然后从中减去 11，因为使用了 PKCS#1 填充，你得到你的数字 - 117。

无论如何，正如其他人所指出的那样，通常所做的是加密随机生成的对称密钥，然后使用它来加密/解密内容。

# c# - 如何禁用虚拟键盘？

> ID：15792056
> 
> 赞同：1
> 
> 时间：2013-04-03T15:51:22.093
> 
> 标签：c#, visual-studio, windows-ce, smart-device

我正在为 Honeywell Dolphin 6100 开发一个应用程序，这是一款带有条形码扫描仪的移动计算机，它使用类似 Windows CE 5.0 的操作系统。

我在我的应用程序中工作。一个“openFileDialog”组件，但问题是当文件名的字段聚焦时显示虚拟键盘，应该如何禁用它或使其不可见？

对此有什么帮助吗？

**注意**：我正在使用 VS2008 (C#)，并且正在使用 Windows 7。

我尝试使用下面的代码修改注册表，但没有成功：

```
 RegistryKey rkey = Registry.CurrentUser;
        RegistryKey wtaKey = rkey.OpenSubKey(@"ControlPanel\Sip", true);
        try
        {
            wtaKey.SetValue("AllowChange", "dword:0");
        }
        catch (UnauthorizedAccessException ex)
        {
            MessageBox.Show(ex.Message);
            return;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:22:47.460

使用[`InputPanel`](http://msdn.microsoft.com/en-us/library/microsoft.windowsce.forms.inputpanel%28v=vs.90%29.aspx)该类并将其`Enabled`属性设置为`false`;

**编辑 1**

要在系统范围内禁用它，请设置以下注册表项（之后需要软重置）：

```
[HKEY_CURRENT_USER\ControlPanel\Sip]
    AllowChange=dword:0 
```

**编辑 2**

该值是一个 DWORD（C# 中的整数）并且该值为零，因此如下所示：

```
using (var key = Registry.CurrentUser.CreateSubKey("ControlPanel\\Sip"))
{
    key.SetValue("AllowChange", 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-09T11:50:53.973

这对我有用：

```
 try
        {
            RegistryKey myKey = Registry.CurrentUser.OpenSubKey("ControlPanel\\SIP", true);
            if (myKey != null)
            {
                myKey.SetValue("TurnOffAutoDeploy", 1, RegistryValueKind.DWord);
                myKey.Close();
            }
        }
        catch { } 
```

# hadoop - 更高级的 Hadoop 示例

> ID：15792058
> 
> 赞同：0
> 
> 时间：2013-04-03T15:51:30.807
> 
> 标签：hadoop

我正在学习 Hadoop 和 Apache Crunch，我能找到的大多数示例都是字数统计！

寻找更复杂的东西，我们如何写入本地数据库？假设我有一个字数统计示例，但我不想将其写入另一个文件，而是想学习如何将其写入数据库，例如 MySQL 数据库。

你有没有在任何地方看到过这样的例子，我可以看看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:33:22.927

访问[http://university.cloudera.com/](http://university.cloudera.com/)，他们有很好的学习材料和各种例子。

一个和你有类似问题的人在[这里](http://code.google.com/p/hadoop-map-reduce-examples/)开始了一个项目。您可以在那里查找[Anagram 示例](http://code.google.com/p/hadoop-map-reduce-examples/wiki/Anagram_Example)和[Geo Location 示例](http://code.google.com/p/hadoop-map-reduce-examples/wiki/Wikipedia_GeoLocation)。（我不知道他们的示例详细程度如何。）

至于从 hadoop 访问数据库，请阅读[此处](http://blog.cloudera.com/blog/2009/03/database-access-with-hadoop/)。

此外，如果您可以继续购买这本书：[Manning: Hadoop in Action](http://www.manning.com/lam/)。它也有一些复杂的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T16:39:40.527

你也可以看看这个链接 第一个例子是关于如何编写一个 map reduce 程序来为在线音乐网站做分析。 [http://hadooptutorials.co.in/tutorials/mapreduce/advanced-map-reduce-examples-1.html](http://hadooptutorials.co.in/tutorials/mapreduce/advanced-map-reduce-examples-1.html) 第二个例子讲述了如何使用 Map Reduce 程序进行呼叫数据记录分析。 [http://hadooptutorials.co.in/tutorials/mapreduce/advanced-map-reduce-examples-2.html](http://hadooptutorials.co.in/tutorials/mapreduce/advanced-map-reduce-examples-2.html)

# jquery - 添加几个 jquery-ui 选项卡

> ID：15792067
> 
> 赞同：1
> 
> 时间：2013-04-03T15:51:50.543
> 
> 标签：jquery, jquery-ui-tabs

我无法添加几个 jquery-ui 选项卡。目前，点击`Field0`某些信息后会消失，`Field3`反之亦然。

我想单击`Field0`或`Field1`仅对这些字段应用更改。`Field3`并且`Field4`不响应任何事件。我使用 document.on 作为代码的一部分是动态下载的。

我的代码：http: [//jsfiddle.net/scopex/muXCu](http://jsfiddle.net/scopex/muXCu)

```
$(document).ready(function() {
    $(document).on("click", "ul.tabs a", function() {

        $("ul.tabs li").removeClass('active');
        $(this).parent().addClass('active');
        var classname = $(this).attr("class");
        $(".pane div").hide();
        $($(this).attr("href")).show();
        return false;
    });
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:05:24.727

您需要进行更改`$(".pane div").hide()`，以便仅隐藏与选项卡关联的窗格的兄弟姐妹。

你可以试试这个：

```
$(document).on("click", "ul.tabs a", function () {
    var $link = $(this),
        $pane = $($link.attr("href"));
    $link.removeClass('active').parent().addClass('active');
    $pane.show().siblings().hide();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:14:34.230

这是你想要的？

我用我认为你想要的东西来解决它。让我知道这是否有帮助。

我所做的是向每个 div 容器添加一个 id 属性，将 div 标识为单独的存在。然后我只在点击的 div 上调用了 switch 方法。

[http://jsfiddle.net/YLbAj/](http://jsfiddle.net/YLbAj/)

```
<div class="tabs" id="one">
<ul class="tabs">
<li><a href="#tab0_0">Field0</a></li>
<li><a href="#tab0_1">Field1</a></li>
</ul>
</div>
<div class="pane" id="onePane">
    <div id="tab0_0">Field 0</div>
    <div id="tab0_1">Field 1</div>
</div>

<br />

<div class="tabs" id="two">
    <ul class="tabs">
        <li><a href="#tab0_2">Field2</a></li>
        <li><a href="#tab0_3">Field3</a></li>
    </ul>
</div>
<div class="pane" id="twoPane">
    <div id="tab0_2">Field 2</div>
    <div id="tab0_3">Field 3</div>
</div>

$(document).ready(function() {
    $(document).on("click", "ul.tabs li a", function() {
        var whichPane = $(this).parents().eq(2).attr('id');
        $("ul.tabs li").removeClass('active');
        $(this).parent().addClass('active');
        var classname = $(this).attr("class");
        $("#" + whichPane + "Pane div").hide();
        $($(this).attr("href")).show();
        return false;
    });
    }) 
```

# android - 将“+”放在按钮的中心

> ID：15792068
> 
> 赞同：0
> 
> 时间：2013-04-03T15:51:51.257
> 
> 标签：android, xml, button

这是一个按钮的代码。我想把加号放在中间（垂直和水平）。但是，这是行不通的。

```
<Button
        android:id="@+id/zoomNineteen"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/zoomTwenty"
        android:gravity="center"
        android:textSize="20dip"
        android:textStyle= "bold"
        android:text="+" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:56:39.090

Adding the attribute `android:gravity="center"` will center the text.

The problem you may be having is that most `Button` backgrounds in Android include a certain amount of padding as part of the image - this means it won't *look* centered.

In order for it to *look* centered you're going to need to also include:

```
android:background="@drawable/custom_selector" 
```

pointing to either a custom image or more usefully a selector containing multiple images which don't include extra padding / margins.

# python - openstreet 地图：在 python 中动态检索 shp 文件

> ID：15792073
> 
> 赞同：0
> 
> 时间：2013-04-03T15:52:03.633
> 
> 标签：python, openstreetmap, shapefile, mapnik

我设法为 python 安装了 mapnik，并且能够使用提供的`shp`文件来渲染地图。是否有可能从python动态检索我想渲染的地图的形状文件（给定坐标）？还是我需要下载整个 OSM 文件，并将它们导入我自己的数据库？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T04:55:51.823

对于大型应用程序，不建议从 shapefile 动态检索数据。最佳实践是将 shapefile 转储到 postgres (shp2pgsql) 等数据库中并使用 mapnik 生成地图并使用 tilecache 平铺它们。

# ios - [Not A Type retain]：消息发送到已释放实例，目标 c

> ID：15792074
> 
> 赞同：1
> 
> 时间：2013-04-03T15:52:04.753
> 
> 标签：ios, objective-c, nszombie, retain-cycle

我正在使用渐变自定义视图并通过执行以下操作在其上添加 uilabel：

```
@implementation ECertificateViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    CustomViewBackGround  *bgView       =   [[CustomViewBackGround alloc] initWithFrame:CGRectMake(0, 0, 301, 26)];
    [self.mainView addSubview:bgView];
}

#import "CustomViewBackGround.h"

@implementation CustomViewBackGround
- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        CGFloat height                  =   20.0;
        CGFloat x                       =   5;
        CGFloat y                       =   3;
        titleLabel                      =   [[UILabel alloc] initWithFrame:CGRectMake(x, y, self.bounds.size.width - 2 * x, height)] ;
        titleLabel.text                 =   @"This is my label";
        titleLabel.textAlignment        =   NSTextAlignmentLeft;
        titleLabel.opaque               =   NO;
        titleLabel.backgroundColor      =   [UIColor clearColor];
        titleLabel.font                 =   [UIFont boldSystemFontOfSize:14];
        titleLabel.textColor            =   [UIColor lightGrayColor];
        [self addSubview:titleLabel];
    }
    return self;
}

- (void)drawRect:(CGRect)rect {
    CGContextRef context            =   UIGraphicsGetCurrentContext();

    CGColorRef whiteColor           =   [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0].CGColor;
    CGColorRef lightGrayColor       =   [UIColor colorWithRed:230.0/255.0
                                                        green:230.0/255.0
                                                         blue:230.0/255.0
                                                        alpha:1.0].CGColor;
    CGColorRef separatorColor       =   [UIColor colorWithRed:208.0/255.0 green:208.0/255.0 blue:208.0/255.0 alpha:1.0].CGColor;

    CGRect paperRect                =   self.bounds;

    // Fill with gradient
    drawLinearGradient(context, paperRect, whiteColor, lightGrayColor);

    // Add white 1 px stroke
    CGRect strokeRect           =   paperRect;
    strokeRect.size.height     -=   1;
    strokeRect                  =   rectFor1PxStroke(strokeRect);

    CGContextSetStrokeColorWithColor(context, whiteColor);
    CGContextSetLineWidth(context, 1.0);
    CGContextStrokeRect(context, strokeRect);

    // Add separator
    CGPoint startPoint          =   CGPointMake(paperRect.origin.x, paperRect.origin.y + paperRect.size.height - 1);
    CGPoint endPoint            =   CGPointMake(paperRect.origin.x + paperRect.size.width - 1, paperRect.origin.y + paperRect.size.height - 1);
    draw1PxStroke(context, startPoint, endPoint, separatorColor);            
} 
```

当我在模拟器中运行时，一切都按我的预期运行。但是，当我在设备上安装时，应用程序崩溃并且我得到

```
[Not A Type retain]: message sent to deallocated instance,objctive c 
```

你有什么想法为什么我会遇到这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:41:33.150

试试这个：

```
UIColor *whiteColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
...
drawLinearGradient(context, paperRect.CGColor, whiteColor.CGColor, lightGrayColor.CGColor); 
```

或这个：

```
CFColorRef whiteColor = CFBridgingRetain([UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0].CGColor);
...
drawLinearGradient(context, paperRect, whiteColor, lightGrayColor);
...
CFRelease(whiteColor);
... 
```

ARC 可能会在`UIColor`您不使用它们时立即释放它们，并且通过释放它们，它们的`CGColor`属性也会被释放，因为没有人保留它们。

# android - 在另一个活动中使用数据库 openhelper

> ID：15792075
> 
> 赞同：0
> 
> 时间：2013-04-03T15:52:04.687
> 
> 标签：android, sqliteopenhelper

在 openhelper 我有 createQuestionDb()。我如何在另一个班级（首选项）中使用此活动？

```
public class OpenHelper extends SQLiteOpenHelper {
 public OpenHelper(Context context, final boolean questionDb) {
        super(context, dbName, null, 1);
}
         public void onCreate(SQLiteDatabase db) {

         db.execSQL("CREATE TABLE ... " );
         createQuestionDb(db,myvalue);

        }

     public void createQuestionDb(SQLiteDatabase db, String myvalue ) {
     ContentValues _Values = new ContentValues();
    _Values.put("Text", myvalue);  
    db.insert("table", null, _Values);   

    }
} 
```

将使用 openhelper 的类：

```
public class Preferences extends Activity {

public void insertdata () {
createQuestionDb();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:09:30.753

很难说你在做什么，但看起来你正在扩展 SQLiteOpenHelper 所以尝试一种稍微不同的方法：

```
public void createQuestionDb(String myvalue) {
    SQLiteDatabase db = getWritableDatabase();
    ContentValues _Values = new ContentValues();
    _Values.put("Text", myvalue);  
    db.insert("table", null, _Values);
    db.close();
} 
```

现在您可以调用`createQuestionDb(string)`任何您想要的课程。

* * *

为了防止递归调用，将第一个插入手动添加到`onCreate()`：

```
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE ... " );
    ContentValues _Values = new ContentValues();
    _Values.put("Text", myvalue);  
    db.insert("table", null, _Values);   
} 
```

# machine-learning - 如何输出特征向量机器学习分类算法

> ID：15792076
> 
> 赞同：2
> 
> 时间：2013-04-03T15:52:05.413
> 
> 标签：machine-learning, classification

在传统的机器学习分类问题中，分类器接受输入特征向量并将其分类为预定类别之一。

在我的场景中，我需要一个输入特征向量

```
Fin = (fi1, fi2, fi3.... fin) 
```

并学习输出另一个特征向量，例如

```
Fout = (fo1, fo2, fo3,....fon) 
```

如何使用 ANN、决策树或 svm 等通用分类器来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:00:05.803

如果你想使用“通用分类器”，你唯一的选择是单独预测每个向量元素，即学习一个模型来预测第一个特征，预测它，重复 n 次。

[使用统计关系学习](http://en.wikipedia.org/wiki/Statistical_relational_learning)技术也可以预测诸如特征向量之类的结构化输出。这是一个比传统机器学习更不成熟的领域，也更难理解和使用。此外，可用的工具要少得多。

# c# - Dynamics nav 2009 RE：SoapException：标准项目代码“foo”不存在

> ID：15792078
> 
> 赞同：2
> 
> 时间：2013-04-03T15:52:08.080
> 
> 标签：c#, web-services, visual-studio, dynamics-nav, soapexception

我正在尝试创建采购发票：

```
PurchseInvoice_Service pis = new PurchseInvoice_Service();
PurchseInvoice pi = new PurchseInvoice();
pis.Create(ref pi);
pi.Buy_from_Vendor_No = "40000";
pi.Currency_Code = "EUR";
pi.Location_Code = "GREEN";
pis.Update(ref pi);
pi.PurchLines = new Purch_Invoice_Line[1];

pi.PurchLines[0] = new Purch_Invoice_Line();
pi.PurchLines[0].Type = PurchaseInvoice.Type.Item;
pi.PurchLines[0].No = "LS-150";
pi.PurchLines[0].Quantity = 1;
pi.PurchLines[0].Unit_of_Measure_Code = "PCS";
pi.PurchLines[0].Line_Amount = 1;

pis.Update(ref pi); 
```

我得到`SoapException`了最后一行的消息：

> 标准文本代码“LS-150”不存在。

我很困惑，这个项目代码用于采购订单，我可以在项目列表中看到它。那么为什么我不能在这里使用它呢？我认为这应该有效。`PostOrder`我什至可以从“ ”对象访问此文本 ID ：

```
Console.WriteLine( po.PurchLines[1].No );

Output is : LS-150 
```

我`Dynamics NAV 2009 R2`与`DEMO`“”公司的申请一起使用`CRONUS International Ltd.`-也许这是我的问题？

顺便提一句。这个恒定的 SQL Server 超时是怎么回事？为什么我可以创建`PurchaseInvoice`由于不存在而无法删除并且由于格式错误而无法更新的内容，但我可以很好地阅读它们？Web 服务不应该是“访问应用程序的安全方式”吗？

**解决方案：**

解决方案是添加一个更新行：

```
....           
pi.PurchLines[0] = new Purch_Invoice_Line();
pis.Update(ref pi);
pi.PurchLines[0].Type = PurchaseInvoice.Type.Item;
.... 
```

感谢@uncommonsense。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:26:50.803

确保也将采购行的类型字段设置为选项值“项目”。默认选项值“”（空白）表示购买行是文本行，在这种情况下为“否”。字段可用于查找标准文本（从 NAV 的角度来看，这是您上面的代码正在执行的操作，因此会出现错误消息）。

# c# - 在后面的代码中输入类型文本声明，c#

> ID：15792079
> 
> 赞同：-6
> 
> 时间：2013-04-03T15:52:11.680
> 
> 标签：c#, asp.net, html, input, textbox

所以，这是一个文本框：System.Web.UI.WebControls.TextBox

输入类型 = 文本的等效项是什么（它必须是带有 runat = 服务器的 html 输入，我不能使用 asp:textbox）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T14:06:41.330

输入类型 = 文本被引用为 HTMLControl：

```
using System.Web.UI.HtmlControls; 
```

您可以使用以下语法引用控件：

```
string str10 = ((HtmlInputText)e.Item.FindControl("txtYourTextBoxName")).Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:56:50.260

ASP.NET TextBox 控件是元素的 .NET 托管代码等效项`<input type=text />`，并且完全按照该元素呈现（除非明确指定呈现为密码或 textarea 字段）。

当然，您可以简单地输出这样的原始元素类型并`runat="server"`对其进行处理，然后在代码隐藏中引用它：

```
<input type="text" id="primitive" runat="server" /> 
```

但它在后端被引用为通用 HTML 控件，因此您需要操作属性，而不是“正确”类型的便利`Value`属性，例如.`Text``TextBox`

我知道你可能有限制，但你所做的断言是无稽之谈 - 如果你能澄清，那么也许我们也可以。

# intuit-partner-platform - 更新 docs.developer.intuit.com 上的开源 Ruby devkit 选项

> ID：15792080
> 
> 赞同：3
> 
> 时间：2013-04-03T15:52:21.520
> 
> 标签：intuit-partner-platform

此页面上 Ruby DevKit 的链接：http://docs.developer.intuit.com/0025_Intuit_Anywhere/0200_DevKits/0350_Open_Source_DevKits [已](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0200_DevKits/0350_Open_Source_DevKits)损坏。我们可以更新链接以指向[Quickeebooks gem](http://rubygems.org/gems/quickeebooks)吗？

gem 当前支持 QBO 和 QBD API V2 并支持 QBO 和 QBD 中的大部分功能。gem 非常活跃，并且不断推出新版本，您会注意到最新版本是几天前发布的。作者 ( [Cody Caughlan](https://github.com/ruckus) ) 和它的贡献者正在密切关注 V3，并将努力提供一个平滑的升级路径，因为更多的细节是可用的。

# vb.net - Windows 窗体用户控件在其属性更新时不更新

> ID：15792084
> 
> 赞同：1
> 
> 时间：2013-04-03T15:52:26.603
> 
> 标签：vb.net, properties, user-controls, form-load

我在 Visual Basic 窗体应用程序中创建了一个用户控件。它有一个名为 ID 的属性

```
Private intID As Integer

Public Property ID() As Integer
    Get
        Return intID
    End Get
    Set(value As Integer)
        intID = value
    End Set
End Property 
```

在用户控件的加载方法中，我根据 ID 刷新用户控件中的组件。

```
Private Sub UserControl_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    UpdateUserControlFields() ' This Method uses ID within
End Sub 
```

现在，每当我在添加此用户控件的表单中执行某些操作时，我希望此控件显示为正确的 ID。For example I have a DataGridView and whenever selection changes I want to update the user control:

```
Private Sub MyDataGridView_SelectionChanged(sender As Object, e As EventArgs) Handles MyDataGridView.SelectionChanged
    If Not IsNothing(MyBindingSource.Current) Then
        UserControlONE.ID = MyBindingSource.Current("someID")
        UserControlONE.Refresh() ' Doesn't Work.
        UserControlONE.Update() ' Doesn't Work.
    End If
End Sub 
```

问题是用户控件仅在第一次使用所选 ID 时正确加载，我似乎无法重新加载它的数据。这意味着如果属性 ID 的值发生更改，我不知道如何强制重新加载用户控件。它显示与加载的第一个 ID 相同的数据。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:07:27.990

不要在控件加载事件中更新 ID，而是在属性更改时更新它：

```
Private intID As Integer

Public Property ID() As Integer
    Get
        Return intID
    End Get
    Set(value As Integer)
        intID = value
        UpdateUserControlFields() ' This Method uses ID within
    End Set
End Property 
```

[UserControl_Load 事件](http://msdn.microsoft.com/en-GB/library/system.windows.forms.usercontrol.load.aspx) “在控件***第一次****可见之前发生。”*

# neo4jclient - 我可以返回一个 IEnumerable 而不是 IEnumerable > 在 Neo4J .net 客户端中使用 CollectAs

> ID：15792085
> 
> 赞同：0
> 
> 时间：2013-04-03T15:52:27.457
> 
> 标签：neo4jclient

我可以让 CollectAs 函数返回`IEnumerable<T>`而不是返回`IEnumerable<Node<T>>`吗？我想将我的 POCO 类中的 Neo4j.Node 等数据库特定类排除在外。我必须使用命名类，因为与客户端一起使用，因为替代关系是可选的，并且使用泛型类会给我没有结果。另一种选择是创建一个像 AppDetailWithNodes 这样的中间类，然后将其转换为 POCO 类，但为此添加一个额外的类似乎有点麻烦。

```
var query = client.Cypher.StartWithNodeIndexLookup("root", AUTOINDEX, PrimaryIndexKey, appSlug)
 .Match("root <-[?:Alternative]-Alternatives") 
 .Return((root, Alternatives) => new AppDetail()
   {
     App = root.As<App>(),
     Alternatives = Alternatives.CollectAs<App>()
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:17:02.027

`Node<T>`无论我们是否想要，Cypher 总是在表格中给出我们`T`。

我们在 Neo4jClient 中有一些智能允许您使用`Return<T>`而不是`Return<Node<T>>`，然后我们会为您丢弃这些信息。不过，我们仍在通过网络将其退回。

这些智能尚未针对`CollectAs`.

现在，您只需将其投影到 .NET 中即可：

```
var query = client
    .Cypher
    .StartWithNodeIndexLookup("root", AUTOINDEX, PrimaryIndexKey, appSlug)
    .Match("root <-[?:Alternative]-alternative")
    .Return((root, alternative) => new
    {
        App = root.As<App>(),
        Alternatives = alternative.CollectAs<App>()
    })
    .Results
    .Select(result => new AppDetail()
    {
        App = result.App,
        Alternatives = result.Alternatives.Select(a => a.Data).ToArray()
    }); 
```

为调用使用匿名类型`Return`将使您不必创建`AppDetailWithNodes`中间类。

# arrays - 视频再现循环数组

> ID：15792088
> 
> 赞同：0
> 
> 时间：2013-04-03T15:52:31.637
> 
> 标签：arrays, video, brightcove

我正在尝试在 Brightcove 中循环播放我的视频的演绎数组，并且无论我尝试什么都失败了。

```
document.getElementById('divMeta.render').innerHTML = v.renditions; 
```

这段代码的结果是：

[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象]

显示有 6 个单独的演绎版。

```
videos: Array[20] 
0: Object
    FLVFullLength: Object
    FLVURL: "http://brightcove.vo.llnwd.net/pd16/media/1978114949001/1978114949001_2223781677001_Lindy-Fish---Game-Cleaning-Station-Features---Benefits.mp4?pub    
    Id=1978114949001&videoId=2223734749001"
    creationDate: "1363191473140"
    customFields: Object
    economics: "AD_SUPPORTED"
    id: 2223734749001
    lastModifiedDate: "1363200126320"
    length: 45094
    linkText: null
    linkURL: null
    longDescription: null
    name: "Lindy Fish & Game Cleaning Station Features & Benefits"
    playsTotal: 19
    playsTrailingWeek: 19
    publishedDate: "1363191473140"
    referenceId: null
   renditions: Array[6]
       0: Object
       1: Object
          audioOnly: false
         controllerType: "DEFAULT"
         displayName: "Lindy Fish & Game Cleaning Station Features & Benefits.mov"
         encodingRate: 1616956
         frameHeight: 700
         frameWidth: 1248
         id: 2223780276001
         referenceId: null
         remoteStreamName: null
         remoteUrl: null
         size: 9153763
         uploadTimestampMillis: 1363191560801
         url: "http://brightcove.vo.llnwd.net/pd16/media/1978114949001/1978114949001_2223780276001_Lindy-Fish---Game-Cleaning-Station-Features---Benefits.mp4?pub    
         Id=1978114949001&videoId=2223734749001"
         videoCodec: "H264"
         videoContainer: "MP4"
        videoDuration: 45094
        __proto__: Object
    2: Object
    3: Object
    4: Object
    5: Object
    length: 6 
```

正如您在从上面的控制台日志中复制的文本中看到的那样，在再现中有 6 个不同的，我想调用 frameWidth = 1248 的 url。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:12:51.440

您可以循环遍历数组：

```
var url;
for (var i = 0; i < v.renditions.length; i++) {
    if (v.renditions[i].frameWidth == 1248) {
        url = v.renditions[i].url;
        break;
    }
} 
```

# java - Javafx Treeview 项目操作事件

> ID：15792090
> 
> 赞同：5
> 
> 时间：2013-04-03T15:52:39.537
> 
> 标签：java, event-handling, javafx

我正在尝试使用 treeView 创建菜单。这是我第一次使用 treeView 并且一直在几个网站上阅读它。

当涉及到动作事件时，我遇到了一些问题。我想要做的基本上是在用户单击树视图中的节点时触发和事件到目前为止，我有以下内容：

```
 TreeItem<String> rootItem = new TreeItem<String>("Navigation");
    TreeItem<String> statistics = new TreeItem<String>("Statistics");
    TreeItem<String> clan = new TreeItem<String>("Clan page");
    clan.addEventHandler(MouseEvent, new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent event) {
            // TODO Auto-generated method stub

        }
    });

    rootItem.getChildren().add(statistics);
    rootItem.getChildren().add(clan);

    TreeView<String> tree = new TreeView<String>(rootItem); 
```

可悲的是，这似乎不起作用。

有什么方法可以在不更改to 类型的情况下将 a`clicklistener`甚至 an添加`actionlistener`到 my 中的各个项目？`treeView``treeItems``Button`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-11-03T13:00:26.573

这可以通过实现 CellFactory 来解决，但我认为最简单的方法是这样的：

1) 创建并向 TreeView 添加事件处理程序：

```
EventHandler<MouseEvent> mouseEventHandle = (MouseEvent event) -> {
    handleMouseClicked(event);
};

treeView.addEventHandler(MouseEvent.MOUSE_CLICKED, mouseEventHandle); 
```

2）仅处理节点上的点击（而不是 TreeView 的空白空间）：

```
private void handleMouseClicked(MouseEvent event) {
    Node node = event.getPickResult().getIntersectedNode();
    // Accept clicks only on node cells, and not on empty spaces of the TreeView
    if (node instanceof Text || (node instanceof TreeCell && ((TreeCell) node).getText() != null)) {
        String name = (String) ((TreeItem)treeView.getSelectionModel().getSelectedItem()).getValue();
        System.out.println("Node click: " + name);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-05T15:10:26.337

我在鼠标事件中找不到方法 getPickResult，所以也许 next 比 Alex 的回答更可取：

1）将侦听器添加到树视图

```
treeView.getSelectionModel().selectedItemProperty().addListener((observable, oldValue, newValue) -> handle(newValue)); 
```

2) 处理点击，不需要区分对空白和节点的点击

```
private void updateSelectedItem(Object newValue) {      
    System.out.println(newValue);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T19:35:01.577

根据[JavaFX 2.2 文档](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TreeItem.html#addEventHandler%28javafx.event.EventType,%20javafx.event.EventHandler%29)：

> “ ..a TreeItem**不是****Node** ，因此不会在TreeItem 上触发视觉事件，要获取这些事件，有必要将相关观察者添加到 TreeCell 实例（通过自定义单元工厂）。”

我认为这个使用[示例](http://docs.oracle.com/javafx/2/ui_controls/tree-view.htm)`TreeView`会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-15T07:59:46.913

```
treeView.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<TreeItem<String>>() {

                @Override
                public void changed(ObservableValue<? extends TreeItem<String>> observable,
                        TreeItem<String> oldValue, TreeItem<String> newValue) {
                    // newValue represents the selected itemTree
                }

            }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-04T09:03:41.127

我实际上以一种迂回的方式完成了这一点，尽管它非常灵活，甚至允许您拥有与不同类相关的 TreeItems，同时仍然能够将它们嵌套在彼此中。

最初的检查可能会让人望而生畏，但如果你密切关注它，那将是完全合理的。

您从包含 TreeView 的类开始 - 我们将其称为 TreeViewClass。

这个例子来自我正在开发的一个与 GitHub Gists 交互的程序，它解释了我在类中与之交互的各种对象。

```
public class TreeViewClass {

    public void start() {
        TextArea itemInfo = new TextArea();
        SplitPane splitPane = new SplitPane(getTreeView(), itemInfo);
        splitPane.setDividerPosition(0, .1);
        Stage stage = new Stage();
        stage.setScene(new Scene(splitPane));
        stage.show();
    }

    private Collection<TreeItem<MyTreeItem>> gistObjectTreeItems() {
        Collection<TreeItem<MyTreeItem>> gistTreeItemObjects = FXCollections.observableArrayList();
        List<GistObject> gistObjects = GitHubApi.getGistObjectList();

        for (GistObject gistObject : gistObjects) {
            MyTreeItem myGistObjectTreeItem = new MyTreeItem(gistObject);
            TreeItem<MyTreeItem> objectTreeItem = new TreeItem<>(myGistObjectTreeItem);

            List<GistFile> gistFileList = gistObject.getFileList();
            for(GistFile file : gistFileList) {
                TreeItem<MyTreeItem> fileTreeItem = new TreeItem<>(new MyTreeItem(file));
                objectTreeItem.getChildren().add(fileTreeItem);
            }
            gistTreeItemObjects.add(gistObjectTreeItem);
        }
        return gistTreeItemObjects;
    } 
/**
We are returning a Collection of TreeItems, each one contains an instance
of MyTreeItem using the constructor that defines the instance as a GistObject.
We then add to each of those objects, more TreeItems that contain the same
class MyTreeItem, only we use the constructor that sets the instance as
GistFile, and obviously, each Gist can have many GistFiles.
**/

    private TreeView<MyTreeItem> getTreeView() {
        TreeView<MyTreeItem> treeView = new TreeObject(this);
        TreeItem<MyTreeItem> treeRoot = new TreeItem<>(new MyTreeItem());
        treeRoot.getChildren().addAll(gistObjectTreeItems());
        treeView.setRoot(treeRoot);
        treeView.setShowRoot(false);
        return treeView;
    }
/**
getTreeView merely builds the TreeView, then adds to it, the Collection
of MyTreeItems that contain the GistObject and each of those objects
GistFiles. We need a root in the tree, so we add one that also contains
the MyTreeItem class only we use the default constructor, since it is
neither a GistObject or a GistFile, and then we hide it because we
don't need to interact with it. 
**/
} 
```

这是主要的 TreeView 扩展类：

```
import javafx.scene.control.TreeItem;
import javafx.scene.control.TreeView;
import javafx.scene.input.MouseEvent;

public class TreeObject extends TreeView<MyTreeItem> {

    public TreeObject() {
        super();
        addEventHandler(MouseEvent.MOUSE_CLICKED, e->{
            if(e.getClickCount() == 1) {
                selected = getSelectionModel().getSelectedItem();
                if (selected != null) {
                    gistFile = selected.getValue().getFile();
                    gist     = selected.getValue().getGist();
                    if (gistFile != null) {
                        GitHubApi.setSelected(gistFile);
                    }
                    else if (gist != null) {
                        GitHubApi.setSelected(gist);
                    }
                }
            }
        });
    }

    TreeItem<MyTreeItem> selected;
    GistFile             gistFile;
    GistObject           gist;
}

/**
This is the class that gives us the ability to add all manner of events that we might
want to look for. In this case, I am looking for MOUSE_CLICKED events and notice I can
even check to see how many mouse clicks the user enacted on the TreeItems. When the user
clicks on the TreeItem, the selected object returns the MyTreeItem instance that
is assigned to whichever TreeItem they click on, I can then test to see which way 
MyTreeItem has been configured (GistObject or GistFile) and act accordingly.
**/ 
```

最后，我们有 MyTreeItem 类：

```
public class MyTreeItem {

    private enum TYPE {
        GIST, FILE
    }

    public MyTreeItem(GistObject gist) {
        this.gist = gist;
        this.type = TYPE.GIST;
    }

    public MyTreeItem(GistFile file) {
        this.file = file;
        this.type = TYPE.FILE;

    }

    public MyTreeItem(){}

    private TYPE type;
    private GistObject gist;
    private GistFile   file;

    public boolean isGist() { return type == TYPE.GIST; }

    public boolean isFile() { return type == TYPE.FILE; }

    public GistObject getGist() { return gist; }

    public GistFile getFile() { return file; }

    @Override
    public String toString() {
        if(this.type == TYPE.FILE) return StringUtils.truncate(file.toString(),25);
        else if(this.type == TYPE.GIST) return StringUtils.truncate(gist.toString(),25);
        return "";
    }
}
/**
This should be fairly self-explanatory. This is the MyTreeItem class that can be instantiated
as either a GistObject or a GistFile. Note the toString returns different Strings depending
on how the class was instantiated. The toString() will automatically populate the label
on the TreeItem object that the class is assigned to.
**/ 
```

# python - 从 python 调用 jython 代码

> ID：15792093
> 
> 赞同：4
> 
> 时间：2013-04-03T15:52:49.247
> 
> 标签：python, python-3.x, hbase, jython

我在 python 中编写了一些需要写入/读取 HBase 的代码。在我发现它还不是python3之前，我想到了使用HappyBase与HBase进行交互。

我在想的是在 jython 中编写一个小包来与 HBase 交互。其余的业务逻辑将保留在 Cpython 中。

是否可以从 python 调用 jython 代码。我希望我的代码在 CPython 上，除了应该与 HBase 交互的部分

如果您能给我一些关于如何做到这一点的提示/示例，我将不胜感激？我是否需要特定版本的 jython 解释器才能与 python3 混合使用？

**编辑**：有人可以推荐如何使用 python3 访问 HBase 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:15:50.573

根据我的经验，[Pyro4](https://pypi.python.org/pypi/Pyro4)是最简单的 CPython/Jython 互操作包。

# ios - Xcode `Archive` 功能是否自动使用 `Release` 构建配置？

> ID：15792095
> 
> 赞同：62
> 
> 时间：2013-04-03T15:52:55.707
> 
> 标签：ios, xcode, macos

在向 App Store 发布应用程序时，我的标准工作流程是`Product > Archive`从 Xcode 的菜单栏中按下。

我意识到我从不更改`Build Configuration`构建方案中的 Xcode。我`Debug`在开发期间将其设置为，但希望 App Store 上的版本为`Release`.

我希望并假设`Product > Archive`自动使用`Release`构建配置。任何人都可以确认吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-04-03T15:55:37.707

是的。默认情况下，Debug 配置用于在模拟器上运行，而 Release 用于存档。我建议查看您的方案。

> 产品 -> 方案 -> 编辑方案...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-05-08T13:21:58.720

**方案、操作、构建配置**

```
Target -> Schema -> Action -> Build configuration 
```

[[方案]](https://stackoverflow.com/a/59215808/4770877)

**操作**：运行、测试、配置文件、分析、归档

`Build Configuration`[^([关于])](https://stackoverflow.com/a/64266553/4770877)：调试，发布，

要检查/更改`Build Configuration`，您应该编辑/管理架构

![](https://i.stack.imgur.com/TZZjn.png)

# css - 页脚不直接位于内容下方 - 似乎留下很大的空白，或位于内容中间

> ID：15792096
> 
> 赞同：0
> 
> 时间：2013-04-03T15:52:57.160
> 
> 标签：css, html, footer, spacing

我有这个页脚，上面是一个内容 div（位于另一个 div 中以创建一个漂亮的填充边框）。由于某种原因，页脚没有直接排在内容之后，或者如果内容很长，页脚似乎出现在内容的中间。

html:

```
 <div class="content-wrapper clearfix">
  <div id="content">
  {% if template == 'list-collections' %}
    {% include 'collection-listing' %}
  {% else %}
    {{ content_for_layout }}
  {% endif %}

  {% unless template contains "customer" or template contains "cart" %}
    {% include 'col-widgets' %}
  {% endunless %}
  </div>
</div>
</div><!-- /.content -->
<!-- Footer -->
<footer id="bottom"> 
```

CSS：

```
.wrapper{
  width: 810px;
  margin: 0 auto;
  padding: 0 20px;
  text-align: left;
  min-height:100%;
  }
.ie6 .wrapper{ height: 100%; } 

      #content {
      width: 810px;
      background-color:#fff;
      position: absolute;
      height:auto;
      } 

#col-main{
  -moz-box-sizing: border-box;
    margin-top:0px;
  line-height: 2;
    margin: 5px;
  padding: 30px;
  background-color: #FFFFFF;
  float: center;
  position: relative; z-index: 1;
  height: 200px;
  background-color: #FFFFFF;
  border: 1px solid #D5DCE1;
  height:auto;
  } 
```

问题图片：

![http://i.stack.imgur.com/758Dw.jpg](https://i.stack.imgur.com/M7DXe.jpg) ![http://i.stack.imgur.com/M7DXe.jpg](https://i.stack.imgur.com/M7DXe.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:10:02.600

我认为这足以让你以正确的方式前进。最小高度是问题的开始。

```
.wrapper {
    margin: 0 auto;
    /* min-height: 100%; REMOVE THIS */
    overflow: hidden;
    padding: 0 20px;
    text-align: left;
    width: 810px;
}

#content {
    background-color: #FFFFFF;
    height: auto;
    /* position: absolute; REMOVE THIS */
    width: 810px;
}

#col-main {
    -moz-box-sizing: border-box;
    background-color: #FFFFFF;
    border: 1px solid #D5DCE1;
    height: auto;
    line-height: 2;
    margin: 0 5px 5px; /* UPDATE THIS */
    padding: 30px;
    position: relative;
    z-index: 1;
} 
```

# jquery - 使用 1 个函数使用 ID 淡入多个 div

> ID：15792102
> 
> 赞同：0
> 
> 时间：2013-04-03T15:53:22.150
> 
> 标签：jquery

我需要根据用户点击的内容显示/隐藏多个 div。

所以他们点击了一个链接：

```
<a href="#" id="image1">Click me to show</a> 
```

然后使用 jQuery 显示 div：

```
$(document).ready(function(){

    $("#image1").click(function () {
    $("#image1_view").fadeIn();
    return false; 
    e.preventDefault(); 
    });
}); 
```

我需要做的是多次执行此操作，因此页面上有多个链接，单击时会显示正确的 div。

如果没有多次复制和粘贴上述代码，有什么更简单的方法呢？如何将链接的 ID 传递给 jQuery，以便它知道要显示哪个 div？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:55:58.127

假设链接和图像都具有彼此相似的 ID，例如：

```
<a href="#" id="image1">Click me to show</a>
<a href="#" id="image2">Click me to show</a>
<a href="#" id="image3">Click me to show</a>

<img src="img1.png" id="image1_view" />
<img src="img2.png" id="image2_view" />
<img src="img3.png" id="image3_view" /> 
```

等等，你可以这样做：

```
$(document).ready(function(){
    $('a[id^="image"]').on('click', function(e) {
        e.preventDefault(); 
        $('#'+ this.id +'_view').fadeIn().one('click', function() {
            $(this).fadeOut();
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:55:58.073

假设您可以`div`在 ID 中提供要淡入淡出的元素，这应该可以工作（在`a`元素的`href`属性中传递 ID 引用）：

```
$('a.fadeIn').on('click', function(e) {  
    e.preventDefault();
    var the_div = $($(this).attr('href'));
    the_div.fadeIn('fast');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:56:30.397

给你所有的`<a>`标签虚拟 css 类（例如 ClassName1）

编辑代码，使其看起来像：

```
$(document).ready(function(){

    $(".ClassName1").click(function () {
    $("#" + this.id + "_view").fadeIn();
    return false; 
    e.preventDefault(); 
    });
}); 
```

您将 Divs 的 ID 维护为 ImageID_view

# sql - 替换、修剪然后为派生列添加前导 0

> ID：15792103
> 
> 赞同：0
> 
> 时间：2013-04-03T15:53:24.837
> 
> 标签：sql, sql-server, ssis

我有一个派生列，我从一个字段“BANK_REF”生成，我想从中删除任何破折号和空格，然后用前导 0 填充它，最多 10 个字符。以下处理删除破折号和空格：

```
REPLACE(TRIM(BANK_REF), "-","") 
```

以下添加是前导 0：

```
(DT_WSTR,6)REPLICATE("0",6 - LEN(BANK_REF)) + BANK_REF 
```

结合我得到的两者：

```
(DT_WSTR,6)REPLICATE("0",6 - LEN(REPLACE(TRIM(BANK_REF), "-",""))) + REPLACE(TRIM(BANK_REF), "-","") 
```

这实现了我所追求的，但是它似乎效率低下，因为我复制了替换/修剪部分。有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:54:57.830

You can do it this way:

```
select right(replicate("0", 10)+REPLACE(TRIM(BANK_REF), "-",""), 10) 
```

I'm not sure if you will notice the difference in efficiency. Generally SQL queries are dominated by I/O rather than in-memory operations.

# ffmpeg - 模拟电视噪音

> ID：15792105
> 
> 赞同：31
> 
> 时间：2013-04-03T15:53:25.493
> 
> 标签：ffmpeg, noise, television

我用谷歌搜索了一下，但从来没有找到答案。在屏幕上模拟来自电视的视频和音频噪音的第一种方法应该是什么？我的意思是，当我的电视天线被移除但电视仍然打开时（就像他们有时在日本恐怖电影中展示的那样）。我可以使用 ffmpeg 或任何其他技术，但最简单的信号形式是什么？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-03T18:26:56.583

# 创建视频和音频噪声、伪影和错误`ffmpeg`

## 噪音

### 使用过滤器

( [`geq`](https://ffmpeg.org/ffmpeg-filters.html#geq)video "generic equation") 过滤器（[`nullsrc`](https://ffmpeg.org/ffmpeg-filters.html#color_002c-haldclutsrc_002c-nullsrc_002c-rgbtestsrc_002c-smptebars_002c-smptehdbars_002c-testsrc)作为它的“空白画布”）可以产生视频噪声，并且[`aevalsrc`](https://ffmpeg.org/ffmpeg-filters.html#aevalsrc)过滤器可以产生白噪声音频：

![单声道噪声](https://i.stack.imgur.com/R2D4s.jpg)

```
ffmpeg -f lavfi -i nullsrc=s=1280x720 -filter_complex \
"geq=random(1)*255:128:128;aevalsrc=-2+random(0)" \
-t 5 output.mkv 
```

请注意，这会产生黑白视频噪声。

### 使用`/dev/urandom`

虽然我建议使用`geq`过滤器，但您也可以使用它`/dev/urandom`来生成视频和音频噪声（Windows 用户必须使用`geq`如上所示的过滤器）。这是一个小屏幕截图，但当然视频不会是静态图像：

![有色噪声](https://i.stack.imgur.com/9QjJ8.jpg)

```
ffmpeg -f rawvideo -video_size 1280x720 -pixel_format yuv420p -framerate 25 \
-i /dev/urandom -ar 48000 -ac 2 -f s16le -i /dev/urandom -codec:a copy \
-t 5 output.mkv 
```

这将产生彩色视频噪声。如果你只想要黑白，你可以添加[`hue`](https://ffmpeg.org/ffmpeg-filters.html#hue)过滤器。

![单声道噪声](https://i.stack.imgur.com/R2D4s.jpg)

```
ffmpeg -f rawvideo -video_size 1280x720 -pixel_format yuv420p -framerate 25 \
-i /dev/urandom -ar 48000 -ac 2 -f s16le -i /dev/urandom -codec:a copy \
-t 5 -vf hue=s=0 output.mkv 
```

* * *

## 向现有视频添加随机视觉噪音和错误

### 使用`noise` [比特流过滤器](https://ffmpeg.org/ffmpeg-bitstream-filters.html)：

![原始图像](https://i.stack.imgur.com/GJMpG.png)![在此处输入图像描述](https://i.stack.imgur.com/jayu0.gif) [原始版本和修改版本。]

```
ffmpeg -i input.mp4 -codec:v huffyuv -bsf:v noise -codec:a copy noise.mkv 
```

根据[文档](https://ffmpeg.org/ffmpeg-bitstream-filters.html)：

> 比特流过滤器对编码流数据进行操作，并且在不执行解码的情况下执行比特流级别修改。

这个比特流过滤器可以接受一个值来增加或减少噪声量。它是相反的，因此数字越大噪音越小，而 1 是最小的数字，因此噪音最大。您需要进行试验，看看哪种方法最适合您。

第一个示例[流复制](https://ffmpeg.org/ffmpeg.html#Stream-copy)了音频并且仅对视频进行了故障处理，但您可以通过删除流说明符将过滤器应用于音频和视频：

```
ffmpeg -i input.mp4 -codec:v huffyuv -c:a pcm_s16le -bsf noise=1000000 noise.mkv 
```

或者为视频和音频提供单独的值：

```
ffmpeg -i input.mp4 -codec:v huffyuv -c:a pcm_s16le -bsf:v noise=1000000 -bsf:a noise=100 noise.mkv 
```

这似乎适用于视频和`rawvideo`音频，但我建议尝试一下。有关显示不同编码器如何对噪声损坏做出反应的视频，请参见[无损与损坏](https://www.youtube.com/watch?v=4LfPWXIF5Ss)（[注释）。](https://gist.github.com/dericed/87dcfc43108bcb00049f)`huffyuv``pcm_s16le`

输出`noise.mkv`已损坏，但您可以对其重新编码，以便在您的播放器中正常工作：

```
ffmpeg -i noise.mkv -codec:v libx264 -pix_fmt yuv420p output.mkv 
```

有关更多编码信息，请参阅FFmpeg Wiki 上的[H.264](https://trac.ffmpeg.org/wiki/Encode/H.264)和[AAC编码指南。](https://trac.ffmpeg.org/wiki/Encode/AAC)

## 宏块效果

有几种方法可以做到这一点，但在本例中将使用噪声比特流过滤器。在 TS 中输出到 MPEG-2 视频，因为这将更容易受到预期效果的影响：

```
ffmpeg -i input.mp4 -bsf:v noise -c:v mpeg2video -q:v 2 -c:a copy macroblock.ts 
```

`-q:v`如果您想要更“编码”的外观，请将值增加到 ~20 。如果您想要更多噪音，请添加如上节所示的噪音值。

输出`macroblock.ts`已损坏，但您可以对其重新编码，以便在您的播放器中正常工作：

```
ffmpeg -i macroblock.ts -codec:v libx264 -pix_fmt yuv420p output.mp4 
```

有关噪声比特流过滤器的更多信息，请参阅上面的部分。

**结果可能会有所不同，因此您可能无法获得所需的内容。**请参阅下面的十六进制编辑器方法。

## 使用十六进制编辑器

另一种方法是使用十六进制编辑器，您可能会发现它更容易、更可控且更一致。看：

*   [制作视频故障艺术：如何使用简单的英语进行 Datamosh](http://forum.glitchet.com/t/tutorial-make-video-glitch-art-how-to-datamosh-in-plain-english/36)
*   [如何对数据损坏的视频进行数据处理](http://datamoshing.com/2016/06/17/how-to-datamosh-videos-with-data-corruption/)

* * *

## 强制像素格式

您可以对 ffmpeg 撒谎，让它认为色彩空间和色度子采样与实际上会导致奇怪的、类似错误的效果不同。

![原始图像](https://i.stack.imgur.com/GJMpG.png)![在此处输入图像描述](https://i.stack.imgur.com/Xg2hf.gif) [原始版本和修改版本。]

1.  探索你的输入。

    ```
    ffmpeg -i original.mp4 
    ```

    注意帧速率和视频帧大小。

2.  参考`ffmpeg -pix_fmts`并选择一种可用的格式，例如`yuv420p16le`.

3.  创建 rawvideo 并将其通过管道传输到另一个`ffmpeg`实例：

    ```
    ffmpeg -loglevel error -i original.mp4 -f rawvideo - | ffmpeg -y -f rawvideo -framerate 25 -video_size 1280x720 -pixel_format yuv420p16le -i - -pix_fmt yuv420p video.mp4 
    ```

    `-framerate`和值是从步骤 1 的控制台输出中显示的原始输入文件信息复制而来的`-video_size`。当然，您也可以操作这些以获得各种效果。

4.  如果需要，多路复用音频

    ```
    ffmpeg -i video.mp4 -i original.mp4 -map 0 -map 1:a -c copy output.mp4 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T22:54:02.673

是的，您可以使用`ffmpeg`：

```
ffmpeg -s 640x480 -t 8 \
-f rawvideo -pix_fmt gray16be -i /dev/urandom \
-f s32le -i /dev/urandom \
output.mp4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-17T18:26:11.100

只是为了比较，我测试了 3 种不同的方法来生成伪随机数。如您所见，速度非常不同。对于高 badwidth，我建议第一个解决方案。你可以在这里找到源代码： [https ://github.com/Zibri/rand](https://github.com/Zibri/rand)

顺便说一句，可以进一步优化源以获得更好的速度。

```
$ ./rand|pv -S -s 2G >/dev/null
2,00GiB 0:00:01 [1,58GiB/s] [========================================================================>] 100%            

$ cat /dev/urandom|pv -S -s 2G >/dev/null
2,00GiB 0:00:11 [ 178MiB/s] [========================================================================>] 100%            

$ dd if=/dev/zero bs=1k count=2M 2>/dev/null | openssl enc -rc4-40 -pass pass:weak |pv -S -s 2G >/dev/null
2,00GiB 0:00:04 [ 413MiB/s] [========================================================================>] 100% 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-03T15:55:52.970

这是白噪声

创建具有随机强度的灰度图像和具有完全随机样本的音频

# jquery - 使用 ajax 的 Google 电子表格 IE 错误

> ID：15792107
> 
> 赞同：0
> 
> 时间：2013-04-03T15:53:31.510
> 
> 标签：jquery, google-sheets

我正在尝试使用 jquery/ajax 将特定单元格中的数据提取到我的网页中。

代码：

```
$.ajax({
url: "https://docs.google.com/spreadsheet/pub?key=0AsVuHqMG8OuHdDEtdWxUMUxjTUR4R3BPNFk0S25TcFE&range=d4&output=csv",
success:function(result) {
alert(result);
}
}); 
```

这在 Firefox、Chrome 和 Safari 中运行良好，但在 IE9 及更低版本中没有发生任何事情，我不知道为什么。控制台也没有抛出任何错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:36:37.820

我很确定你不能对你正在使用的 URL 使用标准的 AJAX 请求。该 URL 将重定向您几次，直到您获得一个可下载的文件，而不是您可以从中检索数据的文件。

我建议您查看[“从电子表格数据 API 检索 JSON 提要的简单示例”](https://developers.google.com/gdata/samples/spreadsheet_sample)文档，因为这确实使您能够从 GSS 中以 JSON 形式检索数据。

基本上 ...

您首先在您的网站上添加一个 javascript 文件，如下所示...

```
<script src="http://spreadsheets.google.com/feeds/list/*ID*/*WS*/public/values?alt=json-in-script&amp;callback=*FN*"></script> 
```

• 其中*** *ID* ***是电子表格的长ID。

• 其中*** *WS* ***是工作表编号，例如 1、2、3 等。

• 其中*** *FN* ***是您要调用的函数。

然后使用回调函数，您可以使用它做任何您想做的事情，例如。

```
function callBackFunc(json){

   // Loop through all returned data
   for(i = 0; i < json.feed.entry.length; i++;){

      // Each row of data
      entry = json.feed.entry[i];

      // Each cell is called gsx$ CELL HEADING .$t;
      cell1 = entry.gsx$firstCellHeading.$t;
      cell2 = entry.gsx$blahblahblah.$t;

   }
} 
```

我使用这种方法将大量信息填充到我们公司的网站，因为我们没有 CMS，它允许任何成员员工使用他们已获得编辑权限的 GSS 更新网站上的信息。

**编辑**

我还忘了提到，上述方法还解决了 IE 9 及以下版本存在的任何跨域问题，因此无需担心 CORS 并且不必为 IE 转换为 XDR。

从好的方面来说，IE 10 支持 XHR :) 等不及要成为常态，IE9 会逐渐淡出。

# javascript - 构建面包屑的方法

> ID：15792114
> 
> 赞同：0
> 
> 时间：2013-04-03T15:53:49.337
> 
> 标签：javascript, spring, spring-mvc, web, breadcrumbs

我一直在一个网站上工作，该网站基本上是一个学习门户，用户将在某个类别中学习某些课程。我的要求是在页面上构建面包屑。我不想在每一页都硬编码。

那么有人可以建议我可以使用哪些方法来动态构建面包屑？

我正在使用 Spring-mvc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:02:50.160

通常，如果您在谈论动态面包屑，它们是由服务器端技术生成的，而不是纯粹的客户端。服务器将知道确切的页面结构以及哪些页面是当前页面的父页面。

完全在客户端做会更加不寻常和困难，但肯定是可能的。您可能可以执行诸如抓取 URL 结构以确定父页面之类的操作。例如，如果他们在`/lessons/lesson1/intro`您可能会拆分该字符串，将每个值与一些“Nice”值的字典进行比较，并显示“Lessons > Lesson 1 > Intro”

# debugging - IBM Worklight - 调试 Worklight 身份验证器和/或登录模块

> ID：15792116
> 
> 赞同：3
> 
> 时间：2013-04-03T15:53:52.987
> 
> 标签：debugging, logging, ibm-mobilefirst

我在这样的 Worklight 混合项目中有一个自定义的身份验证器

```
public class MyCustomAuthenticator implements WorkLightAuthenticator{
    private static final Logger logger = Logger.getLogger(MyCustomAuthenticator.class.getName());

    private Map<String, Object> authenticationData = null;

    public void init(Map<String, String> options) throws MissingConfigurationOptionException {
        logger.info("MyCustomAuthenticator initialized");
    }
    ...
} 
```

但我看不到 Worklight 将这些记录器消息放在哪里。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T15:27:10.277

在您的 server/conf 文件夹中查找 development.logging.properties 文件并取消注释以下属性：

```
 com.worklight.level = FINE
 java.util.logging.FileHandler.level = FINE 
```

然后查看日志是否出现在您的开发控制台中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-04T16:11:59.850

也许这个新的教学视频“Worklight Server 中的日志记录和调试”将帮助您调试 Java 代码： [http ://www.youtube.com/watch?v=KmWBrCilt3Q](http://www.youtube.com/watch?v=KmWBrCilt3Q)

视频中显示的假设您使用的是 Worklight 6.0。

另见：

*   [Worklight 5.0.6.1 - 来自 Worklight 适配器的 System.out.println() 日志记录不起作用](https://stackoverflow.com/questions/16947323/worklight-5-0-6-1-system-out-println-logging-from-worklight-adapter-is-not-w)

    在 JavaScript 中，您可以使用`WL.Logger`.

    在 Java 中，您可以使用`logger.info`或`logger.warning`通过导入 java.util.logging.Logger。
    logger.info / logger.warning 将打印到 Eclipse Worklight 控制台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T06:28:14.117

什么是工作灯版本？如果是 5.0.5 及以上版本，激活项目后，日志应位于 ...WorklightServerHome\PROJECT_NAME\logs

# java - 在哪里创建属性文件以读取部署在 Weblogic（Linux）上的 Web 应用程序中的值

> ID：15792117
> 
> 赞同：0
> 
> 时间：2013-04-03T15:53:55.130
> 
> 标签：java, linux, web-applications, properties

我有一个由 JSP、Servlet 和 Java 类组成的 Web 应用程序，这些类是在 Windows 的 Jdeveloper 中开发的。

这个应用程序需要在 Linux 机器上部署为 Weblogic 中的 WAR。一些 servlet 和 Java 类具有硬编码的某些值。我想避免这种情况，但原因很明显。因此，我正在考虑使用属性文件。

现在我在哪里可以在我的 jdeveloper 中创建这个属性文件，这样当我创建它的 war 文件并部署到 Weblogic 服务器时，我可以访问这个属性文件或者我应该如何编写我的程序以便我把这个属性放在任何地方我的 linux 上的文件，如 \u01\cap\domain\machine\domain_name\readvalues.properties。t 能够阅读它。

然后我如何在linux中提及路径。你能帮我写代码吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:00:59.270

将属性文件粘贴到您的 war 文件中，并像访问任何其他属性文件一样通过以下方式访问它：

```
props.load(MyClass.class.getResourceAsStream("/someProps.properties")); 
```

放置属性文件的最佳位置是 /WEB-INF/classes 文件夹。所以你需要加载相关的属性文件。

# azure - 无法通过 SqlConnection 连接到 azure db

> ID：15792124
> 
> 赞同：0
> 
> 时间：2013-04-03T15:54:11.777
> 
> 标签：azure, login, database-connection

我在 Azure 上托管了一个网站，我已经通过 SSMS 2012 将我的数据库上传到 azure，我可以连接到 SSMS 中的 azure 服务器和数据库，当我在数据库资源管理器中创建与数据库的连接并测试它说它有效的连接时美好的。

我无法访问 azure 管理门户中数据库的管理部分（我可以为另一个数据库执行此操作，但在通过网站访问该数据库时我也遇到了同样的问题）

我尝试为登录“ashley”赋予 db_owner 权限

> 执行 sp_addrolemember 'db_owner', 'ashley'

并得到了这个错误

> 消息 15151，级别 16，状态 1，行 1 无法更改角色“db_owner”，因为它不存在或您没有权限。

这是 webconfig 文件中的连接

> 添加名称="C:\USERS\USER\DOCUMENTS\VISUAL STUDIO 2012\PROJECTS\ORGANISER\ORGANISER\APP_DATA\CUSTOMER_DB.MDFConnectionString2" connectionString="Server=tcp:{myserver};Database=C:\Users\User\Documents \Visual Studio 2012\Projects\Organiser\Organiser\App_Data\Customer_db;用户 ID=ashley;Password={mypassword};Trusted_Connection=False;Encrypt=Tr‌​ue;MultipleActiveResultSets=True;" providerName="System.Data.SqlClient" /

以及我在后面的代码中用来引用它的连接字符串

> 字符串连接 = @"C:\USERS\USER\DOCUMENTS\VISUAL STUDIO 2012\PROJECTS\ORGANISER\ORGANISER\APP_DATA\CUSTOMER_DB.MDFConnectionString2";

我不明白为什么我可以在 SSMS 和数据库资源管理器中访问数据库，但不能在网站运行时访问。

我一般也是 Azure、ASP 和 MSSQL 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-04T18:30:50.633

根据您的帐户配置，您可能需要将允许的端口/IP 范围添加到 azure DB 配置。转到数据“SQL 数据库”属性 - 配置 - 允许的 IP 地址 - 添加您的 IP 范围

你就可以连接了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:37:21.237

您的连接字符串指向本地 mdf 文件。将 Database= 更改为您在 Sql Azure 上分配给数据库的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:32:49.380

确保您在正确的数据库上下文中运行 T-SQL 查询，在下拉列表中选择您的用户数据库。

# c++ - 使用父模板类的非依赖嵌套类作为子类的成员

> ID：15792127
> 
> 赞同：2
> 
> 时间：2013-04-03T15:54:20.237
> 
> 标签：c++, templates, nested-class

我正在查看[C++ FAQ](http://www.parashift.com/c++-faq)上的 C++ 模板部分，并遇到了这个示例（代码不编译）关于[使用父模板类的非依赖嵌套类作为子类中的成员](http://www.parashift.com/c++-faq/nondependent-name-lookup-types.html)：

```
template<typename T>
class B {
public:
  class Xyz { ... };  ← type nested in class B<T>
  typedef int Pqr;    ← type nested in class B<T>
};

template<typename T>
class D : public B<T> {
public:
  void g()
  {
    Xyz x;  ← bad (even though some compilers erroneously (temporarily?) accept it)
    Pqr y;  ← bad (even though some compilers erroneously (temporarily?) accept it)
  }
}; 
```

## C++ 常见问题解答 35.18

> 不幸的是，这也不起作用，因为这些名字（你准备好了吗？你坐下吗？）不一定是类型。“啊？！？” 你说。“不是类型？！？” 你惊呼。“这太疯狂了；任何傻瓜都可以看出他们是类型；看看！！！” 你抗议。抱歉，事实是它们可能不是类型。原因是 B 可以有一个特化，例如 B，其中 B::Xyz 是一个数据成员。由于这种潜在的特化，编译器在知道 T 之前不能假定 B::Xyz 是一个类型。解决方案是通过 typename 关键字给编译器一个提示：

所以作者说**`there can be a specialization of B<T>, say B<Foo>, where B<Foo>::Xyz is a data member, for example.`**。这是我不太了解的部分——如何专门化一个模板类（不从它继承）向该类**添加**另一个成员，在另一个专门化（例如`B<Baz>`）中不存在？当然，这是假设*D's static if*之类的东西不存在。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:58:33.210

当您显式特化类模板时，您正在为给定的模板参数重新定义类。这是一个简单的例子：

```
template <typename T>
struct foo
{
  typedef T type;
};

template <>
struct foo<int>
{
  static int type;
}; 
```

现在，如果我`foo`使用除 之外的任何其他模板参数来实例化 a `int`，那么该成员`type`就是一个类型。否则，它是一个`int`数据成员。

# python - 获取部分 IMAP 文本部分

> ID：15792128
> 
> 赞同：3
> 
> 时间：2013-04-03T15:54:24.610
> 
> 标签：python, imap, imaplib

我有一个电子邮件接口客户端，我正在使用 IMAP 来处理我的请求。我希望能够实时显示列表视图的基本电子邮件数据。

例如，在 GMail 列表视图中。为此，我需要做一个 IMAP 请求来获取所有电子邮件的主题、所有电子邮件的日期等。到目前为止，这是可行的。

问题是，我还想显示正文的第一个字符。如果我使用`BODYSTRUCTURE`调用来获取该`text/HTML`部分的索引，则需要很长时间（对于具有数千个字符的电子邮件，每封电子邮件可能需要超过一秒，而仅使用主题/日期/等调用最多需要大约 0.02 秒。

我尝试使用我们想要获取的第一个字节数的字节，但令我沮丧的是，它需要与使用调用一样长的`BODY[INDEX]<0.XYZ>`时间。有时甚至更多。`XYZ``BODY[INDEX]`

是否有另一种方法可以快速获取第一个文本字符？如果我想在我的界面上列出 300 封电子邮件，我无法承受每封电子邮件花费 1 秒钟的时间来获取第一个文本字符。

为此，我将 Python 与 imaplib 一起使用，尽管可能不相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:20:36.547

存在[IMAP RFC](https://www.rfc-editor.org/rfc/rfc3501#section-6.4.5)中定义的原始提取命令。

```
FETCH 2 (BODY[]<0.size>) 
```

例如，如果您想获取前 100 个字节的邮件，那么您可以将命令触发为

```
FETCH 2 (BODY[]<0.100>) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:18:41.343

如果您真的想获取消息的第一个文本部分的开头，则必须解析 BODYSTRUCTURE。获取所需文本部分的部分 ID 后，使用`BODY[number]<0.size>`语法。

另一个答案中给出的建议将在多部分消息上失败（例如，如果您有一个`text/plain`and `text/html`，这是当今最常见的格式。

# oracle - Oracle XE：管理员无法访问用户的表？

> ID：15792129
> 
> 赞同：1
> 
> 时间：2013-04-03T15:54:28.693
> 
> 标签：oracle, oracle11g, system-administration

所以我以管理员（系统）的身份连接到 Oracle XE 11g。我创建了一个新用户 Bob，并希望在某个表上只授予他某些特权。记下的表是由另一个普通用户 Jim 创建的。

当我尝试授权时，我被告知“表或视图”不存在”？如果我以 Jim 身份登录，则该表存在，但作为系统，我似乎无法访问 Jim 创建的表。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:01:30.913

请务必在授权 DDL 中指定模式名，否则它将首先在系统模式中查找表，如果失败则查找同义词来解析表名。

IE

```
SQL> connect system/@oracle11203
Connected.

SQL> grant select on TESTTAB to TEST2;
grant select on TESTTAB to TEST2
                *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> grant select on TEST.TESTTAB to TEST2;

Grant succeeded.

SQL> 
```

# asp.net-mvc - 无法在我的视图中正确序列化我的模型

> ID：15792130
> 
> 赞同：0
> 
> 时间：2013-04-03T15:54:33.670
> 
> 标签：asp.net-mvc, json

我想在我的视图中序列化我的模型，为此我使用以下行；

```
var initialData = <%: new JavaScriptSerializer().Serialize(Model) %>; 
```

我的视图正常工作所需的序列化如下

```
var initialData = {"EmployeeList":[],"ClientEmployeeSelector":{"SearchText":null,"SearchTextId":0},"Cvm":null,"TrainingName":null,"TrainingDescription":null}; 
```

但我目前得到的是；

```
var initialData = {&quot;ClientEmployeeSelector&quot;:{&quot;SearchText&quot;:null,&quot;SearchTextId&quot;:0},&quot;EmployeeList&quot;:[],&quot;Cvm&quot;:null,&quot;TrainingDescription&quot;:null,&quot;TrainingName&quot;:null}; 
```

因此，我得到了 & quot; 而不是引号 " 出现，这使我的视图无法正常工作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:57:54.207

使用冒号语法`<%:`对响应进行 HTML 编码。用于`<%=`写出未编码的值。

```
var initialData = <%= new JavaScriptSerializer().Serialize(Model) %>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:01:18.823

您可以将它作为 MvcHtmlString 返回，它会在不对字符串进行 html 编码的情况下输出。

```
var initialData = <%: new MvcHtmlString(new JavaScriptSerializer().Serialize(Model)) %>; 
```

# css - bootstrap 删除下拉菜单中的向上箭头

> ID：15792132
> 
> 赞同：8
> 
> 时间：2013-04-03T15:54:40.677
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter 引导程序，并希望删除下拉菜单上的向上箭头，这在我的导航中。我在 bootstrap.css 中找不到参考。

![引导程序](https://i.stack.imgur.com/63dE8.png)

```
.navbar .dropdown-menu:after {
 content: '';
 display: inline-block;
 border-left: 6px solid transparent;
 border-right: 6px solid transparent;
 border-bottom: 6px solid #000; /* change color here, modified for a black arrow */
 position: absolute;
 top: -6px;
 left: 10px;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T16:01:52.617

我不建议您编辑该`bootstrap.css`文件。您可以覆盖自定义样式表中的样式以隐藏该组件的箭头，如下所示：

```
.dropdown-menu:after {
    border: none !important;
    content: "" !important;
} 
```

使用这种方法，您甚至可以只覆盖特定的下拉菜单。例如，如果您的下拉列表是 id 元素的子元素`my_dropdown`，您可以执行以下操作：

```
#my_dropdown .dropdown-menu:after {
    border: none !important;
    content: "" !important;
} 
```

这将允许您为其他下拉菜单设置一个箭头，同时为该特定下拉菜单隐藏它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-11T10:10:17.717

以下css对我有用：

```
.dropdown-menu:before, 
.dropdown-menu:after {
     border: none !important;
     content: none !important;
} 
```

如果删除两个选择器中的任何一个，箭头中的一些细节仍然会保留 - 灰色或白色三角形。

（只是决定添加这个以防有人稍后寻找答案，因为接受的答案对我不起作用。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-27T19:06:32.320

你也可以这样做：

```
.dropdown-menu:before,
.dropdown-menu:after {
  display:none;
} 
```

这将禁用箭头及其阴影。

# c++ - difficulty with for loops, reading from and writing to files

> ID：15792138
> 
> 赞同：2
> 
> 时间：2013-04-03T15:54:57.123
> 
> 标签：c++, for-loop, file-io

I am currently working on a project for my 210 class that involves a file from which I need to extract a full name, flight type, passenger type, membership level, number of bags, and the size/weight of those bags. It gets very complex with military rewards and mileage clubs, free bags and oversize bags, passenger type, etc... et...

The file looks exactly like this:

```
Mark Spitz E RP NO 2 21.5 24.2 18 6 30 26 20.5 7.5 
Michael Jordan B RP M4 3 53.7 14.1 9.2 15.0 24.2 5.2 9.3 16.2 109.2 12.1 9.6 23.0
Dorothy Hamill E RP NO 2 55.8 27.1 17.2 18.6 15.0 35.2 21.3 9.2 
```

This indicates that Mark Spitz is a regular passenger traveling economy class and is not a member of the mileage club. He is checking two bags: the first weighs 21.5 lbs., and is 24.2 in. long, 18 in. wide and 6 in. high; the second weighs 30 lbs., and is 26 in. long, 20.5 in. wide and 7.5 in. high.

I have used for loops to read from infiles before, but never such as this. I have come to a complete stop and need some serious help with this issue, as I can't seem to find much on it. Any and all help is greatly appreciated! Here is my code as current:

```
#include <iostream>
#include <string>
#include <fstream>
#include <iomanip>
#include <cmath>

using namespace std;

int main ()
{
int newline, firstname, lastname, flighttype, status, membership, numberofbags=0, regularpass, militarypass, militaryorder, member1, member2, member3, member4, nomember;

ifstream infile;
infile.open("data3.txt");

ofstream outfile;
outfile.open("charges.txt");

        infile >> newline;
        for(int a=0; a<newline; a++)
        {
            infile >> firstname  >> lastname;
            outfile <<  firstname  <<" " << setw(10) << left << lastname;
        }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:02:20.823

如前所述，使用了错误的类型。您正在将字符串读入整数变量，但这是行不通的。

```
for(int a=0; a<newline; a++) 
```

您通过文件循环的方式没有意义。请参阅下面的参考。

[ifstream 参考](http://www.cplusplus.com/reference/fstream/ifstream/ifstream/)

另外...在尝试移至下一条记录之前，您没有阅读所有字段。您的数据显示一些记录的字段比其他记录多。那会导致你的技术不起作用。如果练习是读取长度相同的记录，则这是正确的代码，但如果要读取可变长度的记录，则此代码将不起作用。您将需要使用**getline**来执行可变长度记录。

在看到上面*约翰的*评论后，我可以看到为什么记录长度是可变的。您需要提供将决定应读取多少字段的逻辑。我想我现在可以在我的 200 级 CS 课程中回忆起这种类型的练习。

# css - CSS Menu - submenu disappearing

> ID：15792142
> 
> 赞同：2
> 
> 时间：2013-04-03T15:55:00.907
> 
> 标签：css, submenu

The submenu under story.php shows fine on the index.php and story.php pages. When I hover over story.php link from any other page (joinus.php, events.php, shop.php), the submenu shows but then disappears when I try to click on any of the submenu items.

```
<ul id="navbar" class="drop">
    <li><a href="story.php">ABOUT US</a>
        <ul>
            <li><a id="storynav" href="story.php">OUR STORY</a></li>
            <li><a id="meetusnav" href="meetus.php">MEET US</a></li>
            <li><a id="valuesnav" href="values.php">MISSION & VALUES</a></li>
            <li><a id="faqnav" href="faq.php">FAQs</a></li>
            <li><a id="contactnav" href="contact.php">CONTACT</a></li>
        </ul>
    </li>
    <li><a id="joinusnav" href="joinus.php">JOIN US</a></li>
    <li><a id="eventsnav" href="events.php">EVENTS</a></li>
    <li><a id="shopnav" href="shop.php">SHOP</a></li>
</ul> 
```

CSS:

```
#navbar {
    position: relative;
    top: 60px;
    left: 60px;
    width: 600px;
}

.drop {
    position: relative;
    z-index: 597;
    float: left;
}

.drop a {
    display: block;
    font: bold 15px verdana;
    color: #383838;
    text-align: center;
    textshadow: 0 1px 3px #808080;
}

.drop li {
    display: inline;
    float: left;
}

.drop ul {
    visibility: hidden;
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 598;
}

.drop li ul:hover, .drop li ul.hover {
    position: relative;
    display: inline;
    width: 100%;
    z index: 599;
    cursor: default;
}

.drop ul a {
    font-size: 13px;
}

.drop li:hover > ul {
    visibility: visible;
} 
```

I don't know if this is affecting anything, but I also have this css:

```
body#home a#homenav, body#story a#storynav, body#meetus a#meetusnav, 
body#values a#valuesnav, body#faq a#faqnav, body#contact a#contactnav,
body#joinus a#joinusnav, body#events a#eventsnav, body#shop a#shopnav {
    border-bottom: 3px groove #909090;
}

body#story .drop ul, body#meetus .drop ul, body#values .drop ul, 
body#faq .drop ul, body#contact .drop ul {
    visibility: visible;
} 
```

Thanks.

UPDATE: I finally figured it out. It was due to the last bit of CSS {border-bottom:3px groove #909090} to highlight the current page/link. That was causing a 3px gap between the anchor and submenu. I added border-bottom:3px solid rgba(0,0,0,0) to .drop a and that solved the problem. I don't know if this is the right way, but it is working for me now so I will go with it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:02:01.650

我建议它是某处的 z-index 属性，或者是你的“可见性：可见”规则。我真的不知道没有jsfiddle。

否则，我会检查文件之间的不同之处。' [DiffMerge](http://www.sourcegear.com/diffmerge/) ' 是一个很酷的工具，可以快速查看文件之间的差异。

[偷一份菜单](http://cssmenumaker.com/ "steal a menu")可能会更快

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:13:10.983

看起来像一个 z-index 问题，个人我总是将菜单放在绝对值上，并在 z-index 中给它们一些'9'，尝试检查你是否有任何接近这个菜单的绝对位置无论如何这是我的旧 css 菜单：

```
<div id="menu">
<ul id="mainm">
<li class="clas">Home<ul><li class="cc">Header 1</li><li class="dd">Header 2</li><li class="cc">Header 3</li><li class="dd">Header 4</li><li class="cc">Header 5</li>
<li id="bottomend"  class="dd">Header 6</li></ul></li>
<li class="clas">About<ul><li class="cc">Header 1</li><li class="dd">Header 2</li><li class="cc">Header 3</li><li class="dd">Header 4</li><li class="cc">Header 5</li><li id="bottomend" class="dd">Header 6</li></ul></li>
<li class="clas">FAQ<ul><li class="cc">Header 1</li><li class="dd">Header 2</li><li class="cc">Header 3</li><li class="dd">Header 4</li><li class="cc">Header 5</li><li id="bottomend" class="dd">Header 6</li></ul></li>
<li class="clas">Site Design's<ul><li class="cc">Header 1</li><li class="dd">Header 2</li><li class="cc">Header 3</li><li class="dd">Header 4</li><li class="cc">Header 5</li><li id="bottomend" class="dd">Header 6</li></ul></li>
<li class="clas" id="boright">Sign Up !<ul><li class="cc">Header 1</li><li class="dd">Header 2</li><li class="cc">Header 3</li><li class="dd">Header 4</li><li class="cc">Header 5</li><li id="bottomend" class="dd">Header 6</li></ul></li>
</ul>
</div> 
```

风格 ：

```
@font-face {
    font-family: 'Finger Paint', cursive;
    font-family: 'Mr Dafoe', cursive;
    font-family: 'Fjalla One', sans-serif;

     }
    body { font-family:'Fjalla One'; color:#fff}
#mainm{list-style-type:none; text-align: center;}
.clas ul { list-style-type:none; padding:0px;display:none; background-color:#903; }

.clas { float:left; width:90px; background-color:#2872DF;  border:0px; height:30px; font-family:'Fjalla One'; font-weight:300; line-height:30px; 
    border-left:1px solid #7C99E4;
         background: rgb(59,103,158); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(59,103,158,1) 0%, rgba(43,136,217,1) 50%, rgba(32,124,202,1) 51%, rgba(125,185,232,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(59,103,158,1)), color-stop(50%,rgba(43,136,217,1)), color-stop(51%,rgba(32,124,202,1)), color-stop(100%,rgba(125,185,232,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3b679e', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */
}
#boright {border-right:1px solid #7C99E4;}
.main:hover {background-color:#78A3F1;}
.clas:hover {background-color:#78A3F1;
background: rgb(126,204,234); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(126,204,234,1) 0%, rgba(11,176,226,1) 50%, rgba(121,206,234,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(126,204,234,1)), color-stop(50%,rgba(11,176,226,1)), color-stop(100%,rgba(121,206,234,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(126,204,234,1) 0%,rgba(11,176,226,1) 50%,rgba(121,206,234,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(126,204,234,1) 0%,rgba(11,176,226,1) 50%,rgba(121,206,234,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(126,204,234,1) 0%,rgba(11,176,226,1) 50%,rgba(121,206,234,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(126,204,234,1) 0%,rgba(11,176,226,1) 50%,rgba(121,206,234,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7eccea', endColorstr='#79ceea',GradientType=0 ); /* IE6-9 */
}

.clas:hover ul { display:block; border:0px solid black; width:120px; height:180px; line-height:30px; padding:0px 0px 0px 0px; background-color:#78A3F1; margin-top:0px;}
.imgfl {float:right; top: 70px; box-shadow:5px 5px 5px #003;  margin-right:70px;}
li ul li.cc {background-color:#78A3F1; width:150px; text-align:center; border-bottom: 3px #7C99E4 solid;}
 li ul li.dd {background-color:#5582D5; width:150px; text-align:center; border-bottom: 3px #7C99E4 solid;}
 li ul .cc:hover , .dd:hover  {background-color:#F96;}
#bottomend {  border-bottom:1px solid #000;}
#border { position:absolute; border:2px solid #FFF; width:200px; height:200px; z-index:20;}
#clas:hover ul{ 
    display:block; 
    border:0px solid black; 
    width:300px; height:150px; 
    line-height:30px; 
    padding:00px 0px 0px 00px; 
    background-color:#78A3F1; 
    margin-top:0px;
}
#menu {  
    height:30px; 
             box-shadow:5px 1px 5px #666;
    width:700px;
    padding:0px 160px;
    background: rgb(59,103,158); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(59,103,158,1) 0%, rgba(43,136,217,1) 50%, rgba(32,124,202,1) 51%, rgba(125,185,232,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(59,103,158,1)), color-stop(50%,rgba(43,136,217,1)), color-stop(51%,rgba(32,124,202,1)), color-stop(100%,rgba(125,185,232,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(59,103,158,1) 0%,rgba(43,136,217,1) 50%,rgba(32,124,202,1) 51%,rgba(125,185,232,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3b679e', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */
} 
```

# c - How to implement a Linux Device Driver for Data Acquisition Hardware?

> ID：15792144
> 
> 赞同：1
> 
> 时间：2013-04-03T15:55:09.217
> 
> 标签：c, linux, linux-kernel, operating-system, linux-device-driver

I am developing an acquisition device which requires DMA operation to transfer large data frames to the main memory. For now I am assuming the destination is a contiguous memory region so I am allocating it (say 1 MB) at boot time as described in section "Do-it-yourself allocation" from [ldd2-ch13](http://www.xml.com/ldd/chapter/book/ch13.html). The driver can then access that region by calling ioremap().

The current system works as follows:

1.  A memory-mapped control register enables a user-space application to Start/Stop the device

2.  Upon start, the device begins to transfer the acquired data to the assigned memory region continuously (and circularly) at ~8MB/s.

3.  The reserved memory region has the size of two frames in order to employ a [double-buffering technique](http://en.wikipedia.org/wiki/Multiple_buffering).
4.  Once a complete frame has been transferred, the device triggers an interrupt.

I have developed a simple char driver which provides a blocking read() function so that the user-space can read a new data frame every time an interrupt is received.

After running a few tests, I realized that the user-space application misses some frames when running the following code:

```
 for(i=0;i<NUM_FRAMES;i++) {

       read(dev_d,buf,FRAME_SIZE);/*Read frame*/

       for(j=0;j<FRAME_SIZE;j++) /*File dump*/
          fprintf(fp,"%d",buf[j]);

        fprintf(fp,"\n");
    } 
```

I suspect that the application's process is being put to sleep between two subsequent reads, allowing the device to rewrite the memory location which should have already been read.

Since I have no experience in kernel development I would like to know how is the correct way to implement a driver for such a device in order to ensure synchronization. Basically I am trying to implement a simple shared memory communication for a real-time acquisition device and I need to guarantee that the OS is able to read all the acquired data frames.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:19:00.427

你正在读一本非常非常古老的书。这里是本书最新版本的链接（它只是很旧）：[Linux Device Driver 3 - Memory Mapping](http://tjworld.net/books/ldd3/#CHAPTER15)。您还可以从内核文档中阅读[DMA-API 。](https://www.kernel.org/doc/Documentation/DMA-API.txt)

要制作一种同步，请阅读[Time、Delays 和 Deferred Work](http://tjworld.net/books/ldd3/#TimeDelaysAndDeferredWork)章节。您可以使用*waitqueue*。当新帧可用时，您*等待read() 并 *wake_up*。*

关于你的代码，仅仅理解你的问题是不够的。但是，如果您认为需要休眠/等待，您可以在驱动程序中实现 poll file_operation 并在用户空间中使用 select() 来询问是否有要读取的内容。

# java - Pass two java List to GSON/JSON

> ID：15792145
> 
> 赞同：0
> 
> 时间：2013-04-03T15:55:13.983
> 
> 标签：java, jquery, ajax, servlets

I want to pass two `List<String>` to Gson and catch them with `$.post` in my jQuery. Currently I have my first list in my servlet:

```
String json_list = gson.toJson(suggested_list);
response.setContentType("application/json");
response.setCharacterEncoding("UTF-8");
response.getWriter().write(json_list); 
```

and I get it with the $.post like this:

```
$(document).ready(function() {
    $(".word_sugest").click(function() {
    var physical_exam =  jQuery("textarea#examination").val();
        $.post("MyServlet", { examination : physical_exam},function(responseJson) {
        var $textarea = $('<textarea rows="10" cols="20" id="words_suggested">').appendTo($('#words'));
        var areavalue = $('#words_suggested').val();    
            $.each(responseJson, function(key,value) {
            $('#words_suggested').val($('#words_suggested').val()+value+"\n");
            });
        });
    });
}); 
```

How can I get another list with the same `$.post` Ajax-event? Can someone please help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:33:57.553

我认为最简单的解决方案是让您的 AJAX 调用返回 JSON 对象而不是列表。这样你就可以命名你的列表。以下是输出外观的示例：

```
{
  list1: ["A", "B", "C", "D"],
  list2: ["R", "S", "T", "U", "V", "W"]
} 
```

这是通过创建这样的 Java 对象来完成的：

```
public class CustomObjResponse {
  private List<String> list1;
  private List<String> list2;
  // Getters/setters
} 
```

然后，当您使用两个列表填充对象时，您的 Gson 调用将如下所示：

```
String json_obj = gson.toJson(customObjResp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:34:52.963

其中一种方法是返回列表对象的列表并相应地用 JavaScript 解析它们：

```
List<List<String>> suggestedList = new ArrayList<List<String>>();
suggestedList.add(new ArrayList<String>);
suggestedList.add(new ArrayList<String>);
String jsonList = gson.toJson(suggestedList); 
```

# iphone - iOS Swipe Gesture - Time delay for swipe

> ID：15792146
> 
> 赞同：0
> 
> 时间：2013-04-03T15:55:15.833
> 
> 标签：iphone, ios, objective-c

I have an `UIWebview` where i'm loading multiple URL's using SwipeGesture i'm swiping to next page. I have used this code to do this,

```
UISwipeGestureRecognizer* swipeUpGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeUpFrom:)];
swipeUpGestureRecognizer.direction = UISwipeGestureRecognizerDirectionUp; 
```

in `handleSwipeUpFrom` method i'm loading next URL in my `webview`. Everything works **PERFECTLY**. But the swipe is works so fastly. I want to make some delay to it, any ideas....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:34:16.510

它可能有点混乱，但如果没有人有更清洁的解决方案，试试这个：

```
- (void)handleSwipeUpFrom:(id)sender
{
    [self performSelector:@selector(anotherMethod:) withObject:object afterDelay:1.0];
} 
```

# javascript - How do you scope the arguments scope?

> ID：15792147
> 
> 赞同：0
> 
> 时间：2013-04-03T15:55:18.430
> 
> 标签：javascript, coldfusion

This is a JavaScript question.

In ColdFusion, we use `arguments.CustID` when referring to `CustID` that was passed to a function.

Q: Is there any way in JavaScript to refer to the scope of a parameter so that 6 months from now I know that "This variable is in the arguments scope"?

I'm considering adding `arg` to the beginning of my variable names, so that I would have `argCustID`.

# c - 具有多个文件和依赖项的 makefile

> ID：15792152
> 
> 赞同：1
> 
> 时间：2013-04-03T15:55:26.790
> 
> 标签：c, gcc, makefile

我知道这个 makefile 非常简单，但我一直在阅读一些教程和示例来尝试学习和应用它。**我展示的内容是否有问题，或者这是否应该与我展示的包含一起使用？**

所有文件都位于`CWD`运行 make 的位置。

* * *

这是我的依赖项列表。

```
CT.c includes: studio.h, math.h, "CT.h", "TM.h"
CT.h includes: none
TM.c includes: "TM.h", stdio.h, math.h
TM.h includes: none
RP.c includes: "CT.h", math.h, fftw3.h, stdio.h, stdlib.h, "TM.h"
RP.h includes: fftw3.h
RF.c includes: "RF.h", stdlib.h, stdio.h
RF.h includes: none
DR.c includes: stdio.h, math.h, "DR.h"
main.c includes: "CT.h", "DR.h", "TM.h", "RP.h", "RF.h", stdio.h, math.h, time.h, stdlib.h, fftw3.h 
```

* * *

这是我的makefile不工作：

```
RFST: main.o CT.o TM.o RP.o RF.o DR.o
        gcc -L/home/me/projects/RFST/libs -o RFST main.o CT.o TM.o RP.o RF.o DR.o -lfftw3 -lasc -lmfhdf -ldf -lz -ljeg -lm
main.o: main.c CT.h TM.h RP.h RF.h DR.h
        gcc -I. -c main.c
CT.o: CT.c CT.h TM.h
        gcc -I. -c CT.c
TM.o: TM.c TM.h
        gcc -I. -c TM.c
RP.o: RP.c RP.h CT.h TM.h
        gcc -I. -c RP.c
RF.o: RF.c RF.h
        gcc -I. -c RF.c
DR.o: DR.c DR.h
        gcc -I. -c DR.c 
```

* * *

当尝试运行 makefile 时，它​​抱怨没有声明东西，但是所有这些东西都在包含的各种头文件中声明。

例子：

```
'vA' undeclared(first use in this function)
'Variables' undeclared(first use in this funcion) 
```

`Variables vA[];`在 main.c 中。 `Variables`是一个`struct`in`DR.h`并且它被包含在 main.c 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:46:16.827

几个头球后卫打错了。修复这两个标头守卫解决了这个问题。

# node.js - node.js module support for postgres large objects (lo not bytea)

> ID：15792153
> 
> 赞同：0
> 
> 时间：2013-04-03T15:55:31.390
> 
> 标签：node.js, postgresql

It seems that "npm pg" ([https://github.com/brianc/node-postgres](https://github.com/brianc/node-postgres)) is the prefered module to interact with a postgres database from a node.js script.

nevertheless this module does not support binary large objects in the form of postgres "Large Objects". It only support the bytea format.

Is there a module that I am missing that has lo support ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T01:50:04.037

您可能必须编写自己的支持。请注意，libpq 基本上只是通过 SQL 接口调用函数。有关更多文档，请参阅[http://www.postgresql.org/docs/9.1/static/lo-funcs.html](http://www.postgresql.org/docs/9.1/static/lo-funcs.html)。

如果需要，您可以参考 libpq 客户端接口文档，然后使用`\df`以查看如何在 PostgreSQL 中调用这些文档。

# sql - SQL Server 2008，搜索特殊字符

> ID：15792154
> 
> 赞同：7
> 
> 时间：2013-04-03T15:55:33.493
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试查找已插入表中的一些错误数据。可能是有人从 Word 复制/粘贴然后插入数据库。

我已经看到了类似的问题，例如 [Query for find rows with special characters](https://stackoverflow.com/questions/2968042/sql-query-for-finding-rows-with-special-characters-only)

但这并不适合我所需要的。本质上，我只想返回一个不包含任何标准字符的数据集并捕获诸如 endash 之类的东西（仅一个示例）。

我试过用这样的东西

```
SELECT * FROM mytable WHERE email LIKE '%[^0-9a-zA-Z \-@\.]%' 
```

但它会返回每一条记录。

* * *

## 编辑

以防它对以后出现的其他人有好处。最终，我遇到的问题是由于连字符 (-) 字符的放置，正如下面的 sgmoore 所指出的那样。我将它移到了我的范围的开头，就在非 (^) 字符之后。

此外，根据 gbn 提供的 LIKE 实际上并未使用正则表达式的信息，我在这里重新访问了 Microsoft 文档[SQL Server LIKE Statement](http://msdn.microsoft.com/en-us/library/ms179859.aspx)。由于我假设它与正则表达式相同，因此我不必要地使用反斜杠字符作为转义字符。这些是不必要的，显然只有通配符才需要转义字符。我链接的文档还提到在 LIKE 范围之后使用 ESCAPE 子句来指定要用作转义字符的字符，例如 WHERE percent_complete LIKE '%50!%' ESCAPE '!' 将匹配实际上以 50% (50%, 150%) 结尾的字符串。

这是我最终用来筛选我的电子邮件数据中的坏字符的方法；对我来说它有效，但它可能并不适用于所有情况。

SELECT * FROM mytable WHERE email LIKE '%[^-0-9a-zA-Z_@.]%'

如果它有帮助，我需要在其他几个通用文本字段上做类似的事情；这远非全面，但它将我的结果集缩小到只有少数记录，然后我能够直观地确定我在寻找什么。

SELECT * from mytable WHERE text_field LIKE '%[^-0-9a-zA-Z @.''?:/,+&();_]%'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:46:39.840

尝试

```
SELECT * FROM mytable WHERE email LIKE '%[^0-9a-zA-Z @\.\-]%' 
```

看起来您的版本上 - 符号的位置会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:56:52.070

使用双重否定

```
... WHERE email NOT LIKE '%[^0-9a-zA-Z ,-@\.]%' 
```

样本数据也会很有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:57:23.467

据推测，每封电子邮件都有一个`@`字符以及`.`. 你可以试试：

```
SELECT * FROM mytable WHERE email LIKE '%[^0-9a-zA-Z ,\]%' 
```

如果您的原始列表是您真正想要的，那么您需要转义`-`：

```
SELECT * FROM mytable WHERE email LIKE '%[^0-9a-zA-Z ,\-@\.]%' 
```

# c# - CopyFromScreen 坐标关闭

> ID：15792158
> 
> 赞同：2
> 
> 时间：2013-04-03T15:55:40.407
> 
> 标签：c#, winforms, screenshot

这是对上一个问题的跟进——如果跟进违反规则，请见谅！我不确定，也希望能够将完整的答案归功于回答这个问题的人。

我正在尝试获取表单特定部分的屏幕截图，并使用 CopyFromScreen 来执行此操作。我需要一个面板的屏幕截图，然后是面板上的项目（上面有浮动的按钮）。

无论如何，当我尝试实现它时，屏幕截图显示在面板的左上角超远。而不是面板本身的屏幕截图，在图片的右下角只能看到面板的一小部分，而面板上方和左侧的区域是实际图片。

我的实现在某个地方关闭，我不完全确定在哪里。你们能看出我做错了什么吗？（再次，屏幕截图应该只是面板区域的图片。没有别的）。

```
 Rectangle rect = new Rectangle(0, 0, panel1.Width, panel1.Height);
        Bitmap bmp = new Bitmap(panel1.Width, panel1.Height, PixelFormat.Format32bppArgb);
        Graphics g = Graphics.FromImage(bmp);
        g.CopyFromScreen(panel1.Left, panel1.Top, 0, 0, bmp.Size, CopyPixelOperation.SourceCopy);
        bmp.Save("Test.jpg", ImageFormat.Jpeg); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:59:57.990

当您使用 CopyFromScreen 时，您必须给出屏幕坐标，这里您给出相对于您的表单的坐标。

您应该做的是：（如果您的代码在包含面板的表单中）

```
int borderWidth = (this.Width – this.ClientSize.Width) /2;
int titleBarHeight = this.Height – this.ClientSize.Height – 2 * BorderWidth;
g.CopyFromScreen(this.Left + panel1.Left + titleBarHeight, this.Top + panel1.Top + borderWidth, 0, 0, bmp.Size, CopyPixelOperation.SourceCopy); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-29T14:29:00.100

可以在[这里](https://stackoverflow.com/a/15334320/3090544)找到更好的答案。在链接中有正确的计算来获得独立于 FormBorderStyle 的表单的左上角。

```
Rectangle r = this.RectangleToScreen(this.ClientRectangle);
int titleHeight = r.Top - this.Top;
int borderWidth = r.Left - this.Left; 

g.CopyFromScreen(this.Left + borderWidth + panel1.Left, this.Top + titleHeight + panel1.Top, 0, 0, bmp.Size, CopyPixelOperation.SourceCopy); 
```

# sql-server - Mapping two different columns in SQL Query

> ID：15792161
> 
> 赞同：1
> 
> 时间：2013-04-03T15:55:52.460
> 
> 标签：sql-server, join, left-join

Hi Wonder if someone can help me with this query. I have a data set within which I have two columns. Column A/Column B; lets call it Table UpdateData.

There are also two Access tables with standing data that are mapping tables for these codes. One table is pre-update codes (oldCodes) and the other is post-system update codes (NewCode). In my data set Column A has pre-update codes and column B has post-update codes. My idea was to combine these two Access tables new and old codes into one table in SQL Server (2005) like this To Create Table combinedCodes:

```
Oldcode    display 
=====     =======
RTYX45    No
GHYUN6    No
BYUER5    Yes

Newcode    display 
=====      =======
VUJNG6     Yes
LERWS8     No
XCRYU7     Yes

code      display 
=====     =======
RTYX45    No
GHYUN6    No
BYUER5    Yes
VUJNG6    Yes
LERWS8    No
XCRYU7    Yes 
```

Note this is only an example of data and there is a lot more rows than is displayed.

So if I join updateData and Combined codes how do I set it so that one field (display) can show the match from either column A/B (or not). When I joined on only one column lets say Column A with left join to my updateData table from combinedCodes table I got the correct data in my combinedCodes display field and nulls for the ones that didn't match.

But then I introduced another join from Column B using left join to my UpdateData table from CombinedCodes and the combinedCodes display showed Old Codes where before nulls were, which I would want, but also showed old codes where before the new codes were used. I was getting a bit mixed up with what was actually happening so this might not be 100% right however when comparing each query result with individual join the query results with the joins to column A and Column B was different although same count of data when adding up individual count from separate queries.

```
select c.Fields
--,f.Display
,pt.Display
 from UpdateData c 
INNER JOIN PRE_CODES pt
ON c.columnA = pt.code -- only for pre-codes
--INNER JOIN POST_CODES f
--ON c.columnB = f.code 
```

The join and field commented out are for the post-codes and the other is for pre-codes. If i include left outer join to show nulls for post-codes then introduce 2nd join and f.display plus left join for field it doesn't show the same results as if I run each individually and combine them.

this kind of join is going beyond my understanding of joins and I do not know exactly what I should do here so over to any of you who can help me with this

Thanks

Andrew

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:01:01.500

如果我了解您要做什么，我可以看到几个选项。

一种是编写两个查询，一个针对每个代码表（每种情况下都有一个内部连接，因此您没有任何空值），然后使用[UNION](http://msdn.microsoft.com/en-us/library/ms180026.aspx)组合结果并为组合表生成数据。

另一种是编写一个查询，该查询使用左外连接连接到每个表，这将导致一个表的一列具有值或空值，而另一列具有值或空值其他表。然后将另一列添加到使用[COALESCE](http://msdn.microsoft.com/en-us/library/ms190349.aspx)将这两列组合成一个非空列的结果中。

# c - 为什么添加线程会使这个简单的套接字服务器更快？

> ID：15792163
> 
> 赞同：0
> 
> 时间：2013-04-03T15:55:54.853
> 
> 标签：c, performance, sockets, pthreads

这是我的服务器代码：

```
#include <stdio.h>
#include <arpa/inet.h>
#include <errno.h>
#include <sys/socket.h>
#include <pthread.h>

#define MY_PORT     843
#define MAXBUF      1028
#define NUM_THREADS     2

int pipes[1][2];
int sockfd;

const char *policy =
"<?xml version=\"1.0\"?>\n"
"<!DOCTYPE cross-domain-policy SYSTEM \"/xml/dtds/cross-domain-policy.dtd\">\n"
"<cross-domain-policy>\n"
"<site-control permitted-cross-domain-policies=\"master-only\"/>\n"
"<allow-access-from domain=\"*\" to-ports=\"*\" />\n</cross-domain-policy>\r\n";

void *SendPolicy(void *threadid) {
   int ok, clientfd;
   long tid;
   char buffer[MAXBUF];
   tid = (long) threadid;
   while(1) {
    /* --- Wait for, and recieve a client ---- */
    read(pipes[tid][0], &clientfd, sizeof(int), 0);

    /* --- Recieve --- */
    recv(clientfd, buffer, 128, 0);

    /* --- Send --- */
    send(clientfd, &policy, 250, 0);

    /* --- Close ---*/
    close(clientfd);
   }
}

int main(int argc, char *argv[]) {
    /* --- Create worker threads --- */
    pthread_t threads[NUM_THREADS];
    int t;
    for(t=0; t<NUM_THREADS; t++) {
        pipe(pipes[t]); // <- Create pipes for sending clients
        pthread_create(&threads[t], NULL, SendPolicy, (void *)t);
    }

    /* --- Create streaming socket --- */
    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)  {
    perror("Socket");
    return 1;
    }

    /* --- Initialize address/port structure --- */
    struct sockaddr_in self;
    self.sin_family = AF_INET;
    self.sin_port = htons(MY_PORT);
    self.sin_addr.s_addr = INADDR_ANY;
    self.sin_family = AF_INET;

    /* --- Assign a port number to the socket --- */
    if (bind(sockfd, (struct sockaddr*) &self, sizeof(self)) != 0 ) {
    perror("Error: socket bind");
    return 1;
    }

    /* --- Make it a "listening socket" --- */
    if ( listen(sockfd, 20) != 0 )    {
    perror("socket--listen");
    return 1;
    }

    struct sockaddr_in client_addr;
    int addrlen=sizeof(client_addr);
    int clientfd;
    int current_thread = 0;
    while (1) {
        /* --- Accept a client --- */
    clientfd = accept(sockfd, (struct sockaddr*)&client_addr, &addrlen);

    /* --- Send the client to a worker thread --- */
    write(pipes[current_thread][1], &clientfd, sizeof(int), 0);

    /* --- Cycle the threads --- */
    current_thread++;
    if (current_thread == NUM_THREADS)
        current_thread = 0;
    }

    /* --- Clean up --- */
    close(sockfd);
    pthread_exit(NULL);
    return 0;
} 
```

最初，我写这个计划使用 5 个线程，但我发现只有一个线程最大的收获。比根本没有线程要多得多：

```
Concurrency Level:      1000
Time taken for tests:   12.607 seconds
Complete requests:      10000
Failed requests:        0
Write errors:           0
Total transferred:      2500000 bytes
HTML transferred:       0 bytes
Requests per second:    793.23 [#/sec] (mean)
Time per request:       1260.672 [ms] (mean)
Time per request:       1.261 [ms] (mean, across all concurrent requests)
Transfer rate:          193.66 [Kbytes/sec] received 
```

这让我很困惑，我不明白为什么只有 1 个线程比没有线程或 2、3、4、5 个线程等更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:06:00.313

主线程也是一个线程，因此即使您`pthread_create`实际上只调用一次，您也有 2 个线程，主线程和您创建的线程，因此“1 个线程”和没有线程之间的区别。

至于 2+ 个线程，您必须考虑拥有多个线程的开销，线程之间的切换通常比进程之间的切换便宜，但不是零。

# java - httpclient可以使用当前登录用户自动创建授权标头作为java URLConnection吗？

> ID：15792166
> 
> 赞同：0
> 
> 时间：2013-04-03T15:55:57.017
> 
> 标签：java, httpclient, apache-httpclient-4.x, apache-httpcomponents

全部：

- 更新 -

客户端机器和运行受保护资源的机器在同一个域中，登录用户可以使用其用户名/密码访问资源。

当使用 httpclient 访问内网中受保护的 web 资源时，我们可以提供 NTCredentials 与 windows 用户/密码和域名。但是有没有办法在这台机器上获取当前登录用户的默认 Windows 用户/密码和域名。所以不需要向用户询问用户的 NTCredentials，我们可以使用用户登录的 NTCredentials 来访问受保护的资源。

URLConnection 可以成功访问资源：当 URLConnection 收到第一次请求的未授权错误 401，并且检测到远程服务器支持 nltm 时，URLConnection 将创建一个令牌并添加 http 头，如：Authorization: NTLM TlRMTVNTUAABAAAAB7IIogwA。那么请求就会成功。

我想知道我们是否可以使用 httpclient 来做到这一点？httpclient 可以使用登录用户信息自动添加授权令牌吗？

非常感谢您的任何回复和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:50:42.603

Oracle 的 HttpURLConnection 实现通过 JNI 使用本地 Windows 操作系统特定功能，以便访问当前用户安全上下文。也可以对 HttpClient 使用相同的技术，但它会使其依赖于 Oracle 的 JRE 实现和 Windows 安全 API。

# mysql - How to check if foreigh key violation will be triggered before executing SQL query?

> ID：15792172
> 
> 赞同：0
> 
> 时间：2013-04-03T15:56:07.137
> 
> 标签：mysql, sql, database

Before I execute SQL query, I'd like to check if foreign key constraint will be violated. Is this possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:10:53.310

您可以使用 SELECT 语句检查外键是否存在。要以完全透明的方式执行此操作，您需要编写代码来检查系统表或 information_schema 视图，动态构建正确的 SELECT 语句，然后执行它并检查结果。您可以对大部分内容进行硬编码，但只有冒着执行基于不再存在的假设的代码的风险。（可能会删除 FK、重命名表等）

但是这两种方法都存在一些问题。

*   您必须将该 SELECT 语句（或多个语句）*和*INSERT 或 UPDATE 语句放在一个事务中。否则，您可能会在更新之前验证其他人删除的值是否存在。换句话说，您的 SELECT 成功，其他人的 DELETE（或 UPDATE）成功，您的 INSERT（或 UPDATE）*应该*成功，但由于事务处理不当而失败。
*   服务器必须为每个 INSERT 或 UPDATE 语句处理两个查询。（这还不包括对系统表的查询。）
*   无论如何，您仍然必须在应用程序级别捕获错误。有*很多*事情可以阻止合理的事务提交。

由于无论如何您都必须捕获错误，因此只发出 INSERT 或 UPDATE 语句并捕获表明您违反外键约束的错误通常更有意义。

# java - 获取菜单项以（取消）选中它

> ID：15792173
> 
> 赞同：0
> 
> 时间：2013-04-03T15:56:10.517
> 
> 标签：java, android, menu

我想要一个菜单​​项来使用`.setChecked()`. 但这应该在另一个函数中而不是`onOptionsItemSelected(MenuItem item)`. 所以我尝试了它，`findViewById()`但后来我提到这不起作用^^我用谷歌搜索，但我只能找到他们在 onOptionsItemSelected 函数中使用它并且可以使用该`item`对象的示例。有没有可能得到像这样的菜单项`findViewById`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:00:10.127

> 我想要一个菜单​​项来使用.setChecked()。但这应该在另一个函数中而不是 onOptionsItemSelected(MenuItem item)

我的第一个想法是创建您的“副本”，`Menu`然后您就可以访问它的子项目。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   this.menuCopy = menu;
   new MenuInflater(<context>).inflate(layout, this.menuCopy);  
   return super.onCreateOptionsMenu(this.menuCopy);
} 
```

然后你可以使用两种方法：

*   [`menu.getItem()`](http://developer.android.com/reference/android/view/Menu.html#getItem%28int%29)它返回给定索引处的菜单项
*   [`menu.findItem()`](http://developer.android.com/reference/android/view/Menu.html#findItem%28int%29)它返回具有特定标识符的菜单项

# java - 密码检查

> ID：15792175
> 
> 赞同：0
> 
> 时间：2013-04-03T15:56:14.283
> 
> 标签：java, md5

我有一个网站，一旦注册，您就可以登录。要登录，php 代码通过执行以下操作检查密码是否正确：

```
 $subuser = stripslashes($subuser);
       $result = $database->confirmUserPass($subuser, md5($subpass)); 
```

$subuser 是用户在登录时输入的用户名。$subpass 是用户在登录时输入的密码。

现在 php 代码加密给定的密码（$subpass）并检查数据库以查看加密是否匹配。

现在这里的问题是：我目前正在制作一个内置网站登录表单的java应用程序。我希望java代码做与php代码相同的事情。我已经阅读了多个地方，但我仍然不明白该怎么做。这是到目前为止的java代码：

```
String password = "pass";
        try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        md.update(password.getBytes(), 0, password.length());
        System.out.println(new BigInteger(1, md.digest()).toString(32));

        } catch(NoSuchAlgorithmException e) {
            e.printStackTrace();
        } 
```

当我在java中运行这段代码时，它意味着给我与PHP中相同的加密字符串，但问题是它没有...... :(有谁知道我做错了什么/错过了什么？ 谢谢

如果需要更多信息，请询问我，我希望能编辑这篇文章并包含更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:01:04.897

将第 4 行和第 5 行修改为

```
md.update(password.getBytes());
System.out.println(new BigInteger(1, md.digest()).toString(16)); 
```

# sql-server-2005 - Sqlserver 2005 删除查询与连接

> ID：15792177
> 
> 赞同：0
> 
> 时间：2013-04-03T15:56:20.097
> 
> 标签：sql-server-2005, query-optimization

Sqlserver 2005 删除查询与连接

我有以下查询删除记录，这个查询中有什么可以优化的吗？使用连接删除记录的方式是完美的吗？使用连接记录删除任何开销？

```
DELETE BATCH_SCORE
    FROM BATCH_SCORE BS JOIN INQUIRY_MATCH IM ON BS.BATCH_ID = IM.BATCH_ID AND IM.INQUIRY_MATCH_ID = #inquiryMatchId#
    WHERE NOT EXISTS (SELECT TOP 1 1 FROM INQUIRY_MATCH WHERE BATCH_ID = BS.BATCH_ID AND CURRENT_STATE IN ('OPN','RVW',
    'ASN', 'ESC', 'PND')) AND BS.PERMANENT_BATCH = 'N' 
```

我写了如下的新查询，新查询比上面的更好吗

```
 DELETE
    BATCH_SCORE
FROM
    BATCH_SCORE BS
WHERE
    NOT EXISTS (
SELECT
    TOP 1 1
FROM
    INQUIRY_MATCH
WHERE
    INQUIRY_MATCH_ID = 1011 AND
    BATCH_ID = BS.BATCH_ID AND
    CURRENT_STATE IN ('OPN',
    'RVW',
    'ASN',
    'ESC',
    'PND')) AND
    BS.PERMANENT_BATCH = 'N' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:49:58.573

不，在 DELETE 语句中使用 JOIN 没有特别的开销。这两个查询都相当简单，几乎没有优化空间。如果性能不佳，请尝试向正在搜索的列添加索引（INQUIRY_MATCH.INQUIRY_MATCH_ID、INQUIRY_MATCH.BATCH_ID、BATCH_SCORE.BATCH_ID）

根据该列中有多少不同的值，INQUIRY_MATCH.CURRENT_STATE 上的索引可能无济于事。一般的经验法则是 MSSQL 不会选择使用索引，除非有大约 5% 的选择性（例如均匀分布的 20 个不同的值）。该指南可能完全排除了索引 BATCH_SCORE.PERMANENT_BATCH，因为我猜它只包含“N”和“Y”值。

# node.js - Do you need to explicitly close connections when using mongoose?

> ID：15792178
> 
> 赞同：2
> 
> 时间：2013-04-03T15:56:27.460
> 
> 标签：node.js, mongodb, mongoose

I'm trying to figure out if we should be explicitly calling connection.close when using the standard mongoose operations. Under the hood is mongoose & the native driver giving the connection back to the pool when no operations are used on it, or is it calling close behind the scenes, or just letting it timeout before giving it back?

I'm researching as well and will post and answer if I find it.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:10:36.530

如此[处所述](http://theholmesoffice.com/mongoose-and-node-js-tutorial/)，您应该在应用程序启动时打开一次猫鼬连接，并且在应用程序关闭之前不要关闭它。对于大多数应用程序，无需显式释放操作之间的连接。

# python - 为什么 Python 不能正确导入它？

> ID：15792180
> 
> 赞同：0
> 
> 时间：2013-04-03T15:56:30.890
> 
> 标签：python

所以，我有两个文件，HelloWorld.py 和 EnterExit.py。这是HelloWorld的代码：

```
import EnterExit
print('Hello world!')
print('What is your name?')
myName = input()
print('It is good to meet you, ' + myName + '!')
end() 
```

这是 EnterExit：

```
def end():
    print('Press enter to continue')
    input() 
```

当我运行 HelloWorld 时，它会一直工作到 end() 被调用。然后它说 end() 没有定义。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T15:57:13.157

要么写：

```
EnterExit.end() 
```

或者：

```
from EnterExit import end       # or import *
end() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T15:57:09.100

它正在正确导入东西，您只需要参考`EnterExit.end()`.

或者，`end`直接导入您自己的全局变量：

```
form EnterExit import end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T15:57:22.447

你需要打电话`EnterExit.end()`，或者

```
from EnterExit import end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:57:37.247

你需要这样称呼它——它本身`EnterExit.end()`并没有被调用`end`。`HelloWorld`

如果你想调用它`end()`，你需要使用

```
from EnterExit import end 
```

# excel - 如果单元格值为 x，则删除列

> ID：15792181
> 
> 赞同：0
> 
> 时间：2013-04-03T15:56:34.373
> 
> 标签：excel, vba

我正在使用 excel，如果单元格中的值在 10+ 列的范围内为 x，我正在尝试删除一列。数据过滤不起作用，因为它会删除行。所以，我需要选择指定行中的单元格包含值 x 的所有列。我正在录制宏并尝试自动执行该操作。欢迎使用宏代码，但不是必需的。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:06:20.873

像这样？将此代码粘贴到模块中。

```
Sub Sample()
    Dim ws As Worksheet
    Dim Rng As Range
    Dim Rw As Long, i as Long

    '~~> This is the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    '~~> This the row where you want to check
    Rw = 1

    With ws
        '~~> I am assuming there are 10 cols. Change as applicable
        For i = 1 To 10
            '~~> UCASE so that it check for x and X
            If UCase(.Cells(Rw, i).Value) = "X" Then
                '~~> Set your range
                If Rng Is Nothing Then
                    Set Rng = .Columns(i)
                Else
                    Set Rng = Union(Rng, .Columns(i))
                End If
            End If
        Next i
    End With

    If Not Rng Is Nothing Then Rng.Delete Shift:=xlRight
End Sub 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/3Gb5W.png)

# java - 结合延迟加载和线程安全的单例模式

> ID：15792186
> 
> 赞同：29
> 
> 时间：2013-04-03T15:56:50.540
> 
> 标签：java, design-patterns, singleton

我正在做一些关于单例的研究，特别是关于单例的惰性初始化和急切初始化。

急切初始化的示例：

```
public class Singleton
{
    //initialzed during class loading
    private static final Singleton INSTANCE = new Singleton();

    //to prevent creating another instance of Singleton
    private Singleton(){}

    public static Singleton getSingleton(){
        return INSTANCE;
    }
} 
```

但如上所示，它是急切的初始化，线程安全留给了 jvm，但现在，我想要有同样的模式，但有延迟初始化。

所以我想出了这种方法：

```
public final class Foo {
    private static class FooLoader {
        private static final Foo INSTANCE = new Foo();
    }
    private Foo() {
        if (FooLoader.INSTANCE != null) {
            throw new IllegalStateException("Already instantiated");
        }
    }
    public static Foo getInstance() {
        return FooLoader.INSTANCE;
    }
} 
```

如上图由于线

```
private static final Foo INSTANCE = new Foo(); 
```

仅在实际使用类 FooLoader 时执行，这会处理延迟实例化，并保证是线程安全的。

**它是否正确？**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-03T16:03:06.857

在我看来，您的第二个代码片段是线程安全延迟初始化单例的最佳方式。它实际上有一个模式名称

[按需初始化持有者成语](http://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom)

我建议你使用它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-03T16:35:23.953

你的第一个设计实际上是懒惰的。想想看，只有类初始化时才创建实例；该类仅在调用该方法时才被初始化`getSingleton()`[1]。所以实例只在被请求时才被创建，即它是惰性创建的。

[1] [http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T16:01:28.730

第二个可读性很差，第一个比较合适。看看这篇[文章](http://www.ibm.com/developerworks/java/library/j-dcl/index.html)。它是关于双重检查锁定的，但也会为您提供有关单例多线程的广泛信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:00:20.300

最好的方法实际上是使用[Enum Way](http://en.wikipedia.org/wiki/Singleton_pattern#The_Enum_way)：

```
public enum Singleton {
    INSTANCE;
    public void execute (String arg) {
            //... perform operation here ...
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T09:27:02.583

在我看来，这是一个不合适的模式。它对 JVM 的行为做出了非平凡且令人困惑的假设。此外，它有一个虚拟类。应尽可能避免使用虚拟类。

我建议直接的方法：

```
public class Foo {
    private volatile static final Foo instance = null;

    private Foo() { }

    public static Foo instance() {
        if (instance == null) instance = new Foo();
        return instance;
        }
    }
} 
```

......虽然，这不能按原样工作 - 它不是线程安全的......你真正想要的是 Bloch 的**Effective Java**第 71 条中提出的双重检查模式；看[这里](https://stackoverflow.com/a/3580658/1593077)。将链接中的示例改编为您的案例，我们得到：

```
public class Foo {
    private volatile static final Foo instance = null;

    private Foo() { }

    public static Foo instance() {
        if (instance != null) return instance;
        synchronized(instance) {
           Foo result = instance;
           if (instance == null) {
                result = instance = new Foo();
           return result;
        }
    }
} 
```

笔记：

*   不用担心这段代码的性能，现代 JVM 会处理它，这很好。毕竟，[过早的优化是万恶之源](http://c2.com/cgi/wiki?PrematureOptimization)。
*   正如其他答案中所建议的那样，上述不是 Bloch 的首选解决方案，但我认为使用枚举作为单例在语义上是不合适的，就像 OP 最初所做的那样。

# r - 插入符号的“gam”模型不返回fitted.values

> ID：15792187
> 
> 赞同：2
> 
> 时间：2013-04-03T15:56:50.953
> 
> 标签：r, regression, gam, mgcv

我正在使用`gam`模型`caret.train`（`caret`使用`gam`来自包`mgcv`）：

```
> fit <- train(P~II+TH+DR+TT,data=training,method="gam",trControl=ctrl,metric="Rsquared",preProc=c("center","scale"))
> names(fit)
 [1] "method"       "modelType"    "results"      "pred"         "bestTune"     "call"        
 [7] "dots"         "metric"       "control"      "finalModel"   "preProcess"   "trainingData"
 [13] "resample"     "resampledCM"  "perfNames"    "maximize"     "yLimits"      "times"       
 [19] "terms"        "coefnames"    "xlevels" 
```

我没有看到`fitted.values`上面，但一个`gam`对象应该返回`fitted.values`- [http://hosho.ees.hokudai.ac.jp/~kubo/Rdoc/library/gam/html/gam.html](http://hosho.ees.hokudai.ac.jp/~kubo/Rdoc/library/gam/html/gam.html) 结果，我无法绘制拟合与残差，以及其他一些功能也失败了。一种解决方法是`gam`直接使用而不是`caret`，但我也计划使用其他模型，并且想要一个一致的界面。

请指教。

编辑：

1.  数据快照 -`dput(head(training))`输出：

    ```
    structure(list(TT = c(1.810376, 0.089206, 0.623906, 0.676775, 
    0.206524, 1.014849), P = c(682L, 674L, 681L, 679L, 655L, 682L
    ), II = c(846000000L, 4790000L, 38600000L, 40600000L, 1379632L, 
    7526080L), WSM = c(5272L, 144L, 576L, 576L, 2336L, 18696L), TSM = c(168704L, 
    4608L, 18432L, 18432L, 74752L, 598272L), L2M = c(1.49e+09, 12600000, 
    85700000, 1.24e+08, 4214560, 33560200), DR = c(2.52e+09, 18400000, 
    1.3e+08, 1.8e+08, 5559030, 44681000), DW = c(11600000L, 5440000L, 
    39600000L, 46400000L, 4920550L, 36812430L), TH = c(32.032843125, 
    0.1880727305, 0.2003506939, 0.1983195715, 0.558498625, 0.495952125
    )), .Names = c("TT", "P", "II", "WSM", "TSM", "L2M", "DR", "DW", 
    "TH"), row.names = c(3L, 5L, 7L, 8L, 9L, 10L), class = "data.frame") 
    ```

2.  `str(fit)`按照@nograpes 的建议显示`fitted.values`在里面。`finalModel`

    ```
    $ finalModel  :List of 50
    ..$ coefficients     : Named num [1:37] 761 -1839 -377 745 -473 ...
    .. ..- attr(*, "names")= chr [1:37] "(Intercept)" "s(II).1" "s(II).2" "s(II).3" ...
    ..$ residuals        : num [1:44] -8.229 0.402 -11.41 -26.357 -8.202 ...
    ..$ fitted.values    : Named num [1:44] 690 674 683 707 687 ... 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T23:24:09.370

如果您提供了一些示例数据，这将使这个问题更容易回答。

检查`names`对象的 不是找出其中内容的好方法。尝试跑步`str(fit)`，你会看到你缺少什么。

`fitted.values`对象嵌套更深一层。

```
library(mgcv)
library(caret)

dat <- gamSim(1,n=400,dist="normal",scale=2)
test<-train(y~x1, data=dat, method='gam') # Next time, provide any data like this.

test$finalModel$fitted.values # If that isn't what you want, try str(test) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:43:25.340

见 [http://caret.r-forge.r-project.org/modelList.html](http://caret.r-forge.r-project.org/modelList.html)

使用 method = "gam" 可以从 mgcv 包中获取 gam() 并使用 "gamLoess" 和 "gamSpline" 使用 gam 包中的 gam()。

```
> library(gam)
> data(kyphosis)
> mod <- train(Kyphosis ~ Age + Number, data = kyphosis, method = "gamSpline")
> mod$finalModel
Call:
gam:::gam(formula = smootherFormula(data[, !(names(data) %in% 
    ".outcome"), drop = FALSE], smoother = "s", df = tuneValue$.df), 
    family = if (type == "Regression") gaussian() else binomial(), 
    data = data)

Degrees of Freedom: 80 total; 76.99992 Residual
Residual Deviance: 64.9097 
> head(mod$finalModel$fitted.values)
         1          2          3          4          5          6 
0.15217276 0.10961985 0.27168469 0.07017040 0.04072463 0.01414652 
```

最大限度

# c# - calling a javascript method from within a dropdown list asp.net

> ID：15792191
> 
> 赞同：0
> 
> 时间：2013-04-03T15:56:59.290
> 
> 标签：c#, javascript, asp.net

I have a drop down list that when the selected value is of a certin value I need to do some stuff and then redirect to a new page in a new tab

now I figured the best way to do this would be to use either response.wirte() like so

```
Response.Write(<script>);
Response.Write(window.open('url'));
Response.Write(</script>); 
```

or Page.ClientScript.RegisterStartupScript() methode to call a javascript methode that would open a new page in a diffrent tab like so

```
Page.ClientScript.RegisterStartupScript(GetType(),"GoToURL", "<script language=JavaScript>GoToURL(" + url + ")</script>"); 
```

and the javascript looks like

```
<script type="text/javascript">
                function GoToURL(url)
                {
                    window.open(url);
                }
            </script> 
```

I have tried both of these and the response.write methode just coming up with unable to parse the resposnse request and nothing at all happens when I use the Page.ClientScript.RegisterStartupScript

can anyone see where I have gone wrong with this or of any other possible way to do this

Note that both of these peaces of code were exicuted inside the SelectedIndexChanged method of my drop downlist

Thanks in advance

**Update** in the end I just caved in and filnally used a button to do the code behind and java script (got to love those onclientclick events :p) as nothing seems to be working to get java script to run from a drop down menu's onselected changed event

Thanks for all your suggestion though :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:00:06.437

编辑：

根据您的评论，我认为这是您正在寻找的解决方案。您可以为每个下拉列表值创建一个案例，并根据这些案例将用户重定向到新选项卡中的不同 url。

```
 protected void ddlAuthoritytype_SelectedIndexChanged(object sender, EventArgs e)
{
    var port = Request.Url.IsDefaultPort ? "" : ":" + Request.Url.Port.ToString();

    string ddl = ddlAuthoritytype.SelectedValue;
    switch (ddl)
    {
        case "AL":
            var script = string.Format("window.open('{0}://{1}{2}{3}')", Request.Url.Scheme, Request.Url.Host, port, ResolveUrl("~/alabama-state-tax-calculator.aspx"));
            ScriptManager.RegisterStartupScript(this, this.GetType(), "newWindow",script, true);
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:05:36.883

您可以改用隐藏字段，在后面的代码中，使用 URL 设置隐藏字段值。

在`pageLoad()`javascript 函数中检查隐藏字段的值，如果它不为空，请使用以下内容`window.open(hiddenFieldValue)`：

```
<script type="text/javascript">
    function pageLoad()
    {
        // Use $('#' + '<%= hfURL.ClientID %>') if hidden field has runtat="server"
        if($('#' + '<%= hfURL.ClientID %>').val()) 
            window.open($('#' + '<%= hfURL.ClientID %>').val()); 
            // OR window.open($("hfURL").val(), '_blank');
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:11:15.463

问题是，在这两种情况下，当页面回发并返回到 html 时，他们都没有找到您的 JavaScript 函数，即：GoToUrl()，因为它最初没有被加载。您可以在 C# 按钮单击事件中调用`window.open(url);`方法。像这样：

```
Page.ClientScript.RegisterStartupScript(GetType(),"GoToURL", "<script language=JavaScript>window.open(" + url + ");</script>"); 
```

我没有尝试过，但我认为这应该有效。

希望这会有所帮助

# ios - viewbased application with tabbarcontroller

> ID：15792195
> 
> 赞同：0
> 
> 时间：2013-04-03T15:57:10.180
> 
> 标签：ios, uitabbar

Im a newbie in ios , my app is a single view application (nib), the first view has 2 buttons , the first one open a uiview with 4 buttons , every button open a tabbar , (thats mean 4 bar button items ) ,

the views up show o.k.

at the second button in the first view , a view shows with 3 buttons every button open a tabbar , (thats mean 3 bar button items ) , the problem that when I pressed one of these 3 buttons the app get crashed and shows the error ([UITabBarController presentModalViewController:animated:completion:]: unrecognized selector sent to instance..)

I did the step at the second bar as what i did in the first !

```
-(IBAction)goabout{
 UIViewController *view1 = [[[about alloc] initWithNibName:@"about" bundle:nil] autorelease];
UIViewController *view2 = [[[collages alloc] initWithNibName:@"collages" bundle:nil] autorelease];
UIViewController *view3 = [[[centers alloc] initWithNibName:@"centers" bundle:nil] autorelease];
   self.tabBarControllerr = [[UITabBarController alloc] init];
   self.tabBarControllerr.viewControllers = [NSArray arrayWithObjects: view1,   view2,view3, nil];
   [self.tabBarController  setSelectedIndex:0];
   [self.tabBarControllerr presentModalViewController:tabBarControllerr animated:NO completion:nil];

   } 
```

any help please? thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:55:41.877

[self presentViewController:tabBarControllerr 动画：YES 完成：nil];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:08:01.037

看起来您有两个名称非常相似但名称不同的属性：

*   `self.tabBarController`（带一个“r”）
*   `self.tabBarControllerr`（带有两个 'r's）。

然后，在`goabout`你调用`presentModalViewController:animated`并`self.tabBarContollerr`传递给它`self.tabBarControllerr`

我会确保你的变量名不会让你感到困惑，然后我也会确保你的意思是调用`presentModalViewController:animated`正确的对象。

我不相信 a`UITabBarController`可以呈现自己。它需要呈现一个不同的`UIViewController`实例。

# matlab - 在matlab中将霍夫图像转换为不同的原点

> ID：15792206
> 
> 赞同：3
> 
> 时间：2013-04-03T15:57:39.253
> 
> 标签：matlab, image-processing, hough-transform

我正在使用 Matlab 中霍夫变换的图像处理工具箱实现。

它工作得很好，但它把原点放在图像的左上角，这会导致一个不必要的大霍夫图像，有很多未使用的空间。

我想用图像中心的原点做霍夫变换，这样半径范围就会减小。我正在实现的算法也需要以这种方式表示霍夫空间。

我不想从头开始实现霍夫变换，因为我不太了解 mex，无法像 Matlab 一样有效地重新实现它。因此，我一直在尝试采用 Matlab 所做的霍夫变换，并以某种方式变换霍夫图像，以便之后有效地移动原点。

任何人都知道更简单的方法或如何按照我的建议进行操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:46:40.923

好的，这个想法在我的脑海中还不是很精确，但是我想出了几个想法：

a）您可以重新参数化相对于图像中心的半径和角度。这不应该太难，但你必须考虑一下。

b）你可以尝试这样的事情： ![在此处输入图像描述](https://i.stack.imgur.com/h1p9u.jpg)

您可以获取`hough`图像的四个象限中的每一个。如果你`hough`在“D”上做常规，那么累加器应该自动正确。服用`hough`“B”将要求您`flipud`在服用`hough`. 之后半径是正确的，但角度需要在水平轴上翻转。在对所有四个象限执行类似的方法并固定角度后，您可以将累加器加在一起，然后找到线的位置。

如果我有时间，我想我可能会尝试自己实现它，看看它是如何工作的。从文档看来，您无法使用`hough`matlab 提供的直接执行此操作，因此这两个解决方案是我能想到的最好的解决方案。也许其他人会发布一些更容易的东西。

# ruby - Sidekiq 如何将参数传递给 perform 方法？

> ID：15792207
> 
> 赞同：17
> 
> 时间：2013-04-03T15:57:42.357
> 
> 标签：ruby, sidekiq

我有这个 Sidekiq 工人：

```
class DealNoteWorker
  include Sidekiq::Worker
  sidekiq_options queue: :email

  def perform(options = {})
    if options[:type] == "deal_watch_mailer"
      deal_watchers = DealWatcher.where("deal_id = ?", options[:deal_id])

      deal_note = DealNote.find(options[:deal_note_id])

      current_user = User.find(options[:current_user_id])

      deal_watchers.each do |deal_watcher|
        unless deal_watcher.user_id == options[:current_user_id]
          # Tell the DealWatchMailer to send emails to ALL watchers advising of change to deal
          if deal_watcher.user.active
            DealWatchMailer.deal_watch_email(deal_watcher, nil, deal_note, current_user, options[:url]).deliver
          end
        end
      end
    elsif options[:type] == "deal_note_mailer"
      options[:user_ids].each do |id|
        if DealWatcher.where("deal_id = ? and user_id =?", options[:deal_id], id).count == 0
          deal_note = Deal.find(options[:deal_note_id])
          user = User.find_by_id(id)
          DealNoteMailer.deal_note_email(deal_note, user, options[:url]).deliver
        end
      end
    end
  end
end 
```

我将哈希传递给该`perform_async`方法，但我认为传递给该`perform`方法的参数与传递给的参数类型不同`perform_async`。我尝试使用`logger.info`并`p`调试我的问题，但没有输出任何内容......

问题是该作业已添加到电子邮件队列中，但从未得到处理。我什至试图在方法中引发异常`perform`（在方法的第一行），但也没有输出任何内容......

我知道以下工作人员在工作：

```
class DealNoteWorker
  include Sidekiq::Worker

  def perform(deal_id, deal_note_id, current_user_id, url)
    deal_watchers = DealWatcher.where("deal_id = ?", deal_id)

    deal_note = DealNote.find(deal_note_id)

    current_user = User.find(current_user_id)

    deal_watchers.each do |deal_watcher|
      unless deal_watcher.user_id == current_user_id
        # Tell the DealWatchMailer to send emails to ALL watchers advising of change to deal
        if deal_watcher.user.active
          DealWatchMailer.deal_watch_email(deal_watcher, nil, deal_note, current_user, url).deliver
        end
      end
    end
  end
end 
```

所以问题出在哈希参数（选项）上。请问我做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-03-28T05:30:51.450

从[Sidekiq 文档](https://github.com/mperham/sidekiq/wiki/Best-Practices#1-make-your-jobs-input-small-and-simple)：

> 传递给 perform_async 的参数必须由简单的 JSON 数据类型组成：string、integer、float、boolean、null、array 和 hash。Sidekiq 客户端 API 使用 JSON.dump 将数据发送到 Redis。Sidekiq 服务器从 Redis 中提取 JSON 数据并使用 JSON.load 将数据转换回 Ruby 类型以传递给您的 perform 方法。不要传递符号或复杂的 Ruby 对象（如日期或时间！），因为它们无法正确地在转储/加载往返过程中幸存下来。

你可以在控制台上看到这个：

```
> options = { :a => 'b' }
> how_sidekiq_stores_the_options = JSON.dump(options)
> how_sidekiq_loads_the_options = JSON.load(how_sidekiq_stores_the_options)
> how_sidekiq_stores_the_options == how_sidekiq_loads_the_options
  false 
```

看起来您正在使用符号作为`options`哈希的键。如果您切换到字符串键，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T02:07:35.453

您正在使用一个名为 email 的队列，因此您需要运行 sidekiq -q email。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-28T15:09:08.817

请注意，作为符号发送的哈希键将在传输到 Sidekiq 执行时转换为字符串。

# jquery - jQuery 做一个回调函数

> ID：15792211
> 
> 赞同：1
> 
> 时间：2013-04-03T15:57:51.363
> 
> 标签：jquery, callback

我创建了一个自定义脚本，允许使用 ajax（ajax html 内容加载器）加载 html 内容。此脚本在元素单击时启动。

此脚本适用于单击时的硬编码元素。

但是，在我的 html 中，由于单击，我添加了很多元素。

这个新的附加元素无法通过我的 ajax html 内容加载器加载内容。

我需要回调我的 ajax 脚本以使其适用于新的附加元素。

我不知道如何编写脚本才能进行回调。

这是我的脚本：

```
$(function ajax() {
    function ajaxify(file) {
        $.get(file, function (data) {

            var folderContent = $("#bottom-container");
            $("#prev-ajax").fadeOut(0);
            $("#next-ajax").fadeOut(0);
            folderContent.slideToggle(1000,"easeOutCirc", function () {;
            $("#loading-bloc").show();
            $("#loading-text").fadeIn(500);
            $("#ajaxify_container").hide( function () {

            $("#loading-bloc").everyTime(10, function(){                        
            $("#loading-bloc").animate({left:"100%"}, 1000).animate({left:"0%"}, 1000); 
            });
            $("#ajaxify_container").show( function () {         
            folderContent.slideToggle(1000,"easeOutCirc");
            $("#loading-bloc").hide();
            $("#loading-text").fadeOut(500);
            $("#prev-ajax").fadeIn(300);
            $("#next-ajax").fadeIn(300);
           });
        });
    });
    });
}

$('.link:not("#prev-ajax,#next-ajax")').on("click",function (e) {
    e.preventDefault();

    var functionAlink = $(this);
    var functionBlink = $(this);

    var $parent= functionAlink.parents('.element'); 

    var prev = $parent.prev().find('.link').attr('href');
    var next = $parent.next().find('.link').attr('href');
    if (typeof prev != 'undefined' ) {
        $("#prev-ajax").attr('href', prev); 
        $("#prev-ajax").animate({opacity: 1}, 300);
    }else {
        $("#prev-ajax").removeAttr("href");
        $("#prev-ajax").animate({opacity: 0.4}, 300);
    }
    if (typeof next != 'undefined' ) {
            $("#next-ajax").attr('href', next);
        $("#next-ajax").animate({opacity: 1}, 300);
    }else {
        $("#next-ajax").removeAttr("href");
        $("#next-ajax").animate({opacity: 0.4}, 300);
    }   

    var link = functionBlink;
    if (!link.hasClass('current')) {
        $('.link').removeClass('current');
        link.addClass('current');
        ajaxify(link.attr('href'));
        window.location.hash = link.attr("href");
    }

    return false;   
});

$("#prev-ajax,#next-ajax").on("click",function (e) {
    e.preventDefault();
    var functionAlink = $(this);
    var functionBlink = $(this);
    //$("#prev-ajax").fadeOut(0);
    //$("#next-ajax").fadeOut(0);

    ajaxify(functionAlink.attr('href'));
    window.location.hash = functionAlink.attr("href");
    $('.link').removeClass('current');

    var href = functionBlink.attr('href');
    var link = $(".link[href*= '" + href + "']:not(#prev-ajax, #next-ajax)");
    link.addClass('current');
    var $parent = link.parents('.element');
    var prev = $parent.prev().find('.link').attr('href');
    var next = $parent.next().find('.link').attr('href');
    if (typeof prev != 'undefined' ) {
        $("#prev-ajax").attr('href', prev);
        $("#prev-ajax").animate({opacity: 1}, 300);
    }else {
        $("#prev-ajax").removeAttr("href");
        $("#prev-ajax").animate({opacity: 0.4}, 300);
    }
    if (typeof next != 'undefined' ) {
        $("#next-ajax").attr('href', next);
        $("#next-ajax").animate({opacity: 1}, 300);
    }else {
        $("#next-ajax").removeAttr("href");
        $("#next-ajax").animate({opacity: 0.4}, 300);
    }
});

});

$(function(){
    $(window).hashchange( function(){
    var hash = window.location.hash;
    var hash = location.hash.replace("#","");

if(window.location.hash) {
  $.get(hash, function (data) {
      $('#LoadingImage').show();
            $("#ajaxify_container").fadeOut(1500, function () {
                $(this).html(data).fadeIn(1500, function () {
                    $('#LoadingImage').hide();
                });
            });
        });
} else {
  // Fragment doesn't exist
}       
  })
  $(window).hashchange();
}); 
```

对不起我的英语，我是法国人

洛伊克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:05:10.367

（快速阅读您的问题，必须尽快离开。如果偏离主题，请见谅）：

也许你应该尝试：

```
$(document).on("click",'.link:not("#prev-ajax,#next-ajax")',function (e) { 
```

代替

```
$('.link:not("#prev-ajax,#next-ajax")').on("click",function (e) { 
```

你的英语很好（从法语的角度来看;-)

# java - Websphere 8.5 和 SpringServletContainerInitializer

> ID：15792214
> 
> 赞同：3
> 
> 时间：2013-04-03T15:57:53.887
> 
> 标签：java, spring-mvc, websphere, servlet-3.0

我们最近将我们的应用程序从 servlet 2.5 转换为 servlet 3.0，以便我们可以使用动态 servlet 配置。

我们使用 Spring 的 SpringServletContainerInitializer 来初始化我们的应用程序，并使用我们代码中的相应 WebApplicationInitializer 实例来初始化我们的应用程序。这种方法在 Tomcat 中有效，但是在部署到 Websphere 8.5.0.1 时，SpringServletContainerInitializer 无法在我们的代码中找到 WebApplicationInitializer 接口的实现，因此没有创建我们的 Spring MVC 调度程序 servlet。

我们在网上发现[了一篇博](http://incomplete-code.blogspot.com/2013/01/webapplicationinitializer-and-websphere.html)文，作者无法让它发挥作用。

我们尝试过弄乱类加载器、类加载顺序，并通过其他方式验证 servlet 3.0 在容器中是否正常工作，并且似乎没问题。使用 WAS 类加载器查看器，我们可以看到 SpringServletContainerInitializer 类和 WebApplicationInitializer 接口已加载，但未加载我们的 WebApplicationInitializer 实现。

有没有人在 Websphere 中尝试过这个？我们认为这可能是类加载器问题，但最终毫无头绪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T16:02:03.950

我刚看到这个贴。当调试类加载器问题时，WebSphere 提供了跟踪，当启用该跟踪时，可以提供更多关于正在发生或未发生的事情的详细信息。它是在您打开 PMR 时 IBM Support 要求的必须收集的数据中提供的。但它很容易阅读和理解输出。

[http://www-01.ibm.com/support/docview.wss?uid=swg21196187#show-hide](http://www-01.ibm.com/support/docview.wss?uid=swg21196187#show-hide) 在“手动收集数据”下，要使用的跟踪字符串是

com.ibm.ws.classloader.*=all

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T23:41:44.823

我有完全相同的问题。问题是由以下 APAR [http://www-01.ibm.com/support/docview.wss?uid=swg1PM85177](http://www-01.ibm.com/support/docview.wss?uid=swg1PM85177)修复的 WebSphere 中的一个缺陷。WebSphere 会构建注释缓存，并且由于缓存已满时的缺陷，它会丢弃以前缓存的注释，导致 SpringServletContainerInitializer 找不到 WebApplicationInitializer 的所有实现。

此 APAR 已在 8.0.0.8 中发布，并计划在 8.5.5.2 发布，而 8.5.5.2 又计划在 4 月 28 日发布。与此同时，我设法将缓存的大小从默认的 2000 增加到 16000（在 4000 和 8000 时失败），此时我的应用程序开始工作。一种大小并不适合所有大小，因为缓存大小被 JVM 上的系统属性覆盖，用于 WebSphere 节点，适当的大小将取决于该节点上运行的应用程序以及它们（及其 JAR）如何使用注释，因此它将在确定您的应用程序的正确值之前，请务必使用此设置。

我使用的JVM系统属性是-Dclassinfocachesize=16000

# c++ - 链表指针

> ID：15792215
> 
> 赞同：0
> 
> 时间：2013-04-03T15:57:54.583
> 
> 标签：c++, pointers

我的指针有问题。我正在尝试使用链表队列进行广度优先状态空间搜索，但我无法创建队列（或者更确切地说将它链接在一起）。这是片段：

```
typedef struct queueList {
    STATE *state;
    queueList *next;
    queueList(STATE *state): state(state), next(NULL) {}
    ~queueList() {delete next;}
} QUEUE_ELEMENT;

void moveAround(STATE *start) {
    QUEUE_ELEMENT *queueBegin = new QUEUE_ELEMENT(start);
    QUEUE_ELEMENT *queueEnd;
    queueBegin->next = queueEnd;
    while (queueBegin != NULL) {
        STATE *current = queueBegin->state;
        if (compareStates(current,finish) == 1) {
            answer = current;
            return;
        }
        for (int i = 0; i < 12; i++) {
            STATE *newState = expandState(current, i);
            if (newState != NULL) {
                queueEnd = new QUEUE_ELEMENT(newState);
                queueEnd = queueEnd->next;
            }
        }
        queueBegin = queueBegin->next;
    }
} 
```

什么地方出了错？queueBegin->next 没有被分配给任何东西，即使它应该（已找到可能的状态）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:06:52.617

遵循代码时遇到问题，但我可以看到问题

```
QUEUE_ELEMENT *queueEnd;
queueBegin->next = queueEnd; 
```

`queueEnd`是一个未初始化的变量。

查看更多我猜您希望 queueEnd 指向队列的末尾，并且当 expandState 返回非 NULL 时，您希望将新状态附加到队列中。不幸的是，您编写的代码并没有做这样的事情。我有点猜测，但这看起来更接近

```
QUEUE_ELEMENT *queueBegin = new QUEUE_ELEMENT(start);
QUEUE_ELEMENT *queueEnd = queueBegin;

...

        STATE *newState = expandState(current, i);
        if (newState != NULL) {
            QUEUE_ELEMENT *newQueueEnd = new QUEUE_ELEMENT(newState);
            queueEnd->next = newQueueEnd;
            queueEnd = newQueueEnd;
        } 
```

此外，我看不到将项目从队列前面取出的代码的任何部分。这通常是你会做的。

# ruby-on-rails - 如何将收件箱消息标记从未读更改为已读

> ID：15792223
> 
> 赞同：3
> 
> 时间：2013-04-03T15:58:06.760
> 
> 标签：ruby-on-rails

我正在构建一个收件箱消息系统。我所有的消息都显示为未读，而大多数消息都应标记为“已读”。我在我的消息模型中设置了它以检查是否未读或已读。所以我不明白为什么代码不适用于未读/已读。

消息.rb：

```
belongs_to :sender,
    :class_name => 'User',
    :foreign_key => 'sender_id'
belongs_to :recepient,
    :class_name => 'User',
    :foreign_key => 'recepient_id'

    def mark_message_deleted(id,user_id)
        self.sender_deleted = true if self.sender_id == user_id and self.id=id
        self.recepient_deleted = true if self.recepient_id == user_id and self.id=id
        self.sender_deleted && self.recepient_deleted ? self.destroy : save!
    end

    # Read message and if it is read by recepient then mark it is read
    def self.readingmessage(id, reader)
        message = find(id, :conditions => ["sender_id = ? OR recepient_id = ?", reader, reader])
        if message.read_at.nil? && (message.recepient.user_id==reader)
            message.read_at = Time.now
            message.save!
        end
        message
    end

    # Based on if a message has been read by it's recepient returns true or false.
    def read?
        self.read_at.nil? ? false : true
    end

    def self.received_by(user)
       where(:recepient_id => user.id)
     end

     def self.not_recepient_deleted
       where("recepient_deleted = ?", false)
     end

end 
```

消息控制器：

```
class MessagesController < ApplicationController

  before_filter :set_user

  def index
    if params[:mailbox] == "sent"
      @messages = @user.sent_messages
    elsif params[:mailbox] == "inbox"
      @messages = @user.received_messages
    #elsif params[:mailbox] == "archieved"
     # @messages = @user.archived_messages
    end
  end

  def new
    @message = Message.new
    if params[:reply_to]
      @reply_to = User.find_by_user_id(params[:reply_to])
      unless @reply_to.nil?
        @message.recepient_id = @reply_to.user_id
      end
    end
  end

  def create
    @message = Message.new(params[:message])
    @message.sender_id = @user_id
    if @message.save
      flash[:notice] = "Message has been sent"
      redirect_to user_messages_path(current_user, :mailbox=>:inbox)
    else
      render :action => :new
    end
  end

  def show
    @message = Message.find(params[:id])
  end

  def delete_multiple
      if params[:delete]
        params[:delete].each { |id|
          @message = Message.find(id)
          @message.mark_message_deleted(@message.id,@user_id) unless @message.nil?
        }
        flash[:notice] = "Messages deleted"
      end
      redirect_to user_messages_path(@user, @messages)
  end

  private
    def set_user
      @user = current_user
    end
end 
```

索引视图：

```
<h2>Your Inbox</h2>
<% if @messages.size == 0 %>
No messages in your Inbox
<% end %>
<% else %>
        <%= form_tag delete_multiple_user_messages_path, :method=>:post do %>
            <table  class="table table-bordered">
                    <tr>
                    <th>Delete?</th>
                    <th>Sent</th>
                    <th>Sender</th>
                    <th>Sent</th>
                </tr>
                    <% for message in @messages %>
                        <tr>
                            <td><%= check_box_tag "delete[]", message.id %></td>
                            <td>
                                <% if message.read? %>
                                  <%= link_to h(message.subject), user_message_path(@user, message) %>
                                <% else %>
                                  <%= link_to "#{h(message.subject)} (unread)", user_message_path(@user, message) %>
                                <% end %>
                            </td>

                            <td><%=h message.created_at.to_s(:long) %></td>
                        </tr>
            <% end %>
            </table>
        <%= submit_tag "Delete selected" %> |
        <% end %>
<%= link_to "Compose New Message", new_user_message_path(@user)%> | 
<%= link_to "View Sent Messages", user_messages_path(current_user, :mailbox => :sent)%> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:42:41.523

您的消息都显示为未读，因为该`read_at`字段从未从`nil`.

看起来您的`readingmessage`方法应该更改值，但从未调用过。

`show`（在控制器的方法中调用它是有意义的。）

模型：

```
def readingmessage
  self.read_at ||= Time.now
  save
end 
```

控制器：

```
 def show
    @message = Message.find(params[:id])
    @message.readingmessage if @message.recipient == current_user
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:18:58.173

这个方法做的太多了：

```
# Read message and if it is read by recepient then mark it is read
def self.readingmessage(id, reader)
    message = find(id, :conditions => ["sender_id = ? OR recepient_id = ?", reader, reader])
    if message.read_at.nil? && (message.recepient.user_id==reader)
        message.read_at = Time.now
        message.save!
    end
    message
end 
```

我不明白为什么您在发件人阅读邮件时调用此方法，但如果这是您需要的，我会选择类似的东西：

```
# Read message and if it is read by recepient then mark it is read
def self.readingmessage(id, reader)
    message = find(id, :conditions => ["sender_id = ? OR recepient_id = ?", reader, reader])
    message
end

def self.mark_read(id, reader)
      # Read message and if it is read by recepient then mark it is read
    def self.readingmessage(id, reader)
        message = find(id, :conditions => [recepient_id = ? and not null read_at", reader])
        if message
            message.read_at = Time.now
            message.save!
        end
        message
    end
end 
```

我假设您的控制器/视图知道收件人何时正在阅读消息以及相关消息的 id，在这种情况下`mark_read`可以大大简化

# phantomjs - PhantomJs: fs:Module: 流对象 writeLine 方法不起作用

> ID：15792224
> 
> 赞同：0
> 
> 时间：2013-04-03T15:58:06.897
> 
> 标签：phantomjs

我正在尝试使用 fs 模块中的流对象。但这似乎不起作用。下面是我重现该问题的咖啡脚本。有人可以检查脚本并判断这是一个错误还是我做错了。提前致谢。我也在 PhantomJs 组中发布了这个问题，但没有得到任何答案。

```
fs = require 'fs'
data = 'test fs'
fs.write 'tex.txt',data,'w'

rfile = fs.open('rfile.txt','w')
rfile.writeLine('testLine')
rfile.flush
rfile.close
phantom.exit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:03:03.237

好的，我发现了我的错误。在咖啡脚本中，调用函数时，没有任何参数的函数应该在调用中包含括号。下面的咖啡脚本有效。

```
fs = require 'fs'
data = 'test fs'
fs.write 'tex.txt',data,'w'

rfile = fs.open 'rfile.txt','w'
rfile.writeLine 'testLine'
rfile.flush()
rfile.close()
phantom.exit() 
```

# c++ - 模板运算符 <<

> ID：15792225
> 
> 赞同：4
> 
> 时间：2013-04-03T15:58:08.230
> 
> 标签：c++, templates, operators, operator-overloading

在库代码中，我有：

```
class VeryStrictClass
{
public:
    template<typename UNKNOWN_TYPE>
    VeryStrictClass& operator<<(const UNKNOWN_TYPE & value) {
        struct can_not_format_unknown_type {};
        can_not_format_unknown_type error = value;
    }
}; 
```

没有办法重新实现它。

这禁止声明像

```
template <typename MsgType>
/*check toString existance*/
VeryStrictClass& operator << (VeryStrictClass& o, const MsgType* msg) 
{
  BOOST_ASSERT(msg != NULL);
  return o << msg->toString();
} 
```

**toString() 不是虚拟的。**

我有很多类似的课程要放入 VeryStrictClass。有没有办法绕过这个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:59:07.207

您可以为自己的消息类型使用模板专业化。

```
class foo {};

class bar : public foo {}

template <>
VeryStrictClass& VeryStrictClass::operator<< <foo> (const foo & bar) {
    // something something
    return *this;
}

VeryStrictClass v;
bar* b = new bar;
foo* f = new foo;
v << *foo << *((foo*)bar); 
```

不确定这是否有效

编辑：添加了一些多态性

编辑：否则你不能。

# facebook - 使用 Facebook 登录的网站：在哪里上传截图？

> ID：15792227
> 
> 赞同：1
> 
> 时间：2013-04-03T15:58:21.157
> 
> 标签：facebook, upload, screenshot

我创建了一个可以通过 Facebook 登录的网站。一切正常。它已经被一些人使用。

现在我希望我的应用程序列在应用程序中心。在提交我的应用详细信息页面以供审核之前，我刚刚阅读了应用中心的所有建议。

该指南明确指出：“使用 Facebook 登录的网站必须至少包含一个屏幕截图，以表明个性化的用户体验。”

但是当我将我的应用程序归类为“带有 Facebook 登录的网站”时，我根本找不到上传屏幕截图的可能性。当我将我的应用程序配置为“Facebook 上的应用程序”或“移动网络”时，我只能在“应用程序详细信息”部分的底部找到上传屏幕截图的可能性。

当我查看“应用程序详细信息预览页面”时，屏幕截图区域中显示了 Facebook 截图假人。

谁能告诉我如何改变这个？

# solr - Solr ，在找到相关领域的文档后

> ID：15792229
> 
> 赞同：0
> 
> 时间：2013-04-03T15:58:24.153
> 
> 标签：solr

我陷入了一个问题。假设我的架构是这样的

```
locality     sublocality    park
WhiteField   subField       jhonsonPark
M.G Bay      M.G. Palace    WhitePark 
```

现在，我创建了一个搜索框，用户可以在其中输入任何字符串，然后我必须在上面的两个文档中搜索它并将结果显示给用户。我的问题是，我可以使用 'fq' 宏搜索 3 个字段，但是我应该显示哪个字段.. 假设我的查询是 'son' ，那么我将获得得分更高的记录 1（因为它匹配 'jhonson'）比文档 2 ，但我怎么知道，因为哪个字段文档 1 获得了高分？我希望你能理解我的问题。我可以搜索多个字段但无法显示相关字段..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:08:56.803

Solr 不只返回与查询匹配的字段。
它将返回由 fl 参数标记的文档的所有字段。
如果要检查查询匹配的字段，可以检查

1.  突出显示功能，可为您提供字段和匹配项
2.  您可以启用调试查询，解释将为您提供字段匹配。

但是，这两个选项都可以仅用于检查目的，而不是实际搜索，因为这对性能来说很昂贵，而且还可能取决于配置

# python - 如何使用 WTForms 的 TableWidget？

> ID：15792230
> 
> 赞同：8
> 
> 时间：2013-04-03T15:58:24.663
> 
> 标签：python, wtforms

我想使用 WTForms 在表格中呈现表单。似乎[TableWidget](http://wtforms.simplecodes.com/docs/0.6/widgets.html)可以解决问题，但我可以让它工作的唯一方法如下：

```
from wtforms import Form, TextField, widgets

class User(Form):
    user = TextField('User')
    email = TextField('Password')

    widget = widgets.TableWidget(with_table_tag=False)

user = User()
print user.widget(user) 
```

这似乎很奇怪（`print user.widget(user)`部分）根据文档，我应该能够说：

```
class User(Form):
    user = TextField('User', widget=widgets.TableWidget)
    email = TextField('Password', widget=widgets.TableWidget)

user = User()
for form_field in user:
    print form_field 
```

然而，这返回`TypeError: __str__ returned non-string (type TableWidget)`

当我替换用户时，通过电子邮件发送：

```
user = TextField('User')
email = TextField('Password') 
```

然后当然 WTForms 渲染按预期工作。

这是如何运作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-24T18:42:55.327

在文档中它说以下关于`TableWidget`

> 将字段列表呈现为具有 th/td 对的一组表行。

您将其与单个字段而不是字段列表相关联。如果您查看代码，该`__call__`方法`TableWidget`期望调用一个参数，`field`但它会将其视为`iterable`生成 html 字符串的目的。

# node.js - Node.js Redis 异步问题

> ID：15792235
> 
> 赞同：0
> 
> 时间：2013-04-03T15:58:32.430
> 
> 标签：node.js, asynchronous, redis

我来自 PHP 背景，试图围绕“事件驱动”的 Node.js 环境。我编写了一个小脚本，它从目录中读取文件并使用节目名称、季节和剧集编号（如果它们晚于数据库中当前存储的内容）更新 Redis。看来我遇到了一个异步问题，我无法完全理解 Redis DB 的标题是“My Show”、“05”季和“01”的标题。有两个文件被读取，其中包含“My Show S05E02”和“My Show S05E01”。

仅当季节/剧集晚于当前季节/剧集时，数据库才应更新，但是由于“updateTitle”的调用速度非常快，并且由于某种原因，“My Show S05E02”在“My Show S05E01”之前传递，因此更新功能始终将这两个值与原始值“My Show S05E01”进行比较，因此它使用 E02 更新 Redis，然后再次使用 E01！

这是代码：

```
function processFiles()
{
fs.readdir(WATCH_DIR, function(err, files){
    for (var i = 0; i <= files.length; i++)
    {
        checkFile(files[i]);
    }
});
}

function updateTitle(title, season, episode)
{
var cur_season, cur_episode;

redis_client.hget(title, 'Season', function(err, data){
    cur_season = data;
    redis_client.hget(title, 'Episode', function(err, data){
        cur_episode = data;
        redis_client.sismember('Titles', title, function(err, data){
            console.log('comparing S'+season+'E'+episode+' to current S'+cur_season+'E'+cur_episode);
            if ((season == cur_season && episode >= cur_episode) || season > cur_season)
            {
                redis_client.hset(title, 'Season', season);
                redis_client.hset(title, 'Episode', episode);
                console.log('setting '+title+' S'+season+'E'+episode);
            }
        });
    });
});
}

function checkFile(file, mtime)
{
var reg         = new RegExp("^"+FILE_PREFIX);
var seasoned    = new RegExp("S(\\d{2})E(\\d{2})", "i");

var cache = {}
if (reg.test(file))
{
    fs.stat(WATCH_DIR + file, function(err, stats){
        console.log(file, stats.mtime.toLocaleDateString() +' '+ stats.mtime.toLocaleTimeString() );
        fs.readFile(WATCH_DIR + file, 'utf8', function(ferr, data){
            if (seasoned.test(data))
            {
                title = data.replace(/S(\d{2})E(\d{2})(.*?)$/, '')
                    .replace(/[\._\-]+/, ' ')
                    .replace(/^\s+/, '')
                    .replace(/\s+$/, '');

                var season = data.match(/S(\d{2})/i);
                season = season[1];
                var episode = data.match(/E(\d{2})/i);
                episode = episode[1];
                updateTitle(title, season, episode);
            }
        });
    });
}
}

fs.watch(WATCH_DIR, function(type, file){
if (type == 'change')
{
    processFiles();
}
}); 
```

任何帮助，将不胜感激。我敢肯定这里还有其他错误或最佳实践，也请随时分享这些 - 但我只是想弄清楚异步问题！

仅供参考 - 这只是一个宠物项目，这样我就可以记住我目前在观看我喜欢看的每个节目的哪一集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:46:40.057

问题是您在这里没有保证的执行顺序。例如，它可能按以下顺序发生：

1.  读取文件 1
2.  向 Redis 发出第一个 get 请求
3.  读取文件 2
4.  向 Redis 发出第二次获取请求
5.  首先从 Redis 中获取回报。
6.  第二次从 Redis 中获取回报。
7.  执行第一个设置为 Redis。
8.  对 Redis 执行第二组。

如果第一个操作取决于第二个操作的结果，则需要确保第一个操作在开始第二个操作之前完成，这通常使用回调来完成。

考虑一下：

```
function doSomethingAsync (num) {
    console.log('Starting something ' + num);
    setTimeout(function () {
        console.log('Done doing something ' + num);
    }, 10);
}

function runEverything () {
    for (var i = 0; i < 3; i++)
        doSomethingAsync(i);
}

runEverything(); 
```

输出：

```
Starting something 0
Starting something 1
Starting something 2
Done doing something 0
Done doing something 1
Done doing something 2 
```

但是，如果我们添加一个回调结构并替换循环`runEverything`以使用这些回调，那么它将等待前一个`doSomethingAsync`完成，然后再开始执行下一个：

```
function doSomethingAsync (num, callback) {
    console.log('Starting something ' + num);
    setTimeout(function () {
        console.log('Done doing something ' + num);
        callback();
    }, 10);
}

function runEverything () {
    var i = 0;
    var doneCallback = function () {
        if (++i < 3)
            doSomethingAsync(i, doneCallback);
    };

    doSomethingAsync(i, doneCallback);
} 
```

输出：

```
Starting something 0
Done doing something 0
Starting something 1
Done doing something 1
Starting something 2
Done doing something 2 
```

欢迎使用 Node.js。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:24:59.393

这可能不是您问题的*最佳*解决方案，但它可能是*最简单的。*

你是对的 - 它被设置回 E01 的原因是由于竞争条件。它试图将这一集设置为 02，然后转到下一个文件，即 01，但它还没有赶上并完成将其设置为 02，因此它读取为 01。这是有问题的行：

```
if ((season == cur_season && episode >= cur_episode) || season > cur_season) 
```

如您所见，您正在检查 if `episode >= cur_episode`。将其更改为`episode > cur_episode`，您至少应该解决在这种特定情况下倒退的情节。如果当前情节是 01，您可能仍然会遇到问题，它先读取 03，然后是 02，并且在写入 03 之前，02 会覆盖 03。您可以尝试阅读*所有*更改的情节，然后检查它们并确定哪个是最后一个在应用程序中，而不是重复地从 redis 写入和读取。

你真的想解决竞争条件，这将解决一般情况并使你成为一个更强大的 Node 程序员，但是你会遇到无数不同的方法来解决这个问题（延迟、回调、承诺等）。 ..) 这远远超出了本次讨论的范围。我建议你[阅读](http://howtonode.org/promises)，[继续学习](https://github.com/felixge/node-deferred)，祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:08:18.607

尚未提及的解决方案是使用[异步](https://github.com/caolan/async)库。使用此模块，您可以轻松地序列化所有“checkFile”调用。您将有效地将所有调用添加到队列中，每个调用在执行之前等待前一个调用完成。尽管此解决方案运行速度可能会慢一些，但您不应遇到任何您似乎遇到的控制流问题。

# .net - 具有高句柄数的 IIS 工作进程 (w3wp.exe)

> ID：15792237
> 
> 赞同：5
> 
> 时间：2013-04-03T15:58:37.330
> 
> 标签：.net, iis, memory-leaks, handle, w3wp

我们的 IIS 工作进程的句柄数很高且不断增加。线程数似乎很稳定，但句柄数一直在上升，直到 AppPool 由于不活动而关闭。

出于测试目的，我们使用自己的 AppPool 配置了一个简单的 Web 应用程序（只是一个带有文本的 .html 文件）。如果直接调用html文件->没问题。一旦调用了不存在的页面，句柄就会开始上升。高句柄计数仅在 4.0 的集成模式下发生 - 经典和/或 2.0 没有问题。

泄漏的句柄似乎是事件句柄。这是来自内存报告：

[![在此处输入图像描述](https://i.stack.imgur.com/3pXQ8.png)](https://i.stack.imgur.com/3pXQ8.png)

在另一台服务器上进行了完全相同的测试，并且没有出现问题。我已经尝试使用 windbg 并打开了一个 Microsoft 支持案例，但没有结果。

# driver - NDIS 6.x 以太网桥驱动程序

> ID：15792238
> 
> 赞同：0
> 
> 时间：2013-04-03T15:58:38.647
> 
> 标签：driver, windows-7-x64, ethernet, ndis, bridge

我想知道使用 NDIS 6.x 构建以太网桥的最佳选择和方法是什么。我应该从哪里开始，我应该使用哪个，Miniport、IM、协议或过滤驱动程序？

尝试自定义 WDK 中可用的协议驱动程序示例并成功连接到以太网适配器。接下来是什么？

任何帮助深表感谢。

使用 Windows 7x64

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:32:17.783

让我们看看可用的 NDIS 驱动程序类型：微型端口、轻量级筛选器和协议。

单独的**NDIS 微型端口**无法解决此问题，因为微型端口*从*主机操作系统接收数据包。您想要从网络接收数据包的东西。

**NDIS 轻量级过滤器**可以解决*这个*问题，但解决方案会有点笨拙。您必须在两个不相关的微型端口堆栈之间手动同步。这比看起来更难；之前尝试过的其他人在最初的几次尝试中都犯了这个错误。

**NDIS 协议驱动程序**是解决此问题的最佳方法。协议驱动程序旨在附加到多个微型端口，并且协议驱动程序能够将数据包从一个微型端口堆栈路由到另一个。

但是协议驱动程序缺少一项功能。如果您只是编写一个协议驱动程序，那么这就是驱动程序的排列方式：

```
[TCPIP]  [YourProtocol]
    | \  / |
    |  \/  |
    |  /\  |
    | /  \ |
 [NIC0] [NIC1] 
```

也就是说，主机的 TCPIP 堆栈将两个 NIC 视为单独的 NIC。（@Aczire，您在[上一个问题](https://stackoverflow.com/questions/15732509/ndis-proto-sample-and-ethernet-bridge)中表示这对您来说没问题。但出于说明目的，这是故事的其余部分。）

**NDIS 允许您使用MUX-IM 驱动程序**解决此类问题。IM 驱动程序基本上只是粘在另一个微型端口上的协议。这使您可以准确控制主机操作系统看到的内容：

```
 [TCPIP]
       |
       |
       |
       |
 [YourMiniport]
 [YourProtocol]
    |      |
    |      |
    |      |
    |      |
 [NIC0] [NIC1] 
```

使用这种架构，您可以欺骗主机操作系统，使其认为这两个网络是相同的。（例如，面向用户的 GUI 将显示一个网络适配器，而不是两个。）然而，IM 驱动程序需要付出相当大的复杂性成本：它们很难编写，甚至更难正确。除非您有丰富的经验和时间，否则我不建议您处理 IM 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:40:58.260

现在您已经有了协议驱动程序：下一步是什么？

1.  确保您的协议绑定到您关心的两个适配器。
2.  在两个适配器上设置混杂数据包过滤器（您想接收所有流量，甚至不是发往本地主机的流量）
3.  当在一个接口上接收到数据包时，克隆 NBL 并在另一个接口上发送克隆。确保您阅读了克隆规则。

您应该检测布线周期，这样就不会淹没网络。

您应该阅读（好的，略读）IEEE 标准的[802、802.1](http://standards.ieee.org/about/get/802/802.1.html)和[802.3](http://standards.ieee.org/about/get/802/802.3.html)，因为它们对网桥应该做什么有一些特定的规则。例如，您可能希望将目标 MAC 地址特例化为 01-80-C2-00-00-00。

# jquery - JQuery ScrollLeft() 不起作用

> ID：15792240
> 
> 赞同：1
> 
> 时间：2013-04-03T15:58:43.243
> 
> 标签：jquery, scrollbar, news-ticker

我在 JQuery 中的 scrollLeft() 函数有问题。我基本上是在尝试创建这个 jsFiddle ( [http://jsfiddle.net/2RRWS/](http://jsfiddle.net/2RRWS/) ) 的一个分支，一个垂直的新闻代码。

我需要一个水平滚动的类似脚本。我能够制作一个水平滚动条，但我无法通过 scrollLeft 函数控制它。

任何想法我做错了什么？

```
var $container = $("#scrollContainer");
$container.scrollLeft(300); 
```

请参阅我的（非常短的）脚本：http: [//jsfiddle.net/RA52y/](http://jsfiddle.net/RA52y/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:07:08.770

1 - 在项目中包含 jQuery（这不是在小提琴中包含） - 确保 js 在准备好的文档上运行

2 - 修改html如下：

```
<div id="scrollContainer">

    <div id="content" style="white-space:nowrap; padding-left:600px;">134 1234 1234 12355 134 1234 1234 12355 134 1234 1234 12355 134 1234 1234 12355 134 1234 1234 12355 134 1234 1234 12355 134 1234 1234 12355 134 1234 1234 12355 134 1234 1234 12355</div>

</div> 
```

3 - 使用这个js：

```
var $container = $("#scrollContainer");
var $content = $("#content");

 containerWidth = $container.width();
 contentWidth = $content.outerWidth();

 contentLeft = 0;
 scrollLeft = 0;

 setInterval(function() {
    if (scrollLeft > contentWidth + containerWidth)
        scrollLeft = 0;
    $container.scrollLeft(scrollLeft++);

}, 20); 
```

之后在你的 jsfiddle 上对我来说效果很好

# facebook-graph-api - 带有jsonpath的facebook批量请求

> ID：15792247
> 
> 赞同：1
> 
> 时间：2013-04-03T15:58:54.243
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, jsonpath, facebook-batch-request

使用 Facebook，我需要知道谁（哪个用户）对 facebook 页面上的帖子发表了评论。我在我的 javascript 文件中使用 facebook-batch-requests 发出两个请求，第一个请求用于所有帖子，第二个请求用于每个帖子的请求。很高兴，如果我可以选择有一些评论的帖子。

```
FB.api('/', 'POST', {
  batch: [
  {
    // all posts from page from last year
    'method': 'GET',
    'name': 'posts_page_year',
    'omit_response_on_success': false,
    'relative_url': fbPageID + '/posts?since=2012-01-01&until=' + timeNow + '&limit=200000'
  },
  {
    // all post-ids from last year
    'method': 'GET',
    "relative_url": "/{result=posts_page_year:$.data.*.id[?(@.comments.count!=0)]}"
  }
]
}, function(response) {
  callback(response);
}
); 
```

我的问题是第二个批处理请求，它返回一个错误（#803）。我试了一下。

```
{
    // all post-ids from last year
    'method': 'GET',
    "relative_url": "/{result=posts_page_year:$.data.0.id}"
} 
```

返回具有第一个后请求的对象。一切都是好的。但我希望每个帖子都有这个，而不仅仅是第一个。

```
{
    // all post-ids from last year
    'method': 'GET',
    "relative_url": "/{result=posts_page_year:$.data.*.id}"
} 
```

返回错误 (#803) 您请求的某些别名不存在以及所有 ID 的列表。

```
{
    // all post-ids from last year
    'method': 'GET',
    "relative_url": "/{result=posts_page_year:$.data.*.id[?(@.comments.count!=0)]}"
} 
```

返回此错误：（#803）您请求的某些别名不存在：{result=posts_page_year:$.data.*.id[

我几乎尝试了所有方法并需要您的帮助，因为我不知道如何解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T15:17:57.770

在 Facebook[批处理文档](https://developers.facebook.com/docs/reference/api/batch/)中，它指出：

> 请注意，出于安全原因，JSONPath 表达式中不允许使用过滤器和脚本 JSONPath 构造。

这可能意味着您不能使用类似的代码`?(@.comments.count!=0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T07:41:04.223

```
FB.api('/', 'POST', {
  batch: [
    {
      // 0: all likes from user
      'method': 'GET',
      'relative_url': 'me/likes'
    },
    {
      // 1: all user-posts from last month
      'method': 'GET',
      'relative_url': 'me/posts?since=' + timeMonthAgo + '&until=' + timeNow + '&limit=200000'
    },
    {
      // 2: all user-posts from last year
      'method': 'GET',
      'relative_url': 'me/posts?since=' + timeYearAgo + '&until=' + timeNow + '&limit=200000'
    }
  ]
  }, function (response) {
    callback(response);
  }
); 
```

我必须设置一个限制，以便每个响应现在都有内容限制。可以将限制设置为不可能的大数。`since`您还必须使用和`until`参数设置时间范围。

我希望这对某人有所帮助。

# sql - 如何查看课程成绩之间的关联关系？

> ID：15792249
> 
> 赞同：0
> 
> 时间：2013-04-03T15:59:01.567
> 
> 标签：sql, sql-server

我是 SQL Server 的新手。请帮我找出两门课程成绩之间的关联关系。

我想找出哪个学生在“计算机编程”中获得“A”级，而在计算机概论中也获得“A”级。

这是数据的样子：

```
RollNum | CGPA | Status     | Name                              | Grade
410     | 2.6  | Completed  | Introduction to Computer Science  | A  
410     | 2.6  | Completed  | Computer Programming              | A-  
422     | 3.2  | Completed  | Introduction to Computer Science  | A 
422     | 3.2  | Completed  | Computer Programming              | A  
223     | 3.52 | Completed  | Introduction to Computer Science  | A 
223     | 3.52 | Completed  | Computer Programming              | A 
521     | 1.2  | Completed  | Introduction to Computer Science  | B+ 
521     | 1.2  | Completed  | Computer Programming              | A-
....
.... 
```

这是我正在写的查询：

```
SELECT [RollNum],[CGPA],[Status],[Name],[FinalGrade]
 FROM db
     where Name ='Introduction to Computer Science' and FinalGrade='A' 
  and (Name='Computer Programming' and FinalGrade= 'A' ) 
```

请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:04:50.620

您可以使用以下内容：

```
select RollNum
from db
where [Name] in ('Introduction to Computer Science', 'Computer Programming')
  and [Grade] = 'A'
group by RollNum
having count(distinct name) = 2 
```

这被称为[关系部门](https://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)，并将返回`RollNum`他们参加两个课程并`A`在每个课程中获得的学生。

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/adfc1/4)

如果您想要的不仅仅是`RollNum`，那么您可以在 a 中使用上述查询`WHERE EXISTS`：

```
select [RollNum], [CGPA], [Status], [Name], [Grade]
from db d1
where exists (select RollNum
              from db d2
              where [Name] in ('Introduction to Computer Science', 'Computer Programming')
                and [Grade] = 'A'
                and d1.rollnum = d2.rollnum
              group by RollNum
              having count(distinct name) = 2); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b7a4e/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:03:28.200

如果使用 SQL 服务器，我会使用

```
Select [RollNum],[CGPA],[Status],[Name],[FinalGrade]
from db
where [Name] in ('Introduction to Computer Science', 'Computer Programming')
and [FinalGrade] = 'A' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:05:10.080

```
SELECT qCP.*
FROM (SELECT RollNum, CGPA, Status, Name, FinalGrade
      FROM db
      WHERE Name = 'Computer Programming' 
      AND FinalGrade = 'A') qCP
INNER JOIN 
    (SELECT RollNum 
     FROM db 
     WHERE Name = 'Introduction to Computer Science' 
     AND FinalGrade = 'A') qIntro
ON qCP.RollNum = qIntro.RollNum 
```

# oracle - Oracle Connectionstring 上的 Unicode 参数

> ID：15792252
> 
> 赞同：7
> 
> 时间：2013-04-03T15:59:14.863
> 
> 标签：oracle, character-encoding, odp.net, devart

为什么 Oracle ODP 不能识别参数 Unicode=true 而 Devart 的 Provider 可以？

当我有包含字符串的数据时： "ñãõ,éóúý" ，我的 asp.net 应用程序显示 "???,????" 如果我使用 Oracle 的 ODP。当我尝试将属性`Unicode=true`放在连接字符串中时，它说它是一个无效的属性。

Devart 的提供程序可以重现相同的行为。但是碰巧当我将`Unicode=true`属性放在连接字符串中时，一切都很好地显示在我的 asp.net 应用程序的屏幕上。

为什么会这样？我可以在 Oracle 数据提供程序 (Oracle.DataAccess.Client) 中使用哪个属性，以便我可以按照我想要的方式显示我的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-14T17:16:24.500

**ODP.NET 始终是 Unicode 感知**的，这个链接说：

[http://www.oracle.com/technetwork/topics/dotnet/code-154692.html](http://www.oracle.com/technetwork/topics/dotnet/code-154692.html)

没有必要在连接字符串中使用 UNICODE。事实上，这个属性应该被删除。

如果字符串错误，ODP.Net 可能不是罪魁祸首。

感谢@Vache 的评论。

# css - 如何正确选择每个奇数孩子的第一个孩子？

> ID：15792253
> 
> 赞同：0
> 
> 时间：2013-04-03T15:59:22.303
> 
> 标签：css, css-selectors

我正在尝试使所有标题都变成`div`粗体和红色，但是我拥有的 css 使它们都变成了粗体和红色。我的css有什么问题？

这是[小提琴](http://jsfiddle.net/XKYeg/7/)。

```
<div id=foo>
    <div>
        <div>title 1</div>
    </div>
    <div>
        <div>data 1</div>
    </div>
    <div>
        <div>title 2</div>
    </div>
    <div>
        <div>data 2</div>
    </div>
    <div>
        <div>title 3</div>
    </div>
    <div>
        <div>data 3</div>
    </div>
    <div>
        <div>title 4</div>
    </div>
    <div>
        <div>data 4</div>
    </div>
</div> 
```

```
#foo {
    font-size:8pt;
}
#foo:nth-child(odd):first-child {
    font-weight:bold;
    color:red;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:02:00.030

选择器`#foo:nth-child(odd):first-child`将两个伪类应用于`#foo`自身。因为`#foo`确实是第一个孩子，并且 1 是奇数，所以它匹配，导致字体样式应用于整个元素及其内容（因为字体样式是继承的）。

您需要使用一些子选择器拆分伪类：

```
#foo > :nth-child(odd) > :first-child {
    font-weight:bold;
    color:red;
} 
```

如果标题`div`元素是其父母的唯一孩子，那么您可以安全地替换`:first-child`为`div`; 确保只选择每个中的第一个是没有意义的：

```
#foo > :nth-child(odd) > div {
    font-weight:bold;
    color:red;
} 
```

就此而言，由于我提到的字体样式是继承的，您甚至可以`> div`完全省略：

```
#foo > :nth-child(odd) {
    font-weight:bold;
    color:red;
} 
```

当然，如果最里面的`div`元素不是唯一的孩子，请随意忽略最后两个片段......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:02:57.057

一起运行的选择器被“与”在一起。因此，`#foo:nth-child(odd):first-child`将匹配所有具有 ID 'foo' 并且是其父级的奇数子级并且是其父级的第一个子级的元素。

用空格分隔的选择器表示“的某些后代”，并`>`表示“的直接子代”。

你的意思是，也许，这个？

```
#foo > :nth-child(odd) > :first-child {
    font-weight:bold;
    color:red;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:06:01.133

```
#foo > div:nth-child(2n+1) {
    font-weight:bold;
    color:red;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/XKYeg/10/)**

（或只是`#foo > div:nth-child(odd)`）

请注意，如果您需要专门针对子 div，只需`div`在任一规则的末尾添加一个。前任：`#foo > div:nth-child(odd) div`

# c - 设置多个 UDP 套接字

> ID：15792256
> 
> 赞同：0
> 
> 时间：2013-04-03T15:59:24.457
> 
> 标签：c, sockets, udp

我需要有关设置 3 个 UDP 套接字的帮助。套接字是远程端口号的一部分，必须是 61000、61001 和 61002。我需要设置这个套接字，因为我应该在 select 函数上使用它们来发送和接收数据。

我尝试了很多方法，但没有一个能正常工作。我知道这是设置一个套接字的正常程序：

```
int set_socket() {

  /* get a datagram socket */
  sock = socket(AF_INET, SOCK_DGRAM, 0);
  if (sock == SOCKET_ERROR) {
    printf ("socket() failed, Err: %d \"%s\"\n", errno,strerror(errno));
    exit(1); 
  } 
  OptVal = 1;
  ris = setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, (char *)&OptVal, sizeof(OptVal));
    if (ris == SOCKET_ERROR)  {
      printf ("setsockopt() SO_REUSEADDR failed, Err: %d \"%s\"\n", errno,strerror(errno));
      exit(1);
    }
  /* name the socket */
  Local.sin_family      =   AF_INET;
  Local.sin_addr.s_addr =   htonl(INADDR_ANY);
  Local.sin_port        =   htons(local_port_number_UDP);
  ris = bind(sock, (struct sockaddr*) &Local, sizeof(Local));
  if (ris == SOCKET_ERROR)  {
    printf ("bind() failed, Err: %d \\n",errno);
    exit(1);
  }
  /* assign our destination address */
  To.sin_family               = AF_INET;
  To.sin_addr.s_addr          = inet_addr(string_remote_ip_address_UDP);
  To.sin_port                 = htons(remote_port_number_UDP);

} 
```

如何使用不同的远程端口号设置所有 3 个套接字？我必须`struct`为每个套接字使用不同的（本地和到）？

谢谢，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T06:39:14.410

> 我必须为每个套接字使用不同的结构（本地和到）吗？

不，您可以为另外两个套接字重用相同的`Local`（更改后`sin_port`） 。如果每次需要将其更改为另一个套接字时，`bind`您可以重复使用它。`To``sin_port`

# css - 如何在 flex 4 的 css 文件中设置 backgroundImage 属性？

> ID：15792261
> 
> 赞同：1
> 
> 时间：2013-04-03T15:59:44.237
> 
> 标签：css, flex4, mxml, flex-spark

我想在 flex 中将 backgroundImage 属性设置为“../img/foo.png”之类的东西。我的代码如下所示：

```
<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";
    @namespace mx "library://ns.adobe.com/flex/mx";

    .bg {
        background-image           : "../img/foo.png";
        background-image-fill-mode : repeat;
    }
</fx:Style>

<s:BorderContainer width="200" height="200" styleName="bg" /> 
```

它不起作用。我不想使用嵌入图像，所以

```
background-image : Embed("../img/foo.png"); 
```

有效，但不适合我。有没有办法实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:38:56.463

尝试包括`url`让它知道你的路径`background-image`：

```
.bg {
    background-image           : url("../img/foo.png");
    background-image-fill-mode : repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:38:35.940

`BorderContainerSkin`不期望背景图像的 URL 。

如果您查看皮肤，它使用一个`BitmapFill`类作为背景图像。皮肤将您指定的任何内容作为背景图像并将其设置为用于容器实际背景的 BitmapFill的[源。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/graphics/BitmapFill.html#source)

正如文档（我在上面链接到的）所示，该 BitmapFill 的来源可以是以下之一：

*   一个 Bitmap 或 BitmapData 实例。
*   表示 DisplayObject 子类的类。BitmapFill 实例化该类并创建它的位图呈现。
*   DisplayObject 的一个实例。BitmapFill 将其复制到 Bitmap 中进行填充。

因此，如果您不想嵌入图像，则需要手动加载图像并将该位图数据作为值提供给 CSS 样式。或者创建您自己的使用`<s:Image />`组件作为背景的皮肤。

要使用默认皮肤，您可以执行以下操作：

*   使用 Loader 加载图像
*   加载完成后，从加载的内容中获取位图数据
*   将其应用为背景图像

[此答案](https://stackoverflow.com/a/6091788/398606)中详细介绍了加载和获取位图数据的步骤。

**PS**：由于您将在代码中执行此操作，因此您可能无法使用 CSS 样式来设置背景。您必须使用以下`setStyle()`方法在 Actionscript 中设置它：

```
borderContainer.setStyle("backgroundImage", loadedBitmapData); 
```

请注意，虽然您可以在 Flex CSS 中使用连字符样式名称，但在代码中您不能引用连字符样式名称，并且需要使用驼峰式大小写，就像我在上面所做的那样。

# drupal-7 - 如何设置 Drupal 7 登陆页面？

> ID：15792262
> 
> 赞同：2
> 
> 时间：2013-04-03T15:59:44.933
> 
> 标签：drupal-7, customization, drupal-theming

**登陆页面：**登陆页面是网站的第一页。例如，如果您访问[http://www.google.co.in/](http://www.google.co.in/)，您会看到一个页面，您为主域查看的特定页面称为登录页面。网站的第一页。

同样，我想设置一个页面，一旦最终用户点击 URL [http://www.website.com](http://www.website.com)并能够看到一个页面，该页面应该呈现或显示，该页面应该具有我设计的布局，并且使用drupal 7的主题文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:46:11.640

很难理解你到底在问什么。

这可能有助于回答您的问题：[Drupal - 替换主页](https://stackoverflow.com/questions/4231291/drupal-replace-the-home-page)

# c++ - 找出两组是否不同的最快方法？

> ID：15792266
> 
> 赞同：2
> 
> 时间：2013-04-03T15:59:58.237
> 
> 标签：c++, c++11, set

找出两组是否不同的最快方法是什么？使用`std::set_difference`让我得到了所有的差异，但我只需要知道第一个差异。

目前，我正在执行以下操作：

```
bool areSetsDifferent(const std::set<MyClass> &myClassSet1, const std::set<MyClass> &myClassSet2) {
    if (myClassSet1.size() != myClassSet2.size()) {
        return true;
    }
    std::vector<MyClass> diffs(myClassSet1.size());
    auto iter = std::set_difference(myClassSet1.begin(), myClassSet1.end(), myClassSet2.begin(), myClassSet2.end(),
            diffs.begin());
    return iter != diffs.begin();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T16:02:18.527

[`std::set`](http://en.cppreference.com/w/cpp/container/set)有一个[`operator!=`](http://en.cppreference.com/w/cpp/container/set/operator_cmp)。

```
bool areSetsDifferent(const std::set<MyClass> &myClassSet1, const std::set<MyClass> &myClassSet2) {
    return myClassSet1 != myClassSet2;
} 
```

# java - 如何在 Tapestry5 应用中实现类似 django 的管理命令？

> ID：15792267
> 
> 赞同：1
> 
> 时间：2013-04-03T16:00:02.297
> 
> 标签：java, clojure, tapestry

我想执行自定义（groovy/clojure/java/whatever）“脚本”作为命令行命令来使用 Tapestry5 应用程序执行一些任务（它真的是休眠部分）。例如，从以前的数据库迁移到新的数据库。我想知道是否有办法使用“挂毯”实体？

我尝试使用 gradle 任务、单独的 clojure 脚本（在主 pom 文件中使用 maven 插件）来实现这一点，但似乎他们无法访问休眠会话，所以我真的不能对数据库做些什么。

我对 java 世界很陌生（我对 clojure 有一些经验，对 scala 有一点经验），所以也许我错过了一些关于“企业”工具的东西。

问题是：有没有“官方”的方式来完成这些任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:39:14.547

你的意思是数据库变更日志？如果是这样，那么您不需要使用挂毯或休眠。您可以查看[http://www.liquibase.org/](http://www.liquibase.org/)或谷歌类似的东西。

# objective-c - 集群注解

> ID：15792268
> 
> 赞同：0
> 
> 时间：2013-04-03T16:00:04.407
> 
> 标签：objective-c, xcode, annotations, mkmapview

我的应用程序使用注释在地图上显示一些位置。注释还具有自定义图像，并且一些重要的注释彼此非常接近，因此很难单击它们。我记得谷歌地球有某种实现，其中彼此接近的注释被捆绑到 1 个注释中，当点击它时，它会显示捆绑的注释。我尝试在 Google 地球中再次执行此操作，但似乎他们删除了该功能。

但是我正在寻找这样的东西，所以即使它们彼此靠近也可以点击我的注释。有人可以将我推向正确的方向吗？

**编辑** 我也为 android 创建了这个并发现了这个：[https ://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:50:21.113

通过根据跨度级别隐藏和显示注释来解决此问题：

```
if (mapView.region.span.latitudeDelta > 0.05) {
    // Zoomed out so show the clustered annotation
}
else {
    // enough zoomed in so the annotations wont overlap. Show the independent annotations
} 
```

# activemq - ActiveMQ 到 HornetQ 导致异常

> ID：15792273
> 
> 赞同：4
> 
> 时间：2013-04-03T16:00:12.817
> 
> 标签：activemq, hornetq

我正在尝试使用 ActiveMQ 将 JMS 消息发送到使用 HornetQ 的服务器，并且遇到了一些困难。我认为这是一件完全合理的事情，所以我怀疑我的结果存在某种（可能是微不足道的）操作员错误。有什么可以在这里发现或我应该看看的东西吗？尝试创建会话时发生错误：

最后，我正在执行以下操作：

```
 final ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_USER, ActiveMQConnection.DEFAULT_PASSWORD, serverUrl);
 connection = connectionFactory.createQueueConnection();
 session = connection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE); 
```

在服务器端，他们看到以下内容：

```
11:53:06,428 ERROR [org.hornetq.core.protocol.core.impl.RemotingConnectionImpl] (Old I/O server worker (parentId: 1778858866, [id: 0x6a073b72, -hostname-])) 
Failed to decode: java.lang.IllegalArgumentException: Invalid type: 1
at org.hornetq.core.protocol.core.impl.PacketDecoder.decode(PacketDecoder.java:550) [hornetq-core-2.2.13.Final.jar:]
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:34:03.803

您不能使用 ActiveMQ 库与 HornetQ 对话。每个都有自己的协议，您需要适当的库才能进行交谈，这是双向的。您不能使用 HornetQ 库与 ActiveMQ 对话。

您可以使用 stomp 与 HornetQ 对话，这是 HornetQ 和 ActiveMQ 之间的通用库。

# mysql - MYSQL 联合并合并来自重复行的金额

> ID：15792274
> 
> 赞同：1
> 
> 时间：2013-04-03T16:00:16.593
> 
> 标签：mysql, left-join, union

我正在尝试将来自两组不同表的结果组合成一个结果。到目前为止，这是我的查询：

```
SELECT * 
FROM ( SELECT product_table1.product_id as product_id, sum(product_table1.qty) as quantity, sum(product_table1.paid) as amount  
FROM product_table1
LEFT JOIN table2 ON table2.id = product_table1.table2_id
WHERE product_table1.product_id IN ( SELECT id FROM products_table WHERE active = 'yes' )
AND table2.active = 'yes'
GROUP BY product_id

UNION 

SELECT product_table2.product_id as product_id, sum(product_table2.qty) as quantity, sum(product_table2.paid) as amount 
FROM product_table2
LEFT JOIN table3 ON table3.id = product_table2.table3_id
WHERE product_table2.product_id IN ( SELECT id FROM products_table WHERE active = 'yes' )
AND table3.active = 'yes'
GROUP BY product_id

) AS product_sales 
```

以下是数据返回的方式：

```
product_id | quantity | amount
1            100        200
2            200        300
3            300        600
1            500        700
4            200        200 
```

我试图弄清楚如何最好地采用这两组数字（每组具有相同数量的列和数据类型），并将它们组合成一组结果，而不必将 php 带入其中。这可能吗？

我找到了其他一些解决方案，但不确定它们是否符合我想要做的。我认为我需要[的另一种解决方案的示例，但不确定..](https://stackoverflow.com/questions/6784969/mysql-union-query-duplicate-group-by-problem)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:09:16.810

`GROUP BY`在你的外部使用，`SELECT`而`UNION ALL`不是`UNION`

```
SELECT product_id,  
       SUM(quantity) as quantity,
       SUM(amount) as amount
  FROM ( 
    SELECT product_table1.product_id as product_id, 
           SUM(product_table1.qty) as quantity, 
           SUM(product_table1.paid) as amount  
      FROM product_table1
      LEFT JOIN table2 ON table2.id = product_table1.table2_id
     WHERE product_table1.product_id IN ( SELECT id FROM products_table WHERE active = 'yes' )
       AND table2.active = 'yes'
     GROUP BY product_id
     UNION ALL
    SELECT product_table2.product_id as product_id, 
           SUM(product_table2.qty) as quantity, 
           SUM(product_table2.paid) as amount 
      FROM product_table2
      LEFT JOIN table3 ON table3.id = product_table2.table3_id
     WHERE product_table2.product_id IN ( SELECT id FROM products_table WHERE active = 'yes' )
       AND table3.active = 'yes'
     GROUP BY product_idc) AS product_sales
 GROUP BY product_id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T16:04:12.960

只需进行聚合：

```
select product_id, sum(quantity) as quantity, sum(amount) as amount
from (<your query here>)
group by product_id 
```

我要补充一点，您可能想要使用`union all`而不是`union`. 如果两个源返回完全相同的值，您可能希望保留两者（`union`删除重复项）。

# java - 如何在 GAE/J 中获取实体大小？

> ID：15792275
> 
> 赞同：5
> 
> 时间：2013-04-03T16:00:20.070
> 
> 标签：java, google-app-engine

GAE 文档提到最大实体大小为 1Mb。由于我在实体中存储了大量数据，因此我想知道何时接近此限制。

我知道 GAE/Pyhon 方法[`model_to_protobuf(..)`](https://developers.google.com/appengine/docs/python/datastore/functions#model_to_protobuf)，但我找不到 Java 的任何东西。

我也知道 GAE 在内部使用 protobuf 来序列化实体，所以我也可以这样做。但我想避免重复代码，因为 GAE 已经在后台执行此操作。

是否有一种编程方式来获取 Java 中的实体大小，最好是在实际存储实体之前？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:31:28.770

看起来[这种方法](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/EntityTranslator#convertToPb%28com.google.appengine.api.datastore.Entity%29)应该适合您：

```
public static EntityProto convertToPb(Entity entity) 
```

并与您在 Python 方面找到的内容相匹配。

# php - Javascript 无法解释返回的 xml

> ID：15792277
> 
> 赞同：2
> 
> 时间：2013-04-03T16:00:29.100
> 
> 标签：php, javascript, xml, ajax

似乎我的 javascript 没有收到我的 php 发回的 xml 文档。php代码：

```
$domtree = new DOMDocument('1.0', 'UTF-8');

/* append it to the document created */
$xmlRoot = $domtree->appendChild($domtree->createElement("root"));

foreach (glob('./img/photos/*.*') as $filename) {
    //echo $filename;
    $xmlRoot->appendChild($domtree->createElement("image",$filename));
}

/* get the xml printed */
echo $domtree->saveXML(); 
```

上面代码的输出如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<root><image>./img/photos/2012-02-26 17.02.12.jpg</image>
<image>./img/photos/2012-03-09 08.21.48.jpg</image>
<image>./img/photos/2012-07-21 14.09.39.jpg</image>
<image>./img/photos/2012-07-25 15.25.17.jpg</image>
<image>./img/photos/2012-08-04 17.54.38.jpg</image>
<image>./img/photos/2012-08-04 23.36.30.jpg</image>
<image>./img/photos/2012-08-06 06.08.43.jpg</image>
<image>./img/photos/2012-08-07 20.57.34.jpg</image>
<image>./img/photos/2012-08-09 20.40.11.jpg</image>
<image>./img/photos/2012-08-25 20.54.05.jpg</image>
<image>./img/photos/2012-09-07 11.19.50.jpg</image>
<image>./img/photos/2012-09-08 15.53.27.jpg</image>
<image>./img/photos/2013-01-30 19.19.16.jpg</image>
<image>./img/photos/2013-01-31 09.48.39.jpg</image></root> 
```

用 AJAX 调用它，当我调用 AJAXRequest.responseXML 时，我得到空值。

编辑：AJAX 请求代码：

```
function requestImages()
{
    request=new XMLHttpRequest();
    request.open("GET", "getPhotos.php");
    request.onreadystatechange=showPhotos;
    request.send();
}

function showPhotos()
{
    if ((request.readyState == 4)) {
        doc=request.responseXML; // This returns null
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:10:38.480

尝试在 php 中发送内容类型，以便 AJAX 知道这是一个 xml 并对其进行解析（请记住，这必须在 any 之前完成`echo`）：

```
header("Content-Type: text/xml"); 
```

这也可以直接在 javascript (with `overrideMimeType()`) 中强制执行，但最好在 php 中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:06:20.990

如果您没有使用任何第三方库，请尝试这种代码片段（根据您的要求进行修改）

```
var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request.responseText, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null); 
```

请注意，它正在使用 request.responseText 如果您将`header("Content-type: text/xml");`在标题中添加内容类型，它肯定会获得返回的 xml

**更新**

要解析 xml，您可以使用以下代码片段：

```
function parseXml(str) {
  if (window.ActiveXObject) {
    var doc = new ActiveXObject('Microsoft.XMLDOM');
    doc.loadXML(str);
    return doc;
  } else if (window.DOMParser) {
    return (new DOMParser).parseFromString(str, 'text/xml');
  }
}

function doNothing() {} //use this for some processing at run time 
```

# download - 是否存在要在我自己的服务器上安装的任何文档查看器？

> ID：15792279
> 
> 赞同：0
> 
> 时间：2013-04-03T16:00:32.163
> 
> 标签：download, document, viewer

我正在寻找至少用于办公文档和 PDF 文档的文档查看器。它必须至少基于 HTML5。

我找到了 Crocodoc，但它还没有可用的 OnPremise 版本。我也找到了 FlexPaper，但它只适用于 pdf 文档......

任何的想法？你知道有什么产品吗？？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T18:51:38.923

至于基于 HTML5 的产品，Snowbound Software 有一个支持办公文档和 PDF 文档的查看器，并且可以在您的服务器上。

# replication - 如何使用包含值而不是列的 RavenDB SQL 复制来复制数组？

> ID：15792283
> 
> 赞同：0
> 
> 时间：2013-04-03T16:00:48.600
> 
> 标签：replication, ravendb

我正在尝试复制存储在 RavenDB 文档中的数组，如下所示：

```
{
  "CreatedAt": "2013-04-03T13:37:12.0261044",
  "IsMostRecent": false,
  "ClientId": "clients/641",
  "ChangeReason": "CommunityBasedAssessmentNewClient",
  "StatusType": "Live",
  "Start": "2013-04-01T00:00:00.0000000",
  "End": "2013-04-01T00:00:00.0000000",
  "EndCharge": null,
  "AssessmentDate": null,
  "Correspondence": null,
  "Service": {
    "$type": "Cordia.Care.Core.Models.Personalisation, Cordia.Care.Core",
    "IsDirectBilling": false,
    "Visits": [
     {
        "DayOfWeek": "Monday",
        "Start": "09:00:00",
        "End": "11:00:00",
        "AdditionalResources": false,
        "SocialWork": {
        "Duration": 120,
        "BillableTo": "SocialWork",
        "VisitTasks": [
        "DressingAssistance"
      ]
    },
    "PrivateWork": {
      "Duration": 0,
      "BillableTo": "Private",
      "VisitTasks": []
    }
  } 
```

我遇到的问题是保存“VisitTasks”，我在这部分使用以下脚本但没有任何乐趣：

```
replicateToSocialWork( 
{
        Duration: visit.SocialWork.Duration,
        BillableTo: visit.SocialWork.BillableTo
});

for (var i=0; i<this.Service.Visits.SocialWork.VisitTasks.length; i++)
{
    var visitTask = this.Service.Visits.SocialWork.VisitTasks[i];
    replicateToSWVisitTask(
    {
        VisitTask: visitTask
    });
}

replicateToPrivateWork( 
{
        Duration: visit.PrivateWork.Duration,
        BillableTo: visit.PrivateWork.BillableTo
});

for (var i=0; i<this.Service.Visits.PrivateWork.VisitTasks.length; i++)
{
    var visitTask = this.Service.Visits.PrivateWork.VisitTasks[i];
    replicateToPWVisitTask(
    {
        VisitTask: visitTask
    });
} 
```

这是正在运行的更大脚本的一部分，只是这部分我无法工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:32:02.797

执行时：

```
 replicateToPWVisitTask(
 {
     VisitTask: visitTask
 }); 
```

您正在尝试将序列化为 json 的 visitTask 对象复制到 VisitTask。如果要发送值，则需要提取值。

# r - R中的Arima结构

> ID：15792291
> 
> 赞同：2
> 
> 时间：2013-04-03T16:01:03.367
> 
> 标签：r

我对在 R 中使用 arima 函数有疑问。如果我有一组数据 x1，我想弄清楚哪个是最好的 Arima 模型：

```
> arima(diff(x1),order=c(1,0,1))
Series: diff(x1) 
ARIMA(1,0,1) with non-zero mean 

Coefficients:
      ar1      ma1  intercept
    0.3835  -1.0000      3e-03
s.e.  0.1082   0.0339      6e-04

sigma^2 estimated as 0.005576:  log likelihood=88.75
AIC=-169.5   AICc=-168.95   BIC=-160.13

> arima(x1,order=c(1,1,1))
Series: x1 
ARIMA(1,1,1)                    

Coefficients:
     ar1      ma1
  0.4238  -0.8984
s.e.  0.1202   0.0489

sigma^2 estimated as 0.006367:  log likelihood=84.98
AIC=-163.96   AICc=-163.63   BIC=-156.93 
```

为什么我得到不同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:09:09.510

为了使您的结果相等，只需通过以下方式删除均值：

```
> arima(diff(x11), order = c(1,0,1), include.mean=FALSE)
> arima(x1, order = c(1,1,1)) 
```

有关详细说明，请参阅[此站点。](http://www.stat.pitt.edu/stoffer/tsa3/Rissues.htm)

# android - 更改主要活动的标题

> ID：15792295
> 
> 赞同：0
> 
> 时间：2013-04-03T16:01:09.523
> 
> 标签：android, android-layout, android-actionbar, android-manifest

我在更改 Main Activity 的名称时遇到问题。我想删除它。作为我使用的第一种方法`this.getActionBar().setDisplayShowTitleEnabled(false);`。它可以工作，但在 MainActivity 启动之前`title`出现然后消失。这很烦人，所以我尝试编辑`Manifest.xml`，但出现了一个有趣的问题。如果我设置`android:label=""`为`activity`属性应用程序名称消失！这怎么可能发生？我正在设置`android:label`标签`application`，但应用程序不注意这一点并从标签中获取`android:label`价值。`activity`我该如何解决？感谢您的阅读。

```
<application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:theme="@style/Theme.Example" 
        android:label="@string/app_name"
        android:logo="@drawable/bobincut">
        <activity
            android:label=""
            android:name="com.example.bakumovies.MainActivity"
            android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:02:40.063

您可以通过两种方式完成此操作：

最简单的方法是在您的活动的 onCreate() 中添加这一行：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

还有另一种解决方案：

将此主题添加到您的 styles.xml：

```
<style name="NoTitleTheme" parent="@style/Theme.Example">
    <item name="android:windowNoTitle">true</item>
</style> 
```

然后，在你的活动中设置这个主题（注意我在这里添加的 android:theme 标签）：

```
<activity
        android:label=""
        android:theme="@style/NoTitleTheme"
        android:name="com.example.bakumovies.MainActivity"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:04:22.127

你有没有在你的活动中尝试过这个：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:02:49.877

创建一个从样式继承的新`NoTitle`样式：

```
<style name="Theme.Splash" parent="@android:style/Theme.NoTitleBar.Fullscreen">
    <item name="android:windowBackground">@drawable/my_splash_logo</item>
</style> 
```

创建一个应用样式的新 SplashActivity 类：

```
<activity
  android:name="SplashActivity"
  android:theme="@style/Theme.Splash"
  android:label="@string/app_name"
  android:icon="@drawable/icon">
  <intent-filter android:label="@string/app_name">
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
</activity> 
```

在您的 SplashActivity 中，启动您真正的 HomeActivity：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // possibly use CLEAR_TOP flag here
    startActivity(new Intent(HomeActivity.class));
}

public void onResume() {
    super.onResume();
    Finish();
} 
```

这将具有在应用启动时抑制标签的效果，应用名称将出现在启动器和最近的应用中，由于 removed ，您不会得到空 ref `ActionBar`。我认为满足您的所有标准。

# c# - 如何以编程方式移动文本块位置

> ID：15792299
> 
> 赞同：2
> 
> 时间：2013-04-03T16:01:21.903
> 
> 标签：c#, windows-phone-8, textblock

在我的 WP8 中，我想将文本块位置从现有位置移动到新位置（x，y）。我尝试使用

```
Canvas.SetTop(text1, y);
Canvas.SetLeft(text1, x); 
```

但它无法更改文本块的位置。有没有最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:15:55.930

为了使用 Canvas.SetLeft 和 SetTop，文本框需要是 Canvas 控件的子控件。如果控件位于不同的控件中，这些方法将不起作用。

或者，您可以执行以下操作：

```
text1.RenderTransform = new TranslateTransform {
    X = 10,
    Y = 20
} 
```

在这种情况下，控件不需要位于画布内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T16:28:53.173

如果您想在给定的网格/画布内移动文本框，您可以以编程方式设置边距。

```
 textBlock.Margin = new Thickness(left, top, right, bottom); 
```

只需根据您要移动的位置/方式调整值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:04:45.177

调用元素[`UpdateLayout()`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.updatelayout%28v=vs.95%29.aspx)。`Canvas`

# jquery - 折叠元素的jQuery传播问题

> ID：15792307
> 
> 赞同：0
> 
> 时间：2013-04-03T16:01:32.883
> 
> 标签：jquery, collapse, stoppropagation, event-propagation

我有一些 jQ 逻辑依赖于 Bootstrap 的 .collapse 事件“显示”和“隐藏”，其中一个可折叠元素内部是一个具有可折叠行的表格。当显示或隐藏子折叠中的一行时，它也会触发父 Div 的显示/隐藏事件。

#carriers 中的所有内容都由 API 返回。以下是返回的示例：

```
<div class="alert alert-success">
    <h4>Quote ID</h4>
    Write your Quote ID on your Bill of Lading to ensure propper billing. <br />
    <em>Your Quote ID is: <strong>QID-107</strong> </em>
</div>

<span class="hide" id="ctsi_query_id">331</span>

<table class="table table-condensed table-bordered">

    <thead>

        <tr class="center-text">

            <th>Carrier</th>
            <th>Transit</th>
            <th>Rated</th>
            <th class="benchmark">Benchmark</th>
            <th>True Cost</th>
        </tr>
    </thead>
    <tbody>         
        <tr class="cell-dark" >
            <td class="btn-collapse" data-target="#row_CTI1">ABC Dummy Transit(ABCD)</td>
            <td>6 - Days</td>
            <td>
                                        $97.46
                                </td>
            <td class="benchmark">
                                        $128.88
                                </td>
            <td>

                    $113.17

            </td>
            <td> <input type="radio" name="carrier" value="CTI1" /> </td>

        </tr>

        <tr>

            <td colspan="7">

                <div class="row">

                    <div class="span10 collapse" id="row_CTI1">

                        <div class="span2">

                            <strong>Carrier Contact:</strong>

                        </div>

                        <div class="span2">

                            N/A

                        </div>

                        <div class="span4 offset1">

                                                                <div class="row">

                                    <div class="span2">

                                        <strong>Freight Charges</strong>

                                    </div>

                                    <div class="span2 ">

                                        $84.75

                                    </div>

                                </div>

                                <div class="row">

                                    <div class="span2">

                                        <strong>Fuel Charges</strong>

                                    </div>

                                    <div class="span2">

                                        $12.71

                                    </div>

                                </div>

                                <div class="row">

                                    <div class="span2">

                                        <strong>Rated Total</strong>

                                    </div>

                                    <div class="span2">

                                        $97.46

                                    </div>

                                </div>

                                                                <div class="row">

                                    <div class="span2">

                                        <strong>Benchmark</strong>

                                    </div>

                                    <div class="span2">

                                        $128.88

                                    </div>

                                </div>

                                                                <div class="row">

                                    <div class="span2">

                                        <strong> Savings </strong>

                                    </div>

                                    <div class="span2">

                                        $31.42

                                    </div>

                                </div>

                            <div class="row">

                                <div class="span5">

                                    <div class="center-text"><strong> Accessorial Charges </strong></div>

                                </div>

                            </div>

                            <div class="row">

                                <div class="span2">

                                    <strong> Accessorial Totals </strong>

                                </div>

                                <div class="span2 ">

                                    $0.00

                                </div>

                            </div>
                                                              <div class="row">

                                    <div class="span2">

                                        <strong> True Cost </strong>

                                    </div>

                                    <div class="span2 ">

                                        $113.17

                                    </div>

                                </div>

                        </div>

                    </div>

                </div>

            </td>

        </tr>
    </tbody>
</table> 
```

这是 HTML 部分：

```
<div class="row">

    <div class="span10">

        <h3 class="heading" data-toggle="collapse" data-target="#carrierSelect">Carriers</h3>

        <div class="bg-light collapse in bg-light" id="carrierSelect">

            <div class="row spacer-top spacer-bottom">

                <div class="span2 offset8">
                    <a href="#" class="btn btn-primary" id="findCarriers">Get Quote</a>
                </div>

            </div>

            <div class="row spacer-bottom collapse" id="carrierLoad">
                <div class="span2 offset4"><img class="center-block" src="view/img/load.gif" /></div>
            </div>

            <div class="row">

                <div class="span10 bg-x-light collapse in spacer-top" id="carriers">

                </div>

            </div>

        </div>

    </div>

</div> 
```

这是jQuery：

```
//does the actual collapsing
$('.btn-collapse').live('click', function(event){

    var target = $(this).attr('data-target');

    $(target).collapse('toggle')

    event.stopPropagation();

    return false;

});

//these two should stop the propagation, but don't
$('#carriers').find('.collapse').live('hidden', function(event){
    event.stopPropagation();
    return false;
});

$('#carriers').find('.collapse').live('shown', function(event){
    event.stopPropagation();
    return false;
});

//this is the work-horse function, it does all the important stuff
function processLCCRequest(callback){

        var data = new Object();

        data.general = {
            'code': $('#warehouse').val(),
            'shipper': $('#shipper_zip').val(),
            'consignee': $('#consignee_zip').val(),
            'shipment_type': $('#direction').val(),
            'total_weight': $('#total_weight').text(),
        };

        data.accessorials = [];

        $('#accessorials').find('input:checkbox:checked').each(function(acc_index){

            data.accessorials.push($(this).val());

        });

        data.units = [{
            'num_of': ($('#total_pallets').val().length > 0) ? $('#total_pallets').val() : 1,
            'type': 'pallet',
            'weight': 0
        }];

        data.products = [];

        $('#items tr').each(function(index){

            var weight = parseFloat($(this).find('.weight').val(), 10);

            if(isNaN(weight)) {
                //setError('Empty Fields', 'At least one `weight` field was left empty.', 'warning');
                return; //same as continue here. Go figure.
            }

            data.products.push({
                'pieces': 1,
                'weight': parseFloat($(this).find('.weight').val(), 10),
                'class': parseInt($(this).find('.class').val(), 10)
            }); 

        });

        var company = $('#company').val();

        if(company != undefined) {
            company = "&d=" + company;
        } else {
            company = '';
        }

        $.post('index.php?p=api&r=html&c=ctsi&m=quote' + company, data, function(resp){
            try {

                var json = $.parseJSON(resp);
                handleMessages(json);

            } catch(err) {

                $('#carriers').html(resp);

            }

        });

        callback();

        return false;

    };

    //This starts the chain reaction by showing the Loading GIF
    $('#findCarriers').click(function(){
        $('#carrierLoad').collapse('show')
        return false;
    });

    //When the loading image is shown, hide the carrier display
    $('#carrierLoad').on('shown', function(){
        $('#carriers').collapse('hide');
    });

    //when the carriers are hidden, call the main function, 
    //pass the hide command for the loading GIF as the callback
    $('#carriers').on('hidden', function(){
        processLCCRequest(function(){
            $('#carrierLoad').collapse('hide');
        });
    });

    //When the loading GIF is hidden, show the carrier display
    //also, move the page to the top of the carrier display
    $('#carrierLoad').on('hidden', function(){
        alert('hey there');
        $('#carriers').collapse('show');
        $('html, body').animate({
                scrollTop: $("#carriers").offset().top
            }, 1000
        );
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:20:43.933

$.live() 发生在所有内容都已经冒泡到顶部之后，因为它绑定到文档。将 .live() 更改为以下内容解决了该问题：

```
$('#carriers').on("hidden", '.collapse', function(event){
    event.stopPropagation();
    return false;
}); 
```

# javascript - jquery向上遍历父母以查找主要父母的前一个元素

> ID：15792312
> 
> 赞同：0
> 
> 时间：2013-04-03T16:01:50.793
> 
> 标签：javascript, jquery, dom

的HTML：

```
<li>
    <h2 class="tree_header"><input type="checkbox" name="no_name" class="visual_astetics" data-headcheck="yes"> Network Throttle</h2>
    <ul class="tree_collapse">
        <li>
            <ul>
                <li>Throttle Network speeds to <input type="text" name="job_nw_throttle_rate" id="job_nw_throttle_rate" style="width:50px;" placeholder="no limit" data-multiple="yes" data-autosave="postHandler" data-autosave_end="" data-autosave_uri="/api/jobs/setproperty"><span class="small_text italic">(kbits/s)</span></li>
                <li>
                    <h2 class="tree_header">Set Start &amp; Stop times for Network Throttle</h2>
                    <ul class="tree_collapse">
                        <li>
                            <ul>
                                <li>
                                    Throttle starts at <input type="text" name="job_nw_throttle_start" id="job_nw_throttle_start" style="width:30px;" placeholder="0" data-multiple="yes" data-autosave="postHandler" data-autosave_end="" data-autosave_uri="/api/jobs/setproperty"> (local time / 24-Hour format)
                                </li>
                                <li>
                                    Throttle finishes at <input type="text" name="job_nw_throttle_end" id="job_nw_throttle_end" style="width:30px;" placeholder="0" data-multiple="yes" data-autosave="postHandler" data-autosave_end="" data-autosave_uri="/api/jobs/setproperty"> (local time / 24-Hour format)
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</li> 
```

这是一个更大的数据集的一部分。我想要做的是，当我发现此示例中包含的任何输入都加载了与其占位符不等效的数据时，会向上遍历`ul/li`集合堆栈到顶部`li`。`li`如本例所示，假设有多个 main 是公平的。但在这种情况下，我对元素中具有类的复选框`visual_astetics`感兴趣`h2`。到目前为止，在寻找不同的东西并在此基础上做其他事情时，我已经拥有了我想要工作的一切。但是，如果您要进行程序化，我似乎无法“找到”该复选框。

我尝试过使用`parents()`,`parentsUntil()`和`closest()`其他几个以及它们的组合。但是还没有找到复选框或其所在的 H2。要假设的另一件事是，就当前结构而言，HTML 可能无法编辑，因此如果您将通过 id 或 class 或其他在该顶部添加停止点`li`可能不是目前可能。假设这些层可以比这里显示的更深，这也很好。综上所述，任何想法如何仍然可以找到该复选框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:14:03.660

也许您可以将该`parents()`函数与`:has`选择器结合起来，找到具有匹配复选框的父级，然后找到该复选框。就像是

假设`changedInput`是一个 jquery 对象，其中包含不再匹配占位符的输入，例如#job_nw_throttle_start。

```
var visualAstheticsCheckbox = changedInput.parents('li:has(input.visual_asthetics)').find('input.visual_asthetics'); 
```

所以它应该沿着树向上走，直到它找到一个`li`在其中某处带有该类的复选框，然后在该元素内找到该复选框。

# phantomjs - QUnit + PhantomJS：asyncTest 永远不会返回

> ID：15792315
> 
> 赞同：5
> 
> 时间：2013-04-03T16:01:55.957
> 
> 标签：phantomjs, qunit

我在尝试设置 PhantomJS 时遇到了问题，所以我可以通过 Travis CI 对我的 JavaScript 项目进行持续集成。

基本上，即使是最简单的`asyncTest`也永远不会回来。`node`在使用 Chrome 等浏览器或在浏览器中进行测试时，它可以正常工作。

我的`asyncTest`样子是这样的：

```
asyncTest ("async test", function() {
    expect(1);
    console.log("Beginning test...");
    setTimeout(function() {
        ok(true, "true is true");
        start();
        console.log("Test should now end...");
    }, 200);
}); 
```

我已经用最少的代码建立了一个存储库来重现问题：

[https://github.com/siovene/phantomjs-async-test](https://github.com/siovene/phantomjs-async-test)

我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T22:40:25.273

萨尔瓦多，

嘿。我发现问题出在 qunit-logging.js 中。当我从您的 index.html 中删除它时，测试运行良好。

这是我在 phantomjs 中运行 qunit 所做的。\

*   我注释掉了 qunit-logging.js 参考。
*   我从 qunit 树下载了 runner.js 插件：[https ://github.com/jquery/qunit/tree/master/addons/phantomjs](https://github.com/jquery/qunit/tree/master/addons/phantomjs)
*   我把它和你的主文件放在同一个目录中（在我的例子中，它是 c:\temp\qunit_test）。
*   然后我从命令行运行它：

C:\temp\qunit_test>c:\phantom\phantomjs.exe runner.js file:///c:/temp/qunit_test/index.html

```
Results:
Beginning test...
Test should now end...
Took 2045ms to run 1 tests. 1 passed, 0 failed. 
```

此外，我确实更新了 qunit 源以从 cdn 运行。我不知道您使用的是什么版本（我只能说 2012 年的版本），我想使用最新版本进行故障排除。所以这是我的 index.html 文件：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Test Suite</title>

        <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

    </head>
    <body>
        <div id="qunit"></div>
        <div id="qunit-fixture"></div>

            <!-- qunit -->
        <link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.12.0.css" type="text/css" media="screen" />
        <script src="http://code.jquery.com/qunit/qunit-1.12.0.js"></script>
        <!--<script src="qunit-logging.js"></script>-->

        <script type='text/javascript'>
            module("lib-test");

            asyncTest ("async test", function() {
                expect(1);
                console.log("Beginning test...");
                setTimeout(function() {        
                    start();
                    ok(true, "true is true");
                    console.log("Test should now end...");
                }, 2000);
            });     

        </script>

    </body>
</html> 
```

# ruby - RubyMine：“表达式可以简化”但是如何？

> ID：15792319
> 
> 赞同：4
> 
> 时间：2013-04-03T16:02:02.400
> 
> 标签：ruby, rubymine

如何简化这个表达式？

```
m.immutable = params[:immutable] || false 
```

RubyMine 建议：“可以简化表达式。此检查警告布尔函数中的冗余部分”，但没有说明要做什么。

这个想法是如果“不可变”参数没有传递，则分配 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:16:06.610

只需单击 Alt+Enter 即可显示 RubyMine

```
m.immutable = params[:immutable] 
```

在某些情况下，这可以帮助您，但如果您没有传递参数，那么 immutable 将为零，这可能不是您所期望的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-22T19:11:11.470

这是实现此目的的更好方法：

```
m.immutable = !! params[:immutable] 
```

Using`!!`是一种 Ruby 技巧，可确保将表达式转换为布尔值。例如，即使`params[:immutable]`计算结果为`nil`，`!!`也会将其转换为`false`-- 否则它将是`true`

# android - 如何使多个文本视图可选择为一个？

> ID：15792321
> 
> 赞同：0
> 
> 时间：2013-04-03T16:02:13.600
> 
> 标签：android, xml, textview

我有一个生成文本视图列表的 XML 页面。我必须让它们单独使用，否则将无法正常工作。他们来了：

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/name_of_var_code"
        android:typeface="monospace" 
        android:textSize="16sp"
        android:textIsSelectable="true"
    />

    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/equals"
        android:typeface="monospace" 
        android:textSize="16sp"
        android:textIsSelectable="true"
    />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/val_of_var_code"
        android:typeface="monospace" 
        android:textSize="16sp"
        android:textIsSelectable="true"
    /> 
```

有没有办法让整个组而不是单独选择？谢谢，罗斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T12:16:27.400

您可以将它们放在 a 中`LinearLayout`并设置一个 click 方法，当用户点击其中任何一个时，他们实际上是点击了他们所在的布局并给人一种他们是一个整体的印象。

# android - 重新加载应用程序后，Android 会忽略 XML 中的 autoOrients 设置

> ID：15792322
> 
> 赞同：2
> 
> 时间：2013-04-03T16:02:17.153
> 
> 标签：android, apache-flex, mobile, flex4.6

我的 Android 应用程序有一个小问题。在我的控制 XML 中，我有

```
<autoOrients>false</autoOrients>
<aspectRatio>landscape</aspectRatio> 
```

这也适用于应用程序的第一次启动。该应用程序以横向模式启动，一切正常。然后，我单击主页按钮（或手机进入待机模式）。现在我从任务列表中选择应用程序或单击应用程序图标。该应用程序现在处于纵向模式（他不是为此而设计的），并且由于我禁用了 autoOrients，我无法切换回横向模式。

这是 Flex 4.6 中的错误（我使用 Adob​​e Flash Builder 4.6）还是缺少其他一些开关？

最好的问候 KjM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:59:59.200

我遇到了类似的问题；我相信某些版本的Android。我将这样的代码添加到我的主应用程序文件中。它使用 applicationComplete 和 activate 事件在运行时设置应用程序的纵横比。它是描述符设置变得不稳定时的备份。

```
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                            xmlns:s="library://ns.adobe.com/flex/spark" 
                            firstView="something"   
applicationComplete="viewnavigatorapplication1_applicationCompleteHandler(event)"
activate="viewnavigatorapplication1_activateHandler(event)">

    <fx:Script>
        <![CDATA[

            import mx.events.FlexEvent;

            protected function viewnavigatorapplication1_applicationCompleteHandler(event:FlexEvent):void
            {
                this.stage.setAspectRatio( StageAspectRatio.LANDSCAPE );
            }

            protected function viewnavigatorapplication1_activateHandler(event:Event):void
            {
                if(this.stage){
                    this.stage.setAspectRatio( StageAspectRatio.LANDSCAPE );
                }
            }

        ]]>
    </fx:Script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:00:46.077

添加

```
<activity
            android:name="xxxx"
            android:label="xxxxx"
            android:screenOrientation="landscape" > 
```

到清单中的活动标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T01:23:18.990

在 main-app.xml 中输入以下值

```
<aspectRatio>portrait</aspectRatio>
<autoOrients>false</autoOrients> 
```

无论移动设备的方向如何，您的移动应用程序现在都将以纵向纵横比启动。您的应用现在将忽略移动设备的旋转。

# linux - Linux Bourne shell - 目录可写检查总是返回“不可写”

> ID：15792324
> 
> 赞同：0
> 
> 时间：2013-04-03T16:02:22.340
> 
> 标签：linux, shell

在测试目录是否不可写时，此函数总是返回 True。谁能向我解释为什么？只有“目录可写”（到目前为止）失败了。但我想包含整个函数，以提供更多关于事先发生的事情的细节。

此函数接受“之前”和“之后”字符串，通过用破折号替换所有空格来重命名文件和/或目录。我只是打算使用“重命名”功能，但是我需要遵循一个预先构建的骨架脚本。

更新的脚本：

```
 my_rename()
    {
        echo "Trying: myrename $1 $2"

        # implement this function to my_rename $1 to $2
        # The following error checking must happen:

        # 1\. check if the directory where $1 resided is writeable, if not then report an error
        # Is it a directory or a file
        if [ -d $1 ]
        then
            dnam=$1
            ftyp=$"dir"
        else
            # It's a file. Let's get the dirname
            dnam=$(dirname $1)\"
            ftyp=$"file"
        fi

        echo "dnam $dnam"

        # Is the directory writable
        errcd=0
        if [ ! -w "$dnam" ]
        then
            # Not writable. Show an error.
            echo "Directory $dnam is not writable by $(whoami)"
            errcd=1
        fi

        # 2\. check if "$2" exists -if it does report and error and don't do the mv command
        if [ "$errcd" -eq 0 ] && ([ -f $2 ] || [ -d $2 ])
        then
            if [ $ftyp = "file" ]
            then
                echo "File $2 already exists"
            else
                echo "Directory $2 already exists"
            fi
            errcd=1
        fi

        # 3\. check the status of the mv command and report any errors
        if [ "$errcd" -eq 0 -a -e $2 ]
        then
            exec "mv -f $1 $2"
            if [ $? -gt 0 ]
            then
                echo "Command failed: myrename $1 $2"
            fi
        fi
    }

    bryan@bryan-VirtualBox:~/renametest$ ./script3.sh -f ~/renametest
    Trying: myrename "/home/bryan/renametest/1 2" "/home/bryan/renametest/1-2"
    dnam "/home/bryan/renametest"
    Directory "/home/bryan/renametest" is not writable by bryan

    drwxr-xr-x  3 bryan bryan  4096 2013-04-03 17:10 renametest 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T06:24:34.687

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

回复： -w 问题，看上游。如果第一个参数是一个目录 dnam 设置为它，但如果它不是一个目录或不存在，你这样做： dnam=$(dirname $1)\" （最后转义的 " 表明出了什么问题。）您显示的输出示例已被编辑，或者正如转义的 " 所暗示的那样，您将这些值传递给带有引号的函数作为值的一部分 - 坏主意，我几乎可以向您保证文件/目录名称系统不包含引号。看起来这个问题是在你调用这个函数的时候，而不是在函数中。——威廉

# opensso - 具有静态值的 OpenSSO SP 和属性映射器

> ID：15792326
> 
> 赞同：0
> 
> 时间：2013-04-03T16:02:38.810
> 
> 标签：opensso

我想从我的 SP 配置属性映射器。默认情况下，映射器是 com.sun.identity.saml2.plugins.DefaultSPAttributeMapper 类。我的问题是我还需要放一个静态值。这意味着对于其中一个属性，值将始终相同，它将是一个简单的字符串。有没有办法使用默认的映射器类来做到这一点，或者我需要编写自己的映射器类？如果默认不提供这样的功能，也许还有其他我可以使用的映射器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:38:42.003

[https://bugster.forgerock.org/jira/browse/OPENAM-2184](https://bugster.forgerock.org/jira/browse/OPENAM-2184)是这里的一个相关问题，它已经修复，但尚未在任何发布版本中。这意味着现有版本中没有针对静态属性映射的开箱即用解决方案，您需要实现自己的 AttributeMapper 并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T18:50:23.667

您可以使用默认属性映射器作为模板。在其中添加代码以检查带有“常量：”前缀的局部变量，后跟常量值。这样，它就不会在 LDAP 中查询本地变量。您可以像往常一样将其映射到任何 SAML 属性。

# javascript - Felixge/Node-Mysql 单独的连接文件

> ID：15792331
> 
> 赞同：2
> 
> 时间：2013-04-03T16:02:50.273
> 
> 标签：javascript, mysql, database, node.js

我正在尝试在 Node 中为我的节点应用程序使用 felixge/node-mysql。然而，而不是通常

```
mysql.createConnection(...) 
```

在 app.js 中，我希望它作为“配置”文件分开。现在在我的 config.js 中是：

```
function localConnect(){
    //Node Mysql dependency npm install mysql@2.0.0-alpha7
    return require('mysql').createConnection({
        hostname: 'localhost',
        user: 'username',
        password: 'password',
        database: 'database'
    });
} 
```

在应用程序 js 中：

```
...
//Node Mysql dependency npm install mysql@2.0.0-alpha7
var mysql = require('mysql');
//MYSQL database config file
var connection = require('./config.js').localConnect();
connection.connect(); 
```

并且 connection.connect() 失败。

目的是让我可以在不暴露我的数据库连接信息的情况下将它提交到我的存储库，并且仍然为用户提供一个 dbSample 文件，以防他们希望使用它。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:25:14.527

我不知道如何在 Node 中导出，因此根据 Nick 的提示，以下代码适用于 config.js：

```
var mysql = function localConnect(){
    //Node Mysql dependency npm install mysql@2.0.0-alpha7
    return require('mysql').createConnection({
        hostname: 'localhost',
        user: 'username',
        password: 'password',
        database: 'database'
    });
}
module.exports.localConnect = mysql; 
```

在 app.js 中：

```
//MYSQL database config file
var connection = require('./config.js').localConnect();
connection.connect(); //Successful 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T13:10:13.633

另外的选择：

db-config.js

```
module.exports = {
  hostname: 'localhost',
  user: 'username',
  ...
}; 
```

数据库.js

```
var config = require('./db-config');

module.exports = require('mysql').createConnection(config); 
```

应用程序.js

```
var db = require('./db.js');
db.query('SELECT ?', [ 1 ], function (err, data) { ... }); 
```

# java - REST Web 服务特定路径文件上传

> ID：15792344
> 
> 赞同：0
> 
> 时间：2013-04-03T16:03:38.433
> 
> 标签：java, web-services, rest, mule

我正在构建一个应用程序流，其中客户端将文件上传到 RESTful Web 服务，该服务将文件保存到默认的预定义位置。

REST 资源的 Java 代码：

```
@Path("/file")
public class UploadFile {

    @POST
    @Path("/upload")
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    public Response uploadFile(
            @FormDataParam("file") InputStream uploadedInputStream,
            @FormDataParam("file") FormDataContentDisposition fileDetail) {

        String uploadedFileLocation = "D:/uploaded/" + fileDetail.getFileName();

        // save
        writeToFile(uploadedInputStream, uploadedFileLocation);

        // ...
    }
} 
```

客户端的代码是：

```
 <form action="http://localhost:8080/file/upload" method="post" enctype="multipart/form-data">
    <p>Select a file : <input type="file" name="file" size="50" /></p>
    <input type="submit" value="Upload" />
</form> 
```

这对我来说很好，但现在我想对其进行编码，以便客户端可以决定保存文件的位置。如何将此位置从客户端传递到 REST 服务？要接收参数，我们将使用 GET 方法，但在 REST 服务中调用 POST 方法，因此如何完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:08:46.530

`input`在您的中添加另一个`form`以包含位置信息并作为额外的接收`@FormDataParam`。

当然，请严格验证位置，否则会带来重大安全风险。我个人很想尝试弄乱`/etc/passwd`:)

# java - 将字符串数组写入文件

> ID：15792345
> 
> 赞同：0
> 
> 时间：2013-04-03T16:03:41.860
> 
> 标签：java, file-io

我有一个包含 14534 个元素的字符串数组（在 java 中）。当我将它们写入文件（csv）时，文件在 13475 个元素之后停止（在一行的中间，但我看不到任何特殊字符）。

我用调试器检查过，数组确实被填满了。

我应该使用其他方法吗？在 c++ 中我会编写二进制文件，但我不确定如何在 java 中执行此操作。字符串没有被正确识别可能是个问题吗？

```
FileWriter writer = new FileWriter("out.csv");

for (int i = 0; i < lines; i++){
    for (int j = 0; j < cols; j++){
        // writer.append(""+i);
        // writer.append("-");
        writer.append(""+numbers[j][i]);
        writer.append(';'); 
    }
    writer.append('\n');
} 
```

奇怪的是，如果我添加代码来检查行（在注释中），它会再写大约 12 行。

关于尝试什么的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:05:28.370

在检查文件内容之前刷新和/或关闭编写器。不完整的输出很可能是由于缓冲造成的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T16:05:39.447

你永远不会关闭你的作家 - 我怀疑数据只是卡在缓冲区中。

添加`writer.flush()`调用可能会显示给您 - 但实际上您应该使用[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)语句（如果您使用的是 Java 7）或 try/finally 语句来始终关闭编写器。

除了确保将所有数据写入文件之外，这意味着您还将释放文件句柄......

# asp.net - 智能卡身份验证 ASP.NET

> ID：15792348
> 
> 赞同：4
> 
> 时间：2013-04-03T16:03:49.380
> 
> 标签：asp.net, vb.net, authentication, iis, client-certificates

我们目前有一个托管在云环境中的站点。假设为了讨论，该站点是[https://abc.site.com](https://abc.site.com)。

我们有一个通配符 SSL 证书`(*.site.com)`，用于保护网站。

我们被要求实施 CAC 卡/智能卡实施。有没有办法在单击按钮时读取用户的智能卡/客户端证书？

我们能够在我们的开发环境中读取卡，但只有当我们使用客户端的证书来实际保护站点时（这不是我们想要实现的方式）。

我对此进行了很多研究，但是我一直无法找到解决我们问题的方法。根据我的阅读，`ActiveX`控件是使用智能卡证书读取客户端证书存储的唯一方法，但`ActiveX`不是我们的选择。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:51:40.050

这是通过要求客户端证书在网络服务器层完成的。用户的浏览器将提示用户提供智能卡（或其他证书）。您可以通过检查证书的 CA 根来确保他们提供了有效的智能卡证书。

这里有一个 ASP.NET 的（旧）教程：http: [//support.microsoft.com/kb/315588](http://support.microsoft.com/kb/315588)

除此之外，如您所见，不使用 Java 小程序或 ActiveX 控件就没有通用的方法来检索客户端证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:02:58.710

首先，您需要将 IIS 配置为使用客户端证书进行身份验证。您还需要在 WebServer 中安装所有证书链。

在您的 ASP.NET 页面中，您可以使用`Request.ClientCertificate`来访问您将用于在系统上进行身份验证的证书信息。

# ruby-on-rails - Rspec 和 spawn gem：如何在 spawned_out 过程中测试“should_receive”

> ID：15792352
> 
> 赞同：0
> 
> 时间：2013-04-03T16:03:56.690
> 
> 标签：ruby-on-rails, rspec, spawn

我有一个调用生成块的控制器操作

```
class MyController <  ApplicationController
  ....
  def send_product_mails
    if @user.has_rights?
        spawn_block(:nice => 19 ) do 
          @current_product.send_mail
        end
    end
  end
  ...
end 
```

我想指定在@current_product 上调用了 send_mail，但它告诉我它没有收到它。应该怎么做？

我的规格看起来像这样：

```
it "works with spawn" do
  # Setup: create Product, Usersession (via UserSession.create(user))
  get :send_product_mails, :id => product.id
  MyController.any_instance.should_receive(:spawn_block).and_yield("sd")
end 
```

我想指定`spawn_block`如果用户拥有权限，则将某些内容传递给，否则不会。现在有不同的尝试（`.should_receive`在 MyController、MyController.any_instance、@controller 上调用测试，无论是否使用 and_yield，这总是会给出`spawn_block`未收到消息的错误。（是的，我通过添加在 if 语句中放置调试输出。）

编辑：为问题提供更多上下文和代码，以及我尝试过的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:31:17.983

您需要在被测代码运行*之前*设置期望（对 should_receive 的调用） 。

# firefox - Firefox 和谷歌地图 API v3：IndexSizeError

> ID：15792353
> 
> 赞同：2
> 
> 时间：2013-04-03T16:03:57.737
> 
> 标签：firefox, google-maps-api-3, google-maps-markers

几天或几周以来，我在 Firefox 20.0（在 Google Chrome 中运行良好）中使用 Google Map（使用 v3）时遇到了一些麻烦，而之前它运行良好。**当我动态**加载标记（使用 Ajax 从数据库加载）时，我的控制台（Firebug）中有：

```
IndexSizeError: Index or size is negative or greater than the allowed amount
(102 out of range 43) 
```

我认为有一个缩放图像的链接（看到[这个帖子](https://stackoverflow.com/questions/12909632/indexsizeerror-using-google-maps-v3-using-google-maps-marker)），但似乎没有。我尝试在 MarkerImage 的第二个和第五个参数中设置其他宽度和高度。同样的错误。

**编辑：**我注意到当我不精确 ScaledSize 时，没有错误。这意味着 Firefox 无法调整我的图片大小，但是……我需要！:(

有很多代码，由于在加载标记时会在控制台中显示错误，所以我将暂时向您展示与它对应的代码：

```
$.each(data, function(i) {
    // Where "data" is the json result of my ajax call
    var largeur = 80 + (20 * (map.getZoom() - 9));
    var ratio = largeur / 80;
    var hauteur = 56.8 * ratio;

    var marker = new google.maps.Marker({
        map: map,
        icon: new google.maps.MarkerImage("../images/realisations/" + data[i].image,
           new google.maps.Size(largeur, hauteur),
           new google.maps.Point(0, 0),
           new google.maps.Point(0, 0),
           new google.maps.Size(largeur, hauteur)
        ),
        position: new google.maps.LatLng(data[i].latitude, data[i].longitude),
        title: data[i].title
    });
}); 
```

网址：[此处](http://www.reseau-proeco-energies.fr)（页面底部的 api）

**>> 在黑色导航上，单击标签为“Réalisations”的复选框。这将导致控制台中的错误。**

浏览器：

*   Firefox 20.0：**错误...**
*   谷歌浏览器 26.0：**有效**
*   IE 9：**有效**
*   Safari 5.1.7：**有效**
*   歌剧 12.14：**作品**

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T15:06:27.263

我遇到了同样的问题，经过一些研究和简单的解决方法，我能够解决这个头痛问题。

这就是我所做的。

看来您需要同时设置“size”和“scaleSize”属性才能在 FF 中工作。但后来，还有一件事让我烦恼。当我将“大小”属性设置为图标的原始大小时，图标会缩放但突然被裁剪而没有显示完整的图标——可能是因为大小限制。

所以，我将**“大小”属性设置为缩放后的 img 的最大限制**（在我的例子中是 64），它就像一个魅力。

```
 cObject.setIcon({
                        url: cObject.getIcon().url,
                        scaledSize: new google.maps.Size(icoSize, icoSize-1),
                        size:new google.maps.Size(64, 64)
                    }); 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T19:28:04.953

要让 firefox 正常工作，您需要定义图标的 4 个参数以使其正确缩放。

1.）设置 url（显然）
2.）设置大小（这需要以像素为单位的原始图像大小）
3.）设置 scaledSize（这是您希望最终生成的像素大小）
4.）设置锚点（这应该是 scaledSize.width 的 1/2 乘以 scaledSize.height 以便它附加到图标底部中心的地图）

这是我使用的一些示例代码：

```
google.maps.event.addListener(fc.map, 'zoom_changed', fc.zoomChanged);
...
...
zoomChanged : function() {
        var scaleRatio,zoom,i,iconImg,img_element,t,newScaledSize;
        scaleRatio = 1;
        zoom = fc.map.getZoom();
        if(zoom < 15) {
            //from zoom level 15+, make it full size, at 15-, reduce icon size by 15% each zoom level
            scaleRatio = 1 - ((15 - zoom) * 0.15);
        }

        if(scaleRatio < 0.05) {
            scaleRatio = 0.05;
        }

        //change the size of the icon
        for(i=0;i<fc.markers.length;i++) {
            if(fc.markers[i] != null) {
                iconImg = $('img[src="'+fc.markers[i].getIcon().url+'"]');
                img_element = iconImg.get(0);
                t = new Image();
                t.src = (img_element.getAttribute ? img_element.getAttribute("src") : false) || img_element.src;
                newScaledSize = new google.maps.Size(Math.ceil(t.width*scaleRatio), Math.ceil(t.height*scaleRatio));
                if(!newScaledSize.equals(fc.markers[i].getIcon().scaledSize)) {
                    var anchor = new google.maps.Point(Math.ceil(newScaledSize.width*0.5), newScaledSize.height);
                    console.log('anchor: '+anchor);
                    fc.markers[i].setIcon({
                        url : fc.markers[i].getIcon().url,
                        anchor : anchor,
                        size : new google.maps.Size(t.width, t.height),
                        scaledSize : newScaledSize
                    });
                }
            }
        }
    } 
```

# php - 我如何从 json 数组中获取选定的信息？

> ID：15792354
> 
> 赞同：0
> 
> 时间：2013-04-03T16:03:58.063
> 
> 标签：php, json

我已经打印了 json 数组，它看起来像：

```
array (size=1)
  '2013-04-02' => 
    array (size=13)
      0 => 
        array (size=8)
          'date' => string '2013-04-02' (length=10)
          'sign' => int 0
          'slant' => string 'Generic' (length=7)
          'rating' => int 3
          'interp' => string 'We are eager to bring excitement into our lives today but other obligations prevent us from acting irresponsibly. The buzz from all the action-packed Aries planets keeps the energy jumping, but the Moon trudges into emotionally resistant Capricorn at 1:35 am EDT to set a serious tone to the day as we go about our business. Meanwhile, we can feel the weight of stern Saturn pushing away pleasure as it forms a difficult aspect with sweet Venus.' (length=445)
          'sms_interp' => string '' (length=0)
          'keyword' => string 'obligations' (length=11)
          'subject_line' => string 'We are eager to bring excitement into our lives ...' (length=51)
      1 => 
        array (size=8)
          'date' => string '2013-04-02' (length=10)
          'sign' => int 1
          'slant' => string 'Generic' (length=7)
          'rating' => int 2
          'interp' => string 'You are growing tired of your current responsibilities and are ready for a change of pace. You feel as if you have been working hard enough and now you are eager to take a break. Unfortunately, you may have to put off the fun and games a while longer while you fulfill the promises you already made to yourself and others. Thankfully, you'll really be able to let loose once you don't have unfulfilled obligations still hanging over your head.' (length=443)
          'sms_interp' => string '' (length=0)
          'keyword' => string 'commitments' (length=11)
          'subject_line' => string 'You are growing tired of your ...' (length=33) 
```

我如何从需要的数组中获取信息，例如：0 -> interp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:05:44.980

不要过多地阅读 json。它是一种数据封装格式。你不处理“json数组”。没有这样的事情。有一个 json **STRING**，您可以将其解码为本机数据结构。例如

```
$json = "... your raw json text here ...";
$data = json_decode($json, true); // true to force an array, instead of object.

echo $data['2013-04-02'][0]['interp']; 
```

# .htaccess - .htaccess - ErrorDocument 与 RewriteRule

> ID：15792356
> 
> 赞同：9
> 
> 时间：2013-04-03T16:04:06.903
> 
> 标签：.htaccess, redirect, seo, http-status-code-404

我希望对丢失文件和无效目录的请求重定向到自定义 404 错误页面。我相信这可以使用两种方法来完成。

```
# redirect invalid requests and missing files to the not-found page  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^(.*)$ http://www.example.com/not-found.html [L]
# same idea but using error document  
ErrorDocument 404 /not-found.html 
```

一种选择比另一种更好吗？我什么时候想使用一个与另一个？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-03T19:41:39.137

重写规则不会返回正确的状态码。这意味着浏览器将看到您的自定义错误页面，但响应代码仍将是**200**，并且浏览器（或与服务器通信的任何客户端）将认为特定的错误请求实际上是一个好的请求。

该`ErrorDocument`语句将显示自定义错误页面，但也会返回**404**响应代码，让浏览器（或任何客户端）知道在服务器上找不到它请求的内容。

请注意， mod_rewrite 有一个`R`标志，您可以将响应代码提供给：

```
RewriteRule ^(.*)$ /not-found.html [L,R=404] 
```

这将返回**404**响应代码，但不会*显示*`/not-found.html`页面。*如果您*`ErrorDocument`使用以下语句，它将显示自定义错误文档：

```
RewriteRule ^(.*)$ - [L,R=404]
ErrorDocument 404 /not-found.html 
```

重写规则将强制 404，其目标基本上被忽略，然后`ErrorDocument`确保提供自定义错误页面以及正确的**404**响应。

所以你想要`ErrorDocument`，几乎总是。需要注意的另一件事是 mod_rewrite 在 URI 到文件映射管道中的位置与`ErrorDocument`. 如果您依靠 mod_rewrite 来确定什么应该是 404，什么不应该是，它可能会受到可能出现的其他模块的影响（例如 mod_proxy）。

* * *

需要明确的`ErrorDocument`是*，在*URL 到文件映射管道以“找不到资源”（即**404**）结束之后使用 ，然后自定义错误文档语句 ，`ErrorDoucment 404`提供自定义错误页面而不是默认页面。当您像在问题中那样使用 mod_rewrite 时，它​​完全规避了管道到达**404**的自然方式。

# javascript - 是否可以在没有 COM/activeX 的情况下从 javascript 调用 .Net API？

> ID：15792357
> 
> 赞同：0
> 
> 时间：2013-04-03T16:04:08.820
> 
> 标签：javascript, .net, performance, api, activex

**背景**

我正在开发一个集成项目，我们的 webapp 将与在 .Net 中开发的第 3 方桌面应用程序进行通信。第三方应用程序公开 .Net API（以及 ActiveX 组件）以进行集成。我们的选择之一是使用 JavaScript 中的 ActiveX 组件。由于用户同时与我们的网络应用程序和第三方桌面应用程序进行交互，因此这里没有使用网络服务的范围。

根据 POC 测试，与调用 3rd 方原生 API 的原生 .Net 应用程序相比，使用 webapp 中的 ActiveX 非常慢。遗留架构和客户承诺排除了在 .Net 中重写我们的应用程序。这让我们可以选择从 JavaScript 调用 3rd 方 API。

Legacy 也将我们的浏览器限制为 IE。

**问题**

如果可以直接从 JavaScript 调用 .Net API，这就是我产生疯狂想法的地方。在我几个小时的研究中，我没有发现任何具体的东西。我最接近的是[这个](https://stackoverflow.com/questions/1739459/can-i-interact-with-net-libraries-through-javascript)问题。但即使在这里，公认的答案是使用 COM

我想这需要在 IE 中加载 .Net 框架。

有没有人从 JavsScript 本地调用 .Net API？如果是，请帮助我了解如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:19:16.217

我的问题是“你从 .NET 集成了什么？如果只是业务和数据逻辑，几乎不涉及用户界面，那么 Web 服务就可以解决问题。

**.NETAPI -> 网络服务 -> javascript**

我在这类项目中遇到的问题是桌面和 Web 之间的架构差异。当您在桌面 api 上时，分页会为您处理好，但在 Web 上，您必须编写逻辑来进行分页。Web 服务不是为发送 50K 记录而设计的，当它通过*Web 服务层*时，它会大大降低速度。

# ruby-on-rails - Ruby gem Sanitize 不在一台机器上压缩空格

> ID：15792358
> 
> 赞同：0
> 
> 时间：2013-04-03T16:04:09.333
> 
> 标签：ruby-on-rails, ruby, rspec, rubygems, sanitize

我有以下失败的单元测试；

```
it "should handle white space" do
  Sanitize.clean('   ').should == ''
end 
```

失败是因为 Sanitize.clean 的`(' ')`结果`' '`不是`''`。

在其他人的机器上进行相同的测试工作正常，这导致我可能安装了不正确的 gem，但我已经检查过，每个人都在运行相同的 gemfile.lock，它正在运行`Sanitize 2.0.3`，而后者又在运行`Nokogiri 1.5.5`

Ruby 的版本（包括补丁）是相同的`1.9.3-p392`，唯一的区别是大多数人在 Ubuntu 机器上运行测试，而我在 Mac OS X 上运行它们。

其他使用 Sanitize 的测试可以通过，比如去除不需要的标签并允许其他标签，只有空白会失败。

这使我想到这可能与编码或我发送的字符有关，也许在我的系统上，空白字符不是 Sanitize 可以理解的？我不知道如何验证这一点。

任何有关我下一步应该做什么的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:35:44.890

Sanitize 使用 libxml2，这个库是否安装在您的系统上？您可以使用`brew install libxml2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:29:57.103

不幸的是，这个问题的答案不是很有帮助，但是当我与另一位员工一起审查这个问题时，我们认为需要此代码的测试不是有效的测试，因此我们将其删除。

# c++ - C++/Linux，在应用程序之间共享内存中的对象

> ID：15792366
> 
> 赞同：0
> 
> 时间：2013-04-03T16:04:27.460
> 
> 标签：c++, vector, shared-memory

我有一个生成大量数据的应用程序，我希望它可供另一个 C++ 应用程序访问。平台是 RHEL5，如果重要的话是 g++。

以前，我这样做的方法是将数据写入 /dev/shm（基本上是一个 linux 内存驱动器），然后让其他应用程序从那里读取它。

但是，这似乎非常低效，因为有一个 ofstream，然后是一个 ifstream，并将数据重新加载到内存中。此外，将数据作为文本文件存储在内存中似乎比仅将其保存为内存需要更多空间（尽管我不是 100% 确定这是真的）。

我要分享的数据是

```
vector< vector<struct> > mydata; 
```

我希望其他应用程序能够执行类似的操作

```
mydata.at(ii).back() 
```

检索它需要的数据。mydata 中实际上会有相当多的数据。如果我将它打印成 CSV 格式的文件，它可能是 10GB。我正在使用的服务器有 24GB 的内存，应该足以处理这个问题。

此外，当第一个应用程序向 mydata 添加更多条目时，会发生这种检索（所以可能存在潜在的竞争条件？）。

C++中有没有办法共享vector<vector> mydata; 两个应用程序之间？如果是这样，最好的实现是什么？如果可能的话，我宁愿避免使用第三方库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T16:15:22.810

您可能*更愿意*避免使用 3rd-party 库，但最好的快速解决方案就在那里。试试 Boost.Interprocess。它提供了共享内存安全的容器（如vector）以及易于使用的接口。它也是仅头文件库之一，它比其他一些库更容易集成。

有关最新版本的文档，请参见此处的链接：http: [//www.boost.org/doc/libs/1_53_0/doc/html/interprocess.html](http://www.boost.org/doc/libs/1_53_0/doc/html/interprocess.html)

那里也有不少例子。它应该让您快速了解它的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:17:06.937

> C++中有没有办法共享vector<vector> mydata; 两个应用程序之间？如果是这样，最好的实现是什么？如果可能的话，我宁愿避免使用第三方库。

对于应用程序，如果您指的是进程，那么答案是否定的，数据结构不能在两个进程之间共享。为了在进程之间共享数据，必须使用共享内存（如您所确定的）。（可以使用消息进行进程间通信，但您的用例可能不适合这样做。

你会考虑使用**线程**吗？这样，您可以`mydata`在两个执行线程之间共享。您需要一个`mutex`来同步对共享数据的访问。

如果您使用的是 C++11，那么您可以完全使用 C++ 标准库来完成`std::thread`。如果没有，那么您可能必须使用 POSIX 线程库`pthreads`。

> 此外，当第一个应用程序向 mydata 添加更多条目时，会发生这种检索（所以可能存在潜在的竞争条件？）。

[不完全是，使用读写锁](http://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)可以让多个读线程并行进行，但是当写线程开始修改共享对象时，所有的读线程都得推迟，否则会出现不一致和很多其他问题。

# android - Android - 在某一行具有不同列号的 Gridview

> ID：15792371
> 
> 赞同：0
> 
> 时间：2013-04-03T16:04:39.340
> 
> 标签：android, gridview

我想知道是否有可能有一个 GridView，比如 2 行 2 列，然后其他 4 列。
有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:32:07.173

GridView 不支持跨越，但 GridLayout 支持。制作一个 4 列的 GridLayout 并将`android:layout_columnSpan="2"`属性设置为前两个视图。

# xcode - UITableViewController，添加对象时滚动边界

> ID：15792388
> 
> 赞同：0
> 
> 时间：2013-04-03T16:05:24.103
> 
> 标签：xcode, scroll, uitableview, reloaddata

我正在使用 Xcode 中的情节提要处理 iphone 项目，并且我有一个 tableview 列出从它拥有的数组加载的单元格。通过 push segues 我加载了 2 个其他视图以将项目添加到 table，然后我使用 unwind segue 返回 table。

在 tableview 的 segue 方法中，我使用“reloadData”来加载添加的单元格。但是当我这样做时，表格滚动边界关闭，就好像没有添加单元格一样。虽然当我在推送“层次结构”中返回一步并再次返回到 tableView 时，边界工作正常。所以，我想除了调用“reloadData”之外，我还必须在 segue 方法中进行更多更新？

（通过“边界关闭”我的意思是表格视图滚动开始在与添加任何单元格之前相同的滚动位置反弹。我想它在下面的链接找到的 gif 中得到了最好的解释）

很抱歉提出这么一个微不足道的问题，但我很难找到问题所在。谢谢！

（对问题做了一个很好的 gif，但没有足够的声誉来发布图像......这是链接：http: [//i251.photobucket.com/albums/gg304/creutzell/Comp-1.gif](http://i251.photobucket.com/albums/gg304/creutzell/Comp-1.gif)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:34:20.673

可能你在 .Make 中做了 tableview 的 frame 设置`viewDidLoad`到`viewWillAppear`or`viewDidAppear`方法中

随着高度以某种方式增加，这肯定是框架中的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:14:24.077

好的，这就是我“解决”它的方法：

我将 tableViewController 切换为带有 tableView 的 viewController，然后它按预期工作（表格的高度会自动更新，除了调用 reloadData 之外，我无需为它编写任何代码）。

这似乎是 tableViewController 结合 unwind segues 的错误。

# android - 如何将 PreferencesFragment 与 LiveWallpaper 一起使用？

> ID：15792389
> 
> 赞同：0
> 
> 时间：2013-04-03T16:05:24.310
> 
> 标签：android, andengine

如何将 PreferencesFragment 与 LiveWallpaper 一起使用？

在这里阅读*PreferenceFragments* ：http :
[//developer.android.com/guide/topics/ui/settings.html](http://developer.android.com/guide/topics/ui/settings.html)
它说：

> 然后，您可以像添加任何其他 Fragment 一样将此 Fragment 添加到 Activity。

我尝试在我的代码中添加对 getFragmentManager() 的调用，但该代码用于 LiveWallpaper，继承 BaseLiveWallpaperService（在 AndEngine 中），这显然不是一个 Activity。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T11:51:06.137

您可以在动态壁纸的 xml 文件中定义设置页面：

```
<wallpaper 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:thumbnail="@drawable/ic_launcher"
  android:description="@string/wallpaper_description"
  android:settingsActivity="be.nextleveldevelopment.package.MyPreferencesActivity"/> 
```

这`settingsActivity`将启用动态壁纸上的设置按钮。

# mongodb - 带有 mongodb 和实时数据的 Cubism.js

> ID：15792394
> 
> 赞同：3
> 
> 时间：2013-04-03T16:05:36.400
> 
> 标签：mongodb, visualization, cubism.js

是否有人知道允许我执行以下操作的教程或示例：我正在将实时数据插入 mongodb，并希望使用 cubism.js 将其可视化为水平线图。可视化应该在数据插入数据库时​​发生。

[最终结果将是一个水平图表不断更新的网页（无需重新加载页面），类似于http://square.github.com/cubism/](http://square.github.com/cubism/)顶部的示例

这个问题： [Using Other Data Sources for cubism.js](https://stackoverflow.com/questions/10526058/using-other-data-sources-for-cubism-js) 是我发现的最接近解释如何实现这一点的问题，但我想知道某处是否已经有用于 mongodb 的 cubism 数据源。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T08:02:42.057

使用 Cube 可能会更好：

[https://github.com/square/cube](https://github.com/square/cube)

Cube 是一个 Node.js 服务器，它利用 MongoDB 后端，旨在存储时间序列事件并生成指标。

它实际上是由编写 Cubism.js 的同一个人编写的 - 最初 Cubism.js 只是 Cube 的一部分，但他们将其拆分为一个单独的库。

因此，您只需将实时数据传递给 Cube 服务器，该服务器会将其插入 MongoDB - 然后您可以编写一个 Cubism.js 页面，该页面将从 Cube 中提取实时数据 - Cubism.js 中已经有一个内置上下文去做这个。

如果您提供有关您尝试绘制的实时数据的更多详细信息，以及它是什么形式，我们可能也可以为您提供更具体的建议。

干杯，维克多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:15:40.917

浏览器上的 Cubism 将打开一个套接字，连接到服务器。服务器本身必须轮询 mongo，然后向其所有侦听套接字发送消息。通常，node.js 用于服务器，使用 socket.io 包来处理套接字。为您的服务器端查看它。它对套接字和轮询 mongo 有很好的支持。

# objective-c - 使用 dispatch_async 时释放的实例变量？

> ID：15792399
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:05:46.163
> 
> 标签：objective-c, multithreading, grand-central-dispatch

`dispatch_async`我从控制器初始化类 myClass 的对象，然后在 3 个不同的函数中对该对象执行 3 个方法。这是我的班级：

```
@interface myClass : NSObject
  @property (retain) NSString* aString;

  -(void)method1;
  -(void)method2;
  -(void)method3;

@end

@implementation myClass
@synthetize aString;

-(void)method1 {

  aString = [NSTemporaryDirectory() stringByAppendingPathComponent:@"my_file"];
  [someData writeToFile:aString];

  // ...
}

-(void)method2 {

  // ...
}

-(void)method3 {

 aFunction([aString UTF8String]);
}

@end 
```

和控制器

```
-(void) viewDidLoad{

   myClass* myObject = [[myClass alloc] init];
}

-(void)meth1 {

   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    [myObject method1];
   });
}

-(void)meth2 {

   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    [myObject method2];
   });
}

-(void)meth3 {

   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    [myObject method3];
   });
} 
```

`meth1`,`meth2`并`meth3`在收到 3 个特定通知时执行，但它们总是以相同的顺序执行一次。

执行时`meth3`，我得到`[NSPathStore2 UTF8String]: message sent to deallocated instance 0x107eb36a0`. 启用 NSZombie 时，Instruments 告诉我这`aString`是由 libdispatch.dylib 发布的。我可以通过`copy`'ing `aString`in`method1`并在`method3`. 尽管如此，我认为这不是正确的做法，而且实例变量被 libdispatch 释放似乎很奇怪。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:09:00.083

用作`aString`属性 - `self.aString`（注意这`self.myString = anotherString;` 只是 a `[self setMyString:anotherString]`），因此它将为您保留此字符串（如您在属性声明中提到的），如下所示：

```
- (void)setMyString:(NSString *)newString {
    [newString retain];
    [_myString release];
    // Make the new assignment.
    _myString = newString;
} 
```

每个属性都使用 iVar 备份，因此直接使用 iVar（无点语法）不会调用 setter（也不会为您保留新值）。

[在此处](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW4)查看 Apple Docs

**编辑**：

`stringByAppendingPathComponent:`是一个工厂方法，所以它会返回一个自动释放的字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T16:17:08.023

您正在修改块内的 aString ，因此它的值不会被保留。块执行完成后，您需要使用 __block 保留该值。

# sql-server - SQL Server 2012 和不同的数据类型存储在一个地方

> ID：15792400
> 
> 赞同：6
> 
> 时间：2013-04-03T16:05:55.077
> 
> 标签：sql-server, sql-server-2012

好吧，我不是数据库架构师，所以这个问题完全来自软件开发人员的角度。我目前正在努力获得一个简单的设置数据库，并且想知道在 SQL Server 中存储不同类型的最有效、最高效的方式是什么。例如，SettingA 可以具有布尔值、整数值、浮点值或字符串值。什么是存储该数据的最有效方式和最高效的检索方式。

1.  将所有类型存储在一个字符串字段中，并让应用程序服务器将其转换为正确的值。

2.  对不同类型有不同的字段，并让应用程序服务器查看哪个字段不为空并使用它（BooleanValue、StringValue、IntValue、FloatValue，并且只有一个为非空且有值）

3.  根据类型将设置规范化到不同的表中，并且仅在使用该类型时才向表中添加值。（四个表 BooleanValues、StringValues、IntValues、FloatValues 与 Settings 表的外键）。然后 SP 将返回具有记录的任何表。

性能绝对是我的第一关注点，但空间问题紧随其后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:16:51.843

将设置存储在 XML 列中。

我的意思是单个 XML 设置文档中的项目的所有设置，以便可以一次性检索和更新它们。[提供模式](http://msdn.microsoft.com/en-us/library/ms184277.aspx)以降低存储成本并优化查询。然后数据库将知道设置值的数据类型。

如果您希望查询具有特定设置值的所有项目，您可以使用 XML 索引和/或 XQuery 查询。

我创建了一个 SQLFiddle 来展示它的样子： [http ://sqlfiddle.com/#!6/49c34/1](http://sqlfiddle.com/#!6/49c34/1)

至于索引，请看一下[XML Indexes](http://msdn.microsoft.com/en-us/library/bb522451.aspx)，特别是[Selective XML Indexes](http://msdn.microsoft.com/en-us/library/jj670108.aspx)：

> 选择性 XML 索引功能允许您仅将 XML 文档中的某些路径提升为索引。在创建索引时，会评估这些路径，并将它们指向的节点分解并存储在 SQL Server 的关系表中。此功能使用 Microsoft Research 与 SQL Server 产品团队合作开发的高效映射算法。该算法将 XML 节点映射到单个关系表，并在仅需要适度存储空间的情况下实现卓越的性能。

如果设置通常一起插入和检索，我希望这表现得很好，甚至比每个设置使用一个表行更好。在这种情况下，将它们撕成位，将位分散到表行中，只是在您检索它们时检索并再次将它们粘回来是没有意义的。

如果您希望查询几个特定设置或这些特定设置的条件，选择性 XML 索引将帮助您实现此目的。

何时需要注意：

*   如果项目之间的设置差异很大。因为它们将没有共享模式，并且设置文档所需的存储空间变得很大，可能太大。
*   如果您需要对设置文档的不同元素进行广泛的查询才能正常执行。因为您可能最终需要大量的索引空间。
*   如果部分设置比其他设置更频繁地更改，您可能需要将它们分开并单独存储。否则，您可能会在每次旋转一个位时更新整个设置文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:22:17.450

我想给出以下建议，专注于高级设计。

首先，看起来你的系统是LOB（Line of business system），而不是数据仓库，所以，当然如果你不同的业务实体，你应该按照NF规范化它们，通常，第三个NF就足够了。

对于您的具体问题，您有一个字段 [SittingA]，它可以有 4 种不同的可能数据类型，我认为您不应该将它们规范化为不同的列或表，因为它只有一个属性，一个归档，你没有不想添加额外的业务逻辑来控制它写入不同的列或表，并且在查询它时，必须确定在哪里查询。

您可以将它们存储在具有 Varchar 数据类型的一列中，但创建一个计算列，对 varchar 列中的值进行散列，在计算列上创建索引（散列索引）。您使用存储过程来完成哈希约定和查询。

这可以使您的逻辑简单而整洁。

如果您还有其他问题或疑虑，请更新您的问题或发表评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:39:19.503

**解决方案 #2：**
您可以使用 Isnull 链执行类似的操作，以根据某些主键关联将信息拉回。在不知道您的实现的情况下，我不知道这将是多么愚蠢的建议，但这是一种以所需格式将输入存储在后端的方法。

```
/*
        Create  Table #test 
                (
                    tID         Int Identity, 
                    StringVal   Varchar(100), 
                    FloatVal    Float, 
                    BoolVal     Bit, 
                    IntVal      Int
                )
*/

Declare @bah Varchar(100)

Set     @bah = 'ValuesToTest'

If      IsNumeric(@bah) = 0
Begin
        If      @bah In ('true','false') --Went with this assumption otherwise you'd get confused between 1 bool and 1 int
        Begin
                Insert  #test (BoolVal)
                Select  Case
                        When    @bah = 'true' Then 1
                        Else    0
                        End
        End
        Else
        Begin
                Insert  #test (StringVal)
                Select  @bah
        End
End
Else    If Floor(Convert(Money,@bah)) <> Ceiling(Convert(Money,@bah)) --Compensate for IsNumeric interpretation of money
Begin
        Insert  #test (FloatVal)
        Select  Convert(Float,Convert(Money,@bah))
End
Else
Begin
        Insert  #test (IntVal)
        Select  Convert(Int,@bah)
End 
```

您的值列的基线将是 1 个字节以允许可空值，1 个字节用于位列，4 个字节用于 int 列，4 个字节用于浮点数和 2 个字节用于 varchar（对于变量长度存储）所以看起来您正在查看 15 个字节的基线。

如果它是位或整数（15 字节）将是您的存储需求，如果它是双精度，则它可能会增加 4 个字节，如果精度为 25 或更高，并且 varchar 会增加等于长度的字节数正在存储的记录。因此，如果您改为使用不可为空的 varchar，则每条记录最多可为您节省 12 个字节（可变长度存储最少为 2 个字节，单个字符值最少为 1 个字节）。因此，对于 1,000,000 条记录，您正在查看大约 11.5 MB 的额外数据存储空间。

但是，如果您要根据值查找主键，则使用此解决方案可能会更快，因为在 varchar 上查找位、int 或 float 索引值会更快，所以如果在执行您的查找后，您将知道要使用哪种数据类型，走这条路会更快，因为只要您的列被索引，您就可以忽略所有在不同列中具有值的 Null。如果您要根据主键获取值，请使用单个 varchar 列，因为好处可以忽略不计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:14:36.197

假设数据库服务器和应用程序服务器具有可测量的（> 1 毫秒）延迟，我会选择选项 2。这里有两件事在起作用：一起存储在单行中的数据更易于查询，访问速度更快. 数据库以块的形式组织存储，并且在同一行中（并且小于块大小，通常为 4KB）意味着更快的访问。

现在，您可能需要为设置设置一个带有主键的单独表。（更少、更小的列会导致更快的检索。）通常我建议对 PK 使用 INT，因为它允许快速解析外键。

# php - PHP中的条件无法正常工作

> ID：15792401
> 
> 赞同：0
> 
> 时间：2013-04-03T16:05:56.340
> 
> 标签：php, conditional

我的条件基本上是这样说的：

如果类型为 5，并且用户状态未登录或历史计数为 0（或两者均为真 - 用户未登录且历史计数为 0），则执行某些操作（在这种情况下，跳过以下循环处理并跳转到下一个迭代器）。

我做错了什么，因为它击中了 else，即使我认为它不应该这样做。

这是代码：

```
if($row['type'] === 5 && ($_SESSION['appState']['user_state']['status'] <> STATE_SIGNED_IN ||  $historyRtn[0]['historyCnt'] === 0) ) {
    error_log("don't create");
    continue;
}
else {
    error_log("type: " . $row['type'] . "; appState: " .$_SESSION['appState']['user_state']['status'] . "; historyCount: " . $historyRtn[0]['historyCnt']  );
} 
```

对于所有`$row['type']`为 5 的代码块，无论其他值是什么，它都会触发 else。这是来自 else 的错误日志。（仅供参考，`STATE_SIGNED_IN`设置为“已登录”。）

```
// this one incorrectly hits the else, as appState is not signed in and historyCount is 0
type: 5; appState: recognized unregistered; historyCount: 0  

// this one incorrectly hits the else, as appState is signed in, but historyCount is still 0
type: 5; appState: signed in; historyCount: 0

// this one correctly hits the else, as appState is signed in and historyCount is 1
type: 5; appState: signed in; historyCount: 1 
```

如果所有三个条件都为真，我如何需要措辞 if 语句以便它只命中 else ？我宁愿不更改声明是否类型为 5 并且 appState 已登录且 historyCount > 0 因为它需要一个 else （我现在只有 else 用于测试）并且它需要移动所有其余的在 else 中运行的循环代码 - 如果我可以评估我不希望循环在 if 中运行的条件，我可以只使用`continue`跳过我不想处理的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:07:47.433

由于您正在使用`===`，因此您在询问是否`$row[type]`等于`5`，并且它们属于同一类型。您需要执行 a `var_dump`of`$row`来查看数据类型是什么。

例如：

```
$row[type] = "5";
var_dump($row[type]); 
```

退货

```
string(1) "5" 
```

因此，这些类型可能不会评估为真。

您可以尝试像这样进行投射：

```
if( (int)$row[type] === 5 ... ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:13:28.237

在你的代码中

```
if($row['type'] === 5 && ($_SESSION['appState']['user_state']['status'] <> STATE_SIGNED_IN ||  $historyRtn[0]['historyCnt'] === 0) ) 
```

您正在使用`===`运算符而不是`==`

`===`将匹配值和类型

`==`只会匹配值

所以无论是用户`==`还是检查类型是否相等

# ruby - 使用 ruby 发布：最佳实践以及如何做？

> ID：15792402
> 
> 赞同：1
> 
> 时间：2013-04-03T16:05:57.857
> 
> 标签：ruby, post, gem, httprequest, open-uri

我想使用 ruby​​ 发出一个简单的发布请求。起初我用 gem open-uri 尝试过。但是这个问题的[答案](https://stackoverflow.com/questions/242602/how-do-i-make-a-post-request-with-open-uri)表明它不起作用。因此，我想使用帖子中推荐的 rest-open-uri gem 而不是这个。但它是如何工作的？以及它是如何使用代理的？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:11:35.387

你不能只使用 Ruby 的标准库吗？[这里](http://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html)有一些关于 ruby​​ 2.0 的好例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:17:35.190

[http://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html#method-i-post](http://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html#method-i-post)

从文档中，总结：

```
response = http.post('/cgi-bin/search.rb', 'query=foo') 
```

用例：

```
# using block
File.open('result.txt', 'w') {|f|
  http.post('/cgi-bin/search.rb', 'query=foo') do |str|
    f.write str
  end
} 
```

# count - 使用 awk 拆分列，计算出现次数

> ID：15792406
> 
> 赞同：-2
> 
> 时间：2013-04-03T16:06:02.670
> 
> 标签：count, awk, split

我有一个格式为的输入文件：

```
type   count
"apples, oranges, bananas"   3  
oranges   5  
"apples, bananas"   10  
"oranges, bananas"   2 
```

我正在尝试计算文件中苹果、橙子和香蕉的总数（第一列以逗号分隔）。所以输出应该类似于：

```
apples   13  
oranges   10  
bananas   15 
```

我无法想出一个简单的 awk 表达式来总结拆分列的唯一元素。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:30:21.537

您至少更改了两次输入文件，但考虑到当前格式：

```
$ cat -t file
type^Icount
"apples, oranges, bananas"^I3
oranges^I5
"apples, bananas"^I10
"oranges, bananas"^I2 
```

注意：`cat -t`将文件中的选项卡显示为`^I`.

这个脚本将完成这项工作：

```
$ awk -F'\t' 'NR>1{gsub(/"/,"");n=split($1,s,/, /);for(i=1;i<=n;i++)a[s[i]]+=$2}END{for(k in a) print k,a[k]}' file
apples 13
bananas 15
oranges 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:31:36.770

这是使用 GNU awk 的一种方法：

```
<infile awk -v FS='["\t ,]+' '
NR>1 {
  for(i=1; i<NF; i++)
    if(length($i)>0)
      h[$i] += $NF
}

END { for(k in h) print k, h[k] }' 
```

输出：

```
apples 13
bananas 15
oranges 10 
```

请注意，您可能需要在输入到达 awk 之前删除尾随空格：

```
<infile sed 's/[\t ]*$//' | awk -v FS='["\t ,]+' '
NR>1 { 
  for(i=1; i<NF; i++) 
    if(length($i)>0) 
      h[$i] += $NF
} 

END { for(k in h) print k, h[k] }' 
```

# php - Magento 管理客户网格

> ID：15792419
> 
> 赞同：0
> 
> 时间：2013-04-03T16:06:37.777
> 
> 标签：php, magento

在管理客户的管理区域中。

我添加了一个新的自定义列，但它没有过滤，也不能按 asc / desc 排序

这是我的代码

```
protected function _prepareCollection()
{
$collection = Mage::getResourceModel(’customer/customer_collection’)
->addNameToSelect()
->addAttributeToSelect(’email’)
->addAttributeToSelect(’created_at’)
->addAttributeToSelect(’group_id’)
->joinAttribute(’billing_postcode’, ‘customer_address/postcode’, ‘default_billing’, null, ‘left’)
->joinAttribute(’billing_city’, ‘customer_address/city’, ‘default_billing’, null, ‘left’)
->joinAttribute(’billing_telephone’, ‘customer_address/telephone’, ‘default_billing’, null, ‘left’)
->joinAttribute(’billing_region’, ‘customer_address/region’, ‘default_billing’, null, ‘left’)
->joinAttribute(’billing_country_id’, ‘customer_address/country_id’, ‘default_billing’, null, ‘left’);

$collection->getSelect()->columns(array(’CustomerStatus’ => new Zend_Db_Expr ("(SELECT
CustomerStatusFROM users WHERE MagentoID =e.entity_id)")));

$this->setCollection($collection);

return parent::_prepareCollection();
} 
```

我尝试了很多不同的方法并添加了 _addColumnFilterToCollection 但似乎无法让它工作......</p>

```
 protected function _addColumnFilterToCollection($column)
        {

            if ($column->getId() == 'CustomerStatus' && $column->getFilter()->getValue()) {
            $val        = $column->getFilter()->getValue();

            $this->getCollection()->addFieldToFilter('CustomerStatus', array('like' => $val));

// $this->getCollection()->getSelect()->where('CustomerStatus= ?', $val);

        }

            return $this;

        } 
```

然后这就是我在 _preparecolumns 函数中添加列的方式

```
$this->addColumn('CustomerStatus', array(
         'header'    => Mage::helper('customer')->__('C Status'),
         'width'     => '100px',
        'index'     => 'CustomerStatus',
        'filter_index' => 'CustomerStatus'
    )); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:42:18.627

`CustomerStatus`您可以使用`frame_callback`填充列并`filter_condition_fallback`搜索 列，而不是尝试使列直接返回。

我尚未针对您的确切条件对此进行测试，但过去在将数据拉入这样的管理网格时，我已经成功地使用了相同的技术。

```
protected function _prepareCollection()
{

    $collection = Mage::getResourceModel('customer/customer_collection')
        ->addNameToSelect()
        ->addAttributeToSelect('email')
        ->addAttributeToSelect('created_at')
        ->addAttributeToSelect('group_id')
        ->joinAttribute('billing_postcode', 'customer_address/postcode', 'default_billing', null, 'left')
        ->joinAttribute('billing_city', 'customer_address/city', 'default_billing', null,    'left')
        ->joinAttribute('billing_telephone', 'customer_address/telephone', 'default_billing', null, 'left')
        ->joinAttribute('billing_region', 'customer_address/region', 'default_billing', null, 'left')
        ->joinAttribute('billing_country_id', 'customer_address/country_id', 'default_billing', null, 'left');

    $collection->getSelect()->columns(array('CustomerStatus' => new Zend_Db_Expr ("(SELECT CustomerStatus FROM users WHERE MagentoID = e.entity_id)")));

    $this->setCollection($collection);
    return parent::_prepareCollection();
} 
```

...

并像这样更改您的 addColumn：

```
$this->addColumn('CustomerStatus', array(
     'header'    => Mage::helper('customer')->__('C Status'),
     'width'     => '100px',
     'index'     => 'entity_id',
     'frame_callback' => array($this, 'callback_customerstatus'), // This calls the "callback_customerstatus" function below
     'filter_condition_callback' => array($this, 'filter_customerstatus'), // This calls the "filter_customerstatus" function that will modify your $collection to make searching possible
)); 
```

...

添加这个由`frame_callback`

```
public function callback_customerstatus($value, $row, $column, $isExport) {
    $entity_id = $value; // $value is passed from the Grid
    $sql = "SELECT `CustomerStatus` FROM `users` WHERE MagentoID=".$entity_id;
    $resource = Mage::getSingleton('core/resource');
    $readConnection = $resource->getConnection('core_read');
    $customer_status = $readConnection->fetchOne($sql); // Return one row with the selected value from "$sql" 

    return $customer_status;
} 
```

...

添加一个名为 filter_customerstatus() 的新函数：

```
public function filter_customerstatus($collection, $column) {
    if (!$value = $column->getFilter()->getValue()) {
        return $this;
    }

    $this->getCollection()->getSelect()->where(
        "CustomerStatus like ?"
        , "%$value%");

    return $this;
} 
```

...

请注意新的调用`filter_condition_callback`添加了`where`创建搜索功能所需的条件。

# string - 我应该修复这个汇编代码，以便它打印字符串“字符串”，但我遇到了各种错误

> ID：15792421
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:06:39.797
> 
> 标签：string, assembly, printing, tasm

```
.model tiny
.code 
Start:
CLEAR:
mov cx, 80*25
mov ax, 7120h
sub bx,bx
l: mov es:[bx],ax
add bx, 2
loop l
str db 'string', 0 ; reserved word used as symbol : str 
mov DI, ? ; position y*160 + x*2
mov aH, 03
sub Si, Si; index
L: mov al, STR[SI] ; symbol already defined elsewhere: l
   mov es, [DI], ax ; extra characters on line
oR aL, AL
JZ done ; undefined symbol: done
ADD DI, 2
JMP L
end start 
```

我把错误作为评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:19:08.870

```
str db 'string', 0 ; reserved word used as symbol : str 
```

然后使用与 不同的名称`str`。顺便说一句，你不能像这样在代码中间放置数据。如果你这样做了，你将不得不跳过它，这样处理器就不会像指令一样尝试执行你的数据。

```
L: mov al, STR[SI] ; symbol already defined elsewhere: l 
```

您已经有一个名为 的标签`l`，并且您的汇编程序在符号名称方面显然不区分大小写。选择一个不同的名称，最好是比 . 更具描述性的名称`L`。

```
mov es, [DI], ax ; extra characters on line 
```

应该是`es:[`，不是`es, [`。

```
JZ done ; undefined symbol: done 
```

正是它所说的意思：您没有用名称定义任何符号`done`（您的代码中没有这样的标签）。

# android - android模拟器不断在模拟器中强制关闭并且没有显示错误

> ID：15792422
> 
> 赞同：0
> 
> 时间：2013-04-03T16:06:39.923
> 
> 标签：android

主要活动此代码有一个登录屏幕和数据输入屏幕它正在工作但
现在无法工作并且不会给出任何错误我之前修复过但可以记住

```
package com.Trish.diabetesapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import android.R;
public class MainActivity extends Activity {

EditText txtUserName;
EditText txtPassword;
Button btnLogin;
Button btnCancel;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        txtUserName=(EditText)this.findViewById(R.id.txtUname);
        txtPassword=(EditText)this.findViewById(R.id.txtPwd);
        btnLogin=(Button)this.findViewById(R.id.btnLogin);
        btnLogin=(Button)this.findViewById(R.id.btnLogin);
        btnLogin.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
           // TODO Auto-generated method stub
        Intent myIntent = null;
       if((txtUserName.getText().toString()).equals("dom") && (txtPassword.getText().toString().equals("trisha"))){
              //Toast.makeText(Login.this, "Login Successful",Toast.LENGTH_LONG).show();

              myIntent = new Intent(v.getContext(), Login.class);

        }else{
              Toast.makeText(MainActivity.this, "Invalid Login",Toast.LENGTH_LONG).show();
        }
       startActivity(myIntent);
      }
        });
}

//@Override
//public boolean (Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
//  getMenuInflater().inflate(R.menu.login, menu);
//  return true;
//} 
} 
```

这是登录屏幕包com.Trish.diabetesapp；导入android.os.Bundle；

```
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.R;

import android.os.StrictMode;
import android.util.Log;
import android.widget.EditText;

public class Login extends Activity {
    Button button2;

@Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);
    EditText breakfast= (EditText)  findViewById(R.id.breakfast) ;
        EditText lunch = (EditText) findViewById(R.id.lunch);
        EditText dinner = (EditText) findViewById(R.id.dinner);
        EditText supper = (EditText) findViewById(R.id.supper);
        Button button = (Button) findViewById(R.id.button1) ;

        final String breakf = breakfast.getText().toString();
        final String lun = lunch.getText().toString();
        final String din = dinner.getText().toString();
        final String sup = supper.getText().toString();
button2=(Button)this.findViewById(R.id.button2);
button2.setOnClickListener(new OnClickListener() {
@Override
public void onClick(View arg0) {
   // generate your params:
   List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
   nameValuePairs.add(new BasicNameValuePair("breakfast", breakf));
   nameValuePairs.add(new BasicNameValuePair("Lunch", lun));
   nameValuePairs.add(new BasicNameValuePair("Dinner", din));
   nameValuePairs.add(new BasicNameValuePair("supper", sup));

   // send them on their way
   try {
       DefaultHttpClient httpClient = new DefaultHttpClient();
       HttpPost httpPost = new HttpPost("http://xyz/register.php");
       //httpPost.setEntity(new UrlEncodedFormEntity(nameValueParams));

       HttpResponse httpResponse = httpClient.execute(httpPost);
       HttpEntity httpEntity = httpResponse.getEntity();

   } catch (UnsupportedEncodingException e) {
       e.printStackTrace();
   } catch (ClientProtocolException e) {
       e.printStackTrace();
   } catch (IOException e) {
       e.printStackTrace();
   }
}});}
//@Override
        //public void onClick(View v) {
//finish();
//System.exit(0);
//}
//});
//Intent intent = new Intent(Login.this, .class);
//Login.this.startActivity(intent);
//new lister for save start db code their
//take info from button with sql

  // @Override
  // public void onClick(View arg0) {
       // TODO Auto-generated method stub
       //postData();
//});

   //
//}

@Override
    public boolean onCreateOptionsMenu(Menu menu) {
// Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
        return true;
} 
```

这是xml

```
 <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="10" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.Trish.diabetesapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.Trish.diabetesapp.Login"
            android:label="@string/title_activity_login" >
        </activity>
    </application>

</manifest> 
```

# php - enctype 卷曲 php

> ID：15792424
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:06:42.487
> 
> 标签：php, libcurl, enctype

我正在使用以下代码将图像上传到 imagezilla.net

```
<form target="my_iframe" action="http://imagezilla.net/api.php" method="post" enctype="multipart/form-data">
    <input type="file" name="file" accept="image/x-png, image/gif, image/jpeg" />
    <input type="hidden" name="apikey" value="" />
    <input type="hidden" name="testmode" value="1" />
    <input type="submit" value="Upload Image" />
</form> 
```

这很好用，但由于跨域规则，我没有办法取回结果，所以我试图将它放入 cUrl php

```
<?php
$ch = curl_init("http://imagezilla.net/api.php?file='C:\Anti-Backlash-Nut.jpg'&apikey=''&testmode=1");
$header = array('Content-Type: multipart/form-data');
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);       
curl_close($ch);
echo $output;
?> 
```

（第二批代码已经包含该文件作为快速测试）
我无法让 php 代码中的 Enctype 正常工作（行 $header = ...），因为它只是因为没有上传文件而返回。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:33:00.043

这是您上传文件的方式：

```
<?php
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);
    $post = array(
        "file"=>"@/path/to/myfile.jpg",
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
    $response = curl_exec($ch);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:48:38.723

您正在使用 GET 方法上传文件……但文件总是使用 POST 上传。为此，您必须将文件名放在`@`要作为帖子发送的文件名的前面。

在文件路径之前发送`@`确保 cURL 将文件作为“multipart/form-data”帖子的一部分发送

试试这个

```
<?php
 $ch = curl_init("http://imagezilla.net/api.php?apikey=''&testmode=1");
 $post = array(
    "file"=>"@C:\Anti-Backlash-Nut.jpg",
);
 curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
 curl_setopt($ch, CURLOPT_POST, 1);
 curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 $output = curl_exec($ch);       
 curl_close($ch);
 echo $output;
?> 
```

# javascript - javascript更新后asp文本框文本属性不正确

> ID：15792426
> 
> 赞同：0
> 
> 时间：2013-04-03T16:06:50.110
> 
> 标签：javascript, asp.net

我有一个将文本添加到 asp:textbox 的 javascript 函数。但是，一旦我尝试将文本框保存在 C# Codebehind 中，textbox.Text 属性仍然保留原始值，而不是更新后的值。这是代码

Javascript

```
function GetLanguages(e)
{
    var newLang = e.nextSibling;
    var checkedValues = '';
    var chkEng = document.getElementById ("<%=chkEnglish.ClientID %>");
    var chkFr = document.getElementById ("<%=chkFrench.ClientID %>");
    var chkList1 = document.getElementById ("<%=chkTopLanguages.ClientID %>");
    var arrayOfCheckBoxes = chkList1.getElementsByTagName("input");
    var txtLangValue = document.getElementById("<%=txtLANG.ClientID %>");

    if(chkEng.checked)
        checkedValues = "English";

    if(chkFr.checked)
    {
        if(checkedValues.length > 0)
            checkedValues += ";";

        checkedValues += "French";
    }

    for(var i=0;i<arrayOfCheckBoxes.length;i++)
    {
        var checkBoxRef = arrayOfCheckBoxes[i];

        if(checkBoxRef.checked)
        {
            var labelArray = checkBoxRef.parentNode.getElementsByTagName('label');

            if ( labelArray.length > 0 )
            {
                if ( checkedValues.length > 0 )
                    checkedValues += ";";

                checkedValues += labelArray[0].innerHTML;
            }
        }
    }

    txtLangValue.value = checkedValues;
} 
```

代码隐藏

```
List<string> lstItemsChecked = new List<string>(txtLANG.Text.Split(';'));

        foreach (string language in lstItemsChecked)
        {
            foreach (DataRow row in dsTopLanguages.Tables[0].Rows)
            {
                if (row["Language"].ToString() == language)
                {
                    if (strLanguages.Length > 0)
                        strLanguages += ";";

                    strLanguages += row["LanguageID"].ToString();
                }
            }
        } 
```

txtLANG.Text.Split 调用结果为文本框的原始值，而不是通过 javascript 更新的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:20:43.873

ugh，弄清楚出了什么问题。漫长的一天，解决复杂的事情。我忘了用 if(!IsPostback){} 包装我的数据加载代码，所以它在将值保存到数据库之前重新加载了原始记录数据。对不起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:14:53.583

并且您确定正在调用 javascript 函数并且文本框正在更新其值？

您是否尝试在 JavaScript 函数的末尾添加以下内容以确保文本框的值正在更新？

```
alert(txtLangValue.value); 
```

# bash - 使用 grep 显示具有奇数个字符的行

> ID：15792427
> 
> 赞同：2
> 
> 时间：2013-04-03T16:06:52.060
> 
> 标签：bash, unix, grep

使用 grep 显示具有奇数个字符的行。任何想法，我不知道如何从每行获取字符数，我尝试使用 wc 但它只计算全局字符数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:11:47.347

仅使用以下方式获取具有奇数个字符的行`grep`：

```
egrep -v '^(..)+$' file 
```

正常的做法是像这样使用模运算符：

```
awk 'length%2' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:11:04.540

您可以使用重复来找出：

```
grep -v '^\(..\)\+$' file 
```

# android - 启用或禁用已注册的接收器

> ID：15792428
> 
> 赞同：1
> 
> 时间：2013-04-03T16:06:52.343
> 
> 标签：android, broadcastreceiver, android-package-managers

我在为“setComponentEnabledSetting()”提供正确属性时遇到问题 - 我收到 IllegalAttributeException 说 .class 无法找到或不存在。

接收器在应用程序清单中声明，接收器处理程序存储在单独的包（com.app.receivers）中。在清单文件中，它们的名称属性是“.receivers.OnBoot”。到目前为止，我对这个设置没有任何问题 - 接收器正在工作等，但现在我正在尝试为用户添加一个启用/禁用接收器的功能。

```
ComponentName rec = new ComponentName("com.app.receivers", "OnBoot.class");
getPackageManager().setComponentEnabledSetting(rec, ....); 
```

我尝试了许多不同的替代方法来获得有效的 ComponentName，但都失败了。如何正确引用此接收器以便 setComponentEnabledSetting() 找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:32:33.173

只需使用`BroadcastReceiver`带有完整包名的类名作为第二个参数，`ComponentName`而不是`OnBoot.class`尝试如下：

```
ComponentName rec = new ComponentName("com.app.receivers",
                                            "com.app.receivers.OnBoot");
getPackageManager().setComponentEnabledSetting(rec, ....); 
```

# css - Wordpress 插件 CSS 顺序

> ID：15792431
> 
> 赞同：0
> 
> 时间：2013-04-03T16:06:56.423
> 
> 标签：css, wordpress, plugins

我想我已经失去了理智...

几年前我写了一个 WP 插件。它由几个小部件、一些短代码和完整页面的代码组成。没有火箭科学，真的。

我正在快速重写并开始遇到一个问题，即在插件 CSS 之后加载站点主题的 CSS。当然，这使得微调插件变得不可能。

为什么它会那样做？这是加入css的代码。

```
**wp_enqueue_style("aa_remote", "http://domaind.com/css/site.css", false, "1.0");** 
```

它已经工作了两年！现在没有了。

我做了一些挖掘，发现我可能可以使用依赖项，所以我像这样加载了主题的样式表。

```
**wp_enqueue_style("aa_remote", "http://domaind.com/css/site.css", (array) get_stylesheet_uri(), "1.0");** 
```

但这惨遭失败。

我做了一些头发，但我担心它有危险！

我确定我缺少一些基本的东西......任何/所有建议都表示赞赏！（走开不是一个选择！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-22T12:10:52.857

您可以采取的另一种方法是利用`wp_enqueue_scripts`钩子/函数为正在处理的样式表设置低优先级。这样，您可以保证在 WordPress 插件代码中的所有默认样式之后加载样式：

```
 function my_plugin_unique_style() {
     $base = get_stylesheet_directory_uri();
     wp_enqueue_style( 'style-my-plugin-style', $base.'/styles.css' );
 }
 add_action('wp_enqueue_scripts', 'my_plugin_unique_style', 11 ); 
```

当然，您必须修改它以使用插件的 css 文件名，但这是一种控制站点样式加载顺序的方法。值得一提的是，如果这仍然在页面 HEAD 中的另一个 CSS 文件之前加载，您应该将数字从 11 提高到其他更高的数字，以便将其优先级降低并稍后加载。

# jquery - 将html加载到引导模式中会破坏模式中的jquery

> ID：15792434
> 
> 赞同：1
> 
> 时间：2013-04-03T16:07:10.800
> 
> 标签：jquery, html, twitter-bootstrap, modal-dialog, template-engine

我正在使用带有模板引擎的 PHP 框架（Fat Free F3）来拼凑我正在处理的设计。主模板和所有 .js 文件正在 layout.htm 上加载。在 layout.htm 中，我有一个链接，单击该链接会触发 url 的内容显示在引导模式窗口内。以下是该代码：

```
<a href="/this/is/my/url" class="btn black mini icn-only" data-toggle="docs"><i class="icon-lock icon-large icon-white"></i></a>

<script>    
$(document).ready(function() { 
    $('[data-toggle="docs"]').click(function(e) {
        e.preventDefault();
        var url = $(this).attr('href');
        if (url.indexOf('#') == 0) {
            $(url).modal('open');
        } else {
            $.get(url, function(data) {
                $('<div class="modal container hide fade" tabindex="-1" data-width="820"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button><h3 class="page-title">Title! <small> small txt</small></h3></div><div class="modal-body">' + data + '</div></div>').modal();
            }).success(function() { $('input:text:visible:first').focus(); });
        }
    });
</script> 
```

在这个 url (/this/is/my/url) 内部，我正在尝试使用以下代码使用引导工具提示功能：

```
<button class="btn tooltips" data-placement="top" data-original-title="Tooltip in top">Top</button> 
```

工具提示不会显示在模态窗口内，但如果我将它添加到模态窗口外的主页上，它就可以工作。所以我的问题是，如何在使用此模板引擎时让工具提示（或任何其他引导 jquery 事件）在模式窗口内工作？我应该在模式窗口内重新加载引导 .js 文件吗？

让我感到困惑的是 css 似乎工作正常，因为模态窗口包含一个引导表。我认为 jquery 也可以工作，但我显然错了。

绝对任何反馈都会有很大帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:13:33.750

将此添加到您的 jQuery 以启动，`tooltip`因为它所绑定的元素在页面加载时不可见：

```
$(document).on('click', '[data-toggle="docs"]', function() {
    $('.tooltips').tooltip();
}); 
```

# java - 应用重新启动时共享首选项不会持续存在

> ID：15792435
> 
> 赞同：0
> 
> 时间：2013-04-03T16:07:12.143
> 
> 标签：java, android, sharedpreferences

我正在制作一个应用程序，我希望用户能够保存他们的偏好。我正在使用这样的共享首选项：

```
private void writeSettings(String val){
PreferenceManager.getDefaultSharedPreferences(context).edit().putString("status", val).commit();
        Log.d("stat", val);
} 
```

这很好用，阅读效果很好。如果我关闭应用程序并重新启动它，它就消失了。除非删除应用程序，否则不应该保存首选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:24:10.837

你在哪里调用 writeSettings 方法？如果在 onStop() 或 onDestroy() 中，有时这些不会被调用。如果是这种情况，请将您的代码添加到 onPause()。

除此之外，您可以尝试将它们保存在链中，如下所示：

```
// save string in sharedPreferences 
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
SharedPreferences.Editor editor = settings.edit();
editor.putString("some_key", value); // here value is the string you want to save
editor.commit();                    

// restore string in sharedPreferences (usually you have this onCreate method) 
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
String string = settings.getString("some_key", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:27:13.120

您必须使用 commit() 方法将更改保存在 sharedprefernce 中的一致状态。

参考这个：http: [//developer.android.com/reference/android/content/SharedPreferences.html#edit%28%29](http://developer.android.com/reference/android/content/SharedPreferences.html#edit%28%29)

# android - 在 Android 应用程序中使用谷歌地图

> ID：15792436
> 
> 赞同：0
> 
> 时间：2013-04-03T16:07:24.067
> 
> 标签：android, google-maps

我正在尝试在我的 Android 应用程序中使用 Google 地图，但我不知道如何开始。我知道我需要使用`MapActivity`，`MapView`并且我意识到有 3 个版本的 api。
地图视图需要一个 api 密钥。所以我有几个问题：

*   如何生成此 api 密钥？
*   它是免费的吗？
*   有一个教程解释了使用此功能的最开始？（从 api 密钥在活动中使用它）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:44:11.723

是的，您可以找到两个版本的 Android 版 Google 地图 API。v1 已弃用并且有很多限制。使用 v2 开发应用程序。关于 API 密钥：您可以在这里很好地记录它： [https](https://developers.google.com/maps/documentation/android/start#the_google_maps_api_key) ://developers.google.com/maps/documentation/android/start#the_google_maps_api_key 这里也是使用新地图 API 的官方指南 [https://developers .google.com/maps/documentation/android/intro](https://developers.google.com/maps/documentation/android/intro)

除此之外，您不一定需要使用 MapActivity。您应该改用 mapFragments。

# django - 时间字段查询

> ID：15792439
> 
> 赞同：2
> 
> 时间：2013-04-03T16:07:29.120
> 
> 标签：django, django-models

我正在尝试使用 Django 实现以下查询：

```
select * from Days where '11:00' between start_time and '23:59'; 
```

我的（简化的）模型如下所示：

```
class Days(models.Model):
    start_time = models.TimeField() 
```

我想找到给定时间参数的 start_time 和午夜之间的任何对象。我想做这样的事情，但它不起作用。

```
time_param = datetime.time(11, 0, 0)

days = Days.objects.filter(time_param__range=[start_time, time(23, 59, 59)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:21:28.753

你需要做这样的事情：

```
time_param = datetime.time(11, 0, 0)

# days = Days.objects.filter(time_param__range=[start_time, time(23, 59, 59))
days = Days.objects.filter(start_time__range=[time_param, time(23, 59, 59)) 
```

您的`time_param`变量是进入内部的变量，`range`并且`start_time`是`Days`模型的字段，因此它进入您的`filter`查询

# parameters - 哪些 Progress 4GL 参数会影响默认帧宽度？

> ID：15792442
> 
> 赞同：0
> 
> 时间：2013-04-03T16:07:36.313
> 
> 标签：parameters, progress-4gl, codepages

在将应用程序从 Progress 4GL 7.4 升级到 10.2b ABL 时，菜单显示出现问题，我没有源代码。我没有显示 2 列菜单选项，而是看到 3 列，一次只有两列可见（默认情况下是左对）...
1 选项 51 选项 2 选项
52 选项 3 选项 53 选项
4 选项
，好像菜单已经组装成一个长字符串，设计用于 80 个字符的盒装框架中的 2 列，现在显示在 120 个字符的框架中，仍然像 80 个字符一样被装箱，将其更改为 3 列，其中只有 2 列可见。

由于我看不到或直接影响显示菜单的代码，我想了解是否有任何参数可用于控制终端显示的默认帧大小，并且可能在 7.4 和 10.2b 版本之间发生变化，或者在升级/安装过程中可能被忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:32:13.220

罪魁祸首可能是您的 TERM 变量或您的 protermcap 文件。

TERM 需要指向一个与您需要的框架一样宽的 protermcap 条目。

几乎所有的默认条目都是 80 列宽。

如果您保持所有脚本相同并且您所做的只是切换 Progress 版本，那么我的猜测是有人在您的旧安装中修改了 protermcap。您需要提前进行这些修改。

我将首先在您的 10.2B 环境中制作 $DLC/protermcap 的副本。只是为了安全。

然后从旧的 v7 安装中获取旧的 protermcap 的副本。把它放在 $DLC 以外的地方——比如 /home/test/protermcap。

然后可以设置 PROTERMCAP 环境变量：

```
PROTERMCAP=/home/test/protermcap
export PROTERMCAP 
```

现在启动您的应用程序。如果它按预期工作，那么您可以将该 protermcap 复制到 $DLC 中（并在下次升级时尝试记住所有这些...）或将 v7 protermcap 放在安全的地方并修改您的脚本以使用 PROTERMCAP 环境变量。

Progress 也有可能改变了底层的 protermcap——7.x 是*很久*以前的事了，我记得，在这几年中发生变化的一件事是在一些终端定义中添加了“ws”属性（尤其是 xterm），它允许单个定义适应启动 Progress 时窗口的大小。回到糟糕的过去，您会定义一个 80（或 132）个字符的静态宽度，无论实际宽度是多少，Progress 都会使用它。更现代的版本是灵活的——但这可能会导致您的问题。同样的治疗方法，将旧的 protermcap 放回原位。或者使用预期大小的终端窗口。

# java - 如何创建默认 .keystore 文件或恢复 .keystore

> ID：15792448
> 
> 赞同：2
> 
> 时间：2013-04-03T16:07:48.927
> 
> 标签：java, keystore, jarsigner, jar-signing

当我尝试跑步时

```
calabash-android resign ContactManager.apk 
```

我得到跟随错误。

```
2013-04-03 21:29:38 - "C:\Java\jdk1.7.0_17/bin/jarsigner.exe" -sigalg MD5withRSA
 -digestalg SHA1 -signedjar C:/Users/Win7/Desktop/ContactManager/bin/ContactMana
ger.apk -storepass  -keystore "C:/Users/Win7/Desktop/ContactManager/bin" C:/User
s/Win7/AppData/Local/Temp/d20130403-3608-3wwsb/unsigned.apk
**jarsigner error: java.lang.RuntimeException: keystore load: C:\Users\Win7\.keyst
ore (The system cannot find the file specified)**
jarsigner command: "C:\Java\jdk1.7.0_17/bin/jarsigner.exe" -sigalg MD5withRSA -d
igestalg SHA1 -signedjar C:/Users/Win7/Desktop/ContactManager/bin/ContactManager
.apk -storepass  -keystore "C:/Users/Win7/Desktop/ContactManager/bin" C:/Users/W
in7/AppData/Local/Temp/d20130403-3608-3wwsb/unsigned.apk
C:/Ruby187/lib/ruby/gems/1.8/gems/calabash-android-0.4.3.pre5/lib/calabash-andro
id/helpers.rb:79:in `sign_apk': Could not sign app (C:/Users/Win7/AppData/Local/
Temp/d20130403-3608-3wwsb/unsigned.apk (RuntimeError)
        from C:/Ruby187/lib/ruby/gems/1.8/gems/calabash-android-0.4.3.pre5/lib/c
alabash-android/helpers.rb:62:in `resign_apk'
        from C:/Ruby187/lib/ruby/1.8/tmpdir.rb:129:in `mktmpdir'
        from C:/Ruby187/lib/ruby/gems/1.8/gems/calabash-android-0.4.3.pre5/lib/c
alabash-android/helpers.rb:55:in `resign_apk'
        from C:/Ruby187/lib/ruby/gems/1.8/gems/calabash-android-0.4.3.pre5/bin/c
alabash-android:112
        from C:/Ruby187/bin/calabash-android:19:in `load'
        from C:/Ruby187/bin/calabash-android:19 
```

我怀疑这可能会导致问题。

```
jarsigner error: java.lang.RuntimeException: keystore load: C:\Users\Win7\.keyst
    ore (The system cannot find the file specified) 
```

如何生成 .keystore 文件。我不太喜欢 JAVA，所以这可能是一个简单的问题。

# javascript - 如何解决“没有方法'push'”错误？

> ID：15792449
> 
> 赞同：3
> 
> 时间：2013-04-03T16:07:49.453
> 
> 标签：javascript, jquery, arrays

使用以下代码

```
$.getJSON('services/getCharts.php', function(json) {
    var $line1 = [];
    $.each(json.posts, function() {
        $line1 = $line1.push([this.post.rectime,this.post.actual_value]);
    });
...
}); 
```

使用 JQuery 给我以下错误：

> 未捕获的类型错误：对象 1 没有“推送”方法

谁能帮我找出问题所在？非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T16:08:51.510

代替

```
 $line1 = $line1.push([this.post.rectime,this.post.actual_value]); 
```

和

```
 $line1.push([this.post.rectime,this.post.actual_value]); 
```

[push](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)更改接收器数组并返回新长度。

您会收到此精确的错误消息，因为当您尝试对其调用方法时，长度 ( `1`) 被提升为 a 。`Number``push`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T16:08:53.717

该[`push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)方法返回数组的新长度，而不是新数组，它会修改正在调用的数组：

```
$.each(json.posts, function() {
    $line1.push([this.post.rectime,this.post.actual_value]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T07:41:40.273

这是一个非常严格的语法：

```
 return Array.reduce(things, function(total, thing) {
    return total.concat([thing]);
  }, []) 
```

这：

```
return total.concat([result]) 
```

效果与此类似：

```
total.push(result);
return total; 
```

# asp.net - ASP.Net GridView 寻呼机未显示正确的页码

> ID：15792454
> 
> 赞同：0
> 
> 时间：2013-04-03T16:08:04.443
> 
> 标签：asp.net, vb.net, gridview, paging, pager

在 ASP.Net GridView 中，您是否遇到过这种情况？

Web 表单有一个 GridView 和一个 DetailsView。用户分页到特定页面，例如第 3 页。分页器显示当前页面是第 3 页。接下来，用户单击 GridView 中的选择按钮之一。寻呼机现在将当前页面显示为第 1 页，但 GridView 显示第 3 页的数据。寻呼机和当前页面现在不同步。

这是用于允许分页工作的代码隐藏：

```
Protected Sub GridViewSummary_PageIndexChanging(sender As Object, e As GridViewPageEventArgs) Handles GridViewSummary.PageIndexChanging
    GridViewSummary.DataSource = theTableAdapter.GetDataByAllClasses(TextBoxSearch.Text)
    GridViewSummary.PageIndex = e.NewPageIndex
    GridViewSummary.DataBind()
End Sub 
```

有没有办法让寻呼机正确地将页码与正在查看的当前页面同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:26:52.697

如果您选择记录时页面索引和数据不同步，我建议您查看您的`Protected Sub GridViewSummary_SelectedIndexChanging(sender As Object, e As GridViewPageEventArgs) Handles GridViewSummary.SelectedIndexChanging`处理程序。这会改变页面索引吗？

您发布的代码对我来说看起来不错。

# ffmpeg - ffmpeg 无法从 .mov 转换为 .mp4 失败 98%

> ID：15792455
> 
> 赞同：2
> 
> 时间：2013-04-03T16:08:04.897
> 
> 标签：ffmpeg

我们的代码如下。当转换一个上传`.mov`到`.mp4`转换停止在 98%。

几乎我们所有其他首选格式都可以完美编码。有人知道我们哪里出错了吗？我们为此苦苦挣扎了一段时间，所以我们想请教专家，在此先感谢您的帮助。

```
<?php
$Path = dirname(__FILE__) . "/";
$url = "http://" . $_SERVER['SERVER_NAME'] . str_replace('\\', '/', dirname($_SERVER['SCRIPT_NAME'])) . "/";

session_start();
include_once 'inc/config.inc.php';
include_once 'common.php';
include_once 'inc/ffmpegprogressbar.class.php';

ob_flush();
?>
<html>
<head>
    <title>Converting..........</title>
    <style type="text/css">
        #mainDiv{
            margin:auto 0;
            text-align: center;
        }
        #progressbar_pbText{
            display: block; margin-top: -22px;
        }
        #fileInformation{
            color: red; padding: 16px;
        }
    </style>
    <?php

// Specifie Inputfile for FFMPEG
    $count = count($_SESSION['Files']);
// $file  = array_pop($_SESSION['Files']);

    $FileInstance = array_pop($_SESSION['Files']);
    //$FileInstance = $_SESSION['Files'][0];
    $file = $FileInstance['FileName'];
    $passNeeded = $FileInstance['PassNeeded'];
    $fmt = $FileInstance['fmt'];

    $FFMPEGInput = $Path . 'data/' . $_SESSION['OldSession'] . "/" . $file;

    $timeUnique = time();
    //echo "Start:Session holds: ".$_SESSION["cstatus"].", cstatus var =   $cstatus";

  /*  if ($FileInstance['PassNeeded'] == 5) {
        $FFMPEGParams = "-r 1000 -ar 11025 -ab 32 -f $fmt -sameq -g 15 -s 1920x1080";
    } else if ($FileInstance['PassNeeded'] == 4) {
        $FFMPEGParams ="-r 1000 -ar 11025 -ab 32 -f $fmt -sameq -g 15 -s 1280x720";
    } else if ($FileInstance['PassNeeded'] == 3) {
        $FFMPEGParams = "-r 1000 -ar 11025 -ab 32 -f $fmt -sameq -g 15 -s 854x480";
    } else if ($FileInstance['PassNeeded'] == 2) {
        $FFMPEGParams = "-r 1000 -ar 11025 -ab 32 -f $fmt -sameq -g 15 -s 640x360";
    }
    */
if($fmt=="flv"){
if ($FileInstance['PassNeeded'] == 5) {
        $FFMPEGParams = "-r 1000 -ar 11025 -ab 32 -f $fmt -sameq -g 15 -s 1920x1080";
    } else if ($FileInstance['PassNeeded'] == 4) {
        $FFMPEGParams ="-r 1000 -ar 11025 -ab 32 -f $fmt -sameq -g 15 -s 1280x720";
    } else if ($FileInstance['PassNeeded'] == 3) {
        $FFMPEGParams = "-r 1000 -ar 11025 -ab 32 -f $fmt -sameq -g 15 -s 854x480";
    } else if ($FileInstance['PassNeeded'] == 2) {
        $FFMPEGParams = "-r 1000 -ar 11025 -ab 32 -f $fmt -sameq -g 15 -s 640x360";
    }
}elseif($fmt=="mp4"){
$FFMPEGParams = " -pix_fmt yuv420p -s 640x360";

}elseif($fmt=="ogv"){
$FFMPEGParams = " -acodec libvorbis -ac 2 -ab 96k -ar 44100 -b 125k -s 640x360";

}elseif($fmt=="webm"){
$FFMPEGParams = " -acodec libvorbis -ac 2 -ab 96k -ar 44100 -b 125k -s 640x360";
//}elseif($fmt!==""){
//-i %1 -s qvga -acodec libfaac -ar 22050 -ab 128k -vcodec libx264 -threads 0 -f   ipod %2
//-vcodec mpeg4 -acodec aac output.mp4
//$FFMPEGParams = "-r 20 -ar 44100 -ab 196 -f $fmt -s 480x351";
}
    if ($FileInstance['PassNeeded'] > 2) {
        $FileInstance['PassNeeded'] = $FileInstance['PassNeeded'] - 1;
        array_unshift($_SESSION['Files'], $FileInstance);
    }

    $flv_rpath = 'data/' . $_SESSION['OldSession'] . "/" . $file. $timeUnique . ".".$fmt;

     $FFMPEGOutput = $FFMPEGInput . $timeUnique . ".$fmt";

    $_SESSION['ConvertedFiles'][$file][] = array('Pass' => $passNeeded, 'OutFile' => $file . $timeUnique . ".$fmt","fmt"=>$fmt);

    if (!$_GET["pkey"]) {
        $pkey = rand();
    } elseif (file_exists('log/' . $_GET["pkey"] . '.ffmpeg')) {
        $pkey = $_GET["pkey"];
    } else {
        $pkey = rand();
    }

// initializing and create ProgressBar
    flush();
    $FFMPEGProgressBar = &new FFMPEGProgressBar();
    flush();
// Show Progressbar
    if ($count > 0) {
        if ($FileInstance['PassNeeded'] < 3) {
        define('FFMPEG_LIBRARY', '/usr/local/bin/ffmpeg ');
        $extension = "ffmpeg";
        $extension_soname = $extension . "." . PHP_SHLIB_SUFFIX;
        $extension_fullname = PHP_EXTENSION_DIR . "/" . $extension_soname;
            if (!extension_loaded($extension)) {
                dl($extension_soname) or die("Can't load extension $extension_fullname\n");
            }
            exec(FFMPEG_LIBRARY . " -y -i '" . $FFMPEGInput . "' -vframes 1 -ss 00:00:03 -an -vcodec png -f rawvideo -s 160x90 '$FFMPEGInput.png'");
        }
        $FFMPEGProgressBar->Show($pkey, $count, $url, $passNeeded, $file, $timeUnique,$fmt);
        if (!$_GET["pkey"] || !file_exists('log/' . $_GET["pkey"] . '.ffmpeg')) {
            flush();
            $FFMPEGProgressBar = &new FFMPEGProgressBar();
            flush();
            @$FFMPEGProgressBar->execFFMPEG($FFMPEGInput, $FFMPEGOutput, $FFMPEGParams, $pkey);

            flush();
            $_SESSION['new_space']["video"] = 'data/' . $_SESSION['OldSession'] . "/" . $file;
            $_SESSION['new_space']["{$FileInstance['name']}"] = $flv_rpath;
            $_SESSION['new_space']["session"] =   $_SESSION['OldSession'];
        }
    //echo "End:Session holds: ".$_SESSION["cstatus"].", cstatus var = $cstatus";
    } else {
//  header("Location: $url" . "index.php" );
        echo "<script type=\"text/javascript\">window.location.href='" . $url . "';</script><error>No Input</error>";
    }
// ShowProgressbar
    ?> 
```

# xcode - 如何在 NSViewController 中重新加载数据？

> ID：15792457
> 
> 赞同：0
> 
> 时间：2013-04-03T16:08:08.727
> 
> 标签：xcode, cocoa, reloaddata, nsviewcontroller

我试图弄清楚如何在 NSViewController 中重新加载数据。

我有一个这样的项目，左侧​​栏是 NSOutlineView（由我的 outlineViewController 控制），右侧拆分视图是自定义视图： [![截屏](https://i.stack.imgur.com/dChcP.png)](https://i.stack.imgur.com/dChcP.png)

所以我有这个“profile.xib”文件，其中包含“person”对象的一些信息。我已将 profile.xib 文件所有者设置为我的视图控制器 ProfileViewController，它是 NSViewController 的子类。

因此，每次当用户从侧边栏中选择不同的配置文件时，我的 outlineviewController 都会调用：

```
if (!_profileViewController)
_profileViewController = [[ProfileViewController alloc] initWithNibName:@"profile" bundle:nil]; 
[_profileViewController setProfile: item]; //item is an instance of the profile object
NSView *view = [_profileViewController view];
view.frame = _mainContentView.bounds;
[view setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];
[_mainContentView addSubview:view]; //add profile's view to the right hand side split view 
```

（代码取自苹果的sidebardemo）

由于用户可能会从侧边栏中选择不同的配置文件，因此我需要在 ProfileViewController 中重新加载数据。但是我不知道哪个方法应该包含我的重新加载数据代码。如果我将“重新加载数据代码”放在 awakefromnib 中，它将被调用一次，viewload 也只会调用一次。由于内存问题，我不想在选择配置文件时重新分配和重新初始化 _profileViewController 一切。

我不能在这里使用绑定，因为某些字段的显示非常复杂。

那么我将如何重新加载数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:16:56.590

如何将您的“将配置文件信息加载到视图中”代码从 -awakeFromNib 移动到它自己的 -reloadData 方法中并在调用 -setProfile: 时调用它？您可以通过从表视图中自己调用它或通过覆盖 -setProfile: 来记录配置文件然后立即调用 -reloadData 来执行此操作。

# ios - NSURLConnection connectionDidFinishLoading 不是随机调用的

> ID：15792459
> 
> 赞同：1
> 
> 时间：2013-04-03T16:08:13.647
> 
> 标签：ios, nsurlconnection

我有一个 iPad 应用程序，我在其中使用 NSURLConnection 进行异步调用。在某些情况下，我在**connection:didReceiveData:**中收到所有响应数据，但从**不调用 connectionDidFinishLoading**。没有错误。这有点随机，因为相同的响应在其他时间完成。

我的课程的工作方式是使用以下命令连续发送大约 20 个请求：

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES]; 
```

然后我就等他们回来。这是创建多个请求的有效方法吗？

这是未完成的响应的示例标头。它与已完成的响应的标头无法区分。

```
>Keep-Alive: timeout=5, max=100
>Transfer-Encoding: Identity
>Server: Apache/2.2.9 (Unix) mod_ssl/2.2.9 OpenSSL/0.9.8b mod_jk/1.2.26
>Content-Type: application/json;charset=UTF-8
>Connection: Keep-Alive
>Date: Wed, 03 Apr 2013 05:25:32 GMT
>Cache-Control: private, no-transform, max-age=600 
```

问题的一个奇怪症状是我开始使用以下方法检查预期的内容长度：

```
long long download_size =[response expectedContentLength]; 
```

Content-Length 永远不会在 http 标头中设置。当请求失败时，download_size 为 -1（预期），当同一请求未失败时，download_size 设置为某个数字。但是，有很多情况下download_size没有设置，响应也没有失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:17:51.270

我希望你在这里使用*单独的对象*。你是说

```
NSURLConnection *connection = 
  [[NSURLConnection alloc] initWithRequest:request 
     delegate:self startImmediately:YES]; 
```

好吧，我当然希望那些是 20 个不同的`self`对象。您不能指望这会与单个对象同时充当所有 20 个请求的委托！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:17:09.837

这不是发起 20 个请求的好方法，因为：

1.  请求同时运行，因此如果您没有某个类来封装来自各个请求的所有响应数据等，您的应用程序可能会混淆来自各种请求的响应数据；

2.  因为它们同时发生并且因为 iOS 只允许对给定服务器的五个并发请求，所以它将延迟（并且可能超时）其他请求。

你有很多不同的方法，但你可能：

*   您可能希望在后台队列上执行此网络操作；

*   如果您想要并发操作（并且这样做有明显的性能优势），您可以使用`NSOperationQueue`并发操作，但使用`maxConcurrentOperationCount`. 如果您在这些后台操作中使用同步网络操作，这个过程是微不足道的，但是如果您在后台队列中使用带有自己的委托方法的异步网络操作，那么这个过程会非常复杂。

*   如果您确实需要 (a) 使用您自己的委托方法使用异步网络调用（例如更新进度视图、流协议等）；[`AFNetworking`](https://github.com/AFNetworking/AFNetworking)(b) 如果您想享受并发操作，那么使用它会比编写您自己的操作容易得多。我经历了自己的写作练习，但是在完成了一次练习之后，我现在更充分地了解`AFNetworking`了桌面上的内容。

当然，您可以通过管理自己的待处理网络请求数组、启动第一个请求并让`connectionDidFinishLoading`和/或`didFailWithError`启动队列中的下一个请求来解决所有这些问题，但是您会失去并发性的性能增益。但这是一种简单的解决方法。

# c++ - g++ 错误：预期的主表达式

> ID：15792462
> 
> 赞同：0
> 
> 时间：2013-04-03T16:08:26.517
> 
> 标签：c++, templates, c++03

看看这个样本：

```
struct parent
{
    template <typename t>
    inline static t get_t();
};

struct child : public parent
{
    template <typename t>
    inline static t get_t()
    {
        return t(-1);
    }
};

template <typename t>
struct call
{
    inline static int get_value()
    {
        return t::get_t<int>();
    }
};

typedef call< child > test;

int main()
{
    int v = test::get_value();
} 
```

代码编译时出现以下错误：

```
In static member function 'static int call<t>::get_value()':
  error: expected primary-expression before 'int'
  error: expected ';' before 'int'
  error: expected unqualified-id before '>' token 
```

当我用 Visual c++ 2008 和 Intel C++ 编译代码时，它编译没有问题。

那个错误是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:12:00.813

您需要模板限定符：

```
return t::template get_t<int>(); 
```

看：

[我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:14:58.777

只需添加

> 模板

关键词：

```
template <typename t>
struct call
{
    inline static int get_value()
    {
        return t::template get_t<int>();
    }
}; 
```

# hibernate - 将 Hibernate JPA 配置为默认为所有实体设置 dynamicUpdate=true？

> ID：15792464
> 
> 赞同：1
> 
> 时间：2013-04-03T16:08:28.903
> 
> 标签：hibernate, jpa

我想将所有实体设置为使用动态插入和动态更新，但避免在每个类的基础上这样做：

```
@javax.persistance.Entity
@org.hibernate.annotations.Entity(dynamicInsert = true, dynamicUpdate = true)
public class User 
```

有没有办法在整个 entityfactory 中默认打开 dynamicInsert 和更新，这样我就可以省略第二个 @Entity 声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T20:07:15.730

根据[此处](https://stackoverflow.com/questions/8605145/define-dynamicupdate-property-on-application-level-for-all-entities)的答案，这是不可能的，因为它的实现没有优化。

所以唯一的方法是将它应用到你想要这种行为的每个类上，但要小心，它确实有缺点。检查[这个](https://stackoverflow.com/questions/3404630/hibernate-dynamic-update-dynamic-insert-performance-effects)。

# python - 如何在numpy中进行循环移位

> ID：15792465
> 
> 赞同：18
> 
> 时间：2013-04-03T16:08:32.890
> 
> 标签：python, arrays, numpy, shift

例如，我有一个 numpy 数组

```
a = np.arange(10) 
```

如何将第一个`n`元素移动到数组的末尾？

我找到了这个[`roll`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.roll.html)函数，但它似乎只做相反的事情，将最后一个`n`元素移到开头。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-03T16:10:45.413

为什么不只是`roll`一个负数？

```
>>> import numpy as np
>>> a = np.arange(10)
>>> np.roll(a,2)
array([8, 9, 0, 1, 2, 3, 4, 5, 6, 7])
>>> np.roll(a,-2)
array([2, 3, 4, 5, 6, 7, 8, 9, 0, 1]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T16:11:45.990

你可以使用负移

```
a = np.arange(10)
print(np.roll(a, 3))
print(np.roll(a, -3)) 
```

返回

> [7, 8, 9, 0, 1, 2, 3, 4, 5, 6]
> [3, 4, 5, 6, 7, 8, 9, 0, 1, 2]

# php - 捕获原始 URL 的 GET / POST 值？

> ID：15792466
> 
> 赞同：0
> 
> 时间：2013-04-03T16:08:35.263
> 
> 标签：php, javascript, html

我正在测试一些东西。仅当我传递 GET 值时，我想将我的网站 ( [http://mywebsite.com](http://mywebsite.com) ) 重定向到登录页面 ( [http://landingpage.com )。](http://landingpage.com)例如：id=23。因此，当它存在时，页面会重定向。

我的问题是是否有任何脚本可以捕获我被重定向的列表？我想要完整的链接，例如：[http ://mywebsite.com/index.php?id=23](http://mywebsite.com/index.php?id=23)

有没有可能捕捉到它？

还有没有可能对 POST 做同样的事情并在登陆页面上捕获该 POST 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:38:33.780

忘记：

您可以简单地附加`$_SERVER['QUERY_STRING']`到登录页面：

```
<?php
$get = ($_SERVER['QUERY_STRING']) ? "?".$_SERVER['QUERY_STRING']: "";
$url = 'http://landingpage.com'.$get;
header("Location: $url");
?> 
```

对于 POST：使用 CURL

```
if($_POST){
$ch = curl_init();
$curlConfig = array(
    CURLOPT_URL => "http://landingpage.com",
    CURLOPT_POST => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POSTFIELDS     => $_POST,
);
curl_setopt_array($ch, $curlConfig)
$result = curl_exec($ch);
curl_close($ch);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:33:49.710

为什么不将数据存储在会话变量中？您所要做的就是在重定向页面上再次启动会话，并在那里检索会话变量。

教程如果你还没有意识到它：[http ://www.tizag.com/phpT/phpsessions.php](http://www.tizag.com/phpT/phpsessions.php)

例如，在 mywebsite.com 上：

```
session_start();

if (isset($_REQUEST['id'])) {
    $_SESSION['id'] = $_REQUEST['id'];
    $_SESSION['url'] = "http://" . $_SERVER['SERVER_NAME'] . $_SERVER['PHP_SELF']; 
} 
```

在landingpage.com 上：

```
session_start();

$url = $_SESSION['url'] . '?id=' . $_SESSION['id'];
echo $url; 
```

虽然很确定如果页面存储在两个不同的服务器上，这将不起作用，所以我可能会误解这个问题。如果它在服务器之间，您可以改用 cookie。

# sql - 更新具有 CLOB 列的表时出错：ORA-01461

> ID：15792472
> 
> 赞同：1
> 
> 时间：2013-04-03T16:08:59.877
> 
> 标签：sql, oracle, plsql, clob, ora-01461

我在 Oracle 数据库中有一个表，如下所示，

```
create table test_clob(
id1 number,
clob_col clob); 
```

如果我尝试将大小超过 4000 的 varchar2 变量插入 CLOB 列，它会毫无问题地插入。

```
insert into test_clob values (1,rpad('a',32760,'a'));
commit; 
```

如果我尝试如下更新 CLOB 列，它工作得很好。

```
update test_clob set clob_col = rpad('b',32760,'b') where id1 = 1;
commit; 
```

但是，如果我尝试按如下方式运行更新语句，则会由于“ORA-01461：只能绑定 LONG 值以插入 LONG 列”错误而失败。

```
declare
large_string varchar2(32767) := rpad('c',32760,'c');
begin
update test_clob set clob_col = nvl(large_string,clob_col) where id1 = 1;
commit;
end; 
```

我怀疑是 NVL 功能导致了问题。对此的任何帮助都将受到高度赞赏。

注意：我在示例中使用了一个简单的表，但实际上该表有几个列，并且更新语句必须一次更新许多列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:17:25.287

实际上，`rpad('a',32760,'a')`当从 SQL 调用时只会返回一个 4k 字符串，这就是它起作用的原因。

SQL 中的`Varchar`类型限制为 4k，因此当您尝试从 pl/sql 绑定 32k varchar2 变量时，它将失败（因为从 pl/sql 调用 rpad 将返回 32k）。

例如：

```
SQL> select length(rpad('a',32760,'a'))  from dual;

LENGTH(RPAD('A',32760,'A'))
---------------------------
                       4000 
```

它默默地为您限制返回到 4k。但 pl/sql 不会限制为 4k：

```
SQL> declare
  2  large_string varchar2(32767) := rpad('c',32760,'c');
  3  begin
  4  dbms_output.put_line(length(large_string));
  5  end;
  6  /
32760 
```

您应该将您的 pl/sql 变量定义为`clob`而不是`varchar2(32760)`：

```
SQL> create table test_clob(
  2  id1 number,
  3  clob_col clob);

Table created.

SQL> insert into test_clob values (1,rpad('a',32760,'a'));

1 row created.

SQL> select length(clob_col) from test_clob;

LENGTH(CLOB_COL)
----------------
            4000

SQL> commit;

Commit complete.

SQL> declare
  2  large_string clob := rpad('c',32760,'c');
  3  begin
  4  update test_clob set clob_col = nvl(large_string,clob_col) where id1 = 1;
  5  commit;
  6  end;
  7  /

PL/SQL procedure successfully completed.

SQL> select length(clob_col) from test_clob;

LENGTH(CLOB_COL)
----------------
           32760

SQL> 
```

# jquery-mobile - 如何在方向事件触发时修复移动设备网页高度问题

> ID：15792479
> 
> 赞同：1
> 
> 时间：2013-04-03T16:09:15.500
> 
> 标签：jquery-mobile, iframe, webpage, mobile-website

我是新手，正在尝试创建一个简单的手机网页来调用外部网页。我在页面底部有一个按钮，它是固定的。我做了什么，我从具有外部链接的同一文件夹中调用另一个页面，我通过 Object 元素调用该页面。当设备处于横向视图时，我面临高度问题，只有一半的页面显示并且滚动条也没有进一步向下移动。当我点击被调用页面的外部链接时也是如此。

需要建议和帮助…………

```
 <content style="width:95%;">   
    <!--<iframe src="h2.htm" id="iframe_a"></iframe>-->
    <object id="vp" type="text/html" data="h2.htm" style="width:100%; overflow:scroll;"></object>
    </content>
    <!--<div id="siteloader"></div>
    <script>
     $("#siteloader")
        .html('<object data="h2.htm">');
    </script>-->
    <div id="downloadButton" style="position:fixed; bottom:0; z-index:2; background:#fff; width:100%;"><input TYPE=SUBMIT Value="DOWNLOAD AT&T REMOTE SUPPORT" />
    </div> 
```

# reporting-services - 在 SQL Server 报表生成器中聚合条件

> ID：15792482
> 
> 赞同：0
> 
> 时间：2013-04-03T16:09:22.543
> 
> 标签：reporting-services, reportbuilder3.0

有没有根据条件汇总我的报告？我有一份报告，列出了呼叫中心电话的所有详细信息。报告中有一个分组，按接听电话的代表将数据分开。在每个代表分组的标题上，我想要一系列聚合：他/她接听的电话数（我为此使用了一个简单的计数语句）、已解决的电话数和未解​​决的电话数。详细信息部分有一列列出了呼叫是否已解决。以下是我用来计算总调用次数的方法：

```
[Count(CALL_ID)] 
```

我正在寻找类似于以下伪代码的东西，它可以让我计算已解决的呼叫数和未解决的呼叫数

```
[Count(CALL_ID) WHERE call_status = 'resolved'] 
```

这在报表生成器中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:25:03.793

这应该有效 - 只需在组标题中使用以下表达式：

已解决的电话：

```
=Sum(IIf(Fields!call_status.Value = "resolved", 1, 0)) 
```

对于未解决的呼叫几乎相同：

```
=Sum(IIf(Fields!call_status.Value <> "resolved", 1, 0)) 
```

# java - 在不依赖 Java EE 的情况下使用 JavaMail (mail.jar)

> ID：15792486
> 
> 赞同：0
> 
> 时间：2013-04-03T16:09:49.863
> 
> 标签：java, jakarta-ee, jakarta-mail

我想从我的代码库中删除 Java EE 依赖项，以便我的程序更便携，更容易让“普通 joe”使用。我真的不想使用，`mail.jar`因为它依赖于 Java EE 容器（JBoss、Tomcat 等）。我也不想依赖简单包装mail.jar（apache commons-email）的东西，因为它仍然依赖于Java EE。

我在网上看到了一些提示在 Java SE 中使用套接字的东西，但是我发现评论者发布的示例表明它们不起作用或损坏了。

既然 Java EE 是基于 Java SE 构建的，那么 Java SE 肯定可以在没有 Java EE 的情况下发送电子邮件吗？

我怎样才能做到这一点？（现在想通过 Gmail 发送，但未来对其他 SMTP 服务（如 Exchange、Zimbra）的支持会很棒）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:13:20.930

JavaMail API 可作为可选包用于 Java SE 平台，也包含在 Java EE 平台中。
[参考](http://www.oracle.com/technetwork/java/javamail-138606.html)

# javascript - 在 Google Script 中，如何将脚本嵌入到按钮中？

> ID：15792487
> 
> 赞同：0
> 
> 时间：2013-04-03T16:09:53.023
> 
> 标签：javascript, button, click, google-apps-script

我指定 Google Script 而不仅仅是一般的 javascript 的原因是因为我找到的 javascript 示例都使用 html，而 Google Script 似乎不能很好地与基本格式化命令一起使用。

我有一个函数 formSubmitReply() 发送基于表单提交的电子邮件，另一个 addToCalendar() 自动将表单提交填充到日历事件中。这两个都经过独立测试并且运行良好。

我试图做的是在电子邮件中包含一个“添加到日历”按钮，单击该按钮将执行 addToCalendar()。

我一直遇到的困难是错误“TypeError: Cannot find function addToCalendar in object Generic。” 我该如何解决这个问题？

以下是我的代码的相关部分：

```
// Button setup
function doGet() 
{

  var app = UiApp.createApplication();

  // Create button and give it a click handler
  var button = app.createButton("Add to Calendar").setId("button");
  button.addClickHandler(app.createServerHandler("formSubmitReply"));
  app.add(button);

  return app;

}

// Email function
function formSubmitReply(e) 
{

  // Call "button" application
  var app = UiApp.getActiveApplication();

  /* Additional function code; excluded here */

  // Send email
  GmailApp.sendEmail(userEmail,
                    "Event Support Request Submitted",
                     message + 
                     app.getElementById("button").addToCalendar(e),
                    {name:"Media Services"});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:28:35.827

我认为不可能从电子邮件按钮（或任何 js，尽管我可能在那个按钮上弄错）调用这样的应用程序脚本函数。您可以做的是序列化来自 e 的信息。然后将 url 嵌入到应用程序脚本中，该脚本将处理作为参数传递的编码信息。Url 长度是有限的，因此如果您发送的数据非常大，您可能希望嵌入一个将数据提交到应用程序脚本的表单。

# android - Android 设备上 RAM 和 CPU 使用率的任何建议

> ID：15792489
> 
> 赞同：1
> 
> 时间：2013-04-03T16:09:58.157
> 
> 标签：android, debugging

我有一个设备显示响应缓慢且反应迟缓。能否请您指出一个正确的应用程序来监控 CPU 和 RAM 使用情况，以识别导致此问题的进程。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:11:36.257

试试[小眼睛](http://www.littleeye.co/)。它是分析 Android 应用程序的绝佳工具。

# c++ - Adobe AIR 本机扩展 TWAIN 图像扫描仪

> ID：15792494
> 
> 赞同：0
> 
> 时间：2013-04-03T16:10:13.583
> 
> 标签：c++, image-processing, air, air-native-extension, twain

目前我正在研究 Adob​​e AIR Native 扩展，它提供了使用 TWAIN 简单操作图像扫描仪的可能性。
我使用在找到的**CTwain**类[http://www.codeproject.com/Articles/296/AC-Wrapper-for-TWAIN](http://www.codeproject.com/Articles/296/A-C-Wrapper-for-TWAIN)

当我在 Windows 应用程序（.exe）中使用这个类时，它按预期工作，但在 dll 中（我需要创建一个文件）它**在关闭 Twain 设备 UI 时崩溃（当扫描完成或单击取消按钮时）**

我认为问题出在 DllMain.cpp 文件中的某处（可能是消息循环），因为在具有启动函数**APIENTRY _tWinMain**的应用程序中它运行良好。

代码
DllMain.cpp

```
#include "stdafx.h"
#include "TwainCpp.h"
#include "resource.h"

using namespace std;

HWND g_hwnd = NULL;
HINSTANCE g_hInstance = NULL;
BOOL isValid = false;
BOOL isCreated = false;
CTwain *twain = NULL;

LRESULT CALLBACK WndProc(HWND hWnd, unsigned message, WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {
        case WM_CREATE:         
            break;
        case WM_DESTROY:            
            PostQuitMessage(0);
            break;
    }   
    return DefWindowProc(hWnd, message, wParam, lParam);
}

BOOL CreateAppWindow()
{
    WNDCLASS  wc;
    wc.style = 0;
    wc.lpfnWndProc = WndProc;
    wc.cbClsExtra = 0;
    wc.cbWndExtra = 0;
    wc.hInstance = g_hInstance;
    wc.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_APPWORKSPACE + 1);
    wc.lpszMenuName =  "FRETwainMenu";
    wc.lpszClassName = "FRETwainClass";

    if(RegisterClass(&wc))
    {
        HWND hWnd;          
            char title[50];
            wsprintf(title, "FRETwain:%x", g_hInstance);
            hWnd = CreateWindow("FRETwainClass", title, WS_DISABLED,               CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,                      HWND_MESSAGE, NULL, g_hInstance, NULL);
            if(hWnd)
            {       
                g_hwnd = hWnd;                  
                return TRUE;                    
            }               
            return FALSE;       
    }   
    return FALSE;
}

DWORD WINAPI CreateAppThread()
{   
    if(CreateAppWindow())
    {
        MSG msg;
        isCreated = true;
        while(GetMessage(&msg, NULL, 0, 0) > 0)
        {
            if(twain != NULL){              
                twain->ProcessMessage(msg);             
            }   
            TranslateMessage(&msg);
            DispatchMessage(&msg);                      
        }       
        return TRUE;
    }
    return FALSE;
}

BOOL WINAPI DllMain(HINSTANCE hInstance, DWORD reason, LPVOID lpvReserved)
{
    switch(reason)
    {
         case DLL_PROCESS_ATTACH:
            g_hInstance = hInstance;            
            HANDLE thread = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)CreateAppThread, (LPVOID)NULL, 0, NULL);
            break;
    }        
    return TRUE;
} 
```

FRETwain.cpp（上下文文件）

```
#include <windows.h>
#include "FRETwain.h"

extern BOOL isValid;
extern BOOL isCreated;
extern HWND g_hwnd;
extern CTwain *twain;

extern "C"
{   
    FREObject AcquireTwain(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[])
    {   
        FREObject result;
        uint32_t ret = 0;   
        if(isValid){
            twain->Acquire(TWCPP_ANYCOUNT);
            ret = 1;
        }   
        FRENewObjectFromBool(ret, &result);
       return result;
    }

    FREObject setDefaultDevice(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[])
    {   
        FREObject result;
        uint32_t ret = 0;   
        if(isValid){
            twain->SelectSource();
            ret = 1;
        }
        FRENewObjectFromBool(ret, &result);
        return result;
    }

    FREObject initTwain(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[])
    {       
        FREObject result;
        uint32_t isTwain = 0;   
        if(!isValid){
            twain = new CTwain(g_hwnd, ctx);
            isValid = twain->IsValidDriver();
        }       
        if(isValid)
            isTwain = 1;
        FRENewObjectFromBool(isTwain, &result);
        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:38:16.653

您似乎没有任何线程同步。

首先，看起来 g_hwnd 的初始化和它在 AcquireTwain 等中的使用之间存在竞争条件。这可能不是您的问题，但您应该考虑到这一点 - 如果您从主 AIR 线程访问 g_hwnd，那么您必须使用 CRITICAL_SECTION 或互斥锁同步对它的访问。

但是，如果您可以只使用关键部分来确保 g_hwnd 正确初始化，然后将消息发布到其消息队列以异步执行获取。即向g_hwnd 发布一条windows 消息，然后从线程内调用CTwain::Acquire。
您可能还需要从线程等中创建 CTwain。基本上，只需使其成为线程安全的。

我从来没有为 Windows 编写过本机扩展（仅适用于 iOS）所以对此不确定......但也许有一种方法可以从 AIR 运行时获取窗口句柄，无需辅助线程即可使用（除非CTwain 块？）。这会让事情变得容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:16:12.577

[我发现了另一个 Twain 包装器 - EzTwain](http://www.eztwain.com/eztwain1.htm)的 C++ 版本- 完美的
[头文件](http://read.pudn.com/downloads81/sourcecode/graph/texture_mapping/312714/ice/win32/Eztwain.h__.htm)， 在同一线程中调用的[源文件消息循环](http://read.pudn.com/downloads81/sourcecode/graph/texture_mapping/312714/ice/win32/Eztwain.h__.htm)

```
void EZTAPI TWAIN_ModalEventLoop(void)  
{  
    MSG msg;  

    while ((nState >= 5) && !hDib && GetMessage((LPMSG)&msg, NULL, 0, 0)) {  
        if (!TWAIN_MessageHook ((LPMSG)&msg)) {  
            TranslateMessage ((LPMSG)&msg);  
            DispatchMessage ((LPMSG)&msg);  
        }  
    } // while  
} // TWAIN_ModalEventLoop 
```

不管怎么说，还是要谢谢你

# java - 如何在 Java 代码中强制执行文档？

> ID：15792497
> 
> 赞同：4
> 
> 时间：2013-04-03T16:10:29.617
> 
> 标签：java, findbugs, checkstyle, pmd

有哪些选项可以强制执行记录的代码？我想要一些将作为构建过程的一部分运行的东西，例如一个 Maven 目标，它将检查代码是否已记录（类级别和方法级别）并报告是否有任何代码缺少文档。

看过 FindBugs、PMD 和 CheckStyle，但它们似乎没有提供这种功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:19:10.193

好吧，我不想告诉你这一点，但有用的文档不能使用工具强制执行。

Checkstyle 可以检查[Javadoc 是否存在](http://checkstyle.sourceforge.net/config_javadoc.html)，但它不能检查 Javadoc 是否包含任何其他内容`@param pMyParam the myParam`和其他无意义的垃圾。即使您让某些工具检查文档的内容，这也会产生大量误报，并导致简单但有用的评论被夸大，只是为了取悦检查工具。一段时间后，开发人员将学会在阅读代码时过滤掉 Javadocs，就像我们在阅读网页时过滤掉广告一样。*因此，如果开发人员不想*编写好的和有用的文档，那么所有工具都不会给你带来任何好处。

用安托万·德·圣埃克苏佩里的话来说：*如果你想造一艘船，不要鼓动人们一起去收集木材，不要给他们分配任务和工作，而是要教会他们渴望永无止境大海的浩瀚。*

我的建议是：使用 checkstyle 来检查非常基础的内容，例如每个类都至少有一个类型注释，并且接口也记录了它们的方法。然后，在必要时对开发人员进行有关什么是有意义和有用的文档的教育，并明确说明在开发负责人的眼中，高质量的代码具有高质量的文档。即使某些方法根本没有记录，Javadocs 也可能非常好。然后只能通过人工检查来完成检查，例如通过同行评审或质量控制过程中的某种形式化步骤。

只是我的两分钱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:17:57.160

也许它不完全是您正在寻找的，但您可以使用[Sonar](http://www.sonarsource.org)并在编译代码时调用它。Sonar 将提供大量信息，包括 checkstyle

Sonar 非常易于使用并与 maven 项目集成。

文档：[http ://docs.sonarqube.org/display/SONAR/Installing+and+Configuring+Maven](http://docs.sonarqube.org/display/SONAR/Installing+and+Configuring+Maven)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-29T13:30:12.497

[Teamscale](http://teamscale.com)可以检查是否缺少评论。它还可以评估评论的质量并揭示琐碎和不相关的评论。

免责声明：我是 Teamscale 开发人员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:24:51.240

前段时间有一个来自 Sun 的名为 DocCheck 的 doclet。从 javadoc 创建报告。不知道还有没有。。

做一个谷歌搜索。

好的，谷歌搜索......适用于版本 1.2、1.3 和 1.4。它是实验性的，似乎是不活跃的。现在值得用吗？我不知道。那是你决定的事情。

javadoc doccheck 下载`http://192.9.162.55/j2se/javadoc/doccheck/index.html`

# javascript - 在 HTML 中使用内联事件处理程序是不好的做法吗？

> ID：15792498
> 
> 赞同：19
> 
> 时间：2013-04-03T16:10:29.657
> 
> 标签：javascript, html, events, handlers

使用内联 JavaScript 事件处理程序是不好的，还是可以的？

在我打算使用它的页面上，我只会使用一次事件处理程序，所以在这种情况下使用内联事件处理程序是否可以接受，或者我应该在 <script> 中编写事件处理程序的代码标签？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T16:16:02.230

如果您担心标记和维护中的可读性，这是不好的做法，尤其是在更大的范围内，它可能会变得非常混乱 - 还要记住，内联 JS 永远不会像外部 js 文件那样被缓存，所以您确实会受到一点影响关于性能，特别是如果你滥用它

阅读这篇文章以获得更多见解：[http ://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/](http://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-a-bad-thing/)

# javascript - 无法关闭表格

> ID：15792499
> 
> 赞同：0
> 
> 时间：2013-04-03T16:10:29.860
> 
> 标签：javascript, jquery, html

我使用这些库：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.css"> 
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<script src="http://code.jquery.com/mobile/latest/jquery.mobile.js"></script> 
```

而且我有一个隐藏的表单，只有在我单击按钮时才会显示。但我无法关闭它。

我在 Internet 上找到了这个示例，并尝试在我的页面中实现它。

需要帮助，我尝试了很多，但没有任何效果。

这是我的代码：

```
<div id="login-box" class="login-popup">
<a href="#" class="closest"><img src="icon/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
  <form method="post" class="signin" action="#">
        <legend>Contacto</legend>
        <fieldset class="textbox">
        <label class="Nome">
        <span>Nome</span>
        <input id="nome" name="nome" value="" type="text" autocomplete="on" placeholder="Nome">
        </label>
        <label class="Email">
        <span>Email</span>
        <input id="email" name="email" value="" type="email" placeholder="nome@dominio.com">
        </label>
        <label class="Mensagem">
        <span>Mensagem</span>
        <textarea rows="20" cols="56" name="mensagem" id="comment" id="mensagem" placeholder="A sua mensagem..."></textarea></label>

        <button type="submit" class="submitbutton" style="width:80px;height:30px">Enviar</button>      
        </fieldset>
  </form>
</div>

<script type="text/javascript">$(document).ready(function() {
$('a.login-window').click(function() {

            //Getting the variable's value from a link 
    var loginBox = $(this).attr('href');

    //Fade in the Popup
    $(loginBox).fadeIn(300);

    //Set the center alignment padding + border see css style
    var popMargTop = ($(loginBox).height() + 24) / 2; 
    var popMargLeft = ($(loginBox).width() + 24) / 2; 

    $(loginBox).css({ 
        'margin-top' : -popMargTop,
        'margin-left' : -popMargLeft
    });

    // Add the mask to body
    $('body').append('<div id="mask"></div>');
    $('#mask').fadeIn(300);

    return false;
});
// When clicking on the button close or the mask layer the popup closed
    $('a.close, #mask').live('click', function() { 
      $('#mask , .login-popup').fadeOut(300 , function() {
        $('#mask').remove();  
    }); 
    return false;
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:20:54.253

您的选择器中有错字；您可能想更改`$('a.close, #mask')`为`$('a.closest, #mask')`.

此外，`.live()`自 jQuery 1.7 起已弃用，请`.bind()`改用。

做了一个JSFiddle：http: [//jsfiddle.net/fhuNd/](http://jsfiddle.net/fhuNd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:16:19.950

您没有合适的 jquery 选择器，即您使用的 jquery 选择器没有指向页面中的任何元素，因此它不起作用。

采用`$('a.closest')`

# python - 如果带有列表的语句包含

> ID：15792506
> 
> 赞同：1
> 
> 时间：2013-04-03T16:10:47.033
> 
> 标签：python, if-statement

我有一个包含数字 (lijstkleur) 1、4、6、7 的列表。我也有一个从 0 到 8 的范围。现在我有以下代码：

```
for x in range(0, len(L), 1):
    if x in lijstkleur == True:
        self.label = Label(self.frame, text=string[x], fg="yellow", bg="red")
        self.label.pack(side=LEFT)
    else:
        self.label = Label(self.frame, text=string[x], fg="white", bg="red")
        self.label.pack(side=LEFT) 
```

但是所有的数字都变成了白色，这个 if 语句有什么问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:11:43.360

无需使用`== True`：

```
if x in lijstkleur: 
```

表达式`x in lijstkleur==True`被解释为`(x in lijstkleur) and (lijstkleur == True)`; 列表永远不等于布尔值`True`，因此您最终`something and False`会进行测试，并保证是`False`。这称为[比较链接](http://docs.python.org/2/reference/expressions.html#comparisons)，使表达式成为`10 < a < 20`可能。

您可以将`range()`调用简化为`len(L)`：

```
for x in range(len(L)): 
```

并且无需重复`.pack()`调用：

```
if x in lijstkleur:
    self.label=Label(self.frame,text=string[x],fg="yellow",bg="red")
else:
    self.label=Label(self.frame,text=string[x],fg="white",bg="red")
self.label.pack(side=LEFT) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:14:23.713

您的条件没有评估您认为的方式。它正在这样做：

```
if (x in lijstkleur) and (lijstkleur==True): 
```

的结果`lijstkleur==True`总是`False`，因为列表永远不等于布尔值，所以条件总是返回`False`。你想要的是这样的：

```
if x in lijstkleur: 
```

# excel - 如何使 excel vba 代码完全合格/如何规避运行时错误？

> ID：15792518
> 
> 赞同：5
> 
> 时间：2013-04-03T16:11:26.007
> 
> 标签：excel, vba, runtime-error

我正在编写一些 VBA 代码，在打开我的 excel 文件时动态设置一些图表的属性，例如数据范围。这是因为我用来从 .Net 项目中导出 Excel 的库不完全支持图表属性。

我在这个文件中有 4 个图表和 1 个数据表。

但是，在第**一次打开**文件时，会显示以下错误：

```
Run-Time Error: '-2147417848 (80010108)':

Automation
The object invoked has disconnected from its clients. 
```

（另外，在第一次打开时，会显示一个警告，表明该文件可能不安全，我必须手动允许打开，但我不确定这是否与此问题有关）

此文件的后续打开不会触发错误。

我在 stackoverflow 和论坛上搜索并找到[了这篇 Microsoft KB 文章](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q319832)

根据那里给出的建议，我尝试使我的代码完全合格（例如使用`Dim app As Application`and `Dim wb As Workbook`）。但是，这并没有解决我的问题。

违规行标有**

我的问题是：

1.  我是否未能使我的代码的某些部分完全合格？
2.  此错误是否还有其他可能的原因，如果有，如何解决？

我的代码（在 ThisWorkbook 对象中）：

```
Option Explicit
Private Sub Workbook_Open()

Dim app As Application
Set app = Excel.Application
Dim wb As Workbook
Set wb = app.ThisWorkbook

Dim lastRow As Long, lastRowString As String
lastRow = wb.Sheets("NameOfDatasheet").UsedRange.Row - 1 + Sheets("NameOfDatasheet").UsedRange.Rows.Count 'Worksheets("NameOfDatasheet").Range("A2:G41").AutoFilter field:=1, Criteria1:="<>"

With wb.Charts("NameOfChart1")
.SetSourceData Source:=wb.Sheets("NameOfDatasheet").Range("A2:A" & lastRow & ",D2:E" & lastRow)
'Styling type 1
.SeriesCollection(1).Border.Color = RGB(255, 0, 0)
.SeriesCollection(1).MarkerForegroundColor = RGB(255, 0, 0)
.SeriesCollection(1).MarkerBackgroundColor = RGB(255, 0, 0)
.SeriesCollection(1).MarkerStyle = xlMarkerStyleCircle
.SeriesCollection(1).MarkerSize = 5
'Styling type 2
.SeriesCollection(2).Border.Color = RGB(0, 0, 255)
.SeriesCollection(2).MarkerForegroundColor = RGB(0, 0, 255)
.SeriesCollection(2).MarkerBackgroundColor = RGB(0, 0, 255)
.SeriesCollection(2).MarkerStyle = xlMarkerStyleNone
.SeriesCollection(2).MarkerSize = 5
End With

With wb.Charts("NameOfChart2")
.SetSourceData Source:=wb.Sheets("NameOfDatasheet").Range("A2:A" & lastRow & ",H2:I" & lastRow)
'Styling type 1
.SeriesCollection(1).Border.Color = RGB(255, 0, 0)
.SeriesCollection(1).MarkerForegroundColor = RGB(255, 0, 0)
.SeriesCollection(1).MarkerBackgroundColor = RGB(255, 0, 0)
.SeriesCollection(1).MarkerStyle = xlMarkerStyleCircle
.SeriesCollection(1).MarkerSize = 5
'Styling type 2
.SeriesCollection(2).Border.Color = RGB(0, 0, 255)
.SeriesCollection(2).MarkerForegroundColor = RGB(0, 0, 255)
.SeriesCollection(2).MarkerBackgroundColor = RGB(0, 0, 255)
.SeriesCollection(2).MarkerStyle = xlMarkerStyleNone
.SeriesCollection(2).MarkerSize = 5
End With

Dim MaxVal As Variant, MinVal As Variant

With wb.Charts("NameOfChart3")
.SetSourceData Source:=wb.Sheets("NameOfDatasheet").Range("A2:A" & lastRow & ",F2:F" & lastRow)
MaxVal = app.Max(wb.Sheets("NameOfDatasheet").Range("G2:G" & lastRow))
MinVal = app.Min(wb.Sheets("NameOfDatasheet").Range("G2:G" & lastRow))
If (MinVal = MaxVal) Then
    MinVal = 0
End If
MaxVal = MaxVal + 0.1
MinVal = MinVal - 0.1
.Axes(xlValue).MinimumScale = MinVal
.Axes(xlValue).MaximumScale = MaxVal
End With

With wb.Charts("NameOfChart4")
**.SetSourceData Source:=wb.Sheets("NameOfDatasheet").Range("A2:A" & lastRow & ",B2:B" & lastRow)**
MaxVal = app.Max(wb.Sheets("NameOfDatasheet").Range("C2:C" & lastRow))
MinVal = app.Min(wb.Sheets("NameOfDatasheet").Range("C2:C" & lastRow))
If (MinVal = MaxVal) Then
    MinVal = 0
End If
MaxVal = MaxVal + 0.1
MinVal = MinVal - 0.1
.Axes(xlValue).MinimumScale = MinVal
.Axes(xlValue).MaximumScale = MaxVal
End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:57:51.810

需要考虑的几件事...为什么不使用内置的 Worksheets 对象，它比 Sheets 集合更干净？此外，如果问题中的工作表不是“第一个”，则必须先调用激活才能访问字段。（取决于 Excel 的版本，在任何情况下都可能需要激活它，所以我建议无论如何都这样做）你可以这样做：

```
wb.Sheets("nameOfWorksheet").Activate 
```

或者

```
Worksheets("nameOfWorksheet").Activate 
```

只是在这里注意一下，您对集合进行了很多重复调用。您不能指望编译器为您优化它。每个collection.get()，尤其是一个字符串被解析为索引号的地方都会吃周期。最好通过该指针获取引用并访问工作表并在完成后释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T08:32:04.523

我有同样的问题，但我很难找到一个好的解决方案。*我的代码出现这个（令人沮丧*的）错误的主要问题之一是我`End`在一个代码块的末尾有一个表单的一部分，我将其替换为`Me.Hide`.

另一件有帮助的事情是测试我声明的全局变量（作为代表应用程序和工作簿的模块的一部分）是否`Nothing`在使用它们的代码中。

换句话说：

```
If app Is Nothing Then
    Set app = Excel.Application
End If 
```

也许你的 wb 变量也是一样的。在使用工作簿和工作表对象之前在代码中放置断点以单步执行它们以查看哪个是违规行可能会很好。

否则，请查看[此 Microsoft 文章](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q319832)以了解有关此问题的一些信息。

我希望这有帮助。

PS。我的代码是从 Excel 2003 升级而来的，它在旧版本中一直有效，没有这个错误。

# ruby - 用 Nokogiri 解析节点？

> ID：15792528
> 
> 赞同：1
> 
> 时间：2013-04-03T16:11:52.157
> 
> 标签：ruby, nokogiri

我正在解析网页，我想`<img src>`通过找到`<div id="image">`.

我如何在 Nokogiri 中做到这一点？我尝试遍历子节点，但失败了。

```
<div id="image" class="image textbox ">
  <div class="">
    <img src="img.jpg" alt="" original-title="">
  </div>
</div> 
```

这是我的代码：

```
doc = Nokogiri::HTML(open("site.com"))

doc.css("div.image").each do |node|

    node.children().each do |c|

    puts c.attr("src")
    end     

end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:22:19.143

这是一个很好的资源：[http ://ruby.bastardsbook.com/chapters/html-parsing/](http://ruby.bastardsbook.com/chapters/html-parsing/)

稍微修改一个例子，我得到了这个：

```
doc = Nokogiri::HTML(open("site.com"))

doc.css("div.image img").each do |img|

    puts img.attr("src")

end 
```

尽管您应该尽可能使用 ID 选择器`#image`，而不是类选择器，`.image`。它要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:22:51.167

试试这个，让我知道它是否适合你

```
require 'nokogiri'

source = <<-HTML
 <div id="image" class="image textbox ">
   <div class="">
     <img src="img.jpg" alt="" original-title="">
   </div>
 </div>
HTML

doc = Nokogiri::HTML(source)

doc.css('div#image > div > img').each do |image|
  puts image.attr('src')
end 
```

输出：

```
img.jpg 
```

# java - 在受控循环中调用端点

> ID：15792536
> 
> 赞同：0
> 
> 时间：2013-04-03T16:12:10.073
> 
> 标签：java, apache-camel

我有以下用例：我使用 Camel 作为 Web 服务代理，我从 A 获取请求，丰富 SOAP 标头并转发给 B。B 的响应返回给 A。（我用 A & B 替换了实际产品名称)

我的路线如下所示：

```
 <route id="orderLimitRoute">
        <from uri="cxf:bean:aOrderLimit?dataFormat=CXF_MESSAGE" />
        <to uri="bean:soapHeadersEnricher"/>
        <to uri="cxf:bean:bOrderLimit?dataFormat=CXF_MESSAGE" />
    </route> 
```

像这样的路线有效，这不是问题。

丰富器从某处检索访问密钥，并放入 SOAP 标头。B 只接受具有有效访问密钥的请求。检索访问密钥是一项昂贵的操作，因此我们为此使用了一个池，B 也没有真正定义访问密钥何时变得无效。所以我们有这个（在非骆驼场景中）：

```
public Object execute(Call call) throws AbstractBWebServiceException {
    Object result = null;
    AccessKey accessKey = null;
    int tries = maxTries > 0 ? maxTries : accessKeyPool.getMaxActive() + 1;

    for (int i = 0; i < tries && accessKey == null; i++) {
        try {
            accessKey = borrowAccessKey();
            result = call.execute(accessKey);
        } catch (BWebServiceLoginException loginException) {
            invalidate(accessKey);
            accessKey = null;
        } finally {
            if (accessKey != null) {
                returnAccessKey(accessKey);
            }
        }
    }

    if (accessKey == null) {
        throw new BWebServiceAccessKeyException("Couldn't get a valid accesskey");
    }

    return result;
} 
```

call.execute(accessKey) 在哪里调用 B。现在我想在我的 Camel 路由中使用那段 Java 代码。要么直接，要么翻译成骆驼逻辑。但我不知道如何做到这一点，我一遍又一遍地查看 Camel 文档，但找不到任何相关内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:27:13.420

在 Java 代码中，您可以使用 ProducerTemplate 向任何 Camel 端点发送消息。 [http://camel.apache.org/producertemplate.html](http://camel.apache.org/producertemplate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:26:57.987

这是我解决它的方法，“soapHeadersEnricher”是一个 bean，它将访问密钥插入到 soapheader 中，并将其放在交换中。当访问密钥被视为无效时，我会收到一个带有特定代码的 SOAPFault。'bLoginExceptionPredicate' 检查该特定代码，并为该类型的异常启用重新传递。'onRedelivery' 从交换器获取无效的访问密钥，将其标记为对池无效，请求一个新的，在交换器和 SOAP 标头中设置它。最后的处理器将访问密钥返回到池中。

```
from("cxf:bean:brokerOrderLimit?dataFormat=PAYLOAD&allowStreaming=false")
            .process(soapHeadersEnricher)
            .onException(SoapFault.class)
            .onWhen(bLoginExceptionPredicate)
            .handled(false) // return fault to client
            .maximumRedeliveries(2)
            .redeliveryDelay(5000) 
            .retryAttemptedLogLevel(LoggingLevel.WARN)
            .logHandled(false)
            .onRedelivery(soapHeadersEnricher)
            .end()
            .to("cxf:bean:bOrderLimit?dataFormat=PAYLOAD&allowStreaming=false")
            .process(new Processor() {
                @Override
                public void process(Exchange exchange) throws Exception {
                    AccessKey accessKey = exchange.getProperty(BSoapHeadersEnricher.ACCESKEY_PROPERTY, AccessKey.class);
                    accessKeyProvider.returnAccessKey(accessKey);
                }
            }); 
```

# c# - 无需额外引用即可公开引用类型（类）

> ID：15792543
> 
> 赞同：6
> 
> 时间：2013-04-03T16:12:33.173
> 
> 标签：c#, dll, reference, layer

我的应用程序之间有一个分层的 .dll 系统，其中最低级别有一个提供某些功能的类 - 可以通过 GetClass() 函数接收此类的实例，然后我可以访问它的属性（基本上是一个集合变化对象的信息）。

现在我注意到，当我想从下一个更高级别的 .dll 访问该信息时，编译器抱怨我没有引用较低级别的 .dll（定义类的那个） - 实际上我想避免这种情况在我的架构中有一个很好的分层结构。

如何解决这个问题？我可以重新公开引用的类型吗？如果我想要完全相同的功能，我真的必须编写自己的包装器吗？还是我什至需要再次引用低级 .dll？

DLL 1：

```
class myClass;
myClass GetMyClass(); 
```

动态链接库 2：

```
myClass GetMyClass(); 
```

EXE文件：

如何在不引用 DLL 1 的情况下访问调用 GetMyClass (DLL 2) 的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:23:23.567

您需要将您在所有层中使用的所有公共类分离到一个新的 dll 中，然后在每个项目中引用这个 dll。

尝试使用[接口](http://msdn.microsoft.com/en-us/library/vstudio/ms173156.aspx)，以便您可以处理合同（功能）而不是具体实现。它将帮助您避免不必要的引用。

```
// common dll
public interface IMyClass
{
    string MyData { get; set; }
    IMyClass GetMyClass();
}

// dll1
public class myClass : IMyClass
{
    public string MyData { get; set; }
    public IMyClass GetMyClass() { return new myClass() { MyData = "abc" }; }
}

// dll2
public class myClass2
{
    public IMyClass GetMyClass()
    {
         var c1 = new myClass();
         var c2 = c1.GetMyClass();
         return c2;
    }
}

// exe (references common and dll2)
public class Program
{
    public static void Main(string[] args)
    {
        var c1 = new myClass2();
        IMyClass c2 = c1.GetMyClass();
        Console.Writeline(c2.MyData);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:19:07.197

`myClass`如果在 中定义，似乎没有办法实现这一点`dll1`，因为类型的对象`myClass`可能在运行时被实例化。为避免这种情况，您需要更改 in 的返回类型`GetMyClass()`以`dll2`返回 in 中定义的内容`dll2`。它可以是一个非常相似`myClass`并且具有相同属性的类（您甚至可以使用[AutoMapper](http://automapper.codeplex.com/)之类的工具轻松地在对象之间进行转换），但它绝对应该在`dll2`. 就像是：

```
// dll1
class myClass
{
    ...
}

myClass GetMyClass()
{
    ...
}

// dll2
class myClass2
{
    public myClass2(myClass c)
    {
        // instantiate myClass2 with values from myClass
    }
}

myClass2 GetMyClass()
{
    // somehow get myClass and convert it to myClass2 here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T18:44:05.390

我们在本地代码中做了类似的事情。您可以在运行时加载程序集，使用反射扫描其中包含的类型，然后再次使用反射调用函数并从该 dll 实例化类型，而无需在项目中直接引用它。

您需要的一些关键功能是：

```
Assembly.LoadFrom(path); //get the assembly as a local object
Activator.CreateInstance(type); //create an instance of a type
Assembly.GetType(string);//fetch a type by name from the assembly 
```

一旦你有了类型，基本的反射就会给你几乎所有你需要的东西。

这是我本地代码的片段：

```
asm = Assembly.LoadFrom(Path.Combine(Environment.CurrentDirectory, filePath));

Type[] types = asm.GetTypes();
for (var x = 0; x < types.Length; x++)
{
    var interfaces = types[x].GetInterfaces();
    for (var y = 0; y < interfaces.Length; y++)
    {
        if (interfaces[y].Name.Equals("MyTypeName"))
        {
            isValidmod = true;
            var p = (IMyType)Activator.CreateInstance(types[x]);
                            //Other stuff
            }
    } 
```

另请注意：这是现在很旧的代码。多年来，它既没有被审查也没有被重构，所以它从 .NET 1.1 开始基本上是现代的，但是：它说明了这一点。如何从本地未引用的远程程序集中加载类型。

此外，这是一个引擎的一部分，可以加载其中的大约 50 个，给定一个严格的文件夹结构，这就是它看起来如此通用的原因。从中获取你需要的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:18:36.100

调用者必须具有对 DLL1 中的类的引用才能知道它正在访问什么类型。所以是的，您需要引用exe中的第一个dll。由于 GetMyClass() 在 DLL1 中返回一个类型，该类型需要在 exe 中公开，因此必须引用 dll1。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T16:19:15.260

这里的一种解决方案是提供包含类接口的第 4 个 DLL。您将在所有 3 个层中引用它，并返回这些接口而不是您的类。

这应该让你很好地理解我的意思：

```
// DLL1
class ClassInDLL1 : IClassInDLL1
{
}

// DLL2
class ClassInDLL2
{
    public IClassInDLL1 GetClassInDLL1()
    {
        return new ClassInDLL1();
    }
}

// DLL3
class ClassInDLL3
{
    public void DoSomething()
    {
        var dll2 = new ClassInDLL2();
        var dll1 = dll2.GetClassInDLL1(); // dll1 variable is of type IClassInDLL1

        // do stuff with dll1
    }
}

// interface DLL
interface IClassInDLL1
{
} 
```

不过说实话，像这样分层架构通常不是一个好主意，除非你的项目真的很大。我发现提前像这样人为地进行装配拆分会给你带来不必要的痛苦，更不用说你最终会为一个可能只需要 1 个的中小型项目提供 3-4 个装配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-03T16:26:19.440

我和尼克一起使用任何 Ioc 框架，如 spring.net 或 microsoft unity。要正确理解这个想法，请通过[http://martinfowler.com/articles/injection.html](http://martinfowler.com/articles/injection.html)

# .htaccess - 仅从 CI 子目录的 url 中删除 index.php

> ID：15792545
> 
> 赞同：0
> 
> 时间：2013-04-03T16:12:33.700
> 
> 标签：.htaccess, codeigniter, rewrite

我知道如何`index.php`从 CI url 中整体删除。以下工作正常：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /crm/v2/index.php?/$1 [L] 
```

但是，它会干扰实时站点上的其他代码。我添加的这个新 CI 版本位于名为`v2`. 因此布局类似于：

```
-originalDir
  --v2
-otherDirs
-.htaccess
-etc... 
```

因此，本质上，url 会出现如下内容：

```
// Original page
https://www.site.com/originalDir/somepage.htm
// And this exist too
https://www.site.com/originalDir/index.php

// My new stuff
https://www.site.com/originalDir/v2/index.php/controller/etc...
// Desired effect withOUT affecting the original sites index.php page
//     aka, the below is what i WANT but NOT getting!
https://www.site.com/originalDir/v2/controller/etc... 
```

我可以用很多语言编写代码，但对这些 htaccess 重写没有太多经验。关于如何使其仅为 codeigniter 子目录重写 index.php 的任何想法？我尝试了一些似乎在本地工作的东西，但在实时服务器上却不行。不确定重写代码的确切结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:10:01.223

您是否尝试过使用 RewriteBase？

```
RewriteEngine On
RewriteBase /crm/v2
RewriteRule ^(.+)$ index.php?/$1 [L] 
```

我没有根据您的信息专门对此进行测试，但这是来自我用于某些项目的模板。

这是 RewriteBase 的文档：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:10:13.137

**假设您只想重写 CI 目录中的规则，而不是将该目录之外的任何 URL 指向它......**

将您更改`RewriteRule`为仅匹配以 CI 目录开头的 URI。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^crm/v2/(.*)$ /crm/v2/index.php?/$1 [L] 
```

或者，您可以在`/crm/v2`目录中放置一个 .htaccess 文件，并指定一个.htaccess 文件`RewriteBase`。

```
RewriteEngine on
RewriteBase /crm/v2/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

# python - numpy/scipy 等效于 R ecdf(x)(x) 函数？

> ID：15792552
> 
> 赞同：23
> 
> 时间：2013-04-03T16:12:53.550
> 
> 标签：python, r, numpy, scipy

`ecdf(x)(x)`在 numpy 或 scipy 中，R 的函数在 Python 中的等价物是什么？`ecdf(x)(x)`与以下基本相同：

```
import numpy as np
def ecdf(x):
  # normalize X to sum to 1
  x = x / np.sum(x)
  return np.cumsum(x) 
```

还是需要其他东西？

**编辑**如何控制使用的垃圾箱数量`ecdf`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-06-06T14:55:19.530

OP 的实现`ecdf`是错误的，你不应该接受`cumsum()`这些值。所以不是`ys = np.cumsum(x)/np.sum(x)`但`ys = np.cumsum(1 for _ in x)/float(len(x))`或更好`ys = np.arange(1, len(x)+1)/float(len(x))`

如果您对额外的依赖项没问题，您可以选择`statmodels`'s `ECDF`，或者提供您自己的实现。见下文：

```
import numpy as np
import matplotlib.pyplot as plt
from statsmodels.distributions.empirical_distribution import ECDF
%matplotlib inline

grades = (93.5,93,60.8,94.5,82,87.5,91.5,99.5,86,93.5,92.5,78,76,69,94.5,
          89.5,92.8,78,65.5,98,98.5,92.3,95.5,76,91,95,61)

def ecdf_wrong(x):
    xs = np.sort(x) # need to be sorted
    ys = np.cumsum(xs)/np.sum(xs) # normalize so sum == 1
    return (xs,ys)
def ecdf(x):
    xs = np.sort(x)
    ys = np.arange(1, len(xs)+1)/float(len(xs))
    return xs, ys

xs, ys = ecdf_wrong(grades)
plt.plot(xs, ys, label="wrong cumsum")
xs, ys = ecdf(grades)
plt.plot(xs, ys, label="handwritten", marker=">", markerfacecolor='none')
cdf = ECDF(grades)
plt.plot(cdf.x, cdf.y, label="statmodels", marker="<", markerfacecolor='none')
plt.legend()
plt.show() 
```

[![ECDF 比较](https://i.stack.imgur.com/vY8VJ.png)](https://i.stack.imgur.com/vY8VJ.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-03T16:18:27.230

试试这些链接：

[统计模型.ECDF](http://www.statsmodels.org/stable/generated/statsmodels.distributions.empirical_distribution.ECDF.html)

[python中的ECDF没有阶梯函数？](https://stackoverflow.com/questions/14006520/ecdf-in-python-without-step-function)

示例代码

```
import numpy as np
from statsmodels.distributions.empirical_distribution import ECDF
import matplotlib.pyplot as plt

data = np.random.normal(0,5, size=2000)

ecdf = ECDF(data)
plt.plot(ecdf.x,ecdf.y) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-09-12T18:35:53.123

R 中的[ecdf](https://www.rdocumentation.org/packages/stats/versions/3.6.1/topics/ecdf)函数返回经验累积分布函数，因此完全等效的函数是：

```
def ecdf(x):
    x = np.sort(x)
    n = len(x)
    def _ecdf(v):
        # side='right' because we want Pr(x <= v)
        return (np.searchsorted(x, v, side='right') + 1) / n
    return _ecdf

np.random.seed(42)
X = np.random.normal(size=10_000)
Fn = ecdf(X)
Fn([3, 2, 1]) - Fn([-3, -2, -1])
## array([0.9972, 0.9533, 0.682 ]) 
```

如图所示，它给出了正态分布的[正确概率为 68-95-99.7%](https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-23T00:36:55.467

这位作者有一个用户编写的 ECDF 函数的非常好的示例：[John Stachurski 的 Python 讲座](http://johnstachurski.net/lectures/more_numpy.html)。他的系列讲座面向计算经济学研究生；然而，对于任何学习 Python 通用科学计算的人来说，它们都是我的首选资源。

**编辑**：现在已经一岁了，但我想我仍然会回答你问题的“编辑”部分，以防你（或其他人）仍然觉得它有用。

与直方图一样，ECDF 确实没有任何“箱”。如果 G 是使用数据向量 Z 形成的经验分布函数，则 G(x) 实际上是 Z <= x 的出现次数除以 len(Z)。这不需要“分箱”来确定。因此，在某种意义上，ECDF 保留了有关数据集的所有可能信息（因为它必须保留整个数据集以进行计算），而直方图实际上通过分箱丢失了有关数据集的一些信息。出于这个原因，我更喜欢尽可能使用 ecdfs 与直方图。

有趣的奖励：如果您需要从非常大的流数据创建一个类似 ECDF 的小尺寸对象，您应该查看 McDermott 等人的这篇“ [Data Skeletons](http://dl.acm.org/citation.cfm?id=1288830) ”论文。

# javascript - 想要使用 cURL 将数据发布到网站但他们没有看到 POST_FIELDS

> ID：15792560
> 
> 赞同：0
> 
> 时间：2013-04-03T16:13:11.797
> 
> 标签：javascript, curl

嗨伙计们，

我非常了解如何在 php/curl 中编程并使用可用的选项。

我想知道，如果我们想将数据发布到网站（在我的情况下，我必须通过单击本质上是 javascript 的链接来回答网站中的问题）但是我使用的 LIVEhttpHeaders 插件不提供发布数据。也就是说，当我单击所需的链接时，插件会显示以下内容

```
http://www.xyz.com/ans.do?q=X2&id=cX&cid=1&oid=5
POST /ans.do?q=X2&id=cX&cid=1&oid=5 HTTP/1.1
Host: xyz.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Referer: http://www.xyz.com/Quiz.do?qId=291241
Cookie: __utma=1.399093274.1364213174.1365000359.1365004345.14;
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache
Content-Length: 0

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: text/html;charset=ISO-8859-1
Content-Language: en-US
Content-Length: 5876
Date: Wed, 03 Apr 2013 15:59:02 GMT 
```

我已经创建了一个 curl 脚本并且已经达到了测验..并且可以解析需要的参数（ q,id,cid,oid 等）。但是我如何实际发布数据（单击选项），因为它们没有 POST_FIELD ？？？

到目前为止，我一直使用以下代码

```
$url_c="$ser/ans.do?q=$q&id=$id&cid=$cid&oid=$oid;
$url_p="$ser/Quiz.do?qId=$qid";
curl_setopt($ch, CURLOPT_URL,$url_c);   
curl_setopt ($ch, CURLOPT_HTTPHEADER, Array("Content-Type: application/x-www-form-urlencoded","Accept: */*")); 
curl_setopt($ch, CURLOPT_USERAGENT, $agent);
curl_setopt($ch,CURLOPT_ENCODING,"gzip,deflate");       
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_REFERER, $url_p);  
$html=curl_exec($ch); 
```

但选项仍然如此。尝试将 POST 设置为 1 ， FOLLOWLOCATION ，但可以正常工作。

我可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:17:24.267

为什么不使用实时 http 标头而不是使用 chrome 开发人员工具并使用[它](https://stackoverflow.com/questions/5327955/how-to-make-google-chrome-javascript-console-persistent)来使控制台持久化并获取 post 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T02:36:29.240

```
$url_c="$ser/ans.do;
$query = q=$q&id=$id&cid=$cid&oid=$oid;
$url_p="$ser/Quiz.do?qId=$qid";
curl_setopt($ch, CURLOPT_URL,$url_c);   
curl_setopt ($ch, CURLOPT_HTTPHEADER, Array("Content-Type: application/x-www-form-urlencoded","Accept: *")); 
curl_setopt($ch, CURLOPT_USERAGENT, $agent);
curl_setopt($ch,CURLOPT_ENCODING,"gzip,deflate");       
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_REFERER, $url_p); 
```

这些是你设置的吗？

```
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $query);

$html=curl_exec($ch); 
```

# asp.net - 如何在区域中启用 ASP.NET Web API 帮助页面文档

> ID：15792565
> 
> 赞同：1
> 
> 时间：2013-04-03T16:13:33.373
> 
> 标签：asp.net, asp.net-web-api

我正在使用区域来帮助组织我的 Web API。我基本上有两组 API，一组用于执行帐户/用户管理，另一组使用我提供的服务。

所以我的路由看起来像这样

“api/{area}/{controller}/{action}/{accountNumber}”

在我开始使用 Areas 之前，帮助页面运行良好，但在我开始使用 Areas 之后，它停止生成帮助文档。我需要配置什么来让“帮助”页面包含区域吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:31:15.807

我已经使用多条路线来解决没有区域的同一件事：

```
config.Routes.MapHttpRoute("Foo",
                           "api/Foo/{fooId}",
                           new {controller = "Foo", fooId = RouteParameter.Optional});

config.Routes.MapHttpRoute("Foo_Bar",
                           "api/Foo/{FooId}/Bars/{barId}",
                           new {controller = "Bar", barId = RouteParameter.Optional}); 
```

与 HelpPage 一起工作正常。

我也尝试过[AttributeRouting](http://attributerouting.net)，但我更喜欢我的路线。

# java - NSData 字节与来自 Java WS 的具有相同 base64 字符串的字节不匹配

> ID：15792569
> 
> 赞同：2
> 
> 时间：2013-04-03T16:13:45.643
> 
> 标签：java, ios, objective-c, web-services

我在 iOS 应用程序中使用协议缓冲区。该应用程序使用一个用 Java 编写的 Web 服务，该服务返回一个 base64 编码的字符串。

base64 字符串两端*相同。*

然而，在应用程序中，每当我尝试将字符串转换为 NSData 时，两端的字节数可能相同也可能不同。结果是可能的无效协议缓冲区异常，无效结束标记。

例如：

```
Source(bytes) | NSData  | Diff
93              93         0
6739            6735      -4
5745            5739      -6 
```

在空协议缓冲区的普通情况下，字节是相等的。

这是Java源代码：

```
import org.apache.commons.codec.binary.Base64;

....

public static String bytesToBase64(byte[] bytes) {
    return Base64.encodeBase64String(bytes);
} 
```

在 iOS 方面，我尝试了来自类似问题的各种算法，这些算法在字节大小和内容上都一致。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:06:47.070

经过仔细检查，问题在于我假设 Base64 是 Base64。我在 Web 服务中使用了**url**变体，而应用程序的解码需要一个普通版本。

我注意到 Base64 中的下划线，我觉得这很奇怪。

Base64 页面[http://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64) map of value/char 没有显示下划线，但在文章后面会讨论变体，这些变体确实使用下划线。

# java - Java JFrame Dispose 关闭不释放 JPanel 数据

> ID：15792571
> 
> 赞同：1
> 
> 时间：2013-04-03T16:13:51.220
> 
> 标签：java, swing, jframe, jpanel

我目前正在使用 JFrames 和 JPanels。

JFrame - 带有按钮等的窗口。 JPanel - 用于paintComponent 等的区域。

我有我的***mainWindow***和一个***subWindow***

***mainWindow***是一个调用***subWindow***的 JFrame，它是一个带有 JPanel 的 JFrame。

***subWindow***使用`setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);`，因为我不想在关闭***subWindow时关闭所有内容***

***mainWindow***通过调用***subWindow***`new subWindow();`

当我关闭***subWindow***并重新打开它的另一个实例时，旧的paintComponent 东西仍在 JPanel 中。即，如果我第一次打印一个圆圈，它仍然会出现在***subWindow***的新实例中。

我注意到，当重新打开***subWindow时，使用的旧变量仍然存在，而不是新的。***

***退出subWindow***时如何手动转储所有内容？为什么当我调用***subWindow***的新实例时旧变量仍然存在？

# c# - 异常的 ToString() 方法

> ID：15792572
> 
> 赞同：3
> 
> 时间：2013-04-03T16:13:52.183
> 
> 标签：c#, resharper, tostring

我在某人的代码中发现了以下内容：

```
catch (Exception exception)
{
    Console.WriteLine(exception.ToString());
} 
```

Resharper 将`ToString()`呼叫灰显，这一如既往是一个很好的建议。没有它，这个 C# 代码如何工作？会`ToString()`被隐式调用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T16:18:49.103

[Console.WriteLine 有一个](http://msdn.microsoft.com/en-gb/library/swx4tc5e.aspx)接受对象的重载。该对象的`ToString`方法是在内部调用的，因此您无需首先添加`ToString`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T16:16:38.580

如果在字符串中使用了异常...例如`"something" + exception.ToString()`or `String.Format("... {0}", exception)`，那么是的，`ToString`将被调用，而不必显式调用它。

而且...当您更新示例时，将调用`Console.WriteLine()`针对任何对象值的`ToString`调用。[这是文档](http://msdn.microsoft.com/en-us/library/swx4tc5e.aspx)，包含尽可能多的详细信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T16:16:38.657

我假设某事是字符串连接或用作格式化字符串中的参数，那么是的，`ToString`被隐式调用。

**更新以下问题更新**

控制台有一个接受`object`参数的 WriteLine 重载，在此版本中，如果传递的实例不为空，则调用方法 ToString - R# 意识到这一点并建议选择更可取的重载。

# wordpress - Wordpress comment_form() 问题

> ID：15792573
> 
> 赞同：0
> 
> 时间：2013-04-03T16:13:52.303
> 
> 标签：wordpress, forms, blogs, contact

我有一个带有此代码的 comments.php 文件

```
$fields =  array(
  'author' => '<p class="comment-form-author">' . '<label for="author">' . __( 'Name' ) .    '</label> ' . ( $req ? '<span class="required">*</span>' : '' ) .
  '<input id="author" name="author" type="text" value="' . esc_attr(  $commenter['comment_author'] ) . '" size="30"' . $aria_req . ' /></p>',
  'email'  => '<p class="comment-form-email"><label for="email">' . __( 'Email' ) . '</label> ' . ( $req ? '<span class="required">*</span>' : '' ) .
  '<input id="email" name="email" type="text" value="' . esc_attr(  $commenter['comment_author_email'] ) . '" size="30"' . $aria_req . ' /></p>',
  'url'    => '<p class="comment-form-url"><label for="url">' . __( 'Website' ) . '</label>' .
  '<input id="url" name="url" type="text" value="' . esc_attr( $commenter['comment_author_url'] ) . '" size="30" /></p>',
);

$comments_args = array(
  'fields' =>  $fields
);

comment_form($comments_args); 
```

然后，我将其包含在内：

```
get_template_part('comments'); 
```

但是显示的评论表是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/YtfX7.jpg)

根本不是我想要的，我的表格在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:18:32.227

您以管理员身份登录 - 尝试注销并查看会发生什么。

# php - Web.config 上的写入权限的安全问题

> ID：15792576
> 
> 赞同：1
> 
> 时间：2013-04-03T16:14:03.753
> 
> 标签：php, iis-7, url-rewriting, web-config, security

我目前有一个在 IIS7.5 服务器上运行的 PHP 站点。

我在 web.config 中使用为 IIS 构建的 url 重写工具。

我的 CMS 管理员能够允许用户编写自己的重写。所以我用 PHP 编写的管理工具需要 IUSER 的写入修改权限，以便 PHP 修改文件。但是我认为这可能不是安全的好习惯，所以我决定将重写移动到 web.config 引用的 rewrite.config 文件中。然后我授予重写文件而不是 web.config 的写入/修改权限。

唯一的问题是 IIS 缓存外部重写文件并且不会重新加载它，除非 web.config 的最后修改日期被缓存。我可以通过在文本编辑器中打开 web.config，添加空格或其他内容然后单击保存来手动强制服务器重新加载我的 rewrite.config 文件，然后服务器会注意到上次修改日期已更改，然后重新加载重写文件随着新的重写。

不过，我不能永远继续这样做，我需要我的管理工具来允许用户添加他们自己的重写，而不必在他们的重写生效之前打电话给我在 web.config 中进行更改。

我了解到我可以在 web.config 文件上调用 PHP 中的 touch 函数，这解决了我的问题，因为它更改了 web.config 文件上的最后修改日期。然而，为了让触摸工作 PHP 需要 IUSER 具有写入权限，但不能修改权限。

所以最后我的问题是......安全方面，是否可以让 web.config 具有 IUSER 权限来读取和写入但不能修改？或者这仍然是一个安全问题。

如果是这样，我为这个网站创建了哪些漏洞？而且，我怎样才能改变我的方法，不让自己对这些漏洞敞开心扉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-05T21:47:19.237

回答我自己的问题。最好避免向 web.config 授予 I_USER 权限。我们最终重写了我们的代码，不再需要这个。

# oop - 在 OOP 中使用接口作为参数和返回类型的缺点

> ID：15792577
> 
> 赞同：1
> 
> 时间：2013-04-03T16:14:04.743
> 
> 标签：oop, interface, casting, parameter-passing, return-type

这是一个独立于语言的问题。从概念上讲，最好为接口（合同）而不是特定实现编码。我理解这种做法的优点没有问题。

但是，当我真正在那种实践中编码时，我的类的用户有时需要转换接口以满足实现该接口的特定类提供的特定功能的特定需求。

我知道无论是在我这边还是在用户那边，一定有问题，因为接口应该公开所有可能需要的方法/属性（在 c# 的情况下）。

代码库很大，用户就是客户。在任何一方进行更改都不会特别容易。

这让我想知道使用接口作为参数和返回类型的一些缺点。人们可以列出这种做法的缺点吗？如果您知道如何解决它，请提供任何解决方案。

非常感谢您启发我。

编辑：更具体一点：假设我们有一个名为 DbInfoExtractor 的类。它有一个公共方法GetInfo，如下：

```
public IInformation GetInfo(IInfoParam); 
```

其中 IInformation 是由 VideoInfo、AudioInfo、TextInfo 等特定类实现的接口；IInfoParam 是由 VidoeInfoParam、AudioInfoParam、TextInfoParam 等特定类实现的接口；

显然，根据传入方法 GetInfo 的具体对象，DbInfoExtractor 需要采取不同的操作，因为可以合理地假设对于不同类型的信息，提取器会考虑不同的方面集（例如 {size, title, date}用于视频，{标题，​​作者}用于文本信息等）作为搜索键并以不同方式搜索相关信息。

在这里，我看到了两个选项： 1，使用 if ... else ... 根据 GetInfo 方法接收的参数类型来决定实际采用什么。这当然很糟糕，因为避免这种情况是我们使用多态性的原因之一。

2、我们应该调用IInfoParam.TakeAction()，而IInfoParam的每一个具体实现都有自己的TakeAction()方法来实际从数据库中搜索找到对应的信息。这个选项看起来更好，但仍然很糟糕，因为它不应该是采取行动搜索和查找信息的参数；它应该是 DbInfoExtractor 的责任。

那么如何将 TakeAction 委托回 DbInfoExtractor？（实际上我写了一些代码来做这个，但它既不标准也不优雅。基本上我将参数类嵌套在 DbInfoExtractor 中，以便它们可以调用 DbInfoExtractor 的各种版本的 TakeAction。）

请赐教！谢谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:09:04.187

为什么不

```
public IVideoInformation GetVideoInformation(VideoQuery);
public IAudioInformation GetAudioInformation(AudioQuery);
// etc. 
```

看起来这里不需要多态性。

如果需要，查询类型是[Query Objects 。](http://www.martinfowler.com/eaaCatalog/queryObject.html)它们可能不需要是接口；他们对数据库一无所知。一个简单的参数列表（可能只是 ID）可能就足够了。

问题是客户有什么，他们想要什么？那是你的界面。

Switch 语句和强制转换是一种气味，通常意味着您违反了[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

# php - 初学者 PHP 抓取帮助 - 获取 img src？

> ID：15792579
> 
> 赞同：0
> 
> 时间：2013-04-03T16:14:17.473
> 
> 标签：php, preg-match, screen-scraping, preg-match-all

我目前正在尝试增加我对 PHP 的了解，并且我已经为自己设定了抓取网站并将我检索到的数据转换为 JSON 格式的任务。

这是我要解析的数据的示例行：

```
 <tr>
 <td class="first">
     <img id="ctl00_Content_ctl00_rptInfo_ctl01_Image1" alt="Active" src="../../images/t1.jpg" style="border-width:0px;" />              
 </td>
 <td >
      Copenhagen
 </td>
 <td>
      Sas
 </td>
 <td>
     SK537
 </td>
 <td>
     02 Apr 10:20
 </td>
 <td class="last">
     Delayed 11:30
 </td>
 </tr> 
```

到目前为止，这是我的 PHP 代码：

```
$raw = file_get_contents($url);

$newlines = array("\t","\n","\r","\x20\x20","\0","\x0B");
$content = str_replace($newlines, "", html_entity_decode($raw));

$start = strpos($content,'<table width="100%" cellspacing="0" cellpadding="0" border="0" summary="Departure times detail information"');

$end = strpos($content,'</table>',$start) + 8;

$table = substr($content,$start,$end-$start);

preg_match_all("|<tr(.*)</tr>|U",$table,$rows);

foreach ($rows[0] as $row){

    if ((strpos($row,'<th')===false)){

        preg_match_all("|<td(.*)</td>|U",$row,$cells);

        $url_src = strip_tags($cells[0][0]);

        $airport = strip_tags($cells[0][1]);

        $airline = strip_tags($cells[0][2]);

            $flightnum = strip_tags($cells[0][3]);

            $schedule = strip_tags($cells[0][4]);

            $status = strip_tags($cells[0][5]);

        echo "{$url_src} - {$aiport} - {$airline} - {$flightnum} - {$schedule} -  {$status}<br>\n";

    }

} 
```

我目前几乎可以正确获取所有值，除非我似乎无法为包含此值的单元格获取任何内容：

```
<td class="first">
     <img id="ctl00_Content_ctl00_rptInfo_ctl01_Image1" alt="Active" src="../../images/t1.jpg" style="border-width:0px;" />              
</td> 
```

任何人都可以帮助我获取获取 img 字符串所需的内容，我很高兴能够`<td></td>`像这样获取整个字符串：

`<img id="ctl00_Content_ctl00_rptInfo_ctl01_Image1" alt="Active" src="../../images/t1.jpg" style="border-width:0px;" />`

但是，如果可以仅解析 src 字符串，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:06:01.537

您的`<img>`标签根本没有打开，这就是您的正则表达式不会解析它的原因。

尝试：

```
<td class="first">
     <img id="ctl00_Content_ctl00_rptInfo_ctl01_Image1" alt="Active" src="../../images/t1.jpg" style="border-width:0px;" />              
</td> 
```

# sqlite - SQLite FTS：通过匹配和限制获取结果计数的快速方法是什么？

> ID：15792586
> 
> 赞同：0
> 
> 时间：2013-04-03T16:14:29.807
> 
> 标签：sqlite, count, full-text-search, match

在 SQLite 中： Select * from table1 where table1 match 'any word here' limit 10 offset 0;

我需要得到总结果数，比如 10,000

所以我应该执行另一个请求，例如： Select count(*) from table1 where table1 match 'any word here';

有更快的解决方案吗？

我搜索并没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:52:01.627

SQLite 即时计算结果记录。因此，当您使用该`LIMIT`子句时，将永远不会看到第十个之后的任何记录。

如果您需要总计数，则必须使用`COUNT`.

# c# - 从另一个窗口访问在 App.xaml (WpfNotifyIcon Tooltip) 中声明的文本框

> ID：15792588
> 
> 赞同：1
> 
> 时间：2013-04-03T16:14:32.853
> 
> 标签：c#, .net, wpf, xaml, notifyicon

我正在使用 WpfNotifyIcon，我已将其声明为如下资源：

```
<Application x:Class="NotifyIconScratchPad2.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:tb="http://www.hardcodet.net/taskbar" 
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <tb:TaskbarIcon x:Key="MyNotifyIcon" IconSource="Icons/stopwatch_start.ico" ToolTipText="Hello world" >
            <tb:TaskbarIcon.TrayToolTip>
                <TextBlock x:Name="ChangeThis" Text="Hello world"  />
            </tb:TaskbarIcon.TrayToolTip>
            </tb:TaskbarIcon>
    </Application.Resources>
</Application> 
```

为了使用它，我声明它`MainWindow.xaml.cs`：

```
 public TaskbarIcon tb;
    public Window1 myWindow;
    public MainWindow()
    {
        InitializeComponent();
        tb = (TaskbarIcon) FindResource("MyNotifyIcon");
    } 
```

如何`ChangeThis`从另一个窗口访问文本框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:39:14.663

您可以使用 FindName 方法：

```
 TextBox txtToChange= tb.FindName("txt_ChangeThis") as TextBox; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:24:35.033

最终的答案是设置一个事件来这样做。

[模型-视图-视图模型](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)模式是实现这一目标的好方法。

基本上，您有一个实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口的类以及文本框和数据源之间的双向[数据绑定。](http://msdn.microsoft.com/en-us/library/ms750612.aspx)

# java - Java - 字符串上的正则表达式以确定日期

> ID：15792590
> 
> 赞同：-3
> 
> 时间：2013-04-03T16:14:35.650
> 
> 标签：java, regex, date

我对解决此问题的最有效方法感到有些困惑。

我有一大串文本，其中某处是字符串`"Wednesday, April 3, 2013 from 9:00 AM to 6:00 PM"`。

我知道文本将始终采用这种格式，但我需要一种从字符串中提取此信息的方法。我认为正则表达式是最好的选择，但我不知道这个字符串之前和之后会是什么，我无法匹配字符数，因为月份和日期的长度不同。字符串也可以是任意长度。

我想我的问题是，我可以在这个字符串上使用正则表达式来提取日期和时间吗？考虑到字符串可能是 1 到 10000+ 个字符，这是否是解决这个问题的有效方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:38:56.873

不是最短的正则表达式，但它适用于您的示例：

```
((Mon|Tues|Wednes|Thurs|Fri|Satur|Sun)day, January|February|March|April|May|June|July|August|September|October|November|December) \d+, \d{4} from \d+:\d+ [AP]M to \d+:\d+ [AP]M) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:17:53.377

也许你可以做这样的事情：

```
(Sunday|Monday|...), (January|February|...) [1-9][0-9]?, \d{4} 
```

您需要在其中完成`...`明显的列表（为清楚起见省略）。此外，您可以收紧日期和年份的语法，这样您就不会接受像 4 月 43 日这样的日期或像 0312 这样的年份。但是如果您可以假设输入是正确的并且您只是试图找到它，那么这些步骤是不必要的.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:19:27.107

这有点宽容，但在大多数情况下应该可以工作：

```
String resultString = null;
try {
    Pattern regex = Pattern.compile("(\\w+,\\s+\\w+\\s+\\d{1,2},\\s+\\d{4}\\s+from\\s+\\d{1,2}:\\d{1,2}\\s+AM\\s+to\\s+\\d{1,2}:\\d{1,2}\\s+PM)",
        Pattern.CANON_EQ | Pattern.DOTALL);
    Matcher regexMatcher = regex.matcher(subjectString);
    if (regexMatcher.find()) {
        resultString = regexMatcher.group();
    } 
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

这个检查月份名称和工作日名称：

```
Pattern regex = Pattern.compile("((?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),\\s+(?:January|February|March|April|May|June|July|August|September|October|November|December)\\s+\\d{1,2},\\s+\\d{4}\\s+from\\s+\\d{1,2}:\\d{1,2}\\s+AM\\s+to\\s+\\d{1,2}:\\d{1,2}\\s+PM)",
        Pattern.CANON_EQ | Pattern.DOTALL); 
```

# nlp - TF-IDF 是否存在比使用词频向量更糟糕的情况？

> ID：15792593
> 
> 赞同：3
> 
> 时间：2013-04-03T16:14:40.400
> 
> 标签：nlp, mahout, tf-idf, term-document-matrix

我现在正在做文本分类。TF-IDF 是否存在比使用词频向量更糟糕的情况？怎么解释？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:23:21.700

> 两个指标……都在两个维度上进行区分——信息性（IDF）和关于性（TF）
> 
> 包含数百次出现的某些高 IDF 术语的文档将导致糟糕的、嘈杂的匹配……在 ex。垃圾邮件文件

一本好书——[超越词袋](http://maroo.cs.umass.edu/pub/web/getpdf.php?id=779)，（Donald A. Metzler Jr. 2007）

# sharepoint-2013 - 在 sharepoint 2013 web 部件中使用更新面板

> ID：15792595
> 
> 赞同：3
> 
> 时间：2013-04-03T16:14:47.023
> 
> 标签：sharepoint-2013

我们在 sharepoint 2013 中面临与 updatepanel 相关的问题。我们有一个包含标签和按钮的示例 web 部件，我们想在按钮的单击事件中编写一些东西到标签而不刷新整个页面。我们的示例代码如下：

```
 <asp:UpdatePanel runat="server" ID="UpdatePanel1">
    <ContentTemplate>
        <asp:Label ID="lbl" runat="server" Text="Loaded" Visible="true"></asp:Label>
        <asp:Button ID="btn" runat="server" OnClick="btn_Click"/>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btn" EventName="Click" />
    </Triggers>
    </asp:UpdatePanel>    

    protected void btn_Click(object sender, EventArgs e)
    {
        lbl.Text = "BUTTON CLICKED !";
        lbl.Visible = true;
    } 
```

我们已经尝试了此[链接](http://msdn.microsoft.com/en-us/library/bb861877.aspx)中提到的解决方案，但无法实现我们的目标。

此问题的任何解决方案以及示例代码都将受到高度赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T08:33:22.170

我注意到内容搜索 webpart 和更新面板由于某种原因无法在 SharePoint 2013 上协同工作。如果我将我的自定义更新面板 webpart 添加到独立页面而不是使用 updapanel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T10:56:09.327

您是否尝试过使用 UpdateMode 和 ChildrenAsTriggers？像这样的例子：

```
 <asp:UpdatePanel id="UpdatePanel1" runat="server" 
         UpdateMode="Conditional" ChildrenAsTriggers="true" > 
```

# node.js - 将异步/回调方法转换为阻塞/同步方法

> ID：15792599
> 
> 赞同：3
> 
> 时间：2013-04-03T16:14:54.620
> 
> 标签：node.js

是否可以将节点中基于异步/回调的方法转换为阻塞/同步方法？

我很好奇，更多的是从理论上的 POV，而不是“我有问题要解决”的 POV。

我看到如何通过[Q](https://github.com/kriskowal/q)等将回调方法转换为**values** ，但调用不会阻止执行。`Q.done()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-13T04:32:25.430

要在“多线程环境”中将异步函数变为同步函数，我们需要设置一个循环检查结果，从而导致阻塞。

这是JS中的示例代码：

```
 function somethingSync(args){
    var ret; //the result-holding variable
    //doing something async here...
    somethingAsync(args,function(result){
    ret = result;
    });
    while(ret === undefined){} //wait for the result until it's available,cause the blocking
return ret;
    } 
```

或者

[synchronize.js](http://alexeypetrushin.github.io/synchronize/docs/index.html)也有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T21:38:52.433

虽然我不推荐它，但这可以通过某种繁忙的等待轻松完成。例如：

```
var flag = false;
asyncFunction( function () { //This is a callback
    flag = true;
})

while (!flag) {} 
```

while 循环会不断循环，直到回调执行完毕，从而阻塞执行。

正如您可以想象的那样，这会使您的代码非常混乱，因此如果您要这样做（我不建议这样做），您应该制作某种辅助函数来包装您的异步函数；类似于 Underscore.js 的 Function 函数，例如[throttle](http://underscorejs.org/#throttle)。通过查看带[注释的源代码](http://underscorejs.org/docs/underscore.html)，您可以准确了解它们的工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:59:27.113

[node-sync](https://github.com/0ctave/node-sync)模块可以帮助您做到这一点。但请注意，这不是 node.js 的方式。

# c - 如何读取 bin 文件的内容，直到没有数据为止

> ID：15792602
> 
> 赞同：0
> 
> 时间：2013-04-03T16:15:00.993
> 
> 标签：c, file, fread

我必须读取一个二进制 (.bin) 文件。该文件具有 RGBA 数据的视频数据。每个组件由 4096 个字节组成，类型为**unsigned char**。因此，我打开文件并读取文件，如下代码片段所示：

```
FILE *fp=fopen(path,"rb");
//Allocating memory to copy RGBA colour components
unsigned char *r=(unsigned char*)malloc(sizeof(unsigned char)*4096);
unsigned char *g=(unsigned char*)malloc(sizeof(unsigned char)*4096);
unsigned char *b=(unsigned char*)malloc(sizeof(unsigned char)*4096);
unsigned char *b=(unsigned char*)malloc(sizeof(unsigned char)*4096);

//copying file contents
fread(r,sizeof(unsigned char),4096,fp);
fread(g,sizeof(unsigned char),4096,fp);
fread(b,sizeof(unsigned char),4096,fp);
fread(a,sizeof(unsigned char),4096,fp); 
```

一旦将数据复制到 r,g,b,a 中，它们就会被发送到合适的功能进行显示。上面的代码适用于复制一组 RGBA 数据。但是我应该继续复制并继续发送数据以供显示。

我搜索并只能找到显示文件内容的示例，但它仅适用于文本文件，即 EOF 技术。

因此，我恳请用户为将上述代码片段插入循环（循环条件）提供合适的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:33:40.010

fread 有一个返回值。如果出现错误，您想检查它。

> fread() 和 fwrite() 返回成功读取或写入的项目数（即，不是字符数）。如果发生错误或到达文件结尾，则返回值是一个短项目计数（或零）。

所以，你想尝试做一个 fread，但一定要寻找错误。

```
while (!feof(fp) {
  int res = fread(r,sizeof(unsigned char),4096,fp);
  if (res != 4096) {
     int file_error = ferror(fp)
     if (0 != file_error) {
        clearerr(fp)
        //alert/log/do something with file_error?
          break;
     }
  }
 //putting the above into a function that takes a fp 
 // and a pointer to r,g,b, or a would clean this up. 
 // you'll want to wrap each read
  fread(g,sizeof(unsigned char),4096,fp);
  fread(b,sizeof(unsigned char),4096,fp);
  fread(a,sizeof(unsigned char),4096,fp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:18:50.247

我认为 EOF 技术在这里会做得很好，例如：

```
while (!feof(fp))
   fread(buffer, sizeof(unsigned char), N, fp); 
```

在您的文件中有 (R,G,B,A) 值吗？

```
int next_r = 0;
int next_g = 0;
int next_b = 0;
int next_a = 0;
#define N 4096

while (!feof(fp))
{
    int howmany = fread(buffer, sizeof(unsigned char), N, fp);

    for (int i=0; i<howmany; i+=4)
    {
        r[next_r++] = buffer[i];
        g[next_g++] = buffer[i+1];
        b[next_b++] = buffer[i+2];
        a[next_a++] = buffer[i+3];
    }
} 
```

# r - 如何生成正态分布的多维点

> ID：15792603
> 
> 赞同：1
> 
> 时间：2013-04-03T16:15:02.660
> 
> 标签：r, random, vector

我需要生成一个随机的多维聚类数据。为此，我想生成几个均匀分布的多维点（中心），然后在每个点周围生成许多正态分布点。如何将向量（多维点）设置为正态分布的平均值？我看到该函数`rnorm`可以获取向量`mean`和`sd`参数，但我真的不明白它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:28:43.063

包装`mnormt`,功能`rmnorm()`

```
set.seed(2)
require(mnormt)
varcov <- matrix(rchisq(4, 2), 2)
varcov <- varcov + t(varcov)

rmnorm(1000, mean=c(0,1), varcov=varcov) 
```

# jenkins - 无法在 openshift jenkins 上构建

> ID：15792610
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:15:19.187
> 
> 标签：jenkins, openshift

当我尝试在 openshift jenkins 上构建项目时出现以下异常

```
Apr 03, 2013 12:08:27 PM hudson.plugins.openshift.OpenShiftCloud provision
INFO: Provisioning new node for workload = 2 and label = null
Apr 03, 2013 12:08:27 PM hudson.plugins.openshift.OpenShiftCloud provision
INFO: Cancelling build - Label is null
Apr 03, 2013 12:08:27 PM hudson.plugins.openshift.OpenShiftCloud cancelBuild
INFO: Cancelling build
Apr 03, 2013 12:08:27 PM hudson.plugins.openshift.OpenShiftCloud cancelItem
INFO: Cancelling Item 
Apr 03, 2013 12:08:27 PM hudson.plugins.openshift.OpenShiftCloud cancelItem
WARNING: Build null rawbldr has been canceled
Apr 03, 2013 12:08:27 PM hudson.triggers.SafeTimerTask run
SEVERE: Timer task hudson.slaves.NodeProvisioner$NodeProvisionerInvoker@6d7414 failed
java.lang.UnsupportedOperationException: No Label
    at hudson.plugins.openshift.OpenShiftCloud.provision(OpenShiftCloud.java:391)
    at hudson.slaves.NodeProvisioner.update(NodeProvisioner.java:227)
    at hudson.slaves.NodeProvisioner.access$000(NodeProvisioner.java:51)
    at hudson.slaves.NodeProvisioner$NodeProvisionerInvoker.doRun(NodeProvisioner.java:308)
    at hudson.triggers.SafeTimerTask.run(SafeTimerTask.java:54)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:58:29.470

我们正在升级中，这可能是这里的原因。请在升级完成后重试。在此处查看最新状态：[https ://openshift.redhat.com/app/status](https://openshift.redhat.com/app/status)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:19:04.477

问题是我必须“限制这个项目可以在哪里运行”并指定标签（之前它没有它就可以工作..可能是别的东西..）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T10:11:30.127

如果你想在 openshift jenkins 上构建一些东西，它需要与 jenkins 工作工作区连接（你在 openshift 应用程序中使用`Enable Jenkins builds`选项启用它时生成它）。然后添加到自动创建的詹金斯作业选项`Restrict where this project can be run`，并放置对工作区的引用。

通常名称如下所示：{project_name}_build

# scripting - 下载然后通过批处理安装 - 如何下载然后静默安装 msi？

> ID：15792611
> 
> 赞同：0
> 
> 时间：2013-04-03T16:15:22.293
> 
> 标签：scripting, vbscript, batch-file, windows-installer

我知道如何使用 /qn 静默安装 msi。我也知道如何通过使用命令 start [http://www.example.com/file.exe](http://www.example.com/file.exe)来下载东西。但是我如何将这两个放在一个批处理文件中？！我想下载它，然后安装它，一切都是静默的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:26:02.960

尝试 start /w URL 看看它是否会模态等待。如果没有，请下载`wget for Windows`并使用该 start /w 选项：

`start /w "wget -c http://example..."`

`start /w "file /qn"`

`if not errorlevel 1 echo Success!`

可能有问题，但这应该会推动你朝着正确的方向前进。

# linux - CSV 上的 Awk/sed 循环 - 将子项绑定到第 1 列

> ID：15792613
> 
> 赞同：0
> 
> 时间：2013-04-03T16:15:32.610
> 
> 标签：linux, bash, sed, awk

应查尔斯·达菲（Charles Duffy）的要求以更窄的焦点重新创建此内容。

我有一个如下所示的 CSV 文件：

```
Security Policy: Blahblahblah,,,,,,,,,
12,,host_A,net-B,https,drop,Log,Any,Any,comments
13,,host_A,net-B,smtp,drop,Log,Any,Any,comments
14,,host_A,net-B,http,accept,Log,Any,Any,comments 
,,net-C,,,,,,,
,,net-D,,,,,,,
15,,host_A,net-B,http,accept,Log,Any,Any,comments
,,host_B,net-C,service_X,,,,,
,,host_C,net-D,service_y,,,,,
,,host_D,,,,,,,
,,host_E,,,,,,, 
```

我需要分别解析每个值，但是我需要在各自的语句中包含 $1。如您所见，这对于 13 和 14 来说很容易，但是当 14 和 15 的列为空白（子级）时，这将成为一个严重的问题。

循环这个最好的方法是什么？

例如，我希望输出看起来像：

```
'text goes here' $1 'more text' $3 'more text'
'text goes here' $1 'more text' $4 'more text' 
```

等等

使用实际值（对于 15）：

```
'text goes here' 15 'more text' host_A 'more text'
'text goes here' 15 'more text' host_B 'more text'
'text goes here' 15 'more text' host_C 'more text'
'text goes here' 15 'more text' host_D 'more text'
'text goes here' 15 'more text' host_E 'more text'
'text goes here' 15 'other text' net-B 'more text'
'text goes here' 15 'other text' net-C 'more text'
'text goes here' 15 'other text' net-D 'more text'
'text goes here' 15 'text' http 'more text'
'text goes here' 15 'text' service_X 'more text'
'text goes here' 15 'text' service_y'more text' 
```

等等等等。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:17:46.250

我真的在猜测，因为您的问题并没有很好地解释您想要什么，但是您正在寻找的是这样的东西：

```
$ cat file
Security Policy: Blahblahblah,,,,,,,,,
12,,host_A,net-B,https,drop,Log,Any,Any,comments
13,,host_A,net-B,smtp,drop,Log,Any,Any,comments
14,,host_A,net-B,http,accept,Log,Any,Any,comments
,,net-C,,,,,,,
,,net-D,,,,,,,
15,,host_A,net-B,http,accept,Log,Any,Any,comments
,,host_B,net-C,service_X,,,,,
,,host_C,net-D,service_y,,,,,
,,host_D,,,,,,,
,,host_E,,,,,,,

$ awk -f tst.awk file
12  host_A net-B https drop Log Any Any comments
13  host_A net-B smtp drop Log Any Any comments
14  host_A net-B http accept Log Any Any comments
14  net-C net-B http accept Log Any Any comments
14  net-D net-B http accept Log Any Any comments
15  host_A net-B http accept Log Any Any comments
15  host_B net-C service_X accept Log Any Any comments
15  host_C net-D service_y accept Log Any Any comments
15  host_D net-B http accept Log Any Any comments
15  host_E net-B http accept Log Any Any comments

$ cat tst.awk
BEGIN{ FS="," }
NR==1 { next }
$1 != "" { split($0,dflt) }
{ for (i=1;i<=NF;i++) if ($i == "") $i = dflt[i]; print } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:21:03.270

```
process_file() {
  # declare local variables
  declare -a last_seen row
  declare col_idx col

  read # discard first line

  while IFS=, read -r -a row; do
    # for each remaining line...
    for col_idx in "${!row[@]}"; do
      # update last-seen rows with any contents here
      col=${row[$col_idx]}
      if [[ $col ]]; then
        last_seen[$col_idx]=$col
      fi
    done

    # ...and operate on those values.
    printf 'text goes here %s more text %s more text\n' \
      "${last_seen[0]}" "${last_seen[2]}" "${last_seen[3]}"
  done
}

process_file <input.csv >output.txt 
```

# javascript - 如何在Javascript中以编程方式从iframe中获取父窗口的焦点

> ID：15792620
> 
> 赞同：2
> 
> 时间：2013-04-03T16:15:55.970
> 
> 标签：javascript, internet-explorer, firefox, iframe, focus

一些网站`focus`在窗口加载时设置了一个元素。如果我 iframe 该网站，似乎无法以编程方式将焦点设置在父窗口上。这只发生在`IE`(9) 和`Firefox`(19) 中，Opera/Safari/Chrome 都可以。

```
<script>
window.onload = function() {
    setTimeout(function() {
        // this does not focus #foo
        document.getElementById("foo").focus();
    // or more seconds that enough to see the iframe focus
    }, 3000);
};
</script>
<input id="foo" type="text" value="foo" /><br />
<iframe width="800" height="500" src="http://www.bing.com" /> 
```

有谁知道这个问题的解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T17:17:56.457

得到答案，现在它适用于所有浏览器

```
<script>
window.onload = function() {
    // blur the iframe
    document.getElementById("bing").blur();
    // set focus on #foo
    document.getElementById("foo").focus();
    // when iframe tries to focus, focus #foo
    document.getElementById("foo").onblur = function() {
        this.focus();
    };
};
</script>
<input id="foo" type="text" value="foo" /><br />
<iframe id="bing" width="800" height="500" src="http://wwww.bing.com" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:31:40.420

如果我没看错，您只需要防止焦点从父窗口转移到 iframe 中的元素。

我会在 iframe 元素上使用“onfocus”触发器将焦点切换回您的页面，如下所示：

```
<iframe width="800" height="500" src="http://www.bing.com" onfocus="document.getElementById('foo').focus();"/> 
```

如果（我怀疑你这样做）您只想防止 iframe 窃取初始焦点 onload 但希望用户能够稍后将焦点转移到它，请使用状态变量，如下所示：

```
<script type="text/javascript">
var initialFocus = false;
</script>

<iframe width="800" height="500" src="http://www.bing.com" onfocus="if (initialFocus==false) { document.getElementById('foo').focus(); initialFocus = true; }"/> 
```

我希望这会有所帮助，如果您有任何问题，我会在这里。

# iphone - 跳过带有委托的视图控制器

> ID：15792626
> 
> 赞同：0
> 
> 时间：2013-04-03T16:16:12.730
> 
> 标签：iphone, ios, objective-c, delegates, viewcontroller

我转了几天。我有 3 个 ViewController 的层次结构。

从 VC1 开始，从那里你可以加载 VC2。在 VC2 中，您可以加载 VC3。

我的导航工作正常 VC1->VC2->VC3 和向后相同。

VC3 允许用户返回到 VC1。

我想知道是否可以告诉 VC3 VC1 现在是它的代表。它适用于 VC2，但我想在 VC1 中使用保存在 VC3 中的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:39:29.213

创建一个委托以将值从一个类传递给另一个类。然后在 VC1 和 VC2 中设置委托，其中 VC1 从 VC2 接收，VC2 从 VC3 接收

然后从 VC3 调用委托并将值传递给 VC2。在 VC2 中，被调用的方法实现其委托到 VC1 的调用，并且值在 vc1 中

```
VC3-->del-->VC2-->del->VC1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:24:38.940

我建议例如在每个视图控制器中添加一个名为“master”的弱属性，并使其指向呈现它的视图控制器。完成此操作后，您可以通过以下方式从 VC3 访问 VC1（及其所有数据）：

```
VC1ViewController *vc1 = self.master.master; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:21:20.297

如果 VC1 是 VC2 的委托，您可以将 VC2 的委托属性分配给 VC3 的委托属性

在 VC3 被推入导航堆栈之前的 VC2 @implementation 中：

```
vc3Instance.delegate = self.delegate 
```

# php - mysql中的错误日期按顺序排列

> ID：15792627
> 
> 赞同：0
> 
> 时间：2013-04-03T16:16:16.170
> 
> 标签：php, mysql, date

问候希望在这里得到你的帮助，因为我一直在寻找这个。

此查询有效，但它不是我想要的更正确的结果，而不是我想要的正确日期格式。

```
SELECT DISTINCT colum FROM table WHERE colum IS NOT NULL 
```

这个查询给了我日期

```
01.04.13
02.04.13
03.04.13
30.03.13
31.03.13 
```

我希望它显示最新日期。

此信息发布在将信息存储为文本的列中。它以以下格式发布

```
dd.mm.yy 
```

然后我希望它向我展示 03.04.13 的结果，因为这是今天的日期。我知道我可以将其限制为 1，但它仍然会显示错误的日期。

再次感谢您迄今为止的所有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:20:53.320

首先，您不应将日期存储为字符串，而应将数据存储为 DateTime 数据类型。

由于您将其存储为字符串，因此您必须将其转换为日期才能获取`max()`日期值。以下使用该[`STR_TO_DATE()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)函数将字符串转换为日期以获取最大值：

```
select max(str_to_date(yourdate, '%d.%m.%y')) MaxDate
from table1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/49dd3/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:23:24.023

1）您需要将 DATES 保存在日期或日期时间中

2) 在 MySQL 中尝试 MAX() 函数或尝试 ORDER BY date DESC 和 LIMIT 1

3）顺便说一句，您是否尝试过将 DISTINCT 与 GROUP BY 一起使用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:39:32.553

尝试

```
select distinct column from tab where column1 = date_format(curdate(),'%d.%m.%y') AND brukernavn is not null order by brukernavn; 
```

# asp.net - 数字商品的 PayPal Express Checkout，不显示使用信用卡选项付款

> ID：15792628
> 
> 赞同：6
> 
> 时间：2013-04-03T16:16:17.090
> 
> 标签：asp.net, paypal

我正在将数字商品的贝宝快速结账功能集成到我的网站中，并显示“***使用信用卡付款***”选项，我通过“***个人资料 -> 更多选项 -> 我的销售工具 -> 网站偏好***设置”将贝宝帐户选项设置为“开” ”，并将参数“ ***SOLUTIONTYPE*** ”和“ ***LANDING*** ”分别设置为“ ***Sole*** ”和“ ***Billing*** ”，在paypal沙箱中运行良好，但上线时，“ ***pay with credit card*** ”选项消失了并且贝宝显示“***登录贝宝***”和“***创建贝宝帐户***”选项，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T15:44:24.207

除上述内容外，还必须确认您的 PayPal 帐户主电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T21:24:30.317

由于您已经声明您在编码中启用了 SOLUTIONTYPE=Sole。如果您最近登录到您的 PayPal 帐户，有时会发生这种情况。如果您还没有尝试清除缓存和 cookie，另一个选择是确保您的 PayPal 帐户已启用数字商品。（仅当您需要使用数字商品 API 时） [数字商品注册](https://www.paypal.com/us/webapps/mpp/digital-goods)

清除缓存和 cookie 后，确保您已注册数字商品（仅当您需要使用数字商品 API 时），这应该可以解决问题。

# xlib - 将 pnglib 中的数据显示为 ximage

> ID：15792629
> 
> 赞同：2
> 
> 时间：2013-04-03T16:16:17.607
> 
> 标签：xlib, libpng

我需要导入 PNG 并将其显示在 Motif 应用程序的屏幕上。出于我自己最熟悉的原因，我不想使用比我需要的更多的库，我只想坚持使用 Motif 和 pnglib。

我已经为此奋斗了几天，我想放下我的骄傲并寻求一些帮助。此屏幕截图显示了问题：

[https://s3.amazonaws.com/gtrebol264929/pnglib_fail.png](https://s3.amazonaws.com/gtrebol264929/pnglib_fail.png)

右边的窗口显示图像应该是什么样子，左边的窗口是我的 Motif 应用程序，显示它在我的应用程序中的样子。显然我已经得到了图像数据，因为可以看到图片的基本概念。但也很明显，我搞砸了如何将像素数据从 pnglib 获取到 XImage 中。下面是我的代码：

```
char * xdata = malloc(width * height * (channels + 1));
memset(xdata,100,width * height * channels);    

int colc = 0;
int bytec = 0;
while (colc < width) {
    int rowc = 0;
    while(rowc < height) {
        png_byte * row = png.row_pointers[rowc];
        memcpy(&xdata[bytec],&row[colc],1);
        bytec += 4;

        rowc += 1;
    }
    colc += 1;
}

XImage * img = XCreateImage(display, CopyFromParent, depth * channels, ZPixmap, 0, xdata, width, height, 32, bytes_per_line);
printf("PNG %ix%i (depth: %i x %i) img: %p\n",width,height,depth,channels,img);

XPutImage (display, win, gc, img, 0, 0, 0, 0, width, height); // 0, 0, 0, 0 are src x,y and dst x,y 
```

png.row_pointers 是来自 pnglib 的像素数据。

我很确定我只是误解了像素数据的存储方式，但我不能完全弄清楚我做错了什么。很感谢任何形式的帮助。

一切顺利

加里

# forms - Symfony2 将选择选项附加到查询生成器

> ID：15792631
> 
> 赞同：2
> 
> 时间：2013-04-03T16:16:20.997
> 
> 标签：forms, symfony, query-builder

可以在 Symfony2 中向实体查询构建器附加额外的选择选项。

这是我的代码：

```
 $builder->add('ship_to','entity',array(
        'class' => 'WICCommonBundle:CustomOptions',
        'property' => 'option_value',
        'query_builder' => function(EntityRepository $er) {
            return $er->createQueryBuilder('co')
                ->where('co.account=?0')
                ->andWhere('co.option_field=?1')
                ->orderBy('co.option_value', 'ASC')
                ->setParameters(array(
                    $this->account,"ship_to",
                ));
        },
        'empty_value' => 'Select Ship To',
    )); 
```

我需要附加以下选项，以便在下拉框中最后出现。

“新”=>“添加新”

我试图通过添加它来做到这一点，但它不起作用：

```
 'choices' => array(
            'New' => 'Add New'
        ), 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:45:45.823

两种方法：

1) mkjasinski 所说的：创建一个工厂方法，将数据与最终选项结合起来，或者

2）向表单构建器添加一个事件监听器，它在呈现表单之前添加额外的选项，如下所示：

```
$builder->addEventListener(
    FormEvents::POST_SET_DATA,
    function(FormEvent $event) use($user, $factory){
        $form = $event->getForm();

        // get your form field
        $field = $form->get('ship_to')

        // ... alter the field so your data is added to it
    }
); 
```

# sql-server - 可以将 OleDbConnections 与脚本组件一起使用吗？

> ID：15792632
> 
> 赞同：6
> 
> 时间：2013-04-03T16:16:28.083
> 
> 标签：sql-server, ssis, etl, script-component

我正在构建一个 ssis 包，我希望在脚本组件中使用现有的 OleDbConnection。这是我的代码：

```
public override void AcquireConnections(object Transaction)
{
    base.AcquireConnections(Transaction);
    cm = this.Connections.Connection;
    con = (OleDbConnection)cm.AcquireConnection(Transaction);
    MessageBox.Show(con.ToString());

} 
```

当我关闭 BIDS 时，我收到以下消息：“System.InvalidCastException：无法将“System.__ComObject”类型的 COM 对象转换为“System.Data.OleDb.OleDbConnection”类类型。表示 COM 组件的类型的实例不能转换为不代表 COM 组件的类型；但是，只要底层 COM 组件支持接口的 IID 的 QueryInterface 调用，它们就可以转换为接口。”

相同的代码适用于 Ado.Net 连接。我可以在这里使用 OleDbConnection 还是脚本组件只支持 Ado.Net？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T16:22:46.220

正如文中提到的`MSDN`

> 您不能在脚本任务的托管代码中调用返回非托管对象的连接管理器（例如 OLE DB 连接管理器和 Excel 连接管理器）的 AcquireConnection 方法。

`ADO.NET`如果要使用`Aquire Connection`方法，则需要使用连接管理器

为了使用 OLEDB 连接，请添加参考`Microsoft.SqlServer.DTSRuntimeWrap`并尝试以下代码

```
ConnectionManager cm = Dts.Connections["oledb"];
IDTSConnectionManagerDatabaseParameters100 cmParams =
cm.InnerObject as IDTSConnectionManagerDatabaseParameters100;
OleDbConnection conn = cmParams.GetConnectionForSchema() as OleDbConnection; 
```

[MSDN](http://msdn.microsoft.com/en-us/library/ms136018.aspx) [链接](http://blogs.msdn.com/b/mattm/archive/2008/08/22/accessing-oledb-connection-managers-in-a-script.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-14T14:47:54.427

万一有人用谷歌搜索了这个并且找不到真正的解决方案，您必须重写 AcquireConnections、PreExceute 和 ReleaseConnections 方法才能使用 OleDbConnection。诀窍是 ConnectionString 属性：

```
OleDbConnection con;
OleDbCommand cmd;
IDTSConnectionManager100 connMgr;

/*Here you prepare the connection*/
public override void AcquireConnections(object Transaction)
{
    base.AcquireConnections(Transaction);
    connMgr = this.Connections.YourConnName;
    con = new OleDbConnection(connMgr.ConnectionString);
}

/*Here you prepare the sql command and open the connection*/
public override void PreExecute()
{
    base.PreExecute();
    cmd = new OleDbCommand("Some Select", con);
    cmd.CommandType = CommandType.Text;
    con.Open();
}

/*Here you execute your query for each input row*/
public override void Entrada0_ProcessInputRow(Entrada0Buffer Row)
{
    OleDbDataReader dr = cmd.ExecuteReader();

    while (dr.Read())
    {
       /*Do your stuff*/   
    }
}

/*And here you release the connection*/
public override void ReleaseConnections()
{
    base.ReleaseConnections();
    connMgr.ReleaseConnection(con);
} 
```

高温高压

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T18:35:38.603

谢谢普雷文。

我在您的链接中找到了相关部分：

“如果您必须调用返回非托管对象的连接管理器的 AcquireConnection 方法，请**使用 ADO.NET 连接管理器。当您将 ADO.NET 连接管理器配置为使用 OLE DB 提供程序时，它使用 .NET Framework 进行连接OLE DB 的数据提供程序。**在这种情况下，AcquireConnection 方法返回 System.Data.OleDb.OleDbConnection 而不是非托管对象。要配置 ADO.NET 连接管理器以与 Excel 数据源一起使用，请选择 Microsoft OLE DB 提供程序对于 Jet，指定一个 Excel 文件，然后在连接管理器对话框的全部页面上输入 Excel 8.0（对于 Excel 97 和更高版本）作为扩展属性的值。”

谢谢！

# xpages - 动态添加/删除可编辑区域到嵌入在 XPage 中的自定义控件

> ID：15792638
> 
> 赞同：0
> 
> 时间：2013-04-03T16:16:49.427
> 
> 标签：xpages

好吧...这有点难以解释，但我会尽力而为。

在自定义控件中，在属性定义中添加属性时，我们可以设置“允许多个实例”，这允许我们在控件嵌入 XPage 时添加该属性的多个实例。

同样，我需要知道当自定义控件嵌入 XPage 时是否可以在自定义控件中添加（和删除）可编辑区域？我的计划是在我的自定义控件内有一个重复控件，并且我可以将内容放在该重复的每个循环中的每个可编辑区域中。

这是正确的方法还是我看错了这个问题？也欢迎任何不涉及可编辑区域的解决方案:)

**2013 年 4 月 4 日更新：**

我正在寻找的用例上下文是一个简单的轮播，其中轮播中每个屏幕的内容可以有不同的内容。这些内容将被放入每个（动态添加的）可编辑区域。内容可能非常不同，一个屏幕仅包含文本，另一个屏幕仅包含图像，而另一个屏幕包含图像和文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:44:57.160

看看 26 个原始练习中的桌子助行器示例。它主要完成您正在寻找的（概念上）。您不需要多个可编辑区域。重复中的任何内容都会重复。您想要做的是给控件一个自定义属性“boolean editMode”，这样您就可以渲染要编辑的那一行 - 如果这是您想要遵循的 UI 模式。

您还可以考虑使用 Ajax 的 dojo 表，它允许熟悉的电子表格 UI

# iphone - 倒数计时器实现的两个日期之间的差异

> ID：15792640
> 
> 赞同：0
> 
> 时间：2013-04-03T16:16:51.157
> 
> 标签：iphone, ios, objective-c-2.0

两个日期之间的差异怎么可能是错误的 (2013-04-04T19:14:58+02:00-2013-04-03T18:14:58+02:00) ？

代码的结果是

> 01 天 06 小时 46 分 02 秒

结果完全错误正确的答案应该是

> 01 天 01 小时 00 分钟 00 秒

你能帮我找出问题的根源吗？

编码 ：

```
-(void)startTimer {
    timer = [NSTimer scheduledTimerWithTimeInterval: 1.0 target:self selector:@selector(updateCountdown) userInfo:nil repeats: YES];

}

-(void) updateCountdown
{

    NSDate *expirydate = [MSharedFunctions SqldateStringTodate:@"2013-04-04T19:14:58+02:00"];

    NSDate *now = [MSharedFunctions SqldateStringTodate:@"2013-04-03T18:14:58+02:00"];

    if ([expirydate isEarlierThanDate:[MSharedFunctions SqldateStringTodate:[MSharedFunctions SqldateStringTodateNow]]]) {
        //Fire end counter

        //[[NSNotificationCenter defaultCenter] postNotificationName:@"TIMER" object:nil];
    }
    //NSDate *dateFromString = [[NSDate alloc] init];
    NSDate *dateFromString =expirydate;

    //NSLog(@"now %@:  endtime :%@ ",[MSharedFunctions SqldateStringTodateNow],@"2013-04-03T18:14:58+02:00");
    NSCalendar *calendar =  [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    NSDateComponents *componentsHours = [calendar components:NSHourCalendarUnit fromDate:now];
    NSDateComponents *componentMint = [calendar components:NSMinuteCalendarUnit fromDate:now];
    NSDateComponents *componentSec = [calendar components:NSSecondCalendarUnit fromDate:now];
    NSDateComponents *componentsDaysDiff = [calendar components:NSDayCalendarUnit
                                                                fromDate:now
                                                                  toDate:dateFromString
                                                                 options:0];

            NSLog(@"%@",[NSString stringWithFormat:@"%02d",componentsDaysDiff.day]);
            NSLog(@"%@",[NSString stringWithFormat:@"%02d",(24-componentsHours.hour)]);
            NSLog(@"%@",[NSString stringWithFormat:@"%02d",(60-componentMint.minute)]);
            NSLog(@"%@",[NSString stringWithFormat:@"%02d",(60-componentSec.second)]);

} 
```

SqldateStringTodate 函数：

```
+(NSDate*)SqldateStringTodate:(NSString*) stringdate {
    stringdate = [stringdate stringByReplacingOccurrencesOfString:@":" withString:@"" options:0 range:NSMakeRange([stringdate length] - 5,5)];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init] ;
    NSLocale* formatterLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"] ;
    [dateFormatter setLocale:formatterLocale];
    if (stringdate.length==24) {
        [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZ"];
    }
    else {
        [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSSZ"];
    }

    //DebugLog(@"New Date %@",stringdate);
    NSDate *getDate = [dateFormatter dateFromString:stringdate];
    return getDate;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:50:10.223

我无法理解你的逻辑，但如果你想以你想要`NSDateComponents`的方式获得差异，你可以使用：

```
NSUInteger unitFlags = NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
NSDateComponents *componentsDaysDiff = [calendar components:unitFlags
                                                   fromDate:now
                                                     toDate:dateFromString
                                                    options:0];
NSLog("%@", componentsDayDiff); 
```

这个产量结果：

```
<NSDateComponents: 0x75939f0>
Leap month: no
Day: 1
Hour: 1
Minute: 0
Second: 0 
```

所以……又怎么了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:16:15.430

要获得两个 NSDate 对象之间的差异，请使用`timeIntervalSinceDate:`. 然后，要计算天、小时、分钟和秒之间的时间，请使用模除法。

```
NSTimeInterval doubleDiff = [date1 timeIntervalSinceDate:date2];
long diff = (long) doubleDiff;
int seconds = diff % 60;
diff = diff / 60;
int minutes = diff % 60;
diff = diff / 60;
int hours = diff % 24;
int days = diff / 24; 
```

您可以将 NSTimeInterval (double) 转换为 long 不同的方式，具体取决于您是要向上舍入、向下舍入还是最接近。

# vba - 如何将列中的数据拆分为两个单独的列？

> ID：15792642
> 
> 赞同：2
> 
> 时间：2013-04-03T16:16:57.893
> 
> 标签：vba, excel

在 Excel 中，我有一列名称格式为“FirstName LastName”的名称。我想将整列分成两列，一列包含所有名字，另一列包含所有姓氏。

到目前为止我的代码：

```
 'Splitting the Traveler Display Name column
    Dim SplitPoint As Long
    'L2 is the column containing names to be split
    Range("L2").Select
    Do Until IsEmpty(ActiveCell)
        'Search for position of space within the cell
        SplitPoint = InStrRev(ActiveCell, " ", -1, vbTextCompare)
        'Put the last name in the column next to the source column
        ActiveCell.Offset(0, 1) = Trim(Left(ActiveCell, SplitPoint))
        'Replace the source column with the first name
        ActiveCell.Offset(0, 0) = Trim(Mid(ActiveCell, SplitPoint))
    Loop 
```

到目前为止，我发现的解决方案要求手动选择单元格，这对于我正在处理的数据量来说是不合理的。我找到了这个解决方案，但我收到以下错误：**Invalid Procedure call or argument**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:24:44.613

**非 VBA 方法**

为什么不使用数据~~>文本到列？

![在此处输入图像描述](https://i.stack.imgur.com/ilU8v.png)

**VBA 方法**

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim LastRow As Long, i As Long
    Dim tmpArray() As String

    '~~> This is the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        LastRow = .Range("L" & .Rows.Count).End(xlUp).Row

        For i = 2 To LastRow
            If InStr(1, .Range("L" & i).Value, " ") Then
                tmpArray = Split(.Range("L" & i).Value, " ")
                .Range("M" & i).Value = tmpArray(0)
                .Range("N" & i).Value = tmpArray(1)
            End If
        Next i
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-13T05:47:07.833

```
Private Sub Sample()
    Dim myRng As Range
    Dim LastRow As Long

    LastRow = Sheets("Sample1").UsedRange.Rows.Count

    With Sheets("Sample1")
        Set myRng = Sheets("Sample1").Range("A2:A" & LastRow)
    End With

    myRng.TextToColumns _
      Destination:=Range("B2:C2"), _
      DataType:=xlDelimited, _
      Tab:=False, _
      Semicolon:=False, _
      Comma:=False, _
      Space:=True, _
      Other:=False

End Sub 
```

我知道这个问题已经很老了，但是为将来可能遇到相同问题的任何人分享一个答案。

在寻找有关如何拆分列的答案时，我偶然发现了这个问题。我尝试了循环方法，但需要很长时间才能处理。我已经尝试将文本到列的字面翻译为 VBA。处理时间几乎是即时的，因为它与单击 TextToColumns 相同。

在我上面的解决方案中，我将 A 列设置为包含数据（即名字和姓氏），以便拆分为范围。在目标中，我将范围放置在希望拆分数据出现的位置（即，B 列代表名字，C 列代表姓氏）。分隔符是一个空格。它对我来说很好。到目前为止，我已经在 2000 行数据中测试了代码。

我对 VBA 很陌生，如果代码格式或编写不当，我深表歉意。

# jquery - 如何在 jQuery ajax 中使用变量作为数据“名称”？

> ID：15792649
> 
> 赞同：2
> 
> 时间：2013-04-03T16:17:26.533
> 
> 标签：jquery

标题可能很差，但我想不出如何解释。

我有一个有效的ajax：

```
var inputName = $('#input').prop('name');

$.ajax({
    url: 'file.php?'+inputName+'=0&uID='+uid+'',
    type: 'POST'
}); 
```

如您所见，变量名称已更改并已预先设置。

我最终发送了一个帖子网址，例如：

```
file.php?someName=0&uID=291 
```

但我更喜欢以下格式，因为对我来说它更具可读性和更少的代码：

```
$.ajax({
    url: 'file.php',
    type: 'POST',
    data: { '+inputName+': 0, uID: '+uid+' },
}); 
```

但是，问题是，我最终得到了一个请求网址，例如：

```
file.php?'+inputName+'=0&uID=291 
```

或者如果我输入 data: { inputName: 0 } 等，那么 'inputName' 只是变量名。

使用变量作为键是否可以实现我想做的事情？如果有怎么办？还是我应该坚持使用冗长的 ? 和 & ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T16:20:20.677

要将变量用作对象中的键，您需要使用括号表示法：

```
var obj = {uID: uid};
    obj[inputName] = 0;

$.ajax({
    url: 'file.php',
    type: 'POST',
    data: obj
}); 
```

# powershell - 在 Powershell 中打印对象属性

> ID：15792650
> 
> 赞同：154
> 
> 时间：2013-04-03T16:17:31.070
> 
> 标签：powershell

在交互式控制台中工作时，如果我定义一个新对象并为其分配一些属性值，如下所示：

```
$obj = New-Object System.String
$obj | Add-Member NoteProperty SomeProperty "Test" 
```

然后，当我在交互式窗口中键入变量的名称时，Powershell 会给我一个对象属性和值的摘要：

```
PS C:\demo> $obj
SomeProperty                                                                                                                                                                                  
------------                                                                                                                                                                                  
Test 
```

我基本上只想从脚本中的函数中执行此操作。该函数创建一个对象并设置一些属性值，我希望它在返回之前将对象值的摘要打印到 Powershell 窗口。我尝试在函数中使用 Write-Host：

```
Write-Host $obj 
```

但这只是输出对象的类型而不是摘要：

```
System.Object 
```

如何让我的函数将对象属性值的摘要输出到 Powershell 窗口？

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2013-04-03T16:28:36.210

试试这个：

```
Write-Host ($obj | Format-Table | Out-String) 
```

或者

```
Write-Host ($obj | Format-List | Out-String) 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2015-06-18T19:51:17.487

我对这个问题的解决方案是使用[$() 子表达式块](http://ss64.com/ps/syntax-operators.html)。

```
Add-Type -Language CSharp @"
public class Thing{
    public string Name;
}
"@;

$x = New-Object Thing

$x.Name = "Bill"

Write-Output "My name is $($x.Name)"
Write-Output "This won't work right: $x.Name" 
```

给出：

```
My name is Bill
This won't work right: Thing.Name 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-02-25T04:38:54.907

在 Powershell 中打印出对象的属性和值。下面的[例子](https://www.codykonior.com/2013/03/26/powershell-how-to-show-all-of-an-objects-properties-and-values/)对我很有效。

**$pool = Get-Item "IIS:\AppPools.NET v4.5"**

**$池 | 获取会员**

```
 TypeName: Microsoft.IIs.PowerShell.Framework.ConfigurationElement#system.applicationHost/applicationPools#add

Name                        MemberType            Definition
----                        ----------            ----------
Recycle                     CodeMethod            void Recycle()
Start                       CodeMethod            void Start()
Stop                        CodeMethod            void Stop()
applicationPoolSid          CodeProperty          Microsoft.IIs.PowerShell.Framework.CodeProperty
state                       CodeProperty          Microsoft.IIs.PowerShell.Framework.CodeProperty
ClearLocalData              Method                void ClearLocalData()
Copy                        Method                void Copy(Microsoft.IIs.PowerShell.Framework.ConfigurationElement ...
Delete                      Method                void Delete()
... 
```

**$池 | Select-Object -Property * # 可以省略 -Property**

```
name                        : .NET v4.5
queueLength                 : 1000
autoStart                   : True
enable32BitAppOnWin64       : False
managedRuntimeVersion       : v4.0
managedRuntimeLoader        : webengine4.dll
enableConfigurationOverride : True
managedPipelineMode         : Integrated
CLRConfigFile               :
passAnonymousToken          : True
startMode                   : OnDemand
state                       : Started
applicationPoolSid          : S-1-5-82-271721585-897601226-2024613209-625570482-296978595
processModel                : Microsoft.IIs.PowerShell.Framework.ConfigurationElement
... 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-03T16:39:19.027

**[提示 #1](http://windowsitpro.com/blog/what-do-not-do-powershell-part-1)**

> 永远不要使用写主机。

**[提示 #12](http://windowsitpro.com/blog/what-do-not-do-powershell-part-12)**

> 从 PowerShell cmdlet 或函数输出信息的正确方法是创建一个包含数据的对象，然后使用 Write-Output 将该对象写入管道。

*[-Don Jones：PowerShell 大师](https://donjones.com/)*

理想情况下，您的脚本会创建您的对象 ( `$obj = New-Object -TypeName psobject -Property @{'SomeProperty'='Test'}`)，然后只需执行`Write-Output $objects`. 您可以将输出通过管道传输到`Format-Table`.

```
PS C:\> Run-MyScript.ps1 | Format-Table 
```

他们真的应该调用 PowerShell PowerObjectandPipingShell。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-08-03T23:24:24.007

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-12T22:24:36.597

下面的工作对我来说真的很好。我将上述所有答案拼凑在一起，并在以下链接中阅读了有关显示对象属性的内容，并提出了以下 [有关打印对象的简短阅读](https://www.codykonior.com/2013/03/26/powershell-how-to-show-all-of-an-objects-properties-and-values/)

将以下文本添加到名为 print_object.ps1 的文件中：

```
$date = New-Object System.DateTime
Write-Output $date | Get-Member
Write-Output $date | Select-Object -Property * 
```

打开 powershell 命令提示符，转到该文件所在的目录并键入以下内容：

```
powershell -ExecutionPolicy ByPass -File is_port_in_use.ps1 -Elevated 
```

只需将“System.DateTime”替换为您想要打印的任何对象。如果对象为空，则不会打印任何内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-08T11:52:10.627

```
# Json to object
$obj = $obj | ConvertFrom-Json
Write-host $obj.PropertyName 
```

# c# - 重新排序 ListView 项目：事件和拖放

> ID：15792651
> 
> 赞同：1
> 
> 时间：2013-04-03T16:17:34.147
> 
> 标签：c#, windows-runtime

我的页面包含两个 ListView 元素，ListA 和 ListB。您可以通过简单的拖放操作将项目（对象）从 ListA 复制到 ListB。为此，我使用列表的*DragItemsStarting*和*Drop*事件。这工作得很好。现在您可以重新排序 ListB 中的项目。所有必需的属性都已设置（重新排序、拖放），这也有效。

但现在我想对诉诸作出反应，但我没有找到我可以听的事件。所以我认为可以在同一个列表上使用拖放事件来了解用户何时更改了项目的位置。

那么如何识别 ListB 的项目已重新排序？

我的代码（使用拖放方法）：

```
private void ListB_DragItemsStarting(object sender, DragItemsStartingEventArgs e) {
            var item = ((FeedItem)e.Items[0]);
            e.Data.RequestedOperation = DataPackageOperation.Move;
            e.Data.SetDataProvider("FeedItem", request => request.SetData(item));
        }

private async void ListB_Drop(object sender, DragEventArgs e) {
            DataPackageView view = e.Data.GetView();
            if (view.Contains("FeedItem") && view.RequestedOperation == DataPackageOperation.Copy) {
                //item from ListA 
            }
            if (view.Contains("FeedItem") && view.RequestedOperation == DataPackageOperation.Move) {
                //item from ListB
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:09:30.407

好的，问题解决了：）

要在同一个 UI 元素（在本例中为 ListView）上使用拖放，您需要禁用*CanReorderItems*选项。然后我上面提供的代码将起作用。

```
ListB.CanReorderItems = false; 
```

但是，当您希望保留对 ListB 中的项目重新排序的选项（实际上是我最初的问题）时，您可以订阅以下事件：

```
view.VectorChanged += viewVectorChanged;

...

private void viewVectorChanged(Windows.Foundation.Collections.IObservableVector<object> sender, Windows.Foundation.Collections.IVectorChangedEventArgs @event) {

} 
```

由于我的列表绑定到 CollectionViewSource 这对我来说很好。否则 ListView 应该有一个您可以订阅的类似事件。

# google-maps - 单击时将标记添加到 Google 地图

> ID：15792655
> 
> 赞同：87
> 
> 时间：2013-04-03T16:17:39.863
> 
> 标签：google-maps, google-maps-api-3

当用户在地图上单击鼠标左键时，我很难找到一个非常简单的示例来说明如何向 Google 地图添加标记。

在过去的几个小时里，我环顾四周，并查阅了 Google Maps API 文档，希望能得到一些帮助！

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2013-04-03T22:23:57.927

经过进一步研究，我设法找到了解决方案。

```
google.maps.event.addListener(map, 'click', function(event) {
   placeMarker(event.latLng);
});

function placeMarker(location) {
    var marker = new google.maps.Marker({
        position: location, 
        map: map
    });
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2017-03-30T16:02:43.867

2017年，解决方案是：

```
map.addListener('click', function(e) {
    placeMarker(e.latLng, map);
});

function placeMarker(position, map) {
    var marker = new google.maps.Marker({
        position: position,
        map: map
    });
    map.panTo(position);
} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-07-26T12:41:53.930

这实际上是一个记录的功能，可以在[这里找到](https://developers.google.com/maps/documentation/javascript/events#EventArguments)

```
// This event listener calls addMarker() when the map is clicked.
  google.maps.event.addListener(map, 'click', function(e) {
    placeMarker(e.latLng, map);
  });

  function placeMarker(position, map) {
    var marker = new google.maps.Marker({
      position: position,
      map: map
    });  
    map.panTo(position);
  } 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-12-15T14:16:55.300

@Chaibi Alaa，让用户只能添加一次，并移动标记；您可以在第一次单击时设置标记，然后在后续单击时更改位置。

```
var marker;

google.maps.event.addListener(map, 'click', function(event) {
   placeMarker(event.latLng);
});

function placeMarker(location) {

    if (marker == null)
    {
          marker = new google.maps.Marker({
             position: location,
             map: map
          }); 
    } 
    else 
    {
        marker.setPosition(location); 
    } 
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-11-11T15:58:38.680

目前将监听器添加到地图的方法是

```
map.addListener('click', function(e) {
    placeMarker(e.latLng, map);
}); 
```

并不是

```
google.maps.event.addListener(map, 'click', function(e) {
    placeMarker(e.latLng, map);
}); 
```

[参考](https://developers.google.com/maps/documentation/javascript/events#EventArguments)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-14T06:46:39.857

1.  首先声明标记：

```
this.marker = new google.maps.Marker({
   position: new google.maps.LatLng(12.924640523603115,77.61965398949724),
   map: map
}); 
```

2.  调用方法以在单击时绘制标记：

```
this.placeMarker(coordinates, this.map); 
```

3.  定义函数：

```
placeMarker(location, map) {
    var marker = new google.maps.Marker({
        position: location,
        map: map
    });
    this.markersArray.push(marker);
} 
```

# python - 动态导入模块的调用函数

> ID：15792658
> 
> 赞同：2
> 
> 时间：2013-04-03T16:17:49.613
> 
> 标签：python, import

我有这个模块（称为module1.py）：

```
import os
def main():
    command=os.system("dir")
    return command,"str" 
```

我已经用这个动态导入了它：

```
mod = __import__("modules."module1) 
```

它工作得很好。但是现在我想调用module1的函数“main”。

`mod.main()`不起作用。为什么？？如何调用 module1 模块的 main() 函数？

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:24:38.957

我更喜欢使用`fromlist`论点。

```
mod = __import__("modules.%s" % (module1), fromlist=["main"])
mod.main() 
```

根据您的用例，您可能还需要指定局部变量和全局变量。

```
mod = __import__("modules.%s" % (module1), locals(), globals(), ["main"]) 
```

# c# - 将数据插入数据库 Visual Studio

> ID：15792664
> 
> 赞同：0
> 
> 时间：2013-04-03T16:18:13.573
> 
> 标签：c#, database, visual-studio-2010

我正在尝试使用基于服务的数据库将数据插入数据库我正在使用 Visual Studio 2010。我已经创建了表，但它在这里不起作用是我的代码：如果您对如何插入代码有建议，我将不胜感激一个数据库。

```
public void AddAnimal(int animalID, string name, double age, string category, string gender, string extraAnimalInfo)
    {
        using (SqlConnection con = new SqlConnection(DBAccessLayer.Properties.Settings.Default.AnimalDBConnectionString))
        {
            con.Open();
            try
            {
                using (SqlCommand command = new SqlCommand("INSERT INTO AnimalTable VALUES(@AnimalID, @Name, @Age, @Category, @Gender, @ExtraAnimalInfo)", con))
                {
                    Console.WriteLine("Here 4");
                    command.Parameters.Add(new SqlParameter("AnimalID", animalID));
                    command.Parameters.Add(new SqlParameter("Name", name));
                    command.Parameters.Add(new SqlParameter("Age", age));
                    command.Parameters.Add(new SqlParameter("Category", category));
                    command.Parameters.Add(new SqlParameter("Gender", gender));
                    command.Parameters.Add(new SqlParameter("ExtraAnimalInfo", extraAnimalInfo));
                    command.ExecuteNonQuery();
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine("Could not insert.");
            }
        } 
```

**UPDATE1：** 当我将数据插入数据库时​​，行会受到影响，但是当我从服务器资源管理器中打开数据库表时，什么都没有改变。

* * *

当我将数据插入数据库时​​，行会受到影响，但是当我从服务器资源管理器中打开数据库表时，我看不到任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T14:58:41.783

我有一个类似的问题。对我来说，它是连接字符串。本来我有

"数据源=.\SQLEXPRESS;AttachDbFilename=" + "|DataDirectory|pr.mdf;" +“集成安全=真；用户实例=真”；

当我更换 |DataDirectory| 使用数据库的完整路径（在解决方案探索中右键单击数据库，单击属性，然后使用完整路径）。有效。它看起来好像有几个不同的数据库副本......即在 \bin\Debug\ 文件夹中有它的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:21:02.467

sql 插入命令需要在 values 关键字之前的列名。

插入动物表（AnimalID、姓名、年龄、类别、性别、ExtraAniamlInfo）值（@AnimalID、@Name、@Age、@Category、@Gender、@ExtraAnimalInfo）

# node.js - 在 app.router 之后访问 res.locals

> ID：15792665
> 
> 赞同：3
> 
> 时间：2013-04-03T16:18:14.427
> 
> 标签：node.js, express, connect, middleware

我正在创建要在 app.router 之后调用的中间件，并且我需要访问由路由中间件和路由处理程序存储在 res.locals 对象中的数据。

```
//...
app.use(app.router);
app.use(myMiddleware);
//...

app.get('/', function(req, res) {
    res.locals.data = 'some data';
});

function myMiddleware(req, res, next) {
    if (res.locals.data)
        console.log('there is data');
    else
        console.log('data is removed'); // that's what happens
} 
```

问题是在 app.router 之后 res.locals 的所有属性都变空了。

我试图找到 express 或 connect 清理 res.locals 以某种方式修补它的地方，但到目前为止我找不到它。

我目前看到的唯一解决方案是放弃将这个逻辑放在单独的中间件中的想法，并将其放在特定于路由的中间件中，其中 res.locals 可用，但它会使系统更加互连。此外，我有许多路由中间件不会调用 next 的路由（当调用 res.redirect 时），因此我必须进行许多更改才能使其正常工作。我非常想避免它并将这个逻辑放在一个单独的中间件中，但我需要访问存储在 res.locals 中的数据。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:32:11.247

您可以在之前绑定它，但让它在之后执行。[`logger`中间件](http://www.senchalabs.org/connect/logger.html)就是一个例子。

```
app.use(express.logger('tiny'));
app.use(myMiddleware);
app.use(app.router);

function myMiddleware(req, res, next) {
    var end = res.end;
    res.end = function (chunk, encoding) {
        res.end = end;
        res.end(chunk, encoding);

        if (res.locals.data)
            console.log('there is data');
        else
            console.log('data is removed');
    };

    next();
}

app.get('/', function (req, res) {
    res.locals.data = 'some data';
    res.send('foo'); // calls `res.end()`
}); 
```

请求`/`结果：

```
GET / 200 3 - 6 ms
there is data
GET /favicon.ico 404 - - 1 ms
data is removed 
```

# java - GWT HTTP 请求响应代码 0 与 CORS 工作

> ID：15792666
> 
> 赞同：2
> 
> 时间：2013-04-03T16:18:14.680
> 
> 标签：java, http, gwt, cors, same-origin-policy

我正在使用 GWT 2.4 构建一个完全在客户端运行并使用我控制但托管在不同服务器上的 Web 服务的应用程序。在这个 Java Servlet Web 服务上，我已经实现了 doOptions，如下所示：

```
protected void doOptions(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.addHeader("Access-Control-Allow-Origin", "*");
    response.addHeader("Access-Control-Allow-Methods", "POST, GET");
} 
```

在 GWT 中的客户端我以标准方式提交请求，例如

```
public static void makeHttpGetRequest(String query, RequestCallback callback) {
    String url = "http://example.webservice.com/endpoint" + "?q=" + query;

    RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, URL.encode(url));
    try {
        builder.sendRequest(query, callback);
    } catch (RequestException e) {
        Window.alert("Server encountered an error: \n" + e.getMessage());
        e.printStackTrace();
    }
} 
```

然后我的回调像这样实现 onResponseReceived：

```
@Override
public void onResponseReceived(Request request, Response response) {
    if (response.getStatusCode() == 200) {
        System.out.println("HTTP request successful, received "
                + response.getText());
        processResponse(response.getText());
    } else {
        System.out.println("HTTP error code " + 
                response.getStatusCode() + ":" + 
                response.getStatusText());
    }
} 
```

每当我在 Chrome 或 Firefox 的最新版本中运行应用程序并发送请求时，都会调用 onResponseReceived 但响应代码为 0 并且没有错误消息。研究表明，这个问题的大多数其他实例都是由 SOP 限制引起的。但是，当查看 Fiddler 中的 HTTP 流量时，我看到执行此操作时，浏览器确实发送了预期的 HTTP 请求，并且 Web 服务确实返回了预期的响应，响应代码为 200。不知何故，浏览器没有正确处理它。

更新：当我查看 Fiddler 中的流量时，它表明请求已发送并收到响应，但是当我在 Chrome 的开发人员控制台中查看相同的请求时，它显示该请求已“取消”。如果请求确实发生了，那么在这种情况下这意味着什么？

有没有人遇到过这个问题？关于可能发生的事情有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:59:26.533

错误代码 0 表示 CORS 已中止，请检查您的 servlet 实现是否正常，我认为您必须发送`Allow`而不是`Access-Control-Allow-Methods`，而且您还必须添加 ，`Access-Control-Allow-Headers`因为 GWT 向 ajax 请求添加了额外的标头。

从[gwt-query 示例](https://code.google.com/p/gwtquery/wiki/Ajax)中尝试这个实现，效果很好：

```
private static final String ALLOWED_DOMAINS_REGEXP = ".*";

HttpServletRequest req = (HttpServletRequest) servletRequest;
HttpServletResponse resp = (HttpServletResponse) servletResponse;

String origin = req.getHeader("Origin");
if (origin != null && origin.matches(ALLOWED_DOMAINS_REGEXP)) {
  resp.addHeader("Access-Control-Allow-Origin", origin);
  resp.setHeader("Allow", "GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS");
  if (origin != null) {
      String headers = req.getHeader("Access-Control-Request-Headers");
      String method = req.getHeader("Access-Control-Request-Method");
      resp.addHeader("Access-Control-Allow-Methods", method);
      resp.addHeader("Access-Control-Allow-Headers", headers);
      resp.setContentType("text/plain");
  }
} 
```

不过，我宁愿使用过滤器而不是 servlet，就像上面的链接中解释的那样。

# android - 用户如何在触摸时也能画出线条跟随手指？Android 开发

> ID：15792667
> 
> 赞同：-2
> 
> 时间：2013-04-03T16:18:19.167
> 
> 标签：android, view

我有这段代码可以为教练制作篮球板，用户可以在其中移动球员并改变背景球场。现在用户可以画出跟随他手指的线条。我怎样才能做到这一点？我搜索它，我发现我必须创建一个 View 类，但我无法连接。也许有人我要写什么代码？

```
public class HalfCourt extends Activity{
/** Called when the activity is first created. */
ImageView img, img2, img3, img4, img5, img6, img7, img8, img9, img10 =null;
AbsoluteLayout aLayout;
public LayoutParams params, params2,params3,params4, params5, params6, parmas7, params8, params9, params10;
int status=0;
public Item red_out;
public Button lock,reset, erase;
MyTouchListener touchlistener;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.halfcourt);

    //View custom = (View)findViewById(R.id.view1);

    aLayout= (AbsoluteLayout)findViewById(R.id.absLayout);

    img=(ImageView)findViewById(R.id.imageView);
    img2=(ImageView)findViewById(R.id.imageView22);
    img3=(ImageView)findViewById(R.id.imageView3);
    img4=(ImageView)findViewById(R.id.imageView4);
    img5=(ImageView)findViewById(R.id.imageView5);
    img6=(ImageView)findViewById(R.id.imageView6);
    img7=(ImageView)findViewById(R.id.imageView7);
    img8=(ImageView)findViewById(R.id.imageView8);
    img9=(ImageView)findViewById(R.id.imageView9);
    img10=(ImageView)findViewById(R.id.imageView10);

    lock = (Button)findViewById(R.id.lock_button);
    reset = (Button)findViewById(R.id.reset_button);
    erase = (Button)findViewById(R.id.erase_button);

    /* 
     * 
     * Αρχικοποίηση των TouchListeners
     *  
     * */
    img.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                status=1;

                return false;
            }
    });

    img2.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            status=2;

            return false;
        }
    });

    img3.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            status=3;

            return false;
        }
    });

    img4.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            status=4;

            return false;
        }
    });

    img5.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            status=5;

            return false;
        }
    });

    img6.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            status=6;

            return false;
        }
    });

    img7.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            status=7;

            return false;
        }
    });

    img8.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            status=8;

            return false;
        }
    });

    img9.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            status=9;

            return false;
        }
    });

    img10.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            status=10;

            return false;
        }
    });

    touchlistener = new MyTouchListener();
    aLayout.setOnTouchListener(touchlistener);

    LockXandO locking = new LockXandO();
    lock.setOnClickListener(locking);
    lock.setText("Lock");

    ResetPositions reseting = new ResetPositions();
    reset.setOnClickListener(reseting);

    }

public boolean onCreateOptionsMenu(Menu menu){

        super.onCreateOptionsMenu(menu);
        MenuInflater mitsos = getMenuInflater();
        mitsos.inflate(R.menu.half_court_menu, menu);
        return true;    
    }

public boolean onOptionsItemSelected(MenuItem item){
        switch(item.getItemId()){
        case R.id.red_out:
            if (item.getTitle()== "Αφαίρεσε τους κόκκινους"){
                item.setTitle("Πρόσθεσε τους κόκκινους");
            }
            else{
                item.setTitle("Αφαίρεσε τους κόκκινους");
            }
            return true;
        case R.id.change_to_full_court:
            startActivity(new Intent("com.mitsos.thebasic.TUTORIAL3"));
            return true;
    }

    return false;
}

public class LockXandO implements OnClickListener{
    /**
     * Η μέθοδος όπου κλειδώνω και ξεκλειδώνω τους "Παίκτες"
     */

    @Override
    public void onClick(View v) {
        /**
         *  Εδώ διαλέγουμε αν είμαστε σε κατάσταση κλειδώματος ή ξεκλειδώματος 
        **/
        if (lock.getText() == "Lock"){
            kleidwse();
            lock.setText("Unlock");
        }
        else {
            ksekleidwse();
            lock.setText("Lock");
        }
    }

    private void kleidwse() {
        /* 
         *    Με αυτή τη μέθοδο κλειδώνουν οι "Παίκτες" 
         */
        aLayout.setOnTouchListener(null);

    }

    public void ksekleidwse(){
        /**  
         *    Με αυτή τη μέθοδο ξεκλειδώνουν οι "Παίκτες" 
         **/
        aLayout.setOnTouchListener(touchlistener);
    }

}

public class ResetPositions implements OnClickListener{

    @Override
    public void onClick(View v) {
        ResetMe();
        ksekleidwse();
        lock.setText("Lock");

    }

    private void ksekleidwse(){
        /**  
         *    Την ξαναχρησιμοποιώ εδώ για να ξεκλειδώσουν οι παίχτες καθώς επανέρχονται στις αρχικές θέσεις 
         **/
        aLayout.setOnTouchListener(touchlistener);
    }

    @SuppressWarnings("deprecation")
    private void ResetMe(){

        aLayout.setOnTouchListener(touchlistener);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,105,250);
        img.setLayoutParams(params);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,165,250);
        img2.setLayoutParams(params);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,225,250);
        img3.setLayoutParams(params);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,285,250);
        img4.setLayoutParams(params);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,345,250);
        img5.setLayoutParams(params);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,105,330);
        img6.setLayoutParams(params);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,165,330);
        img7.setLayoutParams(params);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,225,330);
        img8.setLayoutParams(params);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,285,330);
        img9.setLayoutParams(params);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,345,330);
        img10.setLayoutParams(params);

        aLayout.setOnTouchListener(touchlistener);
    }

}

public class MyTouchListener implements OnTouchListener{

    @SuppressWarnings("deprecation")
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        /*
         * 
         * Επιλογή της εικόνας που θα κινηθεί με το status
         * 
         */
        if(status==1) 
        {
        LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                (int)event.getX()-img.getWidth()/2,(int)event.getY()-img.getHeight()/2);
        img.setLayoutParams(lp);
        }
        else if (status ==2)
        {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                    (int)event.getX()-img2.getWidth()/2,(int)event.getY()-img2.getHeight()/2);
            img2.setLayoutParams(lp);
        }
        else if (status ==3)
        {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                    (int)event.getX()-img3.getWidth()/2,(int)event.getY()-img3.getHeight()/2);
            img3.setLayoutParams(lp);
        }
        else if (status ==4)
        {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                    (int)event.getX()-img4.getWidth()/2,(int)event.getY()-img4.getHeight()/2);
            img4.setLayoutParams(lp);
        }
        else if (status ==5)
        {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                    (int)event.getX()-img2.getWidth()/2,(int)event.getY()-img2.getHeight()/2);
            img5.setLayoutParams(lp);
        }
        else if (status ==6)
        {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                    (int)event.getX()-img6.getWidth()/2,(int)event.getY()-img6.getHeight()/2);
            img6.setLayoutParams(lp);
        }
        else if (status ==7)
        {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                    (int)event.getX()-img7.getWidth()/2,(int)event.getY()-img7.getHeight()/2);
            img7.setLayoutParams(lp);
        }
        else if (status ==8)
        {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                    (int)event.getX()-img8.getWidth()/2,(int)event.getY()-img8.getHeight()/2);
            img8.setLayoutParams(lp);
        }
        else if (status ==9)
        {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                    (int)event.getX()-img9.getWidth()/2,(int)event.getY()-img9.getHeight()/2);
            img9.setLayoutParams(lp);
        }
        else if (status ==10)
        {
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,
                    (int)event.getX()-img10.getWidth()/2,(int)event.getY()-img10.getHeight()/2);
            img10.setLayoutParams(lp);
        }
        if(event.getAction()==MotionEvent.ACTION_UP){
        status=0;

        }

        return true;    

    }

}

public class FingerDrawingView extends View
{
  private static final boolean DEBUG = false;
  private static final float MAXP = 0.75F;
  private static final float MINP = 0.25F;
  private static final String TAG = "FingerDrawingView";
  private static final float TOUCH_TOLERANCE = 4.0F;
  private Bitmap mBackupBitmap;
  private Bitmap mBitmap;
  private Paint mBitmapPaint;
  private Canvas mCanvas;
  private boolean mDrawingEnable = false;
  private MaskFilter mEmboss;
  private int mHeight;
  private Paint mPaint = new Paint();
  private Path mPath;
  private int mWidth;
  private float mX;
  private float mY;

  public FingerDrawingView(Context paramContext)
  {
    super(paramContext);
    this.mPaint.setAntiAlias(true);
    this.mPaint.setDither(true);
    this.mPaint.setColor(-1);
    this.mPaint.setStyle(Paint.Style.STROKE);
    this.mPaint.setStrokeJoin(Paint.Join.ROUND);
    this.mPaint.setStrokeCap(Paint.Cap.ROUND);
    this.mPaint.setStrokeWidth(5.0F);
  }

  private void touch_move(float paramFloat1, float paramFloat2)
  {
    float f1 = Math.abs(paramFloat1 - this.mX);
    float f2 = Math.abs(paramFloat2 - this.mY);
    if ((f1 >= 4.0F) || (f2 >= 4.0F))
    {
      this.mPath.quadTo(this.mX, this.mY, (paramFloat1 + this.mX) / 2.0F, (paramFloat2 + this.mY) / 2.0F);
      this.mX = paramFloat1;
      this.mY = paramFloat2;
    }
  }

  private void touch_start(float paramFloat1, float paramFloat2)
  {
    this.mPath.reset();
    this.mPath.moveTo(paramFloat1, paramFloat2);
    this.mX = paramFloat1;
    this.mY = paramFloat2;
  }

  private void touch_up()
  {
    this.mPath.lineTo(this.mX, this.mY);
    this.mCanvas.drawPath(this.mPath, this.mPaint);
    this.mPath.reset();
  }

  public void backupCanvas()
  {
    this.mBackupBitmap = Bitmap.createBitmap(this.mBitmap);
  }

  public boolean getDrawingEnable()
  {
    return this.mDrawingEnable;
  }

  public void initCanvas(int paramInt1, int paramInt2)
  {
    this.mWidth = paramInt1;
    this.mHeight = paramInt2;
    this.mBitmap = Bitmap.createBitmap(paramInt1, paramInt2, Bitmap.Config.ARGB_8888);
    this.mCanvas = new Canvas(this.mBitmap);
    this.mPath = new Path();
    this.mBitmapPaint = new Paint(4);
    this.mBitmapPaint.setAlpha(16777215);
  }

  public boolean loadCanvas(String paramString)
  {
    Bitmap localBitmap = BitmapFactory.decodeFile(paramString);
    if (localBitmap != null)
    {
      this.mBitmap = localBitmap.copy(Bitmap.Config.ARGB_8888, true);
      this.mCanvas.setBitmap(this.mBitmap);
      invalidate();
      return true;
    }
    return false;
  }

  protected void onDraw(Canvas paramCanvas)
  {
    if ((this.mBitmap != null) && (this.mPath != null))
    {
      paramCanvas.drawBitmap(this.mBitmap, 0.0F, 0.0F, this.mBitmapPaint);
      paramCanvas.drawPath(this.mPath, this.mPaint);
    }
  }

  protected void onSizeChanged(int paramInt1, int paramInt2, int paramInt3, int paramInt4)
  {
    super.onSizeChanged(paramInt1, paramInt2, paramInt3, paramInt4);
  }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:27:57.340

Donn Felker 有一些示例代码（取自 Square），允许在图像上平滑绘制。请参阅[Donn 存储库中的示例代码](https://github.com/donnfelker/Repair-Shop/blob/master/src/com/agilevent/repairshop/SignatureView.java)

# android - 如何从浏览器打开 iphone/android 上的邮件客户端（不通过 mailto 撰写窗口）

> ID：15792669
> 
> 赞同：1
> 
> 时间：2013-04-03T16:18:23.150
> 
> 标签：android, iphone, browser, mailto, inbox

使用“mailto”从移动 safari/android chrome 打开默认邮件客户端的撰写窗口

如何仅打开用户 iphone/android 的默认邮件客户端而不是撰写窗口。

我计划向用户发送一封电子邮件并在浏览器页面上提供一个链接，以便用户可以打开他们的邮件客户端以查看他们是否收到了电子邮件。

这将大大减少要求用户检查他们的电子邮件收件箱所涉及的摩擦。

# java - Solr 的 OutOfMemoryError -> 巨大的 1Gb FieldCacheImpl$StringIndexCache

> ID：15792673
> 
> 赞同：1
> 
> 时间：2013-04-03T16:18:31.633
> 
> 标签：java, solr, out-of-memory

在 Solr 1.4 上，您知道什么可能导致此类上的 OutOfMemoryError 吗？

```
org.apache.lucene.search.FieldCacheImpl$StringIndexCache#1 
```

它需要 1 gb 的 ram，而底层的 WeakHashMap 只有 700 个键。

* * *

缓存配置：

```
<filterCache
  class="solr.FastLRUCache"
  size="1024"
  initialSize="0"
  autowarmCount="0"/>

<queryResultCache
  class="solr.FastLRUCache"
  size="1024"
  initialSize="0"
  autowarmCount="0"/>

<documentCache
  class="solr.FastLRUCache"
  size="1024"
  initialSize="0"
  autowarmCount="0"/> 
```

通常我的对象很大，但不是很大，每个对象不超过 1mb！

Xmx 为 2GB。

300 万份文档被索引。

OOM 出现在查询时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:38:07.433

如果您检查 /admin/stats.jsp 中的 Solr 核心，您可以在 FieldCache 下看到：

`Provides introspection of the Lucene FieldCache, this is **NOT** a cache that is managed by Solr.`

除了更改查询之外，您无法在 Solr 中对此缓存执行任何操作。很可能您正在对动态字段进行排序或在不使用`facet.method=enum`. 请参阅[动态字段上的 Solr/Lucene fieldCache OutOfMemory 错误排序](https://stackoverflow.com/questions/13393248/solr-lucene-fieldcache-outofmemory-error-sorting-on-dynamic-field)

# php - 大约 30 分钟后 PHP 会话变量为空

> ID：15792674
> 
> 赞同：0
> 
> 时间：2013-04-03T16:18:31.760
> 
> 标签：php, linux, session, variables

我遇到了会话变量在大约 35-40 分钟后变为空的问题。但是，会话 ID 似乎仍然显示为有效（并且与之前的数字相同）。

我创建了一些测试代码，它读取并显示会话变量，然后在越来越多的秒数后重新加载页面。它一直工作到 2400 秒，此时变量在下一次显示时为空。换句话说，它在两次刷新之间等待 2400 秒时始终为空。我已将 .htaccess 中的 session.gc_maxlifetime 设置为 7800（显然已设置，因为它使用 ini_get 读取为 7800）。

我要么遗漏了一些明显的东西，要么在这里工作了一些严重的奇怪现象。这让我发疯了。

这是在带有 WHM 的 Linux VPS 上。

创建测试会话的代码：

```
<?php
    // start session
    session_start();

    // set session value
    $_SESSION["session_memberid"] = 1234567;
    $_SESSION["session_refresh"] = 2000;

    // write file, close
    session_write_close();

    // display confirmation
    echo json_encode(array(
        '$_SESSION["session_memberid"]' => $_SESSION["session_memberid"],
        'session_id' => session_id(),
        'maxlifetime' => ini_get('session.gc_maxlifetime')
    ));
?> 
```

读取会话的代码（自动重新加载）：

```
<?php
// start session
session_start();

// get session id
$session_id = session_id();

// get stored memberid
$member_id = $_SESSION['session_memberid'];
$_SESSION['session_memberid'] = $member_id;

// get last activity
$lastactivity = $_SESSION["last_activity"];

// increasing refresh time
$refresh = $_SESSION["session_refresh"];
$_SESSION["session_refresh"] = $refresh + 100;

// update time
$_SESSION["last_activity"] = time();

// write file, close
session_write_close();

...
(code to display and refresh variables) 
```

有效读取时输出：

```
{"memberid":1234567,"session_id":"c9d20d4992f184f29b259ef5ccab275f","sessionpath":"\/tmp","maxlifetime":"7800","sessioncookiepath":"\/","sessioncookielifetime":"0","referrer":"","autostart":"0","cache":false,"time":1365004882,"cookie":{"lifetime":0,"path":"\/","domain":"","secure":false,"httponly":false},"refresh":2400} 
```

无效读取时的输出显示 memberid（我们需要的变量）、时间（last_activity）和刷新时间为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:01:13.970

apache 用户是否可能没有在 /tmp 目录中写入的权限，并且会话仅在该时间段内在 ram 中处于活动状态。一旦从 ram 中删除，它将默认为文件，由于权限而从未被写入？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:55:58.420

事实证明，问题在于 php.ini 在运行时没有被 .htaccess 或 ini_set 中的设置正确覆盖，即使 ini_get 显示该值已被覆盖。原因尚不清楚，但工作修复是简单地更改 php.ini 中的 session.gc_maxlifetime。

# html - 还是需要使用 导航标签和链接列表？

> ID：15792678
> 
> 赞同：1
> 
> 时间：2013-04-03T16:18:39.773
> 
> 标签：html, list, navigation, html-lists

所以我听过很多次，只要你有一个任何东西的列表，你应该使用一个 UL 标签来列出它们，而不是一堆 div。但是今天我一直在研究一些网站是如何创建他们的网站的，我注意到一些较大的网站没有使用 UL 标签，而是使用了一堆 div。

我的问题是，使用 UL 还是更好吗，或者这与使用一堆 div 没有区别。

为了说明我在说什么，哪个更好：

```
<ul>
  <li>Link 1</li>
  <li>Link 2</li>
<ul> 
```

或者

```
<div>Link 1</div>
<div>Link 2</div> 
```

我注意到现在甚至 Microsoft Windows 页面都在使用 div。[http://windows.microsoft.com/en-us/windows/home](http://windows.microsoft.com/en-us/windows/home)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:29:13.720

这几乎是你的选择。这是一篇关于这两种技术优缺点的非常好的文章：http: [//css-tricks.com/navigation-in-lists-to-be-or-not-to-be/](http://css-tricks.com/navigation-in-lists-to-be-or-not-to-be/)

我想如果您担心纯文本浏览器和可访问性，列表仍然更好..但不是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:47:32.093

这似乎是一个 6 对半打的问题，但我会尝试一下。根据我的经验，最好使用该`<ul>`设置，因为如果您的导航中有很多链接，它会更快更干净。我猜想设置“嵌套”或“子导航”也更容易一些。

如在

```
<ul>
    <li>link 1
        <ul>
            <li>link 1 a</li>
            <li>link 1 b</li>
        </ul>
    </li>
    <li>link 2</li>
</ul> 
```

当然你可以做任何一种方式，但我更喜欢这种方式，主要是为了可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:30:48.023

简而言之，根本没有区别。

大多数人只是喜欢使用 &

*   因为它更容易组合在一起。

# android - 使用按钮在 android 中滑动

> ID：15792679
> 
> 赞同：2
> 
> 时间：2013-04-03T16:18:40.187
> 
> 标签：android, button, android-viewpager, swipe, android-4.0-ice-cream-sandwich

我遇到了这个问题：

```
package com.app.BoomBase;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ImageButton;
import android.widget.RelativeLayout;
import android.widget.Toast;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.ViewPager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(1);     

    }

private class MyPagerAdapter extends PagerAdapter {
    public int getCount() {
        return 3;
}

public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId =0;
        switch (position) 
        {
        case 0:
                resId = R.layout.advanced;
                break;
        case 1: 
                resId = R.layout.activity_main;
                break;
        case 2:
                resId = R.layout.beginner;
                ImageButton ibDistance = (ImageButton)         findViewById(R.id.ibDistance);
                RelativeLayout RelativeB = (RelativeLayout) findViewById(R.id.RelativeB);
                break;
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);

        return view;
   }
   @Override
     public void destroyItem(View arg0, int arg1, Object arg2) {
     ((ViewPager) arg0).removeView((View) arg2);
    }
   @Override
      public boolean isViewFromObject(View arg0, Object arg1) {
      return arg0 == ((View) arg1);
     }
   @Override
      public Parcelable saveState() {
      return null;
      }
}
} 
```

我正在尝试在名为初学者的活动上实现按钮，但如果我在案例 2 中为名为 ibDistance 的按钮放置一个 OnClickListner，则程序崩溃

```
 ibDistance.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        //Open Activity here, via Intent
                    }
                }); 
```

Logcat 文件：

```
E/AndroidRuntime(13680): FATAL EXCEPTION: main
E/AndroidRuntime(13680): java.lang.NullPointerException
E/AndroidRuntime(13680):    at com.app.BoomBase.MainActivity$MyPagerAdapter.instantiateItem(MainActivity.java:52)
E/AndroidRuntime(13680):    at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
E/AndroidRuntime(13680):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:800)
E/AndroidRuntime(13680):    at android.support.v4.view.ViewPager.populate(ViewPager.java:991)
E/AndroidRuntime(13680):    at android.support.v4.view.ViewPager.populate(ViewPager.java:880)
E/AndroidRuntime(13680):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1374)
E/AndroidRuntime(13680):    at android.view.View.measure(View.java:15504)
E/AndroidRuntime(13680):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5059)
E/AndroidRuntime(13680):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1396)
E/AndroidRuntime(13680):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
E/AndroidRuntime(13680):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
E/AndroidRuntime(13680):    at android.view.View.measure(View.java:15504)
E/AndroidRuntime(13680):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5059)
E/AndroidRuntime(13680):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
E/AndroidRuntime(13680):    at android.view.View.measure(View.java:15504)
E/AndroidRuntime(13680):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
E/AndroidRuntime(13680):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
E/AndroidRuntime(13680):    at android.view.View.measure(View.java:15504)
E/AndroidRuntime(13680):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5059)
E/AndroidRuntime(13680):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
E/AndroidRuntime(13680):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2385)
E/AndroidRuntime(13680):    at android.view.View.measure(View.java:15504)
E/AndroidRuntime(13680):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1979)
E/AndroidRuntime(13680):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1222)
E/AndroidRuntime(13680):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1395)
E/AndroidRuntime(13680):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1115)
E/AndroidRuntime(13680):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4526)
E/AndroidRuntime(13680):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
E/AndroidRuntime(13680):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
E/AndroidRuntime(13680):    at android.view.Choreographer.doFrame(Choreographer.java:525)
E/AndroidRuntime(13680):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
E/AndroidRuntime(13680):    at android.os.Handler.handleCallback(Handler.java:615)
E/AndroidRuntime(13680):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(13680):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(13680):    at android.app.ActivityThread.main(ActivityThread.java:4921)
E/AndroidRuntime(13680):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(13680):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(13680):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
E/AndroidRuntime(13680):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
E/AndroidRuntime(13680):    at dalvik.system.NativeStart.main(Native Method) 
```

我能做些什么 ？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:00:52.620

我需要首先问一个问题 - 您尝试使用的按钮是您主要活动的一部分吗？`findViewById`通过搜索您为要查找的视图提供`setContentView`的视图来工作 - 在本例中为按钮。如果按钮实际上不在布局中，则不会找到它并会给您一个错误。

假设按钮位于您的主要活动布局中，这就是我认为正在发生的事情。

通常你需要`onClickListener`在你的`onCreate`方法中添加。有一些方法可以通过例如[使用私有类](https://stackoverflow.com/questions/7384617/android-setclicklistner-outside-oncreate)`onClickListener`来移动外部。我认为您可以通过以下方式解决此问题：`onCreate`

（1）在您之前将您的按钮声明为实例变量`onCreate`

```
ImageButton ibDistance; 
```

（2）初始化您的按钮并`onClickListener`在您的`onCreate`方法中设置

```
ibDistance = (ImageButton) findViewById(R.id.ibDistance);
ibDistance.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                }
            }); 
```

如果您要更改案例 2 下的布局或添加按钮（我不知道您到底在做什么），那么您只需参考`ImageButton`您之前在该部分代码中声明的内容。

另一种方法是根本不使用`onClickListener`。按钮都有一个`onClick`XML 属性，允许您指定触发什么方法，而无需使用`onClickListener`. 要使用此功能，您需要在您希望按钮触发某些东西的活动中声明一个公共方法。

```
public void runThisOnClick(View v){
    //do something 
} 
```

评论部分中的内容是按下按钮时会发生什么。显然，您更改了方法的名称以及您在该`onClick`按钮的属性中放置的内容以满足您的需要。

# batch-file - 批处理代码中的数字比较

> ID：15792681
> 
> 赞同：0
> 
> 时间：2013-04-03T16:18:42.217
> 
> 标签：batch-file, numbers, comparison, inequalities

我的批处理代码中的 <、> 和 == 等数字比较有困难。我所做的是生成一个随机数并使用该答案做某事，这就是我写的：

```
set rand=%random%
set rand=%rand:~1,1% 
If %rand%==9 goto nine
If %rand%>5 goto above 5
If %rand%>1 goto above 1
If %rand%==0 goto zero 
```

当我运行它时，代码就会关闭。我尝试在被比较的两个对象和不等式之间放置空间，但它仍然不起作用。

请记住，这是 Windows 上的批处理代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:29:27.620

阅读 `HELP IF`然后试试这个

```
if %rand% equ 9 goto nine
if %rand% gtr 5 goto above5
goto below5 
```

请注意，标签名称不能包含空格

作为额外的奖励，阅读`HELP SET`并将您尝试获取随机 0 到 9 数字的方式更改为

```
set /a rand=%random% %% 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-13T18:58:35.047

因为 if 命令使用这些键而不是等于和大于符号；

```
EQU - equal
NEQ - not equal
LSS - less than
LEQ - less than or equal
GTR - greater than
GEQ - greater than or equal 
```

对于 Equ tho，我建议使用 == 而不是 equ。更容易打字。

# java - 删除链表的最后一个节点

> ID：15792682
> 
> 赞同：2
> 
> 时间：2013-04-03T16:18:44.947
> 
> 标签：java, linked-list, nodes

我正在练习使用链接列表节点，但遇到了一个我不知道如何回答的问题。你如何去删除链表中的最后一个节点。下面的代码适用于最后一个节点的所有条目栏。最后一个不会被删除。

节点类

```
public class Node {

    private String data;
    private Node next;

    Node(String data, Node next)
    {
        this.data = data;
        this.next = next;
    }

    public void setData(String d)
    {
        data = d;
    }

    public void setNext(Node n)
    {
        next = n;
    }

    public String getData()
    {
        return data;
    }

    public Node getNext()
    {
        return next;
    } 
```

主要的

```
Node list = new Node("NODE 1",new Node("NODE 2",new Node("NODE 3", null)));
        list = insertSecond(list,"New Node");
        list = addLast(list,"LAST NODE");

        printList(list);
        System.out.println();
        deleteNode(list,"LAST NODE");
        printList(list);    
    }

    public static Node deleteNode(Node list,String str)
    {
        Node temp = list;
        Node prev = list;

        while(temp.getNext() != null)
        {
            if(temp.getData().equals(str))
            {
                if(prev.getNext() == null)
                    prev.setNext(null);
                else{
                prev.setNext(prev.getNext().getNext());
                }

            }
            prev = temp;
            temp = temp.getNext();
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:33:27.380

```
while(temp != null){
  prev = temp;
  temp = temp.getNext();

}

prev.next = null; 
```

试试这个：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-25T11:52:41.583

这是我用来删除最后一个节点的非常简单的技术。

```
public void deleteLast() {
    Node curr = null;

    for (curr = this.first; curr.next.next != null;curr = curr.next) {

    }

    curr.next = null;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T16:21:29.870

如果您使用双向链表，这是最简单的，您的列表知道开始和结束。

然后你可以做这样的事情：

```
public void removeLastItem(){
    this.lastNode = this.lastNode.prev;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:21:37.193

我猜`while(temp.getNext() != null)`你的最后一个元素会失败。最后一个元素没有`next`元素。所以最后一个元素不会与传递的字符串进行比较。您应该使用调试器对此进行跟踪。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T16:28:04.403

你需要这样的东西：

```
public static Node deleteNode(Node list, String str) {
  Node temp = list;
  Node prev = list;

  do {
    if (temp.getData().equals(str)) {
      if (prev.getNext() == null) {
        prev.setNext(null);
      } else {
        prev.setNext(prev.getNext().getNext());
      }
    }
    prev = temp;
    temp = temp.getNext();
  } while (temp != null);

  return list;
} 
```

你过早地停止你的循环。

顺便说一句：`if (prev.getNext() == null) { prev.setNext(null); ...`没有意义，但我会把那个错误留给你。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-03T16:42:41.243

## 删除单链表中的节点

### 假设

1.  列表中的每个节点都有一个`nextNode`指针。
2.  `headOfList`指针指向列表中的第一个节点。
3.  已经在列表中的每个节点的下一个指针是正确的。
4.  列表中最后一个节点的下一个指针是一些有意义的值（例如，null）。

### 实施步骤

1.  如果列表为空，则完成。未找到所需节点。
2.  如果第一个节点是所需节点，则将`headOfList`指针设置为该`headOfList->nextNode`值。完毕。找到所需的节点。
3.  将`currentNode`指针设置为等于`headOfList`指针值。
4.  如果该`currentNode`节点是最后一个节点。完毕。未找到所需节点。
5.  如果该`currentNode->nextNode`节点是所需节点，请将 设置`currentNode->nextNode`为该`currentNode->nextNode->nextNode`值。完毕。找到所需的节点。
6.  转到第 4 步。

### 笔记

由于这是一个单链表，所以不能备份。因此，您需要指向节点父节点并检查节点子节点是否是您要删除的节点。会有边界条件。

### 一些代码

这是 LinkedList 类的成员函数。startOfList 是一个类成员，指向链表的开始。

```
 public boolean delete(final String target)
    {
        if (startOfList != null)
        {
            if (StringUtils.equals(startOfList.getData(), target))
            {
                startOfList = startOfList.getNext();
                return true;
            }

            Node current = startOfList;

            for (Node next = current.getNext(); next != null; next = current.getNext())
            {
                if (StringUtils.equals(next.getData(), target))
                {
                    current.setNext(next.getNext());
                    return true;
                }
                else // advance one node.
                {
                    current = next;
                }
            }
        }

        return false;
    }
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-30T06:54:10.747

这是我的尝试，假设最后一个节点的下一个变量将始终为空：

```
public class LastNodeRemoval {

  private static class Node {
      String item;
      Node next;
  }

  public static void main(String[] args) {
      Node third = new Node();
      third.item = "Third";

      Node second = new Node();
      second.item = "Second";
      second.next = third;

      Node first = new Node();
      first.item = "First";
      first.next = second;

      removalLastNode(first);
   }

   private static void removalLastNode(Node first) {
      Node temp = first;

      while(temp.next.next != null) {
          temp = temp.next;
      }

      temp.next = null;

      System.out.println("Last node: "+temp.item);
   }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-06T13:11:30.957

这可以通过使用 Java 容器类“LinkedList”以更简单的方式完成。Java 中的 LinkedList 类实现了支持 get/add/remove First/Last 方法的 Deque（双端队列）接口。一个基本的代码片段如下：

```
LinkedList<Integer> list = new LinkedList<Integer>();
list.addFirst(1);
list.addLast(2);
System.out.println(list.removeLast()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-16T07:33:03.883

这个对我有用..

```
public void removeLastNode(){
    System.out.println("\n Inside removeLastNode");
    next=firstLink;
    prev=firstLink;
    if(next == null) System.out.println("\n The link List is Empty");
    while(next.getNext()!=null) { 
        prev=next;
        next=next.getNext();
    }
    prev.setNext(null);  
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-16T15:28:42.513

这里的逻辑很简单，和获取最后一个节点是一样的。这里的棘手之处在于，当您到达最后一个节点时，您必须记住**最后一个节点之前的节点**并将其设置为 null，以便它将成为新的最后一个节点。在下面的代码中，当您到达最后一个元素**n2**时，获取**n1**并将其设置为 null。

```
public void removeLast(){
    if(head==null) System.out.println("List is empty");
    else {
    Node n1 = null;
    Node n2 = head;
        while(n2.next != null)
        {
            n1 = n2;
            n2 = n2.next;
        }
        n1.next = null;
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-12-29T14:00:14.920

```
public  Node deleteEnd(Node node)

{

if(node==null)

{

  throw new IllegalStateException();

}

    if(node.getNext()==null)
    return null;

    Node headF=node;

    while (node.getNext().getNext()!=null)
    {
        node=node.getNext();
    }
    node.setNext(null);
    return headF;

} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-18T17:07:41.147

给定以下单链表实现，可以使用`removeLast()`或从节点`removeLastRecursive()`开始遍历列表的方法删除最后一个`first`节点：

```
public class LinkedList<T> {
    Node<T> first;
    Node<T> last;
    int length;

    public LinkedList() {

    }

    public static void main(String[] args) {
        LinkedList<String> linkedList = new LinkedList();
        linkedList.add("A");
        linkedList.add("B");
        linkedList.add("C");
        linkedList.add("D");

        linkedList.printListParams();
        linkedList.removeLast();
        linkedList.printListParams();
        linkedList.removeLast();
        linkedList.printListParams();
        linkedList.removeLast();
        linkedList.printListParams();
        linkedList.removeLast();
        linkedList.printListParams();
        linkedList.removeLast();
        linkedList.printListParams();
    }

    public void add(T data) {
        if (isEmpty()) {
            first = new Node(data);
            last = first;
        } else {
            last.next = new Node(data);
            last = last.next;
        }
        length++;
    }

    public void removeLast() {
        Node current = first;
        if (isEmpty()) return;
        if (current.next != null) {
            while (current.next != null) {
                if (current.next.next == null) {
                    current.next = null;
                    last = current;
                    length--;
                    return;
                }
                current = current.next;
            }
        } else {
            first = null;
            last = null;
            length--;
        }
    }

    public void removeLastRecursive() {
        if (isEmpty()) return;
        if (first.next != null) {
            removeLast(first);
        } else {
            first = null;
            last = null;
            length--;
        }
    }

    private void removeLast(Node node) {
        if (node.next.next != null) {
            removeLast(node.next);
        } else {
            node.next = null;
            last = node;
            length--;
            return;
        }
    }

    public boolean isEmpty() {
        return first == null;
    }

    public void printList() {
        Node current = first;
        while (current != null) {
            System.out.print(current.data);
            current = current.next;
        }
        System.out.println();
    }

    public void printListParams() {
        printList();
        System.out.println("Length: " + length);
        System.out.println("Last node data: " + ((last != null) ? last.data : last));
        System.out.println("***********************");
    }

    private class Node<T> {
        T data;
        Node next;

        public Node(T data) {
            this.data = data;
        }
    }

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-14T15:39:31.707

```
/**
 * Deletion From End
 */
public static LinkedList DeletionFromEnd(LinkedList list){
    Node currNode = list.head;
    Node prevNode = null;

    while( currNode.getNext() != null) {
        prevNode = currNode;
        currNode = currNode.getNext();
    }
    prevNode.setNext(null);

    return list;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-08-23T22:56:03.337

这将工作:)

```
public void deleteFromLast()
{   Node secondLastNode=null;
    Node currentNode=first;
    while(currentNode.next!=null)
    {   secondLastNode=currentNode;
        currentNode=currentNode.next;
        if(currentNode.next==null)
        {
            secondLastNode.next=null;;
            break;
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-02-13T17:36:45.050

> 这更简单，更完美。

```
public void deleteLastNode() {
    Node curr = head;
    Node prevNode = null;
    if(head == null) return;
    while(curr != null && curr.next != null) {
        prevNode = curr;
        curr = curr.next;
    }
    if(head.next != null) prevNode.next = null;
    else head = null;
} 
```

# highcharts - Highcharts 圆环图在 100% 时移除边框

> ID：15792683
> 
> 赞同：0
> 
> 时间：2013-04-03T16:18:47.523
> 
> 标签：highcharts

当图表的一部分为 100% 时，我想删除白色边框。在 100% 时，我希望圆环图是完整的（没有线条）。不过，当有段时，我仍然需要粗线。有谁知道我该怎么做？非常感谢你的帮助！非常感谢！

[http://jsfiddle.net/NVX3S/153/](http://jsfiddle.net/NVX3S/153/)

```
<script src="http://code.highcharts.com/highcharts.js"></script>

<div id="vacation-time-chart" style="min-width: 300px; height: 300px; margin: 0 auto"></div>
<div id="vacation-time-chart2" style="min-width: 300px; height: 300px; margin: 0 auto"></div>

$(function () {
var colors = ['#8d62a0', '#ceb3d8', '#d5dddd'];
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'vacation-time-chart',
        type: 'pie',
        height: 250,
        width: 250,
        borderRadius: 0
    },
    credits: {
        enabled: false
    },
    title: false,
    tooltip: false,
    plotOptions: {
        pie: {
            borderWidth: 6,
            startAngle: 90,
            innerSize: '55%',
            size: '100%',
            shadow: true,
            // {
            //     color: '#000000',
            //     offsetX: 0,
            //     offsetY: 2,
            //     opacity: 0.7,
            //     width: 3
            // },
            dataLabels: false,
            stickyTracking: false,
            states: {
                hover: {
                    enabled: false
                }
            },
            point: {
            events: {
                mouseOver: function(){
                    this.series.chart.innerText.attr({text: this.y});
                }, 
                mouseOut: function(){
                    this.series.chart.innerText.attr({text: 112});
                }
            }
            }
        }
    },

    series: [{
        data: [
            {y:0, color: colors[0]},
            {y:0, color: colors[1]},
            {y:100, color: colors[2]}
        ]
        // data: [
        //     ['Firefox',   44.2],
        //     ['IE7',       26.6],
        //     ['IE6',       20],
        //     ['Chrome',    3.1],
        //     ['Other',    5.4]
        // ]
    }]
},
 function(chart) { // on complete

    var xpos = '50%';
    var ypos = '53%';
    var circleradius = 102;

// Render the text 
chart.innerText = chart.renderer.text('112', 112, 125).css({
        width: circleradius*2,
        color: '#4572A7',
        fontSize: '16px',
        textAlign: 'center'
  }).attr({
        // why doesn't zIndex get the text in front of the chart?
        zIndex: 999
    }).add();
}); 
```

});

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:10:37.470

我不知道是否有办法在 Highcharts 配置对象中有条件地设置边框宽度。无论数据点如何，要完全删除白色边框：

```
plotOptions: {
  pie: {
    borderWidth: 0
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T13:02:02.250

也没有从 Highchart 配置中动态设置它，但是在检索数据后这样做：

```
if( pie.series[0].data.length === 1 ) {
  pie.options.plotOptions.pie.borderWidth = 0;
} 
```

# loops - 使用区域在 UML 活动图中循环

> ID：15792687
> 
> 赞同：20
> 
> 时间：2013-04-03T16:18:55.217
> 
> 标签：loops, android-activity, uml

我正在对 UML 活动图中的循环进行建模。它适用于简单的条件节点（图 1），但我正在寻找一种更具表现力的方式来**强调循环语义**。所以我来到[这里](http://www.pst.ifi.lmu.de/~stoerrle/V/AD-4b-ExpansionNJC.pdf)和[那里](http://sparxsystems.com/enterprise_architect_user_guide/12.1/building_models/loop_and_conditional_nodes2.html)显示的“区域”或“可中断区域” ，但我找不到很多真正令人满意的例子。

我的示例是一个处理给定列表消息的函数。一旦找到第一个有效消息，循环就会中止，然后处理消息并且函数返回 true。否则，它返回false（请不要评论sense或废话，这只是为了样本）。

图1：使用了一个很好的旧活动图条件节点。诚然，沿着箭头跟踪控制流更容易，但没有“循环”，只有一个“如果”。

图2：

*   （正）退出条件是否正确，使用中断边缘？没错，它可能与迭代器一起成为循环的 [test] 部分的一部分。
*   顺便说一句：在 UML 中如何最好地表达 for 循环的迭代特性？
*   循环体内的活动最终节点是否正确（即当条件“消息有效？”产生“否”时）？在这里使用最终节点感觉有些不对劲，但是我还能如何表达*一个循环*的控制流呢？

两个图的功能应该是等效的：

![带条件节点的循环](https://i.stack.imgur.com/KU1Hv.png)

![与区域循环](https://i.stack.imgur.com/ygYdp.png)

* * *

编辑：另一个实现斯蒂芬建议的图表：

*   循环体内的初始节点和最终节点
*   “进一步处理”现在在循环体内。嗯...在这里可以，但可能还有其他循环，我宁愿把它放在外面。然后我可能会改变设计......
*   “下一条消息”也可以看作是*迭代器对象*本身，而不是原始图中的“（提供）下一条消息”*动作。*
*   这两个对象流箭头可能有点矫枉过正，但我​​认为它们是正确的。

![在此处输入图像描述](https://i.stack.imgur.com/15Qgu.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T19:03:21.990

在 UML 中，活动最终节点表示完成，因此在循环区域中使用它是正确的，它是循环内容的正常完成（进而导致下一次迭代）。作为旁注，我建议您在循环开始时也使用初始节点。

还有一个流最终节点，它代表一个出口，而不是一个完成。因此，您可以使用它来表示“break”语句，而不是您使用的中断边缘。在这种情况下，您必须在“是”分支中，就在此流程最终节点之前集成“进一步消息处理节点”。

中断边缘更适用于来自当前处理之外的中断。该区域是可中断的，无论区域内容的进展如何，某些事件（通常用接收节点注明）都可能完全中断它。情况并非如此。

不幸的是，关于迭代字符，没有什么非常直观的。我倾向于在区域顶部使用对象节点，就在初始节点旁边。

# html - 是否可以在没有父容器或将其设置为背景的情况下在 css中裁剪图像？

> ID：15792688
> 
> 赞同：0
> 
> 时间：2013-04-03T16:18:56.920
> 
> 标签：html, css, image

有没有办法用css裁剪图像（img标签），没有php，javascript，使用父元素或将图像设置为背景图像？例如，假设我有一个 400 x 400 像素的图像，包含在一个 html 文档中，如下所示：

```
<img src="400x400.jpg" /> 
```

有没有办法纯粹在 css 中裁剪这个图像（不扭曲图像）？我问这个是因为这将是裁剪图像的更具语义化的方式，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:21:15.787

绝对地！这是奇妙但经常被误解的`clip`属性。

```
clip:rect(110px, 160px, 170px, 60px); /* Random example */ 
```

它一直工作到 IE4。[您可以通过这个精彩的教程](http://tympanus.net/codrops/2013/01/16/understanding-the-css-clip-property/)了解更多信息。

# php - 标头可能不包含 NUL 字节 Codeigniter

> ID：15792693
> 
> 赞同：0
> 
> 时间：2013-04-03T16:19:03.120
> 
> 标签：php, codeigniter, redirect, hyperlink, header

当我在 PHP 中使用*Header Location函数或**重定向*codeigniter 函数进行重定向时，浏览器会返回此错误：

> 标头可能不包含 NUL 字节

我如何解决它？

我正在使用 codeigniter 框架

```
$link=$this->model->str_decrypt($_GET['crplinK'], KEY_CRYPT);
$id=$this->model->str_decrypt($_GET['aInsD'], KEY_CRYPT);
$link = preg_replace('#^https?://#', '', $link);
$link=str_replace('www.', '', $link);
$url = prep_url($link);
if($this->db->query("UPDATE ".SCHEMA.".ads SET clicks=clicks+1 where id_ads=".$id))
 redirect($url, 'refresh');
else echo pg_last_error(); 
```

在哪里`$link="http://nokia.it";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T13:46:09.873

试着`var_dump($your_url);`看看它是否包含一些丑陋的字符。如果是这样，那么**`TRIM()`**在调用之前。

# php - Mageneto目录类别布局xml句柄？

> ID：15792698
> 
> 赞同：0
> 
> 时间：2013-04-03T16:19:11.090
> 
> 标签：php, magento, magento-layout-xml

所以我遇到了一个奇怪的问题。我正在尝试通过锁定与此 URL 对应的控制器操作的句柄来进行布局更新：“.../index.php/admin/catalog_category/index/”。

本质上，在管理面板中，当用户单击目录-> 类别-> 管理类别时，这就是显示的 URL。在我自己的模块中，我尝试使用以下更新锁定此控制器操作：

```
<layout>
    <admin_catalog_category_index>
        <reference name="content">
            <block type="categorysearch/adminhtml_categorysearch_search" name="categorysearch" />
        </reference>
    </admin_catalog_category_index>
</layout> 
```

我不确定为什么这不能正常工作。我很难弄清楚为什么没有添加我的块。

感谢您提供的任何帮助！

**编辑：** 另外，我忘了提到在我的块的构造函数中，我只是在呼应“到这里”并杀死应用程序。我已经使用其他句柄和控制器操作测试了该块，以确认该块正在正确加载。我还在我使用的 xml 文件中放置了其他句柄，以确保正在加载 xml 文件。

**更新** 我尝试使用 alanstorm 在此 url 提供的 LayoutViewer 模块：“ [http://alanstorm.com/layouts_blocks_and_templates](http://alanstorm.com/layouts_blocks_and_templates) ”。在使用这个工具时，结果发现没有手柄，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:45:34.067

看起来您使用了错误的布局句柄，尽管很容易看出为什么人们会被这个绊倒。

如果我[使用 Commerce Bug 查看该页面的布局句柄](http://store.pulsestorm.net/products/commerce-bug-2)（自我链接，Commerce Bug 是我创建和销售的商业调试扩展），我会看到以下内容

![在此处输入图像描述](https://i.stack.imgur.com/IE1ok.png)

所以这`admin_catalog_category_edit`不是`admin_catalog_category_index`.

为什么`edit`而不是`index`？如果我使用[Commerce Bug 的](http://store.pulsestorm.net/products/commerce-bug-2)请求选项卡来查找控制器文件

![在此处输入图像描述](https://i.stack.imgur.com/Th6nE.png)

然后看索引动作方法。

```
#File: app/code/core/Mage/Adminhtml/controllers/Catalog/CategoryController.php
public function indexAction()
{
    $this->_forward('edit');
} 
```

啊哈！该`indexAction`方法转发到`edit`操作。当您在 Magento 中转发请求时，您是在说

> 嘿 Magento，让我们假设请求使用**此**操作方法而不是实际操作方法，**而不**进行 HTTP 重定向。

假设您的 Layout XML 位于正确的文件中，请将您的`admin_catalog_category_index`句柄更改为`admin_catalog_category_edit`，然后您就可以开始使用了。

**更新**：当然，假设您不想更新内容块。
类别编辑页面的另一个问题是，当页面加载时，它会用 AJAX 请求替换其内容区域。当我将以下内容添加到`local.xml`

```
<layout>
    <admin_catalog_category_index>
        <reference name="content">
            <!-- <block type="categorysearch/adminhtml_categorysearch_search" name="categorysearch" /> -->
            <block type="core/text" name="WednesdayApril32013">
                <action method="setText">
                    <text>This is a test</text>
                </action>
            </block>
        </reference>
    </admin_catalog_category_index>
</layout> 
```

`View -> Developer -> View Source`页面源代码（在 Chrome 中）中呈现了文本“这是一个测试” 。但是，Magento 会立即向这样的 URL 发出后台 ajax 请求

```
http://store.example.com/index.php/admin/catalog_category/edit/key/c184cfd77dcf298659d1cb3a31c51852/section/general/?isAjax=true 
```

并替换内容部分。如果我们再看一下控制器

```
 #File: app/code/core/Mage/Adminhtml/controllers/Catalog/CategoryController.php
    if ($this->getRequest()->getQuery('isAjax')) {
        // prepare breadcrumbs of selected category, if any
        $breadcrumbsPath = $category->getPath();
        if (empty($breadcrumbsPath)) {
            // but if no category, and it is deleted - prepare breadcrumbs from path, saved in session
            $breadcrumbsPath = Mage::getSingleton('admin/session')->getDeletedPath(true);
            if (!empty($breadcrumbsPath)) {
                $breadcrumbsPath = explode('/', $breadcrumbsPath);
                // no need to get parent breadcrumbs if deleting category level 1
                if (count($breadcrumbsPath) <= 1) {
                    $breadcrumbsPath = '';
                }
                else {
                    array_pop($breadcrumbsPath);
                    $breadcrumbsPath = implode('/', $breadcrumbsPath);
                }
            }
        }

        Mage::getSingleton('admin/session')
            ->setLastViewedStore($this->getRequest()->getParam('store'));
        Mage::getSingleton('admin/session')
            ->setLastEditedCategory($category->getId());
    //            $this->_initLayoutMessages('adminhtml/session');
        $this->loadLayout();

        $eventResponse = new Varien_Object(array(
            'content' => $this->getLayout()->getBlock('category.edit')->getFormHtml()
                . $this->getLayout()->getBlock('category.tree')
                ->getBreadcrumbsJavascript($breadcrumbsPath, 'editingCategoryBreadcrumbs'),
            'messages' => $this->getLayout()->getMessagesBlock()->getGroupedHtml(),
        ));

        Mage::dispatchEvent('category_prepare_ajax_response', array(
            'response' => $eventResponse,
            'controller' => $this
        ));

        $this->getResponse()->setBody(
            Mage::helper('core')->jsonEncode($eventResponse->getData())
        );

        return;
    } 
```

我们可以在正常布局渲染流程之外处理这个 ajax 请求。

因此，有了这些额外的知识，我将为 创建一个事件侦听器`category_prepare_ajax_response`，然后将您的内容添加到传入的响应对象中

# assembly - 在 x86 汇编语言中将字节转换为字符串

> ID：15792702
> 
> 赞同：0
> 
> 时间：2013-04-03T16:19:18.593
> 
> 标签：assembly, x86, masm

在 x86 汇编语言中，是否有任何有效的方法可以将字节转换为二进制数字字符串（表示为 0 和 1 的字节数组）？据我所知，在大多数高级编程语言中，x86 汇编中没有任何“toString”函数。

```
.stack 2048

.data
theString byte 0, 0, 0, 0, 0, 0, 0, 0 ;store eax as a binary string here.
ExitProcess proto, exitcode:dword 

.code
start:
mov eax, 3;
;now I need to convert eax to a binary string somehow (i. e., a byte array of 0s and 1s)
invoke  ExitProcess, 0
end start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:44:00.657

有那么难吗：

```
.data
mystr db 33 dup(0)

.code

EaxToBinaryString:
    mov     ebx, offset mystr
    mov     ecx, 32
EaxToBinaryString1:
    mov     dl, '0' ; replace '0' with 0 if you don't want an ASCII string
    rol     eax, 1
    adc     dl, 0
    mov     byte ptr [ebx], dl
    inc     ebx
    loop    EaxToBinaryString1
    ret 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:10:12.937

使用*SSE 内在函数*，可以这样编码：

```
char in[2];
char string[16];
__m128i zeroes = _mm_set1_epi8('0');
__m128i ones = _mm_set1_epi8('1');
__m128i mask = _mm_set_epi8(
    0x80, 0x40, 0x20, 0x10, 8, 4, 2, 1,
    0x80, 0x40, 0x20, 0x10, 8, 4, 2, 1);
__m128i val = _mm_set_epi8(
    in[1], in[1], in[1], in[1], in[1], in[1], in[1], in[1],
    in[0], in[0], in[0], in[0], in[0], in[0], in[0], in[0]);

val = _mm_cmplt_epi8(val, _mm_and_si128(val, mask));
val = _mm_or_si128(_mm_and_si128(val, zeroes), _mm_andnot_si128(val, ones));
_mm_storeu_si128(string, val); 
```

该代码执行以下步骤：

*   将 2 字节输入复制到 XMM 寄存器的所有字节中，`_mm_set1_epi...()`
*   创建一个掩码以从每个单词中提取不同的位
*   位提取使用并行和
*   将提取的位与掩码进行比较（低于）。
    结果是一个数组，`0xffff`或者`0x0`如果该位被清除或设置。
*   使用该掩码提取`'0'`和字符，将它们组合起来。`'1'`
*   写出结果字节数组

这摆脱了移位和测试序列，但其代价是每个`_mm_set*()`扩展成几个 SSE 指令的序列。它仍然比位测试循环的 128 次迭代快。

# javascript - 如何排除Cufon注册并转换为画布

> ID：15792703
> 
> 赞同：0
> 
> 时间：2013-04-03T16:19:19.137
> 
> 标签：javascript, cufon

例如我有这个代码：

```
<div id="block-login">
  <a href="#"><!-- --></a>  
  <a href="log-reg">LOGIN / REGISTRATION</a>
</div> 
```

在 hy 标题中，我有这个：

```
<script>
  Cufon.replace('#block-login', { fontFamily: 'Myriad Pro' });
</script> 
```

我的问题是，如何与 Cufon 未注册的评论建立链接。是否可以通过javascript在cufon的设置中设置类似的东西？

因此，在结果中，只有其中包含某些内容（文本）的链接将被转换为 cufon 画布，而其他注释链接将被单独保留而不会进行转换。

因为现在转换评论的东西给我带来了很多问题；它增加了它们的高度和宽度，这扭曲了我的设计。在使用 Cufon 之前它是好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:24:20.813

仅将 ID 或类添加到您希望 Cufon 转换的部分怎么样？

```
<div id="block-login">
  <a href="#"><!-- --></a>  
  <a href="log-reg" class="something">LOGIN / REGISTRATION</a>
</div> 
```

然后你可以直接调用它：

```
Cufon.replace('.something', { fontFamily: 'Myriad Pro' }); 
```

我快速浏览了他们的[API 文档](https://github.com/sorccu/cufon/wiki/API)，我能找到的最接近您要求的是他们的`ignoreClass`选项：

> 允许您忽略基于单个或多个类名的元素。如果元素与其中一个类名匹配，则 Cufón 不会对其进行处理。它的孩子也将被单独留下。

这需要您为要忽略的事物添加一个类。

从个人经验来看，我一直使用类似的类`cufon`并将其放在需要应用 Cufon 的东西上，如果我知道它总是会应用于特定元素，我只会使用通用标签名称（例如`Cufon.replace('h1')`）。

# c# - 监视器进入/释放对象时的通知

> ID：15792705
> 
> 赞同：0
> 
> 时间：2013-04-03T16:19:22.980
> 
> 标签：c#, .net

我觉得我可能在这里重新发明轮子。这是我想要实现的目标：

当使用`lock`or锁定对象时`Monitor.Enter`，我想收到通知。同样，当对象被释放时，我想要一个通知。

我正在考虑编写一个包装类，该类公开一个可观察的发送通知，以及一些获取/释放锁的方法。但是，就像我提到的那样，我觉得我可能正在重做一些已经存在的事情。在不编写新类的情况下，我可以使用任何 .NET 技术来实现这一目标吗？

编辑：回答一些问题：为什么？在尝试执行之前，我需要知道一段代码何时忙碌。假设我们在 UI 上有两个按钮，A 和 B。A 执行方法 A，B 执行方法 B。他们都使用相同的对象来锁定/同步。当我看到有人已经在执行一段被同步对象实例 _syncObject 锁定的代码时，我想禁用这些按钮。我想给用户一个指示，该功能目前无法执行。

Monitor.TryEnter 或尝试验证锁是否可用不是解决方案，因为它需要轮询并且不是通知。

```
void methodA()
{
lock(_syncObject)
{
...
}
}

void methodB()
{
{
lock(_syncObject)
{
...
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:41:03.873

您将收到的唯一“通知”是`Monitor`已锁定或已解锁。例如：

```
 bool lockTaken;
   Monitor.Enter(lockObject, ref lockTaken);
   if(!lockTaken) Console.WriteLine("Already locked");
   else Console.WriteLine("Not already locked."); 
```

监视器和其他同步对象旨在控制线程，而不是用于通知。如果您想要通知发生的事情，请创建事件并引发它们——这就是事件的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:38:14.640

目前尚不清楚您要做什么。如果您想要某个线程正在执行受保护的代码段的通知，您可以创建一组事件，以便代码段开始后，您可以触发代码正在执行的事件......最后相同，只是在释放锁之前。

# c# - 在 Lucene.NET 中存储字符串列表

> ID：15792715
> 
> 赞同：6
> 
> 时间：2013-04-03T16:20:13.327
> 
> 标签：c#, lucene.net

我正在开发一个依赖 Lucene.NET 的项目。到目前为止，我已经有了一个具有简单名称/值属性的类（如 int ID { get; set; }）。但是，我现在需要在我的索引中添加一个新属性。该属性是一种列表。到目前为止，我已经像这样更新了我的索引......

```
MyResult result = GetResult();
using (IndexWriter indexWriter = Initialize())
{
  var document = new Document();
  document.Add(new Field("ID", result.ID.ToString(), Field.Store.YES, Field.Index.NOT_ANALYZE));
  indexWriter.AddDocument(document); 
} 
```

现在，MyResult 有一个表示列表的属性。我如何把它放在我的索引中？我需要将它添加到我的索引中的原因是我可以稍后将其取回。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T07:14:20.433

您可以将列表中的每个值添加为具有相同名称的新字段（lucene 支持），然后将这些值读回字符串列表：

```
MyResult result = GetResult();
using (IndexWriter indexWriter = Initialize())
{
    var document = new Document();
    document.Add(new Field("ID", result.ID.ToString(), Field.Store.YES, Field.Index.NOT_ANALYZE));

    foreach (string item in result.MyList)
    {
         document.Add(new Field("mylist", item, Field.Store.YES, Field.Index.NO));
    }

    indexWriter.AddDocument(document);
} 
```

以下是从搜索结果中提取值的方法：

```
MyResult result = GetResult();
result.MyList = new List<string>();

foreach (IFieldable field in doc.GetFields())
{
    if (field.Name == "ID")
    {
        result.ID = int.Parse(field.StringValue);
    }
    else if (field.Name == "myList")
    {
        result.MyList.Add(field.StringValue);
    }
} 
```

# macos - 防止 Cocoa WebView 中的资源加载

> ID：15792716
> 
> 赞同：1
> 
> 时间：2013-04-03T16:20:15.323
> 
> 标签：macos, cocoa, webview

我有一个 WebView 并正在为其提供内容。我想阻止的是 WebView 根据我提供的内容加载图像等，它需要从 Internet 上的外部站点获取。我想要做的是阻止 WebView 通过 Internet 进行通信以获取任何资源并仅显示我提供的内容。

我认为可能有用的是从以下位置返回 nil：

```
-webView:resource:willSendRequest:redirectResponse:fromDataSource: 
```

但是，图像等仍然是从外部站点加载的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:10:29.783

实现[WebResourceLoadDelegate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebResourceLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/20001914)协议并在被询问时修改请求`-webView:resource:willSendRequest:redirectResponse:fromDataSource:`。

# windows-8 - 使用AngularJS for Windows Store App“无法添加动态内容”，但它可以工作

> ID：15792717
> 
> 赞同：4
> 
> 时间：2013-04-03T16:20:16.287
> 
> 标签：windows-8, angularjs

我正在使用 AngularJS 创建一个 Windows 应用商店应用程序（或 Metro 应用程序，或其他任何名称）。

我解决了导致应用程序崩溃的 Javascript 运行时错误“无法添加动态内容”（请参阅[​​此处](http://onehungrymind.com/windows-8-and-angularjs/)），并且一切都很好，直到我开始使用指令（无法理解 angular.module.directive）。

现在，我有一个“无法添加动态内容”，但在控制台日志中。请注意，应用程序不会崩溃，事实上，应用程序按预期工作！

我应该忽略这个错误（我不喜欢那个），我能做些什么吗？

一个“时钟”应用程序的代码来说明：该应用程序确实显示了正确的时间，每秒格式化和递增。DOM 是我所期望的。

谢谢，

索引.html：

```
<!doctype html>
<html lang="en" ng-app="phonecat">
<head>
<meta charset="utf-8">
<title>Google Phone Gallery</title>
<link rel="stylesheet" href="css/app.css">
<link rel="stylesheet" href="css/bootstrap.css">

<script src="lib/jquery-1.8.2-win8-1.0.min.js"></script>
<script type="text/javascript">
    jQuery.isUnsafe = true;
</script>
<script src="lib/angular/angular.js"></script>
<script src="js/app.js"></script>
<script src="js/controllers.js"></script>
<script src="js/filters.js"></script>
<script src="js/services.js"></script>
<script src="lib/angular/angular-resource.js"></script>
</head> 
```

应用程序.js

```
angular.module('phonecat', ['phonecatFilters', 'phonecatServices']).config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/phones', {templateUrl: 'partials/phone-list.html',controller: PhoneListCtrl}).
      otherwise({redirectTo: '/phones'});
  }])
.directive('myCurrentTime', function($timeout, dateFilter) {
    return {
        restrict: 'E',
        replace: true,
        template: '<div> Current time is: <span>{{time}}</span></div>',
        link: function (scope, element, attrs) {
            var timeoutId;

            function updateTime() {
               scope.time = dateFilter(new Date(), 'M/d/yy h:mm:ss a');
            }

            function updateLater() {
                timeoutId = $timeout(function () {
                    updateTime();
                    updateLater();
                }, 1000);
            }

            element.bind('$destroy', function () {
                $timeout.cancel(timeoutId);
            });

            updateLater();
        }
    }
}); 
```

错误：

```
HTML1701: Unable to add dynamic content '<my-current-time></my-current-time>
'. A script attempted to inject dynamic content or elements previously modified dynamically that might be unsafe. For example, using the innerHTML property to add script or malformed HTML will generate this exception. Use the toStaticHTML method to filter dynamic content or explicitly create elements and attributes with a method such as createElement. For more information, see http://go.microsoft.com/fwlink/?LinkID=247104.
File: index.html 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-06T07:45:17.793

这是窗口商店应用程序的安全性。您可以使用以下[脚本](https://github.com/MSOpenTech/winstore-jscompat)修复它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-07T10:53:50.183

我已经在 github 上使用这个插件[cordova-plugin-winstore-jscompat解决了。](https://github.com/vjrantal/cordova-plugin-winstore-jscompat)通过 Microsoft Visual Studio，打开 config.xml，转到插件，自定义，选择 git，然后粘贴此 url`[https://github.com/vjrantal/cordova-plugin-winstore-jscompat.git](https://github.com/vjrantal/cordova-plugin-winstore-jscompat.git)`或使用 linux/unix 运行命令`cordova plugin add (git url above)`

# cuda - GPU上的填充数组

> ID：15792718
> 
> 赞同：0
> 
> 时间：2013-04-03T16:20:20.250
> 
> 标签：cuda

我想在 GPU 上填充我的数组。为了做到这一点，我编写了 generateVector 函数

```
int rand_from_0_to_100_gen(void) {
    return rand() % 100;
}

__device__ void generateVector(int * hData,int count) {

    for (int i = 0; i < count; i++) {
        hData[i] = rand_from_0_to_100_gen();
    }
} 
```

在 main 我为数组 A 动态分配内存

```
int *A = NULL;
err = cudaMalloc((void **) &A, numOfData);

generateVector(A,numOfData); 
```

但是函数给出的错误是：不允许从**设备**调用**主机**函数。为什么？我得到这个错误是什么？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:29:59.327

你至少有3个问题：

1.  `__device__`表示可从 GPU 代码而非主机代码调用的函数。但是你是`generateVector()`从主人那里打电话来的。您可以通过删除`__device__`装饰器来解决此问题。
2.  您正在使用`numOfData`作为要分配的数据的大小。但所需的大小参数以*字节*为单位。根据您`numOfData`在调用中的使用`generateVector()`，您应该使用类似`sizeof(int)*numOfData`分配大小的东西。
3.  您正在传递给`generateVector()`指针`A`，但`A`它是一个指向设备内存的指针。您不能直接在主机代码中使用这些指针（除了作为 API 函数的参数，如 cudaMalloc 和 cudaMemcpy）。相反，您需要执行以下操作：

    ```
    int *A = NULL;
    int *h_A = NULL;
    h_A = (int *)malloc(numOfData*sizeof(int));
    generateVector(h_A, numOfData);
    cudaMemcpy(A, h_A, numOfData*sizeof(int), cudaMemcpyHostToDevice); 
    ```

[您可能想在此处](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#function-type-qualifiers)阅读有关如何指示主机和设备功能的更多信息。

如果您确实想`generateVector()`从设备代码（程序中的其他位置）使用，那么您将遇到一个额外的问题，即无法从设备代码调用`rand()`函数 from 。`stdlib.h`但是，这似乎不是您的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:35:35.877

您的 generateVector 函数被标记为*设备*函数，但它调用 rand_from_0_to_100_gen() 调用 rand()，而后者未标记为设备函数。GPU 函数只能调用驻留在 GPU 上的代码，而不能调用主机上的代码。

我的猜测是这就是您的错误消息“不允许从设备函数调用主机函数”所指的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:48:40.937

这是执行您打算执行的操作的代码，即使它可能不是最佳的：

```
// Compiled using nvcc main.cu -arch=sm_21 -o main && ./main
// See document http://www.cs.cmu.edu/afs/cs/academic/class/15668-s11/www/cuda-doc/CURAND_Library.pdf
// And http://aresio.blogspot.fr/2011/05/cuda-random-numbers-inside-kernels.html
#include <stdio.h>
#include <cuda.h>
#include <curand_kernel.h>
#include <curand.h>

#define cuda_DBG(x) if(x!=cudaSuccess) {\
        printf("error at %s:%u\n", __FILE__, __LINE__);\
        return -1;\
        }

__global__ void setup_kernel(curandState *state, unsigned long seed ) {
    int id = threadIdx.x;
    curand_init( seed, id, 0, &state[id] );
} 

__global__ void generateVector(int *hData, curandState *globalState) {
    size_t i = blockIdx.x;
    float RANDOM = 100*curand_uniform( &globalState[i] );
    hData[i] = (int)RANDOM;
    if(i==50) printf("hData[50]=%u (RANDOM=%f)\n", hData[i], RANDOM);
}

int main() {
    int *A = NULL, numOfData=1000;
    curandState *devState;
    cuda_DBG(cudaMalloc((void **) &A, sizeof(int)*numOfData));
    cuda_DBG(cudaMalloc((void **) &devState, sizeof(devState)*numOfData));

    setup_kernel<<<numOfData, 1>>>(devState, time(NULL));
    generateVector<<<numOfData, 1>>>(A, devState);

    cuda_DBG(cudaFree(A));
    cuda_DBG(cudaFree(devState));
} 
```**

# java - 如何使用 JFileChooser 保存/加载 ArrayList 数组？

> ID：15792720
> 
> 赞同：0
> 
> 时间：2013-04-03T16:20:24.820
> 
> 标签：java, arrays, file, arraylist, jfilechooser

我有以下代码：

```
ArrayList<String> [] hotelArray = (ArrayList<String>[ ]) new ArrayList[5];
for (int i = 0; i < 5; i++) {
    hotelArray[i] = new ArrayList<String>();
}

hotelArray[0].add("NY hotel1");
hotelArray[0].add("NY hotel2");
hotelArray[0].add("NY hotel3");
hotelArray[2].add("Japan Hotel");
    hotelArray[2].add("Japan Hotel2");
hotelArray[3].add("Nova Hotel");
hotelArray[4].add("Tokyo hotel"); 
```

现在我想知道，如何使用 JFileChooser 将hotelArray 保存到单个文件中。另外我如何使用 JFileChooser 读取文件？当我阅读时，我可以限制只阅读 hotelArray[0] 元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:26:49.353

一开始，JFileChooser 只选择一个文件名并给你文件名后面的文件。您首先需要的是一种编写文件的方法（只需在代码中记下文件名，然后再更改该部分）。阅读有关如何[将一些文本写入文件的](http://www.roseindia.net/java/beginners/java-write-to-file.shtml)这一页教程。这里有一些简单的代码，它向您展示了如何逐行[读取文件。](http://www.javaprogrammingforums.com/file-input-output-tutorials/23-how-read-file-line-line-using-bufferedreader.html)

现在您只需遍历 ArrayList 并将每个列表条目作为新行写入文件。与您可以将其从文件读回 ArrayList 的方式相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:25:23.267

JFileChooser 返回一个 File 对象。然后你可以自由地用它做任何事情。先看[说明书](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:30:45.333

JFileChooser 要么从磁盘中选择要读取的文件，要么选择/创建要写入的文件。

文件格式由你决定。您必须将 Java 对象转换为可以写入磁盘和从磁盘读取的字节。

有些人会说序列化 Java 对象。然而，这是一种不灵活的方法。如果您在 Java 对象中添加或删除任何字段，您的序列化会发生变化。

您可以将 Java 对象写入 Java[属性](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)文件。如果要写入磁盘的数据量有限，这是一个不错的选择。

您可以用 XML 编写 Java 对象。如果您想与 Java 对象保持层次关系，这是一个不错的选择。

您可以将 Java 对象写入[SQLite](http://www.sqlite.org/)等关系数据库。如果您有许多关系 Java 对象，这是一个不错的选择。

# html - 无法使用 nth-child 将标签中的 li 隔开

> ID：15792721
> 
> 赞同：0
> 
> 时间：2013-04-03T16:20:23.647
> 
> 标签：html, css, margin, spacing, css-selectors

**[http://codepen.io/leongaban/pen/uJDIw](http://codepen.io/leongaban/pen/uJDIw)**

* * *

嗨，所以在上面的**codepen**中，我试图将顶行的按钮与底行的按钮隔开。

在添加 a 标签之前，我可以让我的间距使用：

```
.profile-crop-buttons ul li:nth-child(2) {
    margin: 0 20px 0 20px;
} 
```

然而，既然我已经添加了 a 标签，我还没有找到正确的语法来定位第二个孩子并给它左右边距。

所有提示表示赞赏！谢谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:23:45.720

好吧，您不能将 a`<a>`作为 a 的直接子代，`<ul>`或者`<ol>`只有 a`<li>`是有效的，因此您想切换周围的顺序。

`.profile-crop-buttons ul li:nth-child(2)`不起作用，因为如上所述`<li>`is 不是 is 的`<ul>`子`<a>`级（第 nth-child 伪类只选择给定元素的子级而不是以后的后代），但是一旦您交换选择器周围的顺序，将按预期工作.

[**例子**](http://codepen.io/anon/pen/ewFyn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:50:49.910

您仍然必须为`li`元素而不是`a`标签留出边距。

在你的 CSS 中，改变

```
.profile-crop-buttons ul li a:nth-child(2) {
    margin: 0 20px 0 20px;
} 
```

到

```
.profile-crop-buttons ul li:nth-child(2) {
    margin: 0 20px 0 20px;
} 
```

那应该行得通。:)

# excel - 接下来没有错误

> ID：15792724
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:20:31.117
> 
> 标签：excel, vba

我试着做“下一个单元”，但没有骰子。我正在尝试从 G2 开始向下列，并将结果转储到不同的工作表中。

```
For Each cell In Range("G2").End(xlDown)
    If cell.Value = "New York" Then
    ActiveCell.Offset(0, -2).Select
    ReDim partnerArray(0 To i)
        partnerArray(i) = ActiveCell.Offset(0, -2).Value

 Next
ActiveWorkbook.Worksheets ("By Resource Level")
    Range("A1").Value = partnerArray 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:16:24.587

End(xlDown) 转到范围中的最后一个单元格，就好像您正在单击一样`ctrl down`，因此您只会在代码中选择一个值。

关于 partnerArray 给出不匹配错误，这是因为您试图将一组数据放入一个单元格而不是指定下标，即`partnerArray(0)`

如果您想要所有结果，则需要遍历数组并将每个结果输入到不同的单元格中。我将很快向您展示代码示例

编辑：

```
For Each cell In Range("G2:G10").Cells
    If cell.Value = "New York" Then
        ReDim Preserve partnerArray(i)
        cell.Select
        partnerArray(i) = ActiveCell.Offset(0, -2).Value
        i = i + 1
    End If
Next

On Error Resume Next

For i = LBound(partnerArray) To UBound(partnerArray)
    ActiveWorkbook.Worksheets("By Resource Level").Cells(i + 1, 1).Value = partnerArray(i)
Next i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:28:23.037

`End If`你在你之前错过了一个`Next`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:22:45.553

编译器有时会显示不是错误真正来源的错误消息。在这种情况下，您没有关闭 If 语句：

```
For Each cell In Range("G2").End(xlDown)
    If cell.Value = "New York" Then
        ActiveCell.Offset(0, -2).Select
        ReDim partnerArray(0 To i)
        partnerArray(i) = ActiveCell.Offset(0, -2).Value
    Endif

 Next
ActiveWorkbook.Worksheets ("By Resource Level")
    Range("A1").Value = partnerArray 
```

# ruby - rails server 不启动任何服务器

> ID：15792725
> 
> 赞同：0
> 
> 时间：2013-04-03T16:20:42.160
> 
> 标签：ruby, ruby-on-rails-3.2

我是一个完整的 Ruby on Rails 新手，遵循[railstutorial.org](http://www.railstutorial.org) 我刚刚安装了 rails 3.2.13，使用`rails new`.

但是我无法使用以下命令启动服务器：

```
rails server 
```

它返回`rails`下面的命令帮助消息（而不是 WEBrick 信息），其中根本没有提到该`server`命令。那么如何启动服务器呢？谢谢

```
Usage:
rails new APP_PATH [options]
Options:
-r, [--ruby=PATH]              # Path to the Ruby binary of your choice
                             # Default: /Users/nathanzylbersztejn/.rvm/rubies/ruby-2.0.0-p0/bin/ruby
-b, [--builder=BUILDER]        # Path to a application builder (can be a filesystem path or URL)
-m, [--template=TEMPLATE]      # Path to an application template (can be a filesystem path or URL)
  [--skip-gemfile]           # Don't create a Gemfile
  [--skip-bundle]            # Don't run bundle install
-G, [--skip-git]               # Skip Git ignores and keeps
-O, [--skip-active-record]     # Skip Active Record files
-S, [--skip-sprockets]         # Skip Sprockets files
-d, [--database=DATABASE]      # Preconfigure for selected database (options: mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc)
                             # Default: sqlite3
-j, [--javascript=JAVASCRIPT]  # Preconfigure for selected JavaScript library
                             # Default: jquery
-J, [--skip-javascript]        # Skip JavaScript files
  [--dev]                    # Setup the application with Gemfile pointing to your Rails checkout
  [--edge]                   # Setup the application with Gemfile pointing to Rails repository
-T, [--skip-test-unit]         # Skip Test::Unit files
  [--old-style-hash]         # Force using old style hash (:foo => 'bar') on Ruby >= 1.9

Runtime options:
-f, [--force]    # Overwrite files that already exist
-p, [--pretend]  # Run but do not make any changes
-q, [--quiet]    # Suppress status output
-s, [--skip]     # Skip files that already exist

 Rails options:
-h, [--help]     # Show this help message and quit
-v, [--version]  # Show Rails version number and quit

Description:
  The 'rails new' command creates a new Rails application with a default
  directory structure and configuration at the path you specify.

  You can specify extra command-line arguments to be used every time
  'rails new' runs in the .railsrc configuration file in your home directory.

Note that the arguments specified in the .railsrc file don't affect the
defaults values shown above in this help message. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:18:49.420

您是否尝试过以下操作：

```
./script/rails s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T17:08:09.350

它类似于这个问题[链接](https://stackoverflow.com/questions/27445088/cant-start-rails/27445881#)。你可以参考这个来清楚地解释你的问题。

[关联](https://stackoverflow.com/a/27445881/3423992)

# c# - 错误：父类不包含采用 0 个参数的构造函数

> ID：15792726
> 
> 赞同：1
> 
> 时间：2013-04-03T16:20:44.273
> 
> 标签：c#

最初我收到一个错误，我无法在咖啡类“Coffee”中命名“_coffee”，因为成员名称不能与其封闭类型相同。当我将名称更改为 _coffee 时，我收到“coffeeShop 不包含采用 0 个参数的构造函数”的错误消息。我在网上找到了解决方案，但它们似乎不适用于我的应用程序或无法正常工作。请帮忙。

```
public class coffeeShop
{
    string _size;
    string _type;
    public coffeeShop(string size, string type)
    {
        _size = size;
        _type = type;
                }
    public override string ToString()
    {
        return String.Format("Thanks for ordering: {0}, {1}", _size, _type);
    }
}
class Coffee : coffeeShop
{
    string _size;
    string _type;
    string _caffiene;
    public virtual void _Coffee( string size, string type, string caffiene)
{
    _caffiene = caffiene;
    _size = size;
    _type = type;
}
    public override string ToString()
    {
        return String.Format("Product Information for: {0} {1} {3}", _size, _type, _caffiene);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:23:08.587

如果您的类型中未定义构造函数，C# 编译器会发出默认（无参数）构造函数。这就是它试图为您的 Coffee 类做的事情（默认情况下是在基类中寻找要调用的无参数构造函数），但是您的基类 (coffeeShop) 只定义了一个接受 2 个参数的构造函数。

因此，任何子类都需要通过`base`关键字显式调用此构造函数：

```
public Coffee(string size, string type, string caffiene) : base(size, type)
{
  _caffiene = caffiene;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:22:40.650

改变

```
public virtual void _Coffee( string size, string type, string caffiene)
{
    _caffiene = caffiene;
    _size = size;
    _type = type;
} 
```

到

```
public Coffee(string size, string type, string caffiene)
   : base(size, type)
{
    _caffiene = caffiene;
    _size = size;
    _type = type;
} 
```

或者添加

```
public coffeeShop()
{
} 
```

这将在基类中定义一个无参数的构造函数

请注意，您正在重新声明大小和类型，将构造函数更改为

```
public Coffee(string size, string type, string caffiene)
   : base(size, type)
{
    _caffiene = caffiene;
} 
```

从类中删除`_size`and并将它们声明为基类 ( )`_type``Coffee``protected``coffeeShop`

# php - 根据 URL 更改内容

> ID：15792736
> 
> 赞同：0
> 
> 时间：2013-04-03T16:21:12.433
> 
> 标签：php, javascript, html, url

我希望能够根据我网站的 url 更改我的页面的特定 html 值。例如，如果我想将值更改为“示例”，我会转到 mysite.com/page.php?value=example

我是否可以这样做而不必在 php 包含脚本中设置每个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:24:19.893

在您的`php`页面上，更改以下内容：

```
<p>This is sample text and the word example.</p> 
```

对此：

```
<p>This is sample text and the word <?php echo $_GET['value']; ?></p> 
```

这会将 URL 中出现的任何值打印`?value=`到页面上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:25:11.437

您可以在您的 jQuery 代码中应用类似的内容来检查给定 URL 中的页面名称，然后更改该页面上特定部分的值！不需要PHP，这都是前端逻辑。

```
var urlspot = document.URL.split('/');
if((urlspot[3] == 'pagename')) { 
  $('#content').text('now i want to change my text on this page');
} 
```

只需根据 URL 中的位置将 urlspot[x] 更改为适当的数字。它不一定是 3。它可以是 1、2、3、...、4 等等……你必须玩它。

# c# - 创建/生成 XLIFF（或简单的 xml）的最佳方式

> ID：15792738
> 
> 赞同：1
> 
> 时间：2013-04-03T16:21:18.017
> 
> 标签：c#, .net, xml, xliff

只是好奇，在 C# 和 .NET 4.5 中创建/生成 XLIFF（甚至只是 xml）文件（在我的情况下来自 Excel 数据）的最佳实践是什么？有几个选项可用，但我想知道（最好讨论）哪一个在效率方面更可取。

*   xml文档
*   XmlWriter & XmlSerializer
*   XDocument
*   XmlTextWriter
*   很快

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:24:04.123

如果您不需要在内存中使用文档`XmlWriter`（[而不是 XmlTextWriter](http://blogs.msdn.com/b/xmlteam/archive/2011/10/08/the-world-has-moved-on-have-you-xml-apis-you-should-avoid-using.aspx)）如果您希望能够在加载后修改文档使用`XDocument`（Linq to Xml）

您可能还想看看我前段时间写的比较不同 Xml API 的帖子：http: [//blogs.msdn.com/b/xmlteam/archive/2011/09/14/effective-xml-part-1 -选择正确的 api.aspx](http://blogs.msdn.com/b/xmlteam/archive/2011/09/14/effective-xml-part-1-choose-the-right-api.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:31:03.993

XmlWriter 可能是最快的，但这就像你可以用 C# 编写程序集一样。我会远离可读性。

我不喜欢 XmlTextWriter，在我看来你还不如坚持使用 XmlWriter。

XmlDocument 有很多开销。对于您可能想做的任何事情来说，它都太慢了。

我不信任也不喜欢 XmlSerializer。在我看来，它总是很脆弱。未来的开发人员可能会通过更改一些类定义而不知不觉地搞砸了。

XDocument 非常好。我之前尝试过针对 XDocument 对 XmlReader/XmlWriter 进行速度测试，两者的性能通常非常接近，以至于我几乎在所有情况下都推荐 XDocument。我说几乎是因为 XmlReader/XmlWriter 在技术上仍然是我发现的读取/写入 xml 的最快方法。

# javascript - 从 HTTP POST 返回文件

> ID：15792741
> 
> 赞同：0
> 
> 时间：2013-04-03T16:21:22.010
> 
> 标签：javascript, jquery, ajax, jsp, post

我正在尝试找到一种方法来返回基于用户输入动态生成的文件。用户选择表中的行，其中每行是一个文件，然后按下下载链接。服务器 (JSP) 从数据库中检索文件并将它们压缩成一个文件，然后将其发送回浏览器进行下载。

我已经设法通过一个`<a href="?action=testDownload"></a>`返回文件的简单链接来完成这项工作，但每一行都有大约 450 个字符的键来识别它。其中超过 4 个将打破我的客户将使用的 IE8 的 2083 个字符 URL 限制。

我知道我不能用 Ajax 做到这一点，因为 javascript 无法访问本地文件系统，而且我不希望重新加载整个页面。还有哪些其他选择？

我可以创建一个不重新加载整个页面并且还返回文件的 HTTP 帖子吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:38:41.680

你可以创建一个 iframe，插入一个表单并通过 JavaScript 提交这个表单。

以下示例取自[Create an <iframe> element and append html content to it with jQuery](https://stackoverflow.com/questions/4119979/create-an-iframe-element-and-append-html-content-to-it-with-jquery)

```
$('<iframe id="someId"/>').appendTo('#someDiv')
                          .contents().find('body').append(html); 
```

其中“html”将是您表单的 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:26:22.487

您可以在单击下载按钮时创建一个 javascript 函数，该按钮查看所有选定的行并将其发布到执行后端工作的 jsp。

# mysql - 如何加入表格并根据日期差异获得结果，每次匹配限制为 1 个？

> ID：15792745
> 
> 赞同：1
> 
> 时间：2013-04-03T16:21:30.813
> 
> 标签：mysql, date, join, limit

我整天都在四处寻找和研究这个，但就是想不通。

我有一个表`trades`，这个查询涉及表上的 3 列：`provider_id`, `trade_id`, `date_close`.

对于当天（指定提供商）的每一笔最终交易，我想获得前两天或更早结束的交易......并且是当天的最终收盘交易。例如，从此：

```
+-------------+----------+---------------------+
| provider_id | trade_id | date_close          |
+-------------+----------+---------------------+
|      126    |        1 | 2012-10-22 14:26:57 |
|      126    |        2 | 2012-10-22 14:31:59 |
|      126    |        3 | 2012-10-23 12:39:41 |
|      126    |        4 | 2012-10-24 07:29:57 |
|      126    |        5 | 2012-10-24 08:36:19 |
|      126    |        6 | 2012-10-24 08:47:23 |
|      126    |        7 | 2012-10-25 08:30:11 |
|      126    |        8 | 2012-10-25 08:34:21 |
|      126    |        9 | 2012-10-26 08:43:12 |
|      126    |       10 | 2012-10-26 14:29:35 |
+-------------+----------+---------------------+ 
```

期望的输出是这样的：

```
+-----------+---------------------+-----------+---------------------+
| atrade_id | adate_close         | btrade_id | bdate_close         |
+-----------+---------------------+-----------+---------------------+
|         6 | 2012-10-24 08:47:23 |         2 | 2012-10-22 14:31:59 |
|         8 | 2012-10-25 08:34:21 |         3 | 2012-10-23 12:39:41 |
|        10 | 2012-10-26 14:29:35 |         6 | 2012-10-24 08:47:23 |
+-----------+---------------------+-----------+---------------------+ 
```

这是我到目前为止创建的查询：

```
SELECT a.trade_id atrade_id, MAX(a.date_close) adate_close, b.trade_id btrade_id, MAX(b.date_close) bdate_close
FROM trades a
INNER JOIN trades b ON a.provider_id = b.provider_id
WHERE TIMESTAMPDIFF(DAY, DATE_FORMAT(b.date_close, "%Y-%m-%d"), DATE_FORMAT(a.date_close, "%Y-%m-%d")) >= 2
AND a.provider_id = 126
GROUP BY DATE_FORMAT(a.date_close, "%Y-%m-%d") 
```

我想`LIMIT 1 DESC`在`date_close`列上设置一个，以便只获得那些日子的最终收盘交易。但无法弄清楚如何做到这一点，所以我正在使用`MAX()`. 我猜一定有更好的方法。此外，虽然上面的查询让我很接近，但它在所有结果中都将 btrade_id 返回为 1，并且 atrade_id 值也关闭了：

```
+-----------+---------------------+-----------+---------------------+
| atrade_id | adate_close         | btrade_id | bdate_close         |
+-----------+---------------------+-----------+---------------------+
|         4 | 2012-10-24 08:47:23 |         1 | 2012-10-22 14:31:59 |
|         7 | 2012-10-25 08:34:21 |         1 | 2012-10-23 12:39:41 |
|         9 | 2012-10-26 14:29:35 |         1 | 2012-10-24 08:47:23 |
+-----------+---------------------+-----------+---------------------+ 
```

关于我做错了什么的任何建议，或者我可以解决这个问题的更好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:26:27.543

我建议使用以下查询来提供所需的输出。它使用两个嵌套子查询来选择适当的平仓交易：

```
SELECT  PREV_CLOSE.atrade_id atrade_id,
        PREV_CLOSE.adate_close atrade_close,
        B2.trade_id btrade_id,
        B2.date_close bdate_close
FROM (
    SELECT  FINAL_CLOSE.provider_id,
            A.trade_id atrade_id, 
            A.date_close adate_close,
            MAX(B.date_close) prev_date_close
    FROM (
        SELECT  provider_id, MAX(date_close) final_date_close
        FROM    trades
        GROUP BY provider_id, DATE(date_close)
    ) FINAL_CLOSE
    JOIN        trades A ON A.provider_id = FINAL_CLOSE.provider_id AND A.date_close = FINAL_CLOSE.final_date_close
    LEFT JOIN   trades B ON B.provider_id = FINAL_CLOSE.provider_id AND B.date_close < DATE(FINAL_CLOSE.final_date_close) - INTERVAL 1 DAY
    GROUP BY FINAL_CLOSE.provider_id, A.trade_id
) PREV_CLOSE
JOIN    trades B2 ON B2.provider_id = PREV_CLOSE.provider_id AND B2.date_close = PREV_CLOSE.prev_date_close 
```

因为我假设你的交易表可能很大，所以你肯定想创建一个索引`provider_id`，`date_close`如下所示：

```
ALTER TABLE `trades` ADD INDEX ( `provider_id` , `date_close` ); 
```

否则，一旦您的交易表增长到数十甚至数十万条记录，您的查询就不太可能终止。

# ruby - 无法在运行 rails 3.2.11 的 Ruby 2 中加载此类文件 - sqlite3/sqlite3_native (LoadError)

> ID：15792749
> 
> 赞同：1
> 
> 时间：2013-04-03T16:21:39.443
> 
> 标签：ruby, ruby-on-rails-3, sqlite

尝试运行时出现上述错误`rails s`。

`bundle show sqlite3`生产

`c:/ruby/lib/ruby/gems/2.0.0/gems/sqlite3-1.3.7-x86-mingw32`（这意味着，*gasp*，我在 Windows XP 机器上运行它。）

我也有：

```
group :development, :test do
  ...
  gem 'sqlite3'
  ...
end 
```

我还没有找到与此类似（环境方面）的任何其他答案。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T10:24:40.763

我有同样的问题，很难解决。[Luis Lavena](https://groups.google.com/forum/?fromgroups#!topic/rubyinstaller/gedIaMryCFQ)的这些页面 背包 sqlite 安装程序 和这个 [https://github.com/luislavena/sqlite3-ruby/issues/82帮助了我](https://github.com/luislavena/sqlite3-ruby/issues/82)

第一页几乎没问题，除了我有这个错误：

```
checking for sqlite3_libversion_number() in -lsqlite3... no 
```

给我解决方案的第二个链接；代替

```
c:\sqlite3x86>gem install sqlite3 --platform=ruby --  --with-sqlite3-dir=C:/sqlite3x86 
```

我不得不打字

```
c:\sqlite3x86>gem install sqlite3 --platform=ruby --  --with-sqlite3-lib=C:/sqlite3x86/lib --with-sqlite3-include=C:/sqlite3x86/include 
```

正如您可能已经猜到的那样，我将 Luis Lavena 构建的背包 sqlite3 放在一个名为 sqlite3x86 的目录中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T05:29:41.537

有同样的问题。这不会直接回答您的问题，但我通过简单地使用[http://railsinstaller.org/](http://railsinstaller.org/)安装整个集合来解决它，并且一切正常

以下是 railsinstaller 安装的所有软件包：

*   红宝石 1.9.3-p392
*   导轨 3.2
*   捆绑器
*   吉特
*   方镁石
*   小TDS
*   SQL 服务器
*   支持
*   开发套件

# css - 阻止 div 重叠

> ID：15792751
> 
> 赞同：5
> 
> 时间：2013-04-03T16:21:42.067
> 
> 标签：css

我有一个由 div 包裹的连续三个图像。`div`链接位于第一个 div 下方的单独位置。

[http://jsfiddle.net/sGmjU/1/](http://jsfiddle.net/sGmjU/1/)

我遇到的问题是，当浏览器足够宽时，图像应该在链接上方的水平行中。

当宽度小于三个图像时，尽管链接保持在原来的位置，并且图像显示在链接上方和通过链接的列中。

我希望图像保持连续并让链接保持在图像下方。

核心概念是什么？我已经尝试了几件事，但没有运气。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T16:27:32.127

从#images 中取出硬高度值：

```
#images {
    width:50%;
    margin:auto;
    display:block;
    vertical-align:middle;
} 
```

高度值迫使 div 内的图像溢出，随后溢出到链接 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:35:14.713

明确：两者；到图像 div 并删除如下所示的宽度

```
#images {

margin:auto;
display:block;
vertical-align:middle;
clear: both;

} 
```

# java - Java 类返回空值

> ID：15792755
> 
> 赞同：0
> 
> 时间：2013-04-03T16:21:58.663
> 
> 标签：java, mysql, netbeans

美好的一天人们。我有一个关于java类的问题。我创建了一个用于在数据库（MySQL）上执行查询的 java 类，但它总是返回**null**值而不是**STRING**这是代码：

类文件：sql.java

```
public class sql {
Connection conn;
Statement stmt;
ResultSet rs;
String sql;
String result;

public String test(String username){
    try{
        stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
        sql = "SELECT * from user_account where username='"+username+"'";
        rs = stmt.executeQuery(sql);
        rs.next();

        result = rs.getString("username");

        return result;
    }
    catch(Exception e){
        return e.getMessage();
    }
} 
```

}

主文件：

```
public class MainFrame extends javax.swing.JFrame {
    String result;

    public MainFrame() {

      dbConnect connect = new dbConnect();
      connection = connect.connect();
      conn = (Connection) connection[0];
      rs = (ResultSet) connection[1];

      sql query_result = new sql();
      result = query_result.test("test");
      System.out.println(result);
}..... 
```

在此先感谢 PS 如果我使用主文件中的类，代码可以工作。我正在使用netbeans。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:27:21.557

```
if(rs.next())
{
   result = rs.getString("username");
System.out.println(result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:05:27.560

我刚刚想通了。我在类中添加了“Connection conn，Resultset rs”作为参数。

# robocopy - robocopy /save 和 /job 选项

> ID：15792757
> 
> 赞同：2
> 
> 时间：2013-04-03T16:22:00.247
> 
> 标签：robocopy

我无法让 robocopy 的 /save 和 /job 选项正常工作。实际上 /save 选项似乎有效：

```
robocopy c:\temp c:\tmp *.out /save:c:\tmp\rob1 /L
-------------------------------------------------------------------------------
   ROBOCOPY     ::     Robust File Copy for Windows     ::     Version XP010
-------------------------------------------------------------------------------
  Started : Wed Apr 03 11:36:48 2013
   Source : c:\temp\
     Dest : c:\tmp\
    Files : *.out

  Options : /L /COPY:DAT /R:1000000 /W:30
------------------------------------------------------------------------------
                       1    c:\temp\
      *EXTRA File              188    cd.out
      *EXTRA File            23126    dmidecode.out
      *EXTRA File             3102    foo.out
------------------------------------------------------------------------------
                Total    Copied   Skipped  Mismatch    FAILED    Extras
     Dirs :         1         0         1         0         0         0
    Files :         1         0         1         0         0         3
    Bytes :     1.0 k         0     1.0 k         0         0    25.7 k
    Times :   0:00:00   0:00:00                       0:00:00   0:00:00
    Ended : Wed Apr 03 11:36:48 2013 
```

但是，当我尝试使用刚刚生成的作业文件时，出现错误：

```
robocopy c:\temp c:\tmp *.out /job:c:\tmp\rob1 /L
Job File : C:\TMP\ROB1.RCJ
ERROR : Invalid Job File, Line #11 :"/SD:c:\temp\"
-------------------------------------------------------------------------------
   ROBOCOPY     ::     Robust File Copy for Windows     ::     Version XP010
-------------------------------------------------------------------------------
  Started : Wed Apr 03 11:37:08 2013
   Source - c:\temp\
     Dest - c:\tmp\
    Files : *.out

  Options : /JOB /COPY:DAT /R:1000000 /W:30
------------------------------------------------------------------------------
ERROR : Invalid Parameter #4 : "/job:c:\tmp\rob1"
       Simple Usage :: ROBOCOPY source destination /MIR
             source :: Source Directory (drive:\path or \\server\share\path).
        destination :: Destination Dir  (drive:\path or \\server\share\path).
               /MIR :: Mirror a complete directory tree.
    For more usage information run ROBOCOPY /? or read Robocopy.Doc.
NOTE: Read "True Replication" in Robocopy.Doc prior to first use of /MIR !
****  /MIR can DELETE files as well as copy them ! 
```

为什么 robocopy 不能使用它刚刚创建的作业文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-27T10:56:15.793

您必须避免它`robocopy jobfile`位于网络共享上。

请注意作业的文件名和文件结尾。

命令行应该是：

```
robocopy /JOB:"driveletter:\-yourjobname-.rcj" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:09:06.230

当您在命令行和 .rcj 文件中指定源/目标时，可能会发生 /job 的“无效参数”。

# ember.js - 多级 hasMany 侧载

> ID：15792759
> 
> 赞同：0
> 
> 时间：2013-04-03T16:22:02.977
> 
> 标签：ember.js, ember-data, active-model-serializers

我用来`ActiveModel::Serializers`将 JSON 输出到 Ember.js 应用程序。我使用侧载来最大化性能。

我可以告诉`ActiveModel::Serializers`侧载所有`PhoneNumbers`的`SwitchboardSerializer`吗？

**switchboard_serializer.rb**

```
class SwitchboardSerializer < ActiveModel::Serializer
  embed :ids, :include => true

  attributes :id, :name
  has_many :switchboard_entries
  has_many :sip_accounts, :through => :switchboard_entries
end 
```

**sip_account_serializer.rb**

```
class SipAccountSerializer < ActiveModel::Serializer
  embed :ids, :include => true

  attributes :id, :auth_name, :caller_name, :sip_accountable_id
  has_many :phone_numbers
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:41:03.523

通过添加`has_many :phone_numbers, :through => :sip_accounts`到`app/models/switchboard.rb`我能够使用`has_many :phone_numbers`in `switchboard_serializer.rb`。:-)

# java - Poisson MLE 的规范化数据

> ID：15792768
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:22:36.307
> 
> 标签：java, poisson

我正在尝试通过 MLE 查找数据集的 lambda 参数。这似乎很容易，如此处所述[http://en.wikipedia.org/wiki/Poisson_distribution](http://en.wikipedia.org/wiki/Poisson_distribution)

我的问题是我正在尝试拟合与这些示例使用的低 k 值不容易对应的数据。具体来说，我的数据是我希望拟合泊松分布的项目成本估算分布（通常为数千）。

问题：如何“规范化”或“缩放”我的数据，以便可以估计 Lambda 参数，我希望它在 3-5 左右？

我希望我没有完全放弃这个问题，应该是可能的，不是吗？

感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:56:55.560

由于您只有一个要拟合的参数，我建议在 lambda 参数网格上计算似然度，并通过将结果导入 Excel 或 Matlab 来查看似然度与 Lambda 的关系图。如果计算一个可能性很快，您可以轻松获得 1000 个值，例如从 lambda = 0.01 到 lambda = 10，步长为 0.01。查看图表，然后您可以通过检查计算出最大值。如果有一些奇怪的东西（例如数据根本不适合泊松），那么你会在该图中出现一些不寻常的东西，然后你需要决定下一步。

# java - 插入多行 - java 准备好的语句失败

> ID：15792782
> 
> 赞同：0
> 
> 时间：2013-04-03T16:23:03.683
> 
> 标签：java, javascript, mysql, rhino

--已解决--原来是我们的 Shareplow 安装存在问题--感谢大家的尝试--

根据 Java 中 MySQL 插入语句的性能的答案[：批处理模式准备语句与具有多个值的单个插入](https://stackoverflow.com/questions/11389449/performance-of-mysql-insert-statements-in-java-batch-mode-prepared-statements-v)我正在尝试使用批量插入准备语句。问题是，只有第一行被插入。

我的相关代码

```
var sql2 = 'INSERT INTO ' + memtable2 + ' (' + locNameCol2 + ', ' + sectTypeCol + ', '
+ sectPathCol + ') VALUES ';
var cntr = 0;

for (var key in polyObj)//pass sub section paths in an object.
{
  if(cntr){
    sql2 += ',';
  }
  sql2 += '(?,?,?)';
  cntr = 1;
}

var s2 = con2.prepareStatement(sql2);
cntr = 0;
for (var key in polyObj)
{
  indxOffset = 3*cntr;
  s2.setString(indxOffset+1 , fieldNameVal);
  s2.setString(indxOffset+2 , 'Poly');
  s2.setString(indxOffset+3 , polyObj[key]);
  rval += 'index offset ' + indxOffset;
  cntr++;
}
s2.execute(); 
```

第一行插入正常，但没有插入后续行。当我转储 sql2 字符串时，我看到它正在正确构建（我认为）polyObj 中的属性数量。因此，如果 polyObj 有 3 个属性，则 sql 将是： `Insert into table (col1, col2, col3) values (?,?,?),(?,?,?),(?,?,?)` 我的数据库上是否有一些设置会阻止多行插入？我只是做错了什么吗？完全被难住了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:28:57.673

考虑改用带有 executeBatch() 的 PreparedStatement。

```
String sql = "insert into foo (x,y,z) values (?,?,?)
PreparedStatement ps = connection.prepareStatement(sql);
ps.setObject(1, "a1");
ps.setObject(2, "b1");
ps.setObject(3, "c1");
ps.addBatch();
ps.setObject(1, "a2");
ps.setObject(2, "b2");
ps.setObject(3, "c2");
ps.addBatch();
ps.setObject(1, "a3");
ps.setObject(2, "b3");
ps.setObject(3, "c3");
ps.addBatch();
ps.executeBatch(); 
```

# hudson - 在 Hudson 中，当看到 TestNG 结果时，有没有办法显示运行测试方法的参数？

> ID：15792787
> 
> 赞同：0
> 
> 时间：2013-04-03T16:23:16.513
> 
> 标签：hudson, testng, maven-surefire-plugin

我能够看到运行的测试，但我试图显示使用 testNG @Parameters 注释时传递给它们的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:28:10.800

如果我没有完全弄错的话，[TestNG 插件](http://wiki.hudson-ci.org/display/HUDSON/testng-plugin)可以做到这一点，甚至更多。

# android - Paypal 移动结帐示例或详细文档

> ID：15792788
> 
> 赞同：0
> 
> 时间：2013-04-03T16:23:16.983
> 
> 标签：android, iphone, paypal, titanium, titanium-mobile

我在网上搜索并尝试了很多东西。但是...我在详细文档或示例中找不到...

也许你有一个链接如何帮助我。贝宝网站上的许多链接都已失效，x.com 上的链接相同（开发人员部分）

我想做什么：

我正在编写一个 iphone 应用程序和一个 android 应用程序。用贝宝付款- 是计划。

我需要一个“webview”，我可以在其中链接到我的网络服务器，并且访问者可以使用 paypal 登录并购买。所以我不需要为每个操作系统开发一种新的方式......

如果有人可以帮助我，我真的很高兴。非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:16:26.057

实际上有一个适用于 iOS 和 Android 的 PayPal 模块，您可以开箱即用。

当您下载它时，它实际上会附带文档和示例。

你可以在这里找到它：[https ://marketplace.appcelerator.com/apps/4978?1935393353](https://marketplace.appcelerator.com/apps/4978?1935393353)

# javascript - 将父子数组转换为树

> ID：15792794
> 
> 赞同：19
> 
> 时间：2013-04-03T16:23:36.943
> 
> 标签：javascript, algorithm

任何人都可以帮助转换以下父子对象列表：

```
[
   {
      “名称”：“根”，
      "_id":"root_id",
   },
   {
      “名称”：“a1”，
      “parentAreaRef”：{
         "id":"root_id",
      },
      "_id":"a1_id",
   },
   {
      “名称”：“a2”，
      “parentAreaRef”：{
         "id":"a1_id",
      },
      "_id":"a2_id",
   },
   {
      “名称”：“a3”，
      “parentAreaRef”：{
         "id":"a2_id",
      },
      "_id":"a3_id",
   },
   {
      “名称”：“b1”，
      “parentAreaRef”：{
         "id":"root_id",
      },
      "_id":"b1_id",
   },
   {
      “名称”：“b2”，
      “parentAreaRef”：{
         "id":"b1_id",
      },
      "_id":"b2_id",
   },
   {
      “名称”：“b3”，
      “parentAreaRef”：{
         "id":"b1_id",
      },
      "_id":"b3_id",
   }
]
```

成显示父子关系的树形结构：

```
[
    {
        “名称”：“根”，
        "_id":"root_id",
        “孩子们”： [
            {
                “名称”：“a1”，
                "_id":"a1_id",
                “孩子们” ： [
                    {
                        “名称”：“a2”，
                        "_id":"a2_id",
                        “孩子们” ： [
                            {
                                “名称”：“a3”
                                "_id":"a3_id"
                            }
                        ]
                    }
                ]
            },
            {
                “名称”：“b1”，
                "_id":"b1_id",
                “孩子们” ： [
                    {
                        “名称”：“b2”
                        "_id":"b2_id"
                    },
                    {
                        “名称”：“b3”
                        "_id":"b3_id"
                    }
                ]
            }
        ]
    }
]

```

（输出结构是一个允许多个根的数组，但如果我们能得到一个处理单个根的解决方案，那就太好了。）

输出树如下所示：

```
根
  |
  --a1
  | |
  |  -  a2
  | |
  | --a3
  |
  -- b1
      |
      -- b2
      -- b3

```

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-03T17:11:39.890

我有一个可行的解决方案。我可以给你提示，只要解决它。好消息是您的数据不包含对节点的任何前向引用。因此，您只需通过数组即可创建树。如果需要注意，您将需要首先通过整个数组来构建 id 到节点的映射。

您的算法将如下所示。

1.  创建一个将 id 映射到节点的映射。这将使查找节点变得容易。
2.  循环遍历节点数组。
3.  对于每个元素。
    1.  在地图中添加一个条目。
    2.  `children`向该节点添加一个属性（一个数组）。
    3.  元素有父元素吗？如果不是，它必须是根，所以将这个元素分配给树的根。
    4.  这个元素有一个父节点，所以查找父节点，然后将这个当前节点添加为父节点的子节点（将其添加到`children`数组中）。

这应该可以帮助您解决问题。如果您对此算法有特定问题，我可以指出问题出在哪里以及如何解决它或发布解决方案并解释我是如何解决它的。

**更新**

我查看了您的解决方案。您实际上不需要递归，您可以使用我上面描述的算法迭代地执行此操作。您还在就地修改结构，这使算法更加复杂。但你在某种程度上是在正确的轨道上。这是我解决它的方法：

```
var idToNodeMap = {}; //Keeps track of nodes using id as key, for fast lookup
var root = null; //Initially set our loop to null

//loop over data
data.forEach(function(datum) {

    //each node will have children, so let's give it a "children" poperty
    datum.children = [];

    //add an entry for this node to the map so that any future children can
    //lookup the parent
    idToNodeMap[datum._id] = datum;

    //Does this node have a parent?
    if(typeof datum.parentAreaRef === "undefined") {
        //Doesn't look like it, so this node is the root of the tree
        root = datum;        
    } else {        
        //This node has a parent, so let's look it up using the id
        parentNode = idToNodeMap[datum.parentAreaRef.id];

        //We don't need this property, so let's delete it.
        delete datum.parentAreaRef;

        //Let's add the current node as a child of the parent node.
        parentNode.children.push(datum);        
    }
}); 
```

现在`root`指向整棵树。

[小提琴](http://jsfiddle.net/hRdEY/1/)。

对于元素数组以任意顺序排列的情况，您必须先初始化`idToNodeMap`。算法的其余部分或多或少保持相同（除了您在地图中存储节点的行；这不是必需的，因为您在第一遍中已经这样做了）：

```
var idToNodeMap = data.reduce(function(map, node) {
    map[node._id] = node;
    return map;
}, {}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-29T18:01:58.470

我知道已经晚了，但我刚刚完成了这个算法，也许它可以帮助其他一些想要解决同样问题的人：[http](http://jsfiddle.net/_akerbeltz_/9dQcn/) [*:*](http://jsfiddle.net/_akerbeltz_/9dQcn/) [//jsfiddle.net/akerbeltz/9dQcn/](http://jsfiddle.net/_akerbeltz_/9dQcn/)

 *它的一个好处是它不需要对原始对象进行任何特殊排序。

如果您需要使其适应您的需要，请更改以下行：

1.  根据您的结构更改 _id 和 parentAreaRef.id。

    `if (String(tree[i]._id) === String(item.parentAreaRef.id)) {`

2.  根据您的结构更改 parentAreaRef。

    `if (tree[idx].parentAreaRef) buildTree(tree, tree.splice(idx, 1)[0])`

希望能帮助到你！

**更新**

根据@Gerfried 评论在此处添加代码：

```
var buildTree = function(tree, item) {
    if (item) { // if item then have parent
        for (var i=0; i<tree.length; i++) { // parses the entire tree in order to find the parent
            if (String(tree[i]._id) === String(item.parentAreaRef.id)) { // bingo!
                tree[i].childs.push(item); // add the child to his parent
                break;
            }
            else buildTree(tree[i].childs, item); // if item doesn't match but tree have childs then parses childs again to find item parent
        }
    }
    else { // if no item then is a root item, multiple root items are supported
        var idx = 0;
        while (idx < tree.length)
            if (tree[idx].parentAreaRef) buildTree(tree, tree.splice(idx, 1)[0]) // if have parent then remove it from the array to relocate it to the right place
            else idx++; // if doesn't have parent then is root and move it to the next object
    }
}

for (var i=0; i<data.length; i++) { // add childs to every item
    data[i].childs = [];
}
buildTree(data);
console.log(data); 
```

谢谢！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T17:42:14.103

我知道我为时已晚，但是由于我刚刚完成了对如何完成此操作的示例实现的贡献，因此我想我会分享它，因为它可能会很有用/或为替代解决方案提供灵感。

可以在这里找到实现：http: [//jsfiddle.net/sw_lasse/9wpHa/](http://jsfiddle.net/sw_lasse/9wpHa/)

实现的主要思想围绕以下递归函数：

```
// Get parent of node (recursive)
var getParent = function (rootNode, rootId) {

    if (rootNode._id === rootId)
        return rootNode;

    for (var i = 0; i < rootNode.children.length; i++) {
        var child = rootNode.children[i];
        if (child._id === rootId)
            return child;

        if (child.children.length > 0)
            var childResult = getParent(child, rootId);

        if (childResult != null) return childResult;
    }
    return null;
}; 
```

...用于构建树。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-27T09:35:41.650

您可以使用npm[中的数组到树](https://www.npmjs.com/package/array-to-tree)模块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-31T11:51:24.253

借用 Vivin Paliath 的答案中的缓存逻辑，我创建了一个可重用的函数来将具有子父关系的数据列表转换为树。

```
var data = [
  { "id" : "root"                     },
  { "id" : "a1",   "parentId" : "root", },
  { "id" : "a2",   "parentId" : "a1",   },
  { "id" : "a3",   "parentId" : "a2",   },
  { "id" : "b1",   "parentId" : "root", },
  { "id" : "b2",   "parentId" : "b1",   },
  { "id" : "b3",   "parentId" : "b1",   }
];
var options = {
  childKey  : 'id',
  parentKey : 'parentId'
};
var tree = walkTree(listToTree(data, options), pruneChildren);

document.body.innerHTML = '<pre>' + JSON.stringify(tree, null, 4) + '</pre>';

function listToTree(list, options) {
  options = options || {};
  var childKey    = options.childKey    || 'child';
  var parentKey   = options.parentKey   || 'parent';
  var childrenKey = options.childrenKey || 'children';
  var nodeFn      = options.nodeFn      || function(node, name, children) {
    return { name : name, children : children };
  };
  var nodeCache = {};
  return list.reduce(function(tree, node) {
    node[childrenKey] = [];
    nodeCache[node[childKey]] = node;
    if (typeof node[parentKey] === 'undefined' || node[parentKey] === '') {
      tree = nodeFn(node, node[childKey], node[childrenKey]);
    } else {
      parentNode = nodeCache[node[parentKey]];
      parentNode[childrenKey].push(nodeFn(node, node[childKey], node[childrenKey]));
    }
    return tree;
  }, {});
}

function walkTree(tree, visitorFn, parent) {
  if (visitorFn == null || typeof visitorFn !== 'function') {
    return tree;
  }
  visitorFn.call(tree, tree, parent);
  if (tree.children && tree.children.length > 0) {
    tree.children.forEach(function(child) {
      walkTree(child, visitorFn, tree);
    });
  }
  return tree;
}

function pruneChildren(node, parent) {
  if (node.children.length < 1) {
    delete node.children;
  }
}
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T17:11:59.723

试试看：

```
 var obj = {};
   obj.rootElements = [];
   var currentRoot;
   var currentParent;
   for (s in a) {
       var t = a[s];
       var id = t._id;
       if (t.parentAreaRef) {
           var parentId = t.parentAreaRef.id;
           if (parentId == currentParent._id) {
               //add children
               if (!currentParent.children) {
                   currentParent.children = [];
               }
               currentParent.children.push(t);
           }
           else {
               addChildToParent(t, parentId);
           }

       }
       else // is root
       {
           currentRoot = t;
           currentParent = t;
           obj.rootElements.push(currentRoot);
       }
   }

   var t = currentRoot

   function addChildToParent(child, parentId, root) {
       for (p in a) {
           if (a[p]._id.toString() == parentId.toString()) {
               if (!a[p].children) {
                   a[p].children = [];
               }
               a[p].children.push(t);
           }
       }
   } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-17T16:04:32.670

您的字符串中有错误

```
a[p].children.push(t); 
```

它应该是

```
a[p].children.push(child); 
```

我也很少优化它：

```
var data = [{"id":1,"name":"X","parentId":null},{"id":2,"name":"Y","parentId":1},{"id":3,"name":"D","parentId":2},{"id":2,"name":"S","parentId":1},{"id":5,"name":"K","parentId":4}]
    var obj = {};
    obj.rootElements = [];
    for (i in data) {
        var _elem = data[i];
        if (_elem.parentId) {
            var _parentId = _elem.parentId;
            if (_parentId == _elem.id) {
                // check children, if false - add
                if (!_elem.children) {
                    _elem.children = [];
                }
                _elem.children.push(_elem);
            }
            else {
                addChildToParent(_elem, _parentId);
            }
        }
        else // is root
        {
            obj.rootElements.push(_elem);
        }
    }
    function addChildToParent(child, parentId, root) {
        for (j in data) {
            if (data[j].id.toString() == parentId.toString()) {
                if (!data[j].children) {
                    data[j].children = [];
                }
                data[j].children.push(child);
            }
        }
    }
    res.send(obj.rootElements); 
```*

# php - 使用文本框和下拉菜单搜索 - php mysql html phpmyadmin

> ID：15792797
> 
> 赞同：0
> 
> 时间：2013-04-03T16:24:03.850
> 
> 标签：php, html, mysql, phpmyadmin

我如何进行查询以不仅按这样的一个字段进行过滤

```
select * from table1 where LOWER(A) like LOWER('%$A%') 
```

但也要从下拉菜单值中过滤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:30:22.803

只需在 where 子句中添加另一个过滤条件。

```
SELECT * FROM table1
WHERE a LIKE '%$A%'
AND some_other_field = 'some dropdown value' 
```

顺便说一句，如果您在字段“A”上使用不区分大小写的排序规则，则无需将值转换为小写，因为比较将不区分大小写（这就是为什么我`LOWER()`在我的例如。您的默认 MySQL 设置很可能不区分大小写，因此请检查一下。通过不转换为小写，您的大小写仍然使用字段“A”上的索引来加快搜索速度。

# ruby-on-rails - 为什么方法 :try 在 Array 而不是 ActiveRecord::Relation 上调用？

> ID：15792803
> 
> 赞同：0
> 
> 时间：2013-04-03T16:24:20.703
> 
> 标签：ruby-on-rails

我有这样的指令：

```
project.memberships.try(:destroy_all) 
```

显然，一个项目有许多成员。当那被执行时，我得到`undefined method :destroy_all for class Array`.

所以问题是为什么调用该方法`Array`而不是 on `ActiveRecord::Relation`？此外，当我尝试`project.memberships.class`它返回`Array`但`project.memberships.where(nil)`返回`ActiveRecord::Relation`。这是一个错误还是我做错了什么？

# haskell - Erlang vs Haskell：什么时候更喜欢一个？

> ID：15792809
> 
> 赞同：1
> 
> 时间：2013-04-03T16:24:40.907
> 
> 标签：haskell, tcp, erlang

*   什么时候会更喜欢[Erlang](http://www.erlang.org/)而不是[Haskell](http://en.wikipedia.org/wiki/Haskell_%28programming_language%29)？
*   难道两者都不能`TCP`在一个进程中处理大量流量吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T17:20:43.840

为什么不自己去发现？Pragmatic Press[在七周内制作了七种语言，](http://pragprog.com/book/btlang/seven-languages-in-seven-weeks)其中包括 Haskell 和 Erlang 作为两种语言。虽然它不会使您成为专家，但您将有机会在两者上都发挥作用。

Erlang 是为高吞吐量、弹性网络代理而构建的。Haskell 有不同的历史，但我听说它也有一个很好的网络堆栈。我自己是 Erlang 的忠实粉丝，你得到的大多数答案可能都是有偏见的。但最好的建议是自己尝试。

# cursor - Benthic Golden Oracle：从过程中返回多个引用游标以供查看

> ID：15792810
> 
> 赞同：1
> 
> 时间：2013-04-03T16:24:40.870
> 
> 标签：cursor, procedure

我习惯于运行一个程序并返回一个光标进行查看：

```
var recCursos refcursor;
exec user.package.procedure(inputValue1, :recCursor); 
```

但是，这一次我需要运行一个有 5 个出站游标的过程，并且希望能够查看所有这些游标。最简单的方法是什么？到目前为止，我只找到了关于以编程方式进行操作的在线文章，而不是在 Benthic Golden（或其他 SQL UI）中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:15:04.517

Golden 有一个预定义的变量，用于显示单个光标 ":cursor"

```
exec user.package.procedure(inputValue1, :cursor); 
```

我没有看到 5 光标示例，但根据您使用的 Golden 版本，可能会有一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T10:13:22.897

[Golden](http://www.benthicsoftware.com/golden6.html)处理标准 Oracle 脚本语法，因此您可以使用：

```
var cursor1 refcursor;
var cursor2 refcursor;
exec MyMultiCursorProc(inputValue1, :cursor1, :cursor2);
print cursor1;
print cursor2; 
```

您还可以通过选择结果 | 上的“显示光标 [光标名称]”菜单项来显示每个定义的光标。绑定变量游标菜单。

# ruby-on-rails-3 - 将模块与类和实例方法一起使用

> ID：15792812
> 
> 赞同：0
> 
> 时间：2013-04-03T16:24:42.870
> 
> 标签：ruby-on-rails-3, rails-models

在我的应用程序中，我需要在对象集合和单独对象上调用相同的方法。例如，受保用户有许多保险单，可以将其状态从草稿更改为已接受等。对于我的报告，我需要获取有关特定日期的单独用户的所有保单状态的统计信息。但是，如果设置了“显示所有用户的政策”复选框，我需要从整个用户集合中获取数据，迭代每个用户并收集特定日期的政策状态信息。我的问题是 - 这种情况下的最佳做法是什么？我应该把这些方法放在哪里，我可以将它们合二为一吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:11:22.573

我通过将类和实例方法（具有相同名称）放入同一个模块文件中找到了解决方案。请看下面的例子：

```
require 'active_support/concern'    
module SharedMethods
  extend ActiveSupport::Concern

  module ClassMethods
    def get_policies(date)
      self.all.each do |entity|
        entity.get_policies(date)
      end
    end
  end

  #Instance methods
  def get_policies(date)
    self.find_policy #place required code here
  end
end 
```

之后我需要在我的模型中包含这个模块，我可以调用 get_policies(date) 作为类和实例方法。请点击链接获取更多信息[http://alexanderwong.me/post/15697487692/rails-model-mixins-via-included-modules](http://alexanderwong.me/post/15697487692/rails-model-mixins-via-included-modules)

# c# - 在所有命名空间中搜索名称

> ID：15792818
> 
> 赞同：0
> 
> 时间：2013-04-03T16:24:58.763
> 
> 标签：c#, .net, visual-studio, visual-studio-2012

Visual Studio 是否提供了一种方法来搜索每个可用`namespace`的建议`The type or namespace name '____' could not be found`？

我经常忘记将哪个`namespace`用于特定对象。

例如，下面的代码无法编译，因为我省略了`using System.IO;`.

```
using System;
namespace myTest {
    class Program {
        static void Main(string[] args) {
            Stream fs = new Stream(); // <-- ERROR
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:26:54.510

按`CTRL`+`.`可让您选择添加正确的`using`语句（如果程序集已知）或为成员添加相关名称空间的前缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:28:30.513

单击位于不同命名空间中的类，您应该会在角落看到一个蓝色方块

![在此处输入图像描述](https://i.stack.imgur.com/T9mJH.png)

将鼠标移到那个蓝色方块上，应该会出现一个图标。单击该图标以显示选项列表，其中之一应该是添加适当的命名空间。

![在此处输入图像描述](https://i.stack.imgur.com/6o8Ub.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:26:22.883

如果您将鼠标悬停在引用库中的未知类上，它会提供一个浮动帮助器。Helper 将建议添加一个命名空间。

# ios - MKMapView：有办法检测卫星图像是否已加载？

> ID：15792827
> 
> 赞同：1
> 
> 时间：2013-04-03T16:25:19.340
> 
> 标签：ios, objective-c, xcode, mkmapview, mapkit

非常简单的问题，当使用 MKMapView (MapKit) 并且您使用 MKMapTypeSatellite 时，有时，尤其是在农村地区，您可以放大到比可用卫星图像更远的地方。有什么方法可以检测图像是否可用，以便您可以调整缩放级别或更改为 MKMapTypeStandard 之类的？

# ruby-on-rails - 设计中不一致的验证警报

> ID：15792830
> 
> 赞同：0
> 
> 时间：2013-04-03T16:25:28.460
> 
> 标签：ruby-on-rails, ruby, authentication, devise, validation

我在让设计验证帮助程序与登录和注册相同时遇到了一些问题。

当用户注册失败或错误填写忘记密码时，将显示设计错误通知。顶部的红色框带有一条消息，然后每个问题字段都以红色突出显示。这是期望的结果。

当用户错误地填写登录表单时，我会得到不同类型的验证。我没有以红色突出显示问题字段，而是收到了与设计语言环境文件相关联的标准 Flash 通知。

```
 devise:
    failure:
      invalid: 'Invalid email or password. 
```

这是视图：

```
- provide(:title, "Login")
.devise-form-box
  %h2 Login
  = simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => {:class => 'form-vertical' }) do |f|
    = f.error_notification
    = f.input :email, :autofocus => true, :placeholder => "Email Address"
    = f.input :password, :placeholder => "Password"
    = f.input :remember_me, :as => :boolean if devise_mapping.rememberable?
    .clearfix
    = f.button :submit, "Login", :class => 'btn-primary btn-medium'
  = render "devise/shared/links" 
```

关于为什么登录表单没有使用与注册或忘记密码相同的验证方法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:38:50.313

你没有这样的 html 元素来显示错误，你怎么能期望看到它们？

简单的解决方案是在`form_for`.

```
<%= devise_error_messages! %> 
```

请参阅设计默认模板以供参考。

如果您想进一步自定义错误消息，这也很容易，您可以看到`devise_error_message!`只是对错误消息的操作：[https](https://github.com/plataformatec/devise/blob/master/app/helpers/devise_helper.rb) ://github.com/plataformatec/devise/blob/master/app/helpers/devise_helper.rb 。因此，您可以检查普通脚手架模板中的错误视图以供参考，以在需要时对其进行改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:09:38.067

我错了。登录表单不应突出显示注册表单等不正确的字段。

# java - 将一个 Jpanel 的内容添加到另一个 - Java Swings

> ID：15792832
> 
> 赞同：0
> 
> 时间：2013-04-03T16:25:32.463
> 
> 标签：java, swing

我有一个方法可以返回一个 jpanel，它的布局设置类似于图像轮播。`JPanel`我已经检查过，直接应用时，此代码在单个上运行良好。但是在多个地方都使用了相同的布局。因此，我想创建一个通用方法来设置此布局并返回一个`jPanel`. 这是我写的方法：

```
public static JPanel loadImages(String Location) throws IOException{
    JPanel ImagePanel = new JPanel();
      File directory = new File(Location);
     ImageIcon image;

     String[] imageFiles = directory.list();
    DefaultListModel model = new DefaultListModel();   
     JLabel lab1=new JLabel();
      JCheckBox  chkbox ; 
    ImagePanel.setLayout(new GridBagLayout()); 

    for (int ii=0; ii<imageFiles.length; ii++) {
       GridBagConstraints constraint = new GridBagConstraints();  
        image = new ImageIcon(imageFiles[ii]);
            lab1 = new JLabel(image);
        constraint.gridx = ii;
        constraint.gridy =0;  
        ImagePanel.add(lab1,constraint);
    }
    for (int ii=0; ii<imageFiles.length; ii++) {
        GridBagConstraints constraint1 = new GridBagConstraints();         
        constraint1.anchor = GridBagConstraints.SOUTH;           
        chkbox = new JCheckBox(imageFiles[ii]);
        constraint1.gridx = ii;
        constraint1.gridy =1;

        ImagePanel.add(chkbox, constraint1);
      }  
    return ImagePanel;

  } 
```

我的想法是，在所有需要这样做的地方，我都会在 UI 中设置一个 jscrollpane。我想调用这个方法来返回这个 JPanel，我想把它添加到滚动窗格中。

```
private void jRadioButton3ActionPerformed(java.awt.event.ActionEvent evt) {
      jScrollPane3.add(loadImages("C://users//images"));
      jScrollPane3.revalidate();
      jScrollPane3.repaint();
 } 
```

但什么都没有显示。是不是因为没有设置布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:35:51.320

不要在 JScrollPane 上使用 add。

尝试：

```
jScrollPane3.setViewportView(loadImages("C://users//images")); 
```

# php - 我无法从我的 PHP 表单向 MySQL 添加数据

> ID：15792836
> 
> 赞同：0
> 
> 时间：2013-04-03T16:26:01.010
> 
> 标签：php, mysql, database

我正在创建我的网站，所以我尝试为我的网站注册用户。我创建了 MySQL 数据库并编写了谁编码和查询。然后我首先尝试注册一个示例用户，它成功了，然后我又尝试了一个，但没有成功。我没有更改任何查询或其他内容。我的代码原样，但我不知道发生了什么。

我在registered.php中的PHP代码

```
$connection = mysql_connect("localhost","root","accessdenied")
  or die ("Couldn't connect to server");

$db = mysql_select_db("hdnesslife",$connection)
  or die ("Couldn't select database");

$fname =$_REQUEST["fname"];
$lname =$_REQUEST['lname'];
$username =$_REQUEST['username'];
$email =$_REQUEST['email'];
$password =$_REQUEST['password'];

$order = "INSERT INTO users(fname,lname,username,email, password)VALUES('$fname','$lname','$username','$email','$password')";
$result = mysql_query($order);

if($result){
echo("<br>Success");
}
else {
    echo("<br>No Success");
}

mysql_close();
?> 
```

我在 register.php 中的 HTML 表单代码

```
<form action="registered.php" method="post">
    First Name<input required="required" type="text" name="fname" id="fname">
    <br>
    Last Name<input required="required" type="text" name="lname" id="lname">
    <br>
    Username<input required="required" type="text" name="username" id="username">
    <br>
    Email Id<input required="required" type="text" name="email" id="email">
    <br>
    Password<input required="required" type="password" name="password" id="password" value="password">
    <br>
    <input type="submit" name="submit" value="register">
</form> 
```

每次我尝试注册新用户时，它都会说

> “没有成功”

似乎 $order 查询是错误的，但我检查了很多次。我已经检查了很多次代码，它似乎是正确的，我不知道是什么问题，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:31:52.213

如果您看到正确的错误消息，则更容易发现问题。使用[调试器](https://stackoverflow.com/questions/888/how-do-you-debug-php-scripts)（推荐）或将调试语句放入您的代码。你可以例如做

```
echo mysql_error($connection); 
```

在 echo 之后`"<br>No success";`。

mysql_error 将打印出在特定连接上发生的最后一个错误，或者如果没有提供标识符，则显示最后打开的连接。在[PHP 手册](http://php.net/manual/en/function.mysql-error.php)中阅读更多内容。

**警告：**不推荐使用 mysql 扩展。如果有机会，您应该将库切换到例如 mysqli。在此处阅读更多信息：[选择 [MySQL] API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:33:04.077

如果您从 MySQL 输出错误，它会有所帮助，它会告诉您出了什么问题！

换行：

```
$result = mysql_query($order); 
```

至：

```
$result = mysql_query($order) or die(mysql_error()); 
```

# reporting-services - SSRS 图表：将集合与子集进行比较

> ID：15792838
> 
> 赞同：1
> 
> 时间：2013-04-03T16:26:06.403
> 
> 标签：reporting-services, bar-chart

我正在尝试用图表完成一些事情。

我的数据集包含 100 行提交的论文。每篇论文提交的 SubmissionStatus 为“Logged”。然而，并非所有论文都被接受，因此只有 30 篇论文的 FinalDispositionStatus 为“已接受”；其余的具有“拒绝”的 FinalDispositionStatus。每篇论文还有一个与之关联的 CategoryID（有 5 个可能的类别）。

我希望我的图表显示，对于每个 CategoryID，提交了多少论文（SubmissionStatus = Logged）和接受了多少论文（FinalDispositionStatus = Accepted）。

我设想一个条形图。沿着底部 X 轴，我的 CategoryID 为 1-5。对于每个类别，将有两个条形图。一个条形代表针对该类别的提交总数。另一个条形代表针对该类别的已接受提交的总数。我不想在图表上显示被拒绝的提交。

您可以提供的任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:01:11.307

我将基本报告与您的数据集的简化版本放在一起：

![在此处输入图像描述](https://i.stack.imgur.com/cMikg.png)

基于此，我在报告中添加了条形图：

![在此处输入图像描述](https://i.stack.imgur.com/wZlnc.png)

需要注意的最重要的一点是，我在数据字段部分添加了两个值，一个基于表达式：

`=Count(Fields!FinalDispositionStatus.Value)`

其中给出了每个类别的提交论文数量，其中一篇带有以下表达式：

`=Sum(IIf(Fields!FinalDispositionStatus.Value = "Accepted", 1, 0))`

它给出了每个类别的接受论文数量。

确保将 Category 字段值设置为`=Fields!categoryId.Value`并为两个数据字段适当地设置自定义图例文本！

最终结果：

![在此处输入图像描述](https://i.stack.imgur.com/qNudB.png)

您可以看到它有点粗糙，但可以按要求工作。

这在 SSRS 2008 中进行了测试。

# javascript - try catch 不捕获无效日期

> ID：15792839
> 
> 赞同：14
> 
> 时间：2013-04-03T16:26:10.587
> 
> 标签：javascript, date

我正在尝试验证日期输入，所以如果它是正确的，我处理一种方式，如果无效，我处理另一种......

```
var date, datestring, e;

datestring = "2012-03-222";

try {
  date = new Date(datestring);
  /* Ends up logging `Invalid Date`
  */

  console.log(date);
} catch (_error) {
  e = _error;
  /* Should come here and log `Error: Invalid Date` or the likes
  */

  console.log("Erorr: " + e);
} 
```

我可以检查返回的字符串，看看它是否是`Invalid Date`，但我很惊讶这`try/catch`不适用于这种情况，并且担心可能有其他我不匹配的错误消息。

我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T16:30:36.820

如果日期对象无效，它们不会引发错误。[此相关问题](https://stackoverflow.com/questions/1353684/detecting-an-invalid-date-date-instance-in-javascript)中描述了一种方法，该方法将确定日期是否有效。

# android - 在 Android 中使用谷歌地图 API 时出错

> ID：15792843
> 
> 赞同：0
> 
> 时间：2013-04-03T16:26:16.440
> 
> 标签：android, google-maps

我试图在 Android 中测试 Google Maps API。但是在编译过程中我收到了这个错误：

```
04-03 21:40:30.209: E/AndroidRuntime(14016): FATAL EXCEPTION: main
04-03 21:40:30.209: E/AndroidRuntime(14016): java.lang.ExceptionInInitializerError
04-03 21:40:30.209: E/AndroidRuntime(14016):    at java.lang.Class.newInstanceImpl(Native Method)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at java.lang.Class.newInstance(Class.java:1319)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1984)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at android.os.Looper.loop(Looper.java:137)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at android.app.ActivityThread.main(ActivityThread.java:4575)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at java.lang.reflect.Method.invokeNative(Native Method)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at java.lang.reflect.Method.invoke(Method.java:511)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
04-03 21:40:30.209: E/AndroidRuntime(14016):    at dalvik.system.NativeStart.main(Native Method)
04-03 21:40:30.209: E/AndroidRuntime(14016): Caused by: java.lang.NoClassDefFoundError: com.google.android.gms.maps.model.LatLng
04-03 21:40:30.209: E/AndroidRuntime(14016):    at com.omerjerk.sticktracker.MainActivity.<clinit>(MainActivity.java:16)
04-03 21:40:30.209: E/AndroidRuntime(14016):    ... 15 more 
```

我在 StackOverflow 上进行了搜索，但我认为我的代码中可能没有任何问题。我是否需要针对 Google API 或 SDK 进行编译？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.omerjerk.sticktracker"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />
<permission
    android:name="com.omerjerk.sticktracker.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission android:name="com.omerjerk.sticktracker.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<!-- The following two permissions are not required to use
 Google Maps Android API v2, but are recommended. -->
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:required="true" android:name="com.google.android.maps" />
    <activity
        android:name="com.omerjerk.sticktracker.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyDKwhbavlZaQXehStVJpg-ho_6mwkUCLYo" />

</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:54:07.513

你的问题是这样的：

```
Caused by: java.lang.NoClassDefFoundError: com.google.android.gms.maps.model.LatLng 
```

`Latlng`基本找不到类包。`Latlng`是`google-play-services`图书馆的一部分，这意味着你对谷歌的包有某种引用问题。

检查我写的本指南的第 1-3 步，将 Google 地图添加到您的应用程序以供`google-play-service`图书馆参考：

[谷歌地图 API V2](http://blog-emildesign.rhcloud.com/?p=435)

# html - 2个跨度之间的间距不符合

> ID：15792844
> 
> 赞同：0
> 
> 时间：2013-04-03T16:26:17.913
> 
> 标签：html, css

我有这个代码：

```
<div class="mainmenu">
    <span class="mainmenuitem">
        Item1
    </span>
    <span class="mainmenuitem">
        Item2
    </span>
</div> 
```

我使用这个CSS：

```
.mainmenu{
 height:        25px;
 padding-left:  15px;   
}
.mainmenuitem{
height:             25px;
line-height:        25px;
background-color:   #F1F2F3;
text-align:         center;
padding-top:        0px;
padding-bottom:     0px;
padding-left:       5px;
padding-right:      5px;
margin-right:       1px;
margin-left:        0px;
display:            inline-block;
vertical-align:     middle;
color:              #00537B;
} 
```

但问题是 2 个菜单项之间的空间超过 1 个像素。如何防止这种情况？如果我对一个像素使用margin-right，为什么超过1个像素之间的空间？如果我将其设为 10 像素，则它们之间的空间会增加，但仍然与 10 像素不匹配......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:27:43.153

只需删除一个跨度结束和下一个跨度开始之间的代码中的空白。

例如：

```
</span><span class="mainmenuitem"> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/z6FTX/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:29:29.777

`spans`本质上是内联元素，因此它们之间的任何空格都被解析为文本。删除换行符修复它：http: [//jsfiddle.net/VB8yW/](http://jsfiddle.net/VB8yW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:31:54.983

每当我使用`display:inline-block;`时，我也会`float:left;`在元素中添加一个。这缩小了这个差距。然后，如果我需要灵活的高度，父母会得到一个`overflow:hidden;`或其他类型的明确修复。

# ruby - 永恒的红宝石工艺

> ID：15792845
> 
> 赞同：2
> 
> 时间：2013-04-03T16:26:18.283
> 
> 标签：ruby, linux, ruby-on-rails-3

我试图杀死 ruby​​ 进程，但这是不可能的。我正在使用 Ubuntu，清理缓存，重新启动操作系统，然后 ruby​​ 服务器正在运行。但是如果我运行`pgrep -l ruby`，我会得到一些我想要杀死的 pid `kill -9 $pid`。但是当我再次运行时`pgrep -l ruby`，它永远显示我想杀死的相同进程......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:29:52.940

使用`pstree -p | less`并点击`/`搜索，而不是`pgrep`. 这将显示一个完整的进程树以及它们是如何创建的。破坏更高的进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:12:12.477

首先使用以下命令显示正在运行的进程列表：

```
ps -l 
```

然后它显示一些进程列表，如

```
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000  2456  1610  2  80   0 - 28987 wait   pts/2    00:00:00 bash
0 R  1000  2512  2456  0  80   0 - 28408 -      pts/2    00:00:00 ps 
```

然后使用命令杀死进程：

```
kill -9 PID 
```

它一直对我有用。

**为您的情况编辑：**

使用命令：

```
ps -fu username 
```

此命令显示系统上所有正在运行的进程，然后您可以杀死其中任何一个。

# php - %（循环中的示例）

> ID：15792848
> 
> 赞同：-6
> 
> 时间：2013-04-03T16:26:21.650
> 
> 标签：php, loops, for-loop

```
% (examples in loop) 
```

我不知道 % in loop 的目的是什么 为什么要 % in loop

请给出一两个使用循环的基本示例，并在循环中定义 %

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:29:18.080

`%`只是一个[模运算](http://php.net/manual/en/language.operators.arithmetic.php)符 。

它在循环内部或外部没有区别。它只是一个返回除法余数的算术运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:29:32.140

一种特殊用途是检查偶数/奇数：

```
for($i=0; $i<10; $i++)
{
    if($i%2==0)
    echo "even"
    else
    echo "odd"
} 
```

这个想法可以用来对表格的行（tr）进行不同的着色，以便更好地呈现。

* * *

另一个用途是在复杂代码中动态关闭 TR（比如说，每 4 个 tds 后更改 tr）。像：

```
echo "<tr>";
for($i=0; $i<10; $i++)
{
    if($i%4==0)
    echo "</tr><tr>";

    echo "<td>";
    .
    .
    .
    echo "</td>";

}
echo "</tr>"; 
```

# javascript - 使用 javascript 移动 div 框

> ID：15792855
> 
> 赞同：3
> 
> 时间：2013-04-03T16:26:46.693
> 
> 标签：javascript, html

我正在尝试创建一个 300 像素 x 300 像素的 div 框，当用户将鼠标放在框上时，它会移动几个像素。唯一的事情是当 div 达到浏览器大小的末尾时，我希望它开始以另一种方式移动而不是使窗口滚动。任何帮助将不胜感激。

```
<div style="left:300px; top:300px; width:300px; height:300px; background:blue;>
</div> 
```

这是我在 Firefox 中运行时遇到问题的 oleg 代码，我做错了吗？

```
<html>
<head>
<script>
window.onload = function () {
var speed = 10, // the box will move by 10 pixels on every step
direction = 1, // 1 = move right; -1 = move left
boxElement = document.getElementById('theIdOfTheBox');

if (boxElement) {
    boxElement.addEventListener('mouseover', function () {
        // Calculate and store some of the box coordinates:
        var boxLeftPos = boxElement.offsetLeft,
            boxRightPos = boxLeftPos + boxElement.offsetWidth;
        // When right side of the box goes too far - change direction:
        if (boxRightPos > document.body.offsetWidth) {
            direction = -1;
        }
        // When left side of the box goes too far - change direction:
        if (boxLeftPos < 0) {
            direction = 1;
        }
        // Recalculate position:
        boxElement.style.left = (boxLeftPos + speed * direction) + 'px';
    });
 }
};
</script>

<style>
#theIdOfTheBox {
position: absolute;
left:100px;
top:100px;
width:300px;
height:300px;
background:blue;
}
</style>

</head>

<body>
<div id="theIdOfTheBox">box</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T16:56:15.960

首先创建几个变量来跟踪速度和方向：

```
var speed = 10, // the box will move by 10 pixels on every step
    direction = 1; // 1 moves in the positive direction; -1 vice versa 
```

然后获取对您的框的引用并将事件处理程序附加到其“鼠标悬停”事件：

```
var boxElement = document.getElementById('theIdOfTheBox');

if (boxElement) {
    boxElement.addEventListener('mouseover', function () {
        // Calculate and store some of the box coordinates:
        var boxLeftPos = boxElement.offsetLeft,
            boxRightPos = boxLeftPos + boxElement.offsetWidth;
        // When right side of the box goes too far - change direction:
        if (boxRightPos > document.body.offsetWidth) {
            direction = -1;
        }
        // When left side of the box goes too far - change direction:
        if (boxLeftPos < 0) {
            direction = 1;
        }
        // Recalculate position:
        boxElement.style.left = (boxLeftPos + speed * direction) + 'px';
    });
} 
```

一切都完成了，这里有一个**[jsfiddle](http://jsfiddle.net/dZ7dX/)**供您使用。

但是请注意，`position: absolute;`在 CSS 中，您需要等待 DOM 加载才能安全地执行`getElementById`操作。

如果您想避免使用偏移量，您可能需要解析和操作框的边距或填充。

**动画片**

如果你想为你的盒子的移动设置动画，你可以试试 CSS 动画。只需将以下内容添加到 CSS 中框的样式声明中：

```
-webkit-transition: left 0.3s 0.1s ease-out; 
```

上面的代码将对`left`webkit 浏览器中的任何属性更改进行动画处理。您可以添加其他供应商前缀（并且不添加以与未来版本兼容）以在其他支持它的浏览器中启用动画。

# 编辑

关于您在浏览器启动时运行脚本的评论：

`<script></script>`首先，如果要将 JavaScript 代码嵌入 HTML 页面，请确保将其包装在标签中。您可以运行验证器（例如[validator.w3.org](http://validator.w3.org/#validate_by_input)）以确保您拥有正确的文档结构。

其次，将这些标签中的代码尽可能靠近文档正文的末尾，即`</body>`.

您还可以将整个 JavaScript 代码包装在一个函数中，该函数将在文档完全加载后执行。通过这种方式，可以从文档头部放置（或远程需要）代码（但你为什么要这样呢？）。这是如何完成的：

```
window.addEventListener('load', function () {
    // ... the code goes here
}); 
```

一个（不推荐的）替代方案是：

```
window.onload = function () {
    // ... the code goes here
}; 
```

或者（请避免这种情况，这只是一个示例）在 HTML 中：

```
<body onload="someFunction();"> 
```

因此，生成的代码*可能*如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <style>
        /* ... the CSS goes here */
    </style>
</head>
<body>
    <div id="box">I'm a box.</div>
    <script>
        // ... the JavaScript code goes here
    </script>
</body>
</html> 
```

**关于 Internet Explorer 的特别说明**

`addEventListener`版本 9 以下的 Internet Explorer不支持。您应该`attachEvent`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-09T15:10:22.060

```
<script>
 var topPos = 0;
 var leftPos = 0;
 var leftAdder = 1;
 var topAdder = 1;
 var id;

    function move() {  
        clearInterval(id);
        id = setInterval(frame, 3);

        function frame() {

        leftPos = leftPos + leftAdder;
        topPos = topPos + topAdder; 
        document.getElementById("box").style.left = leftPos + 'px'; 
        document.getElementById("box").style.top = topPos + 'px'; 

        if (leftPos == 500) {
            leftAdder = -1;  
        }
        if (topPos == 350) {
            topAdder = -1;  
        }
        if (leftPos == 0) {
            leftAdder = 1;  
        }
        if (topPos == 0) {
            topAdder = 1;  
        }  
        }
    }

    function stop(){
        clearInterval(id);
    }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:59:18.053

根据描述，我认为您想为 div 的高度设置动画，如果您能够使用 Jquery，您可以尝试以下操作：

```
$('.div').hover(function() {
    $(this).animate({
        height: $(document).height() - 50
    }, 300);
},function() {
    $(this).animate({
        height: '30px'
    }, 300);
}); 
```

**演示：http:** [//jsfiddle.net/CvhkM/4469/](http://jsfiddle.net/CvhkM/4469/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:06:06.787

这应该有效：

**Javascript**：

```
var over = false;
var dir = 0;
var speed = 10;

window.onload = function () {
    var div = document.getElementById("myDiv");
    var top = 10;
    div.onmouseover = function () {
        over = true;
        timer;
    }
    div.onmouseout = function () {
        over = false;
        setTimeout(timer, 1);
    }

    var timer = setInterval(function () {
        //direction
        if (div.offsetTop >= document.body.offsetHeight)
            dir = 1;
        else if (div.offsetTop <= 0)
            dir = 0;

        if (over && div.offsetTop < document.body.offsetHeight && dir == 0) {
            top += speed;
        }
        else if (over && top > 0 && dir == 1)
            top -= speed;

        div.style.top = top + "px";
    }, 100);
}; 
```

**标记**：

```
<div style="width: 800px; height: 400px">
    <div id="myDiv" style="width: 300px; height: 300px; background: blue; position: absolute">
    </div>
</div> 
```

您的 div 必须位于*absolute*，第一个 div 将代表您的浏览器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-10T00:50:06.007

如果您希望输入箭头来指示框的移动，我们可以使用此代码。试试看；

```
 <script>
            var topPos = 0;
            var leftPos = 0;
            var id;

            function moveRight() {  
              clearInterval(id);
              id = setInterval(frame, 10);
              function frame() {
                if (leftPos == 350) {
                  clearInterval(id);
                  gameOver();
                } else {
                  leftPos++; 
                  document.getElementById("box").style.left = leftPos + 'px'; 
                }
              }
            }

            function moveLeft() {  
              clearInterval(id);
              id = setInterval(frame, 10);
              function frame() {
                if (leftPos == 0) {
                  clearInterval(id);
                  gameOver();
                } else {
                  leftPos--; 
                  document.getElementById("box").style.left = leftPos + 'px'; 
                }
              }
            }

            function moveDown() {  
              clearInterval(id);
              id = setInterval(frame, 10);
              function frame() {
                if (topPos == 350) {
                  clearInterval(id);
                  gameOver();
                } else {
                  topPos++; 
                  document.getElementById("box").style.top = topPos + 'px'; 
                }
              }
            }

            function moveUp() {  
              clearInterval(id);
              id = setInterval(frame, 10);
              function frame() {
                if (topPos == 0) {
                  clearInterval(id);
                  gameOver();
                } else {
                  topPos--; 
                  document.getElementById("box").style.top = topPos + 'px'; 
                }
              }
            }

            function gameOver(){
                leftPos = 0;
                topPos = 0;
                alert("Game Over...");
                document.getElementById("box").style.top = '0px'; 
                document.getElementById("box").style.left = '0px'; 
            }
        </script> 
```

# java - 在 try 块中返回是一种好习惯吗？

> ID：15792857
> 
> 赞同：3
> 
> 时间：2013-04-03T16:26:52.663
> 
> 标签：java

我很好奇关于在 try 块中使用 return 语句的最佳实践。

我有一个调用服务方法的方法，该方法返回一个整数并可能引发 IllegalArgumentException。有两种方法可以做到这一点。

第一的：

```
public int getLookupStatus(String lookupType)
{
    try
    {
        return this.lookupService.getCountOfLookupRecords(lookupType);
    }
    catch(IllegalArgumentException ex)
    {
        throw new RestException();
    }
} 
```

第二：

```
public int getLookupStatus(String lookupType)
{
    int count;

    try
    {
        count = this.lookupService.getCountOfLookupRecords(lookupType);
    }
    catch(IllegalArgumentException ex)
    {
        throw new RestException();
    }

    return count;
} 
```

在第二种方法中，count 变量似乎是不必要的，但由于某种原因，第一种方法对我来说似乎是错误的。有什么特别的理由偏爱其中一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:33:27.490

在`try`块中返回值没有任何问题，如果`IllegalArgumentException`引发（或任何其他`RuntimeException`）你甚至不会从该方法返回任何东西，程序的正常执行流程将由于该异常而改变。

第二个示例中的模式用于需要关闭 catch 块中使用/实例化的资源的情况，然后在`finally`子句中您正在正确处理此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:33:25.997

我喜欢第一个版本，因为它看起来更具可读性。此外，如果引发了异常，那也没关系，因为无论如何控制都会退出该方法。

我使用第二种模式的唯一原因是，如果我想在返回值之前对它做一些事情。

另一方面，如果您*不*处理`IllegalArgumentException`. 应该有一种方法可以让您在调用方法*之前验证参数。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:34:23.690

两种方法都产生相同的结果，如果没有错误或抛出异常，两种情况都会返回一个值。

但是我个人更喜欢第一个，更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:36:35.507

您应该避免的是在 finally 子句中使用 return。一般来说，两个块都应该声明一个退出。如果在尝试中你有返回，你也应该在 catch 中，在你的情况下，第二个返回被替换为 throw。

我也会选择第一个 snipest，因为它更具可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T16:50:47.267

这两种方法最终都是相同的。您不能抛出异常以及从方法返回值。这两件事永远不会同时发生。您可以返回一些值或抛出异常。

在第二种方法中，**返回计数；**声明是必要的，否则编译器将抛出错误消息。这是因为，如果您的代码没有遇到任何异常，则它必须根据您的方法原型具有返回值。

两种方法都是一样的，只是第一个直接返回值，而第二个将它存储在一个变量中并返回变量的值，最终与第一个相同。

还有一件事，您没有在方法定义中声明 and **throws 子句**，这表明**RestException() 是未经检查的异常。**通常，抛出未经检查的异常并不是一个好习惯，因为调用方法可能无法处理它。**我建议您改为抛出一个已检查的异常。**

# sql-server - 当我将 Android SQlite 与 MS SQL 服务器同步时，托管同步服务器的 Tomcat 经常崩溃

> ID：15792863
> 
> 赞同：0
> 
> 时间：2013-04-03T16:27:00.260
> 
> 标签：sql-server, sqlite, tomcat, synchronization, sync

我在我的 Windows 主机上安装了 Tomcat 7.0.27 64 位，并将 Pervasync 数据同步服务器部署到 Tomcat，以便将 Android 平板电脑上的 SQLite DB 与中央 Microsoft SQL 服务器同步。它最初运行良好，但有时 Tomcat 只是随机崩溃。从Tomcat日志中我看到了这个：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00000001800057c0, pid=2476, tid=336
#
# JRE version: 7.0-b147
# Java VM: Java HotSpot(TM) 64-Bit Server VM (21.0-b17 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [tcnative-1.dll+0x57c0]
#
# Core dump written. Default location: C:\MySoftwares\apache-tomcat-7.0.27-windows-x64\apache-tomcat-7.0.27\bin\hs_err_pid2476.mdmp
#
# An error report file with more information is saved as:
# C:\MySoftwares\apache-tomcat-7.0.27-windows-x64\apache-tomcat-7.0.27\bin\hs_err_pid2476.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

这真的是JVM中的错误还是其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:52:19.103

Tomcat 崩溃通常是由 JNI 库引起的。Pervasync 是纯 Java。所以首先要检查的是你是否正在加载 Tomcat Native 库。查看 Catalinna*.log 中是否有类似以下内容：

```
Apr 02, 2013 3:07:51 PM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.27 using APR version 1.4.6. 
```

也许您下载的二进制文件与您的硬件不兼容。重新编译库或切换到非本机 - 从 Tomcat 路径中删除库。

查看[http://tomcat.apache.org/native-doc/](http://tomcat.apache.org/native-doc/)了解更多关于 Apache Tomcat Native 库的信息。

# sql-server - 如何在不使用连接且不使用循环的情况下更新 2 个表

> ID：15792864
> 
> 赞同：1
> 
> 时间：2013-04-03T16:27:02.797
> 
> 标签：sql-server, sql-server-2008, tsql

我有 2 个表，一个包含人员，一个包含凭证，我需要为每个人分配一个凭证，并使用分配给它的人的 ID 更新凭证表。由于没有共同的键来加入表，我不能使用递归 CTE，我总是尽量避免使用循环，但我想不出任何其他方式。

有没有办法不使用循环？理想情况下在单个语句中。

这将给出一个表示例（我使用的是 SQL Server 2008 R2）

```
CREATE TABLE Persons (ID INT IDENTITY(1,1), 
                      FirstName VARCHAR(30), 
                      LastName  VARCHAR(50),      
                      Voucher CHAR(5))

CREATE TABLE Vouchers (Voucher CHAR(5), 
                       Assigned INT)

INSERT INTO Persons (FirstName,LastName) VALUES ('Rob','Smith')
INSERT INTO Persons (FirstName,LastName) VALUES ('Alan','Brown')
INSERT INTO Persons (FirstName,LastName) VALUES ('John','Plant')
INSERT INTO Persons (FirstName,LastName) VALUES ('Mike','Black')
INSERT INTO Persons (FirstName,LastName) VALUES ('Steve','Green')

INSERT INTO Vouchers (Voucher) VALUES ('FEWPN')
INSERT INTO Vouchers (Voucher) VALUES ('ROPIW')
INSERT INTO Vouchers (Voucher) VALUES ('NGLCE')
INSERT INTO Vouchers (Voucher) VALUES ('WEKFE')
INSERT INTO Vouchers (Voucher) VALUES ('POIAP') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:35:22.217

这使用 CTE（不是递归的）并假设您不关心将哪个凭证分配给哪个人。每个人只有一张`rn`，每张代金券也只有一张。

```
;WITH x AS 
(
  SELECT ID, Voucher, rn = ROW_NUMBER() OVER (ORDER BY ID) FROM dbo.Persons
),
y AS 
(
  SELECT Voucher, rn = ROW_NUMBER() OVER (ORDER BY Voucher) FROM dbo.Vouchers
)
UPDATE x SET Voucher = y.Voucher
  FROM x INNER JOIN y
  ON x.rn = y.rn;

UPDATE v SET Assigned = p.ID
  FROM dbo.Vouchers AS v
  INNER JOIN dbo.Persons AS p
  ON v.Voucher = p.Voucher; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T16:36:19.787

假设您的数据按您想要的顺序排列

```
DECLARE @Persons TABLE (ID INT IDENTITY(1,1), 
                      FirstName VARCHAR(30), 
                      LastName  VARCHAR(50),      
                      Voucher CHAR(5))

DECLARE @Vouchers TABLE (Voucher CHAR(5), 
                       Assigned INT)

INSERT INTO @Vouchers (Voucher)
    SELECT Voucher
    FROM
        (
        INSERT INTO @Persons (FirstName,LastName,Voucher)
        OUTPUT INSERTED.Voucher
        VALUES ('Rob','Smith', 'FEWPN'), ('Alan','Brown', 'FEWPN'), ('John','Plant', 'NGLCE'), ('Mike','Black', 'WEKFE'),('Steve','Green', 'POIAP')
        ) X   

SELECT * FROM @Persons P
SELECT * FROM @Vouchers V 
```

# javascript - 将 Parse.com 与 Phonegap 一起使用；用户注册问题

> ID：15792866
> 
> 赞同：0
> 
> 时间：2013-04-03T16:27:05.017
> 
> 标签：javascript, html, parsing, cordova, parse-platform

我正在使用 Phonegap 和 Parse.com 构建一个 Android 应用程序来帮助“数据库”管理。我有一个 html 表单来保存用户“用户名”和用户“密码”，并带有一个 id 为“adduserbutton”的提交输入按钮。

这是我的 login.html 表单。（注意，这个 html 文件引用了一个名为“main.js”的文件，该文件存储了注册用户背后的逻辑。

```
 <form id ="adduser">
            <label for="text-3">Username:</label>
            <input type="text" data-clear-btn="true" id="username" id="text-3" placeHolder="Enter Desired Username">

            <label for="text-3">Password:</label>
            <input type="text" data-clear-btn="true" id="password" id="text-3" placeholder="Enter Desired Password">

            <input type="submit" id="adduserbutton" value="Add User">
            </form> 
```

此表单将采用用户名和密码（尚未散列，目前只是测试）。Main.js 等待“adduserbutton”被点击，然后应该运行一个函数。这就是问题所在，所以这是我的 main.js 代码：

```
//Parse related keys
var PARSE_APP = "hidden for sake of post";
var PARSE_JS = "hidden for sake of post";

$(document).ready(function() {
Parse.initialize(PARSE_APP, PARSE_JS);

var user = new Parse.User();

$("#adduserbutton").on("touchend", function(e) {
alert("here");
e.preventDefault();

//Grab the user details, no real validation for now
var username = $("#username").val();
user.set("username", username);
var password = $("#password").val();
user.set("password", password);

user.signUp(null, {
           success: function(user) {
               alert("it worked")
           },
           error: function(user, error) {
               alert("error");
           }
    });

  }); 
```

如您所见，这里“应该”发生的是：

1.  用户输入所需的用户名和密码，点击提交按钮。
2.  单击“adduserbutton”，触发 main.js 来存储数据？
3.  存储在用户 Parse 对象中的用户名和密码表单文本字段。
4.  用户注册到我的 Parse 表中。

然而，我单击提交按钮，页面闪烁（似乎刷新），没有任何反应。没有错误，我的数据库中也没有显示任何内容。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:21:37.980

解决了问题！

将 Main.js 中的 js 行从：

```
$("#adduserbutton").on("touchend", function(e) {
alert("here");
e.preventDefault(); 
```

至：

```
document.getElementById('adduserbutton').onclick = function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:25:43.967

我认为这是 touchend 的一个已知错误，具体取决于您使用的 android 版本：

[https://code.google.com/p/android/issues/detail?id=19827](https://code.google.com/p/android/issues/detail?id=19827)

否则只能推荐使用一些工具进行调试：

[波纹模拟器](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc?hl=en)

以及 chrome 工具供开发人员调试并查看是否

$("#adduserbutton").on("touchend", function(e) 根本不会触发。这似乎不是解析的事情，我猜您 Parse 收到的 API 请求是 0 或至少没有增加。

希望这可以帮助！

# java - 捕获后在 ImageView 中显示图像（android java）

> ID：15792870
> 
> 赞同：1
> 
> 时间：2013-04-03T16:27:27.403
> 
> 标签：java, android, camera

我的应用程序必须制作一张图片，并在 imageview 中显示它。我得到了这个工作，但出乎意料的是它不再。

这是我的按钮代码：

```
public void makeFoto(View v) {
    Calendar cal = Calendar.getInstance();
    File file = new File(Environment.getExternalStorageDirectory(), (subject.getText().toString() + cal.getTimeInMillis()+".jpg"));
    if (!file.exists()) {
        try {
            file.createNewFile();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } else {
        file.delete();
        try {
            file.createNewFile();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    capturedImageUri = Uri.fromFile(file);
    Intent photoIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    photoIntent.putExtra(MediaStore.EXTRA_OUTPUT, capturedImageUri);
    startActivityForResult(photoIntent, CAMERA_PHOTO_REQUEST);
} 
```

这是在我的 onActivityResult 中：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data){
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_OK){
        switch(requestCode) {
        case CAMERA_PHOTO_REQUEST:
            Uri img = capturedImageUri;
            imv.setImageURI(img);
        case CHOOSE_PHOTO_REQUEST:
            try {
                Uri selectedImage = data.getData();
                InputStream imageStream = getContentResolver().openInputStream(selectedImage);
                Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream);
                imv.setImageBitmap(yourSelectedImage);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

如您所见，我有两个结果，一个用于拍照，另一个用于从图库中选择图片。这是我得到的错误：

```
 04-03 18:16:29.207: E/AndroidRuntime(1478): FATAL EXCEPTION: main
04-03 18:16:29.207: E/AndroidRuntime(1478): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=-1, data=null} to activity {com.example.icomplain/com.example.icomplain.Home}: java.lang.NullPointerException
04-03 18:16:29.207: E/AndroidRuntime(1478):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3019)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at android.app.ActivityThread.access$1100(ActivityThread.java:122)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1176)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at android.os.Looper.loop(Looper.java:137)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at android.app.ActivityThread.main(ActivityThread.java:4340)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at java.lang.reflect.Method.invokeNative(Native Method)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at java.lang.reflect.Method.invoke(Method.java:511)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at dalvik.system.NativeStart.main(Native Method)
04-03 18:16:29.207: E/AndroidRuntime(1478): Caused by: java.lang.NullPointerException
04-03 18:16:29.207: E/AndroidRuntime(1478):     at com.example.icomplain.Home.onActivityResult(Home.java:154)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at android.app.Activity.dispatchActivityResult(Activity.java:4649)
04-03 18:16:29.207: E/AndroidRuntime(1478):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2972)
04-03 18:16:29.207: E/AndroidRuntime(1478):     ... 11 more
04-03 18:16:31.478: I/Process(1478): Sending signal. PID: 1478 SIG: 9
04-03 18:17:36.507: D/dalvikvm(1539): GC_FOR_ALLOC freed 47K, 2% free 14131K/14339K, paused 42ms
04-03 18:17:36.507: I/dalvikvm-heap(1539): Grow heap (frag case) to 14.868MB for 1048592-byte allocation
04-03 18:17:36.597: D/dalvikvm(1539): GC_CONCURRENT freed 1K, 2% free 15154K/15431K, paused 4ms+3ms
04-03 18:17:36.667: D/dalvikvm(1539): GC_FOR_ALLOC freed 0K, 2% free 15154K/15431K, paused 26ms
04-03 18:17:36.677: I/dalvikvm-heap(1539): Grow heap (frag case) to 16.646MB for 1865972-byte allocation
04-03 18:17:36.727: D/dalvikvm(1539): GC_CONCURRENT freed 0K, 2% free 16976K/17287K, paused 4ms+3ms 
```

来自日志的图像可以在[这里](http://img145.imageshack.us/img145/1920/schermafbeelding2013040ei.png)查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:55:19.003

1.  我猜你`break;`之前需要`case CHOOSE_PHOTO_REQUEST:`。
2.  这是一个可选的，但不幸的是，确定输出文件名完全取决于设备上安装的相机应用程序或用户选择的相机应用程序，即使它在`MediaStore.EXTRA_OUTPUT`. 所以你应该看到`data.getParcelableExtra(Intent.EXTRA_STREAM)`和`data.getData()`除了`capturedImageUri`。

# php - 使 CSV 上传文件更快（mysql - php）

> ID：15792872
> 
> 赞同：0
> 
> 时间：2013-04-03T16:27:34.707
> 
> 标签：php, mysql, file-upload, csv, upload

我正在尝试上传包含超过 100k 行的 CSV 文件。下面的代码工作正常，但是，它太慢了，我不得不修改 php.ini 的原因。我正在寻找一种让它更快的方法。

```
    mysqli_query($db, "SET AUTOCOMMIT=0");
    mysqli_query($db, "开始");
    mysqli_query($db, "SET FOREIGN_KEY_CHECKS = 0");
    fgets($句柄);
    $数据 = '';

 `while (($data = fgetcsv($handle, 100000, ';')) !== FALSE):
  $nf = trim($data[0]);
  //ignore values lower than 1
  if ($nf &lt 1):
   continue;
  else:
   $v1 = trim($data[1]);
   $v2 = trim($data[2]);

   $query = "SELECT * FROM tbl_venda WHERE nota = ". $nf ;
   $rs = mysqli_query($db, $query);
   validaQuery($db, $rs);

   //if $nf alrealdy exists, update, else, insert a new row
   if (mysqli_num_rows($rs) &gt; 0):
    //UPDATE
   else:
    //INSERT
   endif; 

  endif;
 endwhile;

 mysqli_query($db, "COMMIT");
 mysqli_query($db, "SET AUTOCOMMIT=1");
 mysqli_query($db, "SET FOREIGN_KEY_CHECKS = 1");
 mysqli_close($db);
</pre>
<p>Does anyone know how can i make it faster?</p>` 

```

# android - 为什么我的 adt 模拟器不使用菜单显示活动？

> ID：15792875
> 
> 赞同：-2
> 
> 时间：2013-04-03T16:27:40.480
> 
> 标签：android, command-line, android-emulator

我在我的代码中没有看到任何错误，我按照教程教我的做了。我对 android 和这里的新成员很陌生（请温柔）。

抱歉，伙计们没有解决我的问题。问题是当我单击模拟器右侧的菜单按钮时，菜单会显示..**是的，它会显示充气，但每次我选择其中一个菜单时都没有发生任何事情**，它根本没有做任何事情。

无论如何，这是 java 的代码：

```
 public boolean onCreateOptionsMenu(Menu menu) {
 super.onCreateOptionsMenu(menu);
 //inflates the menu
 MenuInflater awesome = getMenuInflater();
awesome.inflate(R.menu.main, menu); 

return true;
 }

  public boolean onOptionItemSelected(MenuItem item) {
switch (item.getItemId()) {
case R.id.menuSweet:
    startActivity(new Intent("Sweet"));
    return true;

case R.id.menuToast:
    Toast andEggs = Toast.makeText(MainActivity.this,
    "This is a toast", Toast.LENGTH_LONG);
    andEggs.show();
    return true;

}
return false;

   }` 
```

这是 res/menu 中的 xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

 <item 
 android:id="@+id/menuSweet"
 android:alphabeticShortcut="s"
 android:title="Open Sweet Activity" 
 android:onClick="@layout/about" />

 <item 
 android:id="@+id/menuToast"
 android:alphabeticShortcut="t"
 android:title="Open Toast Activity" />

 </menu> 
```

这是清单：

```
 <activity   
        android:name=".Sweet"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Dialog"

         >
        <intent-filter>
            <action android:name="Sweet" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
      </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:36:42.637

您可能需要在您的切换语句中添加默认情况，即

```
default:  return super.onOptionsItemSelected(item); 
```

而且我认为不需要`return false;`..也将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T10:40:53.513

应该调用第二种方法：

```
onOptionsItemSelected 
```

代替：

```
onOptionItemSelected 
```

方法名称中缺少“s”。

# c# - 获取智能卡时间戳时意外的异常连接关闭

> ID：15792878
> 
> 赞同：0
> 
> 时间：2013-04-03T16:27:46.777
> 
> 标签：c#, itext

当我尝试从智能卡中获取时间戳时出现异常

```
byte[] ts = tsc.GetTimeStampToken(tsImprint); 
```

调试我得到的问题：

> 基础连接已关闭：连接意外关闭。

**堆栈跟踪**

```
at System.Net.HttpWebRequest.GetResponse()
   at iTextSharp.text.pdf.security.TSAClientBouncyCastle.GetTSAResponse(Byte[] requestBytes)
   at iTextSharp.text.pdf.security.TSAClientBouncyCastle.GetTimeStampToken(Byte[] imprint)
   at DemoSCFmwk.Program.GetTimestamp(Byte[] signature) in c:\Users\guilherme\Desktop\smartCard Project\smartcardapi_source\Smartcard_API\DemoSCFmwk\Program.cs:line 167
   at DemoSCFmwk.Program.SignMsg(Byte[] msg, X509Certificate2 signerCert, Boolean detached) in c:\Users\guilherme\Desktop\smartCard Project\smartcardapi_source\Smartcard_API\DemoSCFmwk\Program.cs:line 149
   at DemoSCFmwk.Program.SignHashed() in c:\Users\guilherme\Desktop\smartCard Project\smartcardapi_source\Smartcard_API\DemoSCFmwk\Program.cs:line 58
   at DemoSCFmwk.Program.Main() in c:\Users\guilherme\Desktop\smartCard Project\smartcardapi_source\Smartcard_API\DemoSCFmwk\Program.cs:line 202
   at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

**整个代码在这里：**

```
public static Asn1EncodableVector GetTimestamp(byte[] signature) {

            SHA1CryptoServiceProvider sha1 = new SHA1CryptoServiceProvider();
            byte[] tsImprint = sha1.ComputeHash(signature);

            ITSAClient tsc = new TSAClientBouncyCastle("http://tsa.net", null, null);

            String ID_TIME_STAMP_TOKEN = "1.2.840.113549.1.9.16.2.14"; // RFC 3161 id-aa-timeStampToken

            byte[] ts = tsc.GetTimeStampToken(tsImprint);

            MemoryStream mem = new MemoryStream(ts);

            Asn1InputStream tempstream = new Asn1InputStream(mem);

            Asn1EncodableVector unauthAttributes = new Asn1EncodableVector();

            Asn1EncodableVector v = new Asn1EncodableVector();
            v.Add(new DerObjectIdentifier(ID_TIME_STAMP_TOKEN)); // id-aa-timeStampToken
            Asn1Sequence seq = (Asn1Sequence) tempstream.ReadObject();
            v.Add(new DerSet(seq));

            unauthAttributes.Add(new DerSequence(v));
            return unauthAttributes;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:40:28.480

我访问了[tsa.net](http://tsa.net)，发现它与 Timestamp Authorities 完全无关。它看起来像一个 Made For Adsense 页面，广告涉及航空公司行李规定和 TSA（运输安全管理局）。所以回答你的问题：你没有连接到真正的时间戳权威。

# java - 检查 JList 是否具有特定值

> ID：15792881
> 
> 赞同：3
> 
> 时间：2013-04-03T16:27:48.353
> 
> 标签：java, swing, if-statement, jlist

我想知道是否可以使用 if 语句检查 JList（或 JList 模型）的特定值。

我想使用`list.setSelectedValue()`突出显示当前值，但是如果该值不在 JList 中，则会引发错误，因此我想使用 if 来检查它是否在 JList 中。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T16:31:41.037

假设您在 JList 中使用[DefaultListModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListModel.html)，您可以使用[contains](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListModel.html#contains%28java.lang.Object%29)方法，如下所示：

```
DefaultListModel model = (DefaultListModel) list.getModel;
model.contains(theObject); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:31:55.700

```
 public static boolean hasElement(Object searched, JList list) {
      for (int a = 0; a < list.getModel().getSize(); a++) {
         Object element = list.getModel().getElementAt(a);
         if (element.equals(searched))  {
            return true;
         }
      }
      return false;
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:32:56.610

您可以使用[`JList#getNextMatch()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html#getNextMatch%28java.lang.String,%20int,%20javax.swing.text.Position.Bias%29)以下方法：

```
String s = "element";//Say you want to look up for String "element "
int index = list.getNextMatch(s,0,Position.Bias.Forward);
if (index != -1)
list.setSelectedValue(s,true); 
```

# django - 在 django 中创建自定义列表过滤器

> ID：15792884
> 
> 赞同：4
> 
> 时间：2013-04-03T16:27:57.873
> 
> 标签：django, django-admin-filters

我正在扩展 ListFilter 以在 Django 1.4 中为 Django Admin 创建一个自定义 ListFilter，但 django 会自动将我的查询字符串参数转换为 e=1。有什么办法可以告诉 Django 管理员允许某些参数；而不是将它们转换为 e=1。

这是我的自定义列表过滤器：

```
class DateRangeListFilter(ListFilter):
    """ Custom Date Range Filter using Jquery UI for date-picker """
    title = _('date range')
    template = 'admin/filter_date.html'

    parameters = ['class_after', 'class_before']
    parameter_friendly_names = {parameters[0]: 'Class After', parameters[1]: 'Class Before'}
    parameter_values = {}
    parameter_name = parameters[0]
    used_parameters = {parameters[0]: '', parameters[1]: ''}

    def __init__(self, request, params, model, model_admin):
        super(ListFilter, self).__init__()

        for parameter in self.parameters:
            value = request.GET.get(parameter, None)
            if value:
                self.parameter_values[parameter] = value

        self.lookup_choices = list(self.lookups())

    def has_output(self):
        return len(self.lookup_choices) > 0

    def lookups(self, *args):
        lookup_list = []
        for key in self.parameters:
            lookup_list.append((key, self.parameter_friendly_names[key]))
        return lookup_list

    def expected_parameters(self):
        return self.parameters

    def queryset(self, request, queryset):
        return queryset

    def choices(self, cl):
        for lookup, title in self.lookup_choices:
            param_name = title
            replace_text = 'gte_icdate' if title == self.parameters[0] else 'lte_icdate'
            value = self.parameter_values[lookup] if self.parameter_values.has_key(lookup) else ''
            yield {
                'param_name': param_name,
                'selected': True if lookup is not None else False,
                'query_string': cl.get_query_string({param_name: replace_text, }, []),
                'value': value,
                'display': title,
                'replace_text': replace_text,
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:12:28.197

Django 有时太神奇了。几乎可以肯定有一种正确的方法可以做到这一点，而我正在做的可能不是。但是我修改了我的**init**函数以从字典中删除我的特殊参数；因此 django 管理员忽略了它。

```
def __init__(self, request, params, model, model_admin):
    super(ListFilter, self).__init__()

    for param_key in self.parameters: 
        if param_key in params.keys():
            self.parameter_values[param_key] = params[param_key]
            del params[param_key]  # This is the anti-magic line
        else:
            self.parameter_values[param_key] = ''

    self.lookup_choices = list(self.lookups()) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-28T00:00:16.897

我确实看到了这种情况：看来您需要为视图保留一组“干净”的参数。我已经看到 pop() 被用作更有效的替代方案：

```
def __init__(self, request, params, model, model_admin):
    super(ListFilter, self).__init__()

    for param_key in self.parameters:
        self.parameter_values[param_key] = params.pop(param_key,'')

    self.lookup_choices = list(self.lookups()) 
```

# javascript - 在jQuery中有效地找到某个索引之前的所有孩子

> ID：15792885
> 
> 赞同：0
> 
> 时间：2013-04-03T16:27:58.287
> 
> 标签：javascript, jquery, optimization

*我正在遍历* jQuery 中的数据表，我需要对`td`每个`tr`. 目前，我正在使用以下结构来执行此操作：

```
$('#tableID').find('tr').each(function(){
    $(this).children('td').each(function(i){
        if(i < n){do_some_stuff_to(this)}
    }
} 
```

我担心的是，当表变大时，我可能会在遍历`td`行中的每个元素并运行 if 语句时遇到一些性能问题。也可能是这个 if 语句与运行相比并不花费大量时间`do_some_stuff`，但它仍然感觉很草率。

我想做的是将我的选择限制为索引小于*n*的所有孩子。类似于`:nth-children(n)`选择器的东西，但在我的 jQuery 选择器中也返回了索引之前的所有内容。有没有一种方法可以在不遍历每一行的每个孩子的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:29:31.550

那将是[**lt()**](http://api.jquery.com/lt-selector/)选择器（低于）：

```
$('#tableID tr td:lt(10)') 
```

> 选择索引小于匹配集中给定索引的所有元素。

# google-maps-api-3 - 谷歌地图 api v3 未加载

> ID：15792891
> 
> 赞同：2
> 
> 时间：2013-04-03T16:28:09.357
> 
> 标签：google-maps-api-3

我正在将谷歌地图 api 从 v2 升级到 v3。出于某种原因，我的地图将无法加载。我通过 api 和其他一些位置遵循了代码大纲。

这是我的代码：我是否正确放置了变量？有什么帮助吗？地图可以在[Casadragones找到](http://dev.casdragones.com)

```
var marker;
function load() {

  //get $result from browserdetect.php
    //if (GBrowserIsCompatible()) {
    // *** if (is_browser_compatible()){ ***
    geocoder = new google.maps.Geocoder();
    //geocoder = new GClientGeocoder();
    var mapOptions = {
    zoom: 2,         
    center: new google.maps.LatLng(40.513799, -35.375977),
    mapTypeControl: true,
    panControl: true;
    zoomControl: true; 
    mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    mapobj = new google.maps.Map(document.getElementById('map'), mapOptions); 
    /*
    mapobj = new GMap2(document.getElementById('map'));
    mapobj.addControl(new GLargeMapControl3D());
    mapobj.addControl(new GMapTypeControl());
    //mapobj.setCenter(new GLatLng(28.728149, -88.992889),3); // old
    mapobj.setCenter(new GLatLng(40.513799, -35.375977), 2); // center in Atlantic in order to show US and UK        
    */
         // Change this depending on the name of your PHP file
      /*GDownloadUrl("<? bloginfo('template_url'); ?>/phpsqlsearch_genxml.php", function(data) {
      var xml = GXml.parse(data);*/
      downloadUrl("<? bloginfo('template_url'); ?>/phpsqlsearch_genxml.php", function(data) {
      var xml = parseXml(data);
      var markers = xml.documentElement.getElementsByTagName('marker');

      for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var city = markers[i].getAttribute("city");
        var state = markers[i].getAttribute("state");
        var zipcode = markers[i].getAttribute("zipcode");
        var phone = markers[i].getAttribute("phone");
        var pairing = markers[i].getAttribute("pairing");
        var type = markers[i].getAttribute("type");
        var point = new google.maps.LatLng(parseFloat(markers[i].getAttribute("lat")),
                                parseFloat(markers[i].getAttribute("lng")));
        //var point = new GLatLng(parseFloat(markers[i].getAttribute("lat")),
        //                        parseFloat(markers[i].getAttribute("lng")));
        marker = createMarker(point, name, address, city, state, zipcode, phone, type);
        marker.setMap(mapobj); 
        //mapobj.addOverlay(marker);
      }
    });
  //}
} 
```

dom 事件和其他一切都在别处。我认为这是最麻烦的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:09:23.110

您的地图没有加载，因为您的代码都没有运行。仔细看看这些行：

```
var mapOptions = {
    zoom: 2,         
    center: new google.maps.LatLng(40.513799, -35.375977),
    mapTypeControl: true,
    panControl: true;
    zoomControl: true; 
    mapTypeId: google.maps.MapTypeId.ROADMAP
} 
```

你看到问题了吗？如果没有，请在 Chrome 中打开开发者工具，或在任何浏览器中打开类似的开发者工具，然后加载您的页面。您应该会收到一条指向问题的错误消息。

本身不是错误，但在此对象`;`关闭之后也应该有一个。`}`

此外，您缺少`var`一些变量的声明：`mapobj`例如`geocoder`。此外，`var marker`不属于此功能；把它移到里面。

你用什么编辑器来编辑你的代码？我推荐具有实时语法检查功能的编辑器，例如[Komodo Edit](http://www.activestate.com/komodo-edit)、[Komodo IDE](http://www.activestate.com/komodo-ide)或[IntelliJ IDEA](http://www.jetbrains.com/idea/)。当我将您的代码粘贴到 Komodo IDE 中时，它会立即在语法错误上加上波浪形的红色下划线。

# php - 将php函数分配给动态创建的对象

> ID：15792894
> 
> 赞同：0
> 
> 时间：2013-04-03T16:28:18.657
> 
> 标签：php, javascript, function, append, inheritance

我有一个 php 函数，它可以自动完成我网站的输入，我通过 jquery 调用它。

```
<script type="text/javascript">     
    jQuery(document).ready(function(){                      
        $('#concept_input').autocomplete({source:'search_Concept.php', minLength:1});   
    }); 
```

另一方面，我有一个 javascript 函数，它在原始输入下方添加了一个新输入。

```
function addRow(tableID) {

            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cell3 = row.insertCell(0);
            var element3 = document.createElement("input");
            element3.type = "text";
            element3.id = "concept_input"
            element3.name = "concept_input";

            cell3.appendChild(element3);
} 
```

我的问题是我找不到将 php 函数传递给使用 javascript 创建的新输入的方法，希望有人能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:28:22.773

ID 应该是唯一的。

我会这样做（我的更改在评论中注明）：

```
function addRow(tableID) {

        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        //determine the existing inputs with the name concept_input
        var inputs = $('input[name="concept_input"]')

        var cell3 = row.insertCell(0);
        var element3 = document.createElement("input");
        element3.type = "text";

        //give the item a unique ID
        element3.id = "concept_input_" + inputs.length  
        element3.name = "concept_input";

        cell3.appendChild(element3);

         //use jQuery to add the autocomplete, just like you do at document ready.
         $('#concept_input_' + inputs.length).autocomplete({source:'search_Concept.php', minLength:1});
} 
```

# php - 在哪里更改symfony中使用学说制作的模型的基类？

> ID：15792903
> 
> 赞同：0
> 
> 时间：2013-04-03T16:28:39.007
> 
> 标签：php, model, symfony-1.4

我正在使用 symfony 创建一个项目（第一个项目），我阅读了文档和所有内容，一切正常，我用学说创建了代表我的数据库的类，一切都很好，但是我需要更改表的一个字段，所以，我去了 symfony/lib/model/doctrine/base ，找到我的课程，我改变了它，完成了！工作正常。

问题是当我需要使用学说制作新模型时

```
php symfony doctrine:build-model 
```

它将我的旧模型带到旧版本，并且出现数百个错误，我认为还有其他文件要更改，但我不知道在哪里，有人可以帮助我吗？

我已经尝试过`php symfony cc`我正在使用 symfony 1.4

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:40:29.537

正如@denys281 所说，您不必触摸基类，因为每次重建模型时它们都会被覆盖。您已经测试过这个案例..

如果要更新数据库中的字段，您有 2 个选项：

1.  **你做出了改变**

    *   修改您`config/doctrine/schema.yml`以更新您想要的字段
    *   重建你的课程`php symfony doctrine:build --all-classes`
    *   **手动**更新数据库中的字段

***   让教义处理变化

    *   修改您`config/doctrine/schema.yml`以更新您想要的字段
    *   运行`php symfony doctrine:generate-migrations-diff`以在您以前的架构和新架构之间建立差异
    *   重建你的课程`php symfony doctrine:build --all-classes`
    *   使用迁移数据库`php symfony doctrine:migrate`**

 **您将在这个适用于 sf1.2 但适用于 sf1.4 的 capter中找到[有关迁移的更多信息。](http://symfony.com/legacy/doc/doctrine/1_2/en/07-Migrations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:38:08.610

不要改变基类！

你有**lib/model/doctrine**文件：

*   **Name.class.php**和
*   **名称表.class.php**。

在**Name.class.php 中**，您可以编写自定义 getter 和 setter，在**NameTable.class.php**中，您可以编写 DB 查询。

您可以阅读更多内容：[第 3 天：数据模型](http://symfony.com/legacy/doc/jobeet/1_4/en/03?orm=Propel)和[第 6 天：模型的更多信息](http://symfony.com/legacy/doc/jobeet/1_4/en/06?orm=Doctrine)**

# internet-explorer-10 - Plupload 文件上传在 IE10 中不起作用

> ID：15792905
> 
> 赞同：1
> 
> 时间：2013-04-03T16:28:39.640
> 
> 标签：internet-explorer-10, plupload

我有一个网站，用户可以上传他们的图片。我对 IE10 没有带文件上传文件夹感到震惊。我正在使用最新版本（v1.5.6）的 Plupload jquery 文件。它适用于 Firefix、Opera、Chrome 和 IE9，但不适用于 IE10。

单击“上传”按钮什么也不做。

有人可以指导我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T00:56:03.090

我在 IE10 中遇到了 plupload 1.5.x 的问题：如果在页面上方添加或删除行，浏览按钮将停止工作。这最终证明是因为 plupload html4 实现在某些平台上的工作方式：它实际上在浏览按钮上放置了一个隐藏组件，当我的页面发生更改时，隐藏组件仍然在旧像素位置，并且没有更长的按钮。

为了解决这个问题，我在调用plupload对象`mouseover`的浏览按钮中添加了一个处理程序；这会将隐藏的组件重新定位到浏览按钮的新位置，以便用户及时单击它。`.refresh()``Uploader`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T03:33:16.930

我遇到了类似的问题，发现在非常特定的条件下，我的 plupload 无法正常工作。

一种简单的方法来测试您是否处于与我相同的情况，然后使用 html5 运行时将不起作用（如您所述），但使用 flash 运行时将起作用。测试一下，如果是这样，请查看[此问题](https://github.com/moxiecode/plupload/issues/788)。

# list - Haskell-将两个列表放入一个元组列表中

> ID：15792912
> 
> 赞同：8
> 
> 时间：2013-04-03T16:28:49.220
> 
> 标签：list, haskell, tuples, infinite

我正在尝试实现一个函数（如下所述），它需要两个列表（每个或两个都可能是无限的）并返回列表之间所有可能元素对的元组列表

```
zipInf :: [a] -> [b] -> [(a,b)] 
```

（例如输出应该是这样的，但不必完全像这样）

```
zipInf [0 .. 2] ['A' .. 'C'] ~> [(0,'A'),(1,'A'),(0,'B'),(1,'B'),(0,'C'),(2,'A'),(2,'B'),(1,'C'),(2,'C')]

zipInf [] [0 ..] ~> []

zipInf [0 ..] [] ~> []

take 9 (zipInf ['A'] [0 .. ]) ~> [('A',0),('A',1),('A',2),('A',3),('A',4),('A',5),('A',6),('A',7),('A',8)] 
```

我已经开始像这样实现它：

```
zipInf :: [a] -> [b] -> [(a,b)]
zipInf [] _ = []
zipInf _ [] = []
zipInf 
```

我想将列表提供给辅助函数以生成列表，但我制作的列表无法编译并且不知道如何处理无限列表

辅助功能-

```
oneList :: [a] -> [b] [(a,b)]
oneList [] _ = []
oneList x:xs y:ys = [(x,y)] ++ oneList 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T17:01:17.657

这是一个很棒的练习！

如果我们将您的输入对布置在一个无限表中：

```
(0,A)  (1,A)  (2,A)  (3,A) ...
(0,B)  (1,B)  (2,B)  (3,B) ...
(0,C)  (1,C)  (2,C)  (3,C) ...
(0,D)  (1,D)  (2,D)  (3,D) ...
... 
```

诀窍是以向上的对角线横穿表格。用眼睛追踪桌子。这张表的条纹是：

```
(0,A)
(0,B) (1,A)
(0,C) (1,B) (2,A)
(0,D) (1,C) (2,B) (3,A)
... 
```

所有条纹都是有限的，但表格的每个元素都在其中一个中，因此如果将它们连接在一起，每个元素都将出现在连接结果中的有限位置。

这是我建议的游戏计划：

实现`stripes :: [[a]] -> [[a]]`从像上面这样的无限数组中提取条纹列表（首先假设所有列表都是无限的，即不要担心这种`[]`情况；一旦你有这个工作，更正它以在可能是有限的列表上工作）。

使用`stripes`, 实现`diagonal :: [[a]] -> [a]`连接所有条纹（这是单线）。

最后，通过应用`diagonal`特定的 2D table来实现您的功能`[[(a,b)]]`，这是我开始回答这个问题的表（并且可以使用嵌套列表理解以及其他各种方式构建）。

*笔记：*

*   名称 zip 具有误导性。这更像是一个笛卡尔积。

*   你知道你可以在模式中匹配模式，对吧？即如果`f :: [[a]] -> something`

    ```
    f ((x:xs):xss) = ... 
    ```

    给你`x`作为第一行的第一个元素，是第一行`xs`的其余部分，并且`xss`是表格的其余部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T16:52:58.120

这是您发布的辅助功能：

```
oneList :: [a] -> [b] [(a,b)]
oneList [] _ = []
oneList x:xs y:ys = [(x,y)] ++ oneList 
```

以下是它包含的语法错误：

*   您在类型注释中遗漏了一个箭头；它应该是

    ```
    oneList :: [a] -> [b] -> [(a,b)] 
    ```

*   你需要用括号括起来非平凡的模式，所以第二个等式应该开始

    ```
    oneList (x:xs) (y:ys) = 
    ```

*   `oneList`在返回列表之前接受两个参数，但是在第二个等式的 rhs 中，您尝试将其用作列表而不给它任何参数

（顺便说一句，如果您发布错误消息而不是仅仅说它无法编译，这通常会对我们有所帮助。将我在上面指出的错误与编译器给您的错误消息进行比较。）

* * *

但正如您所注意到的，您的算法是错误的。

我觉得这是作业，所以我只会给你一个提示。

`zipInf`应该

```
zipInf :: [a] -> [b] -> [(a,b)]
zipInf xs ys = thread (expand xs ys) 
```

`thread`并且`expand`是我要让你编写的两个辅助函数，带有类型签名

```
expand :: [a] -> [b] -> [[(a,b)]]
thread :: [[c]] -> [c] 
```

`expand`相当简单。`thread`是你必须小心以正确的顺序包含元素的地方（因此你不能只说`thread zs = concat zs`，即使类型是正确的）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-07T06:05:19.873

虽然这是一个很好的练习，可以帮助您理解列表和一般的 Haskell，但它也是一个很好的练习，可以帮助您了解`Applicative`课程的全部内容。特别`[]`是`Applicative`. 你`zipInf`想要的正是你`liftA2 (,)`

```
λ: :t liftA2
liftA2 :: Applicative f => (a -> b -> c) -> f a -> f b -> f c
λ: :t (,)
(,) :: a -> b -> (a, b)
λ: :t liftA2 (,)
liftA2 (,) :: Applicative f => f a -> f b -> f (a, b) 
```

我们只需要确保它`[]`是一个`Applicative`.

```
λ: :i []
...
instance Applicative [] -- Defined in `Control.Applicative'
... 
```

所以它是一个`Applicative`. 如果我们稍微注释一下我们的类型，可能会更容易理解

```
λ: :t liftA2 (,) `asAppliedTo` []
[a] -> [b] -> [(a, b)] 
```

是的，这是同一类型。

```
λ: liftA2 (,) [0..2] ['A'..'C']
[(0,'A'),(0,'B'),(0,'C'),(1,'A'),(1,'B'),(1,'C'),(2,'A'),(2,'B'),(2,'C')] 
```

看起来它有效！所以你不需要做任何事情来写这个，它可以说比递归定义更容易理解。此外，您不必像推出自己的解决方案时那样担心边缘情况。

您也可以使用`<$>`(or `fmap`) 和`<*>`.

```
λ: (,) <$> [0..2] <*> ['A'..'C']
[(0,'A'),(0,'B'),(0,'C'),(1,'A'),(1,'B'),(1,'C'),(2,'A'),(2,'B'),(2,'C')]
λ: take 9 $ (,) <$> "A" <*> [0..]
[('A',0),('A',1),('A',2),('A',3),('A',4),('A',5),('A',6),('A',7),('A',8)] 
```

或者您可以充分利用以下功能`Monad`（在这种情况下完全没有必要）：

```
λ: do {n <- [0..2]; c <- ['A'..'C']; return (n, c)}
[(0,'A'),(0,'B'),(0,'C'),(1,'A'),(1,'B'),(1,'C'),(2,'A'),(2,'B'),(2,'C')] 
```

此外，如果您想知道如何从`Applicative`for`[]`中获得不同的语义，至少还有一个其他 List 实例 for `Applicative`：`ZipList`

```
λ: :i ZipList
newtype ZipList a = ZipList {getZipList :: [a]}
    -- Defined in `Control.Applicative'
instance Functor ZipList -- Defined in `Control.Applicative'
instance Applicative ZipList -- Defined in `Control.Applicative' 
```

此实例为其实例提供压缩样式语义`Applicative`。

```
λ: getZipList $ (,) <$> ZipList [0..2] <*> ZipList ['A'..'C']
[(0,'A'),(1,'B'),(2,'C')] 
```

这两个都是对类型类的很好介绍`Applicative`，因为它们很容易获得，相当直观，有助于防止你犯错误，并表明在某些情况下单个类型具有多个类型类的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:52:47.400

您需要`oneList`申请`xs`和`ys`。

```
oneList :: [a] -> [b] -> [(a, b)]
oneList []     _      = []
oneList (x:xs) (y:ys) = (x, y) : oneList xs ys 
```

由于 Haskell 是惰性的，无限列表将自动工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T10:47:16.850

**重要提示：**请参阅下面 Will Ness 的评论。

您的问题意味着顺序无关紧要。（但由于列表可能是无限的，因此顺序可能比您想象的更重要！）无论如何，如果顺序无关紧要，并且您遇到了*列表推导*，那是您可以使用的一种方法。这是一个例子。

```
λ> let xs = "abcdef"
λ> let ys = "ABCDEFGHI"
λ> [(x,y) | x <- xs, y <- ys]
[('a','A'),('a','B'),('a','C'),('a','D'),('a','E'),('a','F'),('a','G'),('a','H'),('a','I'),('b','A'),('b','B'),('b','C'),('b','D'),('b','E'),('b','F'),('b','G'),('b','H'),('b','I'),('c','A'),('c','B'),('c','C'),('c','D'),('c','E'),('c','F'),('c','G'),('c','H'),('c','I'),('d','A'),('d','B'),('d','C'),('d','D'),('d','E'),('d','F'),('d','G'),('d','H'),('d','I'),('e','A'),('e','B'),('e','C'),('e','D'),('e','E'),('e','F'),('e','G'),('e','H'),('e','I'),('f','A'),('f','B'),('f','C'),('f','D'),('f','E'),('f','F'),('f','G'),('f','H'),('f','I')] 
```

请注意，`'a'`首先打印所有涉及的元组，然后是涉及的元组`'b'`，依此类推。为什么这很重要？好吧，假设列表是无限的。像这样的查询将立即返回：

```
(1,'a') `elem` [(x,y) | x <- [1..], y <- ['a'..]] 
```

但是像这样需要很长时间：

```
(200000,'a') `elem` [(x,y) | x <- [1..], y <- ['a'..]] 
```

如果顺序很重要，或者您还没有遇到列表推导，或者不想使用它们，那么 luqui 的方法可能就是您正在寻找的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-31T12:28:38.230

您可以通过使用列表推导非常简单地做到这一点。

```
zip :: [a] -> [b] -> [(a,b)]
zip [] _ = [] 
zip _ [] = []
zip as bs = [(a, b) | a <- as, b <- bs] 
```

它适用于有限列表和无限列表。当然，您希望其中至少有一个是有限的，或者它只是`head as`和的所有组合`bs`。

```
> zip [0..2] ['A'..'C']
[(0,'A'),(0,'B'),(0,'C'),(1,'A'),(1,'B'),(1,'C'),(2,'A'),(2,'B'),(2,'C')]

> take 50 $ zip [0..] ['A'..'C']
[(0,'A'),(0,'B'),(0,'C'),(1,'A'),(1,'B'),(1,'C'),(2,'A'),(2,'B'),(2,'C'),(3,'A'),(3,'B'),(3,'C'),(4,'A'),(4,'B'),(4,'C'),(5,'A'),(5,'B'),(5,'C'),(6,'A'),(6,'B'),(6,'C'),(7,'A'),(7,'B'),(7,'C'),(8,'A'),(8,'B'),(8,'C'),(9,'A'),(9,'B'),(9,'C'),(10,'A'),(10,'B'),(10,'C'),(11,'A'),(11,'B'),(11,'C'),(12,'A'),(12,'B'),(12,'C'),(13,'A'),(13,'B'),(13,'C'),(14,'A'),(14,'B'),(14,'C'),(15,'A'),(15,'B'),(15,'C'),(16,'A'),(16,'B')]

> take 50 $ zip [0..] [1..]
[(0,1),(0,2),(0,3),(0,4),(0,5),(0,6),(0,7),(0,8),(0,9),(0,10),(0,11),(0,12),(0,13),(0,14),(0,15),(0,16),(0,17),(0,18),(0,19),(0,20),(0,21),(0,22),(0,23),(0,24),(0,25),(0,26),(0,27),(0,28),(0,29),(0,30),(0,31),(0,32),(0,33),(0,34),(0,35),(0,36),(0,37),(0,38),(0,39),(0,40),(0,41),(0,42),(0,43),(0,44),(0,45),(0,46),(0,47),(0,48),(0,49),(0,50)] 
```

# node.js - Express 未知错误处理程序正在记录自定义错误

> ID：15792913
> 
> 赞同：0
> 
> 时间：2013-04-03T16:28:50.890
> 
> 标签：node.js, error-handling, express

我的快速应用程序中有一个自定义错误处理程序。配置：

```
app.use(Routes.error);
app.use(express.static(__dirname + '/assets'));
app.use(express.cookieParser(config.app.sessionSecret));
app.use(express.bodyParser());
app.use(express.session({
    cookie: {
        maxAge: 60000
    }
}));
app.use(flashify);
app.use(expressValidator);
app.use(app.router); 
```

错误路由器：

```
error: function(err, req, res, next) {
    res.render('error.jade', {
        error: err.message
    }, function(renderError, html) {
        if (renderError) {
            res.send(500, 'Error while displaying the error template!');
        } else {
            res.send(err.code, html);
        }
    });
}, 
```

我遇到的问题是控制台中记录了一条自定义错误消息：

```
//In the route
next(new NotFoundError('Could not find the template!'));

//Custom error
var NotFoundError = function(message) {
this.code = 404;
this.message = message;
};

util.inherits(NotFoundError, Error);
NotFoundError.name = 'NotFoundError'; 
```

这在单元测试期间非常令人不安：

```
✔ server - testTemplateCreate
Error: Could not find the template!
✔ server - testTemplateEdit 
```

找不到模板是正确的，但我不希望显示消息。我想，如果您提供自定义错误路由，则不会使用本机错误函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:55:37.370

安装中间件的顺序很重要。

您在顶部声明您的错误处理程序，这意味着其声明之后的任何中间件和路由都*不会*被它处理。相反，将您的错误处理程序移动到路由器之后：

```
...
app.use(app.router);
app.use(Routes.error); 
```

# javascript - 调整和定位 Twitter 洞察分享弹出窗口

> ID：15792917
> 
> 赞同：2
> 
> 时间：2013-04-03T16:29:00.243
> 
> 标签：javascript, jquery, twitter

当弹出 twitter“tweet”窗口时，它位于父窗口的左侧，并且在其下方有大量空间。我已经浏览了文档，但没有找到有关如何调整窗口大小和位置的任何信息。任何建议或帮助将不胜感激。

![在此处输入图像描述](https://i.stack.imgur.com/4HVrR.png)

异步加载 Twitter SDK 源

```
window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f); } });
}(document, "script", "twitter-wjs")); 
```

点击事件

```
$('.twitter').click(function(e){

    e.preventDefault();

    $(this).attr('href', 'https://twitter.com/intent/tweet');

    twttr.events.bind('tweet', function(event) {
        alert('tweet');
    });

}); 
```

关联

```
<a href="#" class="share twitter"></a> 
```

# linux - 自动回答交互式 shell 提示（是/否）

> ID：15792925
> 
> 赞同：1
> 
> 时间：2013-04-03T16:29:22.593
> 
> 标签：linux, bash, shell, command-prompt, prompt

我运行一个 bash 脚本。执行几分钟后，它会提示我输入“Y”或“N”以继续。几分钟后，它会再次提示我几次。

如果我知道正确答案的数量和顺序（例如 Y、N、N、N），是否可以自动回答共同的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:32:57.230

试试这里的文档：

```
bashscript.shl [options] <<-END
Y
Y
Y
N
END 
```

输入您想要的任何类型的答案、密码等。不适用于 ssh 或 sftp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:13:14.053

在这种情况下使用的[***Expect***](http://expect.sourceforge.net/)工具。它对于自动化与 CLI 应用程序的交互很有用（[维基百科上的 Expect](http://en.wikipedia.org/wiki/Expect)）。

# xcode - Sin(int) 在 Xcode 调试器 (lldb) 中被破坏

> ID：15792926
> 
> 赞同：4
> 
> 时间：2013-04-03T16:29:23.390
> 
> 标签：xcode, debugging, lldb

我有一个针对 iOS SDK 6.1 的通用 iOS 应用程序，编译器设置为**Apple LLVM compiler 4.2**。当我在我的代码中放置一个断点并运行以下命令时，我得到了奇怪的结果`sin(int)`。

作为参考，`sin(70)`= `0.7739`（70 以弧度为单位）。

```
(lldb) p (double)sin(70)
(double) $0 = -0.912706376367676 // initial value
(lldb) p (double)sin(1.0)
(double) $1 = 0.841470984807897 // reset the value sin(int) will return
(lldb) p (double)sin(70)
(double) $2 = 0.841470984807905 // returned same as sin(1.0)
(lldb) p (double)sin(70.0)
(double) $3 = 0.773890681557889 // reset the value sin(int) will return
(lldb) p (double)sin(70)
(double) $4 = 0.773890681558519
(lldb) p (double)sin((float)60)
(double) $5 = -0.304810621102217 // casting works the same as appending a ".0"
(lldb) p (double)sin(70)
(double) $6 = -0.30481062110269
(lldb) p (double)sin(1) 
(double) $7 = -0.304810621102223 // every sin(int) behaves the same way 
```

观察：

*   调试会话中的第一个值`sin(int)`始终是`-0.912706376367676`。
*   `sin(int)`将始终返回与上次执行时返回的值相同的值`sin(float)`。
*   如果我`p`用`po`, 或`expr`(例如 expr (double)sin(70)) 替换，我会得到完全相同的结果。

为什么调试器会这样？

这是否意味着每次调用函数时都应该对每个参数进行类型转换？

NSLog 的一些更有趣的行为：

```
(lldb) expr (void)NSLog(@"%f", (float)sin(70))
0.000000 // new initial value
(lldb) expr (void)NSLog(@"%f", (float)sin(70.0))
0.773891
(lldb) expr (void)NSLog(@"%f", (float)sin(70))
0.000000 // does not return the previous sin(float) value
(lldb) p (double)sin(70)
(double) $0 = 1.48539705402154e-312 // sin(int) affected by sin(float) differently
(lldb) p (double)sin(70.0)
(double) $1 = 0.773890681557889
(lldb) expr (void)NSLog(@"%f", (float)sin(70))
0.000000 // not affected by sin(float) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T19:53:17.713

您正在走进 C 语言默认参数提升的美妙世界。记住，lldb 不知道参数类型或返回类型`sin()`是什么。正确的原型是`double sin (double)`. 当你写

```
(lldb) p (float) sin(70) 
```

这有两个问题。首先，您提供一个整数参数，C 默认提升规则将把它作为`int`一个 4 字节值传递给相关架构。 `double`，除了是 8 字节之外，是一种完全不同的编码。`sin`垃圾输入也是如此。其次，在这些架构上`sin()`返回一个`double`或 8 字节的值，但您告诉 lldb 获取其中的 4 个字节并做一些有意义的事情。如果你调用`p (float)sin((double)70)`了（所以只有返回类型不正确）lldb 会打印一个无意义的值，比如 9.40965e+21 而不是 0.773891。

当你写

```
(lldb) p (double) sin(70.0) 
```

你修正了这些错误。浮点类型的默认 C 提升是将其作为`double`. 如果您正在调用`sinf()`，您会遇到问题，因为该函数只需要一个`float`.

如果您想为 lldb 提供适当的原型`sin()`而不担心这些问题，这很容易。将此添加到您的`~/.lldbinit`文件中，

```
settings set target.expr-prefix ~/lldb/prefix.h 
```

（我有一个`~/lldb`目录，用于存储有用的 python 文件和类似的东西）`~/lldb/prefix.h`并将读取

```
extern "C" {
int strcmp (const char *, const char *);
void printf (const char *, ...);
double sin(double);
} 
```

（你可以看到我的前缀文件中也有原型，`strcmp()`所以`printf()`我不需要强制转换这些。）你不想在这里放太多东西——这个文件被添加到你在 lldb 中评估的每个表达式之前如果你把所有的原型都`/usr/include`放在那里，它会减慢你的表达式评估。

将该原型添加到我的`target.expr-prefix`设置中：

```
(lldb) p sin(70)
(double) $0 = 0.773890681557889 
```

# magento - Magento 数据模型 - “一个或多个图像”字段

> ID：15792927
> 
> 赞同：0
> 
> 时间：2013-04-03T16:29:24.660
> 
> 标签：magento, model

我在 Magento 中创建了一个自定义扩展。

我希望能够将一个或多个图像附加到一个项目。笨重的方法是添加一堆图像字段并忽略空的，但这显然是有限的而且不是很整洁。

问题 1) 这种技术有通用术语吗？我已经尝试在谷歌上搜索解决方案，但没有找到一种不会带来一堆不相关的东西的方法来表达它。

问题 2）有没有办法简单地在 Magento 中做到这一点，还是我必须自己动手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:21:36.187

我想你需要自己的。也许您应该只创建存储图像名称列表和排序顺序以及当前模型的外键的模型。那么您可以只拥有由当前模型的 id 加载的图像集合，并使用 order by 子句进行排序。
只需使用这些方法

```
$collection->addAttributeToFilter('foreign_key_column', array('eq' => $foreignKey))
           ->setOrder('sort_order'); 
```

# haskell - 合并和拆分如何不在范围内？（哈斯克尔）

> ID：15792934
> 
> 赞同：1
> 
> 时间：2013-04-03T16:29:35.253
> 
> 标签：haskell, merge, split

我试图编写一个用于对整数列表进行排序的代码，但是我从终端收到一条错误消息，代码和错误如下所示：

```
-- sort
type Element = Int
merge_sort :: [Element] -> [Element]
merge_sort list = case list of
  [] -> []
  [x] -> [x]
  _  -> merge (merge_sort(list_left)) (merge_sort(list_right))
     where (list_left, list_right) = split list 
```

我收到以下错误：

```
[1 of 1] Compiling Main             ( recursion test.hs, interpreted )

recursion test.hs:7:9: Not in scope: `merge'

recursion test.hs:8:42: Not in scope: `split'
Failed, modules loaded: none.
Prelude> 
```

谁喜欢告诉我我的代码有什么问题？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T21:35:17.780

*我只是将一些评论放在答案中，以便可以将这个问题标记为已回答。*

`merge`在 Prelude 中没有定义，但你可以用

```
import Data.List.Utils (merge) 
```

`split`没有定义，但不要害怕：

```
split ls = splitAt (length ls `div` 2) ls 
```

这需要你

```
import Data.List 
```

Haskell 在其标准库中有很多这样的函数。它们不是“内置的”*，但可以使用。如果你想找到一个，我会使用[hoogle](http://www.haskell.org/hoogle/)。

** 现在大多数语言都是这样的，Haskell 在这里并不是独一无二的。

# mysql - Mysql -> 在输出中加入两行

> ID：15792936
> 
> 赞同：0
> 
> 时间：2013-04-03T16:29:39.333
> 
> 标签：mysql

我的表由以下组成

```
Country   | Type     |   A   |   B   |   C   |   D   | cType
------------------------------------------------------------------
Italy     | Foreign  |       |       |   C   |   D   | Commercial  
Italy     | Foreign  |   A   |   B   |       |       | Commercial
Italy     | Local    |       |       |   C   |   D   | Gov
Italy     | Local    |   A   |   B   |       |       | Gov 
```

我想做一个查询，输出如下所示的结果，使用类型

```
Italy   | Foreign  |   A   |   B   |   C   |   D   | Commercial
Italy   | Local    |   A   |   B   |   C   |   D   | GOV 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:39:39.540

```
select country, type, max(A), max(B), max(C), max(D), cType
from whatever_table
group by country, type, cType 
```

# css - 使用 Moovweb SDK 时如何强制我的资产重新编译？

> ID：15792941
> 
> 赞同：2
> 
> 时间：2013-04-03T16:29:53.850
> 
> 标签：css, sass, assets, moovweb

我有一个本地服务器正在运行，我正在更改样式表目录中的 .scss 文件。我正在我的浏览器中进行硬刷新，但我的更改没有显示出来。

我知道 Moovweb 使用 Sass - 所以 CSS 样式表被编译。有什么办法可以**强制**Moovweb SDK 重新生成 CSS 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T18:49:05.343

Moovweb SDK 生成的 CSS 文件位于该`assets/stylesheets/.css`文件夹中。

顺便说一句，这是一个隐藏文件夹，因此要查看它，请键入：

```
$> ls -a
.  ..  .css  globals  main.scss  pages  sections 
```

您可以通过删除此文件夹来强制重新生成 CSS 文件`.css`。

```
$> rm -rf .css/ 
```

* * *

不过，您确实不需要这样做。Sass 编译器通常会确保`.css`文件夹是最新的。

# c - 从二进制文件中读取并复制到数组中

> ID：15792944
> 
> 赞同：0
> 
> 时间：2013-04-03T16:29:55.693
> 
> 标签：c, arrays, fread, strcpy

它的时间结束了，但无论如何我想完成这个问题。我想将二进制文件读取到缓冲区，然后我想将此缓冲区复制到数组。我正在这样做；

```
int i=0;
char *buffer;

buffer=(char *)malloc(filelen+1);  //filelen is length of binary file

while()
{
fread(buffer,100,1,filepointer);   //filepointer is input binary file pointer,i wanna read 100 byte
strcpy(tup[i],buffer); //tup[] is char array.i want copy buffer to in this array 
i++;
} 
```

我在 strcpy 行遇到错误，您无法将指针复制到类似的整数。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:37:58.033

我想你想写：

```
strcpy(&tup[i],buffer); 
```

然而，还有许多其他问题。

1.  你怎么知道 tup 和 buffer 是空终止的。缓冲区不太可能为空终止。因此，您应该`memcpy`（使用已知的计算长度）
2.  你确定不可能覆盖 then end of`tup`吗？
3.  由于您的临时缓冲区一次只能读取 100 个字节，因此您不需要分配内存的完整文件大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:33:54.180

一定是：

```
strcpy(tup,buffer); 
```

如果 tup 是`char* tup`.

您也可以`buffer[filelen]=0;`在`malloc()`为 分配内存后使用`buffer`，这将负责`'\0'`终止。

# wordpress - Wordpress - 连接到保存帖子数据

> ID：15792948
> 
> 赞同：0
> 
> 时间：2013-04-03T16:30:01.560
> 
> 标签：wordpress

如果发布自定义字段设置为 true，则这段代码应该设置发布数据，或者如果不是，则将发布状态设置为草稿。该动作需要在`post_save`/`post_updated`动作之后调用，因此我们的一所大学向我建议了这种方式（老问题：[wordpress 在 'save_post' 动作中将 post_status 设置为“草稿”](https://stackoverflow.com/questions/15784061/wordpress-set-post-status-as-draft-in-save-post-action)）：

```
add_filter( 'wp_insert_post_data', 'set_post_parameters', 99, 2 );
function set_post_parameters( $data, $postarr ) {
    if ( get_post_meta( $postarr['ID'], '_cs_tweet_ok_status', true ) == 'true' ) {
        $data['post_date']      = get_post_meta( $postarr['ID'], '_cs_system_tweet_date', true );   
        $data['post_date_gmt']  = get_gmt_from_date( get_post_meta( $postarr['ID'], '_cs_system_tweet_date', true ) );
    } else {
        $data['post_status'] = 'draft';
    }
    return $data;
} 
```

它会做它应该做的 - 它将发布日期设置为提供自定义字段（之前保存）的日期或将帖子设置为草稿。唯一的事情是，它在`post-new.php`被调用时也会被触发，那些创建无法删除的“空”帖子（以防用户没有填写所有数据并且没有正确保存帖子）。我应该如何在该函数中创建一个“检查”，以便它仅在保存或更新帖子时运行？

我在设置`post_data`功能方面也有一个小问题：

```
add_action( 'save_post', 'cs_twitter_save_meta' );
function cs_twitter_save_meta( $post_id ) {
    if ( isset($_POST['post_type']) && 'tweets' == $_POST['post_type'] ) :
        if ( isset($_POST['post_title']) ) :
            $url = 'https://api.twitter.com/1/statuses/show.json?id='.$_POST['post_title'];
            $json = @file_get_contents($url,0,null,null);
            if ( $json != false ) {
                $json_output = json_decode($json);
                $post_date = date('c', strtotime($json_output->created_at));
                $post_save_date = date('G:i - d M y', strtotime($json_output->created_at));
                update_post_meta( $post_id, '_cs_tweet_content', $json_output->text  );
                update_post_meta( $post_id, '_cs_tweet_date', $post_save_date  );
                update_post_meta( $post_id, '_cs_system_tweet_date', $post_date  );
                update_post_meta( $post_id, '_cs_tweet_user', $json_output->user->screen_name );
                update_post_meta( $post_id, '_cs_tweet_ok_status', 'true' );
            } else {
                update_post_meta( $post_id, '_cs_tweet_content', 'There is an error with tweet Api. Too many connections in one hour. Try again after 60 minutes' );
                update_post_meta( $post_id, '_cs_tweet_ok_status', 'false'  );
            }
        endif;
    endif;
} 
```

首次保存时出现问题。似乎`add_filter( 'wp_insert_post_data', 'set_post_parameters', 99, 2 );`首先触发，没有看到 custom_meta 并将 post_status 设置为草稿。然后`add_action( 'save_post', 'cs_twitter_save_meta' );`触发，但第一个脚本已经为时已晚。

所以另一个问题 - 我应该如何解决这种情况，所以首先正确设置所有数据： 1\. 用户创建新的 custom_post_type。2\. 输入推文id 导入，推送发布。3\. 脚本检查它是否可以从 twitter api 获取数据 4\. 如果可以，它会获取所有必要的数据，发布帖子并将其发布日期设置为推文的发布日期。5\. 如果没有，它会显示有关错误的信息并设置`post_status`为草稿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:39:27.673

您可以尝试阻止该功能运行，除非您明确点击保存。

在函数的开头添加以下代码段：

```
// Autosave
if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) 
        return;
// AJAX
if ( defined( 'DOING_AJAX' ) && DOING_AJAX ) 
        return;
// Post revision
if ( false !== wp_is_post_revision( $post_id ) )
        return; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:17:23.230

这应该可以解决您的问题。而不是使用`wp_insert_post_data`钩子，仅使用`save_post`并使用 $wpdb 来更改数据库条目。

```
add_action( 'save_post', 'cs_twitter_save_meta' );
function cs_twitter_save_meta( $post_id ) {
    if ( isset($_POST['post_type']) && 'tweets' == $_POST['post_type'] ) :
        if ( isset($_POST['post_title']) ) :
            $url = 'https://api.twitter.com/1/statuses/show.json?id='.$_POST['post_title'];
            $json = @file_get_contents($url,0,null,null);
            if ( $json != false ) {
                $json_output = json_decode($json);
                $post_date = date('Y-m-d H:i:s', strtotime($json_output->created_at));
                $post_date_gmt = get_gmt_from_date( $post_date );
                $post_save_date = date('G:i - d M y', strtotime($json_output->created_at));
                update_post_meta( $post_id, '_cs_tweet_content', $json_output->text  );
                update_post_meta( $post_id, '_cs_tweet_date', $post_save_date  );
                update_post_meta( $post_id, '_cs_system_tweet_date', $post_date  );
                update_post_meta( $post_id, '_cs_tweet_user', $json_output->user->screen_name );
                update_post_meta( $post_id, '_cs_tweet_ok_status', 'true' );
                global $wpdb;
                $wpdb->query( $wpdb->prepare("UPDATE $wpdb->posts SET post_date = '$post_date', post_date_gmt = '$post_date_gmt' WHERE id = $post_id", $post_id ));
            } else {
                update_post_meta( $post_id, '_cs_tweet_content', 'There is an error with tweet Api. Too many connections in one hour. Try again after 60 minutes' );
                update_post_meta( $post_id, '_cs_tweet_ok_status', 'false'  );
                global $wpdb;
                $wpdb->query( $wpdb->prepare("UPDATE $wpdb->posts SET post_status = 'draft' WHERE id = $post_id", $post_id ));
            }
        endif;
    endif;
} 
```

# mysql - 将mysql表导出为csv后，部分数据格式发生变化

> ID：15792949
> 
> 赞同：0
> 
> 时间：2013-04-03T16:30:01.757
> 
> 标签：mysql, excel

我在 mysql 表列中，该列的类型是 varchar，在他保存的文本数据中如下所示：

```
 4/5
 4/5
 2/3 
```

好的，我想将此表导出为`csv`格式，但是导出后，当我在 excel 中打开此 csv 时，数据`4/5`将转换为`04.05.2013`.

我需要在导出后，这样的数据`4/5`保持不变， `4/5`而不是改变另一种格式，如何制作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:35:12.287

该值的显示方式取决于操作系统的区域设置。（例如，对于 Windows 7，请参阅区域和语言）。在其他设置中，还有指定的 CSV 分隔符（列表分隔符）等。这些设置是全局的（用于系统）。例如，MS Excel 使用它们。无法强制 Excel 以您想要的方式显示 CSV 值。您不应该更改这些系统设置。它们只是为您提供很好的参考，为什么您的值以它们的显示方式显示。

# salt-stack - 如何通过盐栈中的 publish.runner 模块识别启动 runner 模块的主机？

> ID：15792952
> 
> 赞同：2
> 
> 时间：2013-04-03T16:30:11.897
> 
> 标签：salt-stack

我想使用 peer_run 配置选项和 publish.runner 模块从一个 minion 在 salt master 上启动一个 runner 模块。来自 minion 的命令如下所示：

```
#> salt-call publish.runner manage.up 
```

这工作正常。

我现在正在尝试编写一个模块，该模块使用启动跑步者的仆从的主机名。我没有找到任何相关文件，所以我问：

如何在 runner 模块中获取通过 publish.runner 启动运行器的 minion 的主机名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:40:53.443

通过转储所有变量（pprint.pformat（globals（））自己找到它：

它在全局 __opts__ 字典中。我现在使用这个小功能来获取它：

```
def get_caller_hostname():
    return __opts__["id"] 
```

# angularjs - 在 AngularJS 和 ng-grid 中自动完成

> ID：15792967
> 
> 赞同：2
> 
> 时间：2013-04-03T16:30:55.340
> 
> 标签：angularjs, ng-grid

此参考有助于使用 tag 制作指令“自动完成”。[jQuery 自动完成 + AngularJS 的问题](https://stackoverflow.com/questions/12959516/problems-with-jquery-autocomplete-angularjs/15792437?noredirect=1#comment22454828_15792437)

但是，我有以下问题：

我知道为了在自动完成列表中选择后处理事件，应该使用 jqueryUI 提供的事件处理程序。

```
...
     link: function(scope, elem, attr, ctrl) {
                elem.autocomplete({
                        source: datasource,
                        select: function( event, ui ) {
                             console.log(ui.item.value); 
                             console.log(attrs.ngModel);
                             //but how can I change the value of this ngModel in scope?
                        }

                    });
     }; 
```

但是，在指令中，我如何影响该 ngModel 的值？我可以使用 attrs.ngModel 获取该 ngModel 的名称。（知道**ng-model 的名称是动态的**，我可以使用 ui.item.value 获取该值）

有人知道吗？非常感谢提前！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:56:28.333

不确定您是否已经在指令中定义了范围，但这是一个示例：

```
myApp.directive("myDirective", function() {
  return {
    restrict: 'A',
    require: 'ngModel',
    scope: {
      ngModel: '='
    },
    link: function(scope, element, attrs) {
      // monitor plugin and set value to ngModel
      element.plugin({
        onChange: function(newValue) {
          scope.$apply(function() {
            scope.ngModel = newValue;
          });
        }
      });

      // monitor ngModel and set new value to element/plugin
      scope.$watch('ngModel', function(newValue, oldValue) {
        element.val(newValue);
      });
    }
  };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T22:25:50.073

好的，在玩了这个例子几个小时之后（我只是在学习角度），我认为设置你需要的值如下：

```
ngModel.$setViewValue(elm.val()); 
```

特别是您的代码应如下所示：

```
require: 'ngModel',
 link: function(scope, elem, attr, ctrl) {
            elem.autocomplete({
                    source: datasource,
                    select: function( event, ui ) {
                         console.log(ui.item.value); 
                         console.log(attrs.ngModel);

                         ctrl.$setViewValue(elem.val());

                         //but how can I change the value of this ngModel in scope?
                    }

                });
 }; 
```

所以我测试了它的工作原理。

# c# - 如何将其转换为字典的字典

> ID：15792968
> 
> 赞同：2
> 
> 时间：2013-04-03T16:31:01.583
> 
> 标签：c#, linq, dictionary, lambda, group-by

我如何将其更改为：`Dictionary<string, Dictionary<DateTime, double>>`

```
var data = segGroups.Join(pPeriods, s => s.segid, p => p.entid, (s, p) => new
            {
                Name = s.SegCode, // string
                Time = p.StartLocal, // datetime
                TR = p.Volume // double
            })
            .GroupBy(s => s.Name)
            .ToList(); 
```

字符串将是`Name`，内部字典将是`DateTime`and`TR`对。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:33:33.717

```
var dictionary = data.ToDictionary(group => group.Key, 
    group => group.ToDictionary(item => item.Time, item => item.TR)); 
```

请注意，这里没有进行*铸造*。铸造是将某物视为另一物，而不改变它的真正本质。这是通过创建一个完全基于其他值的全新对象将列表转换为字典*。*这是一个重要的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:51:33.253

除非您真的在其他地方使用该列表，否则`ToList()`您不必打电话：`ToDictionary`

```
var data = segGroups.Join(pPeriods, s => s.segid, p => p.entid, (s, p) => new
                    {
                        Name = s.SegCode, // string
                        Time = p.StartLocal, // datetime
                        TR = p.Volume // double
                    })
                    .GroupBy(s => s.Name)
                    .ToDictionary(g => g.Key, g => g.ToDictionary(i => i.Time, i => i.TR)); 
```

`data`将被输入`Dictionary<string, Dictionary<DateTime, double>>`.

您还必须确保`Time`在每个组中都是独一无二的。`ArgumentException`否则将被抛出，因为其中的两个项目`Dictionary`不能具有相同的`Key`.

# vb.net - 使用 Word vba 脚本关闭特定窗口

> ID：15792975
> 
> 赞同：1
> 
> 时间：2013-04-03T16:31:13.367
> 
> 标签：vb.net, vba, ms-word, window

我创建了这段vb代码，提示用word打开一个特定的文件，修改它，然后将它保存到一个特定的位置。我希望能够在完成后关闭两个窗口，即单词宏文件窗口和保存的文档窗口。

```
Private Sub Document_Open()

adresse_debut = ActiveDocument.Path

    With Application.FileDialog(msoFileDialogOpen)
        .AllowMultiSelect = False

        .InitialView = msoFileDialogViewDetails
        .Title = "Select Text File"
        .InitialFileName = adresse_debut
        .Show

        If .SelectedItems.Count = 1 Then
            bingo = .SelectedItems(1)
        Else
            MsgBox ("Error")
         Exit Sub
        End If
    End With

Documents.Open FileName:=bingo

adresse = ActiveDocument.Path & "\"
Nom = ActiveDocument.Name
Nom = Left(Nom, Len(Nom) - 4) & "_Ready.txt"

Selection.TypeParagraph
Selection.TypeText Text:="hello"

ActiveDocument.SaveAs FileName:=adresse & Nom, FileFormat:=wdFormatText

ActiveWindow.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:40:18.997

不要使用`ActiveWindow`/ `ActiveDocument`，而是创建相关对象并使用它们。请参阅此示例。

```
Private Sub Document_Open()
    Dim Doc1 As Document, Doc2 As Document

    Set Doc1 = ActiveDocument

    adresse_debut = Doc1.Path

    With Application.FileDialog(msoFileDialogOpen)
        .AllowMultiSelect = False

        .InitialView = msoFileDialogViewDetails
        .Title = "Select Text File"
        .InitialFileName = adresse_debut
        .Show

        If .SelectedItems.Count = 1 Then
            bingo = .SelectedItems(1)
        Else
            MsgBox ("Error")
            Exit Sub
        End If
    End With

    Set Doc2 = Documents.Open(FileName:=bingo)

    adresse = Doc2.Path & "\"
    Nom = Doc2.Name
    Nom = Left(Nom, Len(Nom) - 4) & "_Ready.txt"

    Selection.TypeParagraph
    Selection.TypeText Text:="hello"

    Doc2.SaveAs FileName:=adresse & Nom, FileFormat:=wdFormatText

    Doc2.Close SaveChanges:=False
    Doc1.Close SaveChanges:=False
End Sub 
```

# php - 用php获取动态输入值

> ID：15792976
> 
> 赞同：-1
> 
> 时间：2013-04-03T16:31:17.040
> 
> 标签：php

我需要在每个链接上创建包含具有不同名称的隐藏输入的链接。

```
 <?php
    $inputCounter=0;
    .. do while... 
    {
        $inputCounter++; ?>
        <a href="read.php">
            <input hidden name="rec<?php echo $inputCounter ;?>" 
                     value="<?php echo $id' ;?>"/>
            read    
        </a> 
    <?php } ?> 
```

如何获取 read.php 中的输入值？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:34:33.883

不要将输入放置在锚标记中。使用查询字符串传递值。

```
<a href="read.php?name=rec<?=$inputCounter?>&value=<?=$id?>">read</a> 
```

然后`read.php`，使用 . 读取您的数据[`$_GET`](http://php.net/manual/en/reserved.variables.get.php)。

```
$name = $_GET['name'] // gives you the name
$value = $_GET['value'] // gives you the value 
```

要回显该值，只需执行

```
echo $value; 
```

# core-data - 使用多个 NSManagedObjectContexts 和关系时的困惑

> ID：15792977
> 
> 赞同：1
> 
> 时间：2013-04-03T16:31:17.653
> 
> 标签：core-data, nsmanagedobjectcontext

我正在使用四个 NSManagedObjectContexts 来管理从存储在服务器上的源中检索到的数据的插入和删除。MOC 之间的关系设置如下。

```
_masterManagedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
 [_masterManagedObjectContext setPersistentStoreCoordinator:_psc];

_mainManagedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:initWithConcurrencyType:NSMainQueueConcurrencyType];
 [_mainManagedObjectContext setParentContext:self.masterManagedObjectContext];

 _insertionContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[_insertionContext setParentContext:self.mainManagedObjectContext];

_cacheContext = _insertionContext; 
```

如您所见，masterMOC 链接到persistantStoreCordinator 并处理数据的持久性。mainMOC 与 masterMOC 有父关系，用于为 UI 上的 FRC 提供数据，并帮助 FRC 代理监控刷新数据所做的更改。insertMOC 与 mainMOC 具有父关系，并使用 NSOperation 在单独的线程上创建，并已在 main 方法调用中实例化。cacheMOC 从插入类传递insertionMOC 以继承其属性。我已经按照上面的广告进行了所有这些工作，但是……在刷新数据时，我的应用程序崩溃了。

我看到这个问题的方式是，在插入MOC 删除它们之后，上下文之间存在一些混淆，即正确的 ManagedObjectID 集是什么。

这就是我删除旧 ManagedObjects 的方式

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:[NSEntityDescription entityForName:@"Event" inManagedObjectContext:_insertionContext]];
[fetchRequest setIncludesPropertyValues:NO];
NSError *error;
NSArray *array = [NSArray array];
array = [_insertionContext executeFetchRequest:fetchRequest error:&error];
[self.insertionContext obtainPermanentIDsForObjects:array error:&error];

if (array.count >0 && [self.kEntity isEqualToString:@"Event"]) {
     [array enumerateObjectsUsingBlock:^(Event *obj, NSUInteger idx, BOOL *stop) {
     [_insertionContext deleteObject:obj];
}]; 
```

笔记。如果我没有获取 PermenentObjectIDsForObjects: 错误：此时应用程序将崩溃。

运行后，我不保存 inertionContext 因为这将触发带有 FRC 委托监视更改的 UI 刷新。相反，我收集新数据并将一个实体的一些结果插入到缓存中。为了使缓存工作，它需要创建一个获取请求以获取 managedObjectID 并找到重复项。正是在这一点上，应用程序崩溃了。

我对具有嵌套关系的 MOC 文档的理解是，fetchRequest 将通过所有 MOC 从保存在persistantStore 中的所有 MOC 中提取数据。但如果是这种情况，我不应该在获取它们以删除它们时强制 insertMOC 获取 PermanentOBJectID。话虽如此，看来我的缓存能够从persistanStore 获取permanentID，因此它崩溃了。

cacheMOC 是否应该像其他设置一样与插入MOC 建立关系？缓存是否也应该设置在它自己的私有线程线程上以使其工作？我是否应该锁定 mainMOC 以防止 FRC 更新结果，然后保存 insertMOC 以保留删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:35:40.310

您不需要获得永久 ID。如果您在复制/粘贴期间更改代码，则您有一个循环引用，这可能只是一个错字：

```
_masterManagedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
 [_masterManagedObjectContext setPersistentStoreCoordinator:_psc];

_mainManagedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:initWithConcurrencyType:NSMainQueueConcurrencyType];
//Possible typo due to editing code down to paste as a question
 [_mainManagedObjectContext setParentContext:_masterManagedObjectContext]; 
```

我认为您对 cacheMOC 的意图没有实现。如果在服务器更新开始时它应该是当前显示数据（mainMOC）的相同副本，那么它应该是具有 mainMOC 的 parentContext 的单独分配的对象。

```
_cacheContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[_cacheContext setParentContext:self.mainContext]; 
```

您的 insertContext 应该将 masterMOC 作为父级。

```
 _insertionContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[_insertionContext setParentContext:_masterManagedObjectContext]; 
```

现在，当您使用 insertContext 更新数据完成后，只需保存它并（可选地）刷新 mainMOC 以使用更改更新 UI。

# c# - Windows 应用商店应用中的页面全局键盘事件

> ID：15792978
> 
> 赞同：16
> 
> 时间：2013-04-03T16:31:17.913
> 
> 标签：c#, wpf, windows-store-apps, keyboard-events

我正在开发一个游戏，一个基于 WPF 并用 C# 编写的 Windows 应用商店应用程序。当玩家按下 Esc 键时，我想暂停游戏并显示一个菜单（继续、退出等）。

听起来很简单。可悲的是，事实并非如此。

游戏在 a 中进行`Windows.UI.Xaml.Controls.Page`，主要由 a 中的数百个`Shape`s组成，`Canvas`但没有单个s或任何其他支持键盘交互的东西。唯一的交互是单击或点击形状。`Button``TextBox`

我需要全局捕获整个页面的键盘事件，无论哪个元素具有焦点，甚至是否有任何焦点等。每当按下 Esc 键时，都必须触发一个事件。

我尝试了什么：

*   使用事件`Page.KeyDown`或覆盖`Page.OnKeyDown(KeyRoutedEventArgs e)`（或 KeyUp）：不触发，除非有诸如`TextBox`带有键盘焦点的元素。但是在我的 UI 中没有这样的元素。

*   使用不可见（`Opacity = 0`和/或隐藏在画布下）的文本框作为使 KeyDown 工作的黑客：只要单击/点击画布或任何形状，文本框就会失去焦点并且黑客停止工作。因此，需要更多的技巧来使其保持焦点，这与菜单按钮等其他东西有关。此外，TextBox 偶尔会显示 Windows 软件键盘，这是相当不受欢迎的。一个勉强工作，脆弱的黑客。

*   使用`InputGestures`等`KeyBinding`：不适用于 Windows 应用商店应用程序。

有什么想法或解决方案吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-03T16:46:07.990

尝试使用[CoreWindow.KeyDown](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.ui.core.corewindow.keydown)。在您的页面中分配处理程序，我相信它应该拦截所有 keydown 事件。

```
public MyPage()
{
    CoreWindow.GetForCurrentThread().KeyDown += MyPage_KeyDown;
}

void MyPage_KeyDown(CoreWindow sender, KeyEventArgs args)
{
    Debug.WriteLine(args.VirtualKey.ToString());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-08T05:52:57.880

CoreWindow.GetForCurrentThread().KeyDown 如果焦点位于其他网格/webView/文本框上，则不会捕获事件，因此请改用*[AcceleratorKeyActivated](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.coredispatcher.acceleratorkeyactivated)*事件。无论焦点在哪里，它总是会捕捉到事件。

```
public MyPage()
{
    Window.Current.CoreWindow.Dispatcher.AcceleratorKeyActivated += AcceleratorKeyActivated;
}

private void AcceleratorKeyActivated(CoreDispatcher sender, AcceleratorKeyEventArgs args)
{
    if (args.EventType.ToString().Contains("Down"))
    {
        var ctrl = Window.Current.CoreWindow.GetKeyState(VirtualKey.Control);
        if (ctrl.HasFlag(CoreVirtualKeyStates.Down))
        {
            switch (args.VirtualKey)
            {
                case VirtualKey.A:
                    Debug.WriteLine(args.VirtualKey);
                    Play_click(sender, new RoutedEventArgs());
                    break;
            }
        }
    }
} 
```

# c# - 如何使用代码在控件上应用控件资源

> ID：15792979
> 
> 赞同：0
> 
> 时间：2013-04-03T16:31:24.113
> 
> 标签：c#, wpf, xaml, tabs, tabitem

我`TabItem`在 XAML 文件中为 a 创建了一个控制资源。我是`TabItem`动态生成的，我想将该控制资源应用于生成的每一个。如何在生成后立即使用 c# 代码`TabItem`将该控制资源应用于其他所有资源。`TabItem`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T16:41:24.300

我所做的是在我的类定义的 C# 代码中，我挂钩到“加载”事件。从中，我尝试找到样式的资源并在找到时应用......类似

```
public class MyTabItem : TabItem
{
   public MyTabItem()
   {
      Loaded += MyLoadedExtras;
   }

   private void MyLoadedExtras( object sender, EventArgs e )
   {
      object basis = TryFindResource("XKeyValueFromYourTabItemStyle");
      if (basis != null)
         Style = (Style)basis;

      // disconnect from loaded event after our one time in
      Loaded -= MyLoadedExtras;
   }
} 
```

因此，当您动态添加“MyTabItem”的实例时，它会立即自行查找可用资源并为您设置样式。

# c++ - 读取输入数据并检查其有效性的通用宏

> ID：15792984
> 
> 赞同：1
> 
> 时间：2013-04-03T16:31:38.817
> 
> 标签：c++, c, macros

我在 Stack Overflow 上看到重复了许多类似的问题，它们与从标准输入读取一个输入数据项**并**检查其有效性有关。

数据可以是 integer `"%d"`、 double `"%f"`、 string `"%s"`、 unsigned int `"%u"`...

我想开发一个通用的宏，可以用于**大多数**这些问题。

**问题示例 1**

OP可能会问：

*   扫描输入数据
*   数据应该是整数，所以`11a`, `aaa`, `aa44`,... 不允许输入。只允许后跟空格的整数（请参阅[isspace() ）](http://www.cplusplus.com/reference/cctype/isspace/)
*   问题中可能存在其他条件，例如：输入整数应该是`>3`和`<15`

**问题示例 2**

OP可能会问：

*   扫描输入数据
*   数据应该是双倍的，所以`11.2a`, `aaa`, `aa44.3`,... 不允许输入。只允许double 后跟一个空格（请参阅[isspace() ）](http://www.cplusplus.com/reference/cctype/isspace/)
*   问题中可能存在其他条件，例如：输入双精度应该是`>3.2`和`<15.0`

是否可以开发一个通用的宏，例如

```
#define SCAN_ONEENTRY_WITHCHECK(FORM,X,COND)
// FORM: format of the input data like "%d", "%lf", "%s"
// X: address where to store the input data
// COND: condition to add in the check of the input data

....

// example of calling the macro in the main()

int a;
SCAN_ONEENTRY_WITHCHECK("%d", &a,(a>3 && a<15)) 
```

宏应扫描数据，如果以下条件之一不正确，则向用户打印一条消息，要求他再次输入。并重复此操作，直到用户输入有效数据？

标准：

*   输入数据类型应与格式指示的相同
*   输入数据后应跟[isspace()中指示的空格](http://www.cplusplus.com/reference/cctype/isspace/)
*   输入数据应该是有效的条件`COND`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:31:38.817

这个问题的快速答案是

```
#define SCAN_ONEENTRY_WITHCHECK(FORM,X,COND)\
   while(scanf(" "FORM, X)<1 || !(COND))
      printf("Invalid input, enter again: "); 
```

用下面的方式在代码中调用上面的宏

```
int a; 
SCAN_ONEENTRY_WITHCHECK("%d", &a, (a>3 && a<15)) 
```

相当于这个

```
int a;
while(scanf(" %d", &a)<1 || !(a>3 && a<15))
    printf("Invalid input, enter again: "); 
```

但是上面的答案是错误的，因为如果用户输入例如`aaa`作为输入，那么上面的代码将导致无限循环，因为标准输入没有被清理，因为`aaa`输入没有被`scanf(" %d", &a)`. 所以如果用户输入这样的输入，我们必须添加一些清理标准输入的东西。添加`scanf("%*[^\n]")`可能是一个解决方案。上面的代码将是

```
int a;
while(scanf(" %d", &a)<1 || !(a>3 && a<15)) {
    scanf("%*[^\n]"); // clean stdin
    printf("Invalid input, enter again: ");
} 
```

但上面的代码仍然包含一个限制。例如，如果用户输入了一个有效的整数 ( `20`)，并且该整数不遵守条件`(a>3 && a<15)`。在这种情况下，我们不必清理标准输入，因为它已经被清理了，否则用户将被要求输入数据 2 次。问题可以通过以下解决方案解决：

```
int a;
int c;
while((c=(scanf(" %d", &a)<1)) || !(a>3 && a<15)) {
    if (c) scanf("%*[^\n]"); // clean stdin
    printf("Invalid input, enter again: ");
} 
```

上面的代码不遵守标准`input data should be followed by white space`，例如，如果用户`10abc`作为输入输入，那么上面的代码将捕获 10 作为输入整数，并将清除其余部分`abc`。如果我们检查下一个字符是否为空格（带`isspace()`函数） ，则可以解决此问题

```
int a;
char tmp;
int c;
while((c=(scanf(" %d%c", &a, &tmp)!=2 || !isspace(tmp))) || !(a>3 && a<15)) {
    if (c) scanf("%*[^\n]"); // clean stdin
    printf("Invalid input, enter again: ");
} 
```

现在，如果我们想回到宏。宏代码将是：

```
#define SCAN_ONEENTRY_WITHCHECK(FORM,X,COND) \
do {\
    char tmp;\
    int c;\
    while ((c=(scanf(" "FORM"%c", X, &tmp)!=2 || !isspace(tmp)))\
            || !(COND)) {\
        if (c) scanf("%*[^\n]");\
        printf("Invalid input, please enter again: ");\
    }\
} while(0) 
```

`do {...} while(0)`可以通过此[链接](https://stackoverflow.com/questions/13993011/difference-between-macros-with-and-without-using-do-while)解释添加宏

上面的宏可以用另一种方式编写

```
#define SCAN_ONEENTRY_WITHCHECK(FORM,X,COND) \
do {\
    char tmp;\
    while(((scanf(" "FORM"%c",X,&tmp)!=2 || !isspace(tmp)) && !scanf("%*[^\n]"))\
            || !(COND)) {\
        printf("Invalid input, please enter again: ");\
    }\
} while(0) 
```

**使用宏的示例：**

```
int main()

{
    int decision;
    double q;
    char buf[32];

    printf("Input data, valid choice 1 or 0: ");
    SCAN_ONEENTRY_WITHCHECK("%d",&decision,(decision==0 || decision==1));
    printf("You have entered good input : %d\n", decision);

    printf("Input unsigned double: ");
    SCAN_ONEENTRY_WITHCHECK("%lf",&q, (q == (unsigned int) q));
    printf("You have entered good input : %lf\n", q);

    printf("Input name: ");
    SCAN_ONEENTRY_WITHCHECK("%s",buf, (strcmp(buf,"kallel")==0));
    printf("You have entered good input : %s\n", buf);

    printf("Input data should be valid integer: ");
    SCAN_ONEENTRY_WITHCHECK("%d",&decision,1);
    // COND is 1 ==> we do not have any check in the input integer
    printf("You have entered good input : %d\n", decision);
} 
```

**执行**

```
$ ./test
Input data, valid choice 1 or 0: 4
Invalid input, please enter again: a4
Invalid input, please enter again: a1
Invalid input, please enter again: 1a
Invalid input, please enter again: 1
You have entered good input : 1
Input unsigned double: 2.3
Invalid input, please enter again: a.0a
Invalid input, please enter again: 2.0a
Invalid input, please enter again: a2.0
Invalid input, please enter again: 2.0
You have entered good input : 2.000000
Input name: an
Invalid input, please enter again: anyad
Invalid input, please enter again: adny
Invalid input, please enter again: any
You have entered good input : any
Input data should be valid integer: 2.5
Invalid input, please enter again: -454f
Invalid input, please enter again: -454
You have entered good input : -454 
```

# php - 更新Javascript中的数组时如何使用PHP更新和插入数据库？

> ID：15792992
> 
> 赞同：0
> 
> 时间：2013-04-03T16:31:45.403
> 
> 标签：php, javascript, postgresql, d3.js

我有一个程序从数据库中获取数据，然后使用 d3 和 javascript 绘制它。我有几个方法可以在 javascript 中更新和插入数据到本地数组中，但我也需要更新和插入数据库。我该怎么做？我正在将 PSQL 用于数据库。

这是我的php代码：

```
<?php

   // attempt a connection
 $dbh = pg_connect("host=localhost dbname=data user=postgres");
 if (!$dbh) {
     die("Error in connection: " . pg_last_error());
 }       

 // execute query
 $sql = "SELECT * FROM dataset";
 $result = pg_query($dbh, $sql);
 if (!$result) {
     die("Error in SQL query: " . pg_last_error());
 }       

 $arr = pg_fetch_all_columns($result, 1);

 // free memory
 pg_free_result($result);       

 // close connection
 pg_close($dbh);

?> 
```

这是我正在谈论的方法，clickEvent 在单击条时提示输入，并更新条的长度。

```
function clickEvent(d, i) {
    var op = prompt("Please enter the value", d);
    data[i] = parseInt(op, 10);
    render();

}; 
```

此方法在单击“添加数据”时提示输入，并添加一个新栏。

```
d3.select("button").on("click", function(d, i) {
    var op = prompt("Please enter the value", "");
    var newData = parseInt(op, 10);
    if (!isNaN(newData)) {
      data.push(newData);
      render();
    }
}); 
```

Here's a [jfiddle for the javascript code](http://jsfiddle.net/NkkDC/7/)查看它的作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:23:49.480

使用[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)，您可以将数字传递给“url”中定义的脚本，该脚本会将值保存到数据库中。

```
var request = $.ajax({
  url: "script.php",
  type: "POST",
  data: {barLength : newData},
  dataType: "html"
}); 
```

# javascript - 如何在不同的语言文件中定义与语言相关的内容（l18n）？

> ID：15792995
> 
> 赞同：0
> 
> 时间：2013-04-03T16:31:51.733
> 
> 标签：javascript, localization, ckeditor

CKEditor 4 将依赖于语言的内容存储在 -`lang/`文件夹中。我编写了一个自定义插件，我确实将它与原始 CKEditor 文件夹分开。现在我想将其他依赖于语言的文本也与原始 CKEditor 文件夹分开。我不喜欢像以前那样在原始语言文件中简单地添加带有标签的文本。

[http://theholyjava.wordpress.com/2011/04/04/how-to-customize-ckeditor-with-your-own-plugins-skins-configurations/](http://theholyjava.wordpress.com/2011/04/04/how-to-customize-ckeditor-with-your-own-plugins-skins-configurations/)（“自定义语言”部分）描述了如何定义自己的语言-文件，但我希望 CKEditor 继续加载原始语言文件，*另外*，即对于插件，加载额外的语言数据。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:03:52.727

终于想通了...

*   在插件文件夹中，添加一个语言文件夹：`myplugin/lang/`
*   添加语言文件（`en.js`等`de.js`）
*   在语言文件中，写

JS

```
CKEDITOR.plugins.setLang( 'myplugin', 'en', {
    title: 'My Plugin',
}); 
```

*   在 下`myplugin/plugin.js`，注册语言文件：

JS

```
CKEDITOR.plugins.add('myplugin',
{
    lang: 'de,en',
    init: function (editor) {
        // ...
    }
}); 
```

现在您可以像这样访问您的本地人：`editor.lang.myplugin.title`

[UI 颜色插件](http://ckeditor.com/addon/uicolor)就是一个很好的例子。

# ruby - 如何在 ruby s net/http 中设置代理？

> ID：15792999
> 
> 赞同：18
> 
> 时间：2013-04-03T16:32:01.297
> 
> 标签：ruby, http, proxy, net-http

我正在尝试设置代理并在[文档](http://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html)中的简单获取请求中使用它。但我总是收到错误消息！地址和端口对 open-uri 是正确的，它可以工作.. 它是 `http://proxy:8080`.

```
proxy_addr = 'proxy'
proxy_port = 8080

Net::HTTP.new('google.de', nil, proxy_addr, proxy_port).start { |http|
  # always proxy via your.proxy.addr:8080
  Net::HTTP.get('google.de', '')
} 
```

我究竟做错了什么？感谢所有答案！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-21T09:06:56.497

还有另一种选择：

Net::HTTP 将自动从`http_proxy` 环境变量创建一个代理（如果存在）。

所以你可以使用

```
ENV['http_proxy'] = 'http://172.16.3.160:4226' # your http://address:port here 
```

Net::HTTP 默认将其用于所有请求。

它对第三方库中的 net_http 请求很有帮助（例如它适用于[MailChimp的 gem](http://mailchimp.com/) [gibbon](https://github.com/amro/gibbon)）。

传递`nil`代理地址以禁用默认值`http_proxy`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-03T16:45:40.357

```
Net::HTTP.new('google.de', nil, proxy_addr, proxy_port).start { |http| 
```

这将创建一个`http`对象供您在块中使用。在这里使用它而不是每次都生成新的`Net::HTTP.get('google.de', '')`

```
proxy_addr = 'proxy'
proxy_port = 8080

Net::HTTP.new('google.de', nil, proxy_addr, proxy_port).start { |http|
  # always proxy via your.proxy.addr:8080
  http.get('google.de', '')
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-08-03T20:59:40.853

如果您在代理后面进行 REST api 调用，以下是有效的代码：

```
require "uri"
require 'net/http'

proxy_host = '<proxy addr>'
proxy_port = '<proxy_port'
proxy_user = '<username>'
proxy_pass = '<password>'

uri   = URI.parse("https://saucelabs.com:80/rest/v1/users/<username>")
proxy = Net::HTTP::Proxy(proxy_host,
                         proxy_port,
                         proxy_user,
                         proxy_pass)

req = Net::HTTP::Get.new(uri.path)

req.basic_auth(<sauce_username>,
               <sauce_password>)

result = proxy.start(uri.host,uri.port) do |http|
  http.request(req)
end

puts result.body 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-07-28T16:23:22.557

```
#!/usr/bin/env ruby
#

require 'rubygems' 
require 'net/http' 
require 'open-uri' 
require 'timeout' 

mimvp_url = "http://proxy.mimvp.com/exist.php"
mimvp_url2 = "https://proxy.mimvp.com/exist.php"
mimvp_url3 = "https://apps.bdimg.com/libs/jquery-i18n/1.1.1/jquery.i18n.min.js"

$proxy = '183.222.102.95:8080'

$proxy_addr = $proxy.split(':')[0].strip
$proxy_port = $proxy.split(':')[1].strip

puts $proxy_addr
puts $proxy_port

begin 
  Timeout.timeout(30) {

    # mimvp_url = http://proxy.mimvp.com/exist.php
    # uri.host = proxy.mimvp.com
    # uri.port = 80
    # uri.path = /exist.php
    uri = URI.parse(mimvp_url)
    result = Net::HTTP.new(uri.host, nil, $proxy_addr, $proxy_port).start { |http|
      http.get(uri.path)
    }
    puts result.body

    # mimvp_url = http://proxy.mimvp.com/exist.php
    # uri.host = proxy.mimvp.com
    # uri.port = 80
    # uri.path = /exist.php
    # req = #<Net::HTTP::Get:0x007fafa594ff78>
    uri = URI.parse(mimvp_url)
    req = Net::HTTP::Get.new(uri.path)
    result = Net::HTTP::Proxy($proxy_addr, $proxy_port).start(uri.host, uri.port) {|http| 
      http.request(req)
    } 
    puts result.body

    # proxy auth （NO TEST）
    $proxy_addr = '<proxy addr>'
    $proxy_port = '<proxy_port'
    $proxy_user = '<username>'                # 代理用户名
    $proxy_pass = '<password>'                # 代理密码

    $website_username = '<website_username>'  # 目标网站登录用户名
    $website_password = '<website_password>'  # 目标网站登录密码

    uri = URI.parse(mimvp_url)
    req = Net::HTTP::Get.new(uri.path)
    req.basic_auth($website_username, $website_password)

    result = Net::HTTP::Proxy($proxy_addr, $proxy_port, $proxy_user, $proxy_pass).start(uri.host, uri.port) {|http| 
      http.request(req)
    } 
    puts result.body

}
rescue => e  
    puts e.inspect  
    exit  
end 
```