# StackOverflow 问答 15944000-15944999

# java - 在ajax中调用java方法

> ID：15944000
> 
> 赞同：6
> 
> 时间：2013-04-11T08:25:43.923
> 
> 标签：java, ajax, jsp

我正在 Netbeans Ide 中创建一个 jsp 应用程序。我在 ajax 中调用 java 类方法时遇到问题。是否可以这样做

我的java类是这样的：

```
public class Hello
{
    public String execute(String s)
    {
        return "success";
    }
} 
```

我无法弄清楚如何使用 ajax 调用执行方法：我当前的 ajax 代码是：

```
var val="test string";
$.ajax({
type: "GET",
url: "http://localhost:8084/Shade/src/java/mail/Main.execute",
data: val,

async: true,
cache: false,
success: function (msg) {

alert("hi");
$(".col-1").html(msg);
}); 
```

提前谢谢:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T09:10:29.000

`AJAX`是 的首字母缩写词`Asynchronous JavaScript And XML`。它提供了与服务器异步通信的能力。

简单来说，您可以向服务器发送请求并继续与用户进行用户交互。您无需等待服务器的响应。一旦响应到达，UI 中的指定区域将自行更新并反映响应信息。整个页面不需要重新加载。

因此，您不能直接访问 Java 类`url`来发出您的 Ajax 请求。它应该是任何映射的 url，如,`JSP`等。`Servlets``PHP`

创建一个 JSP（例如`hello.jsp`）

```
<%
String strResponse;
mail.Main objMain = new mail.Main();
strResponse = objMain.execute();
%>

<%=strResponse %> 
```

在 Ajax 请求中

```
url: "hello.jsp", 
```

编辑：添加示例：

```
<script type="text/javascript" src="js/jquery.min.js"></script> 
<script type="text/javascript">
  $(function(){
      function getData() {
          var dataToBeSent  = {
            uName : $("#userName").val() , //
            passwd: $("#password").val()
            }; // you can change parameter name

          $.ajax({
                url : 'getDataServlet', // Your Servlet mapping or JSP(not suggested)
                data :dataToBeSent, 
                type : 'POST',
                dataType : 'html', // Returns HTML as plain text; included script tags are evaluated when inserted in the DOM.
                success : function(response) {
                    $('#outputDiv').html(response); // create an empty div in your page with some id
                },
                error : function(request, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
      }

}); 
```

在 Servlet/JSP 中访问您的参数`request.getParameter("uName");`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:28:36.137

您不能直接调用该方法。您应该将 URL 映射到要调用的方法。这可以在 servlet 中完成。如果您已经通过 Java 代码提供页面，则只需添加一个新方法来提供包含所需内容的页面。

# r - R：将复合绘图字符放入图例中

> ID：15944001
> 
> 赞同：0
> 
> 时间：2013-04-11T08:25:44.400
> 
> 标签：r, plot, legend

我想在一个画布上绘制数据集。为了使一个数据集从另一个数据集中脱颖而出，我将使用两个不同的字符绘制它两次，例如围绕一个点的圆圈。

现在我想将这个复合字符添加到图例中。

如何？

谢谢！

PK^_^

# c++ - 如何解决 boost::signals2 的 slot_type 和 boost::bind 的歧义，为什么它甚至是模棱两可的？

> ID：15944005
> 
> 赞同：1
> 
> 时间：2013-04-11T08:26:01.693
> 
> 标签：c++, boost, boost-bind, ambiguity, boost-signals2

考虑这个例子：

```
#include <boost/signals2/signal.hpp>
#include <boost/bind.hpp>

typedef boost::signals2::signal< void ( double ) > DoubleSignalType;
typedef boost::signals2::signal< void ( void ) >   VoidSignalType;

class B {
public:
    void connect( DoubleSignalType::slot_type dbl_slot ) {
        dbl_sig.connect( dbl_slot );
    }

    void connect( VoidSignalType::slot_type void_slot ) {
        void_sig.connect( void_slot );
    }
private:
    DoubleSignalType dbl_sig;
    VoidSignalType void_sig;
};

class A {
public:
    void foo( double a ) {};
    void bar( void ) {};
    void other(){
        B b;
        b.connect( boost::bind( &A::foo, this, _1 ) );
    }
};

int main( int argc, char* argv[] ) { return 0; } 
```

当我编译这个时，我得到：

```
g++ x.cpp
x.cpp: In member function ‘void A::other()’:
x.cpp:27:53: error: call of overloaded ‘connect(boost::_bi::bind_t<void, boost::_mfi::mf1<void, A, double>, boost::_bi::list2<boost::_bi::value<A*>, boost::arg<1> > >)’ is ambiguous
x.cpp:27:53: note: candidates are:
x.cpp:9:10: note: void B::connect(boost::signals2::signal1<void, double, boost::signals2::optional_last_value<void>, int, std::less<int>, boost::function<void(double)>, boost::function<void(const boost::signals2::connection&, double)>, boost::signals2::mutex>::slot_type)
x.cpp:13:10: note: void B::connect(boost::signals2::signal0<void, boost::signals2::optional_last_value<void>, int, std::less<int>, boost::function<void()>, boost::function<void(const boost::signals2::connection&)>, boost::signals2::mutex>::slot_type) 
```

有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:26:07.527

一种简单的解决方案是显式创建所需的信号类型。IE：

```
 b.connect( DoubleSignalType::slot_type( boost::bind( &A::foo, this, _1 ) ) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:27:51.333

你必须做一些更复杂的事情，因为`boost::bind`'s`operator()`是模板，并且有任意数量的参数（能够调用没有参数的函数，因为它有一些）。

如果您提供非重载方法，一切都会好起来的

# sql-server - 如何知道我的 SQL SERVER 2008 R2 中是否安装了 SSIS

> ID：15944008
> 
> 赞同：4
> 
> 时间：2013-04-11T08:26:04.930
> 
> 标签：sql-server, ssis, sql-server-2008-r2

我有 sql server 2008 r2，我想把我的存储过程放在包中，我搜索互联网，我发现我必须为此安装一个来自微软的数据工具。但是这个工具需要在 SQL SERVER 2008 R2 中安装 SSIS，我怎么知道我有没有？感谢你

### 这是我的 sql server 2008 r2

![在此处输入图像描述](https://i.stack.imgur.com/IUXMR.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:55:25.177

您可以转到 SQL Server 配置管理器（通常在开始>Sql Server 2008 R2> 配置工具中可用）。一旦启动，您就可以访问所有可用的服务。如果 Sql Server Integration Services 10.0 在那里，您可以右键单击它并启动它，如果它尚未启动。否则，您将不得不去安装中心并添加此服务。

SSIS 在 Sql Server 版本上不可用。例如，它在 Express 上不可用。您可以使用[以下查询](http://support.microsoft.com/kb/321185.)检查您的版本：

```
SELECT SERVERPROPERTY('productversion'), 
       SERVERPROPERTY ('productlevel'), 
       SERVERPROPERTY ('edition') 
```

# c++ - 从 Eclipse 调试 Python C++ 扩展（在 Linux 下）

> ID：15944011
> 
> 赞同：1
> 
> 时间：2013-04-11T08:26:09.657
> 
> 标签：c++, python, eclipse, debugging, eclipse-cdt

我有一个在 Python 中调用的 C++ 项目（通过 boost-python），我想从 python 进程中调试 C++ 代码。我怎样才能做到这一点？在带有 Visual Studio 的 Windows 中，我可以使用该功能`attach to process`。如何在 Eclipse 中实现相同的功能？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T13:18:45.173

对我来说，只需在 C/C++ 中为程序 /usr/bin/python （或你对 python 解释器的任何搜索路径）添加一个调试配置，然后将你想要运行的 python 程序作为参数。将所需的断点放在 C 代码中，您应该已准备好运行调试配置并打开调试透视图。

如果它仍然不起作用，您还可以检查您是否使用的是旧版（或标准）流程启动器。由于某种原因，GDB 进程启动器似乎在这里不起作用。

# objective-c - 以编程方式将应用程序的内容复制到桌面

> ID：15944013
> 
> 赞同：1
> 
> 时间：2013-04-11T08:26:10.283
> 
> 标签：objective-c, macos, cocoa

如何以编程方式将整个`.app`捆绑包 ( `[[NSBundle mainBundle] bundleURL]`) 复制到我的桌面？

这是我的代码，但对我没有帮助。

```
NSString *sourcepath = [[NSBundle mainBundle] bundlePath]; 
NSString *destpath = [NSHomeDirectory() stringByAppendingPathComponent:@"Desktop"];
[[NSFileManager defaultManager] copyItemAtPath:sourcepath toPath:destpath error:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:32:28.263

您可以使用标准`NSFileManager`方法

*   [copyItemAtURL:toURL:error:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/copyItemAtURL%3atoURL%3aerror%3a)或
*   [copyItemAtPath：toPath：错误：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/copyItemAtPath%3atoPath%3aerror%3a)

复制目录和文件。来自 Apple 的文档：

*复制项目时，当前进程必须有权限读取 srcPath 处的文件或目录，并写入 dstPath 的父目录。如果 srcPath 中的项目是目录，则此方法复制目录及其所有内容，包括任何隐藏文件。*

请注意，如果目标已存在同名的项目（文件/目录），则必须手动删除它，否则副本将失败（再次，根据 Apple 的文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:23:11.843

这是我解决的方法，这可能对某人有帮助。

```
- (IBAction)createShortcut:(id)sender {

 NSString *sourcepath = [[NSBundle mainBundle] bundlePath];
 NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDesktopDirectory, NSUserDomainMask, YES);
 NSString *theDesktopPath = [paths objectAtIndex:0];
 NSString *saveFilePath = [theDesktopPath stringByAppendingPathComponent:@"myApp.app"];
 [[NSFileManager defaultManager] copyItemAtPath:sourcepath toPath:saveFilePath error:nil];

} 
```

# php - PHP从二进制文件显示png图像

> ID：15944021
> 
> 赞同：1
> 
> 时间：2013-04-11T08:26:33.900
> 
> 标签：php, image-processing, binary, png

我有存储图像的二进制文件，我尝试获取此图像，但仅显示黑色图像，我的代码或二进制文件可能有什么问题。

```
<?php
function LoadPNG ($imgname) {
    $im = @imagecreatefrompng ($imgname); 

    if (!$im) { 
        $im= imagecreate (150, 30); 
        $bgc = imagecolorallocate ($im, 255, 255, 255);
        $tc= imagecolorallocate ($im, 0, 0, 0);
        imagefilledrectangle ($im, 0, 0, 150, 30, $bgc);

        imagestring ($im, 1, 5, 5, "Error loading $imgname", $tc);
    }
    return $im;
}

header('Content-Type: image/png');

$img = LoadPNG('452');

imagepng($img);
imagedestroy($img);
?> 
```

使用此代码，我得到无法加载文件的错误

文件：[testams.serveriai.lt.lazdynas.serveriai.lt/452](http://testams.serveriai.lt.lazdynas.serveriai.lt/452) 脚本： [testams.serveriai.lt.lazdynas.serveriai.lt/crypt.php](http://testams.serveriai.lt.lazdynas.serveriai.lt/crypt.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:06:17.453

您的 PNG 图像已损坏，它有一个`\n`字符，而不是`\r\n`, （[字节位置 5](http://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header)）通常是 FTP 以文本模式将二进制图像从 Windows 传输到 Unix 时出现的问题。

在使用 PHP 之前，您应该简单地检查图像是否正常，例如添加 .png 扩展名，将其放在可见文件夹（在 Web 服务器中）并浏览它。

# objective-c - 为什么我不能在课堂上访问这个属性？

> ID：15944022
> 
> 赞同：2
> 
> 时间：2013-04-11T08:26:38.400
> 
> 标签：objective-c

![在此处输入图像描述](https://i.stack.imgur.com/FEUUm.png)

请参考这张图片，我已经声明了属性 matchResult，为什么我不能从它的实例中访问它？

另一个属性“分数”有效，为什么？

代码在iOS6环境下运行。

如果看不清楚，请在新标签页中打开图片。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:31:23.937

看来您已经使用*类扩展*在实现文件“CardMatchingGame.m”中定义了该属性。这意味着该属性仅在`@implementation`此类的块中可用。

要使其他类可以访问该属性，请将声明移至`@interface`“CardMatchingGame.h”中的公众。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:34:10.380

它在 .m 文件中声明，因此从“外部”不可见。从同一个类的方法访问它并不重要。您通过引用访问外部接口`self.game.matchResult`。如果`game`等于`self`，那么您可以访问 self.matchResult。但我认为它不会，因为您从数组 self.cardButtons 中获取 self.game。

因此，`self.matchResult`如果要引用，则要么使用，要么`self`必须将属性移动到 .m 文件中的接口定义。

# jquery - UIWebViewBounce phonegap

> ID：15944028
> 
> 赞同：0
> 
> 时间：2013-04-11T08:26:56.833
> 
> 标签：jquery, xcode, cordova

我正在尝试第一次使用 jquery mobile 创建一个应用程序。我已经在互联网上搜索了解决方案，但似乎对我的项目没有任何效果我找不到摆脱顶部和底部的橡皮筋的方法似乎不能解决这个问题。而且因为 iscroll 有相当多的限制并且不想使用它。

这是一张显示我的问题的照片 [https://www.dropbox.com/s/6rini3swht160y4/Photo%201344.jpeg](https://www.dropbox.com/s/6rini3swht160y4/Photo%201344.jpeg)

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:34:13.893

加载或创建 UIWebview 时，插入以下代码。

```
// bouncing-lock for webView contents
for (id subview in webView.subviews)
    if ([[subview class] isSubclassOfClass: [UIScrollView class]])
        ((UIScrollView *)subview).bounces = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:49:01.983

在你的 config.xml

```
<preference name="webviewbounce" value="false" /> 
```

见这里：[https ://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

# php - 在 Ubuntu 中从源代码安装 Apache 和 PHP 后为 MySQL 配置 PHP

> ID：15944030
> 
> 赞同：0
> 
> 时间：2013-04-11T08:27:03.863
> 
> 标签：php, mysql, linux, apache, ubuntu

我已经在我的 Ubuntu 10.04 机器中从源代码安装了 Apache 2.4.4 和 PHP 5.4。我还从源代码安装了 MySQL 5.6，并且 SQL 命令从 shell 运行。

当我使用 SQL 函数连接到数据库时，它会抛出一个致命错误，即该函数未定义。

我知道我可以通过在安装 PHP 时提供 MySQL 的目录来配置 PHP for MySQL，但是现在我已经安装并配置了 Apache 和 PHP，它们正在工作，所以请告诉我如何配置 PHP 以支持 MySQL。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:43:27.067

使用 --with-mysql 或 --with-mysqli 指令重新编译 php。这样您就可以向 php.ini 添加所需的扩展。见[php-mysql](http://php.net/manual/en/mysql.installation.php) 或[php-mysqli](http://www.php.net/manual/en/mysqli.installation.php)

# html - 使用 CSS 定位 DIV

> ID：15944031
> 
> 赞同：0
> 
> 时间：2013-04-11T08:27:03.927
> 
> 标签：html, css

我在彼此内部有两个 DIV。内部 DIV 包含一个图像。我正在尝试在右上角的该图像上添加一个浮动文本。我不知道如何使该文本使用内部 DIV 的位置而不是外部位置。

这是我到目前为止得到的

CSS：

```
html {
    background: #EEF0F3;
}
.outer {
    background: #FFFFFF;
    border-radius: 4px 4px 4px 4px;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
    margin: 0 auto;
    padding:20px 0px;
    position: relative;
    width: 680px;
    text-align: center;
    margin-bottom: 20px;
}
.inner {
    position: relative;
}
h2 { 
   position: absolute; 
   top: 0px; 
   right: 0px; 
}
h2 span { 
   color: white; 
   font: bold 24px Helvetica, Sans-Serif; 
   letter-spacing: -1px;
   background: rgba(255, 0, 0, 0.5);
   padding: 0px 10px; 
} 
```

HTML：

```
<div class="outer">
    <div class="inner">
        <h2><span>Title 1</span></h2>
        <img src="1.jpg">
    </div>
</div> 
```

这是JSFiddle中的代码

[http://jsfiddle.net/UM8ea/](http://jsfiddle.net/UM8ea/)

如果我将定位设置为：

```
h2 { 
   position: absolute; 
   top: 20px; 
   right: -20px; 
} 
```

我得到了想要的结果，但这感觉像是解决方法而不是解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:33:14.747

它非常简单。

检查这个[小提琴](http://jsfiddle.net/kTwbn/1/)

```
.outer {
background: #FFFFFF;
border-radius: 4px 4px 4px 4px;
box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
margin: 0 auto;
padding:20px 0px;
position: relative;
width: 680px;
text-align: center;
margin-bottom: 20px;
} 
```

**对于 h2**

```
 h2 
{ 
position: absolute; 
top: 5px; 
right: 20px; 
margin:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:53:03.537

你有这种行为是因为`.outer`它比图像更宽，然后`.inner`也是。的`h2`位置与 相关`.inner`，并向右移动。

如果您设置`.outer`为 640px 宽度（作为图像），您将获得[所需的结果](http://jsfiddle.net/UM8ea/3/)。

[其他解决方案](http://jsfiddle.net/UM8ea/4/)`margin: 0 20px;`是设置`.inner`

如果您希望[文本全部](http://jsfiddle.net/UM8ea/5/)位于图像上方，您可以`h2 {margin:0;}`在这两种情况下进行设置。

# javascript - LightZAP v2.54 (silent update2) (Lightbox custom plugin) 页面加载时自动启动标签名称 (#img1)

> ID：15944039
> 
> 赞同：0
> 
> 时间：2013-04-11T08:27:41.937
> 
> 标签：javascript, html, lightbox

我有`LightZAP`插件，可以替代`Lightbox`在我的网站上运行。我想在页面加载时运行它（弹出带有特定图像的图像库）：`index.html#img1`如果可能的话，链接。

我见过类似的脚本`lightbox v2`，确实尝试自定义它们以使用`LightZAP`但无法运行它。这就是这里的例子：http: [//frankeng.me/2010/07/21/drupal-tip-lightbox-pop-up-on-page-load/](http://frankleng.me/2010/07/21/drupal-tip-lightbox-pop-up-on-page-load/)

任何帮助将非常感激。

LightZAP 的代码：

```
` /* LightZAP v2.54 (silent update2)
by Szalai Mihaly - http://dragonzap.szunyi.com
original by Lokesh Dhakar (lightbox) - http://lokeshdhakar.com

For more information, visit:
http://dragonzap.szunyi.com/index.php?e=page&al=lightzap&l=en

Licensed under the Creative Commons Attribution 2.5 License - http://creativecommons.org/licenses/by/2.5/
- free for use in both personal and commercial projects
- attribution requires leaving author name, author link, and the license info intact

Thanks
- Scott Upton(uptonic.com), Peter-Paul Koch(quirksmode.com), and Thomas Fuchs(mir.aculo.us) for ideas, libs,       and snippets.
- Artemy Tregubenko (arty.name) for cleanup and help in updating to latest proto-aculous in v2.05.
- Szalai Mihaly (dragonzap.szunyi.com), automatic image resize for screen, fullscreen viewer,  print button,     download button, like button and new design.*/

var imgNotFound,
//----- Options --------
imagetext   = "",   //"Image "
oftext      = " / ",//" of "
bytext      = "",   //"by"
notfoundtext    = "Image not found",
print       = false,
download    = true,
like        = true;
buy         = true;
 //----------------------

var $lightzap, $container, $image, $lbContainer;
var windowWidth, windowHeight, originalWidth, originalHeight, album = [], currentImageIndex = 0, isfull =     false, marginWidth = -1, marginHeight = -1;
var pfx = ["webkit", "moz", "ms", "o", ""];

function getElementsByClassName(element, className) {
if (element.getElementsByClassName)
    return element.getElementsByClassName(className);
else
    return document.querySelectorAll('.' + className);
};

 function lzInit()
{
    //Set links
var _ref = document.links, i = _ref.length;
while (i--)
{
    var a = _ref[i];
    if (a.getAttribute("data-lightzap") != null)
        a.onclick = function () {return lzStart(this);};
}

//FullScreen
var pfx0 = ["IsFullScreen", "FullScreen"], pfx1 = ["CancelFullScreen", "RequestFullScreen"];
var k, m, t = "undefined", p = 0;
while (p < pfx.length && !document[m])
{
    k = 0;
    while (k < pfx0.length)
    {
        m = pfx0[k];
        if (pfx[p] == "")
        {
            m = m.substr(0, 1).toLowerCase() + m.substr(1);
            pfx1[0] = pfx1[0].substr(0, 1).toLowerCase() + pfx1[0].substr(1);
            pfx1[1] = pfx1[1].substr(0, 1).toLowerCase() + pfx1[1].substr(1);
        }
        m = pfx[p] + m;
        t = typeof document[m];
        if (t != "undefined")
        {
            pfx = [pfx[p] + pfx1[0], pfx[p] + pfx1[1], m];
            p = 2;
            break;
        }
        k++;
    }
    p++;
}

//Build lightzap
$lightzap = document.createElement("div");
$lightzap.id = "lightzap";
$lightzap.style.display = 'none';
document.body.appendChild($lightzap);

var tmp = document.createElement("div");
tmp.className = "lz-bg";
tmp.onclick = lzEnd;
$lightzap.appendChild(tmp);

$container = document.createElement("div");
$container.className = "lz-container";
$container.style.display = 'none';
$lightzap.appendChild($container);

tmp = document.createElement("div");
tmp.className = "lz-loader";
$container.appendChild(tmp);

$image = document.createElement("img");
$image.className = "lz-image";
$container.appendChild($image);

var group = document.createElement("div");
group.className = "lz-nav";
$container.appendChild(group);

tmp = document.createElement("a");
tmp.className = "lz-prev";
tmp.onclick = function ()
{
    lzChangeImage(currentImageIndex + 1);
    return false;
};
group.appendChild(tmp);

tmp = document.createElement("a");
tmp.className = "lz-next";
tmp.onclick = function ()
{
    lzChangeImage(currentImageIndex - 1);
    return false;
};
group.appendChild(tmp);

group = document.createElement("div");
group.className = "lz-buttonContainer";
$container.appendChild(group);

tmp = document.createElement("a");
tmp.className = "lz-button lz-more";
tmp.onclick = function ()
{
    if (getElementsByClassName($container, "lz-desc")[0].style.display == 'none')     getElementsByClassName($container, "lz-desc")[0].style.display = '';
    else getElementsByClassName($container, "lz-desc")[0].style.display = 'none';
    return false;
};
group.appendChild(tmp);

tmp = document.createElement("a");
tmp.className = "lz-button lz-print";
tmp.onclick = lzPrint;
group.appendChild(tmp);

tmp = document.createElement("a");
tmp.className = "lz-button lz-download";
tmp.onclick = lzDownload;
tmp.target = "_blank";
group.appendChild(tmp);

tmp = document.createElement("a");
tmp.className = "lz-button lz-buy";
tmp.onclick = lzBuy;
group.appendChild(tmp);

tmp = document.createElement("a");
tmp.className = "lz-button lz-like";
tmp.onclick = lzLike;
group.appendChild(tmp);

//Buttons
if (p != 4) pfx = false;
else
{
    tmp = document.createElement("div");
    tmp.className = "lz-button lz-fullScreen";
    tmp.onclick = function ()
    {
        if (isfull) document[pfx[0]]();
        else $lightzap[pfx[1]]();
    };
    group.appendChild(tmp);
}

tmp = document.createElement("a");
tmp.className = "lz-button lz-close";
tmp.onclick = lzEnd;
group.appendChild(tmp);

$lbContainer = document.createElement("div");
$lbContainer.className = "lz-labelContainer";
$container.appendChild($lbContainer);

tmp = document.createElement("div");
tmp.className = "lz-float lz-caption";
$lbContainer.appendChild(tmp);

tmp = document.createElement("div");
tmp.className = "lz-float lz-desc";
tmp.style.display = 'none';
$lbContainer.appendChild(tmp);

tmp = document.createElement("div");
tmp.className = "lz-float lz-resolution";
$lbContainer.appendChild(tmp);

tmp = document.createElement("a");
tmp.className = "lz-float lz-by";
tmp.target = "_blank";
$lbContainer.appendChild(tmp);

tmp = document.createElement("div");
tmp.className = "lz-float lz-number";
$lbContainer.appendChild(tmp);
};
window.onload = lzInit;

function lzStart($link)
{
//Show overlay
lzShowOthers(false);
lzSizeOverlay();
$lightzap.style.display = '';
$container.style.display = '';
window.onresize = lzSizeOverlay;

//Get original margin
if (marginWidth == -1)
{
    imgNotFound = window.getComputedStyle($image, "").getPropertyValue("background-image").replace("url(", "").replace(")", "").replace('"', '').replace('"', '');
    $image.style.backgroundImage = "none";
    var tmp = window.getComputedStyle($container, "");
    marginHeight = parseInt(tmp.getPropertyValue("margin-top")) + parseInt(tmp.getPropertyValue("margin-bottom")) + parseInt(tmp.getPropertyValue("padding-top")) + parseInt(tmp.getPropertyValue("padding-bottom")) + parseInt(tmp.getPropertyValue("border-top-width")) + parseInt(tmp.getPropertyValue("border-bottom-width"));
    marginWidth = parseInt(tmp.getPropertyValue("margin-left")) + parseInt(tmp.getPropertyValue("margin-right")) + parseInt(tmp.getPropertyValue("padding-left")) + parseInt(tmp.getPropertyValue("padding-right")) + parseInt(tmp.getPropertyValue("border-left-width")) + parseInt(tmp.getPropertyValue("border-right-width"));       
}

//Create album
album = [];
var a, i, _len, _ref, imageNumber = 0;
if ($link.getAttribute("data-lightzap") == "")
    lzReadAlbum($link);
else
{
    var _ref = document.links, _href = $link.href, _attr = $link.getAttribute("data-lightzap"), i = _ref.length, j = 0;
    while (i--)
    {
        var a = _ref[i];
        if (a.getAttribute("data-lightzap") != null && a.getAttribute("data-lightzap") == _attr)
        {
            lzReadAlbum(a);
            if (a.href == $link.href) imageNumber = j;
            j++;
        }
    }
}
lzChangeImage(imageNumber);
return false;
};

function lzReadAlbum($link)
{
var download = false, like = false, buy = false, print = false, options = $link.getAttribute("data-options");
if (options != null && options.length > 4)
{
    download = options.indexOf("download") != -1;
    buy = options.indexOf("buy") != -1;
    like = options.indexOf("like") != -1;

    print = options.indexOf("print") != -1;
}
album.push({
    link: $link.getAttribute("href"),
    title: $link.getAttribute("title"),
    desc: $link.getAttribute("data-desc"),
    by: $link.getAttribute("data-by"),
    by_link: $link.getAttribute("data-link"),
    download: download,
    buy: buy,
    like: like,
    print: print
});
};

function lzChangeImage(imageNumber)
{
//Hide other
document.onkeypress = lzKeyboardAction;
getElementsByClassName($container, "lz-loader")[0].style.display = "";
getElementsByClassName($container, "lz-nav")[0].style.display = "none";
getElementsByClassName($container, "lz-buttonContainer")[0].style.display = "none";
$lbContainer.style.display = "none";
$image.className = "lz-hide";

//New image
var preloader = new Image;
preloader.onload = function ()
{
    $image.src = album[imageNumber].link;
    originalWidth = preloader.width;
    originalHeight = preloader.height;
    currentImageIndex = imageNumber;
    return lzGetImageSize();
};
preloader.onerror = function ()
{
    album[imageNumber].title = notfoundtext;
    album[imageNumber].link = imgNotFound;
    $image.src = album[imageNumber].link;
    originalWidth = 256;
    originalHeight = 256;
    currentImageIndex = imageNumber;
    return lzGetImageSize();
};
preloader.src = album[imageNumber].link;
};

function lzSizeOverlay()
{
var _windowWidth, _windowHeight;
if(typeof(window.innerWidth) == 'number') //Non-IE
{
    _windowWidth = Math.min(window.innerWidth, document.body.clientWidth);
    _windowHeight = window.innerHeight;
}
else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) //IE 6+ in 'standards compliant mode'
{
    _windowWidth = document.documentElement.clientWidth;
    _windowHeight = document.documentElement.clientHeight;
}
else if (document.body && (document.body.clientWidth || document.body.clientHeight)) //IE 4 compatible
{
    _windowWidth = document.body.clientWidth;
    _windowHeight = document.body.clientHeight;
}

//If chanced size
if (windowWidth != _windowWidth || windowHeight != _windowHeight)
{
    //Set size
    windowWidth = _windowWidth;//(_windowWidth <= screen.width) ? _windowWidth : screen.width * 0.8;
    windowHeight = _windowHeight;//(_windowHeight <= screen.height) ? _windowHeight : screen.height * 0.8;
    $lightzap.style.width = _windowWidth;
    $lightzap.style.height = _windowHeight;

    //Is fullscreen?
    isfull = false;
    if (pfx != false) isfull = (typeof document[pfx[2]] == "function" ? document[pfx[2]]() : document[pfx[2]]);

    if (!isfull) isfull = (windowWidth >= screen.width * 0.99 && windowHeight >= screen.height * 0.99);

    //Set style
    if (isfull)
    {
        $lightzap.className = "full-screen";
        $lightzap.style.width = "";
        $lightzap.style.height = "";
        $container.style.height = "100%";
        getElementsByClassName($lightzap, "lz-bg")[0].onclick = null;
    }
    else
    {
        getElementsByClassName($lightzap, "lz-bg")[0].onclick = lzEnd
        $lightzap.className = "";
        $container.style.width = "";
        $container.style.height = "";
    }

    //Update image size
    if (album.length > 0)
        lzGetImageSize();
}
};

function lzGetImageSize()
{
//Sizes
var placeWidth = windowWidth, placeHeight = windowHeight, imageWidth = originalWidth, imageHeight = originalHeight;
var master = $container.style, slave = $image.style;
if (!isfull)
{
    placeWidth -= marginWidth;
    placeHeight -= marginHeight;
}
else
{
    slave = master;
    master = $image.style;
    if (pfx)
    {
        placeWidth = screen.width;
        placeHeight = screen.height;
    }
}

//Calculate optional size
if (imageWidth > placeWidth)
{
    imageHeight = (placeWidth * imageHeight) / imageWidth;
    imageWidth = placeWidth;
}
if (imageHeight > placeHeight)
{
    imageWidth = (placeHeight * imageWidth) / imageHeight;
    imageHeight = placeHeight;
}

//Set box style
slave.top = "0";
slave.left = "0";
slave.width = "";
slave.height = "";
master.top = (placeHeight - imageHeight) * 0.5 + "px";
master.left = (placeWidth - imageWidth) * 0.5 + "px";
master.width = imageWidth + "px";
master.height = imageHeight + "px";
lzShowImage();
};

function lzShowImage()
{
lzUpdateNav();
lzUpdateDetails();

//Preload
var preloadNext, preloadPrev;
if (album.length > currentImageIndex + 1)
{
    preloadNext = new Image;
    preloadNext.src = album[currentImageIndex + 1].link;
}
if (currentImageIndex > 0)
{
    preloadPrev = new Image;
    preloadPrev.src = album[currentImageIndex - 1].link;
}

setTimeout(function(){
    $image.className = "lz-image";
    getElementsByClassName($container, "lz-nav")[0].style.display = "";
    $lbContainer.style.display = "";
    getElementsByClassName($container, "lz-buttonContainer")[0].style.display = "";
    getElementsByClassName($container, "lz-loader")[0].style.display = "none";
},380);
};

function lzUpdateDetails()
{
//Counter
var element = getElementsByClassName($lbContainer, "lz-number")[0];
if (album.length > 1)
{
    element.textContent = imagetext + (album.length - currentImageIndex) + oftext + album.length;
    element.style.display = "";
}
else element.style.display = "none";

//Caption
element = getElementsByClassName($lbContainer, "lz-caption")[0];
if (album[currentImageIndex].title != null && album[currentImageIndex].title != "")
{
    element.textContent = album[currentImageIndex].title;
    element.style.display = "";
    if (album[currentImageIndex].title == notfoundtext) return false;
}
else element.style.display = "none";

//Description
element = getElementsByClassName($container, "lz-more")[0];
if (album[currentImageIndex].desc != null && album[currentImageIndex].desc != "")
{
    element.style.display = "";
    element = getElementsByClassName($lbContainer, "lz-desc")[0];
    element.innerHTML = album[currentImageIndex].desc;
    element.style.display = "none";
}
else
{
    element.style.display = "none";
    getElementsByClassName($lbContainer, "lz-desc")[0].style.display = "none";
}

//Author
element = getElementsByClassName($lbContainer, "lz-by")[0];
if (album[currentImageIndex].by != null && album[currentImageIndex].by != "")
{
    element.innerHTML = bytext + " <span>" + album[currentImageIndex].by + "</span>";
    element.style.display = "";
    if (album[currentImageIndex].by_link != null && album[currentImageIndex].by_link != "") element.href = album[currentImageIndex].by_link;
}
else
{
    element.innerHTML = "";
    element.style.display = "none";
    if (album[currentImageIndex].by_link != null && album[currentImageIndex].by_link != "") getElementsByClassName($container, ".lz-caption").html() + '</a>';
}

//Others
getElementsByClassName($container, "lz-like")[0].style.display = (album[currentImageIndex].like != like) ? "" : "none";
getElementsByClassName($container, "lz-buy")[0].style.display = (album[currentImageIndex].buy != buy) ? "" : "none";
getElementsByClassName($container, "lz-download")[0].style.display = (album[currentImageIndex].download != download) ? "" : "none";
getElementsByClassName($container, "lz-print")[0].style.display = (album[currentImageIndex].print != print) ? "" : "none";

getElementsByClassName($lbContainer, "lz-resolution")[0].textContent = originalWidth + " x " + originalHeight;
};

function lzUpdateNav()
{
getElementsByClassName($container, "lz-prev")[0].style.display = "none";
getElementsByClassName($container, "lz-next")[0].style.display = "none";
if (currentImageIndex > 0) getElementsByClassName($container, "lz-next")[0].style.display = "";

if (currentImageIndex < album.length - 1) getElementsByClassName($container, "lz-prev")[0].style.display = "";
};

function lzKeyboardAction(e)
{
var keycode = e.keyCode, key = String.fromCharCode(e.charCode).toLowerCase(),
    KEYCODE_ESC = 27,
    KEYCODE_LEFTARROW = 37,
    KEYCODE_RIGHTARROW = 39,
    KEYCODE_F11 = 122;
if (keycode == KEYCODE_ESC || key.match(/x|o|c/)) lzEnd();
else if (key == "n" || keycode == KEYCODE_RIGHTARROW)
{
    if (currentImageIndex != 0) lzChangeImage(currentImageIndex - 1);
}
else if ((key == "p" || keycode == KEYCODE_LEFTARROW) && currentImageIndex != album.length - 1) lzChangeImage(currentImageIndex + 1);
};

function lzPrint()
{
win = window.open();
self.focus();
win.document.open();
win.document.write("<html><body stlye='margin:0 auto;padding:0;'><h1 style='margin:0 0 0.48em;'>" + getElementsByClassName($container, "lz-caption")[0].textContent + "</h1><div style='text-align:center;'><img src='" + album[lz.currentImageIndex].link + "' style='max-width:100%;max-height:100%;'/></div><div style='text-align:right;'><i>" + getElementsByClassName($container, "lz-by")[0].textContent + "</i></div></body></html>");
win.document.close();
win.print();
win.close();
};

function lzLike()
{
if (!window.focus) return true;
    window.open("http://www.facebook.com/sharer/sharer.php?u=" + $image.src, "", 'width=400,height=200,scrollbars=yes');
};

function lzBuy()
{
if (!window.focus) return true;
window.open("../shop.html",'_self');
};

function lzDownload()
{
if (window.webkitURL)
{ //Webkit
    var xhr = new XMLHttpRequest();
    xhr.open("GET", album[currentImageIndex].link);
    xhr.responseType = "blob";
    xhr.onreadystatechange = function ()
    {
        var a = document.createElement("a");
        a.href = (window.URL) ? window.URL.createObjectURL(xhr.response) : window.webkitURL.createObjectURL(xhr.response);
        a.download = album[currentImageIndex].link.substring(album[currentImageIndex].link.lastIndexOf("/") + 1);
        var e = document.createEvent("MouseEvents");
        e.initMouseEvent("click", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
        a.dispatchEvent(e);
    };
    xhr.send();
    return true;
}
else if (navigator.appName == 'Microsoft Internet Explorer')
{ //IE
    win = window.open(album[currentImageIndex].link);
    self.focus();
    win.document.execCommand("SaveAs");
    win.close();
    return true;
}
else
{ //Opera & Firefox (CANVAS)
    var canvas = document.createElement("canvas");
    document.body.appendChild(canvas);
    if (typeof canvas.getContext != "undefined")
    {
        try
        {
            var context = canvas.getContext("2d");
            canvas.width = Math.min(originalWidth, 1024);
            canvas.height = Math.min(originalHeight, originalHeight / originalWidth * 1024);
            canvas.style.width = canvas.width + "px";
            canvas.style.height = canvas.height + "px";
            context.drawImage($image, 0, 0, canvas.width, canvas.height);
            document.location.href = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
            document.body.removeChild(canvas);
            return true;
        }
        catch (err)
        {
            document.body.removeChild(canvas);
        }
    }
}
alert("Sorry, can't download");
};

function lzEnd()
{
if (isfull && pfx != false) document[pfx[0]]();
album = [];
document.onkeypress = null;
window.onresize = null;
$lightzap.style.display = 'none';
$container.style.display = 'none';
lzShowOthers(true);
return false;
};

function lzShowOthers(show)
{
var _ref, i, tagNames = ["select", "object", "embeds"], tagNum = 3;
show = (show) ? "visible" : "hidden";
while(tagNum--)
{
    _ref = document.getElementsByTagName(tagNames[tagNum]);
    i = _ref.length;
    while (i--)
        _ref[i].style.visibility = show;
}
}' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:21:20.810

我设法自己解决了。如果将来有人需要它，我就是这样做的：

*   允许页面加载并在 100 毫秒后启动的 Javascript（让 lightZAP 先创建自己）。
*   获取并保存哈希元素。
*   创建 if 语句：如果网站有散列（例如：index.html#img），则使用元素 id 散列启动 lig​​htZAP

    ```
    <script type="text/javascript">
    setTimeout(function(){
    var hash = window.location.hash.split('#')[1];
    if (window.location.hash != "" ) {
    lzStart(document.getElementById(hash));
    }}, 100); 
    ```

此外，在定义 lightZAP 需要显示的图像时，需要添加几行：

*   假设标签具有 rel="lightzap" 和 id="img"

例子：

```
<div class="single first"><a rel="lightzap" id="a1" gref="../images/Alaska/a1.jpg" data-lightzap="Alaska" data-desc = "desc" title="Alaska"> <img src="../images/Alaska/a1-thumb.jpg"> </a> </div> 
```

# jquery - 如何在If语句中声明click函数？

> ID：15944044
> 
> 赞同：-2
> 
> 时间：2013-04-11T08:28:21.183
> 
> 标签：jquery, if-statement, click

我知道 if 语句结束时有一个小错误。

谁能告诉我，如何在 If 语句中声明 click 函数？

```
if (($("#target").click(function () {
    $("#thediv").scrollTop = $("#thediv").scrollHeight;
});
})
else {
    $("#thediv2").scrollTop = $("#thediv").scrollHeight;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:30:39.810

您可以将其绑定到

```
$('document').on('click',function(event){
 if(event.target.id == 'target'){ ... }
 else {}
...
}) 
```

# sql-server - sql server 唯一标识符比较

> ID：15944046
> 
> 赞同：0
> 
> 时间：2013-04-11T08:28:24.393
> 
> 标签：sql-server, select, triggers, uniqueidentifier

我正在编写一个触发器，但我对一个应该比较 uniqueidentifier 的选择命令有疑问。它返回空值。我怎样才能解决这个问题

```
DECLARE @EmailTablePrimaryKey  uniqueidentifier
SELECT @PostSpecialityID=CategoryId  FROM PostCategoryRelations WHERE PostId = @EmailTablePrimaryKey 
```

@EmailTablePrimaryKey 和 PostId 是唯一标识符，如果我像下面这样静态放置参数，它可以工作，但不能与参数一起工作。

```
SELECT @PostSpecialityID=CategoryId  FROM PostCategoryRelations WHERE PostId = '7c5ec001-81a2-e211-95dc-842b2b07eeaf' 
```

你认为是什么问题？

# event-handling - ember.js：如何使用视图删除记录

> ID：15944049
> 
> 赞同：1
> 
> 时间：2013-04-11T08:28:32.160
> 
> 标签：event-handling, ember.js

在 ember 的[官方指南](http://emberjs.com/guides/views/)中，他们说可以使用视图删除记录，但他们没有提供如何执行此操作的示例。我无法理解视图如何获取对象的 ID 并进行破坏。也许我不明白视图的目的是什么？我认为它是一个事件处理程序（但我有时会看到它用于渲染大块 hbl ......也许这就是我感到困惑的原因）

是否有任何地方删除整个过程的示例？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:34:09.437

通常，您要做的是`{{action}}`在您的视图中创建一个将事件发送到实际处理它的位置：控制器或路由。（就我而言，两者都有一点）

* * *

**注意**：通常，您不需要`View`为模板编写类，除非视图需要特定的事件处理程序。*Ember即时*生成通用视图。您可以通过以下方式看到这一点`{{log view}}`：

```
<script type="text/x-handlebars" data-template-name="app">
    {{log view}}
</script> 
```

如果您查看控制台，您会发现模板`app`与视图类相关联：

![在此处输入图像描述](https://i.stack.imgur.com/Dfe1r.png)

* * *

例如，在下面的视图模板中，我定义了一个“删除”按钮，它将触发`remove`控制器中的操作。

```
<script type="text/x-handlebars" data-template-name="product/remove"> 
    <fieldset>
        <legend>Remove</legend>
        <div class="row-fluid">
            Are you sure you want to delete <strong>{{content.name}}</strong>?
        </div>
    </fieldset>
    <ht />
    {{#linkTo products class="btn"}}Back to List{{/linkTo}}
    <button {{action remove target="controller"}} class="btn btn-danger">
        Delete
    </button>
</script> 
```

控制器只需获取`content`属性并发出触发`confirmRemove`事件的信号，并将其`content`作为参数传递

```
App.ProductRemoveController = Em.ObjectController.extend({
    remove: function() {
        this.get('target').send('confirmRemove', this.get('content'));    
    }
}); 
```

路线实际上是这样处理的：

```
App.ProductRemoveRoute = Em.Route.extend(App.NotifyHandler, {
    setupController: function(controller, model) {
        var c = this.controllerFor('product');
        controller.set('content', c.get('content'));
    },
    events: {
        confirmRemove: function(record) {
            record.deleteRecord();

            // should commit here
            // this.get('store').commit();

            this.controllerFor('application').set(
                'notification', 'Product has been removed'
            );
            this.transitionTo('products');
        }
    }
}); 
```

（见[小提琴](http://jsfiddle.net/schawaska/FYvuD/)）

如果您想直接在 Route 中处理事件，而不与控制器对话，在您的视图模板中，您只需省略`target="controller"`，框架将在控制器中查找该事件的处理程序，如果没有找到，它会[在路线中查找](http://emberjs.com/guides/templates/actions/#toc_target-bubbling)。在这种方法中，如果需要任何参数，您*必须*通过 Handlebars 传递事件参数。在这种情况下，我知道它`this`代表该`content`模板中的 ：

```
<script type="text/x-handlebars" data-template-name="product/remove"> 
    <fieldset>
        <legend>Remove</legend>
        <div class="row-fluid">
            Are you sure you want to delete <strong>{{content.name}}</strong>?
        </div>
    </fieldset>
    <ht />
    {{#linkTo products class="btn"}}Back to List{{/linkTo}}
    <button {{action confirmRemove this}} class="btn btn-danger">
        Delete
    </button>
</script> 
```

使用这种方法，您无需在控制器中定义任何内容，因为它将直接在路由中触发事件：

```
App.ProductRemoveController = Em.ObjectController.extend(); 
```

（见[小提琴](http://jsfiddle.net/schawaska/XDyFE/)）

* * *

**更新：**为了在对象控制器中处理事件，`itemController`属性必须指定一个控制器，它应该扩展`Em.ObjectController`：

```
Depot.TransportDocumentsController = Ember.ArrayController.extend
    itemController: 'transportDocument'

Depot.TransportDocumentController = Ember.ObjectController.extend
    removeItem: ->
        alert("aoooo") 
```

在模板中唯一会改变的是`itemController`在`{{each}}`帮助器中提到的：

```
{{#each doc in controller itemController="transportDocument"}}
    {{doc.number}}
    <!-- rest of the template removed to make this short. -->
    <button {{action removeItem}} class='btn btn-danger btn-small'>
        <i class="icon-white icon-remove"></i>
    </button>
{{/each}} 
```

在操作中，您无需说明处理程序的位置，因为框架可以自己[找到目标](http://emberjs.com/guides/templates/actions/#toc_target-bubbling)。

（见[小提琴](http://jsfiddle.net/schawaska/zSakT/)）

# c++ - 使用 g++ 3 编译的 g++ 4 发现错误“'fdopen' 未声明”

> ID：15944051
> 
> 赞同：6
> 
> 时间：2013-04-11T08:28:40.293
> 
> 标签：c++, g++-4.7

我有用 g++ 版本 3.something 愉快地编译的代码。然后我想构建一些其他包含 C++11 符号的代码，所以我升级到 g++ 4.7。现在我的原始代码没有构建。我得到错误：

'fdopen' 未在此范围内声明

根据手册页， fdopen() 在我包括在内的 stdio.h 中声明。我不确定它是否相关，但我在 Cygwin 环境中工作。我使用的 g++ 的确切版本是 Cygwin 提供的 4.7.2 版本。

自从我切换编译器以来，我没有更改此代码，我可以肯定地确认它已构建并且我的测试代码运行并通过了以前的编译器。

根据要求，演示问题的示例代码：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main(int argc, char **argv)
{
    int   fd;
    FILE *fp;

    fd = open("test.txt", (O_WRONLY | O_CREAT | O_EXCL), S_IRWXU);
    if(0 < fd)
    {
        fp = fdopen(fd, "wb");

        fprintf(fp, "Testing...\n");
        fclose(fp);
    }

    return 0;
}

# g++ -std=c++11 -o test test.cpp
test.cpp: In function 'int main(int, char**)':
test.cpp:14:29: error: 'fdopen' was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T12:14:58.660

无论你做什么，请不要乱用`__STRICT_ANSI__`旗帜。该符号由 GCC 控制。您应该让 GCC 定义它并不管它。

您真正需要的是`_POSIX_C_SOURCE`功能测试宏。你看，`fdopen`不是由C语言标准定义的。当您告诉 GCC 您正在编写 C++11 程序时，GCC 会进入“严格”模式，在该模式下，它会尝试不定义该语言未定义的任何函数。这是为了避免名称与您自己的代码冲突。例如，一个有效的 C++11 程序可以自由定义自己的函数`fdopen`，因为`fdopen`它不是语言中的保留标识符。

But`fdopen` *由*POSIX 定义，POSIX 是一个包含但独立于 C 语言标准的标准。在编写使用 POSIX 函数的应用程序时，例如`fdopen`，**您必须告诉系统您打算编写一个 POSIX 应用程序**，以便它知道它应该使 POSIX 定义的函数对您的程序可用。这是`_POSIX_C_SOURCE`功能测试宏的用武之地。在每个源文件的顶部，在包含任何标题之前，将此宏定义为适当的值。例如：

```
#define _POSIX_C_SOURCE 200112L 
```

您应该在定义中使用的值取决于您所针对的 POSIX 版本。如果您不确定要定位哪个版本，您可以只定位与您的主机系统兼容的相同版本。您可以通过`getconf`从 shell 运行来确定这一点：

```
$ getconf _POSIX_VERSION
200809L
$ _ 
```

在这里，我的系统告诉我它符合 POSIX 版本`200809L`（即 POSIX.1-2008）。我可以`#define _POSIX_C_SOURCE 200809L`在我的源代码中并确信我的系统支持的所有标准功能都将提供给我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T09:51:35.987

问题来自`-std=c++11`. 该`fdopen()`函数不在 ANSI C 中（仅在 POSIX 标准中），使用`-std=c++11`选项编译意味着定义`__STRICT_ANSI__`，它排除了`stdio.h`. 顺便说一句，在 C++ 程序中，您通常应该包含`<cstdio>`而不是`<stdio.h>`，请参见此处：[stdio.h not standard in C++?](https://stackoverflow.com/questions/7596406/stdio-h-not-standard-in-c) .

如果您需要使用`fdopen()`，您可能希望`-std=c++11`在编译时删除该选项。另一种可能的解决方案虽然不是很优雅，但可以在源代码中使用它：

```
#ifdef __STRICT_ANSI__
#undef __STRICT_ANSI__
#include <cstdio>
#define __STRICT_ANSI__
#else
#include <cstdio>
#endif 
```

（旨在使用和不使用该`-std=c++11`选项）。

# css - 均匀分布的图像网格

> ID：15944055
> 
> 赞同：2
> 
> 时间：2013-04-11T08:28:53.467
> 
> 标签：css, layout, grid, thumbnails, fluid

我一直在这个网站上，但还没有找到合适的解决方案。

我正在制作一个摄影网站，左侧有一个固定的菜单栏 div，右侧有一个内容 div。在照片库页面中，应该有一个带有流动边距的图像缩略图网格，以便缩略图始终均匀地分布在右侧（内容）div 上。

这是结构：

```
<body>
<div id="wrapper">
<div id="left_column">
<div class="navigation"></div>
</div>
<div id="right_column">

    <div id="thumb_container" class="grayscale">
    <a href="#"><div id="thumb_fx" ></div></a>
    <img src="images/testimg.jpg" width="240" height="187" />
    </div>
...
    <div id="thumb_container" class="grayscale">
    <a href="#"><div id="thumb_fx" ></div></a>
    <img src="images/testimg.jpg" width="240" height="187" />
    </div>

</div>
</div>
</body> 
```

^每个缩略图中都有一个小插图翻转动画。

和CSS：

```
html {
height: 100%;
padding:0;
margin:0;
}

body {
    height: 100%;
    padding: 0;
    margin: 0;
}

#wrapper {
    float: left;
    height: 100%;
    width:100%;
    padding:0;
    margin:0;
}

#left_column {
    position: fixed;
    top: 0;
    bottom: 0; 
    left: 0;
    z-index:100;
    width: 240px;
    height: 100%;
    overflow: hidden;
    background-color:#ff0000;
}

#right_column {
background-color:#cccccc;
width:auto;
height:100%;
    margin-left: 240px;
    position: absolute;
}

#thumb_container {
    position: relative;
    max-width:50%;
    min-width:240px;
    height:auto;
    border-color:#000000;
    display: inline-block;
    margin: 2%;
}

#thumb_fx { 
    opacity: 1;
    filter: alpha(opacity=100);
    -webkit-transition: opacity 0.5s linear;
    transition: 0.5s;
    -moz-transition: 0.5s; /* Firefox 4 */

    z-index: 100;
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: transparent;
    box-shadow:inset 0px 0px 85px rgba(0,0,0,1);
    -webkit-box-shadow:inset 0px 0px 85px rgba(0,0,0,1);
    -moz-box-shadow:inset 0px 0px 85px rgba(0,0,0,1);
}

#thumb_fx:hover {   
    opacity: 0;
    filter: alpha(opacity=0);
    -webkit-transition: opacity 0.5s linear;
    transition: 0.5s;
    -moz-transition: 0.5s; /* Firefox 4 */
}

.grayscale img{
    max-width:100%;
    min-width:50%;
    height:auto;
    position: relative;
    border:none;
    z-index: -1;
    position: relative;
} 
```

到目前为止最好的解决方案是：http: [//jsfiddle.net/VLr45/1/](http://jsfiddle.net/VLr45/1/)但是在 div 被放到下一行之前，边距太紧了。而且我不明白如何调整它们。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:35:01.993

当您计算适合的框数时，添加您想要的最小边距：

边距为像素

```
var boxMinMargin = 10; // 10px

var columns = Math.floor(parent / (box + boxMinMargin)); 
```

[http://jsfiddle.net/VLr45/14/](http://jsfiddle.net/VLr45/14/)

* * *

保证金为 %

```
var boxMinMargin = box * 0.1; // 10% of box

var columns = Math.floor(parent / (box + boxMinMargin)); 
```

[http://jsfiddle.net/VLr45/24/](http://jsfiddle.net/VLr45/24/)

* * *

如果你更喜欢用 css 设置边距，你可以`width`在你的`box`类中设置

```
.box {
    margin: 2%;

    /*

    or

    margin-top: 2%;
    margin-right: 3%;
    margin-bottom: 4%;
    margin-left: 5%;    

    */
} 
```

[http://jsfiddle.net/VLr45/17/](http://jsfiddle.net/VLr45/17/)

# asp.net - 路由参数和正文的 ServiceStack DTO 模型绑定

> ID：15944056
> 
> 赞同：2
> 
> 时间：2013-04-11T08:28:54.987
> 
> 标签：asp.net, rest, servicestack

我设置了一个请求 DTO，用于针对导致更新的服务执行 PUT。

我需要将路由参数和 json 有效负载作为 PUT 发送（此有效负载是下面的 ApprovalRoleData 对象，表示我希望在服务器上反映的对象的新状态）：

```
[Route("/qms/{QAID}/reviewers/{RoleType}", "PUT")]
public class UpdateReviewer
{
    public string QAID { get; set; }
    public string RoleType { get; set; }

    public ApprovalRoleData UpdatedRoleData { get; set; }
} 
```

在我的服务中，我有一个接受此 DTO 的 Put() 调用：问题是 ApprovalRoleData 对象没有被反序列化（但 QAID 和 RoleType 是）：

```
public object Put(UpdateReviewer request)
{
     string QAID = request.QAID;    //can see value
     string RT = request.RoleType;  //can see value

     ApprovalRoleData ard = request.UpdatedRoleData;  //null

} 
```

有没有像在 WebAPI 中那样指定我希望模型绑定同时使用路由参数和正文的方法？

**边注：**

此外，获取底层流以便我可以解析自己`base.RequestContext.Get<IHttpRequest>().InputStream`并没有工作，因为没有剩余的流可供读取（我假设进行模型绑定的 ServiceStack 部分可能在我到达它时消耗了流?)

# ssas - MDX - 在层次结构中向下钻取到具有包含“#”的成员标题的最后一级

> ID：15944058
> 
> 赞同：2
> 
> 时间：2013-04-11T08:29:07.723
> 
> 标签：ssas, mdx, bids

我有一个 UserHierarchy，当当前级别的成员标题在名称中包含“#”时，类似于特定的用户类型。UserHierarchy 最多包含 5 个级别。

我想显示向下钻取的数据，但仅适用于这些特定的用户类型，因此只有那些带有“#”的标题。我还想汇总孩子们的数据。

MDX 中是否有一种简单的方法来完成此操作？

例子 ：

```
#User1 2 欧元
---#User2 €6
---------用户4 €9
---------用户5 €4
---#User3 €2
---------用户6 €4
---------用户7 €4

```

我想像这样为自己和孩子展示数字。为了理解，我包括了这些数字的来源：

```
#User1 2 欧元
---#User2 19 欧元（获得自：6 欧元 + 9 欧元 + 4 欧元）
---#User3 10 欧元（获得自：2 欧元 + 4 欧元 + 4 欧元）

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:50:51.690

```
select [Measures].[Internet Sales Amount] on columns,
non empty(
 distinct(
  descendants({[Product].[Category].children}) *
    {filter([Product].[Subcategory].members,
      instr([Product].[Subcategory].currentmember.member_caption, 'T') = 1)
    } 
  * descendants({[Product].[Product].children})
 )
)
on rows  from cube 
```

结果与详细信息：

![结果](https://i.stack.imgur.com/ZcgZ2.png)

“第二个结果：

在这里，我删除了该行：

```
* descendants({[Product].[Product].children}) 
```

我认为这就是您想要的，因为它显示了孩子的总数。

![结果2](https://i.stack.imgur.com/QubfV.png)

您需要将“T”换成“#”，然后还需要将维度名称和要显示为度量的内容。

# excel - Excel VLookup 基于 3 张工作表中的两个变量

> ID：15944071
> 
> 赞同：0
> 
> 时间：2013-04-11T08:29:46.213
> 
> 标签：excel

我正在尝试将基于 2 个变量的 3 张表中存储的数据总数汇总到汇总表（即第四张表）中。

我想匹配摘要表上每个地方的地名和周数。

在“摘要”表的顶部，我们要使用的周数。A列中的地点列表和B列中的访问次数。

这个公式奏效了。

```
=SUMIFS(ND!$V$3:$V$4000,ND!$F$3:$F$4000,TEST!$A$1,ND!$B$3:$B$4000,TEST!A3) 
```

在每行的摘要表的 B 列中。然而，它只从一张表中查找数据，而不是全部 3。我试过这个，但它会导致错误：

```
=SUMIFS(AND(ND!$V$3:$V$4000,GK!$V$3:$V$4000,TW!$W$3:$W$4000),AND(ND!$F$3:$F$4000,GK!$F$3:$F$4000,TW!$F$3:$F$4000),TEST!$A$1,AND(ND!$B$3:$B$4000,GK!$B$3:$B$4000,TW!$B$3:$B$4000),TEST!A3) 
```

我们如何让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:06:19.527

你能用公式吗

```
=SUMIFS(ND!$V$3:$V$4000,ND!$F$3:$F$4000,TEST!$A$1,ND!$B$3:$B$4000,TEST!A3) 
```

3 次喜欢

```
=SUMIFS(ND!$V$3:$V$4000,ND!$F$3:$F$4000,TEST!$A$1,ND!$B$3:$B$4000,TEST!A3)+SUMIFS(GK!$V$3:$V$4000,GK!$F$3:$F$4000,TEST!$A$1,GK!$B$3:$B$4000,TEST!A3)+SUMIFS(GW!$V$3:$V$4000,GW!$F$3:$F$4000,TEST!$A$1,GW!$B$3:$B$4000,TEST!A3) 
```

# c# - 全景列表中的图像抛出内存不足异常

> ID：15944078
> 
> 赞同：2
> 
> 时间：2013-04-11T08:30:27.457
> 
> 标签：c#, xaml, windows-phone-7

我有一个全景页面，其中提要列表来自上一页，其中包含一些图像。因此，如果该列表的大小增加，则会引发内存不足异常。此外，我的 Pivot 位于模板中，因此我什至无法对图像执行处置操作。请帮忙。卡在这个问题上很久了。

Constants.messageDiscArray，我在上一页中设置为一个常量文件。而且全景图位于模板中，因此我也无法对图像执行任何功能以进行垃圾收集。任何帮助将不胜感激。

**这是我的 xaml 代码：**

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,0,0">
     <controls:Panorama x:Name="FeedsPanorama" Title="Dashboard Column" ItemsSource="{Binding Constants.messageDiscArray}" >
     <controls:Panorama.ItemTemplate>
          <DataTemplate>
               <Grid Margin="0,-300,0,0">
               <Grid Margin="0,0,0,0">
               <Image Height="30" HorizontalAlignment="Left"  Margin="15,319,0,0" Name="image11" Stretch="Fill" VerticalAlignment="Top" Width="30" Source="/WpControlsExample;component/Images/assigns.png" />
               <Image Height="30" HorizontalAlignment="Left" Margin="340,319,0,0" Name="image13" Stretch="Fill" VerticalAlignment="Top" Width="30" Source="{Binding spamURL}" />
               <Image Height="30" HorizontalAlignment="Left" Margin="376,319,0,0" Name="image14" Stretch="Fill" VerticalAlignment="Top" Width="30" Source="{Binding sentimentURL}" />

               </Grid>
               </Grid>
         </DataTemplate>
    </controls:Panorama.ItemTemplate>
    </controls:Panorama>
    </Grid>
</Grid> 
```

下面是我的 C# 代码

```
public partial class MessageDescription : PhoneApplicationPage
{
    private ObservableCollection<InboxItem> msArray = new ObservableCollection<InboxItem>();

    public MessageDescription()
    {
        InitializeComponent();
        loadPanoramaFeeds();
    }

    private void loadPanoramaFeeds()
    {
        for(int i=0;i< Constants.messageDiscArray.Count;i++){
            msArray.Add(Constants.messageDiscArray[i]);
        }
        this.FeedsPanorama.ItemsSource = msArray;
        this.FeedsPanorama.DefaultItem = this.FeedsPanorama.Items[Constants.messageIndex];
    }
} 
```

# c# - UserControl 并使 Dock 属性为 ReadOnly - 这是正确的方法吗？

> ID：15944087
> 
> 赞同：0
> 
> 时间：2013-04-11T08:31:02.497
> 
> 标签：c#, visual-studio-2010, user-controls

我创建了一个从 UserControl 派生的自己的控件，我想让 Dock 属性成为只读的，并且通过试验和错误，我得到了这样的东西：

```
public partial class Header : UserControl
{
    public Header()
    {
        InitializeComponent();
        base.Dock = DockStyle.Top;
    }

    /// <summary>
    /// Gets the DockStyle of the control
    /// </summary>
    [Browsable(false)]
    [ReadOnly(true)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    public new DockStyle Dock
    {
        get
        {
            return base.Dock;
        }
        private set
        {
            base.Dock = DockStyle.Top;
        }
    }
} 
```

这是正确的方法吗？简单地说：我希望控件始终停靠在顶部（因为它是标题 :)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:33:40.010

删除 set 块，一切都应该按预期工作：

```
public new DockStyle Dock
    {
        get
        {
            return base.Dock;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:37:52.420

`private set`您没有很好地实现，因为它设置为`base.Dock`硬编码值而不是给定值。要么完全删除它，要么制作它

```
private set
{
    base.Dock = value;
} 
```

但是请注意，您的 Header 类的用户仍然可以将其转换为`UserControl`并设置`Dock`属性。没有 100% 的方法可以防止这种情况发生。

# dosbox - 如何增加 DOSBox 窗口的大小？

> ID：15944089
> 
> 赞同：42
> 
> 时间：2013-04-11T08:31:09.923
> 
> 标签：dosbox

我在 Ubuntu 12.04 的 DOSBox 上运行 Turbo C。

问题是两个黑色条纹出现在任一屏幕上。我想删除它们。

[![20130411_131000](https://farm9.staticflickr.com/8250/8638868899_60b1877335_z.jpg)](https://www.flickr.com/photos/94847797@N02/8638868899 "20130411_131000，作者 Mahi Singh，在 Flickr 上")

我的电脑是戴尔 Studio 15z，屏幕分辨率为 1366x768。即使发生失真，我也没有问题。

[我的dosbox.conf](http://www.2shared.com/file/kZMpZHuC/dosbox.html)文件的相关部分：

```
[sdl]
fullscreen=true
fulldouble=false
fullresolution=1366x768
windowresolution=1366x768
output=overlay
autolock=true
sensitivity=100
waitonerror=true
priority=higher,normal
mapperfile=mapper-0.74.map
usescancodes=true 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-07-15T10:35:58.337

*   转到 dosbox 安装目录（在我的机器上是 C:\Program Files (x86)\DOSBox-0.74 ），因为您看到版本号是安装目录名称的一部分。

*   运行“DOSBox 0.74 Options.bat”

*   该脚本使用配置文件启动记事本：此处更改

    窗口分辨率=1600x800

    输出=ddraw

（如果 output=surface，则无法更改分辨率 - 这是默认设置）。

*   安全的配置文件更改。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-23T05:30:11.453

[要在SDL](http://www.dosbox.com/wiki/Configuration:SDL)中使用 DOSBox ，您需要设置或更改以下内容：

```
[sdl]
windowresolution=1280x960
output=opengl 
```

这是放置这些设置的三个选项：

1.  编辑用户的默认配置，例如，使用`vi`：

    ```
    $ dosbox -printconf
    /home/USERNAME/.dosbox/dosbox-0.74.conf
    $ vi "$(dosbox -printconf)"
    $ dosbox 
    ```

2.  对于临时调整大小，请使用上面的三行创建一个新配置，例如`newsize.conf`：

    ```
    $ dosbox -conf newsize.conf 
    ```

    您可以使用`-conf`加载多个配置和/或使用`-userconf`默认配置，例如：

    ```
    $ dosbox -userconf -conf newsize.conf 
    [snip]
    ---
    CONFIG:Loading primary settings from config file /home/USERNAME/.dosbox/dosbox-0.74.conf
    CONFIG:Loading additional settings from config file newsize.conf
    [snip] 
    ```

3.  在当前目录下创建一个`dosbox.conf`，DOSBox 默认加载它。

在这种情况下，DOSBox 应该启动并调整为 1280x960。

请注意，您可能无法获得所需的任何尺寸，例如，我设置了 1280x720，而我得到了 1152x720。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-24T03:24:53.613

下面介绍如何在 Linux 中更改 dosbox.conf 文件以增加窗口大小。我实际上做了下面的事情，所以我可以说它有效（无论如何，在 32 位 PCLinuxOS fullmontyKDE 中）。问题的答案在 .conf 文件本身中。

您可以在 Linux 中的 /home/(username)/.dosbox 找到此文件。在 Konqueror 或 Dolphin 中，您必须先检查“隐藏文件”，否则您将看不到该文件夹​​。使用 KWrite 超级用户或您喜欢的编辑器打开它。

1.  使用另一个名称（例如“dosbox-0.74original.conf”）保存文件以保留原始文件，以备您需要恢复时使用。
2.  搜索“分辨率”并仔细阅读 conf 文件中有关更改它的内容。本质上有两个变量：分辨率和输出。您现在想不理会全分辨率。你的问题是关于窗口的，而不是完整的。所以寻找windowresolution，看看conf文件中的注释说你能做什么。最好的建议是使用更大的窗口分辨率，如 900x800（这是我在 1366x768 屏幕上使用的），但不是机器的实际分辨率（这会使窗口全屏，你说你不想要那个）。具体来说，将 'windowresolution=original' 替换为 'windowresolution=900x800' 或其他尺寸。在我的屏幕上，窗口大小增加了一倍，就像 Windows 属性中的最大字体选项卡一样（对于 exe 文件；正如您将在 ==== 标记下方看到的那样，

然后，搜索“输出”，并且正如 conf 文件中的指令警告的那样，当且仅当您有“硬件缩放”时，将默认的“输出=表面”更改为其他内容；然后他列出了可选的其他设置。我将其更改为“输出=覆盖”。还有另一个设置要测试：方面。在文件中搜索“方面”，如果您想要更大的窗口，请将“假”更改为“真”。当我这样做时，窗口占据了屏幕的一半以上。单独留下“假”，我有一个小一点的窗口（我使用宽屏显示器，无论是笔记本电脑还是台式机，也许这就是原因）。

因此，在您进行更改后，使用原始名称 dosbox-0.74.conf 保存文件。然后，在命令行键入 dosbox 或使用命令 dosbox 创建一个启动器（在 KDE 中，这是在桌面上单击鼠标右键）。您仍然需要执行 mount 命令（即 mount c~ c:\123 如果这是您要执行的位置和文件）。我确信有一种方法可以制作脚本，但还没有学会如何去做。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-25T16:38:58.400

再次查看您的问题，我想我看到您的 conf 文件有什么问题。你设置：

全分辨率=1366x768 窗口分辨率=1366x768

这就是为什么你得到信箱（两边都是黑色的）。您实际上已经告诉 Dosbox，您的屏幕与您的窗口大小相同，但您的屏幕实际上更大，根据谷歌搜索该计算机的规格，您的屏幕为 1600x900（或更高）。因此，“差异”以黑色显示。因此，您应该将 fullresolution 更改为您的实际屏幕分辨率，或者恢复为 fullresolution=original 默认值，并且只指定窗口分辨率。

所以现在我想知道你是否真的想要全屏，尽管你的问题只询问了一个窗口。因为你得到了一个窗口，但是你把它的尺寸缩小到你的屏幕上，因此有两条黑色条纹（信箱）。如果您真的想要全屏，那么您需要指定屏幕的实际分辨率。1366x768 不够大。

下一个问题是，程序本身的分辨率是多少？它不会超过自己的决议。因此，如果程序/游戏（本机）是 1280x720（高清），那么您的窗口分辨率设置不应大于该值（请记住，当您使用 AxB 作为窗口分辨率时，它是固定的而不是动态的）。

示例：DOS Lotus 123 将仅扩展 8 列和 20 行。Dosbox 越大，文本越大，但列和行不会更多。因此，为此设置更高的窗口分辨率，只会导致更大的文本，而不是更多的列和行。之后，您将拥有信箱。

希望这可以更好地帮助你。

# javascript - 从谷歌地图中获取图像

> ID：15944090
> 
> 赞同：1
> 
> 时间：2013-04-11T08:31:15.007
> 
> 标签：javascript, asp.net, google-maps-api-3

我现在用谷歌地图有问题。那就是我不知道如何从谷歌地图中捕获图片。我开发了我的应用程序，它使用了谷歌地图 api ver3，它可以显示多个标记、线条、我的应用程序的图标、圆圈和许多类似的东西。因此，很难使用 Google 静态地图 API url，例如

![](https://maps.googleapis.com/maps/api/staticmap?center=Boston,MA&visible=77+Massachusetts+Ave,Cambridge,MA%7CHarvard+Square,Cambridge,MA&size=512x512&sensor=true)

> maps.googleapis.com/maps/api/staticmap?center=Boston,MA &visible=77+Massachusetts+Ave,Cambridge,MA%7CHarvard+Square,Cambridge,MA&size=512x512&sensor=true_or_false

希望那里的每个人都为我提出任何解决方案！谢谢 ！
P/S：我使用了谷歌地图 v3，asp.net。

# c++ - 使用字符串赋值和复合赋值是否安全？

> ID：15944093
> 
> 赞同：5
> 
> 时间：2013-04-11T08:31:17.530
> 
> 标签：c++, string

如果我有：

```
#include <string>

std::string myString = "Hello"; 
```

然后执行以下任一操作：

```
myString = "Hello World"; 
```

或者

```
myString+= " World"; 
```

我是否有重写其他记忆的风险？
我是否必须使用字符串函数来添加或更改字符串的大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T08:32:37.570

使用`std::string`，这完全可以`std::string`管理自己的内存。

使用 c 风格的字符串 using `char*`，您需要管理自己的内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T08:39:32.603

std 字符串就像任何其他容器类一样，如 vector。它们还具有连续的内存结构，当它们需要额外空间时，它们只需为自己重新分配内存。

如果您正在处理频繁的字符串更新并且您的字符串会及时增长，您可以调用 string::reserve() 方法为您的字符串预分配一些内存，以便新插入不会导致大量内存移动

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:36:20.900

Using`string`让您可以像其他原始数据类型一样处理它`int` `float`。

`int a = 3;`可以造成`a = 5`或`a += 3`不造成任何伤害

同样适用

```
string myString = "Hello";

myString = "Hello World";

myString+= " World"; 
```

# jsf-2 - 如何以编程方式取消选择 Datatable 中的选定行

> ID：15944095
> 
> 赞同：5
> 
> 时间：2013-04-11T08:31:22.127
> 
> 标签：jsf-2, primefaces, datatable

在我的应用程序中，`dialog`我在每一列中显示了`dataTable`一个复选框来选择相应的行。在底部`dialog`我调整了两个按钮，一个用于显示选定的行，另一个用于重置数据表意味着取消选择选定的行。

.xhtml 代码如下：

```
<p:dialog id="popUp" header="Activity Detail" widgetVar="popUpWidget" 
 showEffect="fade" hideEffect="explode" resizable="false" modal="true">
<h:panelGrid>
    <p:row>
        <p:column colspan="2">
            <p:dataTable id="userListForAdminpopup" value="#{activityListController.activityUsers}" var="user"
                paginator="true" paginatorPosition="bottom" widgetVar="userListForAdminpopUp"
                paginatorTemplate="{FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                rows="10" selection="#{activityListController.selectedActivityUsers}">

                <p:column headerText="#{adbBundle['fullName']}"
                    sortBy="#{user.lastName}" filterBy="#{user.fullName}"
                    filterMatchMode="contains" styleClass="userName">
                    <h:outputLabel value="#{user.firstName}" />
                </p:column>

                <p:column selectionMode="multiple" />
            </p:dataTable>
        </p:column>
    </p:row>
    <p:row>
        <p:column colspan="2">
            <h:panelGroup layout="block">
                <p:commandButton value="Update" oncomplete="confirmation.show()"/>
                <p:commandButton value="Reset"/>
            </h:panelGroup>
        </p:column>
    </p:row>
</h:panelGrid></p:dialog> 
```

单击重置按钮时，我想取消选择行。怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-24T09:29:25.753

我们可以`p:dataTable`使用取消选择行`unselectAllRows()`

```
<p:dataTable
    id="dataTableId"                             
    widgetVar="dtWidgetVar"
    value="#{myBean.items}"
    var="item"
    ....>
</p:dataTable>

<p:commandButton value="Reset" onclick="PF('dtWidgetVar').unselectAllRows()" /> 
```

从豆

```
PrimeFaces.current().executeScript("PF('dtWidgetVar').unselectAllRows()"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T09:39:31.287

你试试：

```
<p:commandButton value="Reset" update="userListForAdminpopup" process="@this" actionListener="#{activityListController.hand}"/> 
```

豆：

```
public void hand(){
   selectedActivityUsers = new ActivityUsers(); // Type of element of list
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-21T12:55:45.727

试试这个：

```
DataTable dataTable = (DataTable) FacesContext.getCurrentInstance().getViewRoot().findComponent("form:dataTable"); 
dataTable.reset(); 
```

# java - JAVA 类路径

> ID：15944100
> 
> 赞同：0
> 
> 时间：2013-04-11T08:31:39.223
> 
> 标签：java, classpath

我有一个以某种方式运行的应用程序，当它执行时，它使用为 java 可执行文件设置的当前类路径，但不幸的是，它并没有使应用程序像它应该的那样工作，但是当我通过添加来改变这个路径时应用程序运行良好的额外字符，

所以我相信应用程序绕过了使用路径，这就是为什么它可以在更改后的 java 类路径中正常工作。但问题是其他人正在将此路径用于他们自己的应用程序，换句话说，我只能暂时更改此路径，并且始终必须将其放回正常路径。

但我在想的是，我应该有一种方法能够创建一个包含 Java 路径的文件，当应用程序执行此应用程序时，我可以将其放入文件夹中，而不是应用程序查看第一个类路径它只查看文件夹中的那个。

关于如何做到这一点的任何想法？提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:38:57.853

执行应用程序时，可以设置类路径：

```
java -cp ..... -jar my.jar 
```

您根本不需要设置全局变量。请参阅[java 手册](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:42:10.417

不确定我是否正确，但这是 Manifest.mf 文件应包含的内容...这是示例：

```
Manifest-Version: 1.0
Built-By: xxx
Build-Jdk: 1.7.0_17
Class-Path: lib/some1.jar lib/some2.jar
Created-By: Apache Maven 3.0.4
Main-Class: full.qualified.main.class.name
Archiver-Version: Plexus Archiver 
```

class-path 变量负责将正确的类路径传递给应用程序。

# batch-file - 用特殊字符批量替换不起作用

> ID：15944101
> 
> 赞同：3
> 
> 时间：2013-04-11T08:31:39.907
> 
> 标签：batch-file, cmd

我正在尝试将双引号简单地批量替换为单引号。测试字符串最多必须包含特殊字符：`"<LF>"` 我不能在那里替换双引号，因为批处理只存在于`Syntaxerror`. 你知道为什么，或者如何克服这个吗？

```
SET TEST="<LF>","<HT>"
SET modified=%TEST:"='%  <-- Syntaxerror
ECHO %modified% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:07:03.353

使用延迟扩展：

```
setlocal enabledelayedexpansion
SET TEST="<LF>","<HT>"
SET modified=!TEST:"='!  <-- Syntaxerror
ECHO !modified! 
```

正如[Fuzzy Button 先生](https://stackoverflow.com/a/15944691/73070)所说，问题在于 shell 将其解释`<`为`>`重定向。延迟扩展（使用`!`而不是）在解析*后*`%`扩展变量，因此不会影响重定向。

 *`SET`您可以通过将参数括在引号中来解决没有延迟的扩展：

```
SET "modified=!TEST:"='!" 
```

但是`ECHO`，那仍然是有问题的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T17:37:47.950

虽然延迟扩张是一件好事，但没有必要回答这个问题。有时 setlocal 不可用。我碰到了一个。

在 windows shell 中，引号的字符串匹配适用于最外层的匹配对（在大多数情况下，但不是全部），而不是最内层。

```
SET TEST="<LF>","<HT>"
echo %TEST%
SET "modified=%TEST:"='%"
echo.|set /p "___=%modified%" 
```

解决方法：如果 echo 无法打印某些内容，则设置可以。去搞清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:03:08.457

这对我有用...

```
SET TEST="LF","HT"
echo %TEST%
SET modified=%TEST:"='%
ECHO %modified% 
```

问题在于您`<`的 s 和`>`s 被解释为`Echo`*

# java - Java webapp code moved to library cannot resolve HttpServletRequest

> ID：15944110
> 
> 赞同：0
> 
> 时间：2013-04-11T08:32:26.623
> 
> 标签：java, web-applications, dependency-management

I recently moved a bunch of classes from a webapp to some standalone library.

Eclipse complained that `HttpServletRequest` was not resolved, so I added *Web App Library* to my `Java Build Path/Libraries` (following StackOverflow guidance)

=> Didn't change a thing although "Web App Libraries" is now included in my Libraries.

**How can I get HttpServletRequest to be resolved without webapp dependancies?**

**Edit: Removing "Web App Libraries" and adding servlet-api.jar found in Apache6 ./lib/ folder did the trick.**

I just hope I am not creating a dependancy on Tomcat version.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:48:32.593

As per the edit : Removing "Web App Libraries" and adding servlet-api.jar found in Apache6 ./lib/ folder did the trick.

# vb.net - VB2010：在文本框中允许浮点数/整数、退格和值范围

> ID：15944115
> 
> 赞同：0
> 
> 时间：2013-04-11T08:32:42.273
> 
> 标签：vb.net, visual-studio-2010

我在 Visual Basic 中有一个文本框（V​​isual Studio 2010，.net frame work 4.0）
现在我有一个问题！
我希望该用户只输入整数、浮点数、退格键和值范围？
使困惑？
哦，是的，我希望该用户只输入 0-4 之间的值（值可能是十进制的 3.49）
现在我想要完整的代码：
我有这个：
这是工作，但我无法指定 0-4 之间的范围

> Private Sub TextBox1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) 处理 TextBox1.KeyPress
> 
> ```
>  Dim FullStop As Char
>         FullStop = "."
> 
>         ' if the '.' key was pressed see if there already is a '.' in the string
>         ' if so, dont handle the keypress
> 
>         If e.KeyChar = FullStop And TextBox1.Text.IndexOf(FullStop) <> -1 Then
>             e.Handled = True
>             Return
>         End If
> 
>         ' If the key aint a digit
>         If Not Char.IsDigit(e.KeyChar) Then
>             ' verify whether special keys were pressed
>             ' (i.e. all allowed non digit keys - in this example
>             ' only space and the '.' are validated)
>             If (e.KeyChar <> FullStop) And
>                (e.KeyChar <> Convert.ToChar(Keys.Back)) Then
>                 ' if its a non-allowed key, dont handle the keypress
>                 e.Handled = True
>                 Return
>             End If
>         End If
> End Sub 
> ```

如果有人给我完整的代码，我会很高兴
提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:07:48.953

我只是使用 的 的好处`ascii codes`来`characters`解决您的问题，试试这个，如果您对以下实现有任何疑问，请随时给我评论。

```
 Private Sub TextBox1_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress

        'Ascii code 8 for backspace -- Ascii code 46 for (. period)
        If Asc(e.KeyChar) = 8 Or Asc(e.KeyChar) = 46 Then

            'If typed character is a period then we have to ensure that more than one of it
            'Should not get allowed to type. And also we have to check whether the period symbol
            'may cause any conflicts with MaxNo that is 4
            If Asc(e.KeyChar) = 46 Then
                If TextBox1.Text.IndexOf(".") <> -1 Or Val(TextBox1.Text.Trim & e.KeyChar) >= 4 Then
                    e.Handled = True
                Else
                    Exit Sub
                End If
            Else
                'If pressed key is backspace, then allow it.
                Exit Sub
            End If

        End If

        'Checking whether user typing more than 4 or not.
        If Val(TextBox1.Text.Trim & e.KeyChar) > 4 Then
            e.Handled = True
        End If

        '48 - 57  = Ascii codes for numbers
        If (Asc(e.KeyChar) < 48 Or Asc(e.KeyChar) > 57) Then
            e.Handled = True
        End If

    End Sub 
```

# php - 停止刷新页面

> ID：15944118
> 
> 赞同：0
> 
> 时间：2013-04-11T08:32:46.670
> 
> 标签：php, href, page-refresh

我有这种href：

```
 <a href=\"$_SERVER[PHP_SELF]?dir=down&key=$keyname\">DOWN</a></td> 
```

当我点击之前在表单中输入的数据丢失的链接时，有什么方法可以防止这种情况发生？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:46:44.580

您可以设置 cookie：

```
setcookie('savedData' , $whateverYouWantToHaveSaved, time()+60*60*24*7); 
```

或使用会话

```
session_id();
session_start();
$_SESSION['savedData'] = $whateverYouWantToHaveSaved; 
```

参考：
cookies：[http](http://www.php.net/setcookie)
://www.php.net/setcookie或
会话：[http ://www.php.net/manual/en/ref.session.php](http://www.php.net/manual/en/ref.session.php)

从那里您将通过以下任一方式调用您的数据：

```
$savedData = $_COOKIE['savedData']; 
```

或者

```
$savedData = $_SESSION['savedData']; 
```

其余的你需要自己学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:05:18.333

您可以在表单内使用隐藏的文本框，当您单击链接时，您会调用 javascript 函数来设置隐藏输入字段的值，并且该函数会提交实际的表单。之后，您可以从 PHP 访问隐藏的输入值。

```
<a href=\"setValue('$_SERVER[PHP_SELF]?dir=down&key=$keyname')\">DOWN</a></td> 
```

# c - Clang/LLVM 中的 _AddressOfReturnAddress() 等效项？

> ID：15944119
> 
> 赞同：5
> 
> 时间：2013-04-11T08:32:47.543
> 
> 标签：c, visual-c++, llvm, clang, addressof

Visual C++ 有[一个内部函数调用`_AddressOfReturnAddress`](http://msdn.microsoft.com/en-us/library/s975zw7k%28v=vs.100%29.aspx)，它返回当前函数在堆栈上的返回地址的地址 *。*

**请注意**，这与 不同*，*[`_ReturnAddress`](http://msdn.microsoft.com/en-US/library/64ez38eh%28v=vs.80%29.aspx)后者仅返回返回地址的*副本*。

`_AddressOfReturnAddress`在 Clang/LLVM 中是否有任何等价物？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-06T01:53:15.907

正如[rustyx 所](https://stackoverflow.com/users/485343/rustyx)指出的，Clang/LLVM（和 gcc）提供了`__builtin_return_address()`相当于`_ReturnAddress()`. *Clang* /LLVM 还提供了`__builtin_frame_address()`可能与.*`_AddressOfReturnAddress()`*

 *例如，以下代码...

```
std::cout<< ((int64_t) __builtin_return_address(0)) << ' '
         << ((int64_t) __builtin_frame_address (0)) << ' '
         <<*((int64_t*)__builtin_frame_address (0)+1)<<'\n'; 
```

...在 OSX 机器上打印以下内容。

```
140735807202733 140734600362944 140735807202733 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-01T13:22:16.077

不，LLVM IR 没有为此提供内在函数。*

# c++ - 如何在 Windows 上安装 MySQL c++ 驱动程序

> ID：15944120
> 
> 赞同：0
> 
> 时间：2013-04-11T08:32:48.273
> 
> 标签：c++, mysql, qt

我之前有一个问题，因为我的代码由于没有安装 mySQL 驱动程序而无法工作。

现在我已经下载了最新版本的 mysql 并拥有 qt 5.0.1 但是关于 Qt 的文档或我能找到的任何其他内容都不适用于 5.0.1 它显示了所有这些在 5.0.1 构建中不存在的 dir 路径和我找不到只安装此驱动程序的方法

任何帮助都会非常好，我正在使用 Windows 7 pro 顺便说一句

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:53:32.913

首先你需要找到你安装mysql的地方。我想它会在你的某个地方`Program Files`。在那里你会看到两个目录：`include`和`lib`. 如果没有 - 比你还没有安装 mysql 的开发者版本。不用担心，只需再次运行 mysql 安装，选择更新您当前的安装并确保在向导中选中“开发人员”。

现在让我们假设，你做的一切都是正确的，你找到了 mysql`include`和`lib`目录。记住它们（稍后我们将需要它们）。现在你进入你的 Qt 目录，并在那里找到驱动程序的源代码：`./Src/qtbase/src/plugins/sqldrivers/mysql`.

现在做几个步骤：

1.  打开cmd进入mysql驱动的源码目录
2.  类型`qmake "INCLUDEPATH+=C:/MySQL/include" "LIBS+=C:/MySQL/lib/libmysql.lib" mysql.pro`，其中 'C:/MySQL/include' 是 mysql 包含的路径，而 'C:/MySQL/lib' 是 mysql 库的路径。
3.  键入`nmake`（或者`make`如果您使用的是 mingw）
4.  输入`nmake install`（或`make install`）
5.  将 mysql 的 lib 路径添加到系统 PATH
6.  重启

之后，一切都应该正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:15:41.750

只需下载 5.0.2，因为它确实有效并且具有文档显示的路径

# iphone - 通过另一个 NSMutableArray 对具有自定义对象的 NSMutableArray 进行排序

> ID：15944121
> 
> 赞同：5
> 
> 时间：2013-04-11T08:32:48.700
> 
> 标签：iphone, ios, objective-c, sorting, nsmutablearray

我有 2 `NSMutableArrays`。第一个数组包含具有属性的自定义对象实例`NSString *itemID`，第二个数组仅包含来自`NSString`具有相同值的对象`itemID`，但顺序不同。我需要按`itemID`每个对象的属性对第一个数组进行排序，它应该像第二个数组一样排序。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:48:53.527

```
guideArray = < YOUR SECOND ARRAY WITH STRING OBJECT >;    
unsortedArray = < YOUR FIRST ARRAY WITH CUSTOM OBJECT >;

[unsortedArray sortUsingComparator:^(id o1, id o2) {
    Items *item1 = o1;
    Items *item2 = o2;
    NSInteger idx1 = [guideArray indexOfObject:item1.ItemID];
    NSInteger idx2 = [guideArray indexOfObject:item2.ItemID];
    return idx1 - idx2;
}];
NSLog(@"%@",unsortedArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:41:50.203

使用 as 键将自定义对象存储在字典`itemID`中，使用此字典作为查找对对象进行排序：

```
 NSArray *objects; // your objects
    NSMutableArray *hintArray; // your sorted IDs
    NSMutableDictionary *lookupDict = [[NSMutableDictionary alloc] initWithCapacity:[objects count]];
    NSMutableArray *sortedObjects = [[NSMutableArray alloc] initWithCapacity:[hintArray count]];

    for (id object in objects) {
        [lookupDict setValue:object forKey:[object itemID]];
    }

    for (id hint in hintArray) {
        [sortedObjects addObject:[lookupDict valueForKey:hint]];
    } 
```

编辑：就地解决方案`objects`：

```
 NSMutableArray *objects;
    NSMutableArray *hintArray;
    NSMutableDictionary *lookupDict = [[NSMutableDictionary alloc] initWithCapacity:[hintArray count]];

    int i = 0;
    for (NSString *itemID in hintArray) {
        [lookupDict setValue:[NSNumber numberWithInt:i] forKey:itemID];
        i++;
    }

    [objects sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        return [[lookupDict valueForKey:[obj1 itemID]] compare:[lookupDict valueForKey:[obj2 itemID]]];
    }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:42:42.977

您可以使用以下语法比较您的两个对象：-

```
[items sortUsingComparator:^NSComparisonResult(Attribute *obj1, Attribute *obj2) 
{
    return [[NSNumber numberWithInt:[stringOrder indexOfObject:obj1.itemID]] compare:[NSNumber numberWithInt:[stringOrder indexOfObject:obj2.itemID]]]
}]; 
```

否则您可以使用以下代码段：

```
NSArray* sortedKeys = [dict keysSortedByValueUsingComparator:^(id obj1, id obj2)
 {
    return [obj1 compareTo:obj2];
 } 
```

享受编程！

# sql-server - sql server back restore - 登录失败

> ID：15944123
> 
> 赞同：1
> 
> 时间：2013-04-11T08:32:52.890
> 
> 标签：sql-server, sql-server-2008-r2, production-environment

我在 sql server 2008 R2 上有一个本地数据库并且工作正常，

我的主机安装了 sql server 2012。在托管服务器上创建新数据库后，我可以使用给定的托管凭据轻松连接到空白数据库

我已经创建了 Sql Server 2008 备份并将其还原到主机并且每次都停止工作。

```
Cannot open database "dbName" requested by the login. The login failed. 
```

在创建备份之前，我确实创建了一个新用户，该用户具有与主机提供的相同凭据以连接其数据库。

很少有解决方案建议运行孤立用户查询，但无法连接到数据库

[http://sqlblog.com/blogs/eric_johnson/archive/2008/10/17/fixing-orphaned-users.aspx](http://sqlblog.com/blogs/eric_johnson/archive/2008/10/17/fixing-orphaned-users.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-02T15:22:52.723

它是由**孤儿用户**在进行备份和恢复时创建的

首先，确保这是问题所在。这将列出孤立的用户：

> EXEC sp_change_users_login '报告'

如果您已经有此用户的登录 ID 和密码，请通过以下方式修复它：

> EXEC sp_change_users_login 'Auto_Fix', 'user'

如果您想为此用户创建一个新的登录 ID 和密码，请通过以下方式修复它：

> EXEC sp_change_users_login 'Auto_Fix'、'user'、'login'、'password'

另一种方法对我有用

[![一只忙碌的猫](https://i.stack.imgur.com/UkTu3.jpg)](https://i.stack.imgur.com/UkTu3.jpg)
[（来源：[pinaldave.com](http://www.pinaldave.com/bimg/error4064_1.jpg)）]

[![一只忙碌的猫](https://i.stack.imgur.com/40au3.jpg)](https://i.stack.imgur.com/40au3.jpg)
[（来源：[pinaldave.com](http://www.pinaldave.com/bimg/error4064_2.jpg)）]

*确保将 [test] 替换为您的用户名，并将 master 替换为您的数据库名称*

[![一只忙碌的猫](https://i.stack.imgur.com/vkqZD.jpg)](https://i.stack.imgur.com/vkqZD.jpg)
[（来源：[pinaldave.com](http://www.pinaldave.com/bimg/error4064_3.jpg)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:22:02.097

您用于恢复数据库的帐户应该具有足够高的权限来修复登录用户链接。如果该登录名出现上述错误，则该登录名的默认数据库很可能设置为您刚刚恢复的那个。在这种情况下，您可以使用 SSMS“连接到数据库引擎”对话框上的“选项”按钮，并在“连接属性”选项卡的“连接到数据库”字段中选择不同的数据库。

![连接到数据库引擎](https://i.stack.imgur.com/xJbn0.png)

![在此处输入图像描述](https://i.stack.imgur.com/yJapX.png)

如果您使用需要连接字符串的其他工具，您也可以在其中显式指定数据库。

连接后，请按照您链接到的文章中的建议进行操作。

# cat - 如何制作 cat 之类的命令，而 less 保留制表符？

> ID：15944124
> 
> 赞同：6
> 
> 时间：2013-04-11T08:32:54.997
> 
> 标签：cat

有没有办法让`cat`等`less`打印制表符而不是将制表符转换为空格？当我将代码从终端复制到编辑器时，我对此感到恼火。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T02:33:41.690

我在这里看到两个问题。

1.  首先，目标编辑器可以将 TAB 转换为空格数。某些编辑器具有将 TAB 转换为空格数的默认功能。如果禁用此功能，您从终端复制的制表符字符将作为制表符（而不是空格）复制到编辑器。Windows Notepad++ 也有类似的功能 ![记事本++功能将制表符删除为空格](https://i.stack.imgur.com/iKGpM.png)。如果您使用 vim，此页面将有助于 [vim 制表符和空格转换](http://vim.wikia.com/wiki/Converting_tabs_to_spaces)

2.  另一个，您的案例终端中的源文件可能将制表符表示为空格，请先检查。您可以使用`cat -t filename`查看源文件中是否有任何 TAB。该命令将 TAB 字符显示为 ^I。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-08T07:11:19.617

似乎用更少的东西是不可能的（请参阅unix.stackexchange 上对[同一问题的回答）。](https://unix.stackexchange.com/questions/412060/how-to-get-less-to-show-tabs-as-tabs)

作为一种解决方法，它与 cat 一起使用，或者，对于一些最小的分页功能，与`more`命令一起使用。

# javascript - 使用 jQuery 设置背景图像只更改一次背景

> ID：15944127
> 
> 赞同：1
> 
> 时间：2013-04-11T08:33:03.993
> 
> 标签：javascript, jquery, switch-statement, background-image

我正在尝试`background-image`根据变量的值设置一个元素的属性。它只在第一次工作。当我切换到就绪状态时，背景图像停止变化。图像本身很小 - 大约 8-10 kB。

这是我的代码：

```
if(status != '') {
    console.log('status');
    console.log(status);

    switch(status) {
        case 'dev':
            $('#status').css('background-position','0px -160px');
            break;
        case 'ready':
            $('#status').css('background-position','0px -240px');
            break;
        case 'soon':
            $('#status').css('background-position','0px 0px');
            break;
        case 'design':
            $('#status').css('background-position','0px -80px');
            break;
    }
    } 
```

这里是元素的 CSS：

```
#status {
z-index: 1;
float: right;
height: 80px;
width: 80px;
background: url(/images/front/status-sprite.png);
background-position: 0px -160px;
margin: 0 10px 0 0;
} 
```

行为没有改变。背景图像会更改为准备就绪，但不会变回。

**编辑**：使用[csssprites.com](http://csssprites.com/)生成的精灵更新代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:02:03.920

您的代码看起来不错，我建议验证您尝试显示的每个图像的路径是否存在。[`!important`](http://css-tricks.com/when-using-important-is-the-right-choice/)（虽然如果路径是正确的，你可以用标签覆盖样式表）

**小提琴**

*   [背景小提琴](http://jsfiddle.net/killrawr/g6tJW/17/)
*   [雪碧小提琴](http://jsfiddle.net/killrawr/TZ4KH/3/)

虽然没关系，但没有必要`url()`用.[`background-image`](http://www.w3schools.com/cssref/pr_background-image.asp)`double quotations`

```
$('#status').css('background-image','url(/images/front/status-design.png)'); 
```

# android - Android - 垂直向下滚动后将布局对齐到顶部（类似于 happycog.com 的顶部菜单）

> ID：15944129
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:33:11.350
> 
> 标签：android, android-layout, android-listview, scroll, android-scrollview

在Android中，是否可以在垂直向下滚动后将布局（RelativeLayout / LinearLayout / etc.）捕捉到顶部（类似于happycog.com的顶部菜单）？

这可以在xml和java中实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:24:05.187

根据之前的评论：

是的，这是可能的，通常被称为*粘滞*的布局。来自同一作者 (Emil Sjölander) 的[`ListView`](https://github.com/emilsjolander/StickyListHeaders)和都有可用的实现。[`ScrollView`](https://github.com/emilsjolander/StickyScrollViewItems)这两个库都带有示例代码。

# sql - 添加列“上一个日期”

> ID：15944130
> 
> 赞同：1
> 
> 时间：2013-04-11T08:33:14.123
> 
> 标签：sql

我有这样的表：

PartNr、ProductionSite、ProductionType、PODate、PoPrice、PoCurrency

前三列定义了独特的产品。我想做的是再添加一列与以前的采购订单日期，以使价格有效的日期范围。这是示例：

```
PartNr....  Site....   Type....    Date

111111      BBBBB       100     2008-06-10

111111      BBBBB       100     2012-01-18

111111      BBBBB       100     2012-01-30

111111      AAAAA       100     2008-06-10

111111      AAAAA       100     2012-01-18

111111      AAAAA       100     2012-01-30 
```

我想得到这个

```
PartNr....   Site ....  Type  ....  Date    .... Added Column

111111  BBBBB       100     2008-06-10  ...       0

111111  BBBBB       100     2012-01-18  ...     2008-06-10

111111  BBBBB       100     2012-01-30  ...     2012-01-18

111111  AAAAA       100     2008-06-10  ...     0

111111  AAAAA       100     2012-01-18  ...     2008-06-10

111111  AAAAA       100     2012-01-30  ...     2012-01-18 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:43:34.203

您需要一个子查询来选择低于当前行日期的最大日期（并匹配 partnr 等），例如：

```
select PartNr, ProductionSite, ProductionType, PODate, PoPrice, PoCurrency,
(select max(PODate) from table t2 where t2.PODate < t1.PODate and t2.PartNr = t1.PartNr and t2.ProductionSite = t1.ProductionSite and t2.ProductionType = t1.productionType
 as added_column from table t1 
```

您也不需要将其作为表格中的列。请记住，数据库设计的基本规则是 - 永远不要存储您可以计算的内容*。

*除非您的数据库从不或几乎从不更改，并且您需要它非常非常快。这被称为“数据仓库”。

# wordpress - 响应式网站适用于桌面，但不适用于移动设备

> ID：15944131
> 
> 赞同：2
> 
> 时间：2013-04-11T08:33:23.037
> 
> 标签：wordpress, responsive-design, wordpress-theming, media-queries, retina-display

我正在开发这个响应式 Wordpress 网站：[http](http://www.allisoncassels.com/Test/) ://www.allisoncassels.com/Test/并且我的媒体查询有问题。

我为以下断点编写了 CSS：

```
/* Portrait Tablets */
@media only screen and (min-width: 768px) and (max-width: 959px) 

/*  Portrait Mobiles */
@media only screen and (max-width: 767px) 

/* Landscape Mobiles */
@media only screen and (min-width: 480px) and (max-width: 767px) 
```

在桌面上，一切看起来都很棒。在我的手机和平板电脑上，有些东西是移动的，有些东西仍然像桌面一样显示（我有显示的东西：没有显示，div 宽度关闭等）

我唯一能弄清楚的是它与我的手机/平板电脑是视网膜显示器有关，但我没有看到其他网站必须将其纳入计算...

现在真的很困惑，我会很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T01:20:54.837

把这个放在你的头上！！！:P

在元标记内。

name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

干杯，马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-26T05:08:33.180

你应该添加这个元

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

试试这个媒体查询**iPhone 6/6 Plus 和 Apple Watch CSS**媒体查询

```
@media only screen and (min-device-width: 375px)
 and (max-device-width: 667px)
 and (orientation: landscape)
 and (-webkit-min-device-pixel-ratio: 2)
 { } 
```

**iPhone 6 纵向**

```
@media only screen
and (min-device-width: 375px)
and (max-device-width: 667px)
and (orientation: portrait)
and (-webkit-min-device-pixel-ratio: 2)
{ } 
```

**iPhone 6 Plus 横向**

```
@media only screen
and (min-device-width: 414px)
and (max-device-width: 736px)
and (orientation: landscape)
and (-webkit-min-device-pixel-ratio: 3)
{ } 
```

**iPhone 6 Plus 肖像**

```
 @media only screen 
and (min-device-width: 414px) 
and (max-device-width: 736px) 
and (orientation: portrait) 
```

和 (-webkit-min-device-pixel-ratio: 3) { }

**iPhone 6 和 6 Plus**

```
 @media only screen
  and (max-device-width: 640px),
  only screen and (max-device-width: 667px),
  only screen and (max-width: 480px)
   { } 
```

**苹果手表**

```
 @media
  (max-device-width: 42mm)
   and (min-device-width: 38mm)
  { } 
```

对于图像响应

```
img {

   max-width: 100%;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:22:48.070

*更新*

昨晚我工作时，我的网络主机服务器崩溃了，我认为这影响了文件的正确传播......今天所有的响应代码都运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:43:28.363

尝试在未正确显示的元素周围添加彩色 css 边框，`border:thin red solid;`或更改`background-color`以找出是否正在使用 css 选择器。此外，如果您放入页面链接并指出您遇到问题的元素以及您正在测试的设备/设备浏览器，这将很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T08:39:23.710

这个 wordpress 主题 Avando 已经响应：

```
http://themefurnace.com/themes/?theme=Avando 
```

你不需要创建一些额外的 CSS

# vba - 访问宏所属的工作表

> ID：15944137
> 
> 赞同：0
> 
> 时间：2013-04-11T08:33:43.263
> 
> 标签：vba, excel, excel-2007

我想访问宏所属的工作表。为此，我正在使用此代码段。不使用此文件的名称是否有另一种方法？

```
Workbooks("file.xlsm").Activate
Dim sheet As Worksheet
Set sheet = ActiveWorkbook.Sheets(1)

sheet.Cells(1,1).Value = "message" 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:53:34.230

可以访问宏所在的工作簿。在这种情况下使用：

```
ThisWorkbook 
```

你在哪里：

```
Workbooks("file.xlsm") 
```

# php - PHP - 我可以在这个 if 语句中使用一个方程的函数吗？

> ID：15944139
> 
> 赞同：0
> 
> 时间：2013-04-11T08:33:54.467
> 
> 标签：php, function, if-statement

我有一个想要运行的警报系统，但根据统计数据，它需要在大于或小于上周这个时间的统计数据时发出警报。if 语句很简单：

```
if ((($past / 100) * 75) > $present) 
```

但是我需要在某些条件下将大于翻转为小于。函数是最好的方法吗？我无法完全理解他们在这方面的工作方式。一个例子会很好，我能找到的只是通用打印功能等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:38:09.997

```
function compare($a,$b,$operator)
{
 if($operator==">")
   {
    return ($a>$b);
   }
 else if($operator=="<")
   {
    return ($a<$b);
   }
} 
```

检查它是否更大

```
if (compare(($past / 100) * 75),$present,">") 
{

} 
```

检查它是否更小

```
if (compare(($past / 100) * 75),$present,"<") 
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T08:47:41.763

我认为你的 if 语句可以写成

```
if ( 
    (!$certain_condition && ($past / 100 * 75) > $present) 
    || ($certain_condition && ($past / 100 * 75) < $present) 
) 
```

假设*某些条件*的结果可以存储在变量中，`$certain_condition`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:53:19.113

把它放在一个函数中，然后按照你想要的方向喂它。

```
function comparison($past, $present, $gt = true){

if($gt){
  return  ( ( ($past / 100) * 75) > $present) ? true : false;
}else{
  return  ( ( ($past / 100) * 75)  <  $present) ? true : false;
}

}

// debug
// var_dump(comparison($past, $present, true)); 
```

像这样使用它 - 它返回真或假。

```
$past = 100;
$present = 80;

// usage eg
if( comparison($past, $present) ){
// start running some other process in gt> mode

} 
```

# c# - 带有点击集成的 C# 手形图像

> ID：15944141
> 
> 赞同：0
> 
> 时间：2013-04-11T08:33:57.317
> 
> 标签：c#, winforms

在我的程序中，我想用一只手的图像创建一个表格。现在，当用户单击每个手指时，它会改变颜色。任何想法如何实现这一目标。下面的示例图片： ![示例图像](https://i.stack.imgur.com/EpSxk.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:42:27.510

[使用GraphicsPath](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.graphicspath%28v=vs.90%29.aspx)创建手，并为您放入列表中的每个手指使用单独的 GraphicsPath`fingerPaths`

然后，当用户单击您的画布时，获取鼠标坐标 ( `Point mousePos`) 并执行如下命中测试：

```
foreach (GraphicsPath path in fingerPaths)
{
   if (path.IsVisible(mousePos)
   {
      // change color of path and invalidate your canvas
   }
} 
```

# windows - CacheInstaller.exe 无法从 Azure 模拟器启动

> ID：15944143
> 
> 赞同：1
> 
> 时间：2013-04-11T08:33:59.077
> 
> 标签：windows, visual-studio, caching, azure

昨天我的 Azure 模拟器开始运行，我不知道为什么。我没有更改设置等中的任何内容，所以这很奇怪。

当我运行该项目时，模拟器不会启动，最终它告诉我 CacheInstaller.exe 不会启动。

我尝试自己运行 CacheInstaller.exe，这就是我得到的。

[错误 http://lettingweb.com/img/email/capture.png](http://lettingweb.com/img/email/capture.png)

有谁知道问题可能是什么，这个错误对我来说似乎不是很清楚。

提前致谢。

# c# - 字符串未被识别为有效的 DateTime

> ID：15944144
> 
> 赞同：0
> 
> 时间：2013-04-11T08:34:00.397
> 
> 标签：c#, asp.net

我的代码是.......

```
 string PName = Request.QueryString["ProductName"] as string;
  string myDate = Request.QueryString["period"];

 string sql = "select FileName from tblProduct Where ProductName=" + PName;

    DateTime dt1 = Convert.ToDateTime(myDate);
    DateTime dt2 = DateTime.Now;
    TimeSpan variable = dt2 - dt1;
    if (variable.TotalMinutes > 5)
    {
        //Response.Write("Download time is expired now");
        lblmsg.Visible = true;
        lblmsg.Text = "Download time is expired now";
    }
    else
    {
        //string url1 = " http://www.shreehans.co.in/files/" + PName +"";
        //Response .Redirect ()
        lblmsg.Visible = true;
        lblmsg.Text = "U can Still Download";
    } 
```

我的 URl 带有查询字符串参数......

mail.Body += string.Format("http://www.abc.co.in/Download.aspx?period=" + DateTime.Now + "&ProductName=" + productName + "\">演示下载");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:38:22.460

这将解决您的问题

```
mail.Body += 
   string.Format("http://www.abc.co.in/Download.aspx?period=" + 
   DateTime.Now.ToString("dd-MMM-yyyy") + 
   "&ProductName=" + productName + "\">Demo Download"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:36:55.533

如果您在 url（查询字符串）中包含日期，则应将其编码为`Server.UrlEncode(DateTime.Now)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:38:51.247

此外：

1.  `\"`构建 URI 时缺少 a 。
2.  您的 SQL 代码容易受到 SQL 注入攻击。

# sql - Sql：Order by 和 Group by 之后的聚合 First()

> ID：15944145
> 
> 赞同：1
> 
> 时间：2013-04-11T08:34:07.637
> 
> 标签：sql

```
id | name | value | time |
--------------------------
1  | A | 1 | 1 | 
2  | B | 2 | 2 | 
3  | C | 2 | 3 | 
4  | A | 3 | 3 | 
5  | A | 4 | 2 | 
```

我预计结果如下：

```
name | value |
--------------
 A | 3 | 
 B | 2 | 
 C | 2 | 
```

结果是显示最新时间的名称和值，并且不与名称重复。我尝试查询：

```
SELECT name,First(value)
FROM
(SELECT name,value,time
FROM test
ORDER BY time DESC
)
GROUP BY name; 
```

但我得到了这个结果：

```
name | value |
--------------
 A | 1 | 
 B | 2 | 
 C | 2 | 
```

我不明白为什么 A 值不是 3，因为从子选择中我得到的 A 值分别是 3、4、1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:45:01.267

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/da25e/3)**

```
SELECT t.name,
       (SELECT t1.value
        FROM test t1
        WHERE t1.name = t.name
        ORDER BY t1.time DESC
        LIMIT 1) AS value 
FROM test t
GROUP BY t.name 
```

结果：

```
| NAME | VALUE |
----------------
|    A |     3 |
|    B |     2 |
|    C |     2 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:55:24.083

你也可以使用 partitionby

```
;with cte as (
  select id, row_number() over (order by time desc) rn
  from test
)
select * from test
join cte on test.id = cte.id and rn = 1 
```

只选择一个更快的

# javascript - 寻找家谱

> ID：15944146
> 
> 赞同：17
> 
> 时间：2013-04-11T08:34:08.977
> 
> 标签：javascript, html, treeview, html5-canvas, family-tree

我正在为我的 web 应用程序创建具有 HTML5 要求的家谱功能。我已经搜索并找到了一些 JS 示例，但我没有找到任何符合我要求的示例。我已经尝试过 JIT、Rafael、GoJS 等。

我发现这是最接近 GoJS 的：

> [GoJS 家族树选项 #1](http://gojs.net/latest/samples/familyTree.html)

但这还不够。我需要使用拖放功能将一个成员与另一个成员连接起来。

是否有一些 JS 可能符合要求或至少像 GoJS 一样运行？由于我需要为 GoJS 支付许可证然后对其进行定制，因此预算很紧。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T13:42:06.083

您正在寻找的功能内置于 GoJS。例如，看看
[Org Chart Editor Sample](http://gojs.net/latest/samples/orgChartEditor.html)。

您可以双击节点以添加新人，将节点拖到另一个节点以更改关系，并从节点的背景绘制链接（通过单击拖动操作）到没有“老板”的其他节点。

（如果你想让一个节点在这个简单示例中没有 Boss，你可以选择和删除链接）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T12:53:38.100

我已经找到了。我将[jsPlumb](https://jsplumbtoolkit.com/demos.html)用于这个家谱并进行了一些修改。谢谢大家。

# jquery - Jquery Q：单击后刷新按钮不刷新

> ID：15944149
> 
> 赞同：1
> 
> 时间：2013-04-11T08:34:16.187
> 
> 标签：jquery, jquery-mobile, setinterval, markup, jquery-mobile-button

刷新按钮不刷新，单击时不会恢复原始颜色。它只停留在蓝色背景上。如何在刷新问题的同时使其刷新。

```
<div data-role="navbar" >
     <ul>
          <li ><a id="PageRefresh" data-icon="refresh" >Question Shuffle</a></li>
     </ul>
</div>

<script>

$(document).ready(function() {
var jsonfile = 'data.json';

    $.getJSON(jsonfile, function(data) {
    Main(data);

    $('#PageRefresh').click(function() {
        Reload(data);
    });
});
}); 

var qData = [];
var qHint = [];

function Main(data){//Main Function
    LoadData(data);
    InitializeQuestion();

    $('#list').listview('refresh');
}

function Reload(data){//Reload Data Function
    ReInitializeQuestion();

    $('#list').listview('refresh');
}

function LoadData(data){//Preload Data Function
    var tempdata = data;
    var i=0;
    while (i<tempdata.activity.length) {
        var index = Math.floor(Math.random() * tempdata.activity.length);
        qData[i] = tempdata.activity[i].question;
        qHint[i] = tempdata.activity[i].hint;
        i++;
    }
}

function InitializeQuestion(){//Init Function
    var index = randList(30, 8, true);
    for (var i = 0; i < 8; i++) {
        question(qData[(index[i]-1)], i);
        hint(qHint[(index[i]-1)], i);
        $('#text' + (i + 1)).textinput();
        $('#submit' + (i + 1)).button();
        $('#cancel' + (i + 1)).button();
    }
}

function ReInitializeQuestion(){//ReInit Function
    var index = randList(30, 8, true);
    for (var i = 0; i < 8; i++) {
        ResetQuestion(qData[(index[i]-1)],qHint[(index[i]-1)], i);
    }
}

function question(data, i){

    $('#list').append('<li ><a href=#mypanel'+ (i + 1)+' id=list'+ (i + 1)+'>'+ data + '</a></li>'); // list item
     $('#mypanel' + (i + 1)).append("<div align='center' style='margin-top:30px;'><font style='font-family:Helvetica, Arial, sans-serif ;color:white;' size='5px' ><b>Question</b><br/><br/>"+ data + "</font></div><br/>");// panel item
    window.console.log(i);
}
function hint(data, i){
    $('#mypanel' + (i + 1)).append("<label for=text" + (i + 1) + " id=panel"+ (i + 1)+ " style='margin-top:10%;text-align:center;color:white;'><span id=panelTitle"+ (i + 1) +" >Hint: "+ data + "</span></label>");// panel item
    $('#panel' + (i + 1)).append('<input type="text"  name="name" id=text'+ (i + 1) + ' ><input type="hidden"  id=text'+ (i + 1) + ' >');
    $('#mypanel' + (i + 1)).append('<a href="#header" data-role="button" name="submit" id=submit'+ (i + 1)+ ' data-inline="true" data-rel="close" data-icon="check" style="margin-left:75px;">Submit</a>');
    $('#mypanel' + (i + 1)).append('<a href=#mypanel'+ (i + 1)+ ' data-role="button" id=cancel'+ (i + 1)+ ' data-inline="true" data-rel="close" data-icon="delete2" style="margin-left:75px;">Cancel</a>');
 }

 function ResetQuestion(QuestDat,HintDat, i){//Reset Function
    $('#list'+(i + 1)).text(QuestDat);
    $('#panelTitle'+(i + 1)).text(HintDat);
 }

 function randList(max, num, shuffled){//Non Repeat Random Function
    tempArray = [];
    for (i = 0; i < max && num > 0; ++i) {
        if (Math.floor(Math.random() * max - i) < num) {
            tempArray.push(i + 1);
            num--;
        }
    }
    if (shuffled) {
        tempArray.sort(function () {
            return Math.floor(Math.random() * 2) ? true : false;
        });
    }
    return (tempArray);
}
</script> 
```

![在此处输入图像描述](https://i.stack.imgur.com/XmZeB.png) ![在此处输入图像描述](https://i.stack.imgur.com/b3iuO.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:46:00.313

这可以通过几种方式来预防。

## 解决方案 1 - 单按钮解决方案

```
$('#PageRefresh').on('click', function() {
    // Rest of your code goes here
    var btn = $(this);
    var interval =  setInterval(function(){
        btn.removeClass("ui-btn-active ui-btn-up-a"); // This line will remove active button state
        clerarInterval(interval);
    },1);                
}) 
```

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/asHqx/](http://jsfiddle.net/Gajotres/asHqx/)

基本上，当单击按钮时，您可以从中删除类**ui-btn-active**。这将删除蓝色背景。

## 解决方案 2 - 多按钮解决方案

在 mobileinit 事件中将其完全关闭，如下所示：

```
$(document).bind('mobileinit', function () {
    $.mobile.activeBtnClass = 'unused';
}); 
```

需要记住的是，mobileinit 事件必须在 jQuery Mobile 初始化之前触发，如下所示：

```
<script src="jquery.js"></script>
<script>
    $(document).bind('mobileinit', function () {
        $.mobile.activeBtnClass = 'unused';
    });
</script>
<script src="jquery-mobile.js"></script> 
```

在此处阅读有关它的更多信息：**[使用 jQuery Mobile 的自动初始化](http://jquerymobile.com/demos/1.0b2/docs/api/globalconfig.html)**

工作示例：http: [//jsfiddle.net/Gajotres/HALuu/](http://jsfiddle.net/Gajotres/HALuu/)

# java - 一次打印arraylist三个数字

> ID：15944150
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:34:21.100
> 
> 标签：java, printing, arraylist, formatting

所以我有一个充满浮点数的数组列表，当前打印在一行上： `-221.5, -301.6, 19.2, -249.3, -312.2, 19.7,..`等

```
String arrayString = arr.toString();
arrayString= arrayString.substring(1,arrayString.length()-1); //Removes brackets
outputFile.println("array[]={"+arrayString+"};"); 
```

如何格式化arraylist，使其每三个数字打印一个新行，例如：

```
-221.5, -301.6, 19.2, 
-249.3, -312.2, 19.7,
... 
```

ETC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:46:40.120

试试用这个...

```
public static void main(String[] args) {

    List<Float> floatList=new ArrayList<Float>();
    int i=0;

    floatList.add(-221.5f);
    floatList.add(-221.6f);
    floatList.add(-221.7f);
    floatList.add(-221.8f);
    floatList.add(-221.9f);
    floatList.add(-221.1f);
    for (Float float1 : floatList) {
        i++;
        System.out.print(" "+float1+",");
        if(i%3==0){
            System.out.println();
        }

    } 
```

输出：

-221.5、-221.6、-221.7、
-221.8、-221.9、-221.1、

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:41:13.537

```
for(int i=0;i<arr.length;i++) {
    outputFile.print(arr[i]+" ");
    if(i%3==2) {
        outputFile.println();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:40:03.263

在您的应用程序中，一组三个数字是否是一些有意义的数量或实体（它们看起来像是某种坐标！）？如果是这样，只需将它们组合成一个对象。

```
List<MyVector> list = new ArrayList<MyVector>;
list.add(new MyVector(-221.5, -301.6, 19.2));
list.add(new MyVector(-249.3, -312.2, 19.7));

for(MyVector v : list) {
    System.out.println(v.toString());
} 
```

否则使用@x4rf41 的建议。

# c# - 无法使用弹出扩展器将数据添加到数据库

> ID：15944151
> 
> 赞同：0
> 
> 时间：2013-04-11T08:34:48.040
> 
> 标签：c#, asp.net, sql-server, ajax

我使用 AJAX 模态弹出扩展器作为子表单。我有一个带有文本框的页面，当用户单击按钮时，应将文本框中的数据添加到数据库并出现弹出窗口。问题是，当单击按钮时，会出现弹出窗口，但没有任何内容添加到数据库中。如果我评论弹出窗口，一切正常。请帮忙。谢谢

```
<asp:Button ID="btnNewSubmt" runat="server" Text="Submit" 
                            ValidationGroup = "NewUser" onclick="btnNewSubmt_Click" OnClientClick = "return isPageValid()"/>
                        <asp:Button ID="btnValidPopUp" runat="server" Text="Button" style = "display:none"/>
                        <asp:Panel ID="pnlUserWorkShop" runat="server">
                                <asp:SqlDataSource ID="sqlWorkSName" runat="server" 
                                    ConnectionString="<%$ ConnectionStrings:WildLife_EducationConnectionString %>" 
                                    SelectCommand="SELECT DISTINCT [WorkshopName] FROM [tblWorkshop]"></asp:SqlDataSource>
                                <asp:Label runat="server" Text="Please select work shop you would like to register for:"></asp:Label>
                                <asp:DropDownList ID="ddlWorkShopChose" runat="server" 
                                    DataSourceID="sqlWorkSName" AppendDataBoundItems="True" 
                                    DataTextField="WorkshopName" DataValueField="WorkshopName">
                                    <asp:ListItem></asp:ListItem>
                                </asp:DropDownList>
                        </asp:Panel>
                        <asp:ModalPopupExtender ID="mdlUserWorkShop" runat="server" TargetControlID = "btnValidPopUp" PopupControlID = "pnlUserWorkShop" BehaviorID = "myModalPopup" >
                        </asp:ModalPopupExtender> 
```

后面的代码：

```
using (SqlConnection conn = new SqlConnection(@"Data Source=MyDataBase;Initial     Catalog=MyDataBase;Integrated Security=True;"))

    SqlCommand CmdSql = new SqlCommand
    ("INSERT INTO [tbluser] ([UserLastName], [UserFirstName], [UserMiddleInitial]) VALUES (@UserFirstName,@UserLastName, @UserFirstName, @UserMiddleInitial)", conn);
    conn.Open();
    CmdSql.Parameters.AddWithValue("@UserLastName", txtNewUserLN.Text.ToString());
    CmdSql.Parameters.AddWithValue("@UserFirstName", txtNewUserFN.Text.ToString());
    CmdSql.Parameters.AddWithValue("@UserMiddleInitial", txtNewUserMI.Text.ToString());  
    CmdSql.Connection = conn;
    CmdSql.ExecuteNonQuery();
    conn.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:47:14.413

```
TargetControlID = "btnValidPopUp" 
```

因此，您的按钮回发被禁用，因此它不会在单击事件时触发。要获得所需的结果集 TragetControLiD 的 moddal 弹出窗口，按钮的可见性为假，并且单击您的按钮 btnValidPopUp 时写下这个

```
mdlUserWorkShop.Show() 
```

# ruby-on-rails - 登录或注册后设计重定向回原始位置？

> ID：15944159
> 
> 赞同：25
> 
> 时间：2013-04-11T08:35:11.943
> 
> 标签：ruby-on-rails, devise

这里我使用 Devise Gem 进行身份验证。如果有人想在没有登录的情况下打开页面，那么它会重定向到登录页面，并在登录后返回用户尝试打开的页面。我使用[重定向循环和 Devise after_sign_in_path_for](https://stackoverflow.com/questions/4330588/redirect-loop-with-devise-after-sign-in-path-for)链接来解决我的问题，但它对我不起作用。

```
 def after_sign_in_path_for(resource)
   params[:next] || super 
 end 
```

它不会将我重定向回我要打开的页面。例如：如果我要打开“127.0.0.1:3000/post/2/edit”，登录后不会返回这个页面。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-11T08:53:34.743

寻找的最佳资源是官方 repo/wiki/issues，然后是 SO。您找到的答案已过时。

这是答案： [https://github.com/plataformatec/devise/wiki/How-To:-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up, -更新](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up,-update)

**只需在 ApplicationController中为 devise > 3.2.1 版本**添加以下内容：

 **```
 # This example assumes that you have setup devise to authenticate a class named User.
class ApplicationController < ActionController::Base
  before_action :store_user_location!, if: :storable_location?
  # The callback which stores the current location must be added before you authenticate the user 
  # as `authenticate_user!` (or whatever your resource is) will halt the filter chain and redirect 
  # before the location can be stored.
  before_action :authenticate_user!

  private
    # Its important that the location is NOT stored if:
    # - The request method is not GET (non idempotent)
    # - The request is handled by a Devise controller such as Devise::SessionsController as that could cause an 
    #    infinite redirect loop.
    # - The request is an Ajax request as this can lead to very unexpected behaviour.
    def storable_location?
      request.get? && is_navigational_format? && !devise_controller? && !request.xhr? 
    end

    def store_user_location!
      # :user is the scope we are authenticating
      store_location_for(:user, request.fullpath)
    end
end 
```

然后在登录后重定向，你必须重写这个方法：

```
def after_sign_in_path_for(resource_or_scope)
  stored_location_for(resource_or_scope) || super
end 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-02-07T16:26:23.190

您不需要所有这些代码。[设计](https://github.com/plataformatec/devise/blob/e303de97569fcc2c338ac2ad7908aabf54076b2c/lib/devise/failure_app.rb#L193)（作为最新版本）已经为您保存了位置。

只需使用这个：

```
def after_sign_in_path_for(resource)
  request.env['omniauth.origin'] || stored_location_for(resource) || root_url
end 
```

这会将用户重定向到最新的omniauth.source，或stored_location，最后一种情况是root url。

我以为我需要创建该方法，但 Devise 已经做到了。

来源：[https ://github.com/plataformatec/devise/wiki/How-To:-redirect-to-a-specific-page-on-successful-sign-in](https://github.com/plataformatec/devise/wiki/How-To:-redirect-to-a-specific-page-on-successful-sign-in)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-23T04:01:52.173

从[Devise 4](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up,-update#devise-40)开始，它对我来说无缝工作：

> 只要您使用 devise 存储当前页面的位置，Devise 就会在登录和注册时自动重定向 `store_location_for(resource)`。为此，请编辑您的 `ApplicationController`in `app/controllers/application_controller.rb`。添加：
> 
> ```
> # saves the location before loading each page so we can return to the
> # right page. If we're on a devise page, we don't want to store that as the
> # place to return to (for example, we don't want to return to the sign in page
> # after signing in), which is what the :unless prevents
> before_filter :store_current_location, :unless => :devise_controller?
> 
> private
>   # override the devise helper to store the current location so we can
>   # redirect to it after loggin in or out. This override makes signing in
>   # and signing up work automatically.
>   def store_current_location
>     store_location_for(:user, request.url)
>   end 
> ```
> 
> 将以下内容添加`ApplicationController`到进行注销重定向：
> 
> ```
> private
>   # override the devise method for where to go after signing out because theirs
>   # always goes to the root path. Because devise uses a session variable and
>   # the session is destroyed on log out, we need to use request.referrer
>   # root_path is there as a backup
>   def after_sign_out_path_for(resource)
>     request.referrer || root_path
>   end 
> ```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-05T13:06:52.087

正如官方文档中所指出的，[更简单的解决方案](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up,-update#a-simpler-solution)是将其简单地添加到您的`application_controller.rb`：

```
class ApplicationController < ActionController::Base

private

# If your model is called User
def after_sign_in_path_for(resource)
  session["user_return_to"] || root_path
end 
```

重要说明（我也忽略了这一点）是，要使其正常工作，您需要`authenticate_user!`在控制器的`before_action:`. [这将在 Devise 中](https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/store_location.rb)调用`store_location_for`available out of the box ，其余的由 中的上述代码处理，从而无需重写代码来保存请求的 url。`application_controller.rb`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-14T22:39:30.040

如果您的登录表单有自己的页面，而不是例如每个页面标题中的登录表单，这里的一些其他解决方案可能不起作用。登录后，用户需要返回*两*页，而不仅仅是一页。

Devise 有一个很好的 How To on [Redirecting back to the current page after sign in, sign out, update](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up,-update)，下面的代码来自于它。

将原始 URL 存储在会话中是最佳选择。除了解决上述返回*两*页的问题外，“许多浏览器不发送 [the `request.referer`] 标头。因此，实现此功能的唯一可靠的跨浏览器方法是使用会话。”

在会话中存储 URL 时，重要的是不要存储任何 POST、PUT 或 DELETE 请求的 URL，也不要存储任何 XHR 请求，即用户实际上无法重定向到的任何内容。

请注意，退出后，用户的会话被破坏，因此存储的 URL 消失了。在这种情况下，用户可以被送回`request.referer`。这似乎是可以接受的，因为大多数网站在每个页面上都有一个退出链接，因此返回引荐来源网址实际上会起作用。

```
class ApplicationController < ActionController::Base
  before_action :store_user_location!, if: :storable_location?
  before_action :authenticate_user!

  private
    def storable_location?
      request.get? && is_navigational_format? && !devise_controller? && !request.xhr? 
    end

    def store_user_location!
      store_location_for(:user, request.fullpath)
    end

   def after_sign_in_path_for(resource_or_scope)
     stored_location_for(resource_or_scope) || super
   end

   def after_sign_out_path_for(resource_or_scope)
     request.referrer || super
   end
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-28T00:03:44.690

我也有同样的疑问，发现了这个，也试试

```
def after_sign_in_path_for(resource_or_scope)
  session.fetch 'user_return_to', admin_root_path
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-11T01:20:46.493

无需在 Devise 4.4.3 中定义新方法。直接调用方法`DeviseController#after_sign_in_path_for`即可。

像这样的代码：

```
 class YourController < DeviseController

    # ... 
    if manager.valid_password? params[:manager][:password]
      sign_in manager

      # call this method directly , if your controller extends DeviseController
      redirect_to after_sign_in_path_for(manager), notice: 'welcome!'
    end 
```

此外，如果您使用自定义登录方法并使用 DeviseController，则不得使用此代码：

```
# this method will login automatically, in most cases this method is 
# useless and misleading.  
prepend_before_action :allow_params_authentication!, only: :create 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-26T15:15:29.200

`gem 'devise', '~> 4.4.0'`

1.  创建 session_controller.rb：`class SessionsController < Devise::SessionsController`

2.  添加以下内容（如果您的登录网址不是 /users，请修改正则表达式）

    ```
    def before_login
      session[:previous_url] = request.fullpath unless request.fullpath =~ /\/users/
    end

    def after_login
      session[:previous_url] || root_path
    end 
    ```

请注意，如果您有 /users/dashboard 或 /users 下的其他位置，这将不起作用。可能想要更具体地使用正则表达式。**

# c# - 只允许打开一次窗口

> ID：15944161
> 
> 赞同：1
> 
> 时间：2013-04-11T08:35:19.053
> 
> 标签：c#, winforms, button, properties, window

我创建了一个简单的 Windows 窗体，单击按钮后它会作为属性窗口打开，现在您知道，属性窗口应该只打开一次，由于我是初学者，我依赖于您的建议：如何我让这个窗口只出现一次吗？这是小代码片段（这不是我的主类 - 如果需要在按钮方法上应用它，我也可以在那里做）

```
public partial class EinstellungenFenster : Form
{
    public EinstellungenFenster()
    {
        InitializeComponent();
        Text = "Outlook Add-in Einstellungen";

    }
} 
```

这里是我使用的按钮方法：

```
 private void FensterOeffnen(object sender, IRibbonControl control, bool pressed)
    {
        EinstellungenFenster fenster = new EinstellungenFenster();
        fenster.Show();

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T08:36:29.357

而不是`fenster.Show()`use `fenster.ShowDialog()`，这将使表单成为模态，这意味着在关闭之前不能使用其他父对话框

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T08:38:01.470

如果您想阻止用户在窗口打开时执行任何其他操作，即强制他们在继续之前关闭它，请调用`ShowDialog()`而不是`Show()`. 否则，我的建议是维护一个私有字段并检测表单是否已在单击时创建/显示，然后将表单闪烁以引起用户的注意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T09:12:56.503

假设如果我们从菜单中调用一个表单，点击 MDI 表单，那么我们需要在顶层创建该表单的实例声明，如下所示：

```
 Form1 fm = null; 
```

然后我们需要定义菜单点击事件来调用Form1，如下：

```
private void form1ToolStripMenuItem_Click(object sender, EventArgs e)
{
    if (fm == null|| fm.Text=="")
    {
        fm = new Form1();              
        fm.MdiParent = this;
        fm.Dock = DockStyle.Fill;
        fm.Show();
    }
    else if (CheckOpened(fm.Text))
    {
        fm.WindowState = FormWindowState.Normal;
        fm.Dock = DockStyle.Fill;
        fm.Show();
        fm.Focus();               
    }                   
} 
```

为检查 Form1 是否已打开而定义的 CheckOpened：

```
private bool CheckOpened(string name)
    {
        FormCollection fc = Application.OpenForms;

        foreach (Form frm in fc)
        {
            if (frm.Text == name)
            {
                return true; 
            }
        }
        return false;
    } 
```

希望这将解决创建多个表单实例的问题，如果它已经打开或最小化，则在菜单单击时将焦点集中到 Form1 上。

# asp.net - 'WebForm_DoPostBackWithOptions 未定义

> ID：15944167
> 
> 赞同：0
> 
> 时间：2013-04-11T08:35:33.933
> 
> 标签：asp.net, internet-explorer, postback, linkbutton

当我使用 LinkBut​​ton 回发表单时，我在 IE10 上遇到错误

```
<asp:LinkButton ID="lbSubmit" runat="server" CssClass="regular_btn"
                    onclick="lbSubmit_Click">
                    OK
                </asp:LinkButton> 
```

错误： SCRIPT5009: 'WebForm_DoPostBackWithOptions 未定义。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:41:25.060

我安装了修补程序：http: [//support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088)并且错误消失了

谢谢

# xaml - Windows phone 自定义消息框内容事件未触发

> ID：15944168
> 
> 赞同：0
> 
> 时间：2013-04-11T08:35:36.310
> 
> 标签：xaml, listbox, windows-phone-8, selectionchanged

我创建了一个包含 ListBox 的 CustomMessageBox。由于某种原因，我在列表框（位于 CustomMessageBox 中）上的 SelectionChanged 事件没有触发。有什么建议么？

```
private void lstVehicle_SelectionChanged(object sender, SelectionChangedEventArgs e) {
    ListBox _list = (ListBox)sender;
    HyperlinkButton _button = (HyperlinkButton)_list.SelectedItem;

}

private void SelectVehicle() {
    ListBox _list = new ListBox();

    _list.ItemTemplate = CreateDataTemplate();
    _list.ItemsSource = ManageStorage.vehicles;
    _list.SelectionChanged += lstVehicle_SelectionChanged;

    CustomMessageBox customMessageBox = new CustomMessageBox() { Message = "Select a vehicle from the list", Content = _list };
    customMessageBox.Show();
}

private DataTemplate CreateDataTemplate() {
    string xaml = @"<DataTemplate xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation"" xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml"">
                         <Grid>
                              <HyperlinkButton Content='{Binding Make}' ></HyperlinkButton>
                        </Grid>
                    </DataTemplate>";
    DataTemplate dt = (DataTemplate)System.Windows.Markup.XamlReader.Load(xaml);
    return dt;
} 
```

# ruby-on-rails - 无法批量分配受保护的属性：令牌

> ID：15944170
> 
> 赞同：-2
> 
> 时间：2013-04-11T08:35:39.467
> 
> 标签：ruby-on-rails, ruby

我们收到此错误

```
ActiveModel::MassAssignmentSecurity::Error in AuthenticationsController#create
Can't mass-assign protected attributes: token 
```

在此之前，我们的令牌过期导致无法在我们的网络应用程序上发布，因此为了解决这个问题，我们尝试在每次用户使用提供者进行身份验证时更新令牌和秘密属性。

这是代码：

```
class AuthenticationsController < InheritedResources::Base
def create
  omniauth = request.env['omniauth.auth']
  authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
  if authentication
     user = User.find(authentication.user_id)
     user.update_attributes(:token => omniauth["credentials"]["token"])
     user.update_attributes(:secret => omniauth["credentials"]["secret"])
     flash[:success] = "Signed in successfully"
     sign_in_and_redirect user
  elsif current_user
      #rest of the code here# 
```

这是架构

```
 create_table "authentications", :force => true do |t|
    t.integer  "user_id"
    t.string   "provider"
    t.string   "uid"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "secret"
    t.string   "token"
  end

     create_table "users", :force => true do |t|
    t.string    "name"
    t.string    "email"
    t.timestamp "created_at",                         :null => false
    t.timestamp "updated_at",                         :null => false
    t.string    "password_digest"
    t.string    "remember_token"
  end 
```

这是身份验证模型

```
class Authentication < ActiveRecord::Base
  belongs_to :user
  attr_accessible :provider, :uid, :token, :secret
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:39:34.673

您正在尝试将令牌和机密分配给用户模型，而不是为身份验证模型执行此操作。

```
 authentication.update_attributes(:token => omniauth["credentials"]["token"], :secret => omniauth["credentials"]["secret"] ) 
```

应该管用。

# python - Python：列表和对象的numpy数组之间的差异

> ID：15944171
> 
> 赞同：18
> 
> 时间：2013-04-11T08:35:42.173
> 
> 标签：python, numpy

`numpy.array`将 Python 对象存储在with`dtype='o'`与 using `list`（或`list`of`list`等，在更高维度）中的优缺点是什么？

在这种情况下，numpy 数组是否更有效？（似乎他们无法避免间接，但在多维情况下可能更有效。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T09:53:13.667

NumPy 数组的切片工作方式不同。[NumPy 文档在该主题上花费了很长的一页。](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html) 强调一些要点：

*   NumPy 切片可以通过多个维度进行切片
*   NumPy 基本切片生成的所有数组始终是原始数组的视图，而列表切片是浅拷贝。
*   您可以将标量分配给 NumPy 切片。
*   您可以通过将不同长度的序列分配给切片来插入和删除 a 中的项目`list`，而 NumPy 会引发错误。

演示：

```
>>> a = np.arange(4, dtype=object).reshape((2,2))
>>> a
array([[0, 1],
       [2, 3]], dtype=object)
>>> a[:,0]             #multidimensional slicing
array([0, 2], dtype=object)
>>> b = a[:,0]
>>> b[:] = True        #can assign scalar
>>> a                  #contents of a changed because b is a view to a
array([[True, 1],
       [True, 3]], dtype=object) 
```

此外，NumPy 数组为支持它们的对象数组提供了方便的数学运算（例如`fraction.Fraction`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T00:30:32.803

Numpy 比 Python 列表使用更少的内存。此外，Numpy 比列表更快、更方便。

例如：如果你想在 Python 中添加两个列表，你必须遍历列表中的所有元素。另一方面，在 Numpy 中，您只需添加它们。

```
# adding two lists in python
sum = []
l1 = [1, 2, 3]
l2 = [2, 3, 4]
for i in range(len(l1)):
   print sum.append(l1[i]+l2[i])
# adding in numpy
a1 = np.arange(3)
a2 = np.arange(3)
sum2 = a1+a2
print sum2 
```

# python - django - 为什么这不起作用？

> ID：15944172
> 
> 赞同：1
> 
> 时间：2013-04-11T08:35:47.067
> 
> 标签：python, django, media, media-url

我的模型中有这个图像字段

```
foto = models.ImageField(upload_to="user/%Y/%m/%d",default='') 
```

在我的设置中：

```
MEDIA_ROOT = os.path.join(PROJECT_PATH, "media")
MEDIA_URL = "/media/" 
```

在我的模板中：

```
<img class="profilfoto" src="{{MEDIA_URL|escapejs}}{{user.foto.name}}" /> 
```

其他图像`upload_to='.'`正在保存到媒体文件夹中，但`user`没有创建文件夹，这是为什么？

我运行了 syncdb 和 schemamigration，一切正常，但加载此图像会出现 404 错误，因为路径不存在。我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:18:48.350

转义

转义字符以在 JavaScript 字符串中使用。这不会使字符串在 HTML 中安全使用，但在使用模板生成 JavaScript/JSON 时确实可以保护您免受语法错误的影响。

```
<img class="profilfoto" src="{{MEDIA_URL|escapejs}}{{user.foto.name}}" /> 
```

您上面的代码导致，例如：`user/2013\u002D04\u002D10_170411/image.png`，在加载此图像时给您 404 错误。

**更新：**

保存或更新图像时，必须在表单中定义 enctype。这将允许您保存图像或文件：

```
<form id="registerform" action="/angemeldet/" method="post" 
    enctype="multipart/form-data">
    {% csrf_token %} 
```

和

```
form = YourForm(request.POST, request.FILES)
    if form.is_valid(): 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T09:12:16.547

尝试在upload_to 中的参数开头添加一个斜线：

```
foto = models.ImageField(upload_to="/user/%Y/%m/%d",default='') 
```

# android - 将位图上的文本转换为字符串 android

> ID：15944173
> 
> 赞同：0
> 
> 时间：2013-04-11T08:35:47.993
> 
> 标签：android, encoding, bitmap, bitmapfactory

我正在尝试通过将位图转换为字节数组，然后将字节数组转换为 String 来设置 OCR 功能。这就是我尝试过的

```
{
            mBitmap =  Bitmap.createBitmap (mContent.getWidth(), mContent.getHeight(), Bitmap.Config.RGB_565);
            img.setImageBitmap(mBitmap);
        }
        Canvas canvas = new Canvas(mBitmap);
        try
        {
            FileOutputStream mFileOutStream = new FileOutputStream(mypath);
            img.setImageBitmap(mBitmap);
            v.draw(canvas);
            mBitmap.compress(Bitmap.CompressFormat.PNG, 90, mFileOutStream);
            ByteArrayOutputStream boas = new ByteArrayOutputStream();
            mBitmap.compress(Bitmap.CompressFormat.JPEG, 100, boas);
            byte[] b = boas.toByteArray();
            String str3=b.toString();
            Log.i("string ", "***** "+str3);
            String str = Base64.encodeToString(b, Base64.DEFAULT);
            txt.setText("STR  "+str);
            Log.i("string ", "****str***** "+str);
            String str2 = new String(b,"UTF-8");
            Log.i("string ", "****str***** "+str2);
            mFileOutStream.flush();
            mFileOutStream.close();
            String url = Images.Media.insertImage(getContentResolver(), mBitmap, "title", null);
            Log.v("log_tag","url: " + url);

        } 
```

但是我得到的结果完全不相关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:59:15.980

您应该检查[ABBY CLOUD OCR SDK](http://ocrsdk.com/)。他们有免费试用，所以你可以检查一下。

# windows - WinInet::InternetSetOption(...) 总是返回 0 并且 GetLastError() 返回 12018

> ID：15944176
> 
> 赞同：2
> 
> 时间：2013-04-11T08:35:55.850
> 
> 标签：windows, visual-c++, wininet

我正在尝试使用 InternetSetOption(...) 方法设置代理的用户名和密码。但是，它总是返回零，最后一个错误设置为 12018。下面是我的代码片段。

```
#include "stdafx.h"
#include <Wininet.h>

int _tmain(int argc, _TCHAR* argv[])
{
    HINTERNET _session = ::InternetOpen(_T("TestProgram"),
                              INTERNET_OPEN_TYPE_PRECONFIG,
                              NULL, NULL, NULL);
    LPCTSTR proxyUserName = L"username";
    LPCTSTR proxyPassword = L"userpassword";
    BOOL b = ::InternetSetOption(_session,INTERNET_OPTION_PROXY_USERNAME ,(LPVOID)proxyUserName,wcslen(proxyUserName)+1 );
        printf(" InternetSetOption returns - %d\n",b);
        printf(" InternetSetOption GetLastError - %d\n",GetLastError());

        b = ::InternetSetOption(_session,INTERNET_OPTION_PROXY_PASSWORD,(LPVOID)proxyPassword,wcslen(proxyPassword) +1 );
        printf(" InternetSetOption returns - %d\n",b);
        printf(" InternetSetOption GetLastError - %d\n",GetLastError());

        getchar();
    return 0;
} 
```

我尝试使用管理员和非管理员权限执行上述程序，但没有运气。欢迎任何帮助。

谢谢， 奥姆基

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:17:20.140

您使用了错误的`HINTERNET`句柄。来自[选项标志](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385328%28v=vs.85%29.aspx)文档：

> INTERNET_OPTION_PROXY_USERNAME 此选项可以设置在 InternetConnect 或 HttpOpenRequest 返回的句柄上。
> 
> INTERNET_OPTION_PROXY_PASSWORD 此选项可以设置在 InternetConnect 或 HttpOpenRequest 返回的句柄上。

因此，您必须使用`InternetConnect()`or `HttpOpenRequest()`。

# css - 调整 FlexBox 容器的大小

> ID：15944178
> 
> 赞同：7
> 
> 时间：2013-04-11T08:36:07.937
> 
> 标签：css, jquery-ui, flexbox

我正在尝试使用 flexbox 模型创建一个始终延伸到屏幕边界的多列布局。这完全符合我的要求。但是，我还希望能够水平调整一列或多列的大小。我已经尝试使用 jQuery UI 来允许调整大小，但不出所料，这并不完全正确

正如下面的演示所示，当您开始调整列的大小时，它会“跳跃”大约 100 个像素。

[jsFiddle 示例](http://jsfiddle.net/jonathanwest/GdPRS/)

任何人都可以提供解决方案，或者动态调整 flexbox 容器大小的另一种方法吗？所有代码也粘贴在下面。

HTML：

```
<div id="container">
    <div id="box1" class="widget-container">
        <div class="widget">
            <div class="widget-content">
                Item 1
            </div>
        </div>
        <div class="widget">
            <div class="widget-content">
                Item 2
            </div>
        </div>
    </div>
    <div id="box2" class="widget-container">
        <div class="widget">
            <div class="widget-content">
                Item 3
            </div>
        </div>
    </div>
    <div id="box3" class="widget-container">
        <div class="widget">
            <div class="widget-content">
                Item 4
            </div>
        </div>
        <div class="widget">
            <div class="widget-content">
                Item 5
            </div>
        </div>
    </div>
</div> 
```

CSS：

```
html, body {
    height:                 100%;
    margin:                 0;
}
body {
    position:               absolute;
    height:                 auto;
    top:                    0;
    left:                   0;
    bottom:                 0;
    right:                  0;
    padding:                0;
    margin:                 5px 5px 5px 5px;
}
#container {
    height:                 100%;
    width:                  100%;
    background-color:       #FFFFFF;
    border-radius:          5px 5px 0 0;
    display:                -webkit-box;
    display:                -moz-box;
    display:                box;
    -webkit-box-orient:     horizontal;
    -moz-box-orient:        horizontal;
    box-orient:             horizontal;
    -webkit-box-pack:       justify;
    -moz-box-pack:          justify;
    box-pack:               justify;
    -webkit-box-align:      stretch;
    -moz-box-align:         stretch;
    box-align:              stretch;
}
#box1, #box2, #box3 {
    margin:                 5px;
    padding:                2px;
    display:                -webkit-box;
    display:                -moz-box;
    display:                box;
    -webkit-box-orient:     vertical;
    -moz-box-orient:        vertical;
    box-orient:             vertical;
    -webkit-box-pack:       start;
    -moz-box-pack:          start;
    box-pack:               start;
    -webkit-box-flex:       1;
    -moz-box-flex:          1;
    box-flex:               1;
}
div.widget
{
    padding:                        2px;
    -moz-border-radius:             4px 4px 0 0;
    -webkit-border-radius:          4px 4px 0 0;
    margin-bottom:                  10px;
    background-color:               #999999;
}
div.widget-maximised {
    display:                -webkit-box;
    display:                -moz-box;
    display:                box;
    -webkit-box-orient:     vertical;
    -moz-box-orient:        vertical;
    box-orient:             vertical;
    -webkit-box-pack:       start;
    -moz-box-pack:          start;
    box-pack:               start;
    -webkit-box-flex:       1;
    -moz-box-flex:          1;
    box-flex:               1;
}
div.widget div.widget-content
{
    background-color:                   #FFF;
    color:                              #333;
    line-height:                        1.2em;
    overflow:                           auto;
    padding:                            5px;
    margin:                             5px;
    width:                              auto;
    -webkit-box-flex:                   1;
    -moz-box-flex:                      1;
    box-flex:                           1;
} 
```

JS：

```
$("#box1, #box2, #box3").resizable({
    handle: "e",
    cancel: "cancel"
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:56:01.220

您的问题是您依赖于 2009 年过时的 Flexbox 规范中的属性。如果您添加现代属性，它会如您预期的那样顺利运行。

[http://jsfiddle.net/GdPRS/2/](http://jsfiddle.net/GdPRS/2/)

```
/* line 6, ../sass/test.scss */
html, body {
  height: 100%;
  margin: 0;
}

/* line 10, ../sass/test.scss */
body {
  position: absolute;
  height: auto;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  padding: 0;
  margin: 5px 5px 5px 5px;
}

/* line 20, ../sass/test.scss */
#container {
  height: 100%;
  width: 100%;
  background-color: #FFFFFF;
  border-radius: 5px 5px 0 0;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
}

/* line 29, ../sass/test.scss */
#box1, #box2, #box3 {
  margin: 5px;
  padding: 2px;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 1;
  -ms-flex: 1 1;
  flex: 1 1;
}

/* line 37, ../sass/test.scss */
div.widget {
  padding: 2px;
  -moz-border-radius: 4px 4px 0 0;
  -webkit-border-radius: 4px 4px 0 0;
  margin-bottom: 10px;
  background-color: #999999;
}

/* line 44, ../sass/test.scss */
div.widget-maximised {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 1;
  -ms-flex: 1 1;
  flex: 1 1;
}

/* line 51, ../sass/test.scss */
div.widget div.widget-content {
  background-color: #FFF;
  color: #333;
  line-height: 1.2em;
  overflow: auto;
  padding: 5px;
  margin: 5px;
  width: auto;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 1;
  -ms-flex: 1 1;
  flex: 1 1;
} 
```

# ruby-on-rails - 将 has_many 添加到 ActiveModel::Serializer 的问题

> ID：15944179
> 
> 赞同：4
> 
> 时间：2013-04-11T08:36:18.777
> 
> 标签：ruby-on-rails, ruby, active-model-serializers

一段时间以来，我一直在尝试将 has_many 关系添加到我的 ActiveModel::Serializers 中，但我遇到了一堆与它们相关的错误。似乎 has_many 关系正在调用错误的序列化程序。这是错误：

```
Started GET "/vehicles/1001" for 127.0.0.1 at 2013-04-11 01:07:08 -0700
Processing by UsersController#index as JSON
  Parameters: {"user"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT `users`.* FROM `users` [0m
Processing by VehiclesController#show as JSON
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms)
  Parameters: {"id"=>"1001", "vehicle"=>{}}
  [1m[35mVehicle Load (0.6ms)[0m  SELECT `vehicles`.* FROM `vehicles` WHERE `vehicles`.`id` = 1001 LIMIT 1

Started GET "/vendor_reps" for 127.0.0.1 at 2013-04-11 01:07:08 -0700
Completed 500 Internal Server Error in 4ms

NoMethodError (undefined method `serializable_hash' for #<ActiveModel::ArraySerializer:0x007fbbcaa82018>):
  app/controllers/vehicles_controller.rb:20:in `block (2 levels) in show'
  app/controllers/vehicles_controller.rb:18:in `show'

Processing by VendorRepsController#index as JSON
  Parameters: {"vendor_rep"=>{}}
  [1m[35mVendorRep Load (0.3ms)[0m  SELECT `vendor_reps`.* FROM `vendor_reps` 
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms)
  Rendered /Users/pzuraq/.rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.3ms)
  Rendered /Users/pzuraq/.rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/pzuraq/.rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (11.7ms) 
```

代码在此处列出：[https ://gist.github.com/pzuraq/5361607](https://gist.github.com/pzuraq/5361607)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T00:19:48.307

所以事实证明，使用 :option 作为属性名称会导致冲突。可能还有其他相互冲突的名称。必须小心命名空间！

# xslt - xpath 表达式中的变量

> ID：15944183
> 
> 赞同：2
> 
> 时间：2013-04-11T08:36:28.747
> 
> 标签：xslt, xpath, xslt-2.0

难道不能在 xpath 表达式中使用 xsl:variables 吗？我确信我的变量具有正确的值。已尝试将其作为字符串和数字。第一个有效，但第二个选择所有内容节点，而不仅仅是索引为 4 的节点。

```
<xsl:apply-templates select="data/contents[4]/content" >
<xsl:apply-templates select="data/contents[$myVariable]/content" > 
```

编辑

```
 <xsl:variable name="dayOfWeekIndex">    
        <xsl:choose>    
            <xsl:when test="lower-case($dayOfWeek) = 'monday'">
                <xsl:value-of select="number(1)" />
            </xsl:when>
            <xsl:when test="lower-case($dayOfWeek) = 'tuesday'">
                <xsl:value-of select="number(2)" />
            </xsl:when>
            <xsl:when test="lower-case($dayOfWeek) = 'wednesday'">
                <xsl:value-of select="number(3)" />
            </xsl:when>
            <xsl:when test="lower-case($dayOfWeek) = 'thursday'">
                <xsl:value-of select="number(4)" />
            </xsl:when>
            <xsl:when test="lower-case($dayOfWeek) = 'friday'">
                <xsl:value-of select="number(5)" />
            </xsl:when>
            <xsl:when test="lower-case($dayOfWeek) = 'saturday'">
                <xsl:value-of select="number(6)" />
            </xsl:when>
            <xsl:when test="lower-case($dayOfWeek) = 'sunday'">
                <xsl:value-of select="number(7)" />
            </xsl:when>
        </xsl:choose>   
    </xsl:variable> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:11:13.460

显然，如何设置变量或参数很重要，例如

```
<xsl:variable name="index" select="4"/>
<xsl:apply-templates select="data/contents[$index]/content"/> 
```

它应该工作（即处理第四个`contents`），与

```
<xsl:variable name="index">4</xsl:variable>
<xsl:apply-templates select="data/contents[$index]/content"/> 
```

它不起作用，因为谓词表达式不是 type `xs:integer`，它是一个非空的节点序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:56:06.370

```
<xsl:variable name="dayOfWeekIndex">    
    <xsl:choose>    
        <xsl:when test="lower-case($dayOfWeek) = 'monday'">
            <xsl:value-of select="number(1)" />
        </xsl:when>
        .... 
```

具有`<xsl:variable>`内容但没有`as`属性的变量会将变量设置为“临时树”，而不是数字，因此谓词`[$dayOfweekIndex]`被视为布尔谓词而不是对节点的限制`position()`。您需要添加`as="xs:integer"`到`xsl:variable`标签以强制变量具有正确的类型。

或者，使用xPath 2.0 中`select`的构造来代替：`if`

```
<xsl:variable name="dayOfWeekIndex" as="xs:integer" select="
    if (lower-case($dayOfWeek) = 'monday') then 1 else
    if (lower-case($dayOfWeek) = 'tuesday') then 2 else
    .....
    if (lower-case($dayOfWeek) = 'sunday') then 7 else
    0" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T03:16:09.773

**正如其他人所注意到的，在 XSLT 2.0 中指定变量的类型确实很重要。**

**除此之外，此转换还展示了如何使用 XPath 单线生成所需的结果**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output method="text"/>

 <xsl:variable name="vWeekDays" as="xs:string+" select=
 "('monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday')"/>

 <xsl:template match="/">
  <xsl:variable name="vdayOfWeek" select="'Friday'"/>

  <xsl:sequence select="index-of($vWeekDays, lower-case($vdayOfWeek))"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T09:00:30.757

**当这种转变**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml"/>
<xsl:variable name="para1" select="chapter/para"/>
<xsl:template match="chapter">
    <p><xsl:apply-templates select="$para1"/></p>
</xsl:template>

</xsl:stylesheet> 
```

**在以下 XML 上运行**

```
<?xml version="1.0"?>
<chapter>
<para>This is para</para>
</chapter> 
```

**得到输出**

```
<?xml version='1.0' ?>
<p>This is para</p> 
```

# python - wxPython - wx.Button 类

> ID：15944185
> 
> 赞同：1
> 
> 时间：2013-04-11T08:36:29.763
> 
> 标签：python, wxpython

刚开始玩 wxPython 并遇到 wx.Button 类，有人能告诉我示例标签中的“&”做什么，为什么它在那里以及为什么它在一些不同的地方，但不是其他人，如下所示

```
wx.ID_CLOSE     '&Close'
wx.ID_COPY      '&Copy'
wx.ID_CUT       'Cu&t' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:42:48.507

和号表示用户可以结合按下哪个加速键`Alt`（或者可能是 Mac 上的其他键`Cmd`？）来单击按钮。

例如，如果标签是`"&Close"`，则按下`Alt-C`将单击按钮。

如果您想在标签中使用文字 & 符号，请重复 & 符号两次：`&&`.

我认为您无法将两个标签设置为具有相同的加速键，例如`"&Close"`和`"&Copy"`。只有第一个标签会对`Alt-C`.

# php - 如果根本没有嵌入，则 PhpExcel 将图像嵌入错误的工作表中

> ID：15944188
> 
> 赞同：0
> 
> 时间：2013-04-11T08:36:34.670
> 
> 标签：php, codeigniter, phpexcel

我正在使用 php excel 将数据和图像徽标写入 excel 文件，目前它可以工作，数据按指定写入表 2，但徽标写入表 0，如果我在 getActiveSheet() 中传递一个值说 2，对于图像与数据相同，没有任何反应，我的 excel 文件似乎消失了，我做错了什么？

```
public function getDataToExcel() {        
        $labref = $this->uri->segment(3);        
        $SampleName = $this->input->post('SampleName');
        $LabRef = $this->input->post('LabRef');      

        $objReader = PHPExcel_IOFactory::createReader('Excel2007');
        $objPHPExcel = $objReader->load("workbooks/" . $labref . "/" . $labref . ".xlsx");

        $objPHPExcel->getActiveSheet(2);
        $objWorkSheet = $objPHPExcel->createSheet();     
        $objWorkSheet->setCellValue('B40', $SampleName)
                ->setCellValue('B41', $LabRef);                

        $objWorkSheet->setTitle("Sample Summary");

        $dir = "workbooks";        
        if (is_dir($dir)) {

        $objDrawing = new PHPExcel_Worksheet_Drawing();
        $objDrawing->setName('NQCL');
        $objDrawing->setDescription('The Image that I am inserting');
        $objDrawing->setPath('exclusive_image/nqcl.png');
        $objDrawing->setCoordinates('A1');
        $objDrawing->setWorksheet($objPHPExcel->getActiveSheet());

            $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel,'Excel2007');
            $objWriter->save("workbooks/" . $labref . "/" . $labref . ".xlsx");

             echo 'Data exported';
        } else {
            echo 'An error occured';

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:09:05.947

你的问题是理解`getActiveSheet()`方法

```
$objPHPExcel->getActiveSheet(2); 
```

`getActiveSheet()`不带任何参数，它只返回当前活动的工作表；所以 2 是没有意义的。

要设置当前活动工作表，您需要调用

```
$objPHPExcel->setActiveSheet(2); 
```

# c# - 从调试中排除类

> ID：15944192
> 
> 赞同：6
> 
> 时间：2013-04-11T08:36:44.950
> 
> 标签：c#, visual-studio

我记得有某种类型的装饰器可以在调试时排除某些类的显示。

原因：

有多个班级。如果调试器在调试过程中跳转到另一个类（线程），那会很烦人。一些帮助类应该被跳过。

但我只是在任何地方都找不到这个装饰器。有谁记得如何排除文件以使调试器不介入其中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T08:37:53.147

您可能正在寻找[`DebuggerStepThrough`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T08:38:14.110

您正在寻找[DebuggerStepThroughAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)。

您可以将此属性应用于 a `class`、 a `method`、 a`struct`或 a `constructor`。请记住，即使您在其中设置了断点，调试器也将*始终单步执行带有此属性标记的代码。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T08:38:13.363

有一个属性叫做`DebuggerStepThrough`：[DebuggerStepThroughAttribute Class](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)

> 指示调试器单步执行代码，而不是单步执行代码。这个类不能被继承。

它可以应用于`class`、`struct`和。`constructor``method`

# javascript - 错误：未定义函数

> ID：15944193
> 
> 赞同：1
> 
> 时间：2013-04-11T08:36:48.580
> 
> 标签：javascript, jquery

我创建了一个`js`具有功能的文件。
当我调用该函数时，`$(document).ready;`它不起作用。

我通过萤火虫检查，它正在调用该函数但没有进入该函数。

这是我的 JavaScript 代码：

```
function toggelEventButtons() {
    var invoiceVal = $('#Invoice_Id').val(); //It is a textbox Id of aspx Page.

    alert(invoiceVal);

    if (invoiceVal > 0) {
        $('#addEventInvoiceDetail').hide();
        $('#editEventInvoiceDetail').show();
    } else {
        $('#addEventInvoiceDetail').show();
        $('#editEventInvoiceDetail').hide();
    }
} 
```

`aspx`我从这样的页面调用函数：

```
$(document).ready(toggelEventButtons); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:44:40.567

在调用`$(document).ready()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:40:32.157

确保功能在同一范围内。你也可以试试这个语法

```
$(document).ready(function(){ toggelEventButtons() }); 
```

# javascript - Android 浏览器：虽然 touchmove 具有 preventDefault，但仍会触发 touchcancel

> ID：15944197
> 
> 赞同：14
> 
> 时间：2013-04-11T08:37:02.703
> 
> 标签：javascript, android, jquery, webkit, touch

我正在尝试构建一个网页来感知用户的触摸并沿着画布拖动和对象。

所以我正在做这样的事情：

```
var touchStart = function(e) {
    e.preventDefault();
    // Do stuff
}
var touchMove = function(e) {
    e.preventDefault();
    console.log("Touch move");
    // Move objs
}
var touchEnd = function(e) {
    e.preventDefault();
    console.log("Touch start!");
    // clean up stuff
}
var touchCancel = function(e) {
    e.preventDefault();

    // Oh NO touch cancel!
    console.log("Touch cancel!");

}
bindElemOrig.addEventListener('touchstart', touchStart, false);
bindElemOrig.addEventListener('touchmove', touchStart, false);
bindElemOrig.addEventListener('touchend', touchStart, false);
bindElemOrig.addEventListener('touchcancel', touchStart, false); 
```

它工作正常，直到某个时候。

问题是，一旦我加载了太多的 obj，在我看来**touchmove**需要很长时间才能响应，并且**touchcancel**会被触发。问题是一旦**touchcancel**被触发，我就不再收到**touchmove**事件，并且我再也无法感知到移动。

有人遇到过这个问题吗？我知道 Android 中的错误，您必须调用**preventDefault**（[ios webkit 中的 touchend 事件未触发？](https://stackoverflow.com/questions/7691551/touchend-event-in-ios-webkit-not-firing)）但在这种情况下，由于内存负担，它似乎无法正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-14T07:41:11.240

像这样

```
var touchMove = function(e) {
    e.preventDefault();
    setTimeout(function(){
        console.log("Touch move");
    // Move objs

    })
} 
```

使用 setTimeout 将你的逻辑包装在 touchmove 中可以解决这个问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T16:30:12.560

此问题可能是由于 Chrome/Android 中的错误（功能？）。请参阅[此错误报告](https://code.google.com/p/chromium/issues/detail?id=260732)。

此测试演示了行为（[JSFiddle](http://jsfiddle.net/B5wgb/8/)）：

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <script>
      var delay = 200;

      var haltEvent = function(event) {
        event.preventDefault();
        event.stopPropagation();
      };

      var pause = function() {
        var startTime = new Date().getTime();

        while (new Date().getTime() < startTime + delay);
      };

      window.addEventListener('load', function() {
        var target = document.querySelector('#target');
        var status = document.querySelector('#status');

        target.addEventListener('touchstart', function(event) {
          haltEvent(event);
          status.innerHTML = '[touchstart]';
        }, true);

        target.addEventListener('touchmove', function(event) {
          pause();
          haltEvent(event);
          status.innerHTML = '[touchmove]';
        }, true);

        target.addEventListener('touchend', function(event) {
          status.innerHTML = '[touchend]'; 
        }, true);

        target.addEventListener('touchcancel', function(event) {
          status.innerHTML = '[touchcancel]'; 
        }, true);
      });
    </script>
    <style>
      #target {
        background-color: green;
        height: 300px;
      }

      #status {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div id="target"></div>
    <p id="status">[]</p>
  </body>
</html> 
```

我没有发现随机触发的 touchcancel 事件。相反，只要从 touchmove 事件处理程序返回大约 200 毫秒就会触发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-06T02:58:57.443

[Touchcancel](https://developer.mozilla.org/en-US/docs/Web/Events/touchcancel)专门设计用于控制触摸事件并在非常小的触摸和移动操作（接近 20 像素，具体取决于浏览器）后执行常规浏览器操作，例如平移或缩放。

您唯一的选择是：

1.  切换到**指针事件**并使用[此处解释](https://github.com/andreszs/jquery.events.swipe#pointer-event-remarks)`touch-action`的CSS 属性来防止触发（推荐但需要 Android 5+）`pointercancel`
2.  `event.preventDefault()`在事件处理程序中添加`touchmove`，但这也会禁用任何默认操作，如滚动、平移、缩放等。

您不能尝试取消或`preventDefault()`在`touchcancel`函数内取消，因为为时已晚；浏览器已经停止监听`touchmove`事件。这是设计使然，而不是错误。

# java - 如何将背景图片添加到我的菜单？

> ID：15944198
> 
> 赞同：1
> 
> 时间：2013-04-11T08:37:08.197
> 
> 标签：java, android, user-interface, libgdx

我目前正在使用背景图像在 libgdx 中制作某种菜单。我尝试将图像添加为演员，但按钮没有响应 touchDown 事件。所以我现在尝试在 render() 方法中使用 spriteBatch 绘制背景图像，然后在 show() 方法中绘制表格和按钮，但现在它只显示图像，根本没有按钮。这是代码：

```
 public void show()
{

    // load the texture with our image
    backgroundTexture = new Texture("fonfopiz.png");

    // set the linear texture filter to improve the image stretching
    backgroundTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

    // Here we create a region of our texture whose size is 512x301
    backgroundTextureRegion = new TextureRegion(backgroundTexture, 0, 0, 512, 301);
    // TODO Auto-generated constructor stub

    crearTablaBack();

    //the general table
    table = super.getTable();
    //table.setFillParent(false);
    Label vacia = new Label("",getSkin());
    table.add(vacia).spaceBottom(45);
    table.row();
    Label lTit;
    try {

        lTit = new Label(res.getString(titulo), getSkin(), "titulos");
        table.add(lTit).spaceBottom(10).spaceLeft(50);
        //stage.addActor(lTit);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    table.row();

  Label lText = new Label(res.getString(titulo + "_TXT"),getSkin());
  lText.setWrap(true);
   table.add(lText).width(375).spaceBottom(55);
   //lText.setAlignment(100);
   //lText.setWidth(200);
   table.row();

   table.setPosition(110, 0);
   //table.setSize(200, 200);

}

public void render(
        float delta )
    {
        super.render( delta );
        batch = super.getBatch();
        // we use the SpriteBatch to draw 2D textures (it is defined in our base
        // class: AbstractScreen)
        batch.begin();

        // we tell the batch to draw the region starting at (0,0) of the
        // lower-left corner with the size of the screen
        batch.draw( backgroundTextureRegion, 0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );

        // the end method does the drawing
        batch.end();
    }

private void crearTablaBack() {
    //the table for the back button
    Table tabla = new Table( getSkin() );
    tabla.debug();
    //table.debugTable();

    stage.addActor( tabla );

    tabla.setPosition(40, 35);

     TextButton botonBack = new TextButton( "<<", getSkin() );
     tabla.add( botonBack ).size(60, 40).spaceBottom(20);
      tabla.row();
        botonBack.addListener(new InputListener() {
            public boolean touchDown (InputEvent event, float x, float y, int   pointer, int button) {
               //super.touchUp(event, x, y, pointer, button);
                System.out.println("back");
                //game.setScreen(new ExperimentosScreen(game));
                //game.setScreen(new PruebaScreen(game));
                return true;
        }

});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:52:10.573

对 libgdx 中的 scene2d 不太了解，但从您的代码来看，如果 show() 方法的代码是用 render() 方法编写的，在绘制背景之后，它可能会起作用。我得到的是你正在绘制表格和按钮，然后在它上面绘制背景，所以所有的东西都被你的背景隐藏了。另一件事 Show 方法将被调用一次（您第一次创建方法时您的屏幕类）并且在您的类的生命周期中将多次调用 render 方法。而且我还没有深入阅读您的代码，但是您是否在任何地方调用了 stage.draw() 或 stage.act() ？？？

# gcc - GCC - 部分有错误的 LMA

> ID：15944199
> 
> 赞同：1
> 
> 时间：2013-04-11T08:37:10.140
> 
> 标签：gcc, linker-scripts

我的链接器脚本有问题。.data2、.nonsharedram 和 .bss 部分具有错误的 LMA。它们应该放置在 FLASH 中，而是放置在 SHARED1 和 SHARED2 区域中。

链接器脚本：

```
MEMORY
{
  FLASH      : org =  0x100000, len = 1M
  NON_SHARED : org =     0x100, len = 0x4600
  STACK      : org =    0x4700, len = 0x900
  BOOTPROG   : org =    0x8080, len = 0x1D80
  SHARED1    : org =   0x10000, len = 0x3000
  SHARED2    : org =   0x18000, len = 0x4000
  LATCH      : org =   0x40000, len = 2
  DSPCODE    : org = 0x1030000, len = 0x4000
  EXTRAM     : org =  0x200000, len = 1M
}

SECTIONS
{
  .cstack 0x4700 (NOLOAD) : {
    __STACK_START = .;
    . = . + 0x800;
    _STACK_END = . -4;
  } >STACK
  .istack 0x4F00 (NOLOAD) : {
    __ISTACK_START = .;
    . = . + 0x100;
    _ISTACK_END = . -4;
  } >STACK
  .bootprog        0x8080 (NOLOAD) : { *(.bootprog); }      >BOOTPROG
  .bmcdataram     0x10000 (NOLOAD) : { *(.bmcdataram); }    >SHARED1
  .dspdataram     0x102C0 (NOLOAD) : { *(.dspdataram); }    >SHARED1
  .pwron_ctrl     0x12000 (NOLOAD) : { *(.pwron_ctrl); }    >SHARED1
  .dspstack       0x12F00 (NOLOAD) : { *(.dspstack); }      >SHARED1
  .dsp2dataram    0x18000 (NOLOAD) : { *(.dsp2dataram); }   >SHARED2
  .output_latch   0x40000 (NOLOAD) : { *(.output_latch); }  >LATCH
  .dspcoderam   0x1030000 (NOLOAD) : { *(.dspcoderam); }    >DSPCODE
  .promst 0x100000 : 
    {
      *(.promst)
    } >FLASH
  .version 0x100100 :
    { 
      *(.version) 
    } >FLASH
  .cstart 0x100200 : 
    { 
      *(.cstart) 
    } >FLASH
  .rodata ALIGN(0x2) : AT (ADDR (.cstart) + SIZEOF (.cstart))
      { *(.rodata*) ; 
    } >FLASH
  .text : AT (ADDR (.rodata) + SIZEOF (.rodata))
    { 
      *(.text); 
      *(.ctors); 
      *(.dtors); 
      *(.eh_frame); 
      *(.jcr); 
    } >FLASH
  .init ALIGN(0x2) : AT (ADDR (.text) + SIZEOF (.text))
    { 
      *(.init*) ; 
    } >FLASH
  .fini ALIGN(0x2) : AT (ADDR (.init) + SIZEOF (.init))
    { 
      *(.fini*) ; 
    } >FLASH
  .data 0x12004 : AT (ADDR (.fini) + SIZEOF (.fini))
    {
      _datas = . ;
      *(EXCLUDE_FILE (*lib_a-impure.o *lib_a-mallocr.o) .data); 
      _datae = . ;
    } >SHARED1
  .data2 0x19000 : AT (ADDR (.data) + SIZEOF (.data))
    { 
      _data2s = . ;
      *lib_a-impure.o(.data); 
      *lib_a-mallocr.o(.data);
      _data2e = . ;
    } >SHARED2
  .nonsharedram 0x100 : AT (ADDR (.data2) + SIZEOF (.data2))
    { 
      _nonsharedrams = . ;
      *(.nonsharedram);
      _nonsharedrame = . ;
    } >NON_SHARED
  .bss 0x200000 : AT (ADDR (.data2) + SIZEOF (.data2))
    { 
      _bsss = . ;
      *(.bss); 
      *(COMMON); 
      _bsse = . ;
    } >EXTRAM
} 
```

来自 objdump：

```
Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .cstack       00000800  00004700  00004700  000fbf70  2**0
                  CONTENTS
  1 .istack       00000100  00004f00  00004f00  000fc770  2**0
                  CONTENTS
  2 .bootprog     00001d7f  00008080  00008080  000001d4  2**1
                  ALLOC
  3 .bmcdataram   00000210  00010000  00010000  000001d4  2**0
                  ALLOC
  4 .dspdataram   00001d40  000102c0  000102c0  000001d4  2**1
                  ALLOC
  5 .pwron_ctrl   00000004  00012000  00012000  000001d4  2**2
                  ALLOC
  6 .dsp2dataram  00001000  00018000  00018000  000009a8  2**1
                  ALLOC
  7 .output_latch 00000002  00040000  00040000  00000aac  2**1
                  ALLOC
  8 .dspcoderam   00004000  01030000  01030000  000fbf70  2**1
                  ALLOC
  9 .promst       00000056  00100000  00100000  00000aac  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 10 .version      00000015  00100100  00100100  00000b02  2**1
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
 11 .cstart       00000042  00100200  00100200  00000b18  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 12 .rodata       0009af26  00100242  00100242  00000b5a  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
 13 .text         0005fb00  0019b168  0019b168  0009ba80  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 14 .init         0000000c  001fac68  001fac68  000fb580  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 15 .fini         00000008  001fac74  001fac74  000fb58c  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 16 .data         000009dc  00012004  001fac7c  000fb594  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 17 .data2        000007d4  00019000  000129e0  000001d4  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 18 .nonsharedram 00000104  00000100  000197d4  000009a8  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 19 .bss          0001e6f4  00200000  000197d4  00000aac  2**2
                  ALLOC
 20 .comment      0000004b  00000000  00000000  000fc870  2**0
                  CONTENTS, READONLY
 21 .debug_frame  00015a84  00000000  00000000  000fc8bc  2**2
                  CONTENTS, READONLY, DEBUGGING
 22 .debug_abbrev 00006fe7  00000000  00000000  00112340  2**0
                  CONTENTS, READONLY, DEBUGGING
 23 .debug_info   00025b72  00000000  00000000  00119327  2**0
                  CONTENTS, READONLY, DEBUGGING
 24 .debug_line   00008f7a  00000000  00000000  0013ee99  2**0
                  CONTENTS, READONLY, DEBUGGING
 25 .debug_loc    0001db0a  00000000  00000000  00147e13  2**0
                  CONTENTS, READONLY, DEBUGGING
 26 .debug_pubnames 00000e8c  00000000  00000000  0016591d  2**0
                  CONTENTS, READONLY, DEBUGGING
 27 .debug_pubtypes 00003612  00000000  00000000  001667a9  2**0
                  CONTENTS, READONLY, DEBUGGING
 28 .debug_aranges 000008c0  00000000  00000000  00169dbb  2**0
                  CONTENTS, READONLY, DEBUGGING
 29 .debug_str    0000297e  00000000  00000000  0016a67b  2**0
                  CONTENTS, READONLY, DEBUGGING
 30 .debug_ranges 00000648  00000000  00000000  0016cff9  2**0
                  CONTENTS, READONLY, DEBUGGING 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T19:23:45.110

发现我应该使用：

```
AT (LOADADDR (.nonsharedram) + SIZEOF (.nonsharedram)) 
```

代替

```
AT (ADDR (.nonsharedram) + SIZEOF (.nonsharedram)) 
```

# lotus-notes - 如何将 Excel 表导入 Lotus Notes 视图

> ID：15944202
> 
> 赞同：0
> 
> 时间：2013-04-11T08:37:14.153
> 
> 标签：lotus-notes

我有一个包含许多客户的 Excel 表，我喜欢将它导入到 Lotus Notes 视图中。我创建了一个表单，其中的字段与 Excel 中的列同名，并创建了一个与列同名的视图。然后我尝试导入到这个视图，但它只生成一个表单，为什么

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T19:44:24.490

IBM Notes 没有内置支持直接导入或导出到 Excel。在过去，将 Excel 导出到 Lotus 123 文件，然后将它们导入 Notes 是可能的。从多年前开始，微软就放弃了出口到 123 的可能性。

如果您知道如何编程，这可以通过使用例如来自 OpenNTF.org的[LotusScript 代码轻松实现。](http://openntf.org/Projects/codebin/codebin.nsf/CodeByDate/DCD5A132F75581698625726700715FCA)我相信，如果您在网上搜索“将 excel 导入 Lotus Notes”之类的词，您会得到一个漂亮的选择列表。

如果您不介意 3\. 派对产品，我恰好是[Notes Import Export Library](http://www.vcode.no/web/vcode.nsf/htdocs/iel)的作者，它是一个导入/导出库，并再次将导入和导出功能直接导入 Excel。

快乐导入！

# html - SignalR 还是 Websocket？哪一个用于为移动设备构建基于网络的聊天应用程序？

> ID：15944204
> 
> 赞同：0
> 
> 时间：2013-04-11T08:37:22.480
> 
> 标签：html, http, websocket, signalr, signalr-hub

我必须为 Mobile 构建一个基于 Web 的聊天信使。为此，我希望服务器和客户端之间的通信打开，以便服务器可以在没有客户端请求的情况下推送消息。我发现 SignalR 和 Websockets 适合这个。但我不确定使用哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:56:16.130

在后台，SignalR 使用 Web 套接字、长轮询、服务器发送事件或永久帧，根据客户端和浏览器支持的内容，在应用程序中启用实时功能。您应该考虑使用它来避免兼容性问题并获得可用于开发实时应用程序的附加功能。您可以参考以下文档了解更多详细信息：

> [https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-13T06:37:02.643

答案是它真的**取决于**。这取决于你的规模，我并不是说 SignalR 的规模很差。它是关于在手机上支持 SignalR 客户端库的。

我们使用 signalr 已经有一段时间了，遇到了很多令人头疼的问题，然后又回到了原始的 websockets。

根据我的经验：

1- SignalR 不支持 xamarin 客户端上的 Websocket。（因为它使用 System.Net.WebSockets 中的类型，并且此命名空间[在任何 PCL 配置文件中都不可用](https://forums.xamarin.com/discussion/24164/signalr-websockets)）并且他们不打算很快添加它（我在 github 上联系了他们）。并且您可能没有其他解决方案，例如（长轮询或永久帧和...消耗的内存是 WebSockets 的 5 倍）。

2-它提供了对实际传输的可悲控制，这将使您在处理打盹模式、屏幕锁定等时在移动设备上遇到大麻烦......。（这些情况有一些解决方法，但它们基本上很脏）。

作为结论，如果您有时间，我认为对于移动设备，可以使用以单声道（根据 James james montemagno 所说）和主要 .net 实现的原始 System.Net.WebSockets。否则，您可以使用已停产的 Microsoft.WebSockets nuget 包。

# objective-c - UITableViewCell 滚动后重新加载自身

> ID：15944205
> 
> 赞同：0
> 
> 时间：2013-04-11T08:37:22.773
> 
> 标签：objective-c, cocoa-touch, uitableview

我正在尝试制作 UITableView。但是我的表格错误是，当它滚动时（当一个单元格被隐藏然后再次显示时）它会重置选项卡并再次从服务器加载图像。我怎样才能让它不加载图像或保留以前的单元格

```
static NSString *myIdentifier = @"myIdentifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:myIdentifier];
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:myIdentifier];

    backImage =  [[UIImageView alloc] initWithFrame:CGRectMake(2, 4, 300, 62)];
    userDp    = [[UIImageView alloc] initWithFrame:CGRectMake(11, 10, 50, 50)];
    name            = [[UILabel alloc] initWithFrame:CGRectMake(67, 12, 176, 20)];

    name.font            = [UIFont fontWithName:@"HelveticaLTStd-Bold"   size:12];

CustomActivityViewer *imgIndicator = [[CustomActivityViewer alloc] initWithView:userDp];
[imgIndicator startAnimating];

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0),^{
    UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@/%@", IMAGE_URL, player.imagePath]]]];

    dispatch_async(dispatch_get_main_queue(), ^{
        [imgIndicator stopAnimating];
        if (img != nil)
            userDp.image = img;

        [imgIndicator stopAnimating];
    });
});

[name setShadowColor:[UIColor blackColor]];
[name setShadowOffset:CGSizeMake(1, 1)];
name.textColor = [UIColor colorWithRed:1.0 green:0.824 blue:0 alpha:1.0];

cell.accessoryType = UITableViewCellAccessoryNone;
[cell setSelectionStyle:UITableViewCellEditingStyleNone];
cell.backgroundColor = [UIColor clearColor];

[cell.contentView addSubview:backImage];
[cell.contentView addSubview:userDp];
[cell.contentView addSubview:name];

return cell; 
```

}

如果我放置 if (cell!= nil) 则单元格重复自身。

该怎么办？

PS 在 iPhone 自己的教程之一中，我看到了类似 cell.contentView 设置带有标签的项目，然后如果单元格不为零，则使用标签调用视图。我找不到那个教程。万一有人知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:09:30.840

我**不**建议这样做：

您可以（但不应该）创建自己的单元格数组，其中包含与表格中的行一样多的对象。然后在 cellForRowAtIndexPath 中，您可以简单地返回适当的单元格而不是重用它们。从技术上讲，这没有什么问题。

对于两个少数细胞，这应该没问题。但是，当表变大时，这个概念几乎肯定会导致内存问题。

您还可以维护一组（异步加载）图像，正确重用单元格并返回到您的图像数组 witin `cellForRowAtIndexPath`。但是，这不会对内存问题产生太大影响，因为这会为单元格视图和子视图等节省内存，但通常图像数据本身非常消耗内存。

对于未指定的行数，可能取决于用户或业务数据等并且不能被限制，除了一些更智能的缓存解决方案之外别无选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:43:02.930

如果您不想每次都重新加载图像，则只需缓存图像。周围有很多选择，其中之一是 NSCache 或[SDWebImage](https://github.com/rs/SDWebImage)

# python - ipython 笔记本图像幻灯片

> ID：15944208
> 
> 赞同：0
> 
> 时间：2013-04-11T08:37:38.670
> 
> 标签：python, ipython, ipython-notebook

我想知道如何制作图像列表

```
SimpleCV.ImageSet(1.3) 
```

到 ipython 笔记本（1.0.dev）列表
一个活生生的例子在[这里](http://nbviewer.ipython.org/4706057)，在“In [22]”附近的行。
它似乎调用了一些预定义的函数

```
imgslides() 
```

但我无法弄清楚他是在哪里以及如何做到的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:09:38.950

这不是 IPython 的特性，作者可能是自己写的。建议你直接联系他。它似乎只是一个 iframe 的地址：http: [//epi.whoi.edu/esr/imgshow.html](http://epi.whoi.edu/esr/imgshow.html)

# iphone - 使用 ZipArchive-iOS 解压缩文件

> ID：15944209
> 
> 赞同：0
> 
> 时间：2013-04-11T08:37:48.083
> 
> 标签：iphone, ios, objective-c, ziparchive

我有一个 iPhone 应用程序，我必须在其中下载一个 zip 文件并解压缩组件。有人建议我使用 ZipArchive 为我完成这项工作，到目前为止我发现它非常有用。

我的问题是开源库 - ZipArchive 在提取/解压缩文件时会自动执行校验和（CRC 检查）吗？

还是我需要单独执行此操作以确保文件不会以任何方式损坏？

你们有什么感想？我的前进方向是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:05:42.670

查看代码，ZipArchive ( [http://code.google.com/p/ziparchive/](http://code.google.com/p/ziparchive/) ) 在提取的文件流被关闭 ( `unzCloseCurrentFile`) 时检查 CRC，所以答案是肯定的。

# asp.net - ASP.Net web-app Mem-leak 调查

> ID：15944210
> 
> 赞同：1
> 
> 时间：2013-04-11T08:37:51.690
> 
> 标签：asp.net, performance, memory-leaks, perfview

在调查在 Asp.Net 4.0 上运行的网站上的性能问题时需要建议。

**网站上的一点背景**：

该网站是一个建立在电子商务框架上的网上商店，已在许多项目中证明了自己的稳定性和可靠性。Webshop 已经稳定运行了很长一段时间（一年），但是在客户将他们的 ERP（MS Dynamics NAV）升级到更高版本后，性能问题很快就开始上升。

**问题本身：**

应用程序池正常启动，但会消耗几乎所有可用内存。所以，显然这是一个内存泄漏的情况。

更具体的例子：昨晚重新启动应用程序池，使用的内存约为 500 兆字节。在大约 16-18 小时内，该池已经以大约 2 GB 的速度运行。池将继续增长，直到几乎所有内存都被消耗并且应用程序变得非常缓慢。

应用程序池的内存快照是在池重新启动后和 2 Gig 时使用**PerfView拍摄的。**
快照的差异附在下面： ![堆快照在 500Mb 和 2Gb 之间存在差异](https://i.stack.imgur.com/sdkaG.png)

如您所见，第一行是*mscrolib!LocalDataStoreHolder*。如果我尝试打开有关它的详细信息，我可以看到以下引用来源视图，如下所示： ![LocalDataStoreHolder 上的引用视图](https://i.stack.imgur.com/vNWd7.png) 问题是 - 我无法打开这些节点中的任何一个以获取更详细的信息。所以目前我无法弄清楚，是什么吞噬了记忆。
如果它可能有任何帮助，下面是 RefTree 屏幕截图。在这里，您可以看到强句柄占 92.2%。 ![参考树视图](https://i.stack.imgur.com/CnkYZ.png)

所以问题是 - 任何人都可以提供任何关于如何深入细节的提示或想法吗？如何找出导致内存泄漏的原因？

先感谢您

编辑：我还尝试了 RedGate ANTS 内存配置文件，这在此处的各种线程中得到了很多建议。这是我拍摄了一些内存快照后的摘要图片，最新的一张在 20 小时后完成，应用程序池占用了大约 3.7 Gb 的 RAM。如您所见，左侧巨大的红色块是“Unmanaged”，大小为 2.5 Gb。正如 ANTS 所说，这要么被 CLR 本身用完，要么被图形数据用完，要么被通过 P/Invoke 或 COM+ 访问的非托管数据。不过，不知道如何获得更深入的细节。 ![在此处输入图像描述](https://i.stack.imgur.com/F5t4U.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:25:13.623

PerfView 无法恢复 64 位应用程序的堆栈（您可以在原始文档中找到它）。可能您的应用程序是 64 位应用程序。如果可能 - 尝试重新编译并以 32 位执行。

# javascript - 添加自定义复选框指令（具有隔离范围）后，角度内置指令不起作用

> ID：15944223
> 
> 赞同：0
> 
> 时间：2013-04-11T08:38:26.783
> 
> 标签：javascript, angularjs, angularjs-scope

我正在尝试在 Angular 中创建一个自定义复选框指令，并且我已经成功地做到了。`ng-click`但问题是没有调用内置函数。如果自定义指令被删除，`ng-click`效果很好。我想这与 Scope 有关，我仍然缺乏了解的知识。任何人都可以帮助我吗？

代码在这里[http://jsfiddle.net/bingjie2680/UzM2c/2/](http://jsfiddle.net/bingjie2680/UzM2c/2/)。

```
<div ng-app="components">
    <div ng-controller="MainCtrl">
        <input type="checkbox" ng-model="p.checked" />
         <div checkbox="p.checked" ng-click="test()">test</div>
         {{p.checked}}
    </div>
</div> 
```

js：

```
function MainCtrl($scope){ 
    $scope.p = {checked: false,  name:'test'};
    $scope.$watch('p', function(){

    }, true);

    $scope.test = function(){
        alert('test');
    }
}

angular.module('components', []).
directive('checkbox', function () {
return {
    link : function (scope, ele, attr){
        ele.bind('click', function(){
            ele.toggleClass('active');
            scope.$apply(function(){
                scope.value = ele.hasClass('active');
            });
        });

        scope.$watch('value', function(newv, oldv){
            newv ? ele.addClass('active') : ele.removeClass('active');
        });
    },
    scope : {
        value: '=checkbox'
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T15:13:08.137

尽管@Yahya 的答案会起作用，而不是 using `$parent`，如果您的 HTML 结构发生更改（即 HTML 更改可以更改范围的继承方式），它可能会中断，但您应该在 HTML 属性中指定您希望指令调用的方法/回调单击元素时：

```
<div checkbox="p.checked" cb="test()">test</div> 
```

然后在你的指令中：

```
ele.bind('click', function(){
   ele.toggleClass('active');
   scope.cb();               // calls test()
   scope.$apply(function(){
     scope.value = ele.hasClass('active');
   });
});
...        
scope : {
   value: '=checkbox',
   cb: '&',
} 
```

[小提琴](http://jsfiddle.net/mrajcok/yKWpb/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T09:11:02.970

那是因为您有一个具有隔离范围的指令，请尝试以下操作：

```
<div checkbox="p.checked" ng-click="$parent.test()">test</div> 
```

那可行。
希望这有帮助。

# php - 从另一个数据库获取数据

> ID：15944230
> 
> 赞同：1
> 
> 时间：2013-04-11T08:38:54.887
> 
> 标签：php, mysql, mysqli

我目前在一个数据库上，`for eg: user`. 我正在从该数据库中检索数据。但我需要从另一个数据库中获取数据，例如：

```
mysqli_select_db($link, "first");
$q1="select * from user";
$s1=mysqli_query($link,$q);
while($row=mysqli_fetch_assoc($s1))
{
 mysqli_select_db($link, "second");
 $q2="select * from ".$row['name'];
 $s2=mysqli_query($link,$q2);
 echo mysql_num_rows($s2);
} 
```

但显示错误：`undefined index name`. 我认为这是因为数据库更改和查询。

我想不出另一种方法来做到这一点。你能说另一种实现方式吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:47:58.570

您在其中定义查询，然后`$q1`调用which 是一个不同的变量，我猜您之前存储了一个查询，这将解释未定义的索引通知。`mysqli_query()``$q`

另一个问题是您`$link`对两个不同的数据库使用相同的变量。我建议将第一个`$link_first`和第二个存储起来`$link_second`以将它们分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:52:11.893

你应该改变

```
$s1=mysqli_query($link,$q); 
```

到

```
$s1=mysqli_query($link,$q1); 
```

因为您的查询存储在 $q1

你可以拿

```
mysqli_select_db($link, "second"); 
```

退出while循环..为什么每次迭代都选择数据库..？一旦选择它就会在那里，直到你再次改变它......

# rest - Symfony2 Doctrine SoftDeletable 和 JMSSerializerBundle 不能一起工作

> ID：15944234
> 
> 赞同：4
> 
> 时间：2013-04-11T08:38:59.797
> 
> 标签：rest, symfony, doctrine-orm, jmsserializerbundle, doctrine-extensions

我正在为 Symfony2 和 Doctrine 使用 Gedmo SoftDeletable 过滤器（[https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md)）

我还使用 JMSSerializerBundle 为我的 REST API 序列化对 JSON 的响应。

一旦我“软删除”一家公司，我请求所有公司的功能就不再起作用了，因为它会引发 Entity not Found 异常......有没有办法确保 JMSSerializerBundle 忽略我的数据库中的软删除实体？

我的 all() 函数如下所示：

```
/**
 * All action
 * @return array
 * 
 * @Rest\View
 */
public function allAction()
{
    $em = $this->getDoctrine()->getManager();

    $entities = $em->getRepository('TestCRMBundle:Company')->findAll();

    return array(
        'companies' => $entities,
    );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T08:48:10.193

由于嵌套关系，目前不支持，暂时无能为力。

但是，您可以禁用 SoftDeletable 行为：

```
/**
 * All action
 * @return array
 * 
 * @Rest\View
 */
public function allAction()
{
    $em = $this->getDoctrine()->getManager();

    $em->getFilters()->disable('softdeletable'); // Disable the filter

    $entities = $em->getRepository('TestCRMBundle:Company')->findAll();

    return array(
        'companies' => $entities,
    );
} 
```

请注意，它将返回**ALL**，甚至是**DELETED**实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-28T15:29:49.580

需要添加到配置中

```
 orm:
    filters:
        softdeleteable:
            class: Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter
            enabled: true 
```

并添加到实体

```
use Gedmo\Mapping\Annotation as Gedmo;

 * @ORM\HasLifecycleCallbacks
 * @Gedmo\SoftDeleteable(fieldName="deletedAt") 
```

# mysql - 我可以降低 MySQL 速度以突出显示导致缓慢的查询吗？

> ID：15944236
> 
> 赞同：2
> 
> 时间：2013-04-11T08:39:05.110
> 
> 标签：mysql, performance, benchmarking

我正在开发一个用 NodeJS 编写的 API，并连接到 MySQL 5.5 数据库。在我们的实时系统上，我们有一个运行时间超过 7 秒的查询。我们已将此追溯到几个表，其中包含超过 500 万条记录且索引不正确。

在我们的开发区，我们没有那么多记录。我想我已经确定了导致问​​题的查询，但是没有在我的笔记本电脑上放置 500 万条记录（这需要很长时间才能生成），我无法证明这一点。

是否有一种设置/技术可以用来模拟拥有数百万条数据库记录而实际上没有记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:18:33.247

您可以编写 Perl 或 Python 脚本来填充您的大型测试表。如果您将其作为单笔交易进行，则不会花费很长时间。

如果`generate_series()`PostgreSQL 支持 MySQL，那么不编写脚本会容易得多，但不幸的是，它没有:(。

但是，您仍然可以在 MySQL（或任何其他 SQL 数据库）中轻松创建大表，而无需编写脚本。主要思想是这样使用`INSERT INTO ... SELECT`：

```
CREATE TABLE mytable (
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(16)
);
INSERT INTO mytable(name) VALUES ('Blah');
INSERT INTO mytable(name) SELECT name FROM mytable;
INSERT INTO mytable(name) SELECT name FROM mytable;
... 
```

请注意，每个下一个都会使表格大小`INSERT` **翻倍。**

使用这种方法，这个[SQLFiddle在](http://www.sqlfiddle.com/#!2/80957/1)**不到 5 秒**的时间内使用大约 20 行 SQL创建了**100 万**个测试行。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:48:37.633

在 Oracle 中，您可以将表统计信息加载到其他数据库 - 即生产到开发 - 实际上，模拟在执行解释计划等操作时使用的数据量。在 MySQL 下是否存在等效的东西可能值得一看。它并不完美，但可以让您更好地了解引擎盖下发生的事情。

对不起，我不能更具体，我刚刚醒来，我还没有喝茶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:44:39.613

我最初的想法是将大量数据放入数据库以突出问题。我设法获得了一百万条记录，只需留下一个脚本一夜之间敲击（开发）API。

EXPLAIN 功能非常有用。我还发现 EXPLAIN EXTENDED 也非常有用。但是，这些都没有突出问题，因为它不是索引问题。

我还发现“RESET QUERY CACHE”功能很有用，因为它清除了缓存数据以进行调试。

一些 numty 在那里放了一个“WHERE DATE_FORMAT() = ''”。虽然对我花了多长时间才注意到它感到非常恼火（那是周五下午——请善待），但我发现并解决了这个问题。谢谢大家。

这个故事的寓意是：**永远不要在条款中坚持功能！****

# c# - 生成返回键事件

> ID：15944243
> 
> 赞同：0
> 
> 时间：2013-04-11T08:39:21.513
> 
> 标签：c#, windows-phone-7

如何通过 Windows Phone 7 App 中的代码生成返回键按下事件。

我在应用程序中有一个退出按钮，并希望为它提供与后退按钮相同的功能。基本上生成与后退键相同的事件。

关于退出和应用程序的任何其他想法，而无需实际按下后退键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:49:30.560

您可以[`NavigationService`](http://msdn.microsoft.com/en-us/library/ms615507.aspx)在您的页面中使用：

```
if (this.NavigationService.CanGoBack)
{
    this.NavigationService.GoBack();
} 
```

# javascript - 如何在新选项卡上打开 .pdf

> ID：15944245
> 
> 赞同：24
> 
> 时间：2013-04-11T08:39:24.343
> 
> 标签：javascript, jquery, asp.net-mvc-3, url.action

**目标：**

在某些任务正确完成后，我必须在新选项卡上打印 PDF。

步骤：我想执行一个应该转到服务器的方法，获取 PDF 并在新选项卡上打开它，我正在尝试使用这些但不工作：

**控制器**：出口

```
 public ActionResult PrintPdf()
    {
        Response.AppendHeader("Content-Disposition", "inline; filename= " + MyClassPdfWriter.GetFileName);
        return File(MyClassPdfWriter.GetMemoryStream, "application/pdf");
    } 
```

**查看**：

```
function TasksSucced(){
      $.get('@Url.Action("PrintPdf", "Export", "new {target = _blank}")');
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-11T10:07:09.163

解决了！这对我行得通

```
 window.open('/Export/PrintPdf'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-06-12T22:27:40.740

有几种方法可以下载或查看 PDF。

*   看法

您可以在响应标头中将**内容类型**设置为**application/pdf**就像`Content-Type: application/pdf`

为了在 javascript 中将其打开到新选项卡，请添加此代码。

```
window.open("Here Download PDF url", '_blank'); 
```

*   下载

您需要在响应标头中将**内容类型**设置为**application/octet-stream**，就像`application/octet-stream`.

并将**下载**HTML5 属性添加到**标签**或只是**target="_blank"**。

```
<a href="PDF URL" download="pdf">Download</a>
<a href="PDF URL" target="_blank">Download</a> 
```

因此，您可以使用 PDF.js 或 3rd 库在 iFrame 或内联页面中查看 PDF。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-03T12:14:36.227

```
$("a[target!='_blank'][href$='.pdf']").attr("target", "_blank"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-06T19:03:06.663

如果有人遇到类似的问题，上述解决方案在 Google Chrome 中都不适合我（它们在 Firefox 中确实有效）

此代码适用于所有主要浏览器：

```
var a = document.createElement('A');
var filePath = 'https://pathtopdf.com/file.pdf';
a.href = filePath;
a.download = filePath.substr(filePath.lastIndexOf('/') + 1);
document.body.appendChild(a);
a.click();
document.body.removeChild(a); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-25T23:54:38.070

您可以使用以下解决方案

```
 jQuery('<form target="_blank" action="' + URL + '" method="get"></form>').appendTo('body').submit().remove(); 
```

其中 URL 是 pdf 网址...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-20T08:24:18.750

您可以尝试使用[jQuery.defered](https://api.jquery.com/jquery.deferred/)。我为你准备了示例函数。它将处理 getPdf 调用，然后将解决 promise。希望这可以帮助

```
function getPDF() {
    return '';
}

getPdf()
  .then(function(response) {
    console.log('response here' + response);
    window.open(response);
  }).fail(function(){
      console.error('failed reposne');
  }); 
```

# excel - 计算具有条件的唯一值

> ID：15944249
> 
> 赞同：22
> 
> 时间：2013-04-11T08:39:44.090
> 
> 标签：excel, excel-formula, formula, pivot-table, array-formulas

在 AI 列中有不同名称的列表。在 B 列中，我的值为 0 或 1。

**我想计算 A 列中 B 列中有 1 的所有唯一名称。**

使用下面的数组公式，我可以计算唯一名称，但无法在 B 列上应用条件。

```
=SUM(1/COUNTIF(A:A,A:A)) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T09:20:08.640

假设不超过 100 行，请尝试使用此“数组公式”来计算 A2:A100 中的**不同**名称，其中 B2:B100 的同一行中有 1：

`=SUM(IF(FREQUENCY(IF(B2:B100=1,IF(A2:A100<>"",MATCH(A2:A100,A2:A100,0))),ROW(A2:A100)-ROW(A2)+1),1))`

确认`CTRL+SHIFT+ENTER`

请注意，我说的是不同的不是唯一的，因为两者是不一样的

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T09:20:13.687

像这样？

`=SUM(--(FREQUENCY(IF(($B$1:$B$8=1), COUNTIF($A$1:$A$8, "<"&$A$1:$A$8), ""), COUNTIF($A$1:$A$8, "<"&$A$1:$A$8))>0)))`

这是一个数组公式。您必须按`CTL`+ `SHIFT`+`ENTER`

截屏

![在此处输入图像描述](https://i.stack.imgur.com/9GUY6.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-13T13:28:41.800

这个常见问题的一个相对简单的解决方案是

=SUM((B:B=1)/COUNTIFS(A:A,A:A,B:B,B:B))

作为数组公式输入。

您需要将数组的大小限制为实际拥有数据的位置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T15:50:56.597

它必须是一个公式吗？一种非常简单的方法是从 A 列和 B 列中创建一个数据透视表。然后将 B 列设置为过滤器字段，将 A 的计数设置为值（您需要标记 A 列和 B 列）。然后数据透视表上的 A4（至少在默认情况下）应该包含您的答案。这适用于任何大小的列表，并且在有多种条件时确实有效。

如果它必须是一个公式，它是否必须完全如此？如果允许您在公式起作用之前按 A 排序，那么这个工作流程怎么样。我对此并不疯狂，我怀疑它可以改进。

1）按A（升序或降序）排序，然后按B（降序）

2）在C中，C的每一行都放一个这样的公式：

```
=if (and(A2<>A1,B2=1),1,0) 
```

C1 如下：

```
=b1 
```

从 C2 拖动到数据的最后一行（例如 c500）。

3) 然后通过对 C 求和来计数，=sum(c1:c500)。

您当然可以将公式拖到数据行下方（只要您知道所需的最大数量），它应该为所有空白行返回 0。然后，当您将数据添加到 A 和 B 时，其余部分将自动更新。您可能还需要诉诸数据。

数据透视表解决方案的一个好处是，只要您在现有数据的行中插入新数据，它就可以随着您的数据集自动增长。当然不需要排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T01:21:37.827

使用数据透视表很容易......：

![SO15944249 示例](https://i.stack.imgur.com/w5oDs.gif)

# spring - 迭代复杂的自定义注解数组

> ID：15944251
> 
> 赞同：0
> 
> 时间：2013-04-11T08:39:46.397
> 
> 标签：spring, annotations, javadoc

我创建了一个嵌套的自定义注释。我的代码在这里

```
@StatusCode(statusArray = {
          @StatusCodesArray(key="200", value="value is ok"),
          @StatusCodesArray(key="400", value="resource not available"),
          @StatusCodesArray(key="400", value="resource not available"),
          @StatusCodesArray(key="400", value="resource not available")
        }) 
```

现在我正在创建 java doc 以通过 Doclet API（[此处](http://docs.oracle.com/javase/6/docs/technotes/guides/javadoc/doclet/overview.html)）显示这些状态代码，但无法交互内部 statusCodes 值，但是我能够像这样迭代简单的注释

```
AnnotationDesc annotationDesc = getAnnotation(method, "StatusCode");
ElementValuePair[] paramNames = annotationDesc.elementValues(); 
```

返回 StatusCode 注释的值，但是如何迭代 StatusCodes 值？任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:36:58.403

在尝试了很多之后。我找到了解决方案。有两种方法可以迭代数组注释类型。首先，如果我们使用 Method API(java.lang.reflect)，那么它将非常简单，正如 Marius 在他的回答中所说的那样。

第二个是当我们使用 doclets（导入 com.sun.javadoc.MethodDoc api 和其他）时，它有点棘手。首先获取您的 MethodDoc 对象，然后通过此获取 AnnotationDesc 对象，您将在上述问题案例中达到 @StatusCode 注释。假设我有 AnnotationDesc API 的 annotationDesc 对象，然后使用以下代码迭代 &statusCodeArray 注释的值。

```
 ElementValuePair[] paramNames = annotationDesc.elementValues();
        AnnotationValue[] statusCodes = (AnnotationValue[])paramNames[0].value().value();
        if(statusCodes==null||statusCodes.length==0)
        {
            return statusCodeValue;
        }
        for(AnnotationValue statusCode:statusCodes)
        {
            AnnotationDesc anoDesc=(AnnotationDesc)statusCode.value();
            if(anoDesc==null)
            {
                return statusCodeValue;
            }
            String key=(String)anoDesc.elementValues()[0].value().value();
            String value=(String)anoDesc.elementValues()[1].value().value();

        } 
```

您将在键中获得状态代码，在值中获得状态注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:14:27.173

尝试在定义注释时访问注释；

```
 // MZ: Parse the status code annotations
    StatusCode statusCodes = method.getAnnotation(StatusCode.class);
    if (statusCodes != null)
    {
        for (StatusCodesArray statusCodeArray : statusCodes.value())
        {
            // MZ: Do your magic
        }
    } 
```

格！

# android - 为什么即使我知道它的存在，我的代码也找不到我的值？

> ID：15944252
> 
> 赞同：0
> 
> 时间：2013-04-11T08:39:48.543
> 
> 标签：android, database, search

```
**Here im trying to confirm that if a value is found so that i can move to the next page.**     

    public void onClick(View arg0) {
    sqlStuff search1 = new sqlStuff(search_page.this);
    switch (arg0.getId()) {

    case R.id.search_button:

        boolean found = false;
        String Systname = editText1.getText().toString();

        String[] IDSysNames = search1.getIDSysName();
        for(int i = 0; i < IDSysNames.length; i++)
        {
            if(Systname.equals(IDSysNames[i].toString()))
            {
              found = true;
              number = i;
            }
        }

        if(found==true)
        {
         Intent search = new Intent("com.MC.ChemPal.RESULT");
         startActivity(search);

        }
        else
        {
            Dialog d = new Dialog(this);
            d.setTitle("result not found");
            TextView tv = new TextView(this);
            d.setContentView(tv);
            d.show();
        }
        break; 
```

**这是我尝试获取以下值的部分**

```
public String[] getIDSysName()
{
    String[] result = new String[0];

    try
    {
        String[] columns = new String[] {KEY_SYSNAME };
        Cursor c  =  ourDatabase.query(DATABASE_TABLE, columns, null,  null, null, null, null);
        int iSysName = c.getColumnIndex(KEY_SYSNAME);

        int i = 0;
        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            i++;
        }

        result = new String[i];
        i = 0;
        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result[i] = c.getString(iSysName);
            String lk = null;
            Log.d(lk, result[i]);
                            i++;
        }

    }
    catch(Exception e)
    {
      String tr = null;
          Log.e(tr, e.getMessage());    
    }

    return result;
} 
```

此代码应该检查我的数据库中的值，如果找到它，请转到下一页。但是我不断收到我添加的未找到值的对话框。我已经检查过该值是否存在，因为我也有一个数据库视图代码。

日志猫。

```
FATAL EXCEPTION:MAIN
java.lang.NullPointerException:println needs a message
at android.util.Log.printlnNative(Native Method)
at android.util.Log.e(Log.java:230)
at com.MC.ChemPal.SqlDStuff.getIDSysName(sqlStuff.java.153)
at com.MC.ChemPal.search_page.onClick(search_page.java:42)
at android.view.View.performClick(View.java.2485)
at android.view.View$PerformClick.run(View.java.9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(zygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:25:50.130

由于指定的原因，日志导致错误`Mark Allison`。如果您的代码在添加日志之前运行良好，则未获得搜索项目问题的根源可能是区分大小写的搜索。

尝试使用

```
Systname.equalsIgnoreCase(IDSysNames[i].toString()) 
```

代替

```
Systname.equals(IDSysNames[i].toString()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:13:07.213

这是你的问题：

```
 String tr = null;
  Log.e(tr, e.getMessage()); 
```

Log.e 的第一个参数应该是一个包含 TAG 的字符串对象。试试这个：

```
 String tr = "My Tag";
  Log.e(tr, e.getMessage()); 
```

我认为您在数据库代码的某处遇到错误，但这里的崩溃是由您的异常处理引起的。

# c++ - 使用 C/C++ 的 POSIX 上的物理磁盘块大小

> ID：15944254
> 
> 赞同：7
> 
> 时间：2013-04-11T08:39:56.477
> 
> 标签：c++, linux, unix, filesystems, posix

我正在开发一个高性能 I/O 程序，我正在尝试找到使用 C++ 确定设备磁盘块的`_physical_`（而不是）字节大小的最佳方法。`_logical_`到目前为止，我的研究使我得到了以下代码片段：

```
#include <iostream>
#include <sys/stat.h>
#include <stdio.h>
#include <errno.h>

int main(int argc, char ** argv)
{
    // file information including block size of the device
    struct stat info;
    // device to get block size from
    char * device = "/mnt/hdb1";

    if (stat(device, &info))
    {
        printf("stat() error");
        strerror(errno);
        exit(1);
    }
    printf("Prefered block size for '%s' is %i byte\n", device, info.st_blksize);
    return 0;
} 
```

手册页对以下内容进行了说明`st_blksize`：

> st_blksize 字段给出了高效文件系统 I/O 的“首选”块大小。（以较小的块写入文件可能会导致读取-修改-重写效率低下。）

，但它没有提到`st_blksize`是逻辑还是物理磁盘块大小。

那么，是`st_blksize`物理*磁盘*块大小，如果是，那么这是检测物理磁盘块大小的最 POSIX OS 可移植方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T11:38:04.223

我写了一个答案，虽然希望不能正常工作于块设备。

没有 POSIX 机制来获取设备的基本物理块大小，您将不得不求助于`ioctl`，这取决于平台。

对于 linux 有[`ioctl(fd, BLKPBSZGET, &block_size)`](http://lxr.free-electrons.com/source/block/ioctl.c#L367)

对于 Solaris [`dkio`](http://docs.oracle.com/cd/E19082-01/819-2254/dkio-7i/index.html)，有允许您获取物理块大小的接口。

```
dk_minfo_ext media_info;
if (-1 != ioctl(fd, DKIOMEDIAINFOEXT, &media_info))
    block_size = media_info.dki_pbsize; 
```

对于 Mac OS X，它是[`ioctl(fd, DKIOCGETPHYSICALBLOCKSIZE, &block_size)`](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/sys/disk.h).

对于 FreeBSD，它应该是[`iotcl(fd, DIOCGSECTORSIZE, &block_size)`](http://fxr.watson.org/fxr/source/sys/disk.h#L28).

# perl - perl 元字符的混淆

> ID：15944255
> 
> 赞同：0
> 
> 时间：2013-04-11T08:39:57.470
> 
> 标签：perl, metacharacters

当我运行下面的程序时，它没有给我任何结果（“”）。
情景1：-

```
$var = "A STITCH IN TIME SAVES NINE";
       if ($var =~ /[1..9]/i) {
         print "FOUND\n"
      } 
```

但是当我在'..'运算符之前和之后添加空格时，它会抛出“Found and is”作为结果。

场景：- 2

```
 $var = "A STITCH IN TIME SAVES NINE";
           if ($var =~ /[1 .. 9]/i) {
             print "FOUND\n"
          } 
```

谁能解释一下这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T08:43:26.517

> 当我运行下面的程序时，它没有给我任何结果（“”）。

该字符串不包含 1、句号或 9。该模式与字符串中的任何内容都不匹配。

> 但是当我在 '..' 运算符之前和之后添加空格时，它会抛出“ Found and is ”

它确实包含多个空格。当您扩展字符类以匹配以包含空格时，它会匹配。

> 我还在声明中包含“$i”，但它仍然没有显示任何价值。

你从不定义`$i`. 您只尝试从中读取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T08:46:53.293

“..”并不表示您的字符类中的范围，它表示一个句号（两次:-)）。您的字符串中没有 1 、句号或 9 ，因此它与第一次不匹配。

此外，您不会在任何地方填充 $i 。$i 只是一个常规的标量变量，它不会神奇地填充任何东西。正则表达式 (/i) 末尾的 i 标志表示不区分大小写的搜索（如果您认为正在填充 $i

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:15:40.887

正则表达式语言*嵌入*在 Perl 中（反之亦然），但它不与 Perl 共享语法¹。这意味着重复或范围的其他语法。

[1) 正则表达式与 Perl 字符串共享语法，虽然两者不完全兼容，但请参阅`\b`转义的不同含义。]

字符类定义了一组多个属性。如果指定的属性之一匹配，则字符类将匹配。一个 charclass 可以包含：

*   单个字符，例如`[aeiou]`（匹配小写元音）
*   范围，以匹配代码点的连续范围：（`[A-Z]`大写拉丁字符）
*   整个 charclass 的否定：（`[^']`不是单引号的所有内容）
*   命名字符类，如`\d`, `\w`（和 Unicode 属性很有趣）
*   （POSIX 字符类）

如果一个 charclass 多次包含一个字符，这无关紧要，因为它的行为就像一个集合并集。

字符类中的元字符是

*   `]`: 比赛结束。要匹配方括号，必须使用`[\[\]]`or `[][]`，因为 charclass*不能*为空。
*   `^`仅在前导位置特殊的否定运算符：`[~&|^]`将匹配任何按位逻辑 Perl 运算符。
*   范围运算符`-`。要匹配文字减号，可以将其放在 charclass 的末尾：该类`[+-*]`将是无效的（`*`在之前`+`，因此该类是空的，这是非法的），但`[+*-]`可以正常工作
*   反斜杠仍然是转义字符。

字符类内部的空间很重要，即使在`/x`标志下也是如此。

### 在你的字符类上：

*   `[1..9]`也可以写成`[19.]`, 并匹配`1`,`9`或`.`, 因为句点*不是*字符类中的元字符。
*   `[1 .. 9]`可以写`[19\. ]`，并且另外匹配一个空格。正如我上面所说，空格在字符类中很重要。

### 你可能的意思是：

如果您想匹配任何数字`0`或`1`to `9`，您可以使用 range `[0-9]`。请记住，减号是字符类中的范围运算符。

# php - 当变量变为 TRUE 时弹出警报

> ID：15944256
> 
> 赞同：1
> 
> 时间：2013-04-11T08:39:59.010
> 
> 标签：php, javascript, ajax, jquery

我使用 ajax 从 php 脚本中接收一些变量。如果变量变为 TRUE，我想运行 JavaScript 警报功能窗口。当用户确认警报时，我想将一个新值发送回另一个 php，该 php 更新了 sqlite 中的表，并且警报功能恢复正常。

我的问题是我使用 setInterval 每秒更新变量。这意味着我的警报窗口也每秒弹出一次..

有没有更好的方法来做到这一点？

她是我的一些代码：

```
<script type="text/javascript">

$.ajaxSetup({ cache: false });

setInterval(function(){

$.getJSON('statusdata.php',function(data) {

hops = data["add_hops"];

if (hops == 1)
{
add_hops();
}

});
}, 1000); 
```

这是我的javascript：

```
<script type="text/javascript">

function add_hops()
{
startwindow=window.open("http://192.168.1.5/Birger/hops_alarm.html", "startwindow",         
"location=1,                          
status=0,scrollbars=0,width=750px,hight=350px");
startwindow.moveTo(640,300);
}   

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:56:50.593

JavaScript`setInterval`本身并不能正常工作。更不用说ajax了。ajax 是异步的。在 ajax 上使用回调`success`来确定是否弹出窗口。

当您发出过多的 ajax 请求时，浏览器会将它们排队。所以他们不保证在 1 秒内结束。

**从评论中**编辑：****

 **在您的 ajax 调用上使用 call 可确保您的 add_hops 函数在您的 ajax 调用终止之前不会被调用。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:59:49.193

防止代码重复警报的最佳方法是将超时捕获到一个变量，如下所示：

```
var myTimeout = setTimeout(function () {

    // …

}, 1000); 
```

现在您有了对超时的引用，您可以使用以下行取消它：

```
if (myTimeout) clearTimeout(myTimeout); 
```

要在您的函数中完成这项工作，您需要将该 clearTimeout 行插入到您的匿名函数中，如下所示：

```
var hops = null;
var myTimeout = setInterval(function(){

    if (hops == 1) {
        clearTimeout(myTimeout);
        return;
    }
    $.getJSON('statusdata.php',function(data) {
        hops = data["add_hops"];
        if (hops == 1) {
            add_hops();
        }
    });

}, 1000); 
```

将 clearTimeout() 调用添加到匿名函数而不是 $.getJSON() 调用可防止代码在延迟连接上潜在地执行不必要的 AJAX 请求。

> 参考
> 
> *   [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)**

# c# - 使用 c# (Microsoft Point Of Service) 检测 Bixolon SRP-275 Pos 打印机

> ID：15944257
> 
> 赞同：0
> 
> 时间：2013-04-11T08:39:59.447
> 
> 标签：c#, pos-for-.net

不知何故，我的控制台应用程序找不到我已经设置的 SRP-275 POS 打印机。因为，这是我第一次使用 POS 打印机，请多多包涵。

以下是我的步骤：

1.  安装 Bixolon SRP-275 Windows 驱动程序
2.  安装 Bixolon SRP-275 OPOS 驱动程序
3.  下载并安装 Pos.Net V 1.12
4.  将打印机插入 LAN 网络。

然后在我的代码中，我引用了 Microsoft.PointOfService（来自我安装的 Pos.Net），并尝试使用如下代码找到 PosPrinter：

```
PosExplorer posExplorer = new PosExplorer(this);
DeviceCollection devices = posExplorer.GetDevices(); 
```

然后，我尝试查看我的打印机是否列在其中一台设备中，但事实并非如此。如何从我的代码访问我的打印机，是否有任何步骤我做错了？

注意：我可以看到我的打印机安装在控制面板上

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:13:05.110

问题解决了。

我从 Bixolon 打印机配置了 OPOS 驱动程序，它现在可以识别它，谢谢。

# c# - 停用所有视图后，如何阻止 Caliburn Micro 关闭应用程序？

> ID：15944262
> 
> 赞同：1
> 
> 时间：2013-04-11T08:40:10.133
> 
> 标签：c#, .net, wpf, winforms, caliburn.micro

我正在将旧的 winforms 程序升级到 WPF，该程序使用 Caliburn Micro 用于 MVVM 和 Ninject 用于 DI。

我已将我的解决方案更新为运行 Caliburn Micro 引导程序的非通用实现的 WPF 解决方案。我这样做是因为我目前没有要运行的基本 ShellViewModel。

我使用的是 Ninject 风格的引导程序，而不是标准的 Caliburn Micro 引导程序，因为我对 Ninject 相当熟悉。

引导程序如下所示：

```
public class NinjectBootstrapper : Bootstrapper
{
    private const string EXTENSION_PATH = "Plugins";
    public static IKernel Kernel;

    protected override void Configure()
    {
        Kernel = new StandardKernel();

        Kernel.Bind<IEventAggregator>()
              .To<EventAggregator>()
              .InSingletonScope();

        Kernel.Bind<ViewModels.IAnalysisOutputTableViewModel>()
              .To<ViewModels.AnalysisOutputTableViewModel>()
              .InSingletonScope();

        Kernel.Bind<IWindowManager>()
            .To<WindowManager>()
            .InSingletonScope();

        Kernel.Bind<FormMain>()
              .ToSelf();
    }

    protected override object GetInstance(Type serviceType, string key)
    {
        if (serviceType != null)
        {
            return Kernel.Get(serviceType);
        }

        throw new ArgumentNullException("serviceType");
    }

    protected override IEnumerable<object> GetAllInstances(Type service)
    {
        return Kernel.GetAll(service);
    }

    protected override void BuildUp(object instance)
    {
        Kernel.Inject(instance);
    }
} 
```

为了让我的主窗体启动，我不得不在我的 App.xaml.cs 中重写 OnStartup，如下所示：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
        NinjectBootstrapper.Kernel.Get<FormMain>().Show();
    }
} 
```

如上所述，我将我的主要 Ninject 内核公开为一个公共静态来访问它，尽管我意识到这可能是一种反模式，一旦我完成了程序的转换，我将解决这个问题。

我已经使用适当的 MVVM 实现了我的主窗体的新子窗口。我需要像这样从按钮打开窗口：

```
private void dataViewerButton_Click(object sender, EventArgs e)
{
    windowManager.ShowWindow(analysisOutputTableViewModel);
} 
```

到目前为止，一切都很好。

问题是当我尝试关闭这个子窗口时。它不仅关闭了窗口，还关闭了我的整个程序。

我想这是因为，由于这个子窗口是 Caliburn 正在处理的唯一窗口（或视图），一旦它被停用，Caliburn 就会为我决定要关闭程序。

有没有办法阻止这种自动关闭行为？也许我应该以不同的方式初始化我的主表单？

* * *

### 更新

使用下面 Marwijn 的回答，我能够正确关闭我的应用程序。

最后，我`Application.Exit();`在主窗体的关闭事件中使用了：

```
private void Form_Main_FormClosing(object sender, FormClosingEventArgs e)
{
    Application.Exit();
} 
```

结合对我的 App.xaml.cs 的以下修改：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        var mainForm = NinjectBootstrapper.Kernel.Get<FormMain>();
        mainForm.Show();

        mainForm.FormClosed += mainForm_FormClosed;
    }

    void mainForm_FormClosed(object sender, System.Windows.Forms.FormClosedEventArgs e)
    {
        this.Shutdown(0);
    }
} 
```

我现在可以使用 Caliburn Micro 和 Ninject 从我的主窗体加载 WPF 窗口，并且一切都正常关闭并且不会留下任何进程运行。在我能够将主窗体更新为 WPF 之前，该解决方案似乎可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:57:30.613

原因似乎是`WindowManager`WPF 中的内容正在跟踪您的根虚拟机/窗口，并且由于您的启动代码绕过`WindowManager`并直接在窗口上调用`Show`，因此 CM 无法知道跟踪它。

检查 CM 代码并查看`Bootstrapper<T>`启动时它调用的实现显示：

```
protected void DisplayRootViewFor(Type viewModelType, IDictionary<string, object> settings = null) 
{
    var windowManager = IoC.Get<IWindowManager>();
    windowManager.ShowWindow(IoC.GetInstance(viewModelType, null), null, settings);
} 
```

所以看起来 CM 已经解析了根 VM 的实例并通过窗口管理器显示它。

有没有理由你不能让你的引导程序通用并`FormMain`用作通用类型（或者这只是一个视图？在这种情况下为它创建一个视图模型那么复杂？？）

```
public class NinjectBootstrapper : Bootstrapper<FormMain> 
```

或者如果不是

```
public class NinjectBootstrapper : Bootstrapper<FormMainViewModel> 
```

这段代码：

```
NinjectBootstrapper.Kernel.Get<FormMain>().Show(); 
```

相当于

```
IoC.GetInstance(viewModelType, ... etc) 
```

因为`IoC.GetInstance`只需调用`GetInstance`引导程序并且您的引导覆盖从容器中解析。

编辑：*这里有加分点，因为你从应用程序类中删除了对 ninject 内核的依赖，你可以使它成为非静态的并摆脱那个讨厌的静态容器解析*

或者，您可以确保`WindowManager`用于在当前代码中打开窗口：

```
var frmMain = NinjectBootstrapper.Kernel.Get<FormMain>();
windowManager.ShowWindow(frmMain); 
```

（不确定这里的依赖关系，因为`Application`需要依赖`IWindowManager`）

但是 - 我肯定会考虑不采用您目前采用的方法，而且我正在摸索使用通用引导程序是否有任何问题？您不需要这样的外壳，**只需**一个根视图模型，CM 将使用它来解析视图。（如果使用 MainForm 不起作用，创建一个视图模型来处理它应该是微不足道的......只需创建 MainFormViewModel 就是这样！你不需要连接它，它仍然可以是代码隐藏但可以由 CM 实例化使用 ViewModel-First 方法 - 在这种情况下它应该仍然有效）

编辑：我可能应该提到默认约定不会解析您的`FormMain`视图，除非您将其重构为`FormMainView`. 要么改变默认约定

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T07:34:07.993

你可以使用：

```
<Application
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    StartupUri="MainWindow.xaml"
    ShutdownMode="OnExplicitShutdown"
   >
</Application> 
```

这样，只有当您明确调用 shutdown 时，应用程序才会停止。

# url - 我使用谷歌网站管理员工具从 scribd 收到数百个“未找到”的 URL 错误

> ID：15944265
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:40:23.643
> 
> 标签：url, seo, scribd

在我的网站上使用谷歌网站管理员检查抓取错误我有数百个错误，都是由从 scribd 到我的网页上从未存在的 URL 的错误链接引起的。例如，像这样的 URL

jwsbook/BookQuote
TR/xhtml1/DTD/xhtml1-transitional.dtd
x3d/specifications/vrml/ISO_IEC_14772-All/等...

这些坏链接的数量随着时间的推移而增加，例如在过去 3 个月中增加了 200 个！

这会损害我的页面排名吗？我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:35:47.043

谷歌通常很擅长捕捉这样的漂浮物，所以我不会太担心。

他们去年推出了一种新工具，如果您担心，可以让您[拒绝链接。](http://googlewebmastercentral.blogspot.com/2012/10/a-new-tool-to-disavow-links.html)这将提醒 Google 链接不会被计为传入链接。

# gcc - 修改 gcc gcov 计数器大小

> ID：15944268
> 
> 赞同：0
> 
> 时间：2013-04-11T08:40:35.597
> 
> 标签：gcc, code-coverage, gcov

由于内存量非常有限，我想使用 gcov (gcc -fprofile-arcs -ftest-coverage) 修改用于覆盖数据的计数器的大小（当前为 64 位），并且需要一些指导才能实现这一点。

1.  是否可以在不修改和重新编译 gcc 的情况下更改计数器的大小？

2.  如果 1 不可能，需要更改 gcc 的哪些部分才能使用 32 位（甚至更小）的计数器？

预先感谢您提供任何可能有帮助的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:32:23.177

GCC 在其源代码中检测（计数器增加）语句，所以我认为不可能不修改 GCC 本身。

对于问题2：此过程中的GCC仪器计数器代码：(profile.c/branch_prob)-->(profile.c/instrument_edges)-->(profile.c/gen_edge_profiler)

profile.c 是 GCC_SOURCE_CODE/gcc 下的 GCC 源文件。函数 branch_prob 将分配所有计数器（如您所知，每个计数器为 8 个字节），因此这是您需要修改的第一部分。函数gen_edge_profiler生成rtl（编译后变成汇编）代码来增加计数器，你应该修改其中生成的（ADD指令）。这两个功能是最重要的，您还需要修改 gcov 读写功能以适应（4 字节计数器）。

# dynamics-crm-2011 - 如何在动态 crm 2011 中将一些数据插入到新的联系表单中？

> ID：15944272
> 
> 赞同：0
> 
> 时间：2013-04-11T08:40:53.613
> 
> 标签：dynamics-crm-2011, crm, microsoft-dynamics, dynamics-crm-online

所以，我想将从一种形式获取的数据插入到新的另一种形式中。

就我而言，我有一个联系人表格。例如，其中有一个查找。我可以使用查找找到任何帐户。因此，我有兴趣在我在查找中选择的帐户中获取一些字段值，然后将其插入到联系表单中的相同字段中。

我们能给我建议应该寻找什么方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:11:39.743

您可以使用 OData 在查找中获取有关帐户的信息。[OData 查询设计器](https://crm2011odatatool.codeplex.com/)和[XrmServiceToolkit](https://xrmservicetoolkit.codeplex.com/)是两个出色的免费资源，可以为您完成繁重的工作。

对上述内容进行一些谷歌研究，你应该有足够的东西来帮助你入门。如果没有，再喊一次。

# azure - Windows Azure 远程桌面无法连接

> ID：15944274
> 
> 赞同：0
> 
> 时间：2013-04-11T08:40:54.293
> 
> 标签：azure

我遵循以下链接上的所有步骤：

[http://blogs.msdn.com/b/jimoneil/archive/2010/12/29/azure-home-part-13-remote-desktop-configuration.aspx](http://blogs.msdn.com/b/jimoneil/archive/2010/12/29/azure-home-part-13-remote-desktop-configuration.aspx)

[http://geekswithblogs.net/enriquelima/archive/2011/03/30/deploying-an-rdp-enabled-azure-package-outside-of-visual-studio.aspx](http://geekswithblogs.net/enriquelima/archive/2011/03/30/deploying-an-rdp-enabled-azure-package-outside-of-visual-studio.aspx)

此外，成功启用了 RDP，因为 azure 门户向我展示了：

*“为云服务 BLABLAServer 成功配置远程桌面”*

但是当我尝试连接到任何正在运行的 Web 角色时，会弹出远程桌面连接错误：

“由于以下原因之一，远程桌面无法连接到远程计算机：

1.  未启用 RDP。
2.  关掉。
3.  远程计算机在网络上不可用。”

有人可以帮助我我还需要做什么吗？

我还在本地机器上安装了证书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-03T16:24:56.900

有问题，我通过刷新我的 dns 解决了它。

1.  打开命令提示符并输入：ipconfig /flushdns

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:10:53.307

有时，当我尝试直接从浏览器的下载栏访问下载的文件时，我会明白这一点。解决方法是保存 .rdp 文件，然后转到您下载的文件夹，编辑文件并确保选中“请求凭据”。保存并尝试重新打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T15:42:33.757

我有这个问题，但它只发生在我试图通过我们的防火墙访问远程桌面时。

# vb.net - 为什么我不能在 vb.net 中设置任何变量？

> ID：15944280
> 
> 赞同：0
> 
> 时间：2013-04-11T08:41:11.950
> 
> 标签：vb.net, mongodb

我的 vb.net 有问题。

我的代码

```
class business{
    buiding as string
} 
```

我从 mongodb 加载数据

```
Dim collection1 = db1.GetCollection(Of business)("tablebusiness")
Dim list = collection1.Find(query1)
For Each abiz In list
     Dim biztemp = abiz
     biztemp.buiding = nothing '//// (but I get biztemp.building = "") why??
     'biztemp.building = "" here
Next 
```

# php - 从 facebook api 发布到其他用户墙

> ID：15944285
> 
> 赞同：0
> 
> 时间：2013-04-11T08:41:24.300
> 
> 标签：php, facebook, facebook-wall

我正在创建一个允许用户销售商品的网站，登录基于 facebook API。广告创建时需要获得批准，因此在创建时不可见。我有一个字段，用户可以在其中检查他/她是否允许将新广告发布到他/她的 Facebook 个人资料中。这很完美，因为它发布得很好，但这里的问题是广告不可见

我的问题是是否可以通过 API 将此类内容发布到另一个用户的墙上。

现在的代码是

```
define('APP_ID', 'XXXX');
define('APP_SECRET', 'XXXXX');

$facebook = new Facebook(array(
        'appId' => APP_ID,
        'secret' => APP_SECRET
));

$facebook->api('/me/feed', 'post', array(
       'link' => 'www.XXXX.dk/viewad.php?aid='.$id,
       'name' => $_POST["headline"],
       'message' => 'I have created a new ad on www.XXXX.dk')); 
```

当广告被批准时，这会起作用吗？

```
$facebook->api('/12345678/feed', 'post', array(
           'link' => 'www.XXXX.dk/viewad.php?aid='.$id,
           'name' => $_POST["headline"],
           'message' => 'I have created a new ad on www.XXXX.dk')); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T12:19:24.410

不，[自 2013 年 2 月以来](https://developers.facebook.com/roadmap/completed-changes/)，您不能再通过 API 向其他人的墙发布（您只能使用提要对话框并让用户自己触发发布客户端）。

恕我直言，您正在尝试做的正是这种变化的原因——在其他人的墙上张贴“广告”是我认为纯粹的垃圾邮件。（如果 FB 的平台政策允许你的“商业模式”也完全值得怀疑，我认为。）

# javascript - 将多个值动态添加到高图中条形图的单点

> ID：15944286
> 
> 赞同：0
> 
> 时间：2013-04-11T08:41:26.770
> 
> 标签：javascript, graph, highcharts

我想知道是否有人知道 jsfiddle 示例，其中在单个点上具有多个值的堆叠条形图在创建后被更改。我已经看到很多将 setData 用于系列中的单个点的示例，但没有用于多个示例。

我目前有以下图表，并想在每个点上放置多个值。

```
window.jQuery(function () {
    //var opportunities_by_month_chart;
    opportunities_by_month_chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        title: {
            text: 'Pipeline By Month By Outcome'
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            categories: ['test', 'test2']
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Opportunity size in £'
            }
        },
        tooltip: {
            formatter: function () {
                return 'Month: ' + this.x + '<br/>' +
                    this.series.name + ': £' + this.y + '<br/>' +
                    'Total: £' + this.point.stackTotal;
            }
        },
        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },
        credits: {
            enabled: false
        },
        series: [{
                name: 'Closed Won',
                data: [],
                color: 'green'
            }, {
                name: 'Closed Postponed',
                data: [],
                color: 'orange'
            }, {
                name: 'Closed Lost',
                data: [],
                color: 'red'
            }, {
                name: 'Other',
                data: [],
                color: 'blue'
            }
        ]
    });

}); 
```

[http://jsfiddle.net/9FyGX/2/](http://jsfiddle.net/9FyGX/2/)

如果有人可以指出一个例子或向 jsfiddle 添加一个例子，那会让我很开心：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:14:52.180

如你所说

```
chart.series[0].setData([1, 2, 3, 4], true);
chart.series[1].setData([2, 3, 4], true); 
```

将工作。但是，最后一个参数 (true) 告诉 highcharts 重新绘制图表。因此使用 false 调用第一个 setData 会更有效，并且只有在添加完数据后才重新绘制。

```
chart.series[0].setData([1, 2, 3, 4], false);
chart.series[1].setData([2, 3, 4], true); 
```

# jquery - jQuery、blueimp 文件上传：清除表单仅在点击时有效

> ID：15944294
> 
> 赞同：2
> 
> 时间：2013-04-11T08:41:59.097
> 
> 标签：jquery, forms, upload

我正在使用 blueimp 文件上传插件，到目前为止一切正常。我已经将这个插件实现到我自己的表单中，通过 ajax 提交，这也很好用。

现在的问题：提交成功后，我回到表单，所有输入字段都被清除了，除了文件上传列表。

这个解决方案应该可以工作，当我在 onclick 函数中使用时它可以工作：

[https://github.com/blueimp/jQuery-File-Upload/issues/1631](https://github.com/blueimp/jQuery-File-Upload/issues/1631)

但是我不想使用单独的清除按钮，我想在提交成功后清除表单+文件列表，所以顺理成章，我写了这段代码：

```
 success: function(response) {
  // on success
  if (response.success === 1) {
    $('#fileupload table tbody tr.template-download').remove(); 
```

但这不起作用，即使我只是把这条线放在上面，document.ready下面（很清楚onload）。

为什么这只对点击有效？我错过了什么吗？有什么建议么？

提前感谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-12T08:30:58.453

试着打电话给这个，这对我有用

```
$("#fileupload").find(".files").empty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T05:24:25.123

之前发布的解决方案都没有对我有用。但是解开上传按钮就可以了。

```
progressall: function (e, data) {
  var progress = parseInt(data.loaded / data.total * 100, 10);
  if(progress==100)
    {  
      $('#btnUploadAll').unbind('click');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T11:42:28.693

您是否尝试过完成（而不是成功）：

```
 $('#fileupload').fileupload({
        url: url,
        dataType: 'json',
        done: function (e, data) {
                 $('#fileupload table tbody tr.template-download').remove();
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-24T12:04:18.227

看看选项“replaceFileInput”。我遇到了同样的问题，在将这个值为“false”的选项添加到 jquery 文件上传插件后，它对我有用。

似乎jquery文件上传在这一点上有点棘手，并且在替换场景后面的输入字段期间，重要的事件注册会丢失。

不知道是bug还是功能。:)

问候

你做

# arrays - 向用户显示多个验证消息

> ID：15944305
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:42:53.857
> 
> 标签：arrays, vba, ms-access, vb6, ms-access-2007

在 MS-Access 中，如何将 SELECT 语句中检索到的行存储在一个数组中，并在一个消息框中显示多行：

```
Dim rSEL, rSUM, rDes As DAO.Recordset
Dim vItem_id, vQnty, vSum As Integer
Dim vDes As String
If Not IsNull(itemId) And Not IsNull(qnty_in) Then
    If qnty_in <= 0 Or qnty_in > balance Or IsNull(balance) Then
        Cancel = True
    End If
    Set rSEL = CurrentDb.OpenRecordset("SELECT item_id,item_qnty 
               FROM basketQnty_tbl WHERE basket_id=" & basketId)
    'Check to see if the recordset actually contains rows
    If Not (rSEL.EOF And rSEL.BOF) Then
    rSEL.MoveFirst
    Do Until rSEL.EOF
        'Save itemId into a variable
        vItem_id = rSEL!item_id
        vQnty = (rSEL!item_qnty) * qnty_in
        Set rSUM = CurrentDb.OpenRecordset("SELECT sum(qnty_in*qnty_type) 
                   as QN FROM sales_tbl WHERE itemid=" & vItem_id)
        Set rDes = CurrentDb.OpenRecordset("SELECT itemDesc 
                   FROM items_main WHERE itemId=" & vItem_id)
        vSum = rSUM!QN
        vDes = rDes!itemDesc
        'Move to the next record. Don't ever forget to do this.
        If vQnty > vSum Then
            MsgBox "you have only (" & vSum & " ) of Item (" & vDes & " ) in the stock"
            Cancel = True
        End If
    rSEL.MoveNext
    Loop
    End If
   rSEL.Close
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:05:57.333

我不会为此使用消息框，因为您可能有数百行，而且它们并不都适合。相反，我会创建一个带有 ListBox 的自定义表单，并且每当出现错误时，请执行以下操作：

```
If vQnty > vSum Then
    <ErrorForm>.<ListBox>.AddItem("You have only (" & vSum & " ) of Item (" & vDes & " ) in the stock")
    Cancel = True
End If 
```

如果在循环结束时，Cancel = True，则显示 ErrorForm。

另一件事 - 您可以创建一个查询，它可以一次性完成所有这些。您需要连接三个表，并添加 vQnty > vSum 条件。这将非常简洁，因为您可以将查询用作 ListBox 的源 - 无需代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:42:54.153

无论如何，您知道[`GetRows`](http://msdn.microsoft.com/en-US/library/ee275120%28v=BTS.10%29.aspx)DAO 和 ADO 中的方法吗？你可以在你的情况下使用它。

```
yourarray = recordset.GetRows() 
```

# json - 错误 404.3 未找到 JSON 文件

> ID：15944311
> 
> 赞同：66
> 
> 时间：2013-04-11T08:43:06.543
> 
> 标签：json, iis, iis-7.5, http-status-code-404, mime-types

即使在我激活了所有“应用程序开发功能”之后，我仍然在“Internet Information Services 7.5”上使用 AJAX 调用调用 JSON 文件的“ERROR 404.3 Not Found”。除了 JSON 文件，所有其他文件都在加载。

我在本地机器上的 IIS 服务器上运行 HTML 页面。

如果我直接打开文件，那么根本没有问题。当我在在线服务器上托管文件时，它工作正常。

任何快速帮助将不胜感激。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2014-04-15T18:13:18.240

正如@ancajic 所建议的，我将以下代码放在了我的 web.config 文件中的 connectionString 标记之后，并且它起作用了。

```
 <system.webServer>
    <staticContent>
      <mimeMap fileExtension=".json" mimeType="application/json" />
    </staticContent>
  </system.webServer> 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-04-04T15:50:17.980

正如@elasticman 所说，有必要打开 IIS 管理器 -> Mime 类型 -> 添加新的 mime 类型

扩展名：.json MIME 类型：application/json

但对我来说，这还不够。我有一个 ASP.NET MVC 4 应用程序，我必须修改我的根**Web.config**文件。

插入

```
<staticContent>
  <mimeMap fileExtension=".json" mimeType="application/json" />
</staticContent> 
```

你内心的某个地方

```
<system.webServer>
    ...
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-04-11T08:55:20.267

您尝试接收的文件是否在同一个域中？还是您从另一台服务器获取 json？如果它托管在不同的域上，由于同源策略，您必须使用 JSONP。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-12-28T05:19:03.780

**选项1**

1.  前往 II

2.  选择网站

3.  双击 IIs 下的 Mime 类型图标

4.  点击右侧的添加链接

5.  文件扩展名 = .json Mime 类型 = application/json

6.  单击确定。

**选项 2**

像这样更新您的 web.config 文件

```
<system.webServer>
    <staticContent>
      <mimeMap fileExtension=".json" mimeType="application/json" />
    </staticContent>
</system.webServer> 
```

我希望你的问题得到解决

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-03-19T22:56:00.053

如果您将 IIS Express 与 Visual Studio 一起使用，IIS 管理器将不适用于 IIS Express。相反，您需要从 %userprofile%\documents\IISExpress\config\applicationhost.config 打开此配置文件并插入

```
<staticContent>
  <mimeMap fileExtension=".json" mimeType="application/json" />
</staticContent> 
```

以及所有其他预定义的 mime 类型。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-09-22T05:19:45.173

我在 IIS 上应用了以下设置是正确的。

* * *

1.打开IIS管理器

2.显示IIS服务器的属性

3.单击 MIME 类型，然后添加 JSON 扩展：

文件扩展名：.json

MIME 类型：应用程序/json

4.回到IIS服务器的属性

5.点击处理程序映射

添加脚本映射

请求路径：*.json

可执行文件：C:\WINDOWS\system32\inetsrv\asp.dll 名称：JSON

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-22T08:48:54.510

我没有同样的问题，但对我来说（Windows Server 2003 IIS 6）MIME 类型 application/json 不起作用。我使用 text/plain 并且工作完美（您不需要重新启动服务器）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-21T20:07:03.950

要使用 Azure 应用服务解决此问题：

使用 FTP 或 Kudu 仪表板将此文件添加到 wwwroot 上一级--

/site/applicationHost.xdt：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <system.webServer>
    <staticContent>
      <mimeMap fileExtension=".json" mimeType="application/json" xdt:Transform="InsertBefore(/configuration/system.webServer/staticContent/*[1])" />
    </staticContent>
  </system.webServer>
</configuration> 
```

然后，在 Azure 门户中的应用程序设置下，添加一个处理程序映射：

```
.json      C:\WINDOWS\system32\inetsrv\asp.dll 
```

# python - Python中的上下文相关方法 - 我做错了什么？

> ID：15944312
> 
> 赞同：1
> 
> 时间：2013-04-11T08:43:12.153
> 
> 标签：python, class, methods

我想创建一个类，其 f 方法取决于已创建类对象的“模式”。

下面的代码不起作用，但希望它能让您了解我想要做什么。我的想法是有一个字典，我在其中定义每种模式的设置（在这种情况下是分配给 self.f 的函数或方法，这样我就不必在 init 函数中使用许多 if elif 语句，而是分配正确的值使用字典。

```
class A(object):
    _methods_dict={
            'a':A.f1,
            'b':A.f2
            }    

    def __init__(self,mode = 'a'):
        self.f = _methods_dict[mode]

    def f1(self,x):
        return x

    def f2(self,x):
        return x**2 
```

我不知道为什么这不起作用，您将如何解决？还有更好的（和更多的pythonic）方法来获得相同的功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:45:05.567

存储两个函数的*名称*，然后用于`getattr()`检索绑定的方法`__init__`：

```
class A(object):
    _methods_dict = {
        'a': 'f1',
        'b': 'f2'
    }    

    def __init__(self, mode='a'):
        self.f = getattr(self, self._methods_dict[mode])

    def f1(self, x):
        return x

    def f2(self, x):
        return x ** 2 
```

或者，只需代理该方法：

```
class A(object):
    _methods_dict = {
        'a': 'f1',
        'b': 'f2'
    }

    def __init__(self,mode = 'a'):
        self._mode = mode

    @property
    def f(self):
        return getattr(self, self._methods_dict[self._mode])

    def f1(self, x):
        return x

    def f2(self, x):
        return x ** 2 
```

该`f`属性只返回当前模式的正确绑定方法。使用属性简化了调用签名处理，并为用户提供了自省的实际方法，如果他们愿意的话。

任何一种方法都有相同的最终结果：

```
>>> a1 = A()
>>> a2 = A('b')
>>> a1.f(10)
10
>>> a2.f(10)
100 
```

区别在于实例中存储了什么，第一个方法存储绑定的方法：

```
>>> vars(a1)
{'f': <bound method A.f1 of <__main__.A object at 0x10aa1ec50>>}
>>> vars(a2)
{'f': <bound method A.f2 of <__main__.A object at 0x10aa1ed50>>} 
```

与其他方法相比：

```
>>> vars(a1)
{'_mode': 'a'}
>>> vars(a2)
{'_mode': 'b'} 
```

这似乎没有太大区别，但后一种方法创建的实例可以毫无问题地进行腌制和深度复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:07:18.450

您可以只创建两个单独的类：

```
class Base(object):
    # place here all attributes shared in common among the Modes
    pass

class ModeA(Base):
    def f(self, x):
        return x

class ModeB(Base):
    def f(self, x):
        return x**2

def make_mode(mode, *args, **kwargs):
    mode_dict = {'a':ModeA, 'b':ModeB}
    return mode_dict[mode](*args, **kwargs)

a = make_mode('a')
print(a.f(10))
# 10

b = make_mode('b')
print(b.f(10))
# 100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:20:19.683

要回答您的第一个问题（“为什么这不起作用”）：类对象“A”仅在整个类语句之后创建并绑定到模块名称“A”（是的，“类”是一个可执行语句）块已结束，因此您不能在此块中引用名称或类对象本身。

# android - Android FrameLayout 和软键盘问题

> ID：15944314
> 
> 赞同：2
> 
> 时间：2013-04-11T08:43:21.567
> 
> 标签：android

我有一个 FrameLayout，其中添加了一个具有底部重力的 LinearLayout。结果，LinearLayout 出现在屏幕底部，并且位于所有其他图层的顶部。这是我需要的功能。但是，当屏幕上出现软键盘时，它会将底部布局向上推。结果，布局隐藏了我正在输入的字段。我能做些什么来避免这种情况？

亲切的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:45:55.617

将以下属性添加到**AndroidManifest.xml中的相关活动**

```
android:windowSoftInputMode="adjustPan" 
```

# c# - 将 2 个 Observable 集合绑定到彼此

> ID：15944325
> 
> 赞同：0
> 
> 时间：2013-04-11T08:43:47.790
> 
> 标签：c#, wpf, user-controls, observablecollection, dependency-properties

我有一个在他的代码隐藏文件中`UserControl`有一个。此控件用作( ) 的一部分。`ObservableCollection``DP``TabControl``TabItem`

```
public static readonly DependencyProperty OrderListProperty =
    DependencyProperty.Register("OrderList", typeof(ObservableCollection<Order>), typeof(OrderHistoryControl), new UIPropertyMetadata(new ObservableCollection<Order>()));

public ObservableCollection<Order> OrderList
{
  get { return (ObservableCollection<Order>)GetValue(OrderListProperty); }
  set { SetValue(OrderListProperty, value); }
} 
```

现在在我的`TabControl ViewModel`我有相同类型的`DP`.

```
public static readonly DependencyProperty OrdersProperty =
       DependencyProperty.Register("Orders", typeof(ObservableCollection<Order>), typeof(AccountViewModel), new UIPropertyMetadata(new ObservableCollection<Order>()));

public ObservableCollection<Order> Orders
{
  get { return (ObservableCollection<Order>)GetValue(OrdersProperty); }
  set { SetValue(OrdersProperty, value); }
} 
```

在`XAML`中`TabControl`的`OrderList`属性`UserControl`绑定到 的`Orders`属性`TabControl Viewmodel`。

```
<Grid>
    <my:OrderHistoryControl x:Name="orderHistoryControl"
                              OrderList="{Binding Orders, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              ExpanderOrderDetailsHeader="TEST TEST" />
</Grid> 
```

但是，当我填写`ObservableCollection Orders`（in `TabControl ViewModel`）时`ObservableCollection OrderList`，我`UserControl`的并没有更新。`PropertyChangedCallback`甚至没有被解雇。

我的用户控件上有一些其他控件，当我通过它更改他们的文本字段时`TabControl ViewModel`效果很好。所以我知道 2 `ObservableCollection`s 之间的绑定有问题。任何想法？

# java - 使用java刷新文件系统

> ID：15944326
> 
> 赞同：2
> 
> 时间：2013-04-11T08:43:47.963
> 
> 标签：java, jsp, servlets, file-upload, refresh

使用 Eclipse 通过 JSP 上传图像后，我无法获取 webContent 文件夹中的更改。对于那里的更改，我必须刷新 webContent。上传后如何刷新文件系统或如何显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:48:52.330

你可以使用一个[`WatchService`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)

> 监视注册对象的更改和事件的监视服务。例如，文件管理器可以使用监视服务来监视目录的更改，以便在创建或删除文件时更新其文件列表的显示。

按照[这个 Oracle 教程](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)。

# c++ - 相同的内容，不同的 MD5 - 文件和字符串

> ID：15944327
> 
> 赞同：7
> 
> 时间：2013-04-11T08:43:49.157
> 
> 标签：c++, c, md5

1.  我有一个文件`testfile`和一个字符串`teststring`。

2.  我在一个 shell 中写道：
    `echo "a" > testfile`

3.  然后`xxd testfile`
    我可以看到我的文件内容
    输出的十六进制值：

    ```
    0000000: 610a               a. 
    ```

4.  看我的代码：

    ```
    int file;
    struct stat s;
    unsigned long size;
    char* buffer;
    char md5[MD5_DIGEST_LENGTH]

    file = open("testfile", O_RDONLY);
    if (file < 0)
        return false;

    if (fstat(file, &s) < 0)
    {
        close(file);
        return false;
    }

    size = s.st_size;                       //GET FILE SIZE
    printf("filesize: %lu\n", size);        //PRINT FILESIZE FOR DEBUGGING
    buffer = (char*)mmap(0, size, PROT_READ, MAP_SHARED, file, 0); //MAP FILE CONTENT TO BUFFER
    MD5((unsigned char*)buffer, size, md5); //GENERATE MD5
    munmap(buffer, size);                   //UNMAP BUFFER
    close(file);

    for (int i = 0; i < MD5_DIGEST_LENGTH; i++)
        printf("%02x", md5[i]);
    printf("\n");

    unsigned char* teststring = "\x61\x0a"; //SAME STRING AS IN THE FILE

    MD5((unsigned char*)teststring, 2, md5);
    for (int i = 0; i < MD5_DIGEST_LENGTH; i++)
        printf("%02x", md5[i]);
    printf("\n"); 
    ```

5.  它打印：

    ```
    filesize: 2  
    60b725f10c9c85c70d97880dfe8191b3  
    e29311f6f1bf1af907f9ef9f44b8328b 
    ```

    两个**完全不同的**md5 哈希。
    我尝试将它们写入`buffer`文件
    并将它们写入`teststring`文件***它们是相同的***！
    凭什么？
    不`buffer`一样`teststring`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:22:42.523

正确的哈希是您的第一个哈希，`60b725f10c9c85c70d97880dfe8191b3`.

```
$ echo "a" | md5
60b725f10c9c85c70d97880dfe8191b3 
```

您的第二个散列恰好是“\x64\x0a”的散列，或者是字符 'd' 后跟换行符：

```
$ echo "d" | md5
e29311f6f1bf1af907f9ef9f44b8328b 
```

您确定您发布的代码是您正在编译/运行的代码吗？你忘记重新编译了吗？您正在执行旧的二进制文件吗？

# java - 从Java中的mysql数据库表中检索数据

> ID：15944331
> 
> 赞同：1
> 
> 时间：2013-04-11T08:44:20.547
> 
> 标签：java, mysql, jdbc, xhtml, arraylist

我在从数据库中检索数据时遇到问题。我有一个功能

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;  
import java.sql.SQLException;
import java.sql.Statement;

public class DataAccess {
private Connection conn;
private User user = new User();

public DataAccess(){
    connect();
}

public boolean connect() {
    boolean success = true;

    String driverName ="com.mysql.jdbc.Driver";
    String conURL = "jdbc:mysql://localhost:3306/final_project";
    String user = "root";
    String pass = "1009";

    try {
        Class.forName(driverName).newInstance();
    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        System.err.println(e.getMessage() + "------Cannot Load Driver");
        success = false;
    }

    try {
        conn = DriverManager.getConnection(conURL, user, pass);
    } catch (SQLException e) {
        System.err.println(e.getMessage() + "--SQL States: " + e.getSQLState() + "---- ErrorCode: " + e.getErrorCode());
        success = false;
    }
    return success;
}

public void insertBooks (Books books)
{
    try {           
        PreparedStatement stmt = conn.prepareStatement("insert into Books (Title, Author, ISBN, Total) VALUES (?, ?, ?, ?);");
        stmt.setString(1, books.getTitle());
        stmt.setString(2, books.getAuthor());
        stmt.setInt(3, books.getISBN());
        stmt.setDouble(4, books.getPrice());

        stmt.executeUpdate();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void selectBooks () {
    try {
        Statement stm = conn.createStatement();
        ResultSet rs = stm.executeQuery("SELECT * FROM books");
        while (rs.next()) {
            Books books = new Books();

            books.setTitle(rs.getString(1));
            books.setAuthor(rs.getString(2));
            books.setISBN(rs.getInt(3));
            books.setPrice(rs.getDouble(4));

            user.add(books);
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

}

它从表books中选择并获取并设置每个字段为title、author、isbn和price，然后将其添加到用户类中的bookList对象中。当我使用该功能时

```
public ArrayList<Books> getBookList() {
    return bookList;
} 
```

什么都没有返回。

用户类：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
import java.util.ArrayList;

@ManagedBean(name = "user")
@SessionScoped
public class User {
private String firstName;
private String lastName;
private ArrayList<Books> bookList = new ArrayList<Books>();
private ArrayList<Books> shopBookList = new ArrayList<Books>();
private double total;

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

public ArrayList<Books> getBookList() {
    return bookList;
}

public void setBookList(ArrayList<Books> bookList) {
    this.bookList = bookList;
}

public double getTotal() {
    for (Books bk : bookList) {
        total += bk.getPrice();
    }
    return total;
}

public void setTotal(double total) {
    this.total = total;
}

public ArrayList<Books> getShopBookList() {
    return shopBookList;
}

public void setShopBookList(ArrayList<Books> shopBookList) {
    this.shopBookList = shopBookList;
}

public String add(Books books) {
    bookList.add(books);
    DataAccess da = new DataAccess();
    da.insertBooks(books);
    return "Added";
}

public String searchBooks() {
    DataAccess da = new DataAccess();
    da.selectBooks();
    return "books";
}

public String shop(Books books) {
    shopBookList.add(books);
    return null;
}

public String start() {
    bookList = new ArrayList<Books>();
    firstName = "";
    lastName = "";
    total = 0;
    FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
    return "index";
} 
```

}

书籍类：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean(name = "books")
@SessionScoped

public class Books {
private String title;
private String author;
private int ISBN;
private double price;

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getAuthor() {
    return author;
}

public void setAuthor(String author) {
    this.author = author;
}

public int getISBN() {
    return ISBN;
}

public void setISBN(int iSBN) {
    ISBN = iSBN;
}

public double getPrice() {
    return price;
}

public void setPrice(double total) {
    this.price = total;
} 
```

}

应该从 user.booklist 中获取数据的页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core">

<h:body>
<h:form>
    <h1>Books Page</h1>
    <hr />
    <label>The following books are available:</label><br />
    <h:dataTable value="#{user.bookList}" var="bk" border="1">
        <h:column>
            <f:facet name="header">ISBN</f:facet>
            <h:outputText value="#{bk.ISBN}" />
        </h:column>
        <h:column>
            <f:facet name="header">Title</f:facet>
            <h:outputText value="#{bk.title}" />
        </h:column>
        <h:column>
            <f:facet name="header">Author</f:facet>
            <h:outputText value="#{bk.author}" />
        </h:column>
        <h:column>
            <f:facet name="header">Price</f:facet>
            <h:outputText value="#{bk.price}" />
        </h:column>
        <h:column>
            <f:facet name="header">Add</f:facet>
            <h:commandLink value="Add" action="#{user.shop(bk)}" />
        </h:column>
    </h:dataTable>
    <h:commandButton value="Home" action="index" />
    <h:commandButton value="Checkout" action="checkout" />
</h:form>
</h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:49:52.843

我发现了问题所在。我忘了提到我正在使用 jsf 技术，并且还使用会话来存储对象和值。每次我尝试 selectbooks 方法时，它都会创建一个新用户，而不是使用当前会话用户。因此，它总是会生成一个新用户并为当前会话用户提供空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:58:06.807

正如 Abi 所提到的，您添加到了错误的列表中。以更一般的方式，您应该使用 OpenJPA，它更便于管理持久性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:59:52.060

```
public User selectBooks () {
    try {

        User userObject=new User();

        //ArrayList<Books> bookList=new ArrayList<Books>();

        Statement stm = conn.createStatement();
        ResultSet rs = stm.executeQuery("SELECT * FROM books");
        while (rs.next()) {
            Books books = new Books();

            books.setTitle(rs.getString(1));
            books.setAuthor(rs.getString(2));
            books.setISBN(rs.getInt(3));
            books.setPrice(rs.getDouble(4));

            user.getBookList().add(books);
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    return userObject;
} 
```

# android - 方便使用Android XmlResourceParser？

> ID：15944332
> 
> 赞同：5
> 
> 时间：2013-04-11T08:44:25.417
> 
> 标签：android, scala, xml-parsing, android-resources, simple-framework

当我需要访问已编译的 Android XML 资源时，我似乎无法使用`openRawResource(resId)`，因为它为我提供了已编译的二进制文件。

我发现获取 XML 的唯一方法是使用`getXml(resId)`返回`XmlResourceParser`（实现`XmlPullParser`）。

如何方便地从 Android 资源中反序列化复杂的编译 XML（但不大）？

我试图破解[Simple](http://simple.sourceforge.net/) XML 框架：

```
val serializer = new Persister()
serializer.read(classOf[AFoo], 
    new NodeReader(new PullReader(r.getXml(resId))).readRoot) 
```

（上面的 Scala 代码被简化了。）

但是它失败了：

```
java.lang.RuntimeException: getPrefix not supported
    at android.content.res.XmlBlock$Parser.getPrefix(XmlBlock.java:156)
    at org.simpleframework.xml.stream.PullReader$Start.<init>(PullReader.java:373)
    at org.simpleframework.xml.stream.PullReader.start(PullReader.java:143)
    at org.simpleframework.xml.stream.PullReader.read(PullReader.java:109)
    at org.simpleframework.xml.stream.PullReader.read(PullReader.java:117)
    at org.simpleframework.xml.stream.PullReader.next(PullReader.java:89)
    at org.simpleframework.xml.stream.NodeReader.readElement(NodeReader.java:111)
    at org.simpleframework.xml.stream.NodeReader.readRoot(NodeReader.java:85) 
```

*   是否有任何不调用的 XML 反序列化器`getPrefix`？
*   或者是否已经存在从 Scala 库构建`Node`树的`XmlPullParser`？（因此可以使用 Scala 投影函数对其进行查询。）
*   或者您有任何其他提示如何从资源中读取小而复杂的编译 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:35:50.760

似乎您使用的 XmlPull 版本不支持命名空间。尝试使用

org.simpleframework.xml.stream.DocumentProvider

这使用 w3c DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T15:45:45.670

我做了一个包装类，终于解决了这个问题。（我使用的是 Java 而不是 Scala。）

```
Persister serializer = new Persister();
serializer.read(AFoo.class, 
    new NodeReader(new PullReader(new XmlPullParserWrapper(r.getXml(resId)))).readRoot()) 
```

在哪里

```
public class XmlPullParserWrapper implements XmlPullParser {
    private XmlPullParser mParser;

    public XmlPullParserWrapper(XmlPullParser parser) {
        mParser = parser;
    }

    @Override
    public void setFeature(String name, boolean state) throws XmlPullParserException {
        mParser.setFeature(name, state);
    }

    @Override
    public boolean getFeature(String name) {
        return mParser.getFeature(name);
    }

    @Override
    public void setProperty(String name, Object value) throws XmlPullParserException {
        mParser.setProperty(name, value);
    }

    @Override
    public Object getProperty(String name) {
        return mParser.getProperty(name);
    }

    @Override
    public void setInput(Reader in) throws XmlPullParserException {
        mParser.setInput(in);
    }

    @Override
    public void setInput(InputStream inputStream, String inputEncoding) throws XmlPullParserException {
        mParser.setInput(inputStream, inputEncoding);
    }

    @Override
    public String getInputEncoding() {
        return mParser.getInputEncoding();
    }

    @Override
    public void defineEntityReplacementText(String entityName, String replacementText) throws XmlPullParserException {
        mParser.defineEntityReplacementText(entityName, replacementText);
    }

    @Override
    public int getNamespaceCount(int depth) throws XmlPullParserException {
        return mParser.getNamespaceCount(depth);
    }

    @Override
    public String getNamespacePrefix(int pos) throws XmlPullParserException {
        return mParser.getNamespacePrefix(pos);
    }

    @Override
    public String getNamespaceUri(int pos) throws XmlPullParserException {
        return mParser.getNamespaceUri(pos);
    }

    @Override
    public String getNamespace(String prefix) {
        return mParser.getNamespace(prefix);
    }

    @Override
    public int getDepth() {
        return mParser.getDepth();
    }

    @Override
    public String getPositionDescription() {
        return mParser.getPositionDescription();
    }

    @Override
    public int getLineNumber() {
        return mParser.getLineNumber();
    }

    @Override
    public int getColumnNumber() {
        return mParser.getColumnNumber();
    }

    @Override
    public boolean isWhitespace() throws XmlPullParserException {
        return mParser.isWhitespace();
    }

    @Override
    public String getText() {
        return mParser.getText();
    }

    @Override
    public char[] getTextCharacters(int[] holderForStartAndLength) {
        return mParser.getTextCharacters(holderForStartAndLength);
    }

    @Override
    public String getNamespace() {
        return mParser.getNamespace();
    }

    @Override
    public String getName() {
        return mParser.getName();
    }

    @Override
    public String getPrefix() {
        return "";
    }

    @Override
    public boolean isEmptyElementTag() throws XmlPullParserException {
        return mParser.isEmptyElementTag();
    }

    @Override
    public int getAttributeCount() {
        return mParser.getAttributeCount();
    }

    @Override
    public String getAttributeNamespace(int index) {
        return mParser.getAttributeNamespace(index);
    }

    @Override
    public String getAttributeName(int index) {
        return mParser.getAttributeName(index);
    }

    @Override
    public String getAttributePrefix(int index) {
        return "";
    }

    @Override
    public String getAttributeType(int index) {
        return mParser.getAttributeType(index);
    }

    @Override
    public boolean isAttributeDefault(int index) {
        return mParser.isAttributeDefault(index);
    }

    @Override
    public String getAttributeValue(int index) {
        return mParser.getAttributeValue(index);
    }

    @Override
    public String getAttributeValue(String namespace, String name) {
        return mParser.getAttributeValue(namespace, name);
    }

    @Override
    public int getEventType() throws XmlPullParserException {
        return mParser.getEventType();
    }

    @Override
    public int next() throws XmlPullParserException, IOException {
        return mParser.next();
    }

    @Override
    public int nextToken() throws XmlPullParserException, IOException {
        return mParser.nextToken();
    }

    @Override
    public void require(int type, String namespace, String name) throws XmlPullParserException, IOException {
        mParser.require(type, namespace, name);
    }

    @Override
    public String nextText() throws XmlPullParserException, IOException {
        return mParser.nextText();
    }

    @Override
    public int nextTag() throws XmlPullParserException, IOException {
        return mParser.nextTag();
    }
} 
```

# asp.net - 从Table2中提取数据到Table1的TextArea

> ID：15944336
> 
> 赞同：0
> 
> 时间：2013-04-11T08:44:46.670
> 
> 标签：asp.net, c#-4.0

我在我的 aspx 页面中设计了 2 个表格。`table1`里面是空白`TextArea`的。其中`table2`有 , , 等字段，并且`FirstName`这些属性已经输入到数据库中。我已经为这些属性输入了相应的符号（例如，名字符号是 {F}，姓氏符号是 {L} 等）。`LastName``Age``DOB`

我的要求是，当我单击`Table2`（例如`FirstName`）的字段时，它将显示`TextArea`为`table1`“Hi My Name is {F}”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:01:10.700

> 我试过自己做这个程序，但我没有在我的文本区域中提取属性的符号。

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using System.Data.SqlClient;
    using System.Data;
    using System.Web.UI.HtmlControls;

public partial class Default2 : System.Web.UI.Page
{
    SqlConnection con = new SqlConnection(@"Data Source=AITPLCP72\SQLEXPRESS;Initial Catalog=Template;Integrated Security=True");
    DataSet ds = new DataSet();
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            SqlDataAdapter adp = new SqlDataAdapter("select field,Symbols from temp2", con);
            adp.Fill(ds);
        }
    }
    protected void btnfirstname_onclick(object sender, EventArgs e)
    {
        Symbol("firstname");
    }
    protected void btnlastname_onclick(object sender, EventArgs e)
    {
        Symbol("lastname");
    }
    protected void btnage_onclick(object sender, EventArgs e)
    {
        Symbol("age");
    }
    protected void btndob_onclick(object sender, EventArgs e)
    {
        Symbol("dob");
    }
    protected void btnsubmit_Click1(object sender, EventArgs e)
    {
        string s = TextArea1.InnerHtml;
        Response.Redirect("http://localhost:2482/Template1/Default3.aspx?text1=" + s);
    }

    public void Symbol(string s)
    {
        foreach (DataRow row in ds.Tables[0].Rows)
        {
            if (row[0].ToString() == s.ToString())
            {
                string st = TextArea1.Value;
                st += row["Symbols"];
                TextArea1.Value = st;
            }
        }
    }
} 
```

# python - Python - 将现有工作簿的格式应用于另一个工作簿

> ID：15944337
> 
> 赞同：2
> 
> 时间：2013-04-11T08:44:48.497
> 
> 标签：python, excel, excel-2007, xlwt, openpyxl

我对 Python 编码比较陌生，这是我的问题： 1- 当我更新现有 .xlsx 文件的数据（使用 openpyxl）时，结果是 .xlsx 丢失了所有以前的格式。我也尝试过使用 .xls（使用 xlwt 和 xlrd），但没有任何改变。2- 所以，我决定保留这个未格式化的结果文件并应用模板 .xls(x) 文件的所有格式。

是否有直接的方法来保留步骤 1 中的格式？如果没有，我该如何实施第 2 步？

PS：我尝试使用 xlutils.styles 处理样式......但我没有设法......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T23:20:22.670

您可以使用 xlrd 获取单元格的格式，并将其设置为您在 xlwt 中编写的单元格的样式。单元格的`xf_index`属性是 XFSt​​yle 对象的一个​​实例，可以直接转储到`write`方法的样式参数中，如下所示：

```
import xlwt,xlrd
readbook = xlrd.open_workbook('book.xls', formatting_info=True)
readsheet = readbook.sheet_by_index(0)
cell = sheet.cell(0,0)
writebook = xlwt.Workbook()
writesheet = writebook.add_sheet('sheet1')
writesheet.write(0,0,'First Cell', cell.xf_index) 
```

从那里您可以迭代以匹配每个单元格的格式，也可以将每种格式写入行或列，如下所示：[https://github.com/python-excel/xlwt/blob/master/xlwt/examples/row_styles。 py](https://github.com/python-excel/xlwt/blob/master/xlwt/examples/row_styles.py)

# postgresql - 更改 max_connections 或 shared_buffers 后 Postgresql 不会重新启动

> ID：15944341
> 
> 赞同：0
> 
> 时间：2013-04-11T08:45:00.507
> 
> 标签：postgresql, postgresql-9.1

我已经在我的 postgres.config 上测试了 pgtune，所以我知道我可以在那里更改什么，但是当我尝试更改 max_connections 或 shared_buffers 时，我无法重新启动 postgres。我只是收到一个错误，但日志中没有任何内容指定错误。（不确定这些日志的去向，但它们不在常规的 pg_log 目录中。）

我的设置是：

```
shared_buffers = 24MB  # (pgtune wizard 2013-04-11 = 120MB)
max_connections = 120  # (pgtune wizard 2013-04-11 = 200) 
```

我在一个只运行 postgresql 的 512 linode 上。如果我将 shared_buffers 更改为超过 24MB 或将 max_connections 更改为超过 120，我将无法重新启动 postgres。

我正在使用 Ubuntu 12.04.2 LTS 的 Linode xen 实例上运行：

```
Ubuntu 12.04.2 LTS (GNU/Linux 3.8.4-x86_64-linode31 x86_64) 
```

任何人都知道postgres是否可以自行确定我的系统最大24MB和120个连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:25:37.893

听起来您可能超出了共享内存的非常低的默认限制。

这在手册中有所介绍——参见[操作系统资源限制](http://www.postgresql.org/docs/current/static/kernel-resources.html)。对于 Linux，请参阅`kernel.shmmax`。

在旁注中，增加`max_connections`通常是错误的答案。大多数 PostgreSQL 实例在活动连接数量相对较少的情况下工作得最好。通常最好使用*连接池*来排队工作；您将以更低的资源使用获得更好的整体吞吐量。如果您的应用程序没有内置连接池，您可以使用 PgBouncer 作为外部连接池。

# opencv - 使用opencv进行3D相机校准

> ID：15944345
> 
> 赞同：2
> 
> 时间：2013-04-11T08:45:10.557
> 
> 标签：opencv, camera-calibration

我正在使用opencv校准相机，我运行给定的示例项目，我的问题是如何在输入数据中设置公制，例如：

```
 <!-- The size of a square in some user defined metric system (pixel, millimeter)-->
    <Square_Size>(1,10)</Square_Size> 
```

这是否意味着每个像素代表 10um ？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:55:18.070

假设您使用经典棋盘格进行校准，正方形大小是该棋盘中正方形的实际物理大小。例如，如果是 10 厘米，则应放置`<Square_Size>10</Square_Size>`. 或者，您可以用英寸表示并放入`<Square_Size>3.937</Square_Size>`. 这是它所指的单位。OpenCV 使用该大小来创建模型坐标，单位不会影响最终的校准参数。

# ios - 如何在 UIImagePickerController 中禁用捏缩放

> ID：15944346
> 
> 赞同：0
> 
> 时间：2013-04-11T08:45:16.603
> 
> 标签：ios, uiimagepickercontroller, pinch

我使用 UIImagePickerController 在我的 ios 应用程序中拍照。但是我不希望在发生捏合手势时缩放相机视图。我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:02:16.147

尝试添加捕捉触摸的叠加层：

```
 picker = [[UIImagePickerController alloc] init];
   [picker setSourceType:UIImagePickerControllerSourceTypeCamera];
   [picker setCameraOverlayView:overlayView];
   [picker setShowsCameraControls:NO];
   [picker setDelegate:self];
   [self.view addSubview:picker.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T15:51:58.867

您可以简单地禁用选择器视图上的交互。

```
picker.view.userInteractionEnabled = NO; 
```

# php - PHP exec（）不适用于AppServ

> ID：15944347
> 
> 赞同：1
> 
> 时间：2013-04-11T08:45:17.517
> 
> 标签：php, r

我现在面临以下问题。请帮帮我。

我在同一目录中有两个文件：**test.php**和**test.r**

**测试.php**

```
<?php
  exec("Rscript test.r");
?> 
```

**测试.r**

```
d=c(1:10);
write.csv(d, file="test.csv", fileEncoding="utf-8");

q(); 
```

当我通过 chrome 访问**test.php**时，它没有给出**test.csv**。

虽然它在*cmd上运行良好，但在执行* **test.php**`Rscript test.r`时它不起作用。

 **有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:49:25.460

有几件事需要检查：

*   文件权限。将它们设置为`0777`临时以查看它是否有效
*   可能`exec`功能被阻塞了。检查`php.ini`（或`phpinfo()`）[`disabled_functions`](http://php.net/manual/en/ini.core.php#ini.disable-functions)
*   第三个选项 - 是您真正需要考虑的选项 - 脚本中的错误。

调试愉快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:49:33.717

`PHP/IIS`将需要读取/执行您尝试使用`exec()`函数执行的命令的权限。

浏览[exec() 函数](http://php.net/manual/en/function.exec.php)文章的 PHP 文档。

希望，它会解决你的问题。**

# ravendb - 用于 SignalR 的 RavenDbMessageBus

> ID：15944348
> 
> 赞同：0
> 
> 时间：2013-04-11T08:45:23.280
> 
> 标签：ravendb, signalr, web-farm

迟早我需要运行多个 SignalR 主机。我知道 MessageBus 是什么，并且我知道 SQL Server 和 Redis 有一个 MessageBus。为 RavenDB 实现一个看起来是可行的。

问题是：既然应用程序已经使用 RavenDB 来存储数据，那么使用 RavenDB 是否有意义，或者我应该使用 Redis，因为 Redis 比 RavenDB 快得多？（SQL server 不是当前项目的选择）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T15:26:04.873

我终于自己创造了一个。

[https://github.com/esskar/SignalR.RavenDB](https://github.com/esskar/SignalR.RavenDB)

# python - “AttributeError：'NoneType'对象没有属性'get'”在MongoEngine中调用`to_mongo`时

> ID：15944350
> 
> 赞同：2
> 
> 时间：2013-04-11T08:45:32.487
> 
> 标签：python, django, mongodb, mongoengine

[我有以下 Python 代码使用MongoEngine](http://mongoengine.org/)（通过 pip 安装 0.7.9 ）连接到[MongoDB](http://www.mongodb.org/)（通过 MacPorts 安装 2.0.1）数据库：

```
import datetime
from mongoengine import *

connect('mydb')

class Post(EmbeddedDocument):
    title = StringField(required=True)
    description = StringField(required=True)
    author = StringField(required=True)
    pub_date = DateTimeField(required=True, default=datetime.datetime.now)

p = Post()
p.author = "genba"
p.title = "Test post"
p.description = "This is a test post" 
```

`to_mongo`在object 上调用该方法时`p`，我得到以下回溯：

```
env/lib/python2.7/site-packages/mongoengine/base.pyc in to_mongo(self)
   1040         # Only add _cls and _types if allow_inheritance is not False
   1041         if not (hasattr(self, '_meta') and
-> 1042            self._meta.get('allow_inheritance', ALLOW_INHERITANCE) == False):
   1043             data['_cls'] = self._class_name
   1044             data['_types'] = self._superclasses.keys() + [self._class_name]

AttributeError: 'NoneType' object has no attribute 'get' 
```

您可能会注意到，错误是由 MongoEngine 代码中的一行代码产生的，该代码安装在`env`带有[virtualenv](https://pypi.python.org/pypi/virtualenv)的虚拟环境中。

`Post`当我使用 . 将文档嵌入到另一个文档中[`EmbeddedDocumentField`](https://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.EmbeddedDocumentField)时，以及当我只是将以前的代码粘贴到 Python 解释器中时（直到现在，我只是使用[IPython](http://ipython.org/)而不是 vanilla Python 解释器） ，实际上都会出现这个错误。

我已经尝试过调试`pdb`和搜索互联网，但我没有找到关于这个问题的任何有用信息。**我唯一能说的是`self._meta`，`None`这会导致引发异常。**但是为什么会这样`None`或者那应该意味着什么……我不知道。

**为什么我会收到此错误？**它肯定在 MongoEngine 的代码中，但它是由 MongoEngine 还是由我的代码/数据引起的？**我该如何解决？**

提前致谢。

PS：作为附加信息，我计划将它与[Django](https://www.djangoproject.com/)一起使用，但之前的代码可以与 Django 分开运行，并且我已经完成了类似的测试（没有 Django，只使用 IPython，就像我之前提到的那样）。

# ios - Xcode lldb 错误 - 不确定从哪里开始

> ID：15944351
> 
> 赞同：0
> 
> 时间：2013-04-11T08:45:38.700
> 
> 标签：ios, xcode, debugging, exc-bad-access

我一直在开发一个小应用程序，实际上是在润色和调试的最后阶段。

我对`NSUserDefaults`存储做了一些小的改动，这些改动非常小。

但是，每次我尝试在 iPod 上运行应用程序时，我都会收到一个奇怪的 LLDB 错误，没有任何进一步的信息，比如哪个文件、库等...我在 中设置了断点`application:didFinishLoadingWithOptions`，但错误在那之前？？该应用程序卡在启动画面上。

如果有任何帮助，请转储...

```
Thread 1: EXC_BAD_ACCESS (code=2, address=0x2fd77d4c)
0x2fd77d4c:  svchs  #14122336
0x2fd77d50:  svchs  #14122908
0x2fd77d54:  svchs  #14122923
0x2fd77d58:  svchs  #14122954
0x2fd77d5c:  andeq  r0, r0, r0
0x2fd77d60:  rsbvc  r7, r1, #49283072
0x2fd77d64:  rsbvs  r6, pc, #3008
0x2fd77d68:  svchs  #6646889 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:18:12.990

空项目是否适用于您的 iPod？如果答案是肯定的，请注释掉您编写的所有代码，然后逐部分取消注释以查找导致此问题的部分，反之亦然。

当您无法找到问题时，将可疑代码切成碎片总是有效的。

# config - 带有“$msg contains”和“$fromhost-ip startswith”的 rsyslog 配置

> ID：15944352
> 
> 赞同：0
> 
> 时间：2013-04-11T08:45:46.663
> 
> 标签：config, rsyslog

我可以在 rsyslog 配置中同时使用“$msg contains”和“$fromhost-ip startswith”这两个语句吗？

当我将以下内容用于 rsyslog 配置时，它可以工作！

```
if $msg contains 'src_port=6699' then -?DynFileA
& ~
if $fromhost-ip startswith '10.10.10.1' then -?DynFileB
& ~ 
```

但是当我将它们结合起来时，它失败了！

```
if $fromhost-ip startswith '10.10.10.1' and $msg !contains 'src_port=6699' then -?DynFileA
& ~ 
```

我从互联网上搜索了很多文章，尤其是 rsyslog 办公文档，但没有找到任何有用的建议！

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T14:31:24.543

嗯……你确定你的替代品吗？乍一看，如果您的主机 IP 是 10.10.10.1，您将应用 -?DynFileA 而不是 -?DynFileB。你的第一个例子有两个不同的操作......（不知道它是什么）

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-22T07:35:51.627

我现在只想使用完整的 rsyslog Reiner 脚本，您的第一个示例是**or**，而不是带有两个不同动态文件模板的**and**，如果这是您想要的，只需将**and**下面替换为**or**

```
if ($fromhost-ip startswith '10.10.10.1') and ($msg !contains 'src_port=6699') then {
    -?DynFileA
    stop
    } 
```

# php - 如何在 PHPUnit 中引导 CakePHP 1.3

> ID：15944353
> 
> 赞同：0
> 
> 时间：2013-04-11T08:45:47.127
> 
> 标签：php, cakephp, phpunit, cakephp-1.3

我目前正在使用一个遗留的 CakePHP 1.3 应用程序，并且想开始添加测试。

虽然我知道 CakePHP 有自己的测试类，在 1.3x 中使用 SimpleTest，但由于现有经验，我们更愿意在整个过程中使用 PHPUnit。

我的问题基本上是，这可能吗？如果是这样，我如何在测试套件中引导 CakePHP 框架，以便测试可以访问模型/控制器等。

# html - 用户代理样式表覆盖 - 段落文本

> ID：15944355
> 
> 赞同：0
> 
> 时间：2013-04-11T08:45:54.423
> 
> 标签：html, css, text, user-agent

我有一些段落文本，如下所示，但是在 chrome 中，它不断在左侧添加 1em 边距。这是我的代码：

```
.bold { font-family: Verdana, Arial, Helvetica, sans-serif; color:#333337; font-weight:bold; margin:0px; -webkit-margin: 0px!important;} 
```

这是定义文本的 HTML。

```
<p class="bold">Account Name</p> 
```

与往常一样，提前感谢您的帮助。

编辑：这是执行覆盖的用户代理样式表

```
p {
display: block;
-webkit-margin-before: 1em;
-webkit-margin-after: 1em;
-webkit-margin-start: 0px;
-webkit-margin-end: 0px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:50:28.150

您应该使用一些[CSS reset](http://meyerweb.com/eric/tools/css/reset/)。

在您的具体情况下，这应该会有所帮助：

```
p {
  margin: 0;
} 
```

# java - LWUIT 按钮按下并释放

> ID：15944359
> 
> 赞同：0
> 
> 时间：2013-04-11T08:45:58.883
> 
> 标签：java, java-me, lwuit, lwuit-button

如何在 LWUIT 中检测表单上的按钮被按住，以及如何检测该按钮被释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:50:23.983

按钮具有pressed() 和released() 方法，您可以覆盖它们以检测长按。要检测短按，只需在按钮上使用 addActionListener()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:04:25.507

Yoo 在 Lwiit 函数中有表单和按钮，这些函数负责处理这些操作。

keyPressed(int keyCode)- 键盘按下

keyReleased(int keyCode) - 键盘释放

pointerPressed(int x, int y) - 触摸按下

ublic void pointerReleased(int x, int y) - 触摸释放

# ios - Ios Google 地图完成滚动的委托方法是什么？

> ID：15944361
> 
> 赞同：5
> 
> 时间：2013-04-11T08:46:02.500
> 
> 标签：ios, ios5, google-maps-sdk-ios

在 Apple 地图中有一个委托方法

```
-(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated 
```

并在我结束滚动或平移地图时触发，但我找不到谷歌地图的这种方法。有一种方法

```
- (void)mapView:(GMSMapView *)mapView didChangeCameraPosition:(GMSCameraPosition *)position 
```

但是当地图仍在滚动时，此方法会继续触发，我不希望这样。只有在滚动完成时，我才需要更改属性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-27T12:50:31.100

最新的 SDK 版本 1.4.0 - 2013 年 7 月添加了新的委托方法

```
- (void)mapView:(GMSMapView *)mapView idleAtCameraPosition:(GMSCameraPosition *)position 
```

将在任何相机移动或滚动动作结束时触发

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:33:34.457

有一个功能请求添加如下内容：

[https://code.google.com/p/gmaps-api-issues/issues/detail?id=4722](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4722)

与此同时，您也许可以通过使用常规计时器来解决它，该计时器检查地图位置自上次调用计时器以来是否发生了变化。如果不是，则用户已停止移动地图，因此您可以更新您的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T11:54:28.983

当心 idleAtCameraPosition 是地图停止移动时而不是当您抬起手指时。

从 Google sdk iOS 1.7 开始，我注意到即使您的手指还在地图上，它也会提前触发。

因此，如果您使用它来重绘覆盖/标记，它可能会发生得太早并导致口吃。

我必须继承 GSMapView 并添加 PanGestureRecognizer >> State ENDED 才能在手指抬起时得到。

见 [https://github.com/clearbrian/GoogleMapiOS_TapEndedGesture](https://github.com/clearbrian/GoogleMapiOS_TapEndedGesture)

# response - Squid radius 身份验证“RADIUS 服务器没有响应”

> ID：15944362
> 
> 赞同：0
> 
> 时间：2013-04-11T08:46:03.347
> 
> 标签：response, squid, radius

我已经用mysql成功配置了freeradius。我可以使用命令进行 radtest：

```
sudo radtest alice password 192.168.2.3 1812 testing123
Sending Access-Request of id 187 to 192.168.2.3 port 1812
    User-Name = "alice"
    User-Password = "password"
    NAS-IP-Address = 127.0.1.1
    NAS-Port = 1812
    Message-Authenticator = 0x00000000000000000000000000000000

rad_recv: Access-Accept packet from host 192.168.2.3 port 1812, id=187, length=20 
```

现在我尝试使用半径身份验证的鱿鱼。

我一步一步地从：

[http://safesrv.net/setup-squid-and-freeradius-on-centos-5/#comment-1043](http://safesrv.net/setup-squid-and-freeradius-on-centos-5/#comment-1043)

但我在 cache.log 上收到错误消息日志

```
Warning: Received invalid reply digest from server
Warning: Received invalid reply digest from server
Warning: Received invalid reply digest from server
squid_rad_auth: No response from RADIUS server 
```

在 radius -X 调试中出现如下错误消息：

```
Sending duplicate reply to client localprivate port 42003 – ID: 2
Sending Access-Reject of id 2 to 192.168.2.3 port 42003
Waking up in 2.9 seconds.
rad_recv: Access-Request packet from host 192.168.2.3 port 42003, id=2, length=63
Sending duplicate reply to client localprivate port 42003 – ID: 2
Sending Access-Reject of id 2 to 192.168.2.3 port 42003
Waking up in 0.9 seconds.
Found Auth-Type = PAP
# Executing group from file /usr/local/etc/raddb/sites-enabled/default
+- entering group PAP {…}
[pap] login attempt with password “b9?I? +�(�Ч�Y�?”
[pap] Using clear text password “password”
[pap] Passwords don’t match
++[pap] returns reject
Failed to authenticate the user.
WARNING: Unprintable characters in the password. Double-check the shared secret on the server and the NAS!
Using Post-Auth-Type REJECT 
```

那是什么错误？我怎么能解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T12:47:30.637

窥探您生成的 Accessreq 并尝试使用您与 wireshark 的共享密钥来解码加密的密码。看起来您的测试客户端没有正确编码密码。确保在服务器端正确配置了 testing123。

# java - 如何在android中解析来自.NET Web服务soap对象的XML数据？

> ID：15944364
> 
> 赞同：1
> 
> 时间：2013-04-11T08:46:06.673
> 
> 标签：java, .net, web-services, xml-parsing, android-ksoap2

我是 xml 概念的新手。我从 .net 网络服务接收数据。作为结果，此 Web 服务返回数据集。我使用肥皂对象接收此数据集结果。它以 XML 格式返回。我无法从返回的结果中检索数据。

**Web 服务的输出如下所示：**

```
 GETRESULTSResponse{GETRESULTSResult=anyType{Users=anyType{Table1=anyType{StudentID=713; RegisterNumber=2913402; StudentName=KARTHIK M; Gender=Male; CourseID=6; BranchID=27; BatchID=18; RollNumber=10SLEC603; }; }; }; } 
```

我想获取每个元素数据。我不知道如何解析它。请帮帮我。

**这是我的代码片段：**

```
SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE, METHOD_NAME1);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
PropertyInfo pi = new PropertyInfo();
pi.setName("strSQL");
pi.setValue(ConstantValues.STUDENT_DETAILS);
pi.setType(ArrayList.class);
request.addProperty(pi);
envelope.setOutputSoapObject(request);

HttpTransportSE httpTransportSE = new HttpTransportSE(SOAP_ADDRESS);
SoapObject response = null;

httpTransportSE.call(SOAP_ACTION1, envelope);
response = (SoapObject)envelope.bodyIn;

String xml = response.toString();
Document doc = XMLfunctions.XMLfromString(xml);
int numResults = XMLfunctions.numResults(doc);

if(totalCount > 0){
   NodeList nodes = doc.getElementsByTagName("Table1");
   for (int i = 0; i < nodes.getLength(); i++) {
  Element e = (Element)nodes.item(i);
  String studentId =  XMLfunctions.getValue(e, "StudentID");
  String regNo =  XMLfunctions.getValue(e, "RegisterNumber");
  String stuName =  XMLfunctions.getValue(e, "StudentName");
  String gender = XMLfunctions.getValue(e, "Gender");
   }
} 
```

我尝试使用此代码解析数据。但我无法解析它。请为我提供简单的方法来解析我从.Net webservice 数据集获得的soap 对象响应中的xml 数据。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T09:48:12.290

最后我找到了解决方案。

```
 SoapObject request = new SoapObject(ConstantValues.WSDL_TARGET_NAMESPACE, ConstantValues.METHOD_NAME1);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        PropertyInfo pi = new PropertyInfo();
        pi.setName("strSQL");
        pi.setValue(ConstantValues.STUDENT_DETAILS);
        //pi.setType(ArrayList.class);
        request.addProperty(pi);
        envelope.setOutputSoapObject(request);

        HttpTransportSE httpTransportSE = new HttpTransportSE(ConstantValues.SOAP_ADDRESS);
        SoapObject response = null;
        httpTransportSE.debug=true; 
        httpTransportSE.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");

        httpTransportSE.call(ConstantValues.SOAP_ACTION1, envelope);
        response = (SoapObject)envelope.bodyIn;
        int totalCount = response.getPropertyCount();

        String resultString=httpTransportSE.responseDump;
        Log.d("XML data ",resultString);

        Document doc = XMLfunctions.XMLfromString(resultString);

        //int numResults = XMLfunctions.numResults(doc);

        System.out.println(totalCount);
        if(totalCount > 0){
            NodeList nodes = doc.getElementsByTagName("Table1");
            for (int i = 0; i < nodes.getLength(); i++) {
                studentData = new StudentDetailsData();
                Element e = (Element)nodes.item(i);

                studentData.setStudentId(Integer.parseInt(XMLfunctions.getValue(e, "StudentID")));
                studentData.setRegisterNo(XMLfunctions.getValue(e, "RegisterNumber"));
                studentData.setStudentName(XMLfunctions.getValue(e, "StudentName"));
                studentData.setGender(XMLfunctions.getValue(e, "Gender"));
                studentData.setCourseId(Integer.parseInt(XMLfunctions.getValue(e, "CourseID")));
                studentData.setBranchId(Integer.parseInt(XMLfunctions.getValue(e, "BranchID")));
                studentData.setBatchId(Integer.parseInt(XMLfunctions.getValue(e, "BatchID")));
                studentData.setRollNo(XMLfunctions.getValue(e, "RollNumber"));
                studentData.setSection(XMLfunctions.getValue(e, "Section"));

                result.add(studentData);

            }
        } 
```

我希望它对某些人有用。谢谢你。

# iphone - 播放 Rdio.com 歌曲流

> ID：15944376
> 
> 赞同：1
> 
> 时间：2013-04-11T08:46:45.387
> 
> 标签：iphone, api, rdio

我正在尝试为 iOS 应用程序实现在线音乐搜索和示例流媒体功能：用户可能能够按歌曲名称/艺术家/专辑搜索音乐并复制它们。我发现 Rdio.com 看起来很有希望，但是，无法找到解决此问题的方法。

流 api 需要一个密钥，例如

`[rdio.player playSource:@"t2742133"];`

但是我很难追踪如何获取`"t2742133"`给定歌曲的密钥，因为似乎没有记录的方法可以根据歌曲名称获取歌曲元数据。任何有 Rdio.com 经验的人都可以判断是否有一种（相对）直接的方法可以通过歌曲名称获取歌曲信息，主要步骤是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:20:19.220

找不到 iOS sdk 的直接方法，但出于搜索目的，有一个 REST api。-

[http://developer.rdio.com/docs/REST/](http://developer.rdio.com/docs/REST/)

响应包括可以传递给 iOS api 流方法的轨道 ID。

# ios - 当 RKObjectManager 无法发布对象时如何丢弃一个对象中的 CoreData 更改

> ID：15944379
> 
> 赞同：15
> 
> 时间：2013-04-11T08:46:53.830
> 
> 标签：ios, objective-c, core-data, restkit

当该对象的 POST/PUT 请求在 RKObjectManager 中失败时，如何丢弃对 NSManagedObject 实例所做的 CoreData 更改？

```
NSManagedObject *object = ...;
[object setValue:@"test" forKey: @"test"];
[[RKObjectManager sharedManager] postObject:object 
                                 parameters:nil 
                                    success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) { NSLog(@"success, nothing to do"); }
                                    failure:^(RKObjectRequestOperation *operation, NSError *error) { 
  // I want to discard changes made to object here 
} 
```

**更新**：RestKit 0.20

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-11T09:30:58.390

我对此一无所知`RKObjectManager`，但为了放弃对 NSManagedObject 实例的更改，您可以调用：

`[object.managedObjectContext refreshObject:object mergeChanges:NO]`

这将丢弃所有更改并将对象变为故障。

[看这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-13T19:44:27.400

**快速**解决方案：

```
import CoreData

extension NSManagedObject {
    func cancelChanges() {
        managedObjectContext?.refresh(self, mergeChanges: false)
    }
} 
```

使用：

```
object.cancelChanges() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-25T01:06:39.603

另一种解决方案是自己刷新值。

`NSManagedObjectContext`如果您对一个对象有多个引用，尤其是另一个类正在对属性执行 KVO 时，来自 的 refresh 方法可能会导致问题。刷新后，您将获得有故障的对象（所有属性均为 nil）但处于损坏状态，`_cd_rawData but the object is not being turned into a fault`当您尝试访问任何属性时会收到错误消息。

如果您不想使用单独的上下文和，这里是替代方法`NSUndoManager`：

```
extension NSManagedObject {
    func revertToCommitedValues() {
        changedValues().keys.forEach { (key) in
            if let persistentValue = committedValues(forKeys: [key])[key] {
                if persistentValue is NSNull {
                    setValue(nil, forKey: key)
                }
                else {
                    setValue(persistentValue, forKey: key)
                }
            }
        }
    }
} 
```

**请注意，`NSManagedObject`'`changedValues`方法不反映关系内部的变化，因此如果您想要“深度重置”，则必须在每个关系上调用该方法**

当然，您可以在此方法的基础上仅刷新某些属性。

# flex-lexer - Flex 使用常量容器

> ID：15944387
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:47:27.430
> 
> 标签：flex-lexer

我必须用 flex 编写一个编译器。

但我不喜欢给定的代码，想要做我自己。

lexfile.l:

```
{%
    typedef enum { EQ=0, NE, PLUS, MINUS, SEMICOLON } punctuationType;
    typedef enum { PRINT=100, WHILE, IDENT } keywordType;
%}

%%
    "!="                            {   return NEQ; }
    "="                             {   return EQ; }
    "+"                             {   return PLUS; }
    "-"                             {   return MINUS; }
    ";"                             {   return SEMICOLON; }

%% 
```

有更好的解决方案吗？

我已经搜索了一个解决方案，但另一个解决方案是定义常量。

```
#define EQ 0
#define NE 1
... 
```

输出示例：

```
 Operator  EQ
 Operator  NE 
```

问题只是，如果有更好的类型而不是 Enum

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:52:36.837

无论您返回什么，编译器都必须理解。如果您正在使用`yacc,`，您将没有选择：您必须遵守`%token`为您定义的任何生成，因为`y.tab.h.:`您根本不需要做任何事情。

另一方面，`flex`对于单字符特殊字符，不需要名称或规则：您可以只为所有这些字符返回并在文件`yytext[0]`中使用相应的文字。`.y`

您确实没有提供足够的详细信息以供进一步评论。

# c# - System.Text.Encoding 由于其保护级别而无法访问

> ID：15944390
> 
> 赞同：1
> 
> 时间：2013-04-11T08:47:31.450
> 
> 标签：c#, encoding, visual-studio-lightswitch, lightswitch-2012

我正在尝试在 Lightswitch 应用程序中反序列化和序列化 JSON，并且在该过程中我需要使用编码。问题是构建后我收到此错误：

> 'System.Text.Encoding.GetString(byte[])' 由于其保护级别而无法访问

`[Serializable]` 并且在标签构建后也会出现此错误

问题是为什么？引用`System.Text`已经存在并且使用命名空间也......

# perl - 根据最后一列中的值删除冗余行

> ID：15944392
> 
> 赞同：1
> 
> 时间：2013-04-11T08:47:39.723
> 
> 标签：perl, shell, awk

我正在尝试从制表符分隔文件中删除冗余数据，如下所示

```
chr1    1841    1851    4
chr1    1991    2001    3
chr1    2491    2501    2
chr1    2491    2501    2
chr1    2501    2511    1
chr1    2681    2691    3
chr1    2881    2891    4
chr1    2891    2901    1
chr1    3241    3251    1
chr1    3241    3251    6 
```

条件是：如果前三列相同，则应使用第四列（最大值）中的值来获取前三列和第四列。如果出现平局，则仅应打印 4 列中的值一次。

所以对于上述输入，理想的输出应该是

```
chr1    1841    1851    4
chr1    1991    2001    3
chr1    2491    2501    2
chr1    2501    2511    1
chr1    2681    2691    3
chr1    2881    2891    4
chr1    2891    2901    1
chr1    3241    3251    6 
```

我是如何接近的：

先对文件进行排序，然后我把它弄乱了

```
sort file | awk -F '\t' 'NR==1{last = $1; max = 0} {if (last != $1) {printf "%s\t%e\n", last, max; last = $1; max = $4} else if (max < $4) max = $4} END{printf "%s\t%e\n", last, max}' 
```

请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:09:18.137

```
$ sort -k1 -k2,3n -k4nr file | awk '!a[$1,$2,$3]++'
chr1    1841    1851    4
chr1    1991    2001    3
chr1    2491    2501    2
chr1    2501    2511    1
chr1    2681    2691    3
chr1    2881    2891    4
chr1    2891    2901    1
chr1    3241    3251    6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:17:50.993

这个单行应该给出输出：

```
awk -F'\t' -v OFS="\t" '{t=$1FS$2FS$3;if(!(t in a)||a[t]<$4)a[t]=$4}END{for(x in a) print x,a[x]}' file|sort 
```

清晰的格式：

```
 awk -F'\t' -v OFS="\t" '{
    t=$1FS$2FS$3
    if(!(t in a)||a[t]<$4)
        a[t]=$4
 }
 END{for(x in a) print x,a[x]}' file|sort 
```

如果您使用数据文件运行：

```
kent$  cat file
chr1    1841    1851    4
chr1    1991    2001    3
chr1    2491    2501    2
chr1    2491    2501    2
chr1    2501    2511    1
chr1    2681    2691    3
chr1    2881    2891    4
chr1    2891    2901    1
chr1    3241    3251    1
chr1    3241    3251    6

kent$  awk -F'\t' -v OFS="\t" '{t=$1FS$2FS$3;if(!(t in a)||a[t]<$4)a[t]=$4}END{for(x in a) print x,a[x]}' file|sort
chr1    1841    1851    4
chr1    1991    2001    3
chr1    2491    2501    2
chr1    2501    2511    1
chr1    2681    2691    3
chr1    2881    2891    4
chr1    2891    2901    1
chr1    3241    3251    6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:53:35.317

```
sort -k 1,3 -k 4r file | awk 'last != $1" "$2" "$3 { print; last = $1" "$2" "$3; }' 
```

我的输出：

```
chr1    1841    1851    4
chr1    1991    2001    3
chr1    2491    2501    2
chr1    2501    2511    1
chr1    2681    2691    3
chr1    2881    2891    4
chr1    2891    2901    1
chr1    3241    3251    6 
```

[http://ideone.com/nH6boE](http://ideone.com/nH6boE)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T09:07:59.747

您可以通过使用前三列作为哈希的键来做到这一点，并且只记住具有最大的那一个`$4`：

```
<infile awk '
  BEGIN { FS = OFS = "\t" }

  $4 > h[$1,$2,$3] { h[$1,$2,$3] = $4 }

  END { 
    for(k in h) { 
      split(k, a, SUBSEP)
      print a[1], a[2], a[3], h[k]
    }
  }
' | sort -k1 -k2n,3n 
```

输出：

```
chr1    1841    1851    4
chr1    1991    2001    3
chr1    2491    2501    2
chr1    2501    2511    1
chr1    2681    2691    3
chr1    2881    2891    4
chr1    2891    2901    1
chr1    3241    3251    6 
```

如果您使用的是 GNU awk，您还可以在 awk 中进行排序：

*解析.awk*

```
BEGIN { FS = OFS = "\t" }

$4 > h[$1,$2,$3] { h[$1,$2,$3] = $4 }

END { 
  len = asorti(h, d)
  for(i=1; i<=len; i++) {
    flen = split(d[i], a, SUBSEP)
    for(j=1; j<=flen; j++)
      printf "%s%s", a[j], OFS
    print h[d[i]]
  }
} 
```

并像这样运行它：

```
awk -f parse.awk infile 
```

# ruby-on-rails-3 - RoR- 检查输入是否是 MD5 哈希？

> ID：15944394
> 
> 赞同：0
> 
> 时间：2013-04-11T08:47:46.263
> 
> 标签：ruby-on-rails-3, md5

如何在 Rails3.0 中检查输入字符串是否为 Md5 哈希形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:55:37.537

将所有 32 位长十六进制数字（即仅由字母 af 和数字 0-9 组成）视为 md5 哈希。

我不知道 md5 的 codomain 是否是 32 位长十六进制的整个空间，但理想情况下，哈希应该满足条件，所以你可以假设它是。

# ruby - 请解释一下 %w 是什么意思

> ID：15944395
> 
> 赞同：0
> 
> 时间：2013-04-11T08:47:47.937
> 
> 标签：ruby

我不明白“%W”——这是什么意思？

```
string[index].capitalize! unless %w(the and over).include?(string[index]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:53:15.073

`%w`根据其中的单词创建一个数组（空格分隔）。

所以

```
%w(the and over) 
```

会变成

```
["the", "and", "over"] 
```

这是ruby中常用的方法。

因此，字符串的一部分将大写，除非该部分是“the”、“and”或“over”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:51:10.160

检查[`%Q, %q, %W, %w, %x, %r, %s`](http://simpleror.wordpress.com/2009/03/15/q-q-w-w-x-r-s/)。

这会对你有很大帮助。

# java - 如何为 NFA 制作状态转换表？

> ID：15944406
> 
> 赞同：0
> 
> 时间：2013-04-11T08:48:22.453
> 
> 标签：java, data-structures

我已经使用二维数组为 DFA 创建了转换表。例如，要存储 10 个状态和两个转换。

```
transition = new int[10][2]; 
```

但是，对于 NFA，我们有许多可能的过渡。下面的例子，当值 0 到来时，你可以去 S2 或 S3。所以，我不知道我应该使用哪种 Java 结构。

我正在尝试为 NFA 创建一天的表格，但我所做的所有方式都非常复杂。例如使用、Hashtable、Set等。

您能否分享一个代码示例或任何想法？

![NFA 表](https://i.stack.imgur.com/VGW1C.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:25:36.813

为每个状态使用一个位集，并`|`为每个转换使用按位或。例如，S1 = 001、S2 = 010 和 S3 = 100。现在 S2 | S3 = 110，因此您的 {S2, S3} 转换为 110。如果用 int 表示，则最多允许 32 个状态；如果用 long 表示，则最多允许 64 个状态；对于更多状态（或更易于使用的按位运算），请使用[BitSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html)。

顺便说一句，任何 NFA 都可以转换为 DFA，请参阅[http://www.cs.odu.edu/~toida/nerzic/390teched/regular/fa/nfa-2-dfa.html](http://www.cs.odu.edu/~toida/nerzic/390teched/regular/fa/nfa-2-dfa.html)的教程，这样可以是另一种选择，具体取决于您在这里尝试做什么。

# c# - 触发（调用）方法，当滚动查看器滚动到其末尾时

> ID：15944410
> 
> 赞同：0
> 
> 时间：2013-04-11T08:48:38.653
> 
> 标签：c#, windows-phone-7, pagination, scrollviewer

在google了很多之后，最后我要问你们这个问题。
我创建了`scrollviewer`，其中包含 items( `listboxItems`) 和这些从`webservices`. 但一次只能取出 5 件物品。所以最初它将是 5 个项目，然后是下一个 5（附加到`scrollviewer`），然后是下一个 5，依此类推......

注意：-here`listBoxitems`是在 内部使用`scrollviewer`，而不是列表框

**从中获取的数据** `webservice` **还包含**--->

```
total items
numResults (current number of items fetched) 
```

现在假设我获取数据的方法是--->

```
getData(int nextResult)
{
      // some code to fetch the data
} 
```

nextResult 是下一个项目编号（例如：- nextResult 是 6，如果请求第二次）

但我无法编写**代码来检测用户将滚动查看器滚动到最后，然后调用或触发一个方法，不管怎么说！**

我对滚动查看器的、、、等感到非常困惑，`VerticalOffset`即将使用它们并计算所需的信息以实现上述要求。`ExtentHeight``ViewportHeight``ScrollableHeight`

因此，如果有人知道相同或曾经使用过scrollviwer，请发布答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:30:19.447

我通过使用适当的事件注册新的 DependencyProperty ListVerticalOffset 来实现它：

```
 // Constructor
    public MainPage()
    {
        InitializeComponent();

        ListVerticalOffsetProperty = DependencyProperty.Register("ListVerticalOffset", typeof(double), typeof(MainPage), new PropertyMetadata(OnListVerticalOffsetChanged));

        YourScrollViewer.Loaded += YourScrollViewer_Loaded;
    }

    void YourScrollViewer_Loaded(object sender, RoutedEventArgs e)
    {
        var binding = new Binding
            {
                Source = YourScrollViewer,
                Path = new PropertyPath("VerticalOffset"),
                Mode = BindingMode.OneWay
            };
        SetBinding(ListVerticalOffsetProperty, binding);
    }

    private void OnListVerticalOffsetChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var atBottom = YourScrollViewer.VerticalOffset >= YourScrollViewer.ScrollableHeight;
        if (atBottom) MessageBox.Show("End");
    }

    public readonly DependencyProperty ListVerticalOffsetProperty;

    public double ListVerticalOffset
    {
        get { return (double)GetValue(ListVerticalOffsetProperty); }
        set { SetValue(ListVerticalOffsetProperty, value); }
    } 
```

可能是这个解决方案或者它的实现不是最优的，但它对我有用。

# html - SVG动画翻译

> ID：15944416
> 
> 赞同：2
> 
> 时间：2013-04-11T08:48:49.590
> 
> 标签：html, svg

我尝试使用 SVG 制作下一个和上一个按钮

有正方形和三角形。当你看到正方形时，如果你点击下一步，它应该变成三角形。当你看到三角形时，如果你点击上一个，它应该变回方形。

如果我点击下一个然后上一个，它工作得很好。但是当我尝试再次单击下一步时。它不起作用。

这是我的 SVG 代码

```
<!DOCTYPE HTML>
<html>
<body>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="300" height="300">
  <text id="previous" x="50" y="250" font-family="Verdana" font-size="30" fill="blue" >
    Prev
  </text>
  <text id="next" x="200" y="250" font-family="Verdana" font-size="30" fill="blue" >
    Next
  </text>
  <g>
  <path id="triangle" d="M450 0 L375 200 L525 200 Z" 
        stroke="#000000" stroke-width="3" 
        fill="white">
        <animateColor attributeName="fill" 
                    to="rgb(0,255,0)" begin="mouseover" dur="1s" 
                    additive="sum" fill="freeze"/>
        <animateColor attributeName="fill" 
                    to="rgb(255,255,255)" begin="mouseout" dur="1s" 
                    additive="sum" fill="freeze"/>  

  </path>
  <path id="square" d="M75 0 L225 0 L225 200 L75 200 Z" 
        stroke="#000000" stroke-width="3" 
        fill="white">
        <animateColor attributeName="fill" 
                    to="rgb(255,0,0)" begin="mouseover" dur="1s" 
                    additive="sum" fill="freeze"/>
        <animateColor attributeName="fill" 
                    to="rgb(255,255,255)" begin="mouseout" dur="1s" 
                    additive="sum" fill="freeze"/>

  </path>
  <animateTransform attributeName="transform" attributeType="XML"
                    type="translate" by="-300,0" begin="next.click" dur="1s"
                    keyTimes="0; 1" calcMode="spline" keySplines=".5 0 .5 1"
                    additive="sum" accumulate="sum" fill="freeze"/>
  <animateTransform attributeName="transform" attributeType="XML"
                    type="translate" by="300,0" begin="previous.click" dur="1s"
                    keyTimes="0; 1" calcMode="spline" keySplines=".5 0 .5 1"
                    additive="sum" accumulate="sum" fill="freeze"/>
</g>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:57:53.720

这为我修复了它。请注意，您应该避免使用 animateColor 并改用 animate，因为在 SVG 规范中不推荐使用 animateColor。

```
<!DOCTYPE HTML>
<html>
<body>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1"
     width="300" height="300">
  <text id="previous" x="50" y="250" font-family="Verdana" font-size="30" fill="blue" >
    Prev
  </text>
  <text id="next" x="200" y="250" font-family="Verdana" font-size="30" fill="blue" >
    Next
  </text>
  <g>
  <path id="triangle" d="M450 0 L375 200 L525 200 Z" 
        stroke="#000000" stroke-width="3" 
        fill="white">
        <animate attributeName="fill" 
                    to="rgb(0,255,0)" begin="mouseover" dur="1s" 
                    additive="sum" fill="freeze"/>
        <animate attributeName="fill" 
                    to="rgb(255,255,255)" begin="mouseout" dur="1s" 
                    additive="sum" fill="freeze"/>  

  </path>
  <path id="square" d="M75 0 L225 0 L225 200 L75 200 Z" 
        stroke="#000000" stroke-width="3" 
        fill="white">
        <animate attributeName="fill" 
                    to="rgb(255,0,0)" begin="mouseover" dur="1s" 
                    additive="sum" fill="freeze"/>
        <animate attributeName="fill" 
                    to="rgb(255,255,255)" begin="mouseout" dur="1s" 
                    additive="sum" fill="freeze"/>

  </path>

  <animateTransform attributeName="transform" attributeType="XML"
                    type="translate" from="0,0" by="-300,0" begin="next.click" dur="1s"
                    keyTimes="0; 1" calcMode="spline" keySplines=".5 0 .5 1"
                    fill="freeze"/>
  <animateTransform attributeName="transform" attributeType="XML"
                    type="translate" from="-300,0" by="300,0" begin="previous.click" dur="1s"
                    keyTimes="0; 1" calcMode="spline" keySplines=".5 0 .5 1"
                    fill="freeze"/>
</g>

</body>
</html> 
```

# css - Bootstrap - 嵌套最佳实践 - 行和跨度

> ID：15944422
> 
> 赞同：2
> 
> 时间：2013-04-11T08:49:06.543
> 
> 标签：css, twitter-bootstrap, row, nested

**使用嵌套的最佳方法是什么。**

行内的多个跨度 -*动态内容*：

*   每 12 列 1 行 ?
*   或者，一行任意数量的列？

**示例案例 n°1** - 哪一个是最好的？为什么？：

```
<div class="row">
    <span class="span6"></span>
    <span class="span6"></span>
    <span class="span6"></span>
    <span class="span6"></span>
</div> 
```

**或者**

```
<div class="row">
    <div class="span6"></div>
    <div class="span6"></div>
</div>
<div class="row">
    <div class="span6"></div>
    <div class="span6"></div>
</div> 
```

* * *

**示例案例 n°2** - 组织内容的更多级别。

在这里，使用 div "my_margin" 在左右添加一些边距 - 你必须在它周围有 "first_row"。

**所以它是：** row-->span10,offset1-->row-->SPANS

```
<div id="first_row" class="row">
    <div id="my_margin" class="span10 offset1">
        <div class="row">
            <div class="span6"></div>
            <div class="span6"></div>
            <div class="span6"></div>
            <div class="span6"></div>
        </div>
    </div>
</div> 
```

**或者，**

**您不应该使用 span10,offset1 而是使用直接边距；**

在这种情况下，您必须为每个 @Media_size 创建规则以使其具有响应性。

```
<div style="margin-right:XYpx; margin-left:XYpx" class="row">
    <div class="span6"></div>
    <div class="span6"></div>
    <div class="span6"></div>
    <div class="span6"></div>
</div> 
```

**或者 - Spans '应该'用于您的主要内容，然后您只需使用 css。所以，类似的东西：**

```
<div row>
    <div class="span6">
        http://jsfiddle.net/JkPhw/
    <div class="span6">
    <div class="span6">
        http://jsfiddle.net/JkPhw/
    <div class="span6">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:28:40.633

**案例 n°1：**

这取决于，例如，如果您有一个包含九个预告片的列表，其中三个预告片填满一行，我会用一行来完成：

```
<ul class="row">
    <li class="span4"></li>
    <li class="span4"></li>
    <li class="span4"></li>
    <!-- six more -->
</ul> 
```

如果您使用网格来布局表单，我会为每个标签输入对创建一行：

```
<!-- one label-input pair does not fill the whole content width -->
<form>
    <div class="row">
        <label class="span3"></label>
        <input class="span5" />
    </div>
    <div class="row">
        <label class="span3"></label>
        <input class="span5" />
    </div>
    <!-- and so on -->
</form> 
```

我认为你不应该制作一个网格并将你的内容放在不同的网格单元格中来布局它，而是构建语义正确的标记并应用网格来布局内容（微小的差异）。

PS：记住[盒子大小](http://quirksmode.org/css/user-interface/boxsizing.html)。

**到 n°2：**

我不太明白那里的想法，如果您使用的是网格，则不应对其应用左/右边距。网格取决于其水平边距才能正常工作......如果您必须更改它以使您的前端与设计相匹配，它可能不再在网格中。

更新：如果您的内容较小，我肯定会使用您的第一个示例。但使用正确的网格跨度宽度：

```
<article class="row">
    <header class="span12"></header>
    <div class="span10 offset1">
        <div class="row">
            <div class="span5"></div>
            <div class="span5"></div>
        </div>
    </div>
</article> 
```

# qlikview - 将 QlikView 与 Abinitio 和 UC4 连接

> ID：15944434
> 
> 赞同：0
> 
> 时间：2013-04-11T08:50:21.540
> 
> 标签：qlikview, ab-initio

如何最有效地将 AbInitio 与 QLikView 和 UC4 连接？我熟悉 QVX 选项。是什么是这两个系统之间的接口。（用德语描述会更好，但用英语也是）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:41:59.163

我不熟悉连接这个系统。但是，如果他们有适当的 api，您可以尝试编写一个 qvsource ( [http://www.qvsource.com/](http://www.qvsource.com/) ) 连接器，这将使系统之间的连接成为一个 qv。

问候！斯特凡

# log4j - log4j 在 solaris 10 上不起作用

> ID：15944436
> 
> 赞同：0
> 
> 时间：2013-04-11T08:50:34.757
> 
> 标签：log4j, weblogic, solaris, soa

我正在创建一个**SOA**应用程序，我在其中配置了**log4j**。**我在windows**上部署了应用程序，然后 log4j 工作正常，日志文件正在指定文件上创建，日志正在控制台上打印。**但是当我在Solaris**上部署相同的应用程序时，既没有生成日志文件，也没有在控制台上生成日志。而且我没有收到任何警告或错误。我将 log4j.properties 文件放在类路径中。

自过去三天以来，我一直陷入这个问题，但没有得到任何解决方案。

我正在使用以下配置

1) **log4j-1.2.17.jar** 2) **weblogic 10.3.6.0**

您的帮助将非常有帮助。

感谢 Ankur 耆那教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:36:13.137

转到管理控制台并检查有关日志的服务器设置：

![在此处输入图像描述](https://i.stack.imgur.com/1tiOS.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:52:23.127

感谢克里斯的回复，

我的问题已经解决，我犯了一个小错误。

我已将 log4j.jar 放入 weblogic 域库和应用程序库中。当我从 weblogic 域库中删除 jar 并重新启动服务器时。日志文件已生成。

感谢 Ankur 耆那教

# python - Scrapy如何在抓取所有页面后运行功能

> ID：15944440
> 
> 赞同：1
> 
> 时间：2013-04-11T08:50:46.290
> 
> 标签：python, xml, scrapy, pipeline

因为我想格式化下面的 XML 输出，所以我在 Pipelines 上的代码：

```
class TutorialPipeline(object):

    def __init__(self):
        self.file = open('outs.xml', 'a')
        self.file.write('<?xml version=\'1.0\' encoding=\'utf-8\'?>')
        self.file.write('<Friends>')
        dispatcher.connect(self.spider_closed, signal=signals.spider_closed)

    def spider_closed(self, spider):
        self.file.write('</Friends>')
        self.file.close()

    def process_item(self, item, spider):
        escape("< & >")
        self.file.write('<friend id=\"' + item['id'] + '\">')
        self.file.write('<birthdate>' + item['birthdate'] + '</date>')
        self.file.write('<user>' + item['user'] + '</user>')
        self.file.write('<review>' + escape(item['review'].encode('utf-8').strip()) + '</review>')
        self.file.write('</item >')
        return item 
```

以下是我的 Spider 如何抓取多个页面：

```
class SavoySpider(BaseSpider):
    # identifies of the Spider
    name = "friend"
    count = 0
    allowed_domains = ["example.com"]
    start_urls = [
        "http://www.example.com/biz/social/"
    ]

    def start_requests(self):
        for i in range(0,1000,40):
            yield self.make_requests_from_url("http://www.example.com/biz/social/?start=%d" % i)

    def parse(self, response):
        response = response.replace(body=response.body.replace('<br />', '\n')) 
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ul/li')
        items = []
        for site in sites:
            item = FriendItem()
            self.count += 1
            item['id'] = str(self.count)
            item['birthdate'] = str(site.select('.//div/div/meta[@itemprop="birthdate"]/@content').extract()[0])
            item['user'] = site.select('h4/span/text()').extract()[0]
            item['review'] = ''.join(site.select('.//div[@class="media-friend"]/p/text()').extract())
            items.append(item)
        return items 
```

但是现在的问题是，如果我使用 Pipelines 自定义 xml 格式，当抓取另一个页面时，将附加到下面和后续页面。输出将如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Friends>
  <friend id = "1">
     <name>Name1</name>
     <birthdate>1988-04-03</birthdate>
     <review>txt............</review>
  </friend>
  .....
</Friends>
<?xml version="1.0" encoding="utf-8"?>
<Friends>
  <friend id = "40">
     <name>Name41</name>
     <birthdate>1988-04-13</birthdate>
     <review>txt............</review>
  </friend>
  .....
</Friends>
<?xml version="1.0" encoding="utf-8"?>
<Friends>
  <friend id = "81">
     <name>Name81</name>
     <birthdate>1988-04-23</birthdate>
     <review>txt............</review>
  </friend>
  .....
</Friends> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:27:51.013

在蜘蛛关闭后，我使用[蜘蛛关闭](http://doc.scrapy.org/en/0.16/topics/signals.html#spider-closed)信号来做事。

# extjs - sencha touch 2：在模型中列出具有关联的人口

> ID：15944441
> 
> 赞同：0
> 
> 时间：2013-04-11T08:50:47.073
> 
> 标签：extjs, model, sencha-touch-2, store

作为 sencha-touch2 的学习项目，我正在尝试使用来自[https://www.hnsearch.com/api的数据填充商店](https://www.hnsearch.com/api)

我已经创建了模型并存储如下，在检查器视图中我可以看到数据已接收并正确映射。

我无法弄清楚的问题是，如何显示一个 sencha xtype:list 元素以及嵌套在 json 中的实际结果项（模型：SearchResultItem）。我尝试了以下方法，它会给我一个列表，其中包含一个列表项，其中包含结果，但我希望每个搜索结果都有一个列表项。

**楷模：**

```
Ext.define('senchaHackerNews.model.Search', {
extend: 'Ext.data.Model',

config: {
    fields: [{
        name: 'hits',
        type: 'int'
    }],

    associations: {
        type: 'hasMany',
        name: 'results',
        model: 'senchaHackerNews.model.SearchResults',
        associationKey: 'results'
    }

}
});

Ext.define('senchaHackerNews.model.SearchResults', {
extend: 'Ext.data.Model',

config: {
    fields: [{
        name: 'score',
        type: 'float'
    }],

    associations: {
        type: 'hasOne',
        name: 'item',
        model: 'senchaHackerNews.model.SearchResultItem',
        associationKey: 'item'
    }
}
});

Ext.define('senchaHackerNews.model.SearchResultItem', {
extend: 'Ext.data.Model',

config: {
    fields: [{
        name: 'username',
        type: 'string'
    }, {
        name: 'title',
        type: 'string'
    }, {
        name: 'points',
        type: 'int'
    }, {
        name: 'url',
        type: 'string'
    }, {
        name: 'domain',
        type: 'string'
    }]

}
}); 
```

**店铺：**

```
Ext.define('senchaHackerNews.store.Search', {
extend: 'Ext.data.Store',
requires: ['senchaHackerNews.model.Search'],

config: {
    storeId: 'hnSearchStore',
    model: 'senchaHackerNews.model.Search',
    autoload: false,

    proxy: {
        type: 'jsonp',
        // url: 'http://api.thriftdb.com/api.hnsearch.com/items/_search?q=ipad',
        reader: {
            type: 'json',
            rootProperty: ''
        },
        callbackKey: 'callback'
    }
}
}); 
```

**看法：**

```
Ext.define('senchaHackerNews.view.Search', {
    extend: 'Ext.navigation.View',
    alias: 'widget.hnSearch',
    xtype: 'hnSearch',

    requires: ['Ext.field.Search'],

    initialize: function() {
        var xtpl = new Ext.XTemplate('<tpl for="results">{item.username} ---- {item.title} | <br></tpl>');

        this.add([

        {
            xtype: 'container',
            title: 'Search HN',
            layout: 'vbox',
            items: [{
                xtype: 'searchfield',
                placeHolder: 'Search HN News (at least 3 chars)',
                listeners: {
                    scope: this,
                    clearicontap: this.onSearchClearIconTap,
                    keyup: this.onSearchKeyUp
                }
            }, {
                xtype: 'list',
                flex: 1,
                itemTpl: xtpl,
                store: 'hnSearchStore',
                emptyText: 'No Matching Items',
            }]
        }

        ]);

        this.callParent(arguments);
    },

    onSearchKeyUp: function(field) {

        if(field.getValue() != '' && field.getValue().length > 3) {
            var store = Ext.StoreMgr.get('hnSearchStore');

            store.setProxy({
                url: 'http://api.thriftdb.com/api.hnsearch.com/items/_search?q='+field.getValue() 
            });

            store.load();
        } else if(field.getValue() == '') {
            Ext.StoreMgr.get('hnSearchStore').removeAll();
        }
    },

    onSearchClearIconTap: function() {
        Ext.StoreMgr.get('hnSearchStore').removeAll();
    }
}); 
```

示例**JSON**在这里[http://api.thriftdb.com/api.hnsearch.com/items/_search?q=facebook&pretty_print=true](http://api.thriftdb.com/api.hnsearch.com/items/_search?q=facebook&pretty_print=true)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:26:39.320

AFAIK，如果您正在寻找要显示的项目数组，则应在商店中使用项目模型并`rootProperty`指向项目，以便

```
Ext.define('senchaHackerNews.store.Search', {
    extend: 'Ext.data.Store',
    requires: ['senchaHackerNews.model.SearchResults'],

    config: {
        storeId: 'hnSearchStore',
        model: 'senchaHackerNews.model.SearchResults',
        autoload: false,

        proxy: {
            type: 'jsonp',
            // url: 'http://api.thriftdb.com/api.hnsearch.com/items/_search?q=ipad',
            reader: {
                type: 'json',
                rootProperty: 'results'
            },
            callbackKey: 'callback'
        }
    }
}); 
```

注意`model`&`rootProperty`属性的变化

# ruby - 如何使用 Capybara/Nokogiri 在文档中找到具有 .foo 类的第 n 个元素

> ID：15944442
> 
> 赞同：3
> 
> 时间：2013-04-11T08:50:48.930
> 
> 标签：ruby, capybara, capybara-webkit

我试图在文档中找到具有特殊类的第 n 个元素。这些元素不一定是同一父级的子级。所以例如

```
<ul>
  <li><div class="foo">This</div></li>
  <li><div>Nothing</div>
    <ul>
      <li><div class="foo">This also</div></li>
    </ul>
  </li>
  <li><div class="foo">And this</div><li>
</ul> 
```

我想找到具有 class 的第一个、第二个或第三个元素`.foo`。

我试过了

```
page.find '.foo' 
```

哪些错误`Capybara::Ambiguous: Ambiguous match, found 3 elements matching css ".foo"`

然后我尝试了

```
page.all('.foo')[n] 
```

效果很好，只是它似乎不像 Capybaras`find`那样等待这么短的时间，这是我需要的，因为 HTML 实际上是从 ajax 数据生成的。那么如何用 find 正确地做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:09:23.153

好的，在 freenode 上的#RubyOnRails 中进行了简短的聊天后，我很清楚这并不像听起来那么容易。问题是 Capybara 无法知道`.foo`已经插入页面的 s 是否是它们的“全部”。这就是为什么`.all`没有（或不需要）支持等待的原因`.find`。

解决方案是手动等待适当的时间，然后使用`.all`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T09:03:45.553

Nokogiri 的 CSS 查询对于查找某些类的元素非常有效。[教程](http://nokogiri.org/tutorials/searching_a_xml_html_document.html)中对此进行了说明。

例如，您可以使用以下 Ruby one-liner 从给定文件中读取并找到 class 的第二个元素`foo`：

```
ruby -rnokogiri -e 'puts Nokogiri::HTML(readlines.join).css(".foo")[1]' sample.html 
```

返回

```
<div class="foo">This also</div> 
```

将数字替换为`[1]`您要查找的元素的索引，并替换`sample.html`为您要搜索的 html 文件。如果您想挑选元素的某些部分，您可以使用 的方法`Nokogiri::XML::Element`，例如[`content`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-content)获取其内容。

# apache-flex - 更改菜单栏中顶级项目的突出显示 Flash Builder 4.6

> ID：15944443
> 
> 赞同：1
> 
> 时间：2013-04-11T08:50:48.987
> 
> 标签：apache-flex, flash-builder, highlight, menubar

我受雇帮助构建 flex 页面，并且在学习 flash builder 三天后，我尝试改变顶级项目在菜单栏中突出显示的方式。目前它是默认设置，因此当它们悬停时，它们的颜色会变为蓝色。

我想要做的是使文本在鼠标悬停时带有下划线，而不是将其颜色更改为蓝色。

尝试通过 CSS 更改它，但唯一更改的是子菜单项，而不是顶层：

主应用程序中负责保存在 BorderContainer 中的菜单栏的代码：

```
<mx:MenuBar id="mbPrimaryMenu" height="40" labelField="@label"
dataProvider="{primaryMenuItems}" change="mbPrimaryMenuChangeHandler(event)"/> 
```

CSS负责格式化我认为是整个菜单栏（包括顶级元素）：

```
#mbPrimaryMenu {
    chromeColor: #333333;
    borderVisible: true;
    borderColor: #000000;
    borderAlpha: 0;
    borderStyle: solid;
    borderWeight: 2;
    color: #FFFFFF;
    contentBackgroundColor: #333333;
    contentBackgroundAlpha: 0.8;
    rollOverColor: #AAAAAA;
    itemRollOverColor: #FF0000; 
```

我该怎么做呢？CSS，MenuBarItemRenderer？当鼠标滑过其中一个元素时，我在哪里寻找菜单栏突出显示其元素的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:37:52.817

要使菜单栏的第一级文本带下划线，只需设置`textDecoration`添加 MXML 组件的属性。那是：

```
<mx:MenuBar width="100%" height="20" textDecoration="underline" dataProvider="{myData}"/> 
```

要更改菜单栏的顶级背景颜色，您需要复制然后编辑默认外观。这可能看起来令人生畏，但实际上很容易做到。（如果您以前从未创建过自定义皮肤，请在此处查看我的答案以帮助您入门：[在 Flex 中的 spark TextInput 中添加搜索图标](https://stackoverflow.com/questions/5963475/add-search-icon-inside-spark-textinput-in-flex/15977435#15977435)）

您可以在 MXML 中应用皮肤，或者由于您使用的是 CSS，您可以使用以下方法在 CSS 中应用它们：

```
mx|MenuBar {
backgroundSkin: ClassReference("com.mycompany.views.components.skins.MyButtonSkin");
   /* changes background color at top level*/
itemSkin: ClassReference("com.mycompany.views.components.skins.MyMenuItemSkin"); 
   /* changes background HOVER color at top level of menu bar */
} 
```

您可以从 ButtonSkin 的默认外观创建外观 MyButtonSkin（使用您自己的名称），并从默认外观 MenuItemSkin 创建 MyMenuItemSkin（使用您自己的名称）。但是，您只需要 MyMenuItemSkin 即可更改菜单栏顶层的悬停颜色。

在`MyMenuItemSkin`皮肤文件夹中创建皮肤后，编辑包含填充的第 1 层部分。在这里，您可以执行以下操作：

```
<!-- layer 1: fill; effects main level of menubar only -->
<s:Rect left="0" right="0" top="0" bottom="0" excludeFrom="up,disabled" >
    <s:fill> 
        <s:LinearGradient rotation="90">
            <s:GradientEntry color.over="0xFF0000" 
                             color.down="0x00FF00"
                             alpha.over="0.8" alpha.down="1" 
                             />
            <s:GradientEntry color.over="0xAA0000" 
                             color.down="0x00AA00"
                             alpha.over="0.8" alpha.down="1" 
                             />
        </s:LinearGradient>
    </s:fill>
</s:Rect> 
```

保存并运行程序。然后根据需要调整颜色。

# codeigniter - Codeigniter：杂货 CRUD 模板不存在

> ID：15944446
> 
> 赞同：0
> 
> 时间：2013-04-11T08:51:04.303
> 
> 标签：codeigniter, codeigniter-2

帮助...我不知道从哪里开始调试
我下载了 codeigniter 杂货杂货。安装每一个要求。现在它给我。
`grocery crud template doesn't exist`
图书馆/grocery_crud.php
在第 1388 行...

**编辑**

```
if(!file_exists($this->theme_path.$this->theme.'/views/list_template.php'))
        {
            throw new Exception('The template does not exist. Please check your files and try again.', 12);
            die();
        } 
```

它与这段代码有关.....即使在下载的 zip 文件中我也找不到 list_template.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:11:13.900

`dump($this->theme_path);`并`dump($this->theme);`检查这些对象中的路径是什么，如果根路径可以，而不是检查你的目录是否有这个文件

```
your_project_folder\assets\grocery_crud\themes\datatables\views\list_template.php
your_project_folder\assets\grocery_crud\themes\flexigrid\views\list_template.php 
```

# html - Cognos：阅读 PDF 中的 HTML 代码

> ID：15944451
> 
> 赞同：0
> 
> 时间：2013-04-11T08:51:19.700
> 
> 标签：html, pdf, formatting, cognos

是否可以在 PDF 中使用 HTML 格式代码？例如，当字段是`<b>Test<b>`PDF 时以粗体显示测试？

就像为文本项设置一个设置，它应该将文本读取为“HTML”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:22:28.253

不，HTML 编码格式不会以您想要的方式在 PDF 中显示。

您必须在 Report Studio 中设计您的 Cognos 报告。通过 Report Studio 应用的格式将正确显示在您的报告的 HTML 或 PDF 版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T03:07:17.530

`Rich Text Item`几乎会做你想做的事。

此控件将显示在 PDF 上，您也可以从数据库中加载它。但它只支持基本标签。

`<b>TEST</b>`对此控件无效，但是以下链接显示了您可以如何近似此控件。

[http://pic.dhe.ibm.com/infocenter/cbi/v10r1m0/index.jsp?topic=%2Fcom.ibm.swg.im.cognos.ug_cr_rptstd.10.1.0.doc%2Fug_cr_rptstd_id23310rich_text_item_supported_elements.html](http://pic.dhe.ibm.com/infocenter/cbi/v10r1m0/index.jsp?topic=%2Fcom.ibm.swg.im.cognos.ug_cr_rptstd.10.1.0.doc%2Fug_cr_rptstd_id23310rich_text_item_supported_elements.html)

# django - Django Tastypie：超出最大递归深度

> ID：15944455
> 
> 赞同：0
> 
> 时间：2013-04-11T08:51:36.240
> 
> 标签：django, tastypie

我正在遵循 django-tastypie 的教程，在连接资源之后，我去了`http://localhost:8000/api/entry/?format=json`，我在 JSON 中收到了这个错误：

```
{"error_message": "maximum recursion depth exceeded", "traceback": "Traceback (most recent call last):\n\n  File \"C:\\Python27\\lib\\site-packages\\django_tastypie-0.9.14-py2.7.egg\\tastypie\\resources.py\", line 202, in wrapper\n    response = callback(request, *args, **kwargs)\n\n\ 
```

模型.py：

```
from tastypie.utils.timezone import now
from django.contrib.auth.models import User
from django.db import models
from django.template.defaultfilters import slugify

class Entry(models.Model):
    user = models.ForeignKey(User)
    pub_date = models.DateTimeField(default=now)
    title = models.CharField(max_length=200)
    slug = models.SlugField()
    body = models.TextField()

    def __unicode__(self):
        return self.title

    def save(self, *args, **kwargs):
        # For automatic slug generation.
        if not self.slug:
            self.slug = slugify(self.title)[:50]

        return super(Entry, self).save(*args, **kwargs) 
```

api.py：

```
from tastypie.resources import ModelResource
from myapp.models import Entry

class EntryResource(ModelResource):
    class Meta:
        queryset = Entry.objects.all()
        resource_name = 'entry' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T10:28:21.933

尝试取消注释 "(r'^blog/', include('myapp.urls')" 您放在 urlpatterns 下，然后再次运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T09:25:05.117

只需注释掉可以在 urls.py 中的 urlpatterns 下找到的**“(r'^blog/', include('myapp.urls')”**，然后重新运行您的应用程序。

# php - Kohana URL（分段）

> ID：15944460
> 
> 赞同：0
> 
> 时间：2013-04-11T08:52:02.800
> 
> 标签：php, kohana

在 Kohana 2.3.4 上，我使用查询字符串作为参数并使用输入类来获取值。

> 本地主机/home?id=1234

现在我迁移到 Kohana 3.3.0，我在分段 URL 的工作方式上遇到了很多麻烦。

**我想实现这一点：**

> 本地主机/家/1234

我的控制器主页：

```
class Controller_Home extends Controller_Template {
    public function action_index($id) {
        //code goes here
    }
} 
```

根据我对分段 URL 的理解，我的控制器应该是这样的：

```
public function action_details($id) {
    //code here
} 
```

但这意味着链接是`localhost/home/details/1234`. 我宁愿不再有细节动作。我该怎么做？抱歉，在我写这篇文章的那一刻，Kohana 似乎很沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:45:34.063

从 3.3 开始，您不能在操作中使用参数。你只需要`&$this->request->param('id')`. 见[http://kohanaframework.org/3.3/guide/kohana/routing#request-parameters](http://kohanaframework.org/3.3/guide/kohana/routing#request-parameters)

# c# - 在网格中查看/编辑动态参数

> ID：15944464
> 
> 赞同：1
> 
> 时间：2013-04-11T08:52:20.160
> 
> 标签：c#, wpf, data-binding, datagrid, propertygrid

我正在评估在 C#/WPF/MVVM 应用程序中查看和编辑参数的可能性。我目前正在研究**WPF Woolkit Extended**、**Telerik**、**DevExpress**和**Syncfusion**的一些自定义控件。我看到两个选项，PropertyGrid 或类似 DataGrid 的控件。

问题：我的参数内容**在一个集合中**，而 PropertyGrids 似乎不喜欢那些，他们喜欢绑定到具有属性的对象。另一方面，我的参数有**不同的值类型**，这是数据网格不喜欢的，列总是有相同的值编辑器（例如复选框、日期选择器等）。

**有人知道支持绑定到集合和每行单个值编辑器的可靠控件吗？**

其他要求是分层数据表示、验证和搜索功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:04:29.293

经过一段时间的调查，我发现所有框架都能够在列中应用单个单元格编辑器。

这通常在列定义中完成。网格有一个**Columns**集合。每列都可以设置一个**CellTemplateSelector**，这是我最初问题的关键。

这是 Telerik 网格视图的一个小片段，但就我所知，它们的行为都相同，直到 CellTemplateSelector。当然，所有 3rd 方 UI 库的供应商似乎都复制了**WPF DataGrid**的行为。

```
<telerik:RadGridView x:Name="radGridView" 
                          AutoGenerateColumns="False">
<telerik:RadGridView.Columns>
   <telerik:GridViewDataColumn DataMemberBinding="{Binding Name}" Header="Parameter" />
   <telerik:GridViewDataColumn DataMemberBinding="{Binding Value}" Header="Value">
      <telerik:GridViewDataColumn.CellTemplateSelector>
         <telerik:ConditionalDataTemplateSelector>
            <telerik:DataTemplateRule Condition="PropertyId &lt; 1">
               <DataTemplate>
                  <TextBox Text="{Binding Value, StringFormat=c}"/>
               </DataTemplate>
            </telerik:DataTemplateRule>
            <telerik:DataTemplateRule Condition="PropertyId > 0">
               <DataTemplate>
                  <CheckBox IsChecked="{Binding Value}" />
               </DataTemplate>
            </telerik:DataTemplateRule>
         </telerik:ConditionalDataTemplateSelector>
      </telerik:GridViewDataColumn.CellTemplateSelector>

   </telerik:GridViewDataColumn>
</telerik:RadGridView.Columns> 
```

在此示例中，网格的 ItmesSource 绑定到包含**Name**、**Value**和**PropertyId**属性的我的视图模型。根据**PropertyId**选择一个控件。我喜欢 Telerik 控件的一点是我**不需要代码隐藏，**因为**ConditionalDataTemplateSelector**在该框架中可用。我猜，MVVM 可以更好地保持您的视图没有代码。

**更新：**

刚刚收到**Syncfusion**的答复，他们说：

> 我们可以在一列中加载不同的单元格编辑器。为此，我们甚至必须处理 dataGrid.Model.QueryCellInfo 并且我们必须根据数据更改 CellType。我们无法避免代码落后。但这可以使用行为来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:06:08.513

`DataGrid`允许您使用`DataGridTemplateColumn`，您可以在其中指定将应用于该列中每个单元格的模板。此模板可能包含`UserControl`您定义的一个，它分析它`DataContext`并显示适当的控件。（不过，这将是一项相当多的工作，因此如果存在开箱即用的解决方案，您应该改用它。）

# jquery - 如果我从任何人那里得到像 #!foo=32 这样的参考资料，如果 Ia 打开/关闭 JS，我会收到什么

> ID：15944478
> 
> 赞同：0
> 
> 时间：2013-04-11T08:53:13.210
> 
> 标签：jquery, seo, href

盖兹！我找不到这个问题的答案，如果我从任何人那里得到参考，比如

```
 ..#!foo=32 
```

从

```
 <a href=..?foo=32 onClick=" navigate(..#!foo=32); return false;">click</a> 
```

如果我得到我的**JS** ，我会收到什么：

1.  上
2.  离开

我正在尝试将其与 SEO 联系起来。在我看来，如果每个链接的人都喜欢

```
 ..#!foo=32 
```

将开发这个机器人看不到的链接，但不会像链接一样

```
 href=...?foo=32 
```

这实际上是**SEO**所需要的。

很抱歉如果我重复某人的问题，但真的找不到明确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:12:55.427

hashbang (#!) 是 Google 提出的用于解决基于 Ajax 的动态页面问题的系统。谷歌和必应目前支持它。

我相信谷歌搜索hashbang会让你了解细节。

# jquery - 使用 jquery 将具有行跨度的列添加到表中

> ID：15944479
> 
> 赞同：0
> 
> 时间：2013-04-11T08:53:14.173
> 
> 标签：jquery

我有一个由框架生成的 2 列 x 6 行表，因此我无法控制该表的最初构建方式。

我想在右侧添加第三列，使用 jQuery 跨越所有 6 行。该表有一个 id，但行和单元格没有定义特征。

这基本上是生成的表：

```
<table id="tbl1">
  <tr>
    <td>...</td>
    <td>...</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
  </tr>
  ...
</table> 
```

这就是我希望在 jquery 完成它的魔力之后的样子：

```
<table id="tbl1">
  <tr>
    <td>...</td>
    <td>...</td>
    <td rowspan="6">some new data</td>
  </tr>
  <tr>
    <td>...</td>
    <td>...</td>
  </tr>
  ...
</table> 
```

我正在使用 jQuery 版本 1.7.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:57:17.637

```
$('#tbl1 tr').eq(0).append("<td rowspan='6'>some new data</td>"); 
```

你可以在这里看到这个工作的 jsFiddle：http: [//jsfiddle.net/CDUq5/](http://jsfiddle.net/CDUq5/)

# php - 无法连接到 Microsoft sql server

> ID：15944481
> 
> 赞同：0
> 
> 时间：2013-04-11T08:53:15.570
> 
> 标签：php, sql, sql-server, sql-server-2008, sql-server-2005

我正在尝试将 a 连接`php script`到 Microsoft SQL Server，此外，我正在自己进行一些测试以了解有关 php 和服务器的更多信息。

```
if(function_exists("sqlsrv_connect"))
{
    echo "exists<br/>";
}else
{
    die("does not exist<br/>");
}
$serverName = "myTestServer";
$connectionInfo = array( "Database"=>"test_name", "UID"=>"testUser", "PWD"=>"testPwd");
$conn = sqlsrv_connect($serverName, $connectionInfo);
if($conn)
{
    echo "sucessful";
}
else
{
    echo "failed ";
} 
```

输出是：

```
exists
failed 
```

因此，我可以看到`.dll`已按预期安装。我还缺少其他东西吗？或者这可能是服务器属性中的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:31:37.187

每当 SQLSRV PHP 函数发生故障时，调用[sqlsrv_errors](http://php.net/manual/en/function.sqlsrv-errors.php)以找出根本原因。在您的情况下，您似乎没有在 PHP 服务器上安装正确的 SQL Server ODBC 驱动程序。按照错误消息的建议安装驱动程序，情况应该会有所改善。

# jquery - 不想选中已禁用的复选框

> ID：15944483
> 
> 赞同：0
> 
> 时间：2013-04-11T08:53:16.243
> 
> 标签：jquery

我有复选框列表，其中一些被禁用。我有一个复选框`check_all`并且`uncheckall`我的代码是

```
$( '#check_all' ).live( 'change', function() {
   $( '.waiting_user' ).attr( 'checked', $( this ).is( ':checked' ) ? 'checked' : '' );
   $( this ).next().text( $( this ).is( ':checked' ) ? 'Uncheck All' : 'Check All' );
 }); 
```

它工作正常，但问题是它也检查和取消选中禁用复选框

任何方法都可以做到这一点 checkall 和 uncekall 只启用了图像中的 echeck box se 以获取更多详细信息![在此处输入图像描述](https://i.stack.imgur.com/cOZqS.png)

问题是它也被禁用了复选框。

![在此处输入图像描述](https://i.stack.imgur.com/9snWI.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:54:54.993

您可以像这样排除禁用的复选框：

```
$('.waiting_user:not(:disabled)') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T08:55:53.877

您可以使用伪类选择器`:enabled`

```
 $( '.waiting_user:enabled' ).attr( 'checked', $( this ).is( ':checked' ) ? 'checked' : '' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:57:11.283

```
$( '#check_all' ).live( 'change', function() {
$( '.waiting_user:enabled").attr( 'checked', $( this ).is( ':checked' )  ? 'checked' : '' );
$( this ).next().text( $( this ).is( ':checked' ) ? 'Uncheck All' : 'Check All' );
}); 
```

# php - 没有语法错误但php返回错误

> ID：15944485
> 
> 赞同：-6
> 
> 时间：2013-04-11T08:53:22.930
> 
> 标签：php, parsing

在以下代码中，php 返回：

> 解析错误：语法错误，第 13 行 C:\wamp\www_lab\tablo\test.php 中的意外“{”

但我看不出代码有任何错误。

```
$conn = mysql_connect("localhost","root","");
mysql_query("SET NAMES UTF8");
$db_select = mysql_select_db("table",$conn);

if (isset($_GET['q'])) {
    $q = $_GET['q'];

    $raw_results = mysql_query("SELECT * FROM users WHERE (`email` LIKE '%".$q."%') OR (`text` LIKE '%".$q."%')");

    if (mysql_num_rows($raw_results) > 0) { // if one or more rows are returned do following
            while ( $results = mysql_fetch_array($raw_results) ) {
                echo "<p><h3>".$results['name']."</h3>".$results['surname']."</p>";
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:13:31.603

没有您的实际代码文件，以下答案是在黑暗中拍摄；

.. 进入它，但是，您似乎从外部源复制了此代码，例如 jsfiddle 或某个博客之类的东西。这里的重点是，有时在制作此类副本时，该副本的文本中有隐藏字符。

这个隐藏字符的存在通常会破坏该行上的任何代码，尤其是在 php.ini 中。

..这是我给你的建议。删除整行 13\. 从头开始​​重新键入。如果您的问题仍然存在，那不是问题。

# c++ - 内存和范围管理

> ID：15944486
> 
> 赞同：0
> 
> 时间：2013-04-11T08:53:26.163
> 
> 标签：c++, memory, scope

我对 c++ 中的范围和内存管理有疑问。这是我遇到麻烦的情况：

```
Abc function f() 
{
  Abc c;
  return c;
}

Abc d = f();
if(d) cout << "hi"; 
```

它会说“嗨”吗？我的意思是......在 f() 中创建的 Abc 不是动态的（我们没有编写新的）......但是我们正在返回值，所以我们保持对对象的引用。它是否有价值，或者一旦超出其范围就会死亡？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:14:57.983

```
#include <iostream>
using std::cout;
using std::endl;

class Abc
{
    int m_value = 0;
public:
    Abc()
    {
        cout << "Default Constructor" << std::endl;
    }

    Abc(const Abc& _source)
    {
        cout << "Copy Constructor" << std::endl;
        //copy stuff
    }

    Abc& operator=(const Abc& _source)
    {
        cout << "assignment operator" << std::endl;
        if (this == &_source)
            return *this;
        //copy stuff

        return *this;
    }

    Abc(const Abc&& _source)
    {
        cout << "Move Constructor" << std::endl;
        //move stuff
    }

    Abc& operator=(const Abc&& _source)
    {
        cout << "move assignment operator" << std::endl;
        //move stuff
        return *this;
    }

    ~Abc()
    {
        cout << "Destructor"<< std::endl;
    }

    void setValue(int _value)
    {
        m_value = _value;
    }

    int getValue()
    {
        return m_value;
    }
};

Abc f()
{
  Abc c;
  c.setValue(100);
  cout << "c value: " << c.getValue() << endl;
  return c;
}

int main()
{
    Abc d = f();
    cout << "d value: " << d.getValue() << endl;
    d.setValue(200);
    cout << "d value: " << d.getValue() << endl;
} 
```

这是输出：

默认构造函数

c值：100

d 值：100

d 值：200

析构函数

从这里您可以看到编译器足够聪明，可以重用分配的对象而无需制作任何哑副本（C++98/03，C++11 相同的输出）。

使用 MinGW（GCC 4.7.1）编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:48:17.177

在你的情况下，不可能做出准确的陈述，在下面的第二种情况下：

```
Abc* function f() 
{
   Abc *c =  new Abc();;
   return c;
}

Abc* d = f();
if(d) cout << "hi"; 
```

是的，它会说“嗨”，不同之处在于，在第一种情况下，c 保存在堆栈中，而在第二种情况下，它保存在堆中。在您的情况下，键入 if(d) 不是检查对象是否处于活动状态的好方法，因为它是在堆栈上定义的。

为了检查你的情况，你可以在 Abc 的析构函数中添加一个日志，看看它是否会被命中。您将观察到当您使用 f() 返回对象时调用了 Abc 的析构函数。但这并不意味着对象已经死了。只有它的析构函数被调用。但在这种情况下，您不能正确使用析构函数。这就是为什么选择指向对象的指针而不是直接定义它们的原因之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:56:38.143

```
Abc f() 
{
  Abc c;
  return c;
} 
```

创建`c`type `Abc`，复制它并从函数返回（`NRVO`可以省略复制）。

```
Abc d = f();
if(d) cout << "hi"; 
```

`d`使用 function 的返回值创建并复制初始化它`f`。什么是`Abc`类型？如果它有`operator bool`（或者`operator T()`可以`T`隐式转换为`bool`） - 可能会打印“hi”。

# language-agnostic - 有人对成为更好的程序员有很好的建议吗

> ID：15944491
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:53:39.120
> 
> 标签：language-agnostic

我想问一个非技术问题：我大学毕业快2年了，现在我面临很多问题。

首先，如何提高我的编程技能？我知道编写代码可能是最好的方法，但我发现如果我不熟悉编程语言及其库，我就不能流利地编写代码——我最终觉得这是在浪费时间。

其次，我找到了很多书，大概50-60本，但是我没有时间看！我有点担心错过一些重要的知识。

第三，经过近两年的工作经验，我想我知道我想学习什么样的编程技能：android、Java EE、python 和 linux。然而，我需要学习的东西太多了，这变成了一种压力，感觉就像一团糟。

有人可以帮我解决这些问题吗？那对我会有很大的帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:08:18.257

[学习 Android 编程](http://developer.android.com/training/basics/firstapp/index.html)逐步了解基础知识，您会更好地了解全局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:53:00.840

虽然这个问题对于这个网站来说真的是相当离题，但有一些想法：

1.  大技能是在小步骤中学习的。所以不要担心什么都学，学一件事，然后做得更好。

2.  为自己设定合理的挑战。想一想你希望能够做到的事情，而这超出了你现在的能力范围，然后学习如何去做。

3.  让你学到的东西尽可能有趣。

4.  当您遇到特定问题时，您无法在网络上找到答案，不用担心，这很正常。在此处发布您的代码和特定问题，有人会尝试帮助您了解该特定点。

一切顺利！

# jquery - 使用 tinyscrollbar.js 触发 onScroll 事件

> ID：15944493
> 
> 赞同：0
> 
> 时间：2013-04-11T08:53:55.910
> 
> 标签：jquery, scroll, tinyscrollbar

每次使用 tinyscrollbar 滚动时，我都想触发一个事件。我试过使用 jquery 的滚动方法，但它只适用于 tinyscrollbar 部分之外的区域。有人知道怎么做这个吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:32:57.420

您可以绑定以下事件。

```
$("#scrollbar").on('mouseup', '.track', function() {
    console.log('scroll');
});

$("#scrollbar").on('mousewheel DOMMouseScroll', function() {
    console.log('mousewheel');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:14:14.190

在 tinyscrollbar.js 第 167 行“功能轮（事件）”中找到它

# java - Java - 带有反射的 NoSuchMethodException

> ID：15944494
> 
> 赞同：1
> 
> 时间：2013-04-11T08:54:00.553
> 
> 标签：java, reflection

执行时我得到一个`NoSuchMethodException`：

```
operacionDTO.getClass().getMethod("setPrioridad").invoke(operacionDTO, 0);

java.lang.NoSuchMethodException: xxxx.api.service.dto.RegasificacionDTO.setPrioridad() 
```

但是类`RegasificacionDTO`确实有一个名为的公共方法`setPrioridad(int i)`，如果在调试时我调用：

```
operacionDTO.getClass().getMethods() 
```

然后我得到一个 Method 数组，其中有一个`setPrioridad`. 我已经尝试过其他一些类似的方法，但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T08:55:53.127

您需要包含参数签名。

```
 operacionDTO.getClass().getMethod("setPrioridad", Integer.TYPE) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T08:57:29.400

方法`getMethod()`接受方法名称和参数类型的可变参数数组。在你的情况下，你应该打电话`getMethod("setPrioridad", int.class)`，一切都会奏效。

这是因为在 java 中（就像在大多数面向对象的语言中一样），您可以定义多个具有相同名称和不同签名的方法，因此系统使用给定的参数类型来区分它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T08:57:57.197

```
 operacionDTO.getClass().getMethod("setPrioridad",new Class[]{Integer.TYPE or Integer.class}).invoke(operacionDTO, 0); 
```

# php - 防止替换 HTML 标记中的表情符号

> ID：15944495
> 
> 赞同：2
> 
> 时间：2013-04-11T08:54:05.000
> 
> 标签：php, regex, emoticons

我使用一个简单的`str_replace`-function 来替换我网站上的一些表情符号……</p>

```
<?php

$replace = array(
    ':)' => 'smile',
    ';)' => 'wink',
    …
);

$string = 'Lorem ipsum (&quot;dolor&quot;) sit amet! :)';

foreach($replace as $search => $replace) {
    $string = str_replace($search, '<img src="/img/'.$replace.'.png" alt="'.$search.'">', $string);
}

?> 
```

这个简单替换的问题是，`&quot;`-tag 中的“;)”也会被替换，HTML 代码也会被破坏。有没有办法/解决方法（一个特殊的正则表达式，即）来解决这个“问题”？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:17:33.700

这是我的第二个答案，你是对的，最后我们需要使用正则表达式。基本上`$negation`，转义搜索前面有正则表达式，我想它可以优化，但现在它对我有用。

```
$smileys = array(
    ':)' => 'smile',
    ';)' => 'wink'
);

$string = 'Lorem ipsum (&quot;dolor&quot;) sit amet! :)';

$negation = '[^&\w*]'; // Here is the magic, this is the part that avoids the search to be preceded by &+characters
foreach($smileys as $icon => $name) {
  $replace[] = '<img src="/img/'.$name.'.png" alt="'.$icon.'">'; //we create an array with the corresponding replaces
  $search[] = '/'.$negation.preg_quote($icon).'/'; //Magic second part, preg_quote escapes the smileys to sarch for PCRE, we prepend the magical regex.
}

$string = preg_replace($search, $replace, $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:57:37.133

最简单的方法是这样做：

```
$replace = array(
    ' :)' => ' smile',
    ' ;)' => ' wink',
); 
```

基本上只有在表情符号前面有空格时才替换它们。如果用户写：

`Hello my name is John:)`- 这是他们的错误，不是你的。

* * *

第二种选择是在替换表情之前使用[htmlspecialchars_decode() 。](http://www.php.net/manual/en/function.htmlspecialchars-decode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:58:58.853

`preg_replace`与`\B`（非单词边界）一起使用

```
$string = preg_replace("/\B".preg_quote($search)."\B/", '<img src="/img/'.$replace.'.png" alt="'.$search.'">', $string); 
```

经过测试

```
[root@srv ~]# php test.php
Lorem ipsum (&quot;dolor&quot;) sit amet! <img src="/img/smile.png" alt=":)"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T09:01:09.817

利用：

```
$string = html_entity_decode($string); 
```

在替换（foreach）之前，这样`&quot;`将被读取为实际引号，而不是被替换。`&quot;'s`如果您存储在数据库或其他东西上，您可以使用 htmlentities() 来再次获取。

# perl - 如何将批量替换转换为 perl？

> ID：15944499
> 
> 赞同：0
> 
> 时间：2013-04-11T08:54:19.110
> 
> 标签：perl, batch-file

我有一个批量替换语句，我想转移到 perl。但我仍然想从批处理中调用 perl，并将结果作为变量返回。

```
SET TEST = "mystring"
SET modified=%TEST:"='%
ECHO %modified%  //prints: 'mystring' 
```

最后，我不想要打印输出，只想要使用的变量`%modified%`。

我如何在 perl 中编写上面的语句，以便 perl 获取测试字符串，用单引号替换双引号并将结果返回到变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:06:18.087

所以你想简单地替换字符串中的字符？这可以在 Perl 中使用`tr///`操作符来完成。例如：

```
use strict;
use warnings;

my $test = q("mystring");
my $modified = $test;
$modified =~ tr/"/'/;

print "$modified\n"; 
```

# c# - 数据库日期时间空句柄

> ID：15944502
> 
> 赞同：0
> 
> 时间：2013-04-11T08:54:33.720
> 
> 标签：c#, asp.net, .net, sql, database

我有以下代码：

```
var distinctRows = 
      (from row in ds.GetTable(this.TagShortName).AsEnumerable()
         select new Audit    
          {
             ID =row.Field<long>("ID"),
             UpdatedBy =string.Format("{0} {1}", 
                                      row.Field<string>("UpdatedByFirstName"),
                                      row.Field<string>("UpdatedByLastName")),
             UpdatedOn = ow.Field<DateTime>("UpdatedOn")
          }).Distinct(new AuditComparer()); 
```

当我在 UpdateOn 字段中有空值时，它会抛出异常：

```
UpdatedOn =row.Field<DateTime>("UpdatedOn") 
```

异常：无法将 DBNull.Value 转换为类型“System.DateTime”。请使用可为空的类型。

如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:59:59.703

使`UpdatedOn`可空或

```
UpdatedOn = row.Field<DateTime?>("UpdatedOn")?? DateTime.MinValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:55:06.020

使用[`Nullable<DateTime>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)或`DateTime?`

```
UpdatedOn = row.Field<DateTime?>("UpdatedOn") 
```

# logging - Tomcat 6 在 catalina 日志中显示奇怪的消息

> ID：15944503
> 
> 赞同：5
> 
> 时间：2013-04-11T08:54:36.627
> 
> 标签：logging, tomcat6, catalina

我在我的 Tomcat Catalina 日志中看到了大量此错误消息：

```
Invalid chunk starting at byte [0] and ending at byte [0] with a value of [null] ignored 
```

有谁知道这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T08:16:34.640

这是 Apache 6.0.35 中引入并在 Apache 6.0.36 中修复的小错误。它是由具有多个 '&' 字符的参数引起的：

从[变更日志](http://tomcat.apache.org/tomcat-6.0-doc/changelog.html)：

> Tomcat 6.0.36 (jfclere) 发布于 2012-10-19
> 
> > 卡塔利娜
> > 
> > > [...]
> > > 
> > > ![](https://i.stack.imgur.com/UVZdT.gif)不要将参数中多余的“&”字符标记为解析错误。（科林科）

# c# - MsTest 类初始化和继承

> ID：15944504
> 
> 赞同：79
> 
> 时间：2013-04-11T08:54:40.083
> 
> 标签：c#, mstest

我的测试有一个基类，它由以下方式组成：

```
[TestClass]
public abstract class MyBaseTest
{
   protected static string myField = "";

   [ClassInitialize]
   public static void ClassInitialize(TestContext context)
   {
       // static field initialization
       myField = "new value";
   }
} 
```

现在我正在尝试创建一个从基础继承的新测试，具有以下签名：

```
[TestClass]
public class MyTest : MyBaseTest
{
   [TestMethod]
   public void BaseMethod_ShouldHave_FieldInitialized()
   {
       Assert.IsTrue(myField == "new value");
   }
} 
```

`ClassInitialize`子测试从不调用...在MsTest上使用带有继承的测试初始化​​的真正**正确**方法是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-11T10:12:18.597

不幸的是，您无法以这种方式实现此目的，因为[ClassInitializeAttribute 类](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.classinitializeattribute%28v=vs.100%29.aspx)不能被继承。

继承的属性可以被使用它的类的子类使用。由于`ClassInitializeAttribute`不能被继承，当`MyTest`类被初始化时，不能调用类中的`ClassInitialize`方法。`MyBaseTest`

尝试用另一种方式解决它。一种效率较低的方法是再次定义`ClassInitialize`方法`MyTest`并仅调用基本方法而不是复制代码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-18T17:22:30.747

一个潜在的解决方法是定义一个新类`AssemblyInitializeAttribute`。显然，它有不同的范围，但对我来说，它满足了我的需求（横切关注点，恰好需要对每个测试类和测试方法进行完全相同的设置。）

```
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace MyTests
{
  [TestClass]
  public sealed class TestAssemblyInitialize
  {
    [AssemblyInitialize]
    public static void Initialize(TestContext context)
    {
      ...
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-17T15:06:59.010

在基类上使用静态构造函数？按照设计，它只执行一次，并且没有像 ClassInitializeAttribute 这样的奇怪的继承限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-22T15:19:40.843

更新：添加锁以避免多线程问题...

我们知道，当类运行时，会为类中的每个 [TestMethod] 构造一个新实例。每次发生这种情况时，都会调用基类的无参数构造函数。您不能简单地在基类中创建一个静态变量并在构造函数运行时对其进行测试吗？

这有助于您不要忘记将初始化代码放在子类中。

不确定这种方法是否有任何缺点......

像这样：

```
public class TestBase
{
    private static bool _isInitialized = false;
    private object _locker = new object();

    public TestBase()
    {
        lock (_locker) 
        {
          if (!_isInitialized)
          {
            TestClassInitialize();
            _isInitialized = true;
          }
        }
    }

    public void TestClassInitialize()
    {
        // Do one-time init stuff
    }
}
public class SalesOrderTotals_Test : TestBase
{
    [TestMethod]
    public void TotalsCalulateWhenThereIsNoSalesTax()
    {
    }
    [TestMethod]
    public void TotalsCalulateWhenThereIsSalesTax()
    {
    }
} 
```

# c# - 从异步方法返回相同的值

> ID：15944512
> 
> 赞同：2
> 
> 时间：2013-04-11T08:54:58.633
> 
> 标签：c#, random, async-await

我现在对此视而不见，所以请帮忙。

当我在循环内调用此方法两次时，它返回相同的值。为什么 ？

```
public async Task<int> RollDice() {
    var rnd = new Random();
    var selected = 0;

    await Task.Run(() => {
        selected = rnd.Next(1, 6);
        });

    return selected;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T08:59:05.893

您必须`Random`在方法之外初始化对象，以防止它使用相同的种子一遍又一遍地初始化，从而返回相同的值。

重要的是要注意，正如 LukeH 在注释中正确添加的那样，`System.Random`该类*不是*线程安全的，不应在不同线程中的任务之间共享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:00:10.193

您正在使用`Random`该类的两个实例。使用无[参数构造函数](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)，随机数生成器使用基于系统时钟的值播种。

这意味着如果您在`Random`不久之后创建两个实例，它们将使用相同的值进行初始化，因为系统时钟具有有限的分辨率。拥有相同的种子意味着这两个实例将产生相同的结果序列。

一些谷歌搜索显示，使用`Random`跨线程可能会导致它中断并返回无穷无尽的零序列，因此如果您必须对代码的这一特定部分进行多线程处理，您可能需要查看[这篇文章](http://blogs.msdn.com/b/pfxteam/archive/2009/02/19/9434171.aspx)，了解如何创建单个类的线程安全版本`Random`。

# python - 在 Win7x64 上编译/安装 py-bcrypt

> ID：15944514
> 
> 赞同：1
> 
> 时间：2013-04-11T08:54:59.413
> 
> 标签：python, compilation, bcrypt

我有以下设置：

*   Win7 x64
*   蟒蛇 3.3
*   Visual Studio 2012 终极版

我正在尝试使用 pip 安装 py-bcrypt。最初安装失败，因为它找不到`vcvars.bat`

通过修改[此处](http://web.archive.org/web/20101221084639/http://nukeit.org/compile-python-2-7-packages-with-visual-studio-2010-express/)的说明，我能够将 python 指向 VS2012 编译器，但是，当我第一次尝试安装时，我得到了一系列错误（见下面的日志）。当我重复安装以管道输出到日志文件时，安装报告成功。

但是，看起来安装的版本缺少一些关键功能 - 例如，该`bcrypt.genSalt()`方法存在并且工作正常但`bcrypt.hashpw()`未定义。

我很乐意使用预编译的二进制文件，但是，我找不到任何高于 2.7 的 python 版本

如何让 py-bcrypt 工作？

### 点日志：

（为简洁起见，我剪掉了它跳过的链接）

```
------------------------------------------------------------
c:\Python33\Scripts\pip-script.py run on 04/11/13 09:10:12
Downloading/unpacking py-bcrypt

  Getting page https://pypi.python.org/simple/py-bcrypt/
  URLs to search for versions for py-bcrypt:
  * https://pypi.python.org/simple/py-bcrypt/
  Getting page http://www.mindrot.org/projects/py-bcrypt/
  Getting page https://code.google.com/p/py-bcrypt/
  Getting page https://code.google.com/p/py-bcrypt/downloads/list
  Getting page http://www.mindrot.org/py-bcrypt.html
  Analyzing links from page https://pypi.python.org/simple/py-bcrypt/
    Found link https://pypi.python.org/packages/source/p/py-bcrypt/py-bcrypt-0.3.tar.gz#md5=ee85276d9ef7bce4086e3b12b182356f (from https://pypi.python.org/simple/py-bcrypt/), version: 0.3
  Analyzing links from page http://www.mindrot.org/projects/py-bcrypt/
    Found link http://www.mindrot.org/files/py-bcrypt/py-bcrypt-0.2.tar.gz (from http://www.mindrot.org/projects/py-bcrypt/), version: 0.2
  Analyzing links from page https://code.google.com/p/py-bcrypt/
  Analyzing links from page https://code.google.com/p/py-bcrypt/downloads/list
    Found link https://py-bcrypt.googlecode.com/files/py-bcrypt-0.3.tar.gz (from https://code.google.com/p/py-bcrypt/downloads/list), version: 0.3
  Analyzing links from page http://www.mindrot.org/projects/py-bcrypt/
    Found link http://www.mindrot.org/files/py-bcrypt/py-bcrypt-0.2.tar.gz (from http://www.mindrot.org/projects/py-bcrypt/), version: 0.2
  Using version 0.3 (newest of versions: 0.3, 0.3, 0.2, 0.2)
  Downloading py-bcrypt-0.3.tar.gz

  Downloading from URL https://pypi.python.org/packages/source/p/py-bcrypt/py-bcrypt-0.3.tar.gz#md5=ee85276d9ef7bce4086e3b12b182356f (from https://pypi.python.org/simple/py-bcrypt/)
  Running setup.py egg_info for package py-bcrypt

    running egg_info
    creating pip-egg-info\py_bcrypt.egg-info
    writing dependency_links to pip-egg-info\py_bcrypt.egg-info\dependency_links.txt
    writing pip-egg-info\py_bcrypt.egg-info\PKG-INFO
    writing top-level names to pip-egg-info\py_bcrypt.egg-info\top_level.txt
    writing manifest file 'pip-egg-info\py_bcrypt.egg-info\SOURCES.txt'
    warning: manifest_maker: standard file '-c' not found

    reading manifest file 'pip-egg-info\py_bcrypt.egg-info\SOURCES.txt'
    reading manifest template 'MANIFEST.in'
    writing manifest file 'pip-egg-info\py_bcrypt.egg-info\SOURCES.txt'
  Source in c:\users\my.user\appdata\local\temp\pip-build-my.user\py-bcrypt has version 0.3, which satisfies requirement py-bcrypt
Installing collected packages: py-bcrypt

  Running setup.py install for py-bcrypt

    Running command c:\Python33\python.exe -c "import setuptools;__file__='c:\\users\\my.user\\appdata\\local\\temp\\pip-build-my.user\\py-bcrypt\\setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record c:\users\my.user\appdata\local\temp\pip-sa52mw-record\install-record.txt --single-version-externally-managed
    running install
    running build
    running build_py
    creating build
    creating build\lib.win-amd64-3.3
    creating build\lib.win-amd64-3.3\bcrypt
    copying bcrypt\__init__.py -> build\lib.win-amd64-3.3\bcrypt
    running build_ext
    building 'bcrypt._bcrypt' extension

    creating build\temp.win-amd64-3.3
    creating build\temp.win-amd64-3.3\Release
    creating build\temp.win-amd64-3.3\Release\bcrypt
    C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Ic:\Python33\include -Ic:\Python33\include /Tcbcrypt/bcrypt_python.c /Fobuild\temp.win-amd64-3.3\Release\bcrypt/bcrypt_python.obj

    bcrypt_python.c

    bcrypt/bcrypt_python.c(56) : warning C4244: 'function' : conversion from 'long' to 'u_int8_t', possible loss of data

    bcrypt/bcrypt_python.c(57) : warning C4013: 'PyString_FromString' undefined; assuming extern returning int

    bcrypt/bcrypt_python.c(57) : warning C4047: 'return' : 'PyObject *' differs in levels of indirection from 'int'

    bcrypt/bcrypt_python.c(86) : warning C4013: 'bzero' undefined; assuming extern returning int

    bcrypt/bcrypt_python.c(95) : warning C4047: 'return' : 'PyObject *' differs in levels of indirection from 'int'

    bcrypt/bcrypt_python.c(113) : warning C4013: 'Py_InitModule3' undefined; assuming extern returning int

    bcrypt/bcrypt_python.c(113) : warning C4047: '=' : 'PyObject *' differs in levels of indirection from 'int'

    c:\users\my.user\appdata\local\temp\pip-build-my.user\py-bcrypt\bcrypt\bcrypt_python.c(115) : warning C4716: 'init_bcrypt' : must return a value

    C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Ic:\Python33\include -Ic:\Python33\include /Tcbcrypt/blowfish.c /Fobuild\temp.win-amd64-3.3\Release\bcrypt/blowfish.obj

    blowfish.c

    C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Ic:\Python33\include -Ic:\Python33\include /Tcbcrypt/bcrypt.c /Fobuild\temp.win-amd64-3.3\Release\bcrypt/bcrypt.obj

    bcrypt.c

    bcrypt/bcrypt.c(138) : warning C4996: '_snprintf': This function or variable may be unsafe. Consider using _snprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.

            C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\stdio.h(349) : see declaration of '_snprintf'

    bcrypt/bcrypt.c(161) : warning C4013: 'bzero' undefined; assuming extern returning int

    bcrypt/bcrypt.c(208) : warning C4267: '=' : conversion from 'size_t' to 'u_int8_t', possible loss of data

    bcrypt/bcrypt.c(248) : warning C4996: '_snprintf': This function or variable may be unsafe. Consider using _snprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.

            C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\stdio.h(349) : see declaration of '_snprintf'

    C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:c:\Python33\libs /LIBPATH:c:\Python33\PCbuild\amd64 /EXPORT:PyInit__bcrypt build\temp.win-amd64-3.3\Release\bcrypt/bcrypt_python.obj build\temp.win-amd64-3.3\Release\bcrypt/blowfish.obj build\temp.win-amd64-3.3\Release\bcrypt/bcrypt.obj /OUT:build\lib.win-amd64-3.3\bcrypt\_bcrypt.pyd /IMPLIB:build\temp.win-amd64-3.3\Release\bcrypt\_bcrypt.lib /MANIFESTFILE:build\temp.win-amd64-3.3\Release\bcrypt\_bcrypt.pyd.manifest

    LINK : error LNK2001: unresolved external symbol PyInit__bcrypt

    build\temp.win-amd64-3.3\Release\bcrypt\_bcrypt.lib : fatal error LNK1120: 1 unresolved externals

    error: command '"C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\link.exe"' failed with exit status 1120

    Complete output from command c:\Python33\python.exe -c "import setuptools;__file__='c:\\users\\my.user\\appdata\\local\\temp\\pip-build-my.user\\py-bcrypt\\setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record c:\users\my.user\appdata\local\temp\pip-sa52mw-record\install-record.txt --single-version-externally-managed:

    running install

running build

running build_py

creating build

creating build\lib.win-amd64-3.3

creating build\lib.win-amd64-3.3\bcrypt

copying bcrypt\__init__.py -> build\lib.win-amd64-3.3\bcrypt

running build_ext

building 'bcrypt._bcrypt' extension

creating build\temp.win-amd64-3.3

creating build\temp.win-amd64-3.3\Release

creating build\temp.win-amd64-3.3\Release\bcrypt

C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Ic:\Python33\include -Ic:\Python33\include /Tcbcrypt/bcrypt_python.c /Fobuild\temp.win-amd64-3.3\Release\bcrypt/bcrypt_python.obj

bcrypt_python.c

bcrypt/bcrypt_python.c(56) : warning C4244: 'function' : conversion from 'long' to 'u_int8_t', possible loss of data

bcrypt/bcrypt_python.c(57) : warning C4013: 'PyString_FromString' undefined; assuming extern returning int

bcrypt/bcrypt_python.c(57) : warning C4047: 'return' : 'PyObject *' differs in levels of indirection from 'int'

bcrypt/bcrypt_python.c(86) : warning C4013: 'bzero' undefined; assuming extern returning int

bcrypt/bcrypt_python.c(95) : warning C4047: 'return' : 'PyObject *' differs in levels of indirection from 'int'

bcrypt/bcrypt_python.c(113) : warning C4013: 'Py_InitModule3' undefined; assuming extern returning int

bcrypt/bcrypt_python.c(113) : warning C4047: '=' : 'PyObject *' differs in levels of indirection from 'int'

c:\users\my.user\appdata\local\temp\pip-build-my.user\py-bcrypt\bcrypt\bcrypt_python.c(115) : warning C4716: 'init_bcrypt' : must return a value

C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Ic:\Python33\include -Ic:\Python33\include /Tcbcrypt/blowfish.c /Fobuild\temp.win-amd64-3.3\Release\bcrypt/blowfish.obj

blowfish.c

C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -Ic:\Python33\include -Ic:\Python33\include /Tcbcrypt/bcrypt.c /Fobuild\temp.win-amd64-3.3\Release\bcrypt/bcrypt.obj

bcrypt.c

bcrypt/bcrypt.c(138) : warning C4996: '_snprintf': This function or variable may be unsafe. Consider using _snprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.

        C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\stdio.h(349) : see declaration of '_snprintf'

bcrypt/bcrypt.c(161) : warning C4013: 'bzero' undefined; assuming extern returning int

bcrypt/bcrypt.c(208) : warning C4267: '=' : conversion from 'size_t' to 'u_int8_t', possible loss of data

bcrypt/bcrypt.c(248) : warning C4996: '_snprintf': This function or variable may be unsafe. Consider using _snprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.

        C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\INCLUDE\stdio.h(349) : see declaration of '_snprintf'

C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:c:\Python33\libs /LIBPATH:c:\Python33\PCbuild\amd64 /EXPORT:PyInit__bcrypt build\temp.win-amd64-3.3\Release\bcrypt/bcrypt_python.obj build\temp.win-amd64-3.3\Release\bcrypt/blowfish.obj build\temp.win-amd64-3.3\Release\bcrypt/bcrypt.obj /OUT:build\lib.win-amd64-3.3\bcrypt\_bcrypt.pyd /IMPLIB:build\temp.win-amd64-3.3\Release\bcrypt\_bcrypt.lib /MANIFESTFILE:build\temp.win-amd64-3.3\Release\bcrypt\_bcrypt.pyd.manifest

LINK : error LNK2001: unresolved external symbol PyInit__bcrypt

build\temp.win-amd64-3.3\Release\bcrypt\_bcrypt.lib : fatal error LNK1120: 1 unresolved externals

error: command '"C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\amd64\link.exe"' failed with exit status 1120

----------------------------------------

Command c:\Python33\python.exe -c "import setuptools;__file__='c:\\users\\my.user\\appdata\\local\\temp\\pip-build-my.user\\py-bcrypt\\setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record c:\users\my.user\appdata\local\temp\pip-sa52mw-record\install-record.txt --single-version-externally-managed failed with error code 1 in c:\users\my.user\appdata\local\temp\pip-build-my.user\py-bcrypt

Exception information:
Traceback (most recent call last):
  File "c:\Python33\lib\site-packages\pip\basecommand.py", line 139, in main
    status = self.run(options, args)
  File "c:\Python33\lib\site-packages\pip\commands\install.py", line 271, in run
    requirement_set.install(install_options, global_options, root=options.root_path)
  File "c:\Python33\lib\site-packages\pip\req.py", line 1185, in install
    requirement.install(install_options, global_options, *args, **kwargs)
  File "c:\Python33\lib\site-packages\pip\req.py", line 592, in install
    cwd=self.source_dir, filter_stdout=self._filter_install, show_stdout=False)
  File "c:\Python33\lib\site-packages\pip\util.py", line 662, in call_subprocess
    % (command_desc, proc.returncode, cwd))
pip.exceptions.InstallationError: Command c:\Python33\python.exe -c "import setuptools;__file__='c:\\users\\my.user\\appdata\\local\\temp\\pip-build-my.user\\py-bcrypt\\setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record c:\users\my.user\appdata\local\temp\pip-sa52mw-record\install-record.txt --single-version-externally-managed failed with error code 1 in c:\users\my.user\appdata\local\temp\pip-build-my.user\py-bcrypt 
```

# python - 如何在python中使用全局

> ID：15944517
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:55:07.433
> 
> 标签：python, global-variables

```
name = "james"
class Hello:
    global name
    def __init__(self,namek):
        name = namek
        print name
    def sayhi(self):
        print 'Hello my name is', name
a = Hello('john')
a.sayhi() 
```

这里为什么在调用 a.sayhi() 时全局变量名称没有更改为 john，如下面的代码中 x 的值更改为 2

```
x = 50
def func():
    global x
    print('x is', x)
    x = 2
    print('Changed global x to', x)
func()
print('Value of x is', x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:56:31.653

您需要*在方法*中声明全局，而不是在类范围内：

```
class Hello:
    def __init__(self, namek):
        global name
        name = namek
        print name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:38:05.473

我想我应该添加这个，因为 Martijn 已经回答了你的问题。`global`要在没有关键字的情况下执行您正在执行的操作，您将执行以下操作：

```
class Hello:
    def __init__(self, namek):
        self.name = namek
        print self.name
    def sayhi(self):
        print 'Hello my name is', self.name
        return self.name 
```

运行时：

```
>>> name = "james"
>>> print name
james
>>> a = Hello('john')
john # Because we did print self.name in the __init__()
>>> name = a.sayhi()
Hello my name is john
>>> print name
john 
```

# c++ - 实现 De Boors 算法以在 B 样条上查找点

> ID：15944532
> 
> 赞同：9
> 
> 时间：2013-04-11T08:55:39.740
> 
> 标签：c++, algorithm, math, curve, bspline

我已经为此工作了几个星期，但无法让我的算法正常工作，我束手无策。这是我所取得的成就的说明：

![在此处输入图像描述](https://i.stack.imgur.com/0nIED.png)

如果一切正常，我希望最后有一个完美的圆形/椭圆形。

每次添加新的控制点（黄色）时，都会重新计算我的样本点（白色）。在 4 个控制点，一切看起来都很完美，当我在第 1 个控制点上添加第 5 个时，一切看起来还不错，但是在第 6 个控制点它开始偏离侧面，在第 7 个它跳到原点！

下面我将发布我的代码，其中`calculateWeightForPointI`包含实际的算法。供参考-[这是我要遵循的信息。](https://i.imgur.com/NYifeBt.png)如果有人能帮我看看，我会非常感激。

```
void updateCurve(const std::vector<glm::vec3>& controls, std::vector<glm::vec3>& samples)
{
    int subCurveOrder = 4; // = k = I want to break my curve into to cubics

    // De boor 1st attempt
    if(controls.size() >= subCurveOrder)
    {
        createKnotVector(subCurveOrder, controls.size()); 
        samples.clear(); 

        for(int steps=0; steps<=20; steps++)
        {
            // use steps to get a 0-1 range value for progression along the curve
                    // then get that value into the range [k-1, n+1]
            // k-1 = subCurveOrder-1
            // n+1 = always the number of total control points

            float t = ( steps / 20.0f ) * ( controls.size() - (subCurveOrder-1) ) + subCurveOrder-1;

            glm::vec3 newPoint(0,0,0);
            for(int i=1; i <= controls.size(); i++)
            {
                float weightForControl = calculateWeightForPointI(i, subCurveOrder, controls.size(), t);
                newPoint += weightForControl * controls.at(i-1);
            }
            samples.push_back(newPoint);
        }
    }

}

    //i = the weight we're looking for, i should go from 1 to n+1, where n+1 is equal to the total number of control points.
    //k = curve order = power/degree +1\. eg, to break whole curve into cubics use a curve order of 4
    //cps = number of total control points 
    //t = current step/interp value
float calculateWeightForPointI( int i, int k, int cps, float t )
    {
        //test if we've reached the bottom of the recursive call
        if( k == 1 )
        {
            if( t >= knot(i) && t < knot(i+1) )
                return 1;
            else
                return 0;
        } 

        float numeratorA = ( t - knot(i) );
        float denominatorA = ( knot(i + k-1) - knot(i) );
        float numeratorB = ( knot(i + k) - t );
        float denominatorB = ( knot(i + k) - knot(i + 1) );

        float subweightA = 0;
        float subweightB = 0;

        if( denominatorA != 0 )
            subweightA = numeratorA / denominatorA * calculateWeightForPointI(i, k-1, cps, t);
        if( denominatorB != 0 )
            subweightB = numeratorB / denominatorB * calculateWeightForPointI(i+1, k-1, cps, t);

        return subweightA + subweightB;

    }

    //returns the knot value at the passed in index 
    //if i = 1 and we want Xi then we have to remember to index with i-1
float knot(int indexForKnot)
    {
         // When getting the index for the knot function i remember to subtract 1 from i because of the difference caused by us counting from i=1 to n+1 and indexing a vector from 0
         return knotVector.at(indexForKnot-1);
    }
    //calculate the whole knot vector
void createKnotVector(int curveOrderK, int numControlPoints)
    {
        int knotSize = curveOrderK + numControlPoints;
        for(int count = 0; count < knotSize; count++)
        {
            knotVector.push_back(count);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T12:31:59.110

您的算法似乎适用于我尝试过的任何输入。您的问题可能是控制点不在应有的位置，或者它们没有正确初始化。看起来有两个控制点，位于左下角下方的一半高度。

![正确的](https://i.stack.imgur.com/4NbCR.png) ![错误的](https://i.stack.imgur.com/lhMw4.png)

# python-2.7 - 如何在 Tkinter 中保持窗口焦点在新的 Toplevel() 窗口上？

> ID：15944533
> 
> 赞同：10
> 
> 时间：2013-04-11T08:55:43.133
> 
> 标签：python-2.7, tkinter

我目前正在编写一个 win32gui python27 应用程序（我正在运行 win7）。我想知道是否可以从我的 mainloop() 创建一个新窗口并保持对它的关注，可能是通过停止主循环并停用根窗口。在一种伪代码示例中：

```
root=Tk()
#put in some widgets, such as statusbars, tkfileDialog widgets etc...
O=Toplevel()
OptionMenu(O) #wait for user to make his choices; btw: OptionMenu is a class...
tkFileDialog.askdirectory(...) #THEN interpret this line 
```

基本上，我想实现 tkfiledialog 和 tksimpledialog 中的大多数小部件所做的事情：
例如从主窗口窃取焦点（不仅仅是控制台焦点，wm 焦点）并恢复主循环，直到所有内容之后, OptionMenu 已解决。我希望我可以让你们清楚我的目标，我几周前才开始 Tkinter 编程，可能会混淆和误解它背后的一些概念......
就是这样，伙计们！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-11T10:48:59.740

您正在寻找的概念称为“抓取”。Tkinter 支持多种方法的抓取。例如，要在顶层设置本地抓取，您将执行`my_window.grab_set()`. 本地抓取是此窗口从您的应用程序中的所有其他窗口抓取焦点的地方，但仅适用于您的应用程序。

您还可以进行全局抓取，这有效地冻结了您的整个显示，除了您的特定窗口。这是非常危险的，因为如果您的代码中有错误，您可以轻松地将自己锁定在自己的计算机之外。

*抓取不会*停用 mainloop 功能。这必须为您的窗口运行以处理事件。它只是将所有事件重定向到有抓取的窗口。

有关更多信息，请在此处阅读有关 grab_set 和其他抓取命令：http: [//effbot.org/tkinterbook/widget.htm#Tkinter.Widget.grab_set-method](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.grab_set-method)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-04T01:24:44.597

`grab.set()`对我的需求非常激进，并阻止了正常的窗口操作。这个答案是让一个 Tkinter 窗口在其他 Tkinter 窗口之上弹出。

在我的应用程序中，我有一个大窗口`toplevel`，它调用一个小得多的窗口`top2`，最初出现在`toplevel`.

如果用户在`toplevel`窗口内单击，它将获得焦点并扼杀小得多的`top2`窗口，直到`toplevel`窗口被拖出它为止。

解决方案是单击按钮`toplevel`重新启动`top2`。`top2`open 函数知道它已经在运行，因此只需将其提升到顶部并为其提供焦点：

```
def play_items(self):
    ''' Play 1 or more songs in listbox.selection(). Define buttons:
            Close, Pause, Prev, Next, Commercial and Intermission
    '''

    if self.top2_is_active is True:
        self.top2.focus_force()     # Get focus
        self.top2.lift()            # Raise in stacking order
        root.update()
        return                      # Don't want to start playing again 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-13T18:33:37.797

在 Mac OS El Capitan 上，以上建议都不适合我。但基于这些提示，这样做：

```
class Window(Tk.Toplevel):
    ...
    def setActive(self):
        self.lift()
        self.focus_force()
        self.grab_set()
        self.grab_release()
    ... 
```

# python - 错误 dateTimeField 输入格式

> ID：15944536
> 
> 赞同：5
> 
> 时间：2013-04-11T08:55:52.363
> 
> 标签：python, django

为什么 django 给我一个错误：

```
TypeError: __init__() got an unexpected keyword argument 'input_formats' at 
start_time=models.DateTimeField(input_formats='%d-%m-%y %H:%M') 
```

输入格式有问题吗？如果我想要格式输入，我该怎么办`date - month - year hour minute`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:02:49.123

您混淆了[模型 DateTimeFields](https://docs.djangoproject.com/en/dev/ref/models/fields/#datetimefield)和[表单 DateTimeFields](https://docs.djangoproject.com/en/dev/ref/forms/fields)。模型不接受`input_formats`参数，形式接受。

来自[使用表单](https://docs.djangoproject.com/en/dev/topics/forms/#working-with-forms)：表单库和 API（这听起来像你想要的）是为了帮助你创建 HTML 表单、进行输入验证等。

来自[模型和数据库](https://docs.djangoproject.com/en/dev/topics/db/#module-django.db)：模型是关于您的数据的单一、权威的数据源。它包含您存储的数据的基本字段和行为。通常，每个模型映射到单个数据库表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:04:05.567

[`models.DateTimeField`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.DateTimeField)不接受任何传递给它的参数，称为`input_formats`.

您正在寻找的是[`form.DateTimeField`](https://docs.djangoproject.com/en/dev/ref/forms/fields/#datetimefield)，例如：

```
form.DateTimeField(input_formats=['%d-%m-%y %H:%M',]) 
```

格式必须为`list`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:04:59.733

1.  `input_formats`是`form.DateTimeField()`而不是的属性`models.DateTimeField()`

2.  根据[Doc](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.DateField.input_formats) `input_formats`必须是列表或元组。

# c# - 为管理部分创建调查问题/答案

> ID：15944541
> 
> 赞同：0
> 
> 时间：2013-04-11T08:55:57.817
> 
> 标签：c#, asp.net

我正在为我的公司开发一个应用程序，我一直在思考什么是最好的方法。

该公司已经有一个页面用于调查大约 15 个带有多项选择的问题。现在我被要求开发一个应用程序，以便他们可以从管理部分修改现有问题及其选项，也可以添加更多问题和选项。

我不确定这样做的最佳方法是什么。我正在考虑在管理部分创建一个页面，他们可以在其中查看现有问题和答案选项，如果他们修改它，我可以直接在数据库中更改它，如果他们添加更多问题，我可以在数据库中创建自定义问题字段. 对于答案选项，我不会在数据库中创建任何字段，因为我将动态生成选项，如文本框、复选框、单选按钮等。当用户选择答案时，我会将选定的答案放入数据库中。

# 编辑

=======

# 我只想为管理员提供 3 个添加选项的选项（复选框、收音机、文本框）

我对如何使用泛型动态创建控件感到困惑。像管理员一样可以在方法中传递值，例如 CreateControls(TextBox, NoOfOptions, List)

请原谅我没有在我的问题中添加任何代码，因为我还没有开始研究这个并且停留在思考过程的第一阶段。

我为此应用程序使用 VS2010、.Net 4.0、SQL server 208 R2。

请指教。任何工作示例链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T09:50:25.700

最漂亮的方法是编写一个 web 控件。将它放在中继器的 ItemTemplate 中。转发器将完成数据绑定工作，其中 web 控件将呈现每个问题的问题和答案字段。

我现在可以想象的是，您的数据源（绑定到中继器必须至少具有：

1.  QuestionID - 用于识别问题
2.  问题 - 这包含问题
3.  ResponseType - 这只是一个标志，用于确定是否将文本框、单选框或复选框呈现为答案字段/s

Web 控件必须至少具有以下属性：

1.  问题ID
2.  问题
3.  响应类型
4.  用户回答
5.  选择 - 选择的集合

在repeater的itemdatabound事件期间，获取itemtemplate中的webcontrol实例。将 questionid 和 question 从绑定的 DataItem 分配给相应的 webcontrol 属性。然后检查AnswerType。如果它是单选框或复选框，则从 db/xml 中检索此特定 questionid 的选项，并将其分配给 webcontrol Choices 属性。

现在在 webcontrol 的`RenderContents`事件中：

1.  写下问题
2.  如果 AnswerType 是 textbox，则写入 textarea 或 textbox 元素
3.  如果 AnswerType 是单选或复选框，则迭代 Choices 属性以呈现相应的输入标签。

无论如何，如果您使用这种方法，管理员可以为每个问题设置无限数量的选择。每个问题都可以具有灵活性。图像可以附加到问题上，甚至像那些智商测试那样的选择。

但是，在 web 控件中还有很多代码需要编写，例如维护回发数据、字段验证等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:34:09.160

我对此有一个想法。我已经完成了这种功能，但在我的情况下，每个自定义问题仅与文本框绑定。

在您的情况下，我们可以按照以下步骤操作：

**管理员端：**

使用唯一值指定每个控件，它可以是数字或控件名称。将其保存在带有问题 ID 的表中。

**客户端：**

1.) 采用中继器。在项目模板中采用以下控件：

a.)标签（您的自定义问题）

b.）文本框（可见错误）

c.)复选框（可见错误）

d.) 单选按钮（可见错误）等。

2.)将此转发器与问题表绑定。

3.) 现在触发 rowdatabound 事件并根据问题 id 设置控件的可见性。

如果您有任何疑问，请询问。

**更新 ：**

现在请检查我昨天讨论过的整个过程的实施：

**XML 文件用作测试数据库：**

```
<?xml version="1.0" encoding="iso-8859-1"?>

 <catalog>
  <cd>
  <id>1</id>
  <title>Question 1</title>
  <ctrl>1</ctrl>
 </cd>
 <cd>
  <id>2</id>
  <title>Question change</title>
  <ctrl>2</ctrl>
 </cd>
  <cd>
   <id>3</id>
   <title>Question 3</title>
  <ctrl>3</ctrl>
  </cd>
 <cd>
   <id>4</id>
   <title>Question 4</title>
  <ctrl>2</ctrl>
 </cd> 
```

**ASPX 页面：**

```
 <asp:Repeater ID="Repeater1" runat="server" 
        onitemdatabound="Repeater1_ItemDataBound">
        <HeaderTemplate>
            <table>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <asp:Label ID="Label1" runat="server" Text='<%#Eval("id") %>'></asp:Label>
                    <asp:HiddenField ID="HiddenField1" runat="server" Value='<%#Eval("ctrl") %>' />
                </td>
                 <td>
                  <asp:Label ID="Label2" runat="server" Text='<%#Eval("title") %>'></asp:Label>
                 </td>
                <td>
                    <asp:TextBox ID="TextBox1" runat="server" Visible="false"></asp:TextBox>
                </td>
                <td>
                    <asp:RadioButton ID="RadioButton1" runat="server" Checked="true" Text="YES" TextAlign="Left" Visible="false" />
                    <asp:RadioButton ID="RadioButton2" runat="server" Text="NO" TextAlign="Left" Visible="false" />
                </td>
                <td>
                    <asp:CheckBox ID="CheckBox1" runat="server" Visible="false" />
                </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
      </asp:Repeater> 
```

**CS文件：**

```
if (!IsPostBack)
    {
        DataSet ds = new DataSet();
        ds.ReadXml(MapPath("XMLFile.xml"));
        Repeater1.DataSource = ds;
        Repeater1.DataBind();
    }

protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
    {
        HiddenField ctrl = (HiddenField)e.Item.FindControl("HiddenField1");
        if (ctrl.Value == "1")//1 for Textbox
        {
            TextBox txtCtrl = (TextBox)e.Item.FindControl("TextBox1");
            txtCtrl.Visible = true;
        }
        else if (ctrl.Value == "3")//3 for Radio Button
        {
            RadioButton rdbYCtrl = (RadioButton)e.Item.FindControl("RadioButton1");
            RadioButton rdbNCtrl = (RadioButton)e.Item.FindControl("RadioButton2");
            rdbYCtrl.Visible = true;
            rdbNCtrl.Visible = true;
        }
        else if(ctrl.Value == "2")//2 for Chackbox
        {
             CheckBox chkCtrl = (CheckBox)e.Item.FindControl("CheckBox1");
             chkCtrl.Visible = true;
        }

    }
} 
```

希望现在对您有所帮助:-)

# spring - Jackson Json解析休眠类的异常

> ID：15944543
> 
> 赞同：1
> 
> 时间：2013-04-11T08:56:04.007
> 
> 标签：spring, hibernate, jpa, jackson

我正在使用 Spring 3 + JPA 2 (hibernate Impl) + Spring MVC 的 contentNegotiationResolver 基于 Json 媒体类型，并在利用 Spring 框架的 org.springframework.web.servlet.view.json.MappingJacksonJsonView 时抛出了以下异常堆栈跟踪

*

```
org.codehaus.jackson.map.JsonMappingException: No serializer found for class org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS) ) (through reference chain:..... )
    at org.codehaus.jackson.map.ser.StdSerializerProvider$1.serialize(StdSerializerProvider.java:62)
    at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:268)
    at org.codehaus.jackson.map.ser.BeanSerializer.serializeFields(BeanSerializer.java:146)
    at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:118)
    at org.codehaus.jackson.map.ser.ContainerSerializers$IndexedListSerializer.serializeContents(ContainerSerializers.java:236)
    at org.codehaus.jackson.map.ser.ContainerSerializers$IndexedListSerializer.serializeContents(ContainerSerializers.java:189)
    at org.codehaus.jackson.map.ser.ContainerSerializers$AsArraySerializer.serialize(ContainerSerializers.java:111)
    at org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:296)
    at org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:224)
    at org.codehaus.jackson.map.ObjectMapper.writeValue(ObjectMapper.java:925)
    at org.springframewor 
```

*

以下线程中提供的解决方案不起作用（使用 Json AutoDetect）对我不起作用。

[序列化 Hibernate 对象时抛出奇怪的 Jackson 异常](https://stackoverflow.com/questions/4362104/strange-jackson-exception-being-thrown-when-serializing-hibernate-object)

提供 Json AutoDetect 并在 getter 方法上显式提供 Json 属性注释不起作用 - 它仍然解析所有属性。此外，我还成功地避免了使用 @JsonIgnore 的 JPA Entity 类的某些属性，这在本质上是一种递归或父/子关系。我也尝试过分离实体类，但没有运气。

在我的实体类中，Jackson 解析器需要做的就是解析三个简单的 String 属性，其余属性用 @JsonIgnore 标记

如果你们中的任何人遇到类似的问题并解决了，请告诉我。

# google-apps-script - 如何在 Google Apps 脚本中查找不属于我的文件

> ID：15944544
> 
> 赞同：4
> 
> 时间：2013-04-11T08:56:06.313
> 
> 标签：google-apps-script

在 Google Drive 中，可以搜索“不属于我”的文件。我需要从 Google Apps 脚本访问它。我已经尝试过 DocsList.find("Not 'me' in owner"); 这似乎是在驱动器 API 中执行此操作的方法，但没有成功（事实上，这让我作为所有者获得了我的文件。）我还用我的电子邮件地址替换了我，带引号和不带引号，但再次没有成功。

有谁知道这是否可能（除了通过迭代所有文件并手动检查 getOwner().getEmail() 之外，鉴于此特定用户拥有大量文件，这将花费太长时间。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-10T13:31:29.747

我认为目前更新的答案是使用 DriveApp.searchFiles(params) （[https://developers.google.com/apps-script/reference/drive/drive-app#searchFiles(String)](https://developers.google.com/apps-script/reference/drive/drive-app#searchFiles(String))）。代码类似于：

```
 // Log the name of every file in the user's Drive that shared with me
 var files = DriveApp.searchFiles('sharedWithMe');
 while (files.hasNext()) {
   var file = files.next();
   Logger.log(file.getName()); 
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:15:16.883

此函数将返回与您共享的所有文件的数组。它使用[高级驱动服务](https://developers.google.com/apps-script/advanced/drive)，使用前必须[启用](https://developers.google.com/apps-script/guides/services/advanced)该服务。

```
/**
 * Get array of files on user's Google Drive that have been shared with them.
 * From https://stackoverflow.com/a/15947340/1677912
 *
 * @returns   {Array}   Array of file resources
 *                      (see https://developers.google.com/drive/v2/reference/files#resource)
 */
function getSharedWithMe() {
  var optionalArgs = {q:"sharedWithMe=true"};
  var sharedFiles = Drive.Files.list(optionalArgs);
  debugger;  // pause in debugger
  return sharedFiles.items;
} 
```

通过使用 Google Drive SDK “Explorer”，您无需代码也可以做同样的事情。

请参阅使用此技术获取已删除文件列表的[先前答案。](https://stackoverflow.com/a/14541247/1677912)

您可以在Files:list 的 Google Drive SDK 文档页面底部找到[Files List API Explorer 。](https://developers.google.com/drive/v2/reference/files/list#try-it)有关搜索词的信息，请参阅[搜索文件](https://developers.google.com/drive/search-parameters)。出于我们的目的，我们将只使用`sharedWithMe`.

![截图查询](https://i.stack.imgur.com/JECrc.png)

如果您将“字段”留空，您将获得有关共享文件的所有信息。您可以使用难以看到的减号标签展开和折叠结果。但是限制输出是有帮助的。我用过`items(id,selfLink,owners/displayName)`。看起来是这样的：

![截图结果](https://i.stack.imgur.com/TrEZ9.png)

# java - JSF EL 和 + 或条件

> ID：15944545
> 
> 赞同：0
> 
> 时间：2013-04-11T08:56:06.737
> 
> 标签：java, jsf, el

在 EL 中格式化以下条件的最佳方法是什么？

```
#{bean.booleanValue and (bean.stringValue ne 'MYCLOSED' or bean.stringValue ne 'ALLCLOSED')}" 
```

括号似乎不被识别为有效表达式，但要求语句在逻辑上呈现如下：

```
bean.booleanValue && (bean.stringValue != 'MYCLOSED' || bean.stringValue != 'ALLCLOSED') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:54:19.387

您可以对第一个表达式使用三元运算符，如果它的计算结果为 true，则计算表达式的其余部分，否则返回 false。

例如`bean.booleanValue ? bean.stringValue ne 'MYCLOSED' or bean.stringValue ne 'ALLCLOSED' : false;`

这是我们目前在单个表达式中处理多个条件时使用的。

# android - 在 Eclipse 中调试 Android 设备时 PC 崩溃

> ID：15944547
> 
> 赞同：3
> 
> 时间：2013-04-11T08:56:12.310
> 
> 标签：android, eclipse

大约一天一次或两次，我的电脑会崩溃。经过大量时间调查和观察可能导致此问题的事件后，我相当有信心，如果 Eclipse 正在运行，我的设备已连接到计算机并且我已经调试了我的应用程序至少一次，就会发生这种情况。

我很茫然。操作系统事件日志中没有存储任何内容，因此这可能与硬件有关。也许与USB有关。它似乎也只有在设备连接到 USB 端口时才会发生。

关于如何进一步调查的任何建议？我尝试更新我的 USB 驱动程序，但来自华为的驱动程序是最新的并且没有帮助，即使 Android SDK 附带了一个新版本但它与我的设备不兼容。或者 Eclipse ADT 部分中是否存在可能导致这种情况的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:58:02.970

我做了很多事情，但不确定是否有帮助。我会在白天知道问题是否会再次出现。同时，如果您遇到此问题，请尝试以下操作：

1.  将 Eclipse 更新到最新版本。
2.  运行 Android SDK 管理器并更新任何表明存在较新版本的内容。
3.  如果您最近安装了 Google Plugin for Eclipse，请将其卸载。单击帮助 > 关于 Eclipse > 安装详细信息。选择 Google Plugin for Eclipse，然后将其卸载。
4.  在 DOS 窗口中，运行 sfc /scannow。执行此操作 3 次，在每次扫描之间重新启动计算机。
5.  扫描您的硬盘驱动器以查找 adb.exe。应该只有一个，它应该在 Android SDK 文件夹中。如果您的设备制造商提供了额外的设备，请将其替换为 Android 设备。
6.  下载旧版本的 adb.exe 并替换当前版本（如果旧版本）。您可以在以下位置下载它：

[平台工具_r12-windows.zip](http://dl-ssl.google.com/android/repository/platform-tools_r12-windows.zip)

只需确保备份最新的 adb.exe。我怀疑最新的 adb.exe 中有一个错误，导致它在通过 USB 访问设备时写入不可执行的内存。

如果问题再次出现，我会在这里添加更多建议，我会尝试更多的东西。

**更新：**

我运行了 Android SDK Manager 并将所有软件包更新为最新版本。我还对我的设备进行了出厂重置，让它焕然一新。仅此一项就可能解决了问题。该设备的内存已经有些低了。也许设备的内部 USB 驱动程序在某些时候崩溃和/或将垃圾数据发送到不知道如何正确处理它的 PC 端的 USB 驱动程序。大多数 PC 的 USB 驱动程序将由设备制造商提供，尽管 Google 确实提供了一个，但仅限于少数设备。到目前为止，事情似乎进展顺利，但一天之内就会知道。

作为副作用，更新 SDK 似乎也纠正了我在 Google Chrome 中遇到的很多问题。

# javascript - 将 onclick 事件添加到禁用字段

> ID：15944548
> 
> 赞同：1
> 
> 时间：2013-04-11T08:56:12.670
> 
> 标签：javascript, html, jsf, onclick

我正在使用自定义生成器的表单。表单在文件中指定，该文件被解析并且 HTML 元素将由 JSF 2.x 以编程方式生成，例如 Apache MyFaces 的 HtmlInputText。

在我们的应用程序中，我们有一个只读用户角色。对于那些用户，我们尝试使所有输入选项`disabled`。在`input`字段上我们设置 html`readonly`属性，对于其他没有字段`readonly`属性的元素`select`，我们设置`disabled`属性。

不幸的是，设置`disabled=disabled`也会使所有 javascript 事件失效。现在，我需要`on click`在禁用的选项字段中触发 javascript 函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:43:00.813

将禁用的元素包装在另一个支持 onclick 属性的元素中。一个很好的例子是`<h:panelGrid/>`

```
 <h:panelGrid style="width=20px" onclick="foo.myBar()">  
      <h:someComponent disabled="true"/>
   </h:panelGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:55:54.347

我不认为，你可以做很多事情。

尽管有一个丑陋的解决方案。

将`position:absolute`非禁用容器放在禁用元素上，即

```
<select disabled="disabled" >
  <option>one</option>
  <option>two</option>
  <option>three</option>
</select>
<div onclick="alert('s')" 
  style="width:56px;position:absolute; top:1.7%; left:1.6%;height:18px;" >
</div> 
```

其中容器顶部和左侧的值取决于选择的位置

看到这个[小提琴](http://jsfiddle.net/y9DTf/)

# prolog - Prolog - 如何理解列表

> ID：15944550
> 
> 赞同：0
> 
> 时间：2013-04-11T08:56:17.357
> 
> 标签：prolog

我不太了解，如何理解这个事实`p([H|T], H, T)`。我知道 C/C++/Java 等。但这看起来不同。因此，当我将第一个参数传递给“函数”p 时，它将它分成 H 和 T 并使其可以通过这个变量访问？我不知道如何从逻辑上理解这一点。

> [http://www.doc.gold.ac.uk/~mas02gw/prolog_tutorial/prologpages/lists.html](http://www.doc.gold.ac.uk/~mas02gw/prolog_tutorial/prologpages/lists.html)

```
p([H|T], H, T).

Lets see what happens when we ask some simple queries.

?- p([a,b,c], X, Y).

X=a

Y=[b,c]

yes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:05:31.547

您所指的页面说：“考虑以下事实。

`p([H|T], H, T).`"

所以我们必须把这当作一个事实。这意味着，这就像有一个谓词

```
p([H|T], H, T):- true.         % or,  p(L,H,T) :- L=[H|T]. 
```

现在，当您查询时`p([a,b,c], X, Y).`，将一个放在另一个旁边：

```
p([a,b,c], X, Y).              % a query
p([H|T],   H, T) :- true.      % a rule's clause: _head_ :- _body_. 
```

等价被注明：`[a,b,c] = [H|T]`, `X = H`,`Y = T`并被视为统一方程。第一个被进一步翻译成

```
a = H                          % list's head element
[b,c] = T                      % list's tail 
```

因为`[A|B]`代表一个列表，其中包含列表`A`的*头部*元素和`B`列表的*尾部*，即除了头部之外的所有其余元素。`H`并且`T`是这些逻辑变量的常用助记名称。

所以总的来说，我们得到`X = H = a`, `Y = T = [b,c]`。

这个过程就是所谓的查询和规则头部的*统一*`p`（这两件事都以“函子”开头，并且都有 3 个“参数”）。

由于查询和规则“子句”的头部匹配（具有相同的函子和相同数量的参数），并且它们的参数都成功地成对地统一，使用上面的*替换*，我们只需要证明该规则的子句的主体（因此被选中）。

既然是`true`，我们立即成功，成功替换为我们的结果。

这就是 Prolog 的工作原理。

**TL;DR**：是的，当您`p(L,H,T)`使用给定的列表调用时`L`，它将被*解构*为它的 head`H`和 tail `T`。但是您可以使用给定的列表`T`、值`H`和变量调用它`L`，然后将从头部和尾部*构造一个新列表。*如果`L`也给出了，它会检查它的头部是否是`H`，它的尾部是否是`T`。

这是因为 Prolog 的统一是双向的：`A = B`与`B = A`. 与变量的统一就像设置该变量，与一个值的统一就像检查与该值的（结构）相等性。

呼唤`p(L,H,T)`真的就等于统一`L = [H|T]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:09:38.930

在 Prolog 中，我们有*关系*，类似于关系数据库。

然后 p/3 它是一个*列表*（第一个参数）、它的 head和它的 tail之间的*关系*。*`H``T`*

 *教程的作者恰当地使用了描述性和合成符号作为变量。

从语法上讲，变量是以大写字母开头的符号，可以取*任何*值，但*只能*取一次（即不能“重新赋值”）。*

# silverlight - 如何数据绑定 Chart 的 PointCollection？

> ID：15944552
> 
> 赞同：0
> 
> 时间：2013-04-11T08:56:22.990
> 
> 标签：silverlight, xaml, data-binding

我在silverlight中有这个简单的图表：

```
<toolkit:Chart HorizontalAlignment="Left" Margin="0,10,0,0" Title="Chart Title" VerticalAlignment="Top" Height="280" Width="390" Name="MyChart">
            <toolkit:ColumnSeries DependentValuePath="X" IndependentValuePath="Y">
                <toolkit:ColumnSeries.ItemsSource>
                    <PointCollection x:Name="PointColl">
                        <Point>1,10</Point>
                        <Point>2,20</Point>
                        <Point>3,30</Point>
                        <Point>4,40</Point>
                    </PointCollection>
                </toolkit:ColumnSeries.ItemsSource>
            </toolkit:ColumnSeries>
        </toolkit:Chart> 
```

并在代码中设置数据绑定，如下所示：

```
 private ObservableCollection<Point> _myPointCollection = new ObservableCollection<Point>();
        public ObservableCollection<Point> MyPointCollection { get { return _myPointCollection; } }

        public MainPage()
        {
            InitializeComponent();

            rand = new Random(); 

            MyPointCollection.Add( new Point(0, rand.Next(0, 50)));
            MyPointCollection.Add( new Point(0, rand.Next(1, 50)));    
            MyPointCollection.Add( new Point(0, rand.Next(2, 50)));
            MyPointCollection.Add( new Point(0, rand.Next(3, 50)));

            MyChart.DataContext = this;
        } 
```

但是我在 xaml 中的什么位置告诉我在哪里绑定数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:03:09.083

尝试：

```
<toolkit:Chart HorizontalAlignment="Left" Margin="0,10,0,0" Title="Chart Title" VerticalAlignment="Top" Height="280" Width="390" Name="MyChart">
        <toolkit:ColumnSeries DependentValuePath="X" IndependentValuePath="Y" ItemsSource={Binding MyPointCollection}>

    </toolkit:Chart> 
```

但是，如果您希望在更改整个 MyPointCollection 属性时更新图表，则必须引发 PropertyChanged 事件。当您向集合添加或删除点时，您不必这样做。

# serialization - JSON.NET 行序列化 winrt

> ID：15944553
> 
> 赞同：0
> 
> 时间：2013-04-11T08:56:25.857
> 
> 标签：serialization, windows-8, line, json.net, observablecollection

我在序列化 ObservableCollection of Lines (Shape) 时遇到了一些麻烦。我正在为 Windows RT 开发，我正在使用 JSON.NET v5.02。我收到以下代码的以下异常：

```
ObservableCollection<Line> lines;
//some code
string linesString = JsonConvert.SerializeObjectAsync(lines); // problem 
```

> mscorlib.dll 中发生类型异常，`Newtonsoft.Json.JsonSerializationException` 但未在用户代码中处理
> 
> 附加信息：从“Windows.UI.Xaml.Shapes.Line”上的“X1”获取值时出错。
> 
> 如果有这个异常的处理程序，程序可以安全地继续。

这是一个错误，是否有可能的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:29:36.997

你的问题是跨线程问题。使用`await JsonConvert.SerializeObjectAsync(lines);`该函数时将在另一个线程（不是 UI 线程）中执行。由于 a`Windows.UI.Xaml.Shapes.Line`是 UIElement 并且是在 UI（主）线程中创建的，因此您无法在另一个线程中访问对象的属性。解决方案是将其转换为没有此限制的更简单的对象。

此外，a`Windows.UI.Xaml.Shapes.Line`包含很多信息，Visibility，IsEnabled等，我想你只需要X1，X2，Y1和Y2。所以你可以使用这个：

```
string s = await JsonConvert.SerializeObjectAsync(lines
             .Select(l => new 
                     {
                         l.X1,
                         l.X2,
                         l.Y1,
                         l.Y2
                     }).ToArray()); 
```

通过这种方式，您可以在 UI（主）线程中获得所需的属性。然后将该数组传递给序列化函数。这样就可以了。

`string s`现在将包含：

> [{"X1":20.0,"X2":20.0,"Y1":40.0,"Y2":40.0},{"X1":20.0,"X2":20.0,"Y1":40.0,"Y2": 40.0},{"X1":20.0,"X2":20.0,"Y1":40.0,"Y2":40.0},{"X1":20.0,"X2":20.0,"Y1":40.0,"Y2 ":40.0}]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:27:27.190

我不确定 Json.Net 是否允许序列化框架类对象。我试过这个。

```
public class CustomLine
{
    public double X1 { get; set; }
    public double X2 { get; set; }
    public double Y1 { get; set; }
    public double Y2 { get; set; }
} 
```

我更改了`Line`to`CustomLine`行。如果要使用`Line`类，请检索属性`X1, X2, Y1, Y2`，然后将其分配给`CustomLine`类属性。

# jquery - 使用 Jquery 和 mvc 提交表单

> ID：15944559
> 
> 赞同：7
> 
> 时间：2013-04-11T08:56:43.247
> 
> 标签：jquery, asp.net-mvc

我正在尝试使用 jQuery 提交表单。我的代码如下

```
<form id="sampleForm" action="@Url.Action("submitSearch","Home")">
    //Form Fields  textbox
    <button id="test" type="submit" ></button>
</form> 
```

里面`document.ready`有脚本

```
$("#sampleForm").submit(function () {
    console.log("Success");
}); 
```

但是，当单击 sumbit 时，什么也没有发生。

我尝试了下面的代码，看看我是否正确映射并且工作正常

```
$(document).on("click", "#search-button", function () {
    console.log("Success");
}); 
```

提交表单时缺少什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T09:05:10.370

```
$("#test").click(function(){
   $("#sampleForm").submit();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T12:42:03.823

是否有可能您正在提交但页面正在重新加载并且控制台日志已清除？

另外，为了澄清...

```
$("#sampleForm").submit(function () {
    console.log("Success");
}); 
```

这会在提交 sampleForm 时连接一个事件来做一些事情......

```
$('#sampleForm').submit(); 
```

实际上触发了提交事件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:50:27.267

应该是这样的

```
<input id="test" type="submit" ></input> 
```

而不是这个

```
<button id="test" type="submit" ></button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:09:17.113

这是标签的语法`button`：

```
<button type="submit" value="Submit">Submit</button> 
```

如果您不喜欢或不需要放置按钮的文本，而只需要运行表单的事件提交，则不能这样做：

html:

```
<form id="sampleForm" action="@Url.Action("submitSearch","Home")" method="get">
    //Form Fields  textbox
</form> 
```

js：

```
// where needed
$('#sampleForm').submit();
// or
$('#sampleForm').trigger('submit'); 
```

但始终需要输入任何标签以与 IE 兼容

# visual-studio-2012 - 在当前包源中找不到包

> ID：15944560
> 
> 赞同：0
> 
> 时间：2013-04-11T08:56:45.317
> 
> 标签：visual-studio-2012, nuget, nuget-package

这一定是一个简单的问题，但看不出有什么问题。从 VS2012 管理包对话框打开，但似乎没有可用的在线包：“在当前包源中找不到包”。包源为：

```
https://nuget.org/api/v2/ 
```

这是正确的设置，是否还有其他遗漏？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T10:45:45.347

奇怪的是，我添加了一个额外的（不存在的）包源（通过设置），两者都启用了。没有效果。但是在删除新添加的条目后，一切都恢复正常了。享受！

# sql - 基于同一张表条件的 DB2 查询

> ID：15944563
> 
> 赞同：0
> 
> 时间：2013-04-11T08:56:57.037
> 
> 标签：sql, db2

尝试根据另一行的条件提取行时遇到问题。样品表：

```
GroupID         |    Name       |    Salary    |    Car

--------------------------------------------------------------------------------
 9009           |    Isaac      |   10,000     |   Honda
 9009           |    Ricky      |              |   Nissan
 9080           |    Patrick    |   20,000     |   Ferrari
 9080           |    Susan      |   30,000     |   Nissan 
```

问题：如果我想提取这样的数据，我应该如何查询：

```
GroupID         |    Name       |    Salary    |    Car

--------------------------------------------------------------------------------
 9009           |    Isaac      |   10,000     |   Honda
 9080           |    Patrick    |   20,000     |   Ferrari 
```

基于条件`car = Nissan`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:17:28.383

尝试这个：

```
SELECT GroupID, Name, Salary, Car
  FROM tableName
 WHERE GroupID IN (SELECT GroupID
                     FROM tableName
                    WHERE Car = 'Nissan') -- << Your input
   AND car <> 'Nissan' 
```

**[在此处](http://publib.boulder.ibm.com/infocenter/zos/basics/index.jsp?topic=/com.ibm.db2z.doc.intro/db2z_subqueries.html)**阅读有关子查询的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:23:33.403

```
SELECT * FROM yourTable where Car <> 'Nissan'; 
```

似乎会做你所要求的。您需要更明确地说明您要在这里实现的目标。

# css - div 从页面底部开始

> ID：15944564
> 
> 赞同：0
> 
> 时间：2013-04-11T08:57:01.927
> 
> 标签：css, html

希望你能帮助我。我是荷兰人，所以我的英语不是很好。

我有一个 div，我希望它显示在浏览器的底部，即使您缩放浏览器窗口也是如此。和这个网站一样：

[http://www.cedricvella.com/#node-3](http://www.cedricvella.com/#node-3)

白色背景的内容总是从浏览器窗口的底部开始，即使它被缩小了。我希望它可以用纯css来完成！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:05:48.327

假设你在谈论页脚，你应该看看[Ryan Fait 的方法](http://ryanfait.com/sticky-footer/)。

它使用带有`.push`元素的包装器将页脚元素保持在底部。

像这样：

```
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:01:17.503

为 div 添加 css：

```
.div-class {
   position: fixed;
   left: 0; bottom: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:08:10.567

[在 jsfiddle](http://jsfiddle.net/RC2xN/)检查这个演示

CSS

```
body{
    margin:0px;
    padding:0px;
}
.footer{
    width:100%;
    position:fixed;
    bottom:0px;
    left:0px;
    text-align:center;
    background:#999;
    height:50px;
    line-height:50px;
} 
```

HTML

```
<div class="footer">this is fixed area with align bottom</div> 
```

# c# - WPF 将按钮绑定到按下的键

> ID：15944567
> 
> 赞同：2
> 
> 时间：2013-04-11T08:57:14.547
> 
> 标签：c#, wpf

我以前没有做过WPF开发。

我正在创建一个计算器。我希望将“一个”按钮绑定到键盘键“1”。所以我的按钮的点击功能必须在按下键盘键“1”时执行。

请告知如何执行此操作>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:33:55.587

用这个：

[http://msdn.microsoft.com/en-us/library/system.windows.input.keygesture.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.keygesture.aspx)

```
<Window.InputBindings>
  <KeyBinding Command="{Binding MyCommand}"
              Gesture="CTRL+R" />
</Window.InputBindings> 
```

# macos - OS X - 等效于 textShouldBeginEditing 的委托方法

> ID：15944570
> 
> 赞同：0
> 
> 时间：2013-04-11T08:57:23.397
> 
> 标签：macos, osx-mountain-lion

我是 OSX 编程的新手。

我想做一个非常简单的应用程序，以学习为目的。该应用程序是一个 NSTextView 和一个标签。

这个想法是让标签显示文本视图的字符数。

查看 NSTextView 委托方法，我无法查看每次键入字符时调用哪个方法。类似于 textField 的 textShouldBeginEditing。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:02:46.207

```
-(void)awakeFromNib{
    [[NSNotificationCenter defaultCenter]addObserver :self
                                        selector:@selector(myTextChanged:)
                                            name:NSTextDidChangeNotification
                                          object:nil];
}

-(void)myTextChanged:(NSNotification *)aNotification{
    [textfieldLabel setString:[NSString stringWithFormat:@"ld",[textField.string length]];
} 
```

# jquery - 在jQuery中的链接上检测右键单击“在新选项卡中打开”？

> ID：15944572
> 
> 赞同：3
> 
> 时间：2013-04-11T08:57:26.573
> 
> 标签：jquery, events, mouse

我希望我的链接看起来像合法的 url，但行为不同，比如在点击事件发生时转到我定义的一些跟踪 url。当我用鼠标左键单击链接时，我可以用 .click() 处理程序捕获它并将 href 更改为其他内容。当我右键单击时，它不会被 .click() 捕获，但我可以使用 .mousedown() 和 .mouseup()，这只是我问题的部分解决方案。

问题是，我想确保当某些用户右键单击链接时，链接看起来仍然合法，但是当他选择在新选项卡中打开链接时，我会捕获该事件并更改 href。最后，当链接上发生实际的点击事件时，href 会变回原来的。他们实际去的网址，做了一些事情并将他们重定向到真正的网址，但它发生得非常快。所以这个功能的目标是欺骗用户并跟踪他们的点击。Facebook 做到了，但他们如何处理正确的点击和“在新标签中打开”？

好的，我想没有一些代码就无法到达任何地方。我现在有一些代码：

```
 link = $(selectorName);
    var original_link = link.attr("href");
    link.click(function(){
        link.attr("href", "/track_and_redirect");
    }).mousedown(function(event) {
        switch (event.which) {
            case 3:
                //alert('Right mouse button pressed');
                link.attr("href", "/track_and_redirect");
                break;
            default:
        }
    }).mouseleave(function(){
        link.attr("href", original_link);
    }); 
```

目前，当您右键单击链接时，新的 url 将显示在浏览器角落，我该如何绕过？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:23:27.320

您不能这样做，或者您可以为您的网址制作右键单击事件:)

[jQuery如何区分鼠标左键单击和右键单击](https://stackoverflow.com/questions/1206203/how-to-distinguish-between-left-and-right-mouse-click-with-jquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-28T14:32:52.000

我使用了“contextmenu”，它帮助我在鼠标右键单击时更改了所有 url。

```
$('#help').on('click contextmenu', "a", function(event) {
  $(this).attr('href','my_new_url');
  $(this).attr('target', '_blank');
}); 
```

它还负责在新窗口中打开，复制链接等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-05T21:54:00.620

```
$(".links").contextmenu(function(event){
    // your logic to change the href here
    $(this).attr('href', '...');
    // don't forget to attach event to recover your old link back if you need it
    attachMouseDown($(this));
});

function attachMouseDown($el){
    $el.mousedown(function(event){
        // recover your links
        $el.attr('href', '...');
        $el.unbind('mousedown'); // this is so you don't run this event when you don't need to
    });
} 
```

我刚刚在这篇文章中回答了一个类似的问题

[如何在javascript中捕获新标签事件中的打开链接？](https://stackoverflow.com/questions/46972566/how-to-capture-the-open-link-in-new-tab-event-in-javascript/50707510#50707510)

请检查一下

这是我在你的情况下会做的。

1.  将 contextmenu 事件附加到链接（当用户右键单击链接并打开浏览器上下文菜单时触发事件）。

2.  添加您的逻辑以在此处更改 href。这样，当他们单击它时，它就会到达您想要的位置。

3.  在您更改的链接上添加 mousedown 或 hover 事件，以确保在他们将鼠标悬停在链接上时更正格式。不是每个人都需要这一步，但你需要（这完全取决于你想要达到的目标，所以找出最适合你的情况）

4.  更正格式后，您可以取消绑定 mousedown 或任何其他事件。

# jquery - 用户控件中的 jQuery 脚本，仅针对页面上该控件的一个实例运行

> ID：15944579
> 
> 赞同：1
> 
> 时间：2013-04-11T08:57:44.517
> 
> 标签：jquery, asp.net, ajaxcontroltoolkit

我有一个带有 gridview 的 CollapsiblePanelExtender 控件，我将它放在用户控件中。

我将以下脚本添加到用户控件的末尾以平滑动画：

```
<script type="text/javascript">

    function pageLoad(sender, args) {
        $find(("<%= CPE.ClientID %>"))._animation._fps = 35;
        $find(("<%= CPE.ClientID %>"))._animation._duration = 0.5;
    }

</script> 
```

当我运行页面时，只有第二个手风琴被平滑，第一个是默认的迟缓。

以下是运行时脚本：

```
<script type="text/javascript">

    function pageLoad(sender, args) {
        $find(("MainContent_AccordionGV1_CPE"))._animation._fps = 35;
        $find(("MainContent_AccordionGV1_CPE"))._animation._duration = 0.5;
    }

</script> 
```

. . . .

```
 function pageLoad(sender, args) {
        $find(("MainContent_AccordionGV2_CPE"))._animation._fps = 35;
        $find(("MainContent_AccordionGV2_CPE"))._animation._duration = 0.5;
    }

</script> 
```

所以它应该按照这个工作。知道为什么不是吗？

谢谢。

添加：

我尝试手动将其添加到页面而不是用户控件，同样的行为。

```
 <script type="text/javascript">

        function pageLoad(sender, args) {
            $find(('<%= AccordionGV1.FindControl("CPE").ClientID %>'))._animation._fps = 35;
            $find(('<%= AccordionGV1.FindControl("CPE").ClientID %>'))._animation._duration = 0.5;
        }
</script> 
```

当我添加相同的行但对于 AccordionGV2 ..第一个停止工作时工作。

让我觉得这是一个比这更大的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T09:10:17.653

您应该在 UserControl 中使用此脚本：

```
(function () {
    Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoadedHandler);

    function pageLoadedHandler() {
        $find(("<%= CPE.ClientID %>"))._animation._fps = 35;
        $find(("<%= CPE.ClientID %>"))._animation._duration = 0.5;
    }
})(); 
```

这样，每个用户控件都不会覆盖`pageLoad`之前定义的函数，而是使用自己的 pageLoaded 事件处理程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:02:26.423

第二个 pageLoad() 函数覆盖了第一个。尝试给每个实例的 pageLoad() 一个唯一的名称，例如，用他的 UserControl 的 ClientID 作为后缀：

```
pageLoad_<%=this.ClientID%>() 
```

# c# - GetAsyncKeyState VK_LBUTTON。当前上下文中不存在名称

> ID：15944586
> 
> 赞同：0
> 
> 时间：2013-04-11T08:58:08.740
> 
> 标签：c#, visual-studio

```
 [DllImport("user32.dll")]
    public static extern short GetAsyncKeyState(UInt16 virtualKeyCode); 

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (GetAsyncKeyState(VK_LBUTTON = 0x01))
        {

        }
    }
} 
```

我不断收到一条错误消息，提示“当前上下文中不存在名称‘VK_LBUTTON’”。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:08:36.013

使用以下代码。

```
[DllImport("user32.dll")]
public static extern short GetAsyncKeyState(UInt16 virtualKeyCode);
private const UInt16 VK_MBUTTON = 0x04;//middle mouse button
private const UInt16 VK_LBUTTON = 0x01;//left mouse button
private const UInt16 VK_RBUTTON = 0x02;//right mouse button 
```

有关更多详细信息 [http://msdn.microsoft.com/en-us/library/dd375731(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/dd375731(v=VS.85).aspx)

# facebook - 您的应用的画布页面未加载

> ID：15944588
> 
> 赞同：0
> 
> 时间：2013-04-11T08:58:19.387
> 
> 标签：facebook, review

如果我直接访问 URL（https://apps.facebook.com/[appnamespace]/ 或[https://mydomain.com/](https://mydomain.com/)，最后一个是画布，我有一个 Facebook 应用程序（游戏）可以完美运行网址）。但每次我提交应用程序以供审核时，我都会收到以下反馈：“请解决我们审核团队的以下反馈。一旦您完成了下面列出的更改，您可以重新提交以供审核。” 和“您的应用的画布页面未加载”。

问题是我真的不知道要改变什么，因为对于我和与我共享链接的朋友来说，它按预期工作。

我在 Chrome 的控制台中只有一个错误：
“不安全的 JavaScript 尝试从带有 URL https://mydomain.com/ 的框架访问带有 URL https://apps.facebook.com/[appnamespace]/ 的[框架](https://mydomain.com/)。正在访问的框架将“document.domain”设置为“facebook.com”，但请求访问的框架没有。两者必须将“document.domain”设置为相同的值才能允许访问。

我没有在我的页面中指定 document.domain 虽然我之前尝试了一些值来摆脱此错误消息但没有成功。每次我为 document.domain 设置一个值时，我都会在控制台中收到另一个错误：“未捕获的错误：SecurityError：DOM Exception 18”。

我没有找到任何有效的方法。
所以任何帮助/提示将不胜感激。我还尝试在评论描述消息中要求更详细的反馈，但我仍然收到相同的消息，不知道如何解决问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:20:15.233

所以我终于解决了这个问题。
问题是当用户没有连接到 Facebook 时我没有测试应用程序。对我来说，该应用程序不应该在 Facebook 游戏中心之外使用（尽管有可能），Facebook 可能会在应用程序审查期间测试这种情况。因此，以下事件都不会被触发：

*   auth.statusChange
*   auth.authResponseChange
*   授权登录

为了解决这个问题，我打电话给`getLoginStatus`，如下所示：

```
FB.getLoginStatus(function (response) {
        console.log('[Facebook] getLoginStatus: ' + response.status);

        if (response.status !== 'connected' &&
            response.status !== 'not_authorized')
        {
            console.log('[Facebook] not connected');
            $('#loginscreen').show();
            $('#btn-fb-login').click(function (event) {
                event.preventDefault();
                FB.login(function (response) {
                    $('#loginscreen').hide();
                    start(response);
                }, { scope: 'email,publish_actions'});
            });
        }
    }); 
```

# .net - Automapper 中的 ForMember 中的用户映射器

> ID：15944595
> 
> 赞同：0
> 
> 时间：2013-04-11T08:58:47.697
> 
> 标签：.net, automapper

我想知道是否可以在 ForMemeber 中“子映射”映射对象。我配置了 a 类到 b 类的映射。然后我有两个新的类我需要映射 c 和 d，但是结构不同所以我必须使用 ForMember 来映射它们之间的配置映射。但是 c 和 d 都具有在源中用户 a 和在目标中用户 b 的类的属性。有没有办法说为 c 和 d 中的属性使用内部 a 到 b 映射的已配置映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:33:47.103

如果我理解这一点，你有类似的东西

```
public class a
{
    public int Foo { get; set; }
}

public class b
{
    public int Bar { get; set; }
}

public class c
{
    public a Baz { get; set; }
}

public class d
{
    public b Qux { get; set; }
} 
```

并且您希望对类中的属性`c`进行`d`映射，而不必重新定义`a`and的映射`b`？

如果是这样，则默认情况下您会得到它。这样的事情应该这样做：

```
public static class AutoMapperConfigurator
{
    public static void Configure()
    {
        AutoMapper.Mapper.CreateMap<a, b>()
            .ForMember(dest => dest.Bar, opt => opt.MapFrom(src => src.Foo));
        AutoMapper.Mapper.CreateMap<c, d>()
            .ForMember(dest => dest.Qux, opt => opt.MapFrom(src => src.Baz));
        AutoMapper.Mapper.AssertConfigurationIsValid();
    }
} 
```

如果您的意思是别的，请更新您的问题以澄清。

# db2 - 执行sql语句时出错

> ID：15944596
> 
> 赞同：4
> 
> 时间：2013-04-11T08:58:47.790
> 
> 标签：db2

我正在使用 IBM RAD。我正在执行以下查询。

```
Conn.prepareStatement("update UPLOAD set STATUS='Decrypted' WHERE PATH ='"+path+"'"); 
```

DB2 中的数据类型`PATH`是`VARCHAR`.

我收到以下错误

`SQLCODE=-401,SQLSTATE=42818,SQLERRMC==,`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:05:42.963

错误消息表示您正在比较不同的数据类型。

**例如：**

`'12'=12`

# iphone - UINavigationController 撤消对先前 UIView 的更改

> ID：15944600
> 
> 赞同：1
> 
> 时间：2013-04-11T08:58:52.717
> 
> 标签：iphone, cocoa-touch

我有一个导航控制器，里面有几个视图控制器。在第一个视图控制器（应用程序的初始控制器）中，我执行了一个动画，它移动了两个 UIImageView，并淡入了一些额外的 ui 元素。现在，当我推动下一个视图控制器然后返回到最初的视图控制器时，转换消失了，图像视图与从情节提要加载时的位置完全相同。但是，附加的 ui 元素仍然可见，我在某些 UITextField 中输入的文本也是如此。所以视图控制器并没有完全重置到它的初始状态，但是以某种方式执行的动画被撤消了。谁能告诉我这是否是常规行为，如果是的话，我该如何保留这些转换？

更多披露：我只是在按下按钮时启动常规动画......

```
[UIView animateWithDuration:0.4
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{

                     self.firstView.center = firstCenter;
                     self.secondView.center = secondCenter;
                 }
                 completion:^(BOOL finished) {

                     // Upon complection fade in additional ui elements
                     [UIView animateWithDuration:0.4
                                      animations:^{

                                          self.firstElement.alpha = 1.0;
                                          self.secondElement.alpha = 1.0;
                                          self.thirdElement.alpha = 1.0;
                                      }
                                      completion:^(BOOL finished) {

                                          [self.activityIndicator stopAnimating];
                                      }];
                 }]; 
```

...然后在按下另一个按钮后按下下一个视图控制器。

```
[self.navigationController pushViewController:_nextViewController animated:YES]; 
```

据我所知，我在这里没有做任何时髦的事情，因此感谢您提供任何帮助。

# java - 获取 ArrayList 的值（字符串） >(); 在爪哇

> ID：15944601
> 
> 赞同：10
> 
> 时间：2013-04-11T08:58:52.717
> 
> 标签：java, android, arraylist

我知道这是一个简单的问题，但在

```
ArrayList<ArrayList<String>> collection;
ArrayList<String> listOfSomething;

collection= new ArrayList<ArrayList<String>>();
listOfSomething = new ArrayList<String>();

listOfSomething.Add("first");
listOfSomething.Add("second");
collection.Add(listOfSomething);
listOfSomething.Clear();
listOfSomething.Add("first");
collection.Add(listOfSomething); 
```

我想从 ArrayList 的 ArrayList 中取 String，我不知道该怎么做。例如我去

```
ArrayList<String> myList = collection.get(0); 
String s = myList.get(0); 
```

它有效！但：

# 大更新：

```
private List<S> valuesS;
private List<Z> valuesZ;

ArrayList<ArrayList<String>> listOfS;
ArrayList<String> listOfZ;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        Zdatasource = new ZDataSource(this);
        Zdatasource.open();
        valuesZ = Zdatasource.getAllZ();

        Sdatasource = new SDataSource(this);
        Sdatasource.open();
        valuesS = Sdatasource.getAllS();

        List<Map<String, String>> groupData 
             = new ArrayList<Map<String, String>>();
        List<List<Map<String, String>>> childData 
             = new ArrayList<List<Map<String, String>>>();

        listOfS = new ArrayList<ArrayList<String>>();
        listOfZ = new ArrayList<String>();
        for (S i : valuesS) { // S is class
            for (Z j : valuesZ) { // Z is class
                if(j.getNumerS().equals(i.getNumerS())) {
                    listOfZ.add(j.getNumerZ());
                }
                else
                {
                    //listOfZ.add("nothing");
                }
            }
                listOfS.add(listOfZ);
                if(!listOf.isEmpty()) listOfZ.clear();
        }

@Override
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition,
            int childPosition, long id) {
        try
        {       
            ArrayList<String> myList = listOfS.get(groupPosition); 
            String s = myList.get(childPosition);
         PrintToast("group "+Integer.toString(groupPosition)+", child "+Integer.toString(childPosition) + " , "+ s);
        }
        catch(Exception e)
        {
            Log.e("FS", e.toString());
        } 
        return true;
    } 
```

返回我 java.lang.IndexOutOfBoundsException: Invalid index 1, size is 0 当我点击真正应该存在的项目时。我没有显示生成 ListView 的代码，但我可以告诉你我的 listOfS 包含 3 个项目：第一个是 Null listOfZ，第二个 listOfZ 有 2 个元素，第三个 listOfZ 有 1 个元素。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T09:06:34.023

```
listOfSomething.Clear();
listOfSomething.Add("first");
collection.Add(listOfSomething); 
```

您在此处清除列表并添加一个元素（“第一个”），第一个引用`listOfSomething`也会更新，因为两者都引用同一个对象，因此当您访问第二个元素`myList.get(1)`（不再存在）时，您会得到空值。

请注意，两者都`collection.Add(listOfSomething);`保存了对同一个 arraylist 对象的两个引用。

您需要为两个元素创建两个不同的实例：

```
ArrayList<ArrayList<String>> collection = new ArrayList<ArrayList<String>>();

ArrayList<String> listOfSomething1 = new ArrayList<String>();
listOfSomething1.Add("first");
listOfSomething1.Add("second");

ArrayList<String> listOfSomething2 = new ArrayList<String>();
listOfSomething2.Add("first");

collection.Add(listOfSomething1);    
collection.Add(listOfSomething2); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-11T09:06:42.583

因为清除列表后**第二个元素为空。**

利用：

```
String s = myList.get(0); 
```

请记住，**索引 0 是第一个元素**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-11T09:12:04.270

一种更简洁的迭代列表的方法是：

```
// initialise the collection
collection = new ArrayList<ArrayList<String>>();
// iterate
for (ArrayList<String> innerList : collection) {
    for (String string : innerList) {
        // do stuff with string
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-11T09:06:30.623

迭代列表内列表的正确方法是：

```
//iterate on the general list
for(int i = 0 ; i < collection.size() ; i++) {
    ArrayList<String> currentList = collection.get(i);
    //now iterate on the current list
    for (int j = 0; j < currentList.size(); j++) {
        String s = currentList.get(1);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-03T11:48:08.057

```
I have String array like this
We have to pass data through response.body.getdata and this data pass in constructor like this,

List taginnerData;

 "data": [
                "banana",
                "apple",
                "grapes",
                "Pears",
                "Mango",
                "Cherry",
                "Guava",
                "TorontoVsMilwaukee_12Jan19"
            ]

 String[] myArray = new String[taginnerData.size()];
        for (int i = 0; i < taginnerData.size(); i++) {
            myArray[i] = String.valueOf(taginnerData.get(i));
            holder.tv_channel_name.setText("" +taginnerData.get(i));
//we get any value from here to set in adapter
        } 
```

# ios - 运行 UIWebView 时收到内存警告

> ID：15944602
> 
> 赞同：1
> 
> 时间：2013-04-11T08:58:53.260
> 
> 标签：ios, objective-c, uiwebview

我现在正在开发一个 Iphone 应用程序，该应用程序需要用户登录 Facebook 并将他们的数据传递给 webService 并登录到我的游戏。基本上我的游戏是由 HTML 运行的，它将由 UIWebView 在我的应用程序中显示。

这是我加载 webView 的代码：

```
-(void)callWebView {
self.webView.delegate = self;
NSURL *url = [NSURL URLWithString:@"http://www.my_game_url"];
NSURLRequest *requestURL = [NSURLRequest requestWithURL:url];
[self.webView loadRequest:requestURL];
}

-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
NSURL *url = request.URL;
NSString *urlString = url.absoluteString;

if ( [ urlString isEqualToString: @"http://my_game_logout_url" ] ) {

    [myWebView stopLoading];
    [self.webView removeFromSuperview];

    MyAppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
    [appDelegate.session closeAndClearTokenInformation];
    [FBSession.activeSession close];

    NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies]) {
        [storage deleteCookie:cookie];
    }
    [[NSUserDefaults standardUserDefaults] synchronize];

    return NO;
    }
return YES;
}

- (void)webViewDidStartLoad:(UIWebView *)webView {
[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
[self.webView stopLoading];

MyAppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
[appDelegate.session closeAndClearTokenInformation];
[FBSession.activeSession close];
}

- (void)viewWillDisappear:(BOOL)animated {
[super viewWillDisappear:animated];
webView.delegate = nil;
[webView stopLoading];
}

- (void)dealloc {
[webView setDelegate:nil];
} 
```

用 UIWebView 运行我的游戏很好。问题是我稍后会**收到内存警告**，我的应用程序会崩溃。我必须启用自动引用计数 (ARC) 以自动释放一些不需要的源，但我仍然会在我的应用程序中收到内存警告。我有什么错误吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:49:46.990

1.  使用桌面网络浏览器确保您的 HTML 游戏没有内存泄漏。Chrome 开发者工具是一个方便的工具。UIWebView 使用的 javascript 引擎性能不佳，您应该仔细优化您的游戏。

2.  试试 [self.webView _setDrawInWebThread:YES]; 创建 UIWebView 之后。它是一个私有 API，能够节省 UIWebView 的 CPU 和内存使用。但是您的应用程序可能会被 App Store 拒绝。

    SEL sel1 = NSSelectorFromString([NSString stringWithFormat:@"%@%@%@", @"_setDr", @"awInWebTh", @"read:"]);

    objc_msgSend(self.webView, sel1, YES);

会有所帮助。

# jquery - 在 Visual Studio 中创建网站

> ID：15944603
> 
> 赞同：4
> 
> 时间：2013-04-11T08:58:57.447
> 
> 标签：jquery, html, css, visual-studio-2012, web

问题是我可以在 Visual Studio 2012 中创建网站吗？我的意思是像您在 Adob​​e Dreamweaver 中一样？我不想创建一个 asp.net 项目，只是一个带有 HTML、JS 和 JQuery 的标准网站。我想使用 VS，因为我喜欢智能感知，能够在解决方案资源管理器中组织项目文件，并且可以轻松访问所有内容。目前我只是加载 index.html 或 stylesheet.css 来编辑它们，但我想如果我可以浏览它，就好像它是一个项目一样。

我知道 Dreamweaver 可以做到这一点，我问的原因是因为我没有 Dreamweaver 的任何许可证，所以如果我可以在 VS 中做到这一点会更实用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:11:57.587

如果您有一个包含所有 HTML 和 CSS 文件等的文件夹，您可以通过 File > Open > Website 打开它。您可以浏览到所需的文件夹或 ftp 服务器。当您打开所需的文件夹时，您的解决方案资源管理器中就拥有了所有内容。现在要制作一个 .sln 文件，只需浏览到 File > Save YourFolderName.sln As... 这是您要查找的内容吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:12:24.260

是的，您可以在 Visual Studio 中创建静态 HTML 网站，但是我不知道是否存在为此的项目模板。

话虽如此，您可以只创建一个空的 ASP.NET 应用程序，但使用 HTML/CSS/JavaScript，而不使用任何 ASPX 页面或代码。我已经成功地为几个静态网页/ HTML 测试等实现了这一点。

TypeScript 也为基于 HTML 的静态网站提供了一个类似的模板，但是，我相信这个模板也是基于一个空的 ASP.NET 应用程序，但为 TypeScript 开发而修改（它包含一个 app.ts 文件，如果这不是必需的）。

# jquery - 视频在 chrome 和 IE9 中工作，但在 IE8 中不工作？

> ID：15944605
> 
> 赞同：-1
> 
> 时间：2013-04-11T08:58:58.830
> 
> 标签：jquery

这就是我放入`<head>`标签的内容

```
<code><script src="jquery.js"></script>
<script src="mediaelement-and-player.min.js"></script>
<link rel="stylesheet" href="mediaelementplayer.css" /></code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:20:16.453

IE 8 不支持 HTML 5 视频标签...

# html - 屏幕动画内的CSS“弹跳”线

> ID：15944606
> 
> 赞同：1
> 
> 时间：2013-04-11T08:59:01.093
> 
> 标签：html, css, animation

我有一个很酷的想法，但我有点坚持如何实现这一目标。

这是一个关于创建弹跳球动画的教程： [弹跳球动画教程](http://www.cssnewbie.com/pure-css-bouncing-ball/#.UWZ6XKvUaFc)

我想创建类似但带有蠕虫线的东西。这条线朝向它前进的方向，并在撞到墙上时改变方向。

我想有两个部分我无法弄清楚：

1.  如何使线朝向它的方向？使用 CSS。
2.  当线路到达容器的末端时，我如何获得类似蠕虫的方向变化，例如屏幕？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:36:16.433

仅使用 CSS 很难做到这一点。球是圆形的，所以当它“击中”并边缘时，它就会弹开。一条线会反弹，在反弹的中途，这条线会朝两个方向（从墙上反弹的部分和没有反弹的部分）。仅使用 CSS 将无法轻松做到这一点。

要使线条按照您想要的方向移动，您只需使用正确的变换量：旋转以使其指向与移动方向相同的方向。同样，这将起作用并且看起来不错，直到线路撞到墙上为止。

# html - br 没有按要求工作

> ID：15944607
> 
> 赞同：1
> 
> 时间：2013-04-11T08:59:04.093
> 
> 标签：html, css

我想创建一个包含一些数据的 div。需要如下图所示：![div 图像](https://i.stack.imgur.com/KnFxj.png)

我已经为它使用了html，如下所示：

```
<div class="mydiv">
     <span>Major</span><br>
     <span>Minor</span>
     <span style="float: right; margin-right:5%" id="span_store">
         <img src="edit.png">
         <a onmousedown="javascript:myfun('name');" style="padding-left:10px"></img>
                <img src="active.png"></img>
         </a>
     </span>
 </div> 
```

我希望最右侧的 2 个图像出现在两者之间（即既不是顶部也不是底部）。我怎样才能做到这一点。

我认为`<BR>`在这种情况下会产生问题。但我需要以与图像类似的方式显示主要和次要。请提供任何替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:06:17.060

将您的 HTML 更改为：

```
<div class="mydiv">
   <span style="float: right; margin-right:5%" id="span_store">
     <img src="edit.png" style="display:block"/>
     <a onmousedown="javascript:myfun('name');" 
         style="padding-left:10px display:block">
            <img src="active.png"/>
     </a>
   </span>
   <span style="display:block">Major</span>
   <span style="display:block">Minor</span>

</div> 
```

所以我改变了

1.  删除`</img>`，因为它不需要只需关闭并在一个地方结束标签
2.  将“img”移到`span`其他上面，所以浮动有效
3.  标记跨度`display:block`以填充整行，这比`br`标签更受欢迎。因为它更灵活并且有助于解决浮动问题，例如这个
4.  你有一个`img`封闭的`a`标签，这不起作用：

代码小提琴：

[http://jsfiddle.net/RcKRb/2/](http://jsfiddle.net/RcKRb/2/)

# javascript - 如何使用 JavaScript 将 URL 中具有非 ASCII 字符的参数传递给 JSP/Servlet？

> ID：15944609
> 
> 赞同：1
> 
> 时间：2013-04-11T08:59:10.470
> 
> 标签：javascript, ajax, web-applications, encoding, url-parameters

我在 WEB 上阅读了很多类似的问题，但没有一个解决方案对我有帮助。当查询可以是希伯来语、英语或任何其他语言时，我使用搜索实现网页。当用户单击“搜索”时，我使用 JavaScript 获取字段中的值并使用 Ajax 显示结果。当用户单击“搜索”时，JavaScript 函数会向我的 JSP 文件发送一个新请求，当查询作为参数发送时。

你知道如何解决它吗？

### JavaScript 中的相关行：

```
...  
request = new XMLHttpRequest();  
var url = "SearchResults.jsp?userID=" + userID + "&query=" + encodeURIComponent(query);  
alert("The query = " + query);  
alert("The url = " + url);   
request.open("GET", url, true);  
... 
```

第一个警报正确显示希伯来语，第二个警报显示 url 当查询参数编码为 %%.. 当我将它粘贴到 Google 搜索中时，它正确地用希伯来语写了这个词

### 服务器中的相关行：

```
...  
String userID = request.getParameter("userID");  
FbLogger.fbLogger.info(request.getParameter("query"));  
String query = URLDecoder.decode(request.getParameter("query"), "UTF-8");  
FbLogger.fbLogger.info("Entered as Manager with Params: userID = " + userID + " , query = " + query);       
... 
```

我将查询视为 ×?×©×¨×?×? 在我上面 2 条消息的日志中，用户 ID 已正确传递。

### 在我添加的每一页上：

```
<%@page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>  
<meta http-equiv="Content-Type" content="text/html; charset=charset=UTF-8">  
<script language="javascript" type="text/javascript" charset="utf-8" src="javascript/friendsSearch.js"></script> 
```

我还更改了 Tomcat 服务器 (server.xml) 中的配置：

```
<Connector port="8080" protocol="HTTP/1.1"  
        connectionTimeout="20000"  
        redirectPort="8443"  
        URIEncoding="UTF-8"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:23:31.290

使用连接器属性就`request.getParameter("query")`足够了。如果它不起作用，那么`URIEncoding="UTF-8"`你的`<Connector>`标签中的 没有任何效果。

请注意，您通过直接记录字符串来增加额外的复杂性，记录器输出编码和日志阅读器也需要编码/解码步骤。而是搜索`ל`并记录`"ל".equals(request.getParameter("query"))`将是`true`或`false`仅需要考虑 URIEncoding 的结果。

尝试应用`port="1337"`到相同的`<Connector>`标签，看看你的服务器是否工作在`localhost:1337`. 如果它确实有效`:1337`，请尝试再次用希伯来语搜索。

# passenger - 使用 LAMPP（XAMPP for Linux）安装Passenger Apache 模块时出现问题

> ID：15944613
> 
> 赞同：1
> 
> 时间：2013-04-11T08:59:26.393
> 
> 标签：passenger

在我的 Ubuntu 系统上，我在 /opt/lampp 中有一个 LAMPP 安装，可以正常工作。我已经安装了乘客。现在我想为乘客安装 apache2 模块：

```
sudo passenger-install-apache2-module 
```

它找不到 apache2 或 apache 开发标头。我将所有缺少的东西都安装为 root 并根据[乘客 apache 文档](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_forcing_location_of_certain_command_line_tools)添加了环境变量。但是，它们显然是安装到一般（系统范围）位置，例如 /usr/bin，而不是安装到 LAMPP 安装中。

当我再次运行上述命令时，它会找到所有 apache 依赖项，但是安装仍然无法找到开发标头：

```
ext/apache2/mod_passenger.c:25:19: fatal error: httpd.h: No such file or directory 
```

这个文件在我的系统上不存在，即使安装了 apache2 和 LAMPP。我试图“修复”我的 apache 安装：

```
sudo apt-get -o DPkg::Options::="--force-confmiss" --reinstall install apache2.2-common 
```

但这并没有恢复 httpd.h。我觉得我的做法是错误的——我应该使用不同版本的 LAMPP（例如，一个带有开发头文件的 apache？）还是我的 Ubuntu apache 安装不完整/损坏？我让它与另一个只安装了 apache2 的系统一起工作，但似乎用 LAMPP 安装是有问题的。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:19:10.987

httpd.h 在 apache2-worker-dev 或 apache2-prefork-dev 中。事实上，安装程序应该为您提供准确的包名称以输入 apt-get。

# optimization - 是否可以让 isnan() 在 gfortran -O3 -ffast-math 中工作？

> ID：15944614
> 
> 赞同：4
> 
> 时间：2013-04-11T08:59:26.610
> 
> 标签：optimization, fortran, nan, ieee-754, gfortran

我想用 gfortran 编译一个程序并`-O3 -ffast-math`启用它，因为它可以很好地提升性能。我很困惑，gfortran`isnan()`捕获了一些 NaN，但不是全部。看完之后

[在 C++ 中检查双精度（或浮点）是否为 NaN](https://stackoverflow.com/questions/570669/checking-if-a-double-or-float-is-nan-in-c/570694#570694)
[如何制作可移植的 isnan/isinf 函数](https://stackoverflow.com/questions/2249110/how-do-i-make-a-portable-isnan-isinf-function)
[Negative NaN 不是 NaN？](https://stackoverflow.com/questions/3596622/negative-nan-is-not-a-nan)

我的印象是，即使启用了快速数学，人们也可以通过位摆弄来检查 C 中的 NaN。然而，这让我很困惑，因为快速数学

> 对于依赖于数学函数的 IEEE 或 ISO 规则/规范的精确实现的程序，可能会导致不正确的输出。

根据 gcc 4.7.2 的手册页。那么，如果数字不是根据 IEEE 标准表示的，那么您怎么知道要检查哪个位呢？如果您知道它，您将如何在 Fortran 95/03/08 中实现它？

不要费心发布`(x \= x)`依赖于 IEEE 规则的类似解决方案。它们给出与 相同的结果`isnan()`。我也知道`-ffpe-trap=invalid,zero,overflow`，但不想停止程序。如果有帮助，我的操作系统是 64 位 LinuxMint 14。如果在 Fortran 中不可能，防水的 C 解决方案也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-13T12:50:08.950

首先我要指出 gfortran 4.9 支持 IEEE_arithmetic 模块。但是，可以优化该模块中过程中的检查，并且可以应用相同的逻辑。

但是，2014 年我不能依赖 GCC 4.9，它太新鲜了。我用了以下。

当我不得不使用时，`x/=x`我将检查移动到一个在没有和没有链接时间优化的情况下`x/=x`编译的过程：`-ffast-math`

```
module my_is_nan_mod
  !poor man's replacement for the intrinsic module
  !do not use if the compiler supports the F2003 version
  !make sure not to use fast math optimizations when compiling
  use iso_fortran_env

  !the common extension isnan() may actually fail with fast math optimizations

  interface my_is_nan
    module procedure my_is_nan_real32
    module procedure my_is_nan_real64
  end interface

contains
  logical function my_is_nan_real32(x) result(res)
    real(real32), intent(in) :: x

    res = x /= x
  end function

  logical elemental function my_is_nan_real64(x) result(res)
    real(real64), intent(in) :: x

    res = x /= x
  end function

end module 
```

它在一个单独的文件中，然后在没有 和没有 的情况下编译`-Ofast`该`--ffast-math`文件`-flto`。请注意，缺少内联会导致严重的性能下降。

随着`-ffast-math`编译器看到`x/=x`，确定它永远不可能是真的并将表达式优化为 just `.false.`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-09-17T03:58:01.597

如果有人仍在寻找答案，我发现以下适用于`gfortran -O3 -Ofast -ffast-math`（gfortran 版本 9.3.0）：

```
is_nan = (.not. (x <= huge(x) .and. x >= -huge(x))) .and. (.not. abs(x) > huge(x)) 
```

事实上，我在[GitHub 上](https://github.com/zaikunzhang/infnan)发布了一些检查 Inf/NaN 的函数，这些函数旨在即使在使用激进的优化标志调用编译器时也能正常工作，例如`gfortran -Ofast`. GitHub 存储库中还包含一些简单的测试。

**gfortran 9.3.0中`ieee_is_nan`包含`ieee_arithmetic`的内容不适用于激进的优化标志`-Ofast`**（尽管这并不奇怪）。此外，一些编译器（gfortran 9.3.0、ifort 21.0 和 nagfor 7.0）在强制执行某些特殊编译选项时的返回类型存在错误，正如[Fortran Discourse](https://fortran-lang.discourse.group/t/checking-inf-nan-when-compilers-are-invoked-with-aggressive-optimization-flags/1851)`ieee_is_nan`上所讨论的。

为了您的方便，我复制粘贴下面的主要代码。更多细节可以在[GitHub](https://github.com/zaikunzhang/infnan)上找到。

```
! consts.f90
module consts_mod

implicit none
private
public :: SP, DP

integer, parameter :: SP = kind(0.0)
integer, parameter :: DP = kind(0.0D0)

end module consts_mod 
```

```
! infnan.f90
module infnan_mod

use consts_mod, only : SP, DP
implicit none
private
public :: is_nan, is_finite, is_inf, is_posinf, is_neginf

interface is_nan
    module procedure is_nan_sp, is_nan_dp
end interface is_nan

interface is_finite
    module procedure is_finite_sp, is_finite_dp
end interface is_finite

interface is_posinf
    module procedure is_posinf_sp, is_posinf_dp
end interface is_posinf

interface is_neginf
    module procedure is_neginf_sp, is_neginf_dp
end interface is_neginf

interface is_inf
    module procedure is_inf_sp, is_inf_dp
end interface is_inf

contains

elemental pure function is_nan_sp(x) result(y)
implicit none
real(SP), intent(in) :: x
logical :: y
y = (.not. (x <= huge(x) .and. x >= -huge(x))) .and. (.not. abs(x) > huge(x))
end function is_nan_sp

elemental pure function is_nan_dp(x) result(y)
implicit none
real(DP), intent(in) :: x
logical :: y
y = (.not. (x <= huge(x) .and. x >= -huge(x))) .and. (.not. abs(x) > huge(x))
end function is_nan_dp

elemental pure function is_finite_sp(x) result(y)
implicit none
real(SP), intent(in) :: x
logical :: y
y = (x <= huge(x) .and. x >= -huge(x))
end function is_finite_sp

elemental pure function is_finite_dp(x) result(y)
implicit none
real(DP), intent(in) :: x
logical :: y
y = (x <= huge(x) .and. x >= -huge(x))
end function is_finite_dp

elemental pure function is_inf_sp(x) result(y)
implicit none
real(SP), intent(in) :: x
logical :: y
y = (abs(x) > huge(x))
end function is_inf_sp

elemental pure function is_inf_dp(x) result(y)
implicit none
real(DP), intent(in) :: x
logical :: y
y = (abs(x) > huge(x))
end function is_inf_dp

elemental pure function is_posinf_sp(x) result(y)
implicit none
real(SP), intent(in) :: x
logical :: y
y = (abs(x) > huge(x)) .and. (x > 0)
end function is_posinf_sp

elemental pure function is_posinf_dp(x) result(y)
implicit none
real(DP), intent(in) :: x
logical :: y
y = (abs(x) > huge(x)) .and. (x > 0)
end function is_posinf_dp

elemental pure function is_neginf_sp(x) result(y)
implicit none
real(SP), intent(in) :: x
logical :: y
y = (abs(x) > huge(x)) .and. (x < 0)
end function is_neginf_sp

elemental pure function is_neginf_dp(x) result(y)
implicit none
real(DP), intent(in) :: x
logical :: y
y = (abs(x) > huge(x)) .and. (x < 0)
end function is_neginf_dp

end module infnan_mod 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-12T13:03:19.883

我在 gfortran-4.7 中遇到了同样的问题，并开始尝试一些表达式。对于我的测试用例，如果 x 是 NaN，则返回 true：

```
check = ((x*2d0==x).AND.(
         (x<-epsilon(1.d0)).OR.
         (x>+epsilon(1.d0)))) 
```

我只检查了双精度值和 -O2 -ffast-math, -O3 -ffast-math 选项。请注意，这将返回 .false。如果不使用优化标志，则必须将其与

```
isnan(x) .OR. check 
```

# python - 处理简单 DNS Twisted 客户端上的错误

> ID：15944617
> 
> 赞同：0
> 
> 时间：2013-04-11T08:59:29.747
> 
> 标签：python, asynchronous, dns, twisted

如果所有域都存在，则以下 DNS 异步客户端可以正常工作。

但是，如果域名不存在，则会引发 DNSNameError 异常，并且不会被我的“try except”块捕获。然后，其他域不解析。

我查看了[DNSNameError](http://twistedmatrix.com/documents/current/api/twisted.names.error.DNSNameError.html)和[defer](http://twistedmatrix.com/documents/current/core/howto/defer.html)的文档，但我没有找到如何使用 addErrback 处理此错误，[因为](http://twistedmatrix.com/documents/current/api/twisted.internet.defer.Deferred.html#addErrback)我使用[了 @inlineCallbacks](http://twistedmatrix.com/documents/current/api/twisted.internet.defer.html#inlineCallbacks)。

**问题：如何在****query()**中捕获 DNSNameError 异常？

```
from itertools import cycle
from pprint import pprint
from twisted.names import client, dns
from twisted.internet.task import react
from twisted.internet import defer, reactor

def query(reactor, server, name):

    resolver = client.Resolver(
        resolv="/dev/null", servers=[(server, 53)], reactor=reactor)

    try:
        return resolver.lookupAddress(name)
    except:
        print "error query"
        return defer.returnValue(([],[],[]))

@defer.inlineCallbacks
def main(reactor, names):
    servers = ["4.2.2.1", "8.8.8.8"]

    next_server = cycle(servers).next

    results = []
    for n in names:
        try:
            results.append(query(reactor, next_server(), n))
        except:
            print "error append"

    try:
        results = yield defer.gatherResults(results)
        print "Success."
    except:
        print "Error result"
    finally:
        print "Shutting down"
        reactor.stop()

    pprint(zip(names, results))

if __name__ == '__main__':
    main(reactor, ('google.com', 'notexist.www','google.fr',))
    reactor.run() 
```

结果：

```
$ipython twisteddns.py 
ipython twisteddns.py 
Error result
Shutting down
[('google.com', <Deferred at 0xad862ac>),
 ('notexist.www',
  <Deferred at 0xad8666c current result: <twisted.python.failure.Failure <class 'twisted.names.error.DNSNameError'>>>),
 ('google.fr', <Deferred at 0xad869ac>)]
Unhandled error in Deferred:
Unhandled Error
Traceback (most recent call last):
Failure: twisted.names.error.DNSNameError: <twisted.names.dns.Message instance at 0xad86a6c> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:04:32.580

首先，永远不要在用 .`returnValue`装饰的函数之外使用`inlineCallbacks`。它没有任何意义，它会产生令人惊讶的结果，它会触发警告告诉你不要这样做，而且它可能会比在 Twisted 的某些未来版本中已经被破坏的情况更糟。

您正在寻找的功能`query`是`defer.succeed`. 如：

```
...
except:
    print "error query"
    return defer.succeed(([],[],[])) 
```

但是由于您*没有*使用`inlineCallbacks`on `query`，因此您应该将其添加为 errback。

```
d = resolver.lookupAddress(name)
def queryFailed(reason):
    log.err(reason, "Lookup of %s failed" % (name,))
    return ([], [], [])
d.addErrback(queryFailed)
return d 
```

# google-app-engine - 如何为 Googleappengine 设置 --use_java7 标志

> ID：15944620
> 
> 赞同：1
> 
> 时间：2013-04-11T08:59:47.473
> 
> 标签：google-app-engine

我的 appengine 部署失败，因为没有设置 --use_java 7 标志。我尝试打开命令行并转到：plugins/com.google.appengine.eclipse.sdkbundle_1.7.7/appengine-java-sdk-1.7.7/bin 并运行 appcfg.sh --use_java 7\. 这不起作用. 什么会。此链接中的所有答案均无效[无法部署到 Google App Engine，因为尚未设置 --use_java7 标志](https://stackoverflow.com/questions/13848495/failed-to-deploy-to-google-app-engine-because-use-java7-flag-has-not-been-set)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:21:15.437

我终于有意识重新安装与 1.77 兼容的 Google app-engine 的最新版本。不管是什么问题都解决了。

太所有的谷歌代表：像我这样的一些新手不熟悉命令行。我建议您为应用程序引擎和 eclipse 插件之外的任何文件添加卸载选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:23:04.177

在 1.7.7 中，现在在 java7 运行时上进行部署，所以这个临时标志现在已被删除。只需将其删除。

# sql-server-2008 - 无法在 ColdFusion 中创建连接到 SQL2008 的 JTDS 数据源

> ID：15944622
> 
> 赞同：1
> 
> 时间：2013-04-11T08:59:49.127
> 
> 标签：sql-server-2008, coldfusion, jtds, coldfusion-7

我遇到了在 SQL2008 R2 中执行的 ColdFusion 查询的问题。该查询在通过 Management Studio 运行时返回两行，但通过 ColdFusion 它返回零。在网上搜索时，这指向 ColdFusion 中的缓存，所以我清除了它，不高兴。我什至升级了 SQL 的 ColdFusion 驱动程序，仍然没有乐趣。然后我在另一个论坛上发现了 JTDS，但对于我来说，我无法让它连接到我的 SQL 集群。

有没有人有他们成功设置的 JDBC URL（减去敏感信息）的真实示例？这是到集群上运行的命名 SQL 实例的连接。防火墙一切正常，检查并正常 ColdFusion SQL 连接工作正常。

我尝试过（在许多其他组合中）：

```
jdbc:jtds:sqlserver://IP ADDRESS/Instance Name;database=DB Name
jdbc:jtds:sqlserver://IP ADDRESS/Database Name;instance=Instance Name
jdbc:jtds:sqlserver://IP ADDRESS:PORT/Instance Name;database=DB Name
jdbc:jtds:sqlserver://IP ADDRESS:POrt/Database Name;instance=Instance Name 
```

SQL 实例位于端口 59759 上并允许通过防火墙。

我不断收到此错误：

```
The root cause was that: java.sql.SQLException: 
Timed out trying to establish connection 
```

我目前无法升级 ColdFusion。

或者，如果有人知道我的查询为什么失败，那也会有所帮助。

# apache-flex - Flex 中的自动麦克风增益

> ID：15944623
> 
> 赞同：4
> 
> 时间：2013-04-11T08:59:50.607
> 
> 标签：apache-flex, actionscript, microphone

在我们的一对一视频通话应用程序中，我们将麦克风增益设置如下：

```
mic.gain = 50; 
```

问题是在某些通话中，对方非常轻柔地接听电话。我们希望在这种情况下自动增加他们的麦克风增益。

似乎`MicrophoneEnhancedOptions.autoGain`有财产只允许这样做。[Flash Player 10.3 公告](http://blogs.adobe.com/flashplayer/2011/03/introducing-flash-player-10-3-beta.html)中暗示了这一点；它也出现在 Flash Builder 的代码完成弹出窗口中。但是，此属性不在当前文档中，并且`false`无论我们将其设置为什么，它似乎总是保持不变：

```
var mic:Microphone = Microphone.getEnhancedMicrophone();
var options:MicrophoneEnhancedOptions = mic.enhancedOptions;
options.autoGain = true;
mic.enhancedOptions = options;
trace(String(mic.enhancedOptions.autoGain)); // Outputs "false" 
```

请通过`MicrophoneEnhancedOptions.autoGain`或其他方式分享有关 Flex 中自动增益控制的任何建议。

# html - 全宽背景响应式网站

> ID：15944627
> 
> 赞同：1
> 
> 时间：2013-04-11T08:59:51.740
> 
> 标签：html, css, responsive-design

我遇到了一个问题，我无法完全弄清楚如何仅使用 css 来解决。

在响应式网页上，我在每个页面上都有一个全宽背景，通过以下 css 加载到具有类 (bg) 的 div 上：

```
.bg{
   position:fixed;
   top:0px;
   z-index:-999;
   width:100%;
   height:100%;
   background-size: cover;
   -webkit-background-size: cover;
   -moz-background-size: cover;
   -o-background-size: cover;
  } 
```

然而问题是，如果页面内容很长，这些图像会在移动设备上引起问题。（背景将被拉伸以覆盖所有页面内容，甚至是屏幕外的内容）这意味着我通常只会在这些单元中看到背景左上角的污迹。

因为我还需要它有点向后兼容（IE 8+），所以我不能只依赖 CSS3 的“封面”，所以我已经用完了无脚本的解决方案。

任何提示/想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:10:52.603

您可以尝试在 body 标记上使用 css 元素，如下所示

> #background{
> background-image:url('url/to/image/of/choice.jpg');
> 背景重复：重复-y；
> }

这一切都在 css1 中，所以它应该是向后兼容的。
您可以将其添加到您的 bg 或其他选择的类或 id 中。

# sql-server - 在 SQL Server 中使用 RAISERROR 引发自定义错误消息

> ID：15944630
> 
> 赞同：18
> 
> 时间：2013-04-11T08:59:55.003
> 
> 标签：sql-server, tsql, raiserror

在以前的版本中，我们在 t-sql 中引发了错误，例如：

```
RAISERROR 50000 'My Error Message' 
```

在最新的 SQL Server 中，此语法已停用，并替换为 RaiseError () 语法。

我想要一个引发错误的通用方法，到目前为止我能想到的最好的方法是：

```
sp_addmessage @msgnum = 50001,
              @severity = 10,
              @msgtext = N'My Error Message', @replace = 'REPLACE';
RAISERROR (50001, 10, 1, 'This error message is not displayed') 
```

但是我不能用 sp_addmessage 为每条消息创建错误消息，因为有 1000 条消息。

使用自定义消息引发消息的更好方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-11T09:03:59.760

这似乎有效：

```
RAISERROR('My Error Message',0,1) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-11T13:56:52.630

实际上，自 SQL Server 2012 以来`RAISERROR`已被弃用。请转到[此处](http://msdn.microsoft.com/en-us/library/ee677615.aspx)了解更多信息。更有趣的方面之一是它是 Rais *e* rror 而不是 Rais **eE** rror 导致它在某些圈子中被称为“raise ror”。`THROW`

 ***来自 BOL 的样本：

```
USE tempdb;
GO
CREATE TABLE dbo.TestRethrow
(    ID INT PRIMARY KEY
);
BEGIN TRY
    INSERT dbo.TestRethrow(ID) VALUES(1);
--  Force error 2627, Violation of PRIMARY KEY constraint to be raised.
    INSERT dbo.TestRethrow(ID) VALUES(1);
END TRY
BEGIN CATCH

    PRINT 'In catch block.';
    THROW;
END CATCH; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-15T22:00:59.237

使用`s%`通配符，以便您可以从任何存储的过程中传递您喜欢的任何消息：

```
IF NOT EXISTS (SELECT * FROM sys.messages m WHERE m.message_id = 62000)
EXEC sys.sp_addmessage @msgnum = 62000, 
                       @severity = 16, 
                       @msgtext = N'%s', 
                       @lang = 'us_english' 
```

然后在你的 sp 你可以提出这样的错误：

```
RAISERROR (62000, 16, 1, 'Error and/or Business Error Text goes here') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-29T20:10:00.113

或者使用 raise error 的 state 属性

第 1 步：在过程中

RAISERROR ('错误: bla bla 业务检查 1 失败', 16,5)

RAISERROR ('错误: bla bla 业务检查 1 失败', 16,6)

5 = 状态。可以使用 1 到 255 来满足您的目的。1 被系统使用。1以外的任何东西都需要自定义处理

[https://docs.microsoft.com/en-us/sql/t-sql/language-elements/raiserror-transact-sql?redirectedfrom=MSDN&view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/raiserror-transact-sql?redirectedfrom=MSDN&view=sql-server-ver15) state 是从 0 到 255 的整数。负值默认为 1。不应使用大于 255 的值。

step b) 在 c# 中使用 catch (sqlException e) e.state 可以用来检查

以上对我有用。感谢不同地方的不同文章***

# android - 播放视频前询问要播放的视频播放器

> ID：15944631
> 
> 赞同：1
> 
> 时间：2013-04-11T08:59:58.567
> 
> 标签：android, android-mediaplayer, android-video-player

我有一个从互联网播放视频的应用程序，当只有一个视频播放器（默认播放器）时它可以正常工作，但当有更多视频播放器时它会失败。所以我想做的是在播放视频之前询问要播放的播放器。我找到了这篇文章

“[已安装媒体播放器的 android-list](https://stackoverflow.com/questions/12972445/android-list-of-installed-media-players?rq=1) ”

但即使我做 PackageManager packageManager = getPackageManager(); 获取应用程序失败的实例

## 这是代码

```
protected void onCreate(Bundle savedInstanceState){

     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_video);

      videoView = (VideoView) findViewById(R.id.videoView);
      Intent intent = new Intent(Intent.ACTION_VIEW);
      Uri uri = Uri.withAppendedPath(MediaStore.Video.Media.INTERNAL_CONTENT_URI,"1"); 
      intent.setData(uri);
      List<ResolveInfo> playerList;
      PackageManager packageManager = getPackageManager();
      playerList = packageManager.queryIntentActivities(intent, 0);
      ////////recoger variables de principal
      Bundle extras = getIntent().getExtras();
      String url = extras.getString("videoURL");

      if(playerList==null){
          PlayVideo(url);
      }
    }
    private void PlayVideo(String videoURL){

         try{      
             getWindow().setFormat(PixelFormat.TRANSLUCENT);
             MediaController mediaController = new MediaController(Video.this);
             mediaController.setAnchorView(videoView);           
              Uri video = Uri.parse(videoURL);             
              videoView.setMediaController(mediaController);
              videoView.setVideoURI(video);
              videoView.requestFocus();              
              videoView.setOnPreparedListener(new OnPreparedListener(){

                  public void onPrepared(MediaPlayer mp){   
                      mp.setScreenOnWhilePlaying(true);
                      try {
                        mp.prepare();
                    } catch (IllegalStateException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                      progressDialog.dismiss();     
                      videoView.start();
                  }
              });  
         }
         catch(Exception e){
             progressDialog.dismiss();
             System.out.println("Video Play Error :"+e.toString());
             finish();
         } 

    } 
```

这是 logCat

```
04-11 10:58:02.309: E/AndroidRuntime(11816): FATAL EXCEPTION: main
04-11 10:58:02.309: E/AndroidRuntime(11816): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.playvideo/com.example.playvideo.Video}: java.lang.IllegalStateException: Unknown URL
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.os.Looper.loop(Looper.java:130)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at java.lang.reflect.Method.invokeNative(Native Method)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at java.lang.reflect.Method.invoke(Method.java:507)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at dalvik.system.NativeStart.main(Native Method)
04-11 10:58:02.309: E/AndroidRuntime(11816): Caused by: java.lang.IllegalStateException: Unknown URL
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.os.Parcel.readException(Parcel.java:1330)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.os.Parcel.readException(Parcel.java:1276)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.app.ActivityManagerProxy.getProviderMimeType(ActivityManagerNative.java:2843)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.content.ContentResolver.getType(ContentResolver.java:215)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.content.Intent.resolveType(Intent.java:3268)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.content.Intent.resolveTypeIfNeeded(Intent.java:3290)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.app.ContextImpl$ApplicationPackageManager.queryIntentActivities(ContextImpl.java:2112)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at com.example.playvideo.Video.onCreate(Video.java:43)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-11 10:58:02.309: E/AndroidRuntime(11816):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-11 10:58:02.309: E/AndroidRuntime(11816):    ... 11 more 
```

非常感谢您提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:16:34.980

我所做的是通过意图过滤器强制使用媒体播放器播放视频

这是代码

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />  
    <data android:mimeType="video/*" />
    <data android:mimeType="application/sdp" />
    <data android:pathPattern=".*3gp" />
    <data android:pathPattern=".*3GP" />
    <data android:pathPattern=".*mp4" />
    <data android:pathPattern=".*MP4" />
</intent-filter> 
```

它适用于我，希望它适用于所有人

# javascript - 我可以让 chrome-devtools 实际搜索所有 JS 源吗？

> ID：15944633
> 
> 赞同：226
> 
> 时间：2013-04-11T09:00:07.817
> 
> 标签：javascript, google-chrome-devtools

我在 chrome dev-tools 中搜索 JS 文件时遇到问题，过去由`Ctrl`+ `Shift`+激活的搜索`F`总是找到我想要的，但最近（我不确定是哪个更新触发了这个）我正在寻找搜不到

*   内联脚本标签中的 JS

*   iframe 中的 JS。

当涉及内联脚本时，我还发现调用堆栈搞砸了，但是当我尝试用谷歌搜索这些问题时，我只得到了开发工具文档页面，还有其他人注意到这些问题吗？我只是想象这之前有效吗？

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2013-06-24T10:54:18.030

是的，如果你想在内容源中搜索扩展程序和内部浏览器 API 使用的脚本，你可以在 DevTools 的设置中启用它，然后从 DevTools 的任何面板中输入`Ctrl`+ `Shift`+`F`或（在 Mac 上）`Options`+ `Command`+ `F`( ⌥⌘F) 搜索所有来源、片段和文件。

对您可能需要的更有帮助的是在设置 cog 中设置一个工作区，您可以将其映射到文件的本地目录，这些文件将在源文件浏览器侧栏中可用，也可以使用上述快捷方式进行搜索。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-04-11T09:16:23.680

There is an option under [Settings -> Preferences -> Sources](https://developer.chrome.com/docs/devtools/customize/#settings) called "Search in anonymous and content scripts".

I'm not sure how/when I disabled this but enabling it and restarting chrome has fixed all of my problems.

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2015-05-15T11:21:33.257

### 最新版本的开发工具

单击 DevTool 停靠栏右侧的三点图标，然后选择*Search*。

或者直接点击：`Control`- `Shift`-`F`在使用*DevTools* ( `Control`- `Shift`- `I`) 时。

[![DevTools Dock 菜单](https://i.stack.imgur.com/sJ7kS.png)](https://i.stack.imgur.com/sJ7kS.png)

* * *

### 旧版本的*DevTools*

激活 DevTools 常规设置中的“*在内容脚本中搜索*”选项。它将允许[内容脚本](https://developer.chrome.com/extensions/content_scripts)是可搜索的。

然后在*DevTools*面板中，您可以在面板底部搜索源文件。

例如：

![Google Chrome - 内容脚本 - 在源中搜索](https://i.stack.imgur.com/8Fx53.png)

* * *

*如果DevTools*面板底部没有*Search*选项卡，请单击三点图标将其打开。

 *[![Chrome/Chromium - 在源代码文件中搜索 DevTools](https://i.stack.imgur.com/3AfZtm.png)](https://i.stack.imgur.com/3AfZtm.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-03-19T07:55:07.223

我遇到了同样的问题 CTRL+SHIFT+F 不再工作了。

1.  按 f12 打开开发者工具
2.  单击开发人员工具栏右侧的垂直省略号以打开其选项
3.  点击“更多工具”
4.  点击“搜索”

[![在此处输入图像描述](https://i.stack.imgur.com/njGnc.png)](https://i.stack.imgur.com/njGnc.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-10-31T05:45:06.013

在最新版本中，即使启用“在匿名和内容脚本中搜索”，CTRL+SHIFT+F 也不再起作用。

**步骤** 1) 您需要单击开发工具右上角或左下角的三个编辑。 [![在此处输入图像描述](https://i.stack.imgur.com/z6du7.png)](https://i.stack.imgur.com/z6du7.png)

2）您将看到您想要的搜索选项。

3) 搜索选项卡也出现在底部。因此它可能不可见，因此您可能必须**向上拖动选项卡**。 [![在此处输入图像描述](https://i.stack.imgur.com/gA6SN.png)](https://i.stack.imgur.com/gA6SN.png)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-04-10T16:52:37.467

如果它仍然不起作用，请检查此扩展程序是否安装在您的 chrome 中：

表单填写：[https ://chrome.google.com/webstore/detail/form-filler/bnjjngeaknajbdcgpfkgnonkmififhfo?hl=en](https://chrome.google.com/webstore/detail/form-filler/bnjjngeaknajbdcgpfkgnonkmififhfo?hl=en)

CTRL+SHIFT+F 仍然对我不起作用，但后来我发现 chrome 扩展“Form Filler”覆盖了控制台命令中的“search all”

要更改它：转到 url --> chrome://extensions/

然后转到右下角：键盘快捷键，您可以更改 + CTRL+SHIFT+F 命令以填充表单

然后 chrome 搜索控制台中的命令 CTRL+SHIFT+F 再次起作用*

# jquery - 在 Chrome 中调试时如何忽略 jQuery 断点？

> ID：15944636
> 
> 赞同：8
> 
> 时间：2013-04-11T09:00:23.790
> 
> 标签：jquery, debugging, google-chrome

每当我尝试调试我的网站时，它会在 jQuery .js 文件中多次停止，即使那里没有断点也是如此。这很烦人，因为我只想调试在代码中放置断点的位置。

如何让chrome在调试时忽略jQuery核心文件，只关注我放置断点的地方？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T09:10:30.403

当使用 Chrome 进行调试时，调试器在 jQuery 文件中停止的唯一原因是您`F11`在调试时使用 (step-in) 而不是`F8`(pause/continue execution) 或者遇到错误并且您已`pause on errors`启用。

当然，任何`debugger;`行也会强制执行停止。

要忽略错误，底部选项卡中有一个小圆圈图标，`Sources`可以点击进入 3 种状态。

*   灰色状态 = 不要暂停异常
*   蓝色状态 = 暂停所有异常
*   紫色状态 = 仅在未捕获的异常时暂停

有关我所指的图标，请参见下图，单击它以获取不同的状态。

此外，在图像的右侧，您可以看到不同的部分，例如：`DOM Breakpoints`和`XHR Breakpoints`等。检查那些也没有断点，以防万一。

希望这可以帮助。

![在此处输入图像描述](https://i.stack.imgur.com/GqAVO.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-13T00:08:56.537

我相信您正在寻找一个名为“黑盒”的最新开发人员功能。该功能将允许调试器在单步调试时实质上单*步*调试库代码。

您可以在这里阅读更多相关信息：[http ://www.divshot.com/blog/tips-and-tricks/ignoring-library-code-while-debugging-in-chrome/](http://www.divshot.com/blog/tips-and-tricks/ignoring-library-code-while-debugging-in-chrome/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-21T23:04:20.307

谷歌浏览器现在原生支持黑盒（忽略某些文件中的异常）。

`development tools > settings > Manage framework blackboxing`

更简单的是，只需右键单击文件并说`Blackbox this script`

Firefox 甚至可以自动对缩小的 JS 文件进行黑盒处理！

# javascript - 在 javascript 中获取 XML 节点子节点

> ID：15944637
> 
> 赞同：0
> 
> 时间：2013-04-11T09:00:25.800
> 
> 标签：javascript, html, xml

我正在寻找解析这样的 XML 文件

```
<class>
    <subject>
        <knowledgeLevel> 1 </knowledgeLevel>
        <subjectName> Try1 </subjectName>
        <theory>
            <tutorial> Quickly Explain Try1 </tutorial>
            <full> Largely Explain Try1 </full>
        </theory>
        <example>
            <id> 1 </id>
            <code> some code </code>
            <level> easy </level>
        </example>
        <example>
            <id> 2 </id>
            <code> some code </code>
            <level> hard </level>
        </example>
    </subject>
</class> 
```

考虑到文件中最终会出现多个主题，我如何让理论和示例的 subChilds 用 Ja​​vascript 编写 HTML 表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:40:31.640

这个简单的脚本应该可以满足您的目的；它将 XML 包装在一个临时`<div>`元素中，以便您可以遍历它。

```
var div = document.createElement('div');

div.innerHTML = xml;

function getChildElements(node, fn)
{
  [].forEach.call(node.childNodes, function(node) {
    if (node.nodeType == 1) {
      fn(node);
    }
  });
}

getChildElements(div.firstChild, function(subject) {
  getChildElements(subject, function(info) {
      console.log(info.tagName);
      console.log(info.textContent);
  });
}); 
```

[**演示**](http://jsbin.com/obutuj/2/)

# android - 不幸的是，应用程序已停止 - android.os.NetworkOnMainThreadException

> ID：15944642
> 
> 赞同：-3
> 
> 时间：2013-04-11T09:00:50.940
> 
> 标签：android

我正在编写一个应用程序，我允许用户在其中输入他们的详细信息，但是我收到一个错误，每当用户单击提交按钮时，错误都会显示：**不幸的是应用程序已停止**

*android.os.NetworkOnMainThreadException*

**Logcat 说：**

```
04-11 14:25:07.297: E/AndroidRuntime(971): FATAL EXCEPTION: main
04-11 14:25:07.297: E/AndroidRuntime(971): android.os.NetworkOnMainThreadException
04-11 14:25:07.297: E/AndroidRuntime(971):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
04-11 14:25:07.297: E/AndroidRuntime(971):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
04-11 14:25:07.297: E/AndroidRuntime(971):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
04-11 14:25:07.297: E/AndroidRuntime(971):  at libcore.io.IoBridge.connect(IoBridge.java:112)
04-11 14:25:07.297: E/AndroidRuntime(971):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
04-11 14:25:07.297: E/AndroidRuntime(971):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
04-11 14:25:07.297: E/AndroidRuntime(971):  at java.net.Socket.connect(Socket.java:842)
04-11 14:25:07.297: E/AndroidRuntime(971):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
04-11 14:25:07.297: E/AndroidRuntime(971):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
04-11 14:25:07.297: E/AndroidRuntime(971):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-11 14:25:07.297: E/AndroidRuntime(971):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-11 14:25:07.297: E/AndroidRuntime(971):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-11 14:25:07.297: E/AndroidRuntime(971):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-11 14:25:07.297: E/AndroidRuntime(971):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-11 14:25:07.297: E/AndroidRuntime(971):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-11 14:25:07.297: E/AndroidRuntime(971):  at com.erachnida.restaurant.versionoct.cart.RegistrationActivity.getHttpPost(RegistrationActivity.java:183)
04-11 14:25:07.297: E/AndroidRuntime(971):  at com.erachnida.restaurant.versionoct.cart.RegistrationActivity.SaveData(RegistrationActivity.java:135)
04-11 14:25:07.297: E/AndroidRuntime(971):  at com.erachnida.restaurant.versionoct.cart.RegistrationActivity$1.onClick(RegistrationActivity.java:49)
04-11 14:25:07.297: E/AndroidRuntime(971):  at android.view.View.performClick(View.java:4202)
04-11 14:25:07.297: E/AndroidRuntime(971):  at android.view.View$PerformClick.run(View.java:17340)
04-11 14:25:07.297: E/AndroidRuntime(971):  at android.os.Handler.handleCallback(Handler.java:725)
04-11 14:25:07.297: E/AndroidRuntime(971):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-11 14:25:07.297: E/AndroidRuntime(971):  at android.os.Looper.loop(Looper.java:137)
04-11 14:25:07.297: E/AndroidRuntime(971):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-11 14:25:07.297: E/AndroidRuntime(971):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 14:25:07.297: E/AndroidRuntime(971):  at java.lang.reflect.Method.invoke(Method.java:511)
04-11 14:25:07.297: E/AndroidRuntime(971):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-11 14:25:07.297: E/AndroidRuntime(971):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-11 14:25:07.297: E/AndroidRuntime(971):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:02:11.517

**在更高版本的 Android 中，**您不能在主线程中调用网络操作。所以采取一个工作线程或异步任务来执行网络操作，如调用**Web服务**，下载图像等。

这不允许使 android 应用程序更具响应性和流畅性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:05:05.637

当您在蜂窝和更高版本的主线程上建立网络连接时，就会发生这种情况。您应该使用它`AsyncTask`来执行所有网络操作。`AsyncTask`在后台线程上执行您的操作。单击[此处](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&ved=0CGIQFjAF&url=http%3A%2F%2Fwww.vogella.com%2Farticles%2FAndroidBackgroundProcessing%2Farticle.html&ei=gnxmUdbCCIWQrgeQ1ICgCQ&usg=AFQjCNFKrZXBLP-ji0FvKge-lvQRBkp-qw&sig2=7qtLD0SYXfuJdgJwfD930g&bvm=bv.45107431,d.bmk&cad=rja)和[此处](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fos%2FAsyncTask.html&ei=gnxmUdbCCIWQrgeQ1ICgCQ&usg=AFQjCNE8gLVXz1Hwq4rI8oxRkZNHjhRzpQ&sig2=KGbzkzXLXKtBD4WUUvrtfw&bvm=bv.45107431,d.bmk)了解有关`AsyncTask`.

# c++ - 为什么在 C++ 静态 DLL 链接中使用 LIB？

> ID：15944644
> 
> 赞同：1
> 
> 时间：2013-04-11T09:00:55.977
> 
> 标签：c++, dll, static-linking

我知道如何实现静态和运行时 dll 链接，但我更感兴趣的是为什么静态 dll 链接需要 dll 的 LIB（静态库）？通常 LIB 只是一个代码容器（方法实现），但比较静态 dll 链接和运行时 dll 链接（LoadLibrary、GetProcAddress ...）我得到的印象是 LIB 用于以某种方式获取 dll 过程地址？也许我完全错了，我不知道..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:45:12.447

与 DLL 一起使用的 LIB 库包含“存根”，这些“存根”将您编写的代码与 DLL 中的代码“连接”起来。通常，它只是共享库中实际代码的“跳转指令”。它还包含对要使用的实际共享库的引用，以便将可执行文件引入内存的加载器可以在此时加载相关的共享库。

当您使用运行时链接来使用共享库时，您的代码负责加载库，并解析共享库中的哪些函数正在被使用。

# java - soapui-4.5.1.jar 和 xmlbeans-2.4.0 的条件条款

> ID：15944649
> 
> 赞同：0
> 
> 时间：2013-04-11T09:01:07.447
> 
> 标签：java, web-services, licensing, gnu, soapui

我将使用来自 maven 存储库[http://www.soapui.org/repository/maven2/eviware](http://www.soapui.org/repository/maven2/eviware)的 java 库soapui.jar 和 xmlbeans.jar 它们在什么许可证下？如果它完全免费，但我不会提供对我的源代码的访问权限并且我打算将此应用程序作为我自己的产品传播，我可以将它们添加到我的 Web 应用程序中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:06:10.220

SoapUI 在[GNU 宽通用公共许可证](http://www.soapui.org/Developers-Corner/soapui-license.html)下获得许可。

XMLBeans 在[Apache License](http://www.apache.org/licenses/LICENSE-2.0)下获得许可。你可以在[这里](http://www.inteist.com/2010/05/how-to-use-apache-2-0-in-commercial-products-explained-in-simple-terms/)找到一个很好的总结。

在回答您的问题时，您可以将它们添加到您的 Web 应用程序中（如果它是免费的），您可以将它们归功于该库并向其提供许可证副本。

# ios - 复合视图的 addSubview 不起作用

> ID：15944650
> 
> 赞同：1
> 
> 时间：2013-04-11T09:01:07.753
> 
> 标签：ios, objective-c, iphone, ios5, addsubview

我有一个`UIView`由两个子视图组成的-

```
@interface ANImageLabel : UIView

@property (strong, nonatomic) UIImageView *imageView;
@property (strong, nonatomic) UILabel *label;

- (id)initWithFrameAtOrigin:(CGPoint)origin imageViewSize:(CGSize)imageViewSize labelSize:(CGSize)labelSize;

@end

- (id)initWithFrameAtOrigin:(CGPoint)origin imageViewSize:(CGSize)imageViewSize labelSize:(CGSize)labelSize
{
    CGRect frame = CGRectZero;
    frame.origin = origin;

    // height should be the max of both heights
    CGFloat height = MAX(imageViewSize.height, labelSize.height);
    CGFloat width = imageViewSize.width + labelSize.width;
    imageViewSize.height = labelSize.height = frame.size.height = height;
    frame.size.width = width;

    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        CGRect imageViewFrame = CGRectZero;
        imageViewFrame.origin = origin;
        imageViewFrame.size = imageViewSize;
        self.imageView = [[UIImageView alloc] initWithFrame:imageViewFrame];
        self.imageView.contentMode = UIViewContentModeCenter;
        [self addSubview:self.imageView];

        CGRect labelFrame = CGRectZero;
        labelFrame.origin.x = origin.x + imageViewSize.width;
        labelFrame.origin.y = origin.y;
        labelFrame.size = labelSize;
        self.label = [[UILabel alloc] initWithFrame:labelFrame];
        [self addSubview:self.label];
    }
    return self;
} 
```

我想在另一个视图 ( ) 中`alloc-init`将此视图 ( ) 的一个实例添加为子视图。但是，如果我直接将此视图添加为子视图，则它不起作用。`anImageLabelInstance``mySuperView`

```
[mySuperView addSubview:anImageLabelInstance]; <--- DOESN'T WORK, WHY? 
```

另一方面，如果我单独添加视图，它可以工作-

```
 [anImageLabelInstance.subviews enumerateObjectsUsingBlock:^(UIView *view, NSUInteger idx, BOOL *stop) {
        [mySuperView addSubview:view];
    }]; 
```

的描述`addSubview`说

> 如果视图已经有一个超级视图并且该视图不是接收者，则此方法会在使接收者成为其新的超级视图之前删除先前的超级视图。

但是，由于`anImageLabelInstance`在此操作之前最初没有将其作为子视图添加到任何其他视图，为什么我需要单独添加视图？视图的所有子视图不应该用`addSubview`方法添加吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:27:13.430

看起来您没有正确设置 2 个子视图的框架。您将*原点*传递给 init 方法，可以设置*ANImageView*框架，但不能设置子视图。

因此，假设您通过了一个原点 (200, 200)：ANImageLabel 视图将放在您的**mySuperView**上 (200, 200)。

如果您随后将 2 个子视图设置为相同的原点，它们将被放置在相对于 ANImageLabel 框架的坐标 (200, 200) 上，因此它们可能会落在实际视图框架之外。更准确地说

```
|''''''''''''''| -> your mySuperView
|              |
|              |
|              |
|              |
|    |''''|--- |----> you ANImageView on (200, 200)
|    |    |    |
|    ''''''    |
|              |
|           ---|-------> somewhere around here (but inside the ANImageView) you have your 2 
|              |         subviews, centered in relation to the ANImageViewFrame (so (400, 400)  
''''''''''''''''         in relation to the mySuperView) 
```

在这种情况下，这 2 个子视图将在 ANImageView 的可见区域之外，因此被隐藏。当然，如果您随后单独拾取它们并将它们直接放在**mySuperView**中，它们的原点 (200, 200) 实际上将相对于**mySuperView**框架，并且可能在其可见区域中，因此不会被隐藏。

试着把这个：

```
 CGRect imageViewFrame = CGRectZero;
        imageViewFrame.origin = origin;
        imageViewFrame.size = imageViewSize;
        self.imageView = [[UIImageView alloc] initWithFrame:imageViewFrame];
        self.imageView.contentMode = UIViewContentModeCenter;
        [self addSubview:self.imageView];

        CGRect labelFrame = CGRectZero;
        labelFrame.origin.x = origin.x + imageViewSize.width;
        labelFrame.origin.y = origin.y;
        labelFrame.size = labelSize;
        self.label = [[UILabel alloc] initWithFrame:labelFrame];
        [self addSubview:self.label]; 
```

进入这个：

```
 CGRect imageViewFrame = CGRectZero;
    imageViewFrame.origin = CGPointMake(0,0);
    imageViewFrame.size = imageViewSize;
    self.imageView = [[UIImageView alloc] initWithFrame:imageViewFrame];
    self.imageView.contentMode = UIViewContentModeCenter;
    [self addSubview:self.imageView];

    CGRect labelFrame = CGRectZero;
    labelFrame.origin.x = imageViewSize.width;
    labelFrame.origin.y = 0;
    labelFrame.size = labelSize;
    self.label = [[UILabel alloc] initWithFrame:labelFrame];
    [self addSubview:self.label]; 
```

看看它是否得到修复。

# r - 如何将绘图中的 x 值作为函数内的日期？

> ID：15944652
> 
> 赞同：1
> 
> 时间：2013-04-11T09:01:08.103
> 
> 标签：r, text, plot

我有三个文本文件，每个仅包含 4 列（每列有 477 个值）。我设法像这样绘制它们：绘制每个文本文件中的第一列并对其余列执行相同的操作（附图）。如您所见，x 轴显示为数字，但我需要将其显示为日期，因此我尝试指定所需的日期，但出现与长度相关的错误。我确信日期范围 03/09/2010 到 23/12/2012 的长度与值 477 相同。感谢任何帮助。

```
ref= read.table("D:\\AS_asc.txt", sep="",header=TRUE)
sour1 = read.table("D:\\rre.txt", sep="",header=TRUE) 
  sour2= read.table("D:\\re_asc.txt", sep="",header=TRUE)
  starttime <- strptime("20100903", "%Y%m%d")
   endtime <- strptime("20111223 ", "%Y%m%d")
     xrange <- c(starttime, endtime)
   columns <- paste0("X", 1:4)
   par(mfrow=c(2,2))
  lapply(
 columns,
  function(column)
  {

 plot(xrange,
   ref[[column]],

   ylab = "[[column]]",
  xlab = "[[column]]",
   col  = 2 , main = paste( column )
 )

points(sour1[[column]], col = 'green')
 points( sour2[[column]], col = 'blue')

 }
 ) 
```

我收到了这个错误：

```
 Error in xy.coords(x, y, xlabel, ylabel, log) : 
 'x' and 'y' lengths differ 
```

我的数据样本：

```
 "X0" "X1" "X2" "X3" 
  0.0369809285234571 0.0222775883686665 0.031094652297596 0.0814025488998284 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T11:20:17.283

问题是这一行：`xrange <- c(starttime, endtime)`. 这将创建一个只有两个日期的向量。您正在尝试将这两个日期与 477 个数据的向量相对应，因此会出现错误。解决方案是创建一个包含 477 个日期的序列来匹配数据。`xrange <- seq(from=as.Date(starttime), to=as.Date(endtime), by=1)`

我还修复了您`points`将日期向量包含为 x 的请求。

```
ref= data.frame(matrix(runif(477*4),ncol=4))    #dummy random data
sour1 = data.frame(matrix(runif(477*4),ncol=4)) #dummy random data
sour2= data.frame(matrix(runif(477*4),ncol=4))  #dummy random data
starttime <- strptime("20100903", "%Y%m%d")
endtime <- strptime("20111223 ", "%Y%m%d")
xrange <-  seq(from=as.Date(starttime), to=as.Date(endtime), by=1) #create date vector
columns <- paste0("X", 1:4)
par(mfrow=c(2,2))
lapply(
 columns,
  function(column)
  {
   plot(xrange,
   ref[[column]],

   ylab = "Unit of the y data",    #more descriptive label
   xlab = "Date",                   #more descriptive label
   col  = 2 , main = paste(column)
   )
points(xrange, sour1[[column]], col = 'green') #add date range
points(xrange, sour2[[column]], col = 'blue') #add date range
 }
) 
```

![在此处输入图像描述](https://i.stack.imgur.com/8xotc.png)

# shell - Shell 脚本：过滤文本并附加到变量中

> ID：15944654
> 
> 赞同：0
> 
> 时间：2013-04-11T09:01:13.137
> 
> 标签：shell

我需要 shell 命令来执行以下操作：

输入：

```
 "M       ABC/PQR/src/MyFile.h" 
```

输出：

```
 "ABC/PQR/src/MyFile.h" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:15:13.173

如果您只想打印第二个文本块，这将起作用：

```
echo "\"M       ABC/PQR/src/MyFile.h\"" | awk '{print $2}' 
```

为了挑战我们使用`sed`选项，这也将起作用：

```
echo "\"M       ABC/PQR/src/MyFile.h\"" | sed 's/M[ ]*//' 
```

我看到@Fredrik Pihl 的评论指出`"`应该保留引号。在这种情况下，第二个版本将起作用。

# c# - 如何使用 c sharp 的可分配类型输出调用 fortran 子例程

> ID：15944656
> 
> 赞同：1
> 
> 时间：2013-04-11T09:01:16.260
> 
> 标签：c#, fortran90

我已经尝试了几个小时。我有 Fortran 代码，想在我的 c sharp 项目中使用它。

```
 subroutine lean(nx,nlam,flmin,
  ulam,thr,isd,intr,maxit,lmu,a0,ca,ia,nin,rsq,alm,nlp,jerr)
  real x(no,ni),y(no),w(no),vp(ni),ca(nx,nlam),cl(2,ni)                 
  real ulam(nlam),a0(nlam),rsq(nlam),alm(nlam)                          
  integer jd(*),ia(nx),nin(nlam)                                        
  real, dimension (:), allocatable :: vq;  
  ... 
```

我在我的 c sharp 中使用了以下代码来导入这个子例程。

```
 [DllImport("lean.dll", CallingConvention = CallingConvention.Cdecl)]
    private static extern void lean_(
        ref int nx, 
        ref int nlam,
        ref float flmin,
        ref float[] ulam,
        ref float thr, 
        ref int isd,
        ref int intr, 
        ref int maxit, 
        ref int lmu,
        [In,Out]  ref float[] a0,
        [In,Out]  ref float[,] ca,
        [In,Out]  ref int[] ia,
        [In,Out]  ref int[] nin,
        [In,Out]  ref float[] rsq,
        [In,Out]  ref float[] alm, 
        ref int nlp, 
        ref int jerr); 
```

我得到了这个错误

尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

在这个函数中，有两个我不知道如何处理的参数，jd 是 jd(*) 类型，而 vp 是可分配的。其余的应该没问题。任何人都知道如何处理这些参数类型？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:17:30.383

调用约定应该是 StdCall 或 ThisCall。Cdecl 表示调用者负责参数的入栈和出栈。StdCall 表示调用者负责入栈，而被调用者负责出栈。ThisCall 通过将第一个参数放入 ECX 并压入堆栈的其余部分来节省时间。Cdecl 仅由 C/C++ 和任何使用可变参数概念的编程语言使用。世界其他地方使用 StdCall。不知道什么使用ThisCall。

您可能需要在整个调用周围放置一个不安全的 {}。

jd 和 vq 由 Fortran 内部分配，因此您无需担心它们。大概它们在退出之前被释放。Fortran 有自己的堆。

如果它是多线程的，则需要将数组声明为固定的。当 Fortran 处理它们时，它们不能移动。

# java - 在枚举 javax.ws.rs.core.Response.Status.Family 中找不到 Status$Family

> ID：15944658
> 
> 赞同：0
> 
> 时间：2013-04-11T09:01:22.980
> 
> 标签：java, jersey, jdeveloper, jsr311

我正在使用 JDeveloper 10g 开发一个项目（是的，想象一下）。
该项目包括使用 Jersey 开发 RESTful Web 服务。
让我发疯的是，每当我`javax.ws.rs.core.Response`尝试构建我的项目时，我都会遇到这个错误：

```
Error: Status$Family not found  in enum javax.ws.rs.core.Response.Status.Family 
```

[我在java.net](http://java.net/projects/jersey/lists/users/archive/2010-06/message/16)中找到了这个线程。正如保罗所说，我认为这将是一些版本冲突（jre 5）。所以我降级到 Jersey 1.2，并按照建议使用了 jsr311-api-111.jar，但没有机会。
有人知道如何解决这个问题吗？PS：同样的项目，可以在 JDeveloper 11g 中很好地构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T15:20:30.407

在编译器下的 JDEV 10g 项目属性中，选中使用 Javac 复选框。JDEV 10g 中 Make 的默认编译器是 ojc，这会干扰 jsr311。它将使用 javac 编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T03:41:02.103

就我而言，我在代码中使用了完全限定名称，而不是导入类

```
javax.ws.rs.core.Response.ResponseBuilder builder = 
                javax.ws.rs.core.Response.status(javax.ws.rs.core.Response.Status.OK);
javax.ws.rs.core.Response response 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T10:12:57.027

您指的是 JSR-311 API

[https://jsr311.java.net/nonav/javadoc/index.html?javax/ws/rs/core/Response.Status.Family.html](https://jsr311.java.net/nonav/javadoc/index.html?javax/ws/rs/core/Response.Status.Family.html)

[您可以在https://jsr311.java.net/](https://jsr311.java.net/)中找到该 jar

用旧版本替换新 jar 以解决此问题。祝你好运！

# php - 从没有连接的移动设备缓存 HTML5 应用程序缓存中的 PHP POST 数据

> ID：15944659
> 
> 赞同：0
> 
> 时间：2013-04-11T09:01:24.107
> 
> 标签：php, javascript, ios, html, web-applications

这个问题可能有点笼统，但我想就如何解决这个问题提出一些想法。

基本上，我开发了一个混合 iOS 应用程序，它的 iOS 端只是一个 UIWebView，带有一些额外的螺栓，可以从 UI webview 的各个部分获取数据并以不同的方式向用户显示它们。

该应用程序允许您更新各种事物的实时状态，因此有一个下拉菜单，其中包含以下选项：

```
 Empty
 Full
 Unavailable 
```

问题是在现在使用它的环境中，蜂窝连接非常不完整，没有无线网络。所以我想做的是让网络应用程序检查是否有连接，以及是否没有在本地缓存数据。我相信我可以使用 HTML5 应用程序缓存来做到这一点？然后当再次连接时，我希望它检查缓存文件中的新数据并提交。

这是可能的还是我需要寻找其他地方？如果可能的话，有没有人有任何建议或提示可以提供帮助？非常感谢您的帮助/建议。

编辑：

或者，有没有办法让我从 UIWebView 中获取 AJAX POST 数据，然后将其存储，以便在应用程序再次找到连接时提交它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:24:10.193

所以，我已经研究出如何从 UIWebView 中获取 POST 数据，所以我现在应该能够将该数据存储在 CoreData 中，然后使用 javascript 执行一些目标 C 将数据从 CoreData 中发布到数据库。

# android - 在 Android 上使用 Spring 上传 RoboSpice 文件

> ID：15944660
> 
> 赞同：2
> 
> 时间：2013-04-11T09:01:32.960
> 
> 标签：android, spring, rest, upload, robospice

我一直在尝试了解如何使用带有 Spring 的 RoboSpice 将文件上传到我的服务器，但我找不到有效的示例。从我确实找到的一个示例中，我构建了：

```
 class UploadJsonRequest extends SpringAndroidSpiceRequest<APIResponseUpload> {

          public UploadJsonRequest() {
                super( APIResponseUpload.class );
            }

            @Override
            public APIResponseUpload loadDataFromNetwork() throws Exception {

                MultiValueMap<String, Object> parts = new LinkedMultiValueMap<String, Object>();
                for(org.calflora.observer.model.Attachment a : o.attachments){

                    parts.add(a.name, new FileSystemResource(a.localPath));

                }
                //parts.add("record", base);
                return getRestTemplate().postForObject(URI, parts, APIResponseUpload.class);
            } 
     }
    return new UploadJsonRequest(); 
```

但是，这给了我错误：

```
Caused by: org.springframework.web.client.HttpClientErrorException: 404 err: org.apache.commons.fileupload.FileUploadBase$InvalidContentTypeException: the request doesn't contain a multipart/form-data or multipart/mixed stream, content type header is application/json;charset=UTF-8 
```

好的，所以这似乎表明我需要做一些额外的事情来表明数据应该使用 multipart/form-data 传输。如果这是正确的，这是如何完成的？如果这不正确，那么规范的方法是什么，因为这显然是一种常见的需求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T02:42:34.317

就我而言，以下解决了这个问题

```
HttpEntity<MultiValueMap<String, Object>> requestEntity = new HttpEntity<MultiValueMap<String, Object>>(parts, requestHeaders);

RestTemplate restTemplate = getRestTemplate();
restTemplate.getMessageConverters().add(new FormHttpMessageConverter());
restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());

return restTemplate.postForObject(URI, requestEntity, APIResponseUpload.class); 
```

但是，根据 Spring 的文档，这不应该手动设置消息转换器。

# c - 构建线程安全的多平台 C 库的正确方法是什么？

> ID：15944664
> 
> 赞同：11
> 
> 时间：2013-04-11T09:01:38.920
> 
> 标签：c, gcc, thread-safety, pthreads

考虑以下简单的 C 程序，

```
#include <errno.h>
int
main(int argc, char* argv[]) {
  return errno;
} 
```

在 Solaris 上编译时，此代码的行为取决于`-D_REENTRANT`.

```
solaris$ cc -E test.c | grep return
  return errno;
solaris$ cc -D_REENTRANT -E test.c | grep return
  return  ( * ( ___errno ( ) ) ); 
```

后一个版本是线程安全的。如果我们在 Linux 上编译相同的代码，我们会得到相同的行为，独立于`-D_REENTRANT`

```
linux$ gcc -E test.c | grep return
  return (*__errno_location ());
linux$ gcc -D_REENTRANT -E test.c | grep return
  return (*__errno_location ()); 
```

Solaris'`cc`有选项`-mt`，这意味着'`-D_REENTRANT`一样。然而，对于一个库来说，指定这些多线程选项似乎很糟糕，因为它对线程运行时注入了不必要的依赖。但是，如果库需要是线程安全的（包括 errno），那么在库和派生代码的编译时都需要线程安全语义。在 Linux 上，这很容易，因为 errno 始终是线程本地的，但正如刚才演示的那样，在其他系统上并不能保证这一点。`gcc``-pthread`

这导致了一个问题：线程安全库如何正确编译和分发头文件？一种选择是`#define _REENTRANT`在主标题中，但如果`#include <errno.h>`在库标题包含之前发生，这会导致问题。另一种选择是使用 编译库，如果未定义`-D_REENTRANT`，则使用主标头。`#error``_REENTRANT`

制作线程安全库并确保它与链接的代码正确互操作的正确/最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:58:21.450

我目前无法访问任何 Solaris 机器，因此无法对此进行测试。但是，当您将`#define _POSIX_C_SOURCE 200112L`第一行放入`test.c`（在包含之前`<errno.h>`）时会发生什么？如果您的 Solaris 是 POSIX 兼容的，那么应该可以`errno`扩展为线程安全版本。这是因为 POSIX 定义`errno`如下：

> 对于进程的每个线程，*errno*的值不应受到函数调用或其他线程对*errno的赋值的影响。*

因此，这可以移植到任何符合 POSIX 的系统。事实上，如果您想编写符合 POSIX 的应用程序代码，那么您应该*始终*定义`_POSIX_C_SOURCE`适合您所针对的 POSIX 最低版本的值。在包含任何标题之前，该定义应位于每个源文件的顶部。从 2001 版标准开始：

> 严格符合 POSIX 应用程序是只需要 IEEE Std 1003.1-2001 中描述的设施的应用程序。这样的应用：
> 
> ...
> 
> 8\. 对于 C 编程语言，应在包含任何标头之前将 _POSIX_C_SOURCE 定义为 200112L

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T04:49:38.800

如果您的库使用 autoconf，您可能希望使用[AC_USE_SYSTEM_EXTENSIONS](https://www.gnu.org/software/autoconf/manual/autoconf-2.64/html_node/Posix-Variants.html)宏。该宏设置了一些特定于目标的定义，这些定义启用了 POSIX +扩展语义。我目前没有要测试的 Solaris 系统，但我相信 _POSIX_PTHREAD_SEMANTICS 应该启用线程安全的 errno。至少它启用了 POSIX _r() 函数，而不是 Solaris 默认提供的 POSIX 草案 _r() 变体。

# iphone - 获取 ID3 标签而不在 iphone 应用程序中下载整个文件？

> ID：15944665
> 
> 赞同：2
> 
> 时间：2013-04-11T09:01:41.167
> 
> 标签：iphone, objective-c, url, mp3, id3

是否可以在不下载孔文件的情况下获取 ID3 标签（尤其是持续时间）？

我需要从 http url 获取 mp3 文件的持续时间。

我试过这样做：

`AVAsset *asset = [AVURLAsset URLAssetWithURL:url options:nil]; NSString *duration = [NSString stringWithFormat:@"%.2f",CMTimeGetSeconds(asset.duration)];`

但它需要时间，尤其是当它是一个大文件时。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:06:10.123

**简短回答：是**的，如果它们是 ID3v2 标签

**您要阅读哪个 ID3 Tag 版本？**

**ID3v1 标签**位于文件末尾，在最后 128 个字节中。使用 Net::HTTP 似乎无法向前搜索文件末尾并仅读取最后 N 个字节。如果您尝试使用 headers = {"Range" => "bytes=128-"} ，它似乎总是下载完整的文件。resp.body.size => 文件大小。但没有大的损失，因为 ID3 版本 1 在这一点上已经过时了，因为它的限制，例如固定长度格式，只有 ASCII 文本，...）。iTunes 使用 ID3 版本 2.2.0。

**ID3v2 标签**位于文件的开头 - 以支持流式传输 - 您可以通过 HTTP 协议 >= 1.1 下载包含 ID3v2 标头的 MP3 文件的初始部分

我之前回答了几乎相同的问题，这是专门针对 Ruby 实现的。

**请检查这个问题：** [Read ID3 Tags of Remote MP3 File in Ruby/Rails?](https://stackoverflow.com/questions/7656950/read-id3-tags-of-remote-mp3-file-in-ruby-rails)

* * *

**继续..** 我提到的另一个问题中的 Ruby 代码是一个功能齐全的示例。

您可以设置要获取的字节的预定大小，该大小足够大，以至于您假设它包含完整的 ID3 标记，例如 1000 字节

然后，您使用您喜欢的 HTTP 库为您使用的任何语言打开一个 HTTP 连接，但请确保 HTTP 协议的版本是 >= 1.1 ，并且您使用 HTTP 选项 "Range" 读取前 1000 字节，这仅从您尝试通过 HTTP 访问的文件中下载给定范围的字节。

iOS 上的具体实现取决于您使用的库。

**下面是一个在 Objective-C 中的 GET 请求示例：** [Simple objective-c GET request](https://stackoverflow.com/questions/9404104/simple-objective-c-get-request)

您需要做的就是将 Range-header 传递给指定范围的请求。

请参阅 API：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)

还要检查 Range 标头字段需要如何格式化的示例：

[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)

例如，这是 Range 标头的语法：

```
 Range: bytes=0-1000 
```

您需要通过 addValue:forHTTPHeaderField 实例方法设置此标头。

# opengl - 如果我使用纹理作为背景，glucylinder 不起作用

> ID：15944670
> 
> 赞同：-1
> 
> 时间：2013-04-11T09:01:50.247
> 
> 标签：opengl, textures

我的场景中有很多线条、三角形和四边形，以及一些圆柱体（胶缸）。一切都很完美。我为背景（图片）创建了纹理。所以我可以在背景上画出完全相同的线条、三角形和四边形。我移动和旋转它们没有任何问题。但是在我停用背景之前，圆柱体不再出现。我试图禁用有关纹理的所有内容，但我根本没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T10:41:04.927

解决了！

我发现了错误：我在绘制圆柱体时使用了 PushMatrix 和 PopMatrix。但是，有了新的背景，我修改了 MatrixMode，所以圆柱体被画出了屏幕。现在，在 PushMatrix 之前，我修复了 MatrixMode，一切正常

# c# - WP8 Facebook 连接崩溃

> ID：15944671
> 
> 赞同：0
> 
> 时间：2013-04-11T09:01:51.787
> 
> 标签：c#, xaml, windows-phone-8, windows-phone

我试图寻找解决我的问题的方法，但不幸的是无济于事:(

我最初是根据我在网上找到的一个示例（转录）自己编写代码，但在使用连接时我不断收到错误。它通过登录一直工作，将应用程序安装到 Facebook 帐户，但最后一点（使用密钥重定向）失败。这是错误：（没有足够的代表在这里发布）

[http://i.stack.imgur.com/Y3Wf2.png](http://i.stack.imgur.com/Y3Wf2.png)

起初我以为我的代码可能出错了，但事实并非如此......当我下载示例代码（[[FOUND HERE]](http://www.developer.nokia.com/Community/Wiki/Integrate_Facebook_to_Your_Windows_Phone_Application)）时，我在编译和登录 Facebook 时遇到了同样的问题。

现在我知道该应用程序已成功安装到 Facebook 上的用户帐户，因为在我完成该过程后（即使出现错误），我可以在 Facebook 中管理我的应用程序，并且所有这些都使用我的个人信息。

我不知道如何克服这个......哦，伟大的互联网大师，我的下一步行动是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:04:20.147

感谢[Neil Turner](https://stackoverflow.com/users/247257/neil-turner)的惊人建议，这已经解决了。

只需按照他上面评论的建议使用 Facebook .NET SDK。

# php - PHP OOP：在包含的子函数中使用 $this

> ID：15944672
> 
> 赞同：0
> 
> 时间：2013-04-11T09:01:55.920
> 
> 标签：php, oop

我有一个案例在类函数的包含函数中使用 $this 上下文。这个用文字解释起来有点复杂，所以我在这里给出 src 代码。

**类文件：agents_class.php**

```
require_once(dirname(__FILE__).DIRECTORY_SEPARATOR."../../common/apstract_service.php");
class class_proforma extends service
{
    function __construct(){
        parent::__construct();
    }
    function getForm($params=false, $do=1){
        if($params){
            include("path/to/custom_func.php");
            return call_user_func_array("custom_func", func_get_args());
        }else{
            return include("another_func.php");
        }
    }
} 
```

**custom_func.php 文件：**

```
<?php
    function custom_func($params, $do){ //here i want to use $this; only $this 
         $this->doJop(); //calling class_proforma's/parent class method from here...
         return include("another_func.php"); //here is another file which is using $this;

    }
?> 
```

我想在 custom_func 和 another_func 中使用 $this。我知道将 $this 作为参数传递给 cusomt_func 可以解决这个问题。但问题是“another_func.php”，如果无法更改它的 $this 语法。

有什么办法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:48:30.170

正如“mpm”和“Vlad Preda”所说，这是不可能的，所以我将用另一个类包装这个函数，从那个类我将所有 $this 调用重定向到实际的 $this 上下文。

```
<?php
    class custom_cls{
        $service_ctx = null;
        function __construct($that){
            $this->service_ctx = $that;
        }
        function __call($function, $args) {
            return call_user_func_array(array($this->service_ctx, $function), $args);
        }
        function custom_func($params, $do){ 
             $this->doJop(); 
             return include("another_func.php"); 
        }
    }
?> 
```

这是唯一的方法。

感谢所有回复的人。

# c++ - 用向量计算元素的出现次数

> ID：15944678
> 
> 赞同：0
> 
> 时间：2013-04-11T09:02:17.683
> 
> 标签：c++, vector

我目前正在通过自己阅读 Andrew Koenig 和 Barbara Moo 所著的 Accelerated C++ 一书（正确地）学习 C++，并完成每章中的所有练习。

练习 3-3：*编写一个程序来计算每个不同单词在其输入中出现的次数*。对我来说，这个练习似乎非常困难，特别是考虑到：1.那一章的例子和其他练习相对简单，2.你只允许使用向量，所以没有什么高级的。（或者也许只是我误判了难度）

我在网上搜索提示并看到其他人在此练习中遇到问题，但人们提供的解决方案对我来说似乎不清楚。大多数人建议使用本书后面介绍的组织方法，这与练习的要点相悖。最后，我将我在不同论坛（包括这里）上找到的提示和方法拼凑起来，提出了我自己的解决方案：

```
#include <algorithm>
#include <iomanip>
#include <ios>
#include <iostream>
#include <string>
#include <vector>

using std::cin;
using std::setprecision;
using std::cout;
using std::string;
using std::endl;
using std::streamsize;
using std::sort;
using std::vector;

int main()
{

// Ask for string input

cout << "Please write some text, followed by end-of-file: " << endl;

vector<string> word_input;
string word;

// input words into string vector word_input

    typedef vector<string>::size_type vecsize;

    while (cin >> word) 
    {
        word_input.push_back(word);                 
    }

// sort the vector in alphabetical order to be able to separate distinct words

    sort(word_input.begin(),word_input.end());

// create two vectors: one where each (string) element is a unique word, and one
// that stores the index at which a new distinc word appears

    vector<string> unique_words;
    vector<int> break_index;

    for (int i=0; i != word_input.size()-1; ++i)
    {
        if(word_input[i+1] != word_input[i])
            {
                unique_words.push_back(word_input[i]);
                break_index.push_back(i);
            }

    }

// add the last word in the series to the unique word string vector

    unique_words.push_back(word_input[word_input.size()-1]);

// create a vector that counts how many times each unique word occurs, preallocate
// with 1's with as many times a new word occurs in the series (plus 1 to count the first word)

    vector<int> word_count(1,break_index[0]+1);

// if a new word occurs, count how many times the previous word occured by subtracting the number of words so far

    for(int i=0; i != break_index.size()-1;++i)
        {
            word_count.push_back(break_index[i+1] - break_index[i]);
        }

// add the number of times the last word in the series occurs: total size of text - 1 (index starts at 0) - index at which the last word starts

    word_count.push_back(word_input.size()-1-break_index[break_index.size()-1]);

    // number of (distinct) words and their frequency output

    cout << "The number of words in this text is: " << word_input.size() << endl;

    cout << "Number of distinct words is: " << unique_words.size() << endl;

        // The frequency of each word in the text

        for(int i=0; i != unique_words.size(); ++i)
            cout << unique_words[i] << " occurs " << word_count[i] << " time(s)" << endl;

return 0;
} 
```

有没有更好的方法使用向量来做到这一点？可以通过组合任何循环使代码更高效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T21:23:00.287

对我有用的解决方案（当我解决这个问题时）是使用三个向量： an `input_vector`、 an`output_vector`和 a `count_vector`。`while`使用 using读取用户输入，`std::cin`直到输入转义字符：使用`input_vector.push_back(input_word)`以填充`input_vector`单词。使用`std::sort`from`<algorithm>`对向量进行排序，并创建`output_vector`（具有一个值， 中的第一个单词`input_vector`）和`count_vector`（具有一个值，`1`）。

然后，对于中的每个元素`input_vector`（从第二个开始，而不是从第一个开始），检查当前元素是否与最后一个元素相同。如果是，则添加`1`到 中的当前元素`count_vector`。否则，将当前单词添加`input_vector`到`output_vector`using 中`push_back()`，并增加`count_vector`一个元素的大小（其值为`1`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:49:18.387

如果您想象有人正在使用您的代码来处理莎士比亚的全部作品，那么存储每个单词都会浪费大量空间。如果您改为持有“单词”和“单词计数”的结构，您只需存储单词“the”一次，即使它在您的程序正在输入的文本中出现 100000 次。也就是说，如果您甚至需要知道该单词已经出现了不止一次 - 如果您只需要一个唯一单词的列表，那么您所需要的就是查看您是否已经存储了该单词。[按排序顺序存储它们可以`binary_search`用来查找它们，如果您确实通过您的代码运行莎士比亚的 800K（非唯一）单词，这将有助于运行时]

# c# - 如何从包含数百万条记录的数据库中写入平面文件？

> ID：15944679
> 
> 赞同：-1
> 
> 时间：2013-04-11T09:02:18.533
> 
> 标签：c#, sql, sql-server-2008

我需要用 Db 数据编写一个平面文件。我查看了一些文章，但他们提供了一种方法，即先将数据加载到数据表中，然后再写入平面文件。我们的数据库表包含数百万条记录，数据表可能无法正常工作。我相信我们可以创建一个最大 2GB 大小的对象。数据表可能无法处理它。

我们可以通过哪些其他方法来实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:12:08.587

您可以使用[DataReader](http://msdn.microsoft.com/en-us/library/system.data.common.dbdatareader.aspx)。专为这些情况而设计（高行数，低内存，仅转发）

# c# - RectangleF 的难点

> ID：15944681
> 
> 赞同：0
> 
> 时间：2013-04-11T09:02:24.533
> 
> 标签：c#, xna

我总是收到此错误消息？怎么了？如何使用 RectangleF 类型？

找不到类型或命名空间名称“RectangleF”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:06:19.880

您需要将`System.Drawing`引用添加到您的项目

*   右键单击“参考”
*   “添加参考...”
*   “.NET”选项卡
*   选择“系统。绘图”
*   “好的”。

# c# - 'OpenFileDialog' 第一次不取值

> ID：15944686
> 
> 赞同：1
> 
> 时间：2013-04-11T09:02:44.360
> 
> 标签：c#, openfiledialog

选择 .dll 文件并按 OK 后，浏览对话框将关闭并重新打开。在它再次打开并按 OK 后，它会毫无问题地取值。

这是我的代码

```
private void btnBrowse_Click(object sender, EventArgs e) {
            OpenFileDialog dllDialog = new OpenFileDialog();
            dllDialog.Filter = "DLL Files|*.dll";
            dllDialog.InitialDirectory = @"C:\";
            dllDialog.Title = "Please select .dll file.";
            if (dllDialog.ShowDialog() == DialogResult.OK) {
                dllDialog.ShowDialog();
                tbRepTempLibrary.Text = dllDialog.FileName;

            } else { 
                MessageBox.Show("error");
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:04:37.113

您不应该调用`dllDialog.ShowDialog()`两次，而是使用它：

```
if (dllDialog.ShowDialog() == DialogResult.OK)
{
  tbRepTempLibrary.Text = dllDialog.FileName;
} 
```

如果用户因为不想选择您不应该显示的文件而单击取消`error`，则用户有权在不打开或选择文件的情况下取消，您根本不会继续开始操作;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:04:47.910

你打`ShowDialog()`了两次电话。你应该这样做：

```
private void btnBrowse_Click(object sender, EventArgs e) {
        OpenFileDialog dllDialog = new OpenFileDialog();
        dllDialog.Filter = "DLL Files|*.dll";
        dllDialog.InitialDirectory = @"C:\";
        dllDialog.Title = "Please select .dll file.";
        if (dllDialog.ShowDialog() == DialogResult.OK) {
            tbRepTempLibrary.Text = dllDialog.FileName;

        } else { 
            MessageBox.Show("error");
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T09:04:51.410

你打`ShowDialog()`了两次电话。你应该删除第二个，

```
private void btnBrowse_Click(object sender, EventArgs e) 
{
    OpenFileDialog dllDialog = new OpenFileDialog();
    dllDialog.Filter = "DLL Files|*.dll";
    dllDialog.InitialDirectory = @"C:\";
    dllDialog.Title = "Please select .dll file.";
    if (dllDialog.ShowDialog() == DialogResult.OK) 
    {
        tbRepTempLibrary.Text = dllDialog.FileName;

    } else 
    { 
        MessageBox.Show("error");
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T09:04:52.540

```
 if (dllDialog.ShowDialog() == DialogResult.OK) {
            dllDialog.ShowDialog(); // This shouldn't be here 
```

您显示对话框两次。

# extjs - ExtJs MVC 和 Spring MVC 之间的控制流

> ID：15944687
> 
> 赞同：0
> 
> 时间：2013-04-11T09:02:45.417
> 
> 标签：extjs, extjs-mvc

我浏览了很多文档和博客，但仍然不清楚 ExtJs MVC（使用 JSON 数据）中的流程是如何发生的。以下是我的疑问。

1.  Extjs 模型有什么用。我知道它可以用于验证和关联，但是它有什么特定用途以及何时使用它。

2.  Extjs 模型和存储之间有什么区别。

3.  我知道事件基本上是写在Extjs的控制器中的。因此，如果我单击 UI 中的保存按钮，我应该如何解释该过程 a) 我应该说，在保存时，控制器事件从存储中获取数据并传输到 spring 控制器或从该模型

4.  使用代理获取数据的正确位置是什么，是模型还是存储？

请帮助我清楚地理解这些概念......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:49:54.117

一 - 您不需要使用 ExtJS 模型，您可以直接将 JSON 转换为 Javascript 对象，但是模型：

*   提供伪强类型
*   提供任意深度的关联 getter 和 setter
*   允许更轻松的表单数据绑定 - form.loadRecord(someModel)
*   允许结构化验证
*   使用不同的阅读器轻松将 JSON 格式更改为 XML 格式

二 - 商店是模型的集合。它有一些有用的方法，如 sort()、filter()、group()、count()

三 -_ 这个问题可能更清楚。Spring 在服务器上运行，ExtJS 在客户端上运行。它们是两个不同的过程。您可以运行与 Spring 完全不同的 ExtJS 客户端。

*   用户点击按钮
*   查看引发点击事件
*   控制器处理点击事件
*   控制器可能会要求商店自行加载（这会发出 HTTP 请求以从无关紧要的地方获取一些数据）
*   视图（网格）正在监听存储加载事件，现在更新自我

（这本质上是监督控制器模式，请参阅 Fowler）

四 - 代理是否在模型或商店中无关紧要。如果只有模型有一个，商店将继承其模型的代理。如果代理在模型中，则更容易处理奇异模型。

# android - Android：使用线程和处理程序的麻烦

> ID：15944692
> 
> 赞同：0
> 
> 时间：2013-04-11T09:03:12.257
> 
> 标签：android, multithreading, user-interface, handler, message

我有一个活动，从中调用一个新线程（用于下载相同的数据）。

在我的 Activty 中，我实现了一个从上述线程接收消息的处理程序。当收到该消息时，会执行一些代码（此代码不会影响 UI）。

我的问题是：

如果我的活动在后台（状态暂停或停止），当收到从线程发送的消息时会发生什么？活动可以管理收到的消息并执行一些代码吗？如果这段代码尝试更新 UI 会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:07:24.120

据我所知安卓。如果仍在后台，您可以更新活动内容。但是我们应该确定活动将在后台运行多长时间。它可以在内存极低的情况下被杀死。所以在

**Handler 的 HandleMessage()，检查 if(Activity.this!=null){Update UI}**

# ruby-on-rails - SMTP 换行

> ID：15944696
> 
> 赞同：1
> 
> 时间：2013-04-11T09:03:38.787
> 
> 标签：ruby-on-rails, web-applications, actionmailer, sendgrid

我正在发送 html 电子邮件，并且 SMTP 服务器以适当的长度处理带有硬包装的电子邮件消息。我正在使用 sendgrid 和 rails 3.2.11，需要在 1000 个字符以下的所有消息行中进行软包装。但我不知道该怎么做！我们如何进行软包装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:09:37.687

您可以使用 ActionMailer`format_paragraph`助手对您的段落进行软包装。你可以在这里找到文档：

> [http://rubydoc.info/docs/rails/ActionMailer/MailHelper:format_paragraph](http://rubydoc.info/docs/rails/ActionMailer/MailHelper:format_paragraph)

示例用法类似于：

*应用程序/视图/signup_mailer.html.erb*

```
<%= format_paragraph("Some really really really really long text ...", 1000, 0) %> 
```

# java - 在 Spring MVC 中未重新初始化控制器类

> ID：15944697
> 
> 赞同：0
> 
> 时间：2013-04-11T09:03:40.670
> 
> 标签：java, spring, spring-mvc

我正在使用 spring Mvc 框架。我的控制器类看起来像这样。

```
public class UpdateStockController extends AbstractWizardFormController {

StockRegisterService stockRegisterService;
DimensionStoneService dimensionStoneService;
MineralService mineralService;
AutoPopulatingList openDimensionStoneBeans=new AutoPopulatingList(DimensionStoneBean.class);
AutoPopulatingList todayDimensionStoneBeans=new AutoPopulatingList(DimensionStoneBean.class);
StockRegister stockRegister;
List<DimensionStone> openDimensionStones=new ArrayList<DimensionStone>();
List<DimensionStone> todayDimensionStones=new ArrayList<DimensionStone>();
float cumulativeStockOrg;
boolean flag1;
boolean flag2;
public StockRegisterService getStockRegisterService() {
    return stockRegisterService;
}
public void setStockRegisterService(StockRegisterService stockRegisterService) {
    this.stockRegisterService = stockRegisterService;
}   
public DimensionStoneService getDimensionStoneService() {
    return dimensionStoneService;
}
public void setDimensionStoneService(DimensionStoneService dimensionStoneService) {
    this.dimensionStoneService = dimensionStoneService;
}   
public MineralService getMineralService() {
    return mineralService;
}
public void setMineralService(MineralService mineralService) {
    this.mineralService = mineralService;
}
public UpdateStockController(){
    setSessionForm(true);
}   
@Override
protected Object formBackingObject(HttpServletRequest request)throws Exception {

    String applicationId=null;
    String serviceId=null;
    try{
        applicationId=(String)request.getParameter("appId").trim();
        serviceId=(String)request.getParameter("serviceId").trim();
    }catch (NullPointerException e) {
        HttpSession session=request.getSession();
        applicationId=(String) session.getAttribute("applicationId");
        serviceId=(String) session.getAttribute("serviceId");
    }
    String mineralId=(String)request.getParameter("mineralIdAndName").trim().split(":")[0];
    String mineralName=(String)request.getParameter("mineralIdAndName").trim().split(":")[1];
    if(mineralId.equals("10")){
        flag2=true;
    }
    System.out.println("..............................flag2 : "+flag2+".......................");
    System.out.println("..............................flag1 : "+flag1+".......................");
    HttpSession session=request.getSession();
    session.setAttribute("applicationId", applicationId);
    session.setAttribute("serviceId",serviceId);
    Date productionDate=new Date(); 
    UpdateStockBean updateStockBean=new UpdateStockBean();
    updateStockBean.setMineralId(mineralId);
    updateStockBean.setMineralName(mineralName);           
    updateStockBean.setAccidentOccured("NO");
    updateStockBean.setCompPaid("NO");
    stockRegister=new StockRegister();
    @SuppressWarnings("rawtypes")
    List ckeckTodayStockRegisterList=stockRegisterService.retrieveDataFromStockRegister(applicationId,productionDate,mineralId);       
    if(ckeckTodayStockRegisterList.isEmpty()){
        System.out.println("..............................If1.......................");
        @SuppressWarnings("rawtypes")
        List openingBalFromPreviousStockRegisterList=stockRegisterService.retrieveOpeningBalance(applicationId,mineralId);  
        flag1=true;
        if (!openingBalFromPreviousStockRegisterList.isEmpty()) {
            System.out.println("..............................If2.......................");
            flag1=false;
            stockRegister=(StockRegister)openingBalFromPreviousStockRegisterList.get(0);
            stockRegister.setStockRegisterId(0);
            if(stockRegister.getBalanceQuantity()!=null){
                updateStockBean.setOpenbalance(stockRegister.getBalanceQuantity());                     
            }   
            cumulativeStockOrg=stockRegister.getCumulativeStock();
            System.out.println(".............................."+cumulativeStockOrg+".......................");
        }              
    }else{
        System.out.println("..............................else.......................");
        stockRegister=(StockRegister) ckeckTodayStockRegisterList.get(0);
        long stockRegId=stockRegister.getStockRegisterId();
        openDimensionStones=dimensionStoneService.getOpenDimensionStones(stockRegId);
        todayDimensionStones=dimensionStoneService.getTodayDimensionStones(stockRegId);
        updateStockBean.setOpenbalance(stockRegister.getOpeningBal());
        updateStockBean.setTodayproduction(stockRegister.getQuantityProduced());
        updateStockBean.setNoOfMale(stockRegister.getNoOfMaleEmp());
        updateStockBean.setNoOfFemale(stockRegister.getNoOfFemaleEmp());
        updateStockBean.setAccidentOccured(stockRegister.getAccidentOccured());
        updateStockBean.setDescriptionAccident(stockRegister.getAccidentDescription());
        updateStockBean.setCompPaid(stockRegister.getCompensationPaid());
        updateStockBean.setCompDetails(stockRegister.getCompensationDet());
        updateStockBean.setCompAmount(stockRegister.getCompensationAmt());
        cumulativeStockOrg=stockRegister.getCumulativeStock()-stockRegister.getQuantityProduced();
        for (Iterator<DimensionStone> iterator = openDimensionStones.iterator(); iterator.hasNext();) {
            System.out.println("..............................Haii77777777777.......................");
            DimensionStone dimensionStone=iterator.next();  
            DimensionStoneBean dimensionStoneBean=new DimensionStoneBean();
            dimensionStoneBean.setStoneNo(Integer.parseInt(dimensionStone.getStoneNo().toString()));
            dimensionStoneBean.setLength(dimensionStone.getLength());
            dimensionStoneBean.setBreadth(dimensionStone.getBreadth());
            dimensionStoneBean.setHeight(dimensionStone.getHeight());
            dimensionStoneBean.setDimension(dimensionStone.getDimension());
            dimensionStoneBean.setIsIssued(dimensionStone.getIsIssued());
            openDimensionStoneBeans.add(dimensionStoneBean);
        }
        updateStockBean.setOpenDimensionStones(openDimensionStoneBeans);
        for (Iterator<DimensionStone> iterator = todayDimensionStones.iterator(); iterator.hasNext();) {
            System.out.println("..............................Haiiii8888888888888.......................");
            DimensionStone dimensionStone=iterator.next();
            DimensionStoneBean dimensionStoneBean=new DimensionStoneBean();
            dimensionStoneBean.setStoneNo(Integer.parseInt(dimensionStone.getStoneNo().toString()));
            dimensionStoneBean.setLength(dimensionStone.getLength());
            dimensionStoneBean.setBreadth(dimensionStone.getBreadth());
            dimensionStoneBean.setHeight(dimensionStone.getHeight());
            dimensionStoneBean.setDimension(dimensionStone.getDimension());
            dimensionStoneBean.setIsIssued(dimensionStone.getIsIssued());
            todayDimensionStoneBeans.add(dimensionStoneBean);
        }
        updateStockBean.setTodayDimensionStones(todayDimensionStoneBeans); 
    } 
    return updateStockBean;
}

@SuppressWarnings("unchecked")
@Override
protected ModelAndView processFinish(HttpServletRequest req,HttpServletResponse res, Object cmd, BindException be)
throws Exception {
    float cumulativeStock;
    float dimensionCumulativeVolume=cumulativeStockOrg;

    UpdateStockBean bean = (UpdateStockBean)cmd;
    Long openingBalance=bean.getOpenbalance();
    Long quantityProduced=(Long)bean.getTodayproduction();
    Long totalQuantity=openingBalance+quantityProduced;
    Long balanceQuantity=totalQuantity;
    System.out.println("..............................flag2 : "+flag2+".......................finish");
    System.out.println("..............................flag1 : "+flag1+".......................finish");
    if(flag1){
        System.out.println("..............................flag true.......................1");
        cumulativeStock=(Float.parseFloat(openingBalance.toString())+Float.parseFloat(quantityProduced.toString()));
    }else{
        System.out.println("..............................flag false.......................1");
        cumulativeStock=cumulativeStockOrg+quantityProduced;
    }
    System.out.println(".............................."+cumulativeStock+".......................1");
    if(stockRegister.getStockRegisterId()==0){
        stockRegister.setStockRegisterId(stockRegisterService.getMaximumValueStockRegisterId()+1);
    }   
    Application application=new Application();
    application.setApplicationId(Long.parseLong(req.getSession().getAttribute("applicationId").toString().trim()));
    stockRegister.setApplication(application);
    stockRegister.setProductionDate(new SimpleDateFormat("dd-MMM-yyyy").parse(bean.getProductiondate()));
    stockRegister.setOpeningBal(openingBalance);
    stockRegister.setMineralId(Long.parseLong(bean.getMineralId()));
    stockRegister.setQuantityProduced(quantityProduced);
    stockRegister.setTotalQuantity(totalQuantity);
    stockRegister.setBalanceQuantity(balanceQuantity);
    stockRegister.setNoOfFemaleEmp((Integer)bean.getNoOfFemale());
    stockRegister.setNoOfMaleEmp(bean.getNoOfMale());
    stockRegister.setAccidentOccured(bean.getAccidentOccured());
    stockRegister.setAccidentDescription(bean.getDescriptionAccident());
    stockRegister.setCompensationPaid(bean.getCompPaid());
    stockRegister.setCompensationAmt(bean.getCompAmount());
    stockRegister.setCompensationDet(bean.getCompDetails());
    stockRegister.setCumulativeStock(cumulativeStock);  
    System.out.println(".............................."+cumulativeStock+".......................2");

    dimensionStoneService.deleteDimensionStonesOnToday(openDimensionStones);
    dimensionStoneService.deleteDimensionStonesOnToday(todayDimensionStones);
    openDimensionStoneBeans=bean.getOpenDimensionStones();  
    if(openDimensionStoneBeans.size()>bean.getOpenbalance()){
        int size=openDimensionStoneBeans.size();
        int j=(int) bean.getOpenbalance();
        for(int i=(int) bean.getOpenbalance();i<size;i++){
            openDimensionStoneBeans.remove(j);
        }
        bean.setOpenDimensionStones(openDimensionStoneBeans);
        cmd=(Object)bean;
    }       
    openDimensionStones=new ArrayList<DimensionStone>();
    for (Iterator<DimensionStoneBean> iterator = openDimensionStoneBeans.iterator(); iterator.hasNext();) {
        System.out.println("..............................Haiiiii11111.......................");
        DimensionStoneBean dimensionStoneBean = iterator.next();
        DimensionStone dimensionStone=new DimensionStone();
        dimensionStone.setStoneNo(Long.parseLong(((Integer)dimensionStoneBean.getStoneNo()).toString()));
        dimensionStone.setLength(dimensionStoneBean.getLength());
        dimensionStone.setBreadth(dimensionStoneBean.getBreadth());
        dimensionStone.setHeight(dimensionStoneBean.getHeight());
        dimensionStone.setDimension(dimensionStoneBean.getDimension());
        dimensionStone.setIsIssued(dimensionStoneBean.getIsIssued());
        dimensionStone.setStockType("opening");
        dimensionStone.setStockRegisterId(stockRegister.getStockRegisterId());
        dimensionCumulativeVolume=dimensionCumulativeVolume+dimensionStoneBean.getDimension();
        openDimensionStones.add(dimensionStone);
    }       
    todayDimensionStoneBeans=bean.getTodayDimensionStones();    
    if(todayDimensionStoneBeans.size()>bean.getTodayproduction()){
        int size=todayDimensionStoneBeans.size();
        int j=(int) bean.getTodayproduction();
        for(int i=(int) bean.getTodayproduction();i<size;i++){
            todayDimensionStoneBeans.remove(j);
        }
        bean.setTodayDimensionStones(todayDimensionStoneBeans);
        cmd=(Object)bean;
    }
    todayDimensionStones=new ArrayList<DimensionStone>();
    for (Iterator<DimensionStoneBean> iterator = todayDimensionStoneBeans.iterator(); iterator.hasNext();) {
        System.out.println("..............................Haiiiii22222.......................");
        DimensionStoneBean dimensionStoneBean = iterator.next();
        DimensionStone dimensionStone=new DimensionStone();
        dimensionStone.setStoneNo(Long.parseLong(((Integer)dimensionStoneBean.getStoneNo()).toString()));
        dimensionStone.setLength(dimensionStoneBean.getLength());
        dimensionStone.setBreadth(dimensionStoneBean.getBreadth());
        dimensionStone.setHeight(dimensionStoneBean.getHeight());
        dimensionStone.setDimension(dimensionStoneBean.getDimension());
        dimensionStone.setIsIssued(dimensionStoneBean.getIsIssued());
        dimensionStone.setStockType("current");
        dimensionStone.setStockRegisterId(stockRegister.getStockRegisterId());
        dimensionCumulativeVolume=dimensionCumulativeVolume+dimensionStoneBean.getDimension();
        todayDimensionStones.add(dimensionStone);
    }   
    if(flag2){
        System.out.println(".............................."+dimensionCumulativeVolume+".......................3");
        stockRegister.setCumulativeStock(dimensionCumulativeVolume);
    }       
    stockRegisterService.saveOrupdateStockRegister(stockRegister);      
    dimensionStoneService.saveOrupdateDimensionStones(openDimensionStones);
    openDimensionStoneBeans.clear();
    dimensionStoneService.saveOrupdateDimensionStones(todayDimensionStones);
    todayDimensionStoneBeans.clear();
    HttpSession session=req.getSession();
    String appId=(String) session.getAttribute("applicationId");
    String serviceId=(String) session.getAttribute("serviceId");
    String mineralIdAndName=bean.getMineralId()+":"+bean.getMineralName();
    return new ModelAndView(new InternalResourceView("updateStock.c?appId="+appId+"&serviceId="+serviceId+"&mineralIdAndName="+mineralIdAndName));
}
@Override
protected ModelAndView processCancel(HttpServletRequest request,HttpServletResponse response, Object command, BindException errors)
throws Exception {

    UpdateStockBean bean=(UpdateStockBean)command;
    String cancelCheck=request.getParameter("cancelCheck");
    HttpSession session=request.getSession();
    String appId=(String) session.getAttribute("applicationId");
    String serviceId=(String) session.getAttribute("serviceId");
    String mineralIdAndName=bean.getMineralId()+":"+bean.getMineralName();
    if(cancelCheck.equals("1")){
        response.sendRedirect("tabs.c?action=home_tab_emp");
        return new ModelAndView(new InternalResourceView("tabs.nic?action=home_tab_emp"));
    }else if(cancelCheck.equals("2")){
        return new ModelAndView(new InternalResourceView("updateStock.c?appId="+appId+"&serviceId="+serviceId+"&mineralIdAndName="+mineralIdAndName));
    }else{
        response.sendRedirect("tabs.nic?action=mineralSelect&appId="+appId+"&serviceId="+serviceId);
        return new ModelAndView(new InternalResourceView("tabs.c?action=mineralSelect&appId="+appId+"&serviceId="+serviceId));
    }         
}
@Override
protected void validatePage(Object command, Errors errors, int page) {
    UpdateStockValidator updateStockValidator=new UpdateStockValidator();          
    switch(page){
    case 0:          
        updateStockValidator.validateFormStart(command, errors);
        break; 
    case 1:
        break;
    case 2:
        updateStockValidator.validateForm2(command, errors);
        break;           
    case 3:
        updateStockValidator.validateForm3(command, errors);
        break;    
    case 4:          
        updateStockValidator.validateFormStart(command, errors);
        break;       
    }
}
@Override
@SuppressWarnings({ "rawtypes", "unchecked"})
protected Map referenceData(HttpServletRequest request, Object command,Errors errors, int page) throws Exception {

    Map map = new HashMap();
    UpdateStockBean bean = (UpdateStockBean)command;
    String applicationId=(String) request.getSession().getAttribute("applicationId");
    String mineralId=bean.getMineralId();
    Date productionDate=new Date();        
    Calendar cal = new GregorianCalendar();
    cal.setTime(productionDate);
    cal.add(Calendar.DAY_OF_MONTH, -30);
    Date today30 = cal.getTime(); 
    map.put("stockRegisters", stockRegisterService.stockRegisterBetweenTwoDaysWithApplicationId(applicationId,mineralId,today30,productionDate));      
    map.put("ckeckOpeningBalance",stockRegisterService.retrieveDataBeforeProductionDate(applicationId,mineralId,productionDate));  
    map.put("ckeckDimensionStone",mineralService.getMineralByApplicationId(applicationId));
    map.put("mineralList",mineralService.getMineralObjectsByApplicationId(applicationId));
    openDimensionStoneBeans=bean.getOpenDimensionStones();
    if(openDimensionStoneBeans.size()>bean.getOpenbalance()){
        int size=openDimensionStoneBeans.size();
        int j=(int) bean.getOpenbalance();
        for(int i=(int) bean.getOpenbalance();i<size;i++){             
            openDimensionStoneBeans.remove(j);
        }      
        bean.setOpenDimensionStones(openDimensionStoneBeans);
        command=(Object)bean;
    }
    todayDimensionStoneBeans=bean.getTodayDimensionStones();  
    if(todayDimensionStoneBeans.size()>bean.getTodayproduction()){
        int size=todayDimensionStoneBeans.size();
        int j=(int) bean.getTodayproduction();
        for(int i=(int) bean.getTodayproduction();i<size;i++){             
            todayDimensionStoneBeans.remove(j);
        }      
        bean.setTodayDimensionStones(todayDimensionStoneBeans);
        command=(Object)bean;
    }
    return map;
}
@SuppressWarnings({ "rawtypes", "unchecked" })
@Override
protected ModelAndView showForm(HttpServletRequest req,HttpServletResponse res, BindException be) throws Exception {
    HttpSession ses = req.getSession();
    Map pageMap = new HashMap();
    pageMap.put("erType", "");
    pageMap.put("pageType", "");
    if(ses.getAttribute("connection") == null){
        pageMap.put("erType", "sessionExpired");
        //pageMap.put("pageType", "inner");
        return new ModelAndView("page1",pageMap);
    }
    try{
        if(ses.getAttribute("loginType").toString().trim().equals("Employee")){
        }else if(ses.getAttribute("loginType").toString().trim().equals("Applicant")){
        }else if(ses.getAttribute("loginType").toString().trim().equals("Agent")){
        }
    }catch (Exception e){e.printStackTrace();return new ModelAndView(new InternalResourceView("login.nic"));}
    return super.showForm(req, res, be);
} 
```

}

这里的变量

```
List<DimensionStone> openDimensionStones=new ArrayList<DimensionStone>();
List<DimensionStone> todayDimensionStones=new ArrayList<DimensionStone>();
float cumulativeStockOrg;
boolean flag1;
boolean flag2; 
```

是初始化的，执行后不会被清除。也就是说变量的值也存在于另一个执行中。结果程序逻辑不能正常工作

配置文件是

```
<beans>
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
<property name="mappings">
<props>
  <prop key="updateStock.c">UpdateStockController</prop>
</props>
</property>
</bean>

    <bean id="UpdateStockController" class="mams.web.UpdateStockController">
<property name="commandName"><value>updateStock</value></property>
<property name="commandClass">
    <value>mams.web.beans.UpdateStockBean</value>
</property>
<property name="stockRegisterService" ref="StockRegisterService"></property>
<property name="dimensionStoneService" ref="DimensionStoneService"></property>
<property name="mineralService" ref="MineralService"></property>
<property name="validator" ref="UpdateStockValidator"></property>
<property name="pages">
<list>
<!--      <value>showMineralsForStock</value>-->
      <value>updateStock</value>
      <value>addOrEditOpenBalane</value>
      <value>addOrEditOpenDimensionStone</value>
      <value>addOrEditTodayDimensionStone</value>
      <value>updateStock</value>     
</list>
</property>
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:11:16.150

Spring 控制器是**单例**（如 servlet）。每种控制器类型只有一个实例在所有用户之间共享。它们必须是[**无状态**](https://stackoverflow.com/questions/9735601/what-is-stateless-object-in-java)的才能线程安全。

因此，只需将您的类字段移动到相应的方法中，问题就会消失。

正如 Bhushan Bhangale 所提到的，如果您想在 HTTP 请求之间为同一用户保留某个变量的状态，那么您可以将此变量存储在 HTTP 会话中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T09:12:55.670

Spring 控制器是单例的，所以如果你在方法执行中依赖全局变量而没有线程安全的实现，那么你做错了。

你会遇到意想不到的行为。

将这些变量设置为您需要它们的方法的本地变量，您应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T09:25:49.447

正如其他人所提到的，您的控制器应该是无状态的（即不依赖类变量来存储状态）。

我注意到您以不同的方法使用变量 - 如果您希望在请求之间存储状态，通常的方法是使用会话对象来存储您的数据。

# javascript - 单击弹出框触发元素时，如何关闭/关闭 Bootstrap 弹出框？

> ID：15944698
> 
> 赞同：13
> 
> 时间：2013-04-11T09:03:41.193
> 
> 标签：javascript, jquery, twitter-bootstrap, onclick, popover

jsFiddle：http: [//jsfiddle.net/kAYyR/](http://jsfiddle.net/kAYyR/)

**截屏：**

[![截屏](https://i.stack.imgur.com/7MPh3.png)](http://jsfiddle.net/kAYyR/)

这是有效的：

1.  单击按钮时打开弹出框
2.  在弹出框外单击时关闭弹出框
3.  单击`.close`按钮关闭弹出窗口

但是...当您再次单击原始按钮时，我无法关闭弹出窗口。相反，弹出框会闪烁并再次闪烁。

**[在这里](http://jsfiddle.net/kAYyR/)自己复制。**

我怎样才能做到这一点？

**HTML：**

```
<button id="popoverId" class="popoverThis btn btn-large btn-danger">Click to toggle popover</button>
<div id="popoverContent" class="hide">This <em>rich</em> <pre>html</pre> content goes inside popover</div> 
```

**JS：**

```
$('#popoverId').popover({
    html: true,
    title: "Popover Title",
    content: function () {
        return $('#popoverContent').html();
    }
});

var isVisible = false;
var clickedAway = false;

$('.popoverThis').popover({
    html: true,
    trigger: 'manual'
}).click(function (e) {
    $(this).popover('show');
    $('.popover-content').append('<a class="close" style="position: absolute; top: 0; right: 6px;">&times;</a>');
    clickedAway = false
    isVisible = true
    e.preventDefault()
});

$(document).click(function (e) {
    if (isVisible & clickedAway) {
        $('.popoverThis').popover('hide')
        isVisible = clickedAway = false
    } else {
        clickedAway = true
    }
}); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-11T09:40:19.430

你想要这样的工作吗？

[http://jsfiddle.net/kAYyR/3/](http://jsfiddle.net/kAYyR/3/)

```
$('#popoverId').popover({
    html: true,
    title: 'Popover Title<a class="close" href="#");">&times;</a>',
    content: $('#popoverContent').html(),
});

$('#popoverId').click(function (e) {
    e.stopPropagation();
});

$(document).click(function (e) {
    if (($('.popover').has(e.target).length == 0) || $(e.target).is('.close')) {
        $('#popoverId').popover('hide');
    }
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-14T06:57:31.163

我用这个：

```
 $('[data-toggle="popover"]').popover({html: true, container: 'body'});

    $('[data-toggle="popover"]').click(function (e) {
        e.preventDefault();
        $('[data-toggle="popover"]').not(this).popover('hide');
        $(this).popover('toggle');
    });

    $(document).click(function (e) {
        if ($(e.target).parent().find('[data-toggle="popover"]').length > 0) {
            $('[data-toggle="popover"]').popover('hide');
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-27T05:40:49.347

它可以通过使用此代码简单地完成

```
<div id='content'>something here</div>
 $('[data-toggle=popover]').popover({
        html: true,
        content: function () {
            return $('#content').html();
        }
    }).click(function (e) {
        $('[data-toggle=popover]').not(this).popover('hide');
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-24T10:47:08.433

这个简单的代码将隐藏页面上的所有弹出框 $('.popover').popover('hide');

# ios - 获取核心数据关系的类型

> ID：15944699
> 
> 赞同：0
> 
> 时间：2013-04-11T09:03:43.893
> 
> 标签：ios, objective-c, core-data

有没有一种简单的方法可以找到在 Core Data 中形成特定关系的对象类型？

例如，我有一个一对多的关系：

```
Battery-----1-to-Many-----Comment 
```

如果我不知道该关系是针对特定`Comment`对象的，是否有一种编程方式可以让我仅根据我正在处理的集合找出它是哪种对象类型。

类似的东西

```
battery.comments.classType = [Comment class] 
```

我知道两者`Battery`都是`Comment`类型`NSManagedObject`- 我想更具体地知道它们是什么。

我也知道，如果`NSSet`包含任何数据，我可以使用它的任何一个对象来查询类型。但是，当`NSSet`. 谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:14:39.453

您可以从以下几行中获取所需的所有信息：

```
 NSRelationshipDescription* rel = [[[battery entity] relationshipsByName] valueForKey:@"comments"];
    NSString* className = [[rel destinationEntity] managedObjectClassName];
    NSString* entityName = [[rel destinationEntity] name]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:14:17.220

在您的 AppDelegate 中，您有一个[NSManagedObjectModel](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectModel_Class/Reference/Reference.html)类型的属性。它有一个`entities`包含[NSEntityDescription](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSEntityDescription_Class/NSEntityDescription.html#//apple_ref/occ/cl/NSEntityDescription)的数组。从这里你应该能够弄清楚。希望这可以帮助！

# c# - 根据Item内容做一些动作

> ID：15944704
> 
> 赞同：0
> 
> 时间：2013-04-11T09:03:58.393
> 
> 标签：c#, windows-store-apps

我从模板拆分应用程序 (XAML) 为 Windows 应用商店 (C#) 创建了新项目。当从 SplitPage 中选择项目时，我想做一些事情。

在拆分应用程序模板中，当我从项目列表（左）中选择项目时，应用程序会显示有关项目的完整信息（右）。模板为此使用数据绑定。但我想根据项目内容在右侧做一些事情（添加按钮或文本框，更改颜色等）。怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:50:04.873

实现这一目标的最佳方法也是使用数据绑定。您应该首先使用其他属性扩展您的项目，基于这些属性您将显示您的其他控件：

```
private bool _showAdditionalControls = false;
public bool ShowAdditionalControls
{
    get { return this._showAdditionalControls; }
    set { this.SetProperty(ref this._showAdditionalControls, value); }
} 
```

现在您可以将此属性绑定到`Visibility`您的控件：

```
<Button Content="Click Me" 
        Visibility="{Binding ShowAdditionalControls, 
                     Converter={StaticResource StaticToVisibilityConverter}}" /> 
```

为此，您需要将转换器添加到`Page.Resources`集合中：

```
<common:BooleanToVisibilityConverter x:Key="StaticToVisibilityConverter" /> 
```

# java - 捕获带有特定消息的异常

> ID：15944707
> 
> 赞同：5
> 
> 时间：2013-04-11T09:04:02.237
> 
> 标签：java, exception-handling

有没有更好的方法来捕获带有消息的特定异常，然后执行以下操作：

```
try{
   methodThatWillProbablyThrowASocketException();
} catch(SocketException e){
   if(e.getMessage().contains("reset")){
      // the connection was reset
      // will ignore
   } else{
      throw e;
   }
} 
```

例如，如果错误状态是 404 或 502，我可以轻松比较`HttpStatusException`方法`getStatusCode()`，并且可以决定要做什么：

```
try{
   methodThatWillProbablyThrowAHTTPException();
} catch(HttpStatusException e){
   if(e.getStatusCode() == 404){
      // not found, will not continue
   } 
   if else(e.getStatusCode() == 502){
      // server errror, try again
   } else{
      throw e;
   }
} 
```

大多数其他异常不给我探测方法，只是消息。

所以我的问题是，这是正确的方法吗？用字符串比较？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:17:05.020

Just do one thing .

1.  Collect all types of exception that are likely to be occur for your project.
2.  Make a separate class by extending Exception.
3.  Override the getCause() method.

[http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getCause%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getCause%28%29)

**public Throwable getCause()**

Define codes you want for different exceptions Like null-pointer 101 ,, so on......

The use that class every where . So you have to write exception only once and you can use with as many projects.

After building the class it will be reusable for all your needs

If you getting new conditions, update this class only and all the things will be done

This is a better solution according to me...

This way you can get functionality for which you are looking. you have to make it by yourself.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:08:13.227

依赖代码或状态代码很好，但依赖消息可能会出现问题，因为消息可能会发生变化。

您应该考虑重构和定义多个异常或为不同场景定义代码。

# c# - 在 WPF 中更改鼠标拖动光标

> ID：15944714
> 
> 赞同：2
> 
> 时间：2013-04-11T09:04:37.160
> 
> 标签：c#, wpf, mouse-cursor

在将文档从文件系统拖动到我的表单时，我必须在鼠标光标上显示拖动文件的数量。

我已经完成了以下代码，但我无法更改拖动光标。请让我知道执行此操作的最佳方法

```
 private void tbDisplayFileContents_PreviewDragOver(object sender, DragEventArgs args)
    {
       if (IsSingleFile(args) != null)
        {
              tbDisplayFileContents_PreviewDrop(sender, args);
        }
        else
        {
          //  args.Effects = DragDropEffects.None;
        }
        Mouse.SetCursor(Cursors.Hand);
        Icon ico = new Icon(string.Concat("1365516094_10371.ico"));
        tbDisplayFileContents.Cursor = GenerateCursor.CreateCursor(ico, true, new System.Drawing.Color());
        args.Handled = true;
    }

    private void tbDisplayFileContents_PreviewDrop(object sender, DragEventArgs args)
    {
        args.Handled = true;
        string files = string.Empty;
        string[] fileName = IsSingleFile(args);
        if (fileName == null) return;
        isDrag = true;
        DoEvents();
        for (int i = 0; i < fileName.Length; i++)
        {
            if (i == 0)
            {
                files = string.Concat("1] ", fileName[i]);
            }
            else
            {
                int j = i + 1;
                files = string.Concat(files, Environment.NewLine, j, "] ", fileName[i]);
            }
        }

        lblfileName.Content = files;
    }

    private string[] IsSingleFile(DragEventArgs args)
    {
        if (args.Data.GetDataPresent(DataFormats.FileDrop, true))
        {
            string[] fileNames = args.Data.GetData(DataFormats.FileDrop, true) as string[];
            if (fileNames.Length != 0)
            {
                if (File.Exists(fileNames[0]))
                {
                    // At this point we know there is a single file.
                    return fileNames;
                }
            }
        }
        return null;
    }
    #endregion

    #region -------Events--------
    private void btnClear_Click(object sender, RoutedEventArgs e)
    {
        lblfileName.Content = string.Empty;
    }

    #endregion
    private void tbDisplayFileContents_PreviewDragEnter(object sender, DragEventArgs e)
    {
        e.Effects = DragDropEffects.None;
    }
    public static void DoEvents()
    {
        Application.Current.Dispatcher.Invoke(DispatcherPriority.Background,
                                              new Action(delegate
        {
            Icon ico = new Icon(string.Concat("1365516094_10371.ico"));
            Mouse.OverrideCursor = GenerateCursor.CreateCursor(ico, true, new System.Drawing.Color());
        }));
    } 
```

我使用 GiveFeedBack 事件如下

```
私人无效 tbDisplayFileContents_GiveFeedback（对象发送者，GiveFeedbackEventArgs e）
        {
            if (e.Effects == DragDropEffects.Copy)
            {
                e.UseDefaultCursors = false;
               // Mouse.SetCursor(Cursors.Hand);

                图标 ico = new Icon(string.Concat("1365516094_10371.ico"));
                //Mouse.Cursor = GenerateCursor.CreateCursor(ico, true, new System.Drawing.Color());
                Mouse.SetCursor(GenerateCursor.CreateCursor(ico, true, new System.Drawing.Color()));
            }
            别的
                e.UseDefaultCursors = true;

            e.Handled = true;
        }

```

它适用于表单拖动，但不适用于从外部表单拖动的内容（文件），例如来自桌面的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:20:03.030

我错过了您代码中的[GiveFeedback](http://wpf.2000things.com/tag/givefeedback/)事件，该事件用于在拖放操作时修改鼠标光标。

# java - Maven 自定义插件描述符

> ID：15944717
> 
> 赞同：-1
> 
> 时间：2013-04-11T09:04:45.677
> 
> 标签：java, maven, maven-plugin

我正在尝试创建一个 Maven 插件，但是如果我使用 @Mojo 注释，当我使用没有新的 maven 插件注释的 java doc 时，我已经使用 maven plugin-plugin 创建了一个 mojo 描述符，描述符是自动生成的（或 maven不想要）....

1个案例：

```
@Mojo( name = "touch", requiresProject=false, defaultPhase = LifecyclePhase.INSTALL)
public class MyMojo
    extends AbstractMojo
{
     ....
} 
```

聚甲醛：

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>sample.plugin</groupId>
  <artifactId>hello-maven-pluginbis</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>maven-plugin</packaging>
  <name>first-maven-plugin Maven Mojo</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
     <groupId>org.apache.maven</groupId>
     <artifactId>maven-plugin-api</artifactId>
     <version>2.0</version>
   </dependency>
   <dependency>
     <groupId>org.apache.maven.plugin-tools</groupId>
     <artifactId>maven-plugin-annotations</artifactId>
     <version>3.1</version>
     <type>jar</type>
     <scope>compile</scope>
   </dependency>
 </dependencies>

  <build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-plugin-plugin</artifactId>
            <version>3.2</version>

        </plugin>
    </plugins>
  </build>
 </project> 
```

Maven 不工作

2 案例：

```
/**
* Echos an object string to the output screen.
* @goal echo
* @requiresProject false
*/
public class EchoMojo extends AbstractMojo
{
   ....
} 
```

聚甲醛：

```
<project>
<modelVersion>4.0.0</modelVersion>
<groupId>org.sonatype.mavenbook.plugins</groupId>
<artifactId>first-maven-plugin</artifactId>
<packaging>maven-plugin</packaging>
<version>1.0-SNAPSHOT</version>
<name>first-maven-plugin Maven Mojo</name>
<url>http://maven.apache.org</url>
<dependencies>
  <dependency>
    <groupId>org.apache.maven</groupId>
    <artifactId>maven-plugin-api</artifactId>
    <version>2.0</version>
  </dependency>
</dependencies> 
```

怎么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:44:03.633

可能您需要指定 maven-plugin-plugin 的目标来生成描述符？

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-plugin-plugin</artifactId>
            <version>3.2</version>
            <executions>
                <execution>
                    <id>mojo-descriptor</id>
                    <goals>
                        <goal>descriptor</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

# node.js - 在循环中向套接字添加处理程序不起作用：/

> ID：15944718
> 
> 赞同：0
> 
> 时间：2013-04-11T09:04:47.287
> 
> 标签：node.js, socket.io

为了以更规范的方式处理发送到套接字的事件，我制作了一个路由器。在那个路由器中，我想将每个模块分配给特定的事件。我已将事件字符串及其处理程序分配给“处理程序”对象。然后我想在循环中将侦听器分配给给定的套接字。分配后，我列出了所有事件，并且它在给定套接字中的处理程序要清楚。一切似乎都很好。不幸的是，它不起作用。套接字的行为就像它将处理程序对象中的每个事件分配给该对象中的第一个处理程序。手工制作的版本很好，但我就是不明白为什么简单的循环会失败：/

这是路由器通过socketio处理套接字的代码：

```
var socketOptions = {transports:['flashsocket', 'websocket', 'htmlfile', 'xhr-polling', 'jsonp-polling']};
var io = socketio.listen(server,socketOptions).on('connection', function (socket) {
    streamRouter(io,socket);
}); 
```

这是路由器的代码。我已经写过分配套接字的手工版本看起来如何以及看起来像循环版本。通常，第二个被评论。

```
var handlers = {
    "message": require("./message").doAction,
    "subscribe": require("./subscribe").doAction
}

exports.handleConnection = function(io,socket) {

    //handmade version
    socket.on("subscribe", function(msg){
           require("./subscribe").doAction(io,socket,msg);
    });

    socket.on("message", function(msg){
           require("./message").doAction(io,socket,msg);
    });

    //loop version
    for( var event in handlers ) {
        socket.on(event, function(msg){
           handlers[event](io,socket,msg);
        });
    }
} 
```

对于错误所在的任何建议，我将不胜感激。在短时间内，我将拥有许多处理程序，并且通过多行代码一一分配它们将是一种丑陋的复制粘贴：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:16:16.473

In your `for-in` loop, you're constructing functions that are all closed over the same `event` variable. As a result, when those functions get executed, they will all refer to the same value. Additionally, you're not guarding your `for-in` loop against prototype members (which may or may not be intended).

Instead, try this:

```
Object.keys(handlers).forEach(function(event){
    socket.on(event, function(msg){
        handlers[event](io, socket, msg);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:14:48.633

为了使循环正常工作，您需要为每个处理程序创建一个新范围：

```
for( var event in handlers ) {
  (function(handler) {
    socket.on(event, function(msg){
      handler(io,socket,msg);
    });
  })(handlers[event]);
} 
```

这与作用域有关：Javascript 不会`event`为每个循环创建一个“新”变量，并且在调用事件处理程序时，`event`将被覆盖（并且将包含它在循环的最后一次迭代中具有的值） .

[此页面](http://blog.mixu.net/2011/02/03/javascript-node-js-and-for-loops/)提供了更多解释。

# google-app-engine - 数据存储读取操作计算

> ID：15944720
> 
> 赞同：3
> 
> 时间：2013-04-11T09:04:48.963
> 
> 标签：google-app-engine, operations

因此，我目前正在执行一项测试，以估计我的 Google 应用程序引擎可以在不超过配额的情况下工作多少。这是我的测试：

*   我在数据存储中有一个实体，根据我的本地仪表板，它需要 18 次写入操作。我在一个表中有 5 个这种类型的条目。
*   每 30 秒，我获取上面提到的 5 个实体。我不为这些使用 MEMCACHE ！！！

这意味着每次读取 5 * 18 = 90 次读取操作，对吗？在 1 分钟内意味着 180 次，在 1 小时内意味着 10800 次读取操作......这是每日限制配额的 ~20%......

然而，在我的测试运行 1 小时后，我注意到在我的在线仪表板上，只使用了 2% 的读取操作......我的问题是为什么会这样？......我的计算中的缺陷在哪里？

另外...我在哪里可以在在线仪表板中看到一个实体需要多少读/写操作？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:57:18.660

对您的实体进行一次写入可能需要 18**次写入**，但对您的实体进行一次读取只需 1**次读取**。

因此，如果您在一小时内每 30 秒获得 5 个条目，那么您将有大约 5reads * 120 = 600 reads。

这是在您**获得**5 个条目的情况下。（获取带有其 id 的条目）如果您进行**查询**以获取它们，则成本为“1 读取 + 1 读取每个检索到的实体”。这意味着每个条目有 2 次读取。因此，一小时内大约有 1200 次读取。

有关更多详细信息，这里是估算成本的[文档](https://developers.google.com/appengine/docs/billing#cost_resource)。

您无法在仪表板上看到实体需要多少次写入/读取操作。但我邀请您检查[appstats](https://developers.google.com/appengine/docs/python/tools/appstats)。

# joomla2.5 - 公共 Joomla 项目产生 403 访问被拒绝

> ID：15944723
> 
> 赞同：4
> 
> 时间：2013-04-11T09:04:51.507
> 
> 标签：joomla2.5

我最近从 Joomla v1.5.26 升级到 v2.5。这在 /jupgrade 中安装了 v2.5。

我不得不在 /jupgrade 中重新安装 K2，而新的 K2 拾取了我的旧 K2 项目，因为数据库已被复制。

但是，所有 K2 项目的访问级别均为空白。这意味着当我从前端导航菜单中选择项目时，我被要求登录。登录后，我收到了 403。

然后，我将所有 K2 项目的访问级别设置为 Public，并确保菜单条目指向正确的 K2 项目。

但是，403 错误仍然存​​在于前端。

为什么访问级别为公共的页面被禁止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:08:45.370

发现 jUpgrade 没有对文章或类别设置权限。

一旦我设置了类别的权限，文章就会显示 OK。

# c - 将 ASCII 字节流发送到管道

> ID：15944725
> 
> 赞同：0
> 
> 时间：2013-04-11T09:04:57.280
> 
> 标签：c, shell, ascii, echo

我在 C 程序中的 /tmp/mypipe 处创建了一个管道。管道用于通过程序中的两个模块发送和接收命令字节。模块按照以下结构发送数据：

```
struct controller
{
  int command;
  char data[100];
} 
```

我想以相同的格式将数据发送到 /tmp/mypipe。我尝试了以下命令，C 程序接收到数据。

```
echo -e "\x00\x00\x00\x04"www.google.com > /tmp/mypipe 
```

但是，程序接收到的数据格式如下：

```
control.command = 67108864
control.data = www.google.com 
```

我想要的是仅将 control.command 作为第 4 号接收。我尝试了通过谷歌找到的多个建议。但是，当我尝试将数据重定向到管道时，它会失败。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:11:36.793

您很可能使用的是 little endian 机器，因此您应该以 little endian 显示数字

```
echo -e "\x04\x00\x00\x00"www.google.com > /tmp/mypipe 
```

或者，最好在接口的合同中选择一个字节序，并确保在代码中将其转换为机器的字节序

```
NAME
htonl, htons, ntohl, ntohs - convert values between host and network byte order  

SYNOPSIS
#include <netinet/in.h>

uint32_t htonl(uint32_t hostlong);

uint16_t htons(uint16_t hostshort);

uint32_t ntohl(uint32_t netlong);

uint16_t ntohs(uint16_t netshort); 
```

> 描述
> 
> htonl() 函数将无符号整数 hostlong 从主机字节顺序转换为网络字节顺序。
> 
> htons() 函数将无符号短整数 hostshort 从主机字节顺序转换为网络字节顺序。
> 
> ntohl() 函数将无符号整数 netlong 从网络字节顺序转换为主机字节顺序。
> 
> ntohs() 函数将无符号短整数 netshort 从网络字节顺序转换为主机字节顺序。
> 
> 在 i80x86 上，主机字节顺序是最低有效字节在前，而在 Internet 上使用的网络字节顺序是最高有效字节在前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:08:58.667

这是一个大/小端问题。

在您的系统上，您应该使用：

```
echo -e "\x04\x00\x00\x00"www.google.com > /tmp/mypipe 
```

# javascript - 以下会导致两个 HTTP 请求吗？

> ID：15944730
> 
> 赞同：0
> 
> 时间：2013-04-11T09:05:05.960
> 
> 标签：javascript, jquery

```
var img = new Image();
$(img).attr('src', "<?php echo $image_url; ?>");

$(window).load(function(e){
    resetImageSize(img);
    td.css('background-image', 'url("<?php echo $image_url; ?>")');
});

$(window).resize(function(e){
    resetImageSize(img);
});

function resetImageSize(img){
    var wr = $("#wrapper");
    var td = $("#wrapper td");

    if(img.width > wr.width() || img.height > wr.height()){
        td.css('background-size', 'contain');
    } else {
        td.css('background-size', img.width);
    }
} 
```

我怎么知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:06:45.500

如果您想知道您的应用程序发出了多少 http 请求，您可以使用 Web 浏览器的开发工具。

用谷歌浏览器按F12，然后转到网络面板

您的浏览器将使用他的缓存进行第二次请求，他会在网络面板的结果字段中告诉您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:07:36.933

了解输入了多少 http 请求的一种方法是查看服务器日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:08:00.427

只要客户端没有在浏览器上禁用缓存，服务器就应该响应缓存已用于第二个请求。您可以通过使用 Net 面板在 Firebug 中分析您的页面来测试这一点。您应该看到第一个请求的图像下载和第二个请求的 304 Resource Not Modified。

# c# - 为 Winform 创建一个复选框

> ID：15944732
> 
> 赞同：2
> 
> 时间：2013-04-11T09:05:14.297
> 
> 标签：c#, winforms, button, checkbox, window

我搜索了大约 1 小时，才意识到我可能是最大的初学者，但既然每个人都曾在那个时候遇到过，我希望你能耐心等待。

我的问题：我有一个空的 Winform，它是在自定义创建的 Outlook 属性按钮上按下按钮后打开的。

按钮代码：

```
private void FensterOeffnen(object sender, IRibbonControl control, bool pressed)
    {
        EinstellungenFenster fenster = new EinstellungenFenster();
        fenster.ShowDialog();
    } 
```

Winform代码：

```
public partial class EinstellungenFenster : Form
{   

    public EinstellungenFenster()
    {   
        InitializeComponent();
        Text = "Outlook Add-in Einstellungen";

    }
} 
```

**我需要一个复选框的原因：** 如果选中该按钮，我想在 Outlook 加载项上的每个方法上实现一个弹出（可以说是调试）窗口，这样如果代码在某个特定位置停止工作部署后点，我仍然可以很容易地判断问题出在哪里。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:18:43.093

通过转到查看和工具箱打开工具箱，然后展开所有窗口窗体并向下滚动到复选框并将其拖到窗体上。

然后通过添加单击的按钮来实现检查过程

```
if (Checkboxname.Checked = true)
{
 // Do Stuff when checked
} 
```

希望这可以帮助

# ios - 如何用Objective C中的给定字符串替换正则表达式的第1组

> ID：15944733
> 
> 赞同：1
> 
> 时间：2013-04-11T09:05:15.200
> 
> 标签：ios, objective-c, regex

我有以下正则表达式

```
regex = [NSRegularExpression regularExpressionWithPattern:@"(.*)|(.*)"
                                                  options:NSRegularExpressionCaseInsensitive
                                                    error:&error]; 
```

我想用文本字段中的值替换与此正则表达式匹配的第一组字符串。

例如，如果我有`Hi|Peter`并替换为`Goodbye`我得到`Goodbye|Peter`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T09:59:02.177

这是你想要的？

```
NSString *s1 = @"Hi|Peter";
NSError *error;
NSString *pattern = @"(.*)\\|(.*)";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern
                                      options:NSRegularExpressionCaseInsensitive
                                    error:&error];
NSString *s2 = [regex stringByReplacingMatchesInString:s1
                           options:0
                         range:NSMakeRange(0, [s1 length])
                      withTemplate:@"Goodbye|$2"];
NSLog(@"%@", s2);
// Output: Goodbye|Peter 
```

`$2`在替换模板中指的是第二个捕获组。请注意，您必须转义“|” 正则表达式中的字符。

# android - SQLite SELECT 给出异常如何解决？

> ID：15944739
> 
> 赞同：2
> 
> 时间：2013-04-11T09:05:33.277
> 
> 标签：android, eclipse, sqlite, exception, select

我正在开发一个 android 应用程序（使用 Eclipse 和 5554 模拟器）。当我执行以下代码时，似乎 CREATE TABLE 和 INSERT 工作正常，但 SELECT 有一些问题。

您认为问题出在 CREATE TABLE 和 INSERT 上吗？还是 SELECT 的语法不对？

```
public void onCreateA(SQLiteDatabase db) {

        System.out.println("On create works");

        try {
            db.execSQL("DROP TABLE IF EXISTS actuator;");
            db.execSQL("CREATE TABLE IF NOT EXISTS actuator ("+
                    "ACTUATOR_ID INT(11) NOT NULL,"+
                    "ACTUATOR_HW_ID int(11) DEFAULT NULL,"+
                    "DEVICE_NAME TEXT(45) DEFAULT NULL,"+
                    "DEVICE_TYPE TEXT(45) DEFAULT NULL,"+
                    "DEVICE_SUB_TYPE TEXT(45) DEFAULT NULL,"+
                    "LOCATION_ID INT(11) DEFAULT NULL,"+
                    "STATUES_VALUE REAL DEFAULT NULL,"+
                    "MAX_STATUES_VALUE REAL DEFAULT NULL,"+
                    "MIN_STATUES_VALUE REAL DEFAULT NULL,"+
                    "PRIMARY KEY (`ACTUATOR_ID`))");

            System.out.println("table created now values will be added");

            System.out.print("DONE!");

        } catch (SQLException e) {

            System.out.println("table is not created");
        }

        try {
            db.execSQL("INSERT INTO actuator (ACTUATOR_ID, ACTUATOR_HW_ID, DEVICE_NAME, DEVICE_TYPE, DEVICE_SUB_TYPE, LOCATION_ID, STATUES_VALUE, MAX_STATUES_VALUE, MIN_STATUES_VALUE) " +
                    "VALUES (1, 2, 'Heat Sensor FX615','Heat Sensor', 'Optic Heat Sensor', 4, 6, 7, 8) " );
            System.out.println("values are added");
        } catch (Exception e) {

            e.printStackTrace();
            System.out.println("values are not added");
        }

        try {
            db.execSQL("SELECT * FROM actuator");
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            System.out.println("not selected");
        }

    } 
```

但输出是：

```
04-11 08:49:24.513: I/System.out(1499): **On create works** 
04-11 08:49:24.571: I/System.out(1499): **table created now values will be added** 
04-11 08:49:24.627: I/System.out(1499): **DONE!values are added** 
04-11 08:49:24.513: I/System.out(1499): **On create works** 
04-11 08:49:24.631: W/System.err(1499): android.database.sqlite.SQLiteException: unknown error (code 0): Queries can be performed using SQLiteDatabase query or rawQuery methods only. 
04-11 08:49:24.631: W/System.err(1499):     at android.database.sqlite.SQLiteConnection.nativeExecuteForChangedRowCount(Native Method)
04-11 08:49:24.631: W/System.err(1499):     at android.database.sqlite.SQLiteConnection.executeForChangedRowCount(SQLiteConnection.java:727) 
04-11 08:49:24.641: W/System.err(1499):     at android.database.sqlite.SQLiteSession.executeForChangedRowCount(SQLiteSession.java:754) 
04-11 08:49:24.641: W/System.err(1499):     at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:64) 
04-11 08:49:24.641: W/System.err(1499):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1665) 
04-11 08:49:24.641: W/System.err(1499):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1594)
04-11 08:49:24.641: W/System.err(1499):     at com.example.databasetryout.DataBaseTryOut.onCreateA(DataBaseTryOut.java:196) 
04-11 08:49:24.641: W/System.err(1499):     at com.example.databasetryout.DataBaseTryOut$3.onClick(DataBaseTryOut.java:75) 
04-11 08:49:24.641: W/System.err(1499):     at android.view.View.performClick(View.java:4204) 
04-11 08:49:24.641: W/System.err(1499):     at android.view.View$PerformClick.run(View.java:17355) 
04-11 08:49:24.641: W/System.err(1499):     at android.os.Handler.handleCallback(Handler.java:725) 
04-11 08:49:24.641: W/System.err(1499):     at android.os.Handler.dispatchMessage(Handler.java:92) 
04-11 08:49:24.651: W/System.err(1499):     at android.os.Looper.loop(Looper.java:137) 04-11 08:49:24.651: W/System.err(1499):  at android.app.ActivityThread.main(ActivityThread.java:5041) 
04-11 08:49:24.651: W/System.err(1499):     at java.lang.reflect.Method.invokeNative(Native Method) 
04-11 08:49:24.651: W/System.err(1499):     at java.lang.reflect.Method.invoke(Method.java:511) 
04-11 08:49:24.651: W/System.err(1499):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 
04-11 08:49:24.651: W/System.err(1499):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 
04-11 08:49:24.651: W/System.err(1499):     at dalvik.system.NativeStart.main(Native Method) 04-11 08:49:24.651: I/System.out(1499): **not selected** 
04-11 08:49:24.651: I/System.out(1499): **finish** 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T09:13:07.357

```
db.execSQL("SELECT * FROM actuator"); 
```

您不能`execSQL`对返回数据的语句使用方法。完全来自文档

> 执行不是 SELECT 的单个 SQL 语句或任何其他返回数据的 SQL 语句。

您必须使用[rawQuery()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery)或[query()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query)方法。

因此，对于您的情况，您可以使用以下代码片段从数据库中获取数据：

```
String query = "SELECT * FROM actuator";
Cursor c = db.rawQuery(query, null);
if (c != null && c.moveToFirst()) {
   // do your stuff
} 
```

实际上，您的代码什么也不做。如果要从 db 中检索数据，则需要通过上述方法将它们分配给 Cursor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:12:37.677

正如您在日志中看到的，错误是：只能使用 SQLiteDatabase 查询或 rawQuery 方法执行查询。

因此，在 android 中，您必须使用 SQLiteDatabase 或 rawQuery。请参阅：http: [//developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

例子：

```
rawQuery("SELECT id, name FROM people WHERE name = ? AND id = ?", new String[] {"David", "2"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:15:44.243

您的问题出在这一行：

```
db.execSQL("SELECT * FROM actuator"); 
```

您正在尝试`SELECT`使用方法执行查询`execSQL`，但是这是一个返回结果的查询，因此必须使用相关方法运行。在您的情况下，您可以使用以下`rawQuery`方法执行此操作：

```
db.rawQuery("SELECT * FROM actuator", null); 
```

值得注意的是，这段代码毫无意义，除了在数据库中运行查询之外，它什么也没做。您不会看到任何结果，因为您甚至没有将结果分配给变量。

# c - Eclipse 控制台不显示标准输出

> ID：15944742
> 
> 赞同：0
> 
> 时间：2013-04-11T09:05:41.610
> 
> 标签：c, eclipse

基本上只要有命令行参数提供给我的应用程序（使用运行/运行配置/参数中的框），Eclipse 控制台将停止显示标准输出（例如 prtinf() 命令） 有什么办法可以解决这个问题？我是否在错误的地方输入了命令行参数？（虽然它们出现在 argv 中）

# meteor - 无法再从 Meteorite 添加包裹

> ID：15944745
> 
> 赞同：1
> 
> 时间：2013-04-11T09:05:45.253
> 
> 标签：meteor, meteorite

mrt add 包（例如 mrg add 路由器）目前不工作。

我已经尝试过我的几个项目。

任何人都知道问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:15:45.083

You need to update your meteorite version to > 0.50 using

```
npm install meteorite -g 
```

You can check your current version using

```
mrt --version 
```

# xamarin - 使用 mvvmcross 的网络状态？

> ID：15944746
> 
> 赞同：4
> 
> 时间：2013-04-11T09:05:45.967
> 
> 标签：xamarin, mvvmcross, network-state

我使用 mvvmcross 开发针对 WPF、IOS 和 android 平台的应用程序。

如何获取网络状态和全局网络信息？例如：IP 地址、网络接口（以太网、Wifi、3g、...）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:17:14.030

For mvvmcross v3, there is a Network plugin which provides information on network connectivity - [https://github.com/slodge/MvvmCross/tree/v3/Plugins/Cirrious/Network](https://github.com/slodge/MvvmCross/tree/v3/Plugins/Cirrious/Network)

However, this is only implemented for iOS/Touch currently - it's there just in order to satisfy Apple's `Reachability` requirements.

In order to provide this across multiple platforms, you will need to add and implement your own interfaces - either extending this plugin, creating a new plugin or just using IoC injection from the UI projects.

I'm not aware of anyone who has done this already, but I'd love to see this contributed back to open source.

# c# - 如何验证应用内购买交易本身是否成功 Windows Phone 8

> ID：15944752
> 
> 赞同：0
> 
> 时间：2013-04-11T09:06:11.050
> 
> 标签：c#, windows-phone-8, in-app-purchase

我有此代码用于我的应用内购买

```
string receipt = await Store.CurrentApp.RequestProductPurchaseAsync(pID, false); 
```

文档指出，即使以下情况，此方法也会返回成功值：

```
there's no network connection available
the user cancels out of the dialog
the user's authentication fails

You should treat a success result as indicating the async process completed without      
errors. To ensure that the transaction itself was successful, check the   
LicenseInformation element in the returned receipt. 
```

在我解锁购买功能之前，有没有一种快速的方法来验证特定项目的收据是否实际成功？目前，如果没有错误，该功能将始终解锁，因为收据未经过验证。

我的代码：

```
 private async void inAppPurchase(string key)
    {

        if (!Store.CurrentApp.LicenseInformation.ProductLicenses[key].IsActive)
        {
            try
            {
                // The customer doesn't own this feature, so 
                // show the purchase dialog.
                MockIAPLib.ListingInformation li = await Store.CurrentApp.LoadListingInformationAsync();
                string pID = li.ProductListings[key].ProductId;

                //purchase successful
                string receipt = await Store.CurrentApp.RequestProductPurchaseAsync(pID, false);

                //Check the receipt for 

                switch (key)
                {
                    case "IsAdsVisibleSetting":
                        settings.IsAdsVisibleSetting = false;
                        break;
                    case "style_2":
                        fontFolder[key] = true;
                        settings.AllowedFontSetting = fontFolder;
                        break;
                    case "backgrounds_2":
                        backgroundGroups[key] = true;                          
                        settings.AllowedBackgroundGroupsSetting = backgroundGroups;
                        break;
                    case "backgrounds_3":
                        backgroundGroups[key] = true;
                        settings.AllowedBackgroundGroupsSetting = backgroundGroups;
                        break;
                }

                RenderStoreItems();
            }
            catch (Exception)
            {
                MessageBox.Show("Sorry, the in-app purchase was not completed because an error occurred.", "Purchasing Error", MessageBoxButton.OK);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:54:18.457

购买方法调用后，请确保在完整填写货物之前检查许可证是否有效。如果是消耗品，则调用 ReportProductFulfillment() 方法。

```
CurrentApp.LicenseInformation.ProductLicenses[key].IsActive 
```

顺便说一句，在您的代码中 includeReceipt 值设置为 false - 将始终保持“收据”为空。

# sql - SQL Server：仅显示条件连接列不为空的行

> ID：15944756
> 
> 赞同：1
> 
> 时间：2013-04-11T09:06:16.733
> 
> 标签：sql, sql-server-2008, reference, concatenation

是的，我已经为此奋斗了一段时间，尽管我有一个有效的查询，但它困扰着我，这是不合逻辑的。如果我表明我的意思会更容易：

我有一个包含工作 ID、电子邮件地址和布尔值“应该使用”列的表格。

```
CREATE TABLE LWEmail
(ID int, Email varchar(64), MustUse int)

INSERT INTO LWEmail VALUES(1,'adfgae@asfdvaerg.com',1)
INSERT INTO LWEmail VALUES(1,'sdfghsth@asfdvaerg.com',1)
INSERT INTO LWEmail VALUES(1,'admjury@asfdvaerg.com',0)
INSERT INTO LWEmail VALUES(2,'dyj@asfdvaerg.com',0)
INSERT INTO LWEmail VALUES(2,'adynee@asfdvaerg.com',0)
INSERT INTO LWEmail VALUES(3,'kitu@asfdvaerg.com',1)
INSERT INTO LWEmail VALUES(3,'aswtrhe@asfdvaerg.com',1)
INSERT INTO LWEmail VALUES(3,'abetr@asfdvaerg.com',1)
INSERT INTO LWEmail VALUES(3,'aeryje@asfdvaerg.com',0)
INSERT INTO LWEmail VALUES(3,'eyj@asfdvaerg.com',0)
INSERT INTO LWEmail VALUES(4,'dej@asfdvaerg.com',1)
INSERT INTO LWEmail VALUES(4,'aetyj@asfdvaerg.com',1)
INSERT INTO LWEmail VALUES(4,'ey@asfdvaerg.com',0)
INSERT INTO LWEmail VALUES(5,'egn@asfdvaerg.com',0)
INSERT INTO LWEmail VALUES(5,'egrn@asfdvaerg.com',0)
INSERT INTO LWEmail VALUES(6,'bneyh@asfdvaerg.com',1)
INSERT INTO LWEmail VALUES(6,'eryh@asfdvaerg.com',1)
INSERT INTO LWEmail VALUES(6,'adfeyj@asfdvaerg.com',0) 
```

以及根据“必须使用”标准将这些电子邮件地址连接到每个 ID 一行的查询：

```
SELECT DISTINCT
CONVERT (varchar(24), [LWEmail].[ID]) AS LogBatch,
STUFF((SELECT CAST(', ' + LWEmail2.Email  AS VARCHAR(MAX))
         FROM   [LWEmail] AS LWEmail2
         WHERE  LWEmail2.[ID] = [LWEmail].[ID] and [MustUse] = 1
         FOR XML PATH('')), 1,2,'') AS Emails
FROM   [LWEmail] 
```

这会产生：

```
LOGBATCH   EMAILS
1      adfgae@asfdvaerg.com, sdfghsth@asfdvaerg.com
2      (null)
3      kitu@asfdvaerg.com, aswtrhe@asfdvaerg.com, abetr@asfdvaerg.com
4      dej@asfdvaerg.com, aetyj@asfdvaerg.com
5      (null)
6      bneyh@asfdvaerg.com, eryh@asfdvaerg.com 
```

如果“电子邮件”返回 null（第 2 行和第 5 行），我还希望它忽略该行，所以从逻辑上讲，我尝试添加：

```
 WHERE Emails IS NOT NULL 
```

在末尾。这不起作用：'无效的列名“电子邮件”'。但这确实有效：

```
SELECT DISTINCT
CONVERT (varchar(24), [LWEmail].[ID]) AS LogBatch,
STUFF((SELECT CAST(', ' + LWEmail2.Email  AS VARCHAR(MAX))
         FROM   [LWEmail] AS LWEmail2
         WHERE  LWEmail2.[ID] = [LWEmail].[ID] and [MustUse] = 1
         FOR XML PATH('')), 1,2,'') AS Email

FROM   [LWEmail]

WHERE 
STUFF((SELECT CAST(', ' + LWEmail2.Email  AS VARCHAR(MAX))
         FROM   [LWEmail] AS LWEmail2
         WHERE  LWEmail2.[ID] = [LWEmail].[ID] and [MustUse] = 1
         FOR XML PATH('')), 1,2,'') IS NOT NULL 
```

为什么我不能将“电子邮件”作为条件引用，而由于括号和逻辑顺序，执行路径将使其成为首先要执行的事情之一，使其可用于评估？例如，您可以使用转换后的日期或数学运算来执行此操作。有什么见解吗？为了效率，我宁愿参考和评估已经计算过的东西，而不是计算两次。只是想学习并提高效率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:08:58.963

您说“逻辑顺序”，但从逻辑上讲`SELECT`，*在* `WHERE`. 您可以将其放在子查询中：

```
SELECT * FROM (
  SELECT DISTINCT
  CONVERT (varchar(24), [LWEmail].[ID]) AS LogBatch,
  STUFF((SELECT CAST(', ' + LWEmail2.Email  AS VARCHAR(MAX))
         FROM   [LWEmail] AS LWEmail2
         WHERE  LWEmail2.[ID] = [LWEmail].[ID] and [MustUse] = 1
         FOR XML PATH('')), 1,2,'') AS Emails
  FROM   [LWEmail]
) t
where Emails is not null 
```

有关处理顺序，请参见例如Wikipedia 上的[Select (SQL) ：](http://en.wikipedia.org/wiki/Select_%28SQL%29#Query_evaluation_ANSI)

*   `FROM`
*   `ON`
*   `WHERE`
*   `GROUP BY`
*   `HAVING`
*   `SELECT`
*   `DISTINCT`
*   `ORDER BY`

* * *

还：

> 为了效率，我宁愿参考和评估已经计算过的东西，而不是计算两次。

SQL Server 有很多技巧，它可以观察到相同的计算被请求两次，并且将避免*实际*执行多次计算。另一方面，仅仅因为一个计算在您的语句中只出现一次并不能*保证*系统实际上不会多次评估它。

在这种情况下，我同意减少它只是因为它看起来很乱。但是您应该知道，在 SQL 语言中，您通常试图告诉系统*您想要什么*，而不是*如何去做*。这就是优化器的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:10:25.307

您显然不能调用在同一级别上创建`ALIAS`的子句。如下`WHERE`：`SQL Order of Operation`

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   SELECT 子句（此处创建 ALIAS）
*   ORDER BY 子句

`ALIAS`is created on`SELECT`子句和子句首先`WHERE`执行。您想从别名调用的唯一解决方案是将整个查询包装在子查询中。例如，

```
SELECT  * 
FROM 
        (
            SELECT  DISTINCT CONVERT (varchar(24), [LWEmail].[ID]) AS LogBatch,
                    STUFF(( SELECT CAST(', ' + LWEmail2.Email  AS VARCHAR(MAX))
                            FROM   [LWEmail] AS LWEmail2
                            WHERE  LWEmail2.[ID] = [LWEmail].[ID] and
                                   [MustUse] = 1
                            FOR XML PATH('')), 1,2,'') AS Emails
            FROM    [LWEmail]
        ) subQuery
WHERE   Emails IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T09:12:24.220

尝试：

```
SELECT *
FROM 
(SELECT DISTINCT
CONVERT (varchar(24), [LWEmail].[ID]) AS LogBatch,
STUFF((SELECT CAST(', ' + LWEmail2.Email  AS VARCHAR(MAX))
         FROM   [LWEmail] AS LWEmail2
         WHERE  LWEmail2.[ID] = [LWEmail].[ID] and [MustUse] = 1
         FOR XML PATH('')), 1,2,'') AS Email

FROM   [LWEmail] ) Sub
WHERE Email IS NOT NULL 
```

# jquery - jQuery获取多选的所有值，不仅仅是选中

> ID：15944760
> 
> 赞同：1
> 
> 时间：2013-04-11T09:06:24.150
> 
> 标签：jquery, html, ajax

我正在尝试通过 Ajax 提交整个多选（即 $('#tags_selected')）

```
$.ajax({
  url: base_url + 'companies/editTagsAsync',
  type: 'post',
  dataType: 'json',
  data: $('#tags_selected').val(),
  success: function (json) {
    console.log(json);
  }
}); 
```

但它只发送选择的值。我想传递选择框中的所有值。可能有一个简单的解决方案，但我只是不知道......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:10:52.580

您可以将所有选择值推入一个数组并通过以下方式发送`data`：

```
var selectArr = []; 

$('#tags_selected option').each(function() {
    selectArr.push($(this).val());
});

$.ajax({
  url: base_url + 'companies/editTagsAsync',
  type: 'post',
  dataType: 'json',
  data: selectArr,
  success: function (json) {
    console.log(json);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:09:10.143

您需要找到`<option>`下拉列表的后代并获取它们的值：

```
data: { 
  values: $('#tags_selected').find("option").map(function() {return this.value;})
} 
```

这样，在服务器端，您将获得一个名为“values”的数组，其中包含所有值。我已经使用`.find()`而不是在预期包含元素`.children()`的下拉列表中获取选项。`<optgroup>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:24:25.647

```
You need to send both selected and all values array.

var data: { 
        allValues: $('#tags_selected').find("option").map(function() {return this.value;}),
        selectedValues :$('#tags_selected').val()
    }
var data={ }
$.ajax({
  url: base_url + 'companies/editTagsAsync',
  type: 'post',
  dataType: 'json',
  data: data,
  success: function (json) {
    console.log(json);
  }
}); 
```

# c - 在 C 中获取当前时间，函数

> ID：15944766
> 
> 赞同：1
> 
> 时间：2013-04-11T09:06:43.377
> 
> 标签：c, time

我想在 C 中获取当前时间（没有当前日期）。主要问题是什么时候我想用函数来做。当我不使用它们时，一切都很好。谁能告诉我，为什么我的代码只显示一个小时？（看看附图）。提前致谢。

```
#include <stdio.h>
#include <time.h>
#include <string.h>

char* get_time_string()
{
    struct tm *tm;
    time_t t;
    char *str_time = (char *) malloc(100*sizeof(char));
    t = time(NULL);
    tm = localtime(&t);
    strftime(str_time, sizeof(str_time), "%H:%M:%S", tm);
    return str_time;
}

int main(int argc, char **argv)
{
    char *t = get_time_string();
    printf("%s\n", t);
    return 0;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/y82OW.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T09:10:40.163

`sizeof(str_time)`给你的大小`char*`。您希望缓冲区的大小`str_time`改为。尝试

```
strftime(str_time, 100, "%H:%M:%S", tm);
//                 ^ size of buffer allocated for str_time 
```

其他次要要点 - 您应该包括在`<stdlib.h>`将其内容打印到.`malloc``free(t)``main`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T09:10:26.470

运算符返回变量的`sizeof`长度，该变量`str_time`是指向 char 的指针。它不返回动态数组的长度。

替换`sizeof(str_time)`为`100`，它会好起来的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:16:30.750

Use This Concept Getting System Time and Updating it. I have used this in my project many years before. you can change it as per your requirements.

```
updtime()                 /* FUNCTION FOR UPDATION OF TIME */
{
 struct time tt;
 char str[3];
 gettime(&tt);
 itoa(tt.ti_hour,str,10);
 setfillstyle(1,7);
 bar(getmaxx()-70,getmaxy()-18,getmaxx()-30,getmaxy()-10);
 setcolor(0);
 outtextxy(getmaxx()-70,getmaxy()-18,str);
 outtextxy(getmaxx()-55,getmaxy()-18,":");
 itoa(tt.ti_min,str,10);
 outtextxy(getmaxx()-45,getmaxy()-18,str);
return(0);
}
The previous function will update time whenever you will call it like 

and this will give you time

 int temp;
 struct time tt;
 gettime(&tt);                       /*Get current time*/
 temp = tt.ti_min; 
```

If you want to update time the you can use the following code.

```
 gettime(&tt);
   if(tt.ti_min != temp)  /*Check for any time update */
   {
    temp = tt.ti_min;
    updtime();
   } 
```

This is complex code but if you understand it then it will solve your all problems.

Enjoy :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T09:11:50.867

尝试这个...

```
int main ()
 {
  time_t rawtime;
  struct tm * timeinfo;

  time ( &rawtime );
  timeinfo = localtime ( &rawtime );
  printf ( "Current local time and date: %s", asctime (timeinfo) );

  return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-02T02:56:35.300

有时间的话，你可以试试这个：

```
#include <stdio.h>

int main(void)
{
  printf("Time: %s\n", __TIME__);
  return 0;
} 
```

结果：

**时间：10:49:49**

# python - 创建地图 GUI

> ID：15944770
> 
> 赞同：0
> 
> 时间：2013-04-11T09:06:50.303
> 
> 标签：python, tkinter

我想创建一个可以读取和显示“地图文件”的 GUI。地图文件只是包含一长串整数的文本文件，代表海拔高度。用户最初应该能够浏览文本文件，点击“显示”或其他内容，生成彩色图像

我试图决定用什么语言和库来实现这一点。python + tkinker 是这样做的吗？这听起来像一个难题吗？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:42:31.590

您可以通过在 tkinter 画布上绘图来做到这一点。但是，为了更轻松地生成漂亮的图，您还可以在 tkinter 应用程序中显示 matplotlib 图。

例如，参见[matplotlib 库](http://matplotlib.org/examples/)中的[embedding_in_tk.py](http://matplotlib.org/examples/user_interfaces/embedding_in_tk.html)和[embedding_in_tk2.py](http://matplotlib.org/examples/user_interfaces/embedding_in_tk2.html)。

![在此处输入图像描述](https://i.stack.imgur.com/gfyGR.png)

# c# - 子视图之间的 WPF 导航

> ID：15944772
> 
> 赞同：0
> 
> 时间：2013-04-11T09:06:52.687
> 
> 标签：c#, wpf, mvvm, navigation, prism

我有一个应用程序，它由一个外壳、一个充当区域的内容控件和进入其中的子内容控件组成。当应用程序加载时，它会在文件加载视图中启动，一旦加载文件，就会导航到新的区域视图和相应的子视图。我遇到的问题是回到文件加载视图。我可以让它导航到文件加载视图，但是在子视图的 VM 中没有调用 IsNavigatedFrom，这会导致问题，因为子 VM 具有 ConfirmNavigationRequest 以确保用户确实想要离开该特定视图。

有任何想法吗？

[编辑] 返回文件加载视图的按钮位于父内容控件中。我试过把它放在孩子身上，但它会导致过多的冗余[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:57:55.607

IsNavigatedFrom 将在您的“RequestNavigate”使用的对象中调用。如果您调用了 RequestNavigate(view)，那么您可以在视图中定义 IsNavigatedFrom。如果你想在 ViewModel 中调用 IsNavigatedFrom，那么你需要一个 viewmodel-first 导航。

# c++ - 为什么构造的这组自定义对象不按照重载运算符排序<

> ID：15944773
> 
> 赞同：-1
> 
> 时间：2013-04-11T09:07:01.807
> 
> 标签：c++, stl, operator-overloading, set

我有一个 Edge 类定义如下

```
class Edge {
public:
    //constructors & destructors
    Edge();
    Edge(const Edge& orig);
    virtual ~Edge();
    Edge(unsigned const int, const string&, const string&);

    //getters & setters
    unsigned int GetCost() const {return cost;}

    //member functions
    bool operator<(const Edge*) const;
private:
    unsigned int cost;  //cost of the edge
    string cities[2];   //cities that the edge connect
};

//cpp file
bool Edge::operator<(const Edge* e) const {
    cout << "edge" << endl;  //function is never invoked
    return this->cost < e->GetCost();
} 
```

我想将这些边缘（最初包含在向量中）保留在 Edge* 集中，main() 中的相应代码是：

```
set<Edge*> edge_set;
vector<Edge*> edges;

print_vector(edges);
srand((unsigned)time(NULL));
while(edge_set.size() < K){ //randomly pick K edges that will form the tree
    edge_set.insert(edges[rand()%edges.size()]);
}
print_set(edge_set); 
```

我得到输出：

```
Edge vector:
edges[0] cost = 136
edges[1] cost = 558
edges[2] cost = 872
edges[3] cost = 1615
edges[4] cost = 654
edges[5] cost = 994
.
.
.

Edge set:
858
1242
436
636
804 
```

我也尝试`<`在 main 中定义一个用于重载运算符的函数，但我也无法设法让这个集合以这种方式排序，即无法`<`调用重载的运算符。另请注意，我使用不同类型的参数（引用、指针、对象本身）进行重载`<`。

我在这里做错了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:09:06.597

你需要`operator <`两个指针。由于根据语言规则它是不真实的，并且您的运算符用于对象和指针 -`std::less<Edge*>`将使用默认值 ( )。你可以存储对象，或者你可以编写你的仿函数，它将与指针一起工作并使用它（`set`对象应该被声明为`std::set<Edge*, Functor>`）。

像这样

```
struct CompareCost : public std::binary_function<const Edge*, const Edge*, bool>
{
   result_type operator () (first_argument_type f, second_argument_type s)
   {
      return f->operator <(s);
   }
};

std::set<Edge*, CompareCost> edge_set; 
```

# jsf - 我的第一个项目 EJB 3.0 / JSF 2.0 和 Eclipse。如何测试它？

> ID：15944779
> 
> 赞同：0
> 
> 时间：2013-04-11T09:07:22.760
> 
> 标签：jsf, jakarta-ee, ejb, ejb-3.0, ejb-3.1

我正在尝试使用 JSF 2.0 和 Eclipse 创建我的第一个项目 EJB3。我的第一个项目大致是一个 Hello World 项目。我有一个 EJB 接口，一个实现方法的 bean 和带有相关文件 .xhtml 的 JSF ManagedBean。我的问题是我无法测试该项目。上面列出的所有文件都位于包中的 ejbModule 文件夹下，文件除外。Xhtml 位于 META-INF 文件夹中。我该如何测试它？我确信这个配置是不正确的。如何集成 EJB 和 JSF 这两个项目。我必须单独创建它们然后链接它们吗？

```
package it.test.disco.core;
import javax.ejb.Remote;

@Remote
public interface MusicService {
  public String getDisco();

} 
```

实现接口的类：

```
package it.test.disco.core;

import javax.ejb.Stateless;

/**
  * Session Bean implementation class MusicServiceBean
 */ 
@Stateless
public class MusicServiceBean implements MusicService {

/**
 * Default constructor. 
 */
public MusicServiceBean() {}

public String getDisco(){
    return "The Knife DISCO DEL MESE";
} 
```

}

托管 Bean JSF 2.0

```
package it.test.disco.core;

import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;

@ManagedBean
public class DiscoStamp {
@EJB
private MusicService musicService;

public DiscoStamp() {
    // TODO Auto-generated constructor stub
}

public String getMessage() {
    return musicService.getDisco();
} 
```

和文件 .xhtml

```
 <h:outputLabel value="NEWS DEL GIORNO: "/>
 <h:outputText value="#{DiscoStamp.message}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:28:21.917

那么您需要使用任何 IDE（如 netbeans/EClipse）创建一个 Enterprice 应用程序，您可以在其中将您的 XTML 页面添加到 WEB-INF 内的 pages 文件夹或 JSp 文件夹中。

您可以拥有源文件夹，您可以在其中添加您的 EJB 类以及 Action/ManagedBean。

然后你可以配置面部配置 xml 文件和 web.xml 然后你可以使用构建你的耳朵，

现在您可以测试/检查您的第一个代码。

# ios - ios 6 拉动刷新

> ID：15944782
> 
> 赞同：3
> 
> 时间：2013-04-11T09:07:36.333
> 
> 标签：ios, uirefreshcontrol

我在我的应用程序中实现了新的拉动刷新方法，将以下代码添加到 viewDidLoad：

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
[self.tableView addSubview:refreshControl]; 
```

方法 handleRefresh 从数据库加载一些数据，然后刷新 tableview。此方法仅在用户拉动 tableview 时被调用。现在我想手动调用 handleRefresh 方法，因为在某些时候我要从数据库中删除一些项目，并且我需要在重新加载 tableview 之前再次加载数据。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:13:18.207

就像是`[self handleRefresh:nil]`

# svn - 颠覆合并失败

> ID：15944785
> 
> 赞同：1
> 
> 时间：2013-04-11T09:07:50.380
> 
> 标签：svn, branching-and-merging

在合并来自 Subversion 分支的代码时，我看到了一些我不理解的东西。

我们有一个“实验”分支，我们在其中对某些功能进行了修复。我们开始了分支工作：

```
svn cp https://..../trunk https://.../branches/experimental 
```

在过去的两周里，我们继续在实验分支上进行黑客攻击，而在主干上像往常一样进行正常开发。分支上的工作仅发生在特定的“根”文件夹（usermngmt-II）上。

现在是时候将分支工作合并回主干了。合并过程中出现的问题可以描述为：“在实验分支中从未更改过的文件，无法在主干中干净地合并”。

从镜像主干文件夹版本的工作文件夹开始......

```
$ cd workOnTrunk
$ svn info
Path: .
URL: https://x.x.x.x/.../trunk/usermgmnt-II
...
$ svn update
At revision 4900.

$ svn status
$ 
```

...我们执行合并命令：

```
$ svn merge --reintegrate ^/branches/experimental/usermgmnt-II/
Conflict discovered in 'webservices/usermngmt-ws-api/src/java/gr.neuropublic.gaia.usermngmt.ws.api/IUserMngmtService.java'.
Select: (p) postpone, (df) diff-full, (e) edit,
        (mc) mine-conflict, (tc) theirs-conflict,
        (s) show all options: df
--- /tmp/svn-9vbG0j     Πεμ Απρ 11 11:27:54 2013
+++ webservices/usermngmt-ws-api/src/java/gr.neuropublic.gaia.usermngmt.ws.api/.svn/tmp/IUserMngmtService.java.8.tmp    Πεμ Απρ 11 11:27:54 2013
@@ -49,7 +49,16 @@

     public Pair<Integer, String> numOfUsers();

+<<<<<<< .working
+    public Pair<List<Map<String, String>>, String> allSubsInfo();

+=======
+>>>>>>> .merge-right.r4900
+    public Pair<List<Map<String, String>>, String> allGaiaSubsInfo();
+
+    public Pair<List<Map<String, String>>, String> subsUsersInfo(int subs_id);
+
+
     @Local 
```

因此，subversion 报告“工作”版本 - 即我们工作文件夹中的版本（正如我们在上面看到的，反映了“主干”）被报告有这条线......

```
public Pair<List<Map<String, String>>, String> allSubsInfo(); 
```

...在其中，虽然实验分支中的版本（如果我正确地破译了合并冲突消息）被 subversion 报告为（a）没有“allSubsInfo”行，并且（b）但有另外两个反而：

```
public Pair<List<Map<String, String>>, String> allGaiaSubsInfo();
public Pair<List<Map<String, String>>, String> subsUsersInfo(int subs_id); 
```

然而，事实并非如此——为了证明这一点，我们在实验分支中使用“svn cat”打印文件的内容，并使用 grep 报告的方法：

```
$ svn cat ^/branches/experimental/usermgmnt-II/webservices/usermngmt-ws-api/src/java/gr.neuropublic.gaia.usermngmt.ws.api/IUserMngmtService.java | grep 'all.*SubsInfo'
$ 
```

很明显，在“实验”分支中的“冲突”文件没有“allSubsInfo”或“allGaiaSubsInfo”的实例。事实上，通过“svn merge”命令生成的输出文件...

```
$ grep allSubsInfo  IUserMngmtService.java.merge-right.r4900
$ 
```

……也没有。事实上，如果我们只是简单地提取文件的两个版本：

```
$ svn cat -r4900 ^/branches/experimental/usermgmnt-II/webservices/usermngmt-ws-api/src/java/gr.neuropublic.gaia.usermngmt.ws.api/IUserMngmtService.java > /var/tmp/experimental.java
$ svn cat ^/trunk/usermgmnt-II/webservices/usermngmt-ws-api/src/java/gr.neuropublic.gaia.usermngmt.ws.api/IUserMngmtService.java > /var/tmp/trunk.java
$ diff -u /var/tmp/experimental.java /var/tmp/trunk.java
--- /var/tmp/experimental.java  2013-04-11 11:49:13.000000000 +0300
+++ /var/tmp/trunk.java 2013-04-11 11:49:58.000000000 +0300
@@ -49,6 +49,13 @@

     public Pair<Integer, String> numOfUsers();

+    public Pair<List<Map<String, String>>, String> allSubsInfo();
+
+    public Pair<List<Map<String, String>>, String> allGaiaSubsInfo();
+
+    public Pair<List<Map<String, String>>, String> subsUsersInfo(int subs_id);
+
+
     @Local
     public interface ILocal extends IUserMngmtService {} 
```

...我们看到后备箱中的版本只是添加了 3 行。因此，就实验分支中该文件的版本而言，“合并”过程应该是“无操作” - “实验分支中的此文件中没有提交任何内容，保持不变”。

提前感谢您的任何帮助/建议。

PS 如果它很重要，我们使用的是 Subversion 1.6 - 更具体地说：服务器上的版本 1.6.11，在我的客户端机器上，我使用命令行界面，版本 1.6.17。使用最新的 TortoiseSVN 时也会出现问题行为（所以我倾向于怀疑这是特定于版本的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:05:59.657

正如我从您列出的命令中看到的那样，“实验”是从主干分支出来的，但您尝试重新集成“实验/usermgmnt-II”。这可能是问题的根源。

# javascript - 如何调用名称在字符串中定义的函数？

> ID：15944786
> 
> 赞同：0
> 
> 时间：2013-04-11T09:07:51.640
> 
> 标签：javascript, jquery

我根据情况将参数中的函数 A 或 B 的名称传递给另一个函数 C。如何在函数 C 中调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:10:06.523

您可以将函数分配给对象的属性。然后在您执行的函数中，通过给定传递给函数的参数的名称引用属性。

```
var myFuncs = {
   a: function(){
     alert("Hello");
   },
   b: function(){
     alert("Goodbye");
   }
};

function execute(name){
   myFuncs[name]();
}

execute("a");
execute("b"); 
```

**工作示例** [http://jsfiddle.net/ud6BS/](http://jsfiddle.net/ud6BS/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:08:41.867

如果`A`是全局定义的，那么`window["A"]()`. 但是，没有必要在 javascript 中这样做。只需传递函数本身而不是其名称：

```
function foo() {...}

// BAD
function callFunc(someName) { window[someName]() }
callFunc("foo")

// GOOD
function callFunc(someFunc) { someFunc() }
callFunc(foo) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T09:08:52.670

像这样：

```
window[varName]() 
```

假设它在全球范围内

如果你有

```
function A() {}
function B() {} 
```

那么你可以做

```
function C(parm) {
  parm();
} 
```

如果你用`C(A)`or调用它`C(B)`

**[演示](http://jsfiddle.net/mplungjan/G4Wwj/)**

# zend-framework2 - 如何使用 redirect() 设置查询参数

> ID：15944787
> 
> 赞同：2
> 
> 时间：2013-04-11T09:07:53.303
> 
> 标签：zend-framework2

我想在重定向时设置一个查询参数。我试过这个：

```
$this->redirect()->toRoute('login/default', array('action' => 'forgotPassword', 'foo' => 'bar')); 
```

它重定向到：

```
/login/forgotPassword 
```

而不是我想重定向的地方是：

```
/login/forgotPassword?foo=bar 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T09:16:03.823

The query parameter belongs to the third parameter of the URL-Methods.

```
$this->redirect()->toRoute(
    'login/default', 
    array(
        'action' => 'forgotPassword'
    ),
    array( 'query' => array(
        'foo' => 'bar'
    ))
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T19:09:55.270

加。

要重定向“访问”或登录，您可以使用表单：

```
if (!$controller->identity()) {
  $sm = $controller->getServiceLocator();
  $router = $sm->get('router');
  $request = $sm->get('request');

  $routeMatch = $router->match($request);

  $controller->redirect()->toRoute('login', array(), 
        array( 'query' => 
                array('redir' => $routeMatch->getMatchedRouteName() ) ) );
} 
```

网址将是：/login/?redir=current-route

# .net - .NET 使用 DotNetZip 生成 Zip 文件并发送到 HTTP 响应流

> ID：15944794
> 
> 赞同：2
> 
> 时间：2013-04-11T09:08:20.173
> 
> 标签：.net, zip, outputstream, dotnetzip

我的以下代码有问题。由于公司的原因，我必须使用windows 2003。他们使用这个系统。此代码在与 Windows XP 一起使用时不起作用。此代码生成一个 zip 文件，当我使用 Windows 资源管理器打开它时，它显示错误：“文件损坏”。我使用 DotNetZip.dll 和特别是：Ionic.Zip。zip 文件在 HTTP 响应流中发送。

有人可以帮助我吗？感谢您的回答。

我的功能：

```
public void Zip()
    {
            Response.ContentType = "application/octet-stream";

            Response.AppendHeader("content-disposition", "attachment; filename=\"myFile.zip\"");

            byte[] buffer = new byte[4096];
            ZipOutputStream zipOutputStream = new ZipOutputStream(Response.OutputStream);

            zipOutputStream.CompressionLevel = Ionic.Zlib.CompressionLevel.Level3;

            string[] filestozip = Directory.GetFiles("C:\\myFolderToZip", "*.*", SearchOption.AllDirectories);

            foreach (string fileName in filestozip)
            {
                Stream fs = File.OpenRead(fileName);
                zipOutputStream.PutNextEntry(fileName.Replace(dir + "\\", ""));
                int count = fs.Read(buffer, 0, buffer.Length);
                while (count > 0)
                {
                    zipOutputStream.Write(buffer, 0, count);
                    count = fs.Read(buffer, 0, buffer.Length);
                    Response.Flush();
                }
                fs.Close();
            }

            zipOutputStream.Close();
            Response.Flush();
            HttpContext.Current.ApplicationInstance.CompleteRequest();
    } 
```

# ios - iOS 配置和证书 - 撤销/更新会影响 App Store 应用程序吗？

> ID：15944796
> 
> 赞同：28
> 
> 时间：2013-04-11T09:08:27.100
> 
> 标签：ios, xcode, app-store, certificate

在开发我的一个应用程序的新版本时，Xcode 今天告诉我，由于开发配置文件已过期，它无法再运行该项目。

组织者为**所有**开发配置文件显示“未找到有效的签名身份”和**所有**分发配置文件“配置文件已过期”。

当然，配置文件过期并不奇怪。在过去，我所要做的就是单击“更新”，但这不再起作用了。为我的帐户输入用户名和密码后，Xcode 显示错误消息“没有为参数 'certificateIds' 提供值”...

我能做些什么？

直接访问供应中心网页，而不是使用管理器。“iOS Apps/Certificates/All”部分中有两个条目：1.“My Name iOS Development Expires: Mar, 17 2012” 2.“My Name Development Expires: Mar, 19 2013”

单击其中一个证书显示选项以“撤销”或“下载”证书。还有一个“+ 按钮”来创建新证书，但选项“iOS App Development Sign development versions of your iOS app”。已停用。

在“Provision Profiles”部分中，所有开发配置文件都标记为“Active”，所有分发配置文件都标记为“Expired”。缺少“续订”选项时，只有“编辑”和“删除”选项可用。“编辑”选项显示配置文件详细信息和“生成”按钮。我会假设“生成”创建了一个新版本，但是在按下按钮后，只显示一个进度指示器，没有结果。重新加载页面后，状态不变。

因此，没有更新现有证书和配置文件的选项（有吗？）。因此，我必须创建新证书，但是 - 如上所述 - 此选项显示为灰色。我假设我必须首先删除/撤销现有证书。单击“吊销”会显示一个非常明确的警告：“**吊销此证书将使其无效，并且使用此证书的任何相关服务或配置文件都可能受到影响。** ”

我担心撤销证书可能会影响我在 App Store 中的现有应用程序 - 该应用程序可能会因为它们所基于的证书被删除而被从销售中删除。

当然，这是我想避免的情况。有谁知道**在**对现有证书使用 Revoke 选项时会发生什么。这甚至会影响 App Store 应用程序吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-11T09:13:25.503

对于 App Store 应用程序，您无需担心。应用商店二进制文件上的签名信息仅用于初始验证，以确保它来自您。上传后，二进制文件将使用 Apple 的私钥进行转换和签名，使用 Fairplay 等进行加密。

这意味着撤销您的分发认证不会影响正在运行的应用程序。如果您有企业帐户，您只需要担心。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-11T09:13:24.217

不，吊销证书不会影响已在销售的应用程序。就此而言，它甚至不会影响提交审核的应用程序。（我们在审查更新时更新了证书。完全没有问题）

# java - 没有对象分配的 for 循环如何导致 JVM 抖动？

> ID：15944803
> 
> 赞同：4
> 
> 时间：2013-04-11T09:08:44.350
> 
> 标签：java, jvm, jvm-hotspot, microbenchmark

我一直在对以下代码进行微基准测试，我注意到一些有趣的东西，我希望有人能对此有所了解。这导致了一种情况，看起来 for 循环可以继续快速运行，同时阻塞 JVM 中的其他线程。如果这是真的，那么我想了解为什么，如果不是真的，那么任何对我可能遗漏的东西的见解都会受到赞赏。

为了建立这种情况，让我带您了解我正在运行的基准测试及其结果。

代码非常简单，遍历数组中的每个元素，对其内容求和。重复“targetCount”次。

```
public class UncontendedByteArrayReadBM extends Benchmark {

private int arraySize;
private byte[] array;

public UncontendedByteArrayReadBM( int arraySize ) {
    super( "array reads" );

    this.arraySize = arraySize;
}

@Override
public void setUp() {
    super.setUp();

    array = new byte[arraySize];
}

@Override
public void tearDown() {
    array = null;
}

@Override
public BenchmarkResult invoke( int targetCount ) {
    long sum = 0;
    for ( int i=0; i<targetCount; i++ ) {
        for ( int j=0; j<arraySize; j++ ) {
            sum += array[j];
        }
    }

    return new BenchmarkResult( ((long)targetCount)*arraySize, "uncontended byte array reads", sum );
}

} 
```

在我的 4 核 - 2Ghz Intel Sandy Bridged/i7 笔记本电脑上，在 OSX 上运行 Java 6 (Oracle JVM)。此代码反复运行到

2.626852686364034 非竞争字节数组读取/ns [totalTestRun=3806.837ms]

（我已经剔除了用于加热 JVM 的重复运行）

这个结果在我看来是合理的。

当我开始测量 JVM Jitter 时，这很有趣。为此，我启动了一个休眠 1ms 的后台守护线程，然后计算出它真正休眠的时间比 1ms 长了多少。我更改了报告以打印出每次重复测试运行的最大抖动。

2.6109858273078306 非竞争字节数组读取/ns [maxJitter=0.411ms totalTestRun=3829.971ms]

为了了解我的环境的“正常”抖动，在开始实际测试运行之前，我在没有任何工作的情况下监控抖动，并且以下读数是典型的（均以毫秒为单位）。因此，0.411ms 的抖动是正常的，并不那么有趣。

```
getMaxJitterMillis() = 0.599
getMaxJitterMillis() = 0.37
getMaxJitterMillis() = 0.352 
```

我在这个问题的结尾包含了我如何测量抖动的代码。

然而有趣的部分，是的，它确实发生在“JVM预热”期间，因此不“正常”，但我想更详细地了解以下内容：

```
2.4519521584902644 uncontended byte array reads/ns  [maxJitter=2561.222ms totalTestRun=4078.383ms] 
```

请注意，抖动超过 2.5 秒。通常我会把它归结为GC。但是，我确实在测试运行之前触发了 System.gc()，并且 -XX:+PrintGCDetails 此时没有显示 GC。事实上，在任何测试运行期间都没有 GC，因为在这个总结预分配字节的测试中几乎没有发生对象分配。每次我运行新测试时也会发生这种情况，因此我不怀疑它是来自其他随机发生的进程的干扰。

我的好奇心猛增，因为当我注意到总运行时间的抖动非常高时，实际上每纳秒读取数组元素的数量或多或少保持不变。因此，在这种情况下，一个线程在 4 核机器上严重滞后，而工作线程本身并没有滞后，也没有 GC 进行。

进一步调查，我查看了 Hotspot 编译器在做什么，并通过 -XX:+PrintCompilation 找到以下内容：

```
2632   2%      com.mosaic.benchmark.datastructures.array.UncontendedByteArrayReadBM::invoke @ 14 (65 bytes)
6709   2%     made not entrant  com.mosaic.benchmark.datastructures.array.UncontendedByteArrayReadBM::invoke @ -2 (65 bytes) 
```

打印出来的这两行之间的延迟约为 2.5 秒。就在包含大 for 循环的方法已将其优化代码标记为不再进入时。

我的理解是 Hotspot 在后台线程上运行，当它准备好换入新版本的代码时，它会等待已经运行的代码到达安全点，然后再换入。如果是一个大的 for 循环，位于每个循环体的末尾（可能已经展开了一些）。我预计不会有 2.5 秒的延迟，除非此换出必须在 JVM 中执行停止世界事件。在去优化以前编译的代码时会这样做吗？

所以我对 JVM 内部专家的第一个问题是，我是否走在正确的轨道上？2.5 秒的延迟是否是由于将该方法标记为“未进入”？如果是这样，为什么它会对其他线程产生如此极端的影响？如果这不太可能是原因，那么任何关于其他调查内容的想法都会很棒。

（为了完整起见，这里是我用来测量抖动的代码）

```
private static class MeasureJitter extends Thread {
    private AtomicLong maxJitterWitnessedNS = new AtomicLong(0);

    public MeasureJitter() {
        setDaemon( true );
    }

    public void reset() {
        maxJitterWitnessedNS.set( 0 );
    }

    public double getMaxJitterMillis() {
        return maxJitterWitnessedNS.get()/1000000.0;
    }

    public void printMaxJitterMillis() {
        System.out.println( "getMaxJitterMillis() = " + getMaxJitterMillis() );
    }

    @Override
    public void run() {
        super.run();

        long preSleepNS = System.nanoTime();
        while( true ) {
            try {
                Thread.sleep( 1 );
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            long wakeupNS = System.nanoTime();
            long jitterNS = Math.max(0, wakeupNS - (preSleepNS+1000000));

            long max = Math.max( maxJitterWitnessedNS.get(), jitterNS );
            maxJitterWitnessedNS.lazySet( max );

            preSleepNS = wakeupNS;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T09:55:02.810

这需要一些挖掘才能找到确凿的证据，但经验教训很有价值；特别是关于如何证明和隔离原因。所以我认为在这里记录它们是件好事。

JVM 确实在等待执行 Stop The World 事件。[Alexey Ragozin 在http://blog.ragozin.info/2012/10/safepoints-in-hotspot-jvm.html](http://blog.ragozin.info/2012/10/safepoints-in-hotspot-jvm.html)上有一篇关于这个主题的非常好的博客文章，这篇文章让我走上了正确的道路。他指出，安全点在于 JNI 方法边界和 Java 方法调用。因此，我在这里的 for 循环没有安全点。

要了解 Java 中的 stop the world 事件，请使用以下 JVM 标志：`-XX:+PrintGCApplicationStoppedTime -XX:+PrintSafepointStatistics -XX:PrintSafepointStatisticsCount=1`

第一个打印出停止世界事件的总持续时间，并且不仅限于 GC。就我而言，这里打印出：

```
Total time for which application threads were stopped: 2.5880809 seconds 
```

这证明我遇到了等待到达安全点的线程问题。接下来的两个参数打印出 JVM 为什么要等待到达全局安全点。

```
 vmop                    [threads: total initially_running wait_to_block]    [time: spin block sync cleanup vmop] page_trap_count
4.144: EnableBiasedLocking              [      10          1              1    ]      [  2678     0  2678     0     0    ]  0   
Total time for which application threads were stopped: 2.6788891 seconds 
```

所以这表示 JVM 在尝试启用偏向锁定时等待了 2678 毫秒。为什么这是一个停止世界事件？值得庆幸的是，Martin Thompson 过去也遇到过这个问题，他在[这里](http://mechanical-sympathy.blogspot.co.uk/2011/11/biased-locking-osr-and-benchmarking-fun.html)记录了它。事实证明，Oracle JVM 在启动期间有相当多的线程争用，在此期间，偏向锁定具有非常高的成本，因此它会将优化延迟打开 4 秒。所以这里发生的事情是我的微基准测试超过了四秒，然后它的循环中没有安全点。因此，当 JVM 试图打开 Biased Locking 时，它必须等待。

对我有用的候选解决方案是：

1.  -XX:-UseBiasedLocking（关闭偏置锁定）
2.  -XX:BiasedLockingStartupDelay=0（立即启用偏向锁定）
3.  更改循环以在其中有一个安全点（例如，未优化或内联的方法调用）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T09:22:00.667

抖动的原因有很多

*   sleep 在毫秒级别是非常不可靠的。
*   上下文切换
*   中断
*   由于其他程序正在运行而导致缓存未命中

即使您忙于等待，将线程绑定到一个已隔离的 cpu，例如使用 isocpus，并将所有可以从该 cpu 移出的中断，您仍然可以看到少量的抖动。你所能做的就是减少它。

顺便说一句： [jHiccup](http://www.azulsystems.com/jHiccup)完全按照您正在做的事情来测量系统的抖动。

# python - 使用python选择最后一次出现的模式

> ID：15944811
> 
> 赞同：0
> 
> 时间：2013-04-11T09:09:01.023
> 
> 标签：python, regex

```
 s="""04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: jockey
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 82
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: Donald
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 83
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 [STACK]( 1653): Not doing anything
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: Mickey
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 84
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: Donald
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 83
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: jockey
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 82
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS"""

    exepat= re.compile(".*Sending request.*?Donald.*?TO BE SENT IS",re.DOTALL)

    reout = exepat.findall(s)

    print reout[0]

Expected Output:
    04-09 11:11:57.879 D/PTT [STACK]( 1653): *********Sending request
    04-09 11:11:57.879 [STACK]( 1653): *********
    04-09 11:11:57.879 [STACK]( 1653): S: abcd 
    04-09 11:11:57.879 [STACK]( 1653): l: Donald
    04-09 11:11:57.879 [STACK]( 1653): k: sucess
    04-09 11:11:57.879 [STACK]( 1653): j: 83
    04-09 11:11:57.879 [STACK]( 1653): 
    04-09 11:11:57.879 [STACK]( 1653): MESSAGE TO BE SENT IS 
```

我需要一种模式来提取在“发送请求”和“要发送的消息是”之间具有“唐纳德”的请求。在上面的示例中，两个请求包含“唐纳德”。所以 reout 列表应该有 2 个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:16:02.810

Put parentheses around the part of the match you want to find:

```
exepat= re.compile(".*Sending request(.*)TO BE SENT IS", re.DOTALL)

for reout in exepat.findall(s):
    print(reout) 
```

yields

```
04-09 11:11:57.879 [STACK]( 1653): *********
04-09 11:11:57.879 [STACK]( 1653): S: abcd 
04-09 11:11:57.879 [STACK]( 1653): l: jockey
04-09 11:11:57.879 [STACK]( 1653): k: sucess
04-09 11:11:57.879 [STACK]( 1653): j: 84
04-09 11:11:57.879 [STACK]( 1653): 
04-09 11:11:57.879 [STACK]( 1653): 
04-09 11:11:57.879 [STACK]( 1653): MESSAGE 
```

Without parentheses (defining a group), `findall` is just returning the whole string because the whole string matches the pattern.

The [docs explain](http://docs.python.org/2/library/re.html#re.findall):

> Return all non-overlapping matches of pattern in string, as a list of strings. The string is scanned left-to-right, and matches are returned in the order found. If one or more groups are present in the pattern, return a list of groups.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:26:18.320

由于您需要最后一次出现：

```
.+Sending request(.+)TO BE SENT IS.*?$ 
```

# c# - TRY-CATCH 相对于 USING

> ID：15944815
> 
> 赞同：3
> 
> 时间：2013-04-11T09:09:06.567
> 
> 标签：c#

我一直在实施相对于 USING 的 TRY-CATCH，如下例所示：

```
private void someDatabaseMethod(string userName) {

    try {

        using(var conn = new SqlConnection(connString))
        using(var comm = new SqlCommand()) {
            comm.Connection = conn;
            comm.CommandType = CommandType.Text;
            comm.CommandText = string.Concat(@"SELECT UserID FROM xxx WHERE UserName = '", userName,@"'");
            conn.Open();
            object x = comm.ExecuteScalar();
            UserID = (x==null)? 0: (int)x;
        }
    } catch(Exception) {
        throw;
    }
} 
```

我刚刚看到这个[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)，它似乎指向 TRY-CATCH 在 USING 中。所以我的示例如下所示：

```
private void someDatabaseMethod(string userName) {

        using(var conn = new SqlConnection(connString))
        using(var comm = new SqlCommand()) {
            comm.Connection = conn;
            comm.CommandType = CommandType.Text;
            comm.CommandText = string.Concat(@"SELECT UserID FROM xxx WHERE UserName = '", userName,@"'");

            try {

               conn.Open();
               object x = comm.ExecuteScalar();
               UserID = (x==null)? 0: (int)x;

            } catch(Exception) {
               throw;
            }
        }
} 
```

这是更有效的布局吗？如果是这样，为什么？

* * *

**额外说明**

的原因`TRY-CATCH`是重新抛出异常，以便我将其提升到下一个级别 - 所以我想`CATCH`在代码中的某个地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:10:56.660

这取决于你的目标。如果你想在 catch 块中使用命令或连接做某事，那么它应该在使用中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:11:11.033

如果您只是抛出捕获的异常，则根本不需要 try-catch 块。使用将正确配置连接和命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T09:16:37.360

TRY-CATCH 我`using`只在我想记录异常或者我有事务时才使用 - 在除块中回滚它。using 由 TRY-FINALLY 中的编译器翻译 - 您可以使用 IL Disassembler (ildasm.exe) 或反射器检查它以释放您的一次性资源。所以这 `using`相当于：

```
try 
{
 //do job
} 
finally
{
  Resource.Dispose()
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T09:20:33.873

第二个效率更高。对于第一个；你不能从 catch 块访问连接对象，也不能关闭它。此外，如果您在此连接上使用事务，则在发生任何错误时都无法回滚事务...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T09:18:15.893

*   不要捕获在这个地方无法处理的异常。
*   catch{throw;} 除了增加复杂性之外没有任何用处
*   尽可能在异常源附近捕获和处理异常

[在这里阅读广泛的讨论](https://stackoverflow.com/questions/1697216/the-difference-between-try-catch-throw-and-try-catche-throw-e)

# php - 可以依赖服务器文档根目录吗

> ID：15944817
> 
> 赞同：1
> 
> 时间：2013-04-11T09:09:13.360
> 
> 标签：php

大约 9 年前，我为我的网站编写了 PHP 代码。我有一个名为`common.php`. 我站点中的每个页面都需要此页面来访问站点的常量、类和变量。

我在本地机器上开发，然后将文件上传到实时站点。我在页面上使用的代码`common.php`是：

```
$main = ($_SERVER['HTTP_HOST'] == 'localhost')? "E:\-=Web=-\-=Sites=-\mysite\main\common.php" :"/home/mysite/public_html/main/common.php";
require_once($main); 
```

这工作得很好，从来没有给我任何问题。

但是，我想我可以改为使用：

```
require_once($_SERVER["DOCUMENT_ROOT"]."/main/common.php") 
```

这将使我的代码更紧凑，这也意味着我不必总是将我的开发站点文件放在`E://`

所以我的问题是，使用它是一种好习惯`$_SERVER["DOCUMENT_ROOT"]`吗？

如果希望在每个页面上调用配置文件，这是大多数开发人员会做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:19:33.903

最常见和最可靠的方法是在 index.php 文件或包含在同一目录或已知相对路径中的 config.php 文件中定义一个包含代码路径的常量，并引用：

```
if (!defined('APP_DIR')) define('APP_DIR', __DIR__); // set the app directory to that of the currently executing file 
```

您对其他文件的要求行将变为此

```
require_once(APP_DIR . '/main/common.php'); 
```

现在，您可以保证此常量将包含您期望的内容。假设你设置正确，就是这样。;)

# regex - 用正则表达式的内容替换文件路径

> ID：15944818
> 
> 赞同：0
> 
> 时间：2013-04-11T09:09:17.113
> 
> 标签：regex, bash

我需要翻译；

```
\verbatiminput{code.R} 
```

进入

```
\begin{verbatim}
#### Hello world ####
print ("hello world")
#####################
\end{verbatim} 
```

那就是放置文件的内容`code.R`而不是路径。

一种解决方案是；

```
perl -pe 's{\\verbatiminput\{(.*?)\}}{local$/;open F,"<$1";"\\begin{verbatim}".<F>}ge' 
```

1.  如何添加`\end{verbatim}`？
2.  有更好的正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:48:15.213

如果您`sed`支持`e`修饰符，则可以执行以下操作：

```
$ cat testdata
foo
\verbatiminput{file1}
bar
\verbatiminput{file2}
quux

$ sed -e 's#\\verbatiminput{\([^}]*\)}#echo "\\begin{verbatim}";cat "\1";echo "\\end{verbatim}"#ge' testdata
foo
\begin{verbatim}
this
is
file1

\end{verbatim}
bar
\begin{verbatim}
this
is
file2

\end{verbatim}
quux 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:14:43.987

我还没有测试过，但我会像这样重写（实际上我可以将它作为脚本而不是一个衬里）

*   # 而不是 { 更清晰
*   q() 而不是 "" 意味着更少的插值
*   中的空格`local $/`
*   more() 使意图更清晰
*   我很确定在连接中将在数组上下文中，因此将读取整个文件。而在标量上下文中将读取一行

`perl -pe 's#\\verbatiminput{(.*?)}#local $/;open(F,"<$1");join(q(),q(\begin{verbatim}"),<F>,q(\end{verbatim})#ge'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T12:19:17.287

考虑这个输入：

```
$ cat input
some line 1
some line 2
\verbatiminput{code.R}
some line 3
\verbatiminput{code1.R}

$ cat code.R 
#### Hello world ####
print ("hello world")
#####################

$ cat code1.R 
#### Goodby world ####
print ("goodby world")
##################### 
```

和以下 bash 脚本：

```
#!/bin/bash

regex='^\verbatiminput\{(.*)\}$'

while read line
do
    if [[ $line =~ $regex ]]
    then 
        file="${BASH_REMATCH[1]}"
        echo \\begin{verbatim}
        cat $file
        echo \\end{verbatim}
    else
        echo $line
    fi
done < input 
```

这将给出以下输出：

```
some line 1
some line 2
\begin{verbatim}
#### Hello world ####
print ("hello world")
#####################
\end{verbatim}
some line 3
\begin{verbatim}
#### Goodby world ####
print ("goodby world")
#####################
\end{verbatim} 
```

这使用`=~`which 是 Bash 的正则表达式匹配运算符。匹配结果保存到一个名为 的数组中`$BASH_REMATCH`。第一个捕获组存储在索引 1 中，第二个（如果有）存储在索引 2 中，依此类推。索引 0 是完全匹配。

# git - 如何撤消 git 混合重置？

> ID：15944820
> 
> 赞同：2
> 
> 时间：2013-04-11T09:09:19.540
> 
> 标签：git

我在我的工作目录中运行了以下命令。

`git reset`

它打印了一些文件的名称，例如

`M /path/to/file`

来自[“git reset”命令在没有任何选项的情况下做什么？](https://stackoverflow.com/questions/6931299/what-does-git-reset-command-do-without-any-option)我明白了`git reset`=`git reset --mixed HEAD`

如何撤消上述操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:24:53.833

如果您刚刚执行了“git reset”，则您刚刚取消了您的文件，但您的工作目录中仍然有您的修改。所以当你重置为 HEAD 时，你没有丢失任何东西，也没有改变任何东西。

例如，即使您执行了“git reset HEAD~2”，这会更改您的工作目录，您仍然可以使用 reflog 进行恢复，如[本问题所述](https://stackoverflow.com/questions/5473/undoing-a-git-reset-hard-head1)

# php - 在 php 数组中搜索部分字符串匹配

> ID：15944824
> 
> 赞同：37
> 
> 时间：2013-04-11T09:09:32.167
> 
> 标签：php, arrays, string, search

我有一个数组，我想搜索字符串`'green'`。所以在这种情况下它应该返回`$arr[2]`

```
$arr = array(0 => 'blue', 1 => 'red', 2 => 'green string', 3 => 'red'); 
```

有没有像 in_array() 这样的预定义函数来完成这项工作，**而不是遍历它**并比较每个值？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-11T09:13:21.130

对于**部分匹配**，您可以迭代数组并使用类似[strpos()](http://php.net/manual/en/function.strpos.php)的字符串搜索函数。

```
function array_search_partial($arr, $keyword) {
    foreach($arr as $index => $string) {
        if (strpos($string, $keyword) !== FALSE)
            return $index;
    }
} 
```

对于**完全匹配**，使用[in_array()](http://php.net/manual/en/function.in-array.php)

```
in_array('green', $arr) 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-11T09:15:07.080

您可以使用 php 的 preg_grep 函数。它在 PHP >= 4.0.5 中受支持。

```
$array = array(0 => 'blue', 1 => 'red', 2 => 'green string', 3 => 'red');
$m_array = preg_grep('/^green\s.*/', $array); 
```

`$m_array`包含数组的匹配元素。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-11T09:17:39.370

有几种方法...

```
$arr = array(0 => 'blue', 1 => 'red', 2 => 'green string', 3 => 'red'); 
```

**使用循环搜索数组：**

```
$results = array();

foreach ($arr as $value) {

  if (strpos($value, 'green') !== false) { $results[] = $value; }

}

if( empty($results) ) { echo 'No matches found.'; }
else { echo "'green' was found in: " . implode('; ', $results); } 
```

**使用 array_filter()：**

```
$results = array_filter($arr, function($value) {
    return strpos($value, 'green') !== false;
}); 
```

为了将闭包与其他参数一起使用，需要使用`use`-keyword。所以你可以抽象它并将它包装成一个函数：

```
function find_string_in_array ($arr, $string) {

    return array_filter($arr, function($value) use ($string) {
        return strpos($value, $string) !== false;
    });

}

$results = find_string_in_array ($arr, 'green');

if( empty($results) ) { echo 'No matches found.'; }
else { echo "'green' was found in: " . implode('; ', $results); } 
```

这是一个工作示例：[http ://codepad.viper-7.com/xZtnN7](http://codepad.viper-7.com/xZtnN7)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-11T09:19:51.040

PHP 5.3+

```
array_walk($arr, function($item, $key) {
    if(strpos($item, 'green') !== false) {
        echo 'Found in: ' . $item . ', with key: ' . $key;
    }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-11T09:20:46.537

对于使用 '%needle%' 的类似 sql 进行搜索，您可以尝试使用

```
$input = preg_quote('gree', '~'); // don't forget to quote input string!
$data = array(
    1 => 'orange',
    2 => 'green string',
    3 => 'green', 
    4 => 'red', 
    5 => 'black'
    );
$result = preg_filter('~' . $input . '~', null, $data); 
```

结果是

```
{
  "2": " string",
  "3": ""
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T09:14:45.900

```
function check($string) 
{
    foreach($arr as $a) {
        if(strpos($a,$string) !== false) {
            return true;
        } 
    }
    return false;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-11T09:15:30.213

```
function findStr($arr, $str) 
{  
    foreach ($arr as &$s) 
    {
       if(strpos($s, $str) !== false)
           return $s;
    }

    return "";
} 
```

You can change the return value to the corresponding index number with a little modification if you want, but since you said "...return the $arr[2]" I wrote it to return the value instead.

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-05-12T21:38:42.233

在整个数组中快速搜索一个短语可能是这样的：

```
if (preg_match("/search/is", var_export($arr, true))) {
    // match
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-05-26T09:13:45.053

为了找出数组中是否存在 UTF-8 不区分大小写的子字符串，我发现这种方法比使用 mb_strtolower 或 mb_convert_case 快得多：

1.  将数组内爆成一个字符串：**$imploded=implode(" ", $myarray);** .

2.  使用自定义函数将内爆字符串转换为小写： **$lowercased_imploded = to_lower_case($imploded);**

    函数 to_lower_case($str) {

$from_array=["A","B","C","D","E","F","G","H","I","J","K","L ","M","N","O","P","Q","R","S","T","U","V","W","X", "Y","Z","Ä","Ö","Ü","Õ","Ž","Š"];

$to_array=["a","b","c","d","e","f","g","h","i","j","k","l ","m","n","o","p","q","r","s","t","u","v","w","x", "y","z","ä","ö","ü","õ","ž","š"];

foreach($from_array as $key=>$val){$str=str_replace($val, $to_array[$key], $str);}

返回 $str;

}

3.  使用普通 strpos 搜索匹配：**if(strpos($lowercased_imploded, "substring_to_find")!==false){do something}**

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-12-19T16:13:31.083

这是一个用于普通或多维数组的函数。

*   不区分大小写
*   适用于普通数组和多维数组
*   在发现全部或部分蜇伤时有效

这是代码**（版本1）**：

```
function array_find($needle, array $haystack, $column = null) {

    if(is_array($haystack[0]) === true) { // check for multidimentional array

        foreach (array_column($haystack, $column) as $key => $value) {
            if (strpos(strtolower($value), strtolower($needle)) !== false) {
                return $key;
            }
        }

    } else {
        foreach ($haystack as $key => $value) { // for normal array
            if (strpos(strtolower($value), strtolower($needle)) !== false) {
                return $key;
            }
        }
    }
    return false;
} 
```

这是一个例子：

```
$multiArray = array(
     0 => array(
              'name' => 'kevin',
              'hobbies' => 'Football / Cricket'),
      1 => array(
              'name' => 'tom',
              'hobbies' => 'tennis'),
       2 => array(
              'name' => 'alex',
              'hobbies' => 'Golf, Softball')
);
$singleArray = array(
        0 => 'Tennis',
        1 => 'Cricket',
);

echo "key is - ". array_find('cricket', $singleArray); // returns - key is - 1
echo "key is - ". array_find('cricket', $multiArray, 'hobbies'); // returns - key is - 0 
```

仅适用于多维数组 - $column 与每个数组中的键名相关。如果 $needle 出现不止一次，我建议添加到此以将每个键添加到数组中。

如果您期望多个匹配项**（版本 2）** ，这是一个示例：

```
function array_find($needle, array $haystack, $column = null) {

    $keyArray = array();

    if(is_array($haystack[0]) === true) { // for multidimentional array

        foreach (array_column($haystack, $column) as $key => $value) {
            if (strpos(strtolower($value), strtolower($needle)) !== false) {
                $keyArray[] = $key;

            }
        }

    } else {
        foreach ($haystack as $key => $value) { // for normal array
            if (strpos(strtolower($value), strtolower($needle)) !== false) {
                $keyArray[] = $key;
            }
        }
    }

    if(empty($keyArray)) {
        return false;
    }
    if(count($keyArray) == 1) {
        return $keyArray[0];
    } else {
        return $keyArray;
    }

} 
```

如果它只有一个匹配项，则返回键，但如果 $needle 在任何 $column 内有多个匹配项，则它将返回匹配键的数组。

希望这可以帮助 ：）

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2016-12-15T11:47:56.447

```
<?php
   $a=array("a"=>"red","b"=>"green","c"=>"blue");
   echo array_search("red",$a);
?> 
```

我有同样的问题，所以试试这个......

# php - cakephp中的静态方法

> ID：15944825
> 
> 赞同：0
> 
> 时间：2013-04-11T09:09:35.763
> 
> 标签：php, cakephp, cakephp-2.0

从另一个控制器调用静态方法后，它显示错误消息

```
$shipprice = CartController::calcshipping();

Error: 
    Using $this when not in object context 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:19:49.683

您永远不会从其他控制器调用控制器。

您可以将代码放入组件或模型中。通过这种方式，您可以在不同控制器之间共享功能，而无需上述黑客攻击。

然后也不需要在这里做任何静态的东西。它可以只是一个普通的对象调用。

```
$this->MyComponent->calc(); 
```

或者

```
$this->MyModel->calc(); 
```

ETC

# c++ - boost char_ptr_holder 实例化

> ID：15944829
> 
> 赞同：0
> 
> 时间：2013-04-11T09:09:50.047
> 
> 标签：c++, templates, boost, constructor, initialization

我正在尝试实例化 boost 库中定义的以下类

在 boost/interprocess/detail/segment_manager_helper.hpp 中定义

```
 template<class CharType>
 class char_ptr_holder
 {
   public:
    char_ptr_holder(const CharType *name)
    : m_name(name)
   {}

  char_ptr_holder(const anonymous_instance_t *)
     : m_name(static_cast<CharType*>(0))
  {}

  char_ptr_holder(const unique_instance_t *)
    : m_name(reinterpret_cast<CharType*>(-1))
  {}

  operator const CharType *()
  {  return m_name;  }

  private:
   const CharType *m_name;
}; 
```

但我做不到。我很困惑，因为 m_name 是一个指针，但是在初始化列表中使用 CharType * 的参数“构造”。

帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:11:52.157

例如

```
char_ptr_holder<char> value("Hello!"); 
```

# php - 正则表达式匹配实际模式之前的空白字符 - PHP

> ID：15944830
> 
> 赞同：2
> 
> 时间：2013-04-11T09:09:59.257
> 
> 标签：php, regex

我有这个字符串-： `@Harry @Harry are great twins with @Harry`

我想匹配`@Harry`上面的字符串。但在一种情况下-：

> @Harry 前面应该没有任何内容或只有一个空格字符，继承也一样。

所以这里必须找到 3 个匹配项。目前我正在这样做，但徒劳无功- `(\s|^$)\@Harry(\s|^$)`：。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:13:37.677

`^$`表示一个空字符串。
[`\s`不仅仅是一个空格（[source](http://www.regular-expressions.info/charclass.html)），所以你应该只使用一个空格 :)] <= 不必要

因此，不将空格作为匹配的一部分：

```
"/(?<=^|\s)@Harry(?=\s|$)/" 
```

**编辑：环视的**
[来源](http://www.regular-expressions.info/lookaround.html)。
此外，如果您想匹配空格，请删除这些环视。

# javascript - 为重定向下载链接捕获 HTTP 状态 300

> ID：15944833
> 
> 赞同：1
> 
> 时间：2013-04-11T09:10:18.173
> 
> 标签：javascript, jquery, ajax, google-chrome-extension, xmlhttprequest

我正在开发一个 Chrome 扩展程序来下载网页上的链接。我遇到了一些没有直接下载的链接，例如这个[http://downloads.sourceforge.net/sevenzip/7z920-x64.msi](http://downloads.sourceforge.net/sevenzip/7z920-x64.msi)

当我在提琴手上跟踪链接时，我得到了**HTTP 状态 302**（这是一个重定向）。所以我试图在使用 XMLHTTPRequest 下载之前测试链接，但我无法检索状态**302**， XMLHTTPRequest 只是检索文件状态**200**？

是否有一个技巧可以让它停在 302 或者可能是 AJAX 调用的不同替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:57:43.987

这可以通过使用[`chrome.webRequest`](http://developer.chrome.com/extensions/webRequest.html)api 来实现。`302`'s 等通常由浏览器静默处理，但您可以使用此方法停止它们或使它们对您的代码更可见。

```
chrome.webRequest.onHeadersReceived.addListener(function(details){
    var redirUrl;
    details.responseHeaders.forEach(function(v,i,a){
      if(v.name == "Location"){
       redirUrl = v.value;
       details.responseHeaders.splice(i,1);  //Kill the redirect
      }
    });
    if(redirUrl)
      details.responseHeaders.push({name:"redirUrl",value:redirUrl});
    return {responseHeaders:details.responseHeaders}; 
},
{urls: ["http://*/*"],tabId:-1},["responseHeaders","blocking"]); 
```

我指定了`tabId`-1，这意味着它应该只适用于不是来自选项卡的请求，即背景页面。这将静默阻止重定向，同时允许您访问`302`状态和要重定向到的 url。

# java - 如何从网站 url 获取干净的 xml 表示

> ID：15944834
> 
> 赞同：0
> 
> 时间：2013-04-11T09:10:19.503
> 
> 标签：java, xml, dom, sax, htmlcleaner

我正在尝试获得网站网址的清晰表示，因此我可以将“html”放在

```
org.w3c.dom.Document 
```

能够使用 xpath 等进行进一步处理。

当我尝试将 html 放入文档时，我得到的是：

org.xml.sax.SAXParseException : Elementtyp "link" muss mit dem entsprechenden Endtag "" bedet werden

这意味着，该“链接”必须关闭，本网站并非如此。

那么，可能是正确的方法吗？我应该“修复”文档并替换错误吗？

我尝试了 net.sourceforge.htmlcleaner 但它没有弄清楚如何“修复”错误。

有什么帮助吗？

问候，霍尔格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:11:53.227

你可以看看 Neko： http: [//nekohtml.sourceforge.net/](http://nekohtml.sourceforge.net/)

对我来说效果非常好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:13:55.810

HTML 通常不是 xml，因此 Document 无法处理它。你需要一个像[JSoup这样的特殊库](http://jsoup.org/)

# java - 使fillRect从右到左动态填充

> ID：15944839
> 
> 赞同：0
> 
> 时间：2013-04-11T09:10:26.470
> 
> 标签：java, awt

嗨，我目前正在开发一个 Java 应用程序，我必须使用 Canvas、Graphics 等进行一些绘制。

因此，如果我单击一个点并将其拖过，它之间应该有一条线（想想在油漆中画一条线）。

我目前正在使用fillRect，问题是，有没有办法从右到左填充矩形？还是我必须为此明确创建解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:23:31.857

`fillRect()`方法需要四个参数，`x`, `y`, `width`, `height`。你应该做的只是计算这些参数的值。如果你想从右到左绘制填充矩形，你只需要随着鼠标移动而减少`x`和增加。`width`而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:40:43.390

添加到 ntalbs 的优秀答案（+1）。

基本上，当用户单击一个点时，您需要将其存储为锚点。当他们拖动鼠标时，您需要确定鼠标拖动的方向。

如果 click.x > drag.x，则 drag.x 成为矩形的 x 参数，否则为 click.x。

宽度和高度很简单确定为单击和拖动点之间的差异（考虑哪个更大;））

# android - 适用于 Android 的 SDK：facebook 如何检查哈希键？

> ID：15944842
> 
> 赞同：6
> 
> 时间：2013-04-11T09:10:39.697
> 
> 标签：android, facebook, security, facebook-android-sdk

当我们想使用 Facebook SDK for Android 作为我们的 SSO 解决方案时，我们需要将我们的 Android 应用程序签名放入我们的 Facebook 应用程序设置（[Facebook sdk for android](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/#sig)的第 5 步）。

并且该签名应该通过运行 Android SDK 附带的 keytool 来生成。

我很好奇facebook如何验证这个签名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-14T10:50:58.717

一年多后，我想我最好回答我的问题。

Android 的应用可以通过以下方式获取其他应用的签名：

```
public String WriteSignature(String packageName)
{     
   PackageManager pm = this.getPackageManager();
   String sig = ""; 
   PackageInfo pi = null;
   try {
       pi = pm.getPackageInfo(packageName, PackageManager.GET_SIGNATURES);
   } catch (NameNotFoundException e1) {
       e1.printStackTrace();
   }

   try {
       for (Signature signature : pi.signatures) {
           MessageDigest md = MessageDigest.getInstance("SHA");
           md.update(signature.toByteArray());
           sig = Base64.encodeToString(md.digest(), Base64.DEFAULT);
           Log.d(ACTIVITY_TAG, sig);
       }
   } catch (NoSuchAlgorithmException e) {
       e.printStackTrace();
   }

   return sig;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T07:48:35.833

*   为了使 facebook 应用程序正常运行，我们需要提供 Facebook “App Id”
*   对于android平台，我们需要提供包名、类名和“HashKey”
*   应用程序将主要有 2 个 HashKey 用于“调试”和“发布”版本的应用程序
*   当应用程序访问 facebook 时，SDK 会在内部生成 HashKey 并将其与在 facebook 应用程序期间提交的 HashKey 进行比较

# r - 按升序列出文件

> ID：15944844
> 
> 赞同：9
> 
> 时间：2013-04-11T09:10:40.357
> 
> 标签：r

我有一个关于`list.files()`函数的简单问题。我有一个文件夹，其中包含以这种方式命名的文件列表：

> DF2.txt
> DF3.txt
> DF4.txt
> DF5.txt
> ………………
> _

当我粘贴以下字符串时，

```
files <- list.files(pattern = ".txt") 
```

向量按以下顺序返回值：

> “DF10.txt”
> “DF11.txt”
> “DF12.txt”
> .......... “DF2.txt”
> “ DF20.txt” “DF21.txt” .... ............ “DF3.txt” “ DF30.txt” “ DF31.txt ” ..................

等等。我想以数字递增的顺序列出文件，因为它们出现在文件夹中。为什么 R 在之后更改文件夹中文件的顺序，`list.files()`如何重新排列这些文件以匹配原始顺序？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-11T09:15:12.463

就计算机而言，它*是*正确分类的。但是，您可以`mixedsort`从“gtools”包中获得所需的排序类型：

```
> myFiles <- paste("file", 1:20, ".txt", sep = "")
> sort(myFiles)
 [1] "file10.txt" "file11.txt" "file12.txt" "file13.txt" "file14.txt" "file15.txt"
 [7] "file16.txt" "file17.txt" "file18.txt" "file19.txt" "file1.txt"  "file20.txt"
[13] "file2.txt"  "file3.txt"  "file4.txt"  "file5.txt"  "file6.txt"  "file7.txt" 
[19] "file8.txt"  "file9.txt" 
> library(gtools)
> mixedsort(sort(myFiles))
 [1] "file1.txt"  "file2.txt"  "file3.txt"  "file4.txt"  "file5.txt"  "file6.txt" 
 [7] "file7.txt"  "file8.txt"  "file9.txt"  "file10.txt" "file11.txt" "file12.txt"
[13] "file13.txt" "file14.txt" "file15.txt" "file16.txt" "file17.txt" "file18.txt"
[19] "file19.txt" "file20.txt" 
```

以您的示例为例，这意味着您可以执行以下操作：

```
files <- list.files(pattern = ".txt")
library(gtools)
files <- mixedsort(files) 
```

* * *

### 用户功能很有趣

由于编写小实用函数很容易，因此您也可以编写这样的小函数：

```
ListFiles <- function(pattern = ".txt") {
  require(gtools)
  myFiles <- list.files(pattern = pattern, )
  mixedsort(myFiles)
} 
```

然后，比较：

```
list.files(pattern = ".txt")
ListFiles(pattern = ".txt") 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-11T09:26:47.313

数字按字母顺序排列。对于基本 R 方法，您可以执行以下操作：

```
dat = sort(paste("DF", 1:100, ".txt", sep = ""))
numbers = as.numeric(regmatches(dat, regexpr("[0-9]+", dat)))
dat[order(numbers)]
  [1] "DF1.txt"   "DF2.txt"   "DF3.txt"   "DF4.txt"   "DF5.txt"   "DF6.txt"  
  [7] "DF7.txt"   "DF8.txt"   "DF9.txt"   "DF10.txt"  "DF11.txt"  "DF12.txt" 
 [13] "DF13.txt"  "DF14.txt"  "DF15.txt"  "DF16.txt"  "DF17.txt"  "DF18.txt" 
 [19] "DF19.txt"  "DF20.txt"  "DF21.txt"  "DF22.txt"  "DF23.txt"  "DF24.txt" 
 [25] "DF25.txt"  "DF26.txt"  "DF27.txt"  "DF28.txt"  "DF29.txt"  "DF30.txt" 
 [31] "DF31.txt"  "DF32.txt"  "DF33.txt"  "DF34.txt"  "DF35.txt"  "DF36.txt" 
 [37] "DF37.txt"  "DF38.txt"  "DF39.txt"  "DF40.txt"  "DF41.txt"  "DF42.txt" 
 [43] "DF43.txt"  "DF44.txt"  "DF45.txt"  "DF46.txt"  "DF47.txt"  "DF48.txt" 
 [49] "DF49.txt"  "DF50.txt"  "DF51.txt"  "DF52.txt"  "DF53.txt"  "DF54.txt" 
 [55] "DF55.txt"  "DF56.txt"  "DF57.txt"  "DF58.txt"  "DF59.txt"  "DF60.txt" 
 [61] "DF61.txt"  "DF62.txt"  "DF63.txt"  "DF64.txt"  "DF65.txt"  "DF66.txt" 
 [67] "DF67.txt"  "DF68.txt"  "DF69.txt"  "DF70.txt"  "DF71.txt"  "DF72.txt" 
 [73] "DF73.txt"  "DF74.txt"  "DF75.txt"  "DF76.txt"  "DF77.txt"  "DF78.txt" 
 [79] "DF79.txt"  "DF80.txt"  "DF81.txt"  "DF82.txt"  "DF83.txt"  "DF84.txt" 
 [85] "DF85.txt"  "DF86.txt"  "DF87.txt"  "DF88.txt"  "DF89.txt"  "DF90.txt" 
 [91] "DF91.txt"  "DF92.txt"  "DF93.txt"  "DF94.txt"  "DF95.txt"  "DF96.txt" 
 [97] "DF97.txt"  "DF98.txt"  "DF99.txt"  "DF100.txt" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-11T09:24:44.523

或者，如果您想保持在非异教徒的界限内，您可以使用原始正则表达式。

```
> x <- paste("file", 1:20, ".txt", sep = "")
> sort(x)
 [1] "file1.txt"  "file10.txt" "file11.txt" "file12.txt" "file13.txt" "file14.txt" "file15.txt" "file16.txt" "file17.txt"
[10] "file18.txt" "file19.txt" "file2.txt"  "file20.txt" "file3.txt"  "file4.txt"  "file5.txt"  "file6.txt"  "file7.txt" 
[19] "file8.txt"  "file9.txt" 
> num.sort <- as.numeric(gsub("[^\\d]+", "\\1", x, perl = TRUE))
> x[sort(num.sort)]
 [1] "file1.txt"  "file2.txt"  "file3.txt"  "file4.txt"  "file5.txt"  "file6.txt"  "file7.txt"  "file8.txt"  "file9.txt" 
[10] "file10.txt" "file11.txt" "file12.txt" "file13.txt" "file14.txt" "file15.txt" "file16.txt" "file17.txt" "file18.txt"
[19] "file19.txt" "file20.txt" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-27T10:03:41.617

这是一个自然排序与字母排序的问题。对我来说，名为 naturalsort 的包最适合以人类可读的方式显示文件名。

```
> #install.packages("naturalsort")
> library("naturalsort")
> x <-  paste(c("2file1","2file2","10file1.2","10file0.2","20file1","100",""))
> naturalsort(x)
[1] ""          "2file1"    "2file2"    "10file0.2" "10file1.2" "20file1"   "100" 
```

# java - 使测试独立于使用的框架的工具

> ID：15944851
> 
> 赞同：0
> 
> 时间：2013-04-11T09:11:03.593
> 
> 标签：java, testing, frameworks

我们为我们的项目使用不同的框架（spring mvc、gwt、tapestry...）。所以我们想找到一个框架（或机制？），使我们能够独立于使用的框架进行测试（单元和集成）。这可能吗 ？

谢谢

# asp.net - 我正在尝试使用路由概念

> ID：15944852
> 
> 赞同：0
> 
> 时间：2013-04-11T09:11:05.297
> 
> 标签：asp.net, url-routing

我正在尝试使用路由概念。我想显示与页面一致的 url。所有页面都是由动态创建的。每个页面都有自己唯一的 id。我了解基本概念

我正在添加 global.asax 文件

```
void Application_Start(object sender, EventArgs e) 
{

    RegisterRoutes(System.Web.Routing.RouteTable.Routes);

}
void  RegisterRoutes(System.Web.Routing.RouteCollection routes)
{

    routes.MapPageRoute("Home", "home1", "~/default.aspx");
    routes.MapPageRoute("Home", "home2", "~/default2.aspx");

} 
```

和 C# 编码

```
 RouteValueDictionary para = new RouteValueDictionary { {"","" } };
   VirtualPathData abc = RouteTable.Routes.GetVirtualPath(null,"home",para);
   hyper.NavigateUrl = abc.VirtualPath; 
```

我的问题是我如何从数据库中获取页面 id 以及我可以在哪里传递这个值......

# jquery - Cakephp-Jquery 菜单栏更改 URL

> ID：15944858
> 
> 赞同：0
> 
> 时间：2013-04-11T09:11:20.990
> 
> 标签：jquery, cakephp, menubar

我正在尝试使用 Jquery 为 cakephp 网站创建菜单栏。下面的代码显示了放置在视图文件夹中的 ctp 文件中的菜单元素。

```
 <div id="menubar" class="menu">
        <ul id="menu" class="menu">

             <li class="active">
           <a href="#tab4"><span>Allocation</span></a>
             </li>
            <li class=><a href="#tab1"><span>Update Travel</span></a></li>
            <li><a href="#tab2"><span>User Profile</span></a></li>
            <li><a href="#tab3"><span>Pay/Withdraw</span></a></li>

        </ul>
        <div class="clear"></div>
    </div> 
```

我创建一个 jquery 文件来选择每个菜单项并将这个文件放在 webroot/js 文件夹中

```
 (function($){ 
 $.fn.extend({  
     tabify: function( callback ) {

        function getHref(el){
            hash = $(el).find('a').attr('href');
            hash = hash.substring(0,hash.length-4);
            return hash;
        }

        function setActive(el){

            $(el).addClass('active');
            $(getHref(el)).show();
            $(el).siblings('li').each(function(){
                $(this).removeClass('active');
                $(getHref(this)).hide();
            });
        }

        return this.each(function() {

            var self = this;
            var callbackArguments   =   {'ul':$(self)};

            $(this).find('li a').each(function(){
                $(this).attr('href',$(this).attr('href') + '-tab');
            });

            function handleHash(){

                if(location.hash && $(self).find('a[href=' + location.hash + ']').length > 0){              
                    setActive($(self).find('a[href=' + location.hash + ']').parent());
                }
            }

            if(location.hash){
                handleHash();
            }

            setInterval(handleHash,100);

            $(this).find('li').each(function(){
                if($(this).hasClass('active')){
                    $(getHref(this)).show();
                } else {
                    $(getHref(this)).hide();
                }
            });

            if(callback){
                callback(callbackArguments);
            }   

        }); 
    } 
}); 
}) (jQuery); 
```

当我调用这个函数时，它会正常工作。

```
 $(document).ready(function () {
$('#menu').tabify();

     }); 
```

但我的问题是，当我在 #tab1,#tab2,#tab3,#tab4 的 ctp 文件中为每个菜单编写确切的 url 时，它将不起作用。

我想给这个网址

```
 <li class=><?php echo $this->Html->link('<span>Commuter</span>', array('action' => '../userprofiles/commuter'), array('escape' => false)); ?></span></li> 
```

安装在

```
 <li><a href="#tab3"><span>Pay/Withdraw</span></a></li> 
```

如果有人可以解决这个问题，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:30:25.407

链接的语法应该是数组的形式（参见[HtmlHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html)的文档）。

```
<li class="">
    <?php echo $this->Html->link('<span>Commuter</span>', 
                                   array('controller'=>$your_controller_here,
                                         'action' => $your_action_here,
                                    $param1 /*parameters if you need them*/),
                               array('escape' => false)); ?>
</li> 
```

根据您的需要更换控制器和操作等，看看是否可以解决问题。

请注意，不必以数组的形式传递 url，但您必须决定是使用数组还是静态字符串 url（如`'../userprofiles/commuter'`），不要同时使用两者。

# shell - 在 shell 脚本中添加 diff 命令时出现错误“意外标记 `(' 附近的语法错误”

> ID：15944859
> 
> 赞同：1
> 
> 时间：2013-04-11T09:11:22.020
> 
> 标签：shell

在 shellscript 中运行 diff 时出现问题，它是`syntax error near unexpected token`('` 代码：

我有一个 2 文件文件 A，文件 B，我想比较 2 个文件并在脚本中使用：

```
diff <( sort fileA ) <( sort FileB ) 
```

但是当运行它的get错误时：

```
syntax error near unexpected token `(' 
```

请帮我！谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:45:55.337

归功于@shellter。您正在使用的构造称为[进程替换](http://tldp.org/LDP/abs/html/process-sub.html)，它不是由 POSIX 标准定义的，因此您不能依赖所有的 shell 来实现此功能。

此外，当您遇到此类问题时，请始终确保您实际上是通过您打算使用的 shell 运行脚本，如果您在此处询问有关 shell 脚本的问题，请说明您正在使用或需要哪个 shell您要针对的问题，因为这可能会产生很大的不同。

以下是一些示例来证明这在 eg`bash`和中有效`ksh`，但在 eg 中无效`dash`：

```
$ bash -c 'diff <( sort file1 ) <( sort file2 )'
2c2
< file1
---
> file2

$ ksh -c 'diff <( sort file1 ) <( sort file2 )'
2c2
< file1
---
> file2

$ dash -c 'diff <( sort file1 ) <( sort file2 )'
dash: 1: Syntax error: "(" unexpected

$ sh -c 'diff <( sort file1 ) <( sort file2 )'
sh: -c: line 0: syntax error near unexpected token `(' 
```

# ssl - 您无权查看此资源 Joomla 问题

> ID：15944860
> 
> 赞同：0
> 
> 时间：2013-04-11T09:11:25.600
> 
> 标签：ssl, joomla

我在 Joomla 中解决这个问题时遇到了一些困难，错误是：

“你无权查看该资源”。

我已经尝试清除所有类型的缓存、浏览器、joomla 缓存等，但在我的 ssl 安全站点上仍然出现上述相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:28:08.873

好的，基本上我已经意识到在安全（https）和不安全（http）页面之间切换可以注销 joomla 用户。我正在使用 html 表单在页面之间传递数据，其中一个表单操作属性没有 https 前缀。将其添加到表单操作 url 基本上是解决方案。

这解决了我的问题。

# javascript - 我将如何以一定的时间间隔重定向到不同的网页

> ID：15944868
> 
> 赞同：0
> 
> 时间：2013-04-11T09:11:45.430
> 
> 标签：javascript, html, xhtml

// 当我创建这个 html 页面时，它只是重定向到第一个 url，五分钟后我将如何重定向到下一个 url，我无法对 url 进行任何更改，我只能更改这个网页。

```
<HTML>
<HEAD>
<TITLE>I moved!!!</TITLE>
<META HTTP-EQUIV="refresh" CONTENT="5;URL=http://url1">
<META HTTP-EQUIV="refresh" CONTENT="300;URL=http://url2">
<META HTTP-EQUIV="refresh" CONTENT="300;URL=http://url3">
<META HTTP-EQUIV="refresh" CONTENT="300;URL=http://url4">
</HEAD>

<BODY>

Your browser should automatically take you there in 5 seconds. If it doesn't please go     to http://my.newplace.com/

</BODY>
</HTML> 
```

你能告诉我吗？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:15:53.147

There is now way for a page to tell the browser to do something after it has left the original page.

The instruction to redirect to the third page would have to come from the second page, not the first page.

* * *

You could implement something with frames, so that the page giving the instruction to redirect is never left, but that is rather icky and won't place nice with framebusters.

* * *

You might want to investigate writing a browser extension to do this instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:15:00.637

您应该在重定向中持久存储一些数据，例如将它们存储在[cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)中。此 cookie 应包含指示哪些页面已用于重定向的数据。对于更细粒度的控制，请改用 JS。

这个伪代码应该可以帮助你

```
var urls = [
      {url:'example.com',time:180000},
      {url:'example2.com',time:190000},
      ... and so on
    ]
  , indexToUse = readCookie('nextIndex') || 0
  ;

setTimeout(function{
  setCookie('nextIndex',indexToUse++);    //set the next index
  window.location = urls[indexToUse].url; //redirect page
},urls[indexToUse].time); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:17:59.847

在第一个元之后，您在页面 url1 上，因此您需要在那里放置下一个元。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T17:33:33.060

我能想到的唯一方法是使用 AJAX 并将页面加载到框架中。但是地址栏中的 URL 不会改变，除非在所有 AJAX 请求完成后发生元刷新，否则您将始终位于初始页面上。

但我相信这是你唯一的解决方案，如果你不去浏览器插件路由，或者在其他 URL 上放置元重定向（我认为这是你可能不会追求的东西，但我不知道你的项目的范围）。

# php - 更改请求 URL 以指向 servlet 过滤器中的不同 Web 服务器

> ID：15944877
> 
> 赞同：0
> 
> 时间：2013-04-11T09:11:56.893
> 
> 标签：php, jsp, redirect, servlet-filters

有什么方法可以更改请求 URL 以指向托管在不同 Web 服务器中的另一个页面？假设我在 Tomcat 中托管了一个页面：

```
<form action="http://localhost:8080/Test/dummy.jsp" method="Post">
    <input type="text" name="text"></input>
    <input type="Submit" value="submit"/>
</form> 
```

我使用 servlet 过滤器拦截请求：

```
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException,ServletException {
    HttpServletRequest request = (HttpServletRequest) req;
    chain.doFilter(req, res);
    return;
} 
```

我想要的是更改请求 URL 以指向托管在另一个 Web 服务器中的 PHP 页面`http://localhost/display.php`。我知道我可以使用`response.sendRedirect`，但在我的情况下它不起作用，因为它会丢弃所有 POST 数据。有什么方法可以更改请求 URL，以便`chain.doFilter(req, res);`将我转发到那个 PHP 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:20:41.510

默认情况下，`HttpServletResponse#sendRedirect()`发送一个 HTTP 302 重定向，它确实隐式地创建了一个新的 GET 请求。

您需要一个 HTTP 307 重定向。

```
response.setStatus(307);
response.setHeader("Location", "http://localhost/display.php"); 
```

*（我认为`http://localhost`URL 只是示例性的；这显然在生产中不起作用）*

注意：浏览器会在继续之前要求确认。

另一种选择是玩代理：

```
URLConnection connection = new URL("http://localhost/display.php").openConnection();
connection.setDoOutput(true); // POST
// Copy headers if necessary.

InputStream input1 = request.getInputStream();
OutputStream output1 = connection.getOutputStream();
// Copy request body from input1 to output1.

InputStream input2 = connection.getInputStream();
OutputStream output2 = response.getOutputStream();
// Copy response body from input2 to output2. 
```

注意：您最好为此使用[servlet](https://stackoverflow.com/tags/servlets/info)而不是过滤器。

另一种选择是将 PHP 代码移植到 JSP/Servlet 代码。另一种选择是通过诸如 Quercus 之类的 PHP 模块直接在 Tomcat 上运行 PHP。

# service - 重新加载 beanstalkd 配置而不重新启动

> ID：15944879
> 
> 赞同：1
> 
> 时间：2013-04-11T09:11:58.123
> 
> 标签：service, ubuntu-12.04, beanstalkd, beanstalkc

有没有办法在不重新启动 beanstalkd 的情况下重新加载 beanstalkd 配置？

当我使用`sudo service beanstalkd restart`or`sudo service beanstalkd force-reload`时，它会清除所有队列。

（是的，将来我*会*以持久模式运行它）

# sql - 日期更改时自动将元组添加到表中

> ID：15944881
> 
> 赞同：0
> 
> 时间：2013-04-11T09:12:00.437
> 
> 标签：sql, visual-studio-2010, sql-server-2008

## 我想自动将元组添加到我的表中..

SlotTable(drID,date,time,status) >>>> Time ={午餐前,午餐后,晚上)

每位医生每天有3个预约时间..{午餐前午餐后和晚上}

对于我的医生表（DRID，drname）中的每个医生，slotTable 中应该有插槽

所以我在插槽表中的元组我希望它是这样的 -

```
drID   date     time            status
1      18april  before lunch    free
1      18april  after lunch     free
1      18april  evening         free
1      19april  before lunch    free
1      19april  after lunch     free
1      19april  evening         free 
```

等到 5 月 18 日..{所以当日期更改为 4 月 12 日时，我想为 5 月 19 日添加元组，一个接一个..}

```
2      18april  before lunch    free
2      18april  after lunch     free
2      18april  evening         free
2      19april  before lunch    free
2      19april  after lunch     free 
```

2 4 月 19 日晚上免费等到 drID - 10

实际上这不是我的项目的模式..我只需要这些背后的概念.. **当日期更改时自动将元组添加到我的表中**......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:53:19.393

编写一个执行插入的存储过程并将其作为计划作业运行。确保它查询其他表，这样您就不必在医生休假之类的事情时重新运行它。

# javascript - Node.js 和 Forever / Forever-Montior

> ID：15944892
> 
> 赞同：2
> 
> 时间：2013-04-11T09:12:27.000
> 
> 标签：javascript, node.js, http, forever

我目前正在使用永久监视器来生成一个基本的 HTTP 节点服务器，尽管当我执行执行永久监视器脚本的 JavaScript 时，它不会发送到后台，当我退出 TTY 会话时，HTTP 服务器会停止。

我用来生成服务器的代码如下。

我真正要问的问题是，我是否应该使用 Forevers CLI 来生成以编程方式生成后续服务器的脚本？

```
var forever = require('forever-monitor');

  var child = new (forever.Monitor)('streams.js', {
    max: 3,
    silent: true,
    options: []
  });

  child.on('exit', function () {
    console.log('streams.js has exited after 3 restarts');
  });

  child.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T00:26:13.720

您可以通过运行永远启动该脚本

```
forever start [your-script.js] 
```

或者如果您不想安装 Forever 的 CLI，您可以运行

```
nohup node [your-script.js] > nohup.log & 
```

# java - 否定Java中的正则表达式

> ID：15944894
> 
> 赞同：0
> 
> 时间：2013-04-11T09:12:29.627
> 
> 标签：java, regex

我需要一些帮助来为每个字符（除了前 10 个字符）找到匹配文本字符串的正则表达式。例如，我使用了正则表达式：

.{10} 匹配文本的前 10 个字符

P53236TT0834691

**P53236TT08** 34691 --> 匹配

但我需要否定结果作为匹配（从 char 11 到 x ）有人可以帮助我正确表达吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:14:25.977

使用后视：

```
(?<=^.{10}).* 
```

这将确保在匹配开始之前有 10 个字符，然后将匹配任何内容，直到字符串结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:15:21.597

In this specific case, you can use:

```
String pattern = ".{10}(.*)"; 
```

The first capturing group will capture all characters in your search string past the 10th. You can trivially extend this to skip any number of characters.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T09:16:05.610

You could use [Groups](http://www.regular-expressions.info/brackets.html) to match and extract what you need, so the regex would be something like so: `^.{10}(.*)$`. This will throw any text coming after the 10th character in a group which you can then access later, as illustrated in [this](https://stackoverflow.com/questions/6865377/java-regex-capture-group) previous SO question.

# android - 如何在活动之间传递事件数据？

> ID：15944900
> 
> 赞同：0
> 
> 时间：2013-04-11T09:12:38.483
> 
> 标签：android, android-intent, android-activity

我想将活动 B 中的事件数据传递给活动 A。

活动 A 如下所示：

```
public class ActivityDemo extends Activity {

private Intent mIntent;

private Context mContext;

private TextView mText;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.demo_activity);

    mContext = getApplicationContext();

    Button button = (Button)findViewById(R.id.qbutton);

    if (button != null) {
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                mIntent = new Intent(mContext, DualActivity.class);
                if (mIntent != null) {
                    startActivity(mIntent);
                }
            }
        });
    }
    mText = (TextView)findViewById(R.id.qText);
}
...
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        mText.setText(data.getStringExtra("TextOut"));
    }
} 
```

活动 B 是这样的：

```
public class DualActivity extends Activity implements QFragment.OnDataPassToActivity {

private Context mContext;

private Intent mIntent;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mContext = getApplicationContext();

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(SUIRes.layout(getApplicationContext(), "dual_default_activity"));

    mIntent = getIntent();
}

public void onDataPassToActivity(String string) {
    if(mIntent != null) {
        mIntent.putExtra("TextOut", string);
    }
    //Toast.makeText(getApplicationContext(), string, Toast.LENGTH_SHORT).show();
}
} 
```

Activity B 最初是由 Activity A 调用的，而 onDataPassToActivity() 是一个回调函数，被另一个类调用。我想在调用 onDataPassToActivity() 函数时将字符串数据发送到 Activity A。我检查了评论的 Toast 在调用回调时工作正常，但无法将意图发送到 Activity A。

这个问题还有其他解决方案吗？

# c# - 系统测试与验收测试 - 测试用例的差异

> ID：15944902
> 
> 赞同：11
> 
> 时间：2013-04-11T09:12:51.490
> 
> 标签：c#, java, testing, acceptance-testing, system-testing

我对系统测试和验收测试之间的真正区别有点困惑。当我搜索这个主题时，答案不同，我看不出测试用例有什么不同。

**我发现的事实：**

**系统测试**是在整个系统上进行的，由供应商完成。系统测试是端到端测试，您可以根据需求规范（功能性和非功能性）测试系统中的完整流程（从登录到注销）。

**验收测试**由客户完成，以验证它是否满足客户的需求。这也是完整的流程，并且基于需求规范。然而，构建的系统是根据需求规范设计的，并且外观/可用性通常在开发周期的早期阶段已经被接受。**如果系统涵盖了需求规范，客户应该不可能说“这不是我们想要的，重做这个和那个”，除非合同当然允许这样做并且客户按小时付费。**

所以，我的问题基本上是，这两个测试阶段的测试用例会有什么不同？它们都是端到端测试，重点是它是一个功能系统，它满足规范，这在某种程度上也是业务需求（因为这是他们订购的）。似乎系统测试中的测试用例可以在验收测试中重用，因为它们都涵盖了完整的流程？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T09:39:56.563

简短的回答是这样的：

**系统测试**由开发人员和/或 QA 执行，以确保系统执行其设计目的。这可以通过使用例如 Selenium（用于 Web 应用程序）之类的东西来自动完成。这样做的目的是保证质量，许多组织对此并不在意。

**验收测试**由客户和/或经理执行，以确保系统按照他们认为的方式运行。它通常被认为是开发人员修复软件的合同义务的结束。

不同之处在于，系统测试通常会测试客户并不真正关心的事情，例如“数据库连接是否以正确的顺序提交”。验收测试通常关注诸如“主观用户体验如何”之类的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T09:18:19.120

客户的验收测试不应该有正式的测试用例。这完全是关于客户按照他们的计划使用系统，并查看他们对系统工作方式的理解与实际工作的匹配度。测试用例限制了验收测试，因为通常从中提出的事情是“X 很棒，但你也可以添加 Y”和“我们说字段 Z 应该是一个整数，但实际上我们可能也需要在其中放入文本”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T13:05:32.463

两种类型的测试都是针对整个系统/应用程序执行的。许多测试很可能会重叠。

系统测试通常由独立的 QA 团队在类似生产的环境中执行。这可能是第一次将所有组件一起测试。

验收测试通常在相同环境或类似（也类似生产）环境中运行，但团队的组成通常由系统实际用户的子集组成。一种信念是，用户将识别场景、缺陷并观察常规测试人员会忽略的行为。此外，这可以在用户部署到生产环境之前为他们提供一定程度的舒适感。

如果您使用 V 模型，系统测试与系统级设计一致，验收测试与业务需求一致。

# relational-database - 这个关系代数语句会返回我的期望吗

> ID：15944907
> 
> 赞同：2
> 
> 时间：2013-04-11T09:12:58.710
> 
> 标签：relational-database, relational-algebra

目前在数据库课上学习关系代数，并与另一个学生就这个陈述进行辩论

```
/Project pizza (/Select age < 24 (Person ⋈ Eats)) 
```

这个声明会归还 24 岁以下的人吃的所有比萨饼吗？

这里的模式 -

```
Person (name, age, gender)  
Frequents (name, pizzeria)  
Eats (name, pizza)      
Serves (pizzeria, pizza, price) 
```

我的同事认为，因为我们正在投影披萨，而这个人的模式不包括披萨，所以它不会起作用。但是我相信，因为我们加入了 Person 和 Eats，因此我们创建了一个新的关系，我们可以通过它来投射比萨饼，并且可以按年龄选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T08:03:31.433

要获得正确答案，只需评估表达式：

人/加入吃

将产生一张桌子，每个吃披萨的人都在场。它的架构现在是：

（姓名、年龄、性别、披萨）

现在你选择。选择不影响架构，因此其结果的架构是相同的。

现在你投影披萨。架构很简单（披萨）。

所以你现在已经预测了 24 岁以下的人吃的比萨饼的名称。

所以，是的，你是对的。JOIN 创建一个新表。

--dmg

# ruby-on-rails - Rails：在 URL 中隐藏参数

> ID：15944909
> 
> 赞同：0
> 
> 时间：2013-04-11T09:13:05.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

为了回复从用户 A 收到的消息，我`id`通过 link_to 标签传入用户 A：

```
<%= link_to "Reply", new_message_path(:id => @user.id), class: "button" %> 
```

然后我可以确保收件人是@user。但问题是，当新视图使用发送消息表单打开时，URL 也有用户 A 的 id。我怎么能隐藏它？因为有人可以轻松更改参数，然后可以将消息发送给另一个用户而不是用户 A。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:19:53.813

如果您需要 id，则需要以某种方式发送参数。你不能也可能不想隐藏它。

如果有人更改 url 以将消息发送给另一个用户，他会心甘情愿地这样做。

如果您想确保用户只能向某些用户发送消息，您应该通过设置权限来做到这一点。

隐藏参数不会为您带来任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:21:53.927

你不能。

我的意思是你可以隐藏它并使用 POST 方法和一个隐藏字段作为 id，但风险是一样的：任何人都可以更改 id。

您需要问自己一个问题“如何保护我的消息系统，以便用户无法向其他用户发送消息”。我建议在您的消息中创建一个令牌字段（如长随机字符串）并使用此令牌来验证消息是否发送给正确的用户。它需要一些编码，但是您的应用程序需要安全性吗？您无法避免它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:19:54.157

使用这种语法你还有这个问题吗？

```
<%= link_to "Reply", new_message_path(@user), class: "button" %> 
```

您的控制器操作“创建”中有什么代码？

# vb.net - .NET 线程不安全代码

> ID：15944917
> 
> 赞同：0
> 
> 时间：2013-04-11T09:13:26.003
> 
> 标签：vb.net, com, vb6, thread-safety

我了解 COM 中多线程单元和单线程单元之间的区别。

请看下面的代码：

```
'VB.NET
Imports Project1
Imports System.Threading

Public Class Form1

    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim t1 As New Thread(AddressOf PersonTest.Test2)
        Dim t2 As New Thread(AddressOf PersonTest.Test2)
        Dim t3 As New Thread(AddressOf PersonTest.Test2)
        t1.Name = "Test1"
        t2.Name = "Test2"
        t3.Name = "Test3"
        t1.Start()
        t2.Start()
        t3.Start()
    End Sub

End Class

Public Class PersonTest
    Public Shared Sub Test2()
        Try
            Dim c1 As Class1
            c1 = New Class1
            For test3 As Integer = 0 To 10000
                For test As Integer = 0 To 10000
                    Dim test2 As Short = c1.Add(CShort(test))
                    If test2 <> test + 1 Then
                        MsgBox("Problem here")
                    End If
                Next
            Next
            MsgBox("finished")
        Catch ex As Exception

        End Try
    End Sub
End Class

Public Class Person
    Public id As Integer
End Class

'VB6 - Project1.vbp,class1
Public Test2 As Integer

Public Function Add(ByVal TestParameter As Integer) As Integer
Test2 = TestParameter + 1
Add = Test2
End Function 
```

根据我所阅读的内容，我希望出现“MsgBox（“这里的问题”）'，因为多个线程可能会不同步地更改 Person.ID 的值，但是我已经多次测试过这个程序，它从来没有发生了。我了解线程“没有任何保证”。上面的代码会在理论上引起问题吗？如果答案是否定的，那么如何修改代码以引起问题？我正在尝试学习如何编写线程安全代码，为了做到这一点，我必须首先了解代码如何成为线程不安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:13:11.367

您的大多数问题似乎是多个线程没有机会更新一个值。

在每个线程中，您正在创建一个 的新实例`Class1`，该实例具有自己的 实例`Test2`，因此您的每个线程都是对其进行操作的唯一线程。

将您的代码更改为此将强制它出现您想要的问题，尽管我不确定这是否回答了您的问题......

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim pt = New PersonTest

    Dim t1 As New Thread(AddressOf pt.Test2)
    Dim t2 As New Thread(AddressOf pt.Test2)
    Dim t3 As New Thread(AddressOf pt.Test2)
    t1.Name = "Test1"
    t2.Name = "Test2"
    t3.Name = "Test3"
    t1.Start()
    t2.Start()
    t3.Start()

End Sub

Public Class PersonTest

    Private _class As New Class1

    Public Sub Test2()
        Try

            For test3 As Integer = 0 To 10000
                For test As Integer = 0 To 10000

                    Dim test2 = _class.Add(test)
                    If test2 <> test + 1 Then
                        MsgBox("Problem here")
                    End If
                Next
            Next
            MsgBox("Finished")
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub
End Class

Public Class Person
    Public id As Integer
End Class

Public Class Class1

    'VB6 - Project1.vbp,class1
    Public Test2 As Integer

    Public Function Add(ByVal TestParameter As Integer) As Integer
        Test2 = TestParameter + 1
        Add = Test2
    End Function

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:33:24.330

VB6 生成在注册表中标记为单元线程的 COM 组件。“非线程安全”的一个昂贵的词。您创建的线程在 MTA 中，因为您没有调用 Thread.SetApartmentState()。

首先，您实际上并没有测试线程不安全的代码，每个线程都有自己的对象，因为您将其分配为方法中的局部变量。局部变量存储在栈上，每个线程都有自己的栈。只有当多个线程可以读取和写入共享变量时，线程安全才会受到影响。您必须在 Form_Load() 方法中创建对象并将引用存储在表单类的成员中才能获得共享。

COM 并不知道您实际上没有线程问题。它将自动启动一个*新线程*，即 STA 为 COM 对象提供一个安全的家。您可以在 Debug + Windows + Threads 调试器窗口中看到这些线程。

它会自动将工作线程对 Add() 函数的调用编组到该 STA 线程。按照公寓规则的要求。这很慢，您的代码应该需要一段时间。就像一个实验一样，在启动之前为每个线程调用 SetApartmentState 以将它们切换到 STA。现在不再需要辅助线程并且不需要编组，您会看到代码完成得*更快*。

使用 Class1 的共享实例将是一个更好的测试。但是更新 Test2 变量仍然是线程安全的，因为它位于单元线程对象中。然而，它获得的实际值是随机的，无论线程上次更新它。

# jenkins - 有时 Jenkins 无法从 svn 签出代码

> ID：15944920
> 
> 赞同：0
> 
> 时间：2013-04-11T09:13:34.250
> 
> 标签：jenkins, jenkins-plugins

当我使用 Jenkins 进行构建时，有时结帐代码进程被阻止，等待并且不显示错误日志，您必须中止它并再次触发构建，然后它可能就可以了。有没有人有这种问题？我确定 svn 连接没问题，那一刻没有人使用 svn。

# r - 使用子集过滤数据框会提供错误的条目

> ID：15944921
> 
> 赞同：0
> 
> 时间：2013-04-11T09:13:35.170
> 
> 标签：r, filter, subset

我在 R 中使用子集有一个简单的问题。这可能很明显，但我在这里工作了最后两个小时却没有找到解决方案。

我的代码如下：

```
##I set a dataframe with 3 rows. the first row contains a unique ID (index), the second    and third contain "dates"
datensatz_Start_End <- read.csv ("Daten/Daten_RequestTable(Test4)_Start_End.csv", header = TRUE, sep = ";", dec= ",")

index <- (datensatz_Start_End[,1])
BDATE <- as.Date(datensatz_Start_End[,2], format="%d.%m.%Y")
TIME <- as.Date(datensatz_Start_End[,3], format="%d.%m.%Y")

dataset_Start_End.frame <- data.frame(index,BDATE,TIME) 
```

我的目标是获取所有条目，其中 TIME 小于特定值。

解决方法如下：

```
subset(datensatz_Start_End.frame,datensatz_Start_End.frame$"TIME" < "2013-01-01")) 
```

这应该（至少在我看来）有效。

问题是，交付的结果低于预期。例如，对于我的数据集，R 中的函数提供了大约 1000 个条目，而 Excel（通过简单的过滤器请求）提供了近 2000 个。

有什么建议么？提前感谢！

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:37:02.227

应该是：subset(datansatz_Start_End.frame, TIME < as.Date("2013-01-01"))

# php - htaccess 从 url 中删除匹配的单词并重定向 301

> ID：15944923
> 
> 赞同：1
> 
> 时间：2013-04-11T09:13:39.843
> 
> 标签：php, .htaccess, joomla

我有网站，它有这样的网址

```
www.familiehunden.no/hundekurs/valpekurs.html 
```

我对网站做了一些更新，现在是这样的网址

```
www.familiehunden.no/valpekurs.html 
```

hundekurs 是一个类别，我有这种类别，我需要将旧网址重定向到新网址，而不会像现在一样出现 404 错误。谁能帮助我，我试过用这个但没有运气

```
www.familiehunden.no/hundekurs/* --> www.familiehunden.no/ ? 
```

这是一个 joomla 网站

非常感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:33:05.380

尝试这个 ：

```
RewriteEngine on
RewriteRule ^hundekurs/(.*)$ /$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:26:49.510

```
RewriteCond %{REQUEST_URI} !^/(folder1|folder2)/.*$
RewriteRule .*/(.*)\.html $1\.html [R=301] 
```

可以为您删除第一行。但我猜不是每个目录都应该被重定向。

在这种情况下，用竖线 (|) 分隔的列表填写不应重定向的目录。

如果应该重定向每个文件夹，只需删除第一行。

# java - Java 程序不会终止

> ID：15944930
> 
> 赞同：3
> 
> 时间：2013-04-11T09:14:09.933
> 
> 标签：java, concurrency

我正在尝试使用加入线程（JAVA）来创建死锁。根据我的理解，下面的程序应该终止。有人可以解释为什么下面的程序没有终止吗？

```
public class DeadLockUsingJoins2 {

    public static void main(String[] args) {

        AThread a = new AThread(null, "A");
        a.start();
        AThread b = new AThread(a, "B");
        b.start();
        a.t = b;
    }
}

class AThread extends Thread{

    public Thread t;

    public AThread(Thread thread, String name){
        super(name);
        this.t = thread;
    }

    @Override
    public void run(){
        try {
            if(t != null)
                t.join();
            else
            {
                Thread.sleep(5000);
            }
          //  if(t != null)
          //      t.join();
        } catch (InterruptedException e) {           
            e.printStackTrace();
            System.out.println("Somebody interruped thread - " + this.getName());
        }
        System.out.println("Winding Up thread - " + this.getName());
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:25:23.160

我看到没有终止的唯一原因是你的主线程到达了行

```
a.t = b; 
```

在线程“a”到达行之前

```
if(t != null)
    t.join(); 
```

如果是这样，线程等待对方终止。

为了确保你得到一个死锁——你的类名暗示了这一点——你应该重新排序你的 main 方法：

```
public static void main(String[] args) {
    AThread a = new AThread(null, "A");
    AThread b = new AThread(a, "B");
    a.t = b;
    a.start();
    b.start();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:26:32.543

在 at = b 之前添加一个暂停；

```
 b.start();
    Thread.sleep(100);
    a.t = b; 
```

它会起作用的。但要可靠，它需要同步，例如这样

```
public class DeadLockUsingJoins2 {
    public static boolean go;

    public synchronized static void main(String[] args)
            throws InterruptedException {
        AThread a = new AThread(null, "A");
        AThread b = new AThread(a, "B");
        a.start();
        while (!go) {
            DeadLockUsingJoins2.class.wait();
        }
        a.t = b;
        b.start();
        DeadLockUsingJoins2.class.notifyAll();
    }
}

class AThread extends Thread {
    public Thread t;

    public AThread(Thread thread, String name) {
        super(name);
        this.t = thread;
    }

    @Override
    public void run() {
        try {
            if (t != null)
                t.join();
            else {
                synchronized (DeadLockUsingJoins2.class) {
                    DeadLockUsingJoins2.go = true;
                    DeadLockUsingJoins2.class.notifyAll();
                }
                Thread.sleep(5000);
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("Winding Up thread - " + this.getName());
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T09:23:04.493

如果在实际调用任何创建的线程`a.t = b;`之前执行主线程，它将死锁。`run()`然后线程在`join()`调用上死锁。

编辑：为避免这种情况，您需要在主线程和您正在创建的线程之间使用某种同步。例如，发出使用开始的信号`run()`并在主线程中`Object.notify()`等待使用。`Object.wait()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T09:23:19.213

大多数时候它会终止。在 make 之后线程 B 开始运行（但未通过`if(t != null)`检查）时出现问题`a.t = b`。

在这种情况下，由于内部原因，两个线程都在等待另一个线程完成`join`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T09:23:16.313

所以你已经成功地写了一个死锁，因为你的每个线程都在等待另一个。

因为线程运行方法永远不会完成。

# raspberry-pi - 树莓派 API 模式问题

> ID：15944934
> 
> 赞同：0
> 
> 时间：2013-04-11T09:14:17.853
> 
> 标签：raspberry-pi, xbee

我很难让我的 XBEE 与我的 Raspberry pi (RP) 一起工作。我有一个 USB 分线板上的一个连接到我的计算机，另一个 XBEE 连接到 RP。RP 上的一个是 API 协调器，计算机上的一个是 AT 路由器。当我在 RP 上运行这个程序时（它应该改变路由器 XBEE 上的一个 IO 引脚）

```
#!/usr/bin/python
import serial
print("TEST")
ser=serial.Serial('/dev/ttyAMA0', baudrate=9600)
print(ser)
ser.write('\x7E')
ser.write('\x00')
ser.write('\x10')
ser.write('\x17')
ser.write('\x00')
ser.write('\x00')
ser.write('\x00')
ser.write('\x00')
ser.write('\x00')
ser.write('\x00')
ser.write('\xFF')
ser.write('\xFF')
ser.write('\xFF')
ser.write('\xFE')
ser.write('\x02')
ser.write('\x44')
ser.write('\x01')
ser.write('\x05')
sum=(0x17+0xFF+0xFF+0xFF+0xFE+0x02+0x44+0x01+0x05)
check=(0xFF - ( sum & 0xFF ))
ser.write(chr(check))
ser.close()
print("DONE") 
```

但是，路由器上什么也没做。我相信 XBEE 已连接，因为当我将路由器插入计算机时，我在 RP 的串行端口上收到一条消息，通知它有东西加入。我没有想法，我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:37:50.397

我似乎无法让它与 Python 一起工作。然而，这是一个非常棒的 AP​​I，我强烈推荐。它确实使用Java。 [https://code.google.com/p/xbee-api/](https://code.google.com/p/xbee-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:54:51.643

对于 Python，您可能想尝试[python-xbee](http://code.google.com/p/python-xbee/)。

Digi 发布了一个可在 POSIX 平台上运行的[可移植 ANSI C 库](https://github.com/digidotcom/xbee_ansic_library)，其中应该包括 Raspberry Pi 的嵌入式 Linux。

# asp.net-mvc - Html.PasswordFor() 不显眼的字段验证

> ID：15944940
> 
> 赞同：1
> 
> 时间：2013-04-11T09:14:43.623
> 
> 标签：asp.net-mvc, passwords, unobtrusive-validation, model-validation

我一直试图弄清楚这一点，但没有运气。我有一个具有两个属性的模型：`Password`和`ConfirmPassword`.

如果我在视图中将它们显示为 TextBoxes ( `Html.TextBoxFor(...)`)，则验证工作正常。但是，如果我将这些显示为密码字段 ( `Html.PasswordFor(...)`)，那么在提交表单之前验证将不起作用。

下面是我的视图和模型的代码。请注意，该视图只是一个测试视图，我没有在其上放置提交按钮。模型：

```
public class TestViewModel
{
    [Required(ErrorMessage = "Password is required")]
    [StringLength(40, ErrorMessageResourceType = typeof(Resources.Shared_Editor_SecurityDetails), ErrorMessageResourceName = "PasswordLength")]
    public string Password { get; set; }

    [Required(ErrorMessage = "Confirm is required")]
    [Compare("Password", ErrorMessage = "Must be the same as Password")]
    public string ConfirmPassword { get; set; }
} 
```

看法：

```
@using (Html.BeginForm())
{
<div>
    @Html.LabelFor(m => m.Password)
    @Html.PasswordFor(m => m.Password)
    @Html.ValidationMessageFor(m => m.Password)
</div>

<div>
    @Html.LabelFor(m => m.ConfirmPassword)
    @Html.PasswordFor(m => m.ConfirmPassword)
    @Html.ValidationMessageFor(m => m.ConfirmPassword)
</div>
} 
```

如果有人能够提供帮助，那将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:25:08.150

Although we didn't get to the root cause of this issue, we have come up with a workaround.

We set a function to be triggered on `blur()` for each of the password fields using jquery and the field id's. In this function we perform a `$(this).valid()` or `$('#idOfField').valid()`.

Equally you could perform this in the `keyUp()` function too.

This is forcing the validation but if anybody can come up with an actual reason as to why we may have encountered this issue I would be very intrigued to hear it.

# zend-framework2 - 如何根据另一个元素的值禁用/删除元素的验证器？

> ID：15944948
> 
> 赞同：0
> 
> 时间：2013-04-11T09:15:03.860
> 
> 标签：zend-framework2, zend-form

我有一个如下所示的字段集：

```
namespace Store\Form;

use Zend\Form\Fieldset;    
use Zend\InputFilter\InputFilterProviderInterface;

class ProductFieldset extends Fieldset implements InputFilterProviderInterface
{
    public function init()
    {
        $this->setName('product');

        $this->add(array(
            'name' => 'isSale',
            'type' => 'Checkbox',
            'options' => array(
                'label' => 'Is the product for sale?',
            ),
        ));

        $this->add(array(
            'name' => 'salePrice',
            'options' => array(
                'label' => 'Sale price',
            ),
        ));
    }

    public function getInputFilterSpecification()
    {
        return array(
            'salePrice' => array(
                'filters' => array(
                    array('name' => 'StringTrim'),
                ),
                'validators' => array(
                    array(
                        'name' =>'NotEmpty',
                        'break_chain_on_failure' => true,
                        'options' => array(
                            'messages' => array(
                                'isEmpty' => 'Enter the sale price.',
                            ),
                        ),
                    ),
                    array(
                        'name' => 'Float',
                        'options' => array(
                            'locale'   => 'pt_BR',
                            'messages' => array(
                                'notFloat' => 'Enter a valid price.',
                            ),
                        ),
                    ),
                ),
            ),
        );
    }
} 
```

我需要它以这样一种方式工作，即在`isSale`检查时`salePrice`需要，但如果`isSale`未检查`salePrice`则不需要。问题是我不知道如何在`isValid()`调用之前删除验证器。

我可以反过来做：删除 inputfilter 规范中的验证器，如果`isSale`选中则添加它。但我也不知道该怎么做。

这是我的表单类的样子：

```
use Zend\Form\Form;

class CreateProduct extends Form
{
    public function init()
    {
        $this->setName('createProduct');

        $this->add(array(
            'type' => 'Store\Form\ProductFieldset',
            'options' => array(
                'use_as_base_fieldset' => true,
            ),
        ));

        $this->add(array(
            'name' => 'create',
            'type' => 'Submit',
            'attributes' => array(
                'class' => 'btn btn-success',
                'value' => 'Create',
            ),
        ));
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:06:34.663

我通过覆盖`isValid()`表单中的方法解决了这个问题：

```
class CreateProduct extends Form
{
    public function init()
    {
        /* ... */
    }

    public function isValid()
    {
        if (!$this->get('product')->get('isSale')->isChecked()) {
            $this->getInputFilter()->get('product')->remove('salePrice');
            $this->get('product')->get('salePrice')->setValue(null);
        }
        return parent::isValid();
    }
} 
```

虽然感觉很hacky！

# javascript - default values for nested javascript hashes

> ID：15944956
> 
> 赞同：3
> 
> 时间：2013-04-11T09:15:21.150
> 
> 标签：javascript, jquery, hash, prototypejs, mootools

In JavaScript I want to do the following:

`var pi = {}; pi[0]['*']['*'] = 1;`

of course this throws a "Cannot read property '*' of undefined" error. Clearly I can define p[0] = {}, but that's kind of a pain as I will be sticking lots of different values in the different attributes, e.g.

`pi[2]['O']['I-GENE'] = 1;`

etc. The first key into the hash is just an integer, so I guess I could use an array at the top level instead of a hash, and then default initialize like in this post:

[default array values](https://stackoverflow.com/questions/2044760/default-array-values)

but that doesn't handle my need for default initialization of the other hashes.

It does seem like what I am trying to do is running up against the ECMAScript spec which indicates that undefined attributes of an object (which is a hash in JavaScript) should return undefined, as mentioned here:

[Set default value of javascript object attributes](https://stackoverflow.com/questions/6600868/set-default-value-of-javascript-object-attributes)

which interestingly includes a dangerous work around.

In other places where I'm trying use nested hashes like this I am finding myself writing long bits of ugly code like this:

```
function incrementThreeGramCount(three_grams,category_minus_two,category_minus_one,category){
    if(three_grams[category_minus_two] === undefined){
      three_grams[category_minus_two] = {};
    }
    if(three_grams[category_minus_two][category_minus_one] === undefined){
      three_grams[category_minus_two][category_minus_one] = {};
    }
    if(three_grams[category_minus_two][category_minus_one][category] === undefined){
      three_grams[category_minus_two][category_minus_one][category] = 0;
    }
    three_grams[category_minus_two][category_minus_one][category]++;
} 
```

which I'd really like to avoid here, or at least find some good way of adding to the functionality of the Hash through the prototype method. However it seems like since the Hash and Object in JavaScript are just the same thing, we can't really play around with default hash behaviour in JavaScript without impacting a lot of other things ...

Maybe I should be writing my own Hash class ... or using Prototypes:

[http://prototypejs.org/doc/latest/language/Hash/](http://prototypejs.org/doc/latest/language/Hash/)

or someone elses:

[http://www.daveperrett.com/articles/2007/07/25/javascript-hash-class/](http://www.daveperrett.com/articles/2007/07/25/javascript-hash-class/)

or mootools:

[http://mootools.net/docs/more/Types/Hash](http://mootools.net/docs/more/Types/Hash)

argh, so many choices - wish I knew the best practice here ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:30:46.310

这可以使用[ES6 代理](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Proxy)来完成。您将使用`get`处理程序在对象上定义代理。当`get`对具有`undefined`值的键或对象没有自己的属性的键执行 a 时，您将其设置为使用相同`get`处理程序的新代理并返回该新代理。

此外，这无需括号语法即可工作：

```
var obj = ...;
obj.a.b.c = 3; 
```

不幸的是，作为 ES6 功能，它们的支持仅限于 Firefox，并且可以在 Chrome 中使用实验标志启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:25:35.533

我会做这样的事情：

```
Object.prototype.get = function(v){ 
    if(!this[v]){
        this[v] = {} 
    } 

    return this[v];  
} 
```

然后，改为`object["x"]["y"].z = 666`使用`object.get("x").get("y").z = 666`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:36:49.323

您可以编写一个简单的助手来执行此操作。例如

```
function setWDef() {
    var args = [].slice.call(arguments);
    var obj = args.shift();
    var _obj = obj;
    var val = args.pop();
    if (typeof obj !== "object") throw new TypeError("Expected first argument to be of type object");
    for (var i = 0, j = args.length - 1; i < j; i++) {
        var curr = args[i];
        if (!_obj[curr]) _obj[curr] = {};
        _obj = _obj[curr];
    }
    _obj[args.pop()] = val;
    return obj;
} 
```

现在只需使用函数设置值

```
var pi ={}
console.log (setWDef(pi,"0","*","a*",1)) //{"0": {"*": {"a*": 1}}} 
```

[这是一个关于JSBin](http://jsbin.com/evitaw/1/edit)的演示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-27T18:07:12.577

使用[草拟的](https://tc39.es/proposal-logical-assignment/#sec-assignment-operators) [逻辑 OR 赋值运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR_assignment) `||=`，您可以执行以下操作：

```
 const pi = [];
 ((((pi[0]||={})['*'])||={})['*'] = 1);
 console.log(JSON.stringify({pi}));
```

输出：

```
{"pi":[{"*":{"*":1}}]} 
```

您还可以将某些级别初始化为数组或定义默认属性值：

```
const pi = [];
((((((pi[0]||={})['*'])||=[])[3])||={'#':2})['*'] = 1);
console.log(JSON.stringify({pi}));
```

输出：

```
{"pi":[{"*":[null,null,null,{"#":2,"*":1}]}]} 
```

# knockout.js - 淘汰赛：如何隐藏已对其应用“with”淘汰赛绑定

> ID：15944960
> 
> 赞同：0
> 
> 时间：2013-04-11T09:15:41.383
> 
> 标签：knockout.js

我有一张桌子。我已经`with binding`在`<tr>`元素上应用了 a 并且还想对其应用`visible`属性。

html:

```
<table>
    <tr data-bind="with: names">
        <td>
            First Name:
            <span data-bind="text: first" />       
        </td>
    </tr> 
</table> 
```

js：

```
var ViewModel = function() {
     this.names = {
            first:  "John",
            isVisible: false
     };
   };

   ko.applyBindings(new ViewModel()); 
```

我想写一些类似`<tr data-bind="with: names, visible: isVisible">`但淘汰赛不允许这种语法的东西。

隐藏`<td>`元素 like`<td data-bind="visible: isVisible">`不是一种选择。

jsFiddle：http: [//jsfiddle.net/2Qnv7/43/](http://jsfiddle.net/2Qnv7/43/)

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:19:26.967

由于您将`names`仅在 tr 内部拥有上下文，因此您可以`name.IsVisible`在 tr's中使用`data-bind`：

```
<table>
    <tr data-bind="with: names, visible: names.isVisible">
        <td>
            First Name:
            <span data-bind="text: first" />       
        </td>
    </tr> 
</table> 
```

小提琴：http: [//jsfiddle.net/2Qnv7/44/](http://jsfiddle.net/2Qnv7/44/)

# objective-c - 在 Objective C 中创建自定义类的自定义集合

> ID：15944965
> 
> 赞同：1
> 
> 时间：2013-04-11T09:15:52.790
> 
> 标签：objective-c, collections, nsmutablearray, nsmutabledictionary

在我正在构建的 iOS 应用程序中，我目前正在管理一个对象列表（任务），方法是使用一个 NSMutableArray，其中包含每个单独任务的多个 NSMutableDictionary 对象。

我现在想将我为管理这些任务而编写的逻辑封装在一个或多个自定义类中。

以下是我正在考虑的几个选项：

1.  创建一个名为 TaskManager 的新类，它在内部使用上述类并公开添加、删除、更新、重新排序等必要的方法。

2.  创建两个类——Task 和 TaskList——分别继承自 NSMutableDictionary 和 NSMutableArray

3.  创建两个类——Task 和 TaskList——它们继承自 NSObject 但在内部使用其他类来存储数据

我以前做过一些 C# 开发，但我很想得到一些建议，说明哪种方法在 Objective C 中最好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:43:36.880

我建议选项4：

*   一个在内部使用 NSMutableArray 的类 TaskList
*   使用属性但没有 NSMutableDictionary 的类 Task

或者你有什么理由想要使用字典？如果您使用常规课程，您将获得类型安全（以及更好的性能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:51:07.220

如果我愿意在你的地方，我将创建一个自定义类，它封装了如下所示的类。

**任务管理器.h**

```
#import <Foundation/Foundation.h>

@interface TaskManager : NSObject

@property(nonatomic,retain)NSMutableArray *taskList;

-(void)addTaskList:(NSMutableDictionary *)object;

@end

@interface Task : NSObject

@property(nonatomic,retain)NSMutableDictionary *taskDetails;

-(void)setTaskDetailsWithKey:(NSString*)key withValue:(NSString*)value;

@end 
```

**任务管理器.m**

```
#import "TaskManager.h"

@implementation TaskManager
@synthesize taskList;

-(id)init
{
    self = [super init];
    if (self) {
        if(!taskList)
            taskList = [[NSMutableArray alloc] init];
    }
    return self;
}

-(void)addTaskList:(NSMutableDictionary *)object
{
    [taskList addObject:object];
}

@end

@implementation Task

@synthesize taskDetails;

-(id)init
{
    self = [super init];
    if (self) {
        if(!taskDetails)
            taskDetails = [[NSMutableDictionary alloc] init];
    }
    return self;
}

-(void)setTaskDetailsWithKey:(NSString*)key withValue:(NSString*)value
{
    [taskDetails setObject:value forKey:key];
}

@end 
```

# c# - C# - 使鼠标光标不可见

> ID：15944972
> 
> 赞同：0
> 
> 时间：2013-04-11T09:16:16.700
> 
> 标签：c#, cursor, mouse, hide, keylogger

我尝试使用以下代码使鼠标光标不可见：

```
Cursor.Hide(); 
```

鼠标光标确实会从屏幕上消失，并且不会出现在使用 Expression Encoder 4 捕获的视频中。

PrintScreen 没用，因为它无论如何都不显示鼠标光标。但是，我在我的系统上安装了一个键盘记录器，并且在键盘记录器截取的屏幕截图中可以看到鼠标，即使用户在屏幕上看不到它。

这怎么可能？如何使键盘记录器也看不见鼠标光标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:20:48.580

如果您正在运行 WPF 应用程序，请在运行时尝试此操作（当您捕获屏幕时）：

```
 this.Cursor = Cursors.None; 
```

另见[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/28b71115-5a30-4811-a26a-80abfb53facb/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:26:03.307

可以对键盘记录器进行编程以截取屏幕截图，然后使用位置和光标类型自行插入光标图像。如果是这种情况，您将无法阻止这种情况的发生。

# sql - 将数据库中的街道从 STR 更新为 STREET

> ID：15944984
> 
> 赞同：0
> 
> 时间：2013-04-11T09:16:38.167
> 
> 标签：sql, sql-server

我有一个数据库，其中包含某个城市的所有街道。但名称在末尾缩写，例如：Highwaystr 而不是 Highwaystreet。

我希望所有这些街道同时更新。

我试过这个：

```
UPDATE bestrating SET STRAATNAAM = '%STREET' WHERE STRAATNAAM LIKE '%STR' 
```

但这是用“%Street”替换所有街道名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:17:51.440

采用`REPLACE`

```
UPDATE bestrating 
SET STRAATNAAM = REPLACE(STRAATNAAM, ' STR', ' STREET') 
WHERE STRAATNAAM LIKE '% STR' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/972f9/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:21:15.470

如果只是在最后更改文本，那么更简单的是：

```
UPDATE bestrating SET STRAATNAAM = STRAATNAAM +'EET' WHERE STRAATNAAM LIKE '%STR' 
```

使用的通配符语法唯一适用的地方`LIKE`是`LIKE`and `PATINDEX`（可能还有一些 FTS 谓词 - 我不使用它）。`SET`它在 an 的子句中不受支持`UPDATE`，并且 SQL Server 不直接支持例如正则表达式。

* * *

上述工作假设搜索到的文本是替换文本的前缀。如果不是这样，你会做类似的事情：

```
UPDATE bestrating
SET STRAATNAAM = SUBSTRING(STRAATNAAM,1,LEN(STRAATNAAM)-LEN('STR')) +'STREET'
WHERE STRAATNAAM LIKE '%STR' 
```

即通过搜索文本的长度减少字符串的长度，然后应用整个替换字符串。

# knockout.js - KnockoutJS: wait until all throttled computed observables are evaluated

> ID：15944986
> 
> 赞同：2
> 
> 时间：2013-04-11T09:16:50.300
> 
> 标签：knockout.js, throttling

Is there any possibility to wait until all throttled computed observables in a ViewModel are evaluated.

I have a heavy ViewModel with a lot of such observables. And sometimes I need to get it's plain JS representation right after populating it from JSON, but when I try to do that some observables are not evaluated yet.

I have tried to implement a kind of async `toJS`, but it doesn't work as expected. Am I doing something wrong there or it's not possible at all?

```
toJSasync = function (vm) {
  var deferred = $.Deferred(),
      waiter = ko.computed(function () {
         return ko.toJS(vm);
      });

  deferred.resolve( waiter() );

  deferred.always(function () {
    waiter.dispose();
  });

  return deferred.promise();
} 
```

# python - Python evdev detect device unplugged

> ID：15944987
> 
> 赞同：5
> 
> 时间：2013-04-11T09:16:50.267
> 
> 标签：python, python-2.7, evdev

I'm using the great "evdev" library to listen to a USB barcode reader input and I need to detect if the device suddenly gets unplugged/unresponsive because otherwise the python script reading the loop goes to 100% cpu usage on a single thread and slowly starts to eat all available memory which leads to the entire system crashing after a bit.

The idea is to detect when the device is unplugged and kill the current script leading to supervisor trying to restart it until the device is plugged back in/becomes responsive.

The code I'm using to read the input is as follows:

```
devices = map(InputDevice, list_devices())

keys = {
    2: 1,
    3: 2,
    4: 3,
    5: 4,
    6: 5,
    7: 6,
    8: 7,
    9: 8,
    10: 9,
    11: 0,
}
dev = None
for d in devices:
    if d.name == 'Symbol Technologies, Inc, 2008 Symbol Bar Code Scanner':
        print('%-20s %-32s %s' % (d.fn, d.name, d.phys))
        dev = InputDevice(d.fn)
        break

if dev is not None:
    code = []
    for event in dev.read_loop():
        if event.type == ecodes.EV_KEY:
            if event.value == 00:
                if event.code != 96:
                    try:
                        code.append(keys[event.code])
                    except:
                        code.append('-')
                else:
                    card = "".join(map(str, code))
                    print card

                    code = []
                    card = "" 
```

So how would I go about doing this the proper way?
A way I though that might work would be a second script that's run from cron every 1-5 min that checks if said device is still available, if it's now, grab process id from some file and kill the process that way but the problem with this method is that if the device is unplugged and then plugged back between the checks the "checker" script thinks everything is okay while the main script is slowly crashing - it doesn't re-activate after an "unplugging"

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-11T18:35:41.920

[python-evdev](https://github.com/gvalkov/python-evdev)作者在这里。知道自己的工作对其他人有用是一种很棒的感觉。谢谢你！

您绝对应该查看 linux 的设备管理器 - udev。每当添加或删除设备时，linux 内核都会发出事件。要在 Python 程序中侦听这些事件，您可以使用[pyudev](http://pyudev.readthedocs.org/en/latest/)，它是一个出色的、基于 ctypes 的对 libudev 的绑定（请参阅[监控](http://pyudev.readthedocs.org/en/latest/guide.html#monitoring-devices)部分）。

`evdev`这是与 with 一起使用的示例`pyudev`：

```
import functools
import pyudev

from evdev import InputDevice
from select import select

context = pyudev.Context()
monitor = pyudev.Monitor.from_netlink(context)
monitor.filter_by(subsystem='input')
monitor.start()

fds = {monitor.fileno(): monitor}
finalizers = []

while True:
    r, w, x = select(fds, [], [])

    if monitor.fileno() in r:
        r.remove(monitor.fileno())

        for udev in iter(functools.partial(monitor.poll, 0), None):
            # we're only interested in devices that have a device node
            # (e.g. /dev/input/eventX)
            if not udev.device_node:
                break

            # find the device we're interested in and add it to fds
            for name in (i['NAME'] for i in udev.ancestors if 'NAME' in i):
                # I used a virtual input device for this test - you
                # should adapt this to your needs
                if u'py-evdev-uinput' in name:
                    if udev.action == u'add':
                        print('Device added: %s' % udev)
                        fds[dev.fd] = InputDevice(udev.device_node)
                        break
                    if udev.action == u'remove':
                        print('Device removed: %s' % udev)
                        def helper():
                            global fds
                            fds = {monitor.fileno(): monitor}
                        finalizers.append(helper)
                        break

    for fd in r:
        dev = fds[fd]
        for event in dev.read():
            print(event)

    for i in range(len(finalizers)):
        finalizers.pop()() 
```

# java - Android NoClassDefFoundError when starting new activity thru intent

> ID：15944988
> 
> 赞同：0
> 
> 时间：2013-04-11T09:16:52.903
> 
> 标签：java, android, class

Weird issue here, doing something very trivial:

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent i = new Intent(AutoVisionActivity.this, ExampleLoad3DSFile.class);
    startActivity(i);
} 
```

In AndroidManifest.xml I have:

```
<activity android:name=".activities.ExampleLoad3DSFile"></activity> 
```

And the class itself (ExampleLoad3DSFile) is in the same package as my main activity's onCreate from above. I've tried the standard clean project, refresh, and this: [https://stackoverflow.com/a/12702315/624869](https://stackoverflow.com/a/12702315/624869) but to no avail.

What gives?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:43:10.373

[我遇到了同样的错误，但最后我找到了在我处理MIN3D](http://code.google.com/p/min3d/)项目时发生它的原因。

```
IParser parser = Parser.createParser(Parser.Type.MAX_3DS,
            getResources(), "com.min3d.sampleProject1:raw/monster_high", false); 
```

确保您在`ExampleLoad3DSFile` 类中使用与您在项目中使用的相同的包名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T09:24:07.260

如果在声明活动时在同一个包中，您应该给出完整的包名或活动的类名，如果它在同一个包中，则以点（。）为前缀。

# javascript - 从列表中删除项目

> ID：15944989
> 
> 赞同：9
> 
> 时间：2013-04-11T09:16:53.453
> 
> 标签：javascript, jquery, html

我想`li`从我的无序列表中删除所有内容，但我想让`li`最后一个`li`人知道它是如何完成的？

我现在有

```
$('.pagination ul li:not(:last)').remove(); 
```

但这会删除除最后一个以外的所有内容，因此不正确

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T09:20:21.153

与负索引一起使用[`:eq()`](http://api.jquery.com/eq-selector/)- 这将从集合的*末尾*而不是开头开始计数。

在您的情况下，您需要使用`-2`(`-1`将是最后一个`<li>`) 的索引，如下所示：

```
$('.pagination ul li:not(:eq(-2))').remove(); 
```

[这是一个快速演示](http://jsfiddle.net/mj79g/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T09:23:24.330

为了这个答案的完整性，这是另一种（可以说更具可读性）方法：

```
$('.pagination ul li:last-child').prev().siblings().remove(); 
```

你可以在这里看到它：http: [//jsfiddle.net/bBxDL/1](http://jsfiddle.net/bBxDL/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T09:21:51.667

**Javascript**

```
var $items = $('.pagination ul li');

$items.not($items.eq($items.length-2)).remove(); 
```

**HTML**

```
<div class="pagination">
    <ul>
        <li>Page 1</li>
        <li>Page 2</li>
        <li>Page 3</li>
        <li>Page 4</li>
        <li>Page 5</li>
    </ul>
</div> 
```

**工作示例** [http://jsfiddle.net/B8NPV/](http://jsfiddle.net/B8NPV/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T09:22:31.933

好吧，您可以使用它`nth-last-of-type`来获取最后一个之前的那个。附上jsfiddle [http://jsfiddle.net/zjLph/](http://jsfiddle.net/zjLph/)

**HTML**

```
<div class="pagination">
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
    </ul>
</div> 
```

**JS**

```
$('.pagination ul li').filter(':not(:nth-last-of-type(2))').remove(); 
```

# linux - 在 ARM 或 powerPC 架构中，是否使用了 PCI IO 空间？

> ID：15944990
> 
> 赞同：3
> 
> 时间：2013-04-11T09:16:54.370
> 
> 标签：linux, arm, intel, powerpc

首先对不起我糟糕的英语。

我知道，在英特尔架构中，有一些与 io 空间相关的指令（输入/输出指令），但在 ARM 或 powerPC 中，没有这样的指令，都是内存。所以我认为在 ARM 和 PPC 中，PCI IO 空间是无用的。我对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T10:52:11.150

两种架构都没有专门的 IO 指令——这是 x86 架构特有的包袱。PCI IO 区域最初是为了让 PCI 设备出现在与 ISA 总线设备相同的 IO 空间中。这是糟糕的过去，用户必须指定并行和串行端口的基地址，因为它们无法被发现。

今天，它已经彻底过时了，但设备仍然可以提供它们。同样，他们可以在 PCI 内存区域中公开他们的寄存器——这可能是设备设计者现在应该做的事情。

在 ARM 和 PPC 上，常规的加载/存储指令用于访问内存映射的 PCI 区域——包括 PCI IO 区域，因此这些 CPU 与提供它的设备没有问题。

# java - Button event not working while image is moving

> ID：15944991
> 
> 赞同：0
> 
> 时间：2013-04-11T09:16:55.017
> 
> 标签：java, image, swing

i have this code. in this code an image is moving left to right with moveImage method and moves right to left with moveimg method in the code. what i want now is to work a button event. there is a button in code, i want when i click the button it should do its job. but it's not doing.. here the code is:

```
 import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class MyImage extends JFrame implements ActionListener
{
   static int xPixel = 20;
   Image myImage, offScreenImage;
   Graphics offScreenGraphics;
   JPanel p = new JPanel();
   Button btn = new Button("bun");
   JFrame f = new JFrame();

   public MyImage()
   {
      myImage = Toolkit.getDefaultToolkit().getImage("mywineshoplogo.jpg");
      setExtendedState(JFrame.MAXIMIZED_BOTH);
      this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      setVisible(true);
      add(p);
      p.add(btn);
      moveImage();
      btn.addActionListener(this);
   }

   public void update(Graphics g)
   {
      paint(g);
   }

   public void paint(Graphics g)
   {
      int width = getWidth();
      int height = getHeight();
      if (offScreenImage == null)
      {
         offScreenImage = createImage(width, height);
         offScreenGraphics = offScreenImage.getGraphics();
      }
// clear the off screen image  
      offScreenGraphics.clearRect(0, 0, width + 1, height + 1);
// draw your image off screen  
      offScreenGraphics.drawImage(myImage, xPixel, 10, this);
// draw your image off screen  
// show the off screen image  
      g.drawImage(offScreenImage, 0, 0, this);
// show the off screen image  
   }

   void moveImage()   //left to right move
   {
      for (int i = 0; i < 530; i++)
      {

         xPixel += 1;
         repaint();
        // then sleep for a bit for your animation  
         try
         {
            Thread.sleep(40);
         } /* this will pause for 50 milliseconds */

         catch (InterruptedException e)
         {
            System.err.println("sleep exception");
         }
      }
   }

/*   void moveimg()   // right to left move
   {
      for (int i = 529; i > 0; i--)
      {
         if (i == 1)
         {
            moveImage();
         }
         xPixel -= 1;
         repaint();
// then sleep for a bit for your animation  
         try
         {
            Thread.sleep(40);
         } // this will pause for 50 milliseconds 

         catch (InterruptedException e)
         {
            System.err.println("sleep exception");
          }
      } 
   } */     

   public void actionPerformed(ActionEvent ae)
   {
      try
      {
         if (ae.getSource() == btn)
         {
            p.setBackground(Color.RED);
         }
      }
      catch (Exception e)
      {
         System.out.println("error");
      }
   }

   public static void main(String args[])
   {
      MyImage me = new MyImage();
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:35:59.230

您应该将动画移植到它们自己的线程中。这将阻止您的主线程由于其他进程而锁定。您正在调用`Thread.sleep(40);`主线程。这将始终影响您的唯一线程的吞吐量。

**一个解法**

因此，您应该创建一个新类，例如`ImageMover`. 此类可以在其构造函数中使用 Image 对象，并具有`moveImage`移动图像的方法，而不是您的解决方案`moveImg`and `moveImage`（非常令人困惑的东西）。

其次，你想要`ImageMover`扩展一个`Thread`. 这将迫使您编写一个`run`方法，如下所示：

```
public void run() {
    moveImage();
} 
```

当你想让你的图像开始移动时，你应该调用`ImageMover.start()`. **不是** `run`。

这会将方法放在不同的线程上，并应确保 GUI 的功能。

# asp.net - 创建非持久 cookie

> ID：15944992
> 
> 赞同：0
> 
> 时间：2013-04-11T09:17:00.687
> 
> 标签：asp.net, asp.net-mvc

如何在 Asp.net MVC 中创建仅对当前浏览器选项卡有效的 cookie？

当用户关闭或更改选项卡时，cookie 应该被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:24:20.320

从 rahularyansharma 链接到的 QA 中，如下所示：

```
HttpCookie cookie = new HttpCookie("myCookieName", "myCookieValue");
Response.Cookies.Add(cookie); 
```

上面的代码创建了一个没有设置过期值的cookie，所以客户端浏览器不会存储它，所以当浏览器会话结束时它会被删除，这通常是在窗口或选项卡关闭时。

这些代码都不是 MVC 特定的。

# iphone - MapView 上的指南针模式

> ID：15944997
> 
> 赞同：0
> 
> 时间：2013-04-11T09:17:16.873
> 
> 标签：iphone, ios, gps, mkmapview, compass-geolocation

我想将指南针添加到我的地图中以吸引我周围的人，比如如果我面向北方，那么我只能看到那些在北方和我旁边的人，在图像中看到我在特定位置的地图视图中黄色和红色的椭圆是我周围的其他人。

所以我想要的是，如果我面向红色椭圆的方向，那么我只能得到红色椭圆的列表而不是黄色。我没有任何想法来实现这一点。

![在此处输入图像描述](https://i.stack.imgur.com/Jj3ze.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:14:40.320

1）计算两个纬度，经度坐标（您的位置和另一个用户位置）之间的方位。（在这里简单搜索）
2）然后计算您的罗盘航向与 1 的方位之间的增量角）

然后`if abs(deltaAngle) < 60`拿那个用户。