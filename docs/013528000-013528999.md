# StackOverflow 问答 13528000-13528999

# jquery - 来自花式框内的花式框关闭后回调

> ID：13528003
> 
> 赞同：0
> 
> 时间：2012-11-23T11:18:59.917
> 
> 标签：jquery, fancybox, fancybox-2

当它关闭时，我正在尝试单击fancybox 中的链接。

那可能吗？

我似乎只能从父窗口访问 DOM 元素，而不是花式框本身。

# .htaccess - 这个 .htaccess 和 Yii urlManager 设置有什么问题？

> ID：13528009
> 
> 赞同：0
> 
> 时间：2012-11-23T11:19:18.357
> 
> 标签：.htaccess, url-rewriting, yii

我在子目录下有一个 yii 网站，例如

`http://localhost/~username/maindirectory/yiiapp/`

**我的 htaccess 文件：**

```
DirectoryIndex index.php index.html index.htm
Options +FollowSymLinks
IndexIgnore */*
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /yiiapp

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php
</IfModule> 
```

**保护/配置/main.php**

```
...
'urlManager'=>array(
    'urlFormat'=>'path',
    'showScriptName'=>false,
.... 
```

**问题：**

假设我访问：

*   第一步：`http://localhost/~username/maindirectory/yiiapp/`
*   第二步：点击主页上的任何链接（默认yii应用）让说`About Us`页面
*   第三步：**`http://localhost/~username/maindirectory/yiiapp/site/page?view=about`**
*   第四步：点击链接上的任何一个（假设是同一页）
*   网址看起来像：**`http://localhost/yiiapp/site/page?view=about`**

所以：所有链接都可以作为 : 访问 `http://localhost/yiiapp/....` ，而不是从链接中删除 index.php，而删除了 while 字符串 b/w`localhost`和基本目录。

我已经尝试过[了](http://www.yiiframework.com/forum/index.php/topic/25648-clean-urls-its-possible/)，并且需要在 localhost 上使用相同类型的 url，显然没有使用子域

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:29:25.310

部分答案：

问题是您正在重定向到同一域上的绝对 URL。
URL 可能看起来像`/yiiapp/site/page?view=about`. 然而，这导致`http://localhost/yiiapp/site/page?view=about`. 您必须预先添加与域相关的网站目录（不确定我是否正确表达）。

例如，`a href`标签中的 URL 应该看起来像`/~username/maindirectory/yiiapp/site/page?view=about`这样，因此您必须`/~username/maindirectory`从某处预先添加该部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:52:27.970

你试过：

```
'urlManager'=>array(
    ....
    'baseUrl' => '/~username/maindirectory/yiiapp',
    .... 
```

[http://www.yiiframework.com/doc/api/1.1/CUrlManager#setBaseUrl-detail](http://www.yiiframework.com/doc/api/1.1/CUrlManager#setBaseUrl-detail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:30:38.900

所以 RewriteBase `/~username/maindir/yiiapp`，在 .htaccess 中解决了这个问题，而不是 `'baseUrl' => '/~username/maindirectory/yiiapp'`config/main.php 中的东西

这是完整的 .htaccess 文件：

```
DirectoryIndex index.php index.html index.htm
Options +FollowSymLinks
IndexIgnore */*
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /~username/maindir/yiiapp

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php
</IfModule> 
```

# .net - .NET 一个事件可以有多少个侦听器？

> ID：13528010
> 
> 赞同：0
> 
> 时间：2012-11-23T11:19:18.967
> 
> 标签：.net, events

我正在编写一个模拟火车和火车站出发板的软件。火车存储他们提前/落后计划的分钟数。出发板的每个实例都订阅了不断变化的火车子集。

我们正在编写应用程序，以便能够处理数以万计的火车和数十万（可能是数百万）的出发板。

我的计划是使用 .NET 事件，而不是让火车维护对每个订阅出发板的引用列表。每次有关火车调度的某些信息发生变化时，火车类的实例都会引发一个事件。Departure Board 类的每个实例都只是简单地为它们订阅的火车添加或删除事件侦听器。

一个事件可以拥有多少个侦听器是否有限制？如果是这样，限制是什么？性能将如何下降？

谢谢，里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:27:46.510

好吧，这里有一些代码可以为委托添加一百万个处理程序，它工作正常：

```
Action<int> action = n => Console.WriteLine(n);

for (var i = 0; i <= 1000000; i++)
{
    var i2 = i;
    action += n => Console.WriteLine(n + i2);
}

action(42); 
```

但是，我会考虑使用 Microsoft 的响应式扩展而不是原始事件来处理您的事件。使用委托将很难以您正在谈论的规模执行任何类型的聚合和过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:31:00.723

> 一个事件可以拥有多少个侦听器是否有限制？

你有多少内存？;p 就您所说的数字而言，应该没问题-但坦率地说，我认为这不是一个好方法。但：

```
static void Main()
{
    EventHandler handler = null;
    for (int i = 0; i < 6000000; i++)
    {
        var obj = new Spoof();
        handler += obj.Bar;
        if ((i % 1000) == 0) Console.WriteLine(i);
    }
    Console.WriteLine("done");
    Console.ReadKey();
    handler(null, null);

}
class Spoof
{
    public void Bar(object sender, EventArgs args) { Console.WriteLine("hi"); }
} 
```

> 如果是这样，限制是什么？性能将如何下降？

基本上，近似线性。

但是，我真的不认为这种方法是理想的 - 它存在诸如仅限于单个应用程序域（使其难以在节点之间分配）等问题，并且在使用事件时**很**容易出现意外的内存场景，例如那。此外，取消订阅会变得非常昂贵，因为它需要扫描订阅者列表。

**就个人**而言，我会使用 redis pub/sub 之类的东西，或者其他一些专用的 pub/sub 系统。董事会可以订阅他们感兴趣的火车（或线路），而火车（或线路）只是广播到那些指定的频道。

# list - 从数据和键创建列表

> ID：13528012
> 
> 赞同：1
> 
> 时间：2012-11-23T11:19:27.047
> 
> 标签：list, haskell, key, list-comprehension

我有一个关于 Haskell 的问题。我想知道如何从两个列表中创建一个数据列表，一个带有数据，另一个带有一些键值。我会用一个例子来解释它：

给定两个列表：`[('a', "red"), ('b', "blue"), ('c', "green")]`和`[('a','b'), ('b', 'c'), ('c','a')]`。现在我想用第一个列表中给出的颜色更改第二个列表的值。所以函数应该返回`[("red","blue"), ("blue","green"), ("blue","red")]`。

我正在考虑列表理解，但我对 Haskell 很陌生，我不知道该怎么做。或者有没有更简单的方法来做到这一点？

这可能是一个愚蠢的问题，但如果有人能给我举个例子，我可能会更习惯 Haskell 的思考过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:15:30.883

另一种方法是使用`Map`

```
import Data.Maybe (mapMaybe)
import Data.Map (lookup
                ,fromList)
import Prelude hiding (lookup)

main :: IO ()
main = do
    let a = [('a', "red"), ('b', "blue"), ('c', "green")]
        b = [('a','b'), ('b', 'c'), ('c','a')]
        table = fromList a
    print $ mapMaybe (maybePair . (\(x,y) -> (x `lookup` table,
                                              y `lookup` table ))) b

maybePair :: (Maybe a, Maybe b) -> Maybe (a,b)
maybePair (Just x,Just y) = Just (x, y)
maybePair _ = Nothing 
```

# 编辑：

在箭头的帮助下，最后一个匿名函数可以浓缩为

```
import Control.Arrow ((***))
[…]
main :: IO ()
main = do
    let a = [('a', "red"), ('b', "blue"), ('c', "green")]
        b = [('a','b'), ('b', 'c'), ('c','a')]
        table = fromList a
        f x = x `lookup` table
    print $ mapMaybe (maybePair . (f *** f)) b
[…] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:42:13.717

```
-- second element from first (head) dropping tuples with bad key
color :: Eq a => a -> [(a, b)] -> b
color c = snd.head.dropWhile ((/=c).fst)

recolor a b = map (\(x, y) -> (color x a, color y a)) b 
```

跑步

```
Prelude> recolor [('a', "red"), ('b', "blue"), ('c', "green")] [('a','b'), ('b', 'c'), ('c','a')]
[("red","blue"),("blue","green"),("green","red")] 
```

如果您认为在第一个列表中找不到第二个列表的元素。你可以写

```
color :: Eq b => b -> [(b, a)] -> Maybe a
color c = fmap snd.listToMaybe.dropWhile ((/=c).fst) 
```

然后

```
Prelude> recolor [('a',"red"),('b',"blue"),('c',"green")] [('a','h'),('u','c'),('c','a')]
[(Just "red",Nothing),(Nothing,Just "green"),(Just "green",Just "red")] 
```

（你需要`import Data.Maybe (listToMaybe)`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T18:15:08.800

另一种不需要导入任何库但使用尾递归的解决方案：

```
keyColor = [('a', "red"), ('b', "blue"), ('c', "green")]
keys = [('a','b'), ('b', 'c'), ('c','a')]

colors [] _ = []                            -- no keys returns the empty list
colors _ [] = []                            -- no colors returns the empty list
colors xs ys = colors_helper (xs, ys, [])   -- tail recursion

colors_helper ([], _, acc) = acc
colors_helper (((k1, k2):xs), ys, acc) = 
                colors_helper (xs, ys, acc ++ [(color (k1, ys), color (k2, ys))])
  where
    -- converts value to color
    color (val, ys) = snd $ head $ filter ( \(k, v) -> k == val ) ys 
```

测试：

```
> colors keys keyColor 
> [("red","blue"),("blue","green"),("green","red")]

> colors keys []
> []

> colors [] keyColor 
> [] 
```

# python - pexpect.run() 在结束 ffmpeg 之前终止而不完成转换

> ID：13528014
> 
> 赞同：2
> 
> 时间：2012-11-23T11:19:43.697
> 
> 标签：python, ffmpeg, pexpect

我正在开发一个 python 脚本，它通过 ffmpeg 对视频进行自定义转换。

我的问题是 ffmpeg 的执行在经过一些转换（通常是 100mb 中的 3-4mb）后突然停止，并且没有退出代码。

我正在使用**pexpect**库。目前我不检查进度，但我会在不久的将来。似乎我对这些问题[FFMPEG 和 Pythons](https://stackoverflow.com/q/1455532/1729524) subprocess和[Getting realtime output from ffmpeg to be used in progress bar (PyQt4, stdout)](https://stackoverflow.com/q/7632589/1729524)使用 pexpect 是正确的。这是我正在运行的命令（我已经检查过它正是这个）

```
nice ffmpeg -i '/full/path' -s 640x360 -strict experimental -vcodec libx264
   -f mp4 -  coder 0 -bf 0 -refs 1 -flags2 -wpred-dct8x8 -level 30 -crf 26
   -bufsize 4000k -maxrate 350k -preset medium -acodec libvo_aacenc
   -ar 48000.0 -ab 128K -threads 2 -y '/full/path/out' 
```

我用得*很好*，但我也试过没有它，结果是一样的。

我以这种方式运行 pexpect：

```
output, exit = pexpect.run(self.command(), withexitstatus=True,\
                                   logfile=logfile)
print output
print exit 
```

当然，我在命令行上尝试过相同的命令，它工作正常。

关于可能发生什么的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:32:43.420

该问题最终成为 pexpect run 函数中有关超时的错误。我发现了我之前报告的错误（是的，我忘记检查了；））

[http://sourceforge.net/tracker/?func=detail&aid=3316509&group_id=59762&atid=492077](http://sourceforge.net/tracker/?func=detail&aid=3316509&group_id=59762&atid=492077)

可悲的是，这个错误真的很老，它解释了如何解决这个小错误。作为一种解决方法，我可以改用 spawn 重写我的代码。

我真的不喜欢使用带有仍然未维护的琐碎错误的代码的想法，因此我按照 Albert 的建议使用 Popen 编写了代码。

我将等待一段时间来选择使用 pexpect 去冒险（如果代码看起来可靠的话）。

作为记录，这是我的工作代码：

```
 output = file(LOG_FILE, 'a')
    args = shlex.split(self.command_video())
    return subprocess.call(args, stdout=output, stderr=output) 
```

谢谢您的帮助。

# java - Java SSL Streaming - 拆分的应用程序数据

> ID：13528021
> 
> 赞同：3
> 
> 时间：2012-11-23T11:20:14.537
> 
> 标签：java, networking, ssl, streaming

我尝试通过已建立的 SSL 连接发送一个 byte[] () （握手等已完成）。

结果： byte[] 被分成两个数据包（参见下面的调试）：

*   第一个数据包：只是应用程序数据的第一个字节（**** *01* ****）。
*   第二个数据包：其余（fe db 01 00 ...）650 字节

有没有办法在一个数据包中提交所有应用程序数据字节？

流发送 651 字节：

```
**01** fe db 01 00 00 02 83 3c 3f 78 6d 6c 20 76 65 72 73 69 6f 6e 3d 22 31 2e 30 22 20 65 6e 63 6f 64 69 6e 67 3d 22 75 73 2d 61 73 63 69 69 22 20 73 74 61 6e 64 61 6c 6f 6e 65 3d 22 6e 6f 22 3f 3e … 
```

javax.net.debug 输出

```
Padded plaintext before ENCRYPTION:  len = 32
0000: **01** 06 03 06 46 7F 7F AE   D4 E8 30 5D B7 DB 3C 44  ....F.....0]..<D
0010: 02 08 C9 2A A1 0A 0A 0A   0A 0A 0A 0A 0A 0A 0A 0A  ...*............
1, WRITE: TLSv1 Application Data, length = 32
[Raw write]: length = 37
0000: 17 03 01 00 20 B3 4E EE   CE 5B 69 EC A5 4A 80 7F  .... .N..[i..J..
0010: D6 03 35 AF 6A 7B 85 17   B7 46 A2 31 B2 EF 7E D0  ..5.j....F.1....
0020: EA 1B 67 7E ED                                     ..g..
Padded plaintext before ENCRYPTION:  len = 672
0000: FE DB 01 00 00 02 83 3C   3F 78 6D 6C 20 76 65 72  .......<?xml ver
0010: 73 69 6F 6E 3D 22 31 2E   30 22 20 65 6E 63 6F 64  sion="1.0" encod
0020: 69 6E 67 3D 22 75 73 2D   61 73 63 69 69 22 20 73  ing="us-ascii" s
0030: 74 61 6E 64 61 6C 6F 6E   65 3D 22 6E 6F 22 3F 3E  tandalone="no"?>
[…] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T19:21:40.147

Sun 的 impl 评论：

> 默认情况下，我们通过在每个有效负载的第一条记录中发送一个字节的应用程序数据，并在后续记录中发送其余字节，来对抗 SSLv3/TLS1.0 中 CBC 模式密码套件的选择明文问题。请注意，这些问题已在 TLS 1.1 或更高版本中得到解决。

实验`SSLEngine.wrap( largePlainText )`表明它产生了 2 条 SSL 记录，第 1 条记录包含 1 字节的纯文本，第 2 条记录包含 15846 字节的纯文本。

接收器 API 可能会逐条处理记录，因此它将为第一次读取返回 1 个字节。

我们还可以在其他 SSL 实现中观察到这种行为，例如来自 Web 浏览器的 HTTPS 请求。

OpenSSL 插入空记录来抵御攻击。如果接收方是 Java SSL 套接字，则输入流不能为 read() 返回 0 字节，因此会跳过记录。其他接收器可能没有为 0 长度记录做好准备，并且可能会中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:42:55.137

您所做的关于`byte[]`在另一端完全按照您编写的方式阅读的假设是典型的 TCP 错误。它实际上并不特定于 SSL/TLS，但也可能发生在 TCP 连接上。

在 TCP（和 SSL/TLS）中，不能保证读取器的缓冲区将填充与写入器缓冲区中的数据包完全相同的数据包长度。所有 TCP 保证都是按顺序交付的，因此您最终会获得所有数据，但您必须将其视为流。

这就是为什么使用 TCP 的协议依靠指示符和分隔符来告诉另一端何时停止读取某些消息。

例如，HTTP 1.1 使用空行来指示标头何时结束，并使用`Content-Length`标头告诉接收者期望的实体长度（或分块传输编码）。SMTP 还使用换行符和`.`在消息的末尾。

如果您正在设计自己的协议，则需要定义一种方式，让接收者知道您定义的有意义的数据单元何时被分隔。当您读取数据时，读取此类指示符并填充您的读取缓冲区，直到您获得您期望的字节数或直到您找到您定义的分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T11:40:14.843

在看到此页面之前，我遇到了同样的问题： [http ://bugs.java.com/bugdatabase/view_bug.do?bug_id=7157903](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7157903)

因此，我使用 -Djsse.enableCBCProtection=false 参数运行 JVM，现在数据没有被拆分。

最好的祝福

# converter - Javacard 2.2.1 转换器在 Windows 中不起作用

> ID：13528025
> 
> 赞同：1
> 
> 时间：2012-11-23T11:20:32.383
> 
> 标签：converter, bytecode, javacard

我正在开发一个 JC2.2.1 小程序。我面临一个非常奇怪的问题。我在 Win7 和 linux 中都有我的系统设置。奇怪的是，在 Linux 中转换和上传 CAP 文件时它工作正常。但是，当在同一个类文件上使用 windows 转换器时，成功验证后的 GPSHELL 在加载第一个块时报告 6985。

使用命令的解包版本分析两个 CAP 文件的字节码，我注意到存在细微差别（见下文）。

为什么 JC2.2.1 转换器会创建不同的字节码？任何的想法？我浪费了很多时间试图找出这样的问题。

我的 Windows 操作系统是 Win7 64 位，运行 Java 1.6 32 位和 64 位（我都测试过）

包 AID：01 02 03 04 05 06 小程序 AID：01 02 03 04 05 06 00

我已经突出显示了不同的字节**

第一加载命令（不工作）80E80000EFC48211CF010010DECAFFED01020400010601020304050602001F0010001F000B0028010600120BD30020016D000002D700140002001004010004002804020107A0000000620101020107A0000000620102020107A0000000620201 * *05* * 0106A0000001510003000B01070102030405060000010600120080030600020404000000BCFFFF00B800BF070BD30005308F00073D181D1E8C00063B7A0640188C00221F10096D0A1167001F418D00231E04191E254141311E04191E25414131191E2510116A11191E25600C116700191E25418D00231060058D00277F00281808900C87001810F2900B870105110080038D00

第一加载命令（工作）80E80000EFC48211CF010010DECAFFED01020400010601020304050602001F0010001F000B0028010600120BD30020016D000002D700140002001004010004002804020107A0000000620101020107A0000000620102020107A0000000620201 * *00* * 0106A0000001510003000B01070102030405060000010600120080030600020404000000BCFFFF00B800BF070BD30005308F00073D181D1E8C00063B7A0640188C00221F10096D0A1167001F418D00231E04191E254141311E04191E25414131191E2510116A11191E25600C116700191E25418D00231060058D00277F00281808900C87001810F2900B870105110080038D00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:16:44.060

问题是我为 GlobalPlatform 使用了不正确的导出文件。我使用的是 GP2.2.1 v1.5，我的卡是 GP2.1.1。我误读了下载页面。

# oracle-adf - 如何从 ADF JAX-WS 代理客户端调用安全 Web 服务

> ID：13528027
> 
> 赞同：0
> 
> 时间：2012-11-23T11:20:34.123
> 
> 标签：oracle-adf, adfs2.0

我们正在尝试实施 ADF JAX-WS 代理客户端来访问安全的 Web 服务（电子商务套件）。如何传递用户名/密码？

如果我没有通过就运行，我会在线程“main”javax.xml.ws.soap.SOAPFaultException 中收到以下错误异常：SOAP Header 中缺少

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:49:26.007

你考虑过谷歌问这个问题吗？我做到了，这就是它在 0.02 秒内发现的

[http://biemond.blogspot.co.uk/2009/04/jax-ws-web-service-proxy-client-and.html](http://biemond.blogspot.co.uk/2009/04/jax-ws-web-service-proxy-client-and.html)

# yii - yii-user extension include(WebUser.php) 没有这样的文件或目录

> ID：13528030
> 
> 赞同：1
> 
> 时间：2012-11-23T11:20:44.710
> 
> 标签：yii, yii-extensions

我正在尝试按照这个官方教程安装 yii-user 的扩展

[http://www.yiiframework.com/extension/yii-user/#hh2](http://www.yiiframework.com/extension/yii-user/#hh2)

但我遇到了一些问题，特别是当我添加这个时

```
 user'=>array(
        // enable cookie-based authentication
        'class' => 'WebUser',
        'allowAutoLogin'=>true,
        'loginUrl' => array('/user/login'), 
```

到配置主。当我添加此代码时，我收到此消息错误

**包括（WebUser.php）[function.include]：无法打开流：没有这样的文件或目录**

有什么线索吗？我需要先做点什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T15:27:08.713

我搜索了一下，我找到了解决方案。但它不在文档中。

因此，我们应该在**protected/components中创建****WebUser.php** ，如下所示：

 **```
 <?php

// this file must be stored in:
// protected/components/WebUser.php

class WebUser extends CWebUser {

// Store model to not repeat query.
 private $UserLogin;

// Return first name.
// access it by Yii::app()->user->first_name
function getFirst_Name(){
$user = $this->loadUserLogin(Yii::app()->user->user_id);
return $user->first_name;
}  

// This is a function that checks the field 'role'
// in the User model to be equal to 1, that means it's admin
// access it by Yii::app()->user->isAdmin()
function isAdmin(){
$user = $this->loadUser(Yii::app()->user->user_id);
return intval($user->user_role_id) == 1;
}

// Load user model.
protected function loadUserLogin($id=null)
{
    if($this->UserLogin===null)
    {
        if($id!==null)
            $this->UserLogin=UserLogin::model()->findByPk($id);
    }
    return $this->UserLogin;
}
}?> 
```

并且应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:33:17.577

您是否按照[http://www.yiiframework.com/extension/yii-user/#hh2](http://www.yiiframework.com/extension/yii-user/#hh2)上的说明进行操作？

您可能忘记指定用户模块的导入路径`config.php`

```
'import'=>array(
    ...
    'application.modules.user.models.*',
    'application.modules.user.components.*',
), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T17:16:08.130

我有同样的问题，发现这是权限问题。Apache 用户（在我的情况下为 www-data）无法访问 protected/modules/users/* 文件。**

# android - 如何存储大型列表项以获得最大的速度和效率

> ID：13528031
> 
> 赞同：0
> 
> 时间：2012-11-23T11:20:50.973
> 
> 标签：android, list, listview, data-structures

我正在 Android 中创建一个应用程序，并且我有大量的字符串数据，允许 10,000 个或更多单词（项目），我想在列表视图中显示它。我的问题是我应该把我的（源）数据放在哪里

1.  XML 文件中的字符串数组
2.  在数据库中（然后我必须放置一个外部数据库）
3.  从简单的文本文件、CSV 等读取数据

在这里，我唯一关心的是速度，哪种方式更快以及为什么。

注意：我目前将数据作为字符串数组放入 Xml 中，并将其放入活动中的 Array 中，但是从 xml 加载数据需要几秒钟/片刻的时间，但只是第一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:17:51.427

执行代码以在 AsyncTask 中解析/加载 json/db 格式的内容以提高速度。我加载 5000 行，每行约 400 个字符。没有 AsyncTask 需要更长的时间。

```
 private class YourTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... s) {

            //Here you have to make the loading / parsing tasks
            //Don't call any UI actions here. For example a Toast.show() this will couse Exceptions
            // UI stuff you have to make in onPostExecute method

        }

        @Override
        protected void onPreExecute() {
            // This method will called during doInBackground is in process
            // Here you can for example show a ProgressDialog
        }

        @Override
        protected void onPostExecute(Long result) {
            // onPostExecute is called when doInBackground finished
            // Here you can for example fill your Listview with the content loaded in doInBackground method

        }

} 
```

要执行你只需要调用：

```
new YourTask().execute(""); 
```

在这里您可以了解有关 AsyncTasks 的更多信息：

[AsyncTask 开发者指南](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDQQFjAA&url=http://developer.android.com/reference/android/os/AsyncTask.html&ei=XXWvUJivB8XIswajxIDABg&usg=AFQjCNE8gLVXz1Hwq4rI8oxRkZNHjhRzpQ&sig2=CmICU1zanbO_qVgO4V9uEg)

# sql - JDBC 选择查询返回错误值

> ID：13528035
> 
> 赞同：0
> 
> 时间：2012-11-23T11:21:14.700
> 
> 标签：sql, select, jdbc

我在我的 Web 服务中执行**JDBC**选择查询以从我的数据库中返回一些值。此表的一部分附于此问题。执行以下查询后：

```
SELECT * FROM uses WHERE  uses_user_fk='22'; 
```

我只收到一行，但在数据库中有两个满足查询条件的值，如附图所示。谁能告诉我哪里出错了。我正在使用以下 JDBC 指令来执行查询

```
ResultSet tempResultSet = statement.executeQuery(query); 
```

数据库表的波纹管图像**使用**：
![在此处输入图像描述](../Images/d9ed62f6d4d7fc87651b51ebf073e882.png)

在查询数据库的竞争方法下面，参数查询与前面列出的“<strong>SELECT * FROM uses...</strong>”相同。我应该补充一点，该查询的答案是**4**，我也尝试了这个查询而不使用引号**（uses_user_fk=22**），但结果是一样的：

```
protected ArrayList<Integer> queryForIds(String query, String column) throws Exception {
        ArrayList<Integer> ids = new ArrayList<>();
        try {
            Class.forName("com.mysql.jdbc.Driver");
            connect = DriverManager
                    .getConnection(GeneralDatabaseConstants.DATABASE_CONNECTION_URL);
            statement = connect.createStatement();
            ResultSet tempResultSet = statement.executeQuery(query);
            if (tempResultSet.next())
                ids.add(new Integer(tempResultSet.getInt(column)));
        } catch (Exception e) {
            throw e;
        } finally {
            close();
        }
        return ids;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:42:22.590

代替

```
if (tempResultSet.next()) 
```

和

```
while (tempResultSet.next()) 
```

# c# - WPF Textwrapping 在项目控件中不起作用

> ID：13528037
> 
> 赞同：-1
> 
> 时间：2012-11-23T11:21:18.513
> 
> 标签：c#, wpf

不知何故 textwrap 不起作用。

我是 WPF 的新手，所以如果有人知道为什么这不起作用，我将不胜感激。

这是我的代码：

```
 <ItemsControl Grid.ColumnSpan="3" Grid.Row="1" Margin="0 0 0 0" ItemsSource="{Binding VRCItemsPaged}">
                    <ItemsControl.Template>
                        <ControlTemplate>
                            <StackPanel Orientation="Vertical">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="310"/>
                                        <ColumnDefinition Width="110"/>
                                        <ColumnDefinition Width="351"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Style="{StaticResource Label}" Grid.Column="0" Text="Description"/>
                                    <TextBlock Style="{StaticResource Label}" Grid.Column="1" Text="Code"/>
                                    <TextBlock Style="{StaticResource Label}" Grid.Column="2" Text="Value"/>
                                </Grid>
                                <StackPanel Orientation="Vertical" IsItemsHost="True"/>
                            </StackPanel>
                        </ControlTemplate>
                    </ItemsControl.Template>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Height="Auto">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="280"/>
                                    <ColumnDefinition Width="30"></ColumnDefinition>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="30"></ColumnDefinition>
                                    <ColumnDefinition Width="351"/>
                                </Grid.ColumnDefinitions>
                                <TextBox FontWeight="Normal" TextWrapping="Wrap" IsEnabled="False" Grid.Column="0" Text="{Binding Path=Description}"/>
                                <TextBox FontWeight="Normal" Grid.Column="2" IsEnabled="False" Text="{Binding Path=Code}"/>
                                <TextBox FontWeight="Normal" Grid.Column="4" IsEnabled="False"    Text="{Binding Path=Value}"/>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:29:33.067

抱歉，这更像是另一个问题而不是答案，但我需要包含一个屏幕截图，这就是它不是评论的原因。

你的问题实际上没有用怎么办？我刚刚使用您的 ItemsControl XAML 创建了一个简单的测试窗口，并且我看到文本换行正确。

![在此处输入图像描述](../Images/e5b12f2eafd0235d791928dab506447a.png)

我使用的 XAML 是

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">
    <ItemsControl Grid.ColumnSpan="3" Grid.Row="1" Margin="0 0 0 0" ItemsSource="{Binding Items}">
        <ItemsControl.Template>
            <ControlTemplate>
                <StackPanel Orientation="Vertical">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="310"/>
                            <ColumnDefinition Width="110"/>
                            <ColumnDefinition Width="351"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Description"/>
                        <TextBlock Grid.Column="1" Text="Code"/>
                        <TextBlock Grid.Column="2" Text="Value"/>
                    </Grid>
                    <StackPanel Orientation="Vertical" IsItemsHost="True"/>
                </StackPanel>
            </ControlTemplate>
        </ItemsControl.Template>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid Height="Auto">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="280"/>
                        <ColumnDefinition Width="30"></ColumnDefinition>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="30"></ColumnDefinition>
                        <ColumnDefinition Width="351"/>
                    </Grid.ColumnDefinitions>
                    <TextBox FontWeight="Normal" TextWrapping="Wrap" IsEnabled="False" Grid.Column="0" Text="{Binding Path=Description}"/>
                    <TextBox FontWeight="Normal" Grid.Column="2" IsEnabled="False" Text="{Binding Path=Code}"/>
                    <TextBox FontWeight="Normal" Grid.Column="4" IsEnabled="False"    Text="{Binding Path=Value}"/>
                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

后面的代码是。

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Text;
using System.Windows;
using System.Windows.Media;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {

        public ObservableCollection<TestObject> Items
        {
            get { return (ObservableCollection<TestObject>)GetValue(ItemsProperty); }
            set { SetValue(ItemsProperty, value); }
        }

        // Using a DependencyProperty as the backing store for Items.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty ItemsProperty =
            DependencyProperty.Register("Items", typeof(ObservableCollection<TestObject>), typeof(MainWindow), new PropertyMetadata(null));

        public MainWindow()
        {
            InitializeComponent();
            Items = new ObservableCollection<TestObject>();
            Items.Add(new TestObject() { Description = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum." });
            Items.Add(new TestObject() { Description = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum." });
        }
    }

    public class TestObject : DependencyObject
    {

        public string Description
        {
            get { return (string)GetValue(DescriptionProperty); }
            set { SetValue(DescriptionProperty, value); }
        }

        // Using a DependencyProperty as the backing store for Description.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty DescriptionProperty =
            DependencyProperty.Register("Description", typeof(string), typeof(TestObject), new PropertyMetadata(null));

    }
} 
```

# git - Git rebase 修复冲突，该修复在哪里应用？

> ID：13528040
> 
> 赞同：0
> 
> 时间：2012-11-23T11:21:22.307
> 
> 标签：git, version-control, conflict, rebase

假设我在 master 的一个分支上工作，有人在 master 上做了大量的工作，我现在需要将这些工作应用到我的分支上。

如果我使用 rebase master 并且有冲突 - 这些修复应用在哪里。
他们是在 master 之上应用了我的分支更改，还是在更改 master 中所做的工作更改其历史 -
*大师的历史，而不是我的新分支历史，我的分支无关紧要，因为只有 master 没有任何变化都做成了新的分支*。
我是否将它们应用在主人的头部对公共主人分支无害的地方。

此外，如果我必须稍后再做更多的冲突，这些冲突在哪里应用在最后的冲突解决方案之上，在这些解决方案中还是在其他地方？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:19:40.103

`git rebase`只有在更改工作目录时才会发生冲突 - 就是这样，在准备下一次提交时。因此，您所做的任何修复都会显示在您正在应用的提交中。

记住`rebase`does `cherry-pick`，它记录一个*新*的提交。因此*，*新提交（与您正在执行的原始提交不同`cherry-pick`）将进行任何必要的更改。

# java - 从 ByteBuffer 读取对象时出现 StreamCorruptedException

> ID：13528042
> 
> 赞同：0
> 
> 时间：2012-11-23T11:21:27.737
> 
> 标签：java, object, streaming, bytebuffer, datagram

我正在使用 java NIO 数据报通道（在阻塞模式下）。我想将对象从一侧传输到另一侧。这就是我在发件人端所做的：

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
          ObjectOutputStream oos = new ObjectOutputStream(baos);
          oos.writeObject(pkt);
          ByteBuffer buffer = ByteBuffer.wrap(baos.toByteArray());
          while(buffer.hasRemaining())
                 channel.write(buffer); 
```

这`pkt`是我`ControlPacket`要传输的类的对象。在接收方：

```
 ByteBuffer buffer = ByteBuffer.allocate(8192);
          channel.receive(buffer);
          buffer.flip();
          ByteArrayInputStream bias = new  ByteArrayInputStream(buffer.array(),0,buffer.limit());
          ObjectInputStream ois = new ObjectInputStream(bias);
          pkt = (ControlPacket)ois.readObject(); 
```

但是我`java.io.StreamCorruptedException: invalid stream header: 00000094`在运行代码时出错。无法弄清楚代码中有什么问题。我的意思是，因为我在收到缓冲区后翻转缓冲区，读取它的指针将重置为 0 位置，并且应该上升到最后一个字节所在的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:58:33.447

在写入缓冲区之前关闭 ObjectOutputStream。

# visual-studio-2010 - 文件未显示在 git commit 工具中

> ID：13528043
> 
> 赞同：0
> 
> 时间：2012-11-23T11:21:27.347
> 
> 标签：visual-studio-2010, git, dvcs

我最近才开始使用 git。我在 git commit 工具中查看更改的文件时遇到问题。我正在使用 Visual Studio 作为我的开发环境。我有几个项目作为 localhost 和 localhost/admin。我对两个项目中的文件进行了一些更改。当我运行 git commit 工具时，我可以看到来自 localhost 项目的更改，但看不到来自 localhost/admin 项目的更改。知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:26:13.273

如果没有显示更改，则表示它们未提交。

可能的原因：

1）这些是新文件，您需要添加它们以单独提交

2) 由于 .gitignore 规则，文件被 git 忽略

我会建议：

1) 使用 gitk 工具来验证之前提交的内容。该工具包含在标准 git 包中。

2）使用外部工具进行提交（我不确定 VS git 插件有多好，但这可能有很大帮助）。在我的个人偏好列表中是 git-cola 工具。它可以让您选择要提交的确切内容（甚至通过代码行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:28:32.903

我的另一个项目正在重定向到 IIS 中的不同路径。

# perl - PERL CGI CLI 特殊字符问号

> ID：13528044
> 
> 赞同：4
> 
> 时间：2012-11-23T11:21:30.217
> 
> 标签：perl

当我在 CLI 参数中使用问号字符 (?) 时，它不会填充该值（使用[http://search.cpan.org/dist/CGI/lib/CGI.pm#DEBUGGING](http://search.cpan.org/dist/CGI/lib/CGI.pm#DEBUGGING)）。就算逃过了。

这根本不会填充“参数”：

perl httpPost.pl param="http://www.test.com/?user=test"

perl httpPost.pl 参数="http://www.test.com/\?user=test"

这将返回字符直到 ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:02:57.183

您必须对参数进行 URL 编码，以便将 URL 特有的字符转换为 %XX 字符串。这些字符串将在另一端被解码。

CPAN 上有许多模块可以帮助您进行 url 编码。这里有一些：

1.  [URL::编码](https://metacpan.org/module/URL%3a%3aEncode)
2.  [URI::URL](https://metacpan.org/module/URI%3a%3aURL)

在更广泛的意义上：[在 MetaCPAN 中搜索 url_encode](https://metacpan.org/search?q=url_encode)

# imagemagick - 如何使用 ImageMagick 添加 Alpha 通道？

> ID：13528051
> 
> 赞同：1
> 
> 时间：2012-11-23T11:21:55.020
> 
> 标签：imagemagick, alpha-transparency

假设一个目录有很多图像，其中一些错过了 alpha 通道，因此在背景下看起来很糟糕。我以为每张图片都有 alpha 通道，但现在有些图片显示为白色而不是透明。如何批量添加 Alpha 通道？

**不工作**

> $ 在 imageAlpha.png 上转换 imageNoAlpha.png -alpha

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:01:14.083

这将在您的评论中将白色变为透明，但图像中的任何其他白色也将是透明的：

```
convert input.jpg -background none -transparent white -flatten output.png 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:23:07.467

感谢 Bonzo，即使没有抗锯齿，我也能获得非常酷的结果！您可以通过下图看到眼睛的差异。我不知道您因此丢失了多少信息，但至少我能够更好地调整事物，至少对我而言，抗锯齿不是那么容易。

![在此处输入图像描述](../Images/328a2db4c643380e9bfc2284d1493332.png)

```
$ convert in.png -background none -fuzz 10% -transparent white -flatten out.png 
```

使用 bash -for-loop 或使用为 python 构建的 ImageMagick -pkg 可能是最简单的方法。我不知道哪种方法更好，我将把它留在这里以便将来改进答案。谢谢。

# java - 如何追加或放置列表 进入GAE memcache 编程语言Java？

> ID：13528052
> 
> 赞同：3
> 
> 时间：2012-11-23T11:22:00.340
> 
> 标签：java, google-app-engine, google-cloud-datastore

**例子 ：**

```
 Query departQuery = pm.newQuery(Department.class);
  List <Department> departList = List<Department>) departQuery.execute(); 
```

**我可以知道如何将离开列表（列表）添加到内存缓存中吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:43:27.083

您可以将[JCache](https://developers.google.com/appengine/docs/java/memcache/usingjcache)用于 App Engine。代替`List`，使用子类（例如`ArrayList`）以`departList`使 成为`Serializable`，然后您可以拥有：

```
cache.put(yourkey, departList) 
```

# python - numpy loadtxt 单行/行作为列表

> ID：13528053
> 
> 赞同：8
> 
> 时间：2012-11-23T11:22:01.500
> 
> 标签：python, arrays, numpy

我有一个只有一行的数据文件，例如：

```
 1.2  2.1  3.2 
```

我使用 numpy 版本 1.3.0 loadtxt 来加载它

```
 a,b,c = loadtxt("data.dat", usecols(0,1,2), unpack=True) 
```

输出是浮点数而不是数组

```
 a = 1.2 
```

我希望它会是：

```
 a = array([1.2]) 
```

如果我读取一个包含多行的文件，它就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:30:52.203

发生的事情是，当您加载数组时，您会获得一维数组。当你打开它时，它会得到一组数字，即没有维度的数组。这是因为当你解压一个数组时，它的维数会减一。从一维数组开始，它归结为一个简单的数字。

如果测试 a 的类型，它不是浮点数，而是 numpy.float，它具有数组的所有属性，但形状为 void 元组。所以它是一个数组，只是不表示为一个。

如果你需要的是一个只有一个元素的一维数组，最简单的方法是在解包之前重塑你的数组：

```
#note the reshape function to transform the shape
a,b,c = loadtxt("text.txt").reshape((-1,1)) 
```

这会给你预期的结果。正在发生的事情是将它重新塑造成一个二维数组，这样当你打开它时，维数会减少到一。

### 编辑：

如果您需要它在多维数组中正常工作并在读取一维数组时保持一维，我认为最好的方法是使用 loadtxt 正常读取并在第二阶段重塑您的数组，如果它们是则将它们转换为单维纯数

```
a,b,c = loadtxt("text.txt",unpack=True)
for e in [a,b,c]
    e.reshape(e.shape if e.shape else (-1,)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-24T13:51:19.750

只需使用 numpy 的 inbuit loadtxt 参数 ndmin。

```
a,b,c=np.loadtxt('data.dat',ndmin=2,unpack=True) 
```

输出

```
a=[1.2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T06:15:29.717

不使用 reshape 的简单方法是显式类型转换列表

```
 a,b,c = loadtxt("data.dat", usecols(0,1,2), unpack=True)
 a,b,c = (a,b,c) if usi.shape else ([a], [b], [c]) 
```

这比重塑更快！

# c++ - 非对称认证加密

> ID：13528054
> 
> 赞同：5
> 
> 时间：2012-11-23T11:22:04.427
> 
> 标签：c++, authentication, encryption, cryptography, crypto++

我想保护我的数据不被未经授权的人更改或读取。环顾四周，我发现 Authenticated Encryption(AE) 是一种解决方案。
我知道我可以使用 CCM、GCM 或 EAX 中的任何一个在 Crypto++ 中进行 AE。但我注意到他们使用相同的密钥来加密和解密数据。我不希望这样，我宁愿使用非对称密钥来加密和解密我的数据。
如果我使用非对称算法对数据进行签名，然后使用对称算法对其进行加密，我将实现我想要的（这应该是安全的，因为它是[AtE](http://www.cryptopp.com/wiki/Authenticated_Encryption#Data_Integrity_and_Authenticity)方法，对吧？）。
但在我这样做之前，是否有任何加密库可以满足我的需求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-02T22:35:34.340

> 我知道我可以使用... CCM、GCM 或 EAX 进行身份验证加密。但我注意到他们使用相同的密钥来加密和解密数据。我不希望这样，我宁愿使用非对称密钥来加密和解密我的数据。

我知道的所有方案都将使用对称密码进行批量数据加密。对称密码可以是分组密码或流密码。

我还看到了一些不正确的 RSA 应用，其中 RSA 在 ECB 模式下运行。即数据被“分块”或“分块”，然后对每个块应用 RSA。《[应用密码学手册》](http://cacr.uwaterloo.ca/hac/)特别警告了这一点。

您可能要做的最好的事情是[椭圆曲线集成加密方案 (ECIES)](http://www.cryptopp.com/wiki/Elliptic_Curve_Integrated_Encryption_Scheme)或[离散日志集成加密系统 (DLIES)](http://www.cryptopp.com/wiki/Discrete_Logarithm_Integrated_Encryption_Scheme)。两者都在 Crypto++ 中可用。两者都使用公钥（非对称）加密。

ECIES 和 DLIES 将密钥封装机制 (KEM) 与数据封装机制 (DEM) 结合在一起。系统从公共秘密中独立地导出对称密码密钥和 MAC 密钥。数据首先在对称密码下加密，然后密文在身份验证方案下进行 MAC'd。最后，公共秘密在公钥/私钥对的公共部分进行加密。加密函数的输出是元组`{K,C,T}`，其中`K`是加密后的公共秘密，`C`是密文，`T`是认证标签。

围绕“公共秘密”有一些人放弃，因为它实际上是应用密钥协议功能的结果，后来用 KDF 消化。它使用静态公钥和临时密钥对。执行解密的人使用他们的公钥来执行另一半的密钥交换以得到“公共秘密”。

KEM 和 DEM 避免填充，因此填充预言不是问题。这就是为什么使用 KDF 来消化 KEM 下的大型“公共秘密”。省略填充极大地简化了系统的安全证明。由于安全证明，ECIES 和 DLIES 是[IND-CCA2](https://en.wikipedia.org/wiki/Adaptive_chosen-ciphertext_attack)，这是您可以实现的最强之一。

* * *

> 如果我使用非对称算法对数据进行签名，然后使用对称算法对其进行加密......

这是一些相关的阅读……首先是 Hugo Krawczyk 的[The Order of Encryption and Authentication for Protecting Communications](https://www.iacr.org/archive/crypto2001/21390309.pdf)。其次是 Don Davis[在 S/MIME、PKCS#7、MOSS、PEM、PGP 和 XML 中的缺陷签名和加密](http://world.std.com/~dtd/sign_encrypt/sign_encrypt7.html)。

这里的相关性是：Krawczyk 的论文涉及对称密钥加密和认证加密的 Encrypt-then-Authenticate 风格（以及如何执行认证加密）。Davis 的论文涉及非对称密码学以及签名和加密之间的脱节（以及如何修复它）。

* * *

> 但在我这样做之前，是否有任何加密库可以满足我的需求？

是的（但这取决于你想做什么）。Crypto++ 是我所知道的唯一提供 ECIES、DLIES 和 PSSR 集合的软件。

Bouncy Castle 紧随其后，因为它提供 ECIES，但不提供 DLIES。我不确定它提供了多少 PSSR。

Crypto++、Bouncy Castle、OpenSSL（和其他）提供 PSSR。使用 PSSR 查找库应该没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:37:40.763

[GPGME](http://www.gnupg.org/related_software/gpgme/)（GnuPG 变得简单）。它是 C 语言的高级加密库，并获得 LGPL 许可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:04:16.700

您可以考虑使用基于 OpenPGP 的解决方案。这将为您提供您想要的功能，并且可以扩展以支持任意数据大小，这与纯粹基于非对称加密（没有传输密钥）的解决方案不同。

那里有一些开源实现。BouncyCastle 提供了一个，但我不确定他们是否有 C++ 实现。

# jquery - 特定行类的备用行颜色

> ID：13528058
> 
> 赞同：2
> 
> 时间：2012-11-23T11:22:10.113
> 
> 标签：jquery, html, css

我是 jquery 的新手，正在尝试为 1 个特定的 tr 类替换行颜色

```
<tr class="found"> 
```

下面的 jquery 更改所有表行的行颜色。

```
<style type="text/css">
<!--
.odd {background: #caf2fe;}
-->
</style>

<script type="text/javascript">
 $(document).ready(function(){ 
 $("tr:odd").addClass("odd");
 }); 
</script> 
```

我有来自我的数据库的数据，并且表单上有 2 个不同的表，所以只希望一个名为 found 的特定行具有这种 Zebra 模式。

将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:24:16.927

只需使您的选择器更具体。

```
$("tr.found:odd").addClass("odd"); 
```

添加仅选择具有类`.found`的奇数`tr``found`

这是一个演示：http: [//jsfiddle.net/4bmMJ/](http://jsfiddle.net/4bmMJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:28:18.820

```
<script type="text/javascript">
 $(document).ready(function(){ 
 $("tr.found:nth-child(odd)").addClass("odd");
 }); 
</script> 
```

# ios-simulator - iOS模拟器奇怪的“碎玻璃”行为，App只列出联系人组

> ID：13528060
> 
> 赞同：0
> 
> 时间：2012-11-23T11:22:11.580
> 
> 标签：ios-simulator, contacts

我正在从事一个两个月前的项目，该项目一直工作到今天，除了 XCode 从 4.4 更新到 4.5 之外没有任何变化。

我使用 RHAddressBook 来读取联系人组，这似乎是一个非常好的框架，但有一个奇怪的行为。

按此顺序：

*   在 iOS5 iPhone 非视网膜中模拟：应用程序显示黑屏，奇怪的日志：

`objc[31712]: Class _NSZombie_CFCalendar is implemented in both ?? and ??. One of the two will be used. Which one is undefined.`

*   在 iOS6 iPhone 非视网膜中模拟：一切正常，加载并显示组，无日志

*   在iOS5 iPhone非视网膜中模拟：应用程序显示联系人列表，但它们在模拟器显示上似乎是碎玻璃效果，并且既不显示顶部栏也不显示底部栏，再次出现奇怪的日志

这是我的故事板（导航控制器中的根视图）：

![在此处输入图像描述](../Images/f0b1fd4c25f4ec1e0b7f430adbd9dc10.png)

和同一屏幕的模拟器屏幕截图：

![在此处输入图像描述](../Images/c3c8f3dcc0457309b958320849ac50f3.png)

第二个屏幕（简单的segue打开空白页）：

![在此处输入图像描述](../Images/b65e820dae568cab1533107c182a66bf.png)

如果您有什么想法，我会很高兴听到它！

非常感谢。

编辑：似乎这是一个 iPhone 模拟器错误，我会尝试重新安装它。在另一个应用程序（来自 SYGallery 的 SYGalleryExample）上，它像在 iPad 上一样显示它，具有相同的碎玻璃效果，这是另一个完美地用于生产用途的应用程序：

编辑 2：重新安装 XCode，清除文件夹`~/Library/Developer`并`~/Library/Application Support/iPhone Simulator`没有做任何事情。好像我要再次进行完整的系统安装。

![在此处输入图像描述](../Images/1e9edc1b4817677b4ffe92e89da9b3b5.png)

编辑 3：即使是 iphone 模拟器“本机”应用程序也很奇怪。这是证据：

![在此处输入图像描述](../Images/5aec6210cfcbf7c53b92819c3b959d32.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:13:58.117

一切都已修复，Apple 在我的 iOS5 上 iPhone 模拟器的用户文件中某处出现错误。回顾一下：我构建的每个应用程序的显示都搞砸了，包括昨天还在工作的应用程序，直到那时还没有做任何更改。

然后我发现本地应用程序也不好，设计是模拟 iPhone 非视网膜设备上的 iPad 的。

登录另一个会话，启动相同的本机应用程序（设置、地图等）一切都很好。

重新登录原始会话，一切正常。

希望这可以帮助一些未来的读者。

编辑 ：

实际上没有，仍然无法正常工作。在新硬盘驱动器上完成 osx 的全新安装，无需时间机器恢复或其他任何方式，在 ipad 5.0 模拟器上运行工作项目，但仍然：

![在此处输入图像描述](../Images/c7da87dc603af92eff7947b7e631c710.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T11:34:29.313

对我来说，它只在 iOS5 上重现，iOS6 运行良好。

这就是我设法修复它的方法：

问题是我安装了 SwitchResX，这是一个为 mac 创建显示配置文件的程序。此应用程序干扰了 iPad 模拟器的分辨率。

所以我的建议是删除任何改变你的分辨率或尝试不同的显示分辨率的应用程序。

# objective-c - xcodebuild 存档配置不起作用

> ID：13528063
> 
> 赞同：1
> 
> 时间：2012-11-23T11:22:27.720
> 
> 标签：objective-c, ios, xcode, archive, xcodebuild

我想使用 xcodebuild 归档一个具有 3 种不同配置的方案，但配置永远不会随着归档操作而改变。

这是.sh中的内容

```
xcodebuild -workspace myApp.xcodeproj/project.xcworkspace -sdk iphoneos -scheme myApp -configuration Distribution clean archive

xcodebuild -workspace myApp.xcodeproj/project.xcworkspace -sdk iphoneos -scheme myApp -configuration Inhouse clean archive

xcodebuild -workspace myApp.xcodeproj/project.xcworkspace -sdk iphoneos -scheme myApp -configuration Release clean archive 
```

更新：构建动作工作正常

```
xcodebuild -workspace myApp.xcodeproj/project.xcworkspace -sdk iphoneos -scheme myApp -configuration Distribution clean build

xcodebuild -workspace myApp.xcodeproj/project.xcworkspace -sdk iphoneos -scheme myApp -configuration Inhouse clean build

xcodebuild -workspace myApp.xcodeproj/project.xcworkspace -sdk iphoneos -scheme myApp -configuration Release clean build 
```

我正在使用 Xcode4.5/iOS6.0，它适用于构建操作（每次运行 xcodebuild 时都会更改配置），有什么解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:27:55.393

存档动作的配置没有效果，可能是xcodebuild的一个bug。

为了更改存档的配置，我编写了一个shell脚本，每次运行存档命令之前更改方案的配置。

可能不是最好的解决方案，但解决问题。

这是代码：

```
#! /bin/sh

# Define Scheme name
PACKAGE_PROJECT_NAME="MyApp"
PACKAGE_SCHEME_NAME="MyApp"

# Get Username
PACKAGE_USER_NAME="$(whoami)"

# Scheme Path
PACKAGE_SCHEME_DIR="$SRCROOT/${PACKAGE_PROJECT_NAME}.xcodeproj/xcuserdata/${PACKAGE_USER_NAME}.xcuserdatad/xcschemes"
PACKAGE_SCHEME_PATH="${PACKAGE_SCHEME_DIR}/${PACKAGE_SCHEME_NAME}.xcscheme"

echo "PACKAGE_SCHEME_PATH = ${PACKAGE_SCHEME_PATH}"

# Set Configuration
# WARNING: BACKUP_CONFIGURATION MUST be same with build configuration of archive action in MyApp scheme
BACKUP_CONFIGURATION="Distribution"

# WARNING: Archive name of archive action in MyApp scheme MUST be set explicitly.
# WARNING: BACKUP_ARCHIVENAME MUST be same with archive name of archive action in MyApp scheme
BACKUP_ARCHIVENAME="MyAppArchive"

echo "BACKUP_CONFIGURATION = ${BACKUP_CONFIGURATION}"
echo "BACKUP_ARCHIVENAME = ${BACKUP_ARCHIVENAME}"

# -------------------------------Archive Distribution---------------------------------------
# Set Configuration
OLD_CONFIGURATION="${BACKUP_CONFIGURATION}"
NEW_CONFIGURATION="Distribution"
OLD_ARCHIVENAME="${BACKUP_ARCHIVENAME}"
NEW_ARCHIVENAME="${PACKAGE_SCHEME_NAME}_${NEW_CONFIGURATION}"

# Clean
xcodebuild -workspace ${PACKAGE_PROJECT_NAME}.xcodeproj/project.xcworkspace -sdk iphoneos -scheme ${PACKAGE_SCHEME_NAME} -configuration ${NEW_CONFIGURATION} clean

# Change archive configuration
sed -i .bak "/<ArchiveAction/,/<\/ArchiveAction>/{s/\"${OLD_CONFIGURATION}\"/\"${NEW_CONFIGURATION}\"/;s/\"${OLD_ARCHIVENAME}\"/\"${NEW_ARCHIVENAME}\"/;}" ${PACKAGE_SCHEME_PATH}

# Archive
xcodebuild -workspace ${PACKAGE_PROJECT_NAME}.xcodeproj/project.xcworkspace -sdk iphoneos -scheme ${PACKAGE_SCHEME_NAME} archive

# -------------------------------Archive Inhouse------------------------------------------
# Set Configuration
OLD_CONFIGURATION="${NEW_CONFIGURATION}"
NEW_CONFIGURATION="Inhouse"
OLD_ARCHIVENAME="${NEW_ARCHIVENAME}"
NEW_ARCHIVENAME="${PACKAGE_SCHEME_NAME}_${NEW_CONFIGURATION}"

# Clean
xcodebuild -workspace ${PACKAGE_PROJECT_NAME}.xcodeproj/project.xcworkspace -sdk iphoneos -scheme ${PACKAGE_SCHEME_NAME} -configuration ${NEW_CONFIGURATION} clean

# Change archive configuration
sed -i .bak "/<ArchiveAction/,/<\/ArchiveAction>/{s/\"${OLD_CONFIGURATION}\"/\"${NEW_CONFIGURATION}\"/;s/\"${OLD_ARCHIVENAME}\"/\"${NEW_ARCHIVENAME}\"/;}" ${PACKAGE_SCHEME_PATH}

# Archive
xcodebuild -workspace ${PACKAGE_PROJECT_NAME}.xcodeproj/project.xcworkspace -sdk iphoneos -scheme ${PACKAGE_SCHEME_NAME} archive

# -------------------------------Archive Adhoc-------------------------------------------
# Set Configuration
OLD_CONFIGURATION="${NEW_CONFIGURATION}"
NEW_CONFIGURATION="Release"
OLD_ARCHIVENAME="${NEW_ARCHIVENAME}"
NEW_ARCHIVENAME="${PACKAGE_SCHEME_NAME}_${NEW_CONFIGURATION}"

# Clean
xcodebuild -workspace ${PACKAGE_PROJECT_NAME}.xcodeproj/project.xcworkspace -sdk iphoneos -scheme ${PACKAGE_SCHEME_NAME} -configuration ${NEW_CONFIGURATION} clean

# Change archive configuration
sed -i .bak "/<ArchiveAction/,/<\/ArchiveAction>/{s/\"${OLD_CONFIGURATION}\"/\"${NEW_CONFIGURATION}\"/;s/\"${OLD_ARCHIVENAME}\"/\"${NEW_ARCHIVENAME}\"/;}" ${PACKAGE_SCHEME_PATH}

# Archive
xcodebuild -workspace ${PACKAGE_PROJECT_NAME}.xcodeproj/project.xcworkspace -sdk iphoneos -scheme ${PACKAGE_SCHEME_NAME} archive

# ------------------------------Restore Configuration-------------------------------------
sed -i .bak "/<ArchiveAction/,/<\/ArchiveAction>/{s/\"${NEW_CONFIGURATION}\"/\"${BACKUP_CONFIGURATION}\"/;s/\"${NEW_ARCHIVENAME}\"/\"${BACKUP_ARCHIVENAME}\"/;}" ${PACKAGE_SCHEME_PATH} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:53:51.087

使用该`--scheme`选项时，配置会被方案本身中的设置覆盖。您将需要创建 3 个不同的方案并配置每个方案以对存档操作使用适当的配置：

![在此处输入图像描述](../Images/f9af076edba63ac118ddf22fe1c5c852.png)

或者，您根本不用担心方案，而直接在命令行上使用`--target`and`--configuration`开关。

# php - PHP 发送的 ZIP 存档已损坏

> ID：13528067
> 
> 赞同：4
> 
> 时间：2012-11-23T11:22:42.027
> 
> 标签：php, zip

我正在使用 php ZipArchive 即时创建一个 zip 文件并将其发送回用户。我将压缩文件临时存储在文档根目录上方的文件夹中，然后将其与代码一起发回

```
header('Content-type:application/zip');
header('Content-Disposition: inline; filename="'.("file.zip").'"');
header("Content-Transfer-Encoding: binary");
header("Content-Length:".filesize($file));
$fh = fopen($file,'rb');
fpassthru($fh); 
```

在首次发布后

```
$zip->close() 
```

以确保文件未打开。我遇到的问题是 - 存储的 zip 文件是一个有效的存档，我可以在 Windows 7、7Zip、WinZIP 等中打开它。但是，当我使用上面的代码发送文件时，它最终会得到一个 0xD 0xA 对在文件的开头，这足以使其损坏。我无法弄清楚这些角色可能来自哪里。这是 fopen/fpassthru 的已知错误吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-23T11:34:18.437

我发现删除`header("Content-Length:".filesize($file));`线时它解决了我同样的问题......

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-26T13:34:03.527

在多次尝试下载 zip 文件后，解决方案是：

```
$result = create_zip($files_to_zip,$fileZip,true,$path_parts['dirname']);
ob_clean();
ob_end_flush(); // more important function - (without - error corrupted 
zip)
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header('Content-Type: application/zip;\n');
header("Content-Transfer-Encoding: Binary");
header("Content-Disposition: attachment; filename=\"".basename($fileZip)."\"");
readfile($fileZip);
unlink($fileZip);
exit(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T11:24:47.450

你的完整剧本是什么样的？

一般来说，您应该删除脚本文件末尾的所有关闭 PHP 标记，因为它可能是来自脚本末尾的输出，或者包含的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-04T13:14:45.593

谢谢[@_on](https://stackoverflow.com/users/1823780/on)！你帮我提供了这些信息。但我没有删除`header ("Content-Length:". Filesize ($ file)) ;`，而是插入了一个换行符“\\n”，留下：

```
header ("Content-Length:". filesize ($ file). "\\n"); 
```

并且文件生成了它的大小以帮助下载 好的。Tks

# php - YII 在 REST GET 请求中获取请求正文

> ID：13528068
> 
> 赞同：3
> 
> 时间：2012-11-23T11:22:43.390
> 
> 标签：php, rest, yii

我正在 Yii 1.1.10 中制作一个 RESTful API。在`POST`请求中，我可以使用从请求正文中获取参数

```
$GLOBALS['HTTP_RAW_POST_DATA']; 
```

虽然它可能不是 Yii 中的理想解决方案。但我无法在`GET`REST 请求中获取正文参数。我知道对于 REST 中的 GET，应该在 URL 中发送参数，但我想从正文中获取编码数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:13:06.003

在 Yii 中有一个非常有用的类 ChttpRequest，你应该检查[CHttpRequest->getRawBody()](http://www.yiiframework.com/doc/api/1.1/CHttpRequest#getRawBody-detail)

编辑：在应用程序中实际使用它：**Yii::app()->request->getRawBody()**

# c# - 可以为空 .GetHashCode() 一个糟糕的哈希码函数？

> ID：13528070
> 
> 赞同：7
> 
> 时间：2012-11-23T11:22:50.440
> 
> 标签：c#, .net, hashcode

的实现`Nullable<T>.GetHashCode()`如下：

```
public override int GetHashCode()
{
    if (!this.HasValue)
    {
        return 0;
    }
    return this.value.GetHashCode();
} 
```

然而，如果基础值也生成 0 的哈希码（例如，设置为 false 的 bool 或设置为 0 的 int32），那么我们有两个常见的具有相同哈希码的不同对象状态。在我看来，更好的实现应该是这样的。

```
public override int GetHashCode()
{
    if (!this.HasValue)
    {
        return 0xD523648A; // E.g. some arbitrary 32 bit int with a good mix of set and 
                           // unset bits (also probably a prime number).
    }
    return this.value.GetHashCode();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:19:39.710

是的，你说得有道理。如果您事先知道要存储哪些数据，则始终可以编写更好的 GetHashCode() 实现。这不是图书馆作家曾经拥有的奢侈品。但是，是的，如果你有很多布尔值？要么是 false 要么 !HasValue 那么默认实现会受到伤害。枚举和整数也一样，零是一个常见的值。

但是，您的论点是学术性的，更改实施成本减去一万分，您不能自己做。最好的办法是提交建议，正确的渠道是[用户语音网站](http://visualstudio.uservoice.com/forums/121579-visual-studio)。在这方面获得牵引力将是困难的，祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:45:32.017

我们首先要注意，这个问题只是关于性能。为了正确性，哈希码不需要是唯一的或抗冲突的。虽然它对性能很有帮助。

实际上，这是哈希表的主要价值主张：实际上均匀分布的哈希码导致 O(1) 行为。

那么，什么哈希码常数最有可能在实际应用中产生最佳性能配置文件？

当然不是`0`因为`0`是常见的哈希码：`0.GetHashCode() == 0`. 这也适用于其他类型。`0`是*最差*的候选人，因为它往往会经常发生。

那么如何避免碰撞呢？我的建议：

```
static readonly int nullableDefaultHashCode = GetRandomInt32();
public override int GetHashCode()
{
    if (!this.HasValue)
        return nullableDefaultHashCode;
    else
        return this.value.GetHashCode();
} 
```

均匀分布，不太可能发生冲突，并且没有选择任意常数的风格问题。

请注意，这`GetRandomInt32` *可以*实现为`return 0xD523648A;`. 它仍然比`return 0;`. 但最好查询廉价的伪随机数来源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:40:47.133

最后，`Nullable<T>`没有值的 a 必须返回一个哈希码，并且该哈希码应该是一个常量。

返回一个任意常量可能看起来更安全或更合适，在特定情况下查看时可能更安全`Nullable<int>`，但最终它只是：一个哈希。

在可以覆盖的整个集合中`Nullable<T>`（无限），零并不是比任何其他值更好的哈希码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:17:22.503

我不明白这里的担忧 - 在什么情况下表现不佳？

为什么你会认为散列函数基于一个值的结果很差。

*我可以看到，如果 Type 的许多不同*值散列到相同的结果，那将是一个问题。但是 null 哈希值与 0 相同的事实似乎微不足道。

据我所知，.NET 哈希函数最常见的用途是用于 Hashtable、HashSet 或 Dictionary 键，而零和 null 恰好在同一个存储桶中这一事实对整体性能影响不大。

# oracle - 想要在 Oracle 中生成如下所示的 o/p

> ID：13528071
> 
> 赞同：4
> 
> 时间：2012-11-23T11:22:51.963
> 
> 标签：oracle, oracle11g

我需要一个如下所示的o/p。

```
1,1
2,1
2,2
3,1
3,2
3,3
4,1
4,2
4,3
4,4
... and so on. 
```

我尝试编写如下查询。但是抛出错误。单行子查询返回多行。

```
with test1 as(
SELECT LEVEL n
      FROM DUAL
CONNECT BY LEVEL <59)
select n,(
SELECT LEVEL n
      FROM DUAL
CONNECT BY LEVEL <n) from test1 
```

感谢您在解决相同问题方面的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:14:57.953

这是获得所需结果的方法之一：

```
SQL> with t1(col) as(
  2    select level
  3      from dual
  4     connect by level <= 5
  5  )
  6  select a.col
  7       , b.col
  8    from t1 a
  9    join t1 b
 10      on a.col >= b.col
 11  ;

       COL        COL
---------- ----------
         1          1
         2          1
         2          2
         3          1
         3          2
         3          3
         4          1
         4          2
         4          3
         4          4
         5          1
         5          2
         5          3
         5          4
         5          5

15 rows selected 
```

# android - 在相对布局中设置宽度比

> ID：13528072
> 
> 赞同：3
> 
> 时间：2012-11-23T11:23:00.153
> 
> 标签：android, xml, layout

我对 Android 布局很陌生。

我试图以 1:3:1 的比例设置 Age:EditText:Year，并且在高度上设置相同的大小。

我应该使用表格布局吗？如果是的话，当我在其他行中做一些事情时，如何防止 TableRow1 改变宽度等？

![在此处输入图像描述](../Images/3af3f93df2fe09008c75aca1f3411566.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relative_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
                          >

    <TextView
        android:id="@+id/txtAge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_alignBaseline="@+id/search_text"
        android:layout_alignBottom="@+id/search_text"
        android:layout_alignParentLeft="true"
        android:text="Age"
        android:layout_weight="0.3"
        android:textAppearance="?android:attr/textAppearanceLarge" />

 <TextView
        android:id="@+id/txtYears"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/search_text"
        android:layout_alignBottom="@+id/search_text"
        android:layout_alignParentRight="true"
        android:text="Years"
        android:layout_weight="0.3"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/search_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@id/txtYears"
        android:layout_toRightOf="@id/txtAge"
        android:ems="10"
        android:hint="Enter your age"
        android:inputType="text|number"
        android:lines="1"
        android:layout_weight="0.7"
        android:maxLength="2"
        android:maxLines="1" />

    <TextView
        android:id="@+id/txtHeight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignBaseline="@+id/enterHeight"
        android:layout_below="@+id/search_text"
        android:text="Height"
        android:textAppearance="?android:attr/textAppearanceLarge" 
        android:layout_weight="1"/>

    <Spinner
        android:id="@+id/spinHeight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/txtHeight"
        android:layout_weight="1" />

    <EditText
        android:id="@+id/enterHeight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/search_text"
        android:layout_toLeftOf="@+id/spinHeight"
        android:layout_toRightOf="@+id/txtHeight"
        android:ems="10"
        android:hint="Enter your height"
        android:inputType="text|number"
        android:lines="1"
        android:layout_weight="3"
        android:maxLength="3"
        android:maxLines="1" >

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:48:18.993

我想这就是你想要的。见下图。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20"
        android:gravity="center_vertical|center_horizontal"
        android:text="Age"
        android:textColor="#FFF"
        android:textSize="16sp"
        android:textStyle="bold" />

    <EditText
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="60" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20"
        android:gravity="center_vertical|center_horizontal"
        android:text="Years"
        android:textColor="#FFF"
        android:textSize="16sp"
        android:textStyle="bold" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20"
        android:gravity="center_vertical|center_horizontal"
        android:text="Height"
        android:textColor="#FFF"
        android:textSize="16sp"
        android:textStyle="bold" />

    <EditText
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="60" />

    <Spinner
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="20" />
</LinearLayout>

</LinearLayout> 
```

![在此处输入图像描述](../Images/455020ac01ec092e1fce34ae62b71256.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:43:54.430

我认为你应该使用线性布局。你可以设置`android:weightSum="10"`属性。

它的整体布局。现在您必须使用`android:layout_weight="2"`.

这样就可以控制布局中的对象。

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:layout_marginLeft="5dp"
    android:layout_weight="2"
    android:text="Age" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="6" >
</EditText>

<TextView
    android:id="@+id/textView1"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="5dp"
    android:layout_weight="2"
    android:text="Years" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:14:31.160

有这样的东西..伪代码未经测试..

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relative_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<LinearLayout
    android:gravity = "center_horizontal"
    android:id="@+id/firstLinearLayout"
    android:orientation = "horizontal"
    android:weightSum="10">

<TextView

        android:weight = "2"
        />

 <TextView

        android:weight = "6"
        />

    <EditText

        android:weight = "2"
        />
</LinearLayout>
<LinearLayout
    android:gravity = "center_horizontal"
    android:layout_below="@id/loginButtonLayout"
    android:orientation = "horizontal"
    android:weightSum="10">
</LinearLayout> 
```

# java - 上下文组件扫描未找到我的自定义注释 bean

> ID：13528073
> 
> 赞同：2
> 
> 时间：2012-11-23T11:23:07.177
> 
> 标签：java, spring, spring-mvc, annotations

您好，我正在尝试为 Spring MVC webapp 编写自定义注释。但是 Spring applicationContext 没有检测到带注释的类。这是我的相关代码。

**注释类：**

```
@Component
@MigrationRequired(migrateFrom="Tiff",migrateTo="PDF-A")
public class WordTemplate extends Template{

} 
```

**自定义注释定义：**

```
@Target({ ElementType.TYPE })
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface MigrationRequired {

    String migrateFrom() default "Tiff";
    String migrateTo() default "PDF-A";
} 
```

**用于检测 ContextLoading 上的注释的类**

```
public class MigrationHandler implements ApplicationContextAware, InitializingBean {

    private ApplicationContext applicationContext;

    @Override
    public void afterPropertiesSet() throws Exception {

        final Map<String, Object> myMaps = applicationContext.getBeansWithAnnotation(MigrationRequired.class);
        System.out.println("inside after properties set" + myMaps );//**Always giving an empty set**
        for (final Object myMap : myMaps.values()) {
            final Class<? extends Object> myClass = myMap .getClass();
            final MigrationRequired annotation = myClass .getAnnotation(MigrationRequired.class);
            System.out.println("Found myClass: " + myClass + ", with tags: " + annotation.migrateFrom());
        }
    }

    @Override
    public void setApplicationContext(final ApplicationContext applicationContext)
            throws BeansException {
        System.out.println("This is called");
        this.applicationContext = applicationContext;
    }
} 
```

`applicationContext.xml` **相关配置**

```
<bean id="migrationHandler" class="com.test.annotation.MigrationHandler"/>

<context:component-scan base-package="com.test" >
<context:include-filter type="annotation"expression="com.test.annotation.MigrationRequired"/>
</context:component-scan>
<!--Other beans definition--> 
```

所以在我的方法中，`MigrationHandler` `afterPropertiesSet()`我总是变得`myMaps`空虚。难道我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-08T05:44:24.027

MigrationHandler 是一个spring bean吗？如果是，为什么不自动装配 MigrationRequired。

# c# - .NET MVC 4 - 保持选定对象列表状态的最佳实践

> ID：13528075
> 
> 赞同：2
> 
> 时间：2012-11-23T11:23:09.843
> 
> 标签：c#, .net, asp.net-mvc

这应该很容易，但是没有 ViewState，我在这里毫无头绪（我知道 WebForms 太久了，我知道！）。

我的场景：

**看法**

```
 @foreach (var product in Model.Products)
{
    <tr>
       <td>@Html.ActionLink("Compare", "Compare", new { id = product.ProductId })</td>
    </tr>
} 
```

**控制器**

```
public ActionResult Compare(int id = 0)
{
        var product = SelectProduct(id); // selects the product from a list of cached products.

        if (product != null)
        {
           // _productDetails is a Model specifically for my View.
            _productDetails.ComparedProducts.Add(product);
        }

        return View("Index", _productDetails);
} 
```

显然，当您为每个项目单击“比较”时，它会添加到“比较产品”列表中。但是，由于没有 ViewState，这将在每次页面刷新时被清除并丢失最后一个产品。我希望产品保留在此 CompareProducts 列表中，但如何？

我猜它们需要附加到查询字符串中，所以 /Carousel/Compare/?id=2122,1221,1331,1333 等。如果是这样，这怎么可能？

提前致谢。

**更新**

如果我*确实*想走查询字符串路线，我该怎么做？

我试过了：

```
<td>@Html.ActionLink("Compare", "Compare", new { id = product.ProductId, compared = Model.ComparedProducts.Select(a => a.ProductId) })</td> 
```

但这带来了：

```
compared=System.Linq.Enumerable%2BWhereSelectListIterator`2[Product%2CSystem.Int32] 
```

我真的很期待。我想我会再做一个 ViewModel 属性，并简单地将比较 Id 存储在其中，以便在我的视图中没有太多业务逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:34:25.033

+1 表示您与网络表单的关系 :) 我认为从现在开始，您可以开始以其他方式保持状态，例如会话状态：http: [//msdn.microsoft.com/en-us/library/ ms178581(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178581(v=vs.100).aspx)

你在查询字符串上也是对的，毕竟，如果你想保持简单，最好使用最简单的方法，例如：

```
<url>?reference=123&compare=456 
```

例子

你需要第一个动作作为 HttpGet，现在这个作为 httpPOST

```
[HttpPost]
public ActionResult Compare(myModel model)
{

    var product = SelectProduct(model.reference); // selects the product from a list of cached products.

    if (product != null)
    {
       // _productDetails is a Model specifically for my View.
       // you can always update the model you got in the first place and send it back
        model.ComparedProducts.Add(product); //
    }
return View("Index", model); 
```

您的视图应根据空属性做出反应以显示

# php - 使用 WPeCommerce 插件 3.8.9.2 在自定义模板中显示变化下拉列表的问题

> ID：13528077
> 
> 赞同：4
> 
> 时间：2012-11-23T11:23:14.333
> 
> 标签：php, html, wordpress, wordpress-theming

我在自定义构建的模板中显示变体时遇到问题，每次我`wpsc_have_variation_groups()`在循环中调用 wpsc 函数时都会收到以下 php 错误

commerce/wpsc-includes/product-template.php 在第 1419 行 [22-Nov-2012 23:27:39] PHP 致命错误：调用`have_variation_groups()`/home/tofapost/public_html/sandbox/ 中非对象的成员函数wp/wp-content/plugins/wp-e-commerce/wpsc-includes/product-template.php 在第 1419 行。

`wpsc_have_variation_groups()`像这样在 WP_Query 循环中被调用；

```
$args = array('post_type' => 'wpsc-product', 'posts_per_page' => -1);
$loop = new WP_Query($args);
while ($loop->have_posts()) : $loop->the_post();

   ... 

<?php if (wpsc_have_variation_groups()) { ?>

<?php } ?> 

    ...

endwhile; 
```

奇怪的是其他 wpsc 函数，如 wpsc_the_product_id() 和 wpsc_product_has_stock() 工作，而没有与变化相关的函数......

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:18:21.343

这已经得到了回答。这个问题的问题是没有显示所有代码并且使用了错误类型的循环。列出产品。

使用的答案是手动获取变体，因为循环类型不允许使用 ID，因为没有需要获取的变体的标识符。为了能够使用当前代码，它需要使用不同的循环，或者更改它以便手动获得变化。在这种情况下，变化是手动获得的。

```
global $wpsc_variations;
$wpsc_variations = new wpsc_variations( get_the_ID() ); 
```

参考：[https ://wordpress.stackexchange.com/questions/73689/issue-displaying-variations-in-custom-template-using-wpec-3-8-9-2](https://wordpress.stackexchange.com/questions/73689/issue-displaying-variations-in-custom-template-using-wpec-3-8-9-2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T06:02:46.547

wpsc_the_product() 函数设置产品变体函数使用的全局 $wpsc_variations 对象。

我认为为了使用 wpsc_the_product()，您需要将查询设为全局 $wp_query，但您可以在打开循环后自行设置 $wpsc_variations：

```
while ($loop->have_posts()) : $loop->the_post();
    global $wpsc_variations;
    $wpsc_variations = new wpsc_variations( get_the_ID() ); 
```

这有望使所有产品变体功能正常工作。

***您可以参考以下位置：***

[https://wordpress.stackexchange.com/questions/73689/issue-displaying-variations-in-custom-template-using-wpec-3-8-9-2](https://wordpress.stackexchange.com/questions/73689/issue-displaying-variations-in-custom-template-using-wpec-3-8-9-2)

我认为这可以帮助您解决问题。

# ipad - ipad_Landscape_StartImage_problem

> ID：13528080
> 
> 赞同：0
> 
> 时间：2012-11-23T11:23:21.093
> 
> 标签：ipad, window, orientation, landscape, splash-screen

我的应用程序支持所有方向，但是当我从带有活动指示器的 Web 服务获取数据时，我在开始时放置了一个默认屏幕，它在纵向视图上显示良好（默认屏幕后跟我添加为子视图的图像窗口），但是当我在横向模式下启动应用程序时，会出现默认初始屏幕，但我在窗口上添加的图像不会旋转，它会像纵向一样添加。尝试了所有解决方案，例如使窗口和图像视图自动灵活，但它不起作用

请帮忙

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:35:02.900

当我们在窗口上添加图像时，我认为不可能进行旋转，所以我决定将它添加到视图中，并将图像的大小调整为启动屏幕的大小，这样就不会水平拉伸图像并且垂直。我认为这是最简单和最简单的方法。

# java - 如何使用 Commons FileUpload 设置用于存储文件上传的文件夹

> ID：13528081
> 
> 赞同：4
> 
> 时间：2012-11-23T11:23:22.763
> 
> 标签：java, servlets, file-upload, apache-commons-fileupload

如何设置在 TOMCAT 服务器上存储文件上传的位置？

我正在使用`commons.fileupload`，就目前而言，我可以将多个`.tmp`文件存储到，`catalina_base/temp`但是，我的目标是将上传的文件夹以其原始形式存储到`d:\\dev\\uploadservlet\\web\\uploads`

我知道这个问题含糊不清，但老实说，我使用 servlet 的时间很短，我还不了解大局，任何关于代码或教程链接的建议将不胜感激。

我处理上传的 servlet 代码如下：

```
package test;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.Iterator;
import java.util.List;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.oreilly.servlet.MultipartRequest;

import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileItemFactory;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;

public class TestServlet extends HttpServlet {

private static final long serialVersionUID = 1L;    
    public static final long MAX_UPLOAD_IN_MEGS = 5;

public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException {
    doPost(request, response);
}

public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException {
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();

            //This is the folder I want to use!!
            //String uploadFolder = "d:\\dev\\uploadservlet\\web\\uploads";

    boolean isMultipartContent = ServletFileUpload.isMultipartContent(request);
    if (!isMultipartContent) {
        out.println("Upload unsuccessful<br/>");
        return;
    }

    out.println("The following was uploaded:<br/>");

    FileItemFactory factory = new DiskFileItemFactory();     
    ServletFileUpload upload = new ServletFileUpload(factory);
    upload.setSizeMax(MAX_UPLOAD_IN_MEGS * 1024 * 1024);

    TestProgressListener testProgressListener = new TestProgressListener();
    upload.setProgressListener(testProgressListener);

    HttpSession session = request.getSession();
    session.setAttribute("testProgressListener", testProgressListener);

    try {
        List<FileItem> fields = upload.parseRequest(request);
        out.println("Number of fields: " + fields.size() + "<br/><br/>");
        Iterator<FileItem> it = fields.iterator();
        if (!it.hasNext()) {
            out.println("No fields found");
            return;
        }
        out.println("<table border=\"1\">");
        while (it.hasNext()) {
            out.println("<tr>");
            FileItem fileItem = it.next();
            boolean isFormField = fileItem.isFormField();
            if (isFormField) {
                out.println("<td>regular form field</td><td>FIELD NAME: " + fileItem.getFieldName() + 
                        "<br/>STRING: " + fileItem.getString()
                        );
                out.println("</td>");
            } else {
                out.println("<td>file form field</td><td>FIELDNAME: " + fileItem.getFieldName() +//                     <br/>STRING: " + fileItem.getString() +
                        "<br/>NAME: " + fileItem.getName() +
                        "<br/>CONTENT TYPE: " + fileItem.getContentType() +
                        "<br/>SIZE (BYTES): " + fileItem.getSize() +
                        "<br/>TO STRING: " + fileItem.toString()
                        );
                out.println("</td>");
            }
            out.println("</tr>");
        }
        out.println("</table>");
    } catch (FileUploadException e) {
        out.println("Error: " + e.getMessage());
        e.printStackTrace();
    }
}
} 
```

...它从这个 HTML 表单中获取信息：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Upload Page</title>

    <link rel="stylesheet" type="text/css" href="css/ui-lightness/jquery-ui-1.8.24.custom.css">
    <link rel="stylesheet" type="text/css" href="css/style.css"

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-ui.js"></script>
    <script type="text/javascript" src="uploadFunctions.js"></script>

</head>

<body>
    <div>
        <form name="uploadForm" id="uploadForm" action="test" method="post" enctype="multipart/form-data">
            <input type="hidden" name="hiddenfield1" value="ok">
            <h3>Files to upload:</h3>
            <input type="file" size="50" name="file1">
            <span id="file1Progress">-</span>
            <br/>
            <a href="javascript:previewFile(1)">Preview</a>
            <br/>
            <br/>

            <input type="file" size="50" name="file2">
            <span id="file2Progress">-</span>
            <br/>
            <a href="javascript:previewFile(2)">Preview</a>
            <br/>
            <br/>

            <input type="file" size="50" name="file3">
            <span id="file3Progress">-</span>
            <br/>
            <a href="javascript:previewFile(3)">Preview</a>
            <br/>
            <br/>

            <input type="file" size="50" name="file4">
            <span id="file4Progress">-</span>
            <br/>
            <a href="javascript:previewFile(4)">Preview</a>
            <br/>
            <br/>

            <input type="file" size="50" name="file5">
            <span id="file5Progress">-</span>
            <br/>
            <a href="javascript:previewFile(5)">Preview</a>
            <br/>
            <br/>
            <input type="button" value="Upload" id="submitButton" onclick="uploadForm.submit();doProgress();">
            <br/>
            <br/>
        </form>

        <div class="progBar">                
            File number: <span id="fileText">-</span> is being uploaded.<br/> 
            <br/>
            <progress id="progressBar" value="0" max="100"></progress><br/>
            Upload of all files is: <span id="progressText">-</span>% complete.<br/>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:32:50.087

你见过javadoc`DiskFileItemFactory`吗？有一种方法[`setRepository`](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/disk/DiskFileItemFactory.html#setRepository%28java.io.File%29) 需要`File`参数（将存储临时文件的文件夹）。

所以试试这个：

```
 FileItemFactory factory = 
       new DiskFileItemFactory(DiskFileItemFactory.DEFAULT_SIZE_THRESHOLD, 
                               new File("d:\\dev\\uploadservlet\\web\\uploads")); 
```

当您解析表单字段时，您可以将这些文件保存在任何您想要的地方。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:03:58.700

[只需按照 Apache Commons FileUpload's own users guide](http://commons.apache.org/fileupload/using.html)[`FileItem#write()`](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItem.html)中描述的常用方式将所需位置传递给方法。

`init()`首先在您的 servlet中初始化上传文件夹。

```
private File uploadFolder;

@Override
public void init() throws ServletException {
    uploadFolder = new File("D:\\dev\\uploadservlet\\web\\uploads");
} 
```

*（如有必要，您可以从环境变量或属性文件中获取此信息）*

然后从上传文件的文件名中提取基本名称和扩展名，并根据它生成一个唯一的文件名（你当然不希望以前上传的文件在其他人偶然上传同名文件时被覆盖，对？）：

```
String fileName = FilenameUtils.getName(fileItem.getName());
String fileNamePrefix = FilenameUtils.getBaseName(fileName) + "_";
String fileNameSuffix = "." + FilenameUtils.getExtension(fileName);
File file = File.createTempFile(fileNamePrefix, fileNameSuffix, uploadFolder);
fileItem.write(file);
System.out.println("File successfully saved as " + file.getAbsolutePath());
// ... 
```

*（请注意，这[`File#createTempFile()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String,%20java.io.File%29)并不一定意味着它是一个临时文件，它会在某个时候自动删除，不，在这种特殊情况下，它只是被用作一种工具，以便在给定文件夹）*

它[`FilenameUtils`](http://commons.apache.org/io/api-release/org/apache/commons/io/FilenameUtils.html)由您应该已经安装的 Apache Commons IO 提供，因为它是 Commons FileUpload 的依赖项。

* * *

请注意，您绝对不应[`DiskFileItemFactory`](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/disk/DiskFileItemFactory.html)按照其他答案的建议将其设置为构造函数的第二个参数。这表示，正如其 javadoc 中明确提到的，当上传文件超过阈值大小时（即，当它们变得太大而无法完全保存在服务器的内存中时）存储上传文件的临时磁盘文件系统位置。此位置绝对不打算作为上传文件的永久存储位置。Commons FileUpload 会定期自动清理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:32:40.860

您正在使用 FileUpload 来管理您的上传。所以在您的代码中，您只需定义一个文件并将数据写入其中。我将只复制相关部分并添加到其中：

```
if (isFormField) {
                out.println("<td>regular form field</td><td>FIELD NAME: " + fileItem.getFieldName() + 
                        "<br/>STRING: " + fileItem.getString()
                        );
                out.println("</td>");
            } else {

              //write the file
              String myPath= ..... 
              File f=new File(myPath);
              fileItem.write(f); 

                out.println("<td>file form field</td><td>FIELDNAME: " + fileItem.getFieldName() +//                     <br/>STRING: " + fileItem.getString() +
                        "<br/>NAME: " + fileItem.getName() +
                        "<br/>CONTENT TYPE: " + fileItem.getContentType() +
                        "<br/>SIZE (BYTES): " + fileItem.getSize() +
                        "<br/>TO STRING: " + fileItem.toString()
                        );
                out.println("</td>");
            } 
```

重要提示：确保您对写入文件的文件夹具有写入权限。

# ssl - 未定义对“SHA512@OPENSSL_0.9.8”的引用

> ID：13528091
> 
> 赞同：3
> 
> 时间：2012-11-23T11:24:08.650
> 
> 标签：ssl, ld

我正在尝试将我的代码与依赖于 libcrypto.so 的共享库（“libX.so”）链接起来。我安装了 libcrypto.so.1.0.0，但它似乎特别需要 libcrypto.so.0.9.8。有没有办法让它链接到 1.0.0？如果不破坏其他软件包，我无法在我的系统（archlinux）上安装 0.9.8。

```
/usr/bin/ld: warning: libcrypto.so.0.9.8, needed by /usr/local/lib/libX.so, not found (try using -rpath or -rpath-link)
/usr/local/lib/libX.so: undefined reference to `SHA512@OPENSSL_0.9.8'
... 
```

编辑：

我可能应该添加更多信息。我尝试编译 openssl 0.9.8 并安装到前缀 /usr/local。但是即使它似乎找到了这个库，但在构建时仍然存在错误：

```
/usr/local/lib/libX.so: undefined reference to `SHA512@OPENSSL_0.9.8'
... 
```

libcrypto 似乎确实定义了这一点：

```
$ nm /usr/local/ssl/lib/libcrypto.so.0.9.8 | grep SHA512
000000000006f9b0 T SHA512
... 
```

我正在使用以下脚本进行编译：

```
export LD_LIBRARY_PATH+=:/usr/local/ssl/lib
gcc -I/usr/local/include/ test.c -o test -lX 
```

这是 ldd 在 libX 上的输出：

```
$ ldd /usr/local/lib/libX.so              
/usr/local/lib/libX.so: /usr/local/ssl/lib/libcrypto.so.0.9.8: no version information available (required by /usr/local/lib/libX.so)
libssl.so.0.9.8 => /usr/local/ssl/lib/libssl.so.0.9.8 (0x00007f9c4e329000)
libcrypto.so.0.9.8 => /usr/local/ssl/lib/libcrypto.so.0.9.8 (0x00007f9c4df99000)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T09:00:49.650

参考[http://forums.gentoo.org/viewtopic-t-835256-start-0.html](http://forums.gentoo.org/viewtopic-t-835256-start-0.html)

`openssl-0.9.8l-sym-version-felixrabe.patch`对我来说工作得很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:48:44.800

因为最初的 OpenSSL 库是使用版本脚本构建的。这是一项功能，因此您可以拥有不同版本的库并仍然获得正确的符号。

您可以像这样添加自己的：

```
OPENSSL_0.9.8 {
 *;
}; 
```

然后与 --version-script 链接

要使 OpenSSL 执行此操作，您可能需要编辑 Makefile。

# jquery - jQuery ready() 直接调用，带有自定义参数

> ID：13528093
> 
> 赞同：0
> 
> 时间：2012-11-23T11:24:18.003
> 
> 标签：jquery, html, css

我使用了几个外部 JS 文件。每个文件都有这个：

```
$(document).ready(function()
{
    //
}); 
```

所以当页面加载时，他们可以自己初始化。但是这次我需要手动完成，传递一个参数（所以调用文档的ready（），带一个参数）怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:28:22.100

你不能。当 DOM 准备好时，浏览器会触发 Document ready，您不能自己触发它。

但是，您可以将代码放入准备就绪时调用的函数中，然后您可以在需要加载后随时调用它。像这样的东西：

```
$(function() {
    doSomething("foo"); // onload

    $("#myElement").click(function() { doSomething("bar") }); // onclick of element
});

function doSomething(text) {
    alert(text);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:26:50.097

你能试试这个吗？没有测试：P：

```
 var param = "hey";

    $(document).ready(function(param)
    {
        alert(param);
    }); 
```

或更好：

```
 var param = "hey";

        $(function(param)
        {
            alert(param);
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:46:59.103

```
var foo = function() { alert('!'); };

(function(d, f) {
    f();
})(document, foo); 
```

# javascript - Javascript将变量传递给事件函数

> ID：13528095
> 
> 赞同：0
> 
> 时间：2012-11-23T11:24:32.847
> 
> 标签：javascript

我无法将 i 的值传递给 scMotion 函数

```
for ( i = 0; i < tmp.length; i++ ) {
document.getElementById("sc"+i).onmousedown=function() { return scMotion(i,'up') };
} 
```

为了澄清这个问题，这个 for 循环正在做其他事情，向 dom 添加元素。

出于某种原因，即使 i 的编号为 39，在附加的函数中传递的 i 的值也是 i 的最终值，即 80。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T11:32:40.333

`i`这在您键入时起作用，因为和函数之间应该有一个闭包：

```
var i="4";
document.getElementById("sc"+i).onmousedown=function() {
    return scMotion(i,'up'); // <-- due to the created closure, the i here
                             //     refers to the i above.
}; 
```

但是，请记住这是一个闭包。所以也许下面的场景是什么让你绊倒：

```
var i="4";
document.getElementById("sc"+i).onmousedown=function() {
    return scMotion(i,'up'); // <-- due to the created closure, the i here
                             //     refers to the i above.
                             //     However, when the event happens in the
                             //     future the value of i in here will
                             //     be "5" due to the code below:
};
i = "5"; 
```

这是一个经典的循环闭包问题。请参阅此内容以了解发生了什么：[请解释在循环中使用 JavaScript 闭包](https://stackoverflow.com/questions/3572480/please-explain-the-use-of-javascript-closures-in-loops/3572616#3572616)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:44:43.823

尝试改用 addEventListener。您可以使用 id 将数字传递给您的函数。

```
for ( i = 0; i < tmp.length; i++ ) {

    var el = document.getElementById( "sc" + i );

    if ( el.addEventListener ) {

        el.addEventListener( 'mousedown', handleMouseDown ); 

    } else if ( el.attachEvent )  { // for IE8 and previous versions

        el.attachEvent( 'mousedown', handleMouseDown );

    }
}

function handleMouseDown( event ) {

    var num = event.target.id.replace( "sc", "" );
    scMotion( num, 'up' );
} 
```

# sql - 提供有关 Oracle SQL 的视图

> ID：13528097
> 
> 赞同：0
> 
> 时间：2012-11-23T11:24:35.327
> 
> 标签：sql, oracle

A) 每个抄表员在当月抄表的次数（这个视图应该可以随时使用，无需更改以适应日期）。

读数表

```
 Name            Null     Type         
--------------- -------- ------------ 
READINGID       NOT NULL VARCHAR2(4)  
READINGDATA              NUMBER(10)   
READINGDATE              DATE         
METERSERIALNO            VARCHAR2(10) 
EMPLOYEEID               VARCHAR2(10) 
LASTREADINGDATA          NUMBER(10) 
```

员工表

```
 Name                 Null     Type         
-------------------- -------- ------------ 
EMPLOYEEID           NOT NULL VARCHAR2(10) 
FIRSTNAME                     VARCHAR2(20) 
LASTNAME                      VARCHAR2(20) 
NUMBEROF_METERS_READ          NUMBER(10) 
```

**我的答案**

```
create or replace view ViewA as
  select E.EmployeeID as Employee, E.FirstName, E.Numberof_Meters_Read, R.ReadingDate
   from   Employee E
   join
   Readings   R
   on (R.EmployeeID = E.EmlpoyeeID); 
```

Oracle 显示“标识符无效”。需要帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:29:58.697

尝试将最后一行更改为：

```
 on (R.EmployeeID = E.EmployeeID) 
```

（即`E.EmployeeID`，不是`E.EmlpoyeeID`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:41:00.567

除了错字之外，您的意思是对员工有 NUMBEROF_METERS_READ 吗？因为那只能是总计，如果是这样，则不是每月总计（除非您有其他一些每月都会重置它的过程。

如果您只想通过查看读数来做到这一点..然后创建您的视图，如下所示：

```
select e.employeeid as employee, e.firstname, count(r.readingdate) numberof_meters_read
   from employee e left outer join readings r
                                on (r.employeeid = e.employeeid)
                               and r.readingdate >= trunc(sysdate, 'mm') 
                               and r.readingdate < add_months(trunc(sysdate, 'mm'), 1)
 group by e.employeeid, e.firstname; 
```

或（如果您希望未完成任何工作的员工显示为“0”）：

```
 select e.employeeid as employee, e.firstname, count(*) numberof_meters_read
   from employee e join readings r
                     on (r.employeeid = e.employeeid)
 where r.readingdate >= trunc(sysdate, 'mm')
   and r.readingdate < add_months(trunc(sysdate, 'mm'), 1)
 group by e.employeeid, e.firstname; 
```

# ruby-on-rails-3 - 在 rails 3 中存储一次性用户设置的最佳实践是什么？

> ID：13528102
> 
> 赞同：1
> 
> 时间：2012-11-23T11:24:48.357
> 
> 标签：ruby-on-rails-3, design-patterns

我正在努力寻找在 Rails 3 中存储一次性用户设置（增值税百分比、标语行。本质上是 1 的东西）的模式。我需要设置具有单个实例的全局站点设置。

理想情况下，我希望答案是设计模式，而不是 gem 或插件（除非有人知道将与 Active Admin 集成的 gem 或插件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:01:44.943

一次性设置是什么意思？您是指 API 密钥和环境变量之类的东西吗？

如果是这样，那么一个好的做法是使用 ENV 哈希，并在环境文件中设置 ENV 变量（如下所述）。

为需要在您的目录`.rb`中设置的每个单独的 gem（或任意实体）创建一个文件。`config/initializers/`例如，当使用条纹时，我创建了`config/initializers/stripe.rb`如下所示：

```
Rails.configuration.stripe = {
    :publishable_key => ENV['STRIPE_PUBLISHABLE_KEY'],
    :secret_key      => ENV['STRIPE_SECRET_KEY']
}

Stripe.api_key = Rails.configuration.stripe[:secret_key] 
```

这会在我的条带 gem 中设置初始设置，并从 ENV 哈希中提取变量值。

要在 ENV 哈希中设置变量，您可以在`config/environments`目录中进行。在该目录中，您将拥有三个不同的文件：`config/environments/test.rb`, `config/environments/development.rb`, `config/environments/production.rb`. 在 ENV 哈希中设置变量（如下所示）。

```
AppName::Application.configure do
  # Set Stripe API Key
  ENV['STRIPE_SECRET_KEY'] = "sk_test_key"
  ENV['STRIPE_PUBLISHABLE_KEY'] = "pk_test_key"

  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:46:42.050

一个用于存储键值对的类怎么样？

```
class Settings < ActiveRecord::Base

  attr_accessible :lookup, :value

  def self.VAT
    return self.find_by_lookup('VAT')
  end

end 
```

然后你可以做`@vat = Settings.VAT.value`或类似的事情。查找是您内部定义的键。当然，值列必须是所有相同的数据类型，但您可以在 getter 方法（或通过子类）中处理任何必要的转换。

# php - 用于开发、测试、生产环境的 VCS

> ID：13528104
> 
> 赞同：2
> 
> 时间：2012-11-23T11:25:07.980
> 
> 标签：php, git, svn, cvs, development-environment

我正在研究几个 VC 系统，想知道什么更适合我的需求。

现在，我有以下内容：

*   我的本地机器（Win7），我在其中使用 PhpStorm 使用 php 进行编码。
*   在我的内部网络中设置的 Debian Linux 机器。
*   Debian Linux 专用网络服务器。

理想情况下，我不想在这台机器上编写代码，将我在本地获得的任何机会推送到我的内部网络服务器（在那里我看到更改并对其进行测试），如果一切正常，将它们推送到网络服务器。

**您建议使用哪种 VC 系统：Git、SVN 或 CVS？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:37:45.420

*   与 SVN 相比，CVS 有点过时并且存在相当多的问题
*   SVN 没问题，但您需要设置自己的服务器，这对于单个开发人员环境来说意味着太多的努力
*   当你来自传统的 VC 时，Git 可能有点不寻常，因为它是一个分布式版本控制系统。但是一旦你习惯了它，你就会明白无论你是单独工作还是在一个大型的分布式团队中工作的优势。您无需设置任何服务器，甚至可以通过[DropBox](https://stackoverflow.com/questions/3632723/git-with-dropbox)与他人共享您的存储库。

所以我建议Git。[在此处](http://git-scm.com/documentation)查找文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:33:56.070

为时已晚，但我建议使用（或至少尝试）[Mercurial](https://www.mercurial-scm.org/)。

*   它由 PHPStorm[支持](http://www.jetbrains.com/phpstorm/webhelp/supported-version-control-systems.html)
*   作为第一个 SCM，它比 Git 更容易理解（也不是第一个）
*   它不是 Windows 世界中的“可怜的表弟”（[TortoiseHG](http://tortoisehg.bitbucket.io/)，如果在 PHPStorm 之外需要）
*   使用 MQ，它为配置管理提供了更简单的方法（因为 DEV 和 LIVE 系统的配置*可能不同*）
*   在 Mercurial 中共享（零星）回购（用于拉模式数据传递）是单个内部 Mercurial 命令的问题`hg serve`，因为 Git 情况要**糟糕**得多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:29:01.707

我使用[Aptana](http://www.aptana.com/)对网页进行编码。它在 ftp 浏览器中有一个非常好的构建，因此您可以查看和编辑所需的文件，当您点击 ctrl+s（保存文件）时，ftp 服务器上的文件将被更新。

因此，如果您在该内部服务器上有 FTP 服务器，我建议您使用 aptana。并使用任何 ftp 软件进行最终推送...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:36:26.877

我会推荐在 Windows 上工作的任何一个，我假设这是你最高兴开发的地方。

我知道 GIT (GitBash) 会这样做，因为我自己使用它，很确定 SVN 会这样做，并且有一个 CVS 版本可以这样做（Tortoise CVS？）

我还没有使用过 phpStorm（保持意义），但是正如另一个答案提到的 Aptana 我会指出 Aptana 已经内置了对 GIT 的支持

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T11:37:17.557

我没有看到任何问题 =)

可以推荐在本机环境上开发 在 deban Web 服务器上创建一些虚拟主机，例如 dev.host_name test.host_name

在debian服务器上制作共享文件夹（使用samba），在win 7上制作网络磁盘并连接到共享文件夹并使用文件夹开发和测试，就像在自己的计算机上一样

# c - 使用 malloc() 进行多个输入？

> ID：13528108
> 
> 赞同：0
> 
> 时间：2012-11-23T11:25:22.097
> 
> 标签：c, malloc, dynamic-arrays, calloc, dynamic-allocation

好吧，我知道`malloc`或者`calloc`可以用于动态分配，但是作为 CI 的新手，不知道如何使用我分配的用于输入多个输入的内存，例如 TC++ 示例，我们有这个代码

```
#include <stdio.h>
#include <string.h>
#include <alloc.h>
#include <process.h>

int main(void)
{
   char *str;

   /* allocate memory for string */
   if ((str = (char *) malloc(10)) == NULL)
   {
      printf("Not enough memory to allocate buffer\n");
      exit(1);  /* terminate program if out of memory */
   }

   /* copy "Hello" into string */
   strcpy(str, "Hello");
    /* display string */
    printf("String is %s\n", str);
    /* free memory */
   free(str);

   return 0;
} 
```

在这样的代码中，我们将 Hello 放置到我们现在分配的内存中，这应该会给我们留下 4 个更多的字符空间，我们应该如何向这些空间添加数据。

当用户被问及输入数量时，我想实现这个想法，他让他说 10 或 100，然后程序输入数据并存储它们并将该数据打印到屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:35:33.537

您正在寻找“指针算术”。
在您的示例中，您分配了 10 个字节的内存，并将第一个字节的地址存储在指针中`str`。
然后你将字符串复制`"hello"`到这个内存中，这样你就可以使用 4 个字节（因为`"hello"`5 个字节 + 1 个字节用于字符串终止字符`\0`）。
如果你想在剩下的 4 个字节中存储一些东西，你可以用指针算法计算内存地址。例如，如果您想从 访问第 6 个字节`str`，您可以使用`str+5`. 简单的。
因此，要扩展您的示例，您可以执行以下操作：

```
strcpy(str, "Hello");
strcpy(str+5, " man"); 
```

的输出`printf("String is %s\n", str);`将是`"Hello man"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:01:59.687

如果要附加到`malloc`ed 字符串，请使用[strcat](http://linux.die.net/man/3/strcat)

```
str = malloc(20);
...
/* copy "Hello" into string */
strcpy(str, "Hello");
strcat(str, ", world!");
/* display string */
printf("String is %s\n", str); /* will print 'Hello, world!' */ 
```

# java - 通过 OJDBC 向 Oracle 数据库进行批量插入的性能

> ID：13528111
> 
> 赞同：3
> 
> 时间：2012-11-23T11:25:37.077
> 
> 标签：java, performance, oracle, ojdbc

我有一个 Java 程序，用于在 Oracle 数据库中插入大量（750.000）条记录。我正在使用 OJDBC6 库和 OCI 客户端。要写入的表包含 330 列，其中 8 列出现在一个或多个索引中。

在尝试了两种方法之后，我仍然在为一些性能问题而苦苦挣扎。

1.  一次创建一个准备好的语句，为每条记录填充参数，然后执行该语句需要 1h29。
2.  一次创建准备好的语句，填充每条记录的参数，将它们添加到批处理中并每 500/1000/5000（我尝试了几个选项）执行批处理记录需要 0h27。

但是，当使用 Informatica PowerCenter 等 ETL 工具将相同的数据映射到相同的表时，只需几分钟。我知道达到这个时间可能是一厢情愿，但我怀疑是否无法获得任何性能。

有没有人知道这个行动的合理时间安排，以及如何实现？任何帮助表示赞赏，非常感谢提前！

（一个相关问题：我也将不得不更新很多记录。最有效的方法是什么：跟踪已更改的列并创建仅包含这些列的依赖于记录的准备语句；或始终更新所有列，从而重用相同的准备好的语句？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:55:59.263

您可以在 Java [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ThreadGroup.html上使用 ThreadGroup](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ThreadGroup.html)

;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:17:15.390

要尝试的另一件事是删除索引，插入数据，然后重新加载索引。不像Java那么容易，但足够简单。

# git - 重置为以前的提交 .git

> ID：13528113
> 
> 赞同：0
> 
> 时间：2012-11-23T11:25:40.140
> 
> 标签：git, github

刚刚拉了一个我想撤销的更改，回滚一个提交的最快方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:26:52.473

```
git reset --hard HEAD^ 
```

`HEAD^`表示“一个在头前”，因此等于`HEAD~1`并且意味着丢弃最近的提交，包括其所有更改。如果您只想销毁提交但保持文件更改，请删除该`--hard`开关。

如果您打算将更新的分支推送回包含您撤消的提交的远程，则最好不要使用`git-reset`它，因为它会修改历史记录。改为使用`git revert HEAD`。这会创建一个新的提交，它会还原给定提交的所有更改。

# android - ImageView 中 750 帧透明 PNG 动画，23fps

> ID：13528116
> 
> 赞同：0
> 
> 时间：2012-11-23T11:26:05.173
> 
> 标签：android, eclipse, animation, png, imageview

我有两个 ImageViews 设置为全屏 320 x 480 的 Activity。

我需要播放动画，但在用完 VM 之前，使用 AnimateDrawable 和 xml 数组播放的动画不能超过 50 个。

我正在尝试使用循环切换 PNG，这样我就可以在沿途的各个点做其他事情。例如在第 120、180 和 250 帧等处振动，并在第 400 帧播放另一个动画。

下面的代码有效，但 ImageView 需要 180 - 280 毫秒才能在模拟器上更新。所以我需要将 thread.sleep 设置为大于 280-300，否则我会开始丢失帧。我需要一种更快的方法来更新 imageview。有更快的小部件可用吗？

某些帧的图像不需要更改或为空白，因此当动画持续 746 帧时，我实际上只需要其中的 245 帧。所以我从drawables文件夹中删除了不变的或空白的框架，当找不到时代码会跳过它们。这已将所有图像的总大小减少到 9mb。

这是我的第一个 Android 应用程序，如果我没有以正确的方式进行操作，非常抱歉。我会就如何改进提出任何建议。:-)

谁能想到更好的方法来做到这一点？帮助！！（同样的逻辑在 iPhone 上运行良好）

**activity_main.xml**

```
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/background"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:scaleType="fitXY"
    android:src="@drawable/imgbackground"
    android:visibility="visible" />

<ImageView
    android:id="@+id/animLayer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:visibility="visible" />

</RelativeLayout> 
```

**MainActivity.java**

```
package com.test.pngloop

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.widget.ImageView;

public class MainActivity extends Activity {
    private static final String TAG = null;
    public int iFrameCount = 0;
    public ImageView myIV;
    public String myString;

    long startTime;
    long endTime;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
             //define the IV here so it's done only once
    myIV = (ImageView) findViewById(R.id.animLayer);
}

 @Override
 protected void onStart()
{
        super.onStart();
    Thread thr1 = new Thread(r1);
    thr1.start();
}

Runnable r1 = new Runnable() 
{
    public void run() 
    {
        while (iFrameCount< 747) 
        {
                  runOnUiThread(new Runnable() 
      {
          public void run() 
          {
              iFrameCount++;
        String image="image" + iFrameCount;
                    int resID = getResources().getIdentifier(image, "drawable", getPackageName()); 
              if (resID != 0)    //if there is no image/change for this frame skip it
              {
            myString="iFrameCount: " + iFrameCount;
            Log.d(TAG, myString);

                              //speed the same between setImageResource & setBackgroundResource
                  //myIV.setImageResource(resID);
                  //myIV.postInvalidate();

               startTime = System.currentTimeMillis();
                                 myIV.setBackgroundResource(resID);
                     endTime = System.currentTimeMillis();
                     System.out.println("setBackground took: " + (endTime - startTime) + " milliseconds");

              }
              else
              {  //we can skip frames 1-119, 209-251, 272-322, 416-472 & 554-745 (as no change from previous frame)
                myString="File skipped: " + iFrameCount;
                Log.d(TAG, myString);
              }

         }
     });

     try 
     {
         Thread.sleep(300);
     }
     catch (InterruptedException iex) {}

             }
          Log.d(TAG, "Finished playing all frames");     
         }
   }; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:55:05.093

通过将每个图像（在动画中使用）的大小减小到适合对象的最小垂直条带，我现在已经能够将帧速率提高到接近每秒 20 帧。

在阅读了有关使用 Spritesheets 进行游戏动画的文章后，我提出了这个想法，他们在其中移动单个图像并通过一个小窗口查看所需的帧。精灵不适合我的目的，太多的帧精灵表将是 135mb。

这些图像现在只有 480 x 150（每个 31-54KB 之间）而不是全屏。ImageView 高度设置为 fill_parent，ImageView 宽度设置为 wrap_content，因此它仍会自动缩放到不同的屏幕尺寸。

我发现现在文件要小得多，加载速度更快，现在接近可接受的动画帧速率。希望这对尝试同样事情的其他人有所帮助。

# c# - 如何检查asp文本框是否为空

> ID：13528117
> 
> 赞同：1
> 
> 时间：2012-11-23T11:26:09.883
> 
> 标签：c#, javascript, asp.net

> **可能重复：**
> [使用 javascript 的文本框空检查](https://stackoverflow.com/questions/3502354/textbox-empty-check-using-javascript)

我有一个 asp.net 按钮和一个 asp.net 文本框，当我单击按钮时，我想检查文本框是否为空，但不知道该怎么做，

```
<div>
    <asp:TextBox ID="txtEU" runat="server"></asp:TextBox>
</div>
<div>
    <asp:ImageButton ID="button" runat="server" OnClientClick="MyFunction(); return false;" ImageUrl="/myfolder/abc.png" />
</div> 
```

在我正在做的 JavaScript 中，

```
 <script type="text/javascript">
    function doWork() 
    {  
        if($input[] 
```

**不知道如何检查它是否为空，如果它是空的，那么我正在做某事，如果不是，那么它应该为该按钮调用一个代码隐藏方法。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T11:29:18.167

阅读[ClientIDMode 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)，了解如何在 ASP.NET（4.0 及更高版本）[中生成元素 ID](http://www.devcurry.com/2009/08/clientid-mode-in-aspnet-40.html)

```
function doWork() 
{  
     var textbox = document.getElementById('<%=txtEU.ClientID%>');

     if(textbox.value.length == 0)
     {

     }
} 
```

或者

```
if(textbox.value == "") 
```

使用验证器将帮助您处理一些开箱即用的验证。其中之一是[RequiredValidator](http://msdn.microsoft.com/en-US/library/5hbw267h%28v=vs.80%29.aspx)，它评估输入控件的值以确保用户输入值。

```
<asp:RequiredFieldValidator runat="server" ID="txtEURequiredValidator" ErrorMessage="EU should not be empty" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T11:29:37.737

如果您需要执行更复杂的场景，您可以使用 RequiredFieldValidator 或 CustomValidator。

我认为这是一个很好的起点：http: [//asp.net-tutorials.com/validation/introduction/](http://asp.net-tutorials.com/validation/introduction/) （查看右侧的链接以详细了解验证器）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:31:00.237

你可以这样做：

```
if ($('#<%= txtEU.ClientID %>').val()({
   // String is not empty
} 
```

*解释：*

*   因为默认情况下，asp.net 会破坏文本框的 html ID，所以您需要将名称注入到 jQuery 中。
*   在 jQuery 中，null 和 empty[都可以用 !](https://stackoverflow.com/questions/1812245/what-is-the-best-way-to-test-for-an-empty-string-with-jquery-out-of-the-box)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T11:37:07.030

```
 //javascript code
function Myfunction()
    {   
       if(document .getElementById("<%=txtEU.ClientID %>").value=="")
        {
            alert("Please Enter Text");
           txtEU.focus();
            return false;
        }

        return true;
    }
      //aspcode
 <asp:ImageButton ID="button" runat="server" OnClientClick="return Myfunction();" ImageUrl="/myfolder/abc.png" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T13:07:35.163

```
if ($('#<%= yourtextboxname.ClientID %>').val() =="")
  // String is not empty
} 
```

# mobile - 我们可以在移动网站上使用 Cufon-font 吗？

> ID：13528118
> 
> 赞同：0
> 
> 时间：2012-11-23T11:26:10.030
> 
> 标签：mobile, fonts, cufon

我们有一个带有 Cufon-font 的网站，它在除 IE 之外的所有浏览器中都能正常工作，因此，我们使用谷歌字体作为 IE css。我们现在打算使用相同的 Cufon 字体为其创建移动站点。我的问题是，将 Cufon-font 用于移动网站是否理想？它会导致任何性能问题吗？如果“是”有什么解决办法吗？

因为从研究中我发现了移动的一些瓶颈和积极的结果。例如

1.  Opera Mini 支持（在一定程度上）。

2.  iPhone擅长Cufon-font。

根据我的个人经验，我使用三星 Galaxy W 手机访问了当前的网站（使用 Cufon 字体），对于一些详细页面，加载需要 18 秒。在它完全加载页面之前，字体会正常显示。

有没有办法克服这些问题？

任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:31:09.583

在 IE 问题上，IE 10 支持自定义字体，这应该适合您，以前版本的 IE 不支持。至于加载时间，这完全取决于带宽、设备等。因此，如果您加载超过 3G 的数据，对于大文件来说会很慢。

# dialog - 多对话框处理

> ID：13528121
> 
> 赞同：0
> 
> 时间：2012-11-23T11:26:15.750
> 
> 标签：dialog, dispose, lwuit

在 lwuit 中，如何使用单个处理多个对话框？如果显示了 2 个对话框（一个在另一个之上）并且如果我处理第一个 Dialog 然后是 next dialog 。但我需要关闭（处置）两个对话框并显示表单。有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:51:34.037

你为什么不用同样的东西`Dialog`来证明呢？

我是说。显示第一个`Dialog`。在此之后，`Dialog`使用相同的对象显示下一个（干净`TextArea`的，，`Label`您用于在 中显示信息的所有内容`Dialog`）并放入新数据。之后关闭这个只有一个`Dialog`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:16:31.243

我也有同样的问题，因为我认为这是无意的行为。我将 parentForm 参数传递给对话框，然后我只使用 parentForm.showBack(); 在我调用 dialog.Dispose() 之后。但是您需要确保对话框或 parentForm 可见，以免在用户关闭并快速移动到另一个表单时覆盖不相关的屏幕。

```
currDialog.dispose();
if(currDialog.isVisible() || parent.isVisible())
         parent.showBack(); 
```

我想另一种解决方案可能是使用单例类进行对话调用。

# c++ - 在 Eclipse C++ 中无法识别受保护的成员

> ID：13528122
> 
> 赞同：0
> 
> 时间：2012-11-23T11:26:19.487
> 
> 标签：c++, eclipse, inheritance, protected

我有以下类，我尝试访问基类的受保护成员，但在 eclipse 中出现错误“无法解析字段分解”。有人可以向我解释我做错了什么吗？为什么我无法访问变量`mFactorized`？

**基类**

```
template <typename ValueType>
class AbstractDirectLinearSolver{
protected:
    bool mFactorized;
public:
    //Constructors, destructor
    AbstractDirectLinearSolver(){
        mFactorized = false;
    }

    virtual ~AbstractDirectLinearSolver();

    //Methods
    virtual void Solve(Vector<ValueType>& x, const Vector<ValueType>& b) const = 0;
    virtual void Factorize(AbstractMatrix<ValueType>& A) = 0;
}; 
```

**派生类**

```
#include "AbstractDirectLinearSolver.hpp"

template<typename ValueType>
class CholeskySolver: public AbstractDirectLinearSolver {
private:
    AbstractMatrix<ValueType> *mR; //Pointer = Abstract class NOT ALLOWS instantiation !!
public:
    CholeskySolver() {
        mR = NULL;
    }

    ~CholeskySolver() {
        if (this->mFactorized) {  //ERROR HERE
            delete mR;
        }
    }

    void Solve(const Vector<ValueType>& x, const Vector<ValueType>& b) {
        Vector<ValueType> y(mR->ApplyLowInv(b));
        x = mR->ApplyLowerTransponse(y);
    }

    void Factorize(AbstractMatrix<ValueType>& A) {
        if (mR != NULL)
            delete mR;
        mR = NULL;
        A.CholeskyFactorization(mR);
        this->mFactorized;           //ERROR HERE
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:44:32.880

您正在尝试从类模板而不是类继承。将类标题更改为：

```
template<typename ValueType>
class CholeskySolver: public AbstractDirectLinearSolver<ValueType>
                                                       ^^^^^^^^^^^ 
```

看起来编译器在抱怨`mFactorized`不是成员（因为它不知道基类）之后，但在抱怨基类说明符无效之前退出了。

如果您要注释掉有问题的行，那么您会得到一个稍微好一点（尽管仍然相当混乱）的错误：`expected class-name before ‘{’ token`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:30:00.380

```
if (this->Factorized) 
```

应该

```
if (this->mFactorized) 
```

第二个错误...

```
this->mFactorized;           //ERROR HERE 
```

除了它没有做任何事情之外......我认为应该没有问题。

# visual-c++ - c++线性公式简化库

> ID：13528124
> 
> 赞同：18
> 
> 时间：2012-11-23T11:26:37.733
> 
> 标签：visual-c++, boolean, expression, linear-algebra

可以简化如下公式的最好的（就使用和性能而言）C++/C++11 库是什么？

```
(a < 0 && b > 0) || (a < 0 && c > 0) || (a < 0 && c > 1) 
```

到（例如）

```
a < 0 && (b > 0 || c > 0) 
```

我认为解释一件事非常重要（因为我看到这个问题被误解了）。

**我不想简化 C/C++ 表达式——我知道，编译器可以做到。**

我正在制作一个图形处理工具。在图的边缘，有一些关于其顶点的条件（假设顶点是`a`, `b`，`c`这些条件类似于`a<b`等`b>0`- 请注意，这些条件不表示为“字符串”，它们可以是任何函数或图书馆调用）。在处理过程中，我将表达式收集在一起，在进一步的图形处理之前，我想简化它们。

**条件和表达式将在运行时创建。**

我希望能够向该库输入一些表达式，例如：

```
[...]
a = new Variable();
b = new Variable();
expr1 = lib.addExpr(a,0, lib.LESS);
expr2 = lib.addExpr(b,0, lib.MORE);
expr3 = lib.addExpr(expr1, expr2, lib.AND);
[...]
cout << lib.solve(exprn).getConditionsOf(a); 
```

当然这个库可能会有更多漂亮的 API。我把它写成方法调用只是为了展示我期望的底层机制——强调我不需要源代码编译器或者这个问题与源代码编译优化无关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T09:26:36.537

您正在寻找可以处理布尔逻辑的 C++ 符号数学库。

以下是一些可以开始的：

*   [SymbolicC++](http://en.wikipedia.org/wiki/SymbolicC++)：强大的通用 C++ 符号数学库，但不是专门用于布尔数学。
*   [BoolStuff](http://perso.b2b2c.ca/sarrazip/dev/boolstuff.html)：不是一个通用的符号数学库，非常专注于布尔逻辑，但可能正是你想要的。
*   [Logic Friday](http://sontrak.com/screenshots.html)：独立的数字电路分析工具和布尔逻辑简化器，带有 C API。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T23:02:04.340

# 建议的程序

代替专用库，我建议的解决问题的过程如下：

1.  为未简化的布尔表达式生成真值表。
2.  识别单变量比较表达式暗示同一变量的其他比较表达式的情况。如果您的用例具有完全代表性，这应该很简单。
3.  对于输入值违反含义的条目，将真值表输出标记为“不关心”（DNC）。
4.  使用真值表作为支持真值表和 DNC 的布尔表达式简化器的输入。正如 Mahmoud Al-Qudsi 建议的那样，Logic Friday 是一个很好的候选者，这就是我在下面的示例中使用的。

# 解释

假设您给定的用例完全代表问题空间，那么您可以使用任何支持真值表输入和“不关心”（DNC）函数输出规范的布尔表达式简化器。DNC 之所以重要，是因为您的一些单变量比较表达式可以暗示同一变量的其他比较表达式。考虑以下单变量比较表达式到布尔变量映射：

```
A = (a < 0); B = (b > 0); C = (c > 0); D = (c > 1); 
```

D 暗示 C 或等价（不是 D 或 C）总是正确的。因此，在考虑示例表达式的输入时（替换我们新定义的布尔变量）

```
Output = (A && B) || (A && C) || (A && D) 
```

当（不是 D 或 C）为假时，我们不关心这个表达式的输入或这个表达式的输出，因为它永远不会发生。我们可以通过为上述表达式生成真值表来利用这一事实，并在（不是 D 或 C）为假的情况下将所需的输出标记为 DNC。从该真值表中，您可以使用布尔表达式简化器来生成简化的表达式。

# 例子

假设单变量比较表达式到上面给出的布尔变量映射，让我们将该过程应用于您的示例。特别是，我们有

```
Output = (A && B) || (A && C) || (A && D) 
```

映射到下面的真值表 I。但是，从您的示例中，我们知道（不是 D 或 C）总是正确的；因此，我们可以将（D 而不是 C）的所有输出标记为 DNC，从而得出下面的真值表 II。

```
Truth Table I               Truth Table II
=============               ==============
A  B  C  D  Output          A  B  C  D  Output
0  0  0  0    0             0  0  0  0    0
0  0  0  1    0             0  0  0  1   DNC
0  0  1  0    0             0  0  1  0    0
0  0  1  1    0             0  0  1  1    0
0  1  0  0    0             0  1  0  0    0
0  1  0  1    0             0  1  0  1   DNC
0  1  1  0    0             0  1  1  0    0
0  1  1  1    0             0  1  1  1    0
1  0  0  0    0             1  0  0  0    0
1  0  0  1    1             1  0  0  1   DNC
1  0  1  0    1             1  0  1  0    1
1  0  1  1    1             1  0  1  1    1
1  1  0  0    1             1  1  0  0    1
1  1  0  1    1             1  1  0  1   DNC
1  1  1  0    1             1  1  1  0    1
1  1  1  1    1             1  1  1  1    1 
```

将真值表 II 插入 Logic Friday 并使用其求解器产生最小化 (CNF) 表达式：

```
A && (B || C) 
```

或者等效地，从布尔变量映射回来，

```
a < 0 && (b > 0 || c > 0). 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-17T07:20:08.170

如果您首先生成真值表（相当简单），这将简化为[电路最小化问题，](http://en.wikipedia.org/wiki/Circuit_minimization)该问题已得到充分研究。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-22T20:31:30.700

我建议你建立一个决策树。

您的每个条件都将数字空间分为两部分。例如`c > 1`将空间划分为`(-Infinity, 1]`和`[1, +Infinity)`部分。如果您有另一个条件，`c`例如，`c>0`那么您有额外的分割点`0`，最后您得到 3 个部分`(-Infinity, 0]`：`[0,1]`和`[1, +Infinity)`.

因此，每个树级别都将包含适当的分支：

```
c<0
   b<0
      a<0
      a>0  
   b>0
      a<0
      a>0  
0<c<1
   b<0
      a<0
      a>0  
   b>0
      a<0
      a>0  
c>1
   b<0
      a<0
      a>0  
   b>0
      a<0
      a>0 
```

现在您应该只保留表达式中存在的路径。这将是您的优化。不确定它是否 100% 有效，但它在某种程度上是有效的。

在你的情况下，它将是

```
c<0
   b<0: false
   b>0
      a<0: true
      a>0: false  
0<c<1
   b<0
      a<0: true
      a>0: false  
   b>0
      a<0: true
      a>0: false  
c>1
   b<0
      a<0: true
      a>0: false  
   b>0
      a<0: true
      a>0: false 
```

为了改进优化，您可以将子树比较和联合等效子树合二为一

```
c<0
   b<0: false
   b>0
      a<0: true
      a>0: false  
c>0
   a<0: true
   a>0: false 
```

最后，当您收到您的值时，只需跟踪树并检查您的决定。如果您遇到死胡同（已删除路径），则结果为`false`. 否则，您将跟踪退出，结果将是`true`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-23T11:35:03.347

您可能能够从 BDD 库中获得所需的内容。BDD 最后并没有给你一个 C++ 表达式，但它们给你一个图表，你可以从中构造一个 C++ 表达式。

我从未使用过它，但我听说 minibdd 很容易使用。见[http://www.cprover.org/miniBDD/](http://www.cprover.org/miniBDD/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-16T22:41:01.110

简化该表达式的最佳工具是编译器的优化器。

据我所知，没有 c++ 库会为您重写这样的表达式（尽管在技术上可以使用表达式模板编写一个）。

我建议查看您的编译器生成的经过高度优化的汇编代码。它可能会给你一个提示。另一种选择由静态分析工具提供。

# .net - 如何在 WriteableBitmapEx GetColor WP7 中捕捉颜色错误

> ID：13528130
> 
> 赞同：1
> 
> 时间：2012-11-23T11:27:06.953
> 
> 标签：.net, vb.net, windows-phone-7, writeablebitmap

我只是阅读了任何图像并且无法获得正确的颜色。

我尝试了几种格式的图像。请告知如何接收正确的颜色`WriteableBitmap.GetPixels()`

在下面的示例中，我只是`cloned the image`通过逐个像素读取源像素并将该像素放入同一位置的新可写位图。就像克隆一样。

![WriteableBitmap 故障](../Images/2c886d887180d491dc9d04caa99715bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:21:25.963

Writeablebitmap Ex 编译/可下载版本 1.0.2 存在故障（其他版本直到 V 1.0.5 未经测试）。通过使用[writeablebitmapex](http://writeablebitmapex.codeplex.com/SourceControl/changeset/view/95925)版本 1.0.5 的源代码，该方法可以正常工作。

![工作 writeablebitmapex](../Images/2a16e9c00fb51a1468901746cc9d0520.png)

# c - char数组在C中打印错误的值

> ID：13528131
> 
> 赞同：2
> 
> 时间：2012-11-23T11:27:09.820
> 
> 标签：c, arrays, char, printf

我现在被困在相同的代码上退出一段时间了。我正在尝试用从文本文件（ascii）中读取的字符填充 char 数组。但是由于某种原因，当我 printf char 数组时，它只显示字母 H。

代码：

```
void append(char c)
{
  //int len = strlen(cStr);
  cStr[iCounter] = c;
  cStr[iCounter + 1] = '\0';
  printf("char c:%c    char array%c\n",c,cStr);
} 
```

char 数组 (cStr) 在此函数之外声明，因为我需要从不同的函数访问它。iCounter 也是如此，它每次执行此函数时都会递增。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:28:48.947

`%c`您使用使用字符串说明符打印一个字符`%s`：

```
printf("char c:%c    char array%s\n",c,cStr); 
```

注意：`iCounter`实际上并没有增加：

```
 cStr[iCounter++] = c;
  cStr[iCounter] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:28:46.063

用于`%s`打印字符串。`%c`用于打印唯一字符。

从 printf[手册页](http://linux.die.net/man/3/printf)

> **C**
> 
> 如果不存在 l 修饰符，则将 int 参数转换为无符号字符，并写入结果字符。如果存在 l 修饰符，则通过调用 wcrtomb(3) 函数将 wint_t（宽字符）参数转换为多字节序列，转换状态从初始状态开始，并写入生成的多字节字符串。

# php - Ajax 请求和我的 Symfony 1.4 响应：内容不匹配

> ID：13528134
> 
> 赞同：5
> 
> 时间：2012-11-23T11:27:24.770
> 
> 标签：php, jquery, symfony-1.4

我在服务器端使用 jQuery 来处理我的 ajax 请求和 Symfony 1.4 PHP。

我的问题在标题中。

如何重现：

我有一个页脚（在我的所有页面中）来显示我的网站的推文，这些推文有一种“保持活力的呼吁”来每 7 秒获得最后一条推文。

```
function loadNotyTweets(tweetCount) {

    var jqXhr = $.ajax({
        'url':'<?php echo url_for(array('module' => 'footer', 'action' => 'getLastApiTweets')) ?>',
        'type':'GET',
        'async':true,
        'dataType':'json',
        'cache': false
    }).done(function (data, textStatus, jqXHR) {
        if (data != null) {
            var j = 0;
            for (var i in data) {
                var text = formatNoty(data[i]['text'], data[i]['user']['screen_name'], data[i]['user']['name'], data[i]['user']['profile_image_url_https'], data[i]['created_at']),
                    hashTweet = calcMD5(text);

                if (!$.cookie(hashTweet) || $.cookie(hashTweet) != 'close') {
                    // Display a noty containing my tweet
                    generateNoty(text);
                }
                j++;
                if (j == tweetCount) {
                    break;
                }
            }
        }
    });

} 
```

在服务器端：

```
function executeGetLastApiTweets(sfWebRequest $request) {
        if ($request->isXmlHttpRequest()) {

            // Get tweet using Twitter API
            $tweets = $this->getApiTweets($request);

            $lastTweet = '';
            if (isset($tweets[0]) && isset($tweets[0]['text'])) {
                $lastTweet = md5($tweets[0]['text']);
            }

            if ($this->isLastTweet($lastTweet)) {
                return $this->renderText(json_encode($this->getTweetsUI($tweets)));
            }

        }
        return sfView::NONE;
    } 
```

现在，当我在链接上单击我的网站时（就在我的 loadTweets() 调用之后），我得到了这个 Ajax 调用的响应，而不是我单击的链接的响应。

我不知道这里发生了什么...

信息：

我的 Apache deflate 压缩处于活动状态。我认为它可能来自于此。

有，我的 Apache Conf。

```
 # MOD_DEFLATE COMPRESSION
    SetOutputFilter DEFLATE
    AddOutputFilterByType DEFLATE text/html text/css text/plain text/xml application/x-javascript application/x-httpd-php
    BrowserMatch ^Mozilla/4 gzip-only-text/html
    BrowserMatch ^Mozilla/4\.0[678] no-gzip
    BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
    BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html
    SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip
    Header append Vary User-Agent env=!dont-vary

    # BEGIN Expire headers
    <IfModule mod_expires.c>
     ExpiresActive On
     ExpiresDefault "access plus 7200 seconds"
     ExpiresByType image/jpg "access plus 1 days"
     ExpiresByType image/jpeg "access plus 1 days"
     ExpiresByType image/png "access plus 1 days"
     ExpiresByType image/gif "access plus 1 days"
     AddType image/x-icon .ico
     ExpiresByType image/ico "access plus 7 days"
     ExpiresByType image/icon "access plus 7 days"
     ExpiresByType image/x-icon "access plus 7 days "
     ExpiresByType text/css "access plus 7 days"
     ExpiresByType text/javascript "access plus 7 days"
     ExpiresByType text/html "access plus 7200 seconds"
     ExpiresByType application/xhtml+xml "access plus 7200 seconds"
     ExpiresByType application/javascript "access plus 7 days"
     ExpiresByType application/x-javascript "access plus 7 days"
     ExpiresByType application/x-shockwave-flash "access plus 1 days"
    </IfModule>
    # END Expire headers
# BEGIN Cache-Control Headers
<IfModule mod_headers.c>
 <FilesMatch "\\.(ico|jpe?g|png|gif|swf|gz|ttf)$">
   Header set Cache-Control "max-age=86400, public"
 </FilesMatch>
 <FilesMatch "\\.(css)$">
   Header set Cache-Control "max-age=604800, public"
 </FilesMatch>
 <FilesMatch "\\.(js)$">
   Header set Cache-Control "max-age=604800, public"
 </FilesMatch>
 <filesMatch "\\.(html|htm)$">
   Header set Cache-Control "max-age=7200, public"
 </filesMatch>
 # Disable caching for scripts and other dynamic files
 <FilesMatch "\.(pl|php|cgi|spl|scgi|fcgi)$">
   Header unset Cache-Control
 </FilesMatch>
</IfModule>
# END Cache-Control Headers

# KILL THEM ETAGS
Header unset ETag
FileETag none 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:43:35.960

您将 ajax 变量声明为：

```
var jqXhr = $.ajax({ 
```

然后您将变量引用为：

```
}).done(function (data, textStatus, jqXHR) { 
```

如果我错了，请纠正我，javascript/jquery 变量区分大小写。

# geometry - Find the normal "N" on an ellipses through a point on a cross section

> ID：13528154
> 
> 赞同：4
> 
> 时间：2012-11-23T11:28:27.433
> 
> 标签：geometry, ellipse, normals

I'm trying to make a nice deflection effect in a little physics engine I've made. Right now it deflects nicely off the normal of a polygon edge. But instead of making a polygon with 100 edges to get a smooth effect of a "rounded deflection" I figured I could calculate the deflection normal using an ellipse instead.

So, what I'd really like is a function that takes a point *P* on a line segment and returns the normal *N* on the circumference of an imaginary *ellipse(w,h)*. See the attached picture for some details.

![A picture of the problem](../Images/418543e4ccd0b93088002d085f2453be.png)

To get a point on the circumference of an ellipse I'm pretty sure it's:

```
x=P.x+Math.sin()*w
y=P.y+Math.cos()*h 
```

but how can I get the normal from that?

* * *

[Here's a fiddle](http://jsfiddle.net/45eFT/5/) with an attempt to implement the answer by Dr BDO Adams.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T16:31:38.577

Equation of an ellipse point is

```
x=x_centre+a*cos(t)
y=y_centre+b*sin(t) 
```

For each point of ellipse you can find `t` as `atan2( (y-y_centre)/b , (x-x_centre)/a )`

When you know `t` tangent direction can be determined: `dx/dt,dy/dt`:

```
dx=-a*sin(t)
dy=b*cos(t) 
```

When you know tangent direction, just rotate it by 90 degrees and you have a normal:

```
nx=b*cos(t)
ny=a*sin(t) 
```

And to avoid calculating `t` we can combine it with the first two formulas:

```
nx=(x-x_centre)*b/a
ny=(y-y_centre)*a/b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:47:12.490

First Use the atan2 function to get the angle of at the normal, and get a vector from that

```
theta = atan2(2y/semiminorradius, x/semimajorradius)
ny = semiminorradius * sin(theta)
nx = semimajorradius * cos(theta) 
```

Do you need the normal vector to be normalised? (unit length) if so

```
r = sqrt(tx^2+ty^2)
nny = ny/r
nnx = nx/r 
```

As you drawn it the point is actually (ny,nx)

# html - 除非禁用渐变，否则背景不会在 IE9 中显示

> ID：13528161
> 
> 赞同：1
> 
> 时间：2012-11-23T11:28:52.877
> 
> 标签：html, internet-explorer-9, css

我有以下代码：

```
body{
  font-family : Arial, helvetica, verdana;
  background: url('../images/waves.png');
  background-position: 50% 0%;  
  background-repeat: no-repeat;
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#80848c', endColorstr='#ffffff',GradientType=0 ); /* IE6-9 */
} 
```

在 IE9 中的结果是渲染了渐变并且图像不显示。我已经阅读[了这个问题](https://stackoverflow.com/questions/10964561/background-image-not-showing-up-in-ie9)，并一直追到最后一封信。这个人能够解决他的问题，但我不知道我错过了什么。我所知道的是，如果我禁用渐变，它将显示（在开发模式下）该文档使用 html5 文档类型（如果这有帮助）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:54:10.263

您应该像这样在 startColorStr 处放置 2 个额外的数字：

```
startColorstr="#80848c88" 
```

它将完美地工作。

# 3d - three.js - 搅拌机立方体的相对面变得透明

> ID：13528162
> 
> 赞同：1
> 
> 时间：2012-11-23T11:28:59.047
> 
> 标签：3d, three.js, blender

我是three.js的新手。我遵循了使用 JSONLoader 将模型加载到 webGLRenderer 场景中的示例。在 Blender JS 导出器上构建的模型只是一个侧面有不同材料的立方体。我在每个动画场景中旋转立方体，但是当两个相对的面重叠时，材质混合是如此奇怪。正面变得透明，我只能看到背面。

我在这里搜索过，这是类似的问题，但是没有答案。 [https://stackoverflow.com/questions/8638850/three-js-z-sorting](https://stackoverflow.com/questions/8638850/three-js-z-sorting)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:12:53.890

出于某种原因，您的一个对象已经翻转了面，因此您可以应用负比例，因此它会像这样再次翻转它们[http://jsfiddle.net/AUjHn/1/](http://jsfiddle.net/AUjHn/1/)我替换`zmesh.scale.set( 100, 100, 100);`为`zmesh.scale.set( -100, -100, -100);`所以现在蓝色看起来不错，但您需要翻转红色如果要使用此修复程序，请拆分模型。但最好的方法是修复蓝色对象的面，为此您需要更改该对象的面中的顶点顺序[http://www.opengl.org/wiki/Face_Culling](http://www.opengl.org/wiki/Face_Culling)。

# c# - 显示和修改字典 > 使用数据网格

> ID：13528163
> 
> 赞同：0
> 
> 时间：2012-11-23T11:28:59.840
> 
> 标签：c#, wpf

我想将 a 显示`Dictionary<string, ObservableCollection<string>>`到 wpf 数据网格中。键是列，值是列的行，如下所示：

键1 键2

值 1 键 1 值 1 键 2

值 2 键 1 值 2 键 2

值 3 键 1 值 3 键 2

我希望能够显示、修改列和行的值，以便`Dictionary<string, ObservableCollection<string>>` 以一种简单的方式获得支持。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:30:57.913

您可以使用 a`Dictionary<string, ObservableCollection<string>>`并将字符串绑定到列标题，并将 the 绑定`ObservableCollection<string>>`到列。

# game-physics - 如果颜色值超过 1 怎么办？

> ID：13528167
> 
> 赞同：1
> 
> 时间：2012-11-23T11:29:06.840
> 
> 标签：game-physics, raytracing

我正在研究光线追踪器，当添加不同的颜色（如灯光、反射光和折射光）时，我得到的值高于 1，然后我需要进行钳位。但是夹紧可能不正确？也许我应该以其他方式处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:44:04.747

不，不，不，不要夹住。现实世界中没有最大光强度或辐射值。你认为究竟什么物理过程对应于限制光值？

钳位甚至应该发挥作用的唯一时间是，如果您将最终像素保存为非 HDR 图像格式（例如，8 位整数像素）或在监视器上显示。然后，您仍然应该考虑某种色调映射或平滑滚降来模拟胶片响应，而不是硬钳。但更好的做法是将图像保存为 HDR 格式（即浮点，例如 16 或 32 位浮点 OpenEXR 文件），并将色调映射（减少到有限的动态范围）留给显示程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:13:17.267

这不是错误，它是一种称为饱和度的效果，或者可能是过度曝光。它发生在胶片和数码相机中，也发生在你的眼睛里。问题很简单，您的感光器（对于眼睛，或数码相机中的 CCD，或胶片相机中的感光化合物）有太多的光能，以至于接收器已饱和至其最大输出值。换句话说，你可以继续向它注入更多的能量，但受体将无法输出任何更强的信号，所以它看起来还是一样的。因此，简单的解决方案是简单地将所有颜色值饱和为 1.0，这模仿了真实感光器中发生的情况。

当然，当这种情况发生在您的眼睛中时，您的瞳孔会收缩，因此不会有太多的光线进入，并且当摄影师拍摄过度曝光的照片时，出于同样的原因，他们可能会减小光圈或曝光时间。您可以在渲染器中执行相同的操作，只需将每个像素的颜色值除以固定数量即可。这类似于收缩瞳孔或限制曝光时间以减少到达每个受体的光能。这样做之后，您仍然需要钳制任何大于 1 的值（或任何最大颜色值）。

当然，您可以使用双精度浮点存储非常大的数值颜色值，或者使用 BigInts 存储任意大的数值，例如。但迟早，您需要在“现实生活”中实际生成此图像：通过打印机，或在监视器上，或将其存储为标准图像格式，如 PNG。无论您使用何种机制，可以生成的输出值范围都是有限的，您需要将颜色调整到该范围内。您可以使用我描述的任何一种技术来执行此操作：您可以简单地钳制可用范围之外的任何内容，或者您​​可以按固定量缩放所有值，以便所有值都适合该范围。在前一种情况下，您会在图像中出现剪裁，这意味着您会在光线非常明亮的任何地方失去细节。在后一种情况下，如果颜色值已经接近在一起，您将体验到对比度的损失，因为缩小它们会使它们更接近。通常，您将希望应用这两种技术来限制这两个不同的问题。您可以尝试分析图像的统计数据并通过算法决定如何调整它，但我不确定那会是什么样子。另一种方法是通过反复试验手动调整它（可能使用较低质量的渲染，因此每次试验不会花费很长时间）。您可以尝试分析图像的统计数据并通过算法决定如何调整它，但我不确定那会是什么样子。另一种方法是通过反复试验手动调整它（可能使用较低质量的渲染，因此每次试验不会花费很长时间）。您可以尝试分析图像的统计数据并通过算法决定如何调整它，但我不确定那会是什么样子。另一种方法是通过反复试验手动调整它（可能使用较低质量的渲染，因此每次试验不会花费很长时间）。

# javascript - 链接中添加的服务器名前缀

> ID：13528169
> 
> 赞同：0
> 
> 时间：2012-11-23T11:29:11.557
> 
> 标签：javascript, jquery, .net

我注意到 .net/javascript 将“服务器名称”添加到所有动态 URL。

谷歌搜索结果在 URL 字符串之前添加`"http"`/ 。`"https"`但我不能那样做。由于它可以是日志文件的 URL，因此可以指向站点的其他一些页面。

这是我想要实现的目标：-

```
$("#someid").html("<a href='" + myURL + "' target='_blank' class='myclass'>" + myURL+ "</a>"); 
```

现在如果 myURL=`"\\\logfile\mylog.txt"`

那么我得到的链接是： -

```
"servername:8080/\\\logfile\mylog.txt" 
```

如何从中删除服务器名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:54:16.473

这行得通吗？

```
var host = location.host;
$("a").each(function() {

    $(this).href.replace( host, "" );

}); 
```

我从来没有真正使用过 jQuery，所以也许有些语法不正确，但你会明白吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:04:01.057

不要在 URL 中使用反斜杠 - 这是 Windows 唯一的事情，即使那样它也不起作用。Web 标准仅使用正斜杠。

如果您的服务器可以提供类似的 URL `http://domainname.com/appname/logfile/mylog.txt`，您可以使用这样的短 URL：

```
<a href="/appname/logfile/mylog.txt"> See mylog.txt </a> 
```

您还可以`/appname`使用相对 URL（不带前导）将相对于脚本位置的 URL 设为服务器（假设在 中`/appname`）：

```
<a href="logfile/mylog.txt"> See mylog.txt </a> 
```

# exception - 如何在 Oozie 中获取有关已终止工作的更具体的错误信息

> ID：13528172
> 
> 赞同：6
> 
> 时间：2012-11-23T11:29:12.473
> 
> 标签：exception, exception-handling, hadoop, mapreduce, oozie

我有一个 hadoop map-reduce 作业作为 Oozie 工作流程中的一个步骤运行。它是使用实现 org.apache.hadoop.util.Tool 的 java 动作开始的。

当作业因某种原因被终止时，如果在处理过程中出现异常，我希望能够通过电子邮件发送通知，该通知应包含堆栈跟踪。

目前我这样做：

```
<action name="sendErrorNotifications">
    <email xmlns="uri:oozie:email-action:0.1">
        <to>some-dl@company.com</to>
        <subject>Job execution failed ${wf:id()}</subject>
        <body>Job execution failed, error message: [${wf:errorMessage(wf:lastErrorNode())}]</body>
    </email>
    <ok to="fail" />
    <error to="fail" />
</action> 
```

但我收到的只是：

```
Job execution failed, error message: [Job failed!] 
```

这不是很有用:) 我需要自己去检查所有节点的日志。

如何获得更具体的消息？我应该捕获我的异常并包装到工具中的一些 oozie-catchable 中，还是只使用某些东西而不是 ${wf:errorMessage...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:39:43.220

一个建议是在您的 main 方法中捕获异常，并导出一个属性（例如“exceptionTrace”），并将异常序列化为其值（结合捕获输出标志），然后您可以使用`wf:actionData('myJavaAction')['exceptionTrace']`EL 函数对其进行引用。

[http://oozie.apache.org/docs/3.2.0-incubating/WorkflowFunctionalSpec.html#a3.2.7_Java_Action](http://oozie.apache.org/docs/3.2.0-incubating/WorkflowFunctionalSpec.html#a3.2.7_Java_Action)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:19:49.340

我找到了一种通过使用计数器来处理错误和访问原因的方法。也许这不是他们的设计目的，但这似乎是唯一的出路……

所以我像这样在 mapper 和 reducer 中捕获每个 Throwable：

```
} catch (Throwable t) {
    Counters.Counter counter = reporter.getCounter("Exceptions", t.getClass().getSimpleName());
        counter.increment(1);
    counter.setDisplayName(t.getClass().getSimpleName() + "\n last failed key: " + key.toString() + "\n " + ExceptionUtils.getStackTrace(t));
    reporter.incrCounter("Exceptions", "TOTAL_COUNT", 1);
    reporter.progress();
} 
```

作业完成后，可以通过 RunningJob 在工具中轻松访问这些计数器。“例外”组包含所有例外的计数器，显示名称字段中包含所有需要的信息。

Please comment if you see any problems in this approach or if you know the better one.

# c# - 对 Windows 窗体上的字段执行数据验证的最简单方法

> ID：13528175
> 
> 赞同：8
> 
> 时间：2012-11-23T11:29:23.173
> 
> 标签：c#, .net, winforms, validation, .net-3.5

我有一个 Windows 窗体项目，我想强制用户在按下底部的计算按钮之前在某些字段中输入值。这些字段包括三对**单选按钮**、五个**文本框**和一个**组合框**。所以基本上所有这些字段都需要包含一个值才能执行计算。此外，**文本框**应包含**数字**- 任何双精度值。此外，我想为大多数这些**文本框设置一个****最大值****用户不能超过。请让我知道实现这一目标的最简单方法是什么。我没有看到像 ASP.Net 中可用的 Winform 项目的字段验证控件。请注意，我正在使用 .net 3.5。目前，我正在使用消息框将其传达给用户，即每当用户按下计算时，我都会显示消息框，其中提及当前为空的必填字段的名称。**

 *** * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-27T12:34:07.580

我遇到了和你一样的情况，我找到了一个简单的解决方案，或者你可以说这个简单的解决方案可用于 WinForms。WinForms 包含一个控件[`ErrorProvider`](https://docs.microsoft.com/en-us/dotnet/framework/winforms/controls/errorprovider-component-windows-forms)，可以帮助我们在必填字段上显示错误。

[如何：显示表单验证的错误图标](https://docs.microsoft.com/en-us/dotnet/framework/winforms/controls/display-error-icons-for-form-validation-with-wf-errorprovider)提供了简短的介绍。

`ErrorProvider`可以按照您想要的方式使用，例如，对于文本框，您可以在`TextChanged`事件处理程序或任何其他让我们说按钮的事件中使用它，如下所示：

```
if (!int.TryParse(strNumber, out result))
{
    errorProvider.SetError(tbNumber, "Only Integers are allowed");
}
else
{
    errorProvider.Clear();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T13:12:38.763

你可以试试这个：

```
private void Calculate_button_Click(object sender, EventArgs e)
{
    RadioButton[] newRadioButtons = { radiobutton1, radiobutton2, radiobutton3 };
    for (int inti = 0; inti < newRadioButtons.Length; inti++)
    {
        if (newRadioButton[inti].Checked == false)
        {
            MessageBox.Show("Please check the radio button");
            newRadioButtons[inti].Focus();
            return;
        }
    }
    TextBox[] newTextBox = { txtbox1, txtbox2, txtbox3, txtbox4, txtbox5 };
    for (int inti = 0; inti < newRadioButtons.Length; inti++)
    {
        if (newTextBox[inti].text == string.Empty)
        {
            MessageBox.Show("Please fill the text box");
            newTextBox[inti].Focus();
            return;
        }
    }
} 
```

您可以遍历控件并查找它们是否已填充，如果未填充，它将显示在消息框中，并且特定控件将被聚焦。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T12:08:18.407

我想实现所有自定义验证的最简单方法是在按钮单击事件中设置一组 if 条件。

```
private void Calculate_button_Click(object sender, EventArgs e)
{
    if(textBox1.Text == string.Empty)
    {
        MessageBox.Show("Please enter a value to textBox1!");
        return;
    }
    else if(!radioButton1.Checked && !radioButton2.Checked)
    {
        MessageBox.Show("Please check one radio button!");
        return;
    }
    else if(comboBox1.SelectedIndex == -1)
    {
        MessageBox.Show("Please select a value from comboBox!");
        return;
    }
    else
    {
        // Program logic...
    }
} 
```

以同样的方式，您也可以检查范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:53:44.317

尝试使用控件的验证事件并在其中编写所需的任何验证。

这是一个示例，它使用一些 ValidateEmail 函数来检查文本是否是电子邮件地址，如果不匹配则将背景设置为某种（红色？）颜色，并且在匹配之前不允许用户离开控制权。

```
Private Sub VoucherEmail_Validating(ByVal sender As System.Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles Textbox.Validating
    If Not ValidateEmail(sender.Text) Then
        sender.backcolour = Validation.ErrorBackgrounColor
        e.Cancel = True
    End If
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-14T09:28:23.213

我知道这是一个旧线程。

但我认为它值得回答。

在计算按钮单击功能中添加

```
if(!this.ValidateChildren())
            {
                return;
            } 
```

并将验证功能添加到您的

# 编辑

抱歉，这适用于 .NET 4.0 及更高版本

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-12-16T15:28:55.810

```
'You can try this code----- 
'Function for null validate for particular type of controls in your form
Function NullValidate() As Boolean
    NullValidate = True
    For Each ctrl As Control In Me.Controls
        If TypeOf ctrl Is TextBox Then
            If ctrl.Text = "" Then
                MessageBox.Show("Invalid input for " & ctrl.Name)
                NullValidate = False
               Exit Function
            Else
               NullValidate = True
            End If
         End If
    Next
End Function
'Function for numeric validate for particular type of controls in your form
 Function NumericValidate() As Boolean
     NumericValidate = True
    For Each ctrl As Control In Me.Controls
         If TypeOf ctrl Is TextBox Then
             If NumericValidate = IsNumeric(ctrl.text) Then
                   MessageBox.Show("Invalid input for " & ctrl.Name)
                  NumericValidate = False
                  Exit Function
             Else
                  NumericValidate = True
             End If
         End If
     Next
   End Function

Private Sub cmdCalculate_Click(sender As Object, e As EventArgs) Handles cmdSave.Click
     If NullValidate() = True Then
         If NumericValidate() = True Then
             'your statement is here
         End If
     End If
End Sub 
```**

# jquery - 如何使用 jQuery 启用禁用链接按钮样式和事件

> ID：13528182
> 
> 赞同：0
> 
> 时间：2012-11-23T11:29:42.667
> 
> 标签：jquery

我有一个链接按钮，当它被按下时显示确认窗口功能：

```
$('#LinkButton1').click(function () {
     var continue = confirm('¿CONTINUE?');
    if (continue) {
        return true;
    }
    else
        return false;
}); 
```

我想在页面加载时禁用链接按钮、它的样式和它的 clic 事件：

```
 $('#LinkButton1').attr("disabled", "disabled").on('click', function (e) {
    e.preventDefault()
 }); 
```

链接按钮已禁用，并且 onclic 服务器事件已删除，但仍显示提示。

当用户在文本框中输入内容时，应该再次启用此 linbutton 并获取先前未绑定的 clic 事件：

```
 $(':input').keypress(function () {
    $('#LinkButton1').removeProp('disabled').off('click');
}); 
```

这将返回服务器 onclic 事件，但我现在错过了确认窗口。

**演示： http:** [//jsfiddle.net/Tvbg9/3/](http://jsfiddle.net/Tvbg9/3/) 在这个演示中，确认窗口没有显示，但我仍然在我的页面中看到。

我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:36:31.813

如果在任何文本框上按下任何键，我只允许 clic 事件：

```
$('#LinkButton1').attr("disabled", "disabled").on('click', function (e) {
    e.preventDefault();
  return false;
});

$(':input').keypress(function () {
    $('#LinkButton1')
    .removeProp('disabled')
    .off('click')
    .click(function () {
         var continue = confirm('¿CONTINUE?');
         if (continue) {
           return true;
         }
         else
           return false;
    });
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:43:41.010

这是要走的路：

[http://jsfiddle.net/Tvbg9/](http://jsfiddle.net/Tvbg9/)

```
$('#LinkButton1').on('click',function(e){e.preventDefault()});

    $(':input').keypress(function () {
        $('#LinkButton1').off('click');
    });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:35:51.680

而不是使用这个

```
 $('#LinkButton1').attr("disabled","") 
```

你可以试试这个

```
 $('#LinkButton1').removeAttr("disabled") 
```

希望它应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:36:51.930

尝试以下禁用按钮

```
$('#LinkButton1').click(function() { return false; }); 
```

然后对于输入：

```
$('input').change(function () {
    if ($(this).val().length > 0)
        $('#LinkButton1').unbind('click');
});​ 
```

希望这可以帮助！

# actionscript-3 - AS3 - 基类可以创建与它自己的实例相同的扩展类的新实例吗？

> ID：13528190
> 
> 赞同：0
> 
> 时间：2012-11-23T11:30:02.043
> 
> 标签：actionscript-3, oop

MyCollection 是一个可能有许多扩展类的通用类，是否可以为正在使用的任何类型的实例创建一个新实例？

```
public class MyCollection extends Array {
    public function getUnionWith(someCollection:MyCollection):MyCollection {
        //can I create and return a new instance of the same class as this instance here? 
        //(so in this example: a new ViewCollection or ItemCollection)
    }
}
public class ItemCollection extends MyCollection { }
public class ViewCollection extends MyCollection { }

...

//so that this will work:
var viewsOccuringInBoth:ViewCollection = viewCollection1.getUnionWith(viewCollection2) as ViewCollection;
//but this will work too!
var itemsOccuringInBoth:ItemCollection = itemCollection1.getUnionWith(itemCollection2) as ItemCollection; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:47:00.680

我认为类似于[这里](http://greladesign.com/blog/2012/08/29/constructor-as-helper-in-clone-method-implementation/)描述的可以用在你的 getUnionWith 方法中：

```
public function getUnionWith(someCollection:MyCollection):MyCollection
{
    var clone:MyCollection = new (this as Object).constructor();//MUST NOT have any required arguments in constructor otherwise it will throw error

    //here do merging

    return clone;

} 
```

# java - 对话框日期选择器 - 添加保存事件

> ID：13528191
> 
> 赞同：1
> 
> 时间：2012-11-23T11:30:09.117
> 
> 标签：java, android, datepicker

我正在尝试在我的 android 项目中的按钮上使用日期对话框选择器。我的对话框显示没有问题，但是我不知道如何设置积极响应按钮（即保存事件）

这是我的代码：

```
public void addInstallDate(View view){
        Log.e("Showing Dialog", "Dialog Date");

                DatePickerDialog dateDlg = new DatePickerDialog(this,
                        new DatePickerDialog.OnDateSetListener() {
                        public void onDateSet(DatePicker view, int year,
                                                            int monthOfYear, int dayOfMonth)
                        {
                           Time chosenDate = new Time();
                           chosenDate.set(dayOfMonth, monthOfYear, year);
                           long dtDob = chosenDate.toMillis(true);
                           CharSequence strDate = DateFormat.format("MMMM dd, yyyy", dtDob);

                       }}, 2011,0, 1);
                     dateDlg.setMessage("Install Date?");

 dateDlg.show();
        } 
```

如何为出现的两个按钮设置 onclick 事件？- 一旦我得到了onclick，我如何抓住它设定的日期？

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:33:49.990

```
.setPositiveButton("OK", new 
    DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            }
        }); 
```

# java - 在java中转换html文件

> ID：13528192
> 
> 赞同：1
> 
> 时间：2012-11-23T11:30:14.923
> 
> 标签：java

```
public String transform_XML(String type, InputStream file){
        TransformerFactory tf = TransformerFactory.newInstance();
        String xslfile = "/StyleSheets/" + type + ".xsl";
        Transformer t = tf.newTemplates(new StreamSource(this.getClass().getResourceAsStream(xslfile))).newTransformer();
        Source source = new StreamSource(file);
        CharArrayWriter wr = new CharArrayWriter();
        StreamResult result = new StreamResult(wr);
        t.transform(source, result);
     return wr.toString();
} 
```

上述方法将 xsl 和 xml 文件作为输入，并将转换后的结果作为字符串返回。包 javax.xml.transform 中的类已用于完成此操作。

现在我可以使用相同的包来转换 html 文件吗？（因为包名有 xml 我严重怀疑它。）我应该怎么做来转换一个 html 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:52:59.663

如您所知，html 文档不一定是有效的 xml。但是您可以将 html 转换为 xml，然后使用有效的 xml 进行操作（转换后 - 您将获得 DOM 树）。

我建议您使用[Cyber​​Neko HTML Parser](http://nekohtml.sourceforge.net/)转换`html`为`xml`.

**草稿示例：**

```
import org.cyberneko.html.parsers.DOMParser;
import org.w3c.dom.Document;
...
public Document parseHtml(InputStream is) throws Exception {
    DOMParser parser = new DOMParser();
    parser.parse(new InputSource(is));
    return parser.getDocument();
} 
```

如果您使用`maven`- 您可以简单地`CyberNeko`从存储库[http://mvnrepository.com/artifact/nekohtml/nekohtml添加到您的项目](http://mvnrepository.com/artifact/nekohtml/nekohtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:42:02.667

```
public class SimpleXSLT {
  public static void main(String[] args) {

    String inXML = "C:/tmp/temp.html";
    String inXSL = "C:/tmp/temp.xsl";
    String outTXT = "C:/tmp/temp_copy.html";
    SimpleXSLT st = new SimpleXSLT();
    try {
        st.transform(inXML,inXSL,outTXT);
        } catch(TransformerConfigurationException e) {
        System.err.println("Invalid factory configuration");
        System.err.println(e);
        } catch(TransformerException e) {
        System.err.println("Error during transformation");
        System.err.println(e);
    }
  }

  public void transform(String inXML,String inXSL,String outTXT)
     throws TransformerConfigurationException,
   TransformerException {
     TransformerFactory factory = TransformerFactory.newInstance();
     StreamSource xslStream = new StreamSource(inXSL);
     Transformer transformer = factory.newTransformer(xslStream);
     transformer.setErrorListener(new MyErrorListener());
     StreamSource in = new StreamSource(inXML);
     StreamResult out = new StreamResult(outTXT);
     transformer.transform(in,out);
     System.out.println("The generated XML file is:" + outTXT);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T13:43:52.990

据我了解您的评论，主要是为了获取信息

你可以看看[JSoup](http://jsoup.org/)，它非常方便地从 HTML 中解析和抓取 DOM

否则，如果你想保留你的 xslts，stemm 解决方案应该没问题

# uitableview - 使用 Mono touch 和 slodge mvvmcross 创建带有部分的 UITable

> ID：13528193
> 
> 赞同：4
> 
> 时间：2012-11-23T11:30:18.460
> 
> 标签：uitableview, mono, xamarin.ios, mvvmcross

我正在尝试使用 mono touch 和 slodge mvvmcross 创建一个带有部分的 UItable。但是我遇到了一些问题。

在我的数据中，我有一系列包含 1-2 个元素的部分，我的表源有一个包含所有元素的列表 (ItemsSource)。

它显示所有部分都是正确的，但是似乎对于每个部分，它从元素的总列表中获取元素 0 和/或 1，并且不考虑它是一个新部分，如果它是一个新部分，则索引应该有一个偏移量。但我可能错了。

我是否应该有多个包含元素的列表并根据该部分切换 tablesource.Itemsource - 我尝试了这种方法，但是它会陷入厄运的漩涡：P

任何帮助都非常感谢:)

以下是我的表格视图代码：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Drawing;
using System.Globalization;
using Cirrious.MvvmCross.Binding.Touch.ExtensionMethods;
using Cirrious.MvvmCross.Binding.Touch.Views;
using Cirrious.MvvmCross.Commands;
using Cirrious.MvvmCross.Interfaces.Commands;
using Cirrious.MvvmCross.Views;
using CmsApp.Core.Interfaces;
using CmsApp.Core.Model;
using CmsApp.Core.ViewModels;
using CmsApp.Core.ViewModels.Items;
using CmsApp.GtilP.Core.ViewModels.Items;
using CmsApp.Touch.Views.Items;
using MonoTouch.CoreGraphics;
using MonoTouch.ObjCRuntime;

namespace CmsApp.Touch

{
    using MonoTouch.Foundation;
    using MonoTouch.UIKit;

    [Register("WeekItemListViewController")] 
    public class WeekItemListViewController:CustomListViewController
    {

        public WeekItemListViewController(IntPtr handle): base(handle)
            {

            }

    private bool _hide;

    private List<TableSectionItemViewModel> _cells;
    private UmbracoTableViewController _table;
    private TabelViewSource _tableSource;
    private List<WeekItemTaskViewModel> _listOfTasks;
    private List<WeekItemHeaderViewModel> _listOfHeaders;
    private List<WeekItemFooterViewModel> _listOfFooter;
    private List<List<WeekItemTaskViewModel>> _listOfGroupedTasks;

    public bool Hide
    {
        get { return _hide; }
        set { _hide = value;
            this.Hidden = _hide;
        }
    }

    public BaseViewModel ViewModel { get; set; }

    //custom implementation for adding views to the button row

    protected override void AddViews()
    {

        SortItemsAcoordingToTyoe(ItemsSource);

        if(ItemsSource.Count==0)
        {
            this.Hidden = true;
            return;
        }
        else
        {
            this.Hidden = false;
        }

        if(_table!=null)
        {
            _table.View.RemoveFromSuperview();
        }

            _table = new UmbracoTableViewController(new RectangleF(0,0,this.Frame.Width,this.Frame.Height), UITableViewStyle.Plain);

            _table.TableView.BackgroundColor=UIColor.Clear;
            _tableSource = new TabelViewSource(_table.TableView,_listOfHeaders,_listOfFooter,_listOfGroupedTasks);

        _tableSource.SelectionChanged += (sender, args) => DoTableSelect((TableSectionItemViewModel)args.AddedItems[0]);

        _tableSource.ItemsSource=InitTableCells();;

            _table.TableView.SeparatorStyle = UITableViewCellSeparatorStyle.None;
            _table.TableView.Source = _tableSource;

        this.AddSubview(_table.View);

    }

    private void SortItemsAcoordingToTyoe(IList itemsSource)
    {
         _listOfGroupedTasks = new List<List<WeekItemTaskViewModel>>();
         _listOfTasks =new List<WeekItemTaskViewModel>();
         _listOfHeaders=new List<WeekItemHeaderViewModel>();
         _listOfFooter = new List<WeekItemFooterViewModel>();

        foreach (SectionItemBaseViewModel sectionItemBaseViewModel in itemsSource)
        {

            if(sectionItemBaseViewModel.GetType()==typeof(WeekItemHeaderViewModel))
            {

                _listOfHeaders.Add((WeekItemHeaderViewModel)sectionItemBaseViewModel);
                _listOfTasks=new List<WeekItemTaskViewModel>();
                _listOfGroupedTasks.Add(_listOfTasks);
            }
            else if (sectionItemBaseViewModel.GetType() == typeof(WeekItemTaskViewModel))
            {
                _listOfTasks.Add((WeekItemTaskViewModel)sectionItemBaseViewModel);
            }
            else if (sectionItemBaseViewModel.GetType() == typeof(WeekItemFooterViewModel))
            {
                _listOfFooter.Add((WeekItemFooterViewModel)sectionItemBaseViewModel);
            }
        }

    }

    private List<TableSectionItemViewModel> InitTableCells()
    {
        _cells = new List<TableSectionItemViewModel>();

        foreach (List<WeekItemTaskViewModel> listOfGroupedTask in _listOfGroupedTasks)
        {
            foreach (WeekItemTaskViewModel item in listOfGroupedTask)
            {
                var tableCell = new TableSectionItemViewModel() { TaskViewModel = item };
                _cells.Add(tableCell);
            }

        }

        return _cells;
    }

    private void DoTableSelect(TableSectionItemViewModel tableItemViewModel)
    {
        /*
        string selected = tableItemViewModel.Title;
        ((WelcomeScreenViewModel) ViewModel).SortViews(selected);

        _titleLabel.Text = selected;

        */
        int section=0;
        int row=0;
        NSIndexPath index=null;
        foreach(var group in _listOfGroupedTasks)
        {

            if(group.Contains(tableItemViewModel.TaskViewModel)){

                row=group.IndexOf(tableItemViewModel.TaskViewModel);
        index = NSIndexPath.FromRowSection(row, section);
                break;
            }
            section++;
        }

        if(index!=null){
            _table.TableView.DeselectRow(index, false);}
    }

    private class TabelViewSource : MvxBindableTableViewSource
    {
        private List<WeekItemHeaderViewModel> _listOfHeaders;
        private List<WeekItemFooterViewModel> _listOfFooter;
        private List<List<WeekItemTaskViewModel>> _listOfGroupedTasks;

        public TabelViewSource(UITableView view, List<WeekItemHeaderViewModel> listOfHeaders, List<WeekItemFooterViewModel> listOfFooter, List<List<WeekItemTaskViewModel>> listOfGroupedTasks)
            : base(view)
        {

            _listOfFooter = listOfFooter;
            _listOfGroupedTasks = listOfGroupedTasks;
            _listOfHeaders = listOfHeaders;

        }
        public override float GetHeightForRow(UITableView tableView, NSIndexPath indexPath)
        {
            return 50.0f;
        }

        public override int NumberOfSections(UITableView tableview)
        {
            return _listOfHeaders.Count;
        }

        public override int RowsInSection (UITableView tableview, int section)
        {
            List<WeekItemTaskViewModel> list=_listOfGroupedTasks[section];

            //this.ItemsSource=list;
            return list.Count;
        }

        public override int SectionFor(UITableView tableview, string title, int atIndex)
        {
            return atIndex;
        }

        protected override UITableViewCell GetOrCreateCellFor(UITableView tableView, NSIndexPath indexPath, object item)
        {
            //var reuse = tableView.DequeueReusableCell(TaskTableCell.Identifier);

     //       var listOfTasks = _listOfGroupedTasks[indexPath.Section];

       //     var task = listOfTasks[indexPath.Row];

         //   if (reuse != null)
           // {
             //   return reuse;
            //}
            // tjek på type - sektion, item footer
            var toReturn = TaskTableCell.LoadFromNib();

            return toReturn;
        }

/*
        public override UIView GetViewForFooter(UITableView tableView, int section)
        {
            return base.GetViewForFooter(tableView, section);
        }
*/
        public override string TitleForHeader(UITableView tableView, int section)
        {
            WeekItemHeaderViewModel header = _listOfHeaders[section];
            return header.Title;
        }
    }

}

public class TableSectionItemViewModel 
{
    public WeekItemTaskViewModel TaskViewModel { get; set; }

    public string Title
    {
        get{return TaskViewModel.TaskName;}

    }

    public bool IsExpired
    {
        get{
            return TaskViewModel.IsExpired;
        }
    }

    public bool TaskIsDone
    {
        get{
            return TaskViewModel.TaskIsDone;
        }
    }

    public IImageItem CellBackground
    {
        get
        {
            return new LocalImageItem("tablecell_background.png");
        }
    }

    public string[] CheckMarkImage
    {
        get
        {
            return TaskViewModel.CheckMarkImageData;
        }
    }

    public IMvxCommand ToggleDone
    {
        get { return new MvxRelayCommand(CheckBoxPushed); }
    }

    private void CheckBoxPushed()
    {
        TaskViewModel.TaskIsDone=!TaskIsDone;
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T12:13:43.380

我真的不明白你目前看到的问题。

但是，我可以解释如何使用会议示例[BaseSessionListView.cs中的部分。](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Touch/Views/SessionLists/BaseSessionListView.cs)

基本上，在该示例中，ItemsSource 是一个分组源 - 所以 ViewModel 代码是：

```
public class SessionGroup : List<Session>
{
    public string Key { get; set; }

    public SessionGroup(string key, IEnumerable<Session> items)
        : base(sessions)
    {
        Key = key;
    }
}

private List<SessionGroup> _groupedList;
public List<SessionGroup> GroupedList
{
    get { return _groupedList; }
    protected set { _groupedList = value; RaisePropertyChanged("GroupedList"); }
} 
```

这意味着我暴露的 ItemsSource 的结构有点像：

```
Group
    Session
    Session
    Session
Group
    Session
    Session
    Session
    Session
Group
    Session
    Session
etc 
```

表源中的`Section`基于方法是：

```
public override string[] SectionIndexTitles(UITableView tableView)
{
  if (_sessionGroups == null)
       return base.SectionIndexTitles(tableView);

   return _sessionGroups.Select(x => KeyToString(x.Key, 10)).ToArray();
}

protected override object GetItemAt(NSIndexPath indexPath)
{
   if (_sessionGroups == null)
       return null;

   return _sessionGroups[indexPath.Section][indexPath.Row];
}

public override int NumberOfSections(UITableView tableView)
{
    if (_sessionGroups == null)
        return 0;

    return _sessionGroups.Count;
}

public override int RowsInSection(UITableView tableview, int section)
{
    if (_sessionGroups == null)
        return 0;

    return _sessionGroups[section].Count;
} 
```

这似乎有效....但我不知道它是否对您的问题有帮助？

* * *

如果我想添加一个标题元素，那么我想我会更改`RowsInSection`and`GetItemAt`方法来适应这个 - 加上`GetOrCreateCellFor`返回标题元素单元格......但我想还有其他方法可以做到这一点吗？

# php - 如何使用 PHP 在 REST 中将数组作为发布请求发送？

> ID：13528194
> 
> 赞同：1
> 
> 时间：2012-11-23T11:30:24.577
> 
> 标签：php, arrays, rest, post

这是我的代码，

```
$ip = array([0]=>'1.1.1.1' [1]=> '2.2.2.2')

$ux = RestClient::post($url,array('requestType'=>'Ip', 
                                                     'username' => 'user', 
                                                             'pass' =>'user',
                        'type'=>$type,
                        'ip'=>array($ip)                            
                            ));
  echo $ux->getResponse(); 
```

如何在服务器端发布“ip”？当我使用 $_POST['id'] 时，它返回 'Array' 作为字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T11:34:08.403

您不能发布数组。您必须将其序列化为字符串。这可能是标准形式的编码方法：

```
ip=1.1.1.1&ip=2.2.2.2 
```

那可能是 JSON：

```
{ "ip" : [ "1.1.1.1", "2.2.2.2" ] } 
```

这可能是某种 XML 格式：

```
<ips>
    <ip>1.1.1.1</ip>
    <ip>2.2.2.2</ip>
</ips> 
```

那可能是别的东西。

…但是您需要做的取决于您提交的 API 所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:32:36.233

我怀疑你需要为你的数组使用 JSON。将其转换为`json_encode( $array )`

# php - 如何在 Jquery 中管理空间：HTML 类变量的 48 个函数调用（每个 96 行）

> ID：13528204
> 
> 赞同：0
> 
> 时间：2012-11-23T11:31:01.350
> 
> 标签：php, jquery, html, css, regex

我在下面展示了部分 HTML 代码。显然有两种选择——

ICMP 错误消息（8 个选项）和 ICMP 信息消息（大约 30 个选项）。

共有 48 个选项，对于每个选项，它将显示其相应的 paket 结构。

首先，看看 HTML。

```
 <tr class="icmperr"><td>
     <select name="icmpmsgerrtyp"  id="icmpmsgerrtyp">
          <option value="res" onclick="icmptyp();">0-Reserved</option>
          <option value="desun" onclick="icmptyp();">1-Destination Unreachable</option>
          <option value="ptb" onclick="icmptyp();">2-Packet Too Big</option>
          <option value="timeex" onclick="icmptyp();">3-Time Exceeded</option>
          <option value="paraprob" onclick="icmptyp();">4-Parameter Problem</option>
        <option value="privex" onclick="icmptyp();">100-Private Experimentation</option>
       <option value="privex1" onclick="icmptyp();">101-Private Experimentation</option>
       <option value="resexp" onclick="icmptyp();">127-Reserved For expansion Of ICMPv6 Error Messages </option>
       </select> <br\>

  </td></tr>

   <tr class="icmpinfo"><td>
     <select name="icmpinfotyp"  id="icmpinfotyp">
     <option value="echoreq" onclick="icmptyp();">128-Echo Request</option>
     <option value="echorep" onclick="icmptyp();">129-Echo Reply</option>
     <option value="mlq" onclick="icmptyp();">130-Multicast Listener Query</option>
     <option value="mlr" onclick="icmptyp();">131-Multicast Listener Report</option>
     <option value="mld" onclick="icmptyp();">132-Multicast Listener Done</option>
     <option value="rs" onclick="icmptyp();">133-Router Solicitation(NDP)</option>
     <option value="ra" onclick="icmptyp();">134-Router Advertisement(NDP)</option>
     <option value="ns" onclick="icmptyp();">135-Neighbour Solicitation(NDP)</option>
     <option value="na" onclick="icmptyp();">136-Neighbour Advertisement(NDP)</option>
     <option value="redmsg" onclick="icmptyp();">137-Redirect Message(NDP)</option>
     <option value="rr" onclick="icmptyp();">138-Router Renumbering</option>
     <option value="niq" onclick="icmptyp();">139-ICMP Node Information Query</option>
     <option value="nir" onclick="icmptyp();">140-ICMP Node Information    
     Response</option>
     <option value="indsm" onclick="icmptyp();">141-Inverse Neighbor Discovery 
     Solicitation Message</option>
     <option value="indam" onclick="icmptyp();">142-Inverse Neighbor Discovery 
     Advertisement Message</option>
     <option value="mldr" onclick="icmptyp();">143-Multicast Listener Discovery (MLDv2) 
     Reports</option>
     <option value="hadreqm" onclick="icmptyp();">144-Home Agent Address Discovery 
     Request Message</option>
     <option value="hadresm" onclick="icmptyp();">145-Home Agent Address Discovery 
     Reply Message</option>
     <option value="mps" onclick="icmptyp();">146-Mobile Prefix Solicitation</option>
     <option value="mpa" onclick="icmptyp();">147-Mobile Prefix Advertisement</option>
     <option value="cps" onclick="icmptyp();">148-Certification Path Solicitation (SEND)
     </option>
     <option value="cpa" onclick="icmptyp();">149-Certification Path Advertisement 
     (SEND)</option>
     <option value="mra" onclick="icmptyp();">151-Multicast Router Advertisement 
     (MRD)</option>
     <option value="mrs" onclick="icmptyp();">152-Multicast Router Solicitation 
     (MRD)</option>
     <option value="mrt" onclick="icmptyp();">153-Multicast Router Termination 
     (MRD)</option>
     <option value="rcm" onclick="icmptyp();">155-RPL Control Message</option>
     <option value="pex" onclick="icmptyp();">200-Private Experimentation</option>
     <option value="pex1" onclick="icmptyp();">201-Private Experimentation</option>
     <option value="resexpim" onclick="icmptyp();">255-Reserved for expansion of ICMPv6 
     informational messages</option>

     </select> <br\>
     </td></tr> 
```

现在假设我想为 ICMP Inofrational message-ECHO Request 指定选项。

所以它会像 -

```
 <option value="echoreq" onclick="icmptyp();echoreq();">128-Echo   
  Request</option>

  and then a jquery function echoreq() will go like this -

   function echoreq() {

      $(".echoreq").css("visibility", "visible");
      $(".echoreq").css("display", "table-row");  

      and 47*2 lines to make others invisible

   } 
```

并且将有大约 48 个这样的功能。所以它会很长。

那么有什么建议可以节省空间，可能是通过在使用类/函数名称或在某处使用任何正则表达式时表现出某种聪明，但
不确定。

如果我遗漏了一些琐碎的事情，请原谅。标题中也需要编辑。提前致谢。

**编辑：**

我以这种方式使用它。现在这里有什么问题？

**示例 HTML -**

```
 <tr class="icmppac icmppacdesun">
       <td width="249">Unused</td>
       <td width="249"><input type="text" name="icmppacdesun" size="20"  
       id="icmppacdesun"/> [Default : 0] </td>
    </tr> 
```

和这样的函数调用 -

```
 <option value="desun" onclick="icmptyp();icmppacstr('.icmppacdesun');">1-Destination 
  Unreachable</option> 
```

和这样的jquery -

```
 function icmppacstr(myobject) {

                     $(myobject).css("visibility", "visible");
                     $(myobject).css("display", "table-row");

                     $(".icmppac").css("visibility", "hidden");
                     $(".icmppac").css("display", "none");

    } 
```

**编辑2：**

```
 ....... 
  <select name="icmpmsgerrtyp"  id="icmpmsgerrtyp" onchange="myfun2(this.value)">
  ..... 
  <select name="icmpinfotyp"  id="icmpinfotyp" onchange="myfun2(this.value)">
  .... 
```

而myfun2是这样的......

```
 function myfun2(object)
 {
  if(object=="desun")
  {

   // working fine 
   icmppacstr('.icmppacdesun');
  }
 //and so on for first select

  if(object=="echoreq")
  {
   alert('hi'); // its getting printed
   icmppacstr('.icmppacechoreq'); // but its not executing
  }
 //and so on for second select     

} 
```

对于与第一个选择相对应的选项，它的工作正常，但是当我从第二个选择选项中选择任何一个时，什么都没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:38:19.983

为什么要创建单独的函数？您可以简单地创建一个函数并将参数传递给它。例如：

```
 function myfun(myobject) {

          $(myobject).css("visibility", "visible");
          $(myobject).css("display", "table-row");
       } 
```

在检查您的编辑后，我建议使用 onchange of select，而不是调用选项的 onclick。所以它看起来像这样。

```
<select name="icmpinfotyp"  id="icmpinfotyp" onchange="myfun2(this.value)"> 
```

和功能将是这样的

```
function myfun2(object)
{
  if(object=="desun")
  {
    icmptyp();
    icmppacstr('.icmppacdesun');
    // in my case myfun('.icmppacdesun');
  }
  //and so on
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:42:12.843

我不完全确定您要做什么，因为您的问题对您的情况非常具体...据我所知，您的页面上有多个元素，每个元素都有一个给定的类名，并且您希望避免调用 hide on所有的元素。

你可以做的是给每个元素两个类。一个是特定于每个元素的，一个是跨所有元素共享的。

可以说，我们有三个元素 Item1、Item2 和 Item3。然后你会做这样的事情：

```
<div class="item item-1"</div>
<div class="item item-2"</div>
<div class="item item-3"</div> 
```

现在你必须稍微改变你的功能。引入一个参数，指定项目的类，应该显示：

```
function echoreq(var displayItem) {
    $(".item").css("display", "none");
    $(displayItem).css("display", "table-row");  
} 
```

只要确保你更新你的电话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:38:58.913

这很简单。

您可以将其压缩为四行并摆脱所有那些丑陋的内联 HTML `onclick`。

```
// select every option tag beneath id icmpinfotyp and id icmpmsgerrtyp
// bind the click function to all of those elements
$('#icmpinfotyp option, #icmpmsgerrtyp option').click(function() {
   // by using $(this), we only apply the css changes to whichever element is clicked on
   $(this).css("visibility", "visible");
   $(this).css("display", "table-row");
}); 
```

现在按预期修改它以满足您的需要。没有理由你应该有 48 个独立的功能。让我们利用自动化来发挥我们的优势！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:59:45.470

不要使用`onclick`on `<option>`- 它不适用于所有浏览器。相反，`onchange`在`<select>`.

此外，为所有数据包/信息项添加一个通用类，以便它们更容易显示和隐藏。假设该类被调用`.option-item`，因此单个项目可能是：

```
<div class="option-item echoreq">...</div> 
```

代码可能如下所示：

```
// First, let's cache all the packets/option items for future reference:
var $optionItems = $('.option-item');

$('#icmpinfotyp').on('change', function(){
    // using .val() you get the contents of the value atttribute
    // of the selected option
    var selectedValue = $(this).val();

    // now hide all packets/option items:
    $optionItems.css({'visibility': 'hidden','display': 'none'}); // or use jQuery .hide()
    // and show the selected:
    $('.' + selectedValue).css({'visibility': 'visible','display': 'table-row'});

}); 
```

# c# - 如何从一个用户控件导航到另一个用户控件

> ID：13528210
> 
> 赞同：0
> 
> 时间：2012-11-23T11:31:29.097
> 
> 标签：c#, wpf, mvvm, navigation

我有 A.XAML 和 B.XAML 。

当我单击页面 A 中的按钮时，我想从 A 导航到 B。

```
<Button  Grid.Row="2" Content="View Sequence"  command={binding myCommand} /> 
```

因此，在 myCommand 内部，我想调整逻辑以导航到 B.XAML，并希望通过使用 commandparameter 或任何更好的替代方法来设置数据上下文。

有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:37:54.180

您可以使用 Avalon Wizard 项目。

项目链接： http: [//avalonwizard.codeplex.com](http://avalonwizard.codeplex.com/)

教程链接：http: [//xinyustudio.wordpress.com/2012/10/02/how-to-use-wpf-avalonwizard-control-i/](http://xinyustudio.wordpress.com/2012/10/02/how-to-use-wpf-avalonwizard-control-i/)

# python - Python 中的 Observer Observable 类

> ID：13528213
> 
> 赞同：7
> 
> 时间：2012-11-23T11:31:32.157
> 
> 标签：python

如何像在 Java 中一样在 Python 中编写具有观察者/可观察设施的程序？我会用Java写一些类似的东西。

```
import java.util.Observable;
import java.util.Observer;

public class ObservDemo extends Object {
  MyView view;
  MyModel model;

  public ObservDemo() {

    view = new MyView();
    model = new MyModel();
    model.addObserver(view);

  }

  public static void main(String[] av) {
    ObservDemo me = new ObservDemo();
    me.demo();
  }

  public void demo() {
    model.changeSomething();
  }

  /** The Observer normally maintains a view on the data */
  class MyView implements Observer {
    /** For now, we just print the fact that we got notified. */
    public void update(Observable obs, Object x) {
      System.out.println("update(" + obs + "," + x + ");");
    }
  }

  /** The Observable normally maintains the data */
  class MyModel extends Observable {
    public void changeSomething() {
      // Notify observers of change
      setChanged();
      notifyObservers();
    }
  }
} 
```

（此代码取自以下链接 [http://www.java2s.com/Code/Java/Design-Pattern/AsimpledemoofObservableandObserver.htm](http://www.java2s.com/Code/Java/Design-Pattern/AsimpledemoofObservableandObserver.htm)）

我如何在 Python 中完成这样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T12:00:19.253

首先，正如 Martijn Pieters 所说，Python 不是 Java。这意味着您可能不需要整个观察者/观察到的模式，但可以将其归结为更简化的版本。最后，我会展示一些更 Python 的东西，但是为了保持一个非常基本的 java 实现，你可以尝试这样的事情：

```
class Observer(object):
    def notify(self,*args,**kwargs):
        print args,kwargs

class Target(object):
    def __init__(self,*observers):
        self.observes = observers

    #this notify for every access to the function
    def event(self,data):
        for obs in self.observes:
            obs.notify('event',data)
        print "event with",data

t = Target(Observer())
t.event(1)
#('event', 1) {}
#event with 1 
```

否则你可以用一个装饰器来实现它，这非常相似：

```
def observe(f):
    def decorated(self,*args,**kwargs):
        for obs in self.observes:
            obs.notify('event',*args,**kwargs)
        return f(self,*args,**kwargs)
    return decorated

class Target(object):
    def __init__(self,*observers):
        self.observes = observers

    @observe
    def otherevent(self,data):
        print "other event with",data 
```

现在，所有这些方法都有效，但它们不是很pythonic。想到以pythonic方式实现这样的事情的最好方法是实现一个检查属性访问并调用回调函数的包装器（可以是观察者的通知函数，但它是一种更通用的方法）

```
class Wrapper(object):
    def __init__(self,wrapped,*callbacks):
        self.wrapped = wrapped
        self.callbacks = callbacks

    def __getattr__(self,name):
        res = self.wrapped.__getattribute__(name)
        if not callable(res):
            return res
        def wrap(*args,**kwargs):
            for c in self.callbacks:
                c(self.wrapped,f,*args,**kwargs)
            return res(*args,**kwargs)
        return wrap

    def __str__(self):
        return self.wrapped.__str__()

#in this example I will keep a record of each call performed on a list
called = []
#this is the list
a = []
#and this is the wrapped list
w = Wrapper(a,lambda f,v,ign: called.append((f,v)) )
#I append an element to the wrapper
w.append(1)
#and I can see that it modify the original list
print a
#the print of the wrapped is well behaved, having defined the __str__ function
print w
#and we can see which function we called and which were the parameters
print called 
```

这种方法有点复杂，因为您必须手动重定向所有魔术方法，但更强大的是允许将观察者模式实现到任何类型的对象，将任何兼容的函数附加到它，而无需指定泛型观察类。有一些方法可以自动重定向所有魔术函数调用，但这有点复杂，只会混淆要点

在 python 中工作时你越快忘记 java，它就会越有趣。我建议你阅读这篇文章：

[http://dirtsimple.org/2004/12/python-is-not-java.html](http://dirtsimple.org/2004/12/python-is-not-java.html)

祝你工作顺利！

# database - 使用关系数据库/ORM 或文档数据库/ODM 的动机

> ID：13528216
> 
> 赞同：2
> 
> 时间：2012-11-23T11:31:37.677
> 
> 标签：database, orm, nosql, document-database, odm

很久没有从头开始创建项目了，现在[面向文档的数据库](http://en.wikipedia.org/wiki/Document-oriented_database)（以及ODM）已经非常流行，所以在盲目走关系路线之前，我必须考虑它们。

任何人都可以尝试列出可能导致一种或另一种选择的动机/项目标准吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T07:16:17.640

## ORM/关系数据库/SQL

优点：

*   易于理解的标准方法
*   很好地映射到具有一致结构的数据
*   很好地映射到具有多个实体之间的多种关系的数据
*   具有广泛的加入能力
*   有交易
*   可扩展到每秒大量事务（使用 MySQL Cluster、Fusion-IO 等）

缺点：

*   如果性能也是一个问题，很难扩展到海量数据
*   不能很好地映射到具有可变结构（或半结构化）的数据
*   持久化对象需要一个胶水/翻译层，这可能是一个性能瓶颈（如果做错了也可能非常冗长）

## ODM/文档数据库/NoSQL

优点：

*   可扩展到海量数据和大量相对独立的查询
*   高可用性，分片，多主，...
*   很好地映射到半结构化数据
*   很好地映射到具有更多可变结构的数据
*   数据模型可以更灵活
*   查询不必转换为 SQL（本机 NoSQL 查询样式可能更适合某些用途，也可能不适合，并且没有来自 SQL 驱动程序/解析/等的开销）
*   （对于对象数据库）直接映射到对象，不需要对象关系转换

缺点：

*   通常，没有加入（或有限版本的加入）
*   通常，没有事务（或事务一致性/原子性的有限版本）

## 如何决定

根据数据类型和使用模式：

*   数据是否具有统一的结构？（关系）......还是变量/不一致的结构？（文档）
*   典型用法是否读/写单一类型的实体？（文档）......还是由多个实体的属性组成的视图？（关系）
*   是否需要交易？（关系）……还是不需要交易？（文档）

基于扩展/性能要求：

*   大量数据 + 少量、缓慢、复杂的读/写？（数据仓库类型场景）=> 关系
*   庞大的数据 + 大量的简单读/写？（craigslist 后端类型场景）=> 文档
*   海量数据 + 快速、复杂的读/写？=> 这很难；要么使用关系并尝试扩展它，要么使用文档并尝试简化查询
*   中等数据 + 快速事务写入？（银行类型场景）=> 关系
*   中等数据+中等读/写？=> 根据供应商/工具支持、熟悉程度等选择任何一个

## 参考

*   [何时使用 MongoDB 或其他面向文档的数据库系统？](https://stackoverflow.com/questions/1476295/when-to-use-mongodb-or-other-document-oriented-database-systems)
*   [面向文档的数据库与关系数据库，Doctrine 博客](http://www.doctrine-project.org/blog/document-oriented-databases-vs-relational-databases.html)
*   [NoSQL：要是这么简单就好了，BJ Clark](http://bjclark.me/2009/08/nosql-if-only-it-was-that-easy/)
*   [关系与非关系，Josh Berkus](http://www.pgexperts.com/document.html?id=40)

（背景：我最近在这方面没有做任何事情，但几年前我建立了一个使用复制 MySQL + Sphinx 的大型系统，即关系和文档混合）

# javascript - 在图像选择上创建一个新的 jplayer

> ID：13528218
> 
> 赞同：0
> 
> 时间：2012-11-23T11:31:47.303
> 
> 标签：javascript, jquery, jplayer

我有这个 html5 div 块：

```
 <div id="st_main">
      <img src="/artistes/david_merlo/David_Merlo_Solo_PosteaGalene_2011_Ulrike_Monso.jpg" alt="" class="st_preview" style="display:none;" />
      <div class="st_overlay"></div>
      <ul class="menu">
        <li>
          <a href="#">Les Artistes</a>
          <div class="sc_menu_wrapper">
            <div class="sc_menu">
              <a href="#" m4v="/artistes/diez/diez_demo.m4a" oga="/artistes/diez/diez_demo.ogg" mp3="/artistes/diez/diez_demo.mp3"><img src="/artistes/david_merlo/david_merlo_thumb.jpg" alt="/artistes/david_merlo/David_Merlo_Solo_PosteaGalene_2011_Ulrike_Monso.jpg"></a>
              <a href="#" m4v="/artistes/david_merlo/diez_demo.m4a" oga="/artistes/david_merlo/diez_demo.ogg" mp3="/artistes/david_merlo/diez_demo.mp3"><img src="/artistes/nicolas-dick/L'Embobineuse_avec_phil_niblock.jpg" alt="/artistes/nicolas-dick/concert_glazart_du_25_02.jpg"></a>
              <a href="#" m4v="/audio/01_Tribu.m4a" oga="/audio/01_Tribu.ogg" mp3="/audio/01_Tribu.mp3"><img src="/artistes/jean-luc_gergonne/jlgergonne_thumb.jpg" alt="/artistes/jean-luc_gergonne/jlgergonne.jpg"></a>
              <a href="#" m4v="/artistes/diez/diez_demo.m4a" oga="/artistes/diez/diez_demo.ogg" mp3="/artistes/diez/diez_demo.mp3"><img src="/artistes/diez/diez_130x195.jpeg" alt="/artistes/diez/diez.jpeg"></a>
            </div>
          </div>
        </li>
      </ul>
      <div class="zen">
        <span class="player"></span>
        <span class="circle"></span>
        <span class="progress"></span>
        <span class="buffer"></span>
        <span class="drag"></span>
        <div class="button">
          <span class="icon play"></span>
          <span class="icon pause"></span>
        </div>
      </div>
    </div> 
```

我的javascript代码如下：

```
function tsunamiClient() {
  var self = this;
  var width = $(".menu").width();
  //the ul element 
  var $list = $('.menu');
  //the current image being shown
  var $currImage = $('#st_main').children('img:first');

  //let's load the current image 
  //and just then display the navigation menu
  $('<img>').load(function(){
    $currImage.fadeIn(3000);
    //slide out the menu
    setTimeout(function(){
      $list.animate({'left':'0px'},500);
    },
    1000);
    }).attr('src',$currImage.attr('src'));

    this.init = function() {
      self.sliderMenu();
    };

  // Slider Menu
  this.sliderMenu = function() {
    /* function to make the thumbs menu scrollable */
    //clicking on a thumb, replaces the large image
    $list.find('.sc_menu img').bind('click',function(){
      var $this = $(this);
      $('<img class="st_preview"/>').load(function(){
        var $this = $(this);
        var $currImage = $('#st_main').children('img:first');
        $this.insertBefore($currImage);

        $currImage.fadeOut(2000,function(){
          $(this).remove();
        });
        }).attr('src',$this.attr('alt'));
      }).bind('mouseenter',function(){
        $(this).stop().animate({'opacity':'1'});
      }).bind('mouseleave',function(){
        $(this).stop().animate({'opacity':'0.7'});
      });

    //the loading image
    function buildThumbs($elem){
      var $wrapper = $elem.next();
      var $menu = $wrapper.find('.sc_menu');
      var inactiveMargin     = 150;
      /* move the scroll down to the
      beggining (move as much as the height of the menu) */
      $wrapper.scrollTop($menu.outerHeight());

      /* when moving the mouse up or down, the wrapper moves (scrolls) up or down */
      $wrapper.bind('mousemove',function(e){
        var wrapperHeight = $wrapper.height();
        var menuHeight = $menu.outerHeight() + 2 * inactiveMargin;
        var top = (e.pageY - $wrapper.offset().top) * (menuHeight - wrapperHeight) / wrapperHeight - inactiveMargin;
        $wrapper.scrollTop(top+10);
      });
    }

    var stacktime;

    $('.menu li > a').bind('mouseover',function () {
      var $this = $(this);

      buildThumbs($this);

      var pos = $this.next().find('a').size();
      var f = function(){
        if(pos==0) clearTimeout(stacktime);
        $this.next().find('a:nth-child('+pos+')').css('visibility','visible');
        --pos;
      };
      /* each thumb will appear with a delay */
      stacktime = setInterval(f , 50);
    });

    /* on mouseleave of the whole <li> the scrollable area is hidden */
    $('.menu li').bind('mouseleave',function () {
      var $this = $(this);
      clearTimeout(stacktime);
      $this.find('.sc_menu').css('visibility','hidden').find('a').css('visibility','hidden');
      $this.find('.sc_menu_wrapper').css('visibility','hidden');
    });

    /* when hovering a thumb, change its opacity */
    $('.sc_menu a').hover(
      function () {
        var $this = $(this);
        $this.find('img')
        .stop()
        .animate({'opacity':'1.0'},400);
      },
      function () {
        var $this = $(this);
        $this.find('img')
        .stop()
        .animate({'opacity':'0.3'},400);
      }
    );
  };
  // jPlayer
  this.tsunamiPlayer = function(music) {
    ///init screen
    var player = $(".zen .player");
    var no_of_tracks = $(".sc_menu a").length;
    player.jPlayer({
      ready: function () {
        $(this).jPlayer("setMedia", {
          m4a: m4a,
          mp3: mp,
          oga: oga
        });
      },
      swfPath: "/js/jplayer/Jplayer.swf",
      supplied: "m4a, mp3, oga"         
    });
    // preload, update, end
    player.bind($.jPlayer.event.progress, function(event) {    

      var audio = $('.zen audio').get(0);
      var pc = 0;    

      if ((audio.buffered != undefined) && (audio.buffered.length != 0)) {
        pc = parseInt(((audio.buffered.end(0) / audio.duration) * 100), 10); 
        displayBuffered(pc);
        //console.log(pc);
        if(pc >= 99) {
          //console.log("loaded");
          $('.zen .buffer').addClass("loaded");
        }  
      }        

    });
    //player.bind($.jPlayer.event.loadeddata, function(event) {    
      //$('.zen .buffer').addClass("loaded");    
    //});

    player.bind($.jPlayer.event.timeupdate, function(event) { 
      var pc = event.jPlayer.status.currentPercentAbsolute;
      if (!dragging) { 
        displayProgress(pc);
      }
    });

    player.bind($.jPlayer.event.ended, function(event) {   
      $('.zen .circle').removeClass( "rotate" );
      $(".zen").removeClass( "play" );
      $('.zen .progress').css({rotate: '0deg'});
      status = "stop";
    });

    // play/pause

    $(".zen .button").bind('mousedown', function() {
      // not sure if this can be done in a simpler way.
      // when you click on the edge of the play button, but button scales down and doesn't drigger the click,
      // so mouseleave is added to still catch it.
      $(this).bind('mouseleave', function() {
        $(this).unbind('mouseleave');
        onClick();
      });
    });

    $(".zen .button").bind('mouseup', function() {
      $(this).unbind('mouseleave');
      onClick();
    });

    function onClick() {

      if(status != "play") {
        status = "play";
        $(".zen").addClass( "play" );
        player.jPlayer("play");
      } else {
        $('.zen .circle').removeClass( "rotate" );
        $(".zen").removeClass( "play" );
        status = "pause";
        player.jPlayer("pause");
      }
    };

    // draggin

    var clickControl = $('.zen .drag');

    clickControl.grab({
      onstart: function(){
        dragging = true;
        $('.zen .button').css( "pointer-events", "none" );

      }, onmove: function(event){
        var pc = getArcPc(event.position.x, event.position.y);
        player.jPlayer("playHead", pc).jPlayer("play");
        displayProgress(pc);

      }, onfinish: function(event){
        dragging = false;
        var pc = getArcPc(event.position.x, event.position.y);
        player.jPlayer("playHead", pc).jPlayer("play");
        $('.zen .button').css( "pointer-events", "auto" );
      }
    });    

    // functions

    function displayProgress(pc) {
      var degs = pc * 3.6+"deg"; 
      $('.zen .progress').css({rotate: degs});
    }
    function displayBuffered(pc) {
      var degs = pc * 3.6+"deg"; 
      $('.zen .buffer').css({rotate: degs});
    }

    function getArcPc(pageX, pageY) { 
      var    self    = clickControl,
      offset    = self.offset(),
      x    = pageX - offset.left - self.width()/2,
      y    = pageY - offset.top - self.height()/2,
      a    = Math.atan2(y,x);  

      if (a > -1*Math.PI && a < -0.5*Math.PI) {
        a = 2*Math.PI+a; 
      } 

      // a is now value between -0.5PI and 1.5PI 
      // ready to be normalized and applied               
      var pc = (a + Math.PI/2) / 2*Math.PI * 10;   

      return pc;
    }
  }; 
  // end jPlayer
  // Initialise  
  this.init();
};

var tsunamiClient;

jQuery(function() {
  tsunamiClient = new tsunamiClient();
});​ 
```

这就是我到目前为止所拥有的[http://jsfiddle.net/aqoon/VUGL8/](http://jsfiddle.net/aqoon/VUGL8/)

它不起作用，因为我希望能够拥有这样的功能，以便当用户访问页面并且如果他们单击 jPlayer 的播放按钮来播放与正在显示的图像相对应的音乐。同样，如果用户从“sc_menu”中选择图像，这将更新图像中的图像并创建一个新的 jplayer 实例。

我在 $list.find('.sc_menu img').bind('click',function(){ var $this = $(this); 之后添加了这段代码

```
 var link = $this.parent();
  var music;
  title = link.text();
  mp = link.attr("mp3");
  oga = link.attr("oga");
  m4a = link.attr("m4a");
  m4v = link.attr("m4v");
  ogv = link.attr("ogv");
  webmv = link.attr("webmv");
  poster = link.attr("poster");
  music = {
    title: title,
    mp: mp,
    oga: oga,
    m4a: m4a,
    ogv: ogv,
    webmv: webmv,
    poster: poster,
  }
  self.tsunamiPlayer(music); 
```

这确实将数据绑定到 jplayer 但是当我更改图像时它不会更新。

关于使这项工作的任何建议，以便：

1.  在页面显示初始 jplayer 加载与艺术家图像对应的音乐文件

2.  当用户单击菜单中的缩略图时，jplayer 音乐文件会相应更新。

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:50:21.513

已修复，您可以看到更改[https://github.com/AssociationTsunami/tsunami/commit/7773a3a3308ec3b18eab0fa4c9731ea4e7eaf443](https://github.com/AssociationTsunami/tsunami/commit/7773a3a3308ec3b18eab0fa4c9731ea4e7eaf443)

# php - 从 PHP CLI 执行输出 HTML

> ID：13528219
> 
> 赞同：3
> 
> 时间：2012-11-23T11:31:58.597
> 
> 标签：php, html, command-line-interface

我希望这个问题是有道理的 - 可能是我不完全理解发生了什么......但是经过大量的谷歌搜索无济于事之后：

我正在尝试做的是在命令行上执行一个 PHP 文件，`php filename.php`并以 HTML 格式获取输出 - 因此它可以显示为网页。目前命令行只是返回没有 HTML 标记的原始文本输出。目前 PHP 文件中唯一的代码行是：`<?php phpinfo() ?>`

这可能吗？如果不是，MAMP 等如何执行该文件以生成 HTML 输出？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-03T01:15:21.387

如果您使用 php-cgi 而不是 CLI 中的 php，您的程序将像在网络服务器上运行一样运行。它无法访问 $_SERVER、$_POST、$_GET 等中的任何内容，但它会导致 phpinfo() 生成 HTML 而不是纯文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:39:56.460

**phpinfo()**函数足够聪明，可以识别请求来自哪里，如果它来自 **CLI**，那么它不会返回 html，但是当请求来自**apache**时，它​​将它与 html 合并并发送输出。

[这里](http://php.bigresource.com/Formatting-of-phpinfo-with-HTML-under-CLI-PHP-FGxuP1yA.html)列出了一个示例，用于将 phpinfo() 的 cli 原始输出转换为 html，但我没有尝试过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T11:36:31.130

HTML 是包含具有特殊含义的字符序列的文本（例如 ASCII）输出。

做这样的事情

```
php filename.php > webpage.html 
```

然后`webpage.html`用浏览器查看。

至于函数`phpinfo()`，我不太确定产生输出需要哪些环境/全局变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T11:34:43.937

`phpinfo()`如果从命令行执行，则不会输出 HTML。然而，在命令行中执行时，HTML 将作为文本返回。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T11:34:45.563

HTML 只是文本。它没有什么特别之处。

```
<?php
  echo '<p>this is html, you'll want the header, body tags, and content.';
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T11:34:29.870

您必须生成 HTML，而不是 MAMP、LAMP 或其他任何人。你运行程序，程序产生它的输出。所以如果你想看HTML，只要吐出HTML。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-10T13:40:50.827

其中*phpinfo.php*包含：

```
<?php phpinfo(); 
```

从控制台生成*phpinfo()*输出的 HTML 文件：

```
php-cgi phpinfo.php > phpinfo.html 
```

如果您希望从控制台执行时输出包含 HTML，重要的是使用**php-cgi**而不是**php 。**

# c - SDL 函数名称？

> ID：13528221
> 
> 赞同：1
> 
> 时间：2012-11-23T11:32:05.407
> 
> 标签：c, sdl

所以，我正在使用 C 学习 SDL。

经过一番折腾，我设法让 SDL_Init() 给出分段错误。经过一番调查，原来罪魁祸首是我创建了一个函数 int connect()。如果我将函数重命名为其他名称，例如 my_connect()，那么一切正常。

我发现一个名为 connect() 的函数已经存在于 SDL 库中的某个地方，我的定义导致了冲突。但是，[API](http://www.libsdl.org/cgi/docwiki.cgi/SDL_API/)没有提到名为 connect 的函数或类似的函数。

使用 SDL 时我应该避免使用其他名称吗？我在哪里可以找到它们的列表？

...或者这只是需要封装的另一个很好的例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:35:30.710

所有 SDL 名称都以 SDL_ 开头。但是，SDL 可以调用标准 C 函数（例如 connect）来运行。如果您的应用程序使用该名称创建了一个全局函数，它将替换标准库中的那个，从而使 SDL 使用您的而不是全局函数。使用不同的名称确实可以解决问题。另一种选择是使您的函数静态（当然，您不能在全局范围内需要它）。

# javascript - 获取/保存后更新主干子模型

> ID：13528222
> 
> 赞同：7
> 
> 时间：2012-11-23T11:32:05.780
> 
> 标签：javascript, backbone.js

在我的 Backbone 应用程序中，我有一个由几个子模型作为参数组成的模型。

我是这样定义的：

```
app.Models.Account = Backbone.Model.extend({

    initialize : function( ) {
        this.set( { 
                info     : new app.Models.Info(),
                logins   : new app.Collections.Logins(),
                billing  : new app.Models.Billing(),
            } );
    }

}); 
```

问题是在获取和保存时。例如，当我获取 JSON 响应时，包括一个对象`info`、一个数组`logins`和一个对象`billing`。Backbone 自动将它们分配为普通参数，这意味着子模型被一个简单的对象覆盖。

我目前的解决方案是`fetch`像这样覆盖模型的方法：

```
 fetch: function( options ) {
      options = options ? _.clone(options) : {};
      var model = this;
      var success = options.success;
      options.success = function(resp, status, xhr) {
        resp = model.parse( resp, xhr );

        model.get('info').set(resp.info);

        model.get('logins').reset(resp.logins);

        model.get('billing').set(resp.billing);

        if (success) success(model, resp);
      };

      options.error = Backbone.wrapError(options.error, model, options);
      return (this.sync || Backbone.sync).call(this, 'read', this, options);
    } 
```

但是，这仅用于获取。并且由于在调用该`save()`方法时会返回创建的模型的更新状态，因此我还必须覆盖该`save()`方法。

有什么好的方法可以解决这个问题吗？

也许覆盖该`set()`方法可能会起作用，但是我担心这意味着我将开始偏离 Backbone 代码库。

我也想过像这样使用 parse 方法

```
 parse : function ( response ) {
        this.model.get('info').set(response.info);
        response.info = this.model.get('info');

        this.model.get('logins').reset(response.logins);
        response.logins = this.model.get('logins')

        this.model.get('billing').set(response.billing);
        response.billing = this.model.get('billing');

        return response;
    } 
```

这将创建对已更新子模型的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:07:21.897

我通常`parse`用于子模型，如您的第二个示例（尽管请注意您需要`response`在最后返回）。我认为这在概念上是准确的，`parse`将服务器端表示转换为客户端表示的适当位置也是如此。我相信这也应该适用`save`，尽管我还没有测试过，因为`parse`保存响应也被调用了。

以我的经验，压倒`set`一切不过是麻烦——它往往会产生意想不到的副作用，最好避免。

# iphone - iOS RestKit + 核心数据。获取缓慢和核心数据错误

> ID：13528223
> 
> 赞同：0
> 
> 时间：2012-11-23T11:32:06.497
> 
> 标签：iphone, ios, web-services, core-data, restkit

我正在使用 Restkit 和 Core Data 从 Web 服务中获取和存储数据。我有两个问题。第一个是获取 3200 条记录大约需要 10 秒。我想它不应该这么慢。这是我的代码：

```
- (void)fetchDataFromRemote{

    RKManagedObjectMapping *coursesMapping = [RKManagedObjectMapping mappingForClass:[Course class] inManagedObjectStore:[[RKObjectManager sharedManager] objectStore]];
    [coursesMapping mapKeyPathsToAttributes:@"code", @"code",@"name",@"name", nil];
    //Set the primary key. Records in this way are not duplicated when fetched
    coursesMapping.primaryKeyAttribute = @"code";
    [[[RKObjectManager sharedManager] mappingProvider] setMapping:coursesMapping forKeyPath:@"course"];

    RKManagedObjectMapping *cacheMapping = [RKManagedObjectMapping mappingForClass:[Cache class] inManagedObjectStore:[[RKObjectManager sharedManager] objectStore]];
    [cacheMapping mapKeyPathsToAttributes:@"updated",@"updated",@"expires",@"expires", nil];
    //Set the primary key. Records in this way are not duplicated when fetched
    cacheMapping.primaryKeyAttribute = @"expires";

    [coursesMapping mapRelationship:@"cache" withMapping:cacheMapping];
    [[[RKObjectManager sharedManager] mappingProvider] setMapping:cacheMapping forKeyPath:@"cache"];

    RKURL *URL = [RKURL URLWithBaseURL:[[RKObjectManager sharedManager] baseURL] resourcePath:@"/course/-" queryParameters:nil];

    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@", [URL resourcePath]] delegate:self];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    NSLog(@"Start:%@",[NSDate date]);
} 
```

当我收到来自服务器的响应时：

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{

    NSLog(@"End:%@",[NSDate date]);
    //Dismiss the activity indicator
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    NSLog(@"objects[%d]", [objects count]);

    self.coursesArray = objects;

    //Initialize the filtered array
    self.filteredCoursesArray = [[NSMutableArray alloc] initWithCapacity:[self.coursesArray count]];

    [self.tableView reloadData]; 
```

}

我想这与我在网上找到的教程没有什么不同。

第二个问题与上述方法有关`fetchDataFromRemote:` 当我添加这串行时：

```
RKManagedObjectMapping *cacheMapping = [RKManagedObjectMapping mappingForClass:[Cache class] inManagedObjectStore:[[RKObjectManager sharedManager] objectStore]];
        [cacheMapping mapKeyPathsToAttributes:@"updated",@"updated",@"expires",@"expires", nil];
        //Set the primary key. Records in this way are not duplicated when fetched
        cacheMapping.primaryKeyAttribute = @"expires";

        [coursesMapping mapRelationship:@"cache" withMapping:cacheMapping];
        [[[RKObjectManager sharedManager] mappingProvider] setMapping:cacheMapping forKeyPath:@"cache"]; 
```

我遇到了一个例外，`tableview:cellForRowAtIndexPath:`因为该对象似乎不再是“课程”对象而是“缓存”对象，因此向“缓存”对象不知道的选择器发送消息会使应用程序崩溃。如果我在一切正常之前删除线条，但我需要设置这种关系。我不确定我是否一切正常，我是 Core Data 的新手。

任何帮助将非常感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:20:43.977

你的方法对我来说很好。3200 个对象的 10 秒持续时间似乎很慢，但取决于您的映射和关系。

如果您想在导入期间检查任何错误，您可以 1) 在您的方案中启用 SQL 输出或 2) 记录 RestKit 提供的所有输出以确定导入中的错误，这将减慢进度。

```
1) -com.apple.CoreData.SQLDebug 1 // Add in "Arguments" Tab > "Arguments Passed On Launch"
2) RKLogConfigureByName("RestKit/*", RKLogLevelTrace); // Add to AppDelegate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:30:24.507

问题在于您的代码本身。您使用一些计数初始化过滤后的数组，但从未向其中添加对象。如果您将方法替换为，这将得到解决；

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{

    NSLog(@"End:%@",[NSDate date]);
    //Dismiss the activity indicator
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    NSLog(@"objects[%d]", [objects count]);

    self.coursesArray = objects;

    //Initialize the filtered array
    self.filteredCoursesArray = [[NSMutableArray alloc] initWithobjects:objects];

    [self.tableView reloadData];
`] 
```

# c# - 方法反射中的 NullReferenceException

> ID：13528226
> 
> 赞同：1
> 
> 时间：2012-11-23T11:32:14.027
> 
> 标签：c#, nullreferenceexception

我正在尝试创建将显示特定类型具有的所有方法的方法。
代码是：

```
public static void AllMethods(Type t)
    {
        var query = from x in t.GetMethods() select x;
        foreach (var item in query)
            Console.WriteLine(item.Name);
    } 
```

我尝试了另一个版本：

```
public static void AllMethods(Type t)
    {
        MethodInfo[] m = t.GetMethods();
        foreach (MethodInfo item in m)
            Console.WriteLine(item.Name);
    } 
```

两个版本都可以编译，但是在传递参数时，会发生 NullReferenceException：

```
static void Main(string[] args)
    {   
        AllMethods(Type.GetType("Z")); // Z is a class name

        Console.ReadLine();
    } 
```

我想解决方案很简单，但我的大脑现在无法弄清楚）
有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:33:42.523

我的猜测是，要么`Z`不是*完全限定的*类名（您需要包含命名空间），要么是既不在 mscorlib 也不在调用程序集中的类的名称。要使用来自另一个程序集的类，您还需要包含程序集名称（如果它是强名称，则包括版本号等）。或者使用`Assembly.GetType()`哪个更简单，如果您已经引用了程序集，例如因为您知道同一程序集中的另一种类型。

假设我是对的，您应该`AllMethods`完全忽略您的方法。而是检查这个：

```
Type type = Type.GetType(...);
Console.WriteLine("type is null? {0}", type == null); 
```

当然，如果您在编译时知道类型，最好使用`typeof`.

# vb.net - IF比较中忽略大小写

> ID：13528227
> 
> 赞同：3
> 
> 时间：2012-11-23T11:32:15.993
> 
> 标签：vb.net, visual-studio, if-statement, case-sensitive, ignore-case

有没有一种简单的方法可以与忽略大小写进行比较？

```
If file.Extension = ".Lnk" Then MsgBox(file.Extension) 
```

我要做的是获取所有“.lnk”或“.LNK”或“.lNk”或“”.Lnk”等......

我知道这可能与 RegEx 相关，但是......该示例有一个简单的方法吗？

谢谢你的阅读

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:33:23.973

使用 ToLower 将扩展名转换为小写，然后进行比较

```
If file.Extension.ToLower = ".lnk" Then MsgBox(file.Extension) 
```

并为此忘记正则表达式。这真的是矫枉过正和不恰当

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-25T02:55:48.730

用于`String.Equals`字符串比较。忽略大小写使用`CurrentCultureIgnoreCase`or `InvariantCultureIgnoreCase`。

```
If String.Equals("AAA", "aaa", StringComparison.InvariantCultureIgnoreCase) Then

    'more code

End If 
```

[MSDN：String.Equals 方法（字符串）](https://msdn.microsoft.com/en-us/library/858x0yyx(v=vs.110).aspx)

[MSDN：明确指定字符串比较](https://msdn.microsoft.com/en-us/library/dd465121(v=vs.110).aspx#specifying_string_comparisons_explicitly)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T11:51:17.113

使用它来忽略大小写比较

```
If String.Compare(file.Extension, ".lnk", True) = 0 Then MsgBox(file.Extension) 
```

将 true 更改为 false 以进行区分大小写的比较

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T15:13:46.687

模块测试

```
Sub Main()
    Dim userString As String = Nothing
    Dim finalString As String = "Jacob"

    Console.WriteLine("Enter username")
    userString = Console.ReadLine()

    If String.Compare(finalString, userString, True) = 0 Then
        Console.WriteLine("Access Granted")
    Else
        Console.WriteLine("Access Denied")
    End If

    Console.ReadLine()

End Sub 
```

端模块

# c# - 我有一个必须使用按钮自动刷新的 Windows 窗体

> ID：13528228
> 
> 赞同：0
> 
> 时间：2012-11-23T11:32:16.087
> 
> 标签：c#

我有一个设置为使用按钮自动刷新的 Windows 窗体，如下所示：（*代码不起作用*）怎么办？

折叠 | 复制代码

```
private void Refresh_Click(object sender, EventArgs e)
{
    this.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:53:24.193

此代码肯定会刷新表单。然而，几乎不可能产生任何明显的差异，Windows 和 Winforms 已经非常擅长在没有任何帮助的情况下保持表单更新。您还必须做*一些其他*事情，这会使表单绘制不同。

一个简单的例子：

```
 private bool drawMessage;

    private void Refresh_Click(object sender, EventArgs e) {
        drawMessage = !drawMessage;
        this.Invalidate();
    }

    protected override void OnPaint(PaintEventArgs e) {
        if (drawMessage) {
            TextRenderer.DrawText(e.Graphics, "You clicked Refresh", this.Font, Point.Empty, this.ForeColor);
        }
        base.OnPaint(e);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:41:39.037

您拥有的应该刷新该事件所属的当前表单。由于缺乏可理解的信息（发生了什么以及为什么说它不起作用？等等），很难弄清楚您的问题是什么。但是，您可以尝试

```
private void Refresh_Click(object sender, EventArgs e)
{
    this.Update();
} 
```

因此，这两种方法的区别在于：

**控制.更新（）**

如果窗口的更新区域不为空，Update() 函数调用 UpdateWindow 函数，该函数通过向（控件的）窗口发送 WM_PAINT 消息来更新控件的客户区。此函数绕过应用程序消息队列直接向 WNDPROC() 发送 WM_PAINT。

因此，如果窗口更新区域之前“无效”，那么调用“更新”将立即“更新”（并导致重新绘制）无效。

**控制.刷新（）**

Refresh() 调用 Invalidate(true) 使控件及其子项无效，然后调用 Update() 强制绘制控件，使无效是同步的。

我希望这有帮助。

# php - 选择要查看的论坛时出现 MySql/PHP 论坛问题

> ID：13528231
> 
> 赞同：0
> 
> 时间：2012-11-23T11:32:27.527
> 
> 标签：php, html, mysql, phpmyadmin, mysql-error-1064

我有 2 个文件fourm.php 和viewfourm.php

首先是fourm.php

```
<?php

$host="mysql13.000webhost.com"; // Host name 
$username="a2670376_Users"; // Mysql username 
$password="PASS"; // Mysql password 
$db_name="a2670376_Pass"; // Database name 
$tbl_name="fourm"; // Table name 

  // Connect to server and select database.
 mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
 mysql_select_db("$db_name")or die("cannot select DB");

  // select record from mysql 
  $sql="SELECT * FROM $tbl_name";
  $result=mysql_query($sql);
 ?>
<table>
<tr>
<td align="center"><strong>Post Number</strong></td>
<td align="center"><strong>UserName</strong></td>
<td align="center"><strong>Topic</strong></td>
<td align="center"><strong>Date</strong></td>
<td align="center"><strong>View</strong></td>
</tr>
<?php
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td><? echo $rows['fourmid']; ?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><? echo $rows['username']; ?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><? echo $rows['fourmname']; ?   >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><? echo $rows['date']; ?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href="viewfourm.php?id=<? echo $rows['fourmid']; ?>">View Topic</a></td>
<?php
 // close while loop 
 }
 ?>

</tr>
</table>
<?php
// close connection; 
mysql_close();
?>
<hr width='67%' color='#29001F' size='3'/>
</center> 
```

现在查看fourm.php

```
 <?php

 $host="mysql13.000webhost.com"; // Host name 
 $username="a2670376_Users"; // Mysql username 
 $password="PASS"; // Mysql password 
 $db_name="a2670376_Pass"; // Database name 
 $tbl_name="fourm"; // Table name 

   // Connect to server and select database.
   mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
   mysql_select_db("$db_name")or die("cannot select DB");

    // select record from mysql 
   $sql="SELECT * FROM $tbl_name";
   $result=mysql_query($sql);
   ?>
  <table>
  <tr>
  <td align="center"><strong>Post Number</strong></td>
 <td align="center"><strong>UserName</strong></td>
 <td align="center"><strong>Topic</strong></td>
 <td align="center"><strong>Date</strong></td>
 <td align="center"><strong>View</strong></td>
 </tr>
 <?php
 while($rows=mysql_fetch_array($result)){
 ?>
 <tr>
 <td><? echo $rows['fourmid']; ? >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
 <td><? echo $rows['username']; ?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><? echo $rows['fourmname']; ?   >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><? echo $rows['date']; ?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href="fourm.php">back/a></td>
<?php
 // close while loop 
 }
 ?>

</tr>
</table>
<?php
// close connection; 
mysql_close();
?>
<hr width='67%' color='#29001F' size='3'/>
</center> 
```

现在在forum.php上，当我从MySql数据库中选择什么“论坛”时，我想查看它会加载我想修复的所有论坛我知道为什么它这样做它的原因是它与第一个脚本相同，只是修改了一点我做了我能做的。我正在 MySql 数据库中选择论坛的 thruefourmid 标签，这就是“>查看主题”的含义，它应该加载带有所选 id 的论坛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:43:07.037

在 viewfourm.php`$sql="SELECT * FROM $tbl_name";`像这样修改你的 sql 查询

`$fourmid= $_POST['fourmid']; //if passing using get method use $_GET['fourmid']; $sql = "SELECT * FROM $tbl_name WHERE`四中`= '$fourmid'";`

您还必须将fourmid 从fourm.php 传递给viewfourm.php

**编辑**

做一个这样的链接

`<td> <a href="viewfourm.php?fourmid=<? echo $rows['fourmid']; ?>"> <? echo $rows['fourmname']; ?>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </a> </td>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:33:02.320

在 form.php 中获取值

```
a href="viewfourm.php?id=<? echo $rows['fourmid']; ?>">View Topic</a> 
```

//viewform.php

$fourmid= $_REQUEST[' **id** '];.

$sql = "SELECT * FROM $tbl_name WHEREfourmid='$fourmid'";

试试看..

# python - 递归字符串 - 回到字符串的开头？

> ID：13528235
> 
> 赞同：1
> 
> 时间：2012-11-23T11:32:34.220
> 
> 标签：python, algorithm, recursion, python-3.x

鉴于在递归中您使用分而治之的方法将问题分解为更小的部分，那么您将如何从问题的开头到问题的结尾读取数据？

**示例**：我有一个`encrypt()`函数将字符串中的字符替换为右侧的字符 3 个索引：

`A`例如，在字符串`"ABCDEF"`中`D`

到目前为止，我递归地执行它直到当右侧的 3 个索引未定义时它停止的点，但这使字符串的最后一位与原始的相同。

**例子**：`"ABCDEF"`变成`"DEFDEF"`

有没有一种方法可以在递归调用期间以有效的方式将字符串的开头传递给最里面的函数？

这是我目前的代码：

```
def shift_cipher_noloop(plain):

    encrypted = ""

    if(plain == ""):
        encrypted = ""

    else:
        if(len(plain) > 3):            
            temp_sub = plain[3]          
            encrypted = encrypted + temp_sub
            encrypted = encrypted + shift_cipher_noloop(plain[1:])

        else:
            temp_sub = plain[0] 
            encrypted = encrypted + temp_sub
            encrypted = encrypted + shift_cipher_noloop(plain[1:])

    return encrypted

x = "ABCDEFGHIJK"

y = shift_cipher_noloop(x)

print(y) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:40:10.833

可能这并不能完全解决您的问题，但您可能需要对其进行一点成型以使其适合。正如我在某个地方看到的你想要递归。我刚刚展示了当你到达字符串的末尾时如何移动到开头。

取字符串长度的模数`i + 3`自动移到开头：-

```
>>> my_str = "ABCDEF"
>>> length = len(my_str)

>>> for i in range(length):
        print my_str[(i + 3) % length],

D E F A B C 
```

所以，当`i = 3`, `i + 3 = 6`, 和`6 % 6 = 0`-> 回到第一个字符

* * *

如果你想使用`Recursion`，这里是你修改后的程序：-

```
def shift_cipher_noloop(plain, i):

    if(plain == ""):
        return ""

    else:
        # Iterate with your string, moving first character to last on each iteration
        if len(plain) > 3 and i > 0: 
            return shift_cipher_noloop(plain[1:] + plain[0], i - 1)

        else:
            # else Will be executed when either len <= 3, or `i <= 0`.
            # when (i <= 0) is true, you have created a new string, 
            # with each character shifted by `original i` indices. 
            # So, just return it.

            return plain

x = "ABCDEF"
index_to_shift = 3
y = shift_cipher_noloop(x, len(x) - index_to_shift)

print(y) 
```

**输出 ： -**

```
DEFABC 
```

我在你的 中添加了一个参数`method`，我用它来获取适当的索引。而且，每次将第一个字符移到末尾时，我都会将完整的字符串传递给该方法。

此外，如果`len(plain) <= 3`，您可以简单地返回字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:12:57.827

通常，可以选择将附加参数传递给递归函数，该函数会原封不动地向下传递到递归的更深嵌套中。您还可以使用始终可以访问外部参数的内部函数：

```
def shift_cipher_noloop(original):
  def encrypt_recursion(plain):
    encrypted = ""
    if plain == "":
      encrypted = ""
    elif len(plain) > 3:
      encrypted += plain[3]
      encrypted += encrypt_recursion(plain[1:])
    else:
      encrypted += original[3-len(plain)]
      encrypted += encrypt_recursion(plain[1:])
    return encrypted
  return encrypt_recursion(original)

shift_cipher_noloop('abcdefghijklop')
'defghijklopabc' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:48:06.293

如果您不必使用递归，那么我会使用简单的字符串方法。

```
def encrypt(text):
  return text[3:] + text[:3] 
```

我也很喜欢 Rohit Jain 的回答

# oauth-2.0 - Google OAuth2 服务帐号授权

> ID：13528238
> 
> 赞同：1
> 
> 时间：2012-11-23T11:32:40.427
> 
> 标签：oauth-2.0, google-drive-api, service-accounts

我正在尝试使用“服务帐户”授权执行 Google Drive API 调用。

我正在调用 API，但`files.list`返回给我的是空集，同时驱动器不是空的。我想我也应该指定`prn`字段以便代表具体用户执行调用（我真的不知道在`prn`未指定时调用谁）。问题是当我指定`prn`授权时返回`access_denied`错误。

```
{
  "error" : "access_denied"
} 
```

文档说我应该从控制面板 [http://support.google.com/a/bin/answer.py?hl=en&answer=162106启用客户端 API 访问](http://support.google.com/a/bin/answer.py?hl=en&answer=162106)

这是我所做的，但这并没有多大帮助，它仍然给了我`access_denied`.

![“授权 API 客户端”屏幕截图](../Images/1ff76f1162dc888acf1804dd4cd1aa09.png)

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:17:12.900

你几乎是对的。您确实需要授权您的应用访问域的云端硬盘。为此，您必须将您选择的范围与您可以在 API 控制台中找到的**服务帐户 ID相关联。**此关联是在您发布了屏幕截图的域的管理面板中进行的。

我想你明白了，但不要忘记在你的 Oauth2 请求中使用**服务帐户电子邮件。**

仅供参考，如果您不指定*prn*，您将访问应用程序的驱动器，该驱动器无法通过 Web UI 访问

# swing - 找不到jar文件

> ID：13528243
> 
> 赞同：-2
> 
> 时间：2012-11-23T11:33:04.347
> 
> 标签：swing, java, sun

从哪里可以下载这些类的jar文件

```
 import com.sun.jmx.snmp.tasks.Task;
 import com.sun.java.swing.Painter;
 import com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel;
 import com.sun.org.apache.xpath.internal.operations.String; 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:35:07.267

寻找的最简单的地方`jar`是：

[找罐子](http://www.findjar.com/index.x)

但是，您可以在此处找到您提到的课程：

[com.sun.jmx.snmp.tasks.Task](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/jmx/snmp/tasks/Task.java.html)

[com.sun.java.swing.Painter](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/java/swing/Painter.java)

[com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel](http://www.docjar.com/html/api/com/sun/java/swing/plaf/nimbus/NimbusLookAndFeel.java.html)

[com.sun.org.apache.xpath.internal.operations.String](http://www.docjar.com/docs/api/com/sun/org/apache/xpath/internal/operations/String.html)

这就是[瓦什](https://stackoverflow.com/users/390695/vash)提到的。所有都存在于[rt.jar](https://stackoverflow.com/questions/5073967/what-is-the-use-of-rt-jar-file-in-java)中。在您的系统上，您可以在此处找到它：[JDK 和 JRE 文件结构](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/jdkfiles.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:35:25.890

看起来像[rt.jar](http://www.findjar.com/jar/com.sun/jars/rt.jar.html;jsessionid=67A7B1C9871719034E2E1332C31E3E6A)

看看[findjar](http://www.findjar.com/)有很大帮助。

# iphone - 如何在 ios 中使用 URL 和 NSString 在 UIImageView 上显示图像？

> ID：13528244
> 
> 赞同：7
> 
> 时间：2012-11-23T11:33:03.313
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想在`UIImageView` 使用 URL 和`NSString`. 我无法显示图像。

我的代码是：

```
UIImageView *view_Image = [[UIImageView alloc]initWithFrame:CGRectMake(view_Image_Pos_X, view_Image_Pos_Y, 179, 245)];

view_Image.backgroundColor = [UIColor greenColor];
view_Image.tag = img;
view_Image.userInteractionEnabled=YES;
view_Image.autoresizesSubviews = YES;
view_Image.alpha = 0.93;  
[self.view addSubview:view_Image]; 
```

这是我正在尝试的：

```
 if (img == 0) {

 NSString *url_Img1 = @"http://opensum.in/app_test_f1/;";
 NSString *url_Img2 = @"45djx96.jpg";

 NSString *url_Img_FULL = [NSString stringWithFormat:@"%@%@", url_Img1,url_Img2];

 NSLog(@"Show url_Img_FULL: %@",url_Img_FULL);

 NSURL *url_img = [NSURL URLWithString:url_Img_FULL];
 NSLog(@"Show: url_img %@",url_img);

// Here below line working perfectly and image is showing             

view_Image.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://opensum.in/app_test_f1/45djx96.jpg"]]];   // working code 
```

但我不想要这个我想连接两个 url 使一个 url(ie;url_Img_FULL) 然后传递给如下图像：

`UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url_Img_FULL]]]; // Not Working`

我想要来自“url_Img_FULL”（即：两个 url 的组合）图像将显示。您还可以检查 url 是否正常工作。任何想法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-23T11:41:20.223

```
 NSString *url_Img1 = @"http://opensum.in/app_test_f1";
    NSString *url_Img2 = @"45djx96.jpg";

    NSString *url_Img_FULL = [url_Img1 stringByAppendingPathComponent:url_Img2];

    NSLog(@"Show url_Img_FULL: %@",url_Img_FULL);
    view_Image.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url_Img_FULL]]]; 
```

尝试这个。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-23T11:48:17.670

**去做就对了**

```
NSString *imgURL = @"imagUrl";

NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:imgURL]];

[YourImgView setImage:[UIImage imageWithData:data]]; 
```

**使用 GCD：**如果您不想挂起您的应用程序，那么您可以在后台下载您的图像。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSString *imgURL = @"imagUrl";
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:imgURL]];

    //set your image on main thread.
    dispatch_async(dispatch_get_main_queue(), ^{
        [YourImgView setImage:[UIImage imageWithData:data]];
    });    
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-02T12:28:51.607

**对于 Swift 3.0**

```
class ImageLoader {

var cache = NSCache<AnyObject, AnyObject>()

class var sharedLoader : ImageLoader {
    struct Static {
        static let instance : ImageLoader = ImageLoader()
    }
    return Static.instance
}

func imageForUrl(urlString: String, completionHandler:@escaping (_ image: UIImage?, _ url: String) -> ()) {

    DispatchQueue.global().async {
        let data: NSData? = self.cache.object(forKey: urlString as AnyObject) as? NSData

        if let goodData = data {
            let image = UIImage(data: goodData as Data)
            DispatchQueue.main.async {
                completionHandler(image, urlString)
            }
            return
        }

        let url:NSURL = NSURL(string: urlString)!
        let task = URLSession.shared.dataTask(with: url as URL) {
            data, response, error in
            if (error != nil) {
                print(error?.localizedDescription)
                completionHandler(nil, urlString)
                return
            }

            if data != nil {
                let image = UIImage(data: data!)
                self.cache.setObject(data as AnyObject, forKey: urlString as AnyObject)
                DispatchQueue.main.async {
                    completionHandler(image, urlString)
                }
                return
            }
        }
        task.resume()
    }

}
} 
```

**用法**

```
ImageLoader.sharedLoader.imageForUrl(urlString: imageUrl as! String) { (image, url) in
            self.imageView.image = image
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T11:45:06.433

从以下代码获取图像

```
NSData *imageUrl = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"Your image URL Here"]]; 
```

然后使用以下代码设置图像

```
[UIImage imageWithData:imageUrl]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T11:49:16.977

尝试这个

```
NSString* combinedString = [stringUrl1 stringByAppendingString stringUrl2]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-10T09:14:11.210

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSString *str = self.recordlarge[@"images"];
    NSLog(@"Project Gallery id Record : %@",str);
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:str]];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.myimagelarge setImage:[UIImage imageWithData:data]];
    });    
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T11:38:56.613

我测试了您的网址并发现了问题。

问题在于这一行：

```
NSString *url_Img1 = @"http://opensum.in/app_test_f1/;"; 
```

您正在添加`;`最后一个 url 字符串。

所以当你连接两个字符串时，它看起来像：`http://opensum.in/app_test_f1/;45djx96.jpg`

这不是一个有效的网址。

正确的网址是：`http://opensum.in/app_test_f1/45djx96.jpg`

将代码更改为：

```
 NSString *url_Img1 = @"http://opensum.in/app_test_f1/"; 
```

它会工作的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-23T11:41:00.580

要从 url 显示图像，你可以试试这个......

```
 [ImageViewname setImageWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",your url]]]; 
```

要从应用程序本地显示图像，您可以试试这个....

```
 ImageViewname.image = [UIImage imageNamed:@"test.png"]; 
```

我希望这能帮到您。

快乐的编码...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-23T11:34:39.840

为您的此要求尝试 AsyncImageView 请参阅此示例

1.  [异步图像视图](https://github.com/nicklockwood/AsyncImageView)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-16T07:52:24.440

**对于 Swift 3.0**

**同步：**

```
if let filePath = Bundle.main().pathForResource("imageName", ofType: "jpg"), image = UIImage(contentsOfFile: filePath) {
    imageView.contentMode = .scaleAspectFit
    imageView.image = image
} 
```

**异步：**

使用完成处理程序创建一个方法以从您的 url 获取图像数据

```
func getDataFromUrl(url:URL, completion: ((data: Data?, response: URLResponse?, error: NSError? ) -> Void)) {
    URLSession.shared().dataTask(with: url) {
        (data, response, error) in
        completion(data: data, response: response, error: error)
    }.resume()
} 
```

创建下载图像的方法（启动任务）

```
func downloadImage(url: URL){
    print("Download Started")
    getDataFromUrl(url: url) { (data, response, error)  in
        DispatchQueue.main.sync() { () -> Void in
            guard let data = data where error == nil else { return }
            print(response?.suggestedFilename ?? url.lastPathComponent ?? "")
            print("Download Finished")
            self.imageView.image = UIImage(data: data)
        }
    }
} 
```

**用法：**

```
override func viewDidLoad() {
    super.viewDidLoad()
    print("Begin of code")
    if let checkedUrl = URL(string: "http://www.apple.com/euro/ios/ios8/a/generic/images/og.png") {
        imageView.contentMode = .scaleAspectFit
        downloadImage(url: checkedUrl)
    }
    print("End of code. The image will continue downloading in the background and it will be loaded when finished.")
} 
```

**扩大：**

```
extension UIImageView {
    func downloadedFrom(link: String, contentMode mode: UIViewContentMode = .scaleAspectFit) {
        guard let url = URL(string: link) else { return }
        contentMode = mode
        URLSession.shared().dataTask(with: url) { (data, response, error) in
            guard
                let httpURLResponse = response as? HTTPURLResponse where httpURLResponse.statusCode == 200,
                let mimeType = response?.mimeType where mimeType.hasPrefix("image"),
                let data = data where error == nil,
                let image = UIImage(data: data)
                else { return }
            DispatchQueue.main.sync() { () -> Void in
                self.image = image
            }
        }.resume()
    }
} 
```

**用法：**

```
override func viewDidLoad() {
    super.viewDidLoad()
    print("Begin of code")
    imageView.downloadedFrom(link: "http://www.apple.com/euro/ios/ios8/a/generic/images/og.png")
    print("End of code. The image will continue downloading in the background and it will be loaded when finished.")

} 
```

# java - 为什么 Html 内容显示在邮件中，因为它是由 Java Mail 发送的？

> ID：13528246
> 
> 赞同：2
> 
> 时间：2012-11-23T11:33:16.823
> 
> 标签：java, jakarta-mail

```
MimeBodyPart mbp = new MimeBodyPart();
mbp.setText(eMaster.getContent());
multipart.addBodyPart(mbp); 
```

内容是：`<html><b>Hello How are you doing....</b></html>`

它显示在带有 html 标签的邮件中，为什么？请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:38:55.147

试试这个

```
mbp.setContent("<h1>Hello</h1>", "text/html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:15:40.947

```
mbp.setText(eMaster.getContent(), "utf-8", "html"); 
```

# html - Visual Studio 2010 不再显示 html 文件

> ID：13528247
> 
> 赞同：0
> 
> 时间：2012-11-23T11:33:20.960
> 
> 标签：html, visual-studio-2010

自从我为我的 VC++ 项目启动 Visual Studio 2010 已经有几个星期了，但今天我发现它不再在我的解决方案中显示 html (.htm) 文件。这些用于帮助、自述文件等。当我双击文件进行编辑时，会打开一个新的源窗口，但它完全是空白的。其他一切正常（显示、构建等）。

实际文件内容非常好 - 它将在浏览器中打开并按预期显示。请问有什么建议吗？所有 .htm 文件的行为都相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:44:31.363

尝试安装（重新安装）Visual Studio 2010 的 Visual Web Developer 组件。它适用于我 :)

# java - 在 Spring 中将字符串数组注入 bean

> ID：13528250
> 
> 赞同：17
> 
> 时间：2012-11-23T11:33:26.607
> 
> 标签：java, spring

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://            www.springframework.org/schema/beans/spring-beans.xsd">

   <bean id="test" class="com.Test">
        <constructor-arg>
            <list>
                <value>aa</value>
                <value>bb</value>
                <value>cc</value>
            </list>
        </constructor-arg>
    </bean>
</beans> 
```

这是我当前的 XML。如果`Test`只拿一个清单 - 一切都会好起来的。

问题是`Test`需要一个字符串数组。

春节怎么办？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-23T11:38:45.367

你应该使用：

```
<constructor-arg>
    <array>
        <value>aa</value>
        <value>bb</value>
        <value>cc</value>
    </array>
</constructor-arg> 
```

> 一个数组可以包含多个内部 bean、ref、collection 或 value 元素。此配置元素将始终生成一个数组，即使在被定义为例如具有值类型 Object 的映射的值时也是如此。

您还可以指定要传递的值类型：

```
<array value-type="java.lang.String">
  <value>aa</value>
  <value>bb</value>
  <value>cc</value>
</array> 
```

**值类型**

> 嵌套值的默认 Java 类型。必须是完全限定的类名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T11:36:43.100

而不是`<list>`使用

```
<array>
  <value>aa</value>
  <value>bb</value>
  <value>cc</value>
</array> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-02T09:58:40.167

使用 Spring 3.2.8 版，您可以使用

```
<constructor-arg>
    <list>
        <value>aa</value>
        <value>bb</value>
        <value>cc</value>
    </list>
</constructor-arg> 
```

没有问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-25T20:46:58.590

如果构造函数有`String[]`作为参数（也包括`String...`），您可以提供一个逗号分隔的列表：

```
<constructor-arg value="Hindustan Moters,Tata Moters,Ashoka Leyland"/> 
```

众所周知，这用于将例如 H2 DB 服务器实例化为 bean。参见例如[这里](https://stackoverflow.com/questions/7309359/view-content-of-h2-or-hsqldb-in-memory-database/7315175)。

不知道是哪个版本介绍的。

# ios - 使用 ios 应用程序作为 facebook 应用程序

> ID：13528252
> 
> 赞同：0
> 
> 时间：2012-11-23T11:33:28.123
> 
> 标签：ios, facebook, migrate

我是 Facebook 应用程序设计的新手。我在网上搜索我的问题，但找不到解决方案。

我最近创建了一个 iOS 应用程序。我想创建与 Facebook 应用程序具有相同资源的相同应用程序。

我想知道除了为 Facebook 重新创建应用程序之外，是否还有一种简单的方法？如果没有，你建议我怎么做。我知道objective-c、java、C++、C。哪种方式对我来说很容易？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T11:51:05.380

真的很难理解你面临的问题是什么，如果你能改写这个问题，那就太好了。，

回答我理解你想将你的应用程序与 facebook 集成的部分，你可以尝试以下

[Facebook Ios SDK](https://github.com/facebook/facebook-ios-sdk) [Facebook Ios 参考](http://developers.facebook.com/docs/reference/iossdk/)

# c++ - c++向量逆向算法

> ID：13528253
> 
> 赞同：3
> 
> 时间：2012-11-23T11:33:31.337
> 
> 标签：c++

我正在尝试制作一个简单的程序，它基本上颠倒了向量的顺序。换句话说，程序运行后，`x[0]`应该等于`5`。我目前得到的输出是`5234`. `1`某处不见了。我确实包括了`<vector>`标题。提前致谢。

```
int main()
{
    vector<int> x(5);
    x[0] = 1;
    x[1] = 2;
    x[2] = 3;
    x[3] = 4;
    x[4] = 5;
    for(int z = 0; z < x.size()-1; z++)
    {
        int temp = x[x.size() - (1+z)];
        x[x.size() - (1+z)] = x[z];
        x[z] = temp;
    }
    for(int s = 0; s < x.size() - 1; s++)
    {
        cout << x[s] << endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T11:43:20.110

退后一分钟。如果我只是输入交换，你认为这会做什么（伪代码）

```
for( elt1 = begin, elt2 = end-1; elt1 != end; ++elt1, --elt2 )
{
    iter_swap( elt1, elt2 );
} 
```

这不会逆转您的收藏。或者更确切地说，它会，但会再次将它反转回来，让你回到你开始的地方。假设您的收藏有 4 个元素：

```
swap( 0, 3 )
swap( 1, 2 )
swap( 2, 1 )
swap( 3, 0 ) 
```

所以你的终止条件是错误的，你应该只交换一半......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T11:36:17.937

您的循环短 1 个元素。他们应该是

```
for(int z = 0; z < x.size(); ++z) 
```

(dtto 为`s`)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T12:30:27.490

而不是编写代码来反转向量，您应该使用`std::reverse`算法？

[http://www.cplusplus.com/reference/algorithm/reverse/](http://www.cplusplus.com/reference/algorithm/reverse/)

为什么要重新发明轮子？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T12:26:35.087

有几个人指出了如何使您的代码工作。以后我会指出如何避免这个问题：不要（自己）编写代码：

```
std::vector<int> x(5);

std::iota(x.begin(), x.end(), 1);

std::reverse(x.begin(), x.end());

std::copy(x.begin(), x.end(), 
          std::ostream_iterator<int>(std::cout, "\n")); 
```

像这样在复制之前进行反转很常见，以至于标准有一个算法可以将两者结合起来：

```
std::vector<int> x(5);   
std::iota(x.begin(), x.end(), 1);

std::reverse_copy(x.begin(), x.end(),
                  std::ostream_iterator<int>(std::cout, "\n")); 
```

根据情况，使用反向迭代器而不是 reverse_copy 可能更容易：

```
std::vector<int> x(5);   
std::iota(x.begin(), x.end(), 1);

std::copy(x.rbegin(), x.rend(), std::ostream_iterator<int>(std::cout, "\n")); 
```

请注意，在后两种情况下，我们所做的略有不同——我们没有反转向量中的数据，然后从头到尾打印出向量。相反，我们只是以相反的顺序打印出向量，大致相当于：

```
for (int i=x.size(); i>0; i--)
    std::cout << x[i-1] << "\n"; 
```

最后一个细节：我建议不要使用`std::endl`. 我知道很多书（以及老师、讲师、教授等）都用它来代替“\n”，但实际上并非如此。除了写入换行符之外，它还会刷新流。你*几乎*从不想要那个；在极少数情况下，您应该使用`std::flush`它来明确表示您确实想要它。如果你想要一个换行符，只需写一个换行符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T11:50:52.777

您正在交换元素两次。这是一个简单的方法：

```
vector<int> x(5);
x[0] = 1;
x[1] = 2;
x[2] = 3;
x[3] = 4;
x[4] = 5;

int mid = x.size() / 2;
int last = x.size() - 1;

for (int i = 0; i < mid; i++) {
  int tmp = x[i];
  x[i] = last - i;
  x[last - i] = tmp;
}

for (int s = 0; s < x.size(); s++)
  cout << x[s] << endl; 
```

# objective-c - UIMenuController willHideMenu 如果移动则不发送通知，然后通过背景点击解除

> ID：13528259
> 
> 赞同：2
> 
> 时间：2012-11-23T11:34:01.630
> 
> 标签：objective-c, ios, nsnotificationcenter, uitapgesturerecognizer, uimenucontroller

我有一个相当简单的 UILabel 子类，允许点击显示 UIMenuController 以便可以复制文本。在大多数情况下，这一切都很好。

```
#import "EPHighlightLabel.h"
#import <QuartzCore/QuartzCore.h>

@interface EPHighlightLabel()

@property (unsafe_unretained) bool hasMenuController;

@end

@implementation EPHighlightLabel

- (id)init {
    if ( (self = [super init]) ) {
        self.highlightedTextColor = [UIColor blueColor];
    }
    return self;
}

- (void)awakeFromNib {
    [super awakeFromNib];
    self.highlightedTextColor = [UIColor blueColor];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(willHideMenu)
                                                 name:UIMenuControllerWillHideMenuNotification
                                               object:nil];

    self.userInteractionEnabled = YES;
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(wasTapped:)];
    [self addGestureRecognizer:tapGesture];
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    if(action == @selector(copy:)) {
        return YES;
    }
    else {
        return [super canPerformAction:action withSender:sender];
    }
}

- (BOOL)canBecomeFirstResponder {
    return YES;
}

- (BOOL)resignFirstResponder {
    if ([super resignFirstResponder]) {
        self.hasMenuController = false;
        self.highlighted = NO;
        return YES;
    }
    return NO;
}

- (void)copy:(id)sender {
    UIPasteboard *board = [UIPasteboard generalPasteboard];
    [board setString:self.text];
    [self resignFirstResponder];
}

- (void)willHideMenu {
    if (self.hasMenuController) {
        [self resignFirstResponder];
    }
}

- (IBAction)wasTapped:(id)sender {
    if([self isFirstResponder]) {
        self.hasMenuController = false;
        UIMenuController *menu = [UIMenuController sharedMenuController];
        [menu setMenuVisible:NO animated:YES];
        [menu update];
        [self resignFirstResponder];
    }
    else if([self becomeFirstResponder]) {
        self.hasMenuController = true;
        UIMenuController *menu = [UIMenuController sharedMenuController];
        [menu setMenuVisible:NO animated:YES];
        [menu setTargetRect:self.bounds inView:self];
        [menu setMenuVisible:YES animated:YES];
        self.highlighted = YES;
    }
}

@end 
```

`EPHighlightLabel`在视图中，在一个本身就是子视图的 UIView 中有这三个。一切正常，您可以点击标签，文本将突出显示，然后再次点击或点击离开，菜单将被关闭并且标签不突出显示。这是通过`- (void)willHideMenu`调用实现的。但是在以下情况下，不会发送 UIMenuControllerWillHideMenu 通知：

1.  点击任何标签。
2.  标签突出显示，菜单显示。
3.  点击任何其他标签。
4.  以前的标签未突出显示，新标签突出显示并且菜单显示/移动。
5.  点击标签以外的任何地方。菜单已删除，但未发送任何通知。UIMenuControllerWillHideMenu 或 UIMenuControllerDidHideMenu 都不是。

有什么建议吗？

# c# - Windows Phone 8 上的 UDP 多播组

> ID：13528262
> 
> 赞同：55
> 
> 时间：2012-11-23T11:34:14.890
> 
> 标签：c#, sockets, udp, windows-phone-8, datagram

好的，这是我几天来一直试图弄清楚的。我们在 Windows Phone 7 上有一个应用程序，其中电话加入多播组，然后向该组发送和接收消息以相互交谈。注意 - 这是电话到电话的通信。

现在我正在尝试将此应用程序移植到 Windows Phone 8 - 使用 Visual Studio 2012 中的“转换为 Phone 8”功能 - 到目前为止一切顺利。直到我尝试测试电话到电话的通信。手机似乎很好地加入了该组，并且它们可以发送数据报。他们甚至会收到他们发送给群组的消息 - 但是，没有手机会收到来自另一部手机的消息。

这是我页面背后的示例代码：

```
// Constructor
public MainPage()
{
    InitializeComponent();
}

// The address of the multicast group to join.
// Must be in the range from 224.0.0.0 to 239.255.255.255
private const string GROUP_ADDRESS = "224.0.1.1";

// The port over which to communicate to the multicast group
private const int GROUP_PORT = 55562;

// A client receiver for multicast traffic from any source
UdpAnySourceMulticastClient _client = null;

// Buffer for incoming data
private byte[] _receiveBuffer;

// Maximum size of a message in this communication
private const int MAX_MESSAGE_SIZE = 512;

private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
{
    _client = new UdpAnySourceMulticastClient(IPAddress.Parse(GROUP_ADDRESS), GROUP_PORT);
    _receiveBuffer = new byte[MAX_MESSAGE_SIZE];

    _client.BeginJoinGroup(
        result =>
        {
            _client.EndJoinGroup(result);
            _client.MulticastLoopback = true;
            Receive();
        }, null);
}

private void SendRequest(string s)
{
    if (string.IsNullOrWhiteSpace(s)) return;

    byte[] requestData = Encoding.UTF8.GetBytes(s);

    _client.BeginSendToGroup(requestData, 0, requestData.Length,
        result =>
        {
            _client.EndSendToGroup(result);
            Receive();
        }, null);
}

private void Receive()
{
    Array.Clear(_receiveBuffer, 0, _receiveBuffer.Length);
    _client.BeginReceiveFromGroup(_receiveBuffer, 0, _receiveBuffer.Length,
        result =>
        {
            IPEndPoint source;

            _client.EndReceiveFromGroup(result, out source);

            string dataReceived = Encoding.UTF8.GetString(_receiveBuffer, 0, _receiveBuffer.Length);

            string message = String.Format("[{0}]: {1}", source.Address.ToString(), dataReceived);
            Log(message, false);

            Receive();
        }, null);
}

private void Log(string message, bool isOutgoing)
{
    if (string.IsNullOrWhiteSpace(message.Trim('\0')))
    {
        return;
    }

    // Always make sure to do this on the UI thread.
    Deployment.Current.Dispatcher.BeginInvoke(
    () =>
    {
        string direction = (isOutgoing) ? ">> " : "<< ";
        string timestamp = DateTime.Now.ToString("HH:mm:ss");
        message = timestamp + direction + message;
        lbLog.Items.Add(message);

        // Make sure that the item we added is visible to the user.
        lbLog.ScrollIntoView(message);
    });

}

private void btnSend_Click(object sender, RoutedEventArgs e)
{
    // Don't send empty messages.
    if (!String.IsNullOrWhiteSpace(txtInput.Text))
    {
        //Send(txtInput.Text);
        SendRequest(txtInput.Text);
    }
}

private void btnStart_Click(object sender, RoutedEventArgs e)
{
    SendRequest("start now");
} 
```

为了简单地测试 UDP 堆栈，我从[此处](http://code.msdn.microsoft.com/wpapps/Multicast-Sockets-Sample-51190c11)找到的 MSDN 下载了示例，并在一对 Windows Phone 7 设备上进行了测试，它按预期工作。然后我转换到 Windows Phone 8 并部署到我的手机上，设备似乎再次启动了它们的连接，用户可以输入他们的名字。但是，这些设备再次无法看到其他设备或与其他设备通信。

最后，我使用新的 DatagramSocket 实现实现了一个简单的通信测试，我再次看到成功启动，但没有设备间通信。

这是使用数据报套接字实现的页面后面的相同代码：

```
// Constructor
public MainPage()
{
    InitializeComponent();
}

// The address of the multicast group to join.
// Must be in the range from 224.0.0.0 to 239.255.255.255
private const string GROUP_ADDRESS = "224.0.1.1";

// The port over which to communicate to the multicast group
private const int GROUP_PORT = 55562;

private DatagramSocket socket = null;

private void Log(string message, bool isOutgoing)
{
    if (string.IsNullOrWhiteSpace(message.Trim('\0')))
        return;

    // Always make sure to do this on the UI thread.
    Deployment.Current.Dispatcher.BeginInvoke(
    () =>
    {
        string direction = (isOutgoing) ? ">> " : "<< ";
        string timestamp = DateTime.Now.ToString("HH:mm:ss");
        message = timestamp + direction + message;
        lbLog.Items.Add(message);

        // Make sure that the item we added is visible to the user.
        lbLog.ScrollIntoView(message);
    });
}

private void btnSend_Click(object sender, RoutedEventArgs e)
{
    // Don't send empty messages.
    if (!String.IsNullOrWhiteSpace(txtInput.Text))
    {
        //Send(txtInput.Text);
        SendSocketRequest(txtInput.Text);
    }
}

private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
{
    socket = new DatagramSocket();
    socket.MessageReceived += socket_MessageReceived;

    try
    {
        // Connect to the server (in our case the listener we created in previous step).
        await socket.BindServiceNameAsync(GROUP_PORT.ToString());
        socket.JoinMulticastGroup(new Windows.Networking.HostName(GROUP_ADDRESS));
        System.Diagnostics.Debug.WriteLine(socket.ToString());
    }
    catch (Exception exception)
    {
        throw;
    }
}

private async void SendSocketRequest(string message)
{
    // Create a DataWriter if we did not create one yet. Otherwise use one that is already cached.
    //DataWriter writer;
    var stream = await socket.GetOutputStreamAsync(new Windows.Networking.HostName(GROUP_ADDRESS), GROUP_PORT.ToString());
    //writer = new DataWriter(socket.OutputStream);
    DataWriter writer = new DataWriter(stream);

    // Write first the length of the string as UINT32 value followed up by the string. Writing data to the writer will just store data in memory.
   // stream.WriteAsync(
    writer.WriteString(message);

    // Write the locally buffered data to the network.
    try
    {
        await writer.StoreAsync();
        Log(message, true);
        System.Diagnostics.Debug.WriteLine(socket.ToString());
    }
    catch (Exception exception)
    {
        throw;
    }
    finally
    {
        writer.Dispose();
    }
}

void socket_MessageReceived(DatagramSocket sender, DatagramSocketMessageReceivedEventArgs args)
{
    try
    {
        uint stringLength = args.GetDataReader().UnconsumedBufferLength;
        string msg = args.GetDataReader().ReadString(stringLength);

        Log(msg, false);
    }
    catch (Exception exception)
    {
        throw;
    }
} 
```

昨晚我把手机带回家在我的家庭无线网络上测试它们，低，看我成功的设备通信。

回顾一下 - 我的旧版 Windows Phone 7 代码在我的工作网络上运行良好。Windows Phone 8 的端口（没有实际代码更改）不发送设备间通信。此代码确实适用于我的家庭网络。代码在附加调试器的情况下运行，并且在执行期间任何地方都没有错误或异常的迹象。

我使用的手机是：

Windows Phone 7 - 诺基亚 Lumia 900 (* 2)、诺基亚 Lumia 800 (* 3) Windows Phone 8 - 诺基亚 Lumia 920 (* 1)、诺基亚 Limia 820 (* 2)

这些都运行最新的操作系统，并且处于开发者模式。开发环境是运行 Visual Studio 2012 Professional 的 Windows 8 Enterprise

我不能告诉你太多关于工作无线网络的信息——除了 Phone 7 设备没有任何问题。

至于我使用的家庭无线网络，那只是一个基本的 BT 宽带路由器，没有改变任何“开箱即用”设置。

显然，这两个网络的配置方式存在问题，但 Windows Phone 8 实现 UDP 消息的方式也很明显存在问题。

任何输入将不胜感激，因为这让我现在很生气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T15:58:26.227

根据我的经验，UDP 多播在 windows phone 7 下工作得非常奇怪，所以你应该为 windows phone 8 检查相同的内容。

这是我的经验：

1.  检查官方支持的内容，例如在 Windows Phone OS 7.1（我在切换之前尝试的最后一个操作系统）下，支持 TCP 单播、UDP 单播和 UDP 多播客户端。
2.  某些版本的 Windows Phone 仅在客户端首次打开它并且在不超过 10 秒内接收到会话时才允许接收 UDP 会话，这似乎是 Windows Phone 上的某种安全措施。
3.  尝试使用不同的地址：从 224.0.0.0 到 224.0.0.255（含）范围内的多播地址是“众所周知的”保留多播地址。
4.  在虚拟机和真实手机设备中检查，行为可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T13:32:43.800

您是否尝试过加入另一个多播组？因为 224.0.1.1 似乎在 IANA 分配中使用。[您可以在这里](http://www.iana.org/assignments/multicast-addresses/multicast-addresses.txt)找到所有内容。

也许在 Windows Phone 8 上，某些服务更紧密地监听传入的消息（例如，在内核模式下运行的网络服务）并且它们永远不会转发给您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-20T08:35:53.750

我注意到您使用环回。我认为这意味着当您从客户发送消息时，您也会收到您发送的消息。这意味着您的接收处理程序将触发。它具有以看似非线程安全的方式清除接收缓冲区的效果。尝试在您的接收方法中添加一些 try catch 并查看是否发生了任何不愉快的事情，但您可能在任何情况下都不使用共享接收缓冲区。

# android - 具有图像更改功能的 Android 小部件

> ID：13528264
> 
> 赞同：3
> 
> 时间：2012-11-23T11:34:17.980
> 
> 标签：android, image, widget

我正在尝试制作一个小部件，它可以从 sdcard 更改特定计时器中的图像。我的 onUpdate 函数如下所示：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.main);
ComponentName thisWidget = new ComponentName(context, PhotoWidgetProvider.class);
boolean mExternalStorageWriteable = false;
String state = Environment.getExternalStorageState();
if (Environment.MEDIA_MOUNTED.equals(state)) 
    mExternalStorageWriteable = true;

if(mExternalStorageWriteable) {
    BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 2;
    //of course it's a sample filename
String fileName = Environment.getExternalStorageDirectory().getPath() + "/DCIM/100MEDIA/IMAG0159.jpg";
Bitmap bitmap = BitmapFactory.decodeFile(fileName, options);
remoteViews.setImageViewBitmap(R.id.widget_imageview, bitmap);
    appWidgetManager.updateAppWidget(thisWidget, remoteViews);
} 
```

但我在我的小部件上看不到任何照片。文件当然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T18:24:03.993

试试这个。经过一些修改后，它工作正常，对我来说更好。

[如何在android中以编程方式更改应用小部件中的图像](https://stackoverflow.com/questions/14597911/how-to-change-the-image-in-app-widget-programmatically-in-android)

# solrnet - 无法将值“System.Collections.ArrayList”转换为属性“Specialisation”

> ID：13528265
> 
> 赞同：2
> 
> 时间：2012-11-23T11:34:18.733
> 
> 标签：solrnet

我收到错误：-**无法将值“System.Collections.ArrayList”转换为文档类型 IKnowWhoKnowsSolrNet 的属性“专业化”**

**我的代码**

```
//Initialise the solrNet Client.
        var solr = ServiceLocator.Current.GetInstance<ISolrOperations<IKnowWhoKnowsSolrNet>>();

        //Get the data from the ID.
        var results = solr.Query(new SolrQueryByField("id", userName));//Error Place.

        //Check the name is empty or not.
        if (results.Count != 0)
        {
            //assign the areaSpecialisation value.
            areaSpecialisation = results[0].Specialisation;
        } 
```

我在这里收到错误*var results = solr.Query(new SolrQueryByField("id", userName));*

如果我检查*userName = bhagirathi*但现在将用户名更改为**userName = 123|bhagirathi|bhagi@abc.com ，它工作正常**

它给出的错误。

[编辑]

# 区域属性

```
[SolrUniqueKey("id")]
public string UserName { get; set; }

[SolrField("features")]
public string Specialisation { get; set; }

#endregion

#region Constractor

public IKnowWhoKnowsSolrNet()
{
    //
    // TODO: Add constructor logic here
    //
}

/// <summary>
/// Set the class property's value
/// </summary>
/// <param name="userDetails"></param>
/// <param name="areaSpecialisation"></param>
public IKnowWhoKnowsSolrNet(string userName, string areaSpecialisation)
{
    UserName = userName;
    Specialisation = areaSpecialisation;
}

#endregion 
```

Id 是 solr 中的字符串。

[/编辑]

请通过简单地更改搜索查询来帮助为什么会出现此错误？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:39:05.493

`features`在你的 solr schema.xml 中是多值的吗？如果是这样`Specialisation`，`IKnowWhoKnowsSolrNet`也需要多值。

```
[SolrField("features")]
public ICollection<string> Specialisation { get; set; } 
```

# c - C 变量是否饱和或回绕？

> ID：13528266
> 
> 赞同：2
> 
> 时间：2012-11-23T11:34:20.900
> 
> 标签：c, variables

如果我不断增加一个`C`变量，它会饱和还是环绕？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T11:37:50.887

对于有符号整数类型，**未定义**会发生什么。

对于无符号整数类型，它将回绕（即回到 0）。

# java - GWT 活动/地点应该是单例还是原型？

> ID：13528268
> 
> 赞同：1
> 
> 时间：2012-11-23T11:34:25.517
> 
> 标签：java, gwt, singleton, gwt-places, gwt-activities

这之间有什么区别（性能和其他）：

```
public class MyPlaceMapper implements PlaceHistoryMapper {
    @Override
    public String getToken(Place place) {
        if(place instanceof HomePlace)
            return "home";
        else
            return null;
    }

    @Override
    public Place getPlace(String token) {
        if(token.equals("home"))
            return new HomePlace();
        else
            return null;
    }
} 
```

和：

```
public class MyPlaceMapper implements PlaceHistoryMapper {
    // Singleton HomePlace to inject and reuse over and over again
    private HomePlace homePlace;

    // Getter/setter for homePlace...

    @Override
    public String getToken(Place place) {
        if(place instanceof HomePlace)
            return "home";
        else
            return null;
    }

    @Override
    public Place getPlace(String token) {
        if(token.equals("home"))
            return homePlace;
        else
            return null;
    }
} 
```

换句话说，我是否`Place`一遍又一遍地重复使用相同的“单例”，或者我每次请求时都实例化一个新的，有什么区别。

此外，对于`Activity`s 内部的相同问题`ActivityMapper`。再次感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T13:54:48.253

经验法则：位置应该是不可变的。考虑到这一点，只有在该地点没有附加*数据*`HomePlace`时才能使用单例地点（如您的示例中所示）。因为地方是如此轻量级，所以使用单例与创建新实例的影响可以忽略不计。

对于活动来说，情况完全不同，因为它们不是*价值对象*。

使用单例活动意味着什么？

*   您必须清除`onStop`and`onCancel`中的状态，否则之前使用活动的状态可能会泄漏到以后的使用中。虽然它在某些情况下很有用，但我认为最好将*缓存*行为分开（关注点分离）。
*   根据定义，单例在应用程序的整个生命周期内都保存在内存中，即使是那些用户只会看到/使用一次的。例如，Google Groups 的*欢迎*屏幕很可能在每次应用程序运行时只能看到一次，那么为什么要把它保存在内存中呢？
*   如果您在两个都映射到同一个活动的地方之间导航，则活动将不会重新启动（这是 的一个功能`ActivityMapper`），因此您必须以某种方式向活动发出信号表明该地点已更改（当然，如果需要） . 这可以在`ActivityMapper`或通过让活动监听`PlaceChangeEvent`s 来完成。

如果您使用 MVP（将视图从活动中分离出来），活动通常是轻量级的，因此使用短期活动可以让您从*上述**情况`onStop`中`onCancel`*解脱出来：活动被创建，然后开始，然后被取消或停止，然后它就消失了，准备好被垃圾收集。如果您需要保留一些数据或计算结果的缓存，则使用所有活动实例将共享的显式缓存对象；它使事情更清楚。

 ** * *

关于 MVP 和视图生命周期的旁注：视图（小部件）通常是重量级的，因此对于经常使用的视图，您可能希望将它们设为单例。在这种情况下，您的活动必须在其`start`方法（或可能`onStop`和`onCancel`）中清除视图的状态（字段值等），从而以某种方式阻止使用短期活动。视图的*缓存*（您可能会考虑不使用单例，而是将实例保留在内存中一段时间​​并在延迟后将其驱逐）应该被视为此处的优化，其中构建新视图的成本比在活动中清除它要高得多开始。这是一个权衡。

我接近 MVP 的方式是视图本身没有*状态*，即演示者真正控制视图应该显示/知道/等的内容。所以清除视图`start`是流程的一部分：演示者（在许多情况下是活动）知道它处于什么状态，并在视图中反映该状态；并且`start`是赋予视图控制权的时间。[在 Google I/O 2010 的GWT 测试最佳实践](http://www.google.com/events/io/2010/sessions/gwt-continuous-build-testing.html)会议期间，Google 在制作 Wave 时描述了这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:35:24.487

托马斯的回答很好。只是为了添加更多信息。

您可以决定覆盖 google 提供的对象的默认实现。例如，您可以决定编写自己的活动映射器，该映射器将始终为给定类型的地点返回相同的活动实例。正如托马斯所说，这个地方并不是一个真正重要的对象。重要的是通过活动映射器与该地点相关联的活动。尽管如此，您可能会遇到生命周期问题，并且您启动和停止方法的编码将非常困难。

您可能想要重新编码活动管理器并向模式添加更新方法以刷新现有活动（如果这是您想要做的）

问问自己，在浏览器中按前进或后退时，您的应用程序应该如何表现。[你可以在我写的一篇关于活动和地点的文章中找到更多细节。](http://wpamm.blogspot.fr/2013/03/gwt-activity-place-introduction.html)

希望它会有所帮助。*

# java - 如何在 Java 中的聊天应用程序中添加笑脸功能？

> ID：13528276
> 
> 赞同：1
> 
> 时间：2012-11-23T11:34:45.360
> 
> 标签：java, ajax, jsp, servlets

在我的聊天应用程序中，我需要添加表情符号功能吗？我怎样才能做到这一点？

我们正在使用“Genesys”来创建我们的聊天应用程序？

可以添加表情吗？？？

请任何人都可以帮助我..

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T11:42:59.770

你可以这样做[纯 CSS/JS 表情符号](http://os.alfajango.com/css-emoticons/)

或者

您可以用图像替换文本。

查看示例、源代码和这个**[jsFiddle 演示](http://jsfiddle.net/Etmrs/)**

### 样本

```
var emoticons = {
  smile: '<img src="path/smile.gif" />',
  sad: '<img src="path/sad.gif" />',
  wink: '<img src="path/wink.gif" />'
};

var patterns = {
  smile: /:-\)/gm,
  sad: /:-\(/gm,
  wink: /;-\)/gm
};

$(document).ready(function() {
  $('p').each(function() {

  var $p = $(this);
  var html = $p.html();

  $p.html(html.replace(patterns.smile, emoticons.smile).
  replace(patterns.sad, emoticons.sad).
  replace(patterns.wink, emoticons.wink));  
 });
}); 
```

### 更多信息

*   [jsFiddle 演示](http://jsfiddle.net/Etmrs/)
*   [JQuery：插入表情符号](http://onwebdev.blogspot.com/2011/03/jquery-inserting-emoticons.html)（来源）

# asterisk - 使用 cli / ami 编辑 Asterisk SIP 设备

> ID：13528278
> 
> 赞同：0
> 
> 时间：2012-11-23T11:34:55.270
> 
> 标签：asterisk

是否有提供 SIP 设备管理的命令（添加、编辑、删除）？

我可以简单地覆盖配置文件来解决它，但命令会更好。

附言。FreePBX 或任何其他 Asterisk UI 是如何做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:11:47.820

是的，先生，您在问题的最后猜到了，您需要将配置写入存储配置的正确位置。

您不会在守护程序运行时将其写入守护程序。如果您对 iptables 的工作原理以及在运行时插入规则有一些模糊的了解，那就不是这样了。

您可以通过两种方式执行此操作，将其写入平面文件，或者如果您使用 Asterisk 专家所说的实时，您可以直接写入您喜欢的任何 RDMS，然后 Asterisk 从数据库中提取该配置。

听起来你想要实时。听起来您可以轻松地从代码中写入 mySQL。然后你可以从那里拿走它。

# hadoop - 如何从 HDFS 获取文件到 S3

> ID：13528280
> 
> 赞同：0
> 
> 时间：2012-11-23T11:34:55.940
> 
> 标签：hadoop, amazon-s3, hdfs

我正在尝试**从 HDFS 到 S3 获取一些最终结果文件**。我想使用 DistCp，但它似乎只复制整个文件夹，我只想复制文件夹中的一些文件。

所以我想我需要将我想要的文件移动到他们自己的文件夹中，然后使用 DistCp 上传该文件夹。我明白我应该用它`FileSystem.rename(path1,path2)`来做到这一点。

所以我正在尝试对 java 中的 1 个文件进行这个小测试：

```
Path itemsTable = new Path("hdfs://localhost/process-changes/itemstable-*");
itemsTable.getFileSystem(getConf()).mkdirs(new Path("hdfs://localhost/output"));
//Simple test moving just 1 file around HDFS via java API
boolean success = itemsTable.getFileSystem(getConf()).rename(new Path("hdfs://localhost/process-changes/itemtable-r-00001"), new Path("hdfs://localhost/output/itemtable-r-00001")); 
```

但我总是从 rename(...) 方法得到错误的回报。

这甚至是正确的方法吗？如果是这样，任何猜测我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:42:56.933

好吧，最后这确实奏效了。我不太清楚为什么我会出错，我相信这是一个严重的小错误。上面的代码通常应该可以工作（如果您正在阅读与我相同的问题）。有信心，只是解决小问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T08:44:47.243

似乎 hadoop distcp 不够有效，所以我运行以下脚本来执行此操作：

hadoop fs -copyToLocal /parquet/ /home/hadoop/ aws s3 cp /home/hadoop/parquet/ s3://shinezone-datacenter-data/result/ --recursive --quiet

# python - 如何在 Python 中获取明天的日期？

> ID：13528287
> 
> 赞同：8
> 
> 时间：2012-11-23T11:35:26.110
> 
> 标签：python

我可以使用 Python 脚本获取今天的日期和时间。但我需要以数字格式获取明天的日期和时间。所以我使用了下面的脚本。

```
#! /usr/bin/python
import datetime
import sys
import os

tomorrow = datetime.date.today() + datetime.timedelta(days=1)
print "Tomorrow date is" + str(tomorrow) 
tm_stme = datetime.time(0, 0, 0)
tm_etime = datetime.time(23,59,59)
tm_stdate = datetime.datetime.combine(tomorrow, tm_stme)
tm_enddate = datetime.datetime.combine(tomorrow,tm_etime)

print "tomorrow start date:" + tm_stdate
print "tomorrow end date:" + tm_enddate  

tm_sdt_convert = time.mktime(time.strptime(tm_stdate, "%Y-%m-%d %H:%M:%S"))
tm_tdt_convert = time.mktime(time.strptime(tm_enddate, "%Y-%m-%d %H:%M:%S")) 
```

但它会引发以下错误：

> 管理员@Ashok-Dev:~/Desktop$ python testing.py
> 明天日期是 2012-11-24
> Traceback（最近一次调用最后一次）：
> 文件“testing.py”，第 13 行，在 <module> 中
> 打印“明天开始日期：” + tm_stdate
> TypeError: 不能连接 'str' 和 'datetime.datetime' 对象

我需要得到`tm_sdt_convert`一个可变的结果。如何获得没有错误的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:38:05.767

像这样的东西可以帮助你

```
In [125]: datetime.datetime.now()
Out[125]: datetime.datetime(2012, 11, 23, 17, 11, 15, 765000)

In [126]: str(datetime.datetime.now() + datetime.timedelta(days=1))
Out[126]: '2012-11-24 17:11:18.203000' 
```

得到个别的东西

```
In [127]: (datetime.datetime.now() + datetime.timedelta(days=1)).day
Out[127]: 24

In [128]: (datetime.datetime.now() + datetime.timedelta(days=1)).year
Out[128]: 2012

In [129]: (datetime.datetime.now() + datetime.timedelta(days=1)).month
Out[129]: 11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:38:56.807

您正在连接一个字符串和一个日期时间对象。首先将 datetime 对象转换为字符串：

```
print "tomorrow start date:" + str(tm_stdate) 
```

如果您改用逗号，该`print`语句将为您进行字符串转换并插入一个空格：

```
print "tomorrow start date:", str(tm_stdate) 
```

或者您可以使用字符串格式：

```
print "tomorrow start date: {0!s}".format(tm_stdate) 
```

如果您想影响datatime 对象*如何*转换为字符串，请使用该[`.strftime()`方法](http://docs.python.org/2/library/datetime.html#datetime.datetime.strftime)更精确地格式化日期和时间：

```
print "Tomorrow's start date: {0}".format(tm_stdate.strftime('%Y-%m-%d')) 
```

或者您可以使用该[`.isoformat()`方法](http://docs.python.org/2/library/datetime.html#datetime.datetime.isoformat)将字符串格式化为特定的符合标准的格式：

```
print "Tomorrow's start date: {0}".format(tm_stdate.isoformat()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T11:40:03.250

```
tm_stdate 
```

是一个`datetime`，不是一个`str`。把 a`datetime`变成 a `str`，你做

```
tm_stdate.isoformat() 
```

或者

```
tm_stdate.strftime(<some format string>) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T11:47:06.647

查看日期时间模块文档：[http ://docs.python.org/2/library/datetime.html](http://docs.python.org/2/library/datetime.html)

函数“strftime”就是您要寻找的。它有一个关于如何使用它的例子。如果您需要其他帮助，请给我留言。

# twitter - 我可以通过最多转发用户推文的人检索用户关注者订单吗

> ID：13528291
> 
> 赞同：1
> 
> 时间：2012-11-23T11:35:43.957
> 
> 标签：twitter

我可以通过最多转发用户推文的人检索用户关注者订单吗

例如：

用户 screen_name = aaa

追随者：

bbbb 转发 30 次

cccc 转发 70 次

dddd 转发 50 次

gggg转发20次

ffff 转发 90 次

我怎样才能像这样检索关注者订单：

ffff cccc dddd bbbb gggg

# cucumber - 如何自定义黄瓜报告模板？

> ID：13528296
> 
> 赞同：1
> 
> 时间：2012-11-23T11:35:59.757
> 
> 标签：cucumber, watir-webdriver

我正在使用带有 watir 的 cucumber 并希望自定义 html 输出报告模板和内容。例如，我想更改默认标题、使用不同字体显示通过/失败摘要等。

任何建议/解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T01:14:24.980

[https://cucumber.io/docs/cucumber/reporting/#custom-formatters](https://cucumber.io/docs/cucumber/reporting/#custom-formatters)

我想这就是你要找的。

# .htaccess - 创建一个 .htaccess 文件？

> ID：13528297
> 
> 赞同：0
> 
> 时间：2012-11-23T11:36:04.113
> 
> 标签：.htaccess

如何创建 .htaccess 文件？创建 .htaccess 文件后是否需要重新启动服务器？

```
RewriteEngine On
RewriteCompatibility2 On
RepeatLimit 200
RewriteBase 
# unsupported directive: [ISAPI_Rewrite]

RewriteCond %{HTTP:Host} ^xxx\.com$
RewriteRule (.*) http\://www.xxxx.com$1 [NC,R=301,U]
RewriteRule ^/main.html$ http\://www.xxx.com/index.cfm [NC,R=301,U]

ErrorDocument 404 /Errors.htm 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:37:22.057

> 如何创建 .htaccess 文件？

打开文本编辑器。开始打字。

您可能不得不与您的编辑器抗争，以允许您保存“只有扩展名”的文件。您可能必须与您的上传软件（如果您在与服务器不同的系统上创建文件）进行斗争才能让它看到文件。

> 创建.htaccess文件后是否需要重新启动服务器

不。.htaccess 的大部分意义在于它是即时处理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:37:34.240

`.htaccess`是常规文本文件。而且您不需要重新启动服务器。它将在下一次请求时处理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:37:33.070

不，仅在更改 httpd.conf 文件或 vhosts 文件时才需要重新启动。`.htaccess`文件不需要重新启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:38:55.597

创建或更改 .htaccess 文件后无需重新启动服务器。将 .htaccess 文件放在需要应用规则的文件夹中。您可以为服务器上的不同文件夹设置不同的 .htaccess 文件。

# c# - USB 更新注册表上的便携式应用程序

> ID：13528308
> 
> 赞同：0
> 
> 时间：2012-11-23T11:36:45.517
> 
> 标签：c#, registry, portable-executable, portable-applications

我想编写一个驻留在 USB 上的便携式应用程序。当 USB 连接到 pc 时，应用程序会自动启动，它可能会设置注册表项。当 USB 驱动器从 PC 中移除时，我想删除这些条目。是否有可能做到这一点？

我知道我可以在我的 USB 驱动器上使用自动运行来启动我的应用程序，但是有什么方法可以通知我的应用程序需要删除 USB，以便它可以清除注册表？

我正在使用 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:40:44.933

我认为您将不得不 P/Invoke Win32 API - [http://msdn.microsoft.com/en-us/library/aa363480%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa363480%28VS.85%29.aspx)。

这应该为您提供拔出电源时所需的事件。

# ruby - 续集：如何获取数据集列的数据类型

> ID：13528311
> 
> 赞同：3
> 
> 时间：2012-11-23T11:36:53.570
> 
> 标签：ruby, dataset, sequel

如何获取数据集列的数据类型。或更笼统地说：如何获取数据集的模式？

想象一下我有以下情况：

```
require 'sequel'
DB = Sequel.sqlite()
DB.create_table(:data){
    nvarchar :key
    timestamp :timestamp
    Date :date
}

sel = DB[:data].select(:key, :timestamp) 
```

现在我想知道，`timestamp`我选择的列是哪个数据类型。

我想得到类似的东西`Sequel::Dataset#columntype(column)`。

我做了一个这样的解决方案：

```
module Sequel
  class Dataset
    def schema()
      schema = []
      self.db.schema(self).each{|colid, coldef|
        next unless self.columns.include?(colid)
        schema << [colid, coldef]
      }
      schema
    end

    def columntype(colname)
      self.schema.each{|colid, coldef|
        next unless colid == colname
        return coldef[:type]
      }
      raise ArgumentError, "#{colname} not part of #{self.inspect}"
    end
  end
end

p sel.schema #-> [[:key, {:allow_null=>true, :default=>nil, :primary_key=>false,....
p sel.columntype(:timestamp) #-> :datetime
p sel.columntype(:key) #-> :string
p sel.columntype(:date) #-> ArgumentError 
```

但是这个解决方案看起来有点错误，它不适用于连接：

```
p sel.join(:data).columntype(:timestamp)
#-> `schema': can only parse the schema for a dataset with a single from table (Sequel::Error) 
```

我也试过`Dataset#schema_and_table`，但没有任何成功：

```
p sel.schema_and_table(sel.first_source_table) #-> [nil, "data"] 
```

还有其他我在文档中没有找到的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T16:32:46.480

在 Sequel 中，数据集不知道其列的类型。对于任何复杂的事情，了解列类型的唯一方法是运行查询（想想列别名、函数调用、CTE 等）。即使这样，您也必须根据 Sequel 提供的 ruby​​ 类型来猜测数据库类型。

您可以使用`Database#schema`表名来获取该表的架构信息。这是在 Sequel 中从数据库中获取类型信息的唯一支持方式。

# linux - 使应用程序在启动时停留在单个工作区中

> ID：13528312
> 
> 赞同：2
> 
> 时间：2012-11-23T11:36:55.123
> 
> 标签：linux, gnome, launch, workspace

有`workspaces`几个 Linux 发行版的应用程序的启动和启动让我困扰了一段时间。当您启动一个需要一段时间才能启动的应用程序，并说您正在启动，然后在应用程序启动时`Workspace 1`切换`Workspace 2`到做其他事情，那么一旦应用程序完成加载，或者至少窗口框架是生成时，它会在您当前正在工作的任何窗口前面弹出`workspace`。我发现这种行为很烦人（特别是在低性能机器上，通常需要很长时间才能启动任何东西），不仅仅是因为中断，还因为我总是必须手动将应用程序移回`workspace`我真正想要的应用程序。

如果我可以在一个工作区中启动应用程序，我会更喜欢它，并且它会在整个启动阶段一直呆在那里，这样我可以在它完成加载后稍后再回来，我已经完成了不管我在做什么。

对我来说，这似乎是多个 linux 发行版（Debian 和 Ubuntu）中非常普遍的行为，尽管我主要一直在使用`Gnome 2`和关注`XFCE`的地方`Window Managers`。[我在这里](https://superuser.com/questions/232042/ubuntu-gnome-open-an-application-in-a-specific-workspace)找到了一个非常相似的主题：

但它没有提供任何令人满意的答案（而且是一年前的事了）。这可以在 XFCE 和/或 Gnome2 中以某种方式修复/调整吗？如果没有，是否有任何（轻量级）窗口管理器可以按我想要的方式处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:40:11.090

应用程序无法做到这一点。这是窗口管理器的工作来决定。但是，一旦您打开一个应用程序，它应该留在您离开它的位置，并且通常由该应用程序打开的所有其他窗口也应该在同一个工作区结束。因此，您要么需要指示窗口管理器（“如何”取决于您使用的 WM），要么使用诸如[Devil's Pie 之类的工具](http://burtonini.com/blog/computers/devilspie/)

# wordpress - 从帖子中获取自定义字段值

> ID：13528313
> 
> 赞同：0
> 
> 时间：2012-11-23T11:36:59.560
> 
> 标签：wordpress, custom-fields

我通过以下代码在页面中获得了帖子缩略图和帖子内容

```
 <?php
            $post_types = array('a', 'b','p','d','f');//post type names
            foreach( $post_types as $post_type) {
            // The Query
            $the_query = new WP_Query( array(
             'post_type' => $post_type,
             'orderby' => 'post_date',
             'order' => 'DESC'
            ));

            while ( $the_query->have_posts() ) : $the_query->the_post(); ?>
                  <?php if ( has_post_thumbnail() ) { 
                        the_post_thumbnail();
                    }
                  ?>

            <?php endwhile; ?>
            <?php }?> 
```

现在我想从相应的帖子中获取自定义字段值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:39:20.573

使用[get_post_meta($post_id, $key, $single)](http://codex.wordpress.org/Function_Reference/get_post_meta)检索单个键值或键/值对的整个列表（作为数组）。

此函数始终返回一个数组（即使`$key`已指定且该数组仅包含一个值），除非`$single`参数为`true`.

```
<?php while ( $the_query->have_posts() ) : $the_query->the_post(); ?>
    <?php if ( has_post_thumbnail() ): ?>
        <?php the_post_thumbnail(); ?>
        <?php $my_key = get_post_meta($post->id, 'my_key', true); ?>
        <?php if(!empty($my_key)): ?>
            <?php echo $my_key; ?>
        <?php endif; ?>
    <?php endif; ?>
<?php endwhile; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:37:25.647

使用这个（在你的`while`循环内）：

```
echo get_post_meta(get_the_ID(), 'post_img', true); 
```

# objective-c - 从 FLA 输出 SVG

> ID：13528318
> 
> 赞同：3
> 
> 时间：2012-11-23T11:37:16.907
> 
> 标签：objective-c, ios, actionscript-3, flash, svg

希望你们能帮助我。我目前正在开发我的第一个 iOS 应用程序，并且需要显示矢量图形，据我了解，为此我需要使用 .SVG 文件。计划是使用[MonkVG](https://github.com/micahpearlman/MonkVG) API 来处理 Cocos2d 内部的向量实现。

目前，我在多个 FLA 中拥有所有必需的矢量图形（有些带有动画，有些没有）。我需要能够将这些矢量图形导出到多个 .SVG。

我曾尝试使用 Flash Professional 扩展“ [Flash2SVG](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&loc=en_us&extid=2422028) ”，但效果有限。它会输出一些向量，但一旦它们变得更复杂，扩展就会崩溃。我还查看了一些承诺通过上传器转换为 .SVG 的网页，但这些网页似乎返回了无法使用的文件。

所以我想我的问题是，有人知道其他可靠的方法来完成 FLA/SWF 到 .SVG 的转换吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:41:11.357

这看起来像这个问题：

[有没有办法将 SWF 转换为 SVG 格式？](https://stackoverflow.com/questions/7677850/is-there-a-way-to-convert-swf-into-svg-format)

希望这可以帮助

- 编辑 -

您是否尝试过 Adob​​e 小袋鼠：

[http://www.adobe.com/products/flash/flash-to-html5.html](http://www.adobe.com/products/flash/flash-to-html5.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:48:12.910

实际上，如果您想使用 SWF 格式，您应该查看 Claus 的令人敬畏的[as3swf](https://github.com/claus/as3swf)库，其中包括直接到[Objective C的](https://github.com/claus/as3swf/wiki/Shape-Export-to-Objective-C)[形状导出](https://github.com/claus/as3swf/wiki/Shape-Export)器。

![as3swf](../Images/d5f43fda78eadc78c247e2fe47a5bc0e.png) ![形状导出到 obj-c](../Images/2711779e36619b3f3769262db241d539.png)

如果您确实安装了 .fla 和 Illustrator，您可以尝试从 Flash 导出一个**.fxg**文件，在 Illustrator 中打开它并从那里保存一个 SVG。.fxg 格式比旧的 Flash .ai 导出器支持更多功能。

# c - 使用自动工具构建动态程序列表

> ID：13528327
> 
> 赞同：3
> 
> 时间：2012-11-23T11:37:36.363
> 
> 标签：c, autotools, autoconf, automake

我有以下常规（手写）makefile：

```
all: $(patsubst %.c,%.so,$(wildcard *.c))

%.so: %.c
     $(CC) $(CFLAGS) $(LDFLAGS) -rdynamic -o $@ $^ 
```

我需要将此makefile转换为autotools（主要用于用好东西填充CFLAGS和LDFLAGS）我第一次阅读autotools文档让我认为这是不可能的，因为autotools需要提前知道它的所有目标......但我可能错了.

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:27:26.613

Automake 当然想知道所有的文件名，但是在运行 automake 之前有一个创建 Makefile.am 的引导脚本是很常见的。这是一个相当幼稚的例子：

```
#!/bin/sh

cat Makefile.am.head > Makefile.am
ls *.c | sed 's/$/ \\/' >> Makefile.am
cat Makefile.am.tail >> Makefile.am
autoreconf -ivf 
```

请注意，如果您要使用自动工具，您可能不想编写规则来生成 *.so，但应该使用 libtool 和 LTLIBRARIES 主文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:04:10.263

就像是

```
bin_PROGRAMS = program1
if boolean_flag
    bin_PROGRAMS += program2
endif 
```

在 Makefile.am 中为我工作（tm）——你只需要弄清楚如何设置标志

# excel - 如何在单元格中搜索和提取某些值 - VBA

> ID：13528333
> 
> 赞同：0
> 
> 时间：2012-11-23T11:37:54.037
> 
> 标签：excel, vba

我有以下数据，可以通过以下链接查看：

[输入和所需输出数据示例](https://www.dropbox.com/s/jca78omwpdfp1hi/Total_Count_Example.xlsm)

**使用以下逻辑：**

> 从“Sheet1”中提取所有 JPM（安排者）总值，并将它们绘制在表 2 中，在 JPM 列下的每一行上。
> 
> 例如，如果“Sheet2”中的 B1 等于 BAML，则在工作表 1 中搜索 BAML，并从 F 列中提取其所有总值，然后插入 BAML 列下的“Sheet2”中。
> 
> 请注意：例如，BAML 可以单独位于单元格中，也可以位于 C 列中单元格的任何其他位置。

我需要帮助和帮助来开发一个可以显示输出的宏，如上面的数据链接所示，在“Sheet2”中。我不确定，我将如何解决这个问题。

任何帮助将不胜感激。

亲切的问候

输入数据（表 1）

![在此处输入图像描述](../Images/84c5c7506c09e368ede2ebc741261f38.png)

输出数据（表 2） ![在此处输入图像描述](../Images/b0e5a9a0dbf7fe53d55eb14d34636386.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:29:37.643

如果您只需要每个共同贡献者的总数，您可以使用以下 Excel 公式来完成。根据贡献者名称更改 Criteria，例如 JPM、CITG、BAML... 等等。

公式：

```
=SUMIF($C$2:$C$13,"*JPM*",$B$2:$C$13) 
```

输出

```
JPM      CITG    BAML    BCG     CIBC       DB
2432.74  500     500     500     1812.84    1812.84 
```

这对你来说足够了吗？否则你想在分布式透视视图中显示每个贡献者的价格吗？

**由于 OP 的要求是按行对每个贡献者的价格进行排序，因此对 VBA 片段进行了编码。**为了更容易直观地理解解决方案枢轴显示在您的源数据旁边。

以下是解决和输出的步骤。

1.  在您的工作表中添加一个按钮。
2.  双击按钮并添加`Call splitSortPivot()`
3.  将模块添加到您的 Excel 项目
4.  双击模块并复制以下代码
5.  保存，编译

代码：

```
Option Explicit

Public Sub splitSortPivot()
Dim ws As Worksheet
Dim sourceRange As Range
Dim rng As Range
Dim i, j, k As Integer    
Dim sourceArray As Variant
Dim arrangersArray As Variant
Dim ary As Variant

Set ws = Worksheets("Sheet1")
Set sourceRange = ws.Range("B2:C13")

'Based on the number of records +2 you have in source sheet (Sheet1)
'you may set the first dimension's upper bound of the array
'+1 for header and +1 for total --> in current case 12  + 1 + 1 = 14
'even setting this number can be done programmatically using used rows in C column.
ReDim arrangersArray(0 To 13, 5)

'This code can be optimized to add names programmatically
arrangersArray(0, 0) = "JPM"
arrangersArray(0, 1) = "CITG"
arrangersArray(0, 2) = "BAML"
arrangersArray(0, 3) = "BCG"
arrangersArray(0, 4) = "CIBC"
arrangersArray(0, 5) = "DB"

sourceArray = sourceRange.Value

    For j = LBound(sourceArray, 1) To UBound(sourceArray, 1)
        If InStr(1, sourceArray(j, 2), ",") > 0 Then
            ary = Split(sourceArray(j, 2), ",")
            For k = LBound(ary) To UBound(ary)
                For i = LBound(arrangersArray, 2) To UBound(arrangersArray, 2)
                    If arrangersArray(0, i) = Trim(ary(k)) Then 
                       arrangersArray(j, i) = sourceArray(j, 1)
                       arrangersArray(13, i) = arrangersArray(13, i) + arrangersArray(j, i)
                    End If
                Next i
            Next k
        Else
            For k = LBound(arrangersArray, 2) To UBound(arrangersArray, 2)
                If arrangersArray(0, k) = sourceArray(j, 2) Then
                    arrangersArray(j, k) = sourceArray(j, 1)
                    arrangersArray(13, k) = arrangersArray(13, k) + arrangersArray(j, k)
                End If
            Next k
        End If
    Next j

'Output the processed array into the Sheet. 
Range("G1").Resize(UBound(arrangersArray) + 1, _ 
UBound(Application.Transpose(arrangersArray))) = arrangersArray

End Sub 
```

输出屏幕截图：

![在此处输入图像描述](../Images/41116fbd2533558c01bf4ce8444eb050.png)

# php - 正则表达式 str_replace

> ID：13528337
> 
> 赞同：28
> 
> 时间：2012-11-23T11:38:07.797
> 
> 标签：php, mysql, regex, url, str-replace

是否可以将`str_replace`方法与正则表达式结合起来，旨在以简单的 html < textfield > 输入类型捕获 url 字符串？

我正在考虑一些简单的东西，比如用户设置它的提示，如下所示：

*这是一些文本，点击[**此处**](http://www.google.com)链接。*

显然，“这里”这个词是它之前（或之后，如果有区别的话）的 url 的一个 href。文本输入来自 MySQL 数据库。

我相信我的解决方案的开始是这样的：

```
$regex = '';
$pg = $row['pg'];
$pg = str_replace('{regex goes here}', $pg); 
```

但我知道有些东西不见了。然后我会输出 $pg 段落。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-23T11:39:03.780

看看`preg_replace` [这里](http://php.net/manual/en/function.preg-replace.php)，这就是你要找的。

```
// From the documentation.
preg_replace($regularExpression, $replacement, $subject); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-23T11:39:47.033

您正在寻找的是[preg_replace](http://php.net/manual/en/function.preg-replace.php)：

```
$pg = preg_replace('{regex goes here}', '{replacement goes here}', $pg); 
```

# actionscript-3 - 如何限制手势事件的旋转？

> ID：13528340
> 
> 赞同：1
> 
> 时间：2012-11-23T11:38:30.857
> 
> 标签：actionscript-3, rotation, gesture

我有一个表盘，我想顺时针和逆时针旋转 120 度。我不希望表盘越过任何一点。

它也需要是一个触摸手势，以便用户可以拖动它。

有任何想法吗？有没有办法限制变换手势旋转？

我已经尝试过条件，但似乎没有任何效果？

```
dial_mc.addEventListener(TransformGestureEvent.GESTURE_ROTATE, rotateDial);

function rotateDial(e:TransformGestureEvent):void
{   
dial_mc.rotation += e:rotation
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:37:38.547

你为什么不尝试这样的事情：

```
dial_mc.addEventListener(TransformGestureEvent.GESTURE_ROTATE, rotateDial);

function rotateDial(e:TransformGestureEvent):void
{   
  dial_mc.rotation += e:rotation
  if(dial_mc.rotation > MAX_ALLOWED_ROTATION) dial_mc.rotation = MAX_ALLOWED_ROTATION;
  if(dial_mc.rotation < 0 ) dial_mc.rotation = 0;
} 
```

# c++ - g++ 不包括库

> ID：13528343
> 
> 赞同：1
> 
> 时间：2012-11-23T11:38:34.530
> 
> 标签：c++, g++

我正在尝试用 g++ 构建一个程序，但我得到了“未定义的引用”。

文件夹结构：

```
Makefile
libs/
  libcrypotpp.a
  libz.a
sources/
  here are the sources and headers
out/
objfiles/ 
```

Makefile 如下所示：

```
#makefile for program
#needs libz.a and libcryptopp.a

CC = g++
SOURCES = sources/*.cpp
LIBS = -lcryptopp -lz -pthread
LIBPATH = libs/
OBJPATH = objfiles/
OUTPUT = out/
OBJS = *.o
HEADERPATHS = -Isources -Isources/cryptopp

all:
    echo "Program"
    echo "------------------"
ifneq ("$(wildcard libs/libz.a)", "")
    echo "ZLIB found!"
ifneq ("$(wildcard libs/libcryptopp.a)", "")
    echo "Cryptopp found!"  #all librarys found
    $(CC) $(HEADERPATHS) -L$(LIBPATH) $(LIBS) $(SOURCES)
    mv *.o $(OBJPATH)
else
    echo "error: Cryptopp(libs/libcryptopp.a) was not found!"
endif
else ifneq ("$(wildcard libs/libcryptopp.a)", "")
    echo "Cryptopp found!"
    echo "error: ZLIB(libs/libz.a) was not found!"
else
    echo "error: ZLIB(libs/libz.a) was not found!"
    echo "error: Cryptopp(libs/libcryptopp.a) was not found!"
endif

.SILENT: all 
```

g++ 编译，但随后输出未定义的引用：

[未定义的引用](http://pastebin.com/5qdpwhsk "未定义的引用")

为什么会失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:32:29.733

由于（静态）库可以包含许多在大多数链接到它们的应用程序中未使用的代码，因此链接器对于它们将链接到应用程序的静态库的哪些部分往往非常保守。

在某些情况下，这会使我们作为开发人员的生活更加困难，因为您必须遵循不成文的规则才能让所有东西都能正常运行。其中一些不成文的规则是

*   链接器按照在命令行中给出的顺序处理其输入
*   链接器仅在第一次通过输入时考虑库 这两个组合的效果是库只能解析在链接器的早期输入中找到的未解析符号。

结果是，为了让链接器满意，应在最后指定库，如果库 A 依赖于库 B，则应在 B 之前指定 A。

# php - 图片上传到数据库时的扩展问题

> ID：13528346
> 
> 赞同：0
> 
> 时间：2012-11-23T11:38:48.607
> 
> 标签：php, mysql, image, upload, phpmyadmin

我需要帮助解决我的问题。我想在我的数据库中上传多张图片。我将路径放在我的数据库中，将图像放在文件夹中。我认为上传工作正常，但如果我在数据库中看到路径，它看起来像这样：

```
projects/projects_past/benefits.pnh 
```

图片的扩展名应该是`.png`我为什么要拍这个`.pnh`？？？

我在问用户您要上传多少张图片？比如3，所以我在同一个php文件中给他三个输入类型的文件来上传它们。提交后，重定向到另一个 php，我将图像插入数据库。

第一个 php 文件有以下代码：

```
if($submit_num_images)
{
echo "<form action='img_projects.php?num_images=".$num_images."' enctype='multipart/form-data' method='post' name='form3' id='form3'>";
$temp_num = 0;
while($temp_num != $num_images){
    echo '<tr><td>Choose image number:&nbsp;'.$temp_num.'</td><td colspan="2"><input type="file" name="image[]" id="image[]" multiple /> </td></tr>';
    $temp_num++;
}
echo '<tr><td colspan="3">&nbsp;</td></tr>';
echo '<tr><td> Choose the Project that related to the images </td>
<td colspan="2">';
    $titles = mysql_query("SELECT * FROM projects");
    echo '<select name="title_project">';
    $count = 0;
    while($values_titles = mysql_fetch_assoc($titles))        {
        echo'<option value="'.$values_titles['id_project'].'">"'.$values_titles['title'].'"</option>';
        $count++;
    }
    echo '</tr>';
echo '<tr><td colspan="3">&nbsp;</td></tr>';
echo '<tr><td colspan="3"><input type="hidden" name="img_insert" id="img_insert" value="1" /></td></tr>';
echo '<tr><td colspan="3" align="center"> <input type="submit" name="submit_project_image" value="Submit the images of a project" id="submit_project" /></td></tr>';
}       
echo '</table>';
echo '</form>';
} // end insert 2

?> 
```

这是第二个 php 文件：

```
for($i=0; $i<$num_images; $i++){
if($_FILES['image']['name'][$i] == "") {
//header('Location:controlpanel.php?insert=2&msg=0');   
}
else {
$pics.$j = "projects/projects_past/".$_FILES['image']['name'][$i];
move_uploaded_file($_FILES['image']['tmp_name'][$i], $pics.$j);
$j++;
$query = mysql_query('INSERT INTO img_projects (id_project,image) VALUES ("'.$title_project.'","'.$pics.$j.'") ') or die(mysql_error());
}
} 
```

我有一张用于多张上传图片 image[] 的表格

任何帮助或建议，我将不胜感激！

我有权在我的数据库中写入

我正在使用*MyISAM*，*utf8 general_ci*

我表中的字段`image`是*varchar(500)*

谢谢阅读！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:48:55.660

我不确定您要完成什么，`$pics.$j`但它不会达到您的预期，尤其是当您尝试分配给它时（`$pics.$j = "projects/projects_past/".$_FILES['image']['name'][$i];`）。自己用`$pics`就行；该变量将在您的 for 循环的每次迭代中被覆盖，因此您无需每次都尝试创建一个新变量。如果您确实想跟踪`$pics`循环后使用的多个路径，则使 $pics 成为一个数组：

```
$pics = array();
$j = 0;

for($i=0; $i<$num_images; $i++){
if($_FILES['image']['name'][$i] == "") {
//header('Location:controlpanel.php?insert=2&msg=0');   
}
else {
$pics[$j] = "projects/projects_past/".$_FILES['image']['name'][$i];
move_uploaded_file($_FILES['image']['tmp_name'][$i], $pics[$j]);
$query = mysql_query('INSERT INTO img_projects (id_project,image) VALUES ("'.mysql_real_escape_string($title_project).'","'.mysql_real_escape_string($pics[$j]).'") ') or die(mysql_error());

$j++;
}
} 
```

我还`mysql_real_escape_string()`为您添加了周围`$title_project`以及`$pics[$i]`防止 SQL 注入攻击的路径（黑客可以在 title_project 或文件名中发送的偷偷摸摸的 SQL 代码）。

# java - 从列表中删除项目时Java并发修改异常

> ID：13528349
> 
> 赞同：1
> 
> 时间：2012-11-23T11:38:54.867
> 
> 标签：java, android

> **可能重复：**
> [ArrayList 上的 java.util.ConcurrentModificationException](https://stackoverflow.com/questions/5145135/java-util-concurrentmodificationexception-on-arraylist)

我正在尝试从线程内的列表中删除项目。我得到了 `ConcurrentModificationException`. 我从这个[链接](https://stackoverflow.com/questions/8090398/java-concurrent-modification-exception)中读到它与从列表中删除项目有关。我将示例代码放在下面。在我的情况下，如果没有这个例外，我怎样才能正确地做到这一点。

```
try 
{
    for(Game game:appDeleg.getGlobalGames().getGames())
    {
        if(game.getOwner().getId().equals(params[0]))
        {
            synchronized (appDeleg.getGlobalGames().getGames())
            {
                appDeleg.getGlobalGames().getGames().remove(game);
            }
        }

    }
}

catch (Exception e) 
{
    e.printStackTrace();
    return "noconnection";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T11:44:39.117

使用迭代器：

```
Iterator<Game> i = appDeleg.getGlobalGames().getGames().iterator();

Game game;
while(i.hasNext()) {
    game = i.next();
    if(game.getOwner().getId().equals(params[0]))
          i.remove();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:52:34.943

增强的 for 循环使用迭代器。如果在迭代时修改了集合，迭代器可能会抛出异常。

在您的情况下，您是通过集合而不是通过迭代器删除项目。

尝试使用标准 for 循环而不是使用隐含的迭代器。假设您的集合是一个数组列表。

```
ArrayList games = appDeleg.getGlobalGames().getGames();
for(int i=0;i<games.size();i++){
      Game game = games.get(i);
      if(game.getOwner().getId().equals(params[0])){
       games.remove(i);

      }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:40:45.747

将要删除的项目收集到一个新列表中，并在遍历原始列表后将其删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T11:40:54.060

synchornized 关键字不会在这里保护您。
您可以从单线程应用程序访问此异常事件（是的 - 您可能会声称异常名称具有误导性）。
这应该使用迭代器遍历列表来完成，
（这将允许您在达到要删除的值时调用 remove），
或者通过将要删除的元素收集到单独的列表中，然后运行 ​​removeAll方法就可以了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T11:43:32.310

迭代时不能删除列表项，它会抛出`ConcurrentModificationException`

> 如果列表在迭代器创建后的任何时候被结构修改，除了通过迭代器自己的 remove 或 add 方法之外，迭代器将抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

文档 ->[链接](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

你应该`Iterator`从列表中删除项目。

# python - 双字符串到 int

> ID：13528357
> 
> 赞同：2
> 
> 时间：2012-11-23T11:39:10.087
> 
> 标签：python

```
>>> s = "'8255'"
>>> int(s)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: "'8255'" 
```

是否有一个方便的函数可以采用常规字符串或这种双字符串，例如，并产生整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:43:38.420

```
>>> import ast
>>> s = "'8255'"
# note - this still works if it was '"8255"'
>>> ast.literal_eval(s)
'8255'
>>> int(ast.literal_eval(s))
8255 
```

它还有一个优势，那就是给定已经是 int 的东西......

```
>>> s = '8255'
>>> type(ast.literal_eval(s))
<type 'int'> 
```

你会自动返回一个int ...

见：[http ://docs.python.org/2/library/ast.html#ast.literal_eval](http://docs.python.org/2/library/ast.html#ast.literal_eval)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:52:11.900

其他一些选项包括：

```
>>> import re
>>> s = "'8255'"
>>> s = int(re.sub("\D", "", s)) 
```

和

```
>>> s = "'8255'"
>>> s = int(filter(lambda x: x.isdigit(), s))' 
```

* * *

***编辑：***出于好奇，我决定测试一些建议选项的时间。

```
def reMethod(s):
    import re
    return int(re.sub("\D", "", s))

def filterMethod(s):
    return int(filter(lambda x: x.isdigit(), s))

def evalMethod(s):
    return int(eval(s))

def literalMethod(s):
    import ast
    return int(ast.literal_eval(s))

def stripMethod(s):
    return int(s.strip("\'").strip("\""))

if __name__=='__main__':
    from timeit import Timer
    s = ...
    t1 = Timer(lambda: reMethod(s))
    t2 = Timer(lambda: filterMethod(s))
    t3 = Timer(lambda: evalMethod(s))
    t4 = Timer(lambda: literalMethod(s))
    t5 = Timer(lambda: stripMethod(s))
    print t1.timeit(number=10000)
    print t2.timeit(number=10000)
    print t3.timeit(number=10000)
    print t4.timeit(number=10000)
    print t5.timeit(number=10000) 
```

当 s 很小（4 位）时输出：

```
reMethod = 0.0482196671653
filterMethod = 0.0266420145487
evalMethod = 0.0923773329062
literalMethod = 0.108779595759
stripMethod = 0.0165356828523 
```

当 s 很大（150 位）时输出：

```
reMethod = 0.068626707014
filterMethod = 0.28342855188
evalMethod = 0.116445492177
literalMethod = 0.134001262669
stripMethod = 0.0227778106058 
```

当 s 非常大（7500 位）时输出：

```
reMethod = 4.40808699357
filterMethod = 16.7396360029
evalMethod = 4.72486805726
literalMethod = 4.52914962633
stripMethod = 3.65296183068 
```

总的来说，它们在性能上似乎没有太大差异。`filter`是唯一一个随着数字变长而变慢的。从这里你会得到什么，我只是好奇地看到结果，并认为其他人可能也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:41:09.950

尝试使用内置函数`eval`：

```
new_s = int(eval(s)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T11:48:21.160

`eval`很危险。这可能不是最优化的解决方案。但安全灵活。

```
import re

s = "'8255'"

def find_ints(s):
    m = re.search('\d+', s)
    if m:
        return int(m.group(0))
    return None

find_ints(s)
Out[4]: 8255 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T11:45:25.503

你可以`eval`这样使用：

```
>>> s = "'8255'"
>>> int(eval(s))
8255 
```

这也适用于常规字符串：

```
>>> s = '8225'
>>> int(eval(s))
8255 
```

如果您想删除更多 " 和 ' 使用嵌套的`eval`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T11:54:12.260

尝试剥离不需要的字符：

```
int(s.strip("\'")) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T11:56:28.860

您正在做的似乎是解析另一个*文字*中包含的文字。

虽然`eval(eval("'123'"))`可以解决问题，`eval`但通常应避免使用，因为它还会执行表达式中的任意代码。

幸运的是，有一个可用的标准模块可以进行精确评估：[ast - 抽象语法树](http://docs.python.org/2/library/ast.html)：

```
from ast import literal_eval
number = literal_eval(literal_eval(s)) 
```

# css - 如何包装 UL 列表 - 使用 css 换行的 LI

> ID：13528358
> 
> 赞同：2
> 
> 时间：2012-11-23T11:39:11.733
> 
> 标签：css

在下面的图像中，列表将离开屏幕。我需要阻止ul的宽度。应用了宽度，但超出了 ul 宽度。当前使用的 CSS：

```
.menu ul{
width:100%;
max-width:100%;
} 
```

![在此处输入图像描述](../Images/12199f20cec9ba0c1497f562c93f67a5.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T11:54:30.353

试试这个

```
.menu li {
    display: inline-block;
} 
```

[体面的支持](http://caniuse.com/inline-block)，这是一个很好的[总结](http://www.vanseodesign.com/css/inline-blocks/)。

如果有一个

*   `margin-left`尽量不要将宽度设置为`100%`，而是`100% - margin-left-value`
*   `padding-left`采用[`box-sizing: border-box`](http://paulirish.com/2012/box-sizing-border-box-ftw/)

如果你不需要支持旧的浏览器或者可以加载一个 polyfill，那么 flexbox 模型就可以完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:05:21.247

显示：内联；或显示：内联块；

两者都有效。

# javascript - 使用 excanvas 在画布上绘制图像

> ID：13528361
> 
> 赞同：1
> 
> 时间：2012-11-23T11:39:16.097
> 
> 标签：javascript, jquery, html5-canvas, excanvas

我正在使用 excanvas.js 库来支持 IE（9 以下）浏览器中的画布功能。我目前面临的问题是 excanvas 期望 image 作为 drawImage() 方法的第一个参数。我发现它不支持另一个画布或视频作为第一个参数。实现此功能的解决方法是什么？我的代码是这样的。

```
 var canvas1 = document.getElementById("canvas1"); // Get the first canvas Element
    var canvas2 = document.getElementById("canvas2"); // Get the second canvas element
    if (typeof G_vmlCanvasManager != 'undefined') {
        canvas1 = G_vmlCanvasManager.initElement(canvas1); // Initialise with excanvas
        canvas2 = G_vmlCanvasManager.initElement(canvas2);
    }    

    if (canvas1.getContext) {
        var ctx1 = canvas1.getContext("2d");
        var ctx2 = canvas2.getContext("2d");
        var img = new Image();
        img.onload = function () {
            ctx1.drawImage(this, 0, 0, 200, 200); // Draw the image on first canvas
            ctx2.drawImage(canvas1, 0, 0, 200, 200); // Draw the image on to the second canvas using the first canvas
        }
        img.src = "image1.jpg";        
    } 
```

它不适用于 Ie8 及以下浏览器。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:49:37.383

我会尝试这样的事情：

```
function canvasToImage( canvas ) {
    var img = new Image();
    img.src = canvas.toDataURL();
    return img;
} 
```

# visual-studio-2012 - WINDOWS Phone 8 模拟器没有出现

> ID：13528362
> 
> 赞同：0
> 
> 时间：2012-11-23T11:39:18.620
> 
> 标签：visual-studio-2012, windows-phone-8, windows-8

我是 windows 8 开发的新手，我正在运行 microsoft visual studio windows phone express 2012 并遇到了一个问题，当我尝试运行应用程序时，它只显示选择的默认设备而不是模拟器。

我阅读了一些 msdn 表格，他们说要安装 SDK 8.0，但 windows phone express 已经附带了 SDK 8。我尝试过 chnagin 应用程序调试属性，但对我来说唯一可见的选项是设备而不是下面给出的模拟器是相同的附加屏幕截图。

![在此处输入图像描述](../Images/97ae16368fbe57c826194da959588c6a.png)

因此，我的问题是如何让我的应用程序与模拟器一起工作以进行测试，在哪里可以看到当前版本的 SDK 默认支持多少模拟器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:30:20.277

正如 LZH 正确指定的那样，Emulator 将需要 SLAT（二级地址转换）并且应该支持 Hyper-V。

如果处理器支持 .Enable Hyper-V 和 Enable virtualized from BIOS for latest emulators。检查下面的这个链接。 [http://www.microsoft.com/windows/virtual-pc/support/configure-bios.aspx](http://www.microsoft.com/windows/virtual-pc/support/configure-bios.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:05:50.453

模拟器的要求是

*   Windows 8 专业版或更高版本
*   需要支持二级地址转换 (SLAT) 的处理器

检查您的处理器是否支持 SLAT。SLAT 是在某些 Core i7、Core i5 和 Core i3 处理器中的 Nehalem 微架构中引入的。因此，如果您的处理器不是 iCore 及更高版本，您可能无法运行模拟器，因为它需要 Hyper-V

但是，如果您有一台真正的 Windows Phone 8 设备，您仍然可以对其进行测试。

# blackberry - 黑莓关闭 UiApplication 替代入口点

> ID：13528367
> 
> 赞同：1
> 
> 时间：2012-11-23T11:39:33.087
> 
> 标签：blackberry, background-process, entry-point

我需要有一个使用应用程序的后台进程，同时还需要一个通过替代入口点的 UiApplication。

现在，一切都很好，除了告诉 UiApplication 从后台进程关闭之外，我能够很好地在它们之间进行通信。

我尝试了多种方法：

`UiApplication.getUiApplication().requestClose()`不起作用。

我尝试将布尔值设置为 true，UiApplication 每秒检查一次以查看它是否为 true，如果是，它会自行关闭。不工作...

```
UiApplication.getUiApplication().invokeLater(new Runnable(){
     public void run(){
          System.exit(0);
     }
}); 
```

任何人都有这方面的经验，谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:14:04.607

后台和前台是不同的进程，它们不共享数据内存。所以基本上你不能在一个应用程序中设置任何布尔值，而只是在另一个应用程序中检查它。

但是由于您已经在两个应用程序之间进行了通信，可能正在使用`ApplicationManager.postGlobalEvent()`，您可以添加另一个事件“退出”。

# android - DOM 解析器不适用于 Android Ice cream Sandwich

> ID：13528372
> 
> 赞同：0
> 
> 时间：2012-11-23T11:39:45.707
> 
> 标签：android, xmldom

我正在尝试从 URL 解析 xml 数据，它在 android 2.3 上运行，但它在 ICE-cream 三明治及更高版本上崩溃。谁可以帮我这个事？提前致谢。

XMLFunctions.class 中的代码

```
import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;
import java.net.MalformedURLException;
import java.net.URLDecoder;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.util.Log;

public class XMLFunctions {

    public final static Document XMLfromString(String xml){

        Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            is.setEncoding("UTF-8");
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("XMLFunctions", "XML parse error: " + e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("XMLFunctions", "Wrong XML file structure: " + e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("XMLFunctions", "I/O exeption: " + e.getMessage());
            return null;
        }

        return doc;

    }

    /** Returns element value
      * @param elem element (it is XML tag)
      * @return Element value otherwise empty String
      */
     public final static String getElementValue( Node elem ) {
         Node kid;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling() ){
                     if( kid.getNodeType() == Node.TEXT_NODE  ){
                         return kid.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     public static String getXML(String xmlURL){     
            String line = null;

            try {

                DefaultHttpClient httpClient = new DefaultHttpClient();

                HttpPost httpPost = new HttpPost(xmlURL);

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                line = EntityUtils.toString(httpEntity);

            } catch (UnsupportedEncodingException e) {
                line = "<items count=\"0\" status=\"error\"></items>";
            } catch (MalformedURLException e) {
                line = "<items count=\"0\" status=\"error\"></items>";
            } catch (IOException e) {
                line = "<items count=\"0\" status=\"error\"></items>";
            }

            return line;

    }

    public static String numResults(Document doc){      
        Node items = doc.getDocumentElement();
        String res = "0";

        try{
            res = String.valueOf(items.getAttributes().getNamedItem("count").getNodeValue());
        }catch(Exception e ){
            res = "0";
        }

        return res;
    }

    public static String statusResult(Document doc){        
        Node items = doc.getDocumentElement();
        String res = "error";

        try{
            res = String.valueOf(items.getAttributes().getNamedItem("status").getNodeValue());
        }catch(Exception e ){
            res = "error";
        }

        return res;
    }

    public static String getValue(Element item, String str) {    

        NodeList n = item.getElementsByTagName(str);        
        return ParseXMLMethods.getElementValue(n.item(0));

      //  NodeList n = ((Document) e).getElementsByTagName(str);      
       // return XMLFunctions.getElementValue(n.item(0));
    }

    public static String urldecode(String stringToDecode){
        try {
            stringToDecode = URLDecoder.decode(stringToDecode, "utf-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }

        return stringToDecode;
    }

}` 
```

MainClass 是 XMLEntertainment.class

```
`

import java.io.InputStream;
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.ListActivity;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;
import android.widget.AdapterView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class XMLEntertainment extends ListActivity {
    static final String KEY_ID="ItemID";
    static final String KEY_Image = "ImageURL";
    static final String KEY_Video = "VideoURL";
    static final String KEY_Audio = "AudioURL";
    static final String KEY_StartDate = "StartDate";
    static final String KEY_EndDate = "EndDate";
    static final String KEY_ItemName = "ItemName";
    static final String KEY_Address = "Address";
    static final String KEY_Suburb = "Suburb";
    static final String KEY_PostCode= "Postcode";
    static final String KEY_Longitude = "Longitude";
    static final String KEY_Latitude = "Latitude";
    static final String KEY_SubtypeName = "SubtypeName";
    static final String KEY_Cost = "Cost";
    static final String KEY_Details = "Details";
    static final String KEY_Website = "Website";
    static final String KEY_MajorRegionName = "MajorRegionName";
    static final String KEY_Phone = "Phone";
    static final String KEY_Email = "Email";
    static final String KEY_OpeningHours = "OpeningHours";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_entertainment);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
        String xmlURL = "myURL Link";
        String xml = XMLFunctions.getXML(xmlURL);
       Document doc = XMLFunctions.XMLfromString(xml);

       // String xml = ParseXMLOutings.getXML();
       // Document doc = ParseXMLOutings.XMLfromString(xml);

        /*
        int numResults = XMLFunctions.numResults(doc);

        if((numResults <= 0)){
            Toast.makeText(ParseXMLDemo.this, "There is no data in the xml file", Toast.LENGTH_LONG).show();  
            finish();
        }
        */

        NodeList children = doc.getElementsByTagName("ListingElement");

        for (int i = 0; i < children.getLength(); i++) {                            
            HashMap<String, String> map = new HashMap<String, String>();    
            Element e = (Element)children.item(i);
            map.put(KEY_ID, XMLFunctions.getValue(e, KEY_ID));
            map.put(KEY_Image, XMLFunctions.getValue(e, KEY_Image));
            map.put(KEY_Video, XMLFunctions.getValue(e, KEY_Video));
            map.put(KEY_Audio, XMLFunctions.getValue(e, KEY_Audio));
            map.put(KEY_StartDate, XMLFunctions.getValue(e, KEY_StartDate));
            map.put(KEY_EndDate, XMLFunctions.getValue(e, KEY_EndDate));
            map.put(KEY_ItemName, XMLFunctions.getValue(e, KEY_ItemName));
            map.put(KEY_Address, XMLFunctions.getValue(e, KEY_Address));
            map.put(KEY_Suburb, XMLFunctions.getValue(e, KEY_Suburb));
            map.put(KEY_PostCode, XMLFunctions.getValue(e, KEY_PostCode));
            map.put(KEY_Longitude, XMLFunctions.getValue(e, KEY_Longitude));
            map.put(KEY_Latitude, XMLFunctions.getValue(e, KEY_Latitude));
            map.put(KEY_SubtypeName, XMLFunctions.getValue(e, KEY_SubtypeName));
            map.put(KEY_Cost, XMLFunctions.getValue(e, KEY_Cost));
            map.put(KEY_Details, XMLFunctions.getValue(e, KEY_Details));
            map.put(KEY_Website, XMLFunctions.getValue(e, KEY_Website));
            map.put(KEY_MajorRegionName, XMLFunctions.getValue(e, KEY_MajorRegionName));
            map.put(KEY_Phone, XMLFunctions.getValue(e,  KEY_Phone));
            map.put(KEY_Email, XMLFunctions.getValue(e, KEY_Email));
            map.put(KEY_OpeningHours, XMLFunctions.getValue(e, KEY_OpeningHours));

            mylist.add(map);            
        }       

         ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.list_items, 
                 new String[] { KEY_ItemName, KEY_SubtypeName, KEY_Suburb, KEY_PostCode, KEY_Cost,KEY_Details,KEY_Website,
        KEY_Phone,KEY_Email,KEY_MajorRegionName,KEY_OpeningHours}, 
            new int[] { R.id.title, R.id.type});

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
            //Toast.makeText(xmlOutings.this,o.get("TourDetails"), Toast.LENGTH_LONG).show(); 

                 // getting values from selected ListItem
                String imageURL = o.get(KEY_Image);
                 String ItemName = o.get(KEY_ItemName);
                 String AudioURL=o.get(KEY_Audio);
                 String  VideoURL= o.get(KEY_Video);
                String Details =o.get(KEY_Details);
                String type = o.get(KEY_SubtypeName);
                String openingHours = o.get(KEY_OpeningHours);
                String cost = o.get(KEY_Cost);
              // String image1 = in.getStringExtra(KEY_Media_URL);
                String phone= o.get(KEY_Phone);
                String email =o.get(KEY_Email);
                String website = o.get(KEY_Website);
                String address =o.get(KEY_Address);
                String suburb = o.get(KEY_Suburb);
                String postcode = o.get(KEY_PostCode);
               String lat = o.get(KEY_Latitude);
              String lng = o.get(KEY_Longitude);

                    // Starting new intent
                   Intent in = new Intent(getApplicationContext(), ExplorerActivity.class);
                 //  in.putExtra(KEY_Image, imageURL );
                   in.putExtra(KEY_ItemName, ItemName );
                   in.putExtra(KEY_Audio, AudioURL );
                  in.putExtra(KEY_Video, VideoURL );
                  in.putExtra(KEY_Details, Details );
                  in.putExtra(KEY_SubtypeName, type );
                  in.putExtra(KEY_OpeningHours, openingHours );
                  in.putExtra(KEY_Cost, cost );
                  in.putExtra(KEY_Email, email);
                  in.putExtra(KEY_Phone, phone );
                  in.putExtra(KEY_Website, website);
                  in.putExtra(KEY_Address, address );
                  in.putExtra(KEY_Suburb, suburb);
                  in.putExtra(KEY_PostCode, postcode );
                  in.putExtra(KEY_Latitude, lat );
                  in.putExtra(KEY_Longitude, lng);

                      startActivity(in);
            }
            private Drawable LoadImageFromWebOperations(String url)
            {
                  try{
                InputStream is = (InputStream) new URL(url).getContent();
                Drawable d = Drawable.createFromStream(is, "KEY_Image");
                return d;
              }catch (Exception e) {
                System.out.println("Exc="+e);
                return null;
              }
            }

        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:43:11.373

您应该在 ICS 版本的 Android 中使用[AsyncTask进行网络操作。](http://developer.android.com/reference/android/os/AsyncTask.html)您不能在主线程或 UI 线程上进行网络操作。你应该`NetworkOnMainThread`在 logcat 上得到异常。

一个例子如下，

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected String doInBackground(URL... urls) {
         String line = null;
         try {

            DefaultHttpClient httpClient = new DefaultHttpClient();

            HttpPost httpPost = new HttpPost(xmlURL);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            line = "<items count=\"0\" status=\"error\"></items>";
        } catch (MalformedURLException e) {
            line = "<items count=\"0\" status=\"error\"></items>";
        } catch (IOException e) {
            line = "<items count=\"0\" status=\"error\"></items>";
        }

        return line;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         // do further operations like start parsing from here
     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:43:36.760

如果没有看到您的错误堆栈跟踪，我们将无法为您提供帮助。

但根据你的说法`it is working on android 2.3 but it crashes on ICE-cream sandwich and above.`

我建议您使用[**AsyncTask**](http://developer.android.com/reference/android/os/AsyncTask.html)进行 XML 文件解析。这是因为您在应用程序的主 UI 线程中解析 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:46:57.617

这个问题有两个解决方案。

1）不要在主 UIThread 中编写网络调用，为此使用异步任务。

2) 在 setContentView(R.layout.activity_main); 之后将以下代码写入 MainActivity 文件；

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

并将下面的 import 语句放入您的 java 文件中。

```
import android.os.StrictMode; 
```

# perl - XML::Dumper 在输出中使用错误的哈希引用

> ID：13528375
> 
> 赞同：4
> 
> 时间：2012-11-23T11:39:53.250
> 
> 标签：perl, hash, xml-parsing, xml-serialization, hashref

我正在尝试使用 XML::Dumper 序列化以下数据结构

```
'options_settings' => {
  'telnet.distinct.enable' => {
    'text' => 'Option telnet.distinct.enable needs to be set to \'on\' as of
 workaround for Bug 476803',
    'severity' => '7'
   }
 },
'EOS_details' => {
  '338' => bless( {
    'info' => '<a href="https://support.netapp.com/info/communications/ECMP1110462.html " target="_blank">  CPC-0705-02 </a>',
    'count' => '48',
    'ASUP_id' => 'AE20121117202086',
    'part' => 'ESH2 - X5511A-RC, X5511-RC-C',
    'category' => 'I/O Module',
    'EOS_date' => '06/02/2013',
    'severity' => '8'
   }, 'EOSObject' ), 
```

问题是，当我使用 XML:Dumper 将其解析为 xml 时，它对 2 个单独的哈希引用使用相同的内存地址：

```
 <item key="338">
   <hashref blessed_package="EOSObject" memory_address="0x295b5758">
    <item key="ASUP_id">AE20121117165273</item>
    <item key="EOS_date">06/02/2013</item>
    <item key="category">I/O Module</item>
    <item key="count">48</item>
    <item key="info">&lt;a href=&quot;https://support.netapp.com/info/communications/ECMP1110462.html &quot; target=&quot;_blank&quot;&gt;  CPC-0705-02 &lt;/a&gt;</item>
    <item key="part">ESH2 - X5511A-RC, X5511-RC-C</item>
    <item key="severity">8</item>
   </hashref>
  </item>
 </hashref>
<item key="options_settings">
 <hashref memory_address="0x295b5320">
  <item key="telnet.distinct.enable">
   <hashref memory_address="0x295b5758">
   </hashref>
  </item>
 </hashref>
</item> 
```

注意 memory_address="0x295b5758"。

因此，当从文件中读回 option_settings 哈希引用指向 EOS 对象时：/

这是 XML::Dumper 中的错误还是我做错了什么？使用最新的 XML::Dumper 0.81

PS我试图在主脚本之外重现它并且它有效。我仍然无法理解主脚本中的数据是如何被破坏的。这是使用 XML::Dumper 的代码：

```
 DEBUG("Before serialization: " . Data::Dumper::Dumper($result));
    my $dump = new XML::Dumper;
    my $dump_test = new XML::Dumper;
    my $test_xml = $dump_test->pl2xml ($result);
    DEBUG("After serialization in memory: " . Data::Dumper::Dumper($test_xml));
    $dump->pl2xml( $result, $filename ); 
```

结果打印正确。“options_settings”是单独的条目。在 $test_xml 它已经和 EOS_details 混在一起了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:56:24.987

我正在尝试复制您的问题，但没有成功。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use XML::Dumper;

my $eos = bless {
    'info'     => '<a href="https://support.netapp.com/info/communications/ECMP1110462.html " target="_blank">  CPC-0705-02 </a>',
    'count'    => '48',
    'ASUP_id'  => 'AE20121117202086',
    'part'     => 'ESH2 - X5511A-RC, X5511-RC-C',
    'category' => 'I/O Module',
    'EOS_date' => '06/02/2013',
    'severity' => '8'
    }, 'EOSObject';

my %data = (
    'options_settings' => {
        'telnet.distinct.enable' => {
            'text'     => 'Option telnet.distinct.enable needs to be set to \'on\' as of
 workaround for Bug 476803',
            'severity' => '7'
        }
    },
    'EOS_details' => { 338 => $eos }
);

print pl2xml( \%data ); 
```

我的程序的输出：

```
<perldata>
 <hashref memory_address="0x253fb18">
  <item key="EOS_details">
   <hashref memory_address="0x2517e08">
    <item key="338">
     <hashref blessed_package="EOSObject" memory_address="0x24f9998">
      <item key="ASUP_id">AE20121117202086</item>
      <item key="EOS_date">06/02/2013</item>
      <item key="category">I/O Module</item>
      <item key="count">48</item>
      <item key="info">&lt;a href=&quot;https://support.netapp.com/info/communications/ECMP1110462.html &quot; target=&quot;_blank&quot;&gt;  CPC-0705-02 &lt;/a&gt;</item>
      <item key="part">ESH2 - X5511A-RC, X5511-RC-C</item>
      <item key="severity">8</item>
     </hashref>
    </item>
   </hashref>
  </item>
  <item key="options_settings">
   <hashref memory_address="0x2517688">
    <item key="telnet.distinct.enable">
     <hashref memory_address="0x2517598">
      <item key="severity">7</item>
      <item key="text">Option telnet.distinct.enable needs to be set to &apos;on&apos; as of
 workaround for Bug 476803</item>
     </hashref>
    </item>
   </hashref>
  </item>
 </hashref>
</perldata> 
```

我倾向于认为你的程序有问题。:(

# ruby-on-rails - 带有模型和 Mongo 的进度条

> ID：13528378
> 
> 赞同：1
> 
> 时间：2012-11-23T11:39:59.973
> 
> 标签：ruby-on-rails, mongodb, twitter-bootstrap, progress-bar

拥有 twitter 引导程序并使用进度条。

想用 javascript 为栏设置动画。想出了如何根据时间为栏设置动画，现在尝试了解如何根据进度设置动画。

从 mongo api 中拉出元素时会出现加载屏幕。我该如何创建这个动画进度条，当我拉出更多元素时它会移动？

```
def self.get_xxx_users(read_db)
db_users = read_db.collection("users");
db_users = db_users.find({"$and" => [:plan => { "$ne" =>"XXX"}, :'xxx.xxx_type' => {"$ne" => "XXX"}]},{}).to_a  
db_users 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:13:13.207

进度条不会神奇地进步，因此您必须手动提供挂钩。

一个好的但简单（并且可能需要优化）的方法是计算您想要挑选的记录数：

```
db_users_count = db_users.find({"$and" => [:plan => { "$ne" =>"XXX"}, :'xxx.xxx_type' => {"$ne" => "XXX"}]},{}).count(); 
```

然后将其除以设定区域，使用`limit()`每次完成您需要的一定数量的批处理。

因此，当您将这些（例如，每批 100 个）用户添加到`to_a`您的 ruby​​ 应用程序中的主数组（告诉它增加你的进度条。

# javascript - 隐藏和显示 和 点击使用 Javascript

> ID：13528381
> 
> 赞同：0
> 
> 时间：2012-11-23T11:40:08.983
> 
> 标签：javascript, jquery, html, css

我需要在我的网页上显示一些类别及其子类别。所以我把它们以`nested <ul> <li>`标签的形式排列起来。我想要的效果是，只有当用户单击其中一个类别时，所有子类别都应该变得可见。最初没有可见的子类别。

* * *

*在身体部分，我做了这个*

```
<ul>
   <li class="dropdown">Data mining and data warehousing
      <ul>
           <li>Data mining techniques</li>
           <li>Knowledge discovery</li>
      </ul>
   </li>

    <li class="dropdown">Soft computing and artificial intelligence
       <ul>
            <li>Fuzzy systems</li>
            <li>Neural networks</li>
       </ul>
    </li>
</ul> 
```

* * *

*在css部分，我已经完成了*

```
li.dropdown ul {
display : none;
} 
```

* * *

*我在 html 页面的 head 部分添加了以下 Javascript 脚本*

```
<script type="text/javascript">
$('li.dropdown').click(function() {
   $(this).children('ul').toggle();
});
</script> 
```

* * *

最初，效果很好，所有子类别都被隐藏了。但是，我想说，当我单击 时`Data mining and data warehousing`，两个子类别也应该变得可见，它们是`Data mining techniques`和`Knowledge discovery`。

* * *

此外，当我单击其他类别时，之前打开的类别的子类别应该会再次折叠。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T11:48:04.587

所以这个想法是隐藏除 clicked 之外的所有内容`li`，然后为 clicked 切换子类别可见性：

```
$('li.dropdown').click(function() {
   $('li.dropdown').not(this).find('ul').hide();
   $(this).find('ul').toggle();
}); 
```

这是带有示例的[jsFiddle 。](http://jsfiddle.net/4nfXS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:42:54.887

尝试以下操作：

```
$('li.dropdown').click(function() {
   $(this).find('ul').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:48:13.203

```
$('li.dropdown').click(function() {
   $('.dropdown ul').hide();
    $(this).children('ul').show();
}); 
```

试试这个[http://jsfiddle.net/7NYhe/](http://jsfiddle.net/7NYhe/)

# c# - C#子类中的访问事件

> ID：13528384
> 
> 赞同：1
> 
> 时间：2012-11-23T11:40:20.003
> 
> 标签：c#, .net, events, inheritance

```
 class Program
    {
       public delegate void MyDelatage();

       public event MyDelatage MyEvent;

       public Program()
       {
           MyEvent += Fun;
       }
       public void Fun()
       {
          Console.WriteLine("Base class");
       }
       public void RaiseMyEvent()
       {
          if(MyEvent != null)
                MyEvent();
           }
       }

    class Child : Program
    {
        public void Start()
        {
           //base.MyEvent();//not allowed
           RaiseMyEvent();
         }
     } 
```

为什么我不能在子类中访问 MyEvent ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:43:42.257

因为`event`是一种语法糖，涉及生成在派生类中不可见的私有字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:49:39.423

“...当您创建一个可用作其他类的基类的类时，您必须考虑这样一个事实，即事件是一种特殊类型的委托，只能从声明它们的类中调用。派生类不能直接调用在基类中声明的事件。虽然有时您可能想要一个只能由基类引发的事件，但在大多数情况下，您应该启用派生类来调用基类事件。...“（[http ://msdn.microsoft.com/en-us/library/hy3sefw3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/hy3sefw3%28v=vs.80%29.aspx) )

你应该在你的基类中写这样的东西：

```
public event EventHandler<EventArgs> OnButtonClick;
...
protected virtual void OnReady(object sender, EventArgs e) {
    if(OnButtonClick != null) {
        OnButtonClick(sender, e);
    }
} 
```

并在您的子类中调用此方法，即：

```
base.OnReady(sender, e); 
```

# underscore.js - 如何在 text/html 内的下划线模板中包含数据源？

> ID：13528387
> 
> 赞同：0
> 
> 时间：2012-11-23T11:40:39.407
> 
> 标签：underscore.js

这是我的代码

```
<script type="text/html" id='usageList'>
            <table cellspacing='0' cellpadding='0' border='1' >
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>LastName</th>
                    </tr>
                </thead>

                <tbody>
                    /* I want to include data source via ajax or some mechanism here */
                    <%_.each(items,function(item,key,list){ %>
                    <% var f = item.name; %><!-- create more variables -->
                    <% var l= item.lastName; %>
                    <tr>
                        <!-- use variables -->
                        <td><%= key %></td>
                        <td class="<%= f %>"><%= f %></td>
                        <td class="<%= l %>"><%= l %></td>
                    </tr>
                    <% }); %>
                </tbody>
            </table>
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:06:00.417

首先，将模板放入变量中

```
var template = ​$(​'#usageList')​​​​​​​​​​​​​​.html(); 
```

然后，发出一个 Ajax 请求。使用`_.template`进程接收到的数据并将其添加到 DOM 节点

```
$.getJSON('ajax/test.json', function(data) {
    $('#output').html(_.template(template,{items:data}));
}); 
```

返回的数据必须遵循此格式

```
[
    {'name':'john', 'lastName':'M'},
    {'name':'jean', 'lastName':'N'},
    {'name':'carl', 'lastName':'K'},
    {'name':'peter', 'lastName':'B'}
] 
```

检查这个 JSFiddle：http: [//jsfiddle.net/jaimem/2gPYZ/](http://jsfiddle.net/jaimem/2gPYZ/)

# android - 如何减少Android中十六进制字符串的长度？

> ID：13528392
> 
> 赞同：0
> 
> 时间：2012-11-23T11:40:55.613
> 
> 标签：android, hex

在我的应用程序中，我使用 AES 算法加密和解密了一个字符串。但是加密的字符串是以十六进制字符串的形式出现的，随着我们增加需要加密的字符串的长度，它的长度会继续增加。您能否告诉我是否有任何方法可以减少加密字符串的长度？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:47:11.343

在十六进制中，您通常使用固定大小，例如每字节两个字符（00-FF）或前缀格式（例如 0x0 - 0xFF）。因此，除了对源数据或输出十六进制字符串进行[数据压缩](http://en.wikipedia.org/wiki/Data_compression)之外，基本上没有太大的改进空间。

# xml - 如何在模型编辑器中以图形方式查看添加的属性（添加到 xml 文件中）：

> ID：13528399
> 
> 赞同：1
> 
> 时间：2012-11-23T11:41:04.867
> 
> 标签：xml, uml, modeling, papyrus

正如我们所知道的以 xml 格式表示的 uml 图，所以我使用 Papyrus 创建类图，该类具有一个类，该类具有两个属性和一个操作，然后我尝试在 Papyrus 的文本编辑器中编辑 xml 文件以手动将另一个属性添加为 xml 格式但是当我在模型编辑器中显示类时没有添加任何内容？为什么该属性未添加到类中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T09:04:10.603

在图形编辑器中右键单击您的类，然后按 F4：您将有一个对话框菜单，显示或不显示哪些字段/方法/内部类。

# regex - 使用正则表达式插入或替换部分

> ID：13528400
> 
> 赞同：0
> 
> 时间：2012-11-23T11:41:09.113
> 
> 标签：regex

对于知道答案的人来说，这是一个非常简单的问题。我在 EditPat Lite 工作，并有一个格式为：

```
"Origin - Destination 1234.5 miles" 
```

我需要在目的地和距离之间插入一个“，”，并且可以使用`( [0-9]+.[0-9]+ miles)`. 但我不知道如何插入逗号。已使用各种括号搜索解决方案，但没有任何效果。我需要防止字符串被正则表达式替换。

感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:43:42.777

这些只是猜测，但请尝试替换为：

*   `,$1`
*   `,\1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:25:26.893

你需要一个正则表达式替换函数，我想你有。在其中，您可以引用匹配的表达式（正如另一个答案所说，这通常使用`$0`or`\0`或子匹配的不同数字来完成。

您可以用 替换您拥有的正则表达式`,\0`，这意味着“逗号，后跟被替换的内容”，或者您可以使用非消耗匹配，因此您将正则表达式之前的 0 字符字符串替换为逗号：`(?= [0-9]+.[0-9]+ miles)`匹配这个“空”字符串。

这种类型的匹配称为“正向前瞻”。它也有负面和后视风格：`(?!...)`, `(?<=...)`, `(?<!...)`.

# html - IE8剩余高度

> ID：13528403
> 
> 赞同：0
> 
> 时间：2012-11-23T11:41:18.193
> 
> 标签：html, css, internet-explorer, layout, internet-explorer-8

我的目标是在 IE8 (&IE9) 中实现这样的结构。
不想使用 JavaScript，因为某些 3rd 方正在动态插入内容，这只会导致不同的滚动条比例。

我一直在寻找“大量”的时间，即相当多的时间。我无法理解和/或使用以下线程。[StackOverflow：make-iframe-to-fit-100-of-containers-remaining-height](https://stackoverflow.com/questions/325273/make-iframe-to-fit-100-of-containers-remaining-height)

```
<!DOCTYPE html>
<html>
    <body>
        <p>Some text with unknown height, fixed at the top.</p>
        <div>
            Some content that will not exceed the body (100% height),
            but will fill the body until the content is too long, which would give
            a scrollbar.
        </div>
    </body>
</html> 
```

我可以在 Chrome 中实现这一点（图片=整个浏览器内容），底部的提琴手：

![铬示例](../Images/2bf31a7b3b9157bc2c3c26c1ca6a2ab1.png)

IE8/9 给了我这个（图片=整个浏览器内容，再次滚动到正文的底部）：

![IE 搞砸了](../Images/cf2e1e37c35dafc185750ac67c20feab.png)

[Chrome 很好，提琴手。](http://jsfiddle.net/XQbzy/)

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:25:43.290

厌倦了没有完成我想要的东西，我毕竟被迫使用 JS（我意识到确实没有人能成功地回答我的问题，而且这个解决方案也不是我实际问的）。

[JSfiddle](http://jsfiddle.net/XQbzy/20/)

小提琴比下面显示的更复杂，因为我需要这些额外的东西。

```
function adjustHeight() {

    var header = document.getElementById("header");
    var container = document.getElementById("container");

    container.style.top = header.clientHeight + "px";
}

// Note the place of the method invocation ('asap'), adjustHeight()
<body>
    <div id="header">
        <p id="p">
            Line1<br/>
            Line2<br/>
            Line3<br/>
            Line4<br/>
        </p>
        <div id="toggle">Toggle</div>
    </div>
    <div id="container">
        <script>adjustHeight();</script>
        <div id="content">
            First row visible<br/><br/>
            Scrollbar shows normally<br/>
            Body doesnt scroll<br/>
            Works on resize too (by default)<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/>
            One row..<br/><br/>

            Last row visible on collapsed/expanded
        </div>
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:52:16.453

我看到您在这里使用的是 div 而不是 iframe，这是一个应该可以工作的小提琴。使用定位元素。

```
position:absolute;
bottom:0px;
top:80px;
left:0px;
right:0px; 
```

[http://jsfiddle.net/XQbzy/1/](http://jsfiddle.net/XQbzy/1/)

# chef-infra - 用厨师重命名文件的最佳方法

> ID：13528409
> 
> 赞同：7
> 
> 时间：2012-11-23T11:41:38.880
> 
> 标签：chef-infra, chef-recipe

如何用厨师重命名文件？

在[厨师文档](http://wiki.opscode.com/display/chef/Resources#Resources-File)中，我只发现：

*   创造
*   create_if_missing
*   删除
*   触碰

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T11:47:48.893

使用 ruby​​_block 并在内部使用 ::File.Rename(src,dst)。Chef 框架没有文件重命名（或者至少在 0.10.18 之前没有）。

只是一个例子：

```
ruby_block "Rename file" do
  block do
    ::File.rename(new_resource.src,new_resource.dst)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-07T20:44:48.077

如果您需要重命名多个文件，则另一种选择。检查资源之一以了解它是否已经运行。

```
ruby_block "Rename file" do
  block do
    ::Dir.glob("*/*.src").each {|i| File.rename(i, i.gsub(/(.*).src/,'\\1.dst'))};
  end
  not_if {File.exists?("new_resource.dst")}
end 
```

# vb.net - “显示参数进程”查询在 oracle 中不起作用

> ID：13528410
> 
> 赞同：0
> 
> 时间：2012-11-23T11:41:39.250
> 
> 标签：vb.net, oracle

我正在使用 oracle 10g 数据库速成版。当我尝试在 oracle 中执行“显示参数进程”查询时，它不起作用。它显示一条错误消息：

ORA-00900: 无效的 SQL 语句

但“显示参数进程”查询在 sqlplus 中成功执行。

我的问题是：我正在使用 vb.net 应用程序连接 oracle 数据库。我需要在这个应用程序中执行这个查询。

我有一个代码：

```
 Dim sql As String = "Show parameter processes" 
            Dim cmd As New OracleCommand(sql, conn)
            Dim dr As OracleDataReader = cmd.ExecuteReader() 
```

它给出了编译错误：“ORA-00900：无效的 SQL 语句”

谁能帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T11:46:10.437

“显示参数 XX”是一个 SQLPLUS 命令。

SQL 中的等价物是（这就是 SQLPLUS 会在幕后为你做的事情）

```
select value from v$parameter where name LIKE '%processes%' 
```

# javascript - 如何正确使用array.push？

> ID：13528411
> 
> 赞同：1
> 
> 时间：2012-11-23T11:41:45.930
> 
> 标签：javascript

```
var send_value = [current_site_id, current_site_name, current_site_description];
console.log(send_value);
send_value = jQuery(this).is(':checked') ? send_value.push('add') : send_value.push('delete');
console.log(send_value); 
```

结果是

> [“12”，“qwrqweqwer”，“qwreqwr”]
> 4

我哪里错了？

PS。抱歉，我的错误在`send_value =`，无法理解它是如何到达那里的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:44:15.637

此行`send_value = jQuery(this).is(':checked') ? send_value.push('add') : send_value.push('delete');`分配 to 的返回*值*，它不推​​送任何内容。返回值是数组对象的新长度，[你可以在规范中看到](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.7)`push``send_value`

尝试这个：

```
send_value.push(jQuery(this).is(':checked') ? 'add' : 'delete'); 
```

推送三元的结果值
如果您发现它更具可读性，您可以将您的三元转换为表达式，而不是语句：

```
(jQuery(this).is(':checked') ? send_value.push('add') : send_value.push('delete'));//<-- notice surrounding parentheses 
```

但是，坦率地说，如果您担心可读性，最好一起取消三元组恕我直言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T11:44:39.703

`push`推送完成后返回数组的长度。尝试这个：

```
var send_value = [current_site_id, current_site_name, current_site_description];
console.log(send_value);
send_value.push( jQuery(this).is(':checked') ? 'add' : 'delete' );
console.log(send_value); 
```

此外，您应该使用对象而不是数组。`send_value.site_id`读起来比`send_value[0]`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:46:21.270

```
var result = jQuery(this).is(':checked') ? 'add' : 'delete';
    send_value.push(result); 
```

# osx-mountain-lion - 无法在 Lion/Mountain Lion 上安装 python-mysql

> ID：13528413
> 
> 赞同：3
> 
> 时间：2012-11-23T11:41:59.287
> 
> 标签：osx-mountain-lion, mysql-python

去年我花了整整两天时间试图让 python-mysql 工作在我干净安装的 Lion 上，最后绝望地放弃了。升级到山狮后，我想我会再试一次，但没有成功。可能是我对 Lion 的所有尝试都搞砸了我的设置，我唯一的希望是全新安装，但以防万一有人能救我，这里是症状。

首先，我删除了仍然存在的三个版本：

```
/Users/phoebebr/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-i386.egg-tmp
/Users/phoebebr/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-i386.egg-tmp/_mysql.so
/Users/phoebebr/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg-tmp
/Users/phoebebr/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg-tmp/_mysql.so
/Users/phoebebr/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-x86_64.egg-tmp
/Users/phoebebr/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-x86_64.egg-tmp/_mysql.so 
```

然后重新安装。一切似乎都正常，尽管有警告，并且似乎是 64 位版本：

```
 Phoebe-Brights-iMac:.python-eggs phoebebr$ sudo pip install mysql-python
    dyld: DYLD_ environment variables being ignored because main executable (/usr/bin/sudo) is setuid or setgid
    Password:
    Downloading/unpacking mysql-python
      Downloading MySQL-python-1.2.4c1.zip (113kB): 113kB downloaded
      Running setup.py egg_info for package mysql-python
        Downloading http://pypi.python.org/packages/source/d/distribute/distribute-0.6.28.tar.gz
        Extracting in /tmp/tmp7fFOxU
        Now working in /tmp/tmp7fFOxU/distribute-0.6.28
        Building a Distribute egg in /private/tmp/pip-build/mysql-python
        /private/tmp/pip-build/mysql-python/distribute-0.6.28-py2.7.egg

    Installing collected packages: mysql-python
      Running setup.py install for mysql-python
        building '_mysql' extension
        clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -pipe -Dversion_info=(1,2,4,'rc',5) -D__version__=1.2.4c1 -I/usr/local/mysql/include -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _mysql.c -o build/temp.macosx-10.8-intel-2.7/_mysql.o -Os -g -fno-common -fno-strict-aliasing -arch x86_64
        clang: warning: argument unused during compilation: '-mno-fused-madd'
        In file included from _mysql.c:44:
        /usr/local/mysql/include/my_config.h:330:11: warning: 'SIZEOF_SIZE_T' macro redefined
          #define SIZEOF_SIZE_T  SIZEOF_LONG
                  ^
        /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/pymacconfig.h:43:17: note: previous definition is here
        #        define SIZEOF_SIZE_T           8
                        ^
        In file included from _mysql.c:44:
        /usr/local/mysql/include/my_config.h:423:9: warning: 'HAVE_WCSCOLL' macro redefined
        #define HAVE_WCSCOLL
                ^
        /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/pyconfig.h:891:9: note: previous definition is here
        #define HAVE_WCSCOLL 1
                ^
        _mysql.c:287:14: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
                        cmd_argc = PySequence_Size(cmd_args);
                                 ~ ^~~~~~~~~~~~~~~~~~~~~~~~~
        _mysql.c:317:12: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
                        groupc = PySequence_Size(groups);
                               ~ ^~~~~~~~~~~~~~~~~~~~~~~
        _mysql.c:470:14: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
                                int j, n2=PySequence_Size(fun);
                                       ~~ ^~~~~~~~~~~~~~~~~~~~
        _mysql.c:1105:9: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                        len = mysql_real_escape_string(&(self->connection), out, in, size);
                            ~ ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        _mysql.c:1107:9: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                        len = mysql_escape_string(out, in, size);
                            ~ ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        _mysql.c:1146:9: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
                size = PyString_GET_SIZE(s);
                     ~ ^~~~~~~~~~~~~~~~~~~~
        /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/stringobject.h:92:32: note: expanded from macro 'PyString_GET_SIZE'
        #define PyString_GET_SIZE(op)  Py_SIZE(op)
                                       ^
        /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/object.h:116:56: note: expanded from macro 'Py_SIZE'
        #define Py_SIZE(ob)             (((PyVarObject*)(ob))->ob_size)
                                         ~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
        _mysql.c:1156:9: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                        len = mysql_real_escape_string(&(self->connection), out+1, in, size);
                            ~ ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        _mysql.c:1158:9: warning: implicit conversion loses integer precision: 'unsigned long' to 'int' [-Wshorten-64-to-32]
                        len = mysql_escape_string(out+1, in, size);
                            ~ ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        _mysql.c:1252:11: warning: implicit conversion loses integer precision: 'Py_ssize_t' (aka 'long') to 'int' [-Wshorten-64-to-32]
                if ((n = PyObject_Length(o)) == -1) goto error;
                       ~ ^~~~~~~~~~~~~~~~~~
        /System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/abstract.h:434:25: note: expanded from macro 'PyObject_Length'
        #define PyObject_Length PyObject_Size
                                ^
        _mysql.c:1444:10: warning: implicit conversion loses integer precision: 'size_t' (aka 'unsigned long') to 'int' [-Wshorten-64-to-32]
                                len = strlen(buf);
                                    ~ ^~~~~~~~~~~
        _mysql.c:1446:10: warning: implicit conversion loses integer precision: 'size_t' (aka 'unsigned long') to 'int' [-Wshorten-64-to-32]
                                len = strlen(buf);
                                    ~ ^~~~~~~~~~~
        _mysql.c:1482:11: warning: implicit conversion loses integer precision: 'size_t' (aka 'unsigned long') to 'int' [-Wshorten-64-to-32]
                                        len = strlen(buf);
                                            ~ ^~~~~~~~~~~
        _mysql.c:1484:11: warning: implicit conversion loses integer precision: 'size_t' (aka 'unsigned long') to 'int' [-Wshorten-64-to-32]
                                        len = strlen(buf);
                                            ~ ^~~~~~~~~~~
        _mysql.c:1567:10: warning: comparison of unsigned expression < 0 is always false [-Wtautological-compare]
                if (how < 0 || how >= sizeof(row_converters)) {
                    ~~~ ^ ~
        16 warnings generated.
        clang -bundle -undefined dynamic_lookup -Wl,-F. build/temp.macosx-10.8-intel-2.7/_mysql.o -L/usr/local/mysql/lib -lmysqlclient_r -lpthread -o build/lib.macosx-10.8-intel-2.7/_mysql.so -arch x86_64

    Successfully installed mysql-python
    Cleaning up… 
```

但它仍然不会导入：

```
 Phoebe-Brights-iMac:.python-eggs phoebebr$ python
    Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
    [GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
    Type "help", "copyright", "credits" or "license" for more information.

    >>> import MySQLdb
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
      File "/Library/Python/2.7/site-packages/MySQLdb/__init__.py", line 19, in <module>
        import _mysql
    ImportError: dlopen(/Library/Python/2.7/site-packages/_mysql.so, 2): Library not loaded: libmysqlclient.18.dylib
      Referenced from: /Library/Python/2.7/site-packages/_mysql.so
      Reason: image not found 
```

然而它试图加载的文件就在那里！

```
 Phoebe-Brights-iMac:/ phoebebr$ cd  /Library/Python/2.7/site-packages
    Phoebe-Brights-iMac:site-packages phoebebr$ ls
    total 792
    drwxr-xr-x  4 root  wheel     136 25 Oct 09:31 Django-1.4.2-py2.7.egg
    drwxr-xr-x  2 root  wheel     238 23 Nov 11:16 MySQL_python-1.2.4c1-py2.7.egg-info
    drwxr-xr-x  3 root  wheel     510 23 Nov 11:16 MySQLdb
    -rw-r--r--  1 root  wheel     119 11 Oct 23:59 README
    -rwxr-xr-x  1 root  wheel   67240 23 Nov 11:16 _mysql.so
    -rw-r--r--  1 root  wheel    2352 23 Nov 11:16 _mysql_exceptions.py
    -rw-r--r--  1 root  wheel    4243 23 Nov 11:16 _mysql_exceptions.pyc
    -rw-r--r--  1 root  wheel     306 23 Nov 10:37 easy-install.pth
    drwxr-xr-x  4 root  wheel     136 23 Nov 10:37 pip-1.2.1-py2.7.egg
    -rw-r--r--  1 root  wheel  295372 22 Oct 20:21 pymongo-2.3-py2.7-macosx-10.8-intel.egg
    -rw-r--r--  1 root  wheel   17994 22 Oct 20:22 sleepy.mongoose-0.1-py2.7.egg 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T16:27:05.713

过去，我总是在全新安装时遇到 libmysqlclient.18.dylib 错误。

这通常对我有用。

```
sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib 
```

我只需要对 Mountain Lion 进行全新安装，现在这个包出现了新问题。v1.2.4 真的很新。您可以尝试 pip install MySQL-python==1.2.3 只是为了安全，因为我认为 1.2.4 仍然是 RC1。

编辑：

我是个迟到的人，偶然安装了 32 位 MySQL。1.2.4c1 确实有效。正如我建议使用`export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:/usr/local/mysql/lib/`而不是做符号链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:35:05.463

我只是偶然发现了另一个可能的答案，这可能比我通常从这里做的要好。

[http://www.djangoapp.com/blog/2011/07/25/django-installation-on-mac-os-x-lion/](http://www.djangoapp.com/blog/2011/07/25/django-installation-on-mac-os-x-lion/)

`export DYLD_LIBRARY_PATH=”$DYLD_LIBRARY_PATH:/usr/local/mysql/lib/`在您的终端中，看看问题是否仍然存在。您可以将它添加到您的 .profile 文件中以使其持久化，这样您就不需要每次都运行它。

# c# - 离开单元格 Fous 时发生 ArgumentOutOfRange 异常

> ID：13528414
> 
> 赞同：0
> 
> 时间：2012-11-23T11:42:02.233
> 
> 标签：c#, winforms, datagridview

当用户单击单元格时，当它具有焦点时，如果我想打开另一个文件，我会收到一条`Argument Out Of Range Exception Error` 我添加的错误消息`try catch & data Error event handler`，但我仍然收到此错误。我怎样才能解决这个问题？？

```
private void datagridview_CellValidating(object sender, CellValidatingEventArgs e)
{
try
{
    if (e.ColumnIndex == 2 || e.ColumnIndex == 3)
    {
        datagridview.Rows[e.RowIndex].ErrorText = "";
        int newInteger;
        if (datagridview.Rows[e.RowIndex].IsModified)
            return;
        if (!int.TryParse(e.Value.ToString(),
                          out newInteger) || newInteger < -50000 || newInteger > 50000)
        {
            e.Cancel = true;
            string errorMesssage = d_LanguageDropDownList.SelectedItem.ToString() == "French" ? "Entrez des valeurs décimales entre -50000 et 50000"
                          : "Enter decimal values between -50000 to 50000";
            datagridview.Rows[e.RowIndex].ErrorText = errorMesssage;
        }
    }

}
catch (Exception exception)
{
}

}
private void datagridview_DataError(object sender, GridViewDataErrorEventArgs e)
{

} 
```

![在此处输入图像描述](../Images/fc5c00c070c041efd6475f85aad5c2ab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:08:36.660

当网格中没有行时，或者在还没有索引的“新行”上，可以调用事件。所以你需要在索引任何东西之前检查是否`RowIndex`是。`>= 0`

如果你设置了一个断点，你会看到在错误发生之前，`RowIndex`是`-1`.

# c++ - 在 C++ 中使用引用和指针

> ID：13528425
> 
> 赞同：1
> 
> 时间：2012-11-23T11:42:44.963
> 
> 标签：c++, pointers, reference

我正在尝试学习 C++，但在学习指针和引用时遇到了一些困难。我试图理解为什么以下某些内容不起作用，我似乎无法弄清楚“double *const ptd”和“const double *ctd”之间的区别

```
double d;
  const double r; //bad; r must be initialised
  const double pi = 3.1416;
  double *ptr = &pi; //illegal to point to a constant, because otherwise one could change the value of the constant which defies the purpose of a constant
  double *const cpt; //bad; cpt must be initialised
  double *const ptd = &d;
  const double *ctd = &d;
  const double *ptc = &pi;
  double *const ptp = &pi; //illegal
  const double *const ppi = &pi; 
  double * const * pptr1 = &ptc;
  double * const * pptr2 = &ptd;

  void F () {
    ptr = new double;
    r = 1.0;
    *ptr = 2.0;
    cpt = new double;
    *cpt = 3.0;
    ptc = new double;
    *ptc = 4.0;
    ptd = new double;
    *ptd = 5.0;
    ctd = new double;
    *ctd = 6.0;
    ptp = new double;
    *ptp = 7.0;
    ppi = new double;
    *ppi = 8.0;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:50:51.083

`double * const`（读作“常量指针”）表示指针是常量。你不能修改它，但你可以改变它指向的对象。

`const double *`or `double const *`（读作“指向常量的指针”）表示指针不能用于改变它指向的对象；但指针本身可以修改。

一般来说，`const`限定在它*之前*的事物；或者第一件事，如果它之前没有任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:49:31.970

`const double *ctd`：

*   它意味着一个**指针**（一个地址很像一个指示内存区域开始的整数值），它**不是常量**（这个地址值可以改变以指向另一个内存区域，例如`ctd = nullptr;`）**指向一个 const double** .. .，被指向的双精度值永远不会改变它的值。

`double *const ptd`：

*   它意味着一个**常量指针**（一个非常类似于指示内存区域开始的常量整数值的地址），它是一个**常量**（这个地址值不能改变以指向其他任何东西） **指向一个**值可以改变的双精度值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:50:47.793

`double * const ptr`首先，关于和的区别`const double * ptr`。第一个 ( `double * const ptr`) 是一个常量指针`ptr`，它应该指向`double`. 指针本身是 const，它指向的*不是*const。

第二个变体 ( `const double * ptr`) 生成一个应该指向 a 的指针`const double`。在这种情况下，情况正好相反：指针本身不是 const，但它指向的*是*const。

现在，考虑到您遇到的错误（我会从上到下）：

*   `const double r;`- 你需要初始化常量，像这样：`const double r = 15`;
*   `double *ptr = &pi;`- 你基本上是在做一个指向`r`. 既然`r`是`const`，指针必须是指向的指针`const double`，而不仅仅是`double`。正确的将是`const double *ptr = &pi;`
*   `double *const cpt;`- 再次未初始化的常量，与第一个相同。所有常量都*必须*初始化。类似的东西`double *const cpt = new double`会做。
*   `double *const ptp = &pi;`- 与第二个相同。你这里的*指针*是 const，但它必须指向一个正常的`double`. 相反，您确实将其指向 a `const double`，这会导致错误。`const double *const ptp = &pi;`将工作。
*   `double * const * pptr1 = &ptc;`在这里，您试图创建一个指针，该指针`pptr1`应该指向一个双精度指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:51:51.107

*   `const double * x`是一样的`double const * x`。
    *   它的意思是**“`x`指向一个`double`不可变的”**
    *   也就是说，该`double`值不能通过`x`
*   `double * const y`
    *   表示**"是指向"`y`的不可变指针`double`**
    *   您可以通过更改`double`值`y`
    *   但你不能改变指针`y`本身（即不能指向另一个内存位置）
*   还有`const double * const z`（或`double const * const z`）
    *   表示**“`z`是指向不可变对象的不可变指针`double`”**
    *   你不能改变指针`z`本身
    *   您也不能通过`z`.

在所有情况下，`const`限定它之前的事物。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T12:23:40.857

请注意，问题的一部分可能是`const`语法中的歧义。规则是***const 适用于其最左边的任何东西（除非那里没有任何东西，在这种情况下它适用于它最右边的任何东西）***

So`const T`与 相同`T const`，但`T const *`与 不同`T * const`。

`const`当您在一个类型中有多个时，这会变得更糟。

因此，为了保持一致，我通常会始终将其放在`const`适用的类型的右侧。

由于大多数人会看到像`const int`使用 constness 的第一个示例这样的示例，因此稍后可能会在将`const`

# java - 将值传递给方法

> ID：13528427
> 
> 赞同：0
> 
> 时间：2012-11-23T11:42:48.740
> 
> 标签：java

嗨，我还是 java 新手，在方法之间传递值时遇到了麻烦。我所做的所有研究仍然无法正确解决。无论如何，任何意见或建议都将受到欢迎。为了节省您阅读下面代码的时间，我有两个返回值的方法，我将它们传递给 showTime()。但是，使用当前格式，我只能得到零。除了现在放弃之外的任何建议。

```
import java.util.Scanner;

public class First
{

 static int sH, sM;
public static void main(String args[]){

    getHour();
    getMinute();
   showTime(sH,sM);
}

static int getHour(){
    Scanner input = new Scanner(System.in);
    System.out.println("Please enter the hour: ");
    int setHour = input.nextInt();

    if(setHour <= 24){
        System.out.println("You entered " +setHour+ " for the hour.");
    }else{
        System.out.println("Please enter the hour number from 0 to 24");
        getHour();
    }
 return sH;
}

 static int getMinute(){
    Scanner input = new Scanner(System.in);
    System.out.println("Please enter the mintues: ");
    int setMinute = input.nextInt();

    if(setMinute <= 60){
        System.out.println("You entered " +setMinute+ " for the minutes.");
    }else{
        System.out.println("Please enter the hour number from 0 to 60");
        getMinute();
    }
    return sM;
}

private static void showTime(int sH, int sM){

    System.out.println(+sH+":"+sM);
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:46:30.727

您没有将值保存在方法中`sH`或`sM`方法中，而是在返回它们。因此，返回的值将是`0 only`.

```
int setHour = input.nextInt(); 
```

这应该是： -

```
sH = input.nextInt(); 
```

此外，如果您已将它们声明为 main 方法之外的静态变量，则实际上不需要返回它们。

* * *

一个更好的主意是不使用`static variables`. `sH`将 , 中的和`sM`变量声明`main method`为局部变量。

现在，当您从 中返回值时`getHour()`，您可以将它们分配给局部变量。然后与他们合作。

因此，您的`main`方法可以修改为： -

```
public static void main(String args[]) {
    int sH = getHour();
    int sM = getMinute();
    showTime(sH, sM);
} 
```

在 中`getHour()`，将您的更改`return sH;`为`return setHour;`. 方法上也`getMinute()`一样。

在 else 部分，将`getHour()`调用更改为`return getHour();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:59:01.587

在您的`getMinute()`和`getHour()`方法中，您需要返回存储用户输入的值。同样在这种情况下，不需要静态 int sH 和 sM，因为所有内容都由同一个事件处理，除非您以后想从不同的事件中访问它们。

```
public static void main(String args[]){

//Store the returnb value of getHour in sH
int sH = getHour();

//Store the returnb value of getMinute() in sM
int sM = getMinute();

//Display the stored values
showTime(sH,sM);
}

private int getHour(){
Scanner input = new Scanner(System.in);
System.out.println("Please enter the hour: ");
int setHour = input.nextInt();

if(setHour <= 24){
    System.out.println("You entered " +setHour+ " for the hour.");

    //return the users input
    return setHour;
}else{
    System.out.println("Please enter the hour number from 0 to 24");
    getHour();
}

return 0;

}

private int getMinute(){
Scanner input = new Scanner(System.in);
System.out.println("Please enter the mintues: ");
int setMinute = input.nextInt();

if(setMinute <= 60){
    System.out.println("You entered " +setMinute+ " for the minutes.");

    //return the users input
    return setMinute;
}else{
    System.out.println("Please enter the hour number from 0 to 60");
    getMinute();
}

    return 0;

}

private static void showTime(int sH, int sM){
System.out.println(+sH+":"+sM);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:45:35.760

您的变量 sH 和 sM 永远不会被赋值，您只是将它们原封不动地返回。尝试返回`setHour`，`setMinute`而是将它们传递给`showTime`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:51:00.683

您没有将方法中的值分配给静态属性。

```
 static int sH, sM; 
```

所以这就是你得到0的原因。

sH = input.nextInt(); sM = input.nextInt();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T12:04:20.387

您有静态变量`sH`，`sM`它们被传递到`showTime`打印时间，但它们从未被赋值。事实上，你甚至根本不需要它们。

相反，你应该让你的`getHour`函数返回`setHour`变量，而你的`getMinute`方法返回`setMinute`变量。

然后您可以像这样简单地调用 showTime 方法：

```
public static void main(String args[]) {
    int hour = getHour();
    int minute = getMinute();
    showTime(hour, minute);
} 
```

* * *

`getHour`您的和`getMinute`方法中也存在问题。当输入无效输入时，它们会递归调用自己，但不会返回递归方法调用。因此，一旦递归完成，程序逻辑将简单地继续并返回原始的无效数据。这可以通过更改来解决：

```
if (setHour <= 24) {
  System.out.println("You entered " + setHour + " for the hour.");
} else {
  System.out.println("Please enter the hour number from 0 to 24");
  getHour();
} 
```

到：

```
if (setHour <= 24) {
  System.out.println("You entered " + setHour + " for the hour.");
} else {
  System.out.println("Please enter the hour number from 0 to 24");
  return getHour();
} 
```

显然也为您的`getMinute`方法执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T12:04:50.590

您的代码中有很多错误，必须替换以下代码

```
public class First
{

static int sH, sM;
public static void main(String args[]){

First.sH = getHour();

First.sM = getMinute();
showTime(abc.sH,abc.sM);
}

static int getHour(){
Scanner input = new Scanner(System.in);
System.out.println("Please enter the hour: ");
int setHour = input.nextInt();

if(setHour <= 24){
    System.out.println("You entered " +setHour+ " for the hour.");
    return setHour;
}else{
    System.out.println("Please enter the hour number from 0 to 24");
    getHour();
    return sH;
}

}

 static int getMinute(){
Scanner input = new Scanner(System.in);
System.out.println("Please enter the mintues: ");
int setMinute = input.nextInt();

if(setMinute <= 60){
    System.out.println("You entered " +setMinute+ " for the minutes.");
    return setMinute;
}else{
    System.out.println("Please enter the hour number from 0 to 60");
    getMinute();
    return sM;
}

}

private static void showTime(int sH, int sM){

System.out.println(First.sH+":"+First.sM);
}
 } 
```

您的 return sh 和 return sm 没有返回任何内容，应该替换为 return setHour 和 return setMinute

# javascript - 如何检测用户何时完成观看嵌入在您页面上的 YouTube 视频？

> ID：13528428
> 
> 赞同：3
> 
> 时间：2012-11-23T11:42:51.657
> 
> 标签：javascript, youtube, youtube-api

我有一个 youtube 视频，我需要在它完成后触发一个事件。你知不知道怎么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T11:46:48.677

加载 API 或视频后，您将能够看到视频的状态，如下所示：
“-1” - 视频已准备好播放
“1” - 视频正在播放（点击播放按钮）
“2 " - 视频暂停
"0" - 视频结束

```
var status = player.getPlayerState(); 
```

[API YouTube](https://developers.google.com/youtube/js_api_reference)

# c# - Sitecore：以编程方式将工作流分配给项目

> ID：13528431
> 
> 赞同：5
> 
> 时间：2012-11-23T11:43:06.023
> 
> 标签：c#, sitecore, sitecore-workflow

我已经配置了一个工作流程，像往常一样以“草稿”状态开始。我已经为模板的标准值配置了工作流程。它在内容编辑器中完美运行。（当我使用内容编辑器创建项目时，一旦创建项目，工作流就会分配给项目，并且它的状态变为“草稿”。）

但是，当我在上述模板下以编程方式创建项目时，它不会分配工作流。我应该怎么做才能分配工作流？如果有，请分享任何代码示例。

谢谢。

```
Sitecore.Data.Items.TemplateItem template = this.MasterDatabase.GetItem("/sitecore/templates/user defined/sample types");
Sitecore.Data.Items.Item parent = this.MasterDatabase.GetItem(parentId); 

Sitecore.Data.Items.Item newItem;                
// Create new item and retrieve it
newItem = template.CreateItemFrom("sampleName", parent);

newItem.Editing.BeginEdit();

newItem.Name = StringFormatter.CreateItemNameFromID(this.newItem);
newItem.Fields["Title"].Value = "Sample Title"

newItem.Editing.EndEdit(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-16T09:22:45.927

我不会使用 Dhanuka777 的答案，因为它没有利用 Sitecore 的工作流状态命令和它附带的有用功能，例如电子邮件生成。它还需要硬编码Guids。

以下代码的好处：

*   利用 Sitecore 的状态命令和它们具有的出色功能，例如生成电子邮件以提醒用户等
*   不要将状态和命令的指南存储在解决方案中
*   独立于 Sitecore 的上下文
*   抽象，因此可用于 Sitecore 中的所有工作流。

```
 public bool UpdateWorkflow(WorkflowState newWorkflowState, Item item)
    {
        Assert.ArgumentNotNull(newWorkflowState, "The new WorkflowState can not be null");
        Assert.ArgumentNotNull(item, "Item can not be null");

        bool successful = false;

        WorkflowState currentWorkflowState = GetWorkflowStateForItem(item);

        if (currentWorkflowState != newWorkflowState)
        {
            IWorkflow workflow = GetWorkflowOfItem(item);

            if (workflow != null)
            {
                List<WorkflowCommand> applicableWorkflowCommands = workflow.GetCommands(currentWorkflowState.StateID).ToList();

                foreach (var applicableWorkflowCommand in applicableWorkflowCommands)
                {
                    Item commandItem = _database.GetItem(applicableWorkflowCommand.CommandID);

                    string nextStateId = commandItem["Next state"];

                    if (nextStateId == newWorkflowState.StateID)
                    {
                        WorkflowResult workflowResult = workflow.Execute(applicableWorkflowCommand.CommandID, item, "", false);
                        successful = workflowResult.Succeeded;
                        break;
                    }
                }
            }
        }
        else
        {
            successful = true;
        }

        return successful;
    }

    public WorkflowState GetWorkflowStateForItem(Item item)
    {
        var workflow = GetWorkflowOfItem(item);
        return workflow != null ? workflow.GetState(item) : null;
    }

    public IWorkflow GetWorkflowOfItem(Item item)
    {
        return _database.WorkflowProvider.GetWorkflow(item);
    }

    private Database _database
    {
        get
        {
            return Sitecore.Data.Database.GetDatabase("master");
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T12:34:04.800

解决了标准字段的问题，

```
newItem.Editing.BeginEdit();                    
newItem.Fields["__Workflow"].Value = "{4D1F00EF-CA5D-4F36-A51E-E77E2BAE4A24}"; //Set workflow
newItem.Fields["__Workflow state"].Value = "{7F39DF46-B4B9-4D08-A0D4-32DE6FD643D1}"; //Set   workflow state to Unposted.
newClassified.Editing.EndEdit(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-07T15:53:48.780

我到处寻找一个好的答案。我正在创建一个新项目并想开始它的工作流程。jRobbins 的答案对我不起作用，因为如果项目的当前工作流状态为空并且它没有提供设置初始工作流状态的好方法，它会引发异常。

以下对我有用：

```
var workflow = Factory.GetDatabase("master").WorkflowProvider.GetWorkflow(workflowId);
workflow.Start(item); 
```

这设置了我的新项目的工作流程，并将其工作流程状态设置为初始状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-13T12:05:24.010

在确保我在标准值上设置了默认工作流程之后，以下组合，感谢上面的海报，完美地工作：

```
var workflowId = item.Fields["__Default workflow"].Value;
var workflow = Factory.GetDatabase("master").WorkflowProvider.GetWorkflow(workflowId);
workflow.Start(item); 
```

# c# - 如何在c#中对包含其他类对象的对象进行xml序列化？

> ID：13528433
> 
> 赞同：1
> 
> 时间：2012-11-23T11:43:06.023
> 
> 标签：c#, xml, serialization

我想 xml 序列化一个包含其他自定义对象的自定义对象。我像下面那样做，但它不会工作。

```
class A()
{
public B b;
}

class B()
{
public int a;
}

System.Xml.Serialization.XmlSerializer writer = new System.Xml.Serialization.XmlSerializer(typeof(A));  
XmlAttributes xmlAttributes = new XmlAttributes();   
System.IO.StreamWriter file = new System.IO.StreamWriter(   @"d:\SerializationOverview.xml");
writer.Serialize(file, new A());  
file.Close(); 
```

结果是：

```
<A>
</A> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:45:59.070

首先，两者`A`和都`B`需要标记`public`。

`new A()`没有序列化的值`b`；它不序列化空值。给它一个值：

```
writer.Serialize(file, new A { b = new B { a = 123 } }); 
```

另外：尝试更喜欢属性而不是公共领域。

例如：

```
using System.IO;
using System.Xml.Serialization;
public class A
{
    public B B { get; set; }
}
public class B
{
    public int A {get;set;}
}
static class Program
{
    static void Main()
    {
        var writer = new XmlSerializer(typeof(A));
        using (var file = File.Create(@"SerializationOverview.xml"))
        {
            writer.Serialize(file, new A { B = new B { A = 123 } });
        }
    }
} 
```

# javascript - 在 jQuery 中模拟 iPhone 联系人列表标题样式

> ID：13528439
> 
> 赞同：0
> 
> 时间：2012-11-23T11:43:23.043
> 
> 标签：javascript, jquery

我有一个系统警报列表，其中包含与之相关的日期和时间。日期仅在日期发生变化时显示。我想要的是让最上面的日期保持在顶部，`#shell`直到另一个日期取代它。这与联系人应用程序在 iPhone 上的工作方式非常相似。

我已经[设置了一个 jsFiddle](http://jsfiddle.net/sjajt/2/)，其中包含必要的 jQuery 代码。如果有人可以在这里帮助我，我将非常感激 - 我目前不知道从哪里开始！

HTML 片段：

```
<div id="shell">
    <div id="alertList">
        <div id="alert_0" class="alert">
            <span class="date">22 Nov, 2012</span>
            <span class="time">02:28</span>
            System alert happened
        </div>
    </div>
</div> 
```

jQuery代码

```
$("#shell").scroll(function() {
    //This is where the code would be to lock (or alter the margin-top) of the
    //date would be in order to keep it locked to the top
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:19:35.427

试试这段代码……它仍然需要一些工作和重构，但我希望你能理解。（这里也是[jsFiddle](http://jsfiddle.net/sjajt/18/)的链接）

```
var currentElemIndex = 0;
var currentElem = $('#alertList .date:eq(' + currentElemIndex + ')');
var currentElemMarginTop = parseInt(currentElem.css('margin-top'));
var currentElemHeight = currentElem.outerHeight();
var currentElemPosTop = currentElem.position().top;
var nextElem = $('#alertList .date:eq(' + currentElemIndex+1 + ')');
$('#shell').scroll(function (ev) {
    var scrollTop = $('#shell').scrollTop();
    if (scrollTop >= nextElem.position().top - currentElemHeight) {
        currentElemIndex++;
        currentElem.css('margin-top', currentElemMarginTop + 'px');
        currentElem = nextElem;
        currentElemMarginTop = parseInt(currentElem.css('margin-top'));
        currentElemHeight = currentElem.outerHeight();
        currentElemPosTop = currentElem.position().top;
        nextElem = $('#alertList .date:eq(' + currentElemIndex + ')');
    }
    if (scrollTop  > currentElem.position().top) {
        currentElem.css('margin-top', $('#shell').scrollTop() - currentElem.position().top + 'px');
    }
    if (scrollTop < currentElemPosTop) {
        nextElem = currentElem;
        currentElemIndex--;
        currentElem = $('#alertList .date:eq(' + currentElemIndex + ')');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:19:08.703

迟到但确定：[jsfiddle](http://jsfiddle.net/paska/sjajt/17/)

```
$("#shell").scroll(function() {
    // 21 is because of border and padding.
    var firstVisible = parseInt($("#shell").scrollTop() / ($("#shell .alert:first").height() + 21)),
        firstVisibleElem = $("#shell .alert:eq(" + firstVisible + ")"),
        date = firstVisibleElem.data("date");

    if (date != undefined && date != null && date > -1)
        $("#date_" + date).prependTo(firstVisibleElem);
});

// Save the date corresponding to each alert:
var i = -1;
$("#shell .alert").each(function() {
    var date = $(this).find(".date");
    if (date.length > 0) {
        i++;
        date.attr("id", "date_" + i);
    }
    if (i > -1) {
        $(this).data("date", i);
    }
}); 
```

# java - 在 JDK 1.5 中使用 Collections.newSetFromMap 的替代方案？

> ID：13528440
> 
> 赞同：7
> 
> 时间：2012-11-23T11:43:24.153
> 
> 标签：java, collections, jdk1.5

我想在不支持它的 JDK 1.5 中使用这种“Collections.newSetFromMap()”方法。Java 5 也不支持 ConcurrentHashSet 类。必须在 JDK 1.5 中编译以下行。我该怎么做？

```
protected Set<String> knownLCWords = Collections.newSetFromMap(new ConcurrentHashMap<String, Boolean>()); 
```

请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:31:03.660

[下面是来自Java Collections 源](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java.util/Collections.java.html)的该方法的实现。本质上，该方法返回一个`AbstractSet`包含 的子类`Map`，以及一个瞬态`Set`。

```
/**
 * Returns a set backed by the specified map.  The resulting set displays
 * the same ordering, concurrency, and performance characteristics as the
 * backing map.  In essence, this factory method provides a {@link Set}
 * implementation corresponding to any {@link Map} implementation.  There
 * is no need to use this method on a {@link Map} implementation that
 * already has a corresponding {@link Set} implementation (such as {@link
 * HashMap} or {@link TreeMap}).
 *
 * <p>Each method invocation on the set returned by this method results in
 * exactly one method invocation on the backing map or its <tt>keySet</tt>
 * view, with one exception.  The <tt>addAll</tt> method is implemented
 * as a sequence of <tt>put</tt> invocations on the backing map.
 *
 * <p>The specified map must be empty at the time this method is invoked,
 * and should not be accessed directly after this method returns.  These
 * conditions are ensured if the map is created empty, passed directly
 * to this method, and no reference to the map is retained, as illustrated
 * in the following code fragment:
 * <pre>
 *    Set&lt;Object&gt; weakHashSet = Collections.newSetFromMap(
 *        new WeakHashMap&lt;Object, Boolean&gt;());
 * </pre>
 *
 * @param map the backing map
 * @return the set backed by the map
 * @throws IllegalArgumentException if <tt>map</tt> is not empty
 * @since 1.6
 */
public static <E> Set<E> newSetFromMap(Map<E, Boolean> map) {
    return new SetFromMap<E>(map);
}

private static class SetFromMap<E> extends AbstractSet<E>
    implements Set<E>, Serializable
{
    private final Map<E, Boolean> m;  // The backing map
    private transient Set<E> s;       // Its keySet

    SetFromMap(Map<E, Boolean> map) {
        if (!map.isEmpty())
            throw new IllegalArgumentException("Map is non-empty");
        m = map;
        s = map.keySet();
    }

    public void clear()               {        m.clear(); }
    public int size()                 { return m.size(); }
    public boolean isEmpty()          { return m.isEmpty(); }
    public boolean contains(Object o) { return m.containsKey(o); }
    public boolean remove(Object o)   { return m.remove(o) != null; }
    public boolean add(E e) { return m.put(e, Boolean.TRUE) == null; }
    public Iterator<E> iterator()     { return s.iterator(); }
    public Object[] toArray()         { return s.toArray(); }
    public <T> T[] toArray(T[] a)     { return s.toArray(a); }
    public String toString()          { return s.toString(); }
    public int hashCode()             { return s.hashCode(); }
    public boolean equals(Object o)   { return o == this || s.equals(o); }
    public boolean containsAll(Collection<?> c) {return s.containsAll(c);}
    public boolean removeAll(Collection<?> c)   {return s.removeAll(c);}
    public boolean retainAll(Collection<?> c)   {return s.retainAll(c);}
// addAll is the only inherited implementation

    private static final long serialVersionUID = 2454657854757543876L;

    private void readObject(java.io.ObjectInputStream stream)
        throws IOException, ClassNotFoundException
    {
        stream.defaultReadObject();
        s = m.keySet();
    }
} 
```

# python - python crypto：DES CTR解密

> ID：13528444
> 
> 赞同：1
> 
> 时间：2012-11-23T11:43:37.003
> 
> 标签：python, cryptography, counter, des

我在这里找到了 atomicinf 的以下代码：[atomicinf 的代码](https://stackoverflow.com/questions/11656045/pycrypto-incrementing-ctr-mode)！代码是：

```
import Crypto.Cipher.AES
import Crypto.Util.Counter

key = "0123456789ABCDEF" # replace this with a sensible value, preferably the output of a hash
iv = "0000000000009001" # replace this with a RANDOMLY GENERATED VALUE, and send this with the ciphertext!

plaintext = "Attack at dawn" # replace with your actual plaintext

ctr = Crypto.Util.Counter.new(128, initial_value=long(iv.encode("hex"), 16))

cipher = Crypto.Cipher.AES.new(key, Crypto.Cipher.AES.MODE_CTR, counter=ctr)
print cipher.encrypt(plaintext) 
```

我的问题是：解密是如何工作的？（显然我必须手动导入计数器或将当前计数器保存在某处）第二个 DES 呢？我知道它有较小的计数器，但我如何定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:28:51.937

CTR 模式的解密与加密的工作方式相同，即要解密，您应该第二次调用“加密”。这是因为在 CTR 模式下，IV 为每个下一个块递增并使用 AES 算法加密，结果比明文异或。再次异或返回明文。

# c++ - 'std::list<_Ty>::push_back' : 无法将 'this' 指针从 'const std::list<_Ty>' 转换为 'std::list<_Ty> &'

> ID：13528447
> 
> 赞同：1
> 
> 时间：2012-11-23T11:43:40.560
> 
> 标签：c++, constants

尝试编译以下内容时收到此错误消息

```
void MyClass::MyFunc() const
{
      int i= 0;
      myList.push_back(i);
} 
```

我已经不得不将 const 添加到函数中，尽管它返回`void`，以解决调用函数本身的相同问题，但现在它发生在 STL 的成员中，我认为有些事情是非常错误的用我的代码。作为参考，错误是

```
cannot convert 'this' pointer from 'const MyClass' to 'MyClass &' 
```

我实际上对发生了什么知之甚少，因为我从一个对编码标准和最佳实践有非常虐待关系的人那里继承了这一点。如果有人能告诉我这是什么问题的症状以及我应该在代码中寻找什么，那将对我有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:45:38.753

如果`myList`是 的数据成员`MyClass`，`push_back()`则您正在修改数据成员（因此您正在修改由指向`myList`的实例），因此方法不能标记为.`MyClass``this``MyFunc()``const`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:46:47.763

`const`on 一个方法意味着它不能修改它被调用的实例，包括任何实例成员。

您需要查看代码库并区分可以*修改*类实例的方法（不应该是`const`）和那些只提供有关类实例的信息的方法（应该是`const`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:25:33.213

$9.3.1/3：当在类成员中使用不属于类成员访问语法 (5.2.5) 且不用于形成指向成员 (5.3.1) 的指针的 id 表达式 (5.1) 时X 在可以使用 this 的上下文中 (5.1.1)，如果名称查找 (3.4) 将 id-expression 中的名称解析为某个类 C 的非静态非类型成员，并且如果 id-expression被潜在评估或 C 是​​ X 或 X 的基类，则 id-expression 使用 (*this) (9.3.2) 作为左侧的后缀表达式转换为类成员访问表达式 (5.2.5)这 。操作员。

这意味着表达式

```
myList.push_back(i); 
```

被视为

```
(*this).myList.push_back(i); 
```

$9.3.1/4：非静态成员函数可以声明为 const、volatile 或 const volatile。这些 cv 限定符影响 this 指针 (9.3.2) 的类型。

$9.3.2/1：在非静态 (9.3) 成员函数的主体中，关键字 this 是一个纯右值表达式，其值是调用该函数的对象的地址。类 X 的成员函数中 this 的类型是 X*。如果成员函数声明为 const，则 this 的类型为 const X*，如果成员函数声明为 volatile，则 this 的类型为 volatile X*，如果成员函数声明为 const volatile，则 this 的类型为 const挥发性 X*。

总之，这意味着您的成员函数中的“this”类型是“const”是“MyClass const *”。实际上，这意味着`Myclass::MyFunc`不允许修改“this”指针指向的对象的状态。

假设 myList 是 std::list 类型，std::list::push_back 方法在将 'i' 的值插入列表时修改实例变量 'myList'。

但这破坏了“const”成员函数的语义，该函数`MyClass::MyFunc`承诺它不会修改对象的状态。

因此，您确实需要从此成员函数中删除“const”或使用 const_cast 删除此特定操作的 constness。

# haskell - Haskell，如何使用多个 Eq (Eq a, Eq b) =>

> ID：13528452
> 
> 赞同：0
> 
> 时间：2012-11-23T11:44:06.093
> 
> 标签：haskell

我想多次使用 Eq，以便第一个连音的第二个元素来自其他类型而不是其他类型

**错了，但是，这是我想要的想法**

> 例如。[(a, a)] -> [(a, a)] -> Bool ----> [(a, b)] -> [(a, a)] -> Bool

**编码**

```
canColor ::  Eq a => [(a, a)] -> [(a, a)] -> Bool
canColor _ [] = True
canColor xs ((x,y):rest) =
    if findNeighbour xs x == findNeighbour xs y
    then False
    else canColor xs rest

findNeighbour :: Eq a => [(a, a)] -> a -> Maybe a
findNeighbour [] _ = Nothing
findNeighbour ((x,y):rest) z =
    if x == z
    then Just y
    else findNeighbour rest z 
```

**输入数据和期望值**

```
Main> canColor [('a',"purple"),('b',"green"),('c',"blue")] [('a','b'),('b','c'),('c','a')]
True

Main> canColor [('a',"purple"),('b',"green"),('c',"purple")] [('a','b'),('b','c'),('c','a')]
False

Main> canColor [('1',"purple"),('2',"green"),('3',"blue")] [('1','2'),('2','3'),('3','1')]
True

**Main> canColor [('a', 4),('b',5),('c', 6 )] [('a','b'),('b','c'),('c','a')]
True

Main> colors [('a', 4),('b', 4 ),('c', 5 )] [('a','b'),('b','c'),('c','a')]
False** 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T11:49:38.767

只需给它们不同的类型变量并要求`Eq`两者。我认为您正在寻找此代码：

```
canColor :: (Eq a, Eq b) => [(a, b)] -> [(a, a)] -> Bool
canColor _ [] = 真
canColor xs ((x,y):rest) =
    如果 findNeighbour xs x == findNeighbour xs y
    然后是假的
    else canColor xs 休息

findNeighbour :: Eq a => [(a, b)] -> a -> Maybe b
findNeighbour [] _ = 没有
findNeighbour ((x,y):rest) z =
    如果 x == z
    那么就你
    else findNeighbour rest z

```

或者这个更简洁和惯用的代码：

```
canColor :: (Eq a, Eq b) => [(a, b)] -> [(a, a)] -> Bool
canColor xs = all (\(x,y) -> 查找 x xs /= 查找 y xs)

```

# php - 手动将图像添加到产品 - Magento 1.4.0.1

> ID：13528468
> 
> 赞同：1
> 
> 时间：2012-11-23T11:44:52.853
> 
> 标签：php, mysql, magento, iis-7, magento-1.4

图片上传器在我们维护的一个旧 Magento 网站上似乎严重损坏......我收到“上传 HTTP 错误”错误，似乎无法弄清楚如何修复它。

无论如何，我们正在升级网站，所以我决定放弃修复它，因为更新应该这样做。

但是客户现在希望将图像添加到旧站点上的两个产品中（就像今天一样），并且在不修复图像上传器的情况下，我不确定如何执行此操作。

我想我可以通过手动将数据插入数据库来做到这一点，但它非常复杂，我不确定从哪里开始 - catalog_product_entity_media_gallery 看起来是一个不错的起点，但它存储的图像路径的值似乎是指到缓存。

我还四处寻找以编程方式向产品添加图像的方法（运气不好），这会是一个好方法吗？如果有怎么办？

基本上，**如何在 Magento 1.4.0.1 中手动将图像添加到所述 Magento 骄傲**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:06:43.757

尝试通过 htaccess 文件禁用对目录的身份验证，然后尝试上传图像并检查它现在是否正常工作。

在上述步骤之后尝试另一个步骤转到管理 >> 系统 >> 配置 >> Web >> 会话验证设置，将验证 HTTP_USER_AGENT 设置为 NO 并检查结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:42:43.930

最后，我设法通过将数据插入`catalog_product_entity_varchar`表中来手动添加图像，我使用的属性 ID 为 74、75 和 76（一个用于缩略图、大图像等），因此您最终得到如下内容：

插入以下内容

```
 value              entity_type_id     store_id      entity_id    value
Automatically generated         4          you know this    74/75/76   path to image 
```

[最后，我使用 php.ini 中的upload_tmp_dir](http://php.net/manual/en/ini.core.php#ini.upload-tmp-dir)将图像上传的目录更改为站点根目录中的目录，它被设置为默认值，但由于某种原因它无法使用 C:/Windows/Temp （我确定它具有正确的权限）

无论如何，希望这可能对某人有所帮助！

# c++ - Lua OOP 函数没有被调用？

> ID：13528469
> 
> 赞同：1
> 
> 时间：2012-11-23T11:45:01.163
> 
> 标签：c++, lua, allegro5, metatable, luabridge

我在 Allegro 5 中使用 Lua 和 LuaBridge。我决定将所有图形对象移植到 Lua，但遇到了一些问题：

被调用一次的字符类

```
Character = {sprite; AI}

function Character:new()
  o = o or {} -- works!
  setmetatable(o, self) -- works!
  self.__index = self  -- works!
  return o -- works!
end

function Character:LoadSprite(filename)
  self.sprite = self.sprite or Bitmap() -- works!
  self.sprite:LoadFile(filename) -- works!
  self.sprite.x = 0 -- works!
  self.sprite.y = 0 --works!
end

function Character:SetX(xx)
  self.sprite.x = xx -- maybe? cannot tell if it works or not.
end

function Character:AddBehavior(fname, cname)
    self.AI = self.AI or Pattern()
    self.AI:AddBehavior(fname, cname)
end

function Character:Draw()
  self.sprite:Draw() -- works!
 end

Foo = Character:new() 
```

从主程序调用函数的 Lua 脚本：

```
function CoreInit() --called at initialization
  Foo:LoadSprite("Image.png") -- works!
end

function CoreLogic() --called during logic cycle
  Foo:SetX(50)  -- does NOT work!
end

function CoreDraw() --called during drawing/rendering cycle
  Foo:Draw()  --works perfectly!
end 
```

所以基本上，脚本用适当的坐标和图像初始化角色，并绘制它，但要么没有调用逻辑（它在逻辑循环中），要么改变 X 坐标的函数有问题。

此外，任务管理器建议每个周期存在约 30 KB 的内存泄漏，当我在 C++ 中使用图像对象时没有发生这种情况。

下面是通过 LuaBridge 导出到 Lua 的 Bitmap 结构的片段，以备不时之需：

```
void Bitmap::Register(lua_State*lua) {
  luabridge::getGlobalNamespace(lua)
    .beginClass<Bitmap>("Bitmap")
    .addConstructor <void (*) (void)> ()
    .addStaticData("scale", &Bitmap::scale)
    .addFunction("LoadFile", &Bitmap::LoadFile)
    .addFunction("Draw", &Bitmap::Draw)
    .addData("x", &Bitmap::x)
    .addData("y", &Bitmap::y)
    .addData("w", &Bitmap::w)
    .addData("h", &Bitmap::h)
  .endClass();
}

void Bitmap::LoadFile(string file) {
  name = file;
  bitmap = al_load_bitmap(file.c_str());
  w = al_get_bitmap_width(bitmap);
  h = al_get_bitmap_height(bitmap);
}

void Bitmap::Draw() {
  if (scale > 1)
    al_draw_scaled_bitmap(bitmap, 0, 0, w, h, x * scale , y * scale, w * scale, h * scale, 0);
  else
    al_draw_bitmap(bitmap, x, y, 0);
}

Bitmap::Bitmap() :  velocity(1) {
   bitmap = NULL; 

}
Bitmap::~Bitmap() {
  name = "";
  if (!bitmap) 
    al_destroy_bitmap(bitmap);
} 
```

**更新**：我能够弄清楚的一件事是内存泄漏来自*CoreLogic*；我在 C++ 中注释掉了对它的调用，内存泄漏消失了，但是当我保持调用不变，但注释掉*CoreLogic*的内容时，泄漏仍然存在。嗯……

**第二次更新**：内存泄漏已被缩小到与人工智能有关的东西，我没有发布：

```
Pattern = {complete; timer; command; Files; Commands; itr; num}

function Pattern:new()
  o = o or {}
  o.Files = {}
  o.Commands = {}
  o.complete = false
  o.timer = 0
  o.itr = 1
  o.num = 1
  setmetatable(o, self)
  self.__index = self
  return o
end

function Pattern:AddBehavior(filename, commandname)
  self.Files[self.num] = filename
  self.Commands[self.num] = commandname
  self.num = self.num + 1
end

function Pattern:DoBehavior()
  self.command = self.Commands[self.itr]
  dofile(self.Files[self.itr])
end

function Pattern:CheckBehavior()
  if self.complete == true then
    self.itr = self.itr + 1
self.timer = 0
self.complete = false
  end
  if itr >= num then
    self.itr   = 1
self.timer = 0
self.complete = false
  end
end

function Pattern:Initialize()
  self.itr = 1; self.timer = 0
  self.complete = false
  self.command = self.Commands[self.itr]
end 
```

在*CoreLogic*函数中，它会调用*Foo.AI:DoBehavior()*，这完全没有做任何事情并导致内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:27:21.663

`Foo.AI:DoBehavior()`从文件中读取一个块，为其内容、字节码翻译形式、函数环境和在该文件顶层创建的任何可能的临时值保留内存。预计这里会丢失内存，这不是泄漏。Lua 不会立即释放内存。实际上，它甚至根本不会将其返回到系统中。

有时垃圾收集器会运行并找到不再使用的字符串/表/函数/其他任何内容。Lua 在自己的内部索引中将这块内存标记为空闲，下次需要空闲内存时会使用它，但是从系统上看 Lua 内存消耗永远不会减少。

如果您怀疑程序的某些部分可能会在自动 GC 调用之间产生过多不必要的垃圾，您可能希望强制 GC 单步执行`collectgarbage`或 C API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:28:23.207

经过更多的肘部润滑后，我能够解决问题；本质上，它回到了*Pattern*表的构造函数以及*AI对象是如何在**Character*中初始化的。我不得不改变构造函数：

```
Pattern = {complete; timer; command; Files; Commands; itr; num}

function Pattern:new()
  o = o or {}
  o.Files = {}
  o.Commands = {}
  o.complete = false
  o.timer = 0
  o.itr = 1
  o.num = 1
  setmetatable(o, self)
  self.__index = self
  return o
end 
```

到：

```
Pattern = {}

function Pattern:new()
  local o = {complete = false; timer = 0; command = ""; Files = {}; Commands = {}; itr = 1; num = 1}
  setmetatable(o, self)
  self.__index = self
  return o
end 
```

还有这个：

```
Character = {sprite; AI}

function Character:new()
  o = o or {} 
  setmetatable(o, self) 
  self.__index = self 
  return o 
end 
```

到：

```
Character = {}

function Character:new()
  local o = {sprite; AI = Pattern:new()}
  setmetatable(o, self)
  self.__index = self
  return o
end 
```

现在对*Foo.AI:DoBehavior()*的调用按预期进行，没有使用额外的内存。这段代码是我第一次尝试在 Lua 中实现 OOP，这可能是我从现在开始的方式。

# php - symfony2.1：计算树枝模板中的学说集合

> ID：13528472
> 
> 赞同：7
> 
> 时间：2012-11-23T11:45:05.493
> 
> 标签：php, templates, doctrine-orm, twig, symfony-2.1

我有一个学说实体，它有一组实体（*孩子*）。现在我想计算实体并打印出计数。像这样的东西：

```
<div class="item">
 <h1>{{ object.name }}</h1>
 <div class="childrenCount">children {% count (object.children) %}</div>
</div> 
```

我发现了一些不起作用的示例（[*例如使用*](https://stackoverflow.com/questions/9598577/count-relations-inside-loop-in-twig)*导致“未找到过滤器”错误*的“计数”过滤器）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-24T18:03:20.230

如发现[here](http://forum.symfony-project.org/viewtopic.php?t=37282&p=123891)，在处理学说集合时，使用学说可以选择使用“计数”方法。否则，您可以使用“长度”过滤器。

示例代码：

```
<ul class="summary">
  <li> {{ object.children | length }}</li>
  <!-- or, use the count method of doctrine collections directly -->
  <li> {{ object.children.count }}</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-05T08:31:44.150

您可以使用“长度”示例：

```
{% if users|length > 10 %}
...
{% endif %} 
```

请参阅文档：[http ://twig.sensiolabs.org/doc/filters/length.html](http://twig.sensiolabs.org/doc/filters/length.html)

# linker - 如何使用 LLVM >= 3.1 将对象链接到库？（没有 GNU ld）

> ID：13528474
> 
> 赞同：2
> 
> 时间：2012-11-23T11:45:07.380
> 
> 标签：linker, llvm, clang

如何使用 Llvm/Clang（版本 3.3（主干 168461））提供的工具生成工作可执行文件？

我已经编译了一个对象，`clang++ -c [...]`我想尝试将此对象链接到 1 个特定库，看看这是否可以生成一个工作可执行文件。

我注意到，从 3.1 版本`llvm-ld`开始，它已被删除，`llvm-link`并且看起来它并没有继承所有选项`llvm-ld`，尽管它在官方文档中被标记为 llvm-ld 的替代品，所以我只是不明白我是怎么做到的m 应该链接这个对象。

我不想使用`ld`GNU/GCC 套件，只使用来自 llvm 的工具。

总结一下这是我从 svn 的 llvm 构建中获得的工具

```
bugpoint      clang-check   llvm-bcanalyzer  llvm-extract   llvm-objdump  llvm-stress      scan-build
c++-analyzer  clang-tblgen  llvm-config      llvm-link      llvm-prof     llvm-symbolizer  scan-view
ccc-analyzer  llc           llvm-cov         llvm-lit       llvm-ranlib   llvm-tblgen      scanview.css
clang         lli           llvm-diff        llvm-mc        llvm-readobj  macho-dump       ScanView.py
clang++       llvm-ar       llvm-dis         llvm-mcmarkup  llvm-rtdyld   opt              sorttable.js
clang-3.3     llvm-as       llvm-dwarfdump   llvm-nm        llvm-size     Reporter.py      startfile.py 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T07:59:32.447

目前（还）没有 llvm 链接器。不，llvm-link 不是 LLVM ld 的替代品。因此，您现在需要使用 binutils 中的 ar / ranlib / ld 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:56:00.097

如果你想链接 LLVM 位码文件，你应该看看 LLVM Gold 插件： http: [//llvm.org/docs/GoldPlugin.html](http://llvm.org/docs/GoldPlugin.html)

# android - 丢弃 MotionEvent 队列

> ID：13528475
> 
> 赞同：0
> 
> 时间：2012-11-23T11:45:13.517
> 
> 标签：android, events, event-handling

我有一个处理所有 MotionEvents 的视图。处理一个事件可能需要一些时间（更新屏幕，有时几秒钟）。如果我的视图在处理当前事件时得到另一个 MotionEvent，它会以某种方式对其进行排队，并且在处理结束后它将处理新的。我想删除处理过程中收到的所有事件。

```
@Override
public boolean onTouchEvent (MotionEvent event)
{
// Some new_event occur
...
// Some long action
...

return true;
} 
```

在这之后`onTouchEvent`我会得到`onTouchEvent (MotionEvent new_event)`。

有什么办法可以在结束时丢弃所有排队的事件`onTouchEvent`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:43:07.903

好吧，目前我认为这不能在单个线程中完成，因此我们需要一个线程（主线程）来处理事件，而其他线程来执行事件动作。

# jakarta-mail - 如何在发送邮件时获取 Gmail 邮件 ID？

> ID：13528477
> 
> 赞同：1
> 
> 时间：2012-11-23T11:45:22.967
> 
> 标签：jakarta-mail

我正在使用 java 邮件 API 使用 Gmail 帐户发送邮件。我的要求是，在发送邮件时，我需要消息 ID（**或电子邮件的一些唯一 ID**）在我的本地数据库中存储一些附加信息。

由于 Transport.send() 方法没有返回值，我无法获取邮件的 ID？

所以两个问题：

1）任何人都可以帮助我在发送时获取邮件的 Gmail id 吗？

2) “Message-ID”是邮件的唯一标识符吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:18:50.427

JavaMail 在发送消息时会设置一个 Message-ID。您可以在使用 msg.getMessageID() 发送消息后从消息中读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:50:03.407

Message-Id 应该是邮件的唯一标识符（[请参阅 wiki](http://en.wikipedia.org/wiki/Message-ID)），但要获取邮件 ID，您可以自己生成它（这就是邮件程序所做的 - 它不是由服务器生成的），或者如果您使用某种 API 来为你它要么提供一种方法来检索它。如果没有，您可能最终需要获取该邮件正文（即通过密件抄送给自己）并从邮件中提取它。

# c# - 即使在 Windows 重新启动后，C# AddFontResource 也无法正常工作

> ID：13528479
> 
> 赞同：4
> 
> 时间：2012-11-23T11:45:26.987
> 
> 标签：c#, api, fonts, dllimport

我正在尝试使用下面的代码使用 C# 代码安装字体。

调用 InstallFont 不会抛出任何异常并返回 1。我认为这表明它已经安装了字体。但是，该字体不会出现在 Windows Fonts 文件夹中或检查 InstalledFontCollection 时的已安装字体列表中，也不会显示在我的软件中。我尝试安装后重新启动计算机，但仍然不可用。

如果我通过双击 Windows 资源管理器并单击安装来手动安装文件，则字体安装没有问题。

我在 Windows 7 64 位操作系统上使用 C#、Visual Studio 2010、Microsoft .NET Framework 4.0。

任何帮助将不胜感激。

非常感谢，保罗

清单文件包括：

```
requestedExecutionLevel level="requireAdministrator" uiAccess="false" 
```

申请代码：

```
[DllImport("user32.dll")]
public static extern int SendMessage(int hWnd, uint Msg, int wParam, int lParam);
[DllImport("gdi32.dll", EntryPoint = "AddFontResourceW", SetLastError = true)]
public static extern int AddFontResource([In][MarshalAs(UnmanagedType.LPWStr)] string lpFileName);

public static int InstallFont()        
{
    InstalledFontCollection ifc = new InstalledFontCollection();

    if (ifc.Families.Any(item => item.Name == "Arial Narrow"))
        return 100; // Font already installed

    string filename = @"C:\Users\username\Downloads\ARIALN.TTF";

    const int WM_FONTCHANGE = 0x001D;
    const int HWND_BROADCAST = 0xffff;

    int added = AddFontResource(filename);
    SendMessage(HWND_BROADCAST, WM_FONTCHANGE, 0, 0);

    return added;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T13:49:39.230

请务必查看有关 AddFontResource() 的 MSDN 库文章：

> 此函数仅为当前会话安装字体。当系统重新启动时，字体将不存在。要在重新启动系统后安装字体，必须在注册表中列出字体。

InstalledFontCollection 类仅枚举实际安装的字体并忽略临时字体。编写注册表项并将文件复制到 c:\windows\fonts 是安装程序的一项职责。除了通过控制面板小程序访问之外，Microsoft 没有记录如何执行此操作。如果你想试一试，注册表项是 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts

# c# - 识别源线程的问题导致“调用线程必须是 STA，因为许多 UI 组件都需要这个。” 在 SkypeKit.NET WPF 应用程序中

> ID：13528484
> 
> 赞同：1
> 
> 时间：2012-11-23T11:45:41.870
> 
> 标签：c#, .net, wpf, skype

我遇到了 InvalidOperationException 消息“调用线程必须是 STA，因为许多 UI 组件都需要这个。” 在我的 WPF 应用程序开发中。（请参阅下面的代码以及发生错误的位置）。错误发生在 Participant 构造函数中，因为 Canvas gui 正在构造中，并且 Canvas 构造函数本身抛出此异常，而不是进入构造函数。

```
public class Participant : SktParticipant
    {
        public enum PictureMode
        {
            Avatar,
            Video
        }

        public PictureMode pictureMode = PictureMode.Avatar;

        public Canvas gui;
        public VerticalProgressBar voiceVolume;
        public Label nameLabel;
        public VideoRenderer pic;
        public Video video;

        public bool isCachedInClient = false;   // indicates whether displayName and avatarImage have values
        public string displayName = null;
        public Image avatarImage = null;

        public int picHeight = 480;
        public int piclWidth = 640;
        public int panelHeight = 155;
        public int panelWidth = 174;

        public System.Drawing.Color liveColor = System.Drawing.SystemColors.GradientActiveCaption;
        public System.Drawing.Color nonLiveColor = System.Drawing.SystemColors.GradientActiveCaption;

        public Participant(uint objectId, SktSkype skype)
            : base(objectId, skype)
        {
            gui = new Canvas()  //HERE IS THE InvalidOperationException ERROR
            {
                Width = panelWidth,
                Height = panelHeight,
                //BorderStyle = BorderStyle.FixedSingle,
                Background = System.Windows.SystemColors.GradientActiveCaptionBrush
            };
            pic = new VideoRenderer(skypeRef)
            {
                Margin = new System.Windows.Thickness { Left = 5, Top = 5, Right = 0, Bottom = 0 },
                Height = picHeight,
                Width = piclWidth,
                Stretch = Stretch.Fill
            };
            gui.Children.Add(pic); 
```

我已经阅读了有关 STA 和 MTA 线程的信息（例如[“调用线程必须是 STA，因为许多 UI 组件都需要这个。” WPF](https://stackoverflow.com/questions/11440237/the-calling-thread-must-be-sta-because-many-ui-components-require-this-wpf)），但我无法将创建新参与者的线程设置为 STA .. 我已经发生错误时，无法找到调用它的线程/方法。我已经看到，从以下代码调用 Participant 构造函数没有问题：

```
private void callButton_Click(object sender, EventArgs e)
        {
            if (liveSession != null)
            {
                if ((liveSession.P_LOCAL_LIVESTATUS == SktConversation.LOCAL_LIVESTATUS.RINGING_FOR_ME) || 
                    (liveSession.P_LOCAL_LIVESTATUS == SktConversation.LOCAL_LIVESTATUS.OTHERS_ARE_LIVE))
                {
                    liveSession.JoinLiveSession("");
                }
                else
                {
                    if (liveSession == null) return;
                    // if we leave volountarily, while other people are still in a live session,
                    // the liveSession P_LOCAL_LIVESTATUS will remain OTHERS_ARE_LIVE.
                    // So, we need to switch UI mode to not-yet-in-call state here as well.
                    liveSession.LeaveLiveSession(false);
                    liveSession = null;
                    ReleaseWebcam();
                    UiToWaitingMode();
                }
                return;
            }

            if (convListBox.SelectedItem == null) return;

            // Here we actually make the outgoing call
            Conversation conv = (Conversation)convListBox.Items[convListBox.SelectedIndex];
            liveSession = conv;

            // Fetching target list from conv and converting to string list
            SktParticipant.List parts;
            parts = liveSession.GetParticipants(SktConversation.PARTICIPANTFILTER.OTHER_CONSUMERS);             
            foreach (Participant p in parts) { p.RingIt(); }
        } 
```

我试图确定错误的来源，使用各种线程和对象的调度程序，确保 main() 具有 STAthread 属性，尝试在看似相关的方法上设置“[STAThread]”。

有人知道我该如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:58:16.170

问题是，在第二种情况下，您的代码由 UI 线程调用，但在第一种情况下，我认为它是您的工作线程/通信线程之一。在 WPF 中，所有 UI 更改必须在 UI 线程中完成或使用特殊`Dispatcher`对象分派给它。

将您的 UI 更改包装到一个单独的方法中并用于`Application.Current.Dispatcher.Invoke`调用它。

这是关于此问题及其解决方案的更详细的文章：[http ://blog.decarufel.net/2009/03/good-practice-to-use-dispatcher-in-wpf.html](http://blog.decarufel.net/2009/03/good-practice-to-use-dispatcher-in-wpf.html)

# java - 创建一个对象并将其注册到 ORB

> ID：13528485
> 
> 赞同：1
> 
> 时间：2012-11-23T11:45:44.363
> 
> 标签：java, compiler-errors, corba

我正在开发一个 CORBA 客户端和服务器应用程序，使用以下 idl

1) 备份服务器.idl

```
// BackupServer.idl

  #ifndef BackupServer_idl
  #define BackupServer_idl

  #include "BackupDaemon.idl"
  #include "BackupExceptions.idl"

  // A BackupServer provides clients with visibility to Backup objects.
 interface BackupServer {

     // Register the given Backup Daemon with this BackupServer. The Backup will
     // be listed by getBackupDeamons() until unregisterBackup() is called with
     // that Backup.
     void registerBackupDaemon(in BackupDaemon bd)
             raises (InvalidBackupDaemonException);

     // Unregister the given Backup from this BackupServer. If the Backup
     // was not previously registered, this operation does nothing.
     void unregisterBackupDaemon(in string backupDaemonMacAddress)
             raises (InvalidBackupDaemonException);

     // Return a list of all Backups currently registered with this
     // BackupServer.
     BackupDaemonList getBackupDeamons();
 };

 #endif 
```

2）BackupDaemon.idl

```
 // BackupDaemon.idl

  // Forward declaration of BackupDaemon interface.
  interface BackupDaemon;

  #ifndef BackupDaemon_idl
  #define BackupDaemon_idl

  // sequence of BackupDaemons
 typedef sequence<BackupDaemon> BackupDaemonList;

 #include "BackupExceptions.idl"

 interface BackupDaemon {

     // This BackupDaemon's name.
     attribute string backupDaemonUser;
     attribute string backupDaemonIP;
     attribute string backupDaemonHostName;
     attribute string backupDaemonBackupType;
     attribute string backupDaemonType;
     attribute string backupDaemonTime;
     attribute string backupDaemonPath;
     attribute boolean backupDaemonScheduled;
     attribute string backupDaemonPort;
     attribute string backupDaemonMacAddress;

     boolean startBackup(in string backupPath,in string backupDaemonMacAddress);

     void deleteBackup(in string backupPath,in string backupDaemonMacAddress)
             raises (InvalidBackupPathException);

 };

 #endif 
```

3) BackupExceptions.idl

```
 // BackupExceptions.idl

  #ifndef BackupExceptions_idl
  #define BackupExceptions_idl

  exception InvalidBackupPathException {

 };

 exception InvalidBackupDaemonException {

 };
 #endif 
```

一切都很好，但我的问题是：-如何将 BackupDaemon 对象从我的客户端实现传递到服务器？

我试过那个代码： -

```
 // BackupDaemonMain.java

  import org.omg.CORBA.ORB;
  import org.omg.CosNaming.NameComponent;
  import org.omg.CosNaming.NamingContext;
  import org.omg.CosNaming.NamingContextHelper;

 // BackupDaemonMain is a simple client of a BackupServer.
 public class BackupDaemonMain {

     // Create a new BackupDaemonMain.
     BackupDaemonMain() {

     }

     // Run the BackupDaemonMain.
     public void run() {

         connect();

         if (myBackupServer != null) {
             doSomething();
         }
     }

     // Connect to the BackupServer.
     protected void connect() {

         try {

             // Get the root naming context.

             org.omg.CORBA.Object obj = ourORB.
                     resolve_initial_references("NameService");
             NamingContext namingContext = NamingContextHelper.narrow(obj);

             // Attempt to locate a BackupServer object in the naming
             // context.
             NameComponent nameComponent = new NameComponent("BackupServer","");
             NameComponent path[] = { nameComponent };
             myBackupServer = BackupServerHelper.narrow(namingContext.resolve(path));
         } catch (Exception ex) {
             System.err.println("Couldn't resolve BackupServer: " + ex);
             myBackupServer = null;
             return;
         }

         System.out.println("Succesfully bound to a BackupServer.");
     }

     // Do some cool things with the BackupServer.
     protected void doSomething() {

         try {
 **BackupDaemonImpl bd=new BackupDaemonImpl();
 bd.setORB(ourORB);**
 bd.backupDaemonUser("backupDaemonUser");
  bd.backupDaemonIP("backupDaemonIP");
   bd.backupDaemonHostName("backupDaemonHostName");
    bd.backupDaemonBackupType("backupDaemonBackupType");
     bd.backupDaemonType("backupDaemonType");
  bd.backupDaemonTime("backupDaemonTime");
   bd.backupDaemonPath("backupDaemonPath");
    bd.backupDaemonScheduled(true);
       bd.backupDaemonPort("backupDaemonPort");
    bd.backupDaemonMacAddress("backupDaemonMacAddress");

       // Get the valid stock symbols from the BackupServer.
             myBackupServer.registerBackupDaemon(bd);

           /*  // Display the stock symbols and their values.
             for (int i = 0; i < stockSymbols.length; i++) {
                 System.out.println(stockSymbols[i] + " " +
                         myBackupServer.getStockValue(stockSymbols[i]));
             }*/
         } catch (Exception ex) {
             System.err.println("Fatal error: " + ex);
         }
     }

     // Start up a BackupDaemonMain.
     public static void main(String args[]) {

         // Initialize the ORB.
         ourORB = ORB.init(args, null);

         BackupDaemonMain stockClient = new BackupDaemonMain();

         stockClient.run();

         // This simply waits forever so that the DOS window doesn't
         // disappear (for developers using Windows IDEs).
         while (true)
             ;
     }

     // My ORB.
     public static ORB ourORB;

     // My BackupServer.
     private BackupServer myBackupServer;
 } 
```

但我得到这个错误

```
 bd.setORB(ourORB);
   ^
  symbol:   method setORB(ORB)
  location: variable bd of type BackupDaemonImpl
BackupDaemonMain.java:73: error: method registerBackupDaemon in interface Backup
ServerOperations cannot be applied to given types;
             myBackupServer.registerBackupDaemon(bd);
                           ^
  required: BackupDaemon
  found: BackupDaemonImpl
  reason: actual argument BackupDaemonImpl cannot be converted to BackupDaemon b
y method invocation conversion
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
2 errors 
```

教程或类似错误解决方案的任何帮助。提前致谢。

# multithreading - Silverlight ViewModel 中的 BackgroundWorker

> ID：13528486
> 
> 赞同：0
> 
> 时间：2012-11-23T11:45:47.753
> 
> 标签：multithreading, silverlight, mvvm, backgroundworker

我在 Silverlight 视图中有一个 TabControl，我通过将其 ItemsSource 绑定到我的 ViewModel 中的 TabItems ObservableCollection 来加载选项卡。

要打开一个新选项卡，创建和加载它需要一点时间，我想同时运行一个 BusyIndi​​cator。

当它们在 ViewModel 中创建和加载时，如果我在调用“load”方法之前设置 IsBusy 属性，它不会显示，因为它不是异步的。

我试图在后台工作人员中设置它，但是当我创建 TabItem 以将其添加到 TabItems 列表时它崩溃（UnauthorizedAccessException）。

任何的想法？？？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:54:15.083

使用任务（[AsyncCtp 和 Silverlight 4](http://nuget.org/packages/AsyncCTP)）：

```
public void Load(){
    this.IsBusy = true;
    Task.Factory.StartNew(()=> DoHeavyWork())
        .ContinueWith( t => this.IsBusy = false);
} 
```

[如果您可以将新的 async/await 功能与 Async CTP 或VS2012/Silverlight 5](http://10rem.net/blog/2012/05/22/using-async-and-await-in-silverlight-5-and-net-4-in-visual-studio-11-with-the-async-targeting-pack)一起使用，它会变得更好

```
public async void Load(){
    try{
        this.IsBusy = true;

        await Task.Factory.StartNew(()=> DoHeavyWork());
    }
    finally
    {       
        this.IsBusy = false;
    }
} 
```

**编辑**

我假设您正在后台任务中更新 ObservableCollection。这确实会给您带来问题，因为处理集合更新的处理程序不在 UI 线程中运行，因此集合更新不像绑定系统那样是线程安全的。为此，您必须将项目添加到 UI 线程中的 ObservableCollection。如果您可以一次获取所有项目，则可以执行以下操作：

```
public async void Load(){
    try{
        this.IsBusy = true;

        // Returns the fetched items
        var items = await Task.Factory.StartNew(()=> DoHeavyWork());

        // This will happen in the UI thread because "await" returns the
        // control to the original SynchronizationContext
        foreach(var item in items)
            this.observableCollection.Add(item);
    }
    finally
    {       
        this.IsBusy = false;
    }
} 
```

如果您必须分批加载，您可以使用当前的 Dispatcher 将项目添加到集合中，就像我在[这个答案](https://stackoverflow.com/questions/13501064/load-an-observablecollectionstring-with-a-task/13501411#13501411)中建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:19:14.360

当您尝试访问 UI 的元素或更改反过来反映在 UI 上的数据的集合时，就会发生这种情况。这实际上是跨线程异常。当你创建一个后台工作者时，你基本上是在创建另一个线程。因此，您无法从后台工作人员访问主 UI 线程的变量。

# rest - 使用 Get Servers 请求 + Restful 服务列出 SQL 数据库服务器

> ID：13528490
> 
> 赞同：0
> 
> 时间：2012-11-23T11:46:18.697
> 
> 标签：rest, azure, azure-sql-database

我尝试在 REST API 中使用“枚举服务器”获取服务器选项。

我尝试了多个选项来连接到服务器。但我收到错误“连接被拒绝”或“无法通过代理进行隧道。代理返回“HTTP/1.1 502 隧道连接失败”[使用代理]。

我能够使用相同的代理设置成功执行其他操作，例如“获取图像、获取托管服务 ..etc”。那个时候连接很顺畅。

以下是详细信息：

请求 URI：[https](https://management.database.windows.net:8443/) ://management.database.windows.net:8443 / /servers。

x-ms-版本：1.0

请让我知道我在这里做错了什么。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:02:01.527

这可能是由您的代理和/或防火墙引起的，因为 Windows Azure SQL 数据库管理 API 在端口 8443 上运行。作为您的网络管理员，允许连接到端口 8443。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T07:52:29.330

问题是由于 8443 的防火墙限制。当我打开它时，上面的错误消息已经消失。现在遇到“HTTP 错误 500：内部服务器错误”。研究仍在继续使用 azure！

# haskell - 更新矩阵 Haskell

> ID：13528494
> 
> 赞同：1
> 
> 时间：2012-11-23T11:46:32.650
> 
> 标签：haskell, matrix, functional-programming

我将通过列表列表 [[a]] 来表示项目中的矩阵

*   这是一个好主意还是我应该更好地使用数组？

*   如何使用索引（i，j）更改元素

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T12:27:39.357

当然，基于列表的解决方案永远不会像优化的紧密数组那样快，因为有必要的间接性，以及它所有的缓存局部性问题。然而，这只是一个恒定的开销因素（尽管可能相当大，大约为 100）。

然而，有趣的是，矩阵的嵌套列表方法并不像看起来那么糟糕：列表仍然是最自然地以传统的纯函数方式处理的数据结构。正如 millimoose 所说，您不能仅仅以纯粹的方式就地更改元素，您必须在更改一个元素的情况下制作整个事物的副本*。对于*n* ✕ *n*紧密阵列矩阵，这是*O* ( *n* ^(2 ) - 对于较大的)*n*几乎不能接受。

*虽然长度为m*的列表中的随机访问已经是*O* ( *m* )，因此比数组更糟糕，**但对于更复杂的操作，它并没有变得更糟**。*您可以在O* ( *m* )中“修改”一个列表，您可以在*O* ( *n* )中访问一个*n* ✕ *n*嵌套列表，您可以在*O* ( *n* )中修改它！所以如果你想对大型矩阵进行无损更新，实际上比.**`[[a]]``Array a i`**

 **哦，这是如何工作的——嗯，就像

```
type Matrix a = [[a]]
updateMatrixAt :: (Int,Int) -> (a->a) -> Matrix a -> Matrix a
updateMatrixAt(i,j) f mat
 | (upperRows, thisRow : lowerRows ) <- splitAt i mat
 , (leftCells, thisCell: rightCells) <- splitAt j thisRow
         =                  upperRows
          ++ (leftCells ++ (f thisCell): rightCells)
                          : lowerRows
 | otherwise = error "Tried to index matrix outside range" 
```

会成功的。

* * *

*[有人试图避免这种情况](http://www.haskell.org/haskellwiki/Arrays#DiffArray_.28module_Data.Array.Diff.29)，但恐怕这已被证明是一条死胡同。如果你想要真正的高性能，你应该在`ST`monad 中使用破坏性更新，虽然它可能没有那么好，但它没有任何问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T15:09:25.520

使用您自己的数据类型包装 a`Map (Int,Int) a`怎么样？更改元素是微不足道的，特别是对于稀疏矩阵，您可以节省大量内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:51:08.037

> 如何使用索引（i，j）更改元素？

一般来说，你不能。您必须创建一个更改了一个元素的新矩阵。（使用[操作符](http://www.haskell.org/ghc/docs/latest/html/libraries/haskell98-2.0.0.2/Array.html#v%3a-47--47-)`Array`代替列表会稍微容易一些[。`//`](http://www.haskell.org/ghc/docs/latest/html/libraries/haskell98-2.0.0.2/Array.html#v%3a-47--47-)）看起来您可以使用[`MArray`](http://www.haskell.org/haskellwiki/Arrays#Mutable_IO_arrays_.28module_Data.Array.IO.29)来进行就地更改，但几乎所有代码都必须使用`IO`.**

# asp.net-mvc - 在我的 MVC 项目中禁用缓存，特定操作的控制器除外

> ID：13528495
> 
> 赞同：1
> 
> 时间：2012-11-23T11:46:40.290
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我在我的 Visual Studio 2012 ASP.NET MVC4 解决方案上工作。我正忙于缓存部分。除了某些由属性标记的特定操作外，我不希望缓存任何操作控制器。

这是我所做的：

我定义了一个动作过滤器：

```
public class DisableCacheFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // Without caching
        filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
        filterContext.HttpContext.Response.Cache.SetValidUntilExpires(false);
        filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        filterContext.HttpContext.Response.Cache.SetNoStore();
    }
} 
```

因此，每当触发一个动作时，我不会在下次触发该动作时进行缓存。

接下来我在 Global.asax 中注册这个过滤器：

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new DisableCacheFilter());
    } 
```

接下来我创建了一个 EnableCache 属性：

```
public class EnableCacheAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // With caching of one day
        filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(1));
        filterContext.HttpContext.Response.Cache.SetValidUntilExpires(true);
        filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.Public);
    }
} 
```

因此，每当当前操作用 EnableCache 属性修饰时，我都想缓存它。因此，下次触发相同的操作（从客户端浏览器）时，不会进行调用。

例子：

```
 [EnableCache]
    public JsonResult GetPostCode(int countryID, string term)
    {
    ....
    } 
```

它不起作用，因为每次调用过滤器 DisableCache 时。

所以在简历中：我想禁用任何缓存（来自浏览器）并且只缓存特定的操作（可能由属性标记）。

可能吗？

不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-02T13:45:41.840

您只需要将属性添加到 GlobalFilterCollection

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new DisableCacheFilter());
        filters.Add(new EnableCacheAttribute ());
    } 
```

# android - 当点击帖子用户点击帖子按钮时如何从APP发布到网站

> ID：13528499
> 
> 赞同：3
> 
> 时间：2012-11-23T11:46:47.023
> 
> 标签：android, wordpress

我在我的网站中使用 wordpress。在我的一个 xml 文件中，用户必须填写书籍价格等内容，然后当用户单击发布按钮时，我想将该数据从 android App 发布到网站。我怎样才能做到这一点。如果您提供有关此的任何信息，这将非常有帮助。以下是我的代码

```
public class Post_Ads extends Activity {
private static final int SELECT_PHOTO = 100;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_post__ads);

    // do action when click on browse button
    Button button = (Button) findViewById(R.id.browse_btn);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click
             Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
             photoPickerIntent.setType("image/*");
             startActivityForResult(photoPickerIntent, SELECT_PHOTO);   

        }
    });
    Button btnpost = (Button) findViewById(R.id.post_btn);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click

        }
    });

}
// select photo from phone gallery 
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

    switch(requestCode) { 
    case SELECT_PHOTO:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = imageReturnedIntent.getData();
            InputStream imageStream;
            try {
                imageStream = getContentResolver().openInputStream(selectedImage);
                 Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }

}
public void postData(String title, String price, String city, String state, String country,String zip, String description, String image) {

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("site url");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        nameValuePairs.add(new BasicNameValuePair("Title", title));
        nameValuePairs.add(new BasicNameValuePair("price", price));
        nameValuePairs.add(new BasicNameValuePair("City", city));
        nameValuePairs.add(new BasicNameValuePair("State", state));
        nameValuePairs.add(new BasicNameValuePair("Country", country));
        nameValuePairs.add(new BasicNameValuePair("Zip/Postal Code", zip));
        nameValuePairs.add(new BasicNameValuePair("Description", description));
        nameValuePairs.add(new BasicNameValuePair("Image", image));
        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_post__ads, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:

            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

}

activity_post_ads.xml 文件

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="right"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="top|left"
    android:text="@string/PostYourAds" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="" />
  <LinearLayout  android:layout_width="wrap_content"        android:layout_height="fill_parent" >
 <TextView
android:id="@+id/title"
android:layout_width="70dp"
android:layout_height="wrap_content"
android:text="@string/Title" />
  <EditText
 android:id="@+id/title1"
 android:layout_width="210dp"
 android:layout_height="wrap_content"
 android:gravity="left"
 android:hint="@string/none" >
   <requestFocus />
    </EditText>
      </LinearLayout>
   <LinearLayout  android:layout_width="wrap_content" android:layout_height="fill_parent" >
     <TextView
      android:id="@+id/price"
      android:layout_width="67dp"
      android:layout_height="wrap_content"
      android:text="@string/price" />
  <EditText
 android:id="@+id/price1"
 android:layout_width="210dp"
 android:layout_height="wrap_content"
 android:ems="10"
 android:hint="@string/none"
 android:inputType="number" >
     <requestFocus />
 </EditText>
   </LinearLayout> 
```

```
 <requestFocus />
 </EditText>
 </LinearLayout>

  <LinearLayout  android:layout_width="wrap_content" android:layout_height="fill_parent" >
<TextView
android:id="@+id/state"
android:layout_width="68dp"
android:layout_height="wrap_content"
android:text="@string/state" />

 <EditText
 android:id="@+id/state1"
android:layout_width="210dp"
 android:layout_height="wrap_content"
 android:ems="10"
 android:hint="@string/none" >

   <requestFocus />
  </EditText>
  </LinearLayout>

<LinearLayout  android:layout_width="wrap_content" android:layout_height="fill_parent" >
     <TextView
      android:id="@+id/zip"
      android:layout_width="73dp"
      android:layout_height="match_parent"
      android:text="@string/zip" />
 <EditText
 android:id="@+id/zip1"
 android:layout_width="210dp"
 android:layout_height="wrap_content"
 android:layout_weight="1"
 android:ems="10"
 android:inputType="number"
 android:hint="@string/none">

 <requestFocus />
</EditText>
  </LinearLayout>

<LinearLayout  android:layout_width="wrap_content" android:layout_height="fill_parent"  >
 <TextView
android:id="@+id/description"
android:layout_width="88dp"
android:layout_height="30dp"
android:text="@string/description" />
 <EditText
  android:id="@+id/editText1"
  android:layout_width="210dp"
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:ems="10"
  android:hint="@string/none"
  android:inputType="textMultiLine" />
    </LinearLayout>

 <LinearLayout  android:layout_width="wrap_content" android:layout_height="fill_parent" >
    <TextView
      android:id="@+id/Image"
      android:layout_width="73dp"
      android:layout_height="33dp"
      android:text="@string/image" />
<EditText
 android:id="@+id/image1"
 android:layout_width="134dp"
 android:layout_height="wrap_content"
 android:ems="10"
 android:hint="@string/none" >

 <requestFocus />
 </EditText>

 <Button
 android:id="@+id/browse_btn"
 style="?android:attr/buttonStyleSmall"
 android:layout_width="71dp"
 android:layout_height="wrap_content"
 android:text="@string/browse_btn" />
 </LinearLayout>

 <Button
  android:id="@+id/post_btn"
  android:layout_width="100dp"
  android:layout_height="wrap_content"
  android:layout_gravity="center_horizontal"
  android:text="@string/post"
  android:onClick="postData()" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:59:13.777

您应该首先了解 HTTP 类。从您的 Android 应用程序向服务器发布数据的示例代码如下所示。

```
public void postData(String bookname, String price) {

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("your site url");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        nameValuePairs.add(new BasicNameValuePair("book", bookname));
        nameValuePairs.add(new BasicNameValuePair("price", price));
        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }

} 
```

因此`List<NameValuePair> nameValuePairs`，将保存应该通过 POST 方法发送到服务器的数据。传递您的值，如下所示。

```
nameValuePairs.add(new BasicNameValuePair("book", bookname));
nameValuePairs.add(new BasicNameValuePair("price", price)); 
```

基本上应该在单击按钮时调用上述函数，如下所示，

```
 postbutton.setOnClickListener(new OnClickListener() {  
         public void onClick(View v)
         {
            // call postData here.
         }
     }); 
```

确保您已在您的站点设置所有的东西来处理这些请求。请注意，对于一些较新或最近的 android 版本，您需要[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来执行网络操作。

编辑：将您的 oncreate 方法更改为下面的代码。你还没有调用 postData(....) 方法。这就是你没有得到的原因。还有一件事，要将文件上传到服务器，您需要在[这里](https://stackoverflow.com/questions/10569758/image-uploading-to-server-in-android)查看不同的代码，您会有所了解。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_post__ads);

    // do action when click on browse button
    Button button = (Button) findViewById(R.id.browse_btn);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click
             Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
             photoPickerIntent.setType("image/*");
             startActivityForResult(photoPickerIntent, SELECT_PHOTO);   

        }
    });
    Button btnpost = (Button) findViewById(R.id.post_btn);
    btnpost.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click
             postData("title","price", "city", "state","country","zip", "description",     "image");     

        }
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:05:39.933

您可以通过来自 android 的 web 服务调用将值发送到 wbsite。使用 POST 或 GET 方法。这是通过 HttpPost 方法发送数据的代码，

```
String url              = "your_webservice_URL";

 try 
 {
    HttpPost loginHttpPost   = new HttpPost(url); 
    HttpContext localContext = new BasicHttpContext();          

    MultipartEntity multipartContent = new MultipartEntity();
    multipartContent.addPart("parameter1", new StringBody(value1));
    multipartContent.addPart("parameter2", new StringBody(value2));
    loginHttpPost.setEntity(multipartContent);

    HttpClient objHttpClient = new DefaultHttpClient();
    HttpResponse response = objHttpClient.execute(loginHttpPost,localContext);
 } 
 catch (IOException e) {
     e.printStackTrace();
 } 
```

这是通过 HttpGet 方法发送数据的代码，

```
String webserviceurl                    = "your_webservice_URL";

List<NameValuePair> lstAddToken         = new ArrayList<NameValuePair>();
lstAddToken.add(new BasicNameValuePair("parameter1",value1));
lstAddToken.add(new BasicNameValuePair("parameter2",value2));

//add parameters to the URL
webserviceurl                           += "?";
String paramString                      = URLEncodedUtils.format(lstAddToken, "utf-8");
webserviceurl                           += paramString;

//Call the webservice using HttpGet with parameters and get the response from webservice 
try 
{
    HttpGet loginHttpget     = new HttpGet(webserviceurl);
    HttpClient objHttpClient = new DefaultHttpClient();
    HttpResponse response    = objHttpClient.execute(loginHttpget);
    HttpEntity entity    = response.getEntity();
    is           = entity.getContent();
} 
catch (Throwable t) 
{
     Log.e("log_tag", "Error converting result "+t.toString());
} 
```

# java - Spring MVC，Hibernate 项目抛出 IncompatibleClassChangeError (Tomcat 7)

> ID：13528508
> 
> 赞同：0
> 
> 时间：2012-11-23T11:47:39.230
> 
> 标签：java, spring, hibernate, maven, spring-mvc

我是 Spring 源代码和 Spring Maven (Spring MVC) 项目的新手。我正在尝试使用 Hibernate 4.1.8 将项目与数据库连接。但是在 Tomcat 7.0 服务器中为 localhost 运行项目时出现错误。

错误如下：

```
type Exception report

message Servlet.init() for servlet appServlet threw exception

description The server encountered an internal error that prevented it from fulfilling this request.

exception 

javax.servlet.ServletException: Servlet.init() for servlet appServlet threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)

root cause

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source)

root cause

java.lang.IncompatibleClassChangeError: Implementing class
    java.lang.ClassLoader.defineClass1(Native Method)
    java.lang.ClassLoader.defineClass(Unknown Source)
    java.security.SecureClassLoader.defineClass(Unknown Source)
    org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2904)
    org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1173)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1681)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    java.lang.Class.getDeclaredConstructors0(Native Method)
    java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    java.lang.Class.getConstructor0(Unknown Source)
    java.lang.Class.getDeclaredConstructor(Unknown Source)
    org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:104)
    org.springframework.orm.hibernate3.LocalSessionFactoryBean.newConfiguration(LocalSessionFactoryBean.java:818)
    org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:549)
    org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source) 
```

**servlet-context.xml**文件如下。它包含我添加的用于连接 Hibernate 的 bean：

```
<!-- JDBC settings -->    
    <beans:bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <beans:property name="location" value="resources/config.properties" />        
    </beans:bean>

<beans:bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <beans:property name="driverClassName" value="${jdbc.driverClassName}" />
        <beans:property name="url" value="${jdbc.url}" />
        <beans:property name="username" value="${jdbc.username}" />
        <beans:property name="password" value="${jdbc.password}" />
    </beans:bean>

<!-- Model classes that maps to database fields -->
    <beans:bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">

        <beans:property name="dataSource" ref="dataSource" />
        <beans:property name="annotatedClasses">
            <beans:list>
                <beans:value>com.doxonomy.model.User</beans:value>              
            </beans:list>
        </beans:property>
        <beans:property name="configLocation">          
            <beans:value>classpath:hibernate.cfg.xml</beans:value>
        </beans:property>               
        <!-- Hibernate configuration -->
        <beans:property name="hibernateProperties">
            <beans:props>
                <beans:prop key="hibernate.dialect">
                    org.hibernate.dialect.MySQLDialect
                </beans:prop>
                <beans:prop key="hibernate.show_sql">false</beans:prop>
                <beans:prop key="hibernate.transaction.flush_before_completion">true</beans:prop>
                <beans:prop key="hibernate.hbm2ddl.auto">
                    create
                </beans:prop>
            </beans:props>
        </beans:property>
    </beans:bean>

    <beans:bean id="userDAOImpl" class="com.doxonomy.dao.UserDAOImpl" /> 
```

pom.xml 依赖如下：

```
<dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>   
        </dependency>   

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version> 
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>          
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>          
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>           
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>    
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope> 
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>commons-pool</groupId>
            <artifactId>commons-pool</artifactId>
            <version>1.0</version>
        </dependency>

        <!-- Javax Persistance -->
        <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0</version>          
        </dependency>

        <!-- Hibernate -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
        <version>4.1.8.Final</version>                      
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate</artifactId>
            <version>3.0alpha</version>
        </dependency>

        <!-- MySQL database driver -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>       

       <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            version>1.2.2</version>                     
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-dao</artifactId>
            <version>2.0.3</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>2.0.6</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>        

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>  
            <version>4.8.1</version>            
            <scope>test</scope>
        </dependency>        
    </dependencies> 
```

我创建了一个用于从数据库中获取值的基类。它是**UserDAOImpl**，它是使用各种示例开发的，看起来不错。需要做什么来解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:58:00.023

您的 tomcat 服务器中可能有同一个 jar 的两个版本。

请参阅此链接[什么是不兼容的类更改错误？](https://stackoverflow.com/questions/1980452/what-causes-java-lang-incompatibleclasschangeerror)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:03:46.287

可能的原因：

*   您的应用程序服务器中有同一个 JAR 的两个版本。
*   您[更改了类实现](https://stackoverflow.com/questions/3534854/what-is-a-incompatibleclasschangeerror-exception-in-java)但没有重新编译接口（反之亦然）。在这种情况下，请尝试清理您的项目并重新编译所有内容。

一旦提供有关类，接口的更多详细信息，将立即更新答案。

# javascript - 用 javascript 修改 css 规则对象

> ID：13528512
> 
> 赞同：18
> 
> 时间：2012-11-23T11:47:57.107
> 
> 标签：javascript, css, oocss

> **可能重复：**
> [从 Javascript 更改 CSS 规则集](https://stackoverflow.com/questions/1409225/changing-a-css-rule-set-from-javascript)

我想知道是否有可能在不使用内联样式的情况下修改 Css 样式表声明。

这是一个简单的例子：

```
<style>
    .box {color:green;}
    .box:hover {color:blue;}
</style>

<div class="box">TEXT</div> 
```

这给出了一个蓝色书写框，在悬停时变为绿色书写。

如果我为颜色提供内联样式，悬停行为将丢失：

```
<div class="box" style="color:red;">TEXT</box> 
```

无论如何，这都会给出一个红色的文字框。

所以我的问题是，如何访问和修改 css 声明对象而不是用内联样式覆盖样式。

谢谢，

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-23T11:51:16.307

您可以使用与`cssRules`原始样式表相对应的 DOM 样式表对象来修改您的规则。

```
var sheet = document.styleSheets[0];
var rules = sheet.cssRules || sheet.rules;

rules[0].style.color = 'red'; 
```

请注意，IE 使用`rules`而不是`cssRules`.

这是一个演示：http: [//jsfiddle.net/8Mnsf/1/](http://jsfiddle.net/8Mnsf/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T11:50:11.563

只需定义您的类，并使用 javascript 为 HTML 元素分配/删除类。

直接为元素分配样式，具有最高优先级，它将覆盖所有其他 CSS 规则。

编辑：您可能想要使用 cssText 属性，请参阅此处的示例[cssText 属性](http://www.stoimen.com/2010/03/17/jquery-csstext-helps-you-improve-browser-reflows/)

# php - 如何从 simplepie 获取更多历史信息？

> ID：13528514
> 
> 赞同：1
> 
> 时间：2012-11-23T11:48:01.023
> 
> 标签：php, rss, simplepie

似乎 simplepie 在 set_item_limit() 上有 25 个提要的限制。有没有办法从 simplepie 获取更多历史信息？我知道 google feed api 的限制为 250，但我不能轻易地将它集成到我的项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:31:18.130

我给你链接所以按照这些链接，你会得到你的解决方案。它不仅限于 25 条记录。

[http://simplepie.org/wiki/reference/simplepie/set_item_limit](http://simplepie.org/wiki/reference/simplepie/set_item_limit)

[http://simplepie.org/wiki/tutorial/how_to_limit_the_number_of_items_displayed_per_feed_when_using_multifeeds.php](http://simplepie.org/wiki/tutorial/how_to_limit_the_number_of_items_displayed_per_feed_when_using_multifeeds.php)

# entity-framework - EntityFramework：EF 5.0 中可能存在多对多的错误？

> ID：13528531
> 
> 赞同：1
> 
> 时间：2012-11-23T11:48:47.987
> 
> 标签：entity-framework

我有一个简单的 DbContext 模型，其中包含两个实体 Product 和 Order，以及它们之间的单个多 2 多关联。我正在尝试为产品实例显式加载特定的关联订单。因此，我从显式加载产品实例的*所有*订单开始：

```
context.Entry(product).Collection(x=>x.Orders).Load(); 
```

product.Orders 现在包含所有关联的订单。到现在为止还挺好。现在我想通过使用 '.Query()' 方法进行更具体的查询，如下所示：

```
context.Entry(product).Collection(x=>x.Orders).Query().Load(); 
```

令人惊讶的是，product.Orders 现在是空的！

根据文档，Query() 方法应返回“用于从数据库加载此集合的查询”。手动执行 ObjectQuery 确实会产生预期的结果。

我做错了什么，或者这是 EF 中的错误？

在此先感谢您的帮助。

亲切的问候，梅林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:41:54.640

不同之处在于第二条语句（with `Query().Load()`）仅将订单加载到上下文中，*而不是在集合中*。~~它只是一个运行的查询，它不知道它应该填充的任何集合。~~

您可以通过列出来验证这一点`context.Orders.Local`。之后`Query().Load()`它将包含属于 的订单`product`。

如果`product.Orders`之后允许延迟加载，您会看到正在执行相同的查询，但现在要填充集合。

**编辑**
在清除我的头脑并将多对多、一对多、懒惰/非懒惰分开之后，我可以完全重现您的问题。*不*加载m:m 导航属性`.Query().Load()`，而 1:n 导航属性是。不过，在这两种情况下都会加载该`Local`集合。

所以，很好的收获！

# java - Java将值从数组传递到新对象实例

> ID：13528532
> 
> 赞同：0
> 
> 时间：2012-11-23T11:48:54.367
> 
> 标签：java, arrays, file, object

我在将数组值传递给构造函数时遇到了一些问题。我有一个`file.txt`包含一些值的行，例如：

> 彼得|柏林|德国|0930295235|富。

我想出了如何将线条转换为数组。但我不知道如何将数组中的值传递给构造函数，以将数组转换为具有数组属性的对象。

这是主要课程：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;

public class FileReader {

    public static void main(String[] args) {
        try {
            // Open the file that is the first 
            // command line parameter
            FileInputStream fstream = new FileInputStream("file.txt");
            // Get the object of DataInputStream
            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strLine;

            // Read the file line by line
            while ((strLine = br.readLine()) != null) {
                // Print the content on the console
                String s[] = strLine.split("\\|");
                // System.out.println(java.util.Arrays.toString(s));
                // System.out.println (strLine);
                for (String element : s) {
                    System.out.println(element);
                    // HERE I NEED TO PASS THE ARRAY VALUES FOR EACH LINE TO TRANSFORM THE ARRAYS TO OBJECTS
                    Item item = new Item(element,element,element,element,element);
                    System.out.println("*************************************");
                }
                // Close the input stream
                in.close();
            } catch (Exception e) { //Catch exception if any
                System.err.println("Error: " + e.getMessage());
        }
    }
} 
```

这是类项目：

```
public class Item {

    private String name;
    private String city;
    private String state;
    private String number;
    private String foo;

    public Object(String name, String city, String state, String number,String foo){
        this.name = name;
        this.city = city;
        this.state = state;
        this.number = number;
        this.foo = foo; 
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getCity() {
        return city;
    }
    public void setCity(String city) {
        this.city = city;
    }
    public String getState() {
        return state;
    }
    public void setState(String state) {
        this.state = state;
    }
    public String getNumber() {
        return number;
    }
    public void setNumber(String number) {
        this.number = number;
    }
    public String getFoo() {
        return foo;
    }
    public void setFoo(String foo) {
        this.foo = foo;
    }
} 
```

我需要对象来更多地处理数据。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:55:11.147

我认为您想要做的事情类似于以下内容，尽管尚不完全清楚。

```
String s[] = strLine.split("\\|");
Item item = new Item(s[0], s[1], s[2], s[3], s[4]); 
```

另请注意，在您创建新对象后，它几乎会立即超出范围，因此您需要将其存储在循环`Item`之外声明的某种容器中：`while`

```
List<Item> items = new ArrayList<Item>();
String line;

while((line = br.readLine()) != null) {
    String[] words = line.split("\\|");
    Item item = new Item(words[0], words[1], words[2], words[3], words[4]);
    items.add(item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:54:28.687

我不认为你需要这个`for`循环。

```
for(String element : s)
{
} 
```

如果您想`String`从数组中提取特定的 s，您应该使用类似的东西，

```
String name = s[0]; 
```

但请注意不要选择数组范围之外的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:56:55.010

```
String s[] = strLine.split("\\|");
Object item = new Object(s[0],s[1],s[2],s[3],s[4]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T11:58:51.197

你不应该在那里有一个 for 循环，只需将每个数组值传递给`Object`s 构造函数，首先检查你是否有正确数量的值。new`Object`已经在 J​​ava 中使用，所以调用你的类（记住对象和类之间的区别）`MyObj`，.

```
MyObj myObj = null; // De
String s[] = strLine.split("\\|");
if (s.length==5){
  myObj = new MyObj(s[0],s[1],s[2],s[3],s[4]);
} else {
  System.err.println("Wrong number of arguments on the line"+strLine);
} 
```

显然使用不带参数的构造函数，然后将每个字段设置为

```
myObj = new MyObj();
myObj.setName( s[0]); //etc 
```

关于哪些数据进入哪个字段，哪个更具可读性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T11:54:34.087

如何将 for 循环更改为：

```
for(int i=0;i<s.size();i+=5) {
      System.out.println(s[i]);
      Object item = new Object(s[i],s[i+1],s[i+2],s[i+3],s[i+4]);
 } 
```

但这假设“s”的大小为 5n；n 是 1,2,3...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T12:02:14.360

由于您知道 的结构以及的长度`file.txt`，*因此*`String[] s`您可以调用您拥有的数组的每个元素：

```
for (String element : s) {
    System.out.println(element);
    Item item = new Item(s[0], s[1], s[2], s[3], s[4]);
} 
```

为了保存`Item item`s 并且不使用循环中的下一个元素覆盖它们，您可以将其与您的项目一起保存到数组中（从声明数组开始）：

```
public static void main(String[] args) {
    try {
        ArrayList<Item> items = new ArrayList<Item>();
        ... 
```

进而

```
for (String element : s) {
    System.out.println(element);
    Item item = new Item(s[0], s[1], s[2], s[3], s[4]);
    items.add(item);
} 
```

# sql-server - Telerik OpenAccess - 未实现 STDistance 服务器端的执行

> ID：13528533
> 
> 赞同：0
> 
> 时间：2012-11-23T11:48:56.853
> 
> 标签：sql-server, telerik-open-access

我有一个使用 Telerik OpenAccess 作为 ORM 的应用程序，它运行时没有任何问题。

现在在尝试基于 STDistance 进行查询时返回以下错误：

> 当前未在数据库服务器端执行“Microsoft.SqlServer.Types.SqlGeography:STDistance(SqlGeography)”。

我正在使用 OpenAccess 2012.3.1012。这工作正常，我的印象是 OpenAccess 自 2011.1 以来支持空间类型，所以不明白为什么它现在报告它不可用。

我已将我机器上的 SQL 工具升级到 SQL 2012，但数据库服务器正在运行 SQL 2008。我发现了一个关于类似问题和 Microsoft.SqlServer.Types.dll 版本 11 的论坛帖子，但经过仔细检查，我正在使用版本10\.

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T12:42:58.597

问题已解决。似乎是产品内支持 SQL 几何的回归。Telerik 建议它将在 11 月 26 日开始的下一个服务包中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:28:03.967

它是产品中 SQL 几何支持的回归，已经修复。该修复将成为 Telerik OpenAccess ORM 下一个服务包的一部分。

# android - 在 View 上启用 HW 加速的矩形叠加层中打孔

> ID：13528550
> 
> 赞同：35
> 
> 时间：2012-11-23T11:49:46.213
> 
> 标签：android, graphics, drawing, hardware-acceleration, porter-duff

我有一个视图可以做一些基本的绘图。在此之后，我想绘制一个带有打孔的矩形，这样只有前一个绘图的一个区域是可见的。我想通过为我的视图启用硬件加速来实现这一点，以获得最佳性能。

目前我有两种可行的方法，但仅在禁用硬件加速且另一种太慢时才有效。

**方法 1：SW 加速（慢速）**

```
final int saveCount = canvas.save();

// Clip out a circle.
circle.reset();
circle.addCircle(cx, cy, radius, Path.Direction.CW);
circle.close();
canvas.clipPath(circle, Region.Op.DIFFERENCE);

// Draw the rectangle color.
canvas.drawColor(backColor);

canvas.restoreToCount(saveCount); 
```

这不适用于为视图启用的硬件加速，因为此模式不支持“canvas.clipPath”（我知道我可以强制 SW 渲染，但我想避免这种情况）。

**方法 2：硬件加速（V. 慢速）**

```
// Create a new canvas.
final Bitmap b = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
final Canvas c = new Canvas(b);

// Draw the rectangle colour.
c.drawColor(backColor);

// Erase a circle.
c.drawCircle(cx, cy, radius, eraser);

// Draw the bitmap on our views  canvas.
canvas.drawBitmap(b, 0, 0, null); 
```

橡皮擦的创建位置

```
eraser = new Paint()
eraser.setColor(0xFFFFFFFF);
eraser.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR)); 
```

这显然很慢——`Bitmap`每次绘图调用都会创建一个新的视图大小。

**方法3：硬件加速（速度快，在某些设备上不起作用）**

```
canvas.drawColor(backColor);
canvas.drawCircle(cx, cy, radius, eraser); 
```

与硬件加速兼容方法相同，但不需要额外的画布。但这有一个主要问题——它可以强制使用 SW 渲染，但在 HTC One X（Android 4.0.4——可能还有其他一些设备）上，至少启用了 HW 渲染，它会使圆圈完全变黑。这可能与[22361](http://code.google.com/p/android/issues/detail?id=22361)有关。

**方法四：硬件加速（可接受，适用于所有设备）**

根据 Jan 提出的改进方法 2 的建议，我避免在每次调用时创建位图`onDraw`，而是在`onSizeChanged`：

```
if (w != oldw || h != oldh) {
    b = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    c = new Canvas(b);
} 
```

然后只是在`onDraw`：

```
if (overlayBitmap == null) {
   b = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
   c = new Canvas(b);
}
b.eraseColor(Color.TRANSPARENT);
c.drawColor(backColor);
c.drawCircle(cx, cy, radius, eraser);
canvas.drawBitmap(b, 0, 0, null); 
```

性能不如方法3，但比方法2好很多，略好于方法1。

**问题**

如何以与硬件加速兼容的方式实现相同的效果（并且在设备上始终如一地工作）？增加 SW 渲染性能的方法也是可以接受的。

注意：当移动圆圈时，我只是在使一个区域无效——而不是整个画布——所以那里没有性能改进的空间。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-23T13:26:21.363

而不是在每次重绘时分配一个新的画布，您应该能够分配一次，然后在每次重绘时重用画布。

在初始化和调整大小时：

```
Bitmap b = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(b); 
```

关于重绘：

```
b.eraseColor(Color.TRANSPARENT);
    // needed if backColor is not opaque; thanks @JosephEarl
c.drawColor(backColor);
c.drawCircle(cx, cy, radius, eraser);

canvas.drawBitmap(b, 0, 0, null); 
```

# ember.js - 如何处理 ember-data 中记录之间的关联

> ID：13528553
> 
> 赞同：1
> 
> 时间：2012-11-23T11:49:53.953
> 
> 标签：ember.js, ember-data

## 解释：

使用 ember-data 时，会弹出许多不同的场景，这些场景似乎并不都与此时的内部工作方式相匹配。首先，一些数据：

```
{ "post":
  {
    "id": "60",
    "title": "Hello, Stack Overflow friends!",
    "comments": []
  }
} 
```

说上面是数据库中的数据。

然后，通过分别调用每个客户端，**在客户端 1 和客户端 2 上**`post`获取一条记录。到目前为止，它们都有相同的记录——加载了一个空数组。**`post = App.Post.find(60)``post``comments`**

 ****稍后，在客户端 2 上**创建评论。这是通过调用来完成的`comment = App.Comment.createRecord({text: "Why, hello there.", post: post})`。

然后将评论数据保存在服务器端，如下所示：

```
{ "comment":
  {
    "id": "80",
    "text": "Why, hello there.",
    "post_id": "60"
  }
} 
```

此时，**客户端 2 是最新的**——因为这是创建评论的地方——但**客户端 1 是 out-of-sync**，因为它不知道新评论。

现在，客户端 1 可能会以一种或另一种方式（通过 XHR 或 WS）知道新创建的评论。

一旦客户端 1 知道了 id，`comment`就会通过调用来获取一条记录`comment = App.Comment.find(80)`。

...然而调用`post.get('comments')` **客户端 1**会导致 0 条评论。即使成功获取了新评论，也没有在 the`comment`和 the之间建立关联`post`。

## 问题：

*   在客户端 1 上获取评论时，不会发生自动关联魔术来将`comment`记录与`post`记录关联。

注意 1：这不会发生，因为在客户端 1 上，`post`记录最初是用`comments: []`. 如果数组包含评论 id, `80`，这将起作用（除了评论在加载时不存在的事实）。

注意 2：我可以通过调用客户端 1 手动添加关联`post.get('comments').addObject(comment)`，但这会弄脏`post`记录，并且似乎不是处理此问题的正确方法。

## 问题：

*   有没有办法以某种方式在客户端 1 上创建不涉及使用或任何弄脏记录的类似功能的`post`记录之间的关联？`comment``addObject``post`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:03:43.253

当您加载具有`belongsTo`关系的记录时，ember 数据当前不会更新关系的“父”记录。

在您的情况下解决此问题的一种方法是旁加载“父”记录。在您的情况下，您将（通过 XHR 或 WS）发送`comment`和`post`.

这个问题有一张公开的票[https://github.com/emberjs/data/pull/695](https://github.com/emberjs/data/pull/695)**

# javascript - 如何使用jsp从数据库中检索数据

> ID：13528557
> 
> 赞同：1
> 
> 时间：2012-11-23T11:50:02.980
> 
> 标签：javascript, jsp

我想从我的数据库中检索信息。我使用html从用户那里动态获取输入，并通过jsp从数据库（Mysql）中获取信息。以下是jsp代码

```
 Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/indi", "root", "");

Statement statement = connection.createStatement();

         String id1 = request.getParameter("id");   

         ResultSet resultset = statement.executeQuery("select * from books where author = '" + id1 + "'") ; 

            if(!resultset.next()) {
                out.println("Sorry, could not find that publisher. ");
            } else {
        %>

        <TABLE BORDER="1">
            <TR>
               <TH>name</TH>
               <TH>author</TH>
               <TH>money</TH>
               <TH>company</TH>

           </TR>

           <TR>
               <TD> <%= resultset.getString(1) %> </TD>
               <TD> <%= resultset.getString(2) %> </TD>
               <TD> <%= resultset.getString(3) %> </TD>
               <TD> <%= resultset.getString(4) %> </TD>

           </TR>

       </TABLE>
       <BR>
       <% 
           } 
    }
       %> 
```

我使用作者作为关键字来检索数据。现在我的数据库中有 2 个同名的作者，但是上面的代码只获取一个作者信息，即第一个，它留下另一个。我应该在哪里修改这段代码所以它将同时检索数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:58:25.547

尝试在结果集上进行循环。

```
while(rs.next( )){  
   %>
<TABLE BORDER="1">
        <TR>
           <TH>name</TH>
           <TH>author</TH>
           <TH>money</TH>
           <TH>company</TH>

       </TR>

       <TR>
           <TD> <%= resultset.getString(i) %> </TD>
           <TD> <%= resultset.getString(i+1) %> </TD>
           <TD> <%= resultset.getString(i+2) %> </TD>
           <TD> <%= resultset.getString(i+3) %> </TD>

       </TR>

   </TABLE>
   <BR>

 <% }  %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T04:14:22.740

```
 <tr>
         <TD> <%= resultset.getString(name) %> </TD>
       <TD> <%= resultset.getString(author) %> </TD>
       <TD> <%= resultset.getString(money) %> </TD>
       <TD> <%= resultset.getString(company) %> </TD>
       </tr> 
```

试试这个它会起作用我在我的代码中使用相同的

# php - 复选框 Ajax 返回帖子

> ID：13528558
> 
> 赞同：0
> 
> 时间：2012-11-23T11:50:04.507
> 
> 标签：php, ajax, jquery, checkbox

我已经为此苦苦挣扎了一段时间。我知道有很多关于这个的帖子，但由于我是这个主题的新手，我很难理解。我想将我的复选框表单的值发布到 php 脚本，并将值的值返回到我页面上的 div。这是代码：

带有ajax调用的onclick函数：

```
 <script>
    function submit_form(){
    var data = { 'saqalinproxy[]' : []};
    $("input:checked").each(function() {
    var chck1 = $(this).val();
    alert(chck1);
    data['saqalinproxy[]'].push($(this).val());
    });
    $.ajax({
    type : 'POST',
    url : 'testdeploy.php',
    data : data,
    dataType: "html",
    success : function(data){
          $('#progress_status').hide();
          $('.return').html(data); // replace the contents coming from php file
            }
        });
          $('#progress_status').show();
   }
   </script> 
```

HTML 表单：

```
<div style="width: 700px; height: 150px; padding: 10px">
<form id="caForm" class="caForm" method="post" name="caForm">
<fieldset id="fs-0">
<legend>QA Proxy Servers</legend>
<input type="checkbox" id="saqalin-proxy01" name="saqalinproxy[]" value="41.191.126.246">saqalin-proxy01<br>
<input type="checkbox" id="saqalin-proxy02" name="saqalinproxy[]" value="41.191.126.247">saqalin-proxy02<br><br>
<!--<input type="checkbox" id="ca-0"> Check/Uncheck All -->
<br>
<input type="submit" value="Deploy" onclick="submit_form();"/>

</fieldset>
</form>

</div>

<div id="status">
<p style="display:none;" id="progress_status"><img id="progress_image_status" style="padding-left:5px;padding-top:5px;" src="images/ajax-loader.gif" alt=""> Checking if this kak works!</p>
</div>

<div id="return"></div> 
```

PHP 帖子页面：

```
<?

    if(isset($_POST['saqalinproxy[]'])){
        $invite = $_POST['saqalinproxy[]'];
        print_r($invite);
    }

?> 
```

我正在努力让我的页面上返回的值。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:59:59.190

在这一行中，您正在选择一个具有类的元素，`return`因为`.`表示类名：

```
$('.return').html(data); 
```

在您的 HTML 中，您`div`有一个`id`非`return`类（注意`#`）。所以改成：

```
$('#return').html(data); 
```

您的第二个问题出在 PHP 代码中，您正尝试使用`$_POST['saqalinproxy[]']`. PHP 将其直接解析为 PHP 数组，因此`$_POST['saqalinproxy']`实际上是数组。

```
 if(isset($_POST['saqalinproxy'])){
    $invite = $_POST['saqalinproxy']; 
```

例如，如果两个项目都被选中，那么：

```
echo $_POST['saqalinproxy'][0]; // outputs 41.191.126.246
echo $_POST['saqalinproxy'][1]; // outputs 41.191.126.247 
```

此外，您可以简单地序列化表单，而不是像您一样尝试构建发布数据：

```
$.ajax({
    type : 'POST',
    url : 'testdeploy.php',
    data : $('#caForm').serialize(), 
```

解决这些问题后，您会看到表单提交了两次。第一次作为ajax，然后第二次作为传统请求。要解决这个问题，您需要在 onclick 中返回 false 或从函数中返回 false ..

```
<input type="submit" value="Deploy" onclick="submit_form(); return false;"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:53:48.207

您可以使用一个自动为您制作的库，即 phery [http://phery-php-ajax.net](http://phery-php-ajax.net)，在您的情况下，它会是这样的（注意`data-remote="deploy"`表格上的）

```
<div style="width: 700px; height: 150px; padding: 10px">
    <form id="caForm" class="caForm" data-remote="deploy" action="testdeploy.php" name="caForm">
        <fieldset id="fs-0">
            <legend>QA Proxy Servers</legend>
            <input type="checkbox" id="saqalin-proxy01" name="saqalinproxy[]" value="41.191.126.246">saqalin-proxy01<br>
            <input type="checkbox" id="saqalin-proxy02" name="saqalinproxy[]" value="41.191.126.247">saqalin-proxy02<br><br>
            <!--<input type="checkbox" id="ca-0"> Check/Uncheck All -->
            <br>
            <input type="submit" value="Deploy" />
        </fieldset>
    </form>
</div>

<div id="status">
    <p style="display:none;" id="progress_status"><img id="progress_image_status" style="padding-left:5px;padding-top:5px;" src="images/ajax-loader.gif" alt=""> Checking if this kak works!</p>
</div>

<div id="return"></div> 
```

然后在你的`testdeploy.php`你会改变它：

```
function deploy($data){
  $r = new PheryResponse;
  foreach ($data['saqalinproxy'] as $proxy){
    // do whatever you need to do with $proxy here
  }
  $r->jquery('#return')->html('set the HTML of your return');
  $r->jquery('#progress_status')->hide();
  return $r;
}

Phery::instance()->set(array(
  'deploy' => 'deploy'
))->process(); 
```

就是这样，不需要额外的 Javascript 代码，一切都是自动的。但是为了显示进度，你会这样做：

```
$(function(){
  // phery:before fires before sending the AJAX
  $('#caForm').bind('phery:before', function(){
    $('#progress_status').show();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:15:42.303

html js 和 php 几乎没有变化。在 html 中

```
<input type="submit" value="Deploy" onclick="return submit_form();"/> 
```

在 js 中，在 submit_form 函数中返回 false。并在 php

```
if(isset($_POST['saqalinproxy'])){
    $invite = $_POST['saqalinproxy'];
    print_r($invite);
} 
```

也改变`$('.return').html(data); to $('#return').html(data);`

# php - 当用户未登录或 myuser() 未设置时，如何在 symfony 会话中存储变量值？

> ID：13528562
> 
> 赞同：0
> 
> 时间：2012-11-23T11:50:33.280
> 
> 标签：php, session, symfony1, session-variables

我正在开发 symfony 1.0 并在会话中设置一个变量值，我们通常做的是：

```
$this->getUser()->setAttribute('method', 'ajax'); 
```

但是如果没有设置用户会话，这将不起作用。

我想在会话中设置一个变量，以便即使经过多次重定向或直到我手动清除它，它也应该可以使用。

`$this->setFlash('attrib', $value);`一旦提出另一个请求，这将被删除。

这如何在 symfony 中看到 - 我的意思是在会话中有一个变量，直到它被手动清除。

# unit-testing - ant 构建脚本的单元测试和代码覆盖率

> ID：13528567
> 
> 赞同：3
> 
> 时间：2012-11-23T11:50:50.927
> 
> 标签：unit-testing, ant, build-automation, code-coverage

在我们的开发环境中，我们有更多的构建脚本供 ant 执行多个不同构建作业的构建任务。

这些构建脚本有时会变得很大并且做很多事情并且基本上是它自己的源代码。

因此，在“TDD 世界”中，我们应该有源代码的单元测试和覆盖率报告。

我发现[AntUnit](http://ant.apache.org/antlibs/antunit/)和[BuildFileTest.java](http://svn.apache.org/repos/asf/ant/core/trunk/src/tests/junit/org/apache/tools/ant/BuildFileTest.java)用于进行单元测试。但是了解这些单元测试的代码覆盖率也会很有趣。

我一直在搜索谷歌，但没有找到任何东西。有人知道 Ant 构建脚本的代码覆盖工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:11:41.487

我最终使用 AntUnit 对 Ant Build 脚本进行单元测试。为了覆盖，我没有找到开箱即用的工具/库。我确实发现可以通过一些调整使用的是 Antro ( [https://sourceforge.net/projects/antro/](https://sourceforge.net/projects/antro/) )，其代码位于[https://github.com/jkff/antro](https://github.com/jkff/antro)。

Antro 是“Ant 分析器：Ant 构建脚本的行级分析器”

它使用侦听器来收集有关构建脚本运行的数据。

挑战在于尝试将 Antunit 和 Antro 一起使用，或者为 Antunit 制作一个可以与 Antro 一样收集数据的侦听器。

但话又说回来，这可能是我要做的一个有趣的挑战:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:11:39.193

我们使用 Cobertura。它工作正常，甚至可以覆盖分支。

见[http://cobertura.sourceforge.net/](http://cobertura.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T20:21:39.340

我建议查看[Sonar](http://www.sonarsource.org/)的单元测试和代码覆盖率报告。它还将运行标准的 Java 代码分析工具，如 Findbugs、Checkstyle 和 PMD。

抱歉，但我拥有的唯一 Stackoverflow 示例（启用代码覆盖率和单元测试报告的构建）使用 cobertura。使用更现代的工具是 jacoco。

*   [SONAR - 使用 Cobertura 测量代码覆盖率](https://stackoverflow.com/questions/7747587/sonar-measure-code-coverage-using-cobertura/7760960#7760960)

如需更多指导，建议您阅读 Sonar 文档。

# javascript - 如何在布局 mvc 上调用 javascript

> ID：13528570
> 
> 赞同：2
> 
> 时间：2012-11-23T11:50:52.137
> 
> 标签：javascript, asp.net-mvc, razor

我尝试在我的所有页面中运行一个基本的 javascript（在加载另一个 html 代码之前），然后我将我的 js 函数添加到 _Layout.cshtml 但不起作用（我不知道如何做正确的方法）。提前致谢。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title</title>
        <meta name="viewport" content="width=device-width" />
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        @Styles.Render("~/Content/mobileCss", "~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
        <script type="text/javascript">
            $(document).ready(function () {
                alert("Do something");
            });
        </script>
    </head>
    <body>

        <div data-role="page" data-theme="b">
            <div data-role="content">
                @RenderBody()
            </div>
        </div>

        @Scripts.Render("~/bundles/jquery", "~/bundles/jquerymobile")
        @RenderSection("scripts", required: false)
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T12:02:00.470

```
@Scripts.Render("~/bundles/jquery", "~/bundles/jquerymobile") 
```

必须在之前

```
 <script type="text/javascript">
        $(document).ready(function () { // JQuery not loaded here, $ is undefined
            alert("Do something");
        });
    </script> 
```

# vb.net - 如何在 VB.Net windows 应用程序中找到动态创建的控件？

> ID：13528579
> 
> 赞同：0
> 
> 时间：2012-11-23T11:51:14.603
> 
> 标签：vb.net, visual-studio-2010, visual-studio

我有一个`TableLayoutPanel`（有一行，三列）放置在表单上的 Panel 控件内。

我的表单也有一个命令按钮。每次单击按钮时，都会动态创建一个标签（在第一列中）、一个文本框（在第二列中）和一个按钮（在第三列中）。

我想执行如下操作：

当我单击按钮（在每行的第三列中）`LABEL+TEXTBOX+BUTTON`时，必须删除相关行，同时保留其他控件。

有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:08:53.297

您需要在单击按钮时参考其他两个控件

我的建议 - -

```
'craete a class to hold all controls in single object
Public Class MyCtls
    Public mLBL As Label
    Public mTXT As TextBox
    Public mBTN As Button

    Public Sub New(ByVal LBL As Label, ByVal TXT As TextBox, ByVal BTN As Button)
        MyBase.New()
        mLBL = LBL
        mTXT = TXT
        mBTN = BTN
    End Sub
End Class

'While creating new row create class reference and store it somewhere in accessed control
'For example we are using tag prosperity of button for this
'Now add handler for this button
Private Sub CreateNewRow()
    Dim nRow As MyCtls = New MyCtls(New Label, New TextBox, New Button)
    'set postition and add to parrent
    nRow.mBTN.Tag = nRow
    AddHandler nRow.mBTN.Click, AddressOf mBTN_Click
End Sub

'now for removing this row
Private Sub mBTN_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Dim thisRow As MyCtls = DirectCast(CType(sender, Button).Tag, MyCtls)
    'remove handler first
    RemoveHandler thisRow.mBTN.Click, AddressOf mBTN_Click

    'remove controls from its parent and dispose them
    yourparentcontrol.Controls.Remove(thisRow.mLBL)
    yourparentcontrol.Controls.Remove(thisRow.mTXT)
    yourparentcontrol.Controls.Remove(thisRow.mBTN)

    'dispose them all
    thisRow.mLBL.Dispose() 'do as this
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:02:10.010

我建议您创建自己的用户控件，该控件包含所有 3 个元素（标签、文本框、按钮），并在每次单击主按钮时添加此控件。然后，您可以将事件处理程序连接到单击“行”控件的按钮并从主窗体处理它。大致思路如下：

在您的用户控件中，您需要添加：

```
Public Event MyButtonClicked

Public Sub MyButtonClick() Handles MyButtonClick
    Raise Event MyButtonClicked(Me)
End Sub 
```

在主窗体上，您将拥有类似的东西

```
Public Sub CreateNewRow() Handles MainButton.Click
    Dim NewRow as New MyUserControl
    AddHandler NewRow.Click, AddressOf RemoveRow
    FlowLayoutPanel.Controls.Add(NewRow)
End Sub

Public Sub RemoveRow(ByRef Row as MyUserControl)
    FlowLayoutPanel.Controls.Remove(Row)
End Sub 
```

这将让您使用设计器来设计一行，您还可以在小的“行控件”中编写所有功能（如验证等），这将使您的代码更加简洁。

# java - 拖放 SWT 表列标题？

> ID：13528584
> 
> 赞同：1
> 
> 时间：2012-11-23T11:51:25.760
> 
> 标签：java, swt, eclipse-rcp, tableheader

我想在 eclipse rcp 框架中向表头添加拖动功能。据我所知，SWT 中根本不支持它，如果有的话，有人能告诉我怎么做吗？

如果没有，那么我想知道是否有办法模拟它，即检测标题上的拖动操作并强制拖动到管理该功能的任何服务。理想情况下，我希望看到该列在光标旁边被拖动，但只需更改光标即可。

这是一个允许用户从表中选择列的应用程序，虽然我有一个工作应用程序，但拖放将是锦上添花的成百上千，但我无法理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:05:11.697

我不认为默认支持将表格列拖放到另一个组件中。您必须使用 SWT 中的拖放支持来处理此问题。

请按照以下文章添加拖放支持

[http://www.eclipse.org/articles/Article-SWT-DND/DND-in-SWT.html](http://www.eclipse.org/articles/Article-SWT-DND/DND-in-SWT.html)

# java - 上传前检索视频文件的分辨率和持续时间

> ID：13528588
> 
> 赞同：0
> 
> 时间：2012-11-23T11:51:44.337
> 
> 标签：java, video, metadata

我想检索最终用户在我的站点中上传的视频文件的分辨率和持续时间，然后再将其上传到我的服务器。这样，我想检查分辨率和持续时间是否符合我的要求。经过许多 API，它们都只有在视频上传到服务器后才提供此元数据信息。我的服务器在 Linux 上运行，并且正在使用 Java、Struts。在上传视频文件之前，是否有任何 API 可以提供此信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:21:35.630

考虑通过 AJAX 将文件开头的一小部分上传到服务器端。在大多数文件格式中，50-100 KB 的数据就足够了（这个数字可以根据文件格式确定；在 FLV、AVI、MKV 文件中，甚至几 KB 就足够了）。然后服务器端可以使用[mediainfo](http://mediainfo.sourceforge.net/)、[xuggle](http://www.xuggle.com/)或plain ffmpeg 来获取尺寸和持续时间，并相应地允许或禁止客户端上传。

[这是一个教程](http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-slicing-files)，其中包含有关如何使用 HTML5 文件 API 仅发送文件的一部分的代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:47:19.777

您可以（现在）使用 HTML5 在客户端检查大小（和其他一些东西，但没有持续时间和分辨率，AFAIK）：

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

和

[使用 jQuery，在上传前限制文件大小](https://stackoverflow.com/questions/307679/using-jquery-restricting-file-size-before-uploading/9106313#9106313)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T20:24:12.070

在支持 HTML5 的浏览器上，您可以使用 MP4 解析器（例如[mp4.js](https://github.com/ukyo/mp4.js)）来解析文件头。

*   要获取文件持续时间，您需要找到`moov`文件的原子，并在其中找到`mvhd`原子。持续时间（以秒为单位）可以通过将`mvhd`的 Duration 字段除以 TimeScale 字段来计算。
*   要获得分辨率，您需要在`moov`原子内部找到`trak`视频轨道的原子（忽略音轨或其他轨道，如果您遇到它们；通常文件只有一个视频轨道），并在其中找到`tkhd`原子，它具有宽度和高度字段。

# select - html 两个在表单子句中选择，其中第二个选择值取决于第一个

> ID：13528589
> 
> 赞同：1
> 
> 时间：2012-11-23T11:51:48.733
> 
> 标签：select, conditional-statements, clause

我有一个小问题。如果可能在 html 中（在表单内）有两个选择列表选项，我想执行，其中第二个的选项值取决于您在第一个上尝试的内容。我不知道做两个选择是否是最好的方法，或者我应该用收音机来做。

我在这里有代码以获得更好的解释：

```
<select name="usuaris">
    <option value="select" selected="selected">Escull un grup de facturació</option>
    <option value="abonat">Facturació abonats</option>
    <option value="client">Facturació clients eventuals</option>
    <option value="valid">Facturació de transaccions validades</option>
</select>

<select name="temps">
    <option value="select" selected="selected">Escull un rang de temps</option>
    <option value="zero">Últimes 24 hores</option>
    <option value="un">Últim mes</option>
    <option value="dos">Últim trimestre</option>
    <option value="tres">Últim any</option>
    <option value="cuatre">Sempre</option>
</select> 
```

在这种情况下，如果您尝试在第一个选项中选择值“abonat”，则在第二个选项中应该只有“ultim mes”和“ultim any”选项。

任何人都知道该怎么做？也许我应该换成另一种格式（收音机？） o 用 jscript 可能而且很容易做到吗？

谢谢大家 ！

# extjs - ExtJS4 中是否可以使用永久链接？

> ID：13528590
> 
> 赞同：1
> 
> 时间：2012-11-23T11:51:49.890
> 
> 标签：extjs, extjs4

我有一个网络应用程序可以让用户查看报告数据。有时他们想与彼此分享他们发现的结果。

目前，他们必须告诉他们的同事他们必须点击和写什么才能获得相同的结果。

现在他们希望在 google-maps 中使用 perm-link 功能。他们做了很多klicks，添加了过滤器等等。

然后他们按下一个按钮，收到一个永久链接，当另一个用户打开它时，他会得到相同的结果。

我知道这是一个非常特定于应用程序的要求，我只想知道 extjs 的基本组件是否有任何基本机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:11:03.380

我认为这里复制煎茶示例的文字是错误的，所以参考。这是解决方案：[http ://docs.sencha.com/ext-js/4-1/#!/example/history/history.html](http://docs.sencha.com/ext-js/4-1/#!/example/history/history.html)

# python - Python POST 请求（网页抓取）

> ID：13528593
> 
> 赞同：1
> 
> 时间：2012-11-23T11:52:00.757
> 
> 标签：python, post, screen-scraping

我无法使用以下参数发出发布请求：

网站：www.zoover.it

这是我的代码：

```
import requests

Request_URL="http://www.zoover.it/services/Testimonials/TestimonialQueryService.asmx/AccommodationTestimonialQuery"
serviceRequest:{"CurrentLanguage":"Language_NL","PartyFilter":"","CurrentPage":"0","PageSize":"10","SortOption":"date-of-visit"}
pageContext:{"EntityLevel":"accommodation","NewEntityLevel":"accommodation","EntityId":151433,"EntityName":"Residence Belmonte Vacanze****","SemanticName":"accommodation-testimonials","PhysicalUrl":"/accommodation/testimonials.aspx","CurrentSiteVariation":"it","CmsAccommodationTypeFilter":"","PageCode":"accommodation","PageSubcode":"testimonials","CmsEntity":{"Level":1,"Id":151433},"NewCmsEntity":{"Level":{"EntityLevel":"accommodation"},"Id":151433},"Path":"/accommodation/testimonials.aspx","PageSemantic":{"SemanticName":"accommodation-testimonials","PhysicalUrl":"/accommodation/testimonials.aspx","KnownFriendlyParams":["accommodationId"],"HasFriendlyUrl":true},"EntityType":"Appartamento","PageRequestUrl":"/italia/toscana/montaione/residence-belmonte-vacanze/appartamento"}

r = requests.post(Request_URL, params=serviceRequest)

print r.text 
```

我有两个问题：

1）在 R.TEXT 中，我总是得到“HTTP 错误 411。请求必须分块或具有内容长度。”
2）我不知道如何用两个字典（serviceRequest和pageContext）做POST

我的目标是通过更改字典的参数来进行网络抓取。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:55:37.640

改用`data`关键字，内容长度将自动设置：

```
r = requests.post(Request_URL, data=serviceRequest) 
```

您必须将两个字典合二为一：

```
data = serviceRequest.copy()
data.update(pageContext)
r = requests.post(Request_URL, data=data) 
```

# sql-server - 运行 MSsql 查询类似于 foreach

> ID：13528594
> 
> 赞同：2
> 
> 时间：2012-11-23T11:52:01.853
> 
> 标签：sql-server

我有两张表，一张称为 Product，另一张称为 ProductVariant。ProductVariant 具有来自 Product 的 ID。我需要在两个表上做简单的操作。

这是我提出的查询：

```
declare @id int

declare cur CURSOR LOCAL for
select @id = ProductID  from Product WHERE (Published = '0')

open cur

fetch next from cur into @id 

while @@FETCH_STATUS = 0 BEGIN

UPDATE Productvariant SET Cost = SalePrice WHERE VariantID = @id;
UPDATE ProductVariant SET SalePrice = 0.00 WHERE VariantID = @id; 

fetch next from cur into @id 
END

close cur
deallocate cur 
```

但它给了我：Msg 154、Level 15、State 3、Line 4 变量赋值在游​​标声明中是不允许的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:00:23.617

你可以尝试类似的东西：

```
UPDATE ProductVariant SET Cost =SalePrice , SalePrice = 0.00
WHERE VariantID IN (SELECT productID FROM Product WHERE Published = '0') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:00:11.930

如果您正在学习如何使用游标，只需从选择中删除 @id - 您已经使用 fetch next.... 行获取该值。

```
declare cur CURSOR LOCAL for
select ProductID  from Product WHERE (Published = '0') 
```

但是应该使用比光标更好的另一种选择

```
declare @id int
declare @idTable as table(id int)

insert into @idTable
select ProductID  from Product WHERE (Published = '0')

while(exists(select top(1) id from @idTable)) 
begin
    select top(1) @id = id from @idTable

    UPDATE Productvariant SET Cost = SalePrice WHERE VariantID = @id;
    UPDATE ProductVariant SET SalePrice = 0.00 WHERE VariantID = @id; 

    delete top(1) from @idTable
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:57:38.160

前 4 行应该是：

```
declare @id int

declare cur CURSOR LOCAL for
select ProductID  from Product WHERE (Published = '0') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T11:58:44.727

我会做这样的事情。

[SQL小提琴](http://sqlfiddle.com/#!3/3e2e5/3)

**MS SQL Server 2008 架构设置**：

```
create table Product
(
  ProductID int,
  Published char(1)
);

create table ProductVariant
(
  VariantID int,
  Cost money,
  SalePrice money
);

insert into Product values
(1, '0'),
(2, '1'),
(3, '0')

insert into ProductVariant values
(1, 0, 10),
(1, 0, 11),
(2, 0, 20),
(2, 0, 21),
(3, 0, 30),
(3, 0, 31); 
```

**查询 1**：

```
UPDATE ProductVariant 
SET    Cost = SalePrice, 
       SalePrice = 0.00 
FROM   Product 
WHERE  Product.ProductID = ProductVariant.VariantID AND
       Product.Published = '0';

SELECT *
FROM ProductVariant; 
```

**[结果](http://sqlfiddle.com/#!3/3e2e5/3/0)**：

```
| VARIANTID | COST | SALEPRICE |
--------------------------------
|         1 |   10 |         0 |
|         1 |   11 |         0 |
|         2 |    0 |        20 |
|         2 |    0 |        21 |
|         3 |   30 |         0 |
|         3 |   31 |         0 | 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T12:03:11.547

```
declare cur CURSOR LOCAL for
select ProductID  from Product WHERE (Published = '0') 
```

您不需要，`select @id = ProductID`因为这就是 fetch 为您所做的。它获取的值`ProductID` 并将其放入`@id`

希望有帮助

# c# - 如何以编程方式保持自定义设置魅力弹出窗口打开？

> ID：13528598
> 
> 赞同：4
> 
> 时间：2012-11-23T11:52:18.693
> 
> 标签：c#, xaml, windows-8, windows-runtime

我在设置魅力中创建了一个自定义 AlarmSettingsPane，它允许用户给出时间并选择用于警报音的音频文件。所以我在设置魅力中实现了文件选择器。当我单击文件选择器按钮时，它会将我带到一个新的全屏，在那里我可以选择我的文件，但是当我选择一个文件并打开它时，被定向到我的主屏幕但是设置魅力弹出窗口被关闭。如何保留 AlarmSettingsPane 浮出控件的状态并防止它以编程方式关闭？就像设置弹出窗口应该包含与我选择文件之前相同的关于警报的 imfo。

SettingsPane.Show() 打开设置超级按钮，但不会转到我在标准设置弹出窗口中创建的警报设置。

如果您有任何想法，请告诉我。谢谢

这是我的文件选择器按钮单击事件的代码

```
 private async void PickAFileButton_Click(object sender, RoutedEventArgs e)
    {
        FileOpenPicker openPicker = new FileOpenPicker();
        openPicker.ViewMode = PickerViewMode.List;
        openPicker.SuggestedStartLocation = PickerLocationId.MusicLibrary;
        openPicker.FileTypeFilter.Add(".mp3");
        openPicker.FileTypeFilter.Add(".wma");

        StorageFile file = await openPicker.PickSingleFileAsync();
        if (file != null)
        {
            // Application now has read/write access to the picked file
            CustomSound.Text = file.Name;                

        }
        else
        {
            CustomSound.Text = "Operation cancelled.";
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:51:02.440

我所做的是在调用 Picker 之前获取 UserControl.Parent 的副本并将其本地存储在函数中，这可以防止 UI 处理程序将其标记为收集，并且在选择器返回后，然后选择父 IsOpen 回到 true .

例如：

```
private function ()
{
    Popup popup = this.Parent as Popup;

    Picker Code

    popup.IsOpen = true;
} 
```

它可能不是书中最好的，但它确实运作良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:41:36.083

查看将弹出/弹出窗口的 IsLightDismissEnabled 属性设置为 false 是否可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:02:19.593

您可以尝试模仿 PLM（流程生命周期管理）代码，以便在卸载 AlarmSettingsPane 时保存页面内容，并在重新加载时重建控件的状态。您可以在 VS Split 或 Grid 模板的 layoutawarepage 中找到一些示例代码。

问候，

# java - 骆驼; 简单的 seda 到 bean 路由不起作用

> ID：13528599
> 
> 赞同：0
> 
> 时间：2012-11-23T11:52:23.890
> 
> 标签：java, asynchronous, apache-camel, producer-consumer

我是 Camel 的新手，正在尝试设置一个非常简单的应用程序来习惯它，我正在运行以下代码：

```
CamelContext cc = (CamelContext)ac.getBean("testCamelContext");
ProducerTemplate template = cc.createProducerTemplate();
System.out.println("Sending Message Body");
template.sendBody("seda:testProducer", "hello");
System.out.println("Sent"); 
```

运行良好，但我的消费者似乎从未收到消息，我在控制台上得到以下信息：

```
[                          main] SpringCamelContext             INFO  Apache Camel 2.10.2 (CamelContext: testCamelContext) is starting
[                          main] ManagementStrategyFactory      INFO  JMX enabled.
[                          main] DefaultTypeConverter           INFO  Loaded 172 type converters
[                          main] SpringCamelContext             INFO  Route: route1 started and consuming from: Endpoint[seda://testProducer]
[                          main] ultManagementLifecycleStrategy INFO  StatisticsLevel at All so enabling load performance statistics
[                          main] SpringCamelContext             INFO  Total 1 routes, of which 1 is started.
[                          main] SpringCamelContext             INFO  Apache Camel 2.10.2 (CamelContext: testCamelContext) started in 0.373 seconds
Init Context
SendingMessage
Sending Message Body
Sent 
```

使用以下骆驼上下文：

```
<camel:camelContext id="testCamelContext">
    <camel:routeBuilder ref="testCamelRouteBuilder"/>
</camel:camelContext> 
```

和 RouteBuilder 规则：

```
from("seda:testProducer").beanRef("testConsumer","consumeMessage"); 
```

以及以下消费者 bean：

```
public class TestConsumer {
    public void consumeMessage(String msg)
    {
        System.out.println("Message: " + msg);
    }
} 
```

所有的豆子都很好，骆驼似乎可以检测到规则，所以我不确定我做错了什么。我显然没有正确使用某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:23:51.057

意识到错误；因为 seda 是异步的，所以主线程在消费者线程有机会接收消息之前就完成了。添加了一个 thread.sleep() 并且它运行良好。

# c - 从c中的函数返回数组

> ID：13528600
> 
> 赞同：0
> 
> 时间：2012-11-23T11:52:33.870
> 
> 标签：c, arrays

我有点困惑。请查看以下程序：

```
#include<stdio.h>
void display (int *j, int *k);

int main()
{
    int num1[]={1,2,3,4,5};
    int num2[5];
    int i;
    display (num1,num2);
    for (i=0;i<=4;i++)
        printf("%d,", num2[i]);
    return 0;
}

void display (int *j, int *k)
{
    int l;  
    for (l=0;l<=4;l++)
    {
        k=j;
        printf("%d,", *k);
        j++;
        k++;        
    }

} 
```

在此`printf("%d,", num2[i]);`不给数组。但是当我们`*k=*j;`输入函数时它就起作用了。你能解释一下为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:58:10.523

`k=j`将指针分配给指针`k`的值（指向的地址）`j`。这会切换数组 (`num1`或`num2`)`k`指向的位置，但不会更改任何数组元素的值。

`*k=*j`将指向的数组元素设置为`k`指向的数组元素的值`j`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:00:42.970

`k = j;`意思是“将存储的`j`值赋值为”的语句`k`，只需将存储的值复制`j`到`k`。它对数组没有任何作用，只是指针指向.`k`指向的地址`j`。赋值和增量只影响局部变量`j`和`k`，没有别的。

当您编写`*k = *j;`时，它本质上意味着“将地址的内容分配`j`给地址`k`”，它进行复制和递增`j`并将`k`它们指向下一个数组元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:55:39.170

因为您还没有初始化数组`num2`，也没有从`num1`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:59:05.243

`*k = *j`将“单元格”`j`指向的内容复制到单元格`k`指向的位置。反之，`k = j`点`k`到哪里`j`点。如果您考虑这一点，`k = j`那就错了，因为您没有更改数组的内容，而只是更改了局部变量`k`。因此，在您的示例中，内部的 print 语句`display`实际上不是 print `num2`，而是`num1`（在 print 语句的点，`k`指向与 dos 相同的位置`j`，它是 的元素`num1`）。

# objective-c - NULL 字典不评估为 NULL

> ID：13528602
> 
> 赞同：0
> 
> 时间：2012-11-23T11:52:36.647
> 
> 标签：objective-c

我有一个类，其中包含用于进行网络调用的字典。基本上，如果网络调用需要任何值，键值对用于创建将发布到 URL 的数据。此对象类是使用 JSON 设置的。

我有一个方法，它采用这个类对象并使用它来设置网络调用。我的问题是，如果不需要参数，则将字典设置为 null 这很好，这就是我想要的，但是由于某种原因，当我执行 if 语句来检查字典是否为 null 时，它正在命中 else声明它不为空。方法看起来像这样

```
-(void)webCall :(WebServiceCall *)webCall_p
{

    //Creates a dictionary from the one stored in the WebResponse Class
    NSMutableDictionary *dict = [[webCall_p getWebServiceResponse] getVariablesByRegexMap];

    NSLog(@"%@", dict);
} 
```

当我打印出来时，我得到了这个

```
<null> 
```

然而，如果我输入一个 if 语句来检查它是否为 null 像这样

```
 if(dict == NULL)
    {
        NSLog(@"NULL");
    }
    else
    {
        NSLog(@"Not NULL");
    } 
```

它说不为空。如果我尝试使用 dict count 命令，就像这样

```
NSLog(@"%i", [dict count]); 
```

应用程序崩溃并出现此错误

> -[NSNull 计数]：无法识别的选择器发送到实例 0xaf8678 2012-11-23 11:48:44.005 测试 [3403:14003] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[NSNull 计数]：无法识别的选择器发送到实例 0xaf8678'

我这辈子都想不通。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:58:41.810

显然值是 NSNull，它是一个对象，而不是 nil。NSNull 是一个单例`if (dict == NSNull)`应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:05:13.900

用这个

```
if ([dict isKindOfClass:[NSNull class]]){

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:57:09.793

您需要使用 nil 而不是 NULL。

```
 if (dict == nil) 
```

...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:01:39.207

首先，如果您想检查是否存在 - 然后检查`nil`，而不是`NULL`

```
if (dict) { // or (dict == nil) 
   // do something
} 
```

其次，使用正确的格式化程序`NSLog`，`%d`而不是`%i`.

# forms - 如何在 Symfony2 表单中使用现有实体？

> ID：13528606
> 
> 赞同：2
> 
> 时间：2012-11-23T11:52:38.977
> 
> 标签：forms, symfony, nested-forms, symfony-forms, tagging

我有这两个实体：

```
class Article
{
    /** @var ArrayCollection
    protected $tags;
}

class Tag
{
    protected $id;
    protected $name;
} 
```

基本上我已经阅读了[http://symfony.com/doc/master/cookbook/form/form_collections.html](http://symfony.com/doc/master/cookbook/form/form_collections.html)但它并没有解释我的情况。

让我解释。

我在数据库中有现有的标签，所以我希望能够将多个标签与我的文章相关联，我不想允许创建不存在的标签。

由于我的目标是在 REST api 和 Web 表单中使用我的表单，我希望我的客户能够使用`id`only 来引用标签（之前已经获取过）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:39:13.240

你可以使用这样的东西：

```
$builder->add('tags', 'entity', array(
    'class' => 'AcmeHelloBundle:tag',
    'expanded' => true,
    'multiple' => true,
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:41:51.137

您可以使用[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html)e。它实际上是一种*选择字段类型*，您可以将其呈现为具有多项选择的选择或*复选框**列表*。但是，如果您有很多标签，则会有太多选项，用户不会高兴。

所以，我建议实现一个**类似 Stackoverflow 的**标记系统。

我在一个项目中通过使用 Javascript tokeninput 库来做到这一点，就像[loopj 这样](https://github.com/loopj/jquery-tokeninput)。在实践中：

1.  您应该首先呈现一个名为`tags`.

2.  然后，您应该使用用于令牌处理的 Javascript 库处理向该输入字段的标记插入。

3.  Controller 将收到一个标记化的字符串，您必须处理该字符串才能`Tag`从 Doctrine 中检索实体。

4.  最后，检索`Tag`实体列表，将它们分配给您的`Article`实体并刷新所有内容。

# c# - 二维数组 ext.net 网格视图

> ID：13528607
> 
> 赞同：4
> 
> 时间：2012-11-23T11:52:54.230
> 
> 标签：c#, multidimensional-array, ext.net

我有一个二维数组

```
 for (int i = 0; i < rowList.GetLength(0);  i++)
        {
            for (int j = 0; j < rowList.GetLength(1); ++j)
            {
                System.Diagnostics.Debug.WriteLine(rowList.GetValue(i,j));

            }
        } 
```

我怎样才能在一个`ext.net` `gridPanel`

我在 aspx 页面中有这样的代码：

```
 <ext:GridPanel ID="GridPanel1" runat="server" Title="SLA-Einhaltung gesamt in % (Basis) " Height="200" Width="800" Frame="true">
        <Store>
            <ext:Store runat="server" ID="Store1">
                <Model>
                    <ext:Model runat="server" IDProperty="ModelID">
                        <Fields>
                            <ext:ModelField Name="SLA_typ"></ext:ModelField>
                        </Fields>
                    </ext:Model>
                </Model>
            </ext:Store>
        </Store>

        <ColumnModel runat="server">
            <Columns>
                <ext:Column runat="server" DataIndex="SLA_typ" Width="120" Text="Tittle"></ext:Column>
            </Columns>
        </ColumnModel>
      </ext:GridPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:28:23.530

我不知道 ext.net gridPanel。但我查了一下，发现示例[http://examples.ext.net/#/GridPanel/ArrayGrid/Simple/](http://examples.ext.net/#/GridPanel/ArrayGrid/Simple/)该示例使用锯齿状数组，而不是二维数组。锯齿状数组是数组的数组。

我对 WPF-grid 有同样的问题，解决方案是创建一个锯齿状数组。所以我会尝试一个锯齿状的数组。这就是你可以从你的`rowList`数组创建一个锯齿状数组的方法。

```
object [][] jagged = new object[rowList.GetLength(0)][];

    for (int i = 0; i < rowList.GetLength(0);  i++)
    {
        jagged[i] = new object[GetLength(1)];

        for (int j = 0; j < rowList.GetLength(1); ++j)
        {
           jagged[i][j] = rowList[i,j];

        }
    } 
```

# java - 表单标签内的 ${webappRoot}

> ID：13528610
> 
> 赞同：0
> 
> 时间：2012-11-23T11:53:01.990
> 
> 标签：java, jsp, spring-mvc

我正在尝试将 webapproot 值注入到这样的弹簧形式中

```
<form:form action="${webappRoot}/user/create" commandName="createUsr" method="POST"> 
```

但是，这不起作用。所以现在这可以代替：

```
<form:form action="/Manual/user/create" commandName="createUsr" method="POST"> 
```

我的应用程序名称是 Manual，因此它适用于第二种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:10:13.280

尝试`${pageContext.request.contextPath}`

# perl - 主机不可访问时的 Perl ssh 错误处理

> ID：13528611
> 
> 赞同：2
> 
> 时间：2012-11-23T11:53:09.923
> 
> 标签：perl, networking, ssh, expect

我在 perl 中使用 expect 来做 ssh，下面是我的代码片段。

```
my $exp = Expect->spawn("ssh renjithp\@192.168.1.12") or die "could not spawn ssh";
my $op = $exp->expect(undef,'renjithp>');
print "*$op*"; 
```

如果主机不可访问（目标 IP 已关闭），我想处理该错误，我的印象是当 ip 不可访问时会发生死机，但是当我给出错误的 IP 时，脚本不会终止并且它会连续执行。

处理这种情况的正确方法是什么？

已编辑我观察到 $op 值在 ssh 成功时为 1，而在目标 IP 未启动时为 0。使用 $op 做出决定是正确的方法吗？

我还有一个疑问，当无法访问目标 IP 时，为什么控制超出预期，我的意思是 '$exp->expect(undef,'renjithp>');' 只有在得到正确提示后才应该返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:51:12.697

使用 Net::OpenSSH：

```
use Net::OpenSSH;

my $ssh = Net::OpenSSH->new($host, timeout => 30);
if ($ssh->error) {
    die "Unable to connect to remote host: " . $ssh->error;
}
my $out = $ssh->capture($cmd);
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:14:44.223

如果您需要使用 expect 模块使 ssh 连接取决于 IP 地址的可访问性，您应该`nc`首先测试连接...

```
my $addr = "192.168.1.12";
if (system("nc -w 1 -z $addr 22")==0) {
    my $exp = Expect->spawn("ssh renjithp\@$addr") or die "could not spawn ssh";
    my $op = $exp->expect(undef,'renjithp>');
    print "*$op*";
} else {
    print "Host $addr is unreachable\n";
} 
```

`nc`命令是[`netcat`](http://netcat.sourceforge.net/)...测试`nc -z`TCP 端口是否打开

或者，您可以使用这样的模块`Net::OpenSSH`，使错误处理更容易一些......

```
use Net::OpenSSH;

my $ssh = Net::OpenSSH->new($host);
$ssh->error and
   die "Couldn't establish SSH connection: ". $ssh->error; 
```

# jquery - jQuery Mobile 未设置动态附加按钮的样式

> ID：13528612
> 
> 赞同：2
> 
> 时间：2012-11-23T11:53:11.417
> 
> 标签：jquery, button, html, dynamic

我正在使用 JQuery 和 jQM 以编程方式将 li 添加到 ul 以下代码有效，它添加了 li 和一个普通的 jQM 外观按钮

```
$('#ul_edit_users')
   .append("<li>"+
      " <a href='#' data-role='button' data-theme='c'>Delete</a>"+
       "</li>");
$('#ul_edit_users').listview('refresh'); 
```

然而，当我添加逻辑将 LI 分成两行时，我失去了“按钮”功能，它只是变成了一个普通的蓝色“href”。

```
$('#ul_edit_users')
.append("<li>"+
        "<div class='ui-grid-a'>"+
    " <div class='ui-block-a'>"+
    "  <h2 >Name</h2>"+
    " </div>"+
    " <div class='ui-block-b'>"+
    "  <a href='#' data-role='button' data-theme='c'>Delete</a>"+
    " </div>"+
    "</div>"+
    "</li>");
  $('#ul_edit_users').listview('refresh'); 
```

如果我将该代码作为常规 html 放入文件中，那么它可以正常工作，我认为 jquery 不喜欢动态添加它。

非常欢迎任何想法，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:25:44.487

您需要`.trigger('create')`在要插入的新部分上生成按钮等，然后`.listview('refresh')`更新列表。

```
$('#add').click(function() {
    $new = $("<li><div class='ui-grid-a'><div class='ui-block-a'><h2 >Name</h2></div><div class='ui-block-b'><a href='#' data-role='button' data-theme='c'>Delete</a></div></div></li>");

    $('#ul_edit_users').append($new);

    $new.trigger('create');

    $('#ul_edit_users').listview('refresh');
});
​ 
```

[http://jsfiddle.net/trapper/TyEDz/1/](http://jsfiddle.net/trapper/TyEDz/1/)

# asp.net-mvc - 关闭 Javascript 时不会出现 ASP.NET MVC 4 服务器验证

> ID：13528613
> 
> 赞同：0
> 
> 时间：2012-11-23T11:53:16.383
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

在我的模型类中给出了各种验证，如 [Required]、[StringLength] 等，但这些服务器端验证消息仅在浏览器中打开 Javascript 时出现。

在禁用 Javascript 时，这些服务器端验证似乎都不起作用，我无法弄清楚为什么会这样。

有人可以指导我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:56:13.530

在您的控制器中，您可以询问您发布的模型是否有效：

```
[HttpPost]
public ActionResult Index(MyModel model)
{
    if(ModelState.IsValid)
    {
        // some persistence logic
        return RedirectToAction("Index");
    }

    ViewBag.Error("there were some errors in your form.");

    return View(model);
} 
```

需要明确的是，这种行为服务器端完全不受客户端 javascript 设置的影响。客户端的设置只能允许或阻止表单提交到您的控制器。

# php - 强制 composer.json 导出供应商存储库而不是克隆

> ID：13528617
> 
> 赞同：3
> 
> 时间：2012-11-23T11:53:27.770
> 
> 标签：php, git, symfony

我正在使用 Symfony2 进行 PHP 开发，它是一个很棒的框架。

我现在用它来制作可靠的模板来制作我的新网络应用程序。（建立在 symfony2 之上的公司框架）。

我遇到了供应商库的问题。我正在使用 git 来托管我的项目，并且当我在 composer.json 中输入依赖项并调用更新时，它会克隆整个存储库，以及每个库的完整历史记录。更糟糕的是，这些存储库是我的主存储库的子存储库，这些库中的文件不会提交。尝试在另一台计算机上克隆项目后，由于缺少供应商库，它将无法工作。我只想强制作曲家导出存储库的内容而不是克隆它。我想要纯文件，而不是存储库。

我当然可以永远使用 composer.json，但我想让我的样板文件正常工作，即使 github 会停止工作。另一个原因是，我正在从两台不同的机器上编辑这个项目，并且我需要存储库中项目中的所有文件，每天调用 2 次 composer.json 更新并每次等待 5 分钟，这并不好笑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:57:25.300

您正在寻找的可能是`--prefer-dist`下载 zip（如果可用）而不是存储库的选项，然后您可以提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T01:16:03.953

Within your repository, you're committing composer.json file that will tell the composer install needed dependencies. There is no need to commit vendor/* folder and enlarge your repository size. The cleaner way: All the developers that checkout your repository should run composer update to download missing files. And your deploy scripts should run a composer update after deploying.

Please read: [https://getcomposer.org/doc/faqs/should-i-commit-the-dependencies-in-my-vendor-directory.md](https://getcomposer.org/doc/faqs/should-i-commit-the-dependencies-in-my-vendor-directory.md)

# sql - 使用 sqldeveloper 为多个索引生成 SQL

> ID：13528618
> 
> 赞同：0
> 
> 时间：2012-11-23T11:53:31.777
> 
> 标签：sql, database, oracle, oracle-sqldeveloper, database-indexes

我最近将一个 Oracle 数据库导出到一个新环境。不幸的是，许多索引未能创建。我想知道是否有一种方法可以为各种这些生成 sql。

例如，我知道如果您选择一个表并单击顶部列表中的“SQL”选项卡，它将自动生成 sql 输出。（见屏幕截图）但是，我需要为大多数（如果不是全部）整个数据库执行此操作。这是我最感兴趣的索引。

[http://i.imgur.com/dpcsE.jpg](http://i.imgur.com/dpcsE.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:06:00.467

在源数据库上使用 dbms_metadata，您可以为您感兴趣的所有索引生成 DDL 语句：

```
select dbms_metadata.get_ddl('INDEX', index_name) from user_indexes 
```

这将为您提供当前连接用户的所有索引的 DDL 语句；如果您想要所有用户的索引，请改用 all_indexes / dba_indexes （后者需要特殊权限）。

# cakephp - 在模型中设置来自 beforeDelete() 的 flash 消息 - CakePHP

> ID：13528620
> 
> 赞同：1
> 
> 时间：2012-11-23T11:53:31.810
> 
> 标签：cakephp

我正在尝试检查用户尝试删除的记录是否有任何附加记录（在这种情况下是附加费用索赔的用户）。我可以使用 beforeDelete() 模型函数来做到这一点。但是，如果找到记录并且不允许删除，我想传回一条闪存消息，但我只是收到以下错误：

```
Fatal error: Call to a member function setFlash() on a non-object in... 
```

这是我的代码：

```
public function beforeDelete($cascade  = false) {

    $count = $this->ExpenseClaim->find("count", array(
        'conditions' => array('ExpenseClaim.user_id' => $this->id)
    ));

    if ($count == 0) {
        return true;
    } else {
        $this->Session->setFlash('User cannot be deleted as they have ' . $count . 'number of expenses claims already in the system');
        return false;
    }

} 
```

有人能指出我正确的方向吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:36:38.083

您应该在控制器上检查无法删除用户并从那里设置闪存消息。

如果无法删除用户，您将`false`在模型中返回，这很简单：`User`

```
if(!$this->User->delete($id){
     $this->Session->setFlash('User cannot be deleted');
}else{
    //....
} 
```

如果您想向用户提供有关原因的更多详细信息，我建议您在`User`模型中创建一个函数来检查要删除的用户声明的数量。

这样，您可以在控制器中执行以下操作：

```
if($count = $this->User->getClaims($id)){
    $this->Session->setFlash('User cannot be deleted as they have ' . $count . 'number of expenses claims already in the system');
    $this->redirect(array('controller' => 'User', 'action' => 'index'));

} 
```

在你的`User`模型中有这个：

```
public function getClaims($id){
    return $this->ExpenseClaim->find("count", array(
    'conditions' => array('ExpenseClaim.user_id' => $this->id)
));
} 
```

虽然直接调用`ExpenseClaim`模型会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T08:38:30.987

在模型中设置来自 beforeDelete() 的 flash 消息

```
public function beforeDelete($cascade  = false) {
//count query
$count = $this->ExpenseClaim->find("count", array(
    'conditions' => array('ExpenseClaim.user_id' => $this->id)
));
//count checking
if ($count == 0) {
    return true;
} else {
    //custom flash message 
    SessionComponent::setFlash('User cannot be deleted as they have ' . $count . 'number of expenses claims already in the system');
    return false;
}

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-26T13:46:02.687

@motsmanish 答案与最佳实践一致，因为它将防止删除的代码放在它所属的位置 - 在模型中，在 CakePHP 中，这属于 beforeDelete() 方法。为了增强这一点，您可以在尝试删除的控制器中的方法中引用 Session flash 消息：

```
//e.g. in UserController.php, within public function delete($id){...}

if(!$this->User->delete($id)) {
    if(!$this->Session->check('Message.flash')) {
        $this->Session->setFlash(__('The User could not be deleted'));
    }
} else {
//success stuff
} 
```

这样做的目的是允许在 beforeDelete() 中设置的 flash 消息如果存在则持续存在，但如果由于其他原因删除失败，则提供不同的消息。

# javascript - jQuery UI DatePicker 仅显示年份

> ID：13528623
> 
> 赞同：22
> 
> 时间：2012-11-23T11:53:49.917
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jQuery datepicker 来显示日历。我想知道我是否可以使用它来仅显示**“年份”**而不是完整日历？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-01-23T12:28:03.043

** `NOTE :` **如果有人反对“为什么我现在回答这个问题！” 因为我尝试了这篇文章的所有答案，但没有任何解决方案。所以我尝试了我的方法并得到了解决方案，所以我分享给下一个来者****

HTML

```
<label for="startYear"> Start Year: </label>
  <input name="startYear" id="startYear" class="date-picker-year" /> 
```

jQuery

```
 <script type="text/javascript">
        $(function() {
            $('.date-picker-year').datepicker({
                changeYear: true,
                showButtonPanel: true,
                dateFormat: 'yy',
                onClose: function(dateText, inst) { 
                    var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                    $(this).datepicker('setDate', new Date(year, 1));
                }
            });
        $(".date-picker-year").focus(function () {
                $(".ui-datepicker-month").hide();
            });
        });

</script> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-23T11:59:10.580

```
 $(function() {
    $('#datepicker1').datepicker( {
        changeMonth: true,
        changeYear: true,
        showButtonPanel: true,
        dateFormat: 'MM yy',
        onClose: function(dateText, inst) { 
            var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
            var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
            $(this).datepicker('setDate', new Date(year, month, 1));
        }
    });
});​ 
```

风格应该是

```
.ui-datepicker-calendar {
    display: none;
    }​ 
```

[工作演示](http://jsfiddle.net/AeEJs/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-02-02T19:06:21.850

2018年，

```
$('#datepicker').datepicker({
    format: "yyyy",
    weekStart: 1,
    orientation: "bottom",
    language: "{{ app.request.locale }}",
    keyboardNavigation: false,
    viewMode: "years",
    minViewMode: "years"
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-11-04T11:19:00.933

你可以使用这个[引导日期选择器](https://www.malot.fr/bootstrap-datetimepicker/)

```
$("your-selector").datepicker({
    format: "yyyy",
    viewMode: "years", 
    minViewMode: "years"
}); 
```

> “你的选择器”你可以使用 id(#your-selector) 或类(.your-selector)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-03-08T00:54:46.723

我有同样的问题，经过一天的研究，我想出了这个解决方案：http: [//jsfiddle.net/konstantc/4jkef3a1/](http://jsfiddle.net/konstantc/4jkef3a1/)

```
// *** (month and year only) ***
$(function() { 
  $('#datepicker1').datepicker( {
    yearRange: "c-100:c",
    changeMonth: true,
    changeYear: true,
    showButtonPanel: true,
    closeText:'Select',
    currentText: 'This year',
    onClose: function(dateText, inst) {
      var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
      var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
      $(this).val($.datepicker.formatDate('MM yy (M y) (mm/y)', new Date(year, month, 1)));
    }
  }).focus(function () {
    $(".ui-datepicker-calendar").hide();
    $(".ui-datepicker-current").hide();
    $("#ui-datepicker-div").position({
      my: "left top",
      at: "left bottom",
      of: $(this)
    });
  }).attr("readonly", false);
});
// --------------------------------

// *** (year only) ***
$(function() { 
  $('#datepicker2').datepicker( {
    yearRange: "c-100:c",
    changeMonth: false,
    changeYear: true,
    showButtonPanel: true,
    closeText:'Select',
    currentText: 'This year',
    onClose: function(dateText, inst) {
      var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
      $(this).val($.datepicker.formatDate('yy', new Date(year, 1, 1)));
    }
  }).focus(function () {
    $(".ui-datepicker-month").hide();
    $(".ui-datepicker-calendar").hide();
    $(".ui-datepicker-current").hide();
    $(".ui-datepicker-prev").hide();
    $(".ui-datepicker-next").hide();
    $("#ui-datepicker-div").position({
      my: "left top",
      at: "left bottom",
      of: $(this)
    });
  }).attr("readonly", false);
});
// --------------------------------

// *** (year only, no controls) ***
$(function() { 
  $('#datepicker3').datepicker( {
    dateFormat: "yy",
    yearRange: "c-100:c",
    changeMonth: false,
    changeYear: true,
    showButtonPanel: false,
    closeText:'Select',
    currentText: 'This year',
    onClose: function(dateText, inst) {
      var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
      $(this).val($.datepicker.formatDate('yy', new Date(year, 1, 1)));
    },
    onChangeMonthYear : function () {
      $(this).datepicker( "hide" );
    }
  }).focus(function () {
    $(".ui-datepicker-month").hide();
    $(".ui-datepicker-calendar").hide();
    $(".ui-datepicker-current").hide();
    $(".ui-datepicker-prev").hide();
    $(".ui-datepicker-next").hide();
    $("#ui-datepicker-div").position({
      my: "left top",
      at: "left bottom",
      of: $(this)
    });
  }).attr("readonly", false);
});
// --------------------------------
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />

<div class="container">

  <h2 class="font-weight-light text-lg-left mt-4 mb-0"><b>jQuery UI Datepicker</b> custom select</h2>

  <hr class="mt-2 mb-3">
  <div class="row text-lg-left">
    <div class="col-12">

      <form>

        <div class="form-label-group">
        <label for="datepicker1">(month and year only : <code>id="datepicker1"</code> )</label>
          <input type="text" class="form-control" id="datepicker1" 
                 placeholder="(month and year only)" />
        </div>

        <hr />

        <div class="form-label-group">
        <label for="datepicker2">(year only : <code>input id="datepicker2"</code> )</label>
          <input type="text" class="form-control" id="datepicker2" 
                 placeholder="(year only)" />
        </div>

        <hr />

        <div class="form-label-group">
        <label for="datepicker3">(year only, no controls : <code>input id="datepicker3"</code> )</label>
          <input type="text" class="form-control" id="datepicker3" 
                 placeholder="(year only, no controls)" />
        </div>

      </form>

    </div>
  </div>

</div>
```

我知道这个问题已经很老了，但我认为我的解决方案可以对遇到这个问题的其他人有用。希望能帮助到你。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-28T10:52:34.163

试试这个：
在html下面添加

```
<input type="text" id="datepicker"/> 
```

在js文件中添加

```
$(function() {
   $( "#datepicker" ).datepicker({dateFormat: 'yy',  changeYear: true,  changeMonth: false});
}); 
```

在css中添加

```
.ui-datepicker-calendar {
       display: none;
    }
    .ui-datepicker-month {
       display: none;
    }
    .ui-datepicker-prev{
       display: none;
    }
    .ui-datepicker-next{
       display: none;
    } 
```

[工作演示](http://jsfiddle.net/xzLbdtx5/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-12-27T09:09:43.203

将此代码用于 jquery 时间选择器。

```
$(function() { 
   $('#datepicker1').datepicker( {
        changeMonth: false,
        changeYear: true,
        showButtonPanel: false,
        dateFormat: 'yy',
        onClose: function(dateText, inst) { 
              $(this).datepicker('setDate', new Date('2017'));
        }
    }).focus(function () {
                $(".ui-datepicker-month").hide();
                $(".ui-datepicker-calendar").hide();
            });
});
```

```
<script src="https://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="https://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />

<input type="text" id="datepicker1"/>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-23T11:57:01.617

您可以为此使用 dateFormat 属性，例如：

```
$('#datepicker').datepicker({ dateFormat: 'yy' }) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-07-15T11:01:25.233

试试这段代码，它对我有用：

```
$('#year').datepicker({
    format: "yyyy",
    viewMode: "years",
    minViewMode: "years"
}); 
```

我希望它也能为你创造奇迹。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-23T12:02:34.563

查看这个 jquery[日历](http://jquerybyexample.blogspot.com/2012/06/show-only-month-and-year-in-jquery-ui.html)以仅显示年份和月份

或类似的东西

```
$("#datepicker").datepicker( "option", "dateFormat", "yy" );​ 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-23T12:07:32.953

尝试这种方式，它将隐藏日历并仅显示年份

```
$(function() {
    $( "#datepicker" ).datepicker({dateFormat: 'yy'});
    });​ 
```

CSS

```
.ui-datepicker-calendar {
   display: none;
} 
```

[演示](http://jsfiddle.net/vW8zc/) ​</p>

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-20T11:06:57.037

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Styling links</title>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<style type="text/css">
hr{ 
    margin: 2px 0 0 0;
}
a{
    cursor:pointer;
}
#yearBetween{
    margin-left: 67px;
}

</style>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="YearPicker.js"></script>
</head>
 <body>
   <div class="form-group col-sm-8" style="display:inline-flex;">
    <div style="display:inline-flex;">
        <label class="col-sm-4">Select Year</label>
        <input type="text" id="txtYear1" class="form-control cols-sm-2"/>
        <img id="yearImage" src="https://cdn4.iconfinder.com/data/icons/VISTA/accounting/png/400/calendar_year.png" style="cursor: pointer;width:50px; height:35px;"></img>
    </div>
    <div id="divYear1" style="display:none;border: 0.5px solid lightgrey; height:auto;">
    <div style="background:lightgrey;height: 12%;">
        <a id="btnPrev1" class="btnPrev glyphicon glyphicon glyphicon-menu-left" style="float:left;margin: 4px;"></a>
        <input style="text-align: center; width: 43%; border: none; margin-left: 20%;" type="text" id="yearBetween" class="btn-default"/>
        <a id="btnNext1" class="btnNext glyphicon glyphicon glyphicon-menu-right" style="float:right;margin: 4px;"></a>
    </div>
    <hr/>
    <div id="yearContainer" style="width:260px; height:auto;">
    </div>
</div>
</div>
 </body>
</html> 
```

# // 将上面给定的 html 粘贴到 .html 文件中，然后将给定的 jquery 代码粘贴到 .js 文件中#，您可以使用自定义 jquery、html 和 css 年份选择器。

```
 $(document).ready(function(){
    // initial value of the start year for the dynamic binding of the picker.
    var startRange = 2000;

    // given the previous sixteen years from the current start year.
    $(".btnPrev").click(function(){
        endRange = startRange;
        startRange = startRange - 16;
        $("#yearBetween").text('');
        // finding the current div
        var container = event.currentTarget.nextElementSibling.parentElement.nextElementSibling.nextElementSibling;
        // find the values between the years from the textbox in year picker.
        createButtons(container);
        //bind the click function for the dynamically created buttons.
        bindButtons();
        var rangeValues = startRange+ " - "+(endRange-1) ;
        $("#yearBetween").val(rangeValues);
    });

    // given the next sixteen years from the current end year.
    $(".btnNext").click(function(){
        startRange = endRange;
        endRange = endRange + 16;
        //clearing the cuurent values of the picker 
        $("#yearBetween").text('');
        // finding the current div
        var container = event.currentTarget.parentElement.nextElementSibling.nextElementSibling;
        createButtons(container);
        //bind the click function for the dynamically created buttons.
        bindButtons();
        // find the values between the years from the textbox in year picker.
        var rangeValues = startRange+ " - "+(endRange-1) ;
        // writes the value in textbox shows above the button div.
        $("#yearBetween").val(rangeValues);
    });

    $("#txtYear1,#yearImage").click(function(){
        debugger;
        $("#divYear1").toggle();
        endRange = startRange + 16;
        //clearing the cuurent values of the picker 
        $("#yearBetween").text('');
        var container = "#yearContainer";
        // Creating the button for the years in yearpicker.
        createButtons(container);
        //bind the click function for the dynamically created buttons.
        bindButtons();
        // find the values between the years from the textbox in year picker.
        var rangeValues = startRange+ " - "+(endRange-1) ;
        // writes the value in textbox shows above the button div.
        $("#yearBetween").val(rangeValues); 
    });

    // binding the button for the each dynamically created buttons.
    function bindButtons(){
        $(".button").bind('click', function(evt)
        {
            debugger;
            $(this).css("background","#ccc");
            $("#txtYear1").val($(this).val());
            $('#divYear1').hide();
        });
    }

    // created the button for the each dynamically created buttons.
    function createButtons(container){
        var count=0;
        $(container).empty();
        for(var i= startRange; i< endRange; i++)
        {
            var btn = "<input type='button' style='margin:3px;' class='button btn btn-default' value=" + i + "></input>";
            count = count + 1;
            $(container).append(btn);
            if(count==4)
            {
                $(container).append("<br/>");
                count = 0;
            }
        }
    }

    $("#yearBetween").focusout(function(){  
        var yearValue = $("#yearBetween").val().split("-");
        startRange = parseInt(yearValue[0].trim());
        if(startRange>999 && startRange < 9985){
            endRange = startRange + 16;
            $("#yearBetween").text('');
            var container = "#yearContainer";
            createButtons(container);
            bindButtons();
            var rangeValues = startRange+ " - "+(endRange-1) ;
            $("#yearBetween").val(rangeValues);
        }
        else
        {
            $("#yearBetween").focus();
        }
    });

     $("#yearBetween, #txtYear1").keydown(function (e) {
        // Allow: backspace, delete, tab, escape, enter and .
        if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
             // Allow: Ctrl+A, Command+A
            (e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) || 
             // Allow: home, end, left, right, down, up
            (e.keyCode >= 35 && e.keyCode <= 40)) {
                 // let it happen, don't do anything
                 return;
        }
        // Ensure that it is a number and stop the keypress
        if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
            e.preventDefault();
        }
    });
}); 
```

# java - 将可抛出对象重新抛出为未选中的实用程序类？

> ID：13528624
> 
> 赞同：6
> 
> 时间：2012-11-23T11:53:52.773
> 
> 标签：java, exception, utility-method

我在单元测试包装器方法中捕获所有 throwable，以便重置外部系统中的一些数据。完成后我想重新抛出原始异常，并且我正在使用这段代码来执行此操作：

```
if (t instanceof RuntimeException) {
    throw (RuntimeException) t;
} else if (t instanceof Error) {
    throw (Error) t;
} else {
    throw new RuntimeException(t);
} 
```

但是，是否有任何现有的实用程序调用已经这样做了？

（我正在捕获 throwable，因为 AssertionErrors 是错误。）

编辑：说实话，我真的不想包装异常，所以任何允许我在不声明 throws 的情况下抛出任何可抛出（包括检查的异常）的技巧都是可以接受的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T12:04:16.003

是的，有一种方法可以编写一种方法来避免包装检查的异常。对于这个用例，它是一个完美的匹配，虽然你绝对应该非常小心它，因为它很容易混淆初学者。这里是：

```
@SuppressWarnings("unchecked")
public static <T extends Throwable> void sneakyThrow(Throwable t) throws T {
    throw (T) t;
} 
```

你会用它作为

```
catch (Throwable t) { sneakyThrow(t); } 
```

正如 Joachim Sauer 所评论的，在某些情况下，它有助于让编译器相信行调用`sneakyThrow`会导致方法终止。我们可以改变声明的返回类型：

```
@SuppressWarnings("unchecked")
public static <T extends Throwable> T sneakyThrow(Throwable t) throws T {
    throw (T) t;
} 
```

并像这样使用它：

```
catch (Throwable t) { throw sneakyThrow(t); } 
```

出于教育目的，很高兴看到字节码级别发生了什么。相关片段来自`javap -verbose UncheckedThrower`：

```
public static <T extends java.lang.Throwable> java.lang.RuntimeException sneakyThrow(java.lang.Throwable) throws T;
  descriptor: (Ljava/lang/Throwable;)Ljava/lang/RuntimeException;
  flags: ACC_PUBLIC, ACC_STATIC
  Code:
    stack=1, locals=1, args_size=1
       0: aload_0
       1: athrow
  Exceptions:
    throws java.lang.Throwable
  Signature: #13                          // <T:Ljava/lang/Throwable;>(Ljava/lang/Throwable;)Ljava/lang/RuntimeException;^TT; 
```

注意没有`checkcast`说明。该方法甚至合法地声明为 throw `T`，它可以是 any `Throwable`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T12:12:50.777

伟大的[Guava](https://code.google.com/p/guava-libraries/)库有一个方法`Throwables.propagate(Throwable)`可以完全按照您的代码正在执行的操作：[JavaDoc](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Throwables.html#propagate%28java.lang.Throwable%29)

从文档：

> 如果它是 RuntimeException 或 Error 的实例，则按原样传播 throwable，或者作为最后的手段，将其包装在 RuntimeException 中然后传播。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:01:30.273

或许`setDefaultUncaughtExceptionHandler(Thread.UncaughtExceptionHandler)`能帮到你。在那里，您可以为所有发生的异常定义一个全局异常处理程序。

# javascript - Firefox 17 是否报告正确的滚动宽度？

> ID：13528625
> 
> 赞同：2
> 
> 时间：2012-11-23T11:54:01.720
> 
> 标签：javascript, firefox, dom

我在表格中有这样的html代码

```
<td style="overflow: hidden"><a href="...">Very long text</a></td> 
```

文本溢出单元格，但 FF 17 报告错误的滚动宽度。就像clientWidth一样，所以显示内容的JS不起作用。Firebug 报告内容的宽度比单元格大得多。

这是 FF 错误，还是 dom 属性发生了变化？此代码在 Chromium 和 Opera 中仍然有效。

# android - Android问题：手机关机时调试

> ID：13528626
> 
> 赞同：6
> 
> 时间：2012-11-23T11:54:02.443
> 
> 标签：android, eclipse, broadcastreceiver

要在手机重启时调试 BroadcastReceiver，我尝试了一些方法但不起作用，链接如下

[如何调试 BOOT_COMPLETE 广播接收器的“强制关闭”崩溃？](https://stackoverflow.com/questions/10086994/how-to-debug-boot-complete-broadcast-receivers-) 强制关闭崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:20:59.730

可能这不是最好的方法，但我遇到了类似的问题，我在启动接收器 onReceive 方法的开头使用了 30 秒的睡眠功能，所以我有时间从 DDMS 角度转到进程列表并放入我的应用程序处于调试模式，因此 onReceive 方法的第一个实际指令上的断点被击中。希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:43:10.290

与我之前的情况相同，**我想知道用户在 Android 设备中使用广播接收器、运行服务或应用程序崩溃等的应用程序日志详细信息。**

*[因此使用此代码，您可以获得广播接收器何时启动、停止、崩溃等信息]*

我写了自己的 LogCat，它运行良好，这里的代码可以帮助你

首先你需要在app的常量文件中放一些常量

```
public static final String LOG_DIR="/SeedSpeak/LOG";
public static final String LOG_MODE_EXCEPTION="exception";
public static final String LOG_MODE_INFO="info"; 
```

然后你需要在app的Utill文件中创建三个方法

```
public static void MyLog(String logMode, String msgKey, Object msgValue) {

        File sdCard = Environment.getExternalStorageDirectory();
        File dir = new File(sdCard.getAbsolutePath()+ 

                           SeedSpeakConstants.LOG_DIR);
        if (!dir.exists()) {
            dir.mkdirs();
        }

        String logFileAbsPath = dir + File.separator + "SeedSpeakLog.txt";

        BufferedWriter bufferedWritter = null;
        try {
            bufferedWritter = new BufferedWriter(
                                           new FileWriter(logFileAbsPath,
                    true));
            String logValue = null;
            if (logMode.equalsIgnoreCase(
                         SeedSpeakConstants.LOG_MODE_EXCEPTION)) {
                logValue = logStackTrace((Throwable) msgValue);
            } else {
                logValue = msgValue.toString();
            }
            logValue = currentDateTimeValue() + ": " + logMode +
                                      " :" + msgKey + ":  "
                    + logValue + "\n";
            bufferedWritter.write(logValue);
            bufferedWritter.newLine();
            bufferedWritter.flush();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    public static String logStackTrace(Throwable t) {
        StringWriter sw = new StringWriter();
        PrintWriter pw = new PrintWriter(sw, true);
        t.printStackTrace(pw);
        pw.flush();
        sw.flush();
        return sw.toString();
        }

    public static String currentDateTimeValue() {

        SimpleDateFormat formatter = 
                        new SimpleDateFormat("yyyy-mm-dd-HH:mm:ss");
        formatter.setLenient(false);

        Date curDate = new Date();      
        String curTime = formatter.format(curDate);

        return curTime;
    } 
```

现在，如何在您的项目中使用它，非常简单:)

注意：这里的 TAG 只是一个像这样的当前文件（活动/服务/BR）名称

```
private final static String TAG = "PlantSeedActivity"; 
```

(1)。仅打印信息（BR，服务是否已启动.. bla bla）日志使用此

```
SeedSpeakUtill.MyLog(SeedSpeakConstants.LOG_MODE_INFO, 
                             TAG + ".onCreate", "Service is started now"); 
```

(2)。对于打印异常/崩溃详细信息，请使用这种方式

```
try{
// todo here
}
catch (Exception ex) 
{           

SeedSpeakUtill.MyLog(SeedSpeakConstants.LOG_MODE_EXCEPTION, 
                                 TAG + ".onStartCommand", ex);

} 
```

* * *

现在您只需将应用程序放在 Android 设备中，当您想要获取日志详细信息时，请转到 SeedSpeakLog.txt 文件并调试您的应用程序。

* * *

或者我听说谷歌[提供 ACRA（Android 应用程序崩溃报告）](http://acra.ch/)库的另一种方式

你可能想看看[这个](https://stackoverflow.com/questions/601503/how-do-i-obtain-crash-data-from-my-android-application)和[这个](https://github.com/ACRA/acra/wiki/BasicSetup)链接

*如果您在重新评分时遇到任何问题，请让我发表评论！*

# ios - 启动屏幕或启动屏幕中的声音

> ID：13528631
> 
> 赞同：0
> 
> 时间：2012-11-23T11:54:13.503
> 
> 标签：ios, iphone, splash-screen, avaudioplayer

我想在显示启动画面时添加声音，当它转到主屏幕时正在播放另一个声音？我的问题是我应该在哪里指定在启动画面出现时产生声音的声音代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:01:01.160

放入你的`application didFinishLaunching`，但一定要在你的.h和.m中实例化它。

这样的事情应该可以解决您的问题：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/YOURMUSICNAME.mp3"];
    NSLog(@"Path to play: %@", resourcePath);
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
                 [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        player.delegate = self;
        [player play];
        player.numberOfLoops = -1;
        player.currentTime = 0;
        player.volume = 1.0;
    }
} 
```

然后，如果你想停止它：

```
[player stop]; 
```

或暂停：

```
[player pause]; 
```

并将其导入您的头文件中：

```
#import <AVFoundation/AVFoundation.h> 
```

并将其添加到您的标题中......

```
@interface ViewController : UIViewController <AVAudioPlayerDelegate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:46:49.213

我想你可以试试这个：

首先在你的项目中添加**AVFoundation.Framework**

```
in AppDelegate.m

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary  
  *)launchOptions
  {
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
   self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] 
  autorelease];
  self.navigate = [[UINavigationController alloc]initWithRootViewController:_viewController];
  self.window.rootViewController = self.navigate;
  [self.window makeKeyAndVisible];

 // Add this line to present splash;
  [self.viewController displayScreen];

  return YES;
 } 
```

然后在你的 rootViewController 即你的第一个 viewController

```
in .h 
```

添加此框架作品

```
#import <AVFoundation/AVFoundation.h>

 AVAudioPlayer *avSound; //define this

-(void)displayScreen;
-(void)removeScreen; 
```

然后在你的 .m 中添加这两种方法

```
-(void)displayScreen
{
   UIView *splashView = [[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)]autorelease];
   splashView.backgroundColor = [UIColor colorWithPatternImage:[UIImage 
   imageNamed:@"Default.png"]];
   UIViewController *displayViewController=[[UIViewController alloc] init];
displayViewController.view = splashView;
[self presentModalViewController:displayViewController animated:NO];

      NSURL *soundURL = [[NSBundle mainBundle]  
     URLForResource:@"soundFile"withExtension:@"mp3/caf or whatever"];
      avSound = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:nil];
     [avSound play];//play sound;

    [self performSelector:@selector(removeScreen) withObject:nil afterDelay:4.0];

 }

 -(void)removeScreen
  {
   [[self modalViewController] dismissModalViewControllerAnimated:YES];

     if ([avSound isPlaying])
       [avSound stop];//stop playing sound;
  } 
```

然后释放它

```
-(void)dealloc
 {
       [super dealloc];
      [avSound release];
  } 
```

它对我有用，希望对你也有帮助。

# android - 如何在 Maven 中正确设置 actionbarsherlock 依赖项？

> ID：13528642
> 
> 赞同：3
> 
> 时间：2012-11-23T11:54:44.990
> 
> 标签：android, maven, dependencies, actionbarsherlock

我是新的 Maven 用户。我想构建我的 android 应用程序，它由 roboguice 和 actionbarsherlock 依赖项组成。我的问题是 actionbarsherlock 依赖。我包括它

```
 <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>actionbarsherlock</artifactId>
        <version>4.2.0</version>
        <type>apklib</type>
    </dependency>

    <!-- Let Roboguice and Sherlock work together -->
    <dependency>
        <groupId>com.github.rtyley</groupId>
        <artifactId>roboguice-sherlock</artifactId>
        <version>1.4</version>
    </dependency> 
```

在模块 pom.xml 文件中，但我的编辑器无法导入 actionbarsherlock 视图类。在 maven 依赖项的包资源管理器中没有任何 actionbarsherlock jar，但丢失的文件位于 target/unpack/apklibs/com.actionbarsherlock_actionbarsherlock_apklib_4.2.0/src/com/actionbarsherlock/view

如何正确设置actionbarsherlock依赖？？？

我的开发IDE是eclipse。我已经在eclipse中安装了m2e，m2e的android配置，可以导入android maven项目。

我的项目有 2 个模块：应用程序和 facebook sdk。我将android版本设置为15。

在 pom.xml 文件中：

 ````
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<artifactId>application</artifactId>
<name>Grand</name>
<packaging>apk</packaging>

<parent>
    <groupId>pl.grand</groupId>
    <artifactId>Grand</artifactId>
    <version>1.0.0</version>
    <relativePath>../pom.xml</relativePath>
</parent>

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.roboguice</groupId>
        <artifactId>roboguice</artifactId>
        <version>2.0</version>
    </dependency>

    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>actionbarsherlock</artifactId>
        <version>4.2.0</version>
        <type>apklib</type>
    </dependency>

    <!-- Let Roboguice and Sherlock work together -->
    <dependency>
        <groupId>com.github.rtyley</groupId>
        <artifactId>roboguice-sherlock</artifactId>
        <version>1.4</version>
    </dependency>

    <!-- facebook sdk -->
    <dependency>
        <groupId>com.facebook.android</groupId>
        <artifactId>facebook-android-sdk</artifactId>
        <version>1.0.1</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <sdk>
                    <platform>15</platform>
                </sdk>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin> 
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T02:00:44.160

我已经被这个问题抓住了几次，你实际上必须将 APKLIB 和 JAR 依赖项都添加到你的项目中（APKLIb 带来了资源以及所有这些都是 Android 库项目的一部分），而 JAR 带来了编译的类。

有效：

```
<dependency>
    <groupId>com.actionbarsherlock</groupId>
    <artifactId>actionbarsherlock</artifactId>
    <version>4.2.0</version>
    <type>apklib</type>
</dependency>

<dependency>
    <groupId>com.actionbarsherlock</groupId>
    <artifactId>actionbarsherlock</artifactId>
    <version>4.2.0</version>
    <type>jar</type>
</dependency> 
````

# objective-c - 在 XCode 4.x 中使用 NSString 调用函数

> ID：13528643
> 
> 赞同：1
> 
> 时间：2012-11-23T11:54:49.327
> 
> 标签：objective-c, xcode4.5

我确定这是一个简单的问题，但我怎样才能用 [self MyFunction] 调用函数；哪里 'MyFunction' 是一个 NSString？我想使用各种变量调用函数，这些变量在加入时会形成函数名称（即 FunctionName1、FunctionName2 等）

例如（简化）：

```
NSString *MyStringValue=@"FunctionName";
int MyNumber = 1;
NSString *MyFunction=[myStringValue stringByAppendingFormat:@"%d ",myNumber]; 
```

所以我希望使用以下方法调用函数“FunctionName1”：

```
[self MyFunction]; 
```

但这不起作用。任何人都可以帮忙吗？

* * *

编辑：这是现在可以使用的完整代码：

```
-(void)getnewblock {

    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

    NSNumber *actionblockload = nil;
    actionblockload = [standardUserDefaults objectForKey:@"actionblock"];
    int actionblock = [actionblockload intValue];

    NSString *block=@"setblock";
    NSString *blockanimate=@"blockanimate";

    NSString *blocktochange=[block stringByAppendingFormat:@"%d",actionblock];
    NSString *blocktoanimate=[blockanimate stringByAppendingFormat:@"%d",actionblock];

    SEL sel1 = NSSelectorFromString(blocktochange);
    SEL sel2 = NSSelectorFromString(blocktoanimate);

    [self performSelector:sel1];
    [self performSelector:sel2];

    [self setblockimages];
} 
```

唯一的事情是我收到“可能导致泄漏”的消息——尽管应用程序运行良好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T12:53:17.010

欢迎使用 Stackoverflow 标记。

在 Cocoa Touch 中，您所说的“函数”称为“选择器”（一种同时具有签名和目标的方法）并且有自己的类型`SEL`。为了实现您想要的，您需要首先按名称获取选择器，然后执行它。以下是一些帮助您入门的代码：

```
-(void) yourMainMethod{

   NSString * methodName = @"calculateAcceleration";
   SEL sel = NSSelectorFromString(methodName);

   [self performSelector:sel];

}

-(void)calculateAcceleration
{
   NSLog(@"Called!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:15:47.153

您可以使用如下

```
SEL function = @selector(testFunction);
[self performSelector:function]; 
```

-(void)testFunction {

```
NSLog(@"ABC Test"); 
```

}

但不能通过 self 作为函数调用 NSString。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:39:14.643

在我看来，不可能将“NSString”作为方法名称。

但是，您可以进行条件检查，以便选择必须执行的正确方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:54:11.123

```
Nsstring *newNsstring;
int *YourInt;

newNsstring =[NSString stringWithFormat:@"%@%d",yourNsstringName,yourInt,nil]; 
```

那么您只能编辑您的新`NSString` 方法，但我认为您不能将其设为您的方法名称

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-26T15:09:47.210

如果可以

```
NSString *stringMethode = @"MyMethodName"
SEL mySelector = NSSelectorFromString(stringMethode);

if([self respondsToSelector:mySelector]){

    [self performSelector:mySelector withObject:nil];

}else{
    //error not method
}

- (void)MyMethodName
{
    //call methode :)
} 
```

祝你好运 ;）

# asp.net - 没有回发的登录页面

> ID：13528644
> 
> 赞同：0
> 
> 时间：2012-11-23T11:54:57.517
> 
> 标签：asp.net, jquery-mobile

我有一个登录页面，单击登录按钮时，它会重定向到另一个 .aspx 页面，但带有回发。我希望不会发生单击按钮回发的情况。我想使用json。但我不知道如何在我的页面中使用它以及如何调用它。请告诉我如何避免使用 json 回发。我想为移动设备构建一个应用程序并使用 jquery 移动设备。

```
My code is
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
    </title>
    <link href="CSS/jquery.mobile-1.1.1.min.css" rel="stylesheet" type="text/css" />

    <link href="CSS/my.css" rel="stylesheet" type="text/css" />

    <script src="Js/jquery.min.js" type="text/javascript"></script>

    <script src="Js/jquery.mobile-1.1.1.min.js" type="text/javascript"></script>
     <script src="Js/my.js" type="text/javascript"></script>

</head>
<body>
<form id="form1" runat="server">
<%-- <asp:ScriptManager ID="scriptmngr" runat="server"></asp:ScriptManager>
<asp:UpdatePanel ID="upnlData" runat="server" UpdateMode="Conditional">
<ContentTemplate>--%>
<div data-role="page" data-theme="d" id="page1">
        <div data-theme="b" data-role="header"> 
            <h3>
            </h3>
            <div style="">
                <img style="width: 100px" src="Images/QuickMove.png" />
            </div>
        </div>
        <div data-role="content" style="padding: 15px">

      <div>
                <p>
                    <b>
                        <span style="background-color: rgb(255, 255, 0);" data-mce-
style="background-color: #ffff00;">
                        </span>
                        <span style="background-color: rgb(255, 255, 255); color:   
rgb(255, 102, 0);">
                            ​Survey Login
                        </span>
                    </b>

                </p>
            </div>
            <div data-role="fieldcontain" style="width:100%">
            <label  ID="lblLoginMsg" SkinID="snkError" runat="server" 
ForeColor="Maroon" Font-Bold="True"
                    Font-Size="Small"></label>
                <fieldset data-role="controlgroup">
                    <label for="textinput2"><span style="font-family: times new 
roman,times; font-size: medium;">
                        <strong>
                            Username
                        </strong>
                    </span>
                    </label>
                    <input name="" id="txtUserName" placeholder="" value="" type="text" 
runat="server"/>
                </fieldset>
            </div>

            <div data-role="fieldcontain" style="width:100%" >
                <fieldset data-role="controlgroup">
                    <label for="txtPassword"> <span style="font-family: times new 
roman,times; font-size: medium;">
                        <strong>
                            Password
                        </strong>
                    </span>
                    </label>
                    <input name="" id="txtPassword" placeholder="" value=""   
type="password" runat="server"/>
                </fieldset>
            </div>
             <div data-role="fieldcontain" style="width:100%" >
       <%--   <button type="button"   data-transition="fade" data-theme="b" 
            data-icon="check" data-iconpos="right" id="btnSignIn" value="Sign In"     
runat="server"   onclick="btnSignIn_Click" />--%>
         <button id="btnSignIn" type="button" runat="server"   
onserverclick="btnclick">Sign In</button>
  </div>
<div data-theme="b" data-role="footer" data-position="fixed" >
<h4 style="font-size: 10px">

     &copy;QuickMove
</h4>
</div>        
</div>
</div>

</form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:57:36.327

[**JSON**](http://www.json.org/)是用于交换数据的数据表示，不用于通信，您需要 ajax 来验证用户，您可以使用[**jQuery Ajax**](http://api.jquery.com/jQuery.ajax/)。这是一篇很好的文章，开始使用**[jquery ajax 和 asp.net web 方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:04:21.447

您需要以一种或另一种方式发布，因为由于各种原因（包括安全性和 Web 标准），在 GET 中发送登录凭据根本没有完成，而且您也不能完全在客户端完成，因为那时客户端代码（根据定义被污染）将负责做出登录决定。

所以你确实需要一个 POST，但你*可以避免*`<form>`使用 AJAX 重新加载页面（这基本上意味着当用户提交 a 时，你不会告诉 Web 浏览器发出 POST 请求，而是从 javascript 发出请求并在回调中处理结果不离开页面）。jQuery 带有完整的 AJAX API，因此您无需深入了解 XmlHttpRequest 对象的细节及其在不同浏览器上的实现。

就 JSON 而言：JSON 是一种通用数据格式，也是 JavaScript 本身的子集。它是 AJAX 请求的标准格式，主要是因为它是轻量级的，内置于​​大多数当前的 JavaScript 实现中（并且相当快的实现可用于在需要时可以透明地接管的旧实现），并且易于生成和解析。

# cdn - CDN中的大EXE文件为什么不生效

> ID：13528646
> 
> 赞同：0
> 
> 时间：2012-11-23T11:55:08.903
> 
> 标签：cdn

我在 nginx 配置中设置了 expires 1h。

这个exe文件大小是40M。

CDN 总是在 CDN-XXX 中显示 MISS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:02:12.793

如果您使用的是 Pull 区域，则提供商很可能不会缓存超过特定文件大小的文件。
他们中的大多数为大文件提供推送区域。

# c - 在 C 中的套接字上请求数据

> ID：13528647
> 
> 赞同：0
> 
> 时间：2012-11-23T11:55:10.347
> 
> 标签：c, sockets

在我的 C 应用程序中，我通过以下方式等待套接字上的数据：

```
printf("Opening socket and wait for data.\n");
while (i < 5)  
   while((connection_fd = accept(socket_fd, 
                            (struct sockaddr *) &address,
                            &address_length)) > -1)
   {
    bzero(buffer, 64);
    n = read(connection_fd,buffer,64);
    if (n < 0) printf("ERROR reading from socket");
    printf("Here is the message of length %d bytes:\n\n", n);
    for (int i = 0; i < n; i++)
    {
      printf("%02X", buffer[i]);
    } 
    printf("\n\n");          
    break;  
    }
 i++
 } 
```

这意味着我从 Socket 读取了 5 次数据，但是，从外观上看，我似乎打开了 5 个不同的连接，对吗？是否可以只打开一次连接，使其保持活动状态，然后检查此连接上是否有可用数据？

谢谢，帕特里克！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:04:12.443

您的代码需要进行一些重组，每个新连接您应该只接受一次：

```
while (1) {
    connection_fd = accept(socket_fd, ...);

    /* check for errors */
    if (connection_fd < 0) {
      /* handle error */
    }

    /* note this could block, if you don't want
       that use non-blocking I/O and select */    
    while ((n=read(connection_fd, buf, ...)) > 0) {
        /* do some work */
    }

    /* close fd */ 
    close(fd);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:58:24.773

当然。为此，您可能希望将参数交换到两个`while()`循环：

```
while ((connection_fd = accept(socket_fd, 
                          (struct sockaddr *) &address,
                          &address_length)) > -1)
  while (i < 5)  
  {
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:58:33.677

是的。取下`while (i<5)`钻头。之后，`read`如果需要，您可以读取更多数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:59:17.257

这很简单。将调用 accept 函数的语句移到循环之外，然后使用相同的套接字描述符调用 read。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T13:16:23.777

```
if (n < 0) printf("ERROR reading from socket"); 
```

你为什么要往前走？`break;`循环或新`continue;`连接。

# ios - 使用陀螺仪数据旋转虚拟相机 - iOS 上的 OpenGL ES

> ID：13528649
> 
> 赞同：0
> 
> 时间：2012-11-23T11:55:17.063
> 
> 标签：ios, opengl-es, gyroscope

我创建了一个基于 Vuforia 平台的增强现实应用程序。我正在修改它，以便如果目标丢失，系统将使用目标的最后一个已知位置，以及来自 CoreMotion 的设备方向数据，以将对象保持在正确的位置。

最后一点我需要帮助 - 集成 CoreMotion 数据。我认为最好的方法是根据陀螺输入旋转虚拟相机，但我不是 OpenGL ES 专家。有人可以阐明执行此操作的最佳方法吗？我知道如何获取设备方向数据，这是我需要一些指导的 OpenGL 和矩阵代数。

我的 renderFrame 方法如下。

```
-(void)renderFrameQCAR {
    [self setFramebuffer];

    // Clear colour and depth buffers
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // Render video background and retrieve tracking state
    QCAR::State state = QCAR::Renderer::getInstance().begin();
    QCAR::Renderer::getInstance().drawVideoBackground();

    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);

    // Check if any trackables are visible.
    int numberOfTrackables = state.getNumActiveTrackables();
    QCAR::Matrix44F modelViewMatrix;

    // Skip rendering if there is nothing to render.
    if (numberOfTrackables > 0 || hasPickedUpTrackablePreviously == YES) {

        // If there are none, but one was picked up in the past, use the last pose matrix.
        if (numberOfTrackables == 0 && hasPickedUpTrackablePreviously == YES) {
            modelViewMatrix = trackablePoseMatrix;
        }
        else {
            // Get the trackable
            const QCAR::Trackable* trackable = state.getActiveTrackable(0);
            modelViewMatrix = QCAR::Tool::convertPose2GLMatrix(trackable->getPose());

            // Store these variables for use later.
            trackablePoseMatrix = modelViewMatrix;
            hasPickedUpTrackablePreviously = YES;
        }

        // Fetch the 3D object to render.
        Object3D *obj3D;

        if (currentlyChangingTextures == YES || useDummyModel == YES) {
            obj3D = dummyObject;
        }
        else {
            obj3D = [objects3D objectAtIndex:0];
        }

        // Render using the appropriate version of OpenGL
        // OpenGL 2
        QCAR::Matrix44F modelViewProjection;

        // Apply usual transformations here
        ShaderUtils::translatePoseMatrix(sideToSideFloat, forwardBackFloat, 0.0f, &modelViewMatrix.data[0]);
        ShaderUtils::scalePoseMatrix(kObjectScale * sizeFloat, kObjectScale * sizeFloat, kObjectScale * sizeFloat, &modelViewMatrix.data[0]);
        ShaderUtils::rotatePoseMatrix(0.0f + rotationAngleFloat, 0.0f, 0.0f, 1.0f, &modelViewMatrix.data[0]);

        // Apply our translation vector here based on gesture info from the buttonOverlayViewController
        QCAR::Vec3F translationFromWorldPerspective = SampleMath::Vec3FTransformNormal(translationVectorFromCamerasPerspective, inverseModelViewMatrix);

        translationFromWorldPerspective = SampleMath::Vec3FNormalize(translationFromWorldPerspective);

        theTranslation.data[0] = theTranslation.data[0] + speed*translationFromWorldPerspective.data[0];
        theTranslation.data[1] = theTranslation.data[1] + speed*translationFromWorldPerspective.data[1];
        theTranslation.data[2] = 0.0f;

        ShaderUtils::translatePoseMatrix(theTranslation.data[0], theTranslation.data[1], theTranslation.data[2], &modelViewMatrix.data[0]);

        // Update inverseModelViewMatrix
        inverseModelViewMatrix = SampleMath::Matrix44FInverse(modelViewMatrix);

        // Multiply modelview and projection matrix as usual
        ShaderUtils::multiplyMatrix(&qUtils.projectionMatrix.data[0], &modelViewMatrix.data[0], &modelViewProjection.data[0]);

        glUseProgram(shaderProgramID);

        glVertexAttribPointer(vertexHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)obj3D.vertices);
        glVertexAttribPointer(normalHandle, 3, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)obj3D.normals);
        glVertexAttribPointer(textureCoordHandle, 2, GL_FLOAT, GL_FALSE, 0, (const GLvoid*)obj3D.texCoords);

        glEnableVertexAttribArray(vertexHandle);
        glEnableVertexAttribArray(normalHandle);
        glEnableVertexAttribArray(textureCoordHandle);

        glActiveTexture(GL_TEXTURE0);
        glBindTexture(GL_TEXTURE_2D, [obj3D.texture textureID]);
        glUniformMatrix4fv(mvpMatrixHandle, 1, GL_FALSE, (const GLfloat*)&modelViewProjection.data[0]);
        glDrawArrays(GL_TRIANGLES, 0, obj3D.numVertices);

        ShaderUtils::checkGlError("EAGLView renderFrameQCAR");
    }

    // Disable these things.
    glDisable(GL_DEPTH_TEST);
    glDisable(GL_CULL_FACE);

    glDisableVertexAttribArray(vertexHandle);
    glDisableVertexAttribArray(normalHandle);
    glDisableVertexAttribArray(textureCoordHandle);

    QCAR::Renderer::getInstance().end();
    [self presentFramebuffer];
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T00:59:23.093

我还没有使用过 Vuforia，所以我不完全理解你的代码，但是我已经成功地创建了一个使用陀螺仪和指南针来控制相机的 AR 应用程序。这是我的相机矩阵代码：

```
GLKMatrix4 cameraMatrix = GLKMatrix4Identity;
cameraMatrix = GLKMatrix4Rotate(cameraMatrix, GLKMathDegreesToRadians((zenith-90)), 1.0f, 0.0f, 0.0f);
cameraMatrix = GLKMatrix4Rotate(cameraMatrix, GLKMathDegreesToRadians(azimuth), 0.0f, 1.0f, 0.0f); 
```

其中： *天顶*=（180 - 陀螺仪滚动角）[0 点直线向上，180 点直线向下]， *方位角*= 罗盘角（0 N、90 E、180 S、270 W）

在顶点着色器中，*glPosition*的计算公式为：

```
gl_Position = uProjectionMatrix * uCameraMatrix * vec4(position, 1.0); 
```

我正在使用点精灵，但*位置*保存了我的粒子在 3D 世界空间中的坐标。在您的情况下，我猜这是您可以替换其他矩阵（如 modelViewMatrix 等）的地方。

请注意您的矩阵乘法顺序！

# drupal - 在 drupal 7 中隐藏 Web 表单标题

> ID：13528659
> 
> 赞同：6
> 
> 时间：2012-11-23T11:56:01.883
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-webform

我有一个包含各个领域的网络表单。在显示时，还显示了 Web 表单的标题。我想避免这个标题。可以隐藏标题吗？请帮我...

这是我创建的网络表单。我想隐藏标题“联系表”

![在此处输入图像描述](../Images/c47085205e9a8fe3fd92260092db9ade.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:54:55.047

如果标题来自节点标题，那么您可以使用[http://drupal.org/project/auto_nodetitle](http://drupal.org/project/auto_nodetitle)模块来禁用页面标题。

您可以在内容类型设置下找到设置。不要认为您应用的设置将是内容类型级别。因此，特定内容类型的所有内容的标题将被隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-29T08:41:01.263

如果您使用的是网络表单 (D7)，那么您可以隐藏网络表单的标题（例如联系表），方法是转到**阻止**->**配置阻止**-> 输入`<none>`“**阻止标题**”文本框并保存。请参阅下面的屏幕截图： [![在此处输入图像描述](../Images/2300c9e476de720ab8284df3616110c8.png)](https://i.stack.imgur.com/9McAg.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T19:42:17.080

可能无法设计出更糟糕的方法，但在 region--content.tpl.php 我改变了

```
<?php print $title; ?> 
```

到

```
<?php if ($title!="Contact"){ print $title; }?> 
```

..它确实有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-16T16:30:28.377

我对名为“myTheme”的主题的解决方案：

在 myTheme/template.php 添加：

```
function myTheme_form_alter( &$form, &$form_state,$form_id ){
    if (isset($form['#node']->title)){
        $form['#node']->title = false;
    }
} 
```

# unix - ICU 图书馆是否已损坏？

> ID：13528663
> 
> 赞同：0
> 
> 时间：2012-11-23T11:56:43.397
> 
> 标签：unix, shared-libraries, icu, solaris-10, nm

我正在`nm –u`为 ICU 库获得以下输出。这是否意味着该库已损坏？在使用这个库时，我们的一些代码需要 20 分钟才能完成执行。我怀疑这是因为这个库已损坏，但我不确定。

```
nm -u libicuuc.so.36

Undefined symbols from libicuuc.so.36:

    .div
    .mul
    .rem
    .stret4
    .udiv
    .umul
    .urem
    __1c2k6Fpv_v_
    __1cG__CrunKpure_error6F_v_
    __1cG__CrunKvector_con6FpvIIpF1_vp2_v_
    __1cG__CrunKvector_del6FpvIpF1_v_1_
    __1cG__CrunKvector_des6FpvIIpF1_v_v_
    __1cG__CrunKvector_new6FpvIIpF1_vp2_1_
    __1cG__CrunMex_rethrow_q6F_v_
    __1cG__CrunVdo_exit_code_in_range6Fpv1_v_
    __1cH__CimplKcplus_fini6F_v_
    __1cH__CimplKcplus_init6F_v_
    __ctype
    __udiv64
    __urem64
    _ex_deregister
    _ex_register
    _get_exit_frame_monitor
    atexit
    atol
    close
    fmod
    free
    getenv
    icudt36_dat
    log
    malloc
    mbstowcs
    memcmp
    memcpy
    memmove
    memset
    mmap
    modf
    munmap
    nl_langinfo
    open
    pow
    pthread_mutex_destroy
    pthread_mutex_init
    pthread_mutex_lock
    pthread_mutex_unlock
    realloc
    setlocale
    sprintf
    stat
    strcat
    strchr
    strcmp
    strcpy
    strlen
    strncat
    strncmp
    strncpy
    strrchr
    strstr
    strtod
    strtol
    strtoul
    time
    timezone
    tzname
    tzset
    wcstombs 
```

# asp.net - c# 检查任务是否正在运行

> ID：13528668
> 
> 赞同：8
> 
> 时间：2012-11-23T11:57:08.923
> 
> 标签：asp.net, .net, c#-4.0, asp.net-mvc-4

我需要能够检查特定任务是否正在运行：

```
 Task.Run(() =>
                {
                    int counter = 720;
                    int sleepTime = 7000;
                    int operationId = 0;
                    Thread.CurrentThread.Name = "GetTasksStatusAsync";
...... 
```

所以在我的代码中另一个类的某个地方我需要检查“GetTasksStatusAsync”是否正在运行。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T12:04:51.853

怎么样

```
Task t = Task.Run(() => ...);

if(t.Status.Equals(TaskStatus.Running))
{
    //task is running
} 
```

基本上我会将我的任务存储在某个地方，并让其他类可以访问它们。然后您可以使用上面的代码检查任务的状态。请参阅[任务状态文档](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskstatus.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-27T23:04:15.953

这对我有用。

```
Task t = Task.Run(() => ...);

if(t.IsCompleted.Equals(false))  // or if(t.Status.Equals(TaskStatus.WaitingForActivation)
{
} 
```

# python - 如何在python中将日期转换为时间格式？

> ID：13528681
> 
> 赞同：1
> 
> 时间：2012-11-23T11:57:56.407
> 
> 标签：python

我的代码是：

```
import datetime
tomorrow = datetime.date.today() + datetime.timedelta(days=1)
print "Tomorrow date is" + str(tomorrow) 
tm_stme = datetime.time(0, 0, 0)
tm_etime = datetime.time(23,59,59)
tm_stdate = datetime.datetime.combine(tomorrow, tm_stme)
tm_enddate = datetime.datetime.combine(tomorrow,tm_etime)

print "tomorrow start date:" + str(tm_stdate)
print "tomorrow end date:" + str(tm_enddate)  

tm_sdt_convert = time.mktime(time.strptime(tm_stdate, "%Y-%m-%d %H:%M:%S"))
tm_tdt_convert = time.mktime(time.strptime(tm_enddate, "%Y-%m-%d %H:%M:%S")) 
```

错误是：

```
administrator@Ashok-Dev:~/Desktop$ python testing.py 
Tomorrow date is2012-11-24
tomorrow start date:2012-11-24 00:00:00
tomorrow end date:2012-11-24 23:59:59
Traceback (most recent call last):
  File "testing.py", line 17, in <module>
    tm_sdt_convert = time.mktime(time.strptime(tm_stdate, "%Y-%m-%d %H:%M:%S"))
  File "/usr/lib/python2.6/_strptime.py", line 454, in _strptime_time
    return _strptime(data_string, format)[0]
  File "/usr/lib/python2.6/_strptime.py", line 322, in _strptime
    found = format_regex.match(data_string)
TypeError: expected string or buffer 
```

我需要`tm_sdt_convert`变量的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:20:19.307

`time.strptime`取一个格式化的字符串，它的格式并重新运行一个包含日期时间信息的元组。但是你已经有了一个`datetime`可以使用方法直接转换为元组的对象`timetuple`。

所以正确的代码应该是：

```
>>> tm_sdt_convert = time.mktime(tm_stdate.timetuple())
>>> tm_sdt_convert
1353711600.0 
```

正确`strptime`用法：

```
>>> time.mktime(time.strptime(str(tm_stdate), "%Y-%m-%d %H:%M:%S")) 
```

当您只有一个包含日期时间的字符串时很有用。

# sql - 时间比较 SQL 查询

> ID：13528682
> 
> 赞同：0
> 
> 时间：2012-11-23T11:57:57.630
> 
> 标签：sql, sql-server, sql-server-2005

我通过以下查询获取当前系统时间

```
select cast(DATEPART(hh,getdate()) as varchar)+ ':'+ cast(DATEPART(n,getdate()) as varchar) 
```

现在如何将此当前系统时间与时间字段进行比较以查看哪个更大？

```
 -----------------------
 declare    @time1  datetime,
            @time2  datetime

 select  @time1 = '20060701 02:27:35.35',
         @time2 = getdate()

 select tm1, tm2,
        case    
         when tm1 = tm2 then 'tm1 = tm2' 
         when tm1 > tm2 then 'tm1 > tm2'
    else        'tm1 < tm2'
    end as [TimeDiff]
 from
 (
     select dateadd(day, -datediff(day, 0, @time1), @time1) as tm1,
            dateadd(day, -datediff(day, 0, @time2), @time2) as tm2
 ) t

 ----------------------- 
```

时间字段具有以下格式的时间

```
 0400
     0415
     0430 
```

我看到了这个支持功能。现在如何将@time1 部分​​更改为“从表中选择时间”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:06:46.027

试试这个：

```
select case when cast(cast(DATEPART(hh,getdate()) as varchar)+ ':'+ cast(DATEPART(n,getdate()) as varchar) as datetime) >
       cast(left('0415',2)+':'+right('0415',2) as datetime) then 'greter' else 'lesser'
       end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:38:01.437

如果您只想将@time1 替换为表格列。在这种情况下，给你，

```
declare    @time2  datetime

CREATE Table #temp
(
time1 varchar(100)

)
Insert into #temp 
 select '20060701 02:27:35.35'

Insert into #temp 
 select '20060701 12:27:35.35'

 Insert into #temp 
 select '20060701 22:27:35.35'

 Select   @time2 = getdate()

 select tm1, tm2,
        case    
         when tm1 = tm2 then 'tm1 = tm2' 
         when tm1 > tm2 then 'tm1 > tm2'
         else        'tm1 < tm2'
        end as [TimeDiff]
 from
 (
     select dateadd(day, -datediff(day, 0, time1), time1) as tm1,
            dateadd(day, -datediff(day, 0, @time2), @time2) as tm2

        FROM #temp
 ) t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:02:39.120

```
Declare @time varchar(10)
SET @time='0400'
select CASE when convert(datetime,left(@time,2)+':'+RIGHT(@time,2))>convert(datetime,cast(DATEPART(hh,getdate()) as varchar)+ ':'+ cast(DATEPART(n,getdate()) as varchar)) then '1' else '0' end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:09:07.007

你可以像这样得到时间：

```
select replace(cast(cast(getdate() as time) as varchar(5)), ':', '') 
```

它从 time 中获取前 5 个字符，然后删除 :。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T14:15:15.680

以这种格式获取时间是

```
select REPLACE( CONVERT(VARCHAR(5),CURRENT_TIMESTAMP,108), ':', '') 
```

# ruby-on-rails - 模型中的简单递归方法

> ID：13528683
> 
> 赞同：1
> 
> 时间：2012-11-23T11:57:58.697
> 
> 标签：ruby-on-rails, ruby

我正在尝试编写非常简单的递归方法，但无法使其工作。我有简单的评论层次结构，其 id 如下所示：

```
1--
   2--
      4--
   3--
      5-- 
```

现在我想将他们的 id 保存在数组中（树顺序）`[0]=1, [1]=2, [2]=4, [3]=3, [4]=5`

我开始在 Entry 模型中构建这个数组

```
def comment_tree
  comment = self.comments.find(1) #it's temporary, just to check if it works
  return recur(comment,0)
end

private
def recur(comment,i)
  @tree[i]=comment.id #added attr_accessible :@tree
  if comment.children.any?
    comment.children.each {|c| recur(c,i+1)}
  else
    return
  end
  @tree
end 
```

这不起作用，因为块运行两次相同的计数器参数`recur(4,2)`和`recur(3,2)`. 我需要像 global $i 这样的东西来保持这个 arras 索引，但我确信必须有更好的方法来做到这一点。@tree 也是如此，我真的必须向模型添加新变量才能将其用作 recur 方法的返回参数吗？我不会在任何其他地方使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:09:50.450

这个怎么样：

```
def comment_tree
  comment = self.comments.find(1)
  tree = []
  recur(comment, tree)
  tree
end

private
def recur(comment, acc)
  acc << comment.id
  comment.children.each {|c| recur(c, acc) }
end 
```

# ruby - 类变量的初始化在 Ruby 中意味着什么

> ID：13528691
> 
> 赞同：1
> 
> 时间：2012-11-23T11:58:21.857
> 
> 标签：ruby, class, class-variables

我有三个 ruby​​ 脚本，说`A.rb`,`B.rb`和`Call.rb`.

我有一个类变量`@@classvar`，`Call.rb`我正在初始化它， `@@classvar=[:A,:B]`.

上面的语句实际上做了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:02:12.970

```
@@classvar=[:A,:B] 
```

这意味着，将类方法或具有名称的静态方法设置`classvar`为具有两个符号的数组，`:A`和`:B`。

# knockout.js - knockoutjs 绑定字符串的一部分

> ID：13528696
> 
> 赞同：1
> 
> 时间：2012-11-23T11:58:30.523
> 
> 标签：knockout.js, javascript-databinding

我的网页中有一个当前格式的字符串：“这是 USERNAME 订阅的游戏”。USERNAME 采用登录的用户名值。我只想绑定 USERNAME 属性，并将字符串的其余部分保留在同一个 html 元素中，而不是与第一部分有一个跨度，与 binding 属性有一个不同的跨度，最后一个与最后一部分有一个跨度。

我在任何地方都没有这样的东西。有谁知道如何做到这一点，或者这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:07:07.177

你可以这样做：

```
<span data-bind="text: 'This are the games which '  + USERNAME() + ' subscribed'" ></span> 
```

虽然当你想本地化你的应用程序时不是很好......

# google-app-engine - 在谷歌应用引擎中加载请求启动时间变化？

> ID：13528698
> 
> 赞同：0
> 
> 时间：2012-11-23T11:58:33.727
> 
> 标签：google-app-engine

我们使用框架 spring + strut2 创建了一个应用程序。加载请求启动时间不时变化。例如，**有时**需要 10 到 15 秒，15 到 20 秒，有时需要 30 秒以上。

**我可以知道原因以及如何减少加载请求时间。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:41:34.870

当没有流量时，您的实例会关闭，如果（例如）您有大量导入等，可能需要一段时间才能重新启动。

您可以通过 cron 作业使其持续运行（不推荐，浪费）或查看[预热请求](https://developers.google.com/appengine/docs/adminconsole/instances#Warmup_Requests)

这可能无济于事，因为无论如何第一个请求都会直接发送到实例。因此，您可能想要更改空闲实例值：

> 较高的最小值允许您启动应用程序以应对请求负载的快速峰值。App Engine 始终保留该数量的实例，因此一个实例始终可用于处理传入请求，但您需要为这些实例付费。此功能取代了已弃用的“始终开启”功能，该功能确保固定数量的实例始终可用于您的应用程序。

[设置空闲实例数](https://developers.google.com/appengine/docs/adminconsole/performancesettings#minimum)

当然，你会为此付出代价，但由于它们永远不会停止运行，你应该不会发现启动延迟，因为它只启动一次。

# c++ - 关于在这种情况下消息队列与共享内存的适用性或适用性

> ID：13528699
> 
> 赞同：2
> 
> 时间：2012-11-23T11:58:34.257
> 
> 标签：c++, c, linux, operating-system, shared-libraries

这是关于在这种情况下消息队列与共享内存的适用性或适用性：

1.  多个 DLL 或共享库

2.  每个库都将尝试与我的主应用程序 DLL 或共享库进行通信，例如，所有 DLL 或共享库的 I/P 和 O/P 将通过我的主应用程序的共享库进行通信。这些通信是异步的。

3.  除了我的应用程序的 .so 之外，一些 DLL 或共享库将创建多个线程，并且每个此类线程的输出需要传回我的应用程序库。这些线程的输出再次是异步的。

4.  我的主要应用程序 DLL / .so 将继续其其他工作，这很可能是它通过网络与某些服务器通信并相应地响应

5.  所有其他 DLL/.so 的功能都是异步的

Q-1：在上述情况下哪个最合适？(I) 消息队列，(II) 共享内存？

Q-2：任何使用共享内存在多​​个共享库之间强制同步的参考或链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:32:15.443

我猜你对问题的理解是错误的：

*   共享内存是连接不同进程（如套接字、管道或普通内存）的“通道”。
*   消息队列是用于传递消息的“协议”，例如 TCP 或环形缓冲区。您可以通过套接字（如 0MQ）或在共享或“普通”内存中使用同步队列（如 Intel TBB，见下文）创建它。

您不需要符合您提供的规范的共享内存。如果满足以下条件之一，则共享内存很有用：

*   你有几个进程（你没有，你所有的 so/dll 将共享相同的内存）
*   如果进程崩溃，您需要保留进程的内存（您可能需要但没有提及）。

现在，您需要为您的代码选择一个协议来讨论它。我建议使用 Intel Thread Building Blocks ( [TBB](http://threadingbuildingblocks.org/)，这将回答 Q2)。它们为您想要实现的目标提供了不同的抽象层，但我不知道如何为您选择，但需要一些时间来阅读（长）文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:19:23.610

需要注意的是，我只在最一般的意义上理解您的应用程序，我认为消息队列是不费吹灰之力的*，前提*是您传递的消息是有界的并且适合与队列一起使用。

您似乎关心的两个主要问题是同步和异步。(1) POSIX 消息队列已经内置了队列同步。这是一个很大的头痛消除。(2) 在 Linux 下，队列 id mqd_t 是一个文件描述符，这意味着它可以在`select`语句中使用。这可以解决异步问题。在您的主 DLL 中，您可以为所有队列加载 mqd_t 描述符`select`声明并处理您的 DLL 消息，因为它们以一致、调试和易于理解的机制到达。(3) 与共享内存相比，您损失的那一点点（对于大多数应用程序来说是很小的）效率不仅仅是由 msg 队列使用的相对容易性和您的主应用程序 DLL 将花费相对无论如何，长时间等待服务器的网络 I/O。

# deployment - 木偶类重载

> ID：13528702
> 
> 赞同：0
> 
> 时间：2012-11-23T11:58:42.707
> 
> 标签：deployment, puppet

puppet 是否支持类构造函数重载？如果没有，下面我的案例的最佳做法是什么？

我基本上想让我的 dummy:simple_node 采用不同的参数：

```
class dummy::simple_node($param1)

class dummy::simple_node($param1, $param2)

class dummy::simple_node($param1, $param2, $param3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:28:17.247

它没有，并且只有基本的继承支持。

我会使用 hiera 和/或条件，并为每个参数提供默认值，这样你就可以根据你想要完成的内容忽略/过滤它们。

如果不知道您的最终目标和/或查看其他代码，就不可能提出实际的最佳实践。

# android - 是否能够在 android 上以编程方式触发“MotionEvent.ACTION_DOWN”事件？

> ID：13528704
> 
> 赞同：4
> 
> 时间：2012-11-23T11:58:44.820
> 
> 标签：android, events

这是一些简单的android代码：

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            // do something
            break;
        case MotionEvent.ACTION_MOVE:
            // do something
            // how to trigger a ACTION_DOWN event here?
            break;
} 
```

我想`ACTION_DOWN`在处理`ACTION_MOVE`. 是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T12:12:03.007

你可以这样试试。

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            // do something
            break;
        case MotionEvent.ACTION_MOVE:
            // do something
            // how to trigger a ACTION_DOWN event here?
            event.setAction(MotionEvent.ACTION_DOWN);
            onTouch(v,event);
            break;
             }
} 
```

# c# - 将地图显示为椭圆

> ID：13528706
> 
> 赞同：2
> 
> 时间：2012-11-23T11:58:48.543
> 
> 标签：c#, wpf, silverlight, bing-maps

我想在 WPF 中将 bing 地图显示为椭圆（圆形）而不是矩形（对于 windows phone），但椭圆只允许画笔或图像填充。我试图将地图转换为图像，但没有成功，我认为这不是一个好方法。有任何想法吗？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:05:38.330

您应该能够使用剪辑。虽然我不知道地图控制是否有限制。剪裁是一种根据预定义区域进行剪裁的方法。查看[http://www.scottlogic.co.uk/blog/colin/2009/05/silverlight-cliptobounds-can-i-clip-it-yes-you-can/](http://www.scottlogic.co.uk/blog/colin/2009/05/silverlight-cliptobounds-can-i-clip-it-yes-you-can/)以获取示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:07:56.647

使用经典的矩形，然后剪裁它：

```
<Grid Height="100" Width="200" HorizontalAlignment="Center" VerticalAlignment="Center">  
    <Rectangle Fill="Green">
      <Rectangle.Clip>
        <EllipseGeometry Center="50,50" RadiusX="40" RadiusY="30" />
      </Rectangle.Clip>
    </Rectangle>
  </Grid> 
```

呈现为：

![在此处输入图像描述](../Images/d5e11a01ae40c2e66b246aad5603e560.png)

# eclipse - Eclipse 和 EGit：如何提交构建目录

> ID：13528711
> 
> 赞同：3
> 
> 时间：2012-11-23T11:59:03.423
> 
> 标签：eclipse, git, version-control, egit

我正在使用带有 CDT 和 EGit 2.0.0 的 Eclipse 3.7 (Indigo)。我想提交构建目录（`Debug`和`Release`），因为它们包含`makefile`，所以如果我想在没有 Eclipse 的主机中编译我的项目，我可以将存储库克隆`cd`到`Release`目录并调用`make all`.

我`.gitignore`的是这样的：

```
*.o
*.d
Debug/MyApplication
Release/MyApplication 
```

如果我从控制台调用，`git status`它会告诉目录未跟踪，所以我可以调用.`Debug``Release``git add .`

在 Eclipse 中，这是不可能的：它只是忽略 Debug 和 Release 目录。

那么...如何强制 Eclipse 暂存这些目录？我不想每次 makefile 更改时都从命令行调用 git。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:51:40.597

使用以下更新站点更新到 EGit 2.1（或使用[每晚更新站点](http://download.eclipse.org/egit/updates-nightly)）：

[http://download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates)

EGit 在 2.1 之前用于忽略派生资源（例如 Eclipse 构建输出文件夹）。

在 2.1 中，这已更改为与 Git 一致，请参阅[错误 359052](https://bugs.eclipse.org/bugs/show_bug.cgi?id=359052)。它现在只忽略明确排除的文件（例如 by `.gitignore`）。

# javascript - 单击 Ipad 设备时出现“Webview 闪烁”问题

> ID：13528716
> 
> 赞同：0
> 
> 时间：2012-11-23T11:59:16.187
> 
> 标签：javascript, html, ipad, svg

在 ipad 应用程序中，我使用了 Webview。javascript 代码正在执行点击操作。通过执行一些操作，它也会闪烁 webview。这是代码

```
document.getElementById("layout").onclick=function(e){..some code..} 
```

当我注释了这个函数中的所有代码并返回 false 时，它​​仍然在闪烁。请建议。

# sql - SQL：如何将多行合并为具有相同 ID 的行

> ID：13528718
> 
> 赞同：0
> 
> 时间：2012-11-23T11:59:20.983
> 
> 标签：sql, oracle, oracle11g

我有以下查询

```
select r.role_id, 
r.role_name, 
p.permission_name 
from t_user_role ur, t_role r, t_role_permission rp, t_permission p 
where ur.role_id=r.role_id 
and ur.role_id=rp.role_id 
and rp.permission_id=p.permission_id
and ur.contact_id=505; 
```

这给了我以下结果

![在此处输入图像描述](../Images/58cb59dc829101b91eb5b8c94f98b75f.png)

我想将具有相似行 ID 的行合并，以获得如下结果：

```
ROLE_ID                   ROLE_NAME               PERMISSION_NAME   
100                       ops_center               List Dashboard
106                       oc_public                RunETN Activity Detail | Run Test View | .... and so on 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:02:29.513

根据您下面的陈述，我假设您正在使用 MySQL 并尝试使用`GROUP_CONCAT()`：

> *我曾尝试使用群组联系人，但无法进行查询*。

如果您使用的是 MySQL，那么您将[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)像这样申请：

```
select r.role_id, 
  r.role_name, 
  group_concat(p.permission_name separator ' | ') permission_name
from t_user_role ur
inner join t_role r
  on ur.role_id=r.role_id 
inner join t_role_permission rp
  on ur.role_id=rp.role_id 
inner join t_permission p 
  on rp.permission_id=p.permission_id
where ur.contact_id=505
group by r.role_id, r.role_name; 
```

*注意：我将查询更改为使用 ANSI JOIN 语法而不是逗号分隔的表列表*

在 Oracle 11g 中，您可以使用[`LISTAGG()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)：

```
select r.role_id, 
  r.role_name, 
  LISTAGG(p.permission_name, ' | ') WITHIN GROUP (ORDER BY r.role_id) permission_name
from t_user_role ur
inner join t_role r
  on ur.role_id=r.role_id 
inner join t_role_permission rp
  on ur.role_id=rp.role_id 
inner join t_permission p 
  on rp.permission_id=p.permission_id
where ur.contact_id=505
group by r.role_id, r.role_name; 
```

# php - Prestashop 使用模块添加产品，不能强制 product_id

> ID：13528720
> 
> 赞同：3
> 
> 时间：2012-11-23T11:59:32.053
> 
> 标签：php, prestashop

正如主题所说，我在添加产品时遇到问题（通过使用产品类）。一切正常，但即使我指定 $product->id = 1234; 它不会用这个 id 保存它，它只是自动增加数据库中的产品。但我真的需要将我自己的 product_id 插入数据库（因为我从地面 strone 数据库导入产品并且它们需要经常更新）

这是我的代码：

```
$langId = (int) (Configuration::get('PS_LANG_DEFAULT'));
$p = new Product($prod['towar_id']);
$p->id = $prod['towar_id'];
$p->name = array($langId => $prod['nazwa']);
$p->ean13 = $prod['kod'];
$p->id_category_default = 6;
$p->category = array(6);
$p->link_rewrite = array($langId => Tools::link_rewrite($prod['nazwa']));
$p->weight = $prod['ile_kg_litrow'];
$p->quantity = $prod['magazyny']['magazyn']['stan_magazynu'];
$p->price = $prod['cena_detal'];
$p->add(); 
```

那么有什么方法可以插入我自己的产品 ID 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T12:09:50.380

我设法通过添加 $_GET['forceIDs'] = 1 或简单地在 url 末尾添加 ?forceIDs=1 来修复它。

# jquery - jquery幻灯片只工作firefox而不是chrome，opera，ie

> ID：13528727
> 
> 赞同：2
> 
> 时间：2012-11-23T12:00:13.560
> 
> 标签：jquery, internet-explorer, firefox, google-chrome

我刚刚写了一个简单的滑块。但是有一些奇怪的东西，我无法修复它。该脚本适用于**firefox (12)**而不是； **crome (23.0.1271.64 m)，opera (12.02)，即 (7-8-9-D)，safari (5.1.7)。**

这是下面的代码。谁能告诉我我该如何解决？

## [jsfiddle 代码。](http://jsfiddle.net/v7aMT/21/)

```
$.fn.etkinlikslide = function() {
    var etkinlikid        = this.selector.replace(/\#/g,'');
    var esheight    = parseInt($('#'+etkinlikid).height());
    var epheight    = parseInt($('#etkinlikpanel').height());
    function oynat(){
        var topcheck =parseInt($('#'+etkinlikid).css("top"))+parseInt($('#'+etkinlikid).height());
        if (topcheck<0) $('#'+etkinlikid).css("top",$('#etkinlikpanel').css("height"));
        $('#'+etkinlikid).css("top",parseInt($('#'+etkinlikid).css("top"))-1+'px');
    }
    if (esheight>epheight) {
        var etkinliktimer = window.setInterval(function() {oynat()}, 80);
        $('#'+etkinlikid).hover(function(){
            window.clearInterval(etkinliktimer);
        },function(){
            etkinliktimer = window.setInterval(function() {oynat()}, 80);
        });
    }
};
$("#etkinlikslide").etkinlikslide(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:05:18.523

您的问题是 CSS 属性 top 的默认设置在 IE 中设置为 auto ，而在 Firefox 中设置为 0 。

所以函数 `var topcheck =parseInt($('#'+etkinlikid).css("top"))+parseInt($('#'+etkinlikid).height());`失败，因为它返回 NaN。

添加顶部：0；在你的CSS到div会解决它

[小提琴链接](http://jsfiddle.net/v7aMT/27/)

# c# - 抑制 lambda 上的 Microsoft.Reliability 警告

> ID：13528730
> 
> 赞同：1
> 
> 时间：2012-11-23T12:00:20.183
> 
> 标签：c#, idisposable, fxcop

我在类似单例的类中有以下代码：

```
 private readonly Lazy<IWindsorContainer> LazyContainer =
        new Lazy<IWindsorContainer>(() => new WindsorContainer().Install(new WindsorInstaller())); 
```

并且鉴于 WindsorContainer 确实需要发布，我稍后会在主机中这样做，所以我很自然地想压制关于 IDisposable 的顽皮 Microsoft.Reliability 警告可能没有发布。问题是它是在 lambda 内部创建的，看起来 SuppressMessage 对它没有影响，我绝对不希望它出现在整个班级。

我通过抑制构造函数上的属性来解决这个问题。但仍然对此并不完全满意。

我是否遗漏了什么或 SuppressMessage 没有赶上 c# 的发展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:22:21.873

我认为它正在考虑对 Install() 的调用失败，然后尚未分配给任何变量的容器的可能性。您可以在此处添加 try/catch，使表达式更加冗长但符合以下规则（未经测试，但您会明白的）：

```
private readonly Lazy<IWindsorContainer> LazyContainer =
    new Lazy<IWindsorContainer>(() => { 
        var container = new WindsorContainer();
        try { container.Install(new WindsorInstaller())); }
        catch { using(container) {} throw; }
        return container; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:14:57.427

正如 fsimonazzi 正确指出的那样，这是关于调用 new WindsorContainer().Install(new WindsorInstaller()) ，它在将 IDisposable 保存到成员变量之前使用它（因此不能保证它会永远存在）。

对于我自己，我决定将其重构为以下内容：

```
class Program : IDisposable
{

    private Disposo _disposo = new Disposo();
    //private Disposo _disposo = new Disposo().Yeah(); // this will cause warning

    public Program()
    {
        _disposo.Yeah(); // this will not
    }

    public void Dispose()
    {
        if (_disposo != null)
        {
            _disposo.Dispose();
            _disposo = null;
        }
    }

    static void Main(string[] args)
    {
        using (var p = new Program()) { }
    }
}

class Disposo : IDisposable
{
    public void Dispose() { }

    public Disposo Yeah() { return this; }
} 
```

在某个地方

```
 private static readonly Lazy<Program> LazyInstance = new Lazy<Program>(); 
```

道德？尽管声称“CA2000：在所有对它的引用超出范围之前处理对象”。坏了，可以忽略和压制，但情况并非总是如此。

# css - 为什么在 Windows Phone 7 上的 IE 中可点击较低 z-index 的 div 中的链接锚？

> ID：13528731
> 
> 赞同：1
> 
> 时间：2012-11-23T12:00:22.053
> 
> 标签：css, windows-phone-7, anchor, z-index

我有 2 个绝对定位的 div 彼此上方。

*   z-index:0 的 div；包含网站的导航。
*   z-index:1 的 div；位于另一个 div 的顶部，使导航不可见。

当 div 不可见时，菜单项仍然可以点击，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:03:49.383

Does the div with z-index 1 have a background?

By default, background-colors are set to "transparent" but IE reads them as invisible when z-indexed. This means that if your div with `z-index: 1` doesn't have a background, IE basically pretends it isn't there.

You can hack this by setting the background to some phony url like,

```
background: url(not_a.gif) 
```

as I found from this [this forum](http://www.dynamicdrive.com/forums/showthread.php?67762-Simple-Controls-Internet-Explorer-9-Z-Index-issue). The same solution is also shown in a [another example](http://www.icreatestuff.co.uk/index.php/blog/article/ie9-z-index-stacking-problem-or-something-stranger) involving links.

# matlab - 如何在 Matlab 图形轴上获取鼠标单击位置？

> ID：13528734
> 
> 赞同：4
> 
> 时间：2012-11-23T12:00:25.950
> 
> 标签：matlab, user-interface

我想在 Matlab 图中单击并找出单击位置的 x 和 y 位置。

在图表中，我认为有一种方法可以单击线上的一个点并获取它的 x 和 y 坐标。如果没有绘制图表，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T08:14:08.187

这是最优雅的方法：

```
function test

    % create test figure
    f = figure(1);

    % set function to call on mouse click
    set(f, 'WindowButtonDownFcn', @clicker);

end

% function called on mouse click in the figure
function clicker(h,~)

    get(h, 'selectiontype')
    % 'normal' for left moue button
    % 'alt' for right mouse button
    % 'extend' for middle mouse button
    % 'open' on double click

    get(h, 'currentpoint')
    % Current mouse location, in pixels from the lower left.
    % When the units of the figure are 'normalized', the
    % coordinates will be [0 0] inb lower left, and [1 1] in
    % the upper right.

end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T13:40:00.950

创建图形后，请尝试

```
[x_coord, y_coord]=ginput(1); 
```

[因此，您可以在图形上单击一次（这就是参数为 1 的原因），您将获得函数ginput()](http://www.mathworks.de/de/help/matlab/ref/ginput.html)返回的坐标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-10T12:19:10.563

也许这也可以：

```
function [loc] = get_image_point (I)
    figure('name','Doubleclick to set location');imshow(I);
    [c r] = getpts(1);
    loc = int32([c r]);
    if size(loc,1)>1
        loc = [loc(1,1) loc(1,2)];
    end
    close all;
end 
```

斯蒂芬

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-11T07:27:46.787

注： - `getpts()`- 是“图像处理工具箱”功能。- `ginput()`- 等待您的鼠标单击，在您单击之前暂停执行，并且仅在调用时才有效。

而`get(h, 'currentpoint')`只要您的程序正在运行，它就可以随时工作。

# maven - 阻止 Jenkins 构建依赖模块

> ID：13528735
> 
> 赞同：0
> 
> 时间：2012-11-23T12:00:28.600
> 
> 标签：maven, jenkins, continuous-integration

我有一个 Maven 项目，有 5 个子模块。每个模块都依赖于 5 个模块之一，但是我不希望一个模块中的更改触发任何模块的构建。谁能指出我如何配置它的正确方向。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:33:10.480

只需创建 5 个不同的 Jenkins 工作。每个模块一个。由于每个模块都有自己的 pom.xml，这应该没问题。问题在于，如果两个模块发生变化，您必须以正确的顺序构建它们。据我所知，这必须手动完成。

# c# - 将自定义类对象转换为 IEnuerable 以便在 foreach 语句中使用

> ID：13528742
> 
> 赞同：1
> 
> 时间：2012-11-23T12:01:20.650
> 
> 标签：c#, asp.net-mvc-4

我有一个自定义班级学生，如下所示：

```
 public class Student
     {
         public string Name {get;set;}
         public string GuardianName {get;set;}
     } 
```

现在，我有以下数据结构中的数据

```
 IList<Student> studInfo=new List<Student>(); 
```

我已将此数据放入 viewbag

```
 Viewbag.db=studInfo; 
```

在查看页面上，当我尝试使用

```
 <table>
       <thead>
            <tr>
                 <td>Name</td>
                 <td>Guardian Name</td>
            </tr>
        </thead>

     @foreach(var stud in ViewBag.db)
     {
          <tr>
              <td>@stud.Name</td>
              <td>@stud.GuardianName</td>
          </tr>

     }
    </table> 
```

有错误，说

```
Cannot implicitly convert type 'PuneUniversity.StudInfo.Student' to 'System.Collections.IEnumerable' 
```

PuneUniversity 是我的命名空间，StudInfo 是应用程序名称。请建议我一个解决方案。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:04:39.453

以下行不太可能编译：

```
IList<Student> studInfo = new IList<Student>(); 
```

您不能创建接口实例。所以我猜你的实际代码与你在这里显示的不同。

另外，我建议您使用强类型视图而不是 ViewBag：

```
public ActionResult SomeAction()
{
    IList<Student> students = new List<Student>();
    students.Add(new Student { Name = "foo", GuardianName = "bar" });
    return View(students);
} 
```

现在让你的视图强类型化：

```
@model IEnumerable<Student>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Guardian Name</th>
        </tr>
    </thead>
    <tbody>
    @foreach(var stud in Model)
    {
        <tr>
            <td>@stud.Name</td>
            <td>@stud.GuardianName</td>
        </tr>
    }
    </tbody>
</table> 
```

# javascript - 从 for-in 循环中获取属性名称的简单理论？

> ID：13528745
> 
> 赞同：5
> 
> 时间：2012-11-23T12:01:29.243
> 
> 标签：javascript, arrays, oop, object, loops

首先，我想说我在理论上很厉害。我不喜欢抽象。在尝试使用它们之前，我想知道它们是如何工作的。我一直在到处寻找一个简单的理论来获取 for-in 循环的属性名称（而不是值）。我将在代码中演示它，希望有人可以解释它是如何工作的……

```
var obj = { one: 1, two: 2, three: 3 }; // A basic object instantiated with 3 public properties.

for (var prop in obj) {
    console.log(prop); // logs "one", "two" and "three" ???
} 
```

我认为它会将 prop 变量评估为 1、2 和 3，但它会注销实际的属性名称。我知道 obj[prop] 是评估这些属性的实际值的，但这对我来说就像是一个开始。prop 是存储另一个引用的引用？

我试图根据 for 循环中的变量 i 有点像数组的索引来考虑这一点。

这也是什么，它与我要问的相似吗？

```
var obj = { "one": 1, "two": 2, "three": 3 }; 
```

属性名称字符串如何？...你不能说 var "string" = "Hello, World!"; 因为那是非法的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:10:04.900

我不得不承认我没有完全理解这个问题，但我还是尽量回答。一个*对象*几乎可以与*哈希*（- *table*）相媲美。如您所知，它由一个标识符和一个存储在该标识符后面的值组成。

在 ECMAscript 中，该标识符是*object*中的*键*。

 *对于*Array*，您在循环它时只希望收到一件有趣的事情，因为它的“*键*”只是索引数字（实际上这里也是*字符串*，但这只是一个旁注）。但是，由于对象*键*可以是任何东西，因此在循环它们时会发生冲突。你想得到*键*还是*值*？

这就是为什么有`for-in`循环。您正在遍历*键*，并且使用该键您可能还可以访问后面的值。

* * *

但是-您并不完全是困惑的人。这就是为什么*ECMAscript Next*将引入`for-of`对象循环，它颠倒了这个逻辑。您将直接遍历值而不是*键。*

```
var obj = { one: 1, two: 2, three: 3 };

for(var value of obj) {
    console.log(value); // 1, 2, 3
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T12:09:25.570

对象属性的名称*是*字符串，`obj.prop`只是`obj["prop"]`何时`prop`是有效标识符的语法糖。例如，你不能说`obj.my property`，你必须写`obj["my property"]`

`for..in`枚举对象及其原型链中的可枚举键，将当前字符串键分配给左侧。所以你可以这样做：

```
var a = [], i = 0;
for( a[i++] in obj );

//a is an array: ["one", "two", "three"] 
```

随着循环的进行，左侧被评估为一个参考（`i`增量作为这个的副作用）并分配当前键。所以它看起来像`a[0] = key`，`a[1] = key2`等等。

如果您想了解所有详细信息，请参阅以下规范：

*   [for-in 语句](http://ecma-international.org/ecma-262/5.1/#sec-12.6.4)

*   [对象初始化器语法](http://ecma-international.org/ecma-262/5.1/#sec-11.1.5)

*   [访问属性](http://ecma-international.org/ecma-262/5.1/#sec-11.2.1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:13:17.577

> prop 是存储另一个引用的引用？

不，`prop`是您在迭代中达到的元素的键。一个字符串。

*而已。*没有比这更复杂的了。

> 你不能说 var "string" = "Hello, World!"; 因为那是非法的

这也是一个完全不同的语言功能......

可以说，提供对象*至少部分是*为了解决您确定的限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T12:04:55.193

JavaScript 对象是一个字典，键是任意字符串，不一定是有效的 JavaScript 标识符。因此，有些东西可以用作属性名称（即任何有效字符串），但不能用作变量名称。

For/in 被定义为遍历（可枚举的）属性*名称*（即键），这对于数组也是如此，这样

```
for (var i in [10,20,30]) document.write (i); 
```

将打印“012”，而不是“102030”。

可以将属性定义为不可枚举的，在这种情况下 for/in 将跳过它。在 ECMAScript 5 中，您可以自己定义不可枚举的属性。枚举顺序未定义。请注意，for/in 还考虑了原型的属性（这就是您经常会`hasOwnProperty`在循环内立即看到条件的原因）。*

# php - 如何使用 PHP cURL 创建新的谷歌警报将其传送到提要

> ID：13528747
> 
> 赞同：3
> 
> 时间：2012-11-23T12:01:30.033
> 
> 标签：php, curl, google-api-client, google-alerts

我需要的只是创建与我的帐户相关联的谷歌警报，该警报应发送到我的提要。对于身份验证，我正在使用 curl

```
function googleAuthenticate($username, $password, $source, $service = 'alerts') {
$session_token = $source . '_' . $service . '_auth_token';

if (isset($_SESSION[$session_token])) {
    echo 'уже есть';
    return $_SESSION[$session_token];
}

// get an authorization token
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://www.google.com/accounts/ClientLogin");
$post_fields = "accountType=" . urlencode('HOSTED_OR_GOOGLE')
    . "&Email=" . urlencode($username)
    . "&Passwd=" . urlencode($password)
    . "&source=" . urlencode($source)
    . "&service=" . urlencode($service);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_HEADER, TRUE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);
curl_setopt($ch, CURLOPT_HEADER, true);

$response = curl_exec($ch);
curl_close($ch);

if (strpos($response, '200 OK') === false) {
    return false;
}

// find the auth code
preg_match("/(Auth=)([\w|-]+)/", $response, $matches);
if (!$matches[2]) {
    return false;
}

$_SESSION[$session_token] = $matches[2];
return $matches[2];} 
```

但我无法在 google.com/alerts 上填写表格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:49:58.687

基于此页面的代码：

[使用 PHP 和 Curl 登录 Google，Cookie 已关闭？](https://stackoverflow.com/questions/8991873/login-to-google-with-php-and-curl-cookie-turned-off)

```
function createAlert($search) {

        $USERNAME = 'EMAIL_ADDRESS';
        $PASSWORD = 'PASSWORD';
        $COOKIEFILE = 'cookies.txt';

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
        curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_COOKIEJAR, $COOKIEFILE);
        curl_setopt($ch, CURLOPT_COOKIEFILE, $COOKIEFILE);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);
        curl_setopt($ch, CURLOPT_TIMEOUT, 120);

        curl_setopt($ch, CURLOPT_URL,
        'https://accounts.google.com/ServiceLogin?hl=en&service=alerts&continue=http://www.google.com/alerts/manage');
        $data = curl_exec($ch);

        $formFields = $this->getFormFields($data);

        $formFields['Email']  = $USERNAME;
        $formFields['Passwd'] = $PASSWORD;
        unset($formFields['PersistentCookie']);

        $post_string = '';
        foreach($formFields as $key => $value) {
        $post_string .= $key . '=' . urlencode($value) . '&';
        }

        $post_string = substr($post_string, 0, -1);

        curl_setopt($ch, CURLOPT_URL, 'https://accounts.google.com/ServiceLoginAuth');
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);

        $result = curl_exec($ch);

        if (strpos($result, '<title>Redirecting') === false) {
            var_dump($result);
            die("Login failed");
        } else {
            curl_setopt($ch, CURLOPT_URL, 'http://www.google.com/alerts');
            curl_setopt($ch, CURLOPT_POST, 0);
            curl_setopt($ch, CURLOPT_POSTFIELDS, null);

            $result = curl_exec($ch);

            // Create alert

            preg_match('/<input type="hidden" name="x" value="([^"]+)"/', $result, $matches);

            $post = array(
                "x" => $matches[1],     // anti-XSRF key
                "q" => $search,     // Search term  
                "t" => 7,       // Result type (everything)
                "f" => 1,       // Frequency (once a day)
                "l" => 1,       // How many (all results)
                "e" => "feed"       // Type of delivery (RSS)
            );

            $post_string = '';

            foreach($post as $key => $value) {
                $post_string .= $key . '=' . urlencode($value) . '&';
            }

            $post_string = substr($post_string, 0, -1);

            curl_setopt($ch, CURLOPT_URL, 'http://www.google.com/alerts/create');
            curl_setopt($ch, CURLOPT_POST, 1);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);

            $result = curl_exec($ch);
            $matches = array();
            preg_match('#<a href="(http://www.google.com/alerts/feeds/[\d/]+)"#', $result, $matches);

            $top_alert = $matches[1];

            return $top_alert;
        }
    }

    function getFormFields($data)
    {
        if (preg_match('/(<form.*?id=.?gaia_loginform.*?<\/form>)/is', $data, $matches)) {
            $inputs = $this->getInputs($matches[1]);

            return $inputs;
        } else {
            die("didn't find login form");
        }
    }

    function getInputs($form)
    {
        $inputs = array();

        $elements = preg_match_all('/(<input[^>]+>)/is', $form, $matches);

        if ($elements > 0) {
            for($i = 0; $i < $elements; $i++) {
                $el = preg_replace('/\s{2,}/', ' ', $matches[1][$i]);

                if (preg_match('/name=(?:["\'])?([^"\'\s]*)/i', $el, $name)) {
                    $name  = $name[1];
                    $value = '';

                    if (preg_match('/value=(?:["\'])?([^"\'\s]*)/i', $el, $value)) {
                        $value = $value[1];
                    }

                    $inputs[$name] = $value;
                }
            }
        }

        return $inputs;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T11:28:36.260

你可以使用这个库：[http ://coders11.com/googlealertsapi/](http://coders11.com/googlealertsapi/)

它最近开始商业化，但效果很好：

> 最后更新：11/02/2014 我们不再分享这门课了。您可以以 59 欧元 / 83 美元的价格无限制地购买具有商业许可的完整源代码

# unit-testing - 使用 Moq 设置测试的更好方法

> ID：13528748
> 
> 赞同：4
> 
> 时间：2012-11-23T12:01:32.157
> 
> 标签：unit-testing, testing, mocking, tdd, moq

我一直在嘲笑使用 m​​oq 并且总是发现自己在做这样的事情：

假设我要测试的行为是 classUnderTest.DoSomething() 调用 l.Fatal("My test message") 一次。

```
//arrange
mockLogger.Setup(l => l.Fatal("My test message"));

//act
classUnderTest.DoSomething()

//assert
mockLogger.Verify(l => l.Fatal("My test message"), Times.Once()); 
```

我觉得验证调用总是重复设置，除了 Times 参数。即使使用不同的模拟框架，我也很想知道其他人在做什么。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:47:53.473

如果您确实需要控制 Mock 对象的行为，例如返回内容，则只需对 Mock 对象进行设置：

```
_mockRepo.SetUp(m => m.DoStuff()).Returns(someObject); 
```

或抛出异常：

```
_mockRepo.SetUp(m => m.DoStuff()).Throws(new SomeExceptionType()); 
```

我假设，在您的示例中，您将 logger 模拟对象传递给其他正在测试的对象，在这种情况下，删除 setup 调用将不起作用，因为只需创建 Mock 对象即可完成等效设置。

**编辑**

```
public class Dude : IDude
{
    private IAirSupport _support;

    public Dude(IAirSupport support)
    {
        _support = support;
    }

    public void Advance(Place place)
    {
        if(place.IsUnderAttack)
        {
            _support.CoveringFire(place);
            MoveAndFire(place);
        }

    }
} 
```

模拟这个：

```
var support = new Mock<IAirSupport>();

var dude = new Dude(support.Object);

var place = new HotSpot { IsUnderFire = true };

dude.Advance(place);

support.Verify(m => m.CoveringFire(place), Times.Once()); 
```

这就是您所需要的 - 验证完成所有繁重的工作，无需调用设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:18:26.023

我同意你的观点，即感觉重复。但是，在这种特殊情况下，我认为您不需要打电话`Setup()`，因为您没有返回任何东西。我通常只`Setup()`在需要根据返回的对象断言某些内容时才调用。

最近我开始通过结构映射使用 AutoMocking，这促使我在基类上编写了一些快捷方式/实用方法来访问自动生成的模拟。然后我也可以编写一个快捷方式来调用`Verify()`。它可能会为您节省一两次击键... [http://evolutionarydeveloper.blogspot.co.uk/2012/10/automock-with-structuremap-and-moq.html](http://evolutionarydeveloper.blogspot.co.uk/2012/10/automock-with-structuremap-and-moq.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T15:30:28.040

尝试像这样重新安排您的测试

```
 //arrange
   var mockLogger = new Mock<ILogger>();
   var classUnderTest = new Foo(mockLogger.Object);

   //act
   classUnderTest.DoSomething();

   //assert
   mockLogger.Verify(l => l.Fatal("My test message"), Times.Once()); 
```

这样您就不需要双重断言，也不需要重复的测试数据。基本上，我建议*要么通过使用*`Setup` *或*使用`Verify`语法预先设置预期的调用来进行严格的模拟。我个人更喜欢验证语法，因为断言的内容非常清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:34:05.397

我同意很多测试感觉重复，但我不认为事情可以比你描述的更容易。

所有单元测试都遵循以下模式：setup-execute-assert（至少是好的）。这正是您的示例优雅地所做的。你可以争论你是如何设置的，你是如何断言的，但是你已经在一行代码中完成了每一个，并且很难找到一种方法来达到顶峰。

# html - HTML 电子邮件文本垂直对齐

> ID：13528749
> 
> 赞同：6
> 
> 时间：2012-11-23T12:01:38.670
> 
> 标签：html, email, text, alignment

我目前有一个奇怪的（嗯，html 电子邮件......）垂直显示问题，它让我发疯。

基本上我所拥有的是表格：左侧的文本和右侧的图像。问题是文本与顶部垂直对齐。我尝试过`valign="middle"`，css `vertical-align:middle;`，甚至`line-height:value;`没有任何帮助。图像基本上位于该 TD 的顶部（TD 高度与图像的高度相同）

这是代码：

```
<table border="0" cellpadding="0" cellspacing="0" width="600" id="header">
<tr>    
<td border="0" cellpadding="0" cellspacing="0" width="600" align="left" valign="middle" style="text-transform: uppercase;font-family: tahoma,geneva,sans-serif;font-size: 14px;color: #898989;letter-spacing: 2px;">
<strong>Text field</strong>
<img src="link_to_image.jpg" style="display:block;" align="right" valign="bottom" width="230" height="49" alt="Logo">
</td>
</tr>
</table> 
```

我需要在同一个 TD 中制作图像和文本，否则图像在下面的另一个图像之间有空间。

有没有其他人遇到过类似的问题？有任何想法吗？

问候， 巴塞卡斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T12:17:22.770

你可以让它在浏览器中工作，但鉴于它是一个 html 电子邮件，你必须将你的表格单元格分成两列，一列是文本，另一列是图像。这是 Outlook 正确解释它的唯一方法。您可以尝试将图像标签包裹在 div 中，但这对于前景而言又存在缺陷。

# android - Trigger.io 和自定义键盘

> ID：13528752
> 
> 赞同：6
> 
> 时间：2012-11-23T12:01:40.640
> 
> 标签：android, user-interface, trigger.io

我在 Android 平台上使用 Trigger.io，我很好奇是否可以改变输入字段的工作方式。

我知道最近 trigger.io 发布了原生 ui 更新，但我需要的是这样的东西。

```
<input type="number" name="age" />  
// this should open a small numeric keyboard

<textarea name="comment"></textarea>
//this should open a custom keyboard with only keys I want on it 
```

有可能吗？可以通过本机插件完成吗？或者我是在追求一些很难在这里完成的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:23:25.623

在输入字段上设置 type="number" 已经导致显示数字小键盘，而不是 iOS 和 Android 上的默认小键盘。

但是，这些仍将是默认的本机键盘。要将它们自定义为仅包含您想要的键，您将有两个选项：

1）编写一个原生插件隐藏默认并显示您自己的自定义键盘： [http ://docs.trigger.io/en/v1.4/modules/native/index.html](http://docs.trigger.io/en/v1.4/modules/native/index.html)

您还需要编写 JavaScript 来检测您感兴趣的特定类型的输入元素何时成为焦点，并触发插件方法。

2) 根据您自己的规范创建一个 HTML5 输入键盘，并在您选择输入元素时显示该键盘。您可以使用此处的建议阻止默认键盘显示： [防止键盘在文本框焦点上弹出/在 iPad webapps 中单击](https://stackoverflow.com/questions/3777669/prevent-keyboard-from-popping-on-textbox-focus-click-in-ipad-webapps)

我有兴趣了解更多关于您需要这种级别的定制的用例。用户熟悉默认输入键盘元素，所以一般来说我建议坚持使用它们。

# html - 谷歌应用程序脚本 html 打印代码而不是运行

> ID：13528753
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:01:44.857
> 
> 标签：html, google-apps-script

我将以下内容存储在名为“temp”的 google 脚本 html 文件中：

```
<body>

    <table>
      <? var feedback = getDatabaseFeedback();
          for (var i=0; i < feedback.length; i++){ ?>
        <tr>
        <? for (var j=0; j < feedback[i].length; j++) { ?>
          <td> <?= feedback[i][j] ?> </td>
        <? } ?>
        </tr>
      <? } ?>
    </table>

</body> 
```

这是从谷歌脚本文件提供的：

```
function doGet() {
  return HtmlService.createHtmlOutputFromFile('temp');
} 
```

但`"<? ?>"`它实际上不是在标签中运行代码，而是将代码打印到浏览器的屏幕上。我在这里做错了吗？请指教 ..

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:10:43.740

使用模板时，应使用以下内容，而不是在 doGet 方法中返回 createHtmlOutputFromFile：

```
function doGet() {
  return HtmlService.createTemplateFromFile('temp').evaluate();
} 
```

# android - 显示主页按钮时操作栏占据整个屏幕

> ID：13528755
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:01:48.103
> 
> 标签：android, android-actionbar, actionbarsherlock

我在使用 ActionBar 时遇到了这个问题并努力寻找解决方案，在其他人的帮助和大量搜索下找到了它。

所以，这就是问题所在，我想在 ActionBar 中显示主页按钮和标题并使用

```
actionBar.setDisplayShowTitleEnabled(true);
actionBar.setDisplayUseLogoEnabled(true);
actionBar.setDisplayShowHomeEnabled(true); 
```

那么这在理论上应该有效，但它没有。出于某种原因，“setDisplayShowHomeEnabled(true);” 也使得动作栏占据了整个屏幕。

所以我不得不解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:01:48.103

答案是改变 actionBar 的样式。

我最初使用的是

```
<style name="MyActionBar" parent="@android:style/Widget.Holo.ActionBar.Solid">
            <item name="android:background">#000000</item>                                           
</style> 
```

后来改成

```
"@android:style/Widget.Holo.ActionBar 
```

这也出现在操作栏中 Sherlock 中，[这](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/Cnd7Qcx4xTw)是找到解决方案的地方。

这有助于解决问题。所以任何面临类似情况的人，请尝试改变风格。希望这可以帮助。

# powershell - 如何从 WMI 类列出的值中获取计数...

> ID：13528758
> 
> 赞同：0
> 
> 时间：2012-11-23T12:01:57.660
> 
> 标签：powershell, scripting, vbscript

我有下面的 vbscript.... 执行时它将提供此类“SELECT * FROM Application”中的所有应用程序。我想要的是这些应用程序的计数...我正在寻找这个脚本vbscript 或 powershell ...

包名称总数..说如果app-v客户端有10个不同的应用程序，它应该显示为10个应用程序......

```
On Error Resume Next

Const wbemFlagReturnImmediately = &h10
Const wbemFlagForwardOnly = &h20

arrComputers = Array(".")
For Each strComputer In arrComputers
WScript.Echo
WScript.Echo "=========================================="
WScript.Echo "Computer: " & strComputer
WScript.Echo "=========================================="

Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\microsoft\appvirt\client")
Set colItems = objWMIService.ExecQuery("SELECT * FROM Application", "WQL", _
wbemFlagReturnImmediately + wbemFlagForwardOnly)

For Each objItem In colItems
WScript.Echo "CachedOsdPath: " & objItem.CachedOsdPath
WScript.Echo "GlobalRunningCount: " & objItem.GlobalRunningCount
WScript.Echo "LastLaunchOnSystem: " & WMIDateStringToDate(objItem.LastLaunchOnSystem)
WScript.Echo "Loading: " & objItem.Loading
WScript.Echo "Name: " & objItem.Name
WScript.Echo "OriginalOsdPath: " & objItem.OriginalOsdPath
WScript.Echo "PackageGUID: " & objItem.PackageGUID
WScript.Echo "Version: " & objItem.Version
WScript.Echo
Next
Next

Function WMIDateStringToDate(dtmDate)
WScript.Echo dtm: 
WMIDateStringToDate = CDate(Mid(dtmDate, 5, 2) & "/" & _
Mid(dtmDate, 7, 2) & "/" & Left(dtmDate, 4) _
& " " & Mid (dtmDate, 9, 2) & ":" & Mid(dtmDate, 11, 2) & ":" & Mid(dtmDate,13, 2))
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:55:19.887

如果您使用 wbemFlagForwardOnly 标志，您将无法获得 SWbemCollection 项目计数，因此请在没有它​​的情况下执行查询。这是一个例子：

```
Set objWMIService = GetObject("winmgmts:")
Set colItems = objWMIService.ExecQuery("Select * From Win32_Process")

WScript.Echo colItems.Count

For Each objItem In colItems
    WScript.Echo objItem.Name
Next 
```

# ruby-on-rails - 回形针不保存文件属性

> ID：13528762
> 
> 赞同：1
> 
> 时间：2012-11-23T12:02:04.620
> 
> 标签：ruby-on-rails, paperclip, nested-forms

我的应用程序中有一个文件模型，它基本上是一个只有回形针文件的模型。我正在尝试使用一些嵌套表单上传一些文件，但每次我保存文件模型时，实际文件都会被上传，但所有回形针默认列仍然为零。这是我正在使用的模型：

```
class Arquivo < ActiveRecord::Base

    attr_accessible :arquivo, :arquivo_file_name, :arquivo_file_size, :arquivo_content_type, :arquivo_updated_at

    has_one :aluno_documento

    attr_accessor :arquivo_file_name, :arquivo_file_size, :arquivo_content_type, :arquivo_updated_at

    has_attached_file :arquivo

    validates :arquivo_file_name, :presence => true
    validates_attachment_presence :arquivo
    validates_attachment_size :arquivo, :less_than => 1.megabyte, :if => :arquivo
    validates_attachment_content_type :arquivo, :content_type => 'application/pdf', :message => :invalid, :if => :arquivo
end 
```

这是我正在构建 Arquivo 的（多级）嵌套表单的参数：

`{"arquivo"=>#<ActionDispatch::Http::UploadedFile:0x00000009176958 @original_filename="SGCAv3.7.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"pessoa[alunos_attributes][0][aluno_documentos_attributes][0][arquivo_attributes][arquivo]\"; filename=\"SGCAv3.7.pdf\"\r\nContent-Type: application/pdf\r\n", @tempfile=#<File:/tmp/RackMultipart20121123-16651-se21y5>>}`

这就是我在 IRB 中调试时发生的情况：

```
ar = Arquivo.new(passing params above)
    => #<Arquivo id: nil, arquivo_file_name: nil, arquivo_content_type: nil, arquivo_file_size: nil, arquivo_updated_at: nil> 
ar.arquivo_file_name
    => "SGCAv3.7.pdf"
ar.arquivo_content_type
    => "application/pdf"
ar.save
    => true
ae = Arquivo.last
    => #<Arquivo id: 9, arquivo_file_name: nil, arquivo_content_type: nil, arquivo_file_size: nil, arquivo_updated_at: nil>
ae.valid?
    => false
ae.arquivo_file_name
    => nil 
```

我看了又看，希望发现这是由一些愚蠢的事情引起的，但我根本无法理解这是怎么发生的，尤其是 Arquivo 对象实际上正在被验证但所有字段仍然为空的部分？！？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:59:59.667

我发现了这个问题，它实际上与回形针没什么关系：

事实证明，我的带有回形针附件的 Arquivo 模型没有将回形针属性标记为“attr_accessible”。在 Rails 3.2 中，您有一个属性白名单，如果某个属性不在白名单 (attr_accessible) 中，则无法使用表单分配它（需要更多信息）。这用于保护用户手动将字段添加到表单并提交比他应该更多的数据。

通常，Rails 会抛出“无法批量分配属性：attr1，attr2，...”异常，但在这种情况下它没有。我仍然不知道是因为回形针忽略了这个错误还是因为嵌套级别或两者兼而有之。只需将回形针属性添加到白名单即可。

# events - 如何在 windows phone 中创建全局用户事件监听器？

> ID：13528763
> 
> 赞同：0
> 
> 时间：2012-11-23T12:02:07.017
> 
> 标签：events, user-input, windows-phone

我想创建一个小应用程序，建议我在哪里粘贴剪贴板的内容（主要是从电子邮件到日历或搜索）。

如何创建在剪贴板内容更改时触发的侦听器/挂钩？例如：当[Clipboard.ContainsText](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ms597026%28v=vs.105%29.aspx)更改时创建 toast。

请注意，我不需要知道剪贴板的内容。对此的替代方案是挂钩“复制”、“选择更改”或任何全局手势或单击事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:37:32.397

我知道没有剪贴板事件。您最好的选择是创建一个长按事件来检查剪贴板的内容并将其与之前的剪贴板内容进行比较，您必须自己存储这些内容。

# objective-c - CustomController 类作为 SensibleTableView 中的 CustomCell？

> ID：13528767
> 
> 赞同：0
> 
> 时间：2012-11-23T12:02:14.517
> 
> 标签：objective-c, ios5, uitableview, frameworks, nsuserdefaults

我目前使用 Sensible TableView Framework 为新应用创建搜索过滤器掩码。一切正常，但最新的 Screendesign 带来了新问题。

现在需要在最小值和最大值之间选择一个范围。我们现在必须创建一种新类型的自定义 RangeSlider（与 UISliderView 相似），而不是使用两个数字文本字段来定义范围。现在我创建了 RangeSlider（带有两个拇指标记的滑块）作为 CustomClass，没有 xib 文件。我现在必须在我的 tableview 中将其实现为 customCell？仍然无法弄清楚如何通过 STV 做到这一点。

我的 RangeSlider 需要设置一些属性：

*   浮动最小值；
*   浮动最大值；
*   浮动最小范围；
*   浮动选定最小值；
*   浮动选定最大值；

并通过更改属性值来响应用户交互。

![范围滑块：这就是它的样子。](../Images/b5de1ccc6137c9ab778638b49ca18d3d.png)

简而言之，我的问题：如何在没有 xib 文件的情况下将我的 RangeSlider 类实现为 CustomCell？而且.. 是否也可以使用 SCUserDefaultsDefinition 跟踪我的 customCell 的用户交互？

**这就是我创建 STV 的方式：**

```
SCUserDefaultsDefinition *userDefaultsDef = [SCUserDefaultsDefinition definitionWithDictionaryKeyNamesString:@"Search Filter:(gender,ageRangeSlider,zip,country)"];
SCPropertyDefinition *genderDef = [userDefaultsDef propertyDefinitionWithName:@"gender"];
genderDef.title = @"Gender";
genderDef.required = TRUE;
genderDef.type = SCPropertyTypeSelection;
genderDef.attributes = [SCSelectionAttributes attributesWithItems:[NSArray arrayWithObjects:@"f", @"m", nil] allowMultipleSelection:NO allowNoSelection:NO];
genderDef.autoValidate = TRUE;

/*#### CUSTOMCELL IMPLEMENTATION HERE #### */

SCPropertyDefinition *zip = [userDefaultsDef propertyDefinitionWithName:@"zip"];
zip.title = @"Zip-Code";
zip.type = SCPropertyTypeNumericTextField;
zip.attributes = [SCNumericTextFieldAttributes attributesWithMinimumValue:[NSNumber numberWithInt:01] maximumValue:[NSNumber numberWithInt:99] allowFloatValue:NO];
[self.tableViewModel generateSectionsForUserDefaultsDefinition:userDefaultsDef];
SCTableViewSection *formSection = [self.tableViewModel sectionAtIndex:0];
formSection.cellActions.valueChanged = ^(SCTableViewCell *cell, NSIndexPath *indexPath)
{
     NSLog(@"\n\n*********** Key Binding Log ***********\n");
     NSLog(@"Value: %@\n", [cell boundValue]);
}; 
```

如果有人可以提供帮助，那就太好了！我非常感谢！如果您需要更多信息，请告诉我。

谢谢，

拉斯（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:09:02.660

好的，问题解决了！

**解决方案来了：** 要在 STV 中将 customClass 添加为 CustomCell，您必须使用 Classname/Nibname 和 customControl 的标记定义 SCCustomPropertyDefinition 作为 objectBinding。

```
SCUserDefaultsDefinition *userDefaultsDef = [SCUserDefaultsDefinition definitionWithDictionaryKeyNamesString:@"Search Filter:(gender,ageRangeSlider,zip,country)"];

SCCustomPropertyDefinition * customControl = [SCCustomPropertyDefinition definitionWithName:@"ageRangeSlider" uiElementClass:[CustomControlClass class] objectBindingsString:@"1:selectedRange;"];
[userDefaultsDef insertPropertyDefinition:customControl atIndex:1]; 
```

在创建新的 PropertyDefinition 并将其添加到您的 UserDefaultsDefinition 之后，您可以使用 PropertyDefinition (@"1:selectedRange;") 中的 ObjectBindingString 在您的 CustomControlClass 中配置响应属性。数字表示自定义单元格中每个控件的 IB 标记，而字符串代表用作此控件的 ResponseValue 的属性。

希望这对未来的其他开发者有所帮助。

# asp.net-mvc - Sencha Touch 控制器与 ASP.NET MVC 控制器有何不同

> ID：13528768
> 
> 赞同：1
> 
> 时间：2012-11-23T12:02:16.253
> 
> 标签：asp.net-mvc, sencha-touch

使用 ASP.NET MVC 控制器，控制器本身会响应来自客户端的请求以重建视图和/或提供数据。

但是，我试图了解视图与 Sencha Touch 控制器的关系。我在任何地方都没有看到控制器实际上是如何创建视图的。我错过了什么吗？

这与 ASP.NET MVC 控制器相比如何？

**更新** 自一些调查以来对我的原始查询的更新。似乎所有控制器都由应用程序加载，并且控制器本身不知道它所引用的任何特定视图。它似乎从任何视图上的任何控件监听事件。因此，控制器实际上可以响应来自 2 个完全不同的视图的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:29:04.347

您还可以在“config>control”部分定义控制器侦听的控件，您使用类似 css 的选择器语言来选择控件，例如：

```
Ext.define('App.controller.MyController', {
    extend: 'Ext.app.Controller',

    config: {
        control: {
            'button': { tap: 'onButtonTap' },
            '#superButton': { tap: 'onSuperTap' }, //select by ID
            '#SpecificView textarea': {change: 'onChange'} // all textareas in the id:View
        }
    }
    ...
} 
```

# maps - 从谷歌地图地图中获取街道/房屋

> ID：13528772
> 
> 赞同：0
> 
> 时间：2012-11-23T12:02:30.100
> 
> 标签：maps

是否可以从谷歌地图中的给定地图中获取地址列表？如果没有，是否有任何服务可以提供这些信息？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:18:04.797

您可能想看看 Google Places API： [https ://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

> Google Places API 是一项服务，它使用 HTTP 请求返回有关 Places 的信息（在此 API 中定义为场所、地理位置或显着的兴趣点）。地点请求将位置指定为纬度/经度坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:53:58.120

因此，您指定了一个地理矩形并希望在其中包含所有街道。
我怀疑是否有为此提供服务。
如果您找不到服务，这是一项非常艰巨的任务：
您必须将所有街道的矢量存储在例如空间数据库中并查询该矩形。矢量数据可在 openstreetmap.org 免费获得，具体质量因国家而异。

# android - 由 AppWidgetProvider 扩展的类的 onReceive() 中的 updatePeriodMillis 不起作用

> ID：13528776
> 
> 赞同：0
> 
> 时间：2012-11-23T12:02:40.247
> 
> 标签：android, appwidgetprovider

不知道这是否会被另一个线程回答，但是在寻找答案的一段时间内，我没有找到答案。

我正在实现一个应用程序小部件，以每 3000 万次显示一些文本，但在我单击小部件之前它没有更新。这是我的 onUpdate 方法：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) 
      {
            // Get all ids
            ComponentName thisWidget = new ComponentName(context, MyWidgetProvider.class);
            int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
            Calendar getToday = Calendar.getInstance();
            for (int widgetId : allWidgetIds) 
            {
                  int number = (new Random().nextInt(100));

                  RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
                  // Set the text
                  String n = ""+number;
                  remoteViews.setTextViewText(R.id.update, n);
                  remoteViews.setTextColor(R.id.update, Color.BLUE);

                  // Register an onClickListener
                  Intent intent = new Intent(context, MyWidgetProvider.class);

                  intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
                  intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

                  PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
                  remoteViews.setOnClickPendingIntent(R.id.update, pendingIntent);
                  appWidgetManager.updateAppWidget(widgetId, remoteViews);

            } 
```

我的代码有什么问题？谁能帮帮我。提前致谢

**添加 ：**

```
<appwidget-provider 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:updatePeriodMillis="110000" 
    android:initialLayout="@layout/widget_layout" 
    android:minHeight="72dp"
    android:minWidth="300dp">
</appwidget-provider> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:56:31.803

更新不会超过每 30 分钟一次，即使您的 updatePeriodMillis 指定了更频繁的间隔。请参阅[AppWidgetProviderInfo 文档](http://developer.android.com/reference/android/appwidget/AppWidgetProviderInfo.html#updatePeriodMillis)。

# jsf-2 - JSF 生命周期阶段执行期间的高 CPU 使用率

> ID：13528780
> 
> 赞同：0
> 
> 时间：2012-11-23T12:02:53.277
> 
> 标签：jsf-2, glassfish-3, cpu-usage, thread-dump

在我们的性能测试中，我们遇到了很高的 cpu 使用率 (100%)，并且线程转储表明大多数时候线程要么执行恢复视图或呈现 JSF 生命周期的响应阶段，要么在访问包含 jar 文件时被阻塞xhtml 页面。

可运行线程的线程转储之一是

```
java.lang.Thread.State: RUNNABLE
at java.util.HashMap.get(HashMap.java:317)
at javax.faces.component.ComponentStateHelper.get(ComponentStateHelper.java:174)
at javax.faces.component.ComponentStateHelper.add(ComponentStateHelper.java:216)
at javax.faces.component.UIComponent.setValueExpression(UIComponent.java:436)
at com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler$CompositeComponentRule$CompositeExpressionMetadata.applyMetadata(CompositeComponentTagHandler.java:631)
at com.sun.faces.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:81)
at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:129)
at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:102)
at com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler.setAttributes(CompositeComponentTagHandler.java:246)
at com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler.applyNextHandler(CompositeComponentTagHandler.java:184)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
at com.sun.faces.facelets.tag.ui.IncludeHandler.apply(IncludeHandler.java:120)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at com.sun.faces.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:107)
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:178)
at com.sun.faces.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:395)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:366)
at com.sun.faces.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:112)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:155)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
at com.sun.faces.facelets.tag.ui.IncludeHandler.apply(IncludeHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 
```

而阻塞线程的线程跟踪是

```
java.lang.Thread.State: BLOCKED (on object monitor)
at java.util.zip.ZipFile.getEntry(ZipFile.java:302)
- waiting to lock <0x00000000c0f678f8> (a java.util.jar.JarFile)
at java.util.jar.JarFile.getEntry(JarFile.java:225)
at java.util.jar.JarFile.getJarEntry(JarFile.java:208)
at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:817)
at sun.misc.URLClassPath$JarLoader.findResource(URLClassPath.java:795)
at sun.misc.URLClassPath.findResource(URLClassPath.java:172)
at java.net.URLClassLoader$2.run(URLClassLoader.java:551)
at java.net.URLClassLoader$2.run(URLClassLoader.java:549)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findResource(URLClassLoader.java:548)
at java.lang.ClassLoader.getResource(ClassLoader.java:1138)
at java.lang.ClassLoader.getResource(ClassLoader.java:1133)
at org.glassfish.web.loader.WebappClassLoader.getResource(WebappClassLoader.java:1156)
at org.glassfish.web.loader.WebappClassLoader.getResourceFromJars(WebappClassLoader.java:1111)
at org.apache.catalina.core.StandardContext.getMetaInfResource(StandardContext.java:7586)
at org.apache.catalina.core.StandardContext.getResource(StandardContext.java:6979)
at org.apache.catalina.core.ApplicationContext.getResource(ApplicationContext.java:382)
at org.apache.catalina.core.ApplicationContextFacade.getResource(ApplicationContextFacade.java:260)
at com.sun.faces.context.ExternalContextImpl.getResource(ExternalContextImpl.java:502)
at com.sun.faces.application.resource.WebappResourceHelper.getURL(WebappResourceHelper.java:119)
at com.sun.faces.application.resource.ResourceImpl.getURL(ResourceImpl.java:190)
at com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler.applyCompositeComponent(CompositeComponentTagHandler.java:366)
at com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler.applyNextHandler(CompositeComponentTagHandler.java:191)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
at com.sun.faces.facelets.tag.ui.IncludeHandler.apply(IncludeHandler.java:120)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at com.sun.faces.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:107)
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:178)
at com.sun.faces.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:395)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:366)
at com.sun.faces.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:112)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:155)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774)
at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:223)
at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188)
at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453)
at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 
```

我们使用 glassfish 3.1.1 作为我们的应用程序。我想获得有关如何进一步调查的建议。这是正常行为吗？glassfish 是否提供了解决阻塞线程的替代方案，例如资源的某些缓存机制等？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:12:01.720

问题是由于[JSF 缺陷造成](http://java.net/jira/browse/JAVASERVERFACES-2176)的。通过升级到最新的 Mojarra JSF jar 解决了这个问题！

# php - @mark at php 导致性能损失？

> ID：13528785
> 
> 赞同：0
> 
> 时间：2012-11-23T12:03:32.710
> 
> 标签：php, performance

我在许多块中使用 @ 标记（必要时）。听说会导致性能下降，是真的吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:07:47.283

您可以抑制这样的警告：

```
@$value = $_GET['value']; 
```

但您也可以只检查密钥是否存在

```
if (isset($_GET['value']))
  $value = $_GET['value']; 
```

或者

```
if (array_key_exists('value', $_GET))
  $value = $_GET['value']; 
```

我更喜欢后者，因为我认为这是最纯粹的形式。

# android-emulator - 应用程序意外停止并显示以下错误日志

> ID：13528787
> 
> 赞同：1
> 
> 时间：2012-11-23T12:03:35.483
> 
> 标签：android-emulator

我是 android 新手..我正在开发一个从 force.com 数据库中检索 GPS 坐标但目前遇到错误的应用程序。请帮助。我已在清单文件中包含所有必需品

```
11-23 14:57:14.014: D/AndroidRuntime(309): Shutting down VM
11-23 14:57:14.014: W/dalvikvm(309): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-23 14:57:14.064: E/AndroidRuntime(309): FATAL EXCEPTION: main
11-23 14:57:14.064: E/AndroidRuntime(309): java.lang.RuntimeException: Unable to resume activity {net.myproject.okello/net.myproject.okello.DisplayPlotsActivity}: java.lang.NullPointerException
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3128)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.os.Looper.loop(Looper.java:123)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-23 14:57:14.064: E/AndroidRuntime(309):  at java.lang.reflect.Method.invokeNative(Native Method)
11-23 14:57:14.064: E/AndroidRuntime(309):  at java.lang.reflect.Method.invoke(Method.java:521)
11-23 14:57:14.064: E/AndroidRuntime(309):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-23 14:57:14.064: E/AndroidRuntime(309):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-23 14:57:14.064: E/AndroidRuntime(309):  at dalvik.system.NativeStart.main(Native Method)
11-23 14:57:14.064: E/AndroidRuntime(309): Caused by: java.lang.NullPointerException
11-23 14:57:14.064: E/AndroidRuntime(309):  at net.myproject.okello.DisplayPlotsActivity.onResume(DisplayPlotsActivity.java:137)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.app.Activity.performResume(Activity.java:3823)
11-23 14:57:14.064: E/AndroidRuntime(309):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118)
11-23 14:57:14.064: E/AndroidRuntime(309):  ... 12 more
11-23 14:57:17.314: I/Process(309): Sending signal. PID: 309 SIG: 9 
```

# java - BufferedImage.createGraphics() 内存泄漏

> ID：13528788
> 
> 赞同：0
> 
> 时间：2012-11-23T12:03:36.673
> 
> 标签：java, memory, memory-leaks, bufferedimage, graphics2d

下面的代码会产生内存泄漏。

```
public static BufferedImage mergeImages2(BufferedImage base, Collection<Light> images) {
    BufferedImage output = new BufferedImage(base.getWidth(), base.getHeight(), BufferedImage.TYPE_INT_ARGB);

    Graphics2D g = output.createGraphics();
    g.drawImage(base, 0, 0, null);
    g.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, 1.0f));
    for (Light l : images) {
        g.drawImage(l.LIGHT_IMAGE, l.x, l.y, null);
        l.LIGHT_IMAGE.flush();
    }
    g.dispose();
    output.flush();
    return output;
} 
```

正如我在这里读到的：[BufferedImage.getGraphics() 导致内存泄漏，有解决办法吗？](https://stackoverflow.com/questions/2980573/bufferedimage-getgraphics-resulting-in-memory-leak-is-there-a-fix).createGraphics() 是问题所在。

这段代码可以经常执行（一个计时器被设置为以 50 毫秒的恒定速率滴答作响，如果灯正在“移动”，它会调用这段代码，但如果灯停留在同一个地方，则跳过此代码）。它运行良好，但每次都会使进程占用内存，这是一个级联进程，最终导致在不到一分钟的时间内从约 180 000 K 内存增加到超过 600 000 K 内存。从图形上看，它工作得很好，直到在某些时候笨拙变得太多（显然）并且 FPS 急剧下降。

现在我已经缩小了这个块产生泄漏的范围，因为评论它的调用会使问题消失。

绘制的基本图像为 1024x561，而灯光的图像相当小（50x50）。到目前为止，我一直在用阵列中的一盏灯对其进行测试。

任何避免内存泄漏的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:03:03.060

正如 Andrew Thompson 评论的那样，这不一定是内存泄漏。垃圾收集器的启动时间可能比您想象的要晚。您可以尝试使用 System.gc() 调用，当灯不移动时，尽管通常不建议调用 System.gc()：[System.gc() 何时执行任何操作](https://stackoverflow.com/questions/66540/system-gc-in-java)

或者，您可以尝试直接操作 BufferedImage 后面的整数数组（不容易），或者使用其他 API（如 JOGL）。

# javascript - 使用具有可变属性的 js 对象参数

> ID：13528789
> 
> 赞同：0
> 
> 时间：2012-11-23T12:03:36.847
> 
> 标签：javascript, arrays, arrayobject

我有以下数组。

```
[searchEngineOrder] => Array
        (
            [0] => keyword
            [1] => Google
            [2] => Yahoo
            [3] => Bing/MSN
        )

      [Datagrid] => Array
        (
            [Brand] => Array
                (                    
                    [1] => Array
                        (
                            [keyword] => About Jetwing Hotels Sri Lanka
                            [Google] => 1
                            [Yahoo] => 1
                            [Bing/MSN] => 1
                        )

                    [2] => Array
                        (
                            [keyword] => Dining at Jetwing Kurulubedda
                            [Google] => 1
                            [Yahoo] => 1
                            [Bing/MSN] => 1
                        )
           )       ) 
```

这是 php 数组。（我使用json编码）

现在我想创建表。我使用了以下代码。

var headers = data.searchEngineOrder;

```
 var trs = '<tr><td>Brand</td></tr>';

        var brands = data.Datagrid.Brand;

        for (x in brands) {
            trs += '<tr>';
            for (y in headers) {                    
               // trs += '<td>'+ brands[x].keyword +'</td>';  This is work               
               trs += '<td>'+ brands[x].headers[y] +'</td>';  //This is not work    
            }
            trs += '</tr>';
        }

        $('#keyword-table tbody').html(trs); 
```

如上面的代码 `brands[x].keyword`或品牌[x]。谷歌是工作。但是当我使用关键字或谷歌作为变量时，它不起作用。

请帮我。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:06:13.570

您正在寻找的是带有字符串的括号表示法：

```
brands[x]["keyword"] 
```

在 JavaScript 中，您可以通过两种方式访问​​对象属性（即这些属性）：

1.  使用点表示法和文字属性名称，例如`foo.property`.

2.  使用括号表示法和字符串属性名称，例如`foo["property"]`.

    在第二种情况下，字符串不必是文字字符串，它可以是任何表达式的结果——包括变量引用。所以：

    ```
    var k = "keyword";
    var value = brands[x][k]; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:06:58.103

你需要：

```
brands[x][headers[y]]; 
```

即，您使用`brand`with 键`x`，然后查找`header`with 键`y`，然后*将该*名称用作`brand`.

# canvas - 为不同的颜色变化重新绘制图像精灵

> ID：13528790
> 
> 赞同：0
> 
> 时间：2012-11-23T12:03:37.517
> 
> 标签：canvas, html5-canvas

让我再简化一下，

![在此处输入图像描述](../Images/bbfc45ebcf14cd7b82874bf78db4f095.png) 这个座位图像是尺寸为 150x54 的 PNG 格式，当我在画布上渲染它并获取它的图像数据时，我可以使用像素操作轻松地将其像素更改为 RGB 空间。现在这里我只更改 alpha > 0 的像素。所以对于颜色改变它的工作正常。

现在回到要点我想在座位上绘制图案而不是颜色，可以说我想绘制花朵图案，现在我想知道如何仅在座位的非透明区域上绘制？我知道我可以使用画布的 createPattern 函数，但它会在我不想要的所有 150x54 像素上呈现。

任何想法如何做到这一点？

我正在 HTML5 中创建自行车视图，我想用不同的颜色自定义自行车。

我已经使用 HTML 画布以及循环不同部分的不同图像来实现它。现在客户端需要渲染模式而不是颜色，所以我需要知道如何最好地在适当的 x,y 的适当部分渲染图像模式而不是颜色和大小。

在色彩渲染中，我使用像素操作并更改每个像素的 RGB 值，但对于图案我不知道如何使用 RGB 值更改图案图像数据？

知道如何做到这一点吗？或者有什么替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:53:41.793

您可以使用复合操作将绘图操作定位到某些像素。

例如，参见

[http://mrcoles.com/blog/canvas-composite-operations-demo-animation/](http://mrcoles.com/blog/canvas-composite-operations-demo-animation/)

如果您选择“source-atop”，则仅在下面有底层文本的地方绘制球。

这样，您可以仅在下面有鞍形非 alpha 像素的地方绘制目标图案。

我不确定 createPattern() 是否支持合成。如果它不这样做，那么您可以手动在所有图像上重复 drawImage() 。

# c - 在 C 中编码的 4 个整数大小数组上的 SSE 操作

> ID：13528791
> 
> 赞同：-4
> 
> 时间：2012-11-23T12:03:42.943
> 
> 标签：c, x86, sse, simd

抱歉之前的描述性问题。请允许我再次改述这个问题：

设置：

我需要使用 SSE 同时对 4 个数组中的 4 个 32 位值进行 ADD 和一些位操作，这 4 个数组中的所有元素都是整数大小（32 位）。结果进入第 5 个数组。

所以我的问题是：

1.  我需要包含哪些头文件和编译器标志才能使用 C 运行 SSE？
2.  Paul Stills 提供的示例代码有效吗？

另一个问题，如果我需要从整数 A 中读取最后一位，从整数 B 中读取第一位，并用我刚刚读取的值替换整数 C 中的最后一位和第一位，我可以在这里使用 SSE 吗？或者有什么快速的方法吗？而不是正常情况下的3次访问？

再次为之前的帖子道歉，感谢您的任何意见...^_^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:26:33.263

假如说：

*   您想从 4 个输入数组中添加相应的整数并将总和存储在第五个（输出）数组中
*   整数是 32 位
*   数组大小 (N) 是 4 的倍数
*   所有数组都是 16 字节对齐的

那么应该这样做：

```
#include <stdint.h>
#include <emmintrin.h>

const size_t N = 4096;  // size of input/output arrays

int32_t array0[N];      // 4 x input arrays
int32_t array1[N];
int32_t array2[N];
int32_t array3[N];
int32_t array_sum[N];   // output array

for (size_t i = 0; i < N; i += 4)
{
    __m128i v0 = _mm_load_si128(&array0[i]); // load 4 x vectors of 4 x int
    __m128i v1 = _mm_load_si128(&array1[i]);
    __m128i v2 = _mm_load_si128(&array2[i]);
    __m128i v3 = _mm_load_si128(&array3[i]);
    __m128i vsum = _mm_add_epi32(v0, v1);    // sum vectors
    __m128i vsum = _mm_add_epi32(vsum, v2);
    __m128i vsum = _mm_add_epi32(vsum, v3);
    _mm_store_si128(&array_out[i], vsum);    // store sum
} 
```

# php - 如何替换大字符串中的单词，不包括 img/a 等标签

> ID：13528796
> 
> 赞同：0
> 
> 时间：2012-11-23T12:03:54.197
> 
> 标签：php, regex, preg-replace

我想通过相关主题链接我的描述中出现的主题......现在我在这里使用 preg_replace() 来做同样的事情，但现在我需要帮助来格式化正则表达式模式来做到这一点......

因为我面临的挑战是：

1）描述可以包含所有类型的html标签

2）我的替换功能不应该替换标签和标签之间的任何东西

3）它不应该替换任何带有描述的标签的任何属性......比如如果有字符串Style和Beauty，如果我想链接Style作为我的主题..所以在这种情况下它不应该链接'style'属性相反，它应该从“Style and Beauty”字符串链接 Style

对上述查询的任何帮助将不胜感激....

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:08:42.853

根据输入的格式，使用 PHP 中可用的`DOMParser`类或几个 XML 解析库之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:23:55.653

详细说明我的评论：正则表达式不适合有状态或递归解析，也就是说，它们可以以非常高级的方式进行匹配，但是任何需要递归或状态的东西，最值得注意的是，任何类似于树的东西，都不能使用正则表达式进行解析。一些正则表达式方言（例如 Perl 正则表达式）具有反向引用和其他结构，这些结构将正则表达式扩展到严格的正则解析之外，但即使有了这些，事情充其量也是痛苦的。

相反，做理智的事情：找到一个可以处理您的输入的 DOM 解析器（例如 PHP 自己的 DOMDocument API），然后对生成的 DOM 树进行处理。一种行之有效的方法是递归遍历您的 DOM 树，然后在每个节点处查看它是否是文本节点；如果是，请将您的简单搜索和替换逻辑应用于其内容，否则下降到它和/或保持不变。或者，您可以向它抛出一个 XPath 表达式以提供文本节点，然后直接更改它们。或者，您可以将合适的替换函数挂接到 XslProcessor 中并在 XSLT 中进行替换 - 如果您熟悉 XSLT，这相当简单，但如果您不熟悉，DOM walker 可能更容易实现。

# python - Python：按任意列对文件进行排序，其中列包含时间值

> ID：13528800
> 
> 赞同：2
> 
> 时间：2012-11-23T12:04:07.453
> 
> 标签：python, sorting

我有一个人的 .txt 文件，每个人旁边都有两次。这是 .txt 文件

```
 Xantippe 09:00 11:00
 Erica 10:00 12:06
 Marcia 09:30 11:45
 Elizabeth 10:15 12:10
 Angela 11:30 13:45
 Freda 12:00 14:20
 Maria 12:30 14:10 
```

我需要读取文件，然后获取每一行，读取它，然后第二次对整个列表进行排序。请记住，在文件中数字是字符串对象。所以基本上最早的时间即 11:00 应该与他们之前的时间和名称一起位于列表的顶部。例如。`Xantippe 09:00 11:00`然后在另一行下一行，依此类推。

到目前为止，我已经完成了：

```
from Practise1 import timeCalc
with open('LadiesRace.txt', 'r') as f:
  readf = f.read();
  timeX = timeCalc()
  lis = readf.split('\n')
  with open('sortByFinishTime.txt','w') as w:
    def compare(x,y):
      if x[1] > y[1]:
        return 1
      if x[1] < y[1]:
        return -1
      return 0
    #lis.sort()
    for l in lis:
      #line = l.strip()
      slist = l.split(' ')
      print slist[2] 
```

问题是我不能使用字典，只能使用列表。我已经设法按名称按升序对列表进行排序，但是如何按最后一次排序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T12:20:32.190

首先，您需要将数据转换为可用的格式......所以让我们将其加载到内存中的列表中 - 重要的是要注意`dict`s 本身没有顺序，因此我们要使用列表。

```
with open('myfile.txt') as fin:
    lines = [line.split() for line in fin] 
```

这将删除任何尾随换行符并用空格字符将其分解......所以我们最终得到：

```
[['Xantippe', '09:00', '11:00'], ['Erica', '10:00', '12:06'], ['Marcia', '09:30', '11:45'], ['Elizabeth', '10:15', '12:10'], ['Angela', '11:30', '13:45'], ['Freda', '12:00', '14:20'], ['Maria', '12:30', '14:10']] 
```

然后，我们可以使用`.sort`a `list`-`itemgetter`的方法来获取序列的第 n 个元素，因此我们有 name、start、end，其中 end 是第二个索引（基于零是第一个，这将是姓名）

```
from operator import itemgetter
lines.sort(key=itemgetter(2)) 
```

我们最终得到：

```
[['Xantippe', '09:00', '11:00'], ['Marcia', '09:30', '11:45'], ['Erica', '10:00', '12:06'], ['Elizabeth', '10:15', '12:10'], ['Angela', '11:30', '13:45'], ['Maria', '12:30', '14:10'], ['Freda', '12:00', '14:20']] 
```

然后把它写回去：

```
with open('output.txt', 'w') as fout:
    for el in lines:
        fout.write('{0}\n'.format(' '.join(el))) 
```

# javascript - Ext js 如何将日期选择器处理程序移动到控制器中

> ID：13528801
> 
> 赞同：0
> 
> 时间：2012-11-23T12:04:08.657
> 
> 标签：javascript, extjs, controller, extjs4, extjs-mvc

我想将我的 DatePicker 处理程序事件移动到控制器中。但我不知道如何在那里捕获处理程序事件。

```
Ext.define('MyApp.view.MyGridPanel', {  
...........
    dockedItems:[
        {
            xtype:'toolbar',
            items:[
                {
                    id:'span3',
                    enableToggle:true,
                    text:'start date',
                    toggleGroup:'span',
                    scope:this,
                    menu:Ext.create('Ext.menu.DatePicker', {
                        handler:function (dp, date) {
                            grid=Ext.getCmp('MyGridPanelId');
                            var D = Ext.Date;
                            grid.startDate = date;

                            grid.setTimeSpan(D.add(date, D.HOUR, 8), D.add(grid.endDate, D.HOUR, 18));
                            debugger;
                        },
                        scope:this
                    })
                }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:34:44.937

您创建一个控制器并监听`select`事件，简单示例：

```
Ext.define('MyApp.controller.MyGridPanel', {
extends: 'Ext.app.Controller',
init: function() {
    this.control( 'toolbar > menu > datemenu', this.onDateSelect );
},
onDateSelect: function(dp, date) {
    grid=Ext.getCmp('MyGridPanelId');
    var D = Ext.Date;
    grid.startDate = date;
    grid.setTimeSpan(D.add(date, D.HOUR, 8), D.add(grid.endDate, D.HOUR, 18));
    debugger;
}

........... 
```

请注意，这将捕获您的所有`DateMenu select`事件，您可能希望在`this.control('...'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:32:22.110

您可以制作菜单处理程序来触发网格的自定义事件。`controll`然后通过方法在你的控制器中捕获它。

[此答案](https://stackoverflow.com/a/12721954/842075)中描述了这种技术。

## 更新

我以前的解决方案有点开销，因为您可以使用选择器组合来捕获菜单的事件而无需触发自定义事件。尝试以下选择器之一：

```
'gridpanel datemenu'
'#MyGridPanelId datemenu'
'gridpanel #span3'
'#span3' 
```

例如：

```
// controller
// ...
init: function() {
    this.control({
       '#span3': {
           select: this.onDateSelect
       }
    });
},
onDateSelect: function(dp, date) {
    // ...
    debugger;
} 
```

# android - 重用最大化：Webservice、Android客户端、Web Client，如何实现？

> ID：13528803
> 
> 赞同：3
> 
> 时间：2012-11-23T12:04:11.493
> 
> 标签：android, gwt, service, wsdl, restlet

我需要用 Java 构建一个简单的 Web 服务，上下文是 Google Application Engine。还需要两个客户端：Android 和 Web Page，用于浏览器。

我考虑使用类似 Restlet 的东西，并希望从中重用 Android 和 GWT 客户端。

能否请您给我一个提示，这是否是一条好路？你能建议别人吗？

特别是，我找不到这项技术如何与 WSDL 共存，以及我是否能够使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:09:51.150

这在很大程度上取决于您是希望像 phonegap 那样构建跨平台，还是像您下载的 gwt zip 文件的示例文件夹中提供的 mobilewebapp 示例那样保持简单。

mobilewebapp 示例不访问智能手机功能，但可以通过任何移动设备上的浏览器访问。phonegap 或类似的框架，如钛、sencha，提供了访问智能手机功能的 api。

更多信息——

[http://www.sapandiwakar.in/technical/api-research-study-iphone-and-android-applications/](http://www.sapandiwakar.in/technical/api-research-study-iphone-and-android-applications/)

[Sencha Touch 2 原生构建与在 Phonegap 中包装 Sencha Touch 2](https://stackoverflow.com/questions/10642897/sencha-touch-2-native-build-vs-wrapping-sencha-touch-2-in-phonegap)

[使用 Google App Engine 和 GWT 创建移动应用程序？](https://stackoverflow.com/questions/13575744/creating-a-mobile-app-using-google-app-engine-and-gwt/13576518#13576518)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:22:31.053

Restlet 框架主要用于开发 RESTful Web 服务，尽管在实践中您也可以发出和接收 SOAP 调用来桥接旧系统（尽管不支持 WSDL）。

有关 GWT 和 Android 客户端的帮助，请参阅：

[http://wiki.restlet.org/docs_2.1/13-restlet/21-restlet/318-restlet/303-restlet.html](http://wiki.restlet.org/docs_2.1/13-restlet/21-restlet/318-restlet/303-restlet.html)

# php - Ext Tree，数据显示在控制台，但不显示在页面上

> ID：13528809
> 
> 赞同：0
> 
> 时间：2012-11-23T12:04:30.973
> 
> 标签：php, html, mysql, extjs, tree

我的数据显示在控制台中，但不显示在 ExtJs 树中？

我的.php文件

```
 $data = array();

    $sql = "";

    if (!isset($_POST['node'])) {
        // first select the top node that have no parent
        $sql = "SELECT id_no,value_data FROM extjs_tree WHERE parent IS NULL";
    } else {
        // select data with parent_id = $_POST['node']
        $sql = "SELECT id_no, value_data FROM extjs_tree WHERE parent = '". $_POST['node'] ."'";                                            
    }   

    $q = mysql_query($sql);

    while ($r = mysql_fetch_array($q)) {
        // check if have a child node                           
        $qq = mysql_query("SELECT id_no, value_data FROM extjs_tree WHERE parent = '". $r['id'] ."'");

        if (mysql_num_rows($qq) > 0) {
            // if have a child
            $r['leaf'] = false;
            $r['cls'] = 'folder';
        } else {
            // if have no child
            $r['leaf'] = true;
            $r['cls'] = 'file';
        }
        $data[] = $r;

    }               

    echo json_encode($data); 
```

我的 JS 文件

```
Ext.require([
    'Ext.tree.*',
    'Ext.data.*',
    'Ext.tip.*'
]);

Ext.onReady(function() {
    Ext.QuickTips.init();

    var store = Ext.create('Ext.data.TreeStore', {
        proxy: {
            type:'ajax',
            actionMethods:'post',
            url:'get-nodes.php'

        },
        root: {
            text: 'Root Node',
            id: 'root_node',
            expanded: true
        },
        folderSort: true,
        sorters: [{
            property:'text',
            direction:'ASC'
        }]
    });

    var tree = Ext.create('Ext.tree.Panel', {
        store: store,
        renderTo: 'tree_el',
        height: 300,
        width: 250,
        title: 'Products Display'
    });
}); 
```

我得到了正确的树，我可以在控制台中看到数据。但我看不到 ExtJs 显示值？？

我现在的结果

![在此处输入图像描述](../Images/b4211d7ff2c26e8439f8706cde7be039.png)

我的预期结果应该是

![在此处输入图像描述](../Images/5ccad6e76f2bd2b5f472bf355273d0e9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:26:48.740

在您的情况下，您还可以将以下字段添加到您的商店：

```
{
  name: 'text',
  mapping: 'value'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:20:13.090

每个响应项都必须包含`text`字段。正如我从您的请求响应图像中看到的那样，您没有发送`text`字段。响应应如下所示：

```
[{
    "id": 2,
    "text": "Fruits", // this field is required
    ...
},
    ...
] 
```

# formula - LabVIEW公式节点中的冒泡排序

> ID：13528811
> 
> 赞同：2
> 
> 时间：2012-11-23T12:04:40.960
> 
> 标签：formula, labview, bubble-sort

我正在尝试创建图像的直方图。我正在考虑首先对像素数组进行冒泡排序，以便每个数字从低到高排序。

然后更容易计算一个像素的特定值出现了多少次。然后我可以把它放在一个图表中。 ![](../Images/d98b4ab62e9afc97e1fc4e7140093078.png)

但它总是给出一个错误然后我不明白。 ![](../Images/06c6c9ba68d6b086eb8ea74a0a3c6a3d.png)

我还想用公式节点制作所有东西，而不仅仅是块。

视觉的：

[http://i.stack.imgur.com/ZlmW2.png](https://i.stack.imgur.com/ZlmW2.png)

错误：

[http://i.stack.imgur.com/91TbS.png](https://i.stack.imgur.com/91TbS.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:23:00.590

在您的代码中，数字是标量而不是数组。

除了公式节点不维护状态之外，您还需要一个反馈节点来获取历史记录。有什么理由要使用公式节点而不是本地 LabVIEW 代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:53:22.343

您需要删除两个嵌套的LabVIEW for循环，您正在遍历公式节点内的数组，因此您不需要对循环进行操作。

# python - Django - formset unique_together 删除添加

> ID：13528813
> 
> 赞同：4
> 
> 时间：2012-11-23T12:04:49.620
> 
> 标签：python, django, unique-constraint, django-forms

让我们考虑这些模型

```
class Session(models.Model):
    staff = models.ForeignKey(User, verbose_name='Supplier')
    start_time = models.DateTimeField(_('start'))
    end_time = models.DateTimeField(_('end'))

class Participation(models.Model):
    session = models.ForeignKey(Session)
    atendee = models.ForeignKey(User, verbose_name='Attendee')
    class Meta:
        unique_together = ('session', 'attendee') 
```

我正在使用内联表单集来管理编辑器`Participations`。`Session`

想象以下场景：

*   我添加了参加者的参与
*   删除此参与（选中删除复选框）
*   将其添加回相同的与会者（新行）

如果我发送这个表单集，我会收到一个约束错误

> 已存在此会话和与会者的参与。

似乎验证没有考虑到已删除的孩子。
它被认为是一种正常的行为吗？
在那种情况下，我该如何妥善处理这种情况？

* * *

为了重现此行为，请将管理站点与这些管理类一起使用：

```
class PartInline(admin.TabularInline):
    model = Participation

class SessionAdmin(admin.ModelAdmin):
    inlines = [PartInline]

admin.site.register(Session, SessionAdmin) 
```

# node.js - 异步检索所有记录然后执行操作

> ID：13528818
> 
> 赞同：0
> 
> 时间：2012-11-23T12:04:55.933
> 
> 标签：node.js, mongodb

在 node.js 服务器中，使用 mongodb 本机驱动程序，我想从游标中检索记录，然后将它们输出为 JSON。我有这个（简化）

```
var ans = {ids: []};
cursor.each(function(err, doc) {
 if (doc) {
  ans.ids.push(doc.tag);
 }
});
cursor.count(function(err, result) {
 ans.count = result;
 res.send(JSON.stringify(ans));
}); 
```

结果是这样的`{ids:[], count: 3}`。换句话说，查询*似乎*在没有返回任何记录的情况下运行。我认为这是因为在`cursor.each`回调运行之前已经发送了数据。我如何重新构建它以确保在迭代之后发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:16:53.603

我找到了答案。[cursor.each](http://mongodb.github.com/node-mongodb-native/api-generated/cursor.html#each)的示例说“如果项目为空，则游标已用尽/为空并关闭”，因此：（省略错误处理）

```
var ans = {ids: []};
cursor.each(function(err, doc) {
 if (doc) {
  ans.ids.push(doc.tag);
 }
 else {
  cursor.count(function(err, result) {
   ans.count = result;
   res.send(JSON.stringify(ans));
  });
 }
}); 
```

# linux - 运行 linux 命令成功，但在 .sh 文件中失败。“没有这样的文件或目录 ”

> ID：13528819
> 
> 赞同：1
> 
> 时间：2012-11-23T12:05:01.310
> 
> 标签：linux

我写了一个 linux 命令，它在命令行中完美运行：

```
/bin/netstat -an | grep '3306' | sed 's/.*/[MYSQLMON]&/' > /home/bbWifiExt/logs/WIFIMonitor.log 
```

但是，当我将此代码复制到 .sh 并运行 .sh 文件时，我得到：

没有这样的文件或目录

谁能告诉我为什么？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:08:16.487

您必须将其称为

```
sh mycommand.sh 
```

或使您的 shell 脚本可执行。插入`#! /bin/sh`或`#! /bin/bash`作为第一行和

```
chmod +x mycommand.sh 
```

打电话之前

```
mycommand.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T10:18:40.193

对于我的情况（重命名并将文件从 Windows 复制到 linux），解决方案是：

> dos2unix script.sh

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:11:13.177

如果脚本的第一行类似于

```
#!/bin/sh 
```

和执行位设置即

```
chmod +x script.sh 
```

# php - Timthumb 未在特定域中显示外部站点图像

> ID：13528827
> 
> 赞同：4
> 
> 时间：2012-11-23T12:05:44.857
> 
> 标签：php, wordpress, timthumb

我在我的 wordpress 网站中使用 timthumbs。但是我包含了我在搜索此问题时发现的所有更改。

我已启用 "ALLOW_EXTERNAL" 和 "ALLOW_ALL_EXTERNAL_SITES" 。

```
 //Image fetching and caching
if(! defined('ALLOW_EXTERNAL') )            
define ('ALLOW_EXTERNAL', TRUE);                        
// Allow image fetching from external websites. Will check against ALLOWED_SITES if ALLOW_ALL_EXTERNAL_SITES is false

if(! defined('ALLOW_ALL_EXTERNAL_SITES') )
 define ('ALLOW_ALL_EXTERNAL_SITES', true); 
```

我已经重新创建了我的 .htaccess 文件。我还在 .htaccess 文件中包含以下代码。

```
<IfModule mod_security.c>
SecFilterEngine Off
SecFilterScanPOST Off
</IfModule> 
```

但它在我的域中不起作用。但它正在其他领域工作。

我试图访问的图像 URL 是

网址：[http ://webhugh.org/viyugam/timthumb/timthumb.php?src=http://farm3.static.flickr.com/2340/2089504883_863fb11b0a_z.jpg](http://webhugh.org/viyugam/timthumb/timthumb.php?src=http://farm3.static.flickr.com/2340/2089504883_863fb11b0a_z.jpg)

我得到**403 禁止**，我也给了 0755 缓存文件夹的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:34:38.050

`500 Internal Server Error`每当您尝试直接访问 timthumb 或将本地图像传递给它（例如`http://webhugh.org/viyugam/timthumb/timthumb.php?src=/images/webhugh-slider-background.png&w=100&h=100`）时，您都会得到一个。

请尝试使用干净且正常工作的 TimThumb，看看您是否仍然有这个问题。

如果您可以呈现本地图像示例，则只需将外部域添加到您允许的域。

如果不能，那么很可能是服务器配置错误 - 尝试在 timthumb.php 的开头添加以下行：

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

# asp.net - ExtenderControl 未按预期运行

> ID：13528833
> 
> 赞同：1
> 
> 时间：2012-11-23T12:06:20.590
> 
> 标签：asp.net, ajaxcontroltoolkit, asp.net-controls, autocompleteextender

我正在尝试制作自己的中继器控件版本。它不是 DataBoundControl；它不会绑定到 DataSource、DataSourceID、DataBind 方法等。它有一个嵌套在其中的模板，以及一个名为 的属性`RepeatCount`，它将重复上述属性指定的模板内的任何内容。

但是，如果您在模板中添加一个文本框和一个与之关联的自动完成扩展器，那么自动完成的功能就会被破坏。这是一张显示大量问题的图片：

![在此处输入图像描述](../Images/d72e0a96d22245c582d40c30d02d136a.png)

*   注意生成的文本框 ID。我添加的只是 `ID="TextBox1"`模板内部的一个文本框，但相同的名称/ID 重复了多次。

*   您可以看到文本框是可见的。要了解它为何可见，请查看后面的代码并查看
    我已处理的 ItemPreRender 事件（在 aspx 页面上）。如果我没有编写这样的代码，我会得到一个异常说：

![在此处输入图像描述](../Images/df9ff7a16bedfde454ebffdd30370dfa.png)

*   然而，在 pt2 中提到的编写代码并没有让我有任何收获。自动完成功能无法正常工作。

这里可能是什么问题？如果将其正确放入中继器控件并以类似的方式工作，它将起作用...

那么我在这里错过了什么？

以下是我分享的部分源代码：

## 页面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="MyRepeaterComplex.aspx.cs" Inherits="RelationalGridView.Web.MyRepeaterComplex" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc2" %>

<%@ Register Assembly="WebGui.Extensions" Namespace="WebGui.Extensions.MyRepeater"
    TagPrefix="cc1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>MyRepeater Sample</title>
    <style type="text/css">
        /*AutoComplete flyout */

        .autocomplete_completionListElement 
        {  
            margin : 0px!important;
            background-color : inherit;
            color : windowtext;
            border : buttonshadow;
            border-width : 1px;
            border-style : solid;
            cursor : 'default';
            overflow : auto;
            height : 200px;
            text-align : left; 
            list-style-type : none;
        }

        /* AutoComplete highlighted item */

        .autocomplete_highlightedListItem
        {
            background-color: #ffff99;
            color: black;
            padding: 1px;
        }

        /* AutoComplete item */

        .autocomplete_listItem 
        {
            background-color : window;
            color : windowtext;
            padding : 1px;
        }

    </style>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
        <cc1:MyRepeater ID="MyRepeater1" runat="server" RepeatCount="10">
            <Template>
                <p>Enter Name: <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox></p>                
                <cc2:AutoCompleteExtender 
                    ID="AutoCompleteExtender1" 
                    runat="server" 
                    TargetControlID="TextBox1"
                    ServicePath="AutoComplete.asmx" 
                    ServiceMethod="GetCompletionList"
                    MinimumPrefixLength="2" 
                    CompletionInterval="1000"
                    EnableCaching="true"
                    CompletionSetCount="20"
                    CompletionListCssClass="autocomplete_completionListElement" 
                    CompletionListItemCssClass="autocomplete_listItem" 
                    CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem"
                    DelimiterCharacters=";, :"
                    ShowOnlyCurrentWordInCompletionListItem="true">
                </cc2:AutoCompleteExtender>
            </Template>
        </cc1:MyRepeater>
    </div>
    </form>
</body>
</html> 
```

## 背后的 Apsx 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using AjaxControlToolkit;

namespace RelationalGridView.Web
{
    public partial class MyRepeaterComplex : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //MyRepeater1.ItemPreRender += new WebGui.Extensions.MyRepeater.MyRepeaterItemPreRenderDelegate(MyRepeater1_ItemPreRender);
        }

        protected void MyRepeaterItemPrerender(object sender, WebGui.Extensions.MyRepeater.MyRepeaterItemEventArgs e)
        {
            TextBox tbx = (TextBox)e.Container.FindControl("TextBox1");
            AutoCompleteExtender ace = (AutoCompleteExtender)e.Container.FindControl("AutoCompleteExtender1");
            ScriptManager.GetCurrent(this).RegisterExtenderControl(ace, tbx);
        }

    }
} 
```

MyRepeater 的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web.UI.WebControls;
using System.Web.UI;
using System.Collections;

namespace WebGui.Extensions.MyRepeater
{
    public delegate void MyRepeaterItemPreRenderDelegate(object sender, MyRepeaterItemEventArgs e);
    public class MyRepeater: WebControl
    {
        List<Control> Containers;
        [PersistenceMode(PersistenceMode.InnerProperty)]
        [TemplateContainer(typeof(MyRepeaterTemplateContainer))]
        public ITemplate Template { get; set; }

        public event MyRepeaterItemPreRenderDelegate ItemPreRender;

        public MyRepeater()
        {
            RepeatCount = 0;
            Containers = new List<Control>();
        }

        public int RepeatCount { get; set; }       

        protected override void OnPreRender(EventArgs e)
        {
            MyRepeaterItemEventArgs ex = new MyRepeaterItemEventArgs();
            for (int i = 0; i < RepeatCount; i++)
            {
                MyRepeaterTemplateContainer container = new MyRepeaterTemplateContainer();
                container.Page = Page;
                Template.InstantiateIn(container);
                if (ItemPreRender != null)
                {
                    ex.Container=container;
                    ItemPreRender(this, ex);
                }
                Containers.Add(container);
            }            
        }

        protected override void Render(HtmlTextWriter writer)
        {            
            foreach (Control ctrl in Containers)
            {                
                ctrl.RenderControl(writer);
                writer.WriteLine();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:02:32.417

Instead of instantiating your template in OnPreRender method you need to use CreateChildControls method. This method is used to create child control. The cause of the problem is that your extender is added to controls collection too late in Page life cycle and that's why it can't be registered.

I can advise to use Composite control as base one instead of WebControl. Dino Esposito has a very good article related to this area: [http://msdn.microsoft.com/en-us/library/aa479016.aspx](http://msdn.microsoft.com/en-us/library/aa479016.aspx).

还有一点需要注意：如果您创建从 WebControl 继承的自定义服务器控件，并希望同一命名容器（如页面等）中的两个实例具有不同的子控件 ID，那么您需要使用 INamingContainer 接口标记您的自定义控件。更多信息可以在这篇文章中找到：http: [//msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx)

# java - 使用java进行纯文本解析

> ID：13528835
> 
> 赞同：1
> 
> 时间：2012-11-23T12:06:40.230
> 
> 标签：java

我有一个来自 ssh 的输出，如下所示。我想使用 java 将以下输出解析为哈希图。任何建议都会有所帮助...

```
Name        : mysql                        Relocations: (not relocatable)
Version     : 5.1.61                            Vendor: CentOS
Release     : 4.el6                         Build Date: Fri 22 Jun 2012 05:58:59 AM PDT
Install Date: Tue 13 Nov 2012 02:23:23 AM PST      Build Host: c6b10.bsys.dev.centos.org
URL         : http://www.mysql.com
Summary     : MySQL client programs and shared libraries 
```

我的输出应该是一个像

**核心价值**

名称 mysql

重定位（不可重定位）

版本 5.1.61

发布 4.el6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:35:45.780

正则表达式应该在这里解决问题：

```
public static void main(String[] args) {
    StringBuilder sb = new StringBuilder();
    sb.append("Name        : mysql                        Relocations: (not relocatable)\n");
    sb.append("Version     : 5.1.61                            Vendor: CentOS\n");
    sb.append("Release     : 4.el6                         Build Date: Fri 22 Jun 2012 05:58:59 AM PDT\n");
    sb.append("Install Date: Tue 13 Nov 2012 02:23:23 AM PST      Build Host: c6b10.bsys.dev.centos.org\n");
    sb.append("URL         : http://www.mysql.com\n");
    sb.append("Summary     : MySQL client programs and shared libraries\n");

    Pattern p = Pattern.compile("([^\\r\\n:]+):\\s(.+?)(\\s{2,}|\\r\\n|\\r|\\n|$)");
    Matcher m = p.matcher(sb.toString());
    while(m.find()) {
        String key = m.group(1).trim();
        String value = m.group(2);

        System.out.println(key + " = \"" + value + "\"");
    }
} 
```

输出：

```
Name = "mysql"
Relocations = "(not relocatable)"
Version = "5.1.61"
Vendor = "CentOS"
Release = "4.el6"
Build Date = "Fri 22 Jun 2012 05:58:59 AM PDT"
Install Date = "Tue 13 Nov 2012 02:23:23 AM PST"
Build Host = "c6b10.bsys.dev.centos.org"
URL = "http://www.mysql.com"
Summary = "MySQL client programs and shared libraries" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:26:31.343

试试这个正则表达式作为起点：

```
([a-zA-Z][a-zA-Z ]*): (.*?)(( {2,})|$) 
```

第一组应捕获键，第二组应捕获值。它假设两件事：

1) 一个值后至少有两个空格或行尾。2）一个值中永远不会有两个空格一个接一个。

（重要的是，这些假设确实正确。在您的示例中它们是正确的，但您需要验证您的输入是否始终正确。）

我根据您上面的示例对其进行了测试，它似乎可以工作，请尝试：[http](http://regexpal.com/) ://regexpal.com/ （您需要在顶部启用复选框“^$ match at line breaks”以使其工作）

如果该正则表达式没问题，请使用`Pattern`和`Matcher`从 Java API 构建您的哈希图。啊，您应该`trim()`匹配匹配的键和值以消除末尾的额外空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:11:35.430

尝试创建一些正则表达式。由于许多项目都定义得很好，您可以使用`String.indexOf()`. 然后获取`substring()`, 并开发 hashmap。

# android - 其他应用程序在我的应用程序之前收到消息

> ID：13528839
> 
> 赞同：0
> 
> 时间：2012-11-23T12:06:47.860
> 
> 标签：android, android-layout, android-intent, android-ndk

在我的应用程序中，收到特定消息后，我会执行一些任务。它运行良好，但是当设备中安装了其他一些短信应用程序（如 HookUp（in micromax）和 go sms pro）时，这些应用程序也会收到消息。我已为我的申请设置了最高优先级。我想停止绕过这些应用程序的短信。请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:05:28.690

> 我想阻止他们但不知道怎么做？

要求用户卸载这些应用程序。

我的猜测是，`BroadcastReceivers`以相同优先级注册的决胜局是安装顺序。这似乎是行为，基于这些 StackOverflow 问题中描述的行为。因此，如果这些其他应用程序是在您之前安装的，它们将首先获得广播，而您对此无能为力。

如果用户足够重视您的应用程序，他们将卸载那些其他应用程序（这肯定会给您优先权），也许稍后会重新安装它们（这可能会给您优先权）。

# c++ - 从 Boost::Tokenizer 中删除重复项？

> ID：13528841
> 
> 赞同：4
> 
> 时间：2012-11-23T12:06:50.917
> 
> 标签：c++, boost, boost-tokenizer

我正在尝试拆分以逗号分隔的字符串，然后对每个令牌执行一些操作，但忽略重复项，等等。大致如下：

```
int main(int, char**)
{
   string text = "token, test   string";

  char_separator<char> sep(", ");
  tokenizer< char_separator<char> > tokens(text, sep);
  // remove duplicates from tokens?
  BOOST_FOREACH (const string& t, tokens) {
    cout << t << "." << endl;
  }
} 
```

有没有办法在 boost::tokenizer 上做到这一点？

我知道我可以使用 boost::split 和 std::unique 来解决这个问题，但我想知道是否有办法使用标记器来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:43:31.630

boost.tokenizer 可以做很多很酷的事情，但它不能做到这一点，答案确实是“不”。

如果您只想删除相邻的重复项，boost.range 可以帮助使其看起来更简洁：

```
#include <iostream>
#include <string>
#include <boost/range/adaptor/uniqued.hpp>
#include <boost/foreach.hpp>
#include <boost/tokenizer.hpp>

using namespace boost;
using namespace boost::adaptors;
int main()
{
    std::string text = "token, test   string test, test   test";

    char_separator<char> sep(", ");
    tokenizer< char_separator<char> > tokens(text, sep);
    BOOST_FOREACH (const std::string& t, tokens | uniqued ) {
        std::cout << t << "." << '\n';
    }
} 
```

这打印：

```
token.
test.
string.
test. 
```

为了仅对全局唯一令牌执行某些操作，您需要以一种或另一种方式存储状态。最简单的解决方案可能是中间集：

```
char_separator<char> sep(", ");
tokenizer< char_separator<char> > tokens(text, sep);
std::set<std::string> unique_tokens(tokens.begin(), tokens.end());
BOOST_FOREACH (const std::string& t, unique_tokens) {
        std::cout << t << "." << '\n';
} 
```

# mysql - mysql查询中的错误-使用日期检索数据

> ID：13528842
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:06:52.867
> 
> 标签：mysql, mysql-error-1064

我想从我的表 tbl_itunes_report 中计算特定月份的数据。表结构是

```
id  int pimary key
provider_country   varchar(50)
title   varchar(50)
product_type_identifier varchar(50)
begin_date varchar(50) 
```

这是我的查询

```
 SELECT 
 title,
 sum(CASE WHEN MONTH(begin_date)= '05' THEN 1 ELSE 0) as june
   FROM
 tbl_itunes_report
   WHERE
 `product_type_identifier` = '1T'
 group by title 
```

但这个查询对我不起作用。有一个错误显示

```
 #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') as june FROM tbl_itunes_report WHERE `product_type_identifier` = '1T' group' at line 3 
```

如果有人可以帮助我，请。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:08:21.707

您在 CASE 语句的末尾缺少 END 关键字

```
SELECT 
 title,
 sum(CASE WHEN MONTH(begin_date)= '05' THEN 1 ELSE 0 END) as june
   FROM
 tbl_itunes_report
   WHERE
 `product_type_identifier` = '1T'
 group by title 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:08:33.807

你错过了`END`. 代替

```
sum(CASE WHEN MONTH(begin_date)= '05' THEN 1 ELSE 0) as june 
```

和

```
sum(CASE WHEN MONTH(begin_date)= '05' THEN 1 ELSE 0 end) as june 
```

# css - 包装动态元素

> ID：13528844
> 
> 赞同：0
> 
> 时间：2012-11-23T12:07:00.887
> 
> 标签：css

这是我的小提琴[http://www.jsfiddle.net/UxUMG/](http://www.jsfiddle.net/UxUMG/)。我有一个下拉菜单。父 ul 具有 box-shadow 属性。当我将鼠标悬停在父菜单项上时，子 ul 出现时没有阴影。我必须做什么才能将整个菜单包裹在阴影中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:18:14.267

更改您的子类以包含 box-shadow 属性

```
.child {
    display: none;
    position: absolute;
    left: 160px;
    box-shadow: 5px 12px 18px rgba(0,0,0, 0.5);
    top: 0;
    z-index: 1;
} 
```

# django - 让 Django 首先搜索当前应用程序的消息文件 (.mo)

> ID：13528850
> 
> 赞同：0
> 
> 时间：2012-11-23T12:07:14.697
> 
> 标签：django, translation

Django 按此处记录的顺序搜索消息文件 (.mo)： [https ://docs.djangoproject.com/en/dev/topics/i18n/translation/#how-django-discovers-translations](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#how-django-discovers-translations)

是否可以让 Django 首先在 locale 目录中搜索当前正在使用的应用程序的消息文件？

我最近在一个项目中发现了一个错误，这是由两个应用程序具有相同的 message-id 但不同的翻译引起的。所有应用程序都有自己的语言环境目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:15:30.447

由于各种原因，恐怕这不是 django 的工作方式：

1.  一个短语应该有一个翻译。除了 Django，这也是 gettext 的问题（用于翻译消息的引擎）。此外，期望系统翻译所有页面中的单个短语并保持一致，这听起来很正常。毕竟它仍然是原始语言中的同一个短语。
2.  “当前应用程序”是什么意思？当前应用程序是生成当前视图的应用程序吗？翻译本身可能来自另一个应用程序的模块。如何决定这两种应用中的哪一种是合适的？翻译也可能是惰性的，这为此类决策增加了额外的复杂性。

我建议您重新排序您的应用程序`INSTALLED_APPS`以匹配您喜欢的翻译，或者使用该设置定义新的翻译消息路径`LOCALE_PATHS`以提供您自己的翻译。

**注意：**从技术上讲，可以通过提供此模块的自定义实现来覆盖 django.utils.translation.trans_real 中的默认行为，以根据需要更改行为（这是`translation()`此模块中实现选择算法的方法）。然后，您还应该覆盖`Trans`最初在`django.utils.translation.__init__`module 中定义的类以返回您的自定义 trans_real 模块（`MyCustomTrans`例如，命名这个新类）并将其明确设置为项目 init 模块中某处的翻译类，以便它在代码的早期加载：

```
from django.utils import translation
translation._trans = MyCustomTrans() 
```

现在将使用您的自定义算法，但这需要大量工作，而且我认为不值得麻烦。

# php - 设置在线服务器数据库并编写我的 android 本机应用程序以与之交互

> ID：13528851
> 
> 赞同：4
> 
> 时间：2012-11-23T12:07:17.300
> 
> 标签：php, android, sql, html, web

我正在开发一个非常简单的原生 Android 应用程序，其中包含一个带有今天、昨天、本周、本月和按日期搜索选项的简单主菜单。

![在此处输入图像描述](../Images/e00e5160374898a42d40acce41c81a06.png)

（我购买了 lynda 课程：“使用 Dreamweaver 构建 Android 和 iOS 应用程序”，使用 HTML5 以及应用程序的设计和功能，我没有太多麻烦。）

我对这个应用程序的最终目的是：我每天都会写名人简介（1 到 5 之间）。因此，当人们在“今天”选项中单击（例如）时，他们将访问我为今天创建的个人资料列表（昨天和其他人是对数据库中过去书面个人资料的检查）。

所以想象一下，今天某个 android 用户点击了 3 个配置文件选项（“Brad Pitt”、“Shakira”和“Cristiano Ronaldo”），我需要应用程序访问我的服务器数据库来更新它（“今天”配置文件）。

![在此处输入图像描述](../Images/6df64187a376911d7feb0309cfce389a.png)

最后...

![在此处输入图像描述](../Images/e874f454b43f7e6a36092879afda54d4.png)

在我想说的问题之前，我已经在 stackoverflow 上搜索并找到了非常相似的答案，但我是编程新手，当我阅读答案时，它们可能会有很大差异，以至于我对链接文档上的链接感到困惑。

问题：

1.  我想创建某种方法，我可以拥有一个具有不同个人资料（歌手、政治家、足球运动员）的模板，然后单击某种按钮以开始一个新的个人资料/文章，其中包含出生日期、职业、国籍、传记等。它的这可能吗？我该怎么做？用哪种编程语言？

2.  我必须创建什么样的服务器和什么样的数据库以及如何配置它以将信息发送到我的应用程序？

3.  我必须具备任何服务器规范才能使其更顺畅、更简单地工作吗？对于这个问题，价格不是问题。

4.  我应该在我的应用程序上编写什么样的代码，以便它可以从我的网站获取“今天的 3 个配置文件更新”？

5.  可以向我展示一些代码示例，这些代码示例可以在我的应用程序中选择主菜单上的“今天”按钮和应用程序检查今天的新配置文件并将用户作为选项呈现给我的应用程序中的这个简单步骤？因为如果我有这段代码，我可以更好地理解如何使用“Brad Pitt”选项上的个人资料详细信息来完成其余的工作。

希望你能理解我的问题。提前致谢。祝你今天过得愉快

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T14:11:15.477

假设您使用`Phonegap`框架来开发您的应用程序，我会这样做：首先获得一个能够运行`PHP`脚本的服务器/Webspace 和一个`MySQL Database`.
您还必须重新考虑这些应用程序的工作方式，例如您不能

> 配置它以将信息发送到我的应用程序

你需要一个服务器端脚本（我会选择`PHP`这个，它很容易学习并且几乎在每个服务器上都可用）。然后，此 PHP 脚本会查询您`MySQL Database`存储有关人员的所有信息的位置。要记住的是，您的客户端将轮询服务器并请求内容，除非请求，否则您不会主动向客户端发送任何内容，这就是`HTTP`工作方式。您的脚本在那里提供的接口称为[REST](http://www.gen-x-design.com/archives/create-a-rest-api-with-php/)接口。看看链接，它解释了一切都很好。您的输出格式应该是`JSON`这样的，以便以后在客户端应用程序中使用它非常好。执行诸如“今天发布了什么？”之类的事情。看看 SQL 查询是如何工作的并在你的脚本中实现它。

现在对于客户端，您可以使用 访问此数据，这`JavaScript`很可能`jQuery`会简化一切。使用 jQuery [$.getJSON](http://api.jquery.com/jQuery.getJSON/)函数访问您的`REST Interface`. 现在您可以使用基本的 jQuery 来包装这些数据以`HTML`将其呈现给用户。我知道这不是“示例代码”或您要求的任何内容，但它应该为您指明如何实现您想做的事情的正确方向。只需对上面列出的所有关键字进行谷歌搜索并继续阅读它，那么您应该能够构建这样的应用程序。

# c# - 在 C# 中使用 LINQ 获取分页结果

> ID：13528852
> 
> 赞同：1
> 
> 时间：2012-11-23T12:07:21.370
> 
> 标签：c#, jquery, pagination

我正在寻找一种模式的设计解决方案，我将不得不在我正在设计的网站中重复很多次。它将是 ASP.NET MVC 前端，使用 NHibernate 连接到 SQL 数据库的 C# WCF Web 服务。

这是一个社交网站，所以想象一下这里的 facebook 以获得一个概念性的想法。我正在寻找的是一种高效且高效的方式来返回大型数据集的分页结果，例如，用户可能有 150 封电子邮件。我想根据他们所在的页面一次返回 10 个，显然只返回与页面相关的 10 个，而不是必须将所有 150 个项目加载到内存中并且一次只显示 10 个，因为我认为用户体验会与更快的初始加载相比，更改页面的延迟稍长一些会更好。毕竟，您何时查看 6 个月大的电子邮件？通常的情况是你只关心结果的第一页。类似地，用户自上次登录以来可能已经进行了多次交互（例如，您在 facebook 上的通知提要），但我再次只想一次加载 n 个结果，但在这种情况下，您可以点击“显示更多”按钮，然后将获取下一个 N 个结果，用另一个“显示更多”链接显示它们，等等，您可以继续单击，直到到达数据集的末尾。我可以想象它们都使用相同的设计，因为它们在技术上都是分页结果，只是具有不同的 UI 输出和流程。链接等，您可以继续单击，直到到达数据集的末尾。我可以想象它们都使用相同的设计，因为它们在技术上都是分页结果，只是具有不同的 UI 输出和流程。链接等，您可以继续单击，直到到达数据集的末尾。我可以想象它们都使用相同的设计，因为它们在技术上都是分页结果，只是具有不同的 UI 输出和流程。

请记住我的数据检索是使用 NHibernate Queryable 或 Enumerables 的，任何人都可以就一个好的设计提供一些建议吗？我是否想一次性从数据库中加载所有数据，然后使用交互器模式只从服务层返回 N 行，保持列表的其余部分保存在服务器上的内存中，在用户会话上下文中打开，所以如果我做了另一个调用来检索接下来的 N 行，它将保持原位并继续返回 N 行，直到迭代器完成，或者最好从数据库中简单地检索 N 行并返回那些，在会话上下文中不保存任何内容？我可以看到如何从 Queryable 返回前 10 个结果

```
var results = (from email in emails where email.UserId = userId).Take(10); 
```

但我不确定这有多有效，这是最快的方法吗？而且我不知道如何从某个位置开始，这将始终只返回前 10 个，而不是说第二个 10 或第三个 10 等等。

所以我有点不确定最好的方法是如何进行，并希望从做过类似事情的人那里得到一些指示和建议。牢记我的网站性能至关重要，因此用户体验需要非常清晰和互动，并提供令人耳目一新的新结果。基本上，如果您尝试模拟 facebook 新闻提要/墙 - 您将如何使用上述架构实现它？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:22:21.067

您可以`Skip`结合使用`Take`：

```
var results = (from email in emails where email.UserId = userId)
              .Skip((currentPage - 1) * 10)
              .Take(10); 
```

* * *

关于 web 服务：你真的应该让它成为一个无状态的 web 服务。您可以为此使用 ASP.NET Web API。这使您能够构建 RESTful Web 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:54:02.847

> 我想一键加载所有内容吗...

绝对不是，您只想拉下您需要的记录，而不是您*可能*需要的记录。

> ...使用交互器模式仅从服务层返回 N 行，将列表的其余部分保留在服务器上的内存中，在用户会话上下文中打开...

有了这个想法，可扩展性就消失了。

> ...或者最好简单地从数据库中检索 N 行并返回这些行，在会话上下文中不保留任何内容？

现在你开始走上正轨...

通常，您希望让数据库尽可能多地进行查询，即您不想访问数据库然后必须进一步查询结果（但是，这并不总是可以避免的）。换句话说，您希望将大部分（如果不是全部）繁重的工作委托给数据库。

您提到您正在使用 NHibernate，这是一个非常强大的 ORM。好消息是，在查询优化/缓存数据等方面为您做了很多工作。像现在的大多数 ORM 一样，NHibernate 对其查询使用延迟执行，所以请注意诸如过早访问数据库和选择何时急切加载数据而不是执行多个查询。NHibernate 有很多东西要学，如果你还没有，那么在深入研究之前花时间阅读它是值得的，从长远来看，它将为你节省很多麻烦。

> 牢记我的网站性能至关重要，因此用户体验需要非常清晰和互动，并提供令人耳目一新的新结果

就性能而言（我假设您的意思是页面加载速度），您只想对您的网站进行 ajaxify 处理，即加载页面需要加载的内容，将其余部分拉到后台并动态更新页面。要实现“刷新新结果”部分，您需要查看[轮询](http://en.wikipedia.org/wiki/Polling_%28computer_science%29)服务器并拉取新数据。我很确定 Facebook 使用了一种称为[长轮询的技术](http://en.wikipedia.org/wiki/Push_technology#Long_polling)这实际上使服务器在一定时间内保持活动请求打开，因此数据似乎“立即”发生。轮询是一个完全不同的球类游戏，它是关于平衡服务器负载与数据需要多么“新鲜” - 这是您需要自己决定的事情，而答案通常取决于数据类型与服务器的硬件能力相比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:58:35.580

有一些关于它的链接（[像这样](http://hurtsmybrains.wordpress.com/2010/01/26/paging-with-linq/)），但我喜欢[这个人的方法](https://github.com/danielcrenna/paging)。我不知道我是否会使用他的 PagedQueryable，但他的[IPageable](https://github.com/danielcrenna/paging/blob/master/Paging/IPageable.cs)、[IPagedEnumerable](https://github.com/danielcrenna/paging/blob/master/Paging/IPagedEnumerable.cs)和[PagedEnumerable](https://github.com/danielcrenna/paging/blob/master/Paging/PagedEnumerable.cs)真的很有趣。此外，他的项目介绍页面可能会为您提供一些有关如何滚动自己的分页的想法。

# jquery - jQuery：选择 tr 的 td 满足多个条件

> ID：13528854
> 
> 赞同：2
> 
> 时间：2012-11-23T12:07:31.650
> 
> 标签：jquery, jquery-selectors, dom-traversal

我想知道，是否可以`<tr>`从满足多个条件的`<table>`地方选择 's 。`<td>`例如（见最后的示例表）：

> 获取`<tr>`第一列为“Audi”且第二列为“red”的**所有**内容

我已经知道如何按一列过滤：

```
$('tr:has(td:nth-child(1):contains("Audi"))').doSomeThing(); 
```

但我的问题是如何使用**AND**条件进行过滤，例如：

```
$('tr:has(td:nth-child(1):contains("Audi") && td:nth-child(2):contains("red"))').doSomeThing(); 
```

我知道有[Multiple Attribute Selector](http://api.jquery.com/multiple-attribute-selector/)，但是因为我正在搜索 .text() 属性，所以它不适合我的问题。

我的样本表：

```
<table id="list">
<tr>
    <td>Audi</td>
    <td>red</td>
</tr>
<tr>
    <td>Audi</td>
    <td>yellow</td>
</tr>
<tr>
    <td>Audi</td>
    <td>green</td>
</tr>
<tr>
    <td>BMW</td>
    <td>red</td>
</tr>
<tr>
    <td>BMW</td>
    <td>yellow</td>
</tr>
<tr>
    <td>BMW</td>
    <td>green</td>
</tr>
    ...
</table> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T12:10:10.810

使用该`filter`方法根据其他条件缩小您的初始选择范围。

```
$('tr:has(td:nth-child(1):contains("Audi"))').filter(':has(td:nth-child(2):contains("red"))').doSomeThing(); 
```

如果您正在寻找单个选择器，这里是可读性较差的：

```
$('tr:has(td:nth-child(1):contains("Audi")):has(td:nth-child(2):contains("red"))').doSomeThing(); 
```

这是一个演示：http: [//jsfiddle.net/8Mnsf/2/](http://jsfiddle.net/8Mnsf/2/)

您还可以通过以下方式提高可读性：

```
$('tr')
    .has('td:nth-child(1):contains("Audi")')
    .has('td:nth-child(2):contains("red")')
    .doSomeThing(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:12:54.240

您最好的选择是使用该[`filter()`](http://api.jquery.com/filter/)方法。在大多数情况下，依赖 jQuery 的自定义选择器（`:contains`、`:has`等）并不是最好的主意，因为原生`querySelectorAll()`可用时无法使用，这可能会成为性能问题。

从[手册](http://api.jquery.com/has-selector/)：

> 因为`:has()`是 jQuery 扩展而不是 CSS 规范的一部分，所以使用的查询`:has()`不能利用原生 DOM`querySelectorAll()` 方法提供的性能提升。为了在现代浏览器中获得更好的性能，请 `$("your-pure-css-selector").has(selector/DOMElement)`改用。

像这样的选择器也很难读取，因此它也降低了可维护性。方法`filter()`是简单易读的代码，如果需要，也可以进行合理的注释。

像这样的东西：

```
$('tr').filter(function () {
    var $cells = $(this).children('td');
    return $cells.first().text() === 'Audi'
         && $cells.eq(1).text() === 'red';
}); 
```

[jsFiddle 演示](http://jsfiddle.net/AsAJF/)

# apache - 为我的 Web 应用程序规划 url 重写

> ID：13528856
> 
> 赞同：0
> 
> 时间：2012-11-23T12:07:44.583
> 
> 标签：apache, web-applications, mod-rewrite

我正在一个网站上工作，该网站显示不同国家的不同产品。我正在使用的当前 url 方案是主页的“index.php?country=US”，以及显示来自特定国家的产品的“product.php?country=US&id=1234”。

我现在计划实施 url 重写以使用更清晰的 url。这个想法是将每个国家/地区用作子域，将产品 ID 用作页面。像这样的东西：

```
us.example.com/1234 -> product.php?country=US&id=1234 
```

我可以完全控制我的 dns 记录和 Web 服务器，并且目前已经设置了一个 *A 记录来指向我的 IP，以便接收 *.example.com 请求。这似乎工作正常。

现在我的问题是我还需要处理哪些其他事情。假设仅添加 .htaccess 就足以处理所有请求是否正确？我是否也需要将 VirtualHost 添加到我使用的每个子域中？是否还需要或避免其他任何事情？

我基本上是想弄清楚最简单和正确的设计方法是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:45:06.540

处理国家/地区所需的数据已经*在*请求 URL 中（来自主机名）。将其移至 GET 变量会带来额外的复杂性（您如何处理 POST）。

除非域具有不同的 SSL 证书，否则您不需要单独的虚拟主机。

# c# - 如何只允许在 DataGridTextColumn 中输入小数点 2 后的值

> ID：13528857
> 
> 赞同：0
> 
> 时间：2012-11-23T12:07:44.947
> 
> 标签：c#, wpf, datagrid

有没有办法只在 DatagridTextbox 列中输入小数点 2 后的值，并且还限制用户只输入一个小数点？

我的意思是实现用户只能输入类似的东西`1234.25`，而不是`1234.1234`，并且还阻止他们输入类似的东西`1234.235.2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:17:15.447

也对要绑定的值使用 String Format 属性：

```
 <DataGridTextColumn Header="Total Cost" Binding="{Binding Path=Total, StringFormat={}{0:N2}}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:17:26.733

看看这个问题和答案：[How to know while user editing the WPF DataGrid Cell is empty?](https://stackoverflow.com/questions/13466889/how-to-know-while-user-editing-the-wpf-datagrid-cell-is-empty/13467131#13467131)

你也应该处理 TextChanged 事件，你的代码应该是这样的：

```
void tb_TextChanged(object sender, TextChangedEventArgs e)
{
   TextBox tb=(TextBox)sender;
   tb.Forground = Brushes.Black;
   int indexOfDot=tb.Text.IndexOf(".");
   if (indexOfDot != -1)
      {
          if (tb.Text.Length>indexOfDot+2)
          {
              //here you can tell the user that this is a wrong format
              //and do other stuff; for example:
              tb.Forground = Brushes.Red;
          }
      }
} 
```

如果您希望用户不能输入错误的格式，则处理 OnPreviewKeyDown 事件。您可以设置一些其他条件。如果您希望它是双倍的，请尝试以下操作：

```
double d;
if (double.TryParse(tb.Text,out d) == false)
{
    e.Handled = true;
} 
```

# process - 信号量等待（）和信号（）

> ID：13528860
> 
> 赞同：8
> 
> 时间：2012-11-23T12:08:04.863
> 
> 标签：process, synchronization, operating-system

我正在经历进程同步，并且在理解信号量方面遇到困难。所以这是我的疑问：

消息来源说

" Semaphore S 是一个整数变量，可以通过标准**原子**操作访问，即 wait() 和 signal()。

它还提供了 wait() 的基本定义

```
wait(Semaphore S)
{
   while S<=0
     ; //no operation
   S--;
} 
```

信号（）的定义

```
signal(S)
{
   S++;
} 
```

假设信号量的初始值为 1，假设有两个并发进程 P0 和 P1，它们不应该同时执行其临界区的操作。

现在说 P0 在它的临界区，所以信号量 S 必须有值 0，现在说 P1 想进入它的临界区，所以它执行 wait()，在 wait() 中它不断循环，现在退出循环信号量值必须递增，但这可能是不可能的，因为根据来源，wait() 是原子操作，不能被中断，因此进程 P0 不能在单处理器系统中调用 signal()。

我想知道，到目前为止我的理解是否正确。如果正确，那么当进程 P1 在 while 循环中被触发时，进程 P0 如何调用信号（）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T13:17:34.270

我认为这是您的来源不准确。`Atomic`对于`wait()`操作意味着它的每次迭代`atomic`，意思`S--`是不间断地执行，但整个操作在循环`S--`内每次完成后都是可中断的。`while`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-01-13T03:03:58.210

我认为投票最多的答案是不准确的！

操作 wait() 和 signal() 必须是完全原子的；没有两个进程可以同时执行 wait() 或 signal() 操作，因为它们是在内核中实现的，并且内核模式下的进程不能被抢占。

如果多个进程同时尝试 P(S)，则仅允许一个进程继续（没有竞争条件的非抢占式内核）。

为了使上述实现工作，抢占是必要的（抢占内核）

阅读信号量操作的原子性 [http://personal.kent.edu/~rmuhamma/OpSystems/Myos/semaphore.htm](http://personal.kent.edu/%7Ermuhamma/OpSystems/Myos/semaphore.htm) [https://en.wikibooks.org/wiki/Operating_System_Design/Processes/Semaphores](https://en.wikibooks.org/wiki/Operating_System_Design/Processes/Semaphores)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-03T03:54:35.447

我不认为，在 wait() 操作中保持无限循环是明智的。我会选择 Stallings 的例子；

```
void semWait(semaphore s){
    s.count--;
    if(s.count<0)
        *place this process in s.queue and block this process
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-20T12:02:44.173

我认为这本书对原子操作的意义在于测试`S<=0`是否为真`S--`。就像`testAndset()`之前提到的一样。

如果两个单独的操作`S<=0`都是`S--`原子的但可以被其他进程中断，则此方法将不起作用。

想象两个进程 p0 和 p1，如果 p0 想进入临界区并测试`S<=0`为真。它被 p1 打断并且测试`S<=0`也是正确的。那么这两个过程都会进入临界区。这是错误的。

实际的非原子操作在while循环内部，即使while循环为空，其他进程在`S<=0`测试为假时仍然可以中断当前的一个，这使得其他进程可以在临界区继续工作并释放锁。

但是，我认为这本书中的代码实际上不能在操作系统中使用，因为我不知道如何使操作`S<=0`成为真实的并且是`S--`原子的。更多可能的方法是`S--`像 SomeWittyUsername 所说的那样把 while 循环放在里面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T08:43:03.850

当一个任务试图获取一个不可用的信号量时，信号量将任务**放入等待队列并使任务进入睡眠状态**。然后处理器可以自由地执行其他代码。当信号量变得可用时，任务中的一个等待队列被唤醒，以便它可以获取信号量。

而 S<=0 ; //无操作 这并不意味着处理器运行这段代码。进程/任务被阻塞，直到它获得信号量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-08T12:18:52.433

我认为，当进程 P1 在 while 循环中被击中时，它将处于等待状态。处理器将在进程 p0 和 p1 之间切换（上下文切换），因此优先级转到 p0 并调用 signal() 然后 s 将是加 1，p0 退出该部分，因此进程 P1 可以进入临界区，可以避免互斥

# c# - 为什么使用 ConfigurationManager.GetSection 会导致“SecurityException：请求失败”但 ConfigurationManager.OpenExeConfiguration 不会？

> ID：13528862
> 
> 赞同：10
> 
> 时间：2012-11-23T12:08:14.697
> 
> 标签：c#, .net, .net-4.0

我有一些奇怪的事情，我希望 .Net 专家可以帮助我。

我有一个自定义配置部分，为了掌握它，我这样做：

```
var s = (TestConfigurationSection)ConfigurationManager
    .GetSection("testSection"); 
```

我在我的开发机器上运行它（`Windows 7`64位，Windows完全是最新的），它工作正常。

我将带有该代码的exe放入其中，然后将其放在`c:\users\public`机器上的目录中`Windows Server 2008 R2`，以管理员身份打开命令提示符，运行它，我得到：

> System.Configuration.ConfigurationErrorsException：为 testSection 创建配置节处理程序时出错：请求失败。（C:\Users\Public\configtest\AppConfigTestConsoleApplication.exe.Config 第 10 行）---> System.Security.SecurityException：请求失败。

现在我更改了该代码来执行此操作：

```
var config = ConfigurationManager.OpenExeConfiguration(
    ConfigurationUserLevel.None);
var s = (TestConfigurationSection) config
    .GetSection("testSection"); 
```

它在两台机器上都能正常工作。

所以，我很高兴（尽管我的应用程序正在运行）但我脑海中的那个小 Gremlin 很困惑，所以我在这里问：

**为什么会这样？**

* * *

## 重现步骤

在 Visual Studio 2010 中创建一个名为 AppConfigTestConsoleApplication 的新 .net 4 控制台应用程序项目，并将其内容替换为`Program.cs`以下内容：

```
using System;
using System.Configuration;

namespace AppConfigTestConsoleApplication
{
    public class TestConfigurationSection : ConfigurationSection
    {
        [ConfigurationProperty("someSetting")]
        public int SomeSetting
        {
            get { return (int) this["someSetting"]; }
            set { this["someSetting"] = value; }
        }
    }

    internal class Program
    {
        private static void Main()
        {
            try
            {
                var s = (TestConfigurationSection) ConfigurationManager
                    .GetSection("testSection");
                Console.WriteLine("First Method worked: " + s.SomeSetting);
            }
            catch (Exception ex)
            {
                Console.WriteLine("First method failed");
                Console.WriteLine(ex.ToString());

                if (ex.InnerException != null)
                {
                    var eex = ex.InnerException as SecurityException;
                    Console.WriteLine("Action: '{0}'", eex.Action.ToString());
                    Console.WriteLine("Demanded: '{0}'", eex.Demanded.ToString());
                    Console.WriteLine("RefusedSet: '{0}'", eex.RefusedSet);
                    Console.WriteLine("GrantedSet: '{0}'", eex.GrantedSet);
                }

                try
                {
                    var config = ConfigurationManager.OpenExeConfiguration(
                        ConfigurationUserLevel.None);

                    var s = (TestConfigurationSection) config
                        .GetSection("testSection");

                    Console.WriteLine("Second Method worked: " 
                        + s.SomeSetting);
                }
                catch (Exception x)
                {
                    Console.WriteLine("Even the second method failed!");
                    Console.WriteLine(ex.ToString());
                }
            }
        }
    }
} 
```

然后添加一个应用程序配置文件并将内容替换为以下内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>  
    <section
      name="testSection"
      type="AppConfigTestConsoleApplication.TestConfigurationSection, AppConfigTestConsoleApplication"
      requirePermission="false"
      allowDefinition="Everywhere" />  
  </configSections>
  <testSection someSetting="10"></testSection>
</configuration> 
```

编译并运行，这是我得到的输出：

```
C:\Users\Public\configtest>AppConfigTestConsoleApplication.exe
First method failed
System.Configuration.ConfigurationErrorsException: An error occurred creating the configuration section handler for testSection: Request failed. (C:\Users\Public\configtest\AppConfigTestConsoleApplication.exe.Config line 10) ---> System.Security.SecurityException: Request failed.
   at System.RuntimeMethodHandle.PerformSecurityCheck(Object obj, RuntimeMethodHandleInternal method, RuntimeType parent, UInt32 invocationFlags)
   at System.RuntimeMethodHandle.PerformSecurityCheck(Object obj, IRuntimeMethodInfo method, RuntimeType parent, UInt32 invocationFlags)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.ConstructorInfo.Invoke(Object[] parameters)
   at System.Configuration.TypeUtil.InvokeCtorWithReflectionPermission(ConstructorInfo ctor)
   at System.Configuration.RuntimeConfigurationRecord.RuntimeConfigurationFactory.CreateSectionImpl(RuntimeConfigurationRecord configRecord, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentConfig, ConfigXmlReader reader)
   at System.Configuration.RuntimeConfigurationRecord.RuntimeConfigurationFactory.CreateSectionWithRestrictedPermissions(RuntimeConfigurationRecord configRecord, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentConfig, ConfigXmlReader reader)
   at System.Configuration.RuntimeConfigurationRecord.CreateSection(Boolean inputIsTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentConfig, ConfigXmlReader reader)
   at System.Configuration.BaseConfigurationRecord.CallCreateSection(Boolean inputIsTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentConfig, ConfigXmlReader reader, String filename, Int32 line)
   --- End of inner exception stack trace ---
   at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecordsectionRecord, Object parentResult)
   at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
   at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName)
   at System.Configuration.ConfigurationManager.GetSection(String sectionName)
   at AppConfigTestConsoleApplication.Program.Main()
Action: 'Demand'
Demanded: '<PermissionSet class="System.Security.PermissionSet"
version="1"
Unrestricted="true"/>
'
RefusedSet: ''
GrantedSet: ''
Second Method worked: 10 
```

## 进程监视器

我运行[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)并像这样设置过滤器：

![过程监控过滤器](../Images/be21825edc4851c41967ddfb94d5b384.png)

剩下的 508 个事件都是以下事件之一：

*   未找到姓名
*   没有更多的条目
*   未找到路径
*   只有读者锁定的文件
*   没有这样的文件（对于**C:\Windows\assembly\NativeImages_v4.0.30319_32\mscorlib\93e7df09dacd5fef442cc22d28efec83\mscorlib.ni.dll**和**C:\Users\Public\configtest\AppConfigTestConsoleApplication.exe.config**只有一次）
*   缓冲区溢出（对于**HKCU\Control Panel\Desktop\MuiCached\MachinePreferredUILanguages**，**HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders\Cache**，

有没有人对设置什么过滤器来找到根本原因有任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T14:30:14.010

当程序集被“阻止”（在文件属性选项卡下）时，我也有同样的行为。这些文件通过 zip 通过电子邮件发送给管理员。当他保存附件时，添加了块位......就像从互联网上下载文件一样。在我们清除块后，它工作正常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T12:24:26.453

> [`ConfigurationManager.GetSection(String)`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.getsection.aspx)：
> 
> 检索应用配置文件、本地用户配置文件和漫游配置文件合并得到的配置文件。

* * *

> [`ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel)`](http://msdn.microsoft.com/en-us/library/ms134265.aspx)：
> 
> userLevel 参数通过指示是否没有用户级别来确定正在打开的配置文件的位置（配置文件与应用程序在同一目录下）

因此，他们正在打开不同的文件。使用[ProcessMonitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)查看正在访问哪些文件以及发生异常的原因以及在哪个文件上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T17:00:38.937

我知道这是一个旧线程，但我最近在与客户合作时遇到了这个问题，并认为我会发布另一个建议。在我的情况下，问题是使用非静态 ConfigurationManager 方法，这可能会在某些特定条件下导致 SecurityException（应用程序面向 .NET Framework 4 并安装在网络驱动器上，在这种情况下，Windows 更新也被禁用）。以下是有关此问题的更多信息以及 Microsoft 的修补程序：

[https://support.microsoft.com/en-us/help/2580188/fix-system.security.securityexception-occurs-when-a-.net-framework-4-based-application-that-c​​alls-a-static -method-in-the-system.configuration.configurationmanager-class-runs-on-a-network-share](https://support.microsoft.com/en-us/help/2580188/fix-system.security.securityexception-occurs-when-a-.net-framework-4-based-application-that-calls-a-static-method-in-the-system.configuration.configurationmanager-class-runs-on-a-network-share)

# sql - 如何计算 14 天后的日期

> ID：13528869
> 
> 赞同：0
> 
> 时间：2012-11-23T12:08:39.280
> 
> 标签：sql, oracle11g

我有两个日期，我想检查`CLO/LO issued date past 14 days grace period fall in the reporting period.`我有两个日期的情况。我试过条件

```
LOSA_CR_DETAIL_Z.lo_dt > 14 + (:endDate - :startDate) 
```

但这给了我错误

```
ORA-00932: inconsistent datatypes: expected DATE got NUMBER
00932\. 00000 -  "inconsistent datatypes: expected %s got %s"
*Cause:    
*Action: 
```

我想这会给我 14 天而不是约会。我如何计算条件`date > 14 days plus date`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:47:32.137

从您的查询的介绍来看，听起来您想检查是否`LOSA_CR_DETAIL_Z.lo_dt + 14 day`在特定的日期间隔内。

如果是这样，像这样的条件

```
LOSA_CR_DETAIL_Z.lo_dt + 14 BETWEEN :startDate AND :endDate 
```

应该是你要找的。

# android - 无法以表格格式打印数组元素

> ID：13528871
> 
> 赞同：1
> 
> 时间：2012-11-23T12:08:44.090
> 
> 标签：android

我正在尝试以表格格式打印显示数组元素，但无法获取表格格式的元素，输出如下所示

```
Name     Address  Phone
Ramu     7/g      45464 Raju 1-6

As shown in the above, the name will come under the Name Column in the table, i wrote code as below          

TableROW t=new TableRow(this);
for(int i = 0; i<Programlist.length;i++)
{

 if(i%3==0)
 {
    String Name=Programlist[i];// Getting the First Element Of the Array
    TextView P_Name=new TextView(this);
   P_Name.setText(Name);//Attaching to the textview 
   P_Name.setPadding(0, 2, 3, 5);
    t.addView(P_Name);//Adding to the Row
  }
  else if(i%3==1)
  {
String Address=Programlist[i]+"\n";// Getting Element 
    TextView Adrs=new TextView(this);// Attaching to the Textview 
    Adrs.setText(Address);
    Adrs.setPadding(2,5, 3, 2);
    t.addView(Adrs);
    Continue;

   }
   else
   {
    String phone=Programlist[i];
    TextView u_phone=new TextView(this);
    u_phone.setText(phone);
    u_phone.setPadding(2,5, 3, 2);// Space Between the columns Data 
    t.addView(u_phone);// Attaching to the Table Row
    continue;
   }

}
tableLayout.addView(tdata, new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.MATCH_PARENT)); 
```

最后我马试图附加到表中，如图所示我编写的代码的最后一行。所以请帮助我

# php - 将数据发送到 2 个 MySQL 表 - FuelPHP / PHP

> ID：13528876
> 
> 赞同：0
> 
> 时间：2012-11-23T12:08:56.457
> 
> 标签：php, mysql, sql, fuelphp

我正在调整[StationWagon](https://github.com/abdelm/stationwagon)（FuelPHP 应用程序），到目前为止它运行得非常好。

我已经对其进行了调整（在一些帮助下）以允许将多个图像上传到服务器。这也很好用。

**但是**，我认为如果我有**2 个表**会更有意义：**1) Articles**和**2) ArticleImages**。我会使用外键将图像与文章相关联。因此，在发布文章时，它会将文章数据添加到“Articles”表中，并将每个图像移动到“ArticleImages”中的新行。

所以最终我**的“ArticleImages”**表可能是：

> 身份证 | 图片网址 | 文章编号

我的“ **articles.php** ”控制器的一部分：

```
<?php       

    public function action_add()
    {
    $val = Model_Article::validate('add_article'); //<-- maybe its just me but i never saw any similar to this in fuelphp sorry about this if im wrong

    // if your form validation is okay than continue with everyhing else
    if ($val->run())
    {
        $article = Model_Article::forge();
        // Custom configuration for this upload
        $config = array(
            'path' => DOCROOT.DS.'images',
            'randomize' => true,
            'ext_whitelist' => array('img', 'jpg', 'jpeg', 'gif', 'png'),
        );

        Upload::process($config);

        // if a valid file is passed than the function will save, or if its not empty
        if (Upload::is_valid())
        {
            // save them according to the config
            Upload::save();

           //if you want to save to tha database lets grab the file name
            $value = Upload::get_files();  

            foreach($value as $files) {
               print_r($files); 
            }
            $article->filename = $value[0]['saved_as'];
         } 

        $status = (Input::post('save_draft') ? 0 : 1);

        if ( ! $val->input('category_id'))
        {
            $category_id = null;
        }
        else
        {
            $category_id = $val->validated('category_id');
        }

             $article->user_id = $this->user_id;
             $article->category_id = $category_id;
             $article->title = $val->validated('title');
             $article->body = $val->validated('body');
             $article->published = $status;

        if ($article->save())
        {
            Session::set_flash('success', 'Article successfully added.');
        }
        else
        {
            Session::set_flash('error', 'Something went wrong, '.
                'please try again!');
        }

        Response::redirect('articles/add');
    }

    $this->template->title = 'Add Article';
    $this->template->content = View::forge('articles/add')
        ->set('categories', Model_Category::find('all'), false)
        ->set('val', Validation::instance('add_article'), false);
    }

/* End of file articles.php */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:45:44.777

您正在尝试在 Articles 和 ArticleImages 之间建立关系。一个ArticleImage属于一个Article，而一个Article有很多个ArticleImage。FuelPHP 为您想要实现的目标内置了功能。查看[有关其 Object Relational Mapper 的 FuelPHP 文档](http://fuelphp.com/docs/packages/orm/relations/intro.html "关于 ORM 的 FuelPHP 文档")，尤其是 Belongs To 和 Has Many 关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:46:40.787

因此，当我几天前为您编写代码时，您只需要一个文件输入。

没有冒犯，但你做错了......

```
 foreach($value as $files) {
      print_r($files); 
    }
 $article->filename = $value[0]['saved_as']; 
```

应该

```
foreach($value as $files) {
           $articleimg = Model_Articleimages::forge();
           $articleimg->image_row_name = $files['saved_as']
        } 
```

让你明白

你在这里做了什么，`$value = Upload::get_files();`是的，这得到了所有的元素，但是因为你需要循环你不需要它的元素

第二

这`$value[0]['saved_as']`仅获取第一个图像名称，只是第一个，并且由于您现在处于循环中，因此您需要引用`$files`我在上面示例中向您展示的变量，**只是一个示例**

# asp.net-mvc-4 - 具有简单成员资格的 ASP.net MVC 4 项目，发布错误

> ID：13528877
> 
> 赞同：1
> 
> 时间：2012-11-23T12:08:57.453
> 
> 标签：asp.net-mvc-4, visual-studio-2012, publishing, iis-express

尝试发布我的网站时出现以下错误：

> 使用注册为 allowDefinition='MachineToApplication' 的部分是错误的
> 
> 超出应用层。此错误可能是由于没有虚拟目录
> 
> 在 IIS 中配置为应用程序

并在同一页面下方：

```
Ligne 31 :     <compilation targetFramework="4.5"/>
Ligne 32 :     <httpRuntime/>
Ligne 33 :     <authentication mode="Forms">
Ligne 34 :       <forms loginUrl="~/Account/Login" timeout="2880"/>
Ligne 35 :     </authentication> 
```

我正在使用 Visual Studio 2012 IIS express 并且已经在项目属性页面中创建了一个虚拟目录，并停用了 Views 文件夹中的 web.config 文件，我也试图在网上找到解决方案，但其中很多（[最接近一个在这里](https://stackoverflow.com/questions/10009651/error-when-building-the-website)）正在为 IIS 而不是 VS 2012 IIS Express 工作。

请帮我让它运行。

# java - 如何从 apache mina 服务器的 MessageRecieved API 连接到另一台服务器

> ID：13528878
> 
> 赞同：1
> 
> 时间：2012-11-23T12:09:04.900
> 
> 标签：java, tcp, webserver, apache-mina

我正在用 apache mina 开发一个简单的 TCP 服务器。我能够从我的 TCP 客户端接收消息。现在我想简单地将这条消息路由到我在另一台机器上运行的后端服务器，即我的 mina 服务器工作是简单地路由消息（防火墙外）。

就像是

TCP Client <---> Apache Mina Server <---> 实际后端服务器

如何从我的 mina 服务器的 MessageRecieved() API 连接到后端服务器。

意义，

1.  客户端发送请求。

2.  在 MessageRecived() 上，我需要将 inBuffer 发送到后端服务器。

3.  后端服务器将返回 outBuffer。

4.  将输出缓冲区写入服务器的 MessageRecived API 的 session.write()（第 2 点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:22:03.407

据我所知，您可以使用远程方法初始化（RMI，即从另一台安装了 JDK 的机器调用一台机器的 JDK API（系统、日期、流、附加 jar api）。

# apache - 重写规则问题，在一台服务器上导致 500 错误，但在另一台服务器上没有

> ID：13528888
> 
> 赞同：0
> 
> 时间：2012-11-23T12:09:44.170
> 
> 标签：apache, mod-rewrite

我有一个 .htaccess 这样的：

```
Options -MultiViews
#Rewrite queries from google to the right files
RewriteEngine On

RewriteCond %{QUERY_STRING} ^_escaped_fragment_=(.*)$
RewriteRule ^(.*) /fragments/%1.html 
```

在我的服务器（一个标准的 LAMP debian）上，它可以完美运行。一旦我将其上传到主机 (1&1)，我就会收到 500 错误，并且根据 1&1 自己的策略，无法检查错误日志。

技术支持花了 2 周时间来回答我的支持请求，当他们回答时，他们将我指向一个描述 mod_rewrite 的通用页面。

任何人都可以在重写规则/条件中发现语法错误，并最终提供另一种方法来执行该规则的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:38:11.787

使用以下内容：

```
Options -MultiViews
#Rewrite queries from google to the right files
RewriteEngine On

RewriteCond %{QUERY_STRING} ^_escaped_fragment_=(.*)$
RewriteRule ^(.*) http://mydomain.com/fragments%1.html? 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:20:56.917

500 错误意味着服务器设置有问题（500 - 内部服务器错误）。

它可能是：

1) 您的服务器不支持 .htaccess 文件覆盖主机设置

2) 未启用重写模块

3) 在你的 htaccess 中重写的语法不正确

据我所知，您的代码是正确的。那么它可能是 1 或 2 选项。

我会建议：

1）用下面包装你的重写代码（这将检查mod-rewrite是否打开）

```
<IfModule mod_rewrite.c>
...
</IfModule> 
```

2）删除所有内容`.htaccess`并尝试清空一个（如果仍然是 500 - 不允许覆盖）

3）我没有`DirectoryIndex your_index_file`在你的代码中看到。你省略了吗？

# javascript - 为什么 node.js 变量持续存在

> ID：13528892
> 
> 赞同：0
> 
> 时间：2012-11-23T12:09:55.633
> 
> 标签：javascript, node.js, express

我正在制作一个临时的假 API，并尝试使用 express.js 在节点中设置一个简单的请求响应脚本来实现这一点。它非常简单，一个请求进来，经过验证，如果有效，则与 .json 模板文件合并并返回结果，从而给人以成功创建用户的印象。

```
 app.post('/agent/user', function(req, res){
    var responseTemplate = new jsonRequired('post_user');
    var errorTemplate = new jsonRequired('post_user_error');
    var payload = req.body;
    var responseData;
    var hasErrors = false;

    console.log('Creating new user');
    //Recursive Merge from http://stackoverflow.com/a/383245/284695

    responseData = new mergeRecursive(responseTemplate,payload);

    if(!payload.username){
      hasErrors = true;
      errorTemplate.errors.username.push('A username is required.');
    }

    if (hasErrors){
      res.send(errorTemplate,422);
    }else{
      res.send(responseData,200);
    }

  }); 
```

我遇到的问题是数据在调用之间持续存在。因此，如果我在 1 个请求中定义了一个用户名和 name[first]，而在第二个请求中只定义了一个用户名，那么两个请求都会返回 name[first] 属性。

我觉得这与 js 闭包有关。不幸的是，我发现的每个教程似乎都是关于制作闭包，而不是避免它们。

它应该像这样工作：

1.  客户端 POST`username=user1&name[first]=joe&name[last]=bloggs`
2.  服务器加载一个包含预填充用户对象的 json 文件：例如

    `{"username":"demo","name":{"first":"John","last":"Doe"}...}`

3.  `mergeRecursive()`将来自 POST 请求的有效负载合并到模板对象上，并将新对象作为 POST 响应文本返回。

问题是对于每个新请求，服务器都在步骤 2 中使用步骤 3 的结果，而不是重新加载 .json 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:35:24.327

该函数与[**jQuery.extend**](http://api.jquery.com/jQuery.extend/)`mergeRecursive`具有相同的警告：它修改发送到其中的第一个对象。事实上，你甚至不需要使用它的返回值。[](http://api.jquery.com/jQuery.extend/)

 **您没有显示`jsonRequired`函数代码（甚至不清楚为什么`new`在调用它时使用它），但看起来这个函数每次调用时都不会创建一个新对象，而是从某个外部存储库中获取这个对象. 显然，`mergeRecursive`对该函数的修改不会在该函数结束后丢失。

解决方案是使用您的数据对象进行合并。像这样：

```
var responseData = {};
...
mergeRecursive(responseData, responseTemplate);
mergeRecursive(responseData, payload); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:43:41.643

合并两个对象将为您完成此操作。

如果您的`responseTemplate`has 参数，实际请求没有，那么您最终将在那里拥有它。检查单词的定义`merge`；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:15:18.893

虽然这不能解决我遇到的问题，但我找到了一种解决方法，使用通过 npm 提供的[cloneextend](https://github.com/shimondoodkin/nodejs-clone-extend)包：

```
$ npm install cloneextend 
```

这允许我使用以下js：

```
var ce = require('cloneextend');

...

ce.extend(responseData, responseTemplate);
ce.extend(responseData, payload); 
```**

# c# - 自动取消订阅事件

> ID：13528893
> 
> 赞同：1
> 
> 时间：2012-11-23T12:10:00.250
> 
> 标签：c#, events, memory-leaks, event-handling

我有一个发布一些事件的静态类。所以我有许多不同的小类，它们有不同的生命周期来订阅这个事件。

我现在发现这会导致内存“泄漏”，因为订阅类在订阅一个更长寿的事件时仍然存在。我知道这是通过使用内存分析器发生的，并且我读到了这个问题。

我无法手动取消订阅，因为列表中可能有数百个“客户”。此列表将被清除。所以我不能（也不想）手动取消订阅。

我读到“弱事件模式”在这里可能会有所帮助。有人可以引导我采用一种“简单”的方式来实现这一点吗？到目前为止，我发现的所有内容要么太简单而无法在实践中使用，要么太复杂而无法在一开始就理解。

或者这种情况有什么“最佳实践”吗？

提前致谢！

**更新：** 根据 jbl 的回答，我发现这个（http://blogs.msdn.com/b/greg_schechter/archive/2004/05/27/143605.aspx）是一种可能的解决方案。这里有什么意见吗？它相当旧（2004 年），所以可能有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:13:00.637

`Dispose`最佳实践：当一个类订阅由非该类构造的对象生成的事件时，始终实现该模式。

然后在 Dispose 方法中删除处理程序。

```
public NotificationServiceAccessor(ObjectWithEvent objectWithEvent)
{
    _notificationService = new NotificationService();
    _notificationService.StatusChanged += NotificationService_StatusChanged; // Local object, no Dipose

    _objectWithEvent = objectWithEvent;
    _objectWithEvent.AnEvent += AnEventHandler(); // Event that has to be disposed.
}

    #region IDisposable Members

    protected bool Disposed { get; private set; }

    private void Dispose(bool disposing)
    {
        if (!this.Disposed)
        {
            this.InternalDispose(disposing);
        }

        this.Disposed = true;
    }

    protected virtual void InternalDispose(bool disposing)
    {
        if (disposing)
        {
                        // Dispose here the event handlers
                        _objectWithEvent.AnEvent -= AnEventHandler()
        }

        // Dispose here only unmanaged objects 
        // Don’t use managed objects here because maybe 
        // they have been finalized already
    }

    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }

    ~NotificationServiceAccessor()
    {
        this.Dispose(false);
    }

    #endregion 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:24:11.317

从来没有实现过这样的东西，但我会尝试（使用静态类或单例，你的选择）：

*   让静态类维护对客户端事件处理程序的 WeakReference 的静态集合
*   客户端不直接订阅该事件。静态类公开订阅和取消订阅方法，这些方法从弱引用集合中添加/删除处理程序
*   静态类是唯一直接订阅事件的类
*   在事件触发时，静态类枚举弱引用集合并为仍然存在的引用运行处理程序（删除空引用）

希望这会有所帮助

# objective-c - 如何使用 Core Graphics 绘制箭头？

> ID：13528898
> 
> 赞同：38
> 
> 时间：2012-11-23T12:10:27.633
> 
> 标签：objective-c, ios, core-graphics, quartz-2d

我需要在我的 Draw 应用程序中用箭头画线。我三角学不好，所以解决不了这个问题。

用户将手指放在屏幕上并在任何方向上画线。所以，箭头应该出现在行尾。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-11-26T06:01:51.490

### 更新

[我已经单独发布了这个答案的 Swift 版本。](https://stackoverflow.com/a/37985645/77567)

### 原来的

这是一个有趣的小问题。首先，有很多方法来绘制箭头，有弯曲的或直的。让我们选择一种非常简单的方法并标记我们需要的测量值：

![箭头零件](../Images/5a7f8c3a4d9c49273450a600c1e1fa66.png)

我们想写一个函数，它接受起点、终点、尾宽、头宽和头长，并返回一个勾勒出箭头形状的路径。让我们创建一个名为的类别以`dqd_arrowhead`将此方法添加到`UIBezierPath`：

```
// UIBezierPath+dqd_arrowhead.h

@interface UIBezierPath (dqd_arrowhead)

+ (UIBezierPath *)dqd_bezierPathWithArrowFromPoint:(CGPoint)startPoint
                                           toPoint:(CGPoint)endPoint
                                         tailWidth:(CGFloat)tailWidth
                                         headWidth:(CGFloat)headWidth
                                        headLength:(CGFloat)headLength;

@end 
```

由于箭头的路径上有七个角，让我们通过命名该常量来开始我们的实现：

```
// UIBezierPath+dqd_arrowhead.m

#import "UIBezierPath+dqd_arrowhead.h"

#define kArrowPointCount 7

@implementation UIBezierPath (dqd_arrowhead)

+ (UIBezierPath *)dqd_bezierPathWithArrowFromPoint:(CGPoint)startPoint
                                           toPoint:(CGPoint)endPoint
                                         tailWidth:(CGFloat)tailWidth
                                         headWidth:(CGFloat)headWidth
                                        headLength:(CGFloat)headLength { 
```

OK，简单的部分就完成了。现在，我们如何找到路径上这七个点的坐标？如果箭头沿 X 轴对齐，则更容易找到点：

![轴对齐的箭头点](../Images/3fd2063449af4c9e42febd1a21a5d611.png)

计算轴对齐箭头上的点坐标非常容易，但我们需要箭头的总长度来计算。我们将使用`hypotf`标准库中的函数：

```
 CGFloat length = hypotf(endPoint.x - startPoint.x, endPoint.y - startPoint.y); 
```

我们将调用一个辅助方法来实际计算这七个点：

```
 CGPoint points[kArrowPointCount];
    [self dqd_getAxisAlignedArrowPoints:points
                              forLength:length
                              tailWidth:tailWidth
                              headWidth:headWidth
                             headLength:headLength]; 
```

但是我们需要转换这些点，因为通常我们*不会*尝试创建轴对齐的箭头。幸运的是，Core Graphics 支持一种称为*仿射变换*的变换，它可以让我们旋转和平移（滑动）点。我们将调用另一个辅助方法来创建将轴对齐的箭头转换为我们被要求的箭头的转换：

```
 CGAffineTransform transform = [self dqd_transformForStartPoint:startPoint
                                                          endPoint:endPoint
                                                            length:length]; 
```

现在我们可以使用轴对齐箭头的点和将其转换为我们想要的箭头的变换来创建 Core Graphics 路径：

```
 CGMutablePathRef cgPath = CGPathCreateMutable();
    CGPathAddLines(cgPath, &transform, points, sizeof points / sizeof *points);
    CGPathCloseSubpath(cgPath); 
```

最后，我们可以将 a 包裹`UIBezierPath`起来`CGPath`并返回它：

```
 UIBezierPath *uiPath = [UIBezierPath bezierPathWithCGPath:cgPath];
    CGPathRelease(cgPath);
    return uiPath;
} 
```

这是计算点坐标的辅助方法。这很简单。如果需要，请参阅轴对齐箭头的图表。

```
+ (void)dqd_getAxisAlignedArrowPoints:(CGPoint[kArrowPointCount])points
                            forLength:(CGFloat)length
                            tailWidth:(CGFloat)tailWidth
                            headWidth:(CGFloat)headWidth
                           headLength:(CGFloat)headLength {
    CGFloat tailLength = length - headLength;
    points[0] = CGPointMake(0, tailWidth / 2);
    points[1] = CGPointMake(tailLength, tailWidth / 2);
    points[2] = CGPointMake(tailLength, headWidth / 2);
    points[3] = CGPointMake(length, 0);
    points[4] = CGPointMake(tailLength, -headWidth / 2);
    points[5] = CGPointMake(tailLength, -tailWidth / 2);
    points[6] = CGPointMake(0, -tailWidth / 2);
} 
```

计算仿射变换更复杂。这就是三角函数的用武之地。您可以使用`atan2`and`CGAffineTransformRotate`和`CGAffineTransformTranslate`函数来创建它，但是如果您记住了足够的三角函数，则可以直接创建它。请参阅[*Quartz 2D 编程指南*](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_affine/dq_affine.html#//apple_ref/doc/uid/TP30001066-CH204-CJBECIAD)[中的“矩阵背后的数学”，以](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_affine/dq_affine.html#//apple_ref/doc/uid/TP30001066-CH204-CJBECIAD)*获取有关我在这里所做工作的更多信息：*

 *```
+ (CGAffineTransform)dqd_transformForStartPoint:(CGPoint)startPoint
                                       endPoint:(CGPoint)endPoint
                                         length:(CGFloat)length {
    CGFloat cosine = (endPoint.x - startPoint.x) / length;
    CGFloat sine = (endPoint.y - startPoint.y) / length;
    return (CGAffineTransform){ cosine, sine, -sine, cosine, startPoint.x, startPoint.y };
}

@end 
```

我已将所有代码放在[一个要点中，以便轻松复制'n'paste](https://gist.github.com/4146780)。

使用此类别，您可以轻松绘制箭头：

![示例箭头 1](../Images/67de7bbfa0774e19819206f4d8c5b80c.png) ![示例箭头 2](../Images/26f52f5358571567832885ecdbf5b511.png)

由于您只是在生成路径，因此您可以选择不填充它，或者不描边它，如下例所示：

![未描边的箭头样本](../Images/dfe32e6ba2488429ad236b7a544e78c8.png)

不过，你必须小心。如果您使头部宽度小于尾部宽度，或者如果您使头部长度大于总箭头长度，则此代码不会阻止您获得时髦的结果：

![窄头样品](../Images/edb62f4a71b88e27c5069661f75d161e.png) ![头部过长样本](../Images/4ac98f314675ad7a6a5777b964d477af.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-06-23T08:06:58.777

这是我的旧 Objective-C 代码的 Swift 版本。它应该在 Swift 3.2 和更高版本中工作。

```
extension UIBezierPath {

    static func arrow(from start: CGPoint, to end: CGPoint, tailWidth: CGFloat, headWidth: CGFloat, headLength: CGFloat) -> UIBezierPath {
        let length = hypot(end.x - start.x, end.y - start.y)
        let tailLength = length - headLength

        func p(_ x: CGFloat, _ y: CGFloat) -> CGPoint { return CGPoint(x: x, y: y) }
        let points: [CGPoint] = [
            p(0, tailWidth / 2),
            p(tailLength, tailWidth / 2),
            p(tailLength, headWidth / 2),
            p(length, 0),
            p(tailLength, -headWidth / 2),
            p(tailLength, -tailWidth / 2),
            p(0, -tailWidth / 2)
        ]

        let cosine = (end.x - start.x) / length
        let sine = (end.y - start.y) / length
        let transform = CGAffineTransform(a: cosine, b: sine, c: -sine, d: cosine, tx: start.x, ty: start.y)

        let path = CGMutablePath()
        path.addLines(between: points, transform: transform)
        path.closeSubpath()

        return self.init(cgPath: path)
    }

} 
```

这是您如何称呼它的示例：

```
let arrow = UIBezierPath.arrow(from: CGPoint(x: 50, y: 100), to: CGPoint(x: 200, y: 50),
        tailWidth: 10, headWidth: 25, headLength: 40) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-18T12:21:23.860

```
//This is the integration into the view of the previous exemple
//Attach the following class to your view in the xib file

#import <UIKit/UIKit.h>

@interface Arrow : UIView

@end

#import "Arrow.h"
#import "UIBezierPath+dqd_arrowhead.h"

@implementation Arrow
{
    CGPoint startPoint;
    CGPoint endPoint;
    CGFloat tailWidth;
    CGFloat headWidth;
    CGFloat headLength;
    UIBezierPath *path;

}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super initWithCoder:aDecoder])
    {
        [self setMultipleTouchEnabled:NO];
        [self setBackgroundColor:[UIColor whiteColor]];

    }
    return self;
}

- (void)drawRect:(CGRect)rect {

    [[UIColor redColor] setStroke];
    tailWidth = 4;
    headWidth = 8;
    headLength = 8;
    path = [UIBezierPath dqd_bezierPathWithArrowFromPoint:(CGPoint)startPoint
                                                  toPoint:(CGPoint)endPoint
                                                tailWidth:(CGFloat)tailWidth
                                                headWidth:(CGFloat)headWidth
                                               headLength:(CGFloat)headLength];
    [path setLineWidth:2.0];

    [path stroke];

}
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    UITouch* touchPoint = [touches anyObject];
    startPoint = [touchPoint locationInView:self];
    endPoint = [touchPoint locationInView:self];

    [self setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch* touch = [touches anyObject];
    endPoint=[touch locationInView:self];
    [self setNeedsDisplay];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch* touch = [touches anyObject];
    endPoint = [touch locationInView:self];
    [self setNeedsDisplay];
}

@end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-06T13:35:54.660

在 Swift 3.0 中，您可以使用

```
extension UIBezierPath {

class func arrow(from start: CGPoint, to end: CGPoint, tailWidth: CGFloat, headWidth: CGFloat, headLength: CGFloat) -> Self {
    let length = hypot(end.x - start.x, end.y - start.y)
    let tailLength = length - headLength

    func p(_ x: CGFloat, _ y: CGFloat) -> CGPoint { return CGPoint(x: x, y: y) }
    var points: [CGPoint] = [
        p(0, tailWidth / 2),
        p(tailLength, tailWidth / 2),
        p(tailLength, headWidth / 2),
        p(length, 0),
        p(tailLength, -headWidth / 2),
        p(tailLength, -tailWidth / 2),
        p(0, -tailWidth / 2)
    ]

    let cosine = (end.x - start.x) / length
    let sine = (end.y - start.y) / length
    var transform = CGAffineTransform(a: cosine, b: sine, c: -sine, d: cosine, tx: start.x, ty: start.y)        
    let path = CGMutablePath()
    path.addLines(between: points, transform: transform)
    path.closeSubpath()
    return self.init(cgPath: path)
}

} 
```*

# java - 适用于未签名小程序的默认 Java 策略文件在哪里？

> ID：13528905
> 
> 赞同：0
> 
> 时间：2012-11-23T12:10:56.387
> 
> 标签：java, applet

当我在 Web 浏览器中运行未签名的 Java 小程序时，它可以做一些事情而不是其他事情。必须有一个文件来定义这个。我认为它可能看起来像这里的列表 [ [http://www.coderanch.com/t/460650/Websphere/java-security-AccessControlException-Access-denied](http://www.coderanch.com/t/460650/Websphere/java-security-AccessControlException-Access-denied) ] 并包含如下条目：

```
permission java.lang.RuntimePermission "getClassLoader"; 
permission java.lang.RuntimePermission "setFactory"; 
permission java.lang.RuntimePermission "accessClassInPackage.sun.misc"; 
permission java.lang.RuntimePermission "accessClassInPackage.sun.beans.infos"; 
permission java.lang.RuntimePermission "accessDeclaredMembers"; 
permission java.net.SocketPermission "*", "accept, resolve, connect"; 
permission java.util.PropertyPermission "*", "read, write"; 
permission java.security.SecurityPermission "printIdentity"; 
permission java.lang.reflect.ReflectPermission "suppressAccessChecks"; 
permission java.lang.RuntimePermission "modifyThread"; 
permission java.lang.RuntimePermission "modifyThreadGroup"; 
permission java.security.SecurityPermission "getProperty.ssl.SocketFactory.provider"; 

permission java.lang.RuntimePermission "createClassLoader"; 
permission java.lang.RuntimePermission "getProtectionDomain"; 
```

以下是它可能包含的更多条目的列表：http: [//download.java.net/jdk8/docs/technotes/guides/security/permissions.html](http://download.java.net/jdk8/docs/technotes/guides/security/permissions.html)

这是列出限制的非正式尝试（似乎是由多个用户通过反复试验做出的）：[对未签名 Java 小程序可以做什么的限制？](https://stackoverflow.com/questions/1483595/restrictions-on-what-an-unsigned-java-applet-can-do)

此页面 [ [http://docs.oracle.com/javase/1.3/docs/guide/security/PolicyFiles.html](http://docs.oracle.com/javase/1.3/docs/guide/security/PolicyFiles.html) ] 似乎暗示唯一相关的两个文件是`${java.home}\lib\security\java.policy`和`${user.home}\.java.policy`。我有一个默认安装，我没有后一个文件，只有前者。该文件仅包含

```
permission java.lang.RuntimePermission "stopThread"; 
```

以及各种`PropertyPermission`如

```
permission java.util.PropertyPermission "java.version", "read"; 
```

这就是我知道必须有一个额外的未签名小程序的默认策略文件的方式：我制作了一个启动新线程的小程序，并且使用`java.policy`上面的默认文件，它失败并出现以下错误：`java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "modifyThreadGroup")`，表明没有授予任何内容它的`"modifyThreadGroup"`许可。但是，当我在浏览器中运行它时，它会成功创建线程。

所以问题是：当我在浏览器中运行小程序时，包含此权限的策略文件在哪里`"modifyThreadGroup"`？我在 JRE 目录中搜索过，但似乎没有。也许它不是通过文件完成的。那么是什么授予小程序`"modifyThreadGroup"`权限（和其他权限）？

**编辑**

这是我看到的异常的堆栈跟踪：

```
java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "modifyThreadGroup")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at sun.applet.AppletSecurity.checkAccess(AppletSecurity.java:252)
    at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:315)
    at java.lang.Thread.init(Thread.java:376)
    at java.lang.Thread.<init>(Thread.java:446)
    at LITSApplet.init(LITSApplet.java:30)
    at sun.applet.AppletPanel.run(AppletPanel.java:434)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:40:53.040

专门用于`modifyThreadGroup`：

*   构造函数的 API 文档`Thread`指向`Thread(ThreadGroup,Runnable,String)`构造函数
*   `Thread(ThreadGroup,Runnable,String)`构造函数指的是在`ThreadGroup.checkAccess`指定的`ThreadGroup`
*   `ThreadGroup.checkAccess`记录在案以调用`SecurityManager.checkAccess(ThreadGroup)`
*   `SecurityManager.checkAccess(ThreadGroup)`API 文档说明了该类中的实现：

> 如果线程组参数不是系统线程组，则此方法只是静默返回。

（然后它暗示了一种破坏 LSP：

> 需要更严格策略的应用程序应覆盖此方法。

)

额外的权限是通过普通的 Java 代码添加的。如果您考虑同源策略，这是有必要的。

# jquery - jQuery - 在具体幻灯片中自动播放

> ID：13528910
> 
> 赞同：1
> 
> 时间：2012-11-23T12:11:17.193
> 
> 标签：jquery, function, playback

我在自动播放时遇到问题，当幻灯片播放到末尾时，我想再次播放第一个，在此幻灯片中：

[jQuery幻灯片](http://sixrevisions.com/tutorials/javascript_tutorial/create-a-slick-and-accessible-slideshow-using-jquery/)

我尝试使用此功能，但这对我没有帮助：

```
$('#slideshow').slide({
    extend: function() {
        this.play(1000);
    }
}); 
```

并且：

```
setInterval( function(){ ... }, 3000); 
```

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:40:50.767

我已经研究了您在绑定单击事件的控件类上的一些代码。因此，通过从中获取代码将其添加到函数中，然后在一段时间后调用它将使滑块自动工作。代码将是这样的：

```
function slideme(position)
{
    currentPosition = (position=='right') ? currentPosition+1 : currentPosition-1;
    // Hide / show controls
    manageControls(currentPosition);
    // Move slideInner using margin-left
    $('#slideInner').animate({
        'marginLeft' : slideWidth*(-currentPosition)
    });
}

//on document ready
$(function(){               
        slideme('left');
        //Add Some intervals
        slideme('left');
        //Add Some intervals
        slideme('left');
        //Add Some intervals
        slideme('left');
        //Add Some intervals
        slideme('right');

        //all above you can write in loops by getting total no of slides dynamically        
}); 
```

# perl - 使用 csv 文件复制/重命名具有 utf8 名称的图像

> ID：13528911
> 
> 赞同：5
> 
> 时间：2012-11-23T12:11:28.737
> 
> 标签：perl, csv, utf-8

我正在编写一个脚本来批量重命名和复制基于 csv 文件的图像。csv 由第 1 列：旧名称和第 2 列：新名称组成。我想使用 csv 文件作为 perl 脚本的输入，以便它检查旧名称并使用新名称将副本复制到新文件夹中。（我认为）我遇到的问题与图像有关。它们包含 utf8 字符，如 ß 等。当我运行脚本时，它会打印出以下内容： Barfu├ƒg├ñsschen 应该是 Barfußgässchen 和以下错误：

```
Unsuccessful stat on filename containing newline at C:/Perl64/lib/File/Copy.pm line 148, <$INFILE> line 1.
Copy failed: No such file or directory at X:\Script directory\correction.pl line 26, <$INFILE> line 1. 
```

我知道它与 Binmode utf8 有关，但即使我尝试了一个简单的脚本（在这里看到：[如何从 Perl 输出 UTF-8？](https://stackoverflow.com/questions/627661/how-can-i-output-utf-8-from-perl)）：

```
use strict;
use utf8;
my $str = 'Çirçös';
binmode(STDOUT, ":utf8");
print "$str\n"; 
```

它打印出这个：Ãirþ÷s

这是我的整个脚本，有人可以向我解释我哪里出错了吗？（它不是最干净的代码，因为我正在测试东西）。

```
use strict;
use warnings;
use File::Copy;
use utf8;

my $inputfile  = shift || die "give input!\n";
#my $outputfile = shift || die "Give output!\n";

open my $INFILE,  '<', $inputfile   or die "In use / not found :$!\n";
#open my $OUTFILE, '>', $outputfile  or die "In use / not found :$!\n";

binmode($INFILE, ":encoding(utf8)");

#binmode($OUTFILE, ":encoding(utf8)");

while (<$INFILE>) {
s/"//g;
my @elements = split /;/, $_;

my $old = $elements[1];
my $new = "new/$elements[3]";
binmode STDOUT, ':utf8';
print "$old | $new\n";

copy("$old","$new") or die "Copy failed: $!";
#copy("Copy.pm",\*STDOUT);

#   my $output_line = join(";", @elements);
#    print $OUTFILE $output_line;
#print "\n"
}

close $INFILE;
#close $OUTFILE;

exit 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:31:48.857

您需要确保流程的每一步都使用 UTF-8。

创建输入 CSV 时，您需要确保它保存为 UTF-8，最好没有 BOM。Windows 记事本将添加 BOM，因此请尝试使用 Notepad++，它可以让您更好地控制编码。

您还遇到 Windows 控制台默认不兼容 UTF-8 的问题。请参阅[Windows 命令行中的 Unicode 字符 - 如何？](https://stackoverflow.com/questions/388490/unicode-characters-in-windows-command-line-how). `chcp 65001`使用或不更改 STDOUT 编码设置代码页。

就您的代码而言，关于新行的第一个错误可能是由于 CSV 中的尾随新行。`chomp()`之后添加`while (<$INFILE>) {`

更新：

要“解决”您需要在正确的语言环境中对文件名进行编码的文件 - 请参阅[如何使用 Perl 在 Windows 中创建 unicode 文件名](https://stackoverflow.com/questions/5992460/how-do-you-create-unicode-file-names-in-windows-using-perl)以及[将文件 I/O API 与 unicode 文件名一起使用的通用方法是什么？](https://stackoverflow.com/questions/2796127/what-is-the-universal-way-to-use-file-i-o-api-with-unicode-filenames). 假设您使用的是 Western 1252 / Latin，这意味着您的复制命令将如下所示：

```
copy(encode("cp1252", $old), encode("cp1252", $new)) 
```

此外，您的 open 还应该对文件名进行编码：

```
open my $INFILE,  '<', encode("cp1252", $inputfile) 
```

更新 2：

当您在 DOS 窗口中运行时，删除`binmode(STDOUT, ":utf8");`并保留默认代码页。

# svn - 如何将项目从一个 Subversion 存储库移动到另一个？

> ID：13528915
> 
> 赞同：3
> 
> 时间：2012-11-23T12:11:34.503
> 
> 标签：svn, repository

我正在尝试编写一个脚本，它将许多项目从一个（内部）Subversion 存储库复制到另一个（外部）Subversion 存储库。我尝试过将 svnadmin dump 与 svndumpfilter 结合使用但失败了，并且我不断遇到有关文件已移动且原始位置不再存在的问题。我曾尝试使用 svndumpfilter2 和 svndumpfilter3 但各种错误使我无法继续这条路线。

由于**没有**必要保留更改的历史记录，我认为一个简单的脚本就足够了。我只是从旧存储库中签出一个项目，使用 switch 更新存储库，然后执行更新。但是，我只是收到一条错误消息，指出新存储库的 UUID 无效：

*svn：'file:///home/developer/svn/NEW_REPO/java/jar/FOO' 的存储库有 uuid 'c315c701-d367-47aa-a473-87f95147eb5f'，但 WC 有 '8ce3ae18-f586-4a38 -8bf8-e0fc691799fb'*

这是我的脚本：

```
svn checkout file:////home/developer/svn/OLD_REPO/java/jar/FOO
cd FOO
svn switch --relocate file:////home/developer/svn/OLD_REPO/java/jar/FOO file:////home/developer/svn/NEW_REPO/java/jar/FOO .
svn update 
```

谁能看到我做错了什么或者 switch 不适合这个任务？

***更新***

我已经把它向前推进了。UUID 问题与我创建目标存储库的方式有关。从那以后我就跑了

```
svnadmin setuuid file:////home/developer/svn/NEW_REPO <old_repo_id> 
```

现在我没有得到 UUID 问题。但是我反而得到了这个问题：

**svn：无法从内部替换目录**

我不明白为什么。尝试从目录外部更新项目也不起作用。

***更新***

根据建议，我已将脚本切换为现在使用导入和导出，这适用于我的“存储库”为空的时候。我的脚本在随后的时间里不起作用。任何人都可以帮忙。脚本现在是：

```
# Create a list of projects to Update
echo java/pom/FOO > list.txt;
echo java/jar/FOO2 >> list.txt;
echo java/jar/FOO2 >> list.txt;

for project in `cat list.txt`; do
    echo "Updating: "${project};
    projName=`echo ${project} | awk -F"/" '{print $NF}'`

    # Obtain the current version 
    svn export ${FROM_REPO}${project} ${projName}
    # Remove the .svn information
    find ${projName} -name .svn -exec rm -rf {} \;
    # Import the project into the new repository
    svn import -m 'Updated by script' ${projName} ${TO_REPO}${project}
    rm -rf ${projName}
done; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:54:56.690

如果使用`svn export`，则不必删除`.svn`目录。

我已经做过很多次了。该程序本身相当简单，但确实需要多次通过：

### 第一关：`find $from -type d`

*   如果您在您的目录中找到`$from`不在 .目录中的目录，`$to`请执行`svn add`.
*   如果 the`$from`和 the`$to`都有该目录，则转到下一个。

### 第二关：`find $to`

*   如果您`$to`的目录或文件中不存在，请`$from`对该`svn delete`文件或目录执行操作。

### 第三关`find $from -type d`：：

*   如果文件同时存在于`$from`和`$to`中，则将文件从 复制`$from`到`$to`。
*   如果文件存在于`$from`但不存在于 中`$to`，则将文件复制到该文件`$from`并对其`$to`执行`svn add`操作。

你可以为你的循环做这样的事情：

```
find `$to` -type -d | while read $directory
do
     blah, blah, blah
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:09:08.537

如果您只想将项目的 HEAD 修订版（我假设它包含在单个目录中）从一个 svn 存储库移动到另一个，可能最直接的方法是将svn从原始位置[导出](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.export.html)它（到本地目录），然后[svn 将](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.import.html)其导入到新位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T18:41:35.817

使用 Mercurial+HGSubversion（以及中间的一些黑魔法），您的流程将是

```
hg pull OLD_REPO
hg push NEW_REPO 
```

# php - 如何在 Moodle 中检查请求处理程序

> ID：13528917
> 
> 赞同：0
> 
> 时间：2012-11-23T12:11:43.880
> 
> 标签：php, web-services, soap, moodle

我在 Moodle 2.3 插件中有一些方法，可以通过浏览器或 Web 服务（Soap）调用。

如何检查哪个是当前请求处理程序以返回打印消息等？

我正在考虑使用`$_SERVER`全局，但一种优雅的方式会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:54:31.493

每个“浏览器”页面都需要`$PAGE->url`设置才能正确输出，请参阅[Page API](http://docs.moodle.org/dev/Page_API)，因此您可能会使用它`$PAGE->url`来确定您所在的页面。

我不确定我是否正确理解了你的问题。

# html - 如何在 JSF 应用程序中使用 KEYGEN html 5 标签？

> ID：13528918
> 
> 赞同：1
> 
> 时间：2012-11-23T12:11:47.823
> 
> 标签：html, jsf-2

我想使用 KEYGEN html 5 标签从 Firefox 浏览器生成证书。

在我的 facelet 中，我有一个带有标签的表单和一个命令按钮，在这种情况下，它将将该表单提交给我的支持 bean，称为 clientCertificateBean。我想不通的是我如何获得浏览器发送的 byteArray 公钥参数。我可以将 keygen 绑定到我的支持 bean 中的一个字段，或者将它作为支持 bean 方法中的参数发送吗？

```
<h:form>
    <keygen name="RSA public key" challenge="123456789" KEYTYPE="RSA"/>
    <h:commandButton value="Generate" action="#{clientCertificateBean.generate}" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:02:10.480

似乎对 keygen 的支持将出现在 JSF 2.2 中，同时我这样解决它：

```
@Named("clientCertificateBean")
public class ClientCertificateBean {

    public void generate() {
        HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
        String publicKey = request.getParameter("RSA public key");

    } 
```

}

希望它可以帮助某人。

# json - 在 grails 视图中呈现 Json 响应

> ID：13528920
> 
> 赞同：0
> 
> 时间：2012-11-23T12:11:49.747
> 
> 标签：json, grails, map

我正在查询 twitter api 以获取带有`hashtag`in的推文`grails 2.1.1`。

**我的控制器是**

```
import grails.converters.*
import org.codehaus.groovy.grails.web.json.*; // package containing JSONObject, JSONArray,...
import groovyx.net.http.*
import static groovyx.net.http.ContentType.*
import static groovyx.net.http.Method.*

    class NepTweetController {
        def index() {
              //def restEndpointUrl = "http://search.twitter.com/search.json?q=%23nepal";
              def restEndpointUrl = "http://search.twitter.com/search.json?q=%23nepal";
              def http = new HTTPBuilder(restEndpointUrl);

              // perform a GET request, expecting JSON response data
              http.request( GET, JSON ) {
                    //uri.path = '/search.json'
                    //uri.query = [ q: '%23nepal' ]
                                response.success = { resp, json ->
                                             // def tweetsResult = json.results;
                                             // List parsedList = JSON.parse(json) as List;
                                             // JSONObject tweetJson = JSON.parse(json);
                                             //def tweetJson = JSON.parse(json);
                                              def tweets = new JSON(json) as Map;

                                              render(view: "index", model: [message: "Request sent" , tweets: tweets]);
                                 }
              }//end of request
        }//end of method
    } 
```

我成功地得到了[json 响应](http://search.twitter.com/search.json?q=#nepal)，如下所示：

```
 {
      "completed_in": 0.017,
      "max_id": 271907240007581696,
      "max_id_str": "271907240007581696",
      "next_page": "?page=2&max_id=271907240007581696&q=%23nepal%2F",
      "page": 1,
      "query": "%23nepal%2F",
      "refresh_url": "?since_id=271907240007581696&q=%23nepal%2F",
      "results": [
        {
          "created_at": "Fri, 23 Nov 2012 09:25:12 +0000",
          "from_user": "iBshnu",
          "from_user_id": 25051623,
          "from_user_id_str": "25051623",
          "from_user_name": "Bishnu Bhattarai",
          "geo": null,
          "id": 271907240007581696,
          "id_str": "271907240007581696",
          "iso_language_code": "ne",
          "metadata": {
            "result_type": "recent"
          },
          "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2622309791\/42z33jnw1kak9ttyqkrf_normal.jpeg",
          "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2622309791\/42z33jnw1kak9ttyqkrf_normal.jpeg",
          "source": "&lt;a href=&quot;http:\/\/twitter.com\/&quot;&gt;web&lt;\/a&gt;",
          "text": "RT @dipakbhattarai: \u0930\u093e\u0937\u094d\u091f\u094d\u0930\u092a\u0924\u093f \u0921\u093e. \u0930\u093e\u092e\u092c\u0930\u0923 \u092f\u093e\u0926\u0935\u0926\u094d\u0935\u093e\u0930\u093e \u092e\u0919\u094d\u0938\u093f\u0930 \u0967\u096a \u092d\u093f\u0924\u094d\u0930 \u0926\u0932\u0939\u0930\u0941\u0932\u093e\u0908 \u0930\u093e\u0937\u094d\u091f\u094d\u0930\u093f\u092f \u0938\u0939\u092e\u0924\u093f\u0915\u094b \u0938\u0930\u0915\u093e\u0930 \u092c\u0928\u093e\u0909\u0928 \u0906\u0935\u094d\u0939\u093e\u0928\u0964 #Nepal",
          "to_user": null,
          "to_user_id": 0,
          "to_user_id_str": "0",
          "to_user_name": null
        },
        {
          "created_at": "Fri, 23 Nov 2012 09:24:58 +0000",
          "from_user": "Phanindra07",
          "from_user_id": 63104333,
          "from_user_id_str": "63104333",
          "from_user_name": "Phanindra Dahal",
          "geo": null,
          "id": 271907179404095488,
          "id_str": "271907179404095488",
          "iso_language_code": "en",
          "metadata": {
            "result_type": "recent"
          },
          "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/2417859753\/febstuo4p4zltimnpky0_normal.jpeg",
          "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/2417859753\/febstuo4p4zltimnpky0_normal.jpeg",
          "source": "&lt;a href=&quot;http:\/\/twitter.com\/&quot;&gt;web&lt;\/a&gt;",
          "text": "RT @DeepakAdk: Chef's assault on #Nepal #Maoist reflects grassroots anger, excellent piece by my #AFP colleague @FrankieTaggart http:\/\/t.co\/M47qJeoD",
          "to_user": null,
          "to_user_id": 0,
          "to_user_id_str": "0",
          "to_user_name": null
        }
[....more....] 
```

我`/views/nepTweet/index.gsp`的是

```
<meta name='layout' content='main'/>
<b>${message}</b>

<p>Tweets</p>
<g:each in="${tweets}" var="tweet">
     <p>${tweet.text}</p>
</g:each> 
```

但是，我将 json 解析为 grails Map 时出错。

**我得到的错误是：**

```
Error 500: Internal Server Error
URI
/WhoTweetsNepal/nepTweet
Class
groovy.lang.MissingMethodException
Message
No signature of method: grails.converters.JSON.entrySet() is applicable for argument types: () values: [] Possible solutions: every() 
```

我经历了[如何从 GSP 页面访问 JSON 对象（字符串）？](http://grails.1312388.n4.nabble.com/How-do-I-access-A-JSON-Object-String-from-GSP-page-td3533057.html)，但无法获得帮助。

帮顶！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:42:08.633

你肯定想要

```
def tweetJson = JSON.parse(json); 
```

（这将返回 a `JSONObject`，即 a `Map`）而不是

```
def tweetJson = new JSON(json) as Map; 
```

但看起来您的代码中有一些名称冲突 - 大概是 JSON

```
http.request( GET, JSON ) 
```

旨在成为 HTTPBuilder 内容类型，而不是`grails.converters.JSON`. 如果您可以清除此名称冲突（即删除`import static`和说`ContentType.JSON`），那么事情可能会更顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:12:50.507

根据[Ian Roberts](https://stackoverflow.com/a/13530324/432903)的中肯建议，我得到了最终控制器的解决方案（意识到不需要解析它）：

```
import grails.converters.*
import org.codehaus.groovy.grails.web.json.*; // package containing JSONObject, JSONArray,...
import groovyx.net.http.*
import static groovyx.net.http.ContentType.*
import static groovyx.net.http.Method.*

    class NepTweetController {
        def index() {
              def restEndpointUrl = "http://search.twitter.com/search.json?q=%23nepal";
              def http = new HTTPBuilder(restEndpointUrl);

              // perform a GET request, expecting JSON response data
              http.request( GET, ContentType.JSON ) {
                    //uri.path = '/search.json'
                    //uri.query = [ q: '%23nepal' ]
                                response.success = { resp, json ->
                                             def tweetsResult = json.results;

                                              render(view: "index", model: [message: "Request sent" , tweets: tweetsResult]);
                                 }
              }//end of request
        }//end of method
    } 
```

# opengl-es - 恢复时 GLSurfaceView.Renderer 崩溃，因为“位图被回收”

> ID：13528921
> 
> 赞同：4
> 
> 时间：2012-11-23T12:11:55.077
> 
> 标签：opengl-es, renderer, glsurfaceview, bitmapfactory, recycle

我再次需要一些帮助：

昨天我问了这个关于使用大 jpg 图像作为位图的方法的问题（http://stackoverflow.com/questions/13511657/problems-with-big-drawable-jpg-image）我自己解决了（是我自己对那个问题的回答）但是每当我恢复我的活动时，因为它使用该位图作为 GLRenderer 纹理它会崩溃。我已经尝试了很多事情，最后一次尝试是使该位图静态，以便将其作为成员变量保留到活动中，但它崩溃了，因为我想它失去了它的 mBuffer。

有关活动代码的更多详细信息：

我在清单中将其声明为 SingletonInstance：

```
android:launchMode="singleInstance" 
```

为了保留渲染器的瓷砖。

这里有一些代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mGLSurfaceView = new GLSurfaceView(this);
    mGLSurfaceView.setEGLConfigChooser(true);   
    mSimpleRenderer = new GLRenderer(this);

    getTextures();      

    if (!mIsTileMapInitialized){

        tileMap = new LandSquareGrid(1, 1, mHeightmap, mLightmap, false, true, true, 128, true);
        tileMap.setupSkybox(mSkyboxBitmap, true);
        mIsTileMapInitialized = true;
    }

    initializeRenderer();   
    mGLSurfaceView.setRenderer(mSimpleRenderer);

    setContentView( R.layout.game_layout );

    setOnTouchListener();
    initializeGestureDetector();

    myCompassView = (MyCompassView)findViewById(R.id.mycompassview);

    // Once set the content view we can set the TextViews:
    coordinatesText = (TextView) findViewById(R.id.coordDynamicText); 
    altitudeText = (TextView) findViewById(R.id.altDynamicText); 
    directionText = (TextView) findViewById(R.id.dirDynamicText); 

    //if (!mIsGLInitialized){
    mOpenGLLayout = (LinearLayout)findViewById(R.id.openGLLayout);
    mOpenGLLayout.addView(mGLSurfaceView);
    mVirtual3DMap = new Virtual3DMap(mSimpleRenderer, tileMap);

    if (mGameThread == null){
        mGameThread = new Thread(mVirtual3DMap);
        mGameThread.start();
    }

} 
```

在 getTextures 方法上，我得到了一些小的纹理，而最大的纹理与我最后一个问题的自我回答一样：

```
 if (mTerrainBitmap==null){
        InputStream is = getResources().openRawResource(R.drawable.terrain);
        try {
            // Set terrain bitmap options to 16-bit, 565 format.
            terrainBitmapOptions.inPreferredConfig = Bitmap.Config.RGB_565;
            Bitmap auxBitmap = BitmapFactory.decodeStream(is, null, terrainBitmapOptions);
            mTerrainBitmap = Bitmap.createBitmap(auxBitmap);
        }
        catch (Exception e){

        }
        finally {
            try {
                is.close();
            } 
            catch (IOException e) {
                // Ignore.
            }
        }
    } 
```

所以，再一次，它第一次效果很好，但是当我回去时，我这样做了：

```
protected void onPause() {
    super.onPause();
    mGLSurfaceView.onPause();

}
@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
    if (mVirtual3DMap != null) {
        try {
            mVirtual3DMap.cancel();
            mGameThread=null;
            mVirtual3DMap = null;
            mGLSurfaceView.destroyDrawingCache();
            mSimpleRenderer=null;
            System.gc();
        } catch (Throwable e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }   

} 
```

当我恢复活动时：

```
@Override
protected void onResume() {
    super.onResume();
    mGLSurfaceView.onResume();
    if (mVirtual3DMap != null) {
        try {
            mVirtual3DMap.resume();
        } catch (Throwable e) {
            e.printStackTrace();
        }
    }
} 
```

它崩溃了。

为什么？？好的，这是 GLThread 上的异常原因：

java.lang.IllegalArgumentException: 位图被回收...

我尝试了这些乱七八糟的东西，因为启动两倍以上的原始活动导致应用程序崩溃，或者因为使用的内存量，现在我不知道是否恢复所有这些更改或如何处理。

有没有一种好方法可以通过这个或另一个应用程序活动来保持内存和可用，这个位图？

拜托，我需要你的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:56:33.760

不要手动处理资源，否则您的应用程序的表面会崩溃。您无法手动处理资源。

如果您担心重新加载资源并且使用 API 级别 11+，则可以使用[setPreserveEGLContextOnPause()](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#setPreserveEGLContextOnPause%28boolean%29)。它将保留您的纹理和 FBO。

如果您不能使用 API 11+，您可以移植`GLSurfaceView()`到您的应用程序。您可以检查[我自己的从 ICS 移植的 GLSurfaceView](https://gist.github.com/3890965)。

PS：对不起我的英语不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:07:05.773

不，让 Android 处理所有资源。当活动恢复时，您必须处理适当的事件并重新加载位图。您不能期望任何 OpenGL 句柄在活动恢复后仍然有效。

可以把它想象成笔记本电脑从休眠状态出来的例子。尽管所有内存都已恢复，但您不能指望任何打开的套接字仍然有一个真正的活动连接。

我是安卓新手，如有错误请指正。

# javascript - jQuery Div attr (width = $('#immagineCont').attr('clientWidth'); = undefined

> ID：13528925
> 
> 赞同：4
> 
> 时间：2012-11-23T12:12:23.507
> 
> 标签：javascript, jquery, html, undefined, attr

我不是专家 javascript 编码器。我现在用了 5 个小时尝试了很多不同的东西。我注意到一些我想不通的事情，我试图让它发挥作用

```
width = $('#immagineCont').attr('clientWidth'); 
```

但它返回未定义我试过做

```
width = $('#immagineCont').attr('id'); 
```

女巫返回#immagineCont 我猜是正确的。

当我使用

```
 $('#immagineCont') 
```

我在萤火虫中得到这个 1) [http://bildr.no/view/1325119](http://bildr.no/view/1325119) 2) [http://bildr.no/view/1325120](http://bildr.no/view/1325120)

所以我想要做的是让该死的 clientWidth 女巫似乎是不可能的。我什至尝试过儿童（“0”）和儿童（“#0”），我很快就会大吃一惊^^

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T12:13:25.707

`attr`仅当存在具有此名称的属性时才有效。

你可以简单地使用

```
width = $('#immagineCont').get(0).clientWidth; 
```

但你更可能需要

```
width = $('#immagineCont').width(); 
```

当您想要在浏览器中执行相同的操作（但不包括填充和边框）时，这更可靠。

您可能也对[outerWidth](http://api.jquery.com/outerWidth/)感兴趣。

关于发生的情况和需要的说明`get(0)`：jQuery 集合（如`$('#immagineCont')`）包装了一个或多个标准 DOM 对象，您可以使用`get(i)`或`[i]`. 如果你想访问 DOM 对象的原生属性，当 jQuery 不提供代理功能时，你需要先获取这个原生对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:17:47.950

`width()`为此目的使用 jQuery ：

```
var width = $('#immagineCont').width(); 
```

也没有为名为 clientWidth 的元素设置属性。这是一个 javascript 属性，因此可以通过取消引用 jQuery 对象来检索它：

```
var width = $('#immagineCont')[0].clientWidth; 
```

# c# - 使用 SuperWebSocket 创建 WebSocket 服务器

> ID：13528926
> 
> 赞同：0
> 
> 时间：2012-11-23T12:12:25.633
> 
> 标签：c#, webserver, websocket

我正在寻找一种实现 WebSocket 服务器的方法，并遇到了 SuperWebSocket，它似乎具有最多的功能。我下载了源代码，查看了示例（和 Echo 服务器教程），但仍然不知道如何去做。

我找到[了本指南](http://superwebsocket.codeplex.com/discussions/353151)，它似乎为我指明了正确的方向，但我在参考文献中遇到了错误。我添加了对所有 dll 的引用，并设法将它们导入“ `using Superwebsocket.Common`”，但是当我尝试构建时，我收到一条错误消息，告诉我找不到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:38:55.630

您描述的问题听起来与我尝试启动和运行 SuperWebSocketWeb 演示的问题相似。我在项目引用中遇到了类似的问题，在视觉工作室的设计时似乎很好，但在构建过程中失败了。

为了解决这个问题，我确保演示项目和 SuperSocket 程序集都是针对相同的 .net 框架版本（在我的例子中为 4.5）构建的。

# c# - 流利的 api 和关系有问题

> ID：13528930
> 
> 赞同：0
> 
> 时间：2012-11-23T12:12:47.693
> 
> 标签：c#, entity-framework

我在实体框架 4.1 和关系方面遇到问题。

这是我的课程：

```
[Table("PROJTABLE")]
    public class Certifikat {
        [Key]
        public long Recid { get; set; }

        public String Projid { get; set; }           
        public virtual StandardAndScope StandardInfo { get; set; }
}

[Table("DS_CRT_PROJSTANDARDSCOPE")]
    public class StandardAndScope {
        //[Key]
        //public long RECID { get; set; }
        [Key]
        public String Projid { get; set; }

        public String Standard { get; set; }
        public String Scope { get; set; }
    } 
```

由于我无法控制数据库，因此我无法更改键和 id 以支持约定，并且我坚持使用此设置。

我的问题是，Certifikat 可以与一个 StandardAndScope 有关系。两个表中的键都称为 Projid - 但严格来说，这不是两个表的数据库中的主键。

我真正想说的是：“certifikat c join standardandscope s on c.Projid=s.Projid”

如何使用流利的 api 完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:35:28.350

我想你正在寻找这样的东西：

```
var result = dataContext.Certifikats
    .Join(dataContext.StandardAndScopes,
        c => c.Projid,
        s => s.Projid,
        (c, s) => new
        {
            Certifikat = c,
            StandardAndScope = s
        }); 
```

你的类`dataContext`的实例在哪里。`DbContext`

# utf-8 - 将 SQL Server 2008 R2 的编码（排序规则？）更改为 UTF-8

> ID：13528931
> 
> 赞同：8
> 
> 时间：2012-11-23T12:12:48.183
> 
> 标签：utf-8, sql-server-2008-r2, collation, ucs2

我们想将我们的 Confluence 系统迁移到 SQL Server 2008 R2。现在，由于 Confluence 使用 UTF-8 编码，我需要一个使用相同编码的数据库（我猜这是排序规则？）。

命令来了

```
alter database confluence set collation COLLATION_NAME 
```

现在，似乎没有 utf-8，而且我发现 SQL Server 使用基本相同的 ucs-2。但我不知道 ucs-2 的排序规则名称是什么？有人知道吗？

编辑：我现在确实看到了编码和整理之间的区别。Confluence[文档](https://confluence.atlassian.com/display/CONFKB/Known+Issues+For+SQL+Server%20documentation)建议我应该创建一个依赖于 UCS-2 的模式（因为 MS SQL 缺少对 UTF-8 的支持）。我查看了 Managment Studio，并在数据库的**Security**目录中找到了模式条目。但是，我无法弄清楚如何将 UCS-2 编码分配给架构。我必须在 Managment Studio 中实现这一点（或者我应该使用哪个查询）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-07T12:24:12.260

根据合流文档，您应该将排序规则设置为 SQL_Latin1_General_CP1_CS_AS

我们遵循了这个文档，并在 SQL Server 2008 R2 上成功部署了 Confluence：

[SQL Server 的数据库设置](https://confluence.atlassian.com/display/DOC/Database+Setup+for+SQL+Server)

# java - 防止退出计划任务

> ID：13528936
> 
> 赞同：0
> 
> 时间：2012-11-23T12:12:56.063
> 
> 标签：java, timer

我有 java 控制台应用程序，它将作为守护进程运行，我想使用 Timer.schedule 每隔 n 秒执行一次任务。

```
Timer timer = new Timer(true);
timer.schedule(new ATask(), 0,10000);   
//insert block here 
```

“阻止”退出的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:17:51.973

试试`Thread#join()`你当前的线程。

```
Timer timer = new Timer(true);
timer.schedule(new ATask(), 0,10000); 
Thread currentThread = Thread.currentThread();
currentThread.join(); 
```

# asp.net - 使用电话号码访问 Dynamics CRM 2011 联系人 URL

> ID：13528938
> 
> 赞同：1
> 
> 时间：2012-11-23T12:13:01.150
> 
> 标签：asp.net, dynamics-crm-2011

我在本地使用 Dynamics CRM 2011。我想了解我们如何通过电话号码使用 URL 打开特定联系人。

URL 如下所示：

服务器/组织/main.aspx?etc=2&id= ***%7b203C4B46-5822-E211-B26E-000C295CF877%7d*** &pagetype=entityrecord

我想知道这个 ID 是如何创建的，以及是否可以使用电话号码等搜索字段找到/调用这个 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-20T16:18:28.677

我在 Microsoft Dynamics CRM 社区论坛上发现了一个类似的问题。Microsoft CRM 支持工程师给出了有用的回复。我将在下面引用它。

[https://community.dynamics.com/crm/f/117/t/87837](https://community.dynamics.com/crm/f/117/t/87837)

> 要在 CRM 中打开特定记录，您必须提供该记录类型的唯一标识符。
> 
> 因此，对于帐户记录，它将是 accountId。您将无法为为其他属性提供其他值并打开特定记录的帐户编辑表单构建 URL。
> 
> Microsoft Dynamics CRM SDK 提供了一个专门介绍如何通过构建 URL 打开记录的部分。
> 
> [http://msdn.microsoft.com/en-us/library/gg328483.aspx](http://msdn.microsoft.com/en-us/library/gg328483.aspx)
> 
> 您在 CRM 中获取特定记录的方式取决于您访问 CRM 数据的环境。
> 
> 如果您在网络客户端中，您可以使用高级查找来查找帐户并添加过滤条件以搜索具有特定电话号码的记录。
> 
> 如果您只需要知道帐户的电话号码就需要直接开立 CRM 帐户，那么您需要再次利用 CRM SDK。
> 
> 您可以创建一个 HTML Web 资源，并在 HTML Web 资源的查询字符串中提供数据以识别帐户（在您的情况下为一些电话号码）。在 HTML 页面上，您可以有一些 onload javascript 调用 OrganizationData.svc ODATA 服务并根据您在查询字符串中提供的条件查询帐户，然后您可以建立帐户的 URL（因为现在您有访问 accountId）并从您的 HTML Web 资源重定向到该帐户的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:19:17.153

ID 在创建时由 CRM 分配。您需要首先使用 Web 服务方法（特别是 RetrieveMultiple）搜索 ID，然后您可以构建 url。

该线程有一个在 CRM 4 中执行此操作的示例：[Retrieving a single Guid in CRM 4.0](https://stackoverflow.com/questions/12952918/retrieving-a-single-guid-in-crm-4-0/12954643#12954643)。

然后您只需要使用 CRM 2011 SDK 构建一个版本（尽管您可以使用 CRM 4 方法，因为它们仍然受支持）。

资源：

[使用 QueryExpression 构建查询](http://msdn.microsoft.com/en-us/library/gg328300.aspx)

# javascript - 如何检查日期是否在接下来的 7 天内

> ID：13528939
> 
> 赞同：3
> 
> 时间：2012-11-23T12:13:02.973
> 
> 标签：javascript, asp.net

```
function validateDate() {               
    serverDateTime="2012-11-23 17:06:46";
    txtDate.value="30-Nov-2012"

    if (how i check here){
        alert("Appointment can be fixed for next seven days only from current day.");                       
        return false;
    }else{
        return true;
    }
} 
```

我在母版页加载时获取 serverDateTime 并在所有页面中访问该变量并将 serverDateTime 与 txtDate.value 进行比较 如何验证约会只能从当天开始在接下来的 7 天内修复。

我正在使用此代码但仍然无法正常工作

```
 function validateDate()
            {           
                var dateDifference;
                pickedDate = Date.parse(txtDate.value.replace(/-/g, " "));
                todaysDate = new Date(serverDateTime);
                todaysDate.setHours(0, 0, 0, 0);
                dateDifference = Math.abs(Number(todaysDate) - pickedDate);
                //7 Days=604800000ms
                if (dateDifference > 604800000)
                {
                    return false;
                }
                else
                {
                    return true;
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:22:21.450

这应该有效：

```
//Get the date value of next week.
var today = new Date(serverDateTime);
var nextWeek = Date.parse(new Date(today.getFullYear(), today.getMonth(), today.getDate() + 7));

//If nextWeek is smaller (earlier) than the value of the input date, alert...
if (nextWeek < Date.parse(txtDate.value)){
    alert("Appointment can be fixed for next seven days only from current day.");                       
    return false;
}else{
    return true;
} 
```

[小提琴的例子。稍作修改](http://fiddle.jshell.net/9Gpsk/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:23:26.750

```
if(serverDateTime.AddDays(7) < txtDate)
{
  //Your Code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:26:30.493

[在此处查看 JSFiddle](http://jsfiddle.net/eZET9/3/)

```
//Set 1 day in milliseconds
var one_day=1000*60*60*24;
var serverDateTime= new Date("2012-11-23 17:06:46");
var newDate = new Date("30-Nov-2012"); //replace with txtDate.value

//Calculate difference btw the two dates, and convert to days
var diff = Math.ceil((newDate.getTime() - serverDateTime.getTime())/one_day);
if(diff >= 7)
{
    alert("7 days");   
}
else
{
    alert("Not up to 7 days");
}
​ 
```

这只是为了指导你。你可以[在这里阅读更多](http://www.javascriptkit.com/javatutors/datedifference.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:54:06.280

在您比较日期之前，它们必须是日期......在您的示例中，它们都是字符串，因此请尝试以下操作：

```
function validateDate() {  
  var one_day=1000*60*60*24; 
  serverDateTime="2012-11-23 17:06:46";
  txtDate.value="30-Nov-2012"

  var _dtSvr = Date.parse(serverDateTime);
  var _dtTxt = Date.parse(txtDate.value);

  if (((_dtTxt - _dtSvr)/one_day) > 7){
    alert("Appointment can be fixed for next seven days only from current day.");                       
    return false;
  }else{
    return true;
  }
} 
```

试试这个并更改 txtDate.value 的值。我还建议您对格式进行额外验证，以便正确理解您的日期。查看[MDN Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)以了解 javascript 中日期/时间的所有详细信息

编辑

我在 Chrome (v23.xxx) 控制台中尝试过这个：

```
function validateDate(serverDateTime, txtDate)
        {           
            var dateDifference;
            pickedDate = Date.parse(txtDate.replace(/-/g, " "));
            todaysDate = new Date(serverDateTime);
            todaysDate.setHours(0, 0, 0, 0);
            dateDifference = Math.abs(Number(todaysDate) - pickedDate);
            //7 Days=604800000ms
            if (dateDifference > 604800000)
            {
                return false;
            }
            else
            {
                return true;
            }
        } 
```

然后我尝试了这个：

```
validateDate("2012-11-23 17:06:46", "30-Nov-2012") 
```

它返回“true”并尝试了这个：

```
validateDate("2012-11-23 17:06:46", "30-Dec-2012") 
```

返回“假”

看起来这回答了您的问题，进一步的问题与算法无关，而更像是您的浏览器如何解释它以及您如何管理它。

# tomcat - 使用 Tomcat + JPA + Hibernate 时出错

> ID：13528940
> 
> 赞同：1
> 
> 时间：2012-11-23T12:13:04.683
> 
> 标签：tomcat, jpa

我正在尝试在 Tomcat 7 上部署应用程序。该应用程序将 JPA 与 Hibernate 结合使用。当我运行应用程序时，我不断收到以下异常：

```
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/amazontestapplcation] threw exception [java.lang.NoClassDefFoundError: javax/persistence/Persistence] with root cause
java.lang.ClassNotFoundException: javax.persistence.Persistence
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at com.example.service.EMFService.<clinit>(EMFService.java:8)
    at com.example.service.UserHandler.getAllUsers(UserHandler.java:30)
    at com.example.managedbeans.LoginBean.authenticate(LoginBean.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

所有必需的 jar 都包含在我的类路径中。我在一个论坛上读到，一个解决方案可能是将所有与休眠 JPA 相关的 jar 复制到 Tomcat lib 文件夹中。但是我不喜欢那样做。为什么无法加载 Peristence jar 仍然很奇怪。下面你会看到我的 pom.xml 文件：

```
<dependencies>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.0.Final</version>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
    </dependency>
</dependencies> 
```

我是否有可能错过依赖项？将罐子添加到他的 tomcat lib 文件夹中是个好主意吗？有人对如何解决我的问题有任何其他想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:48:52.370

我正在使用 Hibernate 3，并且`javax.persistence.Persistence`类位于`hibernate-jpa-2.0-api-1.0.1.Final.jar`（由于较新的 Hibernate 版本，您的名称可能略有不同）。检查你的`WEB-INF/lib`.

# ruby - 使用 Capybara 和 Selenium 进行异步重定向测试

> ID：13528942
> 
> 赞同：1
> 
> 时间：2012-11-23T12:13:06.860
> 
> 标签：ruby, selenium, capybara

当我在异步加载的页面上测试内容时，我可以像这样测试它：

```
 assert page.should have_content(content) 
```

这是有效的，因为它会一直检查内容，直到它进入页面（或超时）。

你如何通过重定向来做到这一点？我从 /index.html#login 重定向到 /index.html#main 这就是我现在的做法，但这不起作用：`page.current_url.include?(uri)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:33:09.417

未经测试，但我想这应该为您提供正确的 URL：

`current_url = evaluate_script(window.location.href)`

代替`href`你也可以使用`hash`and`pathname`

# php - Symfony2 之上的多站点 SaaS CMS

> ID：13528943
> 
> 赞同：3
> 
> 时间：2012-11-23T12:13:10.883
> 
> 标签：php, symfony, web, routing, content-management-system

我们将在 Symfony2 之上构建一个 SaaS CMS（如果您认为 Symfony2 是错误的方法，请回答）。我们有很多客户，我们想创建一个具有以下架构的 CMS：

假设我们有 200 个或更多客户（网站），每个客户都应该共享一个全球 CMS（所有客户都有最新版本）。此外，每个客户都应该拥有自己的数据库，其中包含客户自己的数据。在这种情况下，CMS 核心需要一个包含客户数据库等信息的主数据库。我的方法是构建一个多站点架构，其中每个客户在 apache 中都有自己的 vHost，所有客户共享一个 CMS 核心。

```
/var/www/cust001/ -> CMS customer 1
/var/www/cust002/ -> CMS customer 2
... 
```

这些文件夹是为每个客户存储模板、css、图像等的公共 html 区域。CMS 本身不在公共区域内，例如，它位于 apache2 服务器中`/var/cms/`，并且无法通过 apache2 服务器使用。是否需要客户的虚拟主机符号链接到 CMS 核心的前端控制器？每个客户虚拟主机都应该可以通过某些域访问，例如

```
cust1 -> cust001.mycompany.com, alias www.customerdomain.com ...
cust2 -> cust002.mycompany.com, alias www.customer2domain.com ...
... 
```

此外，每个客户都应该能够拥有一些 Symfony2 捆绑包（插件），用于在他们的虚拟主机中扩展核心 CMS（网店、留言簿......）。

这种方法可以用 Symfony2 实现吗？将虚拟主机域路由到前端控制器并选择正确的数据库的最佳方法是什么？Symfony2 中的动态路由（网站页面请求）是如何管理的？有一些替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:24:23.370

我认为这是一个好主意，但聪明的人已经在两个方向上做出了选择：

构建 Apostrophe CMS（我选择的 CMS）的 Punk'Ave 团队选择从 sf1 迁移到 node.js 而不是 sf2，原因在他们的公告中详述：AKBUfjzwJ">https://groups.google.com/d/味精/撇号/d-g1P6chsm8/l_AKBUfjzwJ

Apostrophe 确实有一个出色的 SAAS CMS 解决方案，在 apostrophenow.com 上非常好

然而，EzPublish 团队已经使用 Symfony 2，我相信支持 MultiSite 或 MultiTenancy 的 CMS，并且 Drupal 8 也将使用一些 Sf2 组件。

Symfony 2 路由功能非常强大，但我没有具体的链接来回答您所有的低级问题。

# xpages - 如何删除 XPage 动态视图面板中的选定文档

> ID：13528947
> 
> 赞同：2
> 
> 时间：2012-11-23T12:13:17.383
> 
> 标签：xpages, lotus-domino

我创建了一个动态视图面板。我有复选框。我将其命名为“dynamicViewPanel1”，并将数据源名称设置为“dViewData”

到目前为止一切顺利，一切正常。

现在我创建了一个名为“删除”的按钮，并将其设置为删除选定文档的简单操作，并将视图控件设置为“dViewData”。

当我选择一个或多个文档并单击删除时，我收到以下错误。

javax.faces.FacesException：找不到目标视图控件 dViewData。我接受它是因为数据源包含在动态视图面板中吗？

我检查了文档，但看不到如何让按钮识别所选文档。谁能帮我这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T13:11:37.007

你看到并尝试过这个吗？ [http://www-10.lotus.com/ldd/ddwiki.nsf/dx/2008-11-11033022WEBBZ4.htm](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/2008-11-11033022WEBBZ4.htm)

```
var viewPanel=getComponent("viewPanel1");get the componet of viewPanel
var docIDArray=viewPanel.getSelectedIds(); get the array of document ids
for(i=0;
i < docIDArray.length;
i++){
    var docId=docIDArray[i];
    var doc=database.getDocumentByID(docId);
    .. your code to deal with the selected document
} 
```

（我认为上面的代码只处理当前数据库中的视图面板）

# python - Pygame 键盘布局混淆

> ID：13528951
> 
> 赞同：7
> 
> 时间：2012-11-23T12:13:34.533
> 
> 标签：python, pygame, keyboard-events, dvorak

我在 Mac OS X 10.6 上，我的键盘输入选择器菜单中有 Dvorak、US Extended 和挪威语，而我使用的是 US Extended。

当我使用键盘输入运行 Pygame 程序时，pygame 似乎认为我正在使用 dvorak ，*而不管*实际选择了什么。

这是接受键盘输入的代码部分：

```
 # Check for events
for event in pygame.event.get():
    if event.type == KEYDOWN:
        # Change the keyboard variables
        if event.key == K_LEFT or event.key == ord('a'):
            moveRight = False
            moveLeft = True
        if event.key == K_RIGHT or event.key == ord('d'):
            moveLeft = False
            moveRight = True
        if event.key == K_UP or event.key == ord('w'):
            moveDown = False
            moveUp = True
        if event.key == K_DOWN or event.key == ord('s'):
            moveUp = False
            moveDown = True
    if event.type == KEYUP:
        if event.key == K_ESCAPE:
            pygame.quit()
            sys.exit()
        if event.key == K_LEFT or event.key == ord('a'):
            moveLeft = False
        if event.key == K_RIGHT or event.key == ord('d'):
            moveRight = False
        if event.key == K_UP or event.key == ord('w'):
            moveUp = False
        if event.key == K_DOWN or event.key == ord('s'):
            moveDown = False
        if event.key == ord('x'):
            player.top = random.randint(0, WINDOWHEIGHT - player.height)
            player.left = random.randint(0, WINDOWWIDTH - player.width) 
```

箭头键可以正常工作，但 WASD 键以与 Dvorak 一致的方式分布在键盘上。因此，“A”在两个布局上的位置相同，“W”在 QWERTY 的逗号键上，依此类推。如果我更改代码以查找`a`、和键`e`，则事情会按预期工作。`,``o`

如何让 Pygame 使用正确的布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:27:02.800

好吧，我不得不做一些杂技来让它工作。因此，首先我建议您使用可以从中获取的[密钥扫描码](http://en.wikipedia.org/wiki/Scancode)`event.scancode`。每个键都有一个唯一的代码，它指的是键盘上的物理键，无论您的键盘布局 dvorak 还是我们，这都是相同的扫描码。然后在 keydown 事件上，您将有一个名为 unicode 的属性，它是尊重当前使用的键盘布局的按下字符。因此，在 us 布局上按 d 键可以获得 unicode d，在 dvorak 上，物理键会为您提供 e 字符，这会正确反映在`event.unicode`. 这就是它变得有点烦人的地方。似乎 unicode 属性仅适用于 keydown 事件，而不适用于 keyup 事件。因此，我简单地创建了一个名为 keymap 的字典，将这些信息作为扫描码到 unicode 字符的映射来跟踪。下面的示例代码将根据键盘布局打印出您按下的字符。您可以尝试一下，即使您在程序执行期间切换键盘布局，它仍然会选择正确的键。您在下面看到的输出是我在我们的布局中按下 d 键切换到 dvorak 按下相同的键并正确得到 e 的会话。向你致敬，因为使用 dvorak 的方式比 qwerty 更好，我也使用它 :)

**代码**

```
import pygame, os
from pygame.locals import *

pygame.init()
screen = pygame.display.set_mode((640, 480))
keymap = {}

while True:
    event = pygame.event.wait()
    if event.type == KEYDOWN:
        keymap[event.scancode] = event.unicode
        print 'keydown %s pressed' % event.unicode
        if (event.key == K_ESCAPE):
            os._exit(0)

    if event.type == KEYUP:
        print 'keyup %s pressed' % keymap[event.scancode] 
```

**输出**

```
keydown d pressed
keyup d pressed
keydown e pressed
keyup e pressed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-26T17:26:16.033

接受的答案是正确的，但为了简洁起见，这里是解决方案：

```
if event.type == pygame.KEYDOWN:
   print(event.unicode) 
```

# c# - 有人知道输出“模块已优化并且调试器选项'Just My Code'已启用”吗？

> ID：13528952
> 
> 赞同：33
> 
> 时间：2012-11-23T12:13:37.547
> 
> 标签：c#, microsoft-metro

正如我在[上一个](https://stackoverflow.com/questions/13524569/how-to-use-streamsocketlistener-and-streamsocket-in-windows-8-metro-app-instead)问题中所说，我正在将我的应用程序迁移到 Windows Metro 应用程序。

我得到这样的输出![在此处输入图像描述](../Images/b9668230fba1a37a70f30b7e45fbfebf.png)

我不明白这个输出，如果有人知道，请说！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2019-04-26T11:39:22.927

通常，您不需要模块加载消息，但默认情况下它们是打开的。

工具 -> 选项 -> 调试 -> 输出窗口 -> 模块加载消息 -> 关闭

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-01-26T13:43:56.803

当您在调试器中运行应用程序时，调试器会尝试定位正在运行的代码的符号，以便您设置断点、查看/更改内存、检查调用堆栈等...

由于此任务可能会引入不必要的延迟和/或在正常情况下可能使用户感到困惑，因此默认情况下将 Visual Studio 配置为跳过不属于您的解决方案的程序集。这通常很好，因为您可以专注于您的代码。但是，在某些情况下，您需要深入研究代码以发现与您的代码无关的错误。

出于这个原因，调试器会记住您由于此设置而跳过了符号，并且您看到的图片不完整，因为没有考虑到不是“您的”的图片。

*您可以通过取消选中Tools->Options->Debugging*下的*Enable Just My Code*选项来禁用此行为。

 *此外，如果您对单步执行 .NET Framework 代码感兴趣，则必须设置*启用 .NET Framework 源单步*执行选项。设置此选项也会取消设置*Enable Just My Code*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-27T10:26:28.627

您可以在没有附加调试器的情况下启动应用程序，方法是在 Visual Studio 环境中按 Ctrl+F5

这不是错误。您只能从中释放调试过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-10T00:09:15.193

在 VS Code 中，如果您不想禁用“仅我的代码”（因为您可以只调试自己的代码），那么您可以通过将其添加到配置中来摆脱这些消息`launch.json`：

```
"logging": {
    "moduleLoad": false
} 
```

另一方面，如果您真的想调试外部代码，请将其添加到您的`launch.json`配置中：

```
"justMyCode": false 
```

* * *

`launch.json`在下面找到用于调试您自己的代码的完整示例配置：

```
{
    // Use IntelliSense to find out which attributes exist for C# debugging
    // Use hover for the description of the existing attributes
    // For further information visit https://github.com/OmniSharp/omnisharp-vscode/blob/master/debugger-launchjson.md
    "name": ".NET Core Launch (web)",
    "type": "coreclr",
    "request": "launch",
    "preLaunchTask": "build",
    // If you have changed target frameworks, make sure to update the program path.
    "program": "${workspaceFolder}/src/YourProject/bin/Debug/netcoreapp3.1/YourProject.dll",
    "args": [],
    "cwd": "${workspaceFolder}/src/YourProject",
    "stopAtEntry": false,
    "justMyCode": true, // You can change to false if you wanna debug 3rd-party code
    "logging": {
        "moduleLoad": false
    },
    // Enable launching a web browser when ASP.NET Core starts. For more information: https://aka.ms/VSCode-CS-LaunchJson-WebBrowser
    "serverReadyAction": {
        "action": "openExternally",
        "pattern": "\\bNow listening on:\\s+(https?://\\S+)"
    },
    "env": {
        "ASPNETCORE_ENVIRONMENT": "Development"
    },
    "sourceFileMap": {
        "/Views": "${workspaceFolder}/Views"
    }
} 
```*

# java - 在java中检测多个按键

> ID：13528953
> 
> 赞同：1
> 
> 时间：2012-11-23T12:13:41.900
> 
> 标签：java, swing

我正在尝试制作一个平台，但我坚持如何一次检测多个按键。例如，如果我使用运行键并向前跑，然后我按了跳跃键，游戏仍然需要知道运行键是否被按下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:14:33.240

这比我正常做的要复杂一些。通常我会允许每个`Action`人直接改变游戏状态。

此示例展示了如何使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)API 来监控某些键的按下/释放以及从中央池中添加/删除它们。

使用这个 API 的主要原因是它克服了`KeyListener`焦点上下文的限制。只要窗口具有焦点，此示例将检索按键通知。

```
public class TestMultyKeyPress {

    public static void main(String[] args) {
        new TestMultyKeyPress();
    }

    public TestMultyKeyPress() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new KeyPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class KeyPane extends JPanel implements KeyManager {

        private TrianglePane upPane;
        private TrianglePane downPane;
        private TrianglePane leftPane;
        private TrianglePane rightPane;
        private List<Integer> keysList = new ArrayList<>(25);

        public KeyPane() {
            setLayout(new GridBagLayout());
            upPane = new TrianglePane(0);
            leftPane = new TrianglePane(1);
            downPane = new TrianglePane(2);
            rightPane = new TrianglePane(3);
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 1;
            gbc.gridy = 0;
            add(upPane, gbc);

            gbc.gridx = 0;
            gbc.gridy++;
            add(leftPane, gbc);
            gbc.gridx += 2;
            add(rightPane, gbc);

            gbc.gridx = 1;
            gbc.gridy++;
            add(downPane, gbc);

            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, false), "KeyPressed.Left");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, false), "KeyPressed.Right");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0, false), "KeyPressed.Up");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, false), "KeyPressed.Down");

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, true), "KeyReleased.Left");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, true), "KeyReleased.Right");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0, true), "KeyReleased.Up");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, true), "KeyReleased.Down");

            am.put("KeyPressed.Left", new KeyAction(KeyEvent.VK_LEFT, false, this));
            am.put("KeyPressed.Right", new KeyAction(KeyEvent.VK_RIGHT, false, this));
            am.put("KeyPressed.Up", new KeyAction(KeyEvent.VK_UP, false, this));
            am.put("KeyPressed.Down", new KeyAction(KeyEvent.VK_DOWN, false, this));

            am.put("KeyReleased.Left", new KeyAction(KeyEvent.VK_LEFT, true, this));
            am.put("KeyReleased.Right", new KeyAction(KeyEvent.VK_RIGHT, true, this));
            am.put("KeyReleased.Up", new KeyAction(KeyEvent.VK_UP, true, this));
            am.put("KeyReleased.Down", new KeyAction(KeyEvent.VK_DOWN, true, this));

        }

        @Override
        public void keyPressed(int keyCode) {
            if (!keysList.contains(keyCode)) {
                keysList.add(new Integer(keyCode));
                updateKeyState();
            }
        }

        @Override
        public void keyReleased(int keyCode) {
            keysList.remove(new Integer(keyCode));
            updateKeyState();
        }

        public void updateKeyState() {
            upPane.setActive(keysList.contains(KeyEvent.VK_UP));
            downPane.setActive(keysList.contains(KeyEvent.VK_DOWN));
            leftPane.setActive(keysList.contains(KeyEvent.VK_LEFT));
            rightPane.setActive(keysList.contains(KeyEvent.VK_RIGHT));
        }

    }

    public interface KeyManager {

        public void keyPressed(int keyCode);

        public void keyReleased(int keyCode);

    }

    public class KeyAction extends AbstractAction {

        private int keyCode;
        private boolean released;
        private KeyManager manager;

        public KeyAction(int keyCode, boolean released, KeyManager manager) {
            this.keyCode = keyCode;
            this.released = released;
            this.manager = manager;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            if (released) {
                manager.keyReleased(keyCode);
            } else {
                manager.keyPressed(keyCode);
            }
        }

    }

    public class TrianglePane extends JPanel {

        private boolean active;
        private TriangleShape shape;

        public TrianglePane(int direction) {

            shape = new TriangleShape(20);
            AffineTransform at = null;
            switch (direction) {
                case 0:
                    at = AffineTransform.getRotateInstance(Math.toRadians(-90), 10, 10); // UP
                    break;
                case 1:
                    at = AffineTransform.getRotateInstance(Math.toRadians(180), 10, 10); // UP
                    break;
                case 2:
                    at = AffineTransform.getRotateInstance(Math.toRadians(90), 10, 10); // UP
                    break;
                case 3:
                    at = AffineTransform.getRotateInstance(Math.toRadians(0)); // UP
                    break;
            }
            shape.transform(at);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(20, 20);
        }

        public void setActive(boolean value) {
            if (active != value) {
                this.active = value;
                repaint();
            }
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            int x = (getWidth() - shape.getBounds().width) / 2;
            int y = (getHeight() - shape.getBounds().height) / 2;
            if (active) {
                g2d.setColor(Color.BLACK);
            } else {
                g2d.setColor(Color.GRAY);
            }
            g2d.fill(shape);
        }

    }

    public class TriangleShape extends Path2D.Float {

        public TriangleShape(int size) {
            moveTo(1, 1);
            lineTo(size - 1, (size - 1) / 2);
            lineTo(1, size - 1);
            closePath();
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:21:22.800

试试这个自定义类，它使用 a`HashSet`来跟踪按下的键...

```
class MultiKeyPressListener implements KeyListener {

    // Set of currently pressed keys
    private final Set<Character> pressed = new HashSet<Character>();

    @Override
    public synchronized void keyPressed(KeyEvent e) {
        pressed.add(e.getKeyChar());
        if (pressed.size() > 1) {
            // More than one key is currently pressed.
            // Iterate over pressed to get the keys.
        }
    }

    @Override
    public synchronized void keyReleased(KeyEvent e) {
        pressed.remove(e.getKeyChar());
    }

    @Override
    public void keyTyped(KeyEvent e) {/* Not used */ }
} 
```

# asp.net - Asp Net MVC - 成员资格完整更新或控制器检查以获得更好的性能？

> ID：13528954
> 
> 赞同：0
> 
> 时间：2012-11-23T12:13:41.850
> 
> 标签：asp.net, asp.net-mvc, performance, asp.net-mvc-4, membership

伙计们，要更新用户个人资料，如果用户只想更新一个详细信息，可以说我的控制器中的电子邮件我正在这样做：

```
try
        {
            MembershipUser user = Membership.GetUser(model.UserName);

            user.Email = model.Email;
            user.IsApproved = model.Active;
            user.ChangePassword(model.Password, model.ConfirmPassword);

            string password = user.GetPassword();
            user.ChangePasswordQuestionAndAnswer(password, model.SecretQuestion, model.SecretQuestionPassword);

            Membership.UpdateUser(user);

            return Content("Usuário Atualizado com Sucesso!");

        } 
```

问题是：我是否需要设置一些 If 条件来检查是否设置了其他值，方法是检查该字段是否未禁用，以便我只能更改所需的列，或者执行完整的更新，因为我拥有所有具有从数据库返回的值及其值的字段？

我想要一个性能良好的解决方案，但我不知道检查所有字段或执行完整更新是否会更好。

请你帮助我好吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:18:30.873

在这种用例中考虑性能是浪费时间。您的用户是否会大规模更新他们的电子邮件，比如说...每秒 1000 次？这是几乎从未使用过的功能之一。

想想好的设计。制定有意义的方法。稍后优化，仅当您遇到性能问题时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:57:58.980

如果您的意图是仅更新电子邮件，则仅设置电子邮件。所有其他字段都是从数据库加载的，因此它们将保留其值。这也将是性能友好的分配明你在幕后使用某种 ORM。因为 ORM 生成的 SQL 会很简洁。

# php - 使用 php 将事件添加到谷歌日历而无需多个用户登录

> ID：13528956
> 
> 赞同：0
> 
> 时间：2012-11-23T12:13:53.987
> 
> 标签：php, google-calendar-api

我拥有由谷歌 API 控制台生成的所有客户端 ID、客户端密码、API 密钥、令牌授权码等。而且我还激活了日历服务。我组建了一个可以编辑一个日历的 2 人团队。现在，我想以这样一种方式编写代码，使他们俩都可以将他们的事件添加到该日历中，而无需登录他们的帐户。它要求登录以查看日历，显然无法添加事件。我被推荐了许多教程，例如 oauth 2.0 等，但当时并没有得到确切的想法。有可能吗？

```
<?php
require_once 'google-api-client/src/Google_Client.php';
require_once 'google-api-client/src/contrib/Google_CalendarService.php';
session_start();
$client = new Google_Client();
$client->setApplicationName("Google Calendar PHP Starter Application");
// Visit code.google.com/apis/console?api=calendar to generate your
// client id, client secret, and to register your redirect uri.
$client->setClientId('client id');
$client->setClientSecret('cliet secret');
$client->setRedirectUri('my calendar url generated after clicking to HTML button');
$calendarListEntry = new Google_CalendarListEntry("My calendar entry");
$calendarListEntry->setId("ajoshi.kraff@gmail.com");
$createdCalendarListEntry = $cal->calendarList->insert($calendarListEntry);
echo $createdCalendarListEntry->getSummary(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:52:51.397

这种情况[在 google docs](https://developers.google.com/accounts/docs/OAuth2#webserver)中有描述。

在用户提供正确的凭据后，google oauth 服务器会将他重定向到您的服务并提供**访问令牌**（您可以立即使用它来签署您的请求）和**刷新令牌**，您可以使用它来获取新的访问令牌。您将不得不获得新的访问令牌，因为它们已过期。刷新令牌可让您在没有用户存在的情况下获得新的访问令牌 - 例如在您的后台服务中。所以你应该将刷新令牌存储在数据库中（或任何你想要的地方）。

查看此文档页面： [https ://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)

# c# - 如何将导航属性名称更改为有意义的名称

> ID：13528958
> 
> 赞同：6
> 
> 时间：2012-11-23T12:14:01.550
> 
> 标签：c#, entity-framework, entity-framework-5, ef-database-first

我将 Database First 与 Entity Framework 5 一起使用。我们有两个表（大大简化）：

*   地址
    *   街道
    *   城镇（等）
*   顾客
    *   姓名
    *   帐单地址
    *   邮寄地址
    *   AltDeliveryAddress

当我们使用 Visual Studio 将数据库导入 EF（“从数据库更新模型”）时，我们最终会得到如下代码：

```
Customer myCustomer;
var a = myCustomer.Address;
var b = myCustomer.Address1;
var c = myCustomer.Address2; 
```

我想要的显然是这样的：

```
var a = myCustomer.BillingAddress;
var z = myCustomer.BillingAddress.Street; // etc. 
```

我可以在设计器中编辑模型，更改导航属性以给我正确的名称。然而，这不是一个可行的解决方案，因为我们每次对数据库进行更改时都会重建模型。

我尝试过的一个选项是创建一个像这样的部分类（从现有的 MyModel.Designer.cs 复制代码，只是更改了属性名称）：

```
public partial class Customer : EntityObject
{
    [EdmRelationshipNavigationPropertyAttribute("MyModel", "FK_Customers_Addresses_BillingAddress", "Address")]
    public Address BillingAddress
    {
        get {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<LookupItem>("MyModel.FK_Customers_Addresses_BillingAddress", "Address").Value;
        }
        set {
            ((IEntityWithRelationships)this).RelationshipManager.GetRelatedReference<LookupItem>("MyModel.FK_Customers_Addresses_BillingAddress", "Address").Value = value;
        }
    }
} 
```

但是，当我运行它时，我收到以下错误：

> 概念类型“MyModel.Customer”中的成员数量与对象端类型“MyNamespace.DataModel.Customer”中的成员数量不匹配。确保成员数量相同。

我试过使用 [NotMapped()] 属性，但这并没有任何区别。如果我删除 [EdmRelationshipNavigationPropertyAttribute...] 属性，则 Linq 会抱怨以下错误：

> LINQ to Entities 不支持指定的类型成员“BillingAddress”。仅支持初始化程序、实体成员和实体导航属性。

有没有其他方法可以在客户对象中实现有意义的名称？

这是我最后想要的：

```
var j = myCustomer.BillingAddress;
var k = myCustomer.BillingAddress.Street;
var l = myCustomer.BillingAddress.Town; // etc. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T12:19:39.433

您可能不必担心这一点。在模型设计器中更改属性名称后，EF 会记住自定义命名。它不会被后续更新覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:21:16.027

您可以将属性添加到您的部分类中，这些属性将成为属性等的访问`Address1`器`Address2`。

例子：

```
public partial class Customer : EntityObject
{
    public Address BillingAddress
    {
         get 
         {
             return this.Address;
         }
         set 
         {
              this.Address = value;
         }
    }
} 
```

更新：它不适用于 linq to 实体。恐怕这是数据库优先方法的限制。这也是我们使用 EF Code First 的原因之一。在 Code First 中，您可以完全控制实体映射。（代码优先意味着在代码中映射，并不意味着如果您不想要它，您的数据库将从该代码生成）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T13:48:16.513

我知道这有点老了，但处理这种情况的最简单/最好的方法似乎是利用 EF5 电动工具“首先逆向工程代码”。

[http://msdn.microsoft.com/en-us/data/jj200620](http://msdn.microsoft.com/en-us/data/jj200620)

它为您提供了代码优先映射的所有优势，以及数据库优先对象创建的简单/方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-12T06:57:11.113

这里描述了一个解决方案：

[在对数据库进行逆向工程时改进导航属性名称](https://stackoverflow.com/questions/12937193/improve-navigation-property-names-when-reverse-engineering-a-database)

您可以在项目中包含代码生成模板（*.tt 文件）。按照链接中的说明修改它们。示例在这里：[https](https://github.com/markuspeter/EFPowerToolsTemplates) ://github.com/markuspeter/EFPowerToolsTemplates （检查分支是否有更改）

然后可以用更好的名称生成您的命名。

# delphi - 我们可以使用 DUnit 编写什么样的测试用例？

> ID：13528959
> 
> 赞同：6
> 
> 时间：2012-11-23T12:14:05.393
> 
> 标签：delphi, delphi-7, dunit, parameterized-unit-test, minimum-coded-unit

我正在使用德尔福 7。

我是 DUnit 的新手，我怀疑我可以使用 DUnit 编写什么样的测试用例以及如何编写（这对我来说非常重要）。

是否可以为特定的按钮单击事件编写测试用例？因为在那种情况下，可能会使用大量代码，其中使用各自的数据库相关过程或函数调用更多单元。在这种情况下，编写测试用例的最佳方法是什么？如何编写？（如果可能的话，一个例子或参考将对我有很大的帮助）。

因为，在示例 DUnit 项目中，我们无法编写完整的应用程序代码集，因为在某些情况下可能需要创建其他表单。

所以，我的疑问是在这种情况下如何编写测试用例，通常我们可以使用 DUnit 编写什么类型的测试用例，重要的是如何编写？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-23T12:38:08.863

这应该是评论，但我将其写为答案，因为它不适合评论。

我建议你做两件事：

*   研究将您的业务逻辑与您的界面分离（重构您的代码）
    通常，您将代码拆分为独立的单元，然后“自下而上”对单元的核心功能进行单元测试。您不会对 GUI 进行单元测试。谷歌例如“单元测试解耦delphi单元”

*   查看以下链接以获取有关单元测试可以做什么的示例：

[http://www.howtodothings.com/computers/a928-automated-testing-with-dunit.html](http://www.howtodothings.com/computers/a928-automated-testing-with-dunit.html)
[http://www.nldelphi.com/cgi-bin/articles.exe/ShowArticle?ID=14697](http://www.nldelphi.com/cgi-bin/articles.exe/ShowArticle?ID=14697)
[https:// lists.sourceforge.net/lists/listinfo/dunit-interest](https://lists.sourceforge.net/lists/listinfo/dunit-interest)
[http://www.delphi-treff.de/tutorials](http://www.delphi-treff.de/tutorials)
[http://sourceitsoftware.blogspot.com/2008/10/getting-line-numbers-in-dunit- test.html](http://sourceitsoftware.blogspot.com/2008/10/getting-line-numbers-in-dunit-test.html)
[http://wiert.me/2010/09/08/delphi-use-tstrings-to-parse-non-standard-separated-strings-and-validate-it-with-dunit-tests/](http://wiert.me/2010/09/08/delphi-use-tstrings-to-parse-non-standard-separated-strings-and-validate-it-with-dunit-tests/)
[http:// /delphi.about.com/od/vclusing/a/autotestvcl.htm](http://delphi.about.com/od/vclusing/a/autotestvcl.htm)
[http://dunit.sourceforge.net/](http://dunit.sourceforge.net/)
[http://delphi.about.com/od/toppicks/tp/aatpdebug.htm](http://delphi.about.com/od/toppicks/tp/aatpdebug.htm)
[http://www .nickhodges.com/post/Delphi-Mocks-The-Basics.aspx](http://www.nickhodges.com/post/Delphi-Mocks-The-Basics.aspx)
[http://www.finalbuilder.com/Resources/Blogs/tabid/458/EntryId/287/Introducing-Delphi-Mocks.aspx](http://www.finalbuilder.com/Resources/Blogs/tabid/458/EntryId/287/Introducing-Delphi-Mocks.aspx)
[https://github.com/Vsofttechnologies/delphi-mocks](https://github.com/Vsofttechnologies/delphi-mocks)
[http://www.uweraabe。 de/Blog/2012/03/17/a-dunit-folder-iterator-extension/](http://www.uweraabe.de/Blog/2012/03/17/a-dunit-folder-iterator-extension/)
[Delphi 中的单元测试——你是怎么做的？](https://stackoverflow.com/questions/18291/unit-testing-in-delphi-how-are-you-doing-it)
[http://members.optusnet.com.au/~mcnabp/](http://members.optusnet.com.au/~mcnabp/)
[http://www.nickhodges.com/post/The-Vocabulary-of-Unit-Testing.aspx](http://www.nickhodges.com/post/The-Vocabulary-of-Unit-Testing.aspx)
[http://hanselminutes.com/169/the-与 roy-osherove 一起进行单元测试的艺术](http://hanselminutes.com/169/the-art-of-unit-testing-with-roy-osherove)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T03:20:31.197

通过编写简单的测试来学习单元测试。简单测试适用于您正在构建的可单元测试的类。可单元测试的类不是完整的 Delphi GUI 应用程序。

试试这个作为第一个练习：

1.  制作一个可以将 1 到 MAXINT 之间的整数分解为素数列表的类，当它们相乘时，得到原始数字。结果应从最小因子到最大因子排序。如果该结果列表的大小为 1，则结果为素数。零和负数会引发异常。

2.  与其一次性完成所有工作，不如尝试“红/绿”测试驱动开发。这意味着只需编写足够的代码以使第一次测试失败。（编写第一个测试，编写足够的代码以使您正在构建的类编译并运行，但未通过测试。现在使第一个测试通过。不解决整个因式分解数，只需通过第一个测试。）

3.  重复编写失败测试的过程，然后编写使其通过所需的代码，直到您提供（与您的测试一起）您的类现在可以分解从 1 到 MAXINT 的任何整数值。

当谈到“对现有遗留应用程序进行单元测试”时，您应该查看一本名为“有效地使用遗留代码”的书。我无法向您简要介绍如何开始将单元测试添加到一大堆泥中（您的按钮 OnClick 代码）。

# ruby - Watir-webdriver“wait_until”无法正常工作

> ID：13528964
> 
> 赞同：1
> 
> 时间：2012-11-23T12:14:38.640
> 
> 标签：ruby, watir, watir-webdriver

*   红宝石 1.9.3p327
*   Watir-webdriver 0.6.1

我有一些代码可以在一台计算机上运行，​​但不能在另一台计算机上运行，​​我不知道为什么：

```
require 'watir-webdriver'

b = Watir::Browser.new

timey = Time.now; b.div(:id => 'nonexistant').wait_until_present(0.1) rescue puts "#{Time.now - timey}" 
```

这将返回：

> 60.045506

它应该只等待 0.1 秒。我可以看到两台计算机之间的唯一区别是一台使用 Ruby p327，另一台使用 p286。

我不知道这是否相关，但我注意到当 webdriver 加载时有一条线说明“阻止列表已禁用”，我不记得以前见过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:14:24.280

watir-webdriver 尚不兼容 Firefox 17 - 您使用的是 Firefox 吗？如果是这样，请检查您的 Firefox 版本。我更新到 17 并且我使用等待方法的测试停止工作（它们对 16 运行良好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:14:37.547

我相信 12 月 7 日更新到 watir-webdriver gem (0.6.2) 解决了这个问题。

# android - 提供多语言支持

> ID：13528965
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:14:39.527
> 
> 标签：android

如何在我的 android 应用程序中提供多语言支持？我正在开发一个应用程序，我必须在其中提供六种不同的语言支持，在选择法语时，我的应用程序的整个文本将转换为法语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:18:47.733

您基本上不会将字符串放入代码中，而是将它们放入应用程序资源并按 ID 引用。在运行时，Android 只需获取您的 ID 并返回匹配的字符串。如果使用更改语言，则使用不同的资源文件（字符串 ID 保留在资源中），因此您的代码不需要任何更改。

这是您想要开始的 Android 开发者网站上的文章：[本地化](http://developer.android.com/guide/topics/resources/localization.html)

**编辑**

您还应该阅读这篇文章：[支持不同的语言](http://developer.android.com/training/basics/supporting-devices/languages.html)。

这是有关该主题的[教程。](http://www.icanlocalize.com/site/tutorials/android-application-localization-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:30:41.787

您所做的是在您的 values 文件夹中创建一个名为 strings.xml 的文件，然后为您想要支持的每种语言创建另一个文件夹，例如 values-sv 并将您翻译的 strings.xml 文件放在那里。然后在您的代码中仅使用字符串资源而不是硬编码引用，例如

```
mActivity.getResources().getString(R.string.myTitle); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:28:13.063

您应该只在调用`values-fr`（法语）中添加一个文件夹并将其添加到该`res`文件夹​​下。在那里放置`strings.xml`带有法语字符串的文件。Android 系统将首先查找带有设备语言代码的 values 文件夹，如果找不到，它将使用默认`values`文件夹。

您的结构应如下所示：

```
res/
  values/
     strings.xml
  values-fr/
     strings.xml 
```

我写了一篇关于这个主题的博客文章。[在这里](http://bon-app-etit.blogspot.be/2013/04/supporting-multiple-languages.html)查看

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:23:15.613

```
Market   Region code  Language Android  language/region code    String file   Android version

Greece  GR  Greek   el_rGR  res/values-el/strings.xml   Since 2.3
Italy   IT  Italian it_rIT  res/values-it/strings.xml   Since 1.5
Netherlands NL  Dutch   nl_rNL  res/values-nl/strings.xml   Since 1.5
Portugal    PT  Portuguese  pt_rPT  res/values-pt/strings.xml   Since 2.3
Spain   ES  Spanish es_rES  res/values-es/strings.xml   Since 1.5 
```

和

多语言支持很容易为 android 完成。使用语言代码的后缀为该语言创建一个新的值目录。对于德语：values-de 或法语：values-fr，而不是将您的 strings.xml 复制到其中并翻译每个条目。这就是你所需要的。

```
http://developer.vodafone.com/how-support-multiple-languages-android/ 
```

# c++ - QT最大化窗口中的小部件

> ID：13528967
> 
> 赞同：1
> 
> 时间：2012-11-23T12:14:41.970
> 
> 标签：c++, qt

我正在尝试在 MainWindow 中最大化 miniget 来启动我的应用程序。我还需要小部件来响应主窗口的大小调整，尝试了一些事情，但没有完全让它正常工作。任何想法？

谢谢

![在此处输入图像描述](../Images/2ed0ac89ebc5b209d11b1631b37c4b52.png)

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    //this->setGeometry(50,50, 1280, 768);
    setWindowState(Qt::WindowMaximized);
    //MainWindow::showMaximized();
    m_pWebView = new QWebView(this);
    //set position and size
    m_pWebView->setGeometry(0,0,this->width(), this->height());
    m_pWebView->load(QUrl("http://csm.nathan"));
    //m_pWebView->show();
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:37:37.817

通常当你在 QtCreator 中创建一个新项目时，你的 QMainWindow 中应该有一个“centralWidget”。

只需确保在其中使用 QGridLayout ：

```
this->centralWidget()->setLayout(new QGridLayout); 
```

然后将您的 QWebView 添加到此小部件的布局中：

```
this->centralWidget()->layout()->addWidget(m_pWebView); 
```

只要您的 WebView 是网格中唯一的一个元素，这应该可以完成这项工作。

另一种解决方案是使用 QtDesigner：

*   首先，在窗口中添加您的 webview 或任何其他小部件
*   然后点击窗口背景
*   然后单击“在网格中布局”按钮

这将完全一样，但存储在 .ui 文件而不是您的 .cpp 文件中。

# umbraco - 在 umbraco 中发布文档

> ID：13528969
> 
> 赞同：1
> 
> 时间：2012-11-23T12:14:43.490
> 
> 标签：umbraco, umbraco5

大家好，从过去的几个小时开始，我正在尝试发布一个文档，并且我正在设置一些自定义数据类型值，因为我正在保存序列化值：在 umbraco 中，数据类型值仅在数据库和 umbraco.config 文件中可用发布文档，所以在我的自定义文档类型中，我有一个名为添加用户的按钮，我想在调用此按钮时将其保存在数据库中，我需要发布我正在使用的文档：

```
//Get the document by it's ID
Document d = new Document(currentDocID);

//Mark it ready for publishing
d.Publish(new umbraco.BusinessLogic.User(0));

//Tell the runtime to update the document cache
umbraco.library.UpdateDocumentCache(d.Id);

//call republishing from the api:
umbraco.library.RefreshContent();

//Server.ScriptTimeout = 100000;
//umbraco.cms.businesslogic.web.Document.RePublishAll();
//umbraco.library.RefreshContent(); 
```

但它无法更改 Umbraco.config 文件和数据库文件，而如果通过单击在 umbraco 中发布，数据将保存在 umbraco db 和配置文件中。我无法弄清楚我错过了什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:57:47.080

代码示例看起来很适合以编程方式保存节点，所缺少的只是更新已更改字段的行，如果它在文档类型中别名为“myField”，则意味着更改为：

```
var myValue = "[{ serialized value that might need escaping }]";

Document d = new Document(currentDocID);
d.getProperty("myField").Value = myValue;
d.Publish(new umbraco.BusinessLogic.User(0));
umbraco.library.UpdateDocumentCache(d.Id); 
```

# python - 如何在 Python 中转换复杂的嵌套 Ctypes 联合和结构

> ID：13528971
> 
> 赞同：4
> 
> 时间：2012-11-23T12:14:43.490
> 
> 标签：python, struct, union, ctypes

如何将其转换为在 Python 中使用？

下面的代码是一个复杂的嵌套 Union 和 Struct。很容易将其错误地转换为 Python。

```
typedef struct {
    unsigned char       enable;
    unsigned short      x;
    unsigned short      y;
    unsigned char       local;
    unsigned char       em;
    unsigned char       tr;
    short               at;
    unsigned char       reserved[6];
} IRF_SPOT;

typedef union strSAVEDATA
{
    struct
    {
        uint32_t    crc;
        uint8_t     ver;
        uint8_t     id;
        uint8_t     baudrate;
        int16_t     level;
        uint16_t    span;
        uint8_t     tv;
        uint8_t     agc;
        uint8_t     invert;
        uint8_t     mirror;
        uint8_t     flip;
        uint8_t     colorbar;
        uint8_t     showinfo;
        uint8_t     indicator;
        uint8_t     unit;
        uint8_t     dhcp;
        uint8_t     color;
        uint8_t     alpha;
        uint8_t     zoom;
        uint8_t     sharp;
        uint8_t     noise;          // new
        uint16_t    nuc;
        uint32_t    ipaddr;
        uint32_t    netmask;
        uint32_t    gateway;
        uint32_t    dns;
        uint8_t     alarm1_func;    // new
        uint8_t     alarm1_cond;    // new
        uint16_t    alarm1_value;   // new
        uint8_t     alarm2_func;    // new
        uint8_t     alarm2_cond;    // new
        uint16_t    alarm2_value;   // new
        uint8_t     temp_mode;      // reserved
        uint8_t     down_filter;    // reserved
        uint8_t     show_center;
        uint8_t     show_spot;
        uint8_t     show_correction;
        uint8_t     show_isotherm;
        uint8_t     reserved1[70];      
        uint8_t     limit9;
        uint8_t     enable_high;    
        uint8_t     correction;
        uint8_t     emissivity;
        uint8_t     transmission;
        int16_t atmosphere;
        struct {
            uint8_t     enable;
            uint16_t    x;
            uint16_t    y;
            uint8_t     local;
            uint8_t     em;
            uint8_t     tr;
            int16_t at;
            uint8_t     reserved[6];
        } spot[10];
        struct {
            uint8_t     enable;
            uint32_t    seed_color;
            int16_t     top;
            int16_t     bottom;
            uint8_t     reserved[3];
        } iso[3];
    };
    char padding[512];
} IRF_SAVEDATA_T;

typedef struct 
{
    unsigned short* ir_image;   
    DWORD image_buffer_size;    
    LPBYTE lpNextData;          
    DWORD dwSize;               
    DWORD dwPosition;           
    IRF_MESSAGE_TYPE_T      msg_type;
    IRF_SAVEDATA_T          save_data;      
    unsigned int            fw_ver;         
    unsigned short PMSGTYPE;    // Primary Message Type Code
    unsigned short RCODE;       // Response Code
} IRF_IR_CAM_DATA_T; 
```

这太复杂了。我用它来连接网络摄像头，但摄像头不回复消息。请教我如何正确转换它。

我的 Python 代码：

```
class spot(Structure):
    _fields_ = [
            ('enable',wintypes.c_uint8),
            ('x',wintypes.c_uint16),
            ('y',wintypes.c_uint16),
            ('local',wintypes.c_uint8),
            ('em',wintypes.c_uint8),
            ('tr',wintypes.c_uint8),
            ('at',wintypes.c_uint16),
            ('reserved',wintypes.c_uint8*6)
            ]

class iso(Structure):
    _fields_ = [
            ('enable',wintypes.c_uint8),
            ('seed_color',wintypes.c_uint32),
            ('top',wintypes.c_int16),
            ('bottom',wintypes.c_int16),
            ('reserved',wintypes.c_uint8)
            ]
class strSAVEDATA(Structure):
    _fields_ = [
            ('crc',wintypes.c_uint32),
            ('ver',wintypes.c_uint8),
            ('id',wintypes.c_uint8),
            ('baudrate',wintypes.c_uint8),
            ('level',wintypes.c_int16),
            ('span',wintypes.c_uint16),
            ('tv',wintypes.c_uint8),
            ('agc',wintypes.c_uint8),
            ('invert',wintypes.c_uint8),
            ('mirror',wintypes.c_uint8),
            ('flip',wintypes.c_uint8),
            ('colorbar',wintypes.c_uint8),
            ('showinfo',wintypes.c_uint8),
            ('indicator',wintypes.c_uint8),
            ('unit',wintypes.c_uint8),
            ('dhcp',wintypes.c_uint8),
            ('color',wintypes.c_uint8),
            ('alpha',wintypes.c_uint8),
            ('zoon',wintypes.c_uint8),
            ('sharp',wintypes.c_uint8),
            ('noise',wintypes.c_uint8),
            ('nuc',wintypes.c_uint16),
            ('ipaddr',wintypes.c_uint32),
            ('netmask',wintypes.c_uint32),
            ('gatway',wintypes.c_uint32),
            ('dns',wintypes.c_uint32),
            ('alarm1_func',wintypes.c_uint8),
            ('alarm1_cond',wintypes.c_uint8),
            ('alarm1_value',wintypes.c_uint16),
            ('alarm2_func',wintypes.c_uint8),
            ('alarm2_cond',wintypes.c_uint8),
            ('alarm2_value',wintypes.c_uint16),  
            ('temp_mode',wintypes.c_uint8),
            ('down_filter',wintypes.c_uint8),
            ('show_center',wintypes.c_uint8),
            ('show_spot',wintypes.c_uint8),
            ('show_correction',wintypes.c_uint8),
            ('show_isotherm',wintypes.c_uint8),
            ('reserved1',wintypes.c_uint8*70),
            ('limit9',wintypes.c_uint8),
            ('enable_high',wintypes.c_uint8),
            ('correction',wintypes.c_uint8),
            ('emissivity;',wintypes.c_uint8),
            ('transmission',wintypes.c_uint8),
            ('atmosphere',wintypes.c_int16),
            ('spot',spot*10),
            ('iso',iso*3)
            ]    

class IRF_SAVEDATA_T(Union):
    _fields_ = [
            ('strSAVEDATA',strSAVEDATA),
            ('padding',wintypes.c_uint8*512)
            ]

class IRF_IR_CAM_DATA_T(Structure):
    _fields_ = [
            ('ir_image',POINTER(wintypes.USHORT)),
            ('image_buffer_size',wintypes.DWORD),
            ('lpNextData',POINTER(wintypes.BYTE)),
            ('dwSize',wintypes.DWORD),
            ('dwPosition',wintypes.DWORD),
            ('msg_type',IRF_MESSAGE_TYPE_T),
            ('save_data',IRF_SAVEDATA_T),
            ('fw_ver',wintypes.UINT),
            ('PMSGTYPE',wintypes.USHORT),
            ('RCODE',wintypes.USHORT)                
            ] 
```

# javascript - 为 1.8 Sizzle 重写一个 jQuery 表达式/选择器

> ID：13528977
> 
> 赞同：3
> 
> 时间：2012-11-23T12:15:18.090
> 
> 标签：javascript, jquery, jquery-selectors, jquery-1.8

不久前，我问了一个关于防止事件重复绑定的问题[[这里]](https://stackoverflow.com/questions/13341307/listen-for-changes-against-an-object-in-an-array-without-nesting-event-listeners) 我正在尝试更新 1.8 的表达式，但无法使其正常工作：

原本的：

```
$.expr[':'].hasEvent = function(obj, idx, meta, stack) {
    return ($._data((obj), 'events') != undefined && $_.data((obj), 'events')[meta[3]] != undefined);
}; 
```

我失败的尝试：

```
jQuery.expr[':'].hasEvent = $.expr.createPseudo(function( selector, context ) {
    return function(elem) {
        return ($._data((elem), 'events') != undefined && $_.data((elem), 'events').selector != undefined);
    }
}); 
```

用法：

```
$(object).not(":hasEvent(myEvent)").on("myEvent", onMyEvent); 
```

这有效：

```
if (!$._data((object), 'events') || !$._data((object), 'events').myEvent) {
    $(object).on("myEvent", onMyEvent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:02:02.183

1）您在代码中有错字：`$_.data`而不是`$._data`

2）你不能`selector`使用点作为对象属性使用参数`.`这是字符串，如果你想检查对象是否有这样的属性名称，你应该使用括号`obj[selector]`

因此，此表达式的固定代码如下所示：

```
jQuery.expr[':'].hasEvent = $.expr.createPseudo(function( selector, context ) {
    return function(elem) {
        return ($._data(elem, 'events') != undefined && $._data(elem, 'events')[selector] != undefined);
    }
}); 
```

工作 JSFiddle 可[在此处](http://jsfiddle.net/BrPZL/)获得。

# cocoa - 文本字段中重叠的文本

> ID：13528980
> 
> 赞同：1
> 
> 时间：2012-11-23T12:15:37.220
> 
> 标签：cocoa

我在窗口中使用 NSTextField 对象。当我隐藏和取消隐藏窗口时，文本字段中的文本会重叠。以前的文本保留在文本字段中。所以，当我再次输入时，看起来文本字段中的文本没有被清除。

我将字符串设置为

```
[myStringField setStringValue:@""]; 
```

但是，它不起作用。我在下面附上一张快照。我的问题是为什么文本会重叠。

![在此处输入图像描述](../Images/c46f10f8e1786a1eb1f156e7c252e20a.png)

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:47:59.287

最好的方法是创建新的笔尖。处理字段编辑器非常困难。

# jquery - 选择在插件中创建的对象

> ID：13528984
> 
> 赞同：0
> 
> 时间：2012-11-23T12:15:50.817
> 
> 标签：jquery

我正在使用我的插件创建各种对象，然后将更多对象附加到它们，因此当我这样做时，我需要选择那些新对象。

我在这里做了非常简单的jsfiddle：http: [//jsfiddle.net/6zBGj/2/](http://jsfiddle.net/6zBGj/2/)

现在你可以看到我将`item`div 附加到了`$container`，所以当用户点击`item`我想做某事时，我找不到选择它的方法。

请记住，这是一个插件，我不想像这样选择它：`$(".container .item")`我需要分别处理每个单独的对象。

PS不介意凌乱的代码，这只是一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:18:52.980

如果您首先在内存中创建元素，请在其中附加事件处理程序，然后您可以将该变量附加到父级。像这样：

```
var $item = $("<div class='item'></div>").click(function() {
    alert("Foo");
});
$container.append($item); 
```

[**示例小提琴**](http://jsfiddle.net/6zBGj/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:19:07.450

div 尚不存在，因此您无法将侦听器附加到它们。您可以做的是将侦听容器内所有 div 的事件委托给容器本身：

```
$container.on("click", "div", function(){
   $(".event").append("clicked! <br />");
}); 
```

这是一个演示：http: [//jsfiddle.net/6zBGj/4/](http://jsfiddle.net/6zBGj/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T12:19:12.747

如果您知道将添加到容器中的内容，那么您可以这样做 - [http://jsfiddle.net/aYgvm/](http://jsfiddle.net/aYgvm/)

我所做的只是改变：

```
$("div", $container).live("click", function(){
   $(".event").append("clicked! <br />"); 
}); 
```

到：

```
$($container).on('click','div', function(){
   $(".event").append("clicked! <br />"); 
}); 
```

您还应该避免使用`live()`- [Jquery live() vs delegate()](https://stackoverflow.com/questions/4579117/jquery-live-vs-delegate)

# groovy - 为 Groovy @Mixin 寻找不破坏封装的解决方案

> ID：13528985
> 
> 赞同：2
> 
> 时间：2012-11-23T12:15:58.533
> 
> 标签：groovy, metaprogramming, abstract-syntax-tree, mixins

我想在 Groovy 中使用 @Mixin 注释，它完全符合我的要求，除了它还混合了私有方法和字段。

```
class A {
def private fooA() {
        println("A")
    }
}

@Mixin(A)
class B {
    def fooB() {
        println("B")
   }
} 
```

如果我现在运行这段代码

```
static main(args)
{
    def b = new B()
    println(b.fooA())
    B.metaClass.fooA = {throw new MissingMethodException()};
    println(b.fooA())
} 
```

它首先调用私有方法 A.fooA 并打印“A”。然后该私有方法被删除，并且不能被混合在 A 类中的客户端 B 调用。这就是我希望事情从一开始就是这样的方式。

我现在的问题是如何以通用方式实现这一目标？我可以扩展@Mixin 注释。问题是我是 Groovy 的新手，关于如何编写 AST 转换的信息真的不多。新的 Groovy in Action 书中有一整章的内容尚未出版。

我可以改用@Delegate，但是我必须为委托给的类声明一个变量。这不是我想要的。我希望我可以告诉开发人员使用我的东西简单地用@Mixin 注释他的类，以便混合我的东西，就是这样。而且我可以确定我的类的私有方法和字段不能被用户破坏混入的类的内部代码调用。

有没有人暗示我应该朝哪个方向努力？谢谢，奥利弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:14:10.763

我认为您遇到了一些不是 Groovy 重点的内容。对隐藏私人成员的支持通常存在[问题](http://jira.codehaus.org/browse/GROOVY-3010)。

在您的具体情况下，您可能遇到了一个新错误（？）。四处寻找，它看起来像`@Mixin`调用代码的 AST 转换达到`MixinInMetaClass.mixinClassesToMetaClass()`. 这是在努力不将非公共方法复制到目标元类（您的 B 类的元类）；它们没有出现在您的方法列表中`b.metaClass`，所以这似乎是正确的。

`b.fooA()`在您尝试使用不存在的属性或在 b 上调用不存在的方法之前，调用将起作用（以某种方式）。（或打电话`b.metaClass.initialize()`）。然后你会得到投诉失踪`fooA()`。

所以，我不确定我是否会投入太多精力来尝试让访问修饰符与 Groovy 一起工作，但如果你继续走这条路，我认为你可能必须为类编写一些初始化代码才能执行类似你的操作'上面已经完成了，或者`initialize()`像我上面提到的那样打电话或坏财产。您可以尝试将其中一些代码放在您自己的`ASTTransformation`类中，但我没有尝试过。您可以获取[源](http://dist.groovy.codehaus.org/distributions/groovy-src-2.0.5.zip)并查看`org.codehaus.groovy.ast.MixinASTTransformation`.

# java - 如何在 Oracle 中添加图像？

> ID：13528987
> 
> 赞同：-1
> 
> 时间：2012-11-23T12:16:19.063
> 
> 标签：java, database, image

我目前正在开发一个需要图像的应用程序，因此我尝试使用 blob 和 clob 变量在 Oracle 中通过 SQL 查询插入图像，但我无法通过此操作，而且我正在使用 JAVA 技术进行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:01:56.880

这是您的问题的简单解决方案：

```
 FileInputStream fis;
  try {
       // Load JDBC driver "com.mysql.jdbc.Driver"
       Class.forName("oracle.jdbc.driver.OracleDriver");

      /* Create a connection by using getConnection() method that takes
         parameters of string type connection url, user name and password to
         connect to database. */
         String connectionUrl = "your connection url";
         String userName = "connecting database username";
         String password = "corresponding password";
         connection = DriverManager.getConnection(connectionUrl ,userName , password);
         // create a file object for image by specifying full path of image as parameter.
         File image = new File("C:/image.jpg");
         /* prepareStatement() is used for create statement object that is
            used for sending sql statements to the specified database. */
         psmnt = connection.prepareStatement("insert into save_image(name, city, image) values(?,?,?)");
         psmnt.setString(1,"name");
         psmnt.setString(2,"city");
         fis = new FileInputStream(image);
         psmnt.setBinaryStream(3, (InputStream)fis, (int)(image.length()));
         /* executeUpdate() method execute specified sql query. Here this query
            insert data and image from specified address. */
         int s = psmnt.executeUpdate();
         if(s>0) {
                    System.out.println("Uploaded successfully !");
         } else {
                    System.out.println("unsucessfull to upload image.");
         }
   } catch (Exception e){
       //log useful information
   }
   finally{
        if (fis != null) {
        fis.close();
        }
        if(psmnt != null){
           psmnt.close();
        }
        if (connection!= null && !connection.isClosed()) {
           connection.close();
        }
   } 
```

# c++ - c++ 对象持有指针的向量

> ID：13528992
> 
> 赞同：1
> 
> 时间：2012-11-23T12:17:06.343
> 
> 标签：c++, boost, stdvector

```
struct Obj
{
    Obj(P *p, int i): m_p(p), m_info(info) {}
    std::auto_ptr<P> m_p;
    int m_info;
};

std::vector<Obj> objects; // error C2558: struct 'Obj' : no copy constructor available... 
```

`auto_ptr`我猜这里的问题在于。大家都知道推入容器是不好的`auto_ptr`，把持有的人推入容器也是不好的`auto_ptr`。如果我没有`m_info`领域，我会使用`boost::ptr_vector<P> objects`

你会建议如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:38:29.877

您可以自己管理原始指针（在构造函数中分配，在析构函数中释放并实现复制语义 - 符合 RAII）或将指针的类型从 std::auto_ptr 更改为 std::shared_ptr / boost::shared_ptr / 其他.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:20:03.173

我假设您的班级 Obj 应该拥有 p 的所有权。为什么不，只需使用带有 RAII 的普通指针（在 Obj(P *p, int i) 中分配 m_p 并在 ~Obj() 中删除它）？

或者您可以轻松创建一个 ScopedPointer 类，例如[http://www.boost.org/doc/libs/1_36_0/libs/smart_ptr/scoped_ptr.htm](http://www.boost.org/doc/libs/1_36_0/libs/smart_ptr/scoped_ptr.htm)

# sql-server-2008 - 表格向导中的报表生成器 3.0 样式

> ID：13528996
> 
> 赞同：3
> 
> 时间：2012-11-23T12:17:37.277
> 
> 标签：sql-server-2008, report, builder, reportbuilder

在 Report Builder 3 中使用*插入表格向导*时，其中一个步骤是选择一种样式，例如 Corporate、Forest、Generic。

有没有一种方法可以创建自己的样式并将其包含在内，以便在此列表中可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T00:26:24.913

不，不幸的是，没有办法将您自己的设计输入到列表中。我建议您改为使用报告生成器（表/列）创建一个空报告并将其用作模板。然后你可以利用它并用不同的名称保存它。

# ios - 自定义 UI 按钮上的文本对齐

> ID：13528999
> 
> 赞同：0
> 
> 时间：2012-11-23T12:17:48.880
> 
> 标签：ios

我必须制作一个自定义按钮。问题是按钮上的文本没有居中对齐。我制作与框架相同的框架大小的文本标签`UIButton`。并且文本标签的文本对齐方式为居中。

但它并不完全在中心。它在右侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:19:17.020

如果你使用 cocos2d 试试这个：

```
//Take Size of the screen
CGSize winSize = [CCDirector sharedDirector].winSize; 
```

和

```
//puts the label in the center of the screen
label.position = ccp(winSize.width/2,winSize.height/2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:19:23.360

尝试这个

```
label.textAlignment = UITextAlignmentCenter; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:23:13.243

尝试通过以下方式设置 textLabel 的框架：

```
textLabel.frame = CGRectMake(0,0,button.frame.size.width, button.frame.size.height); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:46:04.973

实际上，我必须将标签设置在距中心左侧仅 1,2 像素的位置。

我刚刚用这个解决了我的问题..

[okButton setContentHorizo​​ntalAlignment:UIControlContentHorizo​​ntalAlignmentLeft]; [okButton setContentVerticalAlignment:UIControlContentVerticalAlignmentTop]; [okButton setTitleEdgeInsets:UIEdgeInsetsMake(13.0,27.0, 0.0, 0.0)];