# StackOverflow 问答 13386000-13386999

# opengl - glsl折射被颠倒映射

> ID：13386003
> 
> 赞同：8
> 
> 时间：2012-11-14T19:34:17.553
> 
> 标签：opengl, glsl, shader

我在 glsl 中实现折射。我正在使用碎片着色器中提供的折射功能来获得所需的效果。但是我得到的折射是颠倒的。我认为这是错误的..知道为什么会这样吗？

这就是我在顶点着色器中所做的：

```
vec3 worldView = normalize(vec3(WorldCameraPosition-worldPos));
refractor = refract(-worldView, worldNorm, Eta); // eta = 0.66; 
```

然后我做碎片着色器：

```
vec4 refractColor = textureCube(cubeMap, refractor); 
```

[http://www.cse.ohio-state.edu/~duttas/Images_5542/Capture.PNG http://www.cse.ohio-state.edu/~duttas/Images_5542/Capture.PNG](http://www.cse.ohio-state.edu/~duttas/Images_5542/Capture.PNG)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-14T20:02:10.607

如果你在谈论那些球体上的折射，我很确定你得到的是正确的结果，它应该是颠倒的。由于光线从球面折射的方式，您在球体中看到的图像是反转的：

![https://summerexplorations.files.wordpress.com/2011/07/marbles2.jpg?w=584](../Images/932bcb2bf3781ddf98a6427c3b2325f0.png)

现实世界的例子：

[![http://www.physicscentral.com/explore/pictures/images/crystal-ball_2.jpg](../Images/661fbb11ed10d38e32290cf546285e57.png)](https://i.stack.imgur.com/08gNU.jpg)
[（来源：[physicscentral.com](http://www.physicscentral.com/explore/pictures/images/crystal-ball_2.jpg)）]

# python - Selenium FireFox“此连接不受信任”

> ID：13386004
> 
> 赞同：3
> 
> 时间：2012-11-14T19:34:30.680
> 
> 标签：python, firefox, https, selenium-webdriver

我有一个与使用无效证书通过 https 测试网站有关的问题。你能帮忙吗？我正在登台服务器上测试一个网站。它需要 https 并且它使用了无效的证书，它属于生产服务器。因此，当我访问该网站时，FireFox 会弹出“此连接不受信任页面”。我设法让Firefox跳过页面；但是，如果我不使用 Selenium（Python 绑定）运行它，它将再次显示“不受信任”页面。所以，我做了更多的研究，我发现了这个：

[http://code.google.com/p/selenium/wiki/UntrustedSSLCertificates](http://code.google.com/p/selenium/wiki/UntrustedSSLCertificates) 和端口： [http ://code.google.com/p/selenium/source/detail?r=16168](http://code.google.com/p/selenium/source/detail?r=16168)

但是，它对我不起作用。以下是我尝试过的：

```
ff_profile.set_preference("webdriver_accept_untrusted_certs", True)
ff_profile.set_preference("webdriver_assume_untrusted_issuer", True)
self.driver = webdriver.Firefox(ff_profile) 
```

我正在使用：FireFox 15.0.1 Selenium 2.22

我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-24T13:35:08.093

我将重申[user1411110](https://stackoverflow.com/users/1411110/user1411110)所说的内容，但要进行一次更改，即 False 而不是 'false'。由于字符串值正在制动我的 webdriver Iceweasel 实例。

```
 def setUp(self):
    profile = webdriver.firefox.firefox_profile.FirefoxProfile()
    profile.default_preferences["webdriver_assume_untrusted_issuer"] = False
    profile.update_preferences()
    self.driver = webdriver.Firefox(profile) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T01:06:08.173

```
 def setUp(self):
        profile = webdriver.firefox.firefox_profile.FirefoxProfile()
        profile.default_preferences["webdriver_assume_untrusted_issuer"] = 'false'
        profile.update_preferences()
        self.driver = webdriver.Firefox(profile) 
```

# ajax - 像 Facebook/Google Play 音乐这样的动态网站是如何通过很少的 XHR 请求生成内容的？

> ID：13386010
> 
> 赞同：-1
> 
> 时间：2012-11-14T19:35:08.947
> 
> 标签：ajax, jsonp

我只是在测试 Google Play 音乐，并注意到一个页面上发生了这么多事情，为什么控制台中没有很多 XHR 请求？

当我创建一个 AJAX 站点时，我执行的每个 XHR 请求（通常使用 jQuery 的 $.ajax() 方法）在控制台中清晰可见，正如预期的那样。但在主流网站上，尤其是 Facebook，似乎没有多少可见的 XHR 请求正在进行，而且他们似乎也不会每 10 秒左右对服务器进行一次 ping 操作以检查新的状态更新。 .!

我读过的替代方案是持久连接，并动态地将标签插入页面，这可能会从其他来源提取数据，使其在当前页面中可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:40:55.363

[我从未尝试过这些网站，但在Stack Overflow](https://stackoverflow.com/)上使用的一个常见解决方案是使用[websockets](http://en.wikipedia.org/wiki/WebSocket)。它们可以有效地将信息从服务器推送到客户端，而无需轮询。

# c# - 在层次结构中获取具有特定接口的 UserControl

> ID：13386013
> 
> 赞同：0
> 
> 时间：2012-11-14T19:35:14.383
> 
> 标签：c#, linq

我有一个包含许多控件的 .aspx 页面。

我想递归搜索 Page.Controls 集合。

我自己添加的 UserControl 有一个接口 IUserControl。

使用此扩展方法：

```
public static T FindNodeInHierarchy<T>(this IEnumerable<T> source, Func<T, IEnumerable<T>> childrenSelector, Predicate<T> condition)
        {
            // return default wenn keine Items existieren
            if (source == null || !source.Any()) return default(T);

            // return result wenn item gefunden und hört auf die Liste durchzugehen
            var attempt = source.FirstOrDefault(t => condition(t));
            if (!Equals(attempt, default(T))) return attempt;

            // Ruft die Funktion auf eine Liste auf bis runter in alle Unterlisten bis das
            // entsprechende Objekt gefunden ist.
            return source.SelectMany(childrenSelector).FindNodeInHierarchy(childrenSelector, condition);
        } 
```

当我尝试这样的事情时，我得到了一个异常的记忆：

```
 var query = Page.Controls
                .Cast<Control>()
                .FindNodeInHierarchy<Control>(c => Page.Controls.Cast<Control>(), c => c is IUserControl); 
```

我也尝试过`.OfType<IUserControl>()`

但后来我得到空值返回。

如何使用放置在某处的 IUserControl 接口获取此 UserControl

网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:42:45.923

```
public IEnumerable<TControl> FindControls<TControl>(Control c)
{
    var tc = c as TControl;
    if (tc != null)
        yield return tc;

    foreach (var cc in c.Controls)
    {
        foreach (var res in FindControls<TControl>(cc))
            yield return res;
    }
} 
```

您可以通过传递要搜索的根控件来调用它，例如

```
var myuc = FindControls<IUserControl>(Page); 
```

# c# - 读取所有注册表值的快速方法

> ID：13386017
> 
> 赞同：7
> 
> 时间：2012-11-14T19:35:22.883
> 
> 标签：c#, .net, registry

我正在编写一个实用程序，需要在 HKCR 中创建所有注册表值的列表。我正在使用递归函数执行此操作：

```
var list = new Dictionary<string, string>();
Read(Registry.ClassesRoot, list);

static void Read(RegistryKey root, IDictionary<string, string> values)
{
    foreach (var child in root.GetSubKeyNames())
    {
        using (var childKey = root.OpenSubKey(child))
        {
            Read(childKey, values);
        }
    }            

    foreach (var value in root.GetValueNames())
    {
        values.Add(string.Format("{0}\\{1}", root, value), (root.GetValue(value) ?? "").ToString());
    }
} 
```

这很好用，但需要很长时间（在我的电脑上是 20 秒）。有没有更快的方法来做到这一点，或者这是否尽可能好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:00:18.120

注册表中有很多信息，正如其他人在这里指出的那样 - 速度可能是一个问题。如果您希望在树状视图中显示注册表设置列表以供用户浏览，更好的解决方案可能是先扫描顶级条目，然后在用户浏览树时，扫描那些树节点打开时的子值/设置。

我怀疑这就是微软自己的 regedit 的工作方式。

# iphone - 视图加载时播放声音

> ID：13386022
> 
> 赞同：0
> 
> 时间：2012-11-14T19:35:29.147
> 
> 标签：iphone, ios, xcode, audio

我在以编程方式在 iPhone 上播放声音时遇到问题 - 我不明白 Xcode 文档中关于 AvAudioPlayer 的解释。其他人可以给我一个代码片段，或者更好地向我解释一下吗？

*编辑*我真正想做的是在无限循环中播放声音，从viewdidload开始，在应用程序退出时音乐应该停止（不在后台播放）。这是我正在尝试开发的游戏

实际上我使用的每种方法都返回相同的错误：（日志摘录）

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter' 
```

*编辑结束*

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:54:38.060

这是播放已添加到捆绑包中的短声音的一种非常简单的方法：

```
NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"somesound" ofType:@"aif"];

SystemSoundID soundID;

AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);

AudioServicesPlaySystemSound (soundID); 
```

这是有关[系统声音服务参考的更多文档](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007916)

**编辑**：由于您不想简单地播放短音，这可能会更好：

```
NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"mySound" ofType:@"mp3"];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
player.numberOfLoops = -1; //infinite

[player play]; 
```

有关详细信息，请参阅[AVAudioPlayer 类参考](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:44:07.163

根据您的错误，您的声音文件路径无效（NSURL 为无效路径返回 nil）。

# performance - 用于 JSON 提要的 MongoDB 架构

> ID：13386023
> 
> 赞同：0
> 
> 时间：2012-11-14T19:35:30.933
> 
> 标签：performance, mongodb, schema

寻找有关设置 MongoDB 模式的一些指导。这是场景：

我正在为人们创建一个保存书签功能。在数据库中，我只需要存储用户名、标题和链接。由此，我需要创建一个输出 JSON 并查询特定书签或一个人的整个提要的服务。从实施和性能的角度来看，这两种设置中的哪一种更有意义？

A）每个书签都是它自己的对象：

```
{
    "_id":  ObjectId("abcd1234"),
    "username": "Choy",
    "title": "This is my first link",
    "url":  "http://www.google.com" 
},
{
    "_id":  ObjectId("abcd1234"),
    "username": "Choy",
    "title": "This is my second link",
    "url": "http://www.bing.com"
} 
```

B）每个用户都是自己的对象：

```
{
    "_id": "Choy",
    "bookmarks": {
        "abcd1234": {
            "title": "This is my first link",
            "url": "http://www.google.com"
        },
        "abcd12345": {
            "title": "This is my second link",
            "url": "http://www.bing.com"
        }
    }
} 
```

最初 (A) 对我来说更有意义，因为我可以轻松查询特定书签、更新和删除它。但是从应用程序的角度来看，当我想列出一个人的所有书签时，(B) 会更容易，因为我可以只做 a `findOne(username)`on the`_id`而不必在做 a 之后遍历每条记录`find(username)`并转换为数组和然后是 JSON（我认为这有点占用内存）。

另一方面，添加新书签将是 (B) 中的一个额外步骤，因为我必须获取记录，将新书签推入其中，然后保存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:53:30.437

当您在 MongoDB 中有一个 has-a 关系时，将数据嵌入到拥有它的对象中通常是最好的决定。

您的目标是通过尽可能少的搜索来满足用户的需求，因为每个文档查找都需要时间。当您不需要用户的所有书签而只需要特定的书签时，您始终可以[使用点符号来访问对象](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)并[检索字段的子集](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)。

当您删除或重命名用户时，聚合而不是关系也很有用。MongoDB 不能像 SQL 数据库那样进行自动级联，因此在这种情况下您必须自己处理任何孤立数据。但是当用户文档是独立的时，这不会是一个问题。

因此，我建议您选择解决方案**B)**。

# javascript - 在 Google Analytics 中跟踪 Varnish 命中和未命中？

> ID：13386026
> 
> 赞同：4
> 
> 时间：2012-11-14T19:35:44.253
> 
> 标签：javascript, google-analytics, varnish

我希望通过 Google Analytics 收集有关页面加载速度的数据，并希望将这些数据拆分为已返回的具有 HIT 缓存的页面和未命中缓存的页面。

在研究这个之前，我只是假设我会让 JS 查看页面响应中的清漆标题，并创建一个 GA 自定义 var 来逐页跟踪它。当然，JS 无法访问页眉，所以我目前有点茫然。我已经使服务器端 GA 跟踪工作在过去（通过 php-ga），但这需要与实际页面加载时间相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:09:09.840

只是一个想法，但您可以在“vcl_deliver”子例程中设置一个 cookie。像这样的东西：

```
sub vcl_deliver {
    if (obj.hits > 0) {
            set resp.http.Set-Cookie = "VarnishHit=Yes;Path=/;";
    }
 return (deliver); } 
```

这基本上是说：如果 obj 有多个命中，则设置一个 cookie 来说明。您需要确保您不会覆盖任何其他 cookie，因此如果您正在使用 cookie，则可能只需将其连接到您现有的 Set-Cookie。有关 obj.hits 的更多信息，请查看此处： [https ://www.varnish-cache.org/docs/3.0/reference/vcl.html](https://www.varnish-cache.org/docs/3.0/reference/vcl.html)

这是重要的行：

> obj.hits 对象已交付的大致次数。值 0 表示缓存未命中。此变量在 vcl_deliver 中也可用。

这将使您可以使用 document.cookie 变量从 Javascript 中访问此信息。我相信 jQuery 有一些插件可以让这更容易，这是我在 Google 上找到的一个： [https ://github.com/carhartl/jquery-cookie。](https://github.com/carhartl/jquery-cookie)一旦您可以检查 JS 中是否存在 cookie，您应该能够使用 GA API 来记录事件。我希望这会有所帮助。

# php - 当我尝试连接到 localhost 时获取 Netconnection.Call.Badversion

> ID：13386027
> 
> 赞同：0
> 
> 时间：2012-11-14T19:35:48.420
> 
> 标签：php, actionscript-3, apache-flex, amfphp, netconnection

我试图在本地进行一些测试，当我尝试将我的 AMFPHP 服务器与 Flash 连接时，我发现了一些问题。

这是我连接到服务器的方式：

```
_netConnection.connect("http://localhost/Amfphp"); 
```

这就是我调用 AMFPHP 附带的预定义示例服务的方式：

```
_netConnection.call("ExampleService.returnOneParam", res, 5); 
```

（res 是一个 Responder 对象）

当我尝试它时，我收到一条 Netconnection.Call.Badversion 消息。

我用谷歌搜索了很多，并尝试了不同的建议，但似乎没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:56:27.740

查看此列表：[http ://www.silexlabs.org/amfphp/documentation/troubleshooting-and-debugging-your-project/](http://www.silexlabs.org/amfphp/documentation/troubleshooting-and-debugging-your-project/)

我遇到的最常见的一种情况是，如果您在 php.ini 的结束 ?> 标记之后有额外的字符（甚至是空格或换行符）。

此外，如果您的代码中有错误，并且您的 php 正在打印它，那也会杀死它。

首先尝试在 Flash 之外调用它，以确保一切正常。

# vba - 使用收件箱规则将附件从 Outlook 2010 自动下载到本地或网络文件夹

> ID：13386029
> 
> 赞同：2
> 
> 时间：2012-11-14T19:35:55.660
> 
> 标签：vba, outlook, outlook-2010

我有这段代码，它适用于一台计算机 Outlook 2010 64 位，但不适用于另一台运行 32 位的计算机。我认为这与 32bit/64 没有任何关系，只是想以防万一。

我已经尝试了所有方法，禁用宏，将 Outlook 翻过来，但无法使此代码正常工作。

也许第二只眼睛会发现我缺少的东西：

```
Sub saveAttachtoDisk(itm As Outlook.MailItem)
Dim objAtt As Outlook.Attachment
Dim saveFolder As String
Dim dateFormat
dateFormat = Strings.Format(Now(), "mm_dd_yyyy_HH_MM_SS_AMPM")
saveFolder = "C:\Users\Jarvis\Desktop\Test"
For Each objAtt In itm.Attachments
objAtt.SaveAsFile saveFolder & "\" & "My_Data_" & dateFormat & ".csv"
Set objAtt = Nothing
Next
End Sub 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:26:08.100

[根据我们的聊天](https://chat.stackoverflow.com/rooms/19555/discussion-between-kevin-pope-and-unaverage-guy)，似乎解决方案是：

1.  将 VB 宏项目中的所有内容复制到文本文件中。将文本文件保存到您的驱动器。
2.  关闭一切，重新启动计算机。
3.  转到您的 C:\Documents and settings<yourusernamehere>\Application Data\Microsoft\Outlook 文件夹。
4.  要么删除文件 VBAProject.otm，要么（更好更安全）重命名为 VBAProject.old 或类似的名称。
5.  打开展望
6.  重新打开 VB 宏编辑器
7.  粘贴文本文件中的代码。

[[说明由奥术代码提供]](http://arcanecode.com/2007/01/04/outlook-and-macros-are-disabled-error/)

# c - 带有opengl的简单glfw绘图点什么也不显示

> ID：13386042
> 
> 赞同：1
> 
> 时间：2012-11-14T19:37:05.773
> 
> 标签：c, opengl, gcc, glfw

我可以看到屏幕已被清除为红色，但屏幕中心没有一点，这里是完整的代码：

```
#include "GL/glfw.h"
void render_loop()
{
    glClearColor ( .7, .1, .1, 1.0f );
    glClear ( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
    glViewport(0,0,1024,768);
    glMatrixMode(GL_PROJECTION);
    //gluPerspective( 65.0, (double)1024/(double)768, 1.0, 60.0 );
    glOrtho(0,1024,768,0,100,-100);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glPointSize(10);
    glBegin(GL_POINTS);
    glColor4f(1,1,1,1);
    glVertex3f(512,384,0);
    glEnd();

    glfwSwapBuffers();

}
int main ( int argc, char* argv[] )
{
    //init glfw
    glfwInit();

    glfwOpenWindow ( 1024, 768, 8, 8, 8, 8, 24, 0, GLFW_WINDOW );

    do {
        render_loop();
    } while ( glfwGetWindowParam ( GLFW_OPENED ) );

    glfwTerminate();
} 
```

编译使用：

```
john@Linux:~> gcc --version
gcc (SUSE Linux) 4.7.1 20120723 [gcc-4_7-branch revision 189773]
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

如果我编译它使用`gluPerspective( 65.0, (double)1024/(double)768, 1.0, 60.0 );`仍然相同，屏幕中心没有点，我使用这个 makefile 来编译它：

```
#makefile for example1 on linux

CC=gcc  -std=c99  -Wno-unused-function -Wno-unused-variable

SRC=\
a.c \

OBJS=$(SRC:.c=.o)

NAME=testglpoints

CFLAGS =   -Wall $(INCLUDE) 

LFLAGS =\
-lGL \
-lglut \
-lGLU \
-lGLEW \
-ldl \
-lpthread \
-lm \
-lglfw

all: debug

debug:override CFLAGS = -g3 -O0 -Wall 

debug:$(OBJS)
    $(CC)  $(CFLAGS) $(LFLAGS)   $(SRC)    -o $(NAME) 

clean:
    @rm -f *.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:09:32.287

你需要一个`glLoadIdentity()`before `glOrtho()`。

`glOrtho()`不*设置*当前矩阵，它*乘以*它。`glLoadIdentity()`因此，在调用它之前将当前矩阵设置为已知良好的值（单位矩阵， via ）。

# sql - 限制 CONTAINSTABLE 搜索以避免搜索整个表

> ID：13386046
> 
> 赞同：1
> 
> 时间：2012-11-14T19:37:22.237
> 
> 标签：sql, full-text-search

嗨，我正在使用 CONTAINSTABLE 对表的列进行搜索。问题是性能。这是我的查询：

```
SELECT count(*) 
FROM dbo.Document d
INNER JOIN dbo.DocuemntVehicleXRef vx ON (vx.DocuemntID = d.DocumentID)
INNER JOIN CONTAINSTABLE (Document , QueryContent , @searchterm ) ftt ON ( d.DocumentID = ftt.[Key] )  
WHERE vx.VehicleId = @vehicleId 
```

因此要提高性能（因为 Document 表很大）。我需要执行 CONTAINSTABLE 函数，而不是对所有 dbo.Docuemnt 表，仅对绑定到 VehicleId 的文档（因为其余搜索是不必要的）执行此操作是否有解决方法或方法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:16:02.060

一种方法是创建多个索引视图，每个视图返回文档的子集。每个视图都有自己的 ft 索引，并且您管理查询逻辑以仅从相关视图中进行选择。如果您的表很容易拆分为常用块，例如分层类别结构，则此方法效果很好。

另一种方法是通过附加唯一键来“处理”索引文本。例如，“VEHICLEID001” 那么除了其他关键字外，您还可以搜索“VEHICLEID001”。微软不赞成这种做法是一种反做法，但确实有效。

# ruby-on-rails-3 - Heroku 数据剪辑结果与本地数据库结果不同

> ID：13386047
> 
> 赞同：0
> 
> 时间：2012-11-14T19:37:30.640
> 
> 标签：ruby-on-rails-3, postgresql, heroku

我使用 Heroku 上的数据剪辑功能运行了一个 SQL 查询。效果很好 - 我得到的结果顺序正确，因为我的部分子句指定了“ORDER BY ...”。

我刚刚从 Heroku 中提取了我的数据库的副本。然后我运行 ActiveRecord::Base.connection.execute ""

我得到的数据是正确的，但是 PGResult 对象的数据以完全随机的方式排序——即我的“order by”子句完全被忽略了。

我想知道为什么会发生这种情况，以及是否有任何方法可以防止这种情况发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:18:15.440

我们现在使用与 Heroku 相同版本的 Postgres，我们得到相同的数据集。但是，它仍然没有正确排序。order by 子句仍然不能正常工作，所以我们只是强制使用 rails 进行排序（因为我们将结果限制为 10，所以 Rails 的工作量并不大）。

我发布这个是因为似乎没有人有一个好的答案，而且我们也没有找到任何有效的方法。不妨让其他人知道，出于某种原因，似乎存在问题。去挖掘一下，并可能向 postgresql 人报告一个错误。

# orchardcms - 将 DateTime 字段令牌转换为电子邮件规则中的本地时区

> ID：13386048
> 
> 赞同：2
> 
> 时间：2012-11-14T19:37:33.447
> 
> 标签：orchardcms

在 Orchard 中，我有一个包含 DateTime 字段的自定义内容类型。我创建了一个规则，以便在提交新内容项时发送电子邮件。我可以使用以下令牌在电子邮件中包含 DateTime 字段的值：

```
{Content.Fields.MyContentType.MyDateTimeField} 
```

我遇到的问题是替换令牌的日期/时间值是 UTC，我需要它位于为我的 Orchard 实例配置的时区中。

我看到当前日期/时间有一个标记，如下所示：

```
{Date.Local} 
```

但是 .Local 似乎在 DateTime 字段令牌上无效。

看起来创建一个自定义令牌提供程序来解决这个问题并不难，但在我这样做之前，我想确保我没有错过一个更简单的现有解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:24:44.377

日期标记确实有一个`Local`子标记，但这里的问题是它`{Content.Fields.MyContentType.MyDateTimeField}`不是日期标记，它仍然只是字段。你需要得到它的实际价值。如果您查看`FieldTokens.cs`，您会看到日期字段标记有一个`DateTime`标记。所以`{Content.Fields.MyContentType.MyDateTimeField.DateTime.Local}`应该做我认为的伎俩。

# javascript - jquery indexOf替换

> ID：13386050
> 
> 赞同：0
> 
> 时间：2012-11-14T19:37:37.200
> 
> 标签：javascript, jquery

在这里我有一个隐藏的输入字段

```
<input type="hidden" value="php,php mysql" id="tags"/> 
```

我还有一个普通的输入框，用户可以添加他们的新标签，现在我想检查用户想要添加的新标签是否已经为他添加，如果已经添加，警报（'已经存在'） ;

这是我的代码：

```
var already_added = $('#tags_final').val().toLowerCase();
new_tag = new_tag.toLowerCase();
if (already_added.indexOf(new_tag) < 0){
// add it, everything is OK
}else{
alert('already there');
} 
```

以上对于正常值来说工作得很好，例如现在如果我尝试添加“php”，这将发出警报（“已经存在”），问题是，如果我添加“mysql”，这也会发送警报，因为它在“php mysql”中找到，但“mysql”是另一个标签，需要添加。对此有什么解决方案？

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:43:33.570

我认为您希望将其分解为单独的部分，并对实际标签本身进行全文比较。

```
var tags = $('#tags_final').val().toLowerCase().split(',');
new_tag = new_tag.toLowerCase();

if ($.inArray(new_tag, tags) < 0) {
    // add it
} else {
    alert('already there');
} 
```

 ~~~~```
var tags = $('#tags_final').val().toLowerCase().split(',');
new_tag = new_tag.toLowerCase();

if (tags.indexOf(new_tag) < 0) {
    // add it
} else {
    alert('already there');
} 
```~~  ~~*编辑：感谢@nybbler，使用他评论中链接的jquery inArray 方法会更准确。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:41:34.023

我认为`indexOf`直接在字符串上使用比使用正则表达式或拆分为数组更快（依赖于时更是如此[`$.inArray`](http://api.jquery.com/jQuery.inArray/)）。

只需用逗号包裹你`already_added`的标签字符串，然后在搜索它时对标签执行相同的操作`indexOf`：

```
var already_added = ',' + $('#tags_final').val().toLowerCase() + ',';
new_tag = new_tag.toLowerCase();

if (already_added.indexOf(',' + new_tag + ',') < 0) {
    // add it
} else {
    alert('already there');
} 
```

我从[jQuery 使用的类似技巧中](https://github.com/jquery/jquery/blob/master/src/attributes.js#L88)得到了这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:57:41.583

您可以使用这样的函数在逗号分隔的键字符串中查找键：

```
function contains(keys, key) {
  var i = 0, k = key.length;
  for (var i = 0;(i = keys.indexOf(key, i)) != -1; i += k) {
    if ((i == 0 || keys.charAt(i - 1) == ',') && (i + k == keys.length || keys.charAt(i + k) == ',')) {
      return true;
    }
  }
  return false;
} 
```

演示：http: [//jsfiddle.net/Guffa/UHH9V/](http://jsfiddle.net/Guffa/UHH9V/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T19:41:46.940

保存大括号[php][php mysql]之间的标签并搜索

```
var already_added = $('#tags_final').val().toLowerCase();
new_tag = new_tag.toLowerCase();
if (already_added.indexOf("["+new_tag+"]") < 0){
// add it, everything is OK
}else{
alert('already there');
} 
```~~~~

# redis - redis数据库之间如何切换？

> ID：13386053
> 
> 赞同：78
> 
> 时间：2012-11-14T19:37:44.170
> 
> 标签：redis

我是 redis 的新手，我不知道如何创建和更改到另一个 redis 数据库。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-14T21:39:28.477

默认情况下有 16 个数据库（索引从 0 到 15），您可以使用[select](http://redis.io/commands/select)命令在它们之间导航。可以通过设置在 redis 配置文件中更改数据库的数量`databases`。

默认情况下，它选择数据库`0`。要选择一个指定的，使用 `redis-cli -n 2`(selects db 2)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-01-26T22:29:14.427

*注意：这不是对 OP 问题的直接回答。但是，此文本太长，无法发表评论，我想无论如何我都会分享它，以向 OP 澄清事情。希望我这样做不会破坏太多的 SO 规则......*

***关于多个数据库的一些额外信息：***

请注意，不鼓励在一个 redis 实例中使用多个数据库。

这是一个很好的功能，可以用来玩和了解 redis。

在更严格的设置中，如果您有多个端口可供使用，则最好使用单独的实例并且性能更高。在我们公司，我们在开发/登台服务器上运行大约 50 个实例，在生产服务器上运行大约 5 个。

原因是，无论如何，redis 事务仅在一个 db 编号内是原子的。大多数（如果不是全部）客户端在 connect() 阶段很好地为您分开。如果您必须单独连接，则连接到不同的端口同样容易。

redis的核心也是单线程的。这就是使 redis 如此快速和简单的原因之一。一切都是顺序的。如果您使用多个实例而不是一个实例，您将获得多处理（在多核机器上）的好处。

# mysql - 我的检查约束不起作用

> ID：13386055
> 
> 赞同：0
> 
> 时间：2012-11-14T19:37:54.103
> 
> 标签：mysql, sql, phpmyadmin

我有一个名为问题的表。它有一个列名类型。我想通过只允许他输入六个值来限制用户。当我编写代码时，它说我的查询已成功添加，但它仍然无法正常工作。我仍然可以在我的约束之外添加值。

我的代码已在下面给出。

```
alter table problem
add constraint chk_type check (type in (
    'adhoc', 'mathematics', 'graph_theory', 'data_structure',
    'dynamic_programming', 'computational_geometry'
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-08T05:54:01.680

试试这个：

```
ALTER TABLE passager ADD CONSTRAINT statut_chk CHECK statut in ('Frequent Flyer','Occasionnel','Junior'); 
```

# chef-infra - 如何在没有私钥的情况下使用 Chef Knife？

> ID：13386058
> 
> 赞同：6
> 
> 时间：2012-11-14T19:38:09.053
> 
> 标签：chef-infra, knife

我想从命令行使用 Chef Knife 来完成一些基本的事情，比如创建数据包和食谱。问题是它一直让我失望并抱怨私钥丢失。

> 错误：无法从 /Users/newuser/.chef/newuser.pem 加载您的私钥检查您的配置文件并确保您的私钥是可读的

我知道我需要 Chef 客户端拥有私钥，但我只想单飞。有没有办法让 Knife 正常工作并阻止它抱怨丢失的私钥？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:48:45.777

您可以从服务器复制 webui pem 密钥吗？

Chef 在内部拥有这个和一个厨师验证器客户。webui 用于.ui 以使其成为休息电话我相信是.full admin。

我会强调正常行为将是客户端安装和刀引导，不应该提供太多开销，但我认为 webui 密钥可以工作

Knife.rb 看起来像

```
log_level                :info
log_location             STDOUT
node_name                'chef-webui'
client_key               'c:\chef\DEV\webui.pem'
validation_client_name   'chef-validator'
validation_key           'c:\chef\DEV\validation.pem'
chef_server_url          'http://yourserverhere.com:4000' 
cache_type               'BasicFile'
cache_options( :path => 'C:/chef/checksums' ) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T11:51:51.840

打开您的knife.rb 文件并删除/注释client_key、c​​hef_server_url 和执行时可能需要连接到chef-server 的任何其他行。

# ms-access - 以连续形式显示多对多关系

> ID：13386062
> 
> 赞同：3
> 
> 时间：2012-11-14T19:38:48.630
> 
> 标签：ms-access

我不知道如何以连续形式显示对同一记录具有多个值的列

我有 3 张桌子

```
SalesCall
SalesCallId | etc..

Mill
MillId | name...

SalesCallMills    <------ Junction table 
Id | SalesCallId | MillID 
```

多对多关系的基本设计。

当它是一个简单的表单时，我习惯于做一个列表，并通过一个 SQL 查询来改变当前 ID 的控制源。

以连续形式显示此内容的常见做法是什么？

这是以前的形式，当时只有 1 个磨机是可能的。

![在此处输入图像描述](../Images/98b77fa5957ec8ff36ea835ba15821a2.png)

我以为我可以连接磨坊，但它会很难阅读，而且会很长。

所以我考虑了一个列表，但我认为不可能更改每条记录的控制源。

另外，值得一提的是这是只读的。它不是用于添加或编辑。输入数据的表格已经制作完成。而且我认为每条记录一个工厂不是一种选择，因为它真的会让用户感到困惑。

用我的数据库设计显示多值列的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:55:07.790

这是一个具有相关子表单的表单。

这两个表单通过链接子字段和主字段同步：

```
Link Master Fields: Forms!Form7![SalesCall Subform].Form.SaleID
Link Child Fields: SalesCallId 
```

以及子表单 #1 的当前事件中的一些代码

```
Private Sub Form_Current()
Me.Parent.[SalesCallMills subform].Form.Requery
End Sub 
```

在子表单#1 中选择一行会在子表单#2 中显示相关的详细信息行。

![相关子表格](../Images/98b3cce7f4b32288e7a589c55f9788a6.png)

将诸如工厂名称之类的适当信息添加到总体大纲中应该不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:00:57.960

`<br>`您可以通过将格式设置为富文本，然后将所有工厂放入由标签分隔的同一字段中，从而在文本框中列出工厂。

```
Mill1<br> mill2<br>mill3 
```

注意事项
1\. 这意味着文本框必须足够长。
2\. 您必须在查询中将工厂连接到单个字段中，这可能不可行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T22:27:58.697

在传统意义上的经典中，两个表之间确实没有多对多关系这样的事情，但是通过将相关表一个接一个地拼凑在一起，你最终会得到相同的结果多对多关系，但从技术上讲，这不是两个表之间发生的情况。实际上，您总是在从父表向下工作到子表。那些从连接表的角度思考的人实际上是在思考错误的方式。

如果允许一个人拥有许多最喜欢的颜色，那么将简单地将他们的多种颜色选择与可用颜色联系起来的表称为“连接”表是不合口味的。最好简单地说明我们需要一个名为：

```
My List Of Favorite colors table. 
```

上表可能链接到其他表的事实是没有实际意义的。事实上，它可能有不止一列是外键，然后它就不是一个简单的联结表，但在当天它正在做同样的事情。

无论如何，在 Access 中，您肯定可以显示两个连续表单来显示以这种方式建模的数据。

假设每个周末我们都必须接受人们的大量捐款。这意味着我们有一个主表，其中包含有关此捐赠活动的日期和时间等信息。我们的下一张桌子会有人和他们的捐款金额。之后的下一个表格将是收取捐款金额，并将他们的资金分成不同的账户。这是一个经典的会计分配问题，几乎从 QuickBooks 到任何时候的每个会计软件包都必须实施。事实证明，在使用 access 时，只需很少的代码就可以解决这个经典的分发问题。

对这些类型的表单进行建模的技巧是将多个子表单放置在一个主表单中。

以下表格显示了这一点：

![在此处输入图像描述](../Images/0b41737f2fea043fa80d3d436496f5cc.png)

如果您查看顶部，则有一条主记录，其中包含有关此批次运行以及日期和时间的信息。现在，左边是很多人和捐款金额。右边是一个人的捐款分成许多不同的账户。所以我要显示很多人，我还要显示捐赠可能被分配到的许多帐户。

请记住，访问不允许您将连续子表单放置在连续子表单内。但是，您当然可以将两个连续的表单并排放置，如上面的屏幕截图所示，以模拟您想要的相同效果。

令人惊讶的是，上面提到的管理整个事情的代码很少。

对于左侧连续表单，由于链接主子设置设置为主表单记录，因此该表单无需代码即可填充数据。但是，对于右侧连续表单跟随并在左侧连续表单中显示每个人的正确会计数据，访问不会自动为您执行此操作。但是，左侧表单的当前事件中的一小段代码将强制访问唤醒并注意右侧继续表单必须重新填充以显示该特定人的捐赠帐户。

放置在左侧 on-current 事件中的一行代码将解决此问题：

```
me.Parent.Child2.Requery 
```

我使用的右侧连续表单上的链接主/子设置：

linkChildFields main_id（该子表单中用于关联回父表的字段名称） LinkMasterFields [MasterFormLeftSide].[form].[ID]（“masterFormleft”是您控制的子表单的名称用于保持左侧的连续形式）。

因此，您将需要一点点代码，但不需要大量代码，并且您现在拥有一个显示与许多信息相关的许多信息的屏幕。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T20:27:29.010

连接表将是您选择的主要支柱，您将把其他表挂在上面。

您可以使用查询编辑器直观地查看它，但 SQL 语句如下所示：

```
SELECT *
FROM (SalesCallMills 
        INNER JOIN SalesCall
        ON SalesCallMills.ID=SalesCall.SalesCallID) 
     INNER JOIN Mill
     ON SalesCallMills.ID=Mill.MillID; 
```

（Access 喜欢多表连接周围的括号，因此虽然它们对于纯 SQL 语句不是必需的，但如果没有它们，Access 将无法正常工作）

要在一行中查看每个 SalesCall 的所有 Mills，您必须将简单查询抛在后面，并编写自己的 (vba) 函数

[http://allenbrowne.com/func-concat.html](http://allenbrowne.com/func-concat.html)有一个示例，代码允许您将当前表单上的*Mills字段设置为类似*`=ConcatRelated("name", "Mill", "MillID= " & SalesCallMills.ID)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-16T21:33:38.060

我非常不同意*“那些从连接表的角度思考的人实际上是在思考错误的方式”。*在[@Albert D. Kallal 的回答](https://stackoverflow.com/a/13388478/1744774)中。

确实，m:n 关系不能直接在关系数据库中实现。这就是为什么一个也是唯一一个理智的设计：

```
+----------+           +---------+
| Patients |--- m:n ---| Doctors |
+----------+           +---------+ 
```

... 是：

```
+----------+           +-----------------+           +---------+
| Patients |--- 1:n ---| PatientsDoctors |--- n:1 ---| Doctors |
+----------+           +-----------------+           +---------+ 
```

其他一切都可能以一种或另一种方式工作，但这是穷人的关系数据库设计。并且在模型设计上做出妥协，在项目的一开始，更糟的情况很可能还没有到来。

# java - 如何根据环境在 web.xml 中设置值

> ID：13386063
> 
> 赞同：2
> 
> 时间：2012-11-14T19:38:49.283
> 
> 标签：java, spring-mvc, tomcat7, spring-3

我正在使用 sprint 3.1 配置文件并在我的 web.xml 中有以下代码

```
<context-param>
    <param-name>spring.profiles.active</param-name>
    <param-value>dev</param-value> 
</context-param> 
```

为了部署到测试环境，我的工作流程目前需要我将属性值更改为`test`，然后制作一个 jar 并部署它。但是，我想与显式进行此更改脱钩。

我希望工作流只是构建战争并将其部署到测试。测试环境应该有一些变量将变量设置`spring.profiles.active`为`test`.

**问题**

如何`spring.profiles.active`在 tomcat7 中设置变量 , 并配置它，`web.xml`以便它从服务器配置中读取变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:41:58.467

在 Tomcat 中使用 Environment 标签。然后在您的代码中，使用 Context 的查找方法。

编辑：一个例子（见问题）： [Read a Environment Variable in Java with Websphere](https://stackoverflow.com/questions/6979958/read-a-environment-variable-in-java-with-websphere)

# c++ - 以 O(1) 表示法查找数字列表的平均值 - 常数时间

> ID：13386064
> 
> 赞同：1
> 
> 时间：2012-11-14T19:38:50.643
> 
> 标签：c++, algorithm, visual-c++, numbers, average

事情是这样的，我的任务是创建一个包含一些数字的数组，之后该数组可以在任何位置接受任何其他相同类型的数字。当我得到最终的数组（带有添加的数字）时，我需要以恒定的 O(1) 时间找到内部数字的平均值。我怎么做？！这是我的例子

元素：5 12 7 9 31 平均：12.8

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-14T19:41:23.443

如果这是一个数组类，您可以在添加和更新所有数字时跟踪它们的总和。然后当所有更新完成时，只需将总和除以元素数即可得到平均值，并且由于总和是预先计算的，因此平均值的计算将是 O(1)。

如果这是一个简单传递的原始内存数组，那么计算平均值将需要对所有数字求和，这是一个 O(N)，除非有人正在玩关于操作是什么的语义游戏。

# android - 我的数据库文件在哪里创建

> ID：13386066
> 
> 赞同：0
> 
> 时间：2012-11-14T19:38:55.513
> 
> 标签：android, sqlite, ormlite

这是我的文件dataSqliteHelper，当我第一次运行时，会创建数据文件，但我不知道在哪里获取它并使用工具打开它并查看文件。

```
public class DataSQLiteHelper extends OrmLiteSqliteOpenHelper {
public static final String DATABASE_NAME = "ventasdb.db";

private static final int DATABASE_VERSION = 1;
private Context mContext;

private Dao<Customer, Integer> customerDao;

public DataSQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db, ConnectionSource conections) {
    try {

        TableUtils.createTable(connectionSource, Customer.class);

    } catch (Exception e) {
        Log.e(DataSQLiteHelper.class.getName(), "Can't create database", e);
        throw new RuntimeException(e);
    }

}

@Override
public void onUpgrade(SQLiteDatabase db, ConnectionSource connectionSource,
        int oldVersion, int newVersion) {
    try {
        TableUtils.dropTable(connectionSource, Customer.class, true);

    } catch (SQLException e) {
        throw new RuntimeException(e);
    } catch (java.sql.SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

/**
 * Returns the Database Access Object (DAO) for our UserData class. It will
 * create it or just give the cached value.
 */
public Dao<Customer, Integer> getCustomerDao() {
    if (customerDao == null) {
        try {
            customerDao = getDao(Customer.class);
        } catch (java.sql.SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    return customerDao;
}

public boolean updateCustomer(Customer p) {
    boolean ret = false;
    if (customerDao != null) {
        try {

            customerDao = getDao(Customer.class);

            UpdateBuilder<Customer, Integer> updateBuilder = customerDao
                    .updateBuilder();
            updateBuilder.updateColumnValue("name", "PIRIPIPI"); // p.getName());
            updateBuilder.updateColumnValue("cel", p.getCel());
            updateBuilder.updateColumnValue("email", p.getEmail());
            updateBuilder.updateColumnValue("address", p.getAddress());
            updateBuilder.updateColumnValue("City", p.getCity());

            // but only update the rows where the description is some value
            updateBuilder.where().eq("customerID", 0);
            // actually perform the update

            customerDao.update(p);
            customerDao.refresh(p);

        } catch (Exception e) {
            ret = false;
            e.printStackTrace();
        }
    }
    return ret;
}

/**
 * Close the database connections and clear any cached DAOs.
 */
@Override
public void close() {
    super.close();

}

   } 
```

通过这一行，我知道我给出了文件名

```
super(context, DATABASE_NAME, null, DATABASE_VERSION); 
```

但它在设备的存储中在哪里？

**顺便问一下，我可以更改将文件存储在 sd 卡中的路径吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:41:01.417

它将存储在

```
/data/data/[package name]/databases 
```

但除非您的手机已植根，否则您无法使用文件资源管理器或 adb shell 浏览它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:22:50.237

它保存在这里（如nandeesh所说） `/data/data/[package name]/databases`

如果它是根，您只能在手机上访问它。或者您可以在模拟器上安装应用程序，启动 DDMS 工具并在那里查看数据库文件。

# r - 基于公共列名在 R 中连接两个数据框

> ID：13386068
> 
> 赞同：1
> 
> 时间：2012-11-14T19:39:03.873
> 
> 标签：r, dataframe

我有两个这样的数据框：

输入（x）

```
structure(list(ICTO = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L), .Label = "ICTO-6335", class = "factor"), Application = structure(c(5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L), .Label = c("AUS-PSOFT", 
"DBA-GL-ORA-PRD", "JPN-PSOFT", "LDN-PSOFT", "LNBCV_GL", "NYBCV_GL", 
"NYK-PSOFT", "SGBCV_GL", "SNG-PSOFT", "02-PEOPLESOFT", "11-SLR-PROC", 
"AP-CIT-BATCH-STATUS", "FCIT-GARS", "GBL-EXPENSE", "GLAD", "HRDMART-MAINT", 
"MISC-PSOFT", "NYK-LATE", "NYK-WKND", "REP_PSOFT"), class = "factor"), 
    Group = structure(c(58L, 58L, 58L, 58L, 58L, 58L, 58L, 58L, 
    58L, 58L), .Label = c("AUS-AP", "AUS-CHF", "AUS-CHK", "AUS-DATE", 
    "AUS-DE", "AUS-DST", "AUS-ESS", "AUS-GL", "AUS-GLI", "AUS-GLR", 
    "AUS-LATE", "AUS-SL", "AUS-SLI", "AUS-SLR", "AUS-SM", "AUS-SMR", 
    "JPN-AM", "JPN-AP", "JPN-CHF", "JPN-CHK", "JPN-DE", "JPN-GL", 
    "JPN-GLI", "JPN-GLR", "JPN-SL", "JPN-SLI", "JPN-SLR", "LDN-AP", 
    "LDN-CHF", "LDN-ESS", "LDN-GBM", "LDN-GL", "LDN-GL-BUD", 
    "LDN-GL-CPM", "LDN-GL-CPM-FULL", "LDN-GL-EIT", "LDN-GL-ITR", 
    "LDN-GLR", "LDN-PSOFT", "LDN-SMR", "NYK-AM", "NYK-AP", "NYK-BO", 
    "NYK-BRANCH", "NYK-CHF", "NYK-ESS", "NYK-GBM", "NYK-GL", 
    "NYK-GL-BUD", "NYK-GL-BUD-HC", "NYK-GL-FOR", "NYK-GLR", "NYK-SM", 
    "NYK-SMR", "PDCGL06", "PDCGL30", "PNYPSGL1", "RFCS", "SGP-GLR", 
    "SNG-AM", "SNG-AP", "SNG-BOK", "SNG-CHF", "SNG-CHK", "SNG-DE", 
    "SNG-GBM", "SNG-GL", "SNG-GL-BUD", "SNG-GLI", "SNG-GLR", 
    "SNG-MAS", "SNG-SHB", "SNG-SL", "SNG-SLI", "SNG-SLR", "SNG-SM", 
    "SNG-SMR", "TIS", "LNBCV", "NYBCV", "NYK-WKND-MAINT", "RECYCLE_APPSERV", 
    "RECYCLE_WEBSERV", "SGBCV", "02-REP-PEOPLESOFT", "11-001-HOUSEKEEP", 
    "11-001-RCL-CHK", "11-SLR-PROC-AU", "11-SLR-PROC-HK", "11-SLR-PROC-IN", 
    "11-SLR-PROC-INT", "11-SLR-PROC-JL", "11-SLR-PROC-KR", "11-SLR-PROC-SG", 
    "11-SLR-REG-RPT", "AUS", "BREAK-GLASS", "CLOAKWARE", "CONV", 
    "EMAIL-ALERT-MONITOR", "FCIT-GLI-GARS", "GLAD-AUS", "GLAD-LON", 
    "GLAD-NYK", "HKG", "HRDMART-MON", "JPN", "LDN", "LedgerLastFeed", 
    "LON_PEOPLESOFT", "NYK", "NYK-LATE", "RECYCLE_PRCSSKED", 
    "SGP", "SGS60A-080", "SPD", "SYNCH-PROD-DR"), class = "factor"), 
    JobName = c("EXBCV06D", "EXBCV06D", "EXBCV06D", "EXBCV06D", 
    "EXBCV06D", "EXBCV06D", "EXBCV06D", "EXBCV06D", "EXBCV06D", 
    "EXBCV06D"), Date = c(120820L, 120817L, 120816L, 120815L, 
    120814L, 120813L, 120810L, 120809L, 120808L, 120807L), Status = structure(c(2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("Ended Not OK", 
    "Ended OK", "Executing", "Wait Condition", "Wait Resource"
    ), class = "factor"), StartTime = c(20120821015845, 20120819024725, 
    20120817010722, 20120816010512, 20120815013233, 20120814005343, 
    20120811004005, 20120810004613, 20120809012701, 20120808005116
    ), EndTime = c(20120821015854, 20120819024734, 20120817010733, 
    20120816010521, 20120815013242, 20120814005354, 20120811004015, 
    20120810004623, 20120809012710, 20120808005126), ElapseSecond = c(9L, 
    9L, 11L, 9L, 9L, 11L, 10L, 10L, 9L, 10L)), .Names = c("ICTO", 
"Application", "Group", "JobName", "Date", "Status", "StartTime", 
"EndTime", "ElapseSecond"), row.names = 2689:2698, class = "data.frame") 
```

输入（y）

```
structure(list(JobName = c("XAPSJCDC0D", "XHPSJCD0HD", "XSPSJCD03D", 
"EXBCV06D", "EXESS120D", "EXGL008D", "EXGL027D", "EXGL028D", 
"EXGL035D", "EXGL042S"), EntryDesc = structure(c(59L, 60L, 61L, 
64L, 53L, 71L, 37L, 70L, 35L, 41L), .Label = c("AFINA FEED", 
"Arrival of All Australia Feeds", "Arrival of All Japan Feeds", 
"Arrival of All Singapore Feeds", "Arrival of Endur Feed", "Basel II Balance Sheet Extract - Pacific", 
"Billing Manager Feed", "BOK Reg Reports Availability", "CD GL Balance Extract J11 AYE to CARAT", 
"CD GL Balance Extract SGP to CARAT", "CD Taiwan GL Extract to SYSTEX", 
"CIF Affiliate Feed", "End of Endur Feed Processing", "End of Spectal BDLite Feed Processing", 
"FTP Carat LCYBS Daily Extract", "FX Shredder Currency upload", 
"GFX FXOps Interface", "GL Balance Extract A48 to CARAT", "GLOBAL MONEY MARKET FEED", 
"Glosub interface", "GMI Feed Load", "Inspire Journal Feed", 
"Intellimatch Feed Sent", "Intellimatch Feed Sent - Australia", 
"Intellimatch Feed Sent - Japan", "Intellimatch Feed Sent - Singapore", 
"Ledger Available - Australia", "Ledger Available - HK/KR/SG", 
"Ledger Available - Japan", "Load GERS Feed", "LOAD GERS FEED", 
"Load of the VATSET Feed file to staging", "Loan IQ feed", "MAS MERP Reports Availability", 
"MONTHLY SUMMARISED JOURNAL FEED", "MyHR feed for HRMS and HR4U (prev. Headcount feed)", 
"NTPA-LOAD TO STAGING USD CCY", "NY NTPA Journal Feed", "OLD WORLD 80 ps_tipsj", 
"OLD WORLD 80 ps_tipzs", "OPC IT - Arrival of GMI Feed", "Opera Exchange Rate Extract - AUS", 
"Opera Exchange Rate Extract - SNG", "PCIT - Arrival of Spectral Feed", 
"Peoplesoft - Basel II Balance Sheet Extract - NY", "Peoplesoft - BDLite Extract", 
"Peoplesoft - End of GMI Feed Processing", "Peoplesoft - End of NTPA GLI Feed Processing", 
"Peoplesoft - FSR fcdb transactions delivered", "Peoplesoft - FSR fclonae delivered", 
"Peoplesoft - FSR gmmbal delivered", "Peoplesoft - FTP Phase II Completion", 
"PeopleSoft - FTP Phase II Completion", "Peoplesoft - FX Rates feed to Opera", 
"Peoplesoft - GL Extract feed for Hong Kong to CARAT", "Peoplesoft - GL Extract feed for India to CARAT", 
"Peoplesoft - GL Extract for Korea Branch to CARAT", "Peoplesoft - NYK Alt YE Close", 
"Poets-GLI Feed to Peoplesoft For AUS", "Poets-GLI Feed to Peoplesoft For HKG", 
"Poets-GLI Feed to Peoplesoft For SNG", "PROCESS INPUT FEED FROM FEPS GE", 
"Project Accounting upload", "Reporting Server Available", "Run application engine to process Endur feed.", 
"SL Period Balance Extract for T15 FTP", "SL YTD Balance Extract for T14 FTP", 
"SL YTD Balance Extract for T15 FTP", "SPECTRAL Feeds", "SPHERE FEED UPLOAD", 
"SUMMIT LOAD TO STAGING", "TPW Sub-ledger extract ftp to CARAT", 
"Peoplesoft - BDLite Extract ", "Peoplesoft - End of GMI Feed Processing "
), class = "factor"), SLAType = structure(c(3L, 3L, 3L, 1L, 3L, 
3L, 3L, 3L, 3L, 2L), .Label = c("DDA", "Milestone", "OLA"), class = "factor"), 
    EntryType = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L), .Label = "Automated", class = "factor"), Active = structure(c(1L, 
    2L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("OK", "ON"
    ), class = "factor"), LastRun = structure(c(1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L), .Label = c("2012/08/01", "2012/09/06", 
    " 2012/10/08", " 2012/10/10", " 2012/10/12", " 2012/10/15"
    ), class = "factor"), DataCenter = structure(c(2L, 2L, 2L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("PNYSHCTM07", "PSGSHCTM03"
    ), class = "factor"), ProviderReg = structure(c(2L, 2L, 2L, 
    1L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("Americas IT View", 
    "Asia Pacific IT View", "EMEA IT View"), class = "factor"), 
    ProviderDiv = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L), .Label = c("RF&CS IT", "BO IT"), class = "factor"), 
    ProviderSubDiv = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 1L), .Label = c("CFO IT - Product Control (KGK)", 
    "CFO IT – Financial Accounting (KGX)", "CFO IT - Financial Reporting [KGFX]", 
    "CFO IT ? Financial Accounting (KGX)"), class = "factor"), 
    ReceiverReg = structure(c(2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 
    3L, 3L), .Label = c("Americas Business View", "Asia Pacific Business View", 
    "EMEA Business View"), class = "factor"), ReceiverDiv = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("Finance", 
    "Back Office"), class = "factor"), ReceiverSubDiv = structure(c(2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L), .Label = c("CFO IT – Financial Accounting (KGX)", 
    "Financial Accounting", "Product Control", "CFO - Financial Reporting", 
    "CFO IT ? Financial Accounting (KGX)"), class = "factor"), 
    Service = structure(c(1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 
    3L), .Label = c("Accounting Reporting", "Ledger Processing", 
    "Product Control", "Regional Financial Accounting"), class = "factor"), 
    ICTO = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L
    ), .Label = "ICTO-6335", class = "factor"), SLAHour = c(4, 
    4, 4, 8.3, 7.3, 3, 3, 3, 4, 4), TargetDate = c(-1L, -1L, 
    -1L, -1L, -1L, -1L, -1L, -1L, -1L, -1L)), .Names = c("JobName", 
"EntryDesc", "SLAType", "EntryType", "Active", "LastRun", "DataCenter", 
"ProviderReg", "ProviderDiv", "ProviderSubDiv", "ReceiverReg", 
"ReceiverDiv", "ReceiverSubDiv", "Service", "ICTO", "SLAHour", 
"TargetDate"), row.names = c(NA, 10L), class = "data.frame") 
```

我正在这样做：

```
 xx<-merge(x, y, all.x=TRUE) 
```

例如，输出如下所示：

```
head(subset(xx, JobName=="EXBCV06D"),10)
       JobName      ICTO Application Group   Date   Status    StartTime      EndTime ElapseSecond                  EntryDesc SLAType SLAHour TargetDate
35076 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120417 Ended OK 2.012042e+13 2.012042e+13            9 Reporting Server Available     DDA     8.3         -1
35077 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120417 Ended OK 2.012042e+13 2.012042e+13            9 Reporting Server Available     DDA     8.3         -1
35078 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120417 Ended OK 2.012042e+13 2.012042e+13            9 Reporting Server Available     DDA     8.3         -1
35079 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120417 Ended OK 2.012042e+13 2.012042e+13            9 Reporting Server Available     DDA     8.3         -1
35080 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120419 Ended OK 2.012042e+13 2.012042e+13            9 Reporting Server Available     DDA     8.3         -1
35081 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120419 Ended OK 2.012042e+13 2.012042e+13            9 Reporting Server Available     DDA     8.3         -1
35082 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120419 Ended OK 2.012042e+13 2.012042e+13            9 Reporting Server Available     DDA     8.3         -1
35083 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120419 Ended OK 2.012042e+13 2.012042e+13            9 Reporting Server Available     DDA     8.3         -1
35084 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120412 Ended OK 2.012041e+13 2.012041e+13            9 Reporting Server Available     DDA     8.3         -1
35085 EXBCV06D ICTO-6335    LNBCV_GL  RFCS 120412 Ended OK 2.012041e+13 2.012041e+13            9 Reporting Server Available     DDA     8.3         -1 
```

我在同一日期看到相同的 JobName 4 次：

```
JobName  Date   
EXBCV06D 120417 
EXBCV06D 120417 
EXBCV06D 120417 
EXBCV06D 120417 
```

JobName 和 Date 应该只有一行。例如，应该只有

```
EXBCV06D 120417 
```

不是这四个。

应该只有这是正确的方法吗？看起来我在同一个日期获得了多个 JobName。我需要为每个日期有一个 JobName。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:39:42.727

使用合并：

```
xy <- merge(x, y, by='JobName') 
```

但是，这种合并会给您带来意想不到的结果，因为`JobName`所有`x`数据中只有一个唯一的。所以你会松开`y`. 如果你想保留它们，你可以添加`all.y=TRUE`，但是你会有很多行带有`NA`日期。

我建议`?merge`仔细阅读并创建一个小的示例数据集。数据集应该重现您看到的“问题”，并且您还应该提供预期的输出。在不知道的情况下......很难提供更多帮助。

# python - 如何以人类可读的形式显示数百万秒（年、月、日、小时、分钟）

> ID：13386073
> 
> 赞同：0
> 
> 时间：2012-11-14T19:40:00.357
> 
> 标签：python, time

我有数百万秒的总和。我想以人类可读的形式显示该金额。就像我有 5 000 000 秒一样，这说明了`X years, Y months, Z days, V hours W minutes`什么？

我可以手动计算它，但我希望有一个更漂亮的、内置的 pythonic 日期时间库方法，我找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:25:53.457

好吧，至少如果您只是在谈论数百万秒， datetime.timedelta 至少可以让您到达那里：

```
import datetime
print datetime.timedelta(seconds=5000000)

57 days, 20:53:20 
```

但正如其他人所指出的，您希望一个月有多大？如果没有时间框架，开始/结束计数，任何超出数天或数周的故障都是没有意义的。

# linux - 使用 sed 或 awk 重复提取两个字符串之间的文本？

> ID：13386080
> 
> 赞同：7
> 
> 时间：2012-11-14T19:40:40.370
> 
> 标签：linux, sed, awk, grep, text-processing

我有一个名为“plainlinks”的文件，如下所示：

```
13080\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-94092-2012.gz
13081\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-94094-2012.gz
13082\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-94096-2012.gz
13083\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-94097-2012.gz
13084\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-94098-2012.gz
13085\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-94644-2012.gz
13086\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-94645-2012.gz
13087\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-94995-2012.gz
13088\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-94996-2012.gz
13089\. ftp://ftp3.ncdc.noaa.gov/pub/data/noaa/999999-96404-2012.gz 
```

我需要生成如下所示的输出：

```
999999-94092
999999-94094
999999-94096
999999-94097
999999-94098
999999-94644
999999-94645
999999-94995
999999-94996
999999-96404 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T19:44:41.193

使用`sed`：

```
sed -E 's/.*\/(.*)-.*/\1/' plainlinks 
```

输出：

```
999999-94092
999999-94094
999999-94096
999999-94097
999999-94098
999999-94644
999999-94645
999999-94995
999999-94996
999999-96404 
```

要保存对文件的更改，请使用以下`-i`选项：

```
sed -Ei 's/.*\/(.*)-.*/\1/' plainlinks 
```

或者保存到一个新文件然后重定向：

```
sed -E 's/.*\/(.*)-.*/\1/' plainlinks > newfile.txt 
```

解释：

```
s/    # subsitution
.*    # match anything
\/    # upto the last forward-slash (escaped to not confused a sed)
(.*)  # anything after the last forward-slash (captured in brackets)
-     # upto a hypen
.*    # anything else left on line
/     # end match; start replace 
\1    # the value captured in the first (only) set of brackets
/     # end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T20:02:13.320

只是为了好玩。

`awk -F\/ '{print substr($7,0,12)}' plainlinks`

或与`grep`

`grep -Eo '[0-9]{6}-[0-9]{5}' plainlinks`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T19:46:26.610

假设格式与您所描述的保持一致，您可以使用`awk`：

```
awk 'BEGIN{FS="[/-]"; OFS="-"} {print $7, $8}' plainlinks > output_file 
```

输出：

```
999999-94092
999999-94094
999999-94096
999999-94097
999999-94098
999999-94644
999999-94645
999999-94995
999999-94996
999999-96404 
```

**说明**：

*   `awk`一次读取一行输入文件，将每一行分成“字段”
*   `'BEGIN{FS="[/-]"; OFS="-"}`指定在输入行上使用的分隔符应该是`/`或`-`，它还指定输出应该由`-`
*   `{print $7, $8}'`告诉 awk 打印每行的第 7 和第 8 字段，在这种情况下`999999`，`9xxxx`
*   `plainlinks`是输入文件的名称所在的位置
*   `> output_file`将输出重定向到一个名为`output_file`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-14T19:54:26.940

只需使用 shell 的参数扩展：

```
while IFS= read -r line; do
    tmp=${line##*noaa/}
    echo ${tmp%-????.gz}
done < plainlinks 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T01:36:47.047

如果格式保持不变，则不需要 sed 或 awk：

```
cat your_file | cut -d "/" -f 7- | cut -d "-" -f 1,2 
```

# php - filemtime“警告统计失败”

> ID：13386082
> 
> 赞同：35
> 
> 时间：2012-11-14T19:40:50.767
> 
> 标签：php, regex, filemtime

我已经阅读了很多关于它的问题和答案，但我仍然无法解决我的问题......

我正在尝试创建一个函数来删除一天前创建的所有扩展名为“xml”或“xsl”的文件。但是我在我拥有的每个文件上都收到了这个警告：

> 警告：filemtime() [function.filemtime]: stat failed for post_1003463425.xml in /home/u188867248/public_html/ampc/library.php 在第 44 行

该目录下所有文件的结构名称为“post_ + randomNum + .xml”（例如：post_1003463425.xml 或 post_1456463425.xsl）。所以我认为这不是一个编码问题（就像我在其他问题中看到的那样）。

我的函数代码是这样的：

```
 function deleteOldFiles(){
    if ($handle = opendir('./xml')) {
        while (false !== ($file = readdir($handle))) { 

            if(preg_match("/^.*\.(xml|xsl)$/i", $file)){

                $filelastmodified = filemtime($file);

                if ( (time()-$filelastmodified ) > 24*3600){
                    unlink($file);
                }
            }
        }
        closedir($handle); 
    }
} 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-14T19:59:27.953

我认为问题是文件的真实路径。例如，您的脚本正在处理“./”，您的文件位于“./xml”目录中。因此，在获取 filemtime 或取消链接之前，最好检查文件是否存在：

```
 function deleteOldFiles(){
    if ($handle = opendir('./xml')) {
        while (false !== ($file = readdir($handle))) { 

            if(preg_match("/^.*\.(xml|xsl)$/i", $file)){
              $fpath = 'xml/'.$file;
              if (file_exists($fpath)) {
                $filelastmodified = filemtime($fpath);

                if ( (time() - $filelastmodified ) > 24*3600){
                    unlink($fpath);
                }
              }
            }
        }
        closedir($handle); 
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-21T12:55:18.223

对我来说，所涉及的文件名附加了一个查询字符串，这个函数不喜欢。

```
$path = 'path/to/my/file.js?v=2' 
```

解决方案是先将其砍掉：

```
$path = preg_replace('/\?v=[\d]+$/', '', $path);
$fileTime = filemtime($path); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-25T11:49:14.530

就我而言，它与路径或文件名无关。如果 filemtime()、fileatime() 或 filectime() 不起作用，请尝试 stat()。

```
$filedate = date_create(date("Y-m-d", filectime($file))); 
```

变成

```
$stat = stat($directory.$file);
$filedate = date_create(date("Y-m-d", $stat['ctime'])); 
```

这对我有用。

按天数删除文件的完整代码段：

```
$directory = $_SERVER['DOCUMENT_ROOT'].'/directory/';
$files = array_slice(scandir($directory), 2);
foreach($files as $file)
{
    $extension      = substr($file, -3, 3); 
    if ($extension == 'jpg') // in case you only want specific files deleted
    {
        $stat = stat($directory.$file);
        $filedate = date_create(date("Y-m-d", $stat['ctime']));
        $today = date_create(date("Y-m-d"));
        $days = date_diff($filedate, $today, true);
        if ($days->days > 1) 
        { 
            unlink($directory.$file);
        }
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T19:47:52.707

对于喜欢短代码的人来说，更短的版本：

```
// usage: deleteOldFiles("./xml", "xml,xsl", 24 * 3600)

function deleteOldFiles($dir, $patterns = "*", int $timeout = 3600) {

    // $dir is directory, $patterns is file types e.g. "txt,xls", $timeout is max age

    foreach (glob($dir."/*"."{{$patterns}}",GLOB_BRACE) as $f) { 

        if (is_writable($f) && filemtime($f) < (time() - $timeout))
            unlink($f);

    }

} 
```

# objective-c - 键值编码的意义何在？

> ID：13386083
> 
> 赞同：16
> 
> 时间：2012-11-14T19:40:51.667
> 
> 标签：objective-c

自 Objective-C 2.0 以来，我们已经拥有`@properties`并自动生成访问器方法。那么今天，键值编码的意义何在？什么情况下最好写

```
[myObject setValue:foo forKey:@"bar"]; 
```

而不是写

```
[myObject setBar:foo]; 
```

甚至

```
myObject.bar = foo; 
```

我不断看到使用 KVC 的文章和文档，但总是以某种方式似乎简单地使用属性会更好。那么我为什么要使用 KVC？感谢您的任何见解。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-14T19:58:12.040

`[myObject setValue:foo forKey:@"bar"]`用文字写出来几乎永远不会更可取`@"bar"`。当我们直到运行时才知道要访问哪个属性时，我们通常使用 KVC 来访问一个属性。

一个例子是 xib 中的插座。当您将文本字段的委托出口连接到 xib 中的文件所有者时，xib 将连接记录为具有三个字段的对象：

*   对文本字段的引用（具有插座的对象）
*   对文件所有者占位符的引用（连接的目标）
*   出口的名称作为字符串，`@"delegate"`

在运行时，xib 加载器（UIKit 框架的一部分）反序列化文本字段。然后它反序列化连接对象并使用它来建立您在 xib 中连接的连接。xib 加载器必须设置文本字段的属性（`delegate`属性），但它不知道哪个属性，直到它在运行时加载 xib，在您的应用程序和 UIKit 框架都被编译很久之后。

另一个直到运行时才知道要访问哪个属性的例子是 Core Animation （鲜为人知）能够为`CALayer`子类的自定义属性设置动画。假设您创建了一个`CALayer`名为的子类`PolygonLayer`，并具有一个名为 的属性`sides`。`sides`您可以使用标准为属性设置动画`CABasicAnimation`：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"sides"];
animation.fromValue = @3;
animation.toValue = @9;
animation.autoreverses = YES;
animation.duration = 1;
[myPolygonLayer addAnimation:animation forKey:@"sides"]; 
```

`sides`Presto，Core Animation 将为您的图层属性设置动画，从 3 到 9 并返回。`sides`然而，Core Animation 的源代码对您的属性一无所知。（查看[这个问题](https://stackoverflow.com/questions/2395382/animating-a-custom-property-of-calayer-subclass)了解更多详情。）

即使我们在编译时知道该属性，有时我们也会使用 KVC。一个例子是当我们想要利用 KVC 为我们做的额外工作时。例如，如果您有一个`NSArray`完整的`Person`对象，并且您想要获取每个人的名字的数组，您可以这样写：

```
NSMutableArray *firstNames = [NSMutableArray array];
for (Person *person in people) {
    [firstNames addObject:person.firstName];
} 
```

但在这种情况下，KVC 具有使其更简单的功能。如果您使用 KVC 访问数组的属性，KVC 实际上会为您访问数组中每个元素的该属性：

```
NSArray *firstNames = [people valueForKey:@"firstName"]; 
```

即使我们在编译时知道属性，我们也可能使用 KVC 的另一个示例是，当属性未静态声明为类的一部分时。例如，每个 NSManagedObject（Core Data 的一部分）根据该实例`NSManagedObject`所代表的任何实体动态地赋予自己属性。您可以使用 KVC 访问这些属性，尽管通常我们更喜欢将[它们声明`NSManagedObject`在`NSManagedObject`](http://developer.apple.com/library/mac/documentation/cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154-SW7).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:55:44.923

如果您使用 Key Value Observers 来检测对象上的值变化，KVC 会很有用。如果您想使用 KVO，并且`@properties`您必须将每个 mutator 方法包​​装为：

```
[self willChangeValueForKey:@"bar"];
bar = foo;
[self didChangeValueForKey:@"bar"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:06:46.077

有时您直到运行时才知道要设置/获取的属性。
在这种情况下，您可以通过将属性键路径构造为字符串来使用 KVC。

例如，我有一个具有多个 NSArray 属性的对象，我想保留它们更新的最后一个 NSDate。

假设我有一个名为：*comments*的数组属性和一个名为*likes*的数组属性。

我定义了一个属性：commentsLastModified 和 likesLastModified。更新数组时（我将属性名称作为字符串），我使用：

```
[object setValue:[NSDate date] forKey:[NSString stringWithFormat:@"%@%@", arrayString, @"LastModified"]; 
```

# php - PHP：调用使用基本身份验证保护的 API

> ID：13386084
> 
> 赞同：0
> 
> 时间：2012-11-14T19:40:53.273
> 
> 标签：php, authentication, curl

我在现在使用基本身份验证保护的服务器上部署了一个 API。

我还有一个脚本在运行 APi 的同一台服务器上运行，它需要调用 API。

脚本：test.php

```
<?php
$url = 'https://my_site.myapi/account/add/{"account_id":"1234555"}
$username = 'myname';
$password = 'mypassword';
$ch=curl_init();
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_USERPWD, $username.":".$password);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,5);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
$data = curl_exec($ch);
curl_close($ch); 
```

当我尝试从浏览器调用 test.php 时：

```
https://my_site.myapi/test.php 
```

我被提升为用户名和密码。我没有收到错误消息。有任何想法吗？

# 虚拟主机部分

```
DocumentRoot /var/www/mysite/web/
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>

<Directory "/var/www/api_section_1">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
    AuthType Basic
    AuthName "Restricted Access"
    AuthUserFile /usr/local/apache/passwd/passwords
</Directory>

Alias /winapi /var/www/another_section/
<Directory "/var/www/another_section">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
    AuthType Basic
    AuthName "Restricted Access"
    AuthUserFile /usr/local/apache/passwd/passwords
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:34:12.457

如果系统提示您输入密码，那不是来自您的 curl 调用，而是来自 apache。我的猜测是您的[https://my_site.myapi/test.php](https://my_site.myapi/test.php)页面也被基本身份验证错误地保护了。

curl_exec() 将返回一个指示需要身份验证的错误，而不是提示您进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:46:00.610

您的基本身份验证是否需要任何编码 - 例如，用户名和密码令牌可能需要进行 base64 编码。

要检查的另一件事是详细信息是否包含在 Authorization 标头中 - 检查请求标头以查看是否是这种情况。

# c# - 如何在生成 Telerik 报告时杀死/停止它

> ID：13386087
> 
> 赞同：0
> 
> 时间：2012-11-14T19:41:00.060
> 
> 标签：c#, asp.net, c#-4.0, telerik, telerik-reporting

我有一个 Telerik ReportViewer 和一个按钮。这是后面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            ReportViewer1.Report = (Telerik.Reporting.Report)session["TelerikReportObject"];
            ReportViewer1.DataBind();
        }

    protected void ButtonKillThenNavigate_Click(object sender, EventArgs e)
    {
        // Here I need some mechanism to kill the Report (if it is still being generated) so I can immediately navigate to another page without a delay.
        // Now with my current code, a very noticeable delay exists before executing the redirection in the following line of code

        Response.Redirect("Home.aspx");
    } 
```

如果没有办法杀死报告，我可以`ReportViewer1.Dispose()`作为`Response.Redirect("Home.aspx")`异步**操作**调用吗？如果我能做到这一点，我将能够立即导航到我的页面，而报告将随时处理。

检查下图：

![在此处输入图像描述](../Images/9d0e61a7e2329db46884f9a8cfd22247.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:16:18.107

一个非常简单的选择可能是`Home.aspx`在页面上只包含一个普通的 html 链接。这应该将用户的浏览器带到 Home.aspx 并关闭其连接以等待报告。它可能不会取消报告生成（可能会一直持续到完成，然后关闭处理页面的进程）。但这具有从用户角度来看您想要的操作，并且只要正常报告就会浪费资源。

除此之外，请查看`ReportViewer1.RefreshReportCommand`命令。我在这里猜测，但是您也许可以使用零数据重新配置 ReportViewer，然后调用刷新方法，这*可能会*取消现有进程并非常快速地生成零数据报告，然后完成。

以我在 Telerik Reporting 方面的有限经验，我不相信他们将它设计用于大部分异步操作。

# c# - 指向站点区域的另一个域

> ID：13386089
> 
> 赞同：2
> 
> 时间：2012-11-14T19:41:08.967
> 
> 标签：c#, asp.net, azure, dns, web

我将如何实施以下内容...

example.com 网站有以下页面：

```
example.com/id1/page1/
example.com/id1/page2/
example.com/id1/page3/
example.com/id2/page1/
example.com/id2/page2/
example.com/id2/page3/ 
```

现在我想在我分别指向域和`example1.com`页面时拥有它。`example2.com``example.com/id1/``example.com/id2/page1/`

该站点在天蓝色上，我所做的是为所有三个域（、、、）设置一个 dns`example.com`以`example1.com`指向`example2.com`相同的 ip。

然后在网站的主页上，我使用 Response.Redirect(...) 进行重定向；

但这意味着在浏览器 url 中看不到域`example1.com`和`example2.com`，而是在浏览器中看到诸如`example.com/id1/`和之类的 url `example.com/id2/`。

相反，我想要的是让我的网站显示为实际域，以使这些 URL 永远不会被看到：

```
example.com/id1/
example.com/id1/page1/
example.com/id1/page2/
example.com/id1/page3/
example.com/id2/
example.com/id2/page1/
example.com/id2/page2/
example.com/id2/page3/ 
```

相反，它们分别显示为

```
example1.com/
example1.com/profile/
example1.com/about/
example1.com/contact/
example2.com/
example2.com/profile/
example2.com/about/
example2.com/contact/ 
```

那么我需要更改什么才能使域可见？很抱歉这个长问题:(希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:49:38.170

您不会使用重定向来执行此操作，因为正如您所提到的，您希望将 URL 保持为输入的 URL。您要做的是 URL 路由。对于 ASP.NET，这里解释了过程和配置：http: [//msdn.microsoft.com/en-us/library/cc668201 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx)

如果您的页面列表有限，您可以进行静态路由。或者您可以提供基于页面数据库或其他东西的路由表。此处的演练解释了如何提供这些路由： http: [//msdn.microsoft.com/en-us/library/dd329551 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd329551(v=vs.100).aspx)

# sql - Endeca 锻造工艺

> ID：13386090
> 
> 赞同：0
> 
> 时间：2012-11-14T19:41:11.560
> 
> 标签：sql, forge, endeca

我正在使用包含 5 个 sql 语句的 queries.xml 文件。我想知道运行forge进程时是同时执行5个sql查询还是一次执行一个sql查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:16:16.750

在处理文件时，一次执行一个查询。此外，文件是自上而下处理的。

# r - 使用 as.Date 格式化月份缩写

> ID：13386091
> 
> 赞同：12
> 
> 时间：2012-11-14T19:41:12.673
> 
> 标签：r, date, gsub

我正在处理月度数据，并有一个日期字符向量，格式为：

```
Sep/2012
Aug/2012
Jul/2012 
```

等等，回到 1981 年。我尝试过使用

```
as.Date(dates, "%b/%Y") 
```

其中`%b`表示月份缩写，但这仅返回 NA。我究竟做错了什么？

注意：我已经找到了一种解决方法`gsub()`，可以在每个条目前添加“01/”，如下所示：

```
01/Sep/2012
01/Aug/2012
01/Jul/2012 
```

然后`as.Dates()`有效，但这似乎有点不雅，而且无论如何也不是严格准确的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T20:09:08.640

`as.yearmon()`您正在寻找**zoo**包。鉴于您的日期

```
dates <- c("Sep/2012","Aug/2012","Jul/2012") 
```

我们加载包并转换为`"yearmon"`类

```
require(zoo)
dates1 <- as.yearmon(dates, format = "%b/%Y")
dates1 
```

这使

```
R> dates1
[1] "Sep 2012" "Aug 2012" "Jul 2012" 
```

`"Date"`您可以使用该`as.Date()`方法强制到类的对象

```
R> as.Date(dates1)
[1] "2012-09-01" "2012-08-01" "2012-07-01" 
```

这将是通过`gsub()`. 有一个`frac`论点可以控制天组件应该在一个月内有多远：

```
R> as.Date(dates1, frac = 0.5)
[1] "2012-09-15" "2012-08-16" "2012-07-16" 
```

但这对你来说可能还不够。

如果您真的只想要按原样存储日期，那么它们并不是真正的日期，但如果您乐于在**zoo**包中工作，那么`"yearmon"`该类可以用作`zoo`时间序列对象的索引。

# linux - 如何在 Linux 中禁用 SYSENTER 系统调用支持并仅使用 int $0x80

> ID：13386098
> 
> 赞同：1
> 
> 时间：2012-11-14T19:41:35.333
> 
> 标签：linux, kernel, system-calls, sysenter

我正在尝试禁用`SYSENTER`系统调用支持，并让所有系统调用通过 Linux 中的中断回退`int $0x80`，而不使用任何 ptrace。

我找到了两种方法：</p>

1.  `/proc/sys/vm/vdso_enabled`通过将文件修改为 0来完全禁用 VDSO
2.  调整`/usr/src/linux/arch/x86/vdso/vdso32-setup.c`

修改 VDSO（虚拟动态共享对象）应该是我方法中的方法，但我不知道要修改哪一行。有人可以给我任何建议吗？

谢谢你。

# mysql - 我是否正确设计了这些表格？

> ID：13386104
> 
> 赞同：-1
> 
> 时间：2012-11-14T19:42:00.527
> 
> 标签：mysql, entity-framework-4, relational-database

这是场景...一个人可以有一个用户记录，有或没有相关的个人资料记录。该人还可以拥有他/她“管理”的多个个人资料（家庭成员等），这些个人资料可能有也可能没有与之关联的用户记录，因为他们可能会或可能不会使用网站/应用程序。

个人资料记录包含个人信息，例如姓名、出生日期等……所以我们可以拥有史密斯奶奶的个人资料以及她的个人信息，但没有相关的用户记录，因为她自己永远不会使用该网站，只有她的女儿会。

下面列出了重要的字段（这是一组正确规范化的表吗？）：

用户：id，电子邮件，密码，profile_id（FK，NULLABLE）

USER_PROFILES：id、user_id、profile_id

配置文件：id、name、dob、user_id（FK、NULLABLE）

我想我想知道的是，如果我应该同时拥有 profile_id 外键和 user_id 外键，这些是多余的吗？在我的网站中，我有一个个人资料编辑页面，您可以在同一页面上编辑一个人的用户信息和个人资料信息，因此我希望能够从参考页面提供个人资料 ID 或用户 ID 并拉起适当的数据。如果我在配置文件记录中没有 user_id 来查看当前配置文件是否有用户记录，这很难做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:45:20.427

如果我正确理解了您的表结构，那么 profile_id 似乎是多余的。USERS 中的 id 是您到 PROFILES 的链接，它作为外键驻留在 user_id 中。

至于你是如何查询的……我有点担心。您不应该要求用户 ID，然后允许用户查看和编辑所有关联的配置文件吗？这似乎符合当前的做法，应该可以解决您在 USERS 中必须有 profile_id 的困境。

尽管如此，即使您保留当前设置，用户 ID 也可用于查询配置文件，而配置文件 ID 可用于查询配置文件，因此您可以设置任何一种方式。

# xml - Powershell Get-childitem 从 XML 返回 UNC 值的“找不到路径”

> ID：13386105
> 
> 赞同：1
> 
> 时间：2012-11-14T19:42:08.547
> 
> 标签：xml, powershell, unc

我知道这是一件简单的事情，但对于我的生活，我似乎无法让它发挥作用。我们有一个脚本可以从 XML 配置文件中加载值，格式如下：

```
<configuration>
<global>
    <rootBuildPath>\\devint1\d`$\Builds\</rootBuildPath>
</global>
</configuration>

#Load the xml file
$xmlfile = [xml](get-content "C:\project\config.xml")
# get the root path
$rootBuildPath = $xmlfile.configuration.global.rootBuildPath

$currentRelease = Get-ChildItem $rootBuildPath -Exclude "Latest" | Sort -Descending LastWriteTime | select -First 1

# do some stuff with the result, etc. 
```

现在发生的是 get-childitem 抛出一个

```
Get-ChildItem : Cannot find path '\\devint1\d`$\Builds' because it does not exist. 
```

如果我在 shell 中运行命令，它可以工作，但由于某种原因，如果我尝试使用 XML 文件中的值，它会失败。我试过逃避反引号并删除反引号无济于事。

我不能使用共享来实现这一点。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:53:41.407

您收到错误的原因是，当您从 xml 文件中获取 $rootBuildPath 时，它的类型是字符串。这相当于调用

```
Get-ChildItem '\\devint1\d`$\Builds\' -Exclude "Latest" | ... 
```

这将引发您看到的异常。运行时它不会抛出错误的原因

```
Get-ChildItem \\devint1\d`$\Builds\ -Exclude "Latest" | ... 
```

从命令行看，powershell 在将路径传递给 Get-ChildItem 命令行开关之前先将路径解析为路径。

为了使您的代码正常工作，您必须在调用 Get-ChildItem 之前从路径中删除错误的“`”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:46:41.297

只需删除配置文件中 $ 之前的反引号：

```
<configuration>
<global>
    <rootBuildPath>\\devint1\d$\Builds\</rootBuildPath>
</global>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:48:46.910

如果您无法删除 xml 文件中的反引号，则可以在分配给时将其删除`$rootBuildPath`

```
$rootBuildPath = $xmlfile.configuration.global.rootBuildPath -replace '`','' 
```

# java - 如何从字符串中删除单个字符

> ID：13386107
> 
> 赞同：150
> 
> 时间：2012-11-14T19:42:28.517
> 
> 标签：java, string

为了在 Java 中访问字符串的单个字符，我们有`String.charAt(2)`. 是否有任何内置函数可以删除java中字符串的单个字符？

像这样的东西：

```
if(String.charAt(1) == String.charAt(2){
   //I want to remove the individual character at index 2\. 
} 
```

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-11-14T19:54:38.923

您还可以使用`StringBuilder`可变的类。

```
StringBuilder sb = new StringBuilder(inputString); 
```

它具有 method [`deleteCharAt()`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html#deleteCharAt%28int%29)，以及许多其他 mutator 方法。

只需删除需要删除的字符，然后得到如下结果：

```
String resultString = sb.toString(); 
```

这避免了创建不必要的字符串对象。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2013-12-18T18:00:26.050

您可以使用名为 replace 的 Java String 方法，它将所有匹配第一个参数的字符替换为第二个参数：

```
String a = "Cool";
a = a.replace("o",""); 
```

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2012-11-14T19:44:42.243

一种可能：

```
String result = str.substring(0, index) + str.substring(index+1); 
```

请注意，结果是一个新的字符串（以及两个中间字符串对象），因为 Java 中的字符串是不可变的。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-09-24T09:31:36.550

```
String str = "M1y java8 Progr5am"; 
```

*删除字符（）*

```
StringBuilder build = new StringBuilder(str);
System.out.println("Pre Builder : " + build);
    build.deleteCharAt(1);  // Shift the positions front.
    build.deleteCharAt(8-1);
    build.deleteCharAt(15-2);
System.out.println("Post Builder : " + build); 
```

*代替（）*

```
StringBuffer buffer = new StringBuffer(str);
    buffer.replace(1, 2, ""); // Shift the positions front.
    buffer.replace(7, 8, "");
    buffer.replace(13, 14, "");
System.out.println("Buffer : "+buffer); 
```

*字符[]*

```
char[] c = str.toCharArray();
String new_Str = "";
    for (int i = 0; i < c.length; i++) {
        if (!(i == 1 || i == 8 || i == 15)) 
            new_Str += c[i];
    }
System.out.println("Char Array : "+new_Str); 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-11-14T19:43:54.430

不，因为 Java 中的字符串是不可变的。您必须创建一个新字符串来删除您不想要的字符。

要替换string`c`中索引位置的单个字符，请执行以下操作，并记住将创建一个新字符串：`idx``str`

```
String newstr = str.substring(0, idx) + str.substring(idx + 1); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-09-23T18:52:39.027

考虑以下代码：

```
public String removeChar(String str, Integer n) {
    String front = str.substring(0, n);
    String back = str.substring(n+1, str.length());
    return front + back;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-08-27T17:37:45.353

*要修改字符串，请阅读 StringBuilder，因为它是可变的，除了不可变的字符串。可以在这里找到不同的操作[https://docs.oracle.com/javase/tutorial/java/data/buffers.html](https://docs.oracle.com/javase/tutorial/java/data/buffers.html)。下面的代码片段创建一个 StringBuilder，然后附加给定的 String，然后从 String 中删除第一个字符，然后将其从 StringBuilder 转换回 String。*

```
StringBuilder sb = new StringBuilder();

sb.append(str);
sb.deleteCharAt(0);
str = sb.toString(); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-07-30T21:19:27.380

您也可以使用（巨大的）正则表达式机器。

```
inputString = inputString.replaceFirst("(?s)(.{2}).(.*)", "$1$2"); 
```

*   `"(?s)" -`告诉正则表达式像普通字符一样处理换行符（以防万一）。
*   `"(.{2})" -`组 $1 正好收集 2 个字符
*   `"." -`索引 2 处的任何字符（被挤出）。
*   `"(.*)" -`组 $2 收集输入字符串的其余部分。
*   `"$1$2" -`将 $1 组和 $2 组放在一起。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-11-01T11:11:31.533

通过使用 replace 方法，我们可以更改字符串的单个字符。

```
string= string.replace("*", ""); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-02-03T19:44:11.900

如果要从特定**int*****索引*****处的String *str***中删除 char ：

 *```
 public static String removeCharAt(String str, int index) {

        // The part of the String before the index:
        String str1 = str.substring(0,index);

        // The part of the String after the index:            
        String str2 = str.substring(index+1,str.length());

        // These two parts together gives the String without the specified index
        return str1+str2;

    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-11-14T19:44:40.143

使用 String 类的 replaceFirst 函数。您可以使用许多替换功能的变体。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-11-14T20:15:08.030

如果您需要对字符删除进行一些逻辑控制，请使用此

```
String string = "sdsdsd";
char[] arr = string.toCharArray();
// Run loop or whatever you need
String ss = new String(arr); 
```

如果您不需要任何此类控制，则可以使用 Oscar orBhesh 提到的。他们是正确的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-08-08T19:27:54.467

**从字符串中删除字符的最简单方法**

```
String str="welcome";
str=str.replaceFirst(String.valueOf(str.charAt(2)),"");//'l' will replace with "" 
System.out.println(str);//output: wecome 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-03-19T02:05:58.643

```
public class RemoveCharFromString {
    public static void main(String[] args) {
        String output = remove("Hello", 'l');
        System.out.println(output);
    }

    private static String remove(String input, char c) {

        if (input == null || input.length() <= 1)
            return input;
        char[] inputArray = input.toCharArray();
        char[] outputArray = new char[inputArray.length];
        int outputArrayIndex = 0;
        for (int i = 0; i < inputArray.length; i++) {
            char p = inputArray[i];
            if (p != c) {
                outputArray[outputArrayIndex] = p;
                outputArrayIndex++;
            }

        }
        return new String(outputArray, 0, outputArrayIndex);

    }
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-09-03T10:31:15.817

在大多数用例中，使用`StringBuilder`or`substring`是一种好方法（正如已经回答的那样）。但是，对于性能关键代码，这可能是一个不错的选择。

```
/**
 * Delete a single character from index position 'start' from the 'target' String.
 * 
 * ````
 * deleteAt("ABC", 0) -> "BC"
 * deleteAt("ABC", 1) -> "B"
 * deleteAt("ABC", 2) -> "C"
 * ````
 */
public static String deleteAt(final String target, final int start) {
    return deleteAt(target, start, start + 1);
} 

/**
 * Delete the characters from index position 'start' to 'end' from the 'target' String.
 * 
 * ````
 * deleteAt("ABC", 0, 1) -> "BC"
 * deleteAt("ABC", 0, 2) -> "C"
 * deleteAt("ABC", 1, 3) -> "A"
 * ````
 */
public static String deleteAt(final String target, final int start, int end) {
    final int targetLen = target.length();
    if (start < 0) {
        throw new IllegalArgumentException("start=" + start);
    }
    if (end > targetLen || end < start) {
        throw new IllegalArgumentException("end=" + end);
    }
    if (start == 0) {
        return end == targetLen ? "" : target.substring(end);
    } else if (end == targetLen) {
        return target.substring(0, start);
    }
    final char[] buffer = new char[targetLen - end + start];
    target.getChars(0, start, buffer, 0);
    target.getChars(end, targetLen, buffer, start);
    return new String(buffer);
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-11-06T14:28:42.917

*您可以使用 StringBuilder 和 deletecharAt 删除字符串值。

```
String s1 = "aabc";
StringBuilder sb = new StringBuilder(s1);
for(int i=0;i<sb.length();i++)
{
  char temp = sb.charAt(0);
  if(sb.indexOf(temp+"")!=1)
  {                             
    sb.deleteCharAt(sb.indexOf(temp+""));   
  }
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-06-28T13:06:27.197

是的。我们有内置函数来删除java中字符串的单个字符，即deleteCharAt

例如，

```
public class StringBuilderExample 
{
   public static void main(String[] args) 
   {
      StringBuilder sb = new StringBuilder("helloworld");
      System.out.println("Before : " + sb);
      sb = sb.deleteCharAt(3);
      System.out.println("After : " + sb);
   }
} 
```

**输出**

```
Before : helloworld
After : heloworld 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-06-22T09:54:32.280

要从给定字符串中删除单个字符，请找到我的方法，希望它有用。我已经使用 str.replaceAll 来删除字符串，但是它们有很多方法可以从给定的字符串中删除字符，但我更喜欢 replaceall 方法。

**删除字符的代码：**

```
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;

public class Removecharacter 
{

    public static void main(String[] args) 
    {
        String result = removeChar("Java", 'a');
        String result1 = removeChar("Edition", 'i');

         System.out.println(result + " " + result1);

    }

    public static String removeChar(String str, char c) {
        if (str == null)
        {
            return null;
        }
        else
        {   
        return str.replaceAll(Character.toString(c), "");
        }
    }

} 
```

**控制台图像：**

请找到控制台的附加图像，

[![在此处输入图像描述](../Images/452e02fa1233c9cc7cb14d89e70c3ece.png)](https://i.stack.imgur.com/aEtCO.jpg)

感谢您的提问。:)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-10-18T01:38:36.350

```
public static String removechar(String fromString, Character character) {
    int indexOf = fromString.indexOf(character);
    if(indexOf==-1) 
        return fromString;
    String front = fromString.substring(0, indexOf);
    String back = fromString.substring(indexOf+1, fromString.length());
    return front+back;
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-09-19T06:08:03.890

```
 BufferedReader input=new BufferedReader(new InputStreamReader(System.in));
   String line1=input.readLine();
   String line2=input.readLine();
         char[]  a=line2.toCharArray();
          char[] b=line1.toCharArray();
           loop: for(int t=0;t<a.length;t++) {

            char a1=a[t];
           for(int t1=0;t1<b.length;t1++) {
               char b1=b[t1];  
               if(a1==b1) {
                   StringBuilder sb = new StringBuilder(line1);
                   sb.deleteCharAt(t1);
                   line1=sb.toString();
                   b=line1.toCharArray();
                   list.add(a1);
                   continue  loop;   
               }

            } 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-05-05T19:00:09.287

当我遇到这类问题时，我总是会问：“Java 大师会做什么？” :)

在这种情况下，我会通过查看`String.trim()`.

这是该实现的外推，允许使用更多的修剪字符。

但是，请注意，原始修剪实际上删除了所有字符`<= ' '`，因此您可能必须将其与原始字符组合以获得所需的结果。

```
String trim(String string, String toTrim) {
    // input checks removed
    if (toTrim.length() == 0)
        return string;

    final char[] trimChars = toTrim.toCharArray();
    Arrays.sort(trimChars);

    int start = 0;
    int end = string.length();

    while (start < end && 
        Arrays.binarySearch(trimChars, string.charAt(start)) >= 0)
        start++;

    while (start < end && 
        Arrays.binarySearch(trimChars, string.charAt(end - 1)) >= 0)
        end--;

    return string.substring(start, end);
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-07-13T05:01:27.393

```
public String missingChar(String str, int n) {
  String front = str.substring(0, n);

// Start this substring at n+1 to omit the char.
// Can also be shortened to just str.substring(n+1)
// which goes through the end of the string.

String back = str.substring(n+1, str.length());
  return front + back;
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-07-25T16:30:55.100

我刚刚实现了这个实用程序类，它**从 String 中删除一个字符或一组字符**。我认为它很快，因为不使用正则表达式。我希望它可以帮助某人！

```
package your.package.name;

/**
 * Utility class that removes chars from a String.
 * 
 */
public class RemoveChars {

    public static String remove(String string, String remove) {
        return new String(remove(string.toCharArray(), remove.toCharArray()));
    }

    public static char[] remove(final char[] chars, char[] remove) {

        int count = 0;
        char[] buffer = new char[chars.length];

        for (int i = 0; i < chars.length; i++) {

            boolean include = true;
            for (int j = 0; j < remove.length; j++) {
                if ((chars[i] == remove[j])) {
                    include = false;
                    break;
                }
            }

            if (include) {
                buffer[count++] = chars[i];
            }
        }

        char[] output = new char[count];
        System.arraycopy(buffer, 0, output, 0, count);

        return output;
    }

    /**
     * For tests!
     */
    public static void main(String[] args) {

        String string = "THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG";
        String remove = "AEIOU";

        System.out.println();
        System.out.println("Remove AEIOU: " + string);
        System.out.println("Result:       " + RemoveChars.remove(string, remove));
    }
} 
```

这是输出：

```
Remove AEIOU: THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG
Result:       TH QCK BRWN FX JMPS VR TH LZY DG 
```

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2013-10-17T23:02:57.150

例如，如果你想计算字符串中有多少个 a，你可以这样做：

```
if (string.contains("a"))
{
    numberOf_a++;
    string = string.replaceFirst("a", "");
} 
```*

# php - 在变量内执行函数 X 次

> ID：13386111
> 
> 赞同：0
> 
> 时间：2012-11-14T19:42:45.343
> 
> 标签：php, function, for-loop

具有以下代码：

```
switch ($options['algorythm'])
{
    case 'jigsaw':
        $result = $this->jigsaw($options['count'], $options['length']);
    break;
    case 'freddy':
        $result = $this->freddy($options['count'], $options['length'], $options['characters']);
    break;
}

for($i=0; $i < $options['count']; $i++)
{
    echo $result."<br/>";
} 
```

如何在`$result`定义的时间内执行函数`count`？因为就目前而言，它只会重复多次相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:46:40.247

最简单的方法是`switch`在循环中移动：

```
for($i=0; $i < $options['count']; $i++)
{
    switch ($options['algorythm'])
    {
        case 'jigsaw':
            $result = $this->jigsaw($options['count'], $options['length']);
        break;
        case 'freddy':
            $result = $this->freddy($options['count'], $options['length'], $options['characters']);
        break;
    }

    echo $result;
} 
```

完成后，您可以尝试使用[`call_user_func`](http://php.net/manual/en/function.call-user-func.php).

# html - 列表内联元素中的图像和文本位置

> ID：13386114
> 
> 赞同：0
> 
> 时间：2012-11-14T19:42:53.347
> 
> 标签：html, css

我正在尝试设计一个网页，其中有一个乐队列表，每张图片都是乐队徽标（或其他东西）的小型图片。我正在设置风格`inline`，我已经尝试过`vertical-align`等等`line-height`，但似乎没有任何效果。

我很确定我可以做到这一点，`tables`但我多次被告知这不是正确使用`table`.

```
 <div id ="Content">
        <ul>
            <li><img src="IMG_3117.jpg"width="100" height="100"/>band name</li>
            <li><img src="IMG_3117.jpg"width="100" height="100"/>band name</li>
            <li><img src="IMG_3117.jpg"width="100" height="100"/>band name</li>
            <li><img src="IMG_3117.jpg"width="100" height="100"/>band name</li>
            <li><img src="IMG_3117.jpg"width="100" height="100"/>band name</li>

        </ul>
    </div> 
```

这是我拥有的少量 CSS

```
 #content li{display:inline;}
    img {
    max-height:100px;
    max-width: 100px;
    }

   #content ul{list-style-type: none;
    clear:left;
   } 
```

任何帮助或提示将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:46:38.737

我最好的猜测是你正在寻找这个：

```
#content ul li {
   float:left; 
} 
```

否则，您必须更具体地说明您要完成的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:55:43.153

如果我明白你想要做什么，试试这个：

```
#content li {
    display: inline-block;
    background-color: #eaeaea;
    border: 1px solid red;
    text-align: center;
    max-width: 100px;
    white-space: nowrap;
    overflow: hidden;
    margin: 5px;
}

img {
    max-height:100px;
    max-width: 100px;
    display: block;
}

#content ul{
    list-style-type: none;
    clear:left;
}​ 
```

看看这里：http: [//jsfiddle.net/zDhKQ/](http://jsfiddle.net/zDhKQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:49:48.950

我相信你想要对齐标签。像这样的东西：

```
<li><img src="IMG_3117.jpg" alt="Smiley face" width="42" height="42" align="left">This is some text.
</li> 
```

会产生看起来不错的东西。

# ruby-on-rails - 回形针：在动态配置中判断文件是否有扩展名

> ID：13386116
> 
> 赞同：0
> 
> 时间：2012-11-14T19:42:54.487
> 
> 标签：ruby-on-rails, paperclip

我最初有回形针的默认配置包含

```
:url => "/some_path/:basename.:extension" 
```

但是，我上传的所有文件都没有扩展名，在这种情况下，我不想要“。” （在配置中的基本名称和扩展名之间）在那里。所以我想做这样的事情：

```
:url => lambda { |i| "/some_path/:basename#{".:extension" if i.extension}" } 
```

我试过了，得到一个“无法将 Proc 转换为字符串”的错误，它告诉我回形针不支持 url 的动态配置，就像它对样式和处理器所做的那样。关于我还能如何做到这一点的任何想法，越少黑客越好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:09:48.440

简短的回答是你替换

```
:basename.:extension 
```

和

```
:filename 
```

更详细的答案是 basename、filename 和 extension 都是插值，您可以使用“paperclip/interpolations”（在回形针的 lib 目录中）中定义的任何插值或定义自己的插值。

例如：

```
Paperclip.interpolates(:temperature) do |attachment, style|
  attachment.instance.city.temperature(:today)
end 
```

当然，假设您的城市对象也知道今天的温度的`has_attached_file`模型`belongs_to :city`。

# sql - t-sql 中带有子查询的 Where 子句是否查询每一行的数据？

> ID：13386118
> 
> 赞同：2
> 
> 时间：2012-11-14T19:43:01.100
> 
> 标签：sql, sql-server, tsql, stored-procedures, table-valued-parameters

我在 t-sql 中编写了一个查询，该查询在子查询中使用了一个函数，并遇到了两个问题。想象一个广告表如下：

```
AdID- Name 
```

一个选项表如下：

```
OptionID - OptionName 
```

以及这两者之间的垃圾表（AdvertisementOptionLink），带有两个外键列：

```
AdID - OptionID 
```

现在我想在用户选择选项时查询广告。我写了一个这样的查询：

```
SELECT * FROM Advertisement ad
INNER JOIN AdvertisementOptionLink aol
WHERE ad.AdvertisementID IN (SELECT AdvertisementID FROM UDF_GetAdvertisements) 
```

现在 UDF_GetAdvertisements 是一个表值函数，它返回具有特定选项的广告列表。

有两个问题：

> 1.  这个 UDF_GetAdvertisements 函数是否查询每一行的所有数据？我的意思是，如果我的表中有 2000 个广告，它会查询所有这些广告并返回所有广告 ID？我最好将函数返回值保存在变量中吗？
> 
> 2.在这个数据库中有一些广告没有任何选项，如果用户不选择任何选项，我如何返回所有广告？

我在 t-sql 中使用表值参数通过存储过程传递选定的选项 ID。使用了这个页面的一些帮助：http: [//www.sommarskog.se/arrays-in-sql-2008.html](http://www.sommarskog.se/arrays-in-sql-2008.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:52:00.127

您需要检查执行计划。

```
WHERE ad.AdvertisementID IN (SELECT AdvertisementID FROM UDF_GetAdvertisements) 
```

将被实现为逻辑[半连接](http://blogs.msdn.com/b/craigfr/archive/2006/07/19/671712.aspx)运算符。物理连接类型可以是任何合并、散列或嵌套循环。

合并连接和哈希连接对每个输入处理一次。嵌套循环处理外部输入一次，内部处理一次的次数与外部输入中的行数相同。但即使 TVF 显示在嵌套循环连接的内侧，结果也可能会缓存在假脱机中，而不是反复重新评估 TVF。

# javascript - Javascript 中出现意外的标识符语法错误

> ID：13386121
> 
> 赞同：-2
> 
> 时间：2012-11-14T19:43:15.790
> 
> 标签：javascript, jquery, jquery-ui, syntax-error

我得到了一个带有以下代码的 Unxepected Identifier 编辑器。我整天都在解决它，但什么也没有。希望一双新的眼睛能发现我的错误。我正在尝试使用 jQuery UI 来设置日期选择器，然后获取和操作日期。更改选择器上的日期应该通过 ajax 更改与该日期关联的页面上的图像。

```
$(document).ready(function(){
// Datepicker
$('#datepicker').datepicker({
    dateFormat: 'yy-mm-dd',
    inline: true,
    minDate: new Date(2012, 06 - 1, 1),
    maxDate:new Date(2012, 09 - 1, 31),
    onSelect: function(){
       var day1 = ($("#datepicker").datepicker('getDate').getDate()).toString().replace(/(^.$)/,"0$1");              
       var month1 = ($("#datepicker").datepicker('getDate').getMonth() + 1).toString().replace(/(^.$)/,"0$1");             
        var year1 = $("#datepicker").datepicker('getDate').getFullYear();
        var fullDate = year1 + "/" + month1 + "/" + day1;
        var dashDate = year1 + "-" + month1 + "-" + day1;
        var str_output = "<a id=\"single_image\" href=\"http://www.lasalle.edu/150/dayinhistory/" + fullDate + ".jpg\" title=\"\"><img src=\"http://www.lasalle.edu/scripts/timthumb/timthumb.php?src=http://www.lasalle.edu/150/dayinhistory/" + fullDate + ".jpg&w=560&h=350&zc=1&a=t\">";
        $('#this-day-photo-archive').html(str_output);
        var data = 'day=' + dashDate;
            $.ajax({
                url: 'http://www.lasalle.edu/150/content/day_grab.php',
                type: "GET", 
                data: data,     
                cache: false,
                success: function(html) {
                    $('#this-day-info').html(html);
                    console.log (html);
                    $(".left").click(function() {
                        $('#datepicker').datepicker( "setDate" , -1d );
                    });
                    $(".right").click(function() {
                        $('#datepicker').datepicker( "setDate" , +1d );
                    });
                }
            });
    } 

});

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:47:38.280

你应该更换

```
 $('#datepicker').datepicker( "setDate" , -1d ); 
```

和

```
 $('#datepicker').datepicker( "setDate" , "-1d" ); 
```

（对于 也是如此`+1d`）

[一些示例的链接以供确认](http://api.jqueryui.com/datepicker/#entry-examples)

# windows-phone-7 - 在 windows phone 7 浏览器中流式传输音频

> ID：13386122
> 
> 赞同：0
> 
> 时间：2012-11-14T19:43:20.710
> 
> 标签：windows-phone-7, audio, browser, stream, mms

我需要一些帮助，在运行 Windows Mobile 7.5 的诺基亚 Lumia 800 上的浏览​​器内流式传输音频。

我目前在桌面浏览器上使用 JW Player（flash 版）来流式传输提供给我的 rtmp:// 音频，效果很好。我还提供了相同音频流的 mms:// 版本，但我无法让它在手机的浏览器中播放。我尝试将 JW Player 的模式设置为 html5，但它不起作用。所有关于 Windows Phone 上流式音频的文档似乎都涉及本机应用程序开发，但目前这不是一个选项。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:10:20.340

抱歉，HTML5 或 Windows Phone（所有版本）本机或浏览器都不支持 RTMP 或 MMS 协议。即使使用 WP7.x 中的本机应用程序，您也不会找到对这些协议的任何支持。WP8 在 3rd 方应用程序中打开了此功能的可能性。

# python - python 3：类函数成员修改类数据成员

> ID：13386124
> 
> 赞同：0
> 
> 时间：2012-11-14T19:43:34.663
> 
> 标签：python, python-3.x

> **可能重复：**
> [Python：如何通过引用传递变量？](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)

我有以下情况：

```
class A:
    def __init__(self):
        self.test = ''
        self.func(self.test)
        print(self.test)
    def func(self,var):
        var = 'foo' 
```

我希望 func 修改 self.var 并且我希望能够传递一个自我。到这个方法。

有一点像：

```
class A()
{
  public:
    char test[256];
    A() { func(test);}
  private:
    void func(char * var) { var = "foo"; }
}; 
```

我有一段时间没有编写 C++ 了，但这就是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:45:54.807

不幸的是，我不太`C++`清楚，但我猜你想要这样的东西：

```
class A:
    def __init__(self):
        self.test = ''
        self.func("test")
        print(self.test)
    def func(self,var):
        setattr(self,var,'foo') 
```

我们必须这样做，因为我们可以`self.test`在函数内部更改（mutate）（如果它是可变的），但我们不能更改它引用的对象（这是您试图通过赋值执行的操作）。考虑：

```
def func1(x):
   x.append('foo')
def func2(x):
   x = 'foo'

a = []
func1(a)
print a #['foo']  #mutated a in func1
func2(a)
print a #['foo']  #didn't change a in func2, only created a new local variable named `x` and assigned it to the string 'foo' 
```

解决这个问题的唯一方法是传递某种*可以*更改的类似代理的对象。在这种情况下，我们将实例作为代理对象 ( `self`) 和属性名称 ( `var`) 传递，因此我们知道要更改什么`self`。鉴于这两条信息，我们可以进行所需的更改——当然，在这一点上，您可能最好一起摆脱`func`所有信息并直接使用`setattr`。

* * *

可能还值得问一下您为什么要这样做。一般来说，你可以这样做：

```
self.test = "foo" 
```

你为什么要写：

```
self.func(self.test) 
```

反而？我可以理解您是否尝试这样做，因为您习惯于使用私有方法和属性。但这是蟒蛇。 [“我们都是同意这里的成年人。”](http://mail.python.org/pipermail/tutor/2003-October/025932.html) 只需依赖约定（`_`如果要警告用户不要修改变量，请在变量前面加上前缀，并`__`在调用名称修改以避免超类中的冲突时加上前缀）。

# asp.net - 检索 SSAS\MDX 中的单元集值

> ID：13386128
> 
> 赞同：1
> 
> 时间：2012-11-14T19:43:47.977
> 
> 标签：asp.net, ssas, adomd.net

我正在编写涉及超过 2 个轴的 SSAS MDX 查询来检索值。使用 ADOMD.NET，我可以获取返回的单元集并通过使用确定值

```
lblTotalGrossSales.Text = CellSet.Cells(0).Value 
```

有没有办法可以在我的 MDX 查询中获取 CellSet 的 Cell(0) 值，而不是依赖返回到 ADOMD.NET 的数据？

谢谢！

* * *

编辑 1： - 根据 Daryl 的评论，这里有一些关于我在做什么的详细说明。我当前的查询使用了几个轴'，即：

```
SELECT {[Term Date].[Date Calcs].[MTD]} ON 0, 
{[Sale Date].[YQMD].[DAY].&[20121115]} ON 1, 
{[Customer].[ID].[All].[A612Q4-35]} ON 2, 
{[Measures].[Loss]} ON 3 
FROM OUR_CUBE 
```

如果我在 Management Studio 中运行该查询，我被告知无法为具有两个以上轴的单元集显示结果 - 这是有道理的，因为......你知道......有超过 2 个轴。但是，如果我使用 ADOMD.NET 在线运行此查询，并将返回值读入 ADOMD.NET 单元集，我可以检查单元格“0”处的值，给出我的值......据我所知它（我是立方体的总菜鸟）是所有这些值相交的值。

因此，要回答您的问题 Daryl，我希望能够将此处的值返回给我，而不必将单元格集读取到调用应用程序中。为什么你可能会问？好吧.. 最终，我希望有一个查询来执行多个多轴查询以返回值。再说一次.. 我对立方体和 MDX 非常陌生，所以我可能完全错了（我是一名 .NET 开发人员）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:02:52.050

简化查询以返回两个轴；

`SELECT {[Measures].[Loss]} ON 0, {[Term Date].[Date Calcs].[MTD] * [Sale Date].[YQMD].[DAY].&[20121115] * [Customer].[ID].[All].[A612Q4-35]} ON 1 FROM OUR_CUBE`

然后尝试以下方法访问单元组；

```
 string connectionString =  "Data Source=localhost;Catalog=AdventureWorksDW2012";
        //Create a new string builder to store the results
        System.Text.StringBuilder result = new System.Text.StringBuilder();
        AdomdConnection conn = new AdomdConnection(connectionString);
        //Connect to the local serverusing (AdomdConnection conn = new AdomdConnection("Data Source=localhost;"))
        {
            conn.Open();

            //Create a command, using this connection
            AdomdCommand cmd = conn.CreateCommand();
            cmd.CommandText = @"SELECT {  [Measures].[Unit Price]  } ON COLUMNS , {[Product].[Color].[Color].MEMBERS-[Product].[Color].[]} * [Product].[Model Name].[Model Name]ON ROWS FROM [Adventure Works] ;";

            //Execute the query, returning a cellset
            CellSet cs = cmd.ExecuteCellSet();

            //Output the column captions from the first axis//Note that this procedure assumes a single member exists per column.
            result.Append("\t\t\t");

            TupleCollection tuplesOnColumns = cs.Axes[0].Set.Tuples;

            foreach (Microsoft.AnalysisServices.AdomdClient.Tuple column in tuplesOnColumns)
            {
                result.Append(column.Members[0].Caption + "\t");

            }
            result.AppendLine();

            //Output the row captions from the second axis and cell data//Note that this procedure assumes a two-dimensional cellset
            TupleCollection tuplesOnRows = cs.Axes[1].Set.Tuples;
            for (int row = 0; row < tuplesOnRows.Count; row++)
            {
                for (int members = 0; members < tuplesOnRows[row].Members.Count; members++ )
                {
                    result.Append(tuplesOnRows[row].Members[members].Caption + "\t");
                }

                for (int col = 0; col < tuplesOnColumns.Count; col++)
                {
                    result.Append(cs.Cells[col, row].FormattedValue + "\t");
                }
                result.AppendLine();
            }
            conn.Close();

            TextBox1.Text = result.ToString();
        } // using connection 
```

[来源：使用 CellSet 检索数据](http://msdn.microsoft.com/en-us/library/ms123476%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-04T02:10:10.387

这可以在列和行上进行选择。这将有助于分析如何从主查询中遍历子选择查询。

# python - 无法在 Django 中的 Jquery ajax 发布调用的视图上获取值

> ID：13386130
> 
> 赞同：0
> 
> 时间：2012-11-14T19:43:53.793
> 
> 标签：python, django, jquery

单击按钮后，我进行了 Jquery Ajax 发布调用，但在视图中它没有获取值。这是代码：

jQuery： -

```
$("#startSimulator").click(function(){

        test = $("#testRange").val();
        gameKey = ($('input:radio[name=radioGroup]:checked').val() || 0);

        $("#imageLoading").css("display", "block");
        $.post("/blackout/setup/",{d : d,test : test,gameKey : gameKey}, function(data){

            $("#result").append(data);

        });

    }); 
```

网址.py：

```
urlpatterns = patterns('',
            (r'^blackout/setup/$', 'blackout.views.setup'),
            ) 
```

视图.py：

```
def setup(request):
    gameKey = request.POST['gameKey']
    test = request.POST['test'] 
    data = request.POST['d']

    #Some other code

    #And then HttpResponse(data) 
```

错误：-

```
Exception Value:    
"Key 'gameKey' not found in <QueryDict: {}>"

/home/dhruv/blackout_new_project/blackout/blackout_proj/blackout/views.py in setup
    gameKey = request.POST['gameKey'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:01:15.850

```
 gameKey = ($('input:radio[name=radioGroup]:checked').val() || 0); 
```

这到底应该做什么？我认为这可能是问题所在，我不确定单选框，但如果未设置复选框，则复选框在其选中属性上返回 null 或未定义（不记得究竟是哪一个）。

在进行 ajax 调用之前检查 gameKey 的值。

# android - Android：获取文件路径

> ID：13386133
> 
> 赞同：0
> 
> 时间：2012-11-14T19:44:08.887
> 
> 标签：android

我需要我的 Android 项目中的 pdf 文件的路径。

该文件可以在 raw 或 assets 文件夹中。

我需要获取路线，因为我必须使用文件类调用

例如：文件文件=新文件（路径）；

谢谢

图片：

[http://img19.imageshack.us/img19/2303/capturaww.png](http://img19.imageshack.us/img19/2303/capturaww.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:57:06.027

我不太清楚你的意思，假设你想在你的资产（res 文件）中阅读 PDF 文件，请看这里

*   [以编程方式从“res/raw”或 assets 文件夹访问 PDF 文件以使用给定的方法进行解析](https://stackoverflow.com/questions/11020299/access-pdf-files-from-res-raw-or-assets-folder-programmatically-to-parse-with)

但是如果你想获取一个文件夹的文件路径，那么看这里

*   [如何从android中的sd卡获取文件路径](https://stackoverflow.com/questions/5858107/how-to-get-file-path-from-sd-card-in-android)

*   [如何从 URI 中获取文件路径？](https://stackoverflow.com/questions/8885204/how-to-get-the-file-path-from-uri)

这是如何获取文件路径的示例（取自第三个链接）

```
File myFile = new File(uri.toString());

myFile.getAbsolutePath() 
```

# jquery - 使用带有一次单击事件的 jQuery 在 CSS 中为多个不同的 ID 赋予不同的属性

> ID：13386134
> 
> 赞同：1
> 
> 时间：2012-11-14T19:44:09.183
> 
> 标签：jquery, css, click

我高高在低。一键更改 CSS 元素中的单个属性，或更改单个 CSS 元素中的多个属性，或通过单个更改更改类都有答案 - 但所有这些都是线性的。

我试图有一个 ONE CLICK 事件，例如，我单击我设置的按钮（或链接等）。让我们将此 ID 称为#myClickButton。然后，此按钮应将两个单独的 id 的 css 属性更改为两个不同的值。我们将这些 ID 称为 #myCssChange1 和 #myCssChange2。

我单击#myClickButton。然后 #myCssChange1 从 display: block; --> 显示：无；同时 #myCssChange2 从 display: none; --> 显示：[novaluehere]；

这些必须同时发生（或者尽可能接近计算机执行代码必须采取的逐步操作）。

我敢肯定这非常简单......我只是想找到它的 jquery（不是 CSS 或 HTML）

到目前为止我的代码（是的，我意识到它是不正确的 - 它不起作用，但它确实隐藏了第一个 CSS，所以它的一部分起作用）：

```
 $(document).ready(function()
      {
        $("#myClickButton").click(function()
          {
            $("#myCssChange1").css('display', 'none');
            $("#myCssChange2").css('display', '');
          }
        );
      }
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:57:02.627

您的代码实际上是有效的（假设您尝试丢弃设置的显示值，例如 none）。在这里它[作为 JSFiddle 运行](http://jsfiddle.net/DM3wd/)。我猜你要么没有加载 JQuery，要么你的 HTML 中的 ID 与上面描述的不同，如果它不适合你的话。

此外，如果您只是显示和隐藏元素，jQuery 也有相应的方法。它们非常有用，只是`show()`和`hide()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:48:11.107

关闭，您需要指定其他内容，而不是`''`将显示更改为。

```
$(document).ready(function(){
    $("#myClickButton").click(function(){
        $("#myCssChange1").css('display', 'none');
        $("#myCssChange2").css('display', 'block'); // or inline, etc
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:50:47.037

首先 - 谢谢大家的回复。知道我的代码（大部分）是功能性的是一个很大的帮助（因为我在自学，所以我经常让自己发疯）。外部资源同样是一个很大的帮助。

我不知道我不能向 CSS 返回无值。学过的知识。但是，为了更清楚起见，这个特殊问题是最初可见的第一个对象 (#myCssChange1) 是一个带有文本块的 div。最初隐藏的第二个对象 (#myCssChange2) 是一个 div，其中包含一个表格。无论出于何种原因，将 #myCssChange2 表的“显示”设置为“无”以外的任何内容都会导致压缩的 DIV 位于拒绝展开以显示该表的一侧（基本上是一个没有任何内容的封闭条）。

由于提到了 .hide() 和 .show() 建议，我偶然发现了另一个选项，那就是在 CSS 中使用“可见性”而不是显示。这解决了我在生成 HTML 输出时遇到的问题。

所以我用：

```
 $(document).ready(function()
      {$("#myClickButton").click(function()
          {$("#myCssChange1").css('visibility', 'hidden');
           $("#myCssChange2").css('visibility', 'visible');
          });
      }); 
```

这似乎更宽容一些，虽然不如显示器灵活，但它很好地处理了扭结。

再次感谢大家，非常感谢，如果没有你们的所有意见，我至少会多呆一个星期。

# iphone - 在ios中如何获取当前日期？

> ID：13386135
> 
> 赞同：-3
> 
> 时间：2012-11-14T19:44:12.243
> 
> 标签：iphone, ios, xcode, nsarray

我正在尝试在我的应用程序中制作“每日圣经经文”功能，它每天都会向您展示新的圣经经文。我正计划制作一个包含 100 个字符串的 nsarray，这将是 100 个圣经经文，然后每天一次向您显示不同的圣经经文，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T19:46:35.753

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComponents = [gregorian components:(NSHourCalendarUnit  | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:yourDateHere];
NSInteger hour = [dateComponents hour];
NSInteger minute = [dateComponents minute];
NSInteger second = [dateComponents second]; 
```

**迅速**

```
let calendar = Calendar.current
let dateComponents = calendar.dateComponents([.hour, .minute, .second], from: date)
let hour = dateComponents.hour
let minute = dateComponents.minute
let second = dateComponents.second 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:49:44.797

`[NSDate date]`为您提供当前日期和时间。您可以使用 NSDateFormatter 对其进行格式化。（在询问如何在此处使用 NSDateFormatter 之前，请谷歌示例。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:00:37.250

就像 Licks 说的**[NSDate date]**可以获取当前日期和时间，** [NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html) ** 可以格式化日期，这里是示例

```
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterBehaviorDefault];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm"];
NSDate *date = [NSDate date];
NSString * s = [dateFormatter stringFromDate:date]; 
```

结果：2012-11-15 16:54

# django - 不使用modelform的django模型验证

> ID：13386137
> 
> 赞同：4
> 
> 时间：2012-11-14T19:44:17.973
> 
> 标签：django, django-models

我想在不使用 ModelForms 的情况下对 django 模型进行字段验证。有没有办法在调用 save() 时调用 clean_fieldname 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:04:46.893

该`clean_fieldname`方法属于表格或模型表格。模型中没有代码可以做同样的事情，你必须自己实现它。

我建议您为您的字段编写一个[验证器，然后在保存之前调用](https://docs.djangoproject.com/en/dev/ref/validators/)[full_clean()](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.full_clean)以验证您的实例。

# java - 将 JTextPane 绘制到 BufferedImage 时对齐错误

> ID：13386140
> 
> 赞同：1
> 
> 时间：2012-11-14T19:44:31.037
> 
> 标签：java, jtextpane, text-alignment

我正在尝试将一些样式化的文本绘制到缓冲图像中。我使用不属于任何视图层次结构的 JTextPane。我将文档属性设置为所需的对齐方式，但结果未正确对齐。更糟糕的是，当再次运行相同的测试时，我会得到不同字体大小的不同结果，有时甚至会得到不同的结果。

下图显示了结果。段落应该是，从上到下，左对齐，居中，右对齐，完整。红框是 JTextPane 边框。你自己看。

因为我是新的 stackoverflow 用户，所以它不允许我发布图片。[您可以在http://www.sendtoprint.net/preview/textfile.jpg](http://www.sendtoprint.net/preview/textfile.jpg)看到图像

这是在 Java 1.7 上完成的，但也发生在 1.6 中。编码：

```
public void createBufferedImage ()
    {
    try
        {
        BufferedImage bi = new BufferedImage (1000, 1200, BufferedImage.TYPE_INT_RGB);
        Graphics2D gg = bi.createGraphics ();

        gg.setRenderingHint (RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
        gg.setRenderingHint (RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);

        gg.setBackground (Color.white);
        gg.fillRect (0, 0, bi.getWidth (), bi.getHeight ());

        gg.scale (3.0f, 3.0f);
        gg.translate (16, 16);

        String text = "The residents of Colorado and Washington state have voted to legalize "
                + "the recreational use of marijuana, and all hell is about to break "
                + "loose -- at least ideologically. The problem is that pot is still very much "
                + "illegal under federal law, and the Obama administration must decide whether "
                + "to enforce federal law in a state that has rejected the substance of that law."
                + "\n\n";

        DefaultStyledDocument doc = new DefaultStyledDocument ();

        MutableAttributeSet attr = new SimpleAttributeSet ();
        StyleConstants.setFontFamily (attr, "Arial");
        StyleConstants.setFontSize (attr, 9);
        StyleConstants.setForeground (attr, Color.black);

        MutableAttributeSet parAttr = new SimpleAttributeSet ();

        doc.insertString (0, text, attr);

        StyleConstants.setAlignment (parAttr, StyleConstants.ALIGN_LEFT);
        doc.setParagraphAttributes (0, doc.getLength (), parAttr, false);

        doc.insertString (doc.getLength (), text, attr);

        StyleConstants.setAlignment (parAttr, StyleConstants.ALIGN_CENTER);
        doc.setParagraphAttributes (doc.getLength () - text.length (), text.length (), parAttr, false);

        doc.insertString (doc.getLength (), text, attr);

        StyleConstants.setAlignment (parAttr, StyleConstants.ALIGN_RIGHT);
        doc.setParagraphAttributes (doc.getLength () - text.length (), text.length (), parAttr, false);

        doc.insertString (doc.getLength (), text, attr);

        StyleConstants.setAlignment (parAttr, StyleConstants.ALIGN_JUSTIFIED);
        doc.setParagraphAttributes (doc.getLength () - text.length (), text.length (), parAttr, false);

        JTextPane tc = new JTextPane ();
        tc.setBorder (BorderFactory.createLineBorder (Color.red, 1));
        tc.setDocument (doc);
        tc.setBackground (Color.white);
        tc.setLocation (0, 0);
        tc.setSize (new Dimension (300, 370));
        tc.paint (gg);

        System.out.println ("Writing file: " + new Date ().toString ());

        File file = new File ("C:\\Users\\Yishai\\Desktop\\text\\file.jpg");
        ImageIO.write (bi, "jpg", file);
        }
    catch (Exception e)
        {
        System.out.println (e.getMessage ());
        }
    } 
```

有什么想法我可以做些什么不同的事情吗？有 JTextPane 设置吗？文本缓存？任何事物？

谢谢。

# css - Google 地图 API 自动完成下拉样式，使用箭头导航时 :focus 不起作用

> ID：13386142
> 
> 赞同：0
> 
> 时间：2012-11-14T19:44:38.983
> 
> 标签：css, google-maps

基本上我想改变自动完成下拉菜单的样式。
( ) 里面有一个主 div`pac-container`和 divs `pac-items`。

我有以下CSS代码：

```
.pac-tem:hover, .pac-tem:focus {
    background-color: black;
} 
```

对于悬停它工作得很好。但是当我使用箭头导航时，它使用默认样式

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:57:17.567

我有同样的问题，我用css中的类解决了

```
.pac-selected {
    background-color: black; 
} 
```

# asp.net - asp:Menu 和 css 选定项

> ID：13386144
> 
> 赞同：1
> 
> 时间：2012-11-14T19:44:39.810
> 
> 标签：asp.net, css, menu, sitemap

我在配置我的 asp:Menu 时遇到问题。当我使用任何 CSS 时，菜单项不再被选中。我尝试了 3 个版本，每个版本都有它的缺点。

这个最适合css，但所选项目没有被选中。

```
<asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" Orientation="Horizontal" StaticEnableDefaultPopOutImage="false"DataSourceID="smdsMaster" StaticDisplayLevels="2">
    <LevelMenuItemStyles>
        <asp:MenuItemStyle ForeColor="White"/>
        <asp:MenuItemStyle ForeColor="White" />
    </LevelMenuItemStyles>
    <Items>
        <asp:MenuItem Text="Menu 1" NavigateUrl="~/Menu1.aspx" />
        <asp:MenuItem Text="Menu 2"  NavigateUrl="~/Menu2.aspx" >
            <asp:MenuItem Text="Submenu 2" NavigateUrl="~/Submenu2.aspx" />
        </asp:MenuItem>
    <asp:MenuItem Text="Menu 3" NavigateUrl="~/Menu3.aspx" />
    </Items>
</asp:Menu> 
```

这个显示已选中，但我不能使用图像作为菜单项的背景。如果我在其中添加 css，则选择将不再显示。并且子项始终存在。

```
<asp:Menu ID="NavigationMenu" runat="server" DataSourceID="smdsMaster" DynamicHorizontalOffset="0" StaticEnableDefaultPopOutImage="false"
 Orientation="Horizontal" StaticDisplayLevels="2" StaticSubMenuIndent="0px"  MaximumDynamicDisplayLevels="2" OnMenuItemDataBound="Menu1_MenuItemDataBound"
 ForeColor="White" BackColor="#EE7B00" StaticItemFormatString="<p align=center> {0}" DynamicItemFormatString="<p align=center> {0}">
    <StaticMenuItemStyle BackColor="#EE7B00" Width="110px" Height="31px" HorizontalPadding="0px" VerticalPadding="0px" />
    <StaticHoverStyle BackColor="#CCCC00" />
    <StaticSelectedStyle BackColor="#CCCC00" />
    <DynamicMenuItemStyle HorizontalPadding="0px" VerticalPadding="0px" Width="110px" Height="31px" />
    <DynamicHoverStyle BackColor="#CCCC00" />
    <DynamicMenuStyle BackColor="#EE7B00" />
    <DynamicSelectedStyle BackColor="#CCCC00" />
</asp:Menu> 
```

我怎样才能拥有两者：图像作为我的菜单项的背景，上面有文字，并选择了显示女巫项目。

谢谢。

* * *

更新

这是与之配套的 CSS：

```
.page .header_menu .menu
{
    !margin: 0px;
    padding: 0;
    list-style: none;
    background: none;
    z-index: 3;
}

.page .header_menu .menu li
{
    padding: 0;
    margin: 0;
    height: 31px;
    list-style: none;
    background-repeat: no-repeat;
    float: left;
    width: 110px;
}

.page .header_menu .menu li a
{
    display: block;
    text-decoration: none;
    text-align: center;
    height: 31px;
    width: 110px;
    padding-top: 5px;
    background-repeat: no-repeat;
    background-image: url(../Assets/btn-back-normal.gif);
    color: white;
    margin-top: -1px; /*Chrome = -16, IE = 0*/
    z-index: 1;
}

.page .header_menu .menu li a:hover
{
    background-image: url(../Assets/btn-back-over.gif);
    color: white;
    margin-top: -1px; /*Chrome = -16, IE = 0*/
    z-index: 1;
    width: 110px;
}

.page .header_menu .menu li a:active, .page .header_menu .menu li a:selected
{
    background-image: url(../Assets/btn-back-selected.gif);
    color: white;
    margin-top: -1px;
    z-index: 1;
    width: 110px;
}

.page .header_menu .menu:after
{
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
    z-index: 1;
    width: 110px;
} 
```

我也尝试设置这些，但只有第一个项目保持选中状态，无论实际选择哪个

```
<style type="text/css">
#NavigationMenu a{padding-right: 0px; padding-left: 0px; padding-top: 5px; height: 26px; background-color: #EE7B00;}
#NavigationMenu a.static{ padding-right: 0px; padding-left: 0px; padding-top: 5px; height: 26px; background-color: #EE7B00;}
#NavigationMenu a.static.selected{padding-right: 0px; padding-left: 0px; padding-top: 5px; height: 26px; background-color: #cccc00;}
#NavigationMenu a.dynamic{padding-right: 0px; padding-left: 0px; padding-top: 5px; height: 26px; background-color: #EE7B00;}
#NavigationMenu a.dynamic.selected{padding-right: 0px; padding-left: 0px; padding-top: 5px; height: 26px; background-color: #cccc00;}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:30:44.757

如果您运行 .aspx 页面并检查源代码，您会注意到菜单项`<a>`（超链接）标记有一个名为*a.selected.static*的选定类，您可以在代码中实现您自己的版本并通过应用`!important`到CSS 类。

下面的示例显示了一个带有图像菜单项的简单菜单，并在选中时用红色边框突出显示图像：

```
<head runat="server">
    <title>Menu</title>
    <style type="text/css">
        a.selected.static
        {
            border:2px solid red !important;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <asp:Menu ID="Menu1" runat="server" Orientation="Horizontal">
        <Items>
            <asp:MenuItem ImageUrl="~/Images/1.jpg" Text="Item 1" />
            <asp:MenuItem ImageUrl="~/Images/2.jpg" Text="Item 2" />
            <asp:MenuItem ImageUrl="~/Images/3.jpg" Text="Item 3" />
        </Items>
    </asp:Menu>
    </form>
</body> 
```

# objective-c - 带字符串的基本 If 语句

> ID：13386149
> 
> 赞同：-3
> 
> 时间：2012-11-14T19:45:00.193
> 
> 标签：objective-c

如果我编写以下函数，我会在第三行收到警告和错误。

```
int myYear (NSString *timevar)
{
if ([timevar isEqualToString:@"yr"]) {
    return ...
}
} 
```

Xcode 说

1.  语义问题：函数'If'的隐式声明......
2.  解析问题：预期为 ';' 表达后

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:45:52.693

这是因为`if`is 关键字，Objective C 中的关键字区分大小写^*。其他关键字也是如此，例如`int`.

```
// Use lowercase "i" in the "if"
if ([timevar isEqualToString:@"yr"]) {
    return ...
} 
```

* * *

^*这不是一个通用规则：例如，VB.NET 将同时接受`if`和`If`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:53:13.977

Objective-C 是区分大小写的语言，所有保留字必须小写，

语义问题：函数'If'的隐式声明......：
解析问题：预期';' 在表达式之后，
因为您编写`If`而不是`if`编译器假设您正在调用一个名为`If`. 因此它需要一个分号`;`。

# ruby - 在 Ruby 中使用 xPath 选择组中的段落

> ID：13386154
> 
> 赞同：2
> 
> 时间：2012-11-14T19:45:51.223
> 
> 标签：ruby, xpath, screen-scraping, web-scraping, nokogiri

我目前正在使用 Ruby 和 xPath 开发一个小型网络抓取项目。不幸的是，该网站的结构非常糟糕，这导致我遇到了一个小问题：

```
<h3>Relevant Headline</h3>
<p class="class_a class_b">Content starts in this paragraph...</p>
<p class="class_a ">...but this content belongs to the preceding paragraph</p>
<p class="class_a class_b">Content starts in this paragraph...</p>
<p class="class_a ">...but this content belongs to the preceding paragraph</p>
<h3>Some other Headline</h3> 
```

如您所见，有 2 个 h3-Tags 构成了几个 p-tags。我希望选择所有带框的 p-tags。我已经找到了以下 xPath 来做到这一点：

```
h3[contains(text(),"Relevant")]/following-sibling::p[1 = count(preceding-sibling::h3[1] | ../h3[contains(text(),"Relevant")])] 
```

但现在困难来了：上面的这两个段落属于一起。带有 class_b 的段落（第一个）开始一个新的数据条目，下一个（第二个）属于该条目。3和4是一样的。问题是：有时 3 个段落属于一起，有时 4 个段落属于一起，但大多数时候有一对段落属于一起。

如何按组选择这些内部段落并将它们组合成 Ruby 中的一个字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T22:29:00.877

如果你不介意使用 xpath 和 nokogiri 的组合，你可以这样做：

```
paragraph_text = Array.new
doc.xpath('//p[preceding-sibling::h3[1][contains(text(), "Relevant")]]').each do |p|
    if p.attribute('class').text.include?('class_b')
        paragraph_text << p.content
    else
        paragraph_text[-1] += p.text
    end
end
puts paragraph_text
#=> ["Content starts in this paragraph......but this content belongs to the preceding paragraph",  "Content starts in this paragraph......but this content belongs to the preceding paragraph"] 
```

基本上 xpath 用于获取段落标签。然后，使用 nokogiri/ruby 遍历段落并制定字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T02:06:48.497

可以使用 xpath 完成，但我认为使用 slice_before 将它们分组更容易：

```
doc.search('*').slice_before{|n| n.name == 'h3'}.each do |h3_group|
  h3_group.slice_before{|n| n[:class] && n[:class]['class_b']}.to_a[1..-1].each do |p_group|
    puts p_group.map(&:text) * ' '
  end
end 
```

**更新**

使用 css 的另一个选项：

```
doc.search('p.class_b').each do |p|
  str, next_node = p.text, p
  while next_node = next_node.at('+ p:not([class*=class_b])')
    str += " #{next_node.text}"
  end
  puts str
end 
```

# asp.net - 如何将 Facebook 页面点赞与网页点赞联系起来？

> ID：13386155
> 
> 赞同：0
> 
> 时间：2012-11-14T19:45:51.270
> 
> 标签：asp.net, facebook, seo, facebook-like

我有一个网页，我在其中放置了一个赞按钮。现在我还为这个网站创建了一个 facebook 页面，但问题是喜欢是分开的吗？我如何连接它们。

这是网站： http: [//www.biss.se/](http://www.biss.se/) 这是 Facebook 网站：[http ://www.facebook.com/www.biss.se?skip_nax_wizard=true](http://www.facebook.com/www.biss.se?skip_nax_wizard=true)

# javascript - 如何在 Web SQL 数据库中插入多行？

> ID：13386166
> 
> 赞同：6
> 
> 时间：2012-11-14T19:46:29.530
> 
> 标签：javascript, html, web-sql

我有一个包含多行数据的 JavaScript 对象，我想将它插入到 web sql 数据库中。这是我的代码的样子。

```
for(i in rows)
{
    (function(row){
        db.transaction(function(tx) {
            tx.executeSql("INSERT INTO my_table (id, name, parent_id) VALUES (?, ?, ?)",
                [ row.id, row.name, row.parent_id ], onSuccess, onError
            );
        });
    })(rows[i]);
} 
```

我对此的问题是：

1.  这可以通过在内部移动外循环来完成`db.transaction`。会更好吗？为什么？
2.  是否可以在单个查询中添加多行，如单个 MySQL 中的多个值`INSERT`？或者我不应该担心这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T01:59:25.960

这可以通过在 db.transaction 中移动外循环来完成。会更好吗？为什么？

> > 是的。好多了。1）创建交易并不便宜。2）循环异步通常不好。

是否可以在单个查询中添加多行，如单个 MySQL INSERT 中的多个值？或者我不应该担心这个。

> > 不用担心。多行解决方法是语法糖。没有性能优势。最好在一笔交易下循环它。

再次不要循环executeSql，它是异步的。

# python - 如何按名称选择列？(Python & SQLite3)

> ID：13386172
> 
> 赞同：9
> 
> 时间：2012-11-14T19:46:46.447
> 
> 标签：python, sqlite

目前我有以下代码：

```
c.execute("SELECT * FROM table")
for row in c.fetchall():
    print row[0]
    print row[1] 
```

但是，我更改了表的结构，现在我必须更改索引值以表示此更改。有没有办法代替使用列名？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T19:51:12.800

有关 sqlite3 模块，请参阅文档中的[行对象](http://docs.python.org/2/library/sqlite3.html#row-objects)。如果你使用`sqlite3.Row`row_factory 你会得到一个比普通元组稍微强大的对象。我想它的开销略高，因此不是默认行为。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-14T20:03:44.660

因此，建议在执行以下操作时始终使用明确的列名`SELECT`：

```
c.execute("SELECT color, fluffiness FROM table")
for row in c.fetchall():
    print row[0]         #  <-- is always guaranteed to be the color value
    print row[1] 
```

# java - 如何从从java到jni的bytebuffer写入和读取

> ID：13386176
> 
> 赞同：9
> 
> 时间：2012-11-14T19:47:04.287
> 
> 标签：java, android, c++, android-ndk, java-native-interface

我需要有关我的 android 项目的帮助。我想将一个缓冲区从 java 传递给 jni，我的 C++ 代码将填充数据。然后java会将它们显示在屏幕上。我对 C++ 不太熟悉，也不知道如何写入缓冲区。

这就是我得到的。在java中

```
ByteBuffer bb = ByteBuffer.allocateDirect(216);
        IssmJni.processBuffer(bb); 
```

本机方法

```
public static native void processBuffer(ByteBuffer bb); 
```

我不使用 jni_onload，所以在 C++ 中没有 javah

```
static void fillBuffer(JNIEnv *env, jclass clazz, jobject buf)
    {
        double *dBuf = env->GetDirectBufferAddress(env, buf);

    } 
```

我卡在这里，我可以做双*dbuf吗？还是必须是 char*？

假设我想向这个dbuf写入1,2,3,4,5，我该怎么做？我在想 dbuf.put(1); ... dbuf.put(5) 但它不起作用。在填充它之后，我只是在java中调用 bb.get(position) 吗？

请有人为我澄清一下，示例将不胜感激谢谢

这是我的本地方法表

静态 JNINativeMethod 方法表 [] = {

```
{"fac"      ,     "(J)J" , (void *) factorial},
    {"getBuffer",     "()[D" , (void *) getBufferNative},
    //{"processBuffer", "(Ljava/nio/ByteBuffer)V", (void *) fillBuffer}}; 
```

除最后一个外，其他两个工作正常。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T20:41:47.933

> 我不使用 jni_onload，所以在 C++ 中没有 javah

这可能与您的问题无关，但您必须做其中之一。您要么需要在 onLoad 函数中进行 Java 到本机的方法映射，要么使用 javah 生成 JNI 可以在运行时获取的方法签名。否则，您的本机方法将永远不会被调用。

但是，如果您的本机方法被正确调用，那么无论您在做什么都可能没问题。

> 我卡在这里，我可以做双dbuf吗？还是必须是字符？

该函数的返回值实际上是 a `void*`，因此您可以将其转换为您想要的任何指针类型，因为它只是一个内存地址。但是，直接缓冲区的实际数据类型将是`jbyte`，它是 的 typedef `signed char`，因此以下可能是最好的：

```
jbyte *dBuf = env->GetDirectBufferAddress(env, buf); 
```

> 假设我想向这个dbuf写入1,2,3,4,5，我该怎么做？

C/C++ 中访问数组中的值的符号是 [] 符号，即：

```
jbyte *dBuf = env->GetDirectBufferAddress(env, buf);

dBuf[0] = 63;
dBuf[1] = 127;
// ...and so on... 
```

> 在填充它之后，我只是在java中调用 bb.get(position) 吗？

是的，您可以使用访问器方法`ByteBuffer`访问您从本机代码写入的数据。

# r - 如何在 R 中创建优势比和 95 % CI 图

> ID：13386177
> 
> 赞同：4
> 
> 时间：2012-11-14T19:47:05.197
> 
> 标签：r, plot

我估计了 4 个滞后期内六种污染物对应的 95% CI 的优势比。如何创建类似于 R 中附图的垂直图？下图是在 SPSS 中创建的。产生该图的样本数据如下：

```
lag pollut  or  lcl ucl
0   CO  0.97    0.90    1.06
0   PM10    1.00    0.91    1.09
0   NO  0.97    0.92    1.02
0   NO2 1.01    0.89    1.15
0   SO2 0.97    0.85    1.11
0   Ozone   1.00    0.87    1.15
1   CO  1.03    0.95    1.10
1   PM10    0.93    0.86    1.01
1   NO  1.01    0.97    1.06
1   NO2 1.08    0.97    1.20
1   SO2 0.94    0.84    1.04
1   Ozone   0.94    0.84    1.04
2   CO  1.09    1.02    1.16
2   PM10    1.04    0.96    1.13
2   NO  1.04    1.00    1.08
2   NO2 1.07    0.96    1.18
2   SO2 1.05    0.95    1.17
2   Ozone   0.93    0.84    1.03
3   CO  0.98    0.91    1.06
3   PM10    1.14    1.05    1.24
3   NO  0.99    0.95    1.04
3   NO2 1.01    0.91    1.12
3   SO2 1.11    1.00    1.23
3   Ozone   1.00    0.90    1.11 
```

![在 SPSS 中创建的优势比和 95 % CI 图](../Images/afc76e519bbb3bdbb1c53992f5394b8a.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T21:39:41.050

您也可以使用 ggplot2 执行此操作。代码稍微短一些：

```
 dat <- read.table("clipboard", header = T)
 dat$lag <- paste0("L", dat$lag)

 library(ggplot2)

 ggplot(dat, aes(x = pollut, y = or, ymin = lcl, ymax = ucl)) + geom_pointrange(aes(col = factor(lag)), position=position_dodge(width=0.30)) + 
 ylab("Odds ratio & 95% CI") + geom_hline(aes(yintercept = 1)) + scale_color_discrete(name = "Lag") + xlab("") 
```

![在此处输入图像描述](../Images/fba176e069cc3d4d8cb6a386692102fc.png)

编辑：这是一个更接近 SPSS 图的版本：

```
ggplot(dat, aes(x = pollut, y = or, ymin = lcl, ymax = ucl)) + geom_linerange(aes(col = factor(lag)), position=position_dodge(width=0.30)) +
geom_point(aes(shape = factor(lag)), position=position_dodge(width=0.30)) + ylab("Odds ratio & 95% CI") + geom_hline(aes(yintercept = 1)) + xlab("") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T21:07:21.103

假设您的数据在`datf`...

我会先把它分类成你想要的顺序。

```
datf <- datf[order(datf$pollut, datf$lag), ] 
```

您需要在每个实验室分组之前和之后都有一个空格，所以我会在其中添加一些额外的行，即 NA。这让它变得更容易，因为这样你的绘图调用中就会自动出现空白。

```
datfPlusNA <- lapply(split(datf, datf$pollut), function(x) rbind(NA, x, NA))
datf <- do.call(rbind, datfPlusNA) 
```

现在您已经对 data.frame 进行了排序，并且有了额外的 NA，绘图就很容易了。

```
nr <- nrow(datf)  # find out how many rows all together
with(datf, {# this allows entering your commands more succinctly
    # first you could set up the plot so you can select the order of drawing
    plot(1:nr, or, ylim = c(0.8, 1.3), type = 'n', xaxt = 'n', xlab = '', ylab = 'Odds Ratio and 95% CI', frame.plot = TRUE, panel.first = grid(nx = NA, ny = NULL))
    # arrows(1:nr, lcl, 1:nr, ucl, length = 0.02, angle = 90, code = 3, col = factor(lag)) 
    # you could use arrows above but you don't want ends so segments is easier
    segments(1:nr, lcl, 1:nr, ucl, col = factor(lag))
    # add your points
    points(1:nr, or, pch = 19, cex = 0.6)
    xLabels <- na.omit(unique(pollut))
    axis(1, seq(4, 34, by = 6) - 0.5, xLabels)
})
abline(h = 1.0) 
```

有一些软件包可以让这种事情变得更容易，但如果你能做到这一点，你就可以开始做任何你能想象到的图表。

![在此处输入图像描述](../Images/f0cde91402160e46d9a1bc1bdf11b73f.png)

# python - 从 python 调用时，udisks FilesystemUnmount 似乎不存在

> ID：13386180
> 
> 赞同：3
> 
> 时间：2012-11-14T19:47:14.570
> 
> 标签：python, dbus

我正在尝试卸载使用 FilesystemMount 安装的文件系统，但我不断收到 UnknownMethod 异常。我已经验证我可以通过 D-Feet 调用 Device 接口上的方法，但是尝试直接通过 dbus 进行调用似乎根本不起作用。我尝试使用以下参数：

*   ''
*   没有任何
*   []
*   ['']

下面的代码演示了这个问题：

```
import dbus

bus = dbus.SystemBus()
proxy = bus.get_object('org.freedesktop.UDisks', '/dev/fd0')
dev = dbus.Interface(proxy, 'org.freedesktop.UDisks.Device')
dev.FilesystemUnmount(['force']) 
```

例外：

`dbus.exceptions.DBusException: org.freedesktop.DBus.Error.UnknownMethod: Method "FilesystemUmount" with signature "as" on interface "org.freedesktop.UDisks.Device" doesn't exist`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:22:11.867

事实证明，问题在于 FilesystemUnmount 只会采用 udisks 分发的 ObjectPath。因此，通过添加一个检查然后查找它，我让它工作了。请参阅下面的代码。

```
import dbus

path = '/dev/fd0'

bus = dbus.SystemBus()

if not isinstance(path, dbus.ObjectPath):
    manager_obj = bus.get_object('org.freedesktop.UDisks',
                                 '/org/freedesktop/UDisks')
    manager = dbus.Interface(manager_obj, 'org.freedesktop.UDisks')
    path = manager.FindDeviceByDeviceFile(path)

proxy = bus.get_object('org.freedesktop.UDisks', path)
dev = dbus.Interface(proxy, 'org.freedesktop.UDisks.Device')
dev.FilesystemUnmount('') 
```

# android - 自定义主题和 sherlockActionBar

> ID：13386181
> 
> 赞同：0
> 
> 时间：2012-11-14T19:47:16.757
> 
> 标签：android, actionbarsherlock, android-theme

我正在做一个个人主题以在 2.3 android 中使用全息小部件。

我这样做了：

```
 <resources xmlns:android="http://schemas.android.com/apk/res/android">

  <style name="AppThemes" parent="@style/Theme.Sherlock">

    <item name="android:editTextStyle">@style/EditTextAppTheme</item>

    <item name="android:checkboxStyle">@style/CheckBoxAppTheme</item>

    <item name="android:radioButtonStyle">@style/RadioButtonAppTheme</item>

    <item name="android:buttonStyle">@style/ButtonAppTheme</item>

    <item name="android:imageButtonStyle">@style/ImageButtonAppTheme</item>

    <item name="android:spinnerStyle">@style/SpinnerAppTheme</item>

    <item name="android:dropDownSpinnerStyle">@style/SpinnerAppTheme.DropDown</item>

    <item name="android:spinnerDropDownItemStyle">@style/SpinnerDropDownItemAppTheme</item>

  </style>

</resources> 
```

问题是小部件没有采用正确的样式，而是采用了默认样式。我试图在编辑文本中强制分配 @style/EditTextAppTheme 并且它有效..所以问题是主题不适用。

任何想法？

更新：主题适用并且工作良好..独奏问题是对话框中的一些编辑文本，显示标准主题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:54:10.330

要在 App 及以下版本中获取全息主题样式`API 10`，您可以使用`HoloEverywhere`. 它与`ActionBarSherlock`. `ActionBarSherlock`包含在一个子项目中。[https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:57:19.573

如果您想使用自定义主题，您必须在应用程序主题中设置这些样式属性。然后通过在清单中定义它或在 onCreate() 方法中以编程方式设置它来将此主题应用于整个 App 或单个 Activity。

例如（对于 ABS）：

```
<style name="Theme.myStyle" parent="Theme.Sherlock">
<item name="android:editTextStyle">@style/EditTextAppTheme</item>

<item name="android:checkboxStyle">@style/CheckBoxAppTheme</item>

<item name="android:radioButtonStyle">@style/RadioButtonAppTheme</item>

<item name="android:buttonStyle">@style/ButtonAppTheme</item>

<item name="android:imageButtonStyle">@style/ImageButtonAppTheme</item>

<item name="android:spinnerStyle">@style/SpinnerAppTheme</item>

<item name="android:dropDownSpinnerStyle">@style/SpinnerAppTheme.DropDown</item>

<item name="android:spinnerDropDownItemStyle">@style/SpinnerDropDownItemAppTheme</item>
</style> 
```

然后将此主题设置为您的应用程序或清单中的活动：

```
 android:theme="@style/Theme.myStyle" 
```

或以编程方式：

```
setTheme(R.style.Theme.myStyle); 
```

# playframework - 播放框架上传文件不起作用

> ID：13386183
> 
> 赞同：2
> 
> 时间：2012-11-14T19:47:41.687
> 
> 标签：playframework, playframework-2.0

我想上传一个 CSV 文件并从那里获取详细信息以填充 MySQL 数据库。我正在使用播放！带有 Java 的框架 2，但我在实现此解决方案时遇到了困难。

这是我的 Java 代码

```
 public static Result uploadfile() {
         File fl = request().body().asRaw().asFile();

          if (fl != null) {

            return ok("File uploaded");
          } else {
            flash("error", "Missing file");
            return redirect(routes.Application.index());    
          } 
```

这是我的 Upload.Scala.html 代码

```
 @(uploadForm: Form[Application.upl])

   @import helper._

   @main("Upload file") {
      @form(action = routes.Application.uploadfile) {

         <input type="file" name="flname">

         <p>
            <input type="submit" value="upload">
         </p>

      }
   } 
```

最后是我的路线文件

```
POST     /uploadfile                controllers.Application.uploadfile() 
```

一旦我点击上传，就会发生执行异常，说`request().body().asRaw().asFile()`实际上是`null`！

> [空指针异常：空]

任何想法我做错了什么？

==================================================== ================================== 好的，所以我当前的代码如下在application.java上

```
 public static Result uploadfile() {
  play.mvc.Http.MultipartFormData body = request().body().asMultipartFormData();
    FilePart flpart = body.getFile("fl") ;
    if (flpart != null) {

       File file = flpart.getFile();
       ImportCSV impCSV = new ImportCSV();
       try{
           if (file.exists()) 
           {
               BufferedReader br = new BufferedReader( new FileReader(file));
               System.out.println(file.getName() + " - " + file.getAbsolutePath());
               impCSV.importCSV(br);
           }
           else
           {
               System.out.println("File not found!");
               return redirect(routes.Application.upload()); 
           }
       }
       catch(Exception e)
       {
           System.err.println("Buffering file " + file.getName() +": " + e.getMessage());

       }
       return ok("File uploaded");
    } else {
       flash("error", "Missing file");
     return redirect(routes.Application.index());    
    }
} 
```

在 ImportCSV.java （扩展模型）上

```
public static void importCSV( BufferedReader br) 
{

    parseFile(br);

    if(vals!=null)
    {
        Student student = new Student();
        List<Student> newStudents;
        newStudents = GetStudentDetails(vals);
        try{
            student.insertStudentList(newStudents);
        }
        catch(Exception e)
        {
            System.err.println("student inserting Error: " + e.getMessage());

        }

    }
}

 static void parseFile( BufferedReader br) {
    try {

          String line = "";
          StringTokenizer token = null;
          int lineNum = 0, tokenNum = 0;

          List<values> CSVvalues = new LinkedList<values>();
          values LnValues = new values();
          while((line = br.readLine()) != null) {
                lineNum++;

                // break comma separated file line by line
                token = new StringTokenizer(line, ",");
                LnValues = new values();
                while(token.hasMoreTokens()) {
                      tokenNum++;
                      switch(tokenNum)
                      {
                        //Student ID
                          case 0:
                          {
                              LnValues.setStudID(Long.getLong(token.nextToken()));
                          }
                          //Student Name
                          case 1:
                          {
                              LnValues.setStudName(token.nextToken());
                          }
                          //Student DoB
                          case 2:
                          {
                              LnValues.setStudDoB(Date.valueOf(token.nextToken()));
                          }
                          //Class
                          case 3:
                          {
                              LnValues.setCl(token.nextToken());
                          }
                          //Year
                          case 4:
                          {
                              LnValues.setYear(Integer.parseInt(token.nextToken()));
                          }
                          //Quarter
                          case 5:
                          {
                              LnValues.setQuarter(token.nextToken());
                          }
                          //Maths Grade
                          case 6:
                          {
                              LnValues.setGradeM( Float.parseFloat(token.nextToken()));
                          }
                          //Computer Science Grade
                          case 7:
                          {
                              LnValues.setGradeCS(Float.parseFloat(token.nextToken()));
                          }
                          //Literature grade
                          case 8:
                          {
                              LnValues.setGradeL( Float.parseFloat(token.nextToken()));
                          }                           

                      }

                }
                CSVvalues.add(LnValues);
                tokenNum = 0;
          }

          vals = CSVvalues;
    } catch(Exception e) {
          System.err.println("Parsing file  Error: " + e.getMessage());

    } 
```

一旦我通过缓冲阅读器，数据为空。一开始我尝试将文件（File fl）发送到参数，但我也得到了空错误。我尝试了在某些情况下显示的 @Util 注释，但编译器抱怨无法识别它！我愿意接受建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:04:02.980

这里有关于如何执行此操作的说明： [http ://www.playframework.org/documentation/2.0/JavaFileUpload](http://www.playframework.org/documentation/2.0/JavaFileUpload)

`request().body().asRaw().asFile();`仅当您使用 ajax 上传文件时才有效，如果您使用的是正常`POST`请求，则应尝试使用文档中提出的解决方案

```
public static Result upload() {
    MultipartFormData body = request().body().asMultipartFormData();
    FilePart picture = body.getFile("picture");
    if (picture != null) {
       String fileName = picture.getFilename();
       String contentType = picture.getContentType(); 
       File file = picture.getFile();
       return ok("File uploaded");
    } else {
       flash("error", "Missing file");
       return redirect(routes.Application.index());    
    }
} 
```

另请注意，您必须在此处使用正确的表单格式：

`@form(action = routes.Application.upload, 'enctype -> "multipart/form-data")`

# java - 设计相关查询

> ID：13386184
> 
> 赞同：0
> 
> 时间：2012-11-14T19:47:46.070
> 
> 标签：java, oop

我正在设计一个应用程序，我必须在其中读取用户提供的一个文件并计算操作总数。我有两种方法可以实现这一目标：

1.  创建包含总操作的静态变量。这种方法的好处是，在任何需要根据总操作执行一些计算的地方，我都不需要一次又一次地调用函数，它将从文件中读取所有记录并计算操作数。

2.  创建通过循环文件返回操作数的函数。

选项 1 性能更好，但静态变量违反 OOP 原则。请让我知道是否有任何其他方法可以解决此问题以及我的理解是否正确。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:09:59.017

这是一种“函数式编程”技术，但我建议您使用签名编写函数：

```
int numberOfOperations(String line)
List<String> linesForFile(File file) 
```

然后是这样的：

```
int totalOperations = 0;
for(String line : linesForFile(file)){
  totalOperations += numberOfOperations(line);
}
return totalOperations; 
```

这样，您就拥有易于测试的单个功能，您不会将“计数操作”的逻辑域与特定源（文件）等耦合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:59:44.913

您可以计算具有 int 类型属性的类型实例`_operationCounter`的方法中的操作数。`OperationCounter`这个实例本身就是任何类的任何其他实例的属性（可能有几个）。为确保您只计算一次，请`OperationCounter`提出两个操作 :`void makeCount( File in )`和`int getCount()`. 一个糟糕的设计是计入`int getCount()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:01:32.440

也许你应该把用户“crnlx”给出的建议和你的第二个选项放在一起。

拥有一个实例变量并将其值设置为函数返回的值。

所以如果你的方法签名是 `public void int getNumOfOperations(File fileName);`

您将执行以下操作。

```
int numOfOperations = getNumOfOperations(); 
```

这样您就可以在您的类中再次重用该变量，而无需再次调用该函数。

# plasticscm - Mac上的塑料单片机外部差异

> ID：13386185
> 
> 赞同：1
> 
> 时间：2012-11-14T19:47:48.103
> 
> 标签：plasticscm, araxis

我正在尝试将 Araxis diff 设置为我在 Mac 上的外部 diff 工具。

命令行参考： [http ://www.araxis.com/merge_mac/command_line.html](http://www.araxis.com/merge_mac/command_line.html)

我在 Plastic 的 Preferences 面板的 Diff Tool Configuration 中设置了一个 diff 工具，设置如下：

外部差异工具（已选择） 路径：/usr/local/bin/compare -wait @sourcesfile @destinationfile 将此工具用于文本文件（已选择）

我还尝试设置特定的扩展名并删除所有其他差异工具，但无济于事。

无论设置如何，都会显示内部差异工具。

请告知我接下来的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:40:24.190

您必须使用优先级箭头将新的差异和合并工具设置在第一个位置。如果差异或合并工具在顶部，并且没有将要使用的文件类型限制，请确保您的新 Araxis 合并工具在顶部。

为了更详细地配置 diff 工具，我建议您使用以下配置：

```
"/usr/local/bin/compare"  /wait /2   /title1:"@sourcesymbolic" /title2:"@destinationsymbolic" @sourcefile @destinationfile 
```

对于合并工具，您可以使用以下工具：

```
"/usr/local/bin/compare" /wait /a3 /3 /title1:"@sourcesymbolic" /title2:"Workspace version" /title3:"@basesymbolic" @sourcefile @destinationfile @basefile @output 
```

您将拥有可用于合并和文件差异的这个新工具。分支，变更集......将保持内置的。

# javascript - 将变量传递给正则表达式

> ID：13386188
> 
> 赞同：0
> 
> 时间：2012-11-14T19:47:49.120
> 
> 标签：javascript, regex

我有一个正则表达式

```
var p = /\bj[^\b]*?\b/gi; 
```

我需要将“j”设为变量值，但是当我执行以下操作时；-

```
var p = new RegExp('\\b'+'${0}'+'[^\\b]*?\\b', 'gi'); 
```

我得到错误 -

```
Uncaught SyntaxError: Invalid regular expression: /\b${0}[^\b]*?\b/: Nothing to repeat 
```

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:52:25.687

我认为您想要以下内容：

```
var p = new RegExp('\\b'+${0}+'[^\\b]*?\\b', 'gi'); 
```

你周围的引号`${0}`只是用这些字符构造一个字符串，而不是插入变量值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:52:12.183

像您所做的那样将变量放在引号内`'${0}'`会导致将其视为字符串。如果您从它周围删除引号，那么它将被视为一个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:01:59.410

对不起，伙计们，我应该更清楚一点，值“{0}”是一个将被替换的标记，而不是一个变量。发生错误是因为“{”和“}”是正则表达式中的特殊字符。

所以改变令牌模式解决了这个问题

```
var p = new RegExp('\\b'+'%text%'+'[^\\b]*?\\b', 'gi'); 
```

# php - PHP删除逗号后的所有内容（包括逗号）

> ID：13386191
> 
> 赞同：0
> 
> 时间：2012-11-14T19:47:57.943
> 
> 标签：php, strip

我只是无法理解这个语法。我有一个数组`$foo`，我在一个函数中调用它：（`wp_list_pages($foo);`这是一个 wordpress 站点）。

我在网上找到了这段代码，但无法让它工作......我已经尝试了这两种方法，但它似乎没有做任何事情。任何人都可以帮忙吗？

```
 <?php $mystring = $foo;
list ($before,$after) = split (',', $mystring);
echo $before; 
?>
<?php wp_list_pages( $foo ); ?> 
```

或这个：

```
<?php $has_comma = (stristr($foo, ",")>-1) ? 1 : 0;
if ($has_comma) {
list ($before,$after) = split (',', $foo);
$foo = $before;
} ?>

<?php wp_list_pages( $foo ); ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:52:31.090

```
if (false !== ($pos = strpos($foo, ','))) {
    $foo = substr($foo, 0, $pos);
} 
```

或者如果你确定总是昏迷，它可以更简单：

```
$foo = substr($foo, 0, strpos($foo, ',')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:53:55.957

`split()`已弃用，请尝试使用`preg_split()`，或者`str_split()`，请参阅 php 手册：[http ://www.php.net/manual/ro/function.split.php](http://www.php.net/manual/ro/function.split.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:51:41.537

假设 $foo 中有一些字符串，例如“这是一个简短而无聊的句子”，那么：

```
list($before,$after) = split(',',$mystring)
//$before => "This is a short" 
//$after => "boring sentence"
echo $before; //prints "This is a short" 
```

如果您没有看到这种行为，您需要确保 $foo 中有一些字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T19:53:25.650

这个例子有点太复杂了。这是一个更简单的：

```
<?php 
$mystring = "a,b,c,d egg";
$n = strpos($mystring, ',');
echo substr($mystring, 0, $n)
?> 
```

这只是在 $mystring 中找到第一个“，”的索引并获取字符串直到该点。

如果你想要一个基于数组的例子，这里是一个使用explode的例子，因为不推荐使用split：

```
<?php 
$mystring = "a,b,c,d egg";
$array = explode(',', $mystring);
echo $array[0];
?> 
```

因此，explode 在 "," 上拆分 $mystring，以便每个由 "," 分隔的项目成为其自己的元素。自然，第一项是第 0 个索引，所以这就是您在逗号后截断的方式。

# iphone - Iphone：应用程序动作第一次慢然后快

> ID：13386195
> 
> 赞同：0
> 
> 时间：2012-11-14T19:48:18.217
> 
> 标签：iphone, opengl-es, performance

我注意到第一次完成的每一个用户界面操作都很慢。下一次同样的动作很快。

它处理 sdk 嵌入式功能，例如相机，或我自己的功能，例如我的 opengl 按钮动画。

我已经读过构建运行可以解决问题，但就我而言，它没有。有人遇到过类似的现象吗？你是怎么解决的？

干杯，斯蒂芬

# installation - 在 Mathematica 中安装一个完整的包

> ID：13386196
> 
> 赞同：0
> 
> 时间：2012-11-14T19:48:26.793
> 
> 标签：installation, package, wolfram-mathematica

我下载了一个 Mathematica 包（它被称为“automaticUnits” - [http://library.wolfram.com/infocenter/MathSource/7655/](http://library.wolfram.com/infocenter/MathSource/7655/)）。我可以使这些功能正常工作，但我想安装所有文档和教程，以便在需要时可以在帮助菜单中查找。

安装功能似乎不太好用，为此...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:11:33.890

1.  下载[http://library.wolfram.com/infocenter/MathSource/7655/](http://library.wolfram.com/infocenter/MathSource/7655/)压缩文件。
2.  从上面的文件夹中提取 AutomaticUnits 到`Applications`下面`$UserBaseDirectory`，例如`C:\Users\me\AppData\Roaming\Mathematica\Applications\`，

    ```
    In[1]:= $UserBaseDirectory
    Out[1]= C:\Users\me\AppData\Roaming\Mathematica 
    ```

    所以现在它在我的窗户上看起来像这样

    ![带有新包的资源管理器](../Images/960f3882b8ba6d22f032213c108c3c77.png)

3.  从数学

    ```
    Needs["AutomaticUnits`"]
    ?AutomaticUnits`* 
    ```

    这是结果

    ![输出](../Images/f474d46043cb0a7f0c40fb39ea5aa2cb.png)

# objective-c - 术语：方法在协议中___（目标 C）

> ID：13386197
> 
> 赞同：2
> 
> 时间：2012-11-14T19:48:28.497
> 
> 标签：objective-c, ios, terminology

只是一个关于术语的快速问题：在下面的示例中（来自 Apple 文档），我们会说这些方法是“定义的”、“声明的”还是其他什么？

```
protocol XYZPieChartViewDataSource
- (NSUInteger)numberOfSegments;
- (CGFloat)sizeOfSegmentAtIndex:(NSUInteger)segmentIndex;
@optional
- (NSString *)titleForSegmentAtIndex:(NSUInteger)segmentIndex;    
@end 
```

例如，“您可以在第 2 行看到 numberOfSegments 方法是**__**。因此，符合此协议的类必须实现此方法。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:55:43.393

> 我们会说这些方法是“已定义”、“已声明”还是其他？

宣布。

# java - Maven 基于文件更改构建

> ID：13386198
> 
> 赞同：15
> 
> 时间：2012-11-14T19:48:29.780
> 
> 标签：java, windows, maven, build-process, maven-3

是否有任何东西可以帮助以下任何一个/两个？

*   当该模块中的文件更改时执行 Maven 安装
*   *对模块及其依赖*项执行 Maven 安装（***如果****它们已更改）*

 **我很确定我也听说过构建依赖项的 Maven 选项，但很难从谷歌搜索中找到任何东西......

也许这不会是特定于 Maven 的，而是涉及特定于操作系统的文件监视工具，如果是这样，我将有兴趣了解 Windows (XP) 的工具。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-03T09:39:24.777

即使答案来晚了，我也在寻找同样的东西，我找到了[https://github.com/rzymek/watcher-maven-plugin](https://github.com/rzymek/watcher-maven-plugin)。也许其他人会寻找同样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T14:40:45.553

我尝试了@Adrian 的解决方案，但无法正常工作。

我找到了这个 maven 包[https://github.com/fizzed/maven-plugins#watcher-fizzed-watcher-maven-plugin](https://github.com/fizzed/maven-plugins#watcher-fizzed-watcher-maven-plugin)，它将监视文件更改，并且我能够让它很快工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-14T20:01:48.923

要构建模块及其依赖项，请使用： mvn -pl :module -amd

自动构建通常由版本系统（如 subversion 或 git）触发。然后你可以使用像 Jenkins 这样的持续集成工具。

还有 mvn reactor:make-scm-changes，它检测哪些模块具有本地更改与配置的 scm 系统。**

# c# - 在客户端使用 Web API

> ID：13386199
> 
> 赞同：0
> 
> 时间：2012-11-14T19:48:34.100
> 
> 标签：c#, asp.net, json, asp.net-web-api, json.net

我在 mvc4 中创建了一个简单的 web api 控制器，其中包含 4 个方法（每个 CRUD 操作一个）。我可以使用 fiddler 来测试我的控制器中的方法是否有效。

我现在正在尝试进行单元测试以证明这些工作。我已经设法将我的客户端对象序列化为 json 格式，但是现在我如何使用这个 json 字符串来实际调用我的方法？

如果有帮助，我将使用 Json.NET 来序列化我的客户端对象——尽管我认为这个扩展实际上并没有处理它到服务器的传递和检索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:51:58.313

您的单元测试应该针对控制器编写 - 因此您不需要发出实际的 HTTP 请求来对您的 Web API 代码进行单元测试，您只需调用这些方法。

从设计的角度来看，如果你想要一个宁静的 Web API，客户端应该能够发送标准的 HTTP 消息，而无需序列化请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:16:14.583

**nick_w**此处提供的代码是正确的。你需要使用`HttpClient`对象。正如**史蒂夫芬顿**所提到的，要创建单元测试，您不想这样做 - 而是直接针对控制器进行测试。但是对于功能测试，您可以做到。我做过同样的事情。我已经创建了辅助类，所以我只需要调用 Http 辅助方法之一，这取决于我所做的是 GET 还是 POST 等。该帮助程序使用泛型类型，因此它可以处理任何传递的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:24:44.990

这是我用来将对象发布到 restful Web API 的那种方法：

```
HttpResponseMessage response;
HttpClient client = new HttpClient();
client.BaseAddress = new Uri("http://url_to_service");
client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

var responseTask = client.PostAsJsonAsync("api/resource/somethingelse", someObjectToPost).Result;
responseTask.Wait();
response = responseTask.Result;

if (response.IsSuccessStatusCode)
{
    var contentTask = response.Content.ReadAsAsync<SomeResponseType>();
    contentTask.Wait();
    SomeResponseType responseContent = contentTask.Result;
}
else
{
    //Handle error.
} 
```

在这种情况下，`someObjectToPost`是您的客户端对象，尽管您可以将它留给 Web API 为您序列化它。在上面的示例中，我假设响应是虚构的类型-如果响应预期是纯文本，`SomeResponseType`您也可以使用。`ReadAsStringAsync`

# iphone - 如何使用 ARC 调试保留计数？

> ID：13386201
> 
> 赞同：0
> 
> 时间：2012-11-14T19:48:37.870
> 
> 标签：iphone, objective-c, ios, cocoa-touch, automatic-ref-counting

我在我的 iPhone 应用程序上使用 ARC，我试图捕捉一个错误，它给我以下输出（带`NSZombieEnabled, MallocStackLogging and guard malloc`）：

```
*** -[MyCustomClass retain]: message sent to deallocated instance 0x534e00 
```

如何使用 ARC 跟踪保留计数？`instance 0x534e00`为了找到释放的实例，我应该如何使用 LLDB 控制台（当然会出现任何其他实例）？

为了记录：我没有`retain`在我的代码中使用任何地方。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:17:39.173

这并不意味着您正在明确编写`[MyCustomClass retain]`. 系统正在为你做这件事。您应该使用 Zombies and Instruments 并尝试跟踪问题。至少您知道问题在于`MyCustomClass`，它缩小了范围。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-14T20:01:15.317

您的选择是：1\. 不使用 ARC，或 2\. 使用 ARC。但你不能两者都做。使用 ARC 时不能使用非 ARC 保留函数。

# security - 注销后谷歌如何处理后退按钮？

> ID：13386203
> 
> 赞同：5
> 
> 时间：2012-11-14T19:48:49.627
> 
> 标签：security, browser, logout

我一直在网上搜索，试图找出一种避免在用户单击后退按钮时显示以前不合适的信息的好方法。

例如：

*   避免注销后看到信息。
*   避免在发送和处理后看到表单。

我查看了这些帖子和许多其他帖子： [避免注销后返回](https://stackoverflow.com/questions/8004534/avoid-go-back-after-logout) [防止注销后返回按钮](https://stackoverflow.com/questions/10511893/prevent-back-button-after-logout)

我喜欢 Google 解决方案，但我不知道如何实施。当我从我的 Gmail 帐户注销然后单击返回按钮时，我看不到以前的邮件，我停留在登录页面。

我不是想改变或避免返回按钮，我只是想避免显示不合适的数据。

我尝试使用不同的标头和元数据，但它们不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:37:45.627

Gmail 是一个 JavaScript 网络服务，因此当您单击后退按钮时，静态状态只是加载被拒绝访问后端的 JavaScript 客户端。

在传统的非 Web 服务类型应用程序上，每次加载页面时都会运行 JavaScript，以确保经过身份验证的会话仍然有效。如果用户未通过身份验证，请将其撞回登录页面。

如果没有 JS，浏览器只会加载一个缓存的副本。您可以通过添加这些元标记或 http 标头来禁用缓存：

```
 header( "Pragma: no-cache" );
   header( "Cache-Control: no-cache" );
   header(  "Expires: 0" ); 
```

您还可以使用元标记禁用缓存：

```
 <meta http-equiv="Pragma" content="no-cache">
 <meta http-equiv="Cache-Control" content="no-cache"> 
```

# c# - 绘制光标所在的矩形

> ID：13386204
> 
> 赞同：0
> 
> 时间：2012-11-14T19:48:53.067
> 
> 标签：c#, drawrectangle

单击鼠标时，我正在尝试绘制一个圆形和一个矩形，因此我得到了鼠标单击的 x 和 y 线。

我在网上搜索过，在 C# 中，这只能用 Margin 来完成，在 java 中没有起源或类似的东西，你可以将 x 和 y 给构造函数。

现在我正在尝试正确设置，但我无法弄清楚如何正确计算：

根据这个：

```
http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.margin%28v=vs.95%29.aspx

rec.Margin = new Thickness(0, 0,0, 0); 
```

有人能帮我吗？或者这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:54:21.517

这是 WPF 还是 Windows 窗体？WPF 鼠标事件参数有一个`GetPosition(UIElement)`方法可以告诉您相对于您传入的控件的鼠标坐标。因此，如果您尝试在`System.Windows.Controls.Canvas`被调用对象上绘制矩形，`MyCanvas`则可以使用`Point`返回的 by`e.GetPosition(MyCanvas)`来放置矩形。

这是一个例子：

```
void MyCanvas_MouseDown(object sender, MouseButtonEventArgs e)
{
    Point ClickPoint = e.GetPosition(MyCanvas);
    Rectangle Rectangle = new Rectangle();
    System.Windows.Controls.Canvas.SetTop(Rectangle, ClickPoint.Y)
    System.Windows.Controls.Canvas.SetLeft(Rectangle, ClickPoint.X)
    MyCanvas.Children.Add(Rectangle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:03:10.480

```
void MyCanvas_MouseDown(object sender, MouseButtonEventArgs e)
{
    Point ClickPoint = e.GetPosition(MyCanvas);
    Rectangle Rectangle = new Rectangle();
    System.Windows.Controls.Canvas.SetTop(Rectangle, ClickPoint.Y)
    System.Windows.Controls.Canvas.SetLeft(Rectangle, ClickPoint.X)
    MyCanvas.Children.Add(Rectangle);
} 
```

感谢斯宾塞。

# url - 完整可能的 URL 语法和语法

> ID：13386209
> 
> 赞同：6
> 
> 时间：2012-11-14T19:49:31.300
> 
> 标签：url

我正在查看有关 URL 组件的一些信息，但找不到对可能的全长 url 以及每个组件可能是什么的合理解释。我想知道一个完整的 URL 会是什么样子，利用所有的复杂性。一旦我更好地理解它们，我也希望构建一个小 GUI 来帮助解释它们，但在那之前我会尝试使用我知道的组件：

`[ ]`括号包含完整的组件 `|` 管道显示组件的可能子组件 `( )`括号包含关于子/组件的注释、想法和假设

我的完整理解：

`[type][://][subdomain][domain][port][path][file][query][hash]`

下面是每个组件的描述：如果它有一个`*`，它是可选的

`[type]`* = [ (type {http | https | ftp | file | etc...}) ] （虽然这是可选的，但我相信它也是必需的，这意味着现代浏览器会插入类型以向服务器请求它，并且服务器也可能返回不同的类型）

`[://]`=（不知道这个叫什么）

`[subdomain]`* = [ [子域] | [子域]子域]

`[domain]`= [名称。（类型 {com | org | etc..}）]

`[port]`* = [（默认为空白端口：80）| 港口：** ]

`[path]`* = [（空白）| [路径] | [路径]路径]

`[file]`= [名称。（类型 {html | php | php | (etc...) }) ]

`[query]`* = [ ?[ 空白（即无查询）| 参数=值 | 参数=值&参数=值（等...）]]

`[hash]`* = [ #[ 空白（即没有哈希）| anyStringToBeParsedClientSide（通常用于持久化）]（刚刚学习了哈希也称为[片段标识符](http://en.wikipedia.org/wiki/Fragment_identifier)）

我还忘记了什么，或者我忽略了一个解释它们的好网站。请更正我的命名，因为它们可能不正确，因为我也在尝试了解它们的名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:37:00.607

如果您真的想要所有错综复杂的东西，标准文档是唯一的出路，学习查找和阅读它们肯定会有所回报。并且 RFC 通常不是很难阅读。

在这种情况下，[RFC 1738（统一资源定位器）](http://www.ietf.org/rfc/rfc1738.txt)是您想要的资源。它并不比您迄今为止提出的“过于技术化”。事实上，第 5 节的正式 BNF 语法与您所写的类似。

您可能还对描述 URI 格式的[RFC 3986（统一资源标识符）](http://www.rfc-editor.org/rfc/rfc3986.txt)感兴趣，它比单纯的 URL 更通用。

您提到的某些内容特定于 HTTP，在[RFC 2616（超文本传输​​协议 1.1）](http://www.w3.org/Protocols/rfc2616/rfc2616.html)中进行了描述。[第 3.2 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2)简要介绍了 URI。

# unix - Shell 脚本错误：“别名为 fprintf.cName.ksh[324] 121234 IOT/Abort”

> ID：13386218
> 
> 赞同：0
> 
> 时间：2012-11-14T19:49:53.380
> 
> 标签：unix

我的 Shell 脚本 Name.ksh 运行良好。

现在相同的脚本正在抛出**别名为 fprintf.cName.ksh[324] 121234 IOT/Abort的错误**

这个错误代码是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:09:30.523

我发现，这个错误是因为“文件系统中没有更多空间”。

# javascript - 传递给 javascript 闭包的参数有什么作用？

> ID：13386219
> 
> 赞同：2
> 
> 时间：2012-11-14T19:49:55.490
> 
> 标签：javascript

我如何解释在包装的 Javascript 闭包的开头和结尾传递的参数的作用，如下所示？

```
(function($, window) {
  return $(function() {
    return alert("js!");
  });
})($, window); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:51:14.980

第一次出现是函数参数，第二次是在执行函数时为这些参数传递值。

请记住，函数的参数不需要与传递的名称匹配（事实上，这可能会在以后引起混淆）：

```
(function(jQuery, w) {
    return jQuery(function(){
        return alert("js!");
    });
})($, window); 
```

会以同样的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:54:11.783

如果您更改参数名称并命名函数，可能会更容易解释

```
(function init($, win) {
  return $(function() {
    return alert("js!");
  });
})(jQuery, window); 
```

init 函数正在传递参数`jQuery`，并且`window`在定义后立即作为参数提供给 init`$`函数`win`

如果你把它分解成等效的代码，那也可能更容易理解

```
function init($, win) {
  return $(function() {
    return alert("js!");
  });
}
init(jQuery, window); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T19:58:10.967

通过这种方式，您传递的参数将在未来覆盖范围内是安全的。例如：

```
var a = 1
(function(a){
    setTimeout(function(){
        console.log('This variable is still safe', a);
    },2000)
})(a)
a = 0
console.log('has changed', a) 
```

因此，在您的示例中，您可以确定 $ 和 window 将是您所期望的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T19:57:22.673

顶部的参数集是接收参数的位置，底部的参数集是传递参数的位置。

他们确保他们的全局变量的封闭副本不会在封闭之外重新分配。这是一种保护您的代码免受其他（可能写得不好）代码的方法。考虑这个例子：

```
var $ = 'foo';

var blah = (function($) {
    return function () {
        alert($);
    };
})($);

var shizzam = (function() {
    return function () {
        alert($);
    };
})();

// someone evil overwrites my $ var
$ = 'bar';

// blah still works
blah();
// but shizzam is now borked
shizzam(); 
```

[http://jsfiddle.net/xfTcq/](http://jsfiddle.net/xfTcq/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T19:58:01.103

当一个函数返回另一个函数时，它可以包含在括号中以立即执行。最后一个括号是传递给它的参数。

你可以做一些测试才明白：

```
var a (function(){});
typeof a;
a.toSource()

typeof (function(){});
(function(){}).toSource() 
```

# bash - 使用 bash 递增

> ID：13386223
> 
> 赞同：23
> 
> 时间：2012-11-14T19:50:01.070
> 
> 标签：bash, shell, increment

我一直在尝试增加 .xml 文件中的变量。标签可能在文件中出现 100 次或仅两次。我正在尝试添加一个值，该值将增加数次。我已经包含了一些我正在处理的示例代码，但是当我运行脚本时它只会放置一个并且不会进一步增加。关于我做错了什么的建议会很好。

```
for xmlfile in $(find $DIRECTORY -type f -name \*.xml); do
  TFILE="/tmp/$directoryname.$$"
  FROM='><process>'
  TO=' value\=""><process>'
  i=0
  while [ $i -lt 10 ]; do
    i=`expr $i + 1`
    FROM='value\=""'
    TO='value\="'$i'"'
  done
  sed "s/$FROM/$TO/g" "$xmlfile" > $TFILE && mv $TFILE "$xmlfile"
done 
```

`while`循环是我刚刚用来测试代码的东西。它将插入`<process>`但不会插入增量。

我的最终目标：

```
<process>value="1"</process>
<process>value="2"</process>
<process>value="3"</process>
<process>value="4"</process> 
```

依此类推，只要`<process>`文件中存在它就需要增加。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-14T19:54:04.467

我刚刚测试了你的代码，它似乎正确地增加了`i`.

您可以尝试从以下位置更改您的增量语法：

```
i=`expr $i + 1` 
```

到

```
i=$((i+1)) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-14T21:30:55.467

对于适当的增量`bash`，请使用 for 循环（C 风格）：

```
n=10
for ((i=1; i<=n; i++)) {
    printf '<process>value="%d"</process>\n' $i
} 
```

**输出**

```
<process>value="1"</process>
<process>value="2"</process>
<process>value="3"</process>
<process>value="4"</process>
<process>value="5"</process>
<process>value="6"</process>
<process>value="7"</process>
<process>value="8"</process>
<process>value="9"</process>
<process>value="10"</process> 
```

**笔记**

`expr`是古代shell代码中用来做数学的程序。在 bash 这样的 Posix shell 中，使用 $(( 表达式 ))。在 bash 和 ksh93 中，您也可以使用`(( expression ))`or`let expression`如果您不需要在扩展中使用结果。

**编辑**

如果我误解了您的需求并且您有一个包含如下空白值的文件：

```
<process>value=""</process> 
```

试试这个 ：

```
$ perl -i -pe '$c++; s/<process>value=""/<process>value"$c"/g' file.xml
<process>value"1"</process>
<process>value"2"</process>
<process>value"3"</process>
<process>value"4"</process>
<process>value"5"</process>
<process>value"6"</process>
<process>value"7"</process> 
```

`-i`开关编辑文件真实，所以要小心。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-01T17:59:42.207

这是在 bash 中增加变量的最简单方法：

```
i=0
((i++)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-15T16:19:53.377

这也有效。

将变量声明为整数。

```
declare -i i=0 
```

然后你可以像这样递增：

```
i+=1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T20:22:11.540

使用`awk`：

```
awk '{gsub( "value=\"\"", "value=" i++ ); print }' i=1 input-file 
```

`value=""`这将用`value="1"`,等替换字符串`value="2"`。您可以轻松更改起始值和增量（例如`..."value=" i ); i+=5; print`）

# c# - 获取所有可用的电源选项

> ID：13386225
> 
> 赞同：0
> 
> 时间：2012-11-14T19:50:07.133
> 
> 标签：c#, windows-8, sleep, shutdown

我有 Windows 8，电源选项太难了，所以我想制作一个小应用程序来复制电源选项卡。

我不能做的是找到一种让 Windows 睡眠的方法。在 Windows 8 中，当 PC 处于睡眠状态时，它会完全停止，如果您按下某个键，它会立即进入锁定屏幕，而不会出现启动屏幕。

我怎样才能做到这一点？

**更新：**或者如果可以获得所有可用电源选项的列表。即：如果允许休眠...

我现在`rundll32.exe powrprof.dll,SetSuspendState 0,1,0`用来睡觉电脑，但它醒来很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:55:39.637

[这](http://codehill.com/2009/01/lock-sleep-or-hibernate-windows-using-c/)应该可以帮助你。

我想你可以锁定电脑，然后让它进入睡眠状态。

要锁定屏幕：

```
[DllImport("user32.dll", SetLastError = true)]
static extern bool LockWorkStation(); 
```

进入睡眠模式：

```
Application.SetSuspendState(PowerState.Suspend, false, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:58:34.013

如果您使用的是 Win-RT，那么您应该使用“暂停管理器”：

*   [http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx)

*   [http://dotnet.dzone.com/articles/process-lifetime-management](http://dotnet.dzone.com/articles/process-lifetime-management)

# python - Python - 从不同包中的一个包创建类对象

> ID：13386230
> 
> 赞同：2
> 
> 时间：2012-11-14T19:50:53.767
> 
> 标签：python, python-3.x, python-2.7, ironpython

几天前我开始使用 Python，我想我遇到了一个非常基本的问题。也许我在 Python 中做得不正确，所以想从专家那里得到一些建议：

我在一个包库中有一个 config.cfg 和一个类测试，如下所示：

**myProj/lib/pkg1/config.cfg**

```
[api_config]
url = https://someapi.com/v1/
username=sumitk 
```

**myProj/lib/pkg1/test.py**

```
class test(object):

    def __init__(self, **kwargs):

        config = ConfigParser.ConfigParser()
        config.read('config.cfg')
        print config.get('api_config', 'username') 
          #just printing here but will be using this as a class variable

    def some other foos().. 
```

现在我想在不同包的其他模块中创建一个测试对象

**myProj/example/useTest.py**

```
from lib.pkg1.test import test

def temp(a, b, c):
    var = test()

def main():
    temp("","","")

if __name__ == '__main__':
    main() 
```

运行 useTest.py 给我错误：

```
...
print config.get('api_config', 'username')
File "C:\Python27\lib\ConfigParser.py", line 607, in get
     raise NoSectionError(section)
ConfigParser.NoSectionError: No section: 'api_config' 
```

现在，如果我将 useTest.py 放在同一个包中，它运行得非常好：

```
myProj/lib/pkg1/useTest.py
myProj/lib/pkg1/test.py
myProj/lib/pkg1/config.cfg 
```

我想在 Python 中有一些非常基本的包访问概念，我不知道，或者我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:55:34.070

这里的问题是您有不同的工作目录，具体取决于哪个模块是您的主脚本。您可以通过在每个脚本的顶部添加以下行来检查工作目录：

```
import os
print os.getcwd() 
```

因为您只是提供`'config.cfg'`文件名，所以它将尝试在工作目录中找到该文件。

要解决此问题，请提供配置文件的绝对路径。

您应该能够通过以下方法找出绝对路径，因为您知道 config.cfg 和 test.py 在同一目录中：

```
# inside of test.py
import os
config_path = os.path.join(os.path.dirname(os.path.abspath(__file__)),
                           'config.cfg') 
```

# ios - MKMapView 不会缩放或动画

> ID：13386235
> 
> 赞同：0
> 
> 时间：2012-11-14T19:51:15.213
> 
> 标签：ios, maps, mkmapview, zooming, animated

试图了解 MKMapView 的方法，但我已经学习了几个教程，但我似乎无法让它放大到我定义的位置，而是加载到以大西洋为中心的整个地图视图。我猜 iOS6 发生了一些变化，这意味着我正在使用的教程不再有效？（教程是iOS3-iOS5）。

我在 Interface Builder 中制作了一个 ViewController，给它一个 MapViewController 的自定义类。然后我拖动 MKMapView 并使用助手编辑器将其放入 MapViewController.h

**MapViewController.h**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MapViewController : UIViewController
@property (weak, nonatomic) IBOutlet MKMapView *myMapView;

@end 
```

**MapViewController.m**

```
#import "MapViewController.h"

#define CLS_LATITUDE 54.85477
#define CLS_LONGITUDE -1.57371
#define SPAN 0.10f;

@interface MapViewController ()

@end

@implementation MapViewController
@synthesize myMapView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

 - (void)viewDidLoad
{
    [super viewDidLoad];
    MKCoordinateRegion myRegion;
    CLLocationCoordinate2D center;
    center.latitude = CLS_LATITUDE;
    center.longitude = CLS_LONGITUDE;
    MKCoordinateSpan mySpan;
    mySpan.latitudeDelta = SPAN;
    mySpan.longitudeDelta = SPAN;
    myRegion.center = center;
    myRegion.span = mySpan;
    [myMapView setRegion:myRegion animated:YES];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
 @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:22:58.247

该地区的代码看起来是正确的。您确定已在界面生成器中链接了 myMapView 插座吗？

![在此处输入图像描述](../Images/3cd4d235bbb8fe59378decb3b2497f73.png)

如果您单击并按住左侧的“文件所有者”对象，然后按住*Ctrl*并从文件所有者拖动到界面中的地图视图，当您松开鼠标按钮时，您应该可以选择设置插座到`myMapView`. 然后，您可以在 Connections 检查器中看到该链接，如右侧所示。

**编辑：**

`viewDidLoad`好的，所以看起来，当您使用自动布局时，地图视图的框架在调用时尚未设置。我建议你把它移到`- (void)viewWillLayoutSubviews`. 例如：

```
- (void)viewWillLayoutSubviews {
    [super viewWillLayoutSubviews];
    [self setLocation];
}

-(void)setLocation {
    // Set region etc...
} 
```

# image-processing - 如何写一个简单的图像识别

> ID：13386238
> 
> 赞同：0
> 
> 时间：2012-11-14T19:51:21.767
> 
> 标签：image-processing, opencv, computer-vision

我有一个非常相似但非常简单的[问题](https://stackoverflow.com/questions/6999920/looking-for-an-image-comparison-pattern-recognition-library)。

首先，我有一个小图像：![在此处输入图像描述](../Images/1343f6d2f10edcb618f754f9a3fe5f26.png)

然后我截图，我想检测我的小房子是否在截图中。

问题是我的房子可能大小不同，颜色也略有不同。

到目前为止，我已经找到了 OpenCV 库，但对于我的需要来说，它似乎太大了。

你知道任何更简单的库来完成这项任务吗？

发送

编辑：我[发现这个](https://stackoverflow.com/questions/4118770/opencv-haar-training-for-static-image)关于 SURF 算法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:22:53.120

从您的问题来看，您的图像不会像屏幕上那样纯粹或倾斜，而您提到的问题是一个更加困难的情况。您的图像不会出现任何失真，而只会增加/减小尺寸。

为了匹配任何颜色，我建议为您的模板图像和屏幕截图计算渐变图像（使用[sobel 内核）。](http://en.wikipedia.org/wiki/Sobel_operator)现在，您正在根据可见边缘进行匹配，并从混合中去除颜色。

要匹配大小，请创建模板的多个版本（版本越多越精确，但处理时间越长）并在图像上滑动模板，直到找到可接受的匹配。

OpenCV 是一个学习曲线陡峭的野兽。如果我的假设是正确的，那么当您可以应用**简单的**图像处理技术时，您正确地说明 OpenCV 尺寸过大:)。

# r - 使用带有因子的单个标签对多个级别进行编码

> ID：13386239
> 
> 赞同：-1
> 
> 时间：2012-11-14T19:51:25.213
> 
> 标签：r

我有包含 200 多种语言的语言数据，其中一些缺失值编码为 ''（0 长度字符）。

我想压缩它`factor`来编码主要语言，而所有其他语言都被编码为“其他语言”，而“”被编码为“（缺失）”，出现在字符串的末尾。

我的计划是这样的：

```
lanfmt <- list(
  lev = c(prime <- c('English', 'Russian', 'Urdu'), diff <- setdiff(levels(lan), c(prime, '')), ''),
  lab = c(prime, diff, '')
)

table(factor(lan, lanfmt$levels, lanfmt$labels) 
```

但 R 不喜欢多对一的因子格式。如何聚合到一个类别中？

编辑：

我决定了一个好的解决方案，`lanfmt`如上所述使用如下：

`table(lanfmt$lab[match(lang, lanfmt$lev)])`

它不是那么优雅，但它在紧要关头工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:23:35.320

我认为您应该将因素转换为字符，对其进行编辑然后对其进行排序。也许这样的事情会有所帮助（`lan`作为列表/数据框的语言向量）：

```
lan <- c("English", "Russian", "Urdu", "", "Indonesian")
lan <- factor(lan)
prime <- c("English", "Russian", "Urdu", "missing")
missing <- ""

lan <- as.character(lan)
lan[lan %in% missing] <- "missing"

lan[!lan %in% prime] <- "other language"
lan <- factor(lan)
lan
[1] English        Russian        Urdu           missing       
[5] other language
Levels: English missing other language Russian Urdu 
```

之后，您可以订购您的语言

```
order <- c("English", "Russian", "Urdu", "other language", "missing")
lan <- ordered(lan, order)
dt <- data.frame(lan, stuff=rnorm(5,4,1))
dt[with(dt, order(lan)),]

             lan    stuff
1        English 4.212460
2        Russian 3.681616
3           Urdu 3.409838
5 other language 3.304108
4        missing 3.938468 
```

# ruby-on-rails - Rails 3.1 活动管理员和nested_form 和link_to_add 不起作用

> ID：13386242
> 
> 赞同：2
> 
> 时间：2012-11-14T19:51:42.897
> 
> 标签：ruby-on-rails, activeadmin, nested-forms

我正在使用 activeadmin (0.3.2) 和 nested_form (0.2.3)。

我的模型是：

```
class Event < ActiveRecord::Base
has_many :event_translations
attr_accessible    :event_translations_attributes
accepts_nested_attributes_for :event_translations, :allow_destroy => true,
                            :reject_if => proc { |attributes|
                              attributes['title'].blank? and
                                  attributes['description'].blank? and attributes['language_id'].blank?
end

EventTranslation < ActiveRecord::Base
belongs_to :event
belongs_to :language
attr_accessible :description, :title, :event_id, :language_id
end

class Language < ActiveRecord::Base
attr_accessible :iso, :name
end 
```

在我的 active_admin 事件控制器中，表单呈现为部分：

```
form :partial => "form" 
```

在我看来，我在 views/admin/events/_form.html.erb 下有以下内容：

```
<%= semantic_nested_form_for [:admin, @event] do |f|%>
<% f.object.event_translations.build %>
<%= f.semantic_fields_for :event_translations do |h| %>
<%=h.inputs "Translations" do %>
    <%= h.input :language, :required => true, :as => :select, :prompt => "Select a Language", :collection => Language.all %>
    <%= h.input :title, :label => "Name"%>
    <%= h.input :description %>
    <%= h.link_to_remove "Remove Translation" %>
<% end %>
<% end %>

<%= f.link_to_add "Add Translation", :event_translations %>
...
<% end %> 
```

这可以很好地渲染字段，但是 link_to_add 和 link_to_remove 在点击时没有做任何事情。//= 需要将 jquery_nested_form 添加到 application.js 并且 nested_form gem 正确包含在 gemfile 中。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:52:25.480

解决了！

在花了几个小时之后，我现在讨厌自己......

解决方案是添加

```
//= require jquery_nested_form 
```

在底部`active_admin.js`而不是`application.js`。

# android - 向 Google Play 提交多个 apk 应用程序

> ID：13386248
> 
> 赞同：1
> 
> 时间：2012-11-14T19:52:01.693
> 
> 标签：android, google-play

我有几个适用于我的应用程序的不同屏幕和密度的 apk。在清单中，我设置了这些限制：

```
<compatible-screens>
   <screen android:screenSize="normal" android:screenDensity="hdpi" />
   <screen android:screenSize="large" android:screenDensity="mdpi" />
</compatible-screens>

<supports-screens android:smallScreens="false" android:largeScreens="true" adroid:normalScreens="true" android:xlargeScreens="false"/> 
```

但在开发者控制台中，我无法选择每个 apk 支持的设备，即支持的设备列表：

```
Supported Devices [Learn More]
This application is only available to devices with these features, as defined in your application manifest.
Screen densities: NORMAL,HDPI LARGE,MDPI
Required device features
android.hardware.touchscreen
This application is available to over 0 devices. 
```

那么如何自定义 apk 分发呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:20:34.523

好的，如果有人会像我一样感到困惑 - 只需单击 apk 上的“激活”。

# mysql - 在 MySql / GROUP BY 语法中创建和弦图矩阵

> ID：13386249
> 
> 赞同：1
> 
> 时间：2012-11-14T19:52:09.647
> 
> 标签：mysql, statistics, analytics, chord-diagram, table-statistics

我在 MYSQL 中做一些数据分析，希望以下是可能的。

我有一个记录用户博客主题的表格，如下所示。我总共有 25 个主题，并且希望足够抽象，以便我们以后可以添加主题而不必重做查询（如果可能的话）：

```
-----------------------
| user_id |  topic    |
-----------------------
|   01    |  art      | 
|   01    |  cooking  |
|   02    |  art      | 
|   03    |  outdoors |
|   03    |  art      |
|   03    |  cooking  |
----------------------- 
```

为了从这些数据中创建一个和弦图（[http://bl.ocks.org/4062006](http://bl.ocks.org/4062006)），我需要分析任何两个主题之间的关系，或者通过两个主题对行进行分组，或者通过创建一个矩阵：

```
-----------------------------------------
| topic_combo            |  user_cnt    |
-----------------------------------------
|   art + cooking        |  2           | 
|   art + outdoors       |  1           |
|   cooking + outdoors   |  1           | 
----------------------------------------- 
```

或者，甚至更好...

```
---------------------------------------------
|          |  art  |  cooking  |  outdoors  |
---------------------------------------------
| art      |   3   |    2      |     1      |
| cooking  |   2   |    2      |     1      |
| outdoors |   1   |    1      |     1      |
--------------------------------------------- 
```

在MYSQL中这些都可能吗？如果是这样，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:24:41.777

好吧，我不知道这是否是最好的方法，但至少在你得到更好的答案之前它是一种。使用 Guvante 提到的 JOIN 和 GROUP BY。

```
SELECT a.topic AS at, b.topic AS bt, COUNT(*) AS c FROM a JOIN a AS b ON a.user_id=b.user_id GROUP BY a.topic, b.topic; 
```

这将导致如下输出：

```
at          bt          c
-----------------------------
art         art         3
art         cooking     2
art         outdoors    1
cooking     art         2
cooking     cooking     2
cooking     outdoors    1
outdoors    art         1
outdoors    cooking     1
outdoors    outdoors    1 
```

您可以将其转换为矩阵，例如通过 PHP

```
while($data = mysql_fetch_object($sql)) {
  $matrix[$data->at][$data->bt] = $data->c;
} 
```

**编辑：**在朋友的提示后删除了评论中提到的重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:04:46.360

应该有可能，主要问题变成了实现，正如您所提到的，这是困难的部分。

为了让您走上正确的道路，您可以尝试创建一个包含所有主题的临时表。

另一个花絮是你可以`FROM`从那个表和`JOIN`同一个表中做一个来创建一组所有组合。然后通过`GROUP BY`在第一个版本上执行，您可以有一个从第二个版本获取结果的查询。

最后，如果您希望它是模块化的，那么进行查询组合可能是最简单的，以允许您返回带有命名列的结果集。

# sql-server - 使用计数器增加列号

> ID：13386253
> 
> 赞同：0
> 
> 时间：2012-11-14T19:52:21.550
> 
> 标签：sql-server, counter

我需要为每个 NEW DocNumber 增加一列（计数）+1。因此，如果三列的 DocNumber 相同，则计数器将为 1、2、3 等。下面是代码。我得到了它会更新整个表格的地步，只是不是基于相同或不同的文档编号。有人可以帮我解释这里的逻辑吗？

基本上，我想在计数器遇到新的 TempDocNumber 时重新启动它

```
DECLARE @DocTable Table (DetailID FLOAT, TempDocNumber FLOAT, Counts INT)
INSERT INTO @DocTable (DetailID, TempDocNumber, Counts)
SELECT DetailID, DocumentNumber, 0 FROM ChargebackDetailTempTable

declare @Counter int
Set @Counter = 0
Update @Doctable
SET @Counter = counts = @Counter + 1

-- start counter over when new tempdocnumber 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:57:17.120

你可以像这样创建你的插入：

```
DECLARE @DocTable Table (DetailID FLOAT, TempDocNumber FLOAT, Counts INT)
INSERT INTO @DocTable (DetailID, TempDocNumber, Counts)
SELECT  DetailID, 
        DocumentNumber TempDocNumber, 
        ROW_NUMBER() OVER(PARTITION BY DocumentNumber ORDER BY DetailId) Counts
FROM ChargebackDetailTempTable 
```

不需要`UPDATE`。

**对于 SQL Server 2000**

假设 DetailID 是一个标识列，您可以尝试以下操作（同样，`UPDATE`不需要）：

```
DECLARE @DocTable Table (DetailID FLOAT, TempDocNumber FLOAT, Counts INT)
INSERT INTO @DocTable (DetailID, TempDocNumber, Counts)
SELECT  DetailID, 
        TempDocNumber,
        Counts = (  SELECT COUNT(T1.DetailID) + 1
                    FROM ChargebackDetailTempTable T1
                    WHERE T1.DetailID < T.DetailID and T1.TempDocNumber = T.TempDocNumber)
FROM ChargebackDetailTempTable T 
```

# css - 如何使 WinJS.UI.ListView 跨屏幕分辨率缩放并显示水平滚动条？

> ID：13386262
> 
> 赞同：1
> 
> 时间：2012-11-14T19:53:10.980
> 
> 标签：css, windows-8, winjs

我应该为 WinJS.UI.ListView 的 width 属性设置什么值，以便它可以缩放到所有屏幕尺寸并且我可以使网格视图布局水平滚动？

如果我将 data-win-control 设置为“WinJS.UI.ListView”的 div 的宽度属性设置为 100%，则不会出现水平滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:02:08.000

自适应布局示例 - [http://go.microsoft.com/fwlink/p/?linkid=231571](http://go.microsoft.com/fwlink/p/?linkid=231571) WinJS ListView Deep Dive - [http://channel9.msdn.com/Events/Build/2012/3-108](http://channel9.msdn.com/Events/Build/2012/3-108) 样式化 ListView - [http://msdn.microsoft.com/en-us/library/windows/apps/hh850406.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh850406.aspx)

# java - 在java中使用vigenere密码加密字节数组

> ID：13386266
> 
> 赞同：0
> 
> 时间：2012-11-14T19:53:15.417
> 
> 标签：java, file, encryption, byte, vigenere

我必须使用 vigenere 密码加密一些文件（jpg）。我写了一些代码，但加密和解密后我的文件已损坏。图像的前 1/4 显示正常，但其余部分已损坏。这是我的代码：

```
@Override
public byte[] encryptFile(byte[] file, String key) {
    char[] keyChars = key.toCharArray();
    byte[] bytes = file;
    for (int i = 0; i < file.length; i++) {
        int keyNR = keyChars[i % keyChars.length] - 32;
        int c = bytes[i] & 255;
        if ((c >= 32) && (c <= 127)) {
            int x = c - 32;
            x = (x + keyNR) % 96;
            bytes[i] = (byte) (x + 32);
        }
    }
    return bytes;
}

@Override
public byte[] decryptFile(byte[] file, String key) {
    char[] keyChars = key.toCharArray();
    byte[] bytes = file;
    for (int i = 0; i < file.length; i++) {
        int keyNR = keyChars[i % keyChars.length] - 32;
        int c = bytes[i] & 255;
        if ((c >= 32) && (c <= 127)) {
            int x = c - 32;
            x = (x - keyNR + 96) % 96;
            bytes[i] = (byte) (x + 32);
        }
    }
    return bytes;
} 
```

我做错什么了？

编辑：

读取和写入文件：

```
public void sendFile(String selectedFile, ICipher cipher, String key) {
    try {
        DataOutputStream outStream = new DataOutputStream(client
                .getOutputStream());
        outStream.flush();
        File file = new File(selectedFile);
        FileInputStream fileStream = new FileInputStream(file);
        long fileSize = file.length();
        long completed = 0;
        long bytesLeft = fileSize - completed;
        String msg = "SENDING_FILE:" + file.getName() + ":" + fileSize;
        outStream.writeUTF(cipher.encryptMsg(msg, key));
        while (completed < fileSize) {
            int step = (int) (bytesLeft > 150000 ? 150000 : bytesLeft);
            byte[] buffer = new byte[step];
            fileStream.read(buffer);
            buffer = cipher.encryptFile(buffer, key);
            outStream.write(buffer);
            completed += step;
            bytesLeft = fileSize - completed;
        }
        outStream.writeUTF(cipher.encryptMsg("SEND_COMPLETE", key));
        fileStream.close();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

    private void downloadFile(String fileName, int fileSize,DataInputStream input,ICipher cipher, String key) {
    try {
        FileOutputStream outStream = new FileOutputStream("C:\\" + fileName);
        int bytesRead = 0, counter = 0;

        while (counter < fileSize) {
            int step = (int) (fileSize > 150000 ? 150000 : fileSize);
            byte[] buffer = new byte[step];
            bytesRead = input.read(buffer);
            if (bytesRead >= 0) {
                buffer = cipher.decryptFile(buffer, key);
                outStream.write(buffer, 0, bytesRead);
                counter += bytesRead;
            }
            if (bytesRead < 1024) {
                outStream.flush();
                break;
            }
        }

        Display.getDefault().syncExec(new Runnable() {
            @Override
            public void run() {
                window.handleMessage("Download sucessfully");
            }
        });
        outStream.close();

    } catch (Exception e) {
        Display.getDefault().syncExec(new Runnable() {
            @Override
            public void run() {
                window.handleMessage("Error on downloading file!");
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:47:47.777

您可以在来自磁盘 I/O 的任何块中对文件进行编码：

```
 int step = (int) (bytesLeft > 150000 ? 150000 : bytesLeft);
        byte[] buffer = new byte[step];
        fileStream.read(buffer);
        buffer = cipher.encryptFile(buffer, key); 
```

但是你解码来自网络 I/O 的任何块中的文件：

```
 bytesRead = input.read(buffer);
        if (bytesRead >= 0) {
            buffer = cipher.decryptFile(buffer, key);
            outStream.write(buffer, 0, bytesRead);
            counter += bytesRead;
        } 
```

这些块很可能不同意。磁盘 I/O 可能总是给你完整的块（你很幸运），但网络 I/O 可能会给你包大小的块（1500 字节减去标题）。

密码应该在已经编码/解码的数据中获得一个偏移量（或一次编码/解码所有内容），并使用它来适当地移动密钥，否则可能会发生这种情况：

```
original: ...LOREM IPSUM...
key     : ...abCde abCde...
encoded : ...MQUIR JRVYR...
key     : ...abCde Cdeab... <<note the key got shifted
decoded : ...LOREM GNQXP... <<output wrong after the first chunk. 
```

由于数据包数据大小（对于以太网大小的 TCP/IP 数据包）以四个字节对齐，因此长度为 4 的密钥可能总是对齐。

* * *

另一个问题是您在上传文件时忽略了从磁盘读取的字节数。虽然磁盘 I/O 可能总是为您提供完整大小的块（文件可能是内存映射的，或者底层的原生 API 确实提供了这种保证），但没有什么是理所当然的。始终使用实际读取的字节数：`bytesRead = fileStream.read(buffer);`

# asp.net - 如何在没有代码的情况下调试 asp.net 程序？

> ID：13386273
> 
> 赞同：0
> 
> 时间：2012-11-14T19:53:37.070
> 
> 标签：asp.net, vb.net, visual-studio-2010, debugging, code-behind

我继承了一个我知之甚少的网站。我使用过 asp.net/C# 网站，但这似乎有所不同。没有代码可以让我设置断点并单步执行。也找不到程序中的几个引用。我的一般问题是：如何在 Visual Studio 中调试此程序？

与此示例代码相关的具体问题：

*   我在哪里设置我的断点？
*   当用户单击提交按钮时，此示例中会发生什么？
*   该程序继承“Company.Program.SystemLogin”。我在任何代码中都找不到该类。为什么不，我如何找到它？

    ```
     <%@ Page Language="vb" AutoEventWireup="false" Inherits="Company.Program.SystemLogin" %>
      <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
     <HTML>
      <HEAD>
      <title>Company CMS</title>
      <meta name="GENERATOR" content="Microsoft Visual Studio .NET 7.1">
      <meta name="CODE_LANGUAGE" content="Visual Basic .NET 7.1">
      <meta name="vs_defaultClientScript" content="JavaScript">
      <meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
      <style>
      BODY { FONT-SIZE: 11px; FONT-FAMILY: Verdana, Helvetica, sans-serif; BACKGROUND-COLOR: #ffffff }
       INPUT { FONT-SIZE: 11px; COLOR: #000000; FONT-FAMILY: Verdana, Helvetica, sans-serif }
       TEXTAREA { FONT-SIZE: 11px; COLOR: #000000; FONT-FAMILY: Verdana, Helvetica, sans-serif }
       SELECT { FONT-SIZE: 11px; COLOR: #000000; FONT-FAMILY: Verdana, Helvetica, sans-serif }
        TD { FONT-SIZE: 11px; FONT-FAMILY: Verdana, Helvetica, sans-serif }
       .red { FONT-WEIGHT: bold; COLOR: #851205 }
       .orange { FONT-WEIGHT: bold; COLOR: #e05e02 }
       .message { FONT-WEIGHT: bold; FONT-SIZE: 12px; COLOR: #e05e02 }
       </style>
       </HEAD>
       <body onload="document.getElementById('txtUsername').focus();">
       <form id="Form1" method="post" runat="server">

                <table width="400" cellpadding="3" cellspacing="3" align="center">
                    <tr>
                        <td colspan="2" align="center"><img src="images/pcms.jpg" alt="Company CMS"></td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center"><asp:Label ID="lblMessage" Runat="server" CssClass="message">PLEASE LOGIN</asp:Label></td>
                    </tr>
                    <tr>
                        <td align="right" class="red">Username</td>
                        <td><asp:TextBox ID="txtUsername" Runat="server" />
                            <asp:RequiredFieldValidator ID="rUsername" Runat="server" ControlToValidate="txtUsername" Text="*" Font-Bold="True"
                                Display="Dynamic" ForeColor="#E05E02" /></td>
                    </tr>
                    <tr>
                        <td align="right" class="red">Password</td>
                        <td><asp:TextBox ID="txtPassword" Runat="server" TextMode="Password" />
                            <asp:RequiredFieldValidator ID="rPassword" Runat="server" ControlToValidate="txtPassword" Text="*" Font-Bold="True"
                                Display="Dynamic" ForeColor="#E05E02" /></td>
                    </tr>
                    <tr>
                        <td align="right" class="red"><asp:label id="lblconn" Runat="server" Visible="False">Connection:</asp:label></td>
                        <td><asp:DropDownList ID="conns" Runat="server" Visible="False">
                                <asp:ListItem Value=""></asp:ListItem>
                            </asp:DropDownList></td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center"><asp:Button id="btnSubmit" Runat="server" Text="Log In" CssClass="button" /></td>
                    </tr>
                </table>

        </form>
    </body> 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:59:25.600

如果您继承了一个没有源代码的应用程序，那么您将面临严峻的挑战。

您可以使用 dotpeek 或反射器来反编译 DLL 以重新创建源代码，但这将是一项繁重的任务。

我的第一个电话点是找出源代码是否在任何地方都可用。

# c# - 通过 WCF 从数据库上传和下载文档

> ID：13386274
> 
> 赞同：1
> 
> 时间：2012-11-14T19:53:38.817
> 
> 标签：c#, asp.net, wcf

有人可以提供一些有关如何使用 WCF 上传和下载存储在数据库中的文档的示例吗？

我在网上看过示例，但它们都是从文件系统中读取的，文件存储在 Web 服务器上。我需要能够将文档上传到数据库中（db 文件类型是 varbinary(max)）。

我已经看到使用网络服务将文件作为字节 [] 传递，从我在线阅读的内容来看，这似乎在使用 WCF 时导致文件大小限制，有人知道这是否属实吗？否则我会尝试将文件作为字节 [] 传递到 WCF 服务中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:13:09.753

您是否尝试过WCF 中的[流传输模式？](http://msdn.microsoft.com/en-us/library/ms733742.aspx)它增加了一些限制，但如果你对它们没问题，它将帮助你绕过大小限制。

可以在[此处](http://msdn.microsoft.com/en-us/library/cc716724.aspx)找到有关如何从 SQL Server 数据库流式传输 Blob 以及将其流式传输到 SQL Server 数据库的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:05:03.773

这就是我所做的......我使用 Byte[] 发送文件......

如果大小太大....您只需要调整 WCF 配置文件中的默认最大字节数

```
 <readerQuotas maxDepth="2000000" maxStringContentLength="2000000"
    maxArrayLength="2000000" maxBytesPerRead="2000000" maxNameTableCharCount="2000000" /> 
```

# python - 协程中的 Python 循环

> ID：13386277
> 
> 赞同：1
> 
> 时间：2012-11-14T19:53:54.263
> 
> 标签：python, multithreading, generator, coroutine

我已经阅读了有关该主题的所有文档，但似乎我无法很好地掌握 Python 协程的整个概念来实现我想做的事情。

我有一个后台任务（它会生成一些随机文件，但这并不重要），它在无限循环中执行此操作（这是一个观察者）。

我想以最有效的方式实现这个后台任务，我认为微线程（又名协程）是实现这一目标的好方法，但我根本无法让它工作（无论是后台任务运行或程序的其余部分，但不能同时进行！）。

有人可以给我一个使用协程实现的后台任务的简单示例吗？还是我认为协程可以用于此目的是错误的？

我正在使用 Python 2.7 原生协程。

我精通并发，尤其是 DBMSes 和 Ada，所以我对底层原理了解很多，但我不习惯生成器即协程的概念，这对我来说很新。

/编辑：这是我的代码示例，我必须再次强调它不起作用：

```
@coroutine
def someroutine():
    with open('test.txt', 'a') as f:
        f.write('A')
    while True:
        pass
    yield 0

@coroutine
def spawnCoroutine():
    result = yield someroutine()

    yield result

routine = spawnCoroutine()
print 'I am working in parallel!'

# Save 'A' in the file test.txt, but does not output 'I am working in parallel!' 
```

注意：@coroutine 是来自[coroutine.py](http://www.dabeaz.com/coroutines/coroutine.py)的装饰器，由 David Beazley 提供

**/最终编辑和解决方案回顾**

好的，我的问题被关闭了，因为它看起来模棱两可，事实上，这*正是*我的问题的目的：澄清协程在线程和多处理上的使用。

幸运的是，在可怕的制裁发生之前提交了一个很好的答案！

强调上述问题的答案：不，Python 的协程（也不是 bluelet/greenlet）不能用于运行独立的、可能无限受 CPU 限制的任务，因为**协程没有并行性**。

这是最让我困惑的。事实上，[并行性是并发的一个子集](http://jessenoller.com/code/pyworks.pdf)，因此当前 Python 中的协程实现允许并发任务，但不允许并行任务，这相当令人困惑！这种行为要与 Ada 等并发编程语言的 Tasks 概念明确区分开来。

此外，Python 的线程与协程类似，它们通常在等待 I/O 时切换上下文，因此也不是独立 CPU 密集型任务的理想选择（请参阅 David Beazley 的*理解 GIL*）。

我目前使用的解决方案是使用`multiprocessing`模块生成子进程。产生后台进程很繁重，但总比什么都不运行要好。这还具有允许分布式计算的优点。

作为替代方案，在 Google App Engine 上，有[deferred 模块](http://code.google.com/appengine/articles/deferred.html)和[background_thread 模块](https://developers.google.com/appengine/docs/python/backends/overview#background_threads)可以为多处理提供有趣的替代方案（例如，通过使用一些实现 Google App Engine API 的库，例如[typhoonae](http://code.google.com/p/typhoonae/)，虽然我不确定他们还没有实现这些模块）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:18:19.623

如果您查看`coroutine.py`您正在使用的（普通）库，它包含一个示例，该示例显示了`grep`“在后台”如何工作。您的代码和示例之间有两个区别：

1.  `grep`在工作时重复`yield`s — 事实上，它`yield`是每行一次。你必须这样做，否则除了你的协程之外没有人有机会运行直到它完成。

2.  主代码重复调用`send`协`grep`程，每行再次调用一次。你必须这样做，否则你的协程永远不会被调用。

这是一个尽可能简单的案例——一个协程，以及一个无条件驱动该协程的简单调度程序。

以下是如何将您的示例转换为有效的方法：

```
@coroutine
def someroutine():
    with open('test.txt', 'a') as f:
        yield
        f.write('A')
    while True:
        yield
    yield 0

routine = someroutine()
print 'I am working in parallel!'
routine.send()
print 'But only cooperatively...'
routine.send() 
```

等等。

但通常你不想这样做。在`grep`示例的情况下，协程和主驱动程序作为消费者和生产者明确合作，因此直接耦合非常有意义。您只需要独立安排一些完全独立的任务。

为此，不要尝试自己构建线程。如果您想要协作线程，请使用现成的调度程序/调度程序，您必须对所有任务进行的唯一更改就是`yield`频繁地调用以有效地共享时间。

如果您甚至不关心线程是否合作，只需使用`threading`or `multiprocessing`，您甚至不需要`yield`s：

```
def someroutine():
    with open('test.txt', 'a') as f:
        f.write('A')
    while True:
        pass
    return 0

routine = threading.Thread(someroutine)
print 'I am working in parallel!' 
```

PS，正如我在其中一条评论中所说，如果您还没有通过[http://www.dabeaz.com/coroutines/index.html](http://www.dabeaz.com/coroutines/index.html)或类似的方式工作，那么您真的应该这样做，并在您有任何问题时回来一路去寻找，而不是写你不理解的代码并问为什么它不起作用。我敢打赌，如果你进入第 4 部分（可能更早），你就会明白为什么你最初的问题很愚蠢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:43:41.687

而真：通过

无尽的循环。

所以在那之后它不会执行yeld。事实上它真正的功能结束，之后的一切都是纯无用的装饰。

而且由于 someroutine 在它可以发出之前就被卡住了（双关语;）），yeld someroutine() 也不会发出声音。

所以你让你的脚本忙着什么都不做。（无限空循环）。

# html - 如何使 div 宽度等于视口宽度，但在 HTML5 中可缩放（用户可缩放=是）

> ID：13386286
> 
> 赞同：0
> 
> 时间：2012-11-14T19:54:36.613
> 
> 标签：html, cordova

我正在Phonegap（基本上是围绕HTML5页面包装的移动浏览器）中的应用程序，需要它们的初始宽度在启动时等于视口宽度，但允许用户重新缩放。到目前为止，我已经尝试过：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=3.0, user-scalable=yes" />
(...)
<img src="foo.jpg" style="width:100%" /> 
```

在 Android 2.2 和 2.3 上不起作用 - 它在用户通过手势缩放视口时缩放了 img

和：

```
<meta name="viewport" content="width=480, initial-scale=1.0, minimum-scale=1.0, maximum-scale=3.0, user-scalable=yes" />
(...)
<img src="foo.jpg" style="width:480px" /> 
```

这在 Android 上也不起作用——它在开始时产生了大约 4/3 视口大小的 img（因此用户能够向右滚动）。

我可能遗漏了一些明显的东西，但到目前为止搜索谷歌并没有给出我想要的结果

**编辑**：这似乎是PhoneGap中的错误，第二个代码在PhoneGap之外工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-20T12:11:33.737

这是 Phonegap (2012) 中的一个错误。从那时起它就长期固定了:)

# java - Android示例项目编译失败？

> ID：13386290
> 
> 赞同：0
> 
> 时间：2012-11-14T19:54:42.277
> 
> 标签：java, android

我是 Android 世界的新手。只是学习。我想研究建立[这个](http://www.edumobile.org/android/android-development/mini-notepad/comment-page-1/#comment-1127)项目。但由于所有 R.* 成员以及其他原因，它都失败了。在网上搜索后，我发现了几个博客来修复生成的 R.java 文件。但我无法修复它。也许我不太了解 Android 和 Java。任何人都可以从这个正确构建的示例中制作一个 Eclipse 项目吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:58:03.603

尝试清理您的项目。如果这不起作用，请检查您的 xml 文件是否有任何错误。这是获取与`R.java*`.

# macos - 在 OS X 上，如何将 shell 从 fish 改回 bash？

> ID：13386292
> 
> 赞同：30
> 
> 时间：2012-11-14T19:54:57.120
> 
> 标签：macos, bash, terminal, fish

我最近有点喜欢 bash 而不是钓鱼，我想知道我是否可以把它改回来。我试过这个命令：`chsh -s /bin/bash`但关闭终端并重新打开它并没有将它恢复到 bash，但它仍然是鱼。

事实上，我如何去除鱼？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-14T20:07:51.880

转到系统偏好设置，用户和组，单击锁进行更改，右键单击（或控制单击）您的用户名，选择“高级选项”，您应该有一个字段来更改您的外壳。在那里更改它，重新启动，您的新外壳应该生效。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-12-14T11:27:53.877

好简单：

*   从 FISH 到 BASH ：
    在您的 Fish 终端中，键入`bash --login`以切换到 Bash
*   从 BASH 到 FISH ：
    在 Bash 终端中，键入`fish`以切换到 Fish

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-22T20:40:48.000

**更新 10.13.1：**

右键单击（ctrl+单击）左窗格中的用户名，而不是图像。

[![在此处输入图像描述](../Images/e90ef20a4a91194e258c6cbbf88a73b8.png)](https://i.stack.imgur.com/fh5k4.png)

# android - 日期选择器月份格式

> ID：13386293
> 
> 赞同：2
> 
> 时间：2012-11-14T19:54:57.780
> 
> 标签：android

当我在大多数 api 版本的 android 中显示 Datepicker 时，月份显示如下： ![在此处输入图像描述](../Images/18e931139765ca807577476ac3da374b.png)

但在 api 级别 10 中，月份显示如下：

![在此处输入图像描述](../Images/dbb187310e84574596ac231de918b428.png)

所以我想知道是否有办法强制只用 3 个字母显示月份并删除反斜杠

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:00:49.867

[对 DatePicker 的每种方法](http://developer.android.com/reference/android/widget/DatePicker.html)的快速研究表明，没有办法通过代码来完成。我怀疑如果正确选择了它的大小，3 个字母可能仍然会出现，但我没有时间对该假设进行试验/错误。

# vim - 如何在vim中所有未聚焦的窗口上激活自动换行？

> ID：13386295
> 
> 赞同：1
> 
> 时间：2012-11-14T19:55:10.863
> 
> 标签：vim

我正在用 vim 编程，但遇到了一个小问题。我的 vim 在垂直和水平方向上多次拆分，我想激活自动换行，就像`set wrap`我使用 ctrl-w/W 从一个窗口切换到另一个窗口时一样，我也想像`set nowrap`在焦点上一样展开。我不知道该怎么做，而且我从来不擅长为 vim 编写脚本。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:14:07.387

我不确定您要归档什么，但也许您可以添加

```
autocmd WinEnter * set nowrap
autocmd WinLeave * set wrap 
```

到你的 .vimrc。`set nowrap`这将在您进入`set wrap`的窗口和您离开的窗口上触发。从我运行的测试中，`WinEnter`当`WinLeave`您在几个拆分窗口之间切换时触发。

或者，如果您只希望仅在包含 txt 文件的缓冲区上发出这些命令，则可以`*`用 a替换。`*.txt`

# c++ - std0x 和非 std0x 之间的 Rcpp 不一致

> ID：13386296
> 
> 赞同：5
> 
> 时间：2012-11-14T19:55:15.407
> 
> 标签：c++, r, c++11, rcpp

我发现使用和不使用 -std=c++0x 编译的 Rcpp 之间存在奇怪的不一致。

考虑表达式

```
Function data_frame("data.frame");

GenericVector a;
a.push_back("17");

return data_frame(a, _["stringsAsFactors"]=0); 
```

（编者注：在 Rcpp 中对 DataFrame 的强制转换实际上归结为 R 函数，但不允许用户设置该标志。）

在“旧”C++（没有 -std=c++0x 集）中，此代码有效。在现代 C++（w/ -std=c++0x 设置）中，这失败了，说“无法将类“pairlist”强制转换为 data.frame”。

显然，这不是世界末日：我只是不使用任何更新的功能。然而，我承认完全不知道是什么导致了这种差异，以及如何在不丢弃 C++11 的情况下解决它。任何想法，任何人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T21:52:21.227

新标准的代码目标功能是在`Rcpp`大约 2 年前编写的。

但是后来我们意识到`CRAN`不接受`-std=c++0x`gcc 的标志（或其他编译器的等效标志），并强制 C++99 标准，因此我们不能实际使用它。

因此，我们几乎不需要维护有`C++11`意识的代码。这是一种耻辱，因为我们真的很想这样做，但我们更喜欢被 CRAN 接受的曝光。由于我们不维护，因此可能有很多事情不能正常工作。

这个特定问题可能很容易解决。一旦我们获得使用`C++11`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T20:26:17.297

我们喜欢 C++11，迫不及待地想要使用它。但是我们不能在上传到 CRAN 时使用它（根据 CRAN 维护者的法令，他们认为 C++11 在这一点上是“不可移植的”——请向他们投诉，而不是向我们投诉，这让你感到厌烦）。

因此，它目前被“禁止”。有一点检测`RcppCommon.h`，我们定义`HAS_CXX0X`. 但是我们还没有真正为此编写代码，因为我们（还）不能按照上一段。

因此，如果您发现了一个错误，请帮我们一个忙，并将其报告到请求后续发送的位置：`rcpp-devel`列表。可重现性很好，补丁更好:)

# android - Phonegap Android Analytics插件调用方法错误

> ID：13386297
> 
> 赞同：1
> 
> 时间：2012-11-14T19:55:23.723
> 
> 标签：android, cordova, plugins, analytics

我正在尝试将分析插件添加到我的 phonegap (2.0) 项目中。我让它在 iOS 中运行良好，但在 Android 中，我按照以下链接中的说明进行操作，但它以这个错误结束：

[https://groups.google.com/d/msg/phonegap/uqYjTmd4w_E/JbKNgAQbQpUJ](https://groups.google.com/d/msg/phonegap/uqYjTmd4w_E/JbKNgAQbQpUJ)

每次我尝试在模拟器中运行应用程序时，都会出现以下错误：

**未捕获的类型错误：无法在文件中调用未定义的方法“开始”...**

有人有同样的错误吗？

谢谢

# spring-batch - Spring Batch MultiResourcePartitioner 性能构建 BATCH_STEP_EXECUTION 表

> ID：13386300
> 
> 赞同：1
> 
> 时间：2012-11-14T19:55:40.613
> 
> 标签：spring-batch

我们有可能处理多达 20,000 个文件的作业。我们正在使用 a`MultiResourcePartitioner`进行设置。作业确实运行了，但我们注意到了一个瓶颈。

SpringBatch 正在为找到的每个文件在`BATCH_STEP_EXECUTION`表中创建条目，并且在为每个文件创建表条目之前不会处理任何文件。此表的加载似乎需要很长时间。

在本地测试中，尝试仅处理 1,000 个文件，将行添加到“BATCH_STEP_EXECUTION”需要 38-40 分钟。加载表后，文件的处理速度非常快（通常不到 1 分钟）。

我希望这不是典型的行为，我只是错过了一些东西。

这是数据库的设置方式（我们实际上是“OracleDataSource”的子类（我们使用“ojdbc6.jar”文件来获取该类），而 db_file 是一个用于获取 url、密码等的属性文件） ：

```
<bean id="dataSource" class="oracle.jdbc.pool.OracleDataSource" destroy-method="close">
    <constructor-arg value="db_file" /> 
       <property name="connectionCachingEnabled" value="true" />  
       <property name="connectionCacheProperties"> 
         <props merge="default">   
            <prop key="InitialLimit">10</prop>       
            <prop key="MinLimit">25</prop>           
            <prop key="MaxLimit">50</prop>     
            <prop key="InactivityTimeout">1800</prop>
            <prop key="AbandonedConnectionTimeout">900</prop>
            <prop key="MaxStatementsLimit">20</prop> 
            <prop key="PropertyCheckInterval">20</prop>     
         </props>     
       </property>
</bean> 
```

这是 JobRepository 定义的其余部分：

```
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource" />
</bean> 

<bean id="jobRepository" class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean" >
    <property name="databaseType" value="oracle" />
    <property name="dataSource" ref="dataSource" />
    <property name="transactionManager" ref="transactionManager" />
    <property name="isolationLevelForCreate" value="ISOLATION_DEFAULT"/>
</bean> 

<bean id="jobExplorer" class="org.springframework.batch.core.explore.support.JobExplorerFactoryBean">
    <property name="dataSource" ref="dataSource" />
</bean> 

<bean id="jobLauncher" class="org.springframework.batch.core.launch.support.SimpleJobLauncher"> 
    <property name="jobRepository" ref="jobRepository" /> 
</bean>

<bean id="jobParametersIncrementer" class="org.springframework.batch.core.launch.support.RunIdIncrementer" /> 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:20:23.803

作为仅供参考，SpringSource 已将此识别为错误：[Batch-1908](https://jira.springsource.org/browse/BATCH-1908?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel#issue-tabs)。

作为一种解决方法，我们只是减少在给定运行中要处理的文件数量，然后增加该作业在给定日期运行的次数。

我们使用 2,000 作为文件限制，因为它提供了可接受的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T07:48:06.473

将此作为替代方法。

为了从文件中加载表，最好使用 LOADDATA 。

[http://infolab.stanford.edu/~ullman/fcdb/oracle/or-load.html](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-load.html)

这将以更好的方式提高性能。对我来说，处理一个包含 100 万条记录的文件只需要 30 秒

# javascript - Javascript 对象属性在每次访问时都不会更新

> ID：13386306
> 
> 赞同：0
> 
> 时间：2012-11-14T19:55:58.230
> 
> 标签：javascript, oop, object, properties

oDevice 具有 Connect() 和 Disconnect() 函数。连接后，oTest.Capabilities 返回数据。断开连接时，访问 oTest.Capabilities 应该会引发异常。看起来在创建 oTest.Capabilities 属性之后，它保持相同的值。访问该属性不会导致它再次调用“this.oDevice.DeviceCapabilities”来获取新值。有没有办法让它在每次访问时更新？

```
var oTest = new Test();

function Test()
{   
    this.oDevice = new ActiveXObject("DeviceNMS.DeviceCLS");
    this.oDevice.Connect();

    this.Capabilities = this.oDevice.DeviceCapabilities;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:35:06.133

IE9？然后[`Object.defineProperty`](http://msdn.microsoft.com/en-us/library/ie/dd548687%28v=vs.94%29.aspx)，只要它处于标准模式，您就可以使用。我也希望`oDevice.DeviceCapabilities`成为一个动态更新对象，但如果它是静态的，你可以使用

```
function Test() {   
    this.oDevice = new ActiveXObject("DeviceNMS.DeviceCLS");
    this.oDevice.Connect();

    Object.defineProperty(this, "capabilities", {
        get: function() {
            return this.oDevice.DeviceCapabilities;
        }
    });
} 
```

在每次访问该`capabilities`属性时重新创建它。因此，如果您计划连续使用几次（例如迭代/枚举），请将其缓存在一个变量中，这样您就不会每次都调用 getter 函数。还要注意`myTest.capabilities !== myTest.capabilities`as`DeviceCapabilities`返回不同的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:01:18.650

访问属性时，Javascript 不会运行任何自定义代码*

因此，请创建`Capabilities`一个每次调用时都会运行的函数。

```
function Test()
{   
    this.oDevice = new ActiveXObject("DeviceNMS.DeviceCLS");
    this.oDevice.Connect();

    this.getCapabilities = function() {
      return this.oDevice.DeviceCapabilities;
    }
}

var oTest = new Test();
oTest.getCapabilities(); // note the () 
```

现在每次你打电话给`oTest.getCapabilities()`你评估`this.oDevice.DeviceCapabilities`并返回结果。这意味着您始终可以获得最新的值。

或者更好的是，把方法放在原型上！

```
function Test()
{   
    this.oDevice = new ActiveXObject("DeviceNMS.DeviceCLS");
    this.oDevice.Connect();
};

Test.prototype.getCapabilities = function() {
    return this.oDevice.DeviceCapabilities;
};

var oTest = new Test();
oTest.getCapabilities(); 
```

* * *

*通过和谐代理，在非常现代的不太受支持的实现中，有一些方法......但这完全是另一回事。

# android - Android屏幕方向与旋转

> ID：13386307
> 
> 赞同：1
> 
> 时间：2012-11-14T19:55:58.807
> 
> 标签：android

当用户旋转设备时，我正在使用 OrientationEventListener 正确定位我的活动。我通过调用 Activity.setRequestedOrientation(int) 来定位活动。

我的问题是 OrientationEventListener 从“自然设备位置”返回角度。setRequestedOrientation 采用 SCREEN_ORIENTATION_PORTRAIT 等参数。要从角度转换为方向，我需要知道“自然设备位置”是什么，即它是横向左侧、横向右侧、纵向还是纵向反转。不幸的是，API 似乎没有办法找出答案。

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:13:13.477

检查此链接：[检查 Android 手机上的方向](https://stackoverflow.com/questions/2795833/check-orientation-on-android-phone)

我认为您可以在更改方向时使用 onConfigurationChanged 来调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:17:27.743

您可以使用以下内容：

```
int orientation = getResources().getConfiguration().orientation; 
```

从文档：

`Overall orientation of the screen. May be one of ORIENTATION_LANDSCAPE, ORIENTATION_PORTRAIT.`

问候。

# batch-file - 对 Web 应用程序中的文档预览的建议？

> ID：13386309
> 
> 赞同：2
> 
> 时间：2012-11-14T19:56:03.957
> 
> 标签：batch-file, openoffice.org

我正在构建一个医疗计费和编码系统，其中一个规范是显示文档预览。我不需要能够在预览区域编辑文档，但我确实需要在我的应用程序中显示它们。我已经尝试过 Google Apps（不喜欢他们的 TOS），甚至想到了做一些类似的事情：

使用 openoffice 并批量将任何文档保存为 pdf 以供预览...编辑请按照下列步骤操作：

1.  锁定文件
2.  下载
3.  使用任何程序字、excel、....等进行编辑
4.  上传
5.  解锁文件

目标是 excel 文件将被编辑，但不在应用程序内。这将是一个简单的签入/签出系统，但为了预览这些文件，我遇到了问题。

任何建议都会很棒。我不确定我是否解释得足够好。

# perl - 使用perl动态计算excel行数

> ID：13386310
> 
> 赞同：0
> 
> 时间：2012-11-14T19:56:15.827
> 
> 标签：perl, excel

我正在编写一个解析 Excel 文件的 Perl 脚本。此脚本的目的是计算第 1 列中的每个单元格值，即第 2 列中的值的数量。

例如，一个看起来像这样的 Excel 文件：

```
12    abc
12    abc
12    efg
12    efg
13    hij
13    hij
13    klm 
```

我的脚本将返回：

对于单元格值 12，我有：

```
2 values "abc", 2 values "efg" and for cell value 13 i have : 2 values "hij" and 1 value "klm". 
```

我的脚本看起来像这样（我从 perl 文档中获取了这个例子）：

```
 use Spreadsheet::XLSX;

 my $excel = Spreadsheet::XLSX -> new ('Book1.xlsx');

 foreach my $sheet (@{$excel -> {Worksheet}}) {

    printf("Sheet: %s\n", $sheet->{Name});

    $sheet -> {MaxRow} ||= $sheet -> {MinRow}; 

     foreach my $row ($sheet -> {MinRow} .. $sheet -> {MaxRow}) {

            $sheet -> {MaxCol} ||= $sheet -> {MinCol};

            foreach my $col ($sheet -> {MinCol} ..  $sheet -> {MaxCol}) {

                    my $cell = $sheet -> {Cells} [$row] [$col];

                    if ($cell) {
                        #here I should count the cell values 
                    }
                print $cell;
            }

    }

 } 
```

我不知道如何做到这一点，因为我以前从未使用过 perl，而且我无法在网上找到与我想要的完全匹配的示例。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:07:29.743

使用哈希。用 计数`$hash{$column1}{$column2}++`。遍历键并打印计数值。是的，我给你留下了一些工作来填充 column1、column2 的值，并迭代哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:49:45.800

也许以下注释脚本会有所帮助：

```
use strict;
use warnings;
use Spreadsheet::XLSX;
use Data::Dumper;

# No need to iterate through columns, so set val for col 1
my $col1 = 0;
my %hash;

my $excel = Spreadsheet::XLSX->new('Book1.xlsx');

# Just get the first sheet
my $sheet = ${ $excel->{Worksheet} }[0];

# Calculate the range of rows
$sheet->{MaxRow} ||= $sheet->{MinRow};

# Iterate through each row
foreach my $row ( $sheet->{MinRow} .. $sheet->{MaxRow} ) {

    # The cell in column 1
    my $cell = $sheet->{Cells}[$row][$col1];

    if ($cell) {

        # The adjacent cell in column 2
        my $adjacentCell = $sheet->{Cells}[$row][ $col1 + 1 ];

        # Use a hash of hashes
        $hash{ $cell->{Val} }{ $adjacentCell->{Val} }++;
    }
}

# Numerically sort the keys; the value is a hash reference
for my $key1 ( sort { $a <=> $b } keys %hash ) {
    print "For cell value $key1: ";

    # Dereference the hash reference and get the keys/values
    while ( my ( $key2, $val2 ) = each %{ $hash{$key1} } ) {
        print qq{$val2 value(s) "$key2" };
    }
    print "\n";
}

# Show the hash structure
print "\n", Dumper \%hash; 
```

输出：

```
For cell value 12: 2 value(s) "abc" 2 value(s) "efg" 
For cell value 13: 1 value(s) "klm" 2 value(s) "hij" 

$VAR1 = {
          '13' => {
                    'klm' => 1,
                    'hij' => 2
                  },
          '12' => {
                    'abc' => 2,
                    'efg' => 2
                  }
        }; 
```

您可以执行以下操作来显示与键 '13' 关联的值：

```
# Show only the value(s) for key '13'
print "For cell value 13: ";

# Dereference the hash reference for key '13' and get the keys/values
while ( my ( $key2, $val2 ) = each %{ $hash{13} } ) {
    print qq{$val2 value(s) "$key2" };
} 
```

输出：

```
For cell value 13: 1 value(s) "klm" 2 value(s) "hij" 
```

# nhibernate - 具有二级缓存的 NHibernate 未重新水化属性标记为 insert="false" update="false"？

> ID：13386312
> 
> 赞同：1
> 
> 时间：2012-11-14T19:56:17.823
> 
> 标签：nhibernate, nhibernate-caches

在 Nhibernate 中实现二级缓存时遇到问题。我有一个类映射如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Data" namespace="Data">
   <class name="Account" table="Accounts" lazy="false">
     <cache region="Standard" usage="read-write" include="all"/>
     <id column="ID" name="ID">
       <generator class="assigned" />
     </id>
     <version name="VersionStamp" column="VersionStamp" type="integer" unsaved-value="0" />
     <property name="Name" not-null="true" />
     <property name="Type" not-null="true" />
     <property name="ClientID" not-null="true" insert="false" update="false" />
     <property name="DateCreated" not-null="true" type="UtcDateTime" />
     <property name="LastUpdatedDate" not-null="true" type="UtcDateTime" />
     <property name="IsActive" not-null="true" />
     <many-to-one name="Client" class="Client" column="ClientID" not-found="exception" not-null="true" />
   </class>
 </hibernate-mapping> 
```

属性“ClientID”是 Clients 表的外键，Client 多对一属性使用它来查找关联的客户端对象。

当我添加一个新帐户时，我使用 Session.Get 从数据库中查找 Client 对象并将其分配给我的 Account 对象的 Client 属性。在后台，当对象被写入数据库时​​，这也会自动填充 ClientID 属性，并且 ID 正确存储在数据库中。当我使用 Session.Get 按 ID 从数据库中检索 Account 对象时，检索对象时所有字段都正确填充。

但是，当我使用上面显示的设置实现二级缓存时，使用 Session.Get 检索 Account 对象时不会填充 ClientID 属性，但会正确填充 Client 属性。是否有某些原因为什么这不适用于二级缓存？还是我在映射/配置中做错了什么？

现在我只是使用 SysCache 作为我的缓存提供程序，并且查询和二级缓存都打开了。Client 类映射包含 Accounts 对应的一对多属性。

我喜欢在我的 Account 类上拥有 ClientID 属性的便利性，这样我就可以在不使用 Client 属性的情况下读取它，而且它似乎在没有缓存的情况下也能正常工作。

谢谢你的帮助。

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:00:02.613

我试图在本地重现您的情况。使用您的映射（与上面的代码片段相同），我只能在`UPDATE`. 在这种情况下，`ClientID`被缓存了，当`Client`引用改变时，`ClientID`保持不变。在其他情况下，缓存按预期工作。

解决方案是更改映射。以下建议的映射最适合 ClientID 等只读属性。（我也在使用这种方法）。

```
<property name="ClientID" formula="[ClientId]" 
        not-null="true" insert="false" update="false" /> 
```

所以诀窍在于**`formula`**映射而不是`Column`（没有提供时的默认值）

# .net - 我无法再在 VS 2012 中调试运行 .NET 程序集的本机代码

> ID：13386313
> 
> 赞同：2
> 
> 时间：2012-11-14T19:56:22.573
> 
> 标签：.net, debugging, visual-studio-2012

我有一个 Delphi 应用程序，它加载了一些我想要调试的 .NET 程序集。我不想调试 Delphi 代码，只想调试 .NET 程序集。

在 VS 2010 中，我所要做的就是使我的 .NET 代码的输出目录指向 Delphi 可执行文件夹并设置`Start external program`为指向可执行路径。当我按下 F5 时，它会自动启动 Delphi 代码，加载模块，然后我就可以调试了。

现在我迁移到 VS 2012。我做同样的事情，但调试不起作用。该过程开始并正确连接，但“模块”窗口完全为空。未加载任何符号。我无法调试任何东西。

为了让它在 VS 2012 中工作，我必须做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-17T13:52:50.053

我的情况与您的情况完全相同（希望为时不晚）。

问题是，在“附加进程”中，当您启动外部程序时，您可以选择 .NET 版本的调试器（在我们的例子中为 Managed 3-3.5），由于某种原因，默认调试器是 4。怎么办：文件> Add>Existing Project，添加非托管程序的基本EXE文件。它将显示为单个文件项目。右键单击它并“设置为启动项目”。再次右键单击和属性。设置调试器类型：托管（v3.5、v3.0、v2.0）。

就是这样，调试器现在将加载正确的版本。我很肯定这会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T01:14:58.847

我看到了完全相同的问题。使用 .NET 3.5 管理单元运行 MMC.exe。在升级到 VS2012 之前调试得很好，现在升级后它说没有加载本机符号并且断点不起作用。@jdv-JandeVaan 提示是我前进所需要的。我需要将调试器设置为使用 .NET 3.5。我能找到的唯一方法是在 Attach to Process... 对话框中选择 .NET 3.5。不方便，但它有效。

# ruby-on-rails - Heroku“没有这样的应用程序”没有错误

> ID：13386319
> 
> 赞同：2
> 
> 时间：2012-11-14T19:56:56.350
> 
> 标签：ruby-on-rails, heroku

我在尝试将 Rails 应用程序部署到 Heroku 时遇到了最困难的情况。

我将应用程序推送到它并且没有收到任何错误，但是当我尝试访问它时，我收到一条“没有这样的应用程序”的消息，我找不到原因。

我已按照以下步骤操作：

1)在我的本地机器上克隆了 git repo ( [https://github.com/mquan/lavish )。](https://github.com/mquan/lavish)

2）更改了gemfile，添加了更新版本的jquery-rails（因为我收到一个错误）并添加了heroku文档中所述的'thin' gem。

3）在本地安装它并且它工作（事实上，如果我运行服务器导轨它工作，但如果我运行服务器导轨 -e 生产则不行）。

4）将其推送到heroku，没有错误。（我也尝试预编译资产以查看是否有任何更改）。

5）当我访问页面（heroku open）时，我收到“没有这样的应用程序”消息。

由于我对heroku和rails完全陌生，所以我对正在发生的事情一无所知。

万分感谢！

**编辑**

日志如下所示：

```
2012-11-14T06:36:28+00:00 heroku[web.1]: State changed from starting to down

2012-11-14T06:36:30+00:00 heroku[web.1]: Starting process with command `bundle exec rails server thin -p 59071`

2012-11-14T06:36:35+00:00 app[web.1]: => Call with -d to detach

2012-11-14T06:36:35+00:00 app[web.1]: => Ctrl-C to shutdown server

2012-11-14T06:36:35+00:00 app[web.1]: => Booting Thin

2012-11-14T06:36:35+00:00 app[web.1]: => Rails 3.2.0 application starting in production on http:// 0.0.0.0:59071

2012-11-14T06:36:35+00:00 app[web.1]: >> Thin web server (v1.5.0 codename Knife)

2012-11-14T06:36:35+00:00 app[web.1]: >> Maximum connections set to 1024

2012-11-14T06:36:35+00:00 app[web.1]: >> Listening on 0.0.0.0:59071, CTRL+C to stop

2012-11-14T06:36:39+00:00 heroku[web.1]: Stopping all processes with SIGTERM

2012-11-14T06:36:40+00:00 app[web.1]: Exiting

2012-11-14T06:36:41+00:00 heroku[web.1]: Process exited with status 0

2012-11-14T20:00:11+00:00 heroku[slugc]: Slug compilation started

2012-11-14T20:01:58+00:00 heroku[slugc]: Slug compilation finished

2012-11-14T20:03:24+00:00 heroku[web.1]: Unidling

2012-11-14T20:03:24+00:00 heroku[web.1]: State changed from down to starting

2012-11-14T20:03:35+00:00 heroku[web.1]: State changed from starting to up

2012-11-14T20:03:37+00:00 heroku[router]: at=info method=GET path=/ host=blooming-castle-2034.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=13ms service=909ms status=301 bytes=14 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:00:48.273

通过查看[Lavish](https://github.com/mquan/lavish)的代码，看起来在 Rails 启动时加载了一个初始化文件，它将所有非 www 域请求重定向到 www。Heroku 不会在您的 Heroku 应用程序 url 之前使用 www 前缀。

[这是应该删除的文件的链接](https://github.com/mquan/lavish/blob/master/config/initializers/use_www.rb)

作为免责声明，我不确定这是否会对 Lavish 应用程序产生不利影响，因为我以前从未处理过它。

# php - Duckduckgo API 不显示结果

> ID：13386320
> 
> 赞同：2
> 
> 时间：2012-11-14T19:56:57.767
> 
> 标签：php, api

我将duckduckgo API 与PHP 一起使用。该 API 有效，但如果我搜索一个短语，我的浏览器中不会出现任何内容。如果我搜索“自由职业者”，则会出现搜索结果。但是，如果我输入更具体的内容，则不会出现任何内容。我可以做些什么来让短语结果出现吗？这是我的代码

```
<?php

require_once("DuckDuckGoZeroclickInfo.php");
$obj = new DuckDuckGoZeroclickInfo("", "");
$response = $obj-> zeroClickInfo("Freelance", $callback = null, $no_html = null, $no_redirect = null, $skip_disambig = null);
print "Raw Body: $response->rawBody"; 
var_dump($response->body); 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:05:41.847

为什么不简单地编写自己的 API 调用，而不是使用一段时间未更新的 Mashape PHP 库。

他们的 API uri 是这样形成的：

```
http://api.duckduckgo.com/?q=simpsons+characters&format=json&pretty=1 
```

或者在你的情况下：`http://api.duckduckgo.com/?q=freelance&format=json`

查询的主 url，`http://api.duckduckgo.com/?q=`后跟您的查询字符串，其中空格替换`+`为`&format=json`或`&format=xml`

# linux - shell脚本中的命令返回

> ID：13386321
> 
> 赞同：2
> 
> 时间：2012-11-14T19:57:00.323
> 
> 标签：linux, sh, openwrt

我在 OpenWrt 中开发了一个脚本外壳，如下所示，我注意到一个奇怪的行为（“返回”），如我在脚本末尾的评论中所示。它返回 43 而不是 9003 和 45 而不是 9005，你对这种行为有什么解释吗？

```
#!/bin/sh

get_value() {
case "$1" in
    aa)
    if [ "$2" = "1" ]; then
        return 9003
    fi
# function fn1 to execute
    fn1
    return 0
    ;;
    bb)
    if [ "$2" = "1" ]; then
        return 9003
    fi
# function fn2 to execute
    fn2
    return 0
    ;;
    cc)
    if [ "$2" = "1" ]; then
        return 9003
    fi
# function fn3 to execute
    fn3
    return 0
    ;;
esac
return 9005
}
# when a call get_value
get_value aa 0
echo $?
# result 0
get_value aa 1
echo $?
# result 43 (not 9003)
get_value dd 1
echo $?
# result 45 (not 9005) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:59:36.853

在大多数 Unix 系统上，返回值被解释为模 256。由于 9003 mod 256 是 43，并且 9005 mod 256 等于 45，因此您分别得到这些返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:03:57.847

POSIX 兼容系统中的返回值只有 1 字节 = 8 位 = 255 个可能的值。除非你找到一个支持更多的奇怪系统，否则你应该选择一组不同的值。

请参阅[此](https://stackoverflow.com/questions/1101957/are-there-any-standard-exit-status-codes-in-linux)问题以获取有关返回代码标准的更多详细信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T20:02:23.903

H2CO3 已经解释了这种行为背后的原因。

我可以建议一个解决方法：将需要从函数返回的数字打印到标准输出，然后通过命令替换捕获它。

即，用从

```
return 9003 
```

至

```
echo "9003"
return 0 
```

并通过以下方式捕获它：

```
retVal=$(get_value aa 1) 
```

所以你的代码应该是这样的：

```
#!/bin/sh

get_value() {
case "$1" in
    aa)
    if [ "$2" = "1" ]; then
        echo "9003"
        return 0
    fi
# function fn1 to execute
    fn1
    echo "0"
    return 0
    ;;
    bb)
    if [ "$2" = "1" ]; then
        echo "9003"
        return 0
    fi
# function fn2 to execute
    fn2
    echo "0"
    return 0
    ;;
    cc)
    if [ "$2" = "1" ]; then
        echo "9003"
        return 0
    fi
# function fn3 to execute
    fn3
    echo "0"
    return  0
    ;;
esac
echo "9005"
return 0
}

retVal=$(get_value aa 0)
echo "$retVal"

retVal=$(get_value aa 1)
echo "$retVal"

retVal=$(get_value dd 1)
echo "$retVal" 
```

只要记住将您不希望返回到 retVal 的任何内容重定向到`/dev/stderr`

# c++ - 如何使用 Cygwin 在 C++ 中添加外部库

> ID：13386323
> 
> 赞同：2
> 
> 时间：2012-11-14T19:57:02.970
> 
> 标签：c++, g++, cygwin

我已经浪费时间试图解决这个问题，但到目前为止还没有运气......我已经尝试通过 StackOverflow 查看相同的问题，但主要与人们使用的 IDE 有关，例如 VS 或 Eclipse。

我正在为斯坦福读者的 C++ 课程做一些示例，但代码无法正常工作。我试图弄清楚如何使用外部库，但总是出错。我可能没有使用正确的命令，但是我不知道要使用哪个命令。

我正在使用 Cygwin，它是做 C++ 练习的终端。我将所有文件都放在同一个文件夹中。我正在使用 Windows 7，但这不应该是最大的问题。

作为一个例子，这个错误很好地展示了我在编写 g++ Craps.cpp 时得到的结果：

> $ g++ 废话.cpp
> 
> /tmp/ccdTdi0t.o:Craps.cpp:(.text+0x1cf): 对“randomInteger(int, int)”的未定义引用
> 
> /tmp/ccdTdi0t.o:Craps.cpp:(.text+0x1e6): undefined reference to `randomInteger(int, int)'
> 
> /usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: /tmp/ccdTdi0t.o: 坏
> 
> 在“.ctors”部分中重新定位地址 0x0
> 
> collect2: ld 返回 1 个退出状态

我这次运行的示例只是带有外部库的示例之一，如果我错了另一个，它会给我同样的错误。它不会找到图书馆。

这是我的主要也称为 Craps.cpp：

```
#include <iostream>
#include "random.h"
using namespace std;

bool tryToMakePoint(int point);
int rollTwoDice();
int main() {
   cout << "This program plays a game of craps." << endl;
   int point = rollTwoDice();
   switch (point) {
    case 7: case 11:
      cout << "That's a natural. You win." << endl;
      break;
    case 2: case 3: case 12:
      cout << "That's craps. You lose" << endl;
      break;
    default:
      cout << "Your point is " << point << "." << endl;
      if (tryToMakePoint(point)) {
         cout << "You made your point. You win." << endl;
         } else {
            cout << "You rolled a seven. You lose." << endl;
         }
   }
   return 0;
}

bool tryToMakePoint(int point) {
   while (true) {
      int total = rollTwoDice();
      if (total == point) return true;
      if (total == 7) return false;
   }
}

int rollTwoDice() {
   cout << "Rolling the dice . . . " << endl;
   int d1 = randomInteger(1, 6);
   int d2 = randomInteger(1, 6);
   int total = d1 + d2;
   cout << "You rolled " << d1 << " and " << d2 
        << " - that's " << total << endl;
   return total;
} 
```

我的随机数.cpp：

```
#include <cstdlib>
#include <cmath>
#include <ctime>
#include "random.h"
using namespace std;

void initRandomSeed();

int randomInteger(int low, int high) {
   initRandomSeed();
   double d = rand() / (double(RAND_MAX) + 1);
   double s = d * (double(high) - low + 1);
   return int(floor(low + s ));
}

double randomReal(double low, double high) {
   initRandomSeed();
   double d = rand() / (double(RAND_MAX) + 1);
   double s = d * (high - low);
   return low + s;
}

bool randomChance(double p) {
   initRandomSeed();
   return randomReal(0, 1) < p;

}

void setRandomSeed(int seed) {
   initRandomSeed();
   srand(seed);
}

void initRandomSeed() {
   static bool initialized = false;
   if (!initialized) {
      srand(int(time(NULL)));
      initialized = true;
   }
} 
```

最后是我的 random.h：

```
#ifndef _random_h
#define _random_h

int randomInteger(int low, int high);

double randomReal(double low, double high);

bool randomChance(double p);

void setRandomSeed(int seed);

#endif 
```

我希望有一个人可以帮助我。如果这是错误的 Cygwin 命令，那么如果我能看到我应该写什么就太好了。

编辑：刚刚发现我什至无法正确写下书中的示例。现在已修复，应该没有错误......我非常希望如此。对于那个很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:03:36.767

很快，您应该`random.cpp`在命令行中添加（或者，如果您已经编译它，则添加一个目标文件或编译代码所在的库）：

```
g++ Craps.cpp random.cpp 
```

你面临的问题是命令行说 Craps.cpp 中的代码应该被编译然后链接到一个可执行文件中。虽然有外部函数的前向声明来编译文件就足够了，但您应该将这些函数的代码提供给链接器，以便它能够创建可执行文件。

至于库，您通常会指定需要与`-l`GCC 选项一起使用的库。并且您可能需要（使用`-L`）指定从中获取库的路径，即使它们都在当前目录中。例如，假设您有一个名为`librandom.a`or`librandom.so`在当前目录中的库：

```
g++ Craps.cpp -L. -l random 
```

对于外部库，可能需要指定其他目录，以便链接器知道在哪里可以找到它需要的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:42:02.587

其他答案有简单的命令来编译它，但这里有一个非常粗略和简单的 Makefile 示例，让你开始走这条路。创建一个以`Makefile`这些内容命名的文件，其中`<tab>`必须是一个实际的制表符，而不是一些空格：

```
Craps.exe : Craps.o random.o
<tab>g++ -o $@ $^

Craps.o random.o : random.h 
```

然后运行

```
make Craps.exe 
```

（可能`gmake`或`mingw32-make`代替 plain `make`）。

现在 Make 内置了一些关于文件类型的魔法，所以当它看到`Craps.exe`需要这两个`.o`文件时，它会开始寻找可以制作它们的文件，它会找到 .cpp 文件，并知道如何将它们编译成 .o 文件. 现在它并没有隐含地知道如何制作`.exe`文件`.o`，所以这就是我们有第二行的原因。There`$@`表示规则的目标（`Craps.exe`此处），而`$^`表示 . 之后列出的所有文件`:`。

规则的`Craps.o random.o:random.h`意思是，如果random.h改变了，Craps.o和random.o需要重新重新创建（这些.h文件依赖可以自动生成，但只要你只有几个文件，写它们用手可以）。

如果需要添加更多的源文件，只需在第一行添加.o后缀即可，make会将它们包含在编译中。另请注意 make 将如何只编译更改的文件...然后当您获得更多 .h 文件时，您将需要添加 .h 文件依赖项。

# android - Android httpget 无法正常工作

> ID：13386326
> 
> 赞同：0
> 
> 时间：2012-11-14T19:57:06.890
> 
> 标签：android, http, url, get, execute

我在通过 android 中的 httpget 执行 url 时遇到问题。

```
try 
    {   
        DefaultHttpClient client = new DefaultHttpClient();
        HttpGet getURL = new HttpGet("http://www.example.com/index.php?text=x");
        client.execute(getURL);
        Toast.makeText(this.getBaseContext(), "I'm here", Toast.LENGTH_LONG).show();
    } catch (Exception e) {
        Toast.makeText(this.getBaseContext(), "Code Failed:" + e.getLocalizedMessage(), Toast.LENGTH_LONG).show();
        } 
```

出于某种原因，我的应用程序将显示一个带有消息的 Toeast：“代码失败：空”。我只想执行一个 URL。当 URL 被调用时，我的 php 文件将更新数据库中的一条记录。我只想在我的 mysql 数据库中更新/插入数据库。所以不需要解析 json/xml/other 响应。

如果我在 logcat 中显示我的异常，这就是我所看到的：

```
11-14 13:56:39.255: E/MYAPP(19638): exception
11-14 13:56:39.255: E/MYAPP(19638): android.os.NetworkOnMainThreadException
11-14 13:56:39.255: E/MYAPP(19638):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
11-14 13:56:39.255: E/MYAPP(19638):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-14 13:56:39.255: E/MYAPP(19638):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-14 13:56:39.255: E/MYAPP(19638):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-14 13:56:39.255: E/MYAPP(19638):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
11-14 13:56:39.255: E/MYAPP(19638):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-14 13:56:39.255: E/MYAPP(19638):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-14 13:56:39.255: E/MYAPP(19638):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-14 13:56:39.255: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
11-14 13:56:39.255: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
11-14 13:56:39.255: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-14 13:56:39.255: E/MYAPP(19638):     at com.thepl.shopapp.MainActivity.onCreate(MainActivity.java:156)
11-14 13:56:39.255: E/MYAPP(19638):     at android.app.Activity.performCreate(Activity.java:5184)
11-14 13:56:39.255: E/MYAPP(19638):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
11-14 13:56:39.255: E/MYAPP(19638):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
11-14 13:56:39.255: E/MYAPP(19638):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
11-14 13:56:39.255: E/MYAPP(19638):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
11-14 13:56:39.255: E/MYAPP(19638):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
11-14 13:56:39.255: E/MYAPP(19638):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 13:56:39.255: E/MYAPP(19638):     at android.os.Looper.loop(Looper.java:137)
11-14 13:56:39.255: E/MYAPP(19638):     at android.app.ActivityThread.main(ActivityThread.java:4898)
11-14 13:56:39.255: E/MYAPP(19638):     at java.lang.reflect.Method.invokeNative(Native Method)
11-14 13:56:39.255: E/MYAPP(19638):     at java.lang.reflect.Method.invoke(Method.java:511)
11-14 13:56:39.255: E/MYAPP(19638):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
11-14 13:56:39.255: E/MYAPP(19638):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
11-14 13:56:39.255: E/MYAPP(19638):     at dalvik.system.NativeStart.main(Native Method)
11-14 13:56:58.205: E/MYAPP(19638): exception
11-14 13:56:58.205: E/MYAPP(19638): android.os.NetworkOnMainThreadException
11-14 13:56:58.205: E/MYAPP(19638):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
11-14 13:56:58.205: E/MYAPP(19638):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-14 13:56:58.205: E/MYAPP(19638):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-14 13:56:58.205: E/MYAPP(19638):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-14 13:56:58.205: E/MYAPP(19638):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
11-14 13:56:58.205: E/MYAPP(19638):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-14 13:56:58.205: E/MYAPP(19638):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-14 13:56:58.205: E/MYAPP(19638):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-14 13:56:58.205: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
11-14 13:56:58.205: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
11-14 13:56:58.205: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-14 13:56:58.205: E/MYAPP(19638):     at com.thepl.shopapp.MainActivity.onCreate(MainActivity.java:156)
11-14 13:56:58.205: E/MYAPP(19638):     at android.app.Activity.performCreate(Activity.java:5184)
11-14 13:56:58.205: E/MYAPP(19638):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
11-14 13:56:58.205: E/MYAPP(19638):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
11-14 13:56:58.205: E/MYAPP(19638):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
11-14 13:56:58.205: E/MYAPP(19638):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
11-14 13:56:58.205: E/MYAPP(19638):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
11-14 13:56:58.205: E/MYAPP(19638):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 13:56:58.205: E/MYAPP(19638):     at android.os.Looper.loop(Looper.java:137)
11-14 13:56:58.205: E/MYAPP(19638):     at android.app.ActivityThread.main(ActivityThread.java:4898)
11-14 13:56:58.205: E/MYAPP(19638):     at java.lang.reflect.Method.invokeNative(Native Method)
11-14 13:56:58.205: E/MYAPP(19638):     at java.lang.reflect.Method.invoke(Method.java:511)
11-14 13:56:58.205: E/MYAPP(19638):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
11-14 13:56:58.205: E/MYAPP(19638):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
11-14 13:56:58.205: E/MYAPP(19638):     at dalvik.system.NativeStart.main(Native Method)
11-14 13:56:59.100: E/MYAPP(19638): exception
11-14 13:56:59.100: E/MYAPP(19638): android.os.NetworkOnMainThreadException
11-14 13:56:59.100: E/MYAPP(19638):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
11-14 13:56:59.100: E/MYAPP(19638):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-14 13:56:59.100: E/MYAPP(19638):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-14 13:56:59.100: E/MYAPP(19638):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-14 13:56:59.100: E/MYAPP(19638):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
11-14 13:56:59.100: E/MYAPP(19638):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-14 13:56:59.100: E/MYAPP(19638):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-14 13:56:59.100: E/MYAPP(19638):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-14 13:56:59.100: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
11-14 13:56:59.100: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
11-14 13:56:59.100: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-14 13:56:59.100: E/MYAPP(19638):     at com.thepl.shopapp.MainActivity.onCreate(MainActivity.java:156)
11-14 13:56:59.100: E/MYAPP(19638):     at android.app.Activity.performCreate(Activity.java:5184)
11-14 13:56:59.100: E/MYAPP(19638):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
11-14 13:56:59.100: E/MYAPP(19638):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
11-14 13:56:59.100: E/MYAPP(19638):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
11-14 13:56:59.100: E/MYAPP(19638):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
11-14 13:56:59.100: E/MYAPP(19638):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
11-14 13:56:59.100: E/MYAPP(19638):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 13:56:59.100: E/MYAPP(19638):     at android.os.Looper.loop(Looper.java:137)
11-14 13:56:59.100: E/MYAPP(19638):     at android.app.ActivityThread.main(ActivityThread.java:4898)
11-14 13:56:59.100: E/MYAPP(19638):     at java.lang.reflect.Method.invokeNative(Native Method)
11-14 13:56:59.100: E/MYAPP(19638):     at java.lang.reflect.Method.invoke(Method.java:511)
11-14 13:56:59.100: E/MYAPP(19638):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
11-14 13:56:59.100: E/MYAPP(19638):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
11-14 13:56:59.100: E/MYAPP(19638):     at dalvik.system.NativeStart.main(Native Method)
11-14 13:57:21.185: E/MYAPP(19638): exception
11-14 13:57:21.185: E/MYAPP(19638): android.os.NetworkOnMainThreadException
11-14 13:57:21.185: E/MYAPP(19638):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
11-14 13:57:21.185: E/MYAPP(19638):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-14 13:57:21.185: E/MYAPP(19638):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-14 13:57:21.185: E/MYAPP(19638):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-14 13:57:21.185: E/MYAPP(19638):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
11-14 13:57:21.185: E/MYAPP(19638):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-14 13:57:21.185: E/MYAPP(19638):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-14 13:57:21.185: E/MYAPP(19638):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-14 13:57:21.185: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
11-14 13:57:21.185: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
11-14 13:57:21.185: E/MYAPP(19638):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-14 13:57:21.185: E/MYAPP(19638):     at com.thepl.shopapp.MainActivity.onCreate(MainActivity.java:156)
11-14 13:57:21.185: E/MYAPP(19638):     at android.app.Activity.performCreate(Activity.java:5184)
11-14 13:57:21.185: E/MYAPP(19638):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
11-14 13:57:21.185: E/MYAPP(19638):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
11-14 13:57:21.185: E/MYAPP(19638):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
11-14 13:57:21.185: E/MYAPP(19638):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
11-14 13:57:21.185: E/MYAPP(19638):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
11-14 13:57:21.185: E/MYAPP(19638):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 13:57:21.185: E/MYAPP(19638):     at android.os.Looper.loop(Looper.java:137)
11-14 13:57:21.185: E/MYAPP(19638):     at android.app.ActivityThread.main(ActivityThread.java:4898)
11-14 13:57:21.185: E/MYAPP(19638):     at java.lang.reflect.Method.invokeNative(Native Method)
11-14 13:57:21.185: E/MYAPP(19638):     at java.lang.reflect.Method.invoke(Method.java:511)
11-14 13:57:21.185: E/MYAPP(19638):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
11-14 13:57:21.185: E/MYAPP(19638):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
11-14 13:57:21.185: E/MYAPP(19638):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:21:20.357

您应该在主 UI 线程上进行网络调用。以下是异常的定义：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

查看我在以下帖子中的答案以获取解决方案：

[java.util.zip.GZIPInputStream.close 能否导致android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/13200863/can-java-util-zip-gzipinputstream-close-cause-android-os-networkonmainthreadexce/13200979#13200979)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:21:42.470

似乎堆栈跟踪非常有用。如果您尝试在主 (UI) 线程上执行长时间运行的工作，则 Strictmode 会引发异常。

Android 线程模型有两个规则：

1.  不要在主线程上做长时间的工作
2.  不要从 UI 线程外部更新 UI

你违反了这些规则中的第一条。

# drop-down-menu - 使用引导下拉导航是否可以链接到根目录之外的页面？

> ID：13386327
> 
> 赞同：1
> 
> 时间：2012-11-14T19:57:08.863
> 
> 标签：drop-down-menu, navbar

好的，所以几乎一切对我来说都很好。当我尝试将其用作 Dreamweaver 中的模板并创建网页时，链接有效，下拉菜单也有效。但只有当我创建的页面位于同一根目录中时，下拉菜单才有效。如果我创建其他文件夹并在其中保存网页，我可以从下拉菜单中访问这些页面，但是一旦我进入另一个文件夹内的页面并尝试使用下拉菜单从那里导航，我可以不。不会再掉下去了。我必须单击不在文件夹内的另一个链接，例如主页链接。我认为这可能是路径问题，但我也尝试使路径成为绝对路径而不是相对路径，但这也没有奏效。

我有一种感觉，这将是一件如此容易和简单的事情，我没有想到或忽视，但我只是没有任何运气。

下面是我从下载中用作示例的代码。如果有人能指出我正确的方向，那就太好了！

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <style>
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
    </style>
    <link rel="stylesheet" href="../css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="../css/main.css">

    <script src="../js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>
    <script type="text/javascript">  
    $(document).ready(function () {  
        $('.dropdown-toggle').dropdown();  
    });  
</script>

      <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

    <div class="navbar navbar-inverse navbar-static-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="#">Project name</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li class="active"><a href="../index.html">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="../test2.html">In the Root</a></li>
                                <li><a href="../resources/test1.html">In Subfolder</a></li>
                                <li><a href="file:///Users/ugb484/Desktop/initializr/resources/test3.html">Absolute</a></li>
                                <li class="divider"></li>
                                <li class="nav-header">Nav header</li>
                                <li><a href="#">Separated link</a></li>
                                <li><a href="#">One more separated link</a></li>
                            </ul>
                        </li>
                    </ul>

                </div><!--/.nav-collapse -->
            </div>
        </div>
    </div>        

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js">     <\/script>')</script>

    <script src="../js/vendor/bootstrap.min.js"></script>

    <script src="../js/plugins.js"></script>
    <script src="../js/main.js"></script>

     <script type="text/javascript">  
    $(document).ready(function () {  
        $('.dropdown-toggle').dropdown();  
    });  
</script>

    <script>
        var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
    </script> 
```

# java - JScrollPane中的java巨大BufferedImage

> ID：13386332
> 
> 赞同：2
> 
> 时间：2012-11-14T19:57:26.990
> 
> 标签：java, image, jpanel, jscrollpane, bufferedimage

我需要将一个巨大的图像（用于访问颜色等的 BufferedImage）放入 JScrollPane 派生类中。没有什么很难，直到那里。

该图像是 A3 材料样本的 JPG 扫描，其大小为 13030x20840 像素，24 位，磁盘上的重量为 12MB -> RAM 中约为 800MB。

我将 BufferedImage 嵌入到 Jpanel 中，它作为 Scrollpane 的视图。

当我尝试滚动/拖动我的图像时，响应需要几秒钟，所以它不是很方便。

我需要你的帮助才能知道我应该怎么做才能使滚动窗格的滚动和图像拖动尽可能平滑和反应，但我很容易发现使用这样的图像可能是不可能的。

我尝试了很多选项，例如双缓冲等，但我对 Swing 还很陌生，那么很可能我错过了一些简单的解决方案。

如果需要通过其他方式或其他方式更改 BufferedImage，我可以接受任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:04:02.390

所以，我们有一个 13,030 x 20,840 像素的大图像。

如果我们将此图像分解为 256 x 256 像素的图块，我们会得到一个图块集，其中包含 51 个图块和 82 个图块。行和列中的最后一个图块将是部分图像，因为 256 不会均匀地进入 13,030 和 20,840。

假设我们的显示窗口是 400 X 400 像素。我们还假设从大图像的左上角开始。

我们拍摄并制作一个 3 x 3 平铺缓冲图像。这将是 768 x 768 像素，这允许足够的重叠以实现平滑滚动。我们从第一行获取前 3 个图块，从第二行获取前 3 个图块，从第三行获取前 3 个图块，以制作我们的 3 x 3 图块缓冲图像。

现在，当我们在 JScrollPane 上设置水平和垂直滚动时，我们必须将水平滚动的最大值设置为 13,030，垂直滚动的最大值设置为 20,840。这样用户就可以动态地意识到他正在滚动一个大图像。

好的，我们显示 3 x 3 平铺缓冲图像。用户向右滚动以查看更多图像。用户滚动了 256 个像素。

应用程序现在必须构建一个新的 3 x 3 平铺缓冲图像。我们从第一行、第二行和第三行中取出第 2 到第 4 个图块。我们显示这个新的缓冲图像。对用户来说，它看起来就像一张巨大的图像。对于应用程序，会显示一系列小的 3 x 3 平铺缓冲图像。

mKorbel 已经创建了一些[代码](https://stackoverflow.com/questions/11330268/how-to-smoothen-scrolling-of-jframe-in-java/11330436#11330436)来动态构建和显示这些较小的缓冲图像。

要处理缩放，您可以在 Java 应用程序之外调整大图像的大小并创建多个图块集。这使得 Java 应用程序代码更加复杂，但比尝试调整 Java 应用程序中较小的缓冲图像的大小要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:40:24.667

我在那里找到了我需要的东西：

[非常大的图像处理和平铺](https://stackoverflow.com/questions/2592281/very-large-image-manipulation-and-tiling)

[一本好书，显示的样本涵盖了这一点。](http://www.informit.com/articles/article.aspx?p=23668&seqNum=10)

Java JAI 库有很多特性可以处理这类问题，并且得到 Oracle 的支持，这意味着它（理论上）是稳定和可持续的。

感谢@BryanD！

# asp.net - 断点不会被命中

> ID：13386333
> 
> 赞同：2
> 
> 时间：2012-11-14T19:57:30.383
> 
> 标签：asp.net, visual-studio, debugging, visual-studio-2012

这一定是我见过的最令人沮丧的事情。我正在使用一个 asp.net 网站（我不经常这样做），并且每隔一段时间，我的断点就会停止工作。

大约一半的时间是因为它不加载符号。另一半，源代码与原始代码不同。删除解决方案文件并重新保存应用程序通常会修复它，但我已经厌倦了一直这样做。

我已经尝试了网络必须提供的几乎所有解决方案，但到目前为止还没有运气。不过，请不要拒绝提供您可能有的任何建议。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:04:49.123

有关断点的信息（以及其他信息）保存在与解决方案文件相同的目录中，位于以`.suo`扩展名结尾的隐藏文件中。

关闭解决方案，找到这个以 结尾的隐藏文件`.suo`，备份，然后从那里删除，然后也许你的问题就解决了。

当我遇到断点问题时，这是我做的第一件事，并且对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:37:54.690

1-检查您是否具有以下文件夹的完全访问权限

C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET 文件

2- 如果是，请关闭 VisualStudio 并删除所有包含的文件夹。清理并重建您的项目。3-如果否，您需要获得完全访问权限并尝试删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:08:19.553

重建通常会为我解决这个问题（不是构建，而是构建 -> 重建解决方案）。这会完整构建解决方案中的所有内容。您也可以尝试进行清理和构建。

# javascript - 性能方面，我应该使用 @font-face 还是应该使用 Javascript 和 HTML 画布“绘制”文本？

> ID：13386334
> 
> 赞同：0
> 
> 时间：2012-11-14T19:57:30.883
> 
> 标签：javascript, html, optimization, canvas, font-face

我的情况是我必须创建实体时尚杂志的网络版本。杂志封面有5种不同的字体，5种不同的风格。性能方面，我应该使用 @font-face 还是应该使用 Javascript 和 HTML 画布“绘制”文本？

编辑：Web 版本针对 iPad，我将构建 Web 应用程序，然后使用 PhoneGap，以便我可以将应用程序提交到 App Store。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:39:27.213

关于这个答案只能做出假设，因为很大程度上取决于：

1.  操作系统和浏览器，因为是操作系统和浏览器完成了美化 HTML 文档的工作。
2.  打开您的网页的人的带宽速度。使用 CSS 方法，需要下载另一个资源（或多个字体资源）。是的，这几天影响不大。
3.  Canvas 的局限性如何，例如国际化、搜索引擎优化、与 Web 内容管理的集成、可访问性等……最可能但需要努力。
4.  最后，努力做画布 vs CSS 方法。我想用 CSS 实现会更快。

就我个人而言，我会坚持使用 CSS，我喜欢将我的内容 (HTML)、演示文稿 (CSS) 和逻辑 (JavaScript) 分开作为[指南](http://dev.chromium.org/developers/web-development-style-guide)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:00:50.740

CSS 通常比画布元素渲染得更快。我想确切的性能因浏览器而异，但您可以检查[此链接](http://jsperf.com/opacity-animations-using-css-vs-html5-canvas)以比较使用 CSS 和画布的相同操作。

在我的电脑中，这是结果（它不是字体，但它可以作为参考）： ![在此处输入图像描述](../Images/53b17a3edb31c88127582c3cc7a75e9c.png)

# python - 为什么python连接路径

> ID：13386343
> 
> 赞同：-1
> 
> 时间：2012-11-14T19:58:08.580
> 
> 标签：python, path, windows-8

![在此处输入图像描述](../Images/1f845ac73ea666f96a9356a676fb2c79.png)

我正在尝试添加一条指向我的 PYTHONPATH var 的路径，以便它获取一个库

如果您查看 sys.path 的输出，您会注意到两条路径是连接/连接的。

*   简单的路径
*   和 appengine 路径

为什么 python 将 appengine 路径与我所在的当前路径连接起来？

我正在尝试将 appengine 添加到 Windows 8 机器的 python 路径中，但我已经没有想法了。

我有一个

*   “site-packages”文件夹中的 .pth 文件，其中要添加的所需路径用引号括起来，正斜杠转义

    "C:\\Program Files (x86)\\Google\\google_appengine"

*   PYTHONPATH 系统变量，需要添加的路径用引号括起来

    “C:\Program 文件 (x86)\Google\google_appengine”

*   PYTHONPATH 用户变量与系统变量相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:14:33.350

我最终删除了两个环境变量

重新启动机器

重新创建了 .pth 文件

添加路径：

```
C:\\Program Files (x86)\\Google\\google_appengine 
```

（带有转义符用于正斜杠并且没有任何引号）

即使路径中有空格，只要路径在它自己的行上，它就会被正确捕获，但是添加引号会导致 sys.path 创建将值与前一个路径值连接起来？不知道它做到了。

解决了它。

# multithreading - 新任务一旦完成第一个任务并永远处于等待状态，就不会被线程拾取

> ID：13386351
> 
> 赞同：0
> 
> 时间：2012-11-14T19:58:43.657
> 
> 标签：multithreading, threadpool

示例代码：

```
public class ThreadTest{

    public static void main(String ...arg){
           try{
                ExecutorService executor = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());
                for(int i=0; i < noOfTask; i++){
                    executor.execute(new ImplRunnable(connectionPool.getConnection()));
                }
                executor.shutdown();
                //Wait for all threads completion
               executor.awaitTermination(100, TimeUnit.MICROSECONDS);
            }catch(Exception e){
              e.printStackTrace();
            }finally{
            //close database connections etc.
            }
        }
    }
    class ImplRunnable implements Runnable{
             private Connection conn;
              public ImplRunnable(Connection conn){
                     this.conn = conn;
              }

            public void run(){
                try{
                    for(int i =0; i < 1000000; i++){
                        counts++;
                    }

                }catch(Exception exception){
                    exception.printStackTrace();
                }finally{
                    //close all open statements
                    try{
                        conn.close();
                    }catch(Exception exp){
                        exp.printStackTrace();
                    }

                }
           }
        } 
```

我的系统有 4 个核心，因此池大小为 4，我有 10 个任务要做

for 循环打开 10 个线程，但一次运行 4 个线程。但问题是当一个线程完成处理时，它会永远处于等待状态，而不是拿起下一个任务进行处理。上面的代码有什么问题？

请建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:09:46.653

仅当我从连接池为线程分配连接时，这是我的错，然后当线程完成处理时我没有关闭它。当我在线程结束时关闭连接时，它开始工作并且线程被正确分配给下一个任务。

# c - sprintf 线程安全吗？

> ID：13386352
> 
> 赞同：8
> 
> 时间：2012-11-14T19:58:45.970
> 
> 标签：c, linux, multithreading

线程`sprintf`安全吗？

```
//Global log buffer 
char logBuffer[20];

logStatus (char * status, int length)
{
  snprintf(logBuffer, 19, status);
  printf ("%s\n", logBuffer);
} 
```

该函数的线程安全完全取决于`snprintf`/的线程安全`sprintf`。

**更新：** 感谢您的回答。我不介意，如果实际内容 gts 搞砸了。但是想确认 sprintf 在这种情况下不会导致内存损坏/缓冲区溢出超过 20 个字节，当多个线程试图写入时`logBuffer`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T20:00:25.887

`snprintf()`在多线程中使用没有问题。但是在这里你正在写入一个共享的字符串缓冲区，我假设它是跨线程共享的。

所以*你使用*这个函数*不是*线程安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T20:46:10.007

您的代码有几个问题。

1.  您的使用`snprintf`非常可疑。不要仅仅使用它来复制字符串。通常不要将任何内容作为格式的动态分配的字符串传递给任何`printf`函数。他们解释内容，如果其中有任何类似于 % 格式的内容，那么您注定要失败。
2.  不要`static`像你一样使用缓冲区。这当然既不是线程安全的，也不是可重入的。
3.  要么`printf`直接使用适当的格式，要么将调用替换为`puts`.

然后，Linux 遵循 POSIX 标准，要求标准 IO 函数是线程安全的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-03T22:05:39.380

`snprintf()`“在多线程中使用没有问题。”

不对。

不正确，至少在 POSIX 函数的情况下。

所有标准`vararg`功能都不是 mt-safe - 这包括所有`printf()`系列 (1)，但也包括所有其他`variadic`功能 (2)

1.  `sprintf()`例如：“MT-Safe locale|AS-Unsafe heap|AC-Unsafe mem”——这意味着，如果异步设置语言环境或使用异步取消线程，它可能会失败。换句话说，在 MT 环境中使用此类功能时必须特别注意。

2.  `va_arg`不是 mt-safe: |MT-Safe race:ap|AS-Safe|AC-不安全损坏| - 什么意思，需要联锁。

此外，显而易见的是，即使是完全 mt-safe 功能也可以以不安全的方式使用 - 例如，如果两个或多个线程正在操作相同的数据/内存区域会发生什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T20:03:19.550

你的问题有一个不正确的前提。即使`sprintf`可以同时从多个线程安全地调用它自己（我当然希望它可以），你的代码并没有保护你的全局变量。标准库不可能帮助你。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-15T08:51:37.787

关于您不必担心`logBuffer`内容是否出现乱码的更新：

我不确定您为什么要通过使用本地分配的缓冲区或某些同步机制来避免使您的函数完全线程安全，但是如果您想知道 POSIX 对此有什么看法，那就去吧（[http://pubs .opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_11](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_11)）：

> 应用程序应确保多个控制线程（线程或进程）对任何内存位置的访问受到限制，这样任何控制线程都不能读取或修改内存位置，而另一个控制线程可能正在修改它。使用同步线程执行以及相对于其他线程同步内存的函数来限制此类访问。[后跟提供同步的功能列表]

因此，POSIX 表示您的程序需要确保多个线程不会同时修改`logBuffer`（或在一个线程中修改同时`logBuffer`在另一个线程中读取它）。如果您不坚持这一点，则无法保证将发生的最坏情况是`logBuffer`. 对于结果将是什么，根本没有任何承诺。我不知道 Linux 是否会记录更具体的行为，但我怀疑它确实如此。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T20:16:32.107

它不是线程安全的，因为 sprintf 所在的缓冲区在所有线程之间共享。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-15T22:42:11.587

“你有没有说它们不是线程安全的参考资料？当我谷歌时，它们似乎是”

我之前对这个问题的回答已被删除/删除（为什么？），所以我会再试一次，使用不同的方法：

1.  AC（线程的异步取消）：这显然是几乎所有“显然是 MT 安全”的代码都可能失败的情况，仅仅是因为线程在随机时间点被中断，所以没有任何同步方法可以保证正常工作（即任何形式的互斥锁都不能真正保证正常工作）

2.  线程可以使用相同的 malloc() 领域，这意味着，如果其中一个线程失败（即它会损坏 malloc 领域），那么所有对 malloc() 的连续调用将/可能导致严重错误 - 这当然取决于系统配置——但这也意味着，没有人应该假设格式错误的内存（取消）分配是安全的。

由于所有系统都提供了使用不同本地设置的选项，因此很明显，异步。更改“语言环境”设置可能会导致错误...

问候。

# c#-3.0 - 带有日期的 nlog 文件

> ID：13386353
> 
> 赞同：1
> 
> 时间：2012-11-14T19:58:51.133
> 
> 标签：c#-3.0, nlog

在 C# 2008 应用程序中，我想写出 NLog 错误日志文件，以便文件上有日期。在下面列出的示例中，您可以看到我有 3 个日志文件。你能告诉我如何在这些文件上放置月-日-年格式吗？

```
 <?xml version="1.0" encoding="utf-8"?>
 <configuration>
 <configSections>
  <sectionGroup name="spring">
  <section name="context" type="Spring.Context.Support.ContextHandler, Spring.Core" />
  <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
   </sectionGroup>
   <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" />
   </configSections>
   <nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"  
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <targets>
  <target name="logfile" xsi:type="File" fileName="C:\Logs\NlogOutput.log" />
  </targets>
  <rules>
  <logger name="*" minlevel="Info" writeTo="logfile" />
  </rules>
  </nlog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:15:41.483

使用类似这样的`fileName`参数：

```
fileName="${basedir}/${shortdate}.log" 
```

一般来说，您可以使用大多数 NLog LayoutRenderer 来帮助编写文件名。

# ios - 渲染一个任意大的 NSAttributedString

> ID：13386355
> 
> 赞同：3
> 
> 时间：2012-11-14T19:59:07.533
> 
> 标签：ios, ios6, uitextview, core-text, nsattributedstring

我需要渲染一个（任意大）`NSAttributedString`，在这种情况下，来自（任意长）telnet 会话的 ANSI 彩色文本。文本不需要是可编辑的内联。我探索了几个选项：

*   `UITextView` seems to have by far the best performance and, since I'm targeting iOS 6, it's very easy to use with attributed strings. However, the textview gets progressively slower to render as more text is added, as it hits an HTML DOM parser each time I call `setAttributedString:` and blocks the UI.
*   I've tried a few core text rendering frameworks, `TTTAttributedLabel` and `OHAttributedLabel`, that also get progressively slower with more text. To be fair, they're labels probably not intended for this sort of thing!
*   `UIWebView` (*gag*) has some issues with rotation and keeping the text properly sized and framed, but I think I could work around it. I can convert my attributed string to HTML and use JavaScript to append (inject) new text as it is received. Surprisingly good performance here.
*   一位朋友建议我将用户当前的滚动位置视为更大文档的视口，并且（可能带有核心文本）仅呈现我的属性字符串的可见部分。我担心这会如何影响滚动性能。

所以我转向你，勇敢的互联网。独立开发者的想法？网络视图是我最好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:31:00.270

您可以使用 UITableView 并将其拆分`NSAttributedString`为一个子字符串数组，每个子字符串都适合单元格的标签宽度。表格视图的数据源将索引到子字符串数组中，以确定原始字符串的哪一行应放置在每个单元格中。

# windows - Watir，带有 IE8 的 Windows 7 上的自动化

> ID：13386356
> 
> 赞同：1
> 
> 时间：2012-11-14T19:59:17.480
> 
> 标签：windows, windows-7, automation, watir

我正在尝试以管理员身份在 IE8 上的 Wndows 7 上运行 watir 脚本。

这是问题描述：问题出在以下语句（弹出窗口）

```
popup = Watir::IE.attach(:url, /ContactDetails/) 
```

并且错误消息是`Unable to locate the url(ContactDetails)`

问题似乎是，当已经存在以管理权限打开的 IE8 实例时，Watir 将看不到任何其他以管理员身份运行的 IE8 窗口，包括它自己打开的窗口。

修复我一直在做的：关闭用户帐户控制（设置为最低设置）。转到控制面板->系统和安全->操作中心->更改用户帐户控制设置，然后将滑块拉到最低设置。

但这不是永久修复，我必须每天更改 Windows 7 设置才能运行我的自动化脚本。

谁能帮我找出永久解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:40:14.087

据我所知， watir-webdriver 没有`IE`类和`attach`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T20:20:33.737

您是否尝试通过页面标题附加？例如： browser2 = Watir::IE.attach(:title, "Google")

如果您要附加的浏览器是 Google 的主页。

查看源代码并将任何内容放在页面上的标题标签之间。谷歌

# java - Camel HTTPS Web 服务消费 - HTTP 状态码 500

> ID：13386357
> 
> 赞同：2
> 
> 时间：2012-11-14T19:59:17.520
> 
> 标签：java, web-services, https

我能够成功协商 SSL 握手，然后它失败并显示 HTTP 状态代码：500。

我们正在使用 DataPower 访问受保护的 WS。我能够通过 SoapUI 调用该服务，并且运行良好。当我从骆驼调用时它失败了。我们的 DataPower 人员说他们看到响应返回并返回到应用程序。任何想法，将不胜感激。

org.apache.camel.component.http.HttpOperationFailedException：HTTP 操作调用[https://xx.xxxxx:5618/Reservation](https://xx.x.x.x.x.x:5618/Reservation)失败，在 org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException（HttpProducer.java: 229)[camel-http-2.10.2.jar:2.10.2] 在 org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:157)[camel-http-2.10.2.jar:2.10 .2]

# magento - 升级到 magento 版本而不是最新版本

> ID：13386362
> 
> 赞同：1
> 
> 时间：2012-11-14T19:59:34.940
> 
> 标签：magento, upgrade, magento-1.5, magento-1.6

我想将 Magento 1.5 升级到 1.6 而不是最新的 (1.7) 版本。

我想我需要在这一行进行一些更改，但我不知道是什么：

```
./mage install http://connect20.magentocommerce.com/community Mage_All_Latest --force 
```

我用这个：

```
find . -type f -exec chmod 777 {} \;
find . -type d -exec chmod 777 {} \;
rm -rf var/cache/* var/session/*
chmod 550 ./mage
./mage mage-setup .
./mage config-set preferred_state stable
./mage list-installed
./mage list-upgrades
./mage install http://connect20.magentocommerce.com/community Mage_All_Latest --force
php shell/indexer.php reindexall
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:19:33.207

你有使用 Subversion 的经验吗？如果您这样做，请查看[http://www.magentocommerce.com/svn](http://www.magentocommerce.com/svn)。

**确保首先备份文件和数据库（以防万一）。这可能需要几次尝试才能正确。**

您要做的是将 1.6 分支检出到您的 Magento 文件夹中：

```
svn checkout http://svn.magentocommerce.com/source/branches/1.6 /var/www/magento 
```

以上假设您的 Magento 文件夹是 /var/www/magento，否则将路径替换为对您的环境有意义的路径。

* * *

一旦你让 subversion 工作，很容易使用`svn diff`命令查看版本之间的变更集。但是，如果您担心这次升级的变化，您可以将 1.6 版本签出到一个临时文件夹，并使用 diff 之类的工具查看所有更改：

```
svn checkout http://svn.magentocommerce.com/source/branches/1.6 /tmp/magento-1.6
diff -Naurw /var/www/magento /tmp/magento-1.6 | vim - 
```

这会将 diff 输出加载到 vim 中，在那里你可以有很好的语法突出显示，让你的眼睛少流血！您应该为此做好准备，尤其是在 1.5 和 1.6 等主要版本之间切换时。

# android - facebook android api 发送位图、消息和链接

> ID：13386370
> 
> 赞同：1
> 
> 时间：2012-11-14T19:59:57.140
> 
> 标签：android, facebook, facebook-graph-api

我需要发送一条短信、位图图像（不是 url！）和 Facebook 墙的链接。我尝试了两种方法：

首先是使用`me/feed`. 它允许我发送消息和链接，但不能发送图像：

```
postParams.putByteArray("picture", data);
postParams.putString("message", "My message here");
postParams.putString("link", "http://www.google.com");

Request request = new Request(session, "me/feed", postParams, HttpMethod.POST, callback); 
```

我收到一个异常：“图片网址格式不正确”。

第二个是使用`me/photos`：

```
postParams.putByteArray("photo", data);
postParams.putString("message", "My message here");
postParams.putString("link", "http://www.google.com");

Request request = new Request(session, "me/photos", postParams, HttpMethod.POST, callback); 
```

在这种情况下，帖子已成功发布并出现在 Facebook 墙上，但没有`link`.

我如何将这三件事一起发布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:53:37.260

解决方案很简单：必须统一消息和链接：

```
postParams.putByteArray("photo", data);
postParams.putString("message", "My message here http://www.google.com");
//postParams.putString("link", "http://www.google.com");

Request request = new Request(session, "me/photos", postParams, HttpMethod.POST, callback); 
```

# php - 是否可以创建一个 PHP Switch 来检查特定字符串的 url？

> ID：13386371
> 
> 赞同：1
> 
> 时间：2012-11-14T20:00:01.290
> 
> 标签：php, string, url, switch-statement, trim

是否可以创建一个 PHP 开关来检查 URL 中的特定字符串？我正在使用 $_GET 来根据各种情况自定义特定页面的 URL。我想修剪 Url 并针对几种情况进行检查。这是我到目前为止的代码。

这是 URL 的示例：

* * *

**www.example.com/page/resource/view.php?id=417&module=1&menuid=4&module=1&page=4**

```
<?php

// Grabs the page URL
$url = curPageURL();
var_dump($url);

$trimURL = trim($url);
var_dump($trimmed);

$trimmed = trim($text, "resource/view.php?id=417&module=1& || &module=1&page=4");
var_dump($trimmed);

// The Switch
switch ($trimmed) {
case "menuid=1":
    echo "Menu ID  1";
    break;
case "menuid=2":
    echo "Menu ID 2";
    break;
case "menuid=2":
    echo "Menu ID 3";
    break;
default:
echo "No Menu Number Detected.";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:02:09.487

```
switch($_GET["menuid"]) {
    case "1":
        echo "Menu ID  1";
    break;
    case "2":
        echo "Menu ID 2";
    break;
} 
```

# ruby-on-rails - 更新多条记录集中分配错误

> ID：13386372
> 
> 赞同：0
> 
> 时间：2012-11-14T20:00:07.727
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在制作上次访问商店时的节目。如果他们都在同一天访问，我希望能够一次更新多个商店。

我想我有大部分代码，但我不知道如何摆脱批量分配错误

```
Can't mass-assign protected attributes: date_visited(1i), date_visited(2i), date_visited(3i)

{"utf8"=>"✓",
"_method"=>"put",
"authenticity_token"=>"/yr8kLOyrTRGPfG1f/I5ilY/QB6GUx9IhQj6WiBaibM=",
"store_ids"=>["4",
"5"],
"visit"=>{"date_visited(1i)"=>"2012",
"date_visited(2i)"=>"11",
"date_visited(3i)"=>"14"},
"commit"=>"Save Visit"} 
```

模型

```
class Visit < ActiveRecord::Base
    attr_accessible :date_visited, :spent, :store_id
    belongs_to :
end 
```

控制器

```
def update_multiple
  @visits = Store.find(params[:store_ids])
  @visits.each do |visit|
    visit.update_attributes(params[:visit])
  end
  flash[:notice] = "Updated products!"
  redirect_to stores_path
end 
```

看法

```
<%= form_for :visit, :url => update_multiple_visits_path, :html => { :method => :put } do |f| %>
<ul>
  <% @visits.each do |visit| %>
  <%= hidden_field_tag "store_ids[]", visit.id %>
  <% end %>
</ul>

<div class="field">
  <%= f.label :date_visited %><br />
  <%= f.date_select :date_visited %>
</div>

<div class="actions">
  <%= f.submit %>
</div>
<% end %>

<ol id="route">
  <% @visits.each do |store| %> 
    <%= content_tag_for :li, store do %>
      <%= "#{store.store} - #{store.address}" %>
    <% end %>
  <% end %>
</ol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:00:47.417

将此添加到您的`Store`模型中

```
attr_accessible :visits_attributes

accepts_nested_attributes_for :visits 
```

我建议将您的控制器更改为：

```
def update_multiple
  @stores = Store.find(params[:store_ids])
  @stores.each do |store|
    store.update_attributes(params[:visit])
  end
  flash[:notice] = "Updated products!"
  redirect_to stores_path
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:19:25.287

最有可能的是，您在 activerecord 模型定义中缺少`attr_accessible :your_model_attributes`这种情况。`:visits_attributes`

此外，您的参数应该看起来像

```
{ visits => 
  { id_1 => 
    { :store_id
      :attributes_for_visit_1 }
  }
  { id_2 =>
    { :store_id
      :attributes_for_visit_2 }
  }
} # and so on....

# visits_controller.rb
  def update_nultiple_visits
    @visits = Visits.find(params[:visits].keys).each{|visit|visit.update_attributes!}
  end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T20:19:24.200

助手 date_select 生成三个选择标签（用于年、月和日）。
您可以在更新属性之前连接它。
例如：

```
Date.civil(params[:visit][:date_visited(1i)].to_i, params[:visit][:date_visited(2i)].to_i, params[:visit][:date_visited(3i)].to_i) 
```

# haskell - Warp Wai WebSockets 拦截

> ID：13386373
> 
> 赞同：2
> 
> 时间：2012-11-14T20:00:12.063
> 
> 标签：haskell, yesod

```
import Network.Wai.Application.Static (staticApp, defaultWebAppSettings)
import Network.Wai.Handler.WebSockets (intercept)
import Network.Wai.Handler.Warp (runSettings, defaultSettings, 
                                 settingsIntercept, settingsPort)

main :: IO ()
main = do
    let s = defaultSettings {settingsPort=9160, settingsIntercept=intercept app}
    runSettings s $ staticApp $ defaultWebAppSettings "www" 
```

1）我想知道的是，warp是否可以区分同一端口上的websocket请求和静态请求，以通过仅根据请求运行静态或拦截应用程序来防止开销。

[http://hackage.haskell.org/packages/archive/wai-websockets/1.3.1/doc/html/src/Network-Wai-Handler-WebSockets.html](http://hackage.haskell.org/packages/archive/wai-websockets/1.3.1/doc/html/src/Network-Wai-Handler-WebSockets.html)

2) 上面的源文件使用管道，这是否意味着为我的 websocket receiveData 使用严格的 ByteString 是安全的，而不必担心可能会溢出我的内存的大量传入数据，或者我应该使用惰性 ByteString 吗？

请注意，您不能像在 http 分块传输编码中那样分块 websocket。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:44:09.440

1.  如果收到 websocket 请求，那么应用程序本身将永远不会被调用，并且您的 websocket 处理程序将立即接管。

2.  如果没有看到您的代码，就无法保证您没有阅读太多信息。但是*可以*按照您描述的方式使用严格的 ByteString 。

# https - 在 VS2012 和团队中使用 IIS Express SSL 时遇到问题

> ID：13386375
> 
> 赞同：20
> 
> 时间：2012-11-14T20:00:25.343
> 
> 标签：https, visual-studio-2012, iis-express

## 问题：

*ADFS2*要求 RP 信任使用 https。RP 信任存在`https://localhost:44310/PAWS/`。话虽如此，我需要让 IIS Express 在本地使用 SSL。因此，当我将*ASP.NET MVC4*项目配置为使用 IIS Express 时。 ![mvc4项目配置](../Images/5a3fc437520627802a14f0733ea4664b.png)

当我将其签入 TFS（源代码控制）时，团队中的另一位开发人员得到了最新消息。该项目不会为他们加载。

![MVC4项目不会加载](../Images/055b34d5443fe0f959b8535788c54c35.png)

Visual Studio 2012 在打开解决方案时会显示以下错误消息： ![VS2012错误1](../Images/f6f05ce3f4bfe6db12878517765500a3.png) ![VS2012错误2](../Images/9987003be27479d6078a16e8f06460e6.png)

这是因为 IIS Express 不会自动读取项目文件并将 HTTPS 绑定添加到站点配置。这是 VS 添加到 IIS Express 的 applicationhost.config 文件中的配置

```
<site name="PAWS.Web-Site" id="2">
    <application path="/" applicationPool="Clr4IntegratedAppPool">
        <virtualDirectory path="/" physicalPath="C:\Users\larsene\Documents\My Web Sites\PAWS.Web-Site14" />
    </application>
    <bindings>
        <binding protocol="http" bindingInformation="*:44310:localhost" />
    </bindings>
</site> 
```

但我需要将绑定协议设置为 HTTPS，如下所示：

```
<binding protocol="https" bindingInformation="*:44310:localhost" /> 
```

我可以手动将其输入到 applicationhost.config 中。或者我可以像这样运行[appcmd.exe](http://www.iis.net/learn/get-started/getting-started-with-iis/getting-started-with-appcmdexe)来配置它。

```
"%ProgramFiles(x86)%\IIS Express\appcmd.exe" set site /site.name:PAWS.Web-Site /bindings:https/*:44310:localhost 
```

但这两种方法中的任何一种都不是我想要的。我不想向每个从事这个项目的开发人员解释，他们必须在加载项目之前手动编辑他们的 IIS Express 设置。

## 如何重现问题：

这很容易通过首先关闭 VS2012 重新创建。然后删除位于 IIS Express 的配置文件夹

```
%USERPROFILE%\Documents\IISExpress 
```

然后打开 VS2012 并打开配置为使用带有 https 的 IIS Express 的 MVC4 项目的解决方案。现在，VS2012 将无法加载项目并抱怨没有安全绑定。

我做错了什么或者我该如何解决这个问题，以便最新了解我项目的人能够运行它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T19:30:33.773

我最近遇到了同样的问题，我已经能够确定它发生的原因。

Visual Studio 使用 Project Url 设置来设置 IIS Express http 绑定，然后查看 IISExpressSSLPort 设置来设置 https 绑定。

但是，如果您已将 Project Url 更改为 https 地址，那么 Visual Studio 就会感到困惑。出于 IIS Express 绑定更新的目的，它假定您已经为 Project Url 输入了 http 地址，并且似乎无法处理那里的 https 地址。

这使事情变得复杂，因为将项目 URL 更改为 https 地址是我发现让 Visual Studio 默认开始调试 https url 的唯一方法。

因此，这似乎是 Visual Studio 如何处理 IIS Express 绑定更新的问题。我不知道一个好的解决方法，它既允许自动绑定更新，又允许在加载 https 地址的情况下开始调试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T22:26:47.090

这看起来可能是 VS2012 中的错误...我能够处理此问题的唯一方法是手动编辑 IISExpress 配置文件：applicationhost.config，位于 C:\Users\YOUR_USER_NAME\Documents\IISExpress\ 下配置。然后在“站点”下，我修改了特定应用程序网站的块：

```
 <site name="YourSite" id="1">
    <application path="/" applicationPool="Clr4IntegratedAppPool">
                <virtualDirectory path="/" physicalPath="c:\..." />
            </application>
            <bindings>
                <binding protocol="https" bindingInformation="*:YOUR_PORT_#:localhost" />
            </bindings>
    </site> 
```

将“绑定协议”更改为“https”并确保以管理员权限启动 Visual Studio 2012，至少在 IIS Express 中创建/修改站点之前。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-20T18:21:48.923

我可以确认 Visual Studio 2013 没有这个问题。

从 VS2012 升级到 2013 为我解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T16:10:47.140

您需要在项目的属性列表[中将 SSL Enabled 设置为 True](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)，以便自动显示该绑定。（根据斯科特·汉塞尔曼）

![如在 Visual Studio 2010 中所见](../Images/168b740742c9391bf4422b7c0e5cdd49.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T11:29:53.473

您是否尝试过以管理员身份打开项目（以管理员身份运行 VS2012）？

通常当您收到上述错误（为 ASP.NET 4.5 配置 web xxx 失败...）和（创建虚拟目录 xxx 失败）时，是因为 Visual Studio 没有足够的权限。

可能不是你的问题，但尝试一下也无妨。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-16T18:50:33.560

首先，感谢您提供在本地计算机上重现此问题的步骤。其他团队成员也有这个问题，但是自从我创建了这个项目，我就没有遇到过。这让我有机会尝试一些不同的解决方案。

我发现在当前环境中效果最好（MS 没有修复）是将项目 url 保留为 http 值，但将启动 url 更改为 https 值。大多数开发人员应该很乐意在 VS 中更改它。

这适用于新机器，无需运行 bat 文件来配置 https 站点。您在 IIS Express 中确实有两个绑定（http 和 https），但除此之外，它似乎运行良好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T17:34:54.567

您是否尝试过在 .csproj 文件中手动配置端口？一旦你在那里配置它，它应该转移到其他工作站：

```
<IISExpressSSLPort>44310</IISExpressSSLPort> 
```

此外，即使选中了“将服务器设置应用于所有用户”选项，项目的用户文件仍然可能导致问题。当我用 IIS Express 修复 SSL 问题时，我通常只是删除用户文件，因为在我解决了我的问题之后重新配置我的用户设置要容易得多。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-18T16:35:50.197

我最近遇到了一个非常相似的问题，并在尝试解决时遇到了这篇文章。我注意到的一件事是，如果在 applicationhost.config 文件中设置了多个站点并使用 HTTPS 绑定，IIS Express 似乎会变得非常痛苦。

就我而言，我设置了 2 个站点以使用与端口 44300 相同的 SSL 绑定，更改其中一个站点上的 SSL 绑定之一上的端口号会导致类似于 OP 中的错误。我最终不得不删除其中一个站点，这并不理想。

经过一番挖掘后，我尝试**将“需要 SSL”属性**从切换`true`到`false`，然后再切换回`true`。这触发了对 applicationhost.config 的更新，它使用新的端口号创建了一个新的 SSL 绑定。

我陷入了这个混乱，因为我复制了一个现有项目，并且我的配置试图在 2 个站点之间共享端口。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-27T20:32:39.887

我看到两个选项：

*   启用 Web 选项卡上的*Apply server setting to all users* (store in project file) 选项以将绑定配置移动到您的项目文件中。

    **或者**

*   将项目的用户文件添加到源代码管理。

    任何一种方法都将允许用户获得最新版本并毫无问题地运行。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-29T08:29:58.513

我最近在 VS 2019 和 IIS Epress 上遇到了一个非常相似的问题。我尝试将 http 更改为 https，以便可以使用 ADFS。 [CE 站点无法访问 localhost n'autorise pas la connexion。](https://i.stack.imgur.com/m3G7G.png)

经过更多研究，我尝试将“需要 SSL”属性从 true 切换为 false，然后再切换回 true。这触发了对 applicationhost.config 文件 (... Vs \ ProjectName \ config \ applicationhost.config) 的更新，该文件创建了一个新的 SSL 绑定，并为 https 协议提供了一个新的端口号。因此，我使用建议的新端口修改了所有链接（在项目的 Web 属性、配置文件和 ADFS 配置中）并且它可以工作。结论，同一个站点的http端口没有必要和https一样。

# c# - WPF 更改不反映，仅反映清洗解决方案更改

> ID：13386383
> 
> 赞同：0
> 
> 时间：2012-11-14T20:00:54.203
> 
> 标签：c#, wpf

每次我对代码或 xaml 进行任何更改时，这些更改都没有得到反映。每次我必须清理、重建和运行时，更改都会受到影响。不确定这种奇怪的行为。也只是为了改变文本框的高度。

有什么解决方案或设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-06T15:16:23.053

确保解决方案中的所有项目在“配置管理器”中相互同步

构建/配置管理器...

他们都应该针对同一个平台。

# c# - 与 Informix 建立连接的异常

> ID：13386385
> 
> 赞同：1
> 
> 时间：2012-11-14T20:01:11.167
> 
> 标签：c#, informix

我收到'$exception.Message 为`IfxConnection.Open()`'抛出了 System.IO.IOException 类型的异常。

这是代码

```
 string conn = "Service=ms7;Database=testdb;Server=test2000;UserID=test123;Password=test123";
 IfxConnection myconnection = new IfxConnection(conn);
 myconnection.Open(); 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:14:57.813

问题不在于连接字符串。它是 IBM.Data.Informix.dll 的版本。我用 2.90.6.0 下载了那个

# propel - 推动和持久的连接

> ID：13386386
> 
> 赞同：2
> 
> 时间：2012-11-14T20:01:11.387
> 
> 标签：propel, mysql-pconnect

我在使用 propel 作为带有 PHP 的 ORM 与 Amazon RDS 数据库进行大量并发连接时遇到问题。该应用程序在负载测试期间运行良好，一次打开 20 到 50 个连接，然后似乎撞到了墙，几乎立即达到最大连接数，然后一切都死了。

我相信 Propel 正在使用 mysql_pconnect，但我找不到它指定的位置，或者一个简单的方法来关闭它。我可能在这里追逐红鲱鱼，但我很困惑，网上有足够多的评论关于 pconnect 导致连接过多的问题，我认为值得一试将其删除。

有人知道怎么做吗？我一直在使用各种短语进行搜索，似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T00:38:14.857

事实证明，该错误是由 RDS 重做日志引起的。所有 RDS 实例大小只有一种大小。在较大的实例大小上，可以填充重做日志并在数据写入数据库之前回到开头。在这一点上，它会做“疯狂刷新”的事情来赶上，不处理任何新的请求，它们像疯了一样堆积起来。这最终导致我们的应用程序崩溃。更小的 RDS 服务器解决了这个问题，尽管亚马逊对此并不满意。他们需要能够更改重做日志的大小。

# visual-studio - 我可以使用#pragma 链接到单个 obj 文件吗？

> ID：13386387
> 
> 赞同：4
> 
> 时间：2012-11-14T20:01:12.337
> 
> 标签：visual-studio, visual-c++, linker

我可以使用 #pragma 链接到单个 obj 文件吗？我试过`#pragma comment(lib, "disk_file_sink.obj")`了，但它似乎不起作用。如果我在链接器/输入/附加依赖项中指定此文件，它会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-25T07:27:04.727

我和你有同样的问题，我查了很多网站，但我没有得到结果，所以我用另一种方法来解决这个问题。我就是这样做的。我使用命令*lib*将 objs 压缩到库中。您可以使用*lib /out:xxx.lib one.obj two.obj*或*lib /out:xxx.lib *.obj*。该命令可以添加到项目属性。

# php - 创建拇指的目的

> ID：13386392
> 
> 赞同：1
> 
> 时间：2012-11-14T20:01:25.513
> 
> 标签：php, image, gd

我想知道动态创建拇指的目的？如果我们在`<img>`标签中有选项来设置图像的高度和宽度？我只想知道哪个是好的做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:02:58.693

使用标签的高度和宽度属性`<img>`只控制页面上呈现的图像的大小。如果您尝试为 4 MB 图像文件的缩略图使用大小和宽度，它仍会加载 4 MB 图像。现在，如果您对整个图片库执行此操作，您将等待页面加载一些时间。如果您使用基于原始 4 MB 图像按比例缩小的缩略图图像，则页面可能会加载得更快，因为缩略图可能只有 100 KB 或更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:05:11.370

动态改变图像的尺寸减少了需要传输到客户端的数据量，从而减少了服务器流量和加载时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:04:35.380

这是因为查看您的网页的用户不想等待很长时间来加载您的`scaled` `big size`图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T20:04:36.097

让您在只想看小图时不必下载大图

# javascript - Knockout js 从元素内容初始化可观察值

> ID：13386396
> 
> 赞同：1
> 
> 时间：2012-11-14T20:01:39.060
> 
> 标签：javascript, knockout.js

我有这样的事情

```
<td data-bind="text: email_sended">
  <%= invite.email_send %>
</td>

function AdminInvitesViewModel() {
   var self = this;
   self.email_send = ko.observable();
}

ko.applyBindings(new AdminInvitesViewModel()); 
```

如何从容器的内容中初始化 observable？

在这种情况下，电子邮件发送是一个真/假值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:49:47.463

如果这是必要的，那么您可以使用自定义绑定轻松完成此操作。

这是一个绑定，它将使用元素的 innerText 设置现有的可观察对象，或者如果它不存在则创建一个可观察对象。

```
ko.bindingHandlers.textWithInit = {
    init: function(element, valueAccessor, allBindingsAccessor, data) {
        var property = valueAccessor(),
            content = element.innerText || element.textContent;

        //create the observable, if it doesn't exist 
        if (!ko.isWriteableObservable(data[property])) {
            data[property] = ko.observable();
        }

        data[property](content);

        ko.applyBindingsToNode(element, { text: data[property] });
    }
}; 
```

你会像这样使用它：

```
<div data-bind="textWithInit: 'email_sended'"></div> 
```

请注意，属性名称用引号引起来，因为绑定支持尚不存在的可观察对象

示例：http: [//jsfiddle.net/rniemeyer/kKBBj/](http://jsfiddle.net/rniemeyer/kKBBj/)

# android - 在相对布局中均匀分布图标

> ID：13386399
> 
> 赞同：0
> 
> 时间：2012-11-14T20:02:07.680
> 
> 标签：android, icons, android-relativelayout

图片在这里：

![在此处输入图像描述](../Images/db7e547878aee4672d341d446ef1c882.png)

无论屏幕尺寸如何，如何均匀分布这三个图标（中间有 1dp 间隙，两边还有 1dp 边距）？

我正在使用相对布局。

谢谢 ！

**编辑** 进度：http: [//imgur.com/vOm8e](https://imgur.com/vOm8e)

```
<ImageButton
                android:id="@+id/imageButton6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:src="@drawable/text" 
                android:background="@null"
                android:paddingLeft="2dp"/> 
```

图标之间仍然没有任何填充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:11:00.543

为了达到使用效果（一定要使用`Linear_Layout`）

```
android:layout_width="match_parent"
android:layout_height="wrap_content"
andorid:padding="0.5dp"
android:layout_weight="1" 
```

在每个小部件中。`layout_weight`用于指定姐妹小部件之间的大小比例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:05:39.137

我不会为此使用相对布局，而是使用线性布局。将所有 3 设置为 fill_parent 并将布局权重设置为 1。应该可以。

如果出于其他原因确实需要相对布局，请将线性布局放在相对布局内，并将图标放在线性布局内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:19:48.070

如果您需要以统一的方式显示图像，您可以在布局中使用 GridView 并使用 Adapter 类传递图像。

有关更多信息，您可以参考开发者网站：http: [//developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

对于一个简单的示例代码，你可以参考这个链接： [http ://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T20:03:30.550

为每个图标添加以下属性 -

`android:paddingLeft="1dp"`- 在左边

仅添加最后一个图标

`android:paddingRight ="1dp"`- 在右侧

这将为每个图标提供一个围绕其的黑色区域。您可能需要考虑缩放右侧的最后一张图像，因为即使有填充，它也可能不适合。

*   [http://androidforums.com/application-development/46396-android-supports-auto-scaling-images.html](http://androidforums.com/application-development/46396-android-supports-auto-scaling-images.html)

*   [如何在 ImageView 中缩放图像以保持纵横比](https://stackoverflow.com/questions/2521959/how-to-scale-an-image-in-imageview-to-keep-the-aspect-ratio)

此外，如果您想滚动浏览这些图像，那么您应该使用`HorizontalScrollView`-

*   [http://developer.android.com/reference/android/widget/Horizo​​ntalScrollView.html](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)

# mvvm-light - 如何在 MVVM Light 中禁止 Messenger 的重入？

> ID：13386401
> 
> 赞同：1
> 
> 时间：2012-11-14T20:02:07.010
> 
> 标签：mvvm-light

我们从 WinForms 迁移到 WPF，重构遗留的意大利面条代码。
许多许多形式是相互关联的。当一个表单引发事件时，第二个表单会处理它、刷新某些内容、引发事件本身等等。最终，这一系列调用会回到第一种形式，并且可以重复多次。一种递归。
大多数这些“魔术圈”都是由于设计上的缺陷造成的。尽管如此，我还是想禁用重入。
这里所说的可重入是指`messenger.Send<MsgType>()`不能在里面调用已经在运行`messanger.Send<MsgType>()`。

是否可以在不装饰信使的情况下做我需要的事情？

# ms-access - 运行时错误 2683。当前日期未填充到表单中

> ID：13386407
> 
> 赞同：0
> 
> 时间：2012-11-14T20:02:21.747
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我正在寻找对数据库进行故障排除的帮助。另一个人（不再可以访问）编写了这个数据库，其中有几个错误。第一个是在尝试访问输入表单时。它是“运行时错误'2683'。这个控件中没有对象。当我选择'debug'选项时，以下语句突出显示：“calDate.Value=GCalDate”。我相信这个表单上发生的事情是当它第一次打开时，“日期”控制框填充了当前日期。但是，由于这个错误，它不起作用。当我尝试打开为此目的创建的“日历”表单时，它给出了消息“此控件中没有对象”。

我注意到的一件事是该表单适用于 Access 2003 和 2007。我试图在我的笔记本电脑上使用 access 2010 对其进行编辑，但我注意到了这个错误。知道如何在 2010 版本中摆脱这个错误吗？（并且仍然保持与 Access 2007 兼容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:25:02.120

以前版本的 Access 附带一个称为日历控件的 ActiveX 控件，它允许您显示日历供用户选择日期。这个 Calendar 控件有一个 value 属性。Access 2010 似乎不支持此 ActiveX 控件。

另一方面，在 Access 2010 中，如果数据类型是日期/时间，您可以将日期选择器添加到任何绑定的文本框。可以按照[此处](http://www.utteraccess.com/forum/index.php?showtopic=1949631&view=findpost&p=2005454)的说明将日期选择器添加到未绑定的文本框。

如果您想要与 Access 2003 和 2010 兼容的东西，请搜索“访问自定义日历控件”，以[在此处](http://allenbrowne.com/ser-51.html)找到类似日历表单的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T03:10:10.417

这是我应用的一个解决方案，可以在版本 < 2010（即版本 < 14）中使用旧的 ActiveX 控件和在 14+ 中使用新的日期选择器：

```
'set appropriate date picker for date box based on application version
    If Val(Application.Version) >= 14 Then
        Me!btnFYStart.Visible = False
        Me!btnFYEnd.Visible = False
    Else
        Me!btnFYStart.Visible = True
        Me!btnFYEnd.Visible = True
    End If 
```

（这些按钮指的是 ActiveX 控件。）

# jquery - 更改标签属性的值？

> ID：13386410
> 
> 赞同：0
> 
> 时间：2012-11-14T20:02:25.167
> 
> 标签：jquery

我想`readonly`使用 jQuery 更改属性的值，但是这段代码不起作用：

```
$('#L1E').live('change',function() {
  $('.hidden').attr('readonly',''); 
  return false;  
}); 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:07:27.387

您应该使用 .on (jQuery 1.7+) 委托而不是 .live，因为 .live() 已被弃用。您还应该使用 .prop (jQuery 1.6+) 方法来设置只读属性

```
$('body').on('change','#L1E', function() {
    v = $('.hidden').prop('readonly')
    if (v) {
        $('.hidden').prop('readonly', false);
        alert(v);
    }
    else {
        $('.hidden').prop('readonly', true);
        alert(v);
    }    
    return false;
});​ 
```

[http://jsfiddle.net/rMnx3/](http://jsfiddle.net/rMnx3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:07:26.357

您应该使用 removeAttr 删除只读属性：

```
$('.hidden').removeAttr('readonly'); 
```

# scala - 如何使用 SBT 在测试配置之间共享类

> ID：13386412
> 
> 赞同：19
> 
> 时间：2012-11-14T20:02:38.160
> 
> 标签：scala, sbt

我已按照 SBT 文档中的说明设置测试配置。我有三个测试配置Test、IntegrationTest 和AcceptanceTest。所以我的 src 目录如下所示：

*   源/
    *   验收/
        *   斯卡拉/
    *   它/
        *   斯卡拉/
    *   测试/
        *   斯卡拉/

我的问题是，如何配置 SBT 以允许在这些配置之间共享类？示例：我在“it”配置中有一个类，用于简化数据库设置和拆卸。我在“验收”配置中的验收测试之一可以使用此类。如何在“接受”中使该“it”类可用于测试

提前谢谢了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T15:24:32.520

配置可以扩展另一个配置以使用该配置的依赖项和类。例如，[自定义测试配置](http://www.scala-sbt.org/release/docs/Detailed-Topics/Testing#custom-test-configuration)部分显示了自定义配置的以下定义：

```
lazy val FunTest = config("fun") extend(Test) 
```

这`extend`部分意味着编译的正常测试源将位于`fun`源的类路径中。在您的情况下，声明`acceptance`配置以扩展`it`配置：

```
lazy val AcceptanceTest = config("acceptance") extend(IntegrationTest) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-04-28T12:16:30.587

如果您想坚持使用预定义的配置而不是定义新的配置，并且由于两者`Test`和`IntegrationTest`扩展`Runtime`（人们希望`IntegrationTest`扩展`Test`......），您可以使用以下内容：

```
dependencyClasspath in IntegrationTest := (dependencyClasspath in IntegrationTest).value ++ (exportedProducts in Test).value 
```

这应该将您定义的所有类`Test`放在`IntegrationTest`classpth 上。

＃＃编辑：

感谢@mjhoy，我刚刚意识到更好的解决方案：

```
lazy val DeepIntegrationTest = IntegrationTest.extend(Test) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T21:53:09.070

此处记录了一种方法：[http ://www.scala-sbt.org/release/docs/Detailed-Topics/Testing#additional-test-configurations-with-shared-sources](http://www.scala-sbt.org/release/docs/Detailed-Topics/Testing#additional-test-configurations-with-shared-sources)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T20:25:37.610

SBT 使用[Maven 默认目录布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。

它将识别`src/test/scala`要与`src/main/scala`.

因此，如果您移动`src/test/scala`SBT 下的其他文件夹，将编译它们并且您可以在它们之间共享代码。例如：

```
└── scala
    ├── acceptance
    │   └── scala
    │       └── Acceptance.scala
    ├── it
    │   └── scala
    │       └── IT.scala
    └── Test.scala 
```

运行`sbt test`将编译目录中的所有三个文件。所以，有了这个Acceptance，就可以例如创建一个新的IT类。

# objective-c - 按等于另一个数组对象的属性对对象数组进行排序

> ID：13386415
> 
> 赞同：0
> 
> 时间：2012-11-14T20:02:56.930
> 
> 标签：objective-c

如何通过将对象的一个​​属性 ( `NSString *`) 与另一个 ( ) 数组中的对象（已经排序）进行比较来对对象数组进行排序`NSString *`？

我按照多个线程恰好完成的顺序填充了一个对象数组`Person`。然后我想将每个`Person.name`对象与一个已经排序的名称对象数组进行比较。结果将是按属性`Person`按与名称数组相同的顺序排序的数组。`person.name`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:12:06.720

您可以尝试类似的方法，但细节很少，这是我能想到的最好的：

```
NSArray *array1 = [NSArray array];
NSArray *sortedArray = [NSArray array];
NSMutableArray *tmpArray = [NSMutableArray array];

for (id object in sortedArray)
{
    if ([array1 containsObject:object])
        [tmpArray addObject:object];
} 
```

此代码循环抛出已排序的数组并检查未排序的数组是否包含相同的对象。如果是，则将其放在 tmpArray 中。如果完成，它将有一个排序数组，其中包含它包含的项目。

这是我发现`NSPredicate`用于更优化解决方案的链接[https://stackoverflow.com/a/2873439/507299](https://stackoverflow.com/a/2873439/507299)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:35:48.413

也许是这样的

```
NSMutableArray *excluded = [NSMutableArray array];
NSArray *sortedNames = @[@"name1", @"name5", @"name3", /*more names*/ @"nameX"];
NSArray *tmp = [inputArray sortedArrayUsingComparator: ^(id p1, id p2) {

    NSUInteger pos1 = [sortedNames indexOfObject:((Person *)p1).name];
    NSUInteger pos2 = [sortedNames indexOfObject:((Person *)p2).name];

    if (pos1 == NSNotFound && ![excluded containsObject:p1]) {
        [excluded addObject:p1];
    }
    if (pos2 == NSNotFound && ![excluded containsObject:p2]) {
        [excluded addObject:p2];
    }

    if (pos1 == pos2) return NSOrderedSame;
    if (pos1 > pos2) return NSOrderedDescending;
    return NSOrderedAscending;
}];
NSArray *sortedArray = [tmp subarrayWithRange:NSMakeRange(0, [tmp count] - [excluded count])]; 
```

# jquery - 带有滚动分页的struts2 jquery

> ID：13386421
> 
> 赞同：0
> 
> 时间：2012-11-14T20:03:10.860
> 
> 标签：jquery, ajax, struts2, struts2-jquery, scroll-paging

关于如何在 struts2 中使用 ajax 滚动分页的任何想法？
我在网上找到了一些关于 jquery 分页的有用内容，但我无法将它与我的 struts2 框架集成。
这是 jquery 分页的一个示例（在 php 上）：
[http ://www.webdeveloperjuice.com/2010/02/24/create-infinte-scroll-effect-using-jquery-with-demo/](http://www.webdeveloperjuice.com/2010/02/24/create-infinte-scroll-effect-using-jquery-with-demo/)

谢谢

# java - 将从文件读取的文本添加到java中的数组列表

> ID：13386433
> 
> 赞同：0
> 
> 时间：2012-11-14T20:03:56.757
> 
> 标签：java, arraylist

我无法将从文件中读取的文本放入数组列表中。

我的文字如下所示：

```
438;MIA;JFK;10:55;1092;447
638;JFK;MIA;19:45;1092;447
689;ATL;DFW;12:50;732;448 etc... 
```

我的代码如下所示：

```
package filesexample;
import java.io.*;
import java.io.FileNotFoundException;
import java.util.Scanner;
import java.util.ArrayList;
/**
*
* @author 
*/
public class FilesExample {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException {

    File file = new File ("/Schedule.txt");

    try
    {
        Scanner scanner= new Scanner(file);;

        while (scanner.hasNextLine())
        {
            String line = scanner.nextLine();
            Scanner lineScanner= new Scanner(line);
            lineScanner.useDelimiter(";");
            while(lineScanner.hasNext()){
            String part = lineScanner.next();
            System.out.print(part + " ");
        }

          System.out.println();          

        }

    }catch (FileNotFoundException e){
            e.printStackTrace();
        }
    }
} 
```

非常感谢您对入门的一些帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:06:09.090

您不需要执行以下操作

```
Scanner lineScanner= new Scanner(line);
lineScanner.useDelimiter(";"); 
```

做就是了

```
String[] parts = line.split(";"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:06:37.200

使用[String.split(delimiter)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)分割你的字符串。

```
List<String> list = new ArrayList<String>();
    while (scanner.hasNextLine())
            {
                String line = scanner.nextLine();
                String[] strArr = line.split(";");
                for(String s: strArr){
                 list.add(s); //adding a string into the list
                 System.out.println(s +  " ");
                }
                }

              System.out.println(); 
```

**编辑：根据您的评论**

> 在我发布的文字中，第一个数字是航班号、出发地、目的地、时间、里程和价格。他们都需要每个类别都有自己的数组，所以航班号需要自己的数组，起源自己的数组等。

您不需要每个属性的数组。创建一个类并将其命名为**Filght**。并将您的属性设为实例变量。

```
class Flight {
private long filghtNo;
private String origin;
private dest;
private Date time;
private long miles;
private double price;
//setters and getters
}

   List<Flight> list = new ArrayList<Flight>();
    Flight flight = new Flight();
    while (scanner.hasNextLine())
            {
                String line = scanner.nextLine();
                Scanner scan = new Scanner(line);
                if(scan.hasNextLong()){
                 flight.setFilgthNo(scan.nextlong());
                  }
                else if // do the  same for other properties
                }

     list.add(flight); 
```

这种方式更加**面向对象**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:13:34.727

> 他们都需要每个类别都有自己的数组，所以航班号需要自己的数组，起源自己的数组

我会说，不要。您不需要为它们中的每一个设置单独的数组。

我宁愿创建一个`class`带有属性的： - `flight number, origin, destination, time, miles and price`。

现在对于每一行，我只需将其拆分为`;`，并在类中有一个以数组作为参数的构造函数。而不是`ArrayList`为每个参数单独设置，我将拥有一个`ArrayList`该类实例。

```
class Flight {
    private int flightNumber;
    private String origin;
    private String destination;
    ... so on for `time, miles and price`

    public Flight(String[] attr) {
        this.flightNumber = Integer.parseInt(attr[0]);
        this.origin = attr[1];
        this.destination = attr[2];
        ... so on.
    }
} 
```

然后你在哪里使用： -

```
Scanner lineScanner = new Scanner(line);
lineScanner.useDelimiter(";"); 
```

我会[`String#split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)用来获取单个属性，然后创建一个`ArrayList<Flight>`, 并向其中添加`Flight`实例：-

```
List<Flight> flights = new ArrayList<Flight>();

while (scanner.hasNextLine()) {
     String line = scanner.nextLine();
     String[] attributes = line.split(";");
     flights.add(new Flight(attributes));
} 
```

**笔记 ： -**

您可以改进实例化`Flight`类的方式以及设置不同属性的方式。由于您的属性属于不同类型，并且它们位于 中`String form`，因此您需要使用适当`conversion`的 from`String to Integer`或`String to double`我在这里没有考虑过的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T22:57:05.860

我重申需要更多面向对象的方法，但这就是您所需要的。

```
public final class FlightInfoParser {

  private static final String[] EMPTY_STRING_ARRAY = new String[]{};

  public static void main(String[] args) throws IOException {
    BufferedReader r = new BufferedReader(new InputStreamReader(new FileInputStream(file)));

    List<String> flightNumbersList = new ArrayList<String>();
    List<String> originsList = new ArrayList<String>();
    List<String> destinationsList = new ArrayList<String>();
    List<String> departureTimesList = new ArrayList<String>();
    List<Integer> milesList = new ArrayList<Integer>();
    List<Double> pricesList = new ArrayList<Double>();

    String line;
    while ((line = r.readLine()) != null) {
        String[] fields = line.split(";");
        flightNumbersList.add(fields[0]);
        originsList.add(fields[1]);
        destinationsList.add(fields[2]);
        departureTimesList.add(fields[3]);
        milesList.add(Integer.parseInt(fields[4]));
        pricesList.add(Double.parseDouble(fields[5]));
    }

    String[] flightNumbersArray = flightNumbersList.toArray(EMPTY_STRING_ARRAY);
    String[] originsArray = originsList.toArray(EMPTY_STRING_ARRAY);
    String[] destinationsArray = destinationsList.toArray(EMPTY_STRING_ARRAY);
    String[] departureTimesArray = departureTimesList.toArray(EMPTY_STRING_ARRAY);

    int[] milesArray = new int[milesList.size()];
    for (int i = 0, len = milesArray.length; i < len; ++i) {
        milesArray[i] = milesList.get(i);
    }

    double[] pricesArray = new double[pricesList.size()];
    for (int i = 0, len = pricesArray.length; i < len; ++i) {
        pricesArray[i] = pricesList.get(i);
    }

  }

} 
```

# css - 具有圆边且无溢出的 CSS 色调图像

> ID：13386451
> 
> 赞同：0
> 
> 时间：2012-11-14T20:04:50.463
> 
> 标签：css, hover

我正在尝试在 Hover 上为图像着色。我有 css 工作，但一些具有圆形边缘或未完全填充父级的图像显示黑色背景： ![在此处输入图像描述](../Images/b9c3936e0ff5a4adca64e75d5855dbd4.png)

（最左边有鼠标在它上面）

如何隐藏黑色所以只有 img 是有色的？

这是我的CSS：

```
.thumb {
    width:150px;
    height:150px;
    margin: 0px 5px 14px 14px;
    float:left;
    display:inline;
background: black;
    overflow:hidden;
    cursor: pointer;
    /*border: 2px solid #00A3C6; */
}

.thumb img {
    display: block;
    -webkit-transition: all 0.25s linear;
       -moz-transition: all 0.25s linear;
        -ms-transition: all 0.25s linear;
         -o-transition: all 0.25s linear;
            transition: all 0.25s linear;

}

.thumb:hover img { 
    opacity: 0.7;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:07:28.510

如果图像有圆角，您可以`border-radius`在 css 中使用来设置“色调”容器的圆角。

如果实际图像有白色边框......你有点不走运。您可以[裁剪](http://cssglobe.com/3-easy-and-fast-css-techniques-for-faux-image/)图像，但您无法为任何类型的图像动态地执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:11:05.027

> 如何隐藏黑色所以只有 img 是有色的？

尝试`background: black`从`.thumb`?

`display: inline`那里也不需要PS

# repository - 了解Android源码仓库的基本命名方案

> ID：13386456
> 
> 赞同：5
> 
> 时间：2012-11-14T20:05:12.037
> 
> 标签：repository, android-source, repository-design

我刚刚根据[官方说明](http://source.android.com/source/downloading.html)下载了完整的 4.0.1_r1 Android Source Code 存储库。有人可以帮助我了解存储库的基本命名方案吗？

例如，在存储库的根目录中，“frameworks”目录到底是什么？这与“包”目录有何不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T06:42:03.353

在过去的几年里，我花了很多时间研究 android 源代码，所以让我来解释一下根目录中的不同文件夹。这些大致是（取决于android版本）：

*   **仿生**

    *   专门为 Android 使用和开发的标准 c 库。
*   **可引导**

    *   包含引导加载程序（设备制造商通常提供）和在手机启动进入恢复模式时执行的恢复应用程序。
*   **建造**

    *   Android 有非常独特的模块化构建系统，它本身是建立在普通的 make-file 之上的。例如，`build/target/products`您会发现启动时看到的所有通用构建目标`lunch`。
*   **cts**

    *   [兼容性测试套件](http://source.android.com/compatibility/cts-intro.html)。当设备制造商想要让他们的设备获得认证（从而获得 Google Play 和其他专有应用程序）时，他们需要通过 CTS。CTS 的源代码包含在此目录中。
*   **达尔维克**

    *   [dalvik 虚拟机](http://code.google.com/p/dalvik/)。Android 将 java 用于框架的大部分以及所有应用程序。因为每个应用程序在自己的 uid 下作为自己的进程运行，在自己的虚拟机中，虚拟机必须占用相当小的内存，因此 Android 选择使用名为 dalvik 的 Java 自定义虚拟机。dalvik的源码放在这里。
*   **发展**

    *   我还没有真正使用过这个存储库，但似乎支持开发 android 应用程序的东西都放在这里了。
*   **设备**

    *   每个设备供应商都将定义其特定设备的所有内容放在这里。例如，您可以`devices/{yourname}/products/{yourdevice}.mk`准确定义应该为您的设备构建哪些应用程序（以及其他一些东西）。这会在午餐菜单中添加一个名为`{yourdevice}`您可以构建的条目。
*   **文档**

    *   据我了解，这实际上是`http://source.android.com`.
*   **外部的**

    *   几乎所有由 Android 引入并构成基本 Android Linux 操作系统的第三方项目都位于此处。它们维护在自己的 git 存储库中，这使得从上游拉取新版本变得容易。您会在这里看到`bzip2`, `dbus`, `ping`,`tcpdump`和许多其他项目。
*   **构架**

    *   这是Android框架的来源。您在为 Android 构建应用程序时使用的所有内容。我认为它大约是 50% 的 Java 代码和 50% 的 C++（有时是 C），它们使用[jni](http://en.wikipedia.org/wiki/Java_Native_Interface)绑定在一起。例如，当您在应用程序中播放一些音频时，您可能正在访问`AudioManager`. 源代码`AudioManager`以及所有支持的内部 Android 源代码`AudioManager`都放在`frameworks/base/media`. 您会发现大部分 Android SDK 在`frameworks/base/`.
*   **硬件**

    *   Android 与一组库对话，然后控制硬件（例如振动器、灯光、接近传感器、gps、音频等）。这些库统称为 HAL（硬件抽象层）。该文件夹中包含一些默认实现`hardware`，但是制造商实现了自己的库并将它们放置在`hardware/{manufcaturename}`（或`device/{manufacture}`）中。
*   **库核心**

    *   我不知道这个。
*   **ndk**

    *   本[机开发工具包](http://developer.android.com/tools/sdk/ndk/index.html)允许应用程序开发人员将他们的部分（或全部）应用程序编码为本机代码（通常在 c 和 c++ 中）。基本上，它是一个交叉编译到 Android 运行的不同 cpu 架构的工具链。
*   **出去**

    *   *所有*Android 构建工件都放置在此处。因此，删除`out`文件夹将完全清除源。`out`分为不同的文件夹，主要的文件夹是为主机（例如adb）和目标设备（大多数android系统）编译的东西被分开的地方`host`。`target`下面还有进一步的细分，一般来说`out`文件夹的排序很好，所以你应该自己探索一下。
*   **包**

    *   这些包含与 Android 一起构建的所有默认应用程序、提供程序、输入方法等。手机应用、通讯录、日历、计算器、默认软键盘等都放在这里。它们不是 3rd 方应用程序，它们是内部应用程序，其中许多是针对非公共 android api 构建的。所以这里的大多数应用程序不能针对公共 Android SDK 构建（例如在 eclipse 中），但必须作为完整 Android 构建过程的一部分进行构建。
*   **预建**

    *   与 Android 一起作为二进制文件分发的东西。此处的主要内容是为 ARM（现在还有 x86）构建 Android 的交叉编译器。它们是预先构建的，因此您不必自己实际构建交叉编译器。（如果您除了 Android 还必须编译交叉编译器，这可能会非常耗时。）
*   **sdk**

    *   属于 Android SDK 的所有工具，例如 ddms、模拟器、sdkmanager 等。
*   **系统**

    *   在安卓设备上运行的核心系统进程。这些是本机（c 或 c++）程序。Mediaservice 就是这种系统服务的一个例子。

这完全来自我使用 Android 源代码的经验，我没有任何（其他）参考资料。我希望这可以帮助您了解文件夹结构。

# android - 与 adb 的连接被中断 您可能需要从设备视图手动重新启动 adb

> ID：13386457
> 
> 赞同：6
> 
> 时间：2012-11-14T20:05:29.993
> 
> 标签：android, eclipse, android-emulator

我正在使用 Windows 7 和 JDK 6。

我下载了带有 Eclipse 的 Android SDK 包，并按照说明创建了第一个 Hello World 应用程序。

但是，当我站在 MainActiviy.java 上并单击运行时，我在控制台中收到以下错误：

> 与 adb 的连接被中断 您可能需要从设备视图手动重新启动 adb。

我尝试了很多在这里看到的答案： 1\. 重新启动 adb 服务器 2\. 确保路径是正确的 JDK 3\. 我查看了首选项，没有看到任何警告或错误。

我可以运行模拟器 - 它工作正常。但它不运行 Hello World 应用程序。

怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T20:56:54.023

我必须进入 DDMS 视图，并在设备的视图菜单中选择：

重启亚行。

这使一切正常

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T20:14:22.600

以下是您可以尝试解决该问题的选项列表：

*   运行：`adb kill-Server`，之后`adb start-Server`
*   尝试禁用并在设置后启用设备上的 USB 调试。这样做时，拔出 USB 电缆并将其放回也有帮助。
*   稍等一下，如果它启动缓慢并且 Eclipse 会丢弃此错误，有时会发生这种情况。
*   尝试通过任务管理器杀死 adb.exe。它将以不同的方式重新启动。
*   您可以尝试提高 Eclipse 的性能（主要用于 Android）：

    打开`eclipse.ini`并设置：

    ```
     -Xms128m        
     -Xmx512m         
     -XX:MaxPermSize=256m` 
    ```

*   尝试禁用防火墙

*   卸载以前版本的 JRE 或 JDK（如果您还有当前使用的新版本）。之后，重启 Eclipse
*   DDMS 能看到你的模拟器吗？尝试`adb`通过 DDMS重启
*   还要添加（如果你还没有） ADB 到全局路径：我的电脑 -> 属性 -> 高级系统设置 -> 环境变量 -> 按`New...` `name: ADB`；`value: <your android SDK path>\platform-tools`. 添加到路径 %ADB% 后

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-05T15:54:34.847

扩展 Dejel 上面的答案，进行一项更改：

1.  Window -> Open Perspective -> DDMS（DDMS 可以在“Other...”部分）
2.  窗口 -> 显示视图 -> 设备（如果在左侧窗格中尚不可见）
3.  在视图菜单下（“设备”标题上的小向下三角形）选择“重置 adb”（在较新的版本中，重新启动可能已重命名为“重置”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-25T06:56:32.153

我也有类似的问题。努力解决了很多问题，最后这对我有用。

1.  删除工作区根文件夹中的所有文件夹（工作区文件夹除外），如 .android、.eclipse、.metadata 等

2.  将您的平台保存到更安全的地方并删除文件夹“adt-bundle-windows-x86-20130729”

3.  再次将捆绑包解压缩到其他位置

4.  尝试再次运行 eclipse 并创建一个应用程序

5.  运行应用程序并查看模拟器是否自动启动

6.  粘贴回您的平台

这在我第四次尝试时对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-20T00:12:56.750

我做了一些非常简单的事情。我将 adb.exe 从用户文件夹（用户//android-sdks/platform-tools 复制到 android-sdks 下的工具文件夹。

然后在 Android 下的首选项中，我单击“恢复默认值”，然后再次浏览回 C:\Users\\android-sdks 然后单击最新的 API (19) 单击确定..

然后它起作用了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-16T16:45:11.823

这对我有用：

只需转到笔记本电脑或PC中的设备管理器->转到进程->单击adb并->单击结束进程。

现在转到 sdk 文件夹（它可能位于驱动器中的不同位置）并右键单击 adb.exe 并单击以管理员身份运行。

现在检查它是否工作正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-03T20:50:20.747

这总是对我有用。跟着这些步骤 ：-

> 1.  关闭 Eclipse。
> 2.  从任务管理器中杀死**adb.exe （仅限 Windows）**
> 3.  断开您的设备。
> 4.  重新连接您的设备。
> 5.  启动 Eclipse 并等待 Eclipse 构建工作区。

PS 这在物理设备上完美运行。我还没有在模拟器上尝试过。

# c++ - 创建一个使用另一个 DLL 并使用 JNI 访问的 DLL

> ID：13386458
> 
> 赞同：0
> 
> 时间：2012-11-14T20:05:33.240
> 
> 标签：c++, dll, java-native-interface

当我尝试将 JNI 与我创建的 DLL 一起使用时，我遇到了一个问题。

我创建了一个名为 InfraredTest.dll 的 DLL。这个 dll 引用了另一个，称为 RedRat.dll。当我尝试使用 InfraredTest.dll 中使用 RedRat.dll 函数的函数时，我收到来自 JVM 的致命错误。

观察： 1 - 我已经测试了 RedRat.dll 链接，创建了 InfraRedTest.exe，并且它使用相同的代码可以正常工作。2 - 我已经在没有调用 RedRat.dll 的情况下使用 JNI 测试了 InfraRedTest.dll，并且工作正常。

我可以看到问题在于找不到 RedRat.dll。我把第一个 DLL 放在同一个地方，并且还收到了 JVM 崩溃。

这是代码：

```
#include "IRWrapper.h"  
#include <iostream>

using namespace std;
using namespace RedRat;
using namespace RedRat::RedRat3;
using namespace RedRat::RedRat3::USB;

JNIEXPORT void JNICALL   
Java_HelloWorld_displayHelloWorld(JNIEnv *env, jobject obj)  
{  
    printf(" --- Calling IRWrapper.dll --- \n");

    array<LocationInfo^>^ rr3Li = RedRat3USBImpl::FindRedRat3s();
    if (rr3Li->Length == 0)
    {
        printf("No RedRats found.");
    }   else {
        printf("Found: %d devices.\n",rr3Li->Length);
    }
    return;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:59:03.417

您`InfraredTest.dll`可能与`RedRat.lib`. 在您的观察中，我没有看到最重要的测试场景：模拟整个调用链。有`CallingTheSameFunctionsLikeJava.exe`，哪个叫`InfraredTest.dll`，那个叫`RedRat.dll`。使用您现有的测试，您总是只测试一个链环。我敢打赌，一旦这个测试 exe 正常工作，JNI 也不会再有问题了。如果 Java 模拟的 exe 仍然存在问题，请再次发布问题，但不要使用`JNI`.

# javascript - 在一行中使用 JQuery 获取查询字符串？

> ID：13386459
> 
> 赞同：-5
> 
> 时间：2012-11-14T20:05:34.257
> 
> 标签：javascript, jquery

我到处搜索，但我找不到一篇在一行中获取查询字符串值的帖子，而无需自己编写函数......

不是从 JQuery 中内置的查询字符串中获取值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:08:20.677

使用正则表达式搜索键，然后搜索对应的值。[jsfiddle](http://jsfiddle.net/3RgXH/1/)

```
var value = location.search.match(new RegExp(key + "=(.*?)($|\&)", "i"))[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:09:14.447

以 开头`window.location.href`，然后使用字符串命令在第一个 '?' 处创建子字符串。

# regex - IP (v4) 地址的正则表达式

> ID：13386461
> 
> 赞同：3
> 
> 时间：2012-11-14T20:05:39.417
> 
> 标签：regex, vb.net

我正在尝试对 HTML 页面中的 IP 地址使用正则表达式：

```
<html>
  <head><title>Current IP Check</title></head>
  <body>Current IP Address: xx.xxx.xxx.xx</body>
</html> 
```

我的 VB.Net 代码目前是这样的：

```
Using wClient As New WebClient
   ip = wClient.DownloadString("http://checkip.dyndns.org/")
   ip = Regex.Match(ip, "^[+-]?(\d+(\.\d+)?|\.\d+)$", RegexOptions.Singleline).ToString
End Using 
```

然而，最终的结果对于 IP 来说毫无意义。

我只是想得到**xx.xxx.xxx.xx**

我会做错什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T20:10:42.877

IP 地址的正则表达式比您概述的要复杂得多。但是没有理由重新发明轮子。请看一下[正则表达式示例](http://www.regular-expressions.info/examples.html)，这是一个解释一切的例子：

```
\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:21:48.817

IPv4 没有 + 或 - 符号，如果您没有其他类似字符串模式的危险，您实际上可以更简单地做到这一点

```
\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b 
```

此外，如果您需要查找 IPv6 地址，那么您可以尝试类似

```
\b(?:[\dA-F]{1,4}:){1,7}(?:(?::[\dA-F]{1,4}){1,6}|(?:::[\dA-F]{1,4}){1,7}|:|[\dA-F]{1,4})?\b 
```

请注意，这两个都会找到“候选人”，并且不应该用于验证。如果您想使用 RegEx 验证 IPv6，请查看[**此处**](http://home.deds.nl/~aeron/regex/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:24:44.567

对于这样简单的 html，您可以只使用 strings.split：

```
Dim source As String = wClient.DownloadString("http://checkip.dyndns.org/")
Dim ip As String = Split(Split(source, "Current IP Address:")(1), "</body>")(0).Trim() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-24T11:08:52.263

由于@Neolisk 的答案在大多数情况下都有效，因此我对其进行编辑以接受前导零的数字：

```
\b(0*(25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(0*(25[0-5]|2[0-4]\d|[01]?\d\d?))\b 
```

接受一些IP，如`000010.10.10.000001`

# php - 基本身份验证 URL 处理

> ID：13386462
> 
> 赞同：1
> 
> 时间：2012-11-14T20:05:40.760
> 
> 标签：php, basic-authentication

我们有一个新的 b2b 供应商希望通过 URL 使用基本身份验证。

他们想像这样进行身份验证：

```
 //URL coming into our server
  http://usernametext:passwordtext@our.company.com/listener.php 
```

如何通过 listener.php 脚本从 URL 获取用户名和密码？

我已经尝试为每个 php 手册页设置基本的身份验证标头，但它会弹出一个登录框，这不是我需要的，因为这些是相互通信的 Web 服务，而不是人：

```
if (!isset($_SERVER['PHP_AUTH_USER'])) {
     header('WWW-Authenticate: Basic realm="My Realm"');
     header('HTTP/1.0 401 Unauthorized');
     echo '<response><error>No username and password found</error></response>';
     exit;
 } else {

   //process request if username & password are legit

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:01:16.643

感谢所有提供的解决方案。这是为我解决了这个问题的方法：

这是一个服务器配置问题。我需要在我的 PHP中编译[Apache 扩展。](http://www.php.net/manual/en/book.apache.php)一旦我这样做了，$_SERVER 数组就会包含 $_SERVER['PHP_AUTH_USER'] 和 $_SERVER['PHP_AUTH_PW'] 值。在此之前，$_SERVER 数组中缺少这些值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:11:26.893

为什么不通过旧的 $_GET 发送信息？就像是 `http://our.company.com/listener.php?usr='me'&pswd='secret'`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T20:18:06.190

这可能会有所帮助：

```
if (!isset($_SERVER['PHP_AUTH_USER'])) {
    header('WWW-Authenticate: Basic realm="My Realm"');
    header('HTTP/1.0 401 Unauthorized');
    echo 'Text to send if user hits Cancel button';
    exit;
} else {
    echo "<p>Hello {$_SERVER['PHP_AUTH_USER']}.</p>";
    echo "<p>You entered {$_SERVER['PHP_AUTH_PW']} as your password.</p>";
} 
```

更详细的可以查看：[http-auth](http://php.net/manual/en/features.http-auth.php)

更新：如果您不需要弹出框（即确认用户+在非必需的身份验证站点上传递），只需在目录中添加 .htaccess。

```
AuthType Basic
AuthName "Password Required" 
```

# ckeditor - Wygwam 的 ExpressionEngine 问题

> ID：13386465
> 
> 赞同：2
> 
> 时间：2012-11-14T20:05:58.450
> 
> 标签：ckeditor, expressionengine

我在这里发布了这个： [https ://getsatisfaction.com/pixelandtonic/topics/wygwam_not_styled_in_cp_entry_and_not_functioning_shown_errors_attached](https://getsatisfaction.com/pixelandtonic/topics/wygwam_not_styled_in_cp_entry_and_not_functioning_shown_errors_attached)

...但是如果有人可以在这里提供帮助，我真的需要尽快修复。

我无法让 Wygwam 工作。

它从我运行这个开始：

*   EE 1.6.8（同样，无法更新）
*   威格瓦姆 2.1.6
*   FieldFrames 1.4.5

我无法激活模块。我会收到错误，然后该字段被顶起。

然后我将 Wygwam 升级到 2.6.3 并允许我启用该模块。

我现在遇到的问题是：

当我尝试添加一个新的 Wygwam 字段时，它告诉我没有可用的配置。当我转到“编辑配置”时，我只得到序列号输入字段。我添加了序列号，但没有任何改变。在“编辑器配置”下它只是说：目前没有配置。

现在我恢复了现有字段，但是，我无法查看源代码，也没有任何可用的“可配置编辑器”。我也无法在模块中设置任何“可配置编辑器”，因为我没有显示设置/选项。另外，我不能添加任何新的 Wygwam 字段，因为当我这样做时，我只会得到一个白屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:41:36.117

好的，虽然这可能不是最好的答案，但它已经解决了我所处的情况。

首先，感谢 Pixel & Tonic 的 Brad Bell，感谢他通过电子邮件与我保持联系，试图解决这个问题。我在这个站点的情况下无法提供对站点、文件、数据等的访问权限。这无疑使获得与 EE 相关实例的帮助变得更加困难。布兰登和他的员工肯定知道如何解决这些问题。

多谢你们。

我们尝试的一切都没有奏效。我最终要做的是将 Wygwam 和 Matrix 的版本从安装到 WW 2.1.1 和 Matrix 2.0.11 的最新版本中回滚

我没有尝试更新版本，因为由于这些问题和其他问题，我想比以往任何时候都更加努力地进行站点更新/重建。该站点在这些区域再次发挥作用，它们可以再次向前移动（或横向...取决于您的立场）。

# asp.net - 修复 IIS 的缓慢初始加载

> ID：13386471
> 
> 赞同：141
> 
> 时间：2012-11-14T20:06:32.210
> 
> 标签：asp.net, .net-4.0, iis-7.5

IIS 对低流量网站有一个烦人的功能，它会回收未使用的工作进程，导致第一个用户在一段时间后访问该站点会出现极长的延迟（30 多秒）。

我一直在寻找解决问题的方法，并且找到了这些潜在的解决方案。

A.[使用应用程序初始化插件](http://forums.iis.net/t/1176740.aspx)

B.[使用 .NET 4 的自动启动](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)

C.[禁用空闲超时（在 IIS 重置下）](https://stackoverflow.com/a/8808855/1080891)

D.[预编译网站](http://msdn.microsoft.com/en-us/library/ms228015%28v=vs.85%29.aspx)

我想知道其中哪一个是首选，更重要的是，为什么同一问题有这么多解决方案？（我的猜测是他们不是，我只是没有正确理解某些东西）。

**编辑**

执行**C**似乎足以让我的网站热身，但我发现我的网站缓慢的真正根源与实体框架有关，我似乎无法弄清楚它为什么会变冷。看到[这个](https://stackoverflow.com/q/13250679/1080891)问题，~~不幸的是还没有回答，还~~没有回答！

我最终只需要制作一个[热身脚本](http://social.technet.microsoft.com/wiki/contents/articles/4641.write-an-iis-warm-up-script-for-a-sharepoint-intranet-site-en-us.aspx)来偶尔访问我的网站以确保它保持快速。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-14T20:12:08.080

选项 A、B 和 D 似乎属于同一类别，因为它们只影响初始启动时间，它们会预热网站，例如编译和加载内存中的库。

使用 C 设置空闲超时应该足够了，以便快速处理对服务器的后续请求（重新启动应用程序池需要相当长的时间 - 以秒为单位）。

据我所知，存在超时是为了节省在该机器上并行运行的其他网站可能需要的内存。价格是一次缓慢的加载时间。

除了在用户不活动的情况下关闭应用程序池这一事实外，应用程序池还将默认每 1740 分钟（29 小时）回收一次。

来自技术网：

> Internet 信息服务 (IIS) 应用程序池可以定期回收以避免可能导致应用程序崩溃、挂起或内存泄漏的不稳定状态。

只要保留应用程序池回收，就足够了。但是，如果您真的想要大多数组件的顶级性能，您还应该使用您提到的应用程序初始化模块之类的东西。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-11T01:26:49.267

**虚拟主机挑战**

您必须记住，如果您像我们许多人（较小的公司和个人）一样托管在共享服务器上，则没有任何机器配置选项可用。

**ASP.NET MVC 开销**

如果我的网站在 20 分钟内没有被点击（并且 Web 应用程序已停止），它至少需要 30 秒。这很糟糕。

**另一种测试性能的方法**

还有另一种方法可以测试它是您的 ASP.NET MVC 启动还是其他。在您的网站上放置一个普通的 HTML 页面，您可以直接点击它。
如果问题与 ASP.NET MVC 启动有关，那么即使 Web 应用程序尚未启动，HTML 页面也会几乎立即呈现。
这就是我第一次认识到问题出在 ASP.NET MVC 启动中的方式。我在任何时候都加载了一个 HTML 页面，它的加载速度非常快。然后，在点击该 HTML 页面后，我点击了我的 ASP.NET MVC URL 之一，我会收到 Chrome 消息“等待 raddev.us...”

**另一个有用脚本的测试**

之后，我编写了一个 LINQPad（查看[http://linqpad.net](http://linqpad.net)了解更多信息）脚本，该脚本每 8 分钟访问一次我的网站（少于应用程序卸载的时间——应该是 20 分钟），然后我让它运行了几个小时。

当脚本运行时，我访问了我的网站，每次我的网站都以惊人的速度出现。这给了我一个好主意，我遇到的缓慢很可能是因为 ASP.NET MVC 启动时间。

获取 LinqPad，您可以运行以下脚本——只需将 URL 更改为您自己的并让它运行，您就可以轻松地进行测试。祝你好运。

**注意**：在 LinqPad 中，您需要按*F4*并添加对 System.Net 的引用以添加将检索您的页面的库。

**还**：确保将 String URL 变量更改为指向将从 ASP.NET MVC 站点加载路由的 URL，以便引擎运行。

```
System.Timers.Timer webKeepAlive = new System.Timers.Timer();
Int64 counter = 0;
void Main()
{
    webKeepAlive.Interval = 5000;
    webKeepAlive.Elapsed += WebKeepAlive_Elapsed;
    webKeepAlive.Start();
}

private void WebKeepAlive_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    webKeepAlive.Stop();
    try
    {
        // ONLY the first time it retrieves the content it will print the string
        String finalHtml = GetWebContent();
        if (counter < 1)
        {
            Console.WriteLine(finalHtml);
        }
        counter++;
    }
    finally
    {
        webKeepAlive.Interval = 480000; // every 8 minutes
        webKeepAlive.Start();
    }
}

public String GetWebContent()
{
    try
    {
    String URL = "http://YOURURL.COM";
    WebRequest request = WebRequest.Create(URL);
    WebResponse response = request.GetResponse();
    Stream data = response.GetResponseStream();
    string html = String.Empty;
    using (StreamReader sr = new StreamReader(data))
    {
        html = sr.ReadToEnd();
    }
    Console.WriteLine (String.Format("{0} : success",DateTime.Now));
    return html;
    }
    catch (Exception ex)
    {
        Console.WriteLine (String.Format("{0} -- GetWebContent() : {1}",DateTime.Now,ex.Message));
        return "fail";
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-21T22:09:10.287

编写一个 ping 服务/脚本来访问您的闲置网站是最好的方法，因为您将拥有完全的控制权。如果您租用了专用主机箱，则可以使用您提到的其他选项。

在共享主机空间中，预热脚本是最好的第一级防御（自助是最好的帮助）。这是一篇文章，它分享了[如何从您自己的 Web 应用程序中执行此操作](http://davidsekar.com/asp-net/keep-alive-for-iis-sites)的想法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T20:31:57.887

我会使用**B**因为它与工作进程回收一起意味着在回收时只会有延迟。这避免了通常与响应空闲后的第一个请求的初始化相关的延迟。您还可以保留回收的好处。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-27T20:40:21.033

按计划 ping 站点的一个不错的选择是使用 Microsoft Flow，每月最多可免费运行 750 次“运行”。创建一个每小时访问您的站点以保持其温暖的流非常容易。您甚至可以通过创建单个流来解决其 750 的限制，该流具有将您的站点的多个点击分开的延迟。

[https://flow.microsoft.com](https://flow.microsoft.com)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-28T21:20:01.610

有关如何帮助解决性能问题的提示，请参阅本文。这包括与“冷启动”部分下的启动相关的性能问题。无论您在本地还是在生产中使用哪种类型的服务器，大部分内容都将很重要。

[https://blogs.msdn.microsoft.com/b/mcsuksoldev/2011/01/19/common-performance-issues-on-asp-net-web-sites/](https://blogs.msdn.microsoft.com/b/mcsuksoldev/2011/01/19/common-performance-issues-on-asp-net-web-sites/)

> 如果应用程序从 XML 中反序列化任何内容（包括 Web 服务……），请确保 SGEN 针对反序列化中涉及的所有二进制文件运行，并将生成的 DLL 放在全局程序集缓存 (GAC) 中。这会预编译运行 SGEN 的程序集使用的所有序列化对象，并将它们缓存在生成的 DLL 中。这可以为配置文件从磁盘的第一次反序列化（加载）和对 Web 服务的初始调用节省大量时间。 [http://msdn.microsoft.com/en-us/library/bk3w6240(VS.80).aspx](http://msdn.microsoft.com/en-us/library/bk3w6240(VS.80).aspx)

> 如果任何 IIS 服务器没有对 Internet 的传出访问权限，请通过在 machine.config 中添加 generatePublisherEvidence=”false” 来关闭证书吊销列表 (CRL) 检查 Authenticode 二进制文件。否则，每个工作进程在启动期间可能会挂起超过 20 秒，同时它会超时尝试连接到 Internet 以获取 CRL 列表。 [http://blogs.msdn.com/amolravande/archive/2008/07/20/startup-performance-disable-the-generatepublisherevidence-property.aspx](http://blogs.msdn.com/amolravande/archive/2008/07/20/startup-performance-disable-the-generatepublisherevidence-property.aspx)

> http://msdn.microsoft.com/en-us/library/bb629393.aspx

> 考虑在所有程序集上使用 NGEN。但是，如果不小心使用，这不会带来太多的性能提升。这是因为每个进程加载的所有二进制文件的基本加载地址必须在构建时仔细设置，以免重叠。如果由于地址冲突而在加载二进制文件时必须重新设置它们的基础，则几乎所有使用 NGEN 的性能增益都将丢失。 [http://msdn.microsoft.com/en-us/magazine/cc163610.aspx](http://msdn.microsoft.com/en-us/magazine/cc163610.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-22T20:10:15.800

在 4 分钟不活动后，我在第一个请求上得到了一致的 15 秒延迟。我的问题是我的应用程序正在对 SQL Server 使用 Windows 集成身份验证，并且服务配置文件与服务器位于不同的域中。这导致在应用程序初始化时从 IIS 到 SQL 的跨域身份验证 - 这是我延迟的真正原因。我改为使用 SQL 登录而不是 Windows 身份验证。延迟立即消失了。我仍然拥有所有应用程序初始化设置以帮助提高性能，但在我的情况下可能根本不需要它们。

# ios - iOS钥匙串和加密密钥，如何在存储之前保持安全

> ID：13386473
> 
> 赞同：1
> 
> 时间：2012-11-14T20:06:36.843
> 
> 标签：ios, xcode

我想在钥匙串中存储一些用于数据传输的加密密钥，以确保它们的安全。

我的问题是，在将它们放入钥匙串之前，如何保证它们的安全？如果我将它们硬编码到应用程序中，并在第一次启动时将它们添加到钥匙串中，那么黑客将能够通过反编译来检索它们，任何输入都将受到高度赞赏。

我想补充一点，我对数据传输的验证也取决于用户密码，该密码安全地存储在钥匙串中，但仍希望确保我的加密密钥安全。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:09:47.777

三个字：SSL 网络服务

# java - Guava-11.0.2.jar 是否与 com.google.common_1.0.0.0_0-6.jar 冲突？

> ID：13386474
> 
> 赞同：3
> 
> 时间：2012-11-14T20:06:42.307
> 
> 标签：java, weblogic, guava, weblogic12c

我在 weblogic 服务器上部署应用程序时遇到问题，[在 stackoverflow 上](https://stackoverflow.com/questions/13362523/weblogic-guava-issue-when-deploying-application)

进行讨论后， 我意识到问题是 weblogic 12c 正在使用 lib 文件 com.google.common_1.0.0.0_0-6.jar ，而我的应用程序是使用 Guava-11.0.2.jar，对我来说听起来像是冲突，试图在谷歌上搜索，但我不知道该怎么做，什么是解决它的正确解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:34:03.720

我遇到了同样的问题，我所做的是，我将 weblogic-home/modules 中的 com.google.common_1.0.0.0_0-6.jar 文件替换为当前为 guava-13.0.1.jar 的最新 Guava，但是然后我看到 weblogic 正在寻找一个名为 com.google.common .... 的文件，所以我只是将 Guava 文件重命名为 com.google.common_1.0.0.0_0-6.jar，它对我有用。

希望它也对你有用！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-27T04:17:57.347

这是一个众所周知的问题Weblogic。解决方案是使用设置文件 weblogic.xml，其中可以通过类加载器指定启动顺序库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T21:25:02.090

没有@meilechh 建议的黑客攻击，这个问题很容易解决。您可以添加`prefer-application-packages`到您的`weblogic.xml`或`weblogic-application.xml`.

查看[http://docs.oracle.com/middleware/1212/wls/WLPRG/classloading.htm#WLPRG315](http://docs.oracle.com/middleware/1212/wls/WLPRG/classloading.htm#WLPRG315)以获取参考。

# python - Django模型字段：在默认关键字上引用self

> ID：13386481
> 
> 赞同：4
> 
> 时间：2012-11-14T20:07:04.953
> 
> 标签：python, django, django-models

我在理解这一点并想出一种方法来引用模型字段的关键字`self`内部时遇到了问题：`default`

这是我所拥有的：

```
class Bank(models.Model):
    number = models.CharField(max_length=10)

class Account(models.Model):
    bank = models.ForeignKey(Bank, related_name="accounts")
    number = models.CharField(max_length=20)
    created = models.DateTimeField(auto_now_add=True)
    creator = models.ForeignKey(User)
    # This is the guy
    special_code = models.CharField(max_length=30, default='%s-%s' % (self.number, self.bank.number)) 
```

所以我试图在类定义中访问 self ，这似乎行不通，因为 python 不知道 self 在哪里，因为它还不是一个对象。

我尝试了不同的方法，例如：

```
special_code = models.CharField(max_length=30, default='%s-%s' % (number, bank.number)) 
```

但在这种情况下，它无法识别`bank.number`，因为 bank 它只是一个带有`models.ForeignKey`.

我也尝试过在`Account`类中使用一种方法：

```
def bank_number(self):
    return self.bank.number 
```

进而：

```
special_code = models.CharField(max_length=30, default='%s-%s' % (number, bank_number())) 
```

这有点愚蠢，因为它仍然需要自我。有没有办法我可以做到这一点？

**我需要它将数字存储在数据库中，因此使用这样的方法将无济于事：**

```
def special_number(self):
    return '%s-%s' % (self.number, self.bank.number) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:24:23.790

我认为在默认的可调用对象中没有任何方法可以访问 self 。还有其他几种设置字段值的方法：

如果您不希望用户能够更改值，请覆盖模型的保存方法并将其设置在那里。

如果默认值只是一个建议，并且您确实希望允许用户更改它，然后覆盖模型表单的`__init__`方法，那么您可以访问 self.instance 并更改设置字段的初始值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T20:25:03.387

您可能希望覆盖该`save()`方法并在将对象存储到数据库中之前填充该字段，而不是为该字段指定默认值。该`save()`方法还可以访问`self`. 这是文档中的一个示例：

[https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T20:31:10.213

正如已经回答的那样，覆盖`save()`模型的方法以将值分配给`special_code`. 字段的`default`选项并不意味着依赖于模型的其他字段，因此这不起作用。

`editable`此外，如果您不想编辑该字段，请查看该选项。

```
special_code = models.CharField(max_length=30, editable=False) 
```

将阻止在您从模型创建的 ModelForms 中呈现该字段。

# javascript - 如何使用 javascript 控制 css 子属性？

> ID：13386489
> 
> 赞同：1
> 
> 时间：2012-11-14T20:07:37.467
> 
> 标签：javascript, jquery, css, hover, setattribute

我熟悉如何在函数中使用 js 设置 css id 的属性：

```
idOfMyCSSElement.setAttribute("style","color: #122362;"); 
```

我想知道如何使用没有自己的 id 的 js 来定位嵌套的 div 或其他元素。

在 css 中，我可以通过指定来定位嵌套的 div：

```
#idOfMyCSSElement div {border: thin solid red;} 
```

因此，如果我可以通过在 js 中执行以下操作来定位所说的 div，那就太好了：

```
idOfMyCSSElement.div.setAttribute("style","color: #122362;"); 
```

但我不知道当时我在做什么。这只是我的疯狂猜测。我相信我应该使用不同的方法。

我还想定位类似 CSS 悬停状态属性的东西：

```
#idOfMyCSSElement:hover {color: yellow;} 
```

有没有办法用 JS 来定位黄色的属性，并在调用 js 函数时让它变成其他颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:11:19.873

你可以像这样用jquery做到这一点：

```
$("#idOfMyCSSElement div").css("color","#122362"); 
```

**编辑：**

您可以模仿悬停伪类，如下所示：

```
 $('.someclass').hover( function(){
      $(this).css('background-color', '#F00');
   },
   function(){
      $(this).css('background-color', '#000');
   }); 
```

**编辑2：** 说你计划改变颜色的元素有类

`htmlElementsToChangeColor`那么您可以执行以下操作来应用更改：

```
$("#myButton").click(function(){
     $(".htmlElementsToChangeColor").css("color","your color code");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:13:07.280

最简单的方法是使用 jQuery。

非 jQuery 方法是使用[.getElementByTagName](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName?redirectlocale=en-US&redirectslug=DOM%3Aelement.getElementsByTagName)。

# java - Tomcat 中的高可用性单例处理器

> ID：13386495
> 
> 赞同：2
> 
> 时间：2012-11-14T20:08:12.600
> 
> 标签：java, high-availability

我有一个针对 RDBMS 的作业处理分析服务，由于需要复杂的缓存和缓存更新逻辑，因此需要在高可用性集群中成为单例。作业以 JMS 消息的形式出现（通过 ActiveMQ）。它是托管在具有 Web 前端的 HA Tomcat 集群中的应用程序的一部分。

问题是，如果正在运行的节点发生故障，服务本身需要能够在几秒钟内恢复。故障可能意味着系统关闭或只是 CPU 速度变慢 - 即如果节点在 CPU 延迟后恢复，但处理已移交，则无法继续。

根据经验，这里最合适的解决方案是什么：

*   在每个作业开始之前基于数据库的锁和锁检查（我无法在这里轻松提出防弹解决方案 - 有什么建议吗？）
*   某种Paxos算法？您是否知道任何用于此目的的苗条框架，因为算法本身需要时间才能正确然后进行 QA？
*   还要别的吗？

我不介意故障恢复是否缓慢，但我想尽量减少每个作业的开销。

一些额外的背景：工作只涉及从数据库中读取数据，使用各种算法对其进行按摩（有点类似于寻找最短路线）并为不同的参与者提供最佳解决方案以继续前进。Actor 与现实世界交互并返回一些反馈，基于这些后续步骤由同一个作业处理器优化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-16T00:53:48.213

### 使用 Hazelcast 的解决方案

Tomasz 作品提出的 Hazelcast 锁定方法。您需要[仔细阅读文档](http://hazelcast.org/docs/latest/manual/html/lock.html)，使用租用时间的锁并确保监控您的单身人士以更新租约。要记住的一件事是，Hazelcast 是为在大型集群中工作而编写的——因此它的启动时间相对较慢，即使对于两个节点也只有 1 到 5 秒。但在那之后，操作非常高效，获得锁需要几毫秒。通常这一切都无关紧要，但故障/恢复周期需要时间，应视为例外情况。

这种解决方案是防弹的。如果集群被拆分（节点之间的网络中断）但每个节点都处于活动状态并且可以访问数据库，则无法确定地知道如何进行。最终，您需要在这里考虑一个应急计划。在现实生活中，这种情况对于典型的故障转移 HA 设置来说是非常不可能的。

归根结底，在采用分布式锁定解决方案之前，请认真考虑使您的进程不那么单一。并行运行某些事情可能仍然很困难，但确保缓存不会过时或找到其他方法来防止数据库损坏可能并不难。在我的例子中，有一个数据库事务计数器像乐观锁一样工作。代码在做出所有决定之前读取它并更新它在存储结果的事务中的数据库和缓存中的位置。如果出现差异，缓存将被清除并重复操作。它使两个节点并行工作变得非常慢，但它可以防止数据损坏。通过使用事务计数器存储额外的数据，您可能能够优化缓存刷新策略并慢慢转向并行处理。

### 结论。

这就是我下次处理此类请求的方式。

1.  尝试让你的单例在不同节点上并行工作
2.  再试一次，也许有办法编排它们
3.  检查是否可以使用 HASingleton 或类似技术来避免样板
4.  如上所述实施 Hazelcast 解决方案

在这里发布代码是没有意义的，因为最耗时的部分是测试和验证所有故障场景和应急计划。几乎没有样板，代码本身总是特定于解决方案的。有可能在几天内提出涵盖所有基础的运行良好的 PoC。

# cakephp - Cakephp contains 和 belongsTo hasMany 条件

> ID：13386500
> 
> 赞同：0
> 
> 时间：2012-11-14T20:08:22.643
> 
> 标签：cakephp, find, belongs-to, contain

来自 CakePHP 手册：

```
 Let's say you had a belongsTo relationship between Posts and Authors. Let's say you wanted to find all the posts that contained a certain keyword ("magic") or were created in the past two weeks, but you want to restrict your search to posts written by Bob:

array (
    "Author.name" => "Bob", 
"OR" => array (
    "Post.title LIKE" => "%magic%",
    "Post.created >" => date('Y-m-d', strtotime("-2 weeks"))
)
) 
```

但是，它对我不起作用。我有 Scrapes 属于 Vargroup，而 Vargroup 有很多 Scrape。我的 scrapes 表有一个字段 vargroup_id

当我做：

```
$this->Vargroup->contain('Scrape');
$this->Vargroup->find('first'); 
```

我得到：

```
Array
(
[Vargroup] => Array
    (
        [id] => 16950
        [item_id] => 1056
        [image] => cn4535d266.jpg
        [price] => 22.95
        [instock] => 1
        [timestamp] => 2012-10-29 11:35:10
    )

[Scrape] => Array
    (
        [0] => Array
            (
                [id] => 18163
                [item_id] => 1056
                [vargroup_id] => 16950
                [timestamp] => 2012-05-23 15:24:31
                [instock] => 1
                [price] => 22.95
            )
    )
) 
```

但是当我这样做时：

```
$this->Vargroup->contain('Scrape');
$this->Vargroup->find('first', array(
'conditions' => array(
    'not' => array(
    array('Scrape.timestamp >' => $today)   
    )
)
)); 
```

我收到以下带有关联的 sql 输出的错误

```
Warning (512): SQL Error: 1054: Unknown column 'Scrape.timestamp' in 'where clause'
Query: SELECT `Vargroup`.`id`, `Vargroup`.`item_id`, `Vargroup`.`image`, `Vargroup`.`price`, `Vargroup`.`instock`, `Vargroup`.`timestamp` FROM `vargroups` AS `Vargroup`   WHERE `Scrape`.`timestamp` = '2012-10-29 
```

它看起来根本不像绑定表格。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:46:24.933

试试这个：

```
 $this->Vargroup->contain('Scrape');
 $this->Vargroup->find('first', array(
   'conditions' => array(
   'not' => array(
      'Scrape.timestamp >' => array($today)   
      )
   )
 )); 
```

我认为 cakephp 页面上的这个例子告诉了做“不”条件的正确方法，检查一下。

```
 array(
     "NOT" => array("Post.title" => array("First post", "Second post", "Third post"))
 ) 
```

如果您有更多问题，这是复杂的查找条件页面。[Cakephp 复杂的查找条件](http://book.cakephp.org/1.3/en/view/1030/Complex-Find-Conditions)

# knockout.js - 未捕获的错误：ko.mapping.updateFromJS，请改用 ko.mapping.fromJS

> ID：13386501
> 
> 赞同：0
> 
> 时间：2012-11-14T20:08:23.233
> 
> 标签：knockout.js, knockout-mapping-plugin

### 问题

我玩过很多关于 knockoutJS 映射插件的事情。

我的问题可以在下面的 jsFiddles 中得到最好的展示。

## [这个](http://jsfiddle.net/BBzVm/)有效。但这[不起作用](http://jsfiddle.net/ucrcG/1/)。

我在控制台中收到错误

> 未捕获的错误：ko.mapping.updateFromJS，请改用 ko.mapping.fromJS。请注意参数的顺序不同！

## 为什么我得到这个错误，小提琴有什么区别？

### 我的代码

```
var viewModel = ko.mapping.fromJS({
    "State" : 1,
    "Text" : "Hello"
});

$("button").click(function() 
{
    var response = {
        "State" : 2,
        "Text" : "World"
    }

    ko.mapping.updateFromJS(viewModel, response);
});

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:22:46.790

您正在**使用不同版本的 ko 映射**插件：

在你的工作小提琴中：`http://wiredwestwebdesign.com/knockout.mapping.js`

在你不工作的小提琴中：`https://raw.github.com/SteveSanderson/knockout.mapping/master/build/output/knockout.mapping-latest.js`

`ko.mapping.updateFromJS`大约一年前，在这个变更集中，有问题的方法已被弃用：[删除 updateFromJS* 调用的第一部分](https://github.com/SteveSanderson/knockout.mapping/commit/bff3c1864a5fd45289933b35de1ef70af4aed6b5)。

以及如何解决此错误：

只做异常所说的：使用`ko.mapping.fromJS`并注意参数顺序：

```
ko.mapping.fromJS(response, viewModel); 
```

[演示小提琴。](http://jsfiddle.net/nemesv/ucrcG/2/)

# objective-c - 强制退出iOS应用程序时未调用applicationWillTerminate

> ID：13386505
> 
> 赞同：3
> 
> 时间：2012-11-14T20:08:45.683
> 
> 标签：objective-c, ios, xcode

是否有人对在 iOS 5/6 中何时/在什么条件下调用 applicationWillTerminate 有任何见解？

我有一些逻辑我想在应用程序终止时执行（不移动到后台），例如，如果用户通过双击主页按钮导航到屏幕底部的应用程序栏并强制退出应用程序。

当我尝试在测试设备上执行此操作时，似乎没有调用 applicationWillTerminate。是否有一个原因？

我的计划 B 是将该逻辑与一些持久对象联系起来，例如单例或应用程序退出时自动销毁的静态对象。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T20:13:17.003

您是否阅读过[applicationWillTerminate:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillTerminate%3a)的文档，

它说，

*对于不支持后台执行或链接到 iOS 3.x 或更早版本的应用程序，当用户退出应用程序时始终调用此方法。对于支持后台执行的应用程序，当用户退出应用程序时通常不会调用此方法，因为在这种情况下应用程序只是移动到后台。但是，在应用程序在后台运行（未挂起）并且系统出于某种原因需要终止它的情况下，**可能会调用此方法。***

那里提到了一个“也许”。可能这回答了你的问题。因此，当您退出应用程序时，没有必要调用它。可能您可能不得不使用`UIApplicationExitsOnSuspend`禁用多任务处理，然后在进入后台时可能会调用它。但这又取决于您的应用程序要求。如果您无法禁用多任务处理，您可能已经考虑在`applicationDidEnterBackground`方法中这样做。我不确定是否有任何其他委托方法可以帮助识别强制退出。

# java - 在 JFrame 中使用 JPanel 无法正确调整大小或移动

> ID：13386508
> 
> 赞同：1
> 
> 时间：2012-11-14T20:09:02.640
> 
> 标签：java, swing, jframe, jpanel, sizing

感谢您花时间阅读本文。我希望它不会令人困惑，如果需要任何其他信息，请告诉我！

问题：我正在制作一个类似蛇的游戏，我创建了一个 JFrame，然后添加了 JPanel。好吧，如果我不在 JFrame 中设置它的大小，它将大小约为 100 x 20。当我设置它的大小时，它保持在设置的尺寸。但是，如果我 pack() 它，当我在 JPanel 中定义大小时，它会缩小到 100 x 20 左右。我也设定了界限，没有运气。我使用 FlowLayout() 和 BorderLayout() 也没有成功。现在我的游戏运行正常，没有任何问题，除了框架。它会切断两侧，除非我做一些我不想做的体操。

目标：我希望能够将帧大小正确地设置为我指定的宽度和高度，并让面板向下移动一点以增加游戏文本的空间，这样它就不会阻塞任何东西。

基本上我很困惑和慌乱，我花了几天时间，到目前为止我还没有成功。

JFrame 类：

```
public class main extends JFrame {

 /**
  * @param args the command line arguments
  */

 public main(){
     Board game = new Board();

     setLayout(new BorderLayout(0, 50));
     setSize(game.getGameWidth(), game.getGameHeight());
     setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     setLocationRelativeTo(null);
     setTitle("BlockRunner");
     getContentPane().add(game);

     setResizable(false);
     setVisible(true);
 }
} 
```

我的董事会课程：

```
public class Board extends JPanel implements ActionListener, KeyListener{
 private int width = 600;
 private int height = 400;
 Board(){
     addKeyListener(this);
     setFocusable(true);
     setBackground(Color.LIGHT_GRAY);
     setSize(width, height);
     InitGame();
 }
} 
```

我愿意尝试任何人愿意为我提供的任何东西。感谢您的时间！

编辑 1：（由于用户的回答。）使用 setPerferredSize()、setMinmumSize() 和 setMaximumSize() 不会影响结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T21:12:46.560

您需要使用`getPreferred/Minimum/MaximumSize`真正尊重它的组合和布局。

在这里，我使用了一个`GridBagLayout`设置，以便电路板始终保持相同的大小，但单元格将使用最大数量的相同。

如果您想将文本保留在板的底部（而不是框架），请删除`weighty`约束（可能还有`weightx`）

![在此处输入图像描述](../Images/a1fcafc4b25a93f1267659c2dcb83f46.png)![在此处输入图像描述](../Images/5efd67005eb490ef92948aa5e2463261.png)

```
public class TestBoardGame {

    public static void main(String[] args) {
        new TestBoardGame();
    }

    public TestBoardGame() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridx = 0;
                gbc.gridy = 0;
                gbc.weightx = 1;
                gbc.weighty = 1;
                frame.add(new BoardGamePane(), gbc);

                gbc.gridx = 0;
                gbc.gridy = 1;
                gbc.weightx = 1;
                gbc.fill= GridBagConstraints.HORIZONTAL;
                JLabel text = new JLabel("Area for text");
                text.setHorizontalAlignment(JLabel.CENTER);
                frame.add(text, gbc);

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class BoardGamePane extends JPanel {

        public BoardGamePane() {

            setBorder(new LineBorder(Color.RED));
            setBackground(Color.ORANGE);

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 300);
        }

        @Override
        public Dimension getMinimumSize() {
            return getPreferredSize();
        }

        @Override
        public Dimension getMaximumSize() {
            return getPreferredSize();
        }

    }    
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T20:46:36.830

假设它`Board`主要用于绘图，您可以覆盖`getPreferredSize()`以返回合适的`Dimension`. 当你`pack()`封闭`Window`时，它将采用选择的大小。有关更多信息，请参阅此[问答](https://stackoverflow.com/q/7229226/230513)，并避免此[陷阱](https://stackoverflow.com/a/12532237/230513)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:43:59.193

我知道你说使用`setPreferredSize()`不会影响结果，但我和另外两个人似乎认为应该解决它。您可以尝试以下方法：

在主要改变这个：

```
setSize(game.getGameWidth(), game.getGameHeight()); 
```

到：

```
setPreferredSize(new Dimension(game.getGameWidth(), game.getGameHeight())); 
```

然后添加`pack()`，看看结果有没有变化。从理论上讲，这应该可以解决问题，除非发生了我们看不到的其他事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T20:55:50.813

我使用 swing 的首选方式是让内部组件设置它们的首选大小，并使用 JFrame 包。

所以总的来说，你需要：

*   删除 JFrame 中的 setSize（或更改为 setPreferredSize）
*   将 JPanel 中的 setSize 更改为 setPreferredSize。
*   一切完成后在 JFrame 中调用 pack。

看看下面的代码是否符合您的要求。

```
public class Main extends JFrame {

    public Main() {
        Board game = new Board();

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        {
            Container contentPane = getContentPane();
            contentPane.setLayout(new BorderLayout(0, 50));
            JLabel label = new JLabel("hello world!");
            contentPane.add(label, BorderLayout.NORTH);
            contentPane.add(game, BorderLayout.CENTER);
        }
        pack();

        setResizable(false);
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new Main();
            }
        });
    }
} 
```

和

```
public class Board extends JPanel {
    private int width = 600;
    private int height = 400;

    Board() {
        setFocusable(true);
        setBackground(Color.LIGHT_GRAY);
        setPreferredSize(new Dimension(width, height));
    }

} 
```

# cakephp - 第一次“查找”调用不返回相关数据。第二个“查找”电话确实

> ID：13386509
> 
> 赞同：2
> 
> 时间：2012-11-14T20:09:05.617
> 
> 标签：cakephp, model, cakephp-2.1

在模型“GradingPeriod”中声明了以下内容：

```
class GradingPeriod extends AppModel {

   public $belongsTo = array('AcademicYear' => array('className' => 'AcademicYear', 'foreignKey' => 'academic_year_id'));

   ...

   public function getEnrolledSections(){

      $this->recursive = 1;

      debug($this->findById(21)); // Does **not** return AcademicYear
                                  // model data when function is called 
                                  // from a different model.

      debug($this->findById(21)); // **Does** return AcademicYear
                                  // model data when function is called  
                                  // from a different model.

      die();
   }
} 
```

当从控制器或 GradingPeriod 模型内部调用时，这可以正常工作。第一个“查找”调用**确实**返回了 GradingPeriod 模型的关联数据 (AcademicYear)。

从**不同的模型**调用时，第一个“查找”调用**不会**返回 GradingPeriod 模型的关联数据 (AcademicYear)。第二个“查找”调用**确实**返回了 GradingPeriod 模型的关联数据 (AcademicYear)。

```
class ReportCard extends AppModel {

   public function callToGradingPeriod(){

      $objGradingPeriod = ClassRegistry::init('GradingPeriod');

      $objGradingPeriod->getEnrolledSections();

   }

} 
```

我已经用 CakePHP 2.1.2 和 2.2.3 尝试过，结果相同。

我知道从另一个模型调用一个模型可能被认为是不好的形式，但是为什么这段代码会表现得如此呢？提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:57:32.107

就它为什么工作（或不工作）的方式而言，这并不是一个真正的答案，而是对您和任何未来尝试类似事情的用户的建议：

永远不要`recursive`用来获取相关数据。设置`public $recursive = -1;`在您的 AppModel 中，永不回头。当您需要相关数据时，请使用[CakePHP 的 Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。

递归似乎是你的朋友——或者它“更容易”，但我保证它会在未来引发问题——无论是当你想要更多数据时，还是当你在数据库中获得更多数据时（内存问题/除其他外的错误）。这是不好的做法，我相信他们甚至会在 CakePHP 3+ 中一起删除递归。

相信我这一点 - 抛弃递归，并`contain()`改用。

# google-drive-api - Google Drive API - 端口号？

> ID：13386515
> 
> 赞同：2
> 
> 时间：2012-11-14T20:09:45.787
> 
> 标签：google-drive-api

有没有办法为 API 访问的重定向 URI 指定端口号，特别是 Google Drive？例如，我可以输入，`https://localhost:8443/some-servlet`但不能`https://my-server:8443/some-servlet`。这是不允许的原因吗？另外，有解决办法吗？TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:32:59.977

您必须为您的 URL 指定一个有效的域。两者`https://localhost:8443/some-servlet`和`https://www.example.com:8443/some-servlet`都被接受，所以也许你应该使用`https://my-server.mydomain.com:8443/some-servlet`.

# android - 当用户单击其图标时，Android 应用程序会重新启动

> ID：13386518
> 
> 赞同：2
> 
> 时间：2012-11-14T20:09:48.783
> 
> 标签：android

据我所知，默认情况下，当用户单击其图标时，android 应用程序会恢复。

但是由于某种原因，我的应用程序（我希望具有相同的行为）重新启动。

当我按住主页按钮然后从“最近”中选择我的应用程序时，我会恢复它。我希望在单击应用程序图标时具有相同的行为。

[实际上它与https://groups.google.com/forum/?fromgroups=#!topic/android-developers/UjWcsFMe6ik](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/UjWcsFMe6ik)相同， 但他们没有找到答案

更新：清单：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk a:minSdkVersion="10" a:targetSdkVersion="11"/>

<uses-permission a:name="android.permission.INTERNET"/>
<uses-permission a:name="android.permission.ACCESS_FINE_LOCATION"/>

<application a:label="@string/app_name"
             a:theme="@android:style/Theme.NoTitleBar"
             a:name="myapp.AppDelegate">

    <activity a:name="myapp.activities.AuthorizationActivity"
              a:label="@string/app_name"
              a:screenOrientation="portrait"
              a:alwaysRetainTaskState="true">
        <intent-filter>
            <action a:name="android.intent.action.MAIN"/>
            <category a:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

    <activity a:name="myapp.activities.activity1"
              a:screenOrientation="portrait"/>

    <activity a:name="myapp.activities.activity2"
              a:screenOrientation="portrait"/>
    ...

    <activity a:name="myapp.activities.activityN"
              a:screenOrientation="portrait"/>

    <service a:name="myapp.location.LocationService"/>

</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:10:50.083

这都是关于 IDE 的。关闭由 IDE（eclipse 或 IDEA - 无关紧要）启动的应用程序后，Android 会删除所有临时数据（不要问我为什么）

所以解决方案是：

```
1) run app from ide (deploy it on device)
2) press back button to close an app
3) start an app again
...
and now it will resume working after quitting 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:17:31.507

检查您的活动的启动模式。如果它的 singleTask 则使其成为标准然后检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:20:31.193

单击应用程序图标会将包含主要活动的任务带到前面。

要获得所需的行为，请确保您的所有活动都属于同一任务，即不要在任何活动上使用 singleTask 或 singleInstance。

# c# - If 语句中的 ASP.Net 中继器评估

> ID：13386519
> 
> 赞同：3
> 
> 时间：2012-11-14T20:09:52.930
> 
> 标签：c#, asp.net

所以我一直在寻找这个问题的好答案，但还没有真正找到任何有用的东西。希望有人可以为我阐明这一点。

基本上，我有一个由数据库表支持的转发器。在此转发器的 ItemTemplate 中，我有一些 HTML 元素，其中填充了列表中每个项目的属性。很标准的东西。但是，其中一项可能为空。`if (blah != null)`在这种情况下，对我来说，在有问题的代码周围加上某种逻辑是有意义的。唯一的问题是，当我尝试这样做时，ASP 突然出现在我身上，告诉我不能在`<%# %>`.

我对大众的问题是：如果你不能在里面使用 if 语句`<%# %>`，那么你应该如何根据每个项目的值来做条件逻辑？

我知道您可以在中继器中调用自己的方法，但这不适用于我正在尝试做的事情。

以下是我要完成的工作，以更好地说明我的观点。

```
<asp:Repeater runat="server" ID="repeater">
    <ItemTemplate>
        <div class="item-wrap">
            <% if(Eval("imageUrl") != null) { %>
            <div class="plan-img">
                <asp:Image runat="server" ImageUrl='<%# Eval("imageUrl") %>'/>
            </div>
            <% } %>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T20:15:34.620

在你里面`ItemTemplate`写这样的标记：

```
<asp:Panel runat="server" Visible='<%# Eval("imageUrl") != null %>'>
    <asp:Image runat="server" ImageUrl='<%# Eval("imageUrl") %>'/>
</asp:Panel> 
```

基本上你不能将代码`<%`与数据绑定结构混合`<%#`。

我的建议是在您的 CodeBehind 中添加以下属性：

```
 protected YourClass DataItem
    {
        get
        {
            return (YourClass)this.Page.GetDataItem();
        }
    } 
```

然后在没有的情况下编写标记`Eval()`：

```
 <asp:Image runat="server" ImageUrl='<%# DataItem.imageUrl %>'/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:14:53.327

您应该为模板中的每个项目生成相同的内容。如果您不需要将它用于特定项目，只需在绑定事件中将其可见性设置为 false。

# git - 如何将文件输出设置到服务器上的目录以用于远程 git 裸存储库？

> ID：13386522
> 
> 赞同：1
> 
> 时间：2012-11-14T20:09:58.843
> 
> 标签：git

我已经在服务器上安装了 git。项目目录（www/beta/httpdocs）中已经有很多文件。我想设置一个远程裸存储库，我和一些人可以推送到该存储库。

我们希望将该 repo 连接到 wwwroot 中的目录，这样当有人将他们的文件推送到 repo 时，这些文件会自动复制到我们的 beta 域 (beta.server.com) 的 wwwroot 中，我们可以在其中测试错误。当我们对质量感到满意时，我会手动将文件复制到主域（在同一台服务器上，只是在另一个目录中），或者如果我找到另一种更深刻的方式。

我以某种方式将服务器上这些已经存在的文件添加到裸存储库中，这一点非常重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:13:11.047

首先，添加当前文件，`git init`然后设置要推送到的远程分支。然后在您的服务器上设置一个 post-receive 挂钩，该挂钩运行部署到您的服务，基本上触发一个`git pull`

# security - 如何使用 Krb5LoginModule 并在 unix 中给它一个用户/通行证

> ID：13386528
> 
> 赞同：0
> 
> 时间：2012-11-14T20:10:27.997
> 
> 标签：security, kerberos, jaas

我需要在 unix 机器上使用 kerberos 登录才能使用 windows 网络调用 URL。我可以在 Windows 中使用 useTicketCache=true 并且一切正常。如何从 unix 框中执行此操作，然后将用户/传递给我的 java 程序而不是使用票证缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:29:36.667

这不是你应该走的路。人自己应该在 Windows 登录时获得 TGT。您访问 TGT，然后从 KDC 获得服务票证。如果您的 unix 设置不使用 winbind 执行身份验证，因此您无权访问预填充的凭据缓存，您有三个选项：

1.  在 AD 中使用 winbind 管理您的 unix 用户
2.  执行一个unix`kinit`
3.  将 a`Username`和/或传递`PasswordCallback`给`new LoginContext`.

我倾向于1或2。

选项二在 Java 中的工作方式如下：

```
Runtime.exec("kinit " + upn);
// Obtain the input stream of the forked process
is.write(password);
// Check exit code 
```

现在，您的凭证缓存中有一个本机有效的 TGT。Java 现在可以选择它并请求进一步的服务票证。

# ruby-on-rails - auto_html gem 做错了什么？

> ID：13386531
> 
> 赞同：0
> 
> 时间：2012-11-14T20:10:36.740
> 
> 标签：ruby-on-rails, gem

我正在尝试使用 auto_html gem 将提交的 youtube 链接转换为嵌入链接。我没有收到来自 auto_html 的任何回复。我确定我错过了一些简单的事情吗？

在我的 Gemfile 中：

```
gem "auto_html" 
```

我在链接模型中添加了 :video_html 列。（这里是迁移文件）

```
class AddVideoHtmlToLink < ActiveRecord::Migration
  def change
add_column :links, :url_html, :string
  end
end 
```

我的 scheema.rb 看起来像这样：

```
 create_table "links", :force => true do |t|
t.integer  "user_id"
t.string   "url"
t.string   "title"
t.datetime "created_at", :null => false
t.datetime "updated_at", :null => false
t.string   "url_html" 
```

结尾

我的 link.rb 模型如下所示：

```
class Link < ActiveRecord::Base
  belongs_to :user
  belongs_to :admin
  has_many   :comments
  has_many   :votes

  validates :title, :url, :presence => true

  attr_accessible :title, :body, :url, :user_id, :url_html

  auto_html_for :url do
    html_escape
    image
    youtube(:width => 400, :height => 250)
    vimeo(:width => 400, :height => 250)
    link :target => "_blank", :rel => "nofollow"
    simple_format
  end
end 
```

在我的 index.html.haml 视图中，我有：

```
%p
  = link_to link.title, link.url_html, :class => "youtube title_link" 
```

现在，当我通过控制台提交时：

```
Link.create(:title => 'test', :url => 'http://www.youtube.com/watch?v=a2LFVWBmoiw') 
```

我只是得到这个返回，我没有得到 :url 转换为嵌入代码，如 github 页面上的示例（https://github.com/dejan/auto_html）

知道我错过了什么吗？非常感谢任何正确方向的帮助或指示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:45:06.393

您将 video_html 作为参数传递，您应该传递*video*。在控制台中试试这个：

```
Link.create(:title => 'test', :url => 'http://example.com', :video => 'http://www.youtube.com/watch?v=a2LFVWBmoiw') 
```

# deployment - 将应用程序部署到 cloudControl 时如何运行脚本？

> ID：13386532
> 
> 赞同：-2
> 
> 时间：2012-11-14T20:10:40.880
> 
> 标签：deployment, cloud, cloudcontrol

[在cloudControl](https://www.cloudcontrol.com/)上部署 PHP 应用程序时，我想运行一些[Phing](http://www.phing.info/)任务。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:21:23.860

抱歉，您目前不能，但自定义 buildpack 支持即将推出。

# hadoop - Hadoop map/reduce 排序

> ID：13386534
> 
> 赞同：1
> 
> 时间：2012-11-14T20:10:42.843
> 
> 标签：hadoop

我有一个 map-reduce 工作，我只使用映射器，因为每个映射器的输出肯定会有一个唯一的键。我的问题是，当这项工作运行时，我得到输出文件，例如 part-m-00000、part-m-00001 ......它们会按键的顺序排序吗？

或者我是否需要实现一个减速器，它什么都不做，只是将它们写入像 part-r-00000、part-r-000001 这样的文件。这些是否保证输出按键的顺序排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:10:11.033

如果你想保证排序，你可以简单地使用一个`IdentityReducer`.

如果你想让它更可并行化，你可以指定更多的 reducer，但是默认情况下输出只会在文件内排序，而不是跨文件排序。即，每个文件都会被排序，但是part-r-00000 不一定会在part-r-00001 之前。如果您确实希望跨文件对其进行排序，则可以使用基于排序顺序进行分区的自定义分区器。IE，reducer 0 获取所有最低键，然后 reducer 1，...，reducer N 获取所有最高键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:46:38.247

如果要对文件内的键进行排序，并确保在 i 小于 j 时文件中的键小于文件 j 中的键，则不仅需要使用 reducer，还需要使用 partitioner。您可能需要考虑使用 Pig 之类的东西来执行此操作，因为这将是微不足道的。如果你想用 MR 来做，使用排序字段作为你的键并编写一个分区器以确保你的键最终在正确的 reducer 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:47:31.937

当您的 map 函数输出键时，它会转到[执行 sort 的分区函数](http://research.google.com/archive/mapreduce.html)。因此，默认情况下，键将按排序顺序排列，您可以使用身份归约器。

# validation - 根据 Symfony 2 中的 fieldA 或 fieldB 验证表单 fieldA

> ID：13386539
> 
> 赞同：1
> 
> 时间：2012-11-14T20:11:07.867
> 
> 标签：validation, symfony

我是一个 Symfony 菜鸟，试图想象如何最好地基于它或不同的字段来验证表单字段，但没有成功。案例：表格将要求提供出生日期或年龄。如果输入了 dob，则忽略年龄。如果输入年龄并且 dob 为空，则表示 dob 是今天的日期减去年龄的年数。如果两者都没有输入，则会引发验证错误。我已经通过 Smarty 验证实现了这一点；作为一项学习练习，我试图在 Symfony 中重现该应用程序。

我看过[这个解决方案](https://stackoverflow.com/questions/12260705/validate-a-property-dependent-on-another-property-symfony-2 "这个解决方案")，其中两个字段都是实体的属性。在我的情况下，年龄不是，只有 dob。所以我不清楚如何应用该解决方案。我非常感谢指点。

谢谢。

George PS：（已编辑：dreck 已删除） PPS：（已编辑：已删除以为几乎可以工作的版本腾出空间）表格：

```
// src\Mana\AdminBundle\Resources\views\Form\Type\NewClientType.php
namespace Mana\AdminBundle\Form\Type;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Mana\AdminBundle\Validator\Constraints;

class NewClientType extends AbstractType {

    public function setDefaultOptions(OptionsResolverInterface $resolver) {
        $resolver->setDefaults(array('validation_groups' => 'client_new', 
            'validation_constraint' => new DOBorAge(),
            ));
     }

    public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder->add('fname', null, array('required' => false));
        $builder->add('sname', null, array('required' => false));
        $builder->add('dob', 'birthday', array('widget' => 'single_text', 'required' => false));
        $builder->add('age', null, array('mapped' => false, 'required' => false));
    }

    public function getName() {
        return 'client_new';
    }
} 
```

服务：

```
services:
  client_new:
    class: Mana\AdminBundle\Validator\Constraints\DOBorAgeValidator
    scope: request
    tags:
      - { name: validator.constraint_validator, alias: dobage_validator} 
```

验证器：

```
// src\Mana\AdminBundle\Form\Type\DOBorAge.php
namespace Mana\AdminBundle\Form\Type;
use Mana\AdminBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;

class DOBorAge extends Constraint {

    public $message = 'Either a date of birth or age must be present';

    public function validatedBy() {
        return 'dobage_validator';
    }

    public function getTargets() {
        return Constraint::CLASS_CONSTRAINT;
    }

} 
```

和

```
// src\Mana\AdminBundle\Validator\Constraints\DOBorAgeValidator.php
namespace Mana\AdminBundle\Validator\Constraints;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class DOBorAgeValidator extends ConstraintValidator {

    protected $request;

    public function __construct(Request $request) {
        $this->request = $request;
    }

    public function validate($value, Constraint $constraint) {
        var_dump($this->request->request->get('client'));
        die();
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:25:15.740

我认为管理这种验证的最佳方法是向您的表单添加[自定义验证约束。](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)

只需添加一个扩展`Symfony\Component\Validator\Constraint`并覆盖该`validatedBy()`方法的类。然后，您可以指定您要创建的自定义验证器，以便它包含表单验证的所有逻辑。

这个定制的验证器应该扩展`Symfony\Component\Validator\ConstraintValidator`类并实现`isValid()`Symfony 2.0.x 的方法或`validate()`Symfony 2.1.x的方法。

然后，您可以检查您的值，比较它们并在此方法中执行您想要的任何操作，如果您的一个或多个验证规则未得到遵守，则最终添加违规。

还要检查[基于两个字段的 Symfony2 验证](https://stackoverflow.com/questions/8170301/symfony2-form-validation-based-on-two-fields)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:44:28.887

一个 Symfony 式的解决方案：一个单一的表单字段，它可以输入日期或年龄，然后将条目转换为日期。（现在，如果我只能把它变成一个自定义字段......）

```
namespace Mana\AdminBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Mana\AdminBundle\Form\DataTransformer\AgeToDOB;

class NewClientType extends AbstractType {

    public function buildForm(FormBuilderInterface $builder, array $options) {

        $transformer = new AgeToDOB();

        $builder->add('fname', null, array('required' => false, 
            'invalid_message' => 'First name not be blank',));
        $builder->add('sname', null, array('required' => false,
            'invalid_message' => 'Last name not be blank',));
        $builder->add(
                $builder->create('dob', 'text', array('required' => false,
            ))->addModelTransformer($transformer));
    }

    public function getName() {
        return 'client_new';
    }
} 
```

和变压器：

```
namespace Mana\AdminBundle\Form\DataTransformer;

use Symfony\Component\Form\DataTransformerInterface;
use Symfony\Component\Form\Exception\TransformationFailedException;
use Mana\AdminBundle\Entity\Client;

class AgeToDOB implements DataTransformerInterface {

    public function reverseTransform($dob) {

        if (null == $dob) {
            return '';
        }
        if ((substr_count($dob, '/') == 2 && strtotime($dob))) {
            $date = new \DateTime($dob);
            return date_format($date, 'Y-m-d');
        }
        if (is_numeric($dob)) {
            $date = new \DateTime();
            $interval = 'P' . $dob . 'Y';
            $date->sub(new \DateInterval($interval));
            return date_format($date, 'Y-m-d');
        }
    }

    public function transform($client) {
        if (null == $client) {
            return '';
        }
        if (is_object($client)) {
            $dob = $client->getDob();
            // date: test for two / characters
            if ((substr_count($dob, '/') == 2 && strtotime($dob))) {
                $date = new \DateTime($dob);
                return date_format($date, 'm/d/Y');
            }
            if (is_numeric($dob)) {
                $date = new \DateTime();
                $interval = 'P' . $dob . 'Y';
                $date->sub(new \DateInterval($interval));
                return date_format($date, 'm/d/Y');
            }
        }
    }

} 
```

# php - 为什么当标头有“\n”字符而不是“\r”字符时我的服务器会阻塞？

> ID：13386542
> 
> 赞同：1
> 
> 时间：2012-11-14T20:11:13.040
> 
> 标签：php, http-headers

我刚刚完成了一个项目的问题调试，每当 Drupal 尝试发送要下载的文件时，HTTP 500 就会上升。结果服务器认为 Content-Disposition 标头不好，因为文件名属性按照 RFC 2047 指定的方式编码，但它只是没有 \n。所以我用 r 替换了 n ，现在服务器非常高兴。

所以我想知道这个服务器是否对待 \n 与 \r 不同，以及我将来如何判断和/或为什么 \r 会工作而 \n 不会？

**编辑：**脚本发送的标头：

```
X-Powered-By: PHP/5.3.17
Expires: Sun, 19 Nov 1978 05:00:00 GMT
Last-Modified: Wed, 14 Nov 2012 20:43:20 +0000
ETag: "1352925800"
Content-Length: 1302854
Content-Disposition: attachment; filename="=?UTF-8?B?UHJvUXVhbGl0ZSBNYW51ZWwgZGVzIHByb2dyYW1tZXMgcHLDqWFsYWJsZXMgMjA=?=
 =?UTF-8?B?MTAgYXZlYyBhbm5leGVzXzBfMC5wZGY=?="
Cache-Control: private
Content-type: application/pdf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:20:38.853

我在这里假设您正在谈论线路终止。

根据[RFC2616](https://www.rfc-editor.org/rfc/rfc2616) HTTP 标头应以 '\r\n' 字符串 (CRLF) 结尾：

> HTTP/1.1 将序列 CR LF 定义为除实体主体之外的所有协议元素的行尾标记

...

```
generic-message = start-line
                  *(message-header CRLF)
                  CRLF
                  [ message-body ]
start-line      = Request-Line | Status-Line 
```

这就是应该终止 HTTP 标头行的内容。如果您不遵循规范，服务器可能会窒息或做其他感觉喜欢做的事情，因此与服务器无关，您应该这样做。

# jquery - Jquery即兴按钮标签本地化

> ID：13386546
> 
> 赞同：0
> 
> 时间：2012-11-14T20:11:22.850
> 
> 标签：jquery

是否可以为即兴本地化按钮标签？例如，下一个片段的“取消”标签。

```
$.prompt('Example 2',{ buttons: { Ok: true, Cancel: false } }); 
```

# html - 准备好 shell 输出 HTML

> ID：13386548
> 
> 赞同：1
> 
> 时间：2012-11-14T20:11:28.103
> 
> 标签：html, bash, shell, tr

我使用一个系统，我们可以在其中使用 shell 脚本为 Web 界面生成输出。它工作得很好，但是在今天出现问题的情况下，我需要能够在换行符通常会出现的地方插入一个中断标签。我的脚本如下所示：

```
#!/bin/bash
users=`decl . -read /Groups/admin | grep GroupMembers | tr ' ' '\n'`
echo "<result>"$users"</result>" 
```

我正在寻找一种方法`\n`来成为 a `<br />`，仅在命令中替换它是行不通的。该脚本有效，这意味着它有效地抓取数据并将其显示在我们的 Web 界面中，但用户都在一条线上，这不是预期的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:16:16.703

`tr`仅用单个字符替换单个字符（如果使用，则不替换`-d`）。要将单个字符替换为多个字符，您需要使用其他内容。

与您当前代码最相似的选项是使用`sed`，而不是`tr`：

```
#!/bin/bash
users=`decl . -read /Groups/admin | grep GroupMembers | sed 's# #<br />#g'`
echo "<result>"$users"</result>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:16:43.223

包括在您的命令`$users`的引号中。`echo`即将你的脚本更新为：

```
#!/bin/bash
users=`decl . -read /Groups/admin | grep GroupMembers | tr ' ' '\n'`
echo "<result>$users</result>" 
```

这应该可以解决“*用户都在一条线上*”的问题

# html - 奇怪的“粘页脚”问题（滚动条和 div 重叠）

> ID：13386549
> 
> 赞同：-1
> 
> 时间：2012-11-14T20:11:33.153
> 
> 标签：html, css

根据[这篇文章](http://www.cssstickyfooter.com/using-sticky-footer-code.html)，我想在我的项目上制作粘性页脚。请看一下[这个链接。](http://www.alfaicra.az/)

我不明白为什么我会得到垂直滚动条，为什么`#page`div 会下降`#footer`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:32:54.407

您的页脚顶部有 1px 边框；你的容器有一个 1px 的边框；你的导航有一个margin-top ...所有这些都会影响垂直高度，所以整体高度被推到100％以上=>垂直滚动条。

当您将填充/边距设置为偏移额外像素时，您需要考虑这一点。此外，您还提供了页脚元素填充/边距。您应该做的是使用页脚元素作为包装器，然后在其中创建一个具有适当填充/边距的元素。

以下是如何使它工作...

1 将`#nav`样式更改为填充：`padding: 10px 0 0 0;`

2摆脱你的1px边框`#container`

3 把你的页脚改成这个...

```
<div id="footer">
  <div id="footer-content">
    © 2012 Code Arts
  </div>
</div> 
```

4将您的页脚CSS更改为：

```
#footer {
  border-top: 1px solid #C9E0ED;
  height: 53px; /* 20px padding-top + 20px padding-bottom + 13px line-height */
  margin-top: -54px; /* height + 1px border-top */
  position: relative;
  clear: both;
}
#footer-content {
  font-size: 13px;
  line-height: 13px;
  text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:30:43.740

尝试这个：

```
z-index: 2; 
```

...在#footer 上。

另外，margin-top:-32767px 到底是什么？应该做的！？

# modx - ModX Revolution MIGX/GetImageList 不显示整个列表

> ID：13386552
> 
> 赞同：0
> 
> 时间：2012-11-14T20:11:34.043
> 
> 标签：modx, modx-revolution

我有一个建立并移交给我的网站，所以我对 ModX 的熟悉程度不如我想的那样。也就是说，我已经构建了自己的模板、tpls 等。

然而，现有的使用模板的 MIGX 让我很适合。它用于正确显示列表中的所有项目 - 一个图像和三个文本字段。现在，它会随机停止显示一项。

当我说随机时，我并不是说它会在您刷新页面时切换 - 我的意思是现在项目 #4 没有显示（即使在源代码中，也没有出现任何内容）。但如果我要删除任何其他项目，#4 可能会再次出现，并且另一个项目开始消失。

我在这里不知所措。我在文本字段中看不到特殊字符。即使有，也不能解释一个项目将如何工作然后不工作然后根据对其他项目的更改再次工作。

请让我知道我可以提供哪些其他信息来帮助解决此问题。

以下是我能想到的所有相关代码。

模板：

```
<div id="content">   
        [[!getImageList? 
        &tvname=`management` 
        &docid=`[[*id]]` 
        &tpl=`management_tpl` 
        &limit=`0`
    ]]
        <div class="clear"></div>
    </div><!-- #content --> 
```

管理_tpl：

```
 <div class="management_box">
  <div class="management_img">
    <img  src="[[+image:phpthumbof=`w=100&z=1`]]" alt="[[+pagetitle]]" />
  </div>
    <div class="management_content">
      <h2>[[+name]]</h2>
      <h3>[[+position]]</h3>
      [[+descr]]
      <a href="#[[+name:stripString=` `]]" class="show_more">Show more</a>
    </div>
    <div id="[[+name:stripString=` `]]" class="fulldescr">
    <img  src="[[+image:phpthumbof=`w=100&z=1`]]" alt="[[+pagetitle]]" />
    <h2>[[+name]]</h2>
    <h3>[[+position]]</h3>
    [[+fulldescr]]
    </div>
    <div class="clear"></div>
</div> 
```

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:24:25.260

对于将来发现此问题的任何人-我的 MIGX 插件已过时并且存在一些导致此问题的缺陷。更新插件修复了一切。

# c++ - glibc 在转换类型 C++ 后检测到 free() 无效的下一个大小（快速）

> ID：13386553
> 
> 赞同：0
> 
> 时间：2012-11-14T20:11:43.927
> 
> 标签：c++, c, type-conversion

我尝试将**unsigned char***转换为**字符串**，但问题是我从控制台收到此错误：

> 检测到 glibc ** free(): 无效的下一个大小 (快速): 0x097a1060

最小化代码：

```
unsigned char * base64= NULL;
base64 = (unsigned char *)"test";
std::string str((const char *)base64, strlen((const char*)base64)) ;
std::cout<<str; 
```

PS：我有一个返回 unsigned char* 的函数

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:22:27.600

我最好的猜测是你正试图释放这个指针。

```
base64 = (unsigned char*)"test"; 
```

是对常量的引用。这是我的最小示例：

```
#include <string>
#include <cstring>
#include <iostream>
#include <cstdlib>

int main(int argc, char **argv)
{
        unsigned char * base64= NULL;
        base64 = (unsigned char *)"test";
        std::string str((const char *)base64, strlen((const char*)base64)) ;
        std::cout<<str<<std::endl;

        free(base64);

        return 0;
} 
```

这会引发 glibc 错误和核心转储，这是应该的！没有 free()，一切正常。

# nlp - 这种神经网络模型存在吗？

> ID：13386554
> 
> 赞同：5
> 
> 时间：2012-11-14T20:11:44.737
> 
> 标签：nlp, artificial-intelligence, neural-network

我正在寻找具有特定特征的神经网络模型。这个模型可能不存在...

我需要一个不像传统人工神经网络那样使用“层”的网络。相反，我想要 [我认为是] 一个更具生物学意义的模型。

该模型将容纳一大群相互连接的神经元，如下图所示。一些神经元（在图的底部）将接收输入信号，级联效应将导致连续的、连接的神经元可能根据信号强度和连接权重触发。这不是什么新鲜事，但是，没有明确的层……只是越来越远的间接连接。

如您所见，我还将网络划分为多个部分（圆圈）。每个圆圈代表一个语义域（一个语言学概念），它是围绕一个概念的核心信息；本质上，语义域是一个概念。

一个部分内的节点之间的连接比不同部分的节点之间的连接具有更高的权重。因此，“car”的节点之间的连接比将“English”连接到“car”的节点更紧密。因此，当单个部分中的神经元触发（被激活）时，很可能整个（或大部分）部分也将被激活。

**总而言之，我需要将输出模式用作进一步输出的输入，等等。**级联效应是我所追求的。

我希望这是有道理的。请在需要时要求澄清。

是否存在任何合适的模型来模拟我已经描述的内容？

![在此处输入图像描述](../Images/e6d6b11a53d29ba46bddd02f7cfcc2de.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:24:19.153

您的神经网络类似于使用进化算法（例如遗传算法）创建的神经网络。

有关详细信息，请参阅以下文章。

*   [Han - 基于程序行为的异常检测进化神经网络](http://sclab.yonsei.ac.kr/courses/12TAI/Papers/evolutionary%20nn/evolutionary%20nn%20for.pdf)
*   [惠特利 - 遗传算法和神经网络](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.18.2120&rep=rep1&type=pdf)

对于这种类型的神经网络的总结。神经元及其连接是使用进化技术创建的。因此他们没有严格的层方法。汉斯使用以下技术：

"**基因操作：**

**交叉算子**通过在两个神经网络之间交换部分部分来产生一个新的后代。它随机选择两个不同的神经网络，并选择一个隐藏节点作为枢轴点。然后，它们根据选择的枢轴点交换连接链接和相应的权重。

**变异算子**改变随机选择的神经网络的连接链接和相应的权重。它执行以下两种操作之一：添加新连接或删除现有连接。

变异算子随机选择神经网络的两个节点。如果它们之间没有连接，它将连接两个具有随机权重的节点。
否则，它会删除连接链接和权重信息。"

下图来自惠特利的文章。

![神经网络反向传播与遗传算法](../Images/ecd0855daba739c334ba53e69c9e94b6.png)

```
@ARTICLE{Han2005Evolutionary,
  author = {Sang-Jun Han and Sung-Bae Cho},
  title = {Evolutionary neural networks for anomaly detection based on the behavior
of a program},
  journal = {Systems, Man, and Cybernetics, Part B: Cybernetics, IEEE Transactions
on},
  year = {2005},
  volume = {36},
  pages = {559 -570},
  number = {3},
  month = {june }, 
```

}

```
@article{whitley1995genetic,
  title={Genetic algorithms and neural networks},
  author={Whitley, D.},
  journal={Genetic algorithms in engineering and computer science},
  pages={203--216},
  year={1995},
  publisher={Citeseer}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:38:45.517

> 总而言之，我需要将输出模式用作进一步输出的输入，等等。级联效应是我所追求的。

这听起来像是一个具有多个隐藏层的前馈网络。不要害怕这里的“层”这个词，如果有多个层，就像你在那儿画的一样……像 5-5-7-6-7-6-6-5-6-5 -结构化网络（5 个输入，8 个隐藏层，每个隐藏层具有不同数量的节点和 5 个输出）。

您可以以任何您喜欢的方式将节点从一层连接到另一层。您可以通过简单地使用常量零作为它们之间的权重来使一些未连接，或者如果使用面向对象的编程，只需将不需要的连接留在连接阶段之外。使用标准 NN 模型跳过这些层可能会更难，但一种方法可能是对权重需要跨越的每一层使用一个虚拟节点。只需将原始 output*weight 值从节点复制到虚拟对象与跳过一层相同，这也将保持标准 NN 模型的完整性。

如果您希望网络仅输出一些 1 和 0，则可以使用简单的步进函数作为每个节点中的激活函数：值大于 0.5 时为 1，否则为 0。

我不确定这是否是你想要的，但这样你应该能够建立一个你描述的网络。但是，我不知道您打算如何教您的网络生成一些语义域。为什么不让网络学习自己的权重？这可以通过简单的输入输出示例和反向传播算法来实现。如果您使用标准模型来构建您的网络，那么学习的数学也不会与任何其他前馈网络有任何不同。最后但同样重要的是，您可能会找到一个适合此任务的库，只需对代码进行少量更改或根本没有更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T05:31:44.060

涉及遗传算法的答案听起来不错（尤其是引用 Darrell Whitley 的工作）。

另一种选择是简单地随机连接节点？这或多或少是通过循环神经网络完成的。

您还可以查看 LeCun 非常成功的卷积神经网络，作为一个具有很多层的 ANN 示例，这有点像您在此处描述的为特定目的而设计的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T05:34:35.780

你的网络也模仿这个 [http://nn.cs.utexas.edu/?fullmer:evolving](http://nn.cs.utexas.edu/?fullmer:evolving)

但并没有真正让网络学习，而是被替换。

可能会在这里介绍

[http://www.alanturing.net/turing_archive/pages/reference%20articles/connectionism/Turing%27s%20neural%20networks.html](http://www.alanturing.net/turing_archive/pages/reference%20articles/connectionism/Turing%27s%20neural%20networks.html)

# events - 列出事件接收者以记录日期，当项目上的工作流状态已更新？

> ID：13386555
> 
> 赞同：0
> 
> 时间：2012-11-14T20:11:45.570
> 
> 标签：events, sharepoint-2010, event-handling, workflow-activity, sharepoint-list

这是我必须记录更新/更改项目的工作流状态的日期的代码。我在列表中创建了名为 Completed Date 的自定义列作为日期类型来显示日期。

工作流部署良好，但未在“完成日期”列下呈现任何数据。我错过了什么吗？

```
namespace WorkflowDateRecorder.EventReceiver1
{
/// <summary>
/// List Item Events
/// </summary>
public class EventReceiver1 : SPItemEventReceiver
{
   /// <summary>
   /// An item is being updated.
   /// </summary>
   public override void ItemUpdating(SPItemEventProperties properties)
   {
       base.ItemUpdating(properties);
       if (properties.BeforeProperties["Wokflowstatus"] != properties.AfterProperties["Wokflowstatus"])
       {
           properties.ListItem["Completed Date"] = DateTime.Now;
           properties.ListItem.Update();
           properties.Web.Update();
       }
   }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:53:49.567

在`ItemUpdating`方法中，您应该使用设置新字段值

```
properties.AfterProperties[Completed_x0020_Date] = newFieldValue;
//AfterProperties and BeforeProperties are using internal names of columns. 
```

那么问题是，如果您的 if 语句被访问过？原因调用`ListItem.Update()`很可能会导致对该事件接收器的递归调用。

# c++ - 矢量 - 删除块

> ID：13386559
> 
> 赞同：0
> 
> 时间：2012-11-14T20:12:25.377
> 
> 标签：c++, vector

我有一个函数可以检查向量的值，然后删除其中没有足够值的块来考虑。

```
vector<iniMatrix> Audio::filter(vector<iniMatrix>&blocks, double sumThres, double ZeroThres)
{
double totalSum = this->width * sumThres;
double totalZero = this->width * ZeroThres;

int currZero = 0;
int currsum = 0;

int prevsign = 0;

for(auto int i=0; (i < 96); i++)
{
    int currsign = zerocross(blocks[i]);
    double currSumOfBlocks = this->energy(blocks[i]);

    if(!totalSum > currSumOfBlocks || totalZero > currsign)
    {
        blocks[i].erase(blocks[i].begin()+blocks.size());
    }
}

return blocks;
} 
```

它一直工作到擦除块为止，它不会删除它们，因为当我输出`blocks.size()`它时它仍然与以前的值相同，它应该更小。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:21:19.343

如果你想删除第 i 个元素，你应该这样做：

```
blocks.erase(blocks.begin()+i); 
```

# javascript - rails 3 javascript fine coffeescript referenceerror（类）未定义

> ID：13386560
> 
> 赞同：2
> 
> 时间：2012-11-14T20:12:27.520
> 
> 标签：javascript, jquery, ruby-on-rails-3, coffeescript

RubyRogues 播客上的某个人曾经说过“*学习 CoffeeScript，因为 CoffeeScript 写的 JavaScript 比你好。* ”抱歉，不记得是谁说的了……

所以，我采用了一个非常简单的 WORKING javascript 函数：

***切换ii.js***

```
function pdtogglejs(id) {   $('div .partybackground').removeClass("hidden");  } 
```

这条线正在调用它：

```
<a href="#" class="dctoggle" onclick="pdtogglejs('partybackground')">Read More...</a> 
```

然后我把它转换成这个咖啡脚本： **toggling.js.coffee**

```
pdtogglecs(id) ->
   jQuery('div .partybackground').removeClass("hidden") 
```

并更改了 html 以引用 pdtoggle* *c* *s 而不是 pdtoggle* *j* *s。

我可以在我的 application.js 文件中看到它们都很好：

```
(function() {

  pdtogglecs(id)(function() {
    return jQuery('div .partybackground').removeClass("hidden");
  });

}).call(this);
function pdtogglejs(id) {   $('div .partybackground').removeClass("hidden");  }
;
(function() {

}).call(this); 
```

但是，只有纯 javascript 有效。咖啡脚本总是返回**Uncaught ReferenceError: pdtogglecs is not defined。**

基于其他stackoverflow问题，它一定是某种命名空间错误。可能是因为 pdtogglecs 本身在函数内部的方式？但是，我尝试使用以下方法定义咖啡脚本函数：window.pdtogglecs、this.pdtogglecs、root.pdtogglecs，而咖啡脚本总是因该错误而失败。

我错过了什么？？

谢谢！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T21:34:47.080

你有两个问题，一个是 CoffeeScript 语法混乱，另一个是你知道的命名空间问题。

我们将从整理您的语法混乱开始。这：

```
f(x) -> ... 
```

是这样解释的：

```
f(x)(-> ...) 
```

所以当给出这个时：

```
pdtogglecs(id) ->
   jQuery('div .partybackground').removeClass("hidden") 
```

CoffeeScript 认为您正在尝试将`pdtogglecs`其`id`作为参数调用。然后它认为`pdtogglecs(id)`返回一个函数，并且你想用你的`-> jQuery(...)`函数作为参数调用该函数。所以它最终是这样的：

```
callback = -> jQuery(...)
returned_function = pdtogglecs(id)
returned_function(callback) 
```

这与您的原始 JavaScript 完全不同。您想创建一个名为的函数，该函数将`pdtogglecs`其`id`作为参数，然后运行您的 jQuery 内容：

```
pdtogglecs = (id) ->
    # -----^ this is sort of important
    jQuery('div .partybackground').removeClass("hidden") 
```

您可以通过查看生成的 JavaScript 来了解发生了什么。

命名空间问题很简单，您可能可以根据您发现的其他问题来解决这个问题。但是，为了完整起见，我会在这里处理它。

CoffeeScript 将每个`.coffee`文件包装在一个自执行函数中，以避免污染全局命名空间：

```
(function() {
    // JavaScript version of your CoffeeScript goes here...
})(); 
```

该包装器使所有内容都局限于`.coffee`文件。如果你想污染全局命名空间，那么你必须这样说：

```
window.pdtogglecs = (id) -> ... 
```

你也可以说：

```
@pdtogglecs = (id) -> ... 
```

但是我更喜欢直接引用的明确性`window`，这也使您不必担心解析代码时`@`(AKA ) 是什么。`this`

# android - 如何编写跨越 2 个应用程序的 Android 测试用例

> ID：13386561
> 
> 赞同：2
> 
> 时间：2012-11-14T20:12:32.873
> 
> 标签：android, robotium, android-testing

根据 Robotium 文档，我们不能编写跨越两个应用程序的测试用例，它说“测试项目被锁定到 targetPackage。Android 平台不允许超出该目标包。因此，您将需要 2 个测试项目，一个每个应用程序。”

目前我想做的是像猴子工具。我想在屏幕上随机触发动作以彻底触发应用程序的功能。在遍历过程中，程序流有时会跳出应用程序，然后 JUnit 或 Robotium 失去对程序的控制。我想知道有什么方法可以将程序流引导回应用程序？或者有什么方法可以同时控制多个应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T01:40:08.607

如果您只愿意在 Android 4.1 及更高版本上进行测试，则可以使用新的 UI Automator 框架，该框架支持跨多个包进行测试。

一些信息： https:
[//plus.google.com/103712615773524578393/posts/dzqtF7BYyG4](https://plus.google.com/103712615773524578393/posts/dzqtF7BYyG4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:35:13.247

编写一个简单的应用程序来访问活动管理器并每 2 秒读取一次在您的应用程序或其他应用程序中作为外部服务处于活动状态的内容是一件容易的事。

[http://developer.android.com/reference/android/app/ActivityManager.html](http://developer.android.com/reference/android/app/ActivityManager.html)

基本上，检查 ActivityManager.RecentTaskInfo() 并检查它启动的 Activity 组件是否是你可以接受的。然后，为了不影响您的普通用户，`.isUserAMonkey()`返回一个布尔值 true。

如果 Activity 不是您想要的，请编写：

```
else
startService(new Intent(this, TheService.class)); 
```

或者

```
else 
startActivity(new Intent(this, TheActivity.class)); 
```

# c# - 如何将 json 字符串转换为数据表？

> ID：13386565
> 
> 赞同：0
> 
> 时间：2012-11-14T20:12:53.827
> 
> 标签：c#, json, winforms, datatable

我正在尝试将谷歌的 API 响应 json 格式的字符串解析为数据表。

我尝试使用`using Newtonsoft.Json;`并这样做：

```
 var json = new WebClient().DownloadString(textBox1.Text);
        DataTable tester = (DataTable)JsonConvert.DeserializeObject(json.ToString(), (typeof(DataTable))); 
```

我收到此错误：`Additional text found in JSON string after finishing deserializing object.`

当我通过 JSONLint 运行字符串时，它表示该字符串是有效的。

`here is json:` [http://jsfiddle.net/q4XqQ/](http://jsfiddle.net/q4XqQ/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-01T18:39:29.080

我最终解析了 json 字符串并编写了一些运行良好的正则表达式。

# 3d - 相机跟随算法

> ID：13386566
> 
> 赞同：1
> 
> 时间：2012-11-14T20:13:02.090
> 
> 标签：3d, camera

我正在制作一个游戏，我正在寻找一些关于基本相机跟踪算法的帮助。

*   假设我们有一个大小为 320 x 480 的窗口。
*   我们还有一个坐标为 x,y 的玩家。
*   用户可以使用箭头键移动播放器。
*   相机跟随玩家坐标。[相机坐标是屏幕所在的位置]。所以 camera.x=player.x 和 camera.y=player.y

现在我遇到的问题是：当玩家到达房间的尽头时，我可以看到房间的“外面”。因此，理想情况下，摄像机在接近房间尽头时应该停止移动。

我不确定如何有效地解决这个问题，这似乎是游戏中的一个常见功能。任何帮助都会很棒。

我的代码，它不起作用..真的，视图随机变得古怪*：

```
#bi_currentwindow.layout.x = -(top left x corner of window)
#bi_currentwindow.layout.y = -(top left y corner of window)
#bi_bg_size= total room (or world) size

            diff=(object.x-Window.size[0]/2)
            if diff<0:
                bi_currentwindow.layout.x = object.x+diff
            else:
                diff=(object.x+Window.size[0]/2)-bi_bg_size[0]
                if diff<0:
                    bi_currentwindow.layout.x = -object.x+Window.size[0]/2.0
            diff=(object.y-Window.size[1]/2)

            if diff<0:
                bi_currentwindow.layout.y = diff+Window.size[1]/2
            else:
                bi_bg_size=centralVarTransfer.bi_bg_size
                diff=bi_bg_size[1]-(object.y+Window.size[1]/2)

                if diff>0:
                    bi_currentwindow.layout.y = -object.y+Window.size[1]/2.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:47:07.787

每当我做 2D 游戏时，我更喜欢让玩家居中屏幕并移动背景。这允许您执行以下操作：如果我的房间边是 > 或 < 我的屏幕尺寸，则移动我的屏幕，使其边等于我的屏幕尺寸。

但是，如果您有相机并且更喜欢使用该方法：数学应该很容易。就像是：

```
//assuming origin is the center of the object
if ( camera.xPosition - (camera.width / 2) < room.x - (room.width / 2))
     camera.xPosition  = room.x - (room.width / 2) + (camera.width / 2) 
```

我的代码可能有点偏离（并且仅适用于房间的一侧），但从概念上讲，您正在检查由偏移量修改的相机位置（基于相机宽度或高度）是否大于或小于由偏移量（基于房间宽度或高度）。

我发现拥有 2 张索引卡并像相机一样移动一张索引卡有助于概念化您尝试编码的边界条件。

# android - Android app crash，看不懂logcat找原因

> ID：13386567
> 
> 赞同：1
> 
> 时间：2012-11-14T20:13:02.210
> 
> 标签：android, android-camera, logcat

我在主要活动中有这段代码：

```
package flash.light.pro;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.pm.PackageManager;
import android.hardware.Camera;
import android.graphics.Color;
import android.hardware.Camera.Parameters;
import android.util.Log;
import android.view.View;
import android.view.WindowManager;
import android.widget.Button;
import android.view.View.OnLongClickListener;

public class MainActivity extends Activity {
    private boolean isBlack = false;
    private boolean isLedOn = false;
    private boolean supportsCamera = true;
    private Camera camera;
    final Parameters p = camera.getParameters();
    protected void onStop() {
        super.onStop();

        if (camera != null) {
            camera.release();
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        final Button screen = (Button) findViewById (R.id.screen);
        Context context = this;
        PackageManager pm = context.getPackageManager();

        isBlack = false;
        setBrightness(255);

        if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
            Log.e("err", "Device has no camera!");
            supportsCamera = false;
        }

        try{
            camera = Camera.open();
        } catch (Exception e){
            Log.e(getString(R.string.app_name), "failed to open Camera");
            e.printStackTrace();
        }

        screen.setOnClickListener(new Button.OnClickListener(){  
            public void onClick(View v) { 
                if (isBlack){ 
                    screen.setBackgroundColor(Color.WHITE);
                    isBlack = false;
                    setBrightness(255);
                }
                else{
                    screen.setBackgroundColor(Color.BLACK);
                    isBlack = true;
                    setBrightness(0);
                }
            }
        });

        if(supportsCamera){
            screen.setOnLongClickListener(new OnLongClickListener() {
                public boolean onLongClick(View v) {
                    if(isLedOn){
                        p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                        camera.setParameters(p);
                        camera.startPreview();
                        return true;
                    }
                    else{
                        p.setFlashMode(Parameters.FLASH_MODE_OFF);
                        camera.setParameters(p);
                        camera.stopPreview();
                        return true;
                    }
                }
            });
        }
    }

    private void setBrightness(int brightness) {
        WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
        layoutParams.screenBrightness = brightness / 100.0f;
        getWindow().setAttributes(layoutParams);
    }
} 
```

这个 androidManifest.xml 代码：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="flash.light.pro"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
     <permission android:name="android.permission.FLASHLIGHT"
             android:permissionGroup="android.permission-group.HARDWARE_CONTROLS"
             android:protectionLevel="normal"
             android:label="string/permlab_flashlight"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

这是 LogCat 日志：

```
11-14 20:05:06.772: D/AndroidRuntime(380): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
11-14 20:05:06.772: D/AndroidRuntime(380): CheckJNI is ON
11-14 20:05:07.371: D/AndroidRuntime(380): Calling main entry com.android.commands.pm.Pm
11-14 20:05:07.392: D/AndroidRuntime(380): Shutting down VM
11-14 20:05:07.400: I/AndroidRuntime(380): NOTE: attach of thread 'Binder Thread #3' failed
11-14 20:05:07.411: D/dalvikvm(380): GC_CONCURRENT freed 101K, 71% free 297K/1024K, external 0K/0K, paused 1ms+1ms
11-14 20:05:07.411: D/dalvikvm(380): Debugger has detached; object registry had 1 entries
11-14 20:05:07.830: D/AndroidRuntime(390): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
11-14 20:05:07.830: D/AndroidRuntime(390): CheckJNI is ON
11-14 20:05:08.390: D/AndroidRuntime(390): Calling main entry com.android.commands.am.Am
11-14 20:05:08.420: I/ActivityManager(61): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] 

flg=0x10000000 cmp=flash.light.pro/.MainActivity } from pid 390
11-14 20:05:08.450: I/ActivityManager(61): Start proc flash.light.pro for activity flash.light.pro/.MainActivity: pid=398 uid=10040 gids={1006}
11-14 20:05:08.480: D/AndroidRuntime(390): Shutting down VM
11-14 20:05:08.490: D/dalvikvm(390): GC_CONCURRENT freed 102K, 69% free 319K/1024K, external 0K/0K, paused 1ms+3ms
11-14 20:05:08.500: D/dalvikvm(390): Debugger has detached; object registry had 1 entries
11-14 20:05:09.270: D/AndroidRuntime(398): Shutting down VM
11-14 20:05:09.270: W/dalvikvm(398): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-14 20:05:09.330: E/AndroidRuntime(398): FATAL EXCEPTION: main
11-14 20:05:09.330: E/AndroidRuntime(398): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo

{flash.light.pro/flash.light.pro.MainActivity}: java.lang.NullPointerException
11-14 20:05:09.330: E/AndroidRuntime(398):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
11-14 20:05:09.330: E/AndroidRuntime(398):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-14 20:05:09.330: E/AndroidRuntime(398):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-14 20:05:09.330: E/AndroidRuntime(398):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-14 20:05:09.330: E/AndroidRuntime(398):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 20:05:09.330: E/AndroidRuntime(398):  at android.os.Looper.loop(Looper.java:123)
11-14 20:05:09.330: E/AndroidRuntime(398):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-14 20:05:09.330: E/AndroidRuntime(398):  at java.lang.reflect.Method.invokeNative(Native Method)
11-14 20:05:09.330: E/AndroidRuntime(398):  at java.lang.reflect.Method.invoke(Method.java:507)
11-14 20:05:09.330: E/AndroidRuntime(398):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-14 20:05:09.330: E/AndroidRuntime(398):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-14 20:05:09.330: E/AndroidRuntime(398):  at dalvik.system.NativeStart.main(Native Method)
11-14 20:05:09.330: E/AndroidRuntime(398): Caused by: java.lang.NullPointerException
11-14 20:05:09.330: E/AndroidRuntime(398):  at flash.light.pro.MainActivity.<init>(MainActivity.java:22)
11-14 20:05:09.330: E/AndroidRuntime(398):  at java.lang.Class.newInstanceImpl(Native Method)
11-14 20:05:09.330: E/AndroidRuntime(398):  at java.lang.Class.newInstance(Class.java:1409)
11-14 20:05:09.330: E/AndroidRuntime(398):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-14 20:05:09.330: E/AndroidRuntime(398):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
11-14 20:05:09.330: E/AndroidRuntime(398):  ... 11 more
11-14 20:05:09.410: W/ActivityManager(61):   Force finishing activity flash.light.pro/.MainActivity
11-14 20:05:09.940: W/ActivityManager(61): Activity pause timeout for HistoryRecord{4060c450 flash.light.pro/.MainActivity}
11-14 20:05:20.739: W/ActivityManager(61): Activity destroy timeout for HistoryRecord{4060c450 flash.light.pro/.MainActivity}
11-14 20:06:00.031: I/dalvikvm(61): Jit: resizing JitTable from 1024 to 2048
11-14 20:06:19.377: D/SntpClient(61): request time failed: java.net.SocketException: Address family not supported by protocol
11-14 20:08:35.071: I/Process(398): Sending signal. PID: 398 SIG: 9
11-14 20:08:35.081: I/ActivityManager(61): Process flash.light.pro (pid 398) has died.
11-14 20:08:35.111: W/InputManagerService(61): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub

$Proxy@4051a740 
```

该应用程序在启动时崩溃，没有错误，并且日志对我来说不清楚。我能做些什么来解决它。为什么应用程序应该是某种手电筒。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T20:14:35.640

```
private Camera camera;
final Parameters p = camera.getParameters(); 
```

`camera`尚未初始化

正如 logcat 输出所示，我可以通过查看您的第 22 行来发现这一点。**不要被 logcat 中的信息量所淹没**，通常找到你的包名的第一个实例将表明问题出在哪里/在哪里。

编辑：作为旁注，您的包名称应该是反向域顺序。例如，如果您的应用程序名为 flashlightpro，而您的域名为 example.com，则您的包名应为 com.example.flashlightpro。这不是必需的，但它是一个标准约定。

编辑2：将相机的声明更改为：`Camera camera = Camera.open();`

编辑 3：Android 文档处理拍照，但步骤 1、2、3、10 在您的情况下很重要：

```
Obtain an instance of Camera from open(int).
Get existing (default) settings with getParameters().
If necessary, modify the returned Camera.Parameters object and call setParameters(Camera.Parameters).
...
Important: Call release() to release the camera for use by other applications. Applications should release the camera immediately in onPause() (and re-open()it in onResume()). 
```

[http://developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:16:06.190

您正在尝试访问未初始化的东西，这就是为什么会出现空指针异常。日志清楚地说明了这一点。

检查您尝试访问尚未初始化的相机的第 22 行活动。

```
Caused by: java.lang.NullPointerException
11-14 20:05:09.330: E/AndroidRuntime(398):  at flash.light.pro.MainActivity.<init>    (MainActivity.java:22) 
```

# postgresql - postgreSQL 中的“where”子句错误

> ID：13386577
> 
> 赞同：0
> 
> 时间：2012-11-14T20:13:41.497
> 
> 标签：postgresql

我是 postgreSQL 的新手。我正在尝试执行一些简单的查询，但我遇到了一个错误。以下是一个简单的查询

```
select e.street, e.city 
from employee e join works w join managers m on e.Lastname=w.Lastname 
and w.Lastname=m.MLastname
where w.companyname='Union Pacific'; 
```

执行此查询时引发的错误是

```
ERROR:  syntax error at or near "where"
LINE 4: where w.companyname='Union Pacific';
        ^

********** Error **********

ERROR: syntax error at or near "where"
SQL state: 42601
Character: 124 
```

我无法理解这个错误。需要一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:23:15.553

你的意思

```
select e.street, e.city 
from employee e
join works w
join managers m on (e.Lastname=w.Lastname and w.Lastname=m.MLastname)
where w.companyname='Union Pacific'; 
```

? 可能不是。可能你的意思是：

```
select e.street, e.city 
from works w
join employee e on w.Lastname=e.Lastname
join managers m on w.Lastname=m.MLastname
where w.companyname='Union Pacific'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:25:56.873

The join of `works` lacks a join condition. Follow it with `on` or `using`.

# ksh - 为什么我的脚本报告 ls: not found

> ID：13386579
> 
> 赞同：0
> 
> 时间：2012-11-14T20:13:52.940
> 
> 标签：ksh

我有以下 korn 脚本：

```
#!/bin/ksh

TAPPDATADIR=/hp/qa02/App/IPHSLDI/Data

echo $TAPPDATADIR

if [[ls $TAPPDATADIR/zip_file_MD5_checksum*.txt | wc -l > 1]]
then
    exit "asdf"
fi 
```

当我尝试运行它时，我得到：

```
/hp/qa02/App/IPHSLDI/Data
./iftest.ksh: line 7: [[ls: not found 
```

为什么我的 if 语句不起作用？

**我正在尝试查看 Data 目录中是否有多个校验和文件。如果有我想退出脚本。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:17:44.190

有几个问题：

1.  作业中不应有任何空格`=`。

2.  您需要在语句周围`[[`和语句中使用空格。`]]``if`

3.  要将命令的结果替换为测试表达式，您需要使用反引号或`$(...)`.

4.  参数`exit`应该是一个数字，我想你只是想回显字符串。

5.  `>`执行字符串比较，你必须使用它`-gt`来执行数字比较。

所以完整的脚本应该是：

```
#!/bin/ksh

TAPPDATADIR=/hp/qa02/App/IPHSLDI/Data

echo $TAPPDATADIR

if [[ $(ls $TAPPDATADIR/zip_file_MD5_checksum*.txt | wc -l) -gt 1 ]]
then
    echo "asdf"
fi 
```

# fastcgi - webpy lighttpd 和flup。500 错误

> ID：13386581
> 
> 赞同：1
> 
> 时间：2012-11-14T20:13:58.173
> 
> 标签：fastcgi, lighttpd, web.py, flup

目前我有一个带有flup和webpy的lighttpd服务器。如果您足够快地发出足够多的请求（例如多次重复单击链接或执行 apache bench），Lighttpd 会引发 500 内部服务器错误。在这一点上，它很容易被利用（我可以通过点击几下链接来破坏它）。

Lighttpd代码：

```
fastcgi.server = (
    "/sm" => (
      ( "host" => "127.0.0.1",
        "port" => 7000,
        "check-local" => "disable",
      )
    )
) 
```

我的 lighttpd 错误日志中的错误：

```
2012-11-09 16:17:32: (mod_fastcgi.c.3005) got proc: pid: 0 socket: tcp:127.0.0.1:7000 load: 15 
2012-11-09 16:17:32: (mod_fastcgi.c.2494) unexpected end-of-file (perhaps the fastcgi process died): pid: 0 socket: tcp:127.0.0.1:7000 
2012-11-09 16:17:32: (mod_fastcgi.c.3325) response not received, request sent: 1252 on socket: tcp:127.0.0.1:7000 for /sm , closing connection 
2012-11-09 16:17:32: (mod_fastcgi.c.1515) released proc: pid: 0 socket: tcp:127.0.0.1:7000 load: 14 
```

这让我觉得 lighttpd 正在崩溃，因为 Flup 没有响应。现在，我可以简单地在问题上抛出更多线程，然后它就会消失（或者至少使它更难被利用）。翻动服务器代码：

```
#!/usr/bin/python

from apps.main import app as main_app

# run as fastcgi
from flup.server.fcgi import WSGIServer
params = {
    'multiplexed': False,
    'bindAddress': ('127.0.0.1', 7000),
    'maxThreads': 9,  <---- If I move this up to 20 no more problems
}
server = WSGIServer(main_app.wsgifunc(), **params)
server.run() 
```

我认为这是一个flup问题的另一个原因是因为我可以绕过flup服务器，只做一个将请求直接发送到webpy的代理，我没有这个问题。现在，如果有更优雅的解决方案，我宁愿不只是增加线程。有谁知道什么可能导致flup破裂？还是我的结论到目前为止是错误的？

# silverstripe - Silverstripe Gridfield 关系

> ID：13386583
> 
> 赞同：0
> 
> 时间：2012-11-14T20:14:04.463
> 
> 标签：silverstripe

我正在尝试将安全文件 silverstripe 模块更新为 SS3。

在其中，作者使用了以下 ComplexTableField：

```
 class SecureFileTokenPermissionDecorator extends DataExtension {
       static $has_many = array(
           'AccessTokens' => 'SecureFileAccessToken'
       );

    ....

    $tokenList = new ComplexTableField(
        $this->owner,
        'ContainedFileTokens',
        'SecureFileAccessToken',
        null,
        null,
        "File.ParentID = '{$this->owner->ID}'",
        $sourceSort = null,
        "JOIN File ON FileID = File.ID"
    ));
    $tokenList->setParentIdName('FolderID');
    $tokenList->setRelationAutoSetting(false);

    ....
    } 
```

我想知道如何用 gridfField 表示相同的数据/关系。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:04:53.590

查看[安全文件](https://github.com/hamishcampbell/silverstripe-securefiles)模块源代码，我建议进行以下设置：

```
$tokenList = $gridField = new GridField(
    'AccessTokens', 
    'Tokens', 
    $this->owner->AccessTokens(), 
    GridFieldConfig_RelationEditor::create()
); 
```

这直接在关系 getter 上工作，这是一个延迟加载的列表（直到必要时才查询），并自动分页。我不太确定`setParentIdName("FolderID")`这里的适合度如何，可能没有必要。警告：尚未在实际代码库上尝试过此操作。

如果您需要一些帮助来理解更高级别的 API，请查看[GridField 文档](http://doc.silverstripe.org/framework/en/reference/grid-field)和[“数据模型”主题](http://doc.silverstripe.org/framework/en/topics/datamodel)。

感谢您帮助为 SS3 准备模块！:)

# jquery - 动态创建评论表单

> ID：13386591
> 
> 赞同：0
> 
> 时间：2012-11-14T20:14:44.997
> 
> 标签：jquery, ajax, comments

我想实现一个 ajax 评论系统。

目前，每个评论都有一个*回复*按钮，*onclick*会创建一个回复表单。回复表单是使用 ajax 请求创建的，这就是我想要更改的内容。

我注意到在[SO](http://stackoverflow.com)中，当您单击*添加评论*时，评论表单会**立即**打开，而不是通过**ajax 请求**。

所以我的问题是 -**实现这一目标的最佳方法是什么**？我不需要代码，只需要基本的想法

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:17:29.337

我不知道最好的，但你可以有一个 div 标签或你的 onClick 填充内容的其他元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:18:00.420

只需在 DOM 中设置隐藏元素，这些元素在特定操作上显示/隐藏，例如单击/鼠标悬停或其他。

# c++ - 多线程。我需要只读访问的关键部分吗？

> ID：13386594
> 
> 赞同：7
> 
> 时间：2012-11-14T20:14:54.487
> 
> 标签：c++, multithreading, shared-memory, critical-section

我有一堆线程。他们应该访问一个包含配置数据的单例，该配置数据在创建单例时初始化一次。因此在第一次访问时。所以对单例的进一步操作只是只读的。在这种情况下我需要关键部分吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:18:43.207

似乎因为数据是在第一次访问时*延迟*创建的，所以指针或对单例的引用是读写的。这意味着您确实需要一个关键部分。

事实上，在这种情况下，在保持惰性初始化的同时避免临界区的愿望是如此普遍，以至于它导致了[双重检查锁定反模式](http://en.wikipedia.org/wiki/Double-checked_locking)的创建。

另一方面，如果您在读取之前*急切地*初始化您的单例，您将能够避免通过常量指针/引用访问不可变对象的关键部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:25:28.823

我理解您的问题，因为您的单例中有延迟初始化。它仅在第一次读取时初始化。

接下来的连续读取是线程安全的。但是初始化期间的并发读取呢？

如果你有这样的情况：

```
SomeConfig& SomeConfig::getInstance()
{
   static SomeConfig instance;
   return instance;
} 
```

然后它取决于你的编译器。根据 C++03 中的这篇[文章](https://stackoverflow.com/questions/1962880/is-c-static-member-variable-initialization-thread-safe)，如果此静态初始化是线程安全的，则取决于实现。

[对于 C++11，它是线程安全的 - 请参阅这篇文章的](https://stackoverflow.com/questions/8102125/is-local-static-variable-initialization-thread-safe-in-c11)答案，引用：

> 这样的变量在控制第一次通过其声明时被初始化；这样的变量在其初始化完成时被认为已初始化。[...]如果在初始化变量时控制同时进入声明，则并发执行应等待初始化完成。

值得注意的是，对全局变量的只读访问是线程安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:16:21.930

不会。如果您只是*在完全初始化后*读取此数据并且数据*从未更改*，那么就不可能发生竞争条件。

但是，如果数据以任何方式被写入/修改，那么您将需要同步对它的访问，即在写入之前锁定数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T20:17:01.863

如果您只读取一些共享数据，而从不写入，则不需要同步访问。

您只需要在可能同时读取和写入共享数据时进行同步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T15:33:10.630

规范中的官方规则是数据竞争是指一个线程可以同时写入一个变量，而另一个线程读取或写入同一个变量。

如果您可以证明必须在任何读者可以阅读之前进行初始化，那么您就不需要同步。这通常通过在创建（或同步）线程之前进行初始化，或者通过使用静态存储变量来完成，C++11 保证了一些同步

# r - 使用 ggplot2 添加一条带有较少点的额外线

> ID：13386596
> 
> 赞同：2
> 
> 时间：2012-11-14T20:15:04.263
> 
> 标签：r, ggplot2

我正在尝试添加一条包含较少点的额外行。我努力了：

```
library(ggplot2)
df <- data.frame(x=c(1:50),y=c(1:50)*2+5)
df2 <-  data.frame(x=c(20,30,40),y=c(40,60,80))
plot1 <- ggplot(df , aes(x=x, y=y)) + geom_line()
plot2 <- plot1+ geom_line( aes(x=df2$x, y=df2$y))
plot2 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:30:50.280

您可以传递`df2`给`data`第二个`geom_line`调用的参数并稍微更改映射

```
plot2 <- plot1+ geom_line( aes(x=x, y=y), data = df2) 
```

# javascript - 单个 href 代码行中的两个 onclick 事件

> ID：13386597
> 
> 赞同：0
> 
> 时间：2012-11-14T20:15:06.853
> 
> 标签：javascript, onclick

我有一个 php JavaScript`onclick`事件 -

```
<td height="132" colspan="2"><a href="javascript:;" onclick="pkgsPopup('<?='http://'.$hLnk?>');" rel="nofollow"> <img alt="<?=$row['Hotel_Text']?>"  title="<?=$row['Hotel_Text']?>" src="<?=$iPth?>hotels/<?=$hImg?>.jpg" width="195" height="115" /> </a> 
```

我想在这一行添加第二个`onclick`带有`if/else`声明的事件 -

```
<a href="javascript:;" onclick="pkgsPopup('<?='http://'.$hLnk?>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:20:26.490

您可以在 JavaScript 中的*onClick*处理程序中使用**if 条件。**

 *```
<a href="javascript:;" onclick="if(condition){doSomething();}"></a>​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**回**显 PHP 中的相关部分。

**[小提琴](http://jsfiddle.net/zLD79/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:20:35.217

为什么不将 if/else 语句添加到现有的 onclick 处理程序：

```
onclick="pkgsPopup('<?= 'http://' .$hLnk?>');if (x) doSomething(); else doSomethingElse();" 
```

更新，这是一种更清洁的方法：

```
<?php
    $onclick = 'onclick="';
    if (strpos($hImg, 'rom') == 0) $onclick .= "romPopup('http://$dealPth');";
    else $onclick .= "pkgsPopup('http://$hLnk');";
    $onclick .= '"';
?>

<a href="javascript:;" <?= $onclick ?> rel="nofollow"> <img alt="<?=$row['Hotel_Text']?>" title="<?=$row['Hotel_Text']?>" src="<?=$iPth?>hotels/<?=$hImg?>.jpg" width="195" height="115" /> </a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:37:10.497

```
<script language="javascript">
 function handleClick(){
   if(something == somethingElse){
     // do the conditional stuff
   }
   pkgsPopup('<?='http://'.$hLnk?>');
 }
</script>
<a href="#" onclick="handleClick();">...</a> 
```

如您所见，您可以通过一个事件来处理它。您甚至可以使用 PHP 在不同的情况下生成不同的 javascript。*

# php - Magento Sql 查询

> ID：13386601
> 
> 赞同：0
> 
> 时间：2012-11-14T20:15:51.243
> 
> 标签：php, mysql, magento

我需要在 magento 数据库中使用 SQL 语句生成以下内容。但我不完全知道，表和字段在哪里？

订单号、SKU、商品名称、数量、商品价格、总行价、每件商品的成本（不知道是不是自定义属性）、总行成本、订单总成本、运费、订单总价

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:23:16.507

看一眼

```
sales_flat_order
sales_flat_order_*
.....
sales_flat_order_item 
```

或者您可以加载订单并获取所有信息（还有一些订单信息作为 php 序列化数组存储在数据库中）

```
 $order = Mage::getModel('sales/order')->load($order_id);
 $items = $order->getAllItems();
 //$items->getData(); //use the getData() method to see a list of all the fields 
```

# c# - C# SSL WebSocket Client 中是否有.net 4.0？

> ID：13386604
> 
> 赞同：3
> 
> 时间：2012-11-14T20:16:14.380
> 
> 标签：c#, winforms, ssl, client, websocket

我想知道目前是否有关于此主题的任何内容：我找到了各种示例，例如：c# 中用于 ssl (wss://) 客户端[的 4.5 system.net.websockets.websocket](http://msdn.microsoft.com/en-us/library/system.net.websockets.websocket%28v=vs.110%29.aspx)，我想知道是否有任何可靠的ssl 版本在那里，因为[这个类似的问题](https://stackoverflow.com/questions/2064641/is-there-a-websocket-client-implemented-for-net)得到了回答。

但我正在 Visual c# 2010 中开发，这是一个必须接收服务器推送的 winforms C#*客户端*应用程序，但它是 Windows 7，所以我不能使用 net 4.5 。（注：强调*客户端*）

如果有人有任何 SSL 的实际代码（希望不一定强制执行证书身份验证提示的代码），我将不胜感激——我更喜欢代码示例——但我将采用命名空间解决方案。

提前致谢：-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-02T16:18:25.337

Websocket4net 正在使用 SSL，我们正在开发一个在服务器端使用 Jetty/websocket 的系统。这是一个带有身份验证的示例片段：

```
webSocket = new WebSocket("wss://host:8443/", "echo", null,
new List < KeyValuePair < string, string >> () {
    new KeyValuePair < string, string > ("Authorization", "Basic YWRtaW46YWRtaW4=")
}, "", WebSocketVersion.Rfc6455);
webSocket.EnableAutoSendPing = true;
webSocket.AllowUnstrustedCertificate = true; 
```

这个问题很老了，但这个答案可以帮助其他人......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T20:57:17.017

因此，您可以在 Windows 7 中使用 .NET 4.5，您只需下载[Visual Studio](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop#product-express-desktop-details)的正确版本（在 msdn.com 上它有 Win 8 的 dl） 。

[示例连接](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh994399%28v=win.10%29.aspx)

[使用 TCP 版本的示例](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh994398.aspx)

[通用 WebSocket 文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh994396.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:54:40.043

我认为这可能对你有用： [http ://websocket4net.codeplex.com](http://websocket4net.codeplex.com)

# javascript - javascript 正则表达式拆分，包括分隔符

> ID：13386606
> 
> 赞同：1
> 
> 时间：2012-11-14T20:16:20.477
> 
> 标签：javascript, regex, lookahead

我想`'9088{2}12{1}729'`分成`[ "9088", "{2}12", "{1}729" ]`

甚至对我更有用：`[ "9088", "2-12", "1-729" ]`

试过：

```
'9088{2}12{1}729'.split(/\{[0-9]+\}/); => ["9088", "12", "729"] 
```

也试过：

```
'9088{2}12{1}729'.match(/\{[0-9]+\}/); => ["{2}"] 
```

我知道它可能涉及一些其他的正则表达式字符串来拆分，包括分隔符。

* * *

在php中尝试过，我想你也可以在一行中完成。

```
preg_split( '/{/', preg_replace( '/}/', '-', "9088{2}12{1}729" ) )

Array ( [0] => 9088 [1] => 2-12 [2] => 1-729 ) 
```

只需将替换功能与 split 包装起来即可正确使用偏好顺序。

我想我更喜欢 js :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:22:09.720

> 对我更有用：[“9088”、“2-12”、“1-729”]

可以使用简单的技巧来完成！

```
"9088{2}12{1}729".replace(/\}/g,'-').split(/\{/g)

// ["9088", "2-12", "1-729"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:35:37.440

您可以使用简单的零宽度[正前瞻](http://www.regular-expressions.info/lookaround.html)`/(?={)/`：

```
'9088{2}12{1}729'.split(/(?=\{)/);  // => ["9088","{2}12","{1}729"] 
```

“零宽度”部分意味着实际匹配的文本是空字符串，因此拆分不会丢弃任何内容，而前瞻意味着它在包含的模式之前匹配，因此`/(?=\{)/`匹配箭头指示的字符之间的空字符串：

```
9 0 8 8 { 2 } 1 2 { 1 } 7 2 9
       ↑         ↑ 
```

然后，您可以使用[`Array.prototype.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)从`{1}2`表格转换为`1-2`表格。

```
'9088{2}12{1}729'.split(/(?=\{)/)
    .map(function (x) { return x.replace('{', '').replace('}', '-'); }); 
```

产量

```
["9088","2-12","1-729"] 
```

# apache-pig - 替换猪拉丁语中的值

> ID：13386609
> 
> 赞同：1
> 
> 时间：2012-11-14T20:16:28.770
> 
> 标签：apache-pig

我有一个数据集的形式：

```
id1, id2, id3 
```

记录中可能缺少 id1、id2 或 id3（或所有三个..或任何两个）中的任何一个。

现在如果缺少 id1 我想用 1 替换它

```
 id2 by 3 
 id3 by 7 
```

我该怎么做呢。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:03:07.997

使用 bincond 运算符测试该值是否为空，然后将其替换为所需的值。来自编程猪，[第 5 章](http://ofps.oreilly.com/titles/9781449302641/intro_pig_latin.html)：

```
2 == 2 ? 1 : 4 --returns 1 
2 == 3 ? 1 : 4 --returns 4 
null == 2 ? 1 : 4 -- returns null
2 == 2 ? 1 : 'fred' -- type error, both values must be of the same type 
```

在你的例子中，

```
id2 IS NULL ? 3 : id2 
```

# jquery - 如何使用 Gmaps.js 在标记单击时创建自定义弹出窗口？

> ID：13386610
> 
> 赞同：1
> 
> 时间：2012-11-14T20:16:28.933
> 
> 标签：jquery, html, css, google-maps

我正在使用[GMaps.js](http://hpneo.github.com/gmaps/examples/markers.html)在我的网站上实现一些 Google 地图功能。这个图书馆太棒了，为我节省了大量的工作。

我正在尝试创建一个自定义弹出窗口，当有人单击标记时会出现该弹出窗口。我看到了一个使用但只显示一个白框的[示例。](http://hpneo.github.com/gmaps/examples/markers.html)`infoWindow`

有什么方法可以自定义这个盒子的外观吗？更改背景颜色、边框等？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:40:26.203

**[此页面](http://gmaps-samples-v3.googlecode.com/svn/trunk/infowindow_custom/infowindow-custom.html)**演示了可以自定义 infoWindows。

我找不到解释，但自定义似乎是在页面上的脚本中实现的 - “查看源代码”然后剥离你的眼球以准备大量代码。

# entity-framework - EntityFramework 5 Code First - 查找表获取重复记录

> ID：13386619
> 
> 赞同：2
> 
> 时间：2012-11-14T20:17:12.213
> 
> 标签：entity-framework, code-first

我正在尝试 EF5 CodeFirst，但无法进行简单的设置；(

我有两个类 Foo 和 Bar，其中 Bar 代表查找表。

```
public class Foo
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual Bar Bar { get; set; }

}

public class Bar
{
    public int Id { get; set; }
    public string Description { get; set; }
}

public class MyDbContext : DbContext
{
    static MyDbContext()
    {
        Database.SetInitializer<MyDbContext>(null);
    }

    public MyDbContext(): base("testEF"){}

    public DbSet<Foo> Foos { get; set; }
    public DbSet<Bar> Bars { get; set; }
} 
```

现在我创建了一个用作数据访问层的静态类 - 在实际应用程序中，它将位于不同的物理层

```
public static class DataAccess
{
    public static Bar GetBarById(int id)
    {
        using (var db = new MyDbContext())
        {
            return db.Bars.SingleOrDefault(b => b.Id == id);
        }
    }

    public static Foo InsertFoo(Foo foo)
    {
        using (var db = new MyDbContext())
        {
            db.Foos.Add(foo);

            db.SaveChanges();
        }
        return foo;
    }
} 
```

我正在使用种子方法初始化数据库：

```
internal sealed class Configuration : DbMigrationsConfiguration<testEF.MyDbContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
    }
    protected override void Seed(testEF.MyDbContext context)
    {
            context.Bars.AddOrUpdate(
                new Bar { Description = "Bar_1" },
                new Bar { Description = "Bar_2" }

                );
    }
} 
```

这将在 Bars 表中创建两条记录。到现在为止还挺好...

这是我的主要功能

```
static void Main(string[] args)
{
    var bar1 = DataAccess.GetBarById(1); 

    var foo = new Foo
    {
        Name = "Foo_1",
        Bar = bar1
    };

    DataAccess.InsertFoo(foo);

} 
```

应用运行后在Foos表中有一条记录：

```
Id       Name    Bar_Id
1        Foo_1   3 
```

为什么 Bar_Id 为 3？EF 实际上向 Bars 表插入了新记录！

```
Id  Description
1   Bar_1
2   Bar_2
3   Bar_1 
```

我做错了什么？

**更新：** 我找到了一种解决方法 - 在插入记录之前附加 Bar 属性：

```
public static Foo InsertFoo(Foo foo)
{
    using (var db = new MyDbContext())
    {
        db.Bars.Attach(foo.Bar);

        db.Foos.Add(foo);

        db.SaveChanges();
    }
    return foo;
} 
```

它现在正在工作，但这更像是一种 hack 而不是一个有效的解决方案......在现实世界的应用程序中，对象的复杂性可能成为一个巨大的问题。我愿意接受更好的解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T20:42:35.767

问题是`bar1`来自不同的数据上下文。您的`InsertFoo`方法通过与`Foo`. 您希望这两个共享一个上下文。因此，对方法的整个范围使用单个上下文`Main`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:47:36.623

您提到的复杂性（我同意您的观点）是由为您的数据访问组件使用静态类引起的。它迫使您将 DBContext 的跨方法调用分开。与其那样做，为什么不创建一个普通的类，并在构造函数中构建上下文。

有了这个，你不再需要附加 foo.Bar 了。

```
public class DataAccess
{
    private MyDbContext _context;

    public DataAccess(){
        _context = new MyDbContext();
    }

    public Bar GetBarById(int id)
    {
        return _context.Bars.SingleOrDefault(b => b.Id == id);
    }

    public Foo InsertFoo(Foo foo)
    {
        _context.Foos.Add(foo);

        _context.SaveChanges();

        return foo;
    }
} 
```

有很多方法可以建立和增强它。您可以为调用的 MyDbContext 创建一个接口，`IDbContext`并使用 DI 框架将其注入此类。同样，您可以对`DataAccess`类执行相同的操作并将其注入到需要的任何地方。

# php - 用cgi生成一个网页，包含html和php

> ID：13386625
> 
> 赞同：1
> 
> 时间：2012-11-14T20:17:30.950
> 
> 标签：php, html, linux, shell, cgi

我正在尝试使用包含 html 和 php 的 cgi 生成网页。

当我直接在文件“test.php”中输入一些基本代码时，它工作正常：

```
<html>
<body>
<h1> Hello world! </h1>
<?php phpinfo() ?>
</body>
</html> 
```

当我只生成带有可执行文件“test.cgi”（位于 cgi-bin 中）的 html 代码时，它也可以正常工作：

```
#!/bin/sh
echo "Content-type: text/html"
echo ""
echo "<html>"
echo "<body>"
echo "<h1> Hello world! </h1>"
echo "<html>"
echo "<body>" 
```

但是当我尝试添加一行php时，它不再起作用了：

```
#!/bin/sh
echo "Content-type: text/html"
echo ""
echo "<html>"
echo "<body>"
echo "<h1> Hello world! </h1>"
echo "<?php phpinfo() ?>"
echo "<html>"
echo "<body>" 
```

仅显示 html 部分。任何 php 似乎都被忽略了。

更多信息：
- Ubuntu 12.04
- PHP 版本 5.3.10-1ubuntu3.4
- Apache2

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:44:08.823

我的理解，如果我错了，我希望有人能纠正我，是这样吗

*   CGI 是一种服务器端进程语言
*   PHP 是一种服务器端进程语言

但在每种情况下，它所做的都是将 HTML 传递给浏览器。CGI 不会将其输出传送回 Web 服务器以作为 PHP 代码进行重新处理。

# c++ - 解耦顶级 MFC 对话框

> ID：13386627
> 
> 赞同：2
> 
> 时间：2012-11-14T20:17:42.480
> 
> 标签：c++, mfc

我正在使用 MFC 和 C++ 并且不确定如何正确解耦需要相互交互的两个顶级对话框。具体来说，其中一个对话框（比如对话框 X）应该执行一个动作来响应按钮点击另一个对话框（比如对话框 Y）。当前在代码库中实现这一点的方式是 Y 的构造函数将指向 X 的指针作为参数。然后，当单击其自己的按钮时，它使用此指针对 X 执行操作。这似乎是对通用对话框的不合理限制。我希望能够做的是让 X 为来自 Y 的按钮单击消息注册某种侦听器。不幸的是，我还没有找到任何表明这是可能的东西。

我考虑过的两种选择：

1.  注册自定义消息并将其从 Y 发送到 X（高度耦合...）
2.  广播一条消息并在 X 中收听（似乎过度）

我对 MFC 比较陌生，对 MFC 社区的习语或最佳实践不是特别熟悉。对于如何正确解耦对话框的任何想法或建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:32:29.210

最简单的方法是指定自定义[WM_APP](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644930%28v=vs.85%29.aspx) +x 消息并维护一个列表，`HWND`以便在您的事件发生时得到通知。然而，更现代的方法是[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。这涉及创建一个几乎以相同方式工作`IObserver`的接口。`ISubject`然后，您的对话框将实现这些接口。此解决方案的优点是您可以让基于非 HWND 的类监听您的事件。此外，发送消息的成本更高。

# node.js - node.js - 测量传输延迟

> ID：13386630
> 
> 赞同：0
> 
> 时间：2012-11-14T20:17:57.210
> 
> 标签：node.js

我试图弄清楚节点 js 发送 n 个数据包需要多长时间。我的最终目标是找到网络的传输延迟。我做了一个递归函数，所以下一个数据包在前一个数据包完成之前不会发送。到目前为止，这是我的代码。我做得对吗？

```
var sizes=[200,400,600,800,1000];

// NOTE: the port is different
var host = "127.0.0.1", port = 33334;

var dgram = require( "dgram" );

var client = dgram.createSocket( "udp4" );

/*
client.on( "message", function( msg, rinfo ) {
    var end = new Date().getTime();
    var total = end - start;

    console.log( "The packet came back in "+ total+" MiliSeconds");
});
*/

// client listens on a port as well in order to receive ping
client.bind( port, host );

var number_packets = 50;
var packet_size = 100;

var count = 0;
var end;

var start = new Date().getTime();

var message = new Buffer(packet_size);

send(message);

function send(message) {

    client.send(message, 0, message.length, 33333, "127.0.0.1", function(err, bytes){

        count++;
        console.log("pkt #: "+count);
        if(count < number_packets)
            send(message);

        if( count >= number_packets ) {

            end = new Date().getTime();
            var total = end - start;
            console.log("total: "+total);
        }

    } );

} 
```

有一个 server.js 接收数据包并向控制台写入已收到数据包。

# java - 使用 FetchMode.JOIN 休眠 OneToOne(optional=true) 尝试重新选择空值

> ID：13386635
> 
> 赞同：5
> 
> 时间：2012-11-14T20:18:18.560
> 
> 标签：java, hibernate, jpa, orm

我的问题是 OneToOne 关联的休眠急切加载为每个空关系执行 +1 选择。

实体示例：

```
@Entity 
class SideBlue {
    @Column(nullable = false)
    private Integer timestamp;

    @OneToOne(optional=true) 
    @JoinColumn(name="timestamp", referenceColumn="timestamp", insertable = false, updatable = false) 
    SideRed redSide; 
}
@Entity 
class SideRed {
    @Column(nullable = false)
    private Integer timestamp;
} 
```

（这是一个遗留数据库模式，因此不允许修改数据库）

查询示例：

```
CriteriaBuilder builder... CriteriaQuery query...
Root<SideBlue> root = query.from(SideBlue.class);
root.fetch(SideBlue_.sideRed, JoinType.LEFT);
entityManager().createQuery(query).getResultList(); 
```

结果：如果所有蓝色侧实体都有一个红色侧，则一切正常，因此 hibernate 只对将检索到的实体执行一次对数据库的查询。

但是，如果蓝方实体没有关联的红方实体，则休眠尝试再次找到另一方。Hibernate sql 注释对每个空的 redSide 属性说 '/* load RedSide */ select ...'。

如何跳过第二个选择？

当延迟不是非常低时，就会出现实际问题。如果我尝试选择 100 万行，并且 1/3 的“红边”为空，则添加的总延迟是一个真正的问题。

**编辑：**

这是查询的调试日志

```
10:04:32.812 [main] DEBUG org.hibernate.loader.Loader - Result set row: 0
10:04:32.815 [main] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[SideBlue#1269721], EntityKey[SideRed#3620564]
10:04:32.833 [main] DEBUG org.hibernate.loader.Loader - Result set row: 1
10:04:32.833 [main] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[SideBlue#1269776], null 
```

第一行包含蓝色和红色面，但第二行仅包含蓝色面。所以hibernate必须知道相关的红方不存在。但是，在处理完所有结果行之后......

```
10:04:33.083 [main] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [BlueSide#1269721]
10:04:33.084 [main] DEBUG org.hibernate.loader.Loader - Loading entity: [RedSide#component[timestamp]{timestamp=1338937390}]
10:04:33.084 [main] DEBUG org.hibernate.SQL - /* load RedSide */ select ...
! Nothing really loaded because the previous SQL return empty result set, again !
10:04:33.211 [main] DEBUG org.hibernate.loader.Loader - Done entity load 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-16T20:53:42.563

好吧，当您查询 SideBlue 时，您试图不加载 SideRed。我认为这是一个延迟加载问题，与 Hibernate 的这个“限制”有关（来自[https://community.jboss.org/wiki/SomeExplanationsOnLazyLoadingone-to-one?_sscc=t](https://community.jboss.org/wiki/SomeExplanationsOnLazyLoadingone-to-one?_sscc=t)）：

> ```
> class B {  
>     private C cee;  
> 
>     public C getCee() {  
>         return cee;  
>     }  
> 
>     public void setCee(C cee) {  
>         this.cee = cee;  
>     }  
> }  
> 
> class C {  
>     // Not important really  
> } 
> ```
> 
> 在加载 B 之后，您可以调用 getCee() 来获取 C。但是看，getCee() 是您的类的方法，Hibernate 无法控制它。Hibernate 不知道何时有人会调用 getCee()。这意味着 Hibernate 必须在从数据库加载 B 时将适当的值放入“cee”属性。
> 
> 如果为 C 启用了代理，Hibernate 可以放置一个尚未加载的 C-proxy 对象，但当有人使用它时会加载它。这为一对一提供了延迟加载。
> 
> 但是现在想象你的 B 对象可能有也可能没有关联的 C (constrained="false")。当特定 B 没有 C 时，getCee() 应该返回什么？无效的。但是请记住，Hibernate 必须在设置 B 的那一刻设置正确的“cee”值（因为它不知道何时有人会调用 getCee()）。代理在这里没有帮助，因为代理本身已经非空对象。
> 
> 所以简历：如果您的 B->C 映射是强制性的（约束=true），Hibernate 将使用 C 代理，从而导致延迟初始化。但是如果你允许 B 没有 C，Hibernate 只需要在它加载 B 的那一刻检查 C 的存在。但是一个 SELECT 来检查存在是低效的，因为同一个 SELECT 可能不只是检查存在，而是加载整个对象。所以延迟加载消失了。

# c# - C# .net Remoting 客户端/服务器多线程聊天室

> ID：13386636
> 
> 赞同：0
> 
> 时间：2012-11-14T20:18:27.573
> 
> 标签：c#, .net, multithreading, client, remoting

我正在尝试让我的聊天系统正常工作。每个应用程序都有一个客户端/服务器启动。我让 Client1 与 Server 2 交谈，让 Client2 与 Server1 交谈，但我不知道如何将发送到服务器的信息打印到其相应客户端的聊天窗口。

聊天室

```
using System;
using System.Collections;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;
using System.Runtime.Remoting.Channels.Http;

namespace ChatRoom
{

public class Class1:MarshalByRefObject
{
    // initialize Arraylist to store users signed into chat room
    private static ArrayList userNames = new ArrayList();        
    private static string chatWindow; // fuck u, now ye be a static var

    public void sendMessage(string message)
    {
        Console.WriteLine(message);
        //if (message != null)
       // {                                
                //add to chat window
            chatWindow += message + Environment.NewLine;                 
        //}
    }
    //public void test()
    //{
    //    Console.WriteLine("pizza");
    //}
    public void addUserName(string UserName)
    {
        String test = UserName;
        Console.WriteLine(test);
        userNames.Add(test);
        Console.WriteLine("0");
    }

    public void deleteUserName(string userName)
    {
        if (userName != null)
        {
            userNames.Remove(userName);
        }
    }

    public ArrayList userList()
    {
        return userNames; // userNames
    }
    public string OutputWindow()
    {
        return chatWindow;
    }

}
} 
```

**服务器**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using ChatRoom;
using System.Runtime.Remoting.Channels.Http;
using RemoteServer;

namespace RemoteServer
{
    public partial class Form1 : Form
    {
    private int channelNum;
    private static string temp;

    public Form1()
    {
        InitializeComponent();
    }

    private void buttonConfirm_Click(object sender, EventArgs e)
    {

        temp = textBoxPort.Text;

        channelNum = Convert.ToInt32(temp);

        HttpChannel ServerChannel = new HttpChannel(channelNum);
        Console.WriteLine("httpChannel Set");

        this.Close(); // close GUI

        ChannelServices.RegisterChannel(ServerChannel, false);
        Console.WriteLine("channel registered");

        RemotingConfiguration.RegisterWellKnownServiceType(typeof(Class1), "ChatRoom",
            WellKnownObjectMode.SingleCall);
        Console.WriteLine("working");
        Console.WriteLine("Port number is " + channelNum);
        Console.ReadKey();

    }

}
} 
```

**客户**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using ChatRoom;
using RemoteServer;
using System.Collections;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Http;
using System.Threading;
using System.Diagnostics;
using System.Timers;

namespace ClientServerGui
{
    public partial class Form1 : Form
    {
    private Class1 server;
    private Thread thread;
    //private Thread thread2;
    //private HttpChannel ClientHttpChannel;
    private string UserName;

    public Form1()
    {
        InitializeComponent();
    }

    public static void Main(string[] args)
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }

    private void logoutToolStripMenuItem_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void ConfigureServer(string port)
    {
        HttpClientChannel ClientChannel = new HttpClientChannel();
        ChannelServices.RegisterChannel(ClientChannel, false);

        RemotingConfiguration.RegisterWellKnownClientType(typeof(Class1), "http://localhost:"
                + textBoxPort.Text + "/ChatRoom");
    }

    private void buttonSend_Click(object sender, EventArgs e)
    {
        //ArrayList displayUsers = server.userList();
        //string send = textBoxSend.Text;
        //textBoxChatWindowDisplay.Text += send;

        //combine User's name with input text
        string send = UserName + ": " + textBoxSend.Text;
        while( textBoxSend.Text != "")
        {
            //send message
            server.sendMessage(send);

            //Clear and focus to start new message
            textBoxSend.Clear();
            buttonSend.Focus();
        }

        textBoxChatWindowDisplay.Text += send;
        textBoxChatWindowDisplay.Text = server.OutputWindow();
        //textBoxChatWindowDisplay.Text += "\n";

        //listBoxUserList.Items.Clear();
        //    foreach (string x in displayUsers)
        //    {
        //        listBoxUserList.Items.Add(displayUsers);                    
        //    }

    }

    public void chatReloadTimer_Tick(object sender, EventArgs e)
    {

        textBoxChatWindowDisplay.Text = server.OutputWindow();
        StartServer();

    }

    private void buttonConnect_Click(object sender, EventArgs e)
    {
        //RemoteServer.Form1 port = new RemoteServer.Form1();

        //string Serverport = port.ServerPort(); 

        if (textBoxUserName.Text != "")
        {
            UserName = textBoxUserName.Text;
            //ClientHttpChannel = new HttpChannel();
            //ChannelServices.RegisterChannel(ClientHttpChannel, false);

            if (textBoxPort.Text == "")
            {
                textBoxPort.Text = "9000";
            }
            //server1
            ConfigureServer(textBoxPort.Text);
            //server2
           // ConfigureServer(Serverport);

            server = new Class1();
            //add user  
            server.addUserName(UserName);
            //server.test();
            //new thread
            thread = new Thread(new ThreadStart(StartServer));
            //start thread
            thread.Start();

            //new thread
            //thread2 = new Thread(new ThreadStart(StartServer2));
            //start thread
            //thread2.Start();

            buttonSend.Focus();

            System.Windows.Forms.Timer chatReloadTimer = new System.Windows.Forms.Timer();
            chatReloadTimer.Interval = (100); // .1 seconds refresh
            chatReloadTimer.Tick += new EventHandler(chatReloadTimer_Tick);
            chatReloadTimer.Start();
        }

    }

    private void StartServer()
    {
        string currentChatWindow;

        //set array list to capture people joining server
        ArrayList usersArrayList = server.userList();

        //** BAD FOR CHATROOM STYLE****
        //if (listBoxUserList.ItemHeight > 0)//if not enmpy kill all
        //{
        //    //empty listbox
        this.Invoke(new MethodInvoker(delegate() { listBoxUserList.Items.Clear(); }));
        //}

        // Add all users to listbox
        //while (usersAL != null)
        //{
        foreach (string x in usersArrayList)
            {
                //listBoxUserList.Items.Add(UserName);
                this.Invoke(new MethodInvoker(delegate() { listBoxUserList.Items.Add(x); }));
            }
        //}

        //display data to user
        currentChatWindow = server.OutputWindow();
        //textBoxChatWindowDisplay.Text = currentChatWindow;
        this.Invoke(new MethodInvoker(delegate() { textBoxChatWindowDisplay.Text = currentChatWindow; }));

        //listBoxUserList.Items.Add(
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        //Boolean on = true;
        Process start = new Process();

        start.StartInfo.FileName = "RemoteServer";
        start.Start();

        MessageBox.Show("Continue?", "Continue", MessageBoxButtons.OKCancel);

        //while (on == true)
        //{
        //    Thread.Sleep(1);
        //    textBoxChatWindowDisplay.Text = server.OutputWindow();
        //}
        buttonSend.Focus();
    }

}
} 
```

# javascript - 使用谷歌翻译开发谷歌浏览器扩展

> ID：13386637
> 
> 赞同：3
> 
> 时间：2012-11-14T20:18:38.880
> 
> 标签：javascript, json, rest, google-chrome-extension

嗨，我正在开发一个 Google Chrome 扩展程序：
它是一个使用 Google 翻译 API 的字典，
当用户在页面上选择一个文本时，我希望出现一个弹出窗口并显示所选的文本定义，

我的 js 文件中有这段代码：

```
var req = new XMLHttpRequest();
req.open(
    "GET",
    "https://www.googleapis.com/language/translate/v2?" +
    "format=html" +
    "q=" + get_text_selection() + // Source Text
"source=en&" + // Source Language
"target=fa&" + // Target Language
true);
req.send(null);

function get_text_selection() {

    if (window.getSelection)

    return window.getSelection();

    if (document.getSelection)

    return document.getSelection();

    if (document.selection)

    return document.selection.createRange().text;

    return '';

} 
```

我的 Manifest.json 文件中的这段代码：

```
{
  "name": "Google Translator",
  "version": "1.0",
  "manifest_version": 2,
  "description": "This Extention helps you to translate text in your page",
  "browser_action": {
    "default_icon": "Dictionary-Book-icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [ "http://*/*", "https://*/*", "tabs" ]
} 
```

我的html文件中的这段代码：

```
<!doctype html>
<html>
  <head>
    <title>Getting Started Extension's Popup</title>
    <style>
      body {
        min-width:357px;
        overflow-x:hidden;
      }

    </style>
    <!-- JavaScript and HTML must be in separate files for security. -->
    <script src="popup.js"></script>
  </head>
  <body>
  </body>
</html> 
```

但它不工作？
我的问题在哪里？
谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:10:26.177

首先`Google Translate API`是现在的[付费服务](https://developers.google.com/translate/)。要使用`Google Translate API`您需要获取一个`API key`from ，您可以从[这里](https://developers.google.com/translate/v2/using_rest#auth)`Google`获取更多信息。在你得到一个你应该像`API key``url`

```
"https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&source=en&target=fa&q=Hello%20world" // "Hello world" is query here 
```

这是你的情况

```
"https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY" + "&format=html" + "&source=en" +"&target=fa" + "&q=" + get_text_selection() 
```

使用以下请求（使用浏览器地址栏中的有效密钥）

```
"https://www.googleapis.com/language/translate/v2?key=my_valid_key&format=html&q=home&source=en&target=fa" // I've replaced my key with my_valid_key 
```

我有这个结果

```
{  "error": {   "errors": [    {
    "domain": "usageLimits",
    "reason": "dailyLimitExceeded",
    "message": "Daily Limit Exceeded"    }   ],
    "code": 403,   
    "message": "Daily Limit Exceeded"  
  }
} 
```

[谷歌翻译 API 不再免费](http://drupal.org/node/1215426)和[翻译 API 常见问题解答](https://developers.google.com/translate/v2/faq)。

# url - Replace.string 以 URL 作为参数

> ID：13386641
> 
> 赞同：0
> 
> 时间：2012-11-14T20:19:07.580
> 
> 标签：url, str-replace

下面我有这个代码：

```
string _strTemplate = _strDownloadTemplate + IDReq + "/" + _strFileName;
Uri url = new Uri(_strTemplate); 
```

如您所见，我正在将 strTemplate（它带有我需要通过电子邮件为用户发送的页面链接）转换为 URL 格式。我的电子邮件正文有几个字段，我用正确的值替换：

```
strMailMessage = strMailMessage.Replace("_LinkTemplate", url); 
```

我收到一个错误，因为方法 string.Replace 仅将字符串作为参数。有没有办法解决这个问题？我正在考虑通过我的页面（page.aspx）传递 URL 值，但如果有办法通过这种方法来做到这一点，那对我来说会更好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:24:31.373

假设这是 C# 和 .NET，是的，`String.Replace()`适用于字符串。

你试过了吗：

```
strMailMessage = strMailMessage.Replace("_LinkTemplate", url.ToString()); 
```

# javascript - 弹跳球游戏、鼠标检测事件、JavaScript

> ID：13386647
> 
> 赞同：0
> 
> 时间：2012-11-14T20:19:48.053
> 
> 标签：javascript, html, html5-canvas, coordinates, dom-events

我已经创建了一个弹跳球，它会从我指定的 HTML5 画布的墙壁上反弹。

我的目标是当指针（鼠标）悬停在球上时出现“游戏结束”屏幕。

我已经搜索并找到了一些关于 Javascript 中鼠标事件的教程，但我不确定如何将它们实现到我的代码中 =/。

任何帮助都会很棒。

```
<script>
var x = Math.floor((Math.random() * 600) + 1);
var y = Math.floor((Math.random() * 300) + 1);

var dx = 2;
var dy = 4;

function begin()
{
    gameCanvas = document.getElementById('gameCanvas');
    context = gameCanvas.getContext('2d');
    return setInterval (draw, 20);
}

begin();

function draw()
{
    context.clearRect(0,0,600,300);
    context.fillStyle = "#0000FF";
    context.beginPath();
    context.arc(x,y,80,0,Math.PI*2,true); 
    context.closePath();
    context.fill();

    if (x < 0 || x > 600) dx=-dx

    if (y < 0 || y > 300) dy=-dy;

    x += dx;
    y += dy;
}

gameCanvas.onmousemove = function (e)
{
    var gameCanvas = e.target;
    var context = gameCanvas.getContext('2d');
    var coords = RGraph.getMouseXY(e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:50:41.777

您需要通过检查球到光标的距离来检查鼠标是否悬停在球上（命中测试）。如果距离小于球的半径，则表示鼠标在球上。

请注意，您需要根据需要调整以下代码示例：

```
var mouse_x = 10, mouse_y = 10, ball_x = 10, ball_y = 10, ball_radius = 70, is_game_over = false

if( Math.sqrt( Math.pow( mouse_x - ball_x, 2 ) + Math.pow( mouse_x - ball_x, 2 )) < ball_radius && !is_game_over ) {
    console.log('Cursor is over the mouse, game over')
    is_game_over = true
} 
```

为每个帧更新执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:59:51.847

您可以将 onmousemove=SetValues() 添加到您的 body 元素中，如下所示：

```
<body onmousemove=SetValues()> 
```

并将您的代码更改为：

```
<script>
var x = Math.floor((Math.random() * 600) + 1);
var y = Math.floor((Math.random() * 300) + 1);

var dx = 2;
var dy = 4;

var mouseX;
var mouseY;

function setValues(e)
{
    mouseX = e.pageX; //get mouse x
    mouseY = e.pageY; //get mouse y
}

function begin()
{
    gameCanvas = document.getElementById('gameCanvas');
    context = gameCanvas.getContext('2d');
    return setInterval (draw, 20);
}

begin();

function draw()
{
    context.clearRect(0,0,600,300);
    context.fillStyle = "#0000FF";
    context.beginPath();
    context.arc(x,y,80,0,Math.PI*2,true); 
    context.closePath();
    context.fill();

    if (x < 0 || x > 600) dx=-dx

    if (y < 0 || y > 300) dy=-dy;

    x += dx;
    y += dy;

    //check if the mouse is on the ball
    var centerX = x + 80; //center of ball
    var centerY = y; //center of ball

    if(Math.pow((mouseX - centerX), 2) + Math.pow((mouseY - centerY), 2) <= 6400){
        //do whatever to end game
    }
} 
```

# pdf - pdf到可搜索的ps

> ID：13386648
> 
> 赞同：0
> 
> 时间：2012-11-14T20:19:48.030
> 
> 标签：pdf, ghostscript, postscript, poppler

我知道有人问过类似的问题，但找不到答案。我有一个使用 pdflatex 生成的 pdf 文件。它是可搜索的（您可以按 ctrl+f 并在其中搜索单词），并且它使用 hyperref 进行引用。我想用它制作一个ps文件。

我尝试了来自 gs 的 pdf2ps 和来自 poppler 包的 pdftops。两者都使文档像图片一样。你不能在里面搜索任何东西，而且 hyperrefs 也不起作用。

有什么办法可以制作一个 ps 文件，但至少让它可以搜索？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:36:51.213

为什么要在 PostScript 文件中“搜索”？PostScript 文件用于打印。

你所说的“超引用不起作用”是什么意思，你希望他们做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T13:11:40.453

考虑这个工具：[renderpdf](https://www.cairographics.org/cookbook/renderpdf/)

我不知道引文，但它使可搜索的后记文件

# module - OCaml 此函数应用于太多参数

> ID：13386652
> 
> 赞同：3
> 
> 时间：2012-11-14T20:20:06.570
> 
> 标签：module, ocaml

这只是我编写的一个简单程序，旨在更好地理解模块。我正在尝试调用该`toS`函数，`Id("a",Int)`但似乎我可以编写这样的类型 ast 。可能是什么问题？

```
module Typ =
struct
  type typ = Int | Bool
end

module Symbol =
struct
  type t = string
end

module Ast =
struct
  type ast = Const of int * Typ.typ | Id of Symbol.t * Typ.typ
  let rec toS ast = match ast with Id(a,b) -> "a"
    |_->"b"
end

Ast.toS Id("a",Int) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:26:58.300

您收到一个错误，因为您没有在函数应用程序中用括号括起您的类型构造函数。但是，您还必须通过定义它们的模块之外的完全限定名称来引用类型构造函数。即

```
Ast.toS (Ast.Id("a",Typ.Int)) 
```

或者，您可以打开模块。但这被认为是不好的做法。IE

```
open Id
open Typ
Ast.toS (Id("a",Int)) 
```

# java - 确定定期贷款支付

> ID：13386653
> 
> 赞同：-2
> 
> 时间：2012-11-14T20:20:19.920
> 
> 标签：java

我没有让这个程序正确显示我的分期付款我可以请一些帮助谢谢......

```
package Loops;

import java.util.Scanner;

/**
 *
 * 
 */
public class program {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        //variabled decleared
        double rate;
        double payment;
        //input
        System.out.print("Enter Loan Amount:");
        double principal = input.nextDouble();
        System.out.print("Enter Annual Interest:");
        double interest = input.nextDouble();
        System.out.print("Total payments per year:");//12=monthly,4= quartely,2=semi-annually and 1=annually
        double period = input.nextDouble();
        System.out.print("Enter Loan Length :");
        int length = input.nextInt();

        //proces
        double n = period * length;
        rate = interest / 100;
        double monthly_rate = rate / period;
        payment = principal * (principal * (monthly_rate * Math.pow((1 + monthly_rate), n)));

        System.out.printf("Your Monthly sum is %.2f", payment);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:34:56.400

```
principal = 50000; //Redacted. Eating my words.

period = 4;
length = 4;
n = 16;

rate = 0.085;
monthly_rate = 0.085 / 16 = 0.0053125;

payment = 50000 * 50000 * 0.0053125 * (1 + 0.0053125) ^ 16;
        = 2.5x10^9 * 0.0053125 * 1.088;
        = Something remainingly massive 
```

基本上......你的公式是错误的。你不需要*除以*功率商数吗？你在那个公式上的来源在哪里？

```
payment = principal * (rate + (rate / ( Math.pow(1 + rate, n) - 1) ) ); 
```

[来源](http://www.1728.org/loanform.htm)

例子：

```
payment = 50000*(0.085+(0.085/(1.085^16-1)))
= 5830.68 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:15:39.363

试试这个你的公式：

```
//this is how much a monthly payment is
payment = (rate + (rate / ((Math.pow(1 + rate), n) -1)) * principal 
```

这是基于公式的第一个谷歌结果之一。如果错误，请发布结果和预期答案。

我很确定您的公式刚刚结束，正如您在上面所说的那样，等式中应该有一个分母。

`You can use r* Math.pow ((1+r),n) to calculate the numerator and part of the denominator`

# r - 将图例添加到雷达图

> ID：13386656
> 
> 赞同：-1
> 
> 时间：2012-11-14T20:20:26.500
> 
> 标签：r, graphics, plot, legend

通过关注这个[线程](https://stackoverflow.com/questions/12025943/radarchart-axis-range-r-language)

我创建了一个雷达图。谁能建议我如何在该图中添加图例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:37:04.770

这是一个通用的图例，可以帮助您入门。您可以更改它以满足您的特定需求：

```
legend(-2,0,
       legend=c("V1","V2"),
       pch=c(15,16),
       col=c("blue","red"),
       lty=c(1,2)) 
```

前两个参数是图例的位置，根据绘图的 (x,y) 坐标。查看帮助以获取有关`legend`函数的各种参数的更多详细信息。

我认为你得到了反对票，因为你基本上要求别人为你做你的工作。将来，先尝试一些事情，看看您是否至少可以得到部分答案。然后，在你的问题中，解释你尝试了什么，具体来说，你想要完成什么。

# asp.net - 重写 ASP.NET 输出时“无效使用响应过滤器”

> ID：13386675
> 
> 赞同：3
> 
> 时间：2012-11-14T20:22:09.807
> 
> 标签：asp.net, filter, asp.net-mvc-4, httpexception

我有一个非常基本的 ASP.NET 响应过滤器，它工作“很好”。我用它来替换静态资源的域。

我在控制器中的代码如下所示：

```
 protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
            _cdnRewriter.Stream = filterContext.RequestContext.HttpContext.Response.Filter;
            filterContext.RequestContext.HttpContext.Response.Filter = _cdnRewriter;
    } 
```

而重写过滤器本身：

```
 public override void Write(byte[] buffer, int offset, int count)
    {
        var html = Encoding.Default.GetString(buffer, offset, count);

        //manipulate html

        byte[] outData = Encoding.Default.GetBytes(html);
        Stream.Write(outData, 0, outData.GetLength(0));
    } 
```

对于我网站上的某些页面（我还找不到押韵或原因），我可能在 90% 的情况下收到“HTTP Web 异常：响应过滤器的无效使用”。简单地刷新十几次就会得到正确的输出，但是再次刷新会出现异常：

```
[HttpException (0x80004005): Invalid use of response filter]
   System.Web.HttpResponseStreamFilterSink.VerifyState() +4097234
   System.Web.HttpResponseStreamFilterSink.Write(Byte[] buffer, Int32 offset, Int32 count) +28
   NeoSmart.Web.CdnRewriteFilter.Write(Byte[] buffer, Int32 offset, Int32 count) +452
   System.Web.HttpWriter.FilterIntegrated(Boolean finalFiltering, IIS7WorkerRequest wr) +359
   System.Web.HttpResponse.FilterOutput() +121
   System.Web.CallFilterExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +119
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +165 
```

我在响应过滤器中做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:48:36.550

我可能应该更清楚：不应共享响应过滤器。我在每个类中使用一个对象，每次`OnActionExecuted`调用该函数时都会创建一个新的响应过滤器来解决问题。

# regex - 不能写正则表达式

> ID：13386676
> 
> 赞同：1
> 
> 时间：2012-11-14T20:22:10.520
> 
> 标签：regex, perl

嗨，我需要获取 $submitkey 的值 mjxjezhmgrutgevclt0qtyayiholcdctuxbwb。我的代码有什么问题？

```
my $str = '<input type="hidden" value="set" name="fr.posted"></input><input type="hidden" value="mjxjezhmgrutgevclt0qtyayiholcdctuxbwb" name="fr.submitKey"></input><div class="form-actions form-actions__centrate"><button value="clicked" id="hook_FormButton_button_accept_request" onclick="className +=" button-loading"" class="button-pro form-actions__yes" type="submit" name="button_accept_request"><span class="button-pro_tx">Войти</span>';
($submitkey) = $str =~ m/value="(.*?)" name="fr.submitKey"/;
print $submitkey; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:26:59.663

永远不要使用`.*?`. 这从来都不是你真正想要做的。即使你让它工作，当没有匹配时，它也很可能产生极差的性能。在这种情况下，使用`[^"]*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:30:14.993

`.*?`不会导致 Perl 在整个字符串中搜索最短的匹配项。因此，匹配字符串前面的文本`.*?`，Perl 很高兴它在那里找到了匹配项。`.*?`仅仅意味着它从匹配之前部分的第一个点开始匹配尽可能少的字符`.*?`。

正如@ikegami 所说：`[^"]*`在您的特定情况下使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T20:30:29.960

您从第一个实例一直匹配`value`到`"fr.submitKey"`.

利用每个值都包含在引号中的事实；仅查找非引号字符作为`value`.

此外，使用特殊的捕获组变量更简洁：

```
my $str = '<input type="hidden" value="set" name="fr.posted"></input><input type="hidden" value="mjxjezhmgrutgevclt0qtyayiholcdctuxbwb" name="fr.submitKey"></input><div class="form-actions form-actions__centrate"><button value="clicked" id="hook_FormButton_button_accept_request" onclick="className +=" button-loading"" class="button-pro form-actions__yes" type="submit" name="button_accept_request"><span class="button-pro_tx">Войти</span>';
$str =~ m/value="([^"]*)" name="fr.submitKey"/;
$submitkey = $1;
print $submitkey; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-23T23:27:18.063

为这个任务使用真正的 DOM 解析器要好得多。我喜欢[Mojo::DOM](https://metacpan.org/module/Mojo%3a%3aDOM)，它是[Mojolicious](http://mojolicio.us)工具套件的一部分。请注意，`use Mojo::Base -strict`启用和。该方法使用 CSS3 选择器找到第一个匹配的实例。`strict``warnings``utf8``at`

```
#!/usr/bin/env perl

use Mojo::Base -strict;
use Mojo::DOM;

my $dom = Mojo::DOM->new(<<'END');
<input type="hidden" value="set" name="fr.posted"></input><input type="hidden" value="mjxjezhmgrutgevclt0qtyayiholcdctuxbwb" name="fr.submitKey"></input><div class="form-actions form-actions__centrate"><button value="clicked" id="hook_FormButton_button_accept_request" onclick="className +=" button-loading"" class="button-pro form-actions__yes" type="submit" name="button_accept_request"><span class="button-pro_tx">Войти</span>
END

my $submit_key = $dom->at('[name="fr.submitKey"]')->{value};
say $submit_key; 
```

# python - 使用 Python 和 Flask 流式传输数据

> ID：13386681
> 
> 赞同：47
> 
> 时间：2012-11-14T20:22:21.610
> 
> 标签：python, flask

我似乎无法弄清楚如何使用 Flask 的流媒体。这是我的代码：

```
@app.route('/scans/')
def scans_query():
    url_for('static', filename='.*')
    def generate():
        yield render_template('scans.html')
        for i in xrange(50):
            sleep(.5)
            yield render_template('scans.html', **locals())
    return Response(stream_with_context(generate())) 
```

在我的模板中：

```
<p>{% i %}</p> 
```

我想在页面上看到一个每半秒更改一次的计数器。相反，我得到的最接近的是在下一行打印出每个数字的页面。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-14T23:04:05.920

要替换页面上的现有内容，您可能需要 javascript，即，您可以发送它或让它为您发出请求，使用长轮询、websockets 等。有很多方法可以做到这一点，这里有一个使用[服务器发送事件](http://dev.w3.org/html5/eventsource/)的方法：

```
#!/usr/bin/env python
import itertools
import time
from flask import Flask, Response, redirect, request, url_for

app = Flask(__name__)

@app.route('/')
def index():
    if request.headers.get('accept') == 'text/event-stream':
        def events():
            for i, c in enumerate(itertools.cycle('\|/-')):
                yield "data: %s %d\n\n" % (c, i)
                time.sleep(.1)  # an artificial delay
        return Response(events(), content_type='text/event-stream')
    return redirect(url_for('static', filename='index.html'))

if __name__ == "__main__":
    app.run(host='localhost', port=23423) 
```

哪里`static/index.html`：

```
<!doctype html>
<title>Server Send Events Demo</title>
<style>
  #data {
    text-align: center;
  }
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
if (!!window.EventSource) {
  var source = new EventSource('/');
  source.onmessage = function(e) {
    $("#data").text(e.data);
  }
}
</script>
<div id="data">nothing received yet</div> 
```

如果连接丢失，浏览器默认在 3 秒内重新连接。如果没有更多要发送的内容，服务器可以返回 404 或仅发送`'text/event-stream'`内容类型以外的内容以响应下一个请求。即使服务器有更多数据，您也可以在客户端停止调用`source.close()`.

注意：如果流不是无限的，则使用其他技术（不是 SSE），例如，发送 javascript 片段来替换文本（无限`<iframe>`技术）：

```
#!/usr/bin/env python
import time
from flask import Flask, Response

app = Flask(__name__)

@app.route('/')
def index():
    def g():
        yield """<!doctype html>
<title>Send javascript snippets demo</title>
<style>
  #data {
    text-align: center;
  }
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<div id="data">nothing received yet</div>
"""

        for i, c in enumerate("hello"):
            yield """
<script>
  $("#data").text("{i} {c}")
</script>
""".format(i=i, c=c)
            time.sleep(1)  # an artificial delay
    return Response(g())

if __name__ == "__main__":
    app.run(host='localhost', port=23423) 
```

我在这里内联了 html 以表明它没有更多内容（没有魔法）。这里与上面相同，但使用模板：

```
#!/usr/bin/env python
import time
from flask import Flask, Response

app = Flask(__name__)

def stream_template(template_name, **context):
    # http://flask.pocoo.org/docs/patterns/streaming/#streaming-from-templates
    app.update_template_context(context)
    t = app.jinja_env.get_template(template_name)
    rv = t.stream(context)
    # uncomment if you don't need immediate reaction
    ##rv.enable_buffering(5)
    return rv

@app.route('/')
def index():
    def g():
        for i, c in enumerate("hello"*10):
            time.sleep(.1)  # an artificial delay
            yield i, c
    return Response(stream_template('index.html', data=g()))

if __name__ == "__main__":
    app.run(host='localhost', port=23423) 
```

哪里`templates/index.html`：

```
<!doctype html>
<title>Send javascript with template demo</title>
<style>
  #data {
    text-align: center;
  }
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<div id="data">nothing received yet</div>
{% for i, c in data: %}
<script>
  $("#data").text("{{ i }} {{ c }}")
</script>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T20:53:10.343

我想如果你要使用这样的模板，你可能需要使用`stream_template`这里给出的函数：http: [//flask.pocoo.org/docs/patterns/streaming/#streaming-from-templates](http://flask.pocoo.org/docs/patterns/streaming/#streaming-from-templates)

我没有对此进行测试，但它可能看起来像：

```
def stream_template(template_name, **context):
    app.update_template_context(context)
    t = app.jinja_env.get_template(template_name)
    rv = t.stream(context)
    rv.enable_buffering(5)
    return rv

@app.route('/scans/')
def scans_query():
    url_for('static', filename='.*')
    def generate():
        for i in xrange(50):
            sleep(.5)
            yield i
    return Response(stream_template('scans.html', i=generate())) 
```

# cql - nDepend 查询程序集中所有方 法的直接间接方法

> ID：13386682
> 
> 赞同：2
> 
> 时间：2012-11-14T20:22:25.150
> 
> 标签：cql, ndepend

我正在尝试使用 nDepend 提供的 CQL 检索程序集中所有方​​法的所有直接间接方法调用。问题是我无法遍历程序集中的所有方法来获取此信息。

DepthOfIsUsedBy 只允许字符串类型而不是字符串集合。

有没有办法为程序集中的所有方法获取此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:58:29.243

使用方法[DepthOfIsUsing()](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.Reserved.CQLinq.ExtensionMethodsCQLinqDependency~DepthOfIsUsing.html)而不是[DepthOfIsUsedBy()](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.Reserved.CQLinq.ExtensionMethodsCQLinqDependency~DepthOfIsUsedBy.html)怎么样:o)

```
from m in Assemblies.WithNameNotIn("nunit.uikit").ChildMethods() 
let depth0 = m.DepthOfIsUsing("nunit.uikit")
where depth0  >= 0 orderby depth0
select new { m, depth0 } 
```

该查询是通过下面的菜单生成的。[（顺便说一句，可以使用魔法方法FillIterative()](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.CodeModel.ExtensionMethodsHelpers~FillIterative.html)来阐述更复杂的解决方案，但这里没有必要）。

![在此处输入图像描述](../Images/bd2601b1ce2eb380d71235a49213d149.png)

* * *

考虑到 Prasad 的评论，对于 B 的每个方法，尝试这个列出来自 A 的所有直接和间接调用者的查询怎么样：

```
from m in Assemblies.WithNameIn("AsmB").ChildMethods()
where m.IsPubliclyVisible // Optimization
let indirectcallers = m.MethodsCallingMe
                      .FillIterative(
                          callers => callers.SelectMany(m1 => m1.MethodsCallingMe))
                      .DefinitionDomain
                      .Where(m1 => m1.ParentAssembly.Name == "AsmA")
                      .ToArray()  // Avoid double enumeration
where indirectcallers.Length > 0
orderby indirectcallers.Length descending
select new { m, indirectcallers } 
```

# yepnope - Yepnope js多个文件加载

> ID：13386684
> 
> 赞同：0
> 
> 时间：2012-11-14T20:22:25.947
> 
> 标签：yepnope

我有一个 js 文件列表：

*   1.js
*   2.js
*   3.js
*   4.js
*   5.js
*   6.js

ETC

我想按订单加载它，从 1 到 6。如果我这样做：

```
yepnope({
  load: '1.js',
  complete: function() {
    next();
  },
});
function next(){
yepnope({
  load: '2.js',
  complete: function() {
    next2();
  },
});
} 
```

我将编码嘲笑很多代码。有没有人有解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:33:31.600

[https://github.com/SlexAxton/yepnope.js/issues/10#issuecomment-722029](https://github.com/SlexAxton/yepnope.js/issues/10#issuecomment-722029)

yepnope 确实强制执行命令。它将同时下载所有 js 文件（以加快速度），但它会按照您提供的顺序执行它们

```
yepnope(['1.js','2.js','3.js','4.js','5.js','6.js']); 
```

# php - 仅使用 PHP while() 来返回前几个值。

> ID：13386687
> 
> 赞同：0
> 
> 时间：2012-11-14T20:22:31.160
> 
> 标签：php, pagination, while-loop

我正在使用 PHP while() 来获取数据库查询的结果。

```
while($results = mysql_fetch_array( $galleryresult )) { // show the results }; 
```

但是，如果结果超过一定数量，我想对结果进行分页。因此，例如，如果返回的条目超过 12 个，则只会显示前 12 个条目。

1) 我如何调整 while() 以便在第一页上只返回前 12 个条目。

2) 那么我该如何调整 while() 以便在第二页返回第 13-24 个结果，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:26:51.447

修改查询，使结果集中只有 12 个条目。这样您就不需要修改 while 循环。

向 URL 添加一个参数，告诉脚本应该在 SQL 查询中使用的偏移量。

创建一个计算结果总数的查询。使用它来确定应该在寻呼机中显示多少页。

# jquery - tinyMCE 将类添加到自动 标签

> ID：13386689
> 
> 赞同：3
> 
> 时间：2012-11-14T20:22:40.260
> 
> 标签：jquery, tinymce

在 tinyMCE 编辑器中，我自动输入的文本用 包裹`<p>`，这很好。我只想为它添加一个类`<p>`。

注意：我不想为所有 p 元素添加一个类，只是用户单击并开始输入的那个。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:27:48.177

为此，您应该使用 tinymce javascript API：

```
editor = tinymce.get('your_editor_id');
$(editor.selection.getNode()).parents('p:first').addClass('your_class'); 
```

这是一个非jquery解决方案：

```
editor = tinymce.get('your_editor_id');
editor.selection.getNode().closest("p:first").setAttribute("class", "your_class"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:40:18.127

试试这个：

```
var tmceIframe = $(".mceIframeContainer iframe")[0].contentDocument || $(".mceIframeContainer iframe")[0].contentWindow.document;

$(tmceIframe).find("p").addClass("test") 
```

或一行：

```
$($("iframe")[0].contentDocument || $("iframe")[0].contentWindow.document).find("p").addClass("test") 
```

在第二个示例中，我通过直接进入 iframe 使其更短，但是，如果您在页面上有多个 iframe，这可能是一个问题，您可能希望使用元素 id 来指定，例如在包装器上

# php - MySQL 错误 1064 - 但没有错误？

> ID：13386696
> 
> 赞同：-1
> 
> 时间：2012-11-14T20:23:10.983
> 
> 标签：php, mysql, database

我不明白这一点：

我将更新一个mysql数据库。

```
mysql_query("UPDATE image Set title = '".$ed1."', desc = '".$ed2."', cat = '".$ed3."', privacy = '".$ed4."' WHERE id = '".$id."'"); 
```

但它显示：

> 错误 1064

和：

> 您的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，了解在 desc = [...] 附近使用的正确语法

**编辑：** 感谢您的回复。我改名了！现在它起作用了；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:24:34.067

DESC 是 SQL 中的保留字。如果你想使用它，你需要引用它：

```
mysql_query("UPDATE `image` Set `title` = '".$ed1."', `desc` = '".$ed2."', `cat` = '".$ed3."', `privacy` = '".$ed4."' WHERE `id` = '".$id."'"); 
```

如果可以的话，你应该尽量避免使用保留字作为字段名；这里有一个列表：http: [//dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

您还应该考虑从`mysql_*`函数迁移，因为它们已被弃用。您应该考虑改用 PDO 或 mysqli - 它们都可以帮助您编写更安全的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:24:12.360

`DESC`是[MySQL 中的保留字](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。你需要用反引号来逃避它。尝试

```
UPDATE image Set title = '".$ed1."', `desc` = ... 
```

# c# - 验证失败时禁用保存按钮

> ID：13386698
> 
> 赞同：3
> 
> 时间：2012-11-14T20:23:13.807
> 
> 标签：c#, wpf, mvvm

正如您可能从标题中看到的那样，我要问一个以前被问过很多次的问题。但是，在阅读了所有这些其他问题之后，我仍然找不到解决问题的好方法。

我有一个带有基本验证的模型类：

```
partial class Player : IDataErrorInfo
{
    public bool CanSave { get; set; }

    public string this[string columnName]
    {
        get 
        { 
            string result = null;
            if (columnName == "Firstname")
            {
                if (String.IsNullOrWhiteSpace(Firstname))
                {
                    result = "Geef een voornaam in";
                }
            }
            if (columnName == "Lastname")
            {
                if (String.IsNullOrWhiteSpace(Lastname))
                {
                    result = "Geef een familienaam in";
                }
            }
            if (columnName == "Email")
            {
                try
                {
                    MailAddress email = new MailAddress(Email);
                }
                catch (FormatException)
                {
                    result = "Geef een geldig e-mailadres in";
                }
            }
            if (columnName == "Birthdate")
            {
                if (Birthdate.Value.Date >= DateTime.Now.Date)
                {
                    result = "Geef een geldige geboortedatum in";
                }
            }

            CanSave = true; // this line is wrong
            return result;
        }
    }

    public string Error { get { throw new NotImplementedException();} }
} 
```

每次属性更改时都会执行此验证（因此每次用户在文本框中键入字符时）：

```
<TextBox Text="{Binding CurrentPlayer.Firstname, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="137" IsEnabled="{Binding Editing}" Grid.Row="1"/> 
```

这很完美。验证发生（`PropertyChanged`绑定代码在 VM 中的 CurrentPlayer 属性上完成，该属性是 Player 的一个对象）。

我现在想做的是在验证失败时禁用保存按钮。

首先，似乎在这个线程中找到了最简单的解决方案：
[Enable Disable save button during Validation using IDataErrorInfo](https://stackoverflow.com/questions/6530529/enable-disable-save-button-during-validation-using-idataerrorinfo)

1.  如果我想遵循公认的解决方案，我必须编写两次验证代码，因为我不能简单地使用索引器。编写双重代码绝对不是我想要的，所以这不是我问题的解决方案。
2.  该线程上的第二个答案听起来非常有希望，但问题是我有多个必须验证的字段。这样，一切都依赖于最后检查的属性（因此，如果该字段正确填写，则为`CanSave`true，即使还有其他字段仍然无效）。

我发现的另一个解决方案是使用`ErrorCount`属性。但是，当我在每次属性更改时（以及在每个键入的字符处）进行验证时，这也是不可能的 - 我怎么知道何时增加/减少`ErrorCount`?

解决这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:04:04.123

这篇文章[http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-the-idataerrorinfo-interface-cs](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-the-idataerrorinfo-interface-cs)将单个验证移动到属性中：

```
public partial class Player : IDataErrorInfo
{
    Dictionary<string, string> _errorInfo;

    public Player()
    {
        _errorInfo = new Dictionary<string, string>();
    }

    public bool CanSave { get { return _errorInfo.Count == 0; }

    public string this[string columnName]
    {
        get 
        { 
            return _errorInfo.ContainsKey(columnName) ? _errorInfo[columnName] : null;
        }
    }

    public string FirstName
    {
        get { return _firstName;}
        set
        {
            if (String.IsNullOrWhiteSpace(value))
                _errorInfo.AddOrUpdate("FirstName", "Geef een voornaam in");
            else
            {
                _errorInfo.Remove("FirstName");
                _firstName = value;
            }
        }
    }
} 
```

（您必须处理 Dictionary`AddOrUpdate`扩展方法）。这类似于您的错误计数想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:34:10.617

我已经实现了[上面评论](https://stackoverflow.com/questions/13386698/disable-save-button-when-validation-fails/13387294#comment18284842_13386698)中显示的地图方法，在 C# 中，这称为[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)，我在其中使用[匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k(v=vs.80).aspx)进行验证：

```
partial class Player : IDataErrorInfo
{
    private delegate string Validation(string value);
    private Dictionary<string, Validation> columnValidations;
    public List<string> Errors;

    public Player()
    {
        columnValidations = new Dictionary<string, Validation>();
        columnValidations["Firstname"] = delegate (string value) {
            return String.IsNullOrWhiteSpace(Firstname) ? "Geef een voornaam in" : null;
        }; // Add the others...

        errors = new List<string>();
    }

    public bool CanSave { get { return Errors.Count == 0; } }

    public string this[string columnName]
    {
        get { return this.GetProperty(columnName); } 

        set
        { 
            var error = columnValidations[columnName](value);

            if (String.IsNullOrWhiteSpace(error))
                errors.Add(error);
            else
                this.SetProperty(columnName, value);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-20T17:52:02.063

这种方法适用于数据注释。您还可以将“IsValid”属性绑定到保存按钮以启用/禁用。

```
public abstract class ObservableBase : INotifyPropertyChanged, IDataErrorInfo
{
    #region Members
    private readonly Dictionary<string, string> errors = new Dictionary<string, string>();
    #endregion

    #region Events

    /// <summary>
    /// Property Changed Event
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    #endregion

    #region Protected Methods

    /// <summary>
    /// Get the string name for the property
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="expression"></param>
    /// <returns></returns>
    protected string GetPropertyName<T>(Expression<Func<T>> expression)
    {
        var memberExpression = (MemberExpression) expression.Body;
        return memberExpression.Member.Name;
    }

    /// <summary>
    /// Notify Property Changed (Shorted method name)
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="expression"></param>
    protected virtual void Notify<T>(Expression<Func<T>> expression)
    {
        string propertyName = this.GetPropertyName(expression);
        PropertyChangedEventHandler handler = this.PropertyChanged;
        handler?.Invoke(this, new PropertyChangedEventArgs(propertyName));
    }

    /// <summary>
    /// Called when [property changed].
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="expression">The expression.</param>
    protected virtual void OnPropertyChanged<T>(Expression<Func<T>> expression)
    {
        string propertyName = this.GetPropertyName(expression);
        PropertyChangedEventHandler handler = this.PropertyChanged;

        handler?.Invoke(this, new PropertyChangedEventArgs(propertyName));
    }

    #endregion

    #region Properties

    /// <summary>
    /// Gets an error message indicating what is wrong with this object.
    /// </summary>
    public string Error => null;

    /// <summary>
    /// Returns true if ... is valid.
    /// </summary>
    /// <value>
    ///   <c>true</c> if this instance is valid; otherwise, <c>false</c>.
    /// </value>
    public bool IsValid => this.errors.Count == 0;

    #endregion

    #region Indexer

    /// <summary>
    /// Gets the <see cref="System.String"/> with the specified column name.
    /// </summary>
    /// <value>
    /// The <see cref="System.String"/>.
    /// </value>
    /// <param name="columnName">Name of the column.</param>
    /// <returns></returns>
    public string this[string columnName]
    {
        get
        {
            var validationResults = new List<ValidationResult>();
            string error = null;

            if (Validator.TryValidateProperty(GetType().GetProperty(columnName).GetValue(this), new ValidationContext(this) { MemberName = columnName }, validationResults))
            {
                this.errors.Remove(columnName);
            }
            else
            {
                error = validationResults.First().ErrorMessage;

                if (this.errors.ContainsKey(columnName))
                {
                    this.errors[columnName] = error;
                }
                else
                {
                    this.errors.Add(columnName, error);
                }
            }

            this.OnPropertyChanged(() => this.IsValid);
            return error;
        }
    }

    #endregion  
} 
```

# xaml - Windows 8 Metro 应用程序 XAML - 单击时使自定义按钮闪烁？

> ID：13386703
> 
> 赞同：2
> 
> 时间：2012-11-14T20:23:24.023
> 
> 标签：xaml, button, windows-8, click

所以从[这个](http://www.syncfusion.com/downloads/metrostudio)免费软件中，我可以让自己成为我自己的地铁按钮，如下所示：

![在此处输入图像描述](../Images/a906624c3a2fb72c1d87e62c7197720d.png)

虽然图标是白色的，所以可能看不到它，我把它放在我的网格（用 XAML 编写）中： ![在此处输入图像描述](../Images/75774d1f583eb70abc9d7e32f13dec99.png)

在技​​术上它仍然是一个图像，所以我把它做成了按钮，这是一个将图像转换成按钮的代码：

```
<Button x:Name="Button_CreateAccount" Content="" HorizontalAlignment="Center" Height="65" Margin="0" Style="{StaticResource Button_CreateAccount}" Width="65" Click="Button_CreateAccount_Clicked"/> 
```

看到我将它命名为“Button_CreateAccount”，添加一个 Clicked 事件处理程序“Button_CreateAccount_Clicked”，并使用自定义样式“{StaticResource Button_CreateAccount}”

它按我的预期工作，但与任何其他按钮不同，它在按下时不会闪烁并在释放时释放闪烁，这可能是因为它在技术上是一个图像。所以我认为我可以通过更改其样式以编程方式使其在被按下时“闪烁”。这是 Blend 在 Visual Studio 2012 中自动添加的未编辑样式：

```
<Style x:Key="Button_CreateAccount" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Pressed"/>
                                <VisualState x:Name="Disabled"/>
                                <VisualState x:Name="PointerOver"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="PointerFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Image Source="Assets/Icons_White/add_user.png" Stretch="Fill"/>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

但是，我不会说 XAML 语言 :( 我不知道如何在按下后简单地更改图像背景的颜色。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:42:41.047

首先，您应该使图像具有透明背景而不是绿色背景。之后不要使用您的样式并将您的按钮更改为

```
<Button x:Name="Button_CreateAccount" HorizontalAlignment="Center" 
        Height="65" Margin="0" Width="65" Click="Button_CreateAccount_Clicked"
        Background="Green">
    <Image Source="Assets/Icons_White/add_user.png" Stretch="Fill"/>
</Button> 
```

从这里您将开始看到按下时的颜色变化。如果你想改变颜色，那么给按钮一个新的样式。最好的方法是使用 Visual Studio 或 Blend 并右键单击按钮（在设计视图或文档大纲中）并选择 Edit Template -> Edit a copy...

更改 Pressed VisualState 中的颜色以在按下按钮时更改颜色。

```
<VisualState x:Name="Pressed">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Border">
            <DiscreteObjectKeyFrame KeyTime="0">
                <DiscreteObjectKeyFrame.Value>
                    <SolidColorBrush Color="Blue"/>
                </DiscreteObjectKeyFrame.Value>
            </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonPressedForegroundThemeBrush}"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

# sql - 根据子项当前状态查询

> ID：13386704
> 
> 赞同：0
> 
> 时间：2012-11-14T20:23:24.943
> 
> 标签：sql, tsql

尝试编写查询以显示公司部门中服务的当前状态。我写的只是不起作用。我觉得我走错了方向。

```
SELECT MAX(v_StatusEvents.EventTimeStamp) as EventTimeStamp
    , MAX(v_StatusEvents.StatusTypeID) as StatusTypeID
    , v_StatusEvents.ServiceID
    , v_StatusEvents.StatusTypeDescription
    , v_StatusEvents.ServiceName
    , v_StatusEvents.CategoryName
FROM v_StatusEvents
WHERE v_StatusEvents.CategoryID = 100
    AND YEAR(v_StatusEvents.EventTimeStamp) = YEAR(getdate())
    AND MONTH(v_StatusEvents.EventTimeStamp) = MONTH(getdate())
    AND DAY(v_StatusEvents.EventTimeStamp) = DAY(getdate())
GROUP BY  v_StatusEvents.ServiceID
    , v_StatusEvents.StatusTypeDescription
    , v_StatusEvents.ServiceName
    , v_StatusEvents.CategoryName 
```

我有三个类别：（100 - 互联网，101 - 应用程序和 102 - 网络）。
每个类别都包含服务。
例如，我有三个属于 CATEGORY Internet 的服务：（50 - 内部，51 - 外部，52 - 开发）。
每个 SERVICE 将始终具有当前日期的至少一个状态记录。
CURRENT STATUS 将设置为三个不同的 STATUS TYPES 值之一：1 = 无问题，2 = 中断，3 = 严重。

我想显示今天每个类别的最高状态类型。

这是今天日期的示例记录集。

```
SeID   CatID    EventTimeStamp         SvcID  StatTypeID  
201     100     11/11/2012 12:01am     52     1     
202     100     11/11/2012 12:01am     51     1     
203     100     11/11/2012 12:01am     50     1     
204     100     11/11/2012 08:00am     51     3  
205     100     11/11/2012 10:50am     50     2     
206     100     11/11/2012 11:00am     50     1     
207     100     11/11/2012 11:25am     52     2 
```

如您所见，内部网站在上午 10:50 出现中断问题，但在上午 11:00 解决。

外部网站存在一个尚未解决的持续严重问题。我希望查询返回值 3，因为这是尚未解决的服务的最高当前状态。

（如果所有服务都“没有问题”，我希望查询返回值 1）

谢谢，
垃圾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:51:25.317

这就是我发现 CTE（通用表表达式）有用的地方。它们允许您将问题分解为可以轻松解决的步骤。让我们在这里应用它。

首先，获取每个服务/天的最大状态：

```
 SELECT CatID, SvcID, MAX(StatTypeID) As MaxStatus
 FROM v_StatusEvents
 WHERE EventTimeStamp >= cast(cast(current_timestamp as Date) as datetime)
 GROUP BY CatID, SvcID 
```

现在我们有了这些信息，我们可以找到今天发生这些事件的最近时间：

```
WITH StatusInfo As 
(
    SELECT CatID, SvcID, MAX(StatTypeID) As MaxStatus
    FROM v_StatusEvents
    WHERE EventTimeStamp >= cast(cast(current_timestamp as Date) as datetime)
    GROUP BY CatID, SvcID
)
SELECT se.CatID, se.SvcID, se.StatTypeID, MAX(EventTimeStamp) As EventTimeStamp
FROM v_StatusEvents se
INNER JOIN StatusInfo si ON se.CatID = si.CatID AND se.SvcID = si.SvcID AND se.StatTypeID = si.MaxStatus
WHERE EventTimeStamp >= cast(cast(current_timestamp as Date) as datetime) 
```

您可以选择使用序列 ID 在此处缩小范围，以防您可能有两个事件具有相同的服务时间戳。现在我们有了这些信息，我们可以再回到表中来选择我们可能想要的任何其他字段（在本例中为序列 ID）：

```
WITH StatusInfo As 
(
    SELECT CatID, SvcID, MAX(StatTypeID) As MaxStatus
    FROM v_StatusEvents
    WHERE EventTimeStamp >= cast(cast(current_timestamp as Date) as datetime)
    GROUP BY CatID, SvcID
), StatusAndTimeInfo As
(
    SELECT se.CatID, se.SvcID, se.StatTypeID, MAX(EventTimeStamp) As EventTimeStamp
    FROM v_StatusEvents se
    INNER JOIN StatusInfo si ON se.CatID = si.CatID AND se.SvcID = si.SvcID AND se.StatTypeID = si.MaxStatus
    WHERE EventTimeStamp >= cast(cast(current_timestamp as Date) as datetime)
)
SELECT se.*
FROM v_StatusEvents se
INNER JOIN StatusAndTimeInfo sati ON se.CatID = sati.CatID AND se.SvcID = sati.SvcID AND se.StatTypeID = sati.StatTypeID AND se.EventTimeStamp = sati.EventTimeStamp
WHERE EventTimeStamp >= cast(cast(current_timestamp as Date) as datetime) 
```

再次注意，您可能更喜欢在最后一次迭代中使用 SeID（我认为它是一个序列 ID）而不是时间戳。另请注意，这不是解决此问题的唯一方法，甚至可能不是最快的方法。事实上，可以只使用子查询或连接来重写它。但这是任何简单的方法，您可以使用它来获得有效的东西，并且以后可以很容易地理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:27:41.920

最终提出了以下解决方案：

SELECT (IsNull(MAX(tblStatusTypes.StatusTypeImgURL), (SELECT tblStatusTypes.StatusTypeImgURL FROM tblStatusTypes WHERE tblStatusTypes.StatusTypeID = 1))) FROM tblStatusTypes WHERE tblStatusTypes.StatusTypeID in (

```
SELECT MAX(StatusTypeID)
FROM
(   SELECT vse.StatusTypeID, vse.ServiceID, vse.EventTimeStamp
    FROM v_StatusEvents vse,
        (SELECT MAX(EventTimeStamp)AS MaxDate
            ,ServiceID
        FROM   v_StatusEvents 
        WHERE  EventTimeStamp >= Cast(Cast(CURRENT_TIMESTAMP AS DATE) AS DATETIME) 
        AND CategoryID = @CategoryID
        GROUP  BY ServiceID) MaxResults
    WHERE vse.ServiceID = MaxResults.ServiceID
    AND vse.EventTimeStamp = MaxResults.MaxDate
) MaxStatusType ) 
```

# c# - WPF WebBrowser 控件和 JavaScript window.open 参数

> ID：13386707
> 
> 赞同：3
> 
> 时间：2012-11-14T20:23:36.840
> 
> 标签：c#, javascript, wpf, browser, window.open

我有一个 WPF 应用程序，并且有一个包含`System.Windows.Controls.WebBrowser`控件的窗口。我已经连接了`DWebBrowserEvents2_NewWindow2EventHandler`, `DWebBrowserEvents2_ProgressChangeEventHandler`, `DWebBrowserEvents2_NavigateComplete2EventHandler`等事件。

使用 NewWindow2 或 NewWindow3 打开弹出窗口是可以的，但我真的希望能够尊重和实现底层 window.open() 调用的 features 参数，就像这里的第三个参数：

```
var newWindow = window.open('http://www.foo.com','myWindow', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); 
```

我已经阅读[了这个问题和答案](https://stackoverflow.com/questions/2737622/javascript-resizing-with-window-open-and-webbrowser-control)，并在网络上进行了为期 2 天的全面搜索，以寻找一个简单的（ish）实现，但我真正找到的只是[csexwb2 项目](http://code.google.com/p/csexwb2/)，这对我来说似乎有点矫枉过正。我不想用其他东西完全替换 WebBrowser 控件。我只想至少以`window.open()`调用指定的正确大小打开弹出窗口。

我根本找不到在 C# 中使用 WebBrowser 控件的[INewWindowManager::EvaluateNewWindow的简单、体面、完整的实现。](http://msdn.microsoft.com/en-us/library/bb775416%28VS.85%29.aspx)没有人必须执行此操作吗？我难住了。

# c# - WCF 无法序列化包装的消息

> ID：13386708
> 
> 赞同：0
> 
> 时间：2012-11-14T20:23:45.233
> 
> 标签：c#, wcf, web-services, serialization, soap

简而言之，我尝试使用 WCF*手动*构建 Web 服务使用者；这是 SOAP 响应：

```
<s:Body xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <AMethodResponse xmlns="http://v_namespace">
        <ReturnObjectHeader>
            <Field5>V5</Field5>
            <Field3>V5</Field3>
            <Field4>V5</Field4>
        </ReturnObjectHeader>
    </AMethodResponse>
</s:Body> 
```

很快，下面是我的 C# 代码中的相关部分（之后我展示了跟踪结果）：

```
[System.ServiceModel.MessageContractAttribute(WrapperName = "AMethodResponse", IsWrapped = true, WrapperNamespace = "http://v_namespace")]
public partial class ReturnObjectWrapper
{
    private ReturnObject _ReturnObjectHeader;

    [System.ServiceModel.MessageBodyMemberAttribute(Name = "ReturnObjectHeader", Namespace = "http://v_namespace")]
    public ReturnObject ReturnObjectHeader
    {
        get { return _ReturnObjectHeader; }
        set { _ReturnObjectHeader = value; }
    }
}

[System.ServiceModel.MessageContractAttribute(IsWrapped = false)]
public partial class ReturnObject
{
    private string _Field5;
    private string _Field3;
    private string _Field4;

    [System.ServiceModel.MessageBodyMemberAttribute(Name = "Field5", Namespace = "http://v_namespace")]
    public string Field5
    {
        get { return _Field5; }
        set { _Field5 = value; }
    }

    [System.ServiceModel.MessageBodyMemberAttribute(Name = "Field3", Namespace = "http://v_namespace")]
    public string Field3
    {
        get { return _Field3; }
        set { _Field3 = value; }
    }

    [System.ServiceModel.MessageBodyMemberAttribute(Name = "Field4", Namespace = "http://v_namespace")]
    public string Field4
    {
        get { return _Field4; }
        set { _Field4 = value; }
    }
} 
```

这是跟踪结果：

```
Description: An unrecognized element was encountered in the XML during deserialization which was ignored.
Element: http://v_namespace:Field5
NOTE: Same for Field4 and 3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:39:25.970

[在这个网站](http://rebuildall.umbraworks.net/2010/11/10/WCF_service_namespaces)上找到；添加`ServiceBehavior`属性对我有用，即：

```
[ServiceBehavior(Namespace="http://v_namespace")] 
```

# php - 使用涉及关系表的 mySQL 查询填充多维数组

> ID：13386710
> 
> 赞同：0
> 
> 时间：2012-11-14T20:23:47.377
> 
> 标签：php, mysql, json, relational-database

这对于专家来说可能相当简单，但作为新手，我需要帮助。我有以下三个表，其中包含项目和附件。我希望将这些数据填充到一个多维数组中，如下面的结果部分中给出的（JSON 格式）。

```
Tables - columns

items
- itemID
- itemTitle
- catID

attachments
- attachmentID
- itemID
- attachmentFilename 
```

考虑到数据库中有两个项目，第一个项目与 2 个附件相关，第二个项目与 3 个附件相关，这就是我希望看到的结果：

```
{
    "items": [{
        "item": {
            "itemID": "1",
            "itemTitle": "The first item",
            "attachments": [{
                "attachment": {
                    "attachmentFilename": "The First attachment.att",
                    "attachmentID": "1"
                },
                "attachment": {
                    "attachmentFilename": "The Second attachment.att",
                    "attachmentID": "2"
                }
            }]
        }
    },
    {
        "item": {
            "itemID": "2",
            "itemTitle": "The Second item",
            "attachments": [{
                "attachment": {
                    "attachmentFilename": "The Third attachment.att",
                    "attachmentID": "3"
                },
                "attachment": {
                    "attachmentFilename": "The Fourth attachment.att",
                    "attachmentID": "4"
                },
                "attachment": {
                    "attachmentFilename": "The Fifth attachment.att",
                    "attachmentID": "5"
                }
            }]
        }
    }]
} 
```

我想知道如何在 php 中进行编码，以便获得上述结果。非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:35:16.837

如果您真的得到要插入 JSON 的数据，请查看[json_decode](http://php.net/json_decode)。
将数据存储在变量中后，您可以使用[foreach](http://php.net/foreach)循环遍历它，并为每个循环适当地插入数据。

# deployment - SharePoint 2010 部署场 Web 部件丢失对解决方案中项目的引用

> ID：13386712
> 
> 赞同：1
> 
> 时间：2012-11-14T20:24:04.053
> 
> 标签：deployment, sharepoint-2010, reference, web-parts

我有一个 SharePoint Visual Studio 项目（SharePoint 2010、Visual Studio 2012），它部署为农场解决方案，而不是沙盒。解决方案中有几个其他类库具有强名称，并包含在“高级”选项卡下的包中。该项目构建良好。但是，当我部署它时，对其他 dll 的使用引用中断并且部署失败。

这是奇怪的部分：它只破坏了其中一个类库。

我的解决方案中有以下项目： * MyProject.View（带有可视化 Web 部件的 SharePoint 项目） * MyProject.Presenter（这是破坏的项目） * MyProject.Data * MyProject.Model

我设置了一个使用 MyProject.Model 类库的示例 Web 部件，一切都很好。但是当 .View 项目引用 .Presenter 库时，.Presenter 库会丢失对 .Model 和 .Data 的引用。

有人知道我应该检查什么吗？

# asp.net - GridView 中控件的丢失焦点事件

> ID：13386713
> 
> 赞同：0
> 
> 时间：2012-11-14T20:24:05.247
> 
> 标签：asp.net, events, gridview

我的 GridView 中有多个文本框和下拉列表。对于一个特定的文本框，我需要触发一个服务器事件，该事件从数据库中获取数据并将其填充到网格的其他列中。有没有一种简单的方法或稍微复杂的方法，如[这里详述](http://sbiefeld.com/2008/09/extending-the-aspnet-textbox-to-have-an-onblur-server-side-event/)

我在实施上述方法或考虑解决方法时没有问题，但后来认为网格控件中有 Cell Lost Focus 让我有点吃惊。我错过了什么吗？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:36:11.303

您可以设置`AutoPostBack`为 true 并处理它的`TextChanged`事件。

```
<asp:GridView ID="GridView1" runat="server"  EmptyDataText="It's Empty.">
    <Columns>
        <asp:TemplateField HeaderText="Name">
            <ItemTemplate>
                <asp:TextBox ID="txtName" 
                             runat="server" 
                             Text='<%#Eval("Name") %>' 
                             AutoPostBack="true"
                             OnTextChanged="NameChanged" >
                </asp:TextBox>
            </ItemTemplate>
         </asp:TemplateField>
     </Columns>
</GridView> 
```

在代码隐藏中：

```
protected void NameChanged(Object sender, EventArgs e)
{
    var txtName = (TextBox) sender;
    var row = (GridViewRow) txtName.NamingContainer;
    // you could find other controls in this GridViewRow via 
    // row.FindControl("ControlID") in case of a TemplateField or
    // row.Cells[0].Text (0 = index of column) in case of a BoundField
} 
```

# iphone - 当 UITableView 处于编辑模式时显示 UIButton

> ID：13386715
> 
> 赞同：0
> 
> 时间：2012-11-14T20:24:10.730
> 
> 标签：iphone, objective-c, uitableview, uibutton

当 UITableView 处于编辑模式时，我试图显示一个 UIButton，如下所示：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {
    NSLog(@"deleting :%i", indexPath.row);

        // Delete the managed object for the given index path
        NSManagedObjectContext *context = [fetchedResultsController managedObjectContext];
        [context deleteObject:[fetchedResultsController objectAtIndexPath:indexPath]];

        self.buttonAdd.hidden = FALSE;

        // Save the context.
        NSError *error = nil;
        if (![context save:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            exit(-1);
        }
    }
[self.table reloadData];
} 
```

但这不起作用，您有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:35:32.030

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    // Make sure you call super first
    [super setEditing:editing animated:animated];

    if (editing)
    {
         do your code
      //  self.editButtonItem.title = NSLocalizedString(@"Cancel", @"Cancel");
    }
    else
    {
              do your code
       // self.editButtonItem.title = NSLocalizedString(@"Edit", @"Edit");
    }
} 
```

# ios - 如何通过任何 iOS API 找到当前季节？

> ID：13386716
> 
> 赞同：1
> 
> 时间：2012-11-14T20:24:10.770
> 
> 标签：ios

无论如何，iOS 中是否可以找到当前位置的当前季节（春季、夏季、冬季、秋季）？

世界不同地区的季节不同。我可能会在澳大利亚经历不同的季节，而在美国的同一时间季节是另一回事。

任何天气 API 或返回那个地方季节的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-27T15:21:36.283

我需要在我的申请中知道当前的季节，我看到了你的帖子。

所以，即使它是一个旧帖子，也有我的答案和我的代码。

我得到用户的坐标并比较纬度以了解用户是在北半球（纬度在 0° 和 90° 之间）还是在南半球（纬度在 0° 和 -90° 之间）。之后，我确定了季节的日期并将日期与当前日期进行比较。

玩得开心 ：

```
- (void)currentSeason
{
    NSCalendar* myCalendar = [NSCalendar currentCalendar];
    NSDateComponents* components = [myCalendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit
                                                 fromDate:[NSDate date]];
    components.hour = 12;

    // Current year
    NSInteger currentYear = components.year;

    // Today
    NSDate *today = [NSDate date];

    // First Day of the year
    components.month = 1;
    components.day = 1;
    components.year = currentYear;
    NSDate *firstDayDate = [myCalendar dateFromComponents:components];

    // Spring Date
    components.month = 3;
    components.day = 21;
    components.year = currentYear;
    NSDate *springDate = [myCalendar dateFromComponents:components];

    // Summer Date
    components.month = 6;
    components.day = 21;
    components.year = currentYear;
    NSDate *summerDate = [myCalendar dateFromComponents:components];

    // Autumn Date
    components.month = 9;
    components.day = 23;
    components.year = currentYear;
    NSDate *autumnDate = [myCalendar dateFromComponents:components];

    // Winter Date
    components.month = 12;
    components.day = 22;
    components.year = currentYear;
    NSDate *winterDate = [myCalendar dateFromComponents:components];

    // Last Day of the year
    components.month = 12;
    components.day = 31;
    components.year = currentYear;
    NSDate *lastDayDate = [myCalendar dateFromComponents:components];

    // Current Location
    CLLocationManager *locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.distanceFilter = kCLDistanceFilterNone;
    [locationManager startUpdatingLocation];
    CLLocation *location = [locationManager location];
    CLLocationCoordinate2D coord = [location coordinate];

    // North Hemisphere
    if (coord.latitude > 0)
    {
        NSLog(@"North Pole");

        // Settings the background image
        if ([self isDate:today inRangeFirstDate:firstDayDate lastDate:springDate] || [self isDate:today inRangeFirstDate:winterDate lastDate:lastDayDate])
        {
            NSLog(@"Winter");
        }
        else if ([self isDate:today inRangeFirstDate:springDate lastDate:summerDate])
        {
            NSLog(@"Spring");
        }
        else if ([self isDate:today inRangeFirstDate:summerDate lastDate:autumnDate])
        {
            NSLog(@"Summer");
        }
        else if ([self isDate:today inRangeFirstDate:autumnDate lastDate:winterDate])
        {
            NSLog(@"Autumn");
        }
    }
    else
    {
        NSLog(@"South Pole");

        // Settings the background image
        if ([self isDate:today inRangeFirstDate:firstDayDate lastDate:springDate] || [self isDate:today inRangeFirstDate:winterDate lastDate:lastDayDate])
        {
            NSLog(@"Summer");
        }
        else if ([self isDate:today inRangeFirstDate:springDate lastDate:summerDate])
        {
            NSLog(@"Autumn");
        }
        else if ([self isDate:today inRangeFirstDate:summerDate lastDate:autumnDate])
        {
            NSLog(@"Winter");
        }
        else if ([self isDate:today inRangeFirstDate:autumnDate lastDate:winterDate])
        {
           NSLog(@"Spring");
        }
    }
}

- (BOOL)isDate:(NSDate *)date inRangeFirstDate:(NSDate *)firstDate lastDate:(NSDate *)lastDate
{
    return ([date compare:firstDate] == NSOrderedDescending) && ([date compare:lastDate] == NSOrderedAscending);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:30:15.773

首先获取用户当前位置的坐标：

```
CLLocationManager *lm = [[CLLocationManager alloc] init];
lm.delegate = self;
lm.desiredAccuracy = kCLLocationAccuracyBest;
lm.distanceFilter = kCLDistanceFilterNone; 
[lm startUpdatingLocation];
CLLocation *location = [lm location];
CLLocationCoordinate2D coord;
coord = [location coordinate]; 
```

然后获取当前日期：

```
NSDate* currentDate = [NSDate date]; 
```

这就是你所需要的，我想。确定用户是在赤道之上还是之下，并将季节变化的日期存储为常数。

# c# - C# - 调用具有所有默认参数的结构构造函数

> ID：13386719
> 
> 赞同：17
> 
> 时间：2012-11-14T20:24:20.043
> 
> 标签：c#, struct, optional-parameters, default-constructor

`struct`我今天在创建一个保存一堆数据时遇到了这个问题。这是一个例子：

```
public struct ExampleStruct
{
    public int Value { get; private set; }

    public ExampleStruct(int value = 1)
        : this()
    {
        Value = value;
    }
} 
```

看起来很好，花花公子。问题是当我尝试使用此构造函数而不指定值并希望对参数使用默认值 1 时：

```
private static void Main(string[] args)
{
    ExampleStruct example1 = new ExampleStruct();

    Console.WriteLine(example1.Value);
} 
```

此代码输出`0`和不输出`1`。原因是所有结构都有公共的无参数构造函数。所以，就像我如何调用`this()`我的显式构造函数`Main`一样，同样的事情发生在`new ExampleStruct()`实际调用`ExampleStruct()`但不调用的地方`ExampleStruct(int value = 1)`。因为它这样做了，所以它使用`int`0 的默认值作为`Value`.

更糟糕的是，我的实际代码正在检查该`int value = 1`参数是否在构造函数的有效范围内。将其添加到`ExampleStruct(int value = 1)`上面的构造函数中：

```
if(value < 1 || value > 3)
{
    throw new ArgumentException("Value is out of range");
} 
```

因此，就目前而言，默认构造函数实际上创建了一个在我需要它的上下文中无效的对象。任何人都知道我可以：

*   A. 调用`ExampleStruct(int value = 1)`构造函数。
*   B. 修改为`ExampleStruct()`构造函数填充默认值的方式。
*   C. 其他一些建议/选项。

另外，我知道我可以使用这样的字段而不是我的`Value`属性：

```
public readonly int Value; 
```

但我的理念是私下使用字段，除非它们是`const`or `static`。

最后，我使用 a`struct`而不是 a`class`的原因是因为这只是一个保存非可变数据的对象，在构造它时应该完全填充，当作为参数传递时，不应该`null`（因为它通过值作为 a `struct`) 传递，这就是 struct 的设计目的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-14T20:33:27.747

实际上，MSDN 有一些很好的指导`struct`

> 如果类型的实例很小且通常短暂存在或通常嵌入在其他对象中，请考虑定义结构而不是类。
> 
> 除非类型具有以下所有特征，否则不要定义结构：
> 
> 它在逻辑上表示单个值，类似于原始类型（整数、双精度等）。
> 
> 它的实例大小小于 16 字节。
> 
> 它是不可变的。
> 
> 它不必经常装箱。

请注意，它们是考虑*a*的考虑因素`struct`，它绝不是“这*应该*始终是一个结构”。这是因为选择使用 a`struct`可能会对性能和使用产生影响（正面和负面），因此应谨慎选择。

请特别注意，他们不推荐`struct`大于 16 字节的内容（这样复制的成本就会比复制引用的成本更高）。

`struct`现在，对于您的情况，除了创建一个工厂以在默认状态下为您生成一个或在您的属性中执行某种操作`trick`以使其在首次使用时进行初始化之外，实际上没有什么好的方法可以做到这一点。

请记住， a`struct`应该这样工作`new X()`== `default(X)`，也就是说，新构造的 a`struct`将包含 that 的所有字段的默认值`struct`。这很明显，因为 C#*不允许*您为 a 定义无参数构造函数`struct`，尽管奇怪的是它们允许默认所有参数而不发出警告。

因此，我实际上建议您坚持使用 a`class`并使其不可变，然后检查`null`它传递给的方法。

```
public class ExampleClass
{
    // have property expose the "default" if not yet set
    public int Value { get; private set; }

    // remove default, doesn't work
    public ExampleStruct(int value)
    {
        Value = value;
    }
} 
```

**但是**，如果您出于其他原因绝对*必须*拥有- 但请考虑复制演员等`struct`的成本- 您可以这样做：`struct`

```
public struct ExampleStruct
{
    private int? _value;

    // have property expose the "default" if not yet set
    public int Value
    {
        get { return _value ?? 1; }
    }

    // remove default, doesn't work
    public ExampleStruct(int value)
        : this()
    {
        _value = value;
    }
} 
```

请注意，默认情况下，`Nullable<int>`将是`null`（即`HasValue == false`），因此如果这是真的，我们还没有设置它，并且可以使用空合并运算符来返回我们的默认值`1`。如果我们*确实*在构造函数中设置了它，它将是非 null 并取而代之的是那个值......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:32:52.923

我不认为有这样的设计是`struct` `ExampleStruct`好的

```
default(ExampleStruct) 
```

即所有实例字段为零/假/空的值**不是**结构的有效值。如你所知，当你说

```
new ExampleStruct() 
```

`default(ExampleStruct)`这与并为您提供所有字段（包括来自自动属性的“生成”字段）为零的结构的值完全相同。

也许你可以这样做：

```
public struct ExampleStruct
{
  readonly int valueMinusOne;

  public int Value { get { return valueMinusOne + 1; } }

  public ExampleStruct(int value)
  {
    valueMinusOne = value - 1;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T20:35:44.197

我猜编译器实际上是在这里[http://msdn.microsoft.com/en-us/library/aa288208(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288208(v=vs.71).aspx)为结构选择自动默认 ctor ，而不是使用带有默认值的 ctor .

添加参考： [http](http://csharpindepth.com/Articles/General/Overloading.aspx) ://cshapindepth.com/Articles/General/Overloading.aspx （可选参数部分）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T22:08:39.343

尽管某些语言（如果没有其他语言，CIL）将允许定义一个结构构造函数，以便`new T()`将字段设置为“全零”默认值以外的其他内容，但 C# 和 vb.net（可能还有大多数其他语言）认为，因为数组元素和类字段之类的东西必须始终初始化为`default(T)`，并且由于将它们初始化为不匹配的东西`new T()`会令人困惑，因此结构不应定义`new T()`为`default(T)`.

我建议不要尝试在参数化构造函数中使用默认参数，而只需定义一个返回所需默认值的静态结构属性，并将每次出现的地方替换`new ExampleStruct()`为`ExampleStruct.NiceDefault;`.

**2015 年附录**

似乎 C# 和 VB.NET 可以放宽对定义无参数结构构造函数的禁令。这可能会导致语句喜欢`Dim s = New StructType()`分配`s`一个不同于赋予类型新数组项的值的值`StructType`。我并不是非常热衷于这种变化，因为它`new StructType`经常用于类似于 C# 的东西`default(StructType)`如果存在的话会更合适的地方。VB.NET 将允许`Dim s As StructType = Nothing`，但这似乎相当做作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T20:40:19.037

你为什么有`public ExampleStruct(int value = 1) : this()`？

不应该`public ExampleStruct(int value = 1)`吗？我认为这`:this()`是创建无参数构造函数。

# visual-studio - vs2012 web项目导入现有文件和文件夹

> ID：13386720
> 
> 赞同：4
> 
> 时间：2012-11-14T20:24:21.113
> 
> 标签：visual-studio, visual-studio-2012

如何将我硬盘上存在的现有网站（文件和文件夹）放入 VS2012 项目中？

我正在尝试突出显示资源管理器中的文件/文件夹并将其拖放到项目中，但这在 2012 年不起作用。

我正在尝试将现有网站导入空白网站项目，并且不希望 VS 添加的所有额外文件作为赢表单项目的一部分。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T20:28:57.257

在 VS2012 中`Solution Explorer`：

右键单击您的解决方案名称 > `Add`>`Existing Website`

您可以在此处选择现有的网站文件。

希望它能解决您的疑问。

# jquery-ui - 为什么不使用微调器小部件的工作时间？

> ID：13386723
> 
> 赞同：-1
> 
> 时间：2012-11-14T20:24:32.260
> 
> 标签：jquery-ui

我想使用来自：http: [//jqueryui.com/spinner/#time的时间微调器小部件](http://jqueryui.com/spinner/#time)

我从站点复制代码并粘贴到记事本中并将扩展文件转换为“.html”。但是，当我尝试使用它时，它不起作用。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:37:54.850

您粘贴到 HTML 文件中的标记包含多个未明确指定服务器名称的 URL：

```
<script src="/resources/demos/external/jquery.mousewheel.js"></script>
<script src="/resources/demos/external/globalize.js"></script>
<script src="/resources/demos/external/globalize.culture.de-DE.js"></script>

<link rel="stylesheet" href="/resources/demos/style.css" /> 
```

这些将无法正确解析，因为标记来自您的本地机器，而不是由 jQuery UI 的服务器提供服务。尝试预先添加方案和主机：

```
<script src="http://jqueryui.com/resources/demos/external/jquery.mousewheel.js"></script>
<script src="http://jqueryui.com/resources/demos/external/globalize.js"></script>
<script src="http://jqueryui.com/resources/demos/external/globalize.culture.de-DE.js"></script>

<link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css" /> 
```

# python - 元素未排序时的匹配列表

> ID：13386728
> 
> 赞同：1
> 
> 时间：2012-11-14T20:25:01.533
> 
> 标签：python, list, dictionary

假设我有一个列表`b=['m','NN']`和一个字典，如果列表的元素在`dict={'b':['NN','m','big']}`其中，我想使用该函数检索键 'b' （所以假设使用。现在，如果其中的元素没有排序，我该怎么做作为元素并假设我不能更改 b 列表中的顺序？谢谢！`b``dict[b]``[k for k,v in dict.items()]``b``dict[b]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:32:59.790

不确定我明白你在问什么，但如果你所追求的是字典中的键列表，`d`其值是 list 的超集`b`，你可以使用类似的东西：

```
b=['m','NN']
d={'b':['NN','m','big'], 'a':['jj','r']}
[k for k,v in d.items() if set(b) <= set(v)] 
```

（我将示例字典的名称更改为`dict`内置类。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:30:23.273

你可以做：

```
 [k for k, v in dict.items() if all((x in v) for x in b)] 
```

例如：

```
>>> b=['m','NN']
>>> dict={'b':['NN','m','big'], 'a':['NN', 'q']}
>>> [k for k, v in dict.items() if all((x in v) for x in b)]
['b'] 
```

（请注意，为您的字典命名是个坏主意`dict`，因为`dict`它是数据类型的名称）。

# android - 是否会在 hdpi/mdpi/ldpi 布局之间选择一个 Android 布局作为完整布局？

> ID：13386733
> 
> 赞同：2
> 
> 时间：2012-11-14T20:25:36.553
> 
> 标签：android, layout, resources, include, dpi

假设我在主要的非 DPI 特定布局资源文件夹中有一个布局，并且该布局执行一个`<include>`存在于 hdpi/mdpi/ldpi 文件夹中的子布局。我是否可以期望最终的膨胀布局根据设备 DPI 聚合 h/m/l-dpi 子布局，就像“完整”布局一样？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:48:54.017

虽然在发帖时我没有机会测试帖子的提议，但我有机会这样做，因此将回答我自己的问题，因为没有其他人这样做过。

是的，以下场景按预期工作（在 API 级别 8 测试）：

布局/main.xml：

```
... <include layout="@layout/included"/> ... 
```

布局/included.xml：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android">
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="GENERIC included fragment"/>
</merge> 
```

布局-ldpi/included.xml：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android">
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="LOW-DPI included fragment"/>
</merge> 
```

例如，在 QVGA 设备上运行应用程序会呈现一个视图，其中包含的部分根据需要来自 LDPI 目录，而非 LDPI 设备会从布局目录中获取默认部分。

# sql-server - 如何识别包含电话号码的记录

> ID：13386735
> 
> 赞同：1
> 
> 时间：2012-11-14T20:25:44.600
> 
> 标签：sql-server, tsql, phone-number

我需要识别我的数据库中包含电话号码的记录，以便我可以将它们发送给联系团队。

示例：tblData

*   ID
*   评论
*   dt创建

鉴于此表结构，查询可能是：

```
SELECT * FROM tblData WHERE comment [HeresWhereINeedHelp] 
```

评论可能（并且很可能会）包含各种其他数据。示例评论：

*是的，我有一个可怕的经历。我希望有人打电话给我 111.222.3333。谢谢你。*

应该在查询中提取包含此评论的记录，因为它包含电话号码。

我尝试了一个启用正则表达式搜索的扩展 SPROC，但性能很糟糕。系统是 SQL Server 2012。

非常感谢任何方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:32:00.337

你应该看看[`LIKE`运营商](http://msdn.microsoft.com/en-us/library/ms179859.aspx)。在您的情况下，您可能会寻求类似的东西

```
WHERE comment LIKE '%[0-9][0-9][0-9]_[0-9][0-9][0-9]_[0-9][0-9][0-9][0-9]%' 
```

由于您在字符串中的任何位置进行搜索，因此处理大型数据集也需要很长时间 - 您可能想要尝试的另一个选项是在输入电话号码时检查评论字段，然后使用标记该行这样的列`ContainsPhoneNumber (bit).`，您可以对该列进行索引并进行更快的查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:48:23.247

我将为存储为 10 位整数的电话号码创建一个单独的表。
运行一次正则表达式以解析出电话号码。
索引该列，您将获得索引搜索速度。

# java - 在 mysql java 中循环 - 搜索模板

> ID：13386737
> 
> 赞同：0
> 
> 时间：2012-11-14T20:25:52.770
> 
> 标签：java, mysql, while-loop

我在 mysql 中有一个表，其中包含一个名为模板的字段。我有一个模板存储在一个变量中，我需要将该变量与表中找到的每个其他模板进行比较，直到找到匹配项。我不知道如何一次从数据库行中检索一个模板，比较它，如果它不匹配，移动到下一行再次比较，依此类推，直到找到匹配。我是mysql循环的新手，请帮忙。

```
Connection con = null;

    try {
        Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb", "root", "");
        PreparedStatement st;
        st = con.prepareStatement("select template from tbl1 ");

        ResultSet result = st.executeQuery();

        while (result.next()) { 

     String dbTemplate = result.getString("template");
               if x == dbtemplate

                } else {// move to next row? How to say do the loop for next row in table??

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:29:13.917

请 SQL 为您检查，试试这个：

```
st = con.prepareStatement("select template from tbl1 where template = ?");
st.setString(1, "template_name"); 
```

那么你只会得到模板匹配的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:27:41.690

`result.next()`任何方式得到下一行。您需要做的就是在内部进行条件检查，如果条件满足，则只执行您想要的功能。

```
 while (result.next()) { 
               if(yourConditionSatisfied) {
              //All your logic goes here.  If you want to break the lookup, just add break here.      
            }

     } 
```

# drupal - Getting path to Drupal root while in module

> ID：13386739
> 
> 赞同：0
> 
> 时间：2012-11-14T20:25:55.250
> 
> 标签：drupal, drupal-6, drupal-modules

I am not sure if this is an issue with my current setup, or what I want to do.

I have a module that is programatically creating nodes in my Drupal 6 site, and within each I have to provide links in between various nodes.

I basically have a few `foreach` loops, and within each I have the current path.

For instance:

```
foreach ($page->category as $category) {
  $category_link = "category/" . $category['id'];

  // generate category pages
  ...
  $content = "<a href='$category_link'>".$category['name']."</a>";
  _create_node($content);

  foreach ($category->article as $article) {
    $article_link = $category_link . "/article/" . $article['id'];

    // generate article page
    $content = "<a href='$category_link'>".$category['name']."</a>";
    $content .= "<a href='$article_link'>".$article['name']."</a>";
    _create_node($content);
  }
} 
```

The issue that I'm seeing is that the link seems to be continually built up. For instance, in the main category pages it is fine (I'll see `category/1234`), and the article link will be fine, but the category link will seem to be longer than it should. Basically, I'll end up seeing:

```
category/1234/article/5678/category/1234 
```

My first thought was to make use of `$base_url` and just create absolute paths, however whenever I try printing that variable from my module it is completely empty. This is on a local server, however when I move it to production Drupal isn't installed at the root, so I can't simply add a slash to the front of the link.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:36:39.597

尝试使用`$GLOBALS['base_path']`获取基本路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T22:34:37.507

`$GLOBALS['base_path']`可以，但是您正在访问一个全局变量，该变量还包含一些内容，例如您的数据库连接信息和其他一些重要内容。因此，只要手指一滑，您就可以搞砸其他事情。我更喜欢`base_path()`做同样的事情，但更安全一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T10:15:33.180

利用

```
global $base_url; 
```

对于主题文件夹的路径，请使用

```
path_to_theme() 
```

您可以使用`base_path()`，但这不会为您提供域名。
基本网址将为您提供完整的网址，例如：**www.example.com**

`base_path()`将为您提供：**/**

`path_to_theme()`将为您提供：**sites/all/themes/yourthemename**

# c++ - Log4cplus char* and tstring issue with FileAppender

> ID：13386742
> 
> 赞同：1
> 
> 时间：2012-11-14T20:26:04.800
> 
> 标签：c++, log4cplus

I have two projects with almost the same configuration in visual studio 2010 One with the console works and gives no trouble with the statement

```
SharedAppenderPtr myAppender(new FileAppender("myLogFile.log")); 
```

While the other project a dll project gives trouble with the same statement

```
SharedAppenderPtr myAppender(new FileAppender("myLogFile.log")); 
```

The error message is:

> > Error 3 error C2664: 'log4cplus::FileAppender::FileAppender(const log4cplus::tstring &,std::ios_base::openmode,bool)' : cannot convert parameter 1 from 'const char [10]' to 'const log4cplus::tstring &'

Any suggestions on how I could resolve this issue ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:36:14.810

尝试`"myLogFile.log"`像这样包装：`LOG4CPLUS_TEXT("myLogFile.log")`. 您也可以使用`_T()`宏，因为您在 Windows 上使用 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:47:48.243

我不知道什么是类型`log4cplus::tstring`，但假设它是一种`typedef`类似于`std::basic_string<cT>`（甚至可能是除 之外`std::basic_string<cT>`的类型）的类型，您可以尝试以下其中一种：`cT``char`

```
SharedAppenderPtr app1(new FileAppender(L"myLogFile.log"));
std::string name("myLogFile.log");
SharedApppenderPtr app2(new FileAppender(log4cplus::tstring(name.begin(), name.end()))); 
```

# nservicebus - 处理程序中的递归 Bus.Send()（事务、线程、任务）

> ID：13386745
> 
> 赞同：3
> 
> 时间：2012-11-14T20:26:30.600
> 
> 标签：nservicebus

我有一个类似于以下的处理程序，它基本上响应一个命令并将一大堆命令发送到不同的队列。

```
 public void Handle(ISomeCommand message)
    {
        int i=0;
        while (i < 10000)
        {
            var command = Bus.CreateInstance<IAnotherCommand>();
            command.Id = i;
            Bus.Send("target.queue@d1555", command);
            i++;
        }
    } 
```

这个块的问题是，在循环完全完成之前，没有消息出现在目标队列或传出队列中。有人可以帮我理解这种行为吗？

此外，如果我使用任务在 Handler 中发送消息，如下所示，消息会立即出现。所以有两个问题，

1.  基于任务的发送立即通过的解释是什么？
2.  在消息处理程序中使用任务是否有任何后果？

    ```
    public void Handle(ISomeCommand message)
    {
        int i=0;
        while (i < 10000)
        {
            System.Threading.ThreadPool.QueueUserWorkItem((args) =>
            {
                var command = Bus.CreateInstance<IAnotherCommand>();
                command.Id = i;
                Bus.Send("target.queue@d1555", command);
                i++;
            });
        }
    } 
    ```

非常感谢您的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:13:36.677

**第一个问题：** 从队列中挑选一条消息，为其运行所有已注册的消息处理程序以及任何其他事务操作（如写入新消息或写入数据库）都在一个事务中执行。要么全部完成，要么都不完成。所以你看到的是预期的行为：从队列中挑选一条消息，处理 ISomeCommand 并写入 10000 个新的 IAnotherCommand 要么完全完成，要么什么都不做。要避免此行为，您可以执行以下操作之一：

1.  将您的 NServiceBus 端点配置为非事务性的

    ```
    public class EndpointConfig : IConfigureThisEndpoint, AsA_Publisher,IWantCustomInitialization
    {
        public void Init()
        {
            Configure.With()
                .DefaultBuilder()
                .XmlSerializer()
                .MsmqTransport()
                .IsTransactional(false)
                .UnicastBus();
        }
    } 
    ```

2.  将 IAnotherCommand 的发送包装在抑制环境事务的事务范围内。

    ```
    public void Handle(ISomeCommand message)
    { 
        using (new TransactionScope(TransactionScopeOption.Suppress)) 
        { 
            int i=0; 
            while (i < 10000) 
            { 
                var command = Bus.CreateInstance(); 
                command.Id = i; 
                Bus.Send("target.queue@d1555", command); 
                i++; 
            } 
        } 
    } 
    ```

3.  通过使用 System.Threading.ThreadPool.QueueUserWorkItem 或 Task 类自己启动一个新线程，在另一个线程上发出 Bus.Send。这是有效的，因为环境事务不会自动转移到新线程。

**第二个问题：**使用 Tasks 或我提到的任何其他方法的后果是您对整个事情没有交易保证。

产生5000条IAnotherMessage突然断电的情况如何处理？

如果您使用 2) 或 3) 原始 ISomeMessage 将不会完成，并且会在您再次启动端点时由 NServiceBus 自动重试。最终结果：5000 + 10000 个 IAnotherCommands。

如果您使用 1)，您将完全丢失 IAnotherMessage，最终只有 5000 个 IAnotherCommands。

使用推荐的事务方式，最初的 5000 个 IAnotherCommands 将被丢弃，原始的 ISomeMessage 返回队列并在端点再次启动时重试。净结果：10000 IAnotherCommands。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:18:35.830

如果内存提供服务，NServiceBus 会将对消息处理程序的调用包装在一个`TransactionScope`if 事务选项中，并且`TransactionScope`需要一些帮助以实现跨线程友好：

[TransactionScope 和多线程](https://stackoverflow.com/questions/673530/transactionscope-and-multi-threading)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:20:49.883

如果您想减少开销，您还可以捆绑您的消息。发送的签名是 Bus.Send(IMessage[]messages)。如果您可以保证不会破坏 MSMQ 的大小限制，那么您可以一次 Send() 所有消息。如果大小限制是一个问题，那么您可以将它们分块或使用数据总线。

# compiler-construction - YACC 输出什么？

> ID：13386746
> 
> 赞同：0
> 
> 时间：2012-11-14T20:26:36.667
> 
> 标签：compiler-construction, yacc, lex

我有一个下面列出的 lex 程序，它识别（词法分析）特定标记，并在从键盘输入时将它们输出到屏幕。我想使用 yacc 对下面的代码进行语法分析，但我不太明白这部分......输出会是什么样子？我的代码是否足够？我在网上读过很多关于yacc的文章……只需要有人给一个简单的解释。提前致谢...

```
/* Regular Definitions */
RelationalOp_1         "<"
RelationalOp_2      "<="
RelationalOp_3      "=<"    
RelationalOp_4      "=="
RelationalOp_5      "!="
RelationalOp_6      ">"
RelationalOp_7      ">="
RelationalOp_8      "=>"

%%

{RelationalOp_1}        {printf("(RelationalOp_1, %s)\n", yytext);}
{RelationalOp_2}        {printf("(RelationalOp_2, %s)\n", yytext);}
{RelationalOp_3}        {printf("(RelationalOp_3, %s)\n", yytext);}
{RelationalOp_4}        {printf("(RelationalOp_4, %s)\n", yytext);}
{RelationalOp_5}        {printf("(RelationalOp_5, %s)\n", yytext);}
{RelationalOp_6}        {printf("(RelationalOp_6, %s)\n", yytext);}
{RelationalOp_7}        {printf("(RelationalOp_7, %s)\n", yytext);}
{RelationalOp_8}        {printf("(RelationalOp_8, %s)\n", yytext);}

.                            printf("Invalid input: %s\n",yytext);

%%

main()
{
  yylex();
}

yywrap()
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:41:41.950

对您的问题的简短回答是否定的，您所拥有的对于使用 yacc 生成的解析器来说是不完整的。在您的 lex 生成的扫描器中，您希望向解析器提供内存中的令牌，而不是简单地向控制台写入内容。

为了理解上下文，[Pete Jinks 的讲义](http://www.cs.man.ac.uk/~pjj/cs212/ho/ho.html)很全面，展示了 lex 和 yacc 生成的程序如何协同工作。您还可以查看[Bison](http://www.gnu.org/software/bison/manual/html_node/index.html)的在线手册，它是 yacc 的 GNU 版本。

# java - How to add to this round button metal background in java?

> ID：13386749
> 
> 赞同：0
> 
> 时间：2012-11-14T20:26:50.780
> 
> 标签：java, swing, user-interface, awt, jbutton

How to give this button background to be as jbutton
i want to give this button metal color or grediant color how to make that?

```
import java.awt.*;
import java.awt.event.*; 
```

RoundButton - a class that produces a lightweight button.

Lightweight components can have "transparent" areas, meaning that you can see the background of the container behind these areas.

```
@SuppressWarnings("serial")
public class RoundButton extends Component {

ActionListener actionListener;     // Post action events to listeners
String label;                      // The Button's text
protected boolean pressed = false; // true if the button is detented.

/**
* Constructs a RoundButton with no label.
*/
public RoundButton() {
  this("");
}

/**
* Constructs a RoundButton with the specified label.
* @param label the label of the button
*/
public RoundButton(String label) {
  this.label = label;
  enableEvents(AWTEvent.MOUSE_EVENT_MASK);
}

/**
* gets the label
* @see setLabel
*/
public String getLabel() {
  return label;
}

/**
* sets the label
* @see getLabel
*/
public void setLabel(String label) {
  this.label = label;
  invalidate();
  repaint();
}

/**
* paints the RoundButton
*/
public void paint(Graphics g) {
  int s = Math.min(getSize().width - 1, getSize().height - 1);

  // paint the interior of the button
  if(pressed) {
  g.setColor(getBackground().darker().darker());
  } else {
  g.setColor(getBackground());
  }
  g.fillArc(0, 0, s, s, 0, 360);

  // draw the perimeter of the button
  g.setColor(getBackground().darker().darker().darker());
  g.drawArc(0, 0, s, s, 0, 360);
  // draw the label centered in the button
  Font f = getFont();
  if(f != null) {
  FontMetrics fm = getFontMetrics(getFont());
  g.setColor(getForeground());
  g.drawString(label,
           s/2 - fm.stringWidth(label)/2,
           s/2 + fm.getMaxDescent());
  }
}

/**
* The preferred size of the button. 
*/
public Dimension getPreferredSize() {
  Font f = getFont();
  if(f != null) {
  FontMetrics fm = getFontMetrics(getFont());
  int max = Math.max(fm.stringWidth(label) + 40, fm.getHeight() + 40);
  return new Dimension(max, max);
  } else {
  return new Dimension(100, 100);
  }
}

/**
* The minimum size of the button. 
*/
public Dimension getMinimumSize() {
  return new Dimension(100, 100);
}

/**
* Adds the specified action listener to receive action events
* from this button.
* @param listener the action listener
*/
public void addActionListener(ActionListener listener) {
    actionListener = AWTEventMulticaster.add(actionListener, listener);
    enableEvents(AWTEvent.MOUSE_EVENT_MASK);
 }

 /**
 * Removes the specified action listener so it no longer receives
 * action events from this button.
 * @param listener the action listener
 */
 public void removeActionListener(ActionListener listener) {
     actionListener = AWTEventMulticaster.remove(actionListener, listener);
 }

/**
* Determine if click was inside round button.
*/
 public boolean contains(int x, int y) {
   int mx = getSize().width/2;
   int my = getSize().height/2;
   return (((mx-x)*(mx-x) + (my-y)*(my-y)) <= mx*mx);
}

 /**
 * Paints the button and distribute an action event to all listeners.
   */
 public void processMouseEvent(MouseEvent e) {
   @SuppressWarnings("unused")
Graphics g;
   switch(e.getID()) {
      case MouseEvent.MOUSE_PRESSED:
    // render myself inverted....
    pressed = true;

        // Repaint might flicker a bit. To avoid this, you can use
        // double buffering (see the Gauge example).
    repaint(); 
    break;
      case MouseEvent.MOUSE_RELEASED:
    if(actionListener != null) {
       actionListener.actionPerformed(new ActionEvent(
       this, ActionEvent.ACTION_PERFORMED, label));
    }
    // render myself normal again
    if(pressed == true) {
    pressed = false;

            // Repaint might flicker a bit. To avoid this, you can use
            // double buffering (see the Gauge example).
    repaint();
    }
    break;
      case MouseEvent.MOUSE_ENTERED:

    break;
      case MouseEvent.MOUSE_EXITED:
    if(pressed == true) {
    // Cancel! Don't send action event.
    pressed = false;

            // Repaint might flicker a bit. To avoid this, you can use
            // double buffering (see the Gauge example).
    repaint();

    // Note: for a more complete button implementation,
    // you wouldn't want to cancel at this point, but
    // rather detect when the mouse re-entered, and
    // re-highlight the button. There are a few state
    // issues that that you need to handle, which we leave
    // this an an excercise for the reader (I always
    // wanted to say that!)
    }
    break;
   }
   super.processMouseEvent(e);
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T23:35:59.093

`java.awt.Component`不支持不透明度/透明度，只有 Swing 组件支持。

你应该花时间通读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [二维图形](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)
*   [编写事件监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)

你有很多问题要开始......

*   您应该从轻量级（Swing）组件扩展，因为它们支持透明度
*   不需要覆盖`processMouseEvent`，你应该使用 a`MouseListener`代替
*   你的`contains`方法应该考虑到按钮的“形状”
*   添加新侦听器时应使用内置事件管理 API
*   绘制轻量级组件时应优先`paintComponent`考虑`paint`
*   您必须`super.paintXxx`从您覆盖的任何绘制方法中调用，只有极少数情况下您不会调用，然后您将负责接管那里的工作
*   您需要通过调用将组件标记为透明`setOpaque(false)`

未按下/按下

![在此处输入图像描述](../Images/ee2b186132fde59be781487a00806283.png)![在此处输入图像描述](../Images/52ef2f058f667953209788b881abe527.png)

```
public class TestRoundButton {

    public static void main(String[] args) {
        new TestRoundButton();
    }

    public TestRoundButton() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.getContentPane().setBackground(Color.RED);
                frame.setLayout(new GridBagLayout());
                frame.add(new RoundButton(":)"));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class RoundButton extends JPanel {

        ActionListener actionListener;     // Post action events to listeners
        String label;                      // The Button's text
        protected boolean pressed = false; // true if the button is detented.

        private MouseListener listener;

        /**
         * Constructs a RoundButton with no label.
         */
        public RoundButton() {
            this("");
        }

        @Override
        public void addNotify() {
            super.addNotify();
            if (listener == null) {
                listener = new MouseHandler();
                addMouseListener(listener);
            }
        }

        @Override
        public void removeNotify() {
            removeMouseListener(listener);
            super.removeNotify();
        }

        /**
         * Constructs a RoundButton with the specified label.
         *
         * @param label the label of the button
         */
        public RoundButton(String label) {
            this.label = label;
            //...
            setOpaque(false);
            // Use a mouse listener instead
//            enableEvents(AWTEvent.MOUSE_EVENT_MASK);
        }

        /**
         * gets the label
         *
         * @see setLabel
         */
        public String getLabel() {
            return label;
        }

        /**
         * sets the label
         *
         * @see getLabel
         */
        public void setLabel(String label) {
            this.label = label;
            invalidate();
            repaint();
        }

        /**
         * paints the RoundButton
         */
        // Prefer paintComponent over paint...
        @Override
        protected void paintComponent(Graphics g) {
            // YOU MUST CALL super.paintXxx THERE IS NO EXCUSE NOT TO, EVER!!
            super.paintComponent(g);
            int s = Math.min(getSize().width - 1, getSize().height - 1);

            Graphics2D g2d = (Graphics2D) g.create();
            // paint the interior of the button
            g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
            g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
            g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
            g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);

            Color highlight = getBackground();
            if (pressed) {
                highlight = highlight.darker();
            }
            Color darklight = highlight.darker();

            LinearGradientPaint lgp = new LinearGradientPaint(
                    new Point(0, 0),
                    new Point(0, s),
                    new float[]{0, 1f},
                    new Color[]{highlight, darklight});

            Ellipse2D shape = new Ellipse2D.Float(0, 0, s, s);
            g2d.setPaint(lgp);
            g2d.fill(shape);

            // draw the perimeter of the button
            g2d.setColor(getBackground().darker().darker().darker());
            g2d.draw(shape);
            // draw the label centered in the button
            Font f = getFont();
            if (f != null) {
                FontMetrics fm = getFontMetrics(getFont());
                g2d.setColor(getForeground());
                g2d.drawString(label,
                        s / 2 - fm.stringWidth(label) / 2,
                        s / 2 + fm.getMaxDescent());
            }
            g2d.dispose();
        }

        /**
         * The preferred size of the button.
         */
        public Dimension getPreferredSize() {
            Font f = getFont();
            if (f != null) {
                FontMetrics fm = getFontMetrics(getFont());
                int max = Math.max(fm.stringWidth(label) + 40, fm.getHeight() + 40);
                return new Dimension(max, max);
            } else {
                return new Dimension(100, 100);
            }
        }

        /**
         * The minimum size of the button.
         */
        public Dimension getMinimumSize() {
            return new Dimension(100, 100);
        }

        /**
         * Adds the specified action listener to receive action events from this
         * button.
         *
         * @param listener the action listener
         */
        public void addActionListener(ActionListener listener) {
//            actionListener = AWTEventMulticaster.add(actionListener, listener);
//            enableEvents(AWTEvent.MOUSE_EVENT_MASK);
            listenerList.add(ActionListener.class, listener);
        }

        /**
         * Removes the specified action listener so it no longer receives action
         * events from this button.
         *
         * @param listener the action listener
         */
        public void removeActionListener(ActionListener listener) {
//            actionListener = AWTEventMulticaster.remove(actionListener, listener);
            listenerList.add(ActionListener.class, listener);
        }

        /**
         * Determine if click was inside round button.
         */
        public boolean contains(int x, int y) {
            // This needs to work more on the actual painted shape...
            int mx = getSize().width / 2;
            int my = getSize().height / 2;
            return (((mx - x) * (mx - x) + (my - y) * (my - y)) <= mx * mx);
        }
        /**
         * Paints the button and distribute an action event to all listeners.
         */
//        public void processMouseEvent(MouseEvent e) {
//            @SuppressWarnings("unused")
//            Graphics g;
//            switch (e.getID()) {
//                case MouseEvent.MOUSE_PRESSED:
//                    // render myself inverted....
//                    pressed = true;
//
//                    // Repaint might flicker a bit. To avoid this, you can use
//                    // double buffering (see the Gauge example).
//                    repaint();
//                    break;
//                case MouseEvent.MOUSE_RELEASED:
//                    if (actionListener != null) {
//                        actionListener.actionPerformed(new ActionEvent(
//                                this, ActionEvent.ACTION_PERFORMED, label));
//                    }
//                    // render myself normal again
//                    if (pressed == true) {
//                        pressed = false;
//
//                        // Repaint might flicker a bit. To avoid this, you can use
//                        // double buffering (see the Gauge example).
//                        repaint();
//                    }
//                    break;
//                case MouseEvent.MOUSE_ENTERED:
//
//                    break;
//                case MouseEvent.MOUSE_EXITED:
//                    if (pressed == true) {
//                        // Cancel! Don't send action event.
//                        pressed = false;
//
//                        // Repaint might flicker a bit. To avoid this, you can use
//                        // double buffering (see the Gauge example).
//                        repaint();
//
//                        // Note: for a more complete button implementation,
//                        // you wouldn't want to cancel at this point, but
//                        // rather detect when the mouse re-entered, and
//                        // re-highlight the button. There are a few state
//                        // issues that that you need to handle, which we leave
//                        // this an an excercise for the reader (I always
//                        // wanted to say that!)
//                    }
//                    break;
//            }
//            super.processMouseEvent(e);
//        }

        public class MouseHandler extends MouseAdapter {

            @Override
            public void mousePressed(MouseEvent e) {
                pressed = true;
                repaint();
            }

            @Override
            public void mouseReleased(MouseEvent e) {
                pressed = false;
                repaint();
            }

        }

    }
} 
```

现在，完成所有这些后，您可能想认真查看[javax.swing.AbstractButton](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html)作为基础组件

# php - Escape PHP Switch Variable String

> ID：13386752
> 
> 赞同：0
> 
> 时间：2012-11-14T20:27:03.390
> 
> 标签：php, escaping, switch-statement, case

In PHP, we can escape to HTML in a switch statement like this:

```
<?php
    switch($example) {
        case 'caseone': { ?> <p>Case one</p> <?php } break;
        case 'casetwo': { ?> <p>Case two</p> <?php } break;
    }
?> 
```

Also, we can set variables:

```
<?php
    switch($example) {
        case 'caseone': $text = 'Case one'; break;
        case 'casetwo': $text = 'Case two'; break;
    }
?> 
```

But how can we escape the variable string like in this pseudo code?

```
<?php
    switch($example) {
        case 'caseone': $text = { ?> Case one <?php } break;
        case 'casetwo': $text = { ?> Case two <?php } break;
    }
?> 
```

I'd like to output a lot of HTML this way, but I don't want to echo it in the switch because I have to build a string later containing the $text variable and more.

I might be a bit stupid here.

Thank you very much!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:29:31.730

这实际上非常简单。你是错的。你的第二个例子是你真正需要的。您不需要“转义”到 HTML 来构建字符串（特别是如果您`echo`以后想要它们）。如果您确实想消除任何 XSS 攻击的机会，您可以使用[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)转义 HTML。

```
<?php
    switch($example) {
        case 'caseone': $text = "HTML string here"; break;
        case 'casetwo': $text = "Other HTML string here"; break;
    }
echo $text;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:34:21.470

根据我从您的问题中了解到的情况，您希望能够将一大块可能包含 HTML 的文本分配给一个变量。最好的方法是使用 heredoc 语法，如下所示：

```
<?php
switch($example) {
    case 'caseone':
        $text = <<<EOT
Case one 
Some <a href="link">HTML</a>
EOT;
        break;
    case 'casetwo':
        $text = <<<EOT
Case two 
Some other <a href="link2">HTML</a>
EOT;
        break;
}
?> 
```

使用heredoc 语法，您无需转义任何内容；开始和结束标记之间的所有内容都被视为文字，因此您可以轻松地为文本分配单引号和双引号并使用插值。

# php - Extjs: I need to catch json exception into form submit response

> ID：13386754
> 
> 赞同：0
> 
> 时间：2012-11-14T20:27:05.507
> 
> 标签：php, json, extjs, overriding

I have a form submitting data and waiting for a json response but some errors/warnings/notices on PHP raises a javascript Exception when form tries to parse the responseText into JSON.

Is there a way to catch the error or perform my validation before form does?

I tried overriding Ext.JSON.decode, but for some reason form doesn't use that definition even when console error shows as follow

```
Uncaught Ext.JSON.decode(): You're trying to decode an invalid JSON String: my wrong json test!! ext-all.js:21
Ext.Error.Ext.extend.statics.raise ext-all.js:21
Ext.JSON.me.decode ext-all.js:21   <-- why Ext.JSON.[me].decode?
Ext.define.handleResponse ext-all.js:21
Ext.define.processResponse ext-all.js:21
Ext.define.onSuccess ext-all.js:21
Ext.apply.callback ext-all.js:21
Ext.define.onComplete ext-all.js:21
Ext.define.onStateChange ext-all.js:21
(anonymous function) 
```

Any idea? Thanks in advance.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T01:20:20.237

我知道，您的评论是正确的，但有时会突然出现服务器配置或意外问题，我希望最终用户可以发送错误或至少不会破坏应用程序。我找到了解决方法。覆盖 Ext.form.action.Submit 并将非 json 响应封装到有效的 json 对象中。之后，调用原来的onSuccess

```
Ext.override(Ext.form.action.Submit,{
    onSuccess: function( pResponse ){
        try{
            eval( "(" + pResponse.responseText + ')' );
        }catch(e){
            pResponse.responseText = '{ success: false, info: "' + pResponse.responseText.replace(/"/g, '\\"') + '" }';
        }
        this.callParent( arguments );
}
}); 
```

它可以工作，但请确保您在应用程序中运行此脚本一次。

# haskell - 使用 foldr 编写递归函数

> ID：13386757
> 
> 赞同：1
> 
> 时间：2012-11-14T20:27:24.093
> 
> 标签：haskell, lambda, fold

我是 Haskell 编程的新手。在练习时，我被要求制作一个如下所示的递归函数：

```
repeat1 5 [1,2,3] = [[1,2,3],[1,2,3],[1,2,3],[1,2,3],[1,2,3]] 
```

这是

```
repeat1 :: Int -> a -> [a]
repeat1 0 x = []
repeat1 num x = x : repeat1 (num-1) x 
```

我想把它转换成一个`foldr`函数，但我不能:(我已经从[http://en.wikibooks.org/wiki/Haskell/List_processing](http://en.wikibooks.org/wiki/Haskell/List_processing)
阅读了关于 lambda 函数和折叠（`foldr`和`foldl`）函数的信息

有人可以帮忙吗？
提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:58:34.720

`foldr`适用于使用列表的函数。对于生成列表，`unfoldr`是更自然的选择：

```
repeat1 :: Int -> a -> [a]
repeat1 n x = unfoldr f n
  where f 0 = Nothing
        f n = Just (x, n-1) 
```

也就是说，在这种情况下，我认为将其写为普通递归更清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T07:22:24.987

正如 hammar 指出的那样，`foldr`这不是正确的工具，因为您首先需要一个列表来处理。为什么不简单...

```
repeat1 n = take n . repeat 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:34:51.087

如果你真的想使用`foldr`，你可以这样做：

```
repeat' n x = foldr (\_ acc -> x:acc) [] [1..n] 
```

您基本上创建一个大小列表，`n`并`[1..n]`为该列表的每个元素添加`x`到您的累加器（基值`[]`）。最后你有一个 n 元素列表`x`。

# php - PHP - 递归搜索数组的键和子键，成功返回键['subkey]

> ID：13386760
> 
> 赞同：3
> 
> 时间：2012-11-14T20:27:32.507
> 
> 标签：php, arrays, recursion

所以我写了一个函数，它在一个数组的两层深处搜索一个键和子键对。基本上它正在寻找`key['subkey']`，如果找到，则返回`key['subkey']`。

我正在寻找一种以真正递归的方式执行此操作的方法，并根据需要搜索尽可能多的级别，直到它到达数组的末尾并被迫返回 false，或者找到值并返回它。

我在 PHP 方面完全是新手，我用谷歌搜索了几个小时没有结果。任何正确方向的指针将不胜感激。

这是功能：

```
function searchArray($array, $key, $subkey) {
    foreach ($array as $item){
        if (is_array($item) && isset($item[$key]) && isset($item[$key][$subkey])){
            return $item[$key][$subkey];
        } else {
            foreach ($item as $subitem){
                if (is_array($subitem) && isset($subitem[$key]) && isset($subitem[$key][$subkey])){
                    return $subitem[$key][$subkey]; 
                }
            }
        }
    }
} 
```

样本数组：

```
"locales" => array(
    "America" => array(
        "locations" => array(
            "us" => array(
                "title" => "United States",
                "lang" => "en_US",
            ),
            "gl" => array(
            )
        )
    ),
    "Europe" => array(
        "locations" => array(
            "at" => array(
                "title" => "&Ouml;sterreich",
                "lang" => "de_DE",
            ),
            "fr" => array(
                "title" => "France",
                "lang" => "fr_FR",
            ),
            "de" => array(
                "title" => "Deutschland",
                "lang" => "de_DE",
            ),
            "it" => array(
                "title" => "Italy",
                "lang" => "it_IT",
            ),
            "uk" => array(
                "title" => "United Kingdom",
                "lang" => "en_GB",
            )
        )   
    ),
    "Africa" => array(
        "locations" => array(
            "za" => array(
                "title" => "S&uuml;dafrika",
                "lang" => "en_ZA",
            )
        )
    ),
    "Asia &amp; Pacific" => array(
        "locations" => array(
            "au" => array(
                "title" => "Australia",
                "lang" => "en_AU",
            ),
            "cn" => array(
                "title" => "中国",
                "lang" => "zh_CN",
            ),
            "hk" => array(
                "title" => "香港",
                "lang" => "zh_CN",
            ),
            "jp" => array(
                "title" => "日本",
                "lang" => "jp_JP",
            ),
            "kr" => array(
                "title" => "한국",
                "lang" => "ko_KR",
            )
        )
    )
) 
```

调用`searchArray($siteOptions['locales'], 'us', 'lang')`应该返回`'en_US'`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:19:52.500

```
function walk($array, $key, $option) {
    if( !is_array( $array)) {
        return false;
    }
    foreach ($array as $k => $v) {
        if($k == $key && is_array($v) && isset($v[$option])){
            return $v[$option];
        }
        $data = walk($v, $key, $option);
        if($data != false){
            return $data;        
        }
    }

    return false;
}

echo walk($array, 'jp', 'lang'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:39:13.910

```
function searchArray($arr, $key, $subkey) {
    $it = new RecursiveIteratorIterator(new RecursiveArrayIterator($arr), RecursiveIteratorIterator::SELF_FIRST);
    $found = false;
    foreach($it as $k => $v) {
        if ($k == $key && !$found) $found = true;
        elseif ($k == $subkey && $found) return $v;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:30:34.223

尝试使用`array_walk_recursive()`：[http ://us1.php.net/function.array-walk-recursive](http://us1.php.net/function.array-walk-recursive)

默认情况下，它不会完全按照您的意愿行事；您必须编写一些代码来检查子键和诸如此类的东西。

# google-maps - 使用 kml 文件 2 时，Google 地图缩放会被覆盖

> ID：13386762
> 
> 赞同：0
> 
> 时间：2012-11-14T20:27:49.960
> 
> 标签：google-maps, google-maps-api-3, kml

我无法在 kml 地图上实现缩放，我使用的是此处给出的相同解决方案： [google-maps-zoom-gets-over-riden-when-using-a-kml-file](https://stackoverflow.com/questions/8187837/google-maps-zoom-gets-over-riden-when-using-a-kml-file)。你可以在这里看到我的 jsfiddle： [jsfiddle for kml map zoom](http://jsfiddle.net/xxast/16/)。如果我`preserveViewport: true`从该示例中删除，它将加载地图我没有得到地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:44:32.650

地图需要用中心初始化。如果您将 preserveViewport 设置为 false，则您目前没有这样做；您希望地图在哪里居中？

您的（有问题的）代码：

```
var myOptions = {
      zoom: 20,
      center: null,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

var map = new google.maps.Map(document.getElementById("kmlMapCanvas"), myOptions); 
```

要么明确设置中心，要么让 KmlLayer 为您完成。

从[文档](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)中：

*   center LatLng 初始地图中心。**必填**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:33:51.207

似乎它工作正常。：） 你确定吗？

# ajax - 使用 ajax 提交表单并保留会话

> ID：13386765
> 
> 赞同：0
> 
> 时间：2012-11-14T20:28:16.853
> 
> 标签：ajax, haskell, session-cookies, yesod

我在域 A 上有一个页面，其中包含来自域 B 的 javascript。该脚本使用 Ajax 从域 A 加载表单并将其发布回 A。

表单被 Yesod 拒绝，因为缺少会话变量，该变量位于 cookie 中，因此不会在 Ajax 请求中传输。

Yesod的会话机制能不能在这种情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:26:45.040

Yesod的作者Michael Shoyman给了我一个答案。就我而言，最简单的方法是禁用该特定表单的 CSRF 保护。有一个 api 函数。

[http://hackage.haskell.org/packages/archive/yesod-form/1.1.4.1/doc/html/Yesod-Form-Functions.html#v:runFormPostNoToken](http://hackage.haskell.org/packages/archive/yesod-form/1.1.4.1/doc/html/Yesod-Form-Functions.html#v:runFormPostNoToken)

# google-apps-script - 关于插入谷歌网站的应用程序脚本的安全问题

> ID：13386773
> 
> 赞同：0
> 
> 时间：2012-11-14T20:29:37.370
> 
> 标签：google-apps-script

我在谷歌站点中插入了一个谷歌应用程序脚本作为小工具。这个 GAS 实现了一个关于 html 服务的页面，旨在捕获用户数据并将其存储在另一个脚本的 ScriptDb 中。玩耍时，我注意到查看 google 站点的源代码，任何用户都可以通过显示在 Google 站点源上的 url 直接访问 GAS。我点击了这个链接，然后就有了 GAS！通过这个链接，我尝试将新数据保存到 ScriptDb，我发现幸运的是这是不可能的。这种行为不代表安全问题吗？我可以确定无法从此嵌入式链接修改 ScriptDb 数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:51:50.353

您的脚本创建的 ScritpDb 只能由该脚本的代码访问 - 仅仅因为您拥有已发布脚本的 URL，或者即使您有某种形式的代码也不能让您访问 ScriptDb。

但是，`doGet`如果您在传入某个可预测的参数时盲目地将所有数据转储到 HTML 输出中，那么这很糟糕。但这将被视为编程错误。

简而言之 - 如果您的 ScriptDb 使用适当的 Apps 脚本正确包装，那么对该 ScriptDb 的访问是安全的。

如果您围绕您担心可能不安全的内容分享一些代码，我可以澄清更多。

# orm - 在 Laravel 中使用 Eloquent ORM 使用 LIKE 执行数据库搜索

> ID：13386774
> 
> 赞同：96
> 
> 时间：2012-11-14T20:29:38.597
> 
> 标签：orm, laravel, eloquent, sql-like

我想使用 Eloquent 的主动记录构建来构建搜索查询，但这将是一个 LIKE 搜索。我找到了`User::find($term)`or `User::find(1)`，但这并没有生成类似的声明。我不是在寻找直接的答案，但如果有人至少能给我一个方向，那就太好了！

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-11-14T20:39:14.407

您可以使用 LIKE 使用以下语法进行数据库查找：

```
Model::where('column', 'LIKE', '%value%')->get(); 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-10-19T16:54:34.467

如果需要经常使用LIKE，可以稍微简化一下问题。可以在继承 Eloquent ORM 的模型中创建像 () 这样的自定义方法：

```
public  function scopeLike($query, $field, $value){
        return $query->where($field, 'LIKE', "%$value%");
} 
```

那么你可以这样使用这个方法：

```
User::like('name', 'Tomas')->get(); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-11-13T06:00:42.033

仅供参考，运算符列表（包含**like**和所有其他）在代码中：

```
/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php

protected $operators = array(
    '=', '<', '>', '<=', '>=', '<>', '!=',
    'like', 'not like', 'between', 'ilike',
    '&', '|', '^', '<<', '>>',
    'rlike', 'regexp', 'not regexp',
); 
```

免责声明：

Joel Larson 的回答是正确的。得到了我的支持。

我希望这个答案能更清楚地说明通过 Eloquent ORM 可用的内容（*指向正确的人*）。虽然指向文档的链接会**好得多**，但该链接已被证明是难以捉摸的。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-12-19T02:18:14.333

使用双引号而不是单引号，例如：

```
where('customer.name', 'LIKE', "%$findcustomer%") 
```

下面是我的代码：

```
public function searchCustomer($findcustomer)
{
    $customer = DB::table('customer')
                  ->where('customer.name', 'LIKE', "%$findcustomer%")
                  ->orWhere('customer.phone', 'LIKE', "%$findcustomer%")
                  ->get();

    return View::make("your view here");
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-30T21:44:13.763

如果您不喜欢像我这样的双引号，这将适用于单引号：

```
$value = Input::get('q');
$books = Book::where('name', 'LIKE', '%' . $value . '%')->limit(25)->get();

return view('pages/search/index', compact('books')); 
```

# python - Python：调用方法在 [pointer]> 处返回 <[object] 而不是 object

> ID：13386776
> 
> 赞同：3
> 
> 时间：2012-11-14T20:29:41.373
> 
> 标签：python, import, module, python-2.x

我是一个非常新手的程序员。我正在尝试使用模块`combinations`中的工具。`itertools`所以我尝试：

```
from itertools import *
print combinations('12345', 3) 
```

`('123', '124', '125', [...])`但我得到的不是预期的`<itertools.combinations object at [pointer]>`。我很困惑，因为在其他模块中调用方法会返回预期的结果，例如：

```
import random
print random.randrange(10)
>>> 9 
```

我对 itertools 模块做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:34:05.327

没有。结果是应该的。您显然没有考虑的是结果是一个迭代器，而不是一个完全评估的结果列表/元组。您看到的输出是`repr()`该对象的输出（它**不**返回字符串）。您可以通过将前者传递给`list`构造函数将前者转换为后者：

```
import itertools
print list(itertools.combinations('12345', 3)) 
```

但是当您不需要它并且您只是迭代这些值时，它不会同时存储所有结果，从而节省了大量内存。它还允许通过不消耗整个迭代器来避免工作（例如，找到满足某些条件的*第一个*组合然后返回）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T20:32:28.747

`itertools.combinations`返回一个可迭代的（您可以在 Python 文档中给出的[等效代码](http://docs.python.org/2/library/itertools.html#itertools.combinations)`yield`中看到关键字的使用）。如果要打印完整序列，可以使用。`list(combinations(...))`

```
>>> print list(combinations('12345', 3))
[('1', '2', '3'), ('1', '2', '4'), ('1', '2', '5'), ('1', '3', '4'), ('1', '3', '5' ('2', '3', '5'), ('2', '4', '5'), ('3', '4', '5')] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T21:06:13.070

那是一个迭代器。您可以将其转换为 a `list`or`tuple`使用`list(combinations('12345', 3))`or `tuple(combinations('12345', 3))`。

根据您的问题，我*认为*您可能对什么是序列、可迭代对象和迭代器有些困惑。我认为完全理解它们以便能够编写和/或理解 python 代码是很有用的，所以我会试着给你一个关于这个问题的解释。

和`list`对象`tuple`是*序列*。序列是支持某些特定操作的对象。即它们是*可迭代*的（你可以这样做`for elem in sequence`），它们支持“项目访问”（`sequence[key]`有效）它们具有“长度”（`len(sequence)`有效）并且您可以检查项目是否在序列中（`elem in sequence`有效）。[有构成“序列协议”的操作的[完整列表。](http://docs.python.org/2/c-api/sequence.html)唉，它是特定于 C-API 的。然而，这些函数的名称和解释应该让您了解它们支持的完整操作集]

在 python 中，还有另外两种对象在某些情况下可以用来代替序列：*iterables*和*iterators*。

可迭代对象是支持迭代的对象。说到python，如果一个对象有一个`__iter__`返回迭代器的方法，它就是可迭代的。

迭代器是一个对象，它在一个可迭代对象上迭代**一次**并一个一个地产生值。在 python 中，迭代器是一个实现`__iter__`and`__next__`方法的对象（`next`在 python2 中）。`__iter__` *通常*“什么都不做”，只是返回对象本身。该`next`方法返回迭代中的下一个值。

现在，`combinations('12345', 3)`是一个可迭代对象，这意味着您可以遍历它，但您无法使用`iterable[key]`语法访问它的项目，也无法使用`len`.

为什么要使用迭代器？在某些情况下，您可以避免将整个值序列放入内存以对其进行迭代。例如，如果您想遍历数字`1`，`100`则不必创建一个充满数字`list`的长度并对其进行迭代。`100`给出一个可以计算下一个相加的值`1`。

所以基本上可迭代是一种减少内存使用的方法，并且通常是“循环某些东西”所需的功能的抽象。如果你想要一个序列，你可以如前所述转换它们。

一种特殊的迭代器是所谓的*生成器*。生成器只是可以使用函数语法编写的迭代器，特别是它们使用`yield`关键字：

```
>>> def numbers(n):
...     while n > 0:
...             yield n
...             n -= 1
... 
>>> numbers(5)
<generator object numbers at 0xb744a93c>
>>> for elem in numbers(5):
...     print elem
... 
5
4
3
2
1 
```

如您所见，当您调用`numbers`代码时*未*执行。相反，python 创建了一个生成器对象，它是一个迭代器。当您迭代对象时，函数内的代码将被执行，直到`yield`遇到。发生这种情况时，返回“参数”`yield`并冻结执行。当新的迭代开始时，它会重新开始。

或许你可以在这个例子中更好地看到执行流程：

```
>>> def flow():
...     yield 'Execution stopped here'
...     yield 'Execution continues'
...     yield 'Execution ended'
... 
>>> generator = flow()
>>> next(generator)   #same as generator.__next__()
'Execution stopped here'
>>> next(generator)
'Execution continues'
>>> next(generator)
'Execution ended'
>>> next(generator)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration 
```

您可能有兴趣阅读提出它们的[PEP255 。](http://www.python.org/dev/peps/pep-0255/)实际上它们已经被扩展以提供协程功能，但我认为这已经足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T20:33:21.547

`itertools.combination`是一个类；因此，调用`itertools.combinations()`会返回该类的实例实例，可以对其进行迭代以获取值：

```
for combo in combinations('12345', 3):
    print combo 
```

# javascript - 嵌套函数中的回调

> ID：13386777
> 
> 赞同：0
> 
> 时间：2012-11-14T20:29:46.910
> 
> 标签：javascript, ajax, asynchronous, callback

我有一个调用另一个函数的函数，依此类推。

```
function A(args,callback){    
// make ajax request
//  on response 
    B()    
}

function B(args){

// make ajax request
//  on response 
    C()
}

function C(args){

  // make ajax request
  //  on response 
    D()
} 
```

我正在打十个ajax调用。两个问题...

1.  谁能解释一下什么是回调地狱？这是回调地狱吗？
2.  如果我在函数 D 中调用回调（），它会被调用吗？我没有将回调作为参数传递给我的其他函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:32:26.470

1.  我不知道**你**在叫什么*回调地狱*，但它是一个**意大利面条代码**的地狱。

> **什么是“回调地狱”？**
> 异步 javascript，或使用回调的 javascript，很难直观地做到正确。

[资源](http://callbackhell.com/)

2.不，`callback`里面没有定义，`D`所以你会得到一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:32:14.767

在里面`D()`没有办法调用`callback`，因为它没有在那里定义。我的意思是，只要您不传递`arguments`回调，那么您的`callback`变量就不会在`D()`. 回调地狱是回调相互调用的情况，这意味着`A()`调用`B()`和`B()`调用`A()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:32:59.837

我们可以在 JavaScript 中将函数引用作为参数传递，并使用该引用随时随地调用相关函数。

有关更多信息，请参阅此链接[http://recurial.com/programming/understanding-callback-functions-in-javascript/](http://recurial.com/programming/understanding-callback-functions-in-javascript/)

# mysql - mysql 在 MATCH 多列与 MATCH 单列上的全文性能

> ID：13386780
> 
> 赞同：3
> 
> 时间：2012-11-14T20:30:13.820
> 
> 标签：mysql, indexing, full-text-search, match

我想知道在我的桌子上实现全文搜索的有效方法。假设我有一个带有字段的表格，

```
FName LName FullName    webId   phoneNumber office searchField
bill  gates bill gates  bgates  1324343324  USA    bill.gates.bill gates.bgates.1324343324
steve jobs  steve jobs  sjobs   3453454646  UK     steve.jobs.steve jobs.sjobs.3453454646
steve gates steve gates sgates  3453451234  AUS    steve.gates.steve gates.sgates.3453451234 
```

搜索词可以匹配单个列，也可以是可以匹配多个列的关键字组合。

在 searchField 列（或）单个列上实现 FULLTEXT 索引然后查询会更好吗

`select * from TABLENAME where MATCH(FName,LName,webId,phoneNumber) AGAINST ('$search_str')`

或者`select * from TABLENAME where MATCH(searchField) AGAINST ('$search_str')`

哪一个是更好的实现？

# java - setOnClickListener 中的变量可见性

> ID：13386788
> 
> 赞同：0
> 
> 时间：2012-11-14T20:30:35.850
> 
> 标签：java, android, visibility, android-alertdialog

我想在按钮 A 中进行治疗时禁用按钮 B。

```
public class GoJump extends Activity{
    Button answerA, answerB;
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.jump);
answerA = (Button) findViewById(R.id.button_A);
answerB = (Button) findViewById(R.id.button_B);

    answerA.setOnClickListener(new OnClickListener() 
    {
                public void onClick(View v) 
                   {
                     // Do something
                     // Disable button B
                   }
    }); 
```

问题是按钮 B 在按钮 A 处理中不可见。我必须再次声明它以禁用它。有没有其他方法可以做？使变量在所有类中可见。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:33:00.760

在 onCreate() 之前初始化变量。

```
// Before onCreate
private Button b, b2;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b = (Button) findViewById(R.id.button);
    b2 = (Button) findViewById(R.id.button2);

    b.setOnClickListener(new OnClickListener() 
    {
            public void onClick(View v) 
            {
                b2.setEnabled(false);
            }
    });
{ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:38:06.907

你只需要`setEnabled`假。阅读这个[javadoc](http://developer.android.com/reference/android/widget/Button.html)。

```
 public void onClick(View v) 
                   {
                     answerB.setEnabled(false);
                   } 
```

# php - 数组中的项目位置

> ID：13386789
> 
> 赞同：0
> 
> 时间：2012-11-14T20:30:37.657
> 
> 标签：php

如果我有以下格式的 ID 号和数组，我如何找出 cat == 4 的所有其他项目中的计数（位置号）“红色”？我正在寻找的答案 #3 of 4\. Array ( [0] => stdClass Object ( [id] => 1 [cat] => 1 [que] => Description here.)

```
 [1] => stdClass Object
        (
            [id] => 2
            [cat] => 1
            [que] => Description here.
        )

    [2] => stdClass Object
        (
            [id] => 3
            [cat] => 1
            [que] => Description here.
        )
 ....

    [31] => stdClass Object
        (
            [id] => 32
            [cat] => 4
            [que] => Description here.
        )

    [32] => stdClass Object
        (
            [id] => 33
            [cat] => 4
            [que] => Description here.
        )
    [33] => stdClass Object
        (
            [id] => 34
            [cat] => 4
            [que] => Red.
        )

    [34] => stdClass Object
        (
            [id] => 35
            [cat] => 4
            [que] => Description here.
        )
) 
```

我需要拆分数组然后循环吗？丢失...

- - - - - 编辑 - - - - -

好吧，我解释得不好……

我的意思是：这个数组有很多对象。它们被分成组、类别。[cat] 是每个组的值。每个组中有多个项目。我希望得到的是每个组中的一些项目以及特定项目在该组中的位置，例如：12 个中的 4 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:38:36.343

```
$position = 0;
$counts = array();

foreach ($yourarray as $obj) {
    if (!isset($counts[$obj->cat])) $counts[$obj->cat] = 0;
    $counts[$obj->cat]++;
    if ($obj->cat == 4 && $obj->que == "Red") {
        $position = $counts[$obj->cat];
    }
}

if ($position >= 0) {
    echo "Object is $position out of $counts[4] objects in category 4\n";
}
foreach($counts as $key=>$val){
    echo "Category $key has $val objects.\n";
} 
```

（修改为计算所有类别）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:40:10.913

我对 Ian Shannon 的回答的编辑被拒绝了，所以这就是我的提议，它建立在他的基础上，使用对象表示法而不是数组表示法并跟踪总数。

我认为最简单的方法是使用 foreach 遍历数组，如果 cat == 4，则增加一个计数器，直到达到所需的值。像这样的东西：

```
$pos = 0;
$total = 0;
foreach ($yourarray as $subarray) {
    if ($subarray->cat == 4) {
        $total++;
        if ($subarray->que == "Red") {
            $pos = $total;
        }
    }
} 
```

`$pos`将是您要查找的元素的位置，并且`$total`将是该类别中的总数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:06:49.677

```
$found = 0;
foreach ($array as $key => $value) {
    if($value->cat == '4'){
        $arrayPosition = $key;
        $found++;
    }
}

echo 'Found ' . $found . ' cat\'s, matching the criteria'; 
```

不完全理解匹配条件应该是什么，除了 cat=4，如果 "que" 包含一些您想要匹配的更多信息，请更改 if 语句。

```
if($value->cat == '4' && $value->que == 'Red'){ 
```

# algorithm - Kamada & Kawai 图布局算法？

> ID：13386790
> 
> 赞同：5
> 
> 时间：2012-11-14T20:30:39.237
> 
> 标签：algorithm, layout, graph

有没有人尝试过 Kamada & Kawai 的 '88 算法来绘制一般无向图？

如果是这样，并且您知道其中的任何资源（除了论文本身），链接将不胜感激（如果有人知道任何简明的分步故障，则加分）。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T12:51:37.677

如果您**[在 Google Scholar 上搜索](http://scholar.google.de/scholar?q=An%20Algorithm%20for%20Drawing%20General%20Undirected%20Graphs&btnG=&hl=de&as_sdt=0,5)**Kamada 和 Kawai 的论文“绘制一般无向图的算法”的名称，第一次点击包含一个链接，该链接已损坏。但是，如果您单击[**版本**](http://scholar.google.de/scholar?cluster=3559379059294964525&hl=de&as_sdt=0)，您可以选择其他论文来源作为 PDF。这是[韦尔斯利学院的一个例子](http://cs.wellesley.edu/~cs315/Papers/Kamada-Graph%20Drawing.pdf)

这是我获取论文的工作流程：

1.  在谷歌学术搜索`<paper title>`
2.  检查所有版本
3.  查看作者的大学主页
4.  在谷歌搜索`"<paper title> pdf"`上搜索
5.  搜索我的大学图书馆的电子书部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T01:42:09.537

也许我参加聚会迟到了。[Cytoscape](http://www.cytoscape.org/)确实实现了这个算法。它在 layout --> Edge-weighted spring embedded 下可用。更多细节，查看 [算法实现的代码源](http://code.cytoscape.org/redmine/projects/cy3-impl/repository/revisions/ae36b88b1a5a8b06dd438dc17babcf3d6fe0bfdc/entry/layout-cytoscape-impl/src/main/java/csapps/layout/algorithms/bioLayout/BioLayoutKKAlgorithmTask.java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T16:03:40.370

还有[http://graphsharp.codeplex.com](http://graphsharp.codeplex.com)，它为 C# 提供了许多布局算法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-11T19:43:58.857

Kamada-Kawai 是在 igraph 中实现的（例如 R 包，尽管我相信您也可以将它用作 Python 库）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-12T16:17:27.310

甚至晚会，但 FTR C++ boost 库也有一个实现：

[http://www.boost.org/doc/libs/1_55_0/libs/graph/doc/kamada_kawai_spring_layout.html](http://www.boost.org/doc/libs/1_55_0/libs/graph/doc/kamada_kawai_spring_layout.html)

# ruby-on-rails-3 - Ruby on Rails 中的 UTF-8 与 ASCII-8BIT 编码不一致

> ID：13386791
> 
> 赞同：1
> 
> 时间：2012-11-14T20:30:42.497
> 
> 标签：ruby-on-rails-3, encoding, utf-8, ruby-on-rails-3.1, i18n-gem

我知道有很多关于 Rails 和编码的问题，但我无法找到关于这个特定问题的任何信息。

我有一个 Ruby on Rails 应用程序，使用`rails 3.1.3`并在`Jruby 1.6.7`. 我们同时支持英语和法语——我们使用`I18n`库/gem 来实现这一点。

示例翻译文件部分：

```
#---- config/locales/en.yml ----
en:
  button_label_verify: "Verify"

#---- config/locales/fr.yml ----
fr:
  button_label_verify: "Vérifier" 
```

在某些情况下，我收到以下编码错误：

```
Internal Server Error: Encoding::CompatibilityError incompatible character encodings: UTF-8 and ASCII-8BIT 
```

**情况1：**

```
#---- app/views/_view_page.html.erb ----
.....
<h3><%= get_button_label() %></h3>
....

#---- app/helpers/page_helper.rb ----
def get_button_label
    return I18n.t(:button_label_verify)
end 
```

这行得通 - 没有编码错误，法语和英语之间的翻译工作得很好。

**案例二：**

```
#---- app/views/_view_page.html.erb ----
.....
<h3><%= get_button_label() %></h3>
....

#---- app/helpers/page_helper.rb ----
def get_button_label
    return "#{I18n.t(:button_label_verify)}"
end 
```

然而，这不起作用。唯一的区别是返回的值包括字符串中带有计算代码*的*字符串，而不是类似的东西

```
return "string " + I18n.t(:button_label_verify) 
```

*注意：*以上内容也不会导致错误 - 编码问题仅在计算的 I18n 翻译**在**引号中时出现。

**案例3：**

```
#---- app/views/_view_page.html.erb ----
.....
<h3><%= "#{I18n.t(:button_label_verify)}" %></h3>
.... 
```

这不会导致错误......所以问题似乎与字符串中的动态代码（带有法语字符）有关，除了打印出从帮助函数返回的字符串之外。

我知道如何解决这个问题/修复它 - 但我想知道是否有人可以提供一些关于为什么会这样的见解 - 这样做有什么好的理由吗？IMO，当您进入低级别时 - 打印出一个字符串就是打印出一个字符串，所以我不明白一种方式如何导致错误，而另一种方式不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:06:23.880

推杆

```
#encoding: utf-8 
```

在包含 ascii 扩展字符的文件顶部应该修复与编码相关的问题（至少来自项目文件的问题......）

我不知道为什么在使用插值时它对助手不起作用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:05:19.707

有时您需要为文件设置 KCODE 环境变量（这对于 ruby​​ 1.8 兼容性很重要）：

```
# encoding: UTF-8
$KCODE = 'UTF8' unless RUBY_VERSION >= '1.9' 
```

也可能是您的文件未以 UTF-8 编码。为此，您需要的不仅仅是明文标题。在 Eclipse 中，当您*另存为*文件时，它隐藏在*首选项 -> 常规 -> 编辑器 -> 拼写和记事本和大多数 Windows 程序下。*该命令是在 Linux 上执行此操作的一种方式，但我相信还有其他方式。我数不清有多少次我看到一个文件说它是 UTF-8，但它实际上是一些其他编码，因为 UTF-8 的功能类似于 ASCII 用于 8 位字符，所以在检查之前你不会经常注意到问题十六进制编辑器中的标题。*`enca`*

 *请花一些时间阅读有关文件编码的信息：

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求](http://www.joelonsoftware.com/printerFriendly/articles/Unicode.html)
*   [为什么 perl 不使用 UTF-8](https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default/6163129#6163129)
*   [每个角色都有一个故事#4：U+feff（替代标题：UTF-8 是 BOM，伙计！）](http://www.siao2.com/2005/01/20/357028.aspx)

正确地做到这一点非常重要，它可以在您移植到东亚语言时为您节省很多痛苦（您应该始终计划这样做！）*

# python - CGI 脚本不可执行

> ID：13386795
> 
> 赞同：3
> 
> 时间：2012-11-14T20:31:00.630
> 
> 标签：python, http, webserver, cgi

在我的一个家庭作业实践中，我必须启动一个网络服务器，当我访问网络服务器的根目录时，它会执行一个 CGI 脚本。

但是当我打开 localhost:8080 时，会出现以下错误消息：

```
Error code 403.

Message: CGI script is not executable ('/cgi-bin/todolist.cgi').

Error code explanation: 403 = Request forbidden -- authorization will not help. 
```

我的服务器代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os
import sys
import getopt
import logging
import BaseHTTPServer
from CGIHTTPServer import CGIHTTPRequestHandler
import json
from DBBackend import TodoDao

# CRUD to REST conventions
# POST   Create
# GET    Retrieve
# PUT    Update
# DELETE Delete

"""
API REST del servidor.

GET /todos        - Recupera la lista de tareas (ToDos)
DELETE /todos/id  - Elimina la tarea con el id especificado
POST /todos       - Añade una nueva tarea con los valores especificados como parámetros
PUT /todos/id     - Actualiza los valores espcificados en los parámetros para la tarea con
                    el id dado

Tanto los parámetros (en el cuerpo de la petición) como las respuestas son en formato JSON.
"""

logging.basicConfig(level=logging.DEBUG)

class RESTHTTPRequestHandler(CGIHTTPRequestHandler):

    dao = TodoDao()
    res_string = dao.tableName
    res_path = "/" + res_string

    def _GET(self):
        if self.path == self.res_path:
            tasks = self.dao.findTasks()
            return {'code': 'ok', 'data': tasks}
        else:
            _,res,id = self.path.split("/")
            int(id)
            assert(res==self.res_string)
            data = self.dao.retrieveTask(id)
            return {'code': 'ok', 'data': data}

    def _POST(self):
        assert(self.path == self.res_path)
        if 'Content-length' in self.headers:
            data = json.loads(self.rfile.read(int(self.headers['Content-length'])))
        else:
            data = json.load(self.rfile)
        self.dao.createTask(data)
        return {'code': 'ok'}

    def _PUT(self):
        _,res,id = self.path.split("/")
        int(id)
        assert(res==self.res_string)
        if 'Content-length' in self.headers:
            data = json.loads(self.rfile.read(int(self.headers['Content-length'])))
        else:
            data = json.load(self.rfile)
        self.dao.updateTask(id, data)
        return {'code': 'ok'}

    def _DELETE(self):
        _,res,id = self.path.split("/")
        int(id)
        assert(res==self.res_string)
        self.dao.deleteTask(id)
        return {'code': 'ok'}

    def _send(self, data):
        response = json.dumps(data)
        self.send_response(200)
        self.send_header("Content-type", "application/json")
        self.send_header("Content-Length", len(response))
        self.end_headers()
        self.wfile.write(response)

    # El BaseHTTPRequestHandler no está pensado para ésto :(
    def do_POST(self):
        self._reroute()
    def do_PUT(self):
        self._reroute()
    def do_GET(self):
        self._reroute()
    def do_DELETE(self):
        self._reroute()
    def _reroute(self):
        try:
            if self.path.startswith(self.res_path):
                method_name = '_' + self.command
                method = getattr(self, method_name)
                try:
                    self._send(method())
                except (ValueError, AssertionError):
                    self.send_error(400, "Invalid request")
                except:
                    logging.exception("Database access error")
                    self.send_error(500, "DDBB error")
            else:
                if self.path == "/" or self.path == "/index.html":
                    self.path = "/cgi-bin/todolist.cgi"
                method_name = 'do_' + self.command
                method = getattr(CGIHTTPRequestHandler, method_name)
                method(self)
        except AttributeError:
            self.send_error(501, "Unsupported method (%r)" % self.command)

#---- Defaults
port = "8080"
basedir = "www/"
#----

#----------------------------------------
def usage():
    print "Uso: " +  os.path.basename(sys.argv[0]) + " -h -p port"
    print "     -h         Muestra este mensaje"
    print "     -p port    Sirve en el puerto indicado (def={0})".format(port)
    print "     -d dirname Sirve el contenido del directorio indicado (def={0})".format(basedir)

#----------------------------------------

try:
    opts, args = getopt.getopt(sys.argv[1:], "hp:d:", ["help", "port=", "dir="])
except getopt.GetoptError:
    usage()
    sys.exit(2)

for o, a in opts:
    if o in ("-h", "--help"):
        usage()
        sys.exit()
    if o in ("-p", "--port"):
        port = a
    if o in ("-d", "--dir"):
        basedir = a

if (port == None):
    usage()
    sys.exit()

try:
    address = ('', int(port))
except ValueError:
    usage()
    sys.exit(2)

httpd = BaseHTTPServer.HTTPServer(address,
                                  RESTHTTPRequestHandler)
os.chdir(basedir)
httpd.serve_forever() 
```

还有我的 todolist.cgi：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import cgi
import sys
import os
import datetime
import locale
# TBD: Usar el locale del cliente
locale.setlocale(locale.LC_TIME,'')
date_format = locale.nl_langinfo(locale.D_FMT)

sys.path.append(os.path.join(os.path.dirname(__file__), "../.."))
import DBBackend

print "Content-Type: text/html"
print ""
print """
<!doctype html>

<html lang="es">

<head>
<meta charset="utf-8"/>
<title>[IPM] Lista de tareas</title>
<meta name="author" content="David Cabrero"/>
<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1,maximun-scale=1,user-scalable=no"/>

<meta http-equiv="X-UA-Compatible" content="IE=ecdge,chrome=1">
<!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]-->

<link rel="stylesheet" type="text/css" href="css/default.css" />
<link rel="stylesheet" type="text/css" href="css/wide-screen.css" 
      media="only screen and (min-width : 1024px)" />
<script src="js/todolist.js"></script>
</head>

<body>

<header>
<h1>ToDo</h1>
</header>

<ul>
"""
fname = os.path.join(os.getcwd(), "../", DBBackend.DATABASEFILENAME)
li = """
  <a href="#dialog"><li data-task-id="{0}">
    <p class="desc">{1}</p>
    <time datetime="{2}">{3}</time>
    <p class="done" data-task-done="{4}">{5}</p>
  </li></a>
"""
for task in DBBackend.TodoDao(fname).findTasks():
    id = str(task['id'])
    desc = task['desc'].encode('utf-8')
    deadline = datetime.datetime.strptime(task['deadline'], "%Y-%m-%d")
    done = task['done'] == 1
    print li.format(id, desc, deadline.strftime("%Y-%m-%d"), deadline.strftime(date_format),
                    "yes" if done else "no", "Hecho" if done else "Sin hacer")

print """
</ul>

<div id="updateTask" class="dialog"><div>
  <h1>Actualizar tarea</h1>
  <form>
    <p><input type="text" name="task_desc" placeholder="task description" autofocus="autofocus" /></p>
    <p><input type="date" name="task_deadline" placeholder="deadline" /></p>
    <p><input type="checkbox" name="task_done" /></p>
    <p class="okCancel">
      <button name="ok">OK</button> 
      <button name="cancel">Cancel</button>
    </p>
  </form>
</div></div>

</body>

</html>
"""

print """
""" 
```

所有代码都是老师给出的（我必须做一个网络应用程序），所以如果我无法让服务器正常工作，我不知道如何开始。我还在运行 Windows 7 和 Python for Windows（2.7 版），希望对您有所帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T21:29:39.350

问题不在于您的代码，而在于文件系统权限。cgi 文件必须标记为可执行。这可以通过`chmod a+x todolist.cgi`, 从 cgi-bin 目录中的 shell 完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T21:30:16.840

好的，要在 Windows 下进行这项工作，您需要做的是将脚本从 todolist.cgi 重命名为 todolist.py 并更改服务器代码中的行：

```
self.path = "/cgi-bin/todolist.cgi" 
```

将其更改为：

```
self.path = "/cgi-bin/todolist.py" 
```

这应该让它在 Windows 中运行而不会大惊小怪。这一切都与 CGIHTTPServer 的内部工作以及它如何处理可执行文件有关。我尝试了各种其他技巧（以及像猴子修补 CGIHTTPServer.executable 等彻底的黑客攻击......）以使其工作，但这似乎是最简单的。

# wordpress - 对外部表的 WordPress $wpdb 查询进行分页、搜索和排序

> ID：13386796
> 
> 赞同：2
> 
> 时间：2012-11-14T20:31:03.880
> 
> 标签：wordpress, search, html-table, external, pagination

我的 WP 数据库中有一个自定义表 (ERA_Data)，我想在其中添加分页、列排序和搜索。目前以下代码成功抓取数据（超过 4000 个条目）并显示它们；

```
<?php

  global $wpdb;
  $ERA_Data = $wpdb->get_results("SELECT * FROM ERA_Data;");

  echo "<table>";
  foreach($ERA_Data as $ERA_Data){
    echo "<tr>";
    echo "<td>".$ERA_Data->PartNo."</td>";
    echo "<td>".$ERA_Data->Make."</td>";
    echo "<td>".$ERA_Data->Carline."</td>";
    echo "<td>".$ERA_Data->Model."</td>";
    echo "<td>".$ERA_Data->Description."</td>";
    echo "<td>".$ERA_Data->Start_Year."</td>";
    echo "<td>".$ERA_Data->End_Year."</td>";
    echo "</tr>";
    }
  echo "</table>";

?> 
```

只是让您知道，这对我来说是全新的 - 所以我很高兴阅读更多信息，但如果有人可以提供一些可能有帮助的代码示例 - 我将非常感激。

关于分页，我认为每页 50 或 100 个项目就可以了。我想排序顺序和搜索在任何情况下都会更有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:40:14.957

我会在这条线上为您需要的任何东西工作：

```
 $ERA_Data = $wpdb->get_results("SELECT * FROM ERA_Data;"); 
```

所以像这样改变它只显示100、50等结果

```
 $ERA_Data = $wpdb->get_results("SELECT * FROM ERA_Data LIMIT 100;"); 
```

或者

```
 $ERA_Data = $wpdb->get_results("SELECT * FROM ERA_Data LIMIT 50;"); 
```

对于分页，此链接将有很大帮助[在 SQL Server 中对结果进行分页的最佳方法是什么](https://stackoverflow.com/questions/109232/what-is-the-best-way-to-paginate-results-in-sql-server)

根据您的列进行排序，请使用此语法

```
 $ERA_Data = $wpdb->get_results("SELECT * FROM ERA_Data ORDER BY ***COLUMN NAME HERE***;"); 
```

如果您有任何问题，请告诉我！

# java - 我必须在我自己的 Java 类中使用 getter 方法吗？

> ID：13386799
> 
> 赞同：2
> 
> 时间：2012-11-14T20:31:14.923
> 
> 标签：java, coding-style, getter, getter-setter, private-members

说我有一些课：

```
public class A {
    private int val = 0;

    public int getVal() {
        return val;
    }

    public void addFrom(A otherA) {
        this.val += otherA.val;
        if (otherA.val > 0)
            otherA.val = 0;
        else
            otherA = Math.abs(otherA.val);
    }
} 
```

我应该使用 getter 方法而不是使用 otherA 的 val 变量吗？这样做更好吗？

编辑：这是一个非常简化的类，需要很长时间才能阅读。但是假设正在进行延迟初始化，还有其他方法可以访问此类，等等。我已经更新了示例方法，以便这可能更清楚，但我希望很清楚我的问题涉及访问其他对象的变量，并且想知道对不是“this”的东西使用直接变量访问是否是失礼的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:33:37.667

不，绝对不是。

当您在类的成员中时，您应该直接使用该变量，并在其他所有情况下使用 getter（当您收到错误时，因为`val`无论如何都是私有的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:34:55.043

`public int getVal()`旨在将您的礼物（变量）放在一个盒子里给外界（封装）。你自己在盒子里送礼物吗？这很奇怪，所以按原样使用变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:42:59.270

您可以使用变量，但当前代码无法编译。可能，返回应该是 int 而不是 boolean。

可能，您的意图是覆盖 Comparable 接口中的 compareTo 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T20:58:02.477

添加不必要的 getter 会显示内部结构，这是增加耦合的机会。

真正封装良好的类没有 setter，最好也没有 getter。与其向一个类请求一些数据然后用它计算一些东西，这个类应该负责用它的数据计算一些东西然后返回结果。

使用访问器来限制对字段变量的直接访问优于使用公共字段，但是，为每个字段创建 getter 和 setter 是多余的。不过，这也取决于具体情况，有时您只需要一个哑数据对象。应该为真正需要它们的字段添加访问器。一个类应该暴露碰巧使用其状态的更大行为，而不是由其他类操作的状态存储库。

# ruby-on-rails - 为什么以这种方式构造我的代码会导致顶级持续警告，我该如何解决？

> ID：13386800
> 
> 赞同：2
> 
> 时间：2012-11-14T20:31:20.357
> 
> 标签：ruby-on-rails, ruby

我的应用程序代码在 Rails 3.2 中的结构如下所示。如果我进入 Rails 控制台并输入`Foo::Bar::FooBar`它将返回此警告：

```
warning: toplevel constant FooBar referenced by Foo::Bar::FooBar 
```

应用程序代码和它们位于的文件：

```
# app/models/foo/bar/foo_bar.rb
module Foo
  class Bar
    class FooBar
    end
  end
end

# app/models/foo/bar.rb
module Foo
  class Bar
  end
end

# app/models/foo_bar.rb
class FooBar
end 
```

我的自动加载路径没有从 Rails 的默认值改变。

我能够解决此问题的一种方法是将以下代码添加到`Foo::Bar::FooBar`. 但是，感觉很脏，我想知道是否有配置选项或我做错的其他事情可以解决问题。

```
# app/models/foo/bar/foo_bar.rb
module Foo
  # This line of code removes the warning and makes class methods execute
  # on the Foo::Bar::FooBar class instead of the FooBar class.
  class Bar; end

  class Bar
    class FooBar
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:24:26.087

基本问题是您在重叠范围内为不同的类重用相同的名称。你也许可以做一些聪明的事情来让 Ruby 以你想要的方式解析常量名，但是这种“解决方案”从根本上来说是脆弱的。（如果新版本的 Ruby 对常量的查找方式进行了微小的更改，或者您转向另一个 Ruby 实现怎么办？）

为什么不直接命名模块中的顶级`FooBar`模型类？（您必须将文件移动到与模块同名的子目录中。）

# r - 如何在要在 R 中最大化的函数内使用矩阵乘法进行优化

> ID：13386801
> 
> 赞同：5
> 
> 时间：2012-11-14T20:31:22.307
> 
> 标签：r, debugging, optimization, matrix

我试图最大化维度 2x2 的矩阵参数的可能性。似然函数需要传入几个固定矩阵参数，似然函数也是它们的函数。表示为 Y 的数据和协方差矩阵 Sigma.star（我将其作为下三角矩阵传递）是计算所必需的，但我想保持这些数据固定并在我的试图优化 A 的代码

我的问题是 optim 似乎是错误的，因为它正在优化我用于矩阵代数的对象内部的某些内容。有没有什么方法可以让它工作而不需要对每一个小计算进行编程？

具体错误是：

```
Error in diag(1, nrow = (m^2)) - A %x% A : non-conformable arrays 
```

但是 A kronecker A 应该是一个 m^2 xm^2 矩阵，就像恒等式一样......</p>

代码：

```
library(MCMCpack)
library(mvtnorm)
set.seed(1000)

Likelihood.orig<-function(A, Y, Sigma.star){
Sigma<-xpnd(Sigma.star)
n<-nrow(Y)
if(is.vector(A)==TRUE){
  A<-as.matrix(A, nrow=nrow(Sigma), ncol=ncol(Sigma))
}
m<-nrow(A)
V<-matrix(solve(diag(1, nrow=(m^2))-A%x%A)%*%as.vector(Sigma), nrow=m, ncol=m)
temp1<- (-.5)*log(abs(det(V)))
temp2<- (-(n-1)/2)*log(abs(det(Sigma)))
temp3<- t(Y[,1, drop=FALSE]) %*% (solve(V)) %*% Y[,1, drop=FALSE]
terms<- numeric(n-1)
for(i in 2:n){
    terms[i-1]<- t(Y[,i, drop=FALSE] - A %*%Y[,i-1, drop=FALSE]) %*% (solve(Sigma)) %*% (Y[,i] - A %*%Y[,i-1])
}
return(temp1+temp2-.5*(temp3+sum(terms)))   
}

Generate.Y<-function(n, A, Sigma){
m<-nrow(A)
Y<-matrix(0, nrow=m, ncol=n)
V<-matrix(solve(diag(1, nrow=m^2)-A%x%A)%*%as.vector(Sigma), nrow=m, ncol=m)
Y[,1]<-rmvnorm(1, numeric(nrow(A)), V)
for(i in 2:n){
    Y[,i]<-A%*%Y[,i-1, drop=FALSE]+t(rmvnorm(1, mean = numeric(m), sigma = Sigma))
    }
return(Y)
}

n<-500
A.true<-matrix(c(.8, .3, 0, .5), nrow=2, ncol=2)
Sigma<-matrix(c(1, 0, 0, .5), nrow=2, ncol=2)
Y<-matrix(0, nrow=2, ncol=n)
Y<-Generate.Y(n, A.true, Sigma)
m=nrow(Y)
lower.Sigma<-vech(Sigma)

optim(par=c(1, 0, 0, 1), fn=Likelihood.orig, method="Nelder-Mead", 
  control=list(maxit=500, fnscale=-1), Sigma.star=lower.Sigma, Y=Y) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T00:02:14.897

您的方法是正确的，即`optim`对向量进行优化，并且仅将该向量转换为您要最大化的函数内的矩阵。

但是，您需要使用`matrix`而不是`as.matrix`创建该矩阵。查看两者之间的区别：

```
as.matrix(1:4, nrow=2, ncol=2)  # wrong tool
#      [,1]
# [1,]    1
# [2,]    2
# [3,]    3
# [4,]    4 
```

和

```
matrix(1:4, nrow=2, ncol=2)
#      [,1] [,2]
# [1,]    1    3
# [2,]    2    4 
```

对于此类问题，我强烈建议您学习 R 调试工具（`browser`、`debug`、`debugonce`等）。有关示例，请参阅[R 中调试的一般建议。](https://stackoverflow.com/questions/4442518/general-suggestions-for-debugging-r)

# cinema-4d - 网格未显示在透视图中

> ID：13386803
> 
> 赞同：0
> 
> 时间：2012-11-14T20:31:30.990
> 
> 标签：cinema-4d

有点疯了。网格显示在除透视之外的其他视图中。网格选项在透视视图中被选中。基本上，当我打开程序时，视口中没有网格线。这是一个空白的灰色空间。

我是 Cinema 4D 的新手，所以在我能够透视网格之前，我无法继续前进。如果有人可以提供帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:53:29.417

好的，在首选项面板中发现了问题所在。对于像我这样没有 OpenGL 卡的人，您需要在 Edit > Preferences 中取消选中 use OpenGL。然后网格将显示在透视视图中。

# sunspot-solr - 太阳黑子可搜索 :as, :using, :multiple

> ID：13386806
> 
> 赞同：0
> 
> 时间：2012-11-14T20:31:55.843
> 
> 标签：sunspot-solr

有谁知道 Sunspot 的可搜索块中的 :as、:using 和 :multiple 符号的文档 URL？以前找过，现在找不到了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:08:50.787

我找不到任何带有符号 :as 的东西。我发现 :using 和 :multiple 在：[https ://github.com/sunspot/sunspot/wiki/Setting-up-classes-for-search-and-indexing](https://github.com/sunspot/sunspot/wiki/Setting-up-classes-for-search-and-indexing)

编辑：在[https://github.com/sunspot/sunspot/blob/master/sunspot/lib/sunspot/field.rb上找到了一些信息](https://github.com/sunspot/sunspot/blob/master/sunspot/lib/sunspot/field.rb)

# windows-mobile - Web 浏览器支持 Windows Embedded、Windows CE 和 Windows Mobile？

> ID：13386810
> 
> 赞同：6
> 
> 时间：2012-11-14T20:31:59.463
> 
> 标签：windows-mobile, windows-embedded, windows-embedded-compact

我正在为客户开发基于 Web 的库存解决方案，其中将涉及手持移动计算机。我从来没有开发过在这些设备之一的浏览器上运行的网络应用程序。我们正在查看的设备具有以下操作系统之一：

1.  Windows 嵌入式 6.5
2.  Windows CE 5.0 或 6.0
3.  视窗手机

我的问题是：

1.  所有这些都带有某些版本的 Internet Explorer
2.  如果是这样，该版本的 IE 是否支持以下内容：javascript？JQuery（用户界面、AJAX 调用）

关于这些操作系统选择、优点和缺点的任何经验或建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:24:57.950

不，他们没有相同版本的 IE。它们都支持 javascript 的一个子集，但它们支持的内容有所不同，而且我不知道有任何文档列出了支持的内容（或更重要的是，不支持的内容）。

有一些主观的列表，例如 [jQueryMobile 给 WinMo 5.2 的等级为 "C" [1](http://jquerymobile.com/gbs/)。基本上这是一个“不要假设任何东西都会在那里。测试，测试，测试”的故事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T23:39:34.333

我敢打赌，您今天不会找到任何认真使用手机使用 Internet Explorer Mobile 浏览网络的 Windows Mobile 用户。

**Opera Mobile**可在我过去 10 年使用的所有 Windows Mobile 设备上运行，而在过去 6 年左右的时间里，它预装在我拥有的每部手机中。这是一个相当不错的浏览器。大多数流行的 JavaScript 框架甚至可以工作，只要它们不使用过多的 html5、css3 或 SVG 技巧。

应该完全忽略 Internet Explorer Mobile，尤其是如果您打算编写客户端脚本。www.microsoft.com 和 live.com 甚至不加载那个蹩脚的浏览器。

如果你被迫为 IE 移动开发一个动态网站，那你就完蛋了。我过去做过。请不要让回忆回来。它在我的灵魂上留下了永久的划痕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T09:51:30.323

正如 Chris (ctacke) 所说，这些平台不支持相同的浏览功能，不幸的是，没有关于它们支持什么和不支持什么的真正文档。

如果对您来说没问题，您可能会使用 ZetaKey 之类的第 3 方浏览器或……但您需要控制客户使用哪种浏览器。

您还可以使用适用于 Windows Mobile 6 和 Windows CE5 的设备模拟器（我不知道任何适用于 Windows CE6 的 Windows Embedded 的模拟器）并在模拟器中测试您的代码。AFAIR 功能较少的浏览器引擎是 Windows Mobile 5（及之前）。

如果我必须选择移动设备操作系统，我会选择 Windows CE6。

问候

约瑟夫

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-20T23:19:43.623

Tau Technologies（RhoMobile平台的维护者）为WinCE/WM推出基于WebKit的浏览器引擎

*   完全符合 HTML5
*   高性能
*   与 WinCE 5/6、Compact 7 和 Windows Mobile 兼容
*   利用具有 FreeType 支持的 Cairo Graphics 实现出色的渲染
*   可以在许可的基础上内置在第三方产品中

问候， 康斯坦丁·赖巴斯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-07T06:13:16.810

很抱歉复活了一个旧线程，我希望你能找到一个可行的解决方案。我们目前正在处理这个问题，如前所述，这是一个使用摩托罗拉（或 Zebra）扫描仪的仓储解决方案。我查看了 Opera Mobile、Opera Mini、IE 6、Zeta Key 和 Zeta Key Lite。老实说，我对他们中的任何一个都没有印象。然后我爱上了企业浏览器。这是 Zebra 为其移动设备开发的浏览器。它有适用于 Android、Windows Mobile 和 Windows CE 的版本。我们使用的是 Windows Mobile 6.5，它有 2 个选项，基于 Webkit 或 IE。Webkit 选项似乎快得令人眼花缭乱。

然而，另一件事是，如果您计划从您的网络应用程序启用/禁用扫描仪本身，不幸的是 IE 是我迄今为止发现的唯一可以与 Active X 控件交互的。话虽如此，尽管企业浏览器在 XML 文件中具有大量配置选项，但我还没有机会浏览所有这些选项。

无论如何，我希望这对处于类似情况的任何人都有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-05T08:09:43.763

我还想与工业移动设备分享我的发现。我们尝试使用带有 Windows Mobile 5.0 的旧 Motorola（以前是 Symbol，现在是 Zebra）MC 9094 设备作为仓储解决方案。目标是使用网站来收集生产数据，而无需设备或供应商特定的解决方案。我目前正在使用 ASP.NET MVC 5 和 jQuery 为我的客户开发 ERP 解决方案。在移动设备网站上使用 jQuery mobile 已经很接近了。问题是，WinMo 5.0 中的 PocketIE 非常老旧，不支持任何 JavaScript。我们决定放弃使用摩托罗拉 MC9094 设备。我将使用更新的设备 CipherLab CP55 进行测试，它带有 Windows Embedded Compact 7 和 Internet Explorer Embedded，它支持 JavaScript，甚至支持 jQuery 和 jQuery Mobile 的某些版本/组合。

目前我正在尝试找到这两者的最佳/最新组合。现在我正在使用另一个设备，NordicID Medea，它也运行 WEC 7。该网站与 jQuery Mobile 1.3.2 以及 jQuery 1.12.4 一起使用，即使是 AJAX 调用和 jQuery 验证。

编辑：我对这些设备和操作系统的经验是，您应该始终更喜欢 Windows CE（或 Windows Embedded Compact）。Windows Mobile 的功能总是非常受限和受限。

# android - 更新进度对话框

> ID：13386811
> 
> 赞同：0
> 
> 时间：2012-11-14T20:32:00.167
> 
> 标签：android, android-asynctask, progressdialog, updating

我的progressdialog 有问题，我想在连接期间更新我的progressdialog。

这是我的进度对话框

```
Pro = new ProgressDialog(getParent());
    Pro.setMessage("Enviando");
    Pro.setIndeterminate(false);
    Pro.setMax(100);
    Pro.setCancelable(false);
    Pro.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL); 
```

这是我的异步任务

```
private class NuevoPostVideo extends AsyncTask<String, Integer, String>{

     @Override
    protected String doInBackground(String... params) {
         objAcceso = new AccesoBd();
         String jsRes= "";

         SharedPreferences userDetails = getParent().getSharedPreferences("MisPreferencias", MODE_PRIVATE);

        try{

            File f = new  File(sDireccionFoto); 

            FileBody bin = new FileBody(f);

            StringBody  from = new StringBody( Integer.toString(userDetails.getInt("Id",0)));

          StringBody id_recurso = new StringBody(Integer.toString(idEvento));
          StringBody titulo_body = new StringBody(txtVTitulo.getText().toString());
          StringBody ficha = new StringBody("null");

         MultipartEntity reqEntity = new MultipartEntity();
         reqEntity.addPart("imageFile", bin);
         reqEntity.addPart("from",from);
         reqEntity.addPart("idrecurso",id_recurso);
         reqEntity.addPart("titulo", titulo_body);
         reqEntity.addPart("ficha", ficha);

        objAcceso.conxDatosInPost(params[0],reqEntity);
        jsRes="ok";

    }
    catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();

     }finally{return jsRes;}

        }
     @Override
     protected void onPostExecute( String result) {

         if (result.equals("ok")){

         SharedPreferences userDetails = getParent().getSharedPreferences("MisPreferencias", MODE_PRIVATE);
         DetalleEvento objd = new DetalleEvento();
         objd.setTipo(1);
         objd.setFecha(objAcceso.FechaActualinglesa());
         objd.setTituloPost(sTituloPost);
         objd.setImagen(btmImagenElegida);
         objd.setUrl(sDireccionFoto);
         objd.setAutor(userDetails.getString("Nombre","Usted"));

         objAdapterDetalles.arrayDatos.add(0,objd);

         objAdapterDetalles.notifyDataSetChanged();
         lstDatos.setSelection(1);
         dOpciones.dismiss();
         dHacerVideo.dismiss();

         }
            Pro.dismiss();
            prgVProgreso.setVisibility(View.INVISIBLE);
        }
     @Override
        protected void onPreExecute() {

            //prgVProgreso.setVisibility(View.VISIBLE);
        Pro.show();
            //Pro.incrementProgressBy(10);

    }
     @Override
      public void onProgressUpdate(Integer... args){
          Pro.setProgress(args[0]);
                    } 

 } 
```

这是我的 conexion 功能“看看我的 doinbhackgroud 的这一行”（**objAcceso.conxDatosInPost(params[0],reqEntity);**）

```
 public  String conxDatosInPost(String Direccion, MultipartEntity Parametros) throws Exception {
        BufferedReader in = null;
        try {
            HttpClient client = ClienteHttp();
            HttpPost request = new HttpPost(Direccion);
            request.setEntity(Parametros);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) {
                sb.append(line + NL);
            } 
            in.close();

            String result = sb.toString();
            Log.d("El resultado de cnxposin es :-----------  ",  result +"fn");

            return result;
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    } 
```

¿ 我可以更新我的进度对话框 当连接持续时？

**更新**

我在计算要插入的文件的大小（在这种情况下为视频）以及每次查看上传到服务器的进度时遇到问题

找不到这样做的方法

我想知道是否有一些听众进步听众风格的可能性？

请可以帮助我或给我一个提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:36:41.153

[从官方 Java 文档](http://developer.android.com/reference/android/os/AsyncTask.html)中查看以下示例：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:54:58.240

最终解决我的问题如下

这就是我的代码

```
public class NuevoPostVideoConProgreso extends AsyncTask<String, Integer, String>{

             ProgressDialog dialogProgreso;
            long totalSize;

                 @Override
                protected String doInBackground(String... params) {
                     objAcceso = new AccesoBd();
                     String res = "";
                     SharedPreferences userDetails = getParent().getSharedPreferences("MisPreferencias", MODE_PRIVATE);
                    try{

                    CMultipartContador objconSub = new CMultipartContador(new CMultipartContador.ProgressListener() {

                        @Override
                        public void transferred(long num) {
                            // TODO Auto-generated method stub

                            float antes = (float)(num /(float) totalSize);
                            float despues =(float)(antes * 100);

                            int numero = (int) despues;

                            publishProgress(numero);//(int) ((num /(float) totalSize) * 100));
                        }
                    } );

                        File f = new  File(sDireccionFoto); 

                        FileBody bin = new FileBody(f);

                        StringBody  from = new StringBody( Integer.toString(userDetails.getInt("Id",0)));

                      StringBody id_recurso = new StringBody(Integer.toString(idEvento));
                      StringBody titulo_body = new StringBody(txtVTitulo.getText().toString());
                      StringBody ficha = new StringBody("null");

                    // MultipartEntity reqEntity = new MultipartEntity();
                     objconSub.addPart("imageFile", bin);
                     objconSub.addPart("from",from);
                     objconSub.addPart("idrecurso",id_recurso);
                     objconSub.addPart("titulo", titulo_body);
                     objconSub.addPart("ficha", ficha);

                    totalSize= objconSub.getContentLength();
                   // dialogProgreso.setMax((int)totalSize);

                    objAcceso.conxDatosInPostAsynctask(params[0],objconSub);

                dialogProgreso.setProgress(100);

                    res= "ok";

                }
                catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();

                 }finally{return res;}

                    }
                 @Override
                 protected void onPostExecute( String result) {

                     dialogProgreso.setProgress(100);
                     dialogProgreso.dismiss();
                     dOpciones.dismiss();
                     dHacerVideo.dismiss();

                     LlenarEvento();

                 }
                 @Override
                    protected void onPreExecute() {
                     dialogProgreso = new ProgressDialog(getParent());
                        dialogProgreso.setMessage("Subiendo...");
                        dialogProgreso.setIndeterminate(false);
                        //dialogProgreso.setMax(100);
                        dialogProgreso.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                        //dialogProgreso.setProgress(0);
                        dialogProgreso.setCancelable(false);
                        dialogProgreso.show();
                        //dialogProgreso.setProgress(3);

                }
                 @Override
                  public void onProgressUpdate(Integer... args){
                      dialogProgreso.setProgress(args[0]);
                                } 

             }

            private ImageView aniadirImagen(Bitmap btmi){
                ImageView img= new ImageView(getParent());

                img.setImageBitmap(btmi);
                btmi.recycle();
                return img;
            } 
```

这是我的新课

```
public class CMultipartContador extends MultipartEntity {

private final ProgressListener listener;

public CMultipartContador(final ProgressListener listener)
{
    super();
    this.listener = listener;
}

public CMultipartContador(final HttpMultipartMode mode, final ProgressListener listener)
{
    super(mode);
    this.listener = listener;
}

public CMultipartContador(HttpMultipartMode mode, final String boundary, final Charset charset, final ProgressListener listener)
{
    super(mode, boundary, charset);
    this.listener = listener;
}

@Override
public void writeTo(final OutputStream outstream) throws IOException
{
    super.writeTo(new CountingOutputStream(outstream, this.listener));
}

public static interface ProgressListener
{
    void transferred(long num);
}

public static class CountingOutputStream extends FilterOutputStream
{

    private final ProgressListener listener;
    private long transferred;

    public CountingOutputStream(final OutputStream out, final ProgressListener listener)
    {
        super(out);
        this.listener = listener;
        this.transferred = 0;
    }

    public void write(byte[] b, int off, int len) throws IOException
    {
        out.write(b, off, len);
        this.transferred += len;
        this.listener.transferred(this.transferred);
    }

    public void write(int b) throws IOException
    {
        out.write(b);
        this.transferred++;
        this.listener.transferred(this.transferred);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:39:02.567

您可以使用处理程序`ProgressDialog`根据`doInBackground(..)`. `AsyncTask`我认为这个[例子](http://blog.creatiosoft.com/?p=1316)对你来说是完美的。只需发送`Handler`一个`Message`using`handler.sendmsg(msg)`以便它更新`ProgressDialog`.

# iphone - 如何在操作表中添加键盘

> ID：13386812
> 
> 赞同：0
> 
> 时间：2012-11-14T20:32:05.143
> 
> 标签：iphone, objective-c, ios, uiactionsheet

是否可以在操作表中添加键盘？如果是，我该怎么办？...我想禁用背景。谢谢，路易吉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:46:55.780

我认为 UIKeyBoard 不能添加到 ActionSheet 但你实现了你的目标但处理键盘通知...添加键盘将出现并会在您的控制器中消失通知...在键盘上将出现添加与父视图相同的框架子视图框架..并将其 alpha 设置为 0.5 ......它看起来像一个 ActionSheet 正在出现，背景将自动被禁用，并且在键盘上消失从 superview 中删除该视图......您可以在您正在添加的视图中添加点击手势。 .Hope 所以它会回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:11:53.573

您可以向操作表添加不同的控件，例如选择器和文本视图。但是，如上所述，您不能添加键盘。

如果要自定义显示键盘时显示的内容，可以使用键盘滑动控件，使其看起来像是键盘的一部分。

或者，您可以使用按钮等创建自己的键盘。

# html - 创建一个按钮以将朋友添加到 Google Plus 上的圈子

> ID：13386816
> 
> 赞同：0
> 
> 时间：2012-11-14T20:32:22.507
> 
> 标签：html, api, google-plus

在我的谷歌帐户中，我创建了一个名为 test 的圈子，我有一个名为“zone”的 HTML 页面，我的想法是创建一个按钮，上面写着“circle test”，这样当我的朋友 agregen 自动将按钮压到那个圈子时。我可以做这个吗？如果可能的话，她怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:30:16.233

目前，无法从 Google+ Platform API 添加到圈子。但是，[该功能请求](https://code.google.com/p/google-plus-platform/issues/detail?id=47)位于我们的 Google+ 平台问题跟踪器中。如果您对问题加注星标，您将收到一封电子邮件，了解所有未来的更新。

# matlab - 在非常小的数字上加 1

> ID：13386820
> 
> 赞同：1
> 
> 时间：2012-11-14T20:32:39.837
> 
> 标签：matlab, floating-point, numbers, addition

我有一个关于将数字 1 添加到非常小的数字的问题。现在，我正在尝试在以实数 1 为中心的复平面上绘制圆弧。我的代码如下所示：

```
arc = 1 + rho .* exp(1i.*theta); 
```

该值`rho`是一个非常小的数字，`theta`从 0 到 pi，所以每当 1 被添加到 的实部时`arc`，MATLAB 似乎只是将其四舍五入为 1，所以当我输入 时`plot(real(arc),imag(arc))`，我看到的只是一个尖峰而不是一个半圆大约 1。有谁知道如何解决这个问题，以便 MATLAB 不会将 1 + real(arc) 舍入为 1，而是保持精度？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:56:05.657

`rho=1e-6; theta=0:pi/100:pi; arc=1+rho*exp(1i.*theta); plot(arc); figure(); plot(arc-1);`

表明问题在于情节，而不是精度损失。之后`rho<1e-13`会出现精度问题。

另外两个可能的误解：
- 双精度数有限。16 位十进制数字或 1+2^-52 是双精度数的限制。
- 短格式与长格式——matlab 默认只显示 6 或 7 位数字

也恰好 6-7 位是 32 位浮点数的限制，这也可以解释 Octave 3.4.3 中的绘图功能也可以用浮点数实现。

左：1+1e-6*exp，右：(1+1e-6*exp)-1 ![](../Images/91fa8347a0fd2d952a157fac3b05eb8e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:56:21.287

对于这个问题，有一个内置的解决方案：

[exp1m()](http://www.mathworks.com/help/matlab/ref/expm1.html)

[log1p()](http://www.mathworks.com/help/matlab/ref/log1p.html)

明确：

```
log(arc)=log1p(rho*exp(1i*theta)) 
```

得到你需要的东西。

当然，您需要在日志空间中工作以表示此精度，但这是完成此操作的典型方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T20:45:47.323

在[双精度浮点](http://en.wikipedia.org/wiki/Double_precision_floating-point_format#Double-precision_examples)表示中，严格大于`1`可以表示的最小数是`1 + 2^-52`.

这是在大多数机器上表示非整数的方式所施加的限制，可以在软件中避免，但不容易。[请参阅有关 MATLAB 方法的这个问题。](https://stackoverflow.com/questions/5568922/matlab-precision)

# ruby-on-rails - Heroku 网站因 Rails 3.2.9 和路由约束而崩溃

> ID：13386828
> 
> 赞同：5
> 
> 时间：2012-11-14T20:33:14.500
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, ruby-on-rails-3.2

我的网站托管在 Heroku 中，在 Rails 3.2.8 上运行良好。我正在为静态（主要）网页使用带有 HighVoltage gem 的路由约束类：routes.rb：

```
get "/*id" => "high_voltage/pages#show", constraints: Constraints::StaticPage.new 
```

我有一个文件`/lib/constraints/static_page.rb`：

```
module Constraints
  class StaticPage
    def matches?(request)
      File.exist? file_path(request.path)
    end

    private

    def file_path(view)
      static_page_views_dir.to_s.concat("#{view}.html.erb")
    end

    def static_page_views_dir
      Rails.root.join('app', 'views', 'pages')
    end
  end
end 
```

问题是，我刚刚更新到 Rails 3.2.9`git push heroku`并且我的应用程序崩溃了:(

```
my-host:my-site scott$ heroku ps
=== web: `bundle exec rails server -p $PORT`
web.1: crashed 2012/11/14 12:14:41 (~ 2s ago) 
```

显然，Ruby/Heroku 找不到我的`Constraints::StaticPage`班级。我把它`require`放在我的顶部`routes.rb`：

```
require 'constraints/static_page' 
```

Rails 3.2.9 中是否发生了一些变化，以至于不再适用于 Heroku？**在本地一切正常**，只是在 Heroku 中不行。如果我在我的路线中去掉那个约束，一切都会完美（除了没有这些约束）。这是我的`heroku logs`输出：

```
2012-11-14T20:14:36+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-11-14T20:14:36+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-11-14T20:14:38+00:00 app[web.1]: => Booting WEBrick
2012-11-14T20:14:38+00:00 app[web.1]: => Rails 3.2.9 application starting in production on http://0.0.0.0:18361
2012-11-14T20:14:38+00:00 app[web.1]: => Call with -d to detach
2012-11-14T20:14:38+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-11-14T20:14:38+00:00 app[web.1]: Exiting
2012-11-14T20:14:38+00:00 app[web.1]: /app/config/routes.rb:50:in `block in <top (required)>': uninitialized constant ActionDispatch::Routing::Mapper::Constraints::StaticPage (NameError)
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/routing/route_set.rb:260:in `draw'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/config/routes.rb:3:in `<top (required)>'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:40:in `each'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:42:in `each'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application/finisher.rb:52:in `block in <module:Finisher>'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:40:in `load_paths'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.2/lib/devise/rails.rb:14:in `block in <class:Engine>'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:16:in `reload!'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:108:in `reload_routes!'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:34:in `call'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands/server.rb:46:in `app'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands/server.rb:70:in `start'
2012-11-14T20:14:38+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-11-14T20:14:38+00:00 app[web.1]:   from script/rails:6:in `require'
2012-11-14T20:14:38+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-11-14T20:14:40+00:00 heroku[web.1]: Process exited with status 1
2012-11-14T20:14:40+00:00 heroku[web.1]: State changed from starting to crashed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:22:05.183

Can you try out the following versions in your Gemfile:

```
# Gemfile
gem 'rails', '3.2.9'
gem 'high_voltage', '~> 1.2.1'
gem 'thin'

# ... 
```

The `1.2.1` release of High Voltage has the root route constraints baked into it. This will allow you to remove the routes completely from your `config/routes.rb` file.

Just set up an initializer for High Voltage:

```
# config/initializers/high_voltage.rb
HighVoltage.route_drawer = HighVoltage::RouteDrawers::Root 
```

I deployed the above to a Cedar app on Heroku and it ran as expected.

# django - 将 trans 标签内的字符串设为大写

> ID：13386829
> 
> 赞同：6
> 
> 时间：2012-11-14T20:33:16.920
> 
> 标签：django, django-templates

在我的模板中，有时我想让翻译后的字符串通过`upper`过滤器。例如，我想将“相关链接”显示为“相关链接”。但是，当我尝试时，例如：

```
{% trans "Related links"|upper %} 
```

`TemplateSyntaxError`会被抛出。有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T20:37:14.210

只需使用：

```
{% trans "Related links" as rel %}{{ rel|upper }} 
```

这会将翻译临时保存在一个变量中，然后可以使用该变量对其应用过滤器。

来源：[https ://docs.djangoproject.com/en/dev/topics/i18n/translation/#trans-template-tag](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#trans-template-tag)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-19T20:53:12.000

从 Django 1.10 开始，您可以避免使用别名，只需使用：

```
{% trans "Related links"|upper %} 
```

# c# - 对多个 Excel 工作簿中的记录进行排序 - C# Excel 互操作

> ID：13386835
> 
> 赞同：0
> 
> 时间：2012-11-14T20:33:35.450
> 
> 标签：c#, excel, sorting, excel-interop

我有 ac# 应用程序将权限事件结果到工作簿和工作表中。输入事件结果的窗口窗体包含每个特定结果字段的文本框（即名称、分数、时间、竞争对手编号等），用户可以在其中输入结果的这些文本框大约有 19 行. 许多文本框字段是在用户为赛事注册参赛者后自动填充的，例如姓名、参赛者编号、地址等。我的主要问题是有几场比赛在三个不同的类别下进行，我需要我的申请以某种方式从每个类别的每个事件中找到最佳总分/时间。目前，我正在使用 for 循环中的 excel 互操作和数组列表将注册表单上的文本框字段中的值放入 excel 电子表格。然后，我使用 range.sort 方法对 Excel 电子表格中的值进行排序。我无法在概念上设计一种方式来执行我想要完成的事情，因为事件将在不同的工作表上。有没有人对我应该研究的行动方案有任何建议。我知道这更多是关于 excel 互操作的概念性问题，但我真的无法包含此代码，因为涉及的内容太多。谢谢你的帮助。t 包含此代码，因为涉及的内容太多。谢谢你的帮助。t 包含此代码，因为涉及的内容太多。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:19:45.587

...我不会用 Excel 做这个。我宁愿通过一个可以保存您需要的所有数据的自定义对象来做到这一点。例如：

```
Public Class EventData

Public Property CompetitorName As String
' ... Other Info you've inputted

Public Property EventName As String = ""
Public Property Category As String = ""

Public Property Score As Double = -1
Public Property Time As Double = -1

Public ReadOnly Property ComparisonVal As Double
    Get
        ' This could be either Score or Time
        ' Decide based upon which one <> -1 or something along those lines
    End Get
End Property

End Class 
```

现在您可以在您的代码中执行以下操作：

```
Dim AllData as New List(Of EventData) 
```

并用所有必要的数据填充列表（就像你在 Excel 表中所做的那样）

现在，您可以根据需要使用&`LinQ`分组并获取前 3 个（或其他）值来提取数据。`Event``Category``ComparisonVal`

稍后，如果您需要以这种方式存储自定义对象数据，您始终可以使用[Epplus](http://epplus.codeplex.com/)或 Interop 将其输出到 Excel，但我会依靠 .Net 为您完成所有繁重的工作，因为您拥有最大程度的灵活性使用您的代码/变量等

希望这能解释我的想法并对 VB 代码感到抱歉:)

# c++ - 使用 Poco 库获取 URL 参数

> ID：13386837
> 
> 赞同：2
> 
> 时间：2012-11-14T20:33:38.290
> 
> 标签：c++, poco-libraries

我正在使用 Poco 库开发一个 Web 服务器。当我的服务器在 GET 模式下接收到带有表单数据的 HTTP 请求时，我不知道如何使用该类`HTMLForm`来显示带有接收对的列表`param=value`。

有了`request.getURI().getQuery()`我就能得到完整的字符串。我想我可以使用标记器以传统方式拆分字符串。

有没有更好的方法来使用 Poco 呢？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:09:51.817

好的，类*HTMLForm*继承自类*NameValueCollection*，它实现了一个迭代器，用于在“name=value”对中移动。

这是解决我的问题的代码：

```
string name;
string value;
HTMLForm form( request );

NameValueCollection::ConstIterator i = form.begin();

while(i!=form.end()){

    name=i->first;
    value=i->second;
    cout << name << "=" << value << endl << flush;
    ++i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-24T07:49:14.573

使用 poco 版本 1.11.0-all (2021-06-28) 你可以这样做：

```
const Poco::URI Uri(request.getURI());
const Poco::URI::QueryParameters QueryParms = Uri.getQueryParameters(); 
```

`Poco::URI::QueryParameters`是：

```
std::vector<std::pair<std::string, std::string>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:19:16.570

POCO "NameValueCollection" 与 Vettrasoft Z Directory namevalue_set_o 类几乎相同，此处记录：

[http://www.vettrasoft.com/man/zman-strings-namevalue_set.html](http://www.vettrasoft.com/man/zman-strings-namevalue_set.html)

至少提供了一些示例代码。我对 POCO 的最大问题是缺乏关于如何使用它的示例或解释（包括参考手册页）。对于 Z 目录的名称-值集类，与上面等效的源代码如下所示：

```
using namespace std;

int i, ie;
namevalue_set_o nv;
string_o s = "FOO=BAR;DATE=\"12/21/2012\";HOST=vertigo;OSTYPE=\"Windows Vista\"";
nv.load_from_string(s);
i = 0;

while (i < nv.size())
{
  const namevalue_pair_o &item = nv.get(i, &ie);
  if (!ie)
    cout << item.name() << "=" item.value() << endl << flush;
  ++i;
} 
```

# html - 使用 HTML5 的 Canvas 进行预渲染的最佳方式？

> ID：13386839
> 
> 赞同：0
> 
> 时间：2012-11-14T20:33:42.910
> 
> 标签：html, html5-canvas, graphics2d, prerender

我正在尝试为 Google 的 GWT 制作 Canvas Games 的游戏开发 API，但我遇到了关于预渲染问题的问题。

首先：我不完全确定浏览器/Javascript/GWT 如何管理已删除的画布，其数据是否保留在内存中，在使用`removeChild()`或`RootPanel.Remove()`（使用 GWT）之后，甚至是从内存中删除它的正确方法。

因此，我提出的解决方案是使用多个（根据需要）隐藏的大画布作为预渲染调色板，并使用 drawImage() 魔法在主上下文中绘制的预渲染图像周围跳转，并且在插入时遇到了我自己的问题，删除，空白空间等。

这是最好的解决方案吗？或者我应该尝试为每个预渲染的小图像和纹理使用一个小画布？还是我应该尝试一些完全不同的东西？

提前谢谢，对不起我的拼写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:12:28.200

使用画布预渲染您的项目是一个好主意，但它并不总是最佳选择。如果您的项目很复杂（带有渐变、阴影和视觉效果），那么它会很好。但是如果你的项目很简单（图像、多边形、简单的贝塞尔曲线……），你的帧率不会增加，但会减少（因为 drawImage）。那么最好实时渲染。

从我的实验来看，使用几个小画布（可能内存很少）不会降低性能，但它比大画布（如面向对象的场景）更容易管理。如果您的项目有时会发生变化，您一定可以轻松管理临时画布的大小。

希望这有帮助。

# android - 防止 Chrome 在重新定位时重新加载页面？

> ID：13386848
> 
> 赞同：2
> 
> 时间：2012-11-14T20:34:23.550
> 
> 标签：android, webview, android-webview, onconfigurationchanged, webchromeclient

这是我的第一个应用程序，它是一个网络应用程序，它只是将 webView 加载到发生事情的 url。

它在 android 浏览器（姜饼）中运行良好，但在 Chrome（ICS，JB）中，当设备旋转时，它会返回到初始 webView url。在姜饼中，您可以通过设置 android:configChanges="keyboard|keyboardHidden|orientation" 并覆盖 onConfigurationChanged 来解决此问题。

在网上搜索后，我按照此处的示例重新编写了我的原始活动：http: [//www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on- screen-orientation-change/](http://www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-screen-orientation-change/)，您基本上可以自己处理重新定向。

**但是现在当我旋转设备时我的应用程序崩溃了。**

使用 Android 4.1.2 进行测试。

有人看到我的代码有什么问题吗？对不起，如果答案很明显，但我已经被这个错误困住了几天了。也许我只需要另一双眼睛。提前致谢！

*注意：@SuppressWarnings("deprecation") 行不在示例中，这是编辑器建议的，以便编译。*

主要活动：

```
package com.example.xxx.xxx;

import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.content.res.Configuration;
import android.view.Menu;
import android.view.ViewGroup;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.FrameLayout;

@SuppressLint("SetJavaScriptEnabled")
public class MainActivity extends Activity {

protected FrameLayout webViewPlaceholder;
protected WebView myWebView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initUI();

}

   @SuppressWarnings("deprecation")
   protected void initUI() {

    webViewPlaceholder = ((FrameLayout)findViewById(R.id.webViewPlaceholder));

    if (myWebView == null){
        //Create It
        myWebView = new WebView(this);
        myWebView.setLayoutParams(new ViewGroup.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setSupportZoom(true);
        webSettings.setBuiltInZoomControls(true);
        webSettings.setLoadsImagesAutomatically(true);
        myWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        myWebView.setScrollbarFadingEnabled(true);
        myWebView.setWebViewClient(new WebViewClient());
        myWebView.setWebChromeClient(new WebChromeClient());
        myWebView.setInitialScale(1);
        myWebView.loadUrl("http://www.theurl.com");

    }

    webViewPlaceholder.addView(myWebView);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onConfigurationChanged(Configuration newConfig){   

    if (myWebView != null) {

        webViewPlaceholder.removeView(myWebView);

    }

    super.onConfigurationChanged(newConfig);

    setContentView(R.layout.activity_main);

    initUI();

}

@Override
protected void onSaveInstanceState(Bundle outState)
      {
        super.onSaveInstanceState(outState);

        // Save the state of the WebView
        myWebView.saveState(outState);
      }

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState)
      {
        super.onRestoreInstanceState(savedInstanceState);

        // Restore the state of the WebView
        myWebView.restoreState(savedInstanceState);
      }
} 
```

主要活动 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="horizontal" >

<FrameLayout android:id="@+id/webViewPlaceholder"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:43:38.900

尝试在清单文件中为您的活动定义添加方向，如下所示：

```
<activity android:screenOrientation="portrait"  ...>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:01:41.117

我意识到如果我不使用它的任何功能，我什至根本不需要 WebChromeClient。在这里找到答案：[How to prevent WebView auto refresh when screen rotation](https://stackoverflow.com/questions/10924291/how-to-prevent-webview-auto-refresh-when-screen-rotation)

只需将“screenSize”添加到清单中的配置更改中。

```
android:configChanges="keyboard|keyboardHidden|orientation|screenSize" 
```

# html - 初学者 html/css 网站布局

> ID：13386849
> 
> 赞同：0
> 
> 时间：2012-11-14T20:34:31.550
> 
> 标签：html, css

现在，我是一个真正的初学者，刚刚开始，弄清楚事情，测试和尝试 html 和 css。我想做或多或少这样的东西（见图）。我希望它完全缩放以适应浏览器/保留分辨率的纵横比。

[我的布局](http://img547.imageshack.us/img547/3791/layoutr.jpg)

我的 html 和 css 代码如下。背景图像可以很好地缩放，但现在我希望我的导航以相同的方式缩放。怎么做？要改变什么？我还希望在实线下方（导航上方）有一条虚线。有什么建议吗？:) 刚开始/学习/犯错 :)

```
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>My Layout</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        </head>
        <body>
        <div id="navigation">
        <ul>
            <li> <a href="#"> HOME </a></li>
            <li> <a href="#"> O MNIE </a></li>
            <li> <a href="#"> PORTFOLIO </a></li>
            <li> <a href="#"> OFERTA </a></li>
            <li> <a href="#"> STREFA ŚLUBNA </a></li>
            <li> <a href="#"> PUBLIKACJE </a></li>
            <li> <a href="#"> WSPOŁPRACA </a></li>
            <li> <a href="#"> BACKSTAGE </a></li>
            <li> <a href="#"> KONTAKT </a></li>
    </ul>
    </div>
    </body>
</html> 
```

和CSS：

```
html 
{ 
    background: url(images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
#navigation
{
    width: 100%;
    height: 60px;
    background-color: black;
    margin-left: auto;
    margin-right: auto;
    padding: 0 0 0 0;
    position: absolute;
    bottom: 0px;
    border-top-style: solid;
    border-color: white;
    border-width: thin;
}
#navigation ul
{
    list-style-type: none;
    float: right;
    margin-left: auto;
    margin-right: auto;
}
#navigation ul li
{
    float: left;
    list-style: none;
    margin-left: 18px;
    margin-right: 18px;
}
#navigation li a
{
    color: #FFF; 
    text-decoration:none;
    font-family: "Calibri";
    text-transform:uppercase;
}

#navigation li a:hover
{
    text-decoration:none;
    color: #F69;
}
#navigation li a:active
{
    color: #F69;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:38:00.997

您需要将导航元素的任何宽度、高度、边距和填充设置为百分比值。也许还可以将百分比值设置为`font-size`. 只需玩弄数字，看看那会如何影响您的布局。简而言之，不要为布局使用固定的像素值。您可以使用它们为布局中的单个按钮或类似元素设置样式。

顺便说一句：浏览器支持`background-size`值`contain`和`cover`：

*   铬 3.0
*   火狐 (Gecko) 3.6 (1.9.2)
*   互联网浏览器 9.0
*   歌剧 10.0
*   Safari (WebKit) 4.1 (532)

（如[https://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)所述）

到您的虚线边框：您可以为这种布局使用水平重复的背景图像，或者为包装元素设置实线边框，为内部导航元素设置虚线边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:36:47.160

你试穿吗

```
#navigation
{
width: auto;
} 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:42:05.457

导航项目的边距属性需要是 % 或 em。现在，您已将它们明确设置为像素。这可以防止他们“缩放”

如果您使用静态 html 或从数据库中派生它们，您需要做的就是：

(100 / #ofNavs) /2 = 左 || 右边距值。

如果您使用边框等，您需要将其添加到您的图形数学中。

# facebook-graph-api - Facebook 通知编码

> ID：13386852
> 
> 赞同：0
> 
> 时间：2012-11-14T20:34:47.663
> 
> 标签：facebook-graph-api, asp.net-mvc-4

当使用 Facebook Graph API 向我的用户发送一些通知时，它会向他们发送乱码，如下所示：

![http://i.imgur.com/8ZvFT.png](../Images/a9866210a5ab38e5acdd9298bea81143.png)

**这是我的代码：**

```
public void sendFBNotificationByUserID(Guid userID, string msg, string url)
{
    try
    {
        // Facebook information from the user
        FacebookUser fbUser = getFacebookUserByUserID(userID);

        using (WebClient wc = new WebClient())
        {
            // Retrieve "App Access Token" from Facebook
            string appAccessToken = wc.DownloadString("https://graph.facebook.com/oauth/access_token?client_id=" + Global.fbAppID + "&client_secret=" + Global.fbAppSecret + "&grant_type=client_credentials");

            // Create POST parameters
            string POSTparam = "template=" + msg + "&href=" + url + "&" + appAccessToken;

            // POST to Facebook Graph API to send notification
            wc.UploadString("https://graph.facebook.com/" + fbUser.facebookID + "/notifications/", POSTparam);
        }
    }
    catch (Exception)
    {
    }
} 
```

任何的想法？

**编辑：**

我做了一些阅读`URL Encoding`，这段代码解决了我的问题：

```
msg = HttpUtility.UrlEncode(msg); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:40:22.457

这可能是因为您的页面的编码。如果编码不正确，某些字符会被打乱。也许尝试使用 UTF-8 或其他东西。我能想到的最好的。

# c# - Windows Server / Datacenter：将 CPU 关联设置为 > 64 个内核

> ID：13386855
> 
> 赞同：4
> 
> 时间：2012-11-14T20:35:00.407
> 
> 标签：c#, .net, windows, winapi, multiprocessing

SetThreadAffinityMask() 允许为 64 个逻辑核心（处理器）设置关联掩码。但是，Windows Datacenter 最多可以有 64 个 CPU，每个 CPU 都有很多内核（请参见[此处](http://social.technet.microsoft.com/Forums/en-US/winservergen/thread/d7d27752-1dcd-4884-b002-3284db41ab2b/)）。

> 64个内核的一组线程如何？

附言。我正在用 C# 编码，所以 .Net 答案是理想的，但 C 中的 API 也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:00:57.610

根据 MSDN，SetThreadAffinityMask() 为您当前的处理器组设置关联，每个处理器组可以有 64 个逻辑核心。使用 SetThreadGroupAffinity() 更改您的组。有关更多信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/dd405503(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd405503(v=vs.85).aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-07T13:45:45.430

我使用以下代码设置处理器组和 CPU 的关联性：

```
[StructLayout(LayoutKind.Sequential, Pack = 4)]
private struct _GROUP_AFFINITY
{
    public UIntPtr Mask;
    [MarshalAs(UnmanagedType.U2)]
    public ushort Group;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3, ArraySubType = UnmanagedType.U2)]
    public ushort[] Reserved;
}

[DllImport("kernel32", SetLastError = true)]
private static extern Boolean SetThreadGroupAffinity(
    IntPtr hThread,
    ref _GROUP_AFFINITY GroupAffinity,
    ref _GROUP_AFFINITY PreviousGroupAffinity);

[DllImport("kernel32", SetLastError = true)]
private static extern IntPtr GetCurrentThread();

/// <summary>
/// Sets the processor group and the processor cpu affinity of the current thread.
/// </summary>
/// <param name="group">A processor group number.</param>
/// <param name="cpus">A list of CPU numbers. The values should be
/// between 0 and <see cref="Environment.ProcessorCount"/>.</param>
public static void SetThreadProcessorAffinity(ushort groupId, params int[] cpus)
{
    if (cpus == null) throw new ArgumentNullException(nameof(cpus));
    if (cpus.Length == 0) throw new ArgumentException("You must specify at least one CPU.", nameof(cpus));

    // Supports up to 64 processors
    long cpuMask = 0;
    foreach (var cpu in cpus)
    {
        if (cpu < 0 || cpu >= Environment.ProcessorCount)
            throw new ArgumentException("Invalid CPU number.");

        cpuMask |= 1L << cpu;
    }

    var hThread = GetCurrentThread();
    var previousAffinity = new _GROUP_AFFINITY {Reserved = new ushort[3]};
    var newAffinity = new _GROUP_AFFINITY
    {
        Group = groupId,
        Mask = new UIntPtr((ulong) cpuMask),
        Reserved = new ushort[3]
    };

    SetThreadGroupAffinity(hThread, ref newAffinity, ref previousAffinity);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T00:03:50.820

为了使用超过 64 个 CPU，您必须考虑处理器组。详情参考MSDN：

[处理器组](http://msdn.microsoft.com/en-us/library/windows/desktop/dd405503.aspx)

# visual-studio - 查找结果不显示结果

> ID：13386856
> 
> 赞同：104
> 
> 时间：2012-11-14T20:35:04.450
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-2013, visual-studio-2015

今天我的 Visual Studio 2012 的查找结果功能停止工作。Find Results 窗口显示摘要信息，但不显示匹配的实际行。这是我的“查找结果”窗口显示的全部内容：

```
Find all "mytext", Subfolders, Find Results 1, Entire Solution, ""
  Matching lines: 40    Matching files: 10    Total files searched: 1129 
```

我已经尝试了此 Microsoft 论坛海报尝试的所有修复：

[http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/1a02f076-29f7-46d1-879a-f8ae6d6abe95](http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/1a02f076-29f7-46d1-879a-f8ae6d6abe95)

他的解决方案是**重新格式化并重新安装**. Microsoft MSDN 论坛助手的回答很棒：

> “很高兴知道你不会被这个奇怪的问题所困扰。”

有没有人找到解决这个问题的实际方法？

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-02-18T11:52:15.057

[检查此线程](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/40c9ad4a-8cee-4f3f-b420-c7cc0463942a/)中的注册表修复。这对我有帮助。

为了确保它不会消失，我在这里复制了**Martin Rosselle**的解决方案：

请检查以下注册表项是否正常。解决这个问题为我解决了这个问题。

*   复制下面的文本并将其保存为 .reg 文件。
*   转到 regedit.exe 并导入保存的 .reg 文件**，或者**只需使用注册表编辑器打开文件，然后在提示继续时单击是。

* * *

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{73B7DC00-F498-4ABD-AB79-D07AFD52F395}]
@="PSFactoryBuffer"

[HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{73B7DC00-F498-4ABD-AB79-D07AFD52F395}\InProcServer32]
@="C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\MSEnv\\TextMgrP.dll"
"ThreadingModel"="Both" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T19:12:36.397

我能够通过运行来解决这个问题：

```
Devenv.exe /ResetSettings 
```

从 Visual Studio 命令提示符，然后对我的 Visual Studio 安装运行修复。

对于这样一个简单的问题，仍然需要很长时间才能解决，但还不能完全重新格式化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-09T10:44:26.617

见这里：[Visual Studio 搜索](https://stackoverflow.com/questions/6343956/get-a-list-of-search-results-in-visual-studio) 原来是一个简单的快捷方式问题，Cntrl+Shift+F 而不是 Cntrl+F

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-30T00:26:09.050

这是 VS 中的一个已知错误，自 2005 年以来一直存在。单击“查找结果”框并单击 ctrl+break 几次。

如果这对您不起作用，还有一些其他的组合键应该 - 看看这里：

[Visual Studio 中没有搜索结果](http://www.andrewdenhertog.com/tips/solved-visual-studio-no-search-results/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T13:48:14.280

我只能通过修复我的 Visual Studio 安装来解决这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-29T08:00:54.000

重新启动 Visual Studio（在我的情况下为 2013 年）后，此问题已为我解决。因此，在深入研究任何更复杂的解决方案之前，请务必先尝试一下。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-19T15:44:23.310

我有一个几乎类似的问题，查找结果窗口停止显示代码中的匹配行。但是，它确实显示了文件。解决方案是取消选中“查找和替换”窗口 (Ctrl+Shift+F) 中的“仅显示文件名”复选框，这是我不小心选中的。

# vba - VBA Excel - Lopp 通过 Slicer Object 并复制和保存数据

> ID：13386863
> 
> 赞同：0
> 
> 时间：2012-11-14T20:35:40.250
> 
> 标签：vba, loops, pivot, slice

我在数据透视表（国家、城市、人）上有 3 个切片器过滤器，并且想要遍历所有最终结果并将数据保存为 pdf。

因此，如果我选择 COUNTY 和 CITY，我需要从所有 PERSON 中循环，将他们的数据保存为 pdf，然后移动到下一个 PERSON。

我一直在尝试，但现在信息超载，不知道如何让它工作：

```
Sub saveResultsAsPDF ()

Dim mySlicerCache As SlicerCache 
Dim mySlicerCacheLevel As SlicerCacheLevel 
Dim mySlicerItem As SlicerItem

Set mySlicerCache = ActiveWorkbook.SlicerCaches("PERSON") 
Set mySlicerCacheLevel = mySlicerCache.SlicerCacheLevels(2)

For Each mySlicerItem In mySlicerCacheLevel.SlicerItems    
    saveRangeToPDF
Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:56:10.563

我不熟悉切片，但如果我理解您的一般问题，您想操作数据透视表，将结果保存到 PDF，然后重复。这个怎么样：

1.  操纵枢轴。添加过滤器等。准备好后刷新数据透视表。
2.  将整个工作表另存为新的 PDF 文件。
3.  继续你的循环。

# java - a4j:support 函数在 h:commandLink 中只被调用一次

> ID：13386868
> 
> 赞同：1
> 
> 时间：2012-11-14T20:35:49.880
> 
> 标签：java, jsf, xhtml, richfaces, seam

我正在使用 JSF 1.2、Seam 2.2.2 和 Richfaces 3.3.3。我有一个 a4j:support 事件，当有人将鼠标悬停在链接上时会调用该事件。但是这个函数只在页面加载后被调用一次。如果我再次将鼠标悬停在链接上，a4support 事件不会调用该函数。任何人都知道可能是什么原因？

```
<s:div style="padding-top:10px;">
<rich:dataTable id="pendingOptyTbl" value="#{searchResultList}"
    var="item" style="width: 100%; border: none;">
    <rich:column style="border: none;">
         <s:div>
               <h:outputText value="#{item.label} : " />                
               <h:outputLink value="/aafdemo/pages/#{item.label}/#{item.label}.seam"  styleClass="actionLink">                  
                   <h:outputText value="#{item.value.name}" />
                   <f:param name="#{item.label}Id" value="#{item.value.id}" />
                   <a4j:support event="onmouseover" immediate="true"    action="#searchController.test()}" ajaxSingle="true" reRender="details"/>
                 </h:outputLink>
          </s:div>
    </rich:column>
</rich:dataTable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:52:08.257

像这样修改你的输出 div：

```
<h:panelGroup id="details"><s:div style="float:right;" rendered="#{resultObject!=null}"> <h:outputText value="details" /> <h:outputText value="#{resultObject.value.id}"/> </s:div></h:panelGroup> 
```

需要始终渲染元素才能使其正常工作！

**编辑**：正如 Luiggi 提到的，bean resultObject 必须在 SessionScope 或 KeepAlive

# indexing - 流星账户指数

> ID：13386870
> 
> 赞同：0
> 
> 时间：2012-11-14T20:36:01.527
> 
> 标签：indexing, meteor, accounts

我想知道 Meteor.users 集合的用户名、电子邮件地址和个人资料名称是否被索引，如果没有，有没有办法索引它们？

在没有索引的情况下在该字段上运行正则表达式是否花费很多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:33:47.377

这些是 Meteor 当前在`users`集合中确保的索引——来自[accounts_server.js](https://github.com/meteor/meteor/blob/master/packages/accounts-base/accounts_server.js)

```
/// DEFAULT INDEXES ON USERS
Meteor.users._ensureIndex('username', {unique: 1, sparse: 1});
Meteor.users._ensureIndex('emails.address', {unique: 1, sparse: 1});
Meteor.users._ensureIndex('services.resume.loginTokens.token',
                        {unique: 1, sparse: 1}); 
```

# java - 是否可以在 DOS 6.22 中运行 java 应用程序？

> ID：13386877
> 
> 赞同：8
> 
> 时间：2012-11-14T20:36:30.457
> 
> 标签：java, c++, c, dos

这个问题源于我们这里的一个问题，我们正在寻找解决它的方法。我们有一台非常旧的机器（运行 DOS 6.22），它需要与用 Java 编写的串行应用程序通信。但是我们既没有找到基于 C/C++ 事件的 rs232 库来实现 DOS 机器的程序（还），也没有找到已经编译的程序来完成这项工作。但是由于我们已经有一个基于 Java 事件的 rs232 程序，我们想知道是否可以编译它并从中制作一个 .exe 以将其安装在旧机器上。

如果可能的话，这将是解决问题的简单方法，但如果不是，是否有任何 rs232 库来为我们的旧机器构建程序？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:21:21.940

Linux gcj 能够将 java 程序编译为无需 VM 即可运行的可执行代码。因此，您可以在 linux 机器上使用 gcj 交叉编译并为 DOS 创建一个 .EXE。见[http://gcc.gnu.org/java](http://gcc.gnu.org/java)。对于它支持的平台列表，请参见[http://gcc.gnu.org/install/specific.html](http://gcc.gnu.org/install/specific.html)，DOS 将是列表中的第 7 项。

也就是说，我不认为你是基于 java 的 rs232 库可以工作，即使程序的其余部分可以工作，而且你会有各种 Java 不容易忍受的其他限制，比如著名的640K 内存限制，在实际系统中您会发现它更接近 440K。

您会发现基于事件的编程的另一个复杂之处是 DOS 是单线程的。因此，除了协作多任务处理之外，您不能轻易使用任何形式的基于事件的编程。这并不难，但要注意这一点。

在 DOS 中，您实际上将编写一个串行设备驱动程序来与串行端口通信，就像操作系统驱动程序一样，设置寄存器并启动数据传输，就像 char 驱动程序在 linux 中所做的那样。[在http://en.wikibooks.org/wiki/Serial_Programming/DOS_Programming](http://en.wikibooks.org/wiki/Serial_Programming/DOS_Programming)上有一本关于该主题的 wikibook，内容丰富。

# iphone - Opencv cvvideocamera 输出捕获会话

> ID：13386885
> 
> 赞同：2
> 
> 时间：2012-11-14T20:36:52.870
> 
> 标签：iphone, ios, opencv, avcapturesession

我正在使用 openCV 进行一些实时视频处理。事实上，在进行处理时屏幕有点不稳定。我想做的仍然是像往常一样通过 CvVideoCameraDelegate 方法处理图像，但只向用户显示捕获会话视频输出，这*应该*不那么不稳定。

我在委托回调方法中完成所有视频处理

```
- (void)processImage:(Mat&)image; 
```

因此，当我加载视图时，我会尝试对其进行设置，以便捕获会话是正在输出的内容。看起来您可以像这样访问 CVVideoCamera 的捕获会话：

```
AVCaptureSession *session = videoCamera.captureSession; 
```

那么，我的布局文件中有一个视图，我想将它连接到名为 baseView 的视图。我尝试这样做：

```
AVCaptureVideoPreviewLayer *previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:session];
CGRect screenRect = baseView.bounds;
previewLayer.frame = screenRect; // Assume you want the preview layer to fill the view.
[baseView.layer addSublayer:previewLayer]; 
```

但是，这不起作用。只是一个纯白的屏幕。我可以看出，视频处理仍在后台进行，但无论如何都没有输出视频。

编辑：请注意，我不只是设置了一个额外的捕获会话来执行此操作，因为我试图限制 CPU 任务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:19:09.993

好的，我想通了：

我试着输入

```
BOOL loaded = videoCamera.captureSessionLoaded; 
```

事实证明，相机没有完全加载。事实上，在您开始捕获之前它不会完全加载（显然我猜？）

所以只要我把我的代码放在下面

```
[self.videoCamera start]; 
```

一切似乎都按预期工作

# c - 确定使用 recv 读取的字节数

> ID：13386886
> 
> 赞同：0
> 
> 时间：2012-11-14T20:36:58.517
> 
> 标签：c, winsock, recv

我有一个问题`recv`。我编写了一个用数据填充结构的函数，以及从套接字读取的数据的长度（以字节为单位）。

为了测试，我只是`stdout`根据读取的字节总数逐字节打印数据`recv`。出于某种原因，读取的字节数有时似乎正确，有时则不正确，具体取决于我正在查询的站点。例如，以下代码在某些网站上按预期工作：

```
data->data_sz = 0;
while((i = recv(sock, data->data + data->data_sz, CHUNKSIZE, 0)) > 0)
{
    data->data_sz += i;
    if(databff - data->data_sz < CHUNKSIZE)
    {
        databff *= 2;
        if(!(tmp = realloc(data->data, databff)))
        {
            free(data->data);
            (void) WSACleanup();
            return 0;
        }
        data->data = tmp;
    }
}
i = strsbstr(data->data, "\r\n\r\n") + 4;                   //i = the position of the first char after header info  
if(i >= 0)  
{
    data->data_sz = data->data_sz - i;                      //data->data_sz = number of bytes without header info
    memmove(data->data, data->data + i, data->data_sz);
    if(!(tmp = realloc(data->data, data->data_sz)))
    {
        free(data->data);
        (void)WSACleanup();
        return 0;
    }
        data->data = tmp;                       
    }
    else
    {
        free(data->data);
        (void) WSACleanup();
        return 0;
    }
    return 1;
} 
```

要将数据打印到`stdout`我只需使用 for 循环：

```
//t_html->data_sz points to my data->data_sz structure
//t_html->data points to my data->data structure
for(i = 0; i <= t_html->data_sz; i++) (void)fputc((int)t_html->data[i], stdout); 
```

上面的代码适用于某些站点，但在其他站点上失败（例如，在查询时，`http://www.google.com`我希望最终字符是，`</html>`但我得到了`</html>l`）。

基本上我的问题是`data->data_sz`（接收的字节数）没有正确计算，这使得无法正确使用收集的数据。我真的不知道现在该做什么。

编辑：`strsbstr`这是上面代码中调用的函数：

```
int strsbstr(const char *str, const char *sbstr)
{
    char *sbstrlc;

    if(!(strcmp(str, sbstr))) return 0;
    if(!(sbstrlc = strstr(str, sbstr))) return -1;
    return (int) (sbstrlc - str);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:02:25.853

1.  `recv(sock, data->data + data->data_sz, CHUNKSIZE, 0)`是潜在的问题。为什么？`CHUNKSIZE`因为您的缓冲区中可能没有剩余空间。实际上，您已经`databff - data->data_sz`离开了（假设`data`分配给 的大小`databff`）。这完全取决于 and 的初始值`databff`，`CHUNKSIZE`我看不到，我想指出这一点以防万一。
2.  不能保证数据以 NULL 字符结尾。您的打印循环说`i <= t_html->data_sz;`哪个是错误的。应该是`i < t_html->data_sz;`。如果您使用`<=`，则您正在访问一个超出缓冲区的内容，这可能是您有时会得到一个奇怪字符的原因，有时却不会。

# php - 阻止页面跳到顶部

> ID：13386887
> 
> 赞同：-2
> 
> 时间：2012-11-14T20:36:58.003
> 
> 标签：php, jquery

我有这个脚本来附加一组输入字段。它工作正常，但我的问题是每次单击页面中间的附加按钮时，页面都会跳转到页面顶部。我怎样才能阻止它跳到顶部？抱歉，这是附加脚本：

```
var count = 0;
$(function(){
$('a#add_field').click(function(){
count += 1;

$('#activation').append(
             '<div id="features_remove" style="float:left; width: 11%; margin-left:115px;">'
            +'<label>features remove</label>'
            +'<select id="features_remove' + count + '" name=features_remove' + count + '" class="input-medium" >'
                +'<option value="" selected="&nbsp;" >&nbsp;</option>'
                +'<option value="MPP" >MPP</option>'
                +'<option value="50 Data" >50 Data</option>'
                +'<option value="Navigation" >Navigation</option>'
                +'<option value="Insurance" >Insurance</option>'
                +'<option value="Road Side Assistance" >Road Side Assistance</option>'
            +'</select>'  
            +'</div>'
             ); 
      });       
}); 
```

是的，它是一个按钮

```
 <a href="#" class="btn btn-mini btn-danger" id="add_field"><span>Add In-Store Activation</span></a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T20:39:40.847

由于没有发布代码，我只是假设这是因为您的按钮看起来像这样：

```
<a href="#" id='myButton'>Button Text</a> 
```

这`#`告诉页面跳转到该锚点。由于没有定义该锚点，它会跳到顶部。

试试这个：

```
<a href="javascript:;" id='myButton'>Button Text</a> 
```

或在您的 javascript 代码中：

```
$("#myButton").click(function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T20:40:26.827

您应该发布一些代码，但根据您所写的内容，我假设您的“按钮”实际上是与`href="#"`.

为了停止跳转，请给它一个 id，例如`id="mybutton"`. 然后，下面的 jQuery 应该会变魔术：

```
$('#mybutton').on('click',function(e){
    if (e.preventDefault)
        e.preventDefault();
    else
        e.stop();
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:01:34.793

用于添加字段的“按钮”实际上是`<a href="#">`链接吗？

jQuery 可能会将您移动到页面顶部，因为您可能使用哈希来阻止链接的默认行为。但是 jQuery（或它的一些插件）可能使用哈希作为内联锚。IE。href="#listTop" 将在页面上查找 id="listTop" 元素并将屏幕顶部滚动到该元素的顶部。href="#" 会有效地将您滚动到屏幕顶部。

请记住从您的 jQuery click 事件处理程序中返回 false 或将参数 e 添加到事件处理程序中并调用 e.preventDefault(); 在方法体中。

```
 <a href="" class="addOne">add row</a> 
```

和

```
$('addOne').click(function(e){
  e.preventDefault();
  // the rest of your logic
}); 
```

这是我可以通过提供的信息为您提供的最佳照片。您可以通过提供一些代码和更详细的情况描述来帮助自己。

# sql - 列出参与多个项目的员工姓名

> ID：13386890
> 
> 赞同：3
> 
> 时间：2012-11-14T20:37:05.447
> 
> 标签：sql, oracle11g

有两个表与此相关。工作和员工。这两个表的内容是员工的 EMPID NAME SALARY DID（部门 ID）和 PID EMPID HOURS from work on。我写的SQL是

```
select e.name, w.pid
from employee e, workon w
where e.empid = w.empid
group by e.name, w.pid, w.empid
having count (e.name) > 1
order by w.pid 
```

我一直在试图弄清楚为什么这段代码不会给我从事多个项目的员工。请帮我弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:50:34.927

您的 group by 每个项目每个员工返回一行，根据定义，这永远不会超过 1 行

下面的sql应该可以工作

警告：我不确定这将如何影响服务器使用的性能，风险自负

以下将为每个员工每个工作返回 1 行，但仅限于具有超过 1 个工作记录的员工（因此，如果员工有 5 个工作记录，您将获得 5 行具有相同的 e.name 和 5 个不同的 w.pid 值）

```
select e.name, w.pid
from employee e, workon w
where e.empid = w.empid
and e.empid in (
select w.empid
from workon w -- there was a typo here originally
group by 1
having count (*) > 1
)
order by e.name, w.pid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:48:29.053

```
SELECT E.NAME, W.PID
from employee e inner join workon w on e.empid = w.empid
where e.empid in (select EMPID from workon GROUP BY EMPID HAVING COUNT(EMPID) > 1) 
```

子查询正在计算与该 empid 关联的所有记录与超过 1 个项目，并且主查询正在检查 empid 表中的 empid 是否在子查询的结果中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-13T10:51:13.963

您可以尝试以下查询。

在一个变量中，所有不同的计数部门都取自部门主表。之后，仅选择了那些计数与关系表中不同的链接部门计数匹配的员工。

```
CREATE TABLE employees
(
    employee_id int NOT NULL CONSTRAINT pk_employees PRIMARY KEY,
    employee_name nvarchar(128) NOT NULL CONSTRAINT uk_employees_employee_name UNIQUE
);

CREATE TABLE departments
(
    department_id int NOT NULL PRIMARY KEY,
    department_name nvarchar(128) NOT NULL CONSTRAINT uk_departments_department_name UNIQUE
);

CREATE TABLE department_employees
(
    department_id int NOT NULL CONSTRAINT fk_department_employees_departments REFERENCES departments(department_id),
    employee_id int NOT NULL CONSTRAINT fk_departement_employees_employees REFERENCES employees(employee_id),
    CONSTRAINT pk_deparment_employees PRIMARY KEY (department_id, employee_id)
)

INSERT INTO employees
VALUES (1, 'John Doe'), (2, 'Jane Doe'), (3, 'William Doe'), (4, 'Margaret Doe')

INSERT INTO departments
VALUES (1, 'Accounting'), (2, 'Humman Resources'), (3, 'Marketing')

INSERT INTO department_employees
VALUES 
    (1, 1), (2, 1), (3, 1), 
    (2, 2), (2, 3),
    (3, 3), (3, 4)

declare @distinctDeptCount int 
SET @DistinctDeptCount = (SELECT Count(Distinct department_id) FROM departments)
--SELECT @DistinctDeptCount

SELECT Distinct employees.employee_id, employee_name
from employees     
where employees.employee_id in (
select employee_id from department_employees GROUP BY employee_id HAVING COUNT(department_id) >= @distinctDeptCount
) 
```

这是现场演示[Emp。with all Department](https://rextester.com/KLJFST63396) 输出如下图

```
employee_id employee_name
1           John Doe 
```

# sql - SQL Server 插入示例

> ID：13386894
> 
> 赞同：37
> 
> 时间：2012-11-14T20:37:31.167
> 
> 标签：sql, sql-server, insert

我偶尔在 Oracle 和 SQL Server 之间切换，经常忘记如何在 SQL Server 中完成一些最琐碎的任务。我想使用 SQL 手动将一行数据插入到 SQL Server 数据库表中。最简单的方法是什么？

例如，如果我有一个 USERS 表，其中包含 ID（编号）、FIRST_NAME 和 LAST_NAME 列，我使用什么查询将行插入到该表中？

另外，如果我想一次插入多行，我应该使用什么语法？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-14T20:37:31.167

要插入单行数据：

```
INSERT INTO USERS
VALUES (1, 'Mike', 'Jones'); 
```

要对特定列（而不是所有列）进行插入，您必须指定要更新的列。

```
INSERT INTO USERS (FIRST_NAME, LAST_NAME)
VALUES ('Stephen', 'Jiang'); 
```

在 SQL Server 2008 或更高版本中插入多行数据：

```
INSERT INTO USERS VALUES
(2, 'Michael', 'Blythe'),
(3, 'Linda', 'Mitchell'),
(4, 'Jillian', 'Carson'),
(5, 'Garrett', 'Vargas'); 
```

要在早期版本的 SQL Server 中插入多行数据，请使用“UNION ALL”，如下所示：

```
INSERT INTO USERS (FIRST_NAME, LAST_NAME)
SELECT 'James', 'Bond' UNION ALL
SELECT 'Miss', 'Moneypenny' UNION ALL
SELECT 'Raoul', 'Silva' 
```

注意，“INTO”关键字在 INSERT 查询中是可选的。来源和更高级的查询可以在[这里](http://www.simple-talk.com/sql/learn-sql-server/working-with-the-insert-statement-in-sql-server/)找到。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-13T12:26:31.890

以下是向表中插入数据的 4 种方法。

1.  表列顺序已知时的简单插入。

    `INSERT INTO Table1 VALUES (1,2,...)`

2.  简单插入到表的指定列中。

    `INSERT INTO Table1(col2,col4) VALUES (1,2)`

3.  批量插入时...

    1.  您希望将 Table2 的每一列插入 Table1
    2.  你知道Table2的列顺序
    3.  您确定 Table2 的列顺序在使用此语句时不会更改（也许您该语句只会使用一次）。

    `INSERT INTO Table1 {Column sequence} SELECT * FROM Table2`

4.  将选定数据批量插入到 Table2 的指定列中。

.

```
INSERT INTO Table1 (Column1,Column2 ....)
    SELECT Column1,Column2...
       FROM Table2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-25T13:01:01.940

我希望这能帮到您

创建表：

```
create table users (id int,first_name varchar(10),last_name varchar(10)); 
```

将值插入表中：

```
insert into users (id,first_name,last_name) values(1,'Abhishek','Anand'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-02T10:56:19.473

**一张表数据插入另一张表**

“插入到partner_products（PARTNER_ID，partner_category_id，pantryo_main_category_id，pantryo_inventory_id，partner_product_name，partner_product_brand，partner_product_price，partner_product_quantity，partner_product_unit）选择 '$ JSON [PARTNER_ID]'，partner_category_id，pantryo_main_category_id，pantryo_inventory_id，pantryo_item_name，pantryo_brand_name，pantryo_item_price，pantryo_item_qty，pantryo_item_unit从pantryo_inventory其中partner_category_id='".$json['partner_category']."'"

# asp.net-mvc - 虚拟目录覆盖 MVC 路由

> ID：13386900
> 
> 赞同：0
> 
> 时间：2012-11-14T20:37:54.987
> 
> 标签：asp.net-mvc, iis-7.5

我有一个 Web 应用程序 A，它有一个虚拟目录，它也是一个应用程序 B。我尝试在 A 中创建一个 MVC 路由，以使 URL 看起来在虚拟目录中，但仍由 A 处理，并且不是B。但是，它似乎被忽略了。有没有办法让 MVC 路由优先于虚拟目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:34:58.927

如果您希望 App A 覆盖 App B，您将不得不添加一些*Url Rewriting*配置，而不是 MVC 路由逻辑，如果您使用的是 IIS7+，我相信您应该在 web 中进行设置。 App A 的配置文件。IIS 必须知道将请求转发到哪个应用程序；在调用 MVC 路由时，应用程序已经被选中（一旦调用实际应用程序，您就无法*取消选择B * ）。*您还可以在 App B 中设置 URL 重写规则以指向 App A，但我不太确定它是如何工作的。

*请注意，我所说的关于应用程序调用的内容很可能并不完全正确。但老实说，我不知道能否对一个url重写请求的生命周期给出一个完全准确的描述；我只是希望我用简化的术语粗略地估计发生的事情。只需了解有关 IIS 和 IIS7 请求生命周期中 url 重写的更多信息，请访问以下链接：*

[http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module) [http://msdn.microsoft.com/en-us/library/bb470252(v=vs .100).aspx](http://msdn.microsoft.com/en-us/library/bb470252(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:32:43.907

所以你有两个应用程序 A 和 B。你说你试图创建 MVC 路由但是在哪个应用程序中？如果您可以多解释一下您要达到的目标，那将更容易回答。

ASP.net 路由（也可在 Web 表单中使用）可以采用您想要的任何形式。您必须记住的一件事是路线图是贪婪的。因此，如果首先找到最通用的路线，无论如何它都不会检查下面的任何内容。所以顺序应该是最具体的，最后一个应该是最一般的。

检查这篇文章[http://yogiorchard.azurewebsites.net/archiving-items-and-a-routing-lesson](http://yogiorchard.azurewebsites.net/archiving-items-and-a-routing-lesson)

希望这可以帮助

# regex - 如何使用正则表达式剪切基本路径

> ID：13386905
> 
> 赞同：0
> 
> 时间：2012-11-14T20:38:13.973
> 
> 标签：regex, linux, bash

这是示例

```
SF_Library/example/Platform/Analyses-PLATFORM.part0.xml
SF_Library/example/Platform/Models-PLATFORM.part0.xml
SF_Library/example/Platform/Models-PLATFORM.car
SF_Library/example/Platform/DS-PLATFORM.car 
```

我想抓住下面的基本路径。

```
SF_Library/example/Platform/ 
```

有人知道我应该使用什么正则表达式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T20:42:15.973

您不需要正则表达式：

```
#!/bin/bash

fullpath="SF_Library/example/Platform/Analyses-PLATFORM.part0.xml"
# or if you read them then: while read fullpath; do

basename=${fullpath%/*}

# or if you read them then: done < input_file.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T20:42:33.850

正则表达式不适用于提取子字符串。为什么不使用`dirname`命令？

```
$ dirname /home/foo/whatever.txt
/home/foo
$ 
```

如果您在变量中需要它：

```
DIRECTORY=`basename "SF_Library/example/Platform/DS-PLATFORM.car"` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T20:42:31.710

您可以使用**[dirname](http://linux.die.net/man/1/dirname)**命令：

```
dirname SF_Library/example/Platform/DS-PLATFORM.car 
```

它会给你：`SF_Library/example/Platform`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T20:43:14.847

好吧，我就纵容你。

```
^(.*/).*$ 
```

解剖：

```
^     beginning of string
(     start of capture group
  .*  series of any number of any character
  /   a slash
)     end of capture group
.*    series of any number of characters that are not slashes
$     end of string 
```

这是因为`*`贪心：它匹配尽可能多的字符（因此它将包括所有斜杠直到最后一个）。

但正如其他答案所指出的那样，正则表达式可能不是最好的方法。

# javascript - 子控件命名标准变了？

> ID：13386910
> 
> 赞同：3
> 
> 时间：2012-11-14T20:38:50.700
> 
> 标签：javascript, asp.net, controls

我在 ASP.NET 页面上有一个 JavaScript 函数，当在网格标题中选中“检查全部”复选框时，它将检查客户端网格中的所有框。它通过在 JS 函数中为循环中的每一行构造实际的控件 ID（即 + '_ *ctl' + i + '* ' + 其中 i 是当前循环的行索引）然后将生成的控件设置为检查。

这已经工作了很长时间，但现在它已经停止工作，原因是 .NET 渲染引擎或创建内部控件 ID 的任何东西不同。例如，当在另一台服务器上查看页面源时，该页面仍在正常工作，控件名称为**dgMain__ctl2_cbxChecked**，但不工作的服务器上的控件名称为**dgMain__ctl02_cbxChecked**。不同之处在于，在不工作的版本的“ctl”部分的数字 ID 前面有一个额外的“ **0 ”。**

我想知道这是否与.NET 的版本有关？它不能在我相对较新的本地机器上运行（用于在旧机器上运行），但它仍然可以在部署在生产环境中的旧服务器上运行。两个版本都运行 ASP.NET 1.1（是的，我知道 - 与时俱进）。

关于如何解决这个问题的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:45:01.617

这是一种相当危险的做法。相反，您应该收集生成的控件`ClientID`的服务器端，然后使用`ClientScriptManager`. 另一种方法是使用`CssClass`并使用 jQuery 或其他一些 DOM 操作库来查找您的控件。

控件命名约定使得 ID 无法保证。它可以从 .NET 版本更改为版本（尽管不太可能），并且可以根据页面上的其他控件或用户控件的嵌套级别等进行更改。

# javascript - 使用 Javascript 获取点击单词的句子

> ID：13386911
> 
> 赞同：12
> 
> 时间：2012-11-14T20:38:52.853
> 
> 标签：javascript, jquery

这是我遇到的一个问题，我不太确定如何解决它。

假设我有一段：

```
"This is a test paragraph. I love cats. Please apply here" 
```

我希望用户能够单击句子中的任何一个单词，然后返回包含它的整个句子。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T20:41:52.500

您首先必须将段落拆分为元素，因为您无法（轻松）检测到没有元素的文本点击：

```
$('p').each(function() {
    $(this).html($(this).text().split(/([\.\?!])(?= )/).map(
      function(v){return '<span class=sentence>'+v+'</span>'}
   ));
}); 
```

请注意，它会正确拆分像这样的段落：

```
<p>I love cats! Dogs are fine too... Here's a number : 3.4\. Please apply here</p>​ 
```

然后你会绑定点击：

```
$('.sentence').click(function(){
    alert($(this).text());
}); 
```

[示范](http://jsfiddle.net/HKHGQ/)

*我不知道在英语`:`中是否是句子之间的分隔符。如果是这样，它当然可以添加到正则表达式中。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T21:11:52.747

首先，准备好接受一定程度的不准确。这从表面上看似乎很简单，但尝试解析自然语言是一种疯狂的练习。那么，让我们假设所有句子都被`.`、`?`或标点`!`。我们可以暂时忘记 interrobangs 等等。让我们也忽略引用的标点，例如`"!"`，它不会结束句子。

另外，让我们尝试在标点符号后加引号，这样就`"Foo?"`以 as`"Foo?"`和 not结尾`"Foo?`。

最后，为简单起见，我们假设段落内没有嵌套标签。这并不是一个真正安全的假设，但它会简化代码，并且处理嵌套标签是一个单独的问题。

```
$('p').each(function() {
    var sentences = $(this)
        .text()
        .replace(/([^.!?]*[^.!?\s][.!?]['"]?)(\s|$)/g, 
                 '<span class="sentence">$1</span>$2');
    $(this).html(sentences);
});

$('.sentence').on('click', function() { 
    console.log($(this).text()); 
});​ 
```

它并不完美（例如，引用的标点符号会破坏它），但它会在 99% 的时间里起作用。

*   现场演示：http: [//jsfiddle.net/SmhV3/](http://jsfiddle.net/SmhV3/)
*   可以处理引用的标点符号的稍微放大的版本：http: [//jsfiddle.net/pk5XM/1/](http://jsfiddle.net/pk5XM/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T20:46:17.423

1.  匹配句子。您可以为此使用正则表达式`/[^!.?]+[!.?]/g`。
2.  将每个句子替换为`span`具有单击事件以提醒整个跨度的包装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T20:43:34.080

我建议你看看[JavaScript 中的选择和范围](http://help.dottoro.com/ljfjepre.php)。

没有方法解析，它可以让你获得当前选择的设置，所以你必须自己编写代码......

用于获取基于跨浏览器的 Selection Rang 的 Javascript 库是[Rangy](http://code.google.com/p/rangy/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T06:08:12.203

不知道如何获得完整的句子。但是如果你用空格分割每个单词，你可以尝试这个来逐字获取。

```
 <div id="myDiv" onmouseover="splitToSpans(this)" onclick="alert(event.target.innerHTML)">This is a test paragraph. I love cats. Please apply here</div>
function splitToSpans(element){
    if($(element).children().length) 
        return;
    var arr = new Array();
    $($(element).text().split(' ')).each(function(){
    arr.push($('<span>'+this+' </span>'));
    });
    $(element).text('');
    $(arr).each(function(){$(element).append(this);});
} 
```

# mysql - MySQL Select Dates within Calendar week

> ID：13386920
> 
> 赞同：0
> 
> 时间：2012-11-14T20:39:20.070
> 
> 标签：mysql

I want to select all data from a table where a `last_update` field is 'this week'. So between the previous Sunday, and the upcoming Saturday.

I found this answer that finds dates LAST Week, but I can't quite figure out how to tailor it for what I need, which is this calendar week.

```
SELECT * FROM items
WHERE last_update >= curdate() - INTERVAL DAYOFWEEK(curdate())+6 DAY
AND last_update < curdate() - INTERVAL DAYOFWEEK(curdate())-1 DAY 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:59:23.573

I think I found the answer on this one:

```
SELECT * FROM items
WHERE last_update >= curdate() - INTERVAL DAYOFWEEK(curdate())-1 DAY
AND last_update <= curdate() + INTERVAL 7 DAY - DAYOFWEEK(curdate()) 
```

# grails - 文件上传仅指定内容类型的带有枚举的图像

> ID：13386922
> 
> 赞同：1
> 
> 时间：2012-11-14T20:39:26.437
> 
> 标签：grails, file-upload, content-type

我正在使用 grails 的 HDImageService 插件来完成缩放用户上传的图像的繁重工作。我创建了 ImageService.groovy 以保存到我的 Amazon S3 存储桶。一切正常，用户选择文件，点击发布，然后 wahla 图像被缩放、存储和显示。我的问题是我不知道如何限制用户上传图片以外的文件。我只想允许上传 jpeg、jpg、gif 或 png 类型的文件。我用这些变量创建了一个 ENUM 类，但我不知道在哪里或如何实现。谁能指出我正确的方向

* * *

RegistrationController.groovy：获取文件并保存到存储桶

```
 if ( params.photo ) {
            MultipartFile file = request.getFile( 'photo' )
            byte[] fileBytes = file.bytes
            ByteArrayInputStream bais = new ByteArrayInputStream( fileBytes )
            BufferedImage image = ImageIO.read( bais )
            def width = image.width
            def height = image.height
            def maxWidth = 500

            // Calculate the ratio that we will need to resize the image
            double ratio = 1.0f
            if ( width > maxWidth ) {
                def r = maxWidth / width
                ratio = r < 1.0f ? r : 1.0f
                bais.reset()
                fileBytes = hdImageService.scale( bais, maxWidth, Math.round( height * ratio ) as int )
            }

            geolink.custPhoto = imageService.storeS3Image(
                imageService.buildPPJPhotoPath( geolink, file.getOriginalFilename() ),
                fileBytes,
                file.contentType
            )
        } 
```

* * *

ImageService.groovy：枚举

```
 String getFormatName( byte[] raw ) {
    try {
        // Create an image input stream on the image
        ImageInputStream iis = ImageIO.createImageInputStream( new ByteArrayInputStream( raw ) )

        // Find all image readers that recognize the image format
        Iterator iter = ImageIO.getImageReaders(iis)
        if (!iter.hasNext()) {
            // No readers found
            log.debug( "Unable to get format" )
            return null;
        }

        // Use the first reader
        ImageReader reader = (ImageReader)iter.next()

        // Close stream
        iis.close()

        // Return the format name
        log.debug( "Format: ${reader.getFormatName() }" )
        return reader.getFormatName()
    }
    catch (IOException e) {
        log.warn( "Unable to determine image format", e )
    }
    // The image could not be read
    return null;
}

ImageFormat getContentType( String filename ) {
    String[] parts = filename.split( '\\.' )
    return ImageFormat.valueOf( parts[parts.length - 1].toUpperCase() )
}}

    public enum ImageFormat {
JPEG( 'image/jpeg', 'jpg' ),
JPG( 'image/jpeg', 'jpg' ),
PNG( 'image/png', 'png' ),
GIF( 'image/gif', 'gif' )

String mimeType
String extension

public ImageFormat( String mime, String ext ) {
    this.mimeType = mime
    this.extension = ext
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T20:44:37.363

这是我的做法。将其修改为 Enum 应该很容易：

```
def downloadedFile = request.getFile('imageFile')
def okContentTypes = ['image/png', 'image/jpeg', 'image/jpg', 'image/gif']

if (!okContentTypes.contains(downloadedFile.getContentType())) {
    myDomainInstance.errors.rejectValue("image", "Image type must be one of: ${okContentTypes}")
} 
```

# jackson - 为什么@JsonUnwrapped 不适用于列表？

> ID：13386930
> 
> 赞同：19
> 
> 时间：2012-11-14T20:40:12.097
> 
> 标签：jackson

我正在使用杰克逊 2.1.0。鉴于：

```
public static final class GetCompanies
{
    private final List<URI> companies;

    /**
     * Creates a new GetCompanies.
     * <p/>
     * @param companies the list of available companies
     * @throws NullPointerException if companies is null
     */
    @JsonCreator
    public GetCompanies(@JsonUnwrapped @NotNull List<URI> companies)
    {
        Preconditions.checkNotNull(companies, "companies");

        this.companies = ImmutableList.copyOf(companies);
    }

    /**
     * @return the list of available companies
     */
    @JsonUnwrapped
    @SuppressWarnings("ReturnOfCollectionOrArrayField")
    public List<URI> getCompanies()
    {
        return companies;
    }
} 
```

当输入列表包含`http://test.com/`时，Jackson 生成：

```
{"companies":["http://test.com/"]} 
```

代替：

```
["http://test.com/"] 
```

有任何想法吗？

**更新**：有关相关讨论，请参阅[https://github.com/FasterXML/jackson-core/issues/41](https://github.com/FasterXML/jackson-core/issues/41)。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-15T00:29:05.263

在这种情况下，如果这行得通，您最终会尝试生成以下内容：

```
{ "http://test.com" } 
```

这不是合法的 JSON。`@JsonUnwrapped`真的只是去除了一层包装。尽管理论上可以使其适用于“数组中的数组”的情况，但事实并非如此。事实上，我想知道添加此功能是否是一个错误：主要是因为它鼓励使用通常违反数据绑定最佳实践（简单性，一对一映射）的使用。

但是可行的是`@JsonValue`：

```
@JsonValue
private final List<URI> companies; 
```

这意味着“使用此属性的值而不是序列化包含它的对象”。

并且 creator 方法实际上可以按原样工作，不需要`@JsonUnwrapped`or `@JsonProperty`。

这是更正后的代码：

```
public static final class GetCompanies
{
    private final List<URI> companies;

    /**
     * Creates a new GetCompanies.
     * <p/>
     * @param companies the list of available companies
     * @throws NullPointerException if companies is null
     */
    @JsonCreator
    public GetCompanies(@NotNull List<URI> companies)
    {
        Preconditions.checkNotNull(companies, "companies");

        this.companies = ImmutableList.copyOf(companies);
    }

    /**
     * @return the list of available companies
     */
    @JsonValue
    @SuppressWarnings("ReturnOfCollectionOrArrayField")
    public List<URI> getCompanies()
    {
        return companies;
    }
} 
```

# c++ - 调用函数时出错：““int”类型的参数与“int *”类型的参数不兼容

> ID：13386935
> 
> 赞同：0
> 
> 时间：2012-11-14T20:40:19.543
> 
> 标签：c++

我被分配了一个需要 25 个双精度数组的程序。然后需要翻转和显示。我似乎无法让 flipArray 函数工作。

```
#include <iostream>

using namespace std;

const int NUMSCORES = 25; 
//double getData(double &myArray);
void flipArray (int arr[]);

int main(void)
{   
    int scores[NUMSCORES], i;
    for(i=0; i<NUMSCORES; i++){
        cout << "Please enter scores #" << i+1 << ": ";
        cin >> scores[i];
    }

    cout << "Your test scores:\n";
    for(i=0; i<NUMSCORES; i++)
        cout << "\tTest score #" << i+1 << ": " << scores[i] << endl;

    flipArray(NUMSCORES);
    return;
    }

void flipArray(int arr[])
{
    int j;
    for (j=NUMSCORES-1; j>=0; j--)
        cout << arr[j] << "\t";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:44:13.143

```
flipArray(NUMSCORES); 
```

您的问题是您的参数是分数的数量（ an `int`），而不是数组（将作为 an 传递`int*`）。尝试这个：

```
flipArray(scores); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:44:37.557

错误消息讲述了整个故事：

```
prog.cpp: In function ‘int main()’:
prog.cpp:22: error: invalid conversion from ‘int’ to ‘int*’
prog.cpp:22: error:   initializing argument 1 of ‘void flipArray(int*)’
prog.cpp:23: error: return-statement with no value, in function returning ‘int’ 
```

这两行是错误的：

```
flipArray(NUMSCORES);
return; 
```

在第一行中，您传入了一个`int`，即数组的大小，而您应该传入数组本身。

在第二行中，您未能指定 from 的返回值`main`。

尝试：

```
flipArray(scores);
return 0; 
```

# emacs - 如何通过我的 .emacs 在 emacs 中打开 zone-while-idle？

> ID：13386943
> 
> 赞同：3
> 
> 时间：2012-11-14T20:40:49.257
> 
> 标签：emacs

而不是`M-x zone-when-idle <RET> 30`我希望这是默认设置。我可以在我的 .emacs 中添加什么来实现这一点？我试过：

```
(zone-when-idle 30) 
```

它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:49:22.940

```
(require 'zone)
(zone-when-idle 30) 
```

在 Emacs 24 上工作。如果你看一下`zone-when-idle`代码，它只会启用一个计时器。

# android - 将背景图像叠加到活动上

> ID：13386944
> 
> 赞同：-1
> 
> 时间：2012-11-14T20:40:52.910
> 
> 标签：android, android-view

我有一个有背景的活动。当我失去互联网连接时，我想在现有背景的顶部覆盖另一个图像（50% 不透明）。

有没有一种简单的方法可以做到这一点，而不必通过我的活动主视图的 draw 方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:43:14.243

您可以使用 控制任何 View 的 Alpha 通道（不透明度）[`setAlpha()`](http://developer.android.com/reference/android/view/View.html#setAlpha%28float%29)。

尝试：

```
imageView.setAlpha(0.5f); 
```

# javascript - 在 ExtJS/Javascript 中处理事件的更好方法

> ID：13386948
> 
> 赞同：0
> 
> 时间：2012-11-14T20:41:12.517
> 
> 标签：javascript, extjs, extjs4, dom-events

我正在尝试在 ExtJs/Javascript 中构建一个应用程序，并注意到事件是保持组件相互独立的好方法。但是，引发和捕获事件的方式使它们对调用者和接收者更加具体。

有没有更好的方法来做到这一点。我计划编写一个中心 EventBus 类，任何组件都可以使用该类引发一个事件，而另一个可以注册以收听它。

是否有任何图书馆已经可以实现这样的目标。我看到backbone.js 不确定它是否在做我正在寻找的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:14:32.353

编写 a`Mediator`非常简单，如果您已经有了一个执行事件委托的框架，使用 a `publisher/subscriber`or`observer`模型（无论它们被称为`events`还是`actions`他们将系统称为 an`emitter`或其他）。

您只需制作`Mediator`唯一的`emitter`/ `publisher`/etc，然后让您的模块/类/服务/等访问该`Mediator`.

```
var myEvents = Mediator(),

Module1 = (function (events) {
    var private_data = {},
        private_method = function () {},
        public_interface = { init : init };

    function init () { // setup procedures
        events.listen("widget/process/request", function (data) {
            var result = doStuff(data);
            events.fire("widget/process/result", result);
        });
    }
}(myEvents)),

Module2 = (function (events) {
    var private_data = {},
        public_interface = { init : init };

    function init (data) { // setup procedures
        events.fire("widget/process/request", data);
        events.listen("widget/process/result", private_method);
    }

    return public_interface;
}(myEvents));

Module1.init();
Module2.init(data); 
```

如果你愿意，你甚至可以在你的类中做一些事情，来包装你的中介，这样你就可以为你的“类”/模块拥有公共方法，这些方法看起来像它们自己的事件，但会传递数据给调解员：

```
var myClass = function () {
    var mediator = null,
        public_interface = {
        fire : function (evt, data) { if (!mediator) { return; } mediator.fire(evt, data); },
        listen : function (evt, handler) { if (!mediator) { return; } mediator.listen(evt, handler); },
        setMediator : function (newMediator) { mediator = newMediator; }
    }
};

var mediator = Mediator(),
    obj1 = myClass(),
    obj2 = myClass();

obj1.setMediator(mediator);
obj2.setMediator(mediator);

obj1.listen("event1", obj1.doStuff.bind(obj1));
obj2.fire("event1", obj2.data); 
```

您的模块现在都可以访问一个单一的中介或您选择的任何多个中介... ...您可以为每个小部件提供自己的中介，其各个组件可以共享... ...另外让每个小部件访问系统范围的中介，因此虽然组件不能访问像 AJAX 或 DOM 这样的全局服务，但小部件本身可以。

通过在组件中提供接口，您可以使用公共包装调用巧妙地编程（在主进程中以更经典的方式，而不是 lambda/callback-heavy JS 方式），所以现在：

```
var imageLoader = ImageLoader();
imageLoader.setMediator(mediator);
img = imageLoader.load("myimg037");
imageLoader.fire("imageloader/imageloaded/myimg037", img); 
```

或者，在您的项目中可能会出现类似的情况——`imageLoader`对任何其他模块一无所知，但是当您调用它的`.fire`方法时，任何共享同一个中介并监听该事件的模块都会收到通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:22:37.307

查看 ozef Sakalos（又名 Saki）的 MsgBus 插件。

[http://examples.extjs.eu/?ex=msgbus](http://examples.extjs.eu/?ex=msgbus)

它为 ExtJS 组件之间的消息传递提供了一个发布/订阅模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:32:53.123

此功能已通过 extjs4.x 中的控制器实现。控制器是监听事件并对其采取行动的中心位置。此外，每个组件都有 fireEvent 方法来触发可以在控制器中再次监听的自定义事件。有关更多信息，请参阅文档：

[http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)

和

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller)

# c# - 应用程序可以使用调制解调器服务接收呼叫吗

> ID：13386949
> 
> 赞同：1
> 
> 时间：2012-11-14T20:41:36.510
> 
> 标签：c#, c++, wpf, voip, modem

我正在开发一个基于 IVR（交互式语音响应）的项目。在其中注册，DB 中的修改将通过拨打电话号码并按照简单的步骤进行，例如在电信帮助中心用于更改我们的资费或 SMS 套餐等。

我可以使用带有 C# 代码的简单语音调制解调器和 TAPI 作为后端来管理所有这些吗？实际上，我有“科胜讯 hda d330 mdc v.92 调制解调器”。我可以用它来制作这种类型的应用程序......？

如果是，我们可以在这个调制解调器上处理多个呼叫吗？

如果不是，执行此操作需要什么硬件？

# ruby - 捆绑器损坏时如何安装（ruby）捆绑器

> ID：13386952
> 
> 赞同：0
> 
> 时间：2012-11-14T20:41:48.103
> 
> 标签：ruby, bundler

添加后

```
gem "ransack", :git => "git://github.com/ernie/ransack.git" 
```

到我的 gemfile，我现在收到错误消息：

```
git://github.com/ernie/ransack.git  (at master) is not checked out. Please run `bundle install` (Bundler::GitError) 
```

对于任何 rails <>、bundle 或 gem 命令。

这是捆绑器版本 1.0.21。

我看到 github 上现在有 1.30 版，但是捆绑器站点上的安装“说明”似乎暗示它使用现有的捆绑器来设置新版本？

[http://gembundler.com/](http://gembundler.com/)

```
require "rubygems"
require "bundler"
Bundler.setup(:default, :ci)
require "nokogiri" 
```

如何在没有旧版本的情况下卸载现有（损坏的）捆绑程序并安装新版本？

麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:07:09.483

Bundler 和任何 gem 一样只是一个 gem，不需要使用 Bundler 来安装 Bundler，不管说明告诉你什么。它很简单：

```
gem uninstall bundler
gem install bundler 
```

如果您使用的是 RVM，可能会比这多一点（您可能必须先切换到“全局”gemset），但不多。

# maven - Maven EAR 项目不会注册 Faces Converter

> ID：13386954
> 
> 赞同：1
> 
> 时间：2012-11-14T20:41:59.887
> 
> 标签：maven, jsf-2, facelets, converter, ear

我的 Maven EAR 项目有两个 WAR 模块和一个 EJB 模块。EJB 模块中有一个 FacesConverter 类，当我尝试从 WAR 模块之一使用它时，它会引发异常。我用注释注册这个转换器 @FacesConverter("org.util.ObjectConverter") 在 JSF 页面中使用它

javax.servlet.ServletException：表达式错误：命名对象：未找到 org.util.ObjectConverter。

当 ObjectConverter 在 WAR 模块中时，它可以正常工作，但不会从 EJB 模块加载。

我在这里想念什么？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:54:14.823

为什么把它放在 EJB 模块中？前端（阅读：JSF）工件应该放在 WAR 模块中。EJB 模块应该只包含应该可被 JSF 以外的前端重用的业务服务，例如 JSP/Servlet、Struts2、SpringMVC、JAX-RS 等。EJB 模块绝对不能有单行**导入**`javax.faces.*`/依赖在代码中。

JSF 不在 EJB 模块中查找转换器（更不用说任何其他与 JSF 相关的工件，例如验证器、托管 bean 和 Facelets 文件），而只在 WAR 模块中查找。只需将它们保存在 WAR 模块中即可。您认为需要在 WAR 和 EJB 模块之间共享的任何代码都应该重构为一个单独的 Java 项目，该项目最终成为 EAR 模块中的一个公共 JAR 文件（请注意，这反过来也不应该包含**任何**JSF 特定的工件。

# java - 使用 log4J-2.0-beta 时的 NPE

> ID：13386956
> 
> 赞同：0
> 
> 时间：2012-11-14T20:42:02.340
> 
> 标签：java, log4j, log4j2

我正在通过[概述文档](http://logging.apache.org/log4j/2.x/manual/api.html#Overview)检查 log4j2，并且在尝试设置 log4j2 记录器时遇到以下异常：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
Caused by: java.lang.NullPointerException
    at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:129)
    at HelloWorld.<clinit>(HelloWorld.java:5) 
```

我的测试程序取自概述站点：

```
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

public class HelloWorld {
    private static Logger logger = LogManager.getLogger("HelloWorld");
    public static void main(String[] args) {
        logger.info("Hello, World!");
    }
} 
```

我将所有提供的 jar 文件从[二进制分发](http://logging.apache.org/log4j/2.0/download.html)中添加到我的构建路径中。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:49:15.213

根本不要！使用[Logback](http://logback.qos.ch/)而不是 Log4J！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:08:28.327

对于将来偶然发现此问题的任何人：

JAR`log4j-core-2.0-beta2-sources`是错误的原因。如果从构建路径中删除此 JAR，则可以正确构建。

关于这个问题，我在位于[https://issues.apache.org/jira/browse/LOG4J2-118的 ASF 跟踪器上打开了一张 JIRA 票证。](https://issues.apache.org/jira/browse/LOG4J2-118)

# iphone - Xcode iPhone 4/5 屏幕尺寸两者

> ID：13386957
> 
> 赞同：1
> 
> 时间：2012-11-14T20:42:05.223
> 
> 标签：iphone, xcode, screen-size

我正在 Xcode 中制作一个应用程序，我需要为 iPhone 4 和 5 制作它。但由于 iPhone 5 的屏幕更大，它会弄乱我的应用程序。

一旦我放置了 iPhone 4 尺寸的标签，然后在 iPhone 5 上进行测试，标签都放错了位置。有没有办法让他们留下来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:48:32.410

您可以使用 iOS 6 的新[自动布局](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)功能（如果您想与 iOS5 兼容，您仍然可以使用自动调整大小的蒙版）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:50:32.030

您需要根据设备的 View Height 定位标签（不必担心宽度，因为 iPhone 4 和 5 的宽度相同。但这适用于针对 iPad 和 iPhone 的通用应用程序）。

例如，如果您的应用程序是基于视图的应用程序，请使用 找到超级视图的视图高度`self.view.frame.size.height`，并根据此属性确定所有标签/视图位置。

并在 iOS 模拟器上测试两种屏幕尺寸。

# java - 具有优先级的 sortOn 函数

> ID：13386961
> 
> 赞同：0
> 
> 时间：2012-11-14T20:42:14.523
> 
> 标签：java, javascript, algorithm, actionscript-3, sorting

我想知道是否如何创建具有某种排序优先级的自定义 sortOn 函数。我有一个更复杂的案例，但我主要想知道如何构建好的排序函数。

假设我有这个带有数据对象的未排序列表：

```
var myList = [
 {drink: {amount: 1, name: "cola"}}, 
 {drink: {amount: 5, name: "beer"}}, 
 {food: {amount: 7, name: "cake"}}, 
 {drink: {amount: 3, name: "fanta"}}, 
 {drink: {amount: 4, name: "tea}}, 
 {other: {amount: 1, name: "table"}}, 
 {food: {amount: 4, name: "mars"}},
 {food: {amount: 5, name: "pizza"}}, 
 {food: {amount: 4, name: "cake"}}, 
 {other: {amount: 12, name: "chair"}}, 
 {food: {amount: 14, name: "chips"}},
 {drink: {amount: 6, name: "coffee}}, 
 {food: {amount: 8, name: "chips"}}, 
 {food: {amount: 6, name: "pizza"}}, 
 {food: {amount: 1, name: "food"}} 
] 
```

好的，成像我想使用这些规则进行排序：

```
first: sort in this order: food, drinks, others (note, thats not alphabetical)
  then: sort on amount, BUT on food, pizza's + cakes must be on top 
```

在理想情况下，它看起来像这样（手动创建）：

```
var myList = [
 {food: {amount: 5, name: "pizza"}},
 {food: {amount: 6, name: "pizza"}},
 {food: {amount: 4, name: "cake"}}, 
 {food: {amount: 7, name: "cake"}}, 
 {food: {amount: 1, name: "food"}}, 
 {food: {amount: 4, name: "mars"}}, 
 {food: {amount: 8, name: "chips"}}, 
 {food: {amount: 14, name: "chips"}},
 {drink: {amount: 1, name: "cola"}}, 
 {drink: {amount: 3, name: "fanta"}}, 
 {drink: {amount: 4, name: "tea}}, 
 {drink: {amount: 5, name: "beer"}}, 
 {drink: {amount: 6, name: "coffee}}, 
 {other: {amount: 1, name: "table"}}, 
 {other: {amount: 12, name: "chair"}}
] 
```

同样，这完全不是一个真实的例子，但我有一些案例（甚至更深的嵌套对象）我想应用这样的规则。

是否可以创建某种排序顺序查找列表（类似这样），还是不可行？

```
priorityList = [
              food:[
                 name:["pizza", "tea", rest], 
                 amount: Array.ASCENDING}
                ], 
              drink, 
              other
          ]; // etc.. 
```

我想学习如何制作这种排序功能。我喜欢看 Javascript 或 Actionscript 解决方案，但其他语言也可以说明。有这方面的图书馆吗？我是否必须遍历所有项目、创建条件、在情况下推送/取消移位，或者这是否可以通过自定义`sort()`函数实现？我需要一些指导如何以实用/有效的方式解决这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:54:45.450

你需要在脑海中把这两个问题分开。

一个是*排序*：给定一个可比较对象的列表，将它们从“最低”到“最高”排序。这是一个完全解决的问题。别担心。

另一个是*比较*：给定两个对象，哪个是“第一个”？鉴于您编写的规范以及任意两个对象 A 和 B，您可以说 -1（对象 A 是第一个）、0（它们在排序方面是等效的）或 1（对象 B 是第一个）。

编写该函数（用您喜欢的语言）并将其传递给该语言的内置排序库以进行快速排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:39:46.543

您是对的，您必须返回 -1、0 或 1，但这并不意味着您无法在其中处理复杂的排序，尽管这意味着您必须为每种情况自定义代码遭遇。像这样的东西会起作用：

```
function myCustomSort(firstObject, secondObject):int 
{
    // Is firstObject a food and the second not? firstObject goes in front. 
    // Are both objects a food?
        // Is firstObject's name pizza and the second not? 
        // firstObject goes in front. 
        //Are both objects' names pizza? Return 0 - they're equivalent.
    //ETC.
} 
```

理想情况下，尽管您希望支持您作为示例提供的模式。我建议在根目录中使结构与子目录中的结构相同（因此您可以在每个级别上运行相同的代码），您的示例将如下所示：

```
priorityList = {
                    "consumingType":[
                      "food":{
                         "name":[
                            "pizza", 
                            "tea"
                            ], 
                         amount: Array.ASCENDING
                        }, 
                      "drink", 
                      "other"
                    ], 
                    amount: Array.ASCENDING
                }; 
```

实际解决方案可能会因实际结构（您的数据是 JSON 还是对象）和语言而略有不同 - 但这**是我尚未测试过**的 AS3 入门；这应该为您指明正确的方向。

首先，我会编写一个递归排序函数来处理一层排序，然后检查是否有子层或返回：

```
function handleComplexSorting( sortingObject, first, second ) {
    var result:int = 0;
    //Extracting the property name of first/second will differ, 
    //but pretty sure this is how you do it in AS3.
    var firstValue:int = findSortValueForProperty(first[0], sortingObject[0]);
    var secondValue:int = findSortValueForProperty(second[0], sortingObject[0]);

    if( firstValue > secondValue ) {
        //firstValue should go first.
        result = -1;
    }
    else if(firstValue < secondValue){
        //secondValue should go first.
        result = 1;
    }
    else {//equal
        var childSortingObject:Object;
        if( hasChildSorting(sortingObject, childSortingObject) ){
            //return result of recursion
            result = handleComplexSorting(childSortingObject, first, second);
        }
        else {
            result = 0;
        }
    }
    return result;
} 
```

findSortValueForProperty 函数将是您添加升序/降序的地方，我已将其省略，但您只需要检查哪一个并反转结果值。这里的值由它在数组中的索引的倒数决定（第一个出现的值最高，最后出现的值最低，不存在 - 0 值）。

```
function findSortValueForProperty(property:String, priorityProperties:Array):int {
    var resultValue:int = 0;
    var index = 0;
    for each( var currentProperty:String in priorityProperties ) {
        if(property == currentProperty) {
            resultValue = priorityProperties.length - index;
            break;
        }
        ++index;
    }
    return resultValue;
} 
```

最后，检查对象是否有子排序要求。这实际上是行不通的，它只希望第一个项目可能有子排序。我也不是 100% 可以像我 ( `sortingObject[0]`) 那样通过索引访问对象的变量（尽管你绝对可以遍历它们）。

```
function hasChildSorting(sortingObject:Object, outChild:Object):Boolean {
    var result:Boolean = false;
        if( sortingObject[0] is Object ) {
            result = true;
            outChild = sortingObject[0];
        }
    }
    return result;
} 
```

对于 AS3，请参阅[在 as3 中获取变量名的字符串表示，以](https://stackoverflow.com/questions/8437580/get-string-representation-of-a-variable-name-in-as3)通过字符串访问变量。如果您想在其他方面进行反思，您还需要您的语言进行[反思。](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)

# database - 需要用 Hibernate 和 JPA 连接两个数据库

> ID：13386969
> 
> 赞同：0
> 
> 时间：2012-11-14T20:42:39.393
> 
> 标签：database, spring, hibernate, jpa, configure

我有一个使用一个数据库的应用程序，现在我已经配置了这个 data-access-config.xml。

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">
    <!-- Instructs Spring to perfrom declarative transaction management on annotated classes -->
    <tx:annotation-driven />
    <!-- Drives transactions using local JPA APIs -->
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>
    <!-- Creates a EntityManagerFactory for use with the Hibernate JPA provider and a simple in-memory data source populated with test data -->
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>
    </bean>
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.postgresql.Driver" />
        <property name="url" value="jdbc:postgresql://localhost:5432/database1" />
        <property name="username" value="admin1" />
        <property name="password" value="some_pass" />
    </bean>
</beans> 
```

它连接良好，但现在我需要配置第二个数据库（在同一台服务器中），试图复制 EntityManagerfactory 但抛出错误，不能同时拥有两个实体管理器，所以我在这里感到困惑。我正在使用 Hibernate+JPA+Spring

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:03:03.877

我相信这样的事情应该有效：

```
<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    ...
</bean>

<bean id="emf1" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource1" />
    ...
</bean> 
```

在 DAO 中，使用

```
@PersistenceContext(unitName = "emf1")
private EntityManager em; 
```

以上将告诉 DAO 使用该`emf1`实例。

也许你忘了给你的第二个实体经理命名与你的第一个不同的名字？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:31:19.077

您可能需要使用“持久性单元管理器”来帮助管理您的持久性单元。请参阅[有关多个持久性单元的 Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/orm.html#orm-jpa-multiple-pu)。您将拥有 2 个数据源、1 个实体管理器工厂和 1 个持久性单元管理器。

实体管理器因素将引用持久性单元管理器（而不是 2 个数据源），然后持久性单元管理器将引用 2 个数据源。

# jquery - jQuery多个类并在悬停时添加类

> ID：13386971
> 
> 赞同：3
> 
> 时间：2012-11-14T20:42:43.223
> 
> 标签：jquery, class, hover

我真的很感谢有人的帮助，因为这让我发疯了！

所以我有以下两个相邻的图像，并在整个页面的各个地方使用。

```
<img class="curtain containerLeft" src="http://example.com/containerleft.jpg" />
<img class="curtain containerRight" src="http://example.com/containerright.jpg" /> 
```

我需要的是当我将鼠标悬停在两个图像中的任何一个上时，将 .lefthover 或 .righthover 类同时添加到左侧或右侧容器，然后在鼠标移出时再次删除。所以悬停的代码看起来像这样：

```
<img class="curtain containerLeft lefthover" src="http://example.com/containerleft.jpg" />
<img class="curtain containerRight righthover" src="http://example.com/containerright.jpg" /> 
```

并在鼠标移出时恢复为：

```
<img class="curtain containerLeft" src="http://example.com/containerleft.jpg" />
<img class="curtain containerRight" src="http://example.com/containerright.jpg" /> 
```

我不希望将 lefthover 和 righthover 应用于页面上这些图像的每个实例 - 只是我已经将鼠标悬停的两个。

我已经接近并尝试了很多事情，但只能让图像的所有实例添加适当的类，或者只能让我悬停的图像（不是旁边的那个。

而且我不知道如何在同一个 div 中选择另一个类（我可以用 .children 来做，但这在这种情况下不合适）。所以我认为这可能会起作用：

```
$('.curtain')
.hover(function() {
    $(".containerLeft", this).addClass('lefthover');
    $(".containerRight", this).addClass('righthover');
}, function() {
    $(".curtainLeft", this).removeClass('lefthover');
    $(".containerRight", this).removeClass('righthover');
}); 
```

有什么想法或想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:47:57.073

当纯 CSS 可以工作时，通常最好避免使用 JavaScript。在这种情况下，您似乎不需要 JavaScript，因为您可以使用`:hover`伪类。

```
/* Normal Styles */
.containerLeft { 
    background-color: red; 
}
.containerRight { 
    background-color: blue; 
}

/* Hover Styles */
.container:hover .containerLeft,
.container:hover .containerRight {
    background-color: yellow;
} 
```

演示：http: [//jsfiddle.net/xYgm6/2/](http://jsfiddle.net/xYgm6/2/)

如果您需要每个不同的样式：

```
.container:hover .containerLeft {
    border: 1px solid red;
}
.container:hover .containerRight {
    border: 1px solid blue;
} 
```

演示：http: [//jsfiddle.net/xYgm6/3/](http://jsfiddle.net/xYgm6/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:56:29.417

考虑到图像被包含在一个带有`class container`..

**HTML**

```
<div class="container">
    <img class="curtain containerLeft" src="http://example.com/containerleft.jpg" />
    <img class="curtain containerRight" src="http://example.com/containerright.jpg" /> 
</div>
<div class="container">
    <img class="curtain containerLeft" src="http://example.com/containerleft.jpg" />
    <img class="curtain containerRight" src="http://example.com/containerright.jpg" /> 
</div>
<div  class="container">
    <img class="curtain containerLeft" src="http://example.com/containerleft.jpg" />
    <img class="curtain containerRight" src="http://example.com/containerright.jpg" /> 
</div> 
```

**Javascript**

```
$('.curtain').hover(function() {
    var $container = $(this).closest('div.container');
    $container.find('.containerLeft').addClass('lefthover');
    $container.find('.containerRight').addClass('righthover');
}, function() {
    var $container = $(this).closest('div.container');
    $container.find('.containerLeft').removeClass('lefthover');
    $container.find('.containerRight').removeClass('righthover');
});​ 
```

**[小提琴](http://jsfiddle.net/sushanth009/YeBMA/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:45:39.997

假设所有图像对都有不同的父母。并且两个图像都是兄弟姐妹。

```
$('.containerLeft').parent().hover(function() {
    $(".containerLeft", this).addClass('lefthover');
    $(".containerRight", this).addClass('righthover');
}, function() {
    $(".containerLeft", this).removeClass('lefthover');
    $(".containerRight", this).removeClass('righthover');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:49:02.543

谢谢

我不相信纯 CSS 选项会起作用，因为页面上有多个相同的类以及如何每次只定位正确的两个图像。无论如何，对于 ref 我现在还修复了一些可以工作的 jQuery：

```
$('.containerLeft').hover(function() {
    $(this).addClass('lefthover');
    $(this).next().addClass('righthover');   
}, function() {
    $(this).removeClass('lefthover');
    $(this).next().removeClass('righthover');   
});

$('.containerRight').hover(function() {
    $(this).prev().addClass('lefthover');        
    $(this).addClass('righthover');
}, function() {
    $(this).removeClass('righthover');
    $(this).prev().removeClass('lefthover'); 
}); 
```

可能还可以进一步简化。

我真的很感谢大家的回答 - 谢谢！

# objective-c - 用户清空垃圾时的通知？

> ID：13386974
> 
> 赞同：1
> 
> 时间：2012-11-14T20:43:04.530
> 
> 标签：objective-c, macos, cocoa, nsnotificationcenter, nsworkspace

当用户清空垃圾箱时，我的可可应用程序将如何收到通知。这是我到目前为止所拥有的：

```
 NSNotificationCenter *notCenter = [[NSWorkspace sharedWorkspace]
                                       notificationCenter];
    AppDelegate *mainController = [[AppDelegate alloc] init];

    [notCenter addObserver:mainController
                  selector:@selector(handleTrashEmpty)
                      name:NSWorkspaceRecycleOperation object:nil]; 
```

但是当用户清空垃圾箱时什么都没有出现。任何想法为什么此代码不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:46:58.850

第一种方式：

您可以使用 UKKQueue 来查看文件更改（空 thrash）通知：

[http://www.cocoadev.com/index.pl?UKKQueue](http://www.cocoadev.com/index.pl?UKKQueue)

第二种方式：

如果 [folderList count]==0，请继续使用计时器检查，这意味着垃圾已清空。

```
NSError *error=nil;
NSString *path=[NSHomeDirectory() stringByAppendingPathComponent:@".Trash"];
NSArray *folderList=[[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:&error]; 
```

第三种方式：

看~/.Trash，“com.apple.carbon.core.DirectoryNotification”在垃圾清空时发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:59:48.500

NSWorkspaceRecycleOperation 根本不是通知，而是传递给 performFileOperation:source:destination:files:tag 的文件操作常量：

* * *

您使用 FSEvents api 来监控 /.Trashes。下面是一些示例代码： [http ://subversion.assembla.com/svn/quotamonitormenu/QuotaMonitorMenu/branches/QuotaMonitorMenuFaculty/StatusItemController.m](http://subversion.assembla.com/svn/quotamonitormenu/QuotaMonitorMenu/branches/QuotaMonitorMenuFaculty/StatusItemController.m)

# php - 使用 jQuery AJAX 关闭 PHP 函数

> ID：13386978
> 
> 赞同：0
> 
> 时间：2012-11-14T20:43:14.937
> 
> 标签：php, jquery, html, ajax, postgresql

我一直在解决这个问题一段时间，并看到了很多不同的方法。我有我认为应该可以工作的代码，但由于某种原因不能。

这是我的 JavaScript 代码文件名 - test.js：

```
function deleteTempTable() {
    $.ajax({
        url: "exit.php",
        success: function(data) {
            alert("Deleting Temp Table");
        }
    });
} 
```

我放置警报纯粹是为了测试目的，以确保正在进行 AJAX 调用，并且确实如此。

这是使 AJAX 调用文件名 - form.template 的按钮的 HTML：

```
<input type="button" title="Click to close window" value="Close" 
 onclick="deleteTempTable();" style="width:80px" name="close"> 
```

这确实有效，因为我得到了 JavaScript 警报。

这是我正在使用的 php 代码的示例（它不准确，因为它有一些我无法共享的东西，自定义类等，无论哪种方式，我都在其他地方重用了相同的模式，它工作正常并丢弃了表格根据需要）文件名 - exit.php ：

```
<?php
session_start();

require $_SERVER['DOCUMENT_ROOT'] . "path/to/file.php";

$tempTableName = $_SESSION['tempTableName'];

//Not really hard coding this it's just an example
$odbcConn = odbc_connect('DataBaseName', 'UserName', 'Password'); 

$sqlCmd = "DROP TABLE IF EXISTS $tempTableName;";

odbc_exec($odbcConn, $sqlCmd);
?> 
```

当我单击按钮时，会弹出 JavaScript 警报，但它显示为 php 被忽略，因为该表仍然存在。在我的代码中的其他地方，当请求新的数据集时，使用相同的 php 模式来删除表，并且它们会很好地删除。只是当我尝试使用此按钮进行操作时。

任何想法或指示都会很棒！

我也看到了这个问题，[“Calling PHP function using JQuery .ajax()”](https://stackoverflow.com/questions/4320935/calling-php-function-using-jquery-ajax)，但他的问题是语法，我很确定我的 IDE 没有语法错误，从我所见是发布的解决方案。

**更新**

多亏了一些建议，我才能得到一个可以确认 php 代码本身工作的测试，但实际上并没有被 AJAX 调用执行。本质上，我只是运行了创建表的页面，即 index.php，然后将浏览器定向到 exit.php，并且该表已按我的预期被删除。所以唯一的结论是 exit.php 实际上并没有被 AJAX 调用调用/执行。

我不知道这是否是问题，但这是我的实际 url 分配（或多或少）：`url: "/folder1/folder2/folder3/folder4/exit.php"`我也尝试`url: "exit.php"`过，所以我不知道是否需要文件的完整根路径，或者如果这是一些问题。在这一点上，我只是在头脑风暴，因为我至少现在知道 php 没有被执行或正确打开。

**更新**

好吧，感谢 Salivador 带我解决了一些问题，问题就解决了。基本上代码是正确的。因此，如果您需要做这样的事情，请随意使用它，但是不要做我所做的并弄乱文件路径！

*掌心*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:35:20.870

快速反应是 sqlcommand 包含一个分号，删除它

这是另一种方法，在您的 php 代码中执行此操作

html

```
 <input type="button" title="Click to close window" value="Close" 
   onclick="deleteTempTable('mytable');" style="width:80px" name="close"> 
```

退出.php

```
 if($_REQUEST['command'] == 'droptable') {  
echo dropTable($_REQUEST['tablename'] ));   
 }
 ...
 function dropTable($tableName){
 /*your sql stuff/code here*/
 $sqlCmd = 'Drop Table '.$tablename;
 $rz = odbc_exec($odbcConn, $sqlCmd);
      if (!$rz){
      $result = true;
      } else {
      $result = false;
      }
 return $result;
 } 
```

那么你可以这样做

```
function deleteTempTable(tablename) {
var params = 'command=droptable&tablename='+tablename;
$.ajax({
    url: "exit.php?"+params,
    success: function(data) {
        if(data == true) {
        alert("Deleting Temp Table");
        } else { 
          alert("Didnt work"); 
        }
    }
});
} 
```

只是一种方法，我个人不会使用 onclick 来触发该功能，我更喜欢选择器绑定事件

为什么要将此表名存储在会话数据中？表单变量不会更好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:57:49.873

您的 ajax 调用已执行，但您确定您的 PHP 代码已按预期正确执行吗？

尝试输出`$tempTableName`以查看您是否真的为您的表获得了正确的名称，尝试查看`odbc_exec(...)`命令的响应以查看删除的结果是什么。

# asp.net-mvc - WebAPI 和 WebApplication 在同一个端口上

> ID：13386979
> 
> 赞同：3
> 
> 时间：2012-11-14T20:43:19.747
> 
> 标签：asp.net-mvc, visual-studio-2012

我们想创建一个可由 MVC 应用程序和移动应用程序访问的 Web api。这是我们的项目结构： **Application.sln** - **Application.Web.csproj** - **Application.WebAPI.csproj** - **Application.Mobile.csproj**

我们已将解决方案配置为具有多个启动项目。但是为了在 Application.Web 的视图中通过 json（而不是 jsonp）访问 api 调用，我们需要两个应用程序使用相同的端口。有没有办法在 Visual Studio 中做到这一点？

如果不是，您认为最适合我们的结构是什么？谢谢，萨弗里斯

# emacs - 将对象与缓冲区关联

> ID：13386986
> 
> 赞同：1
> 
> 时间：2012-11-14T20:43:40.870
> 
> 标签：emacs, elisp

我正在尝试做的与所做的非常相似，`make-local-variable`只是我不希望为每个创建的缓冲区声明变量（仅适用于属于特定模式的缓冲区）。这主要是性能问题，创建的对象可能很大。更重要的是，我需要一个函数`(get-buffer-property buffer property-name)`来确定特定缓冲区的状态。

从本质上讲，我追求的是类似的东西，`get-buffer-proccess`除了我需要一个过程以外的东西。

在主要模式的声明中创建此类对象并在此类缓冲区被杀死时在挂钩中销毁它们是否有意义，或者有更好的方法吗？

这是我到目前为止所拥有的：

```
(defun haxe-get-buffer-property (buffer property)
  "Pops to BUFFER, reads the value of the PROPERTY and returns it."
  (let ((result
         (save-excursion
           (pop-to-buffer buffer)
           (symbol-value property))))
    result))
(defmacro haxe-buffer-property (buffer property)
`(haxe-get-buffer-property ,buffer ',property))

(defmacro deflocal (var &rest body)
  (let ((symb var)
        (val (car body))
        (doc (cadr body)))
    `(progn
       (defvar ,symb nil ,doc)
       (unless ,symb (setq ,symb ,val))
       (make-local-variable ',symb)))) 
```

但我不喜欢我必须访问缓冲区，因为我不确定副作用。

**编辑：**更多信息。

发生的事情是这样的，有多个缓冲区可以与网络连接过程进行交互。该进程可以由缓冲区组共享（重要的是缓冲区共享该进程），但也可能同时存在多个缓冲区，这些缓冲区具有相互分配的不同进程。除了进程本身，还有很多关于进程状态的信息要存储（接收了多少数据，发送了什么，错误等）。同样，这些数据必须由缓冲区组共享。

编辑2：

这就是上面代码的结果，以防万一有人需要它。

```
(defmacro deflocal (var &rest body)
  (let ((symb var)
        (val (car body))
        (doc (cadr body)))
    `(progn
       (set (make-local-variable ',symb) ,val)
       (put ',symb 'variable-documentation ,doc))))

(defun haxe-get-buffer-property (buffer property)
  "Pops to BUFFER, reads the value of the PROPERTY and returns it."
  (let ((result
         (with-current-buffer buffer
           (symbol-value property))))
    result))

(defun haxe-set-buffer-property (buffer &rest proplist)
  "Pops to BUFFER and sets properties in parallel, similar to `pset'."
  (let ((result
         (with-current-buffer buffer
           (loop for (property value) on proplist by #'cddr
                 do (set property value)
                 finally (return value)))))
    result))

(defmacro haxe-buffer-pset-property (buffer &rest proplist)
  `(haxe-set-buffer-property
    ,buffer
    ,@(loop for (key value) on proplist by #'cddr
            nconc (list (list 'quote key) value))))
(defalias 'haxe-pbset #'haxe-buffer-pset-property)

(defmacro haxe-buffer-setf-property (buffer &rest proplist)
  `(with-current-buffer ,buffer
     ,@(list (append '(setf) proplist))))
(defalias 'haxe-pbsetf #'haxe-buffer-setf-property) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:19:32.440

在一次`emacs -q`会议上，我执行了以下操作：

```
;; set up a hook to create buffer local variable
(add-hook 'html-mode-hook
      (lambda ()
        (set (make-local-variable 'my-var) "abcd")))

;; find two files, one html and another java    
(find-file-noselect "X.java")
(find-file-noselect "X.html")

;; see the buffer value in html buffer
(progn
  (set-buffer "X.html")
  (message "html:%s" my-var))

;; in java buffer I get error for a void variable
(progn
  (set-buffer "X.java")
  (message "java:%s" my-var)) 
```

# css - 带有 css 和 box-shadow 的梯形

> ID：13386989
> 
> 赞同：2
> 
> 时间：2012-11-14T20:43:46.537
> 
> 标签：css, webkit, transform, css-shapes

我正在考虑制作一个顶部比底部宽 10px 的盒子阴影的梯形。在过去，我制作了一个梯形，如下面的 jsfiddle 中所述，但是您会注意到，如果我将 box-shadow 放在元素上，它会将 outerWidth 框在一个矩形中，而不是在倾斜的边框上放置阴影：

```
#trapezium {
   margin:20px auto;
   height: 0;
   width: 80px;
   border-bottom: 80px solid blue;
   border-left: 40px solid transparent;
   border-right: 40px solid transparent;
   box-shadow:0 0 10px #333;
} 
```

[http://jsfiddle.net/YhePf/8/](http://jsfiddle.net/YhePf/8/)

我最初的想法是使用以下内容：

```
-webkit-transform:perspective(100) rotateX(1deg); 
```

类似的东西。虽然这肯定会开始解决问题，但我不确定数字 100 在“透视”中指的是什么，以及如何计算一个公式来确保顶部宽度恰好比底部宽 10px，不管如何高或宽这个元素。

有小费吗？还是第三种选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:19:57.557

您构建的不是梯形（又名梯形）形状的元素；它是一个矩形元素，其**边框样式创建了梯形的外观**。这就是为什么 box-shadow 是矩形的。

使用专有的 -webkit-transform 属性不会改变实际元素的形状。

要创建真正的非矩形元素，您需要使用 SVG。请参阅[多形 CSS 图层\非矩形 CSS 图层](https://stackoverflow.com/questions/3967668/multi-shaped-css-layers-non-rectangular-css-layer)或非[矩形悬停区域](https://stackoverflow.com/questions/6716118/non-rectangular-hoverable-area)。

# google-chrome - navigator.geolocation getCurrentPosition 未在 Chrome 移动版中更新

> ID：13386996
> 
> 赞同：8
> 
> 时间：2012-11-14T20:44:01.913
> 
> 标签：google-chrome, mobile, geolocation, page-refresh

我创建了一个专为智能手机设计的网站（可在[http://dev.gkr33.com](http://dev.gkr33.com)访问）并尝试使用 navigator.geolocation api 并通过 getCurrentPosition 获取您的位置。这似乎最初有效，但是如果您尝试刷新页面，它总是会带回最后的 GPS 位置。我在页面上添加了一些调试信息，它获取 getCurrentPosition 返回的时间，并且在初始定位之后它总是返回相同的时间（低至毫秒）。

这似乎只发生在 Chrome Mobile 中。如果我通过现有的 Android 浏览器浏览该网站，它每次都能正常工作。

代码如下所示；

```
<script type="text/javascript">
    (function ($) {
    $(document).ready(function() {
        var options = { enableHighAccuracy: true, maximumAge: 0, timeout: 60000 };
        var position;

        // empty the current html elements, not strictly necessary but
        // I'm clutching at straws
        $('#debug-latlng').empty();
        $('#debug-time').empty();
        $('#debug-address').empty();

        // Let's try and find out where we are
        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(gotPos, gotErr, options ); 
        } else {
            gotErr();
        }

        // We've got our position, let's show map and update user
        function gotPos(position) {
            var info;
            info = position.coords.latitude+','+position.coords.longitude;
            $('#debug-latlng').text(info);
            $('#debug-time').text(parseTimestamp(position.timestamp));

            // the following json call will translate the longitude and
            // latitude into an address (a wrapper for google's geocode call)

            $.getJSON('http://dev.gkr33.com/api.php', { req: "getLocationInfo", latlng: $('#debug-latlng').text() }, function(json) {
                $('#debug-address').text( json['results'][0]['formatted_address'] );
            });

            var myLatLng = new google.maps.LatLng( position.coords.latitude, position.coords.longitude );
            var mapOptions = {
                    zoom: 12,
                    center: myLatLng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
            };      
            var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

            var marker = new google.maps.Marker({
                position: myLatLng, 
                title: 'You are here',
                animation: google.maps.Animation.DROP 
            });
            marker.setMap(map);
        } //gotPos

        // Trap a GPS error, log it to console and display on site
        function gotErr(error) {
            var errors = { 
                    1: 'Permission denied',
                    2: 'Position unavailable',
                    3: 'Request timeout'
                };
            console.log("Error: " + errors[error.code]);
            $('#debug-latlng').text('GPS position not available');
        } //gotErr

        // Make timestamp human readable
        function parseTimestamp(timestamp) {
            var d = new Date(timestamp);
            var day = d.getDate();
            var month = d.getMonth() + 1;
            var year = d.getFullYear();
            var hour = d.getHours();
            var mins = d.getMinutes();
            var secs = d.getSeconds();
            var msec = d.getMilliseconds();
            return day + "." + month + "." + year + " " + hour + ":" + mins + ":" + secs + "," + msec;
        } // parseTimestamp     
    });         
}) (jQuery);
</script> 
```

我已经使用了 maximumAge 和 timeout 的各种值，但似乎没有什么会影响相同的 position.coords 和 position.time 值。

我认为 Chrome Mobile 可能存在问题，但我现在不想假设太多，只需要澄清一下，我在代码中没有犯类似布偶比例的错误。

非常感谢您提供的任何帮助。

更新：我想我应该说我已经在两台 Android 设备上进行了测试；HTC One X+ 和三星 Galaxy Tab 7.7 结果相同。在两个股票浏览器上都可以正常工作，并且在两个 Chrome 上都不会刷新位置。稍后将在 Apple 设备上进行测试 :)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T16:12:22.493

我从来没有深入了解这个问题，但我通过使用`watchPosition`调用解决了这个问题，并在清除`watchID`. 检查下面的代码：

```
var options = { enableHighAccuracy: true, maximumAge: 100, timeout: 50000 };
if( navigator.geolocation) {
   var watchID = navigator.geolocation.watchPosition( gotPos, gotErr, options );
   var timeout = setTimeout( function() { navigator.geolocation.clearWatch( watchID ); }, 5000 );
} else {
   gotErr();
} 
```

目前我还没有玩过“选项”值或超时延迟，但上面的代码在我尝试过的每个平台上都带回了准确的定位信息。

希望这可以帮助有同样问题的人:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T05:17:28.820

我终于在 android 中找到了适用于 firefox、chrome 和默认导航器的工作版本（仅限 4.2 测试）：

```
function getGeoLocation() {
        var options = null;
        if (navigator.geolocation) {
            if (browserChrome) //set this var looking for Chrome un user-agent header
                options={enableHighAccuracy: false, maximumAge: 15000, timeout: 30000};
            else
                options={maximumAge:Infinity, timeout:0};
            navigator.geolocation.getCurrentPosition(getGeoLocationCallback,
                    getGeoLocationErrorCallback,
                   options);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-31T23:49:01.897

getCurrentLocation() 不再适用于 Chrome 浏览器中的不安全来源。切换到安全原始 (HTTPS) 以启用。