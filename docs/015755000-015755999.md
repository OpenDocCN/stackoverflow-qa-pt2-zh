# StackOverflow 问答 15755000-15755999

# jquery - ajax/jquery - 防止用户点击多次

> ID：15755000
> 
> 赞同：1
> 
> 时间：2013-04-02T02:21:47.873
> 
> 标签：jquery, ajax

我有一个 div 女巫和一个 jquery 侦听器：

```
$("#right_arrow").click(function(){
  //my action
}); 
```

我的动作也是计算步数，如果用户到达最后一步，它不会让它走得更远。当用户通常单击 div 时，一切都很好。但是，当用户非常快速地单击两次（在最后一步之前）时，他会通过最后一步。

我尝试过这样的事情：

```
if($(this).data('off')==1) return;
$(this).data('off', 1);
//my action
$(this).data('off',0); 
```

但仍然有同样的问题。似乎我在函数中编写的任何内容都无关紧要 - 就像在第一次使用函数之前两次点击排队一样。

怎么能避免呢？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T02:25:04.387

每次单击尝试分离和重新附加事件处理程序的成本可能更高，您可以使用布尔标志来指示单击是否安全。

```
var isClicked = false;

$("#right_arrow").click(function(){
  if (!isClicked) {
    isClicked = true;

    //my action

    // reenable in 200ms
    setTimeout(function () {
      isClicked = false;
    }, 200);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:38:00.943

使用鼠标移出事件将其设置为：

```
 $("#right_arrow").click(function(){
        if($(this).attr('data-off')==1) return;
        $(this).attr('data-off', 1);
        //my action
        $(this).mouseout(function(){
           $(this).attr('data-off',0);
        });

     }); 
```

# actionscript-3 - CS5+AS3 预加载器从 50% 开始；不知道为什么

> ID：15755001
> 
> 赞同：1
> 
> 时间：2013-04-02T02:21:53.363
> 
> 标签：actionscript-3, flash, preloader, flash-cs5

我知道以前有很多关于预加载器的主题，我已经尝试关注其中的每一个，但我仍然遇到同样的问题（他们帮助我从 80% 到 50%）现在它开始`61450 / 125207`于约为 50%。

这是我的`Main Document`（整个项目的默认类文件）类：

```
public class MainDocument extends MovieClip
{
    private var preloader:Preloader;
    private var sB:startButton;
    public function MainDocument() 
    {
        preloader = new Preloader();
        preloader.x = 300;
        preloader.y = 400;
        addChild(preloader);
        loaderInfo.addEventListener(Event.COMPLETE,addStartButton,false,0,true);
    }
    private function addStartButton(e:Event):void
    {
        sB = new startButton();
        sB.x = 300;
        sB.y = 450;
        sB.addEventListener(MouseEvent.CLICK,sMainMenu,false,0,true);
        addChild(sB);
        loaderInfo.removeEventListener(Event.COMPLETE,addStartButton);
    }
    private function sMainMenu(e:Event):void
    {
        sB.removeEventListener(MouseEvent.CLICK,sMainMenu);
        removeChild(sB);
        removeChild(preloader);
        sB = null;
        preloader = null;           
        var menuScreen = new MenuScreen();
        addChild(menuScreen);

        //I have heard that the following code might work better:
        //var menuScreen:Class = getDefinitionByName("MenuScreen") as Class;
        //addChild(new menuScreen() as DisplayObject);
    }
} 
```

以及`Preloader`它所附的：

```
public class Preloader extends MovieClip
{
    public function Preloader()
    {
        addEventListener(Event.ENTER_FRAME,Load);
    }
    private function Load(e:Event):void
    {
        //"bar" is a movieclip inside the preloader object
        bar.scaleX = loaderInfo.bytesLoaded/loaderInfo.bytesTotal;
        //"percent" is a dynamic text inside the preloader object
        percent.text = Math.floor(loaderInfo.bytesLoaded/loaderInfo.bytesTotal*100)﻿+"%";
        trace(loaderInfo.bytesLoaded+" / "+loaderInfo.bytesTotal);
        if (loaderInfo.bytesLoaded == loaderInfo.bytesTotal)
        {
            removeEventListener(Event.ENTER_FRAME,Load);
        }
    }
} 
```

**->`Export on Frame 1`除了`Preloader`**

**-> 第一帧上不存在任何对象；第一帧上的唯一代码是`stop();`**

**-> 我在第二帧中放置了每个 MovieClip 的副本，当单击 startButton 时，a`gotoAndStop(3);`运行，因此没有人看到第 2 帧。**

如果有人知道我可能忘记的任何简单事情，请告诉我！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:01:33.480

您要在预加载的文件中使用预加载器。在这种情况下，项目的其余代码和资产将会膨胀。您看到您的预加载器似乎延迟的原因是因为 swf 必须在任何代码执行之前完全加载。这包括舞台上的所有资产，无论它们在哪个帧上，即使您已经设置了导出到第 1 帧以外的其他内容的设置。相反，请尝试使用空白外壳作为您的预加载器。这个 shell 除了加载器代码和预加载器图形或动画外，什么都没有。加载完成后，隐藏您的预加载器并将您加载的内容添加到 shell 的阶段，或 shell 中的容器影片剪辑。

以下所有代码都在您的 shell 中，它只是另一个 FLA 文件，其中只有这段代码和一个预加载器栏。该文件的尺寸应该与您正在加载到其中的文件相同，即您尝试预加载的原始 swf 文件。

通过调用**loadSwf("mySwfNameOrURLToSwf.swf");来使用它** 变量**_percent**将填充当前负载百分比，您可以对应于您的加载条比例。假设预加载器栏名为“bar”，则行**bar.visible = false;** 在 onSwfLoaded 函数中将隐藏它。 **addChild( _swf )**将加载的 swf 添加到 shell 的阶段。**_swf.init()**行；在加载的 swf 中引用一个函数，您需要添加一个名为**init()**的函数，它会启动加载的 swf 执行它应该执行的任何操作。现在让加载的 swf 中的所有内容都从第一帧开始，包括**init()**函数。

```
import flash.display.MovieClip;
import flash.display.DisplayObject;
import flash.display.Loader;
import flash.display.Bitmap;

import flash.net.URLRequest;

import flash.system.ApplicationDomain;
import flash.system.SecurityDomain;
import flash.system.LoaderContext;
import flash.system.Security;

import flash.events.Event;
import flash.events.ProgressEvent;

var _swfLoader:Loader;
var _swf:DisplayObject;
var _percent:Number;

function loadSwf( swfURL:String ):void
{
    _swfLoader = new Loader();
    var req:URLRequest = new URLRequest( swfURL );

    var loaderContext:LoaderContext = new LoaderContext();
    loaderContext.applicationDomain = ApplicationDomain.currentDomain;
    loaderContext.checkPolicyFile = true;

    _swfLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onSwfProgress);
    _swfLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onSwfLoaded);

    _swfLoader.load(req, loaderContext);
}

function onSwfProgress( evt:Event ):void
{
    _percent = Math.round( ( evt.target.bytesLoaded / evt.target.bytesTotal ) * 100 );
}

function onSwfLoaded( evt:Event ):void
{
    _swfLoader.contentLoaderInfo.removeEventListener(ProgressEvent.PROGRESS, onSwfProgress);
    _swfLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, onSwfLoaded);

    _swf = _swfLoader.content;

    addChild( _swf );
    bar.visible = false;
    _swf.init();

    _swfLoader = null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:40:00.857

你的代码看起来不错。当您不在 http 服务器上时，会模拟加载过程。

编译完成后按crtl+B。在菜单中可以选择下载速度，再次按ctrl+enter可以模拟下载。

它可能会帮助您调试预加载器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T00:27:35.773

`@Lee Burrows`你说的是对的，但如果你看看我在代码末尾提到的内容会更好（三个粗体点）

我使用的解决方案是： -> 我将所有内容都设置为`Export on Frame 2`我的 3 帧文档。-> 删除第 2 帧上的所有内容 -> 创建了一个`TextField`via 构造函数并用于`drawRectangle`加载栏 -> 第 1 帧上没有动画剪辑，并使用

```
var menuScreen:Class = getDefinitionByName("MenuScreen") as Class;
addChild(new menuScreen() as DisplayObject); 
```

而不是之前的代码。

我最初没有工作的原因是，`Lee Burrows`如前所述，无论是否检查过，都会`Export for Actionscript`挂起加载 if `X = 1`in 。将其更改为 2 或取消选中是两个解决方案（除非它不是为 actionscript 导出的，否则它的代码不能被引用）。`Export on Frame X``Export on Frame 1``Export for Actionscript`

预加载器现在的起步价约为 2%。

# php - 在数组之后插入数据库变量

> ID：15755004
> 
> 赞同：0
> 
> 时间：2013-04-02T02:22:06.450
> 
> 标签：php, mysql

我有一张名为 OPERATORI 的表，还有一张名为 OPERATORI DEFUNTI 的表

解析 xml 我可以将 id 和 name 放入 OPERATORI，但我还需要在 OPERATORI DEFUNTI 中放入与 OPERATORI 相同的 ID

这是我的代码：

```
 $results = mysql_query("SELECT ID FROM OPERATORI");
 while ($row = mysql_fetch_assoc($results)) 
 {
 $sql = "INSERT INTO OPERATORI DEFUNTI VALUES ('$row','')";
 mysql_query($sql);
 } 
```

但是 OPERATORI DEFUNTI 的结果是数组，0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:26:06.403

```
$row 
```

是一个数组。将 ID 插入表中。你需要这样做：

```
$sql = "INSERT INTO OPERATORI DEFUNTI VALUES ('$row[ID]','')"; 
```

**编辑**

自 PHP 5.5 版起，不推荐使用 mysql 扩展。您可能想要使用**mysqli**或**pdo**（要比较两者，请阅读[MySQL：选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。

正如评论中提到的，通过将值加入查询来执行查询是不安全的。为它使用准备语句。查看[mysqli::prepare](http://www.php.net/manual/en/mysqli.prepare.php)或[PDO::prepare](http://www.php.net/manual/en/pdo.prepare.php)取决于您的选择。

# c# - 如何将值与 ntext 列进行比较？

> ID：15755009
> 
> 赞同：1
> 
> 时间：2013-04-02T02:22:40.410
> 
> 标签：c#, asp.net, sql, sql-server-2008

我正在做一个项目，在该项目中，我将 itextsharp 提取的 pdf 文本保存在 sql server 数据库的列中。对于某些要求，我必须通过将文档文本作为参数提供给查找文档的过程来搜索文档。我的代码是

```
 @docText varchar(8000)

   select * from document d

   where convert(varchar(8000),d.text) = @docText 
```

问题是，当文档文本大小小于 8000（例如 2600）时，它与此查询不匹配，并且在上述查询中，我们无法将大小设置为 convert(varchar(len(@docText)),d.text)。

如何设置列（文本）大小等于动态传递给过程的参数大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:26:44.880

我的第一个想法是你需要这个：

```
declare @docText varchar(max);

select *
  from document d
 where d.text = @docText; 
```

`VARCHAR(MAX)`是一种类型，可以保存从 0 字节到 2 GB 的任何 varchar。它之所以称为 VARying-CHARacter，是因为它具有可变性。尾随空格自动被认为是无关紧要的，即 `ABCDEF_____ = ABCDEF`（第一个有 5 个尾随空格）。

出于这个原因（尾随空格处理），不需要`CONVERT(varchar(<exact-length>), text)`.

该列`d.text`定义为什么类型？如果是 VARCHAR(8000)，那么我建议将其升级为 VARCHAR(MAX)。一本书肯定有8000多个字？

你确定你没有用字符填充输入@docText 来组成8000，例如添加尾随点或字节（0）字符？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:36:11.673

试试这个

> `where Charindex(d.text, @docText) > 0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:51:33.103

尝试：

```
declare @docText varchar(max)
set @doctext = 'test'
select * from document d
where convert(varchar(max),d.text) like '%' +@docText+ '%' 
```

这应该将文本值转换为可以轻松使用比较的内容，并允许您搜索文档中任何位置的特定文本块。

您还应该考虑是否要使用全文搜索。

接下来是您确实需要将文本字段更改为 varchar (max)，因为不推荐使用文本。这是需要对数据库进行的关键更改。没有理由任何 2008 数据库仍应使用 text 或 ntext 数据类型。当您不对已弃用的项目进行更改时，您会导致升级路径比删除该功能时更加痛苦（通常在删除已弃用的项目之前需要多次数据库升级），并且最终意味着您无法升级。这种类型的数据库维护需要在您想要升级之前很久就完成和测试。

# perl - 比较 4 个数组的最佳方法

> ID：15755013
> 
> 赞同：0
> 
> 时间：2013-04-02T02:23:34.580
> 
> 标签：perl, perl-module

我有 4 个文件，每个文件我读入它自己的数组。然后我从那里比较文件 A、B 和 C。在每个步骤中，我都会打印出丢失的数字列表。

比较 A 到 B 然后 B 到 A 打印在 A 而不是 B 中找到的文件列表，反之亦然

比较 A 到 C 然后 C 到 A 打印在 A 中找到但不是 C 的文件列表，反之亦然

比较 B 到 C 和 C 到 B 打印在 B 但不是 C 中找到的文件列表，反之亦然

然后我必须从这些比较中获取值并将它们与文件 D 进行比较，仅打印文件 D 中未找到的文件

这是我到目前为止的代码。我只是认为可能有更好的方法来做到这一点，我希望得到一些帮助。

[代码]

```
sub compare {

    my ($nf, $of, $inf, $infw) = @_;

    open NF, $nf or die $!;
    my @note_file = <NF>;
    close NF;

    open OF, $of  or die $!;
    my @order_file = <OF>;
    close OF;

    open INF, $inf or die $!;
    my @invoice_file = <INF>;
    close INF;

    open INFW, $infw or die $!;
    my @invoicefw_file = <INFW>;
    close INFW;

    my $lc1 = List::Compare->new(\@note_file,\@order_file); 
    my @unique_in_note_file = $lc1->get_unique;
    my @unique_in_order_file = $lc1->get_complement;
    print "The following files exist only in the Brighton-Note file and not in the Brighton-Order file : " . "\n\n" . join("\n", @unique_in_note_file) . "\n" if(scalar(@unique_in_note_file) > 0);
    print "The following files exist only in the Brighton-Order file and not in the Brighton-Note file : " . "\n\n" . join("\n", @unique_in_order_file) . "\n" if(scalar(@unique_in_order_file) > 0);

    my $lc2 = List::Compare->new(\@note_file,\@invoice_file);
    @unique_in_note_file = $lc2->get_unique;
    my @unique_in_invoice_file = $lc2->get_complement;
    print "The following files exist only in the Brighton-Note file and not in the Web-Sales file : " . "\n\n" . join("\n", @unique_in_note_file) . "\n" if(scalar(@unique_in_note_file) > 0);
    print "The following files exist only in the Web-Sales file  and not in th Brighton-Note file : " . "\n\n" . join("\n", @unique_in_invoice_file) . "\n" if(scalar(@unique_in_invoice_file) > 0);

    my $lc3 = List::Compare->new(\@order_file, \@invoice_file);
    @unique_in_order_file = $lc3->get_unique;
    @unique_in_invoice_file = $lc3->get_complement;
    print "The following files exist only in the Brighton-Order file and not in the Web-Sales file : " . "\n\n" . join("\n", @unique_in_order_file) . "\n" if(scalar(@unique_in_order_file) > 0);
    print "The following files exist only in the Web-Sales file  and not in th Brighton-Order file : " . "\n\n" . join("\n", @unique_in_invoice_file) . "\n" if(scalar(@unique_in_invoice_file) > 0);

    my $lc4 = List::Compare->new(\@unique_in_note_file,\@invoicefw_file);
    my @unique_in_notefw_file = $lc4->get_unique;
    my @unique_in_invoicefw_file = $lc4->get_complement;
    print "The following files exist only in the Brighton-Note file and not in the Web-SalesFW file : " . "\n\n" . join("\n", @unique_in_notefw_file) . "\n" if(scalar(@unique_in_notefw_file) > 0);
    print "The following files exist only in the Web-SalesFW file  and not in th Brighton-Note file : " . "\n\n" . join("\n", @unique_in_invoicefw_file) . "\n" if(scalar(@unique_in_invoicefw_file) > 0);

    my $lc5 = List::Compare->new(\@unique_in_order_file,\@invoicefw_file);
    my @unique_in_orderfw_file = $lc5->get_unique;
    @unique_in_invoicefw_file = $lc5->get_complement;
    print "The following files exist only in the Brighton-Order file and not in the Web-SalesFW file : " . "\n\n" . join("\n", @unique_in_orderfw_file) . "\n" if(scalar(@unique_in_orderfw_file) > 0);
    print "The following files exist only in the Web-SalesFW file  and not in th Brighton-Order file : " . "\n\n" . join("\n", @unique_in_invoicefw_file) . "\n" if(scalar(@unique_in_invoicefw_file) > 0);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T05:51:44.040

使用两个文件执行此操作的典型方法是：

```
my %items;
while (<$file1>) {
  $items{$_}++;
}
while (<$file2>) {
  $items{$_}++;
} 
```

任何`%items`值为 2 的键都在两个文件中；任何值为 1 的键只在一个文件中。

如果您需要知道每个值出现在*哪个*文件中，这可以通过为每个文件添加不同的数字来概括。例如，如果您为第一个文件中的行添加 100，为第二个文件中的行添加 10，为第三个文件中的行添加 1，那么您可以立即看到值为 101 的键表示第一个文件中的行和第三个文件，但不在第二个文件中。

# java - 我可以这样做吗 - if(token[0].equals(("MOVE")|("NOT")|("AND"))

> ID：15755015
> 
> 赞同：1
> 
> 时间：2013-04-02T02:23:41.287
> 
> 标签：java, equals

我想制作一个 if 条件如下：

```
if(token[0].equals(("MOVE")|("NOT")|("AND"))
{

} 
```

Orelse 还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:25:37.537

抱歉，没有。

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals(java.lang.Object)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals(java.lang.Object))

它一次只比较一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T02:26:05.863

你可以把它写成一堆独立的语句，所有的 OR-red 一起：

```
if (token[0].equals("MOVE") || token[0].equals("NOT") || token[0].equals("AND")) {
     ...
} 
```

或者，使用新的基于 Java 字符串的 switch 语句：

```
switch(token[0]) {
case "MOVE":
case "NOT":
case "AND":
    ...
    break;
default:
    ...
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:49:20.977

一套会做你想做的事。

```
 String[] commands={"MOVE", "NOT", "AND"};
    Set<String> cmds=new HashSet<String>(Arrays.asList(commands));
    if (cmds.contains(token[0])) {
        . . .
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T02:33:07.067

较早的答案当然是正确的，但我会再抛出一个替代方案。

```
if (token[0].matches("MOVE|NOT|AND")) {
    ...
} 
```

这有点效率低下，并且是对正则表达式的典型过度使用，但它简洁且在精神上与您所写的内容接近。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T02:26:04.857

呵呵，没有。Java没有那么强大。你需要做三个比较：

```
if(token[0].equals("MOVE") || token[0].equals("NOT") || token[0].equals("AND"))
{

} 
```

# javascript - 我如何知道何时使用 {}

> ID：15755021
> 
> 赞同：-1
> 
> 时间：2013-04-02T02:24:21.993
> 
> 标签：javascript, curly-brackets

我是学习 JavaScript 的新手。我开始掌握它的窍门，但我正在审查我从一本我正在学习的书（“Head First”）中获得的代码行，并且我有点难以理解何时使用`{}`

你能帮我理解吗？

```
function touchrock() {
    if (userName) {
        alert("I am glad that you have returned " + userName + "! Let's continue searching for your dream car");
    } else {
        userName = prompt("What is your name?");
        if (userName) {
            alert("It is good to meet you, " + userName + ".").onblur = setCookie;
            if (navigator.cookieEnabled);
            else alert("Sorry. Cookies aren't supported");
        }
    }
    document.getElementById("lambo").src = "lamboandgirl.jpg";
    document.getElementByID("lambo").onblur = setCookie;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:29:08.607

对于 a `function`，您始终需要使用它：

```
function () {
    // ...
} 
```

对于`if`语句或`else`语句，它是可选的，但是如果不使用大括号，则它只能执行一行

```
if (cond)
    // single line...
else
    // single line...

if (cond) {
    // multi ...
    // line ...
} else {
    // multi ...
    // line ...
} 
```

你甚至可以混合搭配`if`/`else`

```
if (cond)
{
    // multi ...
    // line ...
}
else
    // single line... 
```

还尝试使用从行尾开始的左大括号和在下一行的开头`{`结束大括号的标准。`}`这是编写 JavaScript 的常用标准方式。

```
function test(cond) {
    if (cond) {
        alert('hello world');
    } else {
        alert('awww');
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T02:32:24.327

使用`if`这样的陈述会令人困惑，应该避免。它看起来也有一个全局变量在那里浮动。

您可以仅对单行块省略括号：

```
while (condition)
    console.log(2);

// Is the same as

while (condition) {
    console.log(2);
} 
```

但*不适*用于多行块：

```
while (condition)
    console.log(2);
    console.log(3);

// Is the same as

while (condition) {
    console.log(2);
}

console.log(3); 
```

只要坚持在任何地方使用括号。`if`我只在正文只有一行长*且*没有`else`块的语句中（有时）省略它们：

```
if (condition) break;

// Is the same as

if (condition) {
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:31:27.567

使用 {} 的目的是单独的代码块。

```
function touchrock() { // Create a block of code
    if (userName) { // Create another one
        alert("I am glad that you have returned " + userName + "! Let's continue searching for your dream car");
    } else {
        userName = prompt("What is your name?");
        if (userName) {
            alert("It is good to meet you, " + userName + ".").onblur = setCookie;
            if (navigator.cookieEnabled);
            else alert("Sorry. Cookies aren't supported");
        }
    }
    document.getElementById("lambo").src = "lamboandgirl.jpg";
    document.getElementByID("lambo").onblur = setCookie;
} // End of the first block 
```

# php - 非静态调用静态方法

> ID：15755022
> 
> 赞同：0
> 
> 时间：2013-04-02T02:24:35.187
> 
> 标签：php, static

我遇到了这样的事情，不知道该怎么做。是否有充分的理由这样做或避免这样做？

```
class Foo {

  static public function bar() {}

}

someMethod() {

  $instanceOfFoo->bar();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T04:34:42.580

PHP文档说：

> [...] 不能用实例化的类对象访问声明为静态的属性（尽管静态方法可以）。[...] 使用箭头运算符 -> 无法通过对象访问静态属性。

没有为 . 调用的静态方法指定任何特殊内容`->`。不过，您绝对应该避免使用它，因为它会导致希望`$obj->meth()`成为非静态方法和`Cls::meth()`静态方法的读者感到困惑。

令人惊讶的是，这种行为[不会触发](http://codepad.org/KuTnYvUH)任何错误。这样做的原因是，在运行时调用的静态方法`$object->method()`在内部转换为`className::method()`（唯一的区别是`$this = NULL`已设置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:17:06.447

您可以如下调用特定函数。

```
Foo::bar(); 
```

您不必创建对象来调用静态函数。基本上，我们编写静态函数来调用函数，而不需要定义它的类的实例。

用对象调用静态函数是可以的，但是当你有一个更简单、更干净的方法时为什么要这样做。

# mysql - 你如何更新mysql中另一个表的多个字段？

> ID：15755024
> 
> 赞同：3
> 
> 时间：2013-04-02T02:24:43.443
> 
> 标签：mysql, sql, sql-update

这是我要完成的查询：

```
update amdashboard
set (ASCID, ASCFirst, ASCLast, ASCOtherName, ASCAdd1, ASCAdd2,
     ASCCity, ASCState, ASCZip, ASCZip4, ASCY2007, ASCY2008, ASCY2009,
     ASCY2010, ASCY2011, ASCY2012, ASCEthnicity, ASCGender, ASCMaritalStatus)
= (select id, firstname, lastname, listingspousename, add1, add2,
          city, state, zip, zip4, y2007, y2008, y2009,
          y2010, y2011, y2012, Ethnicity, Gender, MaritialStatus
     from ASCNCOAClean
          inner join amdashboard
          on ASCNCOAClean.firstname = amdashboard.actorsfirst
          and ascncoaclean.lastname = amdashboard.actorslast)
    where exists (select id, firstname, lastname, listingspousename,
                         add1, add2, city, state, zip, zip4, y2007, y2008,
                         y2009, y2010, y2011, y2012, Ethnicity, Gender,
                         MaritialStatus
                    from ASCNCOAClean
                         inner join amdashboard
                         on ASCNCOAClean.firstname = amdashboard.actorsfirst
                         and ascncoaclean.lastname = amdashboard.actorslast); 
```

我无法让它工作......在第一个括号中收到语法错误。所以，我想我只会尝试一个领域。我试过这个：

```
update amdashboard
set ascid = (select ascncoaclean.id
         from ASCNCOAClean 
         where ASCNCOAClean.firstname = amdashboard.actorsfirst
                           and ascncoaclean.lastname = amdashboard.actorslast)
where exists (select ascncoaclean.id
         from ASCNCOAClean 
         where ASCNCOAClean.firstname = amdashboard.actorsfirst
                           and ascncoaclean.lastname = amdashboard.actorslast); 
```

但是，这会返回错误 1242：子查询返回多于 1 行。这似乎很愚蠢。我知道它会返回不止一行...我想要它，因为我需要更新多行。

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T02:37:31.363

您想要的查询看起来像这样：

```
UPDATE amdashboard a, ASCNCOAClean b SET
   a.ASCID            = b.id,
   a.ASCFirst         = b.firstname,
   a.ASCLast          = b.lastname,
   a.ASCOtherName     = b.listingspousename,
   ...
   a.ASCMaritalStatus = b.MaritialStatus
WHERE a.actorsfirst = b.firstname; 
```

观察你将不得不`...`用我没有写的其他列关联替换。

但要小心，有些东西告诉我这个查询会对你的数据库做一些非常错误的事情，因为你没有使用唯一键关联表。如果有两条相同的记录，`ASCNCOAClean.firstname`您肯定会丢失数据。

另请注意，它将更新上**的现有**记录`amdashboard`，而不是添加新记录。如果您的意图是将数据从 迁移`ASCNCOAClean`到`amdashboard`，假设`amdashboard`是一个全新的空表，那么您想要的查询是这样的：

```
INSERT INTO amdashboard (
    ASCID, ASCFirst, ASCLast, ASCOtherName, ASCAdd1, ASCAdd2, ASCCity, ASCState, 
    ASCZip, ASCZip4, ASCY2007, ASCY2008, ASCY2009, ASCY2010, ASCY2011, ASCY2012,
    ASCEthnicity, ASCGender, ASCMaritalStatus
)
SELECT
    id, firstname, lastname, listingspousename, add1, add2, city, state,
    zip, zip4, y2007, y2008, y2009, y2010, y2011, y2012, Ethnicity, Gender,
    MaritialStatus
FROM ASCNCOAClean; 
```

# ruby-on-rails-3 - 轨道3。有没有办法为不同的控制器分离 javascript 文件？

> ID：15755028
> 
> 赞同：0
> 
> 时间：2013-04-02T02:25:18.697
> 
> 标签：ruby-on-rails-3

我搜索了很长一段时间，但没有解决这个问题的方法。

例如，

我生成了 2 个控制器：文章和日历。

根据这 2 个控制器还生成了 2 个 javascript 文件：

日历.js 和文章.js。

问题是，如果它们（2 个文件）都无条件包含在 application.js 中。即当我打开文章/索引操作时，calendars.js 已在页面上导入

或者当我打开日历/索引操作（或任何操作）时，articles.js 已在页面上导入。

我正在寻找的是一种根据它们所属的控制器分离 javascripts 文件的方法？

我也有与 css 文件相关的相同问题。

谢谢你和最好的问候， Dat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T09:55:27.873

我找到了 paloma：[https](https://github.com/kbparagua/paloma) ://github.com/kbparagua/paloma 我用这个 gem 开发了新的 Rails 应用程序大约 2 个月，它提供了非常有效的方法来管理 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:50:40.130

您可能想要做的只是在每个控制器（动作）上执行某些 javascript。您可以使用此 gem 轻松实现：[https](https://github.com/intrica/rails_document_ready) ://github.com/intrica/rails_document_ready 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:08:45.983

您可以添加 index.html.erb 文件。

对于您想要此 js 文件的特定页面，请在您的 html 文件中添加。

**<%= javascript_include_tag "文章" %>**

# ruby-on-rails - 视图和布局之间的通信

> ID：15755030
> 
> 赞同：1
> 
> 时间：2013-04-02T02:25:30.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 RoR 的新手，我试图了解视图和布局之间的通信是如何工作的。

我找到了一些[文档](http://api.rubyonrails.org/classes/ActionController/Streaming.html#label-Communication+between+layout+and+template)，我知道我需要使用`provide`或`content_for`方法，但它并没有真正解释它是如何完成的。

另外，为什么我需要在布局中使用 yield 来打印值？

示例：home.html.erb（视图）

```
<% provide(:title, 'Home') %> 
```

application.html.erb（布局）

```
<title>Great App | <%= yield(:title) %></title> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:33:35.627

在您的子视图中，您可以通过传递带有文本内容的块来使用这些方法中的任何一种（这对于包含 HTML 标记的长内容段落很有用）：

```
<% content_for :title do %>
  <h1>The Title</h1>
<% end %> 
```

`#content_view`或者您可以简单地将字符串作为第二个参数直接传递给：

```
<% content_for :title, "The Title" %> 
```

[在ContentHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html)模块中有一些关于这些方法的更好的文档。

布局只是包装其他视图，子视图可以被认为是传递给布局的“块”。如果你这样想的话，很自然地，`yield`关键字被用来像块一样调用子视图。

# rest - REST 简易网络服务

> ID：15755033
> 
> 赞同：1
> 
> 时间：2013-04-02T02:25:48.973
> 
> 标签：rest, thread-safety, resteasy

您好我已经使用 JBOSS-Rest Easy 实现了一个 RESTful Web 服务。

每个 REST 服务都有提供服务方法的实例变量。

拥有实例变量是否会使宁静的 Web 服务线程不安全？

我还需要做些什么来使它们成为 ThreadSafe 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T22:18:48.727

> 拥有实例变量是否会使宁静的 Web 服务线程不安全？

不，拥有实例变量不会使您的 Resteasy 资源不安全。默认情况下，Resteasy 资源是基于每个请求创建的。

# ios - 目标 C：MFMailComposeViewController 中的粗体消息正文

> ID：15755034
> 
> 赞同：2
> 
> 时间：2013-04-02T02:25:56.593
> 
> 标签：ios, objective-c, mfmailcomposeviewcontroller

我有这个代码

```
NSString *messageBody = [NSString stringWithFormat:@"Name: %@\nCompany/Institution: %@\nAddress: %@\nCity: %@\nCountry: %@\nContact Number: %@\nE-Mail: %@\n \n \n Message: %@", rName.text, rCompany.text, rAddress.text, rCity.text, rCountry.text, rContactNumber.text, rEmail.text, rDescription.text];
    [tempMailCompose setMessageBody:messageBody isHTML:NO]; 
```

现在我要做`MFMailComposeViewController`的就是将姓名、地址、城市、国家、联系电话、电子邮件和消息设置为粗体。我所做的是插入`<strong>`，但结果是错误的，它也显示`<strong>`为文本。

我怎么能加粗呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T02:40:21.880

试试这个

```
NSString *messageBody = [NSString stringWithFormat:@"Name: <b>%@</b><br/>Company/Institution: <b>%@</b><br/>Address: <b>%@</b><br/>City: <b>%@</b><br/>Country: <b>%@</b><br/>Contact Number: <b>%@</b><br/>E-Mail: <b>%@</b><br/> <br/> <br/> Message: <b>%@</b>", rName.text, rCompany.text, rAddress.text, rCity.text, rCountry.text, rContactNumber.text, rEmail.text, rDescription.text];
[tempMailCompose setMessageBody:messageBody isHTML:YES]; 
```

# ruby-on-rails-3 - 在 ruby on rails 表单提交新创建的对象后，如何更新使用集合呈现的部分列表

> ID：15755035
> 
> 赞同：0
> 
> 时间：2013-04-02T02:26:02.743
> 
> 标签：ruby-on-rails-3, renderpartial

这是我的小组观点的一部分。我有一个用对象集合渲染的部分列表：

```
<div id="container">
  <ul>
    <li id="form"></li>
    <li id="partials">
      <%= render :partial => 'groups/partial-list-row', :collection => @allpartials, :as => :f %>
    </li>
  </ul>
</div> 
```

在 ID 为“form”的列表项中，有一个 ruby​​ on rails 表单，它是一个 form_for @newpartial，它在 Partial 控制器中定义为 @newpartial = Partial.new()。我已经成功地使用 jquery 在单击“新建部分”按钮时切换两个列表项的显示和隐藏，并且在完成完成的表单后，肯定会创建一个新的部分对象。我在这里寻找的是在表单提交后重新出现的部分集合，包括新创建的部分对象。做这个的最好方式是什么？我的表单位于 ID 为“form”的列表项内，如下所示：

```
<%= form_for @newpartial, :html => {:multipart => true, :class => 'custom'}, remote: true do |f| %>
  <% if @newpartial.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@newpartial.errors.count, 'error') %> prohibited this partial from being saved:</h2>
      <ul>
        <% @newpartial.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <%= render :partial => 'partials/form-partial', :locals => { :f => f } %>
  <div class="actions">
    <%= f.submit 'Launch', :class => 'large success button radius new_browser_tab' %>
    <a class="cancel_campaign_new">Cancel</a>
  </div>
<% end %> 
```

我还成功地创建了一个在 DOM 完全加载后绑定到此表单的“ajax:success”事件的函数。我只是不知道这是否是正确的方法，如果是，我不知道这个事件处理程序的主体应该由什么组成。我已经提出了与同一问题相关的其他问题（我已经有一段时间没有找到解决方案了）。如果您需要其他上下文，请参考以下问题：

*   [所以问题1](https://stackoverflow.com/questions/15582686/refresh-html-content-provided-by-embedded-ruby-without-reloading-the-page)
*   [所以问题2](https://stackoverflow.com/questions/15443606/how-do-i-use-another-controllers-action-in-the-view-of-a-different-model-in-ruby)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:50:53.917

我没有意识到的是，`remote: true`在表单上应用表明控制器的操作方法将响应模型“action”.js.erb 文件。在创建该文件并执行我一直想要的 jquery 之后，我能够修复一些扭结并使该部分正常工作。

将 jquery 呈现在客户端 javascript 中的新部分与您的“action”.js.erb 文件之间的区别在于“action”.js.erb 文件能够向服务器发出所需的请求，而您的客户端javascript不是。

**有人可以阅读此内容并让我知道上述陈述是否准确吗？我真的很想为遇到此问题的任何人提供尽可能准确的答案...**

[CodeSchool.com](http://codeschool.com)上有一些非常好的教程，其中有一些免费课程可供学习，包括视频讲座、幻灯片和练习，我曾经最终在这方面给了我足够的指导。另外值得一提的是，如果您打算快速学习这些东西并计划花费大量时间来开发您的 Web 开发能力，那么每月支付 20 美元来访问所有课程是非常值得的（您可以随时取消，所以学习你需要学习的东西并继续前进！）。

# javascript - VS 扩展来操作 HTML / CSS

> ID：15755039
> 
> 赞同：5
> 
> 时间：2013-04-02T02:26:22.423
> 
> 标签：javascript, html, visual-studio-2010, visual-studio, visual-studio-2012

我希望增强我的编程体验，我相信我可以通过创建 Visual Studio (2012) 扩展来做到这一点。我已经开始深入研究 MSDN 上的文档，但它很密集，我正在研究它。

我有几个问题：

1.  扩展是下面描述的场景的正确方法吗？
2.  如果是这样，知道我应该开始研究哪个命名空间吗？
3.  任何圣人智慧/链接RE：“陷阱”或“陷阱”？

**设置** 我有一个 HTML 块，它在某些元素上有一些内联 CSS。我想右键单击元素并将内联代码应用于新的或现有的样式表 (CSS)。

**编码**

```
<div>
    <div class="ui-bar-d ui-bar"  >
        <span class="WBHeaderDetail" style="margin-left: 5px; margin-right: 5px;">
            Name: <em class="WBHeaderDetailValue" style="text-decoration: underline;">@ViewBag.JobName</em>
        </span>
        <span class="WBHeaderDetail" style="margin-left: 5px; margin-right: 5px;">
            Status: <em class="WBHeaderDetailValue" style="text-decoration: underline;">@ViewBag.Status</em>
        </span>
        <a data-role="button" data-theme="b" data-icon="check" data-inline="true" data-mini="true" >Save</a>       
    </div>
</div> 
```

可以说，扩展将公开的操作可以获取对给定元素的引用并检查内联 CSS（样式标记），将其从元素中删除，然后将该 CSS 附加到项目/解决方案中的新样式表或现有样式表中。元素是否已经具有“类”属性的值可能会影响为此项目选择的供应商。

**更新**

看到这个：[http ://www.asp.net/vnext/overview/aspnet/whats-new](http://www.asp.net/vnext/overview/aspnet/whats-new)

**智能任务**

在设计视图中，服务器控件的复杂属性通常具有关联的对话框和向导，以便于设置它们。例如，您可以使用特殊对话框将数据源添加到Repeater 控件或将列添加到GridView 控件。

但是，这种复杂属性的 UI 帮助在 Source 视图中不可用。因此，Visual Studio 11 为 Source 视图引入了 Smart Tasks。智能任务是 C# 和 Visual Basic 编辑器中常用功能的上下文感知快捷方式。

对于 ASP.NET Web 窗体控件，当插入点位于元素内部时，智能任务在服务器标记上显示为一个小字形：

![在此处输入图像描述](https://i.stack.imgur.com/JS6t6.png)

我可以让我的代码进入那个对话框吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:39:39.200

去年我为课程做了一个小的 VS 扩展，结果非常好。它与排序、格式化和重新组织 C++ 代码文件有关。这与您想要做的有点不同，但我建议您看看[CodeMaid](http://www.codemaid.net/)。它具有数量惊人的功能，而且由于它是开源的，因此在我进行扩展时，源代码确实帮助了我。

不幸的是，您使用的是 HTML，而 Visual Studio 仅提供 C# 的代码模型（基本 AST）和少量 C++。您不太可能从 Visual Studio 获得任何有关 HTML 编辑的帮助。

所以我会做两件事。首先，看看[这些](http://msdn.microsoft.com/en-us/library/dd885122.aspx)教程。他们将帮助您为扩展创建基础并让您熟悉 API。（你可能不得不寻找其他人来增加你的知识，因为 MS 教程并不是最好的。）其次，完善你的正则表达式。完成所需内容的最佳方法可能是自己解析文件并找到内联样式标签的所有实例。然后添加一个右键菜单项，并在需要时找到相应的标签。

但同样，我将从基本教程开始。VS 扩展 API 有点奇怪，所以你可能想先做一些简单的事情来习惯它。

祝你好运，你会需要它。:p

编辑：我知道这并不能直接回答您的问题，只是提供一些建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T07:13:35.400

是的，VSIX 是要走的路。

您可以查看 Web Essentials 中的一些代码。Web Essentials 执行的操作与您想要执行的操作类似。

以下是github上CSS排序器的链接：[https ://github.com/madskristensen/CssSorter](https://github.com/madskristensen/CssSorter)

而这个是 HTML ZenCoding 功能的链接： [https ://github.com/madskristensen/zencoding](https://github.com/madskristensen/zencoding)

由于它们都涉及处理 HTML、CSS，因此您可以通过查看代码获得大量信息。与您的项目的唯一区别是您实际上同时针对这两个目标并且正在研究访问多个文件。不幸的是，对于 HTML 和 CSS，我不知道是否有可用的内置解析器。

不过，NuGet 上有一些可用的包，因此您可以尝试一下： ExCSS 样式表解析器：[http](http://nuget.org/packages/ExCSS/) ://nuget.org/packages/ExCSS/ HtmlAgilityPack：[http ://nuget.org/packages/HtmlAgilityPack/](http://nuget.org/packages/HtmlAgilityPack/)

我没有直接使用这些软件包，但我想你必须尝试一下，看看它是否合适。

至于智能任务：这通常是控件设计器的一部分，我认为它不适合您想做的事情。我只是将您的扩展添加到上下文菜单中

# php - 在数据库中存储巨大的数组

> ID：15755045
> 
> 赞同：1
> 
> 时间：2013-04-02T02:26:50.633
> 
> 标签：php, mysql, arrays, multidimensional-array

我正在做一个图像处理项目。我使用 php 作为 GUI 和 matlab 作为算法和 Mysql 作为我的数据库。我现在有 30,000 张图像存储在数据库中。我的 matlab 程序将为每个包含 300 个元素的图像生成 3 个数组。所以，我的问题是

1.  是将 matlab 为所有图像生成的数组保存在单个 txt 文件中，还是为每个图像创建一个 txt 文件。哪种方法更容易检索数据并存储到数据库中？
2.  从 txt 文件复制数组并将其保存到数据库中有多难？这有什么标准流程吗？
3.  必须检索数组的元素以进行进一步计算。我们可以为此目的使用序列化和反序列化吗？
4.  我必须一次比较 2 个数组元素，并从两个数组中获取具有最小值的第三个数组。例如 A=[1 2 3 4] 和 B=[6 1 4 2] 我必须比较这 2 个数组的每个元素并生成第三个数组 c=[1 1 3 2] 将数组的每个元素与另一个数组的对应元素，并将最小元素存储在第三个数组中。与 1 个固定阵列相比，该过程重复数千个阵列。有没有任何php函数可以做到这一点？

任何建议和帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:24:58.873

在这种情况下，最好的解决方案是创建一个单独的元表来存储与您的图像相关的数据（数组）。

这是一个简单的 EER 示例：

![图像数据库 EER](https://i.stack.imgur.com/4yGxq.jpg)

`image_id`（引用外键）、`array`和的组合`index`构成元表的主键。

我假设您可以安全地将数组的键表示为 0 索引，并且数组的所有值也是数字（这就是为什么所有字段都是 type `INT`，但如果不是，请相应地调整数据类型）。

*   **`image_id`**表示链接的 image_id。
*   **`array`**表示特定的数组（您说最多 3 个数组，因此该列中的值将是 的任何位置`1-3`）。
*   **`index`**是数组中的数字索引。
*   **`value`**是与索引配对的数组中的值。

元表中的示例数据可能如下所示：

```
image_id    |    array    |    index    |    value
------------------------------------------------------
256         |    1        |    0        |    5
256         |    1        |    1        |    9
256         |    1        |    2        |    4
256         |    1        |    3        |    23
256         |    1        |    4        |    1
256         |    2        |    0        |    9
256         |    2        |    1        |    15
256         |    2        |    2        |    8
256         |    2        |    3        |    19
256         |    2        |    4        |    11 
```

在上面的示例数据中，我们有两个数组（每个数组由`1`和`2`在`array`列中表示），每个数组有 5 个元素（键表示在`index`列中，值表示在`value`列中。

您可以存储任意数量的数组，也可以存储任意数量的索引。

您还可以在 MySQL 中使用`GROUP BY`. 以下是如何**在 image_id 256 的所有数组中找到每个键的最小值**（假设有 3 个数组）：

```
SELECT   index, MIN(value) AS minvalue
FROM     image_meta
WHERE    image_id = 256
GROUP BY index 
```

`image_id`由于在 ( , `array`, )上设置了复合索引`index`，因此这应该非常快。

这种设计还允许您在每个图像中拥有可变数量的索引和数组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T02:36:58.953

阅读您的问题，不管我的评论如何，关系数据库对您来说会更好，如果性能不是一个大问题，那么 SQL 将是最好的解决您问题的语言，而不是 PHP 级别的语言。
是的，PHP 也有解决这些问题的简单方法，尽管不像 SQL 那样简单。

# android - getActiveSession 返回 null

> ID：15755046
> 
> 赞同：1
> 
> 时间：2013-04-02T02:26:50.747
> 
> 标签：android, authentication, login, facebook-login

我已经尝试过几次为 Android 实现“入门”页面，但除了在登录后立即关闭应用程序之外，它拒绝执行任何操作。我仔细检查了我的密钥哈希和所有内容。该代码现在不起作用还是只有我？

# java - 来自 jdbcTemplate.query() 的未经检查的转换？

> ID：15755047
> 
> 赞同：3
> 
> 时间：2013-04-02T02:27:05.920
> 
> 标签：java, spring, jdbctemplate

关于 JdbcTemplate，我正在使用此代码来检索结果集：

```
List<Book> bookList = jdbcTemplate.query(
                constructQueryStatement(), 
                new Object[] {row_start, row_end}, 
                new BookRowMapper()); 
```

无论如何，上面的代码给了我这个警告：

```
Type safety: The expression of type List needs unchecked conversion to conform to List<Book> 
```

我认为这个警告来自 jdbcTemplate.query() 正在返回一个`Type`未知的列表`List<Book>`。除了使用之外，有没有办法克服这个警告`@SuppressWarnings 'unchecked'`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:31:40.717

如果升级到 Spring 3.0 或更高版本，则 JdbcTemplate.query() 和 RowMapper 都已参数化。因此，您将能够充分利用泛型而不会收到任何编译器警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-18T07:22:22.613

为我工作。

我使用 BeanPropertyRowMapper

如果真的需要，我不喜欢使用 @SuppressWarnings 'unchecked'。

```
List<Book> resultList  = jdbcTemplate.query(sql.toString(), new BeanPropertyRowMapper<Book>(Book.class));
if (!resultList.isEmpty()) {
        return resultList;
}
return null; 
```

结果：对象书的列表。

# qt - 在Ubuntu10.04终端：QtSdk-offline-linux-x86-v1.2.1.run:cannot excute this binary file

> ID：15755049
> 
> 赞同：0
> 
> 时间：2013-04-02T02:27:15.280
> 
> 标签：qt

我正在尝试搭建一个QT环境，所以我下载了QtSdk-offline-linux-x86-v1.2.1.run 但是，问题来了。我尝试了以下步骤：

root@linux-desktop:/usr# chmod u+x QtSdk-offline-linux-x86-v1.2.1.run

root@linux-desktop:/usr# ./QtSdk-offline-linux-x86-v1.2.1.run

bash: ./QtSdk-offline-linux-x86-v1.2.1.run：无法执行二进制文件

我已经更新了 g++。

谁能告诉我如何解决这个问题？帮助。谢谢！

# perl - 省略由标记行分隔的部分文本文件

> ID：15755052
> 
> 赞同：0
> 
> 时间：2013-04-02T02:27:28.000
> 
> 标签：perl, shell, sed, awk

给定一个测试文件`settings.py`，如下所示：

```
# Django settings for x project.
DEBUG = True
TEMPLATE_DEBUG = DEBUG
ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)
MANAGERS = ADMINS
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}
# Hosts/domain names that are valid for this site; required if DEBUG is False
# See https://docs.djangoproject.com/en/1.3/ref/settings/#allowed-hosts
ALLOWED_HOSTS = [] 
```

我想以编程方式（shell脚本）替换行之间的部分：

```
DATABASES = { 
```

和：

```
} 
```

变量中包含一些文本`k`：

```
declare -r k='foo bar baz' 
```

我是`perl`初学者，但我编造了这个：

```
perl -ne 'if(!$f && /DATABASES/){$f=1} if(!$f){print} if($f && /^}$/){$f=0}' < settings.py 
```

这与我通常的`sed`/`awk`小技巧不同：

```
# e.g.
sed '/DATABASES/,/^}$/ d' < settings.py 
```

我想改进我`perl`的单行！

万能的我怎么能做`sed`的这么漂亮`perl`呢？

什么是绝对最好的方法：

*   观看标准输入传递并将其复制到标准输出
*   检测到哨兵“停止打印”行并停止复印
*   在遇到第二个哨兵线时重新启用 stdin->stdout 的传递

我省略了任务的*替换*部分，希望也能得到一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:27:38.657

无法想象您为什么要使用 perl 来进行简单的文本操作，因为它是 awk 的设计初衷，并且与所有优秀的 UNIX 工具一样，awk 只做一件事并且做得很好。

使用 GNU awk：

```
$ k="<<<< foo >>>>"
$ gawk -v k="$k" -v RS='\0' '{sub(/DATABASES = {.*\n}/,k)}1' file
# Django settings for x project.
DEBUG = True
TEMPLATE_DEBUG = DEBUG
ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)
MANAGERS = ADMINS
<<<< foo >>>>
# Hosts/domain names that are valid for this site; required if DEBUG is False
# See https://docs.djangoproject.com/en/1.3/ref/settings/#allowed-hosts
ALLOWED_HOSTS = [] 
```

解释：

```
gawk
-v k="$k"     = set the awk variable k to the value of the shell variable k
-v RS='\0'    = set the Record Separator to the NULL string so gawk reads the whole file
'
{sub(/DATABASES = {.*\n}/,k)}     = replace the text between "DATABASES = {" and "}" at the start of a line inclusive with the contents of the awk variable k.
1     = set a true condition which invokes the default action of printing the current record (the whole file in this case)
' file 
```

如果由于内存限制而无法一次读取整个文件，或者您只是喜欢这种风格或没有 GNU awk，请将脚本修改为（未经测试）：

```
$ awk -v k="$k" '
    /DATABASES = {/ { skip=1 }
    skip && /^}/    { skip=0; $0=k }
    !skip
  ' file 
```

希望它的作用是显而易见的。请注意，删除 RS='\0' 的设置意味着脚本不再是 gawk 特定的。

如果您需要保留分隔线，那也只是一个调整：

```
$ awk -v k="$k" '
    skip && /^}/    { skip=0; print k }
    !skip
    /DATABASES = {/ { skip=1 }
  ' file
# Django settings for x project.
DEBUG = True
TEMPLATE_DEBUG = DEBUG
ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)
MANAGERS = ADMINS
DATABASES = {
<<<< foo >>>>
}
# Hosts/domain names that are valid for this site; required if DEBUG is False
# See https://docs.djangoproject.com/en/1.3/ref/settings/#allowed-hosts
ALLOWED_HOSTS = [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:35:43.840

要删除 DATABASES 和 } 之间的部分，您可以使用以下命令：

```
perl -ne 'print unless (/DATABASES/../^}$/)' settings.py 
```

对于替换，是这样的：

```
$ export VAR="foo bar baz"
$ perl -ne 'print $ENV{VAR},"\n" if /DATABASES/; print unless /DATABASES/../^}$/' settings.py 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:38:17.240

我想我会向您展示如何将 awk 脚本转换为 Perl 脚本。

所以一开始，我拿了[Ed Morton 的](https://stackoverflow.com/users/1745001/ed-morton) [awk 版本](https://stackoverflow.com/questions/15755052/omit-part-of-text-file-delimited-by-sentinel-lines/15766741#15766741)并通过[`a2p`](http://perldoc.perl.org/a2p.html "perldoc a2p").

```
$ a2p
/DATABASES = {/ { skip=1 }
skip && /^}/    { skip=0; $0=k }
!skip
^d 
```

请注意，`^d`表示按`Ctrl`+ `d`。

```
#!/opt/perl-5.14.1/bin/perl
eval 'exec /opt/perl-5.14.1/bin/perl -S $0 ${1+"$@"}'
    if $running_under_some_shell;
            # this emulates #! processing on NIH machines.
            # (remove #! line above if indigestible)

eval '$'.$1.'$2;' while $ARGV[0] =~ /^([A-Za-z_0-9]+=)(.*)/ && shift;
            # process any FOO=bar switches

while (<>) {
    chomp;  # strip record separator
    if (/DATABASES = {/) {
    $skip = 1;
    }
    if ($skip && /^}/) {
    $skip = 0;
    $_ = $k;
    }
    print $_ if !$skip;
} 
```

* * *

我们可以扔掉这`eval 'exec ...`条线。我怀疑你永远需要它。

由于我们只需要处理`k="$k"`,`eval '$'.$1.'$2;' ...`也可以被抛出。我们只需要设置`$k`或`$ENV{k}`用后者替换前者。（请注意，您必须调用`export k`它才能工作。您也可以通过调用它`env k="$k" perl test.pl`）

由于该行被[`chomp`ed](http://perldoc.perl.org/functions/chomp.html "perldoc -f chomp")，我们需要替换`print $_ if !$skip;`为`print $_, "\n" if !$skip;`或设置[`$\`](http://perldoc.perl.org/perlvar.html#%24%5c "perldoc -v '$\'")为`"\n"`。我想我们可以不打电话就离开[`chomp`](http://perldoc.perl.org/functions/chomp.html "perldoc -f chomp")。

另外为了防止难以发现的错误，我将添加`use strict;`到`use warnings;`开头。

```
#!/usr/bin/env perl
use strict;
use warnings;

my $skip; # prevents printing when true
while (<>) {
  if (/DATABASES = {/) {
    $skip = 1;
  }
  if ($skip && /^}/) {
    $skip = 0;
    $_ = $ENV{k}."\n";
  }
  print $_ if !$skip;
} 
```

* * *

我认为我们可以在这里混入`sed`“主义”。( [`...`](http://perldoc.perl.org/perlop.html#Range-Operators "perldoc perlop"))

```
#!/usr/bin/env perl
use strict;
use warnings;

while (<>) {
  if( my $r = /DATABASES = {/ ... /^}/ ){

    if( $r == 1 ){ # first time it matches
      print $ENV{k}, "\n";
    }

    next; # don't print
  }

  print;
} 
```

* * *

唯一的事情是，我认为 OP 想要替换and**之间** 的文本。所以我们必须添加代码以允许打印这两行。`DATABASES = {``}`

```
#!/usr/bin/env perl
use strict;
use warnings;

while (<>) {
  if( my $r = /DATABASES = {/ ... /^}/ ){

    if( $r == 1 ){
      # append the replacement to the first line
      $_ .= $ENV{k}."\n";

    }elsif( $r !~ /E/ ){ # rest of the matches, except the last one
      next;
    }
  }

  print;
} 
```

* * *

你知道，我真的不喜欢将替换文本放在环境变量中。把它放在分区里怎么样[`__DATA__`](http://perldoc.perl.org/perldata.html#Special-Literals "perldoc perldata")。

```
use strict;
use warnings;

my $replacement = do{ local $/; <DATA> }; # slurp
close DATA;

while (<>) {
  if( my $r = /DATABASES = {/ .. /^}/ ){
    if( $r == 1 ){
      $_ .= $replacement;
    }elsif( $r !~ /E/ ){
      next
    }
  }
  print;
}

__DATA__
<<< FOO >>> 
```

# imacros - Imacros 帮助，脚本正在工作，但现在不行

> ID：15755053
> 
> 赞同：0
> 
> 时间：2013-04-02T02:27:34.840
> 
> 标签：imacros

这条线以前可以工作，但现在它没有提取文本，我猜这是因为它在框内单击而发生的。这仅在我使用 Firefox 时发生，使用 Internet Explorer 是可以的。

```
VERSION BUILD=8021970
TAB T=1
TAB CLOSEALLOTHERS
URL GOTO=http://www.fakemailgenerator.com/
TAG POS=1 TYPE=INPUT:TEXT FORM=ID:emailForm ATTR=ID:fName&&VALUE:* EXTRACT=TXT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:17:56.603

当 imacros 尝试抓取它时，您需要的值似乎消失了，但您可以使用此代码获取电子邮件：

```
URL GOTO=http://www.fakemailgenerator.com/ 
TAG POS=1 TYPE=span attr=id:cxtEmail EXTRACT=TXT 
```

或者您可以抓取标签的 htm 并对其进行解析以获取 value 属性

# javascript - 谷歌地图地理编码显示错误地址

> ID：15755054
> 
> 赞同：1
> 
> 时间：2013-04-02T02:27:44.173
> 
> 标签：javascript, asp.net-mvc, google-maps-api-3, asp.net-mvc-4, google-geocoder

我有存储在数据库中的位置，我正在遍历它们并在谷歌地图（API v3）上为每个位置（JS 和 Razor 的混合）放置标记。

我使用的代码来自我几天前在 StackOverFlow 上[提出的一个问题。](http://goo.gl/VlP0p)有问题的两个地址是：

1.  6-7 Hall Place, Spalding, PE11, 1SA, UK
2.  29 Union Street, 伯明翰, B2 4LR, UK

[这些地址在这里](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)完美显示。但是当我在我的网站（目前是本地主机）上尝试它们时，一个出现在旧金山，另一个出现在美国路易斯安那州！

这是我正在使用的 JavaScript 代码（注意，混合了一些 C#/Razor）：

```
<script type="text/javascript">

    // Get the map container node.
    var mapContainer = $("#myMap");
    var geocoder = new google.maps.Geocoder();

    // Create the new Goole map controller using our
    // map (pass in the actual DOM object). Center it
    // above the first Geolocated IP address.
    map = new google.maps.Map(
        mapContainer[ 0 ],
        {
            zoom: 11,
            center: new google.maps.LatLng(
                51.51121,
                -0.11982
            ),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
    );

    // I add a marker to the map using the given latitude
    // and longitude location.
    function addMarker(latitude, longitude, label) {
        var myLatlng = new google.maps.LatLng(latitude, longitude);
        // Create our "tiny" marker icon
        var iconImage = 'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png';

        // Create the marker - this will automatically place it
        // on the existing Google map (that we pass-in).
        var marker = new google.maps.Marker({
            map: map,
            position: new google.maps.LatLng(
                latitude,
                longitude
            ),
            title: (label || ""),
            icon: iconImage,
            center: myLatlng,
            zoom: 10
        });

        // Return the new marker reference.
        return(marker);
    }

    // I update the marker's position and label.
    function updateMarker( marker, latitude, longitude, label ){
        // Update the position.
        marker.setPosition(
            new google.maps.LatLng(
                latitude,
                longitude
            )
        );

        // Update the title if it was provided.
        if (label){
            marker.setTitle( label );
        }
    }

    function placeMarkerForAddress(address, city, postcode, country) {
        geocoder.geocode( { 'address': address}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location,
                    title: address + ', ' + city + ', ' + postcode + ', ' + country
                });
            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });
    }

    //now add markers
    @foreach (var item in Model.Events) {
        @:placeMarkerForAddress('@item.Location.Address', '@item.Location.City', '@item.Location.PostCode', 'UK');
        @:console.log('boo!');
    }

    // -------------------------------------------------- //
    // -------------------------------------------------- //
    // -------------------------------------------------- //
    // -------------------------------------------------- //

    // Check to see if this browser supports geolocation.
    if (navigator.geolocation) {

        // This is the location marker that we will be using
        // on the map. Let's store a reference to it here so
        // that it can be updated in several places.
        var locationMarker = null;

        // Get the location of the user's browser using the
        // native geolocation service. When we invoke this method
        // only the first callback is requied. The second
        // callback - the error handler - and the third
        // argument - our configuration options - are optional.
        navigator.geolocation.getCurrentPosition(
            function (position) {

                // Check to see if there is already a location.
                // There is a bug in FireFox where this gets
                // invoked more than once with a cahced result.
                if (locationMarker) {
                    return;
                }

                // Log that this is the initial position.
                console.log("Initial Position Found");

                // Add a marker to the map using the position.
                locationMarker = addMarker(
                    position.coords.latitude,
                    position.coords.longitude,
                    "Initial Position"
                );
            },
            function (error) {
                console.log("Something went wrong: ", error);
            },
            {
                timeout: (5 * 1000),
                maximumAge: (1000 * 60 * 15),
                enableHighAccuracy: true
            }
        );

        // Now tha twe have asked for the position of the user,
        // let's watch the position to see if it updates. This
        // can happen if the user physically moves, of if more
        // accurate location information has been found (ex.
        // GPS vs. IP address).
        //
        // NOTE: This acts much like the native setInterval(),
        // invoking the given callback a number of times to
        // monitor the position. As such, it returns a "timer ID"
        // that can be used to later stop the monitoring.
        var positionTimer = navigator.geolocation.watchPosition(
            function (position) {

                // Log that a newer, perhaps more accurate
                // position has been found.
                console.log("Newer Position Found");

                // Set the new position of the existing marker.
                updateMarker(
                    locationMarker,
                    position.coords.latitude,
                    position.coords.longitude,
                    "Updated / Accurate Position"
                );
            }
        );

        // If the position hasn't updated within 5 minutes, stop
        // monitoring the position for changes.
        setTimeout(
            function () {
                // Clear the position watcher.
                navigator.geolocation.clearWatch(positionTimer);
            },
            (1000 * 60 * 5)
        );
    }
</script> 
```

我很困惑！我尝试使用 FireBug 调试 JS，但我认为 GeoCode API 上必须有某种超时机制，当我尝试在调试模式下移动代码时它会给我错误。此外，我无法理解为什么我的地图没有以用户找到的位置为中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:25:25.610

尝试使用您的地理定位器请求的完整地址，并将区域设置为英国（如果您的所有地址都在英国），这应该会缩小搜索范围

```
function placeMarkerForAddress(address, city, postcode, country) {
    var fullAddress = address + ', ' + city + ', ' + postcode + ', ' + country;
    geocoder.geocode( { 'address': fullAddress, 'region':'UK'}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                title: fullAddress
            });
        } else {
                alert('Geocode was not successful for the following reason: ' + status);
        }
    });
} 
```

当您获得更新的位置时，您需要将地图居中并移动标记

```
function updateMarker( marker, latitude, longitude, label ){
    // Update the position.
    var pos=new google.maps.LatLng(latitude,longitude);
    // move the marker
    marker.setPosition(pos);
    // centre the map
    marker.getMap().setCenter(pos);
    // Update the title if it was provided.
    if (label){
        marker.setTitle( label );
    }
} 
```

# python - 在 group() 上的 pandas 中使用 cumsum

> ID：15755057
> 
> 赞同：13
> 
> 时间：2013-04-02T02:28:06.497
> 
> 标签：python, group-by, pandas

来自 Pandas 新手：我的数据基本上看起来像这样 -

```
 data1=pd.DataFrame({'Dir':['E','E','W','W','E','W','W','E'], 'Bool':['Y','N','Y','N','Y','N','Y','N'], 'Data':[4,5,6,7,8,9,10,11]}, index=pd.DatetimeIndex(['12/30/2000','12/30/2000','12/30/2000','1/2/2001','1/3/2001','1/3/2001','12/30/2000','12/30/2000']))
data1
Out[1]: 
           Bool  Data Dir
2000-12-30    Y     4   E
2000-12-30    N     5   E
2000-12-30    Y     6   W
2001-01-02    N     7   W
2001-01-03    Y     8   E
2001-01-03    N     9   W
2000-12-30    Y    10   W
2000-12-30    N    11   E 
```

我想按多个级别对其进行分组，然后执行 cumsum()：

例如，像`running_sum=data1.groupby(['Bool','Dir']).cumsum()`<-（不起作用）

输出类似于：

```
Bool Dir Date        running_sum
N    E   2000-12-30           16
     W   2001-01-02            7
         2001-01-03           16
Y    E   2000-12-30            4
         2001-01-03           12
     W   2000-12-30           16 
```

我的“喜欢”代码显然还没有接近。我做了很多尝试，并学到了很多关于如何不这样做的新知识。

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T04:30:29.847

试试这个：

```
data2 = data1.reset_index()
data3 = data2.set_index(["Bool", "Dir", "index"])   # index is the new column created by reset_index
running_sum = data3.groupby(level=[0,1,2]).sum().groupby(level=[0,1]).cumsum() 
```

您不能简单地使用`cumsum`on的原因`data3`与您的数据结构有关。`Bool`按and分组`Dir` 并应用聚合函数（`sum`,`mean`等）将产生一个比您开始时更小的 DataFrame，因为您使用的任何函数都会根据您的组键聚合值。然而`cumsum`，它不是一个聚合函数。它将返回一个与调用它的 DataFrame 大小相同的 DataFrame。因此，除非您的输入 DataFrame 的格式在调用后输出可以是相同的大小`cumsum`，否则它将引发错误。这就是为什么我`sum`首先调用它，它以正确的输入格式返回一个 DataFrame。

抱歉，如果我解释得不够好。也许其他人可以帮助我？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-11T23:09:13.970

正如另一个答案指出的那样，您试图将相同的日期折叠成单行，而 cumsum 函数将返回与原始 DataFrame 长度相同的一系列。换句话说，您实际上想按 [Bool, Dir, Date] 分组，计算每个组的总和，然后返回按 [Bool, Dir] 分组的行的累积和。另一个答案是对您的特定问题的完全有效的解决方案，这是一个单行变体：

```
data1.groupby(['Bool', 'Dir', 'Date']).sum().groupby(level=[0, 1]).cumsum() 
```

这将完全以请求的格式返回输出。

对于那些在 Pandas 组中寻找简单 cumsum 的人，您可以使用：

```
data1.groupby(['Bool', 'Dir']).apply(lambda x: x['Data'].cumsum()) 
```

累积总和是在每个组内部计算的。这是输出的样子：

```
Bool  Dir            
N     E    2000-12-30     5
           2000-12-30    16
      W    2001-01-02     7
           2001-01-03    16
Y     E    2000-12-30     4
           2001-01-03    12
      W    2000-12-30     6
           2000-12-30    16
Name: Data, dtype: int64 
```

请注意重复的日期，但这是对 Bool 和 Dir 列标识的每个组的行内部进行严格的累积求和。

# php - 使用 url 在网页中搜索 HTML 标签

> ID：15755060
> 
> 赞同：0
> 
> 时间：2013-04-02T02:28:29.513
> 
> 标签：php, javascript, jquery, html

我一直在做一个项目，我必须在用户提供的 url 输入中获取所有图像，并将用户找到并选择的所有图像的副本保存到他的帐户。我只是在这里寻找更好的解决方案。除了保存在 iframe 中打开的当前页面中的图像之外，我什至无法尝试任何事情。请提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:05:32.587

抱歉，我在问题中看到 * 将用户找到并选择的所有图像的副本保存到他的帐户中，因此我看到您只想保存选定的图像 用户选择的图像 我发布的内容不正确 下面的更多代码. . .

```
<?php
$allowed_formats  = array("png", "jpg", "gif");//Allowed image formats to save image as
$users_directory = "image-directory";//directory to save the images when user selects image to save

if ( isset( $_POST['view'] ) ) {//If url form submitted 
$users_submitted_url = $_POST['url'];//users submitted url
$ch = curl_init();//Curl the page
curl_setopt($ch, CURLOPT_URL , $users_submitted_url);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.A.B.C Safari/525.13");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
$web_images_response = curl_exec ($ch);
curl_close($ch);

preg_match_all('@<img src="http://(.*?)"@', $web_images_response, $imgs);//match only full image links
$image_divs .= '';
foreach($imgs['1'] as $image_url){ 
$image_divs .= "<div><a href='".$PHP_SELF."?url=".$image_url."' target='_blank'><img height='200px' height='200px' src='http://".$image_url."'></a></div>";//make images if clicked use get method to save the image
}

}

if ($_GET["url"] == ""){//If url to save is blank do nothing else save image
}
else{
$split_image = pathinfo($_GET["url"]);
if (in_array($split_image['extension'], $allowed_formats)) {

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL , "http://".$_GET["url"]);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.A.B.C Safari/525.13");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
$response= curl_exec ($ch);
curl_close($ch);
$file_name = $users_directory."/".$split_image['filename'].".".$split_image['extension'];//save image as file name and extension
$file = fopen($file_name , 'w') or die("X_x");
fwrite($file, $response);
fclose($file);
}
}
?>

<form method="post">
URL:<input name="url" value="http://piic.us/gallery.php" onclick="this.value='';"/>
<input name="view" value="Submit Query" type="submit" />
</form>

<?php echo $image_divs;?> 
```

如果用户单击它保存到该目录的图像，我希望这次我做对了。

# java - 禁止某人使用我的java程序的有效方法？

> ID：15755061
> 
> 赞同：2
> 
> 时间：2013-04-02T02:28:39.670
> 
> 标签：java, macos, ip

我有一个用java编写的游戏。就像在每场比赛中一样，有些人是你想远离它的。现在，如果我只是禁止电子邮件地址、用户名、IP 地址、主机地址，诸如此类。某人很容易快速更改他们的 ip，或者使用 VPN，并在新的用户名和电子邮件下创建一个新帐户，然后继续做他们正在做的事情。我也尝试过获取他们的 MAC 地址。然而，他们必须使用客户端登录，并且他们中的很多人都可以对其进行去混淆（我已经对其进行了混淆），并且只需更改我通过频道中的附件发送 MAC 地址的位置。其他人可以只用谷歌搜索并找到简单的方法来打乱他们的 MAC 地址。

我没主意了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:49:10.897

与其试图禁止，不如让他们失去兴趣并退出？使用蜜罐的想法。在游戏中添加一个隐藏的用户级“不好玩的偏好”，只会让它变得不那么有趣，但显然不是这样。也许游戏运行缓慢，或者你看不到很远，或者很快就变得非常困难。动用你的想象力。

那么下次你发现你的“特殊”用户时，不要禁止他——为他设置隐藏的无趣偏好。希望他会失去兴趣，让你一个人呆着。

# c++ - 泛型类中的更多“哪里”约束是可能的？

> ID：15755067
> 
> 赞同：0
> 
> 时间：2013-04-02T02:29:08.397
> 
> 标签：c++, c++-cli

我有一个这样定义的接口（因为我想不出一种方法来为我从 DB 查询调用中检索到的内容设置属性），

```
interface class IData
{
public:
   void Set(int i);
   int Get();
}; 
```

我有一个像这样定义的通用类

```
generic<typename T, typename U> where T:IsomeInterface public ref class MyClass{}; 
```

我想在上面的 MyClass 声明中添加“where U:IData”，但我现在卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:46:31.060

它与 C# 相同.. 像这样：

```
generic<typename T, typename U> 
    where T:IData
    where U:IData
public ref class MyClass { 
    }; 
```

..ETC。

# uibarbuttonitem - 条形按钮项目事件在 ios 6 或更高版本中未激活

> ID：15755068
> 
> 赞同：1
> 
> 时间：2013-04-02T02:29:12.800
> 
> 标签：uibarbuttonitem

我试过这个代码：自定义barbuttonitem：

```
-(id)initWithImage:(UIImage *)image title:(NSString*)title target:(id)target action:(SEL)action {
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame= CGRectMake(0.0, 0.0, image.size.width, image.size.height);
button.titleLabel.font = [UIFont boldSystemFontOfSize:12];
button.titleLabel.shadowOffset = CGSizeMake(0, -1);
button.titleLabel.shadowColor = [UIColor colorWithWhite:0 alpha:0.5];
button.titleLabel.textColor = [UIColor redColor];
[button setTitle:title forState:UIControlStateNormal];
[button setBackgroundImage:image forState:UIControlStateNormal];
[button addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];
UIView *view =[[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, image.size.width, image.size.height) ];
[view addSubview:button];
self = [[UIBarButtonItem alloc] initWithCustomView:view];
return self; 
```

}

并使用它：

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"my_account_icon.png"] title:@"" target:self action:@selector(buttonClick:)]; 
```

但是在 ios 6 事件中没有激活，ios 5 运行正常，请帮助我！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T16:08:55.313

尝试以下操作：

```
-(id)initWithImage:(UIImage *)image title:(NSString*)title target:(id)target action:(SEL)action 
{
    //create whatever custom views you need

    UIView *view =[[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, image.size.width, image.size.height) ];

    UITapGestureRecognizer * gestureRec = [[UITapGestureRecognizer alloc] initWithTarget: target action: action];
    [view addGestureRecognizer: gestureRec];

    //add your custom subviews to the view

    self = [[UIBarButtonItem alloc] initWithCustomView:view];
    return self;
} 
```

将手势识别器添加到 UIBarButtonItem 的子视图对我有用，即使 UIBarButtonItem 是使用自定义视图初始化的。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T23:40:11.607

`UIBarButtonItem`带有`customView`set 的 s 不会触发动作。

# cakephp - Controller中获取当前url的方法

> ID：15755071
> 
> 赞同：2
> 
> 时间：2013-04-02T02:29:18.473
> 
> 标签：cakephp

作为标题，我想问一下 Controller 中是否有一种方法可以在 CakePHP 中获取当前 url ？

或者我必须在 View 中执行此操作，然后将其 ass 参数传递给 Controller ？

请帮帮我:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T04:57:37.390

要在您的视图或控制器中获取当前的相对 URL，您可以执行以下操作：

```
<?php echo $this->here; ?> 
```

如果您想在控制器中获取完整的 URL，包括域，请执行以下操作：

```
<?php echo Router::url( $this->here, true ); ?> 
```

您将无法将视图中的任何内容传递回控制器 - 这不是 MVC 的工作方式。

这里提出了几乎完全相同的问题：[How to get complete current url for Cakephp](https://stackoverflow.com/questions/6836990/how-to-get-complete-current-url-for-cakephp)

# c++ - 职能权力

> ID：15755074
> 
> 赞同：0
> 
> 时间：2013-04-02T02:29:47.217
> 
> 标签：c++

我必须编写一个 main() 例程来测试以下测试用例的结果：

电源(8, 2)

电源(3, 3)

电源(2, 10)

使用 cout 在屏幕上显示计算值。这是我到目前为止所做的，但它不适合我

```
#include <iostream>
#include <cmath>

using namespace std;

int pwr (int&, int);

int main ()
{
int m, n;
cout << "Enter two positive integers;";
cin >> m >> n;
cout << endl << "The power is " << pwr(m,n) << endl;
return 0;
}

int power (int m, int n)
{
if (n<=1)
    return m;
else
    return m * power (m, n-1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:33:36.457

`int pwr (int&, int);`应该是`int power (int m, int n)`？

也许代码应该是这样的？

```
#include <iostream>
#include <cmath>

using namespace std;

int pwr (int, int);

int main ()
{
int m, n;
cout << "Enter two positive integers;";
cin >> m >> n;
cout << endl << "The power is " << pwr(m,n) << endl;
return 0;
}

int pwr (int m, int n)
{
if (n<=1)
    return m;
else
    return m * pwr (m, n-1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T02:33:51.570

您将您的功能声明为

```
int pwr (int&, int); 
```

但您将其定义为

```
int power (int m, int n) 
```

所以编译器找不到`pwr`里面的函数`main`。

将函数定义更改为以下内容：

```
 int pwr(int m, int n)
 {
   if (n<=1)
      return m;
   else
      return m * pwr (m, n-1);
 } 
```

由于你是在处理`int`s，所以你不需要通过引用传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:56:48.193

1.  不需要包括`cmath`
2.  函数声明和定义不匹配`int pwr (int&, int)` vs `int power (int m, int n)`（名称不匹配和参数不匹配）
3.  递归调用函数`return m * power (m, n-1)`应该是正确的`pwr`或者`power`。
4.  使用一些有意义的函数名和变量名。
5.  使用缩进和括号使您的代码清晰。

* * *

```
#include <iostream>

using namespace std;
int getPower(int, int);

int main ()
{
    int value, power;
    cout << "Enter two positive integers;";
    cin >> value >> power;
    cout << "The power is " << getPower(value,power) << endl;
    return 0;
}

int getPower (int value, int power)
{
    if (power<=1){
        return value;
    }
    else{
        return value * getPower (value, power-1);
    }
} 
```

# javascript - 如何将 JMVC (javascript-mvc) 和服务器端 MVC 结合在一起

> ID：15755076
> 
> 赞同：14
> 
> 时间：2013-04-02T02:29:50.553
> 
> 标签：javascript, php, ajax, html, javascriptmvc

几天前我问过这个问题，没有人回答。
我也问`forum.javascriptMVC.com`过它，现在我有了答案，但是我需要更多的想法。

问题：

```
I read javascriptMVC's documents and I loved it. 
But I don't know how to use it in a large scale project. 
```

我认为在服务器端需要一个 MVC 框架，或者可以提供很多帮助。而且我使用过服务器端 PHP 框架。

我很困惑，我对 JavascriptMVC 项目的理解是它们处理浏览器捕获事件上的客户端事件，执行 AJAX 请求，管理来自服务器的响应/数据，并在图形界面中向用户显示它们。

我知道在 PHP MVC 项目中我们也有控制器（和动作），它们中的任何一个都是具有单个入口点的单独页面，我的观点是这些页面是整个 HTTP 请求。

我认为这两个框架的组合将采用**单个**或*几个*重文件（包括 js 、 css 、 imgs 等）的形式，这些文件由另一个 Javascript 库（例如steal.js）加载和管理。现在用户可以使用站点及其操作（作为事件），这些操作会导致运行 js 函数，这些函数可能会更改 UI 中的某些内容或导致 AJAX 请求，例如在 Yahoo Mail 中，大多数事情都发生在*一个*页面中。

那么这将如何影响 PHP 中控制器和操作的设计呢？我的意思是通常在 PHP MVC 框架中，很多控制器和操作意味着很多页面。我认为由于 AJAX，控制器和操作的数量实际上应该更少。我还认为由于 JMVC，大多数控制器（和操作）应该转向 AJAX 响应程序，但是在这种情况下如何处理布局和视图？

最后

*   我想了解使用这种方法（JMVC+MVC）的不同方面。（我使用 Yii 作为我的服务器端 MVC 框架和 JavascriptMVC 作为我的客户端 MVC）。
*   我还想了解客户端的数据管理。
*   我想了解如何使用 AJAX 和 web-sockets，我们可以在哪里使用 AJAX 以及我们可以在哪里使用 websockets？
*   我想了解本地存储，我们如何将其用于模拟页面数据管理和缓存，我们如何将来自服务器的数据缓存为页面形式的 JSON？我正在做一个非常大的项目，我想建立一个非常强大的基础。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T06:18:11.787

假设你有一个 JMVC 框架，其中

*   该模型使用 AJAX 请求从服务器获取数据 - 期望 JSON 结果。
*   视图不依赖于服务器，更多的是提供原始 HTML。
*   控制器不依赖于服务器，更多的是为 JS 文件提供服务。

本质上，您使用服务器“应该”用于数据存储和处理，同时让您的客户端浏览器处理所有繁琐的事情。

现在，让我们看看如何定义一个服务器端框架。正如我所看到的，我们有几个选项，它们都非常相似，尽管有些不同（都以 JSON 格式返回一些内容）：

*   一个成熟的 MVC，例如 cakePHP
*   自定义实现
*   网络服务实现

就我个人而言，我会使用 WebService，而且我已经有了。或者更确切地说，我使用了基于 WebSocket 的 JSON-RPC WebService。使用成熟的 MVC 将在可维护性和服务器负载方面存在缺陷。但很有可能，只需实现一个将页面格式化为 JSON 的视图......

在我看来，制作 JMVC 客户端并不意味着它不能从服务器请求新的 HTML。但这确实意味着请求的 HTML 应该没有数据，除了元数据之外，Java-View 需要知道将接收到的数据放在哪里，例如 WebService。

所以 JMVC 中的主页可能只包含一个

```
<div id=content></div> 
```

并且菜单点击可以从服务器获取子页面并将内容加载到`content`. 然后，加载的内容可以包含更多的 javascript，这些 javascript 启动 WebService 请求以从服务器获取数据，以显示在它依次包含的空位置文件夹中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T06:49:18.113

首先检查[https://stackoverflow.com/a/4458566/718224](https://stackoverflow.com/a/4458566/718224)之后您可以继续前进。

* * *

试试这个（来自[https://stackoverflow.com/a/8424768/718224](https://stackoverflow.com/a/8424768/718224)）

不，您**不需要**在服务器端使用它，但它*有助于*组织/分离应用程序和业务逻辑。根据您的应用程序的规模，这在未来可能会有很大帮助。

关键是确保你很好地组织你的后端代码，否则你最终会得到一个单一的和/或难以维护的代码库。

服务器端视图将包含您的 HTML 和任何可能会或可能不会向服务器发出请求的 JavaScript。这假设您实际上是在使用 PHP 来构建用户导航到的页面。

如果您有一个使用 AJAX 请求自行构建的静态 html 页面，那么您*可能根本*不需要使用服务器端视图。您的控制器很可能会输出 JSON 数据。如果是这种情况，它不会降低模型和控制器的用处。

* * *

试试这个（来自[https://stackoverflow.com/a/8424760/718224](https://stackoverflow.com/a/8424760/718224)）

如果您正在使用任何主要的 PHP 框架（CakePHP、Code Igniter、Symfony 等），那么您已经在使用 MVC。如果您的服务器端逻辑比几个非常简单的脚本更复杂，那么您可能*应该*使用列出的框架之一，在服务器和客户端上使用 MVC。

当今正在构建的许多（大多数？）大型 Web 应用程序正朝着对客户端和服务器端应用程序代码使用 MVC 框架的方向发展。对于许多大型应用程序，尤其是请求/响应服务器应用程序和事件驱动的浏览器应用程序，这是一种分离关注点的绝妙模式。

* * *

试试这个（来自[https://stackoverflow.com/a/8427063/718224](https://stackoverflow.com/a/8427063/718224)）

Backbone.js 通过 RESTful JSON 接口连接您的应用程序。老实说，我发现它与 MVC 框架一起工作得非常好。如果您构建一个 RESTful API，您可以让您的服务器非常轻松地管理 CRUD 更新。您所有的服务器端代码都将负责保存 JSON 对象并将其发送回 Backbone.js。然后让你的大部分逻辑和魔法发生在 Backbone.js 框架中。

* * *

试试这个（来自[https://stackoverflow.com/a/8078282/718224](https://stackoverflow.com/a/8078282/718224)）

首先，像 Backbone 这样的客户端 MVC 框架不仅仅适用于单页应用程序。您还可以使用它为更传统的应用程序的一个或多个视图添加一些丰富的交互。它们只是在客户端上提供结构和数据抽象。

接下来，这些客户端框架专门设计用于与您的后端 MVC 框架一起使用。Backbone.js（因为您专门标记了它）模型和集合与 REST 服务一起使用。他们将通过 GET/POST/PUT/DELETE 动词进行对话，并在发出异步请求时最终与后端的控制器进行通信。

在 Backbone 的情况下，它使用 JSON 而不是 HTML。对于 Rails，这在控制器中很容易处理。如果请求是 HTML 请求，则返回 HTML 视图。如果是 JSON 请求（*.json 或 Content-type），则控制器返回数据的 JSON 表示。我假设在 Django 中和在 Rails 中一样容易让同一个控制器响应多个内容请求（HTML、XML、JSON 等）

**这可以帮助你。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-13T12:18:50.740

客户端Web应用程序和富客户端网页经常使用`jmvc` `backbones`等等，如果`HTML5`像你这样的js库和技术`webstorage`可以有更多的应用程序，比如网站，所有事情都发生在客户端，比如模板管理等等，而我们有ajax 请求/响应服务器以获取/设置数据或更新状态。和 abput 第一部分他们是正确的 jmvc 网站更像是一个单页网站。即 hotmail yahoo 等。

# mutex - 信号量优先级反转

> ID：15755080
> 
> 赞同：0
> 
> 时间：2013-04-02T02:30:17.820
> 
> 标签：mutex, semaphore, rtos, ucos, priority-inversion

为什么 RTOS 没有任何实现来防止信号量的优先级反转，即使它存在于互斥体中。

信号量不需要防止优先级倒置吗？

同样的情况发生在 uC/OS 和 GreenHills RTOS 上。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:00:05.727

> 当低优先级任务拥有一个信号量时，优先级反转发生，而高优先级任务被迫等待该信号量，直到低优先级任务释放它。如果在释放信号量之前，低优先级任务被一个或多个中等优先级任务抢占，则由于高优先级任务的延迟不再可预测，因此发生了无限优先级反转。这击败了截止日期单调分析 (DMA)，因为无法预测高优先级任务是否会在截止日期前完成。
> 
> 在高优先级和低优先级任务之间共享关键资源并不是一种理想的设计实践。最好只在同等优先级的任务之间共享资源，或者将资源访问限制为单个资源服务器任务。示例是打印服务器任务和文件服务器任务。我们长期以来一直提倡这种做法。然而，随着越来越多样化和复杂的中间件在 RTOS 上的分层，实施这种简单的策略变得不切实际。因此，为了安全起见，最好实现一些防止无限优先级反转的方法。

[在http://www.smxrtos.com/articles/techppr/mutex.htm](http://www.smxrtos.com/articles/techppr/mutex.htm)查看完整链接

问候，

奥塔康

# scala - 如何通过右侧的分隔符拆分字符串？

> ID：15755081
> 
> 赞同：10
> 
> 时间：2013-04-02T02:30:18.420
> 
> 标签：scala

如何从右侧通过分隔符拆分字符串？

例如

```
scala> "hello there how are you?".rightSplit(" ", 1)
res0: Array[java.lang.String] = Array(hello there how are, you?) 
```

Python 有一个`.rsplit()`方法，这是我在 Scala 中所追求的：

```
In [1]: "hello there how are you?".rsplit(" ", 1)
Out[1]: ['hello there how are', 'you?'] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T03:02:30.183

我认为最简单的解决方案是搜索索引位置，然后根据它进行拆分。例如：

```
scala> val msg = "hello there how are you?"
msg: String = hello there how are you?

scala> msg splitAt (msg lastIndexOf ' ')
res1: (String, String) = (hello there how are," you?") 
```

并且由于有人评论`lastIndexOf`返回-1，因此解决方案非常好：

```
scala> val msg = "AstringWithoutSpaces"
msg: String = AstringWithoutSpaces

scala> msg splitAt (msg lastIndexOf ' ')
res0: (String, String) = ("",AstringWithoutSpaces) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T08:42:42.373

您可以使用普通的旧正则表达式：

```
scala> val LastSpace = " (?=[^ ]+$)"
LastSpace: String = " (?=[^ ]+$)"

scala> "hello there how are you?".split(LastSpace)
res0: Array[String] = Array(hello there how are, you?) 
```

`(?=[^ ]+$)`表示我们将提前 ( ) 查找一组至少有 1 个字符长度`?=`的非空格 ( ) 字符。`[^ ]`最后，这个空格后面跟着这样的序列必须在字符串的末尾：`$`.

如果只有一个令牌，此解决方案不会中断：

```
scala> "hello".split(LastSpace)
res1: Array[String] = Array(hello) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:37:54.410

```
scala> val sl = "hello there how are you?".split(" ").reverse.toList
sl: List[String] = List(you?, are, how, there, hello)

scala> val sr = (sl.head :: (sl.tail.reverse.mkString(" ") :: Nil)).reverse
sr: List[String] = List(hello there how are, you?) 
```

# c++ - 重载函数以接受模板指针变量

> ID：15755083
> 
> 赞同：4
> 
> 时间：2013-04-02T02:30:25.847
> 
> 标签：c++, templates, pointers, overloading

push 方法在 main 函数中调用时使用。但是，即使主函数中的参数是指针，它仍然使用函数`void Push(const DATA_TYPE& newValue)`。

它不应该使用另一个，因为那是接受指针的那个？如果有指针变量，如何更改第二个函数中的参数以覆盖那个？

```
template<typename DATA_TYPE>   
void Push(const DATA_TYPE& newValue)
{
    //do stuff
}

template<typename DATA_TYPE> 
void Push(const DATA_TYPE *newValue)
{
    //do stuff
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T02:40:23.610

你的问题在于常数。

问题是，当您`Push(p)`使用非常量对象指针调用时，`P * p`第一个版本在设置 DATA_TYPE= 时完全有效`P*`，函数签名为`Push( const P* & )`. 相比之下，带有 DATA_TYPE= 的第二个版本`P`需要`const`在类型签名中添加才能获取`Push( const P* )`. 这意味着选择第一个版本而不是第二个版本，因为它是完全匹配的。

这是一个示例来说明发生了什么：

这是一个例子：

```
#include <iostream>

class Foo
{
    public:
    template<typename DT>   
    void Push(const DT& newValue)
    {
        std::cout<<"In const DT& version"<<std::endl;
    }

    template<typename DT>
    void Push(const DT *newValue)
    {
        std::cout<<"In const DT* version"<<std::endl;
    }
};

int main()
{
    Foo f;

    int i=7;

    // Since i is not const we pickup the wrong version
    f.Push( i ); // const DT&  ( DT = int )
    f.Push( &i ); // const DT& ( DT = int* )

    // Here's using a const pointer to show it does the right things
    const int * const_i_ptr = &i;
    f.Push( const_i_ptr ); // const DT* ( DT = int );

    // Now using a const object everything behaves as expected
    const int i_const = 7;
    f.Push( i_const ); // const DT& ( DT = int );
    f.Push( &i_const ); // const DT*  (DT = int );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:36:51.187

我已经测试过这个程序

```
#include <iostream>

template <typename T>
void push(T&)
{
    std::cout << "By ref" << std::endl;
}

template <typename T>
void push(T*)
{
    std::cout << "By ptr" << std::endl;
}

int main()
{
    int x = 0;
    push(x);
    push(&x);
    return 0;
} 
```

它输出

```
By ref
By ptr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:42:46.777

这是因为`const DATA_TYPE& newValue`它将匹配几乎任何东西，在你的情况下它匹配为对指针的引用`const DATA_TYPE*& newValue`。尝试使用`std::remove_pointer` [这里描述](http://en.cppreference.com/w/cpp/types/remove_pointer)的 - 从我的头顶我会写：

```
template<typename DATA_TYPE>   
void Push(const typename std::remove_pointer<DATA_TYPE>::type& newValue)
{
    //do stuff
}

template<typename DATA_TYPE> 
void Push(const DATA_TYPE *newValue)
{
    //do stuff
} 
```

然而，编写`const T&`与其他模板重载匹配的模板通常会导致`const T&`每次调用都被抓取，因此您应该避免以这种方式做事。

**编辑 ：**

我之前的代码不正确，它必须更复杂一点：

```
#include <iostream>
#include <type_traits>

template<typename DATA_TYPE, bool is_pointer>
struct helper;

template<typename DATA_TYPE>
struct helper<DATA_TYPE, true>{
    static void f(const typename std::remove_pointer<DATA_TYPE>::type*){
        std::cout << "Pointer" << std::endl;
    }
};

template<typename DATA_TYPE>
struct helper<DATA_TYPE, false>{
    static void f(const DATA_TYPE&){
        std::cout << "Non-pointer" << std::endl;
    }
};

template<typename DATA_TYPE>
void Push(const DATA_TYPE& newValue)
{
    helper<DATA_TYPE, std::is_pointer<DATA_TYPE>::value >::f(newValue);
}

int main()
{
    int i=0;
    Push(i);
    Push(&i);
    return 0;
} 
```

这可以按预期工作，并且不会强制调用者使用适当的 const-ness，尽管我承认它不像我以前的解决方案那样迷人；）

# sinatra - 您如何在 Sinatra 中选择您的 HTTP 服务器？

> ID：15755085
> 
> 赞同：13
> 
> 时间：2013-04-02T02:30:34.853
> 
> 标签：sinatra, rack, thin, webrick, mongrel

我正在本地运行 Sinatra 应用程序。

自从我安装了 Thin，我的 Sinatra 应用程序就一直使用它作为 Web 服务器。但是，Thin 在为我的应用程序所需的大量静态文件提供服务时遇到了性能问题，我想切换到 Mongrel 或 WEBrick。

我似乎无法弄清楚如何将我的应用程序切换到 Mongrel 或 WEBrick。即使我将`require 'mongrel'`or`require 'webrick'`放在 app.rb 的顶部，在 a 上`ruby app.rb`，Sinatra 仍然以 Thin 开头。

所以，我的问题是：你如何指定 Sinatra 在开发模式下使用的 Web 服务器？另外，我怎么能在生产模式下这样做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T02:37:59.987

`:server` [您可以使用配置设置设置](http://www.sinatrarb.com/configuration.html)Sinatra 使用的服务器：

```
set :server, 'webrick'  # or thin, mongrel 
```

在生产中，最好使用像[Phusion Passenger](https://www.phusionpassenger.com)或[Unicorn](http://unicorn.bogomips.org)这样更复杂的服务器，因为它们的性能比 Thin、Mongrel 或 WEBrick 更好。如果您选择Passenger 或Unicorn，您不会在您的Sinatra 应用程序文件本身中配置服务器，而是通常使用Rackup [config.ru](https://github.com/rack/rack/wiki/(tutorial)-rackup-howto)文件单独配置它。

“ [Ruby on Rails 服务器选项](https://stackoverflow.com/questions/4113299/ruby-on-rails-server-options)”针对的是 Rails 应用程序，但仍然与 Sinatra 应用程序非常相关。

# javascript - 在事件侦听器中传递变量不起作用

> ID：15755086
> 
> 赞同：0
> 
> 时间：2013-04-02T02:30:35.077
> 
> 标签：javascript

我有一个简单的事件监听器，我试图将变量传递给一个函数，但它不起作用......这就是我所拥有的：

```
window.onload = function () {
    document.getElementById('cursor').addEventListener("mousedown", mousePos, false);
}

function mousePos(e) {
    var x = e.clientX;
    var y = e.clientY;
    document.getElementById('cursor').addEventListener("mousemove", function () {
        mousemoveCalc(x, y);
    }, false);
}

function mousemoveCalc(e, x, y) {
    console.log(e);
    console.log(x); //undefined
    console.log(y); //undefined
} 
```

我变得不确定`x`，`y`但我不知道如何解决它=/它们在mousePos中没有定义=/

我该如何解决 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:46:57.417

看看这个小提琴，看看这是否接近你正在寻找的东西。 [http://jsfiddle.net/cF6fE/2/](http://jsfiddle.net/cF6fE/2/)

```
 var posx = 0;
    var posy = 0;
    window.onload = function() {

        document.getElementById('cursor').addEventListener("mousedown", mousePos, false);
    }

    function mousePos(e) {
        posx = e.clientX;
        posy = e.clientY;
        document.getElementById('cursor').addEventListener("mousemove", mousemoveCalc);
    }

    function mousemoveCalc(e) {
        console.log(e);
      var x = e.clientX;
        var y = e.clientY;
    var xOffset  = posx-x;
    var yOffset  = posy-y;
        console.log(x); 
        console.log(y); 
     console.log(xOffset); 
        console.log(yOffset); 
    } 
```

### 更新：- 使用[Function.bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

[http://jsfiddle.net/uGuHk/](http://jsfiddle.net/uGuHk/)

```
function mousePos(e) {
        var posx = e.clientX;
        var posy = e.clientY;
        document.getElementById('cursor').addEventListener("mousemove", mousemoveCalc.bind(this, posx,posy));
    }

    function mousemoveCalc(xax,yax,e) {

        console.log(e);
      var x = e.clientX;
        var y = e.clientY;
    var xOffset  = xax-x;
    var yOffset  = yax-y;
        console.log(x); //undefined
        console.log(y); //undefined
     console.log(xOffset); //undefined
        console.log(yOffset); //undefined
    } 
```

### 更新2：-关闭

[http://jsfiddle.net/FG6uW/](http://jsfiddle.net/FG6uW/)

```
function mousePos(e) {
        var posx = e.clientX;
        var posy = e.clientY;
        document.getElementById('cursor').addEventListener("mousemove", function() {
            (function(x, y) {
                mousemoveCalc(x, y)
            })(posx, posy)
        });
    }

    function mousemoveCalc(xax, yax) {

        var x = event.clientX;
        var y = event.clientY;
        var xOffset = xax - x;
        var yOffset = yax - y;
        console.log(xax);
        console.log(yax);

        document.getElementById('cursor').innerText = xax + '-' + yax + '|' + xOffset + '-' + yOffset;
        console.log(xOffset);
        console.log(yOffset);
    } 
```

# c# - 在图片框中绘制 (X,Y,Z) 浮点数

> ID：15755088
> 
> 赞同：0
> 
> 时间：2013-04-02T02:30:37.907
> 
> 标签：c#, .net, 3d, drawing

我有一个包含 3D 浮点数的数组。我如何在 c# 环境中的 PictureBox 中描绘它们？

示例）假设我们有一个名为 X 的数组：

```
 X=[0, 0, 0; 0.48, -0.88, 0.09; -1.06, 0.55, 0.9; -0.65, 1.5, -1.44; 1.1, 0.59,
-1.11;0.76, 0.86, -0.52; -1.08, -0.28, 0.55; 1.47, -1.21, 0.14; 1.42, -2.15, 0.71; -0.64,  
1.87, 2.4;2.32, -2.44, 2.02; 2.25, -2.56, -3.03; 2.35, 2.65, -1.5; 0.23, -2.25, 2.78; 2.47,  
-3.12,  -1.91; 2.27, 1.37, -3.05; 2.3, 1.9, -1.29; -1.77, -0.51, 2.33];  

    X1= [0,0,0]  
    X2=[0.48, -0.88, 0.09]  
    X3=[-1.06, 0.55, 0.9] ... 
```

现在这些点必须显示在一个图片框上，并按顺序连接在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:45:57.353

您不能在图片框上绘制 3D 点，因为 winforms 不提供直接填充 3D 点的功能，因为您可以使用支持 3D 的 WPF。如果你有计算机图形学的知识，那么你就可以做到。使用算法“将 3D 世界坐标投影到 2D 透视或平行投影”。这是一个带有源代码和完整说明的示例，您可以尝试一下[http://codeincodeblock.blogspot.com/2012/03/projecting-3d-world-co-ordinates-into.html](http://codeincodeblock.blogspot.com/2012/03/projecting-3d-world-co-ordinates-into.html)

# requirejs - 是否有更简洁的方式在 RequireJS 中包含依赖项

> ID：15755090
> 
> 赞同：3
> 
> 时间：2013-04-02T02:30:49.563
> 
> 标签：requirejs, requirejs-text

假设我有一个开始如下的模块：

```
define(['jquery', 'actions', 'util', 'text!../templates/dialog.html!strip', 'text!../templates/requestRow.html!strip', 'text!../templates/respondForm.html!strip'], function($, actions, util, tDialog, tRequestRow, tRespondForm) { 
```

该模块包含用于写入我的客户端 UI 的大部分代码。它还加载了我编写的几个其他模块以及使用 text.js 插件的 3 个 HTML 模板。我想知道是否有更简洁的方法来做到这一点？随着应用程序的增长，我可能需要加载额外的模板或模块，看起来我的定义语句可能会变得有点难看。我是否应该像这样在 main.js 中将模板路径添加到 require.config ：

```
require.config({
baseUrl: '/webrequests/resources/scripts/',
paths: {
    'modernizr': '../js/vendor/modernizr-2.6.2-respond-1.1.0.min',
    'bootstrap' : '../js/vendor/bootstrap.min',
    'dialog' : 'text!../templates/dialog.html!strip',
    'requestRow' : 'test!../templates/requestRow.html!strip',
    'respondForm' : 'text!../templates/respondForm.html!strip'
}}); 
```

是否有某种方法可以加载目录中的所有模板，并且只有 1 个依赖项包含在定义语句中？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T03:52:09.087

您可以制作一个模块来加载您经常使用的模板。因此，将要加载的模板分组到一个模块中，这样您就可以只加载这个*模板*模块而不是单独的模板：

```
// generalTemplates.js
define([
    'text!../templates/dialog.html!strip', 
    'text!../templates/requestRow.html!strip', 
    'text!../templates/respondForm.html!strip'
], function (tDialog, tRequestRow, tRespondForm) {
    return {
        dialog: tDialog,
        requestRow: tRequestRow,
        respondForm: tRespondForm
    };
}); 
```

因此，在您的模块中，您可以像任何其他模块一样简单地包含模板：

```
define([
    'jquery', 
    'actions', 
    'util', 
    'generalTemplates'
], function($, actions, util, templates) {
    var tDialog = templates.dialog,
        tRequestRow = templates.requestRow,
        tRespondForm = templates.respondForm;

    /* You can do stuff with the templates here */
}); 
```

# python - Poll.objects.filter() 返回同一轮询的多个实例

> ID：15755091
> 
> 赞同：2
> 
> 时间：2013-04-02T02:30:52.220
> 
> 标签：python, django, django-apps

按照 djangoproject 的教程，我创建了一个包含 2 个投票的投票。

```
In [14]: Poll.objects.all()
Out[14]: [<Poll: poll1>, <Poll: poll2>] 
```

当我应用过滤器时

```
In [18]: Poll.objects.filter(choice__choice_text__isnull=False) 
```

即使只有 2 个民意调查，也会返回以下内容。

```
Out[18]: [<Poll: poll1>, <Poll: poll1>, <Poll: poll1>, <Poll: poll2>, <Poll: poll2>, <Poll: poll2>] 
```

为什么同一个民意调查会多次出现？过滤器的目标是过滤掉没有任何选择的民意调查。此外，像下面这样的其他过滤器也可以工作。

```
In [19]: Poll.objects.filter(pub_date__lte=timezone.now)
Out[19]: [<Poll: poll1>, <Poll: poll2>] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:44:38.167

返回的民意调查是否有选择？看起来它为每个关联的选择返回一个轮询实例，导致重复。要摆脱这些，请使用`distinct()`：

```
Poll.objects.filter(choice__choice_text__isnull=False).distinct() 
```

**更新**：让我们深入了解一下。您的第一个查询跨越 Poll-Choice 关系，在幕后使用 JOIN 来“组合”两个表。（JOIN 可能很复杂，所以如果这令人困惑，我建议研究它们。）您的查询为每个文本为 null 的 Choice 返回一个 Poll 对象。

另一方面，您的第二个查询只是从您的 Poll 表中进行选择。该行：

```
Poll.objects.filter(pub_date__lte=timezone.now) 
```

转换为`SELECT * FROM poll WHERE pub_date <= tz.now`。有关字段查找的更多详细信息，请参阅[文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#field-lookups)。有关跨越关系的更多指导，请[再次参阅文档](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)。

# html-table - 如何摆脱表格的 colspan/rowspan 单元格中的线条？

> ID：15755094
> 
> 赞同：0
> 
> 时间：2013-04-02T02:31:07.043
> 
> 标签：html-table, border

我正在尝试重新创建靠近此表的内容：

[![](https://i.stack.imgur.com/ybHmn.png)](https://i.stack.imgur.com/ybHmn.png)

不过，随着我尝试这样做的方式，我得到了奇怪的线条。我该如何摆脱它们？或者有人可以告诉我实现上图所示表格的最简单方法吗？这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Assignment #4</title>
<style>

table
    {
font-family:"Courier New", Arial, Helvetica, sans-serif;
border-collapse:collapse;
margin: auto;
border-bottom-style: double; border-top-style: double;

     }

table.border tr {border: 1px solid black; border-left: 0px solid; 
    border-right: 0px       solid;}

th
    {
font-size:18px;
font-style: bold;
padding-top:2px;
padding-bottom:2px;
background-color:lightblue;
color:#000000;

    }

    tr.white td 
    {
color:#000000;
background-color: #ffffff;
    }

td,th
    {
font-size:1em;
padding:3px 7px 2px 7px;
text-align: left;

</style>
</head>

<body>

    <body>

<h3 style="text-align: center; font-family: courier new;">
<strong>Code-page support in   microsoft windows</strong></h3>

<table class="border">
<tr>
  <th>Code-Page ID</th>
  <th style="border: 1px solid black; text-align: center;">Name</th>
  <th colspan="2">ACP OEMCP</th>
</tr
 <div>
<tr class="white">
    <td style="background-color: lightblue;" rowspan="3">1200 
        <br/>1250       
        <br/>1251</td>

    <td style="border: 1px solid black;" rowspan="3">Unicode 
      <br/>Windows 3.1 Eastern European 

      <br/>Windows 3.1 Cynillic</td>

    <td rowspan="3"><br/>X <br/>X</td>

</tr>

<tr class="white">

<td style="border: 1px solid black;"></td>

</tr>

<tr class="white">

<td style="border: 1px solid black;"></td>

</tr>

   </div>

<div>
<tr class="white">
<td style="background-color: lightblue;" rowspan="3">437 <br/>708 <br/>709</td>
<td style="border: 1px solid black;" rowspan="3">MS-DOS 
<br/>Arabic (ASMO 708)   
<br/>Arabic (ASMO 449)</td>
<td><br/></td>
<td colspan="2">X <br/>X <br/>X</td>
</tr>

<tr class="white">

<td style="border: 1px solid black;"></td>

</tr>

<tr class="white">

<td style="border: 1px solid black;"></td>

</tr>

</div>

<div>
<tr class="white">
<td style="background-color: lightblue;">Assignment#4</td>
<td style="border: 1px solid black;">
<a href="http://www.mansfield.edu">Mansfield University</a></td>
<td colspan="2"><center>
<img src="http://mansfield.edu/files/images/Facebook.gif">  </center></td>
</tr>

</div>

</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:45:01.273

首先，图像样本的链接对我来说在这里不起作用:(

但是如果你的意思是像 line1|line2 这样的垂直线是你的问题，你可以使用 colspan=2。这将导致类似于 line1 line2 的内容。

例子：

```
<tr> 
```

`<td colspan=2>` `</td>` `<td>` `</td>` `</tr>`

希望会有所帮助，

问候，

奥塔康

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:17:23.063

你的代码是一团糟！你放了两个“body”，忘记了一些“}”和“>”。除了问题是您放在“tr”中的空白“td”。这里有代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Assignment #4</title>
<style>

table {
font-family:"Courier New", Arial, Helvetica, sans-serif;
border-collapse:collapse;
margin: auto;
border-bottom-style: double; border-top-style: double;
}

table.border tr {
    border: 1px solid black; 
    border-left: 0px solid; 
    border-right: 0px solid;
}

th{
font-size:18px;
font-style: bold;
padding-top:2px;
padding-bottom:2px;
background-color:lightblue;
color:#000000;
}

tr.white td {
    color:#000000;
    background-color: #ffffff;
}

td,th{
font-size:1em;
padding:3px 7px 2px 7px;
text-align: left;
}

</style>
</head>

<body>

<h3 style="text-align: center; font-family: courier new;">
<strong>Code-page support in   microsoft windows</strong></h3>

<table class="border">
<tr>
  <th>Code-Page ID</th>
  <th style="border: 1px solid black; text-align: center;">Name</th>
  <th colspan="2">ACP OEMCP</th>
</tr>
<tr class="white">
    <td style="background-color: lightblue;" rowspan="3">1200 
        <br/>1250       
        <br/>1251</td>

    <td style="border: 1px solid black;" rowspan="3">Unicode 
      <br/>Windows 3.1 Eastern European 

      <br/>Windows 3.1 Cynillic</td>

    <td rowspan="3"><br/>X <br/>X</td>

</tr>

<tr class="white">

</tr>

<tr class="white">

</tr>
<tr class="white">
<td style="background-color: lightblue;" rowspan="3">437 <br/>708 <br/>709</td>
<td style="border: 1px solid black;" rowspan="3">MS-DOS 
<br/>Arabic (ASMO 708)   
<br/>Arabic (ASMO 449)</td>
<td><br/></td>
<td colspan="2">X <br/>X <br/>X</td>
</tr>

<tr class="white">

</tr>

<tr class="white">

</tr>
<tr class="white">
<td style="background-color: lightblue;">Assignment#4</td>
<td style="border: 1px solid black;">
<a href="http://www.mansfield.edu">Mansfield University</a></td>
<td colspan="2"><center>
<img src="http://mansfield.edu/files/images/Facebook.gif">  </center></td>
</tr>

</table>
</body>
</html> 
```

我想这就是你要找的。希望这个答案对你有所帮助。

问候， LGhost

# git - 源树和 Git

> ID：15755096
> 
> 赞同：4
> 
> 时间：2013-04-02T02:31:20.483
> 
> 标签：git, bitbucket

我是 git 新手，不熟悉源代码管理。当我来到 git 时有点困惑，不知道如何充分利用它的好处，而大多数时候，教程和信息都太复杂了。谁能总结一个关于如何使用源代码树（基于 GUI 的 Git 工具）执行和提交以及代码合并的简短列表？

我需要知道什么以及何时单击提交、签出、存储、获取、拉取、推送、分支、合并和标记按钮。我如何比较和合并代码，在我的实验中，如果我立即合并它，它会显示一些无法理解的东西。因为我不知道如何比较代码。谢谢

**更新和资源** 这里是我做的一些研究，有参考和链接可以快速拿起 git ;)

1.  [试用 Github 的 Git（学习 git 的最快方法）](http://try.github.com/levels/1/challenges/1)
2.  [Git 命令备忘单](http://ndpsoftware.com/git-cheatsheet.html)
3.  [Git 命令备忘单（第一个链接的摘要）](https://na1.salesforce.com/help/doc/en/salesforce_git_developer_cheatsheet.pdf)
4.  [合并差异工具](https://stackoverflow.com/questions/460198/best-free-3-way-merge-tool-for-windows)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T06:01:29.610

合并[或变基文章](http://blog.sourcetreeapp.com/2012/08/21/merge-or-rebase/)很好地介绍了使用 SourceTree 进行的这些操作。

[此支持答案](https://answers.atlassian.com/questions/18817/how-to-merge-with-sourcetree-git-without-command-line)涵盖了合并本身：如果发生冲突：

> 冲突的文件用黄色三角形中的感叹号标记。
> **当您选择文件时，您可以在右侧看到差异，您可以通过选择差异区域顶部栏中的“Diff Parent”或“Diff Merged”来查看与两个不同父项的差异**。

更一般地说，您可以设置一个[差异工具来进行代码比较](https://answers.atlassian.com/questions/150136/side-by-side-compare-with-inline-changes)：

> 点击右上角的“ `External Diff`”按钮。
> 使用哪个 diff 工具在`Tools > Options > Diff`(Windows) 或`Preferences > Diff`(Mac) 中配置。

# ios - setNeeds显示混乱

> ID：15755097
> 
> 赞同：1
> 
> 时间：2013-04-02T02:31:25.300
> 
> 标签：ios

我正在使用它来移动我的图像：

```
meteorDisplayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(moveImage:)]; 
```

这是我的`moveImage:`方法：

```
-(void) moveImage:(CADisplayLink *)sender{
    CGPoint img;
    imgLocation = imgImageView.center;
    if (img < 100) {
        img.y++;
    }
    else{
         imgLocation.y = 0;
    }
    imgImageView.center = imgLocation;    
} 
```

无论如何，这都会更新我的图像在屏幕上的位置。为什么`setNeedsDisplay`这里没有效果？有什么意义`setNeedsDisplay`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:01:30.667

我假设`imgImageView`是`UIImageView`. 如果它*不是*的实例`UIImageView`，请编辑您的问题以告诉我们它是什么。

更改`center`视图的属性永远不需要您的应用重绘视图。`backboardd`显示服务器（在 iOS 6 和更早版本中是一个单独的进程`springboard`）已经拥有视图像素数据的副本。当您更改视图的`center`时，视图只是通知显示服务器它的新位置，并且显示服务器将视图的像素数据复制到屏幕的适当部分。

因此，更改`center`视图的属性永远不需要您发送`setNeedsDisplay`.

更具体地说，`UIImageView`甚至没有实现`drawRect:`. 相反，`UIImageView`只需在设置其图像时将其图像的像素数据发送到显示服务器。因此，即使您发送`setNeedsDisplay`到 a `UIImageView`，它仍然不会运行任何`drawRect:`方法。

顺便说一句，您也可以在自己的`UIView`子类中执行此操作，方法是设置`self.layer.contents`为 a`CGImageRef`而不是实现`drawRect:`. 您将需`#import <QuartzCore/QuartzCore.h>`要这样做。当然，还有`UIImageView`其他事情，比如处理动画和可调整大小的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:40:51.890

当您设置影响对象布局的属性时，`setNeedsDisplay`将在内部调用。对于不会自动调用它的自定义属性等，您需要自己调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T03:04:52.680

setNeedsDisplay 仅适用于图层或视图的内容。即，如果视图的内容已更改并且需要重绘，您将使用 setNeedsDisplay 告诉视图它需要重绘并触发它的 drawRect 方法。

视图上的变换，例如位置、缩放和旋转等，由 GPU 直接处理，不需要重新绘制视图；因此，当您只是移动或转换视图时，setNeedsDisplay 不适用。

# php - 如何在 HTML 文件中混合 PHP

> ID：15755102
> 
> 赞同：1
> 
> 时间：2013-04-02T02:31:55.340
> 
> 标签：php, html

当我在链接到 test.php 的 HTML 文件中使用 iframe 时，结果是好的

测试.php：

```
<?php     
   $host = "localhost";
   $user = "user";
   $pass = "pass";
   $database = "db";
   $koneksi = mysql_connect ($host,$user,$pass);

   mysql_select_db($database,$koneksi) or die ("error");

   $result = mysql_query("SELECT * FROM pengumuman"); 
   $i = 0;

   while($row = mysql_fetch_array($result)) { 
        echo "<li><a href='#'>".$row['judul']."</a></li>";
        $i++;
   } 

   mysql_close($koneksi); 
?> 
```

但我确实想分离这个 test.php，所以我把它混合在我的 HTML 文件中

```
<?php 
   $host = "localhost";
   $user = "user";
   $pass = "pass";
   $database = "db";
   $koneksi = mysql_connect ($host,$user,$pass);

   mysql_select_db($database,$koneksi) or die ("error");

   $result = mysql_query("SELECT * FROM pengumuman"); 
   $i = 0;

   while($row = mysql_fetch_array($result)) { 
?> 
   <li><a href='#'><?php $row['judul'] ?> </a></li>

<?php 
        $i++;
   }   
    mysql_close($koneksi); 
?> 
```

结果又不行了！真的，我是 web prog 的新手 .. 任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:58:57.737

这是不可能的：

```
<?php
   while($row = mysql_fetch_array($result)) { 
?> 
   <li><a href='#'><?php $row['judul'] ?> </a></li>

<?php 
        $i++;
   }
?> 
```

但是您可以使用下面的代码来代替：

```
<?php
$host = "localhost";
$user = "user";
$pass = "pass";
$database = "db";
$koneksi = mysql_connect($host,$user,$pass);

mysql_select_db($database,$koneksi) or die("error");

$result = mysql_query("SELECT * FROM pengumuman");
$i = 0;
?>

<!--
Other HTML Codes Here
//-->

<?php
while($row = mysql_fetch_array($result)) {
    echo "<li><a href='#'>" . $row['judul'] . " </a></li>";
    $i++;
}
?>

<!--
Another HTML Codes Here
//-->

<?php mysql_close($koneksi); ?> 
```

但是，我没有检查你的 PHP 是否正确，因为我很着急。

* * *

我想这是你想要的！
创建`open.php`：

```
<?php
$host = "localhost";
$user = "user";
$pass = "pass";
$database = "db";
$koneksi = mysql_connect($host,$user,$pass);

mysql_select_db($database,$koneksi) or die("error");

$result = mysql_query("SELECT * FROM pengumuman");
?> 
```

创建`close.php`：

```
<?php mysql_close($koneksi); ?> 
```

并且包含 PHP 代码的网页的基本名称必须具有`.php`文件扩展名，例如`div.php`因为通常，PHP 文件必须具有`.php`扩展名，但有时 Web 主机服务器配置为允许 HTML 文件读取 PHP 代码，但是这不正常。假设您所谓`<div>`的 HTML 在`div.php`文件中：

```
<?php include 'open.php'; ?>
<div>
  <ol>
<?php
$i = 0;

while($row = mysql_fetch_array($result)) {
    echo "    <li><a href='#'>" . $row['judul'] . "</a></li>";
    $i++;
}
?>
  </ol>
</div>
<?php include 'close.php'; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:33:50.127

您可能打算在 $row['judul'] 之前添加一个回声

```
<?php echo $row['judul']; ?> 
```

简单地放置变量不会输出它。也许您正在考虑默认禁用的短符号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:38:35.717

在这种情况下，您需要注意两件事。

1) 在 $row['judul'] 之前添加回声

```
<?php echo $row['judul']; ?> 
```

2) 确保你的文件的扩展名是'.php'，如果你的文件是test.html，那么把它改成test.php 试试。

注意：*如果您不想更改文件扩展名，则必须更改一些服务器配置以处理带有 .html 文件的文件。在 apache 中，您可以通过在 httpd.conf 文件中添加“AddHandler”来实现这一点。*

# php - 提交表单后避免页面重新加载

> ID：15755105
> 
> 赞同：0
> 
> 时间：2013-04-02T02:32:32.890
> 
> 标签：php, jquery

您好我正在尝试从数据作为电子邮件发送。我正在使用 PHP mail() 发送电子邮件并使用 Ajax 提交数据以避免页面重新加载。提交表单时未发送电子邮件。我究竟做错了什么？代码有点像这样。

阿贾克斯：

```
$('#submit').click(function(){

    $.ajax({
        url: test.php,
        type:'POST',
        success: function(msg){
                alert('Email Sent');
            }                   
        });
    }); 
```

HTML 表单：

```
<table width="400" border="0" cellspacing="2" cellpadding="0"> 
   <tr> 
        <td>*Your name:</td> 
        <td><input name="name" type="text" id="name" size="32"></td> 
   </tr> 
   <tr> 
        <td class="bodytext">*Email address:</td> 
        <td><input name="email" type="text" id="email" size="32"></td> 
   </tr> 
   <tr> 
        <td class="bodytext"> </td> 
        <td align="left" valign="top"><input type="submit" name="Submit" id="submit" value="Send"></td> 
   </tr> 
</table> 
```

php:

```
<?php 
if ($_POST["email"]<>'') { 
    $ToEmail = 'somugus@gmail.com'; 
    $EmailSubject = 'Fusio Dose customer info'; 
    //$mailheader = "From: ".$_POST["email"]."\r\n"; 
    //$mailheader .= "Reply-To: ".$_POST["email"]."\r\n"; 
    //$mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
    $MESSAGE_BODY = "Name: ".$_POST["name"]."\r\n"; 
    $MESSAGE_BODY .= "Email: ".$_POST["email"]."\r\n"; 
    $MESSAGE_BODY .= "Primary: ".$_POST["primary"]."\r\n";
    $MESSAGE_BODY .= "Sedcondary: ".$_POST["secondary"]."\r\n";
    //$MESSAGE_BODY .= "Comment: ".nl2br($_POST["comment"]).""; 
    mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
?> 
```

工作示例在这里

[http://soumghosh.com/otherProjects/Kemail/emailTest1.html](http://soumghosh.com/otherProjects/Kemail/emailTest1.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:42:31.570

您可以序列化表单并将其提交到您的 PHP 页面。试试这个，它不会提交页面：

```
$('#contact_form').submit(function() {  
    alert($(this).serialize()); // check to show that all form data is being submitted
    $.post("test.php",$(this).serialize(),function(data){
        alert(data); //check to show that the email sent successfully                        
    });
    return false; // return false to stop the page submitting. You could have the form action set to the same PHP page so if people dont have JS on they can still use the form
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:34:51.737

将您的函数调用更改为此

```
$('#submit').submit(function(e) {

  e.preventDefault();
  //The rest of your code. 

   $.ajax({
    url: test.php,
    type:'POST',
    data: { name: $("#name").val(), email: $("#email").val() } // and so on
    success: function(msg){
            alert('Email Sent');
        }                   
    });
});

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:36:01.333

您实际上并没有在 AJAX 请求中传递表单中的值，只是发出一个“空”的 POST 请求。您应该查看 AJAX 表单插件，它会为您完成繁重的工作：

[http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

# python - 如何在不导入任何第三方库（如 hpy 或 PySizer）的情况下获取 Python 对象的内存使用情况？

> ID：15755107
> 
> 赞同：1
> 
> 时间：2013-04-02T02:32:48.453
> 
> 标签：python, memory, stack, overflow, monitor

我正在编写 Python 测试用例来测试用 C++ 编写的 COM。目前我将COM的递归函数重写为非递归以避免调用堆栈溢出。然后我需要编写一个Python测试用例来覆盖这个变化，但是我不知道如何监控Python中的调用堆栈信息，也许我应该监控对象的内存使用情况。

google了一下发现几乎每一条建议都是使用PySizer或者heap，但是我的问题是不能随意导入任何第三方库，因为测试用例会在其他同事的电脑上运行，所以不能推送全部安装第三方库。那么谁能帮助我呢？谢谢！

# javascript - 如何远程动态引用标签的内容

> ID：15755109
> 
> 赞同：0
> 
> 时间：2013-04-02T02:32:53.057
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:37:48.920

Anchors 元素没有 value 属性。改用这个：

```
$("#locationA a").click(function(e){$("#locationB").val(this.innerHTML);}); 
```

或者

```
$("#locationA a").click(function(e){$("#locationB").val($(this).html());}); 
```

或者

```
$("#locationA a").click(function(e){$("#locationB").val($(this).text());}); 
```

# php - PHP在foreach循环中迭代simplexml

> ID：15755113
> 
> 赞同：1
> 
> 时间：2013-04-02T02:33:14.107
> 
> 标签：php, xml, loops, foreach, simplexml

我有一个 simplexml 对象，如下所示

```
<?xml version="1.0"?>
<SalesInvoices xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://api.unleashedsoftware.com/version/1">
    <SalesInvoice>
        <OrderNumber>100</OrderNumber>
    </SalesInvoice>
    <SalesInvoice>
        <OrderNumber>101</OrderNumber>
    </SalesInvoice>
</SalesInvoices> 
```

我想遍历它并只打印订单号。我使用这个脚本：

```
foreach ($xml->SalesInvoices->SalesInvoice as $salesinvoice) {
    echo "hello";
    echo $salesinvoice->OrderNumber;
} 
```

当我这样做时，我根本没有从循环中得到任何输出，即使是“你好”也不会打印出来。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:34:09.453

做

```
<?php

$string = '<?xml version="1.0"?>
<SalesInvoices xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://api.unleashedsoftware.com/version/1">
    <SalesInvoice>
        <OrderNumber>100</OrderNumber>
    </SalesInvoice>
    <SalesInvoice>
        <OrderNumber>101</OrderNumber>
    </SalesInvoice>
</SalesInvoices>';
$xml = simplexml_load_string($string);

foreach($xml as $SalesInvoice) {
    print $SalesInvoice->OrderNumber;
} 
```

# sql - 使用 case 语句的 Oracle SQL 条件外连接

> ID：15755120
> 
> 赞同：1
> 
> 时间：2013-04-02T02:33:51.847
> 
> 标签：sql, oracle, join, outer-join, case-statement

假设我有三个表：

```
1\. TableA with columns TableAID (PK), Desc Nullable

2\. TableB with columns TableBID (PK), TableAID(FK) Nullable

3\. TableC with columns TableCID (PK), TableBID (FK) Nullable, 
   TableAID (FK) Nullable, Start_Date, End_Date 
```

如果 TableC.TableBID 不为空，我需要返回表 A 中的 Desc 然后使用 TableB 中的 TableAID(FK) 来检索 Desc 否则使用 TableC 中的 TableAID (FK) 来检索 Desc

注意：TableC.TableBID 或 TableC.TableAID 都可能为空。在所有情况下，我仍然必须能够返回 TableC 中的其他列。

这是我的代码：

```
Select ta.desc, tc.start_date, tc.end_date
from TableC tc
Left outer join TableB tb
on case
when tc.TableBID  is not null then (
           tc.TableBID = tb.TableBID
           Left outer join TableA ta
           on tb.TableAID = ta.TableAID 
           --my concern here is that tb.TableAID can be null. Will it still work?
)
else tc.TableAID = ta.TableAID --my concern here is that tc.TableAID can be null. 
--WIll it still work? 
```

我也关心语法。如果有更好的有条件加入的方法，请告知。我正在使用甲骨文。此代码将进入一个视图，该视图将用于搜索过程（这就是为什么它必须返回所有内容而不考虑空值）。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:49:18.823

您可以将您`CASE`的放在`SELECT`子句中并相应地加入表，如下所示：

```
SELECT CASE
           WHEN tb.tableAID IS NOTNULL THEN tab.desc
           ELSE tac.desc
       END AS desc
       -- or better: NVL(tab.desc, tac.desc) AS desc
       , tc.start_date
       , tc.end_date
  FROM tableC tc
  JOIN tableB tb ON tc.tableBID = tb.tableBID
  LEFT JOIN tableA tab ON tab.tableAID = tb.tableAID
  LEFT JOIN tableA tac ON tac.tableAID = tc.tableAID 
```

# php - 按值对数组的一部分进行排序

> ID：15755121
> 
> 赞同：1
> 
> 时间：2013-04-02T02:33:54.280
> 
> 标签：php, sorting

我有一个非常简单的数组：

```
array(
    1 => 'asdf.php',
    2 => 'jkl.php',
    3 => 'qwer.php',
    4 => 'ty.php',
    5 => 'edit.php?param=my_val_a',
    6 => 'edit.php?param=my_val_g',
    7 => 'edit.php?param=my_val_i',
    8 => 'zxcv.php',
    9 => 'oiu.php',
    10 => 'edit.php?param=my_val_w',
    11 => 'bnm.php',
    12 => 'hgb.php',
    13 => 'edit.php?param=my_val_p'
) 
```

我的目标是尝试保持数组的相同顺序，除了我希望所有带有字符串“?param=my_val”的项目彼此相邻，同时保持它们的顺序。所以最终的结果是：

```
array(
    1 => 'asdf.php',
    2 => 'jkl.php',
    3 => 'qwer.php',
    4 => 'ty.php',
    5 => 'edit.php?param=my_val_a',
    6 => 'edit.php?param=my_val_g',
    7 => 'edit.php?param=my_val_i',
    8 => 'edit.php?param=my_val_w',
    9 => 'edit.php?param=my_val_p'
    10 => 'zxcv.php',
    11 => 'oiu.php',
    12 => 'bnm.php',
    13 => 'hgb.php',
) 
```

我一直在玩 usort() 并且我已经能够将它们放在一起，但是保持相同的基本顺序让我很挣扎。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:50:56.827

这个怎么样（假设你有你的东西`$arr`）：

```
$parts_with_param = array();
$parts_with_no_param = array();
foreach ($arr as $val) {
  if (strpos($val, '?param=my_val') !== false) {
    $parts_with_param[] = $val;
  } else {
    $parts_with_no_param[] = $val;
  }
}

// merge into a new variable or overwrite $arr if you like
$new_arr = array_merge($parts_with_param, $parts_with_no_param); 
```

# flash-cs5 - Flash CS6 - 放置文档类的最佳实践是什么？

> ID：15755126
> 
> 赞同：0
> 
> 时间：2013-04-02T02:34:07.640
> 
> 标签：flash-cs5, flash-cs6, flash-ide

假设你有一个文件夹，里面有这 5 个东西：

文件夹：bin

文件夹：src

文件夹：lib

文件夹对象

项目名称.as3proj

我现在只是创建一个名为 ProjectNameShell.fla 的 .fla，它基本上是一个空文件。我只是用它通过 CS6 发布，并说明从哪个类开始。将此 fla 放在第一个文件夹或 src 中的标准位置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:29:11.300

当我厌倦了 Flash Builder 并转而使用 Sublime Text 2 编码并使用 Flash CS5.5 发布时，我做了类似的事情。

您希望将 ProjectNameShell.fla 放在与您在该文件中指向的主文档类相同的文件夹中。此外，如果您的代码中需要任何外部类，请确保使用 Flash 首选项中的 ActionScript 3.0 设置将类路径添加到这些文件。

# php - PHP 向 1 到 10 个收件人发送邮件

> ID：15755128
> 
> 赞同：0
> 
> 时间：2013-04-02T02:34:41.827
> 
> 标签：php

我确信我在这里忽略了一些东西，除了这个之外，所有其他邮件脚本都运行良好。我有一个 HTML 表单，最多可收集 10 个电子邮件地址。我需要做的就是遍历它们，如果它们被填满，则向收件人发送电子邮件。

```
$email0 = 'email@email.com';
$email1 = 'some@email1.com';
$email2 = 'some@email2.com';
$email3 = 'some@email3.com';
$email4 = 'some@email4.com';
....... up to 10.

$i=1;
while($i<=10)
{
    $temp = 'email'.$i;
    if(isset($$temp) && $$temp != '')
    {               
        $subject="some subject";
        $body = "email content";

        $headers = "From: $email0 \r\n";
        $headers .= "Reply-To: $email0 \r\n";
        mail($$temp, $subject, $body, $headers);        
    }

$i++;
} 
```

**...好吧，我只是尝试了一种不同的方式。我把所有的电子邮件都塞进了一个数组中并遍历了它。同样的结果，没有收到邮件！！！！我错过了什么？:)**

```
$recipients = array($email1,$email2,$email3,$email4,$email5,$email6,$email7,$email8,$email9,$email10);

foreach($recipients as $value)
{
        if($value != '')
        {   
            $subject2="some subject";
            $body2 = "some content";

            $headers2 = "From: $email0 \r\n";
            $headers2 .= "Reply-To: $email0 \r\n";
            mail($value, $subject2, $body2, $headers2);
        }

} 
```

**在这一点上，我将发布以下内容：**

*   碰巧我之前的所有尝试都开始进入垃圾邮件箱（几个小时后！）。所以我的怀疑似乎得到了证实：在 GoDaddy 共享主机上，不要在短时间内（具有相同内容）同时发送超过一封电子邮件，否则最终会被标记为垃圾邮件！

**解决方案：**

正如下面帖子中的 jmbertucci 所建议的那样，最简单的解决方案是使用密件抄送：一封电子邮件中的所有收件人。由于我必须个性化每封电子邮件，我注意到如果我包含唯一的字符。进入每封电子邮件的主题行，它也没有问题。所以我的解决方案是将收件人的姓名添加到主题行中（这使得所有电子邮件都是唯一的）但任何唯一的字符串都应该这样做（如 date() 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:01:08.680

您是否尝试检查您的邮件服务器是否正确配置或像此示例一样配置它

```
// Please specify your Mail Server - Example: mail.example.com.
ini_set("SMTP","mail.example.com");

// Please specify an SMTP Number 25 and 8889 are valid SMTP Ports.
ini_set("smtp_port","25");

// Please specify the return address to use
ini_set('sendmail_from', 'example@YourDomain.com')
; 
```

或者检查你的 php.ini 文件。这是一个示例配置。

```
[mail function]
; For Win32 only.
SMTP = localhost
smtp_port = 25

; For Win32 only.
;sendmail_from = me@example.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i"). 
```

# python - 如何为 Python 设置 LIBSVM

> ID：15755130
> 
> 赞同：9
> 
> 时间：2013-04-02T02:34:51.653
> 
> 标签：python, svm, libsvm

我用 Make 在 Mac OS X 上构建了[libsvm 。](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)

```
$ tar xzfv libsvm-3.17.tar.gz
$ cd libsvm-3.17
$ make 
```

这构建了各种 libsvm 二进制文件：

```
$ ls
COPYRIGHT           heart_scale svm-predict.c   svm-train.c tools
FAQ.html            java        svm-scale   svm.cpp     windows
Makefile            matlab      svm-scale.c svm.def
Makefile.win    python      svm-toy     svm.h
README      svm-predict svm-train   svm.o 
```

我还链接到这个`/usr/local`：

```
$ ls -la /usr/local/
...
svm -> /usr/local/libsvm-3.17/ 
```

并将 Python 绑定附加到我的路径：

```
import sys
sys.path.append('/usr/local/svm/python') 
```

但是 Python 绑定找不到“LIBSVM”库：

```
$ python test.py 
Traceback (most recent call last):
   File "test.py", line 8, in <module>
      import svmutil
   File "/usr/local/svm/python/svmutil.py", line 5, in <module>
      from svm import *
   File "/usr/local/svm/python/svm.py", line 22, in <module>
      raise Exception('LIBSVM library not found.')
Exception: LIBSVM library not found. 
```

谁能告诉我如何设置？在 libsvm 的 python 自述文件中，唯一的描述是

```
Installation 
============

On Unix systems, type

> make

The interface needs only LIBSVM shared library, which is generated by
the above command. We assume that the shared library is on the LIBSVM
main directory or in the system path. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T02:49:29.500

与其通过 libsvm 来使用 Python 访问它（我通过 MacPorts 安装了 libsvm，但`import svmutil`失败了），您可能想要安装流行的[scikit-learn](http://scikit-learn.org/stable/)包，其中包含[带有 Python 绑定的 libsvm](http://scikit-learn.org/stable/modules/svm.html#svm)的优化版本。

[使用MacPorts](http://macports.org)安装非常简单：（`sudo port install py27-scikit-learn`适应`py27`您使用的任何 Python 版本）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-14T22:57:03.897

似乎是一个旧线程。希望它在未来对其他人有所帮助。

我有同样的问题。解决方案是

1.  `make`在 libsvm-3.0 目录下运行
2.  `make`在 libsvm-3.0/python 目录下运行

如果您只在 libsvm-3.0 文件夹中执行此操作，您将面临这个问题。在两个文件夹中执行此操作。然后它会正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-16T18:23:32.620

如果您需要非 MacPorts 解决方案，请参阅此页面（尤其是来自 Thanassis 的评论）：

[在 OSX 10.6 上为 Python 安装 libsvm-3.0](http://codexpython.blogspot.com/2011/02/installing-libsvm-30-for-python-on-osx.html)

尽管有帖子的标题，但该解决方案在装有 python 2.7 的 CentOS 机器上对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-05T19:57:45.950

python 中的 find_library 仅查看扩展名为 .so 的文件。为了使其正常工作，您需要创建一个 libsvm.so：

% ln -s libsvm.so.2 libsvm.so

然后再试一次，它会正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-21T13:16:16.463

您无需使用 scikit learn 即可使用 libSVM。`libsvm`通过python加载模块时我遇到了同样的问题。我从 github 克隆了项目并使用命令行从命令行运行构建它`make`，在设置环境后，我得到了同样的错误。

我通过安装 libSVM 解决了这个问题`homebrew`：

`brew install libsvm`

这不包括 python 特定的二进制文件，因此您仍然必须从 github 克隆和制作并设置环境。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-22T02:18:37.973

您应该进入 /python 并 make 生成 .so.1 文件

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-27T13:29:23.417

您也可以尝试使用 homebrew 安装 libsvm，例如“brew install libsvm”，然后您可以打开您的项目文件并将“svmutil.py”和“svm.py”文件复制到项目目录中，然后您可以使用命令'from svmutil import *'，也许它会没事的。

# php - 由于某种原因，我的链接栏上的背景图片没有显示

> ID：15755134
> 
> 赞同：0
> 
> 时间：2013-04-02T02:35:08.650
> 
> 标签：php, html, css, image, background

我已经为此工作了几个小时，但我无法弄清楚。有一段时间我让它正确显示背景图像现在它不起作用。

**HTML：**

```
<head>
    <link type="text/css" rel="stylesheet" href="css/normalize.css" media="screen"/>
    <link type="text/css" rel="stylesheet" href="css/grid.css" media="screen"/>
    <link type="text/css" rel="stylesheet" href="css/stylesheet.css" media="screen"/>
    <script type="text/javascript" src="js/js.js"></script>
</head>
<body>
    <div class="container">
        <img src="images/logo.png" class="logo grid_4 none">
        <img src="images/4seasons.jpg" class="head grid_8 omega none">
        <ul class="links grid_9">
                <a href="#"><li><img src="images/icons/home.png"></li></a>
                <a href="#"><li><img src="images/icons/menu.png"></li></a>
                <a href="#"><li><img src="images/icons/about.png"></li></a>
                <a href="#"><li><img src="images/icons/contact.png"></li></a>
        </ul>
        <img src="images/icons/bar.gif" class="bar none">
    </div>
</body> 
```

我无法弄清楚这是怎么回事，但我很感激任何帮助！继承人的CSS：

```
.logo {
    float:left;
}
.head {
    margin-top:2%;
}
.bar {
    width:100%;
    margin-top:-5%;
}

/*Links*/

.links {
    position:relative;
    float:left;
    list-style-type:none;
}
.links li {
    float:left;
    margin-left:0%;
}
.links li:hover {
    background: url("images/icons/bg.png");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:44:41.140

您不能将 a`<a>`作为 a 的直接子级，`<ul>`或者`<ol>`只有 a`<li>`有效，因此将您的标记更改为：

```
 <ul class="links grid_9">
    <li><a href="#"><img src="images/icons/home.png"></a></li>
    <li><a href="#"><img src="images/icons/menu.png"></a></li>
    <li><a href="#"><img src="images/icons/aboute.png"></a></li>
    <li><a href="#"><img src="images/icons/contact.png"></a></li>
 </ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:43:58.483

尝试使用 a:hover 作为您的链接。也许“a”元素在“li”元素的前面，这样它就阻止了鼠标悬停的检测。

```
.links li a:hover {
    background: url("images/icons/bg.png");
} 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:21:46.057

将您的 html 更改为以下内容：

html

```
<ul class="links grid_9">
  <li class="home"><a href="#">home</a></li>
  <li class="menu"><a href="#">menu</a></li>
  <li class="about"><a href="#">about</a></li>
  <li class="contact"><a href="#">contact</a></li>
</ul> 
```

css

```
.links {float:left}
.links li {float:left; list-style-type:none}
.links li a {
    float:left;
    text-indent:-5000px;
    height:20px; /* set your own dimention */
    width:20px; /* set your own dimention */
    background-repeat:no-repeat;
}
.links li.home a {background-image:url(images/icons/home.png);}
.links li.menu a {background-image:url(images/icons/menu.png);}
.links li.about a {background-image:url(images/icons/about.png);}
.links li.contact a {background-image:url(images/icons/contact.png);}

.links li a:hover {background: url("images/icons/bg.png");} 
```

希望这可以帮助你...

# java - 如何在 Web 应用程序中使用 EHCache 配置文件

> ID：15755135
> 
> 赞同：0
> 
> 时间：2013-04-02T02:35:10.413
> 
> 标签：java, caching, grails, ehcache

每当我运行应用程序时，它第一次将 cacheMgr.cacheExists("myCache1") 返回为 true，但在重新启动服务器后它返回为 false。我无法理解这个问题。

EHCacheUtilty.java

```
private static Ehcache getCache(String cacheName) throws Exception{

        if(cacheMgr == null){
            try{
            cacheMgr = CacheManager.create(new URL("http://10.10.1.133:8080/ProjectName/xml/ehcache12.xml"));
            System.out.println("cacheMgr"+cacheMgr);
                System.out.println(cacheMgr.cacheExists("myCache1"));
                System.out.println(Arrays.asList(cacheMgr.getCacheNames()));
            }
            catch(Exception e){
                e.printStackTrace();
            }
        }

        Ehcache cache = null;
        if(cacheMgr!=null){
                //cache = cacheMgr.addCacheIfAbsent(name);
                cache = cacheMgr.getEhcache(cacheName);
        }

        return cache;
} 
```

ehcache.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="http://ehcache.sf.net/ehcache.xsd">

<diskStore path="G:\EHCacheTempMemory" />

<defaultCache maxElementsInMemory="10000" eternal="false"
overflowToDisk="true" timeToIdleSeconds="10" timeToLiveSeconds="20" diskPersistent="true" />

<cache name="myCache1"
maxElementsInMemory="500000"
maxElementsOnDisk="500000"
eternal="false"
overflowToDisk="true"
timeToIdleSeconds="864000"
timeToLiveSeconds="8640000"
diskPersistent="true"
diskSpoolBufferSizeMB="20"
diskExpiryThreadIntervalSeconds="8640000"
memoryStoreEvictionPolicy="LFU" />

</ehcache> 
```

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:38:00.840

每次重新启动服务器时，您都需要重新运行该程序（或者至少是其中初始化 EhCache 的部分）。重新启动服务器会消除您拥有的实例。

# c - 测试无符号整数值时奇怪的事情

> ID：15755136
> 
> 赞同：2
> 
> 时间：2013-04-02T02:35:13.010
> 
> 标签：c

今天，我写了一些代码来测试 unsigned int。

```
#include <stdio.h>

int sum_element(float ele[], unsigned int len);

int main(void){
    float ele[] = {1.1,2.2,3.3};
    float sum = sum_element(ele,3);
    printf("sum is %f\n",sum);
    return 0;
}

int sum_element(float ele[], unsigned int len){
    int sum=0.0; //mistake,should be : float sum = 0.0
    int i=0;
    for(i=0;i<= len-1;i++){
        printf("sum=%f, i=%d\n",sum,i);
        sum += ele[i];
    }
    return sum;
} 
```

* * *

在这个例子中，我有一个错误，变量sum的类型，应该是float，但是我写的是int，编译命令：

```
 gcc test.c -o test 
```

我运行这段代码

```
 ./test 
```

函数 sum_element 的输出是：

```
sum=0.000000, i=1
sum=0.000000, i=1
sum=0.000000, i=1 
```

然后我发现了错误，我将sum的类型改为float，然后再次编译，当我运行它时，输出是：

```
sum=0.000000, i=0
sum=1.100000, i=1
sum=3.300000, i=2 
```

这一次，输出正常，但是在第一次输出中，为什么 i 的变量总是相同的值 1，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T02:40:58.557

没什么可看的。您通过将错误的类型传递给 来调用未定义的行为`printf`，因此程序的所有输出都是没有意义的。`%f`格式说明符需要一个类型的参数（`double`顺便说一下，在这种情况下`float`会自动提升为，所以也可以），但是你传递了一个类型的参数。`double``float``int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:53:18.330

您必须了解 va_arg 是如何工作的。Printf 是一个接受未定义数量参数的函数。问题是这些参数没有输入。

当您指定 int、double 等时，编译器会根据参数分配不同数量的字节（以特定顺序）。因此，当您调用具有类型参数的函数时，该函数知道它应该如何读取这些字节。在这里它无法知道，因为它不是类型。所以 printf 函数会相信你给它的东西。例如，如果您在实际值为 8 个字节时要求 4 个字节，则该函数将读取前 4 个字节，相信它是您要求的值。但是，您尝试匹配的下一个值将从接下来的 4 个字节开始。威奇会给你垃圾。

你可以尝试做2 printf，你会发现i的值其实是好的。只是阅读方式不对。

```
int sum_element(float ele[], unsigned int len){
int sum=0.0; //mistake,should be : float sum = 0.0
int i=0;
for(i=0;i<= len-1;i++){
    printf("sum=%f\n",sum);
    printf("i=%d\n",i);
}
return sum; 
```

}

希望这能有所帮助。

编辑：

也许一个例子更容易理解。试试这个功能：

```
int sum_element(float ele[], unsigned int len){
  int sum=24222.55455555; //mistake,should be : float sum = 0.0
  char c = 0 ;
  for(i=0;i<= len-1;i++){
    printf("sum=%f, n= %d n2 = %d\n",sum,i,c);
  }
  return sum;
} 
```

你应该得到一个有趣的 n2 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:41:43.170

我认为答案是，在第一种情况下，打印的值根本不是`i`。传递两个参数`printf`，然后读取两个参数。传入的是两个`int`s，然后是一个`double`and`int`被读取。因为`double`首先从堆栈中读取，所以在`int`读取时它不是从`i`传递值的位置，因此是虚假值。很可能`double`覆盖了足够多的堆栈以包含传递`int`的 s。

当然，结果可能会有所不同，不确定。

# emacs - eshell 上 irb 中的 irb 命令历史击键

> ID：15755140
> 
> 赞同：1
> 
> 时间：2013-04-02T02:35:40.113
> 
> 标签：emacs, irb, eshell

在 emacs eshell 中运行 irb 时如何访问命令历史记录？

当我在 emacs 之外的命令行上运行 irb 时，我可以使用向上箭头来获取最后一个命令或使用 ctrl-r 来搜索命令历史记录。在 eshell 内部的 irb 中，向上箭头什么都不做（即它运行`eshell-previous-matching-input-from-input`而在 irb 中什么也不做），并且 ctrl-r 使用缓冲区的 emacs 反向搜索而不是搜索命令历史记录。我猜 irb 永远不会收到向上箭头键击，因为它绑定到`eshell-previous-matching-input-from-input`，但我不知道如何修复它。运行`(global-unset-key (kbd "<up>"))`不会取消绑定 eshell 中的向上箭头，而且我不确定这是否是可取的。

我知道 inf-ruby，但我更喜欢在 eshell 中使用 irb，此外`up-arrow`也不`ctrl-r`使用它。

irb中的readline可能有问题，但我不这么认为。`conf.use_readline`在 irb 命令历史工作正常的命令行上为零。在 eshell 中运行 irb --readline 会切换`conf.use_readline`为 true，但不会修复向上箭头或 ctrl-r。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:07:13.430

Emacs 术语模式 ( `M-x term`) 与`C-c C-j`/结合使用`C-c C-k`以暂时允许 yanking 似乎是一个不错的选择。[在此处](https://stackoverflow.com/questions/2979052/yanking-text-into-a-terminal-running-in-emacs)查看另一个答案。

# ios - UIImageView 的开始动画不会为翻转的图像设置动画

> ID：15755142
> 
> 赞同：2
> 
> 时间：2013-04-02T02:35:55.833
> 
> 标签：ios, objective-c, cocoa-touch, animation, uiimageview

我有一组面向一侧的图像（面向右侧的人），我正在使用这种方法翻转它，然后将其添加到 uiimageview 的动画图像中。然而，在添加翻转图像后，然后开始动画，动画仍然面向右侧。

```
manRunAnimations = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
NSArray *manAniRunArray = @[[UIImage imageNamed:@"robot1"],
                            [UIImage imageNamed:@"robot2"],
                            [UIImage imageNamed:@"robot3"],
                            [UIImage imageNamed:@"robot4"],
                            [UIImage imageNamed:@"robot5"],
                            [UIImage imageNamed:@"robot6"],
                            ];

manRunAnimationsf = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];

NSMutableArray *flippedRunAnimationImages = [[NSMutableArray alloc] init];

for( UIImage *image in manAniRunArray)
{
    UIImage * flippedImage = [UIImage imageWithCGImage:image.CGImage scale:image.scale orientation:UIImageOrientationRightMirrored];
    [flippedRunAnimationImages addObject:flippedImage];
}

manRunAnimationsf.animationImages = (NSArray *)flippedRunAnimationImages;

testImgView.image = [manRunAnimationsf.animationImages objectAtIndex:0];
manRunAnimationsf.animationDuration = runAnimationSpeedSlider.value;
[manRunAnimationsf startAnimating]; 
```

我什至用

```
testImgView.image = [manRunAnimationsf.animationImages objectAtIndex:5]; 
```

这将在我做之前在屏幕上正确显示一个翻转的图像

```
[manRunAnimationsf startAnimating]; 
```

一旦开始，动画根本不会翻转！！

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:34:39.680

我不敢相信没有人知道为什么，但我找到了解决方法。就是在我开始动画之前添加以下内容：

```
 manRunAnimationsf.transform = CGAffineTransformMake(-1,0,0,1,0,0); 
```

我什至不需要在那个 for 循环中进行 CGImage 翻转。

但是手动图像翻转应该可以使用 imageWithCGImage 方法，我真的很想知道为什么！你们让我失望了。:p

# python - 使用 if not exists 将数据从 tableA 插入到 tableB 并从 tableB 返回插入 ID

> ID：15755148
> 
> 赞同：0
> 
> 时间：2013-04-02T02:36:42.360
> 
> 标签：python, mysql

所以我正在研究这个数据库结构并试图弄清楚这是否是最好的方法。我正在从第 3 方站点提取记录并将它们存储到临时表（tableA）中，然后检查 tableB 中的重复项，然后将非重复项从 tableA 插入到 tableB 中。每次插入记录时，是否有从 tableB 分配的 id？现在我正在寻找按日期插入到 tableB 中的最新记录，然后检索 ID。有没有更有效的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:44:15.067

听起来您想要在表 B 上使用称为插入后触发器的东西。这是在将一行或多行插入表后运行的一段代码。文档在[这里](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)。

代码类似于：

```
CREATE TRIGGER mytrigger AFTER INSERT ON B
  FOR EACH ROW BEGIN
      -- Do what you want with each row here
  END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:44:56.453

你不使用有什么原因`INSERT IGNORE`吗？在我看来，您可以取消整个临时表过程......

```
+----+------+
| id | name |
|----|------|
|  1 | adam |
|  2 |  bob |
|  3 | carl |
+----+------+ 
```

如果`id`有一个唯一的约束，那么这个：

```
INSERT IGNORE INTO tableName (id, name) VALUES (3, "carl"), (4, "dave"); 
```

...将导致：

```
+----+------+
| id | name |
|----|------|
|  1 | adam |
|  2 |  bob |
|  3 | carl |
|  4 | dave |
+----+------+ 
```

...而如果你刚刚做了一个`INSERT`（没有`IGNORE`部分），它会给你一个唯一的键约束错误。

在取回 ID 方面，只需使用：

```
SELECT LAST_INSERT_ID() 
```

...在`INSERT IGNORE`您拨打的每个电话之后。

# c# - 如何判断鼠标点击了哪个控件？

> ID：15755158
> 
> 赞同：-2
> 
> 时间：2013-04-02T02:38:18.600
> 
> 标签：c#, .net, winforms, controls, mouseevent

我一直在寻找一些代码，这些代码告诉鼠标点击了什么控件。我有一个包含 50 多个控件的表单，我不想单击每个控件来单击鼠标。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:41:10.800

您可以使用每个控件的**Tag**属性。因此，将其设置为有意义的内容，然后在 Click 事件中执行以下操作：

```
(sender As Control).Tag 
```

**编辑：**你也可以这样做：

```
foreach (Control item in this.Controls)     //this IS YOUR CURRENT FORM
{
    if ((sender as Control).Equals(item))
    {
        //Do what you want
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:59:14.117

### 方法一：个性化处理

鼠标单击事件实际上会被单击鼠标的控件接收，因此您唯一需要做的就是处理该`MouseClick`控件的事件。如果您希望鼠标单击为每个控件执行*不同*的操作，这是有道理的。

这只是您应该已经熟悉的基本事件处理策略。事件处理程序方法可以使用设计器或通过代码手动连接，如下所示：

```
private void myControl_MouseClick(object sender, MouseEventArgs e)
{
   // do something when the myControl control is clicked
} 
```

### 方法二：合并处理

如果您希望多个控件具有相同的行为，您可以连接一个事件处理程序方法来处理`MouseClick`多个控件的事件。然后，从事件处理程序方法内部，您将使用该`sender`参数来标识被单击的控件。例如，您可以强制`sender`转换为一个`Control`对象并测试该`Name`属性的值。

如果您希望某种类型的所有控件都以某种方式运行，而另一种类型的所有控件都以不同方式运行，您可以有两个事件处理程序方法并按类型相应地连接控件。

最简单的方法是通过代码连接事件处理程序方法。设计器可以工作，但是将它用于许多控件中的每一个都过于繁琐。例如，在表单的构造函数中，您可以遍历所有控件并连接事件处理程序：

```
public MyForm()
{
   this.InitializeComponent();

   // Wire up your event handlers.
   foreach (Control ctrl in this.Controls)
   {
      if (ctrl is Label)
      {
         // Wire all Label controls up to do one thing.
         ctrl.MouseClick += new MouseEventHandler(LabelControls_MouseClick);
      }
      else if (ctrl is Button)
      {
         // Wire up all Button controls to do another thing.
         ctrl.MouseClick += new MouseEventHandler(ButtonControls_MouseClick);
      }
      else
      {
         // And wire up the rest of the controls to do a third thing.
         ctrl.MouseClick += new MouseEventHandler(OtherControls_MouseClick);
      }
   }
}

private void LabelControls_MouseClick(object sender, MouseEventArgs e)
{
   // do something when a Label control is clicked
}

private void ButtonControls_MouseClick(object sender, MouseEventArgs e)
{
   // do something when a Button control is clicked
}

private void OtherControls_MouseClick(object sender, MouseEventArgs e)
{
   // do something when a control other than a Label or Button is clicked
} 
```

### 方法三：全局处理

如果您已使所有这些控件*透明*（即对鼠标事件透明，而不是视觉透明）以便在更高级别（即由您的表单）处理鼠标单击事件，则可以使用该[`Control.GetChildAtPoint`](http://msdn.microsoft.com/en-us/library/ms158403.aspx)方法来确定被点击的控件。您只需指定鼠标单击位置的坐标，该方法将返回位于该点的子控件（如果有）。

```
private void myForm_MouseClick(object sender, MouseEventArgs e)
{
   Control ctrl = Control.GetChildAtPoint(e.Location);
   if (ctrl != null)
   {
      // do something with the clicked control
   }
   else
   {
      // if ctrl is null, then the parent form itself was clicked,
      // rather than one of its child controls
  }
} 
```

不过，我并不真正推荐这种方法，因为它违反了良好的面向对象设计。您必须编写代码来根据其独特属性确定哪个控件是哪个控件，而不是让运行时自动确定和处理它。

# python - 带有套接字和线程的python服务器只能工作4个小时

> ID：15755159
> 
> 赞同：0
> 
> 时间：2013-04-02T02:38:23.740
> 
> 标签：python, multithreading, sockets

我有一个带套接字的服务器，当客户端连接一个新线程开始在 mysql 数据库中记录接收数据时，脚本做得很好，但我有一个无限的时间，脚本只能工作 4 小时我至少需要服务器工作24 小时。

我能做些什么？

```
import time
import MySQLdb
import sys
from socket import *                     
myHost = ''               
myPort = 6250                           

sockobj = socket(AF_INET, SOCK_STREAM)  
sockobj.bind((myHost, myPort))          
sockobj.listen(10)                      
print 'Server On'

def handleClient(connection):           
    time.sleep(0.1)
    while True:                         
        try:
            data = connection.recv(256)
        except timeout:
            break
        if not data:
            break
        if 'q' not in data:
            if ',' in data:
                dato = data.split(',')
                try:
                    db=MySQLdb.connect(host='localhost',user='',passwd='',db='')
                    cursor=db.cursor()
                    sql = "INSERT INTO imei"+dato[1]+" (imei, estado, fecha, numero) VALUES ('%s','%s','%s','%s')"%(dato[0],dato[1],dato[2],dato[3])
                    cursor.execute(sql)
                    db.close()
                except MySQLdb.Error:
                    db.close()
                    break
        try:
            connection.send('LOAD')
        except:
            break

    connection.close( )
    thread.exit()

def dispatcher( ):                      
    while True:                         
        connection, address = sockobj.accept( ) 
        try:
            thread.start_new(handleClient, (connection,))
        except:
            dispatcher( )

dispatcher( ) 
```

如果我用 fork 执行相同的脚本，它也可以工作 4 小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:00:52.600

我建议您使用[https://pypi.python.org/pypi/supervisor](https://pypi.python.org/pypi/supervisor)确保它 24 小时运行。另外，您能否在此脚本崩溃后复制粘贴回溯？

# c# - Process.PrivateMemorySize64 返回提交的内存而不是私有的

> ID：15755162
> 
> 赞同：2
> 
> 时间：2013-04-02T02:38:52.570
> 
> 标签：c#, .net

我正在使用 .NET 4.5 用 C# 编写一个程序，这将允许我监视特定进程的内存、CPU 和网络使用情况，然后根据我的需要绘制数据图表。

为了获取特定进程的内存使用情况，我正在检查该对象的[`PrivateMemorySize64`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.privatememorysize64.aspx)属性`Process`。我希望看到该进程使用的私有内存，但它显示的是 Commit 中的数量，正如 Windows 资源监视器所确认的那样。

我的问题是：

1）有人知道为什么会发生这个错误吗？2）有解决办法吗？3）如果没有修复，是否有另一种直接的方法可以获得为进程保留的私有内存？

以下是我的代码的相关部分：

```
using System;

// I add all the open Processes to an array
Process[] localAll = Process.GetProcesses();

// I then add all the processes to a combobox to select from
// There's a button that updates labels with requested info

Process[] p = Process.GetProcessesByName(comboBox1.SelectedItem.ToString());
label1.Text = p[0].PrivateMemorySize64.ToString() + " bytes"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T22:34:08.810

根据您的评论，您说您正在寻找私人工作集。从这个链接中可以看出[如何计算私有工作集（内存）？](https://stackoverflow.com/questions/2611141/calculate-private-working-set-memory-using-c-sharp) 它确实不是 Process 类的一部分。您必须改为使用性能计数器。

从另一个答案复制并粘贴，以防万一它因某种原因被删除。

```
using System;
using System.Diagnostics;

class Program {
    static void Main(string[] args) {
        string prcName = Process.GetCurrentProcess().ProcessName;
        var counter = new PerformanceCounter("Process", "Working Set - Private", prcName);
        Console.WriteLine("{0}K", counter.RawValue / 1024);
        Console.ReadLine();
    }
} 
```

# javascript - 使用 jQuery 设置 JSON 样式

> ID：15755165
> 
> 赞同：2
> 
> 时间：2013-04-02T02:39:23.417
> 
> 标签：javascript, jquery, json

我有一个 JSON 值，它有多个用逗号分隔的值。有没有办法在 dom 中呈现它作为选择下拉输入？

这是我的标记的更详细视图。

HTML

```
 <h1>JSON Grid Edit</h1>

     <table cellpadding="0" cellspacing="0" border="0" class="dt display" id="json-table-edit" contenteditable="true" onKeyUp="editValue(this.id);">
      <thead>
        <tr>
          <th width="25%">Setting</th>
          <th width="75%">Value</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
      <tfoot>
        <tr>
          <th>Setting</th>
          <th>Value</th>
        </tr>
      </tfoot>
    </table> 
```

JSON

```
 {
      "allconfig": {
         "card.inserted": {
         "value": "Inserted, Not Inserted",
     },
        "card.cisproc": {
        "value": "Processed",
      }
     }
    } 
```

查询

```
$.getJSON('json/ione-edit.json', function (data) {
 var newJson = [];
 var myJson = data;
 $.each(myJson.allconfig, function (key, value) {
     var rowArray = [];
     rowArray.push(key);
     $.each(myJson.allconfig[key], function (key1, value1) {
         rowArray.push(value1);
     });
     newJson.push(rowArray);
 });
 $('#json-table-edit').dataTable({
     "bJQueryUI": true,
     "bStateSave": true,
     "sPaginationType": "full_numbers",
     "bProcessing": true,
     "oLanguage": {
         "sLengthMenu": ' <select>' + '<option value="10" selected="selected">Filter</option>' + '<option value="10">10</option>' + '<option value="20">20</option>' + '<option value="30">30</option>' + '<option value="40">40</option>' + '<option value="50">50</option>' + '<option value="-1">All</option>' + '</select>'
     },
     "aaData": newJson
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:10:03.423

这可以使用 split() 方法来实现。split(",") 将为每个逗号分隔的实体提供一个单独的字符串数组。然后，您可以使用 jQuery .each() 方法迭代数组并将每个字符串附加到包装在`<option>`标签中的 DOM。

像这样的东西：

```
 var data = {
  "allconfig": {
     "card.inserted": {
     "value": "Inserted, Not Inserted",
 },
    "card.cisproc": {
    "value": "Processed",
  }
 }
}

var options = (data.allconfig["card.inserted"]["value"]).split(",");

$("body").append("<select id='select'></select>");
//I am appending this to the body, but you can change body to
// whatever element/class/id you want 

$(options).each(function() {
  $("#select").append("<option>"+this+"</option>");
});
//I have also given the select an id so this code can be used on pages that have multiple select elements 
```

这是一个[小提琴](http://jsfiddle.net/fbBEb/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T02:52:15.967

一种方法是使用普通的 Javascript 方法[`.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)。

您需要`split`value 字符串，然后它将逗号分隔的字符串转换为数组。然后，您需要遍历数组以创建`select`下拉列表。

在你的 JSON 返回函数内部有这样的东西（不完全是这些变量名，只是一个向你展示这个想法的例子）：

```
$('#SelectContainer').html('<select name="mySelect">');
var options = value.split(',');
for (counter=0; counter < options.length; counter++)
{
    $('#SelectContainer').append('<option value="' + options[counter] + '">' + options[counter] + '</option>');
}
$('#SelectContainer').append('</select>'); 
```

# ios - 试图弄清楚 Core Audio 的 NBandEQ

> ID：15755166
> 
> 赞同：5
> 
> 时间：2013-04-02T02:39:50.090
> 
> 标签：ios, c, audio, core-audio, audiounit

因此，我试图找出 Apple 在 iOS 5 中添加的记录不良的 NBandEQ。我能够让它适用于 16 频段以下的任何东西，但我想要更多:) 如果我将其设为 15 频段 EQ，会发生什么情况一切正常，但如果我设置任何数字 16 及以上，我会`kAudioUnitErr_InvalidPropertyValue`在设置时收到 -10851 ( ) 错误，`kAUNBandEQProperty_NumberOfBands`然后前 8 个频段设置正常，其余的会导致 -10878 ( `kAudioUnitErr_InvalidParameter`) 错误。所以15个乐队可以成功完成，但是当我突然到16个时，只能完成8个。有`kAUNBandEQProperty_MaxNumberOfBands`我可以读到我认为这是当前状态下的设备可以处理的限制。好吧，它会吐出从 12 位数字到 4 位数字的所有不稳定数字。我想我自己不喜欢我给它的极端频率。我消除了这种可能性。然后我意识到频段的带宽可能是重叠的，它不喜欢那样。所以我将带宽从默认的 0.5 降低到最小值。.05 没有帮助有以太。

我确实意识到，毕竟我搞乱了所有愚蠢的设置，因为它在我进入这些设置之前就开始抱怨了。它已经在乐队的数量上给出了错误。

我发布这个问题是为了看看是否有更有经验的程序员可以在我的代码中看到让我感到困惑的东西并指出给我。我意识到没有多少人冒险进入核心音频，更不用说 NBandEQ，但也许我搞砸了一些基本的 C，所以请看一下。我将非常感激。我显然很沮丧。同样在发布此代码时（即使它是丑陋的测试代码），也许我可以帮助其他落后的人。我知道我希望至少有一段与 NBandEQ 相关的代码片段可供我查看

在此先感谢您的帮助！

```
 //Getting max bands for this device???
UInt32 maxNumOfBands;
UInt32 propSize = sizeof(maxNumOfBands);
AudioUnitGetProperty([_equilizer audioUnit],
                     kAUNBandEQProperty_MaxNumberOfBands,
                     kAudioUnitScope_Output,
                     0,
                     &maxNumOfBands,
                     &propSize);
NSLog(@"THIS IS THE MAX NUMBER OF BANDS?---%u",(unsigned int)maxNumOfBands);

UInt32 noBands = [eqFrequencies count];
// Set the number of bands first
NSLog(@"NumberOfBands atempted:%i with result:%ld", (unsigned int)noBands, AudioUnitSetProperty(_equilizer.audioUnit,
                     kAUNBandEQProperty_NumberOfBands,
                     kAudioUnitScope_Global,
                     0,
                     &noBands,
                     sizeof(noBands)));
// Set the frequencies
for (NSUInteger i=0; i<noBands; i++) {
   NSLog(@"Set Frequency for band:%i with result:%ld", i, AudioUnitSetParameter([_equilizer audioUnit],
                          kAUNBandEQParam_Frequency+i,
                          kAudioUnitScope_Global,
                          0,
                          (AudioUnitParameterValue)[[eqFrequencies objectAtIndex:i] floatValue],
                          0));
}
 //set bandwidth
for (NSUInteger i=0; i<noBands; i++) {
    NSLog(@"Set bandwidth for band:%i with result:%ld", i, AudioUnitSetParameter([_equilizer audioUnit],
                          kAUNBandEQParam_Bandwidth+i,
                          kAudioUnitScope_Global,
                          0,
                          0.05,//of octive
                          0));
}

// Set the bypass to off "0"
for (NSUInteger i=0; i<noBands; i++) {
    NSLog(@"Set Bypass for band:%i with result:%ld", i, AudioUnitSetParameter([_equilizer audioUnit],
                                                   kAUNBandEQParam_BypassBand+i,
                                                   kAudioUnitScope_Global,
                                                   0,
                                                   0,//off
                                                   0));
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:12:50.267

好吧，我想通了。我曾经用过`kAudioUnitScope_Output`它`kAUNBandEQProperty_MaxNumberOfBands`应该是`kAudioUnitScope_Global`。

`kAUNBandEQProperty_MaxNumberOfBands`在 Sim、iPhone 5 和 Retina Ipad 上产生 16 个。

# django - Django 从视图中擦除日期字段值

> ID：15755167
> 
> 赞同：0
> 
> 时间：2013-04-02T02:39:54.990
> 
> 标签：django, datefield

一个随机的问题，但我会尽力描述我想要做的事情。我正在构建一个应用程序来管理一组借出的实物资产。

要归还资产，用户访问 /return/1/ 清除用户名、借用日期、归还日期等

视图.py

```
 def returnlaptop(request, laptop_pk):
        Laptops.objects.filter(pk=laptop_pk).update(laptop_status='In')
        Laptops.objects.filter(pk=laptop_pk).update(user='')
        Laptops.objects.filter(pk=laptop_pk).update(borrowed_date='')
        Laptops.objects.filter(pk=laptop_pk).update(return_date='')
        return HttpResponseRedirect('/') 
```

这很好用，除非我尝试更新 models.datefield 中的值

[u"' ' 值的日期格式无效。它必须是 YYYY-MM-DD 格式。"]

有没有办法解决？还是我会以完全错误的方式解决这个问题？

干杯 Xcom

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:21:13.473

我不是 100% 确定，但我认为这会击中数据库 4 次......

第一个问题是`update`用于查询集。您正在对主键进行过滤，因此您只能获得 1 个对象。这意味着您应该`get`像这样使用

```
laptop = Laptops.objects.get(pk=laptop_pk) 
```

现在您可以使用它从数据库中正确获取对象，修改它并像这样保存它

```
laptop = Laptops.objects.get(pk=laptop_pk)
laptop.laptop_status = 'In'
laptop.user = ''
...
laptop.save() 
```

这只会命中数据库 1 次。

最后一个问题是您试图将日期设置为空字符串。那是行不通的，因为它需要一个日期对象。您可以做的一件事是修改您的模型，以便日期可以为空，并且数据库接受空值。

```
class Laptops(models.Model):
    ...
    borrowed_date = models.DateField(null=True, blank=True)
    return_date = models.DateField(null=True, blank=True) 
```

您可以做的另一件事是使用可以访问的最短日期`timezone.datetime.min`

# css - 为什么将 CSS 类放在其他类之上会完全改变其他不相关的类？

> ID：15755170
> 
> 赞同：0
> 
> 时间：2013-04-02T02:40:07.677
> 
> 标签：css, twitter-bootstrap

所以我在顶部有以下内容`bootstrap.css`

```
.scrollable-table {  
    height: 800px;
    overflow: scroll;
}​

.top-buffer { margin-top:20px; height:150px;}

.cat-title { background-color:gray; margin-top:0px; } 
```

`scrollable-table`在做我需要做的事情时改变我其他一些 html 的外观。具体来说，从我可以看出的高度`.top-buffer`是什么正在改变。当我将它移到前两个之下时，它可以按预期工作而不会引起任何问题。所以这

```
.top-buffer { margin-top:20px; height:150px;}

.cat-title { background-color:gray; margin-top:0px; }
.scrollable-table {  
    height: 800px;
    overflow: scroll;
}​ 
```

我用`scrollable-table`的地方在这里

```
<div class="span4 scrollable-table" style="background-color:white"> 
```

`scrollable-table`也只在那里使用过！

为了更好地衡量，我还将显示在哪里`top-buffer`使用

```
<div class="span3 top-buffer" style="background-color:#DBDBDB"> 
```

我只是不明白与其他两个完全不相关的课程如何能如此彻底地改变事情。我知道 CSS 级联样式，但在这种情况下，它没有任何意义，因为它们不相关。我应该提一下，这是 Twitter Bootstrap，它在 CSS 已经存在的最上面。我希望有人能解释一下为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:44:40.593

样式表中类的顺序（但不在 HTML 中）很重要，因为样式表是从上到下阅读的。如果您按此顺序有两个类：

```
.a { color: blue; }
.b { color: red; } 
```

这两个元素[都是红色](http://jsfiddle.net/MLAAY/)的：

```
<div class="a b">Test 1</div>
<div class="b a">Test 2</div> 
```

但是如果你交换它们，[两者都是蓝色的](http://jsfiddle.net/MLAAY/1/)：

```
.b { color: red; }
.a { color: blue; } 
```

# machine-learning - 参考url地址学习数据挖掘算法C5.0

> ID：15755176
> 
> 赞同：1
> 
> 时间：2013-04-02T02:40:44.733
> 
> 标签：machine-learning, classification

有谁知道如何计算C5.0数据挖掘算法，可能是地址引用url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:18:29.063

不，完整版算法是[Rule Quest的商业机密](http://rulequest.com/)

C5.0 是 C4.5 的商业改进版本。其中一些改进已发布，其中一些未发布。您可以在[weka book](http://www.cs.waikato.ac.nz/ml/weka/book.html)中阅读有关此内容的信息。J4.8 之所以如此命名，是因为它是基于 java 的，并且它的功能介于 C4.5 和 C5.0 之间。

您可以在此处查看 C4.5 和 C5.0 的比较，以及[在此处查看](http://rulequest.com/see5-comparison.html.)C4.5、J4.8 和 C5.0[的](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.158.4350&rep=rep1&type=pdf)比较。

我发现GPL[中提供了单线程版本。](http://www.rulequest.com/see5-info.html)

# javascript - 在回调中使用 this 进行非收集

> ID：15755177
> 
> 赞同：0
> 
> 时间：2013-04-02T02:40:46.640
> 
> 标签：javascript, meteor, handlebars.js

我现在正在浏览[排行榜](http://meteor.com/examples/leaderboard)示例，并且我已经完成了它，但我对*添加*功能的实现并不完全满意。

首先，我们有

```
Template.player.events({
    'click': function () { 
        Session.set("selected_player", this._id);
    }   
}); 
```

我发现它与播放器集合的关联方式有点令人困惑`this`，但我想这与`<template`部件有关。我也能做到

```
Template.leaderboard.events({
    'click input.delete': function () {
        Players.remove(this._id);
    } 
```

...确实会删除带有相关按钮条目的播放器。

* * *

现在是实际问题部分：我已将其添加到排行榜模板的底部：

```
<div>
    Add player: (Name <input required name="name" id="name">)
    (Score <input required name="score" id="score">)
    <input class="add" type="button" value="Add">
</div> 
```

这工作正常，我`Template.leaderboard.events['click input.delete']`工作正常，但为了获得我使用的值：

```
'click input.add': function () {
    var name = document.getElementById('name').value,
        score = document.getElementById('score').value; 
```

如果我能够以`this`某种方式使用，或者使用事件以某种方式获取与输入对应的值，这对我来说很有意义。从设计的角度来看，这不仅对我有意义，而且还涵盖了同时显示多个此类表单的情况。

所以简而言之，有没有办法在事件的上下文中获取靠近目标元素的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:22:12.560

每个事件处理程序都有两个参数：*事件*和*模板*。您可以在此处阅读有关这些事件处理程序参数的更多信息：http: [//docs.meteor.com/#eventmaps](http://docs.meteor.com/#eventmaps)

*event.target*是对发起事件的 DOM 元素的引用。然后，您可以使用类似 jQuery 的遍历函数来获取附近的元素。

您还可以将输入值设置为模板实例的属性。例如，在模板的*created*处理程序中，您创建 name 和 score 属性：

```
Template.player.created = function() {
  this.name = '';
  this.score = '';
}; 
```

然后在输入文本框的 keyup 事件中更新这些值：

```
'keyup #name': function(event, template) {
  template.name = event.target.value;
},

'keyup #score': function(event, template) {
  template.score = event.target.value;
} 
```

这与为 Ember 制作的小部件更新其值的方式相同，如下所述：[http ://www.emberist.com/2012/04/12/two-way-binding-to-the-dom.html](http://www.emberist.com/2012/04/12/two-way-binding-to-the-dom.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:11:58.737

很高兴看到有这么多街头信誉的人使用 Meteor！获取值的最佳方法是使用[event.currentTarget](http://docs.meteor.com/#eventmaps)并从数据上下文中获取内容还有另一种不需要 DOM 知识的方法

```
Template.player.events({
    'keypress #name':function(event,context) {
        //Get the event sending this' value
        console.log(event.currentTarget.value)

        //Traverse the DOM on the template 'player' in this case
        console.log(context.find('#score').value)
     }
}); 
```

基本上，获取 sender 值的最佳方法是使用`event.currentTarget`发送事件的对象访问 DOM。

以这种方式实现的原因可能是因为任何 dom 对象都可以发送事件，并且它不一定总是有一个`value`字段，因此在处理事件映射时需要对 DOM 有一点了解，但使用`event.currentTarget.value`适用于大多数表单字段

**数据上下文**

关于数据上下文，您应该能够使用来自帮助程序的模板中可用的数据，例如，如果模板或帮助程序中有一个`{{score}}`&`{{name}}`值，在这种情况下通过`{{#each}}`每个单独的播放器传递。

```
 this.name,
 this.score; 
```

这也与（我通常`context`在我的助手中使用，但`template`我猜想在 travellingprog 的答案中是另一种调用方式）

```
 context.data.name,
 context.data.score; 
```

这`this`有助于将数据从模板的数据上下文中获取到事件中，这样就不必使用包含数据的隐藏 HTML 属性，例如，如何删除播放器比将`_id`dom 存储在某处更干净。话虽这么说`event.currentTarget`，还是`context.find(..)`从文本字段中获取数据的最佳方式。

# django - Django 不显示博客文章中的图像

> ID：15755178
> 
> 赞同：0
> 
> 时间：2013-04-02T02:40:47.440
> 
> 标签：django, blogs

我创建了一个 DJANGO 博客引擎，它接收我的帖子，模板将其解析为 html 标签。链接等..正在工作，但它不加载图像文件，而是显示 'alternative' 。我已经在单独的 html 文件中尝试了该标签，但事实并非如此。只是不显示来自 django 博客文章中的图像。

模板文件的相关部分：

```
{% include 'blog/header.html' %}
</aside>
<section id ="content">
<article>
{%for post in posts %}
  <h2><a href="{{ post_get_absolute_url }}">{{ post.title }}</a></h2>
  <h3>{{ post.created}}</h3>
  <p> 
  {{ post.body|safe }}<br>
  </p>
  <h3>By {{ post.author }}</h3> 
```

我正在复制粘贴有问题的帖子

```
<---- text here ------------------>
<a href="http://gdcm.sourceforge.net/html/classgdcm_1_1Directory.html">GDCM::Directory</a>
<img src="/home/usman/www/deejay/blog/static/images/dicomdir.png" />

This is it 
```

有趣的是，“a”标签工作正常，但“img”标签不起作用。我已经尝试了很多变体，但我想要一些内联代码来显示简单的 html 标记，或者我当然会通过将一些变量从帖子内部传递给模板来以编程方式使用它，让它知道图像的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:01:13.913

你的问题在这里：`{{ post_get_absolute_url }}`。你应该使用`{{ post.get_absolute_url }}`.

更好的方法是直接调用图片的URL；这样您就可以在模型代码中`urls.py`而不是在模型代码中维护 URL。它使您的应用程序更便携。

从模型中获取图像字段名称值，然后`{{ post.image.url }}`. 例如，如果您的模型是：

```
class Post(models.Model):
    img = models.ImageField(upload_to='images') 
```

然后你会使用`{{ post.img.url }}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:03:03.427

当我将完整地址替换为

```
 <img src="/static/images/dicomdir.png"/> 
```

在开发服务器和生产服务器上。有帮助的是我查看了终端上的开发服务器响应并能够找出 url。

# jsf - p:graphicImage 与 viewscoped

> ID：15755179
> 
> 赞同：1
> 
> 时间：2013-04-02T02:40:49.867
> 
> 标签：jsf, primefaces

页：

```
<p:graphicImage value="#{testController.QR}" /> 
```

测试控制器 bean：

```
private StreamedContent QR;
private ByteArrayOutputStream rawQR;

public StreamedContent getQR() {
    if (rawQR != null) {
        rawQR = QRCode.from("test").to(ImageType.PNG).stream();
        ByteArrayInputStream is = new ByteArrayInputStream(rawQR.toByteArray());
        QR = new DefaultStreamedContent(is, "image/png");
        return QR;
    } else {
        return null;
    }
} 
```

我正在尝试在页面上显示 QR 图像。

使用 SessionScoped 上面的代码可以工作，但是使用 ViewScoped 它会显示一个损坏的图像图标，我需要我的 bean 是 ViewScoped。我在这里想念什么？

二维码参考：http: [//viralpatel.net/blogs/create-qr-codes-java-servlet-qr-code-java/](http://viralpatel.net/blogs/create-qr-codes-java-servlet-qr-code-java/)

# asp.net - 获取在触发器 SQL Server 2008 中插入或更新的当前会员用户

> ID：15755182
> 
> 赞同：4
> 
> 时间：2013-04-02T02:41:00.937
> 
> 标签：asp.net, sql-server-2008, tsql

有没有办法获取在触发器的表中插入或更新记录的 aspnet_Membership 用户的 userId？

现有过程是记录某些表的插入和更新的触发器。

我需要知道的是如何获取在表中插入或更新记录的 aspnet_Membership 用户的 userId。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:16:11.840

您将使用此代码获取用户名

```
 MembershipUser user = Membership.GetUser();
if (user != null)
    string name = user.UserName; 
```

# arrays - 如何遍历值为arrayref的HoA？

> ID：15755183
> 
> 赞同：0
> 
> 时间：2013-04-02T02:41:02.957
> 
> 标签：arrays, performance, perl, hash, reference

我想让我的脚本尽可能高效和快速地运行。以下是我创建 HoA 的方式。

```
use strict; use warnings; open(my $fh, '<', 'file.txt') or die $!;
my %HoA;
while (<$fh>){
    $_=~ s/\r//;
    chomp;
    my @cols = split(/\t/, $_);
    my $key = shift @cols;
    push( @{$HoA{$key}, @cols );
} 
```

说它给出了以下数据结构

```
%HoA = (
    'C1' => ['1', '3', '3', '3'],
    'C2' => ['3','2'],
    'C3' => ['1','3','3','4','5','5'],
    'C4' => ['3','3','4'],
    'C5' => ['1'],
); 
```

现在假设对于 HoA 中的每个键，我想将它的值（数组）和整个 HoA 传递到一个名为`compute`.

这是我目前的做法。

```
foreach my $key ( keys %HoA ) {
    compute($HoA{$key}, \%HoA);  # on the first iteration, this actually passes an aref to [1,3,3,3]
} 
```

显然 $HoA{$key} 已经是该特定 $key 的每个值的数组引用。

如果是这种情况，执行以下操作在效率方面是否有任何优势

```
push( @{$HoA{$key}, \@cols ); 
```

它产生以下数据结构

```
%HoA = (
    'C1' => [ ['1', '3'], ['3', '3'] ],
    'C2' => [ ['3','2'] ],
    'C3' => [ ['1','3'], ['3','4'], ['5','5'] ],
    'C4' => [ ['3','3','4'] ],
    'C5' => [ ['1'] ],
); 
```

这会让我的脚本运行得更快吗？如果是这样，在这种情况下，我如何将每个键的值（array_ref）传递给子例程？一旦它在子例程中，我如何访问数组中的各个元素而不取消引用子例程中的整个 array_ref？另外，对于 $hash_ref，我如何访问每个 array_ref？

这是我目前拥有的方式

```
sub compute{
# takes one param: an arrayref
my ($array_ref, $hash_ref) = @_;
    for my $p ( @{ $array_ref) ) {
        # do stuff
    }
    for my $x ( values %{ %hash_ref)) {
        # do stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:47:15.977

由于代码中的取消引用，这可能会使您的代码运行速度变慢。此外，您需要展平每个哈希条目指向的数组中包含的数组，如下所示：

```
my %h = ( a => [ [1, 2], [3, 4] ], b => [ [2, 3], [5, 6] ]); 
my $key = 'a';
my @all_items;
@all_items = map { @$_ } @{$h{$key}}; 
```

仅根据经验，在 Perl 中取消引用对象（即数组）的成本可能非常高，因此使用较少引用的第一种方法应该更快。但你实际上可以为这些事情计时。最好的办法是只编写代码，然后在对整个代码进行概要分析后担心真正重要的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:15:27.900

> 如果是这种情况，执行以下操作在效率方面是否有任何优势
> 
> ```
> push( @{$HoA{$key}, \@cols ); 
> ```

不，首先正确创建数据结构

```
push @{ $HoA{$key} }, @cols;    # Copies the number to the anon array.

compute($_, \%HoA) for values %HoA; 
```

比以后重新创建正确的数据结构要好。

```
push @{ $HoA{$key} }, \@cols;

compute([ map @$_, @$_ ], \%HoA) for values %HoA;  # But so does this. 
```

通过切换，你最终会完成你已经在做的工作的一个适当的超集。

* * *

如评论中所述，您正在优化错误的东西。您说您的程序需要 30-40 秒才能运行。即使您将加载文件所需的时间减少到零，您的程序仍然需要 29-39 秒。

# javascript - 关于在 1 个单个 js 文件中使用的 HTML5 web worker

> ID：15755185
> 
> 赞同：0
> 
> 时间：2013-04-02T02:41:12.230
> 
> 标签：javascript, html, worker

Worker 必须引用一个`.js`文件。

如果一个Javascript项目需要导出1个单个`.js`文件，并且这个项目需要使用Worker进行处理。

所以项目必须一起`code in sub process`处理`code in main process`。

是否有可能处理这个问题，`.js`在使用 Worker 时使代码在 1 个单个文件中看起来很优雅？

# java - 处理 Android 项目时 Eclipse 的问题

> ID：15755186
> 
> 赞同：1
> 
> 时间：2013-04-02T02:41:16.887
> 
> 标签：java, android, eclipse, svn

我目前正在和我的软件工程同学一起开发一个应用程序。但是，我在使用 Eclipse 时遇到了一些问题。但首先，关于我的 Eclipse 的一些信息：我正在运行版本：Juno Service Release 2，构建 ID 为 20130225-0426。我在装有 OS X Mountain Lion 10.7.5 的 MacBook 上运行 Eclipse。我正在使用 SVN 通过 assembla.com 将项目上传和下载到存储库。

首先，Eclipse 不会识别任何错误。如果我故意输入随机字符，Eclipse 不会用红色为它们加下划线。

接下来，每当我键入“this.whatever”或“@ for javadoc”时，我都会收到以下消息：“此编译单元不在 Java 项目的构建路径上。” 我可以单击“确定”并继续没有问题。

最后，每当我尝试运行该程序时，我都会收到此消息：“无法启动该选择，并且最近没有启动。”

其他注意事项：我的工作区中的任何其他项目都没有任何这些问题。我还有另一个项目使用不包含这些问题的 assembla 存储库。这些问题都是突然出现的。

编辑：我小组中的其他成员都没有遇到这些问题。我试图从另一台机器上的存储库下载项目，但我仍然遇到这些问题。我试图从我的工作区中删除该项目并重新下载。还是不行。

更新：我什至安装了 Android 开发工具包并使用了包含的 Eclipse 副本。它仍然无法正常工作。

我的 Eclipse 发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:32:38.140

由于我猜您正处于 android 编码的开始阶段并且您不会沉迷于特殊的 IDE，因此我强烈建议您使用`IntelliJ IDEA`而不是`Eclipse`用于 Android 开发。我已经尝试过`Eclipse`了，由于它的弱点，现在我正在使用`IntelliJ`. `Eclipse`不是 Android 开发的最佳 IDE，要成为最好的 IDE，还有很长的路要走。

[IntelliJ IDEA](http://www.jetbrains.com/idea/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:43:11.660

我建议您尝试[将 ADT 捆绑包安装](http://developer.android.com/sdk/installing/bundle.html)在新位置，看看是否仍然存在这些问题。ADT 捆绑包包括最新的 Android SDK 以及已安装和配置 ADT（Android 开发人员工具插件）的 Eclipse 版本。您可能拥有（或过去拥有）其他 Eclipse 插件，这些插件会影响 Eclipse 中的 Java 工具的工作方式，可能会干扰 ADT。过去我个人在使用 Aptana 之类的工具时遇到过这样的问题，即使在卸载之后也会出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:33:07.217

Eclipse 已经通过上述错误消息告诉您：您的源代码不在构建路径上，而只是在某个文件夹中。

要么您创建了一个简单的项目，而不是一个 Java 项目，后者也不会做任何 Java 特定的事情。或者您在普通文件夹中创建了 Java 文件，而不是在源文件夹中。

解决这个问题的最佳方法是使用主菜单中的 Eclipse“New...”向导[创建一个新的 Java 项目。](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.user/gettingStarted/qs-3.htm?cp=1_1_0_1)将结果与您的项目进行比较。两个重要的事情是： 该项目有一个图标，上面覆盖着一个小“J”。Java 源代码显示在包中，它们本身位于源文件夹中（带有包覆盖），而不是简单文件夹中。

![在此处输入图像描述](https://i.stack.imgur.com/LgBCB.png)

# java - 棘手的对象序列化

> ID：15755190
> 
> 赞同：2
> 
> 时间：2013-04-02T02:41:34.627
> 
> 标签：java

序列化任何类型的 Java 对象的最安全方法是什么，例如：

```
DBObject obj = getFromDB;
Object id = obj.get(ID_KEY);
String s1 = safeSerialize(id); 
```

该`obj.get(ID_KEY)`方法返回一个用作“id”的对象，它可以是 ObjectId、String、Long、Integer 或任何类型的 Object。

然后做同样的事情：

```
DBObject obj = getFromDB;
Object id = obj.get(ID_KEY);
String s2 = safeSerialize(id); 
```

我需要确保`s1`仍然等于`s2`。我的意思是，例如`obj.get()`方法可能会返回新的实例，例如，`new Integer(100)`对于给定的`ID_KEY`，仍然具有“序列化”版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:07:44.657

您不能这样做，因为 java.lang.Object 不可序列化。

类用 java.io.Serializable 标记，表明程序员已经允许二进制表示能够复活。

即使您要求您存储的对象仅限于一组给定的可序列化对象，您也会受到序列化通常的脆弱性的影响。

如果您将对象集限制为您随后为其提供自定义序列化（而不是使用默认序列化）的对象集，则可以使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:41:00.193

我不认为 Java 序列化给你这些保证：

*   如果涉及的课程有任何变化，它当然不会改变。
*   如果您在不同的 JVM 版本/发布/供应商平台上序列化/反序列化，它肯定不会。
*   它可能不适用于具有自定义 writeObject / readObject 方法的任何类......并且包括 java.util 等中的一些基本类型。

JSON 也一样糟糕，甚至更糟。JSON 对象的属性顺序是明确未定义的，因此您无法保证属性每次都以相同的顺序出现在序列化中。

将 POJO 的基于绑定的序列化/反序列化器作为 XML 可以工作（如果它们不使用属性），但您需要注意绑定如何处理固有无序集合（如 HashSets 和 HashMaps）的序列化。序列化中的集合/映射成员的顺序可能是不可预测的。

* * *

我的建议是想出另一种方法来解决你的实际问题……不管它是什么。

# python - 如何在 Python 中使用 for 循环识别具有特定特征的连续行？

> ID：15755192
> 
> 赞同：3
> 
> 时间：2013-04-02T02:41:51.357
> 
> 标签：python, for-loop, file-io

我现在正在处理庞大的数据集。格式是这样的：

```
1 1 1 1 1 1 1 1 A 1 1 1 1
1 1 1 1 1 1 1 1 A 1 1 1 1
1 1 1 1 1 1 1 1 A 1 1 1 1
1 1 1 1 1 1 1 1 B 1 1 1 1
1 1 1 1 1 1 1 1 B 1 1 1 1
1 1 1 1 1 1 1 1 C 1 1 1 1
1 1 1 1 1 1 1 1 C 1 1 1 1
1 1 1 1 1 1 1 1 C 1 1 1 1 
```

“1”可以不同。我的目标是识别带有“B”的两行（可能有三到四行带有“B”的连续行）并用“B”提取这些行及其周围的行（例如，前两行带有“A”和以下两行带有'C'）。这种类型有几个块，我正在考虑使用 for 循环逐行读取文件。每次当我遇到“A”后跟“B”时，都会确定位置。我尝试使用

```
for line in file:
    if 'A' in line and if 'B' in file.next(): 
```

但似乎有些台词丢失了。我的问题是如何使用 for 循环准确识别 AB（或 BC）线对？在那之后，我怎样才能轻松地向后（或向前）几行以在循环中提取所有这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:15:14.780

该`linecache`模块可以通过行号从文件中获取行。您可以在浏览文件时使用它来标记边界点（AB、BC），然后遍历这些行以获得所需的输出。

```
import linecache

final_lines = []
with open("file.txt") as f:
    for i, line in enumerate(f, 1):
        if "B" in line:
            if "A" in linecache.getline("file.txt", i-1):
                linestart = i - 2  ##2 lines before
            if "C" in linecache.getline("file.txt", i+1):
                lineend = i + 2  ##2 lines after
                for j in range(linestart, lineend+1):
                    final_lines.append(linecache.getline("file.txt", j))
print(final_lines) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:56:10.937

有几种可能的方法可以做到这一点，每种方法都有其优点和缺点。做到这一点的一种方法是保持你已经走过的线路的运行存储，但前提是它们满足特定的标准。例如，假设您阅读了其中包含“A”的行。您开始将这些行存储在一个数组中，直到您点击另一个字母或如果您点击“B”则点击“B”，然后您可以永久存储或输出或您想要对这些数据执行的任何操作。如果您击中不同的字母，则可以擦除缓存。可能的实现可能如下所示。

```
# Create our temporary storage and final output
cache = []
output_data = []

for line in file:
    # If we find an A lets keep that line in case we find a B after
    if 'A' in line:
        cache.append(line)
    # If we find a B then we take what's in the cache and put it in our final output
    elsif 'B' in line:
        output_data.extend(cache)
        output_data.append(line)  # Add the B line
        cache = [] # We no longer need what was stored here and dont want to store it multiple times if there are more 'B's next.
    else:
        cache = [] 
```

这没有考虑到 BC 场景，但正如您所见，这是一种可能的解决方案。这样做的缺点是内存使用。如果您的文件中充满了“A”而最后没有“B”，那么您将在等待找到 B 时将整个文件存储在内存中。

我可能会采取的解决方案是将行号而不是行本身存储在临时内存中。然后在最后再次迭代最终输出我感兴趣的所有行。优点是内存使用较少，但缺点是速度（读取文件两次）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:13:10.537

这个想法并不是真正在文件中前进和后退，而是跟踪您在流程中的逻辑位置以及所涉及的数据。

这是我们将使用的算法：

*   保留行的“缓冲区”。首先，我们处于“寻找 A”状态。

*   在“查找 A”状态下，如果我们找到“A”行，我们将其附加到缓冲区，如果已经有 2 行，我们也会删除缓冲区中的第一行（即我们保留最多 2 行） . 如果我们找到“B”行，则进入“追加所有 B”状态，并处理该行。否则，我们发现了一些其他垃圾，我们清空了缓冲区（因为我们没有找到我们要找的东西）。

*   在“追加所有 B”状态下，我们不断将“B”行附加到缓冲区，直到找到“C”行或其他任何内容。

等等。这方面的细节取决于您希望如何进行所有错误处理......例如，之前是否必须至少有两个“A”行，之后必须至少有两个“C”行？如果该行不包含任何这些内容怎么办？等等等等。

但基本方法很简单：使用变量来记住“状态”（可以说最简单的方法是使用字符串），然后在`for`每一行中，您使用`if`逻辑为每个状态做适当的事情——无论是建立缓冲区，重置缓冲区，更改状态等。

最后，缓冲区应该有你需要的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T03:58:56.617

如果您有非常大的文件要进行提取，我不建议使用 python，实际上您可以使用 awk 或 grep 命令在 linux 上完成所有这些操作。

# php - Php 和 MySQL：将全名字符串分解为名字、中间名和姓氏并将其存储在变量中

> ID：15755198
> 
> 赞同：0
> 
> 时间：2013-04-02T02:42:48.817
> 
> 标签：php, mysql

有没有一种方法可以剖析一个人的全名，即从 mysql 数据库中提取名字、中间名和姓氏并将其存储到 php 变量中？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:45:13.517

使用`explode`函数来分隔`firstname`, `middlename`, and`lastname`并将其存储在变量中，这是演示。

```
$name = "first middle last";
$arr = explode(" ",$name);
$first = $arr[0];
$middle= $arr[1];
$last= $arr[2]; 
```

# javascript - 主干中的动态导航

> ID：15755200
> 
> 赞同：0
> 
> 时间：2013-04-02T02:43:11.040
> 
> 标签：javascript, backbone.js

我刚开始在一个有点复杂的应用程序上使用 Backbone.js。在其中，我有一个根本没有导航的登录页面，以及一个管理员和用户部分，每个部分都有其导航栏。我的问题是，通过backbone.js 表示动态导航栏的好方法是什么。我考虑过为登录、管理员和用户部分创建三个不同的父视图。在每个视图中，我可以实例化（或不实例化）适当的导航栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:38:40.993

我认为你在父视图的想法上是正确的。我要做的是设置一个主容器并使用路由器填写适当的“页面”视图。例如。管理员，用户。在这些父视图中，您将有另外两个视图。一个用于导航栏，一个用于内容。在导航栏视图中，您可以分配您的事件和各种导航按钮。确保正确删除视图和取消委托事件，一个很好的例子是：

[僵尸视图管理。取消委托事件](http://lostechies.%C2%ADcom/%C2%ADderickbailey/%C2%AD2011/%C2%AD09/%C2%AD15/%C2%ADzombies-%C2%ADrun-%C2%ADmanaging-%C2%ADpage-%C2%ADtransitions-%C2%ADin-%C2%ADbackbone-%C2%ADapps/%C2%AD)

索引.html

```
<div id="main-container">
</div> 
```

路由器.js

```
app.Router = Backbone.Router.extend({   
routes :{
    "" : "showLogin",
    "user" : "showUser",
},

initialize : function(app){
    this.RM = app.RegionManager;
},

showUser : function(){
    this.RM.show(new app.UserView());
},

showLogin : function(id){
    this.RM.show(new app.LoginView());
}
}); 
```

区域管理器.js

```
var app = app || {};

app.RegionManager = {

el : "#main-container",

show : function(view){
    if(this.current)
        this.current.close();
    this.current = view;
    this.current.render();
    $(this.el).html(this.current.el);
}
}; 
```

用户视图.js

```
app.UserPageView = Backbone.extend({
    initialize : function(){
        this.children.nav = new app.UserNavBar();
        this.children.content = new app.UserContent();
    },

    render : funciton(){
        this.$el.html(this.children.nav.render().el);
        this.$el.html(this.children.content.render().el);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:34:50.540

让您的视图声明它们的标题必需品并让您的视图管理器使用它们。我喜欢用文本和按钮数组定义一个标题属性——每个都有一个事件引用和各种东西，比如一个 enabled() 委托。我的视图管理器在加载和显示此视图时，将读取该属性并将其转换为标题绑定到的模型。如果视图上不存在标题属性，则不会为其创建标题。

# php - 如果不存在则创建数据库 php mysql

> ID：15755211
> 
> 赞同：0
> 
> 时间：2013-04-02T02:44:11.007
> 
> 标签：php, mysql

如果数据库不存在，我正在尝试创建它。代码在这里：

```
<?php
// Connect to MySQL
$link = mysql_connect('host', 'user', 'pw');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

// Make studentdb the current database
$db_selected = mysql_select_db('StudentDB', $link);

if (!$db_selected) {
  // If we couldn't, then it either doesn't exist, or we can't see it.
  $sql = 'CREATE DATABASE StudentDB';

  if (mysql_query($sql, $link)) {
      echo "Database StudentDB created successfully\n";
  } else {
      echo 'Error creating database: ' . mysql_error() . "\n";
  }
}

mysql_close($link);
?> 
```

我收到此错误：

创建数据库时出错：用户“myusernamehere”拒绝访问数据库“StudentDB”

用户具有 dba 权限...我猜这是我的用户的权限错误...如何通过脚本授予用户权限并使该脚本工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:56:15.817

您尝试使用的用户没有使用权限`CREATE`

尝试切换到具有操作数据库所需的所有特权的另一个用户，或将所需的特权添加到您正在使用的用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T20:11:36.463

它发生在我身上，以下解决了这个问题：

1.  首先在使用代码编辑数据库之前转到主 **localhost/index.php**页面，然后选择*phpMyAdmin 数据库管理器*
2.  之后确保您以管理员身份登录

# angularjs - 在 angular.js 中缓存并设置范围值

> ID：15755215
> 
> 赞同：4
> 
> 时间：2013-04-02T02:44:27.373
> 
> 标签：angularjs, angularjs-scope

我有一个多标签应用程序，有两个单独的控制器。

当输入任一选项卡时，我需要点击一个 API。初始点击后响应不会更新，因此在后续访问该选项卡时无需再次点击它。

我的问题是缓存 API 响应并将其设置为范围变量的正确方法是什么。

目前，我有一个这样的帮助功能设置

```
var setAndCache = function(scope, cacheFactory, cacheKey, cacheValue) {
  scope[cacheKey] = cacheValue;
  cacheFactory.put(cacheKey, cacheValue);
}; 
```

像这样的缓存工厂设置

```
factory('TabData', function($cacheFactory) {
  return $cacheFactory('tabData');
}). 
```

注入到每个控制器中

```
controller('TabOne', function($scope, $http, TabData) {

  var setupCache = function(response) {
    setAndCache($scope, TabData, 'tabOneData', response);
  };

  if (!TabData.get('tabOneData')) {
    $http.get('/path/to/api')
    .success(function(response) {
      setupCache(response);
    });
  }
  else {
    setupCache(TabData.get('tabOneData'));
  } 
```

这很好用，但感觉……很脏。有没有更好的方法来实现同样的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:41:24.523

我自己一直在处理资源缓存。到目前为止，这是我的做法。

我从一个 cacheManager 服务开始：

```
app.factory('cacheManager', function($cacheFactory) {
    var cache = $cacheFactory('resource');

    return {

    /**
     * This will handle caching individual resource records
     * @param  CacheId string where we expect this to be stored in the cache
     * @param  Resource resource The resource object that we want to get
     * @param  Object param An object of params to pass to resource.get
     * @param  Function callback
     * @return resource object
     */
    fetchResource: function(cacheId, resource, params, callback) {
        var result = cache.get(cacheId);

        // See if we had a valid record from cache
        if(result) {
            console.log("cache hit: " + cacheId);
            callback(result);
            return result;
        } else {
            console.log("cache miss: " + cacheId);
            result = resource.get(params, function(response) {
                if(response.error) {
                    // We don't have a valid resource, just execute the callback
                    callback(response);
                    return false;
                }
                console.log("putting resource in cache");
                cache.put(cacheId, response);
                callback(response);
            });
            return result;
        }
    },
    <snip update/delete methods, etc> 
```

然后在我的控制器中，我注入 cacheManager 服务和我的项目资源（例如），然后可以执行以下操作：

```
$scope.data = cacheManager.fetchResource('project.' + $scope.id, Project, {id: $scope.id}, function(response) {
        ...
}); 
```

我喜欢这让我的控制器保持清洁。

我知道在您的情况下您直接使用 $http 而不是资源，但可以使用相同的方法。我个人建议将尽可能多的逻辑抽象到缓存包装服务中，并尽量减少每个控制器的开销。

**更新：**

正如下面评论中提到的，有一个更简单的资源缓存值得一看。我最初是从这个示例开始的，然后将其构建到我现在使用的上面。

[angularjs：如何向资源对象添加缓存？](https://stackoverflow.com/questions/12225475/angularjs-how-to-add-caching-to-resource-object/14094714#14094714)

# c# - 通过单声道命令执行时出现异常

> ID：15755216
> 
> 赞同：0
> 
> 时间：2013-04-02T02:44:30.543
> 
> 标签：c#, c++, linux, exception, mono

那里

我有一个由 VC 开发的 C++ 应用程序，编译为 DLL 文件。（DLL 是访问物理电池）。我还有 C# 测试控制台应用程序，调用 DLL 文件来获取电池参数。

它们都可以在 Windows 上顺利运行，但是当我尝试通过单声道在 Ubuntu 上运行它时。第一次单声道运行总是有异常，第一次就显示。不会在第二次，第三次...时间显示。

命令如下：

root@ubuntu:/home/user1/Desktop/CSharpTestConsoleAppFolder# mono ConsoleApplication1.exe

异常如下：

```
 mono: pthread_mutex_lock.c:312: __pthread_mutex_lock_full: Assertion `(-   (e)) != 3 || !robust' failed.
    Stacktrace:

      at (wrapper managed-to-native) MonoLibUsb.MonoUsbApi.Close (intptr) <0xffffffff>
      at MonoLibUsb.MonoUsbDeviceHandle.ReleaseHandle () <0x00063>
      at System.Runtime.InteropServices.SafeHandle.Finalize () <0x0002f>
      at (wrapper runtime-invoke) object.runtime_invoke_virtual_void__this__ (object,intptr,intptr,intptr) <0xffffffff>

    Native stacktrace:

                    mono() [0x80e0124]
                    [0x66d410]
                    /lib/tls/i686/cmov/libc.so.6(abort+0x182) [0x169ab2]
                    /lib/tls/i686/cmov/libc.so.6(__assert_fail+0xf8) [0x15f748]
                    /lib/tls/i686/cmov/libpthread.so.0(+0x7e92) [0x8d3e92]
                    /usr/local/lib/libusb-1.0.so(libusb_close+0x40) [0xe531f0]
                    [0x6fff5c]
                    [0x5efc64]
                    [0x11ac78]
                    [0x11ac01]
                    mono() [0x812ac69]
                    mono() [0x82277c4]
                    mono() [0x812aec1]
                    mono() [0x81dcc96]
                    mono() [0x81ee9cf]
                    mono() [0x8224c23]
                    /lib/tls/i686/cmov/libpthread.so.0(+0x596e) [0x8d196e]
                    /lib/tls/i686/cmov/libc.so.6(clone+0x5e) [0x20f3fe]

    Debug info from gdb:

    i=1
    Production_Date=
    Serial_Number=
    S12_FW_Verion=
    S0_FW_Verion=
    P001_System_Type=3
    P002_Battery_Status=0
    P003_Relative_State_Of_Charge=0%
    P004_Run_Time_To_Empty=0
    P005_Average_Time_To_Full=0
    P006_Input_Current=0
    P007_Output_Current=0
    P008_Output_Voltage=0
    P009_DC_DC_Voltage=0
    P010_Battery_Voltage=0
    P011_Enclosure_Temperature=0
    P012_DC_DC_Temperature=0
    P013_Battery_Capacity=0
    P014_Pack_1_Plugged_In=1
    P015_Pack_2_Plugged_In=1
    P022_Pack_1_Temperature=0
    P023_Pack_2_Temperature=0
    P030_Pack_1_Device_Chemistry=3
    P031_Pack_2_Device_Chemistry=3
    P038_Pack_1_Design_Capacity=0
    P039_Pack_2_Design_Capacity=0
    P046_Pack_1_Design_Voltage=0
    P047_Pack_2_Design_Voltage=0
    P054_Pack_1_Serial_Number=0
    P055_Pack_2_Serial_Number=0
    P062_Pack_1_Remaining_Percentage=0
    P063_Pack_2_Remaining_Percentage=0
    P070_Pack_1_Remaining_Time=0
    P071_Pack_2_Remaining_Time=0
    P078_Pack_1_Remaining_Capacity=0
    P079_Pack_2_Remaining_Capacity=0
    P086_Pack_1_Full_Charge_Capacity=0
    P087_Pack_2_Full_Charge_Capacity=0
    P094_Pack_1_Current=0
    P095_Pack_2_Current=0
    P102_Pack_1_Voltage=0
    P103_Pack_2_Voltage=0
    P110_Pack_1_Cell_1_Voltage=0
    P111_Pack_1_Cell_2_Voltage=0
    P112_Pack_1_Cell_3_Voltage=0
    P113_Pack_1_Cell_4_Voltage=0
    P114_Pack_2_Cell_1_Voltage=0
    P115_Pack_2_Cell_2_Voltage=0
    P116_Pack_2_Cell_3_Voltage=0
    P117_Pack_2_Cell_4_Voltage=0
    P158_Pack_1_State=0
    P159_Pack_2_State=0
    P166_Charger_Temperature=0
    P167_Fan_Less=0

    Mono support loaded.
    [Thread debugging using libthread_db enabled]
    [New Thread 0xb6c46b70 (LWP 3123)]
    [New Thread 0xb6d4bb70 (LWP 3116)]
    [New Thread 0xb6d70b70 (LWP 3115)]
    [New Thread 0xb6fcfb70 (LWP 3113)]
    [New Thread 0xb72b9b70 (LWP 3107)]
    0x0066d422 in __kernel_vsyscall ()
      6 Thread 0xb72b9b70 (LWP 3107)  0x0066d422 in __kernel_vsyscall ()
      5 Thread 0xb6fcfb70 (LWP 3113)  0x0066d422 in __kernel_vsyscall ()
      4 Thread 0xb6d70b70 (LWP 3115)  0x0066d422 in __kernel_vsyscall ()
      3 Thread 0xb6d4bb70 (LWP 3116)  0x0066d422 in __kernel_vsyscall ()
      2 Thread 0xb6c46b70 (LWP 3123)  0x0066d422 in __kernel_vsyscall ()
    * 1 Thread 0xb7700b40 (LWP 3106)  0x0066d422 in __kernel_vsyscall ()

    Thread 6 (Thread 0xb72b9b70 (LWP 3107)):
    #0  0x0066d422 in __kernel_vsyscall ()
    #1  0x008d8f5b in read () from /lib/tls/i686/cmov/libpthread.so.0
    #2  0x080e02ec in read (signal=6, ctx=0xb72b8abc) at /usr/include/bits/unistd.h:45
    #3  mono_handle_native_sigsegv (signal=6, ctx=0xb72b8abc) at mini-exceptions.c:2207
    #4  <signal handler called>
    #5  0x0066d422 in __kernel_vsyscall ()
    #6  0x00166681 in raise () from /lib/tls/i686/cmov/libc.so.6
    #7  0x00169ab2 in abort () from /lib/tls/i686/cmov/libc.so.6
    #8  0x0015f748 in __assert_fail () from /lib/tls/i686/cmov/libc.so.6
    #9  0x008d3e92 in __pthread_mutex_lock_full () from /lib/tls/i686/cmov/libpthread.so.0
    #10 0x00e531f0 in libusb_close (dev_handle=0xa0d1508) at core.c:1129
    #11 0x006fff5c in ?? ()
    #12 0x005efc64 in ?? ()
    #13 0x0011ac78 in ?? ()
    #14 0x0011ac01 in ?? ()
    #15 0x0812ac69 in mono_gc_run_finalize (obj=0x922e8, data=0x0) at gc.c:224
    #16 0x082277c4 in GC_invoke_finalizers () at finalize.c:787
    #17 0x0812aec1 in finalizer_thread (unused=0x0) at gc.c:1093
    #18 0x081dcc96 in start_wrapper_internal (data=0x9f9bdc8) at threads.c:783
    #19 start_wrapper (data=0x9f9bdc8) at threads.c:831
    #20 0x081ee9cf in thread_start_routine (args=0x9f8ac64) at wthreads.c:287
    #21 0x08224c23 in GC_start_routine (arg=0x61fe0) at pthread_support.c:1468
    #22 0x008d196e in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
    #23 0x0020f3fe in clone () from /lib/tls/i686/cmov/libc.so.6

    Thread 5 (Thread 0xb6fcfb70 (LWP 3113)):
    #0  0x0066d422 in __kernel_vsyscall ()
    #1  0x008d6015 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/tls/i686/cmov/libpthread.so.0
    #2  0x08202f31 in _wapi_handle_timedwait_signal_handle (handle=0x411, timeout=0x0, alertable=1, poll=0) at handles.c:1654
    #3  0x08202fa4 in _wapi_handle_wait_signal_handle (handle=0x411, alertable=1) at handles.c:1597
    #4  0x081f2ee7 in WaitForSingleObjectEx (handle=0x411, timeout=4294967295, alertable=1) at wait.c:203
    #5  0x081d9593 in ves_icall_System_Threading_WaitHandle_WaitOne_internal (this=0xce2e8, handle=0x411, ms=-1, exitContext=0) at threads.c:1664
    #6  0x006ab5f4 in ?? ()
    #7  0x006ab330 in ?? ()
    #8  0x0084a2f1 in ?? ()
    #9  0x00773d1c in ?? ()
    #10 0x006acff8 in ?? ()
    #11 0x006acf89 in ?? ()
    #12 0x08062cf8 in mono_jit_runtime_invoke (method="System.Threading.ThreadStart:Invoke ()", obj=0xcf000, params=0xb6fcf2b8, exc=0x0) at mini.c:5764
    #13 0x08187200 in mono_runtime_invoke (method="System.Threading.ThreadStart:Invoke ()", obj=0xcf000, params=0xb6fcf2b8, exc=0x0) at object.c:2755
    #14 0x08187464 in mono_runtime_delegate_invoke (delegate=0xcf000, params=0xb6fcf2b8, exc=0x0) at object.c:3420
    #15 0x081dcd67 in start_wrapper_internal (data=0xa101948) at threads.c:789
    #16 start_wrapper (data=0xa101948) at threads.c:831
    #17 0x081ee9cf in thread_start_routine (args=0x9f8b2c4) at wthreads.c:287
    #18 0x08224c23 in GC_start_routine (arg=0xb1fe0) at pthread_support.c:1468
    #19 0x008d196e in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
    #20 0x0020f3fe in clone () from /lib/tls/i686/cmov/libc.so.6

    Thread 4 (Thread 0xb6d70b70 (LWP 3115)):
    #0  0x0066d422 in __kernel_vsyscall ()
    #1  0x008d9736 in nanosleep () from /lib/tls/i686/cmov/libpthread.so.0
    #2  0x081ed7b0 in SleepEx (ms=500, alertable=1) at wthreads.c:1027
    #3  0x081d116f in monitor_thread (unused=0x0) at threadpool.c:777
    #4  0x081dcc96 in start_wrapper_internal (data=0xa101948) at threads.c:783
    #5  start_wrapper (data=0xa101948) at threads.c:831
    #6  0x081ee9cf in thread_start_routine (args=0x9f8b3d4) at wthreads.c:287
    #7  0x08224c23 in GC_start_routine (arg=0xb1fc0) at pthread_support.c:1468
    #8  0x008d196e in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
    #9  0x0020f3fe in clone () from /lib/tls/i686/cmov/libc.so.6

    Thread 3 (Thread 0xb6d4bb70 (LWP 3116)):
    #0  0x0066d422 in __kernel_vsyscall ()
    #1  0x00206fc9 in ioctl () from /lib/tls/i686/cmov/libc.so.6
    #2  0x00e58b6d in op_set_configuration (handle=0xa10d038, config=1) at os/linux_usbfs.c:1273
    #3  0x00e522c8 in libusb_set_configuration (dev=0xa10d038, configuration=1) at core.c:1270
    #4  0x0076b4fc in ?? ()
    #5  0x0076b440 in ?? ()
    #6  0x006a36f8 in ?? ()
    #7  0x00856894 in ?? ()
    #8  0x0084e0d8 in ?? ()
    #9  0x0084d980 in ?? ()
    #10 0x0084bb94 in ?? ()
    #11 0x0084b7dc in ?? ()
    #12 0x0069ecad in ?? ()
    #13 0x08062cf8 in mono_jit_runtime_invoke (method="System.Threading.WaitCallback:Invoke ()", obj=0xcf070, params=0xb6d4b260, exc=0xb6d4b268) at mini.c:5764
    #14 0x08187200 in mono_runtime_invoke (method="System.Threading.WaitCallback:Invoke ()", obj=0xcf070, params=0xb6d4b260, exc=0xb6d4b268) at object.c:2755
    #15 0x08187464 in mono_runtime_delegate_invoke (delegate=0xcf070, params=0xb6d4b260, exc=0xb6d4b268) at object.c:3420
    #16 0x081d365c in mono_async_invoke (data=0x55be0) at threadpool.c:626
    #17 async_invoke_thread (data=0x55be0) at threadpool.c:1431
    #18 0x081dcc96 in start_wrapper_internal (data=0xa101948) at threads.c:783
    #19 start_wrapper (data=0xa101948) at threads.c:831
    #20 0x081ee9cf in thread_start_routine (args=0x9f8b45c) at wthreads.c:287
    #21 0x08224c23 in GC_start_routine (arg=0xb1fc0) at pthread_support.c:1468
    #22 0x008d196e in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
    #23 0x0020f3fe in clone () from /lib/tls/i686/cmov/libc.so.6

    Thread 2 (Thread 0xb6c46b70 (LWP 3123)):
    #0  0x0066d422 in __kernel_vsyscall ()
    #1  0x00201536 in poll () from /lib/tls/i686/cmov/libc.so.6
    #2  0x00e55688 in handle_events (ctx=<value optimized out>, tv=<value optimized out>) at io.c:1888
    #3  0x00e55f17 in libusb_handle_events_timeout_completed (ctx=0xa108768, tv=0x38f74, completed=0x0) at io.c:2024
    #4  0x00e5603c in libusb_handle_events_timeout (ctx=0xa108768, tv=0x38f74) at io.c:2078
    #5  0x006ad2bc in ?? ()
    #6  0x006ad0a8 in ?? ()
    #7  0x006ad01e in ?? ()
    #8  0x006acf89 in ?? ()
    #9  0x08062cf8 in mono_jit_runtime_invoke (method="System.Threading.ThreadStart:Invoke ()", obj=0xb6b24ea8, params=0xb6c462b8, exc=0x0) at mini.c:5764
    #10 0x08187200 in mono_runtime_invoke (method="System.Threading.ThreadStart:Invoke ()", obj=0xb6b24ea8, params=0xb6c462b8, exc=0x0) at object.c:2755
    #11 0x08187464 in mono_runtime_delegate_invoke (delegate=0xb6b24ea8, params=0xb6c462b8, exc=0x0) at object.c:3420
    #12 0x081dcd67 in start_wrapper_internal (data=0xa10a270) at threads.c:789
    #13 start_wrapper (data=0xa10a270) at threads.c:831
    #14 0x081ee9cf in thread_start_routine (args=0x9f8c22c) at wthreads.c:287
    #15 0x08224c23 in GC_start_routine (arg=0x61b60) at pthread_support.c:1468
    #16 0x008d196e in start_thread () from /lib/tls/i686/cmov/libpthread.so.0
    #17 0x0020f3fe in clone () from /lib/tls/i686/cmov/libc.so.6

    Thread 1 (Thread 0xb7700b40 (LWP 3106)):
    #0  0x0066d422 in __kernel_vsyscall ()
    #1  0x008d9736 in nanosleep () from /lib/tls/i686/cmov/libpthread.so.0
    #2  0x081ed7b0 in SleepEx (ms=6000, alertable=1) at wthreads.c:1027
    #3  0x081de240 in ves_icall_System_Threading_Thread_Sleep_internal (ms=6000) at threads.c:1319
    #4  0x0084a43c in ?? ()
    #5  0x0084a3b8 in ?? ()
    #6  0x0069fbd8 in ?? ()
    #7  0x0069fcf7 in ?? ()
    #8  0x08062cf8 in mono_jit_runtime_invoke (method="ConsoleApplication1.Program:Main ()", obj=0x0, params=0xbfb8f51c, exc=0x0) at mini.c:5764
    #9  0x08187200 in mono_runtime_invoke (method="ConsoleApplication1.Program:Main ()", obj=0x0, params=0xbfb8f51c, exc=0x0) at object.c:2755
    #10 0x0818aee6 in mono_runtime_exec_main (method="ConsoleApplication1.Program:Main ()", args=0x3be00, exc=0x0) at object.c:3938
    #11 0x080bb445 in main_thread_handler (argc=2, argv=0xbfb8f704) at driver.c:1003
    #12 mono_main (argc=2, argv=0xbfb8f704) at driver.c:1855
    #13 0x0805944a in mono_main_with_options (argc=2, argv=0xbfb8f704) at main.c:66
    #14 main (argc=2, argv=0xbfb8f704) at main.c:97

    =================================================================
    Got a SIGABRT while executing native code. This usually indicates
    a fatal error in the mono runtime or one of the native libraries 
    used by your application.
    ================================================================= 
```

顺便说一句，另一个 Linux 人告诉我：似乎异常发生在 Thread 1 #4 0x0084a43c in ?? () , "??()" 是一个函数名，他告诉我编译的时候需要加-g，所以?? 应该改成函数名，这样我才能找到原因。但是问题是我用windows VC2012编译，不知道怎么在编译的时候加上参数-g。

附加信息：如果我先运行“gdb mono”，然后运行测试控制台应用程序，也不例外。似乎在异常消息中或运行“gdb mono”之后有消息“Mono Support Loaded”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:54:37.540

虽然 mono 是跨平台的，但 C++ 不是。您必须使用 GCC 或类似的编译器在 linux 上重新编译您的 DLL。此外，如何从单声道代码中引用 DLL 也很重要。我建议使用 PInvoke 来避免路径等的任何并发症。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T16:55:51.613

您可能指的是托管 C++，这就是您的应用程序实际工作的原因。可能只是您（或单声道运行时）正在尝试释放未初始化的指针，该指针可能稍后会被初始化 - 或在另一个线程上，因为您的堆栈跟踪表明有许多线程正在运行（其中一个似乎卡在 ioctl ())。

# bash - bash 脚本进行排序

> ID：15755217
> 
> 赞同：1
> 
> 时间：2013-04-02T02:44:31.330
> 
> 标签：bash

我有我创建的这个文件：

```
Kuala Lumpur        78          56
Seoul               86          66
Karachi             95          75
Tokyo               85          60
Lahore              85          75
Manila              90          85 
```

在命令行上，我可以毫无问题`sort -t`地使用制表符空间对其进行排序，但现在我正在尝试编写一个脚本来读取它并打印出不同的排序。现在，如果我读入一个数组并告诉它通过选项卡存储“吉隆坡”行，那么排序也是如此。我该怎么办那个空间。我不想把它拿出来或用逗号代替，但如果必须的话，我会的。

```
 #!/bin/bash
 cat asiapac-temps | sort -t'    ' -k 1,1d
 echo ""
 cat asiapac-temps | sort -t'    ' -k 2,2n
 echo ""
 cat asiapac-temps | sort -t'    ' -k 3 
```

这就是我现在正在使用的。我试图以不同的方式做到这一点，所以不要`sort`一遍又一遍地使用输出是：按城市：

```
 Karachi             95          75
   Kuala Lumpur        78          56
   Lahore              85          75
   Manila              90          85
   Seoul               86          66
   Tokyo               85          60 
```

通过高温 (col2)

```
 Kuala Lumpur        78          56
   Lahore              85          75
   Tokyo               85          60
   Seoul               86          66
   Manila              90          85
   Karachi             95          75 
```

低温 (col3)

```
 Kuala Lumpur        78          56
   Tokyo               85          60
   Seoul               86          66
   Karachi             95          75
   Lahore              85          75
   Manila              90          85 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:02:28.757

如果您的问题是“我如何从命令行输入制表符”，那么答案是“您不需要”——sort 默认将制表符识别为分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T13:43:03.610

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

您不能对任何内容进行一次排序并输出 3 个不同的结果。每当您在 shell 中编写循环时，您都可能采用了错误的方法（shell 主要是从中调用工具的环境，而不是编程语言）。每次你想产生排序输出时调用 sort 几乎肯定会比你想出的任何涉及数组索引的方法更简单、更有效。——埃德·莫顿

# maps - 使用 Leafletjs 在当前地图视图中查找图层

> ID：15755219
> 
> 赞同：0
> 
> 时间：2013-04-02T02:44:37.457
> 
> 标签：maps, gis, leaflet

我有一个应用程序，它使用 Leafletjs 在地图上显示最近的工作作为精确点。

使用 Leafletjs，当您想要缩放到用户检测到的位置时，您可以调用如下内容：

```
map.locate({'setView' : true, 'timeout' : 10000, maxZoom: 10}); 
```

但是，对于某些位置，缩放级别 10 不包含任何作业点，因此我想动态设置缩放，以便用户至少可以看到作业。

我知道我可以侦听定位功能的成功，然后检查以下内容：

```
map.on('locationfound', function() { 
  //for marker in markers{
  //is point within currently visible bounds
  //break on first positive
  //else, 
  //zoom up a level, repeat previous checks
  } 
} 
```

但这效率很低，特别是如果我有大量积分。

Leaflet 是否有任何内置函数/方法来提供有关当前地图视图中图层的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:00:47.960

如果你在服务器端做一些事情，你可能可以足够快地完成计算。

1.  以某种方式放大的缩放级别（我使用缩放级别 23）将位置以像素坐标存储在数据库中。我称这个坐标系为“大坐标系”。然后，要获取特定位置的点的平铺坐标是 IIRC 一个位移位 - 非常快，并且您可以在 SQL 中执行此操作。
2.  将用户的位置转换为以这种方式放大的像素坐标。
3.  迭代缩放级别。在该缩放级别获取用户位置的图块坐标，然后执行 SQL 查询来计算该图块上的点数。如果 > 0，则停止。

您的 SQL 将类似于（对不起，我很懒惰，并且从记忆/思考中进行操作，而不是实际尝试）

```
SELECT count(*) WHERE (vcsX>>(zoom+8)==userX>>(zoom+8)) AND (vcsY>>(zoom+8)==userY>>(zoom+8)); 
```

其中 vcsX 和 vcsY 是 Vast Coordinate System 中的像素坐标。

# android - setSmoothScrollbarEnabled(false) 滚动条根本不动？

> ID：15755223
> 
> 赞同：2
> 
> 时间：2013-04-02T02:44:44.123
> 
> 标签：android

我有一个列表视图，其中添加了不同的适配器和视图。适配器是 MergeAdapter ( [https://github.com/commonsguy/cwac-merge](https://github.com/commonsguy/cwac-merge) )。

平滑滚动效果不佳（如预期的那样），所以我设置了：

```
getListView().setSmoothScrollbarEnabled(false); 
```

但是当禁用时，滚动条的行为很奇怪——它只是保持锁定在屏幕顶部，当我滚动时，它只是改变透明度，从不移动。

知道为什么不平滑的滚动会表现得很糟糕吗？实际内容本身滚动得很好。

谢谢

# java - Java- Math.random()：选择 13 x 13 三角数组的元素

> ID：15755228
> 
> 赞同：4
> 
> 时间：2013-04-02T02:45:09.640
> 
> 标签：java, math, random, probability

**编辑：**这个问题解决了。如果您想帮助解决另一个问题，请访问[Java Biasing Random Numbers in a Triangular Array](https://stackoverflow.com/questions/15755813/java-biasing-random-numbers-in-a-triangular-array)。

* * *

我正在做一个乘法游戏，所以我选择了 0 到 12 之间的 2 个数字。如果我这样做：

```
int num1 = (int)(Math.random() * 13);
int num2 = (int)(Math.random() * 13); 
```

方块（0x0、1x1、2x2 等）被挑选了一半（因为 1x2 与 2x1 相同）。如何以相同的频率挑选所有组合？有 91 种可能的组合 (n(n+1)/2)。如果有帮助，这里有一个 13 x 13 的三角形数组：

```
{{0},
 {0,0},
 {0,0,0},
 {0,0,0,0},
 {0,0,0,0,0},
 {0,0,0,0,0,0},
 {0,0,0,0,0,0,0},
 {0,0,0,0,0,0,0,0},
 {0,0,0,0,0,0,0,0,0},
 {0,0,0,0,0,0,0,0,0,0},
 {0,0,0,0,0,0,0,0,0,0,0},
 {0,0,0,0,0,0,0,0,0,0,0,0},
 {0,0,0,0,0,0,0,0,0,0,0,0,0}}; 
```

我试过选择第一个数字，并给第二个数字 50% 的机会成为第一个数字。这没有用。我试着给第二个数字 1/91 的机会成为第一个。这导致较小的数字被选择的次数要多得多（大约 7/91 的时间；这是一个平滑的曲线增加）。我想过有一个随机数：`int roll = random.next(91)`然后将其拆分为 2 个条目（如坐标 (x,y)），但我不知道如何拆分它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T02:53:34.517

该`int roll = random.next(91)`策略将正常工作。由于您只选择 1 个随机数，因此您将获得有保证、无忧的均匀分布和更好的启动性能。您只需要找到一个公式来确定一个“行”在哪里结束而另一个“行”从哪里开始。寻找模式：

```
0, 1, 3, 6, 10, 15, ... 
```

它们被称为[“三角数……”是有原因的](http://en.wikipedia.org/wiki/Triangular_number)

让我们再充实一点。您实际上希望找到比您选择的随机数*更小*`roll`的最近的三角形数：这会让您找到正确的行，以及该三角形数的差异并`roll`让您获得该行的偏移量。

鉴于`n`^(第 th 个)三角形数由 给出`n*(n+1)/2`，你如何找到小于 的最大一个`roll`？考虑到数组的小尺寸，一个简单的实现应该*足够*快：

```
int largestTriangleNumberSmallerThan(int x) {
    int i = 0;
    int last = 0;
    while (true) {
        int triangle = i*(i+1)/2;
        if (triangle > x) return last;
        last = triangle;
        i++;
    }
} 
```

[http://ideone.com/vzQEBz](http://ideone.com/vzQEBz)

当然，这很无聊，没有考虑任何想法。我们可以做得更好！无论输入有多大，我们都可以在恒定的时间内完成！[从反转函数](http://www.wolframalpha.com/input/?i=solve%20x%2a%28x%2b1%29/2%20=%20y%20%20for%20x)开始（当然，我们只关心正根）：

```
n = (Math.sqrt(8y + 1) - 1)/2 
```

然后截断小数部分，并通过以下方式运行：

```
int largestTriangleNumberSmallerThan(int x) {
    int n = (int) (Math.sqrt(8*x + 1) - 1)/2;
    return n*(n+1)/2;
} 
```

[http://ideone.com/1qBHfX](http://ideone.com/1qBHfX)

把它们放在一起：

```
int roll = random.nextInt(91);
int num1 = (int) (Math.sqrt(8*roll + 1) - 1)/2;
int num2 = roll - num1*(num1+1)/2; 
```

[就是这样！](http://ideone.com/lr08sE)

* * *

[*假设本机[`StrictMath#sqrt(double)`](http://www.docjar.com/html/api/java/lang/StrictMath.java.html#231)函数是常数时间 -[我实际上对此不确定。](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/e947a98ea3c1/src/share/native/java/lang/fdlibm/src/e_sqrt.c)]

# .net - 谁能解释 .NET 的 TryGetValue 的基本原理？

> ID：15755230
> 
> 赞同：2
> 
> 时间：2013-04-02T02:45:14.657
> 
> 标签：.net, collections

谁能告诉我为什么即使查找失败，.NET 泛型集合上的 TryGetValue 函数也会设置输出值？

在我看来，我们拥有 TryGetValue 的全部原因是我可以设置初始默认/失败值，并且只有在查找实际成功时才通过 TryGetValue 更改该值。这是函数的*Try*部分。如果在查找失败时我想要未定义或异常的行为，我不会使用 *Try*GetValue。

这个函数的要点*应该是*它只需要在内部进行一次查找，而在容器外部编写的任何其他方法都必须进行两次查找，以便首先确定该值是否存在，然后再检索它（使用 try -抓住）。

如果我以 Dictionary 为例，使用 TryGetValue(3, &local) 查找对 <3, 0> 会在本地返回 0。在不包含任何对 <3, x> 的映射中查找返回 0。在空映射中查找返回 0。如果 0 是我要存储的有效值，那就太糟糕了。

这意味着如果 0 是可接受的返回值，则每次失败时我都必须手动将值重置为 -1。这可能听起来微不足道，但想象一下某个对象的默认值（或任何值）需要很长时间才能构建的情况......

我是否错过了一些明显的用例，我会设置我的默认值，然后希望它被另一个我无法选择的覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:49:05.297

`out`参数必须在声明它们的方法中显式设置。自然，它们通常设置为`default(T)`，`int`即为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:58:45.317

作为一般规则，您应该使用与您正在编写的方法兼容的最严格的方法签名。在`out`vs的情况下`ref`，如果您不需要调用者为参数提供值，则如果您使用`out`参数而不是参数，则该方法在概念上会更简单`ref`。在所有条件相同的情况下，更少的投入和更少的产出会更好。

这种简单性在代码的可读性方面得到了回报，因为读者无需“回顾”即可查看前几行代码的逻辑，以确定使用`ref`限定符传递的参数的传入值。

一个不同的例子可能会使原理更清楚。有时通过引用传递参数比通过值传递参数更有效；对于较大的值类型，这可能是正确的。采取这种方法：

```
public Point3D Add(Point3D p1, Point3D p2)
{
    return new Point3D(p1.x + p2.x, p1.y + p2.y, p1.z + p2.z);
} 
```

`ref`像这样添加到每个参数可能很诱人：

```
public Point3D Add(ref Point3D p1, ref Point3D p2)
{
    return new Point3D(p1.x + p2.x, p1.y + p2.y, p1.z + p2.z);
} 
```

但这会向调用我们方法的消费者发送错误消息，即我们可能会修改方法主体中的参数。我们还试图通过假设按引用传递更有效来猜测优化器和 JIT 编译器。最好让代码清晰，让编译器完成它的工作。

有人可能会说：“在那种情况下是的，但那是不同的。” 但原则是一样的：根本不喜欢限定词，而`out`在`ref`需要限定词时更喜欢。

在 的情况下`TryGetValue`，如果调用被包装在条件为假时不`if`使用`out`参数的情况下，则该方法实际上可能被内联并且默认构造函数完全被省略，这直接解决了我们无论如何关注的效率问题。

与往常一样，规则也有例外。如果您确实可以通过使用并非绝对必要的参数限定符来证明可衡量的性能增益，您记录实际行为，并接受由此导致的清晰度损失，那么对于性能关键代码来说，这是一个可接受的折衷方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T02:53:36.823

我最好的猜测是他们这样做是为了让您不必`out`在调用方法之前初始化参数。

他们本可以`ref`改用。但是，下面的代码将被破坏：

```
void Method() {
    int val;
    if(dict.TryGetValue("key", out val)) {
       Console.WriteLine(val);
    }
    return;
} 
```

`ref`如果使用此代码代替 ，此代码将产生编译时错误`out`，因为（根据[MSDN](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)）`ref`参数必须在传递给方法之前进行初始化。

由于这是使用时非常常见的场景`TryGetValue`（即，您想尝试从集合中获取某些内容，如果存在则对其进行处理，如果不存在则不执行任何操作），因此（至少对我而言）为什么他们`out`代替`ref`. _

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:19:07.397

当查找失败时，您不会得到“未定义或异常行为”：`out`参数的值设置为`default(TValue)`并且方法返回`false`。您应该询问该返回值以确定查找是否成功。

诚然，使用`out`参数让人`TryGetValue`感觉有点笨拙（例如，必须事先声明变量），但这是既定的模式。*如果您想知道为什么*首先选择该模式，我想您需要询问 Microsoft 的 BCL 团队。

`TryGetValue`无论如何，使用一些可以满足您期望的辅助方法来“增强”是很容易的。（如果您担心创建默认值的潜在成本，您可以有一个接受工厂委托的重载，并且仅在需要时创建值。）

例如：

```
// pass the default value directly
int i = foo.GetValueOrDefault("answer", 42);

// pass a delegate to create the default value on-demand
var v = bar.GetValueOrDefault("costly", x => SomeExpensiveOperation(x));

// ...

public static class DictionaryExtensions
{
    public static TValue GetValueOrDefault<TKey, TValue>(
        this IDictionary<TKey, TValue> source, TKey key, TValue defaultValue)
    {
        TValue value;
        return source.TryGetValue(key, out value) ? value : defaultValue;
    }

    public static TValue GetValueOrDefault<TKey, TValue>(
        this IDictionary<TKey, TValue> source,
        TKey key, Func<TKey, TValue> defaultFactory)
    {
        TValue value;
        return source.TryGetValue(key, out value) ? value : defaultFactory(key);
    }
} 
```

# sql-server-2008 - SQL Server 2008 创建一个 SP，如果传递一个值，则使用一个值，否则使用默认值

> ID：15755231
> 
> 赞同：0
> 
> 时间：2013-04-02T02:45:26.993
> 
> 标签：sql-server-2008, stored-procedures

我有一个存储过程，现有应用程序中的许多页面都在使用它。我想从一个新页面调用它并将一个额外的值传递给它，而不会导致调用它的所有其他页面出现问题。在存储过程中，我希望它检测是否存在额外的参数/值，如果存在则使用它，否则忽略它并使用默认值。我不确定如何更改存储过程。

以下是从现有页面调用它的方式：

```
sql = "exec spInsertNewLic " & value1 & "," & value2 
```

这是我希望新页面使用额外值调用它的方式：

```
sql = "exec spInsertNewLic " & value1 & "," & value & ", " & value3 
```

我应该如何更改存储过程，例如？

```
CREATE PROCEDURE spInsertNewLic
(
@value1 int,
@value2 int,
@value3 date
)
AS
set nocount on
declare @myNewVariable date
if @value3 = 'NULL' or @value3 = '' set @myNewVariable = getDate() else @myNewVariable =  @value3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:47:19.570

将您的 SP 更改为此，您将 value3 的默认值设置为 null，然后您不必更改任何现有代码

```
CREATE PROCEDURE spInsertNewLic
(
@value1 int,
@value2 int,
@value3 date = null
)
AS
set nocount on
declare @myNewVariable date
if ISNULL(@value3,'') = '' --changed code here, NULL represents nothing
   set @myNewVariable = getDate() 
else 
   set @myNewVariable =  @value3 
```

# php - Zend 框架。如何为标签添加额外的类

> ID：15755232
> 
> 赞同：1
> 
> 时间：2013-04-02T02:45:45.747
> 
> 标签：php, zend-framework, zend-form

我的问题是生成表单后，标签类已分配给默认值，这是可选的，html 代码如下所示：

```
<div class="form_wrapper">
    <label for="email" class="optional">Username(e-mail):</label>
    <input type="text" name="email" id="email" value="">
</div> 
```

我的动作里面的zend代码是：

```
$form->addElement('text', 'email');
$usernameElement = $form->getElement('email');
$usernameElement->setLabel('Username(e-mail):');
$usernameElement->setDecorators(array(
    'ViewHelper',
    'Label',
    new Zend_Form_Decorator_HtmlTag(array('tag' => 'div','class'=>'form_wrapper')) 
)); 
```

但在某些情况下，我希望将其设置为可以在 css 中轻松设置样式的不同值。我想要的 html 代码是这样的（去掉“可选”）：

```
<div class="form_wrapper">
    <label for="email" class="email_label">Username(e-mail):</label>
    <input type="text" name="email" id="email" value="">
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T19:02:02.777

假设这是 ZF1，我挖出了 1.12.3 的参考：

```
$form->getElement('elementname')
    ->setDecorators(array(
         array('ViewHelper',
               array('helper' => 'formText')),
         array('Label',
               array('class' => 'another'))
    )); 
```

以上为您提供了一个额外的类。所以你会得到类似的东西：

```
<label for="elementname" class="another optional">Your Label Text</label> 
```

或者

```
<label for="elementname" class="another required">Your Label Text</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:15:42.117

看看这个类似的问题：

[Zend_Form - 添加 CSS 类 :: 我如何在 Zend_Form 中添加 css 类到标签？](https://stackoverflow.com/questions/3157058/zend-form-add-css-class-how-can-i-add-css-class-to-label-in-zend-form)

向表单元素本身添加一个类很简单：

```
$usernameElement->class = 'email_label'; 
```

看来，如果您想在标签上设置类，则需要添加 a`Zend_Form_Decorator_Label`并传入类名。

# matlab - 如何用如下图所示的点集拟合曲线

> ID：15755236
> 
> 赞同：1
> 
> 时间：2013-04-02T02:46:35.203
> 
> 标签：matlab, curve-fitting, curve

如图中的点，一个“X”可以映射两个“Y”值，一个“Y”可以映射两个“X”值。

用这些点拟合曲线时，应确保一阶导数和

可以计算二阶导数。

**Figure** :
[fig http://www.baidupcs.com/thumbnail/fbdd467ca3dce4e05e55b209bf6cc6dd?fid=3154234395-250528-2669431106&time=1364974850&sign=FDTA-DCb740ccc5511e5e8fedcff06b081203-2skix2HZJ0DXlkEgRMUWxxsBeQQ%3D&expires=8h&size=c850_u580&quality=100](http://www.baidupcs.com/thumbnail/fbdd467ca3dce4e05e55b209bf6cc6dd?fid=3154234395-250528-2669431106&time=1364974850&sign=FDTA-DCb740ccc5511e5e8fedcff06b081203-2skix2HZJ0DXlkEgRMUWxxsBeQQ%3D&expires=8h&size=c850_u580&quality=100)

**编辑：**弗洛里斯和煎饼都给出了正确的答案，谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:28:20.997

与其将 'y' 拟合为 'x' 的函数，不如单独拟合：

*   'x' 作为 't' 的函数
*   'y' 作为 't' 的函数

其中“t”是样条曲线（或其他曲线拟合，例如多项式）的固有坐标。

我假设在图片中您知道点的顺序 - 它不仅仅是一堆未排序的点？因此，首先，您可以计算每个连续点之间的距离，并将累积距离用作您的 't' 参数。然后将样条拟合到 'x' 和 'y' 坐标作为 t 的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T01:41:31.010

在您的点簇中间选择一个点 - 可能是重心。从这个“原点”到第一点画一条假想线。到点的距离`r=sqrt((x-x0)^2+(y-y0)^2);`和角度`theta=atan2((y-y0),(x-x0));`。计算`r`和`theta`对于所有点；如果 theta 环绕，则添加 2*pi 以使其连续。现在您可以对 theta 的函数 r 进行样条拟合。最后，您可以为许多 theta 值插入样条曲线并计算相应的`x=r*cos(theta);`和`y=r*sin(theta);`

那应该这样做。

# c++ - 排序每个字符串，然后使用 qsort 设置字符串

> ID：15755242
> 
> 赞同：0
> 
> 时间：2013-04-02T02:47:19.710
> 
> 标签：c++, c, comparator, qsort

以下代码是对集合中的每个字符串进行排序（对其字符进行排序），然后对集合中的所有字符串进行排序。但它给了我分段错误..

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
int comp ( const void *a, const void *b)
{
return strcmp ( *(char **) a, *(char **) b );
}

int compare(const void* a, const void* b)
{  return *(char*)a - *(char*)b; }
void printAnagramsTogether( char * str[], int size)
{
int i, j;
//qsort ( str, size, sizeof (str[0]), comp);
for (i=0; i<size; i++)
        qsort((void *)str[i], strlen(str[i]), sizeof (char), compare);

qsort ( str, size, sizeof (str[0]), comp);

}

int main()
{
char* wordArr[] = {"cat", "dog", "tac", "god", "act"};
int size = sizeof(wordArr) / sizeof(wordArr[0]);
printAnagramsTogether(wordArr, size);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:50:00.887

运行这个

```
int main()
{
    char *arr[] = {"rony", "phony", "nop"};
    arr[0][0] = 1;
} 
```

它崩溃是因为字符串是恒定的（我想存储在代码的文本段中）。

# php - PHP 猜数游戏中的尝试次数不会增加

> ID：15755246
> 
> 赞同：0
> 
> 时间：2013-04-02T02:48:17.637
> 
> 标签：php, html

下面的 PHP 脚本用于猜数游戏。隐藏字段用于存储猜测次数，由变量 $tries 表示。不管我怎么尝试，猜测的次数（$tries）永远不会增加。有人可以告诉我代码有什么问题吗？玛丽亚

```
<?php
$num=21;
$tries=(isset($_POST['guess'])) ? $tries+1: 0;
if (!isset($_POST['guess'])) {
    $message="Welcome to the Guessing Game!";
} elseif (!is_numeric($_POST['guess'])) {
    $message="You need to type in a number.";
} elseif ($_POST['guess']==$num) {
    $message="You WON 1 million point!";
} elseif ($_POST['guess']>$num) {
    $message="Try a smaller number";
} else {
    $message="Try a bigger number";
}
?>
<!DOCTYPE html>
<html>
<head>
<title>Guessing Game</title>
</head>
<body>
<h1><?php echo $message; ?></h1>
<p><strong>Guess number: </strong><?php echo $tries; ?></p>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
<p><label for="guess">Type your guess here:</label><br/>
<input type="text" id="guess" name="guess" />
<input type="hidden" name="tries" value="<?php echo $tries; ?>"/></p>
<button type="submit" name="submit" value="submit">Submit</button>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T02:49:28.103

改变：

```
$tries=(isset($_POST['guess'])) ? $tries+1: 0; 
```

到：

```
$tries=(isset($_POST['tries'])) ? $_POST['tries']+1: 0; 
```

或者，根据条件，仅在存在猜测时增加，然后：

```
$tries=(isset($_POST['guess'])) ? $_POST['tries']+1: 0; 
```

但是基于这样做`guess`将允许该人通过不输入数字来重置计数器；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:50:04.903

`$tries`当您尝试增加它时未定义。但是它可以在`$_POST`

```
$tries=(isset($_POST['guess'])) ? $tries+1: 0;
// Change to
$tries=(isset($_POST['guess'])) ? $_POST['tries']+1: 0; 
```

# javascript - 函数内部的Javascript调用函数

> ID：15755249
> 
> 赞同：1
> 
> 时间：2013-04-02T02:48:26.740
> 
> 标签：javascript

我正在尝试在子函数内部使用参数的函数中获取函数

```
function firstF (){
  this.childF1 = function($argument){
    // do something + $argument
  }
  this.childF2 = function($argument2){
    // do something + $argument2
  }
}

//Declare a new firstF
var firstFunction = new firstF();
firstFunction.childF1 
```

我如何在这里声明 $argument ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T02:50:28.260

你这样做：

```
var firstFunction = new firstF();
firstFunction.childF1(arghere) 
```

`childF1`是您的`firstF`对象的属性，而该属性是一个函数。因此，您将其称为带括号的函数，并在括号中传递参数。您必须在已创建的 type 对象上调用它`firstF`，而不是在`firstF`函数本身上调用它。

# java - 泛型上的 Groovy 映射和 Java 映射

> ID：15755261
> 
> 赞同：9
> 
> 时间：2013-04-02T02:49:42.597
> 
> 标签：java, groovy

我是 Groovy 的新手，我对地图的使用有疑问：

我知道我可以做到：

`def map = [key:"value"]`

但是，如果我这样做意味着什么：

`Map<String, String> map = ["1":1, "2":"2"]`

这段代码可以编译，但映射并不是真正的 String->String 映射：

`map.each({println it.key + ":" + it.value + "[" + it.value.class + "]"})`

它打印：

> 1:1[类java.lang.Integer]
> 
> 2:2[类 java.lang.String]

任何人都可以帮助我理解如何将使用 String->String 显式键入的地图分配给包含 String->Integer 的地图对象？谢谢！

=== 更新 ===

感谢@GrailsGuy 提供的链接，如果我将[@TypeChecked](http://groovy.codehaus.org/gapi/groovy/transform/TypeChecked.html)用于包装在方法中的上述代码，则会抛出错误：

`[Static type checking] - Incompatible generic argument types. Cannot assign java.util.Map <java.lang.String, java.io.Serializable> to: java.util.Map <String, String>`

这个解释现在完全有道理。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T03:05:33.907

这篇[论坛帖子](http://groovy.329449.n5.nabble.com/Not-enforcing-generic-type-td5438763.html)讨论了 Groovy 忽略泛型，特别是：

> Groovy 是一种动态类型语言，但您可以静态声明变量的类型。JVM 上的泛型在编译时被删除，只有原始类型可供 VM 使用（这对于 groovy 和 Java 都是如此）。在 Java 中，有编译时检查以确保您不会将 int 填充到字符串列表中。但是，Groovy 不会在编译时检查类型。
> 
> 因此，这意味着在编译时不检查类型参数，并且在运行时不可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T03:04:37.263

埃里克，

我怀疑这是由[此处](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)和[此处](https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens)解释的类型擦除引起的。由于 groovy 被编译为字节码，因此在字节码级别，参数化类型被删除。因此，

`Map<String, String> objMap is compiled into Map objMap`.

因此它由键和对象值组成。这就是 groovy 代码编译和运行没有错误的原因。希望这可以帮助。

# ios - 如何使用 Restkit 0.20.0 创建/发布新的托管对象到服务器？

> ID：15755266
> 
> 赞同：5
> 
> 时间：2013-04-02T02:50:11.427
> 
> 标签：ios, objective-c, rest, core-data, restkit

我很难找到创建新托管对象、设置其值以及使用 Restkit 保存到服务器的文档或示例。

我有一个 NSManagedObject 帖子：

```
@interface Post : NSManagedObject

@property (nonatomic, retain) NSNumber * postID;
@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSString * text;

@end 
```

这是我的 AppDelegate 设置：

```
// ---- BEGIN RestKit setup -----
RKLogConfigureByName("RestKit/Network", RKLogLevelTrace);

NSError *error = nil;
NSURL *modelURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"My_App" ofType:@"momd"]];
// NOTE: Due to an iOS 5 bug, the managed object model returned is immutable.
NSManagedObjectModel *managedObjectModel = [[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL] mutableCopy];
RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];

// Enable Activity Indicator Spinner
[AFNetworkActivityIndicatorManager sharedManager].enabled = YES;

// Initialize the Core Data stack
[managedObjectStore createPersistentStoreCoordinator];

NSPersistentStore __unused *persistentStore = [managedObjectStore addInMemoryPersistentStore:&error];
NSAssert(persistentStore, @"Failed to add persistent store: %@", error);

[managedObjectStore createManagedObjectContexts];

// Configure a managed object cache to ensure we do not create duplicate objects
managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.persistentStoreManagedObjectContext];

// Set the default store shared instance
[RKManagedObjectStore setDefaultStore:managedObjectStore];

// Configure the object manager
RKObjectManager *objectManager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://localhost:3000/api/v1"]];
objectManager.managedObjectStore = managedObjectStore;
NSString *auth_token = [[LUKeychainAccess standardKeychainAccess] stringForKey:@"auth_token"];  // Getting the Auth_Token from keychain
[objectManager.HTTPClient  setAuthorizationHeaderWithToken:auth_token];

[RKObjectManager setSharedManager:objectManager];

// Setup Post entity mappping
RKEntityMapping *postMapping = [RKEntityMapping mappingForEntityForName:@"Post" inManagedObjectStore:managedObjectStore];
[postMapping addAttributeMappingsFromDictionary:@{
 @"title":             @"title",
 @"text":       @"text",
 @"id":         @"postID"}];

RKResponseDescriptor *postResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:postMapping pathPattern:nil keyPath:@"post" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[objectManager addResponseDescriptor:postResponseDescriptor]; 
```

现在，在我的 NewPostViewController 中，当我单击导航栏中的“保存”按钮时，我需要做什么才能将此帖子保存到我的服务器？

这是我尝试过的，但它无法正常工作。我输入了成功块，我的服务器收到了 POST，但字段为零：

```
- (void)savePost {
    RKManagedObjectStore *objectStore = [[RKObjectManager sharedManager] managedObjectStore];
    Post *post = [NSEntityDescription insertNewObjectForEntityForName:@"Post" inManagedObjectContext:objectStore.mainQueueManagedObjectContext];
    [post setTitle:@"The Title"];
    [post setText:@"The Text"];

    [[RKObjectManager sharedManager] postObject:post path:@"posts" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        NSLog(@"Success saving post");
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"Failure saving post: %@", error.localizedDescription);
    }];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:07:05.893

看起来您还没有将任何 RKRequestDescriptor 添加到您的对象管理器中。没有它们，可怜的对象管理器就无法使用键/值魔法将您的对象序列化为 NSDictionary。

您添加的 RKResponseDescriptor 描述了如何管理响应。这就是为什么您会看到名为的成功块：RestKit 不知道您要发送什么，但它可以识别服务器响应中的 Post 对象。

尝试在您的 responseDescriptor 代码下方添加：

```
RKRequestDescriptor * requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:[postMapping inverseMapping] objectClass:[Post class] rootKeyPath:@"post"];
[objectManager addRequestDescriptor:requestDescriptor]; 
```

（仔细检查密钥路径；我不知道您的 API 期望什么，所以我选择了响应描述符中的内容）

# node.js - Node.js 简单服务器请求结束事件问题

> ID：15755269
> 
> 赞同：4
> 
> 时间：2013-04-02T02:50:29.560
> 
> 标签：node.js, node-static

我是 node.js 的新手。尝试在请求结束时打印控制台。我尝试访问 localhost:8080 和 localhost:8080/，但终端中没有打印任何内容。知道为什么吗？这样做是因为当我运行此示例时，因为当我尝试在[http://tutorialzine.com/2012/08/nodejs-drawing-game/](http://tutorialzine.com/2012/08/nodejs-drawing-game/)上运行演示时，终端说套接字已启动，但它不呈现 index.html 页面. 所以我不明白为什么这个为其他人提供静态文件的代码对我不起作用。

```
var static = require('node-static');

//
// Create a node-static server instance to serve the './public' folder
//
// var file = new(static.Server)('./');

require('http').createServer(function (request, response) {
    request.addListener('end', function () {
        console.log("ended");
    });
}).listen(8080); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T06:31:35.607

看来您正在使用 Node.js 0.10.x 并且在新版本中您必须恢复可读流以使它们发出事件：

```
require('http').createServer(function (request, response) {
    var body = '';
    request.setEncoding('utf8');
    request.on('readable', function () {
        body+= this.read();
    }
    request.on('end', function () {
        console.log('ended');
        console.log('Body: ' + body);
    });
    request.resume();
}).listen(8080); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:36:24.153

您应该在请求处理程序中调用 node-static serve 以便您可以获得`index.html`

```
var static = require('node-static');
var fileServer = new static.Server('./');

require('http').createServer(function (request, response) {
    fileServer.serve(request, response);    //add this line 
    request.addListener('end', function () {
        console.log("ended");
    });
}).listen(8080); 
```

# python - Scipy 稀疏矩阵 - 不同实现的目的和用法

> ID：15755270
> 
> 赞同：36
> 
> 时间：2013-04-02T02:50:53.233
> 
> 标签：python, matrix, scipy, sparse-matrix

Scipy 有[许多不同类型的稀疏矩阵可用](http://docs.scipy.org/doc/scipy/reference/sparse.html)。这些类型之间最重要的区别是什么，它们的预期用途有什么区别？

我正在基于Matlab 中的示例代码^(1在 python 中开发代码。)代码的一部分使用了稀疏矩阵——它在 Matlab 中似乎有一个（烦人的）类型，我试图弄清楚我应该在 python 中使用哪种类型^(2 。)

* * *

1：这是一个班级。大多数人都在 Matlab 中做这个项目，但我喜欢制造不必要的工作和混乱 --- 显然。

2：这是一个学术问题：我的代码以“ [CSR](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix) ”格式正常工作，但我很想知道最佳用法是什么。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-06-01T18:01:39.913

抱歉，如果我没有完全回答这个问题，但希望我能提供一些见解。

CSC（压缩稀疏列）和 CSR（压缩稀疏行）更加紧凑和高效，但难以“从头开始”构建。Coo (Coordinate) 和 DOK (Dictionary of Keys) 更容易构建，然后可以通过`matrix.tocsc()`或转换为 CSC 或 CSR `matrix.tocsr()`。

通常，CSC 在访问列向量或列操作时更有效，因为它存储为列数组及其每行的值。

企业社会责任矩阵正好相反；存储为行数组及其每列的值，并且在访问行向量或行操作时更有效。

# php - 未能加载外部实体“”

> ID：15755274
> 
> 赞同：0
> 
> 时间：2013-04-02T02:51:45.427
> 
> 标签：php, api, simplexml

基本上这是一个搜索栏，我将搜索到的术语放在 api 调用 url 中，但是我得到了

> 警告：simplexml_load_file() [function.simplexml-load-file]：I/O 警告：未能加载外部实体“”

有任何想法吗？

代码：

```
if (!empty($_POST['searchbird'])){
    $searchbird=rawurlencode($_POST['searchbird']);
    $searchCode = "http://ebird.org/ws1.1/data/obs/region_spp/recent?rtype=subnational2&r=US-AZ-013&sci=$searchbird";
    $url_headers = @get_headers($searchCode);

    if($url_headers[0] == 'HTTP/1.1 200 OK') {
        $xml = simplexml_load_file($url);

        print_r($xml);

    } else {
        // Error
        echo $searchCode;
        print_r($url_headers);
        exit("failed to load XML");
    }

} else {
    $searchbird = '';
    $form = "<form method='post'>
       <strong>Enter the name of a Bird</strong>
       <input type='text' name='searchbird' value='$searchbird' />
       <input type='submit' name='submit' value='submit' />
    </form>";
    echo $form;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:11:45.923

您想将函数中的变量从更改`$url`为，`$searchCode`因为该`$url`变量为空且未在任何地方设置。

```
if (!empty($_POST['searchbird'])){
    $searchbird=rawurlencode($_POST['searchbird']);
    $searchCode = "http://ebird.org/ws1.1/data/obs/region_spp/recent?rtype=subnational2&r=US-AZ-013&sci=$searchbird";
    $url_headers = @get_headers($searchCode);

    if($url_headers[0] == 'HTTP/1.1 200 OK') {
        $xml = simplexml_load_file($searchCode);

        print_r($xml);
 .... 
```

# php - 将 keyup 上的输入值相乘并将它们相加

> ID：15755275
> 
> 赞同：-1
> 
> 时间：2013-04-02T02:51:53.973
> 
> 标签：php, jquery

我有一些这样的输入

```
while($donnees = mysql_fetch_array($reqmodel)){
?>
<form action="#" name="order" method="post">
<div style='float:left;width:100%'>
<input type='text' name='order_item_sku[]' value='<?php echo $donnees['product_sku'] ;?>'>
<input type='text' name='product_quantity[]' value='0' id="qty[]">
<input type='text' name='product_name[]' value='<?php echo $donnees['product_name'] ;?>'>
<input type='text' name='product_id[]' value='<?php echo $donnees['virtuemart_product_id'] ;?>' style='width: 15px;'>
<input type='text' name='product_price[]' value='<?php echo $price = number_format($donnees['product_price']*1.196,0) ;?>' style='width: 25px;' id="prix[]"> 
```

然后我不知道我会得到多少输入。我怎样才能为每一行`total price`乘以乘法？`product_quantity * product_price`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:11:40.810

以下代码可能会有所帮助，并且仅通过查看上面的代码就可以获得一些建议。

```
while ($row = mysql_fetch_array($reqmodel, MYSQL_ASSOC)) {
    $productPrice = number_format($row['product_price']*$row['product_quantity'],0);
    <input type='text' name='product_price' value='<?php echo "$price = {$productPrice}" ;?>' style='width: 25px;' id="prix">
} 
```

**建议一：**

不推荐使用 mysql_fetch_array 以支持新的[mysqli_fetch_array()](http://php.net/manual/en/function.mysql-fetch-array.php)，因此请考虑升级您的 PHP 数据库查询代码。

**建议 2：**

我建议使用 PHP 模板引擎，例如[Smarty](http://www.smarty.net/)。这将节省您将数据层与表示层分开的时间，并且您不需要编写如此多的内联 echo 语句来保持代码更清晰。

**建议 3：**

避免在名称语句中使用 []，因为 [] 通常与数组相关联，可能会使任何试图阅读代码的人感到困惑。

**建议 4：**

避免使用 while 循环，尽可能使用 for 循环。这使您的代码保持快速并防止任何未知错误/泄漏/无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:16:25.203

你只需要在输入的数组上运行一个 for 循环：

```
$total_price = 0;
$prices = $_POST['product_price'];
$quantities = $_POST['product_quantity'];
$c = count($prices);
for ($i = 0; $i < $c; $i++) {
    $p = (int) $prices[$i]; $q = (int) $quantities[$i];
    $total_price += $p * $q; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:42:24.913

这是在 jQuery 中

[http://jsfiddle.net/b9chris/hSxkW/](http://jsfiddle.net/b9chris/hSxkW/)

给定 HTML 输出，如：

```
<div>
<input name=qty />
<input name=price />
<span class=price></span>
</div>

<div>
<input name=qty />
<input name=price />
<span class=price></span>
</div> 
```

这将自动计算跨度标签中的价格字段：

```
$('input[name=qty], input[name=price]').keyup(function() {
    var divParent = $(this).closest('div');
    var qty = $('input[name=qty]', divParent).val()-0;
    var price = $('input[name=price]', divParent).val()-0;
    if (qty >= 0 && price >= 0)
        $('span.price', divParent).text(qty*price);
}); 
```

# database - MVC 中带有并发检查 (ACID) 的规范化表

> ID：15755283
> 
> 赞同：0
> 
> 时间：2013-04-02T02:52:50.330
> 
> 标签：database, model-view-controller, architecture, concurrency, normalization

两部分问题：

**第 1**点：当引用对象的某些属性/属性并不总是必需时，为引用另一个对象的对象创建模型的最佳方法是什么？

想象一下，如果你有两个对象：**PERSON**和**BUSINESS**

```
Person
+ PersonID
+ Name
+ Age
+ Sex
+ Skill
+ Business *

Business
+ BusinessID
+ Name
+ Address
+ CorporateVision (this is large) 
```

在上面的示例中：**PERSON**将**BUSINESS**作为其当前雇主。

在数据库中，每个对象都有两个表。在代码中，使用 MVC 架构模式，我将为每个对象创建两个类。**数据库将在BUSINESS** --> **PERSON**之间具有外键关系，而在代码中**PERSON**对象将有一个成员变量，该变量包含对**BUSINESS**对象的引用。

现在假设我想列举**PERSONS**的集合并找出为特定公司工作的人的总数（基于**BUSINESS** . **Name**）。

如果不使用 MVC，我可以创建一个查询数据库并获得计数的函数。简单而有效。

使用 MVC，我需要实例化每个**PERSON**对象，而后者又会实例化一个**BUSINESS**对象以供参考（如果尚未为它完成... **BusinessFactory**将首先检查一个集合）。此外，它必须拉入**BUSINESS**。**CorporateVision**从数据库中获取每个对象。而且由于这些企业中的大多数都是媒体营销公司，因此他们的大多数企业愿景都是大文本块。因此，当我们只需要企业名称时，就没有必要从数据库中读取 CorporateVision。

我可以通过将代码中的**PERSON**对象更改为：

```
Person
+ PersonID
+ Name
+ Age
+ Sex
+ Skill
+ BusinessID
+ BusinessName 
```

所以现在当我创建我的**PERSON**对象时，我会与**BUSINESS**进行 JOIN并缓存名称。现在我可以快速有效地获取 BusinessName ......而且我仍然可以根据需要通过查找 ID来获取完整的**BUSINESS对象。**但我只是对模型进行了非规范化......我刚刚引入了一个新问题......和一个新问题。

**数字 2**：MVC 如何处理多用户数据库的并发性？

可以说，当我的客户端应用程序正在枚举时（使用我上面提到的枚举来查找为特定业务工作的所有人员），另一个用户合并了两个**BUSINESS**对象。

现在我的内存集合是错误的，因为所有的 BusinessName 缓存都是陈旧的。如果我刚刚离开**PERSON** ，情况也是如此。**业务**作为**业务**对象引用：**业务**对象将是陈旧的。

**总结**：我觉得使用 MVC 会失去数据检索效率以及应用程序的 ACIDness。还是我使用 MVC 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:11:53.683

您似乎混合了 UI 和数据访问，而您应该尽量减少它们对另一个的依赖。MVC 实际上是一个非常广泛的模式，它描述了应用程序如何与用户交互。您的两个问题都与数据访问有关。

1) MVC 是您组织 UI 的方式。因此，模型是您希望让用户与之交互的一条信息。请注意，这里的业务对象不是优先级。如果存在使用从 加载一个`Person`类以及几个属性的情况`Business`，那就这样吧：您的第二个 Person 再现是这种情况的完美模型。依此类推——每个用例都需要不同的模型，您应该为不同的场景创建不同的模型。

如果您认为调用函数来计算数字更容易 - 很好。请记住，您在此处不受业务对象的约束。

使用更“面向对象”的方法，我们通常以两种方式解决这个参考问题：

*   首先是延迟加载，它是现代 O/RM 的开箱即用功能。所以你加载一个人，在第一次调用 Person.Business 后，后者会自动加载。
*   其次是你创建了一个特殊的 UI，它知道你的数据访问细节，或者只有你使用的字段，或者以异步方式从客户端请求额外的数据。

2) 同样，MVC 不处理并发，它不应该处理它，甚至不应该打扰。这是数据访问层的问题。处理并发的方式也有好几种，主要是乐观锁和悲观锁。（使用第一种方法，您允许不同的用户进行冲突更改并在发生冲突时尝试解决冲突。第二种方法通过完全锁定更新来防止冲突）。同样，O/RM 通常会处理它；或者您可以使用自己的实现，但它应该仍然是数据访问，而不是 MVC 部分。

# php - 12 000 条记录的算法 MySQL 和 PHP

> ID：15755284
> 
> 赞同：0
> 
> 时间：2013-04-02T02:53:02.220
> 
> 标签：php, mysql, algorithm, full-text-search

我使用全文搜索+ BOOLEAN MODE，但这效率不高。这是我的代码：

```
$sssql = $server_link->query("SELECT uDR.webTitulo, uDR.webDescripcion, uDR.webkeywords, uDR.weburl, SUM(uDR.priority) as SPriority
FROM (

(SELECT s1.webTitulo, s1.webDescripcion, s1.weburl, s1.webkeywords, $a as priority FROM webs s1 WHERE MATCH (webTitulo) AGAINST ('$frase'))

UNION

(SELECT s2.webTitulo, s2.webDescripcion, s2.weburl, s2.webkeywords, $b as priority FROM webs s2 WHERE MATCH (webkeywords) AGAINST ('$frase*' IN BOOLEAN MODE))

UNION

(SELECT s3.webTitulo, s3.webDescripcion, s3.weburl, s3.webkeywords, $c as priority FROM webs s3 WHERE MATCH (webDescripcion) AGAINST ('$frase'))

UNION

(SELECT s4.webTitulo, s4.webDescripcion, s4.weburl, s4.webkeywords, $d as priority FROM webs s4 WHERE MATCH (weburl) AGAINST ('$frase'))) uDR

GROUP BY uDR.webTitulo, uDR.weburl, uDR.webDescripcion, uDR.webkeywords

ORDER BY SPriority DESC "); 
```

$frase = 包含搜索的短语。

代码按以下方式对记录进行排序：

1.  标题中包含搜索短语的记录。
2.  在关键字中。
3.  和 4° 在描述和 URL 中。

效率低下，因为 ('$frase*' IN BOOLEAN MODE) 提供了数百条不相关的记录。但我需要包含 3 个字母的记录，例如：DNA、Sun 等。

我需要带有 3 个字母的单词，但也需要相关的结果。

# intellij-idea - 在 Windows 上与 IntelliJ 一起使用的简单 Web 服务器？

> ID：15755286
> 
> 赞同：1
> 
> 时间：2013-04-02T02:53:06.227
> 
> 标签：intellij-idea

我将 IntelliJ 用于纯 Javascript 项目（一些 HTML 和 javascript 页面与其他人的 Web 服务通信）。现在我直接从文件系统运行页面，但是有一些限制（比如不写 cookie）。

是否有一个简单的 Web 服务器可以在我调试项目时启动和停止？就像 Visual Studio 将如何处理 ASP.NET 或 Aptana 一样？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:04:55.910

如果你想使用纯 JS&HTML 来做一些事情，也许 jQuery 是一个不错的选择 [jQuery](http://jquery.com/)有很多插件。

如果你想用 Java 写一些可运行的程序，请使用[Tomcat](http://tomcat.apache.org/)

希望能帮到你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:55:22.127

我不知道你在做什么，但是安装 XAMPP，它使用起来非常简单，虽然它默认支持 PHP/PERL，而不是 ASP.NET。

# django - 可以在没有用户在 Django 1.3 中进行身份验证的情况下使用管理 UI 吗？

> ID：15755292
> 
> 赞同：5
> 
> 时间：2013-04-02T02:53:48.883
> 
> 标签：django, django-admin

我想知道是否有一种简单的方法来配置 Django Admin UI（例如在[http://mysite.com/admin](http://mysite.com/admin)），这样我就不需要进行身份验证/登录？

我尝试调整 urls.py 但无法绕过登录屏幕：

```
urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
) 
```

我想去[http://mysite.com/admin](http://mysite.com/admin)并查看 django 对象列表而无需登录。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:10:50.813

*   Django 管理框架使用 ' ' 对象`is_staff`上的 ' ' 标志`User`来验证使用管理站点的权限。
*   因此，它需要对用户进行身份验证以验证他的管理员相关权限。
*   如果要禁用此功能，则必须覆盖管理站点的“索引”方法。
*   可在`django.contrib.admin.sites`.

`def index(self, request, extra_context=None):`

```
 """
     Displays the main admin index page, which lists all of the installed
     apps that have been registered in this site.
     """ 
```

# java - 通过 SSL/TLS 下载 Apache CXF wsdl

> ID：15755293
> 
> 赞同：4
> 
> 时间：2013-04-02T02:54:15.850
> 
> 标签：java, ssl, wsdl, cxf, client-certificates

我有一个 cxf 服务在运行

```
https://localhost:8443/services/MyService?wsdl 
```

需要客户证书。WSDL 在这里并不重要。

当我删除客户端证书或 https 要求时，我可以调用该服务。

服务和客户端类是使用 cxf wsdl2java 实用程序生成的。

这是 MyService.class：

```
package com.mycompany;

import java.net.URL;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import javax.xml.ws.WebEndpoint;
import javax.xml.ws.WebServiceClient;
import javax.xml.ws.WebServiceFeature;

/**
 * This class was generated by Apache CXF 2.7.3 2013-03-29T13:59:37.423-03:00 Generated source version: 2.7.3
 */
@WebServiceClient(name = "MyService", wsdlLocation = "myservice.wsdl", targetNamespace = "http://server/schemas/services")
public class MyService extends Service {

    public final static URL WSDL_LOCATION;

    public final static QName SERVICE = new QName("http://server/schemas/services", "MyService");
    public final static QName MyServicePort = new QName("http://server/schemas/services", "MyServicePort");
    static {
        URL url = MyService.class.getResource("myservice.wsdl");
        if (url == null) {
            Logger.getLogger(MyService.class.getName()).log(Level.INFO, "Can not initialize the default wsdl from {0}", "myservice.wsdl");
        }
        WSDL_LOCATION = url;
    }

    public MyService(URL wsdlLocation) {
        super(wsdlLocation, SERVICE);
    }

    public MyService(URL wsdlLocation, QName serviceName) {
        super(wsdlLocation, serviceName);
    }

    public MyService() {
        super(WSDL_LOCATION, SERVICE);
    }

    /**
     * 
     * @return returns EncaminharMensagemPortType
     */
    @WebEndpoint(name = "MyServicePort")
    public MyServicePortType getMyServicePort() {
        return super.getPort(MyServicePort, MyServicePortType.class);
    }

    /**
     * 
     * @param features
     *            A list of {@link javax.xml.ws.WebServiceFeature} to configure on the proxy. Supported features not in the
     *            <code>features</code> parameter will have their default values.
     * @return returns EncaminharMensagemPortType
     */
    @WebEndpoint(name = "MyServicePort")
    public MyServicePortType getMyServicePort(WebServiceFeature... features) {
        return super.getPort(MyServicePort, MyServicePortType.class, features);
    }

} 
```

这是我没有客户证书要求的客户：（工作正常）

```
package com.mycompany;

import java.net.URL;

import javax.xml.namespace.QName;

import com.mycompany.IdHolder;
import com.mycompany.MyDataObject;

public class CxfClientSslTest {

    public static void main(String[] args) {
        try {

            QName SERVICE_NAME = new QName("http://server/schemas/services", "MyService");
            URL wsdlURL = new URL("https://localhost:8443/services/MyService?wsdl");
            MyService ss = new MyService(wsdlURL, SERVICE_NAME);
            MyServicePortType port = ss.getMyServicePort();

            IdHolder mensagem = new IdHolder();
            mensagem.setId(1L);
            MyDataObject dataObject = port.getById(mensagem);

            System.out.println("Id: " + dataObject.getId());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

这是我的客户发送他的证书：

```
package com.mycompany;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.UnrecoverableKeyException;
import java.security.cert.CertificateException;

import javax.net.ssl.KeyManager;
import javax.net.ssl.KeyManagerFactory;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;
import javax.xml.namespace.QName;

import org.apache.cxf.configuration.jsse.TLSClientParameters;
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.transport.http.HTTPConduit;

public class CxfClientSslTest {

    public static void main(String[] args) {
        try {

            QName SERVICE_NAME = new QName("http://server/schemas/services", "MyService");
            URL wsdlURL = new URL("https://localhost:8443/services/MyService?wsdl");
            MyService ss = new MyService(wsdlURL, SERVICE_NAME);
            MyServicePortType port = ss.getMyServicePort();

            tslIt(port);

            IdHolder mensagem = new IdHolder();
            mensagem.setId(1L);
            MyDataObject dataObject = port.getById(mensagem);

            System.out.println("Id: " + dataObject.getId());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void tslIt(MyServicePortType port) throws KeyStoreException, NoSuchAlgorithmException, CertificateException, IOException,
            UnrecoverableKeyException {
        Client client = ClientProxy.getClient(port);
        HTTPConduit http = (HTTPConduit) client.getConduit();

        TLSClientParameters tlsClientParameters = http.getTlsClientParameters();

        KeyStore keyStore = getKeyStore();
        KeyStore trustStore = getTrustStore();

        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());

        keyManagerFactory.init(keyStore, "123456".toCharArray());
        KeyManager[] keyMgrs = keyManagerFactory.getKeyManagers();
        tlsClientParameters.setKeyManagers(keyMgrs);

        trustManagerFactory.init(trustStore);
        TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();
        tlsClientParameters.setTrustManagers(trustManagers);

        tlsClientParameters.setDisableCNCheck(true);
    }

    public static KeyStore getKeyStore() throws KeyStoreException, NoSuchAlgorithmException, CertificateException, IOException {
        URL keyStoreUrl = CxfClientSslTest.class.getResource("/certs/client.jks");
        File keystoreFile = new File(keyStoreUrl.getPath());
        if (!keystoreFile.exists()) {
            throw new RuntimeException("keystore doesn't exists: " + keystoreFile.getAbsolutePath());
        }

        KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());
        InputStream keystoreInput = new FileInputStream(keystoreFile.getAbsolutePath());
        keystore.load(keystoreInput, "changeit".toCharArray());
        keystoreInput.close();
        return keystore;
    }

    public static KeyStore getTrustStore() throws KeyStoreException, NoSuchAlgorithmException, CertificateException, IOException {
        URL trustStoreUrl = CxfClientSslTest.class.getResource("/certs/client-trust.jks");
        File trustStoreFile = new File(trustStoreUrl.getPath());
        if (!trustStoreFile.exists()) {
            throw new RuntimeException("truststore doesn't exists: " + trustStoreFile.getAbsolutePath());
        }

        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
        InputStream trustStoreInput = new FileInputStream(trustStoreFile.getAbsolutePath());
        trustStore.load(trustStoreInput, "changeit".toCharArray());
        trustStoreInput.close();
        return trustStore;
    }

} 
```

来自客户端和服务器的 TLS 配置均已检查并且正常。但是当我运行程序时，我得到了这个：

```
Information: Can not initialize the default wsdl from myservice.wsdl
javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:149)
    at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:98)
    at javax.xml.ws.Service.<init>(Service.java:77)
    at com.mycompany.MyService.<init>(MyService.java:36)
    at com.mycompany.CxfClientSslTest.main(CxfClientSslTest.java:32)
Caused by: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:100)
    at org.apache.cxf.jaxws.ServiceImpl.initializePorts(ServiceImpl.java:199)
    at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:147)
    ... 4 more
Caused by: javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: Problem parsing 'https://localhost:8443/services/MyService?wsdl'.: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No name matching localhost found
    at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:262)
    at org.apache.cxf.wsdl11.WSDLManagerImpl.getDefinition(WSDLManagerImpl.java:205)
    at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:98)
    ... 6 more
Caused by: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No name matching localhost found
    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1868)
    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:276)
    at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:270)
    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1337)
    at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:154)
    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:868)
    at sun.security.ssl.Handshaker.process_record(Handshaker.java:804)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:998)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1294)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1321)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1305)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:523)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1296)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:653)
    at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:189)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:799)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:240)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:300)
    ... 12 more
Caused by: java.security.cert.CertificateException: No name matching localhost found
    at sun.security.util.HostnameChecker.matchDNS(HostnameChecker.java:208)
    at sun.security.util.HostnameChecker.match(HostnameChecker.java:93)
    at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:347)
    at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:203)
    at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:126)
    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1319)
    ... 30 more 
```

当 cxf 尝试下载 wsdl 时，我可以看到问题发生在我的 https 配置完成之前。

我研究了如何让 cxf 使用该 https 配置来下载 wsdl。我花了很多时间，但我找不到答案。

所以我的问题是：如何让 cxf 使用 https 配置下载 wsdl？

拜托，我已经有了答案，我打算把它放在这里。所以，如果你没有一个好的答案，或者更好的答案，请不要发布。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T03:20:36.957

在网络上进行了大量研究但没有成功后，我决定是时候调试 cxf API 了。这是开源的要点之一，对吧？

所以我发现cxf不直接下载wsdl。它通过调用将其委托给 wsdl4j

```
javax.wsdl.xml.WSDLReader.readWSDL(javax.wsdl.xml.WSDLLocator) 
```

调用

```
javax.wsdl.xml.WSDLLocator.getBaseInputSource() 
```

调用

```
org.apache.cxf.wsdl11.ResourceManagerWSDLLocator.getInputSource(String, String) 
```

因为 ResourceManagerWSDLLocator 是第一个方法调用的 WSDLLocator。

ResourceManagerWSDLLocator.getInputSource 第一行是：

```
InputStream ins = bus.getExtension(ResourceManager.class).getResourceAsStream(importLocation); 
```

现在，由于 ResourceManager 是 xcf 总线的扩展，您可以向其中添加更多 ResourceResolver，DefaultResourceManager（实现 ResourceManager）将遍历所有已注册的解析器并使用第一个解析非空值的解析器，您只需要添加一个 ResourceResolver到资源管理器。

我的最终和工作客户端应用程序是：

```
package com.mycompany;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.UnrecoverableKeyException;
import java.security.cert.CertificateException;

import javax.net.ssl.KeyManager;
import javax.net.ssl.KeyManagerFactory;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;
import javax.xml.namespace.QName;

import org.apache.cxf.Bus;
import org.apache.cxf.BusFactory;
import org.apache.cxf.configuration.jsse.TLSClientParameters;
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.resource.ResourceManager;
import org.apache.cxf.resource.ResourceResolver;
import org.apache.cxf.transport.http.HTTPConduit;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.conn.scheme.Scheme;
import org.apache.http.conn.scheme.SchemeRegistry;
import org.apache.http.conn.ssl.SSLSocketFactory;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.conn.BasicClientConnectionManager;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpParams;

public class CxfClientSslTest {

    public static void main(String[] args) {
        try {

            Bus bus = BusFactory.getThreadDefaultBus();
            ResourceManager extension = bus.getExtension(ResourceManager.class);

            extension.addResourceResolver(new ResourceResolver() {
                @Override
                public <T> T resolve(String resourceName, Class<T> resourceType) {
                    System.out.println("resourceName: " + resourceName + " - resourceType: " + resourceType);
                    return null;
                }

                @Override
                public InputStream getAsStream(String name) {
                    try {
                        if (!name.startsWith("https")) {
                            return null;
                        }
                        SSLSocketFactory sslSocketFactory = SslUtil.getSslSocketFactory();
                        SchemeRegistry schemeRegistry = new SchemeRegistry();
                        schemeRegistry.register(new Scheme("https", 8443, sslSocketFactory));

                        final HttpParams httpParams = new BasicHttpParams();
                        DefaultHttpClient httpClient = new DefaultHttpClient(new BasicClientConnectionManager(schemeRegistry), httpParams);

                        HttpGet get = new HttpGet(name);
                        HttpResponse response = httpClient.execute(get);
                        return response.getEntity().getContent();
                    } catch (Exception e) {
                        return null;
                    }
                }
            });

            QName SERVICE_NAME = new QName("http://server/schemas/services", "MyService");
            URL wsdlURL = new URL("https://localhost:8443/services/MyService?wsdl");
            MyService ss = new MyService(wsdlURL, SERVICE_NAME);
            MyServicePortType port = ss.getMyServicePort();

            tslIt(port);

            IdHolder mensagem = new IdHolder();
            mensagem.setId(1L);
            MyDataObject dataObject = port.getById(mensagem);

            System.out.println("Id: " + dataObject.getId());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void tslIt(MyServicePortType port) throws KeyStoreException, NoSuchAlgorithmException, CertificateException, IOException,
            UnrecoverableKeyException {
        Client client = ClientProxy.getClient(port);
        HTTPConduit http = (HTTPConduit) client.getConduit();

        TLSClientParameters tlsClientParameters = http.getTlsClientParameters();

        KeyStore keyStore = getKeyStore();
        KeyStore trustStore = getTrustStore();

        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());

        keyManagerFactory.init(keyStore, "123456".toCharArray());
        KeyManager[] keyMgrs = keyManagerFactory.getKeyManagers();
        tlsClientParameters.setKeyManagers(keyMgrs);

        trustManagerFactory.init(trustStore);
        TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();
        tlsClientParameters.setTrustManagers(trustManagers);

        tlsClientParameters.setDisableCNCheck(true);
    }

    public static KeyStore getKeyStore() throws KeyStoreException, NoSuchAlgorithmException, CertificateException, IOException {
        URL keyStoreUrl = CxfClientSslTest.class.getResource("/certs/client.jks");
        File keystoreFile = new File(keyStoreUrl.getPath());
        if (!keystoreFile.exists()) {
            throw new RuntimeException("keystore doesn't exists: " + keystoreFile.getAbsolutePath());
        }

        KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());
        InputStream keystoreInput = new FileInputStream(keystoreFile.getAbsolutePath());
        keystore.load(keystoreInput, "changeit".toCharArray());
        keystoreInput.close();
        return keystore;
    }

    public static KeyStore getTrustStore() throws KeyStoreException, NoSuchAlgorithmException, CertificateException, IOException {
        URL trustStoreUrl = CxfClientSslTest.class.getResource("/certs/client-trust.jks");
        File trustStoreFile = new File(trustStoreUrl.getPath());
        if (!trustStoreFile.exists()) {
            throw new RuntimeException("truststore doesn't exists: " + trustStoreFile.getAbsolutePath());
        }

        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
        InputStream trustStoreInput = new FileInputStream(trustStoreFile.getAbsolutePath());
        trustStore.load(trustStoreInput, "changeit".toCharArray());
        trustStoreInput.close();
        return trustStore;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T03:41:17.470

```
tlsClientParameters.setUseHttpsURLConnectionDefaultSslSocketFactory(false); 
```

需要上面的行来禁用默认的 SslSocketFactory（这将忽略在 tlsClientParamters 中配置的 keyStore 和 trustStore）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-24T00:07:40.193

我认为*apache cxf*`http conduit`的标准方法是在你的 cxf.xml中设置一个引用你的 jks 密钥库：

```
<http:conduit id="{Namespace}PortName.http-conduit"> 
<http:tlsClientParameters>
...
<sec:trustManagers>
  <sec:keyStore type="JKS"
                password="StorePass"
                file="certs/truststore.jks"/>
</sec:trustManagers>
 ...
</http:tlsClientParameters>
</http:conduit> 
```

此处的更多信息：[配置 SSL 支持](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html#ClientHTTPTransport(includingSSLsupport)-ConfiguringSSLSupport%20ConfiguringSSLSupport)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T03:47:26.240

javax.net.ssl.SSLHandshakeException：java.security.cert.CertificateException：找不到与本地主机匹配的名称

当您使用您的姓名创建自签名证书时，会发生上述异常，要解决此异常，您需要添加`"localhost"`以下步骤

```
What is your first and last name?
 [Unknown]:  localhost 
```

# jpa - 在 spring-data-jpa 中为延迟加 载的集合设置批量大小

> ID：15755295
> 
> 赞同：5
> 
> 时间：2013-04-02T02:54:54.660
> 
> 标签：jpa, spring-data-jpa

我需要生成一个包含数据库导出的 CSV 文件。由于数据可能非常大，我想使用具有特定批量大小的延迟加载，这样当我遍历 DAO/Repository 返回的集合时，我将只加载一个批次。我希望这由集合自动完成（例如，否则我可以只加载一页又一页，`Pageable`用作参数）。

这是一些代码，希望能让事情更清楚。我的控制器看起来像这样：

```
public ModelAndView generateCsv(Status status) {
    //can return a large number of items.
    Collection<Item> items = itemRepository.findByStatus(status);

    return new ModelAndView("csv", "items", items);
} 
```

如您所见，我将该集合传递给视图（通过 ModelAndView 对象），视图将遍历它并生成 CSV。

我希望集合知道如何在内部加载下一批，这是延迟加载的集合通常应该做的。

有没有办法用 Spring-data 或简单的 JPA 来做到这一点？我`ScrollableResults`从 Hibernate 知道，但我不喜欢它有两个原因：它不是 JPA（我必须让我的代码依赖于 Hibernate），并且它没有使用集合 API，因此我必须提出我的看法了解 ScrollableResults。至少如果它会实施`Iterable`，那会变得更好，但事实并非如此。

所以我正在寻找一种方法来指定一个集合是延迟加载的，使用特定的批量大小。也许是这样的：

```
@Query("SELECT o FROM Item o WHERE o.status = ?1")
@Fetch(type = FetchType.LAZY, size = 100)
Page<Item> findByStatus(Item.Status status); 
```

如果使用 Spring Data 无法做到这样的事情，你知道是否可以使用 QueryDsl 来完成吗？QueryDsl 存储库返回 Iterator 对象的事实使我认为它可能会延迟加载这些对象，尽管我找不到关于此的文档。

谢谢，史蒂夫。

# android - 如何将我在 Github 上找到的库导入到我现有的项目中？

> ID：15755296
> 
> 赞同：1
> 
> 时间：2013-04-02T02:55:06.330
> 
> 标签：android, github

我想将[SwipeListView](https://github.com/47deg/android-swipelistview)用作日历应用程序的视图。

我试图弄清楚如何将它放到我的活动中。

我是 android 新手，似乎不知道如何将库导入到我在 Eclipse 中的当前项目中以便我可以使用它。

我需要什么文件？他们去哪里？他们使它看起来即插即用，但我似乎无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:22:05.200

请花时间通读开发文档，大多数时候这类问题会因为“缺乏研究”而被关闭。

[http://developer.android.com/tools/projects/projects-eclipse.html#ReferenceLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:26:28.953

感谢一楼，让我为您提供直接的方向：

要添加对库项目的引用，请执行以下步骤：

确保项目库和依赖它的应用程序项目都在您的工作区中。如果缺少其中一个项目，请将其导入您的工作区。在 Package Explorer 中，右键单击依赖项目并选择 Properties。在“属性”窗口中，选择左侧的“Android”属性组并找到右侧的库属性。单击添加以打开“项目选择”对话框。从可用库项目列表中，选择一个项目并单击确定。对话框关闭后，单击“属性”窗口中的“应用”。单击“确定”关闭“属性”窗口。

# html - 如何自动填充 HTML 表单？

> ID：15755303
> 
> 赞同：-2
> 
> 时间：2013-04-02T02:55:38.347
> 
> 标签：html, forms

**阶段**

假设某个 URL 中的 HTML 页面（即[http://mysite.com/registry.html](http://mysite.com/registry.html)）并且该 HTML 文件包含一个 HTML 表单，如下所示：

```
<form action="/">
  <input name="firstname">
  <input name="lastname">
  <textarea name="message"></textarea>
</form> 
```

如果我想*预先*填写此表格，我该怎么做？

也许我认为我可以根据 URL 请求预先填写此表格*。*但我不知道这是否可能。

**限制**

*   我无权访问`mysite.com`服务器，也无权访问`registry.html`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:32:04.013

也许使用一些 JavaScript 魔法，通过 AJAX加载页面（[http://example.com/registry.html ）：](http://example.com/registry.html)

```
function loadPage()
{
    jQuery.ajax({
    type: "GET",
    url: "http://example.com/registry.html",
    success: successFn
});

}

function successFn(data)
{
var result=jQuery(data).find("#idOfTheInput").html()
//modify the default value
//re attach the input into the html
//render the html

} 
```

剩下的由你决定；挖掘 dom 并输入你想要的值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T03:07:00.243

您可以尝试通过 url 传递参数。

像这样的东西：

[http://test.com?param1](http://test.com?param1)

这个 url 正在传递一个参数 (param1)，因此您可以设置此表单的成员以能够接收这些参数。

问候，

奥塔康。

# windows - 安装 Tableau Server 时出现错误

> ID：15755305
> 
> 赞同：0
> 
> 时间：2013-04-02T02:55:54.923
> 
> 标签：windows, permissions, windows-services, tableau-api

当我安装 Tableau Server 时，我看到了这个服务器。我是系统的管理员，但我仍然看到消息。请在这方面帮助我

![以下是我看到的错误](https://i.stack.imgur.com/kIIQt.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:51:19.263

如果您是第一次安装 Tableau Server，则使用默认的 NTAuthority\NetworkService 帐户通常更安全，因为这（几乎总是）可以保证工作并且以后总是可以更改。

如果您确实想继续使用 SriHarsha-PC\SriHarsha 作为运行方式帐户，请查看 Tableau 软件知识库中的以下链接，其中列出了您选择的帐户运行 Tableau 所需的所有权限服务器正确。

[Tableau Server 运行方式帐户权限](http://onlinehelp.tableausoftware.com/current/server/en-us/help.htm#runas.htm)

如果这不能提供足够的信息，[请创建支持请求](http://www.tableausoftware.com/support/request)，Tableau 技术支持将尝试帮助解决问题。

# javascript - 使用 iframe 在 Metro App 中嵌入 YouTube 视频时出现内存泄漏

> ID：15755310
> 
> 赞同：4
> 
> 时间：2013-04-02T02:56:29.243
> 
> 标签：javascript, html, iframe, youtube, microsoft-metro

我想在我的 Metro 应用程序中播放一些 YouTube 视频。[我使用 YouTube Iframe API（链接](https://developers.google.com/youtube/iframe_api_reference)）在我的应用程序中嵌入了 YouTube 视频。然后我遇到了一个严重的内存泄漏问题。如果我嵌入一个 YouTube 视频然后删除它，内存将增加约 5MB，神经量将进一步减少。演示代码在这里：default.html：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>iframeTest</title>
<!-- WinJS references -->
<link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.1.0/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0/js/ui.js"></script>
<!-- iframeTest references -->
<link href="/css/default.css" rel="stylesheet" />
<script src="/js/default.js"></script>
</head>
<body style ="">
<button id="remove" style="display:block; float:left;">remove a video</button>
<button id="add" style="display:block; float:left;">add a video</button>
</body>
</html> 
```

default.js 片段：

```
document.getElementById("remove").addEventListener("click", function () {
    var ifrs = document.querySelectorAll('div');
    if (ifrs.length > 0) {
            document.body.removeChild(ifrs[ifrs.length - 1]);
        }
    });
    document.getElementById("add").addEventListener("click", function(){
        var testYoutubeDiv = document.createElement('div');
        testYoutubeDiv.style.cssFloat = 'left';
        testYoutubeDiv.style.width = '400px';
        testYoutubeDiv.style.height = '300px';
        MSApp.execUnsafeLocalFunction(function () {
            testYoutubeDiv.innerHTML = "<iframe id='player' type='text/html' width='400' height='300' src='http://www.youtube.com/embed/u1zgFlCw8Aw?enablejsapi=1&origin=http://example.com' frameborder='0'></iframe>";

        });
        document.body.appendChild(testYoutubeDiv);
    }); 
```

然后，我编写了一个类似的 .html 文件并在 IE10.0 和 Chrome 中进行测试。我发现 IE10.0 也有内存泄漏问题，但 chrome 没有。而且IE10.0的内存泄漏问题没有Metro App严重。测试html代码在这里：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>iframeTest</title>
<script type = "text/javascript">
function load() {
    document.getElementById("remove").addEventListener("click", function () {
        var ifrs = document.querySelectorAll('div');
        if (ifrs.length > 0) {
            document.body.removeChild(ifrs[ifrs.length - 1]);
        }
    });
    document.getElementById("add").addEventListener("click", function () {
        var testYoutubeDiv = document.createElement('div');
        testYoutubeDiv.style.cssFloat = 'left';
        testYoutubeDiv.style.width = '400px';
        testYoutubeDiv.style.height = '300px';
        testYoutubeDiv.innerHTML = "<iframe id='player' type='text/html' width='400' height='300' src='http://www.youtube.com/embed/u1zgFlCw8Aw?enablejsapi=1&origin=http://example.com' frameborder='0'></iframe>"; 
        document.body.appendChild(testYoutubeDiv);
    });
}
</script>
</head>
<body onload ="load()">
<button id="remove" style="display:block; float:right;">remove a video</button>
<button id="add" style="display:block; float:right;">add a video</button>
</body>
</html> 
```

我注意到 IE（也许还有 Metro App）不使用 WebKit 引擎来处理 javascript 代码。有什么方法可以减少 Metro App 中的内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:28:12.550

在 html 文件中创建 iframe

```
<iframe id="ifr_video"></iframe> 
```

然后使用javascript向该iframe添加源，同时添加源通过拆分查找YouTube URL的ID，例如如果YouTube URL是[http://www.youtube.com/watch?v=ZnehCBoYLbc](http://www.youtube.com/watch?v=ZnehCBoYLbc)，则ID是 ZnehCBoYLbc ，然后像下面这样定义源，用于查找 ID 和添加源

```
var Url_splits = Youtube_Video_url.split("/");
var Url_length = Url_splits.length;
var Ytube_id = Url_splits[(Url_length - 1)];
document.getElementById("ifr_video").src = "http://www.youtube.com/embed/" + Ytube_id; 
```

在 HTML 中

```
 <video id="VideoSource" style="border:1px solid black;"  controls="controls" ></video>
        <iframe class="youtube-player" id="ifr_video" type="text/html" width=100% height=100% allowfullscreen frameborder="0"></iframe> 
```

在 JS 中（内部就绪函数）

```
id("VideoSource").msPlayToSource.connection.addEventListener("statechanged", playToSrcStateChangeHandler);

        function playToSrcStateChangeHandler(eventIn) {
                var states = Windows.Media.PlayTo.PlayToConnectionState;
                if (eventIn.currentState === states.disconnected) {
                    WinJS.log && WinJS.log("PlayTo connection state: Disconnected", "sample", "status");
                } else if (eventIn.currentState === states.connected) {
                    WinJS.log && WinJS.log("PlayTo connection state: Connected", "sample", "status");
                } else if (eventIn.currentState === states.rendering) {
                    WinJS.log && WinJS.log("PlayTo connection state: Rendering", "sample", "status");
                }
            }

        Video_Path = "http://www.youtube.com/embed/" + new_id;

        //new_id is the Youtube video id For example,..
        in http://www.youtube.com/watch?v=ZnehCBoYLbc ,  id is ZnehCBoYLbc            

        function playYouTubeVideo(Video_Path) {
                document.getElementById("ifr_video").src = Video_Path;
                id("VideoSource").style.display='none';
            }

        function playWebContent(Video_Path) {
                document.getElementById("ifr_video").style.display = 'none';
                var localVideo = id("VideoSource");
                var videoStabilization = Windows.Media.VideoEffects.videoStabilization;

                localVideo.src = Video_Path;
                localVideo.play();
            } 
```

参考：[http ://code.msdn.microsoft.com/windowsapps/Media-PlayTo-Sample-fedcb0f9](http://code.msdn.microsoft.com/windowsapps/Media-PlayTo-Sample-fedcb0f9)

# c# - 让 Visual Studio 2010 看起来像 Eclipse？

> ID：15755311
> 
> 赞同：0
> 
> 时间：2013-04-02T02:56:31.027
> 
> 标签：c#, eclipse, visual-studio-2010, xna

我在 Visual Studio 中编程已经有一段时间了，但我真的很喜欢 Eclipse 的布局。我希望能够拥有与 Eclipse 相同的颜色主题。我的意思是我希望我的文本像 eclipse 一样是紫色的，我的变量名是蓝色的斜体。我还想将第一个花括号与方法保持在同一行。

如果你能告诉我如何做到这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:01:10.547

转到`Tools/Options...`菜单。对于大括号去`Text Editor/Your language/Formatting/New Lines/New line option for braces`。对于颜色去`Environment/Fonts and Colors`疯了:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:00:57.603

`Open Tools -> Options`,

在选项卡下`Environment -> Fonts and Color`

我不建议这种方法，因为它不是那么有用。并且该设置绑定到用户配置文件，因此如果您更改用户配置文件（运行方式）或更改设备（PC），则设置将重置为默认值。

# php - 设置 date.timezone 会影响 php 脚本吗？

> ID：15755312
> 
> 赞同：0
> 
> 时间：2013-04-02T02:56:44.950
> 
> 标签：php

我有一个关于 data.timezone 的简单问题。我的公司服务器已经长期运行，我注意到他们之前没有在 php.ini 中设置任何 date.timezone。所以我想对 php.ini 进行更改，但我担心它会影响其他脚本。会影响还是会影响？

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T01:41:05.097

谢谢大家！乔恩说的问题解决了！

> 如果他们都使用相同的时区并且不进行任何转换，那么您可以设置它。=]

# stata - 如何解决 r(1400) 错误？

> ID：15755316
> 
> 赞同：2
> 
> 时间：2013-04-02T02:56:59.477
> 
> 标签：stata

我正在使用几乎理想的需求系统估计对几种食品的需求。在那里，我必须使用多元 Tobit 模型进行审查。

我使用了以下代码，它返回了一个错误，因为“初始值不可行，r(1400)”。

* * *

```
//homogeneity//
constraint define 1 [q1]lnp1+[q1]lnp2+[q1]lnp3=0
constraint define 2 [q2]lnp1+[q2]lnp2+[q2]lnp3=0

//symmetry//
constraint define 3  [q1]lnp2=[q2]lnp1

global demand1 "(q1: w1 lnp1 lnp2 lnp3 lnxp)"
global demand2 "(q2: w2 lnp1 lnp2 lnp3 lnxp)"

mvtobit $demand1 $demand2, const(1 2 3) 
```

* * *

我不知道如何解决它。谁能帮我解决这个问题？

提前谢谢了。

# ios - 成功连接到服务器，但在 json 格式字符串后出现了一些废话

> ID：15755317
> 
> 赞同：1
> 
> 时间：2013-04-02T02:57:06.787
> 
> 标签：ios, xcode, json, nsurlrequest, nsmutableurlrequest

我已成功连接到服务器，并从中获取正确的 json 格式字符串。不知何故，10 次中有 9 次返回一些额外的东西......就像一些我不认识的废话代码。有时它只是不完整的数据。我想知道我做错了什么或我没有做什么..

有没有人有同样的问题？我该如何解决？

```
NSURL *siteURL = [NSURL URLWithString:tempSiteString];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                initWithURL:siteURL
                                cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                timeoutInterval:30.0];

NSString *myRequestString = [NSString stringWithFormat:@"data=%@", sqlString];
NSData *myRequestData = [NSData dataWithBytes:[myRequestString UTF8String] length:[sqlString length]];

[request setHTTPMethod: @"POST" ];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
[request setHTTPBody: myRequestData ];

NSURLResponse *response;
NSError *error;
NSData *returnData = [NSURLConnection sendSynchronousRequest: request
                                           returningResponse: &response
                                                       error: &error];

NSString *content = [NSString stringWithUTF8String:[returnData bytes]]; 
```

这是我将接收到的字符串更改为 json 的代码

```
NSDictionary *tempNSDictionary = [resultString JSONValue];
if(tempNSDictionary.count==0)
{
    return nil;
}
//NSLog(@"Check Point after dictionary");
NSArray *tempNSArray;
if(tempNSDictionary)
{
    //NSLog(@"Check Point getArrayFromJsonString 1");
    tempNSArray = [tempNSDictionary objectForKey:@"object_name"];
    //NSLog(@"Check Point getArrayFromJsonString 2");
}

return tempNSArray; 
```

# image - Kinetic JS - 根据鼠标角度旋转图像

> ID：15755318
> 
> 赞同：1
> 
> 时间：2013-04-02T02:57:19.713
> 
> 标签：image, rotation, mouseevent, kineticjs

我正在尝试使用舞台上鼠标的角度在其中心旋转图像。它使用以下方式旋转：

```
 dlayerA1.rotate(degree); 
```

但它飞来飞去而不是在它的中心旋转！完成项目[http://jsfiddle.net/user373721/eHJgJ/](http://jsfiddle.net/user373721/eHJgJ/)。非常感谢您的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:01:56.247

简单的解决方案是您根本没有旋转图像，而是在旋转图层，而且图层的中心为 0,0 ，因此您的图像围绕它旋转。如果您最初将图像设置为 0,0，您会发现它旋转得更好。

尝试这些简单的测试更改：

```
 // reposition the layer
    dlayerA1 = new Kinetic.Layer({x: 50,y: 50});

    //move the image
    dImage1 = new Kinetic.Image({
                x: 0,
                y: 0,
                image: dicom1,
                width: 150,
                height: 150
    });

    //inside handleMouseMove(), switch it to dImage1 being rotated <---- this is the fix that answers your original question
    dImage1.rotate(degree); 
```

# mysql - 耙资产：预编译

> ID：15755321
> 
> 赞同：7
> 
> 时间：2013-04-02T02:57:42.197
> 
> 标签：mysql, ruby-on-rails, windows, postgresql, phpmyadmin

```
C:\Sites\dtr-payroll>rake assets:precompile
rake aborted!
You have already activated rake 10.0.4, but your Gemfile requires rake 10.0.3\. Using bundle exec may solve this.
C:/Sites/dtr-payroll/config/boot.rb:6:in `<top (required)>'
C:/Sites/dtr-payroll/config/application.rb:1:in `<top (required)>'
C:/Sites/dtr-payroll/Rakefile:5:in `<top (required)>'
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T05:01:44.663

你应该先删除你的`Gemfile.lock`文件，`bundle install`然后再使用

```
rake assets:precompile 
```

这是因为您已激活 rake 10.0.4，但在 Gemfile.lock 文件中它是 rake 10.0.3，因此您要么更改它，要么删除 Gemfile.lock 文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-20T08:42:59.443

通过将您的 rake 更新到 10.0.4

```
bundle update rake 
```

那会解决它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T03:31:42.887

请试试

> bundle exec rake assets:precompile

你应该先谷歌它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-20T08:00:22.790

你可以使用 bundle exec rake assets:precompile 如果你更新数据库迁移，你可以使用：bundle exec rake db:migrate

# android - 你可以在没有用户认证的情况下使用 Dropbox api 吗？

> ID：15755322
> 
> 赞同：0
> 
> 时间：2013-04-02T02:57:43.853
> 
> 标签：android, user-interface, dropbox-api

嗨，我是 Android 新手，我想知道您是否可以将您的保管箱用户 ID 和密码保存在常量中。因为我不希望应用程序每次都向用户询问密码，而我只需要一个帐户。这是可能。如果是，那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:11:48.870

对不起，我认为你不能。

请参阅 Android Dropbox Sync Api 示例，其中包含代码中的登录 ID 和密码以及如何从我的应用程序登录到 Dropbox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:51:52.560

**首先，出于安全原因，** [**Dropbox API**](https://www.dropbox.com/developers/core/api)要求开发人员通过一系列 http 连接而不是单个连接连接到其服务器。这种安全方式/方法称为[**OAuth**](http://oauth.net/)。您一定也听说过这个术语。

**其次，**出于安全原因，它**不会**让您有任何机会在代码中保存用户名和密码。相反，系统会提示用户在应用程序远程的授权页面上输入他的凭据（即托管@dropbox.com）。因此，是他们处理身份验证/授权。`access token`如果用户已成功登录（在托管@ dropbox.com 的页面上），您将获得作为指针和返回的内容。

当你有了这个`access token`，**你不需要用户再次提供用户名和密码。**相反，你只需将它发送`access token`到服务器以向服务器确认这个特定用户已经被授权。

[](https://www.dropbox.com/developers/core/api)**将此页面标记为您的答案后，请[**阅读此页面以详细了解该过程。**](https://www.dropbox.com/developers/core/api)：微笑：**

# security - 什么是跨站脚本？

> ID：15755323
> 
> 赞同：25
> 
> 时间：2013-04-02T02:57:54.697
> 
> 标签：security, xss

在[这个网站](http://www.acunetix.com/websitesecurity/cross-site-scripting/)（[存档快照](https://web.archive.org/web/20130320195518/http://www.acunetix.com/websitesecurity/cross-site-scripting/)）的“XSS 理论”下，它说：

> 黑客用他的恶意客户端脚本感染了一个合法的网页

阅读本文时我的第一个问题是：如果应用程序部署在安全的服务器上（例如银行的情况），黑客如何能够访问网页的源代码？或者他/她可以在不访问源代码的情况下注入恶意脚本吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-11T03:33:01.333

使用跨站点脚本，可以感染生成的 HTML*文档*，而不会导致*Web 服务器*本身被感染。XSS 攻击使用服务器作为载体将恶意内容呈现给客户端，或者从请求立即返回（反射攻击），或者通过存储和检索延迟（存储攻击）。

XSS 攻击利用了服务器生成页面的弱点，该弱点允许请求数据以原始形式显示在响应中。该页面仅反映在请求中提交的内容......但该请求的内容可能包含突破普通文本内容的字符并引入开发人员不打算的 HTML 或 JavaScript 内容。

这是一个简单的例子。假设您使用某种模板语言来生成 HTML 页面（如 PHP、ASP、CGI 或 Velocity 或 Freemarker 脚本）。它采用以下页面并将“<?=$name?>”替换为“name”查询参数的未转义值。

```
<html>
<head><title>Example</title></head>
<body>Hi, <?=$name?></body>
</html> 
```

有人使用以下 URL 调用该页面：

```
http://example.com/unsafepage?name=Rumplestiltskin 
```

应该期望看到此消息：

```
Hi, Rumplestiltskin 
```

使用更恶意的内容调用同一页面可用于大幅改变页面或用户体验。

```
http://example.com/unsafepage?name=Rumplestiltskin<script>alert('Boo!')</script> 
```

这个 URL 不仅会说“嗨，Rumplestiltskin”，还会导致页面弹出一条警告消息，上面写着“嘘！”。当然，这是一个简单的例子。可以提供一个复杂的脚本来捕获击键或要求验证名称和密码，或者清除屏幕并用令人震惊的内容完全重写页面。*它看起来*仍然像来自 example.com，因为页面本身确实如此，但*内容*是在请求中的某处提供的，并且只是作为页面的一部分反射回来。

所以，如果页面只是吐出请求者提供的内容，而您正在请求该页面，那么黑客如何感染*您的*请求？通常，这是通过在网页上或通过电子邮件发送给您或在 URL 缩短的请求中提供链接来完成的，因此很难看到 URL 中的混乱。

```
<a href="http://example.com?name=<script>alert('Malicious content')</script>">
Click Me!
</a> 
```

具有可利用 XSS 漏洞的服务器本身不会运行任何恶意代码——它的编程保持不变——但它可以被用来向客户端提供恶意内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T02:30:09.370

该攻击者不需要访问源代码。

一个简单的示例是写入页面的 URL 参数。您可以更改 URL 参数以包含脚本标记。

另一个例子是评论系统。如果网站没有正确清理输入/输出，攻击者可以将脚本添加到评论中，然后将在查看评论的任何人的计算机上显示和执行。

这些都是简单的例子。它还有很多不同类型的 XSS 攻击。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-08T19:32:36.947

最好将脚本视为被注入到错误编码的网页和客户端的 Web 浏览器之间的对话中间。它实际上并没有注入到网页的代码中；而是进入到客户端 Web 浏览器的数据流中。

XSS 攻击有两种类型：

1.  非持久性：这将是一个特制的 URL，它将脚本作为参数之一嵌入到目标页面。讨厌的 URL 可以通过电子邮件发送出去，目的是诱使收件人点击它。目标页面错误地处理了参数，并且无意中将最初通过 URL 字符串传入的代码发送到了客户端机器。
2.  持久性：此攻击使用网站上的一个页面，该页面将表单数据保存到数据库中，而没有正确处理输入数据。恶意用户可以将讨厌的脚本作为典型数据字段（如姓氏）的一部分嵌入在客户端的 Web 浏览器上运行，而在不知不觉中。通常，讨厌的脚本会被存储到数据库中，并在每个客户访问受感染页面时重新运行。

有关简单示例，请参见以下内容：[什么是跨站点脚本 (XSS)？](http://www.thedablog.com/what-is-xss/ "什么是跨站脚本 (XSS)？")

# ruby-on-rails - 我应该使用哪个导轨控制器？

> ID：15755324
> 
> 赞同：1
> 
> 时间：2013-04-02T02:58:14.027
> 
> 标签：ruby-on-rails, controller, rails-routing

在我的应用程序`Users`中可以`Like` `Programs`. 每一个都是一个模型，`Like`是多态的。

在某些时候，我会想看到所有`Users`a`Like`或`Program`所有`Programs`a `User Likes`。

在和控制器中有一个`likes`和`likers`控制器动作会更好吗？或者我应该将控制器作为嵌套资源，同时具有 a和操作（或检查正在使用哪个嵌套资源的索引）？`users``programs``likes``users``programs`

我意识到所有这些都可以工作，但不确定 Rails 的最佳实践是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:10:30.410

我将构建您的应用程序，使其具有返回用户喜欢的 s`UsersController`的成员操作。然后有一个与成员动作，它给出了喜欢那个程序的s。`likes``Program``ProgramsController``likers``User`

为了进一步简化事情，您还可以只在`show`操作中包含用户的喜欢，（同样，在程序的操作中显示喜欢程序的用户`show`），尽管您最终可能会`show`通过执行获取更多信息而不是操作中所需的信息就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:50:13.913

放心，您将拥有一个 LikesController，其中的“创建”操作将采用 user_id 和 program_id。用户很可能会登录（并且不会在 URL 中传递），并且创建一个 Like，将 program_id 传递给看起来像这样的 url 是有意义的：

```
POST /likes, :params => { :program_id => ___ } 
```

您可能想要显示喜欢列表（索引页面），也许允许用户编辑和删除。如果是这种情况，您的所有操作都将在 likes_controller 上进行。通常，这取决于您的情况，但宁静的设计通常是正确的起点。

# c# - 刮薄荷给出“会话已过期”

> ID：15755326
> 
> 赞同：1
> 
> 时间：2013-04-02T02:58:26.073
> 
> 标签：c#, c#-4.0, webclient

我正在尝试使用 WebClient 类在 C# 中执行两个 http Web 请求。第一个是登录 mint.com 的 POST，第二个是 GET，然后从 mint 获取登录用户的交易。我相信我在登录后检索设置的 cookie 并将它们传递到请求中以获取事务，但是它给了我响应：

**‹\b\0\0\0\0\0ÿ\0\0\0ÿÿf\0™ÿ<code>1会话已过期。™ØÒf\0\0\0**

这是代码，任何想法我做错了什么会导致它无法正确设置会话？

```
public static class MintService
    {
        private static string Domain = "https://wwws.mint.com";

        public static void GetTransactions(string userName, string password) {
            var cookies = Login(userName, password);
            var transactionsHtml = DownloadTransactions(userName, cookies);
        }

        private static string Login(string userName, string password) {
            var url = Domain + "/login.event";
            var requestBody = String.Format("validation=%7B%22validators%22%3A%5B%7B%22name%22%3A%22username%22%2C%22func%22%3A%22isNotEmpty%22%2C%22type%22%3A%22inline%22%2C%22validationProperty%22%3A%22isNotBlank%22%2C%22copy%22%3A%22Please+enter+your+email+address.%22%7D%2C%7B%22name%22%3A%22username%22%2C%22func%22%3A%22isEmail%22%2C%22type%22%3A%22inline%22%2C%22validationProperty%22%3A%22isEmail%22%2C%22copy%22%3A%22Please+use+a+valid+email+address.%22%7D%2C%7B%22name%22%3A%22password%22%2C%22func%22%3A%22isNotEmpty%22%2C%22type%22%3A%22inline%22%2C%22validationProperty%22%3A%22isNotBlank%22%2C%22copy%22%3A%22Please+enter+your+password.%22%7D%5D%2C%22validatorn%22%3A2%7D&username={0}&password={1}&remember=T&task=L&timezone=-5&nextPage=&browser=Chrome&browserVersion=26&os=v&clientType=Mint",
                userName.Replace("@", "%40"), password);
            return WebRequestHelper.PostWithCookies(url, requestBody, "application/x-www-form-urlencoded");
        }

        private static string DownloadTransactions(string userName, string cookies) {
            var url = Domain + String.Format("/listTransaction.xevent?queryNew={0}&offset={1}&filterType={2}&comparableType={3}&rnd={4}", 
                "", 0, "cash", 3, "1325292983068");
            var response = WebRequestHelper.Get(url, "text/html", cookies);
            return response;
        }
    }

public static class WebRequestHelper {
        public static string Get(string url, string contentType = "application/json", string cookies = null) {
            using (var client = new WebClient()) {
                AddRequestHeaders(url, client, contentType);
                if (!String.IsNullOrEmpty(cookies))
                    client.Headers.Add(HttpRequestHeader.Cookie, cookies);
                return client.DownloadString(url);
            }
        }

        public static string PostWithCookies(string url, string requestBody, string contentType = "application/json") {
            using (var client = new WebClient()) {
                AddRequestHeaders(url, client, contentType);
                var response = client.UploadString(url, "POST", requestBody);
                return client.ResponseHeaders[HttpResponseHeader.SetCookie];
            }
        }

        private static void AddRequestHeaders(string url, WebClient client, string contentType) {
            client.Headers.Add(HttpRequestHeader.Accept, "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
            client.Headers.Add(HttpRequestHeader.AcceptCharset, "ISO-8859-1,utf-8;q=0.7,*;q=0.3");
            client.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip,deflate,sdch");
            client.Headers.Add(HttpRequestHeader.AcceptLanguage, "en-US,en;q=0.8");
            client.Headers.Add(HttpRequestHeader.UserAgent, "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31");
            client.Headers.Add(HttpRequestHeader.ContentType, contentType);
            if (url.IndexOf("mint.com") > -1) {
                client.Headers.Add(HttpRequestHeader.Host, "wwws.mint.com");
                client.Headers.Add(HttpRequestHeader.Referer, "https://wwws.mint.com/login.event?task=L");
            }
        }
    } 
```

# java - 在 jpanel 上保持绘制的字符串

> ID：15755327
> 
> 赞同：0
> 
> 时间：2013-04-02T02:58:32.843
> 
> 标签：java, swing, awt

我正在尝试一次在屏幕上打印一个整数数组的内容，但将先前的元素保留在屏幕上，我该怎么做？这就是我目前所拥有的，它打印每个元素，但不会将之前的元素保留在屏幕上

```
import javax.swing.*;  
import java.awt.*;  

class test extends JFrame  
{  
  JPanel panel;  
  public static void main(String[] args)  
  {  
      test obj = new test();  
      obj.makeAnim();  
  }  
  public void makeAnim() {  
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  
      setTitle("Animate");
      setResizable(false);  
      setSize(400,400);  

      Animate arr1 = new Animate();  
      Animate arr2 = new Animate();  
      //arr1.add(arr2);  
      getContentPane().add(arr1);  
      setVisible(true);  
      new Thread(arr1).start();  
      //new Thread(arr2).start();  
  }  
}  
class Animate extends JPanel implements Runnable  
{  
  int j = 1;
  int [] a = {1,2,3,5,6,7,2,1,10,99};  
  String temp; 

  public Animate()  
  {  
     setPreferredSize(new Dimension(400,400));  
  }  
  public void run()  
  {  
   for (int i = 0; i < 10; i++) {  

        temp = Integer.toString(a[i]);
        j++;
        repaint();  

        try {  
            Thread.sleep(2000);  
        } catch (Exception ex) {}  
    }  
  }  
  public void paintComponent(Graphics g)  
  {  

    super.paintComponent(g); 
    g.setColor(Color.red);
    g.setFont(new Font("Courier",Font.PLAIN, 20));
    g.drawString(temp, (50+(j*10)), 50);

  }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:14:15.470

您面临许多问题。

Swing 中的绘画是无状态的，这意味着之前在一个周期中绘制的内容将不会出现在下一个周期中，除非您实际绘制它。

查看[在 AWT 和 Swing中](http://www.oracle.com/technetwork/java/painting-140037.html)[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和绘画以了解更多详细信息。

除非你同步你的线程和绘制例程（这是不可取的），你不应该改变绘制方法可能依赖于事件调度线程之外的任何变量的状态。

而不是使用 a`Thread`你应该使用 a `javax.swing.Timer`。

您可能会发现[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)和[Initial Threads](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)中的并发信息丰富

您不应该依赖“神奇的”数字（例如字符宽度偏移），而应该依赖底层系统为您提供有用的提示。在这种情况下，您需要查看[`FontMetrics`](http://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html)

您还应该避免使用`setPreferredSize`和覆盖`getPreferredSize`

以下是我如何解决相同问题的示例...

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

class TestPaint02 extends JFrame {

    JPanel panel;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                TestPaint02 obj = new TestPaint02();
                obj.makeAnim();
            }
        });
    }

    public void makeAnim() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("Animate");
        setResizable(false);
        setSize(400, 400);

        Animate arr1 = new Animate();
        getContentPane().add(arr1);
        setVisible(true);
    }

    public class Animate extends JPanel {

        int i = 0;
        int[] a = {1, 2, 3, 5, 6, 7, 2, 1, 10, 99};

        public Animate() {
            Timer timer = new Timer(2000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    i++;
                    repaint();
                    if (i >= a.length) {
                        ((Timer) e.getSource()).stop();
                    }
                }
            });
            timer.setRepeats(true);
            timer.setInitialDelay(0);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.red);
            g.setFont(new Font("Courier", Font.PLAIN, 20));
            FontMetrics fm = g.getFontMetrics();
            int x = 50;
            int y = 50;
            for (int loop = 0; loop < i; loop++) {
                g.drawString(String.valueOf(a[loop]), x, y);
                x += fm.stringWidth(String.valueOf(a[loop]));
            }
        }
    }
} 
```

# macos - 在 OS X 上防止屏幕变暗和显示睡眠

> ID：15755328
> 
> 赞同：2
> 
> 时间：2013-04-02T02:58:38.193
> 
> 标签：macos, cocoa, power-management, iokit

我正在为 OS X 10.7 及更高版本制作一个播放视频的应用程序。任何文档都可以使用标准的全屏命令全屏显示。

只要我的应用程序中的任何文档正在播放，我就想阻止自动屏幕变暗并显示睡眠。

理想情况下，所有播放视频的结束（或暂停）应启动全屏休眠计时器——3 分钟的显示屏休眠延迟不应在最后一个视频结束后 1 分 37 秒用完，这仅仅是因为某些东西正在检查或中断每 3 分钟计时一次。

我也不想完全禁用显示睡眠。如果我的程序崩溃或被强制退出或断电，用户的显示睡眠设置应保持不变。

确保播放不被视为“空闲”的最佳方法是什么，但一旦播放完成，空闲后显示睡眠正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T05:57:31.183

在播放期间使用[IOPMAssertionCreateWithName()](https://developer.apple.com/library/mac/qa/qa2004/qa1340.html)进行电源断言，并在完成后释放它。电源断言[正确处理意外的进程终止](https://developer.apple.com/library/mac/releasenotes/Darwin/RN-IOKitPowerManagment/index.html)：

> 断言应该使用 IOPMAssertionRelease 发布。但是，即使没有正确释放，断言也会在进程退出、死亡或崩溃时自动释放。崩溃的进程不会无限期地阻止空闲睡眠。

# apache-flex - 蒙版应用于旋转对象时会自动旋转

> ID：15755338
> 
> 赞同：1
> 
> 时间：2013-04-02T03:00:56.193
> 
> 标签：apache-flex, masking, rotatetransform

我有以下问题：我在一个组上绘制一个形状，用作蒙版。然后，我使用 Rotate3D 在 x、y、z 中旋转图像，并将组用作图像的蒙版，但结果不是我想要的，因为一旦组成为图像的蒙版，它也会获得其旋转。我想要实现的是根据我绘制的形状获得旋转图像的一部分。如何在不旋转面膜的情况下使用面膜？或者这可以通过其他方式完成吗？

这是代码：

```
 grpMask = new Group();
    g = grpMask.graphics;
    g.lineStyle(0, 0x00FF00);
    g.moveTo(points[0].x, points[0].y);
    g.beginFill(0x00FF00, .3);
    for (var i:int; i < points.length - 1; i++)
    {
       g.lineTo(points[i + 1].x, points[i + 1].y);
    }
    g.endFill();
    grpCanvas.addElement(grpMask); 
```

然后我设置`imgTarget.mask = grpMask`. 对于 imgTarget，已经应用了几个 Rotate3D 效果，不幸的是这些效果传递给了蒙版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T18:28:56.690

一种解决方案是将要旋转的对象添加到容器类中，例如 a`Sprite`或 a `Group`。然后将蒙版应用于容器，而不是旋转的对象：

```
var container:Group = new Group();
container.addElement(roatatedObject);
container.mask = maskObject;
container.addElement(maskObject); 
```

或者

```
var container:Sprite = new Sprite();
container.addChild(rotatedObject);
container.mask = maskObject;
container.addChild(maskObject); 
```

# python - python在运行另一个代码之前运行一些代码

> ID：15755343
> 
> 赞同：0
> 
> 时间：2013-04-02T03:01:24.157
> 
> 标签：python, mysql, email

我对python编程很陌生，请放轻松！

我正在查询我的 MySQL 数据库并将输出写入文件并发送结果的电子邮件。但是，电子邮件是在写入文件之前发送的。在发送电子邮件**之前**，如何告诉我的代码进行查询并写入文件？

```
#!/usr/bin/python
# Import smtplib for the actual sending function
import smtplib
import MySQLdb as mdb
import sys
import csv

con = mdb.connect('localhost', 'myuser', 'mypassword', 'mydatabase');
with con:
    cur = con.cursor()
    cur.execute("SELECT * from vw_mail")
    rows = cur.fetchall()
c = csv.writer(open('/home/pi/mail.csv','wb'))
c.writerows(rows)

# Import the email modules we'll need
from email.mime.text import MIMEText

# Open a plain text file for reading.  For this example, assume that
# the text file contains only ASCII characters.
fp = open('/home/pi/mail.csv','rb')
# Create a text/plain message
msg = MIMEText(fp.read())
fp.close()

# me == the sender's email address
# you == the recipient's email address
msg['Subject'] = 'MySubject'
msg['From'] = 'me@me.com'
msg['To'] = 'you@you.com'

# Send the message via our own SMTP server, but don't include the
# envelope header.
s = smtplib.SMTP('smtp.me.com')
s.sendmail('me@me.com','you@you.com', msg.as_string())
s.quit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:03:03.483

之后数据不会刷新到磁盘`c.writerows(rows)`。参考[这里](https://stackoverflow.com/questions/3976711/csvwriter-not-saving-data-to-file-why)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:03:29.110

您的问题源于这样一个事实，即当您进行匿名打开时，如下所示：

```
c = csv.writer(open('/home/pi/mail.csv','wb')) 
```

当程序结束时，Python 将关闭打开的文件，此时它看起来好像它实际上已写入磁盘。

要解决此问题，请使用 打开文件`with statement`，这将自动为您关闭文件：

```
with open('/home/pi/mail.csv','w') as the_file:
    c = csv.writer(the_file)
    c.writerows(rows) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:48:34.720

看来您对“with”语句不熟悉，[这里](http://effbot.org/zone/python-with-statement.htm)有一篇关于它的帖子。

在您的情况下，您可以这样做：

```
class query_database_and_mail：
    def __enter__(self):
        con = mdb.connect('localhost', 'myuser', 'mypassword', 'mydatabase');
        return con

    def __exit__(self):
        #put your send-email codes here 

with query_database_and_email() as con:
    cur = con.cursor()
    cur.execute("SELECT * from vw_mail")
    rows = cur.fetchall()
    c = csv.writer(open('/home/pi/mail.csv','wb'))
    c.writerows(rows) 
```

没有人会难为您，所以请放松并随意提问：)

# vb.net - 获取类中实现的接口

> ID：15755347
> 
> 赞同：0
> 
> 时间：2013-04-02T03:02:11.643
> 
> 标签：vb.net, interface

有没有办法为类中实现的每个接口获取参考？

例如，我有一堂课；

```
Class ExampleClass1
    Implements IInterfaceI
    Implements IInterface2

End Class 
```

我可以获取每个接口的引用，以便我可以将其存储以在另一个类中使用吗？

```
Class ExampleClass2

    Private interface1Implementer as IInterface1
    Private interface2Implementer as IInterface2

End Class 
```

而当我调用每个接口中的方法时，会调用ExampleClass1实现的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:09:12.393

您应该能够使用：

```
Dim Instance As New ExampleClass1()
Dim Interface1Implementer As IInterface1 = Instance 
Dim Interface2Implementer As IInterface2 = Instance 
```

# java - 用于保存映射到数组的值的 Java 数据结构

> ID：15755349
> 
> 赞同：0
> 
> 时间：2013-04-02T03:02:52.230
> 
> 标签：java, data-structures, mapping

我有点迷失了使用哪种数据结构来有效地解决我的问题。我想将一个数组映射到一个值。我的意思是，如果我有 1000 个值，我需要能够将多个其他值映射到 1000 个值中的每一个。

例如，

我有 1-1000 的 1000 A 值。对于每个值 A，我想映射 k 个其他值 B（这些范围也在 1-1000 之间）。但我确实想确保映射到 A 的任何值都不是重复的。不同A值之间的映射值可以相同（即2和1000都有67映射到它们）。

```
 1 -> 138, 92, 835, 841, 12
    2 -> 766, 324, 26, 933, 62
    3 -> 53, 131, 62, 121, 67
    4->160, 160 #NOT OK
    4-> 162, 171, 594, 912, 455
    ...
    1000->146, 981, 67, 246, 146 
```

因此，当我查看某个任意值 A 时，我应该能够轻松识别映射到它的任何值。因此，如果我想访问值 3，我应该能够打印出值 A (3) 及其相关值（53、131、62、121、67）。

我希望这是有道理的。实现这种数据结构的最佳方法是什么？任何解释或示例的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:05:17.633

采用

```
Map<Long, Set<Long>> numberToValuesMap; 
```

`Set`为了独特性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:10:20.690

你想要一个集合的数组列表：

```
ArrayList<Set<Long>> 
```

Set 要求值在集合中只有一次，当然列表是这些集合的列表。

然后，您可以使用`get(index)`ArrayList 上的方法来获取特定的序数。

```
ArrayList<Set<Number>> mappings = new ArrayList<Set<Long>>();

Set<Long> s = new HashSet<Long>();
long[] n = {138, 92, 835, 841, 12};
s.addAll( Arrays.toList( n));
mappings.add(1, s);
// etc. 
```

稍后，要获取：

```
Set<Long> result = mappings.get(1); // for element in slot 1... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:16:05.760

如果你有连续的值（甚至接近连续的），那么你不需要“映射” - 你可以使用一个简单的数组数组：

```
int[][] a = new int[1001][]; 
```

然后为每个值创建一个 int 数组：

```
a[1] = new int[]{138, 92, 835, 841, 12}; 
```

ETC

# php - wordpress 中的 Codeigniter 会话

> ID：15755354
> 
> 赞同：1
> 
> 时间：2013-04-02T03:03:32.797
> 
> 标签：php, wordpress, codeigniter

我在 codeigniter 中开发了一个网站，并为博客集成了 wordpress。我的问题是，如果我登录该站点，我将无法在 wordpress 博客中使用 codeigniter 会话值。

在 Codeigniter 中，一旦我登录，我将使用 codeigniter 会话设置以下会话。

```
$this->session->set_userdata('get_user_session', $auD); 
```

现在我需要在 wordpress 头文件或索引文件中使用会话。我在wordpress中尝试了以下代码。

```
session_start();
print_r($_SESSION); 
```

我没有得到上述 ci 会话值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:36:57.307

CodeIgniter 的[Session 类](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html "会话类")：

`>> stores session information for each user as serialized (and optionally encrypted) data in a cookie`.

您设置的值`$this->session->set_userdata('key','value')`不会出现在`$_SESSION`变量中。

CodeIgniter 还支持将会话内容存储在数据库中。

您可以使用该配置来检索 WordPress 博客中的会话数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-18T07:12:49.687

使用 COOKIES 获取会话数据。请参阅此链接：[https ://thomashunter.name/blog/accessing-codeigniter-session-data-using-external-scripts/](https://thomashunter.name/blog/accessing-codeigniter-session-data-using-external-scripts/)

```
require_once("config.php");
$cisess_cookie = $_COOKIE['ci_session'];
$cisess_cookie = stripslashes($cisess_cookie);
$cisess_cookie = unserialize($cisess_cookie);
$cisess_session_id = $cisess_cookie['session_id'];

$cisess_connect = mysql_connect(MYSQL_HOSTNAME, MYSQL_USERNAME, MYSQL_PASSWORD);
if (!$cisess_connect) {
 die("<div class="error">" . mysql_error() . "</div>");
}
$cisess_query = "SELECT user_data FROM ci_sessions WHERE session_id = '$cisess_session_id' LIMIT 1";

mysql_select_db(MYSQL_DATABASE, $cisess_connect);
$cisess_result = mysql_query($cisess_query, $cisess_connect);
if (!$cisess_result) {
 die("Invalid Query");
}
$cisess_row = mysql_fetch_assoc($cisess_result);
$cisess_data = unserialize($cisess_row['user_data']);
print_r($cisess_data); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-13T10:10:34.040

我在 wp-config.php 中使用以下代码并为我工作。

将会话存储在数据库中的 Codeigniter 中。

Codeigniter 版本 3.xx

```
define('BASEPATH', 2021);
require_once(__DIR__.DIRECTORY_SEPARATOR.'panel'.DIRECTORY_SEPARATOR.'application'.DIRECTORY_SEPARATOR.'config'.DIRECTORY_SEPARATOR."database.php");
$cisess_cookie = $_COOKIE['ci_session'];

$cisess_connect = mysqli_connect($db[$active_group]['hostname'], $db[$active_group]['username'], $db[$active_group]['password']);
if (!$cisess_connect) {
    die("<div class='error'>" . mysqli_error($cisess_connect) . "</div>");
}
$cisess_query = "SELECT data FROM sessions WHERE id = '$cisess_cookie' LIMIT 1";

mysqli_select_db($cisess_connect,$db[$active_group]['database']);
$cisess_result = mysqli_query($cisess_connect,$cisess_query);
if (!$cisess_result) {
    die("<div class='error'>" . mysqli_error($cisess_connect) . "</div>");
}
$cisess_row = mysqli_fetch_assoc($cisess_result);
$session_data = $cisess_row['data'];

$return_data = array();
$offset = 0;
while ($offset < strlen($session_data)) {
    if (!strstr(substr($session_data, $offset), "|")) {
        throw new Exception("invalid data, remaining: " . substr($session_data, $offset));
    }
    $pos = strpos($session_data, "|", $offset);
    $num = $pos - $offset;
    $varname = substr($session_data, $offset, $num);
    $offset += $num + 1;
    $data = unserialize(substr($session_data, $offset));
    $return_data[$varname] = $data;
    $offset += strlen(serialize($data));
}
print_r($return_data);
exit; 
```

# twitter - Yahoo Pipes RSS：将链接复制到 Twitter 搜索的循环结果

> ID：15755356
> 
> 赞同：0
> 
> 时间：2013-04-02T03:03:43.743
> 
> 标签：twitter, rss, yahoo-pipes

我正在使用 Yahoo 管道使用 RSS 提要的描述字段中的术语进行自动 Twitter 搜索。

Pipes 从提要中的每个项目进行一次搜索。每次搜索都会返回一组结果，这些结果被分配为 item.twitloop（所有结果）

我想将结果中每个项目的链接替换为原始查询项目的链接；

到目前为止，我只能将原始链接分配给结果列表中的第一个项目，而不是每个项目。

[http://pipes.yahoo.com/pipes/pipe.edit?_id=01f5f60eb8f3c22b45aa3708e5ae057a](http://pipes.yahoo.com/pipes/pipe.edit?_id=01f5f60eb8f3c22b45aa3708e5ae057a)

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T02:09:48.377

管道没有为我加载 - 也许您没有将其设置为公开？无论如何，我过去通过使用 Loop 模块解决了类似的问题。您将分配放入循环中（通常字符串生成器效果很好），然后让循环将原始链接放入 item.link。

# ruby-on-rails - Ruby 事件触发器

> ID：15755359
> 
> 赞同：1
> 
> 时间：2013-04-02T03:03:57.130
> 
> 标签：ruby-on-rails, ruby, oop

我正在寻找一种数据结构或设计模式来处理轨道和活动记录，以提供一种基于实时事件制作可配置事件和事件触发器的方法。

虽然这不是此类系统的最终用途，但我相信以下示例演示了我正在尝试做的事情。类似于 splunk 之类的日志监控系统，基本上我要做的是创建一个系统，我可以在其中从对象中获取一些属性，然后将其与所需值进行比较，如果评估为真，则执行操作。

是否有图书馆可以做到这一点，或者需要从头开始推出一些东西。我考虑设计它的方式类似于以下内容：

我会有一个 Actor（不是传统的并发意义上的）来容纳我想要比较的属性。然后我会有一个 Trigger 模型，它有一个指向 actor_id、属性（IE 计数）、比较器（<、<=、==、>=、>）、value 和 action_id 的指针。action_id 将指向一个具有 perform 方法的对象，该方法仅包含触发触发器时需要运行的代码。

所以最后触发器将评估为：

```
action.perform if actor.send(attribute) comparator value 
```

另一种选择，可能是更标准的选择，似乎开发了一种 DSL（Facebook 的 IE FQL）。这会是一种更好、更灵活的方法吗？

这是图书馆可以处理的事情，或者如果不是，这对于像我提议的系统这样的系统来说是一个体面的结构吗？

编辑：看起来 DSL 可能是最灵活的方式。[用 Ruby 编写 DSL 的教程](https://stackoverflow.com/questions/4936146/tutorials-for-writing-dsl-in-ruby)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:24:36.353

如果我正确理解了这个问题，那么您所写的内容几乎是正确的。您可以将比较运算符作为符号发送，如下所示：

```
comparator = :>
action.perform if actor.send(attribute).send(comparator, value)
# action will perform if actor's attribute is greater than value 
```

# ruby-on-rails - 如何根据关联的模型条件进行查询？

> ID：15755360
> 
> 赞同：0
> 
> 时间：2013-04-02T03:04:00.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我有以下内容：

```
Groups: id, title
GroupMembers: id, group_id, name 
```

组有很多 group_members

如何查询数据库以获取至少有 2 个 GroupMembers 的所有组？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:08:12.513

试试这个：

```
Group.joins("(
  SELECT group_id 
  FROM group_members
  GROUP BY group_id
  HAVING COUNT(1) > 1
 ) a ON a.member_id = groups.id") 
```

# c - 在 C 中填充动态分配数组的指针算法

> ID：15755361
> 
> 赞同：0
> 
> 时间：2013-04-02T03:04:02.543
> 
> 标签：c, pointers, dynamic, malloc, allocation

我分配了一个数组，`malloc`然后尝试使用 for 循环和指针算法填充它，但由于某种原因它不起作用。

```
int* myArray = (int*)malloc(100*sizeof(int));

for (int i = 0; i < 100 ; i++)
{
    *myArray = i;
    myArray++;      
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T03:08:05.660

当您这样做时，`myArray++`您会丢失指向已分配内存的原始指针。

相反，您可能应该这样做：

```
*(myArray + i) = i; 
```

甚至只使用普通的数组索引：

```
myArray[i] = i; 
```

# mysql - 使用触发器更新 DATETIME，在 MySQL 中得到错误 1442

> ID：15755363
> 
> 赞同：0
> 
> 时间：2013-04-02T03:04:06.310
> 
> 标签：mysql, triggers, mysql-workbench, mysql-error-1442

我在使用 MySQL 中的触发器时遇到问题。我有一个名为“last_modified”的列，我希望在编辑表格时使用当前日期和时间自动更新。使用触发器，这是我的 SQL 查询：

```
delimiter //
CREATE TRIGGER trg_update_responders BEFORE UPDATE ON survey_responders
FOR EACH ROW
BEGIN
UPDATE survey_responders
SET NEW.last_modified = CURRENT_DATETIME();
END;// 
```

但是，当我更新表时，例如使用此查询：

```
UPDATE survey_responders SET first_name = "bob" WHERE id = "1"; 
```

MySQL Workbench 显示错误 1442：“无法更新存储函数/触发器中的表 'table_name'，因为它已被调用此存储函数/触发器的语句使用”

我已经查看了具有相同错误的类似问题，但仍未修复它。帮助表示赞赏。

** 更新 **

这成功了：

```
delimiter //
CREATE TRIGGER trg_update_responders BEFORE UPDATE ON survey_responders
FOR EACH ROW
BEGIN
SET NEW.last_modified = CURRENT_TIMESTAMP();
END;// 
```

好像我根本不需要重复

```
UPDATE survey_responders 
```

并且 CURRENT_DATETIME() 不存在，我不得不使用 CURRENT_TIMESTAMP()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:27:50.727

这成功了：

```
delimiter //
CREATE TRIGGER trg_update_responders BEFORE UPDATE ON survey_responders
FOR EACH ROW
BEGIN
SET NEW.last_modified = CURRENT_TIMESTAMP();
END;// 
```

好像我根本不需要重复

```
UPDATE survey_responders 
```

并且 CURRENT_DATETIME() 不存在，我不得不使用 CURRENT_TIMESTAMP()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:33:59.670

使用触发器无法执行您尝试做的事情。

> 在存储的函数或触发器中，不允许修改调用函数或触发器的语句已经使用（用于读取或写入）的表。

[来源](http://dev.mysql.com/doc/refman/5.0/en/stored-program-restrictions.html)

您需要以其他方式执行此操作。

见这里：[MySQL - 插入后更新同一个表的触发器](https://stackoverflow.com/questions/12877732/mysql-trigger-for-updating-same-table-after-insert)

> 典型的方法是创建一个存储过程，插入/更新目标表，然后更新其他行，所有这些都在一个事务中。

# c# - Long/Lat to World Tile：y 值始终为 NaN

> ID：15755368
> 
> 赞同：0
> 
> 时间：2013-04-02T03:04:44.747
> 
> 标签：c#

我正在尝试使用[此处找到的算法计算世界以平铺位置](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#C.23)

**我的问题：**当我使用有效的长纬度坐标运行函数时，y 值始终为 NAN。出了什么问题？

经纬度长坐标是：-33.752000f，151.239000f，这是澳大利亚的有效位置。

你知道出了什么问题吗？

```
static public Vector2 WorldToTilePos(double lon, double lat, int zoom)
{
    Vector2 p = new Vector2();
    p.x = (float)((lon + 180.0) / 360.0 * (1 << zoom));
    p.y = (float)((1.0 - Math.Log(Math.Tan(lat * Math.PI / 180.0) + 
        1.0 / Math.Cos(lat * Math.PI / 180.0)) / Math.PI) / 2.0 * (1 << zoom));
    Debug.Log (String.Format ("p.y: {0}, lat: {1}", p.y, lat));
    // Always outputs: "p.y: NaN, lat: 151.238998413086"

    return p;
}

// Usuage
Vector2 pos = WorldToTilePos(-33.752000f, 151.239000f, 18); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:21:25.317

错误来自`Math.Log`用负数调用，这给了你`NaN`. 问题是`lat`并且`long`没有有效值。从[您链接的网站](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Derivation_of_tile_names)：

```
- x = lon
- y = arsinh(lat) = log[tan(lat) + sec(lat)]
  (lat and lon are in radians) 
```

**编辑：**如果我理解正确，我认为你是在给予相反`lon`的`lat`顺序。不是`WorldToTilePos(151.239000f,-33.752000f, 18)`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:15:07.950

的输入值`Math.Log`不能小于 0。所以

```
Math.Log(x) = NaN   // for x<0 
```

# iphone - 如何在ios中获取最后拨打的号码？

> ID：15755372
> 
> 赞同：1
> 
> 时间：2013-04-02T03:05:01.517
> 
> 标签：iphone, ios, objective-c, xcode

我想从 iphone 以编程方式最后拨打的号码（或当前呼叫）。我试过了

以下代码。但它产生一个空值。

```
-(NSString*)lastDialledNumber   {

    NSString *path = @"/var/mobile/Library/Preferences/com.apple.mobilephone.plist";
    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];
    NSString *lastDialed = [NSString stringWithFormat:@"%@", [dict valueForKey:@"DialerSavedNumber"]];
    return (([lastDialed isEqualToString:@""])?@"":lastDialed);

}

How can I solve this? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:47:22.510

iPhone 通话记录存储在“call_history.db”中，该文件位于以下路径：

```
/private/var/root/Library/CallHistory/call_history.db

There are other important databases on the iPhone, some of which are accessible and some are not. We can find that out using the following piece of code. This basically enumerates the system folder and subfolders and finds databases that are readable:

NSFileManager *fileManager = [NSFileManager defaultManager]; 
NSDirectoryEnumerator *dirnum = [[NSFileManager defaultManager] enumeratorAtPath: @"/private/"]; 
NSString *nextItem = [NSString string]; 
while( (nextItem = [dirnum nextObject])) {
    if ([[nextItem pathExtension] isEqualToString: @"db"] || 
        [[nextItem pathExtension] isEqualToString: @"sqlitedb"]) { 
        if ([fileManager isReadableFileAtPath:nextItem]) { 
            NSLog(@"%@", nextItem); 
        } 
    } 
} 
```

以下链接可能对您有所帮助：

```
http://iosstuff.wordpress.com/2011/08/19/accessing-iphone-call-history/ 
```

# labview - 为什么我的labview波形中脉冲的脉冲宽度和频率不正确？

> ID：15755377
> 
> 赞同：0
> 
> 时间：2013-04-02T03:05:24.303
> 
> 标签：labview, waveform

在下图中，您会看到我将脉冲频率设置为 50 Hz，将脉冲宽度设置为 2ms。占空比计算为 10%，输入信号模拟器。

![在此处输入图像描述](https://i.stack.imgur.com/MUZfw.jpg)

当我执行labview程序时，我得到的波形如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/nHsIB.jpg)

这个波形显然是不正确的，因为脉冲宽度和脉冲频率似乎都在 10 毫秒左右。

以下是后面板接线图。

![在此处输入图像描述](https://i.stack.imgur.com/aY0VJ.jpg)

我的采样率设置为 200000Hz。

为什么我的脉搏没有正确显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T06:58:08.903

您尚未将占空比添加到函数发生器。因此它将使用默认的占空比 (50 %)。

# azure - Azure 部署失败

> ID：15755380
> 
> 赞同：1
> 
> 时间：2013-04-02T03:05:35.983
> 
> 标签：azure, azure-deployment

我在使用天蓝色部署时遇到了麻烦。我正在使用 vs2012 终极版。部署后它会停止/回收。在模拟器中本地运行良好。

它是一个 mvc4 站点，从我读到的每个人都指向缺少的 dll 未包含在部署中。

据我所知，我认为我在所有必需的 dll 上都选择了“复制到本地”

是否有列出 mvc4 应用程序的最低要求的列表？

我的部署每次大约需要 20 分钟才发现它们失败了。我已经跳上服务器并查看了事件查看器，但没有有用的信息。

任何人都可以通过让我知道如何找到问题的根源来提供帮助吗？是否有一些神奇的日志有人会给我一些有用的东西。

# ipad - 如何像 iPad 上的音乐应用那样构建方形叠加层的呈现方式？

> ID：15755381
> 
> 赞同：1
> 
> 时间：2013-04-02T03:05:36.270
> 
> 标签：ipad, uiviewcontroller, childviewcontroller

我需要创建一个界面，该界面与 iPad Music 应用程序在专辑选项卡中显示曲目列表的方式基本相同——视图中心的一个正方形包含视图控制器的视图，播放控件仍可在顶部访问。点击视图周围的灰色区域应将其关闭。

我将如何在仍然支持 iOS 5 的同时做到这一点？它只是创建视图控制器并将其视图添加为子视图的情况吗？或者我应该对视图控制器遏制做些什么？

我附上了一张截图来说明我的意思（涂抹以隐藏品牌等）。中心的白色方块需要能够包含各种视图控制器，通常由导航控制器管理。

![在此处输入图像描述](https://i.stack.imgur.com/bg3Tn.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:11:13.850

Most likely, Music just presents a modal view controller using [`UIModalPresentationFormSheet`](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW15). You can do this either programmatically or in a storyboard segue -- see the "presentation" popup in the inspector when you select the segue.

# vb.net - 我不知道如何使用循环和计数器

> ID：15755382
> 
> 赞同：0
> 
> 时间：2013-04-02T03:05:44.137
> 
> 标签：vb.net

我需要创建一个可以搜索用户想要搜索的字母的程序。用户将在文本框中写下一些内容，当他/她按下搜索时，会出现一个输入框，要求他在输入框上写一个字母。然后程序会告诉您该字母出现在文本框中的时间很多。这是我到目前为止所拥有的：

```
Public Class Form1

    Private Sub BtnClear_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnClear.Click
        TxtboxInput.Clear()
    End Sub

    Private Sub BtnQuit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnQuit.Click
        Me.Close()
    End Sub

    Private Sub BtnSearch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnSearch.Click
        Dim intStartIndex As Integer
        Dim intFoundIndex As Integer
        Dim counter = 0
        Dim hitcounter = 0
        Dim blnFlag = True
        Try

            InputBox(" Enter Letters", "Input Needed")
        Catch
        End Try
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:23:12.047

我不确定您到底要做什么，但是如果您将其限制为单个字符，那么这样的事情应该可以工作。

```
Private Sub BtnSearch_Click(sender As System.Object, e As System.EventArgs) Handles BtnSearch.Click
    Dim counter = 0
    Try
        Dim search As String = InputBox(" Enter Letters", "Input Needed")
        For Each c As Char In TxtboxInput.Text
            If c.ToString = search Then
                counter += 1
            End If
        Next
    Catch
    End Try
End Sub 
```

# knockout.js - ko.observable 在 Durandal/KO/breeze 中未更新

> ID：15755385
> 
> 赞同：1
> 
> 时间：2013-04-02T03:06:22.367
> 
> 标签：knockout.js, breeze, durandal

我是 Durandal/breeze/knockout 的新手，并试图在项目中使用它们，但我很早就被卡住了。

目前我有一个单一的视图（#/household/new）来创建一个新的家庭。我从 api 中获取了微风元数据，然后运行 ​​EntityManager.createEntity('Household')，这将返回一个我期望的家庭对象。

然后我设置 StreetAddress 属性的值并更新 ko.observable (vm.household(hse))。一旦视图显示 observable 就不起作用。我现在的视图模型非常简单，一个文本输入，一个 div。它们都有与 StreetAddress 属性的数据绑定，但它们都没有更新，也没有以我设置的默认值开始。

奇怪的是，在帮助我更接近解决方案的过程中，我没有遇到任何错误。我真的不知道我哪里错了。任何帮助都会非常好。下面是我尝试使用的代码。

**新户观**

```
<div>
    <h3>New Household Details</h3>
    <div data-bind="text: household.StreetAddress"></div>
    <input type="text" data-bind="value: household.StreetAddress" />
</div> 
```

**新的家庭视图模型：**

```
define(function (require) {
    var router = require('durandal/plugins/router');
    var mainDataservice = require('dataservices/mainDataservice');
    var system = require('durandal/system');

    var vm = {
        router: router,
        activate: activate,
        household: ko.observable()
    };    
    return vm;

    function activate() {
        return system.defer(function (dfd) {
            var hse = mainDataservice.createHousehold();
            hse.StreetAddress("1234 Main Street");
            vm.household(hse);            
            dfd.resolve();
        }).promise();
    }
}); 
```

**主数据服务**

```
define(function (require) {

    var serviceName = 'api/mainDataservice', // route to the Web Api controller
        manager = new breeze.EntityManager(serviceName);

    return {
        manager: manager,
        activate: function () {
            //I call this manually at the start of the application
            return manager.fetchMetadata();
        },

        createHousehold: function () {
            return manager.createEntity('Household');
        }
    };
}); 
```

**家庭实体框架模型**

```
public partial class Household
{    
    [Key]
    [Required]
    [Display(Name = "Household ID")]
    public int HouseholdID { get; set; }

    [StringLength(50)]
    [Display(Name = "Street Address")]
    public string StreetAddress { get; set; }

    [StringLength(50)]
    [Display(Name = "City")]
    public string City { get; set; }

    [StringLength(2)]
    [Display(Name = "State")]
    public string State { get; set; }

    [StringLength(10)]
    [Display(Name = "Zipcode")]
    public string Zipcode { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:41:23.147

因为它是一个可观察对象（它是一个函数），所以当你想在表达式中获取它的值时，`household`你需要像函数一样使用它（即你需要输出）：`()`

```
<div>
    <h3>New Household Details</h3>
    <div data-bind="text: household().StreetAddress"></div>
    <input type="text" data-bind="value: household().StreetAddress" />
</div> 
```

注意1：你不需要`()`after，`StreetAddress`因为KO可以自动解包表达式的最后一个属性。

Not2：你不会收到错误，因为`household`存在所以调用它是有效的，`household.StreetAddress`它只是返回`undefined`，所以你不会在 UI 上看到任何东西

# grails - 可以使用注释来保持 Groovy/Grails 代码干燥吗？

> ID：15755386
> 
> 赞同：0
> 
> 时间：2013-04-02T03:06:31.517
> 
> 标签：grails, groovy, controller, annotations, dry

我正在使用 Grails 2.2.0 来建立一个网站，并且我正在寻找关于保持我的代码 DRY 的最佳实践/建议。这是我第一次使用 Grails，我对 Groovy 和 Grails 都有一定的了解，但无论如何我都不是专家。我确实来自 Java+Spring 背景。

我有虚 URL 作为要求。本质上，URI 被用作查找所需模型的键。如果找不到，请重定向到主页。如果确实存在，它将在控制器操作的帮助程序中使用（由闭包指示，仅在存在时执行）。这是我当前（工作）来源的经过消毒的示例：

UrlMappings.groovy：

```
"/$groupName/dashboard"(controller: "dashboard", action: "viewAll")
"/$groupName/dashboard/create"(controller: "dashboard", action: "createRecord")
"/$groupName/foo/$action?"(controller: "foo") 
```

BaseController.groovy：

```
Group requireGroupFromUrl(Closure c) {
  if (params.groupName == null) {
    redirect(controller: "home", action: "index")
    return
  }
  else {
    Group group = Group.findByUrlName(params.groupName)
    if (group == null) {
      redirect(controller: "home", action: "index")
      return
    }

    c.call(group)
  }
} 
```

DashboardController.groovy 扩展了 BaseController：

```
def viewAll() {
  requireGroupFromUrl({ Group group -> gymHelper(group)})
}

def viewAllHelper(Group group) {

  // some logic involving 'group'

  def map = [groupInstance: group, /* OTHER CALCULATED/QUERIED PARAMS*/ ]
  render(view: "/groupView", model: map)
} 
```

这行得通。然而，似乎对辅助方法的需求很笨拙。

乍一看，过滤器似乎可以完成这项工作，但是我需要指定要从过滤器中排除哪些路径（/、/login、/register 等），这似乎使其与网址映射。或者我可以`uri`以某种方式使用多种模式？例如`uri: '*/dashboard/**, */foo/**'`？如何继续传递检索到的对象？

这是否可以通过使用仅注释适用控制器操作的周围建议的注释来更好地实现？如果是这样，Aspect 可以调用`redirect`吗？如何将检索到的对象传递给带注释的控制器操作？IE

```
@GroupRequired
def viewAll() {
  ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:02:08.703

控制器[beforeInterceptor](http://grails.org/doc/2.2.x/ref/Controllers/beforeInterceptor.html)可以干净地完成此任务：

```
abstract class BaseController {
    def beforeInterceptor = {
        if (params.groupName == null) {
            redirect(controller: "home", action: "index")
            return false
        }

        Group group = Group.findByUrlName(params.groupName)
        if (group == null) {
            redirect(controller: "home", action: "index")
            return false
        }

        // put the group into the params object
        // for use in the controllers
        params.group = group
    }
}

class ChildController extends BaseController {
    def myAction() {
        Group g = params.group

        // do things
    }
} 
```

# android - Android 图库不显示从应用程序存储的图像

> ID：15755388
> 
> 赞同：1
> 
> 时间：2013-04-02T03:06:42.540
> 
> 标签：android, cordova, gallery

我正在做一个 phoneGap 应用程序，它对图片进行一些更改并将其保存回 //sdcard/Download/ 文件夹。使用像 ES File Explorer 这样的第三方应用程序，我可以看到添加到下载文件夹中的图片。然而，即使在我点击刷新按钮后，厨房似乎也没有确认更改。有什么想法吗？

```
function copyPic(){
window.resolveLocalFileSystemURI(imagefilename, resOnSuccess, fail); 
```

}

函数resOnSuccess（入口）{

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
        function(fileSys) {
            fileSys.root.getDirectory("Download", {create:false, exclusive: false},
                function(directory) {
                    entry.copyTo(directory, "newFile1.JPG", success, fail);
                }, fail);
        }, fail); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:13:54.927

只需调用：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
            + Environment.getExternalStorageDirectory()))); 
```

将更新您的画廊，但需要一些时间。

# java - 在 JUnit 测试类中运行基准测试方法

> ID：15755389
> 
> 赞同：1
> 
> 时间：2013-04-02T03:06:50.537
> 
> 标签：java, ant, junit

我有一个测试类`MyTestClass`，其中包含几个典型的测试方法，这些方法可以进行断言或检查异常，并用`@Test`. 当我在 Ant 任务中调用以下指令时，它们会运行：

`<test name="MyTestClass"/>`

但是，在同一个课程中，我想介绍几种未包含在必须通过的测试中的基准性能方法。我希望有一个完全独立的 Ant 任务来运行这些基准测试。

是否有一种带注释的方式来引入这种测试分类并分别调用每个类别？例如，带`@Test`注释的方法将是第一类，然后虚构的`@Benchmark`方法将只是记录诊断报告的性能指标，而不是生成或中断的断言。我认为测试类是定位这些基准测试方法的最佳方式，但我不知道如何将它们的调用封装在 Ant 中以便它们单独运行。例如，是否可以为每个方法添加“基准”前缀并告诉 Ant 只运行带有该前缀的方法，或者我可以编写自己的注释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:28:33.123

我想你可能想看看 JUnit [Categories](https://github.com/junit-team/junit/wiki/Categories)。还有其他答案详细说明了如何从 ant 执行特定类别。

[如何使用 Ant 在一个类别/套件中运行所有 JUnit 测试？](https://stackoverflow.com/questions/6226026/how-to-run-all-junit-tests-in-a-category-suite-with-ant)
[如何在 JUnit 4 中运行属于某个类别的所有测试](https://stackoverflow.com/questions/2176570/how-to-run-all-tests-belonging-to-a-certain-category-in-junit-4/2176791#)

一些可能有用的外部链接：
[使用 JUnit 类别对测试进行分组](http://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0)
[A Closer Look at JUnit Categories](http://alexruiz.developerblogs.com/?p=1711)

# php - 如何安全地存储用于登录第三方网站的密码

> ID：15755390
> 
> 赞同：0
> 
> 时间：2013-04-02T03:06:53.053
> 
> 标签：php, mysql, security, encryption

首先，我不是在寻找一种方法来存储我自己网站的密码以允许用户登录（我可以使用密码的加盐哈希轻松做到这一点）。

我正在建立一个个人网页，我希望能够在主页上查看我的 PayPal 余额。为此，我需要将我的 PayPal 凭据存储在 MySQL 数据库中，以便稍后从 PHP 检索它以登录 PayPal 并提取我的余额。我知道我可以将我的凭据留在 PHP 脚本上，但我想允许更多用户使用这个网站（每个用户都使用在我的网站上注册的自己的帐户登录）。

所以，我需要一种安全的方式来将 PayPal 密码存储在我的服务器上，而不是以纯文本形式保存。我对加密了解不多，所以我想问一下哪种方法最好。

我不确定这个问题是否应该出现在程序员网站上或者就在这里；对不起，如果我做错了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:18:14.300

你不应该这样做。但既然您可能无论如何都会这样做，我建议使用他们用于登录您网站的密码来加密用户的 PayPal 密码。

正确的基于密码的加密使用公认的密钥派生函数，如 PBKDF2。除了密码之外，密钥推导还需要一些盐，这些盐应该由密码随机数生成器生成，以及一些轮次，对于 PBKDF2 至少应该是 6 万轮。

您应该使用相同的算法（使用不同的盐）进行身份验证；在从他们的密码中获取加密密钥后，使用它来加密一个常量、已知的纯文本，比如您的主机名。如果它与注册期间设置的值匹配，则它们已通过身份验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T03:50:57.773

就因为没有答案显示了贝宝对此事的看法：

> 1.3 应用 ID 和 API 凭证。PayPal 将为您提供唯一的机密识别码、证书和 App ID，使您能够使用开发者工具。PayPal 还可能为您提供用于测试和/或生产的 API 凭证。PayPal 可自行决定出于任何原因立即终止或撤销您的 App ID 和/或 API 凭证。您不得将您的 App ID、API 凭证或其他 PayPal 帐户凭证出售、转让、再许可或披露给任何第三方（代表您执行服务的服务提供商除外），并且您同意立即通知 PayPal 任何违反您的这句话中的义务。如果您出售或以其他方式转让您的应用程序，或允许 API 调用者操作它，PayPal 同意向操作您的应用程序的 API 调用者颁发一个新的应用程序 ID。API 调用者对指示 PayPal 传输给它的任何个人数据负责。您应对使用您的 App ID、API 凭证或其他 PayPal 帐户凭证执行的所有活动负责。

和

> 5.2.1 法律协议和相关政策。您的应用程序和您对开发者工具的使用必须遵守以下法律协议和政策：
> 
> (a) 本协议，
> 
> (b) 用户协议，适用于您的版本以及适用于您的支持 PayPal 的服务的用户的任何其他版本；如果您接受来自您所在国家（或公司，如果是公司）以外国家/地区的用户，则该用户所在国家/地区的用户协议版本适用于该用户；

请注意，即使您不使用开发人员工具或 API，存储用户主题的凭据也会让您拥有开发用于 PayPal 的“应用程序”。

链接自：[PayPal 开发者协议](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=ua/XDeveloper_full)

并在[用户协议中](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=ua/UserAgreement_full)

> 如果您认为以下情况应立即通知 PayPal：
> 
> 发生未经授权的交易、未经授权访问您的账户或发生其他错误；
> 
> 您的帐户对帐单（您可以通过登录您的帐户访问您的帐户对帐单）或您通过电子邮件发送给您的交易确认有错误；
> 
> 您的密码或 PayPal 移动 PIN 码已泄露；
> 
> 您的 PayPal 借记卡或 PayPal 手机激活的手机丢失、被盗或停用；或者
> 
> 您需要有关对账单或交易确认中列出的交易的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T03:33:26.823

适当的答案是“**不要这样做**”。

回答你的第二个问题：

> Google Wallet 或 Paypal 如何存储您的信用卡安全号码和详细信息

您可以通过非常有趣[的费用页面阅读有关](https://www.pcisecuritystandards.org/security_standards/fees.php)[PCI 合规性](https://www.pcisecuritystandards.org/)的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T03:21:53.813

你需要非常小心。您需要定期对您的站点和数据库进行彻底的渗透测试，以确保没有安全漏洞。付钱请专业人士为您做这件事。

如果是我并且我致力于这样做，我会通过使用密钥的对称加密算法（使用 AES）对密码进行加密，将密码存储在我的服务器上。将密钥保存在非常安全的地方。以纯文本形式存储密码（如您所述）是一种严重的罪行，将它们存储在双向加密下只会好一点。最佳实践是使用带盐的单向哈希。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T04:10:57.763

重申其他人所说的话：不要将任何人（包括您自己的）贝宝密码存储在您的网站上（在代码本身或数据库中）。

但是，可以将**贝**宝集成到您的网站并使用他们的集成 API读取**您自己的贝宝余额。**自从我使用 paypal API 以来已经有很长时间了，但我知道这是可能的。您可以使用[Transactional Information API](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/transaction-information)通过 GetBalance 调用简单地获取帐户的贝宝余额。为此，您需要设置一个 paypal 开发者帐户，获取一个 API 密钥，并能够从您的 Web 应用程序调用 SOAP API。[请参阅此处了解如何开始使用经典的 Paypal API](https://developer.paypal.com/webapps/developer/docs/classic/api/gs_PayPalAPIs/)。

总而言之，在您自己的个人网页上实现一项功能可能需要做太多的工作。

# c++ - c++ 参考参数函数

> ID：15755391
> 
> 赞同：0
> 
> 时间：2013-04-02T03:06:54.067
> 
> 标签：c++, function, parameters, reference

我在参考参数方面遇到问题。中的值`getStockInfo`应该存储在参考参数中。我不知道该怎么做，所以`displayStatus`接受这些作为参数。每当我将某些东西放入`getStockInfo`main 中时，它都会给我错误`More than one onstance of overloaded function "getStockInfo" matches the argument list`。

```
#include <iostream>
#include <iomanip>
using namespace std;

void getStockInfo(int &, int&, double&);
void displayStatus(int &, double &);

int main()
{
   int spoolsOrdered;
   int spoolsStock;
   double specialCharges;

   cout << "Middletown Wholesale Copper Wire Company" << endl;

   getStockInfo(spoolsOrdered, spoolsStock, specialCharges);
}

void getStockInfo(int &spoolsOrdered, int &spoolsStock, double specialCharges)
{
   char ship; 

   cout << "How many spools would you like to order: ";
   cin >> spoolsOrdered;

   //Validate the spools ordered 
   while(spoolsOrdered < 1)
   {
      cout << "Spools ordered must be at least one" << endl;
      cin >> spoolsOrdered;
   }

   cout << "How many spools are in stock: ";
   cin >> spoolsStock;

   //Validate spools in stock
   while(spoolsStock < 0)
   {
       cout << "Spools in stock must be at least 0" << endl;
       cin >> spoolsStock;
   }

   cout << "Are there any special shipping charges? ";
   cout << "Enter Y for yes or another letter for no: ";
   cin >> ship;

   //Validate special charges
   if(ship == 'Y' || ship == 'y')
   {
    cout << "Enter the special shipping charge: $";
    cin >> specialCharges;
   }
   else
   {
    specialCharges = 10.00;
   }
}

void displayStatus(int &backOrder, double &subtotal, double &shipping, double &total)
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:16:36.083

您的声明和定义`getStockInfo`不同：一个中的最后一个参数是引用，而另一个不是。

```
void getStockInfo(int &, int&, double&);
...
void getStockInfo(int &spoolsOrdered, int &spoolsStock, double specialCharges) 
```

类似的问题发生在`displayStatus`：这里参数的数量不同。

```
void displayStatus(int &, double &);
...
void displayStatus(int &backOrder, double &subtotal, double &shipping, double &total) 
```

出现错误消息是因为编译器无法确定您是在告诉它调用`getStockInfo(int &, int&, double&)`（可能来自另一个文件）还是在此文件中定义的那个`void getStockInfo(int &, int&, double)`。

注意拥有多个版本并不是“错误的”。但是以编译器不知道要调用哪一个的方式调用一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:17:37.057

原型中的参数列表与定义中的参数列表不匹配。

```
void displayStatus(int &, double &); 
```

对比

```
void displayStatus(int &backOrder, double &subtotal, double &shipping, double &total)
{
} 
```

# c# - 选择索引更改事件时，dhtml弹出窗口消失

> ID：15755396
> 
> 赞同：1
> 
> 时间：2013-04-02T03:07:31.217
> 
> 标签：c#, asp.net, popup, dhtml

我正在使用 DHTML 窗口在弹出窗口中显示 div。包含属性自动后包的下拉列表的 div 是 true。现在我选择了下拉列表中的第二个列表，总 DHTML 弹出窗口消失了。请帮助我在此类操作期间维护弹出窗口。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:03:52.767

在回发时，动态创建的 html 代码会丢失。如果您需要代码，您可以将动态代码放入隐藏字段，并将该代码保留在页面加载事件上 (ispostback== true) {} 上的 div 中。

您可以将此链接用于参考。

[隐藏字段和 dhtml](https://stackoverflow.com/a/3962512/1343516)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:28:27.400

当您使用弹出窗口时，任何回发都会丢失您的弹出窗口。
我的意思是你的弹出窗口将被关闭。
您需要使用 http-handler 或 web-service 或 page 方法实现 jQuery 来调用您的函数。
只有这样，您才能阻止弹出窗口关闭。

# ios - Core Data 获取一对多关系的数据

> ID：15755398
> 
> 赞同：0
> 
> 时间：2013-04-02T03:07:57.720
> 
> 标签：ios, iphone, core-data, one-to-many

我是核心数据的菜鸟。我有两个实体场地和音乐会以及两个关系音乐会（从场地到音乐会）和场地（从音乐会到场地）。我想要做的基本上是检索包含在两个日期（startDate-endDate）之间的场地的所有音乐会。

```
NSPredicate *concertsToShow = [NSPredicate predicateWithFormat:@"ALL concerts.startDate <= %@ AND concerts.endDate >= %@",startDate,endDate];

    NSManagedObjectContext *managedObjectContext = ((AppDelegate *)[[UIApplication sharedApplication]delegate]).managedObjectContext;

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:[NSEntityDescription entityForName:@"Venue" inManagedObjectContext:managedObjectContext]];
    [request setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObjects:@"concerts", nil]];
    [request setPredicate:concertsToShow];

    NSError *error = nil;
    NSArray *concerts = [managedObjectContext executeFetchRequest:request error:&error];

    return concerts; 
```

运行代码时出现以下异常：

**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“不支持的谓词（null）”* **

 *我试图在谓词上加上括号，但它说它无法解析谓词。

我最终使用了一个子查询

```
NSPredicate *concertsToShow = [NSPredicate predicateWithFormat:@"SUBQUERY(concerts, $i, $i.startDate BETWEEN {%@,%@}).@count>0",startDate,endDate]; 
```

问题是它只对场地执行过滤：它只检索具有音乐会的场地，该音乐会的日期包含在 startDate 和 endDate 之间，但相关的音乐会没有被过滤。我想要实现的是让这个过滤加上对音乐会的过滤。例如，我有两个与音乐会相关的场地（仅在示例中显示日期）：“爱尔兰酒吧”->>（01-04-2013, 02-04-2013,03-04-2013,04-04-2013 ) "英语酒吧" ->> (05-04-2013)

如果我的谓词的 startDate 和 endDate 分别是 02-04-2013 和 04-04-2013 结果应该是：

“爱尔兰酒吧”->> (02-04-2013,03-04-2013,04-04-2013)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:32:08.970

正如**Rob**提到的，您的错误消息说您有 nil 谓词。

所以在发出请求之前放置日志并检查谓词值。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ALL concerts.startDate <= %@ AND concerts.endDate >= %@",startDate,endDate];
NSLog(@"my predicate is :%@",predicate); 
```

对于我建议的良好做法，请始终这样做

```
if(predicate!=nil){
  //now make request here
} 
```

如果您需要更多帮助，请告诉我。*

# apache-flex - 获取组内单击对象的 id

> ID：15755401
> 
> 赞同：0
> 
> 时间：2013-04-02T03:08:13.370
> 
> 标签：apache-flex, flex4, mxml

```
<fx:Script>
    <![CDATA[   
private function handleClick(id:String):void {
            trace("id clicked: " + id);
            if(id == "1") {
                trace("1 clicked");
            } else if(id=="2") {
                trace("2 clicked");
            } else {
                trace("Nothing");
            }
        }
    ]]>
</fx:Script>

<s:Group width="100%" height="100%" click="handleClick()" >
        <s:BitmapImage id="1"/>
        <s:BitmapImage id="2"/>
</s:Group> 
```

你好。基于上面的代码，我试图将点击的 BitmapImage 的 id 传递给 handleClick 函数。对我来说最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:06:54.173

无法处理 BitmapImage 的点击，您需要将其放入 Group 或其他可以处理它的容器中，下面的示例将适用于您：

```
<![CDATA[   
            import mx.controls.Alert;
            private function handleClick(event:Event):void {
                var id:String = event.target.id;
                trace("id clicked: " + id);
                if(id == "1") {
                    trace("1 clicked");
                } else if(id=="2") {
                    trace("2 clicked");
                } else {
                    trace("Nothing");
                }
            }
        ]]>
    </fx:Script>

    <s:Group width="100%" height="100%" click="handleClick(event)" >
        <s:Group id="b1" >
            <s:BitmapImage />
        </s:Group>
        <s:Group id="b2" >
            <s:BitmapImage />
        </s:Group>
    </s:Group> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:50:47.473

```
click="handleClick(event)"

...handleClick(event:Event)
{
   trace(event.target.id); // this is what you want
} 
```

# javascript - 将网络摄像头变成拉伸/缩放背景图像

> ID：15755404
> 
> 赞同：1
> 
> 时间：2013-04-02T03:08:56.043
> 
> 标签：javascript, css, html, background, webcam

将javascript连接到css div。

我已经提供了一些驱动网络摄像头的 javascript 一些新功能，例如延迟，并且仅在其为艺术项目成功上传时显示。

但是，我不能再（出于某种愚蠢的原因）将它连接到我的 css 而不覆盖我所做的更改。**这样我的简单网络摄像头就可以成为在页面上拉伸到大小的背景图像。**

（请参见下文）

我想让网络摄像头背景图像动态缩放，但我认为在这种情况下这是不可能的。

我相信你们更了解情况

**编辑：对不起，我不够清楚。** 所以我想让下面看到的网络摄像头 javascript 作为我页面上的背景图像。我正在尝试使网络摄像头 jpg 变成背景图像。我怎么不知道如何将两者联系起来，而不是过度使用我所做的更改。

因此，如果 javascript 可以连接到下面的 css 示例，则应该将其转换为拉伸背景图像。

*   它不会让我让网络摄像头连接到所示的 css 示例。我不明白如何让 css 发挥所有功能。**

我希望这能清除我的要求。

与通过 ID 引用元素有关吗？

**编辑：结束**

```
 <script type="text/javascript">
$(document).ready(function(){

function reloadBackground() {
        var d = new Date().getTime();
        d -= 15; // delay
    url = "http://www.panopticbedroom.com/templates/live.jpg?" + d;
        var img = new Image();

        img.onload = function(){
              $('#divBackground ').html('').append($(this));
        }

        img.src = url;
}

setInterval(reloadBackground, 1000);

function getDocHeight() {
    var doc = document;
    return Math.max(
        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),
        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),
        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)
    );
}

});
</script> 
```

**这是相关的CSS：**

```
#divBackground {
background-image: url(http://www.panopticbedroom.com/templates/live.jpg)
position: absolute;
}

img#imgBackground {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
} 
```

**我真的很感激任何建议！**

一切顺利，

路易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:31:57.170

将此 Css 代码用于您的 img 容器

```
background-attachment:fixed;
background-size:cover;
-webkit-background-size:cover;
-moz-background-size:cover;
-o-background-size:cover;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='source of image',sizingMethod='scale');
-ms-filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='source of image', sizingMethod='scale')" 
```

# c# - 在 GET 请求的 WCF 扩展性中无法按名称找到 DispatchOperation

> ID：15755407
> 
> 赞同：0
> 
> 时间：2013-04-02T03:09:37.803
> 
> 标签：c#, .net, wcf, rest, wcf-extensions

我最近遇到了一个让我陷入困境的问题。

我在 WCF 中实现了一个自定义 AuthorizationManager，它首先必须按名称提取操作。WCF 服务通过 REST 和 SOAP 端点公开，因此我必须检查多个位置以找到继续通过身份验证过程所需的信息。

一切都很好，我有大约 15-20 个服务运行良好，但我最近遇到了一个问题，我无法使用我的正常方法提取操作名称。

拉取操作的代码如下：

```
public class AuthorizationManager : ServiceAuthorizationManager
{
    private ServiceEndpoint _endpoint { get; set; }

    public AuthorizationManager(ServiceEndpoint endpoint)
    {
        _endpoint = endpoint;
    }
    public override bool CheckAccess(OperationContext operationContext, ref Message message)
    {
        var buffer = message.CreateBufferedCopy(Int32.MaxValue);
        message = buffer.CreateMessage();
        var originalMessage = buffer.CreateMessage();

        /*Step 1 - Pull Operation*/
        string action = operationContext.IncomingMessageHeaders.Action ?? OperationContext.Current.IncomingMessageProperties["HttpOperationName"] as string;
        DispatchOperation operation = operationContext.EndpointDispatcher.DispatchRuntime.Operations.FirstOrDefault(o => o.Name == action || o.Action == action);
        Type hostType = operationContext.Host.Description.ServiceType;
        var operationInfo = hostType.GetMethod(operation.Name);

        /*Continue here using operationInfo - but operation is null*/

     }
} 
```

这对于为 REST 和 SOAP 端点提取正确操作很有用，但现在该**操作**为空。

服务定义如下：

```
[ServiceContract]
public interface ICollectionService
{
      [OperationContract]
      [WebGet]
      CollectionResponse  GetCollection()
} 
```

一切似乎都很标准，我只是不明白为什么这与我的其他服务有任何不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:12:00.733

我意识到我没有足够仔细地检查我的服务定义，它使用的是 [WebInvoke] 而不是 [WebGet]。这解决了它。

# c++ - 如何从调用图中省略内置函数

> ID：15755408
> 
> 赞同：1
> 
> 时间：2013-04-02T03:09:58.510
> 
> 标签：c++, c, gcc, call-graph

我使用 gcc 生成了我的 C/C++ 程序的调用图，但是该图包含许多我不感兴趣的内置函数，例如 strcmp、fprintf 等。是否有任何 gcc 选项可以帮助省略这些类型功能？我知道埃及有一个选项 --omit，但这需要用户指定他们事先知道的函数列表。这意味着如果我想删除上面的所有内置函数，我需要有一个完整的函数列表，我不确定从哪里获得。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:14:02.940

标准库函数的完整列表可以在语言标准中找到。但是，该列表不包括帮助程序、特定于编译器的函数。

例如，参见`Annex B/Library summary`1999 年的 C 标准。

如果您没有标准，请在线获取其草稿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:16:45.180

您可以自己指定检测功能。有关如何操作的更多信息，请参阅[此链接](http://codingrelic.geekhold.com/2010/09/gcc-function-instrumentation.html)。实现 intrumentation 函数，让您指定将在每个函数调用之前调用的函数，并将传递被调用函数的地址和调用它的地址。

之后，您可以使用该`addr2line`工具从检测的运行中转换地址。这使您可以提取函数并过滤它们。您需要自己解析文本文件并构建调用图，但是这种`dot`语言很容易上手。

# java - UDP多客户端

> ID：15755415
> 
> 赞同：0
> 
> 时间：2013-04-02T03:10:32.193
> 
> 标签：java, android, networking, udp, wifi

目前我有一个在Android上运行的Java UDP服务器，服务器在端口上有一个datagramSocket，它首先只是监听客户端连接，客户端将在同一端口上创建一个新的datagramSocket，并发送一个数据包请求连接，一旦服务器收到这个，它会使用IP发送消息，然后只发送一个带有块位置的消息包，而客户端也发送回它自己的块位置，

信息，该应用程序允许多个用户连接到一个主机，该主机将接收客户端的所有位置然后将它们广播出去，还有其他方法可以做到，但我想这样做以进行研究。

但无论如何，问题在于，我的应用程序有望处理 8 个用户，因为该应用程序适用于 wifihotspot。我将如何允许多个客户端连接、发送数据和接收数据？我已经有了允许一个客户端连接的代码，主机将向该客户端发送数据，但是如果我尝试连接另一个客户端，我会收到错误，这是我的服务器和客户端代码

PS那里可能有一些调试代码，因为我需要清除它。

**服务器代码**

```
package com.example.gelorph_v1;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.MulticastSocket;
import java.net.NetworkInterface;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketException;
import java.net.UnknownHostException;
import java.util.ArrayList;
import java.util.Enumeration;

import org.apache.http.conn.util.InetAddressUtils;

import android.content.Context;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.util.Log;

public class gameServer extends Thread {

    /**
     * Sets up a server for Android applciation
     */
    private static final String TAG = "GameServer";
    private DatagramSocket socket;
    private int port = 50000;
    private int players = 0;
    private ArrayList<gameObject> assets = new ArrayList();
    private ArrayList<InetAddress> address = new ArrayList();
    private boolean wait = false;
    private Context contextHolder = null;

    //Make an array, this array will hold all the positions
    //the clients sent to it,
    //using the ID number, it will store it in a array block
    //and the "host" can just return it and use that

    public gameServer( Context context ) throws IOException
    {
        contextHolder = context;
        socket = new DatagramSocket( port );
        Log.d(TAG, "Server was setup");
    }

    public DatagramSocket rtnSocket(){ return socket; }

    private String getLocalIPAddress()
    {
        try
        {
            for (Enumeration<NetworkInterface> nis = NetworkInterface.getNetworkInterfaces(); nis.hasMoreElements();)
            {
                NetworkInterface ni = nis.nextElement();
                Log.v(TAG, "NetworkInterface = " + ni.getDisplayName());
                for (Enumeration<InetAddress> ips = ni.getInetAddresses(); ips.hasMoreElements();)
                {
                    InetAddress ip = ips.nextElement();
                    String s = ip.getHostAddress();
                    Log.v(TAG, "InetAddress = " + s);
                    if (!ip.isLoopbackAddress())
                    {
                                if(InetAddressUtils.isIPv4Address(s)) return s;
                    }
                }
            }
        }
        catch (SocketException e)
        {
                Log.e(TAG,"getLocalIPAddress()", e);
        }
        return null;
    }

    public void passClient( gameObject clientTemp )
    {
        assets.add( clientTemp );
    }

    protected void doInBackground()
    {

    }

    @Override
    public void run() {
        InetAddress client = null;
        boolean run = true;
        String data = "";
        DatagramPacket packet = null;
        while( run )
        {
            if( data.equalsIgnoreCase( "" ) )
            {
                /*Log.d(TAG, "waiting for clients");
                String msg = "waiting";
                int msgLength = msg.length();
                byte[] message = msg.getBytes();
                DatagramPacket p = new DatagramPacket( message, msgLength, client, port );
                try 
                {
                    socket.send( p );
                } 
                catch (IOException e2) 
                {
                    Log.d(TAG, "Error with sending");
                    e2.printStackTrace();
                }*/
            }

            //Send some data
            if( data.equalsIgnoreCase( "connect" ) && wait == true )
            {
                Log.d(TAG, "ID send :" + packet.getAddress());
                address.add( packet.getAddress() );

                players += 1;
                String msg = String.valueOf( players );
                int msgLength = msg.length();
                byte[] message = msg.getBytes();
                DatagramPacket p = new DatagramPacket( message, msgLength, packet.getAddress(), port );
                try 
                {
                    socket.send( p );
                    wait = false;
                } 
                catch (IOException e2) 
                {
                    Log.d(TAG, "Error with sending");
                    e2.printStackTrace();
                    data = "";
                }
            }

            //if( /*data.equalsIgnoreCase( "position" )*/ address.size() > 0 )
            //{
                //Create for loop to create the string
                String msg = "";
                msg = players + "#";
                for(int i = 0; i < players; i++)
                {
                            msg += + i + ":" + assets.get(i).returnPosX() + ":" + assets.get(i).returnPosY() + ":"; 
                }
                //msg = String.valueOf( 
                //      players + ":" + 
                //      "1:" + assets.get(0).returnPosX() + ":" + assets.get(0).returnPosY() );
                int msgLength = msg.length();
                byte[] message = msg.getBytes();
                for(int i = 0; i < address.size() ; i++)
                {
                    DatagramPacket p = new DatagramPacket( message, msgLength, address.get(i), port );
                    try 
                    {
                        socket.send( p );
                    } 
                    catch (IOException e2) 
                    {
                        Log.d(TAG, "Error with sending");
                        e2.printStackTrace();

                    }
                }
                //Log.d(TAG, "Data sent is:" + msg);
            //}

            data = " ";

            //Receive some data
            if( wait == false )
            {
                byte[] buf = new byte[256];
                packet = new DatagramPacket( buf, buf.length );
                try 
                {
                    socket.receive( packet );
                    wait = true;
                } 
                catch (IOException e) 
                {
                    Log.d(TAG, "Error with receiving data");
                    e.printStackTrace();
                }

                data = new String( buf, 0, packet.getLength() );
                Log.d(TAG, "Data received from :" + packet.getAddress() + ", holds this value: " + data);
                //Upset each asset with the data sent
            }

            //Log.d(TAG, "Data received was :" + data);

            try 
            {
                this.sleep( 25 );
            } 
            catch (InterruptedException e) 
            {
                // TODO Auto-generated catch block
                Log.d(TAG, "Error with trying to sleep");
                e.printStackTrace();
            }
        }
        Log.d(TAG, "Error with while run value");
    }

    public int returnPlayers(){ return players; }
} 
```

**客户端代码**

```
package com.example.gelorph_v1;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.MulticastSocket;
import java.net.Socket;
import java.net.SocketException;
import java.net.UnknownHostException;
import java.util.ArrayList;

import android.content.Context;
import android.graphics.BitmapFactory;
import android.net.DhcpInfo;
import android.net.wifi.WifiManager;
import android.os.AsyncTask;
import android.util.Log;

public class gameClient extends Thread {

    private static final String TAG = "gameClient";
    private gameServer server;
    private boolean rdyForPlay = false;
    private gameObject[] assets = new gameObject[8];
    private int ID = 0;
    private int port = 50000;
    private InetAddress address;
    private maths cal = new maths();
    private Context contextHolder;
    private boolean host = false;
    private DatagramSocket socket = null;
    private int totalPlayers = 0;

    public gameClient( boolean serverTag, Context context )
    {
        if( serverTag == true)
        {
            host = true;
            try 
            {
                contextHolder = context;
                server = new gameServer( contextHolder );
                this.start();
            } 
            catch (IOException e) 
            {
                Log.d(TAG, "Could not start server");
                e.printStackTrace();
            }
        }
        else
        {
            contextHolder = context;
            connectToServer();
            this.start();
        }
    }

    public void connectToServer()
    {
        //Send a connect message to the server
        try {
            socket = new DatagramSocket( port );
            byte[] bufer = new byte[256];
            String msg = "connect";
            int msgLength = msg.length();
            bufer = msg.getBytes();
            InetAddress address;
            address = InetAddress.getByName("192.168.1.59");
            DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
            socket.send( p );

        } catch (UnknownHostException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        } catch (SocketException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        //Receive the message back
        byte[] buf = new byte[256];
        DatagramPacket packet = new DatagramPacket( buf, buf.length );
        try 
        {
            socket.receive( packet );
        } 
        catch (IOException e) 
        {
            Log.d(TAG, "Error with receiving data");
            e.printStackTrace();
        }

        String data = new String( buf, 0, packet.getLength() );

        ID = Integer.parseInt( data );
        setUpClient();

        Log.d(TAG, "Data received was :" + ID);
    }

    public void setUpClient()
    {
        gameObject temp = new gameObject(BitmapFactory.decodeResource(contextHolder.getResources(), R.drawable.player), 250, 300);
        assets[ID] = temp;
        if( host == true )
        {
            server.passClient( temp );
        }
    }

    public void sendTouchEvent(float xSet, float ySet)
    {
        assets[ID].setPosition( xSet, ySet );
    }

    @Override
    public void run()
    {
        if( host == true ) { setUpClient(); server.start(); }
        rdyForPlay = true;
        boolean run = true;
        boolean setupPlayer = false;
        while( run )
        {
            //Tell the server to give position of players
            //if( setupPlayer == true )
            //{
            //  setUpClient();
            //  setupPlayer = false;
            //}

            if( host == false )
            {
                try {
                    if(socket == null)
                    {
                        socket = new DatagramSocket( port );
                    }
                    byte[] bufer = new byte[256];
                    //String msg = "position";
                    String msg = ID +":"+ assets[ID].returnPosX() +":"+ assets[ID].returnPosY();
                    int msgLength = msg.length();
                    bufer = msg.getBytes();
                    InetAddress address;
                    address = InetAddress.getByName("192.168.1.59");
                    DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
                    socket.send( p );

                } catch (UnknownHostException e2) {
                    // TODO Auto-generated catch block
                    Log.d(TAG, "Error with unknown host");
                    e2.printStackTrace();
                } catch (SocketException e) {
                    // TODO Auto-generated catch block
                    Log.d(TAG, "Error with socket");
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    Log.d(TAG, "Error with sending/receiving data");
                    e.printStackTrace();
                }

                byte[] buf = new byte[256];
                DatagramPacket packet = new DatagramPacket( buf, buf.length );
                try 
                {
                    socket.receive( packet );
                } 
                catch (IOException e) 
                {
                    Log.d(TAG, "Error with receiving data");
                    e.printStackTrace();
                }

                String data = new String( buf, 0, packet.getLength() );
                //Split the string up
                String[] dataArray = data.split("#");
                int newTotalPlayers = Integer.parseInt( dataArray[0] );
                if( newTotalPlayers != totalPlayers )
                {
                    Log.d(TAG," what is total amount of players:" + newTotalPlayers);
                    if( newTotalPlayers == 1 )
                    {
                        newPlayer( 0 );
                        totalPlayers = newTotalPlayers;
                    }
                    else
                    {
                        newPlayer( newTotalPlayers );
                        totalPlayers = newTotalPlayers;
                    }
                    //if( ID == 0 && host == false)
                    //{
                    //  ID = newTotalPlayers;
                    //  setupPlayer = true;
                    //}
                }
                //Do a for loop to go through dataArray
                for( int i = 0; i < totalPlayers; i++)
                {
                    String[] pos = dataArray[(i + 1)].split(":");
                    if( Integer.parseInt( pos[(i*3)] ) == ID )
                    {
                        Log.d(TAG, "Do nothing please");
                    }
                    else
                    {
                        assets[i].setPosition( Integer.parseInt( pos[(i*3) + 1] ), Integer.parseInt( pos[(i*3) + 2] ) );
                    }
                }

            }

            //host
            if( host == true )
            {
                /*if( server.returnPlayers() != totalPlayers )
                {
                    Log.d(TAG," what is total amount of players:" + server.returnPlayers());
                    newPlayer( server.returnPlayers() );
                    totalPlayers = server.returnPlayers();
                    //if( ID == 0 && host == false)
                    //{
                    //  ID = newTotalPlayers;
                    //  setupPlayer = true;
                    //}
                }*/
            }

        }
        Log.d(TAG, "Error with run value");
    }

    private void newPlayer( int idOfNewPlayer )
    {
        gameObject temp = new gameObject(BitmapFactory.decodeResource(contextHolder.getResources(), R.drawable.new_player), 250, 300);
        assets[ idOfNewPlayer ] = temp;
    }

    private void updateAssets()
    {

    }

    public gameObject[] rtnAssets(){ return assets; }
    public int rtnID(){ return ID; }
    public boolean rtnRdy(){ return rdyForPlay; }
    public gameServer rtnServer(){ return server; }
    public boolean rtnHost(){ return host; }
    public void stopServers()
    {
        socket.close();
        server.rtnSocket().close();
    }
} 
```

不要太担心当客户加入时会创建一个新块，我只是想弄清楚允许多个用户的最佳方式是什么？最重要的是如何？如果有人能指出我正确的方向，或者给出一些简单的示例代码，那就太好了。

# arrays - 如何将数组排列为表格行？

> ID：15755417
> 
> 赞同：1
> 
> 时间：2013-04-02T03:10:44.630
> 
> 标签：arrays, ruby

我正在尝试学习数组处理的Ruby方式。编写以下函数的简洁方法是什么？

```
def columnize(items, n_cols) 
```

Items 是一个任意长度的一维数组。我想返回一个行数组，每行的长度为`n_cols`，包括所有`items`列，可能用`nil`s 填充最后一列。例如：

```
items = [1, 2, 3, 4, 5, 6, 7]
table = columnize items, 3 
```

这应该产生`table`：

```
[[1, 4, 7], 
 [2, 5, nil], 
 [3, 6, nil]] 
```

请注意，最后一列可能都是`nil`s，如下所示：

```
columnize [1, 2, 3, 4, 5, 6, 7, 8, 9], 4 
```

这是我需要为报告生成解决的一个真正问题。我有一个 Ruby 新手解决方案不是很令人满意，如果需要可以发布它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T03:21:11.680

你想使用[`Matrix`](http://www.ruby-doc.org/stdlib-2.0/libdoc/matrix/rdoc/Matrix.html)类。

```
items = [1, 2, 3, 4, 5, 6, 7]
require 'matrix'
# ⇒ true
m = Matrix.build(3) { |row, col| items[row+col*3] }
# ⇒ Matrix[[1, 4, 7], [2, 5, nil], [3, 6, nil]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T07:47:41.393

Ruby 的 Array 类[`transpose`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-transpose)旨在将行转换为列。将它与[`fill`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-fill)Enumerable结合使用[`each_slice`](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice)会给出：

```
require 'pp'

def columnize(items, cols)
  ary = items.dup.fill(nil, items.size, cols - items.size % cols )
  ary.each_slice(ary.size / cols).to_a.transpose
end 

items = [1, 2, 3, 4, 5, 6, 7]
pp columnize(items, 3)
pp columnize [1, 2, 3, 4, 5, 6, 7, 8, 9], 4 
```

哪个输出：

```
[[1, 4, 7], [2, 5, nil], [3, 6, nil]]
[[1, 4, 7, nil], [2, 5, 8, nil], [3, 6, 9, nil]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T03:23:19.033

除了填充只有`nil`元素的行之外，这将执行以下操作：

```
first, *rest = items.each_slice((items.length/n_cols).ceil).to_a
first.zip(*rest) 
```

# php - Populating One Select Box Based on Another When Selects are Arrays

> ID：15755418
> 
> 赞同：2
> 
> 时间：2013-04-02T03:10:54.443
> 
> 标签：php, jquery

I know how to populate one select box based on the option from another using jquery and ajax, but how do you do it when the select boxes are arrays?

默认情况下，页面上有 5 辆，但我也使用 .EnableMultiField() 根据需要添加更多行...在任何给定的一周，我们都会在库存中添加 10 到 30 辆汽车。

阿贾克斯：

```
$(".make").change(function() {
var id=$(this).val();
var dataString = 'id='+ id;

$.ajax ({
    type: "POST",
    url: "get_models.php",
    data: dataString,
    cache: false,
    success: function(html) {
        $(".model").html(html);
    } 
});

}); 
```

PHP：

```
 <ul>
            <li><label for="year[]">Year</label><select name="year[]"><option></option>'.$Year.'</select></li>
            <li><label for="year[]">Make</label><select name="make[]" class="make"><option></option>'.$Make.'</select></li>
            <li><label for="year[]">Model</label><select name="model[]" class="model" style="width: 120px"><option></option>'.$Model.'</select></li>
            <li><label for="trim[]">Trim</label><input type="text" size="10" name="trim[]" /></li>
            <li><label for="vin[]">VIN</label><input type="text" name="vin[]"size="20" maxlength="17" onkeyup="return Upper(event,this)" /></li>
            <li><label for="mileage[]">Mileage</label><input type="text" name="mileage[]" size="3" maxlength="6" /></li>
            <li><label for="color[]">Color</label><select name="color[]"><option></option>'.$Color.'</select></li>
            <li><label for="cost[]">Cost</label><input type="text" name="cost[]" size="6" maxlength="6" onchange="currency(this)" /></li>
            <li><label for="asking[]">Asking</label><input type="text" name="asking[]" size="6" maxlength="6" onchange="currency(this)" /></li>
        </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:40:50.243

我认为您的问题是您通过 AJAX 加载的模型全部设置为`.model`. 你需要改变你`$('.make').change(...)`的关注

```
 $(".make").change(function () {
           var $this = $(this);
           var id = $(this).val();
           var dataString = 'id=' + id;

           $.ajax({
              type: "POST",
              url: "get_models.php",
              data: dataString,
              cache: false,
              success: function (html) {
                 $(".model", $this.closest('ul')).html(html);
              }
           });
        }); 
```

这将设置新的“模型”仅存`.model`在于 changed`.make`的`<ul>`

**更新**

以适应动态添加`.make`、替换

```
$(".make").change(function () { 
```

和

```
$(document).on('change', 'ul .make', function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:56:17.577

我对答案的建议是您的前三个`<label>`错误地指向`year[]`而不是`year[]`,`make[]`和`model[]`。这是扔掉你的东西吗？它击中第一个“制造”领域并抛出。我感觉合理...

祝你好运 （：

# c# - 尝试使用 Linq 向 Twitter 发送推文时出现 401

> ID：15755420
> 
> 赞同：2
> 
> 时间：2013-04-02T03:11:21.253
> 
> 标签：c#, twitter-oauth, linq-to-twitter

因此，我查看了 Linq 到 Twitter 文档中关于 Oauth 的 401 状态的所有建议，老实说，我不知道我做错了什么。

```
var auth = new PinAuthorizer
        {
            Credentials = new InMemoryCredentials
            {
                ConsumerKey = ConfigurationManager.AppSettings["twitterConsumerKey"],
                ConsumerSecret = ConfigurationManager.AppSettings["twitterConsumerSecret"],
                //OAuthToken = ConfigurationManager.AppSettings["twitterOAuthToken"], //don't include this 
                //AccessToken = ConfigurationManager.AppSettings["twitterAccessToken"] //or this for new users. 
            },
            //
            UseCompression = true,
            GoToTwitterAuthorization = pageLink => Process.Start(pageLink),
            GetPin = () =>
                {
                    Console.WriteLine("/nAfter twitter authorizes your application you will be returned here or something/n");
                    Console.Write("Enter Pin here:");
                    return Console.ReadLine();
                }

        };

        auth.Authorize();

        using (var twitterCtx = new TwitterContext(auth, "https://api.twitter.com/1/",
            "https://search.twitter.com/"))
        {

            try
            {
                twitterCtx.Log = Console.Out;
                Console.WriteLine("Please provide tweet text");
                string tweet = Console.ReadLine();

                twitterCtx.UpdateStatus(tweet);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }

        } 
```

我已经使用 Pin Authentication 方法和单用户方法（通过配置文件提供 oauth 密钥）运行了这个。我可以查询推文，但我无法更新我的状态或发送直接消息（我在尝试 DM 时收到 403 禁止）。我提供了一个回调 URL（虽然是假的），所以我想不出为什么这不起作用。任何帮助，将不胜感激。

PS这在Main中运行，不确定是否重要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:27:43.600

您所需要的只是 TwitterContext ctor 的重载，它将使用正确的基本 URL：

```
new TwitterContext(auth) 
```

您使用的示例适用于 v1.0 URL，LINQ to Twitter 现在在 Twitter API v1.1 上。它将默认为正确的基本 URL。

如果您查询正常，但更新和 DM 出现错误，请仔细检查以确保您没有尝试发布相同的文本。这就是为什么我将 DateTime.Now 附加到测试推文的末尾 - 以保证唯一性。

# linux - 用于同时 ping 多个主机的 Linux Bash 脚本

> ID：15755422
> 
> 赞同：2
> 
> 时间：2013-04-02T03:11:48.633
> 
> 标签：linux, multithreading, bash, scripting, background-process

我有一个包含 500 个服务器名称列表的文本文件。我需要同时 ping 所有这些，而不是一个接一个地循环，并将可 ping 的文件放在一个文件中，将不可 ping 的文件放在另一个文件中。

我可以在后台运行每个 ping 或为每个 ping 生成一个新进程吗？实现这一目标的最快和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T03:19:46.750

您可以使用以下方法控制并行度`xargs`：

```
cat file-of-ips | xargs -n 1 -I ^ -P 50 ping ^ 
```

在这里，我们一次最多保持 50 个 ping。ip 本身插入在`^`; 您可以在前后放置参数。

# javascript - 哪个引导 gem 更适合带有 javascript 和 css 的 rails 3.2.12 应用程序？

> ID：15755423
> 
> 赞同：0
> 
> 时间：2013-04-02T03:11:58.647
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap

在搜索 rails bootstrap gem 时，可能有多个结果。像：

```
https://github.com/seyhunak/twitter-bootstrap-rails
http://rubygems.org/gems/bootstrapped-rails
https://github.com/thomas-mcdonald/bootstrap-sass 
```

railscasts.com 展示了 twitter-bootstrap-rails。Bootstrap-sass 的下载量最多。然而，这似乎与 sass 一起使用，我们在我们的应用程序中使用 js 和 css。如果我们使用 javascript 和 css，哪个 bootstrap gem 更合适？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:16:22.923

不同之处在于官方的 bootstrap gem 使用 Less for CSS，而最后一个使用 SASS for CSS。LESS 或 SASS 的选择对仅影响样式表的 javascript 没有影响。它们都与 JavaScript 兼容。

我使用 bootstrap-sass 是因为我更喜欢 SASS 而不是 LESS，并且 ruby​​ on rails 被配置为使用 sass/scss 开箱即用，这就是它有更多下载的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:16:51.097

我一直喜欢`https://github.com/seyhunak/twitter-bootstrap-rails`它，因为它易于安装，而且正如 john 所说，它对 javascript 没有任何影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T21:33:45.700

我也同意约翰。SASS 是 Rails 开箱即用的解决方案——我喜欢让实现尽可能接近标准方法……除非有令人信服的理由采取不同的做法。

将一个项目转移到这种方法 - 真的很喜欢这种组合。

祝一切顺利 ...

# linux - 创建轴 2 .aar 文件时遇到问题：找不到 xml/services 错误

> ID：15755426
> 
> 赞同：2
> 
> 时间：2013-04-02T03:12:12.633
> 
> 标签：linux, web-services, tomcat, axis2

我正在尝试使用 OSX 10.7.5 创建一个 aar 文件（作为[本](http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html)教程的一部分）。要生成 .aar，我导航到 Eclipse 工作区中保存我的 Web 服务的目录并键入

```
jar cvf FirstWebService.aar ./* 
```

这是 Apache 所说的用于[从 apache axis 2 文档生成代码清单 9](http://axis.apache.org/axis2/java/core/docs/userguide-buildingservices.html)中的 aar 的命令。

该命令创建了一个.aar——但是我用来创建.aar的过程有问题，因为当我将.aar文件加载到tomcat的/webapps中时，我得到一个.xml/services not found错误。

我不确定如何解决此错误。如果我在计算机的文件系统中搜索 services.xml 文件，我可以在其中找到它，`/path to eclipse workspace/workspace/MyFirstWebService/WebContent/WEB-INF/services/FirstWebService/META-INF` 但我不确定该文件是否应该以某种方式滚动到 .aar 文件中，或者我是否可以手动将此文件插入某处apache 目录结构以使事物运行。

注意：我不认为我像在这个问题中那样手动解压缩或解压缩 aar。 [Axis2 Web 服务错误：未找到 services.xml](https://stackoverflow.com/questions/8257854/axis2-web-service-error-services-xml-not-found)我只是在运行上面列出的 apache 文档中的命令。

这是 .aar 文件

![在此处输入图像描述](https://i.stack.imgur.com/BzGSG.png)

**请注意**，我使用的软件版本与教程中的所有版本相同——但我使用的是 OSX 10.7.5，他们在教程中使用的是 windows。`jar cvf FirstWebService.aar com META-INF`因此，我已将教程 ( )中显示的窗口的 make-aar 命令更改为上面显示的命令。如果我只是尝试运行教程中的命令， `jar cvf FirstWebService.aar com META-INF`我会得到相同的 xml/services not found 错误。它在终端中提供此输出...

```
com: no such file or directory
META-INF: no such file or directory
added manifest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:36:36.540

我发现了这个问题。当您键入创建 aar 文件的命令时，您必须位于目录 .../EclipseWorkspace/EclipseProjectName/WebContent/WEB-INF/services 中。此目录包含 /META-INF/services.xml。制作 .aar 文件的过程必须在此文件夹中查找。

# php - 防止在 PHP 中间接访问网站

> ID：15755429
> 
> 赞同：0
> 
> 时间：2013-04-02T03:12:25.047
> 
> 标签：php, security

我有一个查询。有没有办法检测网站是直接访问还是间接访问？让我举个例子让你更清楚我的问题。

假设我有一个图像共享网站。当用户打开网站并查看图像时，它会增加图像的总展示次数。但是我看到有人在论坛中嵌入 DIRECT image Url 而不是缩略图代码，以增加印象。这应该是对我要阻止的网站的间接访问。

我只是想要一个解决方案，它只允许直接查看网站，而不是通过在论坛中错误嵌入 URL 或通过 iFrame 等来查看网站。

PHP中有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:15:04.610

您需要防止[对](http://simple.wikipedia.org/wiki/Hotlinking)您的图像进行热链接。我引用

> 盗链是互联网上使用的一个术语，指的是通过链接到另一个网站上的相同图像来在一个网站上显示图像的做法

将以下内容添加到您的`.htaccess`文件中并根据需要更改域。

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?yourdomain.com [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ - [NC,F,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:14:27.410

检查`HTTP referer`标题。虽然这可以被欺骗，但这是最简单的方法。

[http://en.wikipedia.org/wiki/HTTP_referer](http://en.wikipedia.org/wiki/HTTP_referer)

# html5-video - 带有 Cuepoint JS 的 Youtube 视频

> ID：15755430
> 
> 赞同：1
> 
> 时间：2013-04-02T03:12:34.900
> 
> 标签：html5-video, youtube-javascript-api, popcornjs

有没有办法用 Cuepoint JS [http://cuepoint.org](http://cuepoint.org)处理 Youtube 视频？或者你知道任何替代方案吗？

我尝试了 popcorn.js，但它很复杂，我必须在 Youtube 播放器上进行很多更改，因为它不请求 HTML5 视频等等......

而且 Video.js 也有处理 Youtube 视频的问题......

我不想为普通的 HTML5 播放器和不同的 Youtube 播放器编写一个脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:53:49.400

[以及 video-js youtube 播放列表播放器的字幕/字幕](https://stackoverflow.com/questions/16115808/and-captions-subtitles-to-video-js-youtube-playlist-player)

[http://bestimage.x10.mx/Playlist_yt/YouTube_PlayList.html](http://bestimage.x10.mx/Playlist_yt/YouTube_PlayList.html)

# jquery - 如何在 asp.net mvc 4 中使用 jquery？

> ID：15755433
> 
> 赞同：7
> 
> 时间：2013-04-02T03:12:52.277
> 
> 标签：jquery, asp.net-mvc

我正在使用带有 MVC 的 ASP.Net 4 的站点上工作。我非常熟悉 WebForms 和 javascript，并且使用过 jquery，但捆绑让我感到困惑。据我所知，所有 javascript 文件都包含在 BundleConfig.cs 中，并与 site.master 文件中的标头一起下载。所以，我应该能够将我的附加函数和 jquery 调用放在新标签中。

但是很明显，jquery 函数应该进入文件的方式与我习惯的完全不同，我根本无法操作任何东西。

是否有任何简短的教程可以向我展示在 MVC 中执行此操作的正确方法？而不是 Razor，我在这里不需要两条学习曲线。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T05:05:18.490

在 MVC 中没有“正确”的方法可以做到这一点，这完全取决于你。

有几种常见的方法可以做到这一点。

您可以将 JQuery 函数“内联”放置在您的视图中，方法是将它们放在`script`标签中，例如

```
<script>
    $('a').click(function() { alert("Click"); } );
</script> 
```

但是，通常不建议这样做，因为它会使您的 JS 更难管理和重用，并使您的 HTML 膨胀。如果您有一个真正的一小段脚本，并且觉得不值得为其创建一个新文件，您可能只会这样做。

或者，您可以将您的 html 放在单独的 js 文件中，并在您的视图中包含对这些文件的引用，例如

`<script src="~/Scripts/mycusomtjquery.js"></script>`

这更好，因为它确实允许重复使用并且不会使您的 HTML 膨胀，而且浏览器能够缓存它。

一个更好的选择是利用 MVC 4 中的捆绑功能并使用它。将你的 js 放在一个单独的文件中，将它注册为一个包，然后在你的视图中呈现它

例如

在单独的文件中创建你的 js 并将你的自定义代码放在那里。

把它放在 App_Start\BundleConfig.cs

```
bundles.Add(new ScriptBundle("~/bundles/mycustomjquery")
                    .Include("~/Scripts/mycustomjquery.js")
                    .Include("~/Scripts/myothercustomjquery.js")); 
```

添加调用以在您的视图中呈现捆绑包

```
@Scripts.Render("~/bundles/mycustomjquery") 
```

这将以一种可以被浏览器缓存的压缩和合并方式呈现您的 js。

您可以对其进行配置以适合。选择如何捆绑你的 js 文件、制作多少个实际的 js 文件、在哪里渲染它们等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:22:05.470

我不明白你的问题，但你知道捆绑是什么吗？首先，看一下这篇文章以了解完整的功能： [http ://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

您不需要在 asp.net mvc 中使用 Bundles。您可以将其从项目中删除并在布局页面中添加您的 javascripts 文件，而不会出现问题。您可以手动添加到布局页面，并将您的功能添加到另一个 js 文件中，并包含在视图（或布局）中。与 WebForms 相比，Asp.Net MVC 是另一种方法。

`@`Razor 是一个 Viewengine，您可以使用char编写服务器端代码，例如：`@Html.TextBox("Name")`我们从 asp.net mvc 3 开始就有，但您也可以编写 ASPX 引擎，例如：`<%: Html.TextBox("Name") %>`在 WebForms 中执行某些操作。（我推荐 Razor，因为它的编写、阅读和使用速度更快）。

在此处了解有关 ViewEngines 的更多信息： [http ://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

# java - Java Web 应用程序框架，用于处理需要长时间计算的进程的客户端回调

> ID：15755439
> 
> 赞同：0
> 
> 时间：2013-04-02T03:13:19.700
> 
> 标签：java, web, frameworks, callback

我想获得一些关于在 java web 框架中处理长计算任务以及如何回调到浏览器客户端的方法的一些输入。

我遇到过 JBoss 远程处理和 Spring 远程处理。

希望能够让客户端发送处理请求。处理可能需要 X 时间，并在完成后响应客户端。

欢迎任何利弊和建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:26:35.247

有几种方法可以实现：

*   使用带有[AsyncTask](https://blogs.oracle.com/enterprisetechtips/entry/asynchronous_support_in_servlet_3)的 Servlet 3.0 。
*   将[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)实现与您的 UI 的长轮询或服务器推送相结合。
*   使用 HTML5 构建您的 UI，并利用[WebSockets](http://en.wikipedia.org/wiki/WebSocket)（最不便携的解决方案）。

JBoss 和 Spring Remoting也*可能*是可行的解决方案，但它们确实是为不同的目的而构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:46:13.610

为 Web 应用程序执行长时间的计算任务和服务器推送是两件不同的事情，真的。

如前所述，使用 Comet 的 Web 应用程序将允许服务器推送（这是一个术语，即 Web 服务器可以在浏览器不发起请求的情况下向浏览器推送更新）。有一些框架建立在此之上。ICEfaces、Primefaces 和 ZK 是三个支持这一点的 Web 应用程序框架。Flex 也支持从服务层推送数据。

异步执行可以是任何简单的东西，就像产生的线程运行并具有足够的信息来启动服务器推送过程回客户端。您还可以使用基于消息的解决方案来处理长流程的异步执行。

那里有很多选择，实际上取决于您当前正在使用哪些工具/框架并找到合适的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T18:50:51.003

您可以使用 GWT，它可以很好地处理异步调用。我在很多应用程序的后台完成了大量的数据加载。一直以来，用户都可以与各种视图等进行交互......它非常无缝地集成到 GWT 中，具有他们自制的 rpc 机制。此外，如果您也需要，也可以使用 JBoss Errai 进行推送（当然在 gwt 内）。值得一看。

我必须将 Icefaces 用于一些遗留项目，而且做同样的事情非常困难。GWT 只是让它变得简单。Icefaces 您需要使用 JS，除非您将异步调用绑定到按钮等组件并确保请求没有排队。很乱。

我猜只是我的两分钱。

# matlab - 在 Matlab 中绘制 3D 点并通过线按顺序连接它们

> ID：15755446
> 
> 赞同：0
> 
> 时间：2013-04-02T03:14:06.293
> 
> 标签：matlab, mesh, matlab-figure, scatter-plot

我有一个包含 3D 浮点数的数组。我不仅想用图形描绘它们，还想用线条将它们连接起来。

示例）假设我们有一个名为 X 的数组：

```
X=[0, 0, 0; 0.48, -0.88, 0.09; -1.06, 0.55, 0.9; -0.65, 1.5, -1.44; 1.1, 0.59,
-1.11;0.76, 0.86, -0.52; -1.08, -0.28, 0.55; 1.47, -1.21, 0.14; 1.42, -2.15, 0.71; -0.64,  
1.87, 2.4;2.32, -2.44, 2.02; 2.25, -2.56, -3.03; 2.35, 2.65, -1.5; 0.23, -2.25, 2.78; 2.47,  
-3.12,  -1.91; 2.27, 1.37, -3.05; 2.3, 1.9, -1.29; -1.77, -0.51, 2.33];  

    X1= [0,0,0]  
    X2=[0.48, -0.88, 0.09]  
    X3=[-1.06, 0.55, 0.9] ... 
```

现在我希望将 X1...Xn 绘制为图中的点，然后 X1 连接到 X2，X2 连接到 X3，X3 连接到 X4，等等

我怎么能那样做？

这是我所做的，但我得到了一个错误的数字：

```
figure;hold on;  
    P=[];  
    for i=1:size(X,1)  
    x=X(i,1);  
    y=X(i,2);  
    z=X(i,3);  
    A=[ x,y,z];  
    P=vertcat(P,A);  
    plot(P);  
    end 
```

这是输出：

![在此处输入图像描述](https://i.stack.imgur.com/OSBJX.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:22:29.157

查看[`plot3`文档](http://www.mathworks.com.au/help/matlab/ref/plot3.html)。

特别是，`plot3(X, Y, Z)`将绘制点并用线连接它们。

在你的情况下：

```
plot3(X(:, 1), X(:, 2), X(:, 3)) 
```

# ios - a.dylib和dylib的文件格式有什么区别

> ID：15755449
> 
> 赞同：0
> 
> 时间：2013-04-02T03:14:48.037
> 
> 标签：ios, objective-c

我的mac里有两个文件`libpcap.dylib`，`libpcap.A.dylib`. 我想知道他们之间有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:19:55.550

前者是后者的符号链接，至少在我的系统上是这样。您可以`ls`从终端使用来检查文件。

```
macmini:stackoverflow samm$ ls -l /usr/lib/libpcap.*
-rwxr-xr-x  1 root  wheel  449040 Jul 23  2011 /usr/lib/libpcap.A.dylib
lrwxr-xr-x  1 root  wheel      15 Jul 23  2011 /usr/lib/libpcap.dylib -> libpcap.A.dylib
macmini:stackoverflow samm$ 
```

不知道`.A.dylib`后缀有没有特殊，[看`libpcap`Makefile](http://www.opensource.apple.com/source/libpcap/libpcap-29/Makefile)可以看到是在`install`规则中显式创建的

```
$(LN) -s libpcap.A.dylib $(DSTROOT)/usr/lib/libpcap.dylib 
```

# javascript - 如何使用 jQuery.support 检测 IE7 及更低版本？

> ID：15755459
> 
> 赞同：6
> 
> 时间：2013-04-02T03:15:38.163
> 
> 标签：javascript, jquery, jquery.support

目前我正在使用 jQuery.browser 来检测 IE7 及更低版本

```
if ($.browser.msie && parseInt($.browser.version) <= 7) {
    //codes
} 
```

但是 jQuery.browser 在 jQuery 1.3 中被弃用并在 jQuery 1.9 中被删除，我从 jQuery 网站上读到我们应该使用特征检测来代替（jQuery.support）。

那么，如何使用 jQuery.support 检测 IE7 及更低版本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T04:18:43.337

最好的方法是使用条件注释并使用 jQuery 的`hasClass()`.

```
<!--[if lt IE 7]>      <html class="ie6"> <![endif]-->
<!--[if IE 7]>         <html class="ie7"> <![endif]-->
<!--[if IE 8]>         <html class="ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html>         <!--<![endif]--> 
```

在您的 jQuery 中，检查 IE 7：

```
// Check IE 7
if ($('html').hasClass('ie7'); 
```

这种方法无论如何**都不能被欺骗。**另请参阅：Paul Irish 的[条件样式表。](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T04:39:38.997

这个小功能会告诉你按钮代码是否损坏：

```
function isButtonBroken()
{
    var b = document.createElement('button');

    b.value = 1;
    b.appendChild(document.createTextNode('2'));

    return b.value === '12';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T03:56:34.663

jQuery.Support 不给你浏览器。从 jQuery 1.9 开始，不推荐使用 $.browser 函数。如果您快速完成后最简单的方法是使用浏览器本机导航器对象。

```
//check for IE7
if(navigator.appVersion.indexOf("MSIE 7.")!=-1) 
```

使用 Modernizr

```
//check for IE7 or less
if ($('html').hasClass('lt-ie7'); 
```

但是不推荐这样做，因为浏览器很容易“欺骗”这个对象。使用诸如 Moderizer 之类的库来进行特征检测是现代方法。有关更多详细信息，请参阅：**[使用 JAVASCRIPT/JQUERY 检查 IE 版本的 5 种以上方法](http://www.jquery4u.com/browsers-2/check-ie-version/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T04:19:13.417

正如其他人所说，尝试检测浏览器版本是一个坏主意，您应该依赖功能检测。

也就是说，检测*IE 浏览器渲染引擎*的唯一可靠方法是使用条件注释。您可以使用这个小片段为您获取它：

```
var ie = (function(){

    var undef,
        v = 3,
        div = document.createElement('div'),
        all = div.getElementsByTagName('i');

    while (
        div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
        all[0]
    );

    return v > 4 ? v : undef;

}()); 
```

请记住，这**仅适用于支持条件注释的 IE 版本**，**不适用于 IE10 或更高**版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T08:40:23.473

无脚本解决方案可以基于为按钮提供一种提交类型和一个名称，即您要提交的值。然后，在服务器上，使操作依赖于 name 属性的值，而不是值，例如

```
<button type="submit" name="whatever" value="Click me 0">Click me 0</button> 
```

现在每个浏览器都会将按钮提交为`&whatever=Click+me+0`. 我没有 IE 7 可以测试，但从你发布的内容来看，应该可以。

如果表单中有多个按钮，只有点击提交表单的那个会成功，所以只会提交那个按钮的名称和值。

当然最简单的是使用输入类型提交，但也许你不能这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-31T09:21:24.950

U 可以使用以下条件进行检测。

```
if (!$.support.leadingWhitespace) {
    //IE7 stuff
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-02T04:01:42.747

您无法使用 jQuery.support 检测浏览器。

与其检查浏览器，不如检查要使用的浏览器的**功能。**

例如，如果你想使用 ajax 功能，你可以通过 jQuery.support.ajax 检查 XMLHttpRequest 对象的存在

```
var ajaxEnabled = $.support.ajax;
if (ajaxEnabled) {
  // do something
} 
```

* * *

[jQuery.browser 文档](http://api.jquery.com/jQuery.browser/)说

> jQuery.browser 可能会在 jQuery 的未来版本中移动到插件中。

并且还说

> 因为 $.browser 使用 navigator.userAgent 来确定平台，所以它很容易受到用户的欺骗或浏览器本身的虚假陈述。在可能的情况下，最好完全避免使用特定于浏览器的代码。$.support 属性可用于检测对特定功能的支持，而不是依赖于 $.browser。

* * *

您可以制作自己的浏览器检测代码。见下文。但请记住，正如 jQuery 文档所说，这段代码很容易受到**欺骗。**

```
var ua = navigator.userAgent.toLowerCase();

var isOpera : (ua.indexOf('opera') >= 0) ? true : false;
var isFirefox : (ua.indexOf('firefox') >= 0) ? true : false;
var isMSIE : (ua.indexOf('msie') >= 0) ? true : false;
var isMSIE6 : (ua.indexOf('msie 6.0') >= 0) ? true : false;
var isMSIE7 : (ua.indexOf('msie 7.0') >= 0) ? true : false;
var isMSIE8 : (ua.indexOf('msie 8.0') >= 0) ? true : false;
var isMSIE9 : (ua.indexOf('msie 9.0') >= 0) ? true : false;
// and other browsers... 
```

# objective-c - 为什么 UITableViewCell 的 self.frame 和 self.contentView.frame 经常不同？

> ID：15755462
> 
> 赞同：6
> 
> 时间：2013-04-02T03:15:55.660
> 
> 标签：objective-c, xcode4.5

我洒了

```
NSAssert(abs(self.frame.size.height-self.contentView.frame.size.height)<=1,@"Should be the same"); 
```

在创建要返回的 UITableViewCell 时的各个位置。

结果往往不同。有时是 1 个像素，有时是 2 个像素。

我想知道问题是什么？cellForRowAtIndexPath 中是否有一些使它们不同的东西？

他们的开始是一样的。没有编辑等。

看看这个简单的片段

```
BGDetailTableViewCell * cell= (BGDetailTableViewCell*)[tableView dequeueReusableCellWithIdentifier:[BGDetailTableViewCell reuseIdentifier]];

if (cell==nil)
{
    cell = [[BGDetailTableViewCell alloc]init];
}
else
{
    NSAssert(abs(cell.frame.size.height-cell.contentView.frame.size.height)<=1,@"Should be the same"); //Sometimes this fail
}

NSOrderedSet *Reviews = [self.businessDetailed mutableOrderedSetValueForKey:footer.relationshipKey];
Review * theReview = [Reviews objectAtIndex:row];
cell.theReview = theReview;
NSAssert(abs(cell.frame.size.height-cell.contentView.frame.size.height)<=1,@"Should be the same");//This one never fail right before returning cell
return cell;

`NSAssert(abs(cell.frame.size.height-cell.contentView.frame.size.height)<=1,@"Should be the same")`; never fails right before returning the cell. 
```

但是，有时在我将单元格出列后，它会失败。

这是结果

```
(lldb) po cell
$0 = 0x0c0f0ae0 <BGDetailTableViewCell: 0xc0f0ae0; baseClass = UITableViewCell; frame = (0 424; 320 91); hidden = YES; autoresize = W; userInteractionEnabled = NO; layer = <CALayer: 0xc01e800>>
(lldb) po cell.contentView
$1 = 0x0c086080 <UITableViewCellContentView: 0xc086080; frame = (10 1; 300 89); gestureRecognizers = <NSArray: 0xc0c7ee0>; layer = <CALayer: 0xc0ebbf0>> 
```

顺便说一下，tableView 处于分组模式。我认为这与它有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-16T12:37:21.833

这两个矩形在不同的坐标系中，不一定匹配。

`cell.frame`指单元格在其父视图坐标系 ( `cell.superview`) 中的矩形。单元格的超级视图是 UITableView。单元格的框架将由表格视图操作，以便正确布局。这还包括修改高度以匹配其`rowHeight`属性或`tableView:heightForRowAtIndexPath:`委托方法返回的值。

细胞的`contentView`“内部”是细胞。它的超级视图是单元格本身，其子视图具有自己的局部坐标系。这些不是由 tableView 操作的，而是由单元格（例如您的单元格子类）本身在其上设置的约束。您的子类可以实现`layoutSubviews`以按照`contentView`您想要的方式调整大小。

如果你想确保你的 contentView 与你的单元格的高度（和边界）匹配，在你的`UITableViewCell`子类中，`layoutSubviews`像这样实现：

```
-(void)layoutSubviews
{
    self.contentView.frame = self.bounds;
} 
```

`contentView`您可以对所需的框架进行任何修改，但请考虑使用超级视图`bounds`而不是`frame`.

# android - 如何隐藏分享操作提供者附近的分享操作（使用最多）图标？

> ID：15755465
> 
> 赞同：11
> 
> 时间：2013-04-02T03:16:19.000
> 
> 标签：android, android-actionbar, actionbarsherlock, shareactionprovider

看图片。如何隐藏表示分享到 Pinterest 的图标“P”？

![在此处输入图像描述](https://i.stack.imgur.com/JqF2M.jpg)

它们都在操作栏上，我使用 ActionBarSherlock。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-25T06:08:13.350

如果您希望**保留所有共享历史数据模型**，但不想要额外的“默认共享活动”icom。使用 ShareActionProvider时[如何关闭共享历史记录？](https://stackoverflow.com/questions/10706564/how-do-you-turn-off-share-history-when-using-shareactionprovider)还不够好。

你应该做的是：

*   将这些类从 ActionBarSherlock 复制到您的项目代码中
    *   ShareActionProvider.java
    *   ActivityChooserView.java
*   在您的 ShareActionProvider.java 类中，导入您刚刚复制的 ActivityChooserView.java 而不是 ActionBarShelock 文件位置
*   在 ActivityChooserView.java -
    *   找到线`if (activityCount > 0 && historySize > 0)`
    *   将此行替换为`if (false)` *（它非常难看，但它是最快的修复。您可以深入研究代码以删除所有出现的 DefaultActivity 实现）*

*编辑：* 不要忘记为`ActionProvider`您的菜单项设置新的，从 XML 它看起来像：`android:actionProviderClass="com.*.CustomShareActionProvider"`

就是这样！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-11T06:54:57.580

我找到了解决这个问题的方法。我正在使用支持库 23.0.1，我没有在其他支持库版本上测试过这个。

解决方案很简单，当您创建 ShareActionProvider 时，只需覆盖方法 onCreateActionView() 并为其返回 null。然后您可以在弹出菜单中跟踪所有历史记录，但历史记录不会显示在工具栏中。

这是一个代码示例：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuItem item = menu.add(Menu.NONE, R.id.menu_share, Menu.NONE, R.string.share);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    mShareActionProvider = new ShareActionProvider(this) {
        @Override
        public View onCreateActionView() {
            return null;
        }
    };
    item.setIcon(R.drawable.abc_ic_menu_share_mtrl_alpha);
    MenuItemCompat.setActionProvider(item, mShareActionProvider);
    return true;
} 
```

目前，我没有发现使用此解决方法有任何问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-12T21:39:47.550

根据 Sean 的回答，我创建了必要的类，您可以将它们复制到您的项目中（[https://gist.github.com/saulpower/10557956](https://gist.github.com/saulpower/10557956)）。这不仅增加了关闭历史记录的功能，还可以过滤您想要共享的应用程序（如果您知道包名称）。

```
private final String[] INTENT_FILTER = new String[] {
        "com.twitter.android",
        "com.facebook.katana"
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.journal_entry_menu, menu);

    // Set up ShareActionProvider's default share intent
    MenuItem shareItem = menu.findItem(R.id.action_share);

    if (shareItem instanceof SupportMenuItem) {
        mShareActionProvider = new ShareActionProvider(this);
        mShareActionProvider.setShareIntent(ShareUtils.share(mJournalEntry));
        mShareActionProvider.setIntentFilter(Arrays.asList(INTENT_FILTER));
        mShareActionProvider.setShowHistory(false);
        ((SupportMenuItem) shareItem).setSupportActionProvider(mShareActionProvider);
    }

    return super.onCreateOptionsMenu(menu);
} 
```

# sql - 几行具有完全相同的值，但只有一列返回不同的值；如何获取该值并为此创建另一列？

> ID：15755474
> 
> 赞同：0
> 
> 时间：2013-04-02T03:17:07.293
> 
> 标签：sql, sql-server, tsql

所以这里是：我加入了几个表并得到这样的结果：

```
ContactID    Name    Title      Phone
1234567      John    Manager    999999
1234567      John    Manager    888888 
```

我想在结果中获取唯一的 ContactID 并将另一个电话值设置为“Phone2”。（有2个以上，Phone3，Phone4）

所以我想看到的结果是这样的

```
ContactID    Name   Title             Phone    Phone2     Phone3    Phone4...
1234567      John   Manager           999999    888888     NULL      NULL 
```

有什么帮助吗？我尝试使用 Pivot，但似乎聚合函数在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:37:44.103

您仍然可以使用 PIVOT，尽管您必须组成一个数据透视列，为此我使用下面的 ROW_NUMBER() 函数。我在下面允许了 4 个电话号码，只需扩展模式，例如有 2 个位置`[4]`，如果您需要满足更多需求。

下面我展示了来自名为“data”的示例表的数据。如果你有一个复杂的查询，你可以先用一个通用表表达式来命名它，即

```
;with data as (
   <your entire complex query that produces the
    columns: ContactId, Name, Title, Phone>
)
select ContactID, Name, Title,
       [1] as Phone1,
       [2] as Phone2,
       [3] as Phone3,
       [4] as Phone4
  from (
    select ContactID, Name, Title, Phone,
           Row_Number() over (partition by ContactID, Name, Title
                              order by Phone) RN
      from data) p
pivot (max(Phone) for RN in ([1],[2],[3],[4])) v; 
```

[SQL小提琴](http://sqlfiddle.com/#!6/aa02b/2)

**MS SQL Server 2012 架构设置**：

```
create table data (
  ContactID int,
  Name varchar(10),
  Title varchar(10),
  Phone varchar(20));
insert data values
(1234561,      'Jill',    'Employee',    999991),
(1234562,      'Joel',    'Employee',    999992),
(1234567,      'John',    'Manager',    999999),
(1234567,      'John',    'Manager',    888888); 
```

**查询 1**：

```
select ContactID, Name, Title,
       [1] as Phone1,
       [2] as Phone2,
       [3] as Phone3,
       [4] as Phone4
  from (
    select ContactID, Name, Title, Phone,
           Row_Number() over (partition by ContactID, Name, Title
                              order by Phone) RN
      from data) p
pivot (max(Phone) for RN in ([1],[2],[3],[4])) v; 
```

**[结果](http://sqlfiddle.com/#!6/aa02b/2/0)**：

```
| CONTACTID | NAME |    TITLE | PHONE1 | PHONE2 | PHONE3 | PHONE4 |
-------------------------------------------------------------------
|   1234561 | Jill | Employee | 999991 | (null) | (null) | (null) |
|   1234562 | Joel | Employee | 999992 | (null) | (null) | (null) |
|   1234567 | John |  Manager | 888888 | 999999 | (null) | (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:56:07.063

如果您愿意，您可以将所有电话号码放在一列中，这可能对您更有用，具体取决于您的情况。

```
第一个最后一个电话
约翰经理 888888,999999,111111

```

请参阅[http://www.centrolutions.com/blog/post/2010/03/29/Selecting-Multiple-Rows-as-a-Single-Column-in-SQL.aspx](http://www.centrolutions.com/blog/post/2010/03/29/Selecting-Multiple-Rows-as-a-Single-Column-in-SQL.aspx)

# list - 在 Lisp 中不使用 mapcar 将列表中的数字相乘（按坐标）

> ID：15755477
> 
> 赞同：2
> 
> 时间：2013-04-02T03:17:21.613
> 
> 标签：list, recursion, lisp, vector-multiplication

我的代码输出有问题，我认为是在检查列表是否为空的条件时。

我要完成的问题是：编写一个函数`vecmul`，将两个简单的数字列表作为输入。vecmul 应该将这些列表按坐标相乘，就像向量相乘一样。假设这两个列表的长度相同。[例如，`(vecmul '(2 3 4 5) '(1 4 5 2))`返回`(2*1 3*4 4*5 5*2)`或`(2 12 20 10)`。您不得使用`mapcar`此功能]

到目前为止我有

```
(defun vecmul (list list2)
  (cond ((null list) 0)
     (t (cons (* (car list) (car list2))
                 (vecmul (cdr list) (cdr list2))))))

[170]> (setq l '(2 4 6))
(2 4 6)
[171]> (setq r '(1 3 5))
(1 3 5)
[172]> (vecmul l r)
(2 12 30 . 0) 
```

我得到了正确的数字，只是列表添加了“。” 和列表末尾的“0”。我很确定这是因为我没有正确停止递归或没有正确使用条件。我只是不完全确定如何纠正它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T04:19:09.223

你几乎是对的。`0`但是，当正确的终止为 时，您将使用 终止您的列表`nil`。此代码有效：

```
(defun vecmul (list list2)
  (cond ((null list) nil)
     (t (cons (* (car list) (car list2)) (vecmul (cdr list) (cdr list2)))))) 
```

当你打电话时`(cons 1 2)`，你得到的缺点单元格被写入`(1 . 2)`。该符号`(1 2 3 4 5)`只是 的简写`(1 . (2 . (3 . (4 . (5 . nil)))))`。如果`cdr`最后一个 cons 单元格的 是`6`，不是`nil`，那么你得到`(1 . (2 . (3 . (4 . (5 . 6)))))`，它缩短为`(1 2 3 4 5 . 6)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T07:34:50.777

尼尔福雷斯特回答了你的问题。

还有一些说明。在 Lisp 中使用现代名称：`first`和`rest`.

```
(defun vecmul (list1 list2)
  (cond ((null list1) nil)
        (t (cons (* (first list1) (first list2))
                 (vecmul (rest list1) (rest list2)))))) 
```

如果你有一个简单的真假决定，`IF`可能会更好。由于涉及列表操作，我将其写为以下而不使用`WHEN`.

```
(defun vecmul (list1 list2)
  (if (null list1)
      nil
    (cons (* (first list1) (first list2))
          (vecmul (rest list1) (rest list2))))) 
```

**最好在实际代码**中使用循环构造或映射。如上所述，递归具有堆栈深度限制。循环没有这种限制。

```
(defun vecmul (list1 list2)
  (loop for e1 in list1 and e2 in list2
        collect (* e1 e2))) 
```

或者

```
(defun vecmul (list1 list2)
  (mapcar #'* list1 list2)) 
```

# php - 选择语句错误

> ID：15755480
> 
> 赞同：0
> 
> 时间：2013-04-02T03:17:27.500
> 
> 标签：php, oracle, select, pdo

我尝试以下代码：

```
$data = $this->_db->select()->from(´IncidentInformation´,array(´IncidentID´,´ContactName´))->where("ContactName=?",$numAlert);
$result = $this->_db->fetchAll($data);
return $result; 
```

但我收到以下错误：

> SQLSTATE [HY000]：一般错误：904 OCIStmtExecute：ORA-00904：“CONTACTPHONE”：无效标识符（ext\pdo_oci\oci_statement.c:146）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:37:01.227

尝试：

```
$data = $this->_db->select()->from('IncidentInformation',array('IncidentID','ContactName'))->where("ContactName=?",$numAlert);
$result = $this->_db->fetchAll($data);
return $result; 
```

# python - lxml、xi:include 和原始文件

> ID：15755481
> 
> 赞同：1
> 
> 时间：2013-04-02T03:17:28.023
> 
> 标签：python, xml, lxml, xinclude

我正在使用 lxml 解析包含 xi:include 元素的文件，并且我正在使用 xinclude() 解析包含。

给定一个元素，有没有办法识别该元素最初出现的文件和源代码行？

例如：

```
from lxml import etree
doc = etree.parse('file.xml')
doc.xinclude()
xpath_expression = ...
elt = doc.xpath(xpath_expression)
# Print file name and source line of `elt` location 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T03:53:09.497

xinclude 扩展将为顶级扩展元素添加一个 xml:base 属性，并且子节点的 elt.base 和 elt.sourceline 也会更新，因此：

```
print elt.base, elt.sourceline 
```

会给你你想要的。

如果 elt 不是 xinclude 扩展的一部分，则 elt.base 将指向基本文档 ('file.xml')，而 elt.sourceline 将是该文件中的行号。（请注意，如果元素位于多行上，源代码通常似乎实际上指向元素标记结束的行，而不是它开始的行，就像验证错误消息通常指向发生错误的结束标记一样。 )

您可以找到最初的 xincluded 元素并使用以下命令进行检查：

```
xels = doc.xpath( '//*[@xml:base] )
for x in xels: 
     print x.tag, x.base, x.sourceline
     for c in x.getchildren():
             print c.tag, c.base, c.sourceline 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-18T15:36:08.377

遗憾的是，当前版本的 lxml 不再包含此功能。但是，我使用简单的自定义加载程序开发了一种解决方法。这是一个测试脚本，它演示了上述方法中的错误以及解决方法。请注意，此方法仅更新`xml:base`包含文档的根标记的属性。

程序的输出（使用 Python 3.9.1，lxml 4.6.3）：

```
Included file was source.xml; xinclude reports it as document.xml
Included file was source.xml; workaround reports it as source.xml 
```

这是示例程序。

```
# Includes
# ========
from pathlib import Path
from textwrap import dedent
from lxml import etree as ElementTree
from lxml import ElementInclude

# Setup
# =====
# Create a sample document, taken from the `Python stdlib 
# <https://docs.python.org/3/library/xml.etree.elementtree.html#id3>`_...
Path("document.xml").write_text(
    dedent(
        """\
        <?xml version="1.0"?>
        <document xmlns:xi="http://www.w3.org/2001/XInclude">
            <xi:include href="source.xml" parse="xml" />
        </document>
        """
    )
)

# ...and the associated include file.
Path("source.xml").write_text("<para>This is a paragraph.</para>")

# Failing xinclude case
# =====================
# Load and xinclude this.
tree = ElementTree.parse("document.xml")
tree.xinclude()

# Show that the ``base`` attribute refers to the top-level 
# ``document.xml``, instead of the xincluded ``source.xml``.
root = tree.getroot()
print(f"Included file was source.xml; xinclude reports it as {root[0].base}")

# Workaround
# ==========
# As a workaround, define a loader which sets the ``xml:base`` of an
# xincluded element. While lxml evidently used to do this, a change
# eliminated this ability per some `discussion 
# <https://mail.gnome.org/archives/xml/2014-April/msg00015.html>`_, 
# which included a rejected patch fixing this problem. `Current source 
# <https://github.com/GNOME/libxml2/blob/master/xinclude.c#L1689>`_ 
# lacks this patch.
def my_loader(href, parse, encoding=None, parser=None):
    ret = ElementInclude._lxml_default_loader(href, parse, encoding, parser)
    ret.attrib["{http://www.w3.org/XML/1998/namespace}base"] = href
    return ret

new_tree = ElementTree.parse("document.xml")
ElementInclude.include(new_tree, loader=my_loader)

new_root = new_tree.getroot()
print(f"Included file was source.xml; workaround reports it as {new_root[0].base}") 
```

# c++ - 在 Pub/Sub 实现中处理可变参数的好方法

> ID：15755484
> 
> 赞同：1
> 
> 时间：2013-04-02T03:17:37.480
> 
> 标签：c++

我正在为一个项目实施一个`Pub/Sub`模式。`C++`

我需要在`trigger`调用中传递一个变量号或参数（可能是不同的类型）：

```
myclass.trigger("update:model", modelInstance, 10); 
```

然后我应该能够在监听事件时通过回调访问它们：

```
myclass.on("update:model", &callback); 
```

我知道，`va_list`但我不确定这是在这种情况下的最佳选择。此外，它需要明确知道第一个参数类型才能执行`va_start`.

也许只是接受一个论点，某种容器，包括那里的一切？

我正在寻找建议或一些想法来实现这一点。

# java - 如何使用hibernate在spring mvc中保存模型返回视图的列表

> ID：15755485
> 
> 赞同：0
> 
> 时间：2013-04-02T03:17:41.550
> 
> 标签：java, hibernate, session, spring-mvc

**控制器**

```
 @RequestMapping(value = "/chartofaccount", method = RequestMethod.GET)
public String getChartofAccount(Model model) {

    try {

        List CoaCategoryList = new ArrayList();
        COACategoriesModel obj;
        List<COACategoriesModel> getCoaCategoryList = coaCategoriesService
                .getAllCOACategories();

        if (getCoaCategoryList.size() > 0) {
            for (int i = 0; i < getCoaCategoryList.size(); i++) {

                obj = getCoaCategoryList.get(i);
                CoaCategoryList.add(obj.getId());
                CoaCategoryList.add(obj.getName());
                model.addAttribute("list", CoaCategoryList);

            }
        }

    } catch (Exception ex) {
        log.error("Exception.." + ex);

    }

    return "fin/coa";
} 
```

**鳍/coa.jsp**

```
<ct:Select setIdentity="coaCategoryId" list="${list}" selected="0" /> 
```

上面的列表成功填充，在我的自定义标签中。

```
but 
```

**另一个控制器**

```
 @RequestMapping(value = "/addCoaMaintenance", method = RequestMethod.POST)
public String addCoaCategory(
        @RequestParam("mainAccount") long mainAccount,
        @RequestParam("subAccount") long subAccount,
        @RequestParam("accountName") String accountName,
        @RequestParam("coaCategoryId") long coaCategoryId,
        @RequestParam("postingType") int postingType,
        @RequestParam("typicalBalance") int typicalBalance,
        @RequestParam("isActive") int isActive,
        Model model) {

     Date sysdate = null;
     String Message="";

     try{

     sysdate = new Date();

     Message="Operation Fail!";
     COAMaintenanceModel coaMaintenanceModel= new COAMaintenanceModel(mainAccount, subAccount, accountName, coaCategoryId, postingType, typicalBalance, isActive, GetSessionValue.getSysUserId(), GetSessionValue.getSysUserIp(), sysdate, 0);
     coaMaintenanceService.AddCOAMaintenance(coaMaintenanceModel);

     Message="Account Save Successfully";
     model.addAttribute("result_success", Message);

     }catch(Exception ex){
         log.error("Exception.."+ex);
         model.addAttribute("result_fail", Message);
     }

     return "fin/coa";

    } 
```

作为第二个控制器返回**fin/coa.jsp**，列表为空。如何控制这个？我正在使用spring Mvc + hibernate。在我需要之前，如何使第一个控制器列表可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:25:39.043

我不确定我是否正确理解了这个问题，但是，按照我的看法，您没有在第二个处理程序方法/控制器中包含模型中的列表。

两个处理程序方法（@RequestMapping 注释方法）是否在同一个控制器类中？如果是，一种解决方案是在填充列表的方法上添加@ModelAttribute。例如，您将添加以下内容：

```
@ModelAttribute("list")
public List getCategoryList() {
    List CoaCategoryList = new ArrayList();
    COACategoriesModel obj;
    List<COACategoriesModel> getCoaCategoryList = coaCategoriesService
            .getAllCOACategories();
    // this if is unncessary
    // if (getCoaCategoryList.size() > 0) {
    for (int i = 0; i < getCoaCategoryList.size(); i++) {
        obj = getCoaCategoryList.get(i);
        CoaCategoryList.add(obj.getId());
        CoaCategoryList.add(obj.getName());            
    }    
    return CoaCategoryList;
} 
```

这将使该控制器中所有请求的模型中的属性“列表”可用，您无需通过 model.addAttribute(...) 添加它。

其他解决方案是在每个处理程序中手动填充列表并将其手动添加到模型中（您已经为第一个处理程序方法这样做了，但在第二个处理程序方法中没有这样做）。

如果处理程序方法不在同一个控制器类中，那么您需要在渲染视图之前再次确保列表在模型中（通过使两个控制器类扩展一个公共抽象控制器，您是否添加了填充列表的功能，或者手动填充模型，或其他方式）。

PS。另外，请考虑查看“Java 编程语言的代码约定”（例如，Java 中的变量名通常以小写字母开头以区分它们与类名）[http://www.oracle.com/technetwork/java/codeconv- 138413.html](http://www.oracle.com/technetwork/java/codeconv-138413.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:39:37.717

一种解决方案：测试您的列表是否为空或为空

```
<c:if test="${not empty list}">
   <ct:Select setIdentity="coaCategoryId" list="${list}" selected="0" />
</c:if> 
```

# iphone - iTunes Connect：“提交的报告太少，无法显示报告”

> ID：15755487
> 
> 赞同：4
> 
> 时间：2013-04-02T03:18:08.427
> 
> 标签：iphone, ios, app-store-connect

我的应用程序昨天获得了 App Store 的批准，从那时起，我们收到了数十份关于开发版本中没有出现的崩溃报告。但是，当我转到 iTunes Connect > 管理您的应用程序 >（应用程序）> 当前版本 > 查看详细信息 > 崩溃报告时，我收到以下消息：`Too few reports have been submitted for a report to be shown`. 在我进行刷新后，在每个选项卡下都是如此。

鉴于我收到的电子邮件数量，那里应该有大量的崩溃日志。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T11:56:54.603

这是因为崩溃报告发送到 iTunes 的方式，或者大部分没有发送，因为用户不允许将这些报告发送到 Apple。

正在发生的事情的完整描述，在这里回答：[https ://stackoverflow.com/a/15592723/474794](https://stackoverflow.com/a/15592723/474794)

小故事：您应该使用 3rd 方崩溃报告解决方案将数据发送到您自己的服务器或服务。您不能依赖 iTunes Connect。

# ios - 设置第三方服务器与 Game Center 交互

> ID：15755489
> 
> 赞同：14
> 
> 时间：2013-04-02T03:18:15.957
> 
> 标签：ios, authentication, sinatra, game-center

我正在考虑在我的 iOS 游戏中添加一项功能，以允许玩家创建自己的游戏关卡、与其他玩家分享、评分等。会有一个用户创建关卡的公共存储库，可按创建日期排序、评分、难度或其他标准。

这种功能需要第三方服务器。我在想我会使用 Sinatra 创建一个 RESTful API 并在 Heroku 上运行它。我的问题是：对这个 API 的请求进行身份验证的最佳方式是什么？我宁愿不要求玩家创建用户名和密码。我只想使用 Game Center 的 ID 系统。

有什么建议么？我以前从未做过任何服务器端的事情，因此感谢您的帮助！

### 澄清

是的，我知道 Apple 不提供自己的系统。但它确实让开发人员可以访问唯一的 Game Center 标识符（developer.apple.com/library/mac/#documentation/...），我希望我可以使用它以某种方式推出我自己的身份验证系统，而无需用户通过 Facebook 登录/推特/等。如果可能的话。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-16T19:56:45.280

从 iOS 7 开始，Game Center 可以使用：

`[localPlayer generateIdentityVerificationSignatureWithCompletionHandler]`

一旦您使用 generateIdentity 调用验证了玩家的身份，

*   将玩家 ID 与服务器数据库上的用户关联
*   使用 REST 框架为后续调用提供的任何访问令牌/身份验证模式

[https://developer.apple.com/library/ios/documentation/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html](https://developer.apple.com/library/ios/documentation/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html)

同样作为参考，这里是我们最终根据 generateIdentityVerificationSignatureWithCompletionHandler 的响应发送到服务器的字典

```
NSDictionary *paramsDict = @{
    @"publicKeyUrl":[publicKeyUrl absoluteString],
    @"timestamp":[NSString stringWithFormat:@"%llu", timestamp],
    @"signature":[signature base64EncodedStringWithOptions:0],
    @"salt":[salt base64EncodedStringWithOptions:0],
    @"playerID":localPlayer.playerID,
    @"bundleID":[[NSBundle mainBundle] bundleIdentifier]
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T05:40:35.077

**编辑**：好像当我发布此内容时，Apple 没有官方解决方案，但现在有。请参阅其他答案，或纯粹出于历史/向后兼容性的兴趣继续阅读。

* * *

Apple 不提供任何类型的系统来将 Apple ID 身份验证（包括 Game Center）与第三方服务一起使用。您自己进行身份验证，但您可以查看 OAuth 以允许通过 Facebook/Twitter/等进行单点登录。（请注意，不是每个人都有 Facebook/Twitter/等身份，或者他们想用于您的游戏的身份。）

理论上，`playerID`on 的属性`GKPlayer`是唯一的、恒定的，并且不为其他任何人所知。因此，理论上，您可以将其用于“穷人的身份验证”：将其呈现给您的服务器，这就是服务器需要查找并提供特定于玩家的东西的全部内容。但这就像通过 UDID 或仅通过用户名进行的身份验证——它提供的唯一安全性是模糊性。当您的用户未登录 Game Center 时会发生什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-05T17:41:03.627

Andy 的答案是正确的，但要结束这个故事：在他链接到的那些文档中，解释了如何针对 Apple 服务进行实际身份验证，GameCenter 用户实际上就是他声称的身份。链接到文档的该部分如下。基本上，客户端调用 generateIdentityVerificationSignatureWithCompletionHandler 会为您提供一些数据，包括 URL。您将该数据和 URL 提供给您自己的服务器，然后您可以从您的服务器点击该 URL 以使用调用 generateIdentityVerificationSignatureWithCompletionHandler 提供的其余数据对用户进行身份验证。

[https://developer.apple.com/library/ios/documentation/GameKit/Reference/GKLocalPlayer_Ref/index.html#//apple_ref/occ/instm/GKLocalPlayer/generateIdentityVerificationSignatureWithCompletionHandler](https://developer.apple.com/library/ios/documentation/GameKit/Reference/GKLocalPlayer_Ref/index.html#//apple_ref/occ/instm/GKLocalPlayer/generateIdentityVerificationSignatureWithCompletionHandler)：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-31T14:55:10.433

我花了很长时间才弄清楚这一点。我终于使用了这个答案的一些提示、其他几个 SO 答案、php 文档和一些幸运的猜测来得出[这个完整的答案。](https://stackoverflow.com/a/33442151/34820)

注意：这种方法似乎很容易被黑客入侵，因为任何人都可以用自己的证书签署任何他们想要的东西，然后将数据、签名和 URL 传递给服务器并返回“这是一个有效的 GameCenter 登录”的答案，所以，而这代码在实现 GC 算法的意义上“有效”，算法本身似乎有缺陷。理想情况下，我们还会检查证书是否来自受信任的来源。检查它是否是 Apple 的 Game Center 证书的额外偏执狂也很好。

# java - 有人可以帮助修复我的功能逻辑吗？

> ID：15755492
> 
> 赞同：0
> 
> 时间：2013-04-02T03:18:34.410
> 
> 标签：java

它现在所做的是要求用户输入一个字段编号，但如果用户输入一个非整数，它只会陷入循环并且不会响应用户键入的任何内容。我希望它真正起作用，我认为它在我的 try/catch 中。谢谢

代码：

```
public static int getFieldNumberFromUser(int maxValue)throws IOException
{
    BufferedReader br = new BufferedReader( new InputStreamReader(System.in) );
    String data;
    int fieldNumber;
    boolean isInteger;

    fieldNumber = 0;
    isInteger = false;
    while(isInteger == false)
    {
        System.out.print("Enter a field between 1 and " + maxValue + "(< zero to quit): ");
        data = br.readLine();
        try
        {
            fieldNumber = Integer.parseInt(data);
            isInteger = true;

        }
        catch(NumberFormatException nfe)
        {
            System.out.println("You did not enter a valid integer");
        }
    }
        return fieldNumber - 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:20:57.513

您需要在 catch 中退出循环...`return -1;`在您的 catch 中添加一个。

我不确定你为什么要循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:34:07.970

检查下面的代码。它似乎工作正常。

```
 BufferedReader br = new BufferedReader( new InputStreamReader(System.in) );
    String data;
    int fieldNumber;
    boolean isInteger;

    fieldNumber = 0;
    isInteger = false;
    while(isInteger == false)
    {
        System.out.print("Enter a field between 1 and " + maxValue + "(< zero to quit): ");
        data = br.readLine();
        NumberFormatException nfe = new NumberFormatException();
        try
        {
            fieldNumber = Integer.parseInt(data);
            if(fieldNumber > maxValue)
                throw nfe;
            isInteger = true;

        }
        catch(NumberFormatException nfe2)
        {
            System.out.println("You did not enter a valid integer");
        }
    }
        return fieldNumber - 1; 
```

# java - 如何确定某一行中的合并单元格

> ID：15755493
> 
> 赞同：10
> 
> 时间：2013-04-02T03:18:37.107
> 
> 标签：java, apache, apache-poi

到目前为止，这是我所知道的：

1.  您使用 sheet.getNumMergedRegions() 方法获取特定工作表中合并区域的数量
2.  您遍历每个计数并使用方法 sheet.getMergedRegion(i) 并分配给 CellRangeAddress 变量
3.  然后使用 isInRange(rowIndex, colIndex) 函数来查看特定单元格是否是合并区域的一部分。

但我想要完成的是：***我想看看是否可以确定仅给定特定行的合并单元格。***就像我有某一行一样，我想知道仅在该行下找到的所有合并区域的计数。

如果有人能就此事分享他们的想法或建议，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-11T21:58:27.787

这是一个代码示例，我相信它可以满足您的需求。getNbOfMergedRegions 会返回特定行中合并区域的数量。请记住，在 POI 中，行号从零开始！

```
package test;

import java.io.File;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;
import org.apache.poi.ss.util.CellRangeAddress;

public class Main {

    public static int getNbOfMergedRegions(Sheet sheet, int row)
    {
        int count = 0;
        for(int i = 0; i < sheet.getNumMergedRegions(); ++i)
        {
            CellRangeAddress range = sheet.getMergedRegion(i);
            if (range.getFirstRow() <= row && range.getLastRow() >= row)
                ++count;
        }
        return count;
    }

    public static void main(String[] args) {
        File file = new File("/Users/enicolas/Downloads/test.xls");
        try 
        {
            Workbook wb = WorkbookFactory.create(file);  // Line 409 for ref to the exception stack trace
            Sheet sheet = wb.getSheetAt(0);
            for(int row = 0; row < 20; ++row)
            {
                int n = getNbOfMergedRegions(sheet, row);
                System.out.println("row [" + row + "] -> " + n + " merged regions");
            }
            System.out.println(wb);
        }
        catch (Throwable e) 
        {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-23T09:22:50.770

我有一个解决方案。基本上，我只是将您的想法翻译成 Java 代码。

首先，您需要这两种方法。

第一个帮助您确定给定单元格是否在合并单元格中。

```
/**
 * Get the index of the merged cell in all the merged cells
 * if the given cell is in a merged cell.
 * Otherwise, it will return null.
 *
 * @param sheet  The Sheet object
 * @param row    The row number of this cell
 * @param column The column number of this cell
 * @return The index of all merged cells, which will be useful for {@link Sheet#getMergedRegion(int)}
 */
private Integer getIndexIfCellIsInMergedCells(Sheet sheet, int row, int column) {
    int numberOfMergedRegions = sheet.getNumMergedRegions();

    for (int i = 0; i < numberOfMergedRegions; i++) {
        CellRangeAddress mergedCell = sheet.getMergedRegion(i);

        if (mergedCell.isInRange(row, column)) {
            return i;
        }
    }

    return null;
} 
```

第二个帮助您从中获取内容。

```
/**
 * Get the value from a merged cell
 *
 * @param sheet       The Sheet object
 * @param mergedCells The {@link CellRangeAddress} object fetched from {@link Sheet#getMergedRegion(int)} method
 * @return The content in this merged cell
 */
private String readContentFromMergedCells(Sheet sheet, CellRangeAddress mergedCells) {

    if (mergedCells.getFirstRow() != mergedCells.getLastRow()) {
        return null;
    }

    return sheet.getRow(mergedCells.getFirstRow()).getCell(mergedCells.getFirstColumn()).getStringCellValue();
} 
```

然后您可以迭代此工作表中的行和列，并根据此单元格是否在合并单元格中执行不同的操作。

```
for (int rowNum = 0; rowNum < sheet.getLastRowNum(); rowNum++) {
    Row row = sheet.getRow(rowNum);
    if (row == null) {
        continue;
    }

    int lastColumn = row.getLastCellNum();

    for (int columnNum = 0; columnNum < lastColumn; columnNum++) {
        // Determine if this cell is in a merged cell
        Integer mergedCellIndex = getIndexIfCellIsInMergedCells(sheet, rowNum, columnNum);

        if (mergedCellIndex != null) {
            // If it is in a merged cell
            // then get it
            CellRangeAddress cell = sheet.getMergedRegion(mergedCellIndex);

            // Do your logic here
            log.info("Cell is in a merged cell");
            log.info("Content is {}",
                    readContentFromMergedCells(sheet, sheet.getMergedRegion(mergedCellIndex)));

            // Get the last column of this merged cell
            int lastColumnOfThisMergedCell = sheet.getMergedRegion(mergedCellIndex).getLastColumn();

            // And skip those merged cells
            // since the columnNum will increase 1 on next loop
            // so you have to minus 1 here
            columnNum = columnNum + lastColumnOfThisMergedCell - 1;
            log.info("Next column being processed is {}", columnNum);
        } else {
            // If it is not in a merged cell
            // hence, an "individual" cell
            Cell cell = row.getCell(columnNum, Row.RETURN_BLANK_AS_NULL);
            if (cell == null) {
                continue;
            }

            // Then you can simply do your logic
            // and continue to the next loop
            log.info("Cell is an individual cell");
            log.info("Content is {}",
                    row.getCell(columnNum).getStringCellValue());
        }
    }
} 
```

# ruby-on-rails - 当我尝试运行 heroku run rake db:migrate 时出现 Postgres 错误

> ID：15755497
> 
> 赞同：2
> 
> 时间：2013-04-02T03:18:52.783
> 
> 标签：ruby-on-rails, postgresql

我的 sqlite3 数据库在开发中运行良好，但是当我尝试将其迁移到生产环境时，出现以下错误：

PG ::错误：错误：关系“电影”不存在：ALTER TABLE“电影”添加列“production_company”字符变化（255）/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12 /lib/active_record/connection_adapters/postgresql_adapter.rb:652:in `async_exec'

我知道有几个人已经发布了这个，但我尝试过的任何东西似乎都不起作用。有谁知道我该如何解决这个问题？

这是迁移：

```
class AddProductionCompanyToMovies < ActiveRecord::Migration
  def change
    add_column :movies, :production_company, :string, :limit => nil
  end
end 
```

如果这有帮助，这是我的 schema.rb 文件：

```
ActiveRecord::Schema.define(:version => 20130331014529) do

create_table "movies", :force => true do |t|
t.string   "title"
t.string   "actor_1"
t.string   "locations"
t.string   "release_year"
t.string   "string"
t.string   "actor_2"
t.string   "actor_3"
t.string   "writer"
t.string   "director"
t.datetime "created_at",         :null => false
t.datetime "updated_at",         :null => false
t.string   "production_company"
t.string   "distributor"
t.string   "fun_facts"
end

end 
```

这是我创建电影表的迁移：

```
class Movies < ActiveRecord::Migration
  def up
  end

  def down
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:34:59.060

这不是最好的方法，但一个快速的解决方法是用这个替换迁移：

```
class AddProductionCompanyToMovies < ActiveRecord::Migration
  def change
    create_table :movies do |t|
      t.string :production_company

      t.timestamps
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:29:10.380

您创建电影表的迁移不正确。你所拥有的 up 和 down 方法什么都不做。因此，没有要向其添加 production_company 列的电影表。

你需要这样的东西；

```
class Movies < ActiveRecord::Migration
  def change
    create_table :movies do |t|
      t.string  :title
      t.string  :actor
      .
      .    #add your columns you want in your initial migration here
      .
  end
end 
```

我不能说为什么事情在 SQLite 中的开发工作，但在某些时候你成功地创建了电影表，然后也许你在那之后改变了迁移。这很容易做到（我已经做到了！）。

很多人建议，当您设置生产时，不要运行迁移来设置数据库，而是使用`rake db:schema:load`（事实上，如果您阅读`db/schema.rb`文件顶部的注释，它专门描述了这一点）。

另一点是，很多人建议在开发中使用与生产中相同的数据库，因为存在细微差异可能导致生产中出现意外问题（这不是导致您的问题的原因）。如果您才刚刚开始，那么现在不要担心；在您自己的机器上设置 PostgreSQL 只是一件令人头疼的事情；但随着您的进步，请记住这一点。

# python - Pygame 多线程

> ID：15755500
> 
> 赞同：1
> 
> 时间：2013-04-02T03:19:22.307
> 
> 标签：python, multithreading, pygame, multiplayer

我有一个在 pygame 上运行的多人游戏。我在单独的线程中运行游戏/客户端/服务器，并有一个简单的回显服务器。每次玩家广播一条消息，其他所有玩家都会收到它。我遇到的问题是 pygame 有一个 while(true) 循环，每 10 毫秒重绘一次屏幕。此循环导致游戏世界无法更新，因为它无法在循环之外执行任何操作。我尝试使用队列，以便在 while 循环中，它可以出列并处理命令，但是这似乎不起作用（q.put() 没有在队列中放置任何内容）。

任何帮助表示赞赏！谢谢

这是架构的一个片段：

```
class Client(Thread, Observer):
    #waits for notifications from ClientSocket
    #starts the game loop
    #enqueue commands in the Game

class ClientSocket(Thread, Observable):
    #observes the socket and notifies the Client

class Server(Thread):
    #simply broadcasts commands to ClientSocket(s)

class Game(Thread):
    def __init__(self):
        self.q = queue.Queue()

    while True:
        #delay 10 ms
        #redraw
        #see if u need to process queue 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-02T03:54:03.583

我建议您仔细阅读队列文档[http://docs.python.org/2/library/queue.html](http://docs.python.org/2/library/queue.html)和线程文档[http://docs.python.org/2/library/threading.html](http://docs.python.org/2/library/threading.html)。您的使用决定`while True:`看起来不太好。请阅读 locks/semaphores/mutex/events 并查看这些简单的示例[http://www.tutorialspoint.com/python/python_multithreading.htm](http://www.tutorialspoint.com/python/python_multithreading.htm)，我相信您将能够创建更好的多线程架构。

# php - 我应该在通过基本身份验证发送之前加密密码吗？

> ID：15755504
> 
> 赞同：0
> 
> 时间：2013-04-02T03:19:48.067
> 
> 标签：php, api, curl, basic-authentication

很简单的问题。对于通过 RESTful API 进行注册和登录，密码在通过基本身份验证发送之前是否应该加密；还是基本身份验证如此安全以至于这是不必要的？这是通过安全 HTTPS 发送的。

感谢您的洞察力！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:22:07.660

恕我直言，如果所有内容都是通过 https 发送的，那么无论如何都已经加密了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:26:37.127

如果您使用的是 HTTPS，这*应该*足够了，但是您永远都不够谨慎，所以我至少会使用 MD5 + 一个 Salt 值对密码进行哈希处理。

您可以使用隐藏字段来存储 Salt 值，然后通过类似的方式生成哈希值`<script>var fullhash=MD5(MD5(*value of the password*)+MD5(*value of the saltfield*));</script>`

您可以对密码和盐值进行任何 MD5 变体，并将它们组合起来，md5ing 等等。

# .net - 依赖项具有静态配置方法 C# 的单元测试

> ID：15755505
> 
> 赞同：0
> 
> 时间：2013-04-02T03:19:52.397
> 
> 标签：.net, unit-testing, static, log4net

我有一个继承简单日志接口的类。此接口的实现之一使用 log4net。

Log4net 有一个静态配置方法，需要在您使用 XML 配置时调用。该行是：

```
log4net.Config.XmlConfigurator.Configure(); 
```

文档通常声明将其放入全局事件中，但我想将所有 log4net 代码封装到这一类中。所以我只是使用静态变量来跟踪 log4net 是否已配置，如果没有，我调用此方法：

```
//This is static as I only ever want one instance
private static log4net.ILog _logger;
private static bool _isConfigured;

public Log4NetLogger() {
    if(!_isConfigured) {
        //This is needed to initialise the Log4Net logger
        log4net.Config.XmlConfigurator.Configure();
        _isConfigured = true;
        _logger = log4net.LogManager.GetLogger(_defaultLogger);
    }
} 
```

问题是我不知道如何测试这个。我希望能够测试 Configure() 方法是否只被调用一次。静态变量和静态方法与作为构造函数一部分的逻辑相结合，使得这很棘手。

感觉是我的代码很差，有没有办法可以编写此代码，以便配置调用只调用一次，然后，我该如何测试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:50:55.227

您*可以*使用 C#“[静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.110%29.aspx)”来实现您的目标。

```
//This is static as I only ever want one instance
private static log4net.ILog _logger;

static Log4NetLogger() {
    //This is needed to initialise the Log4Net logger
    log4net.Config.XmlConfigurator.Configure();
    _logger = log4net.LogManager.GetLogger(_defaultLogger);
} 
```

由于按照规范，它最多运行一次（每个应用程序域），因此您不需要对其进行测试。但是，您必须更仔细地处理异常，因为静态构造函数中的错误更难理解。

# macos - 如何禁用上一个文档的自动重新打开？

> ID：15755508
> 
> 赞同：4
> 
> 时间：2013-04-02T03:19:58.490
> 
> 标签：macos, cocoa, nsdocument, nsapplication, nsapplication-delegate

* * *

**如何禁用最后一个文档的自动重新打开？**

* * *

当我执行我的应用程序时，它会调用方法`readFromData`。

但是，问题是在我的版本 1 和我的版本 2 之间，我更改了应用程序保存的数据的结构。在 v1 中，根对象是一个数组。在 v2 中，根对象是一个具有两个键的字典，一个用于字符串，一个用于数组。

当应用程序加载时，它似乎从数据中加载了一个数组，然后尝试从该数组中获取字典键的对象。

我该怎么办 ！！？？

PS：我试图创建一个 NSApplicationDelegate

```
 -(BOOL)applicationShouldOpenUntitledFile:(NSApplication*)app
        {
            return YES; 
        }

        - (BOOL)applicationOpenUntitledFile:(NSApplication *)sender
        {
            return YES ;
        } 
```

但是我的应用程序永远不会调用这些方法。

* * *

编辑 ：

这是调用堆栈：

```
0   CoreFoundation                      0x00007fff8bc06f56 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff81f37d5e objc_exception_throw + 43
2   CoreFoundation                      0x00007fff8bc931be -[NSObject doesNotRecognizeSelector:] + 190
3   CoreFoundation                      0x00007fff8bbf3e23 ___forwarding___ + 371
4   CoreFoundation                      0x00007fff8bbf3c38 _CF_forwarding_prep_0 + 232
5   dictionnaireDouchoutique            0x0000000100007f22 -[Document readFromData:ofType:error:] + 498
6   AppKit                              0x00007fff89af3558 -[NSDocument readFromURL:ofType:error:] + 665
7   AppKit                              0x00007fff8999198c -[NSDocument _initForURL:withContentsOfURL:ofType:error:] + 151
8   AppKit                              0x00007fff89991890 -[NSDocument initForURL:withContentsOfURL:ofType:error:] + 360
9   AppKit                              0x00007fff89991677 -[NSDocumentController makeDocumentForURL:withContentsOfURL:ofType:error:] + 199
10  AppKit                              0x00007fff8999150f __-[NSDocumentController reopenDocumentForURL:withContentsOfURL:display:completionHandler:]_block_invoke_5 + 150
11  AppKit                              0x00007fff89991467 __-[NSDocumentController reopenDocumentForURL:withContentsOfURL:display:completionHandler:]_block_invoke_4 + 697
12  AppKit                              0x00007fff899911a9 -[NSDocumentController _openDocumentWithContentsOfURL:usingProcedure:] + 530
13  AppKit                              0x00007fff89990d95 __-[NSDocumentController reopenDocumentForURL:withContentsOfURL:display:completionHandler:]_block_invoke_3 + 242
14  libdispatch.dylib                   0x00007fff86329a82 _dispatch_call_block_and_release + 18
15  libdispatch.dylib                   0x00007fff8632b8f2 _dispatch_main_queue_callback_4CF + 308
16  CoreFoundation                      0x00007fff8bb9be7c __CFRunLoopRun + 1724
17  CoreFoundation                      0x00007fff8bb9b486 CFRunLoopRunSpecific + 230
18  HIToolbox                           0x00007fff87d652bf RunCurrentEventLoopInMode + 277
19  HIToolbox                           0x00007fff87d6c56d ReceiveNextEventCommon + 355
20  HIToolbox                           0x00007fff87d6c3fa BlockUntilNextEventMatchingListInMode + 62
21  AppKit                              0x00007fff8973d779 _DPSNextEvent + 659
22  AppKit                              0x00007fff8973d07d -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 135
23  AppKit                              0x00007fff897399b9 -[NSApplication run] + 470
24  AppKit                              0x00007fff899b5eac NSApplicationMain + 867
25  dictionnaireDouchoutique            0x00000001000075d2 main + 34
26  dictionnaireDouchoutique            0x0000000100001984 start + 52 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:36:01.557

在您的`NSDocument`子类中， override`+ (BOOL)autosavesDraft`和 return `NO`，您在开发过程中将是安全的。但是，一旦您投入生产，您应该处理您拥有的不同文件格式而不会崩溃......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:46:38.523

使用 NSPropertyListSerialization 反序列化数据，然后使用`respondsToSelector:`或`isKindOfClass:`检查它交给你的根对象类型。如果它是一个数组，请处理它；如果是字典，请处理它；如果它是你不认识的任何东西，返回一个错误，表明[该文件是垃圾](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/c/econst/NSFileReadCorruptFileError)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:28:47.640

你没有列出你是如何实现`readFromData:`的，但如果你正在使用`NSKeyedUnarchiver`你可以`containsValueForKey:`用来验证`data`参数中的对象。

如果要使旧版本不兼容，可以检测旧版本并填充错误参数。

# ruby-on-rails - 在 Rails 中计算上周的非滚动

> ID：15755509
> 
> 赞同：1
> 
> 时间：2013-04-02T03:20:32.087
> 
> 标签：ruby-on-rails, ruby

我有一个名为 Article 的模型，我想做的是显示 created_at 日期为上周的所有文章。我了解如何滚动一周（即到现在的最后 7 天），例如[这个问题](https://stackoverflow.com/questions/12204010/rails-testing-a-named-scope-with-a-date-range)。

```
scope :last_week,  lambda { :conditions => { :created_at => 1.week.ago..DateTime.now.end_of_day } } 
```

但是，我想做的是找到上周周日到周六的文章，不管今天是哪一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:28:31.793

Rails 提供了一个辅助方法来获取给定日期的一周的开始和结束。该方法默认为星期一，因此您必须传入星期天才能覆盖它。

```
 scope :last_week,  lambda { :conditions => { :created_at => Date.today.at_beginning_of_week(:sunday)..Date.today.at_end_of_week(:sunday) } } 
```

我以 Date.today 为例，但您可以让范围具有日期参数，以便您可以将任何日期应用于范围。

**编辑：**

```
scope :last_week, lambda{ |date| {:conditions => ((date - 1.week).at_beginning_of_week(:sunday))..((date-1.week).at_end_of_week(:sunday)) }} 
```

然后只需将范围称为

```
last_week(some_date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:33:56.283

`Date.parse`给出了在工作日名称上运行的令人敬畏的结果：

```
require 'date'
# ⇒ true
Date.today
# ⇒ <Date: 2013-04-02 ((2456385j,0s,0n),+0s,2299161j)>
Date.parse('Sunday')
# ⇒ <Date: 2013-03-31 ((2456383j,0s,0n),+0s,2299161j)>
Date.parse('Wednesday')
# ⇒ <Date: 2013-04-03 ((2456386j,0s,0n),+0s,2299161j)> 
```

所以你只需要：

```
def last_weekend
  d = Date.parse('Saturday')
  d -= 7 if d > Date.today
  Range.new d, d+1
end 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:19:51.830

类似于约翰的回答，但我认为这更适合你的情况：

```
scope :last_week, lambda { { conditions: { created_at: last_week_range } } }

def self.last_week_range
  1.week.ago.beginning_of_week(:sunday)..1.week.ago.end_of_week(:sunday)
end 
```

# java - 即使我使用的是已经默认支持 maven 的 eclipse juno 版本，是否有必要在 linux 环境中安装 maven？

> ID：15755513
> 
> 赞同：0
> 
> 时间：2013-04-02T03:20:36.637
> 
> 标签：java, eclipse

我在 linux 环境中使用 eclipse juno 版本（RCP 和 RAP）。Eclipse juno 已经有 maven 所以，我认为没有必要安装任何 m2e 插件。我想使用 maven 进行 Eclipse 插件开发。请确认我是否必须在这个linux环境中安装maven？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:25:55.983

## 简答

是的

## 长答案

是的，您需要从命令行运行它。您将希望能够更新到 Eclipse 未运行的最新版本。您将希望能够将 Jenkins 等其他应用程序指向`M2_HOME`，还有很多其他原因。

# javascript - 如何将变量文本与用户输入的文本一起添加到文本区域。

> ID：15755514
> 
> 赞同：0
> 
> 时间：2013-04-02T03:20:44.970
> 
> 标签：javascript, html, function, textarea, hta

所以我有一些代码除了一个方面之外有效。它目前允许将替代文本添加到文本区域，然后使用它输入新文本，但它首先清除文本区域中的所有内容。您无法启动笔记，然后选择复选框。您必须先选中复选框。我希望能够做以太。这是功能：

```
function updatebox2()
{
    var textbox = document.getElementById("anotes");
    textbox.value = "";

    if (document.getElementById('cb5').checked) {
        textbox.value = textbox.value + "\r\nAssisted with order, Order#: ";
    }

    if (document.getElementById('cb6').checked) {
        textbox.value = textbox.value + "\r\nGave information on ";
    }

} 
```

这是HTML代码：

```
<input id="cb5" type="checkbox" value="sale" onclick="updatebox2()" />Purchase<br />
<input id="cb6" type="checkbox" value="info2" onclick="updatebox2()" />Info<br />
<input id="cb7" type="checkbox" value="callback" onclick="updatebox2()" />Will Call Back<br />
<input id="cb8" type="checkbox" value="trans" onclick="updatebox2()" />Transfer<br />
<div class="Notes" style="text-align: left; inline-block; white-space: nowrap">
    <span> Actions Taken</span>
    <a href="#" onclick="window.clipboardData.setData('Text',getValue('anotes'));">(Copy)</a><br/>
    <textarea id="anotes" rows="6" cols="50"></textarea>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:29:45.220

`textbox.value = ""`每次单击输入并调用函数时，您都会清除文本。删除此行以停止清除它。

如果您希望用户能够清除文本，只需添加一个按钮，该按钮在单击时调用函数以清除文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:32:19.130

删除线`textbox.value = "";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:35:46.480

所以你想在任何一个被勾选`textarea`后才添加文本吗？`checkboxes`那么是这样吗：

**演示：http:** [//jsfiddle.net/hGGsW/](http://jsfiddle.net/hGGsW/)

# mysql - MySQL查询特定年份和类别

> ID：15755521
> 
> 赞同：0
> 
> 时间：2013-04-02T03:21:25.030
> 
> 标签：mysql, sql, database

我认为在我的旧帖子上很难找到我的编辑，所以我做了一个新的主题：

在如此快速地解决了这个问题之后，我试着玩了一下 SQL 训练。现在我尝试与之前一样，而不是国家/地区，我想要在那里的“类别”（之前的帖子是关于进行查询，在那里我可以看到美国和世界其他地区的销售净额数据库中的 2007 年和 2008 年，现在我尝试使用以字母“A”开头的年份和类别）当我尝试进行这样的查询时，我完全迷失在其中 Oo 我想我需要显示实体事先：（越线=表名）

*   类别

    * * *

*   类别

*   分类名称

*   产品

    * * *

*   产品编号

*   类别
*   标题
*   演员
*   价格

*   订单线

    * * *

*   订单号

*   订单号
*   普罗迪德

*   订单

    * * *

*   订单号

*   订购日期
*   客户ID
*   净额

到目前为止我的查询：（它背后绝对没有意义：/）

```
SELECT year(orderdate) AS YEAR,
       categoryname,
       sum(custamot)Totsales FROM
  (SELECT o.orders, sum(netamount) custamot, c.categoryname
   FROM products o
   JOIN categories c ON o.category = c.category
   WHERE categoryname LIKE 'A%'
   GROUP BY c.categoryname) iv
GROUP BY YEAR(orderdate); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:40:15.920

您根本不需要子查询。只需加入您需要的所有表并为您的聚合编写一个合适的 group by 子句。你最终会得到类似的东西：

```
SELECT YEAR(o.orderdate) AS YEAR,
       c.Categoryname,
       SUM(o.netamount) AS Totsales
FROM orders o
INNER JOIN orderlines ol ON ol.orderid = o.orderid
INNER JOIN Products p ON p.ProdID = ol.Prodid
INNER JOIN categories c ON c.Category = p.Category
WHERE c.Categoryname LIKE 'A%'
GROUP BY c.Categoryname, YEAR(o.orderdate); 
```

# iphone - App Store 正在下载旧版本的应用程序

> ID：15755524
> 
> 赞同：3
> 
> 时间：2013-04-02T03:21:28.370
> 
> 标签：iphone, ios, app-store

我有一个大问题。我的应用程序被接受更新。即使显示新版本的新屏幕截图，它也会下载旧版本。（没什么大不了的，我读过它有时会这样做。）但是一旦我在我的 iphone4 上下载它，商店就会给出一个红色的小徽章，显示需要更新，这是我的应用程序的。我下载了新的更新，它提供了第一页的新图形，但是一旦我尝试在应用程序中执行任何操作，它就会崩溃。但它为我的 iPhone 5 下载了正确的版本！！D：我在两台设备上都进行了测试。一切都很完美。提前致谢！！！

库尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:41:43.367

新版本通过所有各种 Apple 商店服务器传播可能需要一些时间。如果您现在尝试，您很可能在从所有位置和商店下载的所有情况下都获得新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:42:17.173

等一天。它应该调整。否则电子邮件苹果支持。很可能不会超过几个小时

# javascript - 如何在 JQuery 中创建水平循环代码

> ID：15755525
> 
> 赞同：2
> 
> 时间：2013-04-02T03:21:38.947
> 
> 标签：javascript, jquery, html, css

我正在开发一个在 div 正文中循环文本的自动收报机。我可以让它以指定的速率移动文本，但我无法弄清楚如何让 JQuery 循环文本。一旦 div 中的内容到达末尾，我如何将它循环回来，同时仍然显示尾部的其余内容？

代码：

```
var left = -500;
$(document).ready(function(e){
function tick() {
        left++;
        $(".ticker-text").css("margin-left", -left + "px");
        setTimeout(tick, 16);
  }

  tick();
}); 
```

html:

```
<div class = "ticker-container">
    <div class = "ticker-text">
        start text text text text text text text text text text text text text text text 
        text text text text text text text text text text text text text text text text 
        text text text text text text text text text text text text text text text text end     
    </div>
</div> 
```

[http://jsfiddle.net/mxu4v/1/](http://jsfiddle.net/mxu4v/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T03:33:30.050

当它离得太远时，只需重置边距：

```
var width = $('.ticker-text').width(),
    containerwidth = $('.ticker-container').width(),
    left = containerwidth;
$(document).ready(function(e){
    function tick() {
        if(--left < -width){
            left = containerwidth;
        }
        $(".ticker-text").css("margin-left", left + "px");
        setTimeout(tick, 16);
    }
    tick();
}); 
```

请注意，必须更改 CSS，以便`.ticker-text`假定其内容的宽度，而不是`1000%`您指定的宽度：

```
.ticker-text {
    height: 150%;
    white-space:nowrap;
    display:inline-block;
} 
```

这是一个演示：http: [//jsfiddle.net/fHd4Z/](http://jsfiddle.net/fHd4Z/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:12:00.957

只是为了将我的评论充实到一个答案中：

如上所述，我相信您最好使用为此设计的现有框架之一。就该功能的快速启动而言，您可以从以下内容开始：http: [//jsfiddle.net/B9ruA/](http://jsfiddle.net/B9ruA/)

JS：

```
var tickerId="#tickerText";
function tickify(e) {
    var text=$(e).text().split("");
    var newText="";
    for (var i=0;i<text.length;i++) {
        newText+="<span class='tickerChar'>" + text[i] + "</span>";
    }
    $(e).html(newText);
}
tickify(tickerId);
function tick(){
    $(tickerId + " span.tickerChar:first").hide("slide",{direction:"left"},50,function(){$(this).appendTo($(tickerId)).show("slide",{direction:"right"},50);});
}
setInterval(function(){tick()},200); 
```

HTML：

```
<div id="tickerText">  woo, here is some text for ticking, text that ticks, ticky text to test with  </div> 
```

CSS：

```
div.ui-effects-wrapper {
    display:inline;
} 
```

笔记：

我必须添加一些 CSS 来阻止动画角色显示为块（因此在他们自己的行上）。您可能会使选择器更加具体，以免与页面上的其他动画（如果有的话）发生冲突。

显然，这可以通过一些时间调整来实现平稳性——我不会为在这背后进行琐碎的试错工作而烦恼，但玩得开心（使用框架的另一个原因）。

在我的评论中，我提到了方法 slideLeft 和 slideRight - 它们不存在。我的错。

# java - 如何通过套接字将文件保存到列表中

> ID：15755536
> 
> 赞同：0
> 
> 时间：2013-04-02T03:22:11.563
> 
> 标签：java, sockets

我有一个完美运行的方法，但不是让它写入文件，而是如何让它将文件的每一行添加到列表中？（有些文件是 .docx，有些是 .txt）

```
private static void saveMultiple(Socket socket) {
    try {
        BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());
        DataInputStream dis = new DataInputStream(bis);
        int filesCount = dis.readInt();
        File[] files = new File[filesCount];
        for (int i = 0; i < filesCount; i++) {
            long fileLength = dis.readLong();
            String fileName = dis.readUTF();
            files[i] = new File("/Users/.../Desktop/Data/" + fileName);
            FileOutputStream fos = new FileOutputStream(files[i]);
            BufferedOutputStream bos = new BufferedOutputStream(fos);
            for (int x = 0; x < fileLength; x++) {
                bos.write(bis.read());
            }
            bos.close();
        }
        dis.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:46:15.817

这部分代码：

```
bos.write(bis.read()); 
```

基本上从套接字读取 1 个字节并将其写入文件。现在，您可以将字节缓冲到字节数组中，并使用 java.util.String`String(byte[] bytes)`构造函数将其转换为字符串，而不是这样做。考虑使用`ByteInputStream.read(byte[] b, int off, int len)`方法。

您还必须考虑字符编码和内存消耗。

# php - 如何在 HTML 中编写 PHP 用户名欢迎消息？

> ID：15755544
> 
> 赞同：0
> 
> 时间：2013-04-02T03:23:06.057
> 
> 标签：php, html

如果用户名和密码正确，这是我的 php 代码，用于在页面中显示欢迎用户。

```
$_SESSION['userName'] = $usernm;
echo "Welcome ".$_SESSION['userName']."!"; 
```

我想在这个标签内显示变量名，因为我的 css 编码有一些 li 和 href 标签的样式。请帮我...

```
<li><a href="#">Welcome User!</a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:24:21.483

继承人如何回显`$_SESSIONS`或标签内的任何 php 变量。

您还可以在 for 中添加额外的 if else 条件`$_SESSION`来确定您的会话是否已设置

```
<li><a href="#">Welcome <?php  if(isset($_SESSION['userName'])){echo $_SESSION['userName'];}else{ echo 'Session not set';}?>.!</a></li> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T03:25:06.573

只需一些简单的字符串连接即可

```
echo "<li><a href='#'>Welcome ".$_SESSION['userName']."!</a></li>"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T08:26:41.193

检查这个：

```
<?php
$_SESSION['userName'] = $usernm;
?>

<ul>
  <li><a href="#">Welcome <?php echo $_SESSION['userName']; ?>!</a></li>
</ul> 
```

或者也许这个：

```
<?php
$usernm = $_SESSION['userName'];
?>

<ul>
  <li><a href="#">Welcome <?php echo $usernm; ?>!</a></li>
</ul> 
```

# vb.net - 将记录插入 SQL Compact 数据库

> ID：15755550
> 
> 赞同：1
> 
> 时间：2013-04-02T03:23:44.390
> 
> 标签：vb.net, sql-server-ce

我需要在最后一次 gps 读取的 sql compact 数据库中注入一行。我不需要获取任何信息，只需插入即可。

我相信我与另一篇文章有​​联系：

```
Dim connection As SqlCeConnection = New SqlCeConnection(String.Format("Data Source={0}", dbline)) 
```

但是一旦我有了连接，如何快速将一行插入到特定的表中？一行中只有 4 个字段。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-15T21:01:01.700

尝试这个...

```
SqlCeConnection connection = new SqlCeConnection("Data Source=" + (System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase) + "\\DatabaseName.sdf;"));

SqlCeCommand sql = new SqlCeCommand("Insert into Table(Column1,Column2...) values (@Column1,@Column2...)", connection);
sql.Parameters.Add("@ParamName",ParamValue);
connection.Open();
sql.ExecuteNonQuery();
connection.Close(); 
```

# google-chrome - 重置或覆盖用户代理样式表

> ID：15755561
> 
> 赞同：0
> 
> 时间：2013-04-02T03:25:28.127
> 
> 标签：google-chrome, css

我正在使用 SVG，出于某种原因，用户代理样式表将高度设置为 289 像素。

我不想定义高度，因为我将使用许多 SVG（至少 256 个），并且不想使用`!important`.

那么如何调整用户样式表（使用 Chrome）或重置 SVG 的高度字段！，使其未定义？

SVG HTML 示例：（SVG 高度为 25 像素，但 svg 边界框呈现为 289）

```
<div id="measure<%= measure.cid %>" class="measure">
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <rect x="10" y="10" width="250" height="25" style="stroke:black; stroke-width:2; fill:lightgray;" />
    <div id="<%= beatHolder %>">
    </div>
  </svg> 
</div> 
```

![css](https://i.stack.imgur.com/0fPAl.png) ![CSS2](https://i.stack.imgur.com/HuDnx.png)

尝试`Alex W`回答时，我得到了这个： ![在此处输入图像描述](https://i.stack.imgur.com/OYLQs.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:22:23.270

好的，在玩了你的例子之后，我想出了一个答案给你。使用`svg`它时，它`computed style height`是从其父元素设置的，所以据说你必须将你`svg`的 div 放在一个有 a 的 div 中`width`，`height`所以我做了一个快速的小例子来说明如何使用它，所以假设我们想放一个`svg`作为一个标志，然后是一个横幅或其他东西，我们可以通过这样做来实现这`svg`一点，

**CSS**

```
.logo {
    width: 250px;
    height: 27px;
}
.navigation {
    width: 960px;
    height: 54px;
} 
```

**HTML**

```
<div class="logo">
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <rect width="250" height="25" stroke="black" stroke-width="2" fill="lightgray" />
  </svg> 
</div>
<div class="navigation">
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <rect width="960" height="50" stroke="black" stroke-width="2" fill="lightgray" />
  </svg> 
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:47:00.850

你不能把规则添加到你的样式表吗？

```
<style type="text/css">
 ...
svg { height: auto !important; }
</style> 
```

您想将该规则放在样式标签的最底部，以确保它具有优先权。

此外，在您的代码示例中，您似乎将 设置`rect`为 25 像素，但不是实际`<svg>`元素。

# mkannotation - 从数据库中选择一个值并检查它是真还是假

> ID：15755562
> 
> 赞同：0
> 
> 时间：2013-04-02T03:25:32.077
> 
> 标签：mkannotation

此代码始终返回 true 可以请帮助我

```
public boolean plselct(String sqd)
    {
     try{
         String player  ;

         pm = conn.prepareStatement("SELECT playertype FROM playerdetails where idplayeratrr = ?");

         pm.setString(1,sqd );
         h= pm.executeQuery();

         player = h.getString("playertype");

         if ("Goal keeper".equals(player))
         { return true; }
         else 
           return false;

       }catch (Exception e)
        {}
    return false;
} 
```

* * *

```
SelectQu p = new SelectQu();
p.plselct("77");

if(true)
{ System.out.println("Yes"); }
else 
{ System.out.println("No"); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:31:50.837

你在检查`if(true)`吗？你是不是这个意思：

```
SelectQu p = new SelectQu();

if(p.plselct("77"))
{ 
     System.out.println("Yes"); 
}
else 
{ 
    System.out.println("No"); 
} 
```

# opengl-es - 显示的任何顶点的OpenGL ES/实时/位置？

> ID：15755570
> 
> 赞同：2
> 
> 时间：2013-04-02T03:27:34.800
> 
> 标签：opengl-es, 3d, geometry, feedback, vertices

我目前正在处理 OpenGL ES (2, iOS 6)……我有一个问题

一世。让 是一个必须绘制的网格。而且，

ii. 我可以要求旋转/翻译，以便改变观点。

那么，我如何（实时）知道显示的任何顶点的位置？

先感谢您。

杰加普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:47:36.547

目前还不完全清楚你在追求什么，但是如果你想知道你的对象在做了一堆旋转和平移之后在哪里，那么一个非常简单的选择，如果你在你的程序代码中而不是在着色器中执行这些*更改*, 是简单地将变换矩阵的最后一行或最后一列（取决于您使用的是行主矩阵还是列主矩阵），这将是对象*中心*的最终平移作为坐标向量。

最后一行或最后一列与将最终变换矩阵乘以对象的局部坐标中心向量（即 (0,0,0,1)）相同。

如果您想知道对象的顶点在哪里，而不是对象的中心，则将局部坐标空间中的该顶点乘以最终的变换矩阵，您将得到该顶点所在的新坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:45:38.767

我想指出两点：

1.  背面剔除*丢弃三角形*，而不是顶点。
2.  三角形也被*剪裁*，使它们在视锥内。

我很好奇您**为什么**关心未显示的内容？

# jquery - 在页面加载时为菜单设置动画

> ID：15755576
> 
> 赞同：1
> 
> 时间：2013-04-02T03:28:01.060
> 
> 标签：jquery, html, menu, load, html-lists

当使用 jquery 加载文档时，我试图让我的 ul 菜单从页面左侧飞入。我该怎么做呢？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:33:18.313

您可以使用`jQuery.animate`动画元素。

**例子**

```
$(document).ready(function(){
   $('ul').animate({left:'20px'},800);
}); 
```

我已经创建了其他[`DEMO`](http://jsfiddle.net/njzhj/)供您查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:18:49.713

从 Dipesh Parmar 开始，我制作了[另一个工作演示](http://jsfiddle.net/UJqA3/1/)，其中有一些关键区别：

1.  你想让它从右边来，然后向左滑动，看`var startPos = 0 - objWidth;`
2.  您可能希望它在离开页面之前停止，请参阅`left: $(document).width() - objWidth - 15` 将其移动到页面边缘，显示完整对象（加上一点填充）

由于演示对于您想要的内容可能有点过于复杂，所以这就是您所追求的代码归结为

```
var plane = $("#plane");
plane.css('left', plane.width()*-1); // Initially position the object off the page
plane.animate({
    left: $(document).width() - $("#plane").width() - 15 // Go to the right edge, show the whole object, and some padding
}, 3000, 'linear') // Action takes 3000 milliseconds in a linear motion 
```

查看 jQuery 的动画文档了解更多[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# jquery - 当a-tag包含“_sk”时，jquery隐藏父标签

> ID：15755577
> 
> 赞同：-1
> 
> 时间：2013-04-02T03:28:06.823
> 
> 标签：jquery

我有以下html：

```
 <div id="secondary">
        <ul class="simple-pages-navigation">
            <li class="nav-das-projekt current"><a href="/projekt">Das Projekt</a>
                <ul class="subnav-1">
                    <li class="nav-ber-kaschau"><a href="/ber-kaschau">Über Kaschau</a></li>
                    <li class="nav-projektpartner"><a href="/projektpartner">Projektpartner</a></li>
                </ul>
            </li>
            <li class="nav-projektu"><a href="/projekt_sk">Projekt</a>
                <ul class="subnav-1">
                    <li class="nav-o-koiciach"><a href="/ber-kaschau_sk">O Košiciach</a></li>
                    <li class="nav-o-koiciach"><a href="/partneri_sk">O Košiciach</a></li>
                </ul>
            </li>
            <li class="nav-project"><a href="/projekt_en">Project</a>
                <ul class="subnav-1">
                    <li class="nav-o-koiciach"><a href="/ber-kaschau_en">About Kaschau</a></li>
                    <li class="nav-o-koiciach"><a href="/partner_en">Project Partners</a></li>
                </ul>
            </li>
        </ul>
    </div>

I want to add css `display:none;` via jQuery to all parent-parent tags whose daughter-tags have a link ending with `"_sk"` or `"_en"` in it.
the result should look like this:

    <div id="secondary">
        <ul class="simple-pages-navigation">
            <li class="nav-das-projekt current"><a href="/projekt">Das Projekt</a>
                <ul class="subnav-1">
                    <li class="nav-ber-kaschau"><a href="/ber-kaschau">Über Kaschau</a></li>
                    <li class="nav-projektpartner"><a href="/projektpartner">Projektpartner</a></li>
                </ul>
            </li>
            <li class="nav-projektu" style="display: none"><a href="/projekt_sk">Projekt</a>
                <ul class="subnav-1">
                    <li class="nav-o-koiciach"><a href="/ber-kaschau_sk">O Košiciach</a></li>
                    <li class="nav-o-koiciach"><a href="/partneri_sk">O Košiciach</a></li>
                </ul>
            </li>
            <li class="nav-project" style="display: none"><a href="/projekt_en">Project</a>
                <ul class="subnav-1">
                    <li class="nav-o-koiciach"><a href="/ber-kaschau_en">About Kaschau</a></li>
                    <li class="nav-o-koiciach"><a href="/partner_en">Project Partners</a></li>
                </ul>
            </li>
        </ul>
    </div> 
```

=== 编辑：===

我添加了更多 HTML，现在是答案

```
$('a[href$="_sk"], a[href$="_hu"]').parent().hide(); 
```

不适用于此 html 代码，我不知道为什么，因为它仍然适用于以“_sk”结尾的标签链接，但不适用于带有“_hu”的链接：

```
<div id="secondary">
    <ul class="simple-pages-navigation">
        <li class="nav-a-projekt"><a href="/projekt_hu">A Projekt</a>
            <ul class="subnav-1">
                <li class="nav-difmoe" style="display: list-item;"><a href="/difmoe_hu">DiFMOE ,</a></li>
                <li class="nav-kassrl" style="display: list-item;"><a href="/ber-kaschau_hu">Kassáról</a></li>
                <li class="nav-projektpartnerek" style="display: list-item;"><a href="/projektpartner_hu">Projektpartnerek</a></li>
            </ul>
        </li>
        <li class="nav-das-projekt current"><a href="/projekt_de">Das Projekt</a>
            <ul class="subnav-1">
                <li class="nav-ber-kaschau"><a href="/ber-kaschau_de">Über Kaschau</a></li>
                <li class="nav-projektpartner"><a href="/projektpartner_de">Projektpartner</a></li>
                <li class="nav-difmoe"><a href="/difmoe_de">DiFMOE</a></li>
            </ul>
        </li>
        <li class="nav-die-digitale-stadtbibliothek" style="display: none;"><a href="http://cassovia-digitalis.eu/">Die Digitale Stadtbibliothek</a></li>
        <li class="nav-die-digitale-stadtbibliothek---en" style="display: none;"><a href="/startseite_en">Die Digitale Stadtbibliothek - EN</a></li>
        <li class="nav-die-digitale-stadtbibliothek---hu" style="display: none;"><a href="/startseite_hu">Die Digitale Stadtbibliothek - HU</a></li>
        <li class="nav-die-digitale-stadtbibliothek---sk" style="display: none;"><a href="/startseite_sk">Die Digitale Stadtbibliothek - SK</a></li>
        <li class="nav-projekt" style="display: none;"><a href="/projekt_sk">Projekt</a>
            <ul class="subnav-1">
                <li class="nav-o-koiciach" style="display: none;"><a href="/ber-kaschau_sk">O Košiciach</a></li>
                <li class="nav-partneri-projektu" style="display: none;"><a href="/projektpartner_sk">Partneri projektu</a></li>
                <li class="nav-difmoe" style="display: none;"><a href="/difmoe_sk">DiFMOE .</a></li>
            </ul>
        </li>
        <li class="nav-bibliothek"><a href="/bibliothek_de">Bibliothek</a>
            <ul class="subnav-1">
                <li class="nav-periodika"><a href="/periodika_de">Periodika</a>
                    <ul class="subnav-2">
                        <li class="nav-zeitungen"><a href="/zeitungen_de">Zeitungen</a>
                            <ul class="subnav-3" style="display: none;">
                                <li class="nav-felsmagyarorszag"><a href="/felsoemagyarorszag">Felsömagyarorszag</a></li>
                                <li class="nav-kaschau-eperieser-kundschaftsblatt"><a href="/kundschaftsblatt_de">Kaschau-Eperieser Kundschaftsblatt</a></li>
                                <li class="nav-kassai-szemle"><a href="/kassai-szemle_de">Kassai Szemle</a></li>
                            </ul>
                        </li>
                        <li class="nav-zeitschriften"><a href="/zeitschriften_de">Zeitschriften</a>
                            <ul class="subnav-3" style="display: none;">
                                <li class="nav-der-bote-von-und-fr-ungern"><a href="/bote-ungarn_de">Der Bote von und für Ungern</a></li>
                                <li class="nav-pannonia"><a href="/pannonia_de">Pannonia</a></li>
                            </ul>
                        </li>
                        <li class="nav-volkskalender"><a href="/volkskalender_de">Volkskalender</a></li>
                    </ul>
                </li>
                <li class="nav-bcher"><a href="/monographien_de">Bücher</a>
                    <ul class="subnav-2">
                        <li class="nav-gesamtliste"><a href="/monographien_sortdate">Gesamtliste</a></li>
                    </ul>
                </li>
                <li class="nav-bildersammlung"><a href="/bildersammlung_de">Bildersammlung</a>
                    <ul class="subnav-2">
                        <li class="nav-postkarten"><a href="/postkarten_de">Postkarten</a></li>
                        <li class="nav-karten"><a href="/karten_de">Karten</a></li>
                    </ul>
                </li>
                <li class="nav-sondersammlungen"><a href="/sondersammlung">Sondersammlungen</a>
                    <ul class="subnav-2">
                        <li class="nav-alltag"><a href="/alltag_de">Alltag</a></li>
                        <li class="nav-eugen-deil"><a href="/eugen-deil_de">Eugen Deil</a></li>
                        <li class="nav-theaterplakate"><a href="/theaterplakate_de">Theaterplakate</a></li>
                        <li class="nav-handwerk"><a href="/wanderbuecher_de">Handwerk</a></li>
                        <li class="nav-adressbcher"><a href="/adressbuecher_de">Adressbücher</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li class="nav-kninica" style="display: none;"><a href="/bibliothek_sk">Knižnica</a>
            <ul class="subnav-1">
                <li class="nav-periodik" style="display: none;"><a href="/periodika_sk">Periodiká.</a>
                    <ul class="subnav-2">
                        <li class="nav-zeitungen_sk" style="display: none;"><a href="/zeitungen_sk">Zeitungen_sk</a></li>
                        <li class="nav-zeitschriften_sk" style="display: none;"><a href="/zeitschriften_sk">Zeitschriften_sk</a></li>
                        <li class="nav-volkskalender_sk" style="display: none;"><a href="/volkskalender_sk">Volkskalender_sk</a></li>
                    </ul>
                </li>
                <li class="nav-knihy" style="display: none;"><a href="/monographien_sk">Knihy</a>
                    <ul class="subnav-2">
                        <li class="nav-gesamtliste_sk" style="display: none;"><a href="/monographien_sortdate_sk">Gesamtliste_sk</a></li>
                    </ul>
                </li>
                <li class="nav-obrazov-materil" style="display: none;"><a href="/bildersammlung_sk">Obrazový materiál</a>
                    <ul class="subnav-2">
                        <li class="nav-postkarten_sk" style="display: none;"><a href="/postkarten_sk">Postkarten_sk</a></li>
                        <li class="nav-karten_sk" style="display: none;"><a href="/karten_sk">Karten_sk</a></li>
                    </ul>
                </li>
                <li class="nav-pecilne-zbierky" style="display: none;"><a href="/sondersammlung_sk">Špeciálne zbierky</a>
                    <ul class="subnav-2">
                        <li class="nav-alltag_sk" style="display: none;"><a href="/alltag_sk">Alltag_sk</a></li>
                        <li class="nav-theaterplakate_sk" style="display: none;"><a href="/theaterplakate_sk">Theaterplakate_sk</a></li>
                        <li class="nav-eugen-deil" style="display: none;"><a href="/eugen-deil_sk">Eugen Deil.</a></li>
                        <li class="nav-handwerk_sk" style="display: none;"><a href="/wanderbuecher_sk">Handwerk_sk</a></li>
                        <li class="nav-adressbcher_sk" style="display: none;"><a href="/adressbuecher_sk">Adressbücher_sk</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li class="nav-knyvtr" style="display: list-item;"><a href="/bibliothek_hu">Könyvtár</a>
            <ul class="subnav-1">
                <li class="nav-idszaki-kiadvnyok" style="display: list-item;"><a href="/periodika_hu">Időszaki kiadványok</a>
                    <ul class="subnav-2">
                        <li class="nav-zeitungen_hu" style="display: list-item;"><a href="/zeitungen_hu">Zeitungen_hu</a></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

有谁知道为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:29:58.577

您可以在 jQuery 选择器中使用 $ 来获取链接结尾。

> 属性以选择器结尾`[name$="value"]`
> 
> **描述：**选择具有指定属性的元素，其值恰好以给定字符串结尾。比较区分大小写。

[`Official Document`](http://api.jquery.com/attribute-ends-with-selector/)

**例子**

```
$('a[href$="_sk"]').css('display','none'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:35:01.947

尝试

```
$('a[href$="_sk"], a[href$="_en"]').parent().hide(); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/uH964/1/)

# terminal - 使用 OS X 10.8 终端创建和移动不可见文件

> ID：15755579
> 
> 赞同：0
> 
> 时间：2013-04-02T03:28:33.183
> 
> 标签：terminal, osx-mountain-lion, hidden-files

我对使用终端还很陌生，但到目前为止，我已经通过各种论坛了解了如何从 Finder 中隐藏文件，但是一旦隐藏，我显然无法将其移动到我想保留的闪存驱动器上，我想不出任何办法在文件从内部驱动器移出后隐藏文件。我正在使用命令行：

```
Computer-name:~ User$ chflags hidden /users/me/desktop/filename.txt 
```

隐藏文件后如何移动文件，或者在将文件移动到闪存驱动器后如何更改命令以隐藏文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:38:37.070

绝对这是一个 AskDifferent ( [https://apple.stackexchange.com/](https://apple.stackexchange.com/) ) 类型的问题，但同时，它也很容易回答。

1）只需将文件移动到您的闪存驱动器

接着

2）使用“”将其复制/移动到闪存驱动器后隐藏它`chflags hidden`以及它在闪存驱动器上的路径。另一种选择是使用“ `SetFile -aV path/to/file.txt`”

仅仅因为它对 Finder 隐藏并不意味着当您`ls`在终端中键入“”时看不到它。因此，您可以在使文件不可见后反转步骤并进行复制。

# struts2 - 为什么无法访问请求中的属性？

> ID：15755583
> 
> 赞同：3
> 
> 时间：2013-04-02T03:29:16.280
> 
> 标签：struts2

我想访问request中的一些属性，例如request中的`base`属性，下面是request中的部分值

```
 request    ...base=/ecs, stack=com.opensymphony.xwork2.ognl.OgnlValueStack@11c4b31}, __cleanup_recursion_counter=1, .freemarker.RequestParameters=freemarker.ext.servlet.HttpRequestParametersHashModel@1c00cb4 ... 
```

我`<s:debug /><s:property value="%{#request.base}" />` 用来访问`base`中的属性`request`，但在我的 jsp 中没有显示任何内容。所以为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:28:10.620

不知道你为什么需要这个，但只有`base`inside `request`is inside `.freemarker.TemplateModel`which is `ScopesHashModel`。所以你需要使用方法`get`从那里获取东西。

```
<s:property value="#request['.freemarker.TemplateModel'].get('base')" /> 
```

试试这个：

```
<s:property value="#request['javax.servlet.include.context_path']"/> 
```

**更新**

如果您只需要上下文路径，请为此使用`<s:url>`标签。

```
<s:url value="/"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T16:44:54.620

如果您想访问请求参数，以下将起作用

```
<s:property value="#parameters['base']"/> 
```

如果您想访问请求的属性，那么以下应该可以工作

```
<s:property value="#request.base"/> 
```

或者

```
<s:property value="#request['base']" /> 
```

# php - php 和 mysql - 将复选框、单选按钮和下拉菜单结果从用户发送到 mysql 数据库并将其存储在那里

> ID：15755584
> 
> 赞同：0
> 
> 时间：2013-04-02T03:29:30.677
> 
> 标签：php, mysql, drop-down-menu, checkbox, radio-button

我正在尝试将表单数据存储在 mysql 数据库中。我希望用户键入或单击的所有内容都存储在那里。我能够成功地将我的文本字段存储在 mysql 中。我无法弄清楚如何将多个复选框、单选按钮和下拉列表发送到 mysql 并将其存储在那里。我什至不知道从哪里开始。请帮忙。

```
CREATE TABLE wer(
ID int NOT NULL auto_increment,
student_gender varchar(6),
student_session_one_preference varchar(30),
student_session_two_preference varchar(30),
waldron_scholarship tinyint,
jesse_van_anterp_huyck_scholarship tinyint,
edward_raney_scholarship tinyint,
school_type varchar(25),
student_statemenet_consent_check_box tinyint,
guardian_statemenet_consent_check_box tinyint,
waiver tinyint, 
PRIMARY KEY(ID)
);

$student_gender = trim(mysql_prep($_POST['student_gender']));
$student_session_one_preference = trim(mysql_prep($_POST['student_session_one_preference']));
$student_session_two_preference = trim(mysql_prep($_POST['student_session_two_preference']));
$waldron_scholarship = trim(mysql_prep($_POST['waldron_scholarship']));
$jesse_van_anterp_huyck_scholarship = trim(mysql_prep($_POST['jesse_van_anterp_huyck_scholarship']));   
$edward_raney_scholarship = trim(mysql_prep($_POST['edward_raney_scholarship']));
$school_type = trim(mysql_prep($_POST['school_type']));
$student_statement_consent_check_box = trim(mysql_prep($_POST['student_statement_consent_check_box']));
$guardian_statement_consent_check_box = trim(mysql_prep($_POST['guardian_statement_consent_check_box']));
$waiver = trim(mysql_prep($_POST['waiver']));

<input type="radio" name="student_gender" value="Male">Male<br>
<input type="radio" name="student_gender" value="Female">Female<br>
<select name="student_session_one_preference">
<option value="Session 1">Session 1: June 30 - July 21</option>
<option value="Session 2">Session 2: July 28 - August 18</option>
</select> <br/>

Preference 2:
<select name="student_session_two_preference">
<option value="Session 1">Session 1: June 30 - July 21</option>
<option value="Session 2">Session 2: July 28 - August 18</option>
</select>
<input type="checkbox" name="waldron_scholarship" value="Waldron Scholarship">Waldron Scholarship<br/>
<input type="checkbox" name="jesse_van_anterp_huyck_scholarship" value="Jesse Van Anterp Huyck Scholarship">Jesse Van Anterp Huyck Scholarship<br/>
<input type="checkbox" name="edward_raney_scholarship" value="Edward Raney Scholarship">Edward Raney Scholarship<br/>

<select name="school_type">
<option value="Public">Public</option>
<option value="Private">Private Parochial</option>
<option value="Other">Other</option>
</select>

<input type="radio" name="waiver" value="">I waive any right of access that I may have to information submitted by my referee<br>
<input type="radio" name="waiver" value="">I do not waive any right of access that I may have to information submitted by my referee<br>

<input type="checkbox" name="student_statement_consent_check_box" value="Agree">By checking this box, the student acknowledges <br/> that they have read the statement <br/> of consent and agrees with it.<br>

<input type="checkbox" name="guardian_statement_consent_check_box" value="Agree">By checking this box, the guardian acknowledges <br/> that they have read the statement <br/> of consent and agrees with it.<br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:48:38.763

你能试试这个代码吗

```
<?php
    if(!empty($_POST) && isset($_POST["submit-btn"])){
        $gender = isset($_POST["student_gender"]) ? $_POST["student_gender"] : "";
        $student_session_one_preference = isset($_POST["student_session_one_preference"]) ? $_POST["student_session_one_preference"] : "";
        // do the rest of the elements

        echo $student_session_one_preference;
    }
?>

<form method="POSt">
<input type="radio" name="student_gender" value="Male">Male<br>
<input type="radio" name="student_gender" value="Female">Female<br>

<select name="student_session_one_preference">
                    <option value="Session 1">Session 1: June 30 - July 21</option>
                    <option value="Session 2">Session 2: July 28 - August 18</option>
                </select> <br/>
                Preference 2:
                <select name="student_session_two_preference">
                    <option value="Session 1">Session 1: June 30 - July 21</option>
                    <option value="Session 2">Session 2: July 28 - August 18</option>
                </select>

<input type="checkbox" name="waldron_scholarship" value="Waldron Scholarship">Waldron Scholarship<br/>
                    <input type="checkbox" name="jesse_van_anterp_huyck_scholarship" value="Jesse Van Anterp Huyck Scholarship">Jesse Van Anterp Huyck Scholarship<br/>
                    <input type="checkbox" name="edward_raney_scholarship" value="Edward Raney Scholarship">Edward Raney Scholarship<br/>

<select name="school_type">
                    <option value="Public">Public</option>
                    <option value="Private">Private Parochial</option>
                    <option value="Other">Other</option>
                </select>

<input type="radio" name="waiver" value="">I waive any right of access that I may have to information submitted by my referee<br>
                    <input type="radio" name="waiver" value="">I do not waive any right of access that I may have to information submitted by my referee<br>

<input type="checkbox" name="student_statement_consent_check_box" value="Agree">By checking this box, the student acknowledges <br/> that they have read the statement <br/> of consent and agrees with it.<br>

<input type="checkbox" name="guardian_statement_consent_check_box" value="Agree">By checking this box, the guardian acknowledges <br/> that they have read the statement <br/> of consent and agrees with it.<br>

<input type="submit" value="Submit" name="submit-btn">

</form> 
```

此代码假定表单提交到同一页面。

希望这可以帮助你。

# javascript - 所需的 jQuery（依赖表达式）无法正常工作

> ID：15755585
> 
> 赞同：0
> 
> 时间：2013-04-02T03:29:44.427
> 
> 标签：javascript, jquery, jquery-plugins, jquery-validate

我正在使用 jquery[验证](http://plugins.jquery.com/validation/)插件。当我使用 required(dependency-expression) 时，我注意到 [required(dependency-expression)](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)无法正常工作。如前所述，我尝试过

```
$("#flight_availability").validate({
    rules: { 
       Trip: { required: true },
       DepartDate: { required : "#OneTrip:checked" },
       Origin: { required:"#OriginId:blank" }
    },
}); 
```

在上面提到的代码中，代码`DepartDate: { required : "#OneTrip:checked" },`工作正常但`Origin: { required:"#OriginId:blank" }`不起作用。

代码有什么问题？我用萤火虫。它没有显示任何错误。甚至也使用了验证调试选项，但是:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:15:00.573

根据OP的评论：

> *“即使 OriginId 为空（空白），它也会验证它为真”*

是的，这正是您对其进行编程的方式。

```
Origin: {
    required: "#OriginId:blank"
} 
```

上面的代码是说该`Origin`字段仅`required`在该`#OriginId`字段留空时才有效。使用`#OriginId:filled`，此逻辑表示`Origin`如果填写 ，则该字段必须保持为空`#OriginId`。如果这不完全正确，那么您可以使用`:blank`选择器。

[http://jsfiddle.net/xMAs5/](http://jsfiddle.net/xMAs5/)

如果您想要相反的行为，请改用`:filled`选择器。

```
Origin: {
    required: "#OriginId:filled"
} 
```

[http://jsfiddle.net/xMAs5/1/](http://jsfiddle.net/xMAs5/1/)

* * *

否则，这是一个使用自定义方法的演示，该方法`empty`根据您的评论起作用：*“因此，如果`OriginId`为空则意味着`Origin`值（任何内容）无效。”*

```
$(document).ready(function () {

    $.validator.addMethod('empty', function (value, element) {
        return (value === '');
    }, "This field must remain empty!");

    $("#flight_availability").validate({
        rules: {
            Trip: {
                required: true
            },
            DepartDate: {
                required: "#OneTrip:checked"
            },
            Origin: {
                empty: {
                    depends: function (element) {
                        return $("#OriginId").is(":blank")
                    }
                }
            }
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/Ab8bT/](http://jsfiddle.net/Ab8bT/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:51:23.363

可能是 jQuery puesdo 选择器尝试使用 :empty 而不是 :blank。

# yii - 如何在 Yii 的 TCPDF 上显示 blob 图像？

> ID：15755593
> 
> 赞同：0
> 
> 时间：2013-04-02T03:31:19.913
> 
> 标签：yii, blob, tcpdf

有没有办法在 Yii 的 TCPDF 中显示 blob 图像？我试过调用这个函数，但它没有显示任何图片。

```
 public function actionDisplayAgencyIcon()
{
        $info = BaseAgencyInfo::model()->find();
        $id = $info->agencyID;

        if($id == null || trim($id)=='') {
        echo "error in image, bad ID value [{$id}]";
        exit();
        }

        $model=BaseAgencyInfo::model()->find("agencyID = '{$id}'");

        if($model->agency_logo == null){
        echo "error in image, using ID [{$id}] ";
        exit();
        }

header('Content-Type: gif,jpeg,png');
echo $model->agency_logo; 
```

}

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T14:55:50.683

尝试指定一个正确的标题：

```
header('Content-Type: image/jpeg');
echo $model->agency_logo; 
```

# google-apps-script - 查找脚本

> ID：15755596
> 
> 赞同：0
> 
> 时间：2013-04-02T03:31:45.273
> 
> 标签：google-apps-script

我的 Gmail 帐户自动归档电子邮件时遇到问题。我试图创建一个脚本来对某些电子邮件执行此操作，但它正在对所有电子邮件执行此操作。

有谁知道我可以去哪里查看我所有的活动脚本并查看是否有意外运行？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:22:35.083

帐户设置 > 安全 > 管理访问

或在 Gmail 中搜索您的邮件以查找授权通知。

# iphone - 无法链接到 yaml 框架

> ID：15755601
> 
> 赞同：3
> 
> 时间：2013-04-02T03:32:07.277
> 
> 标签：iphone, ios, xcode, frameworks, yaml

我正在制作一款 iPhone 游戏，并希望将 YAML 用于数据文件。由于[这个问题](https://stackoverflow.com/questions/1909538/is-there-a-native-yaml-library-for-iphone)，我继续前进并获得了[syck library](https://github.com/indeyets/syck/tree/master/ext/cocoa/src)。我设法用 xCode 编译库并将框架导入我的项目 [1]。我的代码成功导入了头文件，xCode 甚至找到了补全，但是当我尝试运行以下代码时，我得到一个无效的选择器异常：

```
NSMutableArray *arr = [[NSMutableArray arrayWithCapacity:4] retain];

[arr addObject:@"FOO BAR BAZ QUUX"];
[arr addObject:@"FOO BAR BAZ QUUX"];
[arr addObject:@"FOO BAR BAZ QUUX"];
[arr addObject:@"FOO BAR BAZ QUUX"];

NSLog([arr yamlDescriptionWithIndent:0]);
[arr release]; 
```

这是我得到的错误：

```
2013-04-01 23:27:50.530 PhaseWrath[13910:207] -[__NSArrayM yamlDescriptionWithIndent:]: unrecognized selector sent to instance 0x5548a30
2013-04-01 23:27:50.533 PhaseWrath[13910:207] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM yamlDescriptionWithIndent:]: unrecognized selector sent to instance 0x5548a30'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x0145f5a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x015b3313 objc_exception_throw + 44
    2   CoreFoundation                      0x014610bb -[NSObject(NSObject) doesNotRecognizeSelector:] + 187
    3   CoreFoundation                      0x013d0966 ___forwarding___ + 966
    4   CoreFoundation                      0x013d0522 _CF_forwarding_prep_0 + 50
    5   PhaseWrath                          0x00005e85 +[Skeleton initialize] + 517
    6   libobjc.A.dylib                     0x015b3d9b _class_initialize + 380
    7   libobjc.A.dylib                     0x015bb73f prepareForMethodLookup + 73
... 
```

似乎头文件被解析了，但是在库代码实际链接的地方出了点问题……有什么想法吗？我对 xCode 很陌生，一般来说都是为 iPhone 开发的。

[1] 如果我做错了什么，可能是在这一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:58:57.760

您是否在构建设置中传递了`-ObjC`和链接器标志？`-all_load`在链接到包含 Objective-C 类别的库时需要这些（这是 Syck 用来向 NSArray 和其他内置类添加方法的方法）。有关详细信息，请参阅这些：

*   [https://developer.apple.com/library/mac/#qa/qa2006/qa1490.html](https://developer.apple.com/library/mac/#qa/qa2006/qa1490.html)
*   [静态库中的 Objective-C 类别](https://stackoverflow.com/questions/2567498/objective-c-categories-in-static-library)

# android - 找不到android日志

> ID：15755602
> 
> 赞同：1
> 
> 时间：2013-04-02T03:32:09.423
> 
> 标签：android, windows, android-ndk

我无法在 windows 中对我的代码进行 ndk-build。但它在linux中工作

安卓.mk

```
 LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

TARGET_PLATFORM := android-8 
LOCAL_ARM_MODE := arm
LOCAL_MODULE    := hello
LOCAL_SRC_FILES := hello.c

LOCAL_SHARED_LIBRARIES := liblog
LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib –llog

include $(BUILD_SHARED_LIBRARY)

#$(call import-module) 
```

你好ç

```
#include <unistd.h>
#include <stdlib.h>
#include <android/log.h>
#define LOG_TAG "testhello"
#define LOGD(fmt, args...) __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, fmt, ##args)  

int hook_entry(char * a){
    LOGD("Hello ARM! %s pid:%d\n",a,getpid());
    return 0;
} 
```

D:/android-ndk-r8d/build/core/build-binary.mk:357: 警告：覆盖目标`E:/yanshi/libhello//obj/local/armeabi' D:/android-ndk-r8d/build/core/build-binary.mk:357: warning: ignoring old commands for target`E:/yanshi/libhello//obj/local/armeabi' 的命令

"编译 arm : hello <= hello.c

共享库：libhello.so

arm-linux-androideabi-g++：错误：-llog：没有这样的文件或目录

make: *** [E:/yanshi/libhello//obj/local/armeabi/libhello.so] 错误1

Windows 7中的llog有什么问题？

# machine-learning - WordNet：同一对象不同部分之间的语义关系

> ID：15755604
> 
> 赞同：2
> 
> 时间：2013-04-02T03:32:30.147
> 
> 标签：machine-learning, nlp, wordnet

我有一个关于“WordNet：同一对象不同部分之间的语义关系”的问题。以下是我引用维基百科的一段话：

> 例如，Holonymy/Meronymy 定义了表示整体的术语与表示整体的一部分或一部分的术语之间的关系。那是，
> 
> 如果 Ys 是 Xs 的一部分，则“X”是“Y”的全音词，或者如果 Ys 是 Xs 的成员，则“X”是“Y”的全音词。

那么，我想知道，如果X和Y是同一个对象的不同部分，那么X和Y之间的语义关系是什么？

例如，键盘和鼠标都是计算机的组成部分。键盘和鼠标之间的语义关系是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T03:54:54.117

请注意，关系是您作为 Wordnet 开发人员创建的。如果您正在用自己的语言开发 Wordnet，那么您可能需要定义某种特定的关系。所以，**不要指望在 Wordnet 中默认会有各种关系**。

可能你要找的*词*只是**Sibling**，但据我记得，*两个兄弟 Meronyms***没有**具体的关系。如果有这样的东西，那么这是数据库中的一个非常糟糕的异常，因为我们从一侧收集 Meronyms/Holonyms，从另一侧收集它们的兄弟姐妹，这是额外的。在这种情况下，您需要使用**查询**，即：

 ***```
For a given X, extract all its Holonyms with related Meronyms of those Holonyms 
```***

# asp.net-web-api - ValidateAntiForgeryToken 如何与可通过 Web 或本机应用程序访问的 Web API 匹配？

> ID：15755607
> 
> 赞同：9
> 
> 时间：2013-04-02T03:32:48.080
> 
> 标签：asp.net-web-api, antiforgerytoken

我试图了解如何使用 ASP.NET Web API 制作一个 API，该 API 将受到[CSRF](http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-%28csrf%29-attacks)的保护，同时仍可从非 Web 环境（例如本机移动应用程序）访问。

我的第一个想法是非 Web 环境永远无法成功通过防伪令牌验证，因为它没有发布的表单。这是真的？有什么方法可以使验证工作吗？

如果没有办法验证，我的第二个想法是提供一个 API，它可以验证 Web 调用的防伪令牌，但不能验证非 Web 调用。然而，攻击者似乎可以很容易地使用这个“非网络”API 进行 CRSF 攻击，对吧？

答案是非 Web API 只需要支持非 Web 身份验证机制（OAuth？），因此无法通过浏览器重放对它的请求吗？或者有没有更简单的方法？

如果这是唯一的方法，是否有一种简单的方法可以关闭所有不安全的身份验证机制？ASP.NET Web API 中不应该有一些简单/快乐的路径来支持这些场景吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:50:53.483

仅当您使用持久性身份验证机制（例如 cookie、基本身份验证、NTLM 等）时，CSRF 才会成为问题。Mike Wasson 有[一个](http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-%28csrf%29-attacks)在 Javascript 中针对 webapi 使用 CSRF 的示例 - 我在 DelegatingHandlers 中看到了版本......

由于 CSRF 只是 Web 场景中的一个问题，您可以争辩说没有真正需要检查非 Web 请求。来自浏览器的每个 ajax 请求，无论是通过 jquery、本机 XmlHttpRequest 类还是带有标头的任何东西 - X-Requested-With，它的值都是 XMLHttpRequest。因此，您可以将 CSRF 检查限制为仅具有该标头的请求，因为没有它的任何内容都必须来自浏览器外部。

*话虽如此，如果您要进行身份验证，我会查看某种共享密钥或 OAuth 机制，并使用 DelegatingHandler 服务器端进行验证，然后在 Web 应用程序中将令牌放在可以通过 javascript 获取的某个位置，然后通过 X-Authentication 标头发送 - 因为它不是持久性的并且需要附加到每个请求（就像 CSRF 令牌一样），所以没有 CSRF 问题。Dominick 一如既往地很好地[记录](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/wiki)了这类事情。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:30:35.870

查看最新 MVC4 更新中的 SPA 模板。他们有一个针对 Web API 的 Anti-CSRF 的示例实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:45:42.940

看看 WebAPI 的 CORS 实现。

[http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/02/cors-support-in-asp-net-web-api-rc-version.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/02/cors-support-in-asp-net-web-api-rc-version.aspx)

然后，您可以只允许 localhost 作为 webapi 服务器上的有效 URI。这将防止其他站点在浏览器中加载攻击代码。

# c# - 如何备份和恢复MongoDB数据库

> ID：15755608
> 
> 赞同：7
> 
> 时间：2013-04-02T03:32:49.250
> 
> 标签：c#, mongodb, backup, restore

如何使用C#备份和恢复Mongodb数据库？现在只有一个服务器来保存mongodb数据，我想做一个备份，以防服务器被破坏，以便我可以恢复它。

有人知道如何使用 C# 做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-23T13:43:57.410

来自 mongolab 网站（[http://docs.mongolab.com/backups/](http://docs.mongolab.com/backups/)）一个有用/简单的例子：

要**备份**使用**mongodump**：

```
% mongodump -h ds012345.mongolab.com:56789 -d dbname -u dbuser -p dbpassword -o dumpdir 
```

要**恢复**使用**mongorestore**：

```
% mongorestore -h ds023456.mongolab.com:45678 -d dbname -u dbuser -p dbpassword dumpdir/* 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T03:43:20.230

如果您只想要自动备份，有一种比使用成熟的编程语言更简单的方法：

[http://docs.mongodb.org/manual/tutorial/backup-databases-with-filesystem-snapshots/](http://docs.mongodb.org/manual/tutorial/backup-databases-with-filesystem-snapshots/)

如链接所示，以下命令就足够了。您可以将其放入 statup-script/daemon 以定期执行它：

备份：

```
lvcreate --size 100M --snapshot --name mdb-snap01 /dev/vg0/mongodb 
```

恢复：

```
lvcreate --size 1G --name mdb-new vg0
gzip -d -c mdb-snap01.gz | dd of=/dev/vg0/mdb-new
mount /dev/vg0/mdb-new /srv/mongodb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T12:41:37.250

使用 mongodump 进行备份，使用以下命令

mongodump -d **database_name** -o **directory_where_mongodb_exists**

要恢复使用此命令

mongorestore -d 数据库名称 mongodb_restore_directory

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-24T12:59:12.010

在这个答案中，我将强调我在第一次这样做时遇到的一些警告。希望这对处于相同情况的人有用。尽管该示例使用命令行，但这些实用程序在 Mongo 安装中是开箱即用的，并且可以很好地与 C# 一起使用。

首先，确保您的 MongoDB 安装目录在环境路径中，并且您可以访问**mongodump**命令。MongoDB 通常安装在`~\ProgramFiles\MongoDB\Server\<vr>\bin`Windows 上。

从 CMD 访问该实用程序后，导航到要保存（或转储）备份的目录。

检查`mongodump --help`选项。我使用了简单的（完整）备份和恢复。因此，使用命令并指定所需的选项。这是一个例子：

**`mongodump /host:ds062199.mlab.com /port:62199 /username:mydbuser /password:mypwd /db:mydbname`**

`dump/dbname`当您按下回车键时，该实用程序将在子目录中创建 BSON 和元数据 JSON 备份文件。

现在，要恢复，请执行以下操作。请注意，我备份了一个在 Azure（Mongo Labs）上运行的 Mongo 实例，并在我的本地机器上恢复它，如下所示。在同一目录中（在 cmd 上），执行以下命令：

**`mongorestore /host:localhost /port:27017`**

它将创建一个新的数据库，作为本地 mongodb 实例上备份的副本。

希望这可以帮助！

# machine-learning - 您如何在多层感知器网络和用于预测数值的模型树之间进行选择？

> ID：15755618
> 
> 赞同：1
> 
> 时间：2013-04-02T03:34:08.937
> 
> 标签：machine-learning, neural-network

在预测数值时，什么样的数据会使多层感知器在准确性方面比模型树（M5 素数）表现更好？

# c - 输出中的未知字符

> ID：15755619
> 
> 赞同：-1
> 
> 时间：2013-04-02T03:34:15.257
> 
> 标签：c

接受用户输入时，有时会收到未知字符：

![http://imageshack.us/photo/my-images/833/capture1ec.jpg/](https://i.stack.imgur.com/T57GC.png)

这是我的代码：

```
#include <stdio.h>

void main()
{
    char plaintext[50];
    char arr[10]={'a','b','c','d','e','f','g','h','i','j'};
    char key[20];
    int plain=0,max1=0,max2=0;
    char chip[30][30];
    int z=0,i,j,k=0,c=0,a;
    char swap,temp; 
    printf("Enter key :");
    scanf("%[^\n]",key);

    for(i=0;key[i]!='\0';i++)
    {
        max2++; 
    }

    printf("Enter plaintext :");
    scanf("%s",&plaintext);

    for( i = 0; plaintext[i] != '\0'; i++ ) 
    {
        plain++; 
    }

    if (plain%max2==0)
        max1=plain/max2;
    else
        max1=plain/max2+1;

    while (plaintext[k]!='\0')
    {        
        for (i=0;i<max1;i++)
        {
            for (j=0;j<max2;j++)
            {
                if (plaintext[k]!=NULL)
                {
                    chip[i][j]=plaintext[k];
                    k++;
                }
            }
        }
    }

    /*printf("\n");
    for (i=0;i<max1;i++)
    {
        for (j=0;j<max2;j++)
        {
            printf("%c ",chip[i][j]);
        }
        printf("\n");
    }*/

    for(i=0;i<max2;i++)
    {
        if(chip[max1-1][i]==NULL)
        {
            chip[max1-1][i]=arr[c];
            c++;
        }
    }

    printf("\n");
    /*for (i=0;i<max1;i++)
    {
        for (j=0;j<max2;j++)
        {
            printf("%c ",chip[i][j]);
        }
        printf("\n");
    }*/

    for (i = 0 ; i < max2; i++)
    {
        for (j = 0 ; j < max2 ; j++)
        {
            if (key[i] < key[j]) 
            {
                swap = key[j];
                key[j] = key[i];
                key[i] = swap;

                for (a=0;a<max1;a++)
                {
                    temp=chip[a][j];
                    chip[a][j]=chip[a][i];
                    chip[a][i]=temp;
                }
            }
        }
    }

    /*printf("\n");
    for (i=0;i<max1;i++)
    {
        for (j=0;j<max2;j++)
        {
            printf("%c ",chip[i][j]);
        }
        printf("\n");
    }*/
    for (i=0;i<max2;i++)
    {
        for (j=0;j<max1;j++)
        {
            if (chip[j][i]!=NULL)
                printf("%c ",chip[j][i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:57:49.137

在使用之前尝试添加它`chip`。

```
#include <string.h>

...

char chip[30][30];
memset(chip, 0, 30 * 30);  // <- add this one

... 
```

或者干脆

```
char chip[30][30] = {0}; 
```

# android - W/System.err(421): org.json.JSONException: 在字符 0 处输入结束

> ID：15755621
> 
> 赞同：0
> 
> 时间：2013-04-02T03:34:32.247
> 
> 标签：android

```
this code error:
04-02 03:01:52.552: I/params(421): [name=aad, category_id=0]
04-02 03:01:52.552: E/Log(421): Failed to download result..
04-02 03:01:52.552: W/System.err(421): org.json.JSONException: End of input at character 0 of 
04-02 03:01:52.552: W/System.err(421):  at org.json.JSONTokener.syntaxError(JSONTokener.java:446)
04-02 03:01:52.562: W/System.err(421):  at org.json.JSONTokener.nextValue(JSONTokener.java:93)
04-02 03:01:52.562: W/System.err(421):  at org.json.JSONObject.<init>(JSONObject.java:154)
04-02 03:01:52.562: W/System.err(421):  at org.json.JSONObject.<init>(JSONObject.java:171)
04-02 03:01:52.562: W/System.err(421):  at com.gift2u.products.ListProduct.onCreate(ListProduct.java:94 
```

如果我给参数 [name=, category_id=0] 所有编程运行正确，我会编写程序搜索过滤器 product_name 或 category_id。谢谢大家的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:03:56.707

您的 Json 字符串格式错误。

将 [ ... ] 替换为 { ... }。

[ ] 是一个 json 数组，而不是 json 对象。

# linux - 在 while 循环中未分配值

> ID：15755627
> 
> 赞同：0
> 
> 时间：2013-04-02T03:35:11.147
> 
> 标签：linux, shell, unix

下面是我的代码。在这里，我将第二列替换为“1”到“1AM”，但它不起作用。

```
#! /bin/ksh

file="TOTAL_SALES_UNITS_ORDERS_SORTDATA1.txt"
while IFS=":" read f1 f2 f3 f4 f5
do
if [[ $f2 -eq '1' ]];
then
print $f2
f2="1AM"
print $f2
fi
    IFS=":"
done < "$file" 
```

预期结果是第 2 列更新为 1AM，其中值为 1。但文件未更新，回显值显示 1AM 但文件具有值“1”。

代码有什么问题吗？请指导提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:29:10.033

因此，您想有条件地将`:`-delimited 文件中的第二列从`1`更改为`1AM`?

您可以轻松地做到这一点，例如`awk`：

```
$ cat testdata
foo:bar:quux:one:two
foo:1:quux:one:two

$ awk 'BEGIN { OFS=FS=":" } { if ($2 == "1") $2 = "1AM"; print }' < testdata > newdata
$ cat newdata
foo:bar:quux:one:two
foo:1AM:quux:one:two 
```

# c# - EF4/5 自动生成 LocalDb 数据库：SQL Server 等价物是什么？

> ID：15755628
> 
> 赞同：0
> 
> 时间：2013-04-02T03:35:14.560
> 
> 标签：c#, entity-framework-5, sql-server-2008-express

我一直在开发一个使用 Entity Framework 5 作为 ORM 的 Web 应用程序。EF5 将为我想要的每个新数据库自动生成一个文件（其默认行为没有连接字符串，但在 web.config 中指定了 System.Data.Entity.Infrastructure.LocalDbConnectionFactory）。我一直在为每个客户生成一个新数据库。我预计在我的一生中客户总数不会超过 5000 人。如何将此功能转换到大型 Sql Server 上？我需要编写自己的代码来在那里创建数据库吗？那会去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:25:12.023

在我的工作场所，我们为应用程序的每个后续版本生成并存储一个创建脚本，以便我们可以随时启动任何版本的数据库。这将是我建议的创建新数据库的方法（在服务器上创建数据库然后运行创建脚本的代码）。该代码将在您注册新客户的任何地方运行（可能会延迟他们的注册通知，直到他们的数据库准备好？）。

我认为在一个 SQL Server 实例中运行 5000 个数据库是一个不合理的大数字，您应该考虑如何将数据库拆分到单独的服务器上以及如何管理指向正确的主机。

给定一个到 SQL Server 上现有数据库的连接字符串和正确的初始化设置 ( `CreateIfNotExist`)，您`DbContext`将发挥它的魔力并为您创建数据库结构。这当然会让您在数据库中缺少任何非表元素（存储过程、函数），因此您必须在事后管理添加这些元素（除非这是我不知道的 EF 功能）。

您还可以重新设计数据库结构，以便所有客户端都存在于一个数据库中，其中的表具有 ClientID 字段。由于我不知道您的应用程序的详细信息，因此很难说这是否是一个好的解决方案。

关于 EF 和连接字符串：

要在实体框架中指定连接字符串，您有两个选项。

选项 1\. 将实际连接字符串（作为字符串）传递到 DbContext 的构造函数中。您也可以通过这种方式执行方法二，但不是传入实际的连接字符串，而是在 app.config（或 web.config）中传入连接字符串的名称。

```
public class YourContext
{
public YourContext(string connectionString) : base(connectionString) { }
} 
```

选项 2：在使用 DbContext 的应用程序的 app.config 中指定连接字符串，并在 app.config 中传递连接字符串的名称。这是我的首选方法，我通常将名称硬编码到 DbContext 类中。

```
public class YourContext
{
  public YourContext() : base("YourContext") {}
} 
```

在你的 App.Config

```
<connectionStrings>
<add name="YourContext" connectionString="Data Source=YourDataSource(SQLServerInstance);Initial Catalog=YourDatabaseName;User Id=selfexplanatory;Password=selfexplanatory" providerName="System.Data.SqlClient" />
<add name="GenericYourContext" connectionString="Data Source=YourDataSource(SQLServerInstance);Initial Catalog={0};User Id=selfexplanatory;Password=selfexplanatory" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:17:09.617

“大”SQL Server，可以通过连接字符串来控制，没有任何问题。您的 DBContext 只需将 connectionString ( `"name=yourconnectionStringNameHere"`) 的名称作为参数传递给它的超类（在构造函数中）：

```
class MyDBContext : DBContext {
    public MyDBContext(String customerConnectionString) : base("name="+customerConnectionString) {}
} 
```

这将导致每个客户都有一个可以自动创建的数据库。如果您使用的是代码优先（我认为，因为您说的是自动生成数据库），那么您（你们俩；））还应该查看 EF-Migrations，它会在版本更新时生成更改脚本并在 SQL 中处理它们你。

希望这可以帮助

# windows - 如何针对多个版本的 Windows

> ID：15755629
> 
> 赞同：3
> 
> 时间：2013-04-02T03:35:17.607
> 
> 标签：windows, windows-xp, targeting

我需要编写一个简单的命令行程序，它可以在 Windows XP 上运行（大多数机器都有 SP3，但有些可能没有）一直到 Windows 7。

我希望能够将它编译成一个不需要我安装额外框架（如 .NET 或 Java）的可移植文件。我应该能够将文件拖到机器上并能够单击并运行。我不介意我是否必须为不同版本的 Windows 进行编译，但如果能够编写一个可以全面使用的版本，那就太好了。我不在乎我是否必须用我不熟悉的语言编写它，程序很简单。我应该用什么语言编写代码来实现这一点？

我正在为其开发的朋友对计算机了解不多，但是看着他的示例目标机器，我看到安装了 Java 6 和 Windows Visual C++ 2008 (Windows XP SP3)。作为替代方案，假设这两个框架都安装在所有这些目标机器上，您建议使用哪一个来获得最大的跨平台支持（仅跨 Windows 版本）？

PS 我正在安装 Visual Studio 2012 的 64 位 Windows 7 机器上开发。我有使用 Python、一些 Java 和一些 C# 的经验。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:51:38.587

这将很难以客观和公正的方式回答，因为一般规则是，写东西的*“最佳”*语言通常是你最熟悉的语言。这是您工作效率最高的语言，即使您必须解决/解决一些障碍，如果您已经对您的语言有经验，那么您将处于最佳位置选择。

所以，因为我主要是 C++ 开发人员，所以我建议您使用 C++ 编写应用程序。如果您*不是*C++ 开发人员，这将是一个非常愚蠢的建议。与仅用另一种语言编写应用程序、解决任何问题并获得继续你的生活。

所需运行时的问题并不是一个能够解决太多决定的问题。几乎每一种流行的语言都需要先安装*某种*类型的运行时，而且你不能简单地依赖那些随处安装的语言。唯一的区别是需要安装的运行时包的*大小和隐喻的“重量”。*这是我对几种流行语言及其要求进行细分的非常基本的尝试：

*   **Java**众所周知，Java 应用程序需要安装 Java 运行时。这通常是一个非常大的运行时环境，你当然不能依赖它安装在任何地方。很多人没有安装 JVM（如果他们接受了最近的坏消息，他们甚至可能不想要一个）。

*   **.NET**（包括 C#、VB.NET 等）与 Java 应用程序一样，以 .NET Framework 为目标的应用程序需要安装 .NET Framework。从统计上讲，任何给定的机器可能比 Java 运行时更可能安装它（如果只是因为微软通过 Windows 更新推出它），但你仍然不能指望它在那里。这也是一个大而重的依赖。

*   **C++**即使 C++ 应用程序编译为不需要运行时环境的本机、非托管代码，如果您使用 Microsoft 的编译器，您将需要安装适当版本的 C++ Redistributable Runtime Library。例如，如果您使用版本 10 的编译器（与 VS 2010 捆绑）进行编译，则需要安装 Visual C++ 2010 Runtime。就像托管运行时一样，您不能指望它已经安装在机器上。另一个应用程序可能已安装它，但它可能没有。您始终必须管理自己的依赖项。幸运的是，这是一个非常*小*的依赖项（相对而言），所以分发并不是什么大问题。

    或者，您*可以*将运行时环境静态链接到您的 C++ 应用程序。这会稍微增加它的大小，但意味着您不必分发可再分发的内容。这样做的缺点是您不会从 CRT 的任何安全更新中受益，因为代码静态链接到您的应用程序中。您必须重新编译和重新分发才能获得所有这些好处，而且工作量很大。但是，如果您*绝对*必须让某些东西在没有任何依赖关系的情况下运行，那么这就是您需要做的。

*   **VB 6**具有讽刺意味的是，您可以保证旧的 VB 6 应用程序将在任何现有的 Windows 安装上开箱即用地运行。这并不是因为 VB 6 不需要运行时环境——大多数情况下确实如此，只是在过去的几个版本中它已经包含在 Windows 本身中，并且由于 VB 6 已经结束生命周期，因此永远不会升级好几年了。这就是为什么这对您来说不是一个好选择的原因之一；另一个是您不能（至少不容易）使用 VB 6 创建命令行应用程序。

所以在很多情况下，你要么必须有一个受控环境，你*知道*你的目标运行时已经安装，要么你必须与你的应用程序一起分发运行时依赖项（理想情况下是一个管理所有这些的安装程序无缝地为用户服务）。现在我们回到我开始的那个——语言决定最好基于你已经知道并且最适合使用/使用的语言。

# c++ - 在可变参数模板扩展中增加 int 的安全方法是什么？

> ID：15755632
> 
> 赞同：6
> 
> 时间：2013-04-02T03:35:26.447
> 
> 标签：c++, c++11, variadic-templates

我正在尝试围绕用 C 编写的 SQL 库实现 C++11 包装器。C 库具有单独的函数，用于从需要列索引的 SQL 语句中获取不同的数据类型。下面是一个简单的方法原型，但有一个严重的缺陷：它依赖于参数执行的顺序，这是不安全的（也可能有编译器错误，没有测试过）。

**问题：**在可变参数模板扩展中安全地递增变量的独立于平台的方法是什么？

```
template< typename... ColumnTypes >
void SQLStatement::execute( std::function< void( ColumnTypes... ) > rowCallback ){
    while( this->nextRow() ){
        int column = 0;
        rowCallback( this->getColumn< ColumnTypes >( column++ )... );
        //                            unreliable increment ^
    }
}

template< typename T >
T SQLStatement::getColumn( const int columnIdx ){}

template<>
inline int SQLStatement::getColumn< int >( const int columnIdx ){
    return sql_library_column_int( this->nativeHandle, columnIdx );
}

// Other getColumn specializations here... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T04:21:03.117

这似乎有效。你只需要适应几件事：

```
#include <functional>
#include <iostream>
#include <cstddef>

void foo(int a, float b, int c) {
    std::cout << a << ", " << b << ", " << c << std::endl;
}

template<typename T>
T getColumn(int index) {
    return T(index);
}

template<size_t... indexes>
struct index_tuple {};

template<size_t head, size_t... indexes>
struct index_tuple<head, indexes...> {
    typedef typename index_tuple<head-1, head-1, indexes...>::type type;
};

template<size_t... indexes>
struct index_tuple<0, indexes...> {
    typedef index_tuple<indexes...> type;
};

template<typename... Args>
struct make_index_tuple {
    typedef typename index_tuple<sizeof...(Args)>::type type;
};

template<typename... ColumnTypes, size_t... indexes>
void execute(const std::function<void(ColumnTypes...)> &callback, index_tuple<indexes...>) {
    // this should be done for every row in your query result
    callback(getColumn<ColumnTypes>(indexes)...);
}

template<typename... ColumnTypes>
void execute(const std::function<void(ColumnTypes...)> &callback) {
    execute(
        callback, 
        typename make_index_tuple<ColumnTypes...>::type()
    );
}

int main() {
    std::function<void(int, float, int)> fun(foo);
    execute(fun);
} 
```

演示[在这里](http://liveworkspace.org/code/lhYgQ$0)。请注意，该函数`foo`仅用于显示索引是否正确递增，就像`return T(index);`in一样`getColumn`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T04:40:53.353

虽然 mfontanini 的解决方案有效并且很好，因为它在编译时执行递增列索引的计算，但我认为值得指出的是，对于*如何在可变参数包扩展中递增 int 的*问题也有直接答案。（不幸的是，由于错误，它似乎不适用于 GCC，请参阅最后的警告。）

答案基于这样一个事实：虽然函数调用中参数的评估是无序的，但**列表初始化**中的参数评估不是：

> （第 8.5.4/4 节）在花括号初始化列表的初始化列表中，初始化子句，包括由包扩展（14.5.3）产生的任何初始化子句，按照它们出现的顺序进行评估。也就是说，与给定初始化子句相关联的每个值计算和副作用在初始化器列表的逗号分隔列表中与任何初始化子句相关联的每个值计算和副作用之前进行排序。
> [注意：无论初始化的语义如何，这种评估顺序都成立；例如，它适用于初始化器列表的元素被解释为构造函数调用的参数时，即使调用的参数通常没有顺序约束。——尾注]

因此，如果您将函数调用转换为基于大括号初始化列表的内容，您将获得所需的效果：

```
rowCallback(std::tuple<ColumnTypes...> { getColumn<ColumnTypes>(column++)... }); 
```

这初始化了一个`std::tuple`使用列表初始化（注意大括号`{ ... }`），因此`column++`副作用将以从左到右的顺序执行。

如果按上述方式编写，这意味着您需要进行更改`rowCallback()`以使其接受 a`std::tuple`而不是参数列表。如果你不喜欢这样，你可以创建一个单独的模板函数，它调用扩展元组产生的参数上的`call_on_tuple(fun,tup)`任何函数。[我曾经在这里](https://stackoverflow.com/a/14089944/777186)描述了如何做到这一点，或者如果你喜欢，你可以从[我的 GitHub 存储库](https://github.com/jogojapan/sufex/blob/master/src/util/tupletools.hpp)中使用。`fun``tup``rlxutil::call_on_tuple`

你的`execute`函数看起来像这样：

```
template <typename... ColumnTypes>
void execute(function<void(ColumnTypes...)> rowCallback)
{
  using std::tuple;
  using rlxutil::call_on_tuple;

  int column = 0;
  call_on_tuple(rowCallback,
                tuple<ColumnTypes...> { getColumn<ColumnTypes>(column++)... });
} 
```

**警告：这在 GCC 中无法按预期工作。我相信这是因为这里报告的错误：http: //gcc.gnu.org/bugzilla/show_bug.cgi?id= [51253](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=51253)。**

# export - 将流程图中的形状从直径复制到 Excel

> ID：15755634
> 
> 赞同：1
> 
> 时间：2013-04-02T03:35:43.257
> 
> 标签：export, export-to-excel, diagram, flowchart, dia

我们可以将流程图中的形状从 Dia 复制到 Excel 或 Word 中进行编辑吗？以及如何做到这一点。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:43:18.153

太遗憾了！据我所知，我们无法将流程图中的形状从 Dia 复制到 Excel 或 Word。因此，我使用 Word (Excel) 制作了流程图，以便能够轻松地复制和编辑形状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T14:21:37.973

您可以尝试以下操作： 创建具有单个形状的图表并将其导出为 EMF 或 WMF 格式。EMF/WMF 格式可以在 Word/Excel 中读取为图形

# mvp - GXT + GWT MVP 在单个应用程序中？

> ID：15755640
> 
> 赞同：1
> 
> 时间：2013-04-02T03:37:06.247
> 
> 标签：mvp, gxt, gwt-mvp, gwt-places, gwt-activities

我正在开发这个使用 100% gxt 代码的项目。现在我们有另一个使用 GWT MVP 模式编写的小项目，我们的任务是将这两个项目集成到一个项目中。因此，我们几乎将在 gxt 和 mvp 代码（包括活动和地点）之间进行来回的方法调用。我是使用 mvp 模式的新手，如果将两者结合起来真的是个好主意，我会有点困惑。另一个（小）项目曾经也是 gxt，直到它被使用 mvp 模式重写。所以我可以选择返回旧的 gxt 代码或将新的 mvp 模式集成到主 gxt 应用程序中。但是由于 gxt 不支持活动/位置概念，因此不能直接从 gxt 调用 mvp 代码。你需要调用 mvp 代码时传入虚假​​数据以模拟地点等。

因此，我非常感谢 MVP 领域专家对如何解决这种情况的任何意见......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:27:04.000

在演示者中，我坚持与数据操作和可测试代码有关的任何事情，或者任何使视图变得愚蠢的事情。也就是说，我喜欢让演示者控制视图，但是我说在许多灰色区域中，我说做有效的事情并进行迭代。简化它的最好方法是构建一个 JUnit 测试并测试演示者逻辑，至少这是我们使用 GWTP 所做的。

A&P 并没有建立严格的 MVP 的固定方法，或者如果在 A&P 中构建 MVP 方法可以以不同的方式完成。但我可能会将数据操作逻辑粘贴在 Place 或 Activity 中。

我在这里有可用的请求工厂，这将允许数据源。 [https://github.com/branflake2267/Archetypes/blob/master/archetypes/gwt-activitiesandplaces-requestfactory/src/main/java/org/gonevertical/project/client/application/home/HomePlace.java#L16](https://github.com/branflake2267/Archetypes/blob/master/archetypes/gwt-activitiesandplaces-requestfactory/src/main/java/org/gonevertical/project/client/application/home/HomePlace.java#L16)

在我使用 GXT 的最新项目中，我将 GWTP 用于 MVP 框架，该框架非常适合遵循严格的可测试 MVP 模式。

我在 Presenter 中有 GXT 数据对象。这个项目很年轻，所以我还在为东西的放置而烦恼。但我认为至少在这个演示者中它可能会给出 GXT 对象放置的角度。 [https://github.com/branflake2267/Project-Manager/blob/master/Directory/src/org/gonevertical/pm/directory/client/application/widgets/archetype/list/ArchetypeListPresenter.java](https://github.com/branflake2267/Project-Manager/blob/master/Directory/src/org/gonevertical/pm/directory/client/application/widgets/archetype/list/ArchetypeListPresenter.java)

# c# - 使用 JSON 序列化请求对象

> ID：15755645
> 
> 赞同：13
> 
> 时间：2013-04-02T03:38:09.843
> 
> 标签：c#, asp.net-mvc, json, serialization

我目前正在研究概念验证并遇到了一个涉及使用 JSON 序列化 HttpRequest 的问题。

**背景**

我最初认为我可以使用[JSON.Encode()](http://msdn.microsoft.com/en-us/library/system.web.helpers.json.encode%28v=vs.111%29.aspx)方法轻松完成它，如下所示：

```
JSON.Encode(HttpContext.Request) 
```

但是，我很快发现这会导致抛出各种循环引用（*主要是由于 Request 对象的实际结构和复杂性*）。这些仅在实际遇到包含循环引用的属性时才会发生，因为我之前使用以下代码来获取我需要的特定元素：

```
JSON.Encode(new {HttpContext.Request.Cookies,HttpContext.Request.Headers, ... }); 
```

效果很好。

我只是好奇是否有更好的方法来处理这个问题（*或者最好的处理方法是什么*）。我将在下面详细介绍到目前为止我所采取的一些方法，以找出我可能出错的任何地方。

**以前的方法**

*   使用反射遍历请求中的每个属性，并尝试构造一个 JSON 字符串“property-by-property”。（*遇到循环引用时失败*）

*   尝试将每个属性存储在 Dictionary 对象中，然后使用 JSON 序列化整个 Dictionary （*希望它将“扁平化”对象并使其更容易序列化*）

*   使用[JSON.NET 库](http://james.newtonking.com/projects/json-net.aspx)并尝试通过 JsonConvert.SerializeObject() 方法对其进行序列化（*我尝试传递几个额外的设置以避免循环引用，但没有任何运气*）

我认为我的最新方法（*使用 JSON.NET 库*）将接近工作，但是我遇到了一个错误，该错误涉及请求中 Stream 对象的“超时”属性。

我不反对简单地避免序列化 Stream 对象和循环引用。我只是想尽可能多地获取 Request 对象，同时避免任何这些类型的事故。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-01-25T13:00:46.267

我只是尝试做同样的事情，我现在已经设法使用带有合同解析器的 JsonConvert 进行序列化以忽略所有问题属性 - 我使用这一行来进行序列化：

```
string reqStr = JsonConvert.SerializeObject(context.Request,
    Formatting.Indented, new JsonSerializerSettings {
        ReferenceLoopHandling = ReferenceLoopHandling.Ignore,
        ContractResolver = new IgnoreErrorPropertiesResolver()
}); 
```

这是我使用的合约解析器代码：

```
public class IgnoreErrorPropertiesResolver : DefaultContractResolver
{

    protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
    {
        JsonProperty property = base.CreateProperty(member, memberSerialization);

        if (["InputStream",
            "Filter",
            "Length",
            "Position",
            "ReadTimeout",
            "WriteTimeout",
            "LastActivityDate",
            "LastUpdatedDate",
            "Session"
        ].Contains(property.PropertyName)) {
            property.Ignored = true;
        }
        return property;
    }
} 
```

这将需要`Newtonsoft.Json.Serialization`和`System.Reflection`使用。

碰巧我不能包含`Session`我所在的对象，所以它在我的忽略属性列表中 - 如果你可以包含它，显然删除它！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T04:36:39.557

您不使用 JSON.Net 的任何特殊原因？它有一个名为 的设置，它`PreserveReferencesHandling`使用附加属性（“$id”：“##”）标记对象。如果该对象多次出现在序列化中，则不会再次写入该对象，而是将其替换为“$ref”：“##”指向该对象的现有json。这绕过了循环引用。

我从来没有尝试过将这种格式的 JSON 返回到 $.ajax 调用，所以我不知道在 web 端解析它会涉及什么。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-21T20:31:01.603

我`JsonConvert.SerializeObject`在我的项目中使用过，它工作正常。看来它可以解决你的问题。

```
JsonConvert.SerializeObject(reqObject) 
```

# python-2.7 - Python：这段代码有什么作用？“模块 = 类型（系统）”

> ID：15755646
> 
> 赞同：2
> 
> 时间：2013-04-02T03:38:16.613
> 
> 标签：python-2.7

我在某处看到了一些用于配置的 python 代码，但我无法理解。

这是代码：

```
import sys, os.path

Module = type(sys) # What does this line for? 

modules = {}

print dir(Module)

def load(fullpath, env={}, module=Module):
    try:
        code = open(fullpath).read()
    except IOError:
        raise ImportError, 'No module named %s' % fullpath

    filename = os.path.basename(fullpath)

    try:
        return modules[filename]
    except KeyError:
        pass

    #################################### 
    #### Most confused 

    m = module(filename) 
    m.__module_class__ = module
    m.__file__ = fullpath

    m.__dict__.update(env)

    exec compile(code, filename, 'exec') in m.__dict__
    ####################################

    modules[filename] = m

    return m

def unload(m):

    filename = os.path.basename(m.__file__)
    del modules[filename]

    return None

def reload(m):
    fullpath = m.__file__

    try:
        code = open(fullpath).read()
    except IOError:
        raise ImportError, 'No module named %s' % fullpath

    env = m.__dict__
    module_class = m.__module_class__

    filename = os.path.basename(fullpath)
    m = module_class(filename)

    m.__file__ = fullpath
    m.__dict__.update(env)
    m.__module_class__ = module_class

    exec compile(code, filename, 'exec') in m.__dict__
    modules[filename] = m

    return m 
```

1.  我不明白为什么要使 Module = type(sys)
2.  var m 及其内置方法有什么作用，我在哪里可以找到文档？
3.  为什么只定义一个dict var？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:40:45.897

在该行上方的代码中：

```
Module = type(sys) 
```

创建一个模块类型的变量。您可以打开解释器并键入以下代码：

```
import sys
Module = type(sys)
help(Module) 
```

您将看到以下内容：

> **关于内置**模块中的类模块的帮助：
> 
> 类模块（对象） | 模块（名称[，文档]）|
> | 创建一个模块对象。| 名称必须是字符串；可选的 doc 参数可以是任何类型。|
> | 此处定义的方法：|
> | **delattr** (...) | X。**delattr** ('name') <==> del x.name |
> | **获取属性**(...) | X。**getattribute** ('name') <==> x.name |
> | **初始化**(...) | X。**init** (...) 初始化 x；签名见 help(type(x)) |
> | **代表**(...) | X。**代表**() <==> 代表 (x) ...

加载方法，你最困惑的地方基本上是在模块 m 中添加文件，然后编译这些模块中的代码。

我不知道您要通过使用此代码来实现什么，但是有更简单的方法可以动态加载模块。例如：

[python模块的动态加载](https://stackoverflow.com/questions/951124/dynamic-loading-of-python-modules)

# ios - iOS 以任何方式取消所有网络请求

> ID：15755650
> 
> 赞同：1
> 
> 时间：2013-04-02T03:38:37.577
> 
> 标签：ios, objective-c, nsurlconnection, afnetworking

我正在做应用程序更新模块。我想做的是：

如果有更新版本检测，提示用户更新，如果有，则取消所有网络请求。请求可能是AFNETWORK创建的，也可能是[NSURLConnection sendSynchronousRequest:returningResponse:error:]，各种网络请求，全部取消即可。我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:53:29.390

`+ (NSData *)sendSynchronousRequest:(NSURLRequest *)request returningResponse:(NSURLResponse **)response error:(NSError **)error`无法取消使用创建的连接。如果您从后台线程调用它，您可能能够杀死线程本身。

更好的方法是使用 NSOperationQueue 并从添加到队列中的 NSOperation 对象启动网络连接。或者，您可以创建 NSOperation 的子类，并让每个实例以它的`cancel`方法作为目标来观察自定义事件通知。使用这种方法，您只需发布自定义通知即可触发对您的所有操作实例及其相关网络连接的取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:59:15.050

在评论中，OP 说他想要这样做的原因是因为他担心应用程序的其他部分会尝试访问不再可用的网络 API。

如果是这种情况，最好的方法是让您的应用程序的其他部分提供一个 API，您的部分（更新程序）可以调用该 API 来说“中止一切！”。这有几个优点：

*   如果应用程序的其他部分开始使用 BGNetworking（明年推出时将比 AFNetworking 好得多），您的更新程序代码仍然可以工作。
*   它使应用程序的其他部分有机会进行他们可能想要的任何清理工作。例如，他们可能只是放弃 API 调用，而不是因为出现问题而重试。

听起来这个更新程序组件不能独立于应用程序的其余部分进行设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T03:44:50.573

如果您正在使用，`AFHTTPClient`那么您可以获取其操作队列并取消对其的所有操作。

但是，除非您拥有`NSURLConnection`已创建的所有对象的列表，否则我不知道有一种方法可以简单地取消所有`NSURLConnection`对象。

# mysql - MySQL 多列 UNIQUE KEY 仅在 1 列不是 DEFAULT 值时唯一

> ID：15755652
> 
> 赞同：0
> 
> 时间：2013-04-02T03:38:50.837
> 
> 标签：mysql, unique-key

`UNIQUE KEY`是否可以在其中创建一个多列`MySQL`，其中只有当 1 列不是默认值时它才是唯一的，即。

```
UNIQUE KEY (`col1`, `col2` IS NOT DEFAULT) 
```

或者

```
UNIQUE KEY (`col1`, `col2` = 1 ) 
```

...

我有一个这样的表结构 -

```
CREATE TABLE IF NOT EXISTS `student_chapters` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `student_id` INT NOT NULL,
  `chapter_id` INT NOT NULL,
  `primary` INT NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY (`student_id`,`chapter_id`); 
```

学生可以有多个“章节”，但只有一个可以是“初级”。因此，如果我有以下 3 行`student_id`=> `1`，

```
id | student_id | chapter_id | primary
1    1            1            0
2    1            2            0
3    1            3            1 
```

我可以插入这个（主要是 0 [默认]）-

```
id | student_id | chapter_id | primary
4    1            4            0 
```

但不是这个（主要是1）

```
id | student_id | chapter_id | primary
4    1            4            1 
```

因为第 3 行已经存在唯一键 ( `student_id`=>1, `primary`=1)。

如果`UNIQUE KEY`像这样是不可能的，还有其他方法可以做到这一点吗？

# core-data - 如何在 sql 中使用 Coredata NSPredicate，如“左连接”

> ID：15755654
> 
> 赞同：0
> 
> 时间：2013-04-02T03:39:05.883
> 
> 标签：core-data, nspredicate

CoreDataModel：（我把 JSONFORMAT 放在这里。）

```
Questions [{qid:1,comments:[{cid:1,user:{'uid':3}},{cid:2,user:{'uid':4}}]},
           {qid:2,comments:[{cid:1,user:{'uid':4}},{cid:2,user:{'uid':5}}]}] 
```

问题与评论有关联，评论与用户有关联。

如何使用 NSPredicate 搜索*用户 (uid=1)*评论过的问题？

**下面是我的模型图片**

![在此处输入图像描述](https://i.stack.imgur.com/dvYcr.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:07:47.640

请求实体应该是`Question`
`[NSPredicate predicateWithFormat:SUBQUERY(comments,$comment,$comment.user.usr_id == %@).@count != 0",userId]`

# javascript - 试图了解如何将 Jade 与 Node.js 一起使用

> ID：15755656
> 
> 赞同：0
> 
> 时间：2013-04-02T03:39:17.323
> 
> 标签：javascript, node.js, pug

我是节点的初学者，只是尝试使用 Jade 模板引擎，我在 github 页面上阅读了自述文件，最终我认为这应该可以工作：

```
var http = require('http'),
    jade = require('jade'),
 fn = jade.compile('html p hello');

function onRequest(req, res) {
    res.writeHead(200, {"Content-Type": "text/html"});
    res.write('Hello World!');

    fn;

    res.end();
}

http.createServer(onRequest).listen(8888);
console.log('Server started.'); 
```

但事实并非如此，有人可以向我解释我做错了什么吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:53:18.990

Jade 需要适当的换行符才能工作。并且正确的换行符在 inline javascript 中是丑陋的。（另外，使用 Jade 进行模板化的好处是关注点分离，例如代码中没有视图逻辑）。

最简单的方法是将模板隔离在一个文件中：

**tpl.jade**

```
doctype 5
html
  body
    p hello 
```

**index.js**

```
var http = require('http')
  , jade = require('jade')
  , path = __dirname + '/tpl.jade'
  , str = require('fs').readFileSync(path, 'utf8')
  , fn = jade.compile(str, { filename: path, pretty: true });

function onRequest(req, res) {
    res.writeHead(200, {"Content-Type": "text/html"});
    res.write(fn());
    res.end();
}

http.createServer(onRequest).listen(8888);
console.log('Server started.'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:43:08.890

这行代码：

```
fn; 
```

……不打电话`fn`。它检索变量中的值`fn`，然后丢弃它，而不用它做任何事情。相反，您想调用它，然后使用它的返回值作为参数`res.end`：

```
res.end(fn()); 
```

此外，`html p hello`不做你认为它做的事：它认为你想要一个标签，`html`，其中包含文本`p hello`。那不是你想要的。您需要使用换行符和正确的缩进，然后它会起作用：

```
html
    p hello 
```

顺便说一句，如果你要使用 Jade，你可能不想有那些无关紧要的东西

```
res.write("Hello World!"); 
```

# css - 绝对定位的 div 的 CSS 文本居中

> ID：15755663
> 
> 赞同：0
> 
> 时间：2013-04-02T03:40:45.537
> 
> 标签：css, html, centering, absolute

我读过大多数类似的帖子，但是使用 line-height 等于 height 或 display:table-cell + vertical-align:middle 都不能帮助我将绝对定位的 div 中的数字居中。

任何帮助表示赞赏。

**html**

```
<div id='test'>
</div> 
```

**CSS**

```
#test {
    position: relative;    
    width: 100px;
    height: 100px;
    border: 1px solid black;
}

.cell {
    display: table-cell;
    vertical-align: middle;
    position: absolute;
    width: 33.33%;
    height: 33.33%;
    text-align: center;
}

.cell:hover {
    background-color: red;
} 
```

**Javascript**

```
var cell = $("<div class='cell'></div>");
var e = $('#test');
var val;
for(i=0;i<3;i++) {
    for(j=0;j<3;j++) {
        val = (i*3)+(j+1);
        c = cell.clone();
        $(e).append(c);
        $(c).html(val);
        $(c).css('top',(i*33.33)+'%');
        $(c).css('left',(j*33.33)+'%');
        $(c).data('value',val);
    }
} 
```

链接：http: [//jsfiddle.net/wB7Mk/1/](http://jsfiddle.net/wB7Mk/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:46:21.547

您需要使`line-height`等于以像素为单位的高度。你可以得到高度`$(height)`

```
.css('line-height', $(c).height() + 'px'); 
```

[http://jsfiddle.net/ExplosionPIlls/wB7Mk/2/](http://jsfiddle.net/ExplosionPIlls/wB7Mk/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:57:25.733

只需在您的 CSS 中添加一行，

在`.cell`

```
.cell{line-height:33px;} 
```

这样就可以了，根本不需要辛勤工作:)

更新[的小提琴](http://jsfiddle.net/MarmeeK/wB7Mk/3/)

如果你想要它动态添加这个

`$('.cell').css("line-height","33px");`

更新[的小提琴](http://jsfiddle.net/wB7Mk/4/)

# asp.net - ASP/.NET 在不使用 ODBC 或任何驱动程序的情况下连接 MySQL 服务器？

> ID：15755664
> 
> 赞同：3
> 
> 时间：2013-04-02T03:40:54.017
> 
> 标签：asp.net, mysql, .net, asp-classic, odbc

在`Classic ASP`or`.NET`中，有没有一种方法可以在`MySQL`不使用的情况下进行连接，例如，`MySQL ODBC Driver`或者`Any Driver`需要在服务器上安装，假设我不是管理员或没有任何安装权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:08:26.500

[首先从这里](http://dev.mysql.com/downloads/connector/net/6.0.html)下载 MySql.Data.MySqlClient dll，然后从下拉列表中选择 Platform .net/mono

添加对您的项目的引用。你完成了。

它与 System.Data.SqlClient 相同。

我希望它会帮助你

如果您需要文件[点击这里](http://dev.mysql.com/doc/refman/5.1/en/connector-net-ref-mysqlclient.html)

# php - php在数组的另一个字符串中搜索字符串

> ID：15755667
> 
> 赞同：0
> 
> 时间：2013-04-02T03:41:15.437
> 
> 标签：php, arrays, find

我需要这样的东西

```
$keywords = array('google', 'yahoo', 'facebook');

$mystring = 'alice was going to the yahoo CEO and couldn't him her';

$pos = strpos($mystring, $keywords);

if ($pos === false) {
    echo "The string '$keywords' was not found in the string '$mystring'";
} 
```

基本上，如果查找字符串中是否存在任何项，我需要在字符串中搜索多个术语。

我想知道是否可以将关键字 /search 设置为不区分大小写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:45:16.140

只需遍历关键字并在找到至少一个时停止：

```
$found = false;

foreach ($keywords as $keyword) {
    if (stripos($mystring, $keyword) !== false) {
        $found = true;
        break;
    }
}

if (!$found) {
    echo sprintf("The keywords '%s' were not found in string '%s'\n",
        join(',', $keywords),
        $mystring
    );
} 
```

或者，使用带有交替的正则表达式：

```
$re = '/' . join('|', array_map(function($item) {
    return preg_quote($item, '/');
}, $keywords)) . '/i';

if (!preg_match($re, $mystring)) {
        echo "Not found\n";
} 
```

# dojo - Dojo 1.8 中使用 DataGrid 和 Form 小部件的主从关系

> ID：15755669
> 
> 赞同：0
> 
> 时间：2013-04-02T03:41:23.197
> 
> 标签：dojo, jax-rs, master-detail, dojox.grid.datagrid, dijit.form

我有一个`dojox.data.JsonRestStore`用作商店的网格。我想使用小部件 Form ( `dijit.form.Form`) 来编辑数据。实现`dojo/on`而不是`dojo.connect`用于绑定网格和表单。

这里是**JsonRestStore** ("/rest/console/getobjectlist") 结果（由 Restful Web Service - **JAX-RS**提供）

```
[{"host":"192.168.3.7","port":"5474"},
{"host":"192.168.4.41","port":"8100"},
{"host":"192.168.5.5","port":"9999"}] 
```

这里以编程方式**Grid**和**JsonRestStore**

```
<script>
require(
        [ 'dojo/dom', 'dojo/json', 'dojox/json/schema',
                'dojox/data/JsonRestStore', 'dojox/grid/DataGrid',
                'dojox/grid/_CheckBoxSelector', 'dojo/on', 'dojo/request/xhr', 'dijit/Dialog',
                'dijit/ProgressBar', 'dijit/MenuBar',
                'dijit/PopupMenuBarItem', 'dijit/MenuItem', 'dijit/Menu',
                'dijit/Calendar', 'dijit/form/Form',
                'dijit/form/ValidationTextBox', 'dijit/form/TextBox',
                'dijit/form/FilteringSelect', 'dijit/form/Button',
                'dijit/form/ComboBox', 'dijit/form/ComboButton',
                'dijit/form/RadioButton', 'dijit/form/DropDownButton',
                'dijit/form/MultiSelect', 'dijit/form/NumberTextBox',
                'dijit/form/ToggleButton', 'dijit/form/SimpleTextarea',
                'dijit/layout/BorderContainer',
                'dijit/layout/TabContainer', 'dijit/layout/ContentPane',
                'dojo/domReady!' ],
        function(dom, JSON, schema, JsonRestStore, DataGrid,
                _CheckBoxSelector, on, xhr) {
            var store = new JsonRestStore(
                    {
                        target : "/rest/console/getobjectlist"

                    });

            var gridCell = [
                    {
                        name : "Host",
                        field : "host"

                    },
                    {
                        name : "Port",
                        field : "port",
                        width : "30%"
                    },
                    {
                        name : "Action",
                        field : "action",
                        formatter : function(item) {
                            var link = '<a href="edit.jsp" title="Edit"><div class="dijitIconEdit"></div></a> <a href="adapter.html" title="delete.jsp"><div class="dijitIconDelete"></div></a>';

                            return link;
                        }

                    }

            ];

            gridLayout = [ {
                // First, our view using the _CheckBoxSelector custom type
                type : "dojox.grid._CheckBoxSelector"
            }, gridCell ];

            var grid = new DataGrid({
                store : store,
                structure : gridLayout,
                selectionMode: "single",
                autoHeight : true
            }, "ObjectGrid");
            grid.startup();

            on(grid, "RowClick", function showDetail (e){
                            var grx = dijit.byId("AdapterGrid");
                            var host = grid.store.getValue(grid
                                    .getItem(e.rowIndex), "host");
                            var serviceurl =  "/rest/console/getobject?host="+host;

                            console.log(serviceurl);
                            xhr(serviceurl,{
                                handleAs: "json"}
                            ).then( function (data){
                                    dijit.byId("detailsForm").attr("value", serviceurl);
                            });
            } );

        });
 </script> 
```

**HTML**

```
<body class="claro">
        <div id="ObjectGrid"></div>

        <form data-dojo-type="dijit/form/Form" id="detailsForm" method="post"
            data-dojo-props="region:'center'">

            <table>
                <tbody>
                    <tr>
                        <td>Host:</td>

                        <td><input type="text" required="true" name="host" id="host"
                            placeholder="host address"
                            regExp="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$"
                            data-dojo-type="dijit/form/ValidationTextBox" /></td>
                    </tr>
                    <tr>
                        <td>Port:</td>
                        <td><input type="text" required="true" name="port" id="port"
                            regExp="\d+" placeholder="port"
                            data-dojo-type="dijit/form/ValidationTextBox"
                            invalidMessage="Numeric only" /></td>
                    </tr>
                </tbody>
            </table>

            <!-- submit buttons -->
            <input type="submit" value="Save" label="Save" id="submitButton"
                data-dojo-type="dijit/form/Button" />
        </form>

 </body> 
```

我的计划是小部件表单数据将通过单击网格上的一行来填充，然后稍后使用 POST 方法更改值，但仍然无法获取值。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:31:48.370

我在[这里开始了一个 jsfiddle](http://jsfiddle.net/tApbC/8/)，但我不确定单击一行时你想要发生什么。

该示例只是将表单字段值设置为单击的网格行中的值。此特定代码如下所示：

```
 on(grid, "RowClick", function showDetail(e) {
        var item = grid.getItem(e.rowIndex);
        console.log("item", item);

        var serviceurl = "/rest/console/getobject?host=" + item.host;

        console.log("host", host, "serviceurl", serviceurl);

        var form = registry.byId("detailsForm");
        var hostInput = registry.byId("host");
        var portInput = registry.byId("port");
        console.log(registry);
        console.log(form);

        // set the form fields to match the clicked item
        hostInput.set("value", item.host);
        portInput.set("value", item.port); 
```

我不清楚你还想发生什么。我可以看到你正在执行一些 XHR，但这是为了什么？你想设置表格的哪一部分`serviceurl`？

# 截屏

![在此处输入图像描述](https://i.stack.imgur.com/DttrG.png)

# java - 如何阻止 Eclipse 格式化程序在 Javadoc 中添加尾随空格

> ID：15755671
> 
> 赞同：19
> 
> 时间：2013-04-02T03:41:41.410
> 
> 标签：java, eclipse, whitespace, javadoc, formatter

在这样的一段代码上运行 Eclipse 格式化程序（Strg+Alt+F）时，我注意到了一个奇怪的行为：

```
/**
 * bar
 *
 * @return nothing
 */
Object foo() {
    return null;
} 
```

它将在此处**添加**尾随空格字符：

```
/**
 * bar
 * <--- this line has a trailing space now!
 * @return nothing
 */
Object foo() {
    return null;
} 
```

我知道如何配置 Eclipse 以删除尾随空格，但它有办法阻止格式化程序首先添加它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:45:40.497

您只需转到 Preferences -> Java -> Editor -> Save Actions 并将其配置为删除尾随空格。

为此，请右键单击您的项目并转到 Properties -> Java Editor -> Save Actions。从那里您可以启用项目特定设置并将其配置为删除尾随空格（以及其他有用的东西）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-10-05T02:22:32.100

在**Java** ->**代码样式**->**格式化**程序下。 **编辑**活动配置文件（您可能需要保存一个新配置文件） 在**Javadoc 注释设置区域下的****Comments**选项卡上，您应该取消选中**Blank line before Javadoc tags**。

 ****在我发现这个之前很烦人。****

# java - 从类文件中实例化通用参数化类型

> ID：15755672
> 
> 赞同：0
> 
> 时间：2013-04-02T03:41:47.853
> 
> 标签：java, reflection

因此，客户端将以下列方式创建一个类：

```
public class Tester implements Test<Type1, Type2, Type3> {
    @override
    public method1(...)
    ...
} 
```

然后客户端会将.class文件（IE Tester.class）传递给我们。

然后，我们希望实例化客户端的类并根据泛型使用的类型运行他们的方法 1。到目前为止，我有以下代码，但我认为我没有走正确的道路：

```
 //tempClass = <ClassName>.class
    Type[] genericTypes;
    Type[] genericInterfaces = tempClass.getGenericInterfaces();
    if(genericInterfaces[0] instanceof ParameterizedType){
        genericTypes = ((ParameterizedType)genericInterfaces[0])
                        .getActualTypeArguments();
    }
    Class<Tester<genericTypes[0], genericTypes[1], genericTypes[2]>> classTest
        = ( Class<Tester<genericTypes[0], genericTypes[1], genericTypes[2]>>) tempClass
    Constuctor<...> = ... //get the constructor
    //Create the new instance by calling .newInstance() 
```

但是 eclipse 在 Class> 行中给了我很多错误，所以我认为这不是正确的路径。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T10:40:51.827

这里有几个问题......

首先，两者`Classname.class`本质上都是静态构造——它甚至被称为*类**文字***。因此，不能在运行时提供类型名称，这就是 Eclipse 抱怨您尝试这样做的原因。要获取`Class`给定类名作为字符串的对象，可以使用*Class.forName*：

```
Class<?> tempClass = Class.forName("Tester"); 
```

（完全限定的名称，没有`.class`后缀）。

其次，也是如此`Tester<Type1, Type2, Type3>`。类型参数必须在编译时已知。现在，我不确定你为什么在这个地方需要这个演员表，但我看到了几个可能的原因：

*   为了确保由 表示的类`tempClass`确实实现了适当的接口 - 即使它是语法上合法的构造，它也是没有用的。强制转换不能动态检查泛型类型参数，因为它们也是完全编译时的构造——由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，它们在运行时不可用。要检查给定`Class`对象 A 是否是对象 B 表示的类型的子类/实现`Class`，我们可以使用`Class.isAssignableFrom`：

    ```
    if (B.isAssignableFrom(A)) {
        // ...
    } 
    ```

*   为了避免警告 - 抱歉，这样的转换**确实**是未经检查的，因为无法确保其在运行时的正确性 - 再次，由于类型擦除器。`@SuppressWarnings`在您知道强制转换有效且 Java 类型系统太笨而无法验证您的声明的地方使用。

无论如何，不​​要投射课程。相反，转换`newInstance`调用的结果。现在，至于运行正确的方法......现在您拥有了所需的所有信息，分为两部分：调用方法的对象和已实现接口的类型参数。

# javascript - JavaScript 命名空间——寻找一种简单有效的方法

> ID：15755674
> 
> 赞同：0
> 
> 时间：2013-04-02T03:42:31.763
> 
> 标签：javascript, jquery, javascript-framework

我想在项目中实现 JavaScript 命名空间。我和我的同事都不是 JavaScript 专家，因此我们正在寻找一种简单有效的命名空间方法。可读性是一项巨大的资产，我们是 Java 开发人员，很容易成为 JavaScript 陷阱的猎物。

我们编写了以下概念证明：

```
<html><body><script>
var mynamespace = {};
mynamespace.variable = "inside mynamespace";
mynamespace.level1 = {};
mynamespace.level1.level2 = {};

(function(){
    this.variable = "inside mynamespace.level1";
    this.print = function(){ return "print() : " + this.variable };
}).apply(mynamespace.level1);

(function(){
    this.variable = "inside mynamespace.level1.level2";
    this.print = function(){ return "print() : " + this.variable };
}).apply(mynamespace.level1.level2);

// We can use "that" instead of "this"; however I do not see any benefit in doing it...
(function(){
    if(!mynamespace.level1.level2b){ this.level2b = {}; var that = this.level2b };
    that.variable = "inside mynamespace.level1.level2b";
    that.print = function(){ return "print() : " + this.variable };
}).apply(mynamespace.level1);

document.write(mynamespace.level1.print() + "<br>"); // print() : inside mynamespace.level1
document.write(mynamespace.level1.variable + "<br>");// inside mynamespace.level1

document.write(mynamespace.level1.level2.print() + "<br>");// print() : inside mynamespace.level1.level2
document.write(mynamespace.level1.level2.variable + "<br>");// inside mynamespace.level1.level2

document.write(mynamespace.level1.level2b.print() + "<br>");// print() : inside mynamespace.level1.level2b
document.write(mynamespace.level1.level2b.variable + "<br>");// inside mynamespace.level1.level2b

document.write(mynamespace.variable + "<br>");// inside mynamespace
document.write(mynamespace.something + "<br>");// undefined
</script></body></html> 
```

=== 问题 ===

Q1。你认为这是一个好方法吗？

Q2。我们会遇到什么陷阱吗？

Q3。您有更好的建议吗（请考虑简单性、可读性）？

非常感谢任何帮助。

干杯，

**编辑：** 我们将使用 jQuery。因此，我们会考虑使用 jQuery 的更好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:09:11.287

即使对于简单的项目，我也总是使用 JavaScript 命名空间。我正在使用以下命名空间模式（在 JavaScript 模式中找到）：

```
var SN = SN || {};

SN.namespace = function(ns_string) {
    var parts = ns_string.split('.'),
        parent = SN,
        i;

    // strip redundant leading global
    if(parts[0] === "SN") {
        parts = parts.slice(1);
    }

    for(i = 0; i < parts.length; i++) {

        //create property if it doesn't exist
        if(typeof parent[parts[i]] === "undefined") {
            parent[parts[i]] = {};
        }

        parent = parent[parts[i]];
    }

    return parent;
} 
```

你可以像这样使用它：

```
SN.namespace('SN.subnamespace1.subnamespace3');
SN.subnamespace1.subnamespace3.object = function() {}; 
```

在团队工作时以这种方式创建命名空间是一种很好的方法——没有人会覆盖你的命名空间。当团队将创建命名空间时，您还可以轻松地指定一个位置（文件），这样就可以很容易地看到使用或不使用的名称。

然后，如果需要，我将使用闭包来分隔对象的私有上下文（正如您在示例中所做的那样）。闭包可能是 JS（函数式编程）中最强大的工具。您可以创建持续存在直到删除每个内部对象的上下文。

我也喜欢[getInstance JavaScript 模式](https://stackoverflow.com/a/15674109/571230)和启示模式（不管有`new`没有都可以）：

```
var cat = function(name, color, size) {
    var _color = color,
        _size = size,
        _name = name,
        getName = function() { return _name; },
        getColor = function() { return _color; },
        getSize = function() { return _size; };
    return {
        color: getColor,
        size: getSize,
        name: getName
    }
};

var new_cat1 = new cat('a', 'b', 1);
var new_cat2 = new cat('c', 'd', 2);
var new_cat3 = cat('e', 'f', 3);

console.log(new_cat1.name());
console.log(new_cat2.name());
console.log(new_cat3.name()); 
```

还请阅读我在开始时提到的那本书——我个人认为这是用 JS 编程时最佳实践的最佳来源。我从这本书中学到了很多！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:09:40.623

就个人而言，我认为你已经做得很好了，只是一些小事情需要改进。首先，您应该将您的命名空间移动到一个单独的文件中，而不是像这样将它与您的工作放在同一个文件中。我建议你把它放在`namespace.js`. 接下来，也很重要，你应该检查当前命名空间是否存在。您上面的代码总是声明新变量。这是一个相当严重的问题，特别是当你的同事已经声明了命名空间并为该命名空间添加了一些属性时，你的代码将完全覆盖你的同事，并且当你拉取同事的代码时总是会出错。我会建议：

在`namespace.js`：

```
var window.MyNameSpace = window.MyNameSpace || {};
MyNameSpace.variable = "inside mynamespace";
MyNameSpace.level1 = MyNameSpace.level1 || {};
MyNameSpace.level1.level2 = MyNameSpace.level1.level2 || {}; 
```

因此，当您的同事已经声明了命名空间或向现有命名空间添加了一些属性时，它不会覆盖现有的命名空间。假设您的同事已经创建`MyNameSpace`并添加了`MyNameSpace.level1 = something`. 上面的代码不会覆盖`MyNameSpace`and `MyNameSpace.level1`，它只是指向当前现有的命名空间及其属性。

**注意**必须在其他 js 文件之前包含 namespace.js，否则会`undefined`出错。

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:37:32.483

我可以看到一些快速的问题。

考虑一下：

```
var car = {};
car.manufacturer = "Toyota";
car.doors = 4;
car.format = "sedan";
car.wheels = 4; 
```

这里有很多重复。
如果您要尝试使其成为进一步嵌套的对象，但继续以这种方式定义属性，则需要大量重新键入或复制/粘贴。

```
var garage = {};
garage.cars = [];
garage.cars[0] = {};
garage.cars[0].doors = 4;
garage.cars[0].drivers = [];
garage.cars[0].drivers[0].name = "Bob"; 
```

...等等。

这里的第一个问题是很容易以一种或另一种形式错过细节。有太多的行，太多的重复，也许在第 37 行，你忘记了初始化`cars[3].drivers[1].license_number`。

第二个问题是，如果你打破了这个初始化，但尝试以定义不明确的顺序进行初始化（即：对多个 JS 文件执行此操作，或对多个 AJAX 调用执行此操作），那么您将面临命中的风险一个例外，当您尝试将属性添加到尚不存在的成员时。

// 核心 js var MyApp = {}; MyApp.modules = {};

// js #2 在 js #1 之前加载 MyApp.modules.myModule.subModule = {}; // 会抛出异常

// js #1 MyApp.modules.myModule = {};

有很多方法可以解决这个问题，但它们都取决于您希望实现的目标：

如果您正在考虑构建具有静态默认值的数据结构，那么我建议您构建一个像这样的简单数据结构：

```
var car = {
    doors : 4,
    manufacturer : "Toyota"
}; 
```

或者像这样更精细的对象：

```
var garage = {
    cars : [
        {
            doors : 2,
            drivers : [
                { name : "Bob", age : 32 },
                { name : "Susanne", age : 18 }
            ]
        }
    ]
}; 
```

它们仍然可以很容易地被引用，如下所示：

```
garage.cars[0].drivers[1].name; // Susanne 
```

如果您正在构建功能模块，例如库，那么命名空间仍然是一个好主意。
以其他答案中提供的任何一种方式执行此操作。

系统检查：

```
if (MyApp && MyApp.modules.myModule) {
    MyApp.modules.myModule.subModule = {
        send : function () { }
    };
} 
```

或者构建一个可以使用的函数，例如：

```
namespace("MyApp.modules.myModule.subModule.addOn", { method : function () {},
                                                      property_1 : 1,
                                                      property_2 : false       }); 
```

然后可以拆分字符串并检查每个名称是否存在，如果不存在则创建它们。

另外，不要使用`document.write`. 浏览器现在可以很好地防止它搞砸网站，但您应该将`console.log`其用于日志记录目的，或 DOM 操作（或`.innerHTML`，如果需要）用于写入页面。

也`that`没有真正做到你认为的那样。
问题`this`在于，如果您在另一个函数内部有一个函数，`this`它将变为`window`，而不是与以前保持相同。

一个例子：

```
function decrease_fuel () { this.fuel -= 1; }

var car = {
    fuel : 100,
    speed : 10,
    pos  : { long : ..., lat : ... },
    dir  : { long : ..., lat : ... },
    drive : function () {
        if (this.fuel > 0) {
            this.pos.long += this.dir.long * this.speed;
            this.pos.lat  += this.dir.lat  * this.speed;
            decrease_fuel(); // whoops! `this === window`
            // decrease_fuel.call(this); would work
        }
    }
}; 
```

因此，如果您要创建一个希望内部范围指向与`this`外部相同的函数，您将使用一个变量来保存外部的值`this`，以便内部通过闭包引用。

```
var outer = function () {
    var that = this,
        inner = function () { console.log(that); };
    inner();
};

outer.call({ name : "Bob" }); // logs bob object 
```

如果中的行`inner`是`console.log(this);`，那么：

```
outer.call({ name : "Bob" }); // would log `window` object 
```

至于`namespacing`vs `requireJS`，在某种程度上，它们都是同一个东西。
它们的不同之处在于它们的用途。
`requireJS`旨在用于加载多个文件，并确保它们以正确的顺序加载。如果您使用 requireJS 定义命名空间，那么它们将在加载完成后被命名空间。

使用简单的命名空间功能，您可以按照项目约定的方式加载单个组件，然后在每个文件中使用命名空间功能添加每个模块。

如果您只打算拥有一个 JS 文件，那么 requireJS 不会比另一个提供太多好处。
如果您将拥有多个 JS 文件（每个模块一个，就像您可能在 Java 中拆分类一样），那么`requireJS`可以提供一些好处，但需要您学习接口。

# apache-pig - 使用 Pig 读取以空格分隔的文件

> ID：15755675
> 
> 赞同：1
> 
> 时间：2013-04-02T03:42:32.380
> 
> 标签：apache-pig

我正在尝试读取内容如下所示的日志文件：

> 2013-03-28T12:19:03.639648-05:00 host1 rpcbind：rpcbind 终止信号。使用“rpcbind -w”重新启动
> 2013-03-28T12:20:33.158823-05:00 host2 rpcbind：rpcbind 终止于信号。使用“rpcbind -w”重新启动

我试过像这样使用 PigStorage 空间分隔符：

> cmessages = LOAD 'data.txt' USING PigStorage(' ') AS (date:chararray, host:chararray, message:chararray);

但这会扼杀第三个领域的信息，我认为这在以后可能会有用。

转储消息；

```
<snip>
(2013-03-28T12:19:03.639648-05:00,host1,rpcbind:)
(2013-03-28T12:20:33.158823-05:00,host2,rpcbind:)
</snip> 
```

有没有更好的方法来读取这个不需要昂贵的正则表达式或 UDF 加载器的日志文件？Pig中应该有一些东西可能会在第二个空格之后说停止？也许不吧。

更新：只是为了修改我想要的：而不是

> (2013-03-28T12:19:03.639648-05:00,host1,rpcbind:)

我想要：

> （2013-03-28T12:19:03.639648-05:00，host1，rpcbind：rpcbind 终止信号。使用“rpcbind -w”重新启动）

本质上，我想要元组的最后一个字段中的完整日志消息。我希望这更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:43:27.773

如果不确切知道控制日志的规则，就没有完美的解决方案，但是如果您假设日期和主机具有固定长度，则可以使用以下内容：

```
A = load 'mydata' as (log:charray);
B = foreach A generate SUBSTRING(name, 0, 31) AS date, 
                       SUBSTRING(name, 33, 37) AS host, 
                       SUBSTRING(name, 39, 255) AS message; 
```

如果仅知道它们由前 2 个空格分隔，则可以使用以下内容：

```
A = load 'mydata' as (log:charray);
B = foreach A generate log, INDEXOF(log, ' ', 0) as index;
C = foreach B generate log, index, INDEXOF(log, ' ', index + 1) AS index2;
D = foreach C generate SUBSTRING(log, 0, index) AS date, 
                       SUBSTRING(log, index + 1, index2) as host, 
                       SUBSTRING(log, index2+1, 255) as message; 
```

您必须了解有关日志的“规则”，然后选择适当的方法。在这里，我还假设您最长的日志是 256 个字符长。

# c - 对于C，我是否应该得出结论，函数声明中的“抽象声明符”不是强制性的，而只是可取的？

> ID：15755676
> 
> 赞同：0
> 
> 时间：2013-04-02T03:42:35.257
> 
> 标签：c

理解抽象声明符及其使用对我来说花费了很多时间和精力。但令我惊讶的是，我刚刚阅读了函数声明中不需要抽象声明符。这是 Wikipedia ( [LINK](http://en.wikipedia.org/wiki/Function_prototype) ) 所说的：

“重要的是要知道，函数的声明不需要包含原型。下面是一个无原型的函数声明，它只是声明了函数名及其返回类型，但没有说明函数的参数类型是什么。定义期望。

```
int fac(); 
```

"

那么这是否意味着我不需要在此声明中使用抽象声明符：

```
int fac(int); 
```

?

请最终为我解决这个问题。我是否应该假设我们不需要在函数声明期间包含抽象声明符，但只建议这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T03:49:14.983

是的，你*可以*只声明函数，而不是原型。

也就是说，这仅允许*向后*兼容。原型已经在这门语言中使用了几十年，而且每个头脑正常的人（完全使用 C 语言的人）基本上一直在使用原型。除非您*真的*需要编写与真正*古老*的编译器兼容的代码，否则编写使用函数声明而不是原型的新代码绝对*没有任何*好处（甚至是借口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:49:08.873

我不确定你在问什么。“抽象声明器”是什么意思，是指函数原型吗？

函数原型是使用函数所必需的，否则函数必须在本地声明，并且必须在使用它的函数之上声明。

通过使用函数声明，您可以使您的函数在整个程序中全局可见，而不是简单地对其下面的函数可见。

总体而言，您的函数不是存储在您的标头中，而是存储在库中，然后链接到您的程序。

编译时，所有 C 函数（无论您喜欢与否）都链接到您的程序中。在您声明一个声明它的函数原型之前，您的程序根本不会注意到它们。

例如：

```
int printf(char *, ...);

int main()
{
    printf("hello, world!\n");
    /* puts("hello, world"); // I produce a warning. */
    return 0;
} 
```

工作，不包括 stdio.h。

为了澄清以下评论中的问题：

```
void c();

void a() {

}

int main() {
    a();      // works
    b();      // error
    c();      // works
    return 0;
}

void b() {

}

void c() {} 
```

希望这会有所帮助，但我仍然不确定你在问什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:06:20.810

原型提供对其他编译单元的可见性。

它们还允许您不必构建代码，以便在调用之前进行定义。

在有人提出并说 xyzcc 用 2 pass 符号或其他什么来处理这个问题之前......不要在意，如果编写正确，C 可以移植；应该是。

# algorithm - 这些非比较排序在什么条件下以线性时间运行？

> ID：15755677
> 
> 赞同：6
> 
> 时间：2013-04-02T03:42:36.907
> 
> 标签：algorithm, sorting, big-o, radix-sort, bucket-sort

我正在探索以下算法：

1.  计数排序
2.  基数排序
3.  桶排序

我知道这三个都能够在最好的情况下以线性时间运行，但是我很难理解这些情况何时发生，除了计数排序的情况。

这是我对计数排序的理解，以及如果可能的话，我希望如何回答其他两种算法：

当您希望排序的信息之间没有大的差距时，计数排序以线性时间运行。例如 1、10^5 和 545 等会创建一个大数组，并且使用内存和遍历效率不高，因此这将是使用计数排序的“最坏情况”，因此最好的情况是当差距很小。

如果有人可以帮助我了解线性时间发生时基数和桶排序最佳情况的条件，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T04:01:54.277

让我们从独立分析每个算法开始，看看我们是否可以确定它们在什么情况下会以线性时间运行。

首先，让我们看一下计数排序。该算法的工作原理如下：

*   找到要排序的最大整数。
*   创建一个数组，每个整数一个槽进行排序。
*   遍历主数组，用每个元素的频率更新第二个数组。
*   通过用每个元素的适当数量的副本填充输出数组来构造排序数组。

第一步可以通过迭代主数组在 O(n) 时间内完成。假设数组中的最大值是 U。在这种情况下，第二步需要时间 O(U)，因为我们必须将数组元素归零。第三步需要时间 O(n)。最后一步需要时间 O(n + U)，因为我们只访问频率数组的每个元素一次 (O(U))，并且总共 n 次写入输出数组 O(n)。这意味着总运行时间为**O(n + U)**。请注意，这取决于需要排序的元素总数（较大的数组需要更长的排序时间）和数组中元素的大小（较大的数字将需要更多的运行时间）。

如果我们希望这个运行时间为 O(n)，我们需要要求 U = O(n)。这样，我们就会得到 O(n + U) = O(n + n) = O(n)。这意味着您需要使数组中最大元素的大小以与数组长度增加的速度大致相同的速度增长。例如，如果您保证数组中的所有元素都在 1 .. n 范围内，那么计数排序将需要 O(n) 时间才能完成。这些元素如何在该范围内分布并不重要。

* * *

基数排序本质上是通过一遍又一遍地重复进行计数排序来工作的，对数组中要排序的数字的每个数字一次。基数排序背后的关键思想是使先前算法中的 U 值尽可能低。通过选择一些固定的基数，U 的值被限制在某个常数上。例如，如果您使用二进制基数排序并且一次只进行一位，则要排序的数组的每个元素本质上都被视为 0 或 1。这意味着每一轮基数排序需要时间 O( n) 完成。然后，对整个数组进行排序所需的轮数由数组中最大数的位数给出，即 Θ(log U)。这意味着算法的总运行时间最终为 O(n log U)。

这次的好处是log U的增长比U慢得多。例如，2 ^(300)大约是宇宙中原子的总数，但lg (2 ^(300) ) = 300，相当小。

有些人会声称 log U 在任何固定计算机上都是一个常数。在 32 位计算机上，所有整数都是 32 位（除非您使用的是任意精度整数库，我们现在将忽略它），而在 64 位系统上，所有整数都是 64 位。在第一种情况下，log U = 32，在第二种情况下，U = 64。您可以声称对于固定系统，基数排序*总是*需要线性时间，因为运行时间将为 O(n)。但是，常数因系统而异。如果你更有理论头脑并且想要更精确，你可以说只要 log U = O(1)，基数排序就会在线性时间内运行，因为那样 O(n log U) = O(n)。这意味着如果您对数字中的位数有任何恒定的上限，则可以保证基数排序将在线性时间内运行。

* * *

桶排序算法类似于基数排序，不同之处在于它使用最高有效位而不是最低有效位来分配元素。这意味着分析与以前几乎相同 - 只要 log U = O(1)，算法在线性时间内运行。

* * *

希望这可以帮助！

# java - 你将如何在 Java 中创建一个 2D 元组数组？

> ID：15755682
> 
> 赞同：0
> 
> 时间：2013-04-02T03:43:37.050
> 
> 标签：java, tuples, multidimensional-array

我正在尝试创建一个双元组数组。有人知道这是怎么做到的吗？

我基本上希望有以下内容：

```
int[] values = {5, 1, 7}; // This array length can vary with different values
int desiredGoal = 77;

int data[][] = new int[values.length][desiredGoal + 1]; 
```

二维数组的每个索引都包含一个元组。元组将与 values 数组的长度相同（无论它的长度是多少），并且将包含 values 数组中值的各种组合，以实现所需的Goal 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:01:40.503

他可能不需要 的同步`Vector`，所以他应该坚持`List`和`ArrayList`。假设 Java 7，试试这个：

```
List<Integer> values = new ArrayList<>();
Collections.addAll(values, 5, 1, 7);
int desiredGoal = 77;
List<List<Integer>> data = new List<>(); 
// Create the inner lists:
for (final int ignored: values) {
    data.add(new ArrayList<>(desiredGoal + 1));
    // List<Integer> is wanted, so use type inference.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:53:16.747

您可以使用[java.util.Vector](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html)：

所以它应该是这样的：

```
Vector<Integer> values = new Vector<Integer>(Arrays.asList([5,1,7]));
Vector<Vector<Integer>> data = new Vector<Vector<Integer>>(values.size()) 
//you'll also need to actually create the inner vector objects:
for (int i = 0; i<values.size(); i++){
   data.set(i,new Vector<Integer>(desiredGoal + 1);
} 
```

# c++ - 从输入文件中获取一个字符串

> ID：15755683
> 
> 赞同：0
> 
> 时间：2013-04-02T03:43:44.587
> 
> 标签：c++, file-io

我正在尝试从文件中读取字符串，但它只占用其他所有条目。我的代码哪里出错了？

加载功能：

```
void loadPhoneBookFromFile(PhoneBook& pb, ifstream& fin, const string& filename){
    string firstName;
    string lastName;
    string phoneNumber;

    fin.open(filename.c_str());
    while (fin >> firstName){
        getline(fin, firstName, ',');
        getline(fin, lastName, ',');
        getline(fin, phoneNumber);

        pb.addEntry(PhoneEntry(firstName, lastName, phoneNumber));
    }
}//end loadPhoneBookFromFile 
```

文本文件：（但条目之间没有空格）

> 玛丽，波平斯，555.555.1111
> 
> 彼得，潘，555.555.2222
> 
> 艾德先生，555.555.3333
> 
> 唐老鸭，鸭子，555.555.4444
> 
> 雏菊，鸭子，555.555.5555
> 
> 侯爷,鸭子,555.555.6666
> 
> 斯波克先生，555.555.7777
> 
> 船长，柯克，555.555.8888
> 
> 雪，白，555.555.9999
> 
> 睡觉，美女，555.555.0000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:52:57.343

根据我的经验，“>>”运算符和 getline() 函数不能很好地结合使用。我会将代码更改为此，看看它是否有帮助：

```
while (!fin.eof()){
    getline(fin, firstName, ',');
    getline(fin, lastName, ',');
    getline(fin, phoneNumber, '\n');

    pb.addEntry(PhoneEntry(firstName, lastName, phoneNumber));

} 
```

# c# - 根据 Form2 中的值更新 Form1 中的变量

> ID：15755685
> 
> 赞同：0
> 
> 时间：2013-04-02T03:43:55.247
> 
> 标签：c#, winforms, visual-studio-2010, textbox

我有 2 个表格，名字 HomeForm 和第二个名字 cfgForm

我有变量，HomeForm 中的名称 strCNF，cfgForm 中变量 CNF 的 strCNF 值。

这是来自 HomeForm 的代码：

```
private void cnfRulesMenu_Click(object sender, EventArgs e)
{
    try
    {
        cfgForm cfgForm = new cfgForm(this);
        cfgForm.Show();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message.ToString(), "Error");
    }
}

// other parts....
public cfgForm cfg;
string strCNF = "";
strCNF = ((cfgForm)this.cfg).CNF; 
```

然后，在另一种形式 cfgForm 中，代码如下：

```
public string CNF = "S -> NP VP" + System.Environment.NewLine +
                        "NP -> DT NN | QT NN | NP PP | NP RC | n | p" + System.Environment.NewLine +
                        "DT -> d" + System.Environment.NewLine +
                        "NN -> JJ NN | n" + System.Environment.NewLine +
                        "JJ -> JJ JJ | j" + System.Environment.NewLine +
                        "QT -> q" + System.Environment.NewLine +
                        "PP -> PT NP | GG PP" + System.Environment.NewLine +
                        "PT -> i" + System.Environment.NewLine +
                        "GG -> g" + System.Environment.NewLine +
                        "RC -> WH NP | WH VP" + System.Environment.NewLine +
                        "WH -> w" + System.Environment.NewLine;

    public cfgForm(HomeForm homeForm)
    {
        // TODO: Complete member initialization
        InitializeComponent();
        this.homeForm = homeForm;
    }

    private void btnDefaultCFG_Click(object sender, EventArgs e)
    {
        tbCNF.Text = CNF;
    }

    private void cfgForm_Load(object sender, EventArgs e)
    {
        tbCNF.Text = CNF;
        btnApplyCNF.Enabled = false;
    }

    private void btnApplyCNF_Click(object sender, EventArgs e)
    {
        //CNF = "";
        CNF = tbCNF.Text;
        HomeForm homeForm = new HomeForm();
        homeForm.cfg = this;
        //homeForm.ShowDialog(); 
        this.Hide();// doesn't work
    } 
```

到目前为止，如果我使用 homeForm.ShowDialog()，这些代码运行良好。我的意思是，在 cnfRulesMenu_Click 处于活动状态并显示 cfgForm 支持 HomeForm 之后，然后我更新 cfgForm 中的 CNF 变量，然后返回 HomeForm 和 cfgForm.Hide。但它给出了空值。

任何建议先生..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:53:37.227

因为你`HomeForm`在这些代码中新了另一个。

```
private void btnApplyCNF_Click(object sender, EventArgs e)
{
    //CNF = "";
    CNF = tbCNF.Text;
    HomeForm homeForm = new HomeForm();
    homeForm.cfg = this;
    //homeForm.ShowDialog(); 
    this.Hide();// doesn't work
} 
```

因此，这些代码没有按您的意愿工作。

```
public cfgForm cfg;
string strCNF = "";
strCNF = ((cfgForm)this.cfg).CNF; 
```

将您的代码修改为这些可能会解决您的问题，但我必须说这些架构没有意义。

```
private void btnApplyCNF_Click(object sender, EventArgs e)
{
    //CNF = "";
    CNF = tbCNF.Text;
    this.homeForm.cfg = this;
    //homeForm.ShowDialog(); 
    this.Hide();// doesn't work
} 
```

# android - Android：Facebook SDK 3.0 - FriendPickerFragment setChecked

> ID：15755687
> 
> 赞同：0
> 
> 时间：2013-04-02T03:44:11.037
> 
> 标签：android, facebook, android-fragments, picker

我正在尝试在 FriendPickerDialog 中恢复选定的已检查朋友，我在显示片段之前尝试了此操作，但没有帮助：

```
Bundle args = new Bundle();
args.putString("com.facebook.android.PickerFragment.Selection", "friendId1, friendId2...");
friendPickerFragment = new FriendPickerFragment(args); 
```

看起来 FriendPickerFragment 的适配器没有从该捆绑参数中读取选中的 GraphUsers 属性。

你知道有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:09:33.030

目前没有对此的支持。在这里提交一个错误[https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)，它可能会被作为一项功能。

# python - Python Excel 公式（XLRD、XLWT）和文件路径参考

> ID：15755689
> 
> 赞同：1
> 
> 时间：2013-04-02T03:44:17.810
> 
> 标签：python, excel, xlrd, xlwt, formulas

我目前正处于将我们的文件服务器迁移到新服务器的边缘，不幸的是，我们的会计部门已经制作了 excel 公式，这些公式引用了随机单元格中的备用 excel 文件总和。

我现在有一个脚本，它递归地遍历网络文件，搜索具有 XLS、XLSX、XLT 扩展名的文件......然后使用 XLRD 打开它们......然后遍历每个工作簿，然后遍历每一行，然后每个细胞...

我现在被困在最初我认为最简单的部分，我需要显示一个公式而不是公式的输出......

**excel中的示例公式：**

```
=+-'\\FileServer1\Finance\Money\[Cash money spread.xlsx]Mar'' 14'!$N$134 
```

**使用 XLRD 在脚本中迭代时：（** `$827.00`显示公式的值！！！）

有人有空吗？我有 RegEx (re.sub) 和所有其他组件，除了这个小（但至关重要）组件！

# mysql - 这是mysql错误吗？两个命令几乎相同，但复杂的比简单的快

> ID：15755690
> 
> 赞同：3
> 
> 时间：2013-04-02T03:44:24.090
> 
> 标签：mysql

```
mysql> desc ads_common；
+--------------+-----------+------+--- --+--------------------------------+----------------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+--------------+-----------+------+--- --+--------------------------------+----------------+
| ads_id | bigint(20) 无符号 | 否 | 优先级 | 空 | 自动增量 |
| 用户 ID | bigint(20) 无符号 | 否 | 穆尔 | 空 | |
| 网站类型 | 枚举('组','用户') | 否 | 穆尔 | 空 | |
| 网站ID | bigint(20) 无符号 | 否 | | 空 | |
| subgroup_id | bigint(20) 无符号 | 否 | | 空 | |
| country_id | smallint(5) 无符号 | 否 | 穆尔 | 空 | |
| type_id | int(10) 无符号 | 否 | 穆尔 | 空 | |
| 电话 | 整数(11) | 否 | | 空 | |
| 手机| int(10) 无符号 | 否 | | 空 | |
| cat_id | int(10) 无符号 | 否 | 穆尔 | 空 | |
| 品牌标识 | mediumint(8) 无符号 | 否 | 穆尔 | 空 | |
| 型号ID | mediumint(8) 无符号 | 否 | 穆尔 | 空 | |
| area_id | int(10) 无符号 | 否 | 穆尔 | 空 | |
| is_offering | 小整数(1) | 否 | 穆尔 | 1 | |
| 价格 | 整数(11) | 否 | 穆尔 | 空 | |
| 项目状态 | tinyint(3) 无符号 | 否 | 穆尔 | 空 | |
| 添加时间 | 时间戳 | 否 | 穆尔 | CURRENT_TIMESTAMP | |
| 问题编号 | smallint(5) 无符号 | 否 | | 空 | |
| is_stop | 小整数(1) | 否 | 穆尔 | 0 | |
+--------------+-----------+------+--- --+--------------------------------+----------------+

```

我确实有 type_id、country_id、is_top 多列索引和 type_id 单索引。ads_common 表大约有 180245 行。

**1.先查询命令**

```
SELECT c.ads_id FROM ads_common AS c                                
WHERE c.type_id IN (185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241) 
AND c.country_id=226 AND is_stop=0  ORDER BY c.ads_id DESC 
```

**找到 180,047 行，耗时 0.0026 秒**

**2.秒查询命令**

```
SELECT c.ads_id FROM ads_common AS c
WHERE c.type_id=187 
AND c.country_id =226 AND is_stop=0 ORDER BY c.ads_id DESC 
```

**找到 180,044 行，耗时 0.2335 秒**

只有两个不同的命令是“type_id IN (..187..)”和“type_id=187”，为什么命令2比1慢？

如果命令 2 更改为：

```
SELECT c.ads_id FROM ads_common AS c
WHERE c.type_id IN (185, 187)
AND c.country_id =226 AND is_stop =0 ORDER BY c.ads_id DESC 
```

**找到 180,044 行，这需要 0.0007 秒，这更快。**

```
SELECT c.ads_id FROM ads_common AS c
WHERE c.type_id IN (187)
AND c.country_id =226 AND is_stop =0 ORDER BY c.ads_id DESC 
```

**找到 180,044 行，这需要 0.2267 秒，这更快。**

所有命令都返回几乎相同的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:27:36.157

1.命令

```
SELECT c.ads_id
FROM ads_common AS c                                
WHERE c.type_id=187
AND c.country_id=226 AND is_stop=0  ORDER BY c.ads_id DESC 
```

**（总共 180,044，查询耗时 0.2364 秒）**

```
    解释

    编号：1
    选择类型：简单
    表：c
    类型：index_merge
    可能的键：type_id、country_id、is_stop
    键：is_stop，country_id，type_id
    key_len:1,2,4
    参考：空
    行数：22530  
    额外：使用 intersect(is_stop,country_id,type_id); 使用...

```

2.命令

```
SELECT c.ads_id
FROM ads_common AS c                                
WHERE c.type_id IN (0,187)
AND c.country_id=226 AND is_stop=0  ORDER BY c.ads_id DESC 
```

**总共 180,044 个，查询耗时 0.0010 秒**

```
    解释

    编号：1
    选择类型：简单
    表：c
    类型：参考
    可能的键：type_id、country_id、is_stop
    键：country_id
    key_len:2
    参考：常量
    行数：90122
    额外：使用 where

```

非常有趣，几乎相同的命令，但获得不同的性能。

最后，我重新启动mysql并执行命令，每次执行命令前都重新启动，所以缓存没有问题。

```
命令 1 耗时 1.2358 秒“c.type_id=187”
命令 2 耗时 0.05 秒 "c.type_id IN (0, 187)"，您可以将 0 替换为任意数字，结果相同。

```

是的，“c.type_id in (187)”与“c.type_id=187”的性能相同，但“c.type_id in (187,0)”或“c.type_id in (0,187)”性能更好。

# asp.net - 将视频文件流式传输到 idevice

> ID：15755698
> 
> 赞同：3
> 
> 时间：2013-04-02T03:45:19.910
> 
> 标签：asp.net, ios, streaming

我是 asp.net 的新手，我尝试使用 ashx 流式传输 mp4 文件，它适用于桌面上的某些浏览器，但 idevices 可以播放它。我四处搜索，很多解决方案都提到了范围标头，我尝试了[Martin-Brennan](https://stackoverflow.com/users/875941/martin-brennan)先生的[解决方案](https://stackoverflow.com/questions/12125275/net-mvc-streaming-mp4-to-idevice-issue)，但它仍然不适用于我:(，这是我的代码。对不起我的英语，谢谢！

对了，我想问一下视频的rewrite url，我的video url是`http://mydomain/video/test.mp4`可以重写的`http://mydomain/a23sdsf21ds/test.mp4`，我不能用扩展重写url

```
//First, accept Range headers.
context.Response.AddHeader("Accept-Ranges", "bytes");
context.Response.ContentType = "video/mp4";
//Then, read all of the bytes from the file you are requesting.
var file_info = new System.IO.FileInfo(context.Server.MapPath("~/media/test.mp4"));
var bytearr = File.ReadAllBytes(file_info.FullName);

//Then, you will need to check for a range header, and then serve up a 206 Partial Content status code in your response.
var startbyte = 0;
if (!string.IsNullOrEmpty(context.Request.Headers["Range"]))
{
            var cs = new Char[] { '=', '-' };
            //Get the actual byte range from the range header string, and set the starting byte.
            var range = context.Request.Headers["Range"].Split(cs);
            startbyte = (int)Convert.ToInt64(range[1]);

            //Set the status code of the response to 206 (Partial Content) and add a content range header.
            context.Response.StatusCode = 206;
            context.Response.AddHeader("Content-Range", String.Format(" bytes {0}-{1}/{2}", startbyte, bytearr.Length - 1, bytearr.Length));
        }
  //Finally, write the video file to the output stream, starting from the specified byte position.
  context.Response.OutputStream.Write(bytearr, startbyte, bytearr.Length - startbyte); 
```

# r - 如何在 Ubuntu Natty 11.04 机器上安装 RHadoop？

> ID：15755699
> 
> 赞同：0
> 
> 时间：2013-04-02T03:45:24.463
> 
> 标签：r, rhadoop

我需要在我的 ubuntu natty 11.04 机器上安装 RHadoop。我尝试执行这些命令“apt-get install r-base”，但我得到了未满足的依赖项

```
root@cldx-1063-961:/home/rhadoop/dependency# apt-get install r-base

Reading package lists... Done
Building dependency tree
Reading state information... Done
You might want to run 'apt-get -f install' to correct these:
The following packages have unmet dependencies:
 g++-4.5 : Depends: gcc-4.5-base (= 4.5.3-12ubuntu2) but 4.5.2-8ubuntu2 is to be installed
           Depends: gcc-4.5 (= 4.5.3-12ubuntu2) but 4.5.2-8ubuntu4 is to be installed
           Depends: libstdc++6-4.5-dev (= 4.5.3-12ubuntu2) but 4.5.2-8ubuntu4 is to be installed
           Depends: libgmp10 but it is not installable
           Depends: libmpfr4 (>= 3.1.0) but 3.0.0-7 is to be installed
 gcc-4.5 : Depends: gcc-4.5-base (= 4.5.2-8ubuntu4) but 4.5.2-8ubuntu2 is to be installed
           Depends: cpp-4.5 (= 4.5.2-8ubuntu4) but 4.5.2-8ubuntu2 is to be installed
 gfortran-4.2 : Depends: gcc-4.2 (= 4.2.4-1ubuntu3) but it is not installable
                Depends: libmpfr1ldbl but it is not installable
 libblas-dev : Depends: libblas3gf (= 1.2-1.3ubuntu3) but 1.2-7 is to be installed
 libbz2-dev : Depends: libbz2-1.0 (= 1.0.4-2ubuntu4.2) but 1.0.5-6ubuntu1 is to be installed
 libgcc1 : Depends: gcc-4.5-base (= 4.5.2-8ubuntu4) but 4.5.2-8ubuntu2 is to be installed
 libgfortran3 : Depends: gcc-4.5-base (= 4.5.1-7ubuntu2) but 4.5.2-8ubuntu2 is to be installed
 libgomp1 : Depends: gcc-4.5-base (= 4.5.2-8ubuntu4) but 4.5.2-8ubuntu2 is to be installed
 libstdc++6 : Depends: gcc-4.5-base (= 4.5.2-8ubuntu4) but 4.5.2-8ubuntu2 is to be installed
 libstdc++6-4.5-dev : Depends: gcc-4.5-base (= 4.5.2-8ubuntu4) but 4.5.2-8ubuntu2 is to be installed
                      Depends: g++-4.5 (= 4.5.2-8ubuntu4) but 4.5.3-12ubuntu2 is to be installed
 r-base : Depends: r-base-core (>= 2.15.2-1natty0) but 2.6.2-2 is to be installed
          Depends: r-recommended (= 2.15.2-1natty0) but 2.6.2-2 is to be installed
          Recommends: r-base-html but it is not going to be installed
          Recommends: r-doc-html but it is not going to be installed
 r-base-dev : Depends: libjpeg62-dev but it is not installable
              Depends: libncurses5-dev but it is not installable
              Depends: libpcre3-dev but it is not installable
              Depends: libpng12-dev but it is not installable
              Depends: libreadline5-dev but it is not installable
              Depends: zlib1g-dev but it is not installable
E: Unmet dependencies. Try 'apt-get -f install' with no packages (or specify a solution). 
```

请帮助我完成安装步骤。您的任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T12:14:02.193

最好将您的系统更新到 Ubuntu 12.04 (LTS)，然后尝试安装 r-base、最新的 R 版本、rhdfs、rmr 等。

更新到 12.04 后，尝试以下命令和包

```
sudo apt-get update
sudo apt-get build-dep r-base
sudo apt-get install r-base r-recommended r-base-dev 
```

通过阅读此处[链接 1](http://jugnu-life.blogspot.com/2013/03/install-rhadoop-on-hadoop-cluster.html) [链接 2](http://www.adaltas.com/blog/2012/05/19/hadoop-and-r-is-rhadoop/) [链接 3](http://nerdslearning.wordpress.com/2012/06/05/an-installation-guide-for-installing-rhadoop-on-mac-os-x-10-7-4-with-hadoop-1-0-1/) [链接 4的说明来安装 rmr 和 rhdfs](http://ashokharnal.wordpress.com/2013/08/25/installing-r-rhadoop-and-rstudio-over-cloudera-hadoop-ecosystem/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T03:52:15.037

您可以尝试以 root 身份登录，然后为单独的包执行“R CMD INSTALL”。

# winjs - windows8 winJS中的linq2IndexedDB

> ID：15755705
> 
> 赞同：0
> 
> 时间：2013-04-02T03:46:15.953
> 
> 标签：winjs, linq2indexeddb

## windows8 winJS中的linq2IndexedDB

嗨，我正在开发一个 winJS 应用程序。我正在使用 linq2IndexedDB 将 IndexedDb 与 winJS 连接。我正在一个 javascript 页面中创建数据库。如何在其他页面中为 indexedDb 创建一个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:00:25.093

如果变量保存在任何页面中的任何函数之外，则它是全局的并且在所有页面中都可用。所以一种可能性是这样做。

```
var indexdbObj; // it will be available in all other pages
(function() {
   ....
   function xyz()
   {
       indexdbObj = new IndexDB();
   }
})(); 
```

其他推荐的使用`WinJS.Namespace.define()`方法。

```
var indexdb = new IndexDB();
WinJS.Namespace.define('Database', 
    {
        client: indexdb
    }); 
```

在包括其他页面在内的所有地方，`Database.client.methodOnIndexDB()`都可以用来调用 indexDB 对象上的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T05:42:05.997

就像你为其他人做的一样。var l2i = new window.linq2indexeddb(...);

这将允许您在同一个 indexeddb 中工作。linq2indexeddb 仅为您提供与数据库的连接。

问候

克里斯托夫

# javascript - 滑动 div 移动不顺畅

> ID：15755711
> 
> 赞同：0
> 
> 时间：2013-04-02T03:46:45.050
> 
> 标签：javascript

我有一个滑块，我试图通过使用鼠标移动来滑动，但它不会自然移动，它会分阶段跳跃，但我不知道为什么。

我在这里有一个 jsfiddle：http: [//jsfiddle.net/97Mnf/3/](http://jsfiddle.net/97Mnf/3/)你会看到滑块没有随着鼠标正确移动。

我的代码是：

```
window.onload = function(){
    document.getElementById('cursor').addEventListener("mousedown", mousePos, false);   
}

function mousePos(e){   
    var x = e.pageX;
    document.getElementById('cursor').addEventListener("mousemove", function(e){mousemoveCalc(e,x);}, false);
    document.getElementById('cursor').removeEventListener("mouseup", mousemoveCalc, false); //not working
    document.getElementById('cursor').removeEventListener("mouseout", mousemoveCalc, false); //not working
}   

function mousemoveCalc(e,x){    
    var difx = 0 + parseInt(x + e.pageX);

            if(difx > 270){
                 difx=270;
            }else if(difx<0){
                 difx=0;
            }

    document.getElementById('cursor').style.left = difx+'px';

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:53:44.630

尝试`var difx = e.pageX-x;`代替`x+e.pageX`. 此外，您可能希望将`mousemove`事件附加到文档本身，以便在拖动时不需要将鼠标保持在滑块上。最后，你的`mouseup`逻辑全错了。您需要添加一个事件侦听器，该事件侦听器在触发时会删除所有处理程序

# android-intent - 我已经使用 uri 方法作为意图，需要在新活动中创建一个后退按钮，请在 android 中编辑代码

> ID：15755712
> 
> 赞同：0
> 
> 时间：2013-04-02T03:46:52.283
> 
> 标签：android-intent

我的代码工作正常，但我的问题是我需要在开始活动中创建一个后退按钮，

```
 switch(view.getId()){

    case R.id.button2:

             Intent i = new Intent(Intent.ACTION_VIEW,Uri.parse("http://http://www.google.com/search?q=computer+science+engineering+books&tbm=bks&tbo=1&oq=computer+science+"));
            ***startActivity(i);*** 
        break;

    case R.id.button3:

         Intent j = new Intent(Intent.ACTION_VIEW,Uri.parse("http://http://www.google.com/search?q=electrical+and+electronics+engineering+books&tbm=bks&tbo=1&oq=electrical+and+electronics+engineering"));
            ***startActivity(j);***
        break; 
```

当新活动开始时，它会进入网页，我需要在该网页活动中创建一个后退按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:05:39.803

我认为这是不可能的，因为 webbrowser 是一个独立的应用程序，除了您自己的应用程序之外，您将无法在任何其他应用程序中更改或放置任何东西。我认为更好的 waw 是进行另一个活动并在该活动中放置一个 webview 并将您的后退按钮放在其中。当新活动加载时，使用所需的 url 加载您的 web 视图。这是我认为最好和最简单的方法。

# sql - Oracle - 查询两个日期之间的差异

> ID：15755714
> 
> 赞同：1
> 
> 时间：2013-04-02T03:47:01.180
> 
> 标签：sql, oracle

我正在尝试在 Oracle 中想出一种方法来计算日期之间的天数差异。

简而言之。我有两个数据字段“begins_at”和“ends_at”，这些字段的 DATA_TYPE 是“TIMESTAMP(6)”

例如。我有以下情况：

“begins_at”值为“26-MAR-13 02.50.00.000000000 PM”</p>

“ends_at”值为“30-MAR-13 09.25.00.000000000 PM”</p>

我正在尝试以天计算两个时间戳之间的差异。甲骨文有可能吗？

我尝试了以下语句，但抛出了一个错误：

```
Select TO_DATE(begins_at, 'YYYYMMDD HH:MI:SS AM') - TO_DATE(ends_at, 'YYYYMMDD   HH:MI:SS AM') day_diff

From dual 
```

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T08:11:40.043

正如我们匿名的马友所说，“抛出错误”没有帮助。但是，您很可能会收到 ORA-01830、“日期格式图片在转换整个输入字符串之前结束”或 ORA-1858、“在预期数字的位置发现非数字字符”或类似内容。

该[`to_date`函数](http://docs.oracle.com/cd/E11882_01/server.112/e17118/functions203.htm)接受一个`char`参数，因此当您将`timestamp`字段传递给它时，会发生隐式转换；你实际上是在做：

```
to_date(to_char(begins_at, 'DD-MON-RR'), 'YYYYMMDD HH:MI:SS AM') 
```

...仅使用您的默认 NLS 设置；我猜你的 NLS_DATE_FORMAT 在这个例子中设置为 'DD-MON-RR'；确切的值会影响你得到的错误。您`timestamp`作为字符串给出的格式与您为 指定的格式不匹配`to_date`。

您永远不应该依赖隐式转换，但您根本不需要在这里进行转换。`timestamp`值可以直接比较，结果[在文档](http://docs.oracle.com/cd/E11882_01/server.112/e17118/sql_elements001.htm#sthref168)中解释。只需从另一个值中减去一个值，就可以将答案作为[`interval`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/sql_elements001.htm#BABIHEID)数据类型：

```
select ends_at - begins_at from t42;

ENDS_AT-BEGINS_AT
---------------------------------------------------------------------------
+000000004 06:35:00.000000 
```

如果您只想要一整天的部分，您可以使用[`extract`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/functions059.htm)：

从 t42 中选择提取（从 ends_at 到开始时间的日期）；

```
EXTRACT(DAYFROMENDS_AT-BEGINS_AT)
---------------------------------
                                4 
```

您也可以将其`timestamp`视为`date`using [`cast`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/functions023.htm)：

```
select cast(ends_at as date) - cast(begins_at as date) from t42;

CAST(ENDS_ATASDATE)-CAST(BEGINS_ATASDATE)
-----------------------------------------
                               4.27430556 
```

我不确定你为什么要使用`timestamp`。Oracle[`date`类型包括一个时间部分](http://docs.oracle.com/cd/E11882_01/server.112/e17118/sql_elements001.htm#sthref151)，精确到一秒。由于您（当前）似乎没有使用时间戳的小数部分，因此坚持使用`date`可能会使您的操作更简单，但我想这取决于您以后打算如何处理这些字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:50:03.083

请参阅[http://docs.oracle.com/cd/E17952_01/refman-5.1-en/date-and-time-functions.html#function_datediff](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/date-and-time-functions.html#function_datediff)。它描述了`DATEDIFF`，它返回以天为单位的差异，仅处理日期值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T04:08:17.780

尝试这样的事情：

```
SELECT  TO_DATE('20120125 11:00:00 AM', 'YYYYMMDD HH:MI:SS AM')
     - TO_DATE('20120120 10:00:00 AM', 'YYYYMMDD HH:MI:SS AM') day_diff
FROM   dual 
```

你可以参考[这个](http://oracletuts.net/tutorials/how-to-calculate-difference-between-dates-in-oracle-sql/)。它真的会帮助你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T13:15:10.810

天，小时，分钟，秒的差异。示例 - 复制/粘贴以查看输出。用您的日期替换日期...：

```
SELECT start_date, end_date, time_diff,
       EXTRACT(DAY FROM time_diff) days,
       EXTRACT(HOUR FROM time_diff) hours,
       EXTRACT(MINUTE FROM time_diff) minutes,
       EXTRACT(SECOND FROM time_diff) seconds
  FROM
  (
   Select start_date, end_date, (end_date - start_date) time_diff
     From
     (
      Select CAST(to_date('01/01/2012 10:00:00 am', 'dd/mm/yyyy  hh:mi:ss am') AS TIMESTAMP) end_date
           , CAST(to_date('01/01/2012 07:00:00 am', 'dd/mm/yyyy  hh:mi:ss am') AS TIMESTAMP) start_date
       From dual
     )
   )
  / 
```

仅减去时间示例：

```
SELECT trunc(mydate / 3600) hr
     , trunc(mod(mydate, 3600) / 60) mnt
     , trunc(mod(mydate, 3600) / 60 /60) sec
  FROM 
  (
   SELECT (to_date('01/03/2012 10:00:00', 'mm/dd/yyyy  hh24:mi:ss') -
           to_date('01/01/2012 07:00:00', 'mm/dd/yyyy  hh24:mi:ss')) * 86400 mydate
     FROM dual
  )
 /

HR  MNT SEC
-------------
51  0   0 
```

# linux - ext4 卷根目录上的 fsync 是否会刷新所有子目录？

> ID：15755719
> 
> 赞同：1
> 
> 时间：2013-04-02T03:47:28.880
> 
> 标签：linux, filesystems, ext4

目录上的 fsync() 是否保证该目录和所有子目录也被刷新？

所以假设我有

```
 foo
   |- bar
   |- baz
   |  |--file 
```

如果我写 'file' 然后 fsync on foo 将保证刷新 'file' 的内容（以及 foo 和 baz 的元数据）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-11T15:12:50.853

目录上的 fsync() 将刷新该特定目录中的文件名。（例如：如果创建了新文件，则将刷新名称/节点）。不会影响文件的内容，您需要为此在特定文件上调用 fsync()。它不是递归的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:14:10.493

据我所知，`fsync()`在目录上根本不能保证做任何事情。Linux 手册页将其定义为所引用文件的刷新缓冲区缓存页；由于目录没有缓冲区缓存页面，它很可能会立即返回*。*

除非它简单地刷新整个卷，否则它几乎肯定不会刷新目录中包含的文件的缓冲区缓存页面——确定哪些文件递归地存储在引用的目录中可能是一项非常昂贵的操作（例如，在几分钟的范围内小时）如果`foo`指向一个大目录树。所以它不会那样做。

如果您想刷新文件而不专门引用它们，请使用`sync()`. 它会过于宽泛（通过刷新每个卷上每个文件的缓冲区缓存），但它会完成工作。手册解释：

> 根据标准规范（例如，POSIX.1-2001），sync() 会安排写入，但可能会在实际写入完成之前返回。但是，从 1.3.20 版开始，Linux 确实在等待。（这仍然不能保证数据的完整性：现代磁盘有很大的缓存。）

# wpf - 基于其他属性将图像源绑定到资源文件

> ID：15755720
> 
> 赞同：0
> 
> 时间：2013-04-02T03:47:35.520
> 
> 标签：wpf, binding, resources, ivalueconverter

我有一个`ListView`其`ItemsSource`绑定到一个集合。其中一列`ListView`是图像。此图像源必须设置为资源文件，并且资源由项目的属性确定。

转换器如何将图像源作为资源文件返回？

```
<ListView ItemsSource="{Binding Persons}">
    <ListView.View>
        <GridView>
            <GridView.Columns>
                <GridViewTemplateColumn Header="" Width="20" IsReadOnly ="True">
                    <GridViewTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Image Source="{Binding Path=Male}" />
                        </DataTemplate>
                    </GridViewTemplateColumn.CellTemplate>
                </GridViewTemplateColumn>
                <GridViewColumn Header="{Binding Resources.Name,
                                Source={StaticResource resourceHelper}}"
                                Width="SizeToCells"
                                DisplayMemberBinding="{Binding Path=Fullname}"/>
                <GridViewColumn Header="{Binding Resources.Address,
                                Source={StaticResource resourceHelper}}"
                                Width="SizeToCells"
                                DisplayMemberBinding="{Binding Path=Address}" />

            </GridView.Columns>
        </GridView>
    </ListView.View>
</ListView> 
```

因此，在上述情况下，如果是男性，则显示 icon1，否则显示 icon2。

# sql-server - 我使用 VBscript 从 SQL Server 中选择了数据

> ID：15755726
> 
> 赞同：0
> 
> 时间：2013-04-02T03:48:21.090
> 
> 标签：sql-server, vb.net, c#-4.0, vbscript

我正在尝试使用 vb 脚本从数据库中获取数据。我的代码如下：

```
<FORM action="" method="post">
        <!--#include file="open_conn.asp" -->
    <% 
        'Get id dynamique from id unsubcribe mail
        id = Request.QueryString("ID_unsub")
        'Selection phone number
        SQL = "SELECT  telephone FROM  KS_enfants WHERE IDenfant=1"
        Set Retel = Server.CreateObject("ADODB.RecordSet")
        Server.ScriptTimeout=120
        Retel.Open SQL,session("mycon"),1,1
        '======================= Read data and sent=================
        Do While NOT Retel.Eof
        tel = Retel("telephone") 

        Loop
    %>

                <table cellpadding="0" cellspacing="0" style="padding:0; background:#fff;">
                    <tr>
                       <td colspan="2" style="height:auto;">
                        <input type="text" name="txt_num"  id="txt_num" style="width:250px;" value="<%  tel %>" />
                        </td>
                     </tr>
                 </table> 
```

事实上，我收到了错误消息：

```
 Erreur d'exécution Microsoft VBScript erreur '800a000d'

Type incompatible: 'tel'

/Emailing/template_email/emailing-apprenant/righ-side-1.asp, ligne 90 
```

我不知道如何解决它。有人知道，请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:51:12.977

我认为而不是：

```
<%  tel %> 
```

你的意思是：

```
<%=tel %> 
```

或者

```
<% Response.Write(tel) %> 
```

# java - Java HTTP 请求未按预期工作

> ID：15755730
> 
> 赞同：0
> 
> 时间：2013-04-02T03:49:01.087
> 
> 标签：java

我的公司有一个 Java Web 应用程序，它通过 url 为我提供一些服务器状态数据。例如...

```
Server1 - Red
Server2 - Green
Server3 - Amber 
```

每次请求从 url 进入时，Web 应用程序都会将请求参数发送回 JSP，然后 JSP 循环访问请求参数并在页面上显示信息（非常标准）。

我需要访问相同的数据，但想将这些数据用于其他目的。我的绝妙想法是尝试创建一个 java 应用程序来向相同的 URL 发送一个 http 请求并尝试获取请求参数。

我已经这样做了，但它会将所有显示给用户的 HTML 返回给我。有没有一种方法可以以与 JSP 类似的方式仅获取请求参数？

我正在使用的代码位于[http://java.dzone.com/articles/how-send-http-post-request](http://java.dzone.com/articles/how-send-http-post-request)

与请求相同的jsp....

```
<tbody>
    <s:iterator value="healthCheckItems.entrySet()">
      <tr>
        <td align="center"><s:checkbox name="%{value.category}Checked" fieldValue="true"/></td>
        <td><a href="<s:url action="%{value.action}"/>"><s:text name="%{value.category}"/></a></td>
        <td align="center">
            <s:if test="%{value.status.toString() == 'GREEN'}">
                <img src="img/green.png" width="20px" />
            </s:if>
            <s:elseif test="%{value.status.toString() == 'AMBER'}">
                <img src="img/amber.png" width="20px" />
            </s:elseif>
            <s:elseif test="%{value.status.toString() == 'RED'}">
                <img src="img/red.png" width="20px" />
            </s:elseif>
        </td>
        <td align="center"><s:property value="value.displayLastCheckTime"/></td>
      </tr>
    </s:iterator> 
```

# c++ - c++参考参数函数

> ID：15755734
> 
> 赞同：-2
> 
> 时间：2013-04-02T03:49:20.613
> 
> 标签：c++, function, parameters, reference

我不知道为什么这个程序不会运行。getStockInfo 中的值应该存储在参考参数中。然后 displayStatus 接受它们作为参数。我知道它与 main 中的 getStockInfo 和 displayStatus 有关，当它们被定义时，我就是想不通

```
#include <iostream>
#include <iomanip>
using namespace std;

void getStockInfo(int &, int&, double&);
void displayStatus(int, int, double, double);

int main()
{
//Declare Variables
int orderedSpools;
int spoolsStock;
double specialCharges;
int spoolsOrdered;

int backOrder;
double subtotal,
       shipping,
       total;

cout << "Middletown Wholesale Copper Wire Company" << endl;

getStockInfo(spoolsOrdered, spoolsStock, specialCharges);

displayStatus(spoolsOrdered, spoolsStock, specialCharges);

  system("pause");
  return 0;
}

void getStockInfo(int &spoolsOrdered, int &spoolsStock, double &specialCharges)
{
char ship; 

cout << "How many spools would you like to order: ";
cin >> spoolsOrdered;

//Validate the spools ordered 
while(spoolsOrdered < 1)
{
    cout << "Spools ordered must be at least one" << endl;
    cin >> spoolsOrdered;
}

cout << "How many spools are in stock: ";
cin >> spoolsStock;

//Validate spools in stock
while(spoolsStock < 0)
{
    cout << "Spools in stock must be at least 0" << endl;
    cin >> spoolsStock;
}

cout << "Are there any special shipping charges? ";
cout << "Enter Y for yes or another letter for no: ";
cin >> ship;

//Validate special charges
if(ship == 'Y' || ship == 'y')
{
    cout << "Enter the special shipping charge: $";
    cin >> specialCharges;
}
else
{
    specialCharges = 10.00;
}
}

void displayStatus(int spoolsOrdered, int spoolsStock, double specialCharges,
                   double total)
{
double backOrder,
       subtotal,
       shipping,
       total;
int itemsReady;

cout << "Items ordered: " << spoolsOrdered << endl;
cout << "Items ready to ship: " << spoolsStock << endl;

if(spoolsOrdered > spoolsStock)
{
    backOrder = spoolsOrdered - spoolsStock;
    cout << "Items on backorder: " << backOrder << endl;
}

subtotal = itemsReady * 100;
cout << "Subtotal: " << subtotal << endl;

shipping = specialCharges;
cout << "Shipping: " << shipping << endl;

total = subtotal + shipping;
cout << "Total Due: " << total << endl;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:55:14.937

这是您声明的方式`displayStatus`：

```
void displayStatus(int, int, double, double); 
```

这是您的使用方法`displayStatus`：

```
displayStatus(spoolsOrdered, spoolsStock, specialCharges); 
```

***你看出区别了吗？***

*提示：*计算每一行的参数个数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:28:37.887

```
void displayStatus(int spoolsOrdered, int spoolsStock, double specialCharges,
                   double total)  //**<-- here: total as parameter**
{
double backOrder,
       subtotal,
       shipping,
       total;  //**<-- and here: total as local variable**
int itemsReady; 
```

在您上面的代码中，我发现您有冗余。我标记了它。您有两个同名变量*total*，一个是 displayStatus 函数的参数，另一个是 displayStatus 函数的局部变量。

当我逐行查看您的代码时，这个*总*变量没有在 main 函数中执行任何计算，也没有在 getStockInfo 函数中执行任何计算。*总*变量的唯一计算发生在 displayStatus 函数中。因此，我建议你最好在 displayStatus 函数的参数上*删除*变量*total*。它不会损害您的代码，因为您已经有了局部变量*total*。

**编辑**：主函数中不需要*总变量，因此，**删除*此变量。

# c++ - 未记录的 GCC C++11 扩展？在 lambda 捕获列表中捕获任意表达式

> ID：15755735
> 
> 赞同：13
> 
> 时间：2013-04-02T03:49:43.380
> 
> 标签：c++, gcc, c++11, lambda

奇怪的是，GCC 4.7.2 似乎对以下代码没有任何问题：

```
template<typename T>
T&& identity(T&& x1) {
    return std::forward<T>(x1);
}

int main(int, char**) {
    int x1 = 1;
    int &x2 = identity(x1);
    auto f = [&x1]() mutable {
        x1 = x1 + 1;
    };
    auto g1 = [y=x2+1]() {
        static_assert(std::is_same<decltype(y), const int>::value, "fail");
        std::cout << "g1: " << y << std::endl;
    };
    auto h1 = [y=identity(x1)+1]() {
        static_assert(std::is_same<decltype(y), const int>::value, "fail");
        std::cout << "h1: " << y << std::endl;
    };
    auto g2 = [&y=x2]() {
        static_assert(std::is_same<decltype(y), int&>::value, "fail");
        std::cout << "g2: " << y << std::endl;
    };
    auto h2 = [&y=identity(x1)]() {
        static_assert(std::is_same<decltype(y), int&>::value, "fail");
        std::cout << "h2: " << y << std::endl;
    };
    f(); g1(); h1(); g2(); h2();
    f(); g1(); h1(); g2(); h2();
    return 0;
} 
```

结果如下：

```
g1: 2
h1: 2
g2: 2
h2: 2
g1: 2
h1: 2
g2: 3
h2: 3 
```

我似乎找不到任何提及在 lambda 捕获列表中捕获任意表达式的内容，即使在 n3285（日期为 2012-10-02）中也是如此。此外，我似乎无法在任何地方找到任何关于此作为官方 GCC 扩展的文档。

这是一个未记录的 GCC 扩展（[作为结构成员的 la VLA](https://stackoverflow.com/questions/12058760/undocumented-gcc-extension-vla-in-struct)，一个提议/即将推出的 C++ 功能，GCC 已经提前并提前实现了，两者都不是，还是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-27T03:37:30.647

如评论中所述，该功能与最近的提案大体相似，但早在初始标准化之前就已实施。GCC 在标准开发过程中作为原型，最初反映了作者喜欢的任何想法，后来被完善。为了使标准保持相当简单，一些必须进行调整的想法正在作为提案重新引入。Lambda 有很大的发展空间。

目前，这只是另一个错误。它从未从原始实现中删除，因为尚未有人报告它。

* * *

**更新：**这现在是自 C++14 以来的标准功能。

# html - Sublime Text 2 换行缩进

> ID：15755737
> 
> 赞同：2
> 
> 时间：2013-04-02T03:50:20.553
> 
> 标签：html, editor, sublimetext2, text-editor

```
<div>
This line needs to be indented and closing div tag should be in a new line</div>

<div>
  This result is what I want
</div> 
```

在 Sublime Text 2 中，通过按 ctrl+shift+W 并按“enter”创建标签后，我希望结果如上所示。我必须安装插件还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T04:59:01.113

认为您正在尝试与此问题相同 - 按[Enter 以展开 HTML 中的单行标记时自动缩进新行](https://stackoverflow.com/questions/15750978/auto-indent-new-line-when-hitting-enter-to-expand-one-line-tag-in-html)。

下面是我的答案。

* * *

尝试在您的用户键绑定中添加以下内容。

```
{ "keys": ["enter"], "command": "insert_snippet", "args": {"contents": "\n\t$0\n"}, "context":
    [
        { "key": "setting.auto_indent", "operator": "equal", "operand": true },
        { "key": "selector", "operator": "equal", "operand": "meta.scope.between-tag-pair", "match_all": true },
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:34:10.253

试试这个键绑定：

```
{ "keys": ["ctrl+shift+w"], "command": "reindent" , "args": {"single_line": false}} 
```

参考：[使用 Sublime Text 2 格式化 HTML 代码](https://stackoverflow.com/a/10888837/462627)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T06:09:44.187

[如果您安装Tag 插件](https://github.com/SublimeText/Tag)，我认为这是一个更通用的解决方案。正如[Dardub 在他的回答](https://stackoverflow.com/a/8858512/1392882)中所说，标签插件也可以通过[包控制](http://wbond.net/sublime_packages/package_control)获得。

如果您选择 Tag 插件，最简单的使用方法是突出显示要缩进的文本，然后按快捷键`Ctrl`+ `Shift`+ `F`。

如果您坚持您的`Enter`工作流程，只需将此行添加到您的键绑定中：

```
{ "keys": ["enter"], "command": "tag_indent_document" } 
```

但**要小心**，因为它**取代了** `Enter` **默认行为**。

避免文本突出显示需要的更保守的方法是使用更具体的绑定：

```
{ "keys": ["super+shift+f"], "command": "tag_indent_document" } 
```

现在要缩进所有 HTML/XML，只需按快捷键`Super`++ 。`Shift``F`

### 参考：

*   [StackOverflow - 使用 Sublime Text 2 格式化 HTML 代码](https://stackoverflow.com/questions/8839753/formatting-html-code-using-sublime-text-2)
*   [GitHub - 标签菜单文件](https://github.com/SublimeText/Tag/blob/master/Main.sublime-menu)

# c++ - c++中指针列表中的最后一个元素

> ID：15755738
> 
> 赞同：3
> 
> 时间：2013-04-02T03:50:24.633
> 
> 标签：c++, list, pointers, stl

这是一段简单的代码，它给了我错误的输出，但我不知道为什么。

```
#include <iostream>
#include <list>
using namespace std;

void main(){
    list<int*> l;
    int x = 7;
    int* y = &x;
              //it works if I put    list<int*> l;   on this line instead.
    l.push_back(y);
    cout << **l.end() << endl;   // not 7
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T03:58:28.847

`.end()`返回一个迭代器，该迭代器引用列表容器中的最后一个元素。最后一个元素是列表容器中最后一个元素之后的理论元素。它不指向任何元素，因此不应被取消引用。

使用`front`或`back`成员函数

```
cout << *l.front() << endl;   
cout << *l.back() << endl; 
```

[检查此链接](http://www.cplusplus.com/reference/list/list/)

# javascript - 单击后退按钮时将用户定向到 URL

> ID：15755743
> 
> 赞同：0
> 
> 时间：2013-04-02T03:51:00.017
> 
> 标签：javascript, onbeforeunload

我在我的 android 应用程序中使用了一个移动 webview，并希望这样做，以便当用户单击后退按钮时，它们会自动返回主屏幕。

我知道当用户点击返回时，我可以使用 onbeforeunload 方法来执行一个功能。

下面的代码似乎无法正常工作：

```
<script>
window.onbeforeunload = function () {
    window.location("http://www.google.com");
}
</script> 
```

奇怪的是，如果我替换`window.location(http://www.google.com");`为`alert("You clicked back");`then 它工作得很好。

有谁知道为什么这不起作用？浏览器是否阻止我将用户定向到另一个 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:53:52.410

我想你正在寻找`location.href="http://www.google.com";`.

但是，根据您的应用程序，您最好使用[pushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)更改当前应用程序的状态并对 popState 事件执行某些操作。

# sql - 需要帮助修改我的 SQL 查询

> ID：15755744
> 
> 赞同：0
> 
> 时间：2013-04-02T03:51:02.933
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我想修改下面给出的现有 SQL 查询（编号 1）。首先，我需要知道是否可以做我想做的事情（第 2 点）。如果是，那么我可以通过哪些方式做到这一点。

```
--**(Number 1)** What I currently have      

SELECT  Column1
    FROM  dbo.Table1
    WHERE ColumnValue1 = 'One'
    AND scalarFunctionResult(Var) = 'Word1'
    AND ColumnValue2 = "Word2"

--*(Number 2)* What I need      
SELECT  Column1
    FROM  dbo.Table1
    WHERE ColumnValue1 = 'One'
    AND SomeVariable IN (scalarFunctionResult(Var) = 'Word1', 'WordA')
-- Perform a query based 
--on value of SomeVariable, Please read pseudo code below 
    AND ColumnValue2 = "Word2"

--Pseudo code for logic
--if(SomeVariable = 'Word1') then run query ABCD,
--else if(SomeVariable = 'WordA') then run some other query EFGH 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:01:46.510

这是一个简单的`OR`

```
SELECT Column1
  FROM dbo.Table1
 WHERE ColumnValue1 = 'One'
   AND ((@SomeVariable = 'Word1' AND <the condition ABCD>)
        OR
        (@SomeVariable = 'WordA' AND <the condition EFGH>)) 
```

实际上，您可以从 ABCD when`@Somevariable = 'Word1'`或从其他条件“查询”EFGH when获得结果`@Somevariable = 'WordA'`。

例如

```
SELECT Column1
  FROM dbo.Table1
 WHERE ColumnValue1 = 'One'
   AND ((dbo.scalarFunctionResult(@SomeVariable) = 'Word1' AND ColumnValue2 = "Word2")
        OR
        (dbo.scalarFunctionResult(@SomeVariable) = 'WordA' AND ColumnValue3 = "Word3")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:33:44.937

您是否想弄清楚如何在 SQL 中创建 IF 语句？不确定我是否正确理解了您的问题。

如果是这样，这里是[MSDN](http://msdn.microsoft.com/en-us/library/aa933214%28v=sql.80%29.aspx)的参考。正如 RichardTheKiwi 所展示的那样，在这种情况下你可能不需要它。

# php - PHP Regex - 从字符串中删除无效字符

> ID：15755748
> 
> 赞同：1
> 
> 时间：2013-04-02T03:51:37.430
> 
> 标签：php, regex, preg-replace

我知道有很多正则表达式问题，但我不太了解，也找不到足够好的答案来解释我想要得到的解决方案。

在 PHP 中，使用

```
preg_replace($pattern,"",$data); 
```

我想允许所有字母数字字符以及减号、句点和下划线字符。我需要的 $pattern 是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T03:54:24.343

```
$pattern = "/[^\w.-]/"; 
```

这是您所描述的要求的否定字符类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-22T12:26:46.510

试试这个，我知道这不是正则表达式......

*$answer* =iconv("UTF-8", "ISO-8859-1//IGNORE", *$data* );

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-25T17:55:28.993

也许这可以尝试：

```
$cleaner_input = trim(strip_tags($text)); 
```

# javascript - 在 UIWebView 上使用 Javascript 来获取所有特定的 div 类

> ID：15755753
> 
> 赞同：0
> 
> 时间：2013-04-02T03:51:58.813
> 
> 标签：javascript, ios, objective-c

我正在尝试将完成的 UIWebView 的所有名为“thumb”的 div 类的结果放入一个字符串中，但我不知道为什么 NSLog 只显示第一个 div 类 thumb（应该是 37 个不同的“thumb”实例)

我感谢您的帮助。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSURLCache sharedURLCache] removeAllCachedResponses];

    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.thewebsite.com"]]];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{   
    if (!webView.isLoading)
    {
        NSString *test = @"function f()"
        "{"
            "var theThumbs = document.getElementsByClassName('thumb');"
            "for(var i=0; i < theThumbs.length; i++)"
            "{"
                "return(theThumbs[i].innerHTML);"
            "}"
        "}f()";

        NSString *input = [self.webView stringByEvaluatingJavaScriptFromString:test];

        NSLog(@"String is: %@", input);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:48:09.117

你打电话时

```
 'return(theThumbs[i].innerHTML);' 
```

您在第一次迭代时从函数返回。它不会每次都循环通过循环。您需要创建一个变量来保存这些值。

```
 "var theThumbs = document.getElementsByClassName('thumb');"
 "var someString = '';"
        "for(var i=0; i < theThumbs.length; i++)"
        "{"
            "someString +=(theThumbs[i].innerHTML);"
        "}"
"return someString;" 
```

# c# - 使用 ASP.Net AJAX UpdatePanel 时如何禁用加载掩码？

> ID：15755756
> 
> 赞同：1
> 
> 时间：2013-04-02T03:52:05.747
> 
> 标签：c#, asp.net, ajax

当我使用 updatePanel 向服务器发送 ajax 请求时，我很困惑如何禁用加载掩码。

这是我的代码：

```
<asp:UpdatePanel runat="server" ID="UpdatePanel1"  UpdateMode="Conditional">
   <ContentTemplate>
      <asp:Panel runat="server" ID="Panel1" />
      <asp:Timer ID="Timer1" runat="server" Interval="20000" OnTick="Timer1_Tick" >
   <ContentTemplate>
</asp:UpdatePanel>

protected void Timer1_Tick(object sender, EventArgs e)
{
    // do something
    UpdatePanel1.Update();
} 
```

# c++ - C++ 计算字符串中的数字

> ID：15755757
> 
> 赞同：0
> 
> 时间：2013-04-02T03:52:08.257
> 
> 标签：c++, algorithm

给定一个字符串，例如“121”，我试图计算 1 和 2 的数量，然后返回字符串“2112”（因为有 2 个 1 和 1 个 2）。我不确定问题出在我的代码中，但我得到了荒谬的结果，如果有人能指出哪里出了问题，那就太好了。到目前为止，这是我的代码：

现在可以用了，非常感谢。

```
string operate(string s) 
{  
    string input = "121; 
    int count[10] = {0}; 
    string answer; 

    for(int n = 0; n < input.length(); n++) 
    {              
        int a = (input[n]-'0');        
        count[a]++;
    }      

    for(int n = 1; n < 10; n++) 
    { 
        if(count[n] > 0)   
        {  
            stringstream ss;
            ss << count[n] << n;
            answer.append(ss.str());  
        }          
    }         
    return answer;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:13:02.657

你这里有三个问题。首先，您没有在使用内存之前对其进行初始化。这样做很简单：

```
int count[10]{}; //all 0 
```

由于您的编译器支持而失败，这样的事情将起作用：

```
int count[10] = {0}; 
```

接下来，您将越界访问您的数组：

```
int a = input[n];         
count[a]++; 
```

首先，将字符串中该字符的数值分配给`a`. 如果 ASCII 正在使用并且字符是`'1'`，那将是 49。接下来，您访问`a`数组的元素。你这里只有 10 个，但你可能已经访问过了。由于数字字符代码是连续的，只需减去`0`即可以整数形式获得您要查找的数字值：

```
int a = input[n] - '0';
count[a]++; 
```

以 为例`'1'`，contiguous 表示`'1'`一个过去`'0'`，`'1' - '0'`1 也是。

最后，稍后您将忽略数组的第一个元素。让你的第二个循环从 0 开始索引，而不是 1。

* * *

顺便说一句，我可以建议使用字典（为了好玩而使用一些 C++11）吗？

```
std::string input = "12113412"; 
std::map<char, int> count; //map characters to counts

for (char c : input) //loop through each character in string
    count[c]++; //this creates the element if it isn't

std::string result;

for (auto p : count) { //each value in map is a pair
   result += std::to_string(p.second) += p.first;
}

std::cout << result; 
```

输出：

> 41221314

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T04:15:09.740

您的代码存在多个问题。

首先，这个：

```
int count[10]; 
```

..不会初始化值。它们将是随机内存地址。你要这个：

```
int count[10] = { 0 }; 
```

..这使得数组中的所有项目初始化为 0。

此外，您只在数组中声明了 10 个项目，但是：

```
int a = input[n]; 
```

..在“121”示例中的变量`a`中存储“49”（1 == 49 ASCII）。然后你这样做：

```
count[49]++; // Wrong.. there is no element 49 
```

您似乎将数组用作某种`Dictionary`，但事实并非如此。

只需将其更改为：

```
int a = input[n] - 48;
count[a]++; 
```

..作品。这是完整的输出：

```
std::string operate(std::string s) 
{   
    int count[10] = { 0 }; 
    string answer; 

    for(int n = 0; n < s.length(); n++) 
    {              
        int a = s[n] - 48;
        count[a]++;
    }      

    for(int n = 0; n < 10; n++) 
    { 
        if(count[n] > 0)   
        {  
            stringstream ss;
            ss << count[n] << n;
            answer.append(ss.str());  
        }          
    }         
    return answer;
} 
```

..这将返回`2112`输入“121”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T03:59:32.413

您分配给“a”的行应如下所示：

```
int a=todigit(input[n]); 
```

您当前正在做的是分配 ASCII 值，这将导致缓冲区溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T03:59:06.033

int a = 输入[n]？

input[n] 是一个char，a会得到对应字符的ascii码。对于您的示例， input[0] 返回 49，这是 char“1”的 ascii 值。使用 atoi 将 char 转换为 int 将完成这项工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T04:06:23.830

你应该初始化计数[10]。

```
memset(&count, 0, sizeof(count)); 
```

# java - 扫描仪输入存储和使用

> ID：15755760
> 
> 赞同：0
> 
> 时间：2013-04-02T01:58:49.010
> 
> 标签：java

既然我的第二门 Java 课程已经完成，我就一直在自己尝试。回到开始并记住如何使用过去几个月学到的所有东西是很困难的，所以我正在尝试制作一个程序来询问用户他们想要绘制什么形状（基于用for 循环，这基本上是我在编程中学到的第一件事），以及形状的大小为 int。

我已经设置了扫描仪，但我不记得大小变量必须如何/在哪里才能在我的“绘图”方法中使用它。基本上，我尝试过不同的东西，但“大小”总是遥不可及。到目前为止，这是我的代码（我已经排除了实际绘制形状的代码，但它们都涉及以 int 大小作为变量的 for 循环）：

```
public class Practice {

 public static void main(String[] args) {

     Scanner input = new Scanner(System.in);

     System.out.println("Choose a shape!");

     String shape = input.nextLine();

     System.out.println("Choose a size!");

     int size = input.nextInt();

 }

     public static void drawCirlce() {

        //Code to draw a circle of size given input into scanner.  
     }

     public static void drawSquare() {

         //Code to draw a square of size given input into scanner.
     }

     public static void drawTriangle() {

        //Code to draw a triangle of size given input into scanner.
     }

     public static void drawRocket() {

        //Code to draw a rocket of size given input into scanner.
     }

} 
```

非常感谢大家！我会继续环顾四周，但非常欢迎任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:00:39.397

您可以将 size 变量传递给绘图方法，如下所示：

```
public class Practice {
 public static void main(String[] args) {
     Scanner input = new Scanner(System.in);
     System.out.println("Choose a shape!");
     String shape = input.nextLine();
     System.out.println("Choose a size!");
     int size = input.nextInt();

     // Choose what shape you want to draw
     drawCircle(size);
     // or
     drawSquare(size);
     // or
     drawTriangle(size);
     // etc...
 }

     public static void drawCirlce(int size) {
        //Code to draw a circle of size given input into scanner.  
     }
     public static void drawSquare(int size) {
         //Code to draw a square of size given input into scanner.
     }
     public static void drawTriangle(int size) {
        //Code to draw a triangle of size given input into scanner.
     }
     public static void drawRocket(int size) {
        //Code to draw a rocket of size given input into scanner.
     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T03:57:15.320

您需要在类级别声明变量。此外，因为您使用所有方法，所以这些变量也`static`需要声明`static`

```
public class Practice {

    private static String shape;
    private static int size;

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        System.out.println("Choose a shape!");
        shape = input.nextLine();
        System.out.println("Choose a size!");
        size = input.nextInt();
    } 
```

# iphone - NSdate（时区）中的问题日期时间显示过去 5 小时 30 分钟

> ID：15755765
> 
> 赞同：0
> 
> 时间：2013-04-02T03:53:33.367
> 
> 标签：iphone, objective-c, nsdate, nsdateformatter, nsdatecomponents

实际上在我的模拟器中，时间显示过去 5 小时 30 分钟

我目前在印度的时间是 2013-04-02 **09:10:__ AM**但输出是 2013-04-02 **03:54:51** +0000

2013 年 - 4 月 - 2 日：上午 9:10

我需要在两个日期之间得到一些结果 1.First Date of Month 到 2.Current Date of any day

即从 4 月 1 日到 4 月 2 日 9.10 AM t0 当前时间 2013-04-02 **09:10:__ AM**

但它显示

每月第一天的日期为**2013-03-31 18:30:00** +0000

当前时间为 2013-04-02 **03:54:51** +0000 **但实际时间为 09:10:__ AM**

我计算本月的第一个日期如下

```
// TO IMPLEMENT CODE for FIRST DAY OF the Month
      NSCalendar* calendar = [NSCalendar currentCalendar];
      NSDateComponents* comps = [calendar components:NSYearForWeekOfYearCalendarUnit |NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:[NSDate date]];

 calendar.timeZone = [NSTimeZone systemTimeZone];

      [comps setWeekday:1]; // 1: sunday
      monthComponent = comps.month;
      yearComponent = comps.year;
      dateFormatter = [[NSDateFormatter alloc] init];
      [dateFormatter setDateFormat:@"yyyy MM dd"];

 dateFormatter.timeZone = [NSTimeZone systemTimeZone];

      // To get the firstDateOfMonth for This MONTH.
      NSDate *firstDateOfMonth = [dateFormatter dateFromString:[NSString stringWithFormat:@"%d %d 01",yearComponent,monthComponent]];

      NSLog(@"firstDateOfMonth-- %@ \r\n",firstDateOfMonth);
       NSLog(@"[NSDate date]-- %@",[NSDate date]); 
```

我设置时区 SystemTimeZone 甚至认为***`i got wrong results for Current date and firstDateOfMonth`***

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:36:43.527

试试看....

```
NSDate* date = [NSDate date];
NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
NSTimeZone *destinationTimeZone = [NSTimeZone systemTimeZone];
formatter.timeZone = destinationTimeZone;
[formatter setDateStyle:NSDateFormatterLongStyle];
[formatter setDateFormat:@"MM/dd/yyyy hh:mma"];
NSString* dateString = [formatter stringFromDate:date]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T16:39:29.007

正如 Sunny 所说，问题在于时区，以及对 NSDate 实际含义的误解。

NSDate 表示在世界各地都相同的时间点。如果我们同时调用 [NSDate date] ，我们会得到相同的结果，并且 NSLog 以相同的方式打印它。但是，如果我们都看我们的手表，我们会看到显示的时间不同。

你在印度。如果您正好在午夜看表，它显示的是中午 12 点。如果伦敦的一个人在完全相同的时间看他们的手表，那个人就会看到下午 6:30。他们的手表总是比你的晚 5 1/2 小时。这就是 NSLog 显示的内容。

例如，您正确计算了印度月初的 NSDate。这个月初是 4 月 1 日，在一天开始的午夜——在印度时间。但此时此刻，仍是伦敦的 3 月 31 日，18:30。这就是 NSDate 显示的内容。你总是得到正确的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:25:10.510

问题时区。默认情况下， NSDateFormatter 设置为您的本地时区。这意味着，如果您的时区是 +5:30，则给它一个日期“1970/18/3”会导致 1970-03-18 00:00:00 +0530。但是，NSLog 总是以 GMT（零）时区打印日期，加上/减去时区差异（5 小时 30 分钟）。

```
 NSCalendar* calendar = [NSCalendar currentCalendar];
    NSDateComponents* comps = [calendar components:NSYearForWeekOfYearCalendarUnit |NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:[NSDate date]];

    [comps setWeekday:1]; 
    int monthComponent = comps.month;
   int yearComponent = comps.year;
   NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy MM dd"];

    NSDate *firstDateOfMonth = [dateFormatter dateFromString:[NSString stringWithFormat:@"%d %d 01",yearComponent,monthComponent]];
    firstDateOfMonth = [firstDateOfMonth dateByAddingTimeInterval:19800];
    NSLog(@"firstDateOfMonth-- %@ \r\n",firstDateOfMonth);
    NSLog(@"[NSDate date]-- %@",[[NSDate date] dateByAddingTimeInterval:19800]); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T03:58:43.303

@IOS 开发者，

可能是时区问题。检查您的模拟器设置。使用以下链接：

[xcode 4.2 位置模拟器和时区](https://stackoverflow.com/questions/8957642/xcode-4-2-location-simulator-and-time-zone) 还要检查 `[NSTimeZone localTimeZone]`.

见以下链接：

[NSTimeZone：localTimeZone 和 systemTimeZone 有什么区别？](https://stackoverflow.com/questions/1526990/nstimezone-what-is-the-difference-between-localtimezone-and-systemtimezone)

# javascript - 更改选择框中所选选项的文本颜色

> ID：15755770
> 
> 赞同：33
> 
> 时间：2013-04-02T03:53:50.650
> 
> 标签：javascript, html, css, drop-down-menu, colors

我有一个选择框。这些选项已通过引用的 CSS 文件以不同的颜色设置样式。我希望能够选择一个选项并将关闭的选择框的文本颜色更改为所选选项的颜色。

```
<select id="mySelect" class="yellowText">
    <option class="greenText" value="apple" >Apple</option>
    <option class="redText" value="banana" >Banana</option>
    <option class="blueText" value="grape" >Grape</option>
</select> 
```

所以如果我选择香蕉，文本应该从黄色变为红色。

我试过了：

```
onchange="this.style.color = this.options[this.selectedIndex].style.color;" 
```

但这只有在我在 html 文档中的选项标签中定义我的样式时才有效。

我也尝试过 JavaScript：

```
function setSelectColor(thisElement){
    var thisElem = document.getElementById(thisElement);
    var thisOption = thisElem.options[thisElem.selectedIndex];
    var newColor = getStyle(thisOption,"color");
    alert("New Color: "+ newColor);
} 
```

但这总是返回颜色：白色。getStyle 函数在我使用它的其他任何地方都有效，所以我不认为这是问题所在。

我从这个网站得到了 getStyle：

```
function getStyle(oElm, strCssRule){
    var strValue = "";
    if(document.defaultView && document.defaultView.getComputedStyle){
        strValue = document.defaultView.getComputedStyle(oElm, "").getPropertyValue(strCssRule);
    }
    else if(oElm.currentStyle){
        strCssRule = strCssRule.replace(/\-(\w)/g, function (strMatch, p1){
            return p1.toUpperCase();
        });
        strValue = oElm.currentStyle[strCssRule];
    }
    return strValue;
} 
```

如何用 JavaScript 解决这个问题？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-02T04:05:52.383

试试这个：

```
.greenText{ background-color:green; }

.blueText{ background-color:blue; }

.redText{ background-color:red; }
```

```
<select
    onchange="this.className=this.options[this.selectedIndex].className"
    class="greenText">
     <option class="greenText" value="apple" >Apple</option>
    <option class="redText"   value="banana" >Banana</option>
    <option class="blueText" value="grape" >Grape</option>
</select>
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-09-26T13:29:06.197

**一种颜色的外壳**- 仅 CSS

只是为了记录我的经验，我只想将所选选项的颜色设置**为****特定**选项。

我首先尝试通过 css 仅设置所选选项的颜色，但没有成功。

然后，在尝试了一些组合之后，这对我来说适用于 SCSS：

```
select {
      color: white; // color of the selected option

      option {
        color: black; // color of all the other options
      }
 } 
```

看一个只有 CSS 的工作示例：

```
select {
  color: yellow; // color of the selected option
 }

select option {
  color: black; // color of all the other options
}
```

```
<select id="mySelect">
    <option value="apple" >Apple</option>
    <option value="banana" >Banana</option>
    <option value="grape" >Grape</option>
</select>
```

对于不同的颜色，根据选择的选项，你将不得不处理 js。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-02T04:06:49.647

你可以这样做。

[jsFiddle](http://jsfiddle.net/YBr8S/2/)

**JS**

```
var select = document.getElementById('mySelect');
select.onchange = function () {
    select.className = this.options[this.selectedIndex].className;
} 
```

**CSS**

```
.redText {
    background-color:#F00;
}
.greenText {
    background-color:#0F0;
}
.blueText {
    background-color:#00F;
} 
```

`option { background-color: #FFF; }`如果您希望列表为白色，则可以使用。

**HTML**

```
<select id="mySelect" class="greenText">
    <option class="greenText" value="apple" >Apple</option>
    <option class="redText"   value="banana" >Banana</option>
    <option class="blueText" value="grape" >Grape</option>
</select> 
```

由于这是一个，如果这是你得到的结果，那么`select`使用`.yellowText`as none selected 是没有意义的，因为必须选择某些东西。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-02T04:24:35.197

jQuery代码：

```
$('#mySelect').change(function () {
    $('#mySelect').css("background", $("select option:selected").css("background-color"));
}); 
```

这会将`select`'s替换为`background-color`选定`option`的 's `background-color`。

[这是一个示例小提琴。](http://jsfiddle.net/MarmeeK/9F7Cj/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-04T12:02:56.913

```
CSS
select{
  color:red;
 }

HTML
<select id="sel" onclick="document.getElementById('sel').style.color='green';">
 <option>Select Your Option</option>
 <option value="">INDIA</option>
 <option value="">USA</option>
</select> 
```

上面的代码将在单击选择框时更改文本的颜色。

如果您想要每个选项不同的颜色，请为所有选项提供单独的类或 id。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-27T16:22:03.290

```
<html>
  <style>
.selectBox{
 color:White;
}
.optionBox{
  color:black;
}

</style>
<body>
<select class = "selectBox">
  <option class = "optionBox">One</option>
  <option class = "optionBox">Two</option>
  <option class = "optionBox">Three</option>
</select> 
```

# wpf - XamGrid 不允许选择空文本

> ID：15755772
> 
> 赞同：0
> 
> 时间：2013-04-02T03:53:54.007
> 
> 标签：wpf, wpf-controls, infragistics, wpf-4.0, xamgrid

我正在使用 Infrgistics XamGrid [InfragisticsWPF4.Controls.Grids.XamGrid.v12.1.dll (12.1.20121.1010)]。我有一种情况，用户无法过滤以仅选择空文本。过滤器在选择非空文本的情况下工作正常，但包括空文本在内的任何组合都会排除空行。例如，在下面提供的示例中，如果用户尝试选择“PTL_D_IMA”和空文本，过滤器的结果结果是只有一行具有“PTL_D_IMA”，而其他两行空文本不会出现。

```
<ig:XamGrid x:Name="myGrid" ItemsSource="{Binding Source={StaticResource TestDataItems}}">
 <ig:XamGrid.FilteringSettings>
 <ig:FilteringSettings AllowFiltering="FilterMenu"FilteringScope="ColumnLayout" />
 </ig:XamGrid.FilteringSettings>
 </ig:XamGrid>

 public class TestDataItems  
{ 
private string name; 
public string Name 
{
 get { return name; }  
 set { name = value; } 
} 
}

public class TestData : ObservableCollection<TestDataItems> 
{ 
 public TestData() 
 { 
  Add(new TestDataItems { Name = "PTL_D_IMA"}); 
  Add(new TestDataItems { Name = "PTL_D_PCHCYL"}); 
  Add(new TestDataItems { Name = "PTL_D_ICN"}); 
  Add(new TestDataItems { Name = "PTL_D_PRFI"}); 
  Add(new TestDataItems { Name = "PTL_D_IPH"}); 
  Add(new TestDataItems { Name = ""}); 
  Add(newTestDataItems { Name = string.Empty }); 
  Add(newTestDataItems { Name = "PTL_D_PTCYL"}); 
  Add(new TestDataItems { Name = "PCGM"}); 
  Add(new TestDataItems { Name = "COD_SUS"}); 
 } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:21:58.687

这已在 NetAdvantage for WPF 的服务版本中得到解决。只要您注册了产品密钥，就可以从“[我的密钥和下载](https://www.infragistics.com/my-account/keys-and-downloads/)”页面下载服务版本。如果您正在使用试用版并想要获取服务版本，您可以通过运行平台安装程序来安装它，并确保选中检查更新或安装服务版本的选项。

# c - 比较WCHAR字符串和C中的Const Char？

> ID：15755773
> 
> 赞同：1
> 
> 时间：2013-04-02T03:53:55.973
> 
> 标签：c, wchar

我用 C 编写了一个代码，它将使用 Process32First() API 来获取有关该进程的信息。所有信息都存储在此处定义的 PROCESSENTRY32 结构中：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms684839%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684839%28v=vs.85%29.aspx)

pe32 是 PROCESSENTRY32 结构的名称。进程名称将是：pe32.szExeFile

我可以这样打印：

```
_tprintf(TEXT("Process name: %s\n"),pe32.szExeFile); 
```

现在，我想将进程名称与 explorer.exe 等特定进程进行比较

这就是我正在做的事情：

```
if(!wcscmp(pe32.szExeFile, _T("explorer.exe"))
{
 perform some action here;
} 
```

这没用。

在 MS Visual Studio 2008 中，PROCESSENTRY32 结构的 szExeFile 成员的数据类型为：WCHAR tagPROCESSENTRY32::szExeFile[260]

所以，我认为它是一个宽字符串？

explorer.exe 是一个普通的字符串（const char *），指向一个字符数组的指针。

如何将 szExeFile 与普通字符串进行比较？

我发现这些数据类型很混乱，我希望通过这个例子更好地理解它们。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T04:13:07.730

更改您的 if 以使用宽字符串`"explorer.exe"`作为 as

```
if(!wcscmp(pe32.szExeFile, L"explorer.exe") 
```

即用于`L"explorer.exe"`与宽字符串进行比较。

您还可以通过*Project->Settings->Configuration Properties->General*在您的 VC 项目中设置使用 UNICODE 字符集。

# html - 如何将 HTML 代码作为字符串放入 HTML 页面？

> ID：15755776
> 
> 赞同：3
> 
> 时间：2013-04-02T03:54:18.683
> 
> 标签：html

我正在发送 HTML 新闻信件并在运行时编写它们。我需要将 HTML 代码作为字符串放入 HTML 新闻信中。由于我需要作为字符串放置的 HTML 代码也是它在浏览器中执行的 html，但我不想要这个，我想显示该代码本身。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T03:55:10.793

将 HTML 包裹在`<code>`or`<pre>`标记中

并确保首先在代码上使用[HTML 实体编码器](http://htmlentities.net/)`<`，以便它能够`>`正确显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:01:49.230

您需要对`<`and`>`以及其他 html 特殊字符进行编码。许多语言都有执行此操作的库，例如 php's`htmlspecialchars`和 ruby​​'s `h()`，但您似乎只是在编写 HTML。

```
<pre class="htmlcode">&lt;html&gt;</pre> 
```

上面会显示`<html>`.

# java - 方法 onHandleIntent() 没有被调用

> ID：15755785
> 
> 赞同：6
> 
> 时间：2013-04-02T03:55:24.590
> 
> 标签：java, android, android-service, intentservice

经过数小时的研究，我终于咨询了官方帮助。为什么不`onHandleIntent()`被调用？这里有什么问题吗？

在主要活动中`onCreate()`：

```
mService = new Intent(context, xyz.class);
startService(mService); 
```

就是这样。被`onStartCommand()`调用，但没有`onHandleIntent()`

```
package com.autoalbumwallaperplus;

import android.app.IntentService;
import android.content.Intent;
import android.widget.Toast;

public class xyz extends IntentService {
    public xyz() {
        super("bmp");
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(this,"onStartCommand works!", Toast.LENGTH_SHORT).show();
        return super.onStartCommand(intent,flags,startId);
    }

    @Override
    protected void onHandleIntent(Intent workIntent) {
        Toast.makeText(this,"onHandleIntent works!", Toast.LENGTH_SHORT).show();
    }
} 
```

这是在 OnHandleIntent 里面

```
 String imagepath = workIntent.getStringExtra("String");
    Toast.makeText(this, "it works" , Toast.LENGTH_SHORT).show();
    DisplayMetrics displayMetrics = new DisplayMetrics();
    WindowManager hi = ((WindowManager) getBaseContext().getSystemService(Context.WINDOW_SERVICE));
    int height = displayMetrics.heightPixels;
    int width = displayMetrics.widthPixels << 2;

    // ... First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    Bitmap decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);

    // ... Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, width, height);

    // ... Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);

    // ... Set Wallpaper
    //Context context = getApplicationContext();
    WallpaperManager wm = WallpaperManager.getInstance(this);

    try {
        wm.setBitmap(decodedSampleBitmap);
    } catch (IOException e) {
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T04:16:26.517

可能是您的意图服务没有启动，因为您正在重写`onStartCommand()`方法，如 android 文档所述：

> “你不应该为你的 IntentService 覆盖这个方法`(onStartCommand())`。而是覆盖`onHandleIntent(Intent)`，当 IntentService 收到一个启动请求时系统调用它。”

希望这会对你有所帮助

# python - Python循环：1/30 + 2/29 + 3/28

> ID：15755792
> 
> 赞同：1
> 
> 时间：2013-04-02T03:56:46.440
> 
> 标签：python, for-loop, while-loop, fractions

大家好，我有一个菜鸟问题。

如何设置以下代码进行打印：

`1/30 + 2/29 + 3/28..........30/1`

分子增加\分母减少

我有以下内容：

```
for i in range(1,31):
    v = i
for j in range(30,0,-1):
    t = j
    print(v/t) 
```

但打印

```
1.0
1.0344827586206897
1.0714285714285714
1.1111111111111112
1.15384615384......... 
```

如何得到`1/30 + 2/29 + 3/28.....`

感谢您的帮助和指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:01:40.963

你只需要一个循环！分母总是 31 减去分子。

```
r = 0
for i in range(1,31):
    r += i / (31 - i)
print(r) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:01:52.370

这里发生的是您的数字在打印之前被评估为浮点数。由于您想在不评估的情况下打印它们，因此您应该将它们插入到字符串中。以下行演示了如何在不计算变量的情况下将变量插入输出：

```
print "%d/%d" % (v,t) 
```

有关如何为打印函数格式化字符串的信息，请参阅[http://docs.python.org/release/2.5.2/lib/typesseq-strings.html 。](http://docs.python.org/release/2.5.2/lib/typesseq-strings.html)

但是，这仍然将每个结果放在单独的行上，因为 print 函数会自动插入一个新行。您可以使用以下循环构建一个字符串（注意如何巧妙地将其打包成一个循环而不是两个循环，因为您可以通过减法获得分母）：

```
string = ''
for i in range(1,31):
    string += "{}/{} + ".format(i, 31-i)
print string 
```

这会给你“1/30 + 2/29 + ... + 30/1 +”，但这仍然包括最后一个加号和周围的空格。要解决此问题，请将最后一行更改为

```
print string[:-3] 
```

删除那些最后的字符。

有关如何使用 format 函数的信息，请参阅[http://docs.python.org/2/library/string.html#formatstrings 。](http://docs.python.org/2/library/string.html#formatstrings)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T04:02:03.093

```
print (" + ".join(["%s/%s"%(num,denom)for num,denom in zip(range(1,31),range(30,0,-1))])) 
```

我认为至少

压缩在一起`(1,2,3...,30)`并`(30,29,28...,1)`产生一个新的元组`((1,30),(2,29),...,(30,1))`

然后你遍历这个将每个分子和分母放入一个字符串中，产生一个列表，我们用格式字符串来做这个`"%s/%s"%numerator,denominator`，虽然它会更好的形式来`"%d/%d"`代替，但那是另一个故事

`["1/30","2/29",...,"30/1"]`

然后你只需使用`' + '`作为胶水加入这个列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T04:03:15.523

我想你想要字符串而不是数值，对吗？

```
s = ''
for j in range(30, 0, -1):
    s += "{}/{} + ".format(31-j, j)
print s[:-2] 
```

阅读[本文档](http://docs.python.org/3/library/string.html#format-string-syntax)以掌握它。本质上，它是格式化字符串，使用两对花括号作为占位符，并在第一个插槽中传入值 31-j，在第二个插槽中传入 j。

当然有一种更优雅的方法可以做到这一点，但这是一种快速而肮脏的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T04:12:08.070

我不确定您到底要做什么，但是您只需一个循环即可完成。每次循环，分母就是 31 减去分子：

```
from fraction import Fraction
for num in range(1,31):
    den = 31 - num
    fraction_string = "%d/%d" % (num, den)
    fraction_value = Fraction(num, den)
    quotient = num / den
    #... do stuff with whichever of the above you want 
```

当你构建一个结果时——或者添加到一个总和，或者附加到一个字符串，或者在每次迭代中输出一些东西——你可以使用列表推导和列表函数更简洁地做到这一点。例如，而不是这样的：

```
quotientList = []
for n in range(1,31):        
    quotientList.append( n / (31 - n) ) 
```

你可以这样做：

```
quotientList = [ n / (31 - n) for n in range(1,31) ] 
```

而不是这个：

```
total = 0
for n in someList:
   total = total + n 
```

你可以这样做：

```
 total = sum(someList) 
```

将这些概念放在一起，我看到了您正在尝试做的三种可能性：

1.  打印出文字字符串`1/30 + 2/29 + 3/28 +`... `+30/1`：

    `print( " + ".join( "%d/%d" % (n, 31-n) for n in range(1,31) ) )`

2.  将其评估为算术表达式并打印结果：

    `print( sum( n/(31.0-n) for n in range(1,31) ) )`

3.  ...但作为分数而不是小数：

    `from fractions import Fraction`
    ...
    `print( sum( Fraction(n,31-n) for n in range(1,31) ) )`

# griffon - 如何在 JInternal Frame 中加载数据库表？

> ID：15755793
> 
> 赞同：1
> 
> 时间：2013-04-02T03:57:11.667
> 
> 标签：griffon

我在 JInternal 框架内加载表格时遇到问题，我无法描述它，但我会向您展示一张图片，以便您理解我的意思。

![图片](https://i.stack.imgur.com/3TXnz.png)

这是我的代码：

--SparepartController.groovy--

```
package sparepart

import griffon.transform.Threading

class SparepartController {
    def model
    def view
    def builder

   @Threading(Threading.Policy.INSIDE_UITHREAD_ASYNC)

    def supplier = {
       String id = 'supplier'
       def (m, v, c) = createMVCGroup('supplier', id, title: "Supplier")
       builder.desktopPane(view.desktop) {
           widget(v.window)
       }
    }

    def logout = {

    }

    def quit = {
        app.shutdown()
    }
} 
```

--SparepartView.groovy--

```
package sparepart

actions {
    action(id: 'loginAction',
            name: 'Login')
    action(id: 'logoutAction',
            enabled: bind {model.auth},
            name: 'Logout',
            closure: controller.logout)
    action(id: 'quitAction',
            name: 'Quit',
            closure: controller.quit)
    action(id: 'jenisBarangAction',
            name: 'Jenis Barang',
    )
    action(id: 'barangAction',
            name: 'Barang',
    )
    action(id: 'supplierAction',
            name: 'Supplier',
            closure: controller.supplier
    )
    action(id: 'pembelianAction',
            name: 'Pembelian',
    )
    action(id: 'penjualanAction',
            name: 'Penjualan',
    )
    action(id: 'userAction',
            name: 'User',
    )
    action(id: 'reportBarangAction',
            name: 'Barang',
    )
    action(id: 'reportSupplierAction',
            name: 'Supplier',
    )
    action(id: 'reportPembelianAction',
            name: 'Pembelian',
    )
    action(id: 'reportPejualanAction',
            name: 'Penjualan',
    )
    action(id: 'reportBarangTerlarisAction',
            name: 'Barang Terlaris',
    )
}

application(title: 'DIKA MOTOR',
  preferredSize: [950, 650],
  pack: true,
  //location: [50,50],
  locationByPlatform: true,
  iconImage:   imageIcon('/griffon-icon-48x48.png').image,
  iconImages: [imageIcon('/griffon-icon-48x48.png').image,
               imageIcon('/griffon-icon-32x32.png').image,
               imageIcon('/griffon-icon-16x16.png').image]) {
    // add content here
    menuBar {
        menu('Menu') {
            menuItem loginAction
            menuItem logoutAction
            menuItem quitAction
        }

        //if(model.auth) {
            menu('Master Data') {
                menuItem jenisBarangAction
                menuItem barangAction
                menuItem supplierAction
            }
            menu('Transaksi') {
                menuItem pembelianAction
                menuItem penjualanAction
            }
            menu('Utility') {
                menuItem userAction
            }
            menu('Report') {
                menuItem reportPembelianAction
                menuItem reportPejualanAction
                menuItem reportSupplierAction
                menuItem reportBarangTerlarisAction
            }
        //}
    }
    desktopPane(id: 'desktop')
} 
```

--SupplierController.groovy--

```
package sparepart

import groovy.sql.DataSet
import groovy.sql.Sql

class SupplierController {
    def model
    def view
    private String id

    void mvcGroupInit(Map args) { 
        id = args.mvcName

        edt {
            model.listSupplier.clear()
        }

        withSql { dataSourceName, Sql sql ->
            sql.eachRow("SELECT * FROM tblsupplier") {
                Map baris = [kodeSupplier: model.kodeSupplier, namaSupplier: model.namaSupplier, alamat: model.alamat, telp: model.telp, email: model.email]
                edt {
                    model.listSupplier << baris
                }
            }
        }
    }

    void mvcGroupDestroy() {
        execOutsideUI() {
            def desktop = view.window.parent
            desktop.remove view.window
            desktop.invalidate()
            desktop.repaint()
        }
    }

    def keluar = { destroyMVCGroup id }

    def simpan = {
        withSql { dataSourceName, Sql sql ->
            DataSet supplier = sql.dataSet("tblsupplier")
            if (sql.firstRow("SELECT kodeSupplier FROM tblsupplier WHERE kodeSupplier = ${model.kodeSupplier}") != null) {
                // sudah ada NIM yang sama, maka lakukan update.
                supplier.executeUpdate("UPDATE tblsupplier SET namaSupplier = ${model.namaSupplier}, alamat = ${model.alamat}, telp = ${model.telp}, email = ${model.email} WHERE kodeSupplier = ${model.kodeSupplier}")

                // update baris di model
                edt {
                    int index = model.listSupplier.findIndexOf{it['kodeSupplier']==model.kodeSupplier}
                    model.listSupplier[index] += [namaSupplier: model.namaSupplier, alamat: model.alamat, telp: model.telp, email: model.email]
                }

            } else {
                // belum ada NIM, maka tambahkan.
                supplier.add(kodeSupplier: model.kodeSupplier, namaSupplier: model.namaSupplier, alamat: model.alamat, telp: model.telp, email: model.email)

                // tambahkan baris baru ke model
                edt { model.listSupplier << [kodeSupplier: model.kodeSupplier, namaSupplier: model.namaSupplier, alamat: model.alamat, telp: model.telp, email: model.email] }
            }
        }
    }

    def hapus = {
        withSql { dataSourceName, Sql sql ->
            sql.executeUpdate("DELETE FROM tblsupplier WHERE kodeSupplier = ${model.kodeSupplier}")
        }

        // menghapus baris dari model
        edt {
            int index = model.listSupplier.findIndexOf{it['kodeSupplier']==model.kodeSupplier}
            model.listSupplier.remove(index)
        }
    }

    def refresh = { app ->
        withSql { dataSourceName, Sql sql ->
            sql.eachRow("SELECT * FROM tblsupplier") {
                Map baris = [kodeSupplier: model.kodeSupplier, namaSupplier: model.namaSupplier, alamat: model.alamat, telp: model.telp, email: model.email]
                edt {
                    model.listSupplier << baris
                }
            }
        }
    }
} 
```

--SupplierModel.groovy--

```
package sparepart

import ca.odell.glazedlists.BasicEventList
import ca.odell.glazedlists.EventList
import ca.odell.glazedlists.swing.EventSelectionModel
import groovy.beans.Bindable

class SupplierModel {
    @Bindable String kodeSupplier
    @Bindable String namaSupplier
    @Bindable String alamat
    @Bindable String telp
    @Bindable String email

    EventList listSupplier = new BasicEventList()
    EventSelectionModel eventSelectionModel 
```

--SupplierView.groovy--

```
package sparepart

import ca.odell.glazedlists.FilterList
import ca.odell.glazedlists.impl.filter.StringTextFilterator
import ca.odell.glazedlists.swing.EventSelectionModel
import ca.odell.glazedlists.swing.TextComponentMatcherEditor
import net.miginfocom.swing.MigLayout

// Helper untuk mengambil nilai kolom dari baris terpilih
def getSelectedValue = { kolom ->
    EventSelectionModel selection = model.eventSelectionModel
    if (!selection.isSelectionEmpty()) {
        selection.getSelected()[0][kolom]
    } else {
        null
    }
}

internalFrame(title: title, size: [650, 500], id: 'window', visible: true, resizable: true, iconifiable: true, maximizable: true) {
    borderLayout()

    panel(constraints: PAGE_START) {
        flowLayout(alignment: FlowLayout.RIGHT)
        label("Cari: ")
        textField(id: "txtPencarian", columns: 10)
    }

    scrollPane(constraints: CENTER) {
        table (rowSelectionAllowed: true, id: 'table') {
            eventTableModel(source: new FilterList(model.listSupplier,
                    new TextComponentMatcherEditor(txtPencarian, new StringTextFilterator())),
                    format: defaultTableFormat(columnNames: ['Kode Supplier', 'Nama Supplier', 'Alamat', 'Telp', 'Email']))
            model.eventSelectionModel = installEventSelectionModel(source: model.listSupplier)
        }
    }

    panel(layout: new MigLayout('', '[right][left,grow]',''), constraints: PAGE_END) {
        label('Kode Supplier:')
        textField(id: 'txtKodeSupplier', columns: 5, text: bind(target: model, targetProperty: 'kodeSupplier'), constraints: 'wrap')
        label('Nama Supplier:')
        textField(id: 'txtNamaSupplier', columns: 20,text: bind(target: model, targetProperty: 'namaSupplier'), constraints: 'wrap')
        label('Alamat:')
        textField(id: 'txtAlamat', columns: 100, text: bind(target: model, targetProperty: 'alamat'), constraints: 'growx, wrap')
        label('Telp.:')
        textField(id: 'txtTelp', columns: 20,text: bind(target: model, targetProperty: 'telp'), constraints: 'wrap')
        label('Email:')
        textField(id: 'txtEmail', columns: 30,text: bind(target: model, targetProperty: 'email'), constraints: 'wrap')

        bind(source: model.eventSelectionModel, sourceEvent: 'valueChanged',
                sourceValue: {getSelectedValue("kodeSupplier")}, target: txtKodeSupplier, targetProperty: 'text')
        bind(source: model.eventSelectionModel, sourceEvent: 'valueChanged',
                sourceValue: {getSelectedValue("namaSupplier")}, target: txtNamaSupplier, targetProperty: 'text')
        bind(source: model.eventSelectionModel, sourceEvent: 'valueChanged',
                sourceValue: {getSelectedValue("alamat")}, target: txtAlamat, targetProperty: 'text')
        bind(source: model.eventSelectionModel, sourceEvent: 'valueChanged',
                sourceValue: {getSelectedValue("telp")}, target: txtTelp, targetProperty: 'text')
        bind(source: model.eventSelectionModel, sourceEvent: 'valueChanged',
                sourceValue: {getSelectedValue("email")}, target: txtEmail, targetProperty: 'text')

        panel(constraints: 'span, growx, wrap') {
            flowLayout()
            button("Simpan", actionPerformed: controller.simpan)
            button("Hapus", enabled: bind (source: model.eventSelectionModel,
                    sourceEvent: 'valueChanged', sourceValue: {!model.eventSelectionModel.isSelectionEmpty()}),
                    actionPerformed: controller.hapus)
            //button("Refresh", actionPerformed: controller.refresh)
            button keluarAction
        }
    }
} 
```

它会给我这个：

![这](https://i.stack.imgur.com/aQ6dO.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:40:25.793

使用 JTable/JTree/JList 的最简单方法是使用 GlazedLists ( [http://www.glazedlists.com/](http://www.glazedlists.com/) )，幸运的是有一个 glazedlists 插件[http://artifacts.griffon-framework.org/plugin/glazedlists](http://artifacts.griffon-framework.org/plugin/glazedlists)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:20:23.613

在您的 SupplierController.groovy 中，有这样的：

```
sql.eachRow("SELECT * FROM tblsupplier") {
   // Look here!
   Map baris = [kodeSupplier: model.kodeSupplier, namaSupplier: model.namaSupplier, 
      alamat: model.alamat, telp: model.telp, email: model.email]
   ...
} 
```

您永远不会使用从 SQL 查询返回的值。根据您的代码，`model.kodeSupplier`可能为空。你的意思是`it.kodeSupplier`？

顺便说一句，对于这种应用程序，我使用这个[插件](https://docs.google.com/file/d/0B-_rVDnaVRCbaGx2dG5GdEN2Rk0/edit?usp=sharing)来生成基于域类的 MVCGroups（[来自这里](https://thesolidsnake.wordpress.com/2013/04/03/membuat-aplikasi-crud-mysql-dalam-10-menit-dengan-griffon/)）。使用域类将比使用地图更容易。

# iphone - 使用 PresentWithGesture 时未调用 UISplitViewControllerDelegate 方法？

> ID：15755795
> 
> 赞同：1
> 
> 时间：2013-04-02T03:57:19.703
> 
> 标签：iphone, ios, cocoa-touch

似乎当`UISplitViewController`属性`presentsWithGesture`为时`YES`，`UISplitViewControllerDelegate`当使用滑动手势显示/隐藏主视图控制器时，不会调用方法。特别是，`splitViewController:willShowViewController:invalidatingBarButtonItem:`并`splitViewController:willHideViewController:withBarButtonItem:forPopoverController:`没有被调用。

使用带有手势的 splitViewController 时，其他人如何管理视图控制器的更新状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T22:02:41.220

`willHide`/方法用于当主视图控制器由于方向更改而`willShow`被隐藏/显示时，并且正如它们的参数所建议的那样，主要是为了让您可以添加/删除用于在弹出窗口中显示主视图控制器的条形按钮项. （拆分视图控制器的主弹出框与其他弹出框的外观不同，但它仍然是`UIPopoverController`.）

当我刷入主视图时，我仍然看到[`splitViewController:popoverController:willPresentViewController:`](https://developer.apple.com/library/ios/documentation/uikit/reference/UISplitViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/UISplitViewControllerDelegate/splitViewController%3apopoverController%3awillPresentViewController%3a)被调用。当弹出框被解除时，弹出框控制器的委托会收到通知。

# php - 从外部页面获取值？

> ID：15755796
> 
> 赞同：0
> 
> 时间：2013-04-02T03:57:24.613
> 
> 标签：php, javascript, jquery

此代码位于外部 URL：www.example.com。

```
</head><body><div id="cotizaciones"><h1>Cotizaciones</h1><table cellpadding="3" cellspacing="0" class="tablamonedas">
  <tr style="height:19px"><td class="1"><img src="../mvd/usa.png" width="24" height="24" /></td>
  <td class="2">19.50</td>
  <td class="3">20.20</td>
  <td class="4"><img src="../mvd/Bra.png" width="24" height="24" /></td>
<td class="5">9.00</td>
<td class="6">10.50</td>
  </tr><tr style="height:16px" valign="bottom"><td class="15"><img src="../mvd/Arg.png" width="24" height="24" /></td>
<td class="2">2.70</td>
<td class="3">3.70</td>
<td class="4"><img src="../mvd/Eur.png" width="24" height="24" /></td>
<td class="5">24.40</td>
<td class="6">26.10</td>
</tr></table> 
```

我想获得 td 的值，有什么建议吗？php,jquery 等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T04:06:02.913

由于安全限制仅允许您从自己的站点加载数据，您将无法使用 javascript 执行此操作。

您必须使用 php 提取内容（使用像[file_get_contents](http://php.net/file_get_contents)这样简单的东西）然后解析它。

对于解析，请阅读这篇综合文章：

[您如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)

[DOM](http://php.net/DOMDocument)可能是你最好的选择。

尝试玩这个：

```
$html = file_get_contents('/path/to/remote/page/');
$dom = new DOMDocument;
$dom->loadHTML($html);
foreach ($dom->getElementsByTagName('td') as $node) {
    echo "Full TD html: " . $dom->saveHtml($node) . "\n";
    echo "TD contents: " . $node->nodeValue . "\n\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:22:12.323

它不可能用 jquery 来做，但是你可以用 PHP 轻松地做到这一点。

使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)将页面的整个源代码读入字符串。

解析、标记包含整个页面源的字符串，以获取所有 td 值。

```
<?php
$srccode = file_get_contents('http://www.example.com/');
/*$src is a string that contains source code of web-page http://www.example.com/

/*Now only thing you have to do is write a function say "parser" that tokenise or parse the string in order to grab all the td value*/

$output=parser($srccode);
echo $output;

?> 
```

在解析字符串以获得所需的输出时，您必须非常小心。对于解析，您可以使用正则表达式或创建自己的查找表。您可以使用用 PHP5 编写的 HTML DOM 解析器，让您可以非常轻松地操作 HTML方式。有很多这样的免费解析器可用。

# wordpress - 更新 wordpress 的插件版本

> ID：15755798
> 
> 赞同：1
> 
> 时间：2013-04-02T03:57:27.183
> 
> 标签：wordpress

我是 wordpress 插件开发的新手，我创建了一个新的小插件（联系表格）仅用于测试目的。这是插件的链接

[http://wordpress.org/extend/plugins/contact-us-by-lord-linus/](http://wordpress.org/extend/plugins/contact-us-by-lord-linus/)

我已经从 0.8 版本开始这个插件，我也在上传 0.9.2，我已经上传了 0.9.2 版本，我可以使用 wordpress 存储库中给出的下载链接进行下载，但我想更改下载链接的文本. 现在文本应该是`Download version 0.9.2`而不是`Download version 0.8`。我正在关注教程

[http://wp.tutsplus.com/tutorials/how-to-publish-to-the-wordpress-plugin-repository/](http://wp.tutsplus.com/tutorials/how-to-publish-to-the-wordpress-plugin-repository/)

有关更多详细信息，您可以查看随附的快照

![在此处输入图像描述](https://i.stack.imgur.com/4pNog.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:09:02.717

在 readme.txt 文件中，添加

```
<?php
/*
Plugin Name: Name Of The Plugin
Plugin URI: http://URI_Of_Page_Describing_Plugin_and_Updates
Description: A brief description of the Plugin.
Version: The Plugin's Version Number, e.g.: 0.8
*/
?> 
```

# php - 按包含管道的键值过滤数组

> ID：15755799
> 
> 赞同：0
> 
> 时间：2013-04-02T03:57:32.043
> 
> 标签：php, arrays, filter

我有一个表单，需要排除用户输入来过滤搜索结果。我不是表单的原始设计者。我看到过滤结果的两种方法之一。A）我可以尝试将 sql 查询限制为选定的代码或 B）过滤返回的结果。我正在尝试 B。

我试过了

```
var_dump(array_intersect_key($array1, $array2)); 
```

没有成功：

Array1 如下所示：

```
array (

        '|00006|5' => array('pid' => 111

                'provider_id' => 123456 )  

        '|93000|34' => array('pid' => 112

                'provider_id' => 127654 )

        '|93225|1' => array('pid' => 113

                'provider_id' => 127893 ) 
```

)

我弄清楚了管道是如何进入键值的，我试图调整我的键以匹配，但这也不起作用。

关于如何使用不是单个值且动态更改的键来过滤这些类型的结果的任何建议？

Array2 看起来像：

```
 99232 => string '99232' (length=5)
  85610 => string '85610' (length=5)
  93970 => string '93970' (length=5)
  93000 => string '93000' (length=5)
  99406 => string '99406' (length=5)
  99215 => string '99215' (length=5) 
```

我试图设置某种类型的过滤，使键值和字符串值相同。但是由于 array1 中的第三个值将在 while 子句中动态传递。我无法将该数字与 Array2 匹配。

我的预期结果是

```
 array (

        '|93000|34' => array('pid' => 112

                'provider_id' => 127654 )
       ) 
```

因为 6 个输入中只有一个与 array1 值之一匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:15:29.200

您必须定义您的关键比较功能，然后使用`array_intersect_ukey()`：

```
$a = array (
        '|00006|5' => array('pid' => 111,
                'provider_id' => 123456 ),
        '|93000|34' => array('pid' => 112,
                'provider_id' => 127654 ),
        '|93225|1' => array('pid' => 113,
                'provider_id' => 127893 ),
);

$b = array('93000' => '93000');

print_r(array_intersect_ukey($a, $b, function($ka, $kb) {
        if ($ka[0] == '|') {                     // transform key
                $ka = substr($ka, 1, strrpos($ka, '|') - 1);
        }
        if ($kb[0] == '|') {                     // transform key
                $kb = substr($kb, 1, strrpos($kb, '|') - 1);
        }
        // perform regular comparison
        return strcmp($ka, $kb);
})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:48:09.153

或者你可以这样做。祝你好运 ：）

```
$parsed1 = array();
foreach($array1 as $key => $value) {
    $splited = explode("|", $key);
    $parsed1[$splited[1]] = $value;
}
var_dump(array_intersect_key($parsed1,$array2)); 
```

# linq - 如何在c#中将元素数组与linq查询结果进行比较

> ID：15755804
> 
> 赞同：1
> 
> 时间：2013-04-02T03:58:04.287
> 
> 标签：linq, lambda

如何将元素数组与 linq 查询进行比较。我将元素数组传递给控制器​​，我想比较并显示只包含传递元素的记录。

我将传递一个值数组，`["first","second","third"]`我想将这些记录与 linq 查询进行比较，并生成包含这三个记录的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:02:26.573

我不确定，但你可能想要这样的东西

```
String[] values = {"first", "second", "third"};

List<YourObject> query = 
    (from p in this.db.table 
    where values.Contains(p.values) select p).ToList(); 
```

# c++ - tbb 工人模型

> ID：15755808
> 
> 赞同：0
> 
> 时间：2013-04-02T03:58:35.303
> 
> 标签：c++, tbb

假设有一些工作对象包含一些内部资源，例如套接字。这些工作对象在程序启动时创建并在程序退出时销毁。主线程会将对象 ID 传递给其中一个工作对象。然后工作人员将处理具有该 ID 的对象并通过套接字发送结果。我想要的是让这些工人并行运行。是否有任何 TBB 组件可以用于此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:42:56.423

但是您可以轻松地创建一个线程类，它接受工作者作为构造函数参数。为每个工作对象创建一个线程对象并启动这些线程，然后就完成了。

# java - Java 偏向三角数组中的随机数

> ID：15755813
> 
> 赞同：1
> 
> 时间：2013-04-02T03:58:59.650
> 
> 标签：java, math, random, probability

这个问题是[Java-Math.random() 的扩展：选择 13 x 13 三角形数组的元素](https://stackoverflow.com/questions/15755228/java-math-random-selecting-an-element-of-a-13-by-13-triangular-array)。我随机选择两个数字（包括 0-12），我希望这些值相等。

但是现在，由于这是一个乘法游戏，我想要一种方法来使结果产生偏差，以便更频繁地出现某些组合（例如，如果玩家在 12x8 中表现更差，我希望它更频繁地出现）。最终，我会偏向于 91 种组合中的任何一种，但是一旦我把它写下来，这应该不难。

我的想法：`int n`在三角数上加一些，`Random.nextInt(91 + n)`使结果偏向于组合。

```
private int[] triLessThan(int x, int[] bias) { // I'm thinking a 91 element array, 0 for no bias, positive for bias towards
    int i = 0;
    int last = 0;
    while (true) {
                    int sum = 0;
                    for (int a = 0; a < i * (i + 2)/2; a++){
                        sum += bias[a]
                    }
        int triangle = i * (i + 1) / 2;
        if (triangle + sum > x){
            int[] toReturn = {last,i};
            return toReturn;
        }
        last = triangle;
        i++;
    }
} 
```

在随机数滚动：

```
int sum = sumOfArray(bias); // bias is the array;
int roll = random.nextInt(91 + sum);
int[] triNum = triLessThan(roll);
int num1 = triNum[1];
int num2 = roll - triNum[0]; //now split into parts and make bias[] add chances to one number. 
```

其中 sumOfArray 只是找到总和（该公式很简单）。这行得通吗？

**编辑：**使用弗洛里斯的想法：

在随机数滚动：

```
int[] bias = {1,1,1,...,1,1,1} // 91 elements
int roll = random.nextInt(sumOfBias());
int num1 = roll;
int num2 = 0;
while (roll > 0){
    roll -= bias[num2];
    num2++;
}
num1 = (int) (Math.sqrt(8 * num2 + 1) - 1)/2;
num2 -= num1 * (num1 + 1) / 2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:10:43.930

您已经知道如何转换 0 到 91 之间的数字并将其变成一个滚动（来自您上一个问题的答案）。我建议您创建一个包含 N 个元素的数组，其中 N >> 91。用 0...90 填充前 91 个元素，并将计数器设置`A`为 91。现在选择一个介于 0 和 A 之间的数字，选择相应的元素从数组中，并转换为乘法问题。如果答案错误，则将问题的编号附加到数组的末尾，并加`A`一。

这将创建一个数组，其中采样频率将代表问题被错误解决的次数 - 但如果问题在下次被问到时正确解决，它不会再次降低频率。

另一种更好的解决方案，一个更接近你的解决方案（但不同）创建一个由 91 个频率组成的数组 - 每个初始设置为 1 - 并跟踪总和（最初为 91）。但是现在，当您选择一个随机数（介于 0 和 sum 之间）时，您会遍历数组，直到累积总和大于您的随机数 - bin 的数量是您选择的卷，然后您使用之前推导的公式将其转换. 如果答案错误，则增加 bin 并更新总和；如果它是正确的，你减少总和，但永远不要小于一，并更新总和。重复。

这应该可以准确地满足您的要求：给定一个包含 91 个数字（“bins”）的数组，随机选择一个 bin，使该 bin 的概率与其中的值成正比。返回 bin 的索引（可以使用您之前的方法将其转换为数字组合）。此函数以 bin（频率）数组作为第一个参数，累积和作为第二个参数调用。您查找前 n 个元素的累积总和首先超过由频率总和缩放的随机数的位置：

```
private int chooseBin(float[] freq, float fsum) {
// given an array of frequencies (probabilities) freq
// and the sum of this array, fsum
// choose a random number between 0 and 90
// such that if this function is called many times
// the frequency with which each value is observed converges
// on the frequencies in freq
    float x, cs=0; // x stores random value, cs is cumulative sum
    int ii=-1;     // variable that increments until random value is found

    x = Math.rand();

    while(cs < x*fsum && ii<90) { 
    // increment cumulative sum until it's bigger than fraction x of sum
        ii++;
        cs += freq[ii];
    }
return ii;
} 
```

我确认它给了我一个直方图（蓝条），它看起来与我输入它的概率分布（红线）一模一样： ![直方图](https://i.stack.imgur.com/s0t7r.png)

（注意 - 这是用 matlab 绘制的，所以 X 从 1 到 91，而不是从 0 到 90）。

这是另一个想法（这并没有真正回答这个问题，但它可能更有趣）：

您可以通过对均匀分布以外的其他内容进行抽样来调整选择特定问题的概率。例如，均匀采样的随机变量的平方将有利于较小的数字。这给了我们一个有趣的可能性：

首先，将您的 91 个数字随机排列

接下来，从非均匀分布中选择一个数字（一个有利于较小数字的数字）。由于这些数字是随机打乱的，因此它们实际上同样有可能被选中。但现在有诀窍了：如果问题（由选择的数字表示）被正确解决，则将问题编号移动到“堆栈的顶部”，它最不可能再次被选择。如果玩家弄错了，它会被移到堆栈的底部，在那里它最有可能再次被选中。随着时间的推移，困难的问题会移到堆栈的底部。

您可以使用以下变量创建具有不同偏斜度的随机分布

```
roll = (int)(91*(asin(Math.rand()*a)/asin(a))) 
```

当您`a`接近 1 时，该函数倾向于支持较小的数字，而较高数字的概率几乎为零：

![非均匀抽样示例](https://i.stack.imgur.com/1NTSz.png)

我相信以下代码部分符合我的描述：

```
private int[] chooseProblem(float bias, int[] currentShuffle) { 
// if bias == 0, we choose from uniform distribution
// for 0 < bias <= 1, we choose from increasingly biased distribution
// for bias > 1, we choose from uniform distribution
// array currentShuffle contains the numbers 0..90, initially in shuffled order
// when a problem is solved correctly it is moved to the top of the pile
// when it is wrong, it is moved to the bottom.
// return value contains number1, number2, and the current position of the problem in the list
    int problem, problemIndex;

    if(bias < 0 || bias > 1) bias = 0;

    if(bias == 0) {
        problem = random.nextInt(91);
        problemIndex = problem;
    }
    else {
        float x = asin(Math.random()*bias)/asin(bias);
        problemIndex = Math.floor(91*x);
        problem = currentShuffle[problemIndex];
    }

    // now convert "problem number" into two numbers:
    int first, last;    
    first = (int)((Math.sqrt(8*problem + 1)-1)/2);
    last = problem - first * (first+1) / 2;

    // and return the result:
    return {first, last, problemIndex};
}

private void shuffleProblems(int[] currentShuffle, int upDown) {
// when upDown==0, return a randomly shuffled array
// when upDown < 0, (wrong answer) move element[-upDown] to zero
// when upDown > 0, (correct answer) move element[upDown] to last position
// note - if problem 0 is answered incorrectly, don't call this routine!

    int ii, temp, swap;

    if(upDown == 0) {

        // first an ordered list:
        for(ii=0;ii<91;ii++) {
            currentShuffle[ii]=ii;
        }

        // now shuffle it:
        for(ii=0;ii<91;ii++) {
            temp = currentShuffle[ii];
            swap = ii + random.nextInt(91-ii);
            currentShuffle[ii]=currentShuffle[swap];
            currentShuffle[swap]=temp;
        }
        return;
    }

    if(upDown < 0) {
        temp = currentShuffle[-upDown];
        for(ii = -upDown; ii>0; ii--) {
            currentShuffle[ii]=currentShuffle[ii-1];
        }
        currentShuffle[0] = temp;
    }
    else {
        temp = currentShuffle[upDown];
        for(ii = upDown; ii<90; ii++) { 
            currentShuffle[ii]=currentShuffle[ii+1];
        }
        currentShuffle[90] = temp;
    }
    return;
}

// main problem posing loop:

int[] currentShuffle = new int[91];
int[] newProblem;
int keepGoing = 1;

// initial shuffle:
shuffleProblems( currentShuffle, 0); // initial shuffle

while(keepGoing) {
    newProblem = chooseProblem(bias, currentShuffle);
    // pose the problem, get the answer
    if(wrong) {
        if(newProblem > 0) shuffleProblems( currentShuffle, -newProblem[2]);
    }
    else shuffleProblems( currentShuffle, newProblem[2]);
    // decide if you keep going...
} 
```

# c++ - 在哪里/如何在 OpenCV 中放置构建文件

> ID：15755817
> 
> 赞同：5
> 
> 时间：2013-04-02T03:59:32.487
> 
> 标签：c++, opencv, cmake

我刚刚开始使用 OpenCV，并且我有以下示例 .cpp 文件（来自 opencv.org）：

```
#include <stdio.h>
#include <opencv2/opencv.hpp>

using namespace cv;

int main( int argc, char** argv )
{
    Mat image;
    image = imread( argv[1], 1 );

    if( argc != 2 || !image.data )
    {
        printf( "No image data \n" );
        return -1;
    }

    namedWindow( "Display Image", CV_WINDOW_AUTOSIZE );
    imshow( "Display Image", image );

    waitKey(0);

    return 0;
} 
```

我有以下 CMakeList.cmake 文件：

```
project(opencvTEST)
cmake_minimum_required(VERSION 2.6 FATAL_ERROR)

find_package(OpenCV REQUIRED)

# Project Executable
add_executable (test test.cpp)
target_link_libraries(test ${OpenCV_LIBS}) 
```

我有一台 Mac（OS 10.6.8），我已经用 CMake 安装了 OpenCV 2.4.3，我搜索了高低并尝试了许多不同的方法来编译这个测试程序（我正在使用命令line--no IDE），但我收到以下编译错误（显然，由于该`include`语句无法正常工作）：

```
test.cpp:3:30: error: opencv2/opencv.hpp: No such file or directory
test.cpp:5: error: ‘cv’ is not a namespace-name
test.cpp:5: error: expected namespace-name before ‘;’ token
test.cpp: In function ‘int main(int, char**)’:
test.cpp:9: error: ‘Mat’ was not declared in this scope
test.cpp:9: error: expected `;' before ‘image’
test.cpp:10: error: ‘image’ was not declared in this scope
test.cpp:10: error: ‘imread’ was not declared in this scope
test.cpp:18: error: ‘CV_WINDOW_AUTOSIZE’ was not declared in this scope
test.cpp:18: error: ‘namedWindow’ was not declared in this scope
test.cpp:19: error: ‘imshow’ was not declared in this scope
test.cpp:21: error: ‘waitKey’ was not declared in this scope 
```

`opencv2`我有一个与 , 位于同一目录中的文件夹`test.cpp`，并且`opencv.hpp`位于 中`opencv2`，所以我不明白为什么找不到它。有任何想法吗？

此外，一般来说，OpenCV 期望您将源文件（.cpp 等）放在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-10T14:20:19.140

我有完全相同的问题。我从 opencv 教程中运行了相同的示例并得到了相同的错误

```
error: ‘CV_WINDOW_AUTOSIZE’ was not declared in this scope 
```

我通过添加标题解决了这个问题：

```
#include <opencv/highgui.h> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T04:20:26.983

您忘记添加 CMakeLists.txt

```
include_directories(${OpenCV_INCLUDE_DIRS}) 
```

在 find_package（需要 OpenCV）之后

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T01:42:42.753

我希望我确切地知道上面的问题是什么，但我只能猜测这与我在安装 OpenCV 2.4.4 的同时尝试使用 OpenCV 2.4.3 的事实有关（我猜这个引起了一些冲突）。

`rm -rf`我通过删除 OpenCV 2.4.3（只是在我放置它的目录上运行）并卸载了 2.4.4（使用自制软件：），让 OpenCV 2.4.4 在我的机器上运行`brew uninstall opencv`。在采取这些步骤清理之后，我运行了以下命令（你必须有[homebrew](http://mxcl.github.com/homebrew/)）：

```
$ brew update #just in case you're missing updates
$ brew tap homebrew/science #skip this if you already have the science formulae
$ brew install opencv #this took about 15 minutes 
```

最后，我按照[本教程](http://docs.opencv.org/trunk/doc/tutorials/introduction/linux_gcc_cmake/linux_gcc_cmake.html)进行操作，瞧，它奏效了！我将此归结为使用不直观的新软件，感到沮丧，并尝试了 273 种不同的方式来运行 OpenCV。我想所有这些加起来就是我不知道的安装，这（我认为）导致了严重的问题。我是唯一一个很难让 OpenCV 工作的人吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T04:55:18.510

还有一个包含路径的包含文件夹：opencv\build\include。完整的标题在那里，您可以将 OpenCV_INCLUDE_DIR 设置为该目录

# java - 在数据存储中存储对象

> ID：15755820
> 
> 赞同：0
> 
> 时间：2013-04-02T04:00:34.897
> 
> 标签：java, google-app-engine

我正在尝试这样做：

```
Entity e = new Entity(_key);
e.setProperty(OBJECT, obj); 
_ds.put(e); // put to the database 
```

但是，数据存储`_ds`在对象中进行了一些扩展，因此当我将 a`Integer`放入`Entity`属性时，返回的是 a `Long`? 这是为什么？

有没有办法在数据存储中“按原样”存储对象而不扩大或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:55:03.110

I thikn it's in the nature of Google App Engine to widen Integer to Long. I had this problem also. So I made:

*   [MapDS](http://bit.ly/ZeoX7R)

A simple Java Map interface to the GAE Datastore. It returns just about any kind of Object, Integer, Long, etc. without "widening" or whatsoever.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:46:16.367

我会向您推荐使用[Objectify 框架](https://code.google.com/p/objectify-appengine/)。这是 Java App Engine 的完美框架

# android - 如何确定用户是否触摸画布中的椭圆？

> ID：15755823
> 
> 赞同：2
> 
> 时间：2013-04-02T04:00:59.853
> 
> 标签：android, canvas

我通过以下代码在画布中绘制了一个椭圆，并且效果很好：

```
Paint paint = new Paint();
canvas.drawOval(new RectF(10, 10, 300, 100), paint); 
```

**当用户点击屏幕时，我如何确定用户是否在椭圆内点击？**

注意：当我绘制一个 Rect 时，我可以使用 Rect.contains(int x, int y) 来确定用户是否在其中点击。但现在我正在画一个椭圆形。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:09:46.840

当您触摸屏幕时，您将获得`x`和`y`坐标。您也可以知道中心或椭圆形。

`x, y`是触摸时`center_x`的`center_y`坐标，是椭圆中心的坐标。R是半径。

```
float dx = Math.abs(x-center_x);
float dy = Math.abs(y-center_y);
float R = radius ;//radius of circle.

boolean checkDistance(float dx,float dy,float R)
{
if(dx>R)
{
return false;//outside
}
else if(dy>R)
{
return false;//
}
else
{
return true;
}
} 
```

实际上，此解决方案适用于一个圆圈，但您可以使用它获得一个很好的近似值，或者可能会敞开心扉为您的目的更改此代码。

# vbscript - 修改 VBScript 以将电子邮件发送到用户定义的地址

> ID：15755834
> 
> 赞同：0
> 
> 时间：2013-04-02T04:01:59.183
> 
> 标签：vbscript

我发现了一个相当有用的 VBScript，它添加了一个发送到上下文菜单项，允许使用将多个文档作为附件发送到 Outlook 邮件模板。我目前使用类似的脚本根据一些用户输入生成电子邮件，并且想知道如何更新此脚本以包含收件人字段或发送到地址的字段。

最终，我想从用户那里获得发送到地址、任何选定的附件、主题、正文，并自动发送电子邮件，而不强制用户单击 Outlook 中的发送按钮。但是现在，我很乐意获取并插入“发送至”地址并将所选文件添加为附件。

原谅我，我对 VBScript 知之甚少，我什至不确定我想做的事情是否可行。如果您有任何建议，请随时分享！

这是VBScript：

```
Set WshShell = WScript.CreateObject("WScript.Shell")
Set objFSO = CreateObject("Scripting.FileSystemObject")
strSendTo = WshShell.SpecialFolders("SendTo") & "\"
strShortcutFileName = strSendTo & "\" & "Mail Recipient (as Path)" & ".lnk"
strMsg = "Completed!" & Chr(10) & Chr(10) & "SendLinkToMail.vbs - © 2010 Ramesh Srinivasan" & Chr(10) & "Visit us at http://www.winhelponline.com/blog/"
Set objArgs = WScript.Arguments
If WScript.Arguments.Count >  0 Then

    For I = 0 to objArgs.Count - 1
        If Left(WScript.Arguments.Item(I), 2) = "\\" Then
            strLinks =  strLinks & "%0A" & "%3C" & Replace(WScript.Arguments.Item(I)," ", "%20") & "%3E"
        Else
            strLinks =  strLinks & "%0A" & "%3C" & "file:///" & Replace(WScript.Arguments.Item(I)," ", "%20") & "%3E" & "%0A"
        End If      
    Next

    'Customize the Recipient Email and Subject here
    strRecipientEMail = ""
    strMailSubject = "File Paths"

    strMailSubject = Replace(strMailSubject," ","%20")
    On Error Resume Next

    WshShell.run "mailto:" & strRecipientEMail & "?Subject=" & strMailSubject & "&body=" & strLinks

    If Err <> 0 Then
        Select Case Err.Number
            Case 70
                If MsgBox ("Cannot send to mail as the parameters are too long. Do you want to output the file paths to a text file instead?",vbYesNo) = vbYes Then
                    strLinks =  Replace(strLinks,"%20"," ")
                    strLinks =  Replace(strLinks,"%0A",vbCrLf)
                    txtFilePaths= WshShell.ExpandEnvironmentStrings("%TEMP%") & "\FilePaths.txt"
                    Set b = objFSO.CreateTextFile (txtFilePaths,true)
                    b.WriteLine strLinks
                    b.close
                    WshShell.run "notepad.exe " & txtFilePaths
                End If

            Case Else
                MsgBox "Error " & Err.Number & " occurred."

        End Select
    End If
    On Error Goto 0 
Else
    rtn= Trim(UCase(InputBox ("Type INSTALL to add the MAIL RECIPIENT (as Path) to the Send To menu, or type UNINSTALL if you wish to remove the option.",  "Configuring SendLinkToMail.vbs...", "INSTALL")))
    If rtn = "INSTALL" Then RunInstall
    If rtn = "UNINSTALL" Then RunUninstall
End If

Sub RunInstall
    Set oShellLink = WshShell.CreateShortcut(strShortcutFileName)
    oShellLink.TargetPath = WScript.ScriptFullName
    oShellLink.IconLocation = "sendmail.dll,-2001"
    oShellLink.Save
    MsgBox strMsg, vbokonly,"Installed"
End Sub

Sub RunUninstall
    if objFSO.fileexists(strShortcutFileName) then objFSO.deletefile(strShortcutFileName)
    MsgBox strMsg, vbokonly,"Uninstalled"
End Sub 
```

这是当前脚本（批处理）：

```
Title GFI Fax Maker
Echo off
cls
:Start
Set Name=_
Set SurName=_
Set Company=_
Set Department=_

Set /P Name=Type the Recipient's First name: 
Set /P SurName=Type the Recipient's Last name: 
Set /P Company=Type the Recipient's Company name: 
:: Set /P Department=Type the Recipient's Department name: 
Set /P Number=Type the Recipient's Fax Number: 

cls
:Verify
Echo ________________
Echo Recipient's First Name: %Name%
Echo Recipient's Last Name: %SurName%
Echo Recipient's Company Name: %Company%
:: Echo Recipient's Department Name: %Department%
Echo Recipient's Fax Number: %Number%
Set /P Correct=Is this correct? 
If %Correct%==n GOTO Start
If %Correct%==N GOTO Start

if %Number:~0,2%==91 "C:\Program Files (x86)\Microsoft Office\Office14\OUTLOOK.EXE" /c ipm.note /m %Name%.%Company%.%SurName%.%Department%.%Number%@hspsfax.com
if %Number:~0,2%==91 GOTO END

if %Number:~0,1%==1 "C:\Program Files (x86)\Microsoft Office\Office14\OUTLOOK.EXE" /c ipm.note /m %Name%.%Company%.%SurName%.%Department%.9%Number%@hspsfax.com
if %Number:~0,1%==1 GOTO End

"C:\Program Files (x86)\Microsoft Office\Office14\OUTLOOK.EXE" /c ipm.note /m %Name: =%.%Company: =_%.%SurName: =%.%Department: =_%.91%Number: =%@hspsfax.com

:End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:39:49.720

您可以使用`InputBox`where 用户输入收件人邮件地址。

```
strRecipientEMail = InputBox("Enter recipient address", "SendLinkToMail", "...") 
```

# mysql - 检索空结果为 0 sql

> ID：15755835
> 
> 赞同：1
> 
> 时间：2013-04-02T04:02:03.080
> 
> 标签：mysql, sql

我试图拉出一个团队的输赢记录，在这种情况下是团队 1。团队可以玩多种格式，记录对这些进行相应的分组。它工作得很好，除非一支球队没有以某种格式打平（可能也是为了获胜，但我在数据库中没有任何不赢的球队），然后它拒绝获取该格式的任何数据. 我需要它为绘图返回一个零，从而显示该格式的其余结果。查询如下：

```
SELECT matches.format, count(id) as played, a.wins, b.draws, count(id)-a.wins-b.draws as loss
FROM matches 

INNER JOIN (SELECT format, count(id) as wins 
FROM matches 
WHERE winner=1
GROUP BY format) as a ON matches.format=a.format

INNER JOIN (SELECT format, count(id) as draws 
FROM matches 
WHERE hometeam=1 
AND winner=-1 
OR awayteam=1  
AND winner=-1) as b ON matches.format=b.format

WHERE matches.hometeam=1
OR matches.awayteam=1
GROUP BY format 
```

这返回

```
format played wins draws loss
  1      14     9   1     4 
```

但完全忽略了这支球队也打过6场“2”赛制，4胜2负，没有平局。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:11:14.117

我认为你问题的关键是`but with no draws`。听起来您应该使用 an`OUTER JOIN`而不是`INNER JOIN`：

```
SELECT matches.format, count(id) as played, coalesce(a.wins,0) wins, coalesce(b.draws,0), count(id)-coalesce(a.wins,0)-coalesce(b.draws,0) as loss
FROM matches 
    LEFT JOIN (
        SELECT format, count(id) as wins 
        FROM matches 
        WHERE winner=1
        GROUP BY format
    ) as a ON matches.format=a.format
    LEFT JOIN (
        SELECT format, count(id) as draws 
        FROM matches 
        WHERE hometeam=1 
            AND winner=-1 
            OR awayteam=1  
            AND winner=-1
    ) as b ON matches.format=b.format
WHERE matches.hometeam=1
    OR matches.awayteam=1
GROUP BY matches.format 
```

小心使用 AND... OR - 您可能需要括号...

现在进行优化：

```
SELECT format, 
    count(id) played,
    sum(if(winner=1,1,0)) wins,
    sum(if(winner=-1,1,0)) draw,
    count(id)-sum(if(winner=1,1,0))-sum(if(winner=-1,1,0)) loss
FROM matches
WHERE hometeam=1 OR awayteam=1
GROUP BY format 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:12:20.200

```
 SELECT matches.format,
         count(id) as played,
         count(case when winner=1 then 1 end) wins,
         ifnull(count(case when winner=-1 then 1 end),0) draw,
         count(case when winner not in (1,-1) then 1 else 0 end) loss
    FROM matches
   WHERE matches.hometeam=1 OR matches.awayteam=1
GROUP BY format 
```

# multithreading - 从 SQL Server 中的 VB CLR UDF 调用非托管 C DLL

> ID：15755837
> 
> 赞同：0
> 
> 时间：2013-04-02T04:02:17.637
> 
> 标签：multithreading, sql-server-2008, clr, user-defined-functions, unmanaged

我正在尝试将实现模糊匹配的现有 C DLL（显然是非托管的）集成到 SQL Server 作为用户定义函数（UDF）。UDF 是通过 CLR VB 项目实现的。近 20 年来，我一直使用这个 C 代码对文本文件进行字符串匹配，没有任何问题。它已在几乎所有平台上编译，从未崩溃或给出错误结果。曾经。到目前为止。

此 UDF 在 SQL SELECT 语句中的用法如下所示：

```
SELECT Field FROM Table WHERE xudf_fuzzy('doppler effect', Field) = 1; 
```

**xudf_fuzzy(Param1, Param2) = 1**是魔法发生的地方。Param1 是我们试图匹配的线索词，而 Param2 是要测试的表中的字段。如果匹配在一定数量的错误内成功，则 UDF 返回 1，否则返回 0。到目前为止一切顺利。

下面是定义模糊 UDF 并调用 C DLL 的 CLR 代码：

```
Imports System
Imports System.Data
Imports System.Data.SqlClient
Imports System.Data.SqlTypes
Imports System.Text
Imports Microsoft.SqlServer.Server
Imports System.Runtime.InteropServices

Partial Public Class fuzzy

<DllImport("C:\Users\Administrator\Desktop\fuzzy64.dll", _
           CallingConvention:=CallingConvention.StdCall)> _
Public Shared Function setClue(ByRef clue As String, ByVal misses As Integer) As       Integer
End Function

<DllImport("C:\Users\Administrator\Desktop\fuzzy64.dll", _
           CallingConvention:=CallingConvention.StdCall)> _
Public Shared Function srchString(ByRef text1 As String) As Integer
End Function

<Microsoft.SqlServer.Server.SqlFunction()> Public Shared Function _
        xudf_fuzzy(ByVal strSearchClue As SqlString, ByVal strStringtoSearch As SqlString) As Long

    Dim intMiss As Integer = 0
    Dim intRet As Integer
    Static Dim sClue As String = ""

    xudf_fuzzy = 0

    ' we only need to set the clue whenever it changes '
    If (sClue <> strSearchClue.ToString) Then
        sClue = strSearchClue.ToString
        intMiss = (Len(sClue) \ 4) + 1
        intRet = setClue(sClue, intMiss)
    End If

    ' return the fuzzy match result (0 or 1) '
    xudf_fuzzy = srchString(strStringtoSearch.ToString)

End Function 
```

这是被调用的 C 代码的前端。STRCT 是所有全局存储所在的位置。

```
fuzzy.h
typedef struct {
short int INVRT, AND, LOWER, COMPL, Misses;
long int num_of_matched;
int D_length;
unsigned long int endposition, D_endpos;
unsigned long int Init1, NOERRM;
unsigned long int Mask[SYMMAX];
unsigned long int Init[MaxError];
unsigned long int Bit[WORDSIZE+1];
unsigned char prevpat[MaxDelimit];
unsigned char _buffer[Max_record+Max_record+256];
unsigned char _myPatt[MAXPAT];
} SRCH_STRUCT;

fuzzy.c
#include <sys/types.h>
#include <fcntl.h>
#include <stdio.h>
#include <string.h>
#include <wtypes.h>
#include <time.h>
#include "fuzzy.h"

// call exports
__declspec(dllexport) int CALLBACK setClue(char**, int*);
__declspec(dllexport) int CALLBACK srchString(char**);

SRCH_STRUCT STRCT = { 0 };
int cluePrep(unsigned char []);
int srchMin(unsigned char [], int);

BOOL APIENTRY DllMain( HANDLE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved )
{
    switch (ul_reason_for_call)
    {
        case DLL_PROCESS_ATTACH:
        case DLL_THREAD_ATTACH:
        case DLL_THREAD_DETACH:
        case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
}

int CALLBACK setClue(char **pattern, int *misses)
{
    int i;
    unsigned char *p;

    // code to do initialization stuff, set flags etc. etc.    
        STRCT.Misses = (int)misses;
        p = &(STRCT._myPatt[2]);
        STRCT._myPatt[0] = '\n';
        STRCT._myPatt[1] = SEPCHAR;
        strcpy((char *)p, *pattern);
        //blah blah
    // end setup stuff

    i = cluePrep(STRCT._myPatt);

    return 0;
}

int CALLBACK srchString(char **textstr)
{
    int res,i = Max_record;
    unsigned char c;
    char *textPtr = *textstr;

    STRCT.matched = 0;

    //clean out any non alphanumeric characters while we load the field to be tested
    while ((c = *textPtr++)) if ( isalpha(c) || isdigit(c) || c == ' ' ) STRCT._buffer[i++] = c;
    STRCT._buffer[i] = 0;

    // do the search
    res =  srchMin(STRCT.pattern, STRCT.Misses);

    if (res < 0) return res;

    return STRCT.matched;

} 
```

它所链接的运行时库是：多线程 DLL (/MD)

调用约定是：__cdecl (/Gd)

这就是它变得奇怪的地方。如果我有一个常规的 dot-net 应用程序（代码未显示），它从测试数据库中获取整个记录集，并一次遍历所有记录，调用此 DLL 来调用模糊匹配，我每次都能得到正确的结果时间。

如果我使用上面显示的 SQL 语句对测试数据库使用上面显示的 CLR UDF 应用程序，同时只使用*一个*线程（单核 VM），我每次都会得到正确的结果。

在多核机器上以 CLR UDF 模式使用此 DLL 时，某些结果是错误的。结果总是有点偏离，但并不始终如一。

292 条记录应该在前两个测试用例中匹配并执行。

在 CLR UDF 多线程情况下，结果将返回 273、284、298、290 等。

C DLL 中的所有存储都在字符数组中。没有使用内存分配。我的理解也是，如果 SQL Server 在多线程模式下使用这个 CLR 应用程序，那么线程都被分配了自己的数据空间。

在将字符串发送到 C DLL 之前，是否需要以某种方式“固定”字符串？我只是不知道如何进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:52:33.120

固定不是您的问题，您的 C 代码不是线程安全的。C 代码使用全局变量`STRCT`。该全局变量只有一个实例将在所有线程之间共享。每个线程都会`STRCT`用不同的值更新变量，这会导致错误的结果。

您将不得不重构 C 代码，使其不依赖于全局变量的共享状态。

您可以通过声明[__declspec(thread)](http://msdn.microsoft.com/en-us/library/9w1sdazb%28v=vs.80%29.aspx)`STRCT`来使其工作，这将使用[线程本地存储](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686749%28v=vs.85%29.aspx)，因此每个线程都可以获得自己的变量副本。但是，这对于每个非托管线程都是唯一的，并且不能保证托管线程和非托管线程之间存在[一对一的映射](http://msdn.microsoft.com/en-us/library/74169f59.aspx)。

更好的解决方案是完全摆脱共享状态。您可以通过分配一个`SRCH_STRUCT`in`setClue`并返回该指针来做到这一点。然后每次调用`srchString`都会将该`SRCH_STRUCT`指针作为参数。VB.Net 代码只需要像对待 IntPtr 一样对待这个结构，它不需要知道任何关于`SRCH_STRUCT`. 请注意，您还需要向 DLL 添加一个新函数来释放分配的`SRCH_STRUCT`.

# wpf - 如何使用 MVVM 以编程方式将列添加到 wpf 数据网格？

> ID：15755838
> 
> 赞同：6
> 
> 时间：2013-04-02T04:02:23.590
> 
> 标签：wpf, mvvm, datagrid

我想在带有 MVVM 应用程序的 WPF 的用户界面中创建一个数据透视表。所以列数不​​是静态的。

我发现我可以以编程方式从文件后面的代码中添加列（如下面的代码片段所示）。

```
myDataGrid.Columns.Add(column ); 
```

但我**不想**使用文件后面的代码。我想用 MVVM 做这个（从**视图模型**）。谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T06:17:40.983

我找到了解决方案。

答案很**简单**。

1.  `DataTable`在视图模型中定义 a
2.  定义列（在我的情况下，我必须`programmatically`在`foreach`循环中定义列）
3.  添加行
4.  `ItemsSource`然后为数据网格的属性绑定 DataTable 。（确保`AutoGeneratedColumns=True`）

我的`View Model`

```
private DataTable sizeQuantityTable;

public DataTable SizeQuantityTable
    {
        get
        {
            return sizeQuantityTable;
        }
        set
        {
            sizeQuantityTable = value;
            NotifyPropertyChanged("SizeQuantityTable");
        }
    } 
```

我`dummy data`在构造函数中分配了

```
public MainViewModel()
{
        this.SizeQuantityTable = new DataTable();

        DataColumn sizeQuantityColumn = new DataColumn();
        sizeQuantityColumn.ColumnName = "Size Quantity";
        this.SizeQuantityTable.Columns.Add(sizeQuantityColumn);

        DataColumn sColumn = new DataColumn();
        sColumn.ColumnName = "S";
        this.SizeQuantityTable.Columns.Add(sColumn);

        DataColumn mColumn = new DataColumn();
        mColumn.ColumnName = "M";
        this.SizeQuantityTable.Columns.Add(mColumn);

        DataRow row1 = this.SizeQuantityTable.NewRow();
        row1[sizeQuantityColumn] = "Blue";
        row1[sColumn] = "12";
        row1[mColumn] = "15";
        this.SizeQuantityTable.Rows.Add(row1);

        DataRow row2 = this.SizeQuantityTable.NewRow();
        row2[sizeQuantityColumn] = "Red";
        row2[sColumn] = "18";
        row2[mColumn] = "21";
        this.SizeQuantityTable.Rows.Add(row2);

        DataRow row3 = this.SizeQuantityTable.NewRow();
        row3[sizeQuantityColumn] = "Green";
        row3[sColumn] = "24";
        row3[mColumn] = "27";
        this.SizeQuantityTable.Rows.Add(row3);

        DataRow row4 = this.SizeQuantityTable.NewRow();
        row4[sizeQuantityColumn] = "Yellow";
        row4[sColumn] = "30";
        row4[mColumn] = "33";
        this.SizeQuantityTable.Rows.Add(row4);
    } 
```

我的`view`

```
<Window x:Class="Pivot.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Pivot.ViewModels"
        Title="MainWindow" Height="350" Width="525">
    <Grid>

        <Grid.DataContext>
            <vm:MainViewModel />
        </Grid.DataContext>

        <DataGrid 
            ItemsSource="{Binding SizeQuantityTable}"
            AutoGenerateColumns="True"
            />

    </Grid>
</Window> 
```

# java - 使用多个参数和三个函数从 Java 调用 C++

> ID：15755842
> 
> 赞同：0
> 
> 时间：2013-04-02T04:02:47.333
> 
> 标签：java, c++, dll, jna

我有一个以前编写的 C++ 代码，我想在上面放置一个 Java 用户界面。此 C++ 代码执行三种不同的算法，这些算法需要一些用户定义的数据类型作为输入，并在相同的用户定义参数中传递它们的输出。我需要一个用 JNA（Java Native Access）编写的示例代码，它有两个特点：首先，在一个 dll 中调用多个具有不同名称的函数，其次，为输入和输出传递参数。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:57:00.840

这是一个指导示例，可帮助您入门。在此代码段中，Java2Win64 是包含要执行的本机代码的 DLL。函数 functionMaryam() 将 1 个参数作为 int 并返回一个 int。易于扩展任何数据类型。

```
public class JnaExampleMaryam {

// ------------------------------------------
// Java2Win.class
// ------------------------------------------
public interface Java2Win extends Library {
    Java2Win call = (Java2Win) Native.loadLibrary("Java2Win64", Java2Win.class);

    int functionMaryam(int i);
}

// ------------------------------------------

// ------------------------------------------
// Test
// ------------------------------------------
public static void main(final String args[]) throws Exception {
    final File file = new File("rootToDLL", "Java2Win64.dll");
    LibraryLoader.loadLibrary(file);

    int result = Java2Win.call.functionMaryam(42);

}
// ------------------------------------------
} 
```

# google-app-engine - 检索超过 1000 个结果 Google App Engine Search API

> ID：15755846
> 
> 赞同：0
> 
> 时间：2013-04-02T04:03:05.467
> 
> 标签：google-app-engine, full-text-search, google-search-api

我需要能够检索索引中可用的所有记录。好像1000是极限。还有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T07:27:03.437

在我的一个项目中，我也遇到了一些类似的问题，因此通过互联网进行了研究，并得到了一个想法，即我没有使用搜索 API，而是创建了一个解决方案。我所做的是我的表中只有一个属性需要基于模式的搜索。我也在这里分享我的代码。

**对象化实体类**

```
@Entity
public class NewsFeed {
@Id
@Index
private Long feedID;
private String title;
private Set<String> titleKeywords;

// getters and setter
} 
```

将关键字存储在同一个表中的逻辑。我已将实体的所有标题词拆分为关键字，并将它们存储在 Set Object 中。

```
NewsFeed newsFeed = new NewsFeed();
newsFeed.setTitle(title);
newsFeed.setTitleKeywords(getKeywordsSet(newsTitle));
//  save entity here 
```

从标题（要搜索的字段）中提取关键字的方法

```
public Set<String> getKeywordsSet(String title) {
    Set<String> keywords = new HashSet<String>();
    String titleNews = title.toLowerCase();
    String[] array = titleNews.split(" ");
    for (int i = 0; i < array.length; i++) {
        // replacing all special characters here
        String word = array[i].replaceAll("\\W", "");
        keywords.add(word);
    }
    return keywords;
} 
```

列出我们数据库中的所有提要，最后通过以下逻辑匹配要搜索的参数。

```
public List<NewsFeed> getFilterJsonArray(String param){
// Listing all the objects of entity
    List<NewsFeed> list = newsFeedDao.listOrderedFeeds();
    List<NewsFeed> matchedObject = new ArrayList<NewsFeed>();
    for (NewsFeed newsFeed : list) {

/**
* main logic for pattern matched keywords
**/
        if (isAnElementInSet(newsFeed.getTitleKeywords(), param.toLowerCase())) {
            matchedObject.add(newsFeed);
        }
    }
    return matchedObject;
}

public boolean isAnElementInSet(Set<String> keywords, String param) {
    String []params = param.split(" ");
    if (keywords.size() > 0) {
        for(String splittedParam : params){
            if (keywords.contains(splittedParam)) {
                return true;
            } else{
                for (String keyword : keywords) {
                    if(keyword.contains(splittedParam)){
                        return true;
                    }
                }
                return false;
            }
        }
        return true;
    }else{
        return false;
    }
} 
```

我知道这不是搜索事物的最佳解决方案，但这个解决方案对我来说非常有效。我只是在这里分享它，以便也改进这个逻辑。

# netty - 如何关闭和清理死（僵尸）连接？

> ID：15755850
> 
> 赞同：0
> 
> 时间：2013-04-02T04:03:33.133
> 
> 标签：netty

如果客户端意外断开连接（可能是由于某些网络问题），服务器可能不会注意到这一点。如果我们没有检测到并清理它，这将导致死连接，这会消耗服务器的一些资源。1\. netty 会自动检测并清理它吗？如果不是，如何处理这个问题？2\. 如果服务器端空闲，如何关闭连接？如果可以的话请提供一些Java代码，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:32:28.480

对于 2）（和 1），真的），看看 Netty 提供的[IdleStateHandler](http://netty.io/3.6/api/org/jboss/netty/handler/timeout/IdleStateHandler.html)。

# tomcat - nginx 和 tomcat（带有 memcached 会话管理器）配置上下文 cookies="false"

> ID：15755851
> 
> 赞同：1
> 
> 时间：2013-04-02T04:03:43.447
> 
> 标签：tomcat, cookies, nginx, jsessionid

我有一些带有memcached会话管理器的tomcat7，使用nginx代理tomcat，没关系。

但是现在，我们需要在 iphone safari 上付费，并通过带有 jsessionid 的 url 访问。所以将 cookies="false" 添加到 tomcat 上下文中。然后我们将失去会话非常访问（在 url 中带有 jsessionid）。但是，当使用 nginx 和一个 tomcat 服务器，或者直接访问 tomcat 服务器时，一切都很好。

为什么会发生？有没有人能解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:01:09.530

非常感谢马丁·格罗茨克。Tomcat日志很好。我在 msm 的日志中发现了一些东西。

Nginx 只代理一个配置为 cookies=“false” 的**tomcat**
， 第一次请求，msm 没有将会话备份到 memcached，
下一个请求在 url 中使用 jsessionid，在 tomcat 中找到会话，msm 现在备份会话。

如果 nginx 代理**了两个**配置为 cookies=“false” 的 tomcat，
第一次请求，nginx 代理到 TomcatA，登录成功，响应 sessionid(TomcatA)，但是 msm 没有将它备份到 memcached，
下一个请求，nginx 代理到 TomcatB sessionid(TomcatA) 在 url 中，tomcat 或 memcached 中没有 session，所以 TomcatB 创建一个新的 session，
第三个请求，使用 sessionid(TomcatB 的新 session) 到 TomcatA 的 nginx 代理。
因此，它始终保持并共享两个tomcat 之间的会话。

解决方法是删除tomcat中cookies=“false”的配置。

# ruby-on-rails - Rails 辅助模块中的实例变量存储在哪里？

> ID：15755852
> 
> 赞同：13
> 
> 时间：2013-04-02T04:03:44.603
> 
> 标签：ruby-on-rails, railstutorial.org

我正在关注的教程在子目录`app/helpers`中包含以下 SessionsHelper 模块，该模块被许多控制器和视图使用。但是第一次创建实例变量`current_user`时存储在哪里？存储它的对象的类是什么？

当控制器第一次调用该`current_user`方法时，`current_user`会创建实例变量。当视图然后调用该`current_user`方法时，`current_user`实例变量是如何存在的？`self`在渲染视图期间设置为控制器对象？

```
module SessionsHelper
  ...
  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end
  ...
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-25T13:42:41.500

这个答案大致说明了实例变量是如何在控制器和视图之间传递的：[Rails 实例变量是如何传递给视图的？](https://stackoverflow.com/questions/18855178/how-are-rails-instance-variables-passed-to-views)

所以基本上，如果@current_user 由控制器设置，则该实例变量（以及所有其他变量）将从您的控制器上下文传递到视图上下文。如果它没有被控制器设置，它将在视图第一次使用它时设置。

有关更多信息，请参阅另一个答案。这是一本好书。

> 粘贴自@mechanicalfish 答案：

```
def view_assigns
  hash = {}
  variables  = instance_variables
  variables -= protected_instance_variables
  variables -= DEFAULT_PROTECTED_INSTANCE_VARIABLES
  variables.each { |name| hash[name[1..-1]] = instance_variable_get(name) }
  hash
end 
```

将它们传递给视图（github）：

```
def view_context
  view_context_class.new(view_renderer, view_assigns, self)
end 
```

在视图中设置它们（github）：

```
def assign(new_assigns) # :nodoc:
  @_assigns = new_assigns.each { |key, value| instance_variable_set("@#{key}", value) }
end 
```

# objective-c - UIModalViewController 隐藏在 UIViewController 后面

> ID：15755858
> 
> 赞同：2
> 
> 时间：2013-04-02T04:04:00.800
> 
> 标签：objective-c, uiviewcontroller, uiimagepickercontroller, uiactionsheet, presentmodalviewcontroller

我正在使用滑动菜单，就像您在 Facebook 或 Path 应用程序中看到的那样。

在后面的菜单中，我希望允许用户使用相机或照片库添加图像。

我遇到的问题是主视图控制器，我滑动的那个，总是在顶部。

操作表显示得很好，但模式视图控制器被主视图控制器部分隐藏。

这是我的选择器代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _UIPicker = [[UIImagePickerController alloc] init];
    _UIPicker.delegate = self;
}

- (IBAction)profilePicButtonTapped
{  
    UIActionSheet * actionSheet = [[UIActionSheet alloc] initWithTitle:@"Set Up Your Profile Picture" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Camera", @"Photo Library", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackOpaque;
    [actionSheet showInView:_rearTableView];
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
        _UIPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        [self presentViewController:_UIPicker animated:YES completion:nil];
    }
    else if (buttonIndex == 1)
    {
        _UIPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        [self presentViewController:_UIPicker animated:YES completion:nil];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"Error" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
        [alert show];
    }
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage * selectedImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    _profileImageView.image = selectedImage;
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:23:29.630

解决它的一种快速方法是在您呈现选择器时隐藏主 ViewController，并在它被关闭后再次显示它。假设您有对主 ViewController 的引用，只需将其`view.hidden`属性设置为 YES。

处理它的另一种方法是从主 ViewController 而不是后菜单显示它。

# ios - 禁用图像 iOS 后面的按钮

> ID：15755864
> 
> 赞同：1
> 
> 时间：2013-04-02T04:04:31.217
> 
> 标签：ios, image, button

我正在开发一个应用程序，我在视觉上构建了界面，我在顶部有一个图像，覆盖了整个视图，包括下面的按钮，我遇到的问题是按钮仍然可以被点击，即使图像是覆盖它们。这是应该发生的，还是我错过了一些非常简单的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:08:26.663

将`userInteractionEnabled`图像的属性设置为`YES`，以便拦截所有触摸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:02:11.207

使用禁用按钮：[button setEnabled:false];

如果你不使用它，你也可以隐藏它 [button setHidden:true];

# php - 如何循环加入

> ID：15755866
> 
> 赞同：3
> 
> 时间：2013-04-02T04:04:43.013
> 
> 标签：php, mysql

我在图片中有这个表格数据。它基本上由地名和它在同一张表中**所属的其他地方组成。**该字段`belongs_to`是指`id`另一个地方的。

![在此处输入图像描述](https://i.stack.imgur.com/PuPqS.png)

这是我正在使用的查询：

```
 SELECT A.type,
                A.name_en AS name_A,
                B.name_en AS name_B,
                C.name_en AS name_C

                FROM address AS A
                LEFT JOIN address AS B ON A.belongs_to = B.id
                LEFT JOIN address AS C ON B.belongs_to = C.id 
                WHERE A.name_en LIKE '%".$_GET['name']."%'
                " 
```

当我输入“sy”时它工作正常：

```
[type] = city
[name_A] =sydney
[name_B] =NSW
[name_C] =australia 
```

然而，当我输入“ken”时，它让我：

```
[type] =suburb
[name_A] = kensington
[name_B] =sydney
[name_C] = NSW 
```

它想念澳大利亚。我想让它变得灵活，这样它就可以得到所有数据，直到`type_order`is`1`或`belongs_to`is所在的国家/地区名称`0`。我一直在尝试寻找循环技术，但找不到好的参考。告诉我如果您有其他建议来完成这项工作，或者您认为我的解决方案是正确的，请帮助我处理循环问题，或者向我推荐有关 MySQL 循环的详细参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:14:41.710

用户加入没有任何问题。你的情况基本上取决于你的`WHERE`情况。请提供表的结构，或者你可以试试这个：

```
SELECT A.type,
                A.name_en AS name_A,
                B.name_en AS name_B,
                C.name_en AS name_C

                FROM address AS A
                LEFT JOIN address AS B ON A.belongs_to = B.id
                LEFT JOIN address AS C ON B.belongs_to = C.id 
                WHERE A.name_en LIKE '%".$_GET['name']."%' or A.id=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:23:57.453

```
SELECT A.name_en AS name_A, NULL AS TYPE    

FROM tablename1 AS A
LEFT JOIN tablename1 AS B ON A.belongs_to = B.id                
WHERE A.name_en LIKE '%ken%' OR A.belongs_to = B.id OR A.belongs_to = 0

UNION ALL

SELECT NULL AS name_A, C.type
FROM tablename1 AS C
WHERE c.name_en LIKE '%ken%' 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:01:04.470

您选择保留链接数据的技术称为“邻接表”。一般来说，没有办法“循环”随机深度 AL。要查看从 'kensington' 到 'australia' 的项目，您需要再加入一个查询。您必须为每一行添加一个联接。

寻找替代技术，例如“嵌套列表”和“物化路径”。或者在 PHP 中使用循环来遍历邻接列表项。

# iphone - 在我的应用程序中选择要用作 UIViewController 背景的图像

> ID：15755874
> 
> 赞同：1
> 
> 时间：2013-04-02T04:05:58.250
> 
> 标签：iphone, ios, objective-c, uiimage, uiimagepickercontroller

当我的 iPhone 应用程序第一次运行时，它会要求您从 iPhone 库中选择一张图像作为整个应用程序的背景。以下是相关代码：

```
/*
 *   Responds when an image is selected (from browsing)
 */
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    [self dismissModalViewControllerAnimated:YES];
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage])
    {
        //Not really sure what to do here
        UIImage *image = [[UIImage alloc] initWithData:UIImageJPEGRepresentation([info objectForKey:UIImagePickerController], .2)];
    }
} 
```

我现在要保存此图像（或对此图像的引用），以便我可以在整个应用程序中使用它作为我的某些（60％）的背景`UIViewController`

```
self.view.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

**最好/最有效/最简单的方法是什么**。我想过将图像保存到其中`NSUserDefaults`，但这似乎不正确，因为`NSUserDefaults`它只应该用于小物体。我应该将其保存到磁盘吗？但是，我的应用程序在每次 segue 时都必须从磁盘读取数据会不会很慢？（如果这是正确的方法，我该怎么做？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:15:55.073

将您的图像存储在文档目录中以保存图像

```
- (void)saveImage:(UIImage *)image {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.png"];

    // Convert to Data
    NSData *imageData = UIImagePNGRepresentation(image);
    // write to file
    [imageData writeToFile:savedImagePath atomically:NO];
} 
```

要阅读图像使用以下

```
- (UIImage *)getImage {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.png"];
    UIImage *img = [UIImage imageWithContentsOfFile:getImagePath];
    return img;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:15:54.547

使用一个子类 UIViewController ，其中背景*始终*是这个选定的背景图像，您可以使用下面的@Dipen 的建议（以及对他 +1）保存它。

从字面上看，您的新视图控制器中唯一需要存在的是，在它的“ `viewDidLoad:`”方法中，您添加了一个“ `UIImageView`”子视图，设置为您保存为某些偏好的背景图像。

然后，您可以从新的“ `NosetrapViewController`”中继承进一步的视图控制器，这将自动拾取选定的背景图像。

# vbscript - objshell.regwrite 不起作用

> ID：15755876
> 
> 赞同：0
> 
> 时间：2013-04-02T04:06:15.960
> 
> 标签：vbscript

它适用于：

```
Set objShell = CreateObject("WScript.Shell")
objShell.RegWrite "HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer\NoFolderOptions", 1, "REG_DWORD"
Set objShell = Nothing 
```

但它不适用于：

```
Set objShell = CreateObject("WScript.Shell")
objShell.RegWrite "HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer\NoDrives", 3FFFFFF, "REG_DWORD"
Set objShell = Nothing 
```

对于第二个，它将有一个语句结束错误。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:02:18.117

你的答案就[在这里](http://support.microsoft.com/kb/931626)（阅读整个页面，还有 vbs 示例代码）。

**请注意**，只能将十进制值添加为字符串（如文章中所述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:43:23.563

您收到错误是因为`3FFFFF`它既不是有效的变量名，也不是十六进制数的有效表示法。尝试这个：

```
objShell.RegWrite "HKCU\...\NoDrives", &h3FFFFFF, "REG_DWORD" 
```

# javascript - HTML5 Canvas getImageData - 安全问题

> ID：15755879
> 
> 赞同：2
> 
> 时间：2013-04-02T04:06:38.263
> 
> 标签：javascript, html, html5-canvas, browser-security

我正在构建一个 Web 应用程序，它通过 FileReader API 读取图像，然后将其显示在 Canvas 上。之后，我在画布上调用 .getImageData 后，逐个像素地重新着色图像，如下所示：

```
// Color Image on Canvas
ctx = document.getElementById('my_canvas').getContext('2d');
var img_px = ctx.getImageData(0,0,canv_w,canv_h);
img_px = colorImage(img_px,red,green,blue);
ctx.putImageData(img_px,0,0); 
```

*colorImage()*是我编写的一个函数，它在给定相应的 RGB 颜色代码的情况下更改像素值，它确实有效。当我在本地加载图像时，上面的代码片段确实有效，但当我尝试从在线服务器（如公共 Dropbox 帐户）访问图像时则无效。Firefox 告诉我这是一个安全问题；有没有办法绕过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:10:27.823

我相信这是一个跨域资源共享 CORS（安全）问题。

请参阅[HTML5 Canvas getImageData 和同源策略](https://stackoverflow.com/questions/4672643/html5-canvas-getimagedata-and-same-origin-policy)

要点是，对来自外部域的图像的请求可以固有地提供用户的身份验证 cookie 等，从而允许您的 javascript 访问其可能受保护的图像和资产。虽然您可以通过 引用它们，`<img>`但 CORS 被建立为一种安全协议，以防止您以编程方式读取（并可能存储）像素数据。

自 2012 年 8 月中旬起，Dropbox API 支持 CORS。一旦用户正确进行身份验证，您就可以使用他们的 API 完成您想要的工作。

[https://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md](https://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md)

# sql - 如何“cancan” gem 处理深度嵌套资源的能力？

> ID：15755884
> 
> 赞同：1
> 
> 时间：2013-04-02T04:07:10.417
> 
> 标签：sql, ruby-on-rails, cancan

这是我的能力定义：

```
can :manage,Order,:store => {:business_district => {:district_manager_id => user.id}} 
```

当我通过以下方式加载资源时：

```
Order.accessible_by(current_ability) 
```

它生成如下 SQL：

```
SELECT COUNT(*) FROM `orders` INNER JOIN `stores` ON `stores`.`id` = `orders`.`store_id` INNER JOIN `business_districts` ON `business_districts`.`id` = `stores`.`business_district_id` WHERE (`stores`.`business_districts` = '---\n:district_manager_id: 37\n') 
```

除了“where”中的代码外，sql 看起来都很好。我不知道如何使它在这里工作是模型关系

```
1\. store belongs_to business_district
2\. order belongs_to store
3\. business_district has district_manager_id 
```

我想查看 business_district 中的所有订单

我在so中找到了一个关于这个的话题：[CanCan深度嵌套资源但是在cancan中使用块定义时，你不能使用accessible_by(current_ability)加载资源！你可以`Order.joins(:store => :business_district).where("district_manager_id = ?",current_user.id)`用来加载我想要的！cancan gem 有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T00:35:54.503

**更新（5 月 28 日）：** *添加深度嵌套资源功能的拉取请求包含在 1.6.10 版本中。GitHub 上还[修复了下面描述的 SQL 条件错误。](https://github.com/ryanb/cancan/pull/871)我相信它应该会进入下一个版本，因为它明显不匹配。*

* * *

也许你现在已经想通了，但是对于在 github 上搜索 CanCan 的问题页面之前可能会在这里停下来的任何其他人......

大约 2 个月前接受了一个拉取请求来解决这个问题。检查[https://github.com/ryanb/cancan/pull/806](https://github.com/ryanb/cancan/pull/806)。

从 CanCan 1.6.9 开始，这个变更集没有被合并，所以现在必须使用 master 分支。尽管如此，据我所知，变更集引入了另一个错误，即使在非嵌套情况下，它也无法定义 2 条件能力。例如，我发现以下（我正在使用您的模型进行命名......）失败：

```
can :manage, Order,:store => {:district_manager_id => user.id, :condition2 => true} 
```

而以下是可以的：

```
can :manage, Order,:store => {:district_manager_id => user.id } 
```

我还在 GitHub 问题页面上发布了关于此的内容。

# android - 在 pre-honey 上使用 objectanimator 的片段动画

> ID：15755886
> 
> 赞同：0
> 
> 时间：2013-04-02T04:07:22.740
> 
> 标签：android, animation, fragment, objectanimator

我想在我的应用程序上使用属性动画，而不是在片段上使用补间动画

现在，我在我的应用程序中使用 NineOldAndroids 进行正常的属性动画，并且效果很好。

但是，我找不到将此 NineOldAndroid 与支持片段集成的方法。

有没有办法在 pre-3.0 上使用属性动画为片段设置动画？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T05:10:51.483

我找到了这个[库](https://github.com/kedzie/Support_v4_NineOldAndroids#fragment)。

它将 Google 的支持库与 NineOldAndroid 集成在一起。

# android - 通过服务中的 logcat 跟踪另一个进程

> ID：15755887
> 
> 赞同：0
> 
> 时间：2013-04-02T04:07:30.683
> 
> 标签：android, service, jvm-hotspot

当有人连接到我的便携式 AP 热点/断开连接时，我正在尝试收听该事件。我试试这段代码

```
 Process p;
try
{
  p = Runtime.getRuntime().exec("logcat -s hostapd:I");
  BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
  String line;
  while ((line = br.readLine()) != null)
  {
    if (line.contains("AP-STA-CONNECTED") || line.contains("AP-STA-DISCONNECTED")) Log.e("mytag", line);
  }
}
catch (IOException e)
{
  // TODO Auto-generated catch block
  e.printStackTrace();
} 
```

它就像我想要的那样工作。但我不知道如何将它放入我的服务中以与我的活动并行运行。或者是否有其他方法可以识别何时有人连接或断开我的便携式 AP 热点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:20:30.980

除非您将其放在单独的线程上，否则服务不会与 Activity 并行运行。

如果您使用服务或不使用，则必须使用单独的线程来并行运行此代码。

在您的情况下，我相信最好使用[WiFiManager](http://developer.android.com/reference/android/net/wifi/WifiManager.html)来获取 SSID 信息。

```
WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
 if (wifiManager != null) {
     WifiInfo wifi = wifiManager.getConnectionInfo();
     if (wifi != null) {
        String ssid = wifi.getSSID();
 }           
} 
```

如果您的应用程序正在监视它连接到哪个 AP，请尝试使用以下意图的[广播接收器。](http://developer.android.com/reference/android/content/BroadcastReceiver.html)您可以通过代码或在 Android Manifest 中注册它。

```
ConnectivityManager.CONNECTIVITY_ACTION 
```

那么整个事情将如何运作？每当您的应用收到此连接更改广播时，您将在 BroadcastReceiver 中检查 AP 名称。

# r - 使用梯度下降法（R）时如何最小化每次迭代的步长？

> ID：15755890
> 
> 赞同：-1
> 
> 时间：2013-04-02T04:07:47.003
> 
> 标签：r, optimization, computer-science

我编写了一个 R 代码来使用下面的梯度下降法找到函数的最小值：

```
gradient.method <- function(f, grad, init, unit.fac=TRUE, interval=c(-7,10), tol=1e-11, max.iter = 35)
{
newpair <- init
oldpair <- newpair - 1
iter <- 0
while(iter < max.iter & sqrt(sum((newpair - oldpair)^2)) > tol){
iter <- iter + 1
oldpair <- newpair

#Set up the unit vector u
newstep <- if(unit.fac) grad(x)(oldpair)/sqrt(sum(grad(x)(oldpair)**2)) 

#Get minimum of f(x_0 - step_size*grad(x_0))
value <- function(step_size) oldpair - step_size*newstep 
min <- optimize(f(x)(value(step_size)),interval)

#Get new pair of vector x
newpair <- oldpair - min*newstep

}
list(minimum = newpair, value = f(x)(newpair), nsteps = iter)
} 
```

f 和 grad 的函数如下：

```
f1 <- function(x){
  n<-length(x)
    function(theta){
    -logLike<- 0.5*n*log(theta[2])-(1/(2*theta[2]))*sum((x-theta[1])**2)
    }
}

g1 <- function(x){
  n <- length(x)
  function(theta){
  grd1 <- -sum((x - theta[1])*theta[2])
  grd2 <- n/(theta[2]) - 0.5*sum(x - theta[1])
  }
} 
```

但是，我在测试代码时不断收到关于我的变量之一的错误：step_size。我应该如何纠正问题？谢谢。

```
res<-gradient.method(f=f1, grad=g1, init=c(100,100), max.iter=100)
Error in value(step_size) : object 'step_size' not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:10:07.063

错误消息很清楚，您正在尝试使用`step_size`尚未在任何地方定义的变量。问题源于您没有`optimize`正确使用函数这一事实，您应该给它命名您的函数的名称，该名称相对于它的第一个参数最小化。从`optimize`（使用`?optimize`）的帮助页面：

> F
> 
> 要优化的功能。根据最大值，函数在其第一个参数上最小化或最大化。

所以你应该这样使用`optimize`：

```
value <- function(step_size) oldpair - step_size*newstep 
fn<-function(step_size) f(x)(value(step_size))
min <- optimize(fn,interval) 
```

此外，该变量`x`未在任何地方定义，您的函数看起来有点奇怪，例如这不是有效的代码`f1`：`g1`

```
 -logLike<- 0.5*n*log(theta[2])-(1/(2*theta[2]))*sum((x-theta[1])**2) 
```

您正在尝试将某些内容分配给名为 的变量`-logLike`，但不能`-`在变量名中使用。

编辑：

检查`optimize`函数返回的文档：

> 价值
> 
> 包含最小值（或最大值）和目标的列表，给出最小值（或最大值）的位置和该点的函数值。

因此，您的变量`min`包含两个元素，尽管您可能只需要代码下一行中的最小值。

# ios - nsarray 有很多对象

> ID：15755897
> 
> 赞同：-1
> 
> 时间：2013-04-02T04:08:55.317
> 
> 标签：ios, objective-c, xcode

我是新来的。请帮助，如何缩短：

```
effects = [[NSArray alloc] initWithObjects:@"Back1.jpg", @"Back2.jpg", @"Back3.jpg", @"Back4.jpg", @"Back5.jpg", @"Back6.jpg", @"Back7.jpg", @"Back8.jpg",@"Back9.jpg",nil]; 
```

谢谢。我想要类似@"back%i.jpg", int++

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T04:11:39.900

也许你想要类似的东西：

```
NSMutableArray * effects = [[NSMutableArray alloc] init];
if(effects)
{
   for( NSInteger index = 0; index < 10; index++)
   {
      [effects addObject: [NSString stringWithFormat: @"Back%i.jpg", index];
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:11:55.243

你熟悉 for 循环吗？

```
int whatever = 100;
NSMutableArray * effectsTmp = [NSMutableArray new];
for (int i = 0; i < whatever; i++) {
     [effects addObject:[NSString stringWithFormat:@"Back%i.jpg", i]];
}
NSArray * effects = effectsTmp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:45:50.193

根据您需要的数组大小，您可以利用 NSArray 非常简单的子类化。您只需要覆盖两个方法，`count`并且`objectAtIndex:`.

```
@interface StringArray : NSArray
@end

@implementation StringArray

-(NSUInteger)count {
    return 9;
}

-(id)objectAtIndex:(NSUInteger)index {
    return [NSString stringWithFormat:@"Back%ld.jpg", (long)(index +1)];
}

@end 
```

要使用它，只需实例化它：

```
NSArray *stringArray = [[StringArray alloc] init];
NSLog(@"Array: %@", stringArray); 
```

与通过 for 循环构建数组相比，此解决方案使用了几行额外的代码，但从好的方面来说，它应该为大型数组使用更少的内存。

像这样的数组在某些情况下可以用作数组控制器的模型对象。

我不知道它如何经得起代码审查，有些人可能会发现硬编码的大小和格式字符串可能需要一些工作。

# emacs - 如何在 emacs 中交换单词（通过相互替换）

> ID：15755901
> 
> 赞同：1
> 
> 时间：2013-04-02T04:09:14.223
> 
> 标签：emacs

假设我有一些文字，例如：

```
First one is good, so I used first one.Second one is bad, so I drop it. 
```

我想切换“第一”和“第二”，就像替换字符串一样，将大写字母与原始单词保持相同的大小写。

是否有任何内置函数来处理这种情况？

编辑：让我进一步解释问题。如果我使用通常的替换字符串两次，有时会导致不需要的结果。在上面的示例中，如果使用替换字符串第一个 RET 第二个 RET，然后替换字符串第二个 RET 第一个 RET，它将输出：第一个很好。所以我用了第一个。第一个不好，所以我放弃了。在某些情况下，这也是一个问题，例如“clientFolder=>serverFolder and server=> client”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:54:23.933

@huaiyuan 在这里回答了同样的问题：

[如何同时交换或替换代码中的多个字符串？](https://stackoverflow.com/questions/2588277/how-can-i-swap-or-replace-multiple-strings-in-code-at-the-same-time)

他的代码允许您输入任意对列表来进行并行替换。

顺便说一句，如果您想阅读一些很酷的 lisp 代码，请单击 @huaiyuan 并阅读他的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T04:53:54.700

这是 Mickey 的 Mastering Emacs 博客提供的一个绝妙技巧（请参阅“交换元素”标题下的[http://www.masteringemacs.org/articles/2013/01/25/evaluating-lisp-forms-regular-expressions/ ）](http://www.masteringemacs.org/articles/2013/01/25/evaluating-lisp-forms-regular-expressions/)

`C-M-%` `\(first\)\|second` `RET` `\,(if \1 "second" "first")` `RET`

**编辑：**这是一个 elisp 版本：

```
(defun my-swap-text (a b)
  "Swap two pieces of text wherever they appear, using `query-replace-regexp'."
  (interactive "sSwap: \nswith: ")
  (let ((use-region (and transient-mark-mode mark-active)))
    (query-replace-regexp
     (rx (or (group (eval a)) (eval b)))
     (quote (replace-eval-replacement replace-quote (if (match-string 1) b a)))
     nil
     (when use-region (region-beginning))
     (when use-region (region-end))))) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T04:11:59.643

你谷歌搜索过这个吗？

[http://kb.iu.edu/data/abdp.html](http://kb.iu.edu/data/abdp.html)

# android - 广播接收器仅在设备重启 android 时工作

> ID：15755904
> 
> 赞同：0
> 
> 时间：2013-04-02T04:09:41.827
> 
> 标签：android, broadcastreceiver, intentfilter, bootcompleted

嗨，我正在开发 android 应用程序，我在其中定义了一个广播接收器。我正在从我的活动中调用接收器。我正在定义这样的广播接收器：

```
 public class MyScheduleReceiver extends BroadcastReceiver {

   private static final long REPEAT_TIME = 100 * 5;

  @Override
  public void onReceive(Context context, Intent intent) {
      Log.i("RRRRRRRRRRRRRRRRRRRRRRRR", "on receive");

  }
} 
```

在android清单文件中，我定义如下：

```
 <receiver android:name="abc.xyz.MyScheduleReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver> 
```

在主要活动中，我这样称呼我的广播接收器：

```
//in activity oncreate 
startService(new Intent(this, MyScheduleReceiver.class)); 
```

我的问题是，当调用启动服务时，它实际上并没有启动我的服务。但是当我重新启动设备时，它会启动我的服务，因为我给了意图过滤器“BOOT_COMPLETED”。当我调用启动服务时，我实际上想做的是我的服务必须启动，

难道我做错了什么。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:18:53.897

实际发生的情况是，您可以在启动活动时盯着广播接收器，并且该广播接收器开始侦听 BOOT_COMPLEATED 是否发生。当发生这种情况时，它涉及到 onreceive 。如果您需要在后台启动一个进程，您可以使用广播接收器的服务。BroadcastRecievers 用于监听一些事件的发生。通过这个，它会帮助你

[服务](http://developer.android.com/guide/components/services.html)

[广播接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:16:19.207

你要么感到困惑，要么你的问题措辞不好。您的清单（以及 Android 通常如何工作）中的内容是，当 BOOT_COMPLETED 发生时，它将调用您定义的 BroadcastReceiver。它不会自动启动活动或服务。如果你想这样做，你需要在接收者的 onReceive 函数中调用 startService 或 startActivity 。

您不启动 BroadcastReceivers。您启动服务，这些服务是长期后台进程。您注册 BroadcastReceivers 以了解特殊事件（如 BOOT_COMPLETED）。当您注册的事件之一发生时，它将创建该类的一个实例并调用其 onReceive。

希望这可以解决问题。如果没有，我建议你重读一些关于服务和广播接收器的教程，你似乎把两者混淆了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T04:17:10.377

startService 调用只会启动一个服务。这里的 MyScheduleReceiver 是一个广播接收器。要触发广播接收器，您通常必须发送广播而不是调用 startService。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T04:22:49.733

要开始广播，您需要发送广播而不是`startService()`

添加这个而不是`startService(new Intent(this, MyScheduleReceiver.class));`

```
Intent intent = new Intent();
intent.setAction("pakagename.MyScheduleReceiver");
sendBroadcast(intent); 
```

我希望它有所帮助。

# .net - 使用 DotNetOpenAuth（和谷歌应用程序）创建单点登录真正需要什么？

> ID：15755906
> 
> 赞同：3
> 
> 时间：2013-04-02T04:09:59.350
> 
> 标签：.net, openid, dotnetopenauth, single-sign-on

在过去的 5 天里，我一直在阅读[DotNetOpenAuth](http://www.dotnetopenauth.net/)，但由于某种原因，它对我来说并不容易......

我在活动目录中有一组本地用户。当用户访问内部站点时，我的门户网站应用程序已经对用户进行了身份验证。我现在想添加 OpenID 支持，以允许用户单击其门户页面上的链接以重定向并将其登录到支持 OpenID 的远程站点，例如 Google Apps。

在我的阅读中，似乎有两种方法可以完成这项任务。一种是设置本地 OpenID 提供程序。我还需要创建哪些其他部分才能使其正常工作？我需要创建中继合作伙伴吗？

另一种可能的方法（我认为）是对谷歌应用程序进行身份验证并让谷歌成为 OpenID 提供者。由于我的门户应用程序已经创建了谷歌应用程序帐户，如果它是一个选项，这将起作用......

无论哪种方式，我需要为这些选项创建哪些组件？另外，如果我创建了一个`OpenID`提供商，我是否需要将服务器暴露在互联网上才能完成交易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:22:47.150

ASP.NET MVC 很好地支持了这个功能，你可以按照[这个示例](http://www.asp.net/mvc/overview/getting-started/using-oauth-providers-with-mvc)来构建你自己的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:15:40.380

您可能想考虑直接使用 OpenID 的 Google 客户端库。一旦一切正常，您就可以访问 Google 提供的任何服务，并且可以使用客户端库来访问它们，而无需编写大量代码并维护自己的库。

Google+ 快速入门示例涵盖了使用 OAuth v2 和 Google API 的最佳实践，应该可以帮助您快速入门。从这里开始：

[https://developers.google.com/+/quickstart/csharp](https://developers.google.com/+/quickstart/csharp)

那里的代码将使您使用 OAuth 和配置的 API 客户端。如果您想添加对其他 API 客户端 (Google Apps) 的支持，那么您将包含该 API 客户端并像示例中一样访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:46:24.380

我想您要问的是您能否使用 openid 让您的站点将用户登录到远程站点？

如果远程站点支持联合，则可以。有很多方法可以实现这一点，它们通常需要您和远程站点之间的合作。

既然您说远程站点支持 OpenId，您所需要做的就是将用户发送到那里。然后，他们使用其 Google Apps id 使用 OpenId 登录。你不需要做任何事情。

# javascript - 布尔运算符如何工作 ||

> ID：15755907
> 
> 赞同：3
> 
> 时间：2013-04-02T04:10:04.387
> 
> 标签：javascript, boolean, operators

我通常使用这段代码来查看函数的参数是否未定义

```
var = (typeof var != "undefined")? var : "othervalue"; 
```

但是，其他使用此布尔运算符

```
var = var || "othervalue"; 
```

但是，我已经看到，如果检查值和布尔值 false 参数没有正确完成。

```
// assuming it is false
var = var || "othervalue"; // will be "OTHERVALUE"!!! 
```

我需要知道在这种情况下这个运算符到底是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:11:18.163

它返回终止条件的最后一个表达式。它与检查 不同`typeof arg == "undefined"`，因为左侧的任何错误值都会跳转到 RHS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:23:44.067

|| 如果第一个表达式错误，运算符将返回最后一个表达式：

```
var test  = first || "second";
// error will be raised, because first variable is not defined

var first;
var test  = first || "second";
// test   = "second", because first is falsely

var first = "first";
var test  = first || "second";
// test   = "first" 
```

我总是在 typeof 表达式中使用三元运算符，因为忘记定义一些变量是很常见的事情：

```
var test  = 'undefined' != typeof(first) && first ? first : "second";
// test   = first if first is defined and true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:13:44.093

我相信这是第一个真实的 perl 样式选择（下面的伪代码）

```
eat_breakfast = null
eat_dinner = null
eat_lunch = "eating lunch"

myVal = eat_breakfast || eat_dinner || eat_lunch
print myVal 
```

会打印“吃午饭”

它将 myVal 设置为第一个非空/非假实体。

# django - 使用 django 模板变量作为翡翠 href id 参考的正确语法是什么？

> ID：15755912
> 
> 赞同：1
> 
> 时间：2013-04-02T04:10:53.057
> 
> 标签：django, pug

我正在尝试使用 django 模板`for`循环生成导航表。href 目标包含一个 django 变量。django模板是jade格式写的。

如果我在 django 模板中使用 HTML 格式，我会使用：

```
<a href="#{{group.name}}"> {{group.name}} </a> 
```

但我找不到使用翡翠格式的正确语法。

我所拥有的是：

```
table.generic
  tbody
    tr
      th Jump to a Group
    {% for group in groups %}
    tr
      td
        a(href!='#{{group.name}}') {{group.name}}
    {% endfor %} 
```

但是锚在 HTML 中呈现为：

```
<a +{group.name.__str__()+'}'="" href="">Registration</a> 
```

“注册”是 group.name 的值。

删除`!`导致 django 渲染错误的原因。

我试图插入一个反斜杠: `a(href!='#\{{group.name}}') {{group.name}}`，但这会将反斜杠完整呈现为：

```
<a href="#\Registration">Registration</a> 
```

建议？

**编辑：**作为一个糟糕的解决方法，我添加了一个“磅”方法来返回带有`#`前缀的组名：

```
def pound(self): 
    return unicode("#" + self.name) 
```

现在我可以在翡翠模板中引用{{group.pound}}：

```
a(href!='{{group.pound}}') {{group.name}} 
```

也许更好的方法名称是 group.name_as_id_tag ....

* * *

## 已解决：将 django 模板变量格式化为玉变量

根据@user1737909 的最后建议，我将建议扩展为尝试：

```
a(href='##{group.name}') {{group.name}} 
```

关键是将双卷曲 django 变量格式化`{{}}`为 pound-single-curly Jade 变量`#{}`。不要`!`在符号之前包含`=`符号，这样变量*就会*由翡翠评估，这将插入它从 django 获得的值。

我希望我能找到一个指向编码风格参考页面的链接以包含在此处。但如果我有一个，我一开始就不会问这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:41:29.787

根据@user1737909 的最后建议，我将建议扩展为尝试：

```
a(href='##{group.name}') {{group.name}} 
```

关键是将双卷曲 django 变量格式化`{{}}`为 pound-single-curly Jade 变量`#{}`。不要`!`在符号之前包含`=`符号，这样变量就会由翡翠评估，这将插入它从 django 获得的值。

OP 已更新以反映此解决方案。

# python - 无法运行播放通过 cx_Freeze 编译的 OGG 文件的 Pygame 脚本

> ID：15755921
> 
> 赞同：1
> 
> 时间：2013-04-02T04:11:34.170
> 
> 标签：python, python-3.x, pygame, cx-freeze, python-3.3

当我编译以下脚本时：

```
# play.py

import os, re
import pygame.mixer

pygame.mixer.init(11025)
pygame.mixer.music.load('song.ogg')
pygame.mixer.music.play(-1)

os.system("PAUSE") 
```

使用以下*setup.py*：

```
from cx_Freeze import setup, Executable
exe = Executable(
script="play.py",
)

setup(
    executables = [exe]
    ) 
```

通过：

```
python setup.py build 
```

执行*play.exe*给我以下错误：

```
Traceback (most recent call last):
  File "C:\Python33\lib\site-packages\cx_Freeze\initscripts\Console3.py", line 2
7, in <module>
    exec(code, m.__dict__)
  File "play.py", line 7, in <module>
pygame.error: Couldn't open 'song.ogg' 
```

该脚本在编译之前运行良好，是的，我确实将*song.ogg*放在了*exe*的目录中。顺便说一下*song.ogg*工作正常，我已经检查过了。有任何想法吗？

PS如果我把它*改成song.wav*，它工作得很好，但是WAV文件太大了，我无法使用。MP3 也不能正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:24:29.463

通过[Process Explorer](http://technet.microsoft.com/en-gb/sysinternals/bb896653.aspx)，我发现我需要将*Python33\Lib\site-packages\pygame中的**libogg.dll*、*libvorbis.dll*和*libvorbisfile.dll*复制到我的冻结程序目录中。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:26:19.243

计算机无法打开 song.ogg 文件，因为 cx_freeze 未在其编译中包含该歌曲。您应该尝试将歌曲文件包含到`setup.py`脚本中。使用`setup.py`如下脚本。

```
from cx_Freeze import setup, Executable

exe=Executable(
     script="play.py",
     base="Win32Gui",
     )
includefiles=[song.ogg]
includes=[]
excludes=[]
packages=[]
setup(

     version = "0.0",
     description = "Description",
     author = "Name",
     name = "Play",
     options = {'build_exe': {'excludes':excludes,'packages':packages,'include_files':includefiles}},
     executables = [exe]
     ) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-07-09T06:48:55.977

扩展您的答案，我为 mac 用户找到了此解决方案（假设您使用[Homebrew](http://brew.sh/)安装 pygame）：

```
 brew install libogg
    brew install libvorbis
    brew install sdl_mixer --with-libvorbis 
```

如果您收到一条消息“警告：sol_mixer-1.2.12 已安装”。运行第三条命令后，将其替换为以下内容：

```
 brew reinstall sdl_mixer --with-libvorbis 
```

供参考：[无法在 Mac 上使用 pygame 打开声音文件](https://www.reddit.com/r/pygame/comments/4267j7/cant_open_sound_files_using_pygame_on_a_mac/)*

# javascript - 如何在javascript中传递变量

> ID：15755927
> 
> 赞同：-1
> 
> 时间：2013-04-02T04:11:53.163
> 
> 标签：javascript

基本上我需要传入数据变量，但它不起作用

```
var data = 10

jQuery('#soundHandle').volumizer({passithere:[10,.0001]}) 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:13:00.160

```
var myValue = 10;

jQuery('#soundHandle').volumizer({data:[myValue,.0001]}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:16:21.340

你`var data = 10`目前毫无意义。（它也应该有一个`;`结束）。

当您使用对象文字表示法时，`{data: []}`将只使用字符串设置一个键`'data'`。如果您真的打算设置任何内容的键，则`data`需要执行以下操作：

```
passToVolumizer = {};
passToVolumizer[data] = [10, 0.0001];
jQuery('#soundHandle').volumizer(passToVolumizer); 
```

但我怀疑你真正想做的是：

```
jQuery('#soundHandle').volumizer({data: [data, 0.001]}); 
```

# templates - AngularJS Master Detail 示例 [带有 WEBAPI、AngularJS 的 ASP.NET 应用程序]

> ID：15755935
> 
> 赞同：0
> 
> 时间：2013-04-02T04:12:27.373
> 
> 标签：templates, angularjs, partial

需求就像主细节网格，加载时主显示为表格，在每个细节行编辑按钮上单击，需要在模态窗口中打开细节编辑表单。根据 detail/productTypes 可能有不同的模板。例如 productType1 将显示几组字段（模板 1），依此类推。

拥有支持 REST 的 WEBAPI 并了解如何构建初始主表但不确定细节部分如何。
任何方向都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:56:03.470

您的 HTML/CSS 框架是否提供对话框机制？如果是这样，您将必须创建一个指令以将其包装在脚本周围以打开对话框。

在主网格行上，ng-click 将在控制器上设置一个标志。当此标志设置为 true 时，指令中的代码将打开对话框。在该对话框 div 中，您可以使用绑定到模板 url 的 ng-include（控制器变量将存储该 url）。

模板绑定到控制器范围内的子对象，并具有详细信息的字段。将标志设置为 false 将关闭对话框，您将更改主控制器。

# c - 为什么会出现分段错误？我正在使用 stat、mmap、nftw 和 memcmp 等

> ID：15755937
> 
> 赞同：1
> 
> 时间：2013-04-02T04:12:50.760
> 
> 标签：c, mmap, stat, memcmp, nftw

这是我的代码。我假设这与指针使用不当有关，或者我没有正确映射和取消映射我的内存。

谁能给我一些关于这个问题的见解？

```
#define _XOPEN_SOURCE 500
#include <stdio.h>
#include <stdlib.h> 
#include <sys/mman.h>
#include <ftw.h>
#include <sys/stat.h>
#include <string.h>

int size;
int map1, map2;
void *tar, *temp;

int callback(const char *filename,
             const struct stat *sb2,
             int filetype,
             struct FTW *ftw)
{           
    printf("test");
    if(sb2->st_size == sb1->st_size){
        temp = mmap(NULL, sb2->st_size, PROT_NONE, 0, map2, 0);
        int cmp = memcmp(tar, temp, sb2->st_size);
        printf("%d\n", cmp);
        if(cmp == 0){
            printf("%s\n", filename);
        }  
        if(munmap(temp,sb2->st_size) == -1){
            fprintf(stderr, "Error in unmapping in callback function");
            exit(EXIT_FAILURE);
        }  
    }  

    return 0;   //continue to walk the tree
}  

int main(int argc, char *argv[])
{
    //check for correct arguments
    if (argc == 1 || argc > 3) {
        fprintf(stderr, "Syntax: %s filename dirname\n", argv[0]);
        exit(EXIT_FAILURE);
    }  

    //use stat to get size of filename
    struct stat sb1;
    if(stat(argv[1],&sb1) != 0){
        fprintf(stderr, "Error in stat().");
        exit(EXIT_FAILURE);
    }
    size = sb1.st_size;

    //fd = mmap filename
    tar = mmap(NULL,sb1->st_size, PROT_WRITE, MAP_SHARED, map1, 0);
    if(tar == 0){
        fprintf(stderr, "Main() mmap failed");
        exit(EXIT_FAILURE);
    }  

    //walk through the directory with callback function
    nftw(argv[2], callback, 20, 0);

    // use munmap to clear fd
    if (munmap(tar,sb1->st_size) == -1) {
        fprintf(stderr, "Error in unmapping");
        exit(EXIT_FAILURE);
    }  
} 
```

**编辑**

我现在在使用 stat 函数之前声明我的 struct stat sb1 。之后，我再次收到分段错误。然后我注释掉我的 nftw() 调用并打印出 size 变量（它有一个合理的数字，所以我相信这是有效的）。新的错误是：

取消映射时出错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T04:15:47.603

您声明：

```
struct stat *sb1; 
```

你用：

```
stat(argv[1],sb1); 
```

你崩溃和烧毁是因为`sb1`它是一个空指针（因为变量是在文件范围内定义的，所以它被初始化为 0）。

您需要声明（在文件范围内）：

```
struct stat sb1; 
```

然后`main()`你可以使用：

```
if (stat(argv[1], &sb1) != 0)
    ...oops... 
```

您必须查看所有用途，`sb1`以修复从指针到对象的状态更改，在必要时添加，并在`&`必要时更改。`->``.`

### mmap() 示例

这是我编写的用于`mmap()`将文件映射到内存的函数的轻度编辑版本：

```
/* Map named file into memory and validate that it is a MSG file */
static int msg_mapfile(const char *file)
{
    int         fd;
    void       *vp;
    struct stat sb;

    if (file == 0)
        return(MSG_NOMSGFILE);
    if ((fd = open(file, O_RDONLY, 0)) < 0)
        return(MSG_OPENFAIL);
    if (fstat(fd, &sb) != 0)
    {
        close(fd);
        return(MSG_STATFAIL);
    }
    vp = mmap(0, sb.st_size, PROT_READ, MAP_PRIVATE, fd, 0);
    close(fd);
    if (vp == MAP_FAILED)
        return(MSG_MMAPFAIL); 
```

MSG_xxxx 常量是适用于它来自的程序的不同错误号。它只需要读取文件，因此`PROT_READ`; 我想你也可以接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:59:17.287

```
if (argc == 1 || argc > 3) {
    fprintf(stderr, "Syntax: %s filename dirname\n", argv[0]);
    exit(EXIT_FAILURE);
}

/* ... */

nftw(argv[2], callback, 20, 0); 
```

我看到 argv[2] 有可能为 NULL。也许你的意思是：

```
if (argc != 3) {
    fprintf(stderr, "Syntax: %s filename dirname\n", argv[0]);
    exit(EXIT_FAILURE);
} 
```

你在看哪本书？

# php - 使用多维数组中的重复值对数组进行分组

> ID：15755940
> 
> 赞同：0
> 
> 时间：2013-04-02T04:13:00.370
> 
> 标签：php, arrays, loops, multidimensional-array

我有从 mysql 数据库查询的这种数组格式。我查询的这个数据有一些重复，所以我删除了重复。结果查询以数组格式显示在下面

```
[0] => a
[1] => b

[2] => Array
    (
        [ch] => a
        [op] => 1
        [in] => 2012-12-20 09:28:53
    )

[3] => Array
    (
        [ch] => b
        [op] => 2
        [in] => 2012-12-20 19:44:10
    )

[4] => Array
    (
        [ch] => a
        [op] => 1000
        [in] => 2012-12-23 18:21:40
    )

[5] => Array
    (
        [ch] => b
        [op] => 1000
        [in] => 2012-12-23 18:26:16
    )

[6] => Array
    (
        [ch] => a
        [op] => 1000
        [in] => 2012-12-24 12:10:55
    ) 
```

我如何使用其中一个值作为键来输出这种数组。

```
[a] => array(
[op] => 1000
[in] => 2012-12-24 12:10:55
      ),
Array
(
[op] => 1000
[in] => 2012-12-23 18:21:40
    )
[b]=> Array
    (
        [op] => 1000
        [in] => 2012-12-23 18:26:16
    ) 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:33:31.033

```
simply use array_push function,first define a blank array and grt value in it using array_push
eg.
$final_arr=array();
data=mysql_fetch_assoc($query);
array_push($final_arr,$data); 
```

# space - 在 html 格式的 gmail 上查看时图像之间的空间

> ID：15755942
> 
> 赞同：0
> 
> 时间：2013-04-02T04:13:06.600
> 
> 标签：space, html-table

我一直在尝试创建一个 html 电子邮件。在 gmail 上查看时，它会显示图像之间的空格。我已经尝试了所有可以在互联网上找到的方法，但没有奏效。任何帮助，将不胜感激。下面是相同的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>#</title>

<style>
    table {border-collapse:collapse;}
</style>

</head>
<body>
<table width="600" cellpadding="0" cellspacing="0" align="center" border="0">
  <tr bgcolor="#FFFFFF"><td align="center"> <font size="1" face="Arial" color="#666666">If you are unable to see this message <a href="#" target="_blank">Click Here </a></font></td></tr>
 </table>
<table cellpadding="0" cellspacing="0" style="margin:0; padding:0; border:none;" align="center" width="600" border="0">
  <tr><td><img src="images/bg-1.jpg" alt="Call: 9212612255" border="0" style="display:block; margin:0; padding:0; border:none; vertical-align:top;"/></td></tr>
   <tr><td><img src="images/bg-2.jpg" alt="We support all Microsoft windows desktop operating system all software and hardware, Networking peripherals and internet are also supported" border="0" style="display:block; margin:0; padding:0; border:none; vertical-align:top;"/></td></tr>
   <tr><td><img src="images/bg-3.jpg" border="0" alt="Computer Support By Microsoft Certified Engineers" style="display:block; margin:0; padding:0; border:none; vertical-align:top;"/></td></tr>
    <tr><td><img src="images/bg-4.jpg" border="0" alt="Support available for any desktop or laptop Branded or Non-Branded" style="display:block; margin:0; padding:0; border:none; vertical-align:top;"/></td></tr>
   <tr><td><a href="http://www.codeslab.com" target="_blank" style="border:none; text-decoration:none"><img src="images/bg-5.jpg" border="0" alt="Visit Our Website" style="display:block; margin:0; padding:0; border:none; vertical-align:top;"/></a></td></tr>
     <tr><td><img src="images/bg-6.jpg" border="0" alt="For more details mail us at info@codeslab.com" style="display:block; margin:0; padding:0; border:none; vertical-align:top;"/></td></tr>
   <tr><td><img src="images/bg-7.jpg" border="0" alt="Computer Support By Microsoft Certified Engineers" style="display:block; margin:0; padding:0; border:none; vertical-align:top;"/></td></tr>
</table>
<table cellpadding="0" cellspacing="0" align="center" width="600" border="0" style="margin:0; padding:0; border:none;">
    <tr>
       <td align="center">
           <font size="1" face="Arial" color="#666666">To unsubscribe mailing list, click <a href="http://codeslab.com/contact-us.php" target="_blank">here</a></font>
       </td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:15:38.263

`<img>`使用 CSS 设置所有标签`display: block`来解决此 Gmail 显示问题是一种常见的 eDM 技术。另外，删除`vertical-align`CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:16:26.813

这是一个很好的 HTML 电子邮件支持指南：

[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

如果您将`img`元素设置为，`display: block;`则该`vertical-align`属性不起作用。因此，请尝试`display: block`仅从图像中删除。

另外，请记住，一旦您对此进行更改以便它在 Gmail 中运行，它可能会在 Outlook 或 Yahoo! 中中断。或Hotmail等。所以，彻底测试。

# javascript - 使用 Javascript 读取表头字段值

> ID：15755947
> 
> 赞同：0
> 
> 时间：2013-04-02T04:13:18.563
> 
> 标签：javascript, datagrid, html-table, double-click, dojox.grid.datagrid

我有一个网格。在双击网格时，我需要获取表格的字段值..

网格代码：

```
<div class="claro" id="sdsfs" name="dataGrid" onclick="setWidgetproperty(this.id,'xy','inner__sdsfs')" ondblclick="editDataGridResponse(this.id)" onmouseup="setDocStyle(this.id)" style="height: 200px; left: 58px; position: absolute; top: 51px; width: 950px;">
     <table class="claro" dojotype="dojox.grid.DataGrid" id="inner__sdsfs" rowselector="10px" style="height: 95%; width: 95%;">
          <thead>
               <tr>
                    <th field="Column1" width="100px">
                         Column1
                    </th>
                    <th field="Column2" width="100px">
                         Column2
                    </th>
                    <th field="Column3" width="100px">
                         Column3
                    </th>
                    <th field="Column4" width="100px">
                         Column4
                    </th>
                    <th field="Column5" width="100px">
                         Column5
                    </th>
               </tr>
          </thead>
     </table>
     <input id="hidden__sdsfs" name="dataGrid" style="display:none;" type="hidden">
</div> 
```

我尝试了以下功能。但它不工作。

```
 editDataGridResponse():

function editDataGridResponse(_sgridID){
    var tableID = document.getElementById("inner__"+_sgridID);
    for(var i=0; i<tableID.rows[0].length; i++){
                    alert(tableID.rows[0].field);
                }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:18:37.177

尝试

```
function editDataGridResponse(_sgridID){
    var tableID = document.getElementById("inner__"+_sgridID);
    for(var i=0; i<tableID.rows[0].cells.length; i++){
         alert(tableID.rows[0].cells[i].innerHTML);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:26:48.233

尝试这个

```
function editDataGridResponse(_sgridID){
    var tableID = document.getElementById("inner__"+_sgridID);
    if (tableID)
    {
        for (var j= 0; j < tableID.rows.length; j++)
        {
            for(var i=0; i<tableID.rows[j].cells.length; i++){
                        alert(tableID.rows[j].cells[i].field);
                    }
        }
    }
    else
      alert("Table Id " + "inner__"+_sgridID + " Wrong");
  } 
```

# android - 如何使任何视图背景透明？

> ID：15755953
> 
> 赞同：12
> 
> 时间：2013-04-02T04:14:16.417
> 
> 标签：android

的属性`RelativeLayout android:background="@android:color/transparent"`不起作用。我只是想让它的背景透明？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T04:15:10.853

尝试这个：

`android:background="@null"`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-02T04:27:37.037

你也可以像这样在你的java文件中设置它：

```
 view.setBackgroundColor(Color.TRANSPARENT); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-02T04:25:22.773

试试这个作为颜色代码

```
android:background="#00000000" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-24T09:44:07.983

为您的布局集

```
android:background="#00000000" 
```

# 00 - 红色

00 - 绿色 00 - 蓝色 00 - 不透明度/Alpha....指定透明度

例如。:- #FF000050 会给你 50% 透明度的红色

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T04:15:54.913

尝试这个

```
android:background="#0000" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-24T09:51:30.743

刚遇到同样的情况。您可以将此主题用于您的活动：

```
@android:style/Theme.Translucent 
```

然后设置视图背景颜色

```
android:background="@android:color/transparent" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-19T23:17:44.660

好吧，既然你说你在后台有一个活动，你应该为此使用一个片段。如果您使用的是片段，只需将 thr framelayout 设置为透明背景，或者根本不设置它，我认为这应该也可以，您的片段将位于其他布局之上。

如果你使用

```
getSupportFragmentManager().beginTransaction()
            .add(R.id.fragment_container, fragment).commit(); 
```

然后它只是将它添加到前一个之上，而不是像 .replace() 那样替换它。如果您希望一个活动位于另一个活动之上，那是不可能的，因为一次只能有一个活动处于活动状态。

# java - Java中枚举的命名：单数还是复数？

> ID：15755955
> 
> 赞同：221
> 
> 时间：2013-04-02T04:14:49.913
> 
> 标签：java, enums, naming-conventions

是否有关于如何命名 Java 枚举的“官方”建议？

```
enum Protocol { HTTP, HTTPS, FTP } 
```

或者

```
enum Protocols { HTTP, HTTPS, FTP } 
```

我知道在 .Net 世界中，建议使用单数，但表示位标志的枚举除外。只是好奇Java中是否有类似的东西。

一个似乎是.Net特有的相关问题：[枚举的单数还是复数？](https://stackoverflow.com/questions/1335959/singular-or-plural-for-enumerations)

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2013-04-02T04:20:14.440

Java 中的枚举（可能还有一般的枚举）应该是单数的。想法是您没有选择多个协议，而是选择值列表中可能选择的一个协议。

注意没有复数：[http ://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-08-08T07:26:45.180

同样，当您在数据库中定义表名或在 Java 中定义类时，您对枚举使用单数，这也是最好的选择。看看你将如何使用它。

让我们写一个例子：

```
public enum Day {
SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY
}

class Appointment {
private Day day;

public void setDay(Day day) {
    this.day = day;
}
} 
```

在单数形式中，您可以清楚地看到 day 属性的意图。"day" 表示该约会将在一周中的哪一天举行。否则，该方法的签名将是 setDay(Days day) 并且肯定会有很多人想知道约会是否会在一天以上发生。

如果您在一家 48 小时轮班的公司工作，您可以尝试定义如下内容：

```
public enum Days {
MONDAY_TUESDAY, WEDNESDAY_THURSDAY, FRIDAY_SATURDAY
} 
```

这样你就可以设定你要去工作的日子。但它仍然看起来很奇怪，还有一个更好的选择，就是使用单数形式：

```
public enum Shift {
MONDAY_TUESDAY, WEDNESDAY_THURSDAY, FRIDAY_SATURDAY
} 
```

现在你真的在展示枚举的含义。通常在任何领域中，您都会发现对枚举使用单数是最好的选择，因为枚举中的每个常量只是一个元素。

您还提到了.NET。.NET 中的“标志”枚举仅意味着当您期望该枚举作为参数时，您真正得到的是该枚举的元素列表（存储为整数）。

```
// Define an Enum with FlagsAttribute.
[FlagsAttribute] 
enum MultiHue : short
{
    Black = 0,
    Red = 1,
    Green = 2,
    Blue = 4
};

public void setMultiHue(MultiHue hues); 
```

你可以在 Java 中做同样的事情，但枚举仍然是单数：

```
public enum Hue {
BLACK, RED, GREEN, BLUE;
private final Integer hue;

Hue() {
    this.hue = 1 << this.ordinal();
}

public Integer toFlag() {
    return this.hue;
}
}

public class MultiHue {
private Integer hues = 0;

public void addHue(Hue hue) {
    this.hues |= hue.toFlag();
}

public boolean hasHue(Hue hue) {
    return (this.hues & hue.toFlag()) != 0;
}
} 
```

使用 Java 更容易和更清晰（尽管它使用更多内存）就是使用 List。

# jquery - 用于 attr 函数的 jquery 条件运算符

> ID：15755965
> 
> 赞同：0
> 
> 时间：2013-04-02T04:15:49.127
> 
> 标签：jquery, ternary-operator

```
$("<button>")
    .addClass("radio")
    .addClass(this._getValue(lbl) ? "checked" : "")
    .attr(this._getDisableProp(lbl) ? ("disabled", "disabled") : "")
    .prop(this._getDisableProp(lbl) ? ("disabled", true) : ("disabled", false)); 
```

在上面的代码中，我试图添加`attr`并且`prop`仅当我的函数返回 true 时。我做了同样的`addClass`事情并且它有效，但它不适用于`attr`and `prop`。

请问有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:36:15.263

您不能基于三元运算符选择多个函数参数。您只能选择一个。所以做类似的事情：

```
$("button")
         .addClass("radio")
         .addClass(this._getValue(lbl) ? "checked" : "")
         .attr("disabled" , this._getDisableProp(lbl) ? "disabled" : "")
         .prop("disabled", this._getDisableProp(lbl) ? true : false); 
```

但是，我建议仅使用该属性，因为设置为“”的“禁用”属性仍将禁用该元素（无论如何都会被属性覆盖）：

```
$("button")
         .addClass("radio")
         .addClass(this._getValue(lbl) ? "checked" : "")
         .prop("disabled", this._getDisableProp(lbl) ? true : false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:17:38.890

做这样的事情：

```
.prop("disabled", this._getDisableProp(lbl)) 
```

您不希望对整个事物使用三元运算符...只是值（根据条件会有所不同）

请注意，即使 disabled 属性为空值也会导致元素被禁用，这就是我们使用 prop 的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:22:40.397

你不能直接这样做，但你可以这样做：

```
var btn = document.createElement("button");
btn.className = "radio";
if( this._getValue(lbl)) btn.className += " checked";
if( this.getDisableProp(lbl)) btn.disabled = true; 
```

有时，多个步骤中的纯 JavaScript 比尝试一次性链接所有内容更容易；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T04:42:34.587

以你的风格，

```
 $("<button>")
        .addClass("radio")
        .addClass(this._getValue(lbl) ? "checked" : "") 
        .prop('disabled',this._getDisableProp(lbl)); 
```

更灵活的方法，

```
$("<button>")
    .addClass("radio")
    .addClass(function () {
        if(this._getValue(lbl)) return 'disabled';
     }) 
    .prop('disabled',function () {
        return this._getDisableProp(lbl) ;
     }); 
```

另外，你为什么同时使用`attr`和`prop`添加`disabled`属性。您应该只使用`prop`并且`disabled`不需要值。

# sql-server-2000 - 获取具有主键行数的所有表名

> ID：15755979
> 
> 赞同：0
> 
> 时间：2013-04-02T04:16:44.860
> 
> 标签：sql-server-2000

我有一个场景，我需要比较两台服务器之间的数据。

长话短说，我需要一个结果集，其输出如下

```
SchemaName|TableName|RowCount_PrimaryKey 
```

每当一个新学生加入时，就会创建一个独特的模式，比如说`Stu1200`，这个模式有 5 个表，比如

```
stu1200.class
stu1200.sub
stu1200.avg
stu1200.work
stu1200.blabla 
```

我们的数据库中有 500 名学生。所以 500 模式。我需要比较 500 名学生的所有作业表。

为此，我需要获取主键的计数，例如`StuID`. 所以我需要像工作表一样获取所有 500 个模式。

就像是

```
SchemaName  TableName   StuID_Count
stu1200      Work         70
Stu1201      Work         112
Stu1202      Work         9 
```

如何才能做到这一点？我有一个脚本可以计算表的行数，但它没用，我只需要基于主键的行数。

注意：使用 SQL Server 2000 :(

提前感谢您分享您的建议/经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:23:39.047

您的设计非常有问题，但这是一种以有效方式获得相对最新计数的方法。在 SQL Server 2005+ 中：

```
DECLARE @tablename SYSNAME;
SET @tablename = N'Work';

SELECT 
  SchemaName = OBJECT_SCHEMA_NAME([object_id]), 
  TableName = @tablename, 
  RowCount_PrimaryKey = SUM([rows])
FROM sys.partitions
  WHERE OBJECT_NAME([object_id]) = @tablename
  AND index_id IN (0,1)
  GROUP BY OBJECT_SCHEMA_NAME([object_id])
  ORDER BY SchemaName; 
```

刚刚注意到 SQL Server 2000。

```
DECLARE @tablename SYSNAME;
SET @tablename = N'Work';

SELECT
  SchemaName = u.name,
  TableName = @tablename,
  i.rows
FROM 
  sys.sysindexes AS i
INNER JOIN sys.sysobjects AS o
  ON i.id = o.id
INNER JOIN sys.sysusers AS u
  ON o.uid = u.uid
  WHERE i.indid IN (0,1)
  AND o.name = @tablename; 
```

# javascript - 在javascript中连接多个数组不是concat

> ID：15755980
> 
> 赞同：2
> 
> 时间：2013-04-02T04:16:51.910
> 
> 标签：javascript, arrays

我正在遍历 JSON 数据以提取日期并将它们放入数组中。以下代码是我在循环中的代码示例。

```
// get the JSON data
var foo = "2013-03-28";

// split foo into an array
var bar = foo.split('-');        // Output ["2013", "03", "08"] 

// putting array in necessary format
for (a in bar) {
    bar[a] = parseInt(arr[a]);   // Output [2013, 3, 8] 
} 
```

现在我有了我需要的数组，下次它循环时我想添加到一个更大的数组，如下所示

```
// Trying to add each new array to a bigger array
baz += bar

// Sample output I'm looking for
baz = [ [2013, 3, 8], [2013, 2, 12], [2013, 1, 22], ... ] 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T04:19:01.810

使用[push](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)将元素添加到数组的末尾：

```
baz.push(bar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:21:47.080

您的**var foo = "2013"-"03"-"28"**不是字符串。要在数组中添加元素，请使用 push 方法。

```
var foo = "2013-03-28";// This is a string 

// split foo into an array
var bar = foo.split('-');        // Output ["2013", "03", "08"] 

baz.push(bar); 
```

它也做同样的事情

例子 ：

```
var array = [];
for(var i=0;i<5;i++)
{
    var a = [2012,i,25];
    array.push(a);
    alert(array);
} 
```

[运行小提琴](http://jsfiddle.net/NNjGw/)

# c# - 在这种情况下如何使 Html.DisplayFor 工作？

> ID：15755984
> 
> 赞同：1
> 
> 时间：2013-04-02T04:17:18.563
> 
> 标签：c#, asp.net-mvc, entity-framework

我有这堂课：

```
 public class UserMessage
{
    public int UserMessageId { get; set; }

    [Required]
    [StringLength(50)]
    public string Name { get; set; }

    [Required]
    [EmailAddress]
    public string Email { get; set; }

    [Required]
    public string MessageType { get; set; }

    [Required]
    [StringLength(300)]
    [DataType(DataType.MultilineText)]
    public string Message { get; set; }

} 
```

在我看来，我有：

```
@model IEnumerable<Kekanto.Models.UserMessage>

@foreach (var message in Model)
{ 
@Html.DisplayFor(message)

} 
```

我想在视图中显示数据....我不知道在这种情况下该怎么做...我知道我可以制作 @Html.DisplayFor(message=>message.Message) 并为所有字段编写 Display 。 ..但我想知道我是否可以用一个命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:24:03.290

而不是使用`DisplayFor`你可以只使用`Display`

```
@foreach (var message in Model)
{ 
    Html.Display(message)

} 
```

但是，如果您只是显示数据，我可能会使用除显示以外的其他内容 Html.Raw()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:29:20.307

```
@{
   string str = "";
   foreach (var message in Model)
         { 
           str = str + message ;    
         } 
}
@Html.Raw(str) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:03:14.387

一些.net怎么样？

```
@string.Join(", ", Model.Select(T => T.Message)) 
```

# prolog - 正确的 SWI_HOME_DIR 值？

> ID：15755986
> 
> 赞同：0
> 
> 时间：2013-04-02T04:17:23.860
> 
> 标签：prolog, swi-prolog

我遇到了错误：

```
 "FATAL ERROR: Could not find system resources" 
```

然后我添加了以下代码：

```
 putenv("SWI_HOME_DIR=/usr/lib/swi-prolog"); 
```

我遇到了另一个问题：

```
 "$c_call_prolog...Undefined procedure" 
```

**（更多细节在这里）**

我运行了以下命令`Ubuntu 10.12`

```
 sudo apt-get install swi-prolog build-essential. 
```

我编写了一个简单的`C`程序来测试它，但无法从`prolog`. 假设我想与之交互`mortal.pl`，我编译：

```
swipl-ld -o mmm mortal.c mortal.pl 
```

没有错误，但就像我提到的那样。我没有得到我所期望的。

我获得了另一个代码，代码没有什么奇怪的。这次我遇到了第一个错误。似乎如果将 swi-prolog 设置为该目录，它就不会搜索我的谓词。

我应该在哪里和什么设置这个`SWI_HOME_DIR`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:01:42.970

（回顾）与

```
putenv("SWI_HOME_DIR=/usr/lib/swi-prolog"); 
```

我打了电话

```
mmm socrates 
```

我有

```
$c_call_prolog...Undefined procedure 
```

w/o putenv，返回相同的调用

```
FATAL ERROR: Could not find system resources 
```

我终于变了

```
PL_initialise(1, plav) 
```

其中 plav[0] = "凡人"; plav[1] = 空；到

```
PL_initialise(1, argv) 
```

我能够从

```
rval = PL_call_predicate(NULL, PL_Q_NORMAL, pred, h0); 
```

虽然这让我很困惑。那么 PL_initialise() 期望什么？...不是被称为谓词？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:04:54.463

没有解决方案。我最终安装了 ubuntu 12.10 64 位（以前是 32 位）。所有那些奇怪的行为都消失了。

# ios - iOS Facebook 好友列表 - 图片网址、用户 ID、姓名

> ID：15755987
> 
> 赞同：0
> 
> 时间：2013-04-02T04:17:26.823
> 
> 标签：ios, facebook, facebook-graph-api

在 iOS facebooks SDK 中，我想获取 facebook 用户 ID、朋友姓名和图像 URL（用户个人资料图片）。

**问题：**

1.  我使用了 FBFriendPickerViewController，它显示了朋友的名字，但是有没有办法可以获取图像 URL 和 facebook id。

2.  FBFriendPickerViewController 也是实际列出朋友列表的正确方法。或者我应该使用不同的 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T07:44:41.443

```
FBRequest* friendsRequest = [FBRequest requestForMyFriends];

[friendsRequest startWithCompletionHandler: ^(FBRequestConnection *connection,NSDictionary* result,NSError *error)
 {
     NSArray* friends = [result objectForKey:@"data"];

     for (NSDictionary<FBGraphUser>* friend in friends)
     {
         NSLog(@"friend id = %@", friend.id);
         NSLog(@"friend name = %@", friend.username);
         NSLog(@"friend pic url = %@", [NSString stringWithFormat:@"https://graph.facebook.com/%@/picture?", friend.id]);

     }
 }]; 
```

参考 -[如何在不打开 FBFriendPickerViewController iOS 的情况下获取好友列表](https://stackoverflow.com/questions/15709226/how-to-get-the-list-of-friend-without-opening-fbfriendpickerviewcontroller-ios)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:40:35.757

**[首先你从这个链接下载类，这个链接帮助你](https://github.com/reallylongaddress/iPhone-Facebook-Graph-API)**

```
//Need to declare
**@property (nonatomic, retain)**

 FbGraph *fbGraph;
 UserProfile *profil_obj;
 MBProgressHUD *HUD;

 -(IBAction)FacebookButtonPressed
{

   if([[NSUserDefaults standardUserDefaults] boolForKey:@"isLogin"]==NO)
    {
    }
   else
      {

    HUD=[MBProgressHUD showHUDAddedTo:self.view animated:YES];
    [HUD setLabelText:@"Loading Profile..."];

       }
   NSString *client_id = @"********";
   self.fbGraph = [[FbGraph alloc] initWithFbClientID:client_id];
  [fbGraph authenticateUserWithCallbackObject:self andSelector:@selector(fbGraphCallback:) 
                     andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins,user_birthday"];

} 
```

**第2步**

```
 -(void)post_wall{

   FbGraphResponse *fb_graph_response = [fbGraph doGraphGet:@"me/feed" withGetVars:nil];
    SBJSON *parser = [[SBJSON alloc] init];
    NSMutableDictionary *parsed_json = [parser objectWithString:fb_graph_response.htmlResponse error:nil];

     NSString *get_string = [NSString stringWithFormat:@"%@/picture", [parsed_json objectForKey:@"id"]];
    FbGraphResponse *fb_graph_response1 = [fbGraph doGraphGet:get_string withGetVars:nil];
NSLog(@"getMeimagePressed:  %@", fb_graph_response1.imageResponse);
    [parsed_json setObject:fb_graph_response1.imageResponse forKey:@"profileImage"];

  if([parsed_json count]>0)
     {
    profil_obj.userprofile_dic=parsed_json;

    if([[NSUserDefaults standardUserDefaults] boolForKey:@"isLogin"]==NO)
    {
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"isLogin"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }

}
else {
    [parser release];
    UIAlertView *ErrorAlrt = [[UIAlertView alloc]initWithTitle:@"Message" message:@"Please check your internet connection and try again.." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [ErrorAlrt show];
    [ErrorAlrt release];

}

} 
```

**第 3 步**

```
 - (void)fbGraphCallback:(id)sender {

if ( (fbGraph.accessToken == nil) || ([fbGraph.accessToken length] == 0) ) {

    UIAlertView *alertView = [[UIAlertView alloc] 
                              initWithTitle:@"FailMessage" 
                              message:@"You are Not Login to Facebook." 
                              delegate:self 
                              cancelButtonTitle:@"OK" 
                              otherButtonTitles:nil, 
                              nil];
    [alertView show];
    [alertView release];
    NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (NSHTTPCookie* cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {
        [cookies deleteCookie:cookie];
    }

} else {

    if([[NSUserDefaults standardUserDefaults] boolForKey:@"isLogin"]==NO)
    {

        profil_obj=[[UserProfile alloc] initWithNibName:@"UserProfile" bundle:nil];
        [self performSelector:@selector(post_wall)];
        [HUD hide:YES]; 
        [self presentModalViewController:profil_obj animated:YES];
        UIAlertView *alertView = [[UIAlertView alloc] 
                                  initWithTitle:@"SucessMessage" 
                                  message:@"You are Sucessfully Login to Facebook." 
                                  delegate:self 
                                  cancelButtonTitle:@"OK" 
                                  otherButtonTitles:nil, 
                                  nil];
        [alertView show];
        [alertView release];

    }
    else
    {

        profil_obj=[[UserProfile alloc] initWithNibName:@"UserProfile" bundle:nil];
        [self performSelector:@selector(post_wall)];
        [self presentModalViewController:profil_obj animated:YES];
        [HUD hide:YES]; 

    }

        }

 } 
```

# java - sax parser stringbuilder 只返回一行

> ID：15755991
> 
> 赞同：1
> 
> 时间：2013-04-02T04:18:39.717
> 
> 标签：java, xml-parsing, sax, saxparser, rss-reader

我尝试使用 StringBuilder 命名对象，但我仍然没有从描述标签中获取所有 CDATA。xml 位于[**Events-Ovations365：**](http://feeds.feedburner.com/Events-Ovations365)[](http://feeds.feedburner.com/Events-Ovations365)

 **基本上它只在一行上获取 CDATA：

img 是：[http ://www.ovations365.com/sites/ovations365.com/images/org/81/newtown_medium.jpg](http://www.ovations365.com/sites/ovations365.com/images/org/81/newtown_medium.jpg)

alt="Ocmulgee Heritage Trail 剪彩">

```
package com.example.ovations_proj;

import java.io.ByteArrayInputStream;
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import android.util.Log;

import com.example.ovations_proj.RssItem;

public class RssParseHandler extends DefaultHandler {

    private List<RssItem> rssItems;

    // Used to reference item while parsing
    private RssItem currentItem;

    // Parsing title indicator
    private boolean parsingTitle; 
    // Parsing link indicator
    private boolean parsingLink; 
    private boolean parsingDes;

    StringBuilder obj;

    public RssParseHandler() {
        rssItems = new ArrayList<RssItem>();
    }

    public List<RssItem> getItems() {
        return rssItems;
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        System.out.println("Start Element :" + qName);
        if ("item".equals(qName)) { //item
            currentItem = new RssItem();
        }else if ("description".equals(qName) ) { //description
            obj = new StringBuilder();
            parsingDes = true;
        }

    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
        System.out.println("End Element :" + qName);
        if ("item".equals(qName)) {
            rssItems.add(currentItem);//item
            currentItem = null;         
        } else if ("description".equals(qName)) {   //description           
            String theFullText = obj.toString();
            System.out.println("fulltext data:  "  + theFullText);
            parsingDes = false;         
        }
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        if (parsingTitle) {
            if (currentItem != null){
                currentItem.setTitle(new String(ch, start, length));                
            }
        } else if (parsingDes) {       
            if (currentItem != null && obj!=null ) {                                
                obj.append(ch, start, length);  
                parsingDes = false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:17:01.190

It's probably because you're not implementing the characters method correctly, see [Oracle's tutorial](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html):

> Parsers are not required to return any particular number of characters at one time. A parser can return anything from a single character at a time up to several thousand and still be a standard-conforming implementation. So if your application needs to process the characters it sees, it is wise to have the characters() method accumulate the characters in a java.lang.StringBuffer and operate on them only when you are sure that all of them have been found.

Your code is assuming you're getting the entire text for an element in one call, but that's not guaranteed. The characters method needs to accumulate the text found into a `StringBuffer` (or StringBuilder or other data structure), but the decisions on what to do with the accumulated text need to be somewhere else, such as in the `endElement` method. It looks like you are setting a flag prematurely in the characters method and causing the rest of the text to be lost.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:27:53.733

这是对我有用的代码，因为它被注释掉了。我的 parsingDes 标志只导致了一个追加。

```
@Override
public void characters(char[] ch, int start, int length) throws SAXException {
    if (parsingTitle) {
        if (currentItem != null){
            currentItem.setTitle(new String(ch, start, length));                
        }
    } else if (parsingLink) { 
        if (currentItem != null) {
            currentItem.setLink(new String(ch, start, length));
            parsingLink = false;
        }
    } else if (parsingDes) {       
        if (currentItem != null){// && obj!=null ) {
            obj.append(ch, start, length);
            //parsingDes = false;
        }
    } 
```**

# javascript - 在javascript中更改背景图像大小

> ID：15755992
> 
> 赞同：5
> 
> 时间：2013-04-02T04:18:41.320
> 
> 标签：javascript, html, css

我一直在尝试使用基本的 CSS 在网站上放置重复的背景图片

```
background-image: url('url_here');
background-attachment: fixed;
background-repeat: repeat; 
```

但是，我希望能够使用 javascript 在刷新时更改图像的大小。CSS有这个功能

```
background-size: 300px; 
```

但不幸的是，COM 样式对象没有 - 请参阅[此处](http://www.w3schools.com/jsref/dom_obj_style.asp#background)了解它可以为背景做什么。这给我留下了一个选择：使用重复的 HTML 图像，然后我可以使用 COM 样式对象对其进行编辑。

所以，归结起来，我的问题是：有没有办法重复不是背景图像的 HTML 图像？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T04:46:38.917

实际上，您可以像这样影响 javascript 中的背景大小：

```
document.getElementById("el_id").style.backgroundSize = "100px 100px"; 
```

看看这个小提琴：http: [//jsfiddle.net/Lph2W/](http://jsfiddle.net/Lph2W/)。CSS 将背景图像大小设置为 200px X 200px，然后 JS 将其更新为 100px X 100px。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-16T03:09:25.563

这对我有用，我希望这对其他人有帮助。

```
var el = document.getElementById("notification");
el.style.background = 'url(images/Noti.png) no-repeat center center';
el.style.backgroundSize="100% 100%"; 
```

如果您觉得这很有用，请不要忘记投票 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-16T05:37:32.237

似乎使用：

```
style.backgroundSize = 300px; 
```

代替：

```
style.background-size = 300px; 
```

解决了这个问题，但我也想指出一个速记版本：

```
style.background = "url('url_here') repeat fixed /300px"; 
```

只要记住将背景大小保持在最后，就好像它在中间添加它似乎打破了。

# c# - 在 asp.net 中将数据绑定到 Telerik 数据网格

> ID：15755996
> 
> 赞同：2
> 
> 时间：2013-04-02T04:19:03.383
> 
> 标签：c#, asp.net, datagrid, telerik

我有下面的代码，我将数据库中的数据绑定到 Telerik 数据网格“gridCommon”。

```
gridCommon.DataSource = DbContext.MTO_General_Commons.ToList(); 
```

在我的 aspx 中，

```
 <telerik:RadGrid ID="gridCommon" runat="server" AllowPaging="True" AllowSorting="True"
        AutoGenerateColumns="False" ShowStatusBar="True" CellSpacing="0" GridLines="None"
        Width="470px" OnNeedDataSource="gridCommon_dataRebind" OnInsertCommand="gridCommonInsert"
        OnUpdateCommand="gridCommonUpdate" OnDeleteCommand="gridCommonDelete">
        <MasterTableView DataKeyNames="CommonID" CommandItemDisplay="Top">
            <CommandItemSettings ExportToPdfText="Export to PDF"></CommandItemSettings>
            <RowIndicatorColumn Visible="True" FilterControlAltText="Filter RowIndicator column">
            </RowIndicatorColumn>
            <ExpandCollapseColumn Visible="True" FilterControlAltText="Filter ExpandColumn column">
            </ExpandCollapseColumn>
            <Columns>
                <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Edit" UniqueName="EditCommandColmun">
                </telerik:GridButtonColumn>
                <telerik:GridBoundColumn DataField="Name" FilterControlAltText="Filter Name column"
                    HeaderText="Name" UniqueName="Name">
                </telerik:GridBoundColumn>
                <telerik:GridButtonColumn ConfirmText="Are you sure to delete ?" ConfirmDialogType="RadWindow"
                    ConfirmTitle="Delete" ButtonType="ImageButton" CommandName="Delete">
                </telerik:GridButtonColumn>
            </Columns>
        </MasterTableView>
        <FilterMenu EnableImageSprites="False">
        </FilterMenu>
    </telerik:RadGrid> 
```

但是gridArea没有显示数据，我想知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:21:29.487

```
gridCommon.DataSource = DbContext.MTO_General_Commons.ToList();
gridCommon.DataBind(); 
```

# ios - 适用于 IOS 的 Google Maps SDK，地图被阻止，并获得“超出最大可能坐标”

> ID：15755997
> 
> 赞同：2
> 
> 时间：2013-04-02T04:19:06.387
> 
> 标签：ios, google-maps-sdk-ios

SDK版本：1.1.0.2080

在 iOS 6 上

地图中大约有 10~50 个标记，并通过用户操作用一些相同或不同的标记刷新。

每次刷新标记时，地图将 fitBounds 动画和**[map clear]**。

当刷新太多次（总共刷新大约 1000 多个标记）时，我进入 `Maximum possible coords (10000) exceeded: 32768`控制台，所有东西都被阻止了。

在 GMSMapView.h 中，文档`clear`为：

> /**
> 
> *清除已添加到地图的所有标记，包括标记，
> 
> *折线和地面覆盖。这不会清除可见的位置点
> 
> * 或重置当前的 mapType。
> 
> */
> 
> - （无效）清除；

这是我的刷新功能：

```
- (void)reloadMarkers:(NSMutableArray *)items fitbounds:(BOOL)fitbounds withVisibleRect:(CGRect)visibleRect
{
    [_map clear];
    if ([items count] == 0) {
        return;
    }
    if (fitbounds) {
        [self fitBounds:items withVisibleRect:visibleRect];
    }

    for (NSDictionary *item in items) {
        GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
        options.position = CLLocationCoordinate2DMake([[item valueForKey:@"lat"] doubleValue], [[item valueForKey:@"lng"] doubleValue]);
        options.title = [item valueForKey:@"name"];
        options.userData = item;
        UIImage *img = [UIImage imageNamed:[setting valueForKey:[item valueForKey:@"icon"]]];
        options.icon = img;

        [_map addMarkerWithOptions:options];
    }
} 
```

我会欣赏有关如何解决的任何反馈/经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:20:58.130

清除屏幕上不可见的所有标记，然后你会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:14:26.840

似乎它可能是 SDK 中的错误，您可能会在这里提出问题：

[https://code.google.com/p/gmaps-api-issues/issues/entry?template=Maps%20SDK%20for%20iOS%20-%20Bug](https://code.google.com/p/gmaps-api-issues/issues/entry?template=Maps%20SDK%20for%20iOS%20-%20Bug)

与此同时，也许您可​​以通过重用之前添加的标记（即更新它们的位置、标题等）来解决这个问题，而不是删除旧标记并添加新标记。