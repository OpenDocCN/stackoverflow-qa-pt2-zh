# StackOverflow 问答 12663000-12663999

# java - 在泛型类型类中调用方法

> ID：12663010
> 
> 赞同：0
> 
> 时间：2012-09-30T16:41:31.660
> 
> 标签：java, generics

假设我们有 2 个类 A，B：

```
class A extends SomeClass {
   public String getProp() {
      return "propA";
   }
}

class B extends SomeOtherClass{
   private String propB;

   public B setProp(String value) {
      propB = value;
      return this;
   }

   public String getProp() {
      return propB;
   }
} 
```

并假设我们有另一个名为 X 的类，而这个类 X 有一个方法 someMethod 可以引用这些类中的任何一个，有没有一种方法可以在这个方法中使用泛型根据具有的对象调用 getProp()被通过了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:44:11.507

不使用泛型。

您可以为这些具有 getProp() 方法的类定义一个公共*接口。*使用它的方法应该接受接口的一个实例，并且可以调用`getProp()`接口上的方法，这将由你传入的具体类实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:43:43.213

泛型用于编译时的类型安全，而不是在运行时实现多态性。所以我不认为你问的是可能的。

在您的场景中，您应该考虑创建一个接口。像这样的东西：

```
public interface PropInf{
  String getProp();
} 
```

然后你必须在你的两个类中实现这个接口。使用这个接口的引用变量，就可以实现多态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T16:46:38.643

定义`interface`如下：

```
interface StringPropProvider {
  String getProp();
} 
```

然后定义你的类来*实现*该接口：

```
class A extends SomeClass implements StringPropProvider {
   public String getProp() {
    return "propA";
}

class B extends SomeOtherClass implements StringPropProvider {
  private String propB;

  public B setProp(String value) {
    propB = value;
    return this;
  }

  public String getProp() {
    return propB;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T03:27:53.193

那么这可以被认为是一个答案，但我不喜欢它..

```
public class X<T>{
public void someMethod(T t) throws NoSuchMethodException, IllegalAccessException, IllegalArgumentException, InvocationTargetException{
    t.getClass().getMethod("getProp", null).invoke(t, null);
}
public static void main(String[] args) throws NoSuchMethodException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
    X<A> weird = new X<>();
    A a = new A();
    weird.someMethod(a);
} 
```

}

# database - Spring / Hibernate在同一个mySQL中访问不同的数据库

> ID：12663017
> 
> 赞同：1
> 
> 时间：2012-09-30T16:42:09.080
> 
> 标签：database, spring, hibernate

我正在尝试从 Spring/hibernate 中的同一个 Java 类同时访问两个数据库。它们在结构上是相同的。它们都驻留在同一个 mySql 实例中。我将它们称为“myDatabaseA”和“myDatabaseB”。

我的计划是将 DAO 和 Entity 类复制到不同的包中，例如“com.entities.packageA”和“com.entities.packageB”。在实体中，我将使用表注释的“目录”关键字来消除数据库的歧义，例如

```
@Entity
@Table(catalog="myDatabaseB", name = "myTable1") 
```

最后，在 Session Factory bean 中，我将尝试在“basePackages”属性中为两个数据库指定实体，如下所示：

```
<!--  Session factory bean -->
<b:bean id="sessionFactory" class="com.mycompany.spring.ExtendedAnnotationSessionFactoryBean"">
    <b:property name="dataSource" ref="dataSource" />
    <b:property name="configurationClass" value="org.hibernate.cfg.AnnotationConfiguration" />
    <b:property name="hibernateProperties" ref="hibernateProperties" />
    <b:property name="entityInterceptor" ref="baseEntityInterceptor" />
    <b:property name="basePackages">
        <b:list>
            <b:value>com.entities.myPackageA</b:value>
            <b:value>com.entities.myPackageB</b:value>
        </b:list>
    </b:property>
</b:bean> 
```

在代码中，访问 myDatabaseA 时，我将使用“myPackageA”中的实体和 daos，访问 myDatabaseB 时使用 myPackageB。

这有意义吗？我对 Spring/Hibernate 有点陌生，所以这可能有点离谱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:51:12.223

如果表相同，则不必复制类。只有两个数据源和两个会话工厂。在配置数据源时，jdbcUrl 可以指定数据库名称。

如果需要基于某些参数（例如正在访问它的用户）使用不同的数据库，您可以查看使用[动态路由数据源](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:07:14.573

在 application-config 文件中定义两个不同的 sessionFactories，它们都指向不同的数据库。当您在应用程序中自动装配这两个 sessionFactories 时，请使用 @Qualifier 注解来加载它们。这样，您将通过使用相应的 sessionFactory 访问应用程序中的两个数据库。

# android - eclipse Indigo中的Windows 7 ndk抛出无效的win32

> ID：12663026
> 
> 赞同：0
> 
> 时间：2012-09-30T16:43:09.247
> 
> 标签：android, eclipse, android-ndk

我有一个问题，我可以在 Eclipse 之外运行 ndk，但不能从工作区文件夹中运行。我收到丢失文件的错误。

```
Android NDK: ERROR:jni/Android.mk:QCAR-prebuilt: LOCAL_SRC_FILES points to a missing file
Android NDK: Check that jni/../../../build/lib/armeabi/libQCAR.so exists  or that its path is correct
/cygdrive/c/Users/ALEXDEV/android-ndk-r8b/build/core/prebuilt-library.mk:43: *** Android NDK: Aborting    .  Stop. 
```

我想知道当我创建 android 项目时是否没有复制其中一个文件。但是当我在 eclipse 中运行它时，我得到了这个错误。我按照本教程 [http://mobilepearls.com/labs/ndk-builder-in-eclipse/](http://mobilepearls.com/labs/ndk-builder-in-eclipse/)

我在eclipse中运行ndk时遇到的错误如下

```
"C:\Users\ALEXDEV\android-ndk-r8b\ndk-build" (in directory "C:\Users\ALEXDEV\workspace\Image"): CreateProcess error=193, %1 is not a valid Win32 application 
```

你认为我做错了什么，你提出什么方法可以解决这个问题。

我正在为 Web 开发人员使用 Eclipse Java EE IDE。

版本：Indigo Service Release 2

我正在关注本教程

[http://tools.android.com/recent/usingthendkplugin](http://tools.android.com/recent/usingthendkplugin)

我正在使用此上传

靛蓝 - [http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)

我没有从链接下载包，而是选择了添加选项，但我使用了archieve。软件包可以直接从 eclipse 下载。这是我用来下载软件包的链接[http://www.eclipse.org/cdt/downloads.php](http://www.eclipse.org/cdt/downloads.php)

然后我下载这个版本的ndk

我得到了 ndk 示例，因此问题得到了解决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T22:06:43.727

使用 ndk r8b，您根本不需要 cygwin。将构建命令设置为**ndk-build.cmd**

请注意，您的教程已过时。最新版本的 ADT 插件允许您简单地单击“添加本机支持”到 Java 项目。

# javascript - 如何停止加载 iframe

> ID：12663032
> 
> 赞同：-1
> 
> 时间：2012-09-30T16:43:35.010
> 
> 标签：javascript, html

当第一个请求的响应到来时如何停止加载 iframe。我已经包含了这个，但这将加载我不想要的完整 url。我只想从第一个请求响应中设置 cookie 这是跨域请求

我已经尝试过 JSON 获取请求，但它没有在我的浏览器中设置我可以在下一个请求中使用的 cookie。

请帮助我们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:45:25.873

这可以通过 `window.stop():`

尝试

```
window.frames[0].stop() 
```

# javascript - 自定义谷歌地图图标

> ID：12663056
> 
> 赞同：0
> 
> 时间：2012-09-30T16:47:09.520
> 
> 标签：javascript, google-maps, google-maps-api-3

有没有办法为标记创建自定义动态图标？

我要创建的是一个点列表，并在标记中放置一个数字“n”，指定它是第 n 个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:50:06.430

是的。您可以使用带有[数字标记的](http://code.google.com/p/google-maps-icons/wiki/NumericIcons)[自定义图标](http://powerhut.co.uk/googlemaps/custom_markers.php)，也可以使用 Google 上的内置[编号系统用于标记](http://biostall.com/adding-number-or-letters-to-google-maps-api-markers)。

假设最后一个选项（不使用自定义标记），您的标记定义代码将如下所示：

```
var NUMBER_SHOWN='34';
var ICON_COLOR = 'ff6600';
var ICON_TEXT_COLOR = '000000';
var marker = new google.maps.Marker({  
       position: [LatLong Obj],   
       map: [Map Obj],  
       icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld='+NUMBER_SHOWN+'|'+ICON_COLOR+'|'+ICON_TEXT_COLOR  
        }); 
```

我相信这仅适用于两位数，但我不确定。

**编辑** Geocodezip 正确地指出第二种方法现在已被弃用，所以看起来你被第一种方法（使用谷歌的自定义编号图标）卡住了。看看[Daniel Vassallo](https://stackoverflow.com/questions/2436484/how-can-i-create-numbered-map-markers-in-google-maps-v3)关于如何使用它的答案。如果没有一个标记符合您的需求（颜色、外观等），您可以为每个数字创建自己的自定义标记（如果您知道如何，您可以编写一个服务器端脚本，您可以将`GET`变量传递给并拥有它使用 GD 等为您构建图标，但您也可以手动构建所有图标）

# java - html缩略图库java代码

> ID：12663059
> 
> 赞同：0
> 
> 时间：2012-09-30T16:47:41.193
> 
> 标签：java, html, image, gallery, thumbnails

我想为由 Java 中的缩略图组成的图片库生成 html 代码。有很多脚本可以做到这一点，主要是在 php 或 perl 中，也有不少是独立的，但我还没有找到任何可以做到这一点的 Java 库或代码。这是针对 Java 应用程序的。有人知道可以做到这一点的java库包或源代码吗？

任何指针表示赞赏。

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:25:10.877

您的问题是[Apache FOP](http://xmlgraphics.apache.org/fop/)的理想用例。您将不得不看看[XSL-FO](http://www.w3schools.com/xslfo/default.asp)。[另请查看对 StackOverflow 上一个较早问题](https://stackoverflow.com/questions/2743942/using-xsl-fo-and-html)的答案。希望能帮助到你。

# logging - Emacs 自动滚动日志缓冲区

> ID：12663061
> 
> 赞同：5
> 
> 时间：2012-09-30T16:47:56.160
> 
> 标签：logging, emacs

我正在看 Emacs 的开发日志。但是，每当我打开此日志时，它都会以基本模式打开，并且缓冲区不会随着日志内容滚动。应该注意的是，这是一个非常低容量的日志，它只收集关于我在编写源代码时所犯错误的信息。因为日志响应我在编辑器中输入的命令，所以我在 Emacs 中看到这一点非常方便。我如何获得一个缓冲区而不是滚动我的日志？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T02:22:28.617

然后`(set (make-local-variable 'window-point-insertion-type) t)`在这个日志缓冲区里面做一个。如果然后将光标放在缓冲区的末尾，则在附加文本时它应该保持在那里（在末尾），从而根据需要进行滚动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T16:54:40.907

您没有提出问题，但我想您想使用[auto-revert-tail-mode](http://www.emacswiki.org/emacs/AutoRevertMode)。

# php - Joomla 3 和 gantry 4 兼容性

> ID：12663062
> 
> 赞同：0
> 
> 时间：2012-09-30T16:48:04.420
> 
> 标签：php, frameworks, joomla, content-management-system, joomla3.0

Joomla 3.o 最新版本兼容的 Gantry 版本是什么。我试过 gantry 4.0.5 和 4.0.3 bundle ，都给我错误。

> 在第 293 行调用 D:\wamp\www\Joomla_3.0.0-Stable-Full_Package\tmp\install_506876ffb73aa\install.script.php 中未定义的方法 JAdministrator::get()

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:00:38.903

Gantry 4 尚未与 Joomla 3.0 完全兼容，因为稳定版本仅在几天前发布。有关 is 的更多信息，请阅读以下内容：

[http://www.rockettheme.com/forum/index.php?f=15&t=175669&p=864744&rb_v=viewtopic#p864744](http://www.rockettheme.com/forum/index.php?f=15&t=175669&p=864744&rb_v=viewtopic#p864744)

**更新：** Gantry 4 现在兼容 Joomla 3.x

# vb.net - Visual Studio 2012 中 xaml 页面之间的转换

> ID：12663066
> 
> 赞同：0
> 
> 时间：2012-09-30T16:48:38.850
> 
> 标签：vb.net, windows-8, visual-studio-2012

我在 VS2012 的 VB.net 中使用商店模板工作，我想在按下按钮时在两个 XAML 页面之间进行动画转换。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:18:39.783

没有内置的页面转换，但是，您可以使用 a`ContentThemeTransition`来转换 a 的内容`ContentControl`，请参阅[此博客文章](http://www.scottlogic.co.uk/blog/colin/2011/10/winrt-transitions-creating-fast-and-fluid-metro-uis/)以获取示例。

# ruby - Sinatra/ActiveRecord 不能同时处理请求？

> ID：12663079
> 
> 赞同：4
> 
> 时间：2012-09-30T16:50:08.107
> 
> 标签：ruby, postgresql, activerecord, sinatra

这是我的第一个 Sinatra 项目，我已经很晚了，我意识到当一次使用 ActiveRecord 发出多个请求时，我遇到了问题。如果我只提出一个要求，那么每个要求都是独立的。但是当我同时调用两者时，我会失败。

到目前为止，我已将其范围缩小到同时存在两个 ActiveRecord 请求的问题。也许我没有正确设置 ActiveRecord？我使用 PostgreSQL 是因为 Heroku 使用它，并且不打算改变。（这个问题也发生在 Heroku 上。）

这是日志：

```
192.168.1.113 - - [30/Sep/2012:10:33:00 MDT] "GET /version/current?platform=android HTTP/1.1" 200 33
 - -> /version/current?platform=android ActiveRecord::StatementInvalid - NoMethodError: undefined method `fields' for nil:NilClass: SELECT  "rankings".* FROM "rankings"  WHERE "rankings"."user_id" = 1 LIMIT 1:
/Users/zablanc/.rvm/gems/ruby-1.9.3-head@emm/gems/activerecord-3.2.7/lib/active_record/connection_adapters/postgresql_adapter.rb:667:in `block in exec_query'

...

Warning! Rack::Session::Cookie data size exceeds 4K.
Warning! Rack::Session::Cookie failed to save session. Content dropped.

192.168.1.113 - - [30/Sep/2012:10:33:01 MDT] "GET /badges/all HTTP/1.1" 200 311
 - -> /badges/all
192.168.1.113 - - [30/Sep/2012:10:33:01 MDT] "GET /moves/ranking/all HTTP/1.1" 500 166185
 - -> /moves/ranking/all 
```

我不知道如何关闭这些 cookie 警告，但它们似乎对应用程序没有影响。这是我配置我的应用程序的方式（在我需要主脚本的配置文件中）：

```
enable :logging

use ActiveRecord::ConnectionAdapters::ConnectionManagement

use Rack::Session::Cookie, :key => 'rack.session',
                           :path => '/',
                           :expire_after => 31_536_000, # In seconds
                           :secret => 'jeowkfj...secret...kjn5'

ActiveRecord::Base.include_root_in_json = false

def establish_connection(url)
    db = URI.parse(url)

    ActiveRecord::Base.establish_connection(
        :adapter  => db.scheme == 'postgres' ? 'postgresql' : db.scheme,
        :host     => db.host,
        :port     => db.port,
        :username => db.user,
        :password => db.password,
        :database => db.path[1..-1],
        :encoding => 'utf8'
    )
end

configure :development do
    establish_connection('postgres://postgres:postgres@localhost:5432/emm')
end

configure :test do
    establish_connection('postgres://postgres:postgres@localhost:5432/emm-test')
end

configure :production do
    establish_connection(ENV['DATABASE_URL'])
end 
```

我猜我没有正确设置 ActiveRecord，但我认为它就像我看过的教程一样。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:10:44.737

听起来您正在使用线程，但在您的应用程序中有一些非线程安全的代码。

您使用的是哪个网络服务器，您使用的是哪个中间件，您使用的是哪个 postgresql gem，您是否检查过所有的 gem 都是线程安全的？

# android - 调整字体大小后Webview高度没有改变

> ID：12663083
> 
> 赞同：3
> 
> 时间：2012-09-30T16:50:38.867
> 
> 标签：android, webview, height

在我的应用程序中，我使用 ScrollView。这个 ScrollView 包含许多 Webview。我更改 webview 字体大小：

```
webView.getSettings().setTextSize(WebSettings.TextSize.LARGER); 
```

在我再次更改字体大小后：

```
webView.getSettings().setTextSize(WebSettings.TextSize.SMALLER); 
```

字体大小在变化，但 webview 布局高度没有变化。文字较小，空间较大。有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:41:56.183

您可能必须使用 ie 重新加载您的 webview：

```
webview.loadUrl( "javascript:window.location.reload( true )" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:44:26.387

我有同样的问题并使用代码修复它：

```
private void reloadWebView() {
    postDelayed(new Runnable() {
        @Override
        public void run() {
            clearView();
            requestLayout();
        }
    }, 10);
} 
```

完成缩放后调用它。它将刷新网页视图并重新计算它的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T21:50:00.740

你可以使用这个：

```
myWebView.loadUrl("about:blank"); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-15T13:22:28.890

```
private void reloadWebView() {
    // TODO Auto-generated method stub
    postDelayed(new Runnable() {
        @Override
        public void run() {
            clearView();
            reload();               
            myWebView.getSettings().setJavaScriptEnabled(true);
            requestLayout();
        }
    }, 10);
} 
```

# java - 如何在 Java 中读取 RSA 密钥？

> ID：12663084
> 
> 赞同：2
> 
> 时间：2012-09-30T16:50:39.317
> 
> 标签：java, cryptography, rsa, x509, pkcs#8

我正在尝试读取 Java 中的 RSA 公钥和私钥文件。

我的 RSA 公钥和私钥是使用 PuttyGen 生成的。（SSH-2 RSA，1024 位）

我用于读取文件的代码是：

```
//public key
pubkeyBytes = getBytesFromFile(new File(pubKeyfileName));
KeySpec pubSpec = new X509EncodedKeySpec(pubkeyBytes);
RSAPublicKey pubKey =(RSAPublicKey) rsakeyFactory.generatePublic(pubSpec);

//private key
privkeyBytes = getBytesFromFile(new File(privKeyfileName));
PKCS8EncodedKeySpec privSpec = new PKCS8EncodedKeySpec(privkeyBytes);
PrivateKey privKey = rsakeyFactory.generatePrivate(privSpec); 
```

它抛出：

```
java.security.InvalidKeyException: invalid key format
    at sun.security.x509.X509Key.decode(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T17:02:12.867

Putty 使用自己的密钥格式。您需要将 Putty 密钥导出为 OpenSSH 格式 - 请参阅[如何将使用 PuttyGen(Windows) 生成的 SSH 密钥对转换为 ssh-agent 和 KeyChain(Linux) 使用的密钥对](https://stackoverflow.com/questions/2224066/how-to-convert-ssh-keypairs-generated-using-puttygenwindows-into-key-pairs-use)。

然后，您需要将 OpenSSH 密钥转换为 pkcs8 格式 - 请参阅[如何从文件加载 RSA 私钥](https://stackoverflow.com/questions/3243018/how-to-load-rsa-private-key-from-file)。Cygwin 版本的 openssh 可以很好地解决这个问题；无需寻找 Unix 系统即可运行`openssh`。

# c++ - directx 头文件和 winerror.h 之间的宏定义冲突

> ID：12663091
> 
> 赞同：15
> 
> 时间：2012-09-30T16:51:40.973
> 
> 标签：c++, visual-studio-2012, directx-11, winapi

我在使用 Visual Studio 2012 的 Windows 7 上。

当我编译时，我收到很多由 winerror.h 与 dxgi.h、dxgitype.h、d3d11.h、d3d10.h 引起的宏重新定义警告；例如 DXGI_STATUS_OCCLUDED、DXGI_STATUS_CLIPPED、DXGI_STATUS_NO_REDIRECTION 等。

我想这是因为安装了 windows sdk 8。我怎样才能避免这种情况？有没有办法可以从我的项目中排除这些新库？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T05:42:03.267

我在 Windows 8 上使用 Visual Studios 2012 编译 SlimDX 时遇到了这个问题。Windows SDK 包含默认继承，因此它们在手动定义的项目包含目录后加载。要修复它，请将 Windows SDK 添加为第一个包含目录。 `$(WindowsSDK_IncludePath)`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-01T00:58:29.967

我在 Windows 8 上使用 Visual Studio 2012 Express 遇到了这个问题；但是，我的错误几乎完全相同，并且修复以 Windows SDK 为中心。[这是在 MSDN 中（参见 #5）](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275%28v=vs.85%29.aspx#sdk_vs11)：

> D3DX 不被视为在 Windows 8 中使用 Direct3D 的规范 API，因此不包含在相应的 Windows SDK 中。研究使用 Direct3D API 的替代解决方案。
> 
> 对于旧项目，例如 Windows 7（和更早版本）DirectX SDK 示例，以下步骤对于使用 DirectX SDK 构建具有 D3DX 的应用程序是必需的：
> 
> 一种。如下修改项目的 VC++ 目录，以使用正确的 SDK 头文件和库顺序。
> 
> 1.  打开项目的属性并选择 VC++ 目录页面。
>     
>     
> 2.  选择所有配置和所有平台。
>     
>     
> 3.  如下设置这些目录：
>     
>     
>     *   包含目录：$(IncludePath);$(DXSDK_DIR)Include
>     *   库目录：$(LibraryPath);$(DXSDK_DIR)Lib\x86
> 4.  单击应用。
>     
>     
> 5.  选择 x64 平台。
>     
>     
> 6.  如下设置库目录：
>     
>     
>     *   库目录：$(LibraryPath);$(DXSDK_DIR)Lib\x64
> 
> 湾。无论您的项目中包含“d3dx9.h”、“d3dx10.h”还是“d3dx11.h”，请务必明确包含“d3d9.h”、“d3d10.h”和“dxgi.h”，或“ d3d11.h" 和 "dxgi.h" 首先确保您选择的是较新的版本。如果需要，您可以禁用警告 C4005；但是，此警告表明您正在使用这些标头的旧版本。
> 
> C。删除项目中对 DXGIType.h 的所有引用。Windows SDK 中不存在此标头，并且 DirectX SDK 版本与新的 winerror.h 冲突。
> 
> d。所有 D3DX DLL 都通过 DirectX SDK 安装安装到您的开发计算机上。确保必要的 D3DX 依赖项与任何示例或您的应用程序（如果它被移动到另一台机器）一起重新分发。
> 
> e. 请注意，当前使用 D3DX11 的替代技术包括[DirectXTex](http://go.microsoft.com/fwlink/p/?linkid=248926)和[DirectXTK](http://blogs.msdn.com/b/chuckw/archive/2012/03/02/directxtk.aspx)。D3DXMath 被[DirectXMath](http://msdn.microsoft.com/en-us/library/windows/desktop/hh437833(v=vs.85).aspx)取代。

我不能肯定地说，但我认为 Windows 8 SDK 可能是你的问题。这可能有点痛苦，但使用上面的修复将有助于减少您的代码需要的依赖项，并使其与 Windows 7 和 Windows 8 兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-09T19:06:42.143

（是的，我在 Stackoverflow 上的第一个答案）

找到了一个希望好的解决方法：制作自己的头文件，包括 Windows.h（D3D11 无论如何都包括），取消定义 Windows 宏并包括 D3D11.h。包括此标头而不是 D3D11.h。注意：显然这优先于 D3D11 版本的定义，而不是那些 Windows.h

```
// D3D11-NoRedefs.h
// Includes D3D11.h without redefinitions from Windows!
#pragma once

#include <Windows.h>

#pragma region Undefine Windows Macros
// Only undefine, if DXGIType.h has not been included yet
    #ifndef __dxgitype_h__
        #undef DXGI_STATUS_OCCLUDED
        #undef DXGI_STATUS_CLIPPED
        #undef DXGI_STATUS_NO_REDIRECTION
        #undef DXGI_STATUS_NO_DESKTOP_ACCESS
        #undef DXGI_STATUS_GRAPHICS_VIDPN_SOURCE_IN_USE
        #undef DXGI_STATUS_MODE_CHANGED
        #undef DXGI_STATUS_MODE_CHANGE_IN_PROGRESS
        #undef DXGI_ERROR_INVALID_CALL
        #undef DXGI_ERROR_NOT_FOUND
        #undef DXGI_ERROR_MORE_DATA
        #undef DXGI_ERROR_UNSUPPORTED
        #undef DXGI_ERROR_DEVICE_REMOVED
        #undef DXGI_ERROR_DEVICE_HUNG
        #undef DXGI_ERROR_DEVICE_RESET
        #undef DXGI_ERROR_WAS_STILL_DRAWING
        #undef DXGI_ERROR_FRAME_STATISTICS_DISJOINT
        #undef DXGI_ERROR_GRAPHICS_VIDPN_SOURCE_IN_USE
        #undef DXGI_ERROR_DRIVER_INTERNAL_ERROR
        #undef DXGI_ERROR_NONEXCLUSIVE
        #undef DXGI_ERROR_NOT_CURRENTLY_AVAILABLE
        #undef DXGI_ERROR_REMOTE_CLIENT_DISCONNECTED
        #undef DXGI_ERROR_REMOTE_OUTOFMEMORY
        #undef D3D11_ERROR_TOO_MANY_UNIQUE_STATE_OBJECTS
        #undef D3D11_ERROR_FILE_NOT_FOUND
        #undef D3D11_ERROR_TOO_MANY_UNIQUE_VIEW_OBJECTS
        #undef D3D11_ERROR_DEFERRED_CONTEXT_MAP_WITHOUT_INITIAL_DISCARD
        #undef D3D10_ERROR_TOO_MANY_UNIQUE_STATE_OBJECTS
        #undef D3D10_ERROR_FILE_NOT_FOUND
    #endif
#pragma endregion

#include <D3D11.h> 
```

请让我知道您的想法，不要拒绝批评。我对此并不陌生，并且知道这是相当蛮力的并且可能有风险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:21:31.503

我更改了设置并从 Windows Kits\8.0 中包含了 directx。

实际上我想忽略它并使用我之前使用的 Windows 头文件和库，但也许它并没有太大的区别。

唯一的问题是，现在我无法再访问 d3dx 实用程序了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-16T14:06:31.990

另一个快速修复 - 快速，如“可能不是最好的长期解决方案” - 是更改解决方案/属性/常规下的“平台工具集” - 在我的具体情况下，我选择了“Visual Studio 2015 - Windows XP (v140_xp )”而不是“Visual Studio 2015 (v140)”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-20T01:39:25.190

Winerror.h 包括 DXGIType.h，Visual Studio 发现 DirectX SDK DXGIType.h 而不是 Windows SDK 之一。

按照 user2400203 的回答，重命名 C:\Program Files (x86)\Microsoft DirectX SDK (June 2010)\Include\DXGIType.h 对我有用。

# android - Android：在 onResume 中选择 ListView 项目

> ID：12663096
> 
> 赞同：1
> 
> 时间：2012-09-30T16:52:19.567
> 
> 标签：android, android-listview

我有一个使用操作栏的选项卡功能托管多个片段的活动。其中一个片段包含一个 ListView。选择此选项卡后，我想选择某个项目。

要以编程方式执行此操作，我使用以下代码（其中调用是 ListView）

```
private void selectItem(int position)
{
    long itemId = calls.GetItemIdAtPosition(position);
    calls.PerformItemClick(calls, position, itemId);
} 
```

如果这个 ListView 已经被渲染，并且我正在调用它，那么没问题。但是，如果我从 onResume 调用它，则代码会执行，但最后没有选择任何内容。我认为这是因为在我调用 selectItem 时，尚未呈现 ListView 的所有项目。但是，如果我启动一个后台线程，休眠几百毫秒，然后运行相同的代码（当然是在 ui 线程中），一切都很好，但这是一个丑陋的 hack。

现在您可能想知道，“他为什么不使用calls.setSelection”？问题是，我正在使用执行扩展的自定义布局 - 所以我需要实际单击我想要选择的项目（这反过来会触发所选项目的布局扩展）。但是，我可以直接调用在 PerformItemClick 上执行的代码，结果是一样的（不执行布局扩展）。

有没有什么办法让我及时捕捉到“Listview 已完成渲染所有可查看项目”的时间点，然后在那时执行我的 selectItem 调用？在 ASP.NET 中，我在每个 UI 项目上都有一个事件，告诉我它何时完成渲染，所以我在那时进行项目选择，但我没有找到任何东西。

问候斯蒂芬

这是我正在使用的适配器

```
public class ActiveCallsAdapter: ObservableAdapter<Call>
{

    public ActiveCallsAdapter(Activity activity, ObservableCollection<Call> calls)
        : base(activity, calls)
    {
    }

    public override View GetView(int position, View convertView, ViewGroup parent)
    {
        var item = items[position];
        var view = (convertView ?? context.LayoutInflater.Inflate(Resource.Layout.Call, parent, false)) as LinearLayout;
        //View view = convertView;
        //if (view == null) // no view to re-use, create new
        //    view = context.LayoutInflater.Inflate(Resource.Layout.Call, null);

        SetTextView(view, Resource.Id.CallerName, item.CallerName);
        SetTextView(view, Resource.Id.CallerNumber, item.CallerNumber);
        SetTextView(view, Resource.Id.CallStatus, item.State.ToString());
        SetTextView(view, Resource.Id.CallDuration, item.Duration);

        return view;
    }

    public void Update(LinearLayout view, Call item)
    {
        SetTextView(view, Resource.Id.CallerName, item.CallerName);
        SetTextView(view, Resource.Id.CallerNumber, item.CallerNumber);

        string identifier = "callState_" + item.State.ToString();
        int resourceId = Application.Context.Resources.GetIdentifier(identifier, "string", Application.Context.PackageName);
        string callStateString = item.State.ToString();
        if (resourceId != 0)
        {
            try
            {
                callStateString = Application.Context.Resources.GetString(resourceId);
            }
            catch (Exception e)
            {
                AndroidLogModel.Model.AddLogMessage("ActiveCallsAdapter", "Unable to find call state string with resource id " + resourceId + " state string: " + identifier, 3);
            }
        }
        SetTextView(view, Resource.Id.CallStatus, callStateString);
        //SetTextView(view, Resource.Id.CallDuration, item.Duration);
    }

    public void UpdateDuration(LinearLayout view, Call item)
    {
        SetTextView(view, Resource.Id.CallDuration, item.Duration);
    }

} 
```

以及那个适配器的基类

```
 public class ObservableAdapter<T>: BaseAdapter<T>
{

    protected readonly Activity context;
    protected readonly ObservableCollection<T> items;

    public ObservableAdapter(Activity context, ObservableCollection<T> collection)
    {
        this.context = context;
        this.items = collection;
        //this.collection.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(collection_CollectionChanged);
        this.items.CollectionChanged += (sender, e) => NotifyDataSetChanged();
    }

    void collection_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        NotifyDataSetChanged();
    }

    public override T this[int position]
    {
        get { return items[position]; }
    }

    public override int Count
    {
        get { return items.Count; }
    }

    public override long GetItemId(int position)
    {
        return position;
    }

    public override View GetView(int position, View convertView, ViewGroup parent)
    {
        var item = items[position];
        var view = (convertView ?? context.LayoutInflater.Inflate(Resource.Layout.Call, parent, false)) as LinearLayout;
        // configure view here
        return view;
    }

    protected void SetTextView(LinearLayout view, int id, string text)
    {
        var textView = view.FindViewById<TextView>(id);
        if (textView != null)
            textView.SetText(text, TextView.BufferType.Normal);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:46:34.047

我的 Mono 技能有限，所以我不知道我是否完全理解您的适配器，无论如何我已经修改了一些旧代码并制作了一个适配器，在单击时会扩展单个项目，它也会将其移至`ListView`所需`onResume`位置：

```
private static class CustomAdapter extends BaseAdapter {

        // the data
        private ArrayList<String> mData;

        // an int pointing to a position that has an expanded layout,
        // for simplicity I assume that you expand only one item(otherwise use
        // an array or list)
        private int mExpandedPosition = -1; // -1 meaning no expanded item
        private LayoutInflater mInflater;

        public CustomAdapter(Context context, ArrayList<String> items) {
            mInflater = LayoutInflater.from(context);
            mData = items;
        }

        public void setExpandedPosition(int position) {
            // if the position equals mExpandedPosition then we have a click on
            // the same row so simply toggle the row to be gone again
            if (position == mExpandedPosition) {
                mExpandedPosition = -1;
            } else {
                // else change position of the row that was expanded
                mExpandedPosition = position;
            }
            // notify the adapter
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return mData.size();
        }

        @Override
        public String getItem(int position) {
            return mData.get(position);
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.ad_expandedelement,
                        parent, false);
            }
            ((TextView) convertView.findViewById(R.id.textView1))
                    .setText(getItem(position));
            // see if there is an expanded position and if we are at that
            // position
            if (mExpandedPosition != -1 && mExpandedPosition == position) {
                // if yes simply expand the layout
                convertView.findViewById(R.id.button1).setVisibility(
                        View.VISIBLE);
            } else {
                // this is required, we must revert any possible changes
                // otherwise the recycling mechanism will hurt us
                convertView.findViewById(R.id.button1).setVisibility(View.GONE);
            }
            return convertView;
        }

    } 
```

将`onListItemClick`只是：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // set the expanded(or collapsed if it's a click on the same row that
    // was previously expanded) row in the adapter
    ((CustomAdapter) getListView().getAdapter())
            .setExpandedPosition(position);
} 
```

并且`onResume`将有：

```
@Override
protected void onResume() {
    super.onResume();
    // set the position to the desired element
    ((CustomAdapter) getListView().getAdapter()).setExpandedPosition(15);
    // set the selection to that element so we can actually see it
    // this isn't required but has the advantage that it will move the
    // ListView to the desired
    // position if not visible
    getListView().setSelection(15);
} 
```

这`R.layout.ad_expandedelement`是一个简单的垂直`LinearLayout`，带有一个`TextView`和一个最初隐藏的（可见性设置为消失）`Button`。为此，`Button`我更改了可见性以模拟在`ListView`. 您应该能够理解我的代码，如果您愿意，我可以在 github 上发布完整示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:04:20.390

虽然我不确定 C#/Mono 中的确切等价物，但 Android 框架在`Activity`调用时提供了一个回调`onWindowFocusChanged()`，指示`Window`与给定关联的时间段`Activity`对用户可见。等到那个时候调用你的选择方法，你可能会有更好的运气，因为`ListView`应该在那个时候测量和布局。在 Java 中，它会是这样的：

```
@Override
public void onWindowFocusChanged (boolean hasFocus) {
    if (hasFocus) {
        selectItem(position);
    }
} 
```

您可能需要在其中添加更多逻辑，此回调直接与窗口焦点相关联，并不是真正的生命周期方法。如果您正在显示对话框或执行其他类似操作，我可能会被多次调用。

# php - PHP 等效于授权的 ASP.NET WebMethod (AJAX)？

> ID：12663100
> 
> 赞同：0
> 
> 时间：2012-09-30T16:52:44.250
> 
> 标签：php, asp.net, ajax, authorization, webmethod

这很少见，但我不得不称赞 MS：ASP.NET WebMethod (AJAX) 授权是一个梦想，因为我渴望安全和懒惰。

Encosia 的[ASP.NET 页面方法只有在您使它们](http://encosia.com/asp-net-page-methods-are-only-as-secure-as-you-make-them/)完全满足这些需求时才安全。ASP.NET 现在对我来说实际上是可行的。终于自由了！（来自高贵但灾难性的 AJAXControlToolkit）。

无论如何，问题是，这是为了工作。当 LAMP 免费提供时，我不会购买 MS 架构。我是 AJAX 的新手，我似乎找不到关于如何以与上面的 Encosia 相同的方式授权对 PHP 的 AJAX 调用的明确答案。

任何人都可以在上面的链接中建议与 Encosia 相同的 PHP 吗？

提前致谢！

**更多细节**

好的，让我更具体一点。上面的 Encosia 的解决方案为任何未登录尝试访问 web 方法的人提供了 401 denied。整洁，干净，简单。之前，我尝试对用户会话数据进行访问，但它在我不知不觉中强制同步模式。不，不。

对于我的网站，我需要两者。如果用户未登录，我需要能够在某些页面上提供 401 拒绝。我需要能够允许任何人通过 ajax 调用其他 php，无论登录如何。

**明晰**

底线：我不希望任何人访问某些 AJAX PHP，除非他们已登录。我不在乎响应或任何其他细节，只要它仍然是 AJAX。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:43:07.230

问题不是很清楚，但是如果您只想允许已验证或在相关页面上的用户访问您的 AJAX 服务器端侦听脚本（可能是 XML 或 JSON 输出），那么如何添加会话标识符到你的 JS AJAX 请求？在服务器端脚本中，您可以对照保存当前会话的数据库表检查该标识符。

为了提高安全性，您可以检查 IP、cookie 等。这些都是您可以在会话启动时设置的值。

您需要问自己的主要问题是：

如果用户登录或浏览，您真正想要/需要提供什么样的数据库访问权限？每个应用程序都有自己的需求。如果您要在服务器上安装 AJAX 侦听器，那么只需快速查看 Firebug（示例）以了解您的脚本在哪里以及请求的格式。这可能会发现潜在的安全漏洞。确保您的所有传入请求都得到正确处理，以消除注入攻击的可能性。

# coffeescript - 支持单元测试的 CoffeeScript 构建设置？

> ID：12663108
> 
> 赞同：1
> 
> 时间：2012-09-30T16:53:35.260
> 
> 标签：coffeescript, build-process, qunit

我想使用 CoffeeScript 来构建本质上是 JavaScript 库的东西。

我只想能够

1.  定义一些类，继承
2.  将我的代码保存在几个文件中
3.  编写一些单元测试（QUnit 或其他任何工作，最好用 CoffeeScript 编写测试）
4.  （理想情况下）在我工作时自动监视和构建项目

这似乎很合理，不是吗？我的计划只是让单元测试在浏览器中针对已编译的 JavaScript 运行，但如果我可以直接在 node.js 中运行它们，那就更好了。

目前我正在尝试使用[CoffeeToaster](https://github.com/serpentem/coffee-toaster)和[QUnit](http://qunitjs.com/)来做到这一点，使用两种不同的 CoffeeToaster 配置，一种带有测试，一种没有。它正在工作，但也许有人有更好的建议？我应该放弃 CoffeeToaster 并使用[Cake](http://coffeescript.org/#cake)吗？或者获得另一个单元测试框架？任何人都可以指出我的教程吗？我正在制作一个客户端 JS lib，所以我不想涉及 Rails 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T09:31:35.377

我目前正在使用：

*   **[Mocha](http://visionmedia.github.com/mocha/)**作为测试运行器， **[should.js](https://github.com/visionmedia/should.js)**用于断言；
*   [使用所需库的模拟/存根](https://github.com/mfncooper/mockery)来拦截某些`require`对隔离测试的调用；
*   * [JSOverage](http://siliconforks.com/jscoverage)用于检测代码覆盖率报告的代码。

我的代码存在，`src/`我用 CoffeeScript 编写测试。我`make`用来构建和测试代码。

*   `make build`将 CoffeeScript 编译`src/`为`lib/`.
*   `make test`构建代码，然后在`test/`.
*   `make monitor`一旦测试发生变化，就会监视并运行测试。不幸的是，它*不会*重新编译代码。我使用 Vim 键绑定来调用`make`，这也会触发 Mocha 重新运行测试。 **编辑：**如果这让您感到困扰，您可以运行.[`coffee --watch`](http://coffeescript.org/#usage) `-o lib/ -c src/`
*   `make coverage`生成代码覆盖率报告并将其放入`lib-cov/report.html`.

我的`Makefile`看起来有点像这样：

```
COFFEE = ./node_modules/.bin/coffee --compile
MOCHA = NODE_ENV=test ./node_modules/.bin/mocha
MOCHA_OPTS = \
    --compilers coffee:coffee-script \
    --require should \
    --colors
REPORTER = spec

build:
    @$(COFFEE) --output lib/ src/

test: build
    @$(MOCHA) --reporter $(REPORTER) $(MOCHA_OPTS)

monitor:
    @$(MOCHA) --reporter min $(MOCHA_OPTS) \
    --watch --growl

coverage: instrument
    @MYLIB_COV=1 $(MOCHA) $(MOCHA_OPTS) \
    --reporter html-cov > lib-cov/report.html

instrument: build
    @rm -rf ./lib-cov
    @jscoverage ./lib ./lib-cov

.PHONY: build test monitor coverage instrument 
```

您可能只需很少修改即可使用上述内容。

要使用 生成覆盖率报告`make coverage`，必须针对已检测的代码`lib-cov/`而不是 中的代码运行测试`lib/`。要做到这一点，需要做三件事：

1.  `Makefile`应该设置一个环境变量，例如（根据`MYLIB_COV` *需要更改名称）。*

2.  您`index.js`应该查看此环境变量，或者`require`相应地查看：`lib/``lib-cov/`

    ```
    // index.js
    module.exports = process.env.MYLIB_COV
      ? require('./lib-cov/mylib')
      : require('./lib/mylib'); 
    ```

    *如果您需要从多个源文件导出，您可以在此处合并它们。如果您`index.js`的 package.json 中有除“main”以外的其他内容，请不要忘记更改它。*

3.  您的测试应该`require '../'`：

    ```
    # test/test.user.coffee
    describe 'User', ->
      User = {}

      before ->
        {User} = require '../'

      describe '#equals()', ->
        describe 'when users have the same username and host', ->
          it 'should return true', ->
            user1 = new User 'user', 'some.host.foo'
            user2 = new User 'user', 'some.host.foo'
            user1.equals(user2).should.be.true

      # etc. 
    ```

我将把它作为练习留给读者，以了解他们是否需要 Mockery 以及如果需要如何使用它。不过，我要指出，`require`上面测试片段中的调用是在内部完成`before`的，这是有原因的。

快乐编码！

# c# - 用于添加和编辑行的 WPF DataGrid 处理程序

> ID：12663109
> 
> 赞同：1
> 
> 时间：2012-09-30T16:53:35.263
> 
> 标签：c#, wpf, datagrid, handler

我一直试图找出当用户在 DataGrid 中编辑或添加新行时如何得到通知（即有一个处理程序）。至于编辑，我能找到的最接近的是 RowEditEnding 处理程序，但该处理程序的问题是我无法访问正在编辑的行中单元格的新值。此处理程序只有旧值，因为在提交数据之前触发事件。

无论如何，绑定到 DataGrid 的列表在编辑和添加时都得到了正确更新，但我想要的是执行适当的 SQL 查询并更新 sql 表，因为列表是由从数据库中提取的数据组成的。

有任何想法吗？

# makefile - 如何编写生成文件

> ID：12663111
> 
> 赞同：1
> 
> 时间：2012-09-30T16:53:52.487
> 
> 标签：makefile, gnu-make

好的，所以需要做的是，只有当它的 .test 自最近一次构建以来发生了变化时，makefile 才必须将 .test 编译成 .vtt。我没有直接指向 .test 文件的路径，但我可以获得它们的列表，并且可以从中生成新的 .vtt 文件的假定路径。到目前为止，我所拥有的是：

```
SRC_DIR = .
TEST_DIR = $(SRC_DIR)/test
SPEC_DIR = $(TEST_DIR)/spec
OBJ_DIR = $(SRC_DIR)/objdir
OBJ_DIR_SPEC = $(OBJ_DIR)/test/spec
TEST_SRC := $(shell find $(SPEC_DIR) -name '*.test' -print)                                                                    
VTT_SRC := $(subst $(SRC_DIR)/test,$(OBJ_DIR)/test,$(subst .test,.vtt,$(TEST_SRC)))   
RUN_STIP_VTT = $(SPEC_DIR)/strip-vtt.py

%.vtt : %.test:
   $(PYTHON) $(RUN_STIP_VTT) $< $@

$(VTT_SRC): $(TEST_SRC)
   $(PYTHON) $(RUN_STIP_VTT) $< $@

objdir:
    mkdir $(OBJ_DIR)

check-js: objdir $(VTT_SRC)
    $(PYTHON) ./test/spec/run-tests-js.py $(OBJ_DIR_SPEC) 
```

TEST_SOURCE 是已找到的 .test 文件的列表。VTT_SOURCE 是转换为 .vtt 格式的测试文件列表和对象目录。我需要能够在 TEST_SOURCE 中找到 .vtt 文件依赖项 .test 文件，并以某种方式告诉 makefile 有关该连接的信息。

最终通过以下更改修复它：

```
check-js: objdir $(VTT_SRC)
        $(PYTHON) ./test/spec/run-tests-js.py $(OBJ_DIR_SPEC)

$(OBJ_DIR)/%.vtt : $(SRC_DIR)/%.test
    @$(PYTHON) $(STIP_VTT) $< $@ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T22:51:50.860

我会使用静态模式规则：

```
$(VTT_SRC): $(OBJ_DIR)/%.vtt : $(SRC_DIR)/%.test
    $(PYTHON) $(RUN_STIP_VTT) $< $@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:40:23.977

Make 中的`VPATH`构造可能是您正在寻找的。

# javascript - 如何在已部署（Node.js）中获取服务器的参考

> ID：12663112
> 
> 赞同：0
> 
> 时间：2012-09-30T16:54:16.850
> 
> 标签：javascript, node.js

我正在使用已部署并且需要在后台线程中访问当前服务器对象，即不涉及请求/响应或会话。有没有办法得到这个参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:01:11.287

[https://gist.github.com/3795019](https://gist.github.com/3795019)

这个要点展示了如何获取服务器对象。请记住，在服务器运行时，资源可能会被构造多次。

# html - 横向排列问题

> ID：12663113
> 
> 赞同：-1
> 
> 时间：2012-09-30T16:54:19.093
> 
> 标签：html, html-lists

```
//for submenu
DataTable subcate = new BALCate().GetSubCate(cateid);
if (subcate.Rowsount > 0)
{
    div = new HtmlGenericControl("div");
    div.Attributes.Add("class", "sub-menu");
    HtmlGenericControl sul = new HtmlGenericControl("sul");

    foreach (DataRow sdr in subcate.Rows)
    {
        HtmlGenericControl sli = new HtmlGenericControl("sli");
        HtmlAnchor slink = new HtmlAnchor();
        slink.HRef = "#";
        slink.InnerHtml = sdr["subcate_name"].ToString();
        sli.Controls.Add(slink);
        sul.Controls.Add(sli);
    }
    div.Controls.Add(sul);
    li.Controls.Add(div);
 }
nav.Controls.Add(li); 
```

.aspx

```
<div class="categories">
<ul runat="server" id="nav">
<li class="home" style="background-repeat: no-repeat; background-color: #6FA907; background-image: url(home.jpg); background-position: center;"><a href="index.htm">Home</a></li>
<!--Dynamic menu-->
</ul>
</div> 
```

**请把这些竖直排列**

任何人都可以解决这个错误---解释如下

`<li> </li>`标签内的标签可以`<ul> </ul>`垂直吗？？？如果是，请告诉我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:14:27.217

您可以将其设为`display: block;`or `display: list-item;`，这是默认设置。

因此，您的 CSS 将是：

```
#nav li {display: block;} 
```

或者

```
#nav li {display: list-item;} 
```

检查两者并使用适合的一个。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:11:41.287

```
// CSS
li { display : block; } 
```

除了垂直是`li`元素的默认设置，除非你已经在 CSS 的其他地方取消设置。

# c++ - 标准容器（如 std::vector）的高效/更快复制

> ID：12663115
> 
> 赞同：0
> 
> 时间：2012-09-30T16:54:24.167
> 
> 标签：c++, vector, copying, processing-efficiency

对于自定义使用，我继承`std::vector`了一个自定义`class Vector`. 对于我的要求，这种`public` [继承是可以的](https://stackoverflow.com/questions/4353203/thou-shalt-not-inherit-from-stdvector)。

一个目的是避免多次复制向量数组，所以我决定这个自定义类是基于“所有权”的。

```
Vector<A> vA1(100); // vA1 is allocated A[100]
Vector<A> vA2 = vA1; // vA2 refers to original A[100] and ...
                     // ... vA1 is now blank which is expected 
```

这是为 C++03 实现的方式：

```
template<typename T>
struct Vector : std::vector<T>
{
  // ... other constructors

  Vector (const Vector &copy) // copy constructor
  {
    this->swap(const_cast<Vector&>(copy)); // <---- line of interest
  }
  // 'operator =' is TBD (either same as above or unimplemented)
}; 
```

我是否违反了任何语言规则/功能/约定？这段代码有什么不好的吗？

**编辑**：我在下面以答案的形式添加了我的新方法（这是它的工作[演示](http://ideone.com/Ua0lV)）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T17:06:18.840

我认为您正在寻找的是移动语义。

```
Vector<A> vA1(100); // vA1 is allocated A[100]
Vector<A> vA2 = std::move(vA1); // vA2 refers to original A[100] and ...
                 // ... vA1 is now blank which is expected 
```

如果您的编译器没有移动语义支持，我建议您使用智能指针或查看[boost::move](http://www.boost.org/doc/libs/1_51_0/doc/html/move.html)，它可以在 C++11 之前的编译器中模拟移动语义。

```
std::shared_ptr<Vector<A>> vA1(new Vector<A>(100)); // vA1 is allocated A[100]
std::shared_ptr<Vector<A>> vA2 = vA1; // vA2 refers to original A[100] and ...
vA1.reset();
                 // ... vA1 is now blank which is expected 
```

甚至更简单：

```
Vector<A> vA1(100); // vA1 is allocated A[100]
Vector<A> vA2;
vA1.swap(vA2);// vA2 refers to original A[100] and ...
                 // ... vA1 is now blank which is expected 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T17:08:52.047

您真的应该看看使用 C++11：所有标准容器都是可移动的，因此在许多情况下类似于您的语义，即当知道所有权可以转移时。更准确地说，当从函数返回对象或使用临时构造或分配对象时，容器会被移动而不是复制。尝试以某种方式复制这种机制几乎肯定会在某些情况下产生意想不到的行为。

在 C++11 中，可移动语义被集成到语言和函数中，包括构造函数和赋值，可以重载以根据对象是否可移动而表现不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T17:15:25.440

您的代码违反了支持 const 正确性的约定：

```
const Vector<int> foo(12);
const Vector<int> bar(foo); // UB.
some_function_that_takes_Vector_by_value(bar); // UB. 
```

您可能会说，“但没有人会创建 的`const`实例`Vector`，因此 UB 永远不会发生”。在这种情况下，您至少可以让您的复制 ctor 采用非常量引用，以遵循函数不应修改`const&`参数所采用的对象的约定。

即便如此，我个人更愿意要求用户通过显式交换来“开启”速度，而不是为他们创建这样的陷阱。我也宁愿根本没有复制 ctor，而不是行为与普通副本不同的复制 ctor。如果人们必须记住`Vector`实际上无法复制，那么他们不应该使用复制语法来不复制它。

C++03 中不必要的副本问题并不是一个新问题，IMO 也不需要新的解决方案。许多 C++ 程序员已经知道如何利用`swap`和复制省略，而那些不知道如何避免不必要的复制的人最好学习以正常方式进行操作，而不是学习以特定方式要求的独特方式进行操作班级。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T11:31:48.457

通过评论/答案的洞察力，我意识到我目前的方法不是处理这些事情的好主意。
我想出了一个改变的设计，我尝试使用 `swap()`方法模拟“移动”操作（在这种情况下考虑它们是可互换的）。

对于任何想要更快复制（即通过交换移动）的类或容器，应该继承下面的类（直接从真实文件复制粘贴）：

```
 /*
   * An empty CRTP base class for the classes which are allowing move sematics (effectively swap)
   * A given class `X` must implement `void swap(X&);` method for the movement (i.e. content swapping)
   * For example, `X` is deriving this class (i.e. `class X : public Movable<X> ...`)
   * ... below is an illustration for how to transfer contents of an `X` object to another
   * `X o1; ... X o2(o1.move()); // contents of o1 is now moved to o2`
   */
  template<typename Derived>
  class Movable
  {
    /*
     * Empty constructor for normal behavior
     */
    public: Movable ()
            {}

    /*
     * Copy constructor which does nothing; without this compiler errors out !
     */
    public: Movable (const Movable &copy)
            {}

    /*
     * Move constructor which will effectively call `Derived::swap()` method
     * After this, the contents of the object will be moved to each other
     * For syntactic sugar, it has been made `explicit`
     */
    public: explicit Movable (Movable &orig)
            {
              (*this)(orig);
            }

    /*
     * Moving while Not initializing object, one need to use `operator ()` and not `operator =`
     * If `operator =` is used then simply `move()` part will not happen; i.e. below 2 are same:
     * `obj1 = obj2.move();` and `obj1 = obj2;`
     */
    public: void operator () (Movable &orig)
            {
              static_cast<Derived*>(this)->swap(static_cast<Derived&>(orig));
            }
    /*
     * This method is called from `Derived` class when move sematics is intended
     */
    public: Movable& move ()
            {
              return *this;
            }
  }; 
```

这里应该如何部署：

```
template<typename T>
struct Vector : std::vector<T>,
                Movable<Vector<T> >  // inherit as CRTP base
{
  // ... other methods
  typedef Movable<Vector<T> > Movable_;
  Vector (Movable_ &orig) : Movable_(orig) {}  // Declare a constructor
}; 
```

这里应该如何使用它：

```
Vector<A> vA1(100); // vA1 is allocated A[100]
Vector<A> vA2 = vA1; // normal copying (no change)
vA2 = vA1; // normal assignment (no change)
Vector<A> vA3(vA1.move()); // <------- "moves" contents from 'vA1' to 'vA3'
vA1(vA2.move()); // <------- "moves" contents from 'vA2' to 'vA1'
vA2 = vA3.move(); // normal copying from 'vA3' to 'vA2' ('vA3' unaffected) 
```

# c# - C# 读取 Arduino

> ID：12663116
> 
> 赞同：2
> 
> 时间：2012-09-30T16:54:25.807
> 
> 标签：c#, serial-port, arduino

我正在尝试制作一个从 Arduino 读取传出信号的应用程序，但我无法使其在 C# [Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)中工作，只能在控制台中工作。我的 C# Windows 窗体代码错了吗？调试时我没有收到任何错误，但这并不意味着我没有忘记某些东西。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;
using System.Threading;

namespace CommunicateWithArduino
{
    public partial class Form1 : Form
    {
        public static System.IO.Ports.SerialPort port;

        delegate void SetTextCallback(string text);

        private BackgroundWorker hardWorker;

        private Thread readThread = null;

        public Form1()
        {
            InitializeComponent();

            hardWorker = new BackgroundWorker();
            sendBtn.Enabled = false;
        }

        private void btnConnect_Click(object sender, EventArgs e)
        {
            System.ComponentModel.IContainer components =
                new System.ComponentModel.Container();
            port = new System.IO.Ports.SerialPort(components);
            port.PortName = comPort.SelectedItem.ToString();
            port.BaudRate = Int32.Parse(baudRate.SelectedItem.ToString());
            port.DtrEnable = true;
            port.ReadTimeout = 5000;
            port.WriteTimeout = 500;
            port.Open();

            readThread = new Thread(new ThreadStart(this.Read));
            readThread.Start();
            this.hardWorker.RunWorkerAsync();

            btnConnect.Text = "<Connected>";

            btnConnect.Enabled = false;
            comPort.Enabled = false;
            sendBtn.Enabled = true;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            foreach (string s in SerialPort.GetPortNames())
            {
                comPort.Items.Add(s);
            }
            if (comPort.Items.Count > 0)
                comPort.SelectedIndex = comPort.Items.Count-1;
            else
                comPort.SelectedIndex = 0;

            baudRate.Items.Add("2400");
            baudRate.Items.Add("4800");
            baudRate.Items.Add("9600");
            baudRate.Items.Add("14400");
            baudRate.Items.Add("19200");
            baudRate.Items.Add("28800");
            baudRate.Items.Add("38400");
            baudRate.Items.Add("57600");
            baudRate.Items.Add("115200");

            baudRate.SelectedIndex = 2;
        }

        private void sendBtn_Click(object sender, EventArgs e)
        {
            if (port.IsOpen)
            {
                port.Write(sendText.Text);
            }
        }

        private void SetText(string text)
        {

            if (this.receiveText.InvokeRequired)
            {
                SetTextCallback d = new SetTextCallback(SetText);
                this.Invoke(d, new object[] { text });
            }
            else
            {
                this.receiveText.Text += "Text: ";
                this.receiveText.Text += text;
                this.receiveText.Text += Environment.NewLine;
            }
        }

        public void Read()
        {
            while (port.IsOpen)
            {
                try
                {
                    if (port.BytesToRead > 0)
                    {
                        string message = port.ReadLine();
                        this.SetText(message);
                    }
                }
                catch (TimeoutException) { }
            }
        }

        private void Form1_FormClosed(object sender, FormClosedEventArgs e)
        {
            try
            {
                if(!(readThread == null))
                    readThread.Abort();
            }
            catch (NullReferenceException)
            {
            }

            try
            {
                port.Close();
            }
            catch (NullReferenceException)
            {
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:37:44.200

默认情况下，ReadLine 方法将阻塞，直到收到一行。您的 Arduino 程序是否发送了一条线路？您在运行程序时是否关闭了 Arduino 串行监视器程序？

我会更改为 port.ReadChar 直到您确认您正在接收字符。

# ruby-on-rails-3 - Rails 3 - 渲染局部

> ID：12663117
> 
> 赞同：1
> 
> 时间：2012-09-30T16:54:27.630
> 
> 标签：ruby-on-rails-3

我在 Rails 中进行部分渲染时遇到了一些问题。

这是在我的 routes.rb 中：

```
namespace :blog do
  resources :posts, only: [:index, :show] do 
    resources :comments, only: [:new, :create]
  end
end 
```

这是我的博客::PostsController：

```
def show
  @post = Post.find(params[:id])
  @comments = @post.comments
end 
```

这是在 /views/blog/posts/show.html.erb

```
<%= render @comments %> 
```

_comment.html.erb 部分位于 /views/blog/comments/

错误信息是：

```
Missing partial blog/comments/comment with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "/home/mar1221/ruby/my_site/app/views" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:29:29.737

通常，您会传递部分名称（不带下划线），例如：

```
<%= render 'comment' %> 
```

它将尝试`_comment.html.erb`从视图路径渲染部分。

部分可以在与父视图相同的目录中，在共享目录中，或在视图路径中包含的任何其他目录中。

查看：

[http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)以获得更详细的解释，以及渲染部分时可以使用的其他选项。

# maven - Maven 生成网站中的元关键字

> ID：12663119
> 
> 赞同：2
> 
> 时间：2012-09-30T16:54:46.780
> 
> 标签：maven, keyword, meta

有没有办法在 Maven 生成的网站中添加自定义元标记？

```
<meta name="keyword" content="keyword1, keyword2"/> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:28:23.330

很简单，您只需[将一些 XML 注入`<head>`](http://maven.apache.org/plugins/maven-site-plugin/examples/sitedescriptor.html#Inject_xhtml_into_head)

例如在你的`src/site/site.xml`

```
<project>
  ...
  <body>
    ...
    <head>
      <meta name="keyword" content="keyword1, keyword2" />
    </head>
    ...
  </body>
  ...
</project> 
```

# php - 如何在 mysqli 查询中使用 while 循环

> ID：12663125
> 
> 赞同：-1
> 
> 时间：2012-09-30T16:55:15.393
> 
> 标签：php, mysqli

很抱歉这个非常愚蠢的问题。我有这样的代码，我希望结果在while循环中完成。我之前使用的是mysql，查询很简单并且执行得很好。例子

```
$sql_query = mysql_query($query);
while($row = mysql_fetch_array($sql_query)
 {
   $data_a = $row['a']; $data_b = $row['b'];
 } 
```

现在我使用 oop，我有一个数据库类和一个连接处理程序，它被注入到从数据库类扩展的新类中。我的问题不是在代码执行后，我得到这个错误方法 *mysqli_stmt::fetch_assoc()* 这是我的代码

```
<?php
class recentWorks extends DatabaseModelBase
{

public function show($tbl, $num_to_show, $site_url="") 
{

    $statement = $this->prepare('SELECT * FROM '.$tbl.' WHERE RAND()<(SELECT (( '.$num_to_show.' /COUNT(*))*10) FROM '.$tbl.' ) ORDER BY RAND() LIMIT  '.$num_to_show.'  ');
    $statement->execute();
    while ($recent_results = $statement->fetch_assoc())
    {
        $featured_work_name=$recent_results['name']; $featured_work_url=$recent_results['url']; $featured_work_thumb=$recent_results['img_thumb'];
        $featured_work_id=$recent_results['id'];$featured_work_desc=$recent_results['desc'];$featured_work_img=$recent_results['img_url'];
        ?>
  <li> 
  <a href="<?php echo $featured_work_img; ?>" class="fancybox thumb poshytip" title="Click To View Enlarged Image">
  <img src="<?php echo $featured_work_thumb; ?>" width="282px" height="150px" alt="<?php echo $featured_work_name; ?>' Image" />
  </a>
 <div class="excerpt">

 <span class="main_header"><a href="<?php echo $featured_work_url; ?>" target="_blank" class="poshytip recent-link" title="Click To Visit Website"><?php echo ucwords($featured_work_name); ?></a>
 </span>
<?php echo substr($featured_work_desc,0,300); ?>
</div>
</li>
        <?php
    }
    $statement->close();
    }

  }
 ?> 
```

请有人为我调试这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:04:17.607

让我们看看你以前有*什么*

```
$sql_query = mysql_query($query);
   `----- missing error checking and handling
while ($row = mysql_fetch_array($sql_query))
         `---- missing error handline
{
    $data_a = $row['a']; $data_b = $row['b'];
           `----- complicated way of setting variables as arrays
} 
```

现在让我们看看你现在拥有什么（选定的行）

```
$statement = $this->prepare('SELECT * FROM '.$tbl.' WHERE RAND()<(SELECT (( '.$num_to_show.' /COUNT(*))*10) FROM '.$tbl.' ) ORDER BY RAND() LIMIT  '.$num_to_show.'  ');
                       `---- using prepare as if it would have been mysql_query()
$statement->execute();
            `----- same here 
```

这是错误的。只是告诉你。我建议您先搜索一些运行良好的`mysqli_*`教程。一个向您解释如何构建 SQL 查询并触发它们*，以及*解释什么是[*准备好的语句*](http://www.php.net/manual/mysqli.quickstart.prepared-statements.php)以及如何使用它们。

我的建议：从 PHP 手册开始，它比较了不同的库并显示了所有 mysql、mysqli 和 PDO 的示例。

您甚至可以将 mysql 和 mysqli 并排比较，以便更轻松地迁移：[双过程和面向对象的接口](http://www.php.net/manual/mysqli.quickstart.dual-interface.php)。

# javascript - 无法使用 Javascript 从 dropbox.com 下载文件？

> ID：12663130
> 
> 赞同：1
> 
> 时间：2012-09-30T16:55:42.263
> 
> 标签：javascript, dropbox-api

我有可以从 dropbox.com 下载的 Web 应用程序。该应用程序是使用 Javascript 编写的。我正在使用在客户端上运行的`dropbox.min.js` [http://code.google.com/p/dropbox-js/库。](http://code.google.com/p/dropbox-js/)这是库的一个功能：

```
client.readFile(name, function(error, data) {
   if (error) {
      return showError(error);  // Something went wrong.
   }
   saveFile(name, data);
}); 
```

`saveFile(name, data)`我的功能是执行以下操作：

```
var saveFile = function(file, data)
{
    var xmlhttp = getXmlHttp(); 
    xmlhttp.open('POST', 'saving.php', true); 
    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); 
    xmlhttp.send("fileName=" + file + "&data=" + data); 

}

function getXmlHttp(){
    var xmlhttp;
    try {
        xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (E) {
            xmlhttp = false;
        }
    }
    if (!xmlhttp && typeof XMLHttpRequest!='undefined') {
        xmlhttp = new XMLHttpRequest();
    }
    return xmlhttp;
} 
```

问题是：当我尝试下载资产（例如 jpg doc、gif 等）时，我只收到 1kb 而不是完整文件。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:31:38.817

[官方 JavaScript 库](https://github.com/dropbox/dropbox-js)可以在支持 XHR 级别 2（Chrome、Firefox、IE 10）的浏览器中下载二进制文件。

参见[入门文档](https://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md)中的示例代码，调用时使用该`blob: true`选项`readFile`。

# objective-c - 添加 Cocoa Touch 静态库作为子项目

> ID：12663134
> 
> 赞同：1
> 
> 时间：2012-09-30T16:56:24.213
> 
> 标签：objective-c, ios, xcode, cocoa-touch, static-libraries

如何将可可触摸静态库作为子项目添加到 Xcode 4（本例中为 4.5）中的应用程序项目？

我看到很多截图显示了一个完整的项目嵌套在另一个项目中。但是，每当我按照教程进行操作时，我只会在项目中获得一个 .xcodeproj 文件，而不是整个项目（具有自己的项目和目标等）。

![单个文件，而不是子项目](../Images/03e05219a8ad069e227071806103fd96.png)

我也尝试过创建一个工作区 - 但仍然没有运气。我究竟做错了什么？我已经看到很多关于 SO 的问题似乎很相似，但没有什么能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:18:53.530

我曾尝试从 Finder 中拖入，它似乎适用于应用程序，但不适用于库。@Eiko 在另一个答案的评论中得到了它......这是因为该项目当时在其他地方开放。如果我转到文件 > 关闭项目（在 xcode 中的原始库项目上），然后从 Finder 中拖动它就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:04:54.330

将它从 finder 拖到 xcode 的侧边栏中。刚刚这样做时，它对我有用。

并且正如@Eiko指出的那样，如果项目首先在其他地方打开，则关闭项目，因为它只能打开一次...... ![从查找器中拖动它](../Images/ea6e21255481398efc2c3c56cccc06d9.png)

# ios - NSFetchedResultsController 与更改的记录数冲突

> ID：12663136
> 
> 赞同：0
> 
> 时间：2012-09-30T16:56:34.880
> 
> 标签：ios, nsfetchedresultscontroller

我有一个带有 ARC、故事板、支持 ios5+ 的 iPad 应用程序。

我有一个单独使用 NSFetchedResultsController 的 VC。VC 有两个指向两个不同实体的表视图。我有单条记录添加、更改、删​​除和移动在这个 VC 上运行良好的行。

我现在引入了一项新功能，使用户能够快速将多行添加到这些表格视图中。我通过提供从这个 VC 到新 VC 的 segue（模态）来做到这一点（我们称之为 quickAddVC）。用户在 quickAddVC 上输入数据，然后我转回（模态）到原始 VC。我在（我相信）再次为 VC 设置 NSFetchedResultsControllers 之前（通过备用调用）保存了新记录（我在 ViewDidUnload 中将它们设置为 nil）。

但是，我不断收到此不匹配错误。不知何故，无论我添加多少记录，它都会将 quickAddVC 发生的插入数量注册为 1 个插入，并且它以某种方式记住在我进行此比较之前 NSFetchedResultsControllers 中有多少记录。

错误：

> ***断言失败 -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit/UIKit-2372/UITableView.m:1070
> 
> didChangeObject 失败，name=NSInternalInconsistencyException 原因=无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (5) 必须等于更新前该节中包含的行数(2)，加或减从该节插入或删除的行数（1 插入，0 删除）和加或减移入或移出该节的行数（0 移入，0 移出）。

关于我做错了什么或应该尝试的任何想法都会很有用。

我不知道如何让 NSFetchedResultsControllers 简单地忘记它的原始状态并从头开始重新启动，我认为这会为我解决这个问题。

我还没有发布任何代码，我想如果需要我可以发布很多，但希望这里有足够的内容来概述设计问题并获得一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:54:15.483

只需重新发布将问题标记为已关闭的答案。

好的解决了这个问题。基本上我在错误的地方清除了 NSFetchedResultsControllers。通过在 segue 之前将它们设置为 nil 一切正常。我做了一个错误的假设，即当我再次返回时调用了 ViewDidLoad 方法，也调用了 ViewDidUnload 方法，但事实并非如此。

# iphone - iOS 6 和 Mapkit：用户位置

> ID：12663138
> 
> 赞同：0
> 
> 时间：2012-09-30T16:56:43.887
> 
> 标签：iphone, location, mapkit, ios6

当我看到我的应用程序无法通过 iOS6 上的 MapKit 知道我所在的位置时，我感到很惊讶！

我只想在地图开始时缩放到用户的位置！我该怎么做 ？

请帮我

太感谢了 ！！（PS：我看到发送路由请求的 CLCoordinate 工作正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:28:36.593

你的意思是 showsUserLocation 没有任何效果吗？还是您的位置监控没有更新您的位置？我在 iOS 6 中都测试过，对我有用。也许你可以发布一些代码。

编辑：

似乎您的应用中未激活位置监控。首先，您必须这样做才能启用配置管理器：

```
if (nil == locationManager)
    locationManager = [[CLLocationManager alloc] init];

//set the delegate for the location manager
locationManager.delegate = self;
// set your desired accuracy
locationManager.desiredAccuracy = kCLLocationAccuracyKilometer;

[locationManager startUpdatingLocation]; 
```

此时，蓝色位置指示器应该是可见的。只要您在地图上设置了 showsUserLocation = YES。

# c# - 带有建议的应用搜索中的 Metro 风格应用

> ID：12663139
> 
> 赞同：2
> 
> 时间：2012-09-30T16:56:46.597
> 
> 标签：c#, search, microsoft-metro

我正在开发一个有应用内搜索的 Metro 应用，但它有很多结果。

我不知道如何顺利​​实现结果的加载。

我在 XAML 数据绑定上使用了该示例，它异步加载了一个网格视图，并且它可以工作......

但是当我开始打字时，似乎执行了这么多中断的查询......

我需要一些机制来减少这些搜索......或者让用户更流畅......

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T05:11:24.683

您的应用程序肯定没有足够的屏幕空间来呈现所有结果吗？我会简单地获取前 100 个结果并渲染它们。

# python - 未定义类中的全局名称

> ID：12663140
> 
> 赞同：0
> 
> 时间：2012-09-30T16:56:53.167
> 
> 标签：python, class

所以我整天都在搞这个，我仍然无法让它工作

```
class pleaseWork:
    def __init__(self):
        self.foo=printThis(1)
        self.bar=printThis(2)
    def printThis(x):
        if x==1:
            print "foot"
        elif x==2:
            print "bar"

result=pleaseWork()

result.bar 
```

它只是返回

```
NameError: global name 'printThis' is not defined 
```

请告诉我为什么它不起作用...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T16:59:17.670

因为`printThis`是当前对象的一个​​属性。

```
self.foo = self.printThis(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:59:01.737

```
class pleaseWork:
    def __init__(self):
        self.foo=self.printThis(1)
        self.bar=self.printThis(2)
    def printThis(self, x):
        if x==1:
            print "foot"
        elif x==2:
            print "bar"

result=pleaseWork()

result.bar 
```

# sql - SQL转换数据类型

> ID：12663141
> 
> 赞同：0
> 
> 时间：2012-09-30T16:57:00.547
> 
> 标签：sql, sql-server, sql-server-2012

我有两列具有“文本”数据类型，我需要将第一列中的整个数据转换为“日期时间”数据类型，将第二列转换为“十进制（10,3）”数据类型。

当前数据示例：第一列：转换`20090901000005` 为`2009/08/01 00:00:05` 第二列：`.125`转换为`00.125`

任何人都可以帮助请:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:19:05.440

你可以使用这样的东西：

```
select cast(cast(col1 as varchar(8)) as datetime) + 
  cast(left(right(cast(col1 as varchar(14)), 6), 2) + ':' +
  substring(right(cast(col1 as varchar(14)), 6), 2, 2) + ':' +
  right(right(cast(col1 as varchar(14)), 6), 2) as datetime)  newDate,
  cast(cast(col2 as varchar(10)) as decimal(10, 3)) newDecimal
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/eb540/30)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:18:10.153

您可以使用 left 和 right 将字符串拆分为多个部分。然后使用转换函数将其转换为日期。ODBC 规范 (120) 格式为：yyyy-mm-dd hh:mi:ss

```
CONVERT(datetime, 
    left( firstcol, 4 ) + '-' +
    left( right( firstcol, 10 ) ,2 ) + '-' +
    left( right( firstcol,  8 ) ,2 ) + ' ' +
    left( right( firstcol,  6 ) ,2 ) + ':' +
    left( right( firstcol,  4 ) ,2 ) + ':' +
    right( firstcol,  2 )
    , 120) 
```

对于第二列：

```
CONVERT( float, right( secondcol, 3 ) ) / 1000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:20:26.393

我会这样做：

```
SELECT 
    CONVERT(DATETIME, 
        (SUBSTRING(dateValue, 1, 8) + ' ' + 
         SUBSTRING(dateValue, 9, 2) + ':' + 
         SUBSTRING(dateValue, 11, 2) + ':' + 
         SUBSTRING(dateValue, 13, 2))) as 'dateValue',
    CONVERT(DECIMAL(10, 3), decimalValue) as 'decimalValue'
FROM text_table 
```

# javascript - 动态 jQuery 效果

> ID：12663143
> 
> 赞同：1
> 
> 时间：2012-09-30T16:57:24.977
> 
> 标签：javascript, jquery

想知道 Javascript 中是否有办法通过字符串调用函数/方法名称？

场景，编写一些在目标上运行效果的 jQuery。我想让这个效果动态（可由用户更改）。

我想，理想情况下我会寻找类似的东西`jQuery('target').Effect('slideDown','slow');`

或者任何可以产生相同结果的东西，而不必有一些霸道的 Switch 语句`switch(vEffect){ case 'slideDown': jQuery().slideDown(); break; }`，在我看来，这似乎是多余的......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T16:59:18.170

您可以使用属性语法来引用方法：

```
jQuery('target')['slideDown']('slow'); 
```

或者，如果你有一个变量：

```
var methodName = 'slideDown';
jQuery('target')[methodName]('slow'); 
```

你也可以创建你自己的 jQuery 插件，调用`effect`它来获取你想要的参数，然后使用上述技术调用实际的方法。

```
jQuery.fn.effect = function(methodName, speed) {
    return this[methodName](speed);
} 
```

然后你可以这样调用：

```
jQuery('target').effect('slideDown', 'slow); 
```

# java - 计算 BigInteger 中的小数位数

> ID：12663144
> 
> 赞同：1
> 
> 时间：2012-09-30T16:57:30.263
> 
> 标签：java, class, math, biginteger

我正在尝试使用`BigInteger`side`Math.Log10`方法中的值。

```
final BigInteger answerNo = fact;
final int digits = 1 + (int)Math.floor(Math.log10(answerNo)); 
```

不幸的是，编译器说不*兼容的类型*。

如果我将`int`s 更改为`BigInteger`s 它仍然不喜欢它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T17:01:13.110

`log10`您可以通过简单地执行以下操作来找到位数，而不是执行：

```
int digits = answerNo.toString().length(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:59:44.547

1.  您不能将 a 分配`int`给 a `BigInteger`- 您可以编写：`final BigInteger answerNo = BigInteger.valueOf(fact);`
2.  `Mat.log10`期望 a `double`，而不是 a`BigInteger`

如果你不介意精度损失，你可以简单地使用双打：

```
final int digits = 1 + (int)Math.floor(Math.log10(fact)); 
```

如果您关心精度，则需要手动计算对数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-16T09:54:03.520

`BigInteger.toString()`如果您只关心位数，则在内存方面可能效率低下。

您可以改为尝试转换`BigInteger`为 a`BigDecimal`并使用`BigDecimal.precision()`来实现相同的效果。有关详细信息，请参阅此[答案](https://stackoverflow.com/a/62930827/3844538)。

# android - Android：导致方向改变问题的片段

> ID：12663146
> 
> 赞同：1
> 
> 时间：2012-09-30T16:57:36.860
> 
> 标签：android, android-fragments, android-orientation

根据[此处](http://android-developers.blogspot.de/2011/02/android-30-fragments-api.html "这里")的 Google 示例，我开发了一个基于片段的应用程序。

我的主要活动包含一个标题列表片段，如果它是在横向模式下创建的，则包含一个详细信息片段。如果应用程序以纵向模式启动，则主活动仅包含列表片段，如果单击列表项，则启动一个显示详细信息片段的新活动。

如果我保持纵向或横向模式，一切正常。但是一旦我改变方向，就会出现多个问题。

**第一个问题：**从纵向模式开始，然后切换到横向模式，活动被两次添加到活动堆栈中，我必须按两次后退按钮才能关闭我的应用程序。我无法想象这是谷歌希望它工作的方式，那么我该如何避免这种情况呢？

**第二个问题：**从横向模式更改为纵向模式时，会显示列表，而不是当前所选项目的详细信息片段。因此，我的 detailsfragment 中的所有用户输入都丢失了。这很烦人，我不知道如何处理。我是否必须在每项活动中以编程方式关注方向变化？

**第三个问题：**当我在横向模式下切换*n 个*细节时，一旦我切换到纵向模式，我必须按*n*次后退按钮来关闭我的添加，因为片段在后堆栈中（尽管它们不可见更多）。在方向改变时我必须自己清理后堆吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-30T19:28:41.097

活动是一回事。也就是说，当您更改方向时，除非您执行以下操作，否则 Activity 会重新启动：

-首先，将其添加到您的清单中（在活动标签内），这样您就可以告诉应用程序在您更改方向时要做什么：

```
android:configChanges="orientation" 
```

-其次，执行以下方法以防万一方向发生变化。如果没有，用户不会丢失其数据。

```
onOrientationChanged (int orientation) 
```

# ios - iOS Photopicker 给出 52 个问题（24 个错误，28 个警告）

> ID：12663150
> 
> 赞同：1
> 
> 时间：2012-09-30T16:57:55.973
> 
> 标签：ios, camera, compiler-errors, warnings, uiimagepickercontroller

[我从http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html)下载了 Apple Photopicker 示例。

当我构建它时，它给了我 52 个问题（24 个错误，28 个警告），而我没有进行任何更改。我正在为我的设备构建，也尝试了模拟器但没有成功。有人可以告诉我是否需要更改当前 Xcode 上的任何设置吗？我在手机上使用 iOS 5.1 并将我的部署目标设置为相同。谢谢！

以下是错误：

未知接收者'_imageView'；你的意思是“UIImageView”吗？

未知接收器'_myToolbar'；你的意思是“UIToolbar”吗？

未知接收器'_overlayViewController'；你的意思是“OverlayViewController”吗？

使用未声明的标识符“_capturedImages”

属性 'myToolbar' 需要定义方法 'myToolbar' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'myToolbar' 需要定义方法 'setMyToolbar:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'overlayViewController' 需要定义方法 'overlayViewController' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'overlayViewController' 需要定义方法 'setOverlayViewController:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'capturedImages' 需要定义方法 'capturedImages' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'capturedImages' 需要定义方法 'setCapturedImages:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'imageView' 需要定义方法 'imageView' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'imageView' 需要定义方法 'setImageView:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现 使用未声明的标识符 '_tickSound'

使用未声明的标识符“_takePictureButton”

使用未声明的标识符“_startStopButton”

使用未声明的标识符“_cancelButton”

使用未声明的标识符“_timedButton”

未知接收器'_imagePickerController'；你的意思是“UIImagePickerController”吗？

使用未声明的标识符“_tickSound”

使用未声明的标识符“_cameraTimer”

使用未声明的标识符“_tickTimer”

使用未声明的标识符“_cameraTimer”

使用未声明的标识符“_tickTimer”

使用未声明的标识符“_cameraTimer”

使用未声明的标识符“_tickTimer”

使用未声明的标识符“_cameraTimer”

使用未声明的标识符“_cameraTimer”

使用未声明的标识符“_cameraTimer”

使用未声明的标识符“_tickTimer”

属性 'tickSound' 需要定义方法 'tickSound' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'tickSound' 需要定义方法 'setTickSound:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'cameraTimer' 需要定义方法 'cameraTimer' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'cameraTimer' 需要定义方法 'setCameraTimer:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'tickTimer' 需要定义方法 'tickTimer' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'tickTimer' 需要定义方法 'setTickTimer:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'timedButton' 需要定义方法 'timedButton' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'timedButton' 需要定义方法 'setTimedButton:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'imagePickerController' 需要定义方法 'imagePickerController' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'imagePickerController' 需要定义方法 'setImagePickerController:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'cancelButton' 需要定义方法 'cancelButton' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'cancelButton' 需要定义方法 'setCancelButton:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'takePictureButton' 需要定义方法 'takePictureButton' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'takePictureButton' 需要定义方法 'setTakePictureButton:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'startStopButton' 需要定义方法 'startStopButton' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'startStopButton' 需要定义方法 'setStartStopButton:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

使用未声明的标识符“窗口”

使用未声明的标识符“_navController”

使用未声明的标识符“_window”

属性 'navController' 需要定义方法 'navController' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'navController' 需要定义方法 'setNavController:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'window' 需要定义方法 'window' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

属性 'window' 需要定义方法 'setWindow:' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

# python - 如何从 Python 中的长字符串中提取一些字符串？

> ID：12663156
> 
> 赞同：0
> 
> 时间：2012-09-30T16:58:39.327
> 
> 标签：python, string

我有很多长字符串——并非所有字符串都具有相同的长度和内容，所以这就是我不能使用索引的原因——我想从所有字符串中提取一个字符串。这是我要提取的：

```
http://www.someDomainName.com/anyNumber 
```

`SomeDomainName`不包含任何数字，并且`anyNumber`在每个长字符串中都不同。代码应该从任何可能的字符串中提取所需的字符串，并且应该考虑空格和可能出现在长字符串中的任何其他奇怪的东西 - 应该可以使用正则表达式对吗？-。有人可以帮我吗？谢谢你。

**更新：我应该说 www。和 .com 始终相同。还有一些域名！`http://www.`但是字符串中还有另一个**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:31:50.867

```
import re
results = re.findall(r'\bhttp://www\.someDomainName\.com/\d+\b', long_string) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:12:09.617

```
>>> import re
>>> pattern = re.compile("(http://www\\.)(\\w*)(\\.com/)(\\d+)")
>>> matches = pattern.search("http://www.someDomainName.com/2134")
>>> if matches:
        print matches.group(0)
        print matches.group(1)
        print matches.group(2)
        print matches.group(3)
        print matches.group(4)

http://www.someDomainName.com/2134
http://www.
someDomainName
.com/
2134 
```

在上述模式中，我们捕获了 5 个组 -

*   一个是匹配的完整字符串
*   其余的按照你看到的括号的顺序..（所以，你正在寻找第二个..） -`(\\w*)`

如果你愿意，你可以只捕获`string`你感兴趣的部分。所以，你可以`brackets`从模式的其余部分中删除你不想要的部分，只保留`(\w*)`

```
>>> pattern = re.compile("http://www\\.(\\w*)\\.com/\\d+")
>>> matches = patter.search("http://www.someDomainName.com/2134")
>>> if matches:
       print matches.group(1) 

someDomainName 
```

在上面的例子中，你不会`groups - 2, 3 and 4`像前面的例子那样有 .. 因为我们只捕获了`1 group`.. 并且总是捕获了 yes **`group 0`**.. 那是匹配的完整字符串..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:09:07.547

是的，你最简单的选择是正则表达式。这可能会完成工作：

```
import re
matcher = re.compile(r'www.(.+).com\/(.+)
matches = matcher.search(yourstring)
if matches:
    str1,str2 = matches.groups() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T17:37:03.230

如果您确定 SomeDomainName 中没有点，您可以只取字符串“.com/”的第一次出现，然后取该索引中的所有内容

这将避免您使用更难维护的正则表达式

```
exp = 'http://www.aejlidjaelidjl.com/alieilael'
print exp[exp.find('.com/')+5:] 
```

# asp.net-mvc-4 - 如何在asp.net webapi中显示从服务器（文件夹）上传的图像到索引页面？

> ID：12663157
> 
> 赞同：-3
> 
> 时间：2012-09-30T16:58:42.853
> 
> 标签：asp.net-mvc-4, asp.net-web-api, file-upload

大家好，

我在`asp.net`webapi 工作。我已经上传了我的图片，并针对三种不同的尺寸优化了这些图片。

`saved in folder`然后我在我的应用程序中单击`server(App_Data)(folder)`，现在我需要

*   从该文件夹中检索这些图像
*   在我的索引页面中显示，就像我应该取回这些图像一样
*   显示原始图像
*   在单选按钮选择上显示不同的图像

你能帮我从我的文件夹中检索这些图片（动态显示），并帮​​我在索引页面中获取和显示图片吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:27:52.420

如上所述，我知道实际上想要从文件夹路径中检索图像是正确的，因为需要在控制器中编写方法很简单

```
public static string Getimage( string url)
          {

              return url;
          } 
```

像这样在你的控制器中打电话

```
Getimage(uploadedfolders) 
```

上传的文件夹是指存储图像的文件夹的路径

# python - 使用 Python 多处理模块跨多个进程共享状态

> ID：12663159
> 
> 赞同：1
> 
> 时间：2012-09-30T16:58:58.983
> 
> 标签：python, multiprocessing

我有一个函数可以进行计算并将计算状态保存在`result`字典中（默认默认参数）。我首先运行它，然后使用多处理模块运行几个进程。我需要在每个并行进程中再次运行该函数，但是在该函数运行一次后，我需要返回缓存状态，不得重新计算该值。这个要求在我的例子中没有意义，但我想不出一个简单的现实论点需要这个限制。使用 dict 作为可变默认参数有效，但这不适用于多处理模块。我可以使用什么方法来获得相同的效果？

请注意，状态值是不能作为参数 afaik 传递给多个进程的东西（包含类值的字典）。

SO问题[Python多处理：如何在多个进程之间共享一个字典？](https://stackoverflow.com/questions/6832554/python-multiprocessing-how-do-i-share-a-dict-among-multiple-processes)似乎涵盖了类似的领域。也许我可以使用 Manager 来做我需要的事情，但如何做并不明显。或者，可以根据[https://stackoverflow.com/a/4534956/350713](https://stackoverflow.com/a/4534956/350713)将值保存到全局对象，但这似乎不太优雅。

```
def foo(result={}):
    if result:
        print "returning cached result"
        return result
    result[1] = 2
    return result

def parafn():
    from multiprocessing import Pool
    pool = Pool(processes=2)
    arglist = []
    foo()
    for i in range(4):
        arglist.append({})
    results = []
    r = pool.map_async(foo, arglist, callback=results.append)
    r.get()
    r.wait()
    pool.close()
    pool.join()
    return results

print parafn() 
```

更新：感谢您的评论。我现在有一个工作示例，发布在下面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:06:53.833

我认为在进程之间交换数据最安全的方式是使用队列，多处理模块为您带来 2 种类型的队列和 JoinableQueue，请参阅文档：

[http://docs.python.org/library/multiprocessing.html#exchangeing-objects-between-processes](http://docs.python.org/library/multiprocessing.html#exchanging-objects-between-processes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:29:51.593

此代码不会赢得任何美容奖，但对我有用。此示例类似于问题中的示例，但有一些细微的变化。这个`add_to_d`结构有点尴尬，但我没有看到更好的方法来做到这一点。

简要总结：我将`foo`'s的状态`d`（这是一个可变的默认参数）复制回`foo`，但`foo`在池创建的新进程空间中。一旦这样做了，那么`foo`在新的进程空间中将不会重新计算缓存的值。似乎这就是池初始化程序所做的，尽管文档不是很明确。

```
class bar(object):
    def __init__(self, x):
        self.x = x
    def __repr__(self):
        return "<bar "+ str(self.x) +">"

def foo(x=None, add_to_d=None, d = {}):
    if add_to_d:
        d.update(add_to_d)
    if x is None:
        return
    if x in d:
        print "returning cached result, d is %s, x is %s"%(d, x)
        return d[x]
    d[x] = bar(x)
    return d[x]

def finit(cacheval):
    foo(x=None, add_to_d=cacheval)

def parafn():
    from multiprocessing import Pool
    arglist = []
    foo(1)
    pool = Pool(processes=2, initializer=finit, initargs=[foo.func_defaults[2]])
    arglist = range(4)
    results = []
    r = pool.map_async(foo, iterable=arglist, callback=results.append)
    r.get()
    r.wait()
    pool.close()
    pool.join()
    return results

print parafn() 
```

# android - 为按钮创建一个按键功能

> ID：12663162
> 
> 赞同：-1
> 
> 时间：2012-09-30T16:59:05.610
> 
> 标签：android, keypress

我想为我的应用程序创建一个按键（按住键）功能。
例如，当我明年按下（按住）一个按钮时，textview 的值会增长，当我从按钮上拿起手指时，停止工作。

任何人都可以帮助我我最常使用哪个监听器或函数来创建它？这是我的 setOnClickListener 但我想要按钮按下（按住）工作

```
nextDay.setOnClickListener(new OnClickListener() {
   public void onClick(View v) {
         if (values >= downrange && values <= uprange)
                values++;
         if (values > uprange)
                values = downrange;
         if(values <10)
                  textDayo.setText(PersianReshape.reshape("0"+String.valueOf(values)));
         else
                textDayo.setText(PersianReshape.reshape(String.valueOf(values)));

                }
            }); 
```

感谢您的帮助，抱歉英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:50:12.607

> 当我明年按下（按住）一个按钮时，textview 的值会增长

你看过[DatePicker](http://developer.android.com/reference/android/widget/DatePicker.html)吗？这使您可以非常轻松地设置日期：![日期选择器图像](../Images/7551156a17c4901f6c617018133e5826.png)

你可以按照[这个教程](http://jayxie.com/mirrors/android-sdk/resources/tutorials/views/hello-datepicker.html)

* * *

如果您不想使用 DatePickker，您可以尝试使用[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)和 Handler 自己来完成，但这很难做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:52:39.260

我了解您正在尝试按住一个按钮（小部件）并按住它以增加年份。

如果是这种情况，那么[这个链接](http://groups.google.com/group/android-developers/browse_thread/thread/5ce6d97956952472/50a625cc3cef1bec?lnk=gst&q=%22Auto%20repeat%20button%22&pli=1)应该可以帮助你。这个想法是您使用计时器来更新用户界面。[这里](https://stackoverflow.com/questions/4284224/android-hold-button-to-repeat-action)也描述了类似的东西。如果您的问题只是设置日期，那么上面 Sam 建议的一种更简单的方法可能是。

# android - 如何在android中4秒后更改按钮的背景图像？不工作

> ID：12663168
> 
> 赞同：0
> 
> 时间：2012-09-30T16:59:16.953
> 
> 标签：android

我的示例 Android 应用程序中有两个按钮。我想随机选择一个按钮并将其背景图像更改为黄色并显示 4 秒。现在再次经过 4 秒后，我想将背景图像（变为蓝色）并显示 4 秒。现在重复按钮随机选择的过程，并对随机选择的按钮执行相同的操作，如上所述。

我已经开发了一些代码，当我测试单个按钮的代码时，它工作正常，但是当我为两个按钮运行时，它没有相应地工作。

请帮助我，我会非常感谢你。你可以检查我的代码为 wl....

```
int mainCount =0;// mainCount- could be a random number
int count_1 =0;
int count_2 =0;

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mlayout);

    mainHandler = new Handler();
    mHandler1 = new Handler();
    mHandler2 = new Handler();
            .
            .
            .
    mainRunnable.run();
}

Runnable mainRunnable = new Runnable(){

     public void run(){       
         mainHandler.postDelayed(new Runnable(){
             public void run(){
                 switch(mainCount){
                     case 0: 
                         runButton1.run();
                         mainCount++; // mainCount- could be a random number to select a button randomly
                         break;

                      case 1:
                         runButton2.run();
                         mainCount++;// mainCount- could be a random number to select a button randomly
                         break;
                    }

                    if(count==2)
                      mainCount =0;

                    mainHandler.postDelayed(this,4000);
                }
            }, 4000);
        }
    };

Runnable runButton1 =new Runnable(){

        public void run(){
            mHandler1.postDelayed(new Runnable(){
                public void run(){
                    switch(count_1){
                        case 0:
                            button1.setBackgroundResource(R.drawable.buttonyellow);
                            count_1++;
                            break;
                     case 1:
                            button1.setBackgroundResource(R.drawable.buttonblue);
                            count_1++;
                            break;                    
                     }

                    if(count_1==2)
                        count_1 = 0;

                    mHandler1.postDelayed(this,4000);
                }
            }, 4000);
        }
    };

    Runnable runButton2 =new Runnable(){
        public void run(){
            mHandler2.postDelayed(new Runnable(){
                public void run(){
                    switch(count_2){
                        case 0:
                            button2.setBackgroundResource(R.drawable.buttonyellow);
                            count_2++;
                            break;
                        case 1:
                            button2.setBackgroundResource(R.drawable.buttonblue);
                            count_2++;
                            break;                    
                    }

                   if(count_2==2)
                    count_2 = 0;

                   mHandler2.postDelayed(this,4000);
                }
            }, 4000);
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:45:49.523

首先，你不需要多个`Handler`s，一个就足够了。其次，您正在调用`mainRunnable.run()`运行`onCreate`另一个内部可运行文件，因此这更适合作为一种方法。无论如何，这是我的看法：

```
public class MyActivity extends Activity {

    private Runnable mEndlessRunnable;

    @Override
    public void onCreate(Bundle savedState) {
        super.onCreate(savedState);
        setContentView(R.layout.my_activity);

        mEndlessRunnable = new UpdateRunnable(new Handler(), new Button[] {
            (Button) findViewById(R.id.button_1),
            (Button) findViewById(R.id.button_2)
        });
        mEndlessRunnable.run();

    }

    private static class UpdateRunnable extends Runnable {

        private Random mRand = new Random();
        private Handler mHandler;
        private Button[] mButtons;

        private Button mCurButton;
        private int mState;

        public UpdateRunnable(Handler handler, Button[] buttons) {
            mHandler = handler;
            mButtons = buttons;
        }

        public void run() {
            // select a button if one is not selected
            if (mCurButton == null) {
                mCurButton = mButtons[mRand.nextInt(mButtons.length)];
            }
            // check internal state, `0` means first bg change, `1` means last
            switch (mState) {
            case 0:
                mCurButton.setBackgroundResource(R.drawable.blue_bg);
                mState = 1;
                break;
            case 1:
                mCurButton.setBackgroundResource(R.drawable.yellow_bg);
                // reset state and nullify so this continues endlessly
                mState = 0;
                mCurButton = null;
                break;
            }

            mHandler.postDelayed(this, 4000);
        }
    }
} 
```

我没有测试过上面的，但我会用上面的作为参考。享受

# json - 节点：基本 JSON 请求

> ID：12663169
> 
> 赞同：0
> 
> 时间：2012-09-30T16:59:24.577
> 
> 标签：json, node.js, request

我是 Node.js 的完整初学者，我想咨询一些我无法弄清楚的东西。

即使我进行了广泛的研究，我也找不到任何不使用插件来接收 JSON 请求的方法。我将使用它来编写移动应用程序 API。但即使我已经包含参数**请求**，我也无法通过使用**request.body**或**request.data**来访问内容。我试图提出的要求是；

```
{
    "id":"123"
} 
```

我失败的代码是；

```
var http = require('http');

function onRequest(request, response){
    console.log("Request: "+request.data+"\n");
    response.writeHead(200, {"Content-Type":"text/plain"});
    response.write("Hello, World");
    response.end();
}

http.createServer(onRequest).listen(8888); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:11:44.937

这里的问题是您没有监听`request`事件来让您知道您有数据，然后解析数据。你假设`request`有`request.data`.

它应该是：

```
var http = require('http');

function onRequest(request, response){
  var data = '';
  request.setEncoding('utf8');

  // Request received data.
  request.on('data', function(chunk) {
    data += chunk;
  });

  // The end of the request was reached. Handle the data now.
  request.on('end', function() {
    console.log("Request: "+data+"\n");
    response.writeHead(200, {"Content-Type":"text/plain"});
    response.write("Hello, World");
    response.end();
  });
}

http.createServer(onRequest).listen(8888); 
```

有关包含的方法的文档，[请参阅this](http://nodejs.org/api/http.html#http_http_clientresponse)`request`。

# java - Java JScrollPane 检测靠近底部的滚动

> ID：12663170
> 
> 赞同：2
> 
> 时间：2012-09-30T16:59:28.860
> 
> 标签：java, scroll, jpanel, jscrollpane, jlabel

我一直无法在 Internet 上找到与我的问题相关的任何内容。

我有一个 JScrollPane，它添加了一个 JPanel，并且 JPanel 填充了 JLabels。

目前，用户滚动到 JScrollPane 的底部，然后单击“下一步”按钮。

我想要做的是检测用户何时位于/靠近 JScrollPane 的底部，这样我就可以在没有用户输入的情况下触发“下一步”行为。

这甚至可能吗？

提前谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T17:05:32.317

JScrollBar 使用 BoundedRangeModel，这将接受一个 ChangeListener——因此您可以监听滚动条的变化并做出相应的响应。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T17:07:57.353

您可以使用在您的垂直滚动条中注册的[AdjustmentListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/AdjustmentListener.html)`JScrollPane`并根据事件值采取行动。

这是一个[例子](http://www.java2s.com/Code/Java/Event/DemonstratingtheAdjustmentListener.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-28T22:47:29.427

下面是一个示例，展示了如何在滚动窗格接近底部（高度的 90%）时触发事件：

```
final JScrollPane scrollPane = new JScrollPane(panel);
scrollPane.getViewport().addChangeListener(new ChangeListener() {
    public void stateChanged(ChangeEvent event) {
        JScrollBar scrollbar = scrollPane.getVerticalScrollBar();
        if (scrollbar.getValue() + scrollbar.getVisibleAmount() > scrollbar.getMaximum() * 0.9) {
            // trigger the 'Next' behaviour here
        }
    }
}); 
```

或者，也可以将侦听器添加到模型中：

```
final BoundedRangeModel model = scrollPane.getVerticalScrollBar().getModel();
model.addChangeListener(new ChangeListener() {
    public void stateChanged(ChangeEvent event) {
        if (model.getValue() + model.getExtent() > model.getMaximum() * 0.9) {
            // trigger the 'Next' behaviour here
        }
    }
}); 
```

# iphone - Marmalade 与 iOS SDK 有什么关系

> ID：12663175
> 
> 赞同：2
> 
> 时间：2012-09-30T16:59:43.250
> 
> 标签：iphone, ios, marmalade

有传言称，Apple 拒绝针对低于 6.0 的 iOS SDK 编译的应用程序。我想知道这与 Marmalade 应用程序有什么关系？我已经安装了 Xcode 4.5 并将 xcode-select 切换到它。果酱项目正确构建。这能解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:33:20.190

Marmlade 针对旧版本的 iOS SDK 进行编译。我猜是4.1或4.3

目前不支持 iPhone 5 屏幕。Marmalade 无法分发 iOS SDK。他们有带有存根函数的框架。

```
c:\Marmalade\6.0.6\s3e\deploy\plugins\iphone\sys_libs\System\Library\Frameworks\ 
```

因此，如果他们使用 4.1，而现在他们必须支持 6.0，那么他们将不得不升级所有这些假框架。它不是自动化的，那么它可能是一项非常大的手动工作。+ 调试、测试

我希望这都是关于屏幕分辨率的，他们将能够尽快提供 iPhone 5 解决方案。

# qt-creator - QtCreator 不断在项目中保存 .pro.user 文件

> ID：12663176
> 
> 赞同：0
> 
> 时间：2012-09-30T16:59:52.447
> 
> 标签：qt-creator, sync, dropbox, continuous, autosave

我遇到了一个烦人的行为`QtCreator`：当一个项目打开时，大约每 10 秒一次`QtCreator`又一次地保存项目的文件。`.pro.user`鉴于我的项目在`Dropbox`文件夹下，我看到`Dropbox`图标永远旋转。我不记得以前见过这种行为，有人对此有提示吗？

这是我的版本`QtCreator`：

```
Qt Creator 2.5.2
Based on Qt 4.8.2 (64 bit)
Built on Sep 22 2012 at 14:57:50 
```

这不是`Dropbox`同步问题，因为如果我停止其他 PC 的实例，问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:14:02.100

这是 2.5 中的默认行为，但似乎不会持续太久......

[http://qt-project.org/forums/viewthread/19491](http://qt-project.org/forums/viewthread/19491)

# google-apps-script - Google Apps 脚本 - 如何从 XmlDocument 中获取价值？

> ID：12663177
> 
> 赞同：0
> 
> 时间：2012-09-30T17:00:15.957
> 
> 标签：google-apps-script

我正在尝试获取所有用户的所有日历详细信息。我成功地得到了这个，但它以 Xml 格式返回结果如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>http://www.google.com/calendar/feeds/email-id/private/full</id>
  <updated>2012-02-15T15:34:49.000Z</updated>
  <category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/g/2005#event"/>
  <title type="text">email-id</title>
  <subtitle type="text">email-id</subtitle>
  <link href="https://www.google.com/calendar/embed?src=email-id" rel="alternate" type="text/html"/>
  <link href="https://www.google.com/calendar/feeds/email-id/private/full" rel="http://schemas.google.com/g/2005#feed" type="application/atom+xml"/>
  <link href="https://www.google.com/calendar/feeds/email-id/private/full" rel="http://schemas.google.com/g/2005#post" type="application/atom+xml"/>
  <link href="https://www.google.com/calendar/feeds/email-id/private/full/batch" rel="http://schemas.google.com/g/2005#batch" type="application/atom+xml"/>
  <link href="https://www.google.com/calendar/feeds/email-id/private/full?max-results=25" rel="self" type="application/atom+xml"/>
  <author>
    <name>Name</name>
    <email>email-id</email>
  </author>
  <generator uri="http://www.google.com/calendar" version="1.0">Google Calendar</generator>
  <openSearch:totalResults xmlns:openSearch="http://a9.com/-/spec/opensearchrss/1.0/">1</openSearch:totalResults>
  <openSearch:startIndex xmlns:openSearch="http://a9.com/-/spec/opensearchrss/1.0/">1</openSearch:startIndex>
  <openSearch:itemsPerPage xmlns:openSearch="http://a9.com/-/spec/opensearchrss/1.0/">25</openSearch:itemsPerPage>
  <gCal:timezone value="Europe/Dublin" xmlns:gCal="http://schemas.google.com/gCal/2005"/>
  <gCal:timesCleaned value="0" xmlns:gCal="http://schemas.google.com/gCal/2005"/>

  <entry>
    <id>http://www.google.com/calendar/feeds/email-id/private/full/vj39u2qedgphrp10nah92h6ho0</id>
    <published>2012-02-15T11:21:54.000Z</published>
    <updated>2012-02-15T11:21:54.000Z</updated>
    <category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/g/2005#event"/>
    <title type="text">Test Appointment</title>
    <content type="text">This is a test description</content>
    <link href="https://www.google.com/calendar/event?eid=dmozOXUycWVkZ3BocnAxMG5haDkyaDZobzAgcmFoaW1AZGFtc2" rel="alternate" title="alternate" type="text/html"/>
...

  </entry>
  </feed> 
```

我想获得标题和内容的价值。请与我分享解决方案谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T20:59:51.047

使用内置的 Xml 服务[https://developers.google.com/apps-script/service_xml](https://developers.google.com/apps-script/service_xml)。使用此服务，您可以通过 xml 文档进行解析。

# c - 这个字符串反向递归是如何工作的？

> ID：12663179
> 
> 赞同：0
> 
> 时间：2012-09-30T17:00:41.350
> 
> 标签：c, recursion

我通常很好地理解递归，但是因为我是 C 函数`strcpy`和指针的新手，所以我无法弄清楚这种递归如何反转字符串：

```
char *reverse(char *string)
{
    if (strlen(string) <= 1)
        return string;

    else
    {
        char temp = *string;

        strcpy(string, reverse(string+1));

        *(string+strlen(string)) = temp;

        return string;
    }
} 
```

这`strcpy`部分对我来说似乎有点复杂，这行的目的是什么：
`*(string+strlen(string)) = temp;`？

我意识到在翻转字符串后，您需要将开头的字符添加到字符串的结尾，但我不确定我是否理解这段代码背后的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:08:30.837

这段代码效率极低，但它的作用是：

1.  保存原来的第一个字符
2.  递归地反转字符串的其余部分（`string+1`是指向字符串中第二个字符的指针）。
3.  将（反转的）字符串的其余部分复制到左侧一个字符。
4.  将原始的第一个字符放在末尾 ( `*(string+strlen(string)) = temp;`)。

`*(string+strlen(string)) = temp;`相当于如果那`string[strlen(string)] = temp;`更容易理解。

我根本不推荐使用这段代码，因为它效率极低——它在每次迭代中复制整个字符串（并测量其长度两次），更不用说浪费堆栈空间了。

更好的实现是：

```
void reverse(char *s) {
  char *e = s+strlen(s)-1;
  while (e > s) {
    char tmp = *s;
    *s=*e;
    *e=tmp;
    s++; e--:
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:05:42.033

`*(string+strlen(string)) = temp`是所谓的*指针算术*- 该代码相当于`string[strlen(string)] = temp`. 因此，这会将**临时**字符放在字符串的末尾。请注意，字符串仍然以零结尾，因为 reverse() 返回与其参数长度相同的字符串。

再次是指针运算，这次`reverse(string+1)`与`reverse(&string[1])`- 即**reverse()将从***第二个字符开始*镜像字符串，但**strcpy()**会将其放在字符串的开头，覆盖存储在**temp**中的第一个字符并放在字符串的末尾。

然而，整个代码看起来不必要的复杂和低效，所以在吸取任何关于如何从中做事的教训之前，我会三思而后行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:24:36.230

这就是代码的工作方式。输入字符串分为两部分，第一个字符和其余部分。第一个字符存储在 中`temp`，其余字符通过递归调用反转。递归调用的结果放在结果的开头，in 的字符`temp`放在结尾。

`string is [1234567890]`

`temp is 1, string+1 is [234567890]`

`reverse(string+1) is [098765432], temp is 1`

该`strcopy`行是从`reverse(string+1)`的开头复制结果的部分`string`，并且`*(string+strlen(string)) = temp`是`temp`在 的末尾复制的部分`string`。

# css - 在页面上时突出显示页面链接 - a：活动？

> ID：12663187
> 
> 赞同：0
> 
> 时间：2012-09-30T17:02:00.477
> 
> 标签：css, hyperlink, border

我有一个包含客户列表的投资组合页面，单击该列表将显示相应的画廊——所有这些都发生在同一页面上。我希望在显示相应的画廊时突出显示客户名称。我认为 a:active 会起作用，但到目前为止还没有。有任何想法吗？（如果重要的话，我正在使用 Wordpress。）

[现场直播](http://urbanpalate.com/instyle-mag-ming-by-mango/)

`.active { border: 1px solid #ff893b; }`

```
<div id="client-list">
<p>
    <a href="?page_id=24" <?php if ($_get['page_id']=='24'){echo 'class="active"';} ?> >H&auml;agen Dazs</a><br/>
    <a href="?page_id=26" <?php if ($_get['page_id']=='26'){echo 'class="active"';} ?>>Hugo Boss Rodeo Drive</a><br/>
    <a href="?page_id=28" <?php if ($_get['page_id']=='28'){echo 'class="active"';} ?>>Ford</a><br/>
    <a href="?page_id=30" <?php if ($_get['page_id']=='30'){echo 'class="active"';} ?>>MOCA Contemporaries</a><br/>
    <a href="?page_id=32" <?php if ($_get['page_id']=='32'){echo 'class="active"';} ?>>XBOX 360 Halo 3 Sneak Preview</a><br/>
    <a href="?page_id=34" <?php if ($_get['page_id']=='34'){echo 'class="active"';} ?>>Saddlerock Smith &amp; Basso Weddings</a><br/>
    <a href="?page_id=36" <?php if ($_get['page_id']=='36'){echo 'class="active"';} ?>>Christie&apos;s</a><br/>
    <a href="?page_id=42" <?php if ($_get['page_id']=='42'){echo 'class="active"';} ?>>Instyle Magazine + Ming by Mango</a></p>

<script type="text/javascript">

  $(document).ready(function(){
    $('a').click(function(){
      $('a').removeClass('active');
      $(this).addClass('active');

     });

    });   

</script>

</div><!-- end client-list --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:21:14.883

```
 <?php
 if (!isset($_GET['page_id'])) {
    $page_id='24';
     }else{
     $page_id=$_GET['page_id'];
    }
 ?>
<html>
<head>
<title>Lab 1</title> 
<style>
 .active { 
 border: 1px solid #ff893b;
 background:red;
 color:white;
}
</style>
</head>

<body>
<div id="client-list">
<p>
    <a href="?page_id=24" <?php if ($page_id=='24'){echo 'class="active"';} ?>> H&auml;agen Dazs</a><br/>
    <a href="?page_id=26" <?php if ($page_id=='26'){echo 'class="active"';} ?>> Hugo Boss Rodeo Drive</a><br/>
    <a href="?page_id=28" <?php if ($page_id=='28'){echo 'class="active"';} ?>> Ford</a><br/>
    <a href="?page_id=30" <?php if ($page_id=='30'){echo 'class="active"';} ?>> MOCA Contemporaries</a><br/>
    <a href="?page_id=32" <?php if ($page_id=='32'){echo 'class="active"';} ?>> XBOX 360 Halo 3 Sneak Preview</a><br/>
    <a href="?page_id=34" <?php if ($page_id=='34'){echo 'class="active"';} ?>> Saddlerock Smith &amp; Basso Weddings</a><br/>
    <a href="?page_id=36" <?php if ($page_id=='36'){echo 'class="active"';} ?>> Christie&apos;s</a><br/>
    <a href="?page_id=42" <?php if ($page_id=='42'){echo 'class="active"';} ?>> Instyle Magazine + Ming by Mango</a>
</p>
</div>
</body>
 </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:18:03.333

你可以使用 jQuery。当点击链接时，添加一个类，例如突出显示该链接的“当前”，并从所有其他链接中删除该类（例如，之前突出显示的那个）。

我不认为你可以纯粹用 CSS 来做到这一点。:active 类表示您正在主动点击链接；完成单击后它不会持续存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:08:30.433

我认为你需要的不是你应该做的`a:active`，而是你应该做`a:visited`的。

```
#client-list p a:visited { border: 1px solid #ff893b; } 
```

html

```
<div id="client-list">

 <p><a href="?page_id=24">H&auml;agen Dazs</a><br/><a href="?page_id=26">Hugo Boss Rodeo Drive</a><br/><a href="?page_id=28">Ford</a><br/><a href="?page_id=30">MOCA Contemporaries</a><br/><a href="?page_id=32">XBOX 360 Halo 3 Sneak Preview</a><br/><a href="?page_id=34">Saddlerock Smith &amp; Basso Weddings</a><br/><a href="?page_id=36">Christie&apos;s</a><br/><a href="?page_id=42">Instyle Magazine + Ming by Mango</a></p>

</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T17:34:26.897

嘿，为什么不使用如下的 jquery 函数来添加和删除类。它是这样的

风格

```
#client-list a.clicked
{
 color : #ffffff;
/* or what ever style you want */
} 
```

jQuery函数

```
$(function(){.removeClass()
     $('#client-list a').bind('click' , function(){
     $('#client-list a').removeClass('clicked');
     $(this).addClass('clicked');
   } )
}) 
```

它从单击的类中删除所有锚标记并将其仅添加到当前的哪个查询。
当然，如果您为每个锚标记添加特定的点击 ID，您可以只保存之前点击的锚。

# html - How to get CSS triangles to display in a row instead of vertical

> ID：12663190
> 
> 赞同：0
> 
> 时间：2012-09-30T17:02:17.090
> 
> 标签：html, css

Basically, I want a row of triangles on the top of the page. They should be down facing. I've made the triangle in CSS but for some reason they want to go up and down on top of each other and not in a row like I need them too.

Can someone with more experience in CSS please take a look? Thanks.

**HTML:**

```
<div class="triangle-container">

    <div class="arrow-down">
    </div>

    <div class="arrow-down">
    </div>

</div> 
```

**CSS:**

```
/* BODY */

body
{
    background-color: #eee;
    height: 100%;
    width: 100%;
    z-index: 1;
    padding: none;
    border: none;
    margin: none;
}

/* Triangles! */

.triangle-container
{
    display: inline;
    height: auto;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    text-align: center;
}

.arrow-down
{
    margin-left:auto;
    margin-right:auto;
    width:0;
    height:0;
    border-left:50px solid transparent;
    border-right:50px solid transparent;
    border-top:50px solid #FF6A00;
} 
```

[**jsFiddle demo**](http://jsfiddle.net/ezMa7/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T17:09:32.203

You must apply `display:inline` to those elements which you want to be displayed inline, not their container.

In your case, it should be `inline-block`, because it should be `inline` element which behaves as `block` element. Read more **[here](http://www.w3schools.com/cssref/pr_class_display.asp)**.

* * *

Put `display:inline-block` for the `.arrow-down` and remove it from `.triangle-container`:

```
.triangle-container
{
    display: inline; /* Remove this line */
    height: auto;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    text-align: center;
}

.arrow-down
{
    display: inline-block; /* Add this line */
    margin-left:auto;
    margin-right:auto;
    width:0;
    height:0;
    border-left:50px solid transparent;
    border-right:50px solid transparent;
    border-top:50px solid #FF6A00;
} 
```

**Live demo: [jsFiddle](http://jsfiddle.net/ezMa7/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T17:09:13.347

I added a `float:left` to your `.arrow-down` class. (and updated a couple of classes)

Fiddle here : [http://jsfiddle.net/KwKe8/](http://jsfiddle.net/KwKe8/)

# asp.net - 在 SharePoint 2010 中使用我的旧成员资格提供程序

> ID：12663192
> 
> 赞同：1
> 
> 时间：2012-09-30T17:02:49.633
> 
> 标签：asp.net, sharepoint-2010, membership-provider, claims-based-identity

我有一个自定义成员资格提供程序，我在 SharePoint 2007 服务和 .NET Web 应用程序中都使用它。现在我正在尝试将 SharePoint 平台更新为 2010 Foundation，但我的提供程序无法正常工作。下面是两个示例，它们都对用户进行身份验证并使用相同的密钥设置身份验证 cookie。

```
MembershipProvider provider = Membership.Providers["Provider"];

//Alternative one using cookiename (ProviderUserKey from other source then provider)
if (provider.ValidateUser(user, passwd))
{
    FormsAuthentication.SetAuthCookie(cookieName, false);
    Response.Redirect("/");
}
else
{
    ShowErrorMsg();
}

//Alternative two using provider to get ProviderUserKey same as cookieName above
if (provider.ValidateUser(user, passwd))
{
    MembershipUser memberUser = provider.GetUser(user, false); //false or true doesnt matter in this provider
    FormsAuthentication.SetAuthCookie(memberUser.ProviderUserKey.ToString(), false);
    Response.Redirect("/");
}
else
{
    ShowErrorMsg();
} 
```

问题是 SharePoint 2010 使用基于声明的身份，我确实尝试了以下但没有成功。

```
MembershipProvider provider = Membership.Providers["Provider"];

if (provider.ValidateUser(user, passwd))
{
    SPFormsAuthenticationProvider authProvider = IisSetting.FormsClaimsAuthenticationProvider;

    SecurityToken token = SPFormsUserNameSecurityTokenHandler.CreateSecurityToken(authProvider.MembershipProvider, cookieName, passwd);
    SPFederationAuthenticationModule.Current.SetPrincipalAndWriteSessionToken(token);
} 
```

但这对我不起作用。有谁知道如何将声明身份基于另一个密钥，然后是提供的用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:54:51.857

如果你使用`Claim-based authentication`with `FBA`than 你应该使用 like ：

```
 bool status = SPClaimsUtility.AuthenticateFormsUser(Context.Request.UrlReferrer, UserName, Password);
  if (status)
  {
          // do your stuff.
  } 
```

# asp.net-mvc - MVC 验证复选框 - 当另一个复选框被选中时将一个复选框设置为 true

> ID：12663199
> 
> 赞同：0
> 
> 时间：2012-09-30T17:03:45.830
> 
> 标签：asp.net-mvc, checkbox

我开始学习MVC。在 WebForms 中，您可以轻松地做到这一点......

```
If(checkbox.checked == true)
   checkbox2.checked = true 
```

这是我对 MVC 的看法

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{ 
    if (ChkBox1)
    { 
        ChkBox2 = true
        yield return ChkBox2;
    } 
} 
```

这当然行不通。任何人都有任何想法。这似乎是一件简单的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:38:52.483

我可能会在 javascript 中使用 jQuery 之类的库而不是服务器端来执行此操作。

```
$('chkbox1').change(function() { $('chkbox2').prop("checked",   $('chkbox1').prop("checked"))  }); 
```

# gmail - OAUTH2 授权过程中设备的 GTalk 范围无效

> ID：12663202
> 
> 赞同：2
> 
> 时间：2012-09-30T17:04:00.760
> 
> 标签：gmail, google-api, oauth-2.0, google-talk

我希望我的应用能够使用 OAuth2 身份验证登录到 GTalk 和 GMail。我的应用程序在功能手机上运行，​​无法访问内部浏览器，因此我使用[此处](https://developers.google.com/accounts/docs/OAuth2ForDevices)所述的“设备”OAuth 流程。

POST`https://accounts.google.com/o/oauth2/device/code`返回`invalid_scope`错误（400 HTTP 错误），范围设置为 GTalk

```
scope="https://www.googleapis.com/auth/googletalk" 
```

如果我将范围设置为 GMail ( `https://mail.google.com/`) ，它会返回相同的错误，但如果我将范围设置为 Youtube ( `https://gdata.youtube.com`) 一切正常。

是否有描述不同范围的源（Web、已安装的应用程序或设备）可访问性的“白名单”，即不允许从设备对 GTalk 和 GMail 进行 OAuth2 身份验证？

如果是这种情况，在功能手机上运行的 J2ME 应用程序将无法再登录 GTalk/Gmail 服务，而 OAuth2 将是登录这些服务的唯一方式。

这些手机不是智能手机，既不运行 Android 也不运行 iOS！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:50:24.007

来自 Google [Groups 上的 Google 的 OAuth2 开发人员组](https://groups.google.com/d/topic/oauth2-dev/Rc4CJiykhk4/discussion)（您也在其中发布了[这个问题](https://groups.google.com/d/topic/oauth2-dev/TUN5iBx0bQE/discussion)，但到目前为止没有得到答案）：

> 并非所有范围都支持与设备流一起使用，这就是您收到错误的原因。

谷歌最好在某个地方记录一下，并说明这些范围是否会在以后为*设备*流启用。

# c - 增加结构成员

> ID：12663203
> 
> 赞同：14
> 
> 时间：2012-09-30T17:04:15.063
> 
> 标签：c, struct, increment, pre-increment

假设我有一个定义如下的结构

```
struct my_struct
{
     int num;
}; 
```

……

在这里我有一个指针`my_struct`，我想做一个增量`num`

```
void foo(struct my_struct* my_ptr)
{
     // increment num
     // method #1
     my_ptr->num++;

     // method #2
     ++(my_ptr->num);

     // method #3
     my_ptr->++num;

} 
```

这三种递增方式`num`做同样的事情吗？当我们这样做时，前置增量是否真的比后置增量更有效？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T17:05:35.673

前两个将具有相同的效果（当像这样单独在一行上时），但第三种方法不是有效的 C 代码（你不能把它放在`++`那里）。

至于效率，没有区别。您可能听说过人们谈论的不同之处在于，在 C++ 中，您何时递增非指针数据类型，例如迭代器。在某些情况下，预增量可能会更快。

[您可以使用GCC Explorer](http://gcc.godbolt.org/#%7B%22version%22:3,%22filterAsm%22%3a%7B%22labels%22%3atrue,%22directives%22%3atrue,%22commentOnly%22%3atrue%7D,%22compilers%22%3a%5B%7B%22source%22%3a%22struct%20my_struct%5Cn%7B%5Cn%20%20%20%20int%20num;%5Cn%7D;%5Cn%20%20%5Cnvoid%20foo%28struct%20my_struct%2a%20my_ptr%29%5Cn%7B%5Cn%20%20%20%20my_ptr-%3Enum++;%5Cn%7D%5Cn%5Cnvoid%20bar%28struct%20my_struct%2a%20my_ptr%29%5Cn%7B%5Cn%20%20%20%20++%28my_ptr-%3Enum%29;%5Cn%7D%5Cn%22,%22compiler%22%3a%22/usr/bin/clang++%22,%22options%22%3a%22-O2%20-march=native%22%7D%5D%7D)查看生成的代码。

```
void foo(struct my_struct* my_ptr)
{
    my_ptr->num++;
}

void bar(struct my_struct* my_ptr)
{
    ++(my_ptr->num);
} 
```

输出：

```
foo(my_struct*):                      # @foo(my_struct*)
    incl    (%rdi)
    ret

bar(my_struct*):                      # @bar(my_struct*)
    incl    (%rdi)
    ret 
```

如您所见，没有任何区别。

前两者之间唯一可能的区别是在表达式中使用它们时：

```
my_ptr->num = 0;
int x = my_ptr->num++; // x = 0

my_ptr->num = 0;
int y = ++my_ptr->num; // y = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T17:52:48.150

如果您的唯一意图是增加 num 的值，那么第一个和第二个方法将对被调用者方法产生相同的意图结果。

但是，如果您将代码更改为以下内容，则可以看到 gcc 生成的代码（汇编级代码）之间的区别：

```
struct my_struct
{
     int num;
};

void foo(struct my_struct* my_ptr)
{
        printf("\nPost Increment: %d", my_ptr->num++);
}

int main()
{
        struct my_struct a;
        a.num = 10;

        foo(&a);
} 
```

现在编译它使用： gcc -masm=intel -S structTest.c -o structTest.s 这要求 gcc 生成汇编代码：

在文本编辑器中打开 structTest.s。

```
foo:
.LFB0:
         push    rbp
        mov     rbp, rsp
        sub     rsp, 16
        **mov     QWORD PTR [rbp-8], rdi**
        mov     rax, QWORD PTR [rbp-8]
        mov     eax, DWORD PTR [rax]
        mov     edx, eax
        **lea     ecx, [rax+1]**
        mov     rax, QWORD PTR [rbp-8]
        mov     DWORD PTR [rax], ecx
        mov     eax, OFFSET FLAT:.LC0
        mov     esi, edx
        mov     rdi, rax
        mov     eax, 0
        call    printf
        leave
        ret
        .cfi_endproc

main:
.LFB1:
        push    rbp
        mov     rbp, rsp
        sub     rsp, 16
        **mov     DWORD PTR [rbp-16], 10
        lea     rax, [rbp-16]
        mov     rdi, rax
        call    foo**
        leave
        ret
        .cfi_endproc 
```

当您将操作更改为预增量时，将生成以下代码：

```
foo:
.LFB0:
        .cfi_startproc
        push    rbp
        mov     rbp, rsp
        sub     rsp, 16
        **mov     QWORD PTR [rbp-8], rdi**
        mov     rax, QWORD PTR [rbp-8]
        mov     eax, DWORD PTR [rax]
        **lea     edx, [rax+1]**
        mov     rax, QWORD PTR [rbp-8]
        **mov     DWORD PTR [rax], edx**
        mov     rax, QWORD PTR [rbp-8]
        **mov     edx, DWORD PTR [rax]**
        mov     eax, OFFSET FLAT:.LC0
        mov     esi, edx
        mov     rdi, rax
        mov     eax, 0
        call    printf
        leave
        ret
        .cfi_endproc 
```

因此，您会看到在第二种情况下，编译器递增 num 值并将此 num 值传递给 printf()。

在性能方面，我希望后增量更有效，因为内存位置被触摸的次数更少。

上面代码中的重要行已在**之间进行了标记。

# python - 适当的数据可视化来绘制睡眠数据

> ID：12663205
> 
> 赞同：0
> 
> 时间：2012-09-30T17:04:18.493
> 
> 标签：python, matplotlib

我想可视化的数据是我的个人睡眠数据，来自 Zeo（如果您不熟悉，请访问 www.myzeo.com）。数据是 ~50x1000 表，每行代表一夜的睡眠，每列是 0-5 的整数，代表以 30 秒间隔记录的睡眠“类型”。所以第一列是第一个 30 秒睡眠的分数，第二列是第二个 30 秒睡眠间隔的分数，依此类推。

首先，我想简单地映射睡眠类型映射到颜色的一行（夜间）睡眠数据。我一直在浏览 matplotlib 的图库和示例，但是对于初学者来说，要弄清楚最合适的绘图类型是什么有点不知所措。

看起来[这个颜色条（第二个？）](http://matplotlib.org/examples/api/colorbar_only.html)可能接近我正在寻找的东西，但我不确定。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:27:18.893

这是一个非常具体和狭隘的问题。也就是说，我发现提出的彩条可视化存在两个问题：

1.  它仅通过颜色区分不同的数据段。短暂的睡眠中断间隔可能太窄而不易看到（1 像素宽度的切片不是很大）

2.  根据您的受众，许多调色板不能很好地满足色盲人士的需求。这可能会进一步降低基于颜色条的绘图传达信息的能力。

如果您查看 MyZeo 网站上的示例图表，它们使用条形图来传达基于颜色*和*高度的信息。只要采样的间隔数量合理，条形图或折线图将是您数据的合理选择。（尽管如果您的数据集需要 1,000 个单独的条形图，您可能需要考虑抖动数据集以使其清晰显示）

这个 matplotlib 示例似乎提供了一个基于高度着色的条形图：http: [//matplotlib.org/examples/pylab_examples/hist_colormapped.html](http://matplotlib.org/examples/pylab_examples/hist_colormapped.html)

*如果您确实对数据可视化感兴趣，Tufte 的《定量信息的视觉显示》*等书籍可能值得一读：这是一本经典的入门读物，介绍了在同一图形上显示多个维度的信息时所涉及的设计选择。

# matlab - 如何提取矩阵的一行

> ID：12663207
> 
> 赞同：1
> 
> 时间：2012-09-30T17:05:03.550
> 
> 标签：matlab, matrix

在所有其他语言中，如果我有一个矩阵，如果我调用一维索引，结果将是一个数组。我不知道为什么在 Matlab 中，如果你取一个矩阵的单个索引，你会得到一个元素，这很愚蠢。
无论如何在C中：

```
mat[4][4]; 
```

mat[0] 是一个数组。

在 Matlab 中：

```
mat=[1 2; 3 4]; 
```

如何取矩阵的第一行？mat(1) 是 1，而不是 [1 2]。

编辑：还有另一个问题，我有这个功能的问题：

```
function str= split(string, del)

index=1;
found=0;

str=['' ; ''];

for i=1:length(string)
    if string(i)==del
        found=1;
        index=1;
    elseif found==1
        str(2,index)=string(i);
        index=index+1;
    else
        str(1,index)=string(i);
        index=index+1;
    end
end

end 
```

这有时会返回一个矩阵，有时会返回一个数组。
例如，如果我使用 split('FF','.') 我得到 'FF' 作为结果，但是如果我想返回一个矩阵怎么办？我什至不能选择矩阵的维度，在这种情况下，弱类型语言是一个很大的缺点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T17:08:25.080

你必须说出你想要哪些列。: 代表一个维度中的所有索引，所以取第一行

```
mat(1,:) 
```

这并不愚蠢，但很有用。如果您使用只有一个索引的矩阵寻址，它会隐式转换为向量。这使您可以选择使用线性索引（请参阅[sub2ind](http://www.mathworks.se/help/matlab/ref/sub2ind.html)）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T17:13:27.017

这将提取第二行

```
vector = mat(2,:) 
```

这将提取第二列

```
vector = mat(:,2) 
```

您可以使用

```
vector = mat(end,:) 
```

提取最后一行

希望这可以帮助你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T17:25:10.623

从[MATLAB 中的矩阵索引](http://www.mathworks.com/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)：

> 当您仅使用一个下标对矩阵 A 进行索引时，MATLAB 会将 A 视为其元素被串成一个长列向量，方法是连续向下排列

我只是希望它不再让你看起来很愚蠢（以及来自 angainor 和 Marwan 的正确答案）

# java - 如何将对象从primefaces上的树传递到视图

> ID：12663212
> 
> 赞同：1
> 
> 时间：2012-09-30T17:05:37.027
> 
> 标签：java, ajax, jsf, primefaces

我开发了一个带有 primefaces 树组件的导航菜单。树节点内部有一个 Project 对象作为数据。我希望能够加载一个带有项目详细信息的视图，当我单击每个项目时，这些详细信息会动态加载。

为此，我在树上定义了一个 ajax 事件选择：

```
<h:form>
    <p:tree value="#{treeBean.root}" var="node"
                    selection="#{treeBean.selectedNode}" id="tree" >
                    <p:ajax event="select" listener="#treeBean.onNodeSelect}"/>
        <p:treeNode styleClass="treeNode">
        <h:outputText value="#{node}" />
        </p:treeNode>
    </p:tree>
</h:form> 
```

在 treeManagedBean 中调用 onNodeSelectMethod：

```
@ViewScoped
@Component("treeBean")
@ManagedBean
public class TreeManagedBean{

private Project selectedProject;

public Project getSelectedProject(){
    return selectedProject;
}

public void setSelectedProject(Project project){
    this.selectedProject = project;
}

    public void onNodeSelect(NodeSelectEvent event) {
            this.selectedProject = (Project)event.getTreeNode().getData();
            FacesContext context = FacesContext.getCurrentInstance();
            ConfigurableNavigationHandler handler = (ConfigurableNavigationHandler)             context.getApplication().getNavigationHandler();
            handler.performNavigation("viewProject");
        } 
```

然后我通过 faces-config.xml 加载 viewProject.xhtml，并在另一个 managedBean 中填充属性：

```
@Component("projectView")
@ViewScoped
@ManagedBean
public class ProjectView {
    @ManagedProperty("#{treeBean.selectedProject}")
    private Project project; 
} 
```

视图加载没有任何错误，但该属性从未设置。ajax 调用有效并且正在第一个 bean 中设置属性。这是这样做的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:25:58.637

我解决了它只是向 managedBeans 添加了一个标识符，因为我有义务提供一个默认构造函数：

```
@ViewScoped
@Component("treeBean")
@ManagedBean("treeBean")
public class TreeManagedBean{ 
   public TreeManagedBean(){}
} 
```

和

```
@Component("projectView")
@ViewScoped
@ManagedBean("projectView")
public class ProjectView {
    @ManagedProperty("#{treeBean.selectedProject}")
    private Project project; 
    public ProjectView(){}
} 
```

# python - 如何在第一个轴上使用 numpy.nditer 进行缩减

> ID：12663215
> 
> 赞同：10
> 
> 时间：2012-09-30T17:05:48.903
> 
> 标签：python, numpy

我试图了解如何使用 nditer 进行缩减，在我的情况下将 3d 数组转换为 2d 数组。

我按照这里的帮助 [http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html](http://docs.scipy.org/doc/numpy/reference/arrays.nditer.html)并设法创建了一个在输入的最后一个轴上应用归约的函数。有了这个功能

```
def nditer_sum(data, red_axes):
    it = numpy.nditer([data, None],
            flags=['reduce_ok', 'external_loop'],
            op_flags=[['readonly'], ['readwrite', 'allocate']],
            op_axes=[None, red_axes])
    it.operands[1][...] = 0

    for x, y in it:
        y[...] = x.sum()

    return it.operands[1] 
```

我可以得到相当于 data.sum(axis=2) 的东西

```
>>> data = numpy.arange(2*3*4).reshape((2,3,4))
>>> nditer_sum(data, [0, 1, -1])
[[ 6 22 38]
[54 70 86]]
>>> data.sum(axis=2)
[[ 6 22 38]
[54 70 86]] 
```

因此，要获得与 data.sum(axis=0) 等效的内容，尽管将参数 red_axes 更改为 [-1, 0,1] 就足够了，但结果却大不相同。

```
>>> data = numpy.arange(2*3*4).reshape((2,3,4))
>>> data.sum(axis=0)
[[12 14 16 18]
 [20 22 24 26]
 [28 30 32 34]]
>>> nditer_sum(data, [-1, 0, 1])
[[210 210 210 210]
 [210 210 210 210] 
 [210 210 210 210]] 
```

在 nditer_sum (for x,y in it:) 内部的 for 循环中，迭代器循环 2 次，每次给出一个长度为 12 的数组，而不是循环 12 次，每次给出一个长度为 2 的数组。我已经多次阅读了 numpy 文档，并在谷歌上对此无济于事。我正在使用 numpy 1.6 和 python 2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T06:49:18.347

`axis=0`如果`nditer`订单更改为 ，则案例正常工作`F`。现在有 12 个步骤，其中包含您想要的大小为 (2,) 的数组。

```
it = np.nditer([data, None],
        flags=['reduce_ok', 'external_loop'],
        op_flags=[['readonly'], ['readwrite', 'allocate']],
        order='F',     # ADDED to loop starting with the last dimension
        op_axes=[None, red_axes]) 
```

但是对于中间`axis=1`情况，没有这样的解决方案。

* * *

对选定维度进行迭代的另一种方法是在降维数组上构造一个“multi_index”迭代器。我在[https://stackoverflow.com/a/25097271/901925](https://stackoverflow.com/a/25097271/901925)中发现 `np.ndindex`使用这个技巧来执行“浅迭代”。

对于这种`axis=0`情况，此功能有效：

```
def sum_1st(data):
    y = np.zeros(data.shape[1:], data.dtype)
    it = np.nditer(y, flags=['multi_index'])
    while not it.finished:
        xindex = tuple([slice(None)]+list(it.multi_index))
        y[it.multi_index] = data[xindex].sum()
        it.iternext()
    return y 
```

或推广到任何轴：

```
def sum_any(data, axis=0):
    yshape = list(data.shape)
    del yshape[axis]
    y = np.zeros(yshape, data.dtype)
    it = np.nditer(y, flags=['multi_index'])
    while not it.finished:
        xindex = list(it.multi_index)
        xindex.insert(axis, slice(None))
        y[it.multi_index] = data[xindex].sum()
        it.iternext()
    return y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:43:09.847

更改线路`y[...] = x.sum()`以`y[...] += x`修复它（如此处的示例所示[）](http://docs.scipy.org/doc/numpy-dev/reference/arrays.nditer.html#reduction-iteration)。

# android - 删除 MySQL 数据后更新 ListView

> ID：12663216
> 
> 赞同：0
> 
> 时间：2012-09-30T17:05:52.100
> 
> 标签：android, android-listview

这是我的上下文菜单中的删除调用：

```
 @Override
    public boolean onContextItemSelected(MenuItem item) {

        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item
                .getMenuInfo();
        int clickedPosition = info.position;
        tvInt = reviews.get(clickedPosition);

        switch (item.getItemId()) {
        case R.id.Delete:

            new DeleteCommentTask().execute();

            reviews.remove(clickedPosition);
            adapter.notifyDataSetChanged();

            Toast.makeText(getActivity(), "Review Deleted",
                    Toast.LENGTH_SHORT).show();

            return true;

        }
        return false;

    } 
```

我确实验证了在我的 DeleteCommentTask 中它确实从我的数据库中删除了评论。但是 ListView 没有更新？

**更新：这是我正在使用的适配器：**

```
 MyReviewObject co = new MyReviewObject[reviews.size()];
            int index = 0;

            for (@SuppressWarnings("unused")
            String i : reviews) {
                co[index] = new MyReviewObject(datelist.get(index),
                        reviews.get(index), items.get(index),
                        cats.get(index));
                index++;
            }

            adapter = new MyReviewAdapter(getActivity(), co);
            setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:12:56.187

查看更新的答案

不要这样做

评论.remove(clickedPosition);

只需从适配器的 getView 中使用它的数据源中删除注释即可。从字符串的 Arraylist 中说。

在此之后，只有通知适配器才能解决问题

尝试在 DeleteCommentTask 的 onPostExecute 中执行此代码

```
adapter.notifyDataSetChanged();
Toast.makeText(getActivity(), "Review Deleted", Toast.LENGTH_SHORT).show(); 
```

尝试将参数传递给 DeleteCommentTask 的 Execute 方法，该方法将通知要删除的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:57:12.133

这不起作用的原因是因为：“*您需要删除/删除 co 数组中的项目。这是不可能的/推荐的，`ArrayList`在适配器中使用“MyReviewObject”。* “

我需要使用`ArrayList`可以动态收缩的 Array 不能。另外，我只是删除了一个 String `ArrayList`。我的`Array`对象内部有多个 ArrayList。 **所以我应该删除整个对象**。

# git - git 存储库中的多个历史记录是否可能导致未来的问题？

> ID：12663220
> 
> 赞同：1
> 
> 时间：2012-09-30T17:06:37.390
> 
> 标签：git, github, git-filter-branch

我曾经`git filter-branch`在我的一个存储库中更新大量提交（更正错误的作者和提交者电子邮件）。我使用的命令是：

```
git filter-branch -f --env-filter "GIT_AUTHOR_EMAIL='mike.r.anderson.13@gmail.com'; GIT_COMMITTER_EMAIL='mike.r.anderson.13@gmail.com';" 
```

然后是 git pull 以与远程存储库同步

这很好用，但是当我查看 GitHub 中的历史记录时，我看到了两个完整的历史记录，一个在更改之前，一个在更改之后。最终在一个点合并。

*   [https://github.com/mikera/vectorz/network](https://github.com/mikera/vectorz/network)（感谢 Will 和 Petr，现在修复了单一历史记录！）

这是一个问题吗？或者我可以安全地将这两个历史都留在那里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T17:23:07.327

首先，`git filter-branch`旨在改写历史，而不是与另一个平行的历史。如果你`filter-branch`通过合并完成了你的操作，你就用错了。

这确实会导致混乱，因为您有时可能会看到一条历史线，有时会看到另一条历史线。任何时候你有多个历史记录进行相同的更改，这是一件坏事。想象一下诸如`bisect`or之类的操作`blame`，您试图在其中找到引入特定更改的提交。现在，经常有两个历史提交实际上做同样的事情——你想要哪一个？

即使是`git log`按日期排序的基本操作，如 ，也可能会显示长时间的“重复”提交。显然不是想要的行为。

从更理想的角度来看：你是否应该重写历史来纠正这样一个小问题？git 具有针对这种确切情况的功能：“ [mailmap](http://git-scm.com/docs/git-shortlog#_mapping_authors) ”。

您通常应该避免重写已发布的历史记录，除非存在安全问题（即：披露问题......即使这样，一旦秘密泄露，最好使秘密无效，而不是在可能的情况下简单地限制其公开） ，或者像这样的情况，其中发布了一些糟糕的历史，这使得存储库难以使用。

请注意，运行历史重写命令（例如发布`filter-branch`的`rebase`历史记录）将使 git 不再将您的本地提交视为“基于”现有的上游提交。因此，正常推送会导致如下错误：

```
! [rejected]        master -> master (non-fast forward) 
```

所以你需要“强制”推动，即：`git push -f`. 关于 apply 的标准警告`-f`（确保不要破坏其他任何人的提交），当然还有关于[重写 public history](http://git-scm.com/docs/git-rebase#_recovering_from_upstream_rebase)的警告。

除了那些关于重写公共历史的警告之外，只要你*真的重写*，而不是创建平行的历史，那么就没有必要担心了。为了完整起见，让我们总结一下主要的潜在问题：

*   任何拥有现有副本的人，如果在推送之前没有重新调整到您的新历史记录，将收到“非快进”警告，并可能认为他们需要合并。
*   任何将旧历史与新历史合并并推送的人都会导致“旧”历史被恢复。
*   邮件列表、电子邮件等中从“旧”历史提交 id 的旧引用将不再相关。

由于第三点，我建议保留“旧”历史的标记，以便任何提及提交 ID 的历史讨论仍然指向有效的地方。但是，一定要使用一些可以明显表明该标签*不*用于新开发的东西来命名标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T17:14:48.480

好吧，对于初学者来说，您仍然会在历史记录中使用错误的已提交电子邮件进行提交，那么您真的得到了什么吗？:-)

除此之外，我认为这主要是让*用户*感到困惑而不是*工具*，这可能是更糟糕的情况。无论选择哪个提交，例如`git blame`将选择一定是相当随机的，很可能取决于合并提交的第一个父级......

一般来说，任何类型的历史浏览都会很痛苦——对你来说，而不是工具。所以现在以某种方式修复它是个好主意，因为随着时间的推移修复它只会变得更加困难。

# eclipse - Eclipse AVD 需要 30 分钟才能启动？

> ID：12663225
> 
> 赞同：0
> 
> 时间：2012-09-30T17:07:26.107
> 
> 标签：eclipse, avd, launch

所以我刚刚开始学习 Eclipse 并且只知道非常基础的知识。我的 AVD 大约需要 30 分钟才能启动。我用谷歌搜索了这个问题，发现 AVD 启动需要花费 2-3 分钟的时间。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:20:32.257

我最初也遇到了同样的问题，但它需要的时间没有你说的那么多（将近 5 分钟），我通过更改优先级来解决这个问题。优先级 = 处理器时间 - 所以更高的优先级意味着进程获得更多时间。

它可以通过 `Task Manager -> processes -> emulator-arm.exe (right click) -> set priority to above normal`或高来完成。（我在窗口 7 中这样做了）

您还可以通过增加设备 Ram 大小来更改模拟器的加载时间。有关更多详细信息，请点击[此处的链接](https://stackoverflow.com/questions/1554099/slow-android-emulator)

# ios - 使用照片映射注释图钉

> ID：12663235
> 
> 赞同：1
> 
> 时间：2012-09-30T17:09:05.797
> 
> 标签：ios, mkmapview, mkannotationview

我对注释的图像视图感到困惑。

我试过这个：

[如何在地图图钉注释中显示图像？](https://stackoverflow.com/questions/4759947/how-can-i-show-image-in-map-pin-anotaton)

我的地图视图可以执行该问题的第一张图片中显示的内容。
现在我正在尝试做第二张图片中显示的内容。

这是问题：

当我拍照时，我的地图视图也会创建一个带有我刚刚拍摄的照片的图钉。

怎么能得到？

我想让 leftCalloutAccessoryView 从 iphone 的相机库中加载图像。

这是我的 viewForAnnotation 代码：

```
static NSString *identifier = @"MyLocation";
if ([annotation isKindOfClass:[MPViewPlaceMark class]]) {

    MKPinAnnotationView *annotationView =
    (MKPinAnnotationView *)[MapView dequeueReusableAnnotationViewWithIdentifier:identifier];

    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc]
                          initWithAnnotation:annotation
                          reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    UIImageView *leftIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"LeftIconImage.png"]];
    annotationView.leftCalloutAccessoryView = leftIconView;

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;

    return annotationView;
} 
```

# c# - 使控件侧边消失

> ID：12663240
> 
> 赞同：0
> 
> 时间：2012-09-30T17:10:08.823
> 
> 标签：c#, winforms

> **可能重复：**
> [如何在 C# 中向我的控件添加移动效果？](https://stackoverflow.com/questions/6102241/how-can-i-add-moving-effects-to-my-controls-in-c)

我正在处理一个 C# WinForms 项目，并创建了一个登录表单。

我希望当我单击此登录表单中的链接时，使登录表单中的控件侧向消失（就像您在 iPad 上移动手指时的效果一样），并出现其他控件。

有没有机会使这成为可能（使用 WinForm）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:37:20.567

检查 Windows 窗体的 DevExpress 滑块控件。

你应该在这里找到一些例子：

[http://www.devexpress.com/Products/NET/Controls/WinForms/index.xml](http://www.devexpress.com/Products/NET/Controls/WinForms/index.xml)

[http://www.devexpress.com/Products/NET/Controls/WinForms/Bars/toolbar_menu.xml](http://www.devexpress.com/Products/NET/Controls/WinForms/Bars/toolbar_menu.xml)（幻灯片菜单效果）

# apache-kafka - 如何从 Kafka 主题中检索特定数量的消息

> ID：12663241
> 
> 赞同：3
> 
> 时间：2012-09-30T17:10:19.090
> 
> 标签：apache-kafka

我正在使用 queuedchunks.max 属性一次从主题中检索 10 条消息，但它返回了所有可用的消息（超过 10 条）。如果有办法只检索所需的消息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-17T02:48:56.807

听起来你正在寻找`max.poll.records`.

如果您想使用少于默认数量的记录，您可以手动在应用程序中添加一个计数器，然后在看到这么多消息时中断循环。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-03T16:36:15.317

[此链接](http://riccomini.name/posts/kafka/2012-10-05-kafka-consumer-memory-tuning/)可能会帮助您理解。

请按照[kafka-configuration](http://kafka.apache.org/configuration.html)中所示设置**batch.size**的值，以一次从一个主题获取 10 条消息。

# ruby-on-rails - 在 Rails 3.2.8 上允许带有 mongoid + ruby 的 html 标签

> ID：12663244
> 
> 赞同：0
> 
> 时间：2012-09-30T17:11:08.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, wysiwyg

我的数据库中有这个对象：

```
 => #<Page _id: 50683d421d41c8363d000060, _type: nil, created_at: 2012-09-30 12:38:26 UTC, title: "Terms", description: "Terms of use... <b>description</b>", published: true, slug: "terms"> 
```

在描述字段中，我添加了[https://github.com/Nerian/bootstrap-wysihtml5-rails](https://github.com/Nerian/bootstrap-wysihtml5-rails) a **b**粗体标签。

但是当我渲染我的页面时，我可以看到：

```
Terms of use... <b>description</b> 
```

**如何在我的 mongodb 数据库数据上呈现 html 标签？**

### 预览

[http://www.image-share.com/ijpg-1766-71.html](http://www.image-share.com/ijpg-1766-71.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:13:50.740

为了安全起见，Rails 默认会转义 html。

当你信任内容时，告诉 Rails：

```
<%= raw your_variable %> 
```

或者：

```
<%= your_variable.html_safe %> 
```

# javascript - 使 Closure Compiler 将多个对象属性声明合并为一个大字面量

> ID：12663255
> 
> 赞同：2
> 
> 时间：2012-09-30T17:13:48.743
> 
> 标签：javascript, properties, google-closure-compiler, object-literal, minify

我将我的代码分成几个文件，然后运行一个脚本来合并和编译它们（使用`ADVANCED_OPTIMIZATIONS`）。大部分功能是在**单个对象的原型**中实现的。

所以当合并时，它可能看起来像这样：

```
(function(){

/** @constructor */ function MyConstructor() {};

MyConstructor.prototype = {};

MyConstructor.prototype['foo'] = function() { alert('foo'); };
MyConstructor.prototype['bar'] = function() { alert('bar'); };
MyConstructor.prototype['baz'] = function() { alert('baz'); };

window['MyConstructor'] = MyConstructor;

}()); 
```

如果您像这样将该代码放入[Closure Compiler](http://closure-compiler.appspot.com/home)中，则输出如下（打印精美）：

```
function a() {
}
a.prototype = {};
a.prototype.foo = function() {
  alert("foo")
};
a.prototype.bar = function() {
  alert("bar")
};
a.prototype.baz = function() {
  alert("baz")
};
window.MyConstructor = a; 
```

问题是，有什么方法可以告诉 Closure Compiler 可以**将所有这些合并到一个对象字面量**中，即使中间有代码（在这个例子中没有，但可能有） ，所以无论如何，它都会编译成一个大对象文字？

这里有几个解决方案，以及为什么它们对我不起作用：

*   **解决方案 1：**只需在一个大对象字面量中声明它们。
    **行不通**，因为我将我的代码放入多个文件中，并且我计划制作它，以便用户可以在编译之前删除其中的一些（如果他们不需要它们）。对象文字有逗号分隔符，这会使这成为一场噩梦。
*   **解决方案 2**：声明对象之外的所有功能（作为闭包中的私有变量），并将它们附加到最后的简化对象字面量中，该字面量仅包含对属性的引用（例如`{'foo':foo,'bar':bar,'baz':baz}`）。
    **行不通**，因为如上所述，这个想法是创建模块化的东西，删除一个文件会使引用中断。

我对想法持开放态度！

* * *

**编辑：**有些人可能认为闭包编译器不能做到这一点。它可以做到这一点，而且做得更多，只是它态度不好，喜欢做就做。

将其输入到闭包中：

```
(function(){

var MyConstructor = window['MyConstructor'] = function() {};

var myProto = {
    'foo': function() { alert('foo'); },
    'bar': function() { alert('bar'); }
};

myProto['baz'] = function() { alert('baz'); };

MyConstructor.prototype = myProto;

}()); 
```

结果是：

```
(window.MyConstructor = function() {
}).prototype = {foo:function() {
  alert("foo")
}, bar:function() {
  alert("bar")
}, baz:function() {
  alert("baz")
}}; 
```

看？但是，这是代码非常脆弱，如果稍微修改一下，它可能会编译成完全不同的东西（而且不是那么好）。例如，即使是中间某处的变量赋值也可能导致它输出非常不同的结果。换句话说，这不起作用（在这种情况下除外）。

* * *

**编辑 2：**看到这个[jsperf](http://jsperf.com/object-literals-vs-object-properties)。Chrome 中的大对象字面量更快（与其大小成正比）。

* * *

**编辑 3：** [关闭编译器错误报告](http://code.google.com/p/closure-compiler/issues/detail?id=829)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:47:18.550

我正在做一个解决方法。它可能不适用，因此无法接受此答案。尽管如此，这仍然适用于我的情况。

我的文件夹结构如下所示：

```
src
├───components
└───core 
```

而且，在编译之前，我合并`src/intro.js`了该级别的一些文件`src`（按特定顺序），然​​后是（任何顺序）中的所有文件，`core`然后是（任何顺序）中的所有文件`components`，然后是`outro.js`.

现在，文件夹结构如下所示：

```
src
├───components
│   ├───modules
│   └───plugs-literal
└───core
    ├───internal
    ├───modules
    └───plugs-literal 
```

编译顺序为（注意带箭头的部分）：

*   `src/intro.js`
*   中的几个文件`src/core`，特定顺序。
*   中的所有文件`src/core/internal`
*   `src/core/plugs-literal-intro.js` **<--**
*   **<--**中的所有文件`src/core/plugs-literal`
***   **<--**中的所有文件`src/components/plugs-literal`***   `src/core/plugs-literal-outro.js` **<--***   中的所有文件`src/core/modules`*   中的所有文件`src/components/modules`*   `src/outro.js`****

 ****这个想法是一个文件包含对象文字的开头，另一个文件包含对象文字的结尾，两个文件夹包含属性。或多或少是这样的：

### `src/core/plugs-literal-intro.js`：

```
var myObjectLiteral = {
    'someSimpleProp': 'foo',
    'someOtherSimpleProp': 'bar',
    'lastOneWithoutTrailingComma': 'baz' 
```

### `src/core/plugs-literal/EXAMPLE.js`：

```
,'example': function() { alert('example'); } // comma before, not after. 
```

### `src/core/plugs-literal-outro.js`：

```
}; 
```

如果这引入了一些不必要的问题，我稍后会知道。但是，我可以分配一个不同的文件夹来包含单独声明的原型属性。****

# c# - 局部变量在 Visual Studio 2010 中超出范围

> ID：12663257
> 
> 赞同：2
> 
> 时间：2012-09-30T17:14:07.217
> 
> 标签：c#, visual-studio-2010

我希望这不是其他帖子的多余，但我希望我可以帮助其他人。我发现我的 VS2010 .NET 4.0 项目中的局部变量不可检查。我的断点将停止，但我无法将鼠标悬停并查看变量/对象属性。当我将该变量放在 Watch 窗口中时，它似乎超出了范围。我以前经常发生这种情况，但不知道为什么。我找到了解决方案。

首先，我的解决方案与此处发布的不同： [Visual Studio 2010 调试器中的上下文变量](https://stackoverflow.com/questions/8672620/out-of-context-variables-in-visual-studio-2010-debugger)

这是我看到的截图： ![在此处输入图像描述](../Images/0a6d42f9d9f7259d7565c2ffa130f53e.png)

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:14:07.217

解决方案很简单：在 VS Project Properties 的 Build 选项卡中，有一个“Optimize code”复选框。你必须取消选中它。我不知道它是如何被检查的，我想我没有检查过。但是当我取消选中它时，一切都恢复了。

# r - 在R中溶解多边形中的孔

> ID：12663263
> 
> 赞同：14
> 
> 时间：2012-09-30T17:15:05.483
> 
> 标签：r, gis, polygons

我正在 R 中运行一些地理处理任务，其中我试图创建一些多边形来裁剪环境信息的栅格。我正在缓冲一些复杂的多边形，这留下了我想摆脱的小子几何。在ArcGIS中，我认为这将涉及将我的多边形从多部分转换为单部分（或类似的东西）然后溶解，但我不知道如何在R中做到这一点。

这是一个说明问题的示例：

```
require(maptools)
require(rgeos)

data(wrld_simpl)
wrld_simpl[which(wrld_simpl@data$NAME=='Greece'),]->greece
proj4string(greece)<-CRS('+proj=lonlat +datum=WGS84')
gBuffer(greece,width=0.5)->buf
plot(buf) 
```

我真正想要的是多边形的外边界，里面没有别的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-30T22:46:08.123

如果您只想获得形成缓冲区边界的一个环，那么：

```
plot(SpatialPolygons(list(Polygons(list(buf@polygons[[1]]@Polygons[[1]]),ID=1))),lwd=2) 
```

是一种非常特别的方式来为您的案例做这件事（并绘制它）。

你真正想要的是得到所有的戒指`ringDir=1`，因为剩下的都是洞。您需要所有的环，因为您的缓冲区可能仍然是两个不相连的岛屿。

```
outerRings = Filter(function(f){f@ringDir==1},buf@polygons[[1]]@Polygons)
outerBounds = SpatialPolygons(list(Polygons(outerRings,ID=1)))
plot(outerBounds) 
```

可能会成功...尝试一下`width=0.1`，您会发现它适用于多个岛屿，但仍会去除一个洞。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T19:46:52.787

如果你想要适合希腊的凸包，你可以使用包`gConvexHull`中的函数`rgeos`。请注意，如果您要处理带有孔的多边形，这不一定是采用的方法，正如我认为问题标题中的情况一样。但是，从您的示例来看，以下方法似乎可以让您到达您想要的位置。

```
myCH <- gConvexHull(greece)

plot(myCH) 
```

这将产生类似的东西

![在此处输入图像描述](../Images/1046cdfd2bbcee1bfe0b0cafc1a5d9f0.png)

并检查一切是否合适，

```
plot(myCH)
plot(greece,add=TRUE) 
```

![在此处输入图像描述](../Images/faa5c2e96929b3a032c387f64d4259f8.png)

# javascript - 将变量传递给带有单词边界的 RegExp

> ID：12663264
> 
> 赞同：10
> 
> 时间：2012-09-30T17:15:09.567
> 
> 标签：javascript, regex

我必须传递变量的 RegExp 值并指向一个单词边界。我有一个要检查的字符串是否包含变量值。我不知道如何将正则表达式作为变量值和单词边界属性传递给正则表达式。

所以是这样的：

```
var sa="Sample";
var re=new RegExp(/\b/+sa);
alert(re.test("Sample text")); 
```

我尝试了一些方法来解决问题，但仍然无法做到:(

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T17:17:31.487

用这个：`re = new RegExp("\\b" + sa)`

正如@RobW 提到的，您可能需要转义`sa`.

看到这个：[Javascript中有RegExp.escape函数吗？](https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-06-13T02:11:39.973

如果你想获得所有的出现（`g`），不区分大小写（`i`），并使用边界，以便它不是另一个单词中的单词（`\\b`）：

```
re = new RegExp(`\\b${sa}\\b`, 'gi'); 
```

* * *

例子：

```
let inputString = "I'm John, or johnny, but I prefer john.";
let swap = "John";
let re = new RegExp(`\\b${swap}\\b`, 'gi');
console.log(inputString.replace(re, "Jack")); // I'm Jack, or johnny, but I prefer Jack. 
```

# templates - 尝试创建容器的简单模板总和

> ID：12663266
> 
> 赞同：0
> 
> 时间：2012-09-30T17:15:36.360
> 
> 标签：templates, stl, iterator

我只是想创建一个简单的 sum 函数模板来使用 STL 在容器中查找双精度数的总和。首先，我只是想用一个列表来测试它，但我在第 28 行不断收到错误消息。

```
#include <iterator>
#include <list>    
#include <iostream>

using namespace std;

template <typename T>
double Sum(typename T& container)
{// sum of a container with doubles
    typename T::const_iterator iterator_begin = container.begin();
    typename T::const_iterator iterator_end = container.end();

    double my_sum = 0;

    for (iterator_begin; iterator_begin != iterator_end; iterator_begin++)
        my_sum += iterator_begin->second; // this is line 28

        return my_sum;
}

int main()
{
    list<double> test_list(10,5.1); // create a list of size 10 with values 5.1

    cout << Sum(test_list) << endl;

    return 0;
} 
```

我得到两个编译器错误：

> c:\users...\iterators.cpp(28): 错误 C2839: 重载 'operator ->' 的返回类型 'const double *' 无效
> 
> c:\users...\iterators.cpp(28): error C2039: 'second' : is not a member of 'std::_List_const_iterator<_Mylist>'

即使我从 const_iterator 更改为 iterator，我仍然会收到类似的错误，

> 错误 C2839：重载的“运算符 ->”的返回类型“双 *”无效

我在这里使用错误的指针还是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:47:25.330

STL 列表不支持“第二”的概念。它们是简单的序列。这似乎最初是为 std::map<> 量身定制的。话虽如此，如果列表、向量、队列等是您的目标容器，那么：

改变这个：

```
my_sum += iterator_begin->second; 
```

对此：

```
my_sum += *iterator_begin; 
```

它会按照您显然想要的方式工作。在 STL（for_each 等）中有用于执行此类*操作的*内置算法，您应该将其视为潜在的替代方案。

编辑：OP 询问如何专门为简单序列和地图求和。

```
#include <iostream>
#include <list>
#include <map>

using namespace std;

// general summation
template<typename T>
double Sum(const T& container)
{
    double result = 0.0;
    typename T::const_iterator it = container.begin();
    while (it != container.end())
        result += *it++;
    return result;
}

// specialized for a map of something-to-double
template<typename Left>
double Sum(const map<Left,double>& themap)
{
    double result = 0.0;
    typename map<Left,double>::const_iterator it = themap.begin();
    while (it != themap.end())
        result += (it++)->second;
    return result;
}

// a list of doubles.
typedef list<double> DblList;

// a map of int to double
typedef map<int, double> MapIntToDbl;

// and just for kicks, a map of strings to doubles.
typedef map<string, double> MapStrToDbl;

int main(int argc, char** argv)
{
    DblList dbls;
    dbls.push_back(1.0);
    dbls.push_back(2.0);
    dbls.push_back(3.0);
    dbls.push_back(4.0);
    cout << "Sum(dbls) = " << Sum(dbls) << endl;

    MapIntToDbl mapdbls;
    mapdbls[1] = 1.0;
    mapdbls[2] = 2.0;
    mapdbls[3] = 3.0;
    mapdbls[4] = 4.0;
    mapdbls[5] = 5.0;
    cout << "Sum(mapdbls) = " << Sum(mapdbls) << endl;

    MapStrToDbl mapdbls2;
    mapdbls2["this"] = 1.0;
    mapdbls2["is"] = 2.0;
    mapdbls2["another"] = 3.0;
    mapdbls2["map"] = 4.0;
    mapdbls2["sample"] = 5.0;
    cout << "Sum(mapdbls2) = " << Sum(mapdbls2) << endl;

    return 0;
} 
```

# java - Java JLabel 在渲染 HTML 时忽略前景色的 alpha 值

> ID：12663268
> 
> 赞同：2
> 
> 时间：2012-09-30T17:15:48.297
> 
> 标签：java, html, jlabel, alpha

当我使用具有 alpha 值的前景色的 JLabel 时，如下所示：

```
JLabel label = new JLabel( "This is non HTML text with correct alpha color" );
label.setForeground( new Color( 1.0f, 1.0f, 1.0f, 0.5f) ); 
```

标签以 0.5-alpha 正确显示，因此为 50% 灰色。

但是当我将文本更改为 HTML 时（以更好地控制文本呈现），如下所示：

```
JLabel label = new JLabel( "<html><p>This is HTML text with incorrect alpha color</p></html>" );
label.setForeground( new Color( 1.0f, 1.0f, 1.0f, 0.5f) ); 
```

然后标签是 100% 白色。看起来，在渲染 HTML 时，前景色的 alpha 值只是被忽略了。

我在 Windows 7 64 位下使用 Java 1.6.0_26（32 位）。

这是一个错误还是一个已知的限制，或者我在这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:27:42.160

您不能将 HTML 代码和 setForeground 样式混合在一起。

请参阅Oracle 的[JLabel html text ignores setFont](https://stackoverflow.com/questions/7265178/jlabel-html-text-ignores-setfont?rq=1)和 How to use JLabels( [1](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html) ) 教程。

只需使用 HTML 或 JLabel 样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T21:14:33.427

为了给我自己的问题一个可能的答案，我刚刚找到了一种通过 HTML 渲染实现 alpha 透明度的方法。只需覆盖 JLabel 的“paintComponent”方法并使用带有给定 Graphics2D 实例的 AlphaComposite：

```
@Override
protected void paintComponent( Graphics g )
{
    Composite alphaComposite = AlphaComposite.getInstance( AlphaComposite.SRC_OVER, 0.5f );

    Graphics2D g2d = (Graphics2D)g.create();
    g2d.setComposite( alphaComposite );

    super.paintComponent( g2d );
} 
```

# c - c中的freopen和execvp

> ID：12663270
> 
> 赞同：0
> 
> 时间：2012-09-30T17:16:44.837
> 
> 标签：c, execvp, freopen

我在 c 中做一个小的 shell 实现，我被卡住了。

我希望能够重定向`stdin`and `stdout`，但我很困惑。在我的 shell 中，当我想启动一个程序时，我使用该`execvp`函数。现在我希望能够重定向`stdout`，所以如果我运行另一个进程，输出应该被重定向到文件而不是屏幕。

这是示例代码：

```
pid_t pid;

// Child process
pid = vfork();

if((pid == 0)){
    freopen("myfile.txt", "w", stdout);
    char* arr[3];
    arr[0] = "cat";
    arr[1] = "someFileToCat.txt";
    arr[2] = NULL;
   execvp("cat", arr);
   fclose(stdout);
} 
```

但是，它确实在终端中打印，而不是在文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:21:28.933

文件流是一种`C`抽象。您正在寻找的是较低级别的系统调用，例如`open`,`close`和`dup2`.

有关完整示例，请参阅[将 exec 输出重定向到缓冲区或文件](https://stackoverflow.com/questions/2605130/redirecting-exec-output-to-a-buffer-or-file)。

# c# - 将 PaymentDetailsItemType 数组传入 PayPalAPI

> ID：12663272
> 
> 赞同：0
> 
> 时间：2012-09-30T17:16:53.780
> 
> 标签：c#, paypal

我在 ASP.Net C# 4.0 中使用 PayPal 沙箱。我添加了以下网络参考：

```
 https://www.paypalobjects.com/wsdl/PayPalSvc.wsdl 
```

如果我有 1 件商品（请给我 2 件 T 恤），我可以将其传递给 PayPal 对象并毫无问题地完成我的交易：

```
 var item = new PayPalAPIHelper.PayPalWS.PaymentDetailsItemType
        {
            Quantity = 2, //etc...etc
        };
         var paymentDetails = new  PayPalAPIHelper.PayPalWS.PaymentDetailsType();
        paymentDetails.PaymentDetailsItem = new PaymentDetailsItemType[]{item}; 
```

现在我的困境是当客户想要不同的物品（1 件 T 恤、1 条裤子）时。现在我需要多个 PaymentDetailsItemType 对象来传递给 paymentDetails 对象。我试过这个：

```
 //now i have an array of different items 
        var items = new PayPalAPIHelper.PayPalWS.PaymentDetailsItemType[3];
        items[0].Description = "T-shirt";
        items[1].Description = "Jeans";
        paymentDetails.PaymentDetailsItem = new PaymentDetailsItemType[]{items}; 
```

我收到此错误：

```
 Cannot implicitly convert type 'PayPalAPIHelper.PayPalWS.PaymentDetailsItemType[]' 
       to 'PayPalAPIHelper.PayPalWS.PaymentDetailsItemType' 
```

我可以做到这一点，它编译：

```
 paymentDetails.PaymentDetailsItem = new PaymentDetailsItemType[]{items[0],items[1]}; 
```

但是当我运行它时，当我调用 PayPal 服务时，我在元素“数量”中得到数据类型“不匹配”：

```
 PayPalAPIHelper.PayPalWS.PaymentDetailsType paymentDetails = new PayPalAPIHelper.PayPalWS.PaymentDetailsType();

        paymentDetails.PaymentDetailsItem = new PayPalAPIHelper.PayPalWS.PaymentDetailsItemType[] { items[0],items[1] };

        reqDetails.PaymentDetails = new PayPalAPIHelper.PayPalWS.PaymentDetailsType[] { paymentDetails };

        PayPalAPIHelper.PayPalWS.SetExpressCheckoutReq req = new PayPalAPIHelper.PayPalWS.SetExpressCheckoutReq()
        {
            SetExpressCheckoutRequest = new PayPalAPIHelper.PayPalWS.SetExpressCheckoutRequestType()
            {
                Version = Version,
                SetExpressCheckoutRequestDetails = reqDetails
            }
        };

        // query PayPal and get token
         //error occurs here
        PayPalAPIHelper.PayPalWS.SetExpressCheckoutResponseType resp = BuildPayPalWebservice().SetExpressCheckout(req); //this is where the error occurs 
```

如何将多种类型传递给 PayPal API Web 服务，以便用户可以订购不同的商品？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:24:22.370

首先，你已经有一个数组，所以仅仅为了赋值而创建一个新数组是没有意义的`paymentDetails.PaymentDetailsItem`：

```
var items = new PayPalAPIHelper.PayPalWS.PaymentDetailsItemType[3];
…
paymentDetails.PaymentDetailsItem = items;  // this is wrong: new PaymentDetailsItemType[]{items}; 
```

通过编写`new PaymentDetailsItemType[]{items}`您创建一个新数组并尝试`PaymentDetailsItemType`使用另一个数组`items`（类型`PaymentDetailsItemType[]`- 因此不兼容）的内容来初始化它的第一项（类型）。

其次，确保为数组中的*所有项目填写所有必需的属性。*最有可能的是，在您的一件 T 恤和一件牛仔裤的示例中，您应该这样做：

```
items[0].Description = "T-shirt";
items[0].Quantity = 1;
items[1].Description = "Jeans";
items[1].Quantity = 1; 
```

# php - CSS 没有使用 base_url 帮助程序从头文件正确链接

> ID：12663275
> 
> 赞同：0
> 
> 时间：2012-09-30T17:17:05.200
> 
> 标签：php, codeigniter

我的**header.php**没有正确链接到**default.css**。没有应用**CSS**的页面加载。如果我查看页面的源代码并单击指向**.css**文件的链接 - **403 Forbidden**会显示在**Source View**中。

**配置文件**

`$config['base_url'] = 'http://localhost/dev/';`

**路由.php**

```
$route['default_controller'] = "page/view";
$route['404_override'] = ''; 
```

**pages** *是控制器*

**视图** *是方法*

**应用程序/视图/模板/header.php**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link href="<?php echo base_url(); ?>application/css/default.css" rel="stylesheet" type="text/css" />
        <title><?php echo $title; ?></title>
    </head>
    <body> 
```

**应用程序/css/default.css**

```
* {margin:0;padding:0;}

body {
    background-image: url(../images/bg.gif);
    background-repeat: repeat-x;
    ...
} 
```

**应用程序/图像/**

`-- bg.gif GIF Image 1KB`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:23:53.117

将 css 文件放在“资产”目录而不是“应用程序”中是一个好习惯。将文件移动到 DOCUMENT_ROOT 中名为 assets/css 的目录并更改此行：

```
<link href="<?php echo base_url(); ?>application/css/default.css" rel="stylesheet" type="text/css" /> 
```

到：

```
<link href="<?php echo base_url(); ?>assets/css/default.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:23:15.327

这是 Codeigniter 的默认状态。您需要在您的 css 和图像目录中创建一个 .htaccess 文件并放置此代码（它应该可以工作，我正在使用它）：

```
allow from All 
```

或者您可以在根文件夹中创建一个公用文件夹，而不会出现此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:14:17.417

将配置中的 base_url 留空。像这样：

```
 $config['base_url'] = ''; 
```

# visual-studio-2012 - 将现有目录添加到解决方案资源管理器中的目录

> ID：12663280
> 
> 赞同：107
> 
> 时间：2012-09-30T17:17:49.560
> 
> 标签：visual-studio-2012

我想将已经存在的目录添加到解决方案资源管理器中的目录，但是每当我右键单击该目录并选择`Add => Existing Item`时，我只能添加单个文件，而不能添加目录。

如何将已经存在的目录添加到解决方案资源管理器中项目内的目录？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-11-28T10:07:07.507

单击解决方案资源管理器顶部的“显示所有文件”按钮，然后右键单击所需的文件夹并选择“包含在项目中”。

![在 VS2012 解决方案资源管理器中显示所有文件按钮](../Images/57ddc786b420641a5e766c63e9861198.png)

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2013-07-28T11:40:53.557

将文件夹从 Windows 资源管理器拖放到您的 Visual Studio 解决方案窗口:)

来源[在这里](https://stackoverflow.com/questions/392473/how-do-i-add-an-existing-directory-tree-to-a-project-in-visual-studio)

或简单地复制并粘贴到解决方案资源管理器中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-02T16:47:06.693

VS 2012 似乎区分了“解决方案文件夹”，它们只是包含其他解决方案文件夹或包含项目文件夹的文件夹。拖放（使用我的设置）仅适用于项目文件夹，不适用于解决方案文件夹。如果我添加一个新的解决方案文件夹，机器上什么也不会发生。如果我将机器文件夹拖放到主解决方案，它会拒绝接受它。如果我将文件夹拖放到解决方案文件夹，我会收到一条错误消息，指出无法执行此操作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-18T18:19:36.927

其他一些答案缺少一个重点：如果该文件夹不在解决方案的项目中，则无法添加该文件夹

这是解决方案：

1) 向 sln 添加一个新文件夹 - 它不关心该文件夹是否已存在于磁盘上，因为这是 sln 中的一个虚拟文件夹

2）使用“添加现有文件”将文件添加到文件夹

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-22T23:24:32.650

在处理由于某种原因已被删除并且现在需要重新添加的解决方案级别文件夹时，请在 notepad++ 等文本编辑器中打开 .sln 文件。

在如下所示的部分中找到您的“文件夹名称”...

`Project("{2150E333-8FDC-42A3-9474-1A3956D46DE8}") = "NewFolder1", "NewFolder1", "{73ED84FC-F250-4CCC-B267-34CEB67F2883}" EndProject`

仅针对您遇到问题的特定项目/文件夹从“项目”删除到“结束项目”。

您可能会在 VS2012 中收到一条消息，指出您的解决方案已被外部源修改。选择“放弃”外部更改的选项。最后，添加您的解决方案级别文件夹，并将您的项目作为现有项目添加到该文件夹​​中，根据您的喜好拖放它们，或者复制和粘贴它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-27T00:18:48.440

For those who had a hunch it could be done but weren't able to do it, **NOTE:** **Drag Folder or Files ONTO the name of the Project Name in Solution Explorer** in the least

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-05T22:23:19.293

展开菜单栏中的“项目”项，然后选择“显示所有文件”。然后在解决方案资源管理器中找到您要添加的文件夹（当前未包含的文件夹将是浅灰色，带有虚线轮廓而不是通常的实心图标）右键单击所需的文件夹并选择“包含在项目中”

完成后，再次从“项目”菜单中选择“显示所有文件”以返回常规视图。

（这与 Radenko Zec 的回答非常相似，但不需要“显示所有文件”按钮已经出现在工具栏中。我只是将此作为对他回答的回应，但我目前没有声誉留下评论。）

# php - 在 php 项目中分组和包含文件，按本书

> ID：12663281
> 
> 赞同：0
> 
> 时间：2012-09-30T17:17:53.333
> 
> 标签：php

我正在做我的第一个相当大的 php 项目。我决定从头开始构建一切，没有任何框架。

首先，我有以下结构：

```
index.php
includes/            //all php pages, except index.
includes/scripts/    //all php classes that do not print web pages.
styles/              //all my css files.
images/              //all images used on the website. 
```

但是，当包含来自各种文件夹的文件时，这给我带来了麻烦。

我现在已将其更改为：

```
index.php
the rest of my .php files
styles/
images/ 
```

我所有的包含现在都可以正常工作，而不必在文件夹之间跳转。但我觉得我对我的项目失去了概述。

目前我对如何做事有点迷茫。从书上看，对我的文件夹进行分组并包含我的文件的正确方法是什么？

编辑：我还希望看到一些关于实际包含文件的提示。无论在哪里调用 include() 都有哪些包含文件的技术？一个具体的例子，根据我的第一个结构。

`includes/scripts`在,中有一个脚本`login.php`。`login.php`然后包含`page.php`（一个简单的页面模板）来自`includes/`. `page.php`将包括模板的几个部分 ( `header.php`, `footer.php`)。但我也不得不`page.php`从`include/`.

`page.php`这给我带来了麻烦，因为如果从`includes/`或从调用相对路径会有所不同`includes/scripts/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:44:42.453

您的问题可能是由相对路径引起的。

这可以通过使用绝对路径来解决，例如：

```
require_once("/var/www/clients/client05/web29/web/includes/scripts/myClass.php"); 
```

为了更容易，您还可以在`index.php`（或任何其他每次都会包含的文件）中定义常量

```
define("WEB_ROOT", "/var/www/clients/client05/web29/web/");
define("INCLUDES_DIR", WEB_ROOT . "includes/");
define("SCRIPTS_DIR", INCLUDES_DIR . "scripts/"); 
```

然后可以轻松包含文件

```
 require_once(SCRIPTS_DIR . "myClass.php");
    require_once(INCLUDES_DIR . "acp.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:26:53.333

一个直截了当的建议：

```
index.php
app/
styles/
images/ 
```

所有 PHP 代码都进入`app/`并可以按照您认为合适的方式进一步组织，例如一个目录用于您的模板，一个用于存储第三方代码，然后是您为应用程序构建的自己的库。

您应该可以`app`随时将文件夹移动到磁盘上的任何其他位置，尤其是文档根目录之外。

使用所谓的[*前端控制器*](http://martinfowler.com/eaaCatalog/frontController.html)最容易做到这一点，该控制器将所有进入应用程序的请求路由到相关代码（从技术上讲，这甚至可以让您同时拥有多个应用程序）。

在上面的布局中，`index.php`扮演这个角色。它是您的应用程序的入口点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T17:27:30.287

您不应只考虑*文件*，而应考虑如何与*资源交互的**策略*。

 *由于 PHP 现在有很好的面向对象支持，您可以利用[命名空间](http://php.net/manual/en/language.namespaces.php)，并按照您喜欢的方式在文件夹中组织您的类。

如果您不想使用框架[我强烈建议您这样做，因为它会使您的应用程序更安全且更易于维护]，您会发现[这篇文章](http://fabien.potencier.org/article/50/create-your-own-framework-on-top-of-the-symfony2-components-part-1)对如何组织您的结构很有启发性。

你可以选择像**symfony 自动加载器**这样的组件来加载你想要的类，然后根据你的文件系统组织处理所有其他资源 [css、js、图像]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T17:28:12.197

我首选的组织结构包括：

**index.php**和根目录中的所有其他 php 页面 ("/")
**/includes/**（包含模板项目的目录，如页眉、页脚、分析代码等...任何经常重用的内容）
**/includes/classes/**（用于 php 类)
**/images/**（自我解释；我还根据我的图像最合理的组织在其中使用了几个目录）
**/style/**（对于 css，带有用于字体文件的“/style/fonts/”目录）
**/scripts/**（对于 js 或类似的）
**/support/**（对于我可能正在使用的任何设置文件）*

# memory - 转储 Valgrind 报告的丢失内存的内容

> ID：12663283
> 
> 赞同：8
> 
> 时间：2012-09-30T17:18:01.373
> 
> 标签：memory, valgrind, memory-leaks, dump

当我`valgrind --leak-check=yes`在一个程序上运行时，报告了几个字节的内存丢失。是否可以查看该内存的内容（即转储存储在其中的数据）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T20:34:12.710

您可以使用最新版本的 Valgrind (3.8.1) 做到这一点：

启动可执行文件，在启动时激活 gdbserver：

```
valgrind --vgdb-error=0 ....<your program> 
```

然后在另一个窗口中，将 gdb 连接到 Valgrind（按照 Valgrind 给出的指示）。然后在相关位置（例如在 main 的末尾）放置一个断点并使用 gdb

```
continue 
```

命令直到到达断点。然后从 gdb 进行泄漏搜索：

```
 monitor leak_check full reachable any 
```

然后列出相关丢失记录 nr 的可达块的地址

```
 monitor block_list <loss_record_nr> 
```

然后，您可以使用 gdb 功能检查给定地址的内存。如果您正在搜索谁保存了指向此内存的指针，请注意可能有趣的命令“who_points_at”。

# php - SQL 插入和提交

> ID：12663287
> 
> 赞同：0
> 
> 时间：2012-09-30T17:18:52.577
> 
> 标签：php, sql, variables, insert, submit

当我执行这个查询时，它返回 false，这意味着查询是错误的。你能弄清楚为什么吗？

```
$string1 = 'wee';
$string2 = 'wee'; 
$string3 = 'wee'; 
$string4 = 'wee';  

if (isset($_POST['submit'])) {  

    $query = "INSERT INTO data (book, title, content, author)
              VALUES ($string1, $string2, $string3, $string4)";          
    mysql_query($query, $con);    
} 
```

但是，当我放置如下内容时，它会返回 true 并正确插入：

```
$query = "INSERT into data (book, title, content, author)
          VALUES ('wee', 'wee', 'wee', 'wee')"; 
```

还有一个问题：当我提交时，查询似乎在执行时返回了两次，这意味着一个查询有两条记录。有人明白吗？

如果您需要更多信息，请询问。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:34:06.753

尽管这个问题似乎得到了回答，但您不应该直接在查询中使用用户输入，因为这会为 SQL 注入等漏洞打开漏洞（这很糟糕）

如果您查看 php.net ( [mysql_query](http://us.php.net/manual/en/function.mysql-query.php) ) 上的 mysql 页面，该页面显示建议您使用像 PDO ( [pdo-mysql](http://us.php.net/manual/en/ref.pdo-mysql.php) )这样的抽象层

使用 PDO 将允许您将参数绑定到您的 sql 查询，以绕过在查询中使用用户输入的安全隐患。

如果您不将参数绑定到查询，那么您将度过一段糟糕的时光。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:24:21.083

您的字段数据类型是字符串或 varchar，因此您需要在它们周围放置 '' 或 ""。

更改您的查询如下

```
$query = "INSERT into data (book, title, content, author)VALUES ('".$string1."', '".$string2."',     
         '".$string3."', '".$string4."')"; 
```

要解决提交问题，请发布您的 html 代码

# android - 在 Android 模拟器中禁用 GPS

> ID：12663289
> 
> 赞同：5
> 
> 时间：2012-09-30T17:18:58.817
> 
> 标签：android, android-emulator

只是一个简单的问题 - 有没有办法在 Eclipse Android 模拟器中禁用 GPS？我想看看关闭 GPS 时应用程序的行为。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-09-23T11:30:53.857

在 AVD 管理器的 Android Studio 中：

[![在此处输入图像描述](../Images/10e40e9d3c89b2e4228724e4b5a6fb78.png)](https://i.stack.imgur.com/we1OA.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T17:26:26.460

或打开 Android 虚拟设备管理器，单击要编辑的设备，然后在硬件组上单击新建并选择 GPS 支持属性。将该属性添加到现有属性后，使用下拉菜单将其值更改为 false。之后，只需单击 EditAVD

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T17:20:01.383

在模拟器中打开设置应用程序并取消选中名称为`Use GPS satellites`.

您可能需要在子选项中浏览一下才能找到它。如果您告诉我们确切的 android 版本，我们可以告诉您确切的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:02:04.587

我不确定此选项是否有效，但如果您尝试在设置中启用或禁用 gps 选项。带有文本“使用 GPS Settelites”的选项。您将得到不可靠的结果。正如我在构建了模拟器的地图应用程序。

我已经尝试从 DDMS 发送位置，然后在切换该选项之前和之后检查地图应用程序中的当前位置，但是一旦从 ON 中选中它似乎就不起作用了。因为在那之后我没有得到任何位置而且它总是说“您的位置暂时不可用”。

所以不要使用那个选项。或者你最好检查一下同样的东西是否适合你。

# mysql - 先选择然后忽略两个列中的值相同的行

> ID：12663290
> 
> 赞同：-1
> 
> 时间：2012-09-30T17:18:59.077
> 
> 标签：mysql, sql

示例表：

```
 id    foo   bar
 1      2    877
 2      2    877
 3      3    678
 4      4    887
 5      1    678
 6      2    887 
```

示例结果：

```
 id    foo   bar
 3      3    678
 4      4    887
 5      1    678
 6      2    887 
```

该 sql 忽略了 2 和 887 的重复项，但不忽略最新的。

Foo 将被预先指定。

这在MYSQL中如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:36:36.260

如果我说对了，您总是希望`bar`a 的值`foo`最高`id`。

```
select * 
  from your_table t1
 where id = (select max(id)  from your_table t2
                            where t2.foo = t1.foo) 
```

这是一个用于演示的[SQL Fiddle 。](http://sqlfiddle.com/#!2/f476c/14)它还提供了一种左连接的替代方法。该构造确实假定“最新的”是具有最高 id 的那个。

**编辑：**所以根据你的评论，你只想要 foo=2 的“最高 id”，这是一个简单的`OR`逻辑。我不知道 foo 是否可以为空，所以我添加了`IS NULL`条件，否则`<>`可能无法正常工作。

```
select * from your_table t1
where  foo <> 2 or foo is null
   or  (foo = 2 and id = (select max(id)  from your_table t2
                                         where t2.foo = t1.foo) ) ; 
```

这是一个[演示](http://sqlfiddle.com/#!2/24dd2/4)

# xml - Qt4：使用弹出窗口进行调试，尝试将整数转换为字符串，获取字母

> ID：12663291
> 
> 赞同：0
> 
> 时间：2012-09-30T17:19:04.190
> 
> 标签：xml, qt, int, qstring

抱歉标题令人困惑，我想做的是使用 Qt 来计算具有特定标签名称的元素的数量。当我这样做并尝试将计数转换为字符串时，我得到的是字母而不是数字。

```
void xml::list(QDomElement root, QString tagname, QString att){
QDomNodeList items = root.elementsByTagName(tagname); // node list of elements 
debug.setText(QString(items.count())); // converting the amount of elements to integer
debug.show(); // showing the popup box
} 
```

它应该只计算一个元素，我应该在消息框中得到数字 1，而不是给我字母“r”。我是否错误地转换了这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:38:42.877

使用`QString::number(items.count())`. 您目前只是`QChar`使用原始 unicode 值将整数隐式转换为 a 。

# javascript - 如何执行作为参数传递给另一个函数的javascript函数？

> ID：12663295
> 
> 赞同：0
> 
> 时间：2012-09-30T17:19:41.403
> 
> 标签：javascript

> **可能重复：**
> [如何在 Javascript 中将函数作为参数传递和调用？](https://stackoverflow.com/questions/2868324/how-to-pass-and-call-a-function-as-an-argument-in-javascript)

下面的代码对于执行作为参数传递给另一个函数的函数是否正确？或者该行`callback;`应该替换为`callback();`，还是其他？

```
function load(arg1, arg2, callback) {
    var s = arg1 + arg2;
    callback;
} 
```

此外，是否需要采用不同的方法将匿名函数作为参数传递？IE：

```
load(1, 2, function(){ 
    // do something 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:20:59.980

你需要改变这种方式：

```
function load(arg1, arg2, callback) {
    var s = arg1 + arg2;
    callback();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:20:38.030

您需要像普通函数一样执行回调参数。所以试试：`callback()`

你传入你的无名函数的方式是完全有效的。但如果您有兴趣，您不必总是使用无名函数。你也可以这样做：

```
function aCallbackFunction() 
{
 //doSomething    
}
load(1, 2, aCallbackFunction); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:23:29.587

我相信它是

```
callback.apply(this, args); 
```

[`apply()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

# jsp - 当文件同名时如何管理文件上传？

> ID：12663296
> 
> 赞同：2
> 
> 时间：2012-09-30T17:19:44.097
> 
> 标签：jsp, jakarta-ee, file-upload

我正在创建一个 Web 应用程序 Java EE 和 Jsp。我已经使用 apache fileupload 创建了一个文件上传程序。它运作良好。但我有一个现实世界的问题。

也就是说，假设让我们假设我网站的 2 个用户上传了一个与`Emp_docu.doc`. 但两者的内容不同。上传的文件保存在`\uploads`目录中。

现在我的问题是：

如果多个用户上传同名文件，是否所有同名文件都将被重写，并且只存在单个文件？比如上面说`emp_docu.doc`的文件夹中不会保存两个`\uploads`，只有一个`emp_docu.doc`存在，任何一个上传的用户都会丢失。

在不降低服务器性能的情况下，有什么解决方案？

（即使我们可以重命名文件，是否可以在上传的文件保存在服务器目录之前对其进行重命名`\uploads`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:08:06.213

如果目录相同，我总是在文件名之前附加唯一的 ID。

例如。用户 id 12 的文件是`12_Emp_docu.doc`，用户 id 15 的文件是`15_Emp_docu.doc`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:32:20.323

虽然我更喜欢上面的[想法](https://stackoverflow.com/a/12663693/1634475)，但这也可能对你有用：

如果您为每个用户创建了一个上传文件夹，例如

```
user1/uploads/Emp_docu.doc 
```

或者

如果您为上传中的每个用户创建一个文件夹，例如

```
uploads/user1/Emp_docu.doc 
```

# php - 我应该如何设置 browscap.ini 文件

> ID：12663304
> 
> 赞同：23
> 
> 时间：2012-09-30T17:20:33.010
> 
> 标签：php, browser-detection, browscap

我下载了 browscap.ini 文件，然后将其粘贴到目录“C:\wamp\bin\php\php5.4.3\extras”，然后我转到 php.ini 文件并在那里进行了这些更改：

```
[browscap]
; http://php.net/browscap
browscap = extras/browscap.ini 
```

然后我重新启动服务器，并在 temp.php 文件中输入以下代码：

```
<?php
echo $_SERVER['HTTP_USER_AGENT'] . "<br><br>";

$browser = get_browser(null, true);
print_r($browser);
?> 
```

现在输出是这样的：

```
Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4

Warning: get_browser(): browscap ini directive not set in C:\wamp\www\functions\browser.php on line 4 
```

我错过了什么吗？请提供一些解决方案，如果我无法让您理解，请见谅

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-30T17:41:41.243

完成后，您将使用`Full PATH`并重新启动服务器

例子

```
[browscap]
; http://php.net/browscap
browscap = "C:\xampp\php\extras\browscap.ini" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-06-30T07:09:23.810

在linux服务器上

```
wget http://browscap.org/stream?q=Lite_PHP_BrowsCapINI -O /etc/php.d/browscap.ini

[browscap]
; http://php.net/browscap
browscap = "/etc/php.d/browscap.ini" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-05T20:33:53.133

使用此代码进行安装，在 mint 和 debian 上测试

```
wget http://browscap.org/stream?q=Lite_PHP_BrowsCapINI -O /etc/php7/apache2/browscap.ini
sudo echo -e "[browscap]\n  browscap = '/etc/php7/apache2/browscap.ini'" >> php.ini
sudo service apache2 reload 
```

替换 php7 为你的 PHP 版本

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-19T17:14:38.297

这适用于我在 MacBook 上的工作。

```
[browscap]
; http://php.net/browscap
browscap = "/usr/local/etc/browscap.ini" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-05T17:01:34.587

**注意：** browsecap 文件不是默认配置，默认禁用。如果您设置它，请确保您在脚本中安全地调用**get_browser()**通过检查它是否可以调用来避免其他安装上的警告：

```
if (!ini_get('browscap')) {

    // Not set, use other custom func to detect browser:
    $browser = get_browser_manually();
} else {

    // Browsecap.ini was set, use it:
    $browser = get_browser(null, true);
} 
```

[在此处](https://stackoverflow.com/a/69065259/2213708)查看我与浏览器检测相关的完整答案。

# iphone - CocoaTouch - iPhone App - 在继续执行之前显示对话框

> ID：12663305
> 
> 赞同：0
> 
> 时间：2012-09-30T17:20:36.390
> 
> 标签：iphone, ios, cocoa-touch

当用户点击 iPhone App 页面中的图像时，我想首先显示一个自定义弹出窗口（这是一条用户消息，说“正在处理您的请求”），“在”开始处理图像触摸之前. 但是，不知何故，处理开始了（甚至没有显示弹出窗口，尽管我已经编写了代码以在处理代码“之前”显示弹出窗口）并且几乎结束，然后才显示弹出窗口。你能帮忙吗？

这是代码片段：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];
    int emotionChosen = -1;
    [self showUserNote:msg];
    ...
    ...
    // This then calls a method to process the touch event
    ...
    ...
}

-(void) showUserNote:(NSString *)note {

    if ((self.viewCtrlrUserNote == nil) || (self.viewCtrlrUserNote == NULL)) {
        self.viewCtrlrUserNote = (ViewController_NoteToUser *) [((com_AppDelegate *) [[UIApplication sharedApplication] delegate]).storyboard instantiateViewControllerWithIdentifier:kNameViewCtrlrUserNote];
    }
    [self.viewCtrlrUserNote.view setFrame:CGRectMake(70.0,150.0,170.0,170.0)];
    [self.viewCtrlrUserNote initializeViewWithNote:note];
    [self.view addSubview:self.viewCtrlrUserNote.view];
    [self.view bringSubviewToFront:self.viewCtrlrUserNote.view];
} 
```

尽管“首先”调用了 showUserNote（应该显示弹出/对话框），但“然后才”调用了处理触摸的方法。但是处理触摸的方法首先开始执行&对话框只出现在处理方法的末尾附近，&所以它破坏了它的目的！

我的开发环境：XCode 4.3.3、iPad、iOS 5

我如何“强制”iOS“首先”在“开始”处理触摸事件之前显示用户对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:37:20.080

绘图和 UI 命令在 CocoaTouch 中通常不同步（或者实际上，在任何使用 3D 加速和合成的现代图形 API 中）。当您完成所有工作时，`-showUserNote:`您将命令排队到视图子系统以在下次处理事件时执行所有这些操作，而不是实际执行它们。

实现您想要的标准模式是使用委托，一旦绘制，它就会将视图回调到委托中。Apple 在 UIAlert 类中使用了这种模式，你应该做的是让你的代码使用它而不是你的自定义视图来工作，然后修改你的自定义视图以拥有一个委托并在它显示后回调它。

我强烈建议您阅读[runloops](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)，以便您了解事件处理和延迟处理之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:35:57.593

我会尝试将对话后要运行的代码捆绑到一个单独的方法中，并使用 NSTimer 调用它（通过 // 之后检查代码来检查对话框是否正常工作也是一个好主意）像这样

```
[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(myTouchEvent) userInfo:nil repeats:NO]; 
```

其中 myTouchEvent 是您要创建的方法。

@Lois Bergarg 指出这可能行不通，这是我的第一个想法....

```
 NSDate *future = [NSDate dateWithTimeIntervalSinceNow: 0.5];
  [NSThread sleepUntilDate:future]; 
```

# django - 如何将值从views.py 发送到站点各处的base.html？

> ID：12663307
> 
> 赞同：0
> 
> 时间：2012-09-30T17:20:42.540
> 
> 标签：django, footer, django-urls

我想在整个网站的页脚中有一个包含最新帖子的部分。我的页脚位于 base.html 中。

我怎么能有这个：

```
def footer(request):
return render_to_response('base.html', {'posts_latest':Post.objects.order_by('-published'),},) 
```

在每一页上？要显示它，我必须将函数与 url 连接起来，但我不能对所有这些函数都这样做。

我试过这个[上下文处理器教程](http://www.b-list.org/weblog/2006/jun/14/django-tips-template-context-processors/)，但我一直收到错误：

```
Error importing request processor module myapp.app.context_processors: "No module named context_processors" 
```

所以我放弃了这个想法。

你有什么建议？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:54:38.290

自定义上下文处理器是您正在寻找的，因此您已经在正确的轨道上。您应该尝试解决您的导入问题。你在运行什么 django 版本？您的处理器位于何处？

# c# - sql更新查询不更新数据库

> ID：12663314
> 
> 赞同：2
> 
> 时间：2012-09-30T17:21:14.867
> 
> 标签：c#, ms-access, datagridview, ado.net

我正在编写一个更新我创建的数据库的应用程序。该应用程序上有一个数据网格视图，它显示来自数据库的数据。我的应用程序发生了一些非常奇怪的事情。

这是更新数据库的代码

```
string updateCommandString = "UPDATE RoomsTable SET [Date Checked]=@checkedDate WHERE      ID = @id"; 
using (OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\users\spreston\documents\visual studio 2012\Projects\roomChecksProgram\roomChecksProgram\roomsBase.accdb"))
{
    using (OleDbCommand updateCommand = new OleDbCommand())
    {
        updateCommand.Connection = conn;
        updateCommand.CommandText = updateCommandString;
        updateCommand.CommandType = CommandType.Text;
        updateCommand.Parameters.AddWithValue("@checkedDate", 
            this.dateTimePicker1.Value.ToShortDateString());
        updateCommand.Parameters.AddWithValue("@id", row.roomID);
        try
        {
            conn.Open();
            updateCommand.ExecuteNonQuery();
            conn.Close();
            conn.Dispose();
        }
        catch(OleDbException ex)
        {
            MessageBox.Show(ex.Message.ToString());
        }
    }
} 
```

现在，当我运行该代码，关闭应用程序并再次运行应用程序时，更改的内容正确显示在连接到数据库的 datagridview 中，但是当我查看实际数据库时，根本没有任何改变。我不知道为什么会这样。

我的 sql update 更新了连接到数据网格视图的数据库。Sow HOW 是显示正确数据但不显示数据库本身的数据网格视图。

编辑：我以前没有使用过 sql 的经验。

编辑：交易代码：

```
 string updateCommandString = "UPDATE RoomsTable SET [Date Checked]=@checkedDate WHERE ID = @id"; 
                using (OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\users\spreston\documents\visual studio 2012\Projects\roomChecksProgram\roomChecksProgram\roomsBase.accdb"))
                        {
                            OleDbTransaction transaction = null;
                         using (OleDbCommand updateCommand = new OleDbCommand())
                             {

                                    updateCommand.Connection = conn;
                                    updateCommand.Transaction = transaction;    
                                    updateCommand.CommandText = updateCommandString;
                                    updateCommand.CommandType = CommandType.Text;
                                    updateCommand.Parameters.AddWithValue("@checkedDate", this.dateTimePicker1.Value.ToShortDateString());
                                    updateCommand.Parameters.AddWithValue("@id", row.roomID);
                            try
                            {
                                conn.Open();
                                transaction = conn.BeginTransaction();
                                updateCommand.ExecuteNonQuery();
                                transaction.Commit();

                                conn.Close();
                                conn.Dispose();
                            }
                            catch(OleDbException ex)
                            {
                                MessageBox.Show(ex.Message.ToString());
                            }
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:41:09.303

可能的原因：

1.  您的应用程序可能会连接到数据库文件的副本。在您的项目目录中搜索数据库副本（.accdb 扩展名？）
2.  也许 David S 是对的，但您必须在数据库上提交更改（[MSDN 上的 OleDbTransaction 帮助](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbtransaction.commit.aspx)）。将隔离设置更改为 READ UNCOMMITTED 是一种不优雅的解决问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:28:05.737

听起来您*可能*对我有事务隔离问题。如果您不熟悉此主题，建议您 google 并阅读文档。我相信 READ COMMITTED 是默认设置...将其设置为 READ UNCOMMITTED 可能会解决您无法看到更新的问题。但是，这并不是真正推荐的方法。通常，您只想确保在尝试检查信息之前将所有事务提交到数据库。

附加说明：在测试应用程序期间，我不时需要能够从应用程序外部的 SQL 工具查询数据库以检查某些内容。但是，在开发数据库应用程序的近 15 年中，我从来不需要将其设置为 READ UNCOMMITTED 以用于生产。除了 READ COMMITTED 之外，我会非常谨慎地进行生产。我并不是说您永远不需要这样做，但这不是常态（恕我直言）。

# asp.net-mvc - 作为 Facebook Fanpage 的 ASP.NET MVC 应用程序存在重定向问题

> ID：12663316
> 
> 赞同：0
> 
> 时间：2012-09-30T17:21:17.117
> 
> 标签：asp.net-mvc, facebook, facebook-c#-sdk

我编写了一个简单的 HELLO 世界应用程序，旨在用于 Facebook 页面（选项卡）。到目前为止，一切似乎都很好，困扰我的问题如下：

在控制器动作的某个地方我有这样的代码：

```
if(condition)
return RedirectToAction(ActionName, ControllerName,...); 
```

假设应用程序托管在域 actualdomain.com 上，则浏览器将重定向到：

```
actualdomain.com/ControllerName/ActionName/.... 
```

到实际的应用程序 URI，这是我不想要的：我希望应用程序留在它启动的 Facebook 选项卡中。

我怎样才能做到这一点？

我的应用开发环境：VS2010，Facebook C# SDK 6.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:35:48.060

尝试以下

```
return new JavascriptRedirectResult(yourAppActionHere); 
```

你的链接应该像 [http://app.facebook.com/testapp/](http://app.facebook.com/testapp/) {action name}

希望能帮助到你

# java - Java Jni 和 C++

> ID：12663320
> 
> 赞同：0
> 
> 时间：2012-09-30T17:21:27.567
> 
> 标签：java, android, c++, android-ndk, java-native-interface

我正在学习 JNI 如何从 Java 程序调用 C++ 对象方法。我正在使用 Android NDK/SDK 编写应用程序。我是 JNI 的初学者，我想知道是否支持多态性。也就是说，假设我有一个简单的 C++ 类：

```
class HeyBoy
{
    public:
        virtual int    getValue()
        {
            return 10;
        }
};

class HeyBoyDerived1 : public HeyBoy
{
    public:
        int    getValue()
        {
            return 20;
        }
}

class HeyBoyDerived2 : public HeyBoy
{
    public:
        int    getValue()
        {
            return 30;
        }
} 
```

在运行时，我希望用户选择使用哪个实现（1 或 2），只需按下应用界面上的按钮。应该创建正确的 C++ 对象。然后，我会放置一个带有“获取值”标签的按钮。按下按钮时，`getValue()`应调用当前选定实现的方法。之后，结果将打印在手机屏幕上。我真的很想看一些代码示例！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:02:48.610

最简洁的答案是不。JNI 是一个 C 接口，它不知道 C++、类、继承或多态性。

更长的答案是：是的，C 函数可用于调用所需的构造函数和调用虚方法。

# iphone - xcconfig 文件中的预处理器宏

> ID：12663323
> 
> 赞同：6
> 
> 时间：2012-09-30T17:22:12.957
> 
> 标签：iphone, objective-c, ios, xcode, xcconfig

可以在配置文件中使用宏吗？我想实现类似：

```
if iPad
set variable to 1
else
set variable to 0 
```

那可能吗？我宁愿不为此使用脚本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T22:24:52.480

您通常应该在运行时而不是编译时检查它。请参阅[iOS - 条件编译 (xcode)](https://stackoverflow.com/questions/4581700/ios-conditional-compilation-xcode)。

如果您不这样做，我通常建议使用@Robert Vojta 暗示的不同目标。

也就是说，我可以想象在某些共享代码中这会很有用的情况。所以...

您可以使用一个名为 .xcconfig 的变量`TARGETED_DEVICE_FAMILY`。它为 iPhone 和 iPod Touch 返回 1，为 iPad 返回 2。这可以用来创建一种宏。我不强烈推荐这种方法，但这是你如何做到的。假设您试图设置一些名为的值`SETTINGS`：

```
// Family 1 is iPhone/iPod Touch. Family 2 is iPad
SettingsForFamily1 = ...
SettingsForFamily2 = ...
SETTINGS = $(SettingsForFamily$(TARGETED_DEVICE_FAMILY)) 
```

我在我的项目中做过几次（针对其他问题，而不是针对 iPad 检测）。每次我完成它时，都会有更多的想法让我将其删除并以更简单的方式进行（通常会找到另一种方式来构建我的项目以消除需要）。但这是一种在 xcconfig 中创建条件的技术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T17:49:49.610

AFAIK 这是不可能的。但是如果你想解决简单的任务——很多常见的设置，只有几个变量有不同的值，你可以这样做：

**通用的.xcconfig：**

```
settings for both configs 
```

**ipad.xcconfig：**

```
#include "generic.xcconfig"
ipad-specific-settings 
```

**iphone.xcconfig**

```
#include "generic.xcconfig"
iphone-specific-settings 
```

这可以解决您的病情需要。我确实经常使用这个模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:41:32.253

那是不可能的。配置文件没有经过预处理（和编译）。你想做什么？

# java - java：使用缓冲阅读器并检查字符串是否为空

> ID：12663324
> 
> 赞同：1
> 
> 时间：2012-09-30T17:22:20.990
> 
> 标签：java, null, bufferedreader

为什么不`if (txtLine == null) { break; };`工作？或者也许正确的答案是为什么它仍然将字符串设置`txtLine`为空（字面意思）。我理解它的方式，它应该在字符串为空的那一刻中断？我不希望它将字符串设置为“null”。但是当 *.txt 文件中没有更多行时停止

```
try{
    BufferedReader txtReader = new BufferedReader (new FileReader ("test.txt"));
    while (true) {
        // Reads one line.
        println(txtLine);
        if(txtLine == null){
            break;
        };
        txtLine = txtReader.readLine();
        nLines(txtLine);
    }
    txtReader.close();
} catch (IOException ex) {
    throw new ErrorException(ex);   
} 
```

`txtFile`变量被定义为IVAR

```
private int nChars = 0;
private String txtLine = new String(); 
private ArrayList <String> array = new ArrayList <String>(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T17:29:39.713

我认为中断时的顺序以及将值更改为`txtLine`从文件中读取的下一行时的顺序是向后的，您的代码应如下所示：

```
try{
    BufferedReader txtReader = new BufferedReader (new FileReader ("test.txt"));
    while (true) {
        // Reads one line.
        println(txtLine);
        txtLine = txtReader.readLine();
        // check after we read the value of txtLine
        if(txtLine == null){
            break;
        }

        nLines(txtLine);
    }
    txtReader.close();
} catch (IOException ex) {
    throw new ErrorException(ex);   
} 
```

但这是一种更简洁（我认为更清晰）的形式：

```
try{
    BufferedReader txtReader = new BufferedReader (new FileReader ("test.txt"));
    while ((txtLine = txtReader.readLine()) != null) {
        // Reads one line.
        println(txtLine);
        nLines(txtLine);
    }
    txtReader.close();
} catch (IOException ex) {
    throw new ErrorException(ex);   
} 
```

Where`while ((txtLine = txtReader.readLine()) != null)`将 txtLine 设置为下一行，然后在继续之前检查 txtLine 是否为空。

# c++ - 两者中哪一个会更快地初始化对象？

> ID：12663329
> 
> 赞同：3
> 
> 时间：2012-09-30T17:22:40.040
> 
> 标签：c++

```
class A {
   public:
   int a;
   A(int x)
   {
      a = x;
   }
}; 
```

或者

```
class B {
       public:
       int b;
       B(int x):b(x){}
}; 
```

哪一个会更快地初始化对象？或者最终会为两者生成相同的代码并且初始化所花费的时间将保持不变？还是取决于编译器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T17:23:39.397

对于 POD 成员，包括`int`，它们将是相同的，因为该成员不会被构造两次。

对于具有默认构造函数的类型，第二个会更快，因为第一个选项等效于：

```
A(B x) : a()
{
   a = x;
} 
```

if`a`是类型的成员`B`（具有默认构造函数）。

请注意，在某些情况下您**必须**使用初始化列表：`const`成员、引用成员、没有默认构造函数的类类型的成员。

## POD 成员：

### 没有初始化列表：

```
 A(int x)
001F1430  push        ebp  
001F1431  mov         ebp,esp  
001F1433  sub         esp,0CCh  
001F1439  push        ebx  
001F143A  push        esi  
001F143B  push        edi  
001F143C  push        ecx  
001F143D  lea         edi,[ebp-0CCh]  
001F1443  mov         ecx,33h  
001F1448  mov         eax,0CCCCCCCCh  
001F144D  rep stos    dword ptr es:[edi]  
001F144F  pop         ecx  
001F1450  mov         dword ptr [ebp-8],ecx  
   {
      a = x;
001F1453  mov         eax,dword ptr [this]  
001F1456  mov         ecx,dword ptr [x]  
001F1459  mov         dword ptr [eax],ecx  
   } 
```

### 初始化列表：

```
 A(int x) : a(x)
00E71430  push        ebp  
00E71431  mov         ebp,esp  
00E71433  sub         esp,0CCh  
00E71439  push        ebx  
00E7143A  push        esi  
00E7143B  push        edi  
00E7143C  push        ecx  
00E7143D  lea         edi,[ebp-0CCh]  
00E71443  mov         ecx,33h  
00E71448  mov         eax,0CCCCCCCCh  
00E7144D  rep stos    dword ptr es:[edi]  
00E7144F  pop         ecx  
00E71450  mov         dword ptr [ebp-8],ecx  
00E71453  mov         eax,dword ptr [this]  
00E71456  mov         ecx,dword ptr [x]  
00E71459  mov         dword ptr [eax],ecx 
```

即相同，& 那是因为`a`在进入构造函数体之前没有初始化。

## 非 POD 成员：

### 没有初始化列表：

```
00EB1A80  push        ebp  
00EB1A81  mov         ebp,esp  
00EB1A83  sub         esp,0CCh  
00EB1A89  push        ebx  
00EB1A8A  push        esi  
00EB1A8B  push        edi  
00EB1A8C  push        ecx  
00EB1A8D  lea         edi,[ebp-0CCh]  
00EB1A93  mov         ecx,33h  
00EB1A98  mov         eax,0CCCCCCCCh  
00EB1A9D  rep stos    dword ptr es:[edi]  
00EB1A9F  pop         ecx  
00EB1AA0  mov         dword ptr [ebp-8],ecx  
00EB1AA3  mov         ecx,dword ptr [this]  
00EB1AA6  call        B::B (0EB11D6h)  
   {
       a = b;
   }
00EB1AAB  mov         eax,dword ptr [this]  
00EB1AAE  pop         edi  
00EB1AAF  pop         esi  
00EB1AB0  pop         ebx  
00EB1AB1  add         esp,0CCh  
00EB1AB7  cmp         ebp,esp  
00EB1AB9  call        @ILT+315(__RTC_CheckEsp) (0EB1140h)  
00EB1ABE  mov         esp,ebp  
00EB1AC0  pop         ebp  
00EB1AC1  ret         4 
```

### 初始化列表：

```
A(B b) : a(b)
   {
00841650  push        ebp  
00841651  mov         ebp,esp  
00841653  sub         esp,0CCh  
00841659  push        ebx  
0084165A  push        esi  
0084165B  push        edi  
0084165C  push        ecx  
0084165D  lea         edi,[ebp-0CCh]  
00841663  mov         ecx,33h  
00841668  mov         eax,0CCCCCCCCh  
0084166D  rep stos    dword ptr es:[edi]  
0084166F  pop         ecx  
00841670  mov         dword ptr [ebp-8],ecx  
   } 
```

即初始化列表选项更好。

# java - 尝试注入泛型类时未找到依赖项

> ID：12663330
> 
> 赞同：0
> 
> 时间：2012-09-30T17:22:46.837
> 
> 标签：java, spring, dependency-injection

我开发了一个`GenericDAO`具有两种通用类型的接口，即实体和主键类型：

```
public interface GenericDAO<E, PK extends Serializable> {
    PK save(E newInstance);
    void update(E transientObject);
    //typical dao methods
} 
```

然后我在hibernate 4中为它们提供了一个实现：

```
@Transactional
@Component
@Repository
public abstract class GenericDAOHibernate4<E, PK extends Serializable> implements GenericDAO<E, PK> {
    public PK save(E newInstance) {
        return (PK) factory.getCurrentSession().save(newInstance);
    }
    public E findById(PK id) {
        return (E) factory.getCurrentSession().get(getEntityClass(), id);
    }
//method implementations
} 
```

然后我只需要创建扩展这个抽象类的具体类：

```
@Component
@Transactional
@Repository
@Qualifier("userDAO")
public class UserDAO extends GenericDAOHibernate4<User, Long> {

    @Autowired
    public UserDAO(SessionFactory factory) {
        super(factory);
    }

    @Override
    protected Class<User> getEntityClass() {
        return User.class;
    }

} 
```

然后我在需要时以这种方式注入具体的 DAO：

```
public class UserService extends GenericService<User> {
    @Autowired
    public UserService(@Qualifier("userDAO") GenericDAO<User, Long> dao) {
        super(dao);
    } 
```

但是，如果我需要向具体的 dao 添加另一个方法，从而注入具体的类，spring 找不到依赖项。这在启动时失败：

```
public class UserService extends GenericService<User> {
    @Autowired
    public UserService(@Qualifier("userDAO") UserDAO dao) {
        super(dao);
    } 
```

出现此错误：

> 无法实例化 bean 类 [ddol.rtdb.services.UserService]：未找到默认构造函数；嵌套异常是 java.lang.NoSuchMethodException: ddol.rtdb.services.UserService.()

我应该如何注入它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:26:45.303

如果一个类实现了一个接口，那么该类的 bean 只能使用接口类型而不是具体类类型自动装配。由于`UserDao`实现了`GenericDAO<User, Long>`接口，因此当您使用接口自动装配时，它会被正确地自动装配。当您尝试使用具体类进行自动装配时，Spring 无法找到依赖项，然后它会寻找一个无参数构造函数，`UserService`并在找不到任何内容时给出特定错误。

通常，使用具体类注入依赖项并不是一个好主意，因为它会紧密耦合您的模块。正确的方法是为每个 DAO 类提供一个接口，并让它们的实现扩展`GenericDAOHibernate4`.

```
public interface GenericDAO<E, PK extends Serializable> {
    PK save(E newInstance);
    void update(E transientObject);
    //typical dao methods
}

public interface UserDAO extends GenericDAO<User, Long> {
    List<User> findUsersByFirstname(String firstName);
}

@Component
@Transactional
@Repository
@Qualifier("userDAO")
public class UserDAOImpl extends GenericDAOHibernate4<User, Long> 
        implements UserDAO {

    @Autowired
    public UserDAO(SessionFactory factory) {
        super(factory);
    }

    @Override
    protected Class<User> getEntityClass() {
        return User.class;
    }

    List<User> findUsersByFirstname(String firstName) {
        //provide implementation here
    }

}

public class UserService extends GenericService<User> {
    @Autowired
    public UserService(@Qualifier("userDAO") UserDAO dao) {
        super(dao);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:46:28.770

@Autowired = 按类型连接 @Resource = 按 bean 名称连接

# vb.net - WebBrowser 值异常上的 ProgressBar

> ID：12663341
> 
> 赞同：0
> 
> 时间：2012-09-30T17:24:00.363
> 
> 标签：vb.net, browser, progress-bar

当我尝试加载任何页面时，我得到一个异常，上面写着：

`Value of '1010000' is not valid for 'Value'. 'Value' should be between 'minimum' and 'maximum'`.

有时数字不同，但错误始终相同。这是我用于 ProgressBar 的代码

```
If e.MaximumProgress = -1 Or e.CurrentProgress = -1 Then Exit Sub
        ToolStripProgressBar2.Maximum = e.MaximumProgress
        ToolStripProgressBar2.Value = e.CurrentProgress 
```

难道我做错了什么？我过去通过增加 Value 来缓解这个问题，但我现在不知道该怎么做。[我试过这里](https://stackoverflow.com/questions/3175966/problem-with-progressbar-value-in-vb-net)所说的，但我仍然得到同样的错误。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:27:12.417

e.MaximumProgress 的值是多少？如果这大于 e.CurrentProgress，则该错误是有意义的。

# c# - 从 Form2 中的文本框写入 Form1 中的 Datagridview

> ID：12663348
> 
> 赞同：0
> 
> 时间：2012-09-30T17:24:37.920
> 
> 标签：c#, winforms

我还是 C# 的新手，所以请多多包涵。

我有 Form1`DataGridView`和 a `Button`。此按钮打开`Form2`。

`Form2`包含 a`TextBox`和 a`Button`关闭`Form2`。

我需要将`TextBox`in 中的文本写入Form1`Form2`的第一个单元格中。`DataGridView`在我正在开发的应用程序中，.in 中已经有其他`DataGridView`数据`Form1`。

我已经在[这里](https://www.yousendit.com/download/TEhXSkhZWlRiV3cwTWRVag)上传了 Visual Studio 2010 文件。

编辑：

请看这个截图：

[![在此处输入图像描述](../Images/9dad0b8ea708c19f6c6e85b06e3d4eaf.png)](https://i.stack.imgur.com/BTYXe.png)

这是我正在使用的代码：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form1 form1 = new Form1();
        form1.dataGridView1.Rows[0].Cells[0].Value = textBox1.Text;
        this.Close();
    }
} 
```

`Form1`当我不想的时候，我似乎在实例化一个新的。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:18:32.973

您不需要`Form2`（再次）实例化主窗体 ( `Form1`)。

更合适的方法是将包含文本框的辅助表单打开为模式对话框窗口，并让打开器表单 ( `Form1`) 访问用户输入的文本`Form2`。

下面描述了所需的更改：

**`Form2`变化：**

1.- 添加一个新的类成员来存储要在文本框中引入的字符串`textBox1`。

```
public String textFromTextBox = null; 
```

2.- 将代码添加到 OK 按钮的 clic 事件处理程序，以便`textFromTextBox`将文本框中引入的值存储在新类成员中：

3.- 最后，在相同的 clic 事件处理代码中将`DialogResult`属性设置为`DialogResult.OK`.

`Form2`代码如下所示：

```
public partial class Form2 : Form
{
    [...]

    // This class member will store the string value 
    // the user enters in the text-box
    public String textFromTextBox = null;

    [...]

    // This is the event-handling code that you must place for
    // the OK button.
    private void button1_Click(object sender, EventArgs e)
    {
        this.textFromTextBox = this.textBox1.Text;
        this.DialogResult = DialogResult.OK;
    }
} 
```

**`Form1`变化**

1.-在带有“输入文本”标签的按钮中（代码中实际上缺少该标签），在`Click`事件处理程序中放置打开`Form2`模式所需的代码`Dialog`。

2.- 通过恢复存储在`Form2`'s`textFromTextBox`成员中的值，相应地设置数据网格中的单元格值。

3.- 最后处置您的`Form2`实例。

```
 Form2 myFormWithATextBox = new Form2();

   if (myFormWithATextBox.ShowDialog(this) == DialogResult.OK)
   {
      this.dataGridView1.Rows[0].Cells[0].Value = myFormWithATextBox.textFromTextBox;
   }
   myFormWithATextBox.Dispose(); 
```

考虑到你的主窗体只是一个辅助窗体控件`Form1`，`Form2`它不应该对应用程序的流程进行太多控制，因此不承担实例化主窗体的责任。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:27:20.443

您可以通过创建另一个接受以下参数的承包商将变量从表单传递到另一个：-

1）去form1然后创建另一个承包商：

```
 public Form1(string myString)
    {
        InitializeComponent();

        if (myString != null)
            dataGridView1.Rows[0].Cells[0].Value = myString;
    } 
```

2）转到form2并在按钮下写下这段代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        Form1 frm1 = new Form1(textBox1.Text);
        frm1.ShowDialog();
    } 
```

[这是您修改后的应用程序](http://www.mediafire.com/?28dde3cjzg8b3po)

# python - 文件类型的正则表达式

> ID：12663354
> 
> 赞同：5
> 
> 时间：2012-09-30T17:26:16.250
> 
> 标签：python, regex

我正在使用其中包含以下行的应用程序：

```
ACCEPT_FILE_TYPES = re.compile('image/(gif|p?jpeg|(x-)?png)') 
```

显然，它将上传限制为指定扩展名的**图像**。但我打算用它来上传这些格式（也许不止这些）

*   *Microsoft Office 文件*（.doc、.docx、.xls、.xlsx 等）
*   *Adobe 阅读器*(.pdf)
*   *可能还有档案*（.rar、.zip、.7z）

我想它需要重写为以下形式：

```
ACCEPT_FILE_TYPES = re.compile('/(docx?|xlsx?|pdf|rar|zip|7z)') 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T17:50:19.367

这些不是您要匹配的文件扩展名，而是**MIME types**。

常见图像格式的 MIME 类型恰好非常简单，例如：

```
image/png
image/jpeg
image/gif 
```

但大多数其他类型不是，而是使用如下 MIME 类型：

```
.pdf    application/pdf

.doc    application/msword
.xls    application/vnd.ms-excel

.rar    application/x-rar-compressed
.7z     application/x-7z-compressed
.zip    application/zip

.xlsx   application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
.xltx   application/vnd.openxmlformats-officedocument.spreadsheetml.template
.potx   application/vnd.openxmlformats-officedocument.presentationml.template
.ppsx   application/vnd.openxmlformats-officedocument.presentationml.slideshow
.pptx   application/vnd.openxmlformats-officedocument.presentationml.presentation
.sldx   application/vnd.openxmlformats-officedocument.presentationml.slide
.docx   application/vnd.openxmlformats-officedocument.wordprocessingml.document
.dotx   application/vnd.openxmlformats-officedocument.wordprocessingml.template 
```

*注意：这些只是相应文件格式最常用的 MIME 类型。IANA 是注册 MIME 类型的官方机构，但在野外，您会遇到许多不同的变体，具体取决于使用它们的程序（邮件客户端、浏览器、Web 服务器……）。*

所以你不应该通过使用正则表达式来匹配它们，而是维护一个允许的 MIME 类型的注册表（可以是一个简单的 Python 列表，或者如果你想真正确定并考虑变体，可以是一个字典）。

阅读[MIME 类型](http://en.wikipedia.org/wiki/Internet_media_type)，检查[IANA MIME 媒体类型列表](http://www.iana.org/assignments/media-types/index.html)作为已注册 MIME 类型的权威来源，并使用 Python[**`mimetypes`**模块](http://docs.python.org/library/mimetypes.html)按文件扩展名查找 mimetypes，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T21:31:44.690

此函数评估给定的 URI 是否对应于具有有效 mime 类型的文件。

```
import mimetypes

a = 'http://www.cwi.nl:80/%7Eguido/Python.html'
b = '/data/Python.txt'
c = 532
d = u'dkakasdkjdjakdjadjfalskdjfalk'
e = u'http://tobeclever.ru/download/martin_george_a_game_of_thrones.pdf'

# The optional strict argument is a flag specifying whether the list
# of known MIME types is limited to only the official types registered
# with IANA. When strict is True (the default), only the IANA types are
# supported; when strict is False, some additional non-standard but commonly
# used MIME types are also recognized.

def mimetype_validator(x):
    try:
        (guessed_type, encoding_guessed) = mimetypes.guess_type(x, strict=True)
        return True if guessed_type in mimetypes.types_map.values() else False
    except:
        return False

print mimetype_validator(a)
print mimetype_validator(b)
print mimetype_validator(c)
print mimetype_validator(d)
print mimetype_validator(e) 
```

给出：

```
True
True
False
False
True 
```

# java - Spring-MVC/Hibernate/MySql 的良好开发设置

> ID：12663357
> 
> 赞同：1
> 
> 时间：2012-09-30T17:26:28.360
> 
> 标签：java, eclipse, spring, web-applications, spring-mvc

我正在使用带有 Hibernate 和 MySql 的 Spring3-MVC 开始一个新项目，并设想以下开发设置：

*   马文
*   Eclipse IDE（以前用过netbeans，想试试Eclipse）
*   雄猫

**问题：**

*   开发的生命周期是什么？
    *   过去，我使用 GF 应用程序服务器和 Netbeans IDE 开发了 struts2 应用程序。进行更改的设置和生命周期非常缓慢。更改 java 代码，netbeans 构建代码，部署到 GF。我知道这些是使用 java 和 webapplication 的共同点，除非我采用 Grails 方式。但是，现在由于有一些用于 Java Web 应用程序的无容器解决方案 - 它是否使该过程有点快/东？
*   我应该使用嵌入式 Tomcat 插件吗？
*   在 netbeans 中，有一种方法可以通过将项目与服务器相关联来添加服务器并启动 maven 项目。Eclipse中有类似的东西吗？
*   我应该下载哪个版本的 Eclipse？
    *   好像有[很多](http://www.eclipse.org/downloads/)我下载了javaEE版本但是没有办法启动一个maven项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:26:59.630

您可以使用嵌入式 tomcat 插件，如果您使用 Maven，请使用 maven tomcat 插件。并使用以下命令部署您的应用程序：

```
mvn tomcat:run 
```

> 在 netbeans 中，有一种方法可以通过将项目与服务器相关联来添加服务器并启动 maven 项目。Eclipse中有类似的东西吗？

是的，您可以在 eclipse 中添加 tomcat 服务器，并在 eclipse 中启动/停止 tomcat，它还允许您轻松调试，只需添加源项目。

> 我应该下载哪个版本的 Eclipse？

最新:) 我相信 Eclipse Juno 4.1。

要开始 maven 项目，请查看 maven[入门指南](http://maven.apache.org/guides/getting-started/index.html)

此外，您可以使用 Maven 插件进行 Eclipse [m2eclipse](http://www.sonatype.org/m2eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T07:58:22.760

如果从头开始，我建议使用[spring boot](http://projects.spring.io/spring-boot/)。

关于 Eclipse，除非您打算使用 glassfish 或 JBoss 或其他一些 EE 容器，否则您应该获得“面向 Java 开发人员”的版本，而不是 EE 版本。即使您确实需要 EE 版本，我也会单独下载并使用它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-03T12:55:05.160

自从 Microsoft ASP.NET 征服整个 Web 应用程序开发社区以来已经有十年了。开发了一种最新的替代方案，称为 ASP .Net MVC 开发。模型视图控制器（MVC）是当今时代的新事物，受到了许多Web开发公司的青睐。

# vb.net - 如何在 VB.NET 中打印带引号的字符串

> ID：12663361
> 
> 赞同：0
> 
> 时间：2012-09-30T17:27:00.293
> 
> 标签：vb.net, string

> **可能重复：**
> [在 VB 字符串中转义双引号](https://stackoverflow.com/questions/4835691/escape-double-quote-in-vb-string)

我在下面用字符串值分配变量，我想用引号打印这些变量，尽管我不确定如何完成这个。到目前为止，一切都打印得很好，除了没有引号。我所拥有的如下：

```
 Dim tU As String = "Print_Me"
    Dim tU2 As String = ""
    Dim str1 As Integer = 1
    Dim str2 As String = tU
    Dim str3 As Single = 3.5
    Dim str4 As String = tU2

    Dim fw As New System.IO.StreamWriter("testfile.txt")
    fw.WriteLine(str1 & "," & str2 & "," & str3 & "," & str4 & "," & 0)

    fw.Close()
    fw.Dispose()
    'prints>>>1,Print_Me,3.5,,0<<<
    'I like to print>>>1,"Print_Me",3.5,"",0<<< 
```

编辑

```
 Dim tU As String = "Print_Me"
    Dim tU2 As String = ""
    Dim str1 As Integer = 1
    Dim str2 As String = tU
    Dim str3 As Single = 3.5
    Dim str4 As String = tU2
    Dim str5 As Integer = 0

    Using fw As New System.IO.StreamWriter("testfile.txt")
        fw.WriteLine(String.Format("""{0}"",""{1}"",""{2}"",""{3}"",""0""", str1, str2, str3, str4, str5))
    End Using

    ''Currently prints>>> "1","Print_Me","3.5","","0"

    ''I would like to print>>> 1,"Print_Me",3.5,"",0 
```

我通过 str5 间接填充 str1，但我不想打印所有带有引号的项目，那么我该如何调整解决方案来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:31:38.617

尝试通过键入`"`两次来转义双引号。此外，我发现 String.Format 比串联更整洁，如果将 StreamWriter 包装在 using 块中，则无需处理它，因为这是由垃圾收集器完成的。

```
Dim str1 As Integer = 1
Dim str2 As String = "Print_Me"
Dim str3 As Single = 3.5
Dim str4 As String = ""

Using fw As New System.IO.StreamWriter("testfile.txt")
    fw.WriteLine(String.Format("""{0}"",""{1}"",""{2}"",""{3}"",""0""", str1, str2, str3, str4))
End Using 
```

此外，您可能可以为变量提供更清晰的名称。在类型之后命名它们被认为是不好的做法，因为它并没有真正为我们提供有关变量包含哪些信息的任何信息。为 Integer 或 Single 加上前缀`str`更糟糕，因为阅读您的代码的人可能会错误地认为该变量是一个字符串，因此尝试像这样对待它。

编辑：响应您的评论，首先，在 VB.Net 字符串中，`""`表示双引号的单个实例，如果要删除双引号，只需删除`""`并保持其他所有内容不变。其次，如果您的某些字符串是间接填充的，这并不重要，您无需创建新变量即可在新字符串中使用它们。在您的代码中`tu`和`str2`指向同一条数据，就像`tu2`and一样`str4`，不需要创建新变量。如果您在变量中保存了一段数据，则无需创建新变量即可以不同的方式使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T23:41:15.080

当您的输出如此规则（并且可能包含更多字符串）时，您可能要考虑的替代方法是：

```
Dim str1 As Integer = 1
Dim str2 As String = "Print_Me"
Dim str3 As Single = 3.5
Dim str4 As String = ""

Dim strings() As String = _
{ _
    str1, _
    str2, _
    str3, _
    str4, _
    "0" _
}

Using fw As New System.IO.StreamWriter("testfile.txt")
    fw.WriteLine( _
        String.Join( _
            ",", _
            strings.Select(Function (s) """" & s & """")))
End Using 
```

您仍然使用`""`来指示内联引用，但您只需要执行两次。如果您的字符串列表变大，您只需将它们添加到数组中（或者它可以是列表或任何其他可枚举）。

# c# - HttpWebRequest - 操作已超时

> ID：12663362
> 
> 赞同：4
> 
> 时间：2012-09-30T17:27:05.780
> 
> 标签：c#, .net, console, httpwebrequest, timeout

我正在尝试使用 HttpWebRequest 调用网页，但是我收到“操作已超时错误”。

```
string sURL = "http://localhost:53667/MyPage.aspx";

WebRequest wrGETURL = WebRequest.Create(sURL);
wrGETURL.Timeout = 5000;
System.Net.ServicePointManager.DefaultConnectionLimit = 5000;

var r = wrGETURL.GetResponse();
r.Close();
wrGETURL.Abort(); 
```

如您所见，我添加了 DefaultConnectionLimit 属性，按照其他线程的建议关闭了响应，但这似乎并没有做到。我究竟做错了什么？

**编辑：**

当我使用来自：http: [//support.microsoft.com/kb/307023](http://support.microsoft.com/kb/307023)的完整示例时，从 Visual C# 作为控制台应用程序运行/调试它，它不会超时。当我将此程序设置为在 Windows 任务计划程序上运行时，它确实超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:29:38.970

对于这样一个简单的操作，请改用 WebClient 运行它。

它的复杂性要小得多，并且它成为特定于`WebRequest`该问题的可能性较小。你也试过在 Visual Studio 之外的同一台机器上运行它吗？

该站点是否由 cassini、iis express、iis 6、iis 7 等托管？其中一些有特殊设置允许远程连接，而 iirc 有些可能根本不允许远程连接。

IIS Express 需要特殊的工作[——IIS Express 启用外部请求](https://stackoverflow.com/questions/3313616/iis-express-enable-external-request)

卡西尼根本无法做到 - [https://serverfault.com/questions/82899/can-i-access-cassini-from-a-remote-machine](https://serverfault.com/questions/82899/can-i-access-cassini-from-a-remote-machine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-30T21:38:19.430

尝试添加此代码：

**ServicePointManager.DefaultConnectionLimit = 500;**

并发连接可能会导致超时错误。就我而言，这很好用。

# python - Python 3 中的 For 循环

> ID：12663367
> 
> 赞同：1
> 
> 时间：2012-09-30T17:27:33.593
> 
> 标签：python, python-3.x

看不懂这个简单的代码：

```
def main():
  print ("This program illustrates a chaotic function")
  x = float(input("Enter a number between 0 and 1: "))
  for r in range(1,10):
    x = 3.9*x*(1 - x)
    print(x) 
```

根据我的理解，它应该打印出 10 个相同的数字。但它给了我10个不同的。我认为范围 (1,10) 仅意味着它迭代槽代码 10 次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T17:31:29.660

`r`从 1 变为 9。`x`从`"old x"`变为`"new x" = 3.9*(old x)*(1 - (old x))`9 次，从输入值开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:42:25.937

`range(a,b)`返回一个 tmp list `[a, a+1, ..., b-2, b-1]`，没有`b`.

# android - 页面在 Webview 中变得太高

> ID：12663374
> 
> 赞同：-1
> 
> 时间：2012-09-30T17:28:30.717
> 
> 标签：android, jquery-mobile

嗨，我在 jQueryMobile 中开发了一个网页。我的问题是，当我在 WebView 中从一个页面导航到另一个页面时，页面高度似乎太大了。另请注意，导航页面高度与前一页面高度大致相同。什么是问题。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:40:04.653

您在 jqm 页面中添加了哪些元标记？在标题中试试这个：

```
<meta name="viewport" content="target-densitydpi=device-dpi" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0,  maximum-scale=1.0"> 
```

如果您想包括缩放，请调整最小值和最大值。然后，您还必须将这些缩放功能添加到您的 web 视图中。

# objective-c - 如何检查用户是否有 NSSharingService 可以在 Facebook 上发布？

> ID：12663379
> 
> 赞同：0
> 
> 时间：2012-09-30T17:29:12.773
> 
> 标签：objective-c, xcode, macos, cocoa

我正在为 10.8+ 制作一个 OSX 应用程序。从 10.8 开始就有了 NSSharingService，但 Facebook 服务只出现在 10.8.2 上。
如何检查用户是否有 Facebook 服务？

# django - 当行已经用单引号包裹时，如何在 trans 中转义单引号？

> ID：12663383
> 
> 赞同：3
> 
> 时间：2012-09-30T17:29:40.413
> 
> 标签：django

```
{% trans 'Enter your friend's name and email below, and click "send invite" to invite your friend.' %} 
```

该行已经用单引号包裹，并且在该行中也使用了双引号。那我怎么能逃到`friend's`这里呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T17:39:56.203

我真的找到了。使用 blocktrans 可以让你有任何东西，混合和匹配。:)

```
{% blocktrans %}Enter your friend's name and email below, and click "send invite" to invite your friend.{% endblocktrans %} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T17:29:21.460

```
{% trans 'Enter your friend&#39;s name and email below, and click "send invite" to invite your friend.' %} 
```

# xcode - 使用推送通知跳转到情节提要中的视图

> ID：12663384
> 
> 赞同：2
> 
> 时间：2012-09-30T17:29:47.147
> 
> 标签：xcode, storyboard, apple-push-notifications

我有一个没有导航控件但有故事板的项目。我可以收到推送通知到我的应用程序。在用户单击通知消息并午餐应用程序后，我希望它跳转到情节提要中的一个视图以显示从互联网获取的消息的详细信息。

知道怎么做吗？

对于同样的问题，我在这里有很多问题——比如[来自推送通知](https://stackoverflow.com/questions/10345624/push-view-from-push-notification)的推送视图——但它们要么在没有情节提要的情况下工作，要么在带有导航的情节提要上工作。

先感谢您。

# bioinformatics - 基因本体术语级别与基因本体术语类型

> ID：12663388
> 
> 赞同：1
> 
> 时间：2012-09-30T17:30:07.167
> 
> 标签：bioinformatics

我在找出基因本体术语的级别和类型的正确定义方面遇到了问题。

我知道 GO 术语的 Type 与 isA 图相关，而不考虑 partOf 关系。但是当我遇到以下情况时，我仍然感到困惑：

查找级别时：

如果我有 GO:123 （假设它是根）指向 GO:345 和术语 GO:567 在两个链接中都有 isA 关系。此外，GO:345 指向具有 partOf 关系的术语 GO:567。

现在，GO:567 的等级是多少？2是因为根指向它吗？还是 3 因为根的儿子指向它？我应该如何在图表的级别和类型上处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:40:08.463

[将此问题提交给Biostar](http://biostars.org)您可能会得到更多有用的答案。或者也许是[GO 网站](http://www.geneontology.org)和 GO[邮件列表](http://www.geneontology.org/GO.mailing.lists.shtml)。

您提出的问题直接源于 GO 的语义。它是一个有向无环图 (DAG)，因此节点没有深度或级别的单一定义。如果您想要一个一致的定义，您可以选择使用 min(depth) 或 max(depth)，但这对于您的应用程序可能不是一个好的选择，您没有描述。同样，图的边缘具有描述不同生物学关系的不同属性（“是”、“一部分”和“调节”）。

您如何最好地处理这些属性取决于您想要完成什么或您想要对数据进行什么查询。由于 GO 术语对基因的注释密度在不同生物体和术语之间差异很大，因此您最好考虑衡量特定上下文中注释信息量的指标，而不是图中的“深度”。

# c# - 使用 OAuthWebSecurity.RegisterMicrosoftClient 的错误请求 (400)

> ID：12663389
> 
> 赞同：8
> 
> 时间：2012-09-30T17:30:17.060
> 
> 标签：c#, authentication, oauth, dotnetopenauth

我正在使用`Microsoft.Web.WebPages.OAuth`. 我能够注册`Google`, `Facebook`, `Twitter`, `Stack Exchange`, `MyOpenID`...

现在我正在尝试添加`Microsoft Live`，所以我注册了：

```
OAuthWebSecurity.RegisterMicrosoftClient("applicationID", "key"); 
```

并打电话给

```
OAuthWebSecurity.RequestAuthentication("microsoft", Url.Action("Authorization", new { returnUrl = "/" })); 
```

至此一切正常，我被重定向到登录页面。问题是当我回到

```
OAuthWebSecurity.VerifyAuthentication(); 
```

它说：

> 远程服务器返回错误：(400) 错误请求。

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:29:16.673

我有同样的问题。经过大量研究，我发现了[这段](https://github.com/DotNetOpenAuth/DotNetOpenAuth/blob/master/src/DotNetOpenAuth.AspNet/OpenAuthSecurityManager.cs#L205)带有注释的源代码：

```
// Only OAuth2 requires the return url value for the verify authenticaiton step 
```

这意味着当您调用 时`VerifyAuthentication`，您必须使用传递返回 url 的重载以供 oauth2 提供程序（在本例中为 Microsoft Live ID 提供程序）进行验证。

果然，当我[在 asp.net 网站上浏览演练时](http://www.asp.net/mvc/overview/getting-started/using-oauth-providers-with-mvc)，我发现他们确实在传回返回 url，作为回调动作的 url。

所以而不是：

```
OAuthWebSecurity.VerifyAuthentication(); 
```

你需要：

```
var returnUrl = Url.Action("Authorization", new { returnUrl = "/" })
OAuthWebSecurity.VerifyAuthentication(returnUrl); 
```

返回 url 应该与您之前在`RequestAuthentication`方法中指定的完全匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T23:28:08.433

您使用的重定向域是什么？我发现（这样做时），由于我已经指定了我的实际域名，我需要让域名指向本地站点。

为了解决这个问题，我在 hosts 文件中添加了一个条目，将我的域指向 127.0.0.1（即，因为我正在本地调试和运行）。

# c++ - 多重继承、复制构造函数和基类初始化？

> ID：12663393
> 
> 赞同：3
> 
> 时间：2012-09-30T17:30:47.203
> 
> 标签：c++, constructor, multiple-inheritance, copy-constructor

如何编写具有多重继承的复制构造函数？

`B1`并且`B2`被`D`继承链中没有钻石继承。我需要编写一个复制构造函数，`D`以便它调用`B1`和的复制构造函数`B2`

我想避免在`clone()`这里写

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T17:35:56.490

经典方法有什么问题：

```
D(const D& other) : B1(other), B2(other)
{
} 
```

?

# python - 如何使用 Python (Ubuntu) 创建桌面快捷方式？

> ID：12663397
> 
> 赞同：0
> 
> 时间：2012-09-30T17:31:12.823
> 
> 标签：python, ubuntu, desktop-shortcut

我想知道如何使用 Python 在 Ubuntu（或任何 Linux 发行版）的桌面上创建快捷方式文件。我对修改目标路径字符串特别感兴趣。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:00:06.467

创建一个[*.desktop 文件](http://standards.freedesktop.org/desktop-entry-spec/latest/)并将其放在桌面文件夹中。另请参阅[如何将其添加到 Unity 启动器](https://help.ubuntu.com/community/UnityLaunchersAndDesktopFiles)。

# java - 在 for 循环的最后一次迭代中打印

> ID：12663406
> 
> 赞同：0
> 
> 时间：2012-09-30T17:32:07.380
> 
> 标签：java, for-loop

所以我有一个简单的for循环：

```
 double bg = 5.0;
  double f = 0.0;
  for(double i = 0; i <= bg; i += 1)
    {
        f = f + ((2 * i + 1)*0.1);

        if(i == bg)
        {
            System.out.printf ("%.1f" , f);
        }
    } 
```

当我为每个迭代增加 i 1 时，它工作正常。但是当我执行 i += 0.1 时，它不会打印 f。任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T17:35:42.790

你不能像那样比较花车。

通常用类似的东西检查两个浮点数（双精度）的相等性

if (Math.abs(i - bg) < 0.00001f) //0.00001f 是非常小的值 - 几乎为零，选择这个值以满足您的需要

有关更多信息，请查看[http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

您的代码应如下所示

```
 double bg = 5.0;
  double f = 0.0;
  for(double i = 0; i <= bg; i += 1)
    {
        f = f + ((2 * i + 1)*0.1);

        if (Math.abs(i - bg) < 0.00001f)
        {
            System.out.printf ("%.1f" , f);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:42:54.093

浮点数并没有你认为它们可能的所有数字的精确表示。例如，当 1 除以 3 时，您得到 0.333...，因为您使用十进制数字系统。

然而，计算机使用二进制，所以即使 0.1 看起来是一个简单而准确的数字，但在二进制中它看起来更像 0.0001100011...，等等直到无穷大。而且，由于计算机没有无限的内存，这个数字被四舍五入到最接近的可能表示。这就是为什么精确比较不起作用的原因。

有很多方法可以解决这个问题。一种选择是使用已经提到的增量比较。但是，如果您知道您将只处理小数点后最多位数的数字，您可以改为使用整数将所有内容乘以 100。例如，如果您正在进行货币计算，这是建议的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:46:16.683

在我的图形工具中，我将遍历一个整数值并即时计算浮点数：

```
int bg = 5;
double f = 0.0;
for(int i = 0; i <= bg; i += 1) {
    f = f + ((2 * i + 1)*0.1);

    if(i == bg)
    {
        System.out.printf ("%.1f" , f);
    }
} 
```

# java - 通过 Java 访问 phpMyAdmin 数据库

> ID：12663407
> 
> 赞同：-1
> 
> 时间：2012-09-30T17:32:11.263
> 
> 标签：java, phpmyadmin

我正在尝试从 java 插件项目访问 phpMyAdmin 数据库。我已将 mysql-connector-java-5.0.8-bin.jar 添加到项目的外部 jar 文件中，以下是我用于访问数据库的连接字符串：

```
Class.forName ("com.mysql.jdbc.Driver").newInstance ();
String link= "jdbc:odbc:https://just36.justhost.com:2083:databaseName=xxxx";
private static String userName = "xxxx";
private static String password = "xxxx";
Connection conn = DriverManager.getConnection(link, userName, password); 
```

URL、数据库名称、用户名和密码正确。但是这段代码给出了以下错误。

* * *

java.sql.SQLException: [Microsoft][ODBC Driver Manager] sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source) at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source) at sun 的数据源名称太长。 jdbc.odbc.JdbcOdbc.SQLDriverConnect(Unknown Source) at sun.jdbc.odbc.JdbcOdbcConnection.initialize(Unknown Source) at sun.jdbc.odbc.JdbcOdbcDriver.connect(Unknown Source) at java.sql.DriverManager.getConnection(Unknown Source ) 在 vocab.ITSVocabulary.ReadTextInput(ITSVocabulary.java:27) 的 java.sql.DriverManager.getConnection(Unknown Source)

## 在 vocab.TestMain.main(TestMain.java:23)

**第 27 行：Connection conn = DriverManager.getConnection(url, userName, password);**

我检查了这个问题的相关帖子，并为这个 JAR 文件设置了类路径变量。在此之前，我尝试了mysql-connector-java-5.1.22.jar，它也没有工作。我需要在此处设置任何类路径或更改任何网络设置吗？如果有人能告诉我这个程序有什么问题或我错过了什么，我真的很感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:51:54.437

为什么是phpmyadmin？phpmyadmin 什么都不是，只是一个mysql的客户端，写上connect java to mysql这样的标题。使用谷歌搜索这个，你会发现大量的博客解释这个。[这](https://stackoverflow.com/questions/8576856/cant-connect-to-mysql-on-localhost)对你应该没问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-28T13:53:26.580

```
final String server="localhost/";

final String db_name="db_name";

final String userName="xxxx";

final String password="xxxx";

Connection myConn= DriverManager.getConnection("jdbc:mysql://"+server+db_name,userName,password); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:35:54.643

您使用的不是 mysql 连接字符串，而是 odbc 连接字符串。请参阅[http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)

它也将是一个 mysql 数据库而不是 phpmyadmin，后者是 mysql 的 PHP UI

# github - Github 不检查本地仓库是否已更改

> ID：12663412
> 
> 赞同：2
> 
> 时间：2012-09-30T17:33:30.280
> 
> 标签：github, sync, github-for-windows

我最近重新安装了我的电脑，现在我遇到了 github for windows 的问题（我将在本文的其余部分使用 GFW）。它说我的本地存储库是同步的，但即使我更改内容、删除文件或添加文件，它也会一直说它是同步的。

它确实检查我是否在另一台计算机上进行更改并推送它们。但是同步不起作用，所以我去了shell

在那里我可以提交（在 GFW 中显示有准备推送的提交），在 GFW 中的同步按钮仍然不起作用（显示有问题，我应该在 git shell 中继续）。当我在 shell 中提交时说有更改、插入和删除

然后当我想推它时说`Everything up-to-date`。

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:29:42.140

检查你是否真的在一个分支上：你的提交是在一个分支上还是在一个“[分离的 HEAD](https://stackoverflow.com/questions/5772192/git-how-can-i-reconcile-detached-head-with-master-origin) ”上？（更多内容请参见“[无法推送到 GitHub：一切都是最新的](https://stackoverflow.com/a/11085465/6309)”）。

一个简单的 git 分支可以显示活动分支。如果没有，这将解释为什么“同步”按钮无效。您需要将[分支快进到那个分离的 HEAD](https://stackoverflow.com/q/4845505/6309)。

# android - Soundpool 停止问题？

> ID：12663413
> 
> 赞同：0
> 
> 时间：2012-09-30T17:33:47.147
> 
> 标签：android, android-layout, android-viewpager, soundpool

Soundpool 停止功能不起作用。我有很多图像，当我需要播放与图像相关的声音时，我有很多图像，我尝试使用 soundpool 对象音乐播放得很好。但是如果我快速将 1 个图像移动到第 1 个图像的 2 个图像，我的问题是滚动时间,2 图像相关的声音被播放。但我需要设置当 2 个图像是视图位置时自动我需要停止 1 个图像相关的声音，我只需要播放 2 个图像相关的声音。

谢谢，

```
package com.example.pictures;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class Pictures extends Activity implements OnPageChangeListener{
SoundManager snd; 
int sound1,sound2,sound3;
View view=null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.picturespage);
 MyPagerAdapter adapter = new MyPagerAdapter();
 ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
 myPager.setAdapter(adapter);
 myPager.setCurrentItem(0); 
 myPager.setOnPageChangeListener(this);
snd = new SoundManager(this);
 sound1 = snd.load(R.raw.sound1);
 sound2 = snd.load(R.raw.sound2);
 sound3 = snd.load(R.raw.sound3);

}
public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

}

public void onPageScrolled(int arg0, float arg1, int arg2) {
    // TODO Auto-generated method stub

}

public void onPageSelected(int position) {
    // TODO Auto-generated method stub

    switch (position) {
    case 0:                
            snd.play(sound1);
            lastPlayed = sound1;
        break;
    case 1:
            snd.stop(lastPlayed);
        snd.play(sound2);
            lastPlayed = sound2;
        break;
    case 2:
            snd.stop(lastPlayed);
            snd.play(sound3);
            lastPlayed = sound3;
        break;
    case 3:
        Toast.makeText(this, "test", Toast.LENGTH_SHORT).show();
        break;
    case 4:
       Toast.makeText(this, "test2", Toast.LENGTH_SHORT).show();
        break;
    case 5:
        Toast.makeText(this, "5", Toast.LENGTH_SHORT).show();
        break;
    }
}
}; 
```

声音管理器类；

```
public class SoundManager {
//....
//....
//....

    public SoundManager(Context appContext)
    {
      sndPool = new SoundPool(16, AudioManager.STREAM_MUSIC, 0);
      pContext = appContext;
    }

    // Load up a sound and return the id
    public int load(int sound_id)
    {
        return sndPool.load(pContext, sound_id, 1);
    }

    // Play a sound
    public int play(int sound_id)
    {
         return sndPool.play(sound_id, leftVolume, rightVolume, 1, 0,rate);     

    }

    public void stop(int sound_id) {
           sndPool.stop(sound_id);           
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:31:40.253

我不能理解你在说什么，但只是看看你的代码，你错误地使用了 stop 函数。

该`stop`函数应该接收***流 id***，而不是***声音 id***。

*   流 id 是从`play`函数返回的值，用于标识播放曲目的特定实例。

*   声音 id 是从`load`函数返回的值，用于标识加载的资源。

# git - 如何使用分叉的 Bitbucket 存储库获取和合并工作？

> ID：12663421
> 
> 赞同：0
> 
> 时间：2012-09-30T17:34:30.850
> 
> 标签：git, bitbucket

我不知道我说的是否正确，但这里是。

我的团队正在使用 bitbucket 进行工作。我已经制作了我的团队分叉的主仓库，现在其中一个队友刚刚推送了一些工作（提出了拉取请求），我将它合并到主仓库中，现在我需要从分叉中获取更改，我该怎么做它？

我尝试添加主仓库和远程添加，但它似乎没有工作。我在工作中使用 svn/git，我没有遇到任何问题，但是 bitbucket 让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:47:44.167

不完全了解您拥有或缺少什么，但这是我的建议：

在本地从 bitbucket 克隆 repo

```
git clone [bitbucket address] 
```

然后，每当有变化并且你想拉

```
git pull [bb address] 
```

如果您已经有一个克隆但没有添加远程 bitbucket 存储库，请执行以下操作

```
git remote add bb [bitbucket address] 
```

然后你可以再次拉

```
git pull bb 
```

其中 bb 是远程别名。

如果您已经拥有了所有想要提取的内容（合并，这是您可能遇到的另一个问题）

```
git pull bb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:04:26.777

我也使用 bitbucket，以下为我推送更改的作品

```
git add <file/folder>
git commit -m "Checkin in code"
git push -u origin master 
```

# octave - 从八度音阶矩阵的第二行访问？

> ID：12663422
> 
> 赞同：9
> 
> 时间：2012-09-30T17:34:47.693
> 
> 标签：octave

我是八度和学习它的新手。

假设我有一个矩阵 X =
1 2
3 4
5 6

我想从第二行访问这个矩阵，省略第一行。
它的语法是什么！？

我可以通过 X(1,:) = [] 删除该行，这将改变原始矩阵，
如何从八度的第二行访问？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-30T18:09:15.347

使用冒号语法。要将第 2 行返回到最终用途：

```
X(2:end, :) 
```

有关更多索引选项，请参阅[GNU Octave 文档](http://www.gnu.org/software/octave/doc/interpreter/Index-Expressions.html#Index-Expressions)。

# iphone - udivmodsi4 是什么错误？

> ID：12663424
> 
> 赞同：1
> 
> 时间：2012-09-30T17:35:24.663
> 
> 标签：iphone, ios, xcode

我在为 iOS 编译时突然遇到了这个错误

```
Undefined symbols for architecture armv7:
  "___udivmodsi4" 
```

这是什么错误，我该如何摆脱它？我在 Xcode 4.4 上。

# javascript - 使用 javascript/jquery 在鼠标悬停时隐藏链接中的标题属性

> ID：12663433
> 
> 赞同：0
> 
> 时间：2012-09-30T17:36:04.610
> 
> 标签：javascript, jquery

我在所有链接中都使用了 title 属性，但我不想在鼠标悬停时可见，但在屏幕阅读器的代码中仍然可见。

```
var links = document.getElementsByTagName('a');

for (var i = 0; i < links.length; i++) {
    if (links[i].className == 'suppress') {
    links[i]._title = links[i].title;
    links[i].onmouseover = function() { 
    this.title = '';
}

links[i].onmouseout = function() { 
    this.title = this._title;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:40:57.437

使用 jQuery，您可以在悬停时隐藏`title`属性，并在鼠标移出时替换它：

```
$(function(){

    $('a').hover(function(e){

        $(this).attr('data-title', $(this).attr('title'));
        $(this).removeAttr('title');

    },
    function(e){

        $(this).attr('title', $(this).attr('data-title'));

    });​

}); 
```

就像在[这个小提琴](http://jsfiddle.net/2nHxV/)中一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T17:40:23.580

由于您使用的是 jQuery，因此您可以通过简单的方式进行操作：

```
$(document).ready(function(){
    $("a").removeAttr("title");
}); 
```

或者，将其设置为空值：

```
$(document).ready(function(){
    $("a").attr("title", "");
}); 
```

如果这会改变屏幕阅读器的阅读方式，那么，您可以将鼠标悬停在目标位置。

```
$(document).ready(function(){
    $("a").hover(function(){
        $(this).attr("rel", $(this).attr("title"));
        $(this).removeAttr("title");
    }, function(){
        $(this).attr("title", $(this).attr("rel"));
        $(this).removeAttr("rel");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T16:37:31.867

我试图在 CSS 中创建一个气泡工具提示，但浏览器工具提示总是会出现并把事情搞砸。所以，和你一样，我需要禁用默认工具提示。

我使用了一些 JQuery 来删除“标题”标签，但仅在鼠标悬停时。鼠标一出，“标题”标签就会恢复。

以下是包含一些“标题”内容的 DIV：

```
<div class="tooltip-class" title="This is some information for our tooltip.">
  This is a test
</div> 
```

现在您可以运行以下 JQuery 以在鼠标悬停时隐藏 Title 标签：

```
$(document).ready(function(){
  $(".tooltip-class").hover(function(){
    $(this).attr("tooltip-data", $(this).attr("title"));
    $(this).removeAttr("title");
  }, function(){
    $(this).attr("title", $(this).attr("tooltip-data"));
    $(this).removeAttr("tooltip-data");
  });
}); 
```

以下是完整示例的链接：

[http://jsfiddle.net/eliasb/emG6E/54/](http://jsfiddle.net/eliasb/emG6E/54/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-04T06:22:29.557

$(".element").hover(函数(){

```
 // Get the current title
    var title = $(this).attr("title");

    // Store it in a temporary attribute
    $(this).attr("tmp_title", title);

    // Set the title to nothing so we don't see the tooltips
    $(this).attr("title","");

}); 
```

$(".element").click(function(){// 当我们离开元素时触发

```
 // Retrieve the title from the temporary attribute
    var title = $(this).attr("tmp_title");

    // Return the title to what it was
    $(this).attr("title", title);

}); 
```

# java - 如何删除那些标点符号？

> ID：12663438
> 
> 赞同：2
> 
> 时间：2012-09-30T17:36:48.393
> 
> 标签：java, string, replaceall

```
 public class test {
    public static void main(String[] args) {
        String a = "so many, punctuations , haha!";
        a.replaceAll("[\\p{Punct}]+", "");
        System.out.print(a);
    }
} 
```

我尝试了这种方法，但是a中的标点符号仍然存在，我不明白为什么。

replaceAll() 函数不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:39:33.153

`a.replaceAll()`创建一个全新的字符串，您会立即忽略它。

您可能希望将此新字符串分配给`a`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T17:39:44.630

你需要这样做：

```
a = a.replaceAll("[\\p{Punct}]+", ""); 
```

# java - 使用 Heroku eclipse 插件时，源文件夹不是 Java 项目

> ID：12663440
> 
> 赞同：0
> 
> 时间：2012-09-30T17:37:13.680
> 
> 标签：java, eclipse, heroku, playframework-2.0

我已经建立了一个新项目并将其与 Heroku 连接起来：

![在此处输入图像描述](../Images/d1e00146a89eb306601e68b9e081d6e3.png)

我可以进行更改并将它们上传到我在 Heroku 的测功机，但是当尝试在 eclipse 中添加新类时，我得到 **Source 文件夹不是 Java 项目 **。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T18:17:40.950

好的，找到它，需要通过添加来告诉 eclipse 这是一个 java 项目：

```
<natures>
    <nature>
         <name></name>
     </nature>
     <nature>org.eclipse.jdt.core.javanature</nature>
 </natures> 
```

这样 .project 文件看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>morning-garden-3028</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
    </buildSpec>
    <natures>
    <nature>
      <name></name>
    </nature>
    <nature>org.eclipse.jdt.core.javanature</nature>
  </natures>
</projectDescription> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:00:55.233

转到`Project->Properties->Java Build Path->Source->Add Folder`，并添加您的源文件夹

# android - 使用动态生成的editText添加删除选项

> ID：12663443
> 
> 赞同：-1
> 
> 时间：2012-09-30T17:37:33.097
> 
> 标签：android, android-layout

我是android的新手，我在单击添加新按钮时使用以下代码动态创建了editText。是否可以在editText附近添加一个删除按钮，以便每次单击删除时都会删除相应的editText？

```
btnAddNew.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            LinearLayout rAlign = (LinearLayout)findViewById(R.id.lId);
            EditText newPass = new EditText(getApplicationContext());
            allEds.add(newPass);
            newPass.setHint("Name of Label");
            newPass.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            newPass.setWidth(318);
            newPass.setTextColor(Color.parseColor("#333333"));
            newPass.setId(textb);

            rAlign.addView(newPass);
            MY_BUTTON ++;               
            addSpinner();               
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:03:13.623

是的，在 EditText 的同时创建删除按钮，并`removeView()`像方法一样使用`addView()`方法，可能是这样的：

```
btnAddNew.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        ...
        rAlign.addView(newPass);
        MY_BUTTON ++;               
        addSpinner();

        Button btnRemoveOld = new Button(this);
        btnRemoveOld.setId(32); // arbitrary number
        btnRemoveOld.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                LinearLayout rAlign = (LinearLayout)findViewById(R.id.lId);
                rAlign.removeView(findViewById(textb));
            }
        });     

        // You will need to set parameters to define how the button looks
        //   and where it is in relation to the EditText here
        rAlign.addView(btnRemoveOld);
    }
}); 
```

# actionscript-3 - 如果当前帧低于某个帧，你将如何编写一个将 currentFrame 提前 1 的 For 循环

> ID：12663444
> 
> 赞同：1
> 
> 时间：2012-09-30T17:37:34.860
> 
> 标签：actionscript-3, for-loop

我只需要正确的语法......我不断收到错误。

当前代码如下所示：

```
for (var i = movieClip.currentFrame; i<15; i++){

   movieClip.currentFrame+1

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:30:07.323

What are you trying to achieve? If you want to play from a specified frame to another frame, this is not the way to go. That said, I don't undstand the current answers that are given. `MovieClip.currentFrame` is a **read-only** property. So none of the answers would actually work, none tested their code. I downvoted the answers for that. This is why you get errors too.

```
myMc.currentFrame = 5; 
// gives an error, since this property is read-only, you cannot set it. 
```

To jump to a certain frame, use `gotoAndStop()` or `gotoAndPlay()`, with the framenumber or framelabel as the parameter.

If you want to play a clip called `myMc` from the current frame to (lets say) frame *15*, try this

```
myMc.addEventListener(Event.ENTER_FRAME, onEnterFrame);

function onEnterFrame(event:Event):void
{
 if (myMc.currentFrame < 15)
 {
   myMc.gotoAndStop(myMc.currentFrame + 1);
 }
} 
```

As you can see we've created an enterframe listener. If you dont understand what it does; this makes the `onEnterFrame` function (defined below) execute every frame. Its needed because every frame it have to decide where to go, its not possible with a loop. It should be altered over time. This example works, but only if when you should play forward, or to be more specific; when `currentFrame` is under `15`. If your at fram 20, your stuck. Lets fix that by make it play backwards too, if needed.

```
myMc.addEventListener(Event.ENTER_FRAME, onEnterFrame);

function onEnterFrame(event:Event):void
{
 if (myMc.currentFrame < 15)
 {
   myMc.gotoAndStop(myMc.currentFrame + 1);
 }
 else if (myMc.currentFrame > 15)
 {
   myMc.gotoAndStop(myMc.currentFrame - 1);
 }
} 
```

ok, now it should also play backwards. Now, it would be betterr to stop checking when we've arrived at the target frame. Therefor we should remove the eventlistener.

```
myMc.addEventListener(Event.ENTER_FRAME, onEnterFrame);

function onEnterFrame(event:Event):void
{
 if (myMc.currentFrame < 15)
 {
   myMc.gotoAndStop(myMc.currentFrame + 1);
 }
 else if (myMc.currentFrame > 15)
 {
   myMc.gotoAndStop(myMc.currentFrame - 1);
 }
 if (myMc.currentFrame == 15)
 {
   myMc.removeEventListener(Event.ENTER_FRAME, onEnterFrame);
 }
} 
```

Now this should be the answer of your question. However it would be nice to make a function where you can give a target movieclip and endFrame.

```
function playClipTo(clip:MovieClip, targetFrame:int):void
{
  clip.targetFrame = targetFrame;
  // since MovieClip is dynamic, you can add non-excisting properties. 
  // If your using classes, you would extend MovieClip and create a public variable for this. But for now its fine.
  clip.addEventListener(Event.ENTER_FRAME, onClipEnterFrame);
}

function onClipEnterFrame(event:Event):void
{
 var clip:MovieClip = MovieClip(event.target); // this referres to any clip with a listener
 if (clip.targetFrame)
 {
  if (clip.currentFrame < clip.targetFrame)
  {
   clip.gotoAndStop(clip.currentFrame + 1);
  }
  else if (clip.currentFrame > clip.targetFrame)
  {
   clip.gotoAndStop(clip.currentFrame - 1);
  }
  if (clip.currentFrame == clip.targetFrame)
  {
   clip.removeEventListener(Event.ENTER_FRAME, onClipEnterFrame);
   delete clip.targetFrame;
  }
 }
 else
 {
   clip.removeEventListener(Event.ENTER_FRAME, onClipEnterFrame);
 }
} 
```

With this function you could do this

```
playClipTo(myMc, 15); // ha, familiar example!
playClipTo(myMc2, 5); // another clip, play to frame 5 
```

I hope this helps. By the way, if you need to jump from framelabel to framelabel, or need more control on speed, easing, delays, you could take a look at a tween engine, like [TweenLite](http://www.greensock.com/tweenlite/), this has very advanced but easy to understand way of animating with code. Its very common in the flash world, plus it saves development time for relative simple tasks like this.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T17:41:45.407

在循环里面放

```
if (movieClip.currentFrame < theNumberToIncreaseTo) {
     movieClip.currentFrame = movieClip.currentFrame + 1;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-30T17:40:53.927

也许

```
movieClip.currentFrame = movieClip.currentFrame + 1 
```

代替

```
movieClip.currentFrame+1 
```

# c++ - 在 C++ 中实现类头之外的运算符重载

> ID：12663451
> 
> 赞同：0
> 
> 时间：2012-09-30T17:38:25.593
> 
> 标签：c++, class, overloading, operator-keyword

我有一个 GolfCourse 类头文件 gcourse.hh，我想为 >>operator 实现运算符重载。如何在文件 gcourse.cc 的标头之外执行此操作？也就是说，我需要哪些“单词”指向类本身，“GolfCourse::”对于函数来说还不够……？

```
gcourse.hh:
class GolfCourse {

public:
---
friend std::istream& operator>> (std::istream& in, GolfCourse& course);

gcourse.cc:
---implement operator>> here --- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:40:18.717

`GolfCourse::`不正确，因为`operator >>`不是 的成员`GolfCourse`。这是一个免费的功能。你只需要写：

```
std::istream& operator>> (std::istream& in, GolfCourse& course)
{
   //...
   return in;
} 
```

`friend`仅当您`private`计划`protected`从`GolfCourse`. 当然，您可以在类定义中提供实现：

```
class GolfCourse {
public:
    friend std::istream& operator>> (std::istream& in, GolfCourse& course)
    {
       //...
       return in;
    }
}; 
```

# c# - 在 C# 中用 yin 方法计算基频

> ID：12663466
> 
> 赞同：0
> 
> 时间：2012-09-30T17:40:39.243
> 
> 标签：c#, signal-processing, frequency, voice

我需要用 C# 中的 yin 算法计算基频。

我有一个数组（data[44100]），其中包含 1 秒长的 250Hz 正弦波的幅度。这是我的代码：

```
int t = 0;                    //starting point of the window
int w = data.Length / 25;     //the end of the window so the size of the window is 40msec
int rmax = 0;                 //the maximum of the correlation function
int period = 0;               //the period of the sinus

for (int tau = 0; tau < w; tau++)
{ 
    int r = 0;
    for (int j = t + 1; j < (t + w); j++)
    {
       r = r + (data[j] * data[j + tau]);
    }     
    if (r > rmax)
    {
       rmax = r;
       period = tau;
    }
}

float time = (float)period/44100;
float freq = 1.0f / time;
System.Console.WriteLine(freq); 
```

我应该得到 250 的频率，但出了点问题。数组中的值很好，我在 excel 中检查了它，期间应该是这样。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:26:57.807

您在自相关函数中包含零滞后，并且信号与零滞后完全相关。在达到一个周期的滞后之前，您也会停止 (tau < w)，此时正弦波将出现下一个自相关峰值。

尝试从预期周期的一半延迟开始，然后逐步增加到预期周期的 1.5 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:59:42.643

您的代码和您的评论不匹配。

1 秒/25 将是 0.04 秒而不是 0.4 秒。

# actionscript-3 - 无法在 Flash 中发送自定义事件

> ID：12663470
> 
> 赞同：0
> 
> 时间：2012-09-30T17:41:03.300
> 
> 标签：actionscript-3, flash, haxe

我创建了一个自定义事件：

```
class SomeEvent extends Event {
    public static var SOMETHING_CHANGED = "somethingChanged";

    public var propery1: String;
    public var property2: String;

    override public function clone():Event {
        var evt: GraphicsEvent = new SomeEvent(type, bubbles, cancelable);
        evt.propery1 = propery1;
        evt.propery2 = propery2;
        return evt;
    }
} 
```

之后，我将监听器添加到扩展 Sprite 的类中

```
class SomeClass extends Sprite {
    public function SomeClass() {
        this.addEventListener(SomeEvent.SOMETHING_CHANGED, somethingChangedHandler);
    }
    ....
    public somethingChangedHandler(e: SomeEvent) {
        trace("Got event!!");
    }
} 
```

最后我发送了一个事件

```
var e = new SomeEvent(SomeEvent.SOMETHING_CHANGED);
e.propery1 = "AAA";
e.propery1 = "BBB";
dispatchEvent(e); 
```

在这之后我没有任何痕迹，因此事件不是 cauhgt。问题来了：做错了什么？

先感谢您！

**UPD：**请注意，我正在从不同于`SomeClass`该类扩展的类发送事件`EventDispatcher`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:54:50.577

你是从名为 SomeClass 的类中调度的吗？

```
var e = new SomeEvent(SomeEvent.SOMETHING_CHANGED);
e.propery1 = "AAA";
e.propery1 = "BBB";
dispatchEvent(e); 
```

必须在内部`SomeClass`才能触发事件处理程序。`SomeClass`或者您需要使用as in的实例来调度它。

```
var e = new SomeEvent(SomeEvent.SOMETHING_CHANGED);
e.propery1 = "AAA";
e.propery1 = "BBB";
someClassInstance.dispatchEvent(e); 
```

# javascript - 此脚本标签在 Firefox 中运行良好，但在 chrome 中运行良好（因为出现了一些安全问题）

> ID：12663473
> 
> 赞同：0
> 
> 时间：2012-09-30T17:41:16.967
> 
> 标签：javascript, internet-explorer, google-chrome, proxy, cross-domain

我`<script type="text/javascript" src="http://hostname.com/rootname/dynamicScript?basedOnTheParameter=true"></script>`在页面中有一个脚本标签。

它在 Firefox 中运行良好，但 chrome 说

[已阻止] 位于的页面`https://hostname.com/index.jsp`运行了来自 的不安全内容`http://hostname.com/rootname/dynamicScript?basedOnTheParameter=true`。

在 IE 中，一条安全消息带有两个 2 按钮`yes`或`no`，如果我选择是，则脚本不可访问，但脚本在万一`no`按钮中有效。

有人可以解释为什么会发生这种情况以及解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:44:27.743

如果您的页面使用 HTTPS，则不应加载任何 HTTP URL，因为攻击者将能够修改它们并绕过您的安全性。

根据浏览器和安全设置，如果您尝试，用户将收到不同类型的错误或警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:44:17.620

您在安全站点上引用非安全信息（如果您从 HTTPS 站点引用 HTTP 站点上的图像、脚本、样式等，就会发生这种情况）。你能把文件放在你的 HTTPS 网站上吗？

IE 警告用户让他们知道并非所有信息都是安全的。例如，如果有人正在运行数据包嗅探器，来自 HTTPS 的所有内容都将被加密，但来自您的 HTTP 站点的脚本不会被加密。所以警告让用户知道他们不应该有一种错误的安全感，因为他们的地址栏中有一个 HTTPS url。不过，Chrome 似乎完全阻止了它。

# ios6 - 检测或响应引导访问？

> ID：12663481
> 
> 赞同：18
> 
> 时间：2012-09-30T17:42:37.727
> 
> 标签：ios6, guided-access

在我们正在创建的应用程序中，我们需要添加一些额外的屏幕来配置应用程序。

如果我们可以在应用程序的打开屏幕上添加额外的按钮，那就太好了，只有在 iPad 没有引导访问时才可见。

是否可以检测到设备当前正在使用引导访问运行，并对其启用或禁用做出反应？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-26T23:46:14.773

你想要这样的东西：

```
NSLog(@"Accessabilitiy enabled: %@", UIAccessibilityIsGuidedAccessEnabled() ? @"YES" : @"NO");

if (!UIAccessibilityIsGuidedAccessEnabled()) {
   // show something since I'm not in guided access
} 
```

如果你想知道它什么时候改变...

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(guidedAccessChanged) name:UIAccessibilityGuidedAccessStatusDidChangeNotification object:nil]; 
```

然后根据第一次测试检查它是打开还是关闭。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-08T21:31:16.343

[2013 年 WWDC 的深度引导访问](https://developer.apple.com/videos/play/wwdc2013/202/)（开始于 39:26）

* * *

[检查是否启用了引导访问](https://developer.apple.com/reference/uikit/1615173-uiaccessibilityisguidedaccessena)（iOS 6+）：

```
UIAccessibilityIsGuidedAccessEnabled() 
```

* * *

[响应引导访问状态更改](https://developer.apple.com/reference/uikit/uiaccessibilityguidedaccessstatusdidchangenotification?language=objc)（iOS 6+）：

```
UIAccessibilityGuidedAccessStatusDidChangeNotification 
```

* * *

[在引导访问模式](https://developer.apple.com/reference/uikit/uiguidedaccessrestrictiondelegate)（iOS 7+）下添加自定义限制：

```
UIGuidedAccessRestrictionDelegate 
```

* * *

[获取指定限制的限制状态](https://developer.apple.com/reference/uikit/1621153-uiguidedaccessrestrictionstatefo)（iOS 7+）：

迅速：

```
func UIGuidedAccessRestrictionStateForIdentifier(_ restrictionIdentifier: String) -> UIGuidedAccessRestrictionState 
```

对象-C

```
UIGuidedAccessRestrictionState UIGuidedAccessRestrictionStateForIdentifier(NSString *restrictionIdentifier); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-27T12:55:00.803

斯威夫特 4.2：

```
if !UIAccessibility.isGuidedAccessEnabled {
  // show something since I'm not in guided access
} 
```

# mysql - PLSQL Procudure (Oracle) 比较 where 子句中的变量

> ID：12663484
> 
> 赞同：7
> 
> 时间：2012-09-30T17:43:01.053
> 
> 标签：mysql, sql, database, oracle, sqlplus

这真让我抓狂。我想对列和变量进行简单的比较，但它不起作用。以下行总是计算所有元组，而我只需要那些受 where 子句限制的元组。

```
 SELECT count(*) INTO cnt from class where class.fid = fid; 
```

它看起来很简单，但我已经为此工作了几个小时。完整的 sql 过程是

令人困惑的是，如果我用一些硬编码的 ID（如 105）替换 fid，它会给出正确的答案），但是当我使用 fid 时，它就不再起作用并返回所有类的计数。出于某种原因，总是 class.fid = fid。当我使用 >、< 或 <> 时，返回 0 个计数！

```
create or replace PROCEDURE pro_report2
AS
CURSOR c_dept IS select deptid, dname from department;
TYPE cur_typ IS REF CURSOR;
c1 cur_typ;
query_str1 VARCHAR2(200);
fid faculty.fid%type := 102;
fname faculty.fname%type;
cnt NUMBER;

BEGIN
    FOR dept_row in c_dept LOOP
        DBMS_OUTPUT.PUT_LINE('Dept.Name: ' || dept_row.dname);
        DBMS_OUTPUT.PUT_LINE('Faculty Name' || chr(9)|| chr(9) || '0 Class' || chr(9) || chr(9) || '1 Class' || chr(9) || chr(9) || '2 Classes' || chr(9) || '>2 Classes');
        DBMS_OUTPUT.PUT_LINE('-------------------------------------------------------------------------------');
        --find all faculty in this department
        query_str1 := 'select fid, fname from faculty where faculty.deptid = ' || to_char(dept_row.deptid);
        open c1 for query_str1;
        LOOP
            FETCH c1 into fid, fname;
            exit when c1%notfound;
            DBMS_OUTPUT.PUT_LINE(fname);
            SELECT count(*) INTO cnt from class where class.fid = fid;
            DBMS_OUTPUT.PUT_LINE(to_char(cnt) || '    ' || to_char(fid));
        END LOOP;
        -- Spaces between departments
        DBMS_OUTPUT.PUT_LINE(chr(10));
        DBMS_OUTPUT.PUT_LINE(chr(10));
    END LOOP;
END; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T18:12:26.980

我相信您需要重命名或为本地变量添加前缀`fid`，因为不幸的是它与您正在查询的表中的列名匹配。SQL 引擎只是`fid = fid`对每一行进行比较，这将始终是正确的（空值除外，但这是另一回事）。另外，当变量名称与列相同时，更难阅读代码。

在 PL/SQL 中，往往有一个约定，用 a `l_`(for local) 作为局部变量的前缀，所以很清楚目的是什么。但是，除列名之外的任何名称都可以。尝试：

```
l_fid faculty.fid%type := 102; 
```

进而...

```
SELECT count(*) INTO cnt from class where class.fid = l_fid; 
```

（加上其他适当的替代品。）

# json - 如何有效地存储 JSON？

> ID：12663487
> 
> 赞同：2
> 
> 时间：2012-09-30T17:43:09.910
> 
> 标签：json, database, configuration

我正在开发一个需要将其配置存储在 JSON 数据库中的项目。

问题是如何有效地存储该数据库，我的意思是：

*   不要为每次修改重写文件中的整个 JSON 树
*   同时管理多个读/写访问
*   所有这些都没有使用项目的外部服务器（它本身就是一个服务器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:45:59.460

看看 MongoDB，它使用 Bson（二进制 json）来存储数据。[http://www.mongodb.org/display/DOCS/BSON](http://www.mongodb.org/display/DOCS/BSON)

[http://www.mongodb.org/display/DOCS/Inserting](http://www.mongodb.org/display/DOCS/Inserting)

2021年编辑：

**今天我最好推荐使用 postgresql 来存储 json**： [https://info.crunchydata.com/blog/using-postgresql-for-json-storage](https://info.crunchydata.com/blog/using-postgresql-for-json-storage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:00:04.887

我有一个适合我需要的想法：

*   对于内存配置，我使用 JSON 树（使用[jansson](http://www.digip.org/jansson/)库）
*   当我需要保存配置时，我检索 JSON 树中每个元素的 XPath，将其用作键并将键/值对存储在 BerkeleyDB 数据库中

例如 ：

```
{'test': {
  'option': true,
  'options': [ 1, 2 ]
}} 
```

将给出以下键/值对：

```
 Key        | Value
-----------------+-----------
/test/option     | true
/test/options[1] | 1
/test/options[2] | 2 
```

# node.js - Node.js 未链接错误

> ID：12663488
> 
> 赞同：65
> 
> 时间：2012-09-30T17:43:38.037
> 
> 标签：node.js, homebrew

我从字面上搜索了网络上的所有内容。但我找不到错误的解决方案`node-0.8.8 already installed, it's just not linked`。它与路径文件问题有关吗？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2016-05-19T18:21:05.643

按此特定顺序执行此命令列表：

```
sudo brew uninstall node
brew update
brew upgrade
brew cleanup
brew install node
sudo chown -R $(whoami) $(brew --prefix)
brew link --overwrite node
brew postinstall node 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-07-03T13:57:21.557

运行`brew upgrade`将节点更新到最新版本后，运行`brew doctor`以查看存在哪些潜在问题。它可能会告诉您节点未链接，在这种情况下，运行`brew link node`将链接它。（您可能需要先运行`brew unlink node`）

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-04-26T05:51:14.313

我今天遇到了同样的错误，它告诉我 Node 没有正确链接，并且还有意外的头文件。

当我尝试重新安装节点时，它告诉我它已经安装，只是没有链接。

```
Warning: /usr/local/include isn't writable

/usr/local/bin/node already exists. Remove it 
```

## 解决方案

为了解决这个问题，我通过以下方式获得了它的所有权：

```
sudo chown -R `whoami` /usr/local/ 
```

然后我使用以下命令强制链接所有文件：

```
brew link --overwrite node 
```

之后，我执行了安装后例程：

```
brew postinstall node 
```

然后我检查了节点是否正确安装：

```
node -v 
```

我收到了输出`v5.1.0`，它是固定的:)。希望这可以帮助。

这可能不是完美的解决方案，因为我在 10 分钟前才开始涉足 node 和 homebrew，但它为我完成了工作。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-02T03:50:55.223

您的旧版本的 Node 0.5 可能没有安装 Homebrew（或者 Homebrew 的脚本在 0.5 beta 版本和 0.8 稳定版本之间的巨大差距中发生了变化（介于两者之间的 0.6 和 0.7 版本）。

Homebrew 和官方的 Node 安装程序都尝试安装到，`/usr/local/bin`所以我建议先删除`/usr/local/bin/node`, `/usr/local/bin/npm`，`/usr/local/lib/node`然后再试一次。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-03-04T02:54:10.403

hardcorepunk 的回答奏效了。但是，我们不能再`/usr/local`在 High Sierra 中大喊大叫了。因此，按以下顺序执行命令：

```
sudo brew uninstall node
brew update
brew upgrade
brew cleanup
brew install node
sudo chown -R $(whoami) $(brew --prefix)/*
brew link --overwrite node
brew postinstall node 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-24T08:17:21.693

要链接节点，请运行以下命令：

```
brew link homebrew/versions/node<version no> 
```

并检查它是否正确安装，运行：

```
node -v 
```

如果节点正确链接，它将不会出现任何错误，并且会打印节点版本。你可以从[这里](http://jee-appy.blogspot.com/2016/01/warning-node-already-installed-its-just.html)阅读关于它的很好的解释。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-21T07:43:03.260

对于 line 做了这项工作：

```
brew link --overwrite node 
```

它强制链接并覆盖所有冲突的文件：

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-09-26T05:50:41.267

您可以更改文件的权限`"/usr/local/bin/node"`，例如`"chmod +w /usr/local/bin/node"`，使其可写。

# jquery - 重置切换或单击另一个元素重置切换？

> ID：12663490
> 
> 赞同：1
> 
> 时间：2012-09-30T17:44:09.943
> 
> 标签：jquery, click, toggle, reset

我正在尝试设置单击以显示具有两个单独菜单的菜单。

一个菜单男人应该点击，另一个，女人。

如果单击一个，另一个应该消失（如果它是可见的），如果您单击菜单，那么它也应该消失。或者，如果您再次点击顶级菜单链接，它也应该隐藏子菜单。

我让它听起来比现在更复杂，但这是我迄今为止得到的代码：

[http://jsfiddle.net/GLZK5/7/](http://jsfiddle.net/GLZK5/7/)

请注意，如果您单击“men”，则会显示子菜单。单击女性也会显示子菜单并隐藏“男性”子菜单，但如果您返回“男性”，它只会隐藏“女性”而不显示“男性”...

我很困惑..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:49:47.153

### 脚步

1.  加载页面时，隐藏所有菜单。
2.  现在对于处理程序，当您单击它时，您有两种情况。
    1.  查看子菜单是否可见，如果可见，隐藏子菜单。
    2.  如果子菜单不可见，则隐藏所有内容并仅显示子菜单

### 使用此代码：

```
$(document).ready(function() {
    $(".gen-sel > li > ul").hide();
    $(".gen-sel > li > a").click(function(){
        if ($(this).next().is(":visible"))
            $(this).next().hide();
        else
        {
            $(".gen-sel > li > ul").hide();
            $(this).next().show();
        }
    });
});​ 
```

### 演示：http: [//jsfiddle.net/GLZK5/10/](http://jsfiddle.net/GLZK5/10/)

# java - Spring中的ref与依赖属性

> ID：12663491
> 
> 赞同：19
> 
> 时间：2012-09-30T17:44:13.497
> 
> 标签：java, spring

我对 Spring 中的 ref 和 depends-on 属性感到困惑。我阅读了 spring 文档但我仍然感到困惑。我想知道两者之间的确切区别以及在哪种情况下应该使用哪一个。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-27T13:52:50.673

来自官方文档：[http ://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/context/annotation/DependsOn.html](http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/context/annotation/DependsOn.html)

> 当前 bean 所依赖的 bean。任何指定的 bean 都保证由容器在此 bean 之前创建。在 bean 不通过属性或构造函数参数显式依赖另一个 bean 而是依赖于另一个 bean 初始化的副作用的情况下很少使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-10T16:14:33.560

也许需要依赖的情况的示例会有所帮助。我使用 Spring 来加载和连接我的 bean。这是一个示例 bean 定义：

```
<bean id="myBean" class="my.package.Class">
    <property name="destination" value="bean:otherBeanId?method=doSomething"/>
</bean>

<bean id="otherBeanId" class="my.package.OtherClass"/> 
```

请注意，属性值是一个字符串，它引用*otherBeanId*。由于解析此变量的方式，Spring 不会了解依赖关系，因此它可能会破坏*otherBeanId*然后*myBean*。这可能会使*myBean 暂时*处于损坏状态。

我可以使用取决于来解决此问题，如下所示：

```
<bean id="myBean" class="my.package.Class" depends-on="otherBeanId">
    <property name="destination" value="bean:otherBeanId?method=doSomething"/>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-15T08:19:04.867

可能存在一个 bean 可能是另一个 bean 的属性的情况，即；属性 bean 作为属性直接参与到 bean 定义中，在这种情况下，我们使用`ref`属性来引用 bean。

可能存在这样一种情况，即在一个 bean 实例中需要成功创建另一个 bean，而另一个 bean 不是定义下的 bean 的属性，在这种情况下我们使用`depends-on`属性。

# xml - Spring 的请求和响应 XML

> ID：12663492
> 
> 赞同：0
> 
> 时间：2012-09-30T17:44:14.330
> 
> 标签：xml, web-services, spring, request, response

我们正在开发 Spring Webservices 来为 iPad 应用程序提供服务。两个团队之间讨论了如何定义请求/响应 XML。从架构上讲，我们的服务将在到达端点之前使用 JAXB 将请求 XML 转换为 Java Bean。

我们建议每个服务都需要一个单独的请求/响应 XML，如下所示 1\. 对于 InsertService，XML 将是.. 2\. 对于 DeleteRequest，XML 将是.. 等等，

但是另一个团队提出了以下方式，对于所有请求/响应只有一个根节点，如下所示..插入/删除..

请建议什么是正确的方法，如果是我们如何说服他们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:52:50.430

我相信您应该讨论输入请求和响应的架构 (XSD)，而不是讨论 XML。

架构完成后，您可以从架构本身（使用 xjc 或 maven-jaxb-plugin）生成 JAXB 对象，然后在 Web 服务上工作。

# c - C 预处理器 Mac OS

> ID：12663497
> 
> 赞同：1
> 
> 时间：2012-09-30T17:44:51.990
> 
> 标签：c, c-preprocessor

我应该使用`__APPLE__ & __MACH__`还是`__APPLE__`用于我的预处理器？

我在`__APPLE__`这里找到了：[如何在 C 预处理器中可靠地检测 Mac OS X、iOS、Linux、Windows？](https://stackoverflow.com/questions/5919996/how-to-detect-reliably-mac-os-x-ios-linux-windows-in-c-preprocessor)

在这里[http://sourceforge.net/apps/mediawiki/predef/index.php?title=Operating_Systems#MacOS](http://sourceforge.net/apps/mediawiki/predef/index.php?title=Operating_Systems#MacOS)关于`__APPLE__&__MACH__`

我不确定我应该使用什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:54:49.147

我认为 sourceforge 文档意味着您可以使用`__APPLE__`或`__MACH__`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:04:21.733

定义了两个宏（在 Mac OS X 或 iOS 上）：

```
cc -E -dM - < /dev/null | egrep "APPLE|MACH"
#define __APPLE__ 1
#define __MACH__ 1 
```

[对我来说，正如http://sourceforge.net/apps/mediawiki/predef/index.php?title=Operating_Systems#MacOS](http://sourceforge.net/apps/mediawiki/predef/index.php?title=Operating_Systems#MacOS)`if defined(__MACH__) && defined(__APPLE__)`所指出的那样坚持下去很好

# vba - 带有文本框的 VBA 用户窗体 - 格式化文本

> ID：12663498
> 
> 赞同：1
> 
> 时间：2012-09-30T17:44:54.123
> 
> 标签：vba, ms-word, textbox, userform, bookmarks

所以我对VBA很陌生。我创建了一个非常简单的模板，当打开它时，它会给我一个要填写的表格，它将通过命令按钮将文本插入到文档中。

我正在尝试更进一步，但不确定如何将代码组合在一起。要插入文本，我正在使用书签功能。在我的表单上，我有 4 个文本框作为选项。如果所有 4 都填写，则文本如下所示：

选项 1 选项 2 选项 3 选项 4

我需要它看起来像：

选项 1、选项 2、选项 3 和选项 4

不仅如此，我还希望根据填充的文本框数量添加“和”。例如，如果我只填充了前两个，我需要它看起来像：

选项 1 和选项 2

那有意义吗？以下是它目前的结构。我将不胜感激任何前进的指示。

```
Private Sub cmdSubmit_Click()
    Application.ScreenUpdating = False
    With ActiveDocument
        .Bookmarks("Program1").Range.Text = TextBox1.Value
        .Bookmarks("Program2").Range.Text = TextBox2.Value
        .Bookmarks("Program3").Range.Text = TextBox3.Value
        .Bookmarks("program4").Range.Text = TextBox4.Value
        End With
    Application.ScreenUpdating = True
    Unload Me
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:29:38.360

如果这些书签是连续的，则不需要四个书签。添加以下模块级变量：

```
Private s As String, hasAnd As Boolean 
```

创建一个`Sub`将文本框的文本添加到私有变量的前面，插入逗号或`and`视情况而定：

```
Private Sub AppendText(txt As TextBox)
If Len(txt.Text) = 0 Then Exit Sub

If Len(s) = 0 Then
    s = txt.Text
ElseIf Not hasAnd Then
    hasAnd = True
    s = txt.Text & " and " & s
Else
    s = txt.Text & ", " & s
End If
End Sub 
```

**以相反的顺序**调用每个文本框的子过程：

```
AppendText TextBox4
AppendText TextBox3
AppendText TextBox2
AppendText TextBox1 
```

然后，使用 的值`s`作为书签的文本：

```
ActiveDocument.Bookmarks("Program1").Range.Text = s 
```

# javascript - jQuery：替换链接内的文本？

> ID：12663500
> 
> 赞同：8
> 
> 时间：2012-09-30T17:44:59.430
> 
> 标签：javascript, jquery, replace

我有以下html结构：

```
<div class="event tiny">
    <a href="/whatever">Something</a>
</div> 
```

我想`text`用“任何东西”替换这个链接......</p>

这样做的时候……</p>

`$('.event a').replaceWith("Anything");`

…文本被替换，但链接也消失了。

这样做的时候……</p>

`$('.event a').text().replaceWith("Anything");`

… 没发生什么事。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-30T17:46:32.983

像这样，如果新的文本都是一样的。

```
$('.event a').text("Anything"); 
```

jQuery 循环遍历`a`元素，并用文本替换其内容`"Anything"`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-29T12:07:12.260

这些用于在 a 中设置内部文本和 URL 链接的建议`a href`对我不起作用（使用 JQuery v1.8.3）

以下是确实有效的方法：

**HTML**

```
 <a id="hrefAnalysisName" ></a> 
```

**JavaScript**

```
$("a#hrefAnalysisName").attr("href", "/SomePage/ShowAnalysisDetails.aspx");
$("a#hrefAnalysisName").text("Show analysis"); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:55:36.087

如果链接与 URL 相关，您也可以更改链接`href`。

```
$('a[href="/whatever"]').text("Anything"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T17:56:25.877

您可以通过以下方式获得此结果，结果将是相同的：

***HTML***

```
<div class="event tiny">
    <a class="html" href="/whatever">Something</a></br>
    <a class="text" href="/whatever">Something</a></br>
    <a class="replaceWith" href="/whatever">Something</a>
</div> 
```

***JS***

```
$('.event a.html').html('Anything-html')
$('.event a.text').text('Anything-text')
$('.event a.replaceWith').replaceWith('<a class="replaceWith" href="/whatever">Anything-replaceWith</a>') 
```

# linux - 在linux中查找字符串并替换行

> ID：12663501
> 
> 赞同：4
> 
> 时间：2012-09-30T17:45:06.560
> 
> 标签：linux, replace, sed, find

我想做以下事情，但我似乎找不到一种优雅的方式来做到这一点。

我有一个如下所示的文本文件：

```
..more values
stuff = 23   
volume = -15
autostart = 12
more values.. 
```

现在“音量”值可能会根据情况发生变化。我需要一个脚本，它可以找到带有“volume = xxx”的文本行，然后用“volume = 0”行替换它。什么是优雅的解决方案？正文中的这一行不保证是第一行，所以需要先找到方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T17:49:59.067

```
sed 's/^volume =.*/volume = 0/g' file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T17:49:40.707

使用 sed 你可以说：

```
sed '/^volume/s/.*/volume = 0/' infile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T17:50:27.493

将内容通过管道传输到此命令中：

```
sed -e 's/^volume\s*=\s*-\?[0-9]\+$/volume = 0/' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T04:59:34.083

`sed 's/^volume=\(.*\)$/volume=1/g' inputfile`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T18:50:55.923

@jliu83，阅读正则表达式。这将使 sed 命令中的模式匹配更容易理解。

[http://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

# php - 在写我的文本之前，标题会空出两行

> ID：12663502
> 
> 赞同：0
> 
> 时间：2012-09-30T17:45:21.940
> 
> 标签：php

我在向客户端发送文件时遇到问题。我想使用标头发送纯文本，但是输出文件的开头不是我的内容，而是两个空行。我不知道为什么会这样。

我使用的变量是这样的 xml 格式：

```
$section=<book>xbook<author>nmauthor</author></book> 
```

我使用此代码发送文件。

```
header("Content-type:text/plain");
header("Content-Disposition: attachment;filename=file.xml");
header("Content-Transfer-Encoding:binary"); 
header("Pragma:no-cache");
header("Expires:0");
echo $section 
```

如果有人帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:51:18.270

可能有很多事情...一方面，如果您在打开 php 标记之前没有空间，那么要查看的一件事是文件的编码类型。特别是如果您使用 UTF-8，请确保它是“无 BOM”，因为这可能会导致您的问题。

# path - Raphaeljs 在特定间隔后恢复动画

> ID：12663503
> 
> 赞同：0
> 
> 时间：2012-09-30T17:45:42.110
> 
> 标签：path, jquery-animate, raphael, intervals, repeat

打开这个 JS Fiddle [Link](http://jsfiddle.net/NvQnG/2/)。有两条动画路径。深蓝色条根据经过的分钟进行动画处理，而较小的绿色条根据秒进行动画处理。我想在他们完成动画时循环播放这些动画。我怎样才能做到这一点？

JS小提琴[链接](http://jsfiddle.net/NvQnG/2/)

```
window.onload= function aa () {

    var paper = Raphael(0, 0, 1900, 1900);
    var date = new Date;
    var hour = date.getHours();

    var mins = date.getMinutes();
    var secs = date.getSeconds();
    var secl = (60*60*1000)-(secs*1000);
    var minl = 60 - mins;
    var crx = 318*(mins/60);//sets width according to minutes passed when window is loaded

    var cry = 318*(secs/60);//sets width according to seconds passed when window is loaded
    var sec1 = (60-secs)*1000;

    var x=1;
    var y=1;

    var pathhh = "M"+x+","+y+" "+"h"+320+" "+"v"+270+" "+"h"+(-320)+"z";//bg
    var curbox = paper.path(pathhh).attr({fill:'315-#0299fa-#0473ba'});

    var pathh3 = "M"+(x+1)+","+(242+y)+" "+"h"+318+" "+"v"+27+" "+"h"+(-318)+"z";//black bar
    var cur1box = paper.path(pathh3).attr({fill:'black'});    

    var pathfm = "M"+(x+1)+","+(243+y)+" "+"h"+crx+" "+"v"+20+" "+"h"+"-"+crx+"z";//minutes bar
    var pathto = "M"+(x+1)+","+(243+y)+" "+"h"+318+" "+"v"+20+" "+"h"+(-318)+"z";
    var cu2box = paper.path(pathfm).attr({fill:'#03558b',stroke:'none'});
    cu2box.animate({path: pathto},secl);

    var patgfm = "M"+(x+1)+","+(265+y)+" "+"h"+cry+" "+"v"+4+" "+"h"+"-"+cry+"z"; //seconds bar
    var patgto = "M"+(x+1)+","+(265+y)+" "+"h"+318+" "+"v"+4+" "+"h"+(-318)+"z";
    var cu3box = paper.path(patgfm).attr({fill:'#0db1af',stroke:'none'});
    cu3box.animate({path: patgto},sec1);
}; 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:09:34.907

我认为[这个问题](https://stackoverflow.com/questions/4138644/why-wont-my-raphael-js-animation-loop)是相关的，虽然与你的不太一样。问题和答案一起包含您的案例的解决方案：在动画结束时使用回调，将路径重置为原始路径并设置新动画。

或者，使用[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)每分钟/小时重置一次动画。

# ios - AutoLayout、约束、iPhone 3.5 英寸和 4 英寸

> ID：12663508
> 
> 赞同：3
> 
> 时间：2012-09-30T17:46:04.780
> 
> 标签：ios, xcode, xcode4.5

我们在新的自动布局系统中遇到了问题 我们如何才能使完全自定义的视图在两个屏幕上都工作？没有空白或空白

注：如果有视频请提供，并请告诉我们您的印象和经历

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:47:59.257

我可以推荐的最佳视频是 WWDC 视频。

有几个关于 AutoLayout 的 WWDC 2012 视频。

# facebook - FB.logout 不注销

> ID：12663511
> 
> 赞同：0
> 
> 时间：2012-09-30T17:46:20.423
> 
> 标签：facebook, login, logout

我已经实现了基于 Facebook 的登录。FB.login 完美运行，但**FB.logout**没有。我尝试过使用不同的 FB.init、删除 cookie、连续运行注销页面几次，但让我的用户注销的唯一方法是在 facebook 本身中。

我用于注销的代码是：

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>

  FB.init({
    appId: '***************',
    xfbml: true,
    status: true,
    cookie: true
  });

  FB.getLoginStatus();

  FB.logout();
</script> 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T11:36:31.490

尝试这样做：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

然后调用 FB.logout()。FB 必须先初始化。

从文档中：

> 此代码异步加载 SDK，因此它不会阻止加载页面的其他元素。这对于确保用户和 SEO 机器人的快速页面加载尤为重要。
> 
> 上面代码中的 URL 是协议相关的。这允许浏览器通过与包含页面相同的协议（HTTP 或 HTTPS）加载 SDK，这将防止“不安全内容”警告。
> 
> 加载 SDK 后立即运行分配给 window.fbAsyncInit 的函数。您希望在 SDK 加载后运行的任何代码都应放置在此函数中并在调用 FB.init 之后。例如，您可以在此处测试用户的登录状态或订阅您的应用程序感兴趣的任何 Facebook 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:08:49.827

你试过让一些按钮点击事件是 FB.logout();

```
function logout(){
     FB.logout(function(response) {
        // user is now logged out
     });
 }

  <button onclick="logout()">LogOut</button> 
```

尝试这个

# php - 了解与无效获取请求相关的 PHP 404 重定向

> ID：12663519
> 
> 赞同：1
> 
> 时间：2012-09-30T17:47:15.967
> 
> 标签：php, .htaccess, redirect, request, http-status-code-404

好的，我使用的是传统的 php，没有框架，什么都没有，我使用的是简单的程序方式，现在我的问题是我正在搜索一段时间，但没有得到我的问题的答案，我现在没有使用 .htaccess 文件，但我真的需要了解 404 错误是如何工作的？我有一个网站，在其中显示与类别相关的帖子，例如 category=php，所以我将其作为获取请求传递

```
$_GET['category'] == 'php'; 
```

现在正在做的事情是这样的：

```
$pocategory = $_GET['category'];

if($pocategory == 'php' || $pocategory == 'javascript') {
//Then show related posts
} else {
header('Location:404.php');
exit;
} 
```

我的意思是我只想将 php 和 javascript 作为有效请求的值，其余的我想重定向到 404 但我不明白该怎么做所以我这样做了，如果有超过 50 个类别怎么办？我无法在这种情况下将它们全部列出，简而言之如何检测给定的获取请求值是否无效..

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:55:07.063

.htaccess 是执行此操作的方法。

```
ErrorDocument 404 index.php?404 
```

该行将告诉 apache 加载什么文件。上面的示例调用主 index.php 脚本。

在 index.php 文件的顶部添加这样的内容：

```
$error_404 = isset($_GET["404"]) ? true : false; 
```

现在您可以检测是否有 404 错误请求。$error_404 将是真的，所以为什么不添加一个简单的函数：

```
function error_404($error_404)
{
    if($error_404 == true)
    {
       // do some error stuff here, like set headers, and some text to tell your visitor
    }
} 
```

现在只需调用您的函数：

```
error_404($error_404); 
```

最好在 get 处理程序之后立即执行该操作：

```
error_404($error_404)
$error_404 = isset($_GET["404"]) ? true : false; 
```

或将两者合并为一行：

```
error_404($error_404 = isset($_GET["404"]) ? true : false); 
```

* * *

要解决这个问题，请将其添加到相关脚本中：

```
$pocategorys_ar = array("php","javascript"); 

if (!in_array($pocategory, $pocategorys_ar)) 
{ 
    error_404(true); 
} 
```

确保它可以访问 error_404() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:51:36.113

您可以将所有类别放在一个数组中，如下所示：

```
$pocategories = array
(
    'php',
    'javascript'
);
if (in_array($pocategory, $pages))
{
    // ...
}
else
{
    header('Location:404.php');
} 
```

您可以做的另一件事是为每个类别创建一个 html/php 文件，然后这样做

```
if (is_file('sites/' . $popcategory . '.php')
{
    include('sites/' . $popcategory . '.php');
}
else
{
    header('Location:404.php');
} 
```

# java - setDefaultLookAndFeelDecorated 影响 JFrame 调整大小行为

> ID：12663520
> 
> 赞同：5
> 
> 时间：2012-09-30T17:47:38.837
> 
> 标签：java, swing, jframe, resize, look-and-feel

这是我的代码：

```
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test{

public static void main(String[] args){

    SwingUtilities.invokeLater(new Runnable(){

        @Override
        public void run() {

            JFrame.setDefaultLookAndFeelDecorated(true);

            JFrame frame = new JFrame();
            JPanel jp = new JPanel();

            jp.setMinimumSize(new Dimension(200, 200));
            jp.setPreferredSize(new Dimension(200, 200));

            //frame.getContentPane().setMinimumSize(new Dimension(200, 200));
            //frame.getContentPane().setPreferredSize(new Dimension(200, 200));

            frame.getContentPane().add(jp);

            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.pack();
            frame.setVisible(true);
        }
    });
}
} 
```

它的行为正是我想要的方式。用户可以调整大小，`JFrame`但它总是足够大以容纳 200px x 200px `JPanel`。但是当我删除时：

`JFrame.setDefaultLookAndFeelDecorated(true);`

用户可以调整`JFrame`到任何大小。

为什么默认外观装饰会影响调整大小？我怎样才能使它工作没有`setDefaultLookAndFeelDecorated(true)`？我知道我可以手动设置帧最小尺寸 ( `JFrame#setMinimumSize(new Dimension dim)`)，如果没有更智能的解决方案，我会这样做。

我在 Windows 7 上使用 jdk 1.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T20:02:03.380

[这](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=18bfd2cf9514c46ab3836f022fee?bug_id=4320050)曾经是一个错误，该页面谈到了解决方法，例如：

*   覆盖`setSize()`并检查新大小是否小于所需大小
*   `paint(Graphics g)`检查高度和宽度的内部`JFrame`并“重新创建”框架到新的最小尺寸

但是有人声称它已修复，因为为错误提案发布的原始示例省略了对 的调用`setMinimumSize(...)`，这是必需的，因为 JFrame 不强制执行最小大小

这是显示该人员代码的片段：

```
import java.awt.Dimension;
import javax.swing.*;

public class JavaApplication118 {

    private final Dimension m_dim = new Dimension(200, 150);

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JavaApplication118().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {

        // JFrame.setDefaultLookAndFeelDecorated(true);

        final JFrame frame = new JFrame("Test") {

            @Override
            public Dimension getMinimumSize() {
                return m_dim;
            }

        };

        frame.setMinimumSize(m_dim);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents(frame);

        // frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(JFrame frame) {
        JPanel jp = new JPanel();

        jp.setMinimumSize(new Dimension(200, 200));
        jp.setPreferredSize(new Dimension(400, 400));//for testing

        frame.getContentPane().add(jp);
    }
} 
```

**编辑**

代码片段覆盖`getMinimumSize()`虽然在调用之后这似乎是多余`setMinimumSize(..)`的，但我将它包含在内，因为这就是我找到代码片段的方式（我确实删除了 代码片段包含的被覆盖`getPreferredSize()`的方法）。`JFrame`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T09:14:37.463

> 为什么默认外观装饰会影响调整大小？

因为在拖动时窗口大小完全由 LAF 控制： (fi) MetalRootPaneUI 安装的 mouseHandler 不会将窗口大小调整到 LayoutManager 返回的最小值以下。在不设置框架的 minimumSize 的情况下，您仍然可以通过编程方式减小其大小。

强制窗口最小尺寸的唯一方法（不幸的是）*始终*是手动设置它。不幸的是，这意味着跟踪该最小值的动态变化并酌情更新它。

可使用的片段（取消/评论 defaultDecoration 和 frame min 设置）

```
JFrame.setDefaultLookAndFeelDecorated(true);
JPanel panel = new JPanel() {

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.BLACK);
        Dimension m = getMinimumSize();
        // visualize the min
        g.drawRect(0, 0, m.width - 1, m.height -1);
    }

};
// BEWARE: for demonstration only, NEVER do in production code 
panel.setMinimumSize(new Dimension(400, 400));
panel.setPreferredSize(panel.getMinimumSize());
final JXFrame frame = new JXFrame("", true);
Action action = new AbstractAction("resize") {

    @Override
    public void actionPerformed(ActionEvent e) {
        frame.setSize(300, 300);
        LOG.info("succeeded? " + frame.getSize());
    }
};
panel.add(new JButton(action));
frame.add(panel);
frame.pack();
// set minimum is required to enforce the minimum
frame.setMinimumSize(frame.getMinimumSize()); 
```

**更新**

查看 Window 源代码，事实证明，您可以通过覆盖 isMinimumSizeSet 并无条件返回 true 来对最小尺寸进行自动魔术动态尊重：

```
final JXFrame frame = new JXFrame("", true) {
    @Override
    public boolean isMinimumSizeSet() {
        return true;
    }
};
...
// no longer needed
// frame.setMinimumSize(frame.getMinimumSize()); 
```

虽然没有测试副作用

# mysql - 聚合 MySQL 数据（百万行）的建议

> ID：12663524
> 
> 赞同：0
> 
> 时间：2012-09-30T17:48:17.480
> 
> 标签：mysql, aggregate

谁能推荐一种策略来聚合存储在超过 100,000,000 行的 MySQL 表中的原始“点击”​​和“印象”数据？

这是表结构。

```
CREATE TABLE `clicks` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `companyid` int(11) DEFAULT '0',
  `type` varchar(32) NOT NULL DEFAULT '',
  `contextid` int(11) NOT NULL DEFAULT '0',
  `period` varchar(16) NOT NULL DEFAULT '',
  `timestamp` int(11) NOT NULL DEFAULT '0',
  `location` varchar(32) NOT NULL DEFAULT '',
  `ip` varchar(32) DEFAULT NULL,
  `useragent` varchar(64) DEFAULT NULL,
  `processed` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `type` (`type`),
  KEY `companyid` (`companyid`),
  KEY `period` (`period`),
  KEY `contextid` (`contextid`)
) ENGINE=MyISAM AUTO_INCREMENT=21189 DEFAULT CHARSET=latin1; 
```

我想做的是让这些数据更容易使用。我想从中提取每周和每月的聚合，按类型、companyid 和 contextid 分组。

理想情况下，我想将这些数据从生产服务器中取出，聚合然后合并回来。

我真的有点不知所措，想知道是否有人有任何好的起点或策略来实际聚合数据，以便可以使用 MySQL 快速查询。我不需要此数据的“实时”报告。

我过去曾尝试过批处理 PHP 脚本，但这似乎很慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:44:36.430

您可以使用整个月/周数据聚合逻辑实现一个简单的 PHP 脚本，并使其在给定时间通过 cron 作业执行。根据软件上下文，它可能被安排在夜间运行。此外，您可以在请求中传递 GET 参数以识别请求源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:06:00.040

您可能对 MySQL 复制感兴趣...设置第二台服务器，该服务器的唯一工作就是在数据集的复制副本上运行报告，因此您可以针对该工作专门调整它。如果您将复制方案设置为主-主，那么当报表服务器根据报表结果更新它自己的表时，这些数据库更改将自动复制回生产服务器。

此外，我强烈建议您阅读[高性能 MySQL，第 3 版。](https://rads.stackoverflow.com/amzn/click/com/1449314287)，并查看[http://www.mysqlperformanceblog.com/](http://www.mysqlperformanceblog.com/)以获取有关在 MySQL 中处理大量数据集的更多信息

# python - python将代码与raw_input超时集成

> ID：12663527
> 
> 赞同：0
> 
> 时间：2012-09-30T17:48:34.573
> 
> 标签：python, timeout, python-2.7, raw-input

这是我现在工作的python二十一点游戏（或至少是二十一点之类的游戏）的大部分代码我现在被告知我需要实施时间限制（用户被要求输入一些东西并且只有3秒左右的时间给一个回应）。

```
def deck():
        cards = range(1, 12)
        return choice(cards)

def dealer():
    total = deck() + deck()
    if total <= 15:
        totalf = total + deck()
        while totalf <= 21:
            return totalf
    if total > 15:
        return total

def player():
    card1 = deck()
    card2 = deck()
    hand = card1 + card2
    print "Cards dealt: %d and %d" % (card1, card2)
    while hand <= 21:
        choice = raw_input("Would you like to hit or stand?: ")
        print choice
        if choice == "hit":
            hand = hand + deck()
            print "Current Total: %d" % hand        
        elif choice == "stand": 
            return hand 

money = 100
highscore = 0

while money > 0:
    opp = dealer()
    me = player()
    if me > opp:
        highscore = highscore + 10
        money = money + 10
        print "Winner, winner, chicken dinner! You have $%d!" % money
        print "********************************************"
    elif opp > 21:
        highscore = highscore + 10
        money = money + 10
        print "Winner, winner, chicken dinner! You have $%d!" % money
        print "********************************************"
    elif me > 21:
        money = money - 20
        print "Bust! Dealer wins with %d. You have $%d reamaining." % (opp, money)      
        print "********************************************"
    elif opp > me:
        money = money - 20
        print "Dealer wins with %d. You have $%d reamaining." % (opp, money)
        print "********************************************"
    elif me == 21:
        highscore = highscore + 10
        money = money + 10
        print "Blackjack! You have $%d!" % money
        print "********************************************"
    sleep(1)    

print "Thank you for playing! Your highscore was $%d." % highscore 
```

这是我的教授为我们提供的代码：

```
 import sys, time
from select import select

import platform
if platform.system() == "Windows":
    import msvcrt

def input_with_timeout_sane(prompt, timeout, default):
    """Read an input from the user or timeout"""
    print prompt,
    sys.stdout.flush()
    rlist, _, _ = select([sys.stdin], [], [], timeout)
    if rlist:
        s = sys.stdin.readline().replace('\n','')
    else:
        s = default
        print s
    return s

def input_with_timeout_windows(prompt, timeout, default): 
    start_time = time.time()
    print prompt,
    sys.stdout.flush()
    input = ''
    while True:
        if msvcrt.kbhit():
            chr = msvcrt.getche()
            if ord(chr) == 13: # enter_key
                break
            elif ord(chr) >= 32: #space_char
                input += chr
        if len(input) == 0 and (time.time() - start_time) > timeout:
            break
    if len(input) > 0:
        return input
    else:
        return default

def input_with_timeout(prompt, timeout, default=''):
    if platform.system() == "Windows":
        return input_with_timeout_windows(prompt, timeout, default)
    else:
        return input_with_timeout_sane(prompt, timeout, default) 
```

我完全不知道如何合并这两段代码。在过去的几个小时里，我一直在尝试让它工作，但无论出于何种原因，它都无法正常工作。任何帮助都会很棒。（我为代码墙道歉）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:56:20.150

你只需要`input_with_timeout`在你想要用户输入的地方调用函数。

在您的播放器功能中：

```
def player():
    card1 = deck()
    card2 = deck()
    hand = card1 + card2
    print "Cards dealt: %d and %d" % (card1, card2)
    while hand <= 21:
        choice = input_with_timeout("Would you like to hit or stand?: ", 3, "stand")
        print choice
        if choice == "hit":
            hand = hand + deck()
            print "Current Total: %d" % hand        
        elif choice == "stand": 
            return hand 
```

将提示输入，在其前面写下“Would ... or stand”句子。如果用户在超时（在本例中为 3 秒）之前没有回答，该函数将返回“stand”。

并确保在你的主文件中包含你教授的代码。

# html - 背景图像不会显示在 div 中，但会显示在 body 标签中

> ID：12663530
> 
> 赞同：0
> 
> 时间：2012-09-30T17:48:52.543
> 
> 标签：html, css

我去朋友家看看我的网页在其他分辨率下是如何显示的，但发现背景图像没有到达两侧。所以，我回家做了一些研究，并被告知不要将背景图像放在 body 标签中，我应该在 div 之前在 body 标签内创建一个`container`div 并且它会起作用。

这确实适用于我的一个设计，但不适用于另一个 - 代码完全相同，但图像不是。

我尝试添加`position:absolute`我的 CSS，它确实显示了，但它的顶部和左侧有一个奇怪的白色边框。

我该如何解决这个问题？

**HTML：**

```
<html>
    <head></head>
    <body>
        <div class="background">
        </div>
        <div class="container">
        </div>
    </body>
</html> 
```

**CSS：**

```
body{
    text-align:center;
}

.background{
    background:url('images/background.png')no-repeat;
    width:100%;
    height:100%;
    background-position:center; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:04:53.630

没有足够的信息来真正给你一个好的答案......但是页面顶部和左侧的白线听起来像是附加到正文标签的自然边距。如果您将其添加到您的 css 中，它应该删除：

```
body {
margin: 0px;
} 
```

此外，“到达侧面”的背景图像将主要取决于相对于观看屏幕分辨率和浏览器大小的图像尺寸。这些因素是您无法控制的，因此在您在设计背景中使用图像时要小心。

# ruby-on-rails - 安全性：使用 CanCan 确保用户无法看到其他用户的个人资料

> ID：12663531
> 
> 赞同：1
> 
> 时间：2012-09-30T17:48:56.293
> 
> 标签：ruby-on-rails, security, devise, cancan

我有一个使用 Devise、CanCan 和 Rolify 来处理身份验证和授权的应用程序。但我认为我并没有充分利用这些宝石。现在我的能力课上唯一的事情是：

```
class Ability

  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.has_role? :admin
      can :manage, :all
    else
      can :read, :all
    end
  end
end 
```

我发现了一个安全漏洞，经过身份验证的用户可以查看其他用户配置文件。我通过更改用户控制器中的一些代码来修复它。

```
def show
  @user = current_user.has_role?(:admin) ? User.find(params[:id]) : current_user
end 
```

这是处理这个洞的最好方法吗？是否有以不同方式解决此问题的最佳实践或 Rails 约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:00:04.280

[从文档](https://github.com/ryanb/cancan/wiki/Defining-Abilities)：

```
can :read, ModelName, :user_id => user.id 
```

# java - 连接两个线程

> ID：12663532
> 
> 赞同：-2
> 
> 时间：2012-09-30T17:49:33.513
> 
> 标签：java, multithreading, object

我在 java 中有 2 个线程，我想把它们连接起来。我使用了类 PipedInputStream 和 PipedOutputStream，但我想发送对象，我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:51:43.937

为什么不使用`Queue`. 生产者 cam 泵送消费者可以接收和处理的队列上的对象。

您可以在 java 中使用几种实现`BlockingQueue`，例如`LinkedBlockingQueue`.

如果您有任何特定的用例，您必须详细说明。

# aptana - FTP 使用 Aptana 保持活力

> ID：12663537
> 
> 赞同：2
> 
> 时间：2012-09-30T17:50:03.683
> 
> 标签：aptana, aptana3

有什么方法可以让 aptana 向我的 ftp 服务器发送更多 NOOP 命令？我的连接掉线如此之快，以至于我需要在每次上传时重新连接。这是非常耗时的。Aptana 很棒，这是让我无法每天使用它的唯一原因。

# c# - 通过引用传递给静态方法的变量？

> ID：12663540
> 
> 赞同：3
> 
> 时间：2012-09-30T17:50:15.697
> 
> 标签：c#, asp.net, .net

我有一些代码的行为就像我的变量在我认为不应该通过引用传递时一样。

在我的类库中

```
public class ListingHelper
{
    public static List<FilterCategory> getListingFilterCertifications(ListingCategory parentListingCategory, ListingFilters filters)
    {
       ...//Building up return object
       filters.gradingServiceId = 2;
    }

} 
```

在页面的 pageLoad 中，我称之为：

```
private void BindForm()
{
   ListingFilters filters = new ListingFilters();
   filters.gradingServiceId = 0;

   if (filters.gradingServiceId > 0)
   {
       listCertification.DataSource = ListingHelper.getListingFilterCertificationById(filters.gradingServiceId);
       listCertification.DataBind();
   }
} 
```

当我从库中调用我的方法返回时，我认为`filters.gradingServiceId`应该为 0，但它又返回为 2。静态方法的方法参数真的是通过引用传递的吗？

列表过滤器：

```
public class ListingFilters
{
    public String state { get; set; }
    public int categoryId { get; set; }
    public int gradingServiceId { get; set; }
    public int gradeId { get; set; }
} 
```

**编辑**

感谢乔恩的链接。所以听起来在.net中所有用户创建的类都是引用类型，即使通过值传递，您实际上也不是发送对象的副本，而是指向其在内存中的位置的指针。

如果是这种情况，我将如何将我的过滤器对象的副本传递给一个方法，以便我可以弄乱这些值并使它们在调用它的代码中不受影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T17:59:10.693

所有参数都按值传递。`ListingFilters`是一个引用类型，它指向堆内存中的一个对象，所以它的“值”是一个内存地址。当您将它作为参数传递给函数时，参数的“值”是对同一对象的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T18:00:33.297

您已经概念化了 C# 中按引用传递或按值传递的含义。如果您阅读规范：

> 值参数用于输入参数传递。值参数对应于从为参数传递的参数中获取其初始值的局部变量。对值参数的修改不会影响为参数传递的参数。
> 
> 值参数可以是可选的，通过指定默认值以便可以省略相应的参数。
> 
> 参考参数用于输入和输出参数传递。为引用参数传递的参数必须是变量，并且在方法执行过程中，引用参数表示与参数变量相同的存储位置。使用 ref 修饰符声明引用参数。以下示例显示了 ref 参数的使用。

这里可能让您感到困惑的是，当您将引用类型作为值参数传递时，不会制作对象的副本，而是制作指向对象的指针的副本。因此，如果您对方法内的对象进行修改，它将在实际对象上而不是副本上。为什么这被认为是按值传递是指针是正在传递的值。但是，如果您将参数重新分配给另一个对象（即更改指针），则除非使用 ref 关键字声明您的参数，否则它将不会在方法之外持续存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T17:55:24.623

C# 中的参数是按值传递的，无论是静态方法、非静态方法还是泛型方法。引用也是按值传递的。由于 ListingFilters 是一个对象，如果有意义的话，它会通过值引用传递。因此，您将覆盖该值，因为传入的引用参数指向有效的内存位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T17:59:15.497

*   为值类型和引用类型制作了一个副本。
*   在值类型的情况下，实际值被复制并且是该方法的本地值。您所做的任何更改在方法之外都是不可见的。
*   但是在引用类型的情况下，地址是一个副本。所以只有一个对象，但是地址的两个副本。您通过方法内部的本地副本对对象所做的任何更改在外部都是可见的。

# php - 无需mysqldump即可将大型数据库导出到文件，内存占用低

> ID：12663544
> 
> 赞同：1
> 
> 时间：2012-09-30T17:50:34.170
> 
> 标签：php, mysql

> **可能重复：**
> [在 php 中将内存使用情况从数据库导出到 csv](https://stackoverflow.com/questions/5309287/memory-usage-export-from-database-to-csv-in-php)

我正在导出一个大型数据库，并想知道使其具有低内存占用的最佳方法。

我意识到我必须在有时间限制并使用低内存的周期中执行此操作，一次获取 100 行并将信息保存到文件中，然后重定向以从前一个周期完成的位置开始新的周期。

我想知道将数据缓冲到文件而不是内存不足的最佳方法是什么，目前脚本将所有数据作为字符串获取，然后在完成从数据库中获取所有行后保存到文件中。有时它会耗尽内存，因此需要修复。

我是否对从数据库中获取的数据使用 fwrite() 而不是放入 var 或使用临时文件？如果我使用临时文件，我什么时候合并/重命名到备份文件中？

基本上，脚本将数据库数据导出到文件中而不会出现错误“致命错误：PHP 允许的内存大小已用尽”的最佳方法是什么？

```
 function backup_tables($host, $user, $pass, $db, $tables = '*')
    {
            set_time_limit(0);

            $mysqli = new mysqli($host,$user,$pass, $db);
            if ($mysqli->connect_errno)
            {
                echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
            }

            $return = '';

            $return .= "--\n";
            $return .= "-- Database: `$db`\n";
            $return .= "--\n\n";
            $return .= "-- --------------------------------------------------------\n\n";

            $numtypes = array(
                'tinyint', 
                'smallint',
                'mediumint',
                'int',
                'bigint',
                'float',
                'double',
                'decimal',
                'real'
            );

            // get all of the tables
            if ($tables == '*')
            {
                    $tables = array();
                    $result = $mysqli->query('SHOW TABLES');
                    while ($row = $result->fetch_row())
                    {
                            $tables[] = $row[0];
                    }

                    $result->close();
            }
            else
            {
                    $tables = is_array($tables) ? $tables : explode(',',$tables);
            }

            for ($z = 0; $z == 0; $z++)
            {
                echo $z.'<br>';

            // cycle through tables
            foreach ($tables as $table)
            {
                    //
                    $typesarr = array();
                    $result = $mysqli->query("SHOW COLUMNS FROM `".$table."`");

                    while ($row = $result->fetch_assoc())
                    {
                            $typesarr[] = $row;
                    }
                    $result->close();

                    #echo '<h2>'.$table.'</h2>';
                    #print("<pre>" . print_r($typesarr, true). "</pre>");

                    // table structure dump
                    $return .= "--\n";
                    $return .= "-- Table structure for table `$table`\n";
                    $return .= "--\n\n";                        
                    $return.= 'DROP TABLE IF EXISTS `'.$table.'`;'."\n\n";
                    $result = $mysqli->query("SHOW CREATE TABLE `".$table."`");
                    $row = $result->fetch_array();
                    $return.= $row[1].";\n\n";
                    $result->close();

                    // table data dump
                    $return .= "--\n";
                    $return .= "-- Dumping data for table `$table`\n";
                    $return .= "--\n\n";

                    $result = $mysqli->query("SELECT * FROM `".$table."`");
                    $num_fields = $result->field_count;

                    if ($result->num_rows > 0)
                    {
                            // put field names in array and into sql insert for dump
                            $fields_str = '';
                            $fields =  array();
                            $finfo = $result->fetch_fields();

                            foreach ($finfo as $val)
                            {
                                    $fields_str .= '`'.$val->name.'`, ';
                                    $fields[] = $val->name;
                            }                                

                            $fields_str = '('.rtrim($fields_str, ', ').')';
                            $return.= 'INSERT INTO `'.$table.'` '.$fields_str.' VALUES'."\n";

                            // cycle through fields and check if int for later use
                            for ($i = 0; $i < $num_fields; $i++) 
                            {
                                    // strip brackets from type
                                    $acttype = trim(preg_replace('/\s*\([^)]*\)/', '', $typesarr[$i]['Type']));
                                    $acttype = explode(' ', $acttype);

                                    // build array, is field int or not
                                    if (is_numeric(array_search($acttype[0], $numtypes)))
                                    {
                                            $numflag[$i] = 1;
                                    }
                                    else
                                    {
                                            $numflag[$i] = 0;        
                                    }
                            }
                    }  

                    $x = 0;
                    $num_rows = $result->num_rows;

                    // cycle through table rows
                    while($row = $result->fetch_row())
                    {
                            $x++;

                            // cycle through rows fields
                            for($j=0; $j<$num_fields; $j++) 
                            {          
                                    if (isset($row[$j]) and $j === 0) { $return .= '('; }

                                    // field data has value or not NULL
                                    if (isset($row[$j]))
                                    { 
                                            // field data dump (INT)
                                            if ($numflag[$j]==1)
                                            {
                                                    #echo '(INT) '. $fields[$j].' = '.$row[$j].'<br>';
                                                    $return.= $mysqli->real_escape_string($row[$j]);
                                            } 
                                            else
                                            {
                                                    // field data dump values (empty string, NULL and INT)
                                                    $return.= "'".$mysqli->real_escape_string($row[$j])."'";
                                                    #echo $fields[$j]." = '".$mysqli->real_escape_string($row[$j])."'<br>";
                                            }
                                    }
                                    else
                                    {
                                            // field data dump (NULL)
                                            if (is_null($row[$j]))
                                            {
                                                    $row[$j] = 'NULL';
                                                    #echo '(NULL) '. $fields[$j].' = '.$row[$j].'<br>';
                                                    $return.= $row[$j]; 
                                            }
                                            else
                                            {
                                                    // field data dump (empty string)
                                                    $return.= "''";
                                            }
                                    }

                                    if ($j<($num_fields-1)) { $return.= ', '; }
                            }

                            if ($x<$num_rows) { $return.= "),\n"; } else { $return .= ");\n"; }

                            #echo '<br>';
                    }
                    #echo 'Rows: '.$rows.'<br>';
                    #echo 'Iterations: '.$x.'<br>';
                    $return.="\n-- --------------------------------------------------------\n\n";
            }

            }

            $result->close();

            //save file
            $handle = fopen('/db-backup-'.time().'.sql','a');
            fwrite($handle,$return);
            fclose($handle);
    } 
```

欢迎举例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T21:31:26.730

`MYSQLI_USE_RESULT`作为`resultmode`参数添加到[`mysqli::query`](http://de3.php.net/manual/en/mysqli.query.php)调用中，以便一次迭代一行结果，而不是将它们全部转移到 PHP 中。另请参阅[`mysqli::use-result`](http://de3.php.net/manual/en/mysqli.use-result.php).

将每一行直接写入输出文件，避免`$result`变量。结合上述情况，这可能导致从服务器获取每一行并写入文件，因此 PHP 一次不必存储多于一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:19:15.583

`mysqldump`默认情况下，最新版本已`--opt`启用，其中包括`--quick`依次指示一次获取一个行，而不在内存中缓冲整个表。所以已经的内存占用`mysqldump`应该很低。

您确定使用时实际上有任何问题`mysqldump`吗？如果是这样，它们是如何表现出来的？是`mysqldump`内存不足，还是mysql服务器，或者完全是别的什么？

# javascript - 在特定的 div 类中删除

> ID：12663545
> 
> 赞同：1
> 
> 时间：2012-09-30T17:50:53.353
> 
> 标签：javascript, jquery, dom

我想删除`<br>`div 类中的所有标签，`category alternate`但由于某种原因我无法让它工作。

这是我到目前为止得到的：

```
$('div.category alternate').find('br').remove(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T18:00:19.173

如果您的 HTML 如下所示：

```
<div class="category alternate">
   whatever<br>
</div> 
```

那么你想要这个：

```
$('div.category.alternate br').remove(); 
```

另一方面，如果您的 HTML 如下所示：

```
<div class="category">
   <div class="alternate">
     whatever<br>
   </div>
</div> 
```

那么你想要这个：

```
$('div.category .alternate br').remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T17:54:02.793

没有`<alternate>`标签之类的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T17:54:12.457

`$('div.category alternate')`尝试使用 class查找`alternate`内部的所有标签 。也许你会`div``category``$('div.category .alternate')`

# android - 我的应用程序启动时如何获得规律性

> ID：12663549
> 
> 赞同：0
> 
> 时间：2012-09-30T17:51:27.963
> 
> 标签：android, animation, view

当我执行我的应用程序时，我通过代码准备了一些动画：

```
public class MainActivity extends ActionBarActivity{

private Animation buscarAnimation2 = null;
private Animation buscarAnimation3 = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    RelativeLayout RL=(RelativeLayout)findViewById(R.id.RelativeLayout1);

    buscarAnimation2 = AnimationUtils.loadAnimation(this, R.anim.boton2);
    buscarAnimation3 = AnimationUtils.loadAnimation(this, R.anim.boton1);

    RL.getViewTreeObserver().addOnGlobalLayoutListener(
            new ViewTreeObserver.OnGlobalLayoutListener() {
                public void onGlobalLayout() {
                    TextView t1=(TextView)findViewById(R.id.text_trad);
                    TextView t2=(TextView)findViewById(R.id.text_rell);
                    TextView t3=(TextView)findViewById(R.id.text_cub);
                    TextView t4=(TextView)findViewById(R.id.text_busq);

                    t1.setText(getString(R.string.main_trad));
                    t2.setText(getString(R.string.main_rell));
                    t3.setText(getString(R.string.main_cub));
                    t4.setText(getString(R.string.main_busq));

                    ImageButton b= (ImageButton)findViewById(R.id.imageButton1);
                    b.startAnimation(buscarAnimation2);
                    b.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                        }
                    });
                    ImageButton b2= (ImageButton)findViewById(R.id.ImageButton01);
                    b2.startAnimation(buscarAnimation3);
                    b2.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                        }
                    });

                    ImageButton b3= (ImageButton)findViewById(R.id.ImageButton03);
                    b3.startAnimation(buscarAnimation2);
                    b3.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                                    }
                    });

                    ImageButton b4= (ImageButton)findViewById(R.id.ImageButton02);
                    b4.startAnimation(buscarAnimation3);
                    b4.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                                }
                    });
                }
            }); 
} 
```

有时当我执行我的应用程序时，我不会查看动画，如果动画持续 4 秒，我会看到黑色主题，然后是动画的最后一秒或最后 2 秒。就像加载时遇到问题之类的...

那么我该怎么做才能避免这种情况，或者我做错了什么

编辑了代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:02:10.487

如何开始动画`onResume`呢？此时，您确定 Activity 是可见的（并且正在运行）。就像是：

```
private Animation buscarAnimation1 = null;
private Animation buscarAnimation2 = null;
private Animation buscarAnimation3 = null;
private Animation buscarAnimation4 = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Other initialization code.

    buscarAnimation1 = AnimationUtils.loadAnimation(this, R.anim.boton1);
    buscarAnimation2 = AnimationUtils.loadAnimation(this, R.anim.boton2);
    buscarAnimation3 = AnimationUtils.loadAnimation(this, R.anim.boton2);
    buscarAnimation4 = AnimationUtils.loadAnimation(this, R.anim.boton1);
}

@Override
protected void onResume() {
    super.onResume();

    ImageButton b1= (ImageButton)findViewById(R.id.imageButton1);
    b1.startAnimation(buscarAnimation1);
    ImageButton b2= (ImageButton)findViewById(R.id.ImageButton01);
    b2.startAnimation(buscarAnimation2);
    ImageButton b3= (ImageButton)findViewById(R.id.ImageButton03);
    b3.startAnimation(buscarAnimation3);
    ImageButton b4= (ImageButton)findViewById(R.id.ImageButton02);
    b4.startAnimation(buscarAnimation4);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:08:22.480

将[ViewTreeObserver](http://developer.android.com/reference/android/view/ViewTreeObserver.html)附加到您的布局，并覆盖它的[onGlobalLayoutListener()](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html)方法以调用您的动画，因为一旦完全绘制了布局，就会调用该方法。

# c++ - 如何在多个构造函数中删除重复检查

> ID：12663556
> 
> 赞同：2
> 
> 时间：2012-09-30T17:52:03.137
> 
> 标签：c++, constructor, c++11

我的班级有几个构造函数：

```
MyClass();
MyClass( int param1 );
MyClass( int param1, int param2 );
MyClass( std::string otherParam );
MyClass( std::string otherParam, int param1 );
MyClass( std::string otherParam, int param1, int param2 ); 
```

现在，在构造函数中需要进行一些参数检查，例如 -3 < param1 < 3。进行此检查的首选方法是什么？我应该从每个构造函数中调用 checkParam1() 和 checkOtherParam() 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T17:53:47.470

在 C++11 中，您可以使用委托构造函数功能：

> 借助委托构造函数功能，您可以将常见的初始化和后期初始化集中在一个名为目标构造函数的构造函数中。委托构造函数可以调用目标构造函数进行初始化。委托构造函数也可以用作一个或多个委托构造函数的目标构造函数。您可以使用此功能使程序更具可读性和可维护性。

```
MyClass( std::string otherParam, int param1, int param2 );

MyClass( std::string otherParam, int param1)
:   MyClass(otherParam, param1, 456) {
} 
```

参数少的构造器调用参数多的构造器，参数多的构造器做所有的检查。

请注意，您应该能够通过为`param1`and添加默认值来统一最后三个构造函数`param2`，如下所示：

```
MyClass( std::string otherParam, int param1 = 123, int param2 = 456); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T18:23:48.697

**对于 C++03**，您需要一个特殊的函数来检查和设置参数。您可以使用多个函数，在此示例中，我放置了一个检查所有参数的函数。

```
void checkSetParams(std::string p1, int p2, int otherP)
{
    // check params, and set object members...
} 
```

然后，在您的构造函数中：

```
MyClass(int p1)
{
    checkSetParams(default_string, p1, default_int);
}

MyClass(int p1, int p2, std::string str)
{
    checkSetParams(str, p1, p2);
} 
```

等等。

**对于 C++11**，您可以使用委托构造函数：

```
MyClass(std::string otherParam)
: MyClass(otherParam, 42, 3)
{
} 
```

**对于标准的两个版本**：您可以在构造函数中使用默认参数。它可能会解决您的部分问题，但您仍然可以拥有“方便”的构造函数：

```
MyClass( int param1 = 42, int param2 = 3);
MyClass( std::string otherParam, int param1 = 42, int param2 = 3); 
```

在这里，您将需要之前提出的解决方案之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T21:12:53.757

我个人的偏好，以及我一直向他人提出的建议，是将尽可能多的责任转嫁给会员。这包括范围检查。

所以代替这个错误生成代码：

```
 MyClass( int param1 ) : param1(param1), param2(0) 
   {
      if (param1 < 7 || param1 > 123) throw std::range_error("param1");
      if (param2 < 0 || param2 > 123) throw std::range_error("param2");

   }
   MyClass( int param1, int param2 ) : param1(param1), param2(param2) 
   {
      if (param1 <= 8 || param1 > 123) throw std::range_error("param1");
      if (param2 <= 0 || param2 > 123) throw std::range_error("param2");
   } 
```

我更喜欢成员级别的范围定义：

```
template <class T, T range_min, T range_max>
struct Range_Type : Wrapper_Type<T> { // Wrapper_Type<T> stores value and emulates T 
  Range_Type(T value, const char* name) : Wrapper_Type<T>(value) {
     if (value < range_min || value > range_max) throw std::range_error(name);
  }
}; 
```

和用法：

```
 class MyClass{
  public:
       MyClass( int param1 ) : param1(param1), param2(0) 
       {
       }
       MyClass( int param1, int param2 ) : param1(param1), param2(param2) 
       {
       }
  private:
       Range_Type<int, 7, 123> param1;
       Range_Type<int, 0, 123> param1;
  }; 
```

# javascript - 使用 setInterval 延迟循环的代码

> ID：12663557
> 
> 赞同：2
> 
> 时间：2012-09-30T17:52:24.920
> 
> 标签：javascript, jquery, animation, gallery

我正在尝试制作一个循环显示多个图像的图像推子（此处为 3 个）。我做了这个函数来循环和淡入正确的图像，它可以工作，淡出一个图像，同时淡入下一个图像，这样就没有空白空间。除了当它到达数组的末尾时，函数会淡出数组中的最后一个图像，然后再循环回来并再次淡入第一个图像，从而创建第二个空白空间。

Javascript

```
<script type="text/javascript">
        var img_arr = [
            '#img1',
            '#img2',
            '#img3'
        ]
        var i = 0;
        arr_length = img_arr.length;
        //fade function
        function fade_gal() {
            $(img_arr[i])
                .animate(
                    {opacity: '1.0' }, 500
                );
            $('.img').delay(3000).animate({opacity: 0.0}, 500);
            i = i + 1;
            if (i == arr_length) {
                i = 0;
            }
        }
        $(document).ready(function img_gallery() {
            //initial function
            fade_gal();
            //set function interval
            setInterval( function() {fade_gal()}, 3500);
        })
    </script> 
```

html

```
<div id="scroller">
            <img src="../../images/1.jpg" alt="img1" width="300px" id="img1" class="img"/>
            <img src="../../images/2.jpg" alt="img1" width="300px" id="img2" class="img"/>
            <img src="../../images/3.jpg" alt="img1" width="300px" id="img3" class="img"/>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:20:52.203

我看不出有理由在每次运行时淡化所有图像......

如果您的图像是绝对定位且没有 z-index，则存在顶部和底部。

您所要做的就是将顶部图像淡出，完成后，将其发送到堆的底部。

您可以这样编码（已编辑）（这是一个小提琴：http: [//jsfiddle.net/txLet/](http://jsfiddle.net/txLet/)）：

```
//fade function
function fade_gal() {
    var container = $('#container');
    var imgs = $('img',container);
    var img = imgs.last();
    img.animate({opacity: '0'}, {duration: 500, complete: function(){
        container.prepend(img); //send image to bottom
        img.css({opacity: 1});
    }});
}
$(document).ready(function img_gallery() {
    //initial function
    fade_gal();
    //set function interval
    setInterval(fade_gal,2000);
})​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:28:42.043

您的代码让我感到困惑，并不是说它是错误的。我无法弄清楚时间。

这是我的版本：（[jsFiddle](http://jsfiddle.net/LNZ6x/)）

```
var img_arr = [
    '#img1',
    '#img2',
    '#img3'
    ];

arr_length = img_arr.length;
var i = arr_length;
//fade function

$('.img').css('opacity', 0.0);

function fade_gal() {

    $(img_arr[(i-1)%arr_length]).animate({opacity: 0.0}, 500);
    $(img_arr[i%arr_length]).animate({opacity: 1.0}, 500);

    i++;
}

$(document).ready(function () {
    //initial function
    fade_gal()

    //set function interval
    setInterval(function() {
        fade_gal()
    }, 3500);
})​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T18:12:33.147

尝试更改此行：

```
$('.img').delay(3000).animate({opacity: 0.0}, 500); 
```

对此：

```
$(img_arr[i]).delay(3000).animate({opacity: 0.0}, 500); 
```

我有一种感觉，淡出和淡入之间存在冲突。

# gwt - GWT：外形依赖编辑器

> ID：12663560
> 
> 赞同：0
> 
> 时间：2012-09-30T17:52:48.167
> 
> 标签：gwt

我正在为不同的外形开发一个网络应用程序。每个都有自己的客户端工厂来创建依赖于外形的视图。到目前为止，一切工作正常，但在编辑器框架方面我被卡住了。

要使用该框架，我必须声明一个标记接口，如下所示：
`interface Driver extends SimpleBeanEditorDriver<User, UserEditor> {}`

由于这发生在我的与外形尺寸无关的活动中，我希望该类型`UserEditor`引用基于外形尺寸的实际实现，即`UserEditorPhone`, `UserEditorTablet`, `UserEditorYouNameIt`。

无济于事，我尝试在 module.gwt.xml 中使用延迟绑定：

```
<replace-with class="com.example.client.desktop.UserEditorDesktop">
    <when-type-is class="com.example.client.view.UserEditor"/>
</replace-with> 
```

关于我所缺少的内容以及如何避免在外形尺寸和 UserEditor 活动之间建立一对一关系的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:01:20.510

您将希望与*外形无关的活动*只知道`SimpleBeanEditorDriver<User, ?>`，并将界面移动到、和中的`Driver`每一个中。`UserEditorDesktop``UserEditorTable``UserEditorPhone`

然后，活动将向一个依赖于格式的对象（例如，它的视图，如果您使用 MVP 并且活动是演示者）询问编辑器驱动程序的实例，而不是`GWT.create()`直接使用。

（如果你详细说明你的代码是如何组织的，我可以给出代码示例：你在使用 MVP 吗？编辑器是你的视图吗？它是如何实例化的？等等）

# javascript - Javascript 文本字段验证

> ID：12663561
> 
> 赞同：1
> 
> 时间：2012-09-30T17:52:49.093
> 
> 标签：javascript, html

我在验证 javascript 中的表单时遇到了困难。我目前只检查一个文本字段，但它不起作用。我的代码如下：

索引.html：

```
<html xmlns = "http://www.w3.org/1999/xhtml">
<head> 
    <title>
        Validation Form
    </title>
    <script type = "text/javascript" src ="vForm.js">
    </script>
</head>
<body>
    <form id = "myForm" action ="">
        First name: <input type="text" name="fname"></br>
        Last name: <input type="text" name="lname"></br>
        Password: <input type="password" name="pass1"></br>
        Re-enter password: <input type="password" name="pass2"></br>
        Email: <input type="text" name="email"></br>
        Phone: <input type="text" name="phone"></br>
        Address: <input type="text" name="add"></br>
        Date: <input type="date" name="date"></br>
        Time: <input type="time" name="time"></br>
        <input type="reset" name="reset">
        <input type="submit" name="submit">
    </form>
    <script type = "text/javascript" src ="vFormRun.js">
    </script>
</body>
</html> 
```

vForm.js：

```
function validateForm()
{
    var fname = document.getElementById("fname");
    var lname = document.getElementById("lname");
    var pass1 = document.getElementById("pass1");
    var pass2 = document.getElementById("pass2");
    var email = document.getElementById("email");

    if(fname == "")
    {
        alert("Please enter first name")
        return false;
    }
    else
    {
        return true;
    }
} 
```

vFormRun.js：

```
document.getElementById("myForm").onsubmit = validateForm; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T17:55:04.767

你需要给`.value`它每一个。而且，给一个`id`相同的`name`。

```
function validateForm()
{
 var fname = document.getElementById("fname");
 var lname = document.getElementById("lname");
 var pass1 = document.getElementById("pass1");
 var pass2 = document.getElementById("pass2");
 var email = document.getElementById("email");

 if(fname.value == "")
 {
   alert("Please enter first name")
   return false;
 }
 else
 {
   return true;
 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T17:55:47.203

```
document.getElementById("fname"); 
```

只有当你有一个 ID 为 的元素时，这才有效`fname`，而你没有。

您可以将 ID 属性设置为如下元素：

```
<input type="text" name="fname" id="fname"> 
```

或者，您可以像这样引用表单元素：

```
var fname = document.forms["myForm"]["fname"] 
```

然后你想`value`在比较时得到它的属性。

```
fname.value 
```

* * *

标签是自动关闭的`<br>`，所以它应该`<br />`代替`</br>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T18:19:37.773

这是解决方案...

```
function validateForm(form) {
    var fname = form.fname,
        lname = form.lname,
        pass1 = form.pass1,
        pass2 = form.pass2,
        email = form.email;

    if(fname && fname.value === "") {
        alert("Please enter first name");
        document.getElementById('result').innerHTML = 'Invalid';
        return false;
    }
    document.getElementById('result').innerHTML = 'Passed';
    return true;
}
```

```
<form id="myForm" action="" onsubmit="validateForm(this)">
    First name: <input type="text" name="fname"><br/>
    Last name: <input type="text" name="lname"><br/>
    Password: <input type="password" name="pass1"><br/>
    Re-enter password: <input type="password" name="pass2"><br/>
    Email: <input type="text" name="email"><br/>
    Phone: <input type="text" name="phone"><br/>
    Address: <input type="text" name="add"><br/>
    Date: <input type="date" name="date"><br/>
    Time: <input type="time" name="time"><br/>
    <input type="reset" name="reset">
    <input type="submit" name="submit">
  <p id="result">
  </p>
</form>
```

我在这里纠正了一些问题。

1.  我将所有`var`声明更改为使用一个`var`声明。这是一个最佳实践。
2.  在 if 语句中，我添加了对变量的检查`fname`以确保它存在且不为空（防止空引用错误）。
3.  在 if 语句中，您需要检查字段的`value`属性，而不是字段本身。在您的旧代码中，如果它是空白的，那么该字段应该在那里并且总是返回true。
4.  我将比较更改为使用`===`而不是`==`. 使用时`==`，如果值为“false”或0，则返回true。请参阅“ [JavaScript 中 == 和 === 之间的区别](https://stackoverflow.com/questions/523643/difference-between-and-in-javascript)”。
5.  您在语句末尾缺少一个分号`alert`。
6.  如果主体`if`以 a 结尾，`return`则不需要`else`块。减少代码量（下载速度更快）并使其更易于阅读。

# ms-access - 访问查询：显示第一条记录

> ID：12663567
> 
> 赞同：0
> 
> 时间：2012-09-30T17:53:45.467
> 
> 标签：ms-access

我有一张这样的桌子：

```
name1      | name2  | value1
-------------------------
Apple      | asdg   | 100
Apple      | ghf    |  50
Lemon      | dhjhgf |  60
Meat       | iop    | 300
Meat       | pdjs   |  70
Meat       | ncm    |  10
Strawberry | jdksa  |  20 
```

我应该怎么做才能得到这个：

```
name1      | name2  | value1
----------------------------
Apple      | asdg   | 100
Lemon      | dhjhgf |  60
Meat       | iop    | 300
Strawberry | jdksa  |  20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:46:33.377

Access实际上`First`在查询中具有功能，这很容易：

`SELECT name1, First(name2) AS name2, First(value1) AS value1 FROM TheFruitTable GROUP BY name1`

# scala - scala中的while循环

> ID：12663570
> 
> 赞同：0
> 
> 时间：2012-09-30T17:54:03.397
> 
> 标签：scala, while-loop

我有一个数组，它在索引 0 到 9 处存储整数值。我通过以下方式选择一个随机数：

```
val r = new scala.util.Random
var a=r.nextInt(10) 
```

现在，如果`a`数组中索引处的值为 10，我们需要选择另一个随机数。所以当`arr[random number generated]`是 10 时，我们继续生成随机数，因为我们想要一个这样的数字`arr[random nnumber]!=10`

因此，当我将代码编写为：

```
while(arr2(a)==10) 
   a=r.nextInt(10) 
```

它进入了一个无限循环。但是，如果我将代码编写为：

```
if(arr2(a)==10) 
   while(arr2(a)==10)
     a=r.nextInt(10) 
```

它工作得很好。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:16:21.217

对于您的情况，代码片段下面的一行可能会很有用：

```
util.Random.shuffle(arr.zipWithIndex).find(_._1 != 10) 
```

返回

```
Option[(Int, Int)] // (value, index) where value non 10 
```

下面的代码对我有用：

```
scala> val arr = 1 :: List.fill(9)(10)
arr: List[Int] = List(1, 10, 10, 10, 10, 10, 10, 10, 10, 10)

scala> var idx = util.Random.nextInt(10)
idx: Int = 9

scala> while(arr(idx) == 10) {
     | idx = util.Random.nextInt(10)
     | }

scala> idx
res1: Int = 0 
```

# python - mongoengine中的参考字段

> ID：12663575
> 
> 赞同：3
> 
> 时间：2012-09-30T17:54:32.087
> 
> 标签：python, django, mongoengine

我将 mongoengine 与 django 一起使用。我有两个带有模型的应用程序。

`app1/models.py`：

```
from mongoengine import fields
from mongoengine.document import Document

class Model1(Document):
    name = fields.StringField()
    lists = fields.ListField(fields.ReferenceField("Model2", dbref=False)) 
```

`app2/models.py`：

```
from mongoengine import fields
from mongoengine.document import Document

class Model2(Document):
    name = fields.StringField() 
```

所有应用程序都添加到`INSTALLED_APPS`. 当我使用 django dev-server 时，一切都很好。但是将此代码与 uwsgi-server 一起使用会出现错误：

```
Model2 has not been registered in the document registry.
Importing the document class automatically registers it, has it
been imported? 
```

我该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:07:03.823

`app2.models`您应该在某处导入。通过导入发表评论，说明它为什么存在，因此将来没有人删除看起来无用的导入。

当 django 开发服务器启动时，它会从所有已安装的应用程序中导入模型并验证它们。你会看到的

```
Validating models... 
0 errors found 
```

这不会发生在生产环境中。这只是开发服务器的一个优点。

# javascript - 防止 body 元素的滚动反弹，但在 iOS 中为子元素保留它

> ID：12663576
> 
> 赞同：48
> 
> 时间：2012-09-30T17:54:36.417
> 
> 标签：javascript, ios, css, web-applications, iphone-web-app

我最近一直在开发移动网络应用程序。我正在优化移动优先，现在专门针对 iPhone 的 iOS。我不想要原生应用的精确外观，但我认为原生的*感觉*是绝对重要的。我制作了标记和 CSS 来反映这个想法，给我留下了这个（注释以更好地理解我稍后遇到的问题）：

![Web 应用程序标记](../Images/68576c19e8ba464ab3ea473846605893.png)

这一切都没有问题，而且它还具有原生感觉、静态页眉和页脚以及可滚动的内部视图的优点（感谢`-webkit-overflow-scrolling: touch`）。

任何使用 iOS 超过 5 分钟的人都会知道，当您向上或向下滚动时，您会获得一些不错的滚动动力。此外，当您点击列表顶部时，您会获得很好的“反弹”效果：

![Settings.app 中的列表弹跳](../Images/d0bb38bef08838859fd3fe7574aabe44.png)

我觉得这有助于定义 iOS 的感觉，这样一个小细节可以大有帮助。幸运的是，当您在 web 应用程序的可滚动元素中位于列表顶部下方并滚动超过顶部时，您将获得相同的效果。这是**期望**的行为：

![在 web 应用程序中向下和向上滚动会产生这种弹跳效果](../Images/c75e140b9dd6169538ce6244a2fbc4b6.png)

但是，当您位于列表顶部并尝试在列表顶部重新创建相同的弹跳行为时（à la Setting.app，如上所示），我们会得到以下行为，这是**不希望**的： ![向下滚动会为应用程序的整个 chrome 产生弹跳效果](../Images/4c724d4da7474dced9e77a8a052a40c7.png)

我在 Stack Overflow 上看到过一些[类似的](https://stackoverflow.com/questions/9108599/disabling-ios-elastic-body-scroll-keep-native-scrolling-working) [问题](https://stackoverflow.com/questions/9669670/how-to-disable-vertical-bounce-scroll-on-iphone-in-a-mobile-web-application)，但这些都选择禁用弹跳。我想知道是否有可能**继续弹跳，但总是让它发生在`body section section#main`，而不是 webapp 的 chrome 上**。我没有使用 jQuery，所以我更喜欢直接使用 JavaScript 的答案（不过，CSS 解决方案的加分项）。

这是包含所有代码（Sinatra 、[HAML](https://github.com/kylewlacy/planner/tree/so)和 Sass；当前[分支](http://jsfiddle.net/kylewlacy/gFpQr/)是`so`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-08T10:46:51.477

**旧信息：**我已经解决了这个问题：[http ://www.hakoniemi.net/labs/scrollingOffset/nonbounce.html](http://www.hakoniemi.net/labs/scrollingOffset/nonbounce.html)

**新信息：**现在这是一个 jQuery 插件，可以从这里找到：[http](http://www.hakoniemi.net/labs/nonbounce/) ://www.hakoniemi.net/labs/nonbounce/ 。

**有几个问题**，例如应用此功能时失去缩放功能或动态更新无法流畅运行。

但现在最简单的方法是定义：`<div class="nonbounce">...</div>`然后`$.nonbounce();`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T17:35:21.213

我遇到了同样的问题并想出了这个解决方案：

[http://demo.josefkjaergaard.com/stackoverflow/element_scroll/index.html](http://demo.josefkjaergaard.com/stackoverflow/element_scroll/index.html)

基本上我防止滚动内容处于其最大位置。这可以防止激活正文滚动。

它有效，但它确实在缓动结束时产生了一点点。通过更多的工作，这种行为可能会通过向相反方向偏移内容来隐藏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T17:13:01.713

以下是我在该主题上找到的一些有用资源：

*   [https://github.com/joelambert/ScrollFix](https://github.com/joelambert/ScrollFix)
*   [http://apdevblog.com/optimizing-webkit-overflow-scrolling/](http://apdevblog.com/optimizing-webkit-overflow-scrolling/)
*   [http://www.hakoniemi.net/labs/nonbounce/](http://www.hakoniemi.net/labs/nonbounce/)
*   [http://www.kylejlarson.com/blog/2011/fixed-elements-and-scrolling-divs-in-ios-5/](http://www.kylejlarson.com/blog/2011/fixed-elements-and-scrolling-divs-in-ios-5/)
*   [http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T08:10:02.257

这个伪代码怎么样：

```
document.body.addEventListener("ontouchstart", function(event) {
  if(document.getElementById("main").scrollTop > 0) return;
  event.preventDefault();
  event.stopPropagation();
}, false); 
```

# objective-c - 无法在 iOS 中实现简单的视图滚动

> ID：12663577
> 
> 赞同：2
> 
> 时间：2012-09-30T17:54:37.937
> 
> 标签：objective-c, ios, ios5, uiview, uiscrollview

我很难在我的详细视图上实现简单的滚动。

该应用程序很简单，带有主视图和详细视图。

当用户在 Master 上点击一个项目时，会推送 Detail 视图，其中包含更大的照片、博客文本等。

我想滚动**整个**细节视图，所以如果图片很高，或者文本很长，他们可以垂直滚动以查看/阅读更多内容。我不希望用户单独滚动这些项目。它应该感觉像网页滚动。

目前我的细节视图加载正常，但我不能让它滚动。

我的**DetailViewController.h**

```
 #import <UIKit/UIKit.h>

    @interface DetailViewController : UIViewController {
        IBOutlet UILabel     *postTextLabel; // wired to Text Label
        IBOutlet UILabel     *postAuthorNameLabel; // wired to Author Label
    }

    @property (strong, nonatomic) id detailItem;
    @end 
```

我的**DetailViewController.m**

```
#import "DetailViewController.h"

@interface DetailViewController ()
- (void)configureView;
@end

@implementation DetailViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self configureView];
}

- (void)configureView
{
    if (self.detailItem) {
        NSDictionary *post           = self.detailItem;
        NSString     *postText       = [post objectForKey:@"post_text"];
        NSString     *postAuthorName = [post objectForKey:@"post_author_name"];

        postTextLabel.text       = postText;
        postAuthorNameLabel.text = postAuthorName;
    }
}
@end 
```

IB的结构：

![在此处输入图像描述](../Images/4ee9299caf66b83152db2cc8ef7d5dba.png)

关于使这项工作缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:38:07.837

我会做以下事情：

1）（可选）通过将您的视图拖到侧面scruture列表中的视图中，将其转换为滚动视图。

2）将scrollView链接到您的viewcontroller .h并建立一个类似这样的Outlet连接

```
@property (strong, nonatomic) IBOutlet UIScrollView *scroller; 
```

（如果手动添加，请确保在 .m 中添加 @synthesize）并确保它已在 IB 中连接！

3)在viewDidLoad方法中设置scrollview的contentsize

```
scroller.contentSize =  CGSizeMake(320,550); 
```

注意：IBOutlet UILabel *postTextLabel; 实际上应该可能是 UITextView 所以你可以访问 ContentSize 这将允许以下内容。

```
CGRect frame = postTextLabel.frame;
frame.size = postTextLabel.contentSize;
postTextLabel.frame = frame;
scroller.contentSize = CGSizeMake(320, frame.size.height+200);//200 or how ever much space is above the textView 
```

并且只有当你使用 UITextView 时才有效

对于 ipad，将 320 替换为 768 或 1024，或者取决于方向

在 IB 中连接它的最佳方法是按住控件并拖动到 .h 文件，并确保它设置为如图所示的自动，并指向>视图的 .h。像这样添加它也会自动为您添加@synthesize。

![在此处输入图像描述](../Images/92096fe49e5066b61d70a7ebb541e37f.png)

![在此处输入图像描述](../Images/0189ca580a83580efa68f8d494ef56a5.png)

确保在此处为我们的滚动视图选中 UserInteractionsEnabled

# tags - Coda 2 显示匹配的开始/结束标签？

> ID：12663581
> 
> 赞同：3
> 
> 时间：2012-09-30T17:54:58.720
> 
> 标签：tags, text-editor, coda

我想知道 Coda 2 中有没有办法在它的行上显示开始/结束标签？

例如，如果我在包含 <div> 的行上

有没有办法让 Coda 突出显示哪个是 </div>？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T07:27:01.037

这是最新版本[https://github.com/emmetio/Emmet.codaplugin](https://github.com/emmetio/Emmet.codaplugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:27:01.470

如果你安装了 TEA 插件，你可以使用 control-b 来匹配元素。它将整个选择突出显示到结束标记。

[http://onecrayon.com/tea/coda/](http://onecrayon.com/tea/coda/)

在 Coda 2 中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T21:31:08.820

~/Library/Applications/Support/Coda 2/Plug-ins/ 运行后不起作用。

没有这样的文件或目录

# android - Android框架的结构与MFC/Win32的结构比较？

> ID：12663585
> 
> 赞同：4
> 
> 时间：2012-09-30T17:55:08.680
> 
> 标签：android, windows, frameworks

我为 Android 和 Windows 开发（使用 MFC，有时使用 win32），昨天我随便比较了这两个框架。它们显然非常非常不同，因此为 Windows 开发与为 Android 开发有很大不同。我想知道人们在哪里认为像 Android 这样的框架在结构上优于 win32 等框架（例如消息系统与事件监听器）。我想对这种比较的一般意见有所了解。

我想补充一点，我知道这些框架在非常不同的设备上运行（显然 Windows 必须处理更多的 IO 和用户输入，因为它必须处理多个输出设备及其复杂的窗口 GUI），但是那里必须是这些框架共享的一些核心功能并且可以进行比较..如果没有，我就是个白痴（毫无疑问有人会指出）我很想知道为什么这样的比较是无效的:)干杯。

另一个例子是 Android 缺乏 MVP 结构与 Windows 的 MFC Doc/View。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:00:15.280

自从我接触 mfc 以来已经有很长时间了，但我认为您可以将意图模型与消息传递模型进行比较？

关于 MVC，我们已经决定通过使用单个活动作为窗口管理器来实现这一点，片段是视图，控制器是直接的 Java 类。我认为 MVP 可以同样对作为演示者的活动感到满意。可能使用广播接收器作为前端控制器。

# c# - 如何将ID设置为实体框架中的对象对应

> ID：12663586
> 
> 赞同：3
> 
> 时间：2012-09-30T17:55:10.757
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我有`Category`那个可以有`RootCategory`。问题是它没有`RootCategoryID`正确设置，而是`Category_ID`在我什至没有在我的模型中创建的数据库中创建。

顺便说一句，如果我没有`get`在 RootCategory 上进行修改，它会像我期望的那样映射所有内容。但是 then`RootCategory`总是为空（他不知道从哪里得到它）

模型

```
public class Category
{
    public int ID { get; set; }
    // Tried [ForeignKey("RootCategoryID")]
    public Category RootCategory {
        get
        {
            ORDataContext _db = new ORDataContext();
            return _db.Categories.Where(x => x.ID == this.RootCategoryID).SingleOrDefault();
        }
    }
    public int? RootCategoryID { get; set; } // This does not set itself properly

    public ICollection<Category> ChildCategories { get; set; }
} 
```

生成数据库后`update-database`

```
-ID
-RootCategoryID (that I have created, but it's not used)
-Category_ID (taht EF created for me, that I don't want) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T18:40:04.573

您不需要`RootCategory`像您一样手动加载 nav 属性，EF 会自动完成。但是，EF 无法推断出您想要的内容，您应该使用数据注释显式映射它：

```
 public class Category
   {
      public int ID { get; set; }

      public virtual Category RootCategory { get; set; }
      [ForeignKey("RootCategory")]
      public int? RootCategoryID { get; set; } // This does not set itself properly

      public virtual ICollection<Category> ChildCategories { get; set; }    

   } 
```

或通过流利的：

```
 protected override void OnModelCreating( DbModelBuilder modelBuilder )
  {
     modelBuilder.Entity<Category>()
        .HasMany( c => c.ChildCategories )
        .WithOptional( ca => ca.RootCategory )
        .HasForeignKey( c => c.RootCategoryID );
  } 
```

你所有的属性/收藏都应该可以工作。

# ruby-on-rails - has_secure_password 在密码更新验证内部验证

> ID：12663593
> 
> 赞同：0
> 
> 时间：2012-09-30T17:55:46.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, mongoid, ruby-on-rails-3.2

我在用户模型中使用 has_secure_password 。我已经实现了一种让用户在模型之外更改密码的方法，但是为了保持干燥，我正在尝试将所需的验证从控制器移动到模型。

用户模型看起来像这样：

```
class User
  include Mongoid::Document
  include ActiveModel::SecurePassword

  has_secure_password

  field: :password_digest, type: String

  attr_accessible :password, :password_confirmation, :current_password
end 
```

用户通过提交以下内容更改密码：

```
user[current_password] - Currently stored password
user[password] - New password
user[password_confirmation] - New password confirmation 
```

我在当前用户的用户模型上使用 update_attributes(params[:user]) 。我的问题是在使用验证之前调用 update_attributes 会更新 password_digest，因此以下代码将不起作用：

```
def password_validation_required?
  password_digest.blank? || !password.blank? || !password_confirmation.blank?
end

validate(on: :update, if: :password_validation_required?) do
  unless authenticate(current_password)
    add(:current_password, 'invalid password')
  end
end 
```

authenticate 是基于从 user[password] 生成的新 password_digest 进行身份验证。是否有一种优雅的方式来访问旧的 password_digest 值以进行身份​​验证？我的一个想法是重新查询用户以获得对另一种身份验证方法的访问权限，该方法将根据旧的 password_digest 值进行身份验证。问题是它不是一个干净的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:37:11.933

我认为这个比@Parazuce 的干净一点：

```
 validate :validates_current_password

  private

  def validates_current_password
    return if password_digest_was.nil? || !password_digest_changed?
    unless BCrypt::Password.new(password_digest_was) == current_password
      errors.add(:current_password, "is incorrect")
    end
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:44:00.907

password_digest 字段有与之关联的 ActiveModel::Dirty 方法，所以我决定使用：

```
validate(on: :update, if: :password_validation_required?) do
  unless BCrypt::Password.new(password_digest_was) == current_password
    errors.add(:current_password, "is incorrect")
  end
end 
```

这可以防止使用其他逻辑覆盖的需要，`password=`如果使用其他功能，将来可能会引入错误`password=`。

# ruby-on-rails - 设计认证 - 自定义用户编辑

> ID：12663600
> 
> 赞同：2
> 
> 时间：2012-09-30T17:56:12.863
> 
> 标签：ruby-on-rails, devise

路线.rb：

```
devise_for :users, :controllers => {
  :registrations => 'users',
  :sessions => 'sessions',
  :confirmations => 'confirmations',
  :passwords => 'passwords'
} 
```

“编辑”操作的视图：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
<%= resource.inspect %> 
```

resource.inspect 将所有用户的字段显示为 nil。

控制器：

```
def edit
  resource = params[:id].nil? ? current_user : User.find_by_id(params[:id])
end 
```

放什么而不是“资源=”来使这件事起作用？我希望视图保留默认的“resource”和“resource_name”变量。

**重要提示：我宁愿保留编辑方法的默认行为，而不覆盖它，也不为它编写自己的代码。**

# javascript - Jquery模糊文本并在焦点上为空

> ID：12663601
> 
> 赞同：0
> 
> 时间：2012-09-30T17:56:14.083
> 
> 标签：javascript, jquery

我有多个这样的文本框。我想在获得焦点时将文本应用于模糊和空白。我可以为单个文本框实现这一点。如何传递当前元素 id 而不是在 JavaScript 函数中硬编码“#name”值？

```
$(document).ready(function(){

    $('#Name').focus(function()
    {
         var $ele = $(this).attr('id');
            $(this).val('');
            $(this).css('color', '#000000');
    });

    $('#Name').blur(function()
    {
           var $ele = $(this).attr('id');
            $(this).val($ele);
            $(this).css('color', '#a9a9a9')
    });
});

<input id="Name" type="text" value="" name="Name">
<input id="Phone" type="text" value="" name="Phone" >
<input id="Email" type="text" value="" name="Email"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:59:44.733

您可以选择所有输入，您可以使用;`$('input')`放置过滤器文本输入 `[type="text"]`您可以利用 jQuery 链接。

```
$(document).ready(function(){   

    $('input[type="text"]').focus(function()
    {
         var $ele = $(this).attr('id');
            $(this).val('');
            $(this).css('color', '#000000');
    }).blur(function()
    {
           var $ele = $(this).attr('id');
            $(this).val($ele);
            $(this).css('color', '#a9a9a9')
    });
}); 
```

您可以直接在html中设置输入字段的值

```
<input id="Name" type="text" value="Name" name="Name"> 
```

或在页面加载时应用默认值：

```
$('input[type="text"]').each(function(){
   var $ele = $(this).attr('id');
                $(this).val($ele);
                $(this).css('color', '#a9a9a9')

}); 
```

HTML

```
<input id="Name" type="text" value="" name="Name">
<input id="Phone" type="text" value="" name="Phone" >
<input id="Email" type="text" value="" name="Email"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:05:39.020

你需要修改你的js

```
$(function(){
    $('input').focus(function()
    {
        $(this)
            .val($(this).attr('name'))
            .css('color', '#000000')

    }).blur(function()
    {
            $(this).css('color', '#a9a9a9')
    });
})();​ 
```

如果您在“模糊”上设置值，您将失去当前值...我不确定这是否正是您想要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T17:59:34.373

将其应用于`input`而不是`#name`.

这将适用于所有输入。

或者给`.class`你想要改变的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T17:59:41.503

您可以使用 选择所有输入`$('input[type="text"]')`，但我认为您只想使用[`placeholder`HTML 属性](http://www.w3schools.com/html5/att_input_placeholder.asp)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T18:01:01.383

查看[jQuery 选择器](http://api.jquery.com/category/selectors/)。您现在正在做的是使用 ID 作为选择器。你有很多不同的选择......

如果您希望将“#Name”应用于页面上的所有输入，您可以将“#Name”替换为“input”，或者您甚至可以将通用类“class =”test”添加到要触发脚本的所有元素中然后将“#Name”替换为“.test”或“input.test”，仅用于具有该类名称的输入元素。

# ruby-on-rails - 将文件上传到 Amazon S3 服务器时数据“吃光”

> ID：12663607
> 
> 赞同：1
> 
> 时间：2012-09-30T17:56:44.603
> 
> 标签：ruby-on-rails, macos, amazon-s3

我正在尝试将 xml 文件上传到 Amazon S3 服务器。我在 ruby​​ 中的代码是这样的：-

```
AWS::S3::S3Object.store("dir/data.xml",
                            "#{xml.target!}",
                            "bucket",
                            :access => :private,
                            :content_type => 'text/xml') 
```

xml 是一个 RSS 提要文件。当我从服务器下载上传的文件时，该文件缺少文件的最后一行。

```
</rss> 
```

删除可选参数 content-type 对输出没有影响。但是，更改数据组件以插入其他字符会使那些丢失的字符正确显示。

```
AWS::S3::S3Object.store("dir/data.xml",
                                "#{xml.target!}         ",
                                "bucket",
                                :access => :private,
                                :content_type => 'text/xml') 
```

即使这解决了我的问题，我还是有点不愿意在生产中使用这段代码。另外，我想知道怎么回事？

事实上，当我在本地机器上写入文件时，它可以正常工作。

```
file = File.new("/path/feed.xml", "w")
    file.write(xml.target!)
    file.close 
```

更新：我在上传 csv 文件时也面临同样的问题。我注意到对于非常大的文件，甚至更多的数据被截断。对于 xml 文件，不仅关闭 rss 标记，而且还缺少一些其他标记。对于 csv 文件也是如此。我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:17:40.330

发送 xml.target！因为数据以某种方式导致了这个问题。为了解决这个问题，我使用 StringIO.new 创建了一个新字符串。

对于 csv，我使用了这样的东西：-

```
 csv_string = StringIO.new(csv_string) 
```

# php - 努力用php显示blob图像

> ID：12663608
> 
> 赞同：0
> 
> 时间：2012-09-30T17:56:47.607
> 
> 标签：php, html, mysql, image, blob

我正在建立一个简单的网站，我想让用户上传和更改他们的头像。目前我已经能够将图片上传到mysql数据库，存储为blob，代码如下：

```
//connected to DB, userID fetched

$image = $FILES['fileToUpload']['tmp_name'];
$fp = fopen($image, 'r');
$content = fread($fp, filesize($image));
$content = addslashes($content);
fclose($fp);

$sql = "UPDATE tbUsers SET profileImage = '".$content."' WHERE userID = ".userID;
$result = mysql_query($sql) or die (mysql_error()); 
```

当我上传后从 phpmyadmin 下载文件时，它们被保存为 .bin 文件，但可以正常查看。我不确定这是否正确。我显示图像的代码如下：

HTML：

```
<?php echo '<img src ="showPic.php?q='.$_SESSION['profile'].'"/>'; ?> 
```

PHP：

```
if (!empty($_GET['profile']) && is_numeric($_GET['profile']))
{
  $con = mysql_connect("localhost", "root", "");
  $mysql_select_db("projectDB");
  $sql = "SELECT profileImage FROM tbUsers WHERE userID = ". $_GET['profile'];
  $result = mysql_query($sql) or die (mysql_error());

  header('Content-type: image/jpeg');
  $row = mysql_fetch_object($result);
  echo $row['image_data'];
} 
```

我不确定我是否试图以正确的方式显示图像，任何帮助（更正/替代解决方案）将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:46:37.913

你可以这样做 ：

```
if (!empty($_GET['profile']) && is_numeric($_GET['profile']))
{
  $con = mysql_connect("localhost", "root", "");
  $mysql_select_db("projectDB");
  $sql = "SELECT profileImage FROM tbUsers WHERE userID = ". $_GET['profile'];
  $result = mysql_query($sql) or die (mysql_error());

  $content = mysql_result($result,0,"file_content");
  $name = mysql_result($result,0,"file_name");
  $type = mysql_result($result,0,"file_type");
  $size = mysql_result($result,0,"file_size");
  header("Content-type: $type");

  echo $content

} 
```

注意：您应该在保存 BLOB 数据的表中有这些列

file_name = 用于保存文件名

```
$_FILES['file']['name'] 
```

file_type = 用于保存文件类型

```
$_FILES['file']['type'] 
```

file_size = 保存文件大小

```
$_FILES['file']['size'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:19:02.190

你选择这个

```
$sql = "SELECT profileImage FROM tbUsers WHERE userID = ". $_GET['profile']; 
```

并参考未选择的列

```
echo $row['image_data']; 
```

# python - 如何在 RedHat 上安装 numpy 和 matploblib？

> ID：12663618
> 
> 赞同：0
> 
> 时间：2012-09-30T17:58:06.497
> 
> 标签：python, linux, numpy, matplotlib

我已经下载了`numpy`tar.gz`matploblib`文件。现在我想在 RedHat 5 上安装它们。

我没有root权限。我已经阅读了 INSTALL 文档，但我不明白如何安装这些文档。

1.  我可以在没有 root 权限的情况下安装这些库吗？
2.  如果是，我该如何安装它们？你能给我确切的命令吗？
3.  这些库不是由 python 模块组成的吗？所以我所要做的就是将这些模块复制到 PYTHONPATH，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T18:01:18.523

1.  是的，只需`--user`在安装包时使用该标志（前提是您有足够新的 Python 版本）

    有关标志的更多信息`--user`可在[文档](http://docs.python.org/install/index.html)中找到。通常，`~/.local`将创建一个目录（如果需要），您的包应该存在于`~/.local/lib/python$VERSION/site-packages`.

2.  在matplotlib*之前*安装 NumPy 。为此，只需输入

    ```
    python setup.py install --user 
    ```

    在您解压缩档案的目录中。对 matplotlib 重复。

    不要忘记阅读 NumPy 的[安装](http://www.scipy.org/Installing_SciPy/Linux)说明（当然还有[matplotlib](http://matplotlib.org/users/installing.html)的安装说明）。如果您有问题，它可能会包含在文档中。

3.  `$PYTHONPATH`完成安装后，只需使用链接更新您的`~/.local/lib/python$VERSION/site-packages`

* * *

如果你有一个不能识别`--user`标志的旧版本的 Python，你应该仍然能够给出带有`--prefix`标志的安装路径。如果您有更新版本的 Python，您可以使用`--prefix=~/.local`它来匹配会发生的情况（请注意，NumPy 安装指南中涵盖了该主题...）。

# php - canvas toDataUrl（）如何将base64结果输入和输出msql blob字段

> ID：12663622
> 
> 赞同：0
> 
> 时间：2012-09-30T17:59:00.007
> 
> 标签：php, mysql, pdo, blob, html5-canvas

我想将画布图像存储到 blob 字段中。

在服务器端，我收到一个 base64 编码的字符串`toDataUrl()`

*   我该怎么做才能将它放入 blob 字段？

*   以及如何在 img 标签中再次显示它？

**我需要使用什么代码？**[mysql页面](http://dev.mysql.com/doc/refman/5.0/en/blob.html)不是很清楚，我用 的是PDOprepared statements。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:10:25.093

如果您*确实*需要将其存储在 blob 数据中，您可以这样做：

对于 PHP >=5.2.0，您可以使用`data://`流包装器从数据 uri 中检索文件：

```
$file_in_blob = file_get_contents("data://".$var_containing_the_data_uri); 
```

where`$var_containing_the_data_uri`应替换为包含数据 URI 的变量，例如`$_POST['image']`. 然后您可以将其插入`$file_in_blob`到数据库中。

当您需要再次在网页中显示时，您可以：

1.  编写一个 PHP 脚本，根据 GET 参数检索 blob 内容，并将其用作`src`图像标记，或者
2.  直接使用从获取的原始数据URI`toDataUrl()`作为`src`图片标签。

如果使用方法 2，实际上不需要将数据 URI 解码为 blob，而是直接存储数据 URI。（当然您可能会担心数据大小......）

* * *

方法一示例：

您的 HTML：

```
<img src="img_from_db.php?img=1" /> 
```

你的`img_from_db.php`：

```
<?php
header('Content-Type: image/png'); // make the browser recognize it as PNG
echo get_image_blob_from_db($_GET['img']); // you may wish to add some checks 
```

* * *

方法2示例：

```
<img src="<?=get_image_dataURI()?>" /> 
```

# clojure - 为什么不能在 Clojure REPL 中更改 clojure.repl/print-doc 绑定？

> ID：12663624
> 
> 赞同：2
> 
> 时间：2012-09-30T17:59:14.027
> 
> 标签：clojure, read-eval-print-loop

这按预期工作：

```
java -jar clojure-1.4.0.jar -e "(do (require 'clojure.repl) (.setDynamic #'clojure.repl/print-doc) (with-bindings {#'clojure.repl/print-doc str} (eval '(clojure.repl/doc println))))" 
```

输出：

```
"{:ns #<Namespace clojure.core>, :name println, :arglists ([& more]), :added \"1.0\", :static true, :doc \"Same as print followed by (newline)\", :line 3325, :file \"clojure/core.clj\"}" 
```

但是这在 REPL 中不起作用：

```
java -jar clojure-1.4.0.jar -e "(do (require 'clojure.repl) (.setDynamic #'clojure.repl/print-doc) (clojure.main/repl :init (fn [] {#'clojure.repl/print-doc str}))))" 
```

输出`(doc println)`：

```
user=> (doc println)
-------------------------
clojure.core/println
([& more])
  Same as print followed by (newline)
nil
user=> 
```

我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:35:07.597

深入逆时针和nrepl代码后找到答案：

```
java -jar clojure-1.4.0.jar -e "(do (require 'clojure.repl) (.setDynamic #'clojure.repl/print-doc) (with-bindings {#'clojure.repl/print-doc str} (clojure.main/repl)))))" 
```

输出与上面相同：

```
"{:ns #<Namespace clojure.core>, :name println, :arglists ([& more]), :added \"1.0\", :static true, :doc \"Same as print followed by (newline)\", :line 3325, :file \"clojure/core.clj\"}" 
```

诀窍是`with-bindings`在调用之前使用`repl`：

```
(with-bindings {#'clojure.repl/print-doc str}
  (repl)) 
```

# eclipse - 如何将现有的游戏框架导出到 Heroku？

> ID：12663626
> 
> 赞同：0
> 
> 时间：2012-09-30T17:59:20.067
> 
> 标签：eclipse, heroku, playframework

我一直在阅读并关注：[http](http://eclipse-plugin.herokuapp.com/) ://eclipse-plugin.herokuapp.com/ 将我现有的播放应用程序导出到 Heroku。

运行**heroku create**时，我的终端中的**git push heroku master**一切都像魅力一样工作，我的项目已创建，我可以在以下位置浏览它：xxx.herokuapp.com。但是当我进入 Eclipse 时，该项目并没有被 Heroku “挂钩”。例如，我无法**推送到上游**

如果我采用另一种方式并使用 Eclipse 导入 Heroku 项目，则会下载该项目并将其“连接”到 Heruko，但随后该项目位于我的 git 存储库而不是工作区中。

所以我的问题是：如何将位于工作区中的项目连接到 Heroku，以便将其视为 Eclipse Heroku 应用程序？

**编辑：**

没有股票期权：

![在此处输入图像描述](../Images/624b9f662e75b143df1c384476acd93f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:53:11.880

要设置项目以便您可以从 Eclipse 执行 Git 操作，您需要执行以下操作：

1.  右键单击项目中的`Project Explorer`并选择`Team`
2.  选择`Share Project...`
3.  选择`Git`然后`Next`
4.  保留默认值并选择`Finish`

要将应用程序上传到 Heroku，请执行以下操作（在将更改提交到 Git 存储库之后）：

1.  右键单击项目中的`Project Explorer`并选择`Team`
2.  转到`Remote`子菜单并选择`Push...`
3.  保留默认值（应选择 Heroku Remote Git repo）并选择`Finish`

# jquery - jquery检查类if语句不起作用

> ID：12663628
> 
> 赞同：0
> 
> 时间：2012-09-30T17:59:30.457
> 
> 标签：jquery

我想在我的缩放函数中添加一个简单的 if 语句，以检查类“.pic”

但它似乎不起作用（如果我删除 if 语句部分它确实可以正常工作，但是页面上的每个元素在单击时都会缩放）

```
$(document).ready(function(){

$(this).click(function(event){
    var myTarget = event.target;
    if (myTarget.is('.pic') {
        $(myTarget).animate({ 
        width: "75%"
        }, 650 );
    }

}); 
```

});

编辑：因为我仍然坚持这个，所以在下面的答案之后，这里有一些 html，也许这就是问题所在？

```
<div class=myImages id=group001>
<img class=pic id=img001 src="../images/img001.jpg">
<div class=text id=des001>
mobile sequence 
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:06:36.397

myTarget 需要是一个 jQuery 对象，而不仅仅是一个 DOM 引用：

```
$(this).click(function(event){
    var myTarget = $(event.target);
    if (myTarget.hasClass('pic') {
        myTarget.animate({width: "75%"}, 650 );
    }

}); 
```

我还建议使用`.hasClass()`而不是`.is()`这个特定的测试，因为它可能更有效。

# c - 在 C 中测量缓存大小

> ID：12663629
> 
> 赞同：2
> 
> 时间：2012-09-30T17:59:31.253
> 
> 标签：c, caching

我有一个功能如下：

```
int doSomething(long numLoop,long arraySize){
    int * buffer;
    buffer = (int*) malloc (arraySize * sizeof(int));
    long k;
int i;

    for (i=0;i<arraySize;i++)           
    buffer[i]=2;//write to make sure memory is allocated
    //start reading from cache
    for(k=0;k<numLoop;k++){
        int i;
        int temp
        for (i=0;i<arraySize;i++)           
        temp = buffer[i];
    }
} 
```

它所做的是声明一个数组并从头到尾读取。目的是看缓存的效果。我期望看到的是：当我调用 doSomething(10000,1000) 时，arraySize 很小，所以它都存储在缓存中。之后我调用 doSomething(100,100000)，arraySize 比缓存大。因此，第二个函数调用应该比第一个函数调用花费更长的时间。后一个函数调用涉及一些内存访问，因为整个数组不能存储在缓存中。但是，似乎第二次手术与第一次手术所花费的时间大致相同。那么这里有什么问题呢？我尝试使用 -O0 进行编译，但并没有解决问题。谢谢你。

更新 1：这些是随机访问的代码，它似乎可以工作，大数组的访问时间约为 15 秒，而小数组的访问时间约为 3 秒

```
int doSomething(long numLoop,int a, long arraySize){
    int * buffer;
    buffer = (int*) malloc (arraySize * sizeof(int));
    long k;
    int i;

    for (i=0;i<arraySize;i++)           
        buffer[i]=2;//write to make sure memory is allocated
    //start reading from cache
    for(k=0;k<numLoop;k++){
        int temp;
            for (i=0;i<arraySize;i++){
                long randnum = rand();//max is 32767
                randnum = (randnum <<16) | rand();
                if (randnum < 0) randnum = -randnum;
                randnum%=arraySize;
                temp = buffer[randnum];
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:03:22.507

您正在按顺序访问数组，

```
for (i=0;i<arraySize;i++)           
    temp = buffer[i]; 
```

因此您正在访问的部分将始终在缓存中，因为该模式很难预测。要查看缓存效果，您必须以不太可预测的顺序访问数组，例如通过生成（伪）随机索引，以便在数组的前部和后部之间跳转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:07:47.847

除了其他答案：您的代码按顺序访问内存。假设高速缓存行是 32 字节。这意味着您*可能*会在每 8 次访问时获得一次缓存未命中。因此，选择一个随机索引，您应该使其与前一个值相距至少 32 个字节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T18:04:55.717

为了测量多个调用的效果，您必须使用相同的缓冲区（期望第一次加载缓存，下次使用它）。在您的情况下，您为每个调用分配一个新缓冲区。（此外，您永远不会释放您的分配。）

# heroku - 如何隐藏我不允许访问的数据库

> ID：12663639
> 
> 赞同：191
> 
> 时间：2012-09-30T18:00:25.153
> 
> 标签：heroku, pgadmin

当我通过 连接到我的`Heroku`-`Postgresql`数据库时`pgAdmin3`，它列出了所有表（大约 2600 个）。每次打开 pgAdmin3 时，我都必须找到自己的数据库。

有没有办法隐藏我`not allowed`要访问的数据库？

* * *

## 回答 #1

> 赞同：417
> 
> 时间：2012-11-08T22:16:55.627

有同样的问题，因为它在 AWS 上与 1000 个其他数据库共享空间。

**pgAdmin 3**

1.  确保您已与服务器断开连接。
2.  右键单击您的服务器 -> 属性 -> 高级选项卡。
3.  在“DB 限制”中，键入用**单*引号*括起来并用空格分隔的**数据库名称。例如 `'dback447'`

**pgAdmin 4**

与上面相同，但在第 3 步中不要使用引号，只使用普通的 DB 名称。例如`dback447`

**pgAdmin 4 版本 6.1**

同上，但`Tab`在输入每个数据库的名称后按。逗号或空格将您的字符串作为单个数据库的名称。

`Tab`即使您只想输入一个数据库名称，您也必须按下，否则该`Save`按钮将忽略您的更改。

[![在此处输入图像描述](../Images/aafa41d498f47030a0531b723d41621b.png)](https://i.stack.imgur.com/IZPdP.png)

[![在此处输入图像描述](../Images/4ff9a7ecab307218b71d5971eaad86e1.png)](https://i.stack.imgur.com/VO3B5.png)

[![在此处输入图像描述](../Images/008cc05b8b94408658b51ba43311eaf3.png)](https://i.stack.imgur.com/DTQg5.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-12-05T18:24:07.963

pgAdmin 4 不包含“数据库限制”，这是我不使用它的唯一原因，迫使我选择使用 pgAdmin 3。

在 pgAdmin 4 中打开了一张票以添加此功能 ... [https://redmine.postgresql.org/issues/1918](https://redmine.postgresql.org/issues/1918)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-10-18T22:14:51.910

最新版本的 pgAdmin 4 (2.0) 在服务器连接属性的“高级”选项卡中也具有 DB 限制属性，与 pgAdmin 3 中的非常相似。不需要引号。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-04-01T12:11:03.210

我只有 10 个其他数据库有同样的问题，马特史蒂文斯的回答只是部分有帮助，即起初它有帮助，然后我可以访问同一服务器上的另一个数据库。

我按照描述做了所有事情，它根本没有安装任何数据库。在“数据库限制”中，您输入用**单引号括起来并用逗号分隔**的数据库名称。例如“db1” **、** “db2”。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-05-16T20:56:54.103

不要在 pgAdmin 4.5 中用单引号括起来，否则它将不起作用。

# java - 需要帮助创建 swing gui，当我设置框架选项 (Java) 时 Eclipse 返回错误

> ID：12663641
> 
> 赞同：1
> 
> 时间：2012-09-30T18:00:32.437
> 
> 标签：java, swing, user-interface, frame

我有一个应用程序可以处理用 Java 编写的极坐标。我必须为它创建一个 GUI，我决定尝试使用 swing 组件而不是这个名为 BreezyGUI 的 JAR。我遇到的问题是我无法在没有错误的情况下设置框架选项。创建框架、标签和文本字段后，如何开始设计界面？任何建议都会真正帮助我，谢谢！

我在 Eclipse 中收到的错误并不具体。它只是将它突出显示为红色，就像它是一个直接的错过类型。

这是我的应用程序：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.text.*;

public class PolarCoords extends JFrame
{

    JFrame frameWin = new JFrame();
    frameWin.setBounds(100, 200, 120, 120);
    frameWin.setTitle("Polar Coordinates");
    frameWin.setVisible(true);
    frameWin.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

    private JLabel rLabel;
    private JLabel thetaLabel;
    private JLabel r2Label;
    private JLabel theta2Label;
    private JLabel answerLabel;

    private static String rString = "R Coordinate";
    private static String thetaString = "Theta";
    private static String r2String = "R2 Coordinate";
    private static String theta2String = "Theta2";
    private static String answerString = "Answer";

    private JFormattedTextField rField;
    private JFormattedTextField thetaField;
    private JFormattedTextField r2Field;
    private JFormattedTextField theta2Field;
    private JFormattedTextField answerField;

    public PolarCoords(double rCoord, double theta)
    {
        return;
    }

    /**
     * Returns theta in (r, theta)
     * @param tTheta
     * @return
     */
    public double tTheta(double theta)
    {
        return theta;
    }

    /**
     * Returns r coordinate in (r, theta)
     * @param rCoord
     * @return
     */
    public double rRCoord(double rCoord)
    {
        return rCoord;
    }

    public Object magnitude()
    {   
        double r1 = Double.valueOf(rField.getText());
        double theta1 = Double.valueOf(thetaField.getText());
        double r2 = 0;
        double theta2 = 0;
        double distance = Math.sqrt(Math.pow(r1, 2)) + Math.sqrt(Math.pow(r2, 2) - 2*(r1*r2) * Math.cos(theta1 - theta2));
        return distance;
    }

    public Double angleFromOrigin()
    {
        double theta1 = Double.valueOf(thetaField.getText());
        double theta2 = Double.valueOf(theta2Field.getText());
        double answer = theta2 - theta;
        return answer;
    }

    public Object distanceFromPoint()
    {
        // Distance formula Ã(r1)^2 + (r2)^2 - 2(r1)(r2) cos ( degree1 - degree2 )
        double r1 = Double.valueOf(rField.getText());
        double theta1 = Double.valueOf(thetaField.getText());
        double r2 = Double.valueOf(r2Field.getText());
        double theta2 = Double.valueOf(theta2Field.getText());
        double distance = Math.sqrt(Math.pow(r1, 2)) + Math.sqrt(Math.pow(r2, 2) - 2*(r1*r2) * Math.cos(theta1 - theta2));
        return distance;
    }

    public PolarCoords addPoints()
    {
        double r1 = Double.valueOf(rField.getText());
        double theta1 = Double.valueOf(thetaField.getText());
        double r2 = Double.valueOf(r2Field.getText());
        double theta2 = Double.valueOf(theta2Field.getText());
        double x = r1 * Math.cos(theta1);
        double y = r1 * Math.sin(theta1);
        double x2 = r2 * Math.cos(theta1);
        double y2 = r2 * Math.sin(theta2);

        double xAnswer = x2 - x;
        double yAnswer = y2 - y;
        double answer = Math.atan2(xAnswer, yAnswer);
        PolarCoords polarAnswer = new PolarCoords(xAnswer, yAnswer);
        return polarAnswer;
    }

    public static void main(String[] args)
    {
        Frame f = new Frame();
        System.out.print("Visible = True");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:08:42.100

为什么被`frameWin`注释掉了，你还在后面的行中使用？？？你的意思是使用`this`？该部分应该在您的构造函数中。

此外，`setvisible`应该是在将所有组件添加到框架之后的最后一件事。

尝试：

```
public PolarCoords(double rCoord, double theta) //u'r not even using rCoord and theta
{
    this.setBounds(100, 200, 120, 120);
    this.setTitle("Polar Coordinates");
    this.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    this.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T18:07:26.390

您试图将 Java 语句赤裸裸地放在类中，在构造函数或方法之外，这是行不通的。考虑将这些语句放在您的构造函数中。更重要的是，在尝试进行 Swing GUI 编码之前，您应该了解 Java 教程的介绍。

此外，您忽略了代表您的`this`对象的 JFrame 并试图创建一个完全不相关的 JFrame 对象。不要那样做。摆脱 frameWin 变量，因为它只会误导你。

再次阅读 Java 的基础知识，因为这将极大地帮助您。

请查看[Java 教程真正的大索引](http://docs.oracle.com/javase/tutorial/reallybigindex.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T18:07:58.653

```
 //JFrame frameWin = new JFrame();
    frameWin.setBounds(100, 200, 120, 120);
    frameWin.setTitle("Polar Coordinates");
    frameWin.setVisible(true);
    frameWin.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE) ; 
```

应该在一个方法里面。当你扩展 JFrame 时，它​​必须是

```
setBounds(100, 200, 120, 120);
 setTitle("Polar Coordinates");
 setVisible(true);
 setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE) ; 
```

你可以这样做：

```
public class PolarCoords extends JFrame
{
   public PolarCoords()
   {
     setBounds(100, 200, 120, 120);
     setTitle("Polar Coordinates");
     setVisible(true);
     setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE) ;
   }
} 
```

或者

```
public class PolarCoords extends JFrame
{
   public PolarCoords()
   {
     Init();
   }
   public void Init()
   {
     setBounds(100, 200, 120, 120);
     setTitle("Polar Coordinates");
     setVisible(true);
     setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE) ;
   }
} 
```

# asp.net - 将元数据动态添加到 office365 页面

> ID：12663650
> 
> 赞同：0
> 
> 时间：2012-09-30T18:01:35.237
> 
> 标签：asp.net, sharepoint, office365

我正在开发一个office365 网站。我有一个页面，我想将元标记（关键字）动态添加到该页面。

我们不能有代码隐藏。我们不能使用服务器端代码。我们无法在沙盒解决方案中访问页面的标题标签，因此沙盒在此处失败。我们不能通过javascript来做到这一点，那是不值得的。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:04:50.323

简短的回答：不可能。Office365 不是一个您可以对基本 SharePoint 平台的行为进行“高级”更改的环境。

# php - 单个页面的唯一会话 ID

> ID：12663658
> 
> 赞同：1
> 
> 时间：2012-09-30T18:03:09.090
> 
> 标签：php, session, session-variables, session-cookies, sessionid

我在不同的页面上设置了独特的会话变量。我想让我的会话变量谨慎并本地化在其各自的页面中。问题是 php 将会话 ID 存储为每个用户的 cookie，以便会话仅对用户唯一，而不是页面。

如何限制页面上的会话到页面设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T18:07:24.940

您最好使用单个会话 ID，并将每个页面的本地化数据存储在会话的子部分中，例如

```
$_SESSION['pages']['index.html'] = ...
$_SESSION['pages']['sitemap.html'] = ... 
```

最好只使用一个会话，而不是多个会话。除非您的站点非常小，否则您将面临超出浏览器的每个站点 cookie 限制的风险，并且随着浏览器删除“旧”cookie 为“新”cookie 腾出空间，您将开始丢失会话。

# c++ - C++ try/catch：catch块输出中的OutputDebugStringW两次？

> ID：12663665
> 
> 赞同：0
> 
> 时间：2012-09-30T18:04:26.727
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, debugview

我有一个带有 try catch 块的函数，如下所示：

```
bool apple()
{
    OutputDebugStringW(L"entered apple");
    try {
    SomeObj orange;
    int a = global_b->num; // global_b is NULL
    int b = global_b->someothernum; // global_b is NULL
    }
    catch(...) {
    OutputDebugStringW(L"leaving apple due to exception");
    return false;
    }
    OutputDebugStringW(L"leaving apple normally.");
    return true;
} 
```

在 DbgView 中有一次我看到了这个：

```
entered apple
leaving apple due to exception
leaving apple due to exception 
```

该函数在 DllMain PROCESS_ATTACH 上调用。发生了什么？不幸的是，我重新编译了代码，当我将它改回它试图重现出现两次的异常消息时，我无法做到。
这是在使用 DbgView 4.79 的 Visual Studio 2010 SP1 中。有没有人见过他们使用 OutputDebugString 输出两次输出的东西？

**编辑**- 感谢那些回答这个问题的人。答案指出我不能依赖 NULL 指针异常。在 Visual Studio 中，我使用`/EHa`将所有内容作为 C++ 异常捕获，这样如果我要包装的任何函数有任何问题，我都可以因异常而中止。如果我曾经`/EHa`期望访问违规将被传递给 可以`catch(...)`吗？我是这么想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:43:21.510

它未定义的行为（任何事情都可能发生（而且似乎也是））：

```
int a = global_b->num; // global_b is NULL
int b = global_b->someothernum; // global_b is NULL 
```

通过 NULL 指针访问元素是未定义的行为。此后，您的程序可以自由执行任何操作，因此您看到的任何内容都是有效的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:52:27.420

为什么不检查 NULL 然后自己抛出异常，看看是否会改变任何东西，这可能有助于查看未定义的行为是否是导致此问题的原因，或者是否确实存在其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:00:12.200

通过捕获异常以访问 NULL 指针，您依赖于可视化 c++ 特定行为。所以这不是编码这种行为的好方法。测试 NULL 将是执行此操作的正确方法。另请参阅...[如何捕获空指针异常？](https://stackoverflow.com/questions/1823721/how-to-catch-the-null-pointer-exception)

# python - 在python中更改计数器的输出

> ID：12663666
> 
> 赞同：0
> 
> 时间：2012-09-30T18:04:27.843
> 
> 标签：python, counter

我正在使用以下代码解压缩字典并计算每个站点的值：

```
result = [Counter(site) for site in zip(*myDict.values())] 
```

输出类似于：`Counter({'A': 74}), Counter({'G': 72, 'C': 2})` 有五个可能的值：`A, T, G, C`和`N`

如果五个值之一小于 74，我只希望计数器吐出一个值。所以对于上面的例子，只有第二个会被输出。如何在计数器中使用 if 语句？此外，我如何标记每个站点，以便上面可以说：

```
Site 2: 'G': 72, 'C': 2 
```

myDict 看起来像这样：

```
{'abc123': ATGGAGGACGACT, 'def332': ATGCATTGACGC} 
```

除了有74个条目。每个值的长度相同。基本上，我不知道如何使用可以在每个值的每个站点不匹配时为我提供输出的计数器。所以对于上面的序列，第 4 个位点不匹配。我希望计数器输出以下内容：

```
site 4: 'G': 1, 'C': 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:25:37.693

您可以使用[enumerate](http://docs.python.org/library/functions.html#enumerate)来索引站点，并且[Counter上的](http://docs.python.org/library/collections.html#collections.Counter)[most_common](http://docs.python.org/library/collections.html#collections.Counter.most_common)方法可用于检查计数是否 < 74。这是一个只有两个字符串的示例：

```
from collections import Counter
myDict = {'a':'ATGTTCN','b':'ATTTCCG'}
result = [(i,Counter(site)) for i,site in enumerate(zip(*myDict.values()))]
result = [x for x in result if x[1].most_common()[0][1] < 2]
for site,count in result:
    print 'Site {}: {}'.format(site,str(count)[9:-2]) 
```

输出：

```
Site 2: 'T': 1, 'G': 1
Site 4: 'C': 1, 'T': 1
Site 6: 'G': 1, 'N': 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:34:04.190

使用 Dict Comprehension 并仅存储值 if `max(Counter(x).values())<74`，用于`enumerate()`获取`Site`数字。

```
>>> mydict={'abc123': 'ATGGAGGACGACT', 'def332': 'ATGCATTGACGC'}
>>> result={'Site {}'.format(i+1):Counter(x) for i,x in enumerate(zip(*mydict.values())) if max(Counter(x).values())<2}
>>> result
{'Site 7': Counter({'T': 1, 'G': 1}), 'Site 6': Counter({'T': 1, 'G': 1}), 'Site 4': Counter({'C': 1, 'G': 1}), 'Site 9': Counter({'A': 1, 'C': 1}), 'Site 8': Counter({'A': 1, 'G': 1}), 'Site 11': Counter({'A': 1, 'G': 1}), 'Site 10': Counter({'C': 1, 'G': 1})} 
```

或转换`Counter`为`dict`：

```
>>> {'Site {}'.format(i+1):dict(Counter(x)) for i,x in enumerate(zip(*mydict.values())) if max(Counter(x).values())<2}

{'Site 7': {'T': 1, 'G': 1}, 'Site 6': {'T': 1, 'G': 1}, 'Site 4': {'C': 1, 'G': 1}, 'Site 9': {'A': 1, 'C': 1}, 'Site 8': {'A': 1, 'G': 1}, 'Site 11': {'A': 1, 'G': 1}, 'Site 10': {'C': 1, 'G': 1}} 
```

# java - 没有引用的 Java 数组传递

> ID：12663674
> 
> 赞同：5
> 
> 时间：2012-09-30T18:05:39.200
> 
> 标签：java, arrays, reference

我试图在不使用引用的情况下传递数组，但直接使用值：

```
 public static void main(String[] args){
            int[] result = insertionSort({10,3,4,12,2});
    }

    public static int[] insertionSort(int[] arr){
        return arr;
    } 
```

但它返回以下异常：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
Syntax error on token(s), misplaced construct(s)
Syntax error on token ")", delete this token 
```

当我尝试以下代码时，它可以工作，有人可以解释原因吗？

```
 public static void main(String[] args){
        int[] arr = {10,3,4,12,2};
        int[] result = insertionSort(arr);  
    }

    public static int[] insertionSort(int[] arr){
        return arr;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T18:08:51.550

它一定要是

```
int[] result = insertionSort(new int[]{10,3,4,12,2}); 
```

`{10,3,4,12,2}`是数组初始化的语法糖，它必须与下面的声明语句一起使用 -

```
int[] arr = {10,3,4,12,2}; 
```

以下内容也是不允许的——

```
int[] arr; // already declared here but not initialized yet
arr = {10,3,4,12,2}; // not a declaration statement so not allowed 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T18:11:19.493

```
insertionSort({10,3,4,12,2}) 
```

不是有效的 java，因为您没有在方法调用中指定**类型**。JVM 不知道这是什么类型的数组。它是具有 double 值还是具有 int 值的数组？

你能做的是`insertionSort(new int[]{10, 3 ,4 12, 2});`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T18:10:06.513

`int[] array = { a, b, ...., n }`是一个速记初始化 - 你必须写：

```
int[] result = insertionSort(new int[]{10,3,4,12,2}); 
```

匿名初始化它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T18:13:43.093

没有什么可以补充其他人的话。

但是我相信你应该使用`new int[]{10,3,4,12,2}`（就像其他人所说的那样）并且 Java 不允许你使用的原因只是`{10,3,4,12,2}`Java 是强类型的。

如果您只是使用`{10,3,4,12,2}`，则不知道数组元素的类型是什么。它们似乎是整数，但它们可以是`int`, `long`, `float`, `double`, 等等...

好吧，实际上它可能会从方法签名中推断出类型，如果不合适就会引发编译错误，但这似乎很复杂。

# php - 基本调查数据到 .txt 文件

> ID：12663679
> 
> 赞同：0
> 
> 时间：2012-09-30T18:06:41.870
> 
> 标签：php

我的调查（正在进行中）的链接在这里：[http](http://dtech.id.lv/aptauja/) ://dtech.id.lv/aptauja/ 对不起，它是拉脱维亚语，但我希望你能理解这个问题。

到目前为止，我设法为我的咖啡饮用调查构建了设计和基本 HTML、JavaScript 编码......当用户点击提交按钮“Pabeigt！” 收集的数据显示在页面左侧（目前）。

`www/logs/`我想要做的是这个按钮在我的服务器目录中创建文件 user1.txt、user2.txt、user3.txt 等等。

是否可以通过 PHP，如果可以，您能给我一些想法吗？我知道这类项目通常是基于 MySQL 的，但我想让它尽可能简单，没有任何数据库和安全性......

谢谢，任何答案将不胜感激。

PS这种工作模型的原因是因为我有导入和处理多个TXT文件的excel，分析它们的内容。而且还缺乏MySQL知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:15:02.367

本教程将为您提供帮助： [http ://www.tizag.com/phpT/fileappend.php](http://www.tizag.com/phpT/fileappend.php)

关键是“附加”到文件……这样你就可以开始建立一个包含所有你想要的数据的日志文件……

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'a') or die("can't open file");
$stringData = "New Stuff 1\n";
fwrite($fh, $stringData);
$stringData = "New Stuff 2\n";
fwrite($fh, $stringData);
fclose($fh); 
```

从链接中，这是您想要的。

# applescript - “无法将应用程序'地址簿'转换为类型位置参考”是什么意思？为什么我的代码不起作用？

> ID：12663681
> 
> 赞同：2
> 
> 时间：2012-09-30T18:07:05.270
> 
> 标签：applescript

我正在尝试在 Applescript 中编写代码，以便与已填写的信息建立新的联系。这是我的代码：

```
set contactFirstName to "Brandon"
set contactLastName to "Damante"
set contactStreet to "7688 Somerly Ct"
set contactCity to "New Albany"
set contactCountry to "USA"
set contactZip to "43054"
set contactEmail to "chocolatecheese101@hotmail.com"
set contactNote to "I'm Awesome"
set contactState to "Ohio"
--Address Book Tell Block
tell application "Address Book"
    --Create the Contact
    set theContact to make new name with properties {first name:contactFirstName, last     name:contactLastName, street:contactStreet, city:contactCity, state:contactState,     country:contactCountry, zip:contactZip, email:contactEmail, note:contactNote}
end tell 
```

它突出显示粗体部分并说：“无法将应用程序'地址簿'转换为类型位置引用”，我以前从未见过该错误消息。这对我的代码意味着什么？我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:12:12.530

试试这个：

```
set contactFirstName to "Brandon"
set contactLastName to "Damante"
set contactStreet to "7688 Somerly Ct"
set contactCity to "New Albany"
set contactCountry to "USA"
set contactZip to "43054"
set contactEmail to "chocolatecheese101@hotmail.com"
set contactNote to "I'm Awesome"
set contactState to "Ohio"
--Address Book Tell Block
tell application "Address Book"
    set theContact to make new person at end of people with properties {first name:contactFirstName, last name:contactLastName, note:contactNote}
    tell theContact
        make new address at end of addresses with properties {street:contactStreet, city:contactCity, state:contactState, country:contactCountry, zip:contactZip, label:"Work"}
        make new email at end of emails with properties {label:"Work", value:contactEmail}
    end tell
    save
end tell 
```

# javascript - 使用 Ember.js 和 Handlebars，将模板绑定到类视图与视图实例有什么区别？

> ID：12663684
> 
> 赞同：3
> 
> 时间：2012-09-30T18:07:35.533
> 
> 标签：javascript, ember.js, handlebars.js

案例 I. 将模板绑定到视图实例。

例如，假设我有一个模板：

```
 <script type="text/x-handlebars" data-template-name="instance-template">
        <b> Name: </b> {{ name }}
    </script> 
```

然后，我可以将视图实例绑定到它并附加到文档（为简单起见，参数名称在视图中声明，而不是绑定到某些控制层）：

```
App.instanceView = Ember.View.create({
    templateName: 'instance-template',
    name: 'hello world'
}).append(); 
```

这里的幕后究竟发生了什么？通过指定模板名称，这个视图实例是否以某种方式获取模板并使用后台传递的参数对其进行编译？

案例二。将模板绑定到类视图，模板未命名。

但是，如果我想将模板绑定到类视图，例如：

```
App.ViewClass = Ember.View.extend({
    name: 'hello world',
}); 
```

该文档使用这种形式的模板：

```
<script type="text/x-handlebars">
    {{ #view App.ClassView }}
        This part renders: {{ name }} 
    {{ /view }}
</script> 
```

请注意，当我这样做时，由于某种原因这不起作用。模板中的引号 'This part renders: ' 实际呈现，但 {{ name }} 标签未呈现。我不知道为什么。

案例三。模板绑定到类视图，模板被命名。

另外，如果我命名上面的模板：

```
<script type="text/x-handlebars" data-template-name = 'class-template'>
    {{ #view App.ClassView }}
        This part renders: {{ name }} 
    {{ /view }}
</script> 
```

并将视图更改为

```
App.ViewClass = Ember.View.extend({
    templateName: 'class-template',
    name: 'hello world',
}); 
```

什么都没有渲染。我再一次看不到这里发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T21:09:41.877

**案例1** 嗯，差不多。视图正在渲染（我们假设上下文是视图），那么当我们看到`{{name}}`这将等同于`instanceView.get('name')`.

**案例 2** 匿名模板不会更改上下文。当您`{{#view}}`在上下文中定义模板时，不会改变。要获取与`{{#view}}`助手一起使用的视图上下文，您需要使用`view.name`. 例如：

```
App.ViewClass = Ember.View.extend({
    name: 'hello world',
});

<script type="text/x-handlebars">
    {{name}} <!-- lets pretend this is "something else" -->
    {{#view App.ClassView}}
        This part renders: {{name}} <!-- "something else" -->
        {{view.name}} <!-- "hello world" -->
    {{/view}}
</script> 
```

**案例 3** 这个例子没有任何意义，应该有一个 Ember 断言失败（非缩小版本）。您正在定义一个使用模板的视图，然后在该模板内使用匿名模板再次呈现相同的视图。如果这是您想要的意思，请您提供一个用例，因为可能有一种更简单的方法来完成您想要完成的工作。

# .net - 强制 SqlConnection 在指定的时间内打开

> ID：12663687
> 
> 赞同：0
> 
> 时间：2012-09-30T18:07:51.053
> 
> 标签：.net, sqlconnection, lifetime

似乎 SqlConnections 在一段时间不活动后关闭。我需要能够控制连接保持打开的时间。可以为连接配置“连接超时”和“连接生命周期”属性，但它们不能满足我的需要。

问题是我们的应用程序很大，并且在很多地方，当某些屏幕打开时连接不会关闭。用户可以打开一个屏幕，然后去吃午饭，然后回来，然后尝试做某事并得到“连接已丢失”异常。我知道这是一种反模式，但现在在一个地方延长连接寿命会更容易，然后在数千个地方打开/关闭和池连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:41:16.990

连接不会自动关闭。出现故障，例如网络。

不过，这是意料之中的。不要保持连接打开！你正在反对系统的使用方式，你会为此受苦。

更改应用程序，使其每个工作单元使用一个连接，然后关闭它。作为创可贴修复，请确保`SqlConnection.State`在`Open`执行查询之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:22:37.353

你在设计你的应用程序时非常错误。连接的打开状态不应超过一组查询（即单个操作所需的查询）。不用担心，没有性能问题，因为 SqlConnection 基于连接字符串在内部池连接。因此，即使您打开和关闭连接，REAL 连接也会在一段时间内保持打开状态。

更重要的是，在内部，如果连接被关闭，那么pooler会在需要的时候重新打开它，所以你不必担心。

说真的，只需在使用时打开和关闭连接。这就是它应该如何工作的方式。

仅供参考，连接关闭的原因是内部连接池将“回收”已打开很长时间的连接。所以你通过保持连接打开所做的就是与连接池对抗。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T06:30:49.167

这么长时间打开连接不是很好的编程。在需要时打开连接并在完成数据库任务后关闭。如果您觉得它会影响您的应用程序性能，请使用连接池

# javascript - 如何将下拉菜单的内容与按钮对齐 - 引导程序

> ID：12663688
> 
> 赞同：0
> 
> 时间：2012-09-30T18:07:53.313
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在尝试做一些我认为非常简单的事情。我只是想要一个以页面为中心的下拉列表。问题是当它展开时，内容没有与按钮对齐。这是示例：http: [//jsfiddle.net/VCsAW/1/](http://jsfiddle.net/VCsAW/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:21:23.843

在 CSS 中添加以下内容：

```
#settings {
    display: inline-block;
} 
```

这将强制`#settings`div 适应内容的大小并解析“偏移”下拉菜单

**工作示例：http: [//jsfiddle.net/VCsAW/8/](http://jsfiddle.net/VCsAW/8/)**

**编辑**

内容居中的原因`text-align: center`是用于使下拉菜单居中。要阻止在下拉菜单的内容中发生这种情况，您可以`text-align: center`设置`.dopdown-menu`：

```
.dropdown-menu {
     text-align: left;    
} 
```

**工作示例：http: [//jsfiddle.net/VCsAW/12/](http://jsfiddle.net/VCsAW/12/)**

# c++ - 如何在 ARM 的 IAR 嵌入式工作台中编译包含 C 和 C++ 源文件的项目？

> ID：12663694
> 
> 赞同：0
> 
> 时间：2012-09-30T18:08:12.180
> 
> 标签：c++, c, embedded, workbench, iar

我有两个 IAR 嵌入式工作台项目（用于 Cortex-M3 ARM），其中一个是用 C 编写的，另一个是用 C++ 编写的。
我需要合并这两个项目中的一些文件来创建一个新项目，并且由于某些原因，我无法为非我的项目更改语言（例如，我在 c++ 项目中使用了 OOP，而在另一个项目中使用了一些本机 c 函数）。
现在我正在寻找一种解决方案来组合这些项目并在 IAR 嵌入式工作台 6 中编译它。有
什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:11:52.810

编译所有 c 文件。编译所有 c++ 文件。为您的新项目创建 main()，它应该是 c++。链接所有文件，就是这样。

# java - 在子类中抛出异常的标准是什么

> ID：12663701
> 
> 赞同：6
> 
> 时间：2012-09-30T18:09:01.117
> 
> 标签：java, exception, polymorphism, overriding

到目前为止我所知道的是，如果覆盖超类方法的子类应该抛出相同的异常或异常的子类。

例如：

**这是对的**

```
class SuperClass {
    public int doIt(String str, Integer... data)throws ArrayIndexOutOfBoundsException{
 String signature = "(String, Integer[])";
 System.out.println(str + " " + signature);
 return 1;
 }
}

public final class SubClass extends SuperClass {
    public int doIt(String str, Integer... data) throws ArrayIndexOutOfBoundsException {
        String signature = "(String, Integer[])";
        System.out.println("Overridden: " + str + " " + signature);
        return 0;
    }

    public static void main(String... args) {
        SuperClass sb = new SubClass();
        try {
            sb.doIt("hello", 3);
        } catch (Exception e) {
        }
    }
} 
```

**这是不正确的**

```
class SuperClass {
    public int doIt(String str, Integer... data)throws ArrayIndexOutOfBoundsException{
 String signature = "(String, Integer[])";
 System.out.println(str + " " + signature);
 return 1;
 }
}

public final class SubClass extends SuperClass {
    public int doIt(String str, Integer... data) throws Exception {
        String signature = "(String, Integer[])";
        System.out.println("Overridden: " + str + " " + signature);
        return 0;
    }

    public static void main(String... args) {
        SuperClass sb = new SubClass();
        try {
            sb.doIt("hello", 3);
        } catch (Exception e) {
        }
    }
} 
```

**但我的问题是，为什么编译器认为这个代码块是正确的？**

```
class SuperClass {
    public int doIt(String str, Integer... data)throws ArrayIndexOutOfBoundsException{
 String signature = "(String, Integer[])";
 System.out.println(str + " " + signature);
 return 1;
 }
}

public final class SubClass extends SuperClass {
    public int doIt(String str, Integer... data) throws RuntimeException {
        String signature = "(String, Integer[])";
        System.out.println("Overridden: " + str + " " + signature);
        return 0;
    }

    public static void main(String... args) {
        SuperClass sb = new SubClass();
        try {
            sb.doIt("hello", 3);
        } catch (Exception e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T18:16:08.230

这是因为在 Java 中，每个方法都可以随时抛出一个`RuntimeException`（或一个`Error`）。它甚至不需要在`throws`您的方法签名部分中声明。因此，也可以抛出一个异常，它是在重写方法中声明的异常的超类型，只要它仍然是`RuntimeException`.

有关此行为的规范，尤其是[11.1.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.1) ，请参阅[Java 语言规范的第 11 章（异常） 。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html)定义*检查*（需要在子句中指定）和*未检查*（不需要在子句中指定）异常[的异常种类](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.1)。*`throws`*`throws`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T18:12:02.630

当你重写一个方法时，你应该定义相同的检查异常。在这种情况下，该`SuperClass#doIt`方法声明抛出一个`ArrayIndexOutOfBoundsException`，因此覆盖该方法的每个子级都应声明相同的检查异常或其子类。

更多信息：

*   [方法覆盖和异常](https://stackoverflow.com/questions/5875414/method-overriding-and-exceptions)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T18:37:29.747

为了尽量简化，[RuntimeException](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html)和[Error](http://docs.oracle.com/javase/7/docs/api/java/lang/Error.html)不需要在`throws`子句中声明，但*总是隐含*的。如果在声明中包含隐含的异常，则可以编写超类方法声明；

```
public int doIt(String str, Integer... data)
    throws ArrayIndexOutOfBoundsException, Error, RuntimeException { 
```

这意味着，子类方法上的显式 RuntimeException 声明是超类方法上现有（隐含）异常的子类，因此是允许的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-18T14:06:21.247

如果超类方法没有声明任何异常，则子类重写方法不能声明“已检查”异常，但可以声明“未检查”异常**

# c# - GetEventLogs() 返回无设置事件日志？

> ID：12663703
> 
> 赞同：3
> 
> 时间：2012-09-30T18:09:18.500
> 
> 标签：c#, .net, windows

采用以下 C# 代码：

```
EventLog[] eventLogs;
eventLogs = EventLog.GetEventLogs(computername);
foreach (EventLog evt in eventLogs)
{
    statusMessagesListBox.Items.Add("evt.Log.ToString(): " + evt.Log.ToString() + "\t\tevt.LogDisplayName: " + evt.LogDisplayName);
} 
```

当我运行它时，我的输出如下所示：

```
evt.Log.ToString(): Application      evt.LogDisplayName: Application
evt.Log.ToString(): HardwareEvents   evt.LogDisplayName: Hardware Events
evt.Log.ToString(): Security         evt.LogDisplayName: Security 
```

等等，就像那样。但是为什么没有安装日志呢？此外，当我尝试运行此代码时：

```
var eventLog = new EventLog("Setup", computer);
eventLog.Clear();
eventLog.Dispose(); 
```

我收到一条错误消息，指出该计算机上不存在日志“设置”，即使它确实存在。上面的代码适用于除安装日志之外的所有其他事件日志。

如何访问设置事件日志？

作为参考，正在尝试的 .NET 框架是 4.0 和 4.5，目标计算机是 Windows 7 和 2008 R2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T21:26:31.007

该类[`EventLog`](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx)仅处理管理事件日志。SetUp 事件日志是一个操作日志（您可以在事件查看器中看到），因此无法由此类处理。

要访问 SetUp 事件日志，您必须使用[`System.Diagnostics.Eventing.Reader`](http://msdn.microsoft.com/en-us/library/bb353651.aspx)命名空间中的类。您可以使用以下方法遍历事件：

```
EventLogQuery query = new EventLogQuery("SetUp", PathType.LogName);
query.ReverseDirection = true; // this tells it to start with newest first
EventLogReader reader = new EventLogReader(query);

EventRecord eventRecord;

while ((eventRecord = reader.ReadEvent()) != null)
{
    // each eventRecord is an item from the event log
} 
```

查看[这篇 MDSN](http://msdn.microsoft.com/en-us/library/bb671200.aspx)文章以获取更详细的示例。

# python - 音量控制通知 Ubuntu

> ID：12663706
> 
> 赞同：0
> 
> 时间：2012-09-30T18:10:02.447
> 
> 标签：python, linux, ubuntu, pyqt, libnotify

我正在使用 PyQT 制作 Gui，其中我通过按钮控制音量我正在使用 amixer 命令行工具来增加和减少音量，当用户增加或减少音量时，我还可以显示默认通知吗？我正在使用 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:35:00.377

我找到了解决方案

```
 volume = 60
            cmd ="notify-send \" \" -i notification-audio-volume-high -h int:value:"+str(volume)+" -h string:synchronous:volume"
            #print cmd
            os.system(cmd) 
```

# javascript - 如何制作可编辑的jquery函数

> ID：12663708
> 
> 赞同：0
> 
> 时间：2012-09-30T18:10:07.040
> 
> 标签：javascript, jquery, function, fancybox

我不知道标题是否正确，因为我不知道我正在寻找的东西叫什么。

我正在寻找的是一种关于如何制作像fancybox、facebook等这样的动态功能的教程。

例子：

我包含一个 js 文件，并在其下插入以下代码：

```
$("#single_1").fancybox({
      helpers: {
          title : {
              type : 'float'
          }
      }
  }); 
```

这意味着，我可以从 html 文件中自定义功能，所以它很灵活。希望有人知道我在照顾什么:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:13:28.107

在我看来，您正在寻找创建自己的 jQuery 插件。如果你想这样做，有大量的教程，从[jQuery 自己的网站](http://docs.jquery.com/Plugins/Authoring)开始。

# java - Android DateTime 到 11 位 Unix 时间戳

> ID：12663710
> 
> 赞同：0
> 
> 时间：2012-09-30T18:10:13.080
> 
> 标签：java, android, unix-timestamp

我需要获取当前日期和时间并将其转换为 11 位 unix 时间戳。

就像这个网站一样： [http ://www.onlineconversion.com/unix_time.htm](http://www.onlineconversion.com/unix_time.htm)

我用谷歌搜索了很多，但我能找到的只是时间戳到日期转换问题和答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:18:08.820

```
long unixTime = System.currentTimeMillis() / 1000L; 
```

做你想做的事。原始答案[在这里](https://stackoverflow.com/a/732043/1069068)。

[System.currentTimeMillis()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#currentTimeMillis%28%29)返回 Unix 纪元的时间（以毫秒为单位）。作为`1 second = 1000 milliseconds`，您只需将其除以 1000 即可获得以秒为单位的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T18:50:22.677

如果要操作日期，可以使用：

```
Date myDate = new Date();
myDate.setSeconds(23);
long uTime = myDate.getTime() / 1000L; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T18:17:06.777

您可以使用`System.currentTimeMillis()`以毫秒为单位获取 Unix 时间戳，您可以将其转换为秒

```
long unixTimestamp = System.currentTimeMillis() / 1000L; 
```

# jquery - jQuery追加重复内容

> ID：12663713
> 
> 赞同：3
> 
> 时间：2012-09-30T18:10:31.923
> 
> 标签：jquery, append

我是 jquery 的新手。我需要帮助移动内容。我正在使用附加方法。

我希望能够将每个 .links 元素移动到 .node 元素中的每个 .submitted 元素中。现在 append 正在将所有三个 .links 添加到每个 .selected 元素。我在下面提供了代码和指向 JSFiddle 的链接。

谢谢你的帮助

[单击此处查看 JSFiddle 中的代码](http://jsfiddle.net/andesign/SGgM8/)

jQuery

```
​$('.links').appendTo('.submitted');​​​​​​​​​​​​​​​​​ 
```

HTML

```
<div id="wrapper">
    <div class="node" class="clearfix">
        <h2>Node Title 1</h2>
        <div class="submitted">September 30</div>
        <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin egestas mi, ac luctus orci eleifend pharetra</div>
        <div class="links">
            <a href="#">Node 1 Link 1</a> | 
            <a href="#">Node 1 Link 2</a>
        </div>
    </div>

    <div class="node" class="clearfix">
        <h2>Node Title 2</h2>
        <div class="submitted">September 29</div>
        <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin egestas mi, ac luctus orci eleifend pharetra</div>
        <div class="links">
            <a href="#">Node 2 Link 1</a> | 
            <a href="#">Node 2 Link 2</a>
        </div>
    </div>

    <div class="node" class="clearfix">
        <h2>Node Title 3</h2>
        <div class="submitted">September 26</div>
        <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin egestas mi, ac luctus orci eleifend pharetra</div>
        <div class="links">
            <a href="#">Node 3 Link 1</a> | 
            <a href="#">Node 3 Link 2</a>
        </div>
    </div>
</div>​ 
```

CSS

```
#wrapper { width:600px; margin:0 auto; }
h2 { clear:both; }
.node { border-bottom:1px solid #CCCCCC; }
.submitted { float:left; width:200px; padding:10px; background-color:#CCCCCC; }
.content { float:left; width:360px; padding:10px; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T18:16:35.137

当你这样做时

`$('.links').appendTo('.submitted')`

您正在选择**所有**具有类的元素`.links`并将它们添加到具有类的**所有**元素`.submitted`

**编辑**

现在我明白你想要什么了:)

这解决了它

```
$(".links").each(function(){
    $(this).appendTo( $(this).prevAll('.submitted') );
}); 
```

看到它在这里工作：http: [//jsfiddle.net/RASG/SGgM8/8/](http://jsfiddle.net/RASG/SGgM8/8/)

![ss](../Images/31e0f7733509e219ae1ff4972ef5ee68.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:28:21.573

试试下面的。

```
$('.links').each(function() {
   var $this = $(this);
   $this.appendTo($this.siblings('.submitted'));
}) 
```

[http://jsfiddle.net/PwJNe/](http://jsfiddle.net/PwJNe/)

请注意，您的标记无效，请更改此：

```
<div class="node" class="clearfix"> 
```

到：

```
<div class="node clearfix"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T18:36:09.847

如果我理解正确，你有这个：

```
<div class="node" class="clearfix">
    <h2>Node Title 3</h2>
    <div class="submitted">September 26</div>
    <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin egestas mi, ac luctus orci eleifend pharetra</div>
    <div class="links">
        <a href="#">Link 1</a> | 
        <a href="#">Link 1</a>
    </div>
</div> 
```

你希望它以这样的方式结束：

```
<div class="node" class="clearfix">
    <h2>Node Title 3</h2>
    <div class="submitted">
        September 26
        <a href="#">Link 1</a> | 
        <a href="#">Link 1</a>
    </div>
    <div class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin egestas mi, ac luctus orci eleifend pharetra</div>
    <div class="links">
    </div>
</div> 
```

将子元素从 div.links 移动到 div.submitted。

如果那是正确的，那么您可以执行以下操作：

```
$(".node").each( function() {
     //Get the links
     var links = $(this).children(".links").html();
     //Remove the links from the .links div
     $(this).children(".links").html("");
     //Append the links to the .submitted div
     $(this).children(".submitted").append(links);
}); 
```

这将遍历 DOM 中找到的每个 .node 元素。在 .each 块内 $(this) 指的是 .node 元素。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-25T12:53:33.200

**这是使用 Jquery 创建数组副本的方法：**

让数组 = $('li a'); 让 copyOfArray = array.clone().slice();

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-30T18:23:18.477

`.links`每三个`.submitted`元素添加三个链接

要仅添加一个，请使用`.first()`或一些 jquery 过滤器进行限制

从你的小提琴分叉的例子：http: [//jsfiddle.net/LMbzY/](http://jsfiddle.net/LMbzY/)

# c++ - 如何在 c++ win32 API 中向菜单项添加图标

> ID：12663717
> 
> 赞同：2
> 
> 时间：2012-09-30T18:11:31.847
> 
> 标签：c++, api, winapi, menu, icons

> **可能重复：**
> [InsertMenu/AppendMenu - 如何使用 C++ 和 win32 将图标添加到菜单和子菜单](https://stackoverflow.com/questions/10181063/insertmenu-appendmenu-how-to-add-icons-to-menu-and-submenus-using-c-and-win3)

您好，我有一个 C++ 菜单，这里是它的代码

```
HMENU hMenu = CreateMenu();
HMENU hFileMenu = CreatePopupMenu;
HMENU HFileOpen = CreateMenu;

AppendMenu(hFileMenu, MF_STRING, (UINT)hFileOpen, "Open");
AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hFileMenu, "File");

SetMenu(hwnd,hMenu); 
```

我一直在互联网上寻找，但找不到有关如何为菜单项制作位图的教程。我想为 hFileOpen 添加一个位图。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:17:12.110

SetMenuItemInfo [http://msdn.microsoft.com/en-us/library/windows/desktop/ms648001(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648001(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:53:52.243

首先，您应该从资源加载位图。您可以使用[LoadImage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045%28v=vs.85%29.aspx)或[LoadBitmap](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145033%28v=vs.85%29.aspx) Win32 API 函数来加载位图。

它将返回一个新的图像句柄。然后您可以使用此句柄通过[SetMenuItemInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648001%28v=vs.85%29.aspx)函数将位图分配给菜单项。

另请参阅 MSDN 主题，了解如何将位图与逐步描述[的菜单一起使用。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647558%28v=vs.85%29.aspx#_win32_Using_Menu_Item_Bitmaps)

# python - Python中的列表理解

> ID：12663718
> 
> 赞同：1
> 
> 时间：2012-09-30T18:11:41.490
> 
> 标签：python

假设我有一个元组列表：

```
a = [(1, 2), (3, 4), (4, 5)] 
```

和另一个列表，没有元组：

```
b = [1, 2, 3] 
```

我将如何使用列表推导将每个元组的第一个值乘以`a`每个相应的值`b`？也就是说，`[a[0][0] * b[0], a[1][0] * b[1], a[2][0] * b[2]]` （应该等于`[1, 6, 12]`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T18:13:47.420

```
>>> a = [(1, 2), (3, 4), (4, 5)]
... b = [1, 2, 3]
>>> [x[0]*y for x, y in zip(a, b)]
[1, 6, 12] 
```

`zip`功能是关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:13:41.993

例如，您可以使用 `[a[0]*b for a,b in zip(a,b)]`

该`zip`函数创建一个元组列表。该列表与 的最短参数列表一样长`zip`，并且`i`每个元组的第 th 个元素来自 的`i`第 th 个参数`zip`。

```
>>> c = [1, 2, 3]
>>> d = [4, 5, 6]
>>> zip(c,d)
[(1, 4), (2, 5), (3, 6)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T08:46:57.497

对于巨型列表，您最好使用它`izip`，`itertools`因为您不需要在迭代之前创建一个新列表：http: [//pymotw.com/2/itertools/#production-new-values](http://pymotw.com/2/itertools/#producing-new-values)。这种方法的一个巨大优势是您不受序列的限制。您也可以使用生成器。

```
import itertools as it

a = [1,2,3,4,5]
b = [6,7,8,9,10]

for e in it.izip(a,b):
    print e 
```

这将打印元组：

```
(1, 6)
(2, 7)
(3, 8)
(4, 9)
(5, 10) 
```

# algorithm - Appengine：使用内存缓存计数器

> ID：12663720
> 
> 赞同：0
> 
> 时间：2012-09-30T18:11:57.760
> 
> 标签：algorithm, google-app-engine, go

我想在 App Engine 上实现计数器。显而易见的方法是为此目的使用 memcache。但是文档指出 memcache 不可靠，我必须实施后备方法，以防 memcache 中的计数器值错误或丢失。我可以很容易地检测到密钥丢失，但我怎么知道计数器的值有误？我说的是以下情况：

1.  键 = 30
2.  增量（键），键 = 31
3.  密钥被 GAE 刷新
4.  增量（键），键 = 1

有什么我不知道的技巧（与 memcache 一起使用的数字的校验和？）？我真的应该关心这种情况吗？

一些可能无用的细节：

*   计数器的值范围为 0-10000。
*   柜台应该活 1 小时。我每小时将它们存储在数据存储中。
*   我正在使用围棋。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:49:33.613

我认为 Nick Johnson 的这篇文章会对你有所帮助：http: [//blog.notdot.net/2010/04/High-concurrency-counters-without-sharding](http://blog.notdot.net/2010/04/High-concurrency-counters-without-sharding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T15:50:03.830

我会为此使用开源库。你看过这个吗？

[https://github.com/oodlemud/appengine-counter](https://github.com/oodlemud/appengine-counter)

# magento - 带有管理开关的 Magento 自定义缓存

> ID：12663722
> 
> 赞同：7
> 
> 时间：2012-09-30T18:12:18.640
> 
> 标签：magento

我正在编写一个使用一些自定义缓存机制的模块，我希望我的缓存可以从管理区域以及核心 Magento 缓存中清除。

此外，我想检查是否仅为我的模块启用了缓存，然后根据此选择是否进行缓存。

我确信这是可能的，但不知道如何。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-30T18:25:24.217

Magento 使这对您来说非常容易，基本上只需要在您的模块全局配置中添加几行代码......

```
<global>
    <!-- Other global config -->
    <cache>
        <types>
            <namespace_module module="namespace_module" translate="label description">
                <label>Your modules cache label</label>
                <description>Description of your modules cache</description>
                <tags>YOUR_MODULES_CACHE_TAGS</tags>
            </namespace_module>
        </types>
    </cache>
    <!-- Other global config -->
</global> 
```

* * *

检查缓存是否处于活动状态的逻辑将遵循以下内容......

```
$cacheGroup = 'namespace_module';
$useCache = Mage::app()->useCache($cacheGroup);
if (true === $useCache) {
    // Cache is active
} else {
    // Cache is not active
} 
```

# java - 识别文本文件中的“图形”模式

> ID：12663727
> 
> 赞同：1
> 
> 时间：2012-09-30T18:12:52.273
> 
> 标签：java, pattern-matching, neural-network, feature-detection

我有一个任意大小的文本文件来模拟我们称之为雷达的二维输出。在这个输出中，我希望能够识别已知的模式。我们称之为目标检测。

目标可能看起来像这样，每个 X 是一个点亮的像素，这意味着雷达检测到可能是敌人一部分的东西，每个空白都是一个关闭的像素。

![样本图](../Images/07aecaebecc3c64212baa57e1c0a15b8.png)

并且雷达数据以引入“干扰”的形式出现，即图形不会将所有像素都打开。所以我正在考虑在检测中也包含某种概率。

我从来没有做过类似的事情，我正在寻找一般建议。我正在尝试不同的方法，我相信我会以某种方式解决它，但我真的很想有一些关于这种模式匹配的指南、阅读资源或类似的东西，因为我认为它非常有趣但没有以前有机会解决这样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:07:18.467

感知器采用一组输入的加权线性组合，并输出 1 或 0，具体取决于结果是正数还是负数。可以说，人工智能是通过权重来实现的，这些权重决定了数据的分割。一侧结果为阳性，另一侧为阴性。这种分割可以被认为是图上的一条线。例如，如果权重给出一条线 y=x，则输入 x = 2, y = 4 为正，输入 x = -1, y = 1 为负。通过向系统提供正负输入集并调整权重直到训练集的输出与所需的输出匹配，来训练权重。

输入的数量由像素数给出，每个像素都有自己的输入和相关的权重，因此权重是一个与图像大小相同的数组。

对于您的示例，您将需要一组带有预期噪声的敌人目标的图像。这些所需的输出将是正的，因此将所有图像呈现给感知器并检查输出。如果输出不是 1，则调整权重。接下来显示一个非敌人图像并检查输出是否为 0。如果没有调整权重。继续显示正图像并检查输出 1，负图像检查 0，调整权重直到得到输出。

最初，权重被设置为小的随机数。如果实际输出与期望的输出不匹配，它不会开始，请通过以下等式调整每个权重：

w(t+1) = w(t) + a(dy)x

因此，新权重是旧权重加上 alpha 乘以所需输出减去实际结果乘以输入，（对于该像素）

Alpha可以随着训练的进行而改变。一开始它很大，所以收敛很快。随着时间的推移，最好减少数量以减慢收敛速度，使其更加准确。Alpha，学习率应该是0

所以在Java中：

创建一个权重数组并将它们初始化为小的随机数。

创建一组输入图像和相应的所需输出。

选择一个随机图像并将其呈现给系统。- 将输入乘以权重，将它们相加并找到符号。

根据期望输出检查输出。如果它们相同，请选择另一个输入图像。如果存在差异，则通过方程式调整权重，然后选择另一个输入图像。

继续显示输入，直到总误差低于某个阈值。

当系统被训练时，可以将看不见的图像呈现给系统。如果它是敌方目标，它将输出 1，如果不是 0。

所有细节都可以在网上找到，维基页面，有更多的解释，但希望它有所帮助。

# ruby-on-rails - 使用辅助方法构建动态 URL

> ID：12663728
> 
> 赞同：0
> 
> 时间：2012-09-30T18:13:00.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我有一个广告模型。每个广告都属于一个区域。

为了尝试使用更具可读性的 URL，我在 routes.rb 中定义了一个自定义路径：

```
match "/adverts/:area_id/:id" => "adverts#show", :as => :advert_semantic 
```

这会产生类似的东西

```
/adverts/manhattan/123 
```

但是，在极少数情况下，广告可能未分配到某个区域。在这些情况下，Rails 会引发错误，并且不会呈现调用路径的页面。

我想通过检查广告是否首先分配了一个区域来解决这个问题，如果没有区域，则生成常规路径 (/adverts/123) 作为后备。

你会建议什么是最好的方法来做到这一点？例如，最好构建一个可以执行上述操作的辅助方法，或者如果在同一页面上多次调用该方法，这会对性能产生影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:29:15.227

当然，采取的任何额外操作都会影响性能，但如果您谨慎行事，这不应该是禁止的（并且缓存始终是一种选择。）

在这种情况下，我会选择助手。像这样的东西。。

```
def advert_link( advert )
  if advert.area.blank?
    link_to advert.title, advert
  else
    link_to advert.title, advert_semantic_path( advert, area_id: advert.area.id )
  end 
end 
```

将开销保持在最低限度，尽管这当然取决于它的使用量。

# javascript - Javascript 函数返回数字类型。但是当省略 typeof 时返回 NaN

> ID：12663729
> 
> 赞同：1
> 
> 时间：2012-09-30T18:13:10.333
> 
> 标签：javascript

我有一个函数，当 return 语句以**typeof**开头时，它说它是一个数字。但是当我删除它时，它会输出**NaN**。

我不明白为什么。

这是一个小提琴：

[http://jsfiddle.net/X3S56/](http://jsfiddle.net/X3S56/)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:26:42.453

我修改了你的[jsfiddle](http://jsfiddle.net/X3S56/16/)

您正在使用 `bookPrice`而不是`this.price`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T18:16:02.593

尝试`alert(typeof NaN)`可能会有所启发。

虽然`NaN` *字面意思*是“不是数字”，但实际上是一种`number`. 它的意思是“不是一个*有效*的数字”（在数学数字的意义上），但它仍然是一个`number`值（在 Javascript 类型的意义上）。

# javafx-2 - 如何确定转换是否已经在节点上运行？

> ID：12663730
> 
> 赞同：4
> 
> 时间：2012-09-30T18:13:17.290
> 
> 标签：javafx-2

我怎样才能知道节点上是否已经运行了转换 - 例如`FadeTransition`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:14:19.820

您始终可以使用[Transition](http://docs.oracle.com/javafx/2/api/javafx/animation/Transition.html) [statusProperty](http://docs.oracle.com/javafx/2/api/javafx/animation/Animation.html#statusProperty)，因为 Transition 扩展了[Animation](http://docs.oracle.com/javafx/2/api/javafx/animation/Animation.html)对象。不需要另一个变量，您可以简单地：

```
FadeTransition fade = new FadeTransition()
fade.statusProperty().addListener(new ChangeListener<Status>() {

        @Override
        public void changed(ObservableValue<? extends Status> observableValue,
                        Status oldValue, Status newValue) {
                if(newValue==Status.RUNNING)
                    System.out.println("Animation is still running");

            }
        });
fade.play(); 
```

我假设您将跟踪所有动画，我不相信有办法询问节点是否在动画中。无论如何，您可能需要查看[Node](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)类的文档，因为它是一个非常强大的对象。希望对你有帮助，加油

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:45:48.163

谢谢您的帮助。我想分享我最终为我的具体问题选择的解决方案。它如下：我想在鼠标点击时淡化一个节点。当出现大量点击时，`FadeTransition`只有在当前点击完成后才开始新的，以防止闪烁或其他现象。

我的方法可以在函数的第一行看到：

```
@FXML
public void chartMouseClicked(MouseEvent event){
    if (ft.getCurrentRate()!=0.0d) return;      
    ft.play();
} 
```

在这种情况下，是在“init”函数中实例化一次`ft`的类型的私有字段。`FadeTransition`根据 JavaFX 文档，当转换暂停或停止时`getCurrentRate()`返回。`0.0`我不需要暂停过渡，所以这是适合我的方法 - 我只是检查值并让我的过渡在停止时再次播放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T19:35:24.120

注意：我自己没有尝试过与此相关的任何事情。这更像是一个草图而不是一个解决方案。评论太长了，这就是我在这里写大纲的原因。

在我看来，您可以创建一个与节点关联的布尔值（“transitionPlaying”），并且每次在节点上启动转换时，您将其设置为 true。

然后为每个转换定义一个行为，当它完成时：

```
yourTransition.setOnFinished(new EventHandler<ActionEvent>(){
    public void handle(ActionEvent AE){
        transitionPlaying = false; 
} 
```

请注意，这仅回答了您最基本的问题-很难写更多内容，因为我不知道您为什么想知道转换是否完成（如果您想在转换完成后做一些事情，那将打开一个整体蠕虫罐头。也许如果正在播放转换，您可以将要运行的下一个转换添加到队列中，然后定义 setOnFinished 以在完成时调用队列中的下一个转换。）

附言。这个解决方案有一个限制，即在任何时候最多只能在一个节点上播放一个转换。

**更新以查找节点上的所有转换是否都已完成**

您可以使用 int 而不是 bool，并且对于开始的每个转换，您将计数器加一，完成后将其减一。这样您就知道当计数器读数为“0”时所有转换都已完成。这样我的解决方案解决了知道节点上的*所有转换是否都完成的问题。*

# asp.net - asp.net CollapsiblePanelExtender ajax 工具包

> ID：12663732
> 
> 赞同：1
> 
> 时间：2012-09-30T18:13:31.003
> 
> 标签：asp.net, css, ajax, ajaxcontroltoolkit, collapsiblepanelextender

我有一个带有左侧边栏和内容区域的网站。一切都很好。我希望能够使用 ajax 控件工具包 CollapsiblePanelExtender 折叠侧边栏。

我使用了下面的代码，但侧边栏显示并且内容区域在它下方。它就像面板实际上有一个将事情搞砸的宽度，但我不确定。我想要的是 siebar 和内容区域正常显示，当用户想要侧边栏折叠并且内容填满屏幕的整个可用区域时。

任何帮助表示赞赏

**HTML 代码**

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site1.master.cs" Inherits="MyTestWebsite.Site1" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <script src="assets/js/jquery.js" type="text/javascript"></script>
    <script src="assets/js/FAInteractions.js" type="text/javascript"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="refresh" content="590; URL=Login.aspx" />
    <title>MyTestWebsite</title>
    <meta name="keywords" content="application,control" />
    <meta name="keywords" content="application,control" />
    <meta name="description" content="Control Application" />
    <link href="assets/css/Main.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/modalBackground.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" LoadScriptsBeforeUI="True">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel" runat="server">
        <ContentTemplate>
            <div id="HeaderWrapper">
                <div id="Header">
                    <asp:Panel ID="Panel1" runat="server" CssClass="pnl">
                        <div style="float: left;">
                            Panel1
                        </div>
                        <div style="float: right;">
                            <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                        </div>
                        <div style="clear: both">
                        </div>
                    </asp:Panel>
                </div>
            </div>
            <div id="ContentWrapper">
                <ajaxToolkit:CollapsiblePanelExtender ID="CollapsiblePanelExtender1" runat="server"
                    CollapseControlID="Panel1" Collapsed="false" ExpandControlID="Panel1" TextLabelID="Label1"
                    CollapsedText="Show" ExpandedText="Hide" ExpandDirection="Vertical" TargetControlID="Panel2"
                    ScrollContents="false">
                </ajaxToolkit:CollapsiblePanelExtender>
                <asp:Panel ID="Panel2" runat="server">
                    <div id="Sidebar">
                        <asp:Accordion ID="AccordionMenu" CssClass="accordion" HeaderCssClass="accordionHeader"
                            HeaderSelectedCssClass="accordionHeaderSelected" ContentCssClass="accordionContent"
                            runat="server" Width="95%" Height="800px" FramesPerSecond="30" TransitionDuration="250">
                            <Panes>
                                <asp:AccordionPane ID="AccordionPaneConfigureDevice" runat="server">
                                    <Header>
                                        Configure Device</Header>
                                    <Content>
                                        <asp:Button CssClass="Button" ID="btnConfigureDevice" runat="server" Text="Configure Device"
                                            Width="100%" OnClick="btnConfigureDevice_Click" />
                                    </Content>
                                </asp:AccordionPane>
                            </Panes>
                        </asp:Accordion>
                    </div>
                </asp:Panel>
                <div id="Content" style="border: thin solid #666666" class="Tabs">
                    <asp:TabContainer ID="TabContainerMain" runat="server" ActiveTabIndex="4" Width="100%"
                        Height="100%" CssClass="" ViewStateMode="Enabled">
                        <asp:TabPanel ID="Tab_Configure_Device" runat="server" HeaderText="Tab_Configure_Device">
                            <ContentTemplate>
                                <div class="TabControls">
                                    <p>
                                        Howdy, I'm in Section Tab_Configure_Device .</p>
                                </div>
                                <div class="TabsAction">
                                </div>
                            </ContentTemplate>
                        </asp:TabPanel>
                    </asp:TabContainer>
                </div>
            </div>
            <!-- end of wrapper -->
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html> 
```

**CSS**

```
Main CSS File */

#HeaderWrapper 
{
    width: 100%;
    clear: both;
    height: 80px;
    margin-top:2px;
    margin-bottom:2px;
    margin-right:0px;
    margin-left:0px;    
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#99CCFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#9CF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #FFF,  #9CF); /* for firefox 3.6+ */   

    padding-top:0px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px;
    border-bottom:thin solid #FFFFFF;

}

#Header
{    

    width:1024px;
    margin: 0 auto;
    padding-top:0px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px; 
    border-radius: 5px; 

}

#ContentWrapper 
{
    width:1024px;
    margin: 0 auto;
    padding-top:0px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px; 
    border-radius: 5px; 

}

/* sidebar */

#Sidebar {

    float: left;
    width: 184px;
    padding: 0px;
    height:800px;
    border: thin solid #666666;
    padding:0px;
    border-radius: 0px;
    margin-top:0px;
    margin-bottom:0px;
    margin-right:6px;
    margin-left:0px;    
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#FFFFFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#FFF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #FFF,  #FFF); /* for firefox 3.6+ */ 

}

/* end of sidebar -->

/* content */

#Content {
    float: left;
    width: 824px;
    padding-top:0px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px; 
    min-height:800px;
    border-radius: 0px;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#FFFFFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#FFF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #FFF,  #FFF); /* for firefox 3.6+ */ 
}
/* End content */

/* End content */
html,body {
    margin:0px;
    padding:0px;
    font-family: Arial, Helvetica, sans-serif;
    font-size:13px;
    line-height:1.5em;  
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#003366', endColorstr='#FFFFFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#036), to(#FFF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #036,  #FFF); /* for firefox 3.6+ */ 
    height: 100%;   

}

/*Accordion */
        .accordion {  
            width: 100%;  
            padding-left: 5px;
            padding-right: 5px;
        }  

        .accordionHeader {  
            border: 1px solid #003366;  
            color: white;  
            background-color: #003366;  
            font-family: Arial, Sans-Serif;  
            font-size: 12px;  
            font-weight: bold;  
            padding: 4px;  
            margin-top: 4px;  
            cursor: pointer;  
            border-radius: 5px;
        }  

        .accordionHeaderSelected {  
            border: 1px solid #003366;  
            color: white;  
            background-color: #003366;  
            font-family: Arial, Sans-Serif;  
            font-size: 12px;  
            font-weight: bold;  
            padding: 4px;  
            margin-top: 4px;  
            cursor: pointer; 
            border-radius: 5px; 
        }  

        .accordionContent {  
            background-color: #FFFFFF;  
            border: 1px solid #003366;  
            border-top: none;  
            padding: 5px;  
            padding-top: 4px; 
            border-radius: 5px; 
        }  

/*End Accordion */

/* Busy Form */

.updateProgress  
{  

    border-radius: 5px;

}

/* Busy Form */

/* Logo */

#DivLogo
{

    float: left;    
    margin-top:5px;  
    margin-bottom:0px;
    margin-right:6px;
    margin-left:0px;    
    padding-top:5px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:0px;     
    width: 140px;
    height: 25px;
    font-family: Arial, Sans-Serif;  
    font-size: 20px;  
    font-weight: bold; 

}

/* End Logo */

/* Menu */

#DivMenu
{

    float: left; 
    clear: left;
    margin-top:12px;  
    margin-bottom:0px;
    margin-right:6px;
    margin-left:0px;

    padding-top:5px;
    padding-bottom:0px;
    padding-right:0px;
    padding-left:5px; 

    width: 205px;
    height: 25px;
    border-width: 1px;  
    border-style: solid;  
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
}

.Menu
{  
    list-style: none;
            font-family: Arial, Sans-Serif;  
            font-size: 12px;  
            font-weight: bold;  
            margin-top:1px;  
}

.Menu ul
{  
    background:#003366;

}

.Menu ul li
{
    background:#003366;
    text-align:center;
    /* set width if needed.*/
    width:100px;
}

.Menu ul li a
{

    color: White;
    padding: 4px 2px 4px;
    padding-left:8px !important;

}

.Menu ul li a:hover
{
    background-image: none;

}

.Menu ul li a:hover
{
    color: Black;
    background:White;
}

.Menu ul li a
{
    color: White;
}

/* End Menu*/

#DivUserDetails
{

    float: right;

    margin-top:13px;  
    margin-bottom:0px;
    margin-right:5px;
    margin-left:0px;

    padding-top:5px;
    padding-bottom:0px;
    padding-right:20px;
    padding-left:5px; 

    width: auto;
    height: 25px;
    border-width: 1px;  
    border-style: solid;  
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;

}

/* About Modal */

#AboutContainer {

position:absolute;
    height:300px;
    width:440px;
    top:10%;
    left:35%;    

}

#AboutInputContainer {

position:absolute;
    height:100px;
    width:300px;
    top:10%;
    left:20%;
    color:Black;

}

/* End About Modal */

/* Signoff Modal */

#SignoffContainer {

position:absolute;
    height:200px;
    width:440px;
    top:10%;
    left:35%;    

}

#SignoffInputContainer {

position:absolute;
    height:100px;
    width:300px;
    top:10%;
    left:20%;
    color:Black;

}

/* End Signoff Modal */

/* Error Modal */

#ErrorContainer {

position:absolute;
height:300px;
min-height:300px;
max-height:100%;

    width:440px;
    top:10%;
    left:35%;
    overflow:auto;

}

#ErrorInputContainer {

position:absolute;
    height:100px;
    width:300px;
    top:10%;
    left:20%;
    color:Black;

}

#lblErrorCode
{

}

#lblErrorMessage
{

}

#lblExMessage
{

}

/* End Error Modal */

/* Grids */

.mGrid { width: 100%; background-color: #fff; margin: 5px 0 10px 0; border: solid 1px #525252; border-collapse:collapse;font-family:Verdana; font-size:12px;
        table-layout:fixed;

           }

.mGrid td { padding: 2px; border: solid 1px #c1c1c1; color: #003366; }

.mGrid th { padding: 4px 2px; color: #000000; 
            background: #99CCFF; font-size: 0.9em;border: solid 1px #c1c1c1;   
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#99CCFF'); /* for IE */
            background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#9CF)); /* for webkit browsers */
            background: -moz-linear-gradient(top,  #FFF,  #9CF); /* for firefox 3.6+ */

          }

.mGrid .alt  { background: #fcfcfc; }

.mGrid tr.data-row:hover { background-color:#FFFFCC; color:white; }

.mGrid .pgr {background: #FFCC33;

             }

.mGrid .pgr table { margin: 5px 0;}

.mGrid .pgr td { border-width: 0px; 
                 padding: 2px; 

                 font-weight: bold; 
                 color:Black; 
                 line-height: 12px;
                 font-family: Arial, Sans-Serif;  
                 font-size: 12px;
                 border-radius: 5px;
                padding-left: 4px;     
                  padding-right: 4px; 

             }  

.mGrid .pgr a { color:Black; text-decoration: none; }

.mGrid .pgr a:hover { color:Black;  text-decoration: none; }

.pgr span
{
  padding: 5px;
  text-decoration: none;

  background: White;
  border-radius: 5px;

}

/* End Grids */

.TabControls

{

    margin-top:2px;  
    margin-bottom:2px;
    margin-right:2px;
    margin-left:2px;

    padding-top:2px;
    padding-bottom:2px;
    padding-right:2px;
    padding-left:2px;     
    width: auto;

    border-width: 1px;  
    border-style: solid;  
    border-radius: 5px;

        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#99CCFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#9CF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #FFF,  #9CF); /* for firefox 3.6+ */ 
    height:120px;

}

.TabsAction

{

        margin-top:2px;  
    margin-bottom:1px;
    margin-right:2px;
    margin-left:2px;

    padding-top:5px;
    padding-bottom:1px;
    padding-right:5px;
    padding-left:5px;     

        border-width: 1px;  
    border-style: solid;  
    border-radius: 5px;

        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#99CCFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#9CF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #FFF,  #9CF); /* for firefox 3.6+ */ 
    height:120px;

    height: 660px; 
    overflow: auto;
    /* Wrap all words in the grid so it fits in the window      */
    word-break : break-all;

}

/* TextBox */

.Textbox
{

width:auto;
        padding:2px;
        color:Black;

        text-align:left;
         -moz-border-radius: 5px;
         -webkit-border-radius: 5px;
         -khtml-border-radius: 5px; 
          border-radius: 5px; 
}

.Textbox:focus
{

 background-color:#FFCC33;

}

/* End TextBox */

/* Button */

.Button
{

         -moz-border-radius: 5px;
         -webkit-border-radius: 5px;
         -khtml-border-radius: 5px; 
          border-radius: 5px; 

          text-align:left;

          padding-left:22px;
          margin-top:1px;
          margin-bottom:1px;       
          background-repeat: no-repeat;
          background-image: url(/assets/img/action.gif);
               background-position:3px 50%
}

.Button:hover
{
          background: #FFCC33;
          background-repeat: no-repeat;
          background-image: url(/assets/img/action.gif);
           background-position:3px 50%

}

/* End Button */ 
```

# c# - 在按钮上单击加载用户控件而不刷新整个页面

> ID：12663742
> 
> 赞同：1
> 
> 时间：2012-09-30T18:15:22.970
> 
> 标签：c#, jquery, asp.net

解释我的问题：

在我的 ASP.NET 解决方案中，我有 2 个按钮：

按钮 1 和按钮 2

我有两个内容完全不同的用户控件

每个按钮的 OnClick 我想将不同的 UserControl 加载到 ContentPlaceHolder 中，但不重新加载整个页面。所以实际上它必须像 Ajax TabContainer 一样工作（但不能一次加载所有选项卡）。

我试图用 Ajax TabContainers 解决这个问题，但是加载时间实在是太糟糕了。

有人有同样的问题吗？你如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:27:54.507

`ContentPlaceHolder`我假设是一个`div`

您可以使用[`.load()`](http://api.jquery.com/load/)jQuery 方法。这将通过 AJAX 调用将页面内容加载到容器中，而无需刷新页面。

像这样使用：

```
$('#button1').click(function(){
    $('#ContentPlaceHolder').load('ajax/test1.php');
});

$('#button2').click(function(){
    $('#ContentPlaceHolder').load('ajax/test2.php');
}); 
```

# popover - 如何将消息从 Safari 扩展弹出框传递到全局页面？

> ID：12663743
> 
> 赞同：1
> 
> 时间：2012-09-30T18:15:43.737
> 
> 标签：popover, safari-extension

我目前正在构建一个 Safari 扩展。我有一个带有 3 个按钮的简单弹出页面。单击这些按钮后，我需要在全局页面上执行一些操作，这些操作涉及操作 localStorage 和其他一些事情。

我似乎找不到任何方法将消息从弹出窗口发送到全局页面。从弹出窗口到内容脚本的调度似乎有一堆主题，但对全局页面却没有。

这可能非常简单，我只是错过了一些东西。将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T22:12:49.327

您不需要在弹出框和全局页面之间使用消息传递。它们共享`safari.extension`对象，因此您可以从另一个访问任何一个的上下文。

从弹出窗口中，您可以通过 访问全局页面的功能和其他对象`safari.extension.globalPage.contentWindow`。例如，如果您`foo`在全局页面中有一个函数，您可以使用`safari.extension.globalPage.contentWindow.foo()`.

在全局页面中，您可以通过 访问弹出框的对象`safari.extension.popovers[i].contentWindow`，其中`i`是弹出框的索引。

顺便说一句，弹出框和全局页面共享同一个`localStorage`对象，因此不需要使用，例如，`safari.extension.globalPage.contentWindow.localStorage`从弹出框；`localStorage`本身将访问全局页面使用的同一存储。

# deployment - 在 1 和 1 共享主机中安装 Zend Framework 2 的问题

> ID：12663755
> 
> 赞同：1
> 
> 时间：2012-09-30T18:17:38.887
> 
> 标签：deployment, zend-framework2

我正在尝试部署在 1&1 共享 linux 上，该 linux 托管我通过 SSH 连接从 github (https://github.com/zendframework/ZendSkeletonApplication) 获得的 Zend Skeleton Application。

我在服务器中已经有这些文件，但是在执行安装的最后一步时，在 github (php composer.phar install) 中进行了解释，我收到以下错误：

```
X-Powered-By: PHP/4.4.9
Content-type: text/html

<br />
<b>Parse error</b>:  syntax error, unexpected '<' in <b>/homepages/45/d*******/htdocs/zend_test/ZendSkeletonApplication/composer.phar</b> on line <b>75</b><br /> 
```

我可以看到显示的 PHP 版本是 4.4.9，但我已经将服务器设置为 php 5（**phpinfo()**显示 5.4.7）。我还在安装文件夹的根目录中包含了一个 .htaccess 文件，其中包含**AddType x-mapp-php5 .php**指令，如此[处](http://framework.zend.com/wiki/display/ZFUSER/Zend+Framework+Web+Hosts "这里")所述，但这似乎没有任何作用。

**编辑：** 文件结构如下要求：

```
[root]
    [vendor]
      [ZF2]
         [bin]
         [demos]
         [library]
         [resources]
         [vendor]
         composer.json
         LICENSE.txt
         README.md
      .gitignore
      README.md` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:11:05.130

尝试`/usr/local/bin/php5 composer.phar install`

否则 1&1 将是在命令行上访问 PHP5 的最佳联系人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:41:56.027

因此，我没有按照 github 中的说明进行操作，而是从那里下载了骨架应用程序，并在 vendor 文件夹中手动添加了 ZF2 库，**一切**正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T16:44:54.600

无论出于何种原因，默认的 PHP 可执行文件是 PHP4 (4.4.9)。您必须手动选择正确的 PHP 可执行文件才能运行 Composer。有一个`php5`可执行文件，`/usr/bin/php5`但在撰写本文时它是 5.2.17，这不足以运行 composer，最低为 5.3.2。

他们还有一个更新的 PHP 5 可执行文件，可笑地称为`php6`当前`/usr/bin/php6`版本 5.4.19。这将完成这项工作。

要安装作曲家，请使用：

```
curl -sS https://getcomposer.org/installer | php6 
```

要使用作曲家，请使用：

```
php6 composer.phar 
```

# objective-c - 这有多糟糕？30 秒内分配的总字节数为 3GB

> ID：12663758
> 
> 赞同：3
> 
> 时间：2012-09-30T18:18:10.880
> 
> 标签：objective-c, ios, memory, allocation

在编写基于物理的游戏时，我从子类 NSObjects 创建了所有内容。每个粒子对象的力向量存储在 NSArrays 中，然后使用 CADisplayLink 以 60fps 的速度计算加速度、速度和位置。

版本 1 并不意味着要进行优化，但它似乎运行得很好。CADisplayLink 快速且一致。但是，当我查看分配统计信息时……嗯，我从未见过类似的情况。ARC 在将 Live Bytes 保持在 1 兆字节以下方面做得很好，但是这东西正在通过每分钟 6 gig 的整体分配来粉碎。

所以我的问题是：

这段代码在设备上长时间运行是否危险？这有多“糟糕”？如果我继续这样开发，苹果会接受这个还是我会炒 iPad？

![在此处输入图像描述](../Images/328b88f3586e58d139906def0e99b413.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-30T18:44:56.203

优化以最小化分配吞吐量是一种非常有效的方法。

值得注意的是，每次分配都可能需要访问分配中的大部分字节，可能是分配中的每个字节，可能需要少量写入和多次读取。所有这些读/写都需要跨系统总线的 CPU 周期和事务。

所以，是的，它会消耗电池并增加系统温度。但是，烧毁设备的可能性不大。:)

按“#Transitory”排序并开始弄清楚如何消除临时分配。我最初通常会忽略各种 Malloc ## Bytes 分配，因为它们通常是某些类的实例中的后备存储。消除临时实例和 malloc 的数量也下降。

对于任何给定的分配类型，您可以单击查看所有该类型分配的创建位置列表。按函数名称排序，然后感受一下最常用的函数。在那里定位您的优化。

使用这种方法，我已经能够对一些大型应用程序进行大规模优化；有时通过简单地最小化分配率将某些操作的执行时间减少 75% 以上！

# sparql - 涉及 wikiPageWikiLink 的 SPARQL 查询不起作用

> ID：12663761
> 
> 赞同：4
> 
> 时间：2012-09-30T18:18:31.240
> 
> 标签：sparql, dbpedia

出于某种原因，这个非常简单的查询不起作用：

```
 PREFIX dbpedia-owl: <http://dbpedia.org/ontology/>
 SELECT ?link
 WHERE { <http://dbpedia.org/resource/Anarchism>
        dbpedia-owl:wikiPageWikiLink ?link } 
```

语法没有问题，因为涉及外部链接的类似查询可以正常工作：

```
 PREFIX dbpedia-owl: <http://dbpedia.org/ontology/>
 SELECT ?link
 WHERE { <http://dbpedia.org/resource/Anarchism>
        dbpedia-owl:wikiPageExternalLink ?link} 
```

我查看了他们的博客，没有看到任何关于停止 wikiPageWikiLink 类别的信息。那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T14:43:45.757

DBpedia 提取[Wikipedia 页面链接](http://wiki.dbpedia.org/Downloads38#wikipedia-pagelinks)并提供下载，但不会将它们添加到公共 SPARQL 端点。它们太多了——它们会使 SPARQL 服务器不堪重负。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T20:54:45.373

正如您通过访问[http://dbpedia.org/resource/Anarchism](http://dbpedia.org/resource/Anarchism)所看到的，没有名为`wikiPageWikiLink`. 因此，您的查询没有任何问题——它只是要求提供不存在的数据。

# python - Redhat 上安装的 python 版本如何与应用程序使用的版本不同？

> ID：12663762
> 
> 赞同：0
> 
> 时间：2012-09-30T18:18:34.833
> 
> 标签：python, linux, version

当我在命令行中输入“python”时，它会说：

```
Python 2.4.3 (#1, Dec 11 2006, 11:39:03) 
[GCC 4.1.1 20061130 (Red Hat 4.1.1-43)] on linux2 
```

但是我有一个在同一台机器上使用 Python 2.7 的应用程序。为什么这个应用程序使用 python 2.6.5 虽然当我输入“python”时 shell 会写“2.4.3”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:26:03.853

它正在使用其他一些 Python 二进制文件，可能是它安装的一个。在不更改路径变量的情况下，您可能会或可能不会轻松访问它。

例如，我工作的公司 (Tecplot) 为我们的旗舰产品 (Tecplot 360) 提供了一个完整的 Python 发行版，因为试图让用户使用他们机器上安装的任何版本的 Python 所涉及的所有支持问题。更糟糕的是，他们的机器可能被锁定，他们甚至可能无法选择他们使用的 Python 版本。通过提供我们自己的 Python 二进制文件，我们知道客户将使用哪个版本，并且我们可以在发货前测试它是否可以工作。

如果您在应用程序的安装目录中四处寻找，您可能会发现他们将 Python 可执行文件存放在哪里。如果您知道它在哪里，很可能它可以在没有应用程序的情况下运行，并且如果您可以找到一个`site-packages`目录（并具有适当的权限），您可能可以在那里安装其他模块。如果可能的话，尝试`echo $path`从应用程序打开的 shell 中获取您应该查看的目录列表，或者在 Python 中，执行`import sys; print sys.executable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:27:12.993

你可以在你的机器上安装多个版本的 python。尝试在两个环境中运行以下代码片段，以查看两个不同的 python 环境在您的系统上的安装位置。

```
import re
print re.__file__ 
```

# python - 如何使用 pygame 将图像加载到网格中，而不仅仅是使用填充颜色？

> ID：12663764
> 
> 赞同：2
> 
> 时间：2012-09-30T18:19:02.983
> 
> 标签：python, pygame, loadimage

我正在尝试使用 pygame 创建“城市地图”。我希望能够将建筑物的图像放在特定的网格坐标中，而不仅仅是用颜色填充它们。

这就是我创建此地图网格的方式：

```
def clear():
    for r in range(rows):
        for c in range(rows):
            if r%3 == 1 and c%3 == 1:
                color = brown;
                grid[r][c] = 1;
            else:
                color = white;
                grid[r][c] = 0; 
            pygame.draw.rect(screen, color, [(margin+width)*c+margin, (margin+height)*r+margin, width, height])         
    pygame.display.flip(); 
```

现在我如何将建筑物的图像放在那些特定位置的棕色网格中？我已经在网上尝试了一些示例，但似乎无法让它们工作。任何帮助表示赞赏。

如果有人有我可以用于 pygame 的免费精灵的良好来源，请告诉我。谢谢！

![这是我创建的网格图](../Images/d8926dba75e491cc82d2bc5f0b144f61.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T21:29:59.457

Here's an example I wrote. It uses a `numpy` to store tile data. The code plus image is downloadable at: [http://code.google.com/p/ninmonkey/source/.../maptiles](http://code.google.com/p/ninmonkey/source/browse/#hg/examples/maptiles_numpy) (If that fails, use this url: [https://storage.googleapis.com/google-code-archive-source/v2/code.google.com/ninmonkey/source-archive.zip](https://storage.googleapis.com/google-code-archive-source/v2/code.google.com/ninmonkey/source-archive.zip) )

*   Press `S` to toggle mouse scrolling.
*   `Map.tiles` is a 2d `numpy.array` that stores tile's id

![tileset demo](../Images/086cd43fe41aa3daaafc68bfcf5eac15.png)

If you want to add units/sprites that are on top of the tilemap: (Your buildings might count as this)

*   store location using world coordinates
*   draw them using a `world2screen` coordinate function.

The function will add the map offset to their world coordinates. So if the map offset is (-100,0) and your unit's world coordinate is (0,0), you render at (-100,0) placing them a the top left part of the map, as expected, even though you are scrolled.

# asp.net - 数据绑定中继器到列表 更新数据失败 - 回发

> ID：12663770
> 
> 赞同：0
> 
> 时间：2012-09-30T18:19:53.437
> 
> 标签：asp.net, list, data-binding, postback, repeater

我正在尝试创建一个非常简单的 ASP.NET 页面，该页面允许用户输入学生数据。提交表单时，学生对象列表会更新，Repeater（数据绑定到列表）会反映新数据。用户应该能够继续添加新学生。

我的无法执行。我不知道为什么。我尝试过多次更改回发和数据绑定方法。

```
 /*
     * Student class representing a real-life student.
     */
    public class Student
    {

        /* Override default constructor */
        public Student(string first, string last, string studentid, string program, string option)
        {
            FName = first;
            LName = last;
            STID = studentid;
            Program = program;
            Option = option;
        }

        /* Property for the student's first name */
        public string FName
        {
            set; get;
        }

        /* Property for the student's last name */
        public string LName 
        {
            set; get;         
        }

        /* Property for the student ID */
        public string STID
        {
            set; get;
        }

        /* Property for the program of study */
        public string Program
        {
            set; get;
        }

        /* Property for the option within the program of study */
        public string Option
        {
            set; get;
        }

    }

    /* Class for the web form UI */
    public partial class _Default : System.Web.UI.Page
    {

        /* List of students to be displayed in the repeater control */
        private List<Student> myStudents;

        protected void Page_Load(object sender, EventArgs e)
        {

            myStudents = new List<Student>();

            /* Check postback value when the page loads - this is the first time */
            if (IsPostBack == false)
            {
                /* Bind the Collection to the Repeater control */
                Label1.Text = "" + myStudents.Count;
                Repeater1.DataSource = myStudents;
                Repeater1.DataBind();
            }

        }

        /* 
         * Submit button clicked to submit the form.
         */
        protected void Button2_Click(object sender, EventArgs e)
        {

            /* The forum has passed all of the validation rules for this case and we can add a new student to the list */
             if(Page.IsValid) {

                /*if its valid then create a new student object to put into the list of students
                  get the data from POST*/
                 myStudents.Add(new Student(FNameTextBox.Text, LNameTextBox.Text, SIDTextBox.Text, POSDropDownList.SelectedItem.Text, POListBox.SelectedItem.Text));

                 Label1.Text = "" + myStudents.Count;

              }

        }
    } 
```

这是中继器的代码：

```
<asp:Repeater ID="Repeater1" runat="server">
  <HeaderTemplate>
         <table border="1">
            <tr>
               <td><b>First Name</b></td>
               <td><b>Last Name</b></td>
               <td><b>Student ID</b></td>
               <td><b>Program</b></td>
               <td><b>Option</b></td>
            </tr>
      </HeaderTemplate>

      <ItemTemplate>
         <tr>
            <td> <%# DataBinder.Eval(Container.DataItem, "FName")%> </td>
            <td> <%# DataBinder.Eval(Container.DataItem, "LName") %> </td>
            <td> <%# DataBinder.Eval(Container.DataItem, "STID")%> </td>
            <td> <%# DataBinder.Eval(Container.DataItem, "Program") %> </td>
            <td> <%# DataBinder.Eval(Container.DataItem, "Option") %> </td>
         </tr>
      </ItemTemplate>

      <AlternatingItemTemplate>
        <tr bgcolor="#e8e8e8">
          <td> <%# DataBinder.Eval(Container.DataItem, "FName")%> </td>
            <td> <%# DataBinder.Eval(Container.DataItem, "LName") %> </td>
            <td> <%# DataBinder.Eval(Container.DataItem, "STID")%> </td>
            <td> <%# DataBinder.Eval(Container.DataItem, "Program") %> </td>
            <td> <%# DataBinder.Eval(Container.DataItem, "Option") %> </td>
        </tr>
       </AlternatingItemTemplate>

      <SeparatorTemplate>
        <tr>
        <td colspan="5"><hr /></td>
        </tr>
      </SeparatorTemplate>

      <FooterTemplate>
         </table>
      </FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:32:26.880

DataBind 在您向 DataSource 添加新 Student 之前完成。

添加

```
Repeater1.DataBind(); 
```

在您的 Click 事件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:23:28.323

我已经重构了你的代码，现在它应该可以工作了

```
/* Class for the web form UI */
public partial class _Default : System.Web.UI.Page
{

    /* List of students to be displayed in the repeater control */
    private List<Student> myStudents = new List<Student>();

    protected void Page_Load(object sender, EventArgs e){

        /* Check postback value when the page loads - this is the first time */
        if (IsPostBack == false){
          this.bindRepeater();
        }
    }

 private void bindRepeater(){
  /* Bind the Collection to the Repeater control */
            Repeater1.DataSource = myStudents;
            Repeater1.DataBind();
            Label1.Text = "" + myStudents.Count;
            }

    /* 
     * Submit button clicked to submit the form.
     */
    protected void Button2_Click(object sender, EventArgs e)
    {

        /* The forum has passed all of the validation rules for this case and we can add a new student to the list */
         if(Page.IsValid) {

            /*if its valid then create a new student object to put into the list of students
              get the data from POST*/
             myStudents.Add(new Student(FNameTextBox.Text, LNameTextBox.Text, SIDTextBox.Text, POSDropDownList.SelectedItem.Text, POListBox.SelectedItem.Text));
             this.bindRepeater();

          }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:39:05.277

我弄清楚了为什么我们不能保留这些价值观。我们需要利用会话。在我们进行任何数据绑定之前，需要声明一个会话。

# objective-c - Magnetic NSWindows

> ID：12663772
> 
> 赞同：1
> 
> 时间：2012-09-30T18:20:13.280
> 
> 标签：objective-c, cocoa, frame, nswindow, nswindowcontroller

I'm trying let two NSWindows to move together (NSWindows are Attached to each other). by using

`- (void)windowDidMove:(NSNotification *)notification`

But this method is lazy and it's not working live. Overriding `setFrameOrigin` and other `setFrame` methods did not work as well. I was wondering what is the best way to do this? I'll appreciate any suggestions with different approaches.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:46:36.503

Child Windows seem to be best suited for your situation.

They are simple enough to implement, and are done through the [`-addChildWindow:ordered:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-BCIBCGJE) method of `NSWindow`. The reference explains it pretty well, so I'll just copy that here:

> After the childWindow is added as a child of the window, it is maintained in relative position indicated by orderingMode for subsequent ordering operations involving either window. While this attachment is active, moving childWindow will not cause the window to move (as in sliding a drawer in or out), but moving the window will cause childWindow to move.

In essence, when you move the parent window, the child window will move with it without additional code. Sounds like what you want.

# python - /usr/bin/env python打开python，但是./blabla.py不执行

> ID：12663774
> 
> 赞同：0
> 
> 时间：2012-09-30T18:20:35.313
> 
> 标签：python, centos

python blabla.py 将执行。但是 ./blabla.py 在 CentOS6.3 上给我一个“没有这样的文件或目录”的错误。

/usr/bin/env python 确实可以正确打开 python。

我是 linux 新手，真的很想让这个工作。有人可以帮忙吗？

提前致谢！

* * *

注意：感谢所有快速回复！我在开头确实有 #!/usr/bin/env python 行。

其中 python 将 /usr/bin/python 作为输出。

chmod +x 也完成了。

./blabla.py 的确切错误是“没有这样的文件或目录”，但 python blabla.py 运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:22:38.750

`#!/usr/bin/env python`在脚本文件的开头添加。

它告诉您的系统搜索 python 解释器并使用它执行您的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:31:09.873

```
chmod +x blabla.py 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T14:19:45.533

当您复制文件时，它包含 Windows 样式的行尾（称为 CR LF 或“\r\n”）。如果您在 bash 中执行带有 windows 行结尾的脚本，它将把 CR 字符视为任何其他字符。因此，您的解释器不是在寻找`/usr/bin/python`但`/usr/bin/python\r`会导致`no such file or directory`错误。当您通过解释器运行 python 时，因为`$ python script_name.py`解释器知道 windows 样式的行结尾，所以它会工作。

为了解决这个问题，您需要删除所有 \r 字符。类似的命令`dos2unix`很有用。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/2613800/how-to-convert-dos-windows-newline-crlf-to-unix-newline-n-in-a-bash-script)。

# java - Java密码学编译错误

> ID：12663776
> 
> 赞同：1
> 
> 时间：2012-09-30T18:20:48.320
> 
> 标签：java, cryptography

我想创建 PEM 编码的认证请求，但代码如下

显示错误：

PKCS10CRexample.java:33：找不到符号

符号：变量 Utils

位置：PKCS10CR 类示例

```
 kpGen.initialize(1024, Utils.createFixedRandom());
                           ^ 
```

1 个错误

但代码是来自'Beginning Cryptography with Java'的示例，因此它不应该

包括任何语法错误。

有什么问题？，我应该包括什么课程？

```
import java.io.OutputStreamWriter;
import java.security.KeyPair;
import java.security.KeyPairGenerator;

import javax.security.auth.x500.X500Principal;

import org.bouncycastle.jce.PKCS10CertificationRequest;
import org.bouncycastle.openssl.PEMWriter;

public class PKCS10CRexample
{
    public static PKCS10CertificationRequest generateRequest(
            KeyPair pair)
            throws Exception

            {           
             return new PKCS10CertificationRequest(
                     "SHA256withRSA",
                     new X500Principal("CN=Requested Test Certificate"),
                     pair.getPublic(),
                     null,
                     pair.getPrivate());
            }

    public static void main(String[] args) throws Exception
    {
        //create the keys
        KeyPairGenerator kpGen = KeyPairGenerator.getInstance("RSA", "BC");

        kpGen.initialize(1024, Utils.createFixedRandom());

        KeyPair pair=kpGen.generateKeyPair();

        PKCS10CertificationRequest request = generateRequest(pair);

        PEMWriter pemWrt = new PEMWriter(
                          new OutputStreamWriter(System.out));

        pemWrt.writeObject(request);

        pemWrt.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:22:39.027

实现 createFixedRandom()的[Utils 类](http://amadousarr.free.fr/java/JAVA-crypto-examples/doc/chapter4/Utils.html)似乎是本书第 4 章中的一个。

看看本书的第 4 章和本章的例子。

# php - PHP 致命错误：“Swift_TransportException”和消息“无法在 SMTP 服务器上进行身份验证”

> ID：12663783
> 
> 赞同：4
> 
> 时间：2012-09-30T18:21:32.750
> 
> 标签：php, smtp, gmail, swiftmailer

我知道以前有人问过这个问题，并且我已经阅读了那里的所有帖子，但我仍然找不到解决方案。

我有一台安装了 wamp 的 Windows 机器。当我尝试通过谷歌的 SMTP 服务器发送一封简单的电子邮件时，一切正常。但是，当我将相同的脚本复制到 Ubuntu 12 机器时，它给了我这个错误：

```
PHP Fatal error:  Uncaught exception 'Swift_TransportException' with message 'Failed to authenticate on SMTP server with username "xxx@gmail.com" using 2 possible authenticators' in /home/TestMail/SwiftMail/lib/classes/Swift/Transport/Esmtp/AuthHandler.php:171
Stack trace:
/home/TestMail/SwiftMail/lib/classes/Swift/Transport/EsmtpTransport.php(289): Swift_Transport_Esmtp_AuthHandler->afterEhlo(Object(Swift_SmtpTransport))
/home/TestMail/SwiftMail/lib/classes/Swift/Transport/AbstractSmtpTransport.php(114): Swift_Transport_EsmtpTransport->_doHeloCommand()
/home/TestMail/SwiftMail/lib/classes/Swift/Mailer.php(76): Swift_Transport_AbstractSmtpTransport->start()
/home/TestMail/testmail.php(73): Swift_Mailer->send(Object(Swift_Message))
thrown in /home/TestMail/SwiftMail/lib/classes/Swift/Transport/Esmtp/AuthHandler.php on line 171 
```

这就是我初始化传输的方式：

```
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, 'ssl') 
```

我尝试`smtp.gmail.com`在端口 465 上 telnet，它工作正常，所以它一定不是防火墙问题。

我使用 PHP 启用了 SSL。我尝试使用不同的邮件服务器发送带有和不带有 SSL 的两封单独的邮件，一切都像魅力一样。只有谷歌的邮件让我生气。

任何想法都会在这里受到欢迎。

我的整个php代码：

```
<?php
require_once 'SwiftMail/lib/swift_required.php';
// Create the Transport
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, 'ssl')
  ->setUsername('xxx@gmail.com')
  ->setPassword('xxx');

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

$htmlbody = 'some html here';

// Create a message
$message = Swift_Message::newInstance('without head')
    ->setFrom(array('<from email>' => '<some sender>'))
    ->setTo(array('<to email>' => '<some recepient>'))
    ->setBody($htmlbody, 'text/html');

// Send the message
$result = $mailer->send($message);

var_dump($result);
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-07-03T21:26:25.577

这是一个旧线程，但是对于相同的错误，我的解决方案有点不同。原来我的 Swift 配置很好。我的服务器的 IP 被谷歌阻止为可疑。我可以通过访问此链接来清除它，然后从服务器执行我的邮件程序代码。

[http://www.google.com/accounts/DisplayUnlockCaptcha](http://www.google.com/accounts/DisplayUnlockCaptcha)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:44:39.870

您还可以检查是否未启用两步验证身份验证。我就是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T19:20:31.917

欢迎来到 SO。这更像是一个冗长的评论而不是一个答案。很高兴看到您发布了错误消息：

> PHP 致命错误：未捕获的异常 'Swift_TransportException' 和消息'无法在 /home/TestMail/SwiftMail/lib/classes/Swift/Transport/Esmtp/ 中使用 2 个可能的身份验证器在用户名“xxx@gmail.comm”的 SMTP 服务器上进行身份验证AuthHandler.php:171

其中一部分是实际消息：

> 无法使用 2 个可能的身份验证器在用户名“xxx@gmail.comm”的 SMTP 服务器上进行身份验证

我会说这是你犯的错字：

```
xxx@gmail.comm
             ^ 
```

可以发生。请验证您使用的是正确的登录凭据。此外，即使您在网站上发现类似的问题，也不一定意味着它们涵盖了您的问题。

希望这会有所帮助，否则请尝试提供更多错误信息，例如是否有 swiftmailer 的日志？您是否仔细检查了凭据和服务器配置？防火墙在做什么？等等等等。

# c - 优先队列阵列 (c)

> ID：12663786
> 
> 赞同：0
> 
> 时间：2012-09-30T18:22:33.897
> 
> 标签：c, struct, priority-queue

我正在构建一个优先级队列，但不是用整数填充 PQ 数组，而是分配一个指向结构的指针。下面是 PQ 的两个结构的代码，初始化器和插入函数：

```
typedef struct HeapStruct *PriorityQueue;
typedef struct Customer *CustomerP;

struct HeapStruct {
    int Capacity;
    int Size;
    int *Elements;
};

struct Customer {
    float arrivalT;
    float waitT;
    float departureT;
    float currentT;
    CustomerP *siblingR; //Used for linked list
};

PriorityQueue Initialize() {
    PriorityQueue H = (PriorityQueue) malloc(sizeof (struct HeapStruct));
    CustomerP sentinal = malloc(sizeof (struct Customer));
    sentinal->currentT = MinData;
    H->Capacity = 101;
    H->Size = 0;
    H->Elements[0] = &sentinal; //Syntax Error
    return H;
}

void Insert(CustomerP X, PriorityQueue H) {
    int i;
    if (IsFull(H)) {
        printf("Priority queue is full");
        return;
    }
    //Syntax errors
    for (i = ++H->Size; H->Elements[i/2]->currentT > X->currentT; i /= 2)
    H->Elements[i] = H->Elements[i/2];
    H->Elements[i] = X;
} 
```

所以我试图在 Int 数组中放置一个指针并进行比较，例如 H->Elements[i]->currentT，但我不知道如何处理指向数组中结构的指针并从那里。

任何人都可以帮我解决这个问题吗？如果需要，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:36:57.110

你希望 Eements 成为

```
CustomerP* 
```

那么你需要分配一些内存， `H->Elements` 以便我可以保存所有指针。

也许 ：-

```
H->Elements =  malloc(sizeof (CustomerP) * H->Capacity); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T19:12:08.853

`Elements`您`HeapStruct`需要根据要存储在堆中的内容适当地定义您的字段。然后，您需要在使用它之前为其分配内存。

所以第一个问题，堆里想要什么？您说您想要客户（不是`int`s，这是您所拥有的），但是您想要结构本身（`Customer`）还是指向结构的指针（`Customer *`或`CustomerP`）。假设您想要后者：

```
struct HeapStruct {
    int Capacity;
    int Size;
    CustomerP *Elements;
}; 
```

然后你需要为它正确分配空间：

```
H = (PriorityQueue) malloc(sizeof (struct HeapStruct));
CustomerP sentinal = malloc(sizeof (struct Customer));
sentinal->currentT = MinData;
H->Capacity = 101;
H->Size = 0;
H->Elements = malloc(sizeof(CustomerP) * H->Capacity);
H->Elements[0] = sentinal; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T18:30:36.860

```
H->Elements = (int *)malloc(sizeof(int));
H->Elements[0] = &sentinal; 
```

或 H-> 元素 = &sentinal;

两者都应该工作。

# implementation - 零抑制 BDD 的交集——使用 ZDD 实现多项式

> ID：12663788
> 
> 赞同：6
> 
> 时间：2012-09-30T18:22:37.893
> 
> 标签：implementation, polynomial-math, binary-decision-diagram

我正在尝试使用 ZDD 实现单变量多项式，正如[另一个问题](https://stackoverflow.com/questions/12396151/optimizing-polynomial-implementation)的评论中所建议的那样。

我读过 S. Minato 的论文（你可以[在这里](http://cecs.uci.edu/~papers/compendium94-03/papers/1995/edt95/pdffiles/09a_3.pdf)下载），但我不明白如何在这些 ZDD 上实现操作。

论文中的想法是多项式可以用`x^(2^i)`变量来表示。例如`x^5 + x^3 + x`可以重写为`x^4x^1 + x^2x^1 + x^1`，如果您为每个`x^(2^i)`变量创建节点并与相乘的“1-edge”变量和相加的“0-edge”变量连接，您可以轻松获得表示该多项式的图形. ZDD 是在图上强制执行某些条件的此类图（有关更多信息，请阅读 Minato 的文章和关于 BDD的维基百科[页面）](http://en.wikipedia.org/wiki/Binary_decision_diagram)

系数可以类似地使用 2 的幂和来表示（例如`5 = 2^2 + 2^0`等。每个`2^i`都是变量，并且节点以相同的方式与 1 和 0 边连接）。

现在，我的问题是添加两个 ZDD 的算法。算法看起来很简单：

> 如果 F 和 G (ZDD) 没有共同的组合，则加法 (F + G) 只需合并即可完成。当它们包含一些常见的组合时，我们计算以下公式： (F + G) = S + (Cx2)，其中 C = F ∩ G, S = (FUG) \ C 。通过重复这个过程，最终会用尽常见的组合并完成该过程。

问题是：如何有效地找到“C”和“S”？

作者提供了乘法的代码，但是一旦你实现了前面的算法，代码实际上是*微不足道的。*而且由于没有提供这些算法，因此乘法运算也是“无用的”。

此外，“合并”ZDD 的概念也没有得到很好的解释，尽管考虑到变量的顺序应该是一致的，只有一种方法可以将图合并在一起，而且维持这种顺序的规则可能很简单够了（我还没有将它们正式化，但我对它们有一个粗略的了解）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:03:25.793

使用“合并”，Minato 表示联合[（算法）](http://crypto.stanford.edu/pbc/notes/zdd/meld.xhtml)。您也可以从示例中看到这一点：

```
4 * y     = { { 2^2, y } }
x         = { { x } }
4 * y + x = { { 2^2, y }, { x } } 
```

这个想法是内部集合代表产品，整个 ZDD 代表这些产品的总和，所以如果你只是在更多集合中进行 OR（也称为联合或合并），它们就会被有效地添加。

The complete summation algorithm actually just does `(A xor B) + 2 * (A and B)` (recursively) which is equivalent to the familiar bitwise addition algorithm, but the `xor` was written as `(A or B) without (A and B)`.

That also makes it obvious why simply taking the union is OK when there are no common combinations - if `A and B` is empty, `A xor B` is the same as `A or B` and the "carry" is zero.

The algorithms for OR, AND, XOR and BUTNOT are explained in detail in The Art of Computer Programming volume 4, [section 7.1.4](http://www.cs.utsa.edu/~wagner/knuth/fasc1b.pdf) (the answer to question 199 is relevant). The general idea for all of them is that they consider the two sub-graphs that represent all the sets *with* the variable `v` and all the sets *without* the variable `v` separately (which are both trivially found if `v` is the topmost variable in one or both arguments as either the low and high children or the input itself), and then combining the result.

```
Union(F, G) =
  if (F = ∅) return G
  if (G = ∅) return F
  if (F = G) return F
  if (cache contains "F ∪ G" or "G ∪ F")
    return cached value

  if (F.v = G.v) result = MakeNode(F.v, F.lo ∪ G.lo, F.hi ∪ G.hi)
  if (F.v > G.v) result = MakeNode(G.v, F ∪ G.lo, G.hi)
  if (F.v < G.v) result = MakeNode(F.v, F.lo ∪ G, F.hi)

  cache result as "F ∪ G"
  return result

Intersect(F, G) =
  if (F = ∅ or G = ∅) return ∅
  if (F = G) return F
  if (cache contains "F ∩ G" or "G ∩ F")
    return cached value

  if (F.v = G.v) result = MakeNode(F.v, F.lo ∩ G.lo, F.hi ∩ G.hi)
  if (F.v > G.v) result = F ∩ G.lo
  if (F.v < G.v) result = F.lo ∩ G

  cache result as "F ∩ G"
  return result 
```

# r - 使用循环从 SQLlite db 获取数据的语法？

> ID：12663790
> 
> 赞同：-2
> 
> 时间：2012-09-30T18:22:51.467
> 
> 标签：r, syntax

**解决方案：**

结合下面的答案：

```
#First create a vector with all my dates

#Create a frame to hold the data
testdf = data.frame(sdci=rep("",1),stringsAsFactors=FALSE)

#needs library(lubridate) for month/year functions
library(lubridate)

#Loop and Add data to the df
for (i in 1:lenght(dates2){testdf[i, ] = c(dbGetQuery(con,paste0(' SELECT \
sdci_',year(dates2[i]),'_',sprintf("%02d",month(dates2[i])),'_mean from \ 
gr_sea_outlets_tier2 order by area_km2'))} 
```

**编辑结束**

我用这个命令一个接一个地获取我的数据：

```
data$"2000/8/1" = dbGetQuery(db,"SELECT sdci_2000_08_mean as '2000/08/01' from  gr_sea_outlets_tier2 order by area_km2 desc limit 1;") 
```

但是因为我有 50 张桌子，所以过程变得有点烦人。

我试图为它创建一个循环，但我不知道语法。

这是我想做的一些伪代码（类似bash）：

```
for year in $(seq 2000 2010); do
    for month in $(seq -w 05 09); do
         data$"$year"/"$month"/01" = dbGetQuery(db,"SELECT sdci_$year_$month_mean as '$year/$month/01' from  gr_sea_outlets_tier2 order by area_km2 desc limit 1;"); 
        done; 
 done 
```

作为一个临时解决方案，我设法让 bash 创建一组命令供我解析为 R。

```
 for year in $(seq 2000 2010); do for month in $(seq -w 05 09); do echo data\$\'"$year"-"$month"-"01"\' \<\- dbConnect\(db,\"SELECT sdci_"$year"_"$month"_mean from gr_sea_outlets_tier2 order by area_km2 desc limit 1\;\"\) >> r.cmd.data ; done; done 
```

但是我认为它可以在 R 中做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:34:12.680

使用列表来存储输出可能是最好的选择。但我们会`mapply`为我们解决这个问题。

```
# Get the inputs we want
years <- 2000:2010
months <- sprintf("%02d", 5:9)
dat <- expand.grid(months = months, years = years)

# Construct a function that gets the query given the month and year
getVal <- function(month, year){
    query <- paste0("SELECT sdci_", 
                    year, "_", month, "_mean as '", 
                    year, "/", month, 
                    "/01' from gr_sea_outlets_tier2 order by",
                    " area_km2 desc limit 1;")
    #dbGetQuery(db, query)
    query
}

# Actually apply the function to each month/year combo of interest
out <- mapply(getVal, dat$months, dat$years) 
```

我注释掉了`dbGetQuery`调用，而是返回了要进行的查询。您可能应该像这样至少运行一次，以在实际运行查询之前检查这些查询是否是您想要的。一旦你想运行它们，只需取消注释调用`dbGetQuery`并删除只包含查询的行。

* * *

编辑：如果我们真的想要一个`for`基于循环的解决方案，那么使用它而不是`mapply`：

```
dat <- list()
for(month in months){
    for(year in years){
        id <- paste(year, month, 1, sep = "/")
        dat[[id]] <- getVal(month, year)
    }
} 
```

# c++ - 从头文件创建目标文件？

> ID：12663792
> 
> 赞同：0
> 
> 时间：2012-09-30T18:23:28.503
> 
> 标签：c++, g++

是否可以从头文件创建目标文件（.o）？(.h / .hpp)。所有代码都内联在标题中...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T18:27:08.803

是的，只需告诉编译器将其编译为 C++ 文件并将结果写入 a `.o`or`.obj`文件即可。但如果所有函数都是内联的，则代码无需执行任何操作，因此生成的目标文件中将没有任何代码。因此，这样做通常没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:26:47.757

不，但最近的 GCC（例如 Linux 上的 GCC 4.7）能够使用[预编译头](http://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html)工具编译*单个*头文件。警告，只有当您的应用程序的每个源文件都包含一个头文件（通常包括系统或第三方库头文件）时，这才有效。

另请参阅[此回复](https://stackoverflow.com/a/12438040/841108)，其中解释了为什么会这样。

您可能对链接时优化感兴趣，例如在编译时和链接时传递[-flto](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)到`g++`

# linux - Glassfish 进程被杀死

> ID：12663793
> 
> 赞同：1
> 
> 时间：2012-09-30T18:23:31.500
> 
> 标签：linux, glassfish, glassfish-3

我有一个奇怪的问题，我在 Amazon AMI Linux 实例上运行 glassfish 3.1.2.2，服务器运行正常大约两周，但它会死掉。server.log 中没有任何关于它的内容，前一分钟它像正常一样处理请求，然后整个过程都消失了。我检查了操作系统日志，例如 /var/log/messages。特别是，我一直在寻找 oom-killer，因为我的一个想法是该进程因使用大量内存或其他东西而被收割，但在日志中杀死该进程没有任何意义。有没有人有任何想法来追踪这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:04:40.480

有时 glassfish 需要更多内存，如我们的预期。请查看 JVM 调整以及为 glassfish 分配更多内存。我确定这是由于 GC 周转而导致您的服务器崩溃。我希望您没有在虚拟机上安装它.

# c# - 可以将 System.Windows.Forms 添加到 WinRT 项目吗？

> ID：12663794
> 
> 赞同：2
> 
> 时间：2012-09-30T18:23:34.200
> 
> 标签：c#, winforms, reference, windows-8, windows-runtime

我想将一个使用 System.Windows.Forms 命名空间的类库添加到我的 Windows 8 应用程序中。当我添加命名空间并构建解决方案时，我收到一个错误：

```
 Cannot find type System.Resources.ResourceSet in module mscorlib.dll. 
```

是否可以添加 System.Windows.Forms？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T18:29:13.107

不，`System.Windows.Forms`在 Windows 应用商店应用中不受支持。[以下](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)是所有受支持的 .NET 命名空间和其中的类的列表。

您不能只从 Windows 应用商店应用程序中引用现有的 .NET 程序集。它们需要是可移植类库或 Windows 应用商店应用程序的类库。

# android - 如何在 Android NDK 中为特定文件设置优化级别？

> ID：12663799
> 
> 赞同：1
> 
> 时间：2012-09-30T18:24:53.450
> 
> 标签：android, optimization, android-ndk, neon

我有一个用于 Android 的本机库，其中包含一些包含 NEON 汇编代码的文件。我从其他一些编码员那里继承了这段代码，并且至少可以说，鉴于我对 NEON 程序集编码（或任何程序集，就此而言）的了解是轻薄的。无论如何，我注意到以下问题：当我使用 'ndk-build NDK_DEBUG=1' 编译时，一切都很好。当我编译发布时，'ndk-build NDK_DEBUG=0'，编译器优化掉汇编代码。我已经设法通过破解 ndk 构建脚本并将我的库分成两部分来解决这个问题，其中一个库包含所有的程序集文件 - 对于这个库，我以一种非常 hacky 的方式将优化设置为“-O0” . 所以问题是：如何为特定文件指定优化级别？在 Application.mk 中设置 APP_OPTIM，这会影响所有编译的文件。NDK_DEBUG 标志也是如此。

编辑：根据 Alex 的要求，这是我最终使用的 Android.mk，将 lib 分成两部分：一部分带有汇编代码（和 -O0），另一部分带有常规 C 代码（和 -O2）：

```
LOCAL_PATH := $(call my-dir)

# assembly_neon_code_here (neon) module - turn optimization off
include $(CLEAR_VARS)

LOCAL_MODULE := assembly_neon_code_here
LOCAL_SRC_FILES := assembly_neon_code_here.cpp
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
    LOCAL_ARM_NEON := true
endif

LOCAL_CFLAGS := -O0
LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -llog 
include $(BUILD_SHARED_LIBRARY)

# main module
include $(CLEAR_VARS)

LOCAL_MODULE    := complete_lib
LOCAL_SRC_FILES := regular_src1.cpp regular_src2.cpp regular_src3.cpp 
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
    LOCAL_ARM_NEON := true
endif

# allow logcat calls
LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -llog -lz
LOCAL_SHARED_LIBRARIES := assembly_neon_code_here
include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:27:38.603

GCC >= 4.4 似乎支持`#pragma GCC optimize`更改优化级别的中间文件，并且还可以为`optimize`每个函数设置它。

请参阅[http://gcc.gnu.org/onlinedocs/gcc-4.4.7/gcc/Function-Specific-Option-Pragmas.html#Function-Specific-Option-Pragmas](http://gcc.gnu.org/onlinedocs/gcc-4.4.7/gcc/Function-Specific-Option-Pragmas.html#Function-Specific-Option-Pragmas)和[http://gcc.gnu.org/onlinedocs /gcc-4.4.7/gcc/Function-Attributes.html#Function-Attributes](http://gcc.gnu.org/onlinedocs/gcc-4.4.7/gcc/Function-Attributes.html#Function-Attributes)。

根据这些链接，将`#pragma GCC optimize ("O0")`导致问题的文件放在顶部应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T21:53:53.847

我不知道如何更改每个文件的优化级别，但这样做可能会损害您的应用程序的性能，所以我不推荐它。我假设汇编代码是*内联汇编块*的形式，即汇编代码块与普通的 C 或 C++ 代码交错。它看起来如下

```
asm {
  .. assembly goes here, usually each line in double-quotes, often ending in \n\t
  : ... input operands. Might not be present ...
  : ... output operands. Might not be present ...
  : ... clobber operands. Might not be present ...
} 
```

编译器删除内联汇编块的最可能原因是它不包含输出操作数，或者输出操作数全部未使用。您可以通过将内联汇编块标记为`volatile`告诉编译器不要弄乱它来避免尝试。为此，只需`volatile`在`asm`关键字后面写。

阻止编译器弄乱内联汇编块的另一件事是将“内存”添加到他们的clobber列表中。这告诉编译器程序集正在读取或写入任意内存位置。当您使用它时，还要添加“cc”以获得良好的效果。这告诉编译器内联汇编与条件代码寄存器混淆，即它执行的测试指令会影响后面的条件分支指令的行为。

总之，尝试使所有内联汇编块看起来像这样

```
asm volatile {
  .. whatever ...
  : ... whatever ...
  : ... whatever ...
  : ... whatever ..., "cc", "memory"
} 
```

注意，`asm`也可能是拼写`__asm__`，that`volatile`也可能是拼写`__volatile__`。

# java - 版本控制数据库的正确策略

> ID：12663801
> 
> 赞同：13
> 
> 时间：2012-09-30T18:25:01.253
> 
> 标签：java, mysql, database, version-control

我正在阅读这个[博客](http://www.codinghorror.com/blog/2008/02/get-your-database-under-version-control.html)，我对所写的 5 篇文章有疑问。据我了解，您在包含所有 SQL DDL 语句的大型基线脚本上创建。完成此操作后，您可以在单独的脚本中跟踪每个更改。

但是我不明白脚本文件的名称如何与您的应用程序的特定构建相关联？他说，如果用户报告 3.1.5.6723 中的错误，您可以将脚本重新运行到该版本。你会在自己的文件中跟踪对表等的更改，还是在同一个脚本文件中进行所有 DLL 更改，然后按照他的说法在自己的文件中拥有视图等？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T20:09:43.397

首先，数据库升级是邪恶的，但该[博客](http://www.codinghorror.com/blog/2008/02/get-your-database-under-version-control.html)描述了一场彻头彻尾的噩梦。

可以根据升级方法创建程序员能力矩阵：

*   0级：根本没有升级。客户很害怕并使用应用程序提供的 UI 或第三方数据库管理解决方案手动移动数据（相信我，这确实是可能的）。
*   级别 1：有升级数据库转储的脚本。客户感到安全，但他们将在未来 1-2​​ 年内解决微小且非常烦人的问题。系统正在运行，但不允许更改。
*   级别 2：更改表。巨大的停机时间，尤其是在升级过程中出现问题的情况下。巨大的问题，几乎不能保证获得 100% 的安全结果。数据转换由一个有缺陷的脚本管理。客户不高兴。
*   第 3 级：无模式设计：一两个小时的停机时间让有缺陷的脚本翻译数据库中的配置（此步骤在许多情况下可能会损坏数据库）。支持人员已完全耗尽所有咖啡储备。
*   第 4 级：延迟透明升级：零停机时间，但仍可能出现一些问题。客户几乎很高兴，但仍然记得以前的经历。
*   5 级：理想架构，无需显式升级。总幸福。客户不知道升级程序是什么。开发人员富有成效且冷静。

我将描述所有技术问题，但在此之前让我声明以下内容（请原谅我的回答很长）：

*   现在开发周期非常压缩，数据库很大
*   几乎任何功能都可能引入方案更改并破坏兼容性，因此我们要么有一个简单而稳定的升级过程，要么我们可能会推迟一个功能
*   客户可能会发现问题，因此有机会进行紧急热修复构建，需要一些升级步骤
*   一般来说，最好避免您和客户之间的任何障碍

**0 级和 1 级** 这两种情况都是明显而愚蠢的。任何人都应该避免这种情况。

**2 级** 更改对于小桌子来说并没有那么糟糕，但对于大桌子来说可能是个问题。在非常大的表 (>1Gb) 上，完成 ALTER TABLE 可能需要几个小时甚至几天。此外，它确实只解决了模式升级问题，但存储数据呢？我还建议考虑物理数据布局，以了解这种方法背后的实际障碍。整个过程可能不安全，因此请确保您有备份。

解决方案：

*   复制和重命名：[http ://www.rndblog.com/don%E2%80%99t-alter-table-do-copy-and-rename/](http://www.rndblog.com/don%E2%80%99t-alter-table-do-copy-and-rename/)
*   表拆分（应用级分区）：[http ://www.mysqlperformanceblog.com/2006/10/08/small-things-are-better/](http://www.mysqlperformanceblog.com/2006/10/08/small-things-are-better/)
*   分区（有一些限制）

**级别 3** 架构升级的问题通过将架构移到更高层来解决。无模式解决方案有些有限，主要是因为它禁用了关系模型背后的全部功能。可以提出一种混合方法，以同时具有快速升级和使用关系代数的能力。有一些有趣的文章：

*   [http://backchannel.org/blog/friendfeed-schemaless-mysql](http://backchannel.org/blog/friendfeed-schemaless-mysql)
*   [http://yoshinorimatsunobu.blogspot.com/2010/10/using-mysql-as-nosql-story-for.html](http://yoshinorimatsunobu.blogspot.com/2010/10/using-mysql-as-nosql-story-for.html)

请注意，升级过程的复杂性仍然存在，只是转移到了应用程序级别。有许多相关的场景，但我将描述一个我已经使用了几年的混合系统。我可以将数据模型描述为“具有关系的实体”。实体之间的关系在数据库级别表示，实体本身存储为 XML blob。

这个系统很成熟，有足够多的客户。有很多功能请求，所以研发和 QA 团队有点压力。最初的升级过程是作为一个独立的 Java 应用程序实现的，它从 DB 中读取 XML blob，使用 DOM API 对其进行升级并将其写回 DB。实际的方法看起来很简单，但背后有几个隐藏的问题：

*   升级逻辑可能有点错误，因此有可能写入错误的 XML 数据，从而显着增加客户的停机时间
*   读取-转换-写入 1-2GB 的 XML 可能需要一些时间
*   所有升级过程步骤都应包含自动化测试（我会说 CI 是必须的）
*   一两天内可能会发现隐藏的故障，因此备份不再有用，因为插入了新数据
*   升级代码可能会变得有点混乱，特别是如果您想要/需要在构建之间进行升级（任何敏捷团队的正常要求）

我试图通过使用更严格的升级程序定义、验证规则和 CI 系统针对真实数据（收集所有客户）执行的广泛测试来降低所有潜在风险。由于旧升级脚本很久以前引入的旧问题，我很惊讶地看到一些步骤失败。为了解决隐藏的问题，开发了单独的升级步骤。还进行了一些优化以将升级时间减少到合理的 20-30 分钟。基于控制台的进度条实现完成了剩下的工作。

快速说明：任何最终用户都渴望看到任何长时间运行（> 2 分钟）操作的进展。请不要忘记实现这样的“乐趣”。

最初 DB 版本存储在单独的表中。请不要使用这种方法，因为单独对实体进行版本化并避免在升级期间锁定整个数据库会更好。

将显示一个升级过程作为示例（所有验证和验证步骤都隐藏在处理逻辑后面`<build/>`）`<version/>`。'-' 表示更少，'*' - 任何构建

```
<?xml version="1.0"?>
<upgrade>

   <version name="-7.4">
      <build name="*">
        <script class="upgrade.version7.Replace...Script"/>
        <script class="upgrade.version7.Update...Script"/>
         <!-- 5 scripts skipped -->
      </build>
   </version> 
   <version name="-7.6">
      <build name="*">
    <script class="core.DatabaseUpdateVersion" version="7.6.48"/>
      </build>
   </version>
   <version name="7.6">
      <build name="*">
        <script class="upgrade.version7.Update...Script"/>
    <script class="core.DatabaseUpdateVersion" version="8.0.40"/>
         <!-- 7 scripts skipped -->
      </build>
   </version>

   <version name="8.0">
      <build name="-53">... </build>
      <build name="+52">... </build>
   </version>

   <version name="8.1">
      <build name="-8"> ... </build>      
     <build name="-9">...</build>      
     <build name="-26">...</build>      
     <build name="-40">...</build>      
      <build name="-45">...</build>      
      <build name="-56">...</build>      
      <build name="-61">...</build>      
      <build name="-63">...</build>      
      <build name="-64">...</build>      
      <build name="-68">...</build>      
      <build name="-69">...</build>      
      <build name="-77">...</build>      
      <build name="-79">...</build>      
      <build name="-80">...</build>      
      <build name="-86">...</build>      
      <build name="-88">...</build>
      <build name="-89"> ... </build>
   </version> 

   <version name="8.2">...</version>
</upgrade> 
```

每个脚本都是一个小型 Java 或 Groovy 实现（也使用了 XSLT）。后来还开发了降级程序，但这是完全不同的故事。

**应用层的4 级** 数据方案允许做很多有趣的事情。例如，可以用[protobuf](http://code.google.com/p/protobuf/)替换 XML 。像往常一样，这样做有几个原因（它更简单、更快等）。如果你不喜欢建设者的概念，你可以使用[Thrift](http://thrift.apache.org/)。

无论如何，protobuf 允许创建一个向后兼容的系统（就存储的数据而言）几乎没有头痛。顺便说一句，优势不错。让您的系统向后兼容，您可以轻松实现惰性和完全透明的升级。它可以是后台进程或根据请求进行升级等。好消息是零停机时间、快乐的用户以及更频繁地进行升级的能力。这意味着您可以快速发展，及时响应客户的要求，换句话说，您可以取得更大的成功。

**5 级** 对不起，这次不是。请注意升级策略。销售一个定义了一些模式的系统并把自己锁在外面是很容易的。没有新功能——没有客户。

简单但非常有用的清单：

*   您能否及时解决来自客户方面的问题？
*   客户升级系统是否安全（如果它至少是关键任务怎么办）？
*   需要多少时间来确定问题？
*   有没有自动验证？

感谢您的阅读。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T20:16:13.693

我个人使用[liquibase](http://www.liquibase.org/)。非常少数的工具。允许非常复杂的工作流程，例如[教程，使用 oracle 和复杂的版本控制方案](http://www.liquibase.org/tutorial-using-oracle)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T09:49:28.980

对表和视图的更改不会保留在它们自己的文件中。您将为所做的每个更改创建一个新的更改脚本。因此，如果您将表 'X' 更改 5 次，那么每次更改都会有 5 个不同的更改脚本。

当您想创建某个版本的架构时，您将获得标记为该版本的源代码。从基线创建数据库。然后按时间顺序在该版本的代码中运行更改脚本。例如

```
db_scripts/

2012-01-01 baseline.sql:
create table book (
   book_name varchar(100),
   author_name varchar(100)
)
--- label version_1.0

2012-02-01 add_publisher.sql:
alter table book add column publisher varchar(100)
--- label version_1.1

2012-03-01 add_publish_date.sql:
alter table book add column publish_date datetime
--- label version_1.2

2012-04-01 add_rating.sql:
alter table book add column rating integer
--- label version 1.3 
```

现在假设您要从 1.2 版开始重新创建数据库：

1.  您会将代码同步到标签 version_1.2
2.  按baseline.sql、add_publisher.sql、add_publish_date.sql的顺序运行脚本

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T13:55:51.100

您可以使用 Flyway ( [http://flywaydb.org/](http://flywaydb.org/) ) 而不是 Liquibase，它允许您编写自己的升级/降级 SQL 脚本。这提供了更大的灵活性，也适用于视图和存储过程。

Liquibase 要求您使用他们自己的基于 XML 的语言进行模式更改，这可能会有些限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T10:20:59.187

在数据库中保留版本号并在启动时应用更新脚本是该策略的重要部分。

以下是启动的工作原理：

*   检查数据库中的 DB_VERSION 记录，
*   查找更新 > 当前版本；也许通过代码。
*   运行每个适用的“更新”、脚本或程序操作..
*   DB_VERSION 每次更新后都会更新，因此中途失败可以重新运行。

例子：

*   当前找到 DB_VERSION = 789；
*   复杂的代码或大长的 IF 链会找到 790 及以上的更新。
*   更新#790，升级客户和账户表；
*   更新#791，升级Email表；
*   更新#792，重构订单表；
*   现在的数据库版本 = 792。

有一些注意事项。这工作得*相当*好；人们声称它应该是 100% 可靠的，但事实并非如此。

脚本不完整、字段长度变化或服务器版本不同等问题有时会导致脚本/SQL 在某些数据库上传递，但在其他数据库上失败。

找到要运行的脚本，可以像使用许多 IF 语句的大型单一方法一样简单。或者您可以更优雅地通过发现或元数据加载脚本。有时能够包含程序代码很有用，而不仅仅是 SQL。

```
public void runDatabaseUpgrades() {
    if (version < 790) {
      // upgrade Customer and Account tbls
      version = 790;
    }
    if (version < 791) {
      // upgrade Email tbl
      version = 791;
    }
} 
```

# tomcat - Terracotta Web 会话 JDBC 数据源不可序列化

> ID：12663802
> 
> 赞同：0
> 
> 时间：2012-09-30T18:25:01.317
> 
> 标签：tomcat, grails, jdbc, terracotta

我一直致力于将 Terracotta Web 会话集成到我们的应用程序架构中。一切都正常运行并正常通信，但是应用程序服务器不断抛出一个巨大的异常。基本上它是说 JDBC 连接器（访问 mysql 数据库）不可序列化（`java.io.NotSerializableException: org.apache.tomcat.jdbc.pool.DataSource`）。

我们正在使用一个池化的 JNDI 连接器，我切换到一个基本的 JNDI 连接器，但仍然遇到问题。

这是我们的资源：托管在 Tomcat 7、Mysql 和最新版本的 Terracotta 上的 Grails 2.04。

编辑：添加了会话检查输出这是来自的输出`session.inspect ()`：

```
 Session Content:
   javamelody.remoteAddr = 0:0:0:0:0:0:0:1%0
       SPRING_SECURITY_CONTEXT = org.springframework.security.core.context.SecurityContextImpl@f140e22a: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@f140e22a: Principal: org.codehaus.groovy.grails.plugins.springsecurity.GrailsUser@b56ac240: Username: test@gmail.com; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@166c8: RemoteIpAddress: 0:0:0:0:0:0:0:1%0; SessionId: 837DF793887F57E6F0563708346A9EE1; Granted Authorities: ROLE_USER
   org.codehaus.groovy.grails.FLASH_SCOPE = org.codehaus.groovy.grails.web.servlet.GrailsFlashScope@58e83637
   javamelody.country = US
   javamelody.sessionActivation = SessionListener[sessionCount=1]
   emailServersService = proxyTargetClass=true; optimize=false; opaque=false; exposeProxy=false; frozen=false
   org.springframework.web.context.request.ServletRequestAttributes.DESTRUCTION_CALLBACK.(inner bean) =    org.springframework.web.context.request.DestructionCallbackBindingListener@753f827a
   grails-resources.debug-timestamp = 1349195096775
   javamelody.remoteUser = test@gmail.com
   org.springframework.web.context.request.ServletRequestAttributes.DESTRUCTION_CALLBACK.emailServersService = org.springframework.web.context.request.DestructionCallbackBindingListener@1c8f53b9 
```

编辑 2：在听从 Burt 的建议后，会话侦听器转储了这些属性名称（以及一些冗长的堆栈跟踪），但同样没有提及数据源。

```
 java.lang.Exception: attribute added: SPRING_SECURITY_LAST_USERNAME
 java.lang.Exception: attribute added: org.openid4java.discovery.DiscoveryInformation
 java.lang.Exception: attribute added: org.codehaus.groovy.grails.FLASH_SCOPE
 java.lang.Exception: attribute added: SPRING_SECURITY_CONTEXT
 2012-10-02 14:17:37,827 [http-bio-8080-exec-9] DEBUG mail.EmailServersService  - Initialization of new EmailServersService
 java.lang.Exception: attribute added: org.springframework.web.context.request.ServletRequestAttributes.DESTRUCTION_CALLBACK.(inner bean) 
```

现在，在出现不可序列化错误之前，侦听器不会触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:26:48.103

我通过删除我标记为会话范围的服务解决了这个问题。在这项服务中，我什至没有与 jdbc 数据源进行交互，所以我真的不知道发生了什么。

希望如果其他人遇到这个问题，他们可以使用服务范围来弄清楚他们的实例发生了什么。

# asp.net - 将 SQL Server 与 Web 服务同步（均由不同供应商管理）

> ID：12663804
> 
> 赞同：0
> 
> 时间：2012-09-30T18:25:06.333
> 
> 标签：asp.net, sql, performance

我有一个有趣的解决方案，我确实得到了解决，但我想知道是否有更好的方法来解决它。

我有一个代表我们核心业务流程的软件。该软件（应用程序“A”）也由 A 公司管理。我对 Web 应用程序的 SQL 服务器具有管理员访问权限，但我无权访问已编译的源代码。

我有第二个软件由公司 B 管理。应用程序 B 具有表示为 Web 服务的集成挂钩，因此其他应用程序可以与之集成。除此之外，我没有任何真正的应用程序访问权限。可能可以获得对应用程序 B 的 SQL Server 管理员访问权限，但目前我没有。

我的问题是连接这两个系统的最佳方式是什么，以便数据尽可能“接近实时”。我为应用程序 A 开发了一个嵌入在 SQL Server 中的 CLR 触发器，但众所周知，它会破坏应用程序的性能。所以我最终在 SQL 服务器上创建了另一个表，该表在一个简单的触发器上写入了与事务相关的必要数据以及一个状态列。然后我设置了一个预定的 exe，它从表中读取数据，并将其输入到应用程序 B。它还相应地更新了状态列，因此我没有遇到线程问题，因为这个可执行文件以高频率运行。

一切都完成后，与我当前解决方案的差距约为 5 分钟。这可能看起来不错，但我们的最终用户期望实时，因此我的支持人员仍然会因为这个解决方案而接到电话。

有人有更好的解决方案吗？我全神贯注，希望在这个过程中学到一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:53:55.453

最好让一个应用程序管理给定的数据资源。如果其他资源需要访问数据，那么通过 Web 或 Windows 服务提供 API 是最好的方法。这集中了与数据的交互，并通过减少重复代码，使管理数据库工作方式的更新变得更加容易。

# c# - 替换输入钩子

> ID：12663807
> 
> 赞同：-2
> 
> 时间：2012-09-30T18:25:28.727
> 
> 标签：c#

我想做一个应用程序，如果它匹配一个模式，它会替换每个输入。例如，如果用户按下 LeftMouseButton + Ctrl，程序会将其更改为右键单击，并仅将其发送到当前活动窗口或捕获窗口。

问题是如何在 C# 中解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:41:37.327

您将需要实现这样的类，您必须对其进行调整以支持鼠标单击以满足您的需求，但它应该向您展示一些初步步骤。

```
public class KeyConverter {
            //All conversions are stored in this dictionary.
    private Dictionary<Keys, Keys> conversions = new Dictionary<Keys, Keys>();

    public KeyConverter() {
        //this conversion will convert every Ctrl+C signal into Ctrl+V
        conversions.Add(Keys.C | Keys.Control, Keys.V | Keys.Control);
    }

    public Keys Convert(Keys keys) {
        if (conversions.ContainsKey(keys))
            return conversions[keys];
        else
            return keys;  //return the input if no conversion is available
    }
} 
```

将您需要的转换添加到转换字典。订阅观察击键的事件并使用当前按下的键调用方法转换。使用返回的密钥发送到您的系统

```
[DllImport("user32.dll")]
public static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, uint dwExtraInfo);

public void SendKey(Keys keys){
    foreach(Keys key in Enum.GetValues(typeof(Keys)))
        if(keys.HasFlag(key))
            keybd_event((byte)key, 0, 0, 0); //press key
    foreach(Keys key in Enum.GetValues(typeof(Keys)))
        if(keys.HasFlag(key))
            keybd_event((byte)key, 0, 0x2, 0); // release key
} 
```

# php - 如何索引我的 MySQL 查询

> ID：12663814
> 
> 赞同：0
> 
> 时间：2012-09-30T18:26:04.710
> 
> 标签：php, mysql

我想知道是否有人可以告诉我如何索引我所做的 MySQL 查询。从只有 120 行的数据库加载需要很长时间。

我的查询是：

```
 $sql = "SELECT firstname, lastname, email, phone, username, password, status, 
memberview, statuschangedate FROM csvdata ORDER BY lastname ";

$sth= $DBH->prepare($sql);
$sth->execute();

while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
code
} 
```

感谢您的时间！

已编辑----------

这是实际发生的事情 -

```
 $sql = "SELECT firstname, lastname, email, phone, username, password, status, memberview, statuschangedate FROM csvdata ORDER BY lastname ";
   $sth= $DBH->prepare($sql);
   $sth->execute();
   $i = 0;
                                echo "<table class='alltable'> 
                                      <tr class='firsttr' style='background:gray;'>
                                      <td>First Name </td>
                                      <td>Last Name </td>
                                      <td>Email </td>
                                      <td>Phone </td>
                                      <td>Username </td>
                                      <td>Password </td>
                                      <td>Status </td>
                                      <td>Memberview</td>
                                      <td>Status Change Date</td>
                                      <td>#</td>
                                      </tr>

                                        ";
                                        $j = 0;
                                while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
                                    $csvfirst = $row;
                                    $csvfirstname = $csvfirst['firstname'];
                                    $csvlastname = $csvfirst['lastname'];
                                    $csvemail = $csvfirst['email'];
                                    $csvphone = $csvfirst['phone'];
                                    $csvusername = $csvfirst['username'];
                                    $csvpassword= $csvfirst['password'];
                                    $csvstatus = $csvfirst['status'];
                                    $csvmemberview = $csvfirst['memberview'];
                                    $csvstatuschange = $csvfirst['statuschangedate'];

                                        $memberfirstnamearray[$j]  = $csvfirstname;
                                    $memberlastnamearray[$j]  = $csvlastname;
                                    $memberemailarray[$j]  = $csvemail;
                                    $memberphonearray[$j]  = $csvphone;
                                    $j++;
                                $i++;

                                    echo "
                                            <tr> 
                                        <td>
                                        $csvfirstname
                                        </td>
                                        <td>
                                        $csvlastname
                                        </td>
                                        <td>
                                        $csvemail
                                        </td>
                                        <td>
                                        $csvphone
                                        </td>
                                        <td>
                                        $csvusername
                                        </td>
                                        <td>
                                        $csvpassword
                                        </td>
                                        <td>
                                        $csvstatus
                                        </td>
                                        <td>
                                        $csvmemberview
                                        </td>
                                        <td>
                                        $csvstatuschange
                                        </td>
                                        <td>
                                        $i
                                        </td>

                                      </tr>
                                    ";

                                }
                                $_SESSION['firstnameexport'] = $memberfirstnamearray;
                                $_SESSION['lastnameexport'] = $memberlastnamearray;
                                $_SESSION['emailexport'] = $memberemailarray;
                                $_SESSION['phoneexport'] = $memberphonearray;
                                $_SESSION['num'] = $j;
                                echo "
                                      </table>";

                } 
```

因此，它从数据库中抓取了大约 120 名员工，加载大约需要 20 秒。我将这张表包含在`div`一个按钮中，一旦你给它计时，jquery 就会`visibility: none`变为可见并向下滑动。

需要帮助请叫我！

已编辑----------

从使用 desc csvdata - 这是永远占用的员工。

```
 'id', 'int(11)', 'NO', 'PRI', NULL, 'auto_increment'
'firstname', 'varchar(105)', 'YES', '', NULL, ''
'lastname', 'varchar(105)', 'YES', '', NULL, ''
'email', 'varchar(105)', 'YES', '', NULL, ''
'phone', 'varchar(105)', 'YES', '', NULL, ''
'username', 'varchar(105)', 'YES', '', NULL, ''
'password', 'varchar(105)', 'YES', '', NULL, ''
'status', 'varchar(105)', 'YES', '', NULL, ''
'memberview', 'varchar(105)', 'YES', '', NULL, ''
'statuschangedate', 'varchar(105)', 'YES', '', NULL, ''
'notes', 'varchar(1000)', 'YES', '', NULL, ''
'customernotes', 'varchar(1000)', 'YES', '', NULL, '' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:21:31.633

嘿，伙计们，你们知道是什么问题吗？

是 JQuery slidedown() 延迟了它，所以我只是切换它以将 css 更改为 display: table 并且工作完美！

代码 -

```
<script>
$(".viewall").click(function () {

    //dropdown.bind('change', function(){   
    //$(".alltable").slideDown(0,function(){
    //});
    $(".alltable").css("display", "table");
    $(".alltable tr").css("display", "table-row");
    $(".alltable td").css("display", "table-cell");
    //$(".alltable tr").slideDown(0,function(){
    //});
    //$(".alltable td").slideDown(0,function(){
    //});
});
$(".closeall").click(function () {

    //dropdown.bind('change', function(){   
    /*$(".alltable").slideUp(200,function(){
    });*/
    $(".alltable").css("display", "none");
    $(".alltable tr").css("display", "none");
    $(".alltable td").css("display", "none");
    /*$(".alltable tr").slideUp(200,function(){
    });
    $(".alltable td").slideUp(200,function(){
    });*/
});

</script> 
```

# java - 如何从java中的文件中读取特定数量的数据

> ID：12663815
> 
> 赞同：0
> 
> 时间：2012-09-30T18:26:04.560
> 
> 标签：java

我有一个 45MB 的大文件，假设我可用的内存有限，我想先读取 5MB，依此类推。

我需要使用 Java 来做到这一点。有人请帮帮我。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:39:06.077

I think you can just use basic byte streams for this. Check out [http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html](http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)

I'd use the read(byte[] b) method of a FileInputStream class which 'Reads up to b.length bytes of data from this input stream into an array of bytes'

read(byte[] b, int off, int len) method would also allow you to do this with an offset for previously read data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:35:12.610

以下代码将从文件中读取 5000 字节 (5MB)。

```
byte[] bytes = new byte[5000]; 
    DataInputStream dis = new DataInputStream(new FileInputStream(file)); 
      int read = 0;
      int numRead = 0;
      while (read < bytes.length && (numRead=dis.read(bytes, read, bytes.length-read)) >= 0) {
        read = read + numRead;
      } 
```

# java - 当我只想要 Java 中大于 5 的值时，如何返回一个数组

> ID：12663817
> 
> 赞同：2
> 
> 时间：2012-09-30T18:26:26.183
> 
> 标签：java, arrays

说我有数组

```
int[] numbers = {1, 2, 3, 6, 1, 7, 9, 8, 12, 1, 8}; 
```

我想编写一个只返回大于 5 的值的方法。我想不通。

我唯一能做的就是返回每一个值，我似乎无法将返回整数分配为仅使用大于 5 的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T18:28:42.357

*以下是您需要遵循的步骤： -*

*   `Iterate`遍历数组并访问每个元素
*   对于每个元素，检查它的值是否为`greater than 5`。
*   如果大于 5，则可以将其添加到`temporary array`
*   在迭代结束时，您`return`可以`temporary array`

但是，如果您使用数组，则必须创建与原始数组大小相同的临时数组。这可能会浪费内存，尤其是当您找不到任何大于 5 的元素时。

更好的选择是使用[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，您可以动态创建它，并且可以动态添加元素。因此您不必担心大小。查看`documentation link`更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:56:41.983

您还应该返回一个数组。

```
ArrayList<Integer> getGreaterThanFive(int[] numbers)
{
    ArrayList<Integer> result = new ArrayList<Integer>();
    for (int number : numbers)
    {
        if (number > 5)
        {
            result.add(number);
        }
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T12:49:06.580

干得好

```
 int[] numbers = {1, 2, 3, 6, 1, 7, 9, 8, 12, 1, 8};
    List<Integer> list = new ArrayList<Integer>();
    for(int i=0; i<=numbers.length-1; i++ ){
        if(numbers[i]>5){
            list.add(numbers[i]);
        }
    }
    System.out.println("List :"+list); 
```

# jsf-2 - Glassfish 3.1.2 的 JSF2 Activiti bmpn 5.10 Web 应用程序示例

> ID：12663820
> 
> 赞同：0
> 
> 时间：2012-09-30T18:26:37.600
> 
> 标签：jsf-2, glassfish-3, activiti

有人可以指出在 glassfish 3.1.2、Activiti 5.10 上使用 JSF2 和 Activiti BPMN 集成工作流的简单应用程序吗？[我在这里](https://stackoverflow.com/questions/12173533/how-to-do-activiti-workflow-integration-with-jsf-application)尝试了这个例子，但是我收到了焊接异常，如下所示：

```
 org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [TaskService] 
    with qualifiers [@Default] at injection point [[field] @Inject private
    com.camunda.fox.demo.twitter.jsf.TaskList.taskService]   
at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:311)
at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:280)
at org.jboss.weld.bootstrap.Validator.validateBean(Validator.java:143)
at org.jboss.weld.bootstrap.Validator.validateRIBean(Validator.java:163)
at org.jboss.weld.bootstrap.Validator.validateBeans(Validator.java:382)
at org.jboss.weld.bootstrap.Validator.validateDeployment(Validator.java:367)
at org.jboss.weld.bootstrap.WeldBootstrap.validateBeans(WeldBootstrap.java:380)
at org.glassfish.weld.WeldDeployer.event(WeldDeployer.java:199)
at org.glassfish.kernel.event.EventsImpl.send(EventsImpl.java:128)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:313)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

如何解决 Glassfish 3.1.2 上的此错误？

我试图将最新的焊接 2.1 快照复制到 glassfish lib 文件夹，但它不起作用。我还尝试了 Activiti 附带的动作源代码示例。

任何有关如何解决此错误的线索或适用于 Glassfish 的示例应用程序将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:24:16.243

通过在项目中包含所有与 activiti 相关的 jar，焊接错误得到了解决。

# ios - SPP配置文件蓝牙iOS

> ID：12663822
> 
> 赞同：12
> 
> 时间：2012-09-30T18:26:44.263
> 
> 标签：ios, bluetooth, serial-port, spp

有没有人有 iOS 的 SPP 通信（通过蓝牙串行）的示例代码？我需要在我的微芯片图片和 iphone 或 iPod 之间进行通信。

我知道我需要一个经过批准的苹果蓝牙 rs232<->BT 加密狗，而且我也有一些带有 MFi 合同的；）

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T21:50:16.560

对于像我这样正在查看信息的人。

如果您不打算在 iOS 和相关的 corebluetooth 中使用蓝牙 LE 设备，您需要来自认证供应商的 MFi 许可证和蓝牙模块。

使用这些模块不涉及核心蓝牙，而是另一件事。查看 EADemo [Demo 了解如何链接到 MFi 设备](https://developer.apple.com/library/ios/#samplecode/EADemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010079) 链接的蓝牙模块可以通过这种方式访问​​。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:19:39.777

你有两个选择：

1.  对于小型项目、研究、开发等，有很多公司出售 RS232 和 USB 转蓝牙加密狗。这些可以通过简单且有限的 API 轻松控制。这是一个[例子](http://www.bluegiga.com/eval_wt12)。[这里](http://www.avantwave.com/)或[这里](http://www.bluegiga.com/show_news?id=21853935)也有类似的中国公司 如果您想要 iPhone 连接，只需获取几个 MFi 协处理器并将它们焊接到开发板上即可。固件应该已经处理了 iOS 连接。看到[**这个**](http://www.bluegiga.com/show_news?id=21853935)。

2.  如果您有更严肃的意图，例如制作自己的硬件，则需要查看：

    *   蓝牙芯片。[这](http://www.csr.com/)是一家专门从事BT芯片的主要供应商的网站。也可以试试德州仪器、微芯等。

    *   [MFi 认证协处理器](https://developer.apple.com/programs/mfi/)。

# php - 博客容器没有显示正确的背景

> ID：12663826
> 
> 赞同：0
> 
> 时间：2012-09-30T18:26:53.407
> 
> 标签：php, css, html, containers

我希望我的博客容器具有与整个页面分开的背景。但是，它以 wood.png 为背景，而不是 bg.png。我正在使用以下内容：

CSS

```
body {
 background: url('img/bg.png') repeat;
}
.above {
 background: url('img/wood.png') repeat;
 width: 100%;
}
#blog-header {
 background: url('img/wood.png') repeat; 
 height: 160px;
 width: 100%;
 text-align: center;
}
#blog-container {
 background: url('img/bg.png') repeat;
 margin: 0 auto;
 width: 960px;
}
#blog {
 float: left;
 margin-top: 80px;
 position: relative;
 width: 620px;
} 
```

HTML/PHP

```
<body>
<div class="above">
 <div id="blog-header">
  <div class="logo">
   <a href="<?php bloginfo('url'); ?>"><img src="<?php echo get_template_directory_uri(); ?>/img/logo.png" alt="Urban Palate logo" id="logo" /></a>
   </div><!-- end logo -->
   <nav>
    <ul>
     <li><a href="/?page_id=7"><img src="<?php echo get_template_directory_uri(); ?>/img/about.png" alt="Urban Palate intro" /></a></li>
     <li><a href="/?page_id=12"><img src="<?php echo get_template_directory_uri(); ?>/img/portfolio.png" alt="Urban Palate portfolio" /></a></li>
     <li><a href="/?page_id=15"><img src="<?php echo get_template_directory_uri(); ?>/img/blog.png" alt="Urban Palate blog" /></a></li>
     <li><a href="/?page_id=10"><img src="<?php echo get_template_directory_uri(); ?>/img/contact.png" alt="Urban Palate contact" /></a></li>
    </ul>
   </nav>
   </div><!-- end blog-header -->
   <div id="blog-container">
    <div id="blog">
     <div id="post">
       //content
     </div><!-- end post -->
    </div><!-- end blog -->
   </div><!-- end blog-container --> 
```

任何想法可能导致问题？

预计到达时间：[JSFiddle](http://jsfiddle.net/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:34:03.697

如果元素包含浮动元素，则包装元素需要 a`overflow:auto`或 a`clear:both;`来获得为其添加背景所需的高度。

在您的情况下，您可以添加`overflow:auto`或添加`clear:both`到，`#blog-container`或者您可以将其添加为单独的类，如下所示：

这里有一些不错的行可以用来向你的 CSS 添加一个 clearfix 声明，你可以将该类添加到其中包含浮动元素的任何元素：

```
/*
 * Clearfix: contain floats
 *
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    `contenteditable` attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that receive the `clearfix` class.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */

.clearfix:before,
.clearfix:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.clearfix:after {
    clear: both;
}

/*
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */

.clearfix {
    *zoom: 1;
} 
```

clearfix 取自：[Html5Boilerplate](http://html5boilerplate.com/)

这是一个关于 clearfix 差异的额外好问题：[哪种 clearfix 方法最好](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)（检查答案二）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:41:15.773

您可能需要在身体上设置一些填充（或将 div 宽度设置为 95% 而不是 100%）。看起来 div 将占据整个屏幕的宽度。

# facebook - 尝试共享网站时出错

> ID：12663835
> 
> 赞同：0
> 
> 时间：2012-09-30T18:28:42.730
> 
> 标签：facebook, facebook-like, sharing

我正在尝试为我网站上特定类型的动态页面创建共享链接。该页面有一个基本模板，但随后它运行一个大型 PHP 脚本来解析 XML 以构建实际有用的内容。

典型的 facebook 分享或点赞似乎会拉取基本模板的标题和内容，而不是最终页面，这对我来说毫无用处，所以我发现这段代码创建了一个自定义分享链接，您可以在其中覆盖标题、描述、照片等：

```
 $title=urlencode($xml->pet->name . ' | DPA!');
            $url=urlencode($_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]);
            $summary=urlencode($xml->pet->name . ' is available for adoption.');
            $image=urlencode($thumbnail_photo);

            ?>
            <a onClick="window.open('http://www.facebook.com/sharer.php?s=100&amp;p[title]=<?php echo $title;?>&amp;p[summary]=<?php echo $summary;?>&amp;p[url]=<?php echo $url; ?>&amp;&amp;p[images][0]=<?php echo $image;?>','sharer','toolbar=0,status=0,width=548,height=325');" href="javascript: void(0)">Share on Facebook</a></div>
            <?php 
```

这会根据需要拉出共享器窗口，其中包含正确的信息，但是当我去共享时，我收到此错误：

> 无法将消息发布到此墙

我的网站正在运行 Wordpress。谁能告诉我为什么会发生这个错误？

另请注意，我已尝试更改共享权限，尝试使用其他浏览器，甚至让我丈夫在他的计算机和帐户上尝试。

编辑：这是代码的来源：[http ://www.daddydesign.com/wordpress/how-to-create-a-custom-facebook-share-button-for-your-iframe-tab/](http://www.daddydesign.com/wordpress/how-to-create-a-custom-facebook-share-button-for-your-iframe-tab/)

编辑#2：有关更多信息，该页面是 Wordpress 中带有自定义模板的“页面”。该模板有一个占位符标题，即“基本标题”。页面上实际显示的标题是事后生成的，因为我必须先阅读 XML 才能找出标题是什么。我尝试过的所有典型的喜欢或分享代码都将“基本标题”作为我正在分享的页面的标题。他们也不会提取页面模板之外存在的内容中的任何图像或文本。因此，它们对我毫无用处。

编辑#3：我将一个示例 URL 放入 facebook 调试器工具并注意到一些奇怪的东西。在重定向部分下，原始 URL 是正确的，但“rel="canonical"” URL 是基本模板的 URL。原始 URL 有一个 HTML 参数，让 PHP 代码知道要获取什么 XML。“抓取的 URL”显示了没有提供参数时会发生什么。不知道这是否有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:22:03.327

端点已被`sharer.php`弃用一段时间。从我在 SO 上看到的情况来看，Facebook 现在似乎正在禁用它。你不应该依赖这个来工作。您的示例教程没有过时，但评论可以追溯到 2011 年 7 月。

Facebook Share 代码的当前实现解析目标页面上的元数据并使用该信息。

根据您的描述，听起来您`get_header()`在解析 XML 文件之前正在调用，并且您的“基本标题”显示在页面元数据中。你不能那样做。您必须先解析 XML，然后调用`get_header()`. 您`header.php`可能还必须进行自定义以从 XML 文件中获取正确的数据并使用它来生成元数据。

# php - Symfony2 对 ajax 形式的测试

> ID：12663838
> 
> 赞同：1
> 
> 时间：2012-09-30T18:28:57.207
> 
> 标签：php, symfony, doctrine

在 symfony2 应用程序中，我正在尝试测试具有动态添加的下拉列表的表单（取决于先前的下拉列表选择）。

基本上我的问题是我无法设置我需要保存在数据库中的下拉列表的值，因为爬虫不会看到它。

有人知道我该怎么做吗？也许以某种方式在测试中创建表单元素“下拉列表”并设置其值？

这是我的代码：

```
 // Fill lesson create form
    $form = $crawler->selectButton('submit')->form();
    $lesson_name = 'Lesson_Test_'.time();
    $form['LessonDetailForm[name]'] = $lesson_name;
    $form['LessonDetailForm[description]'] = 'This is a test lesson.';
    $form['LessonDetailForm[text]'] = 'The content of this lesson is quite short.';
    // This worked on a non-dynamic dropdown list :
    //$availableOptionValues = $form['LessonDetailForm[topic]']->availableOptionValues();
    //$form['LessonDetailForm[topic]']->select($availableOptionValues[1]);
    //$form['LessonDetailForm[topic]'] = 1;

    // Here I would like to build the dropdown list myself:
    $form['LessonDetailForm[topic]'] = new Form(...);
    $crawler = self::$client->submit($form); 
```

我也在考虑修改表格，特别是为了测试，有可能以某种方式不发布这个下拉列表的值。但这似乎是一种不好的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:16:15.483

您的代码不会出现在 AJAX Symfony2 代码中。你的 Controller 有完整的功能吗？你知道吗：

if( $request->isXmlHttpRequest() )

# objective-c - 确保在 Cocoa 应用程序退出之前执行 Objective-C 代码

> ID：12663842
> 
> 赞同：5
> 
> 时间：2012-09-30T18:29:43.993
> 
> 标签：objective-c, macos, cocoa, exception-handling

假设一个可可应用程序必须在退出之前执行一些极其重要的objective-c 操作（出于任何原因——崩溃或退出）。

是否可以确保执行任意 Objective-c 代码以响应每个崩溃事件？（`SIGINT`, `SIGBUS`,`SIGSEGV`等，忽略“无法捕捉的”（`SIGSTOP`, `SIGKILL`, 闪电等））

* * *

> 知道你的钩子试图做什么会很有帮助。

例如：假设要运行应用程序，它绝对必须更改一些可变的系统范围配置变量 X 的值。在启动时，应用程序会拍摄 X 的当前状态的快照，然后对其进行修改。当应用程序成功退出时，它只是在终止前将 X 恢复为隐藏的原始值。我的问题是：即使应用程序崩溃，是否有可能确保 X 得到恢复？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T18:46:38.543

不，没有办法保证任何给定的代码将在应用程序终止时执行，因为用户可能会以应用程序无法捕获的方式终止应用程序（例如，拔掉桌面上的插头机器）。

您的代码绝对**必须针对意外终止进行强化**。

你需要加强多少取决于你的应用程序。在基于文档的应用程序中（在现代经常自动保存模型之前），在上次保存后丢失数据是意料之中的（而且很烦人）。

对于您的应用程序，您需要平衡持久性成本与持久数据的价值。

* * *

> 我只对可以捕获的终止信号感兴趣。

“可以被抓住”和“可以做任何有用的事情”之间是有区别的。正如您所指出的，可以捕获许多信号。

但是，您真的不能在信号处理程序中做任何事情。从技术上讲，您甚至无法分配内存。

同样，通常会生成信号或异常，因为应用程序已进入未定义的、灾难性损坏的状态。因此，您不能指望应用程序中的任何内部状态都可用。

我见过很多情况，当崩溃发生时，应用程序会尝试保存用户状态，只是为了相当愉快地写入损坏状态，最终导致用户丢失更多数据。

知道你的钩子试图做什么会很有帮助。

* * *

有关更多信息，请参阅 sigaction 手册页。

具体来说，可以安全调用的函数列表包括 _exit()、access()、alarm()、cfgetispeed()、cfgetospeed()、cfsetispeed()、cfsetospeed()、chdir()、chmod()、chown( )、close()、creat()、dup()、dup2()、execle()、execve()、fcntl()、fork()、fpathconf()、fstat()、fsync()、getegid()、 geteuid()、getgid()、getgroups()、getpgrp()、getpid()、getppid()、getuid()、kill()、link()、lseek()、mkdir()、mkfifo()、open( ), pathconf(), pause(), pipe(), raise(), read(), rename(), rmdir(), setgid(), setpgid(), setsid(), setuid(), sigaction(), sigaddset(), sigdelset(), sigemptyset(), sigfillset(), sigismember(), signal(), sigpending(), sigprocmask(), sigsuspend(), sleep(), stat(), sysconf(), tcdrain( )、tcflow()、tcflush()、tcgetattr()、tcgetpgrp()、tcsendbreak()、tcsetattr()、tcsetpgrp()、time()、times()、umask()、uname()、unlink()、时间（），wait()、waitpid()、write()、aio_error()、sigpause()、aio_return()、aio_suspend()、sem_post()、sigset()、strcpy()、strcat()、strncpy()、strncat( )、strlcpy() 和 strlcat()。

**上述列表中没有的所有函数都被认为对信号不安全。也就是说，从信号处理程序调用此类函数时的行为是未定义的。但总的来说，信号处理程序应该做的只是设置一个标志。大多数其他操作都不安全。**

翻译：你真的不能在信号处理程序中做很多有用的事情。

> Mpte a;sp tjat sogma; ,au ne de;overed pm amu tjread amd ,ogjt ne de;overed nu 中断当前正在执行的函数。

我的意思是：请记住，信号处理程序可能会在随机线程上传递，也可能会中断当前正在执行的函数。即您的应用程序的状态可能有些不确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T21:21:28.133

最简洁的答案是不。

更长的答案仍然是否定的，但您可以最大限度地减少无法重置系统范围的可变配置变量的机会。概述：

*   在启动时让您的应用程序产生一个不露面的后台进程；
*   不露面的后台进程应该改变你的变量，然后等待（`wait(2)`和朋友一样）直到它的父进程过期；
*   在其父级到期时，它会重置变量，然后自行到期。

您的不露面后台应用程序应该简短而简单，因此希望是健壮的。它远非万无一失，或者对于那些想杀婴的用户来说是安全的，但它缩小了阻止变量重置的机会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:25:12.437

如果要捕获信号，可以使用信号处理程序。

```
 signal(SIGBUS, signalHandler);
    signal(SIGSEGV, signalHandler);

void signalHandler(int signal)
{   
    NSMutableString *crashReport = [[NSMutableString alloc] init];
    void* callstack[128];
    int i, frames = backtrace(callstack, 128);
    char** strs = backtrace_symbols(callstack, frames);
    for (i = 0; i < frames; ++i) {
        //printf("%s\n", strs[i]);
        [crashReport appendFormat:@"%s\n",strs[i]];

    }
    free(strs);
    // write crashReport to file
    [crashReport release];
    exit(1);
} 
```

但如果崩溃发生在 NSMutableString alloc 或 release 或 free() 函数中，则此代码将不起作用。（正如[bbum](https://stackoverflow.com/users/25646/bbum)所解释的：
无法保证任何给定的代码将在应用程序终止时执行）

# c# - 在 XNA 4.0 中放置立方体 + 有摄像头时出现问题

> ID：12663844
> 
> 赞同：0
> 
> 时间：2012-09-30T18:30:07.470
> 
> 标签：c#, 3d, xna-4.0

我正在尝试制作一个简单的演示，其中我在空间中有一个立方体和一个可以移动的第一人称相机。我过去在 c++ 和 opengl 中做过类似的事情。

我的问题是：

*   我可以毫无问题地将我的立方体放置在空间中的任何地方
*   我可以创建相机并移动
*   但是当我同时创建两者时，**立方体总是相对于 camera 处于相同的位置**。

我怀疑问题出在世界矩阵上。相机正在操纵矩阵并影响立方体。在 OpenGL 中，我使用了 glPushMatrix 和 glPopMatrix，所以 Matrix 被存储并且不受影响。

```
//Draw Cube in openGL
    glPushMatrix();
        glTranslatef(1000,0,1000);
        glRotatef(90,0,1,0);
        DrawCube();
    glPopMatrix(); 
```

*   **如何在 XNA 中实现与 Push/Pop Matrix 类似的功能？**

*   **你知道我可以看的任何类似的演示（第一台相机+物体）吗？**（我正在使用 MSDN Microsoft 教程，但大多数链接都已损坏 :-( ）

你可以看到我到目前为止所做的尝试。我贴了相关的方法。

```
 protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        float timeDifference = (float)gameTime.ElapsedGameTime.TotalMilliseconds / 1000.0f;
        ProcessInput(timeDifference);

        base.Update(gameTime);
    }
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        //Text
        DrawText();

        //CUBE
        // Set the World matrix which defines the position of the cube
        cubeEffect.World = Matrix.CreateTranslation(modelPosition);
        // Set the View matrix which defines the camera and what it's looking at
        cubeEffect.View = Matrix.CreateLookAt(cameraPositionCube, modelPosition, Vector3.Up);
        // Set the Projection matrix which defines how we see the scene (Field of view)
        cubeEffect.Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, aspectRatio, 1.0f, 1000.0f);
        // Enable textures on the Cube Effect. this is necessary to texture the model
        cubeEffect.TextureEnabled = true;
        cubeEffect.Texture = cubeTexture;
        // Enable some pretty lights
        cubeEffect.EnableDefaultLighting();
        // apply the effect and render the cube
        foreach (EffectPass pass in cubeEffect.CurrentTechnique.Passes)
        {
            pass.Apply();
            cubeToDraw.RenderToDevice(GraphicsDevice);
        }

        base.Draw(gameTime);
    }

    private void UpdateViewMatrix()
    {
        Matrix cameraRotation = Matrix.CreateRotationX(updownRot) * Matrix.CreateRotationY(leftrightRot);

        Vector3 cameraOriginalTarget = new Vector3(0, 0, -1);
        Vector3 cameraRotatedTarget = Vector3.Transform(cameraOriginalTarget, cameraRotation);
        Vector3 cameraFinalTarget = cameraPosition + cameraRotatedTarget;

        Vector3 cameraOriginalUpVector = new Vector3(0, 1, 0);
        Vector3 cameraRotatedUpVector = Vector3.Transform(cameraOriginalUpVector, cameraRotation);

        viewMatrix = Matrix.CreateLookAt(cameraPosition, cameraFinalTarget, cameraRotatedUpVector);
    }

    private void ProcessInput(float amount)
    {
        MouseState currentMouseState = Mouse.GetState();
        if (currentMouseState != originalMouseState)
        {
            float xDifference = currentMouseState.X - originalMouseState.X;
            float yDifference = currentMouseState.Y - originalMouseState.Y;
            leftrightRot -= rotationSpeed * xDifference * amount;
            updownRot -= rotationSpeed * yDifference * amount;
            Mouse.SetPosition(device.Viewport.Width / 2, device.Viewport.Height / 2);
            UpdateViewMatrix();
        }

        Vector3 moveVector = new Vector3(0, 0, 0);
        KeyboardState keyState = Keyboard.GetState();
        if (keyState.IsKeyDown(Keys.Up) || keyState.IsKeyDown(Keys.W))
            moveVector += new Vector3(0, 0, -1);
        if (keyState.IsKeyDown(Keys.Down) || keyState.IsKeyDown(Keys.S))
            moveVector += new Vector3(0, 0, 1);
        if (keyState.IsKeyDown(Keys.Right) || keyState.IsKeyDown(Keys.D))
            moveVector += new Vector3(1, 0, 0);
        if (keyState.IsKeyDown(Keys.Left) || keyState.IsKeyDown(Keys.A))
            moveVector += new Vector3(-1, 0, 0);
        if (keyState.IsKeyDown(Keys.Q))
            moveVector += new Vector3(0, 1, 0);
        if (keyState.IsKeyDown(Keys.Z))
            moveVector += new Vector3(0, -1, 0);
        AddToCameraPosition(moveVector * amount);
    }

    private void AddToCameraPosition(Vector3 vectorToAdd)
    {
        Matrix cameraRotation = Matrix.CreateRotationX(updownRot) * Matrix.CreateRotationY(leftrightRot);
        Vector3 rotatedVector = Vector3.Transform(vectorToAdd, cameraRotation);
        cameraPosition += moveSpeed * rotatedVector;
        UpdateViewMatrix();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:35:50.370

您`UpdateViewMatrix()`创建了一个从未使用过的矩阵。将此矩阵用作效果的视图矩阵，而不是在`Draw()`.

# java - Java - 按顺序查找下一个文件

> ID：12663848
> 
> 赞同：0
> 
> 时间：2012-09-30T18:31:05.443
> 
> 标签：java, android

我有一个包含许多图像的目录。每个图像的格式为 image-xxx.png，其中 xxx 是一个随机整数（介于 0 到 100 万之间）。并非所有数字都被采用，因此例如可以有 image-1.png 后跟 image-27.png 等（它们不是 0 填充的）。假设我的目录中有以下文件：

```
image-1.png
image-27.png
image-1511.png
image-125252.png 
```

如何在不遍历 28 到 1511 之间的每个可能整数并检查 file.exists() 的情况下找到 27 (1511) 之后的下一个整数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:09:48.310

Luiggi Mendoza 的评论实际上帮助最大。我知道 listFiles 但没有意识到这存在：

[文件#listFiles(java.io.FilenameFilter)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28java.io.FilenameFilter%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:34:32.083

```
 String TAG = "MyApp"
 File file = new File("/your_directory");  
 File[] files = file.listFiles();  
 for (int fileInList = 0; fileInList < files.length; fileInList++)  
 {  
     Log.i(TAG, files[fileInList].toString());  
 } 
```

这将返回给定目录中的所有文件和目录。在循环中，您可以检查扩展名和文件名以查看它是否符合您的图像的命名约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T18:34:34.133

那么您需要做的第一件事就是列出目录中的所有文件。

`File[] files = directory.listFiles();`

然后，您需要根据文件名称的一些自定义比较来订购文件，您的实现如下。此时，您可以根据规则“按顺序”处理文件，并且不必增加索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T18:37:21.600

假设您有一个文件列表，您可以定义自己的排序顺序：

```
// get a collection of the filenames in the directory
List<String> filenames = Arrays.asList(new File("/path/to/directory").list());

// sort this in custom order
Collections.sort(filenames, new Comparator<String>(){
    @Override
    public int compare(String left, String right){
        String[] leftParts = left.split("[\\-\\.]");
        String[] rightParts = right.split("[\\-\\.]");

        if(leftParts.length < 3 || rightParts.length < 3){
           // filename doesn't seem to match what we expect
           // default to standard ordering
           return left.compareTo(right);
        }

        int leftVal = -1
        int rightVal = -1;
        try {
            // convert appropriate segment to integers
            leftVal = Integer.valueOf(leftParts[1]);
            rightVal = Integer.valueOf(rightParts[1]);
        } catch(NumberFormatException e) {
            return left.compareTo(right);
        }

        return rightVal - leftVal;
    }
}); 
```

这将让您以数字顺序（而不是自然字符串顺序）遍历文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T19:29:03.000

您可以将文件列表添加到 中`ArrayList`，然后使用该`indexOf`方法获取指定文件的索引。然后只增加1；

```
File imagesDirectory = new File("C:\\");

String[] arrayFiles;

arrayFiles = imagesDirectory.list();

ArrayList<String> listOfFiles = new ArrayList<String>(Arrays.asList(arrayFiles));

int indexOfFile = listOfFiles.indexOf("image-27.jpg");
int nextIndex = indexOfFile + 1; 
```

# search - 如何将网站链接到 google+，以便个人资料图片出现在搜索中

> ID：12663860
> 
> 赞同：0
> 
> 时间：2012-09-30T18:32:36.563
> 
> 标签：search, seo, google-plus

我用了

```
<link rel="author" href="https://plus.google.com/113756..7573388> 
```

在我页面的顶部。然后我将我的页面地址放在我的 google+ 帐户的贡献者部分。现在，当我使用 Richsnippets 工具时，它显示错误：作者个人资料页面没有指向 Google 个人资料的作者身份链接。

我应该做些什么才能让我的个人资料图片出现在搜索中？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:02:41.680

**1)**从您的网页创建指向您的 Google+ 个人资料的链接，如下所示：

```
<a href="[profile_url]?rel=author">Google</a> 
```

将 [profile_url] 替换为您的 Google+ 个人资料网址，如下所示：

```
<a href="https://plus.google.com/109412257237874861202?rel=author">Some Anchor Text</a> 
```

**2)**添加一个从您的 G+ 个人资料返回到您刚刚更新的网站的互惠链接。

说明在这里，请参阅选项 2：

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1408986&expand=option2](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1408986&expand=option2)

使用结构化数据测试工具检查：

```
http://www.google.com/webmasters/tools/richsnippets 
```

谷歌明确表示，即使您正确建立了作者身份，他们也不保证您的 G+ 头像会出现在 SERP 中；没有保证。

# java - Java...While 循环程序

> ID：12663864
> 
> 赞同：2
> 
> 时间：2012-09-30T18:32:56.867
> 
> 标签：java, while-loop

我有一个家庭作业...代码如下...有几个问题...在此先感谢。初学者Java学生...如果这看起来很笨拙，请不要笑>。>下面的代码...

```
 /*
     * Getting to know you...
     * @author Elle dela Victoria
     * @version 092812
     */
       import java.util.*;
       public class A15_1
       {
           public static void main(String[] args)
           {
           Scanner input = new Scanner(System.in);

           System.out.print(
           "Mind answering some questions for me?\n" +
           "Type quit when you're ready to leave.\n");

       while(true)
       {
        System.out.print("Does your name start with the letter H? ");
        input.nextLine();
        int ans = (int)(Math.random() * 5);
        if (ans == 0)
            System.out.println("That's awesome!");
        if (ans == 1)
            System.out.println("Awww, how unfortunate!");
        if (ans == 2)
            System.out.println("You're amazing at this!");
        if (ans == 3)
            System.out.println("LOL!");
        if (ans == 4)
            System.out.println("WTF!! That's horrible!");

        System.out.print("Are you male? ");
        input.nextLine();
        int ans1 = (int)(Math.random() * 5);
        if (ans1 == 0)
            System.out.println("That's awesome!");
        if (ans1 == 1)
            System.out.println("Awww, how unfortunate!");
        if (ans1 == 2)
            System.out.println("You're amazing at this!");
        if (ans1 == 3)
            System.out.println("LOL!");
        if (ans1 == 4)
            System.out.println("WTF!! That's horrible!");

        System.out.print("Are you female?");
        input.nextLine();
        int ans2 = (int)(Math.random() * 5);
        if (ans2 == 0)
            System.out.println("That's awesome!");
        if (ans2 == 1)
            System.out.println("Awww, how unfortunate!");
        if (ans2 == 2)
            System.out.println("You're amazing at this!");
        if (ans2 == 3)
            System.out.println("LOL!");
        if (ans2 == 4)
            System.out.println("WTF!! That's horrible!");

        System.out.print("Are you in school right now?");
        input.nextLine();
        int ans3 = (int)(Math.random() * 5);
        if (ans3 == 0)
            System.out.println("So angry when you're sober!");
        if (ans3 == 1)
            System.out.println("Awww, how unfortunate!");
        if (ans3 == 2)
            System.out.println("You're amazing at this!");
        if (ans3 == 3)
            System.out.println("LOL!");
        if (ans3 == 4)
            System.out.println("WTF!! That's horrible!");

        String userinput = input.nextLine();
        if (userinput.equalsIgnoreCase("quit"))
            break;      
      }
   }
 } 
```

1.  有什么方法可以对我提出的每个问题使用我的 IF 语句，而不必更改每个问题的字符串名称？
2.  有没有办法为那些 if 语句创建一个方法（？），所以我不必为我问的每个问题都写出来？
3.  如果用户在 10 秒内没有输入答案，我想要一个计时器来提示他们输入答案，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:39:53.743

您可以拥有一个字符串数组并根据输入打印它们`ans`：

```
 String str[] = {"That's awesome!", "Awww, how unfortunate!",
     "You're amazing at this!", "LOL!", "WTF!! That's horrible!"};

      /* code */

  while(true)
       {
        System.out.print("Does your name start with the letter H? ");
        input.nextLine();
        int ans = (int)(Math.random() * str.length);
        System.out.println(str[ans]);

      /* code */
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:42:38.410

我不确定这是否回答 1，但它应该回答 2：

```
private String getAnswer() {
   int ans = (int)(Math.random() * 5);
   switch(ans) {
   case 0:
      return "That's awesome!";
   case 1:
      return "Awww, how unfortunate!";
   [... and so on ...]
   }
   return null
} 
```

不仅仅是在您需要这样的答案的地方调用它：`System.out.println(getAnswer());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T18:44:42.147

我建议使用列表来存储响应。这将减少对`if`语句的需求，并且还可以防止您必须在四个不同的地方添加新的响应。

```
List<String> responseList = new ArrayList<String>();
responseList.add("That's awesome!");
responseList.add("LOL!");
responseList.add(.....);

System.out.println(responseList.get(ans)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T18:39:46.947

1.  是的你可以。您创建一个带有`int`要使用的参数类型的方法：

    ```
    public void printReply(int ans) {
        if (ans == 0)
            System.out.println("So angry when you're sober!");
        if (ans == 1)
            System.out.println("Awww, how unfortunate!");
        if (ans == 2)
            System.out.println("You're amazing at this!");
        if (ans == 3)
            System.out.println("LOL!");
        if (ans == 4)
            System.out.println("WTF!! That's horrible!");
    } 
    ```

    在适当的地方调用它。

2.  不确定我是否理解，我认为第一个答案涵盖了这一点。

3.  查看[`wait()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28long%29)方法，该方法由所有`Object`s 指定。

顺便说一句，你没有对你的输入做任何事情。你打电话让它掉在地上`input.nextLine()`。您应该考虑在变量中捕获它。

# jquery - 循环内的 jQuery click 函数。不能影响函数内的数字

> ID：12663866
> 
> 赞同：1
> 
> 时间：2012-09-30T18:33:07.827
> 
> 标签：jquery, arrays, loops, click

这里有问题，最近几天我一直在拉我的头发......

我正在为网站制作一种语言过滤器功能，它是一个菜单，您可以在其中单击一种语言，然后过滤掉其余的语言。由于我有很多不同的语言，我认为最好循环所有内容，而不是制作 15 段相同的代码。

这是我的代码：

```
// >>> Language click effects
    for(langClickNum = 1; langClickNum < langList.length; langClickNum++) {

        $('#lang'+langList[langClickNum]).click(function() {
            if (!langSelect[langClickNum]) {

                clrSearch();
                clrLang();
                langHide();

                $('#lang'+langList[langClickNum]).addClass('langCheck');
                $('.itemLang'+langList[langClickNum]).show();
                langSelect[langClickNum] = true;
            }
            else {
                clrLang();
                langShow();
            }
        });

    } 
```

正如您在 click 函数中看到的那样，我想使用循环计数器编号从不同的数组中选择索引。但是由于单击函数中的脚本会运行，除非我单击它，否则它不会捕获正确的数组编号。相反，它会为我单击的每种语言选择最后一个数组编号。我很清楚问题是什么，但我不知道如何解决它。请帮帮我！

如果我给它数字而不是循环它就可以了，就像这样：

```
$('#lang'+langList[1]).click(function() {
        if (!langSelect[1]) {

            clrSearch();
            clrLang();
            langHide();

            $('#lang'+langList[1]).addClass('langCheck');
            $('.itemLang'+langList[1]).show();
            langSelect[1] = true;
        }
        else {
            clrLang();
            langShow();
        }
}); 
```

我希望你能看到我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:47:30.797

几个月前我也遇到过类似的问题。你这样做：

```
$('#lang'+langList[langClickNum]).click(function(langClickNum) {
    return function() {
        if (!langSelect[langClickNum]) {

            clrSearch();
            clrLang();
            langHide();

            $('#lang'+langList[langClickNum]).addClass('langCheck');
            $('.itemLang'+langList[langClickNum]).show();
            langSelect[langClickNum] = true;
        }
        else {
            clrLang();
            langShow();
        }
    }
}); 
```

原因是所有的点击处理函数共享相同的闭包环境，因此变量 langClickNum 对它们都是相同的。如果您需要 langClickNum 对它们中的每一个都不同，则需要将其传递给函数，该函数实际上将为该函数的闭包创建 langClickNum 的副本。不知道我解释的是否完美...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:05:35.837

问题与 JS 变量作用域/闭包的概念有关。

当您绑定“click”处理程序时，langClickNum 的值可以迭代，但是当执行 click 处理程序时，“langClickNum”已经等于 langList.length。

您可以执行以下操作：

```
for(x = 1; x < langList.length; x++) {      
    (function(){
        var langClickNum = x;   
        $('#lang'+langList[langClickNum]).click(function() {//... rest of your code}
    })();
} 
```

在这里， langClickNum 的值将如您所愿，因为 JS 中的函数作用域。

有关更多信息，请参阅： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:18:38.363

与其使用 for 循环，不如简单地使用计数器遍历 DOM 中的 lang 对象。

```
<script type="text/javascript">
    jQuery(document).ready(function () {
        var _LangList = ['lang1', 'lang2', 'lang3', 'lang4', 'lang5'];
        var _iCurrLangIndex = 0;
        var _iIndex = 0;
        jQuery.each(jQuery('#lang_list').children(), function () {
            var _oCurrLangObj = jQuery(this).click(function () {
                var __iThisItemsIndex = parseInt(jQuery(this).attr('data-lang-index'));
                // Code Here
            }).attr('data-lang-index', _iIndex++);
        });
    });
</script>

<div id="lang_list">
    <div id="lang0"></div>
    <div id="lang1"></div>
    <div id="lang2"></div>
    <div id="lang3"></div>
    <div id="lang4"></div>
</div> 
```

同样对于选择一个值，我将简单地使用 1 个全局索引 var (_iCurrLangIndex) 来管理所使用的值，并尽可能使其从 0 开始。

# java - JDBC 数据库访问，插入元组

> ID：12663870
> 
> 赞同：0
> 
> 时间：2012-09-30T18:33:35.773
> 
> 标签：java, mysql

我正在尝试以下列方式将元组插入到 mySQL 数据库中。

```
 String insertString = "INSERT INTO listings(Seller, Title, Close_Time, Price, Condition)"
                + " VALUES('"+par.getSellerName()+"', '"+par.getItemName()+"', "
                +closetime+", "+par.getPrice()+", '"+par.getCondition()+"')";

pst = con.prepareStatement(insertString);
pst.executeUpdate();
ResultSet rs = pst.getGeneratedKeys(); 
```

但我不断收到 SQL 语法错误。奇怪的是，如果我离开条件，我没有问题。在清单表中，Condition 是一个 varchar(45)，par.getCondition() 返回一个字符串长度<45。

我也试过这个，比如：

```
pst = con.prepareStatement(
                    "INSERT INTO listings(Seller, Title, Close_Time, Price, Condition)"
                    + "VALUES(?,?,?,?,?)", Statement.RETURN_GENERATED_KEYS);
pst.setString(1, par.getSellerName());
        pst.setString(2, par.getItemName());
        long closeTime = getTimeMills(par.getTimeOver());
        pst.setLong(3, closeTime);
        pst.setDouble(4, par.getPrice());
        pst.setString(5, par.getCondition());
        pst = con.prepareStatement(insertString);
        pst.executeUpdate();
        ResultSet rs = pst.getGeneratedKeys(); 
```

结果相同。我确定我一定是在做一些愚蠢的事情，但我完全不知所措。我在执行插入之前打印了字符串，但找不到任何语法错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:35:19.943

条件是mysql中的保留字：见mysql的保留[字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

只需重命名该属性，它就会执行得很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:47:21.657

扩展当前答案，因为“条件”是列名，并且可能无法修改表，因此您可以在查询中引用条件 - 使用反引号或引号字符，如之前引用的文档。

权衡是您失去了可移植性，因为并非每个数据库都使用此约定。如果可能，重命名列是最好的长期选择。

# ruby-on-rails - 当关联对象有更多条件时如何进行预加载？

> ID：12663871
> 
> 赞同：3
> 
> 时间：2012-09-30T18:33:40.290
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, associations, eager-loading

我正在使用 Ruby on Rails 3.2.2，并且`has_many :through`为了“按类别订购文章”，我具有以下关联：

```
class Article < ActiveRecord::Base
  has_many :category_associations                                     # Association objects
  has_many :associated_categories, :through => :category_associations # Associated objects
end

class CategoryAssociation < ActiveRecord::Base
  acts_as_list :scope => 'category_id = #{category_id} AND creator_user_id = #{creator_user_id}'

  belongs_to :associated_article
  belongs_to :creator_user, :foreign_key => 'creator_user_id'
end 
```

在检索`associated_categories`时，我想加载`category_associations`用户创建的对象（*注意*：创建者用户由数据库表`creator_user_id`中存在的列标识） *，因为*我需要显示值（*注意*：属性 an是gem 和它所必需的是数据库表中的一列）“靠近”每篇文章的标题。`category_associations`*`position`*`position``Integer`[`act_as_list`](https://github.com/rails/acts_as_list)`category_associations`**

 **实际上，在我看来，我想以一种*适当*且*高效*的方式制作类似以下内容（*注意*：假设每篇文章`@articles`都由用户“类别相关” - 用户指的是提到的创建者用户`category_associations`):

```
<% @articles.each do |article| %>
  <%= link_to(article.title, article_path(article)) %> (<%= # Display the article position in the given category %>)
<% end %> 
```

可能，我应该“创建”和“处理”一个*自定义数据结构*（或者，也许，我应该做一些其他的......），但我不知道如何继续完成我正在寻找的东西。

* * *

此时我认为急切加载对我的情况来说是一个好方法，因为我可以避免[N + 1 查询问题](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)，因为我必须在关联对象上声明更多条件，以便：

*   检索给定用户创建的*关联*对象的特定属性值（在我的情况下是指`position`值） ；
**   *将这些特定属性值中的每一个与相应的关联*对象“关联”（以某种方式，以便`position`值适合于显示） 。*

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:36:47.273

我想，你正在寻找这个

```
@articles = Article.includes(:associated_categories) 
```

这将急切地加载您的所有文章，包括它的两个关联（关联类别、关联类别）。因此，当您在视图中迭代 @articles 及其关联时，它将避免 N+1 问题并且不会触发查询。****

# asp.net-mvc - 上传后将文件名保存在数据库中，使用 plupload 和 mvc3

> ID：12663873
> 
> 赞同：2
> 
> 时间：2012-09-30T18:33:42.640
> 
> 标签：asp.net-mvc, asp.net-mvc-3, plupload

我试图在上传后将每个单独文件的名称保存在数据库中。我有成功上传文件的代码。

```
 $(function () {
    $("#uploader").plupload({
        // General settings
        runtimes: 'silverlight,flash,html5',
        url: '@Url.Content( "~/FileUploadChunks/UploadChunk" )',
        max_file_size: '10mb',
        chunk_size: '1mb',
        unique_names: true,
         // Flash settings
        flash_swf_url: '/plupload/js/plupload.flash.swf',
        // Silverlight settings
        silverlight_xap_url: '/plupload/js/plupload.silverlight.xap'
    });

}); 
```

这是控制器

```
[HttpPost]
    public ActionResult UploadChunk(int? chunk, int chunks, string name)
    {
        var fileUpload = Request.Files[0];
        var uploadpath = Server.MapPath("~/App_Data/UploadedFiles");
        chunk = chunk ?? 0;
        using (var fs = new FileStream(Path.Combine(uploadpath, name), chunk == 0 ? FileMode.Create : FileMode.Append))
        {
            var buffer = new byte[fileUpload.InputStream.Length];
            fileUpload.InputStream.Read(buffer, 0, buffer.Length);
            fs.Write(buffer, 0, buffer.Length);
        }
        return Content("chunk uploaded", "text/plain");
    } 
```

只是为了测试，我尝试了类似的方法来尝试捕获名称并将它们添加到列表中以返回视图，但我无法弄清楚如何在视图中打印出列表以查看其内容。

```
[HttpPost]
    public ActionResult UploadChunk(int? chunk, int chunks, string name)
    {
        var fileUpload = Request.Files[0];
        var uploadpath = Server.MapPath("~/App_Data/UploadedFiles");
        chunk = chunk ?? 0;
        using (var fs = new FileStream(Path.Combine(uploadpath, name), chunk == 0 ? FileMode.Create : FileMode.Append))
        {
            var buffer = new byte[fileUpload.InputStream.Length];
            fileUpload.InputStream.Read(buffer, 0, buffer.Length);
            fs.Write(buffer, 0, buffer.Length);
        }
        List<string> list = new List<string>();  

        foreach (string inputTagName in Request.Files)
        {
            HttpPostedFileBase file1 = Request.Files[inputTagName];
            if (file1.ContentLength > 0)
            {
                list.Add(file1.FileName);
            }
        }
        ViewBag.List = list;
       } 
```

最终，我只是想遍历名称并将它们保存在数据库中。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:55:17.873

您没有提供有关您的数据库等的任何信息，以便我们为您提供很好的帮助。不过我会试一试。

要回答你的另一个问题，

> 我尝试了类似的方法来尝试捕获名称并将它们添加到列表中以返回视图，但我无法弄清楚如何在视图中打印出列表以查看其内容。

在您看来，这样的事情应该向他们展示：

```
@foreach (string fileName in ViewBag.List)
{
    @fileName
    <br />
} 
```

假设您使用 Entity Framework Code Fist，要将文件名保存到您的数据库中，您需要有一个模型。

```
public class UploadedFileName
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

然后在您的控制器中，您可以将`foreach`以前使用的语句更改为以下内容：

```
foreach (HttpPostedFile file in Request.Files)
{        
    if (file.ContentLength > 0)
    {
        UploadedFileName uploadedFile = new UploadedFileName();
        uploadedFile.Name = file.FileName;
        databaseContext.UploadedFileNames.Add(uploadedFile);
    }
} 
```

如果您有错误，上述`HttpPostedFile`内容可能需要。`HttpPostedFileBase`是`databaseContext`您的数据库上下文，通常是`db`.

# php - Usort 未完全排序

> ID：12663874
> 
> 赞同：0
> 
> 时间：2012-09-30T18:33:45.627
> 
> 标签：php, simplexml, usort

我正在尝试按字母顺序对节点列表进行排序，然后在 SimpleXML 中回显它们。我正在使用与此处引用的类似的**usort函数：**

[对 SimpleXML 和 PHP 中的 Xpath 返回的结果进行排序](https://stackoverflow.com/questions/10936879/sorting-results-returned-by-simplexml-and-xpath-in-php)

**这是我的代码：**

```
$xQuery = $xml->comiclist->comic;

function cmp ($a, $b) {
     return strcmp(
         $a->mainsection->series->sortname, 
         $b->mainsection->series->sortname
     ); 
}

usort($xQuery, "cmp");

foreach ($xQuery as $comic) : 
```

问题是它似乎只是*部分*工作。大多数项目都正确组合在一起，但有些项目完全不合适。从函数中可以看出，每个 $comic 节点都按其子节点“mainsection->series->sortname”进行排序。

这是它生成的一些订单的示例：

```
<sortname>New Avengers: Illuminati, Vol. 2</sortname>
<sortname>New Avengers: Illuminati, Vol. 2</sortname>
<sortname>Nova</sortname>
<sortname>New X-Men</sortname>
<sortname>Nation X</sortname>
<sortname>Namor, The Sub-Mariner Annual</sortname> 
```

如您所见，它们不是按字母顺序排列的。我错过了什么吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:43:39.863

从快速查看您的问题来看，您似乎正在使用`usort`type 的对象[`SimpleXMLElement`](http://php.net/SimpleXMLElement)。但是，该函数旨在用于数组。

可能首先将对象（或更准确地说是它提供的迭代器）转换为数组应该可以解决您的问题。

> 说明：在您链接的示例中，`xpath`使用了已经返回 a 的函数`array`，在您的示例中并非如此。

将提供的迭代器转换为数组的函数是[`iterator_to_array`](http://php.net/iterator_to_array)：

```
$array = iterator_to_array($xQuery, false);

usort($array, "cmp");

foreach ($array as $comic) ... 
```

# data-transfer - NetLogo - 在相邻海龟之间传输数据

> ID：12663875
> 
> 赞同：0
> 
> 时间：2012-09-30T18:33:46.123
> 
> 标签：data-transfer, netlogo

有没有办法在海龟之间传输数据？我想在乌龟和它的邻近乌龟之间发送和接收数据，但我不知道如何......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:39:09.053

在 NetLogo 模型库的代码示例部分，查看通信 TT 示例。（“TT”是“turtle to turtle”的缩写。）

# arrays - 将值添加到变量数组 VBA

> ID：12663879
> 
> 赞同：16
> 
> 时间：2012-09-30T18:34:22.123
> 
> 标签：arrays, vba, variables, dynamic

我正在尝试遍历`table`具有`column`for的 a `"customers" and "dollar amount"`。如果我的循环找到一个`customer`被调用的`"greg" or "henry"`，我想将他添加`"dollar amount"`到一个未知大小的数组中。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-30T20:43:03.513

如果未知大小，您的意思是元素数量未知，您可以使用动态数组。

```
Dim aArray() As Single ' or whatever data type you wish to use
ReDim aArray(1 To 1) As Single
If strFirstName = "henry" Then
    aArray(UBound(aArray)) = 123.45
    ReDim Preserve aArray(1 To UBound(aArray) + 1) As Single
End If 
```

如果数组没有被标注，Ubound(aArray) 会抛出一个错误，所以我们首先向它添加一个元素。这会在文本末尾留下一个空元素，因此您的代码应该考虑到这一点。aArray(Ubound(aArray)-1) 将为您提供数组中的最后一个有效元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-30T14:42:53.480

```
Private Sub ArrayMy(DataRange)
  Dim DataIndex() As String
  i = 0
  On Error Resume Next
  ReDim DataIndex(0)
  For Each c In DataRange
      DataIndex(i) = c
      i = i + 1
      ReDim Preserve DataIndex(i)
  Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-21T23:40:11.310

我认为最好使用 listArray 对象：

```
Dim list, name as variant
Set list = CreateObject("System.Collections.Arraylist")

For i = 1 to Last then  ''Loop in the range
    If strName = "Henry" then
        list.Add ValueToAdd  ''add to the list
    End if 
Next 
```

然后你可以在列表中循环

```
For Each name in List
    Msgbox name
Next 
```

# javascript - 在 Javascript 中使用 unicode

> ID：12663887
> 
> 赞同：0
> 
> 时间：2012-09-30T18:35:36.367
> 
> 标签：javascript

在 JavaScript 中，我们可以使用以下代码行（使用 Unicode）来显示版权符号：

```
var x = "\u00A9 RPeripherals"; 
```

为什么我们不能直接使用**ALT 代码 (alt+0169)**键入版权符号，如下所示：

```
var x = "© RPeripherals" ; 
```

这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:58:58.450

> 为什么我们不能直接使用 ALT 代码 (alt+0169) 键入版权符号，如下所示：

谁这么说的？当然可以。只需将您的代码编辑器配置为对源文件使用 UTF-8 编码。你不应该使用其他任何东西开始......

> 这两种方法有什么区别？

不同之处在于，使用该`\uXXXX`方案，您最多可以在线路上传输 2 个字节，最坏的情况是 5 个额外字节。如果您需要在源代码中嵌入字符，而您的字体无法正确显示，这种拼写可能会有所帮助。例如，我用于编程的字体中没有繁体中文字符，所以如果我在代码编辑器中输入中文字符，我会看到一堆带有 Unicode 码位数字的问号或矩形，而不是实际的人物。但是字体中有中文字形的人不会有这个问题。

如果我和那个人想要共享我们的源代码，最好让另一个人使用`\uXXXX`方案，因为我可以通过在 Unicode 表中查找来验证哪个字符是那个字符。这就是所有的区别。

**编辑**

ECMAScript 标准 (v 262/5.1) 明确指出

> 本标准的一致实现应解释符合 Unicode 标准 3.0 或更高版本和 ISO/IEC 10646-1 的字符，采用 UCS-2 或 UTF-16 作为采用的编码形式，实现级别 3。如果采用的 ISO /IEC 10646-1 子集没有特别说明，假定为BMP子集，集合300。如果采用的编码形式没有特别说明，则假定为UTF-16编码形式。

所以，标准保证字符编码是 Unicode，并强制使用 UTF-16（这很奇怪，我以为是 UTF-8），但我不认为这是在实践中发生的......我相信浏览器默认使用 UTF-8。也许这在后来的标准中有所改变，但这是最后一个被普遍接受的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:38:25.620

> 为什么我们不能直接直接输入版权符号

因为 JavaScript 引擎能够解析 UTF-8 编码的源文件。

> 这两种方法有什么区别？

一种是简短的，要求源文件以支持该字符的编码进行编码，并且要求您键入一个未打印在键盘按钮上的字符。

另一个（比较）长，可以完全用 ASCII 表示，并且可以使用标准键盘按钮上的字符进行输入。

# java - 哈希映射 ：如何将对象本身代替字符串

> ID：12663889
> 
> 赞同：4
> 
> 时间：2012-09-30T18:36:11.017
> 
> 标签：java, hashmap

```
A a = new A();     //classA {   }

HashMap<String, Object> hm = new Hashmap<String,Object>();

hm.put("A", a); 
```

我的问题是，我怎样才能将对象本身而不是“A”放在同一个声明中？

```
hm.put(`a??`, a); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:37:34.310

你根本不能这样做，语言禁止它。仅当您的类`A`是不可能的子类时才有`String`可能，因为它是在 Java`String`中声明的。`final`

关于您的面试问题：由于为声明选择了泛型类型参数，这是不可能的。您可以在[Bounded Type Parameters](http://docs.oracle.com/javase/tutorial/java/generics/bounded.html)中阅读更多相关信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:40:30.470

```
A a = new A();     //classA {   }

Map<A, A> hm = new Hashmap<A, A>();

hm.put(a, a); 
```

但我看不出有任何意义`a->a`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T18:38:23.640

If the class held a non-changing decent String field, you could use that.

```
// the id property must be a String, immutable and unique for each instance!
myMap.put(a.getId(), a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T18:40:04.900

如果您想**`object`**在**您****`HashMap`**的**`immutable`**..**`HashMap`**

 **试想一下，如果您的键在插入后被更改，您将永远无法找到您插入的值..

但是，如果您的密钥是`immutable`，那么如果有人试图更改您的密钥，他实际上会为自己创建一个新的，但您仍然拥有您的..

如果您将`String`其用作您的键`HashMap`（它们无法更改），就会发生这种情况。因此，如果您希望您的对象成为键，那么您可以让您的类成为 String 的子类（您不能这样做)，或者，只是让你的类不可变..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-22T19:14:00.603

这实际上可以使用[原始类型](https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)，如下所示：

```
Object key = ...;
Object value = ...;
Map<String, Integer> map = new HashMap<>();//a normal map
Map rawMap = map; // here is the raw type
rawMap.put(key, value); // it works! 
```

这运行良好，但是当您稍后尝试使用通用映射时会出现问题：

```
Integer value = map.get(key);// ClassCastException (unless value actually is an Integer) 
```

这就是为什么你被告知这是一个“肮脏的把戏”。[你不应该使用它。](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)**

# delphi - 自动构建和安装 Delphi 组件

> ID：12663891
> 
> 赞同：4
> 
> 时间：2012-09-30T18:36:34.263
> 
> 标签：delphi, components, vcl

所以，我的 Delphi 组件可以正常工作，除了一些尚未涉及的细节。我想要的是创建一个设置（Inno setup），它会自动将我的组件安装到用户的 Delphi/C++ Builder IDE 中。我想我必须使用 delphi 命令行编译器，但是如何？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T22:22:20.203

不幸的是，Delphi IDE 根本不支持自动组件安装。IMO，这是**一个非常**大的问题，因为组件架构在 Delphi 中非常重要。

您可以从命令行（使用 MSBuild 或 DCC）构建包，但不能将其安装到 IDE。要安装您的软件包，您应该编写自己的安装程序来构建您的软件包、复制编译的文件并更新 Windows 注册表。请注意，没有官方文档如何编写这样的安装程序，但您可以以 Jedi (JVCL) 安装程序代码为例。

还有一些第三方工具可以自动安装组件，例如“ [lazy builder](http://www.lazyproject.info/) ”，您可能会感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T07:26:50.353

这不是太难，只是有点乱。您需要为每个要定位的 Delphi 版本编译一个 BPL，然后您的安装程序将此 BPL 放入您选择的文件夹（通常是用户、公共等）。然后，此文件夹位置将作为注册表项写入相关的 Delphi Installed Packages 节点下。当您运行 Delphi 时，您的组件看起来就像您使用了手动安装包选项一样。

# java - 试图创建一个 ArrayList from former Array - Java Doing this for an Android project; having issues creating An ArrayList out of what was formerly an Array of objects. Here is what code WAS: MyReviewObj 问问题 问问题 2012-09-30T18:37:33.390 129 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Doing this for an Android project; having issues creating An ArrayList out of what was formerly an Array of objects. Here is what code WAS: MyReviewObject[] co = new MyReviewObject[reviews.size()]; int index = 0; for (@SuppressWarnings("unused") String i : reviews) { co[index] = new MyReviewObject(datelist.get(index), reviews.get(index), items.get(index), cats.get(index)); index++; } adapter = new MyReviewAdapter(getActivity(), co); setListAdapter(adapter); Here is what I have now: ArrayList <myreviewobject>co = new ArrayList<myreviewobject>(); for (String i : reviews) { co = new ArrayList<myreviewobject>(datelist.add(i),reviews.add(i), items.add(i), cats.add(i)); } adapter = new MyReviewAdapter(getActivity(), co); setListAdapter(adapter); The statement in the for loop I am having hard time converting to make work? I know I am declaring the ArrayList twice and one should go. EDIT: here is Object: public class MyReviewObject { public String comment; public String date; public String items; public String cat; public MyReviewObject(String s1, String s2, String s3, String s4) { this.date = s1; this.comment = s2; this.items = s3; this.cat = s4; } } Have you tried using select? contex.Order.Load(); orderBindingSource.DataSource = context.Order.Local().Select( m => m.customerID > 1).ToBindingList(); Edit Not entirely sure about this, it compiles but I do not have a full environment to test it. Perhaps if you try to load in the specific data, and then you can access it in local for the binding list. Like this: context.Order.Select( m => m.customerID > 1).Load(); orderBindingSource.DataSource = context.Order.Local.ToBindingList(); javaarraysarraylist 4 1 回答 1 This answer is useful 2 您不需要创建几个数组列表，只需几个MyReviewObject： for (String i : reviews) { MyReviewObject review = new MyReviewObject(datelist.get(i), reviews.get(i), items.get(i), cats.get(i)); co.add(review); } ps：假设原始代码有效。 于 2012-09-30T18:41:42.500 回答 Related 2 r - 在多列上滚动回归 1 javascript - jquery.serialScroll-1.2.1.js 在 Coda Slider 中编辑 3 facebook - 使用 Facebook 连接在流星应用程序中登录回调 1 xpages - 想在 xe:formTable 控件中上传并显示图片 1 html - 960网格系统中的多行列 1 c# - C# 中的 Selenium RC 如何验证页面源代码 1 python - 如何设置子窗口的标题 1 java - SwingPropertyChangeSupport 从文件读取后刷新 GUI 2 c# - 如何使用由列表支持的我自己的 IQueryable 延迟加载 3 c# - ConfigurationManager.GetSection 返回 null Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</myreviewobject></myreviewobject></myreviewobject>

> ID：12663902
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, arrays, arraylist

Doing this for an Android project; having issues creating An ArrayList out of what was formerly an Array of objects.

Here is what code WAS:

```
 MyReviewObject[] co = new MyReviewObject[reviews.size()];
            int index = 0;

            for (@SuppressWarnings("unused")
            String i : reviews) {
                co[index] = new MyReviewObject(datelist.get(index),
                        reviews.get(index), items.get(index),
                        cats.get(index));
                index++;
            }

            adapter = new MyReviewAdapter(getActivity(), co);
            setListAdapter(adapter); 
```

Here is what I have now:

```
 ArrayList<MyReviewObject> co = new ArrayList<MyReviewObject>();

            for (String i : reviews) {
                co = new ArrayList<MyReviewObject>(datelist.add(i),reviews.add(i), items.add(i), cats.add(i));
            }

            adapter = new MyReviewAdapter(getActivity(), co);
            setListAdapter(adapter); 
```

The statement in the for loop I am having hard time converting to make work? I know I am declaring the ArrayList twice and one should go.

**EDIT**:

here is Object:

```
public class MyReviewObject {
    public String comment;
    public String date;
    public String items;
    public String cat;

    public MyReviewObject(String s1, String s2, String s3, String s4) {
        this.date = s1;
        this.comment = s2;
        this.items = s3;
        this.cat = s4;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:41:42.500

您不需要创建几个数组列表，只需几个`MyReviewObject`：

```
for (String i : reviews) {
    MyReviewObject review = new MyReviewObject(datelist.get(i),
                    reviews.get(i), items.get(i),
                    cats.get(i));
    co.add(review);
} 
```

ps：假设原始代码有效。

# java - 使用 javassist 编辑本机方法类？

> ID：12663905
> 
> 赞同：5
> 
> 时间：2012-09-30T18:37:49.427
> 
> 标签：java, javassist

使用 Javassist，有没有办法将代码注入本机方法？在这种情况下，我试图让我的游戏中的 OpenGL 调用在调用时打印出它们的名称和值，但是当我假设添加了 openGL dll 代码时，我所有的尝试都遇到了错误。

该方法看起来像：

```
public static native void glEnable(int paramInt); 
```

由于这些方法最初没有主体，因此我发现实际添加代码的唯一方法是：

```
CtBehavior method = cl.getDeclaredBehaviors()[0];
method.setBody("System.out.println(\"Called.\");"); 
```

注入本身可以工作，但是一旦加载库，系统就会失败，说明该方法已经有代码。

我宁愿不使用任何预制工具进行呼叫跟踪，因为我需要为用户格式化和打印列表。有没有办法处理这个？如果没有，是否有某种方法可以在另一个类中找到对 OpenGL 方法的所有调用并将附加调用附加到跟踪器类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-24T08:47:39.367

我知道这有点离题（2 年后），但如果有人感兴趣，我认为可以使用[setNativeMethodPrefix() 方法](http://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html#setNativeMethodPrefix-java.lang.instrument.ClassFileTransformer-java.lang.String-)和适当的字节码转换来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T21:15:36.150

```
With Javassist, is there any way to inject code into a native method? 
```

从未尝试过，但我并不惊讶它不起作用。本机代码是 - 本机。它是一堆与 Java 字节码无关的平台特定位。Javassist 完全是关于 Java 字节码的。

您是否考虑过使用基于代理的 AOP？查看 [http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-understanding-aop-proxies](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-understanding-aop-proxies)

我不建议您在程序中实际使用 Spring，但它可能会给您一些关于如何解决问题的想法。我认为基于代理的 AOP 可能对您有用的原因是您不理会基于 OpenGL 的类，它只使用普通的本机方法。您生成一个纯 Java 的代理类，但具有与原始类相同的方法。您调用包含所需调用跟踪代码的代理类上的方法，以及使用其本机方法调用“普通对象”上的相应方法。

Spring 中的文档说他们在幕后使用 JDK 动态代理或 [CGLIB](http://cglib.sourceforge.net)。所以......我认为您可以直接使用其中一种技术来替代您的 javassist 解决方案。

希望这可以帮助。

[更新]

在上面的文字中，我以为您在谈论由您编写的主要具有实例方法的类。如果你说的是包装整个 OpenGL API，主要是静态方法，那么 AOP 代理方法就没有那么吸引人了。你想这样做有多糟糕？你可以：

*   创建一个自定义类 - 一个带有工厂方法的单例类。您的单例类包装了整个 OpenGL API。没有记录/跟踪代码。只是对 API 的裸调用。
*   修改整个应用程序中的每个调用以使用您的包装器，而不是直接调用 OpenGL

此时，您的应用程序与您现在所拥有的完全一样。

现在增强你的单例类的工厂方法以返回除了 OpenGL 调用之外什么都不做的准系统实例，或者它可以返回一个 CGLIB 生成的代理来记录每个方法。现在，您的应用可以在生产模式（快速）或跟踪模式下运行，具体取决于某些配置设置。

如果您想放弃并继续前进，我完全明白：)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-23T18:06:24.700

我知道这个线程很旧，并且已经接受了答案并暗示了我的答案，但我想我可以用更多的细节和代码来节省别人的时间。我希望有人前段时间对我做过=）

我试图包装 java.lang.Thread#sleep 函数。我找到了 bytebuddy 的示例，但有方法替换，没有 javassist 的示例。最后我做到了。第一步是注册变压器和设置前缀：

```
instrumentation.addTransformer(transformer, true);
instrumentation.setNativeMethodPrefix(transformer, "MYPREFIX_"); 
```

然后在transformer里面修改Thread类：

```
@Override
public byte[] transform(ClassLoader loader, String className, Class<?> classBeingRedefined, ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException {
    if (!"java/lang/Thread".equals(className)) {
        return null;
    }
    try {
        // prepare class pool with classfileBuffer as main source
        ClassPool cp = new ClassPool(true);
        cp.childFirstLookup = true;
        cp.insertClassPath(new ByteArrayClassPath(Thread.class.getName(), classfileBuffer));
        CtClass cc = cp.get(Thread.class.getName());

        // add native method with prefix
        CtMethod nativeSleep = CtMethod.make("void MYPREFIX_sleep(long millis) throws InterruptedException;", cc);
        nativeSleep.setModifiers(Modifier.PRIVATE + Modifier.STATIC + Modifier.NATIVE);
        cc.addMethod(nativeSleep);

        // replace old native method
        CtMethod m = cc.getDeclaredMethod("sleep", new CtClass[]{CtClass.longType});
        m.setModifiers(Modifier.PUBLIC + Modifier.STATIC); // remove native flag
        m.setBody("{" +
                "System.out.println(\"Start sleep\");" +
                "MYPREFIX_sleep($1);" +
                "}");
        byte[] byteCode = cc.toBytecode();
        cc.detach();
        return byteCode;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

然后开始改造：

```
instrumentation.retransformClasses(Thread.class); 
```

像 java.lang.Thread 这样的类的问题之一是，通常你不能从修改的方法调用你的代码，除非你在引导类加载器中推送一些东西。

另请参阅[https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html#setNativeMethodPrefix-java.lang.instrument.ClassFileTransformer-java.lang.String-](https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html#setNativeMethodPrefix-java.lang.instrument.ClassFileTransformer-java.lang.String-)了解 jvm 的详细信息解决方法。

# android - 无需按通话按钮即可通话

> ID：12663911
> 
> 赞同：2
> 
> 时间：2012-09-30T18:38:28.210
> 
> 标签：android

我开始这样的呼叫意图：

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:"+numberToCall));
startActivity(callIntent); 
```

但我没有直接拨打该号码，而是看到预先填写了号码的呼叫屏幕，我必须按下通话按钮才能拨打电话。是否可以不按通话键直接通话？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:44:13.287

将此添加到您的清单中。它将允许您在没有提示的情况下拨打电话

```
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

> CALL_PHONE：允许应用程序在不通过拨号器用户界面的情况下发起电话呼叫，以便用户确认正在拨打的电话。

可以在这里找到：

[http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:40:44.950

您可以使用[CALL_PHONE](http://developer.android.com/reference/android/Manifest.permission.html#CALL_PHONE)权限拨打号码。对于其他特权号码，使用[CALL_PRIVILEGED](http://developer.android.com/reference/android/Manifest.permission.html#CALL_PRIVILEGED)许可。

# ios - iOS CAlayer 方向 AVCaptureVideoPreviewLayer 不旋转

> ID：12663913
> 
> 赞同：6
> 
> 时间：2012-09-30T18:38:33.623
> 
> 标签：ios, calayer, orientation-changes

![在此处输入图像描述](../Images/496ac15f9554f50bb8183281e55a2497.png) **摘要：** 我无法强制 CALayer 正确响应方向变化。每当我尝试使用 cgaffinetransform 时，我都会得到奇怪的结果（图层未居中）。任何帮助将不胜感激！谢谢，

**过程** 我正在使用 AVCaptureVideoPreviewLayer 子类添加视频预览。当设备处于纵向时，一切看起来都很好。当设备旋转到横向（左或右）或纵向倒置时会出现问题。

我正在使用 AVCaptureVideoPreviewLayer 子类添加视频预览。当设备处于纵向时，一切看起来都很好。当设备旋转到横向（左或右）或纵向倒置时会出现问题。

我正在使用以下代码添加预览层：

```
CGRect layerRect = [[[self view] layer] bounds];
[[[self captureManager] previewLayer] setBounds:layerRect];
[[[self captureManager] previewLayer]setFrame:CGRectMake(0, height, width, height)];
[[[self captureManager] previewLayer] setPosition:CGPointMake(CGRectGetMidX(layerRect),CGRectGetMidY(layerRect))]; 
```

并且在纵向模式下正确显示。当我尝试旋转设备时，预览层的行为很奇怪。它似乎没有自行调整大小，也没有正确旋转。

我尝试通过添加以下方法来修复它

```
-(void)rotateLayer{
CALayer * stuckview = [[self captureManager] previewLayer];
CGRect layerRect = [[[self view] layer] bounds];

UIDeviceOrientation orientation =[[UIDevice currentDevice]orientation];

switch (orientation) {
    case UIDeviceOrientationLandscapeLeft:
        stuckview.affineTransform = CGAffineTransformMakeRotation(M_PI+ M_PI_2); // 270 degress
        NSLog(@"Landscape Left");
        [stuckview setPosition: CGPointMake(self.view.bounds.size.width /2.0, self.view.bounds.size.height /2.0)];

        break;
    case UIDeviceOrientationLandscapeRight:
        stuckview.affineTransform = CGAffineTransformMakeRotation(M_PI_2); // 90 degrees
        NSLog(@"Landscape Right");
        [stuckview setPosition: CGPointMake(self.view.bounds.size.width /2.0, self.view.bounds.size.height /2.0)];
        break;
    case UIDeviceOrientationPortraitUpsideDown:
        stuckview.affineTransform = CGAffineTransformMakeRotation(M_PI); // 180 degrees
        NSLog(@"Landscape Upside down");
        break;
    default:
        stuckview.affineTransform = CGAffineTransformMakeRotation(0.0);
        break;
}
 float h1 = stuckview.frame.size.height;
   float w1 = stuckview.frame.size.width;

if(UIDeviceOrientationIsPortrait(orientation))
{
  stuckview.position =CGPointMake(h1/2.0, w1/2.0);
    NSLog(@"Portrait");
}
else{
  stuckview.position =CGPointMake(w1/2.0, h1/2.0);
    NSLog(@"Portrait");
} 
```

}

添加上面的方法后，我可以看到一个进度。现在图层可以正确旋转以反映当前设备方向，并且可以在横向模式下正确显示，但不能在纵向模式下显示。

图层定位不正确，不在屏幕中心（看截图）。要查看发生了什么，我添加了以下调试语句：

```
CALayer * stuckview = [[self captureManager] previewLayer];
CGRect layerRect = [[[self view] layer] bounds];
float h = stuckview.bounds.size.height;
float w = stuckview.bounds.size.width;

float x = stuckview.bounds.origin.x;
float y = stuckview.bounds.origin.y;

float h1 = stuckview.frame.size.height;
float w1 = stuckview.frame.size.width;

float x1 = stuckview.frame.origin.x;
float y1 = stuckview.frame.origin.y;

NSLog(@"%f %f %f %f ", h,w,x,y );
NSLog(@"%f %f %f %f ", h1,w1,x1,y1 );

NSLog(@"Anchor Point: %f  %f",stuckview.anchorPoint.x, stuckview.anchorPoint.y);
NSLog(@"Position: %f  %f",stuckview.position.x, stuckview.position.y);

CGAffineTransform at = stuckview.affineTransform;

NSLog(@"Affine Transform After : %f %f %f %f %f %f %f", at.a,at.b, at.c, at.d, at.tx,at.tx, at.ty); 
```

并得到以下输出：

```
2012-09-30 13:25:12.067 RotatePreviewLayer[2776:907] 1024.000000 768.000000 0.000000 0.000000 
```

2012-09-30 RotatePreviewLayer[2776:907] 1024.000000 768.000000 128.000000 -128.000000

```
2012-09-30 13:25:12.070 RotatePreviewLayer[2776:907] Portrait
2012-09-30 13:25:12.072 RotatePreviewLayer[2776:907] Anchor Point: 0.500000  0.500000
2012-09-30 13:25:12.074 RotatePreviewLayer[2776:907] Position: 512.000000  384.000000
2012-09-30 13:25:12.076 RotatePreviewLayer[2776:907] Affine Transform after: -1.000000 0.000000 -0.000000 -1.000000 0.000000 0.000000 0.000000 
```

注意调试输出的第二行。预览层的框架移动了128，-128。谁能解释一下为什么会发生这种情况以及如何解决预览层的方向问题？谢谢你，亚努斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-22T05:26:43.990

那这个呢？

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    _videoPreviewLayer.connection.videoOrientation = toInterfaceOrientation;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-03T20:22:46.000

这是我在视图控制器中使用的方法来保持捕获层的方向，使其始终是正面朝上的：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
    if (_previewLayer.connection.supportsVideoOrientation)
    {
    switch (toInterfaceOrientation)
        {
        case UIInterfaceOrientationPortrait:
            {
            _previewLayer.connection.videoOrientation = AVCaptureVideoOrientationPortrait;
            break;
            }
        case UIInterfaceOrientationPortraitUpsideDown:
            {
            _previewLayer.connection.videoOrientation = AVCaptureVideoOrientationPortraitUpsideDown;
            break;
            }
        case UIInterfaceOrientationLandscapeLeft:
            {
            _previewLayer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeLeft;
            break;
            }
        case UIInterfaceOrientationLandscapeRight:
            {
            _previewLayer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeRight;
            break;
            }
        }
    } 
```

有点罗嗦，但即使任何一个枚举在未来发生变化也是安全的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T15:30:10.277

我仍然不确定是什么导致了问题，但我设法解决了它。这是我的做法：

在 viewDidLoad 我添加了一个图层：

```
CGRect layerRect = [[[self view] layer] bounds];
    [[[self captureManager] previewLayer] setBounds:layerRect];
    [[[self captureManager] previewLayer] setPosition:CGPointMake(CGRectGetMidX(layerRect),CGRectGetMidY(layerRect))];
    [[[self view] layer] addSublayer:[[self captureManager] previewLayer]]; 
```

然后我将调用 rotateLayer 方法添加到 didRotate

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
    [self rotateLayer];
} 
```

最后 rotateLayer 方法如下所示：

```
-(void)rotateLayer{
    CALayer * stuckview = [[self captureManager] previewLayer];
    CGRect layerRect = [[[self view] layer] bounds];

    UIDeviceOrientation orientation =[[UIDevice currentDevice]orientation];

    switch (orientation) {
        case UIDeviceOrientationLandscapeLeft:
            stuckview.affineTransform = CGAffineTransformMakeRotation(M_PI+ M_PI_2); // 270 degress

            break;
        case UIDeviceOrientationLandscapeRight:
            stuckview.affineTransform = CGAffineTransformMakeRotation(M_PI_2); // 90 degrees
            break;
        case UIDeviceOrientationPortraitUpsideDown:
            stuckview.affineTransform = CGAffineTransformMakeRotation(M_PI); // 180 degrees
            break;
        default:
            stuckview.affineTransform = CGAffineTransformMakeRotation(0.0);
            [stuckview setBounds:layerRect];
            break;
    }
    [stuckview setPosition:CGPointMake(CGRectGetMidX(layerRect),CGRectGetMidY(layerRect))];
} 
```

我仍然不明白为什么它会以这种方式工作。如果有人可以解释，那就太好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-09T06:53:27.493

@Janusz Chudzynski 这里是详细解释什么`rotateLayer`方法

此方法是在检查不同方向如何影响之后`previewLayer`创建`LandscapeLeft`的

```
stuckview.affineTransform = CGAffineTransformMakeRotation(M_PI+ M_PI_2);

     M_PI        3.14159265358979323846264338327950288   // pi     = 180 degree  
                                    +      
     M_PI_2      1.57079632679489661923132169163975144   // pi/2   = 90  degree

                                                         // Total  = 270 degree 
```

所以创造者已经注意到，如果我`previewLayer`在它进入时旋转到 270 度，`LandscapeLeft`那么它将处于正确的位置，就像他在`previewLayer`每一次可能的旋转中都旋转一样

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T11:13:28.850

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration  
{  
    previewLayer.orientation = toInterfaceOrientation;  
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-06T19:07:23.620

我和@Siegfault 在一起，虽然我也发现当我的视图最初在iPad 上以横向加载时，方向仍然正确。`viewDidAppear:`为了解决这个问题，我使用当前调用相同的委托方法`interfaceOrientation`：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self willRotateToInterfaceOrientation:self.interfaceOrientation duration:0.0];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-25T14:49:18.077

使用 willRotateToUserInterfaceOrientation 的答案工作正常，除了该方法已被弃用。因此，如果您能够使用 iOS 9，那么在 Swift 中可以使用以下方法：

```
override func viewWillTransitionToSize(size: CGSize, withTransitionCoordinator coordinator: UIViewControllerTransitionCoordinator) {
        let newOrientation = UIDevice.currentDevice().orientation
        switch newOrientation {
        case .LandscapeLeft:
            self.capturePreviewLayer?.connection.videoOrientation = .LandscapeLeft
        case .LandscapeRight:
            self.capturePreviewLayer?.connection.videoOrientation = .LandscapeRight
        case .Portrait, .Unknown, .FaceUp, .FaceDown:
            self.capturePreviewLayer?.connection.videoOrientation = .Portrait
        case .PortraitUpsideDown:
            self.capturePreviewLayer?.connection.videoOrientation = .PortraitUpsideDown
        }
        super.viewWillTransitionToSize(size, withTransitionCoordinator: coordinator)
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-05T14:34:01.920

```
// layout iOS 8+ animated 
- (void)viewWillTransitionToSize:(CGSize)size withTransitionCoordinator:(id<UIViewControllerTransitionCoordinator>)coordinator
{
    [coordinator animateAlongsideTransition:^(id<UIViewControllerTransitionCoordinatorContext> context)
    {
         NSString *timingFunc = nil;
         switch ( [context completionCurve] )
         {
             case UIViewAnimationCurveEaseIn:    timingFunc = kCAMediaTimingFunctionEaseIn;          break;
             case UIViewAnimationCurveEaseInOut: timingFunc = kCAMediaTimingFunctionEaseInEaseOut;   break;
             case UIViewAnimationCurveEaseOut:   timingFunc = kCAMediaTimingFunctionEaseOut;         break;
             case UIViewAnimationCurveLinear:    timingFunc = kCAMediaTimingFunctionLinear;          break;
         }

         [CATransaction begin];
         [CATransaction setAnimationDuration:[context transitionDuration]];
         [CATransaction setAnimationTimingFunction:[CAMediaTimingFunction functionWithName:timingFunc]];
         [self updatePreviewLayer];
         [CATransaction commit];

         UIInterfaceOrientation toOrientation = [[UIApplication sharedApplication] statusBarOrientation];
         // layout ui if needed

    } completion:^(id<UIViewControllerTransitionCoordinatorContext> context)
    {

    }];

    [super viewWillTransitionToSize:size withTransitionCoordinator:coordinator];
}

- (void)updatePreviewLayer
{
    CGAffineTransform transform = CGAffineTransformIdentity;
    switch ( UIDevice.currentDevice.orientation )
    {
        case UIDeviceOrientationLandscapeLeft:
            transform = CGAffineTransformRotate(transform, -M_PI_2);
        break;
        case UIDeviceOrientationLandscapeRight:
            transform = CGAffineTransformRotate(transform, M_PI_2);
        break;
        case UIDeviceOrientationPortraitUpsideDown:
            transform = CGAffineTransformRotate(transform, M_PI);
        break;
        default:
        break;
    }
    preview.affineTransform = transform;
    preview.frame = self.view.bounds;
} 
```

# javascript - Embeddable mp3 player with time navigation in the audio

> ID：12663914
> 
> 赞同：1
> 
> 时间：2012-09-30T18:38:40.160
> 
> 标签：javascript, javascript-events, embedded-flashplayer

You guys know how you can leave a comment on a YouTube video specifying a certain time in the video (i.e. 16:59) and when the comment is submitted, the time specified turns into a link, and when clicked, will take you to that time in the video?

Well, I'd like to implement that functionality except with mp3s.

I want to have some kind of mp3 player with links below the player of say, chapters, that will help me navigate to certain parts of an mp3.

What kind of Web technology will help me get this functionality?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:16:31.457

您需要的网络技术：

*   [片段标识符](http://en.wikipedia.org/wiki/Fragment_identifier)

我建议使用一些带有 Flash 后备的 HTML5 音频库，如下所示：

*   [媒体元素.js](http://mediaelementjs.com/)

如果您使用的是 jQuery，那么这些插件可能会对您有所帮助：

*   [烧烤插件](http://benalman.com/projects/jquery-bbq-plugin/)
*   [Hashchange 插件](http://benalman.com/projects/jquery-hashchange-plugin/)

# iphone - iOS white background behind settings controls

> ID：12663917
> 
> 赞同：1
> 
> 时间：2012-09-30T18:39:14.620
> 
> 标签：iphone, objective-c, ios, uitableview, interface-builder

Is there a control that can achieve the appearance that is in this image?

It looks like some special single round cornered table cell a UISlider embedded in it.

What I am wondering is it really a table cell, it seems overkill to do this. Is it possible there is something in iOS to achieve this without using an UIimage as a background.

Thanks, -Code

![enter image description here](../Images/80605f6bc5bdcd73bcc3ce40f09e5445.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:44:22.477

看起来像一个[分组表视图部分](https://stackoverflow.com/questions/3748544/grouped-uitableview-interface-builder-examples-tutorial)，其中有一个视图。[分组表视图部分中的自定义表视图单元格](http://www.e-string.com/content/custom-uitableviewcells-interface-builder)看起来有一个UISlider ，其两侧都有一个 UILabel。

作为一般规则，您应该始终倾向于使用标准的内置控件，除非您真的需要自定义外观。

请参阅此处的第三张图片：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

另外：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewStyles/TableViewCharacteristics.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewStyles/TableViewCharacteristics.html)

从那个链接：

> **分组表视图**
> 
> 分组表视图还显示信息列表，但它将相关行分组在视觉上不同的部分中。如图 1-4 所示，每个部分都有圆角，默认情况下显示为蓝灰色背景。每个部分都可以为其页眉或页脚提供文本或图像，以为该部分提供一些上下文或摘要。分组表特别适用于显示数据层次结构中最详细的信息。它允许您将详细信息分成概念组并提供上下文信息以帮助用户快速理解它。

# c# - Matching Negative Sequence

> ID：12663918
> 
> 赞同：1
> 
> 时间：2012-09-30T18:39:27.507
> 
> 标签：c#, regex

I want to match text between word1 and first occurrence of word2\. What's the best way to do that, considering that text may include newline characters? Is there a pattern like this: (word1)(not word2)*(word2)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:41:49.633

您可以使用惰性量词来匹配 word1 和 word2 之间尽可能少的字符。

```
(word1).*?(word2) 
```

请参阅MSDN 上的[量词主题](http://msdn.microsoft.com/en-us/library/3206d374.aspx#Greedy)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:54:37.617

您可以使用 SingleLine 选项匹配它们：

```
//use '*' or '*?' depending on what you want for "word1 aaa word2 bbb word2"
string pattern = "word1(.*)word2";  
var m = Regex.Match(text1, pattern, RegexOptions.Singleline);
Console.WriteLine(m.Groups[1]);  // the result 
```

MSDN 关于 SingleLine ：

> ... 导致正则表达式引擎将输入字符串视为由单行组成。它通过更改句点 (.) 语言元素的行为来做到这一点，使其匹配每个字符，而不是匹配除换行符 \n 或 \u000A 之外的每个字符。

# nunit - NUnit 测试运行器 - 如何在 Program Files\Nunit 2.*.* 以外的位置运行测试

> ID：12663922
> 
> 赞同：2
> 
> 时间：2012-09-30T18:39:53.717
> 
> 标签：nunit, test-runner

使用 NUnit 测试运行器，当我在我正在处理的项目中运行单元测试时，我得到以下异常：

System.UnauthorizedAccessException：对路径“C:\Program Files (x86)\NUnit 2.6.1\bin\App_Data”的访问被拒绝。

这是因为写入 C: 需要管理员权限，而测试需要本地数据库。我可以以管理员身份运行它，但我想将执行位置更改为另一个文件夹，但找不到该设置。是否可以更改 NUnit 中的执行位置？

**编辑**我的测试项目是控制台应用程序，而不是 dll（出于我无法影响的原因），这可能很重要。

# android - android - 活动结束时保存到数据库并加载另一个活动

> ID：12663926
> 
> 赞同：0
> 
> 时间：2012-09-30T18:40:20.487
> 
> 标签：android, sqlite, android-activity

我想这样做：从活动A开始活动B。在活动B结束之前（当我按下主页或返回按钮时 - 我使用“受保护的void onStop（）”方法），将数据保存到数据库（sqlite）。现在我回到了活动 A，我想从 DB 重新加载数据（我使用“protected void onRestart()”方法）。但是有我的问题 - 当我从数据库加载数据时，我得到旧数据（不是新数据，在活动 B 结束之前保存）。

你能帮我吗，哪里有问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:08:28.750

我相信活动 A 上的 onRestart 可能会在活动 B 上的 onStop 之前被调用。 Yopu 可以放一个 Log.d() 来检查。

如果是这种情况，您可以将活动 B 上的保存到 DB 移动到 onPause() 而不是 od onStop() 并且问题将得到解决。

# java - 将android项目转换为java项目

> ID：12663929
> 
> 赞同：3
> 
> 时间：2012-09-30T18:40:30.307
> 
> 标签：java, android, jar, apk

我刚刚完成了一个安卓应用程序的开发。我也想要一个基于 java 的桌面版本。

我必须将所有布局转换为摇摆以及我可能面临的其他冲突，天知道。

是否有将android应用程序转换为独立jar的工具？最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T18:42:36.973

没有工具可以做到这一点，因为 Android 和普通 Java 应用程序非常不同。

你能做的最好的是将非平台特定的代码移动到一个库项目中，并从 Java 和 Android 应用程序中引用它。因此，所有不使用任何带有 android 的导入的代码都应该可以移动到库中，而您的所有 swing/android 特定代码都将进入引用项目。

# java - 3 键键盘快捷键

> ID：12663931
> 
> 赞同：2
> 
> 时间：2012-09-30T18:40:44.927
> 
> 标签：java, awt, keyboard-events

我需要帮助才能在我的 Java 程序中创建键盘快捷键。从下面的代码中可以看出，我需要一个键盘快捷键`Ctrl`+ `T`，它可以正常工作并打印`"test"`，但是快捷键`Ctrl`++没有按预期打印，没有任何`Shift`反应：`T``"test2"`

```
KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(
    new KeyEventDispatcher() {
        public boolean dispatchKeyEvent(KeyEvent e) {
            switch (e.getID()) {
                case KeyEvent.KEY_PRESSED:
                    if (e.getKeyCode() == java.awt.event.KeyEvent.VK_T && 
                        e.getModifiers() == java.awt.event.InputEvent.CTRL_MASK) {
                        System.out.print("test");   
                    } else if (e.getKeyCode() == java.awt.event.KeyEvent.VK_R && 
                               e.getModifiers() == java.awt.event.InputEvent.CTRL_MASK &&
                               e.getModifiers() == java.awt.event.InputEvent.SHIFT_MASK) {
                        System.out.print("test2");  
                    }       
                break;
            }
            return true;
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T18:58:24.713

an 的修饰符`InputEvent`是一个位字段，因此您可以使用按位运算来测试它们，而不仅仅是`==`. 但更简单的方法是使用以下`is*Down()`方法`InputEvent`：

```
if (e.getKeyCode() == java.awt.event.KeyEvent.VK_R && 
    e.isControlDown() && e.isShiftDown()) { 
```

# html - 我正在尝试设置 SSI 或服务器端包括

> ID：12663934
> 
> 赞同：1
> 
> 时间：2012-09-30T18:41:23.500
> 
> 标签：html, ssi

我熟悉 SSI，并且在我的网站上实施它没有任何问题。

我想改变它调用文件的方式。

我的网站每月都有更改，它们位于一个文件集中`/2012/august/home.shtml`，当它调用它时，它会调用 ssi，它从 august 文件夹调用类似这样的东西`#include file="bottomad.html"`

但是我希望能够一次更改所有月份，所以我想从我的索引页面所在的主要 public_html 文件夹中调用它。我试着喜欢这样。< !--#include file="/bottomad.shtml" --> 那没用。

我应该这样做 < !--#include file="http://www.grossmag.com/bottomad.html" --> 吗？上面的代码不起作用，下面列出了我的修复。到目前为止，我还没有找到一个 .shtml 扩展名，它可以调用源文件所在目录中的文件，或者从与源文件位于同一目录中的文件夹中调用文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:41:02.993

我可以通过将文件扩展名从 .shtml 更改为 .php 来解决此问题，然后我通过在此链接[http://www.htmlforums.com/html-xhtml/t-guide-找到的调用调用文件to-server-side-includesdynamic-contentupdating-pages-at-once-139520.html](http://www.htmlforums.com/html-xhtml/t-guide-to-server-side-includesdynamic-contentupdating-pages-at-once-139520.html)。它是一个 php 文件包含。我用了两个不同的来完成我想要的。第一个是， < ?php include("menu.html"); ? > ，这使我可以调用我调用它的原始文件所在的同一文件夹中的文件。

例如：文件 Grossmag.com/2012/september/home.php 将始终调用该给定月份的特定菜单。使用这行代码，它会从这里调用：grossmag.com/2012/september/menu.html

第二个代码是我真正想要的： < ?php $path = $_SERVER['DOCUMENT_ROOT']; $path .= "/linkbar.html"; 包括一次（$路径）；? >

我想要一行代码，允许我使用一个源文件来更改每个文件夹中的所有页面。在我的例子中，它用于页脚、左侧和右侧以及顶部导航栏。我刚刚列出的代码允许我从主 public_html 文件中调用它。

例如：grossmag.com/2012/september/home.php 和 Grossmag.com/2012/august/home.php 都可以从 Grossmag.com/linkbar.html 调用导航栏等

当您切换到 .php 扩展名时，普通的 shtml 包含将不适用于第一个示例。我希望这对其他遇到此问题的人有所帮助。如果您需要进一步的说明或示例，请随时给我发电子邮件寻求帮助。jeremy.grossmag@gmail.com 或者如果您需要立即帮助 jeremy@vulgarmediaproductions.com

# winapi - 如何将字符串写入其他应用程序？

> ID：12663940
> 
> 赞同：0
> 
> 时间：2012-09-30T18:42:08.510
> 
> 标签：winapi, sendinput

如何使用 windows API 与其他应用程序通信？

例如，另一个应用程序有一个文本框，我已经使用 mouse_event 在其中设置了鼠标，但我不知道如何向它发送字符串，并在该文本框上显示字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:30:20.627

谢谢你们！我通过使用 keybd_event 做到了，这是我的代码：

```
keybd_event((BYTE)VkKeyScan(lpMsg[i-1]), 0, 0, 0);
keybd_event((BYTE)VkKeyScan(lpMsg[i-1]), 0, KEYEVENTF_KEYUP, 0); 
```

我这里还有一个问题，因为我要发送文本的窗口不是正常的窗口，它是一个互联网表格，其内容是从互联网上下载的。所以我不能使用`SetWindowText`或其他东西，只能模拟键盘输入。

我的问题是：一个表单包含许多按钮、文本框、标签和其他东西。函数`EnumChildWindows(hwndGame, EnumChildProc, 0);` 将一直持续到枚举最后一个子窗口或回调函数返回 FALSE。什么是子窗口？这个表单上有那些按钮和文本框吗？

# deployment - 如何使用 TFSBuild for MVC 应用程序设置持续部署？

> ID：12663941
> 
> 赞同：1
> 
> 时间：2012-09-30T18:42:15.587
> 
> 标签：deployment, msbuild, continuous-integration, tfsbuild, continuous-deployment

我对将 MVC Web 应用程序部署到不同环境的最佳机制有一些疑问。以前我使用设置项目（.msi），但由于这些在 VS2012 中已停止使用，我希望转向替代方案。

让我解释一下我目前的设置。我目前有一个使用 TFSBuild 2010 和 Team Foundation Server 进行源代码控制的 CI 设置。

许多开发人员在他们的本地计算机上工作并签入 TFS 服务器。我们定期部署到单服务器开发环境和具有 2 台服务器的负载平衡 qa 环境。我们当前的流程包括安装一个 msi，它执行以下一些自定义操作：

*   使用 app_offline.htm 文件使当前应用脱机
*   在数据库脚本中运行（来自解决方案中的数据库项目）
*   修改 web.config（每个 qa 的 web 服务器不同）
*   标记代码
*   通过 http 请求预热每个部署的文件
*   ETC

这是当前的过程。现在我想做一些改变。首先，我需要MSI的替代品。根据 som 研究，我认为通过 IIS 进行 Web 部署并使用 MsDeploy 是最好的选择。我可以使用 Web 配置转换来修改 Web 配置。这是正确的吗？如果是，我可以大致了解我需要做什么吗？

其次，我想通过 TFSBuild 设置持续交付，我不知道如何实现这一点，是否可以大致了解如何将它集成到我当前的设置中？我希望它在签入后由用户驱动，而不是签入驱动。此外，这是否也可以在解决方案中的数据库项目的数据库脚本中运行。

最后，还有一个生产环境，但我想手动部署这个——我的过程是否也可以产生一个我可以手动安装的工件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:02:06.713

Vishal Joshi 在他的博客上有一些相当不错的信息， http: [//vishaljoshi.blogspot.com/2010/11/team-build-web-deployment-web-deploy-vs.html](http://vishaljoshi.blogspot.com/2010/11/team-build-web-deployment-web-deploy-vs.html)。它的缺点是您的部署密码包含在您传递给 msbuild 的属性中。

Syed Hashimi 还在另一个问题[Team Build: Publish local using MSDeploy](https://stackoverflow.com/questions/4041836/team-build-publish-locally-using-msdeploy)中发布了一些相关信息。

# button - 在网站上的按钮链接之后创建的唯一下载链接（不确定在互联网上搜索什么语言）

> ID：12663942
> 
> 赞同：0
> 
> 时间：2012-09-30T18:42:19.020
> 
> 标签：button, hyperlink, download, click, unique

我想了解以下是用什么语言完成的：

1.  用户来到网站并填写邮件列表表格（例如）
2.  当用户提交表单时，会为该文件生成一个唯一的下载链接（例如：www.myDomain.com/downloads/myFile.zip）
3.  奖励：让该链接在 24 小时后过期，或者看起来有必要多长时间（我实际上相信这是用我一直在玩的 PHP 完成的，但我什至还不是新手）

我不是在寻找任何人给我答案，但也许会指出我在哪里学习的正确方向。我用谷歌搜索了许多不同的“单击按钮时唯一的下载链接”的变体。

我的知识水平是 XHTML/CSS，我玩过 JavaScript 和 PHP，但正如我所说，我什至不是新手。我正在寻找更多这是用什么语言完成的，以便我可以朝着它努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:48:16.013

您可以使用几乎任何服务器端语言（包括 PHP）来执行此操作。它的工作原理是用户提交 HTML 表单，PHP 脚本将处理它以查看它是否正确填写并符合所有条件（电子邮件是实际的电子邮件，名称不是空白等）。然后它将使用数据库后端插入表单的详细信息，以便您将其作为记录。

对于下载链接，一旦您输入表单详细信息，它将为该用户生成一个令牌链接，该链接具有时间戳，两者（令牌和时间戳）都将存储在您的数据库中。此链接指向您的 PHP 脚本，该脚本将接收令牌（URL GET 变量）并检查令牌是否有效以及文件时间戳是否小于 24 小时。如果这两个条件都为真，它将向用户提供文件以供下载，否则将显示错误。

PHP 和 MySQL 将是一个足够好的工具，并且应该很容易开始使用周围的文档。

脚步：

1.  研究如何在 PHP 中捕获表单输入（验证和安全性）
2.  将输入存储在数据库中（例如 MySQL）
3.  生成令牌链接并使用时间戳存储在数据库中并提供给用户
4.  访问token链接时，检查token是否有效，时间戳是否不超过24小时

# php - 如何存储价值' 我想将 php 脚本存储为变量。我怎样才能做到这一点？我试过 $template = '

> ID：12663951
> 
> 赞同：-1
> 
> 时间：2012-09-30T18:43:03.453
> 
> 标签：php

我想将 php 脚本存储为变量。我怎样才能做到这一点？我试过

```
$template = '<?php';
$template = '<'.'?'.'php'.'\n'; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:47:48.963

您的第一次使用实际上没有任何问题。PHP不像JavaScript那样禁止你在`<script>`里面使用。以下将`<?php`正确输出标签：

```
<?php

$template = '<?php';
echo htmlentities($template);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:47:56.047

两者都是正确的。如果你试试这个：

```
<?php
    $template = '<?php';
    echo $template;
    $template = '<'.'?'.'php'.'\n';
    echo $template;
?> 
```

你最终会得到一个空的 HTML 页面，但如果你查看源代码，你会发现

```
<?php<?php\n 
```

结果，它被 HTML 呈现为不正确的标签，这就是你有一个空页面的原因。

试试这个：

```
<?php
    $template = '<?php';
?>
<script language="javascript">
    alert(<?php echo "\"".$template."\""; ?>); 
</script> 
```

你最终会得到正确的值，显示在 javascript 警报弹出窗口中

# arduino - Arduino - 如何多线程这个应用程序

> ID：12663960
> 
> 赞同：1
> 
> 时间：2012-09-30T18:44:29.097
> 
> 标签：arduino

我正在写一个车库门开启器和监视器。

[监视器通过另一个 Arduino over RF](http://en.wikipedia.org/wiki/Radio_frequency) (315 MHz)接收门状态。下面的代码有效，但我觉得我不应该每次向服务器发出请求开门时都需要检查状态。有没有办法把代码拆分出来，让我每20秒检查一次门的状态，车库的开关是按需的？

这是代码： [https ://github.com/dhysong/ArduinoGarageOpener/blob/master/src/GarageDoorOpener/GarageDoorOpener.ino](https://github.com/dhysong/ArduinoGarageOpener/blob/master/src/GarageDoorOpener/GarageDoorOpener.ino)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:21:30.313

基于这篇文章：[http ://arduino.cc/forum/index.php/topic,5686.0.html](http://arduino.cc/forum/index.php/topic,5686.0.html)

我能够为我的应用程序添加类似多线程的功能。源代码已更新以反映更改。

这是相关的部分：

```
boolean cycleCheck(unsigned long *lastMillis, unsigned int cycle) 
{
  unsigned long currentMillis = millis();
  if(currentMillis - *lastMillis >= cycle)
{
  *lastMillis = currentMillis;
  return true;
 }
else
  return false;
} 
```

这是任何可能受益的人的 github 代码： [https ://github.com/dhysong/ArduinoGarageOpener/blob/master/src/GarageDoorOpener/GarageDoorOpener.ino](https://github.com/dhysong/ArduinoGarageOpener/blob/master/src/GarageDoorOpener/GarageDoorOpener.ino)

# ruby-on-rails - Rails 3：为集合的每个元素创建输入字段（MongoID）

> ID：12663964
> 
> 赞同：0
> 
> 时间：2012-09-30T18:45:13.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个模型，Item 和 Bid

```
class Item
  include Mongoid::Document
  field :name, type: String
  has_many :bids 
end

class Bid
  include Mongoid::Document
  include Mongoid::Timestamps::Created
  field :bid, type: Float
  field :bidder, type: String
  belongs_to :item  
end 
```

在视图/价格/索引中，我想列出表格中的所有项目，并为每个项目在其旁边放置一个字段，人们可以在其中输入数字。表单底部应该是所有记录的提交按钮。

如何最好地做到这一点？

有很多代码解释了如何在一项调查中添加例如几个问题（http://railscasts.com/episodes/196-nested-model-form-part-1），但我找不到示例这显示了如何为集合的每个现有元素添加一个新记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:06:46.973

如果您知道要开始使用那里的所有项目，我认为您不需要为每个项目动态添加表单。

又快又脏：

```
form_for(@items) do |f|
  @items.each do |item|
    f.label item.name
    f.text_field item.name.to_sym, :value => "1"
  end
  f.submit "Submit"
end 
```

我还没有尝试过，并且该代码没有经过测试，但我认为如果你在控制器中做一些工作来构建每个出价应该没问题。与使用 Bid.bid 相比，对于投标类而言，金额也是一个更好的变量名称。

执行此操作（也允许更新）的正确方法是制作嵌套表单，然后使用`fields_for`方法实际查看实时投标对象： http: [//archives.ryandaigle.com/articles/2009/2/1 /what-s-new-in-edge-rails-nested-attributes](http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes)

# java - 如果不存在则写入文件

> ID：12663966
> 
> 赞同：0
> 
> 时间：2012-09-30T18:45:37.660
> 
> 标签：java, file, file-io, io, inputstream

我正在尝试创建一个在文件不存在时写入文件的块，但它已变成 Catch-22。该文件不存在，因此它无法写入该文件，因此它可以存在。这是我的尝试：

```
if(!FileReadWrite.file2.exists())
        FileReadWrite.fileWrite();

public static File file2 = new File("./settings.txt");

public static void fileWrite()
{
    try
    {
         FileWriter fstream = new FileWriter(file2);
         BufferedWriter out = new BufferedWriter(fstream);
         String c = Byte.toString(Textures.a);
         out.write(c);
         out.close();
     }catch (Exception e)
     {
         System.err.println("Error: " + e.getMessage());
     }
    int ch;
    StringBuffer strContent = new StringBuffer("");
    InputStream fin = null;
    try
    {
        fin = new FileInputStream(file2);
        while ((ch = fin.read()) != -1)
        {
            strContent.append((char) ch);
        }
    fin.close();
    } catch (IOException e)
    {
        e.printStackTrace();
    }
} 
```

我正在使用 Eclipse。该文件位于 bin 文件夹中，但是当我将其导出到 jar 时，它位于 jar 文件夹之外。

```
Exception in thread "main" java.lang.ExceptionInInitializerError
at srcD.Main.<init>(Main.java:19) //(FileReadWrite.fileWrite())
at srcD.Main.main(Main.java:129) //(Make JFrame)
Caused by: java.lang.NullPointerException
at srcD.FileReadWrite.<clinit>(FileReadWrite.java:7) //(public file...)
... 2 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T19:00:27.463

我认为这段`ClassLoader.getSystemResource("settings.txt")`代码返回 null 并`.getFile()`得到一个`NPE`

* * *

回复评论

首先，您应该了解`getSystemResource`不适用于外部资源的方法[阅读此](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getSystemResource%28java.lang.String%29) 对于从 jar 加载外部资源，您必须使用资源的完整路径，完整！= 绝对，如何找到完整路径

```
start point + path to resource 
```

例如，我们有下一个文件结构`/Users/fakeuser/tetsproject/`- 此文件夹包含您的 jar 和`conf`文件夹包含或应该包含`settings.txt`，如果您有这样的交付结构，您的代码将是

```
 public static File file2 = new File("./conf/settings.txt"); 
```

仅此而已。

# facebook - 通过 HTTPS 访问 Facebook 图像

> ID：12663967
> 
> 赞同：1
> 
> 时间：2012-09-30T18:45:39.130
> 
> 标签：facebook, facebook-graph-api, https

我们在我们的网站中提供 Facebook 提要，其中包括从 Facebook 的 cdn 提供的个人资料图片等图像。我们的网站通过 HTTPS 提供服务，我们通常在链接到外部图像时使用协议相关的 url。然而，脸书上的图片并没有出现。挖掘后，我注意到指向 facebook cdn 图像的 https 链接会引发 SSL 错误，因为 Facebook CDN url 与与其证书关联的 Akamai URL 不匹配。

比较：
[http ://profile.ak.fbcdn.net/hprofile-ak-prn1/50164_1132339922_583434524_n.jpg](http://profile.ak.fbcdn.net/hprofile-ak-prn1/50164_1132339922_583434524_n.jpg)
[https://profile.ak.fbcdn.net/hprofile-ak-prn1/50164_1132339922_583434524_n.jpg](https://profile.ak.fbcdn.net/hprofile-ak-prn1/50164_1132339922_583434524_n.jpg)

这使得 Facebook 图像无法使用 HTTPS 或协议相关 url 作为图像源进行访问，因此无法在不触发混合内容警告的情况下将 Facebook 图像嵌入 HTTPS 站点。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T21:12:28.523

想通了：

在您的图形 api 调用中，使用`return_ssl_resources=1`，它将为您提供正确的图像 https url

# java - GWT - 将共享代码的部分标记为“仅限服务器”

> ID：12663968
> 
> 赞同：3
> 
> 时间：2012-09-30T18:45:45.787
> 
> 标签：java, gwt

我有一个 GWT 应用程序，除了传统的“客户端”和“服务器”包之外，它还包含一个“共享”包，其中包含通过 RPC 来回传输的 POJO DTO。我需要在那些应该只存在于服务器端的 DTO 中创建一些方法（即它们不应该被编译为 JS，因为它们会使用无法编译为 JS 的代码），尤其是`static()`方法。

这在 GWT 中是否可行（某些属性，ifdef，...）？

背景：我有一些通用验证器需要“注册”类进行验证（通过静态方法`register(Class<T>)`，并且由于我找不到任何 GWT init() 方法，我将注册放在 DTO 的静态构造函数中，因此，当（如果）类被加载时，它会自行注册以进行验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T21:09:01.533

这个问题的详细讨论：

[http://code.google.com/p/google-web-toolkit/issues/detail?id=3769](http://code.google.com/p/google-web-toolkit/issues/detail?id=3769)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:18:05.570

我们最近在一个项目中遇到了一些 DTO 对象的类似问题。我们最终将数据从方法中分离出来，创建了第二组包含用于处理数据的静态方法的类。据我所知，没有任何方法可以注释类中的方法以防止 gwtc 尝试将它们转换为 javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T18:51:56.997

谷歌似乎在[r11570](https://code.google.com/p/google-web-toolkit/source/detail?r=11570 "r11570")中实现了它。

# javascript - 可通过 ID 访问的元素

> ID：12663981
> 
> 赞同：9
> 
> 时间：2012-09-30T18:47:09.487
> 
> 标签：javascript

我看到了一个奇怪的行为。我创建了一个`Input`.

```
<input id='inputid' value='value'/>​ 
```

并尝试直接从 id 访问它。而不是抛出异常控制台显示在输入元素上方。

```
console.log(inputid); 
```

之后，我尝试将其与`getElementById`

```
console.log( inputid == document.getElementById('inputid')); 
```

控制台正在显示`true`。

[您可以在jsfiddle](http://jsfiddle.net/XwWcS/)上看到这种行为。

这是一种奇怪的行为还是我错过了什么？

我在`Chrome 23.0.1271.10 dev-m`和中对其进行了测试`firefox 15.0.1`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T18:50:44.457

早在 4.0 浏览器时代，Microsoft 决定为每个具有 id 的元素创建一个与包含对该元素的引用的 id 同名的全局变量会很方便。

对此的支持已经出现在其他一些浏览器中（在某些渲染模式下）。这种支持不是通用的，因此应避免使用该功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T19:06:00.200

出于好奇，稍微扩展一下这种情况：

```
<html><head>
<script type="text/javascript">
  var overWrite = "world";
  window.onload = function(){ alert(overWrite); };
</script></head><body>
<input id="overWrite" value="hello" />
</body></html> 
```

会提醒“世界”。但是，使用`//var overWrite = "world";`（如注释掉该行），它会提醒`[html element]`. 请注意，这是在页面加载之后，因此它是持久的，而不是某种临时分配。

由于不一致和可读性问题，强烈同意**不应该使用它。**

**编辑**

仍然对这个问题感到好奇并进行了更多测试。`document.getElementById`我很好奇使用或通过变量引用访问是否更快。做了这个测试：

html

```
<div id="contentZone"></div> 
```

js

```
var startTime = Date.now();
for( var i = 0; i < 1000; i++){
    for( var n = 0; n < 2000; n++){
        var ni = document.getElementById("contentZone");
    }
}
var endTime = Date.now();
console.log( endTime - startTime );

var aTime = Date.now();
for( var i = 0; i < 1000; i++){
    for( var n = 0; n < 2000; n++){
        var ni = contentZone;
    }
}
var bTime = Date.now();
console.log( bTime - aTime ); 
```

安慰

```
431
814 
```

仅在这台机器上进行了测试，但似乎使用`document.getElementById`速度更快，这使得该变量访问变得更不可取。

# java - 如何创建使用 Scanner 打印一组行的 UI

> ID：12663983
> 
> 赞同：0
> 
> 时间：2012-09-30T18:47:13.703
> 
> 标签：java, user-interface, java.util.scanner

您好，我只是盯着 java，我一直在到处寻找如何制作基于 Scanner 的 UI，它将在单独的窗口上打印以下解析方法：

```
Character [A] located at position 0 is a vowel
Character [b] located at position 1 is a consonant
Character [r] located at position 2 is a consonant
Character [a] located at position 3 is a vowel
Character [h] located at position 4 is a consonant
...
             16 [Abraham Lincoln ]
              14 [braham Lincoln]
               12 [raham Lincol]
                10 [aham Linco]
                 8 [ham Linc]
                  6 [am Lin]
                   4 [m Li]
                    2 [ L]
                     0 [] 
```

我有执行此操作的方法的代码，但现在我所拥有的只是一个扫描仪，它将我在 Eclipse 控制台上键入的任何输入转换为一个字符串，然后进行解析。

```
 String enterName;
    Scanner name = new Scanner(System.in);

    System.out.println("Enter your name");
    enterName = name.nextLine(); 
```

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:52:09.087

创建一个`JFrame`，`JPanel`在其中添加一个布局管理器，如`BorderLayout`. 在面板内添加 a`JTextArea`或 a `JEditorPane`，您可以在其中添加使用`Scanner`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:00:52.153

`Scanner`如上所述，使用文本输入是基于控制台的应用程序的规范。

如果您希望创建*图形*用户界面，您可以使用[Java Swing](http://docs.oracle.com/javase/tutorial/uiswing/index.htm)并使用 a`JTextField`来接受用户输入。`Scanner`在这种情况下不需要。

# python - 如何在 Redhat 上找到 PYTHONPATH？

> ID：12663988
> 
> 赞同：1
> 
> 时间：2012-09-30T18:47:38.777
> 
> 标签：python, linux, pythonpath

在 Redhat 上，安装了 python 2.4.3。在那台机器上，我们有一个使用 python 2.6 的应用程序（奇怪，至少对我来说）。

我是这样理解的：我从 RedHat 桌面启动命令行并输入“python”，它说：

```
Python 2.4.3 (#1, Dec 11 2006, 11:39:03) 
```

在我上面提到的应用程序中，我可以启动一个 xterm，当我在那里输入“python”时，它会说：

```
Python 2.6.5 (r265:79063, Sep 27 2010, 19:19:43) 
```

现在，RedHat 的 PYTHONPATH 和这个应用程序的 PYTHONPATH 是不同的。

我想向这个应用程序的 PYTHONPATH 添加一个新目录。如何找到其 PYTHONPATH 的定义位置？以及如何向该应用程序的 PYTHONPATH 添加新目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:50:34.060

该应用程序可能在某些 python 虚拟环境中运行。

你应该专注于你的研究，试图找出运行 python 时正在使用的 python。您可以使用 which 命令来执行此操作。

```
which python 
```

这两个值肯定会不同。

现在，在向应用程序 PYTHONPATH 添加新路径之前，您应该先询问为什么需要它。如果您只需要一个 python 模块，最好从 pip 安装它。

如果您仍然需要这样做，您可以使用 python 站点进行操作。你看看它有你的答案。[http://docs.python.org/library/site.html](http://docs.python.org/library/site.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:50:05.203

无法找到`PYTHONPATH`定义的位置，因为它可能在多个地方定义（它可以在 shell 启动时运行的任何脚本中定义或修改）。如果要将目录添加到路径中，可以在脚本中将表示该目录的字符串附加到[`sys.path`](http://docs.python.org/library/sys.html#sys.path).

# android - Android 变量未在通知中更新

> ID：12663990
> 
> 赞同：1
> 
> 时间：2012-09-30T18:47:51.237
> 
> 标签：android, mobile

我正在使用一些警报功能每五秒钟产生一次通知。在函数中有变量，每次调用时都应该改变。但是什么也没发生，它只是继续在通知中显示第一组数据。这是来自 MainActivity 类：

```
public void setRepeatingAlarm(){
    Intent intent = new Intent(this, TimeAlarm.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,intent, PendingIntent.FLAG_UPDATE_CURRENT);
    am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), (5 * 1000), pendingIntent);      
} 
```

这是来自 TimeAlarm 类：

```
public void onReceive(Context context, Intent intent) {

    nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    CharSequence from = "Homework";
    CharSequence message = "test"+ MainActivity.arraytest[x2]+ x2;
    x2 +=1;
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0,new Intent(context,TimeAlarm.class), 0);
    Notification notif = new Notification(R.drawable.ic_launcher,"Update", System.currentTimeMillis());
    notif.setLatestEventInfo(context, from, message, contentIntent);
    nm.notify(notify_id, notif);
} 
```

问题是 x2 变量没有更新。它仅在第一次调用时更新。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:03:57.017

将 x2 变量设为静态似乎可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:11:43.877

也许远射但是...我怀疑`x2`可能会被多个线程访问？在这种情况下，应将其声明为`volatile`以便编译器跳过任何不适合多线程访问的变量的优化（在这种情况下可能导致错误行为）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T19:16:54.310

你在做其他事情`x2`吗？查看[BroadcastReciever 的生命周期文档。](http://developer.android.com/reference/android/content/BroadcastReceiver.html#ReceiverLifecycle)每次运行后，您的实例可能`TimeAlarm`会被杀死`onReceive()`；您需要做一些事情来保持`x2`运行之间的值。

# .htaccess - SeoUrl 和 .htacces 设置

> ID：12663996
> 
> 赞同：1
> 
> 时间：2012-09-30T18:48:34.360
> 
> 标签：.htaccess, url, seo

**当我访问mysite.com/search/eminem/1/video.html**时，我尝试让我的网站使用 seo 运行， 以给我这个 url **mysite.com/index.php?search=eminem&page=1&type=video**的 结果显示搜索页面，但没有结果，没有图像或 javascripts 等。就像 css 和 js 没有实现

这是我的 .htacces 代码

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^search/(.*)/(.*)/(.*).html?$ index.php?search=$3&page=$2&type=$1 [L]
<IfModule mod_deflate.c>
        <FilesMatch "\.(php|js|css|mp3|wmv|flv|html|htm)$">
            SetOutputFilter DEFLATE
        </FilesMatch>
    </IfModule>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T21:24:29.613

您要么需要将所有相对链接（用于图像、CSS、JavaScript 等）设置为带有前导斜杠的绝对链接，要么将其添加到 index.php 内容的标题中：

```
<base href="/"> 
```

# c++ - 类具有虚拟方法但非虚拟析构函数 C++

> ID：12663998
> 
> 赞同：8
> 
> 时间：2012-09-30T18:48:45.500
> 
> 标签：c++, eclipse, methods, virtual

> **可能重复：**
> [GNU 编译器警告“类具有虚函数但非虚析构函数”](https://stackoverflow.com/questions/127426/gnu-compiler-warning-class-has-virtual-functions-but-non-virtual-destructor)

我正在为两个类编写一个接口，并在标题中收到警告。这是代码：

```
class GenericSymbolGenerator {
   protected:                     // <== ok 
    ~GenericSymbolGenerator(void) {}

   public:
    virtual GenericSymbolTableCollection* generateSymbolTableCollection(GenericSymbolTableCollection *gst) = 0;
    GenericSymbolGenerator(void) {}
    // ~GenericSymbolGenerator(void) {} // <== warning if used
};

class PascalPredefinedSymbolGenerator : public GenericSymbolGenerator {
   protected:
    ~PascalPredefinedSymbolGenerator(void) {} // <== ok

   public:
    GenericSymbolTableCollection* generateSymbolTableCollection(GenericSymbolTableCollection *pst); // initializes *pst
    PascalPredefinedSymbolGenerator(void) {}
    // ~PascalPredefinedSymbolGenerator(void) {} <== warning if used
};

class PascalSymbolGenerator : public GenericSymbolGenerator {
    protected:
         ~PascalSymbolGenerator(void) {} // <== ok

    public:
     GenericSymbolTableCollection* generateSymbolTableCollection(GenericSymbolTableCollection *st); // initializes st
     PascalSymbolGenerator(void) {}
     // ~PascalSymbolGenerator(void) {} // <== warning if used
}; 
```

只要构造函数/析构函数是无效的，将析构函数声明为受保护就没有问题。当类使用堆时会出现问题（析构函数被声明为受保护的，无法将类从“外部”中释放出来，使对象“坚不可摧”）。有没有更方便的方法（除了一路公开）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T19:08:41.933

用作多态基的类应该有一个虚拟析构函数或一个受保护的析构函数。

原因是如果你有一个公共的、非虚拟的析构函数，那么这个类的外部用户对它的几乎任何使用都是不安全的。例如：

```
GenericSymbolGenerator *ptr = new PascalPredefinedSymbolGenerator();
delete ptr; // behavior is undefined, we tried to call the base class destructor 
```

通过标记析构函数，您可以防止用户通过基类`protected`删除对象。`PascalPredefinedSymbolGenerator`通过将析构函数设为 public 和`virtual`，当用户通过基类删除时，您可以获得定义的行为。所以选择其中一个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T18:55:28.103

我认为编译器正确地警告您基类中的非虚拟析构函数是正确的。您创建了一个明确打算作为继承层次结构的根的类，但是通过使基类析构函数成为非虚拟的，您破坏了通过指向基类的指针删除对象的能力（因为所有这些都是execute 是基类的析构函数，因此不会执行派生类特定的操作）。这在 C++ 中被认为是一个非常糟糕的主意，因为当涉及到这个对象层次结构时，您基本上破坏了多态性的实现。

正如您在评论中提到的，您的意图是使用 GenericSymbolGenerator 作为接口并强制用户实例化和使用包含实际实现代码的派生类。在 C++ 中声明接口的规范方法是将接口上的至少一个函数声明为纯虚函数。这禁止您实例化基类，但仍创建可实例化的派生类。您已经通过`generateSymbolTableCollection()`在基类中声明为纯虚函数来完成此操作。因此，您需要做的就是使析构函数成为虚拟的，因为在这个特定场景中它确实必须是虚拟的。

另外，顺便说一句，默认构造函数和析构函数的规范签名通常在不使用“void”作为参数的情况下编写，只需使用空括号代替。