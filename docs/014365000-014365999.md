# StackOverflow 问答 14365000-14365999

# php - Yii 添加事务回滚操作

> ID：14365007
> 
> 赞同：0
> 
> 时间：2013-01-16T18:16:15.350
> 
> 标签：php, yii, rollback

有没有办法在调用动作`CDbConnection`时添加动作`rollback`？

我有这段代码，它可以工作：

```
$transaction = $model->dbConnection->beginTransaction();

try {
    //...
    //doing some manipulations
    //...

    if($model->save()) {
        $transaction->commit();
        $this->redirect(array('view','id'=>$model->id));
    }

} catch(Exception $e) {
    $transaction->rollback();
    throw $e;
} 
```

有没有办法恢复`$transaction->rollback();`调用时所做的操作而不将此代码放入`catch`语句中，例如在事务回滚函数上添加事件。

[也许Behaviors 和 Events](http://www.yiiframework.com/wiki/44/behaviors-events/)有一种解决方法，但我不确定它是如何工作的。

谢谢！

**编辑**-我想做的是：

当模型保存失败时，数据库会回滚，但我也在对文件进行一些操作（在验证和保存模型之前我需要这样做），所以如果模型因为以下原因而无法保存验证后，我需要将这些更改还原到文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:46:41.317

目前 CDbTransaction 没有定义任何事件。

我要做的是创建一个类，该类将以您可以重用的方式处理此逻辑：

```
//protected/components/AtomicTransformation.php
<?php
class AtomicTransformation {
  private $_model;
  private $_transaction;
  public function __contruct(CModel $model)
  {
    $this->_model = $model;
    $this->_transaction = $model->dbConnection->beginTransaction();
  }
  public function commit()
  {
    $this->_transaction->commit();
  }
  public function rollback( /* pass any params you need for your revert logic */)
  {
    // Do your revert logic here
    $this->_transaction->rollback();
  }
}

$transformation = new AtomicTransformation($model);

try {
    //...
    //doing some manipulations
    //...

    if($model->save()) {
        $transformation->commit();
        $this->redirect(array('view','id'=>$model->id));
    }

} catch(Exception $e) {
    $transformation->rollback( /*your params */ );
    throw $e;
} 
```

# scala - scala矩阵的通用列访问

> ID：14365008
> 
> 赞同：0
> 
> 时间：2013-01-16T18:16:16.363
> 
> 标签：scala, types, functional-programming

我有存储不同类型矩阵的代码，例如`m1: Array[Array[Double]], m2: List[List[Int]]`. 正如所见，这些矩阵都存储为一系列行。任何行都很容易检索，但在我看来，列需要遍历矩阵。我想编写一个非常通用的函数，它从这两种类型的矩阵中返回一列。我已经以多种方式编写了此内容，其中最新的是：

/* 获取存储在行中的任意矩阵的列 */

```
private def column(M: Seq[Seq[Any]], n: Int, c: Seq[Any] = List(),
                     i: Int = 0): List[Any] = {
    if (i != M.size) column(M, n, c :+ M(i)(n), i+1) else c.toList 
```

这可以编译，但它不起作用：当我尝试传入 Array[Array[Double]] 时出现类型不匹配。我也试过用一些视图边界来写这个，即

```
private def column[T1 <% Seq[Any], T2 <% Seq[T1]] ... 
```

但这也没有结果。为什么我写的第一个代码段不起作用？做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:40:23.337

```
import collection.generic.CanBuildFrom

def column[T, M[_]](xss: M[M[T]], c: Int)(
  implicit cbf: CanBuildFrom[Nothing, T, M[T]],
           mm2s: M[M[T]] => Seq[M[T]],
           m2s: M[T] => Seq[T]
): M[T] = {
  val bf = cbf()
  for (xs <- mm2s(xss)) { bf += m2s(xs).apply(c) }
  bf.result
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T04:39:00.850

我建议您将 Matrix 表示为底层的一维数组（唯一的数组类型！），并根据行和列分别表示其结构。

这为您在表示和访问方面提供了更大的灵活性。例如，您可以同时提供以行为主和以列为主的组织。生成行迭代器与生成列迭代器一样容易，无论它是行优先还是列优先组织。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T18:22:06.997

如果您不关心返回类型，这是一种非常简单的方法：

```
 def column[A, M[_]](matrix: M[M[A]], colIdx: Int)
    (implicit v1: M[M[A]] => Seq[M[A]], v2: M[A] => Seq[A]): Seq[A] =
    matrix.map(_(colIdx)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T18:28:35.247

试试这个：

```
private def column[T](
 M: Seq[Seq[T]], n: Int, c: Seq[T] = List(), i: Int = 0): List[T] =
   if (i != M.size) column(M, n, c :+ M(i)(n), i+1) else c.toList 
```

# javascript - Windows 8 将图像发布到 Web 服务器

> ID：14365010
> 
> 赞同：0
> 
> 时间：2013-01-16T18:16:17.933
> 
> 标签：javascript, windows, windows-8

我有以下 JavaScript 代码可以从人员应用程序中获取联系人姓名和缩略图。

```
 var picker = new Windows.ApplicationModel.Contacts.ContactPicker();
 picker.commitButtonText = "Select";
 picker.pickSingleContactAsync().done(function (contact) {
 if (contact !== null) {
     var name = contact.name
     contact.getThumbnailAsync().done(function (thumbnail) {
         if (thumbnail.size > 0) {
             var imageBlob = window.URL.createObjectURL(thumbnail);
             document.getElementById("img").src = imageBlob; 
             WinJS.xhr({ url: "http://host?name=" + name }).done(
                 function completed(rss) {

                 },
                 function error(request) {
                    // handle error conditions.
                 },
                 function progress(request) {
                    // report on progress of download.
                 }
             ); 
         }
     });
 } 
```

我知道如何将名称发送到 Web 服务器，但如何发送缩略图？

有人可以提供示例代码。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:25:35.033

您可以使用 WinJS.xhr() 进行 HTTP POST。这是一个例子：

[如何使用 WinJS.xhr 上传二进制数据](http://msdn.microsoft.com/en-us/library/windows/apps/jj635240.aspx)

您只需设置以下选项：`type: "POST", url: <URI of the website>, data: blob`. 首先创建 blob，如示例所示。

# android - 在 Phonegap 中刷新 HTML5 页面？

> ID：14365021
> 
> 赞同：0
> 
> 时间：2013-01-16T18:17:07.687
> 
> 标签：android, jquery, cordova, dreamweaver

我有一个完整的 phonegap 1.6.1 应用程序，内置 HTML5。我想让这个页面从互联网上自行刷新（将应用内的 html 文件替换为在线文件，并保存以备后用），但是当它不可能时，什么也不做。

它在 Android 上（2.3.7 和 4.1.2）

是否可以？

如果您能向我发送有帮助的代码（脚本），我将不胜感激。

PS我在没有任何数据库等的DreamWeaver中做这项工作。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:22:24.917

您需要将您的网站列入白名单，以便允许其接管 PhoneGap 提供的 WebView。

[http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)

[https://build.phonegap.com/blog/access-tags](https://build.phonegap.com/blog/access-tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:32:36.527

您是想用相应网站上的内容替换实际的 html，还是尝试更新页面上的内容？一种可能是另一种可能不是，因为您的 html 索引已编译到 adk 中，并且本身不能真正即时编辑。您可以从网络上动态更新内容，但我很确定在 android 设备本身上重新编译您的 apk 是不可能的。

但是，如果您的 html 文件只不过是您网站的 web 视图或 iframe，那么只要应用程序可以访问互联网，它就会起作用。问题是如果没有连接到互联网，您的应用程序将无法运行。但是，当无法访问 Internet 时，您可以编写一个 js 例程来拉取默认的 html 视图。

# ios - iOS 子视图（UIDatePicker 和 UIBarButtonItem）不响应用户输入

> ID：14365026
> 
> 赞同：2
> 
> 时间：2013-01-16T18:17:17.453
> 
> 标签：ios, objective-c

我对 iOS 编程相当陌生，所以这可能是一个非常简单的错误。无论如何，我有一个子视图，我希望它出现在“正常”视图之上，这样用户可以使用 UIDatePicker 输入日期并使用 UIToolbar 中的 UIBarButtonItem 确认他的选择（这也会提示子视图消失） . 问题是控制元素（选择器和按钮）不响应点击和其他手势，尽管在“正常”视图的顶部可见。我注意到作为“正常”视图一部分的按钮会做出响应，即使该按钮位于子视图下方并且不可见。这是生成子视图及其元素的代码：

```
UIView * newView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 0)];
newView.backgroundColor = [UIColor colorWithWhite:1 alpha:1];

UIToolbar * toolbar = [[UIToolbar alloc] initWithFrame: CGRectMake(0, 0, 320, 49)];
toolbar.barStyle = UIBarStyleBlack;

UIBarButtonItem *infoButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:nil action:@selector(dismissCustom:)];
toolbar.items = [NSArray arrayWithObjects:infoButtonItem, nil];

UIDatePicker *datePicker = [[UIDatePicker alloc] init];
datePicker.datePickerMode = UIDatePickerModeDate;
datePicker.hidden = NO;
datePicker.date = [NSDate date];
datePicker.frame = CGRectMake(0, 49, 320, 250);
datePicker.autoresizingMask = UIViewAutoresizingFlexibleWidth;
[datePicker addTarget:self action:@selector(pickerDateChanged:) forControlEvents:UIControlEventValueChanged];
[newView addSubview:datePicker];

[newView addSubview:toolbar];
[self.view addSubview:newView];

[self.view bringSubviewToFront:newView];

newView.tag = 1; 
```

方法`dismissCustom:`和方法`pickerDateChanged:`如下：

```
-(void)pickerDateChanged:(UIDatePicker *)sender
{
    NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];

    NSLog(@"Picked the date %@", [dateFormatter stringFromDate:[sender date]]);

    dateButton.titleLabel.text = [dateFormatter stringFromDate:sender.date];
} 
```

和

```
-(void)dismissCustom:(UIBarButtonItem *)sender
{
     UIView * newView = [[UIView alloc] viewWithTag:1];
     [newView removeFromSuperview];
} 
```

有人知道缺少什么/错了吗？任何帮助表示赞赏！干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:33:53.230

至少对于按钮，您需要为操作添加一个 touchUpInside 事件：

```
[button addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside]; 
```

# python - Python POST 二进制数据

> ID：14365027
> 
> 赞同：61
> 
> 时间：2013-01-16T18:17:28.793
> 
> 标签：python, rest, post, urllib2, redmine

我正在编写一些代码来与 redmine 交互，我需要上传一些文件作为该过程的一部分，但我不确定如何从包含二进制文件的 python 发出 POST 请求。

我试图在[这里](http://www.redmine.org/projects/redmine/wiki/Rest_api_with_curl)模仿命令：

```
curl --data-binary "@image.png" -H "Content-Type: application/octet-stream" -X POST -u login:password http://redmine/uploads.xml 
```

在python（下）中，但它似乎不起作用。我不确定问题是否与文件编码有关，或者标题是否有问题。

```
import urllib2, os

FilePath = "C:\somefolder\somefile.7z"
FileData = open(FilePath, "rb")
length = os.path.getsize(FilePath)

password_manager = urllib2.HTTPPasswordMgrWithDefaultRealm()
password_manager.add_password(None, 'http://redmine/', 'admin', 'admin')
auth_handler = urllib2.HTTPBasicAuthHandler(password_manager)
opener = urllib2.build_opener(auth_handler)
urllib2.install_opener(opener)
request = urllib2.Request( r'http://redmine/uploads.xml', FileData)
request.add_header('Content-Length', '%d' % length)
request.add_header('Content-Type', 'application/octet-stream')
try:
    response = urllib2.urlopen( request)
    print response.read()
except urllib2.HTTPError as e:
    error_message = e.read()
    print error_message 
```

我可以访问服务器，它看起来像一个编码错误：

```
...
invalid byte sequence in UTF-8
Line: 1
Position: 624
Last 80 unconsumed characters:
7z¼¯'ÅÐÐ·2^Ôøë4g¸R<süðí6kÄ¤ª¶!»=}jcdjSPúá-º#»ÄAtD»H7Ê!æ½]j):

(further down)

Started POST "/uploads.xml" for 192.168.0.117 at 2013-01-16 09:57:49 -0800
Processing by AttachmentsController#upload as XML
WARNING: Can't verify CSRF token authenticity
  Current user: anonymous
Filter chain halted as :authorize_global rendered or redirected
Completed 401 Unauthorized in 13ms (ActiveRecord: 3.1ms) 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-21T23:17:58.853

基本上你所做的都是正确的。查看您链接到的 redmine 文档，似乎 url 中点后的后缀表示发布数据的类型（.json 表示 JSON，.xml 表示 XML），这与您得到的响应一致 - `Processing by AttachmentsController#upload as XML`。我想也许文档中有一个错误，要发布二进制数据，您应该尝试使用`http://redmine/uploads`url 而不是`http://redmine/uploads.xml`.

顺便说一句，我强烈推荐 Python 中用于 http 的非常好的和非常流行的[Requests](http://requests.readthedocs.org/en/latest/api/)库。它比标准库（urllib2）中的要好得多。它也支持身份验证，但为了简洁起见，我在这里跳过了它。

```
import requests
with open('./x.png', 'rb') as f:
    data = f.read()
res = requests.post(url='http://httpbin.org/post',
                    data=data,
                    headers={'Content-Type': 'application/octet-stream'})

# let's check if what we sent is what we intended to send...
import json
import base64

assert base64.b64decode(res.json()['data'][len('data:application/octet-stream;base64,'):]) == data 
```

更新

要找出为什么这适用于 Requests 但不适用于 urllib2，我们必须检查发送内容的差异。为了看到这一点，我将流量发送到在端口 8888 上运行的 http 代理（Fiddler）：

使用请求

```
import requests

data = 'test data'
res = requests.post(url='http://localhost:8888',
                    data=data,
                    headers={'Content-Type': 'application/octet-stream'}) 
```

我们看

```
POST http://localhost:8888/ HTTP/1.1
Host: localhost:8888
Content-Length: 9
Content-Type: application/octet-stream
Accept-Encoding: gzip, deflate, compress
Accept: */*
User-Agent: python-requests/1.0.4 CPython/2.7.3 Windows/Vista

test data 
```

并使用 urllib2

```
import urllib2

data = 'test data'    
req = urllib2.Request('http://localhost:8888', data)
req.add_header('Content-Length', '%d' % len(data))
req.add_header('Content-Type', 'application/octet-stream')
res = urllib2.urlopen(req) 
```

我们得到

```
POST http://localhost:8888/ HTTP/1.1
Accept-Encoding: identity
Content-Length: 9
Host: localhost:8888
Content-Type: application/octet-stream
Connection: close
User-Agent: Python-urllib/2.7

test data 
```

我看不出有任何差异可以保证您观察到不同的行为。话虽如此，http 服务器检查`User-Agent`标头并根据其值改变行为并不少见。尝试一一更改 Requests 发送的标头，使其与 urllib2 发送的标头相同，然后查看它何时停止工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-17T19:44:46.063

这与格式错误的上传无关。HTTP 错误明确指出 401 未授权，并告诉您 CSRF 令牌无效。尝试在上传时发送有效的 CSRF 令牌。

更多关于 csrf 令牌的信息：

> [什么是 CSRF 代币？它的重要性是什么，它是如何工作的？](https://stackoverflow.com/questions/5207160/what-is-a-csrf-token-what-is-its-importance-and-how-does-it-work)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T18:38:00.207

你需要添加 Content-Disposition 头，像这样（虽然我在这里使用了 mod-python，但原理应该是一样的）：

```
request.headers_out['Content-Disposition'] = 'attachment; filename=%s' % myfname 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-23T10:19:17.637

您可以使用[unirest](http://unirest.io/python.html)，它提供了简单的方法来发布请求。`

```
import unirest

def callback(response):
 print "code:"+ str(response.code)
 print "******************"
 print "headers:"+ str(response.headers)
 print "******************"
 print "body:"+ str(response.body)
 print "******************"
 print "raw_body:"+ str(response.raw_body)

# consume async post request
def consumePOSTRequestASync():
 params = {'test1':'param1','test2':'param2'}

 # we need to pass a dummy variable which is open method
 # actually unirest does not provide variable to shift between
 # application-x-www-form-urlencoded and
 # multipart/form-data

 params['dummy'] = open('dummy.txt', 'r')
 url = 'http://httpbin.org/post'
 headers = {"Accept": "application/json"}
 # call get service with headers and params
 unirest.post(url, headers = headers,params = params, callback = callback)

# post async request multipart/form-data
consumePOSTRequestASync() 
```

# python - numpy 3D 图像数组到 2D

> ID：14365029
> 
> 赞同：13
> 
> 时间：2013-01-16T18:17:34.190
> 
> 标签：python, arrays, image, numpy, slice

我有一个灰色图像的**3D-numpy**数组，看起来像这样：

```
[[[120,120,120],[67,67,67]]...] 
```

显然，我的每个 RG 和 B 都相同，因为它是灰色图像 - 这是多余的。我想得到一个新的二维数组，它看起来像：

```
[[120,67]...] 
```

这意味着将每个像素的数组 [x,x,x] 取为值 x

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-16T18:21:42.257

如果你的形状`ndarray`是（M，N，3），那么你可以得到一个（M，N）灰度图像，如下所示：

```
>>> gray = img[:,:,0] 
```

# java - 从 JDeveloper 11.1.1.6 打开项目时，JDeveloper 11.1.2.3 挂起

> ID：14365031
> 
> 赞同：0
> 
> 时间：2013-01-16T18:17:36.483
> 
> 标签：java, jakarta-ee, jdeveloper

我这里有一个我无法解决的问题。整个故事很短。我在 JDeveloper 11.1.1.6 中有一个 JavaEE 客户端-服务器项目，它的工作原理就像一个魅力。最近我不得不将 JDeveloper 版本升级到最新的 11.1.2.3。将项目从旧版本 JDeveloper 迁移到新版本的第一个问题没有帮助：IDE 一直挂起，没有明显的（对我而言）原因，日志文件对此保持沉默。然后我尝试了另一种方法：我只是从一开始就创建了同一个项目，并将所有必要的源文件、库、设置项目属性等都放在那里。仍然没有，但现在至少找到了一种错误的方法。我`C:\Oracle\Middleware\jdeveloper\jdev\bin\jdev.exe`从命令行运行并得到以下信息：

```
Jan 16, 2013 8:52:09 PM oracle.ideimpl.runner.StarterFactoryDescriptionImpl logError
SEVERE: Incorrect hash-structure value in starter-factory definition
Jan 16, 2013 8:52:10 PM oracle.ideimpl.runner.StarterFactoryDescriptionImpl logError
SEVERE: Incorrect hash-structure value in starter-factory definition 
```

但我不知道下一步可能是什么......有人可以帮助我吗？提前感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:38:17.807

我的第一次尝试是打开另一个 jdev11.1.1.6.0 项目，以确保最新版本的安装正常。我在 11.1.2.3.0 中打开了许多 11.1.1.6.0 项目，没有问题。您是否厌倦了在另一台电脑上执行此操作？

# php - PHP中的XOR二进制

> ID：14365032
> 
> 赞同：0
> 
> 时间：2013-01-16T18:17:39.447
> 
> 标签：php, xor

我想对二进制文件进行异或，但结果仍然是错误的异或异或示例脚本：

```
function _xor($text,$key){
    for($i=0; $i<strlen($text); $i++){
            for($j=0; $j<strlen($key);$j++){
                $text[$i] = $text[$i]^$key[$j];
        }
    }
    return $text;
} 
```

这是结果：

```
10011110 
```

应该导致之间的异或

```
01100001
01100010
--------
00000011 
```

请给我正确的答案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:28:38.707

```
function _xor($text,$key){
    for($i=0; $i<strlen($text); $i++){
        $text[$i] = intval($text[$i])^intval($key[$i]);
    }
    return $text;
}

echo  _xor('01100001','01100010'); 
```

在你使用之前`^`，你应该先将 string 转换为 int

不需要使用两个错误的循环，只需一个即可。

# rebol - 你如何为 Rebol 3 编写编解码器？

> ID：14365034
> 
> 赞同：6
> 
> 时间：2013-01-16T18:17:52.183
> 
> 标签：rebol, rebol3

我为 Rebol 2 编写了一个[JSON 编码器/解码器](http://reb4.me/r/altjson)。我正在为 Rebol 3 重写它，并希望将它作为[编解码器](http://www.rebol.net/r3blogs/0184.html)在 Rebol 3 中提供：

```
load %data.json
save %data.json object
decode 'json to-binary {["some","json"]} 
```

我该怎么办？

*在询问时，有关此主题的文档很少。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T19:52:53.187

简单的答案是你不能。至于为什么，有几个答案。

1.  当前的编解码器模型未记录。目前只有 Carl 知道如何编写编解码器。尽管有人可能能够查看源代码并找出答案，但目前还没有。
2.  当前的编解码器功能不够灵活，无法在这里制作您想要的东西。你可以制作解码器，但不能制作编码器，因为`encode`它只需要图像、二进制文件或字符串。也许只有一个解码器对你来说就足够了。
3.  当前模型仅支持本机编解码器。您不能在 Rebol 代码中编写编解码器，对于解析器，这意味着您不能使用`parse`. 您有解析器的本机代码版本吗？
4.  当前的编解码器模型是我们希望最终拥有的编解码器模型的占位符。这就是为什么它没有得到很好的记录。我们最终希望支持增量编码/解码、可以直接从文件或其他端口读取的编解码器以及 Rebol 编解码器。但是，除了最初的批评之外，我们还没有真正决定最终模型，甚至还没有开始讨论如何设计它。

我希望现在有更好的答案来回答你的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T10:35:40.583

编解码器在 imo 中处于高度未完成状态。我提出需要某种流式机制，IIRC Carl 理解这种需求，但解决方案从未在 imo 概述过。任务同上 - 当前的“实施”与 Carl 对 R3 任务的设想相去甚远……

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T10:49:41.703

有一个工具，请阅读：[http ://rebol2.blogspot.it/2012/12/json.html](http://rebol2.blogspot.it/2012/12/json.html)

这个： [http ://www.rebol.com/article/0522.html](http://www.rebol.com/article/0522.html)

然而 json 是一种处理数据的复杂方式，rebol 块在我看来是完美的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:23:52.520

我刚刚注意到**系统/目录/编解码器**已从 Rebol 3 中删除；所以我想该功能在 2009 年 3 月 31 日之后被删除。

```
>> ? system/catalog
SYSTEM/CATALOG is an object of value:
 datatypes       block!    length: 56
 actions         block!    length: 56
 natives         block!    length: 159
 errors          object!   [Throw Note Syntax Script Math Access Command...
 reflectors      block!    length: 6
 boot-flags      block!    length: 18 
```

# tortoisegit - 如何从命令行调用 TortoiseGit 同步对话框？

> ID：14365037
> 
> 赞同：3
> 
> 时间：2013-01-16T18:18:13.707
> 
> 标签：tortoisegit

我正在尝试创建一个批处理文件，该文件将显示特定存储库的 TortoiseGit 同步对话（右键单击“Git 同步...”shell 选项），但我找不到如何操作。我知道如何调用 TortoiseProc 进行日志提交等，但同步对话没有任何内容。

大家知道方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T03:28:19.603

```
"C:\Program Files\TortoiseGit\bin\TortoiseGitProc.exe" /command:sync 
```

# perl - Perl 打印的不规则行为

> ID：14365039
> 
> 赞同：-1
> 
> 时间：2013-01-16T18:18:14.783
> 
> 标签：perl

我正在尝试打印到两个不同的文件。出于某种原因，打印语句对一个文件工作正常，但对另一个文件却不行。当我运行这个程序时，filter2.out 包含一行“Beginning”。filter2.err 保持为空。

```
open(OUTPUT, "> Filter2/filter2.out");
open(ERROR, "> Filter2/filter2.err");
print OUTPUT "Beginning\n";
print ERROR "Beginning\n"; 
```

更新：所以我在一个更大的程序开始时运行它，并意识到它只会批量更新错误文件或文件关闭时。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T18:27:06.553

考虑添加

```
use strict;
use warnings; 
```

到脚本的顶部。这些语句将有助于捕获 Perl 默默忽略的错误。此外，考虑在您的`open`调用中添加错误检查：很可能，它实际上并没有打开。我会这样写：

```
use strict;
use warnings;

open(OUTPUT, "> Filter2/filter2.out")
    or die "Can't open filter2.out: $!";
open(ERROR, "> Filter2/filter2.err")
    or die "Can't open filter2.err: $!";
print OUTPUT "Beginning\n";
print ERROR "Beginning\n"; 
```

例如，通过添加我得到的严格和警告：

```
print() on closed filehandle OUTPUT at .\printer.pl line 6.
print() on closed filehandle ERROR at .\printer.pl line 7. 
```

唔...！

通过添加错误检查，我得到：

```
PS C:\dev> perl .\printer.pl
Can't open filter2.out: No such file or directory at .\printer.pl line 4. 
```

啊！看，我没有文件夹。添加文件夹后，一切正常。你可能会发现类似的东西。

最后，您可能还应该使用现代的词法文件句柄。这有助于捕获其他错误（例如重复使用的句柄名称。）因此，最终脚本将如下所示：

```
use strict;
use warnings;

open(my $output, ">", "Filter2/filter2.out")
    or die "Can't open filter2.out: $!";
open(my $error, ">", "Filter2/filter2.err")
    or die "Can't open filter2.err: $!";
print $output "Beginning\n";
print $error "Beginning\n"; 
```

中提琴！现在您可以准确地看到问题出在哪里，因为它失败了，并确保您稍后编写的其他库或代码不会意外地干扰您的文件句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:23:20.367

您需要检查您的文件是否已正确打开。此外，最好使用局部变量作为文件句柄而不是裸词：

```
open( my $err, "> Filter2/filter2.err") or die "Couldn't open error: $!"
print $err "Beginning\n" 
```

# macos - 本地计算机中 Git 文件上的图标

> ID：14365040
> 
> 赞同：2
> 
> 时间：2013-01-16T18:18:21.103
> 
> 标签：macos, git, version-control, github, tortoisesvn

我来自SVN世界！如果我在查看我的文件夹和文件，使用 Tortoise SVN 他们有小图标，如绿色复选标记、蓝色加号等，所以我可以直观地看到发生了什么变化，等等......但我看不到那个视觉Git 的东西，我从这里安装了 Mac 的 GitHub：http://mac.github.com 还有什么我应该安装的吗？或者有什么更好的软件推荐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:47:31.263

GitHub 客户端似乎可以与 github.com 进行交互！

看看另一个问题，提到了多个优秀的 OS X 客户端：

[https://stackoverflow.com/questions/1158650/easy-to-use-git-client-for-non-technical-people](https://stackoverflow.com/questions/1158650/easy-to-use-git-client-for-non-technical-people)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:55:34.317

作为替代答案，请从命令行尝试。`git status`. 然后按向上箭头下次再做一次。从命令行使用 git 的原因有很多：

*   历史
*   管道
*   制表符补全
*   脚本
*   速度

# java - 如何在 Java 中创建一个空的不可变 Scala 映射？

> ID：14365048
> 
> 赞同：13
> 
> 时间：2013-01-16T18:18:56.010
> 
> 标签：java, scala, map, immutability

这应该是显而易见的，但我还没有找到一个优雅的解决方案。由于各种原因，我需要创建一个不可变的 Scala 映射（Scala 2.10 中的 scala.collection.immutable.Map），但我只能编写 Java 代码。我该怎么做呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T18:32:12.660

疯狂的猜测 - 这里什么都没有：

```
scala.collection.immutable.Map$.MODULE$.<…, …&gt;empty() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:49:46.327

起初我很困惑，只是执行以下操作会失败：

```
scala.collection.immutable.Map<Integer, String> = scala.collection.immutable.Map$.<Integer, String>empty(); 
```

它看起来很奇怪的原因是因为我知道 scala 生成静态转发器，这些转发器在内部取消引用`MODULE$`并调用相应的（非静态）方法。我做了一些测试，虽然我发现的内容与原始问题有些相干，但它仍然是相关的并且很高兴知道。

假设我们有以下内容：

```
package test
object MyScalaObject {
  def empty[A, B]: Map[A, B] = sys.error("TODO")
} 
```

使用`javap`我们可以看到生成了一个静态转发器：

```
public class test.MyScalaObject extends java.lang.Object{
    public static scala.collection.immutable.Map empty();
    public test.MyScalaObject();
} 
```

事实上，我们可以在 java 中执行以下操作：

```
scala.collection.immutable.Map<Integer, String> myMap = test.MyScalaObject.<Integer, String>empty(); 
```

一切都很好。但是，如果我们添加一个`MyScalaObject`也定义了具有相同签名的方法的类或特征，则 scala 不会生成静态转发器（当然是因为 JVM 不允许一个类同时定义具有相同签名的静态和非静态方法）。可能还有其他不同的微妙情况会阻止生成静态转发器。

考虑：

```
package test
class MyScalaObject {
  def empty[A, B]: Map[A, B] = sys.error("TODO")
}
object MyScalaObject {
  def empty[A, B]: Map[A, B] = sys.error("TODO TOO")
} 
```

`javap`表明静态转发器确实消失了：

```
public class test.MyScalaObject extends java.lang.Object{
    public scala.collection.immutable.Map empty();
    public test.MyScalaObject();
} 
```

在这种情况下，这意味着我们必须明确取消引用`$MODULE`指向单例对象的（唯一）实例：

```
scala.collection.immutable.Map<Integer, String> myMap = test.MyScalaObject$.MODULE$.<Integer, String>empty(); 
```

事实证明，trait`scala.collection.immutable.Map`和它的伴生对象都定义了一个无参数的`empty`方法，所以我们偶然发现了这个问题。

寓意是，虽然静态转发器是一个潜在有用的特性，但它也非常脆弱，因为仅仅修改一个类（在这种情况下，`empty`在 class 中添加一个方法`MyScalaObject`）就可能破坏该特性，甚至不会触及它的伴随对象本身。因此，`MODULE$`即使它看起来不太好并且即使**当前**存在静态转发器，始终明确引用（如 Wilfred Springer 的回答）肯定是一个好主意，以防止在更新到较新版本的库时潜在的损坏。

# svn - 服务器上的SVN删除文件问题

> ID：14365051
> 
> 赞同：1
> 
> 时间：2013-01-16T18:19:11.537
> 
> 标签：svn

我在使用 SVN 时遇到问题。突然之间，我无法删除服务器上的文件。

目录显示如下，文件夹路径如下

```
dev:/usr/HTTPServer/htdocs/en_US/sc/us/en$

drwxrwxr-x    3 277      1               512 Jan 16 11:49 readynow/
-rw-rw-r--    1 304      1             14812 Jan 11 11:19 readynow 
```

我想删除没有斜线的 readynow 。

```
dev:/usr/HTTPServer/htdocs/en_US/sc$ svn revert readynow
svn: Cannot revert: 'readynow' is not under version control 
```

svn status 向我显示了这个...味精，我似乎不理解（A + 符号），为什么我不能删除它 readynow

```
dev:/usr/HTTPServer/htdocs/en_US/sc$ svn st
D      index-not-minified.html
A  +   readynow 
```

当我运行 st 然后运行 ​​svn ci -m "delete" 时，它会引发以下错误。

删除我们
/en/index-not-minified.html 添加我们/en/readynow

```
dev:/usr/HTTPServer/htdocs/en_US/sc$ svn st
svn: Commit failed (details follow):
svn: MERGE request failed on '/svn-sc/us/en'
svn: 
Invalid changes line in rev-file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:18:28.707

1 不要在单个帖子中问 3 个不相关的问题 2 阅读文档！`svn help status`会**清楚地**告诉你为什么你不能（使用svn）delete readynow，并且`svn help revert`还会显示你尝试**了错误的命令**来删除文件（当这个文件**是**版本控制的）

`A + readynow`，根据帮助，意味着：

> 第一列：说明项目是否被添加、删除或以其他方式更改
> 
> ...
> 
> ```
>  'A' Added 
> ```
> 
> 第四列：计划提交将包含附加历史记录
> 
> ...
> 
> ```
>  '+' history scheduled with commit 
> ```

即-readynow目前不受版本控制，只有在提交后才会出现在repo中，这个对象在repository中有以前的历史（早期存在？？？），它将与文件一起添加到repo

3 对于“合并请求失败”问题

这似乎是一个[已知](http://svn.haxx.se/users/archive-2006-06/1164.shtml) [问题](https://ssl.supermind.nl/collab/projects/submin/ticket/269)，很可能是由错误的提交后挂钩引起的

4 对于“rev-file 中的无效更改行”，除了提到 FSFS（很久以前的版本 - 2004 和[2007 年](http://subversion.open.collab.net/ds/viewMessage.do?dsForumId=4&dsMessageId=1153)）和巨额交易可能存在的问题外，没有任何确定的存在

因为你没有写任何关于你的操作系统、SVN 版本、repo 类型、repo 大小......我不能说更多 - 只有“验证存储库，创建和使用新的 WC”。

# openssh - cloudbees 中的新 SSH 密钥

> ID：14365054
> 
> 赞同：0
> 
> 时间：2013-01-16T18:19:29.663
> 
> 标签：openssh, cloudbees

我正在用我在 Cloudbees 中的帐户创建一个新的 SSH 密钥。在公钥盒中，我给了

`ssh-rsa <key> user@publicIP.com`

但这表明**“无法进行指纹识别”**。我是 Cloudbees 的新手，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:54:30.160

我的猜测是您的 SSH 密钥无效。

您可以使用

```
cat > file.pub <<EOF
ssh-rsa <key> user@publicIP.com
EOF
ssh-keygen -l -f file.pub 
```

# android-sdk-tools - AVD Manager（v21.0.1 和 21.1rc2）的问题：不支持 xxhdpi

> ID：14365056
> 
> 赞同：0
> 
> 时间：2013-01-16T18:19:53.657
> 
> 标签：android-sdk-tools, avd

我在使用“设备定义”选项卡为[XPeria ZL手机创建自定义 AVD 时遇到问题。](http://www.gsmarena.com/sony_xperia_zl-5203.php)

我注意到如果其中一个使用 xxhdpi 密度，AVD 管理器无法解析 devices.xml 文件。

作为旁注，模拟器不再能够将显示缩放到实际大小。

有没有人遇到过这些问题并且能够解决它？我真的需要为我们正在开发的 POC 模拟该设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:04:48.133

第一个问题，关于添加xxhdpi设备后解析的错误，尝试将Android SDK Tools更新到21.1，应该可以解决问题。

对于您的第二个问题，使模拟器与 xxhdpi 资源一起工作，这可以在模拟器启动后通过一些额外的 adb-commands 来完成。取自 developer.sonymobile.com ( [http://developer.sonymobile.com/knowledge-base/sdks/sony-add-on-sdk/install-the-sony-add-on-sdk/](http://developer.sonymobile.com/knowledge-base/sdks/sony-add-on-sdk/install-the-sony-add-on-sdk/) )的安装故障排除页面，以下语句可用：

> 在 Android SDK Tools 版本 21.1 中，尚不支持模拟器显示的 xxhdpi 屏幕分辨率。但是，您可以手动覆盖模拟器的 LCD 属性。这将确保为 Xperia™ Z 模拟器分配正确的资源。为此，请在 Xperia™ Z 模拟器完成启动序列后在命令行中执行以下命令：
> 
> > adb shell setprop qemu.sf.lcd_density 480
> > 
> > adb 外壳停止
> > 
> > adb 外壳启动
> 
> 然后模拟器将重新启动。重新启动后，模拟器应该使用正确的屏幕密度和 UI 缩放。如果您经常使用这些设置，我们建议您使用批处理文件或 shell 脚本来执行这些命令。

# java - 索引对 并返回在 Solr 上按值排序的结果

> ID：14365061
> 
> 赞同：3
> 
> 时间：2013-01-16T18:20:03.523
> 
> 标签：java, solr, solrj

我有一组用户。每个用户都有一些字段。其中一个字段是映射，例如：“键，值”，其中值表示顺序。

例如：

`user1`拥有：

```
id    = user1
tags  = <apples, 100>, <bananas, 80>, <oranges, 60>
name  = "Ann Miller"
likes = "apples and skydiving, and sometimes solving puzzles"
quote = "Never spent a day without a smile!" 
```

`user2`拥有：

```
id    = user2
tags  = <bananas, 100>, <pears, 80>, <apples, 60>
name  = "Mike Anderson"
likes = "sleep and eating pizza"
quote = "Math, it's a puzzle to me. I love figuring out puzzles." 
```

我想要一个返回用户的一般搜索，例如：

```
search  |  result order
--------+--------------------
smile   | user1
puzzle  | user2, user1
bananas | user2, user1
apples  | user1, user2 
```

目前我有一个通用文件，我复制每个字段的值，然后在该字段上进行搜索。现在我只把对的键放在里面，所以排序不是我想要的。

我使用 SolrJ 来索引文档（从数据库中提取）并进行搜索。

我曾想过对苹果重复 100 次，对香蕉重复 80 次等单词，但这让我觉得非常缓慢且痛苦（除了不是一个好的方法）。

你们有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T17:01:38.507

根据 Andrea 的建议，解决方案可能是以下几行：

*   将值索引为动态字段（例如`*_value`，在 中`banana_value`）。
*   使用[eDisMax 查询解析器](http://wiki.apache.org/solr/ExtendedDisMax) [提升或 bf](http://wiki.apache.org/solr/ExtendedDisMax#boost_.28Boost_Function.2C_multiplicative.29)您的搜索结果，使用类似`bf=field($value_field)`where`value_field`是您使用 SolrJ 指定的附加参数。通过这个参数，您将提供**查询词+动态字段后缀**（例如banana_value），并且由于功能查询[字段](https://wiki.apache.org/solr/FunctionQuery#field)，您将获得该特定对的值并相应地提升结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:13:59.207

嗯，我不确定，但我认为这是不可能的......排序字段必须是单值的（多值没有意义），我想你有一个多值的字段。

现在假设您将地图的每个值索引为动态字段（字段名称是键，字段值是相应的权重）...在这里您解决了单值问题，但您遇到了另一个有趣的问题...排序字段无法在查询时确定，因为它取决于搜索匹配...

# machine-learning - 将多个功能与 svm 相 结合

> ID：14365067
> 
> 赞同：3
> 
> 时间：2013-01-16T18:20:36.800
> 
> 标签：machine-learning, computer-vision, classification, svm, libsvm

我想使用[Support Vector Machine结合](http://en.wikipedia.org/wiki/Support_vector_machine)[定向梯度的直方图](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)和[局部二进制模式](http://en.wikipedia.org/wiki/Local_binary_patterns)。但是，这些特征具有不同的维度。我怎样才能将它们结合起来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T12:47:34.260

nikie 上面的评论是正确的：您可以连接这些功能。因此对于每个数据点（图像），特征向量将如下所示：

[HOG1, HOG2, ..., HOG4608, LBP1, LBP2, ..., LBP7424]

其中 HOGn 是 HOG 特征等中的第 n 个特征。

然后，您的数据集将具有大小（图像数量，4608+7424）。

# php - 当 shell_exec 从多个不同的请求运行时会发生什么？

> ID：14365068
> 
> 赞同：0
> 
> 时间：2013-01-16T18:20:37.813
> 
> 标签：php, parallel-processing, shell-exec

这更像是一个操作系统问题而不是 PHP 问题，但无论如何：

我希望通过运行[`ffmpeg`](http://ffmpeg.org/)将[`shell_exec()`](http://php.net/manual/en/function.shell-exec.php)上传的视频转换为不同的格式。我想知道[`ffmpeg`](http://ffmpeg.org/)上传多个视频时操作系统如何处理多个命令。

下面是一些示例代码，使其更明确：

```
<?php

  $filePath = upload($_FILE['video']); //get filepath from uploaded file

  shell_exec('ffmpeg ' . $filePath . ' video.mp4'); //simple ffmpeg conversion

?> 
```

假设操作系统是基于 linux 的。

*   操作系统是否会为每个命令创建一个线程，直到它使用上面的代码耗尽内存？
*   我假设创建某种队列是处理这些呼叫的更好方法，但这是否意味着系统一次只能转换一个视频？
*   如果我希望系统并行转换多个视频怎么办，以及在系统负担过重之前了解系统可以处理的最大并行线程数的好方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:41:27.400

PHP 将为每个`shell_exec`执行的单独命令分叉一个单独的进程。

将这些工作排队是个好主意。所以会在后台运行它们，而不是延迟 PHP 的响应，直到上传和 ffmpeg 作业都完成。PHP 没有任何内置方法来执行此操作，但有许多库，例如[Gearman](http://gearman.org/)，用于管理此类任务。

对于视频转换等 CPU 密集型作业，一个好的经验法则是每个物理 CPU 内核一个进程。

# java - 在 Java 字符串中进行变量替换的优雅方法

> ID：14365069
> 
> 赞同：0
> 
> 时间：2013-01-16T18:20:38.633
> 
> 标签：java, parsing, variables, substitution, formulas

非常简单的问题，今天我的大脑被冻结了，所以我想不出一个我知道存在的优雅解决方案。

我有一个以“A+B”形式传递给我的公式

我也有公式变量到它们的“可读名称”的映射。

最后，我有一个公式解析器，它将计算公式的值，但前提是它与变量的可读名称一起传递。

例如，作为我得到的输入

```
String formula = "A+B"
String readableA = "foovar1"
String readableB = "foovar2" 
```

我希望我的输出是“foovar1+foovar2”

简单的查找和替换的问题在于它很容易被破坏，因为我们无法保证“可读”名称是什么。假设我用不同的参数再次举我的例子

```
String formula = "A+B"
String readableA = "foovarBad1"
String readableB = "foovarAngry2" 
```

如果我在循环中进行简单的查找和替换，我最终将替换我已经替换的可读名称中的大写字母 A 和 B。

这看起来像一个近似的解决方案，但我的变量周围没有括号

[如何替换 Java 字符串中的一组标记？](https://stackoverflow.com/questions/959731/how-to-replace-a-set-of-tokens-in-a-java-string)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:24:16.607

您提供的链接是一个很好的来源，因为使用模式匹配是要走的路。这里的基本思想是首先使用匹配器获取令牌。在此之后，您将拥有**运算符和操作数**

然后，在每个**Operand**上单独进行替换。

最后，使用**Operators**将它们重新组合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:57:34.633

**仅匹配**

如果您不必在进行替换后评估表达式，则可以使用正则表达式。就像是`(\b\p{Alpha}\p{Alnum}*\b)`

或 java 字符串`"(\\b\\p{Alpha}\\p{Alnum}*\\b)"`

然后`find()`一遍又一遍地使用来查找所有变量并存储它们的位置。

最后，遍历这些位置并从旧的字符串中构建一个新的字符串，并替换变量位。

并不是说它不会做太多检查提供的表达式是否合理。例如，如果你给它，它根本不介意，`)A 2 B(`只是替换 A 和 B（如`)XXX 2 XXX(`）。我不知道这是否重要。

这类似于您在问题中提供的链接，除了您需要与他们使用的不同的正则表达式。您可以访问[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)来使用正则表达式并找出一个可行的方法。我将它与我建议的那个一起使用，它在 A+B 和 A + (C* D ) 中找到了它需要的东西就好了。

**解析**

您可以使用一种可用的解析器生成器（Antlr 或 Sable 或 ...）解析表达式，或者找到可作为开源的代数表达式解析器并使用它。（您必须在网上搜索才能找到它们，我没有使用过，但怀疑它们存在。）

然后使用解析器生成表达式的解析形式，替换变量并用新变量重构字符串形式。

这个可能会更好，但工作量取决于您是否可以找到现有的代码来使用。

这还取决于您是否需要根据正常规则验证表达式是否有效。此方法很可能不会接受无效表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:26:37.103

一个简单的方法是

```
String foumula = "A+B".replaceAll("\\bA\\b", readableA)
                      .replaceAll("\\bB\\b", readableB); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T18:28:01.993

您的方法不能正常工作，因为
应该将公式（数学表达式）解析为表达式结构（例如表达式树）。

这样您就有了后来的*Operand* Nodes 和*Operator*节点。
稍后将遍历树并考虑数学优先级规则来评估此表达式。

我建议阅读更多关于表达式解析的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T18:25:11.550

1.  一个有点乏味的解决方案是扫描所有出现的 A 和 B 并记下它们在字符串中的索引，然后使用 StringBuilder.replace(int start, int end, String str) 方法。（在幼稚的形式下，这不是很有效，接近平方复杂度，或者更准确地说是“变量数”*“可能的替换数”）

2.  如果您知道所有运算符，则可以对它们进行拆分（例如在“+”上），然后在数组中替换单个“A”和“B”（当然，您必须先修剪空白字符）或数组列表。

# eclipse-rcp - 覆盖 Eclipse-RCP 产品中的内置透视布局

> ID：14365071
> 
> 赞同：2
> 
> 时间：2013-01-16T18:20:58.140
> 
> 标签：eclipse-rcp

是否可以在我的 Eclipse-RCP 产品中覆盖内置透视图的布局？

特别是，我希望添加一个自定义视图并更改 Debug 透视图的布局。我知道如何使用自定义透视图 ( `IPerspectiveFactory.createInitialLayout()`)。我希望我的自定义布局是永久的 - 在“重置透视图”命令中幸存下来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:44:16.440

创建一个实现`IPerspectiveFactory`.

将透视扩展添加到您的`plugin.xml`. 这是我的一个。

```
 <extension point="org.eclipse.ui.perspectives">
       <perspective
           class="gov.bop.cobolsupport.perspectives.CobolPerspectiveFactory"
           icon="icons/ispf_editor.gif"
           id="gov.bop.cobolsupport.CobolPerspective"
           name="Cobol"/>     
   </extension> 
```

您的用户可以更改您的观点，并根据需要保存更改。这是 Eclipse 内置的。

但是，当您扩展透视图时，Reset Perspective 命令会将透视图重置为您在`Perspectivefactory`类中定义的透视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:05:11.877

使用扩展点可以扩展透视图`org.eclipse.ui.perspectiveExtensions`。

> 通过对 org.eclipse.ui.perspectiveExtensions 扩展点的贡献，插件可以将自己的操作集、视图和各种快捷方式添加到现有透视图。

要扩展默认调试透视图，请将以下代码粘贴到您的`plugin.xml`:

```
 <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="org.eclipse.debug.ui.DebugPerspective">
         <view
               ratio="0.5"
               relative="org.eclipse.ui.views.TaskList"
               relationship="right"
               id="com.jens.customdebug.views.SampleView">
         </view>
      </perspectiveExtension>
   </extension> 
```

您必须定义一个相对视图（在我的情况下名为任务视图`org.eclipse.ui.views.TaskList`）和您自己的视图的 id（在我的情况下`com.jens.customdebug.views.SampleView`）

**资源：**

要了解如何使用此扩展点的更多信息，请查看[此处](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_advext_perspectiveExtension.htm)。对于此扩展点的配置标记，您还可以查看[此页面。](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_perspectiveExtensions.html)

# android - 获取 RadioButton 无法解析为类型

> ID：14365077
> 
> 赞同：0
> 
> 时间：2013-01-16T18:21:19.607
> 
> 标签：android, radio-button, android-contentresolver

我正在尝试构建一个单选按钮输入活动。我已经完成了 [http://developer.android.com/guide/topics/ui/controls/radiobutton.html中描述的任何事情](http://developer.android.com/guide/topics/ui/controls/radiobutton.html)

但是我在 boolean checked = ((RadioButton) view).isChecked(); 线。我在“（（RadioButton）视图）”部分下得到红线。我错过了什么？请帮忙。

```
 package com.my.test;

    import android.os.Bundle;
    import android.app.Activity;
    import android.content.Intent;
    import android.view.Menu;
    import android.view.View;
    import android.widget.EditText;

    public class Main1 extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main1);
        }

        public void onRadioButtonClicked(View view) {
            // Is the button now checked?
            boolean checked = ((RadioButton) view).isChecked();
            int a; // store the value corresponding to  the RadioButton which is clicked 

               switch(view.getId()) {
                            case R.id.radio1:
                                if (checked)
                                 a = 3;
                                    break;
                            case R.id.radio2:
                                if (checked) a = 2;
                                    break;
                            case R.id.radio3:
                                if (checked) a = 1;
                                    break;
                            case R.id.radio4:
                                if (checked) a = 0;
                                    break;
                     }

               Intent intent = new Intent(this, Test2.class);
               intent.putExtra("inputValue", a); // pass "a" to the next Activity       

    }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:24:31.800

将以下行添加到类的顶部，以及其他导入：

```
import android.widget.RadioButton; 
```

为了将来参考，您可以通过按`ctrl-shift-O`(Windows) 或`command-shift-O`(Mac)自动让 Eclipse 添加导入

# c# - WPF/MVVM 中的 ComboBox，带有 null 和空字符串

> ID：14365078
> 
> 赞同：-1
> 
> 时间：2013-01-16T18:21:24.943
> 
> 标签：c#, wpf, mvvm, combobox, inotifypropertychanged

我在 WPF/MVVM 项目中的 ComboBox 有问题。更改 ViewModel 后（我正确使用了所有内容：`INotifyPropertyChanged`、`ObservableCollection`等），ComboBox 并不总是更改其值。我已经对其进行了调试，来自 ViewModel 的 getter 返回了正确的值 ( `string.Empty`)，但 ComboBox 显示了列表中的值。下面的一些代码：

```
// It doesn't work.
<ComboBox ItemsSource="{Binding ItemsCollection}" SelectedItem="{Binding SelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

// It works.
<TextBlock Text="{Binding SelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

`string.Empty`如果 SelectedItem 是或，则 TextBlock 会正确更新`null`，但如果 SelectedItem 是 ，则 ComboBox 不会正确更新（旧值保留）`string.Empty`。只有当 SelectedItem 是`null`值时它才会被清除。
为什么会出现这种情况？

//**编辑**：

也许我解释错了。我有两个网格：左边有文件树，右边有选定文件的属性。`A`当我第一次选择没有设置属性的file时，ComboBox 是空的。如果我选择`B`设置了此属性的 file ，它将出现在 ComboBox 中。接下来，如果我选择`C`具有空属性的文件，则旧值将保留在 ComboBox 中（从所选文件之前 - `B`）。如果此属性来自`C`is `null`， not `string.Empty`，则清除 ComboBox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:06:01.597

对 ComboBox 使用 CollectionViewSource 而不是 ObservableCollection。

# ios - UIImageView 焦点、淡化背景和缩放

> ID：14365080
> 
> 赞同：1
> 
> 时间：2013-01-16T18:21:26.913
> 
> 标签：ios, imageview

我将如何制作可以点击的图像，这将触发另一个视图，该视图已缩放并且另一个视图略微可见。有点像推特上的帖子。我点击图像，它变成透明的黑色，中间是我点击的图像的放大版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:42:44.957

使用带有图像的按钮并使用

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES];
.....
.....

[UIView commitAnimations]; 
```

为您的视图设置动画

# python - Python-Mysql，更好的库还是更好的方法？

> ID：14365083
> 
> 赞同：1
> 
> 时间：2013-01-16T18:21:34.410
> 
> 标签：python, python-2.7

我正在使用 mysql.connector 并且对于某些任务，例如在本地 mysql 数据库中插入数据，该过程需要 0.0436846 秒。平均，有什么方法可以提高吗？

```
import mysql.connector
from mysql.connector import errorcode
    class Dal:
        @profile
        def __init__(self, dic):
            try:
                self.cnx = mysql.connector.connect(user=dic['user'],
                                    password=dic['password'],
                                    host=dic['host'],
                                    database=dic['database'])
            self.cursor = self.cnx.cursor()

            except mysql.connector.Error as err:
                if err.errno == errorcode.ER_ACCESS_DENIED_ERROR:
                    print("User/Pass Fails")
                elif err.errno == errorcode.ER_BAD_DB_ERROR:
                    print("BD no exist")
                else:
                    print(err)

        def insert_event(self,dic):
            ins_ev = ("INSERT INTO events "
                        "(device, type, index, datetime, c1,\
                         c2, vel, head, pfm, age,vod,created_on ) "
                        "VALUES (%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)"
                        )
            self.cursor.execute(ins_ev, dic)
            self.cnx.commit() 
```

也许另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:33:50.497

`mysql.connector`是一个纯 Python 模块。链接到 C 库的 MySQL-python 或 oursql 中的任何一个都应该至少在通信部分为您提供更好的性能。其他优化包括禁用索引和执行惰性插入。

# android - Beam如何强制重启我的应用程序android

> ID：14365088
> 
> 赞同：0
> 
> 时间：2013-01-16T18:21:48.240
> 
> 标签：android, refresh, nfc, android-lifecycle, android-beam

我使用 Beam API 通过 NFC 交换数据。我需要重新初始化我交换的数据，否则当设备再次相互接近时会发送相同的数据。如何强制重新初始化？调用 onCreate？如何实施

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:33:49.973

使用[OnNdefPushCompleteCallback](http://developer.android.com/reference/android/nfc/NfcAdapter.OnNdefPushCompleteCallback.html)接口。

# eclipse - pydev egit 提交单个项目

> ID：14365090
> 
> 赞同：1
> 
> 时间：2013-01-16T18:21:57.653
> 
> 标签：eclipse, project, commit, pydev, egit

**问题：** 如何使用 egit 在 pydev (eclipse Indigo 3.7.2) 中 提交*单个项目（多个）？*

**问题细节：** 我有许多独立的项目，目前都转到同一个存储库。我偶尔会处理它们，并且需要单独提交它们（不是一次全部提交），因为有时只有一个项目准备好了。不幸的是，当我右键单击单个项目文件夹时，选择 Team，然后 Commit，git 尝试提交我的*所有*项目（不仅仅是我选择的项目）。

**猜想：** 我需要将项目放在单独的本地存储库中吗？如果是这种情况，分离最终在同一个位桶存储库中的项目的最佳实践是什么？或者，我应该只有多个位存储库吗？

# php - 将字符串转换为浮点数时的奇怪结果

> ID：14365093
> 
> 赞同：3
> 
> 时间：2013-01-16T18:22:03.323
> 
> 标签：php, floating-point

我想将字符串转换为浮点数，但我遇到了一些问题。这是我的代码

```
 $dataValue = $item[$data];
    $dataValue = trim($dataValue);
    var_dump($dataValue);echo "<br>";
    $dataValue = str_replace(',', '.', $dataValue);
    var_dump($dataValue);echo "<br>";
    var_dump(floatval($dataValue));echo "<br>";
    var_dump(floatval('4.02'));echo "<br>"; 
```

和结果

```
string(7) "4,02"
string(7) "4.02"
float(4)
float(4.02) 
```

我不明白第三个结果，为什么我有 4 而不是 4.02 ？

谢谢

编辑：

我的新代码：

```
$dataValue = $item[$data];

        echo mb_detect_encoding($dataValue) . "<br>";

        $dataValue = iconv('ASCII', 'UTF-8//TRANSLIT', $dataValue);
        $dataValue = trim($dataValue);
        $dataValue = str_replace(',', '.', $dataValue);

        echo mb_detect_encoding($dataValue) . "<br>";

        var_dump($dataValue);echo"<br >";
        $dataValue = mb_convert_encoding($dataValue, "UTF-8");
        var_dump($dataValue);echo"<br >";
        $dataValue = str_replace(',', '.', $dataValue);
        $dataValue = floatval($dataValue);
        var_dump($dataValue);echo"<br >";` 
```

结果

```
ASCII
ASCII
string(7) "4.02"
string(7) "4.02"
float(4) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:30:59.367

只有 4 个可见字符，但`var_dump()`声称有 7 个。我推测小数点前有一个不可见字符导致`floatval()`过早终止转换。您可以通过查看`$dataValue`.

**编辑：**

您的字符串似乎是用 UTF-16LE 编码的。在处理之前使用 mb 或 iconv 将其转换为 ASCII/UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:25:05.330

测试了这个：

```
$dataValue = "4,02";
$dataValue = trim($dataValue);
var_dump($dataValue);echo "<br>";
$dataValue = str_replace(',', '.', $dataValue);
var_dump($dataValue);echo "<br>";
var_dump(floatval($dataValue));echo "<br>";
var_dump(floatval('4.02'));echo "<br>"; 
```

输出：

```
string(4) "4,02"
string(4) "4.02"
float(4.02)
float(4.02) 
```

您确定发布的代码会产生所描述的问题吗？

编辑

尝试添加这个：

```
$dataValue = preg_replace("/[^0-9\,]/", '', $dataValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:26:12.550

使用 number_format(float_number, decimal_places)：

```
var_dump(number_format(floatval($dataValue) ,2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T18:26:14.183

我相信不同之处在于 $dataValue 在第三个输出中是双引号字符串，而在第四个示例中使用单引号字符串。在 PHP 中，在处理如何将它们视为文字时，[它们的工作方式不同。](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T18:26:35.270

我将假设它与 PHP 的浮点实现中的准确性问题有关。

看看这个：[维基百科：浮点精度问题](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)

# git - 如何检查特定的远程存储库分支是否包含特定的合并分支？

> ID：14365094
> 
> 赞同：7
> 
> 时间：2013-01-16T18:22:04.580
> 
> 标签：git, branching-and-merging

我想检查远程 Git 存储库上的分支是否包含具有特定名称的合并分支。例如：

*   有一个远程存储库`www.example.com:/repo.git`。
*   在该存储库中，有一个名为`myBranch`.
*   我想检查一个特定的功能分支`myFeatureBranch`是否已合并到`myBranch`.

如果我克隆存储库并结帐`myBranch`，我可以这样做`git show-ref --verify refs/heads/myFeatureBranch`，但这不是我想要做的。我必须在不克隆的情况下使用远程分支来完成。

我已经玩过`git ls-remote --heads www.example.com:/repo.git`，但我唯一得到的是一个远程头列表。有没有人这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:45:00.853

您无法在遥控器上执行命令。它只是一种同步机制。您将需要克隆以执行常规命令。

您可能想查找`git branch -a --contains`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:29:51.743

### Git 按设计在本地运行

Git 的分布式本质是围绕几个基本概念设计的：

1.  大多数操作都是本地操作，只有少数例外，例如*push*和*ls-remote*。
2.  历史是根据提交对象*计算的。*

这意味着探索历史是本地操作，不能在远程存储库上执行。

### 远程参考

*git-ls-remote*命令在向上游搜索 refs 时很有用，但对历史记录无效。例如：

```
git ls-remote origin | egrep 'some_branch_name|merge' 
```

将在远程打印与您正在寻找的命名分支匹配的参考，或者（在 GitHub 的情况下）从合并的拉取请求创建的参考，例如：

```
381a77fd72ea594cfce5c82c845ad3d10bb87d71        refs/pull/99/merge 
```

*git-ls-remote*命令显示远程存储库中可用的引用以及相关的提交 ID 。但是，如果您想找出哪个分支包含给定的提交，则需要访问完整的历史记录；这需要你有一个本地副本。

### 查找包含合并提交的分支

我知道处理此问题的最佳方法如下：

1.  使用 获取所有分支`git fetch --all origin`。
2.  找到你想要的合并提交`git log --merges`。
3.  找到包含的分支`git branch --all --contains <commit>`。

这将为您提供包含指定提交的分支列表。

# html - 为什么我的智能手机上的“返回”按钮无法导航回上一页？

> ID：14365096
> 
> 赞同：1
> 
> 时间：2013-01-16T18:22:19.270
> 
> 标签：html, web-applications, mobile, mosync

我是移动开发的新手。我为移动平台编写了一个简单的 Web 应用程序，其中包含两个 HTML 文件：index.html、info.html。在主页面 index.html 中，有一个超链接允许用户导航到下一个 HTML 页面：info.html，如下所示：

```
<a href="info.html">Next</a> 
```

这两个 HTML 文件都位于同一目录中。我在我的桌面浏览器中测试了它，它工作正常。但是当我构建应用程序并将其加载到我的 Android 智能手机时出现了问题。如果我单击上面 index.html 中给出的“下一步”链接，它将毫无问题地进入 info.html 页面。但是当我使用智能手机上的“返回”按钮时，它卡在了那里，并没有按预期返回到上一页 index.html。那么这里的问题是什么？我正在使用 MoSync SDK for HTML Web 应用程序开发工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:36:16.320

我自己没有安卓手机。您是否意外删除了历史记录，如果不尝试将您自己的后退按钮放入其中可能不起作用，但它可能会有所帮助。

将此代码插入 HTML 文档的头部：

```
<script>
function goBack()
  {
  window.history.back()
  }
</script> 
```

然后将此代码插入您希望按钮出现的位置：

```
<input type="button" value="Back" onclick="goBack()"> 
```

要了解有关 javascript 后退按钮的更多信息：http: [//www.w3schools.com/js/js_window_history.asp](http://www.w3schools.com/js/js_window_history.asp)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T07:49:18.963

试试这个，它对我有用

```
 ` //back button (on Android).
                      document.addEventListener(
                    "backbutton",
                 function()
                        {
                     window.history.back()
                   },
                   true);` 
```

而且这个是退出应用程序

```
 `// Close the application when the back key is pressed.
               document.addEventListener(
                        "backbutton",
                       function()
                     {
                        mosync.app.exit();
                  },
                 false);` 
```

它们都是 javascripts 文件，所以把它们放在脚本标签中把这个脚本放在你的 android 应用程序的第一页上

# java - 适用于 Android 黑白棋游戏的 Minimax / Alpha Beta

> ID：14365097
> 
> 赞同：3
> 
> 时间：2013-01-16T18:22:19.640
> 
> 标签：java, android, artificial-intelligence, minimax, alpha-beta-pruning

我必须为 Android 实现一个黑白棋游戏。我已经设法实现了所有游戏，功能齐全，但问题是我没有人工智能。事实上，每走一步，计算机都会移动到使他获得最多棋子的位置。

我决定实现和 alpha-beta 修剪算法。我在互联网上做了很多关于它的研究，但我无法得出最终结论如何去做。我尝试实现一些功能，但无法实现所需的行为。

我的棋盘存储在 Board 类中（在这个类中，每个玩家占用的棋子存储在一个二维 int 数组中）。我附上了一张小图（对它的外观感到抱歉）。

图表：[https ://docs.google.com/file/d/0Bzv8B0L32Z8lSUhKNjdXaWsza0E/edit](https://docs.google.com/file/d/0Bzv8B0L32Z8lSUhKNjdXaWsza0E/edit)

我需要帮助来弄清楚如何在我的实现中使用 minimax 算法。

到目前为止，我所理解的是，我必须对董事会的价值进行评估。

为了计算棋盘的价值，我必须考虑以下因素： - 自由角（我的问题是我必须只关心自由角，或者我现在可以采取的那个？！这里的困境） . - 棋盘移动性：检查当前移动后可移动的棋子数。-棋盘的稳定性……我知道这意味着棋盘上不能翻转的棋子数量。- 移动将提供给我的件数

我计划实现一个新的 Class BoardAI，它将我的 Board 对象和部门作为参数。

你能告诉我我应该如何实现这个人工智能的逻辑思路吗？在进行深度计算时，我需要一些有关递归的帮助，但我不明白它是如何计算最佳选择的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T11:18:18.123

首先，您可以检查我多年前编写的跳棋 AI 的[这段代码。](https://github.com/THeK3nger/Cobra-Draughts/blob/master/cobradraughts/core/DraughtsBrain.py)有趣的部分是最后一个函数 ( `alphabeta`)。*（它在 python 中，但我认为你可以像伪代码*一样看待它）。

显然我不能教你所有的阿尔法/贝塔理论，因为它可能有点棘手，但也许我可以给你一些实用的技巧。

**评价功能**

这是良好的最小/最大 alpha/beta 算法（以及任何其他知情搜索算法）的关键点之一。编写一个好的启发式函数是 AI 开发的艺术部分。您必须非常了解游戏，与专家级玩家交谈以了解哪些棋盘特征对回答以下问题很重要：*玩家 X 这个位置有多好？*

您已经指出了一些不错的功能，例如机动性、稳定性和自由角。但是请注意，评估函数必须快速，因为它会被调用很多次。

一个基本的评价函数是

```
H = f1 * w1 + f2 * w2 + ... + fn * wn 
```

其中`f`是一个特征分数（例如自由角的数量），`w`是一个相应的权重，表示*特征 f 在总分中的重要性*。

只有一种方法可以找到权重值：经验和实验。;)

**基本算法**

现在您可以从算法开始。第一步是了解游戏树导航。在我的 AI 中，我只是将主板用作黑板，AI 可以在其中尝试移动。

例如，我们从某个配置**B1**中的板开始。

*第 1 步：获取所有可用的招式*。您必须为给定玩家找到所有适用于 B1 的移动。在我的代码中，这是由`self.board.all_move(player)`. 它返回一个移动列表。

*第 2 步：应用移动并开始递归*。假设函数返回了三个动作（**M1**、**M2**、**M3**）。

1.  采取第一步 M1 并应用它以获得新的板配置 B11。
2.  在新配置上递归应用算法（找到 B11 中适用的所有移动，应用它们，递归结果，......）
3.  撤消移动以恢复 B1 配置。
4.  采取下一步行动 M2 并应用它以获得新的板配置 B12。
5.  等等。

注意：步骤 3 只能在所有移动都可逆的情况下完成。否则，您必须找到另一种解决方案，例如为每个动作分配一个新棋盘。

在代码中：

```
for mov in moves :
    self.board.apply_action(mov)
    v = max(v, self.alphabeta(alpha, beta, level - 1, self._switch_player(player), weights))
    self.board.undo_last() 
```

*第三步：停止递归*。这三个非常深，因此您必须对算法进行搜索限制。`n`一个简单的方法是在关卡之后停止迭代。例如，我从**B1**和.`max_level=2``current_level=max_level`

1.  例如，我从 B1 (current_level 2) 应用 M1 移动以获得 B11。
2.  从 B11 (current_level 1) I apple，例如，M2 移动获得 B112。
3.  B122 是“current_level 0”板配置，所以我停止递归。我返回应用于 B122 的评估函数值，然后返回到级别 1。

在代码中：

```
if level == 0 :
    value = self.board.board_score(weights)
    return value 
```

现在...标准算法伪代码返回最佳*叶子*值的值。但是我想知道哪个动作能把我带到最好的叶子！为此，您必须找到一种将叶值映射到移动的方法。例如，您可以保存移动序列：从 B1 开始，序列 (M1 M2 M3) 将玩家带入棋盘 B123，值为 -1；序列（M1 M2 M2）将玩家带入棋盘 B122，值为 2；等等...然后您可以简单地选择将 AI 带到最佳位置的动作。

我希望这会有所帮助。

编辑：关于**alpha-beta 的**一些注释。没有图形示例很难解释 Alpha-Beta 算法。出于这个原因，我想链接我发现的最详细的 alpha-beta 修剪解释之一：**[this one](http://www.cs.ucla.edu/~rosen/161/notes/alphabeta.html)**。我想我真的不能做得比这更好。:)

关键点是：Alpha-beta 剪枝为节点添加了 MIN-MAX 两个边界。此边界可用于决定是否应扩展子树。

这个界限是：

*   *Alpha*：可能解决方案的最大下限。
*   *Beta*：可能解决方案的最小上限。

如果在计算过程中，我们发现`Beta < Alpha`可以停止对该子树的计算。

显然检查上一个链接以了解它是如何工作的。;)

# c# - 内部getter，公共setter c#

> ID：14365099
> 
> 赞同：0
> 
> 时间：2013-01-16T18:22:23.460
> 
> 标签：c#, setter, public, getter, internal

我基本上想做这样的事情

```
public string Password
{
  set { password = value; }
}

internal string Password
{
  get { return password; }
} 
```

但是不必调用我的第二个函数（上面的代码不会编译，因为我两次使用了名称 Password）。我可以有 setPassword 和 getPassword，但这似乎有点，嗯，垃圾:(

我的场景是我有一个包含核心业务逻辑的单独程序集（类库）。我不希望任何使用类库的项目一旦设置就能够查看密码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:34:30.977

它很简单：

```
public string Password { internal get; set; } 
```

值得注意的是，这是一件不寻常的事情，并且会违反许多人对房产的期望。虽然这是*可能的*，但最好有一个公共*方法* `SetPassword`和一个内部字段或一个内部`GetPassword`方法。人们根本不希望遇到他们可以设置但无法获得的属性（即使相反的情况很常见）。这可能是它为数不多的有效用例之一，但为了遵循“最少惊喜”的方法，请考虑使用方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:25:03.053

获取和设置可以有不同的访问修饰符：

```
public string Password {
    internal get { return password; }
    set { password = value; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T18:25:33.380

我相信你可以这样写：

```
private string password;
public string Password 
{ 
    internal get 
    { 
       return password; 
    }
    set
    {
        password = value;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T18:26:04.437

```
string _password;   
public string Password
{
     internal get { return _password; }
     set { _password=value; }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-16T18:30:14.190

就这么简单：

```
public String Password
{
    internal get { return m_Password; }
    set { m_Password = value; }
} 
```

这是另一个解决方案：

```
public string Password
{
    set { m_Password = value; }
}

internal String InternalPassword
{
    get { return m_Password; }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-16T18:45:27.317

如果您想提高安全意识（就像您看起来那样），那么我建议`SecureString`在`System.Security`命名空间中。它将字符串的内容加密保存在内存中。

你仍然可以拥有这样的属性：

```
SecureString password;

public string Password
{
  internal get { return password.ConvertToInsecureString(); }
  set { password = value.ConvertToSecureString();
} 
```

你需要这个扩展方法类：

```
using System.Runtime.InteropServices; // For Marshal static class
using System.Security;                // For SecureString class

public static class SecureStringExtender
{
  public static SecureString ConvertToSecureString(this string text)
  {
    if (text == null)
      throw new ArgumentNullException("text");

    var secureString = new SecureString();

    foreach(var c in text)
      secureString.AppendChar(c);

    secureString.MakeReadOnly();
    return secureString;
  }

  public static string ConvertToInsecureString(this SecureString secureString)
  {
    if (secureString == null)
      throw new ArgumentNullException("secureString");

    IntPtr unmanagedString = IntPtr.Zero;

    try
    {
      unmanagedString = Marshal.SecureStringToGlobalAllocUnicode(secureString);
      return Marshal.PtrToStringUni(unmanagedString);
    }
    finally
    {
      // Zero out the sensitive text in memory for security purposes.
      Marshal.ZeroFreeGlobalAllocUnicode(unmanagedString);
    }
  }
} 
```

# css - 选择终端元素

> ID：14365101
> 
> 赞同：0
> 
> 时间：2013-01-16T18:22:26.600
> 
> 标签：css, css-selectors

有没有办法选择不是任何 dom 的父母的元素（类型写为`<...>`）？我知道单个字符可能算作 dom，但忽略这一点，我想选择终端节点。在下文中，`<div id=2>`将是这样的元素，但`<div id=1>`不会。

```
<div id=1>
  <div id=2>
    Hello World
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:24:15.943

不幸的是，这对于 CSS 选择器是不可能的。您需要根据您要实现的目标找到另一种解决方法。

作为记录，`:empty`伪类在这里不起作用，因为它只匹配没有任何文本*或*元素子元素的元素，甚至没有空格。由于您的第二级`div`包含文本，因此不是`:empty`.

# javascript - javascript如何设置和检索cookie简单

> ID：14365105
> 
> 赞同：0
> 
> 时间：2013-01-16T18:22:34.537
> 
> 标签：javascript, cookies

我一直在看一些关于 js cookie 的网站，例如：

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)
[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html) 由于声誉问题，无法列出更多链接。

我找不到更多有用的网站。上面的那些对我不起作用或者太复杂了。我发现 quirksmode 网站很有用，但没有用。这是我为测试它而编写的代码：

```
<html>
<head>
<script>
function read() {
    var x = readCookie('scon')
    if (x) {
        alert(x);
    }
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
}

function createCookie() {
    document.cookie = 'scon=testcookie; expires=Thu, 17 Jan 2013 13:47:11 UTC; path=/'
}   

</script>
    <title>Page Title</title>
</head>
<body>
<button onclick="createCookie()">Create</button>
<button onclick="read()">Read</button>

</body>
</html> 
```

请您看看出了什么问题，并尝试解释原因以及如果可能的话，哪个位会发生什么。这将用作标准 cookie 来保存设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:29:57.317

你用的是什么网站浏览器？

如果您使用的是 Firefox，那么它应该可以正常工作，但 Chrome 和其他可能不支持“本地”cookie……这意味着您必须在实际的本地服务器或实际的 Web 主机上运行 JavaScript。

尝试在最新的 Firefox 中运行您的代码……它对我有用。

希望这是有道理的

# c - 将元素添加到单个链表

> ID：14365109
> 
> 赞同：0
> 
> 时间：2013-01-16T18:22:51.890
> 
> 标签：c, linked-list, singly-linked-list

```
typedef struct list
{
    struct list * next;
    int val;
}*list_t;    

list_t add(list_t l,int e)
{
    list_t head;

    if(l == NULL)
    {
        l = malloc(sizeof(list_t));
        l->val = e;
        l->next = NULL;
        return l;
    }       

    head = l;

    while(l != NULL)
        l=l->next;

    l = malloc(sizeof(list_t));

    l->val = e;

    l->next = NULL;

    return head;
} 
```

示例驱动程序：

```
int main()
{
    list_t ints=NULL;
    int i;

    for(i=0;i<156;i+=2)
        ints = add(ints,i);

    while(ints->next != NULL)
    {   
        printf("%d\n",ints->val);
        ints=ints->next;
    }

    system("pause");
    return 0;
} 
```

程序可以工作，但是“添加”函数会倒回列表，因此永远不会实现 main 循环的主体。这让我很惊讶，因为我认为我一直在将列表作为值传递！你能解释一下这个现象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:34:06.543

问题不在于 add 函数倒回列表，而在于它根本不起作用：您的代码中没有任何地方声明列表的前一个末端应该链接到新添加的元素。

我稍微修改了一下：

```
typedef struct list
{
    struct list * next;
    int val;
} list_t;    

list_t *add(list_t *l,int e)
{
    list_t *head;

    if(l == NULL)
    {
        l = malloc(sizeof(list_t));
        l->val = e;
        l->next = NULL;
        return l;
    }       

    head = l;

    while(l->next != NULL)
        l=l->next;

    l->next = malloc(sizeof(list_t));

    l=l->next;

    l->val = e;

    l->next = NULL;

    return head;
}

int main()
{
    list_t *ints=NULL;
    int i;

    for(i=0;i<156;i+=2)
        ints = add(ints,i);

    while(ints->next != NULL)
    {   
        printf("%d\n",ints->val);
        ints=ints->next;
    }

    return 0;
} 
```

代码现在按预期工作。

请记住，这`l`是`add`函数中的局部变量。`l`如果不允许以某种方式离开函数的范围（就像你在返回它时所做的那样，在第一个 if 内），对它所做的任何更改都将丢失。使用 the或运算符对变量`l`指向的更改将对有权访问该变量的任何人有效。`*``->`

我建议您开始阅读调试技术。它们因您的环境而异，可以从gdb 等*神秘*的命令行工具到成熟的图形对象浏览器等。通过这种方式，您将能够逐步查看发生的情况并监控内存更改并检查变量中实际存储的内容。

**编辑**：修复了评论中的指针问题。内存分配现在提供整个结构变量，并且不再隐式使用指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:39:54.223

避免特殊情况。add() 函数只能做一件事：分配一个列表节点并将其指针值分配给链中恰好为空的第一个节点。NULL 节点在链的头部、中间或尾部没有区别。*（当然空节点不能存在于列表的中间。它们可以存在于列表的头部，但是列表将是空的）*找到第一个 NULL 并将新节点放在那里。

```
struct list *add(struct list *lp, int e)
{
    struct list **pp;

    for (pp= &lp; *pp; pp = &(*pp)->next) {;}

    *pp = malloc(sizeof **pp);
    (*pp)->val = e;
    (*pp)->next = NULL;

    return lp;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:44:05.387

```
l = malloc(sizeof(list_t)); 
```

分配一个指向结构的指针，而不是结构本身。例如，在 64 位机器上，malloced 大小是 8，但它应该是 16。

当你随后说

```
l->val = ..
l->next = .. 
```

只有上帝知道你写信到哪里..

去搜索一些链表的示例代码，并阅读它，我的意思是在调试器中。

# ios - instagram iphone 挂钩媒体 ID？

> ID：14365112
> 
> 赞同：3
> 
> 时间：2013-01-16T18:23:00.157
> 
> 标签：ios, instagram

我想用我的应用程序中的图片打开 Instagram。

在他们的[API](http://instagram.com/developer/iphone-hooks/) 中，它说使用 MEDIA ID。我不知道媒体 ID。我知道 AAsset 库中的资产表示 URL。有谁知道他们指的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T20:49:25.927

媒体 ID 来自上传到 instagram 的媒体的 Instagram API。通常像 448979387270691659_45818965 这样的行。如果您在浏览器中转到媒体视图，然后使用开发人员工具查看属性，我相信您可以在浏览器中抓取它

# objective-c - 错误：预期；在声明列表的末尾 - 类未被识别为类型

> ID：14365116
> 
> 赞同：7
> 
> 时间：2013-01-16T18:23:08.613
> 
> 标签：objective-c, xcode, properties

这是我的 viewcontroller.h 文件：

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>
#import <CoreLocation/CoreLocation.h>
#import <AVFoundation/AVFoundation.h>
#import <CoreMedia/CoreMedia.h>
#import <ImageIO/ImageIO.h>
#import <CoreVideo/CoreVideo.h>

@interface ViewController : UIViewController <UINavigationControllerDelegate,  CLLocationManagerDelegate>

@property (nonatomic, strong) NSManagedObjectContext *managedObjectContext;
@property(nonatomic, weak) IBOutlet UIImageView *selectedImageView;
@property(nonatomic, retain) IBOutlet UIImageView *vImage;
@property(nonatomic, retain) AVCaptureStillImageOutput﻿﻿﻿﻿﻿ *stillImageOutput;

- (IBAction)photoFromAlbum;
- (IBAction)photoFromCamera;
- (IBAction)saveImageToAlbum;
- (IBAction)segueToChoosePhotoTypeViewController;

@end 
```

该行：

```
@property(nonatomic, retain) AVCaptureStillImageOutput﻿﻿﻿﻿﻿ *stillImageOutput; 
```

正在产生以下问题：

```
Expected ; at end of declaration list. 
```

Xcode 没有将 AVCaptureStillImageOutput 识别为一个类，因为它仍然是黑色的并且不建议它作为一种类型，并且“Fix-it”想要`;`在 AVCaptureStillImageOutput 之后插入右边。

但是，如果我尝试在 viewController.m 文件的 viewDidLoad 中使用声明 AVCaptureStillImageOutput 作为类型，它会识别它并允许它作为类型。此外，其余的 AVFoundation 类正在那里的代码中被识别。

框架就在那里，我只是对此`@property`声明有疑问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:57:11.523

在你的行

```
@property(nonatomic, retain) AVCaptureStillImageOutput *stillImageOutput; 
```

你在和之间有一些**不可见的字符**。如果我将此行粘贴到 vi 编辑器中，它看起来像这样：`AVCaptureStillImageOutput``*stillImageOutput`

```
@property(nonatomic, retain) AVCaptureStillImageOutput<feff><feff><feff><feff><feff> *stillImageOutput; 
```

（U+FEFF 是一个 Unicode 字节序标记，它看起来像 Xcode 中的普通空间，即使“显示不可见”被激活）。

删除并重新插入空格可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T19:05:42.957

进入`Editor`菜单，选择`Show Invisibles`。请注意，在`AVCaptureStillImageOutput`和之间有很多不可见的、不可打印的字符`*`。删除这两者之间的所有内容，最后再放一个空格。那些不可见的字符，即使不可打印，也被作为你班级名称的一部分。完成后，您可以`Hide Invisibles`再次选择。复制/粘贴代码时要小心，您甚至将那些“坏字符”复制/粘贴到上面的 SO 问题中。

# c# - Expression.TryCatch 中的 Expression.Convert

> ID：14365122
> 
> 赞同：7
> 
> 时间：2013-01-16T18:23:27.563
> 
> 标签：c#, expression-trees

我正在尝试向[Effort 库中的代码块](http://effort.codeplex.com/SourceControl/changeset/view/39270a2f7cfc#Main/Source/Effort/Internal/DbManagement/Schema/DbTableInformation.cs)添加一些错误处理，该代码块生成表达式树以执行转换并将结果分配给属性。

现有代码的问题是，当尝试将 null 分配给具有值类型的属性时，在运行时调用此表达式时会引发 NullReferenceException。在这种情况下，我没有关于它试图分配的属性的信息，所以我想抛出一个更具体的异常。

以下是我第一次尝试将此逻辑封装在 try/catch 块中，如果转换失败则抛出异常。最终我会向 InvalidOperationException 添加更多信息。

```
blockElements.Add(
    Expression.TryCatch(
        Expression.Assign(
            Expression.Property(result, this.Properties[i]),
            Expression.Convert(
                Expression.ArrayIndex(parameter, Expression.Constant(i)),
                this.Properties[i].PropertyType)),
        Expression.Catch(typeof(NullReferenceException),
            Expression.Throw(Expression.Constant(
            new InvalidOperationException("Unhandled exception")))))); 
```

在我看来，这就是我想要做的：

```
try
{
    Property = (int)value;
}
catch (NullReferenceException)
{
    throw new InvalidOperationException("Unhandled exception");
} 
```

但是在运行时，该表达式现在会引发 ArgumentException，并显示消息“catch 的主体必须与 try 的主体具有相同的类型”。我在这里做错了什么？我是否需要在 Catch 表达式中创建一个 Block 来“返回”一些虚拟值，即使它永远不会因为 Throw 而被击中？

还是我以完全错误的方式处理这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T19:45:41.963

在普通的 C# 代码中，作为一个整体的方法必须要么返回一个值，要么抛出一个异常。

对于`Expression`s，它的工作方式有点不同：每个表达式都有一个返回类型，在 s 的情况下`TryCatch`，the 的返回类型必须与任何s`try` `Expression`的返回类型相同。`catch` `Expression`

在您的情况下，`try`is 的类型，但 is的`int`类型，所以它们不能一起使用。要解决此问题，您需要更改 to 的类型，或更改to的类型。`catch``void``try``void``catch``int`

要更改`try`to的类型`void`，您可以使用允许您指定块的类型[的重载`Expression.Block()`](http://msdn.microsoft.com/en-us/library/dd630289.aspx)（通常，它与块中最后一个表达式的类型相同）：

```
Expression.TryCatch(
    Expression.Block(
        typeof(void),
        Expression.Assign(…)),
    Expression.Catch(
        typeof(NullReferenceException),
        Expression.Throw(
            Expression.Constant(
                new InvalidOperationException("Unhandled exception"))))) 
```

要更改`catch`to的类型`int`，您需要以某种方式更改`Throw`表达式的类型。而且由于对于`Throw`表达式，任何返回类型都可以是有效的（因为它实际上并不返回），[所以有一个重载可以让您指定返回类型](http://msdn.microsoft.com/en-us/library/dd323901.aspx)：

```
Expression.TryCatch(
    Expression.Assign(…),
    Expression.Catch(
        typeof(NullReferenceException),
        Expression.Throw(
            Expression.Constant(
                new InvalidOperationException("Unhandled exception")),
            typeof(int)))) 
```

我认为更改的类型在`try`概念上更清晰，因为您实际上并不想从整个表达式中返回任何内容。

# regex - Perl：如何将变量与另一个变量匹配

> ID：14365128
> 
> 赞同：0
> 
> 时间：2013-01-16T18:23:48.647
> 
> 标签：regex, perl, match

我有以下代码：

```
 $st2 = quotemeta($st);
 if ( $line =~ m/$st2\z/ ) {
     print "GOOD\n";
 }
 else {
     print "BAAAAAAD\n";
 } 
```

$line 我从文件中得到它。我阅读了整个文件，然后执行以下操作：

```
foreach $line in @file {...} 
```

对我来说，它只打印 BAAAAAAD。此外，$line 可以包含“clear”、“clearer”、“clearest”或其他一些词，但我想匹配所有“clear”实例，后记我想匹配所有“clearer”实例等等。注意：“clear”不应匹配“clearer”或“clearest”。它应该只匹配“清除”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:33:44.053

首先，如果你通过一个文件进行搜索，不要完全阅读它，而是逐行搜索。您也不需要使用quotemeta，除非您只想搜索纯字符串。如果您想在该行的任何位置找到“清除”一词，请`\z`在搜索模式中省略。最后，您的字符串包含最后一个换行符，它可以防止`\z`看到字符串的结尾。用于[`chomp`](http://perldoc.perl.org/functions/chomp.html)删除尾随换行符

```
my $st = 'clear';
while (<>) {
    chomp;
    if (m/$st\z/) {
        print "GOOD\n";
    } else {
        print "BAAAAAAD\n";
    }
} 
```

参见[`perlre`](http://perldoc.perl.org/perlre.html)perl 正则表达式的解释

> \z 仅匹配字符串末尾

如果您只想在行中的任何位置搜索纯字符串，您可以使用[`index`](http://perldoc.perl.org/functions/index.html)

```
my $st = 'clear';
while (<>) {
    if (index($_, $st) != -1/) {
        print "GOOD\n";
    } else {
        print "BAAAAAAD\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:54:40.630

如果要匹配确切的单词，请使用`\b`单词边界。例如`/\bclear\b/`匹配`clear`但不匹配`clearer`。当您要查找的单词不是字符串中的唯一单词时，这很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:00:05.703

尝试使用 qr($your_var)
这里有一个有用的链接：http:
[//perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T05:28:11.653

这是有效的：

```
my $var1 = "clear";
my $var2 = "clear";
if ($var2 eq $var1) {
    print "match\n";
}
else {
    print "no match\n";
} 
```

当 $var1 “更清晰”时，这也有效（显示“不匹配”）。

感谢大家的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T11:53:40.197

您可以使用单词边界，以下代码段将匹配匹配“clear”、“clearer”或“clearest”的所有行，清楚地告诉您匹配的内容

```
my @matches = qw/clear clearer clearest/;

for $line ( @lines ) {
  for ( @matches ) {
    print "GOOD: Matches $_" if $line =~ /\b$_\b/;
  }
} 
```

当我针对这样的输入运行它时：

`my @lines = ( 'clear', 'clearer', 'clearest', 'clear', 'clearer' );`

输出是：

```
GOOD: Matches clear 
GOOD: Matches clearer 
GOOD: Matches clearest 
GOOD: Matches clear 
GOOD: Matches clearer 
```

如果`clear`是该行中较大句子的一部分，这也将起作用

# spring - 无法解析频道名称

> ID：14365129
> 
> 赞同：0
> 
> 时间：2013-01-16T18:23:50.037
> 
> 标签：spring, spring-ws, spring-integration

我遇到了非常不寻常的问题。我在spring webservice组件中的spring集成流程（ver 2.1.0）中使用header-value-router，例如：

```
<int:header-value-router id="routerId" input-channel="routeChannel"
    header-name="msgtype" resolution-required="true">
<int:mapping value="north" channel="channelA"/>
<int:mapping value="south" channel="channelB"/>
 </int:header-value-router> 
```

当我通过 JUnit 调用流程时，这非常有效，但是当这个 web 服务组件部署在 tcserver 中并且 web 服务调用 SI 流程时，它在 header-value-router 处失败并出现以下错误

```
[16.01.2013 23:14:25] WARN:GatewayProxyFactoryBean$MethodInvocationGateway.doSendAndReceive() - failure occurred in gateway sendAndReceive

**org.springframework.integration.MessagingException: failed to resolve channel name 'north'**
at org.springframework.integration.router.AbstractMappingMessageRouter.resolveChannelForName(AbstractMappingMessageRouter.java:168)
at org.springframework.integration.router.AbstractMappingMessageRouter.addChannelFromString(AbstractMappingMessageRouter.java:197)
at org.springframework.integration.router.AbstractMappingMessageRouter.addToCollection(AbstractMappingMessageRouter.java:218) 
```

我调试了spring源，发现当调用header-value-router时，映射被加载但在源代码AbstractMappingMessageRouter.java中没有正确比较

```
 if (this.channelMappings.containsKey(channelKey)) {
                    channelName = this.channelMappings.get(channelKey);
    } 
```

'containsKey' 处的此失败导致代码假定标头值具有通道名称。

不知道是什么问题。如果在运行时缺少一些 jar 可以吗？我什至试过xpath-router和router，但结果是一样的

# jquery - 错误图像不会变成成功图像，填充后清除所需的文本框

> ID：14365130
> 
> 赞同：-1
> 
> 时间：2013-01-16T18:23:50.360
> 
> 标签：jquery, jquery-ui, jquery-validate, jquery-ui-tooltip

场景：

1.  将“TxtName”留空并提交；然后，文本框旁边将显示一个红色图像。故意的。
2.  **在没有 submit**的情况下用数据填充文本框，然后红色图像将变为绿色。故意的。
3.  清除文本框中的数据，**不要提交**。然后绿色图像没有变成红色。**问题！**

这是 jQuery 验证代码：

```
 $(document).ready(function() {
        $("#BtnSubmit").click(function() {
            $("Form").validate({
                rules: {
                    <%= TxtName.UniqueID %>: { required: true }
                },
                messages: {
                    <%= TxtName.UniqueID %>: { required: "Name is required" }
                },
                success: function(element){
                    $(element).addClass("checked");
                },
                errorPlacement: function(error, element) {
                    var container = $('<div />');
                    container.addClass('MyTooltip');
                    error.insertAfter(element);
                    error.wrap(container);
                    $("<div class='errorImage'></div>").insertAfter(error);
                }
            });
        });
    }); 
```

在哪里：

*   “errorImage”css 类是显示红色图像的类。
*   “checked”css 类是显示绿色图像的类。
*   “错误放置”部分仅在文本框旁边显示图像（红色/绿色），当悬停在该图像上时，将显示错误消息的工具提示。

如果您需要查看它，这是 CSS：

```
div.MyTooltip { 
    position: relative !important;
    display: inline-block;
    top: 3px;
    right: 0px;
} 

div.MyTooltip:hover { 
    z-index: 1005;
} 

div.MyTooltip label { 
    display: none !important;
    vertical-align: middle;
    padding: 0px;
    line-height: 16px;
    font-size: 11px;
} 

div.MyTooltip:hover label.error:not(.checked) { 
    display: inline-block !important;
    position: absolute;
    right: 0px;
    bottom: 24px;
    width: 170px;
    height: auto;
    padding: 0px 5px 0px 5px;
    background-color: #ff0000;
    border-radius: 5px; 
    color: white; 
    opacity: 0.50;
    text-align: center;
} 

label.error + div.errorImage
{
    background: url('Images/error.png') no-repeat 0px 0px;
    display: inline-block !important;
    width: 20px;
    height: 20px;
    vertical-align: middle;
} 

label.checked + div.errorImage
{
    background: url('Images/valid.png') no-repeat 0px 0px;
    display: inline-block !important;
    width: 22px;
    height: 22px;
    vertical-align: middle;
} 

input.error, select.error {
    /*border-width: 1px;*/
    border-color: tomato;
} 
```

ASP .NET HTML 是：

```
<asp:TextBox ID="TxtBranchName" runat="server"  ClientIDMode="Static"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:01:10.087

我现在看到了。您错误地将按钮`click`事件绑定到`.validate()`. 这会导致各种奇怪的问题，因为每次单击按钮时都会重新初始化所有内容。

`.validate()`*在 DOM ready*中只被初始化**一次** 。它的内置已经负责捕获提交按钮的点击。*`submitHandler`*

 *```
$(document).ready(function() {
    // $("#BtnSubmit").click(function() {  // <-- remove this line!
        $("Form").validate({
            rules: {
                <%= TxtName.UniqueID %>: { required: true }
            },
            messages: {
                <%= TxtName.UniqueID %>: { required: "Name is required" }
            },
            success: function(element){
                $(element).addClass("checked");
            },
            errorPlacement: function(error, element) {
                var container = $('<div />');
                container.addClass('MyTooltip');
                error.insertAfter(element);
                error.wrap(container);
                $("<div class='errorImage'></div>").insertAfter(error);
            }
        });
    // }); // <-- remove this line!
}); 
```

查看一个通用的（因为您没有提供 HTML）演示：

[http://jsfiddle.net/RKSSp/](http://jsfiddle.net/RKSSp/)

* * *

有关更多信息，请参阅这些：

[https://stackoverflow.com/a/12989534/594235](https://stackoverflow.com/a/12989534/594235)

[https://stackoverflow.com/a/11068130/594235](https://stackoverflow.com/a/11068130/594235)

[https://stackoverflow.com/a/14107043/594235](https://stackoverflow.com/a/14107043/594235)

[https://stackoverflow.com/a/13692534/594235](https://stackoverflow.com/a/13692534/594235)

[https://stackoverflow.com/a/9936025/594235](https://stackoverflow.com/a/9936025/594235)

[https://stackoverflow.com/a/12101079/594235](https://stackoverflow.com/a/12101079/594235)

[https://stackoverflow.com/a/10609871/594235](https://stackoverflow.com/a/10609871/594235)*

# c - 读入链表的时间是读入哈希表的两倍

> ID：14365132
> 
> 赞同：0
> 
> 时间：2013-01-16T18:23:52.693
> 
> 标签：c, linked-list, hashtable, clock

对不起标题，这个问题很难用一行来解释。我从 .txt 文件中读取单词并将其放入链表和哈希表中。我还使用时钟来记录执行每个功能所花费的时间。

```
listclock = clock();
list = insertlist(list, word);
listclock = clock() - listclock;
listtime = listtime + listclock;

tableclock = clock();
table = inserttable(table, word);
tableclock = clock() - tableclock;
tabletime = tabletime + tableclock; 
```

如果我注释掉调用插入列表函数的第二行，那么我会得到 tabletime 和 tableclock 的以下值：0s 和 0.03s

如果我用 inserttable 注释掉该行，我会得到以下值：6.34s 和 0.02s

如果我让它们都运行，我会得到以下值：12.39s 和 0.04s

当哈希表函数也在运行时，执行表函数的时间是否会加倍？

Insertlist 函数：（Inserttable 函数调用此函数）：

```
List *insertlist(List *list, char word[30]) {
  List *templist = list;
  while(templist != NULL) {
    if(strcmp(templist->word, word) == 0) {
      templist->count++;
      list = addnode(list, word);
      list->count = templist->count;
      break;
    }
    templist = templist->next;
  }
  if(templist == NULL) {
    list = addnode(list, word);
  }
  return list;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:52:27.410

[Jon Bentley](http://www.cs.bell-labs.com/cm/cs/pearls/appmodels.html)给出了一个非常好的基准测试框架，以获取“此操作所花费的时间”的可用数据并非易事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:59:02.430

来自时钟的值可能会有很大差异。另请注意，因为您在函数顶部初始化 tabletime，所以它同时为插入和 tableinsert 计时。如果您要编写自己的基准测试，您确实应该有一些设置和拆卸代码。在这种情况下，您应该对每个函数进行 100 次采样并取平均值。在每个样本之间，您应该清除所有数据（而不是计入您的时间）。

但实际上，您需要备份并询问您为什么要这样做？您是否抱怨插入时间太长，因此您试图在链表和哈希表之间做出决定？该决定不仅应基于您添加数据的方式，还应取决于您如何删除或访问数据。如果您很少插入并且经常通过键访问，那么您可能需要一个哈希表。如果您需要元素是唯一的，您应该使用哈希表。如果您经常插入并且总是删除第一个或最后一个元素，那么列表是有意义的。您花在计时这一操作上的所有时间可能对您的应用程序总体而言并不重要。处理代码时，最好从大而不是小考虑。

# c# - 在 Linux 上使用 C# 和 Mono 构建控制台应用程序以解密 cookie，如何确保 .dll 可访问

> ID：14365133
> 
> 赞同：0
> 
> 时间：2013-01-16T18:23:58.950
> 
> 标签：c#, linux, mono

我需要使用 PHP 访问在 C# 的 FormsAuthentication 方法中加密的 cookie，显然是在 System.Web.Security 中找到的。由于我在尝试将 Forms.Authentication.decrypt 移植到 PHP 解决方案时失败了，我现在转而使用 Mono 编写一个小型控制台应用程序来将加密的 cookie 传递给 Forms.Authentication.decrypt 但我收到了这个错误：

> 类型或命名空间名称`Security' does not exist in the namespace` System.Web'。您是否缺少程序集参考？

这是代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Web.Security.FormsAuthenticationTicket;

namespace Cookie
{
    public class CookieDecrypt
    {
        public static void Main(string[] args)
        {
            if (args.Length == 0)
            {
                throw new System.ArgumentException("Please invoke like: mono CookieDecrypt.exe CookieString", "args");
            }

            string CookieValue = args[0];
            FormsAuthenticationTicket authTicket  = FormsAuthentication.Decrypt(CookieValue);
            Console.WriteLine(authTicket.Expired);
        }
    }
} 
```

}

**我在/usr/lib/mono/2.0/**中看到了一些 .dll，例如**System.Security.dll**，但没有看到 System.Web.Security.dll，尽管[http://docs.go-mono.com](http://docs.go-mono.com)表明它可用（搜索forms.authentication encrypt 产生了几个结果，包括一个说**FormsAuthentication Class (System.Web.Security.FormsAuthentication)**的结果。

我是这样编译的：`mcs test.cs`

正如您无疑知道的那样，我是 c# 和 mono（几个小时前安装）的新手。谁能帮助我了解正在发生的事情以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:47:15.603

FormsAuthenticationTicket 是一个类。`using`语句仅适用于命名空间。您想要的命名空间是 System.Web.Security。但是，FormsAuthenticationTicket 位于 System.Web.dll 程序集中。

.NET 文档实际上非常明确地说明了哪些名称空间和哪些程序集类在其中。示例：http: [//msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.aspx)

如您所见，在继承层次结构下是程序集和命名空间。

# c# - 创建一个随机客户编号并将其显示在文本框中

> ID：14365143
> 
> 赞同：0
> 
> 时间：2013-01-16T18:24:23.490
> 
> 标签：c#, random

我完全坚持在这里创建一个随机数。理想情况下，不是同一个号码是客户号码的两倍。

然后我需要在我的 tb_id （文本框）中显示它并将该行写入客户文件。

这里的任何帮助都会很棒。

```
private void button1_Click(object sender, EventArgs e)
{    
    **var rng = new Random();**
    // Here I need to write the random number (it's a customer number) to the tb_id text box. so I'm able to write it to their customer file afterwards.

    try
    {
        string fileName = string.Format(tb_surname.Text);

        if (tb_firstname.Text == "" || fileName == "" || tb_postcode.Text == "")
        {
            MessageBox.Show("Missing values from textboxes!");
        }
        else if (File.Exists(fileName + "Text"))
        {
            if (MessageBox.Show("Warning: There is already a file with the surname you enter already on the system. Contents will be replaced - do you want to continue?", "File Demo", MessageBoxButtons.YesNo, MessageBoxIcon.Question,
                 MessageBoxDefaultButton.Button1, MessageBoxOptions.DefaultDesktopOnly) == DialogResult.Yes)
            {
                //write lines of text to file
                StreamWriter outputStream = File.CreateText(fileName + ".Txt");
                outputStream.WriteLine(tb_firstname.Text);
                outputStream.WriteLine(tb_surname.Text);
                outputStream.WriteLine(tb_surname.Text);
                **outputStream.WriteLine(tb_id.Text);**
                outputStream.Close();
                MessageBox.Show("Text saved to file successfully!");
                this.Close();
            }
        }
    }
    // ...
} 
```

第2部分

```
 // creating a random number here for the customer id
        Guid g = Guid.NewGuid();
        tb_id.Text = g.ToString(); 
```

将 Guid 号写入文本文件。

```
 outputStream.WriteLine(tb_id.Text); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:29:37.097

如果你想让它对用户来说是唯一的，我不建议使用随机数，很有可能让不同的用户使用相同的数字。

guid 可能是更好的主意

```
 Guid g = Guid.NewGuid(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:29:35.213

首先，如果您只是使用随机数来识别用户，那么使用 COLD TOLD 所说的 GUID。

**独特**和 **随机**是完全不同的东西

* * *

但为了理解如何使用随机数......

声明`rng`为类型`Random`

要实际创建随机数，请输入类似

```
int randI =  ng.Next(0, 1000); 
```

这将为您提供 0 到 1000 之间的随机数。

您可以使用 Intellisence 查看随机数还有哪些其他选项。

将该数字放在您的文本框中，而不是

```
textBox1.Text = randI.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:29:57.207

您可以使用[引导](http://msdn.microsoft.com/en-us/library/system.guid.aspx)结构。GUID 是一个全局唯一标识符，它在 .NET 框架中提供

```
 this.iD = Guid.NewGuid().ToString(); 
```

# c++ - memcpy c++ - 崩溃

> ID：14365146
> 
> 赞同：2
> 
> 时间：2013-01-16T18:24:36.983
> 
> 标签：c++, memcpy

我有一个非常简单的例程（至少应该很简单）

我创建了一个大型 char 数组，并在接收到它移动时将数据复制到它。在大约第三次迭代之后，应用程序崩溃了。

首先创建一个大缓冲区

```
_buffer = new char(7931880);

...

void writeData(char* newData,size_t size)
{
  memcpy(_buffer,newData,size); //this call succeeds the first 4 times then fails bytes received
 _buffer+=size;                 //(size) is never larger than 16000
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T18:27:25.933

```
_buffer = new char(7931880); 
```

这是一个指向单个字符的指针。获取数组使用

```
_buffer = new char[7931880]; 
```

并打开编译器警告以检测溢出。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T18:26:47.740

您正在动态分配一个`char`带有 value的单个`7931880`。假设您的缓冲区应该比单个缓冲区多一点`char`（缓冲区不多），也许您正在寻找`_buffer = new char[7931880];`. 这将分配 7931880`char`秒。

# xslt - 如何在 for-each for xslt 中使用用作 xpath 的参数值

> ID：14365148
> 
> 赞同：0
> 
> 时间：2013-01-16T18:24:53.237
> 
> 标签：xslt, mule

我在 xsl 中有一种情况，我有一个参数值，该值将在 xslt 转换中的某个位置分配。但是我将该参数作为 String ，该参数可能包含一个节点 a unbounded[0 or more repeats] 。如何将每个参数中的参数用作任何 xpath 表达式使用的任何其他 xml 内容。

这是我的示例 xmls：RetreiveData.xml

```
<soap-content>
------
<return>
<!--0 or more repetitions>-->
<data>
<startdate>12-12-12</startdate>
<enddate>12-12-13</enddate>
<nooftrans>5</nooftrans>
</data>
<data>
----
</data>

</soap=content> 
```

这是我的示例文件，它将作为参数发送到 xsl

xsl 文件：

```
<xsl style>
<param name ="retrieve"></param>
---
<xsl:for-each ="$retreive/return/data">
----do strufff
</xsl:for-each>

This was throwing an error . How can i travese to a node if it is param ? 
```

我知道这可以使用分配给 xml 文件中的路径的变量来完成。但是在我的场景中建议使用该方法。

谁能帮我解决这个问题

提前致谢， 埃雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:50:05.210

如果您发布的代码是格式正确的 XSLT 但猜测您的意思，那么如果 $retrieve 是单个元素名称，您可以这样做

```
<param name ="retrieve"></param>
---
<xsl:for-each select="*[name()=$retrieve]/return/data">
----do stuff
</xsl:for-each> 
```

请注意，XPath 变量保存值而不是表达式片段。如果`$retrieve`持有该字符串`"root"`，那么它`$retrieve/return/data`不是大多数语言中的语法/类型错误。如果您在 c 或 fortran 中有字符串“x”，则表达式“x”+1 不会将*变量*x 加一。为此，您需要一个在运行时可用的 XPath 解析器。一些产品对此进行了扩展（并且为 XPath 3 提出了一个评估函数）但是对于简单的情况，上述避免了将字符串评估为 XPath 的需要。`root/return/data/``"root"/return/data`

# java - 警报对话框中的按钮

> ID：14365151
> 
> 赞同：0
> 
> 时间：2013-01-16T18:24:56.033
> 
> 标签：java, android

如何为 alertDialog 中的按钮设置 onClickListener？我是只使用整个活动的 onClick 还是在 alertDialog 构建器中创建一个新活动？

编辑：对不起，我第一次没有说清楚，但这不适用于正/负按钮。这是用于自定义 xml 中的按钮。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:31:50.927

如果您想要一个标准按钮来关闭对话框，那么@Sergio 是正确的。如果您使用的是自定义 xml 布局：

使用 findViewById 并为该按钮附加一个特定的侦听器。如果要添加另一个按钮，使用活动范围的单击处理程序会导致问题。

Android 文档显示为：

```
final Button button = (Button) findViewById(R.id.button_id);
     button.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             // Perform action on click
         }
     }); 
```

[http://developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:28:47.087

如果您使用构建器来构建警报对话框，则设置类似于以下的新按钮：

```
builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
  public void onClick(DialogInterface dialog, int which) {
    //your code
    dialog.dismiss();
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:15:21.030

如果您正在使用警报对话框，请在警报对话框中创建按​​钮并设置 Dialoginterface.onClicklistner。

或者，如果您正在使用自己的视图创建自定义对话框，则在按钮上设置单击侦听器。

# php - php导航菜单的代码

> ID：14365155
> 
> 赞同：0
> 
> 时间：2013-01-16T18:25:01.493
> 
> 标签：php, menu, navigation, hyperlink

我在 www.malefashionsco.com 上有一个我为男装店管理的网站。在主页上，如果您单击某个燕尾服类别，您会看到它显示“未找到类别”。我已经在电子商务平台的后端创建了类别，但它们没有显示。每个燕尾服都应该有一个页面，而且，一旦进入类别，左侧边栏菜单应该列出类别。一个例子是

[http://www.malefashionsco.com/index.php?route=product/category&path=9](http://www.malefashionsco.com/index.php?route=product/category&path=9)

这是菜单的代码：

```
<div class="box">
<div class="box-heading"><?php echo $heading_title; ?></div>
<div class="box-content">
<div class="box-category">
  <ul>
    <?php foreach ($categories as $category) { ?>
    <li>
      <?php if ($category['category_id'] == $category_id) { ?>
      <a href="<?php echo $category['href']; ?>" class="active"><?php echo      $category['name']; ?></a>
      <?php } else { ?>

      <?php } ?>
      <?php if ($category['children']) { ?>
      <ul>
        <?php foreach ($category['children'] as $child) { ?>
        <li>
          <?php if ($child['category_id'] == $child_id) { ?>
          <a href="<?php echo $child['href']; ?>" class="active"> - <?php echo $child['name']; ?></a>
          <?php } else { ?>
          <a href="<?php echo $child['href']; ?>"> - <?php echo $child['name']; ?></a>
          <?php } ?>
        </li>
        <?php } ?>
        </ul>
        <?php } ?>
        </li>
       <?php } ?>
      </ul>
     </div>
   </div>
 </div> 
```

PHP 不是我的强项。`<li>`创建链接的代码是什么样的？

# compiler-errors - sun.misc.InvalidJarIndexException：编译 GWT 2.5 时索引无效

> ID：14365169
> 
> 赞同：1
> 
> 时间：2013-01-16T18:25:38.403
> 
> 标签：compiler-errors, jdk1.6, weblogic12c, gwt-2.5

我在 Weblogic 12C 版本上部署 GWT2.5 应用程序并使用 JDK1.6

我收到**sun.misc.InvalidJarIndexException: Invalid index**

下面是完整的堆栈跟踪。

```
 [echo] com.myapp.MyEntryPoint is out of date
 [java] Compiling module com.myapp.MyEntryPoint 
 [java] [ERROR] Unexpected
 [java] sun.misc.InvalidJarIndexException: Invalid index
 [java]     at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:858)
 [java]     at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:765)
 [java]     at sun.misc.URLClassPath$JarLoader.findResource(URLClassPath.java:735)
 [java]     at sun.misc.URLClassPath.findResource(URLClassPath.java:146)
 [java]     at java.net.URLClassLoader$2.run(URLClassLoader.java:385)
 [java]     at java.security.AccessController.doPrivileged(Native Method)
 [java]     at java.net.URLClassLoader.findResource(URLClassLoader.java:382)
 [java]     at java.lang.ClassLoader.getResource(ClassLoader.java:1002)
 [java]     at com.google.gwt.dev.javac.JdtCompiler$INameEnvironmentImpl.findType(JdtCompiler.java:257)
 [java]     at com.google.gwt.dev.javac.JdtCompiler$INameEnvironmentImpl.findType(JdtCompiler.java:235)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:122)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage(PackageBinding.java:181)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage(Scope.java:2460)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.Scope.getType(Scope.java:2181)
 [java]     at org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.internalResolveType(ParameterizedSingleTypeReference.java:113)
 [java]     at org.eclipse.jdt.internal.compiler.ast.ParameterizedSingleTypeReference.resolveType(ParameterizedSingleTypeReference.java:282)
 [java]     at org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveSuperType(TypeReference.java:179)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.ClassScope.findSupertype(ClassScope.java:1167)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectSuperInterfaces(ClassScope.java:958)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectTypeHierarchy(ClassScope.java:1011)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectMemberTypes(ClassScope.java:835)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectTypeHierarchy(ClassScope.java:1018)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.connectTypeHierarchy(CompilationUnitScope.java:290)
 [java]     at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBindings(LookupEnvironment.java:185)
 [java]     at org.eclipse.jdt.internal.compiler.Compiler.internalBeginToCompile(Compiler.java:719)
 [java]     at org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:376)
 [java]     at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:420)
 [java]     at com.google.gwt.dev.javac.JdtCompiler.doCompile(JdtCompiler.java:617)
 [java]     at com.google.gwt.dev.javac.CompilationStateBuilder$CompileMoreLater.compile(CompilationStateBuilder.java:193)
 [java]     at com.google.gwt.dev.javac.CompilationStateBuilder.doBuildFrom(CompilationStateBuilder.java:390)
 [java]     at com.google.gwt.dev.javac.CompilationStateBuilder.buildFrom(CompilationStateBuilder.java:275)
 [java]     at com.google.gwt.dev.cfg.ModuleDef.getCompilationState(ModuleDef.java:299)
 [java]     at com.google.gwt.dev.Precompile.precompile(Precompile.java:529)
 [java]     at com.google.gwt.dev.Precompile.precompile(Precompile.java:466)
 [java]     at com.google.gwt.dev.Compiler.run(Compiler.java:205)
 [java]     at com.google.gwt.dev.Compiler.run(Compiler.java:177)
 [java]     at com.google.gwt.dev.Compiler$1.run(Compiler.java:149)
 [java]     at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:87)
 [java]     at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:81)
 [java]     at com.google.gwt.dev.Compiler.main(Compiler.java:156) 
```

请帮助确定可能出现的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:02:41.000

我确定了这个问题。

它指的是旧的 gwt-servlet.jar

一旦我用最新的 jar 替换，构建就成功了。

谢谢你。

# javascript - 将字符串列表从 Javascript 传递到 asp.net 代码隐藏

> ID：14365179
> 
> 赞同：0
> 
> 时间：2013-01-16T18:26:24.467
> 
> 标签：javascript, asp.net

我在 ASP.NET 中遇到了 javascript 的问题。
我修改了一个列表框，使用 javascript 添加和删除命令。
现在我必须在后面的代码中使用列表的数据。如何将这些数据传递给服务器？我可以使用 json 吗？

这是代码。由于删除，我无法使用 hiddenField。

```
<asp:listbox ID="SubCat" runat="server" ></asp:listbox>
<input type=button onClick="addOption(SubCat)"; value='Add'> 
<input type=button onClick="removeOptions(SubCat)"; value='Remove Selected'>
<input type=button onClick="removeAllOptions(SubCat)"; value='Remove All'>

<script type="text/javascript">

 function removeAllOptions(selectbox) {
    var i;
    for (i = selectbox.options.length - 1; i >= 0; i--) {
        selectbox.remove(i);
    }
 } 

 function removeOptions(selectbox) {
    var i;
    for (i = selectbox.options.length - 1; i >= 0; i--) {
        if (selectbox.options[i].selected)
           selectbox.remove(i);
    }
 }

 function addOption(selectbox) {
    var txtBox1 = document.getElementById('txForn')
    var optn = document.createElement("OPTION");
    var t = txtBox1.value;
    optn.text = t;
    optn.value = t;
    selectbox.options.add(optn);
 }

</ script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:44:24.933

您可以简单地创建一个 Web 服务并添加一个方法，例如 DeleteSelectedOptions 并更改 removeOptions 函数，如下所示：

```
function removeOptions(selectbox) {
   $.ajax({
       type: 'POST',
       url: 'yourservice.asmx/DeleteSelectedOptions',
       data: "{ids: '" + yourIds + "'}", // yourIds like : "1,6,9,34" 
       contentType: "application/json; charset=utf-8",
       dataType: 'json',
       success: function (result) {
          //if success, remove option on page
          var i;
          for (i = selectbox.options.length - 1; i >= 0; i--) {
            if (selectbox.options[i].selected)
               selectbox.remove(i);
          }
       },
       failure: function(errMsg) {
        alert(errMsg);
       }
    });  
  } 
```

**示例 WebService Remove.asmx**

```
 [WebMethod]
 public string DeleteSelectedOptions(string ids)
 {
     string[] idsArray = ids.Split(',')
     // your delete codes 
     return result;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:42:57.340

为什么不能使用隐藏？您可以轻松地存储从列表框中添加或删除的项目记录的 ID，并更新服务器。您的其他选项是 Web 服务，或者将数据流式传输到处理程序。

无论哪种选择，任何客户端更改都不会保留，因此在每次回发时，您都必须使用更新的数据重新加载 ListBox 控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:41:33.647

标记您需要向服务器发出 AJAX 请求。请参阅下面的示例。

它利用 POST，您可以在其中将表单中的字段发送到您的服务器方法。POST 还提供了一个成功函数，例如，如果您的方法返回一个值并且您需要在页面上显示它，那么您可以在这个成功函数中处理它。

假设您在服务器端代码隐藏文件中有以下方法：

```
 public static bool AddNewItem(string name, string surname, int age)
    {

      return true;      
    }

buttons:
{
    "Add": function () {
        var name = $("#<%= txtName.ClientID  %>").val();
        var surname = $("#<%= txtSurname.ClientID %>").val();
        var age = $("#<%= txtAge.ClientID %>").val();

        $.ajax({
            type: 'POST',
            url: 'MyWebPage.aspx/AddNewItem',
            data: '{"name":"' + name + '", "surname":"' + surname + '", "age":' + age + '}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg.d) {
                    alert("Successfully added new item");                                    
                }
            },
            error: function () {
                alert("Error! Try again...");
            }
        });
    },
    "Cancel": function () {
        $(this).dialog("close");
    }
} 
```

# c - 什么是 ac 包含文件和保护？

> ID：14365180
> 
> 赞同：-5
> 
> 时间：2013-01-16T18:26:25.063
> 
> 标签：c, file, header, include, guard

您必须创建一个包含 DEBUG、TRUE、FALSE、NULL 符号的包含文件。包含文件必须包含一个保护。--> 我不知道这是什么。当我读它时，我只看到中文。什么是包含文件，我怎样才能让它包含调试符号，真，假空，什么是符号？哈哈，你什么是“警卫”。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:32:12.403

只是在这里帮助你：http: [//gcc.gnu.org/onlinedocs/cpp/Header-Files.html](http://gcc.gnu.org/onlinedocs/cpp/Header-Files.html)

如果在多个源文件中使用了头文件，则防护是一种用于避免重新包含头文件的机制。

有多种方法可以实现防护，但仅举一个例子：

```
#ifndef MY_HEADER_H
#define MY_HEADER_H

<Content of the header file>

#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:33:15.123

它非常简单。它是一个用于停止多重包含的宏

**文件：guard.h**

```
#ifndef _GUARD
#define _GUARD
    #define DEBUG
    #define TRUE true
    #define FALSE false
    #define NULL 0
#endif 
```

编译器第一次看到这个它会`define _GUARD`，下一次它看到它，它什么也不做，因为它`#ifndef`会是假的。

# c - 无法使用c保存图像文件？

> ID：14365182
> 
> 赞同：0
> 
> 时间：2013-01-16T18:26:28.553
> 
> 标签：c, image-processing, bmp

我试图将一个 bmp 图像克隆到另一个 bmp 图像中，但最终图像无法打开。

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <process.h>

void readBMP(char* filename) {
int i;
FILE* f = fopen(filename, "rb");
FILE* f1= fopen("save.bmp", "wb");
if (!f) {
    printf("Could not read file!\n");
    exit(0);
}
unsigned char info[54];
fread(info, sizeof(unsigned char), 54, f);
int width  = *(int*)&info[18];
int height = *(int*)&info[22];
printf("%d %d\n", width, height);

fwrite(info, sizeof(unsigned char), 54, f1);

int length = width * height;
unsigned int image[10000][3];

for(i = 0; i < length; i++) {
    image[i][2] = getc(f);
    image[i][1] = getc(f);
    image[i][0] = getc(f);

    putc(image[i][2], f1);
    putc(image[i][1], f1);
    putc(image[i][0], f1);

    printf("pixel %d : [%d,%d,%d]\n", i+1, image[i][0], image[i][1], image[i][2]);
}
fclose(f);
fclose(f1);
}
void main() {
char* fileName = "bitgray.bmp";
readBMP(fileName);
getch();
} 
```

我作为输入的图像是 114X81，大小为 27918 字节。最终图像的大小相同，但大小为 27756 字节。

可能是什么错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:35:31.713

[BMP以 4 字节的倍数](http://en.wikipedia.org/wiki/BMP_file_format#Pixel_storage)存储每一行​​。在您的情况下，这意味着每行占用 116 个字节（2 个字节填充）。这给出了 116x78x3+54=27198 所以你做错了。

顺便说一句，标头长度并不总是 54 字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:36:51.693

BMP 图像需要填充，因此每行是 4 字节的倍数。

您的行不是 4 的倍数，因此每行缺少 2 个字节，或总共 162 个字节 - 这是大小的差异。

# php - 如何使用 PHP 打开和关闭进程？

> ID：14365185
> 
> 赞同：0
> 
> 时间：2013-01-16T18:26:31.913
> 
> 标签：php, process, window, popen, proc-open

**如何使用 PHP 打开和关闭进程？**

现在我使用以下代码打开一个进程：

```
$zoutput = array();
if( ($fp = popen("7za t \"".$path."\" * -r", "r")) ) {
    while( !feof($fp) ){
        $fread = fread($fp, 1024);
        $line_array = preg_split('/\n/',$fread);
    foreach($line_array as $a) {
        if($a != "") {
        $zoutput[] = $a;
        }
    }
        //$_SESSION['job'][$jobid]['currentfile'] = $_SESSION['job'][$jobid]['currentfile']+1;

        flush();
    }
    pclose($fp);
} 
```

我正在寻找一种解决方案来关闭进程，以防用户想要*中止*。即使我停止了 php 脚本，该进程仍然在后台运行（这很正常），但我找不到在 Windows 下关闭/终止它的方法。

有谁知道我该怎么做？谢谢你。

**编辑**以适应 mallix 的答案：

```
$zoutput = array();
    if( ($fp = popen("7za a -t7z ".$GLOBALS["backup_compression"]." \"".$_SESSION['job'][$jobid]['bFQN']."\" \"".$pathtobackup."\"", "r")) ) {
        while( !feof($fp) ){
                    //Verifying if the user want to abort the process
            if(isset($_SESSION['job'][$jobid]['AbortCurrentJob']) && ($_SESSION['job'][$jobid]['AbortCurrentJob'] == 1)) {
                pclose($fp);
                return;
            }
            $fread = fread($fp, 1024);
            $line_array = preg_split('/\n/',$fread);
            foreach($line_array as $a) {
                if($a != "") {
                    $zoutput[] = $a;
                }

            }
            //$_SESSION['job'][$jobid]['currentfile'] = $_SESSION['job'][$jobid]['currentfile']+1;

            flush();
        }
        pclose($fp);
    }
    echo json_encode($zoutput); 
```

不幸的是，7zip 独立控制台进程仍然在后台运行。会话变量的值是 1（整数）确认。

编辑 ..：我刚刚注意到使用 jquery 更改会话变量的请求正在等待......直到第一个脚本完成。所以，没用的:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:39:00.700

在您的 php 脚本中，每次在再次循环之前检查是否设置了特定会话。
当用户单击**ABORT**时终止该会话密钥。
这也可以使用数据库而不是会话来实现。

# php - MODx Evo 中的 eForm。：如何预选带有数据库值的选择框？

> ID：14365192
> 
> 赞同：0
> 
> 时间：2013-01-16T18:26:50.743
> 
> 标签：php, modx-evolution

我可以在使用 [!eForm? ... &eFormOnBeforeFormParse ... !]。我试图向选择框提交一个字符串值，但这不起作用。我猜选择框是一个数组而不是字符串。我没有找到有关此数组结构或如何控制它的文档。

所以我的问题是：如何根据我在数据库中找到的数据预先选择选择框？

我很感激任何帮助。（不过，您的答案不需要包含数据库调用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:10:56.587

自己想通了：

选择框允许多选。我忘记了这一点，因为您不经常看到这一点。因此，该值必须是一个数组以允许多选。因此，当您有一个预选时，请将其包装在一个数组中。例如：

$fields['state']=array('CA');

# mysql - 我的 SQL 查询这么慢正常吗？

> ID：14365199
> 
> 赞同：6
> 
> 时间：2013-01-16T18:27:07.497
> 
> 标签：mysql, sql, performance

我遇到了系统过载的问题。下面的查询是从 3 个表中获取数据，其中 2 个表的记录超过 10.000 条，运行时间为 50 秒。

```
SELECT DISTINCT
p.prod_name,
p.prod_price,
Sum(dt.vt_qtd) as total_qtd

FROM tdb_products p 
LEFT JOIN tdb_sales_temp dt ON p.prod_mp_id = dt.vt_product
LEFT JOIN tdb_sales s ON dt.vt_cupom = s.sl_coupom

WHERE
s.sl_day = $day_link AND
s.sl_mon = $mon_link AND
s.sl_year = $year_link

GROUP BY
p.prod_name

ORDER BY
p.prod_name ASC 
```

这是正常的吗？

解决！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T18:35:59.440

```
SELECT  prod_name, prod_price, SUM(dt.vt_qtd) AS total_qtd
FROM    tdb_sales s
JOIN    tdb_sales_temp dt
ON      dt.vt_cupom = s.sl_coupom
JOIN    tdb_products p
ON      p.prod_mp_id = dt.vt_product
WHERE   (s.sl_day, s.sl_mon, s_sl_year) = ($day_link, $mon_link, $year_link)
GROUP BY
        p.prod_name -- but it's better to group by product's PRIMARY KEY 
```

删除`DISTINCT`（它是多余的`GROUP BY`并选择分组字段）

重写`LEFT JOIN`为因为您在'ed 表`INNER JOIN`上有过滤条件。`LEFT JOIN`

创建索引：

```
tdb_sales (sl_year, sl_mon, sl_day, sl_coupom)
tdb_sales_temp (vt_cupom, vt_product)
tdp_product (prod_mp_id) -- it's probably a PRIMARY KEY and you already have it 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T18:30:35.663

简短的回答是否定的，这绝对不是一个合适的时间长度。任何常见的数据库系统都应该能够以亚秒级的时间处理多个 10,000 行表。

不知道完整的架构或 dbms 后端，我的建议是：

索引 - 确保连接中使用的列有正确的索引 数据类型 - 如果连接的列的数据类型不同，dbms 必须为每个行连接执行转换，这可能导致显着的性能消耗。

# algorithm - 如何搜索纽约市的餐厅？

> ID：14365205
> 
> 赞同：-6
> 
> 时间：2013-01-16T18:27:29.633
> 
> 标签：algorithm, data-structures

我有一个网络爬虫和整个网络来爬取。我的策略应该是什么？我应该使用什么样的分类算法？

我说我有一个网络爬虫，我的意思是手动爬取网络。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:26:46.430

您可以尝试对您抓取的每个页面进行分类，并确定它是否是餐厅（二元分类器）并使用**[监督学习](http://en.wikipedia.org/wiki/Supervised_learning)**。

您可以为此使用**[词袋模型](http://en.wikipedia.org/wiki/Bag-of-words_model)**——这意味着，将词用作“特征”，它们的存在（和出现次数）决定了特征的价值。

您还需要首先手动标记一组页面并确定它们是否是餐厅页面。您生成的数据称为您的*训练集*。

请注意，词袋模型往往具有巨大的特征空间——因此您将需要一个对非信息特征不敏感的分类器。

您可以稍后使用**[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)**来估计您的模型有多好。

以下是我发现在使用词袋模型对数据进行分类时有用的一些建议：

*   **[支持向量](http://en.wikipedia.org/wiki/Support_vector_machine)**机往往非常有用，并且为词袋模型产生了非常好的结果。我没有看到线性核和高斯核的性能有显着差异。
*   使用[词干](http://en.wikipedia.org/wiki/Stemming)和过滤[停用词](http://en.wikipedia.org/wiki/Stop_words)- 你不需要它产生的噪音。
*   使用[二元语法](http://en.wikipedia.org/wiki/Bigram)，它们提供的信息非常丰富，至少对我而言 - 往往会显着提高分类器的准确性。

# android - textcolor 不适用于列表视图项

> ID：14365208
> 
> 赞同：0
> 
> 时间：2013-01-16T18:27:45.693
> 
> 标签：android, styles

所以，我有一个自定义列表适配器。在我的列表适配器中，我有：

```
txtLedgerDate.setTypeface(typewriterFont, R.style.grayText);
txtLedgerPayee.setTypeface(typewriterFont, R.style.boldText_gray);
txtLedgerDeposit.setTypeface(typewriterFont, R.style.grayText);
txtLedgerWithdrawal.setTypeface(typewriterFont, R.style.grayText); 
```

样式定义如下：

```
<style name="grayText">
    <item name="android:textColor">@color/gray</item>
</style>

<style name="boldText.gray">
    <item name="android:textColor">@color/gray</item>
    <item name="android:textStyle">bold</item>  
</style> 
```

但是，文本既不是灰色也不是粗体。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:34:53.090

您使用了错误的方法来应用样式。

```
TextView#setTypeface(Typeface tf, int style) 
```

期望`style`参数是`Typeface.NORMAL`, `Typeface.BOLD`, `Typeface.ITALIC`,之一`Typeface.BOLD_ITALIC`。你需要使用正确的方法

```
TextView#setTextAppearance(Context context, int resid) 
```

所以，在你的情况下是`setTextAppearance(context, R.style.boldText_gray)`.

# json - 使用 RestEasy + Jackson 从 Postgis 到 Java/REST 的空间数据

> ID：14365209
> 
> 赞同：0
> 
> 时间：2013-01-16T18:27:48.087
> 
> 标签：json, jackson, geospatial, resteasy

我有一个从 postgis 检索地理空间数据（线串）的服务，我想将此地理空间数据作为 JSON 数据发送到 RestEasy + Jackson 的 REST 服务之外。有人知道如何将这些空间数据转换为 JSON 吗？

我的实体：

```
public class Route {

    ...
private LineString caminho;

public Rota() {
}

public Rota(Integer id, Usuario usuario, String descricao, LineString lineString) {
    this.id = id;
    this.usuario = usuario;
    this.descricao = descricao;
    this.caminho = lineString;
}

// getters and setters

@Type(type = "org.hibernate.spatial.GeometryType")
public LineString getCaminho() {
    return caminho;
}

public void setCaminho(LineString caminho) {
    this.caminho = caminho;
}

    // hashcode and equals method
} 
```

我的 REST 服务：

```
@Inject
private RotaBC rotaBC;

@GET
@Path("/rotas/{idrota}")
@Produces("application/json")
public Route show(@PathParam("id") String id) {
    return rotaBC.show(Integer.parseInt(id));
} 
```

错误：

15:05:16,447 错误 [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/sharecar].[default]] (http--0.0.0.0-8080-1) Servlet.service() 默认抛出异常：java.lang.ClassNotFoundException: org.codehaus.jackson.map.JsonMappingException$Reference from [Module "org.codehaus.jackson.jackson-mapper-asl:main" from local module loader @1d332b（根：/opt/demoiselle/server/jboss-7.1/modules）]

...

在 org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)

在 org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:166)

...

在 org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446) 在 org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150) 在 org.codehaus.jackson .map.ser.BeanSerializer.serialize(BeanSerializer.java:112)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:16:31.403

您出现的错误表明缺少 Jackson jar 或版本冲突。后者可能更有可能——如果要运行的代码是使用更高版本的 Jackson 编译的，并且类路径具有更早的版本，则可能会导致这种情况。

# javascript - angular.js 应用程序中的多个视图

> ID：14365212
> 
> 赞同：7
> 
> 时间：2013-01-16T18:27:58.907
> 
> 标签：javascript, angularjs

# 问题

我正在尝试使用（最初）以下功能构建产品列表：

*   服务端分页
*   服务器端过滤

我目前有很多问题，但主要是我似乎无法以最好的方式分离视图。每当页面更改时，类别列表就会更新（如果选中任何项目，则它们未选中）。

如何仅在页面加载时加载类别列表？

*谢谢*

# 代码

索引.html：

```
<div ng-app="relv">
    <div ng-view></div>
</div>

<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
<script src="//cdn.jsdelivr.net/angularjs/1.0.2/angular-resource.min.js"></script>
<script src="/angular/app.js"></script>
<script src="/angular/services.js"></script>
<script src="/angular/controllers.js"></script>
<script src="/angular/filters.js"></script>
<script src="/angular/directives.js"></script> 
```

应用程序.js：

```
'use strict';
angular.module('relv', ['relv.filters', 'relv.services', 'relv.directives']).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.when('/products', {templateUrl: '/angular/partials/product_list.html', controller: ProductListCtrl});
    $routeProvider.when('/products/:page', {templateUrl: '/angular/partials/product_list.html', controller: ProductListCtrl});
    $routeProvider.otherwise({redirectTo: '/products'});
  }]); 
```

产品列表.html：

```
<div id="category_list">
    <label ng-repeat="category in categories">
        <input type="checkbox" name="category" ng-model="filterCategories[category.id]"> {{ category.name }}
    </label>
</div>
{{ filterCategories }}

Product list, page {{ page }}.
<br><br>
<ul>
    <li ng-repeat="product in products">
        <a href="#/product/{{ product.id }}">{{ product.name }}</a><br>
        <span ng-repeat="category in product.categories">{{ category.name }}</span>
    </li>
</ul>

<a href="#/products/{{ page-1 }}">Previous page</a>
<a href="#/products/{{ page+1 }}">Next page</a> 
```

控制器.js：

```
'use strict';

function ProductListCtrl($routeParams, $scope, ProductList, CategoryList) {
    $scope.page = $routeParams.page ? parseInt($routeParams.page) : 1;
    $scope.products = ProductList.query({'page': $scope.page});
    $scope.categories = CategoryList.query();
    $scope.filterCategories = {};
}
ProductListCtrl.$inject = ['$routeParams', '$scope', 'ProductList', 'CategoryList']; 
```

服务：js：

```
'use strict';

angular.module('relv.services', ['ngResource']).
    factory('Product', function($resource){
        return $resource('http://endpoint/api_dev.php/products/:productId.json', {}, {
            query: {method:'GET', params:{lang:'en'}, isArray:false}
        });
    }).
    factory('ProductList', function($resource){
        return $resource('http://endpoint/api_dev.php/products.json', {}, {
            query: {method:'GET', params:{lang:'en', page: ':page'}, isArray:true}
        });
    }).
    factory('CategoryList', function($resource){
        return $resource('http://endpoint/api_dev.php/categories.json', {}, {
            query: {method:'GET', params:{lang:'en'}, isArray:true}
        });
    })
; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:04:10.493

如果您总是希望类别列表可见，请将以下代码放入 index.html，在 <ng-view> 上方：

```
<div id="category_list">
    <label ng-repeat="category in categories">
        <input type="checkbox" name="category" ng-model="filterCategories[category.id]"> {{ category.name }}
    </label>
</div>
{{ filterCategories }} 
```

然后它不会因路由更改而改变——只有 ng-view 中的部分会改变。

**更新**：将加载类别的代码放入新控制器中：

```
function CategoryCtrl($scope, CategoryList) {
    $scope.categories = CategoryList.query();
    $scope.filterCategories = {};
} 
```

索引.html：

```
<div ng-controller="CategoryCtrl">
  <div id="category_list">
     <label ng-repeat="category in categories">
        <input type="checkbox" name="category" ng-model="filterCategories[category.id]"> {{ category.name }}
     </label>
  </div>
{{ filterCategories }}
</div>

<div ng-app="relv">
    <div ng-view></div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:41:17.917

每当您更改视图时，您都在交换整个页面的 html，包括复选框。

**将 html 代码分成两个视图**：主视图和详细视图（细微更改）。

Master 有复选框和寻呼机，Detail 有产品列表。

这样，angularjs 只交换与产品相关的 html 代码（视图），而不是类别。

[谷歌论坛中的这个问题](https://groups.google.com/forum/?fromgroups=#!topic/angular/uOf1NkVx-sE)谈到了这个问题

**更新：将类别移出详细视图的示例**

```
<div id="category_list">
    <label ng-repeat="category in categories">
        <input type="checkbox" name="category" ng-model="filterCategories[category.id]"> {{ category.name }}
    </label>
</div>
{{ filterCategories }}

<div ng-app="relv">
    <div ng-view></div>
</div>

<a href="#/products/{{ page-1 }}">Previous page</a>
<a href="#/products/{{ page+1 }}">Next page</a>

<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
... 
```

**或者**

在这种情况下不要使用视图，对您的产品进行分组并使用转发器更改数据（类似于分页，请参阅我的其他答案以及[此处](https://stackoverflow.com/questions/14363888/creating-wrapper-div-using-loops-and-ng-class-in-angularjs/14364110#14364110)的示例）。

# iphone - 在没有块的情况下迭代 NSMutableIndexSet

> ID：14365215
> 
> 赞同：0
> 
> 时间：2013-01-16T18:28:09.600
> 
> 标签：iphone, ios, objective-c, ipad

目前我正在执行以下操作来迭代 NSMutableIndexSet：

```
 if ([indexSet isNotNull] && [indexSet count] > 0){
        __weak  PNRHighlightViewController *weakSelf = self;
        [indexSet enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
            if ([[self.highlightedItems_ objectAtIndex:idx] isNotNull]){
                NSIndexPath *indexPath = [NSIndexPath indexPathForRow:idx inSection: [weakSelf.collectionView numberOfSections]-1];
                [weakSelf.collectionView reloadItemsAtIndexPaths:[NSArray arrayWithObject:indexPath]];
            }
        }];
    } 
```

我想生成一个 NSIndexPath 数组，然后在这些索引路径处重新加载整个 collectionView。所以基本上我想在块完成后调用重新加载。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:34:39.723

一种方法是，

```
[indexSet enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
            if ([[self.highlightedItems_ objectAtIndex:idx] isNotNull]){
                NSIndexPath *indexPath = [NSIndexPath indexPathForRow:idx inSection: [weakSelf.collectionView numberOfSections]-1];
                //store the indexPaths in an array or so
            }
            if (([indexSet count] - 1) == idx) { //or ([self.highlightedItems_ count] - 1)
               //reload the collection view using the above array
            }
        }];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:55:55.827

如果一个方法不要求调度队列或`NSOperationQueue`块参数运行，并且文档没有另外说明，您通常可以假设它同步执行块。块并不意味着并行性，文档会告诉您块实际上何时异步运行。

`NSNotificationCenter`的块观察者方法将是异步执行块的方法的示例。在那种情况下，它要求一个`NSOperationQueue`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:12:50.567

在块期间构建数组。*迭代是*同步执行的（所以你也不需要担心弱自我）：

```
 if ([indexSet isNotNull] && [indexSet count] > 0){
        __weak  PNRHighlightViewController *weakSelf = self;

        NSMutableArray *indexPaths = [NSMutableArray new]; // Create your array

        [indexSet enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {
            if ([[self.highlightedItems_ objectAtIndex:idx] isNotNull]){
                NSIndexPath *indexPath = [NSIndexPath indexPathForRow:idx inSection: [weakSelf.collectionView numberOfSections]-1];
                [indexPaths addObject:indexPath];
            }
        }];
        [self.collectionView reloadItemsAtIndexPaths:indexPaths];
    } 
```

# android - getPsc() 在三星设备上返回 -1。我该怎么做才能让它正常工作？

> ID：14365216
> 
> 赞同：1
> 
> 时间：2013-01-16T18:28:16.597
> 
> 标签：android, linux, gsm

我研究并发现三星没有实现此功能正常工作所需的代码。

谁能指出我正确的方向以使其正常工作？我不介意变得肮脏并尝试弄乱三星的 RIL 或内核或其他任何东西。

此外，具有该字段的设备在被调用`[gsm.version.ril-impl] = Qualcomm RIL x.x`时似乎返回 0 。返回 -1 的`getPsc()`设备。`Samsung RIL(IPC) x.x`

我真的非常想让它发挥作用，它会让我的生活更轻松，我的公司也不需要购买新手机。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:41:23.383

您可能需要下载并应用此[补丁](https://android.googlesource.com/platform/frameworks/base/+/2ec0e6fe1e5382d93cb28c97d24c7b0a0387c8ee)。阅读补丁说明以获取更多详细信息。

# html - 格式化 a中的元素

> ID：14365217
> 
> 赞同：0
> 
> 时间：2013-01-16T18:28:21.450
> 
> 标签：html, css

我的页面上有两个`li`元素，我希望它们将一个显示在另一个之上，但它们没有。这是我的代码：

```
#floating-box {
width: 65px;
height:auto;
background-color: #484848;
margin: 54px 10px 0px 623px;
position:absolute;
z-index:1;
text-align: justify;
border-top: 1px solid #000;
border-left: 1px solid #000;
border-bottom: 1px solid #000;
border-right: 1px solid #484848;
 }
.social {
position : relative;
list-style-type : none;
margin-left: 2px;
}

.social li a {
float: left;
padding: 1px 5px 5px 0px;
margin: 0px 0px 3px 0px;
display: inline;
} 
```

使用这个 CSS 的 HTML 是：

```
<div id="floating-box">
<img src="likeusnow.jpg" />
<ul class="social"><!-- Facebook Like/Share Button -->
<li><a name="fb_share" type="box_count" rel="nofollow"          share_url="http://www.mysite.com"></a> 
 </li>

<li>
<a href="https://twitter.com/share" rel="nofollow" class="twitter-share-button" data- url="http://www.mysite.com" data-lang="en" data-count="vertical">Tweet</a>
</li>

 </ul> 
```

Facebook like 按钮要么出现在 twitter 推文按钮的顶部，要么出现在它的右侧。由于某种原因，它每次都不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:34:49.697

当我[在这里@ csstest.com](http://cssdesk.com/)测试您的代码时，这两个`li`很好地显示在另一个之上，就像普通`li`元素一样。

而且**我在您的 css 中看不到任何可能影响元素样式的** `li` **内容**。

除了你给我们的css风格之外，没有其他的css风格了吗？

您使用什么浏览器进行测试？

编辑1：

如果你这样做：

```
#floating-box 
{
width: 65px;
height:auto;
background-color: #484848;
margin: 54px 10px 0px 623px;
position:absolute;
z-index:1;
text-align: justify;
border-top: 1px solid #000;
border-left: 1px solid #000;
border-bottom: 1px solid #000;
border-right: 1px solid #484848;
}
.social li
{
list-style-type : none;
} 
```

应用于：

```
<div id="floating-box">
<img src="likeusnow.jpg" />
<ul class="social"><!-- Facebook Like/Share Button -->
<li>
<a name="fb_share" type="box_count" rel="nofollow" share_url="http://www.mysite.com">A</a> 
</li>
<li>
<a href="https://twitter.com/share" rel="nofollow" class="twitter-share-button" data- url="http://www.mysite.com" data-lang="en" data-count="vertical">Tweet</a>
</li>

</ul> 
```

我在第一个 html 锚点中添加了一个 A，然后你会看到，A 在 Tweet 上方很好地列出了。

它有帮助吗？

# hadoop - YARN 中的容器是什么？

> ID：14365218
> 
> 赞同：45
> 
> 时间：2013-01-16T18:28:28.700
> 
> 标签：hadoop, mapreduce, hadoop-yarn

YARN 中的容器是什么？它与节点管理器上的任务运行的子JVM相同还是不同？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-16T21:29:45.363

它表示给定集群中单个节点上的资源（内存）。
一个容器是

*   由节点管理器监督
*   由资源管理器安排

一个 MR 任务在这样*的容器中*运行。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-23T13:21:22.890

单个节点上可以有多个容器（或单个非常大的容器）。

> 系统中的每个节点都被认为是由多个具有最小内存大小（比如 512MB 或 1 GB）的容器组成。ApplicationMaster 可以请求任何容器作为最小内存大小的倍数。

[Source](https://issues.apache.org/jira/secure/attachment/12486023/MapReduce_NextGen_Architecture.pdf)，请参阅 ResourceManager/Resource Model 部分。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-30T18:58:17.163

在 YARN 中，“容器”一词在两种情况下使用，

**Container：**表示分配给ApplicationMaster的资源。ResourceManager 负责向 ApplicationMaster 发布资源/容器。检查[容器](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/records/Container.html)API。

**启动容器：**根据分配的资源（容器）ApplicationMaster请求NodeManager启动容器，从而在一个节点上执行任务。检查[ContainerManager](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/yarn/api/ContainerManager.html) API。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-08-06T18:39:58.573

在 Hadoop 2.x 中，Container 是一个工作单元发生的地方。例如，每个 MapReduce 任务（不是整个作业）都在一个容器中运行。

应用程序/作业将在一个或多个容器上运行。

为每个容器分配一组系统资源，目前支持 CPU 内核和 RAM。Hadoop 集群中的每个节点都可以运行多个容器。

在 Hadoop 1.x 中，JobTracker 分配一个槽来运行每个 MapReduce 任务。然后 TaskTracker 为每个任务生成一个单独的 JVM（除非未启用 JVM 重用）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-29T06:21:29.927

简单来说，Container 是运行 YARN 应用程序的地方。它在每个节点中都可用。Application Master 与调度器（资源管理器的组件之一）协商容器。容器由节点管理器启动。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-11T05:45:34.270

根据输入数据的大小，创建多个输入拆分。MR 作业需要处理整个数据，以便创建多个任务（映射和减少任务）。因此，对于每个输入拆分将由一个任务处理。现在如何运行这个任务，由资源管理器建议。资源管理器知道哪个节点管理器空闲，哪个节点管理器忙，就像学院的校长和节点管理器是学院的班主任，校长知道哪个老师有空。因此它要求节点管理器在容器中运行该任务（整个作业的一小部分），即内存区域，例如 jvm。因此，该作业作为容器内的应用程序主机运行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-01T12:05:31.270

**Container**是资源分配，是ResourceManager授予特定ResourceRequest的**成功结果。**容器授予应用程序使用特定主机上特定数量的资源（内存、cpu 等）的权利。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-23T08:58:52.843

容器是应用程序运行其任务的地方。如果你想知道集群中运行容器的总数，那么你可以检查你的集群 Yarn-Resource manager UI。

纱线网址：[http://Your-Active-ResourceManager-IP:45020/cluster/apps/RUNNING](http://Your-Active-ResourceManager-IP:45020/cluster/apps/RUNNING)

在“正在运行的容器”列中，总数。运行容器的详细信息。

注意：如果您使用的是 spark，那么 spark 执行器将在容器内运行。一个容器可以容纳多个火花执行器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-27T20:43:11.643

```
Container : 
```

资源的逻辑租用和节点上产生的实际进程可以互换使用。它与任务（或 AM）运行的过程相同。为了启动容器，我们提供了容器对象和 CLC (ContainerLaunchContext)，我们在其中设置了运行任务（或 AM）的命令列表。

```
nmClient.startContainer(container, clcObj)

ContainerLaunchContext code snippet :

<code>
.
.
.
 /**
   * Add the list of <em>commands</em> for launching the container. All
   * pre-existing List entries are cleared before adding the new List
   * @param commands the list of <em>commands</em> for launching the container
   */
  @Public
  @Stable
  public abstract void setCommands(List<String> commands);
</code> 
```

# android - 简而言之，与使用 OAuth2 请求 getAuthToken 和 getToken 有什么区别

> ID：14365219
> 
> 赞同：8
> 
> 时间：2013-01-16T18:28:31.110
> 
> 标签：android, google-app-engine, authorization, accountmanager

使用访问令牌 OAuth 2.0 进行 deling 简而言之，与使用有什么区别：

`AccountManager.getAuthToken ("oauth2:https...userinfo.profile")`,

并使用 Google Play：

```
GoogleAuthUtil.getToken(mActivity, mEmail, mScope) 
```

据我[了解](http://android-developers.blogspot.se/2013/01/verifying-back-end-calls-from-android.html)，它们都为用户生成了一个[挑战](http://developer.android.com/google/play-services/auth.html#obtain)屏幕，Google Plays 屏幕对用户更友好。访问令牌可以具有相同的范围对吗？！两个调用都必须是异步的。InvalidateToken 看起来必须在两个调用中都进行检查，等等？

![在此处输入图像描述](../Images/28a4658a6c748fd0d12d188284f7a6b6.png) ![在此处输入图像描述](../Images/10554b58c086a04c05917aba3920d0c1.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-17T08:06:21.607

我不知道使用 Google Play 服务进行 OAuth 2.0 身份验证，但在快速浏览后，它看起来很有趣，我认为我更喜欢使用它而不是 AccountManager.getAuthToken。

## 主要区别

**[AccountManager.getAuthToken](http://developer.android.com/reference/android/accounts/AccountManager.html#getAuthToken%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle,%20android.app.Activity,%20android.accounts.AccountManagerCallback%3Candroid.os.Bundle%3E,%20android.os.Handler%29)**

**临：**

*   可用于所有 Android 2.0 设备及更高版本。
*   内置于 Android 中，不需要任何单独的 SDK。
*   可用于具有身份验证器的所有类型的帐户，而不仅仅是 Google。

**缺点：**

*   返回可能已过期的令牌，因此您始终必须[使令牌无效](https://stackoverflow.com/questions/1996686/authtoken-from-accountmanager-in-android-client-no-longer-working)并再次请求它以确保您拥有有效的令牌。
*   需要权限 GET_ACCOUNTS 和 USE_CREDENTIALS。
*   挑战屏幕对 Android 2 用户不友好。*

**[GoogleAuthUtil.getToken](http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html#getToken%28android.content.Context,%20java.lang.String,%20java.lang.String%29)**

**临：**

*   总是返回一个[有效的令牌](http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html#getToken%28android.content.Context,%20java.lang.String,%20java.lang.String%29)。
*   只[需要](http://developer.android.com/google/play-services/auth.html#choose)GET_ACCOUNTS 权限
*   用户友好的挑战屏幕。
*   [谷歌推荐](https://stackoverflow.com/questions/14365219/in-a-nutshell-whats-the-difference-from-using-oauth2-request-getauthtoken-and-g#comment20015992_14374577)

**缺点：**

*   需要 Android 2.2 并且设备具有 Google Play
*   要求您下载[Google Play 服务 SDK](http://developer.android.com/google/play-services/setup.html)并将其包含在您的应用中。
*   您需要在 Google API 控制台中[注册您的应用](http://android-developers.blogspot.se/2013/01/verifying-back-end-calls-from-android.html)
*   可以“仅”用于使用 OAuth 2.0 的 Google 服务

## 挑战画面对比

姜饼和冰淇淋三明治上的[AccountManager.getAuthToken挑战屏幕](http://developer.android.com/reference/android/accounts/AccountManager.html#getAuthToken%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle,%20android.app.Activity,%20android.accounts.AccountManagerCallback%3Candroid.os.Bundle%3E,%20android.os.Handler%29)

![Gingerbread 的 getAuthToken 挑战屏幕](../Images/6f16b34ad38fe7911f5c856cea41ace1.png) ![冰淇淋三明治的 getAuthToken 挑战屏幕](../Images/98a8fca9e33982c748ad760a94ae33c5.png)

[GoogleAuthUtil.getToken](http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html#getToken%28android.content.Context,%20java.lang.String,%20java.lang.String%29)挑战屏幕

![getToken 挑战屏幕](../Images/ff90d41f6a404f514acb13ad773d55af.png) ![getToken 挑战屏幕，更多详情](../Images/0a8787af31f9585e487eb24e40506eae.png)

## 概括

由于 GoogleAuthUtil 方法具有对用户更友好的挑战屏幕并且在安装时需要较少的权限，因此我肯定会尽可能使用此方法而不是 AccountManager.getAuthToken 方法。由于您总是获得一个有效的令牌并且不必为使令牌无效而烦恼，因此它也应该使代码更简单。

# cakephp - 使用 cakephp 的 html 中的 css 类

> ID：14365225
> 
> 赞同：1
> 
> 时间：2013-01-16T18:28:38.570
> 
> 标签：cakephp

我想使用 cakephp 在 html 链接标签中调用一个 css 类，即

```
 <li><a href="#"><i class="icon-trash"></i> Delete Account</a></li> 
```

不知道该怎么做，我尝试了很多，但每次它扰乱我的css，在链接名称之前或上方显示图标，我应该在蛋糕中是

```
 <li> <?php echo $this->html->link('Delete Profile',
    array('controller'=>'Users','action'=>'delete',$current_user['user_id']),
    array('icon'=>'<i class="icon-trash">'.'</i>'),array('escape'=>false));?></li> 
```

我正在使用 cakephp 2.2.5 和 xamp 1.7.7。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:18:31.663

你`Html::link()`的不正确。没有`icon`参数，你有一个额外的数组。

用这个：

```
<li>
<?php echo $this->Html->link('<i class="icon-trash"></i> Delete Profile', 
    array('controller'=>'users', 'action'=>'delete', $current_user['user_id']),
    array('escape'=>false)); ?>
</li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:30:15.257

试试下面对我有用的代码。

```
<?php 
echo $html->link
(
    '<i class="icon-trash"><i>'. __('Delete Profile', true),
    array('controller'=>'users','action'=>'delete', $current_user['user_id']),
    array('escape' => false), false
);
?>
```

干杯，你就完成了。

# knockout.js - 通过字符串数组淘汰 foreach 迭代

> ID：14365228
> 
> 赞同：1
> 
> 时间：2013-01-16T18:28:51.170
> 
> 标签：knockout.js

我找到了这个，但这对我不起作用：[绑定到简单的字符串数组](https://stackoverflow.com/questions/7248719/bind-to-simple-array-of-strings)

我只是想通过淘汰赛来管理一系列字符串。这是我的标记：

```
<div class="editor-field">
        <table>
            <thead>
                <tr>
                    <th>Page Urls</th>
                    <th></th>
                </tr>
            </thead>
            <!-- ko if: RouteUrls().length > 0 -->
            <tbody data-bind="foreach: RouteUrls">                   
                <tr>
                    <td><span data-bind="text: $data"></span></td>
                    <td><a href="#" class="ui-icon ui-icon-closethick" data-bind="click: $root.removeUrl">Remove</a></td>
                </tr>
            </tbody>
            <!-- /ko -->
            <!-- ko if: RouteUrls().length < 1 -->
            <tbody>
                <tr>    
                    <td colspan="3"> No urls added for editing.</td>
                </tr>
            </tbody>
            <!-- /ko -->
        </table>
        @Html.HiddenFor(x => x.UrlCount, new { data_bind = "value:RouteUrls().length" })
        @Html.ValidationMessageFor(x => x.UrlCount)
    </div> 
```

这是我的淘汰赛代码：

```
 <script type="text/javascript">
    var mappedModel = ko.mapping.fromJS(@Html.Raw(JsonConvert.SerializeObject(Model)));
    mappedModel.RouteUrls = ko.observableArray([]);
    mappedModel.urlToAdd = ko.observable("/");
    mappedModel.addUrl = function() {
        var duplicateValues = ko.utils.arrayFilter(this.RouteUrls(), function (item) {
                return item == mappedModel.urlToAdd();                   
        });

        if ((this.urlToAdd() != "") && (duplicateValues.length == 0)) // Prevent blanks and duplicates
        {

            this.RouteUrls().push(this.urlToAdd());
            this.urlToAdd("/");
            console.log(this.RouteUrls().length);
            console.log(this.RouteUrls());
        }
    };
    mappedModel.removeUrl = function(url) {
        mappedModel.RouteUrls.remove(url);
    };

    //other code...

    ko.applyBindings(mappedModel);

    $.validator.unobtrusive.parse("#pageCForm");
    $("#pageForm").data("validator").settings.submitHandler = mappedModel.save;
</script> 
```

现在的问题是，在我的标记中，该集合从未显示。当我尝试添加一个 url 时，即使我删除了有条件的淘汰赛并只显示表格，它也总是空的。如果我尝试提交页面，我会在 URL 计数的隐藏字段上运行不显眼的验证，并且它也像空的一样。因此，标记中的所有内容都表现得`RouteUrls()`总是空的。但是，当我将 RouteUrls().length 和文本记录到控制台时，我在连续尝试添加后得到以下信息：

```
1 
["/sdfsd"] 
2 
["/sdfsd", "/trgfd"] 
3 
["/sdfsd", "/trgfd", "/fdfdggdbjn"] 
```

所以我不明白如何在脚本代码中正确填充长度和数组，但它没有反映在标记中。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:37:02.290

问题（可能）在这条线上：

```
this.RouteUrls().push(this.urlToAdd()); 
```

Knockout 重新定义了 ObservableArray 中的推送（以及所有其他更改数组的方法）。这些 ObservableArray 方法将改变数组**然后触发观察者**。

因此，您应该将其替换为：

```
this.RouteUrls.push(this.urlToAdd()); 
```

更多信息在这里： http: [//knockoutjs.com/documentation/observableArrays.html#manipulating_an_observablearray](http://knockoutjs.com/documentation/observableArrays.html#manipulating_an_observablearray)

# sql - SQL Server：位列不产生结果

> ID：14365230
> 
> 赞同：0
> 
> 时间：2013-01-16T18:29:23.143
> 
> 标签：sql, sql-server, sql-server-2008

以下查询产生 6 个结果：

```
SELECT ATTACHMENT_ID,
       /* Somme other columns */
       THUMBNAIL_EXIST,
       CASE isnull ((SELECT TOP 1 EMAIL_ID
                     FROM   EMAILS_ATTACHMENTS
                     WHERE  ATTACHMENT_ID = vwFILES_ATTACHMENTS.ATTACHMENT_ID), '00000000-0000-0000-0000-000000000000')
         WHEN '00000000-0000-0000-0000-000000000000' THEN '0'
         ELSE '1'
       END AS SENT_ATTACHMENT,
       CASE File_ext
         WHEN '.pdf' THEN 'true'
         ELSE 'false'
       END AS 'enablecheck',
       CASE VISIBLE_TO_CLIENT
         WHEN '1' THEN '/FACTS/App_Themes/SugarClassic/images/check_inline.gif'
         ELSE '/FACTS/App_Themes/SugarClassic/images/close_inline.gif'
       END AS 'VISIBLE_TO_CLIENT_PATH'
FROM   vwFILES_ATTACHMENTS
WHERE  ( 1 = 1 )
       AND ( PARENT_TYPE = 'Files' )
       AND ( PARENT_ID = '55e52006-ce85-4781-b6f9-00b68c04d62f' )
       AND ( DELETED = 0 )
ORDER  BY DATE_ENTERED DESC 
```

我修改了`DELETED`一行上的列，将其从 更改`False`为`True`。当我尝试搜索`DELETED = 1`而不是 时`DELETED = 0`，搜索不会产生任何结果。

为什么我更改的那一行没有出现？`DELETED = 0`运行查询时（上图），我只得到 5 个结果。在我专门搜索它之前，不会检索到第 6 个结果`ATTACHMENT_ID`。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:53:09.930

鉴于帖子和评论，很难确定您的情况如何。我会尝试这样的事情来确定您的 Deleted 列值：

```
SELECT DELETED, COUNT(*)
FROM vwFILES_ATTACHMENTS
GROUP BY DELETED 
```

如果那会返回正确的结果，那么听起来很愚蠢，假设 Deleted = 1 不起作用，请尝试以下操作：

```
SELECT * 
FROM vwFILES_ATTACHMENTS
WHERE Deleted <> 0 
```

如果 = 1 或 <> 0 工作并返回正确的行，那么@Joel 很可能是正确的，他假设 WHERE 子句中的其他约束导致它不返回。如果 = 1 或 <> 0 不起作用，那么我一无所知。

祝你好运。

# html - html5 分段元素的问题

> ID：14365236
> 
> 赞同：1
> 
> 时间：2013-01-16T18:29:47.720
> 
> 标签：html, css

所以我遇到了 HTML5 分段元素的问题。看来我必须创建容器，否则它们不是块级的。我确实添加了一个 CSS 重置，所以我不知道这是否是导致它的原因。不知道我是否应该把我的完整代码放进去。我想确保它没有我不需要的额外代码。

无论如何，这里是 html5 的一部分：

`<div class="wrapper"><nav><ul>`
`<li><a href="#">About</a></li>`
`<li><a href="#">Gallery</a></li>`
`<li><a href="#">Content</a></li>`
`</ul>`
`</nav>`
`</div>`

如果我没有该包装器，无论出于何种原因，它都不会将其视为块引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:52:03.227

支持 HTML5 语义元素的浏览器的最小版本：IE 9、Firefox 4、Chrome 8、Safari 5、Opera 11.1、Safari iOS 4、Android 2.1。

如果您使用的是旧版浏览器，浏览器会将所有无法识别的元素构建为内联元素。要解决此问题，您只需在 CSS 中添加一条新规则：

```
article, aside, details, figcaption, figure,
footer, header, hgroup, nav, section {
    display: block;
} 
```

此 CSS 规则不会对识别 HTML5 的浏览器产生负面影响，因为属性 'display' 已设置为 'block'。

旧版本的 IE (<9) 还有另一个问题。他们拒绝将 CSS 规则格式应用于他们无法识别的元素。要解决这个问题：

```
<script>
    document.createElement('article');
    document.createElement('aside');
    ...
    document.createElement('section');        
</script> 
```

或者，如果您不想为所有元素编写代码，则可以使用此脚本：[html5shiv.js](https://code.google.com/p/html5shim/)。此外，您还会感兴趣：[Modernizr](http://modernizr.com/)

# internet-explorer - jquery tablesorter 自定义解析器 - innerHTML 与 innerText

> ID：14365237
> 
> 赞同：1
> 
> 时间：2013-01-16T18:29:51.047
> 
> 标签：internet-explorer, jquery-plugins, innerhtml, tablesorter, innertext

我正在使用 tablesorter 并尝试创建自定义排序解析器 - 解析器在 Firefox 中运行良好，但在 Internet Explorer 中完全失败。为什么解析器在一个中工作，而不是另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:18:49.583

在我[的 tablesorter 分支中](https://github.com/Mottie/tablesorter)，我还发现`textContent`在 IE9（当然还有所有其他现代浏览器）中使用起来要快得多，所以我修改了[内部编码](https://github.com/Mottie/tablesorter/blob/master/js/jquery.tablesorter.js#L128-L132)以自动执行此操作：

```
if (config.supportsTextContent) {
    text = node.textContent; // newer browsers support this
} else {
    text = $(node).text();
} 
```

我还对该[`textExtraction`选项](http://mottie.github.com/tablesorter/docs/#textextraction)进行了一些其他改进，使您可以获取`cellIndex`和/或为特定列添加函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:01:13.107

当您创建自定义解析器时，tablesorter 使用此函数：getElementText(config, node)

getElementText 将尝试从表格单元格中获取文本 - 但某些表格单元格也可能包含 html 标记。包含其他 html 标签（如 [span] 或 [img]）的单元格 [td] 标签会导致 IE 出现问题，因为该函数只是抓取单元格的所有 innerHTML（包括无关标签），而不仅仅是 IE 支持的 innerText。

getElementText 函数在 Firefox 中运行良好，因为该函数获取 Firefox 支持的（不言自明的）文本内容，忽略单元格中的 html 标记。请参阅相关问题：[jQuery tablesorter: custom html image tag sorter/parser](https://stackoverflow.com/questions/6618372/jquery-tablesorter-custom-html-image-tag-sorter-parser)

解决此问题的最佳方法是首先让tablesorter 根据浏览器支持的innerText 或textContent 正确抓取单元格文本。Kling 的回答帮助我走上了正确的道路： [How to clear tags from a string with JavaScript](https://stackoverflow.com/questions/4898723/how-to-clear-tags-from-a-string-with-javascript)

打开 tablesorter.js 文件并修改如下所示的 getElementText(config, node) 部分。我也已将此建议提交给 tablesorter 作者。

**用 innerText 替换 innerHTML：**

```
if (config.supportsTextContent) {
    text = node.textContent;
} else {
    if (node.childNodes[0] && node.childNodes[0].hasChildNodes()) {
        text = node.childNodes[0].innerText;
    } else {
        text = node.innerText;
    }
} 
```

# android - 返回结果以打开android应用程序

> ID：14365238
> 
> 赞同：0
> 
> 时间：2013-01-16T18:29:51.083
> 
> 标签：android, android-activity

我的 android 应用程序是从另一个应用程序打开的。我知道如何将结果返回给活动，但是当我需要返回打开的应用程序时会发生什么？打开应用程序（startActivityForResult）>我的应用程序>活动A>活动B>活动C>打开应用程序。谢谢，莎伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:35:10.027

您可以`startActivity()`再次调用打开的应用程序以传递结果*，也可以*调用`finish()`每个中间活动的`onActivityResult()`方法以将结果级联回打开的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:49:11.987

我想我明白你需要什么。让我试着解释一下：

**主要活动：**

```
//calling your activity from which you expect a result
Intent intent = new Intent(mContext, ActivityB.class);
startActivityForRsult(intent, 0); 
```

**活动 B：**

当你完成这个时，你必须做类似的事情，

```
setResult(Activity.RESULT_OK); //This line will do the trick ;)
finish(); 
```

回到你的`MainActivity`你必须`Override`的`onActivityResult()`方法。

```
@Override
protected void onActivityResult(int arg0, int arg1, Intent arg2) {
    super.onActivityResult(arg0, arg1, arg2);
    if (arg0 == 0) {
        switch (arg1) {
        case RESULT_OK:
               /**DO YOUR CODE HERE.*/
        break;

        default:
        break;
        }
    }
}; 
```

让我知道你的进展。

# regex - 如何使用 RegEx 过滤 Accumulo 上的扫描

> ID：14365239
> 
> 赞同：4
> 
> 时间：2013-01-16T18:29:53.727
> 
> 标签：regex, accumulo

我以前对存储在 Accumulo 中的数据使用过扫描，并且已经取回了整个结果集（无论`Range`我指定什么）。问题是，我想在客户端收到它们之前从 Accumulo 过滤服务器端的那些。我希望有人有一个简单的代码示例来说明这是如何完成的。

据我了解，`Filter`提供了一些（全部？）此功能，但在实践中如何使用 API？我从这里的 Accumulo 文档中看到了在 shell 客户端上使用 Filter 的示例：http: [//accumulo.apache.org/user_manual_1.3-incubating/examples/filter.html](http://accumulo.apache.org/user_manual_1.3-incubating/examples/filter.html)

我在网上找不到任何代码示例，说明一种基于正则表达式过滤任何数据的扫描的*简单*方法，尽管我认为这应该是相对容易做的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T20:01:11.047

该类[`Filter`](http://accumulo.apache.org/1.4/apidocs/org/apache/accumulo/core/iterators/Filter.html)为您想要的功能奠定了框架。要创建自定义过滤器，您需要扩展`Filter`和实现该`accept(Key k, Value v)`方法。如果您只想基于正则表达式进行过滤，则可以避免使用[`RegExFilter`](http://accumulo.apache.org/1.4/apidocs/org/apache/accumulo/core/iterators/user/RegExFilter.html).

使用 a`RegExFilter`很简单。这是一个例子：

```
//first connect to Accumulo
ZooKeeperInstance inst = new ZooKeeperInstance(instanceName, zooServers);
Connector connect = inst.getConnector(user, password);

//initialize a scanner
Scanner scan = connect.createScanner(myTableName, myAuthorizations);

//to use a filter, which is an iterator, you must create an IteratorSetting
//specifying which iterator class you are using
IteratorSetting iter = new IteratorSetting(15, "myFilter", RegExFilter.class);
//next set the regular expressions to match. Here, I want all key/value pairs in
//which the column family begins with "J"
String rowRegex = null;
String colfRegex = "J.*";
String colqRegex = null;
String valueRegex = null;
boolean orFields = false;
RegExFilter.setRegexs(iter, rowRegex, colfRegex, colqRegex, valueRegex, orFields);
//now add the iterator to the scanner, and you're all set
scan.addScanIterator(iter); 
```

在这种情况下，构造函数的前两个参数`iteratorSetting`（优先级和名称）不相关。添加上述代码后，遍历扫描器将仅返回与正则表达式参数匹配的键/值对。

# php - 为什么我经常从 zend 框架连接到 S3 超时？

> ID：14365248
> 
> 赞同：1
> 
> 时间：2013-01-16T18:30:22.167
> 
> 标签：php, zend-framework, amazon-s3

我有我认为非常简单的代码来连接到亚马逊 S3 并清空存储桶。

```
$s3 = new Zend_Service_Amazon_S3(
      "accessKey",
      "secretKey");
$s3->cleanBucket("my.bucket"); 
```

10 次中有 9 次我得到：

```
Message: Unable to Connect to tcp://my.bucket.s3.amazonaws.com:80\. Error #0: php_network_getaddresses: getaddrinfo failed: No such host is known. 
```

如果这会改变任何东西（并且可能会），我正在 wamp 中的 localhost 工作。我们的连接很稳定，所以我怀疑我经常断网。

它时不时地工作，我的代码没有任何变化，所以这让我觉得还有其他问题，但据我所知，亚马逊并不是一直以停机而闻名。对于它在 Yii 框架中的价值，它从不这样做，所以它可能是 Zend 中的一个错误。

无论如何，如果有人有这个问题的提示或解决方案。

# linker - 如何链接来自不同目标文件（ELF）的具有相同类型但不同标志的段？

> ID：14365250
> 
> 赞同：0
> 
> 时间：2013-01-16T18:30:34.617
> 
> 标签：linker, elf

我很好奇链接器如何链接具有相同类型但来自不同目标文件的不同标志的段。例如，我们现在有两个 ELF 目标文件`foo.o`和`bar.o`，它们都有一个`.text`段（代码段）。但是，`.text`段 in`foo.o`是可写的，而 in`bar.o`不是。在这种情况下，链接器将如何链接这两个段？`.text`链接器将如何设置链接文件中段的标志？

谢谢和最好的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:22:27.173

> 链接器将如何设置链接文件中 .text 段的标志？

链接文件中没有`.text`段：该`.text`段被放入其中一个`LOAD`段中。

链接器可以选择做什么。

*   它可以创建`.text`具有不同标志的多个部分，并将它们放入多个`LOAD`段中。
*   它可以将所有`.text`部分从一个部分`foo.o`合并`bar.o`到一个`.text`部分中，并使其可写
*   它可能会使链接失败

# android - Android 和 Symbian 之间的 NFC 通信

> ID：14365252
> 
> 赞同：1
> 
> 时间：2013-01-16T18:30:45.107
> 
> 标签：android, symbian, symbian3

我正在尝试在 Android 和 Symbian Belle 之间建立 NFC 通信，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:35:36.180

是的，这是可能的。NFC 就像任何其他通信技术（如蓝牙等）一样，可以跨平台工作。

虽然特定于平台的 API（如 Android Beam）不能跨平台工作，但您仍然应该能够实现自己的可以在设备之间发送数据的应用程序。

Android 设备会将 Symbian 设备读取为普通的 NFC 标签，Symbian 设备也会对 Android 设备执行相同的操作。

[Symbian NFC 教程](http://www.developer.nokia.com/Community/Wiki/Developing_NFC_Applications)

[Android NFC 教程](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)

# php - 在 Symfony2 中使用动态前缀自定义根路径

> ID：14365265
> 
> 赞同：1
> 
> 时间：2013-01-16T18:31:43.500
> 
> 标签：php, symfony

我已经用 Symfony2 框架完成了一个应用程序。

当前在应用程序中的生根是这样的：

```
http://testserver.loca.com/app_dev.php/Dashboard/ 
```

我想添加一个这样的动态前缀：

```
http://testserver.loca.com/app_dev.php/Prefix/Dashboard/ 
```

当用户单击将其直接发送到特定页面的链接时，用户将选择动态前缀，列表将如下所示：

```
http://testserver.loca.com/app_dev.php/Prefix1/Dashboard/
http://testserver.loca.com/app_dev.php/Prefix2/Dashboard/
http://testserver.loca.com/app_dev.php/Prefix3/Dashboard/ 
```

我发现有可能使用 Service 和 ExtraLoader 类来完成，但我真的不知道如何完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:51:08.197

您可以处理路由中的前缀：

```
/**
 * @Route("{prefix}/Dashboard", name="dynamic_dashboard")
 * @Template()
 */
public function dynamicDashboardAction($prefix)
{
    // Some way of deciding what to do based on prefix
    switch($prefix){
        case 'Prefix1':
            // Do stuff for prefix1 etc
        break;
        // etc
    }
} 
```

`dynamicDashboardAction($prefix)`在上面，路由有一个用于传递给方法的前缀的占位符。在视图中，您可以使用 twig 从每个链接传递正确的前缀：

```
<a href={{ path("dynamic_dashboard", {"prefix": "Prefix1"}) }}">Dashboard 1</a>
<a href={{ path("dynamic_dashboard", {"prefix": "Prefix2"}) }}">Dashboard 2</a> 
```

# git - 如何在本地不跟踪 git 中的目录？

> ID：14365270
> 
> 赞同：0
> 
> 时间：2013-01-16T18:32:27.693
> 
> 标签：git

我已经克隆了一个 git 存储库。我可以让它不跟踪目录吗？我尝试将“myIgnoreDirectory”添加到 .gitignore，然后添加“rm -rf myIgnoreDirectory”。

然后我执行“git status”，我看到一堆“myIgnoreDirectory 下的已删除文件”。

我怎样才能解决这个问题？我想在本地删除“myIgnoreDirectory”以节省磁盘空间。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:34:47.303

git 不会忽略跟踪的文件。你需要`git rm --cached`你不想再看到的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:50:55.103

如果你克隆了一个 github repo，首先 fork 它，克隆它，创建一个新分支，删除那个目录，从那里提交并工作

# matlab - 在 Matlab 中使用 fplot

> ID：14365275
> 
> 赞同：3
> 
> 时间：2013-01-16T18:32:51.190
> 
> 标签：matlab, graph

我正在尝试使用`fplot`.

```
fplot('3*x*sin(x) - 2*x', [-2*pi 2*pi], 'r') 
```

这是有效的，但下面的命令显示错误。

```
fplot('diff(3*x*sin(x) - 2*x)', [-2*pi 2*pi], 'g') 
```

显示错误

```
??? Subscripted assignment dimension mismatch.

Error in ==> fplot at 105
x = xmin+minstep; y(2,:) = feval(fun,x,args{4:end}); 
```

请给我一些建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:00:20.907

问题在于`diff`函数字符串中。您的函数需要为 N 个输入生成 N 个输出，但要`diff`提供 N-1 个输出。从`fplot`（重点添加）的文档中：

> 函数必须采用 y = f(x) 的形式，其中 x 是一个向量，其范围指定了限制，**y 是一个与 x 大小相同的向量**，包含函数在 x 中的点的值（参见第一个示例）。

[zplesivcak 的回答](https://stackoverflow.com/a/14365433/1339280)显示了解决此限制的一种方法。您还可以以非符号方式评估函数：

```
x = linspace(-2*pi, 2*pi, 1000);
y = diff(3*x.*sin(x) - 2*x);
figure
plot(y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:43:49.890

您可以先计算导数，将结果转换为字符串，然后绘制获得的函数：

```
syms x;
di = char( diff(3*x*sin(x)-2*x) );
fplot(di, [-2*pi 2*pi], 'g'); 
```

**编辑：** @shoelzer 为您收到的错误提供了正确的解释。

# ruby - 处理库版本

> ID：14365277
> 
> 赞同：0
> 
> 时间：2013-01-16T18:33:12.150
> 
> 标签：ruby, versioning

我正在尝试实现一个库，该库提供了一种与服务器通信的统一方式，该服务器正在将其 API 调用从一个版本更改为另一个版本。我计划以这种方式实现它：

连接.rb：

```
class Connect
    def self.getConn(params)
        case params[:version]
            when '4.0' then return Connect4.new(params)
            when '5.0' then return Connect5.new(params)
            else 'Version not supported.'
        end

    end 
end

class Connect4
    def initialize(params)
        # Code for v4.
    end 
end

class Connect5
    def initialize(params)
        # Code for v5.
    end 
end 
```

测试.rb：

```
require 'connect'

conn = Connect.getConn(:version => '4.0')

puts conn 
```

我认为它会起作用，但我对 ruby​​ 还是很陌生，可能有一些我没有考虑的问题。是否有处理此类“挑战”的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:47:55.387

我不认为你的方法有什么问题，它当然可以工作。另一方面，如果您的 API 有多个入口点，那么将版本传递给每个入口点会让人感觉有点难看。你可以用一些全局设置来解决它，但我们不要去那里......

[Twitter 的 Cassandra](https://github.com/twitter/cassandra) gem 有一个有趣的方法，而不是传递版本号，您需要一个不同的子库（[docs](https://github.com/twitter/cassandra#cassandra-version)）：

```
require 'cassandra' # default version
require 'cassandra/1.0' # 1.0 version 
```

[这在与Bundler](http://gembundler.com/)一起使用时特别有用，因为您可以像这样选择版本

```
gem "cassandra", require: "cassandra/1.0" 
```

你完成了整个应用程序。

# wix - WixIIsExtension 的 Wix 本地化失败，

> ID：14365280
> 
> 赞同：0
> 
> 时间：2013-01-16T18:33:16.620
> 
> 标签：wix, wix3.5, wix-extension

我正在尝试为本地化支持创建我的设置，但在构建时出现以下错误

错误 17 本地化变量 !(loc.msierrIISCannotConnect) 未知。请确保已定义变量。

当我在文化中添加 en-US 时，我不会出现上述错误，但是当我添加另一种文化 es-ES 时，就会出现上述错误。

请帮我解决这个错误

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-11T02:07:19.357

这意味着语言环境尚未定义在 WixIIsExtension 中某处使用的字符串。因此，您可以在 es-ES 语言环境的 wxl 文件中定义它（根据您的问题，您可能已经有了这样的文件）。

我试图创建一个中立的语言环境安装程序，这样我就不会将安装程序放入我的 TargetOutput 目录中的 en-US 目录中。换句话说，我想查看 bin\debug\installer.msi 而不是 bin\debug\en-us\installer.msi。中性语言环境有数百个这样的缺失字符串。在 regex replace-all 的帮助下，我在我的 wxl 文件中将它们全部定义为空。但是，解决了这个问题，我现在得到了 light.exe 遇到的丢失的位图。例如：

`E:\delivery\Dev\wix36_public\src\ext\UIExtension\wixlib\ExitDialog.wxs(19,0): error LGHT0204: ICE17: Bitmap: '' for Control: 'Bitmap' of Dialog: 'ExitDialog' not found in Binary table`

对于中立语言环境，大约有 25 个。我不知道 es-ES，或者如果添加了这些，还会缺少什么。

对于 WixIIsExtension 的非美国语言环境，看起来这些需要在 WiX 代码本身中完成。

# ios - 如何检查 NSMutableArray 数组中是否已经有（__bridge id）对象

> ID：14365282
> 
> 赞同：3
> 
> 时间：2013-01-16T18:33:21.473
> 
> 标签：ios, objective-c, nsmutablearray, compare, abrecordref

我正在尝试将 ABRecordRef 项添加到我的 NSMutableArray 中。刚刚了解到需要使用 (_bridge id) 将 C TypeDef 转换为 Objective-C id 类型。因此，在将新项目添加到数组之前，我想检查对象是否已经在数组中。因此，我尝试使用 [nsmutablearray containsObject] 但它似乎不起作用。重复项仍会添加到数组中。你知道这里有什么问题吗？

```
-(BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person{
    if (![_buddiesList containsObject:(__bridge id)person]) {
        [_buddiesList addObject:(__bridge id)person];
        NSLog(@"Added");
    }
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:44:47.470

没有 NS 等效项`ABRecordRef`，`-containsObject:`只需调用`-isEqual:`其所有对象即可确定是否已包含重复项，因此您的方法行不通。

我建议编写一个包装类`ABRecordRef`并在那里实现你自己的`-isEqual:`方法。

**更新：**
正如@omz 所指出的，它*确实*有效，因为`CFEqual()`被调用了，谢谢！不过，在 ABRecordRef 周围使用包装类仍然是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:51:40.697

您的`containsObject:`调用未能报告重复的原因是`NSArray`使用该`NSObject`方法`-isEqual:`来确定相等性，而 CF 类型如`ABRecordRef`没有此方法。我们需要找到一种更好的方法来确定平等。

最有效的方法是在 AddressBook API 周围使用 Objective-C 包装器，将每条记录转换为*真正的* `NSObject`记录，而不仅仅是桥接转换它。[Jim Dovey 的 iPhoneContacts 项目](https://github.com/AlanQuatermain/iPhoneContacts)是一个很好的解决方案。要在此之上构建一个相等性测试方法，只需添加一个`isEqual:`使用下面显示的技术来比较记录 ID 的方法。

或者，您可以保持原样，但每次要添加记录时对数组进行线性扫描。像这样的东西：

```
BOOL foundMatch = NO;
for(id buddy in self.buddiesList)
{
    if(ABRecordGetRecordID(buddy) == ABRecordGetRecordID(person))
    {
        foundMatch = YES;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T19:07:42.177

您可以尝试对照 isKindOfClass 检查您的数组对象。

例如：

if ([[ *buddiesList objectAtIndex:i] isKindOfClass: (* _bridge id)person]) {

做一些事情；

}

# android - 以编程方式使用 Adb

> ID：14365285
> 
> 赞同：-3
> 
> 时间：2013-01-16T18:33:26.347
> 
> 标签：android, adb, root

如何使用 Rooted 设备以编程方式使用`Runtime.getRuntime().exe`.

我应该使用 Pull、Push 还是 Cat 命令以及如何使用？

它会影响共享首选项或任何东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:49:14.660

尝试

```
Runtime.getRuntime().exec("pm install -r "/path/to/yourfilename.apk";) 
```

用法 pm install [-l] [-r] [-t] [-i INSTALLER_PACKAGE_NAME] [-s] [-f] [--algo --key --iv ] PATH

选项 ：

```
-l: install the package with FORWARD_LOCK.
-r: reinstall an exisiting app, keeping its data.
-t: allow test .apks to be installed.
-i: specify the installer package name.
-s: install package on sdcard.
-f: install package on internal flash. 
```

根据您对 -r 参数的使用情况，它将影响共享首选项 xml 文件（用于不丢失）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T20:44:07.150

好吧，您需要拉取实际的 apk，而不是里面的应用程序文件夹`/data`
但是在您获得 APK 之后，您可以使用命令：
`adb push myapp.apk /system/app`
将其推送到`/system/app`文件夹中。当您将 apk 推送到 时`/data/app`，它会将其安装为系统应用程序
不要这样做`adb install myapp.apk`，否则它将作为普通应用程序安装
要实现此目的，请将上述命令与`Runtime.exec()`或查找如何使用[ProcessBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)类

# c - 为什么 futex 在唤醒线程时比互斥锁花费更长的时间？

> ID：14365288
> 
> 赞同：2
> 
> 时间：2013-01-16T18:33:39.357
> 
> 标签：c, linux, multithreading, mutex, futex

我试图测量线程调用唤醒睡眠线程时的延迟。既然有人说许多同步指令是在 futex 之上开发的，我希望 futex 总是更快。但是，我的测试给出了相反的结果。我想知道我是否做错了什么，或者这实际上是一个事实。

这是我的测试的详细信息：

*   进程已被设置为与特定核心的亲和性
*   时间与 RDTSC() 指令返回的数字进行比较
*   创建了2个线程，其中唤醒线程2具有更高的FIFO优先级

Thread1 通过解锁互斥锁来发送信号，因此 Thread2 应该在下一个计划中唤醒。thread1 上的 sleep(1) 是为了确保 thread2 在调用 mutex_unlock 时休眠等待互斥锁。

```
void *Thread1(void *dummy)
{
    while(1)
    {
        pthread_mutex_lock( &mutx );
        sleep(1);
        t1 = rdtsc();
        pthread_mutex_unlock( &mutx );
        pthread_yield();
    }
    return NULL;
}

void *Thread2(void *dummy)
{
    while(1)
    {
        pthread_mutex_lock( &mutx );
        t2 = rdtsc();
        if(t1>0)
        {
                    // print out the result
            cout << t2-t1 << endl;
            t1 = 0;
        }
        pthread_mutex_unlock( &mutx );
        pthread_yield();
    }
    return NULL;
} 
```

通过用 futex 系统调用替换 mutex 来完成类似的测试：

```
void *Thread1(void *dummy)
{
    while(1)
    {
        sleep(1);
        t1 = rdtsc();
    syscall(SYS_futex, &futx, FUTEX_WAKE, 1);
        pthread_yield();
    }
    return NULL;
}

void *Thread2(void *dummy)
{
    while(1)
    {
        syscall(SYS_futex, &futx, FUTEX_WAIT, 0);
        t2 = rdtsc();
        if(t1>0)
        {
            cout << t2-t1 << endl;
            t1 = 0;
        }
        pthread_yield();
    }
    return NULL;
} 
```

mutx 和 futx 都被声明为全局的。在我的 Core i7 930 机器上，使用 fedora17，mutex 的唤醒速度始终比 futex 快 5-10%。测试应用程序由 gcc 4.7 在默认设置下编译。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:50:59.507

基于 Futex 的互斥锁实现不对任何锁定/解锁操作执行系统调用，但仅在需要时执行。

当你用无条件的 futex 系统调用替换互斥锁/解锁时，它需要更慢。

# android - 按钮不显示按下状态？

> ID：14365289
> 
> 赞同：1
> 
> 时间：2013-01-16T18:33:40.277
> 
> 标签：android, android-button, android-styles

当我单击按钮时，它没有显示按下状态。请帮忙。谢谢

我的代码：

```
 <item name="android:textColor" >#000</item>
    <item name="android:textSize" >20dp</item>
    <item name="android:background">@drawable/note_icon</item>

</style> 
```

按钮

```
 android:id="@+id/createnote"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/Createnote"
    style="@style/Create_text" /> 
```

这是我的布局和代码：

createnote.setOnClickListener(new OnClickListener(){

```
 public void onClick(View v) {
    // TODO Auto-generated method stub

        //  v.setPressed(true);

    Intent intent = new Intent(getApplicationContext(), Add_Task.class);
    startActivity(intent);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:26:08.590

您是否创建了一个选择器来定义按下按钮时的行为？

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item 
        android:state_enabled="false"
        android:drawable="@drawable/btn_XXXX" />
   <item 
        android:state_pressed="true" 
        android:state_enabled="true"
        android:drawable="@drawable/btn_YYYY" />
   <item 
        android:state_focused="true" 
        android:state_enabled="true"
        android:drawable="@drawable/btn_ZZZZ" />
    <item 
        android:state_enabled="true"
        android:drawable="@drawable/btn_WWWWW" />
</selector> 
```

# android - 如何从 JSON 嵌套数组中检索值？

> ID：14365292
> 
> 赞同：0
> 
> 时间：2013-01-16T18:33:46.193
> 
> 标签：android, json, google-geocoding-api

我在我的 Android 应用程序中使用[这个链接。](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)我必须从地址组件 JSON 数组中检索长名称键的值。

以下是 JSON 结构：

```
 {
   "results":[
      {
         "address_components":[
            {
               "long_name":"285",
               "short_name":"285",
               "types":[
                  "street_number"
               ]
            },
            {
               "long_name":"Bedford Avenue",
               "short_name":"Bedford Ave",
               "types":[
                  "route"
               ]
            },
            {
               "long_name":"Williamsburg",
               "short_name":"Williamsburg",
               "types":[
                  "neighborhood",
                  "political"
               ]
            },
            {
               "long_name":"Brooklyn",
               "short_name":"Brooklyn",
               "types":[
                  "sublocality",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"New York",
               "types":[
                  "locality",
                  "political"
               ]
            },
            {
               "long_name":"Kings",
               "short_name":"Kings",
               "types":[
                  "administrative_area_level_2",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            },
            {
               "long_name":"11211",
               "short_name":"11211",
               "types":[
                  "postal_code"
               ]
            }
         ],
         "formatted_address":"285 Bedford Avenue, Brooklyn, NY 11211, USA",
         "geometry":{
            "location":{
               "lat":40.71412890,
               "lng":-73.96140740
            },
            "location_type":"ROOFTOP",
            "viewport":{
               "northeast":{
                  "lat":40.71547788029149,
                  "lng":-73.96005841970849
               },
               "southwest":{
                  "lat":40.71277991970850,
                  "lng":-73.96275638029151
               }
            }
         },
         "types":[
            "street_address"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"Grand St - Bedford Av",
               "short_name":"Grand St - Bedford Av",
               "types":[
                  "bus_station",
                  "transit_station",
                  "establishment"
               ]
            },
            {
               "long_name":"Williamsburg",
               "short_name":"Williamsburg",
               "types":[
                  "neighborhood",
                  "political"
               ]
            },
            {
               "long_name":"Brooklyn",
               "short_name":"Brooklyn",
               "types":[
                  "sublocality",
                  "political"
               ]
            },
            {
               "long_name":"Kings",
               "short_name":"Kings",
               "types":[
                  "administrative_area_level_2",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            },
            {
               "long_name":"11211",
               "short_name":"11211",
               "types":[
                  "postal_code"
               ]
            }
         ],
         "formatted_address":"Grand St - Bedford Av, Brooklyn, NY 11211, USA",
         "geometry":{
            "location":{
               "lat":40.7143210,
               "lng":-73.9611510
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":40.71566998029149,
                  "lng":-73.95980201970849
               },
               "southwest":{
                  "lat":40.71297201970850,
                  "lng":-73.96249998029151
               }
            }
         },
         "types":[
            "bus_station",
            "transit_station",
            "establishment"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"Grand St - Bedford Av",
               "short_name":"Grand St - Bedford Av",
               "types":[
                  "bus_station",
                  "transit_station",
                  "establishment"
               ]
            },
            {
               "long_name":"Williamsburg",
               "short_name":"Williamsburg",
               "types":[
                  "neighborhood",
                  "political"
               ]
            },
            {
               "long_name":"Brooklyn",
               "short_name":"Brooklyn",
               "types":[
                  "sublocality",
                  "political"
               ]
            },
            {
               "long_name":"Kings",
               "short_name":"Kings",
               "types":[
                  "administrative_area_level_2",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            },
            {
               "long_name":"11211",
               "short_name":"11211",
               "types":[
                  "postal_code"
               ]
            }
         ],
         "formatted_address":"Grand St - Bedford Av, Brooklyn, NY 11211, USA",
         "geometry":{
            "location":{
               "lat":40.7146840,
               "lng":-73.9615630
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":40.71603298029149,
                  "lng":-73.96021401970850
               },
               "southwest":{
                  "lat":40.71333501970850,
                  "lng":-73.96291198029151
               }
            }
         },
         "types":[
            "bus_station",
            "transit_station",
            "establishment"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"Bedford Av - Grand St",
               "short_name":"Bedford Av - Grand St",
               "types":[
                  "bus_station",
                  "transit_station",
                  "establishment"
               ]
            },
            {
               "long_name":"Williamsburg",
               "short_name":"Williamsburg",
               "types":[
                  "neighborhood",
                  "political"
               ]
            },
            {
               "long_name":"Brooklyn",
               "short_name":"Brooklyn",
               "types":[
                  "sublocality",
                  "political"
               ]
            },
            {
               "long_name":"Kings",
               "short_name":"Kings",
               "types":[
                  "administrative_area_level_2",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            },
            {
               "long_name":"11211",
               "short_name":"11211",
               "types":[
                  "postal_code"
               ]
            }
         ],
         "formatted_address":"Bedford Av - Grand St, Brooklyn, NY 11211, USA",
         "geometry":{
            "location":{
               "lat":40.714710,
               "lng":-73.9609990
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":40.71605898029150,
                  "lng":-73.95965001970849
               },
               "southwest":{
                  "lat":40.71336101970850,
                  "lng":-73.96234798029150
               }
            }
         },
         "types":[
            "bus_station",
            "transit_station",
            "establishment"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"Williamsburg",
               "short_name":"Williamsburg",
               "types":[
                  "neighborhood",
                  "political"
               ]
            },
            {
               "long_name":"Brooklyn",
               "short_name":"Brooklyn",
               "types":[
                  "sublocality",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"New York",
               "types":[
                  "locality",
                  "political"
               ]
            },
            {
               "long_name":"Kings",
               "short_name":"Kings",
               "types":[
                  "administrative_area_level_2",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            }
         ],
         "formatted_address":"Williamsburg, Brooklyn, NY, USA",
         "geometry":{
            "bounds":{
               "northeast":{
                  "lat":40.72517730,
                  "lng":-73.9364980
               },
               "southwest":{
                  "lat":40.69793290,
                  "lng":-73.96984499999999
               }
            },
            "location":{
               "lat":40.70644610,
               "lng":-73.95361629999999
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":40.72517730,
                  "lng":-73.9364980
               },
               "southwest":{
                  "lat":40.69793290,
                  "lng":-73.96984499999999
               }
            }
         },
         "types":[
            "neighborhood",
            "political"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"11211",
               "short_name":"11211",
               "types":[
                  "postal_code"
               ]
            },
            {
               "long_name":"Brooklyn",
               "short_name":"Brooklyn",
               "types":[
                  "sublocality",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"New York",
               "types":[
                  "locality",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            }
         ],
         "formatted_address":"Brooklyn, NY 11211, USA",
         "geometry":{
            "bounds":{
               "northeast":{
                  "lat":40.72800890,
                  "lng":-73.92072990
               },
               "southwest":{
                  "lat":40.69763590,
                  "lng":-73.97616690
               }
            },
            "location":{
               "lat":40.71800360,
               "lng":-73.96537150000002
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":40.72800890,
                  "lng":-73.92072990
               },
               "southwest":{
                  "lat":40.69763590,
                  "lng":-73.97616690
               }
            }
         },
         "types":[
            "postal_code"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"Kings",
               "short_name":"Kings",
               "types":[
                  "administrative_area_level_2",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            }
         ],
         "formatted_address":"Kings, NY, USA",
         "geometry":{
            "bounds":{
               "northeast":{
                  "lat":40.7394460,
                  "lng":-73.83336509999999
               },
               "southwest":{
                  "lat":40.56956370,
                  "lng":-74.04397190
               }
            },
            "location":{
               "lat":40.65287620,
               "lng":-73.95949399999999
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":40.7394460,
                  "lng":-73.83336509999999
               },
               "southwest":{
                  "lat":40.56956370,
                  "lng":-74.04397190
               }
            }
         },
         "types":[
            "administrative_area_level_2",
            "political"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"Brooklyn",
               "short_name":"Brooklyn",
               "types":[
                  "sublocality",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"New York",
               "types":[
                  "locality",
                  "political"
               ]
            },
            {
               "long_name":"Kings",
               "short_name":"Kings",
               "types":[
                  "administrative_area_level_2",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            }
         ],
         "formatted_address":"Brooklyn, NY, USA",
         "geometry":{
            "bounds":{
               "northeast":{
                  "lat":40.7394460,
                  "lng":-73.83336509999999
               },
               "southwest":{
                  "lat":40.5510420,
                  "lng":-74.056630
               }
            },
            "location":{
               "lat":40.650,
               "lng":-73.950
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":40.7394460,
                  "lng":-73.83336509999999
               },
               "southwest":{
                  "lat":40.5510420,
                  "lng":-74.056630
               }
            }
         },
         "types":[
            "sublocality",
            "political"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"New York",
               "short_name":"New York",
               "types":[
                  "locality",
                  "political"
               ]
            },
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            }
         ],
         "formatted_address":"New York, NY, USA",
         "geometry":{
            "bounds":{
               "northeast":{
                  "lat":40.91524140,
                  "lng":-73.70027209999999
               },
               "southwest":{
                  "lat":40.4959080,
                  "lng":-74.25908790
               }
            },
            "location":{
               "lat":40.71435280,
               "lng":-74.00597309999999
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":40.91524140,
                  "lng":-73.70027209999999
               },
               "southwest":{
                  "lat":40.4959080,
                  "lng":-74.25573489999999
               }
            }
         },
         "types":[
            "locality",
            "political"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"New York",
               "short_name":"NY",
               "types":[
                  "administrative_area_level_1",
                  "political"
               ]
            },
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            }
         ],
         "formatted_address":"New York, USA",
         "geometry":{
            "bounds":{
               "northeast":{
                  "lat":45.0158650,
                  "lng":-71.85626990
               },
               "southwest":{
                  "lat":40.4959080,
                  "lng":-79.76214379999999
               }
            },
            "location":{
               "lat":43.29942850,
               "lng":-74.21793260000001
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":45.01261130,
                  "lng":-71.85626990
               },
               "southwest":{
                  "lat":40.4959080,
                  "lng":-79.76214379999999
               }
            }
         },
         "types":[
            "administrative_area_level_1",
            "political"
         ]
      },
      {
         "address_components":[
            {
               "long_name":"United States",
               "short_name":"US",
               "types":[
                  "country",
                  "political"
               ]
            }
         ],
         "formatted_address":"United States",
         "geometry":{
            "bounds":{
               "northeast":{
                  "lat":71.3898880,
                  "lng":-66.94976079999999
               },
               "southwest":{
                  "lat":18.91106420,
                  "lng":172.45469660
               }
            },
            "location":{
               "lat":37.090240,
               "lng":-95.7128910
            },
            "location_type":"APPROXIMATE",
            "viewport":{
               "northeast":{
                  "lat":49.380,
                  "lng":-66.940
               },
               "southwest":{
                  "lat":25.820,
                  "lng":-124.390
               }
            }
         },
         "types":[
            "country",
            "political"
         ]
      }
   ],
   "status":"OK"
} 
```

我的 Java 源代码：

[带有输出链接的源代码](http://pastebin.com/WujskkAJ)

我正在获取印度，但我必须在输出中打印**Vasant Vihar**。

谁能帮我一些代码来实现这一点？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:51:31.073

我宁愿推荐使用[GSON](http://code.google.com/p/google-gson/)来解析 bean。您可以选择您感兴趣的领域。

以下是我建议您使用的 bean：

响应类：

```
public class Response {
private Result [] results;
// getters and setters(optional)
} 
```

结果类：

```
public class Result{
private AddressComponent[] addressComponents;
// getters and setters(optional)
} 
```

地址组件类：

```
public class AddressComponent {
private String longName;
private String shortName;
private String [] types;
// getters and setters (optional)
} 
```

以下是您的解析方式：

```
String str = "<the ugly json you pasted>";
Gson gson = new GsonBuilder()
     .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES )
     .create(); 
```

**GSON 默认忽略所有没有对应 Java 字段的 json 属性。**

响应响应 = gson.fromJson(str, Response .class);

您可以像这样访问感兴趣的领域：

```
AddressComponent [] AddressComponents = response.getResults()[1].getAddressComponent(); 
```

好的，从现在开始，您可以随意使用该对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:41:36.170

`long_name`从当前 json 字符串获取为：

```
JSONObject json=new JSONObject("YOUR_JSON_STRING");

 JSONArray ja = json.getJSONArray("results");

for (int i = 0; i < ja.length(); i++) {

  JSONObject jo = ja.getJSONObject(i);

  JSONArray jaa = jo.getJSONArray("address_components");
  for (int j = 0; j < jaa.length(); j++) {

    JSONObject jotwo = jaa.getJSONObject(j);

       //long_name
       String str_long_name=jotwo.getString("long_name");
   }

} 
```

# c - 函数内部的第二个 scanf 不起作用....程序不会在第二个 scanf 处停止？

> ID：14365296
> 
> 赞同：1
> 
> 时间：2013-01-16T18:33:54.200
> 
> 标签：c, scanf

```
 #include<stdio.h>
   #include<conio.h>
   void sstring();
    int main()
    {
     char ch1[10],ch2;
     printf("Enter the value of first character : ");
     scanf("%s",&ch1);
     sstring(); 

     getch();
     return 0; 
    } 

    void sstring()
    {    char ch2;
         printf("Enter the value of second character : ");
         scanf("%c",&ch2);   

         printf("Got the second character"); 
    } 
```

第二个 scanf 内部函数不起作用....程序不会在第二个 scanf 处停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:41:05.030

首先，那不是因为第二个 scanf 在函数内部。

那是因为第一个 scanf （您输入 enter）的 0xA （返回）仍在标准输入缓冲区中。请注意，%s 参数不会读取输入的最终“\n”。为了不影响以后可能对 scanf 的调用，您应该始终读取字符串和行分隔符。

```
char string[10], linedelim;
scanf("%s%c", string, &linedelim); 
```

你的例子又来了，现在正在工作。

```
#include<stdio.h>
#include<conio.h>

void sstring();
int main()
{
 char ch1[10],ch2, linedelim;
 printf("Enter the value of first character : ");
 // read both the string and line delim
 scanf("%s%s",&ch1, &linedelim);
 sstring(); 
 getch();
 return 0; 
} 

void sstring()
{    char ch2;
     printf("Enter the value of second character : ");
     // read the second input
     scanf("%c",&ch2);   
     printf("Got the second character"); 
} 
```

另请注意，您的示例非常脆弱，因为当用户输入超过 10 个字符时，它很容易导致缓冲区溢出。想象一下可以轻松破坏您的程序的以下命令行：

```
$ perl -e 'print "A" x 1000000' | ./a.out 
```

比使用 scanf() 从输入读取字符串更好的方法可能是使用 fgets()，因为您可以控制输入的大小。

# hibernate - 我们可以使用 JPA2 注释来缓存关联吗？

> ID：14365297
> 
> 赞同：10
> 
> 时间：2013-01-16T18:33:59.280
> 
> 标签：hibernate, jpa, jpa-2.0, second-level-cache

我现在在我的实体上使用 JPA2 @Cacheable 注释，一切运行良好。

我现在需要缓存一个 ManyToOne 关联。

在经典的 Hibernate 中，有必要用 @Cache 注释关联。

```
@org.hibernate.annotations.Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)
private Set<Student> supervisionGroup; 
```

这有效。但似乎我们不能在实体本身以外的任何东西上使用 JPA2 @Cacheable 注释。

我是否遗漏了什么，或者 JPA 委员会太模糊而没有意识到关联必须与实体一样被缓存？当然它不能是暗淡的选择？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:24:46.050

我想经过一些研究，我能够回答我自己的问题。关键是 Hibernate 将 2LC 中的对象脱水，这将影响您是否需要显式缓存关联。

如果我遗漏了任何内容或有任何细节错误，请添加更多详细信息。

这是一个简化的类结构：

```
@Entity
@Cacheable
public class Tutor
{
   @OneToMany(mappedBy="tutor")
   private Set<Student> students;
}

@Entity
@Cacheable
public class Student
{
   @ManyToOne(fetch=FetchType.LAZY)
   @JoinColumn(name="TUTOR_FK")
   private Tutor tutor;
} 
```

## 对于休眠

二级缓存 (2LC) 以脱水形式存储实体，例如：

```
{1=CacheEntry(Tutor)[1, Jack Daw]}
{1=CacheEntry(Student)[1, Jane Smith, 1]} 
```

Student 数据中的最后一个 1 是辅导的外键。

因此，如果您有对 Student id 1 的引用并遵循对导师的引用，我们会得到缓存命中，因为外键在缓存中。不需要额外的选择。

但是，如果您采用另一种方式，在 Tutor 上调用 getStudents()，则 2LC 中没有外键，因此需要选择。（一旦选择完成，hibernate 就有了 ids 并且可以开始点击 2LC）。

为避免这种情况，您需要将旧的 org.hibernate.annotations.Cache 注释添加到 @OneToMany 关系。

## 对于 EclipseLink

我手头没有 EclipseLink 安装，因此无法对此进行测试，但我知道 EclipseLink 以原始对象图的形式存储 2LC 数据，因此上述内容不相关。根据 Chris 的回答，实体与其引用一起缓存，因此不需要进一步注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:44:57.893

JPA 的缓存用于实体对象本身。只要实体被缓存，所有引用也是如此。引用的实体对象虽然会有自己的缓存选项。

# sql - 如何设置查询之间的时间间隔？

> ID：14365299
> 
> 赞同：0
> 
> 时间：2013-01-16T18:34:13.850
> 
> 标签：sql, sql-server, sql-server-2008, tsql

需要在查询之间将时间间隔设置为 5 秒。要知道表处于更新状态，尝试以 5 秒的间隔两次获取行数。如何在查询之间设置时间间隔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:35:33.597

不太了解您的所有问题文本，但是

```
WAITFOR DELAY '00:00:05' 
```

会给你5秒的延迟

# image - Chrome 未在网站上显示固定导航 - Mac 和 PC

> ID：14365307
> 
> 赞同：0
> 
> 时间：2013-01-16T18:34:41.727
> 
> 标签：image, google-chrome

在 Mac 和 PC 上的 Chrome 中查看此站点时：http: [//jonimi.com](http://jonimi.com) - 顶部区域（固定导航栏）不可见。我真的无法找到任何关于为什么会发生这种情况的信息。它适用于除 Chrome 之外的所有其他浏览器。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:52:18.310

摆脱

```
#header_wrapper
{position: fixed;} 
```

# php - 把它变成一堂课

> ID：14365314
> 
> 赞同：0
> 
> 时间：2013-01-16T18:34:56.450
> 
> 标签：php, oop

**问题 1** 我在下面有这段代码，而且我一直听到人们谈论使用大量的类。将下面的代码作为一个类对我有什么好处（我已经将数据转换为对象），我将如何去做？（我是 OOP PHP 新手）。

```
try {

    $connection = new PDO(DATA, USER, PASSWORD);

    $connection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    $connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

} catch (PDOException $error) {

    PDOcrash($error);

}

// Scrubbing remember data
$_POST['remember'] = (int)$_POST['remember'];

// Query the database for the unique salt
$query = $connection->prepare("SELECT id, salt FROM {$_SESSION['environment']->database}.system_user WHERE username = :username LIMIT 1");

$query->execute(array(':username' => $_POST['username']));

$security = $query->fetch(PDO::FETCH_OBJ);

$query->closeCursor();

// Form the hash using sha1 alrorithm
$_POST['password'] = sha1(sha1($security->salt) . sha1($_POST['password']));

$query = $connection->prepare("SELECT id, centre, reference, first_name, last_name FROM {$_SESSION['environment']->database}.system_user WHERE username = :username AND password = :password");

$query->execute(array(':username' => $_POST['username'], ':password' => $_POST['password']));

$_SESSION['user'] = $query->fetch(PDO::FETCH_OBJ);

$query->closeCursor(); 
```

**第 2 期**

对于此代码块：

```
try {

    $connection = new PDO(DATA, USER, PASSWORD);

} catch (PDOException $error) {

    PDOcrash($error);

} 
```

我正在使用常量来定义我的连接详细信息，但它们似乎只有在我直接在页面上定义它们时才有效。我认为常数会在整个系统中保持不变。如果我将我的`define()`函数移动到之前遇到的页面，它们就不起作用。这是否意味着常量的范围是单个页面？我还听说您可以在一些单独的 apache 文档中定义连接信息，这是一种更安全的方法。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:47:42.517

不编写 OOP 代码本身并没有错，但是通过使用正确的 OOP 样式编码获得的好处可能*非常*有用。它将使您的代码更易于阅读、维护、调试和**测试**！

PHPs 变量（除了一个超全局变量）和常量仅对每个请求有效。对于您要执行的操作，我什至不会使用常量。记住由`define()`is *global*创建的常量。如果您在任何地方听到/看到 global，那么在大多数情况下，您可能做错了 OOP。

在您的情况下（如果您想采用 OOP 路线）我会做的是创建一个引导文件，您可以在其中设置数据库连接。之后，您可以轻松地[将数据库对象](http://misko.hevery.com/2008/11/11/clean-code-talks-dependency-injection/)注入到需要它们的其他类/方法中。

另一件事请*请*使用[密码散列库](https://github.com/ircmaxell/password_compat)。这样可以防止你搞砸了。我刚刚链接的密码库将在 PHP5.5 中实现。但是在你运行那个版本之前，请使用那个库，因为你的散列真的不是那么安全。`sha1`不适合散列密码，因为它意味着要快。至少使用`bcrypt`，但请再次使用链接密码库，因为太容易搞砸密码的散列。

另外：以防万一您使用 MySQL PDO 驱动程序[禁用模拟准备语句](https://stackoverflow.com/a/60496/508666)。

最后要真正回答你的问题：不，简单地将代码移动到一个类没有任何好处。如果你这样做而不考虑你在做什么或[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))，那么你的类只不过是一个花哨的命名空间。简单地将代码移动到一个类中并不能神奇地使它成为 OOP。

**更新**

# 引导文件

引导文件是包含在每个请求中的文件。它可用于设置应用程序运行所需的东西。一个例子（对于大多数（Web）应用程序）是数据库连接。但您也可以使用引导文件来设置一些 PHP 设置，例如启用错误报告。以及非常有用的自动加载。

在我的应用程序中，引导文件始终是第二个被访问的文件。每个请求的第一个`index.php`文件是文档根目录中的一个简单文件，它只做一件事：加载引导文件。所有其他 PHP 文件将保存在文档根目录之外。这将阻止您的 PHP 代码出于任何原因出现。服务器配置错误或其他。此设置看起来有点像以下目录结构：

```
/src
/app
  /public
    /index.php
  /bootstrap.php 
```

`index.php`文档根目录中的文件唯一包含的是：

```
<?php

require __DIR__ . '/../bootstrap.php'; 
```

之后，您可能会有一个类似于以下内容的引导文件：

```
<?php

error_reporting(E_ALL);
// note that for production we would disable the displaying of errors and 
// enable logging of errors
ini_set('display_errors', 1);

require_once __DIR__ . '/../src/bootstrap.php'

// btw also don't forget to set the encoding
$dbConnection = new PDO('DSN', 'username', 'password');

// now we can simply call a class and pass the database object as an argument
$user = new User($dbConnection);
$user->changePassword('new password');

// because we still have the database object we can simply reuse it for some other class
$page = new Page($dbConnection);
echo $page->render('home'); 
```

如您所见，我们可以继续将数据库连接传递给需要它的类/方法。这使我们能够轻松地将数据库连接换成其他东西来加快我们的单元测试。这种松散耦合还确保我们可以轻松地将数据库对象交换为其他对象，以防我们需要其他存储机制。

如果您想在实践中看到上述大部分内容，可以查看我目前正在从事[的项目。](https://github.com/PeeHaa/Uploader)如果您仍然想知道为什么 OOP 只有好处，您应该观看这些系列：

[http://www.g-truc.net/post-0182.html](http://www.g-truc.net/post-0182.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:27:42.153

# 对象

基本上，对象只是常用函数和变量的集合，您可以将它们打包成单独的单元，以使您的生活更轻松。您的代码在数据库查询方面似乎有点重复，您可能会受益于围绕 PDO 编写/使用包装类来简化代码。

就个人而言，我已经使用[这样](http://sammitch.ca/2012/11/simple-php-pdo-wrapper-class/)的东西几年了，它对我很有帮助。您可能会发现它可以作为直接替代品，或者作为构建您自己的示例。

# 证书

我通常定义我的数据库凭据的方式是在一个专用文件中的一个数组中，并在设置连接后立即创建`unset()`数组。IE：

## inc.db_cfg.php

```
<?php
$conn_info = array(
  'hostname' => 'mysql.domain.com',
  'username' => 'bob',
  'password' => '1234',
  'dbname' => 'mydb'
); 
```

## 索引.php

```
<?php
require('inc.db_cfg.php');
$uri = sprintf("mysql:host=%s;dbname=%s", $conn_info['hostname'], $conn_info['dbname']);
$this->dbh = new PDO($uri, $conn_info['username'], $conn_info['password']);
unset($conn_info, $uri); 
```

您希望在变量中而不是直接在构造函数中定义数据库凭据的主要原因是，如果连接失败并且您的脚本抛出异常或错误，则堆栈跟踪/错误消息可能会打印出包含您的用户名的原始代码行、密码、主机名和您最可能希望保持私密的其他位。

此外，您希望确保您的凭据存储在不会以有人请求的原始文本输出的文件类型中。例如，早在“早期”人们会简单地命名他们的包含文件`db_cfg.inc`或类似的东西。你可以`include('db_cfg.inc');`在你的代码中没有问题，但是如果有人请求，Apache 的默认配置只是将文件作为纯文本提供`http://mysite.com/db_cfg.inc`。

最后，对凭证没有特别*要求*`unset()`，但它不会伤害并满足我的偏执狂。

# 密码哈希

SHA1 已经从根本上被破坏了一段时间，您可以使用它[`crypt()`](http://ca2.php.net/manual/en/function.crypt.php)来访问更好的算法，如 SHA256 或 SHA512，或者从互联网上获取[bcrypt实现。](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:41:43.493

当您计划重用代码或能够重构代码以利用单个类的多个实例时，将现有代码转换为类最有用。在这个例子中，无法判断这样做是否真的对你有好处，但我的直觉是它不是。

类只有在使您的代码更加清晰和易于维护时才有用。对于像 PHP 这样的语言，您经常编写脚本来处理与应用程序中的任何其他代码完全不同的一次性事情，将其转换为类可能没有意义。

至于常量，是的，它们只对定义它们的页面有效。PHP 的引擎只检查通过它运行的页面，因此它在解析和执行时不知道您在其他页面中定义的常量页面。对此的解决方案与您的数据库凭据问题有关。

一种选择是定义一个包含文件，其中定义了这些常量，然后包含在需要它们的每个页面中。像这样的东西：

page1.php

```
define(SOMETHING, 'value'); 
```

page2.php

```
require('page1.php');
echo SOMETHING; 
```

通过要求（包括，如果找不到文件则失败）page1.php，它在被解析和执行时被视为当前页面的一部分，因此其中包含的任何定义都将应用于该页面中的后续代码。

# python - Google Fusion Table 身份验证：HTTP 错误 400

> ID：14365315
> 
> 赞同：1
> 
> 时间：2013-01-16T18:34:56.153
> 
> 标签：python, python-2.7, google-fusion-tables

我尝试了这个 python[示例代码](https://developers.google.com/fusiontables/docs/samples/python)并收到以下错误：

回溯（最近一次通话最后）：

```
 File "C:\Users\rey\Documents\ProjectFolder\GoogleCharts\fusion.py", line 187, in <module>
    api_test.main()

  File "C:\Users\rey\Documents\ProjectFolder\GoogleCharts\fusion.py", line 55, in main
    serv_resp = urllib2.urlopen(serv_req)

  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)

  File "C:\Python27\lib\urllib2.py", line 406, in open
    response = meth(req, response)

  File "C:\Python27\lib\urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)

  File "C:\Python27\lib\urllib2.py", line 444, in error
    return self._call_chain(*args)

  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)

  File "C:\Python27\lib\urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)

HTTPError: HTTP Error 400: Bad Request 
```

我按照脚本中注释掉的部分中的说明设置身份验证，并认为我已正确完成设置。

要创建客户端 ID，我有以下设置：

```
Application type: Installed application

Installed application type: Other 
```

当我运行脚本时，程序会提示我输入 URL 参数。我应该为此输入什么？我在哪里可以找到更多示例？O 链接的示例是迄今为止我发现的唯一最新的 python 示例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:30:56.757

好吧，当提示输入 URL 参数时，按字面意思使用“code=”后面的 URL 参数。但这有点令人失望，因为我正在寻找一种方法来自动验证并从包含所有信息的本地文件创建融合表。有什么建议吗？

# html - 在网页中滑动

> ID：14365316
> 
> 赞同：-2
> 
> 时间：2013-01-16T18:35:00.197
> 
> 标签：html, css, slide

我正在寻找一种从右到左和向后滑动整个页面的简单方法，就像在 iOS 中一样。

我已经在这个网站上遇到了各种解决方案，但它们似乎都没有按照我想要的方式运行。还有一个两年前的问题[“Sliding An Entire Web Page”](https://stackoverflow.com/questions/4403004/sliding-an-entire-web-page)由其他人提出，但结果只是并排的两个页面。

* * *

我的主要问题是：

*   我不能将两个 DIV 并排设置一个隐藏，因为我有多个子页面。

*   我不能使用 jQuery Cycle 插件，因为它是一个响应式页面，不应该是静态的。

*   如果可能的话，我更喜欢不基于框架的解决方案。但是不要费心把我链接到[没有框架的 HTML Page Slide](http://css.dzone.com/articles/html-page-slide-without)。试过了，但和他的Demo不同的是，来自github的源代码不起作用。

* * *

**同样，我试图在整个页面中滑动，而不是页面中的内容。它不是一个移动网站。**

在此先感谢您，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:02:16.377

这是我的简单演示[http://jsbin.com/odivuz/3/edit](http://jsbin.com/odivuz/3/edit)，它使用 jQuery`animate`来实现页面转换。`body`宽度是在事件触发时计算的。

# javascript - 延迟到方法链中的下一个函数

> ID：14365318
> 
> 赞同：8
> 
> 时间：2013-01-16T18:35:00.730
> 
> 标签：javascript, delay, method-chaining

我正在尝试了解有关 Javascript 中的方法链接的更多信息，并想知道在没有 jQuery 的情况下创建延迟到链中的下一个函数的正确方法：

```
var foo = function() {
    this.delay = function(per) {
        setTimeout(start, per);
        return this;
    };
    this.start = function() {
        alert('start!');
    };
};

var bar = new foo().delay(1000).start(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T18:40:20.097

这并不容易做到。jQuery 使用[特定的队列系统](http://api.jquery.com/jQuery.queue/)。

假设您想在没有 jQuery 的情况下执行此操作，则必须自己实现一个队列。

例如这个非常简单的实现：

```
var foo = function() {
    var queue = [];
    var timer;
    this.delay = function(per) {
      timer = setTimeout(function(){
        timer = 0;
        var f;
        while (f = queue.shift()) f();
      }, per);
      return this;
    };
    this.addFunction = function(f) {
      if (timer) queue.push(f);
      else f();
      return this;
    };
    this.start = function() {
       this.addFunction(function(){alert('start')});
       return this;
    };
}; 
```

[示范](http://jsfiddle.net/vRZEu/)

* * *

如果你想链接另一个未在 foo 中定义的函数，你可以这样做

```
var bar = new foo().delay(3000).start()
    .addFunction(function(){alert("another chained one")}); 
```

[示范](http://jsfiddle.net/YFdfp/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T20:01:59.323

这将允许您链接多个延迟：http: [//jsfiddle.net/z4Uyf/1/](http://jsfiddle.net/z4Uyf/1/)

js：

```
var foo = function() {

  var delayed = [];
  var delayExecution = false;
  var delayCount = 0;   
  function handleDelay(func){
    delayed.push(func);
    delayCount++;
  }

   function delayDone(){
     delayExecution = false;
     if( typeof(delayed[0]) == "function" ){
       delayed[0]();
       delayed.splice(0,1);
     }
     if( delayed.length > 0 ) delayExecution = true;
   }

   this.delay = function(per) {
        delayExecution = true;
        setTimeout(function(){
          delayDone();
        }, per);
        return this;
   };

  this.start = function() {
    if( delayExecution ){
     handleDelay(arguments.callee);
    }else{
     alert("start!");
    }
    return this;
  };
};

var bar = new foo().delay(1000).start().delay(5000).start(); 
```

# cocos2d-iphone - cocos2d如何同时运行两个数组？

> ID：14365329
> 
> 赞同：1
> 
> 时间：2013-01-16T18:35:51.523
> 
> 标签：cocos2d-iphone

我创建了两个CCArray，CCArray *allieArray; CCArray *enemyArray;

我知道我是否在我的更新方法中这样做，

```
-(void)update:(ccTime)dt
{
    CCARRAY_FOREACH(allieArray, allie)
    {
        //do something1 here 
    }

    CCARRAY_FOREACH(enemyArray, enemy)
    {
        //do something 2 here
    }
} 
```

它会先经过“做某事1”，完成“做某事1”，然后再经过“做某事2”。现在我想让系统同时通过“做某事1”和“做某事2”，这有可能吗？

更新，只是为了不让你对我的帖子感到困惑，我的意思是多线程。伙计们干杯=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:36:58.797

也许你的意思是多线程。您可以在单独的线程中枚举每个数组，这意味着在双核设备上，每个数组都有自己的 CPU 可以工作，并且枚举结束得更快。

如果您的意思是说“两者都在同一时间”，那么这在物理上是无法保证的，而且尝试也不切实际。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:39:42.933

你的意思是嵌套的for循环？

```
CCARRAY_FOREACH(allieArray, allie)
{
    CCARRAY_FOREACH(enemyArray, enemy)
    {
        //do something to 1 and 2 here
    }
} 
```

# ruby-on-rails - ActionView::Template::Error (index.css 未预编译) Rails 3

> ID：14365332
> 
> 赞同：1
> 
> 时间：2013-01-16T18:36:02.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, passenger, production, precompile

我尝试使用 rails 3.2.9 与乘客一起运行我的应用程序，但收到此消息错误：

```
 ActionView::Template::Error (index.css isn't precompiled):
      <head>
              <meta charset="utf-8"/>
              <title>Web Account Manager</title>
              <%= stylesheet_link_tag    "index", :media => "screen" %>
              <%= javascript_include_tag "index" %>
              <%= csrf_meta_tags %>
      </head>
  app/views/layouts/index.html.erb:6:in `_app_views_layouts_index_html_erb__115336150744996096_14575540' 
```

我的文件production.rb：

```
 Wam::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5
end 
```

并且不运行..我尝试更改`config.serve_static_assets = false`为真实，`config.assets.compile = false`真实..`rake assets:clean RAILS_ENV=production`什么都没有..`rake assets:precompile`什么都没有..我不知道怎么做。

帮我 ！请..谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T18:56:26.773

将此行添加到您的 config/application.rb 文件中：

```
config.assets.precompile += ['index.css'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T08:54:10.297

如果你在 heroku 上运行，heroku 希望`config.assets.initialize_on_precompile`是假的，例如，它会注意编译包含的 gem 的资产。为我解决这个问题的是启用 user-env-compiling，通过运行：

```
 heroku labs:enable user-env-compile -a <application-name> 
```

并设置`config.assets.initialize_on_precompile`为`true`in `config/application.rb`。

希望这可以帮助某人。

-frbl

# jquery - 复制表单输入文件在 IE 中不起作用

> ID：14365339
> 
> 赞同：0
> 
> 时间：2013-01-16T18:36:26.967
> 
> 标签：jquery, internet-explorer

我成功地使用 jQuery 将第一个表单输入字段 (name=”InvoiceTotal”) 复制到第二个只读表单输入字段 (name=”AmountPaid”)。但是，IE（我使用的是 IE8）不会重复将第二个字段留空，并且由于第二个字段需要是只读的，因此用户不能自己输入数据。

我使用几乎相同的代码来复制在 IE 中完美运行的其他字段——这个替代代码的唯一区别是我使用了一个复选框，使其有条件地为用户提供选项，如果他们希望复制他们的输入。

任何关于我没有看到的建议将不胜感激。

```
 $(document).ready(function() {      
    $('#InvoiceTotal').change(function() {        
     $('#AmountPaid').val($('#InvoiceTotal').val());
    });
   });

<input name="InvoiceTotal" type="text" id="InvoiceTotal"  />

<input name="AmountPaid" type="text" id="AmountPaid" readonly /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:02:45.123

不断尝试，我最终采用了不同的方法。我开始使用 jQuery 作为使用“onchange”调用它的函数，但再次发现它不适用于 IE。在阅读了许多关于 IE 如何不能很好地处理“onchange”的文章和帖子后，我转而使用“onblur”。我发现我觉得解决方案不是很干净，可能会更好，但即使在 IE 中一切正常，所以直到我能回来并尝试更好地编写代码，它必须这样做。

这是工作代码，以防它可以帮助其他人。

```
<html>
<head>

<script type = "text/javascript">
    function getAmount() {
    $('input#AmountPaid').val($('input#InvoiceTotal').val());
    }
</script> 

</head>
<body>

    <input name="InvoiceTotal" type="text" id="InvoiceTotal" onblur="getAmount();" />

    <input name="SomeOtherInput" type="text" />

    <input name="AmountPaid" type="text" id="AmountPaid" readonly />

</body>
</html> 
```

# javascript - Html5数字输入步长和精度

> ID：14365348
> 
> 赞同：25
> 
> 时间：2013-01-16T18:37:30.583
> 
> 标签：javascript, html, input, webforms

我不知道如何定义输入[数字]的步长值和精度

`1.01`在我指定一个步骤之前被认为是无效的`0.01`。但在那种情况下，我无法指定特定步骤。

与大数字相同的问题。如果我指定一个步骤`1000`和用户类型`1001`，则该值被认为是**无效**的......

你可以看看这个[例子](http://jsfiddle.net/u6Ma7/)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-17T02:09:32.157

我猜你想禁用步骤验证。如果是这样，`step="any"`应该工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-23T16:19:33.973

您可能只需要定义一个正确的步骤和一个适合您目的的**初始值**。

属性的作用在属性文档[http://www.w3schools.com/tags/att_input_step.asp](http://www.w3schools.com/tags/att_input_step.asp)`value`中没有完全解释。`step`

在示例的第一个输入中，属性设置为`value = 1.01`和`step = 1`（默认值）。输入将接受以下值：`1.01 + 1n`. 其中`n`是一个整数值。可接受值的示例有：1.01、2.01、3.01 等，以及 -0.99、-1.99 -1.99 等。

作为一般规则，接受的值将是：

![值 + 步长 * n](../Images/8660203a542edd06ada5c7555900b144.png)

哪里 ![n \in \mathbb{Z}](../Images/1933e670446d5f217c4f69ff7954d240.png)。

当输入焦点集中时，您可以使用向上/向下箭头键来了解接受的值。

正如前面的答案所建议的，`step="any"`将禁用步骤验证，它不会禁用步进器功能（`step`默认为 1），但需要手动实现步骤验证。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T18:52:57.793

看一下属性的[定义和用法：](http://www.w3schools.com/tags/att_input_step.asp)`step`

> step 属性指定元素的合法数字间隔。

一旦超出区间，该数字就是非法的。

尝试使用 Javascript 代码来满足您的需求。

# linux - Java 自动格式化日期信息。用其他语言

> ID：14365350
> 
> 赞同：2
> 
> 时间：2013-01-15T13:27:27.197
> 
> 标签：linux, java, locale

我的系统是 Linux 64bit，我的 JDK 是*icedtea*。我的系统可以显示中文，但是没有设置为系统的主语言，也没有设置为桌面环境。但是当我运行java应用程序时，它会自动使用中文格式化日期对象......奇怪。

如果应用程序中未设置格式化语言，如何强制 java 使用主要系统语言来格式化日期对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:30:08.200

基本上，问题是由您的 Linux 系统区域设置引起的。就我而言，`LC_CTYPE`设置为**zh_CN.UTF-8**。只需将其设置为**en_US.UTF-8**即可解决我的问题。

# spring - 如何识别或定义每个请求的唯一日志记录 ID？

> ID：14365366
> 
> 赞同：1
> 
> 时间：2013-01-16T18:39:01.493
> 
> 标签：spring, rest, logging

我正在向我的其余应用程序添加日志，其中有几个层（控制器、服务、dao ...）。

如何识别或定义每个请求的唯一日志 ID，以便我可以在不同层中为一个请求使用相同的日志 ID？（无需在控制器中创建并将其传递给每一层）

仅供参考：我正在使用 log4j

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:44:24.983

在不知道您使用的是什么日志框架的情况下，很难提供具体的建议。

为此，我通常使用 Log4J 的 NDC 或 MDC 之类的东西：请求进来，在诊断上下文中用相关信息进行标记，然后日志格式化程序以对您的应用程序有意义的方式吐出诊断上下文。

我通常还使用自定义消息格式化程序，以确保一致地记录 DC，以供日志文件使用者以后使用。如果它要去数据库/消息队列/等。这可能并不重要，因为上下文通常可以按原样转储并进行相应处理。

# php - 恢复“_”后的数字和字符

> ID：14365367
> 
> 赞同：0
> 
> 时间：2013-01-16T18:39:07.267
> 
> 标签：php, regex, match

我想用正则表达式提取下划线后的每个数字和字符。我试过`\_\d{1,3}` 了，但它根本没有用。

这是我需要操作的链示例`R_31_1_35_6a`：

这是我想要的结果：

```
array('31', '1', '35', '6a'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:41:01.413

看看[`explode`](http://php.net/manual/en/function.explode.php)。

```
$string = "R_31_1_35_6a";
$cleanedString = strstr("_", $string);
$result = explode('_', $cleanedString);
print_r($result); // Ignore the first (zeroth) element as it's the prefix value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:43:48.513

您可以使用explode 用下划线分隔字符串：

```
$string = "R_31_1_35_6a";
$result = explode('_', $string); 
```

然后您可以删除在这种情况下为“R”的第一个条目：

```
array_shift($result); 
```

这将返回您的预期结果：

```
var_dump($result); 
```

# ios - 手柄长按端

> ID：14365370
> 
> 赞同：6
> 
> 时间：2013-01-16T18:39:17.827
> 
> 标签：ios, objective-c, uiscrollview, touch, uigesturerecognizer

我有一个`UILongPressGestureRecognizer`连接到控制器的`view`. 我想冻结一些计时器，直到用户握住他的手指。问题是我无法确定触摸事件何时结束。也许我应该在手势识别器的属性上使用观察者`state`？或者还有其他方法可以做到这一点？

## 简短的

在控制器的`view`a `UIScrollView`（实现分页图库）上放置，可以通过拖动（滑动）切换页面。还有一个`UITapGestureRecognizer`, 也附加到控制器的`view`, 它处理一些其他任务。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-16T19:27:41.197

是的，您可以通过查看识别器的状态来完成此操作，但您不需要使用观察者。您应该在手势识别器的委托中声明一个动作方法，该方法将在识别器触发时调用。然后，只要识别器的状态发生变化，就会自动调用该方法。

您需要查找状态 UIGestureRecognizerStateBegan 来开始您的计时器，并且您需要查找状态 UIGestureRecognizerStateEnded、UIGestureRecognizerStateFailed 和 UIGestureRecognizerStateCancelled 来暂停您的计时器。

只需将您的手势与 Interface Builder 中的操作联系起来。

```
-(IBAction)longPressBegan:(UILongPressGestureRecognizer *)recognizer
{
    if (recognizer.state == UIGestureRecognizerStateBegan)
    {
        // Long press detected, start the timer
    }
    else
    {
        if (recognizer.state == UIGestureRecognizerStateCancelled
            || recognizer.state == UIGestureRecognizerStateFailed
            || recognizer.state == UIGestureRecognizerStateEnded)
        {
            // Long press ended, stop the timer
        }
    }
} 
```

# perl - Perl：擦除空行并保存在新文件中

> ID：14365371
> 
> 赞同：1
> 
> 时间：2013-01-16T18:39:26.587
> 
> 标签：perl, counter, erase, string

我正在尝试编写一个脚本，该脚本将计算并删除文件中的空行并将更改保存在新文件中：

```
if (@ARGV != 2) {
  print "Usage: $0 infile outfile\n";
  exit;
}
$infile = @ARGV[0];
$outfile = @ARGV[1];
open($old, "<$infile");
open($new, ">$outfile");
@mass = <$old>;
foreach $newc(@mass) {
    $counter++;
    if ($_ =~ /^$/) {
        print "blank line found in $old at line number $counter\n";
        print $new;
    }
}
close($new);
close($old); 
```

但它不起作用。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:09:27.590

这是另一种选择：

```
use strict;
use warnings;

@ARGV == 2 or die "Usage: $0 infile outfile\n";

open my $fhIN,  '<', $ARGV[0] or die $!;
open my $fhOUT, '>', $ARGV[1] or die $!;

while (<$fhIN>) {
    if (/\S/) {
        print $fhOUT $_;
    }
    else {
        print "Blank at line $.\n";
    }
} 
```

正如[amon](https://stackoverflow.com/users/1521179/amon)所示，您可以迭代文件的行，而无需先将它们读入数组。该脚本还利用了`$.`，其中包含文件的当前行号。正则表达式`/\S/`检查行中的任何非空白字符，因为这表示非空白行。如果`/\S/`为真，则将行写入`outfile`，否则打印空行通知。

文件句柄的词法范围[为（首选方法）的三参数形式`open`](http://www.informit.com/articles/article.aspx?p=1582932&seqNum=2)，因此文件将自动`close`在脚本末尾。

* * *

您甚至可以更进一步，利用 STDIN、STDOUT 和 STDERR 获得最大的灵活性和实用性。

```
use strict;
use warnings;

while (<>) {
    if (/\S/) {
        print;
    }
    else {
        print STDERRR "Blank at line $.\n";
    }
} 
```

然后只需使用

```
script.pl file.in >file.out 
```

代替

```
script.pl file.in file.out 
```

但它也允许你做类似的事情

```
prog1 | script.pl | prog2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:01:55.363

您不在`$newc`循环中使用，并且只打印空行

```
foreach $newc (@mass) {
    $counter++;
    if ($newc =~ /^$/) {
        print "blank line found in $old at line number $counter\n";
    } else {
        print $new $newc;
    }
} 
```

正如评论中已经指出的那样，使用`$ARGV[0]`and `$ARGV[1]`。`$ARGV[0]`是 的第一个值`@ARGV`，而`@ARGV[0]`是切片。有关更多详细信息，请参阅[切片](http://perldoc.perl.org/perldata.html#Slices)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T19:00:15.937

中的行`@mass`仍然包含一个尾随换行符。在您的正则表达式中考虑这一点，或者选择这些值。

我会像这样对循环进行编码

```
while (<$old>) {
  chomp;
  say {$new} $_ if length;
} 
```

另外，测试 open 的返回值：

```
open my $old, "<", $infile or die qq(Can't open "$infile": $!); 
```

整个代码作为一个单行代码：

```
perl -nE'chomp; say if length' infile.txt >outfile.txt 
```

或者

```
perl -nE'chomp; if(length){say}else{say STDERR "blank on line $."}' infile.txt >outfile.txt 
```

（`$.`是当前输入的行号。）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-16T19:04:12.777

你的脚本应该是这样的：

```
if (@ARGV != 2) {
  print "Usage: $0 infile outfile\n";
  exit;
}
$infile = $ARGV[0];
$outfile = $ARGV[1];
open $old, "<", $infile;
open $new, ">", $outfile;
@mass = <$old>;
$counter = 0;
foreach $newc (@mass) {
    $counter++;
    if ($newc =~ /^$/) {
        print "blank line found in $infile at line number $counter\n";
    } else { # print in the new file when not an empty line!
        print $new $newc;
    }
}
close($new);
close($old); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-16T19:06:22.207

```
if (@ARGV != 2) {
  print "Usage: $0 infile outfile\n";
  exit;
}

$infile = $ARGV[0];
$outfile = $ARGV[1];
open(OLD, "<$infile");
open(NEW, ">$outfile");
while ($line = <OLD>) {
    print NEW $line unless ($line =~ /^$/);
}
close(NEW);
close(OLD); 
```

# programming-languages - 根据 Logo 为新语言选择语法

> ID：14365372
> 
> 赞同：3
> 
> 时间：2013-01-16T18:39:26.803
> 
> 标签：programming-languages, logo-lang

我正在构建一个包含 LogoWR (Tutle Graphics) 网络端口的项目，但我想对语法进行一些更改，例如变量的命名方式。

原来的：

```
:variable 
```

新的：

```
#number_variable
$text_variable
:indistinct (Can be number or text or other) 
```

目标是训练儿童（大约 10 到 14 岁）使用变量。它还应该教他们类型转换（以及关于使用不同的变量类型），但要使用“物理视图” - 始终明确地进行转换。我想要类似的东西`$text = text(#number)`，以便用户可以查看变量的类型而无需查看其声明。

问题是，在您看来，孩子们遵守这些规则是否太难了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T11:12:00.737

这在很大程度上取决于孩子是谁以及他们处于什么阶段。

初级程序员应该与类型隔离。没有那种复杂程度，有很多具有挑战性的东西要学。Logo 非常棒，因为它鼓励了诸如可编程性和问题分解等思维模式，并在很早的时候就产生了具体的结果。我相信你比我更清楚这一点。

除非孩子们已经掌握了基础知识并且需要接受相当复杂的编程挑战，否则类型在很多方面都是不必要的。专业程序员（Python、Ruby 等）使用的语言可能具有类型值但没有类型变量，并且它适用于他们领域中的问题。就个人而言，我发现需要将数字转换为字符串并返回烦人而不是其他任何东西。

如果您确实确实需要类型化变量和类型转换，我会避免使用看起来像普通函数的东西。还要考虑转换可能会触发异常（或某种错误）。我认为我更喜欢具有默认值的显式转换函数或`as`' 语法。

```
$text = Text.convert(#number, "?")
$text = #number as Text 
```

这让我回到了Basic的早期方言，非常痛苦。

# c# - ASP.NET MVC4 和 Web API 身份验证 + 授权（Windows 8 和 Web）

> ID：14365373
> 
> 赞同：10
> 
> 时间：2013-01-16T18:39:30.767
> 
> 标签：c#, windows-8, asp.net-mvc-4, asp.net-web-api

我使用 Simple Membership db 创建了一个 ASP.NET MVC 4 Internet Web 应用程序来存储用户、角色和配置文件。

在我的应用程序中，我创建了一个 Web API 控制器，它将响应`http:// 127.0.0.1/api/users`并且此调用将返回存储在 db 中的所有用户的列表`JSON`。

用属性`UsersController`装饰，`[Authorize]`因此对 的任何调用`http:// 127.0.0.1/api/users`都必须经过身份验证。

在主页上，我有一个按钮，一旦按下 jQuery ajax 获取请求就会执行，并将显示 Web API (json) 返回的用户列表。

如果我登录并按下按钮，一切正常……检索并显示用户列表。

如果我没有登录，则消息显示为`401 - Unauthorized`（jquery 调用 statusCode 中的自定义消息），因此由于该`[Authorize]`属性，它可以正常工作。

我的问题：当 Web API 向它发出请求时，我如何进行身份验证，以获取用户列表并从 Windows 8 应用程序或 Windows Phone 8 或 Windows 窗体中显示它们？换句话说，来自网络浏览器以外的客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:21:15.610

这取决于您如何编写应用程序，但基本上，您将为此使用 http 协议。看看[ASP.NET MVC - HTTP Authentication Prompt](https://stackoverflow.com/questions/1606991/asp-net-mvc-http-authentication-prompt)和[http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-15T05:15:28.813

您应该制作另一个 api，用于检查来自 Windows 8 应用程序或 Windows 的身份验证。

如果它从身份验证成功通过，那么只有您必须向客户端显示用户列表。

# html - html链接覆盖虚拟路径

> ID：14365379
> 
> 赞同：0
> 
> 时间：2013-01-16T18:40:03.717
> 
> 标签：html

我的应用程序有很多链接。他们工作正常，直到我们将其投入生产。（现在有一个相对路径）。

所以..所有链接现在都断开了。我不知道如何格式化它们以“识别”新路径。

`http://host/site`.

所以我的链接总是去根`http://host/`而不是`http://host/site`.

HTML 代码示例：

```
<div  onclick="window.location.href='/Home/Stuff/'">
    <div class="icon"> 
```

此链接将转到`http://host/Home/Stuff/`而不是 `http://host/site/Home/Stuff`

我可以硬编码，但这不是一个好习惯。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:44:09.193

只需使用：

```
<head>
    <base href="http://host/site">
</head> 
```

`href`指定 HTML 文件中的路径应该从哪里开始。这将使`/Home/Stuff/`指向`http://host/site/Home/Stuff`。

# magento - 当相关产品有库存时，捆绑产品显示“延期交货”

> ID：14365380
> 
> 赞同：0
> 
> 时间：2013-01-16T18:40:04.307
> 
> 标签：magento

我所有的捆绑产品都显示“延期交货”，我不知道为什么。

我检查了一些并`Manage Stock`设置为`No`，构成捆绑包的产品有库存。

什么会导致我的捆绑产品出现这种意外的可用性状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T18:21:07.767

发生这种情况是因为默认情况下捆绑产品数量为 0，这就是为什么它会在延期交货时显示所有捆绑产品。

# sql-server - BULK INSERT 出现“列太长”错误

> ID：14365381
> 
> 赞同：28
> 
> 时间：2013-01-16T18:40:05.450
> 
> 标签：sql-server, sql-server-2008, bulkinsert

我正在尝试运行以下命令从 CSV 文件中批量插入数据——

```
 BULK INSERT TestDB.dbo.patent
 FROM 'C:\1patents.csv'
 WITH (FIRSTROW = 1,  FIELDTERMINATOR = '^', ROWTERMINATOR='\n'); 
```

我得到的错误是——

> *消息 4866，级别 16，状态 1，第 1 行
> 批量加载失败。数据文件中第 1 行第 6 列的列太长。
> 请验证是否正确指定了字段终止符和行终止符。
> 消息 7399，级别 16，状态 1，第 1 行
> 链接服务器“（null）”的 OLE DB 提供程序“BULK”报告了错误。提供商没有提供有关该错误的任何信息。
> 消息 7330，级别 16，状态 2，第 1
> 行无法从链接服务器“（null）”的 OLE DB 提供程序“BULK”获取行。*

现在这是第一行的数据——

```
 00000001^^18360713^295^4^0 
```

在表中，最后一个字段（对应于上面的第 6 列数据 = 0）是“int”类型。

我在这里做错了什么？为什么我会收到上述错误？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-11-05T13:21:30.157

我从 Oracle/Unix 中提取。我取而代之`\r\n`，`ROWTERMINATOR = '0x0a'`它对我有用。
非常感谢 ！

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-02-14T12:03:47.447

就像上面回答的那样，我在将 csv 文件导入 SQL Server 时遇到了同样的问题。我正在使用`ROWTERMINATOR = '\n'`，我也尝试使用`'\r\n'`and `'\r'`。他们都没有工作。

但是使用`ROWTERMINATOR = '0x0a'`表加载时没有问题。

我不知道“为什么？” 在这背后，希望其他人可以阐明它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T18:45:21.517

除非文件源是 Unix，否则文件的行终止符很可能是真的

> \r\n

要么使用十六进制编辑器来验证文件的终止符，要么只是尝试将其作为行终止符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-20T16:44:47.840

我遇到了类似的问题，并且知道除非文件是 UNIX 类型**\r\n**是可以的。

当您生成格式文件（**.fmt 或 .xml**）时，请注意左起第三列。它称为列的**最小长度**。尽管您在创建脚本中没有提到它，但有时 sql server 会将其默认为**2 。**将该值更改为**0**。有时您可能还必须允许 NULL ，因此将其更改为零，它现在应该可以工作

# center - 在可变数量的其他 html 元素中居中一个 html 元素

> ID：14365384
> 
> 赞同：0
> 
> 时间：2013-01-16T18:40:24.637
> 
> 标签：center, html

我有一个包含跨度元素的动态菜单。在我的脚本中，我可以更新这个菜单，因此这个菜单可以包含更多/更少的这些 span 元素。这些 span 元素包含页面标题，也具有可变长度的字符。所有这些跨度都是水平对齐的。

我想要做的是将所有这些跨度居中（这很容易）但我需要一个跨度始终位于可变数量的跨度中间。这个跨度将用作一个空的垫片。

为什么？嗯，这是我正在做的设计。此菜单的中间与图像重叠，因此与跨度重叠。使用“始终居中的跨度”，我正在尝试在菜单中创建一个间隔，因此所有跨度都不会出现在此图像后面。

到目前为止的html：

```
<div class = 'header'>
    <div class = 'header_image'>
        <img src = 'centerd_image.jpg' />
    </div>
    <div class = 'header_menu'>
        <span>the empty spacer</span>
        <span>menu1</span>
        <span>menu2</span>
        <span>menu3</span>
        <span>menu4</span>
    </div>
</div> 
```

到目前为止的CSS：

```
.header{
background-color: #90a9c4;
border-bottom: solid #728eac 25px;
position: fixed;
width: 100%;
z-index: 1;
height: 46px;
}

.header_image{
width: 123px;
height: 89px;
position: absolute;
left: 50%;
margin-left: -61px;
z-index: 3;
}

.header_menu {
position: relative;
z-index: 2;
text-align: center;
margin-top: 50px;
} 
```

我怎样才能得到

```
<span>the empty spacer</span> 
```

始终处于这 4 个（或更多！）

```
<span>menu1</span>
<span>menu2</span>
<span>menu3</span>
<span>menu4</span> 
```

# label - gnuplot：在二维散点图中用“NaN”标记未定义的值

> ID：14365386
> 
> 赞同：0
> 
> 时间：2013-01-16T18:40:33.267
> 
> 标签：label, undefined, gnuplot, nan, scatter-plot

我有一个看起来大致像这样的数据文件

```
# X  Y   Value
1    1   1.5
1    2   2.5
2    1   NaN
2    2   3.0 
```

我想在 Gnuplot 中创建一个散点图，每个点都有十字，旁边有一个带有值的标签。

```
set datafile missing "NaN"
plot "data.txt" using 1:2:3 with labels left, \
     "data.txt" using 1:2 with points 
```

我想`NaN`为具有未定义值的点查看带有文字字符串的标签。而是不打印标签。**是否有强制打印未定义值的设置？**

我试过了，但仍然没有未定义值的标签：

```
plot "data.txt" using 1:2:(($3==$3) ? $3 : "NaN") with labels left 
```

看起来未定义的点完全被跳过了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:31:23.007

以下对我来说很好用（gnuplot 4.4 和 gnuplot 4.6）：

```
plot 'data.txt' u 1:2:3 w labels left,\
     'data.txt' u 1:2 w points 
```

事实上，复制/粘贴您的原始代码也适用于我：

```
set datafile missing "NaN"
plot "data.txt" using 1:2:3 with labels left, \
     "data.txt" using 1:2 with points 
```

也许您没有注意到标签，因为它们几乎不在屏幕上？

```
set xrange [0:3]
set yrange [0:3] 
```

帮助他们更容易看到......

# bash - 在 bash 脚本中使用 virsh 更改 Virbr0 的 XML 文件中的 dhcp IP 范围

> ID：14365391
> 
> 赞同：4
> 
> 时间：2013-01-16T18:40:54.663
> 
> 标签：bash

我需要在 bash 脚本中更改 Virbr0 的 XML 配置文件的 dhcp 范围。可以使用命令“virsh net-edit default”更改它，但我不知道如何从 bash 脚本中完成。对所提问题的任何帮助或解释将不胜感激。预先感谢您的关心。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:53:06.733

net-edit 调用在 EDITOR 中设置的编辑器，因此您应该能够将其设置为非交互式编辑器：

```
EDITOR='sed -i s/foo/bar/g' virsh net-edit default 
```

根据 virsh 调用它的确切方式，您可能必须将编辑代码包装在修改“$1”中给出的文件名的脚本中，然后将 EDITOR 设置为该脚本。

# android - 在 ListView 中显示包含特定字母的视图

> ID：14365394
> 
> 赞同：0
> 
> 时间：2013-01-16T18:41:15.997
> 
> 标签：android, string, listview, string-comparison

我有一个带有自定义适配器的 ListView，我使用 Vector 创建了 TextView，例如，我只想显示包含字母“a”的国家/地区。我找不到解决方案来做到这一点。

这是我的适配器以及我是如何尝试的

```
public class CountryAdapter extends BaseAdapter {
protected MainActivity main = new MainActivity();
private Context mContext;
protected Vector<Country> mVector;
protected SQLiteDatabase mDb;
Cursor cursor;
ImageView deleteIt;
View rowView;
public int pos;

public void setmContext(Context mContext) {
    this.mContext = mContext;
}

public CountryAdapter(Context mContext) {
    this.mContext = mContext;

    mVector = new Vector<Country>();

    CountryOpenHelper helper = new CountryOpenHelper(mContext);
    mDb = helper.getWritableDatabase();

    cursor = mDb.rawQuery("SELECT * FROM COUNTRIES", null);

    if (cursor.getCount() > 0) {

        cursor.moveToFirst();
    }
    do {
        Country country = new Country();
        country.setmCountryIndex(cursor.getInt(0));

        country.setmCountryName(cursor.getString(2));
        country.setmCountryTextSize(cursor.getInt(1));
        country.setmCountryColor(cursor.getInt(3));
        mVector.add(country);
        for (int i = 0; i < cursor.getCount(); i++){
            if (mVector.get(i).toString().contains("a") == false){
                mVector.remove(i);
            }
        }

    } while (cursor.moveToNext()); 
```

如果需要，这里也是我的 CountryAdapter 中的 GetView 方法：

```
public View getView(int position, View convertView, ViewGroup parent) {
    TextView tv;
    if(convertView == null){
        tv = new TextView(mContext);
    }else{
        tv = (TextView) convertView;
    }

    this.pos = position;

    tv.setText(mVector.get(position).getmCountryName());
    tv.setTextColor(mVector.get(position).getmCountryColor());
    tv.setTextSize(mVector.get(position).getmCountryTextSize());

    return tv;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:58:24.863

我建议稍微改变方向：使用内置`SimpleCursorAdapter`或自定义`CursorAdapter`. `Cursors`并且`CursorAdapters`比将 a 转换`Cursor`为 a`Vector`或任何其他类型的`List`. 他们还提供对将为您`FilterQueryProvider`过滤的类的访问权限`Cursor`。

试试这个[基本教程](http://www.mysamplecode.com/2012/07/android-listview-cursoradapter-sqlite.html)。

# ruby-on-rails-3 - 如何限制rails中模型的嵌套属性数量

> ID：14365397
> 
> 赞同：3
> 
> 时间：2013-01-16T18:41:26.597
> 
> 标签：ruby-on-rails-3, validation, limit, nested-attributes

我有两个相关的模型：组和成员。

组.rb：

```
has_many :members, :dependent => :destroy
accepts_nested_attributes_for :members, :reject_if => lambda { |a| a[:email].blank? and a[:id].blank? }, :allow_destroy => true 
```

我想要做的是添加一个验证，以防止在 members_count 达到 25 时立即添加成员。

因此，如果我编辑一个组，例如：

1.  我有 20 个现有成员
2.  我在浏览器端添加了 8 个来自 FORM 的成员

它应该保存前 5 条记录，然后引发错误，例如“您已超出嵌套属性的限制”。

rails 中是否有任何内置方法可以执行此操作。作为一个相对新手，我不知道这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-01T08:34:16.827

在您的模型中：

```
accepts_nested_attributes_for :field, limit: 10 
```

在您的保存方法中：

```
def update
  begin
    # normal model update
    if Model.update_attributes(params[:your_model])
      flash[:notice] = 'Save success'
    else
      flash[:error] = 'Save error'
    end
  rescue ActiveRecord::NestedAttributes::TooManyRecords
    flash[:error] = 'Too many records'
  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T19:09:00.907

我也不知道任何内置方法。不过，您可以添加自己的验证例程。

```
validate :member_limit

def member_limit
  errors.add(:base, "You sir, have too many members!") if members.count > 25
end 
```

这会给基础模型增加一个错误。我认为您还可以将错误添加到 25 以上的关联中`members.errors.add(:base, "Sorry, no room for you.")`

这是阅读更多内容的指南：

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#performing-custom-validations](http://guides.rubyonrails.org/active_record_validations_callbacks.html#performing-custom-validations)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-06T02:52:57.913

您是否尝试过对嵌套属性使用限制选项？

```
 accepts_nested_attributes_for :field, limit: 10 
```

您可以限制可以创建多少个嵌套关联。

# parallel-processing - 使用 GNU 并行在多核上运行并行作业

> ID：14365401
> 
> 赞同：3
> 
> 时间：2013-01-16T18:41:34.133
> 
> 标签：parallel-processing, gnu, multicore

我需要在多核（和多线程）机器上运行多个作业。我正在使用[GNU Parallel 实用程序](http://www.gnu.org/software/parallel/)在内核之间分配作业以加快任务速度。要执行的命令可在名为“commands”的文件中找到。我使用以下命令来运行 GNU Parallel。

猫命令 | 并行 -j +0

根据此位置的指南[-gnu parallel](http://www.admin-magazine.com/HPC/Articles/GNU-Parallel-Multicore-at-the-Command-Line-with-GNU-Parallel)，这个命令应该使用所有的核心来运行这个任务。我的机器有 2 个内核，每个内核有 2 个线程。然而，系统监视器显示 4 个 CPU（CPU1 和 CPU2 属于 core1，CPU3 和 CPU4 属于 core2）。每个作业（模拟）在单核上运行大约需要 20 秒。我使用这个 GNU 并行实用程序和上面的命令并行运行了 2 个作业。我在系统监视器中观察到，如果将 2 个作业分配给 cpu1 和 cpu2（即同一个核心），显然没有加速。它们大约需要 40 秒才能完成，这大约是按顺序运行所需的时间。但是，有时该工具会将 2 个作业分配给 CPU1 和 CPU3 或 CPU4（这意味着，将 2 个作业分配给 2 个不同的内核）。在这种情况下，两个作业在 20 秒内并行完成。

现在，我想知道是否有一种方法可以强制该工具在不同的“核心”上运行，而不是在同一核心上的不同“线程”上运行。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:29:18.750

GNU Parallel 产生进程。它不决定在哪个内核上运行它。您的操作系统会这样做。GNU/Linux 通过让进程在同一个物理 CPU 上产生的进程来节省能源，从而节省能源成为可能：

```
echo 1 > /sys/devices/system/cpu/sched_mc_power_savings 
```

（见[https://lesswatts.org/tips/cpu.php](https://lesswatts.org/tips/cpu.php)）

如果您的计算机设置为省电，那么您可能就是这种情况。

GNU/Linux 还可以控制应该在哪些内核上生成进程。您可以使用`taskset`掩码 10101010(bin)=0xAA; 告诉 GNU/Linux 在每个其他内核上生成。这里显示的是 128 核机器：

```
cat commands | taskset 0xaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa parallel -j +0 
```

# javascript - 通过 DIV 的数量更改 DIV 类

> ID：14365403
> 
> 赞同：1
> 
> 时间：2013-01-16T18:41:36.567
> 
> 标签：javascript, jquery, html

抱歉标题不好，但无论如何。我有一个 jQuery 脚本，它从位于服务器上的 PHP 文件中检索数据。该脚本称为**fetch/debatt.js**`<div class="classy">`并在[http://pi.codele.se/debatt.html](http://pi.codele.se/debatt.html)上打印所有数据，但我希望每个输出的 DIV 上最多有五个不同的类（一个输出á条目）。

```
1st DIV tag = class="first"
2nd DIV tag =  class="secondDiv"
3rd DIV tag = class="niels"
4th DIV tag = class="hotdog"
5th DIV tag = class="last" 
```

**获取/获取.js**

```
$(document).ready(function(){
    var output = $('#output');
    $.ajax({
        url: 'http://pi.codele.se/php/debatt.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
            $.each(data, function(i,item){ 
                var content = '<div class="classy"><div class="img-cont img-4" style="background-image: url('+item.bild+');"></div><h3>'+item.rubrik+'<span>Publicerad '+ item.datum+'</span></h3>'
                + '<p>'+item.innehall+'<br></div></div>';       
                output.append(content);
            });
        },
        error: function(){
            output.text('Kolla din anslutning.')
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:46:00.063

您可以使用数组：

```
var arr = ['first', 'secondDiv', 'niels', 'hotdog', 'last'];

$.each(data, function(i, item){ 
     var content = '<div class="' + arr[i] + '">...';
     // ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:46:21.107

你可以试试这个。这些类在一个数组中，每个类都采用`i`as 键并从数组中输出相应的类。

```
$(document).ready(function(){
    var classes = ['class','class2','class3','class4','class5'];
    var output = $('#output');
    $.ajax({
        url: 'http://pi.codele.se/php/debatt.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
            $.each(data, function(i,item){ 
                var content = '<div class="'+classes[i]+'"><div class="img-cont img-4" style="background-image: url('+item.bild+');"></div><h3>'+item.rubrik+'<span>Publicerad '+ item.datum+'</span></h3>'
                + '<p>'+item.innehall+'<br></div></div>';       
                output.append(content);
            });
        },
        error: function(){
            output.text('Kolla din anslutning.')
        }
    });
}); 
```

# scala - SBT - 无法精确播放 2 应用程序的项目依赖关系

> ID：14365406
> 
> 赞同：5
> 
> 时间：2013-01-16T18:41:44.057
> 
> 标签：scala, jersey, playframework-2.0, sbt

我正在使用 Scala 作为主要语言创建一个 play 2 项目，因此需要一个在 Scala 中实现的 rest 客户端。

不幸的是，我不能轻易使用已知的 Java Jersey-Client。

我在 github 上发现了这个可能很棒的 api：[sjersey-client](https://github.com/FaKod/sjersey-client)

使用 SBT 作为依赖项管理工具，我尝试指示播放应用程序对 sjersey 的依赖项：

```
object ApplicationBuild extends Build {

  val appName = "myWebapp"
  val appVersion = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    jdbc,
    anorm
  )

  lazy val sjersey = RootProject(uri("git://github.com/FaKod/sjersey-client.git"))

  val main = play.Project(appName, appVersion, appDependencies).dependsOn(sjersey).settings(
    scalaVersion := "2.10.0"
  )

} 
```

然后我运行命令：`play reload update`但更新失败：

```
[warn] Binary version (2.10) for dependency org.scala-lang#scala-library;2.10.0
[warn] in myWebapp#myWebapp_2.9.2;1.0-SNAPSHOT differs from Scala binary version in project (2.9.2).
[warn]  module not found: play#play_2.9.2;2.1-RC1              

[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: play#play_2.9.2;2.1-RC1: not found
[warn]  :: play#play-jdbc_2.9.2;2.1-RC1: not found
[warn]  :: play#anorm_2.9.2;2.1-RC1: not found
[warn]  :: play#play-test_2.9.2;2.1-RC1: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] (mywebapp/*:update) sbt.ResolveException: unresolved dependency: play#play_2.9.2;2.1-RC1: not found
[error] unresolved dependency: play#play-jdbc_2.9.2;2.1-RC1: not found
[error] unresolved dependency: play#anorm_2.9.2;2.1-RC1: not found
[error] unresolved dependency: play#play-test_2.9.2;2.1-RC1: not found
[error] Total time: 4 s, completed 16 janv. 2013 19:36:37 
```

但是当我删除`dependsOn`精度时播放！项目，更新和编译都很好。

我被卡住了，可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:59:01.137

如果您不想更新 sjersey scala 版本，也可以试试这个：

```
object ApplicationBuild extends Build {

  val appName = "myWebapp"
  val appVersion = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    jdbc,
    anorm
  )

  val moreResolvers = resolvers ++= Seq(
    "fakod-releases"   at   "https://raw.github.com/FaKod/fakod-mvn-repo/master/releases",
    "fakod-snapshots"  at   "https://raw.github.com/FaKod/fakod-mvn-repo/master/snapshots")

  val main = play.Project(appName, appVersion, appDependencies).settings(
    moreResolvers,
    libraryDependencies ++= Seq(
      "org.scala-libs" % "sjersey-client" %  "0.2.0" intransitive)

  )

} 
```

# c# - AppBar中Button的绑定命令不起作用

> ID：14365407
> 
> 赞同：5
> 
> 时间：2013-01-16T18:41:52.963
> 
> 标签：c#, binding, winrt-xaml

为什么下例中的命令不执行？

我有一个带有 AppBar 和 Button 的命名页面：

```
 <Page
    x:Class="App13.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" 
    x:Name="myPage"
    >
    <Page.BottomAppBar>
        <AppBar>
           <Button Content="OK" Command="{Binding OkCommand, ElementName=myPage}" />
        </AppBar>
    </Page.BottomAppBar>
</Page> 
```

命令“OkCommand”在代码隐藏中定义如下（使用 MVVM 轻框架）：

```
public RelayCommand OkCommand
{
    get
    {
        return m_OkCommand
            ?? (m_OkCommand = new RelayCommand(
                                  async () =>
                                  {
                                      await new MessageDialog("OkCommand").ShowAsync();
                                  }));
    }
} 
```

输出窗口中没有绑定错误或任何其他提示，让我知道为什么这不起作用。（旁白：如果按钮放在 AppBar 之外，一切正常）

有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T06:44:05.017

如果命令绑定适用于页面上其他位置的按钮，则该命令绑定不`AppBar`应该适用于其中的按钮。

我怀疑问题与`DataContext`设置方式有关。您应该将其设置在页面级别，而不是控制树中的较低级别。所有其他按钮都在页面的顶部内容控件内部，而在页面外部，如果设置在顶部内容控件或下方`AppBar`，则导致绑定不起作用。`DataContext`

您可以使用以下工作示例进行尝试：

`MainPage.xaml`：

```
<common:LayoutAwarePage
    x:Class="App16.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App16"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:common="using:App16.Common"
    x:Name="MyPageName"
    mc:Ignorable="d">

    <StackPanel x:Name="MainGrid" Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Button Content="Ok" Command="{Binding OkCommand}" />
    </StackPanel>

    <Page.BottomAppBar>
        <AppBar x:Name="bottomAppBar" Padding="10,10,10,10"  >
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Style="{StaticResource SkipBackAppBarButtonStyle}" Command="{Binding OkCommand}" >
                </Button>
            </StackPanel>
        </AppBar>
    </Page.BottomAppBar>
</common:LayoutAwarePage> 
```

`ViewModel.cs`：

```
public class ViewModel
{
    private RelayCommand _okCommand;
    public RelayCommand OkCommand
    {
        get
        {
            return _okCommand
                ?? (_okCommand = new RelayCommand(
                                      async _ =>
                                      {
                                          await new MessageDialog("OkCommand").ShowAsync();
                                      }));
        }
    }
} 
```

`MainPage.xaml.cs`：

```
public sealed partial class MainPage : LayoutAwarePage
{
    public MainPage()
    {
        this.InitializeComponent();
        DataContext = new ViewModel();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T18:57:31.697

我知道这个问题是针对 Windows RT/8 的，但是我在使用通用应用程序 (UWP) 时遇到了同样的问题，我使用新的 {x:Bind} 找到了解决方案。请注意，默认情况下 x:Bind 将映射到 OneTime 而不是 OneWay 的 {Binding}。

我在观看有关新 XAML 绑定的 MSDN Windows 10 开发人员视频之一时发现了这种模式。

修改 YourPage.cs

```
public sealed partial class YourPage : Page
{
    public ViewModels.YourPageViewModel ViewModel { get; set; }

    public YourPage()
    {
        this.InitializeComponent();

        if (DesignMode.DesignModeEnabled) return;

        this.DataContextChanged += (s, e) =>
        {
            ViewModel = DataContext as ViewModels.YourPageViewModel;
        };
    }
} 
```

修改 YourPageViewModel.cs

```
public class YourPageViewModel : ViewModelBase
{
    private ICommand newFunctionCommand;
    public ICommand NewFunctionCommand { get { return newFunctionCommand; } }

    public YourPageViewModel()
    {
        if (DesignMode.DesignModeEnabled) return;

        if (newFunctionCommand == null)
            newFunctionCommand = new ICommand(new Action(NewFunction));
    }

    protected void NewFunction()
    {

    }
} 
```

修改 YourPage.xaml

```
<Page.DataContext>
    <vm:YourViewModel x:Name="YourVM" />
</Page.DataContext>

<Page.BottomAppBar>
    <CommandBar ClosedDisplayMode="Compact">
        <AppBarButton x:Name="AddAppBarButton" IsCompact="True"
                      Label="New" Icon="Add"
                      Command="{x:Bind ViewModel.NewFunctionCommand, Mode=OneWay}" />
    </CommandBar>
</Page.BottomAppBar> 
```

# entity-framework - 如何在不使 EF 生气的情况下干燥此代码？

> ID：14365408
> 
> 赞同：0
> 
> 时间：2013-01-16T18:41:54.547
> 
> 标签：entity-framework, dry

以下是使用 EF4 实体集 ( `_catalog`) 和另一个 WCF 服务 ( `CatalogFilesServiceClient`) 的 WCF 服务。

```
 private CatalogEntities _catalog = new CatalogEntities();

    public IEnumerable<CategoryDC> GetCategories()
    {
        var catalogFiles = CatalogFilesServiceClient.Create();
        var missingFiles = catalogFiles.GetCategoriesMissingFiles();
        catalogFiles.Close();

        var categoryIDs = missingFiles.Select(i => i.EntityID ?? 0).Distinct();

        return from category in _catalog.Categories
               orderby category.Order
               select new CategoryDC
               {
                   ID = category.ID,
                   Alpha = category.Alpha,
                   Name = category.Name,
                   IsActive = (category.Status == "active"),
                   Description = category.Description,
                   Order = category.Order,
                   IsMissingFiles = (categoryIDs.Contains(category.ID)),
               };
    }

    public CategoryDC GetCategory(int a_nCategoryID)
    {
        var catalogFiles = CatalogFilesServiceClient.Create();
        var missingFiles = catalogFiles.GetCategoriesMissingFiles();
        catalogFiles.Close();

        var categoryIDs = missingFiles.Select(i => i.EntityID ?? 0).Distinct();

        var category = _catalog.Categories.SingleOrDefault(i => i.ID == a_nCategoryID);

        return new CategoryDC
            {
                ID = category.ID,
                Alpha = category.Alpha,
                Name = category.Name,
                IsActive = (category.Status == "active"),
                Description = category.Description,
                Order = category.Order,
                IsMissingFiles = (categoryIDs.Contains(category.ID)),
            };
    } 
```

我如何不`CategoryDC`以不会使 EF 生气的方式重复创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:57:03.983

也许像这样：

```
private CatalogEntities _catalog = new CatalogEntities();

public IEnumerable<CategoryDC> GetCategories()
{
    return GetCategoriesAsQueryable();
}

public CategoryDC GetCategory(int a_nCategoryID)
{
    return GetCategoriesAsQueryable()
        .SingleOrDefault(i => i.ID == a_nCategoryID);
}

private IQueryable<CategoryDC> GetCategoriesAsQueryable()
{
    var catalogFiles = CatalogFilesServiceClient.Create();
    var missingFiles = catalogFiles.GetCategoriesMissingFiles();
    catalogFiles.Close();

    var categoryIDs = missingFiles.Select(i => i.EntityID ?? 0).Distinct();

    return from category in _catalog.Categories
           orderby category.Order
           select new CategoryDC
           {
               ID = category.ID,
               Alpha = category.Alpha,
               Name = category.Name,
               IsActive = (category.Status == "active"),
               Description = category.Description,
               Order = category.Order,
               IsMissingFiles = (categoryIDs.Contains(category.ID)),
           };
} 
```

# c++ - openCv 裁剪图像

> ID：14365411
> 
> 赞同：11
> 
> 时间：2013-01-16T18:42:01.933
> 
> 标签：c++, opencv, crop, iplimage

我的 openCv IplImage 裁剪遇到问题。假设 tmp 和 img 都是 IplImage* 。使用代码：

```
printf("Orig dimensions: %dx%d\n", img->width, img->height);
cvSetImageROI(img, cvRect(0, 0,500,500));
tmp = cvCreateImage(cvGetSize(img),img->depth,img->nChannels);
cvCopy(img, tmp, NULL);
cvResetImageROI(img);
img = cvCloneImage(tmp);
printf("Orig dimensions after crop: %dx%d\n", tmp->width, tmp->height); 
```

当我使用上面的 cvRect 时，我会得到一个大小为 500 x500 的图像，但是当我使用 rect (400,400,500,500) 时，我会得到一个大小为 500 x 320 的图像。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-16T18:53:33.520

`cvRect`被定义为`( int x, int y, int width, int height )`，不是`(int left, int top, int right, int bottom)`。因此，您选择从点开始的 500x500 区域`(x,y) = (400,400)`。我猜你的图像高度是 720 ;)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-05T07:55:01.447

使用 OpenCV 进行图像裁剪

```
Mat image=imread("image.png",1);

int startX=200,startY=200,width=100,height=100

Mat ROI(image, Rect(startX,startY,width,height));

Mat croppedImage;

// Copy the data into new matrix
ROI.copyTo(croppedImage);

imwrite("newImage.png",croppedImage); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-02T05:21:30.107

试试这个。它的工作。

```
 IplImage *source_image;
                     IplImage *cropped_Image1;

                     cout << "Width:" << source_image->width << " pixels" << endl;
                     cout << "Height:" << source_image->height << " pixels" << endl;
                     int width = source_image->width;
                     int lenght = source_image->height;

                     cv::Rect roi;
                     roi.x = 1200; //1200     // 950
                     roi.y = 355; //350      //150 
                     roi.width = 2340; //2360          //2750
                     roi.height = 1425;  //1235 /2500         //2810   //2465 fully braille sheet

                     cropped_Image1 = cvCreateImage(cvSize(roi.width, roi.height), source_image->depth, source_image->nChannels);
                     cvSetImageROI(source_image, roi);
                     cvCopy(source_image, cropped_Image1);
                     cvResetImageROI(source_image);
                     cvShowImage("Cropped Image", cropped_Image1);
                     cvSaveImage("1_cropped.jpg", cropped_Image1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-15T05:38:47.537

您可以通过使用轻松地在 python 中裁剪图像

```
roi = oriImage[refPoint[0][1]:refPoint[1][1], refPoint[0][0]:refPoint[1][0]] 
```

为了得到这两个点你可以调用`cv2.setMouseCallback("image", mouse_crop)`。功能是这样的

```
def mouse_crop(event, x, y, flags, param):
    # grab references to the global variables
    global x_start, y_start, x_end, y_end, cropping

    # if the left mouse button was DOWN, start RECORDING
    # (x, y) coordinates and indicate that cropping is being
    if event == cv2.EVENT_LBUTTONDOWN:
        x_start, y_start, x_end, y_end = x, y, x, y
        cropping = True

    # Mouse is Moving
    elif event == cv2.EVENT_MOUSEMOVE:
        if cropping == True:
            x_end, y_end = x, y

    # if the left mouse button was released
    elif event == cv2.EVENT_LBUTTONUP:
        # record the ending (x, y) coordinates
        x_end, y_end = x, y
        cropping = False # cropping is finished

        refPoint = [(x_start, y_start), (x_end, y_end)]

        if len(refPoint) == 2: #when two points were found
            roi = oriImage[refPoint[0][1]:refPoint[1][1], refPoint[0][0]:refPoint[1][0]]
            cv2.imshow("Cropped", roi)
            cv2.imwrite("crop.jpg",roi) 
```

您可以从这里获取详细信息：[Mouse Click and Cropping using Python](http://www.life2coding.com/crop-image-using-mouse-click-movement-python/)

对于 C++，您可以执行以下操作：

```
void mouse_call(int event,int x,int y,int,void*)
{
    if(event==EVENT_LBUTTONDOWN)
    {
        leftDown=true;
        cor1.x=x;
        cor1.y=y;
        cout <<"Corner 1: "<<cor1<<endl;

    }
    if(event==EVENT_LBUTTONUP)
    {
        if(abs(x-cor1.x)>20&&abs(y-cor1.y)>20) //checking whether the region is too small
        {
            leftup=true;
            cor2.x=x;
            cor2.y=y;
            cout<<"Corner 2: "<<cor2<<endl;
        }
        else
        {
            cout<<"Select a region more than 20 pixels"<<endl;
        }
    }

    if(leftDown==true&&leftup==false) //when the left button is down
    {
        Point pt;
        pt.x=x;
        pt.y=y;
        Mat temp_img=img.clone();
        rectangle(temp_img,cor1,pt,Scalar(0,0,255)); //drawing a rectangle continuously
        imshow("Original",temp_img);

    }
    if(leftDown==true&&leftup==true) //when the selection is done
    {

        box.width=abs(cor1.x-cor2.x);
        box.height=abs(cor1.y-cor2.y);
        box.x=min(cor1.x,cor2.x);
        box.y=min(cor1.y,cor2.y);
        Mat crop(img,box); //Selecting a ROI(region of interest) from the original pic
        namedWindow("Cropped Image");
        imshow("Cropped Image",crop); //showing the cropped image
        leftDown=false;
        leftup=false;

    }

} 
```

您可以从此处获取详细信息：[使用 C++ 进行鼠标单击和裁剪](https://www.life2coding.com/cropping-the-image-using-mouse-callbacks-opencv-c/)

# jquery-mobile - jQuery Mobile：未捕获的 TypeError：无法读取未定义的属性“jQuery ...”

> ID：14365415
> 
> 赞同：6
> 
> 时间：2013-01-16T18:42:22.473
> 
> 标签：jquery-mobile

我有一个 jQuery Mobile 项目，它分布在不同的文件中，例如

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

        <link rel="stylesheet" href="css/custom.css" />

        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script src="js/methods.js"></script>
    </head>
    <body>
        <!-- Termine Page -->
        <div data-role="page" id="firstPage">
            <div data-role="header" data-position="fixed">
                <h1>Header 1</h1>
                ...
            </div><!-- /navbar -->

            <div data-role="content">
            ...
            </div>
        </div>
    </body>
</html>

secondPage.html

<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

        <link rel="stylesheet" href="css/custom.css" />

        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script src="js/methods.js"></script>
    </head>
    <body>
        <div data-role="page" id="pageTwo" class="ui-page">
            <div data-role="header" data-position="fixed" id="terminDetailSeiteHeader">
            <h1>Header 2</h1>
        </div>
        <div data-role="content">
                <div id="contentToFillWithDynamicListView"></div>
            </div>
        </div>
    </body>
</html> 
```

然后，我得到了一个脚本，它应该调用一个 php-Script 并生成一个列表视图：

```
function listViewCreation() {
    var url = 'http://www.myServer.com/myPhp.php?someParameters=1&callback=?';
        $.getJSON(url, function(data) {
            $('#contentToFillWithDynamicListView').empty();
            var collapsibleList = '<ul data-role="listview">';
            var myselfIsIncluded = 0;
            $.each(data, function(key, value) {
                collapsibleList += '<li>' + value['displayName'] + '</li>';
            });
            collapsibleList += '</ul>';

            $('#contentToFillWithDynamicListView').html(collapsibleList).trigger('create');
        });
    } 
```

.trigger('create') 导致错误......我错过了什么？

**编辑 1**

listViewCreation 的调用方式如下：

```
$("#pageTwo").live("pageshow", function(e, data){
    listViewCreation();
}); 
```

**编辑 2** 我正在从另一台服务器获取远程数据，这似乎是错误的原因；但我不知道如何解决它......我在两个页面（1和2）上获取数据；对于第一页它有效，对于第二页它不...

```
$.getJSON(url, function(data) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T21:16:40.350

我可以看到您正在使用 jQuery mobile 的最新稳定版本。

你的问题是

```
trigger('create'); 
```

它不用于 jQuery 移动列表视图重新设置样式。你应该使用：

```
.listview('refresh'); 
```

反而。不要相信官方的 jQM 文档，应该弃用**trigger('create') 。**每个 jQM 小部件都有一个用于刷新它的函数，例如**button('refresh')**。

也不要在更改页眉、页脚或内容时使用**trigger('create')**，它不起作用，您可以在页面上触发 pagecreate：

```
trigger('pagecreate'); 
```

**编辑 ：**

的情况下：

> 未捕获的错误：无法在初始化之前调用 listview 上的方法；试图调用方法“刷新”

称呼：

```
$('#listviewid').listview().listview('refresh'); 
```

第一次调用将对其进行初始化，第二次调用将对其进行样式设置。

**[在这篇文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**中找到有关此主题的更多信息。

# java - 使用 gson 时出现错误不是 JSON 数组

> ID：14365416
> 
> 赞同：1
> 
> 时间：2013-01-16T18:42:46.160
> 
> 标签：java, javascript, json, gson

我的json字符串是：

```
{
    "sigTemplateId": 1,
    "name": "Test Ticket Template",
    "groups": "[{\"sigTemplateId\": 1, \"sigTemplateGroupId\": 1, \"name\": \"Group 1\", \"ordinal\": 1}]"
} 
```

这从我的 jsp 发送到 servlet。Servlet 代码为：

```
Gson gson = new Gson();

if (jsonData != null) {
    Type objType = new TypeToken<SigTemplateObj>() {}.getType();
    SigTemplateObj sigTemplateToSave = gson.fromJson(jsonData, objType);
    //SigTemplateObj sigTemplateToSave = gson.fromJson(jsonData, SigTemplateObj.class);
} 
```

我得到了：java.lang.IllegalStateException：这不是 JSON 数组。gson 试图解析组数组：JsonDeserializer com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter@1f4db697 无法反序列化 json 对象 "[{\"sigTemplateId\": 1, \"sigTemplateGroupId\": 1, \"name\" : \"Group 1\", \"ordinal\": 1}]" 给定类型 java.util.ArrayList

我的目标代码是：

```
public class SigTemplateObj {

    int sigTemplateId;
    String dyninkName;
    int dyninkFormId;
    String name;

    //children collections
    ArrayList<SigTemplateFieldObj> fields;
    ArrayList<SigTemplateGroupObj> groups;
...
}

public class SigTemplateGroupObj {
    int sigTemplateGroupId;
    int sigTemplateId;
    int ordinal;
    String name;
...
} 
```

我已经尝试了上面的代码和这一行，并且两次都得到了相同的结果。

```
SigTemplateObj sigTemplateToSave = gson.fromJson(jsonData, SigTemplateObj.class); 
```

任何帮助，将不胜感激。谢谢，埃里克

现在我只需要修复我的 javascript 以将组数组视为数组而不是字符串：

```
var testObject = new Object();
        testObject.sigTemplateId = 1;
        testObject.name = 'Test Ticket Template';
        testObject['groups'] = [];
        var testGroup = new Object();
        testGroup.sigTemplateId = 1;
        testGroup.sigTemplateGroupId = 1;
        testGroup.name = 'Group 1';
        testGroup.ordinal = 1;
        testObject.groups.push(testGroup);

        var json = JSON.stringify(testObject); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:45:15.073

groups 数组不是数组，而是字符串：

```
"groups": "..." 
```

试试这个 JSON：

```
{
    "sigTemplateId": 1,
    "name": "Test Ticket Template",
    "groups": [{"sigTemplateId": 1, "sigTemplateGroupId": 1, "name": "Group 1", "ordinal": 1}]
} 
```

# html - 使用 javascript 解析带有属性的 XML

> ID：14365417
> 
> 赞同：0
> 
> 时间：2013-01-16T18:42:46.640
> 
> 标签：html, xml

我需要用 HTML 和 javascript 解析 XML 解析。

我的 XML：

```
 <tv_channel id = "1">
        <movie>
            <name>Movie 1</name>
            <time>6:00</time>
        </movie>
        <movie>
            <name>Movie 2</name>
            <time>6:30</time>
        </movie>
   </tv_channel>
    <tv_channel id = "2">
        <movie>
            <name>Movie 3</name>
            <time>11:15</time>
        </movie>
        <movie>
            <name>Movie 4</name>
            <time>13:45</time>
        </movie>
    </tv_channel> 
```

我的Javascript是

```
function vyberZaner(zaner, nazov, from, to) {
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {// code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET", "XML.xml", false);
    xmlhttp.send();
    xmlDoc = xmlhttp.responseXML;
    var txt = document.getElementById('div_table')
    var content = '';
    content += '<table border=\'1\'>';
    var x = xmlDoc.getElementsByTagName("tv_channel");
    content += '<h1 > ' + nazov + ' </h1>';
    content += ("<td> NAME </td>");
    content += ("<td> GENRE </td>");
        for (i = 0; i < x.length; i++) {
            content += '<tr><td>';
            content += x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue;
            content += '</td><td>';
            content += x[i].getElementsByTagName("time")[0].childNodes[0].nodeValue;
            content += '</td></tr>';
}
    content += '</table>';
    txt.innerHTML = content;
} 
```

输出是

```
Movie 1   6:00
Movie 2   6:00
Movie 3   6:00
Movie 4   6:00 
```

我只需要两个

```
Movie 1   6:00
Movie 2   6:00 
```

或者

```
Movie 3   6:00
Movie 4   6:00 
```

这取决于`id`但我不知道该怎么做。我只需要获得像“电影 1 和电影 2”或“电影 3 和电影 4”这样的输出。用户将使用按钮选择 xml 并仅显示 id 1 或 id 2 的频道信息及其名称和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:28:39.480

使用 getAttribute 方法确定是为通道 id 1 还是通道 id 2 拉取 XML，然后输出该内容。在 for 循环中，使用：

if(x[i].getAttribute('id') == 1or2) {做任何事}

见：[http ://www.w3schools.com/dom/met_element_getattribute.asp](http://www.w3schools.com/dom/met_element_getattribute.asp)

# html - 如何对一个元素使用多个 css 类？

> ID：14365420
> 
> 赞同：0
> 
> 时间：2013-01-16T18:43:05.553
> 
> 标签：html, css

我有一堂课：

```
.grid_1, .grid_2, .grid_3, .grid_4, .grid_5, .grid_6, .grid_7, .grid_8, .grid_9, .grid_10, .grid_11, .grid_12, .grid_13, .grid_14, .grid_15, .grid_16 {
 display: inline;
 float: left;
 margin-left: 10px;
 margin-right: 10px;
} 
```

现在我说要改变`display: inline;`->`display: block;`和`float: left;`->`float: none;`敌人一个元素；

我创建了另一个类：

```
.logonormal{
float:none;
display:block;
} 
```

我 html 我说：

```
<header id="banner" role="banner" class="grid_12 logonormal"> 
```

但我在Firefox中看不到`logonormal`。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:38:24.300

如果您已经遵循 Kolink 的建议（css 选择器的顺序），那么也许您可以增加[您的 css 声明的特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)。

可能是这样的？

```
 header.logonormal {
      float:none;
      display:block;
 } 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:45:09.050

确保类在 CSS 文件中的类*之后*的`.logonormal`某个位置定义。由于选择器具有相同的优先级，因此这是决定因素。*`.grid_12`*

# spring - Spring集成测试

> ID：14365424
> 
> 赞同：2
> 
> 时间：2013-01-16T18:43:11.833
> 
> 标签：spring, integration-testing

我知道对此有几个问题..但我仍然无法让它发挥作用。我有一个 spring 应用程序，我正在尝试为其编写集成测试。我尝试使用 xml 文件设置应用程序上下文（或多或少与我用于应用程序的 xml 文件相同）。出现的问题如下：

1.  配置未加载，我收到如下错误：“预期为单个 bean，但发现为 0。”

2.  我已经指定了正确的路径，然后它开始抱怨在类路径中找不到资源。我已经复制了文件夹 test/resources 中缺少的文件。

3.  现在，它无法加载应用程序上下文并出现以下错误：No matching bean of type [javax.servlet.http.HttpServletRequest] found for dependency。（在我的配置文件中，我有 mvc:annotation-driven />）

4.  我已经按照这个例子[http://www.scarba05.co.uk/blog/2010/07/more-on-integration-testing-of-spring%E2%80%99s-mvc-annotation-mappings-for-controllers /](http://www.scarba05.co.uk/blog/2010/07/more-on-integration-testing-of-spring%E2%80%99s-mvc-annotation-mapppings-for-controllers/)进行我的集成测试。不过，当我拨打电话 handlerAdapter.handle(request, response, controller); 我收到 ClassCastException，因为我的控制器不是 HandlerAdapter 的实例。我几乎遵循与此处发现的错误路径相同的错误路径：http: [//forum.springsource.org/showthread.php?131196-Spring-3-1-2-Controller-annotated-Controllers-JUnit-test-fail](http://forum.springsource.org/showthread.php?131196-Spring-3-1-2-Controller-annotated-Controllers-JUnit-test-fail)。

是的，我是 Spring 新手，但至少我已经搜索和阅读了很多。您能否指点我一个好的教程或一些示例项目（除了春季项目），这样我就可以解决我的问题。

提前感谢您花时间阅读我的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:57:58.080

我写了一篇关于我认为覆盖 Spring 应用程序上下文进行测试的最佳方法的博客文章。基本上，您不应该复制您的主要应用程序上下文 xml 文件进行测试，因为这会导致重复，而只需覆盖您需要的部分：

*   [http://www.solubris.com/blog/overriding_spring_context_for_testing](http://www.solubris.com/blog/overriding_spring_context_for_testing)

但是，这不包括控制器测试。对于那些，您提到的帖子现在已被 spring-mvc-test 项目弃用，该项目现在包含在 spring 3.2.x 中

以下是有关 Spring MVC 测试框架的一些读物：

*   [http://static.springsource.org/spring-framework/docs/current/spring-framework-reference/html/testing.html#spring-mvc-test-framework](http://static.springsource.org/spring-framework/docs/current/spring-framework-reference/html/testing.html#spring-mvc-test-framework)
*   [http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)

# android - 执行 Drive fileList.execute() 会导致 ClassNotFoundException

> ID：14365425
> 
> 赞同：0
> 
> 时间：2013-01-16T18:43:11.743
> 
> 标签：android, google-api, google-drive-api

我一直在尝试将来自 Google Drive 的读取数据合并到我的 Android 应用程序中。我首先按照示例应用程序的说明（DriveQuickstart - [https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)) 并遇到同样的错误。问题是当我调用 fileList.execute(); 在下面的代码中，调试器抱怨 BaseDexClassLoader 抛出了 ClassNotFoundException。如果我捕获此异常并打印消息，它会告诉我参数字符串不应为空。我确保我已按照设置项目的所有说明进行操作，因为我确信这是我的环境有问题。我玩过 Java 构建路径和这个项目的 Android 目标（当前设置为 Android + Google API），但没有任何帮助。任何想法，将不胜感激！

```
 private void downloadFile() {
    Thread t = new Thread(new Runnable() {
      @Override
      public void run() {
        try {
            Files.List fileList = service.files().list().setQ("title = 'tester'");
            FileList files = fileList.execute();  //This line causes an exception when executed.
              ArrayList<File> myFiles = new ArrayList<File>(1);
              myFiles.addAll(files.getItems());
              File file = myFiles.get(0);
              InputStream inStream = downloadFile(service,file);
              String docText = convertStreamToString(inStream);
              Log.v("TAG", docText);
          }
          catch (UserRecoverableAuthIOException e) {
          startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
        } catch (IOException e) {
          e.printStackTrace();
        } catch (Exception e) {
            System.out.println(e.toString() );
        }
      }
    });
    t.start();
  } 
```

这是示例应用程序中遇到相同问题的方法：

```
 private void saveFileToDrive() {
Thread t = new Thread(new Runnable() {
  @Override
  public void run() {
    try {
      // File's binary content
      java.io.File fileContent = new java.io.File(fileUri.getPath());
      FileContent mediaContent = new FileContent("image/jpeg", fileContent);

      // File's metadata.
      File body = new File();
      body.setTitle(fileContent.getName());
      body.setMimeType("image/jpeg");

      File file = service.files().insert(body, mediaContent).execute(); //Same exception encountered
      if (file != null) {
        showToast("Photo uploaded: " + file.getTitle());
        startCameraIntent();
      }
    } catch (UserRecoverableAuthIOException e) {
      startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
});
t.start(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T08:15:18.707

从 Eclipse 菜单中选择项目 > 属性 > Java 构建路径 > 库。

您是否尝试过检查 [java build path] 的 [order and export] 上的 Android 私有库。

或者更新到最新的android sdk 和google api 版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:22:41.660

使用 Birdman 自己的解决方案，我得到了添加额外 catch(Exception e) 的部分。即使它可能只是一个半解决方案。

> 更新：我发现如果我暂停线程的错误刚刚被吞下，Drive Quickstart 应用程序就可以工作。我注意到该应用程序在运行而不是调试时正在运行。我在导致问题的行之后添加了一个额外的“catch”，现在我可以调试代码并且它工作正常。尽管这个异常似乎发生并且必须被忽略，但对我来说似乎很奇怪。– 鸟人 1 月 23 日 20:06

# c# - 单元测试方法\测试计数

> ID：14365427
> 
> 赞同：0
> 
> 时间：2013-01-16T18:43:23.727
> 
> 标签：c#, unit-testing, testing

我有一系列单元测试来验证我的 ORM 域模型中的结构。第一个测试计算元数据中的实体数量，因此假设为 146 个实体。

这意味着我需要 146 个单元测试来验证`property\collection`名称。

我的问题是我需要一个测试来测试测试:)

有没有办法验证实体计数 == 测试方法计数（其中名称以 X 开头，因为类中有很多方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:38:34.290

如果我理解您想要验证您是否为 ORM 解决方案中的每个实体编写了测试的问题。具体来说，您假设如果有 146 个实体，您应该有 146 个相应的测试。实际上，您想断言您已经编写了正确数量的测试。

最明显的解决方案是在测试程序集上使用反射并提取您正在寻找的测试。您可以在这里做很多简单的事情，包括构建实体哈希集和使用命名约定或您定义的自定义属性识别测试夹具。

然而，之前遇到过类似的问题，也许更优雅的解决方案是使用一些自定义测试框架代码，使用元数据和反射来测试实体。同样的“如何测试测试”问题也出现在这里，但可以通过编写一些测试来证明长期形式测试和自定义测试框架实现相同的结果来缓解。如果您可以证明您的自动化是可靠的，那么您对测试的维护问题就不再是问题了。另一个优点是，如果测试频繁运行，您可以随机化测试数据并发现实体中的意外问题。

# java - 持久性，休眠：无法构建 EntityManagerFactory Apache Tomcat & Mysql

> ID：14365428
> 
> 赞同：0
> 
> 时间：2013-01-16T18:43:23.760
> 
> 标签：java, mysql, hibernate

我正在制作一个简单的 URL Shortener，我需要一些 Mysql 连接，但是当我启动服务器并登录到调用实体管理器的 servlet 时，我遇到了这个异常：

> javax.persistence.PersistenceException：[PersistenceUnit：jpa-suplink] 无法构建 EntityManagerFactory

我的项目是这样构建的：

```
Project name
+ Java Resources
++ src
+++ com.suplink.entity
++++ Account.java
+++ com.suplink.filter
++++ redirectFilter.java
+++ com.suplink.servlet
++++ Login.java
+++ META-INF
++++ persistence.xml
+ WebContent
++ login.jsp 
```

这是我访问 localhost:8080/Suplink 时的控制台日志：

```
janv. 16, 2013 7:32:07 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;.
janv. 16, 2013 7:32:07 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Suplink' did not find a matching property.
janv. 16, 2013 7:32:07 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
janv. 16, 2013 7:32:07 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
janv. 16, 2013 7:32:07 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 717 ms
janv. 16, 2013 7:32:07 PM org.apache.catalina.core.StandardService startInternal
INFO: Démarrage du service Catalina
janv. 16, 2013 7:32:07 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.34
janv. 16, 2013 7:32:08 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
janv. 16, 2013 7:32:08 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
janv. 16, 2013 7:32:08 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 997 ms
janv. 16, 2013 7:32:13 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
janv. 16, 2013 7:32:13 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.9.Final}
janv. 16, 2013 7:32:13 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
janv. 16, 2013 7:32:13 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
javax.persistence.PersistenceException: [PersistenceUnit: jpa-suplink] Unable to build EntityManagerFactory 
```

还有我的 Login.java、Account.java 和 persistence.xml

**登录.java**

```
package com.suplink.servlet;

import java.io.IOException;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.suplink.entity.Account;

/**
 * Servlet implementation class Login
 */
@WebServlet(
        description = "Login form & Index page.", 
        urlPatterns = {
            "/login",
            "/index.html"
        })
public class Login extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public Login() {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        request.getRequestDispatcher("login.jsp").forward(request, response);

        try {
        EntityManagerFactory emf = null;
        emf = Persistence.createEntityManagerFactory("jpa-suplink");
        EntityManager em = emf.createEntityManager();

        Query query = em.createQuery("SELECT email FROM account");

        List<Account> accounts = (List<Account>)query.getResultList();
        System.out.println(query);

        for (Account a : accounts) {
            System.out.println(a);
        }

        em.close();
        emf.close();
        } catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

**账户.java**

```
package com.suplink.entity;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collection;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import javax.persistence.Table;

@Entity
@Table(name="account")
public class Account implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue
    private long id;
    private String email;
    private String password;

    @OneToMany(mappedBy="account")
    private Collection<Account> accounts = new ArrayList <Account> ();

    public Account() {
    }

    public long getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

} 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence 
    xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="jpa-suplink" transaction-type="RESOURCE_LOCAL">
        <properties>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://127.0.0.1/suplink"/>
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.connection.password" value=""/>

            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="update" />
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:20:48.797

在以下代码`mappedBy`引用实体中命名`account`的属性：`Account`

```
@OneToMany(mappedBy="account")
private Collection<Account> accounts = new ArrayList <Account> (); 
```

它告诉字段named`account`拥有双向关系，但目前没有这种关系的反面。通过添加它来解决问题：

```
@ManyToOne
private Account account; 
```

其他选择是将其保持为单向关系。这是通过删除 mappedBy 属性来完成的。

# javascript - 如何使嵌套列表隐藏类似于 jquery mobile。包括样品

> ID：14365430
> 
> 赞同：-1
> 
> 时间：2013-01-16T18:43:34.847
> 
> 标签：javascript, jquery, list, jquery-mobile

我喜欢大型列表的此功能[http://jquerymobile.com/demos/1.2.0/docs/lists/lists-nested.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-nested.html)

我将有一个包含 1,000 多个订单项的列表。我会将其分类到父/子列表中。

例如，显示的初始列表是美国的州列表。一旦他们点击一个州，比如加利福尼亚，他们应该只会看到加利福尼亚的子列表项。

我在 jquery mobile 之外找不到任何代码来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:09:53.173

因此，您希望它用新列表替换列表，或者嵌套在旧列表中显示，我会为这两种情况构建不同的列表。

如果你想让它替换旧的，我会用这样的东西（如果它真的很大，使用 ajax 加载子列表）。[http://jsfiddle.net/Cmzwe/](http://jsfiddle.net/Cmzwe/)

HTML

```
<ul id="main">
  <li id="wa">Washington</li>
  <li id="or">Oregon</li>
  <li id="ca">California</li>
</ul>
<ul class="hidden" id="wa-list">
  <li>Everett</li>
  <li>Seattle</li>
  <li>Olympia</li>
</ul>
<ul class="hidden" id="or-list">
  <li>Portland</li>
  <li>Salem</li>
  <li>Beverton</li>
</ul>
<ul class="hidden" id="ca-list">
  <li>Reding</li>
  <li>Modesto</li>
  <li>Stockton</li>
</ul> 
```

CSS

```
$('ul#main li').bind('click',function(){
  $('ul#main').addClass('hidden');
  $('ul#'+$(this).attr('id')+'-list').removeClass('hidden');
}); 
```

Javascript

```
$('ul#main li').bind('click',function(){
  $('ul#main').addClass('hidden');
  $('ul#'+$(this).attr('id')+'-list').removeClass('hidden');
}); 
```

如果您希望它嵌套，那么我会这样做。[http://jsfiddle.net/pKAQ8/](http://jsfiddle.net/pKAQ8/)

HTML

```
<ul id="main">
  <li id="wa">Washington</li>
  <li id="or">Oregon</li>
  <li id="ca">California</li>
</ul>
<ul class="hidden" id="wa-list">
  <li>Everett</li>
  <li>Seattle</li>
  <li>Olympia</li>
</ul>
<ul class="hidden" id="or-list">
  <li>Portland</li>
  <li>Salem</li>
  <li>Beverton</li>
</ul>
<ul class="hidden" id="ca-list">
  <li>Reding</li>
  <li>Modesto</li>
  <li>Stockton</li>
</ul> 
```

CSS

```
ul.hidden{
  display:none;
}
ul.li{
  cursor:pointer;
} 
```

Javascript

```
$('ul#main li').bind('click',function(){
  $('ul#main').addClass('hidden');
  $('ul#'+$(this).attr('id')+'-list').removeClass('hidden');
}); 
```

这两个都是非常基本的示例，如果您愿意，我可以扩展其中任何一个，只要让我知道您希望它如何工作即可。

```
Obligatory Formatted Code, JSFiddle is easier for something like this. 
```

# javascript - 计算谷歌电子表格中相同颜色的单元格

> ID：14365436
> 
> 赞同：23
> 
> 时间：2013-01-16T18:43:54.520
> 
> 标签：javascript, google-apps-script, google-sheets

我正在尝试计算具有相同背景颜色的单元格的数量，并将结果与​​谷歌应用程序脚本中的脚本一起放入其他单元格中，但我做不到。我有下一个脚本但不工作，我不知道是哪个问题：

```
function countbackgrounds() {
 var book = SpreadsheetApp.getActiveSpreadsheet();
 var range_input = book.getRange("B3:B4");
 var range_output = book.getRange("B6");
 var cell_colors = range_input.getBackgroundColors()[0];
 var color = "#58FA58";
 var count = 0;

 for( var i in cell_colors )
  if( cell_colors[i] == color ){
    range_output.setValue(++count);
  }
  else {
    return count; 
  }
 } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-05-16T12:06:54.963

如果您不想使用[Google Sheets Power Tools](https://www.ablebits.com/google-sheets-add-ons/power-tools/index.php)手动编码，则简单的解决方案：

**注意：虽然在编写此答案时该工具是免费的，但现在每年 43.20 美元或终身许可证 89.95 美元！**

1.  通过附加组件面板安装 Power Tools（附加组件 -> 获取附加组件）
2.  在 Power Tools 侧边栏中单击 Σ 按钮，然后在该菜单中单击“按颜色求和”菜单项
3.  选择带有您要搜索的颜色标记的“图案单元格”
4.  为要计数的单元格选择“源范围”
5.  使用函数应设置为“COUNTA”
6.  按“插入功能”，你就完成了:)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-16T19:28:28.437

```
function countbackgrounds() {
 var book = SpreadsheetApp.getActiveSpreadsheet();
 var sheet = book.getActiveSheet();
 var range_input = sheet.getRange("B3:B4");
 var range_output = sheet.getRange("B6");
 var cell_colors = range_input.getBackgroundColors();
 var color = "#58FA58";
 var count = 0;

 for(var r = 0; r < cell_colors.length; r++) {
   for(var c = 0; c < cell_colors[0].length; c++) {
     if(cell_colors[r][c] == color) {
       count = count + 1;
     }
   }
 }
    range_output.setValue(count);
 } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-11-11T09:06:33.977

您可以使用此工作脚本：

```
/**
* @param {range} countRange Range to be evaluated
* @param {range} colorRef Cell with background color to be searched for in countRange
* @return {number}
* @customfunction
*/

function countColoredCells(countRange,colorRef) {
  var activeRange = SpreadsheetApp.getActiveRange();
  var activeSheet = activeRange.getSheet();
  var formula = activeRange.getFormula();

  var rangeA1Notation = formula.match(/\((.*)\,/).pop();
  var range = activeSheet.getRange(rangeA1Notation);
  var bg = range.getBackgrounds();
  var values = range.getValues();

  var colorCellA1Notation = formula.match(/\,(.*)\)/).pop();
  var colorCell = activeSheet.getRange(colorCellA1Notation);
  var color = colorCell.getBackground();

  var count = 0;

  for(var i=0;i<bg.length;i++)
    for(var j=0;j<bg[0].length;j++)
      if( bg[i][j] == color )
        count=count+1;
  return count;
}; 
```

然后在你的谷歌表格中调用这个函数：

```
=countColoredCells(D5:D123,Z11) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T19:30:01.853

这是一个工作版本：

```
function countbackgrounds() {
 var book = SpreadsheetApp.getActiveSpreadsheet();
 var range_input = book.getRange("B3:B4");
 var range_output = book.getRange("B6");
 var cell_colors = range_input.getBackgroundColors();
 var color = "#58FA58";
 var count = 0;

 for( var i in cell_colors ){
 Logger.log(cell_colors[i][0])
  if( cell_colors[i][0] == color ){ ++count }
  }
range_output.setValue(count);
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-29T08:10:10.927

以前的函数对我不起作用，所以我制作了另一个函数，它使用与上述答案之一相同的逻辑：解析单元格中的公式以查找要检查的单元格的引用范围，而不是查找彩色细胞。您可以在此处找到详细说明：[Google Script count coloured with reference](https://www.barattalo.it/coding/count-coloured-cells-on-google-sheets/)，但代码如下：

```
function countColoured(reference) {
  var sheet = SpreadsheetApp.getActiveSheet();
  var formula = SpreadsheetApp.getActiveRange().getFormula();
  var args = formula.match(/=\w+\((.*)\)/i)[1].split('!');
  try {
    if (args.length == 1) {
      var range = sheet.getRange(args[0]);
    }
    else {
      sheet = ss.getSheetByName(args[0].replace(/'/g, ''));
      range = sheet.getRange(args[1]);
    }
  }
  catch(e) {
    throw new Error(args.join('!') + ' is not a valid range');
  }
  var c = 0;
  var numRows = range.getNumRows();
  var numCols = range.getNumColumns();
  for (var i = 1; i <= numRows; i++) {
    for (var j = 1; j <= numCols; j++) {
      c = c + ( range.getCell(i,j).getBackground() == "#ffffff" ? 0 : 1 );
    }
  }
  return c > 0 ? c : "" ;
} 
```

# xslt - sharepoint dataview webpart xslt 按列的左侧字符分组

> ID：14365437
> 
> 赞同：2
> 
> 时间：2013-01-16T18:44:00.283
> 
> 标签：xslt, sharepoint-2010, grouping, xslt-1.0, dataviewwebpart

我有一个带有“proposalID”列的sharepoint 2010 列表。该列中的值为 5555-01、5555-02、5555-03、6666-01、6666-02 等。

我想按破折号左侧的 4 个字符进行分组。因此分组将显示 5555 下的 3 个项目和组 6666 下的 2 个项目，依此类推。

使用 Sharepoint Designer 2010，我添加了一个空白的 dataview webpart，连接到我的列表，并从功能区选择按提案 ID 列排序。它呈现了以下 xsl ddwrt 代码：

我一直在尝试各种语法来更改字符串函数，但没有成功。我试图从这篇文章中收集一些知识，[http://jamestsai.net/Blog/post/SharePoint-Data-View-Data-Form-Web-Part-Group-items-by-month-on-DateTime-field。 aspx](http://jamestsai.net/Blog/post/SharePoint-Data-View-Data-Form-Web-Part-Group-items-by-month-on-DateTime-field.aspx) - 但无法将字符串语法应用于我的案例。

有人可以建议我如何完成这个分组吗？先感谢您。

```
<xsl:choose>
  <xsl:when test="not ($dvt_groupfield)">
    <xsl:value-of select="ddwrt:NameChanged(string(@ProposalID), 0)" />
  </xsl:when>
  <xsl:otherwise></xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:56:00.873

根据那篇博客文章，我认为在这种情况下以下内容会起作用：

```
<xsl:choose>
  <xsl:when test="not ($dvt_groupfield)">
    <xsl:value-of select="ddwrt:NameChanged(string(substring(@ProposalID, 1, 4)), 0)" />
  </xsl:when>
  <xsl:otherwise></xsl:otherwise>
</xsl:choose> 
```

使用 1 和 4 作为子字符串的界限。

同样对于标题，也如博客文章中所述：

```
<xsl:when test="not (@ProposalID) and (@ProposalID) != false()">
  <xsl:value-of select="' '" />
</xsl:when>
<xsl:otherwise>
    <xsl:value-of select="substring(@ProposalID,1,4)" /> 
```

你能试试吗？

# php - 'Zend_Exception' -> '注册表已经初始化'

> ID：14365439
> 
> 赞同：0
> 
> 时间：2013-01-16T18:44:03.763
> 
> 标签：php, zend-framework, error-handling

这是我的完整错误：

> 严格标准：在第 145 行的 /Users/panda/Dropbox/www/_playground/myApp/Zend/Application/Resource/Frontcontroller.php 中以非静态方式访问静态属性 Bootstrap::$frontController
> 
> 致命错误：在 /Users/panda/Dropbox/www/_playground/myApp/Zend/Registry.php:70 中未捕获的异常“Zend_Exception”和消息“注册表已初始化”堆栈跟踪：#0 /Users/panda/Dropbox/www /_playground/myApp/application/Bootstrap.php(217): Zend_Registry::setInstance(Object(Zend_Registry)) #1 /Users/panda/Dropbox/www/_playground/myApp/application/Bootstrap.php(56): Bootstrap- >_initSetupRegistry() #2 /Users/panda/Dropbox/www/_playground/myApp/Zend/Application/Bootstrap/BootstrapAbstract.php(669): Bootstrap->_initPrepare() #3 /Users/panda/Dropbox/www/_playground /myApp/Zend/Application/Bootstrap/BootstrapAbstract.php(622): Zend_Application_Bootstrap_BootstrapAbstract->_executeResource('prepare') 4 /Users/panda/Dropbox/www/_playground/myApp/Zend/Application/Bootstrap/BootstrapAbstract.php(586): Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap(NULL) #5 /Users/panda/Dropbox/www/_playground/myApp/ Zend/Application.php(355): Zend_Application_Bootstrap_BootstrapAbstract->bootstrap(NULL) #6 in /Users/panda/Dropbox/www/_playground/myApp/Zend/Registry.php on line 70

这是我的引导程序中的功能

```
/*
* Zend_Registry get's born here so it can be accesed
*/
protected function _initSetupRegistry()
{

    self::$registry = new Zend_Registry(array(), ArrayObject::ARRAY_AS_PROPS);
    Zend_Registry::setInstance(self::$registry);

} 
```

如果您需要更多代码，请告诉我，我会喜欢一些查找问题的提示，或者如果有人知道确切的问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:48:12.297

你想用这种方法达到什么目的？

如果您只想要一个注册表实例，请使用`Zend_Registry::getInstance()`. 您不应该构建它（我不确定他们为什么使用单例模式但没有将 __construct 设为私有）。

如果你真的想先替换 Zend_Registry 调用的一个实例`Zend_Registry::_unsetInstance()`。

如果您只想设置静态 $registry 变量以便稍后引用它，请尝试：

```
self::$registry = Zend_Registry::getInstance(); 
self::$registry->set('configuration', 'myconfig'); 
```

但我不确定这是必要的，因为您可以`Zend_Registry::getInstance()`从任何范围访问。所以上面是一样的：

```
Zend_Registry::getInstance()->set('configuration', 'myconfig'); 
```

你可以在任何地方打电话。

# linux - 在 Linux 上使用信号量来保证单个应用程序实例有什么问题？

> ID：14365444
> 
> 赞同：0
> 
> 时间：2013-01-16T18:44:28.897
> 
> 标签：linux

我一直在寻找如何保证我的应用程序只有一个实例可以在 Linux 上运行。我认为提供的“最佳”建议是打开一个文件，然后尝试锁定它。但也可以通过打开一个命名的 POSIX 信号量并请求独占访问来做到这一点。对于我 Windows 上瘾的大脑来说，这似乎是更好的方法。有人可以解释这种方法的缺点以及为什么文件锁定是可取的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:30:58.913

从您发布的[kernel.org](http://www.kernel.org/doc/man-pages/online/pages/man7/sem_overview.7.html)页面：

```
Persistence
      POSIX named semaphores have kernel persistence: if not removed by
      sem_unlink(3), a semaphore will exist until the system is shut down. 
```

如果您的进程在显式调用之前死掉`sem_unlink()`，您将无法再次打开您的应用程序，直到您重新启动。

但是，如果您使用文件锁，它们将在您的进程因任何原因结束时被释放（如您还链接的[SO 问题中所述）](https://stackoverflow.com/questions/220525/ensuring-a-single-instance-of-an-application-in-linux)

# javascript - 为什么 Javascript 会导致 FOUC

> ID：14365447
> 
> 赞同：1
> 
> 时间：2013-01-16T18:44:33.330
> 
> 标签：javascript, jquery, onload, domready, fouc

我正在[一个有很多 Javascript 和 jQuery 的网站](https://www.bassnationaudio.com/store)上工作——据我所知，其中大部分是在文档准备好后触发加载的。但是，当页面加载时，您会得到大约一秒钟的白色 FOUC。但是如果你完全禁用 Javascript，根本就没有白闪。

如何确保 Javascript 在页面加载后才开始加载？它已经在大量使用

```
 $(document).ready(function(){ /*. . .*/}); 
```

...所以在页面完成加载并呈现之前，Javascript不应该触发......对吗？但不知何故，页面在渲染之前等待脚本完成——即使它*不需要*，因为页面在 Javascript 完全禁用的情况下看起来仍然很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:57:08.970

我要尝试的第一件事是重新排序您的脚本和样式标签，以便在任何 javascript 文件之前包含所有外部 css 文件。

我使用 Chrome 的开发人员工具进行了审核，发现 13 个样式表包含在一个 javascript 文件下。由于浏览器通常只允许 2 个并发连接，因此如果 html 已加载但样式表下载在其他资源后面排队，您可能会看到此闪烁。

这也可以解释为什么在评论中有这么多其他人很难重现你所看到的——他们有不同的连接速度等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:01:21.287

`$(document).ready()`表示 DOM 已准备就绪，但不一定表示页面已完全加载。如果您想等到页面加载完毕，请使用正文 onload 或窗口 onload 事件。

# jquery - jquery旋转图像onclick

> ID：14365449
> 
> 赞同：17
> 
> 时间：2013-01-16T18:44:40.133
> 
> 标签：jquery

我正在尝试实现这一目标（90 度旋转），但它失败且没有错误。该图像位于`<a></a>`TAG 中，其中已经具有切换 jquery 功能。

```
<?php echo "<img src='down_arrow.png' onclick='$(this).animate({rotate: \"+=90deg\"});' />"; ?> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-16T18:55:07.863

根据您需要支持的浏览器版本，您可以尝试 CSS 转换。

首先，像这样定义一个 CSS 类：

```
.rotated {
  transform: rotate(90deg);
  -ms-transform: rotate(90deg); /* IE 9 */
  -moz-transform: rotate(90deg); /* Firefox */
  -webkit-transform: rotate(90deg); /* Safari and Chrome */
  -o-transform: rotate(90deg); /* Opera */
} 
```

然后您可以在单击链接时使用 jQuery 添加类：

```
<img src="down_arrow.png" onclick="$(this).addClass('rotated');" /> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-16T18:59:33.910

使用 css 规则`-webkit-transform`和`-moz-transform`图像点击的组合。例如将图像旋转 90 度在点击时应用以下 css 规则

```
$('img').click(function(){
    $(this).css({
        "-webkit-transform": "rotate(90deg)",
        "-moz-transform": "rotate(90deg)",
        "transform": "rotate(90deg)" /* For modern browsers(CSS3)  */
    });
}); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-16T18:48:11.650

考虑一个 jQuery 扩展，例如：[jQueryRotate](https://code.google.com/p/jquery-rotate/)

它将使 onclick 内的旋转更容易和更具可读性。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-16T18:51:09.817

签出这个： [**JqueryRotate**](http://jqueryrotate.com/)

这有一些事情要做，您可以在图像本身中看到一个代码示例。

![在此处输入图像描述](../Images/5d92408a3ee9d90e1366bb074d73ada1.png)

所以在你的情况下，你可以这样做：

```
$(document).ready(function(){
   $('img[src^="down_arrow"]').click(function(){
      $(this).rotate(90);
   });
}); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-07-28T20:49:54.273

这将使您能够对每个单击执行额外的旋转

```
var degrees = 0;
$('.img').click(function rotateMe(e) {

    degrees += 90;

    //$('.img').addClass('rotated'); // for one time rotation

    $('.img').css({
      'transform': 'rotate(' + degrees + 'deg)',
      '-ms-transform': 'rotate(' + degrees + 'deg)',
      '-moz-transform': 'rotate(' + degrees + 'deg)',
      '-webkit-transform': 'rotate(' + degrees + 'deg)',
      '-o-transform': 'rotate(' + degrees + 'deg)'
    }); 

}); 
```

[https://jsfiddle.net/Lnckq5om/1/](https://jsfiddle.net/Lnckq5om/1/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-13T07:02:35.787

这是将图像旋转 90 度的示例，如下代码所示：

```
$(document).ready(function(){
    $("img").click(function(){
         $(this).rotate(90);
    });
 }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-14T10:18:07.037

我使用上面的答案并创建了一种方法来进行增量旋转，方法是将当前旋转存储在目标元素的数据属性中。换句话说，每次调用该函数时，它都会添加到现有的旋转中。

```
// Increments the rotation (in degrees) for the element with the given id
function addRotation(id, degrees) {
    var control = $('#' + id);
    var currentRotation = control.data('rotation');
    if (typeof currentRotation === 'undefined') currentRotation = 0;

    degrees += parseInt(currentRotation);

    control.css({
        'transform': 'rotate(' + degrees + 'deg)',
        '-ms-transform': 'rotate(' + degrees + 'deg)',
        '-moz-transform': 'rotate(' + degrees + 'deg)',
        '-webkit-transform': 'rotate(' + degrees + 'deg)',
        '-o-transform': 'rotate(' + degrees + 'deg)'
    });

    control.data('rotation', degrees);
} 
```

用法：

```
<img id='my-image' />

addRotation('my-image', 90);
addRotation('my-image', -90); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-26T18:29:46.270

我非常喜欢上面@Savage 的回答。我希望能够只向元素添加一个类，以使具有该类的任何图像可旋转。当我单击右侧时，还希望它向右（顺时针）旋转，当我单击左侧时，它在左侧（逆时针）旋转。

这是我连接点击事件的地方（[来自这篇文章](https://stackoverflow.com/questions/53785504/how-to-know-if-user-clicks-in-the-left-of-an-image-or-in-the-right)） - 我确实在页面上使用了 jQuery，所以请原谅我的放纵 - 但这会根据您点击的图像上的位置为您提供正确的旋转：

```
 $('.tot-rotatable-image').on('click', function (e) {
            var elm = $(this);
            var xPos = e.pageX - elm.offset().left;

            if((elm.width() / 2) >= xPos){
                addRotation(e, -90);
            } else {
                addRotation(e, 90);
            }
        }); 
```

这里有一个稍微修改过的 addRotation 版本，它只接受事件而不是选择器。这与 @Savage 采用的将当前旋转附加到 DOM 元素相关的方法特别有效。

```
 function addRotation(evt, degrees) {
            var control = $(evt.currentTarget);
            var currentRotation = parseInt(control.data('rotation'));
            degrees += isNaN(currentRotation) ? 0 : currentRotation;

            control.css({
                'transform': 'rotate(' + degrees + 'deg)',
                '-ms-transform': 'rotate(' + degrees + 'deg)',
                '-moz-transform': 'rotate(' + degrees + 'deg)',
                '-webkit-transform': 'rotate(' + degrees + 'deg)',
                '-o-transform': 'rotate(' + degrees + 'deg)'
            });

            control.data('rotation', degrees);
        } 
```

我确实有一些与图像重叠位置有关的样式问题，但我仍然对如何快速轻松地散布它感到满意。

# php - 如何将 PHP 和 Tomcat 7.0 集成在一起

> ID：14365452
> 
> 赞同：-1
> 
> 时间：2013-01-16T18:44:53.653
> 
> 标签：php, jsp, tomcat

我试图在我的 Tomcat 7.0 服务器中结合 PHP 和 JSP。我尝试了很多教程，但似乎都没有。你们中的任何人都可以给我一个逐步的方法来做到这一点，或者一个教程吗？

谢谢你先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:55:42.027

不久前，我试图沿着这条路走下去。您希望拥有 1 个 Web 服务器，但能够在其上托管 php 和 java 项目。

正如 fdreger 已经提到的那样，这不是一个好主意……安装 apache、安装单独的 tomcat 并设置 DNS 记录以根据需要将域指向适当的服务器/端口会简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:51:11.333

如果你需要问这个问题，那么**这不是你想做的**。将 Tomcat 和 PHP 结合是**罕见的**、高级的、高度具体的并且**通常不会这样做**。

**当且仅当**您确定需要此组合时 - 只需从[此处](http://quercus.caucho.com/)下载 Quercus 战争并放入 tomcat/webapps 目录。Tomcat 应该解压并部署 Quercus，任何放入解压目录的 php 文件都可以工作。然后，您可以询问有关 Java-PHP 集成的任何具体问题。

再说一遍：可能你被误导了，完全需要别的东西（也许是 Apache HTTP 和 PHP？...）。

# expressionengine - 自动将父类别分配给子类别条目？

> ID：14365453
> 
> 赞同：0
> 
> 时间：2013-01-16T18:44:56.920
> 
> 标签：expressionengine

我有一个名为“评论”的父类别，它有子类别“专辑”、“曲目”和“演出”。

在创建父类别之前，已经为子类别中的条目分配了这些子类别。

有什么方法可以自动将“评论”（父）类别添加到其所有子类别条目中？

# wpf - WPF在复选框上方设置复选框内容

> ID：14365458
> 
> 赞同：4
> 
> 时间：2013-01-16T18:45:12.997
> 
> 标签：wpf, checkbox, styles

我有一个复选框，我希望将它的文本内容放在复选框控件上方。我看过一篇文章，其中文本放置在文本框的左侧，[如此处所示](http://www.codeproject.com/Articles/19141/WPF-Checkbox-Text-On-Left-Side)，但我想知道是否有办法设置样式以获取复选框上方或下方显示的内容？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:48:52.387

您可以使用与您链接的文章相同的技术。只需使用`DockPanel.Dock="Bottom"`而不是`"Right"`for `BulletChrome`。

您可能还想为 , 设置`VerticalAlignment="Top"`and 。`HorizontalAlignment="Center"``Content`

# avr - memcpy_P 函数 AVR？

> ID：14365462
> 
> 赞同：1
> 
> 时间：2013-01-16T18:45:28.143
> 
> 标签：avr, avr-gcc, winavr

void * memcpy_P( void * dest, PGM_VOID_P src, size_t n )

有人可以告诉我上述函数在 avr libc 库中的实现位置吗？

我似乎只能在几个头文件中找到该函数的定义，而不是实际的实现。

我想这样做的原因是因为目前我正在 AVRAtmega128rfa1 上进行性能测试，并且我需要查看该函数的 AVR 汇编代码以及执行需要多长时间。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:51:33.800

在avr-libc-1.8.0中，函数定义在avr-libc-1.8.0/libc/pmstring/memcpy_P.S

```
 /* Copyright (c) 2002, 2005, 2006, 2007 Marek Michalkiewicz
   All rights reserved.

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions are met:

   * Redistributions of source code must retain the above copyright
     notice, this list of conditions and the following disclaimer.
   * Redistributions in binary form must reproduce the above copyright
     notice, this list of conditions and the following disclaimer in
     the documentation and/or other materials provided with the
     distribution.
   * Neither the name of the copyright holders nor the names of
     contributors may be used to endorse or promote products derived
     from this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  POSSIBILITY OF SUCH DAMAGE. */

/* $Id: memcpy_P.S 2191 2010-11-05 13:45:57Z arcanum $ */

/** \file */
/** \ingroup avr_pgmspace
    \fn void *memcpy_P(void *dest, PGM_VOID_P src, size_t n)

    The memcpy_P() function is similar to memcpy(), except the src string
    resides in program space.

    \returns The memcpy_P() function returns a pointer to dest.  */

#if !defined(__AVR_TINY__)

#if !defined(__DOXYGEN__)

#include "macros.inc"

#define dest_hi r25
#define dest_lo r24
#define src_hi r23
#define src_lo r22
#define len_hi r21
#define len_lo r20

    ASSEMBLY_CLIB_SECTION
    .global _U(memcpy_P)
    .type   _U(memcpy_P), @function
_U(memcpy_P):
    X_movw  ZL, src_lo
    X_movw  XL, dest_lo
#if OPTIMIZE_SPEED
; 17 words, (14 + len * 9 - (len & 1)) cycles
    sbrs    len_lo, 0
    rjmp    .L_memcpy_P_start
    rjmp    .L_memcpy_P_odd
.L_memcpy_P_loop:
    X_lpm   r0, Z+
    st  X+, r0
.L_memcpy_P_odd:
    X_lpm   r0, Z+
    st  X+, r0
.L_memcpy_P_start:
    subi    len_lo, lo8(2)
    sbci    len_hi, hi8(2)
#else
; 12 words, (13 + len * 11) cycles
    rjmp    .L_memcpy_P_start
.L_memcpy_P_loop:
    X_lpm   r0, Z+
    st  X+, r0
.L_memcpy_P_start:
    subi    len_lo, lo8(1)
    sbci    len_hi, hi8(1)
#endif
    brcc    .L_memcpy_P_loop
; return dest (unchanged)
    ret
.L_memcpy_P_end:
    .size   _U(memcpy_P), .L_memcpy_P_end - _U(memcpy_P)

#endif /* not __DOXYGEN__ */

#endif /* !defined(__AVR_TINY__) */ 
```

# jquery - encodeURIComponent 在选择列表中不起作用

> ID：14365463
> 
> 赞同：0
> 
> 时间：2013-01-16T18:45:30.637
> 
> 标签：jquery, select, encodeuricomponent

如果这些元素尚未包含在其中，我正在尝试创建一个将某些元素放入选择列表中的函数。我的标题设置为 ISO 编码，但如果我的“主题”包含货币符号，例如“€”，我会得到一个问号“？” 而不是它在列表中。

这是我的代码：

```
 $.each(subjects, function(key, subject) 
        {
            if (select.find('option[value=\"' + subject + '\"]').length === 0 && subject!="") 
            {
                /*if (selectList == "produitcartesien")
                    {
                        alert(subject);
                    }*/
                 //Ajouter la nouvelle catégorie dans la liste
                   $('<option>', {
                     value: subject,
                     text: subject
                     }).appendTo(select);

                 if (colored==true && !(selectionOf("subjectslist")=="" && selectionOf("relationslist")=="" && selectionOf("complementslist")==""
                         && selectionOf("subjectCategories")=="" && selectionOf("complementcategories")==""))
                     {

                         $('#' + selectList + ' option[value="'+ subject +'"]').css('color', 'red');
                     }
            }
        }); 
```

我试过了

```
value: encodeURIComponent(subject);
text: encodeURIComponent(subject); 
```

但它显示带有尴尬字符的主题，例如 2%2C3F... 我该怎么做才能显示带有货币符号的字符串？先感谢您。

编辑：对不起，上面描述的问题是错误的。我的变量之前已经设置了问号。这是真正的问题，目前仍未得到解答：[https ://stackoverflow.com/questions/14185309/use-encodeuricomponent-with-jsp](https://stackoverflow.com/questions/14185309/use-encodeuricomponent-with-jsp)

如果有人可以帮助...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:55:58.203

您是否尝试过使用：

```
value: decodeURIComponent("50 %E2%82%AC");
text: decodeURIComponent("50 %E2%82%AC"); 
```

结果将是“50 €”

# apache-camel - Camel http4 组件 411 Bad Content-Length

> ID：14365466
> 
> 赞同：0
> 
> 时间：2013-01-16T18:45:49.143
> 
> 标签：apache-camel, http-status-code-411

路线 ：

```
 from("direct:start")
  .setProperty(Exchange.CHARSET_NAME, constant("iso-8859-1"))
  .process(new Processor() {            
        @Override
        public void process(Exchange exchange) throws Exception {
          Message m = exchange.getOut();
          m.setBody(exchange.getIn().getBody());
          m.setHeader(Exchange.HTTP_METHOD, HttpMethods.POST);
          m.setHeader(Exchange.CONTENT_ENCODING, "gzip" );
          m.setHeader(Exchange.CONTENT_LENGTH, m.getBody(byte[].class).length );
          m.setHeader(HttpHeaders.CONTENT_TYPE, "application/xml");
          m.setHeader(Exchange.HTTP_CHARACTER_ENCODING, "iso-8859-1");
          m.setHeader(HttpHeaders.ACCEPT_ENCODING, "gzip, deflate");        
        }
    })
  .marshal().gzip()
  .to("http4://remote.com/path")
  .unmarshal().gzip(); 
```

我要发送的内容：

```
String body = "<?xmlversion=\"1.0\"encoding=\"ISO-8859-1\"?><theXml></theXml>";
producer.sendBody(body); 
```

我正进入（状态

> HTTP 操作调用[http://remote.com/path](http://remote.com/path)失败，状态码：411

这条路线有什么遗漏/错误？

**编辑**

正确的路线是

```
 from("direct:start")
  .process(new Processor() {            
        @Override
        public void process(Exchange exchange) throws Exception {
          Message m = exchange.getOut();
          m.setBody(exchange.getIn().getBody());
          m.setHeader(Exchange.HTTP_METHOD, HttpMethods.POST);
          m.setHeader(Exchange.CONTENT_ENCODING, "gzip" );
          m.setHeader(Exchange.CONTENT_TYPE, "application/xml");        
        }
    })
  // http4 takes care of compressing/decompressing gzip
  .to("http4://remote.com/path") 
```

但是现在我有另一个问题：远程服务器不处理“Transfer-Encoding：Chuncked”，这似乎是camel-http4的默认方式。而且我不知道如何关闭*Chunked*。

请参阅下一个问题[如何在 Camel-http4 中关闭“Transfer-Encoding Chuncked”？](https://stackoverflow.com/questions/14382490/how-to-turn-off-transfer-encoding-chuncked-in-camel-http4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:33:57.180

您正在根据未编码数据的长度设置内容长度。它可能应该是传输数据的长度。请参阅此 SO 问题： [使用 http 压缩时的内容长度](https://stackoverflow.com/questions/3819280/content-length-when-using-http-compression)

顺便问一下，您真的需要使用数据格式进行 gzip 吗？骆驼发送 GZIPed 数据有一个单元测试。

[https://svn.apache.org/repos/asf/camel/trunk/components/camel-http4/src/test/java/org/apache/camel/component/http4/HttpCompressionTest.java](https://svn.apache.org/repos/asf/camel/trunk/components/camel-http4/src/test/java/org/apache/camel/component/http4/HttpCompressionTest.java)

# javascript - 如何将列添加到充满远程数据的 Kendo Grid？

> ID：14365469
> 
> 赞同：0
> 
> 时间：2013-01-16T18:45:57.427
> 
> 标签：javascript, gridview, asp.net-mvc-4, kendo-ui

所以我有这个看法

```
<!DOCTYPE html>

<html>
<head >
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.common.min.css")%>" rel="stylesheet" type="text/css" />
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.default.min.css")%>" rel="stylesheet" type="text/css" />
    <title><%: ViewBag.GestionTitle %></title>
</head>
    <body>

        <h1><%: ViewBag.GestionTitle %></h1>
        <div id="usuariosGrid"></div>
        <button id="addUsuario" type="button" class="k-input"><%: ViewBag.Agregar %></button>

        <script src="<%: Url.Content("~/Scripts/jquery-1.7.1.min.js")%>"></script>
        <script src="<%: Url.Content("~/Scripts/kendo/2012.3.1114/kendo.web.min.js")%>"></script>
        <script src="<%: Url.Content("~/Scripts/usuario/usuario.js")%>"></script>
    </body>
</html> 
```

div usuariosGrid 使用以下函数填充远程数据：

```
$(function () {
    var ds = new kendo.data.DataSource({
        transport: {
            read: {
                url: "http://127.0.0.1:81/SismosService.svc/usuario/index",
                dataType: "json"
            }
        },
        schema: {
            data: "Response"
        },
    });
    $("#usuariosGrid").kendoGrid({
        columns: ["UsuarioId", "Nombre", "ApellidoP", "ApellidoM"],
        dataSource: ds
    });
}); 
```

这将创建一个网格，其中包含函数中指定的列。现在我想做的是为插入的每一行添加一个带有两个超链接的列，一个将我重定向到编辑页面，另一个将我重定向到删除页面。

我怎样才能做到这一点？我一直在寻找示例，但无法找到与我想要实现的目标相似的任何东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:31:18.003

基本上，您必须[`columns`](http://docs.kendoui.com/api/web/grid#columns-array)在`kendoGrid`. 这个新单元格将包含链接（甚至一些按钮）。

为此，您可能会对使用[`columns.template`](http://docs.kendoui.com/api/web/grid#columnstemplate-string)可以将 HTML 与可变数据合并的字段感兴趣，例如，您编辑或删除的行中的数据。

您可以通过执行以下操作来定义自定义操作，而不是链接：

```
columns : [
    ...
    { command: { text: "Edit", click: editRecord }, title: " ", width: "140px" }
] 
```

并且您可以做任何您想做的事情（请参阅[此处](http://demos.kendoui.com/web/grid/custom-command.html)`editRecord`的 KendoUI 示例）。

# ssl - Apache/Tomcat 的 SSL 证书

> ID：14365476
> 
> 赞同：0
> 
> 时间：2013-01-16T18:46:13.983
> 
> 标签：ssl, apache2, tomcat6, cas, mod-jk

我按照本[教程](http://blog.samimakela.fi/blog/2011/07/19/grails-and-single-sign-on/)为 CAS 服务器创建 ssl 证书，现在我决定需要使用 mod_jk 使用 vhost，因此需要在 Apache vhost 配置文件中设置证书。

我的证书是二进制文件并且不能与 Apache 一起使用的问题，有人知道如何转换该证书吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:30:40.470

我找到了解决方案..我将我的 OpenSSL 证书设置为 Apache..然后从我的浏览器中将其导出到二进制文件 (DER).. 之后我将其复制到我的服务器然后将其添加到 tomcat cacert 文件中（如显示在教程中）..希望有一天能对其他人有所帮助..

# java - 用于移动搜索栏的按钮

> ID：14365480
> 
> 赞同：-3
> 
> 时间：2013-01-16T18:46:28.163
> 
> 标签：java, android

我想要一个带有两个按钮的搜索栏。其中一个按钮会将进度增加设定的数量，而另一个按钮会将进度减少设定的数量。

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:50:43.117

你需要这样的东西：

```
Button increase = .......
Button decrease = .......

SeekBar seek = .......

increase.setOnClickListener(new OnClickListener() {           

  @Override
  public void onClick(View v) 
  {
      seek.setProgress(seek.getProgress() + toBeIncreasedBy);
  }    
});

decrease.setOnClickListener(new OnClickListener() {           

  @Override
  public void onClick(View v) 
  {
      seek.setProgress(seek.getProgress() - toBeDecreasedBy);
  }    
}); 
```

基本上只需将 SeekBar 设置为具有当前进度，并添加或删除您需要增加或减少的进度。

# memory-address - 实际使用物理地址扩展 (PAE)

> ID：14365483
> 
> 赞同：0
> 
> 时间：2013-01-16T18:46:44.183
> 
> 标签：memory-address

我是初学者。我遇到了一篇文章，[http ://en.wikipedia.org/wiki/Physical_Address_Extension](http://en.wikipedia.org/wiki/Physical_Address_Extension)

虽然我可以部分理解它，但我无法理解增加物理地址的实际优势。谁能解释一下？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T18:11:38.650

将物理地址空间增加到超过 32 位允许操作系统访问超过 4GB 的内存。但是，虚拟地址空间（指针大小）仍然是 32 位，应用程序需要使用特殊的 API 来更改其虚拟地址空间的寻址位置。PAE 是允许应用程序在 32 位处理器上使用超过 4GB 内存的权宜之计。

如今，随着 x86-64 的广泛实现，PAE 没有实际用途，它具有 64 位指针。

# python - 如何在 PyOpenGL 中使用顶点数组对象和 glDrawElements 进行绘制

> ID：14365484
> 
> 赞同：9
> 
> 时间：2013-01-16T18:46:48.117
> 
> 标签：python, opengl, pyopengl, vao

我有以下代码，它应该只是在屏幕上绘制一个绿色三角形。它使用顶点数组对象和索引缓冲区进行绘制，并拥有我能制作的最简单的着色器。

起初我没有使用索引缓冲区，只是简单地进行了绘制调用，`glDrawArrays`但当我将其更改为使用时`glDrawElements`，屏幕上没有任何内容（它完全是黑色的）。

```
from OpenGL.GL import shaders
from OpenGL.arrays import vbo
from OpenGL.GL import *
from OpenGL.raw.GL.ARB.vertex_array_object import glGenVertexArrays, \
                                                  glBindVertexArray

import pygame

import numpy as np

def run():
    pygame.init()
    screen = pygame.display.set_mode((800,600), pygame.OPENGL)

    #Create the Vertex Array Object
    vertexArrayObject = GLuint(0)
    glGenVertexArrays(1, vertexArrayObject)
    glBindVertexArray(vertexArrayObject)

    #Create the VBO
    vertices = np.array([[0,1,0],[-1,-1,0],[1,-1,0]], dtype='f')
    vertexPositions = vbo.VBO(vertices)

    #Create the index buffer object
    indices = np.array([0,1,2], dtype='uint16')
    indexPositions = vbo.VBO(indices, target=GL_ELEMENT_ARRAY_BUFFER)

    indexPositions.bind()
    vertexPositions.bind()

    glEnableVertexAttribArray(0) # from 'location = 0' in shader
    glVertexAttribPointer(0, 3, GL_FLOAT, False, 0, None)

    glBindVertexArray(0)
    vertexPositions.unbind()
    indexPositions.unbind()

    #Now create the shaders
    VERTEX_SHADER = shaders.compileShader("""
    #version 330
    layout(location = 0) in vec4 position;
    void main()
    {
        gl_Position = position;
    }
    """, GL_VERTEX_SHADER)

    FRAGMENT_SHADER = shaders.compileShader("""
    #version 330
    out vec4 outputColor;
    void main()
    {
        outputColor = vec4(0.0f, 1.0f, 0.0f, 1.0f);
    }
    """, GL_FRAGMENT_SHADER)

    shader = shaders.compileProgram(VERTEX_SHADER, FRAGMENT_SHADER)

    #The draw loop
    while True:
        glUseProgram(shader)
        glBindVertexArray(vertexArrayObject)

        #glDrawArrays(GL_TRIANGLES, 0, 3) #This line works
        glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_INT, 0) #This line does not

        glBindVertexArray(0)
        glUseProgram(0)

        # Show the screen
        pygame.display.flip()

run() 
```

如果我只是注释掉`glDrawElements`并取消注释该`glDrawArrays`行，那么它可以正常工作，因此至少顶点 VBO 被正确输入。

我在这里做错了什么？我能够找到的所有 OpenGL 文档都表明我这样做是正确的，所以我显然误解了关于 OpenGL 本身或 PyOpenGL 包装器的一些东西。

**编辑**

更改 VAO 设置以使用更直接的 OpenGL 函数而不是 VBO 包装器，例如：

```
vertices = np.array([[0,1,0],[-1,-1,0],[1,-1,0]], dtype='f')
vertexPositions = glGenBuffers(1)
glBindBuffer(GL_ARRAY_BUFFER, vertexPositions)
glBufferData(GL_ARRAY_BUFFER, vertices, GL_STATIC_DRAW)

#Create the index buffer object
indices = np.array([0,1,2], dtype='uint16')
indexPositions = glGenBuffers(1)
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexPositions)
glBufferData(GL_ELEMENT_ARRAY_BUFFER, indices, GL_STATIC_DRAW)

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexPositions)
glBindBuffer(GL_ARRAY_BUFFER, vertexPositions)

glEnableVertexAttribArray(0) # from 'location = 0' in shader
glVertexAttribPointer(0, 3, GL_FLOAT, False, 0, None)

glBindVertexArray(0)
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0)
glBindBuffer(GL_ARRAY_BUFFER, 0) 
```

没什么区别。`glDrawArrays`仍然有效，`glDrawElements`但仍然无效。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T19:01:30.910

谢谢@NicolBolas。他激励我真正采用此代码并使其工作。而不是理论化:) 我删除了 vertexArrayObject（它是多余的，因为我们已经有用于顶点和索引的 VBO）。因此，您只需在 glDraw* 调用之前绑定索引和顶点缓冲区（以及属性）。当然，将`None`（空指针）传递给`glDrawElements`索引而不是`0`！

```
from OpenGL.GL import shaders
from OpenGL.arrays import vbo
from OpenGL.GL import *
from OpenGL.raw.GL.ARB.vertex_array_object import glGenVertexArrays, \
                                                  glBindVertexArray

import pygame

import numpy as np

def run():
    pygame.init()
    screen = pygame.display.set_mode((800,600), pygame.OPENGL|pygame.DOUBLEBUF)

    #Create the VBO
    vertices = np.array([[0,1,0],[-1,-1,0],[1,-1,0]], dtype='f')
    vertexPositions = vbo.VBO(vertices)

    #Create the index buffer object
    indices = np.array([[0,1,2]], dtype=np.int32)
    indexPositions = vbo.VBO(indices, target=GL_ELEMENT_ARRAY_BUFFER)

    #Now create the shaders
    VERTEX_SHADER = shaders.compileShader("""
    #version 330
    layout(location = 0) in vec4 position;
    void main()
    {
        gl_Position = position;
    }
    """, GL_VERTEX_SHADER)

    FRAGMENT_SHADER = shaders.compileShader("""
    #version 330
    out vec4 outputColor;
    void main()
    {
        outputColor = vec4(0.0f, 1.0f, 0.0f, 1.0f);
    }
    """, GL_FRAGMENT_SHADER)

    shader = shaders.compileProgram(VERTEX_SHADER, FRAGMENT_SHADER)

    #The draw loop
    while True:
        glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT)
        glUseProgram(shader)

        indexPositions.bind()

        vertexPositions.bind()
        glEnableVertexAttribArray(0);
        glVertexAttribPointer(0, 3, GL_FLOAT, False, 0, None)

        #glDrawArrays(GL_TRIANGLES, 0, 3) #This line still works
        glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_INT, None) #This line does work too!

        # Show the screen
        pygame.display.flip()

run() 
```

# javascript - javascript 在每个数字后插入

> ID：14365485
> 
> 赞同：0
> 
> 时间：2013-01-16T18:46:55.080
> 
> 标签：javascript, regex

我正在尝试在每次出现 javascript 数字后添加一个空格。

`"2tim"`将会`"2 tim"`

js

```
var v = '2tim';
v.replace(/(\d+)/, /\1 /); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T18:47:38.187

您的代码有 3 个问题：

1.  的第二个参数`replace`应该是一个字符串。
2.  要使用捕获的组，请使用美元符号。
3.  您不想将所有数字捕获到同一组 ( `\d+`)。只需捕获一位数字，并使正则表达式全局化。

```
var v = '2tim';
v = v.replace(/(\d)/g, '$1 '); 
```

这是小提琴：http: [//jsfiddle.net/qujsq/](http://jsfiddle.net/qujsq/)

* * *

如果您只想在一组数字后添加空格，*请*使用 a `+`：

```
var v = '12times';
v = v.replace(/(\d+)/g, '$1 '); 
```

# php - 保存记录时这个简单的演员表安全吗？

> ID：14365486
> 
> 赞同：2
> 
> 时间：2013-01-16T18:46:56.447
> 
> 标签：php, cakephp, cakephp-2.2

对于我在 CakePHP 中的大多数模型，我经常创建一个处理保存记录的函数。模型保存的默认行为是返回数据数组或 false。

我更喜欢这个函数只返回真/假。所以我将结果转换为（bool）。这是将某些东西转换为布尔值的有效方法吗？

它从来*没有*奏效，但我经常想知道这是否是一种糟糕的做法。

```
public function queue($url,$order=0)
{
    $result = $this->save(array(
        $this->alias => array(
            'agg_domain_id' => $domain_id,
            'order' => $order,
            'url' => $url
        )
    ));

    return (bool)$result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T18:58:29.373

来自 php.net：

> 要将值显式转换为布尔值，请使用 (bool) 或 (boolean) 强制转换。但是，在大多数情况下，强制转换是不必要的，因为如果运算符、函数或控制结构需要布尔参数，则值将自动转换。

因此，如果您这样做`if($this->queue('url',0))`，则不需要演员表。

但如果你这样做了，`if($this->queue('url',0) === true)`那么你需要投射。并且铸造`(bool)`是绝对合法的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T19:47:29.990

> 这是将某些东西转换为布尔值的有效方法吗？

## 是的

在您只想知道成功或失败的情况下这样做很好。

## 不好的时候

像这样强制转换返回值的唯一潜在问题是返回值是否可能是错误类型，例如：

```
array()
0
""
" " 
```

调用 save 总是返回嵌套数组或 false - 调用 save 时没有获得假阴性结果的范围。

# android - 从数据库中删除时出现 Android 错误（无法执行活动的方法）

> ID：14365487
> 
> 赞同：1
> 
> 时间：2013-01-16T18:46:56.340
> 
> 标签：android

我正在构建一个任务列表应用程序。对于每个任务，都会创建一个 RelativeLayout，其中包含一个 CheckBox 和一个带有任务名称的 TextView。然后将其添加到预先存在的 LinearLayout 中。那部分一切正常。

我添加了一个调用方法 deleteTask(View view) 的“删除任务”ImageButton。deleteTask() 从数据库中删除任务。当我尝试运行时，我得到**“java.lang.IllegalStateException：无法执行活动的方法”**以及一堆其他错误。

```
01-16 13:15:48.975: E/AndroidRuntime(16881): FATAL EXCEPTION: main
01-16 13:15:48.975: E/AndroidRuntime(16881): java.lang.IllegalStateException: Could not execute method of the activity
01-16 13:15:48.975: E/AndroidRuntime(16881):    at android.view.View$1.onClick(View.java:3591)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at android.view.View.performClick(View.java:4084)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at android.view.View$PerformClick.run(View.java:16966)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at android.os.Handler.handleCallback(Handler.java:615)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at android.os.Looper.loop(Looper.java:137)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at android.app.ActivityThread.main(ActivityThread.java:4931)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at java.lang.reflect.Method.invokeNative(Native Method)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at java.lang.reflect.Method.invoke(Method.java:511)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at dalvik.system.NativeStart.main(Native Method)
01-16 13:15:48.975: E/AndroidRuntime(16881): Caused by: java.lang.reflect.InvocationTargetException
01-16 13:15:48.975: E/AndroidRuntime(16881):    at java.lang.reflect.Method.invokeNative(Native Method)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at java.lang.reflect.Method.invoke(Method.java:511)
01-16 13:15:48.975: E/AndroidRuntime(16881):    at android.view.View$1.onClick(View.java:3586)
01-16 13:15:48.975: E/AndroidRuntime(16881):    ... 11 more
01-16 13:15:48.975: E/AndroidRuntime(16881): Caused by: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.widget.CheckBox
01-16 13:15:48.975: E/AndroidRuntime(16881):    at com.rook.todolist.MainActivity.deleteTask(MainActivity.java:177)
01-16 13:15:48.975: E/AndroidRuntime(16881):    ... 14 more 
```

这是我的代码。试图包含我认为相关的内容，如果需要，显然可以包含更多内容。

**由 ImageButton 调用的**deleteTask() ：****

 **```
public void deleteTask (View view) {

    // instantiate dbhandler
    DatabaseHandler db = new DatabaseHandler(this);

    // get tasks
    List<Task> tasks = db.getAllTasks();

    for(Task t : tasks) {
        CheckBox cb = (CheckBox) findViewById(t.getID() + 10000);
        if(cb.isChecked()) { db.deleteTask(t); }
    }

    buildTaskList();

}//end deleteTask() 
```

当我创建 CheckBoxes 时，它们需要有一个我可以为 LayoutParams 引用的 id，所以我将它们的 id 设置为 10,000 + 任务的 id。只是容易记住的东西。

buildTaskList() 只是从主 LinearLayout 中删除所有视图，并根据数据库中的任务重新构建它们。

**如果选中 CheckBox，则调用**deleteTask(Task task) 。****

 **```
// Deleting single task
public void deleteTask (Task task) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_TASKS, KEY_ID + " =?", new String[] { String.valueOf(task.getID()) });
} 
```

*删除操作仍在执行。*当我重新加载应用程序时，要删除的任务消失了。此外，我在第一次创建 deleteTask() 时对其进行了测试，并且它有效。

**编辑** 正如许多人指出的那样，该行`findViewById(t.getID() + 10000);`返回的是 ImageView 而不是复选框。但是我输入了日志语句以在创建它们的方法和 deleteTask() 方法中吐出 id，*并且 id 是相同的！* 分配给视图的 id 是否发生了变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:48:50.397

```
Caused by: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.widget.CheckBox
    at com.rook.todolist.MainActivity.deleteTask(MainActivity.java:177) 
```

您使用的 id`findViewById()`指的是 ImageView，您不能将其转换为 CheckBox。仔细检查您的视图 ID。

```
// This returns an ImageView...
CheckBox cb = (CheckBox) findViewById(t.getID() + 10000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:52:07.653

问题就在这里

```
01-16 13:15:48.975: E/AndroidRuntime(16881): Caused by: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.widget.CheckBox
01-16 13:15:48.975: E/AndroidRuntime(16881):    at com.rook.todolist.MainActivity.deleteTask(MainActivity.java:177) 
```

您正在**尝试将 ImageView 转换为 checkBox**，很可能在下面的代码行中

```
 CheckBox cb = (CheckBox) findViewById(t.getID() + 10000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:51:17.030

如日志：

> ClassCastException: android.widget.ImageView 不能转换为 android.widget.CheckBox

表示您正在尝试将 ImageView 转换为 Checkbox 。将您的代码更改为：

```
for(Task t : tasks) {
        View view = (View) findViewById(t.getID() + 10000);

        if( view instanceof CheckBox ) {
          CheckBox cb = (CheckBox) view;
          if(cb.isChecked()) { db.deleteTask(t); }
    }

    } 
```****

# c++ - 如何确定完成 fprint 格式化字符串需要多少个参数？

> ID：14365488
> 
> 赞同：2
> 
> 时间：2013-01-16T18:46:58.223
> 
> 标签：c++, c, arguments, printf

我的意思是像`"(%d%%%d) some text %s , %d%% %x %o %#x %#o \n"`. printf 系列函数以某种方式知道他们需要从这个字符串中获得多少个参数，因此不需要单独的参数。这个功能是在 c/c++ 中以单独的函数形式提供的，所以我可以编写自己的类似 printf 的函数吗？（是的，我故意放这些百分比来强调它可能变得多么复杂，所以它不是简单地计算百分比字符）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:52:03.063

family的问题`printf`在于它不安全，它*并不*真正知道或关心字符串或参数列表中有多少格式元素。

`printf`家庭使用一种叫做“可变函数”的东西；只有一个参数被命名（格式字符串），其他参数从堆栈中获取，而不考虑它们的类型或大小 - 它们的类型是从格式字符串推导出来的，这使得它类型不安全，并通过迭代找到要使用的参数数量字符串并查找所有格式说明符，这使其参数编号不安全。您可以编写可变参数函数；语法是

```
void foo(...); 
```

后来你可以使用[这些宏和类型](http://en.cppreference.com/w/cpp/utility/variadic)，虽然如果你使用 C++，你应该使用 C++11 的可变参数模板而不是 C 可变参数函数，因为可变参数模板是类型安全的 - 你不会在任何地方丢失类型信息，并且[通用引用](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)（但不太*感谢它们*）它们比可变参数函数更强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:02:03.643

printf 系列函数只知道一个参数，第一个参数......

它基本上扫描字符串，每次遇到它理解的格式说明符时，它都会从参数列表中提取该大小的下一个参数......这是一个容易损坏的行为。想象：

```
printf("%i",someInt); // fine
printf("%i",someLong); // depending on endianness and sized
                       // of those types could be the high or low 32 bits(probably)
printf("%i %i",someInt); // depending on abi could crash, read a int sized chunk
                         // of stack, or a register that would correspond to that 
                         // parameter. 
```

所以本质上不安全..
您应该注意警告，并且在编写可移植代码时执行以下操作：

```
size_t t = 5; //can be 32 or 64 bit depending on arch.
printf("%ull",(unsigned long long)t); 
```

编辑。我想我只回答了一半......您可以定义自己的可变参数函数，以下添加`count`参数数量并返回结果。

```
int sumList(int count, ...);
int main(int argc, const char * argv[])
{   
    printf("the answer is: %i",sumList(4,1,2,3,4));
    return 0;
}
int sumList(int count, ...)
{
    va_list args;
    va_start(args, count);
    int sum = 0;
    for (int i = 0; i<count; i++) {
        sum += va_arg(args, int);
    }
    va_end(args);
    return sum;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:01:46.783

不，没有用于解析 printf 样式格式字符串的标准库函数。如果您想编写自己的字符串格式化函数，那么我强烈建议您不要遵循 printf 示例。由于其他答案中提到的原因，它本质上是不安全的。由于某些语言中的词序发生了变化，因此本地化也存在问题。就个人而言，我会使用模板编写一个类型安全的函数并复制 .NET 样式的格式字符串。（实际上，我*确实*这样做了——工作量很大，但也很有趣。）

# c# - 无法从 Outlook 2010 中的通讯簿中删除联系人

> ID：14365489
> 
> 赞同：0
> 
> 时间：2013-01-16T18:47:08.957
> 
> 标签：c#, vsto, outlook-addin, outlook-2010

我可以将联系人添加到地址簿，但由于某种原因我无法删除它。我正在执行的代码如下。

```
String abName = "Name ofthe targetted address book";
Outlook.Folder addressBook;
if (targetFolder.Folders.OfType<Outlook.Folder>().Any(element
  => element.Name == abName))
  addressBook = targetFolder.Folders[abName] as Outlook.Folder;
else
  addressBook = targetFolder.Folders.Add(
    abName, Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
addressBook.ShowAsOutlookAB = true;

for (int i = addressBook.Items.Count - 1; i >= 0; i--)
  if (!stringList.Any(element 
    => element == addressBook.Items.OfType<Outlook.ContactItem>()
      .ToList()[i].Email1Address))
    addressBook.Items.OfType<Outlook.ContactItem>().ToList().RemoveAt(i); 
```

地址簿的获取和字符串的匹配也有效。我进入*RemoveAt*行以获得完全正确的联系人。执行删除时没有错误或其他消息。尽管如此，联系人列表仍然不受影响。

1.  为什么？
2.  我该怎么做才能真正删除联系人？

我怀疑我可能正在处理包含联系人的实际列表的**副本**。问题是，如果我不创建*List*，我不确定如何更改联系人列表。

因此，最有帮助的答案将阐明如何在特定条件下更改`addressBook`（或可能）。`addressBook.Items`例如，假设我们要删除所有名称以字母“Q”开头的联系人。

此时我只能想到一个超级丑陋的解决方法，它是如此丑陋，以至于我什至不在这里提及它。真的丑...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:17:17.027

您没有删除 Outlook 联系人。您正在从您自己的 List 对象中删除一个 OUTlook 对象。

你需要打电话`ContactItem.Delete`。

附带说明一下，在处理 COM 对象时不要使用多个点表示法，尤其是在循环中 - 每个点都会收到一个全新的 COM 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-05T07:38:21.747

这是一个解决方案

```
 private void ClearContact(Outlook.Application outlookApplication)
    {
        Outlook.MAPIFolder contactFolder = outlookApplication.Session.GetDefaultFolder(OlDefaultFolders.olFolderContacts);
        int total = contactFolder.Items.Count;
        while (total > 0)
        {
            // first index number is 1 not 0
            var contact = (Outlook.ContactItem)contactFolder.Items[1];
            contact.Delete();
            total = contactFolder.Items.Count;
        }
    } 
```

我使用 netoffice Outlook api [http://netoffice.codeplex.com/wikipage?title=Outlook_Example05](http://netoffice.codeplex.com/wikipage?title=Outlook_Example05) 并使用 while 循环删除所有联系人

# css - 如何连接选择器

> ID：14365493
> 
> 赞同：1
> 
> 时间：2013-01-16T18:47:13.150
> 
> 标签：css, css-selectors, sass

有没有办法写这个css：

```
div.some-class{
  ...
}
span.some-class{
  ...
} 
```

像这样使用scss？

```
.some-class{
  &div{
    ...
  }
  &span{
    ...
  }
} 
```

我尝试了上述方法，但它返回错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:27:47.397

这取决于你想要做什么。

您显示的示例将被解释为`.some-classdiv`，`.some-classspan`这将导致编译错误。本质上，与号代表父选择器。

如果`div.some-class`和`span.some-class`不共享相同的样式，您拥有的第一个块仍然是编写它的最有效方式。

如果它们共享*一些*相同的样式，您可以编写一个 mixin。

```
// Shared Styles
@mixin some-class {
  background: #f00;
  color: #fff;
}

div.some-class {
  @include some-class;
  ... other styles
}

span.some-class {
  @include some-class;
  ... other styles
} 
```

你也可以`@extend`是一个现有的类：

```
.some-class {
  background: #f00;
  color: #fff;
}

div.some-class {
  @extend .some-class;
  ... other styles
}

span.some-class {
  @extend .some-class;
  ... other styles
} 
```

如果您扩展现有类，该类必须是包含在文件中的根类（即它不能是嵌套类）。

也就是说，由于两个元素都有 class `some-class`，你可以很容易地定义常规 CSS：

```
.some-class {
  background: #f00;
  color: #fff;
}

div.some-class {
  ... other styles
}

span.some-class {
  ... other styles
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:50:22.683

我知道确实希望将您的代码组合成这样漂亮整洁的小块，但这是不可能的。编译代码时得到的错误非常清楚：

```
>>> Change detected at 14:46:18 to: test.scss
    error sass/test.scss (Line 2: Invalid CSS after "  &": expected "{", was "div{"

"div" may only be used at the beginning of a compound selector.) 
```

当然，如果你把它反转为`div&`，那么你会得到这个错误：

```
>>> Change detected at 14:48:01 to: test.scss
    error sass/test.scss (Line 2: Invalid CSS after "  div": expected "{", was "&{"

"&" may only be used at the beginning of a compound selector.) 
```

您唯一的选择是根本不嵌套。

```
.some-class {
    ...
}

div.some-class {
    ...
}

span.some-class {
    ...
} 
```

# android - Android 上的 Jsoup 抛出 NoClassDefFoundError: java.applet.Applet

> ID：14365495
> 
> 赞同：2
> 
> 时间：2013-01-16T18:47:15.633
> 
> 标签：android, applet, jsoup, noclassdeffounderror

这个问题已经通过规避解决了，但是如果有人想尝试找出解决方案，我将不予回答。对于任何寻求快速解决方案的人：我只需将 Jsoup 替换为 jericho ，它就可以正常工作[，](http://jericho.htmlparser.net/docs/index.html)没有任何问题。

如标题所述，我遇到了一个非常奇怪的问题。我正在做一些 html 抓取，这在我的计算机上运行良好，但是一旦我将其设为 Android apk，该库似乎就坏了。我正在使用 Jsoup 1.7.1。这是重复错误的示例代码。

```
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GetHtml updater = new GetHtml();
        updater.execute();
    }

    public class GetHtml extends AsyncTask<Void, Void, String>{

        @Override
        protected String doInBackground(Void... arg0) {
            Document doc;
            try {
                doc = Jsoup.connect("http://www.example.com").get();
                String header = doc.getElementsByTag("h1").get(0).text();
                return header;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return "";
        }

        @Override
        protected void onPostExecute(String arg0){
            ListView lv = (ListView)findViewById(R.id.listView1);
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_list_item_1, R.id.listView1);
            lv.setAdapter(adapter);

            adapter.add(arg0);
            adapter.notifyDataSetChanged();
        }
    }
} 
```

这会引发一堆错误，但最突出的是

```
01-16 19:30:47.793: E/AndroidRuntime(29082): Caused by: java.lang.NoClassDefFoundError: java.applet.Applet 
```

这很烦人，因为我看到很多使用 Jsoup 的项目都很好，还有教程。有谁知道是什么原因造成的？

哦，为了清楚起见，我将 Jsoup-1.7.1.jar 作为外部 jar 链接并复制到 $PROJECT_ROOT/libs 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:05:45.933

对于 API 11 或更高版本的目标，您不能从主 UI 线程访问网络。如果你这样做了，你会得到一个[NetworkOnMainThreadExeption](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。检查您的日志中是否存在该异常，因为您正在从主 UI 线程访问网络。

您可以通过将 jsoup 获取和处理放入[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - 如何从 Json 字符串中删除所有空格

> ID：14365496
> 
> 赞同：8
> 
> 时间：2013-01-16T18:47:16.410
> 
> 标签：c#, json, string, serialization, mono

> **可能重复：**
> [有效地从字符串中删除所有空格](https://stackoverflow.com/questions/2865863/removing-all-whitespace-from-a-string-efficiently)
> [在 .NET 中缩小缩进的 JSON 字符串](https://stackoverflow.com/questions/8913138/minify-indented-json-string-in-net)

我有一个这样的字符串：

```
{"languages" : [{"fluency": 4, "id": 15}], "address" : {"city_id" : 8341, "city_name" : "My city"}, "about" : null, "birthday" : "1988-03-18", "email" : "email@a.com", "id" : 3, "income" : 4} 
```

我想要一个像这样的紧凑/缩小字符串：

```
{"languages":[{"fluency":4,"id":15}],"address":{"city_id":8341,"city_name":"My city"},"about":null,"birthday":"1988-03-18","email":"email@a.com","id":3,"income":4} 
```

笔记：

*   我正在使用内置`System.Json`在我的应用程序中执行序列化。`JsonValue`我使用该方法检索对象的字符串表示形式`ToString ()`，但看起来我无法控制输出字符串的格式。
*   我想使用辅助方法来“缩小”JSON 字符串。我不想在项目中包含另一个第三方 Json 库。
*   我正在使用复杂的 JSON 数据结构（包括嵌套对象/数组）
*   我使用的是 Mono，而不是 .NET

# javascript - 将嵌套的淘汰视图模型解析为 JSON 的问题

> ID：14365498
> 
> 赞同：2
> 
> 时间：2013-01-16T18:47:32.860
> 
> 标签：javascript, jquery, knockout.js, viewmodel, knockout-2.0

### 问题

当我在工作和探索 knockoutjs 时，我在某个时候陷入了困境。我想将视图模型（和底层视图模型）序列化为 JSON。这将导致无限循环，因为子视图模型具有引用父视图模型的属性。解决此问题的最佳做法是什么？

### 编码

```
var Partner = function (parent) {
    var self = this;
    self.parent = parent;
    self.name = ko.observable('');
}

var ProjectViewModel = function () {
    var self = this;
    self.nr = ko.observable(0);
    self.tite = ko.observable('');
    self.partners = ko.observableArray();            

    self.addPartner = function () { self.partners.push(new Partner(self)) };
    self.removePartner = function (c) { self.partners.remove(c) };
};
var vm = new ProjectViewModel();
ko.applyBindings(vm);

$("#button").click(function () {
    alert(ko.toJSON(vm));
} 
```

### 到目前为止我尝试了什么

我尝试在合作伙伴视图模型中添加以下方法：

```
Partner.prototype.toJSON = function () {
            var copy = ko.toJS(self);
            delete copy.parent;
            return copy;
        } 
```

这仅适用于一个合作伙伴，如果 ProjectViewModel 有多个合作伙伴，则每个合作伙伴都将具有与最后一个合作伙伴相同的值。仅当我想将其序列化为 JSON 时才会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:15:35.303

有几种方法可以处理这种情况。KO的`ko.toJS`部分正确地处理了这个。它最终是`JSON.stringify`（`ko.toJS`在`ko.toJSON`导致错误之后调用。

您`toJSON`在原型上的方法非常接近，除了您想要处理`this`而不是`self`.

所以，它看起来像：

```
Partner.prototype.toJSON = function() {
  var copy = ko.toJS(this);
  delete copy.parent;
  return copy; 
}; 
```

其他处理方法：

1-实际上不要将您的父对象存储在子对象上，而只是根据传递给构造函数的参数直接在任何处理程序中引用它。

```
var Partner = function (parent) {
    var self = this;
    self.name = ko.observable(name);

    self.doSomething = function() {
        //can use "parent" directly here without storing it anywhere
    };
}; 
```

2-“隐藏”你的父母参考

```
var Partner = function (parent) {
    var self = this;
    self.meta = function() {};
    self.meta.parent = parent;
    self.name = ko.observable(name);    
}; 
```

您可以将您的`parent`价值放在一个函数后面（可以作为可观察对象的子属性）。当你的结构通过 转换为普通的 JS 对象时`ko.toJS`，函数的任何子属性都将丢失。

3-改变你的应用程序的结构，这取决于你想要做什么。假设父母想在孩子改名时做出反应。您可以传入一个回调，设置订阅，并在它更改时执行它

```
var Partner = function (nameChangedCallback) {
    var self = this;
    self.name = ko.observable(name);    

    if (typeof nameChangedCallback == "function") {
        self.name.subscribe(function() {
           nameChangedCallback.call(self, self);
        });
    }
}; 
```

# compilation - http://code.google.com/p/yaml-cpp/wiki/HowToParseADocument 上的完整示例 Yaml 程序无法编译

> ID：14365505
> 
> 赞同：3
> 
> 时间：2013-01-16T18:47:55.287
> 
> 标签：compilation, yaml-cpp

在 Linux 库上使用 G++ 4.6.2 是根据说明构建的。测试目录中的 run_tests 工作正常。

setenv YAML_HOME /nfs/site/proj/dt/ltt_test_15/work_area/ironchef/new_version/ironchef/trunk/yaml/yaml-cpp-0.5.0

ls $YAML_HOME 总计 640 16 CMakeCache.txt 0 build/ 0 libyaml-cpp.so.0.5@ 8 test/ 8 CMakeFiles/ 8 cmake_install.cmake 480 libyaml-cpp.so.0.5.0* 8 util/ 16 CMakeLists.txt 0 include/ 8 license.txt 8 yaml-cpp.pc 8 CTestTestfile.cmake 8 install.txt 8 matt_sandbox/ 8 yaml-cpp.pc.cmake 40 Makefile 0 libyaml-cpp.so@ 8 src/

cd matt_sandbox g++ -o test_yaml -g -I/usr/intel/pkgs/boost/1.48.0-gcc-4.6.2/include -I$YAML_HOME/include -I$YAML_HOME/include/yaml-cpp -I$YAML_HOME /include/yaml-cpp/node -I$YAML_HOME/include/yaml-cpp/node/detail -I$YAML_HOME/include/yaml-cpp/contrib main.cpp

编译器错误：main.cpp：在函数 `void operator>>(const YAML::Node&, Vec3&)' 中：main.cpp:25：错误：'YAML::Node::operator 中的 'operator>>' 不匹配[](const Key&) const [with ... 类似错误 .... main.cpp:51: error: 'class YAML::Parser' has no member named 'GetNextDocument'

[从http://code.google.com/p/yaml-cpp/wiki/HowToParseADocument](http://code.google.com/p/yaml-cpp/wiki/HowToParseADocument)上的完整示例复制并粘贴代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:59:03.703

该示例使用旧 API（版本 0.3.0），但您使用的是新 API（版本 0.5.0）。我已经更新了主页以明确这一点。

有关使用新 API 的示例，请参阅[http://code.google.com/p/yaml-cpp/wiki/Tutorial](http://code.google.com/p/yaml-cpp/wiki/Tutorial)。

# java - 当用户单击标题时，如何防止对 Java Swing JTable 列进行排序？

> ID：14365510
> 
> 赞同：1
> 
> 时间：2013-01-16T18:48:03.820
> 
> 标签：java, swing, sorting, jtable

我有一个有几列的 JTable。我想让**一些**列无法排序。我该怎么做？我被困在使用 Java 1.4 中，所以不能选择使用 TableRowSorter，因为它直到 1.6 才引入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:12:21.747

*   仅适用`RowSorter`于所需的列

*   [在帖子中替换](https://stackoverflow.com/a/12271011/714968)

（例如，只有pseudo_code，所有内容都是硬编码的，必须覆盖ColumnModel中的列）

```
if (column >= 0 && column < getModelWrapper().getColumnCount() 
    && isSortable(column)) { 
```

和

```
if (column >= 0 && column <=1  /*getModelWrapper().getColumnCount()*/ 
    && isSortable(column)) { 
```

在`public void toggleSortOrder(int column) {`

然后第二列不可排序

*   如果不能帮助您获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)证明您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:02:01.997

将 JTable 上的 rowSorter 设置为空。见[http://download.java.net/jdk7/archive/b123/docs/api/javax/swing/JTable.html#setRowSorter(javax.swing.RowSorter](http://download.java.net/jdk7/archive/b123/docs/api/javax/swing/JTable.html#setRowSorter(javax.swing.RowSorter) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:08:58.283

如果您想对一些而不是其他进行排序，则必须实现一个侦听器。我用过这样的东西：

```
table.getTableHeader().addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {
            int col= table.getTableHeader().columnAtPoint(e.getPoint());
            // column number col has been clicked -- sort if necessary,
            // discard the event if sorting is not desired.
            //
        }

    }); 
```

注意可以拖放行的表格；你可以禁用它

```
table.getTableHeader().setReorderingAllowed(false); 
```

# c# - 如何在运行时确定接口成员是否已实现？

> ID：14365512
> 
> 赞同：4
> 
> 时间：2013-01-16T18:48:08.773
> 
> 标签：c#, interface, implementation

我有一个名为的接口`IStructuredReader`，它从文件中读取一些结构化数据并将其显示在表单中。它有一个名为的成员`Sync()`，当实现时，它会扫描数据以查找用户指定的数据模式。

一些实现`IStructuredReader`没有同步功能。这些实现会抛出`NotImplementedException`该`Sync()`方法。我希望能够检查此方法是否正在实施，以便如果没有，我可以使表单上的按钮变暗。

我可以想到很多方法可以做到这一点，所有这些都显得笨拙和复杂：

1.  将方法分离`Sync`到自己的接口中，为那些支持能力的实现继承它，并尝试将读取器对象强制转换为它以识别能力，

2.  编写一个`NotImplementedAttribute`，用它装饰成员，并使用反射检查属性是否存在，

3.  向接口添加一个`HasSyncCapability`布尔属性。

有没有一种规范的方式来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T18:51:40.557

这听起来像你真的应该有两个接口。您的`Sync()`方法显然是在基本接口上添加功能，这表明这确实是一个单独的问题，因为它不是`IStructuredReader`. 我建议为支持此功能的类型添加第二个接口，以便在您的视图层中轻松检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:52:15.490

规范的方法是让接口公开将要实现的方法，所以我看到的最干净的解决方案是创建另一个可能`Syncronizable`只使用该方法调用的接口。如果您的对象实现了该接口，您就知道该方法在那里，这一点也不笨拙。使用反射或额外属性确实不如解决方案干净，但这并不意味着如果它能让你的生活更轻松，你就不应该去使用它们；）

# java - RESTEasy：找不到内容类型应用程序/json 类型的编写器

> ID：14365515
> 
> 赞同：8
> 
> 时间：2013-01-16T18:48:13.707
> 
> 标签：java, rest, maven, resteasy

我有一个消耗（应用程序/json）并产生（应用程序/json）的宁静服务（post）。此服务的单个参数是带注释的 java 对象。

我正在使用 org.jboss.resteasy.client.ClientRequest 将请求发送到服务。但是，我在客户端收到此异常和异常：

找不到内容类型应用程序/json 类型的编写器。

这是否意味着我缺少一些库 jar 或者我必须为 application/json 编写自己的编写器？

我正在使用 resteasy 2.3.3.Final

以下是我添加到我的 pom 中的各种依赖项，我认为它们可能相关：

```
 <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>2.3.3.Final</version>
    </dependency>

    <dependency>
        <groupId>com.fasterxml.jackson.jaxrs</groupId>
        <artifactId>jackson-jaxrs-json-provider</artifactId>
        <version>2.0.5</version>
    </dependency>

    <dependency>
       <groupId>org.jboss.resteasy</groupId>
       <artifactId>resteasy-jaxb-provider</artifactId>
       <version>2.3.4.Final</version>
    </dependency>

    <dependency>
       <groupId>org.jboss.resteasy</groupId>
       <artifactId>resteasy-jackson-provider</artifactId>
       <version>2.3.4.Final</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>1.3.0</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.3.0</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-12-08T02:48:50.387

如果您计划使用实现 JAX-RS 2.0 的较新版本的 resteasy，那么以下依赖项应该可以解决您的问题：

```
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jaxrs</artifactId>
    <version>3.0.5.Final</version>
</dependency>

<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>jaxrs-api</artifactId>
    <version>3.0.5.Final</version>
</dependency>

<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jaxb-provider</artifactId>
    <version>3.0.5.Final</version>
</dependency>

<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jackson2-provider</artifactId>
    <version>3.0.5.Final</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T07:02:59.237

```
<dependency>
      <groupId>org.codehaus.jackson</groupId>
      <artifactId>jackson-mapper-asl</artifactId>
      <version>${jackson-mapper-asl.version}</version>
      <scope>runtime</scope>
   </dependency>

   <dependency>
      <groupId>javax.xml.bind</groupId>
      <artifactId>jaxb-api</artifactId>
      <version>${jaxb-api.version}</version>
      <scope>runtime</scope>
   </dependency> 
```

这绰绰有余。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-24T14:07:16.650

如果您在项目中应用了所有必要的依赖项，请检查您的类是否实现了 Serializable。

```
@XmlRootElement
public class MyClass implements Serializable {
    //filds
} 
```

也许它可以解决你的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-11T14:52:05.607

我正在使用包含的所有库（maven 项目），但仍然在作为由 生成的独立应用程序运行时`maven-assembly-plugin`，我遇到了同样的错误，但是从 IDE 运行时它可以正常工作。

我也遇到了 log4j2 日志记录的问题，因为它在作为独立的 fat jar 应用程序运行时完全损坏（在 IDE 中运行良好），所以我首先专注于解决这个问题：

[运行由 shade 插件构建的独立应用程序时找不到 Log4j2 配置](https://stackoverflow.com/questions/34945438/log4j2-configuration-not-found-when-running-standalone-application-builded-by-sh)

所以我通过迁移解决了缺少提供程序和 log4j2 的`maven-assembly-plugin`问题`maven-shade-plugin`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-06T09:34:56.437

如果您使用的是 maven-assembly-plugin，则可能会出现此问题。以前的答案帮助我解决了这个问题，以及[这篇文章](https://stackoverflow.com/a/18538803/7652903)和[这篇文章](https://stackoverflow.com/a/6743609/7652903)。

我删除了这个

```
 <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>com.example.MainClass</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

并迁移到 maven-shade-plugin，我将其替换为：

```
 <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <createDependencyReducedPom>false</createDependencyReducedPom>
                            <transformers>
                                <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                    <mainClass>com.example.MainClass</mainClass>
                                </transformer>
                                <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                    <resource>META-INF/services/javax.ws.rs.ext.Providers</resource>
                                </transformer>
                            </transformers>
                            <filters>
                                <filter>
                                    <artifact>*:*</artifact>
                                    <excludes>
                                        <exclude>META-INF/*.SF</exclude>
                                        <exclude>META-INF/*.DSA</exclude>
                                        <exclude>META-INF/*.RSA</exclude>
                                    </excludes>
                                </filter>
                            </filters>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

# c - Winapi win32 编程 - 选项卡控件未显示

> ID：14365518
> 
> 赞同：1
> 
> 时间：2013-01-16T18:48:25.653
> 
> 标签：c, windows, winapi

我一直在研究一个选项卡控件，它只有在 winMain 中发布时才可见。当我尝试在 WM_CREATE 消息句柄中创建选项卡时，没有任何显示。这是我的代码：

```
#define WIN32_LEAN_AND_MEAN

#define IDC_STATIC                      -1
#define ID_FILE_EXIT                    101
#define ID_HELP_ABOUT                   102
#define ID_B_BLANK                      1001
#define ID_B_HOME                       1002
#define ID_B_SAVE                       1003

#include <strsafe.h>
#include <windows.h>
#include <CommCtrl.h>
#include <iostream>
#include <ShlObj.h>
#include <cstring>

HWND main_hwnd, tab_hwnd, tab0_hwnd, tab1_hwnd, tab2_hwnd, tab3_hwnd, tab4_hwnd;
HINSTANCE tab_hinst;
TCHAR HomePath[MAX_PATH*2], SavePath[MAX_PATH*2];
WNDCLASSEX wc;
bool success=FALSE;
MSG msg;
HWND button; //button1, button2;
static HWND text; // text1, text2, text3, text4;
TCITEM tie;
int focus = 0, NotifyCase = 0;

void ErrorExit(LPTSTR lpszFunction) 
{ 
    // Retrieve the system error message for the last-error code

    LPVOID lpMsgBuf;
    LPVOID lpDisplayBuf;
    DWORD dw = GetLastError(); 

    FormatMessage(
        FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        dw,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPTSTR) &lpMsgBuf,
        0, NULL );

    // Display the error message and exit the process

    lpDisplayBuf = (LPVOID)LocalAlloc(LMEM_ZEROINIT, 
        (lstrlen((LPCTSTR)lpMsgBuf)+lstrlen((LPCTSTR)lpszFunction)+40)*sizeof(TCHAR)); 
    StringCchPrintf((LPTSTR)lpDisplayBuf, 
        LocalSize(lpDisplayBuf) / sizeof(TCHAR),
        TEXT("%s failed with error %d: %s"), 
        lpszFunction, dw, lpMsgBuf); 
    MessageBox(NULL, (LPCTSTR)lpDisplayBuf, TEXT("Error"), MB_OK); 

    LocalFree(lpMsgBuf);
    LocalFree(lpDisplayBuf);
    ExitProcess(dw); 
}

// Step 4: The Window Procedure
LRESULT CALLBACK WndProc(HWND hwnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    switch(Msg)
    {
        case WM_CREATE:
            {
                tab_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD|WS_CLIPSIBLINGS,
                    CW_USEDEFAULT, CW_USEDEFAULT, 681, 338,
                    main_hwnd, NULL, tab_hinst, NULL);

                tab0_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD|WS_CLIPSIBLINGS,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                text = CreateWindow("Static","Home Directory",WS_CHILD | WS_VISIBLE,0,50,150,50,tab0_hwnd, 0, tab_hinst,0);
                text = CreateWindow("Static","C:\\",WS_CHILD | WS_VISIBLE,200,50,150,50,tab0_hwnd, 0, tab_hinst,0);
                button = CreateWindow("Button","Navigate to...", BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE ,350,42,100,25,tab0_hwnd,(HMENU)ID_B_HOME,tab_hinst,0);  
                text = CreateWindow("Static","Save Directory",WS_CHILD | WS_VISIBLE,0,100,150,50,tab0_hwnd, 0, tab_hinst,0);
                text = CreateWindow("Static","C:\\",WS_CHILD | WS_VISIBLE,200,100,150,50,tab0_hwnd, 0, tab_hinst,0);
                button = CreateWindow("Button","Save to...", BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE ,350,92,100,25,tab0_hwnd,(HMENU)ID_B_SAVE,tab_hinst,0);

                tab1_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD|WS_CLIPSIBLINGS,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                tab2_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD|WS_CLIPSIBLINGS,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                tab3_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD|WS_CLIPSIBLINGS,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                tab4_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD|WS_CLIPSIBLINGS,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                tie.mask = TCIF_TEXT;
                tie.pszText = "Paths";
                TabCtrl_InsertItem(tab_hwnd, 0, &tie);
                tie.pszText = "Output";
                TabCtrl_InsertItem(tab_hwnd, 1, &tie);
                tie.pszText = "Parameters";
                TabCtrl_InsertItem(tab_hwnd, 2, &tie);
                tie.pszText = "Configurations";
                TabCtrl_InsertItem(tab_hwnd, 3, &tie);
                tie.pszText = "Run";
                TabCtrl_InsertItem(tab_hwnd, 4, &tie);

                HMENU hMenu, hSubMenu;

                hMenu = CreateMenu();

                hSubMenu = CreatePopupMenu();
                AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu, "&File");
                AppendMenu(hSubMenu, MF_STRING, ID_FILE_EXIT, "&Exit");

                hSubMenu = CreatePopupMenu();
                AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu, "&Help");
                AppendMenu(hSubMenu, MF_STRING, ID_HELP_ABOUT, "&About");

                SetMenu(hwnd, hMenu);
            }
            break;
        case WM_NOTIFY:
            switch(((LPNMHDR)lParam) ->code)
            {
                case TCN_SELCHANGING:
                    switch(TabCtrl_GetCurFocus(tab_hwnd))
                    {
                        case 0:
                            ShowWindow(tab0_hwnd,SW_HIDE);
                            break;
                        case 1:
                            ShowWindow(tab1_hwnd,SW_HIDE);
                            break;
                        case 2:
                            ShowWindow(tab2_hwnd,SW_HIDE);
                            break;
                        case 3:
                            ShowWindow(tab3_hwnd,SW_HIDE);
                            break;
                        case 4:
                            ShowWindow(tab4_hwnd,SW_HIDE);
                            break;
                        default:
                            return DefWindowProc(hwnd, Msg, wParam, lParam);
                            break;
                    }
                    break;
                case TCN_SELCHANGE:
                    switch(TabCtrl_GetCurFocus(tab_hwnd))
                    {
                        case 0:
                            ShowWindow(tab0_hwnd,SW_SHOW);
                            break;
                        case 1:
                            ShowWindow(tab1_hwnd,SW_SHOW);
                            break;
                        case 2:
                            ShowWindow(tab2_hwnd,SW_SHOW);
                            break;
                        case 3:
                            ShowWindow(tab3_hwnd,SW_SHOW);
                            break;
                        case 4:
                            ShowWindow(tab4_hwnd,SW_SHOW);
                            break;
                        default:
                            return DefWindowProc(hwnd, Msg, wParam, lParam);
                            break;
                    }
                    break;
                default:
                    return DefWindowProc(hwnd, Msg, wParam, lParam);
            }
            break;
        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case ID_FILE_EXIT:
                    PostMessage(hwnd, WM_CLOSE, 0, 0);
                    break;
                case ID_HELP_ABOUT:
                    return MessageBox(0, "This program is an alteration of ...", "About", MB_OK);
                    //return DefWindowProc(hwnd2,0,0,0);
                case ID_B_HOME:
                    MessageBox(tab0_hwnd,"HERE","OKAY",NULL);
                    break;
                case ID_B_SAVE:
                    break;
                case ID_B_BLANK:
                    break;
                default:
                    return DefWindowProc(hwnd, Msg, wParam, lParam);
            }
            break;
        case WM_CLOSE:
            DestroyWindow(hwnd);
            break;  
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            return DefWindowProc(hwnd, Msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    tab_hinst = hInstance;

    //Step 1: Registering the Window Class
    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = "Home";
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    if(!RegisterClassEx(&wc))
        MessageBox(NULL, "Window Registration Failed!", "Error!", MB_ICONEXCLAMATION | MB_OK);

    // Step 2: Creating the Window
    main_hwnd = CreateWindowEx(
        WS_EX_CLIENTEDGE,
        "Home",
        "The Home page",
        WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX,
        CW_USEDEFAULT, CW_USEDEFAULT, 700, 400,
        NULL, NULL, hInstance, NULL);

    if(main_hwnd == NULL) {
        MessageBox(NULL, "Window Creation Failed!", "Error!", MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(main_hwnd, nCmdShow);
            ShowWindow(tab_hwnd, SW_SHOW);
            ShowWindow(tab0_hwnd, SW_SHOW);
    UpdateWindow(main_hwnd);

    // Step 3: The Message Loop
    do{
        PeekMessage(&msg, NULL, NULL, NULL, PM_REMOVE);
        /* Translate virtual-key messages into character messages */
        TranslateMessage(&msg);
        /* Send message to WindowProcedure */
        DispatchMessage(&msg);
    } while(msg.message!=WM_CLOSE && msg.message!=WM_QUIT);
    return msg.wParam;
} 
```

我相信代码应该遵循的过程如下： 1\. 创建主窗口`main_hwnd` 2\. 转到 WM_CREATE 并运行此代码 3\. 在此期间它创建`tab_hwnd`, `tab0_hwnd`, ..., `tab4_hwnd` 4\. 然后返回到 winMain, 和显示窗户。之后它到达循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:02:53.653

您的 main_hwnd 是*在* `CreateWindowEx`退货后分配的，因此始终`NULL`是`WM_CREATE`交付时间。您可以使用`hwnd`your 的参数`WndProc`而不是`main_hwnd`.

通过此修改，如果我还添加`InitCommonControls()`到`WinMain`（链接到`comctl32`库）的开头，它对我有用。

# internet-explorer - 我们尝试过的 IE 字体问题和解决方案

> ID：14365520
> 
> 赞同：4
> 
> 时间：2013-01-16T18:48:39.657
> 
> 标签：internet-explorer, fonts, cross-browser, font-face, webfonts

我知道这是一个常见问题，我尝试了几乎所有我能找到的解决方案，我想知道显示一点代码是否会更有用。

# 问题

我正在尝试为客户实现 4 个字体。当前文件是使用 font-squirrel 生成的。但是，这些字体根本不适用于 IE 7/8，部分适用于 IE9。

*字体本身的跨浏览器渲染不是这里的问题，我只是想让它显示出来。*

# 我们尝试过的

我们（在我工作的公司）花了很多时间做以下事情：
- 我们发现了多种语法，字体松鼠的语法更完整。
- 在页面加载后的几秒钟内重新加载 JavaScript 中的 CSS（适用于旧项目）。
- 检查所有语法问题。
- 检查是否有 404 错误
- 使用相同的名称，但字体粗细不同
- 尝试添加 ?#iefix 和使用的特定格式

# 截屏

![在此处输入图像描述](../Images/aedd3938940ef5b34b37b7483377d843.png)

# 示例代码

您可以在以下位置看到它：http: [//dev.phin.fr/fontsie/](http://dev.phin.fr/fontsie/)

# 句法

```
@font-face {
            font-family: 'DidotBoldItalic';
            src: url('fonts/DidotHTF-24BoldItalic.eot');
            src: url('fonts/DidotHTF-24BoldItalic.ttf') format('truetype'), url('fonts/DidotHTF-24BoldItalic.svg') format('svg');
            font-weight: normal;
            font-style: normal;
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:13:32.777

我冒昧地从您的示例中下载了所有文件和代码。

我注意到您的 CSS 声明中缺少 « **local('☺')** » 属性，请查看以下示例的第三行：

```
@font-face {
    font-family: 'SofiaProBold';
    src: url('Sofia-Pro-Bold.eot');
    src: local('☺'), url('Sofia-Pro-Bold.ttf') format('truetype'), url('Sofia-Pro-Bold.svg') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

[您可以在http://imageftw.com/uploads/20130116/font-fix.png](http://imageftw.com/uploads/20130116/font-fix.png)在 IE8 (PC) 中查看结果

这个小技巧解决了 Sofia 字体的问题，但不幸的是，它不适用于 Didot 字体。我可以假设该字体最初不是网络字体或具有版权，而 fontsquirrel 无法对其进行转换。

以下只是我**个人的看法**。

使用字体时，请尝试将所有 @font-face 声明放在包含所有字体文件的同一目录中的 CSS 文件中，然后将此类 CSS 文件链接到`<head>`文档的。

例子：

```
/fonts/myfont/myfont.css « add to the document's <head>
/fonts/myfont/myfont.woff
/fonts/myfont/myfont.eot
/fonts/myfont/myfont.ttf
/fonts/myfont/myfont.svg 
```

这不仅可以更容易地找到应用的@font-face，而且还可以避免在`url('myfont/font.ttf')`属性中使用相对/绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:15:39.663

请到这里：[http ://www.w3schools.com/cssref/css3_pr_font-face_rule.asp](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)

IE 6、7 和 8 将无法工作。每个浏览器对字体的渲染之间的不一致是一个众所周知的问题。在我看来——根据你的屏幕截图——现代浏览器的发展也值得期待。所有基于 webkit 的浏览器（safari、chrome 和 opera）在渲染上应该比 firefox 或 9 更接近。

# c# - 简单的按钮动画

> ID：14365525
> 
> 赞同：3
> 
> 时间：2013-01-16T18:48:58.110
> 
> 标签：c#, .net, animation, button

我正在努力学习`.NET`编程。作为我学习的一部分，我尝试在按钮上制作一些效果。它正在工作......但没有我想象的那么顺利！有没有更好的方法来做到这一点？先感谢您！

我的需要：

有3个按钮。当您将鼠标悬停在其中一个上时，它会展开，当您将鼠标从该按钮移开时，它会返回到其初始大小。

```
private void button1_MouseHover(object sender, EventArgs e)
    {
        button1.BackColor = Color.White;
        button1.Width = 130;
        button1.BringToFront();            
    }

    private void button1_MouseLeave(object sender, EventArgs e)
    {
        button1.BackColor = Color.Red;
        button1.Width = 75;         
    }

    private void button2_MouseHover(object sender, EventArgs e)
    {
        button2.BackColor = Color.Gray;
        button2.Width = 130;
        button2.BringToFront();            
    }

    private void Form1_MouseLeave(object sender, EventArgs e)
    {
        button2.BackColor = Color.Red;
        button2.Width = 75;

    }

    private void button3_MouseHover(object sender, EventArgs e)
    {
        button3.BackColor = Color.DimGray;
        button3.Width = 130;
        button3.BringToFront();
    }

    private void button3_MouseLeave(object sender, EventArgs e)
    {
        button3.BackColor = Color.Red;
        button3.Width = 75;

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T19:08:16.560

所以首先，你不想做同样的事情 3 次。创建一个方法来为按钮添加适当的处理程序，然后只需编写*一次*代码来处理任何给定的按钮。

请注意，您可以进入扩展/收缩刻度处理程序并使用该`percentComplete`值来设置高度，沿光谱移动颜色（这将涉及一些颜色数学）或更改任何其他方面按钮。如果你*真的*有动力去概括它，你可以在方法中添加一个参数，`Action<double>`根据给定的进度百分比对对象做一些事情。

```
public void AddAnimation(Button button)
{
    var expandTimer = new System.Windows.Forms.Timer();
    var contractTimer = new System.Windows.Forms.Timer();

    expandTimer.Interval = 10;//can adjust to determine the refresh rate
    contractTimer.Interval = 10;

    DateTime animationStarted = DateTime.Now;

    //TODO update as appropriate or make it a parameter
    TimeSpan animationDuration = TimeSpan.FromMilliseconds(250);
    int initialWidth = 75;
    int endWidth = 130;

    button.MouseHover += (_, args) =>
    {
        contractTimer.Stop();
        expandTimer.Start();
        animationStarted = DateTime.Now;
        button.BackColor = Color.DimGray;
    };

    button.MouseLeave += (_, args) =>
    {
        expandTimer.Stop();
        contractTimer.Start();
        animationStarted = DateTime.Now;
        button.BackColor = Color.Red;
    };

    expandTimer.Tick += (_, args) =>
    {
        double percentComplete = (DateTime.Now - animationStarted).Ticks
            / (double)animationDuration.Ticks;

        if (percentComplete >= 1)
        {
            expandTimer.Stop();
        }
        else
        {
            button.Width = (int)(initialWidth +
                (endWidth - initialWidth) * percentComplete);
        }
    };

    contractTimer.Tick += (_, args) =>
    {
        double percentComplete = (DateTime.Now - animationStarted).Ticks
            / (double)animationDuration.Ticks;

        if (percentComplete >= 1)
        {
            contractTimer.Stop();
        }
        else
        {
            button.Width = (int)(endWidth -
                (endWidth - initialWidth) * percentComplete);
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T19:12:50.093

如果您使用的是**WinForms**，动画将相当痛苦，您必须自己通过`Timer`对象来处理它们。

如果您正在进入 .NET 并希望使用动画和样式制作看起来很酷的应用程序，我强烈建议您改用**WPF**。它可以通过*C#*或*XAML*轻松制作动画。

虽然在 WinForms 中仍然可以使用，但由于这些功能已经内置到 WPF 中（并已优化），因此需要更多的开发时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:09:38.430

当您修改控件属性时，它会立即生效。您想要的是通常被称为某种类型的淡入淡出或补间的东西。可能有一些库可以做到这一点，但如果您想自己编写这个以取乐，您可以使用 Timer 对象，并在每次滴答时更新颜色。

您要做的是在某处将颜色设置为 TargetColor（这是您编写的变量或属性），然后启动一个可能每 10 毫秒计时一次的计时器。在每个滴答声中，您都会查看开始时间，以及从那时起已经过去了多长时间。如果您希望动画发生一整秒，那么就是 1000 毫秒。因此，在每个滴答声中，您查看已经过去的时间量，可能是 200 毫秒，然后除以 200/1000 以获得您进入动画的时间比例。然后查看起始颜色和目标颜色之间的差异，将该差异乘以分数，然后将结果添加到起始颜色。换句话说，一个持续 1000 毫秒的动画播放 200 毫秒，意味着你有 20% 的时间进入了动画。

你可以做很多事情来完善它。也许有一个子类 Button 控件，它封装了计时器并公开了函数/属性来跟踪开始/结束颜色、动画过渡时间等。大多数像这样的动画 UI 功能让您指定动画应该持续多长时间，然后它插入**中间**状态，因为它转换。这就是补间这个术语的由来，因为它来自于通过 inbetweening 从一种状态过渡到另一种状态

# c++ - Visual Studio C++ 2010。运行没有可再发行文件的 exe

> ID：14365533
> 
> 赞同：0
> 
> 时间：2013-01-16T18:49:17.813
> 
> 标签：c++, visual-studio-2010, exe

> **可能重复：**
> [如何使用 Visual Studio Express 2005 制作完全静态链接的 .exe？](https://stackoverflow.com/questions/37398/how-do-i-make-a-fully-statically-linked-exe-with-visual-studio-express-2005)

我注意到，如果您尝试运行使用 VSC++ 编译的程序，则需要安装可再发行组件。有什么方法可以让你的 exe 只需要你使用的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:53:43.967

如果没有可再发行组件中的运行时库的一部分，您将无法运行程序。但是，您可以将 redist 静态链接到 exe。请参见此处：[C++ 可执行文件 - MSVCR100.dll 未找到错误](https://stackoverflow.com/questions/6976940/c-executable-msvcr100-dll-not-found-error)

# syntax - 初学者 SML 语法

> ID：14365537
> 
> 赞同：0
> 
> 时间：2013-01-16T18:49:33.110
> 
> 标签：syntax, sml

我对 SML 很陌生。我目前正在做一个检查手机是否平衡的项目。

我的数据类型 mobile 定义如下：

```
datatype mobile = Object of int 
                | Wire   of mobile * mobile 
```

然后我有一个权重函数来检查手机的重量：

```
fun weight (Object w)   = w 
  | weight (Wire (l,r)) = weight l + weight r 
```

我现在正在尝试检查手机是否平衡。我有以下内容：

```
fun balanced (Object w)   = true 
  | balanced (Wire (l,r)) = if weight l = weight r and balanced l and balanced r then true else false 
```

但是，我不断收到错误消息：

```
stdIn:18.19-18.31 Error: syntax error: deleting  AND ID
stdIn:18.34 Error: syntax error found at AND 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:16:34.480

正如 Brian 指出的那样，我们在 SML 中使用`andalso`和。`orelse`

但是，当正确修复时，代码中没有错误。

同样正如 Andreas Rossberg 所指出的，当你写下表格的表达式时

```
if b then 
  true
else
  false 
```

那你应该马上想到[这张图片](http://static.quickmeme.com/media/social/qm.gif)，并用表情来交换`b`，因为它显然是一样的。

鉴于此，您的`balanced`函数最终看起来像这样

```
fun balanced (Object w)   = true
  | balanced (Wire (l,r)) = weight l = weight r andalso
                            balanced l andalso balanced r 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-22T10:36:39.127

顺便说一句，这是确定移动设备是否平衡的一种非常低效的方法，因为子树的权重是一遍又一遍地计算的。考虑一个函数 weight_of_balanced_mobile，如果移动设备不平衡，则返回 NONE，如果平衡，则返回 SOME w。

```
fun weight_of_balanced_mobile (Object w) = SOME w
  | weight_of_balanced_mobile (Wire (l,r)) =
       case weight_of_balanced_mobile l
         of NONE => NONE
          | SOME u => case weight_of_balanced_mobile r
                        of NONE => NONE
                         | SOME v => if u = v then SOME (u+v) else NONE;

 fun is_balanced mobile =
        case weight_of_balanced_mobile mobile
          of NONE => false
           | SOME _ => true; 
```

这里的问题是你的“平衡”函数只返回一点信息，而为了有效地计算，我们需要更多信息。我开始将布尔值视为危险信号。

另一种构建计算结构以便获得更多信息的方法（不仅仅是平衡的东西，而是*它*的重量）是传递一个延续。我们将创建一个函数，它接受一个移动设备和一个“如果这个移动设备是平衡的怎么办”参数。哦，如果它不是那么好，让我们让它使用一个 'value 值。

```
(* val check_balance : mobile -> 'a -> (int -> 'a) -> 'a *)
fun check_balance (Object w) _ f = f w
  | check_balance (Wire (l,r)) d f =
       check_balance l d (fn u =>
          check_balance r d (fn v =>
             if u = v then f (u+v) else d));

fun is_balanced mobile = check_balance mobile false (fn _ => true); 
```

如果你看的恰到好处，这和之前的代码倒过来是一样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T19:03:47.400

更改`and`为`andalso`可以克服`syntax error found at AND`错误。

```
- fun balanced (Object w) =
    true | balanced(Wire(l,r)) = 
    if weight l = weight r andalso balanced l andalso r
    then
     true
    else
     false; 
```

但是你会得到这个：

```
stdIn:5.8-5.29 Error: operand of andalso is not of type bool [tycon mismatch]
  operand: mobile
  in expression:
    (balanced l) andalso r 
```

这是因为`weight`函数的类型`val weight = fn : mobile -> int`不满足布尔约束，`andalso`因为它返回一个`int`.

# html - html5语音输入语言

> ID：14365538
> 
> 赞同：0
> 
> 时间：2013-01-16T18:49:35.920
> 
> 标签：html

您好，我正在对语音转文本技术进行一些研究，我想知道 html5 附带的语音输入对象支持哪些口语。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:52:43.907

无 - 它只是一个连接到语音识别系统的钩子。它不是系统本身。

# sqlite - 修复从磁盘数据恢复中检索到的损坏的 sqlite 数据库

> ID：14365540
> 
> 赞同：1
> 
> 时间：2013-01-16T18:50:00.323
> 
> 标签：sqlite, hex, corrupt-data

所以我使用 testdisk 从格式化的磁盘中提取了一个 sqlite 数据库。我有这个文件，但它中间有一堆奇怪的东西，看起来像是来自某物的一些日志。关键是它被严重损坏了。

不过，我确实有早期版本的 sqlite 文件....

该文件的早期版本包含另一个文件中包含奇怪内容的所有数据。损坏的文件具有未损坏文件的较新条目似乎没有问题。

我尝试使用各种 echo .dump 方法修复损坏的文件，但我得到一个空文件。

```
Baxters-MacBook-Pro:desktop bax$ sqlite3 corrupted.sqlite3
SQLite version 3.7.13 2012-06-11 02:05:22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> pragma integrity_check;
Error: database disk image is malformed 
```

倾销给了我：

```
PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
/****** CORRUPTION ERROR *******/
/****** database disk image is malformed ******/
/****** ERROR: database disk image is malformed ******/
/****** CORRUPTION ERROR *******/
/****** database disk image is malformed ******/
/****** ERROR: database disk image is malformed ******/
/**** ERROR: (11) database disk image is malformed *****/
ROLLBACK; -- due to errors 
```

我尝试在 HEX 中愚蠢地加入他们。我将旧（未损坏的数据库）的内容粘贴到损坏文件中的重叠信息上。也就是说，未损坏文件中的最后一位数据是时间戳`15:15:14.419734`（数据库来自旧的 rails 应用程序）。我在损坏的文件中发现了这一点，并将未损坏的文件十六进制粘贴到损坏文件中该点之前的所有内容上。所以现在它打开了，但毫不奇怪，我只能从未损坏的文件中获取数据（大约 160 个条目中的 122 个）。

两个连接的位置如下所示：

```
15:15:14.419734√Ö√£)    �√ÖYAA{1B, 8B 
```

`1B, 8B`是条目的开始。

十六进制：

```
31353A 31353A31 342E3431 39373334 C3851FC3 A3290900 
01C38501 59014141 7B31422C 203842 
```

有什么办法可以让我加入这两个数据库，还是我被吓到了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:07:42.837

在 SQLite 文件中，表数据存储在 b-trees 中；您的连接文件很可能在较高的树级别中不包含正确的指针。

常见问题解答[说](http://www.sqlite.org/faq.html#q21)：

> 根据您的数据库损坏的严重程度，您可以通过使用 CLI 将架构和内容转储到文件然后重新创建来恢复一些数据。不幸的是，一旦矮胖子从墙上掉下来，一般不可能再把他放回去。

但你也可以

*   阅读[文件格式文档](http://www.sqlite.org/fileformat2.html)并尝试手动或使用一些临时工具从文件中提取尽可能多的数据；或者
*   花钱请[人为](http://www.hwaci.com/sw/sqlite/prosupport.html)你做这件事。

# javascript - 确定 JavaScript 闭包中可访问的变量集

> ID：14365541
> 
> 赞同：2
> 
> 时间：2013-01-16T18:50:06.783
> 
> 标签：javascript, scope, closures

“[JavaScript 函数] 在内部存储它们可能引用的在其封闭范围中定义的任何变量。”

我怎样才能确定那组变量是什么？

例如，*Effective JavaScript*中的 David Herman给出了这个函数（和闭包）：

```
function sandwichMaker() {

    var magicIngredient = "peanut butter";

    function make(filling) {
        return magicIngredient + " and " + filling;
    }

    return make;
}

var f = sandwichMaker();

document.writeln("<p>" + f("jelly") + "</p>");
document.writeln("<p>" + f("bananas") + "</p>");
document.writeln("<p>" + f("marshmallows") + "</p>"); 
```

当然，*magicIngredient*是 make() 可访问的变量，但还有什么？如果 SandwichMaker 本身包含在一个函数中会怎样？然后是全局变量。当函数在当前范围内查找相关值时，它在看什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:07:42.910

> 如果 SandwichMaker 本身包含在一个函数中会怎样？然后是全局变量。

是的，父函数中的所有变量都可以访问（如果它们没有被遮蔽）。然后，最高范围的函数从全局范围继承。

> 当函数在当前范围内查找相关值时，它在看什么？

您可以使用调试器进行检查。在 中插入一条`debugger;`语句`make`，然后执行它并查看您的开发工具。你会看到这样的东西：

```
Scope Chain
    0\. make (currently executed):
        this: (+)Window
        arguments: (+)Arguments
        filling "jelly"
    1\. sandwichMaker:
        arguments: (+)Arguments
        magicIngredient: "peanut butter"
        make: (+)Function
    Global
        AnonXMLHttpRequest: …
        ApplicationCache: …
        Array: …
        … 
```

也看看这篇很棒的文章：[http ://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/](http://dmitrysoshnikov.com/ecmascript/es5-chapter-3-2-lexical-environments-ecmascript-implementation/)

Chrome Devtools 的示例视图：

[![](../Images/7d687558c7e3e05136ed4f10a2aa1a47.png)](https://i.stack.imgur.com/YJch7.png)

[（来自[www.briangrinstead.com](https://briangrinstead.com/blog/devtools-feature-request-console-scope/)）]：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:19:53.683

JavaScript 使用*函数作用域*。这很容易理解 - 在函数中声明的任何内容都具有该函数的范围以及任何更高的范围。

*闭包*可以被认为是两个组合在一起的东西：一个特定的范围和**一个**特定的时间点（当函数被创建时）。

> 当然，magicIngredient 是 make() 可访问的变量，但还有什么？

在创建时范围内可访问的任何内容`make`。这包括`make`函数中的所有变量以及任何更高的范围。据说 make 的作用域是**封闭**在它创建时存在的作用域之上，总是允许它访问`magicIngredient`.

> 如果 SandwichMaker 本身包含在一个函数中会怎样？

然后`make`也可以访问该范围（因为它在`make`创建时就存在）。

> 然后是全局变量。当函数在当前范围内查找相关值时，它在看什么？

解释器将在当前执行的范围内搜索任何引用的变量。如果找不到它们，它将在下一个更高的范围内查找。它将继续看起来越来越高，直到找到变量或用完范围（全局范围是最高的，也就是`window`在浏览器中运行的 javascript 的对象）。

一个相关的概念是*阴影*- 两个变量在父/子范围内可以具有相同的名称，子被称为“影子”父，因为它将优先。请注意，这是一种不好的做法。

理解闭包和作用域如何工作的最简单的方法是理解一个简单的工厂模式，比如[这个](http://jsfiddle.net/rrDWb/)。当内部函数被创建并返回时，它会在那个时间点绑定到那个范围，并且即使在值不再存在之后也会继续警告正确的值。

希望这会有所帮助-一个问题中塞满了很多问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:57:46.813

假设上面`function sandwichMaker()`定义了一个变量...

```
var something = 'something';
function sandwichMaker () {
... 
```

您可以`something`从内部`sandwichMaker()`和从内部访问`make()`。

外部变量可以从函数内部访问。如果您要设置`var something = 'something else'`inside `make()`，那么您将有效地将外部隐藏`var something`在`make()`函数本身内。但是，您可以只设置`something = 'something else'`，并且该值将在所有范围内发生变化。如果您再次声明该变量，它只会隐藏该值。

# python - 将 CSV 文件导入为 pandas DataFrame

> ID：14365542
> 
> 赞同：122
> 
> 时间：2013-01-16T18:50:15.153
> 
> 标签：python, pandas, csv, dataframe

将 CSV 文件读入[pandas DataFrame](https://pandas.pydata.org/pandas-docs/stable/getting_started/10min.html)的 Python 方法是什么（然后我可以将其用于统计操作，可以有不同类型的列等）？

我的 CSV 文件`"value.txt"`包含以下内容：

```
Date,"price","factor_1","factor_2"
2012-06-11,1600.20,1.255,1.548
2012-06-12,1610.02,1.258,1.554
2012-06-13,1618.07,1.249,1.552
2012-06-14,1624.40,1.253,1.556
2012-06-15,1626.15,1.258,1.552
2012-06-16,1626.15,1.263,1.558
2012-06-17,1626.15,1.264,1.572 
```

在 R 中，我们将使用以下方法读取此文件：

```
price <- read.csv("value.txt") 
```

这将返回一个 R data.frame：

```
> price <- read.csv("value.txt")
> price
     Date   price factor_1 factor_2
1  2012-06-11 1600.20    1.255    1.548
2  2012-06-12 1610.02    1.258    1.554
3  2012-06-13 1618.07    1.249    1.552
4  2012-06-14 1624.40    1.253    1.556
5  2012-06-15 1626.15    1.258    1.552
6  2012-06-16 1626.15    1.263    1.558
7  2012-06-17 1626.15    1.264    1.572 
```

有没有一种 Pythonic 方式来获得相同的功能？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2013-01-16T18:56:20.563

[大熊猫](http://pandas.pydata.org/)救援：

```
import pandas as pd
print pd.read_csv('value.txt')

        Date    price  factor_1  factor_2
0  2012-06-11  1600.20     1.255     1.548
1  2012-06-12  1610.02     1.258     1.554
2  2012-06-13  1618.07     1.249     1.552
3  2012-06-14  1624.40     1.253     1.556
4  2012-06-15  1626.15     1.258     1.552
5  2012-06-16  1626.15     1.263     1.558
6  2012-06-17  1626.15     1.264     1.572 
```

这将返回[类似于](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)`R's`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-05-21T05:33:36.220

要将 CSV 文件作为 pandas DataFrame 读取，您需要使用[**`pd.read_csv`**](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html).

但这不是故事的结局；数据以多种不同的格式存在并以不同的方式存储，因此您通常需要传递其他参数以`read_csv`确保正确读取您的数据。

下表列出了 CSV 文件遇到的常见场景以及您需要使用的适当参数。您通常需要以下参数的全部或部分组合来读取*数据*。

```
┌──────────────────────────────────────────────────────────┬─────────────────────────────┬────────────────────────────────────────────────────────┐
│  **Scenario**                                                │  **Argument**                   │  **Example**                                               │
├──────────────────────────────────────────────────────────┼─────────────────────────────┼────────────────────────────────────────────────────────┤
│  Read CSV with different separator¹                      │  sep/delimiter              │  read_csv(..., sep=';')                                │
│  Read CSV with tab/whitespace separator                  │  delim_whitespace           │  read_csv(..., delim_whitespace=True)                  │
│  Fix UnicodeDecodeError while reading²                   │  encoding                   │  read_csv(..., encoding='latin-1')                     │
│  Read CSV without headers³                               │  header and names           │  read_csv(..., header=False, names=['x', 'y', 'z'])    │
│  Specify which column to set as the index⁴               │  index_col                  │  read_csv(..., index_col=[0])                          │
│  Read subset of columns                                  │  usecols                    │  read_csv(..., usecols=['x', 'y'])                     │
│  Numeric data is in European format (eg., 1.234,56)      │  thousands and decimal      │  read_csv(..., thousands='.', decimal=',')             │
└──────────────────────────────────────────────────────────┴─────────────────────────────┴────────────────────────────────────────────────────────┘ 
```

> **脚注**
> 
> 1.  默认情况下，`read_csv`使用 C 解析器引擎来提高性能。C 解析器只能处理单个字符分隔符。如果您的 CSV 具有多字符分隔符，则需要修改代码以使用`'python'`引擎。您还可以传递正则表达式：
>     
>     
>     
>     ```
>     df = pd.read_csv(..., sep=r'\s*\|\s*', engine='python') 
>     ```
>     
>     
> 2.  `UnicodeDecodeError`当数据以一种编码格式存储但以另一种不兼容的编码格式读取时，就会发生这种情况。最常见的编码方案是`'utf-8'`和`'latin-1'`，您的数据很可能适合其中之一。
>     
>     
> 3.  `header=False`指定 CSV 中的第一行是数据行而不是标题行，并且`names=[...]`允许您指定列名列表以在创建 DataFrame 时分配给它。
>     
>     
> 4.  当具有未命名索引的 DataFrame 保存到 CSV 并在之后重新读取时，会发生“未命名：0”。不必在阅读时解决问题，您还可以在写入时通过使用来解决问题
>     
>     
>     
>     ```
>     df.to_csv(..., index=False) 
>     ```

还有一些我在这里没有提到的其他论点，但这些是您最常遇到的论点。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-16T19:20:20.000

这是使用 Python 内置[csv 模块](http://docs.python.org/2/library/csv.html)的 pandas 库的替代方案。

```
import csv
from pprint import pprint
with open('foo.csv', 'rb') as f:
    reader = csv.reader(f)
    headers = reader.next()
    column = {h:[] for h in headers}
    for row in reader:
        for h, v in zip(headers, row):
            column[h].append(v)
    pprint(column)    # Pretty printer 
```

将打印

```
{'Date': ['2012-06-11',
          '2012-06-12',
          '2012-06-13',
          '2012-06-14',
          '2012-06-15',
          '2012-06-16',
          '2012-06-17'],
 'factor_1': ['1.255', '1.258', '1.249', '1.253', '1.258', '1.263', '1.264'],
 'factor_2': ['1.548', '1.554', '1.552', '1.556', '1.552', '1.558', '1.572'],
 'price': ['1600.20',
           '1610.02',
           '1618.07',
           '1624.40',
           '1626.15',
           '1626.15',
           '1626.15']} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-09-07T16:09:37.323

```
import pandas as pd
df = pd.read_csv('/PathToFile.txt', sep = ',') 
```

这会将您的 .txt 或 .csv 文件导入 DataFrame。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-09-20T06:51:12.637

尝试这个

```
import pandas as pd
data=pd.read_csv('C:/Users/Downloads/winequality-red.csv') 
```

将文件目标位置替换为您的数据集所在的位置，请参阅此网址 [https://medium.com/@kanchanardj/jargon-in-python-used-in-data-science-to-laymans-language-part-一12ddfd31592f](https://medium.com/@kanchanardj/jargon-in-python-used-in-data-science-to-laymans-language-part-one-12ddfd31592f)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-05T13:59:03.943

```
%cd C:\Users\asus\Desktop\python
import pandas as pd
df = pd.read_csv('value.txt')
df.head()
    Date    price   factor_1    factor_2
0   2012-06-11  1600.20 1.255   1.548
1   2012-06-12  1610.02 1.258   1.554
2   2012-06-13  1618.07 1.249   1.552
3   2012-06-14  1624.40 1.253   1.556
4   2012-06-15  1626.15 1.258   1.552 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-16T19:03:53.090

您可以使用 Python 标准库中的[csv 模块](http://docs.python.org/2/library/csv.html)来操作 CSV 文件。

例子：

```
import csv
with open('some.csv', 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
        print row 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-16T19:12:35.763

注意很干净，但是：

```
import csv

with open("value.txt", "r") as f:
    csv_reader = reader(f)
    num = '  '
    for row in csv_reader:
        print num, '\t'.join(row)
        if num == '  ':  
            num=0
        num=num+1 
```

不那么紧凑，但它可以完成工作：

```
 Date price   factor_1    factor_2
1 2012-06-11    1600.20 1.255   1.548
2 2012-06-12    1610.02 1.258   1.554
3 2012-06-13    1618.07 1.249   1.552
4 2012-06-14    1624.40 1.253   1.556
5 2012-06-15    1626.15 1.258   1.552
6 2012-06-16    1626.15 1.263   1.558
7 2012-06-17    1626.15 1.264   1.572 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2020-10-31T19:45:23.387

```
import pandas as pd    
dataset = pd.read_csv('/home/nspython/Downloads/movie_metadata1.csv') 
```

# php - 上传一个文件并用不同的名称保存多次

> ID：14365555
> 
> 赞同：-1
> 
> 时间：2013-01-16T18:50:56.687
> 
> 标签：php, file, loops, upload, rename

我必须与当前存在的相对愚蠢的系统集成。因此，愚蠢的代码。我需要的是让用户选择要上传的pdf。然后将 pdf 保存为 cusip_HLD.pdf 以保存尽可能多的 cusip。例如

```
$fundID = 8
SELECT cusip FROM shareClass WHERE fundID = '$fundID' 
```

将返回

```
|  CUSIP  |
| 1234567 |
| 7894561 |
| 3546841 | 
```

当前存在的代码如下，但虽然它会重复保存多次，但`move_uploaded_file`似乎会将文件从临时存储中拉出。

```
while($row = mysql_fetch_assoc($getCusipsResult)){
        $cusip = $row['cusip'];
        $fullFileName = $cusip."_HLD.pdf";
        move_uploaded_file($_FILES["file"]["tmp_name"], "pdf/".$fullFileName);
        echo "Stored in: pdf/".$fullFileName;
    } 
```

编辑：如何修复代码以满足上述需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:56:03.617

您只能**移动**一次上传的文件。之后它不再在临时上传目录中（因为你移动了它）。如果您需要创建文件的多个副本，请改用`copy`命令，例如

```
while($row = ...) {
  $fullFileName = ...;
  if (is_uploaded_file($_FILES['file']['tmp_name'])) {
      copy($_FILES['file']['tmp_name'], "pdf/$fullFileName");
  }
} 
```

if these files are not going to be modified by the users, then consider using a hardlink instead, so only one copy of the file is saved, and simply point the other "copies" at the original.

# excel - Excel - 如何使用 sheet2 中的相应数据填充 sheet1

> ID：14365556
> 
> 赞同：0
> 
> 时间：2013-01-16T18:50:57.017
> 
> 标签：excel, vba, excel-2010

我真的不知道该怎么做。当 id 列匹配时，我想用 sheet2 中的相应 refid 填充 Sheet1：

Sheet2 每个 id 和唯一的对应 refid 只有 1 个条目。Sheet1 可能有给定 id 的多个条目

**表 1：**

![在此处输入图像描述](../Images/3ff966ab574f2986fd411b951dcc0ec2.png)

**表2：**

![表 2](../Images/7e42c6873007fe36efbd25dcecbf97f8.png)

非常感谢我如何以公式或通过 vba 执行这样的操作的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T18:56:52.583

在工作表 1 的单元格 B2 中使用以下公式并将其复制下来：

```
 =vlookup(A2,Sheet2!$A$2:$B$7,2,0) 
```

表 2 中的值不必按 id 列排序。

# c++ - 使用 shared_ptr 创建实例时，指针实例变量应该如何处理？

> ID：14365561
> 
> 赞同：2
> 
> 时间：2013-01-16T18:51:04.157
> 
> 标签：c++, pointers, vector, shared-ptr, ogre3d

好的，这里我有这个复杂类的小例子

```
class LivingObject
{
 Ogre::SceneNode* myNode;
 Gorilla::ScreenRenderable* myScrRend;
 Gorilla::Layer* myRendLayer;
 Gorilla::Rectangle* myRendRect;
 int Health,Energy,Strength,Dexterity,Intelligence;
 float Speed,posX,posY,posZ;
 //Assortment of functions
};//Note: Specific members and functions are public/private, but is not relevant 
```

这是一些游戏类信息

```
class myGame
{
 Ogre::Viewport* myViewport;//random
 LivingObject LiveObjectArray[100]//question 1: holds the array of objects from a parsed file
 std::vector<std::tr1::shared_ptr<LivingObject> > spawnList;//question 2
}; 
```

1）我应该如何声明`LivingObject`以后可以在哪里复制（我当前使用的方法会出错`conversion from 'LivingObject*' to non-scalar type 'LivingObject' requested`：）`LivingObject TestObj=new LivingObject;`

`LivingObject::myNode`1a)在创建新对象时如何处理指针，我应该将它们设为对象吗？还是有其他问题？（注意：我使用的是 Ogre3D，这是教程让我设置所有内容的方式......）

2）解决上述问题后，我如何将其放入 shared_ptr 向量并访问该特定元素以获取函数（例如`spawnList[15].(or ->)Attack(target);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:12:51.927

1）为了复制一个对象，使用这个代码：

```
string s;
string t = s; 
```

1a) 这些指针代表什么？如果它们代表独占所有权，则必须在复制拥有对象时复制它们指向的对象。检查任何好的文本对构造函数和析构函数的介绍。考虑使`LivingObject`类不可复制。

2）试试这个：

```
shared_ptr<T> p(new T);
vector<T> v;
v.push_back(p);
...
shared_ptr<T> q = v[0];
q->member_function(); 
```

最后的建议是，您需要一本好的 C++ 书籍。另一个很棒的资源是这里的其他用户的在线社区。如果可能的话，尽量减少你的代码。`LivingObject`有一个示例指针就足够了。祝你好运！

# c++ - 为什么 Qt 不鼓励图像的本地化？

> ID：14365562
> 
> 赞同：2
> 
> 时间：2013-01-16T18:51:04.737
> 
> 标签：c++, image, qt, localization, resources

Qt Linguist 可用于根据应用程序运行的语言加载不同的图像。但是，在[Qt 网站上](http://doc.qt.digia.com/qt/internationalization.html)它说

```
Localizing images is not recommended. 
```

为什么不推荐？我没有看到问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:56:18.023

我不能`Qt`具体说，但作为游戏行业的程序员，我们必须处理多种语言和“图形”资产，本地化图像的主要问题是本地化图像的过程比拥有更复杂以程序方式添加到通用“背景”图像之上的字符串。

通常，翻译公司会处理`Excel`要翻译的字符串电子表格。例如，如果您要求他们在 Photoshop 中编辑图层以添加翻译后的文本，我很确定您的翻译成本会爆炸式增长。

因此，总的来说，图像可以本地化，但这并不是一个好主意！

# python - 线程应用程序时随机发送 PyQt 垃圾邮件“选择：无效参数”

> ID：14365569
> 
> 赞同：1
> 
> 时间：2013-01-16T18:51:35.050
> 
> 标签：python, qt, pyqt, qthread

我正在使用 PyQT（Qt 版本：4.8.3，PyQt 版本 4.9.4）创建大量页面的屏幕截图。我使用线程策略来提高性能。

它就像一个魅力几秒钟（大约 30 秒）然后突然应用程序只是向我的终端发送一个奇怪的“**选择：无效参数**”消息。

当然，这不是我的调试消息之一。但就像这真的是随机的，我无法真正挖掘发生这种情况的位置/原因。

如果这有帮助，我生成的线程越多，它发生的速度就越快。这可能是内存问题吗？

我不确定这是否有用，但这是我正在使用的产卵方法：

```
def spawn(self):
    worker = Worker() # this is a QObject
    thread  = QThread()
    # When done, respawn a new thread
    self.connect(worker, SIGNAL("done()"), self.spawn) 
    # And stop the related thread
    self.connect(worker, SIGNAL("done()"), thread.quit)
    self.threadsPool.append(thread) # Keep-alive
    self.workersPool.append(worker) # Keep-alive
    worker.moveToThread(thread)
    thread.start()
    worker.start("myfancydomain.com") 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:48:11.377

它很可能与删除线程后访问线程有关。

我认为您的threadsPool 正在尝试在您的线程退出或删除后访问您的线程。在某个地方，threadsPool（或一些类似的容器）有一个插槽或函数调用正在访问一个错误的指针，例如一个已删除的线程。

为了验证这是否是问题所在，在另一个线程或循环中，去查询threadsPool 中的线程数以及关于每个线程的一些信息。我敢打赌，在第一个线程退出后，使用指向该线程的指针时它会崩溃。

# android - 如何在 XmlSerializer 中插入 XML 元素？

> ID：14365571
> 
> 赞同：0
> 
> 时间：2013-01-16T18:51:37.207
> 
> 标签：android, xml

我正在准备一个名为 Artist 的 XML 元素，其中包含专辑作为子元素。专辑元素是在单独的函数中准备的。在以下代码片段中，albumElements 是一个字符串数组，其中包含专辑的 XML 元素。我不确定如何在艺术家元素中插入这些现成的 XML 元素。我在 XmlSerializer 中使用函数 text() 但它似乎逃避了专辑元素中的标签，我该怎么做才能正确地做到这一点？我想要一个看起来像这样的 XML

```
 <artist name ="someone">
               <album name = "blah1"/>
               <album name = "blah2"/>
            </artist> 
```

代码看起来像这样..

```
 XmlSerializer serializer = Xml.newSerializer();

        try 
        {
            serializer.setOutput(artistElementWriter);              
            serializer.startTag("", "artist");
            serializer.attribute("", "name", artist);

            for (String albumElement : albumElements) 
            {
                serializer.text(albumElement);
            }

            serializer.endTag("", "artist");
            serializer.flush();
        }   
        catch (IOException e) 
        {               
            e.printStackTrace();
            return "";
        } 
```

有什么帮助吗？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:55:59.950

尝试这个：

```
 XmlSerializer serializer = Xml.newSerializer();

    try 
    {
        serializer.setOutput(artistElementWriter);              
        serializer.startTag("", "artist");
        serializer.attribute("", "name", artist);

        for (String albumElement : albumElements) 
        {
             artistElementWriter.write(albumElement);
        }

        serializer.endTag("", "artist");
        serializer.flush();
    }   
    catch (IOException e) 
    {               
        e.printStackTrace();
        return "";
    } 
```

# ffmpeg - FFMPEG 错误 VC1 到 X264（可能解码 VC1）

> ID：14365578
> 
> 赞同：1
> 
> 时间：2013-01-16T18:52:05.330
> 
> 标签：ffmpeg, libavcodec, vc1

使用 FFMPEG 进行转码时遇到以下错误。在我看来，这是解码 VC1 格式的错误，实际上与我要转码的目标格式 (x264) 无关。

我跟踪到这个源文件的错误：

[http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/vc1_8c-source.html](http://cekirdek.pardus.org.tr/%7Eismail/ffmpeg-docs/vc1_8c-source.html)

但我不知道如何将配置文件设置为一个值！=简单。

### FFMPEG 输出：

```
ffmpeg version 1.1 Copyright (c) 2000-2013 the FFmpeg developers
  built on Jan 16 2013 22:52:43 with gcc 4.6.3 (Gentoo 4.6.3 p1.10, pie-0.5.2)
  configuration: --prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --enable-shared --cc=x86_64-pc-linux-gnu-gcc --cxx=x86_64-pc-linux-gnu-g++ --ar=x86_64-pc-linux-gnu-ar --optflags='-O2 -march=native -pipe' --extra-cflags='-O2 -march=native -pipe' --extra-cxxflags='-O2 -march=native -pipe' --disable-static --enable-gpl --enable-postproc --enable-avfilter --disable-stripping --disable-debug --disable-doc --disable-network --disable-vaapi --disable-vdpau --disable-ffplay --disable-runtime-cpudetect --enable-libx264 --disable-indev=v4l2 --disable-indev=alsa --disable-indev=oss --disable-indev=jack --disable-outdev=alsa --disable-outdev=oss --disable-outdev=sdl --enable-libfreetype --disable-amd3dnow --disable-amd3dnowext --disable-altivec --disable-avx --disable-mmxext --disable-vis --disable-neon --cpu=host --enable-hardcoded-tables
  libavutil      52\. 13.100 / 52\. 13.100
  libavcodec     54\. 86.100 / 54\. 86.100
  libavformat    54\. 59.106 / 54\. 59.106
  libavdevice    54\.  3.102 / 54\.  3.102
  libavfilter     3\. 32.100 /  3\. 32.100
  libswscale      2\.  1.103 /  2\.  1.103
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100
[NULL @ 0x1f99a90] LOOPFILTER shall not be enabled in Simple Profile
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
[NULL @ 0x1f99a90] Old interlaced mode is not supported
[NULL @ 0x1f99a90] Old WMV3 version detected, some frames may be decoded incorrectly
[NULL @ 0x1f99a90] Old interlaced mode is not supported
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
[NULL @ 0x1f99a90] LOOPFILTER shall not be enabled in Simple Profile
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
[NULL @ 0x1f99a90] LOOPFILTER shall not be enabled in Simple Profile
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
Last message repeated 1 times
[NULL @ 0x1f99a90] LOOPFILTER shall not be enabled in Simple Profile
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
[NULL @ 0x1f99a90] LOOPFILTER shall not be enabled in Simple Profile
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
Last message repeated 1 times
======
---> This goes on forever ... skipped
======
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
[NULL @ 0x1f99a90] LOOPFILTER shall not be enabled in Simple Profile
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
[NULL @ 0x1f99a90] Chroma scaling is not supported, expect wrong picture
[NULL @ 0x1f99a90] LOOPFILTER shall not be enabled in Simple Profile
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
[NULL @ 0x1f99a90] LOOPFILTER shall not be enabled in Simple Profile
[NULL @ 0x1f99a90] FASTUVMC unavailable in Simple Profile
[NULL @ 0x1f99a90] LOOPFILTER shall not be enabled in Simple Profile
[vc1 @ 0x1f93760] max_analyze_duration 5000000 reached at 5000000
[vc1 @ 0x1f93760] Could not find codec parameters for stream 0 (Video: vc1): unspecified size
Consider increasing the value for the 'analyzeduration' and 'probesize' options
[vc1 @ 0x1f93760] Estimating duration from bitrate, this may be inaccurate
test.vc1: could not find codec parameters 
```

这是我使用的 CMD 行... xD 基本上我剥离了所有内容（与编解码器相关和与质量相关），因为无论我通过什么都会发生错误...

```
ffmpeg -i test.vc1 test.mkv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:46:51.933

实际上，我通过在将原始 VC1-stream 传递给 ffmpeg 之前将其移动到容器中来解决了这个问题。我使用了 mkv，但我认为其他一些容器也可以工作......

命令行：

```
mkvmerge -o temp.mkv source.vc1
ffmpeg -i temp.mkv output.mkv 
```

问候

# c# - ASP.Net - 访问非静态类的静态方法时出错

> ID：14365586
> 
> 赞同：0
> 
> 时间：2013-01-16T18:52:23.567
> 
> 标签：c#, asp.net

我正在使用 Microsoft Visual Web Developer 和 C# based-ASP.Net 开发一个网站作为学校项目。

我已经实现了一个简单的类来表示用户，因为它是在数据库中形成的。该类具有代表 db 中的列的成员，以及一些用于从 DataTable 结果创建实例的静态方法。使用以下代码（MyDbase 是我们获得的一些帮助类）：

```
//User.cs, placed in A
using System;

public class User
{
    private int id;
    private String email;
    private String firstName;
    private String lastName;
    private String username;
    private String passwd;
    private String birthDate;
    private bool isMale;
    private String phone;
    private String avatarUrl;
    private bool isAdmin;

    ... //Accessors and mutators

    public User( int _id, String _email, String _firstName, String _lastName, String _username, String _passwd,
                String _birthDate, bool _isMale, String _phone, String _avatarUrl, bool _isAdmin )
    {
        this.id = _id;
        this.email = _email;
        this.firstName = _firstName;
        this.lastName = _lastName;
        this.username = _username;
        this.passwd = _passwd;
        this.birthDate = _birthDate;
        this.isMale = _isMale;
        this.phone = _phone;
        this.avatarUrl = _avatarUrl;
        this.isAdmin = _isAdmin;
    }

    public static User getUserForSqlResult(System.Data.DataTable result)
    {
        User newUser = null;
        if (result.Rows.Count == 1)
        {
            newUser = new User((int)result.Rows[0]["id"], (String)result.Rows[0]["email"], 
                                (String)result.Rows[0]["firstName"], (String)result.Rows[0]["lastName"], (String)result.Rows[0]["username"],
                                (String)result.Rows[0]["passwd"], (String)result.Rows[0]["birthDate"], (bool)result.Rows[0]["isMale"],
                                (String)result.Rows[0]["phone"], (String)result.Rows[0]["avatarUrl"], (bool)result.Rows[0]["isAdmin"]);
        }

        return newUser;
    }

    public static User getUserById(int id)
    {
        System.Data.DataTable dt = MyDbase.SelectFromTable("select * from tUsers where id=" + id, "db.mdb");
        return getUserForSqlResult(dt);
    }

    public void saveUserChanges()
    {
        MyDbase.ChangeTable("UPDATE tUsers SET email='" + this.email + "', firstName='" + this.firstName + "', lastName='" + this.lastName +
                            "', passwd='" + this.passwd + "', birthDate='" + this.birthDate + "', phone='" + this.phone + "', avatarUrl='" +
                            this.avatarUrl + "' WHERE id=" + this.id , "db.mdb");
    }
} 
```

我尝试运行以下示例代码只是为了确保选择和更新功能正常工作（Default.aspx）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e)
    {

        User user = User.getUserById(3);
        user.setEmail("different@email.com");
        user.saveUserChanges();
    }
} 
```

但是，我收到以下错误：

> 错误 1“System.Security.Principal.IPrincipal”不包含“getUserById”的定义，并且找不到接受“System.Security.Principal.IPrincipal”类型的第一个参数的扩展方法“getUserById”（您是否缺少使用指令还是程序集引用？）

任何想法为什么会发生这种情况？天呐！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:56:19.720

问题是`Page`有一个名为`User`. 当涉及到评估时`User.getUserById()`，它是在推断而不是你的`User`班级。请改用完整类型的命名空间：

```
protected void Page_Load(object sender, EventArgs e)
{

    My.Namespace.User user = My.Namespace.User.getUserById(3);
    user.setEmail("different@email.com");
    user.saveUserChanges();
} 
```

如果您的类没有命名空间，请添加一个。但是，大多数项目都支持默认命名空间。您可以通过查看项目属性来了解这是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:57:31.527

您正在将您的 User 类与页面的[User](http://msdn.microsoft.com/en-us/library/system.web.ui.page.user.aspx)属性混合在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:01:07.613

向您的 User 类添加命名空间以消除 Page.User 属性和您的 User 类之间的歧义

```
using System;

namespace MyUser
{
    public class User
    {
       ....
    }
} 
```

然后在 Page_Load

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e)
    {

        MyUser.User user = MyUser.User.getUserById(3);
        user.setEmail("different@email.com");
        user.saveUserChanges();
    }
} 
```

# c# - 泛型和实体框架

> ID：14365593
> 
> 赞同：2
> 
> 时间：2013-01-16T18:52:46.260
> 
> 标签：c#, vb.net, entity-framework, generics, entities

在我的数据库中，每个表的末尾有 5 个字段：

*   状态
*   创建日期
*   由...制作
*   修改日期
*   修改者

我正在使用实体框架为数据库生成 POCO 对象。我有 Dal 层来处理所有的 CRUD 操作。

不断复制和粘贴相同的代码来填写 5 个字段是很痛苦的。我想知道是否有人有一个通用方法可以处理任何实体对象并为我填写字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T18:55:59.520

您应该实现一个具有这些属性的通用基类，并从该基类派生您的 POCO 类。

您可以通过覆盖上下文类中的 SaveChanges() 来自动处理 Create/ModifiedDate 和 User 等设置。这使对象消费者无需在使用类的任何地方设置这些属性。

这是来自我的一个项目的此类代码的示例（在我的例子中，具有 LastModified 属性的对象实现了接口 IHasLastModified）：

```
 public override int SaveChanges()
    {
        DateTime now = DateTime.UtcNow;
        foreach (ObjectStateEntry entry in (this as IObjectContextAdapter).ObjectContext.ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Modified))
        {
            if (!entry.IsRelationship)
            {
                IHasLastModified lastModified = entry.Entity as IHasLastModified;
                if (lastModified != null)
                    lastModified.LastModified = now;
            }
        }

        int changes = base.SaveChanges();
        return changes;
    } 
```

# c# - 是否可以使用 ASP.NET 修改 Crystal Report 图表？

> ID：14365594
> 
> 赞同：1
> 
> 时间：2013-01-16T18:52:48.777
> 
> 标签：c#, asp.net, crystal-reports, crystal-reports-2010

我有一个包含子报表的水晶报表。该子报告中有几个图表。我希望能够在我的 C# 代码中以编程方式修改一些图表的属性（标题、图例字体大小等）。这可能吗？

我正在使用 Visual Studio 2010 和用于 Visual Studio 2010 的 Crstal Reports。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:06:28.113

[我在这里](http://scn.sap.com/thread/1728292)找到了我认为适合我的解决方案 。

然而不幸的是，`ReportClientDocument`用于访问图表的对象不能来自子报表，所以我认为我不走运。

无论如何，我提供上面的链接，因为它可以帮助其他图表不在子报告中的人......

# c++ - 是否有必要使用 std::atomic 来表示线程已完成执行？

> ID：14365595
> 
> 赞同：18
> 
> 时间：2013-01-16T18:52:50.067
> 
> 标签：c++, c++11, stdthread, stdatomic

我想检查 a`std::thread`是否已完成执行。搜索 stackoverflow 我发现以下[问题](https://stackoverflow.com/questions/9094422/how-to-check-if-a-stdthread-is-still-running)解决了这个问题。接受的答案建议让工作线程在退出之前设置一个变量并让主线程检查这个变量。这是此类解决方案的最小工作示例：

```
#include <unistd.h>
#include <thread>

void work( bool* signal_finished ) {
  sleep( 5 );
  *signal_finished = true;
}

int main()
{
  bool thread_finished = false;
  std::thread worker(work, &thread_finished);

  while ( !thread_finished ) {
    // do some own work until the thread has finished ...
  }

  worker.join();
} 
```

对已接受的答案发表评论的人声称，不能使用简单的`bool`变量作为信号，代码在没有内存屏障的情况下被破坏并且使用`std::atomic<bool>`是正确的。我最初的猜测是这是错误的，一个简单`bool`的就足够了，但我想确保我没有遗漏任何东西。**上面的代码是否需要a`std::atomic<bool>`才能正确？**

让我们假设主线程和工作线程在不同套接字的不同 CPU 上运行。我认为会发生的是，主线程`thread_finished`从其 CPU 的缓存中读取。当 worker 更新它时，缓存一致性协议负责将 worker 更改写入全局内存并使主线程的 CPU 缓存无效，因此它必须从全局内存中读取更新的值。使上述代码正常工作的缓存一致性的全部意义不是吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-16T19:04:05.667

> 对接受的答案发表评论的人声称，不能使用简单的 bool 变量作为信号，代码在没有内存屏障的情况下被破坏，使用 std::atomic 是正确的。

评论者是对的：简单是不够的，因为来自设置为`bool`的线程的非原子写入可以重新排序。`thread_finished``true`

考虑一个线程，它将静态变量设置`x`为某个非常重要的数字，然后发出退出信号，如下所示：

```
x = 42;
thread_finished = true; 
```

当您的主线程看到`thread_finished`设置为 时`true`，它假定工作线程已完成。但是，当您的主线程检查 时`x`，它可能会发现它设置为错误的数字，因为上面的两个写入已重新排序。

当然这只是一个简化的例子来说明一般问题。使用`std::atomic`你的`thread_finished`变量会增加一个*内存屏障*，确保在它完成之前的所有写入。这解决了乱序写入的潜在问题。

另一个问题是可以优化对非易失性变量的读取**，所以主线程永远不会注意到`thread_finished`标志的变化。**

* * *

*重要提示：使您的`thread_finished`volatile**无法解决**问题；事实上，volatile 不应该与线程一起使用——它旨在与内存映射硬件一起使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T21:43:04.583

使用 raw`bool`是不够的。

> 如果程序的执行包含不同线程中的两个冲突操作，则该程序的执行包含*数据竞争*，其中至少一个不是原子的，并且两者都不会在另一个之前发生。任何此类数据竞争都会导致未定义的行为。***§ 1.10 p21***
> 
> 如果其中一个修改了内存位置 (1.7) 而另一个访问或修改了相同的内存位置，则两个表达式求值会发生冲突。***§ 1.10 p4***

您的程序包含一个数据竞争，其中工作线程写入 bool，主线程从中读取，但操作之间没有正式*的发生前*关系。

There are a number of different ways to avoid the data race, including using `std::atomic<bool>` with appropriate memory orderings, using a memory barrier, or replacing the bool with a condition variable.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T19:03:44.010

不行。优化器可以优化

```
 while ( !thread_finished ) {
    // do some own work until the thread has finished ...
  } 
```

到：

```
 if(!thread_finished)
    while (1) {
      // do some own work until the thread has finished ...
    } 
```

假设它可以证明，“一些自己的工作”不会改变`thread_finished`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T19:04:16.330

缓存一致性算法并非无处不在，也不是完美的。周围的问题`thread_finished`是一个线程试图向它写入一个值，而另一个线程试图读取它。这是一场数据竞争，如果访问没有排序，则会导致未定义的行为。*

# ruby-on-rails - 对我的 Rails 应用程序的 Ajax 请求：301 已永久移动

> ID：14365596
> 
> 赞同：1
> 
> 时间：2013-01-16T18:52:53.830
> 
> 标签：ruby-on-rails

我正在向我的 Rails 应用程序发送发布请求：

```
 $.ajax 
  url: "/" + locale + "/administration/dashboards/remove_tag_named.json"
  type: "POST"
  dataType: "json",
  contentType: "json"
  data: {"tag_name": "bingo" }
  success: (result) ->
    ..... 
```

我可以在控制台中看到帖子，但我没有成功，在帖子之后我看到列出了很多 GET 请求

```
[19:37:00.052] POST http://localhost:3000/fr/administration/dashboards/remove_tag_named.json [HTTP/1.1 301 Moved Permanently 42ms]
Started GET "/fr/administration%2Fdashboards%2Fremove_tag_named.json" for 127.0.0.1 at 2013-01-16 19:32:31 +0100
Started GET "/fr/administration%2Fdashboards%2Fremove_tag_named.json" for 127.0.0.1 at 2013-01-16 19:32:31 +0100
.... 
```

在我的 Rails 应用程序中，我有

```
 respond_to :html, :json
  .....
  def remove_tag_named
    # should remove the tag from the table
    respond_to do |format|
      format.html { redirect_to administration_dashboards_url, notice: t(:tag_deleted) }
      format.json { head :no_content }
    end
  end 
```

有什么问题？是 jQuery ajax 请求还是 Rails 响应？如果我尝试在我的 Rails 操作中插入一个调试器，什么都不会发生..

```
 I have checked my routes and it's ok :

    remove_tag_named_administration_dashboards_fr POST /fr/administration/console/remove_tag_named(.:format)    administration/dashboards#remove_tag_named {:locale=>"fr"}

   remove_tag_named_administration_dashboards_en POST /en/administration/dashboards/remove_tag_named(.:format) administration/dashboards#remove_tag_named {:locale=>"en"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:06:58.923

这一行是 ajax 响应。除了 204 状态代码之外，您不会发送任何其他内容。

```
format.json { head :no_content } 
```

此外，您可能希望 *remove_tag_named* 方法具有错误条件。

```
def remove_tag_named
  @tag = # get tag properly
  respond_to do |format|
    if @tag.destroy
      format.html { redirect_to administration_dashboards_url, notice: t(:tag_deleted) }
      format.json { head :no_content }
    else
      format.html { # handle error condition }
      format.json { # return error info }
    end
end 
```

# android - 我可以这样做，这样 EditText 的键盘就不会夹住我的显示器吗？

> ID：14365599
> 
> 赞同：2
> 
> 时间：2013-01-16T18:53:07.933
> 
> 标签：android, android-edittext

我正在尝试将一个 EditText 字段添加到我当前的视图中，并且它正在工作。但是，当我在字段中单击以键入时，键盘从底部升起但不重叠任何东西，它迫使我的视图挤到一半大小。它看起来非常糟糕。有谁知道我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:07:02.683

在清单中的 Activity 声明中，添加属性`android:windowSoftInputMode`：

```
<activity android:name=".MyActivity"
    android:windowSoftInputMode="adjustPan"
/> 
```

`adjustPan`告诉它不要调整活动视图的大小，而是平移内容，以便您的编辑字段保持在视图中。

# facebook - 在 Symfony 2 上，在 IE 上失去与 iframe 的会话，在所有操作中

> ID：14365612
> 
> 赞同：0
> 
> 时间：2013-01-16T18:53:52.903
> 
> 标签：facebook, internet-explorer, session, iframe, symfony

我有完全相同的问题： [在 Symfony 2 上，在 IE 上失去与 iframe 的会话](https://stackoverflow.com/questions/8260482/on-symfony-2-losing-session-with-iframe-on-ie)

```
$response->headers->set('P3P', 'CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

但我有很多动作，我使用自动模板：

```
 /**
 * @Route("/", name="_welcome")
 * @Template()
 */
public function indexAction()
{
    ....  
    return array(...);
} 
```

那么是否可以在所有操作中定义标题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:33:58.463

您可以为响应创建事件侦听器。

在这里，您可以找到一个使用 Symfony2 附带的 Acme Bundle 的示例：

[http://php-and-symfony.matthiasnoback.nl/2011/10/symfony2-create-a-response-filter-and-set-extra-response-headers/](http://php-and-symfony.matthiasnoback.nl/2011/10/symfony2-create-a-response-filter-and-set-extra-response-headers/)

基本上你会修改这个例子并写下：

```
<?php

namespace Acme\DemoBundle\EventListener;

use Symfony\Component\HttpKernel\Event\FilterResponseEvent;

class ResponseListener
{
    public function onKernelResponse(FilterResponseEvent $event)
    {
        $event->getResponse()->headers->set('P3P', 'CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');
    }
} 
```

# c++ - C++11删除重写方法

> ID：14365615
> 
> 赞同：18
> 
> 时间：2013-01-16T18:54:04.240
> 
> 标签：c++, inheritance, c++11, overriding

**前言：**

这是一个关于 C++11 中引入的删除运算符的新含义的最佳实践问题，该运算符应用于覆盖继承父项的虚拟方法的子类。

**背景：**

根据标准，引用的第一个用例是明确禁止调用某些类型的函数，否则转换将是隐式的，例如最新[C++11 标准草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)第 8.4.3 节中的示例：

```
struct sometype {
    sometype() = delete; // OK, but redundant
    some_type(std::intmax_t) = delete;
    some_type(double);
}; 
```

上面的例子是明确而有目的的。但是，下面的示例 new 运算符被覆盖并通过将其定义为已删除来防止被调用，这让我开始思考我稍后在问题部分中确定的其他场景（下面的示例来自[C++的 §8.4.3 11标准草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)）：

```
struct sometype {
    void *operator new(std::size_t) = delete;
    void *operator new[](std::size_t) = delete;
};
sometype *p = new sometype; // error, deleted class operator new
sometype *q = new sometype[3]; // error, deleted class operator new[] 
```

**问题：**

通过将这种想法扩展到继承，我很好奇其他人的想法，即以下使用示例是否是一个清晰有效的用例，或者它是否是对新添加功能的不明确滥用。请为您的回答提供理由（提供最有说服力的例子将被接受）。在下面的示例中，设计尝试通过让库的第二个版本继承自第一个版本来维护两个版本的库（需要对库进行实例化）。这个想法是允许对第一个库版本的错误修复或更改自动传播到第二个库版本，同时允许第二个库版本只关注其与第一个版本的差异。要在第二个库版本中弃用函数，

```
class LibraryVersion1 {
public:
    virtual void doSomething1() { /* does something */ }
    // many other library methods
    virtual void doSomethingN() { /* does something else */ }
};

class LibraryVersion2 : public LibraryVersion1 {
public:
    // Deprecate the doSomething1 method by disallowing it from being called
    virtual void doSomething1() override = delete;

    // Add new method definitions
    virtual void doSomethingElse() { /* does something else */ }
}; 
```

虽然我可以看到这种方法有很多好处，但我认为我更倾向于认为这是对该功能的滥用。我在上面的例子中看到的主要缺陷是经典的“is-a”继承关系被打破了。我读过很多文章，强烈建议不要使用继承来表达“某种即是”的关系，而是使用带有包装函数的组合来清楚地识别类的关系。虽然下面这个经常令人不快的例子需要更多的努力来实现和维护（关于为这段代码编写的行数，因为每个公开可用的继承函数都必须由继承类显式调用），使用上面描述的删除在很多方面都非常相似：

```
class LibraryVersion1 {
public:
    virtual void doSomething1() { /* does something */ }
    virtual void doSomething2() { /* does something */ }
    // many other library methods
    virtual void doSomethingN() { /* does something */ }
};

class LibraryVersion2 : private LibraryVersion1 {
    // doSomething1 is inherited privately so other classes cannot call it
public:
    // Explicitly state which functions have not been deprecated
    using LibraryVersion1::doSomething2();
    //  ... using (many other library methods)
    using LibraryVersion1::doSomethingN();

    // Add new method definitions
    virtual void doSomethingElse() { /* does something else */ }
}; 
```

提前感谢您的回答，并进一步了解这个潜在的删除用例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T19:25:17.947

C++ 标准的第 8.4.3/2 段*间接*禁止删除覆盖虚函数的函数：

***“除了声明之外，隐式或显式**引用已删除函数的程序格式错误。[注意：这**包括隐式或显式调用函数**并形成指向函数的指针或指向成员的指针”*

通过指向基类的指针调用重写虚函数是试图**隐式**调用该函数。因此，根据 8.4.3/2，允许这样做的设计是非法的。另请注意，没有符合 C++11 的编译器允许您删除覆盖的虚函数。

更明确地说，第 10.3/16 段也规定了同样的要求：

*“具有已删除定义 (8.4) 的函数不应覆盖没有已删除定义的函数。同样，没有已删除定义的函数不应覆盖已删除定义的函数。* ”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T20:08:48.140

10.3p16：

> 具有已删除定义的函数 (8.4) 不应覆盖没有已删除定义的函数。同样，没有删除定义的函数不应覆盖具有删除定义的函数。

其他答案很好地解释了为什么，但是你有官方的 Thou Shalt Not。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T19:25:08.913

考虑一些功能：

```
void f(LibraryVersion1* p)
{
    p->doSomething1();
} 
```

这将在 LibraryVersion2 甚至被编写之前编译。

所以现在你用删除的虚拟实现 LibraryVersion2。

f 已经编译好了。直到运行时它才知道调用了哪个 LibraryVersion1 子类。

这就是为什么删除虚拟是不合法的，它没有任何意义。

你能做的最好的事情是：

```
class LibraryVersion2 : public LibraryVersion1
{
public:
    virtual void doSomething1() override
    {
         throw DeletedFunctionException();
    }
} 
```

# sql - tsql 代码同步两个 xml 文档

> ID：14365616
> 
> 赞同：2
> 
> 时间：2013-01-16T18:54:07.487
> 
> 标签：sql, tsql, sql-server-2005

**xml 1**

```
<Team>
  <Players>
    <Player id="1" timestamp="11/03/2012 08:10:12">30</Player>
    <Player id="2" timestamp="11/02/2012 09:11:12">40</Player>
  <Players>
</Team> 
```

**xml 2**

```
<Team>
  <Players>
    <Player id="1" timestamp="11/02/2012 09:10:12">10</Player>
    <Player id="2" timestamp="11/03/2012 10:11:12">20</Player>
    <Player id="3" timestamp="11/03/2012 13:00:00">50</Player>
  <Players>
</Team> 
```

当我们基于时间戳元素合并上述两个 XML 时的输出：

```
<Team>
  <Players>
    <Player id="1" timestamp="11/02/2012 09:10:12">30</Player>
    <Player id="2" timestamp="11/03/2012 10:11:12">20</Player>
    <Player id="3" timestamp="11/03/2012 13:00:00">50</Player>
  <Players>
</Team> 
```

谁能帮我用 T-SQL 代码在 SQL Server 2005/2008 中执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:27:56.503

将这种方法与两个嵌套的 CTE 一起使用，您可以接近 - 但并非一直如此：

```
DECLARE @XML1 XML = '<Team>
  <Players>
    <Player id="1" timestamp="11/03/2012 08:10:12">30</Player>
    <Player id="2" timestamp="11/02/2012 09:11:12">40</Player>
  </Players>
</Team>'

DECLARE @XML2 XML = '<Team>
  <Players>
    <Player id="1" timestamp="11/02/2012 09:10:12">10</Player>
    <Player id="2" timestamp="11/03/2012 10:11:12">20</Player>
    <Player id="3" timestamp="11/03/2012 13:00:00">50</Player>
  </Players>
</Team>'

-- extract the ID, Timestamp and node values from both XML variables 
;WITH CTE AS
(
SELECT
    ID = P1.value('@id', 'int'),
    TS = P1.value('@timestamp', 'datetime2'),
    NodeValue = P1.value('(.)[1]', 'int')
FROM @XML1.nodes('/Team/Players/Player') AS XTbl1(P1)

UNION 

SELECT
    ID = P2.value('@id', 'int'),
    TS = P2.value('@timestamp', 'datetime2'),
    NodeValue = P2.value('(.)[1]', 'int')
FROM @XML2.nodes('/Team/Players/Player') AS XTbl2(P2)
),
-- partition and sequentially number the result, so that the newest 
-- (most recent) item can be extracted
CTE2 AS   
(
    SELECT ID, TS, NodeValue,
        RowNum = ROW_NUMBER() OVER(PARTITION BY ID ORDER BY TS DESC)
    FROM CTE
)
SELECT 
    ID AS '@id',
    TS AS '@timestamp',
    NodeValue AS 'text()'
FROM CTE2
WHERE RowNum = 1
FOR XML PATH('Player'), ROOT('Players') 
```

结果输出如下：

```
<Players>
  <Player id="1" timestamp="2012-11-03T08:10:12">30</Player>
  <Player id="2" timestamp="2012-11-03T10:11:12">20</Player>
  <Player id="3" timestamp="2012-11-03T13:00:00">50</Player>
</Players> 
```

# r - histogram$breaks 适用于数据， histogram$mids 给出错误

> ID：14365618
> 
> 赞同：0
> 
> 时间：2013-01-16T18:54:14.907
> 
> 标签：r, histogram, curve-fitting, least-squares

我想知道这是否是一个错误。

我有以下代码：

```
h2 <- hist(c(rep(65, times=5), rep(25, times=5), rep(35, times=10), rep(45, times=4)))
model2 = nls(formula = log(counts[1:5]) ~a+log(mids[1:5])*gamma, start=list(gamma=-3,a=10),data=h2) 
```

它因错误而中断：

```
Error in parse(text = x) : <text>:2:0: unexpected end of input
1: ~
  ^ 
```

但如果我这样做：

```
h2 <- hist(c(rep(65, times=5), rep(25, times=5), rep(35, times=10), rep(45, times=4)))
model2 = nls(formula = log(counts[1:5]) ~a+log(breaks[1:5])*gamma, start=list(gamma=-3,a=10),data=h2) 
```

它没有给出错误（它不能适合这个特定的数据，但可以适合我真正拥有的数据）。

问题是，对于我正在做的工作，我需要直方图间隔的中间，而不是休息时间。

编辑：错误后，回溯是：

```
7: parse(text = x)
6: eval(parse(text = x)[[1L]])
5: formula(eval(parse(text = x)[[1L]]))
4: formula.character(object, env = baseenv())
3: formula(object, env = baseenv())
2: as.formula(paste("~", paste(varNames[varIndex], collapse = "+")), 
       env = environment(formula))
1: nls(formula = log(counts[1:5]) ~ a + log(mids[1:5]) * gamma, 
       start = list(gamma = -3, a = 10), data = h2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:36:55.333

正如我所怀疑的：

```
d <- data.frame(counts = h2$counts[1:5],mids = h2$mids[1:5])
model2 = nls(formula = log(counts) ~a+log(mids)*gamma, start=list(gamma=-3,a=10),data=d) 
```

在没有公式解析错误的情况下运行（但当然仍然不适合这个小的格式错误的数据集）。

# jquery - f:browser 未定义且 .fancybox 不是函数

> ID：14365620
> 
> 赞同：3
> 
> 时间：2013-01-16T18:54:27.740
> 
> 标签：jquery, fancybox, fancybox-2

好的，我设置了一些图像以使用 fancybox 打开。它曾经工作得很好。现在我得到2个错误。

![在此处输入图像描述](../Images/68cde74bdf207c795ab938abfeb8664e.png)

我不确定我改变了什么。我在网上读到，当您包含多个 jquery 库时，您通常会收到 .fancybox is not a function 错误消息。据我所知，我只有一个。

以下是您可以在何处收到此错误消息的示例：

(www).thecardb.com/abarth/1000-Bialbero/1960/0/85

我已经进行了一些 url 重写，是否有可能导致问题？

```
RewriteEngine on
RewriteBase /
DirectorySlash Off

# remove trailing slash
RewriteRule ^(.*)\/(\?.*)?$ $1$2 [R=301,L]

# Redirect non-www urls to www
RewriteCond %{HTTP_HOST} ^thecardb\.com [NC]
RewriteRule (.*) http://www.thecardb.com/$1 [R=301,L]

# Don't match real existing files so CSS, scripts, images aren't rewritten
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d

# Match the first two groups before / and send them to the query string
RewriteRule ^([A-Za-z0-9-]+)?$ car.php?model_make_id=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-._]+)?$ car.php?model_make_id=$1&model_name=$2 [L]

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-._]+)/([0-9]+)?$ car.php?model_make_id=$1&model_name=$2&model_year=$3 [L]

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-._]+)/([0-9]+)/([A-Za-z0-9-._]+)?$ car.php?model_make_id=$1&model_name=$2&model_year=$3&model_trim=$4 [L]

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Za-z0-9-]+)/([A-Za-z0-9-._]+)/([0-9]+)/([A-Za-z0-9-._]+)/([0-9]+)?$ car.php?model_make_id=$1&model_name=$2&model_year=$3&model_trim=$4&model_id=$5 [L] 
```

我迷路了！任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T19:04:28.347

jQuery 最近升级到了 1.9 版，它删除了大部分（如果不是全部）折旧的方法。`$.browser`是其中之一。Fancybox 依赖于`$.browser`，因此如果没有安装 migrate 插件，您将无法使用 jQuery 1.9 和您的 fancybox 版本。要么降级 jQuery，升级 fancybox，要么包含 migrate 插件。

更多信息在这里：[http ://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/)

您还应该始终指定版本号。

[http://code.jquery.com/jquery-1.8.3.min.js](http://code.jquery.com/jquery-1.8.3.min.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T06:10:01.770

您需要更改代码：

寻找：

```
$.browser.msie 
```

将此替换为：

```
navigator.userAgent.match(/msie/i) 
```

# r - 在 keyed data.table 中，在某个 `where` 更改 key 变量的值会将 key 设置为 `NULL`

> ID：14365621
> 
> 赞同：4
> 
> 时间：2013-01-16T18:54:30.960
> 
> 标签：r, data.table

我想问一下为什么当我在某个`where`子集更改键变量的值时，下面示例中的 data.table 会丢失其键。以及是否有必要。

```
library(data.table)
example(data.table)
setkey(DT,x)   # one key var only
DT[J("a"), x := "z"]
DT
   x y  v v2  m
1: z 1 13 84  5
2: z 3 13 84  5
3: z 6 13 84  5
4: c 1  7 NA  8
5: c 3  8 NA  8
6: c 6  9 NA  8
7: z 1 42 NA 42
8: z 3 42 NA 42
9: z 6 42 NA 42 
```

这样就可以了。但是，我丢失了我的钥匙：

```
key(DT)
NULL 
```

我猜想通过重新分配键`x`上方的键列会被删除。也许应该记住关键，即应该有一个隐含`setkey(DT,x)`的保留`x`作为关键？谢谢！

我使用的是 1.8.6 版。顺便一提。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:16:03.463

来自`setkey`的帮助文件：

> 'setkey()' 对'data.table' 进行排序并将其标记为已排序。[...] 列始终按升序排序。

当您替换任何键控列中的元素时，`data.table`不再排序（或至少不能保证是），因此未设置键以反映已更改的现实。

一个简单的解决方案是立即重置密钥：

```
## Creates the example data.table
DT = data.table(x=rep(c("a","b","c"),each=3), y=c(1,3,6), v=1:9)
setkey(DT, 'x')

## Immediately resets the (possibly multicolumn) key
setkeyv(DT["a", x:="z"], key(DT))

key(DT)   
# [1] "x" 
```

# c# - 如何使用使用泛型和依赖注入的存储库接口？

> ID：14365625
> 
> 赞同：16
> 
> 时间：2013-01-16T18:54:55.797
> 
> 标签：c#, dependency-injection, unity-container, ioc-container

我正在尝试使用以下通用存储库接口进行 DI 和构造函数注入：

```
public interface IRepository<TEntity> : IDisposable where TEntity : class 
```

问题是为了定义接口的实例，我必须提供这样的类类型：

```
private IRepository<Person> _personRepository; 
```

问题是如果我使用 DI（并且我使用 Unity for IoC 框架），那么我必须在我的构造函数中定义多个实例以获取我需要使用的所有存储库接口，如下所示：

```
public MyClass(IRepository<Person> personRepository,
               IRepository<Orders> ordersRepository,
               IRepository<Items> itemsRepository,
               IRepository<Locations> locationsRepository)
{
  _personRepository = personRepository;
  _OrdersRepository = ordersRepository; 
  _itemsRepository = itemsRepository;
  _locationsRepository = locationsRepository;
} 
```

问题：

1.  这个可以吗？
2.  如果不是，我在这个概念上迷失在哪里？
3.  即使这是正确的，Unity 将接口注册到具体类型有什么意义？我已经这样做了，因为通用存储库迫使我声明。

请帮我解决这个问题，我感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T01:22:49.360

正如 D Stanley 所指出的，依赖项必须是具体的接口。否则，你要在哪里声明 T？您的依赖类可能是通用的，但在某些时候您仍然必须说“T 是一个人”。

也就是说，Unity 很好地处理了注册泛型类型。

假设您使用包装 a （或其他）`IRepository<T>`的泛型类来实现。`Repository<T>``DbSet<T>`

然后以下注册和解析将起作用（包括注入任何构造函数）：

```
container.RegisterType(typeof(IRepository<>), typeof(Repository<>));

// no specific registration needed for the specific type resolves
container.Resolve(<IRepository<Person>);
container.Resolve(<IRepository<Order>); 
```

如果您需要特定类型的覆盖（说 Items 存储库出于某种原因是特殊的，因此它具有完全实现的`ItemRepository`类），只需在通用实现之后注册该特定实现：

```
container.RegisterType<IRepository<Item>, ItemRepository>(); 
```

Resolving`IRespository<Item>`现在会得到你的具体实现。

作为记录，我认为这只能在代码中完成，而不是配置文件。有人可以随意纠正这个假设。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:00:05.843

> 这个可以吗？

当然。个人偏好是像你一样使用构造函数注入还是属性注入。构造函数注入更干净，因为您不必为构造函数提供很多参数，但它也更安全。

> Unity将接口注册到具体类型有什么意义

一个原因是您可以进行单元测试`MyClass`，而不必使用访问数据库的实际存储库。您可以“伪造”存储库以返回硬编码值以进行测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T19:05:48.983

您可以考虑使用将其他几个服务捆绑在一起的[聚合服务](https://code.google.com/p/autofac/wiki/AggregateService)，但您也应该仔细查看您`MyClass`是否[尝试做太多事情](http://en.wikipedia.org/wiki/Single_responsibility_principle)；拥有大量依赖项可能表明这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T19:09:53.453

这似乎没问题，除了一个缺失点；您需要 UnitOfWork 模式来启用事务。如果没有应用 UnitOfWork 模式，所有存储库都会尝试在不同的上下文中提交数据库操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-15T15:54:18.460

我需要使用配置文件来做到这一点。这实际上很容易，但我花了一段时间才弄清楚。

在这个例子中，我们有一个接口`IRepository<T>`，它有 2 个实现：

1.  `OneRepository`
2.  `TwoRepository`

然后我们有一个名为的类`Worker`，它依赖于`IRepository<One>`and `IRepository<Two>`。我们要求 unity 为我们创建一个实例，`Worker`并从配置文件中找出依赖关系。

**接口和实现**

*`ConsoleApplication1`在这个例子中，所有这些都在命名空间中。*

```
public class Worker
{
    private readonly IRepository<One> one;
    private readonly IRepository<Two> two;

    public Worker(IRepository<One> one, IRepository<Two> two)
    {
        this.one = one;
        this.two = two;
    }

    public string DoOne()
    {
        return this.one.Add(new One());
    }

    public string DoTwo()
    {
        return this.two.Add(new Two());
    }
}

public interface IRepository<T>
{
    string Add(T t);
}

public class OneRepository : IRepository<One>
{
    public string Add(One t)
    {
        return "One";
    }
}

public class TwoRepository : IRepository<Two>
{
    public string Add(Two t)
    {
        return "Two";
    }
}

public class One { }
public class Two { } 
```

**统一配置**

请注意我们指示统一并告诉它程序集的名称。然后我们注册这 2 个实现。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration" />
  </configSections>
  <unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
    <assembly name="ConsoleApplication1" />
    <container>
      <register type="ConsoleApplication1.IRepository[[ConsoleApplication1.One]]" mapTo="ConsoleApplication1.OneRepository" />
      <register type="ConsoleApplication1.IRepository[[ConsoleApplication1.Two]]" mapTo="ConsoleApplication1.TwoRepository" />
    </container>
  </unity>
</configuration> 
```

**应用**

这是[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)。

```
public class Program
{
    static void Main()
    {
        UnityContainer container = new UnityContainer();
        var res = container.LoadConfiguration();
        Worker worker = res.Resolve<Worker>();
        Console.WriteLine(worker.DoOne());
        Console.WriteLine(worker.DoTwo());
        Console.Read();
    }
} 
```

预期的输出是：

```
One
Two 
```

# jquery-mobile - 如何将其用作 jquery 选择器以在文档级别绑定事件

> ID：14365631
> 
> 赞同：0
> 
> 时间：2013-01-16T18:55:27.350
> 
> 标签：jquery-mobile, jquery-selectors

在 jquery mobile 中，swipeleft 事件在绑定到低于文档的元素时会触发两次，因此我必须将 swipeleft 事件绑定到插件选择的所有对象。以下插件将通过以下方式初始化：

```
$('#mylistview li').myPlugin();

$.fn.myPlugin = function(o){    

    return this.each(function(i, el){
        this.on("swipeleft", function ( e ) {
            ...
} 
```

此代码将 swipeleft 事件绑定到每个元素，但必须在文档级别完成。如何将 THIS 用作 jquery 选择器？上面的代码给出了一个错误

```
 $.fn.myPlugin = function(o){ 
       return this.each(function(i, el){
                      //how to use "this" as a selector???
           $(document).on('swipeleft', this,  function(event){
            ...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:35:29.363

你可以用这种方式重写你的函数：

```
$.fn.myPlugin = function(o) {
   var selector = this.selector;
   return this.each(function(i, el) {
      $(document).on('swipeleft', selector,  function(event) {
         // Code goes here
      });
   });
} 
```

# php - 无法使用 codeigniter 上传图片

> ID：14365639
> 
> 赞同：0
> 
> 时间：2013-01-16T18:56:01.087
> 
> 标签：php, codeigniter, image-uploading

请帮我。这是我在 php Codeigniter 中的第一个项目。其实我是一名Java开发人员。

我想将两个图像路径上传到我的表格中，并将其图像上传到我的根文件夹中，例如上传我在同一个表格中有许多字段，而不是图像。我可以从我的表单中添加/编辑这些字段。（我成功地使用 codeigniter 实现了）

但目前我在图片上传方面面临问题。我不知道如何使用 codeigniter 上传图片。两天后我尝试自己做，但我无法解决我的问题

*错误：我没有看到任何错误。只是它将 0 值作为图像路径插入到我的数据库表中。 **我认为我尝试上传图片的方式不正确。***

myviews.php

```
 <? echo form_open_multipart('Booksetups/book'); ?>

                 <input type="file" name="img1" /> 
                 <input type="file" name="img2" />
               <?php          
                                               <br/>
                          <? echo  form_submit($submitbtn);   echo form_reset($resetbtn); ?>  
                 <? echo form_close(); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:41:42.470

首先要记住的是 CI 不会添加`$_FILES`到输入对象中。您将需要访问诸如此类的内容`$_FILES['img1']`。所以这些：

```
'img1'=>$this->input->post('img1'),//image path is not inserting But all other fields are inserting into db 
'img2'=>$this->input->post('img2'),//image path is not inserting 
```

应该是这样的：

```
'img1'=>$_FILES['img1']['name'],//image path is not inserting But all other fields are inserting into db 
'img2'=>$_FILES['img2']['name'],//image path is not inserting 
```

取决于您希望存储在数据库中的内容。您可以通过上传类重命名文件等。我建议阅读这些[文档。](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

其次，您似乎没有调用实际的上传方法：

```
$this->upload->do_upload() 
```

不知道你是否需要这个但是......如果你想要多个配置，如果你希望它们有不同的路径，你必须重新定义多个文件的配置......

```
$config['upload_path'] = 'uploads/'; 
$config['allowed_types'] = 'gif|jpg|jpeg|png'; 
$config['max_size'] = '1000'; 
$config['max_width'] = '1920'; 
$config['max_height'] = '1280';  
$this->load->library('upload', $config);
$this->upload->do_upload("img1");

$config['upload_path'] = 'some_other_dir/'; 
$config['allowed_types'] = 'gif|jpg|jpeg|png'; 
$config['max_size'] = '1000'; 
$config['max_width'] = '1920'; 
$config['max_height'] = '1280';  
$this->upload->initialize($config);
$this->upload->do_upload("img2"); 
```

如果您不希望它们具有不同的路径，则可以像在示例中那样加载库并在`do_upload()`不传递参数的情况下调用。

如果我错过了重点，或者您需要更多信息，请告诉我，我可能会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:42:34.937

问题是您在服务器端使用了 html。PHP 不知道 HTML，而是 php。客户端或浏览器知道 HTML。

```
<input type="file" name="img1" /> 
<input type="file" name="img2" /> 
```

使用合适的 php 方法生成 html。

第二件事，您的文件上传参数与codeigniter userguide不同

```
$config['upload_path'] = 'uploads/';
$config['upload_path'] = './uploads/'; 
```

错误的文件路径可能会导致您的其他问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T19:14:05.790

看来您没有初始化上传类库：

```
$this->upload->initialize($config); 
```

你还加载库：

```
$this->load->library('upload'); 
```

# jquery - jquery阻止表单提交

> ID：14365641
> 
> 赞同：1
> 
> 时间：2013-01-16T18:56:09.400
> 
> 标签：jquery, validation

我正在尝试上传文件。并使用此代码验证它

```
$(document).ready(function () {
  $('#form_model_upload').submit(function (e) {
    var isvalid = true;
    var val = $('#model').val();
    if (!val || val == "") {
      $('#err_model').html('please select an image');
      isvalid = false;
    } else {
      var ext = $('#model').val().split('.').pop().toLowerCase();
      if ($.inArray(ext, ['gif', 'jpg', 'jpeg']) == -1) {
        $('#err_model').html('invalid file extension').show();
        isvalid = false;
      }
    }
    return isvalid;
  });
}); 
```

这是我的html代码

```
 <form action="<?php echo $editFormAction; ?>" method="POST" name="form_model_upload">
        <input type="hidden" name="vendor_id" value="<?php echo $_SESSION['vendor_id']?>" /><tr><td></td><td><span id="err_model"></span></td></tr>
        <tr><td>Model:</td><td><input type="file" name="model" id="model"/></td>
        </tr>

        <tr><td>Description:</td><td><textarea rows="5" cols="30" name="description" id="description"  ></textarea></td></tr>
        <tr><td>Category:</td><td><select name="category_model" id="category_model">
        <?php $categories=$doc->getElementsByTagName("category");
        foreach($categories as $category)
        {//$category_node=$category->getElementsByTagName("cat_val");
        $category_value=$category->nodeValue;
        echo '<option value="'.$category_value.'">'.$category_value.'</option>';
        }?>

        </select> </td></tr>
        <tr><td></td><td><input type="submit" name="upload_submit" id="upload_submit" value="upload" /></td></tr>
        <input type="hidden" name="MM_insert" value="upload_model" />
        <input type="hidden" name="MM_insert" value="form_model_upload" />
       </form> 
```

但即使验证失败它也会提交表单？？我想防止表单提交验证失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:47:49.287

```
$(document).ready(function () {
  // move this var outside of submit
  var isvalid = false;
  $('#form_model_upload').submit(function (e) {
    // block submit if false (it will be the first time)
    if(!isvalid){ e.preventDefault(); }
    // set true state here before the validation test
    isvalid = true;
    var val = $('#model').val();
    if (!val || val == "") {
      $('#err_model').html('please select an image');
      isvalid = false;
    } else {
      var ext = $('#model').val().split('.').pop().toLowerCase();
      if ($.inArray(ext, ['gif', 'jpg', 'jpeg']) == -1) {
        $('#err_model').html('invalid file extension').show();
        isvalid = false;
      }
    }
    // if form is valid, submit form
    // isvalid is now true so e.preventDefault() wont fire
    if(isvalid){ 
        $(this).submit(); 
    }
  });
}); 
```

# c - 渲染点云的外部函数

> ID：14365649
> 
> 赞同：1
> 
> 时间：2013-01-16T18:56:29.607
> 
> 标签：c, opengl, vbo

我目前正在为程序 Igor Pro 构建一个 C++ 插件。该插件采用三个点数组（X、Y、Z）并返回一个包含数据像素值的矩阵（float array[windowsize][windowsize]）。

我已经通过使用 VBO 在 OpenGL (glew) 中开发了一个解决方案，但我觉得这不是最佳解决方案。

1) 你认为我应该使用 FBO 或 PBO 的屏幕外渲染吗？我想让它尽可能快地运行。

2）另外，我只想运行一次 glutMainLoop 。我应该换成 FreeGLUT 吗？

```
/*  
        RenderTriangle.c
*/
#include "VC10\triangulation.h"
#include "XOPStandardHeaders.h"         // Include ANSI headers, Mac headers, IgorXOP.h, XOP.h and XOPSupport.h
#include "glui.h"

// Prototypes
HOST_IMPORT int main(IORecHandle ioRecHandle);

// Global Variables
const int windowSize = 512;
GLuint ID;
int size,el_size;
float* waveX=NULL;
float* waveY=NULL;
float* waveZ=NULL;
waveHndl waveH;

// Custom error codes
#define OLD_IGOR 1 + FIRST_XOP_ERR
#define NON_EXISTENT_WAVE 2 + FIRST_XOP_ERR
#define REQUIRES_SP_OR_DP_WAVE 3 + FIRST_XOP_ERR

#pragma pack(2)     // All structures passed to Igor are two-byte aligned.
typedef struct FitParams {
    waveHndl waveX; 
    waveHndl waveY;
    waveHndl waveZ;
    double result;
} FitParams, *FitParamsPtr;
#pragma pack()      // Restore default structure alignment

// Prototypes of the OpenGL callbacks
void init(void);
void display(void);
void idle(void);

void init(void){

    float z_val=0;
    int point=0;

    //Loading data from the text files and applying the Delaunay algorithm
    triangulateio tri_data=triangulationWave(waveX,waveY,waveZ);
    vector<float>data_vector(tri_data.numberoftriangles*3*6); //3 points with 6 coordinates (position and color)

    size=data_vector.size();

    double zMin=tri_data.pointattributelist[N_ELEMENTS],zMax=tri_data.pointattributelist[N_ELEMENTS+1];
    for (int i_tri = 0; i_tri < tri_data.numberoftriangles; i_tri++) {

        for (int i_point = 0; i_point < 3; i_point++) {

            z_val=tri_data.pointattributelist[tri_data.trianglelist[i_tri * 3 + i_point]];
            z_val=1-((z_val-zMin)/(zMax-zMin)); //normalize and invertion

            point=6*(i_tri *3 + i_point);

            data_vector[point+0]=tri_data.pointlist[2*tri_data.trianglelist[i_tri * 3 + i_point]];
            data_vector[point+1]=tri_data.pointlist[2*tri_data.trianglelist[i_tri * 3 + i_point]+1];
            data_vector[point+2]=z_val;
            data_vector[point+3]=z_val;
            data_vector[point+4]=z_val;
            data_vector[point+5]=z_val;
        }
    }

    glewInit();

    glEnable(GL_DEPTH_TEST);
    glDepthMask(GL_TRUE);
    glDepthFunc(GL_LEQUAL);
    glDepthRange(-2.0f, 2.0f);
    glClearColor(0.0f, 1.0f, 0.0f, 0.0f);
    glShadeModel(GL_SMOOTH);
    glEnableClientState(GL_VERTEX_ARRAY);
    glGenBuffers(1,&ID);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ID);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER,size*sizeof(float), &data_vector[0], GL_STATIC_DRAW);

    el_size=6*sizeof(float);
}
void display(void){

    int zoom = 1;
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-2*zoom, 2*zoom,2*zoom,-2*zoom, -5.0f, 5.0f);
    glPushMatrix ();
    glBindBuffer(GL_ARRAY_BUFFER, ID);

    // Pointer for the position of the points
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_FLOAT, el_size, 0);

    // Pointer for the color of the points
    glEnableClientState(GL_COLOR_ARRAY);
    glColorPointer(3,GL_FLOAT, el_size,(void*)(el_size/2));

    //Draw callback
    glDrawArrays(GL_TRIANGLES,0,size/6);

    glPopMatrix ();
    glFlush();
}

// Idle callback function for OpenGL API
void idle(void){

    float* pixels = (float*)malloc(windowSize*windowSize*sizeof(float));
    glReadPixels(0, 0, windowSize, windowSize, GL_DEPTH_COMPONENT, GL_FLOAT, pixels);

    //
    //char waveName[MAX_OBJ_NAME+1]; 
    //CountInt dimensionSizes[MAX_DIMENSIONS+1]; 
    //float* wp;
    //strcpy(waveName, "wave0");
    //MemClear(dimensionSizes, sizeof(dimensionSizes));
    //dimensionSizes[ROWS] = windowSize*windowSize; // Make 1D wave 
    //wp = (float*)WaveData(waveH); // Get a pointer to the wave data 

    //for(int i = 0;i < windowSize*windowSize; i++){    
    //  *wp++ =pixels[i];                 
    //}

    //glDeleteBuffers(1,&ID);
}

// Main function for the XOP
extern "C" int
RenderTriangle(FitParamsPtr p)
{
    waveX=(float*)WaveData(p->waveX);
    waveY=(float*)WaveData(p->waveY);
    waveZ=(float*)WaveData(p->waveZ);

    char *myargv [1];
    int myargc=1;
    myargv [0]=strdup ("RenderTriangle");
    glutInit(&myargc,myargv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_DEPTH | GLUT_RGB);
    glutInitWindowSize(windowSize,windowSize);
    glutCreateWindow("OpenGL");
    init();
    glutDisplayFunc(display);
    glutIdleFunc(idle);
    glutMainLoop();
    p->result = 1;

    return 0;
}

static XOPIORecResult
RegisterFunction()
{
    int funcIndex;

    funcIndex = (int)GetXOPItem(0);         // Which function invoked ?
    switch (funcIndex) {
        case 0:                                 // y = RenderTriangle(w,x) (curve fitting function).
            return (XOPIORecResult)RenderTriangle;  // This function is called using the direct method.
            break;
    }
    return 0;
}

/*  XOPEntry()

    This is the entry point from the host application to the XOP for all
    messages after the INIT message.
*/
extern "C" void
XOPEntry(void)
{   
    XOPIORecResult result = 0;

    switch (GetXOPMessage()) {
        case FUNCADDRS:
            result = RegisterFunction();    // This tells Igor the address of our function.
            break;
    }
    SetXOPResult(result);
}

/*  main(ioRecHandle)

    This is the initial entry point at which the host application calls XOP.
    The message sent by the host must be INIT.
    main() does any necessary initialization and then sets the XOPEntry field of the
    ioRecHandle to the address to be called for future messages.
*/
HOST_IMPORT int
main(IORecHandle ioRecHandle)
{   
    XOPInit(ioRecHandle);                           // Do standard XOP initialization.
    SetXOPEntry(XOPEntry);                          // Set entry point for future calls.

    if (igorVersion < 600) {
        SetXOPResult(OLD_IGOR);
        return EXIT_FAILURE;
    }

    SetXOPResult(0);
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:18:56.243

*   VBO 用于传输顶点数据。

您正在通过 VBO 传输点云数据，没有比这更好的了。

*   PBO 用于传输像素数据。

您可以使用 PBO 从 OpenGL 帧缓冲区异步读取数据。

*   可以绘制 FBO。

您应该使用 FBO 将您的目标帧缓冲区与任何窗口操作隔离开来。

> 2）另外，我只想运行一次 glutMainLoop 。我应该换成 FreeGLUT 吗？

您根本不必运行主循环。您只需要创建一个窗口即可；在主循环启动之前它不会出现。您需要窗口来获取 OpenGL 上下文，但您可以放心地省略主循环。

无需注册任何回调（它们不会被调用），只需按顺序执行您的 OpenGL 命令。如果您的库被多次调用，您不必重新创建窗口，但可能需要调用 glutSetWindow 以使上下文成为当前的。

1.  设置一个 FBO 来绘制
2.  画到 FBO
3.  glReadPixels
    *   进入 PBO 和 glMapBuffer 和 memcpy。
    *   或直接放入适当大小的缓冲区。

# javascript - 使用 Handlebars 模板不会触发 Backbone 事件

> ID：14365652
> 
> 赞同：1
> 
> 时间：2013-01-16T18:56:37.840
> 
> 标签：javascript, backbone.js, handlebars.js, backbone-views, backbone-events

我有这个代码：

**PageView.js**

```
var PageView = Backbone.View.extend({
    events: {
         'click .unpublish': 'unpublish'
    },

    tagName: 'tr',
    className: 'pageedit',

    template: Handlebars.compile( PageViewTemplate ),

    render: function() {
        this.$el.html( this.template( this.model ) );
        return this;
    },

    unpublish: function() {
        alert('hi');
    }
}); 
```

**PagesView.js**

```
PagesView = Backbone.View.extend({

     tagName: 'tbody',

     initialize: function() {
         this.collection.on('reset', this.render, this);
         this.render();
     },

     template: Handlebars.compile(PagesTemplate),

     render: function() {
         var countPages = this.collection.at(0).get('count');

         _.each(this.collection.at(0).get('pages'), function(model) {
              pageView = new PageView({ model: model });
              this.$el.append( pageView.render().el );
         }, this);

         $('.main').html( this.template({ pages: this.$el.html() }) );

         this.delegateEvents(this.events);

         return this;
     },
}); 
```

**页面.hbs**

```
<td class="pageId">
    {{ id }}
</td>
<td class="pagename">
    <a href="/pages/{{ alias }}">{{ pagename }}</a>
</td>
<td class="catname">{{ catname }}</td>
<td class="author">{{ author }}</td>
<td>{{ date }}</td>
<td>
    {{#if status}}
        <a href="#" class="unpublish">
            <img src='../{{ siteURL }}assets/img/admin/published.png'>
        </a>
    {{else}}
        <a href="#" class="publish">
            <img src='../{{ siteURL }}assets/img/admin/not-published.png'>
        </a>
    {{/if}}
</td>
<td>
    <a href="#" class="intrash">
        <img src='../{{ siteURL }}assets/img/admin/delete.png'>
    </a>
</td> 
```

**页面.hbs**

```
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Catalog</th>
            <th>Author</th>
            <th>Date</th>
            <th>Status</th>
            <th>Intrash</th>
        </tr>
    </thead>
    <tbody>
        {{{pages}}}
    </tbody>
</table> 
```

在 router.js 中创建所有实例：

```
var pages = new Pages();
pages.fetch().done(function() {
    new PagesView({ collection: pages});
}); 
```

如果我单击 .unpublish 链接，不会触发 PageView 中的事件。所有视图都呈现良好，但事件不起作用:(可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:51:20.790

我认为你的问题就在这里：

```
$('.main').html( this.template({ pages: this.$el.html() }) ); 
```

只要你说`this.$el.html()`，你已经失去了你的事件。Backbone 将 a [`delegate`](http://api.jquery.com/delegate/)（或其等效项[`on`](http://api.jquery.com/on/)）绑定到视图的`el`事件处理，因此事件处理绑定到 DOM 节点对象。当您说 时`this.$el.html()`，您已将所有内容都转换为字符串，并且该字符串进入了 DOM；但事件绑定到 DOM 元素对象而不是字符串。结果是一切看起来都正确，但没有触发任何事件。

你`Pages.hbs`应该看起来更像这样：

```
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Catalog</th>
            <th>Author</th>
            <th>Date</th>
            <th>Status</th>
            <th>Intrash</th>
        </tr>
    </thead>
</table> 
```

然后你应该做这样的事情来获取页面上的所有内容：

```
// Add the basic <table> HTML.
$('.main').html(this.template());
// Append the <tbody> DOM node which has event handling attached to it.
$('.main').find('table.table').append(this.$el); 
```

# c++ - 如何使用 QSettings 在 Qt 应用程序中加载设置

> ID：14365653
> 
> 赞同：10
> 
> 时间：2013-01-16T18:56:44.023
> 
> 标签：c++, qt, qsettings

有两种可能的方式：

*   将所有设置加载到某个结构中
*   按需加载值

哪种方法更好？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T19:22:23.727

这取决于您使用**设置文件**的方式。您想允许您的应用程序的用户**动态**更改文件中的设置（例如.ini 文件）吗？还是必须由 GUI 设置设置？

如果您使用某些 GUI 来更改设置，我建议您在应用程序开始时从静态类加载主要设置。

```
void SettingsManager::loadSettings()
{
    // .ini format example
    QSettings settings(FileName, QSettings::IniFormat);

    IntegerSetting = settings.value("SettingName", default).toInt();
    BooleanSetting = settings.value("SettingName", default).toBool();

    // ...
} 
```

[然后，由于QSettings](http://qt-project.org/doc/qt-4.8/qsettings.html)优化，按需保存更改的值没有问题。

```
/**
  * key is your setting name
  * variant is your value (could be string, integer, boolean, etc.)
  */
void SettingsManager::writeSetting(const QString &key, const QVariant &variant)
{
    QSettings settings(FileName, QSettings::IniFormat);

    settings.setValue(key, variant);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T19:03:43.600

如果您担心，可以将每个逻辑设置组放在接口后面。然后，构建一个使用 QSettings 按需检索设置的具体类。

如果您发现这是性能瓶颈，请构建一个缓存设置的具体类。（我从来不需要这样做。QSettings 一直都足够快。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-09T09:53:30.930

我不会完全回答你的问题，因为你问的是一个错误的问题；）你问的是阅读设置。`QSettings()`使用构造和调用读取`QSettings::value()`几乎从来都不是问题，我所有的测量都表明它非常非常快，非常接近 0 毫秒。关于你的问题：我会直接读取数据，即没有中间结构。拥有另一层只是复杂性，不值得为可能的同步付出努力。现在是真正的问题。

然而，一个很大的问题是写入设置。如果您使用本机存储进行设置，这在 Windows 上也相当快，这是 Windows 注册表（Windows 上的默认设置）。注册表由操作系统优化，缓存在 RAM 中，因此写入也不会导致延迟。然而在 Linux 上，这似乎是一个非常不同的故事。以下内容与 Linux 相关（在我的例子中是 Ubuntu 和 Kubuntu）。

我没有详细研究 Qt 的源代码，但我所有的测量结果表明，在普通磁盘上进行任何更改后将设置写入磁盘至少需要大约 50 毫秒，SSD 可能会更快一些。在我看来，当`QSettings`对象数据已更改并且对象被销毁或应用程序事件循环准备好做一些工作（即不忙于重绘或处理其他事件）时，调用保存操作。然后将设置刷新到磁盘。

因此，我会警告不要`QSettings().setValue(key, value);`在您关心速度的任何地方调用它。因为这将导致对象销毁时立即进行保存操作并导致延迟。

如果您只调用一次设置的保存操作，例如在关闭应用程序时，您可以轻松支付 50 毫秒，节省时间不是问题。但这通常不是您想要的。您希望动态保存应用程序状态。换句话说，当您更改应用程序中的某些内容，然后在不关闭第一个实例的情况下打开该应用程序的另一个实例，并且您希望新实例已经具有新设置。在这种情况下，您必须在完成任何更改后立即保存所有内容，而不仅仅是在应用程序关闭时。然后节省时间成为一个大问题。

我是怎么做的。我创建了一个`Settings`具有静态方法并提供类似 API 作为`QSettings`对象的单例类。在这个单例对象中，我`QSettings`只创建一次对象（就在我实例化之后`QApplication`），并且只在应用程序结束时销毁它一次。在我的代码中，我调用`Settings::value(key)`或`Settings::setValue(key, value)`在需要时调用。优点是只有在事件循环准备好时才保存设置。当然，这仍然需要 50 毫秒，但可以肯定的是，它只会被调用一次，并且会保存同时缓存的所有更改。`QSettings().setValue(key, value)`与每次调用 save相比，这是一个很大的改进，如果您进行多次此类调用，可能会阻塞您的 UI。

您当然可以通过多种方式实现单例。我使用的是这个：

设置.h：

```
#pragma once

#include <QSettings>

/// Singleton! Create only one instance!
class Settings
{
public:
    Settings();
    ~Settings();

    static bool contains(const QString &key);
    static QVariant value(const QString &key, const QVariant &defaultValue = QVariant());
    static void setValue(const QString &key, const QVariant &value);

private:
    static Settings *s_instance;
    QSettings m_settings;
}; 
```

设置.cpp：

```
#include "settings.h"

Settings *Settings::s_instance = nullptr;

Settings::Settings()
{
    Q_ASSERT(s_instance == nullptr);
    s_instance = this;
}

Settings::~Settings()
{
    Q_ASSERT(s_instance != nullptr);
    s_instance = nullptr;
}

bool Settings::contains(const QString &key)
{
    return s_instance->m_settings.contains(key);
}

QVariant Settings::value(const QString &key, const QVariant &defaultValue)
{
    return s_instance->m_settings.value(key, defaultValue);
}

void Settings::setValue(const QString &key, const QVariant &value)
{
    s_instance->m_settings.setValue(key, value);
} 
```

主.cpp：

```
...
Application application; // must be created before settings
Settings settings; // create settings singleton
application.exec() // runs event loop - settings is stored whenever event loop is ready
// settings destroyed here
// application destroyed here
... 
```

而在其余的代码中，只需调用`Settings::setValue(key, value);`.

请注意，即使这个解决方案对于一些时间非常关键的用例来说也不够好。例如，考虑通过拖动鼠标来调整拆分器或窗口的大小。您希望它流畅并同时保存设置，对吗？为了实现平滑，您不能在拖动过程中保存它，而只能在拖动完成后保存。因此，不要将设置保存在鼠标移动事件中。您只想在拖动完成后更改设置。要实现这一点，您将不得不使用事件过滤器做一些巧妙的技巧，也许继承和自定义库存的 Qt 小部件或其他东西，只是根据您的需要。但这是不同的故事和不同的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T19:11:11.033

在 的文档中[`QSettings`](http://qt-project.org/doc/qt-4.8/qsettings.html)，它说它已经被优化得非常好。

在内部，它保留了 QStrings 到 QVariants 的映射。所有访问器方法都非常有用且易于使用。

当我使用`QSettings`时，我将其设置为类似于他们使用`readSettings()`和`writeSettings()`函数的示例。在页面的一半左右看到这个[例子。](http://qt-project.org/doc/qt-4.8/mainwindows-application.html)

在我调用`readSettings()`QSettings 对象的那一刻，它会按需加载值，并将所有设置保存在某个结构中。

因此，在我的主要功能中，我确保设置了我的应用程序名称和组织名称，并且我还使用`QSettings::setFormat`了 ，然后每当我想访问 QSettings 时，我都会使用默认参数创建一个 QSettings 实例并访问设置。

```
QSettings s;
int val = s.value("Some_Group/some_setting", default_value).toInt();

// ...

s.setValue("Some_Group/some_setting", val); 
```

# xcode - 从 UICollectionViewCell 呈现一个 UIPopoverController

> ID：14365654
> 
> 赞同：6
> 
> 时间：2013-01-16T18:56:47.787
> 
> 标签：xcode, ios6, uipopovercontroller, uicollectionview, uicollectionviewcell

我希望从 UICollectionViewCell 上的按钮呈现 UIPopoverController。

到目前为止，一切都创建好了，但弹出框不可见。

有没有一种特殊的方法可以做到这一点？

如果我从集合视图单元格以外的任何其他地方显示它，该代码就可以工作。

以下代码位于 UICollectionViewCell 子类中。

```
if (_infoPopover == nil) {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    GameInfoViewController *gameInfoVC = (GameInfoViewController *)[storyboard instantiateViewControllerWithIdentifier:@"GameInfoViewController_ID"];

    UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:gameInfoVC];
    _infoPopover = popover;
    [gameInfoVC setGameNameString:_gameNameLabel.attributedText];
}

[_infoPopover presentPopoverFromRect:_infoButton.frame inView:self permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T17:09:18.860

从 UIViewController 执行 PopOver，而不是在 UICollectionViewCell 中。所以，使用委托来控制。

```
//Cell.m
-(void)popOVerClick:(UIButton *)button{
    [[self delegate] didPopOverClickInCell:self];
} 
```

执行协议

```
//ViewController
    -(void)didPopOverClickInCell:(MyCell *)cell{
    if ([self.flipsidePopoverController isPopoverVisible]) {
        [self.flipsidePopoverController dismissPopoverAnimated:YES];
    } else {

        FlipsideViewController *controller = [[FlipsideViewController alloc] initWithNibName:@"FlipsideViewController" bundle:nil];
        controller.label.text = cell.title;
        controller.delegate = self;

        self.flipsidePopoverController = [[UIPopoverController alloc] initWithContentViewController:controller];
        [self.flipsidePopoverController presentPopoverFromRect:cell.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    }
} 
```

和你的代码：[https ://github.com/lequysang/TestPopOver](https://github.com/lequysang/TestPopOver)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T03:09:45.030

将 inView 更改为 collectionView

[_infoPopover presentPopoverFromRect:_infoButton.frame inView:self.collectionView allowedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

# lucene - Lucene 的结果数和偏移量

> ID：14365658
> 
> 赞同：0
> 
> 时间：2013-01-16T18:56:57.610
> 
> 标签：lucene, elasticsearch

我正在通过 JSON 查询 Lucene 索引，但我无法弄清楚如何指定返回多少结果以及搜索结果的偏移量（如“从文档 10 开始”）。我假设它就像

```
{
  "fields" : ["foo","bar"],
  ... // STUFF GOES HERE
  "query": { ... }
} 
```

作为旁注，如果有人能指出我在哪里使用这样的 Lucene 的文档，而不是 Java API（每个搜索结果都链接到），我也会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:04:58.060

您正在寻找[此处记录](http://www.elasticsearch.org/guide/reference/api/search/from-size.html)的 From 和 Size 参数。因此，检索 10 个文档，从第 10 个（或者一次抓取 10 个时的第 2 页）开始：

```
{
    "from" : 10, "size" : 10,
    "query" : { ... }
} 
```

# html - bgcolor 属性

> ID：14365661
> 
> 赞同：0
> 
> 时间：2013-01-16T18:57:06.343
> 
> 标签：html, css, colors, background

有一张桌子

```
<tr bgcolor="#aacbdd"> 
```

我使用 reset.css 说

```
...td { background: transparent; .... 
```

并且此规则会删除 bgcolor 属性中设置的所有背景。但是我不能拒绝使用 reset.css 而且我不能更改 HTML（网站中有大量这样的纯 HTML） 目标是保存这些 bgcolor 背景。我试过了

```
.ololo tr
{
    background: inherit;
} 
```

但是没有用。我如何能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:59:59.917

如果您只有几种颜色，则可以使用属性选择器：

```
[bgcolor="#aacbdd"] {
    background: #aacbdd;
}
[bgcolor="#c73cab"] {
    background: #c73cab;
} 
```

这是小提琴：http: [//jsfiddle.net/JN3wW/](http://jsfiddle.net/JN3wW/)

* * *

如果你有许多不同的颜色，这可能会变得笨拙。我建议您为此依赖 JavaScript。这是一个使用 jQuery 的示例：

```
$('tr[bgcolor]').css('background-color', function () {
    return $.attr(this, 'bgcolor');
}); 
```

这是小提琴：http: [//jsfiddle.net/JN3wW/4/](http://jsfiddle.net/JN3wW/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:02:55.360

您正在使用 CSS/样式表重置，并且在样式表中，将使用最新的定义。

所以尝试设置`style`属性`tr`而不是元素属性。

`<tr style="background-color:#aacbdd;">`

# sql - 用于 SSRS 显示的 SQL 重组表

> ID：14365662
> 
> 赞同：0
> 
> 时间：2013-01-16T18:57:07.550
> 
> 标签：sql, sql-server-2008, tsql, pivot

我正在使用 MS SQL Server 2008 R2 并拥有一组数据：

```
LocaId  Location  StaffId
1       Main St   1
2       South Ave 1
3       South Ave 2
4       2nd St    1
5       2nd St    2
6       Lewis Ave 1 
```

我想显示 SSRS 报告的数据，例如标题中使用的位置。

```
 John       Mark
Location  Main St    South Ave
Location  South Ave  22nd St
Location  22nd St    Null
Location  Lewis Ave  Null 
```

但是使用以下代码：

```
SELECT 'Location',
(CASE WHEN l.StaffId = 1 THEN l.Location ELSE NULL END) AS 'John',
(CASE WHEN l.StaffId = 2 THEN l.Location ELSE NULL END) AS 'Mark'
FROM Location l 
```

我得到以下结果。正确显示数据似乎很容易，但我没有得到需要在报告上显示的结果。

```
 John        Mark
-------- ----------- ---------
Location Main St     NULL
Location South Ave   NULL
Location 22nd St     NULL
Location Lewis Ave   NULL
Location NULL        Main St
Location NULL        South Ave 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:00:27.303

只需添加一个聚合函数：

```
SELECT l.location,
MAX(CASE WHEN l.StaffId = 1 THEN l.Location ELSE NULL END) AS 'John',
MAX(CASE WHEN l.StaffId = 2 THEN l.Location ELSE NULL END) AS 'Mark'
FROM Location l
GROUP BY l.location 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:05:59.907

如果您希望`null`值显示在列表底部，则可以使用：

```
SELECT 'Location',
  MAX(CASE WHEN l.StaffId = 1 THEN l.Location ELSE NULL END) AS 'John',
  MAX(CASE WHEN l.StaffId = 2 THEN l.Location ELSE NULL END) AS 'Mark'
FROM
(
  select StaffId, location,
    row_number() over(partition by StaffId order by locaid) rn
  from Location
) l
GROUP BY rn 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/e39ce/3)

您还可以使用该`PIVOT`函数来转换数据：

```
select 'Location',
  [1] as 'John',
  [2] as 'Mark'
from
(
  select staffid, location, 
    row_number() over(partition by StaffId order by locaid) rn
  from location
) src
pivot
(
  max(location)
  for staffid in ([1], [2])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/e39ce/8)

结果是：

```
| COLUMN_0 |      JOHN |      MARK |
------------------------------------
| Location |   Main St | South Ave |
| Location | South Ave |    2nd St |
| Location |    2nd St |    (null) |
| Location | Lewis Ave |    (null) | 
```

# javascript - 在 handlebars.js 中使用具有数字属性的对象

> ID：14365665
> 
> 赞同：9
> 
> 时间：2013-01-16T18:57:19.287
> 
> 标签：javascript, handlebars.js

是否可以将 Handlebars 与具有数字键的对象一起使用？

例如：

```
var str = "<div>{{apples}}</div>",
    tmpl = Handlebars.compile(str);

tmpl({apples: "works!"}); // returns "<div>works!</div>" 
```

效果很好，但是

```
var str = "<div>{{4}}</div>",
    tmpl = Handlebars.compile(str);

tmpl({4: "works!"}); 
// returns Error: Parse error on line 1: <div>{{4}}</div> -------^ Expecting 'DATA', 'ID', got 'INTEGER' 
```

搜索时我找不到任何对此的引用，并且我还没有探索源代码。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T19:08:40.067

因此，在进一步环顾四周后，我发现我需要将数字括在方括号中，例如：

`{{[4]}}`

这是一个半相关的 SO 问题的链接[如何通过把手中的索引访问访问数组项？](https://stackoverflow.com/questions/8044219/handlebars-access-array-item)

上面的链接是指访问数组项，但答案给了我尝试将数字路径包装在方括号中的想法。

# uiwebview - 更改 UIWebView 中 HTML 文本字段的 UIReturnKey

> ID：14365668
> 
> 赞同：1
> 
> 时间：2013-01-16T18:57:26.953
> 
> 标签：uiwebview, ios6, uikeyboard

我们的应用程序中有一个 UIWebView 来减轻创建大型表单的痛苦。许多文本字段会生成带有“Go”按钮的键盘，但我们不会将用户从任何文本字段发送到另一个页面。“完成”按钮会更合适。

一般来说，有没有办法在通常的 HTML 标记之外自定义键盘上的 UIReturnKey？

# jquery - 捆绑脚本文件未呈现。

> ID：14365673
> 
> 赞同：30
> 
> 时间：2013-01-16T18:58:03.943
> 
> 标签：jquery, asp.net-mvc, resourcebundle

脚本文件名：

```
jquery.transit.min.js 
```

该文件位于 Scripts 文件夹中，

```
bundles.Add(new ScriptBundle("~/bundles/jquery")
       .Include("~/Scripts/jquery-{version}.js"));

bundles.Add(new ScriptBundle("~/bundles/jqueryui")
       .Include("~/Scripts/jquery-ui-{version}.js"));

bundles.Add(new ScriptBundle("~/bundles/jqueryval")
       .Include("~/Scripts/jquery.unobtrusive*", "~/Scripts/jquery.validate*"));

bundles.Add(new ScriptBundle("~/bundles/jtransit")
       .Include("~/Scripts/jquery.transit*")); 
```

在我的`View`,

```
@Scripts.Render("~/bundles/jquery","~/bundles/jtransit")
@Scripts.Render("~/bundles/jqueryui")
@Scripts.Render("~/bundles/jqueryval") 
```

渲染`HTML`

```
<script src="/Scripts/jquery-1.8.3.js"></script>
<script src="/Scripts/jquery-ui-1.9.2.js"></script>
<script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script> 
```

`jquery.transit.min.js`不会被渲染。我错过了什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-16T20:36:02.790

我认为这将是因为您只有文件的 .min 版本。

从您的输出中，我可以看到您正在运行站点的调试版本。我想捆绑器正在寻找一个非缩小文件。

如果您要进行 Release 构建，那么它将被捆绑在 OK 中。

我建议获取传输文件的非缩小版本，并将其包含在您的 Scripts 文件夹中。如果做不到这一点，只需复制缩小版本但文件名中没有 .min 。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-16T21:08:30.717

从 开始，在调试模式下将**忽略**`MVC4`JavaScript 文件或 CSS 文件的任何最小化版本。正如 ngm 建议的那样，您需要从以下位置重命名文件，

 **```
jquery.transit.min.js 
```

到，

```
jquery.transit.js 
```

或者，您可以修改`bundles.IgnoreList`以允许呈现最小化的文件，如此处[所示](http://www.kendoui.com/forums/mvc/general-discussions/vs2012-rtm-mvc4-kendo-bundle-not-rendering.aspx)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-10T17:42:07.143

我必须在 Application_Start 中执行此操作：

```
BundleTable.EnableOptimizations = true; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-09T11:38:03.883

就我而言，我试图使用同名的脚本包和样式包。

BundleConfig.cs：

```
bundles.Add(new ScriptBundle("~/bundles/custom")
    .Include("~/Scripts/custom.js"));

bundles.Add(new StyleBundle("~/bundles/custom")
    .Include("~/CSS/custom.css")); 
```

_Layout.cshtml：

```
@Scripts.Render("~/bundles/custom")
@Styles.Render("~/bundles/custom") 
```

这行不通。配置中添加的最后一个包仍然存在，`@Scripts.Render("~/bundles/custom")`只是呈现一个空行。

我正在使用 MVC 5.2.3。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-19T00:24:07.493

如果上述问题都不能解决您的问题，那么您可能错过了这一行

```
BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

从 Global.asax.cs 文件中，如果您开始捆绑，请查看此站点： [https ://www.asp.net/mvc/overview/performance/bundling-and-minification](https://www.asp.net/mvc/overview/performance/bundling-and-minification)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-08T13:32:31.797

在我的情况下，Visual Studio 2013 只是认为缺少捆绑 css 文件，它在解决方案资源管理器中的文件名上显示黄色问号。

只需双击所有这些*据称丢失*的文件，Visual Studio 就会找到它们，黄色问号将标记为关闭，并且捆绑将像魅力一样重新开始工作。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-02-02T21:49:16.213

并确保您没有使用 IE 8。我在该浏览器中捆绑失败，但在 Chrome 或 Firefox 中可以正常工作。**

# css - CSS 重置不适用于 Firefox 和 Text

> ID：14365674
> 
> 赞同：0
> 
> 时间：2013-01-16T18:58:05.577
> 
> 标签：css, firefox, reset

我一直在研究 Eric Meyer CSS Reset。我有一个文字很重的网站。重置适用于边距。但它不适用于字体和字体大小。即使我进行了重置，Firefox 似乎也会使所有文本变小。有没有办法在 CSS 代码中解决这个问题？

还是有任何可行的Firefox hacks？如果你想看看我的问题是在 chrome 中加载我的页面，然后在 Firefox 中加载并比较：[http ://emilymagnuson.com/mynews/index.html](http://emilymagnuson.com/mynews/index.html)

另外，我是初学者，所以如果有什么我公然失踪的东西，请告诉我。将不胜感激。

谢谢！

```
/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
} 
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
   quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

#box {
    background-color: #0F3;
    margin: 0px;
    float: left;
    height: 200px;
    width: 300px;
    padding-top: 0px;
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 0px;
    font-family: "Courier New", Courier, monospace;
    font-size: 1em;
    color: #F00;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:16:21.607

提到`reset.css`的内容未在[您上面链接的网站中链接](http://emilymagnuson.com/mynews/index.html)！

此外，这对我来说似乎是一个舍入错误。

你的 CSS 规则：

```
.BodyType {
    font-size: 1.125em;
    line-height: 1.65em;
} 
```

Firefox 和 Chromium 都显示`1.125em`字体大小，而 Opera`1.13em`在 Dragonfly 中显示。

包含`reset.css`并使用完整的测试用例对其进行测试。如果仍然存在差异，请尝试将小数位限制为两位（例如`1.13em`）。

如果为`body`-element 上的字体大小设置像素值，请尝试使用导致整数值的分数。例如，基本字体大小为`10px`，元素字体大小为`1.125em`，计算出的字体大小为`11.25px`，而元素字体大小为`1.2em`，计算出的字体大小为`12px`。

# c# - ADO.Net IsolationLevel.Snapshot 与 SET READ_COMMITTED_SNAPSHOT ON

> ID：14365676
> 
> 赞同：2
> 
> 时间：2013-01-16T18:58:08.870
> 
> 标签：c#, ado.net, read-committed-snapshot

我很好奇在数据库上使用 IsolationLevel.Snapshot 和 SET READ_COMMITTED_SNAPSHOT ON 的效果。IsolationLevel 枚举的[文档](http://msdn.microsoft.com/en-us/library/system.transactions.isolationlevel.aspx)记录了快照隔离的行为，这不是我们在我们的情况下要寻找的。

启用 READ_COMMITTED_SNAPSHOT 后，我们应该指定 IsolationLevel.Unspecified，还是根本不提供此值？或者，如果我们确实指定了 IsolationLevel.Snapshot，我们会实现启用 READ_COMMITTED_SNAPSHOT 的预期行为吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T03:45:10.507

我已经使用 SQL 2008 R2 和 Entity Framework 4 完成了以下测试。（数据库的 READ_COMMITTED_SNAPSHOT 选项为 ON）

我创建了以下存储过程来返回上下文隔离级别（来自[这里](https://stackoverflow.com/a/1038269/122195)的原始文件）：

```
Create Procedure TempTestIsolation
AS 
Begin
  DECLARE   @UserOptions TABLE(SetOption varchar(100), Value varchar(100))
  INSERT    @UserOptions
  EXEC('DBCC USEROPTIONS WITH NO_INFOMSGS')

  SELECT    Value
  FROM      @UserOptions
  WHERE     SetOption = 'isolation level'
End 
```

然后我编写了以下测试：

```
static void Main(string[] args)
{
    var entities = new MyEntities();
    // Execute the SP to get the isolation level
    string level = entities.TempTestIsolation().First().Value;
    Console.WriteLine("Without a transaction: " + level);

    var to = new TransactionOptions() { IsolationLevel = System.Transactions.IsolationLevel.Snapshot };
    using (var ts = new TransactionScope(TransactionScopeOption.Required, to))
    {
        // Execute the SP to get the isolation level
        level = entities.TempTestIsolation().First().Value;
        Console.WriteLine("With IsolationLevel.Snapshot: " + level);
    }

    to = new TransactionOptions() { IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted };
    using (var ts = new TransactionScope(TransactionScopeOption.Required, to))
    {
        // Execute the SP to get the isolation level
        level = entities.TempTestIsolation().First().Value;
        Console.WriteLine("With IsolationLevel.ReadCommitted: " + level);
    }
    Console.ReadKey();
} 
```

谁的输出是： ![测试输出](../Images/f191d9d3d80ab31b2691f616f62b2a2f.png)

如您所见，当您在*TransactionOptions中将**IsolationLevel*设置为*Snapshot*时，存储过程在“Snapshot”隔离级别下执行，而**不是**在“Read Committed Snapshot”下执行。

 ***相反，如果您将*IsolationLevel*设置为*ReadCommitted*，它将在“Read Committed Snapshot”下执行**。**

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:23:11.333

如果您在 DB 级别启用了 read_committed_snapshot，那么除非修改，否则所有查询都将具有该默认隔离级别。

如果您更改查询本身的隔离级别，则查询将使用您修改它的隔离级别。***

# visual-studio-2012 - 有限的 VS2012 SQL 语法高亮

> ID：14365678
> 
> 赞同：3
> 
> 时间：2013-01-16T18:58:13.023
> 
> 标签：visual-studio-2012, syntax-highlighting, database-project, sql-server-2012-datatools

我在不同的机器（均为 Win8、64 位）上有两个 VS2012 Premium（11.0.51106.01 更新 1）实例。两者都安装了 SQL Server Data Tools。在这两个中，我都在处理同一个 SQL Server 数据库项目。

但是一个实例的 SQL 语法突出显示选项有限（参见屏幕截图）。

我的问题是如何获得全套突出显示选项？

![在此处输入图像描述](../Images/ce44922afcb3dcd30cc9692634a6ae58.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:39:30.533

我注意到在机器上安装 SQL Server 2012 实例并使用有限的语法突出显示选项后一段时间，问题得到了解决。

# etl - 从 cloverETL 调用网络服务

> ID：14365685
> 
> 赞同：0
> 
> 时间：2013-01-16T18:58:44.380
> 
> 标签：etl

调用 Web 服务需要哪个版本的 cloverETL？我正在查看网站[http://www.cloveretl.com/](http://www.cloveretl.com/)并且对如此多的产品变化感到困惑。

它与 oracle ODI 相比如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:28:06.983

WebServiceClient 组件 ( [http://doc.cloveretl.com/documentation/UserGuide/index.jsp?topic=/com.cloveretl.gui.docs/docs/webserviceclient.html](http://doc.cloveretl.com/documentation/UserGuide/index.jsp?topic=/com.cloveretl.gui.docs/docs/webserviceclient.html) ) 可用于以下商业发行版：

*   CloverETL 设计师
*   CloverETL 服务器
*   CloverETL 集群

当然，它也可用于上述产品的评估版本。WebServiceClient 是用于访问 Web 服务的出色且易于使用的工具，允许简单的请求生成和响应处理。

在社区版版本中还可以使用组件 HTTPConnector ( [http://doc.cloveretl.com/documentation/UserGuide/index.jsp?topic=/com.cloveretl.gui.docs/docs/httpconnector.html](http://doc.cloveretl.com/documentation/UserGuide/index.jsp?topic=/com.cloveretl.gui.docs/docs/httpconnector.html) )相同的目的。但是您需要自己准备请求和处理响应。

# iphone - video.js mp4 iphone 本机播放器覆盖

> ID：14365686
> 
> 赞同：2
> 
> 时间：2013-01-16T18:58:45.113
> 
> 标签：iphone, html, mp4

使用 video.js：

我只有一个视频格式的mp4。我为它设置了字幕，并在桌面和安卓（galaxy s3）上工作。iPhone 会自动在本机播放器中播放视频，这会使字幕不起作用。

有没有解决的办法？

# php - 继承 - 在包含的文件中包含文件

> ID：14365687
> 
> 赞同：0
> 
> 时间：2013-01-16T18:58:50.753
> 
> 标签：php, inheritance

我有三个文件：

*   博客.php
*   评论.php
*   函数.php

在我的 blog.php 中有一个用于 function.php 和 comment.php 的 include()。

我的问题是：comment.php 有没有办法从 blog.php 继承 function.php 的包含，并在不再次声明 include() 函数的情况下使用它的内容？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:32:52.850

每次包含文件时，包含的文件都会在包含之前继承所有代码。如果您包含这样的内容：

***一个.php***

```
$foo="bar";
include('b.php'); 
```

***b.php***

```
include('c.php');
$foobar = $bar." is ".$foo 
```

**c.php**

```
$bar = "foo"; 
```

**d.php**

```
include('a.php');
echo $foobar; 
```

希望那些对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:09:28.357

如果首先包含 function.php，它将可用于在 comment.php 中运行的任何代码。

但是，如果comment.php 需要function.php 才能正确运行，那么`include_once`在comment.php 的顶部放置一个是个好主意。

# javascript - Jquery Flexslider 在幻灯片更改上添加和删除类

> ID：14365688
> 
> 赞同：1
> 
> 时间：2013-01-16T18:58:52.577
> 
> 标签：javascript, jquery, slider, flexslider

我正在使用 jquery 插件[Flexslider](http://www.woothemes.com/flexslider/)。我正在使用轮播作为滑块的导航。我试图在页面加载时向第一个轮播元素添加一个 css 类“活动”，然后在用户选择另一个元素时从第一个元素中删除“活动”类并将“活动”类添加到下一个元素用户选择。

轮播作为导航工作正常，但是当我使用轮播中的“开始功能”添加活动类时，如下所示，滑块停止移动，只停留在一张幻灯片上。奇怪的是，它可以点击 3-4 次，然后就不会继续移动了......

想法？

**Javascript**

```
<script type="text/javascript" charset="utf-8">
    $(window).load(function() {
        // The slider being synced must be initialized first
        $('#clientthumbs').flexslider({
            animation: "slide",
            controlNav: false,
            animationLoop: true,
            directionNav: true, 
            slideshow: false,
            itemWidth: 210,
            itemMargin: 20,
            asNavFor: '#clienttestimonials',
            start : function(slider) {
                $('#clientthumbs li').click(function(event) {
                 event.preventDefault();                     
                 $('#clientthumbs li').removeClass('active');                    
                 $(this).addClass('active');
                 $('.flexslider').show();
                 var slideTo = $(this).attr("rel"); //Grab rel value from link;
                 var slideToInt = parseInt(slideTo); 
                 if (slider.currentSlide != slideToInt) {
                    $(this).addClass('active');
                    slider.flexAnimate(slideToInt) //Move the slider to the correct slide (Unless the slider is also already showing the slide we want);
                 }

                });
               }  
        });

        $('#clienttestimonials').flexslider({
            animation: "slide",
            controlNav: false,
            directionNav: false, 
            animationLoop: false,
            slideshow: false,
            sync: "#clientthumbs"
        });
    });
</script> 
```

**HTML**

```
<div id="clientthumbs" class="flexslider">
  <ul class="slides">
    <li class="client1"></li>
    <li class="client2"></li>
  </ul>
</div>

<div  id="clienttestimonials" class="flexslider">
  <ul class="slides">
    <li>
      <div class="clientpicsandquotes">  
      </div>       
    </li>
    <li>
      <div class="clientpicsandquotes"> 
      </div>   
    </li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:25:53.090

尝试将 rel 标签添加到 #clientthumbs li 项目和 #clienttestimonials li 项目并确保它们匹配。然后将您的启动功能替换为：

```
start : function(slider) {
   $('#clientthumbs li').click(function(event) {
    event.preventDefault();                     
    $('#clientthumbs li').removeClass('active');                    
    $(this).addClass('active');
    $('.flexslider').show();
    var slideTo = $(this).attr("rel"); //Grab rel value from link;
    var slideToInt = parseInt(slideTo); 
    if (slider.currentSlide != slideToInt) {
       $(this).addClass('active');
       slider.flexAnimate(slideToInt) //Move the slider to the correct slide (Unless the slider is also already showing the slide we want);
    }

}
    }); 
```

# json - 在 Scala 中扫描一个巨大的 JSON 文件以获取可反序列化的数据

> ID：14365694
> 
> 赞同：7
> 
> 时间：2013-01-16T18:59:31.977
> 
> 标签：json, scala, stream, iterator, jerkson

我需要能够处理大型 JSON 文件，在我们在文件中迭代/流式传输时从可反序列化的子字符串中实例化对象。

***例如：***

假设我只能反序列化为以下实例：

```
case class Data(val a: Int, val b: Int, val c: Int) 
```

并且预期的 JSON 格式是：

```
{   "foo": [ {"a": 0, "b": 0, "c": 0 }, {"a": 0, "b": 0, "c": 1 } ], 
    "bar": [ {"a": 1, "b": 0, "c": 0 }, {"a": 1, "b": 0, "c": 1 } ], 
     .... MANY ITEMS .... , 
    "qux": [ {"a": 0, "b": 0, "c": 0 }  } 
```

我*想做*的是：

```
import com.codahale.jerkson.Json
val dataSeq : Seq[Data] = Json.advanceToValue("foo").stream[Data](fileStream)
// NOTE: this will not compile since I pulled the "advanceToValue" out of thin air. 
```

最后一点，我希望找到一个涉及 Jerkson 或 Play 框架附带的任何其他库的解决方案，但是如果另一个 Scala 库可以更轻松地处理这种情况并获得良好的性能：我不反对尝试另一个库. 如果有一种手动搜索文件然后使用 Json 库从那里继续解析的干净方法：我很好。

我*不想*做的是在没有流式传输或使用迭代器的情况下摄取整个文件，因为一次将整个文件保存在内存中会非常昂贵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:19:11.570

我没有用 JSON 完成它（我希望有人会为你想出一个交钥匙解决方案）但是用 XML 完成了它，这是一种处理它的方法。

在流解析器的帮助下，它基本上是一个简单的 Map->Reduce 过程。

**地图**（你的`advanceTo`）

使用[JSON Simple](http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_5_-_Stoppable_SAX-like_content_handler)之类的流解析器（未测试）。在回调中匹配“路径”时，通过将其写入流（文件支持或内存中，具体取决于您的数据）来收集下面的任何内容。这将是`foo`您示例中的数组。如果您的映射器足够复杂，您可能希望在映射步骤中收集多个路径。

**减少**（你的`stream[Data]`）

由于您在上面收集的流看起来非常小，您可能不需要再次映射/拆分它们，您可以直接在内存中将它们解析为 JSON 对象/数组并对其进行操作（转换、重组等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:52:22.437

这是我解决问题的当前方法：

```
import collection.immutable.PagedSeq
import util.parsing.input.PagedSeqReader
import com.codahale.jerkson.Json
import collection.mutable

private def fileContent = new PagedSeqReader(PagedSeq.fromFile("/home/me/data.json"))
private val clearAndStop = ']'

private def takeUntil(readerInitial: PagedSeqReader, text: String) : Taken = {
  val str = new StringBuilder()
  var readerFinal = readerInitial

  while(!readerFinal.atEnd && !str.endsWith(text)) {
    str += readerFinal.first
    readerFinal = readerFinal.rest
  }

  if (!str.endsWith(text) || str.contains(clearAndStop))
    Taken(readerFinal, None)
  else
    Taken(readerFinal, Some(str.toString))
}

private def takeUntil(readerInitial: PagedSeqReader, chars: Char*) : Taken = {
  var taken = Taken(readerInitial, None)
  chars.foreach(ch => taken = takeUntil(taken.reader, ch.toString))

  taken
}

def getJsonData() : Seq[Data] = {
  var data = mutable.ListBuffer[Data]()
  var taken = takeUntil(fileContent, "\"foo\"")
  taken = takeUntil(taken.reader, ':', '[')

  var doneFirst = false
  while(taken.text != None) {
    if (!doneFirst)
      doneFirst = true
    else
      taken = takeUntil(taken.reader, ',')

    taken = takeUntil(taken.reader, '}')
    if (taken.text != None) {
      print(taken.text.get)
      places += Json.parse[Data](taken.text.get)
    }
  }

  data
}

case class Taken(reader: PagedSeqReader, text: Option[String])
case class Data(val a: Int, val b: Int, val c: Int) 
```

当然，这段代码不能非常干净地处理格式错误的 JSON，并且要用于多个顶级键“foo”、“bar”和“qux”，需要向前看（或从可能的顶级键列表中匹配） )，但总的来说：我相信这可以完成工作。它没有我想要的功能那么强大，也不是超级健壮，但 PagedSeqReader 绝对可以防止它变得*过于*混乱。

# javascript - HTML 表单 onsubmit 有时只能工作

> ID：14365697
> 
> 赞同：1
> 
> 时间：2013-01-16T18:59:40.603
> 
> 标签：javascript, html, forms, timing, onsubmit

项目摘要：打开子弹出窗口并在表单中输入信息。Onsubmit 信息被输入到数据库中，弹出窗口被隐藏并且父页面被取消隐藏。然后父页面显示来自数据库的信息。

在大多数情况下，我拥有的代码可以工作，但在某些情况下，当我提交表单时，窗口会关闭并且信息不会添加到数据库中。我想知道是否需要在某处添加延迟，以便有时间将数据插入数据库，但我从未使用过任何计时代码并且不确定它需要去哪里。有谁知道为什么它有时只会添加到数据库中？问题时间往往是表格被使用的前几次，以及尝试一个接一个地输入相同信息的时间。

与表单相关的代码如下所示：

```
 <script>
    var db = window.openDatabase("DB1", "", "DB", 1024 * 1000)

    function closeSelf() {
        document.forms['moneyorder_form'].submit();
        hide(document.getElementById('AddMoneyOrderPopup'));
        unHide(document.getElementById('MoneyOrdersMain'));
    }

    $(document).ready(function () {
        $('#moneyorder_form').submit(function () {

            insertMO($('#moCNumber').val(), $('#moCAmount').val(), "MoneyOrder");
            renderMoneyOrders();
            return false;
        });
        renderMoneyOrders();
    });

</script>

<div data-role="page" id="AddMoneyOrderPopup">
    div data-role="content" data-theme="a">
        <h2 style="text-align:center">Money Order</h2>
        <form method="get" id="moneyorder_form" name="moneyorder_form" onsubmit="closeSelf()">
            <div class="ui-grid-a">
                <div class="ui-block-a">
                    <p style="text-align:center; display:inline"><b>Number</b></p>
                    <p><input type="number" required="required" step="1" id="moCNumber" name="moCNumber"></p></div>
                <div class="ui-block-b">
                    <p style="text-align:center; display:inline"><b>Amount</b></p>
                    <p><input type="number" required="required" min=".01" step=".01" id="moCAmount" name="moCAmount"></p>
                </div>
                <div class="ui-block-a">
        <input type="submit" data-role="button" data-theme="a" value="Add" />
                </div>
            </div>
        </form>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:43:07.303

您似乎使用的是新的 HTML5 SQL API，而不是服务器支持的数据库。如果是这样，HTML5 支持`transaction`接受可选错误和成功回调的函数：

```
db.transaction(function(tx) {
  // executeSql
}, opt_errorCallback, opt_successCallback); 
```

因此，我不会添加计时器，而是创建两个回调，并且仅在调用成功回调时才显示新记录。

# apache - Excel工作表不移动超过有限的行

> ID：14365698
> 
> 赞同：0
> 
> 时间：2013-01-16T18:59:41.430
> 
> 标签：apache, excel, apache-poi

我在“工作表”变量中有一个 excel 模板。如图所示，我需要将数据库值添加到新行中。我使用 apache poi 中的函数来编辑 excel 文件。

```
sheet.shiftRows(RowId, sheet.getLastRowNum(), Rows); 
```

但它不会添加超过 16 行。最初看起来 pageheight 是 1，所以它不能超过一页，但即使使用高度更改为 9

```
sheet.getPrintSetup().setFitHeight((short)9); 
```

同样的错误来了。知道为什么会这样吗？

shiftRows 函数的参数是 15、25、12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:40:04.540

```
 HSSFPrintSetup printSetup = sheet.getPrintSetup();
    sheet.getPrintSetup().setFitWidth((short) 1);
    sheet.getPrintSetup().setFitHeight((short) 0);
    sheet.setAutobreaks(true);
    printSetup.setLandscape(true); 
```

# java - 选择菜单时出错

> ID：14365701
> 
> 赞同：0
> 
> 时间：2013-01-16T18:59:56.610
> 
> 标签：java, selenium-webdriver

以下是为[http://www.royalmailgroup.com/](http://www.royalmailgroup.com/)的主页编写的课程， 我正在尝试单击“关于我们”链接和 FOI 联系人。

```
package sample.keyword;

import java.io.File;
import java.util.concurrent.TimeUnit;
import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.openqa.selenium.interactions.internal.Coordinates;
import org.openqa.selenium.internal.Locatable;
import org.openqa.selenium.support.events.EventFiringWebDriver;
import org.openqa.selenium.support.events.internal.EventFiringMouse;

 public class FeeToPay {

    public static WebElement Menu, SubMenu ;
    public static InternetExplorerDriver driver;
    //public static FirefoxDriver driver;
    public static EventFiringWebDriver eDriver;
    public static EventFiringMouse eMouse;
    public static String xpathMainMenu ="//div[@class='content']/ul/li/span/*";

public void OpenApplication(String Url) throws Exception{

            File file = new File("D:\\Software\\IEDriverServer.exe");
            System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
            driver= new InternetExplorerDriver();

            //driver = new FirefoxDriver();
            eDriver= new EventFiringWebDriver(driver);
            eMouse= new EventFiringMouse(eDriver, null);
            driver.manage().window().maximize();
        try{
            String baseUrl = "http://www.royalmailgroup.com/";
            this.driver.get(baseUrl);

        }
        catch(Exception E){
                throw E;
        }
    }
    public static EventFiringWebDriver getWebDriver(){
        return eDriver;
    }
    public void NavigateTo(String strMenuPath) throws Exception {
    if(strMenuPath == null || strMenuPath.isEmpty())throw new Exception("no menu path mentioned");

    String [] MenuItems = strMenuPath.split("->");
    java.util.List<WebElement> liMenuItems;
    liMenuItems= FeeToPay.getWebDriver().findElements(By.xpath(xpathMainMenu));

    for (int counter =0; counter<MenuItems.length;counter++ ){

        if(counter==0){
            if(liMenuItems.get(counter).getText().equalsIgnoreCase(MenuItems[counter])){
                Locatable item = (Locatable)liMenuItems.get(counter);
                Coordinates c =  item.getCoordinates();
                eMouse.mouseMove(c);
                                }

       }
        if(counter!=0 && counter == MenuItems.length-1 ){
            eDriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
                WebElement ele = eDriver.findElement(By.linkText(MenuItems[counter]));
                ele.click();
        }
     } 
```

} }

我收到以下错误 [VerboseTestNG] FAILED: "sample.keyword.FeeToPayTest" - sample.keyword.FeeToPayTest.testOpenApplication() 在 9033 毫秒内完成 [VerboseTestNG] org.openqa.selenium.ElementNotVisibleException: 驱动程序尝试的点单击元素未滚动到视口中。（警告：服务器未提供任何堆栈跟踪信息）[VerboseTestNG] 命令持续时间或超时：1.93 秒

我正在使用 Selenium Jar 构建信息：版本：'2.28.0'，修订：'18309'，系统信息：os.name：'Windows 7'，os.arch：'amd64'，os.version：'6.1'， java.version: '1.6.0_37'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:29:35.690

需要添加 WebDriverWait wait = new WebDriverWait(eDriver,10); wait.until(ExpectedConditions.elementToBeClickable(By.linkText(MenuItems[counter]))); 在点击子菜单之前。

# ruby-on-rails - 如何在未知类型对象的对象实例上使用define_method？

> ID：14365702
> 
> 赞同：1
> 
> 时间：2013-01-16T18:59:58.870
> 
> 标签：ruby-on-rails, ruby, mocking, metaprogramming

所以，我有点想做类似于 rspec / mocha's 的事情`mock`，但只针对两个对象，而不是全部。这是我到目前为止所拥有的：

```
def mock(obj, method_to_mock, value)
    obj.class << obj do
        define_method(method_to_mock) do
            return value
        end
    end
end 
```

我从这篇文章中得到了这样写的想法：[https ://stackoverflow.com/a/185969/356849](https://stackoverflow.com/a/185969/356849)

那么我可以做这样的事情：

```
mock(self.instantiated, :sections, sections) 
```

它会用我的 Section 对象数组覆盖我存储在`self.instantiated`'s中的对象。`sections``sections`

我这样做的原因是因为我正在存储对象的序列化和加密版本，并且我希望能够对对象进行解密和反序列化，然后恢复所有关系以便我可以查看在我的视图中的对象，就好像它是从数据库中读取的一样。但这并不重要，而且大部分已经完成。

所以，我希望能够做到这一点：

`mock(<Instance of object>, :<method of object that is going to be overridden, to avoid db access>, <the stuff to return when the overridden method is invoked)`

目前，我收到一条错误消息`obj.class << obj do`：

```
NoMethodError: undefined method `obj' for #<MyObject::Encrypted:0x7f190eebcd18> 
```

想法？

* * *

更新

将第二行更改为`class << obj`现在无限循环。

```
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/activerecord-2.3.15/lib/active_record/connection_adapters/abstract/connection_pool.rb:351:in `retrieve_connection_pool'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/activerecord-2.3.15/lib/active_record/connection_adapters/abstract/connection_pool.rb:351:in `retrieve_connection_pool'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/activerecord-2.3.15/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `retrieve_connection'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/activerecord-2.3.15/lib/active_record/connection_adapters/abstract/connection_specification.rb:123:in `retrieve_connection'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/activerecord-2.3.15/lib/active_record/connection_adapters/abstract/connection_specification.rb:115:in `connection'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/activerecord-2.3.15/lib/active_record/base.rb:1305:in `columns'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/activerecord-2.3.15/lib/active_record/base.rb:1318:in `column_names'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/searchlogic-2.4.28/lib/searchlogic/named_scopes/ordering.rb:35:in `ordering_condition_details'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/searchlogic-2.4.28/lib/searchlogic/named_scopes/ordering.rb:26:in `method_missing'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/searchlogic-2.4.28/lib/searchlogic/named_scopes/or_conditions.rb:28:in `method_missing'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/activerecord-2.3.15/lib/active_record/base.rb:2002:in `method_missing_without_paginate'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/gems/will_paginate-2.3.16/lib/will_paginate/finder.rb:170:in `method_missing_without_attr_encrypted'
from /home/me/.rvm/gems/ruby-1.8.7-p371@project/bundler/gems/attr_encrypted-a4b25f01d137/lib/attr_encrypted/adapters/active_record.rb:50:in `method_missing'
from /home/me/Work/GravityLabs/project/app/models/proposal/encrypted.rb:119:in `mock'
from /home/me/Work/GravityLabs/project/app/models/proposal/encrypted.rb:79:in `instantiate'
from /home/me/Work/GravityLabs/project/app/models/proposal/encrypted.rb:58:in `each'
from /home/me/Work/GravityLabs/project/app/models/proposal/encrypted.rb:58:in `instantiate' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:49:45.607

```
def mock(obj, method_to_mock, value=nil)
  obj.define_singleton_method(method_to_mock) do value end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:24:24.023

`obj.class << obj do`没有意义。

你可能想说的是

```
def mock(obj, method_to_mock, value)
  (class << obj; self; end).class_eval do
    define_method(method_to_mock) do
      return value
    end
  end
end 
```

`(class << obj; self; end).class_eval`语法是打开返回该单例类的单`obj`例类，然后在传递该块的单例类上调用 class_eval。

在您的语法中，`obj.class`将`:class`消息`obj`作为接收器发送到接收器，该接收器返回对 obj 的类（而不是其单例类）的引用，然后您尝试在该接收器上调用将`<<`评估结果`obj do...end`作为 arg 传递的方法。由于`obj`不是`self`(MyObject::Encrypted:0x7f190eebcd1) 的方法，您会得到 NoMethodError。

在现代 ruby​​ 中，不要说相对神秘，`(class << obj; self; end)`要获得单例类，您可以使用如下[`singleton_class`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-singleton_class)方法：`obj.singleton_class.class_eval do ... end`

# oracle11g - 共现计算

> ID：14365708
> 
> 赞同：0
> 
> 时间：2013-01-16T19:00:07.047
> 
> 标签：oracle11g, collaborative-filtering

我有一个有两列的表：

> ```
> (doc_id, keyword_id) 
> ```

我想计算数据库中文档上两个关键字的共现。我正在使用 Oracle 11g 数据库。计算需要一年时间。我有 7000 个文档和 5000 个关键字。

```
Co-occurrence (keyword1, keyword2)=025. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:33:36.170

我假设你也有一些`count`专栏？您将在 上连接该表，然后按（从连接中对同一个表的每个引用）`doc_id`的两个实例进行分组，并选择两者和计数的乘积。`keyword_id``keyword_id``sum`

# git - rpm 规范摘要中的 git id 从 %prep 填充

> ID：14365709
> 
> 赞同：1
> 
> 时间：2013-01-16T19:00:07.560
> 
> 标签：git, macros, rpm, specifications

在我正在做的 rpm 规范的 %prep 部分

如果 [ -d 目标 ] ; 然后 git 拉; 否则 git 克隆；菲

推送目标

%define _gitVer %(git rev-parse HEAD)

并希望在我的 rpm 摘要中这样

摘要：我的目标 %{_gitVer}

目标是做

转-qpi

并决定我们是否需要构建新的 rpm

有没有办法做到这一点？在 %prep 中定义宏没有总结

谢谢

-tg-

# javascript - 在文本框中自动调整文本

> ID：14365713
> 
> 赞同：0
> 
> 时间：2013-01-16T19:00:17.237
> 
> 标签：javascript, jquery, html

似乎无法在 html 或 JS（甚至可能是 jquery？）中找到这样做。

我有一个文本框，它会在页面下方的输入框中回显输入的任何内容。这个回显框需要自动适应其中的任何文本，这样它就不会在文本之后有这个巨大的空白点。

任何想法如何将输入字段自动适应插入其中的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:19:48.890

我想你正在寻找这样的东西：http: [//jsfiddle.net/ener3/](http://jsfiddle.net/ener3/)

```
$("#in").keyup(function(){
  var tmp = $("<span>")
            .text(this.value)
            .css("font", $("#out").css("font"))
            .appendTo("body"),
      wid = tmp.width();
  tmp.remove();

  $("#out").val(this.value).width(wid);
}); 
```

其中`#in`是输入的 id，`#out`是您要自动调整大小的文本框。

您可以将其添加到页面的头部，如下所示：

```
<script type="text/javascript">
$(function(){
    // paste the above code here
});
</script> 
```

确保将脚本标签放在 jQuery 之后：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

You can replace `1.8.3` with the version of jQuery you want to target. I wouldn't recommend using jQuery-latest to start as you'd have to account for potential deprecation where applicable.

# matlab - 如果最初保存在 UNIX 中，如何在 Windows 中加载 matlab 文件 (.mat)

> ID：14365714
> 
> 赞同：3
> 
> 时间：2013-01-16T19:00:17.607
> 
> 标签：matlab, unix

我正在尝试在 Windows 环境中打开一个 .mat 文件，但它失败了。它是在 Unix 环境中创建的。另请注意，此文件首先通过二进制方法 ftp 放入 .tar 文件中。该文件在 Unix 中打开，我认为它没有以任何方式损坏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:32:49.230

*.mat 文件格式与平台无关。操作系统无关紧要。

*.mat 文件有多种变体已被使用，旧版本无法始终读取新版本保存的格式。`save`您可以使用命令中可用的标志保存到旧版本 。这些格式已经更新，因为 Matlab 功能集需要更灵活的文件格式，并且随着其他技术的进步，最近版本中最引人注目的是 HDF5。

最后，该`save`命令支持 ASCII 格式选项。根据您对收到的错误消息的评论，我怀疑这是您当前的问题。

* * *

要解决您当前的问题：

首先，检查文件是否为 ASCII 文件。最简单的方法是简单地在记事本、写字板甚至 matlab 编辑器中打开它。如果文件是文本，那么这就变成了文件解析问题，适当使用`fscanf`shoudl解决问题。

如果该文件实际上是二进制 *.mat 文件，那么您可能存在 Matlab 版本不兼容问题。Yuo 可以返回源 unix 环境并保存到旧版本（例如`save .... -v7`）或更新阅读计算机的 Matlab 版本。

# java - 如何使 RSS 阅读器可读的提要

> ID：14365715
> 
> 赞同：0
> 
> 时间：2013-01-16T19:00:19.783
> 
> 标签：java, android, eclipse, rss

我正在寻找一个与 Android 兼容的 Java 提要阅读器类来帮助为我学校的日历创建一个日历应用程序。给我的提要位于[此处](http://www.google.com/calendar/feeds/pvhs.k12.nj.us_r6jaor04o80hpsaldf17civeio@group.calendar.google.com/public/basic)，它是基于原子的；不是 RSS 2.0

帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:09:01.530

[IBM 的这篇](http://www.ibm.com/developerworks/xml/tutorials/x-androidrss/ "IBM 文章")非常好的文章应该可以帮助您前进。它涵盖了所涉及的所有概念和技术……完整的代码示例和文档从第 4 页开始。一个可供下载的项目以及构建他们的示例。享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:09:24.843

从我的项目中查看这些代码[https://github.com/dodyg/AndroidRivers/tree/master/src/com/silverkeytech/android_rivers/syndications](https://github.com/dodyg/AndroidRivers/tree/master/src/com/silverkeytech/android_rivers/syndications)

他们同样处理 Atom 和 RSS。

# c# - 在 ASP .Net 中拖放？

> ID：14365720
> 
> 赞同：0
> 
> 时间：2013-01-16T19:00:39.170
> 
> 标签：c#, asp.net, drag-and-drop

集成拖放功能的最简单方法是什么？

例如，我将拥有一个案例列表和一个员工列表，并且我需要将一个案例分配给一个或多个员工（除其他外）。

做这种类型的任务看起来很复杂。

是否有图书馆或其他东西可以简化这一点？

它通常是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:47:34.360

是的，使用 JQuery 和 JQuery UI，它有一个[可拖动的插件](http://jqueryui.com/draggable/)和[可放置的插件](http://jqueryui.com/droppable/)来配置它。ASP.NET 本身没有内置任何内容。

要启用拖动，它很简单`$( "#draggable" ).draggable();`，其中 #draggable 是要拖动的元素的 ID。您还可以自定义何时可以启用拖动等选项。

# asp.net - 使用前端 ASP.net 从 Access db 迁移到 SQL Server 2008

> ID：14365722
> 
> 赞同：0
> 
> 时间：2013-01-16T19:00:40.017
> 
> 标签：asp.net, sql-server, ms-access, sql-server-2008-r2, ms-access-2007

我做了访问数据库到sql server的升迁。我的问题是，我是否必须手动更改网页中的所有数据源，或者有什么方法可以轻松做到这一点。

编辑：我的查询使用我的意思是用户输入`@WhichUser`和 sql server 为那些要求我命名标量变量的人抛出错误。通常`@`符号在 sql server 中有效，但在我的无效。这是因为我使用的是速成版还是我需要添加到查询中的任何其他内容。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:21:27.760

我发现我将控制参数名称命名为与列名称相同，而我在每个输入参数的前面使用了哪个，像`@WhichUser`这样通过将`WhichUser`名称添加到控制参数来解决。

# jquery - 浏览器检测 jQuery 1.9 最简单/最轻的替代品？

> ID：14365725
> 
> 赞同：64
> 
> 时间：2013-01-16T19:01:02.293
> 
> 标签：jquery, browser-detection

昨天我有几个客户抱怨某些代码停止工作。显然，它归结为使用现已弃用的插件`jQuery.browser`，昨天 jQuery 1.9 发布时该插件停止工作。

我（很快）查看了 1.9 更改文档，*似乎*他们希望我用一些非常繁重的库来代替那个**功能**。

是否有推荐的最轻量级插件或代码片段来恢复该功能？

对于这些网站的需求，这是非常基本的；我只需要对 IE 与 FF 与其他所有人进行最基本的检测。

建议？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-24T14:31:03.607

我使用了 Alexx Roche 回答的以下代码，但我想检测 MSIE：

```
<script type="text/javascript">
   $(document).ready(function() {
      if (navigator.userAgent.match(/msie/i) ){
        alert('I am an old fashioned Internet Explorer');
      }
   });
</script> 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-16T19:02:59.020

创建jQuery Migrate 是为了在您更新代码时[允许向后兼容。](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/)

[https://github.com/jquery/jquery-migrate](https://github.com/jquery/jquery-migrate)

作为奖励，它会在您使用时记录已弃用的功能。在您解决问题时，我会尝试一下。此外，您应该为您的网站设置特定版本的 jQuery。升级很好，但一定要在将它们投入生产之前测试这些升级。如果您使用的是 CDN，您仍然可以在文件名中指定特定版本。

现在，您**不需要 jQuery 插件**来满足您的要求。检查[对象](https://developer.mozilla.org/en-US/docs/DOM/window.navigator)。[_`navigator`](https://developer.mozilla.org/en-US/docs/DOM/window.navigator)

```
appCodeName: "Mozilla"
appName: "Netscape"
appVersion: "5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17"
cookieEnabled: true
doNotTrack: null
geolocation: Geolocation
language: "en-US"
mimeTypes: MimeTypeArray
onLine: true
platform: "MacIntel"
plugins: PluginArray
product: "Gecko"
productSub: "20030107"
userAgent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17"
vendor: "Google Inc."
vendorSub: "" 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-05-07T01:37:35.757

```
var browser = {
        chrome: false,
        mozilla: false,
        opera: false,
        msie: false,
        safari: false
    };
    var sUsrAg = navigator.userAgent;
    if(sUsrAg.indexOf("Chrome") > -1) {
        browser.chrome = true;
    } else if (sUsrAg.indexOf("Safari") > -1) {
        browser.safari = true;
    } else if (sUsrAg.indexOf("Opera") > -1) {
        browser.opera = true;
    } else if (sUsrAg.indexOf("Firefox") > -1) {
        browser.mozilla = true;
    } else if (sUsrAg.indexOf("MSIE") > -1) {
        browser.msie = true;
    }
    console.log(browser.msie); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-24T10:24:32.407

将此代码放在您的站点中（如 js 文件，或在 jQuery 代码之后...）：

```
var matched, browser;

// Use of jQuery.browser is frowned upon.
// More details: http://api.jquery.com/jQuery.browser
// jQuery.uaMatch maintained for back-compat
jQuery.uaMatch = function( ua ) {
    ua = ua.toLowerCase();

    var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
        /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
        /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
        /(msie) ([\w.]+)/.exec( ua ) ||
        ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
        [];

    return {
        browser: match[ 1 ] || "",
        version: match[ 2 ] || "0"
    };
};

matched = jQuery.uaMatch( navigator.userAgent );
browser = {};

if ( matched.browser ) {
    browser[ matched.browser ] = true;
    browser.version = matched.version;
}

// Chrome is Webkit, but Webkit is also Safari.
if ( browser.chrome ) {
    browser.webkit = true;
} else if ( browser.webkit ) {
    browser.safari = true;
}

jQuery.browser = browser; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-02-24T21:13:56.003

当我遇到同样的问题时，我使用了以下代码：

```
<script type="text/javascript">
 $(document).ready(function() {
    //if (!$.browser.webkit && ! $.browser.mozilla) { //depricated
    if (!navigator.userAgent.match(/mozilla/i) && 
        ! navigator.userAgent.match(/webkit/i) ){
        alert('Let me tell you about Mozilla');
    }
 });
</script> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-08-26T21:12:16.297

我将 jQuery.browser 中的逻辑抽象为插件[jquery.browser](https://github.com/gabceb/jquery-browser-plugin)。该插件是在 MIT 许可下发布的。

我还添加了对 IE11、Opera Webkit 和 Android 检测的支持。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-01-16T19:13:01.603

在您放弃折旧的方法之前，您可能无法更新。

你真的不应该在不指定版本号的情况下从 CDN 中包含 jquery，这在某种程度上违背了使用 CDN 的目的（无缓存）。

这是支持 $.browser 的最新版本的 jQuery 的链接：

[http://code.jquery.com/jquery-1.8.3.min.js](http://code.jquery.com/jquery-1.8.3.min.js)

只需用该链接替换您的 jquery.js src，您的代码将继续运行，直到您准备好继续前进并停止使用折旧的功能。

注意：Fancybox2 仍然使用 $.browser，这是自更新以来我见过的最常见的一个。

更新：Slickgrid 仍在使用`$.browser`，截至 2013 年 2 月 11 日没有更新

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-11T07:47:33.817

试试[Conditionizr](http://conditionizr.com)

希望这可以帮助 ：）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-10T13:50:57.803

可以通过额外检查特定 IE 版本中添加的标准全局对象的存在来检测 IE 的确切版本。

```
10 or older document.all
9 or older  document.all && !window.atob
8 or older  document.all && !document.addEventListener
7 or older  document.all && !document.querySelector
6 or older  document.all && !window.XMLHttpRequest
5.x document.all && !document.compatMode

if (document.all && !document.querySelector) {
    alert('IE7 or lower');
} 
```

这些测试避免使用用于欺骗的 userAgent

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-05-21T14:39:50.200

```
if(!$.browser){
    $.browser={chrome:false,mozilla:false,opera:false,msie:false,safari:false};
    var ua=navigator.userAgent;
        $.each($.browser,function(c,a){
        $.browser[c]=((new RegExp(c,'i').test(ua)))?true:false;
            if($.browser.mozilla && c =='mozilla'){$.browser.mozilla=((new RegExp('firefox','i').test(ua)))?true:false;};
            if($.browser.chrome && c =='safari'){$.browser.safari=false;};
        });
}; 
```

[http://jsfiddle.net/R3AAX/3/](http://jsfiddle.net/R3AAX/3/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-09-03T11:59:00.647

如果您想要的只是能够使用 jQuery.browser.msie 的第 3 方 jQuery 插件，那么这里有一个单线。只需在 jQuery 之后包含它。

```
jQuery.browser = jQuery.browser || {msie: navigator.userAgent.match(/msie/i) ? true : false}; 
```

这是最愚蠢的解决方法，但这就是我所需要的，而且它确实有效，所以你去吧！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-10-23T23:23:51.630

添加到这个讨论。我刚刚想出了一个 jquery $.browser 插件，它不是“检测”，只是将用户代理解析为一个易于使用的对象。可以轻松应用进一步的逻辑来进一步分解和解析特定的浏览器和平台。

我在[这里找到了关于用户代理的非常可靠的结果：UserAgentString.com](http://www.useragentstring.com/pages/All/)。我什至包括了 ie11 的版本检测（接近底部）。

```
//The following code is by no means perfect, nor is it meant to be a standalone 'detection' plugin. 
//It demonstrates parsing the useragent string into an easy to manage object. 
//Even if it does make detection rediculously easy.. :)

//Because this regex makes no assumptions in advance.
//IMO, It's compatibilty and maintainability is much higher than those based on static identifiers.

/*
  uaMatch replacement that parses a useragent string into an object
  useragent segments can be Name Value OR Name/Value OR Name

  Segment: Name Value
    Name: parsed to the last whitespace character
    Value: value after the last whitespace character
    Matches: (.NET CLR) (#.##), Android 2.3.4, etc
    Note: this regex can have leading/trailing whitespace (trimmed for object properties)

  Segment: Name/Value
    Matches: all values matching Name/Value
    Example: Firefox/24.0, Safari/533.1, Version/12.1, etc

  Segment: Name
    Matches: identifiers that hold no values (value of 'true' is implied)
    Example: Macintosh, Linux, Windows, KHTML, U, etc

   WARNING: not necessarily compatible with jQuery's $.browser implementation.
   - not recommended as a replacement for plugins that require it to function.
*/
(function ($) {

    var ua = navigator.userAgent.toLowerCase();

    var regex = /compatible; ([\w.+]+)[ \/]([\w.+]*)|([\w .+]+)[: \/]([\w.+]+)|([\w.+]+)/g;
    var match = regex.exec(ua);

    var browser = { };

    while (match != null) {
        var prop = {};

        if (match[1]) {
          prop.type = match[1];
          prop.version = match[2];
        }
        else if (match[3]) {
          prop.type = match[3];
          prop.version = match[4];
        }
        else {
          prop.type = match[5];
        }

        // some expressions have leading whitespace (i couldn't avoid this without a more complex expression)
        // trim them and get rid of '.' (' .NET CLR' = 'net_clr') 
        prop.type = $.trim(prop.type).replace(".","").replace(" ","_"); 
        var value = prop.version ? prop.version : true;

        if (browser[prop.type]) {
            if (!$.isArray(browser[prop.type]))
                browser[prop.type] = new Array(browser[prop.type]);

            browser[prop.type].push(value);
        }    
        else browser[prop.type] = value;

        match = regex.exec(ua);
    }

    for (var i in browser)
        if (i.indexOf("mac") > -1)
            browser.mac = true;

    if (browser.windows_nt && !browser.windows)
        browser.windows = true;

    //put known browsers into the 'version' property for 'some' jquery compatibility

    //for sake of argument chromium 'is' chrome
    if (browser.chromium && !browser.chrome)
        browser.chrome = browser.chromium;

    //chrome / safari / webkit
    if (browser.chrome) {
        browser.version = browser.chrome;
    }
    else if (browser.safari) {
        browser.version = browser.safari;
    }
    else {
        if (browser.applewebkit)
            browser.webkit = browser.applewebkit;

        if (browser.webkit)
            browser.version = browser.webkit;
    }

    //firefox / gecko
    if (browser.firefox) {
        if (browser.rv)
            browser.version = browser.rv;

        else browser.version = browser.firefox;
    }
    else if (browser.gecko) {
        if (browser.rv)
            browser.version = browser.rv;

        else browser.version = browser.gecko;
    }

    //opera
    if (browser.opera && !browser.version)
        browser.version = browser.opera;

    //msie
    if (browser.trident && browser.rv) //ie11
        browser.msie = browser.rv;

    if (browser.msie)
        browser.version = browser.msie;

    $.browser = browser;//Rename to reduce confliction?

    //WAS USED FOR TESTING & DISCOVERY (very useful)
    //TODO: remove line below
    alert(JSON.stringify($.browser));

}) (jQuery); 
```

在 Internet Explorer 10 上，JSON.stringify 将输出如下内容：

```
{"mozilla":"5.0","msie":"10.0","windows_nt":"6.2","trident":"6.0","net4.0e":true,"net4.0c":true,"net_clr":["3.5.30729","2.0.50727","3.0.30729"],"windows":true,"version":"10.0"} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-07-07T18:25:24.110

简短而强大。

```
// chrome, safari, webkit, mozilla, msie, opera
var chrome = /chrome/i.test(navigator.userAgent); 
```

# playframework - 如何让 Play 框架在 CentOS 上运行？

> ID：14365729
> 
> 赞同：2
> 
> 时间：2013-01-16T19:01:11.857
> 
> 标签：playframework

我觉得这将是一个非常愚蠢的问题，但我厌倦了无休止地阅读文档，甚至不确定自己是否走在正确的道路上。

我正在尝试让 Play 框架在我的服务器上运行。我对这台服务器有根访问权限，它使用 CentOS 作为操作系统。我可以使用 brew 包管理器让 Play 框架在我的本地 OS X 机器上完美运行，但我似乎无法使用 yum 包管理器（CentOS 使用的）找到 Play 框架，所以我必须下载并手动安装框架，这是我目前遇到的问题。

到目前为止，我所做的只是使用 wget 将 Play 框架安装文件复制到 CentOS 机器并解压缩。我运行这个：

```
wget http://download.playframework.org/releases/play-2.0.4.zip
unzip play-2.0.4.zip 
```

创建了一个名为“play-2.0.4”的目录，与框架相关的所有文件都在其中。我不确定下一步该怎么做。如果我进入这个目录并输入`play`，它只会显示“bash: play: command not found”，即使文件“play”肯定在当前目录中并且是可执行的。我`chmod +x play`只是为了确定，它仍然不会执行。我认为这是我需要执行以使框架正常工作的文件，但我不确定。我对 Linux 和服务器管理比较陌生，所以如果你能引导我朝着正确的方向前进，那将对我有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T04:16:40.033

有两种方法可以做到这一点

1.  设置`play`文件夹的路径。打开终端并输入：

    echo "export PATH=$PATH:[path-to-your-play-folder]" >> ~/.bashrc

    源〜/ .bashrc

2.  创建指向您的 bin 文件夹的软链接

    须藤 ln -s /play /usr/bin/

# jquery - 使用 jQuery 替换更改 onclick 属性

> ID：14365731
> 
> 赞同：3
> 
> 时间：2013-01-16T19:01:14.983
> 
> 标签：jquery, attributes, replace, onclick, attr

有人知道在 onclick 属性中替换某些字符串的最佳方法是什么吗？
**我需要获取当前值**并替换参数内的一些文本。

**例如，
我有这个链接：**

```
<a href="#" onclick="myfunction('parameter1a','parameter1b')">My link</a> 
```

**我想要这个：**

```
<a href="#" onclick="myfunction('parameter2a','parameter2b')">My link</a> 
```

**换句话说，我想要这样的东西：**

```
$('a').attr('onclick', $(this).attr('onclick').replace('1', '2')); 
```

**而且我知道我可以做到这一点，但我需要一些动态的东西来检索当前元素的值：**

```
$("a").attr('onClick', "myfunction('parameter2a','parameter2b')"); 
```

最后当我做了一个简单的演示时它工作了：http: [//jsfiddle.net/GkWhh/4/](http://jsfiddle.net/GkWhh/4/)

感谢您的解决方案！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T19:09:26.360

```
$('a[onclick]').attr('onclick', function(i, v){
   return v.replace(/1/g, '2');
}); 
```

[http://jsfiddle.net/cj9j7/](http://jsfiddle.net/cj9j7/)

如果您需要更动态的东西，请不要使用`onclick`属性，更改`onclick`属性是*hackish*，您可以改用`click`方法。

```
var param = 1;
$('a').click(function(){
   // ...

   if ('wildguess') {
     param = 1;
   } else {
     param++;
   }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:10:03.157

听起来是个很糟糕的主意，但无论如何 - 您可以使用类似的方法访问 onlick 属性的字符串值：

`$('a').each(function() { this.attributes.onclick.nodeValue = this.attributes.onclick.nodeValue.replace('1', '2'); })`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:11:57.577

你可以这样做：http: [//jsfiddle.net/SJP7k/](http://jsfiddle.net/SJP7k/)

```
var atr = $('a').attr('onclick');
var str = atr.split('1');
var natr = str.join('2');
$('a').attr('onclick',natr); 
```

# c++ - 一元 + 运算符有什么实际用途吗？

> ID：14365732
> 
> 赞同：30
> 
> 时间：2013-01-16T19:01:15.833
> 
> 标签：c++, operators, unary-operator

一元运算`+`符只是为了与一元运算符对称而包含`-`，还是在 C++ 代码中找到了一些实际用途？

在这里搜索，我遇到[了C中一元'+'运算符的目的是什么？](https://stackoverflow.com/questions/6637005/what-is-the-purpose-of-the-unary-operator-in-c)，但唯一有用的场景涉及预处理器宏。这些很高兴知道，但它们似乎是一些不太常见的情况，并且涉及宏。是否有涉及更常见 C++ 代码的用例？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-16T19:07:27.043

```
char ch = 'a';
std::cout << ch << '\n';
std::cout << +ch << '\n'; 
```

第一次插入将字符`a`写入`cout`. `ch`第二次插入写入to的数值`cout`。但这有点晦涩难懂。它依赖于编译器为`+`运算符应用积分提升。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-16T19:07:41.400

一元对称`-`并非完全没用。它可以用于强调：

```
const int foo = -1;
const int bar = +1; 
```

*重载*的一元`+`可用于表示产生与其操作数相同的*逻辑*值的操作，同时执行一些非平凡的计算。（我已经看到 Ada 中的类型转换这样做了，它允许`+`重载 unary ，但不允许转换。）我手头没有一个好的 C++ 示例，有人可能会争辩说它的风格很差。（话又说回来，我看到很多关于超载的咆哮`<<`。）

至于*为什么*C++ 有它，可能很大程度上是为了与 C 保持一致，它在 1989 年的 ANSI 标准中添加了它。C基本[原理](http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf)只是说：

> 一元加号被 C89 委员会从几个实现中采用，以与一元减号对称。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-16T19:17:25.070

如果您明确地避开类的任何数值语义，则*任何*运算符重载都不会“像 int 那样做”。在这种情况下，一元加号可能有任何意义，做的不仅仅是返回`*this`

突出的例子：[Boost.Spirit 的一元加法](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/operator/plus.html)用于嵌入式 EBNF 的[Kleene Plus](http://en.wikipedia.org/wiki/Kleene_star#Kleene_plus)生成一个解析器规则，让它的参数（也是一个解析器规则）匹配一次或多次。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-05T23:25:08.577

一元运算`+`符将左值转换为右值：

```
struct A {
  static const int value = 1;
};

// ...

int x = std::min(0, A::value); 
```

哦不！此代码不会链接，因为有人忘记定义（以及声明）`A::value`。 `std::min`通过引用获取它的参数，因此`A::value`必须有一个地址，以便引用可以绑定到它（从技术上讲，一个定义规则说它必须在程序中只定义一次。）

没关系，一元加解：

```
int x = std::min(0, +A::value); 
```

一元加号创建一个具有相同值的临时，并且引用绑定到临时，因此我们可以解决缺少的定义。

这不是您经常需要的东西，但它是一元加运算符的实际用途。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-18T22:04:00.307

一元 + 应用积分促销。@PeteBecker 的回答显示了一种有用的方法。

另一方面，请注意，一个无作用域的枚举类型被提升为一个整数类型，它可以表示`enum`. 所以在 C++03 中，即使没有 C++11 `std::underlying_type<T>`，你也可以这样做：

```
enum MyBitMask {
    Flag1 = 0x1,
    Flag2 = 0x2,
    Flag3 = 0x4,
    Flag4 = 0x8000000
};

inline MyBitMask operator&(MyBitMask x, MyBitMask y) {
    return static_cast<MyBitMask>( +x & +y );
}

inline MyBitMask operator|(MyBitMask x, MyBitMask y) {
    return static_cast<MyBitMask>( +x | +y );
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-20T01:30:52.697

有点晚了，但这是我偶然发现的一个非常扭曲的用法。显然，在`+`围绕遇到空预处理器令牌的可能性设计安全措施时，操作员可能很有用（如果可能不是严格必要的话）。有关更深入的讨论，请参阅[此帖子。](https://stackoverflow.com/a/20448080/1530508)

这很实用，但绝不是令人愉快的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-30T11:10:16.457

除其他外，`+`将 lambda 转换为函数指针。通常转换会自动发生，但有时不会。

例如，这不会编译：

```
std::array arr{
    [](int x){return x*x;},
    [](int x){return x*x*x;},
}; 
```

`std::array`您可以通过将函数指针类型指定为模板参数来使其工作，**或者**您可以这样做：

```
std::array arr{
    +[](int x){return x*x;},
    +[](int x){return x*x*x;},
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-30T12:06:23.920

由于算术变量 operator+ 会生成一个*新*值，因此我通常使用它来生成类引用（代理）类型的值副本。

```
template<class T> class ref_of{
   T* impl_; // or a more complicated implementation
public:
   T operator+() const{return *impl_;} 
   operator T&()&{return *impl_;}
}
...
ref_of<T> r = t;
auto s = +r; // this forces a copy 
```

另一种选择是使用`operator*`，但`ref_of`可能会与类似指针的对象混淆。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-30T10:57:50.923

因为对于算术变量 operator+ 会生成一个新值。我用它来生成类引用（代理）类型的值副本。

```
template<class T> class ref_of{
   T* impl_; // or a more complicated implementation
public:
   T operator+() const{return *impl_;}
   operator T&()&{return *impl_;}
} 
```

另一种选择是使用`operator*`，但`ref_of`可能会与类似指针的对象混淆。

# git - 警告：您留下 1 个提交，未连接到您的任何分支

> ID：14365736
> 
> 赞同：76
> 
> 时间：2013-01-16T19:01:27.623
> 
> 标签：git, version-control, branching-and-merging

EGit又来了。我犯了一个错误，试图在 EGit 中切换到不同的分支，但它以某种方式搞砸了，并且没有检查出任何分支。然后我对这个非分支进行了提交，然后当我意识到我没有跟踪正确的分支时，我运行了以下命令：

```
$ git checkout issue2
Warning: you are leaving 1 commit behind, not connected to any of your branches:

    bada553d My commit message

If you want to keep them by creating a new branch, this may be a good time to do so with:

    git branch new_branch_name ....

Branch issue2 set up to track remote branch issue2 from origin.
Switched to a new branch issue2\. 
```

现在我已经搞砸了，我如何将该提交与我当前的分支相关联？我对创建一个全新的分支不感兴趣，我只想将该提交拉入我的分支，`issue2`.

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-01-16T19:05:17.283

`git cherry-pick bada553d`如果它只是一个提交，你可以。

您还可以使用 reflog 引用您去过的任何地方：

```
git reflog 
```

然后使用其中一个提交：

```
git checkout -b temp HEAD@{3} 
```

从您当前提交的 3“次”前签出并创建一个分支临时。这是你以前的地方的面包屑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-02T19:40:54.187

您也可以在使用后将标签应用于您的提交，`git reflog`当您知道提交的哈希时：

```
 Git tag <tag's_name>  <commit's_hash>/HEAD@{<commit's_num>} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-08T20:40:21.663

如果您只想将该提交与当前分支相关联，您可以简单地执行此操作

1.  运行此命令以使用该提交创建一个新分支

    **`git branch temp {commit's SHA}`**

2.  然后只需将此提交与您当前的分支合并

    **`git merge temp`**

3.  现在只需删除我们创建的临时新分支

    **`git branch -d temp`**

# mongoose - 在 Mongoose 中填充 ObjectId 的数组

> ID：14365739
> 
> 赞同：7
> 
> 时间：2013-01-16T19:01:37.920
> 
> 标签：mongoose

我的文档包含一个名为的字段，该字段`clients`应该包含一组客户 ID。

```
{
  "first_name":"Nick",
  "last_name":"Parsons",
  "email":"nick@movementstrategy.com",
  "password":"foo",
  "clients":[
    "50f5e901545cf990c500000f",
    "50f5e90b545cf990c5000010"
  ]
} 
```

我的数据以 JSON 形式传入，我直接将其发送到 Mongo 以创建文档。出于某种原因，`clients`在我创建时没有被填充，所以我必须手动将它们作为字符串输入。

我的架构相当简单，定义为：

```
var userSchema = new Schema({
    first_name: {
        type: String,
        trim: true
    },
    last_name: {
        type: String,
        trim: true
    },  
    email: {
        type: String,
        trim: true,
        lowercase: true,
        index: true,
        unique: true,
        required: true
    },
    password: String,
    clients: [Schema.Types.ObjectId]
}); 
```

据我了解，我已经正确定义了客户。但是当我进行创建时，我无法让客户端数组填充。事件传递给 mongo 的原始对象看起来不错。

```
{ 
    first_name: 'Zack',
    last_name: 'S',
    email: 'zack@movementstrategy.com',
    password: 'test',
    clients: [
       '50f5e901545cf990c500000f', 
       '50f5e90b545cf990c5000010' 
    ] 
} 
```

我必须对我的输入做一些特别的事情以使其正确投射吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T19:30:08.843

简单的修复。检查传入数组是否已填充。如果是这样，我循环遍历每个并将转换后的 ObjectId 版本推送到数组中。显然`mongoose.Types.ObjectId('STRING');`能够将一般字符串转换为有效的 mongoose id。

```
// if clients was passed with associated client ids
if (data.clients.length > 0) {

    _.map(data.clients, function(cid) {

        // push client id (converted from string to mongo object id) into clients
        user.clients.push(mongoose.Types.ObjectId(cid));

    });

} 
```

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T11:16:31.337

接受的答案可能已过时...

如果您要更新此集合，我建议您使用 $push 更新。这种更新方法旨在避免在您所做的只是追加到集合中的数组时执行更新。

[http://docs.mongodb.org/manual/reference/operator/update/push/](http://docs.mongodb.org/manual/reference/operator/update/push/)

# mysql - mysql查询导致带有数字符号的空白页？

> ID：14365741
> 
> 赞同：0
> 
> 时间：2013-01-16T19:01:47.700
> 
> 标签：mysql, database, insert

希望有人可以帮助我：我有一个相当长的查询（大约 200 个值，此处缩短），我在下面列出。当我在 mysql 中运行时，我得到一个奇怪的响应：查询没有执行，但我没有收到错误消息。当我点击“开始”时，它会将我带到一个空白页面，左角有一个 # 符号！有人知道为什么会这样吗？看起来真的很奇怪。

这是查询。

```
INSERT INTO staff_access (user_name, user_type) VALUES 
("username1", "reg"), 
...
("username199", "co-op"),
("username200", "co-op"); 
```

注意 - 我的唯一键是一个自动递增的列“user_id”，我没有包含在 INSERT INTO 查询中......不确定这是否相关。

感谢您的任何反馈

-N

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:07:55.013

你为什么要插入`ORDER BY`？，MySQL 它不是最后一次插入最后显示的......只是做一个简单的

```
INSERT INTO staff_access (user_name, user_type) VALUES 
("username1", "reg"), 
...
("username199", "co-op"),
("username200", "co-op") 
```

并且当您`select`使用 时`order by`，如果您愿意，可以在 user_name 字段中使用索引，这将“排序”，但不是 100% 确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:04:19.420

删除这个

```
 ORDER BY user_name DESC 
```

订单不是在`SELECT`语句中使用`INSERT`

您可以在购买时订购`SELECT`它们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T19:04:20.297

`ORDER BY`不是有效的`INSERT`语句语法。

# c# - LINQ 中的 TSQL 按查询分组

> ID：14365743
> 
> 赞同：0
> 
> 时间：2013-01-16T19:01:51.783
> 
> 标签：c#, sql, linq, sql-server-2008, tsql

评论表有用户 ID。

```
select u.userid,review,COUNT(review) as coun,u.firstName,u.lastname,u.avatar,u.userid from reviews r
inner join users u on u.userid=r.userid
group by u.userid,review,u.firstName,u.lastname,u.avatar,u.userid
order by coun desc 
```

这个脚本是如何翻译成**linq**的？我有以下不工作，不完整的代码。 **代码**

```
var reviews = from r in context.Reviews.Where(r => r.CreateDate > dateFrom && r.CreateDate < dateTo)
                              group r by new { r.Review1, r.UserID } into g
                              join u in context.Users on g.Key.UserID equals u.UserID
                              select new UserMan
                              {
                                  ID = u.UserID,
                                  Avatar = u.Avatar,
                                  LastName = u.LastName,
                                  FirstName = u.FirstName,
                                  Review = g.Key.Review1,
                                  Reviews = g.Count()
                              };
                return reviews.ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:28:28.280

只是摆脱那个加入。

```
var reviews = from r in context.Reviews.Where(r => r.CreateDate > dateFrom && r.CreateDate < dateTo)
    group r by new { r.Review1, r.User } into g
    select new UserMan
         {
           ID = g.Key.User.UserID,
           Avatar = g.Key.User.Avatar,
           LastName = g.Key.User.LastName,
           FirstName = g.Key.User.FirstName,
           Review = g.Key.Review1,
           Reviews = g.Count()
         };

return reviews.ToList(); 
```

# javascript - 在不使用 th:inline 的情况下将变量表达式转换为 javascript

> ID：14365746
> 
> 赞同：11
> 
> 时间：2013-01-16T19:02:00.733
> 
> 标签：javascript, thymeleaf

我首先进行了搜索，但我发现了令人困惑的答案，因为我是 Thymeleaf 的新手，并且充其量是 javascript 的业余爱好者。

我只想知道如何将变量表达式传递给 javascript 函数，有点像在 JSP 中：

```
<a href="#" onclick="javascript:getContactId('${contact.id}');">Button</a> 
```

当然，Thymeleaf 失败并传递字符串 ${contact.id} 而不是它的值，那么我怎么能得到变量表达式的值呢？

我想要这样的原因是因为它取决于正在迭代的行`th:each`。

如果除了使用之外别无他`th:inline`法，那么考虑到上述陈述，最好的方法是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-16T20:53:17.393

这个有效：

```
th:onclick="'javascript:getContactId(\'' + ${contact.id} + '\');'" 
```

感谢百里香论坛：http: [//forum.thymeleaf.org/variable-expression-into-javascript-without-using-th-inline-td4025534.html](http://forum.thymeleaf.org/variable-expression-into-javascript-without-using-th-inline-td4025534.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-26T01:36:08.270

在 Thymeleaf 2.1 版中，我无法获得公认的答案。我确实[从 Thymeleaf 的 Twitter 帖子](https://twitter.com/thymeleaf/status/95830189258444800)中找到了一些指导。`th:onclick`您使用`th:attr`并指定其中的 onclick 属性，而不是使用。

```
th:attr="onclick='javascript:getContactId(\'' + ${contact.id} + '\');'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:07:12.710

您不能将`javascript`变量放入`onclick`或其他 DOM 属性中。的值`onclick`或任何其他 DOM 属性应该是一个常量字符串。

但是，您可以从 javascript 动态修改 onclick 属性的值，如下所示：

```
yourDomElement.onclick = anyVariable; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T06:37:18.420

你可以这样做：

th:onclick="'javascript:getContactId(\'' + ${contact.id} + '\');'"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-25T01:42:37.200

我在推特上问过 Thymeleaf 项目，他们的回答是：

您可以使用“+”运算符或文字替换。例如：`<a th:href="|javascript:change('start','${taskId}')|">`

欲了解更多信息：[https ://www.thymeleaf.org/doc/articles/standarddialect5minutes.html](https://www.thymeleaf.org/doc/articles/standarddialect5minutes.html)

我试过了，效果很好~

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-10T14:13:19.470

一种更通用的方法，如果您在 JS 中需要不作为事件处理程序参数传递的东西：

`th:attr="data-myValueFromThymeleaf=${contact.id}"`

所有浏览器都会忽略名称以 data- 开头的任何属性。因此它不会影响 UI，您可以轻松地在 javascript 中读取值。

我更喜欢这个，因为将 javascript 代码放在 html 中并不理想（[请参阅 unobtrusive javascript](https://en.wikipedia.org/wiki/Unobtrusive_JavaScript)）

# ember.js - 新的 ember.js 路由：如何连接网点？

> ID：14365749
> 
> 赞同：13
> 
> 时间：2013-01-16T19:02:07.677
> 
> 标签：ember.js, ember-router

我很困惑如何使用新的路由器方法连接插座。

**索引.html：**

```
...
<script type="text/x-handlebars" data-template-name="application">
  <h4>The application handelbar</h4>
  {{! outlet 1}}
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="index">
  <h4>The index handelbar</h4>
  {{! outlet 2 and 3}}
  {{outlet nav}}
  {{outlet main}}
</script>

<script type="text/x-handlebars" data-template-name="main">
  <h4>The main handelbar</h4>
</script>

<script type="text/x-handlebars" data-template-name="nav">
  <h4>The nav handelbar</h4>
</script>
... 
```

**应用程序.js：**

```
...
App.Router.map(function(match) {
  this.resource("index", { path: "/" });
  this.route("test");
});

App.IndexController = Ember.Controller.extend({
});

App.IndexView = Ember.View.extend({
  templateName: 'index'
});
... 
```

此代码呈现 outlet-1。

问题：

*   为什么要渲染 outlet-1？出口 1 和“索引”如何连接？
*   如何将插座 2 和 3 连接到同一个“索引”站点？

谢谢
咪咪

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T23:26:18.620

You need to specify this stuff in a route handler, using the renderTemplate method (or renderTemplates method, depending on your build).

What you're not seeing is that Ember is setting quite a few defaults for you already. In fact, the defaults set by Ember have allowed you to omit the entire route handler.

```
App.Router.map(function(match) {
  this.resource("index", { path: "/" });
  this.route("test");
});
App.IndexRoute = Ember.Route.extend({
  renderTemplate: function() {
     this.render(); 
     /* this is the default, it will basically render the
        default template, in this case 'index', into the 
        application template, into the main outlet (i.e. your 
        outlet 1), and set the controller to be IndexController.
     */

  }
}); 
```

What you want is to render additional templates in the renderTemplate function, likeso:

```
 renderTemplate: function() {
     this.render("index"); 
     // this renders the index template into the primary unnamed outlet. 
     this.render("navtemplate", {outlet: "nav"}); 
     // this renders the navtemplate into the outlet named 'nav'.
     this.render("main", {outlet: "main"});
     // this renders the main template into the outlet named 'main'.
  } 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T02:25:12.170

Ember 自动假设/匹配 IndexRoute、IndexController 和 IndexView。这是在[ember 路由指南中](http://emberjs.com/guides/routing/defining-your-routes/)

要连接嵌套路由，您可以这样做：

```
App.OtherRoute = Ember.Route.extend({
  renderTemplate: function() {
     this.render('otherTemplate', {
      into: 'index',
      outlet: 'nav'
     }); 
  }
}); 
```

[这](https://stackoverflow.com/a/14231712/1677295)是另一个问题的更深入的答案。

# css - 如何在 div 中制作非活动内容？

> ID：14365751
> 
> 赞同：51
> 
> 时间：2013-01-16T19:02:15.713
> 
> 标签：css, layout, html

如何`div`使用 JavaScript 使某些块中的内容处于非活动状态？

假设有一个带有“启用/禁用”命令的按钮。并且有一个带有一些文本的 div 块。当按下“启用/禁用”按钮时，是否为“启用”，您可以使用里面的内容，但是当“禁用”时，您不能使用 div 块中的内容。

我想为了在 div 块内制作非活动内容，我们需要在其上放置另一层，以防止编辑内容 div 块上的内容。

我很困惑如何实现这种功能。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-01-16T19:07:09.297

在不使用叠加层的情况下，您可以`pointer-events: none`在`div`using CSS 上使用。

```
div.disabled
{
  pointer-events: none;

  /* for "disabled" effect */
  opacity: 0.5;
  background: #CCC;
} 
```

[参考](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2019-04-11T10:01:32.910

**将 CSS 中 div[disabled] 的指针事件设置为无，**

```
div[disabled]
{
    pointer-events: none;
    opacity: 0.7; 
} 
```

**您可以通过添加禁用属性来禁用 div。**

```
<div disabled>
  <!-- Contents -->
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-22T11:01:21.027

```
div[disabled]
{
  pointer-events: none;
  opacity: 0.6;
  background: rgba(200, 54, 54, 0.5);  
  background-color: yellow;
  filter: alpha(opacity=50);
  zoom: 1;  
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";  
  -moz-opacity: 0.5; 
  -khtml-opacity: 0.5;  
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T19:07:42.413

使用 jquery 你可能会做这样的事情：

```
// To disable 
$('#targetDiv').children().attr('disabled', 'disabled');

// To enable
$('#targetDiv').children().attr('enabled', 'enabled'); 
```

这是一个 jsFiddle 示例：http: [//jsfiddle.net/monknomo/gLukqygq/](http://jsfiddle.net/monknomo/gLukqygq/)

您还可以选择目标 div 的子元素，并为它们添加一个“已禁用”的 css 类，并使用不同的视觉属性作为标注。

```
//disable by adding disabled class
$('#targetDiv').children().addClass("disabled");

//enable by removing the disabled class
$('#targetDiv').children().removeClass("disabled"); 
```

这是一个以 jsFiddle 为例：[https ://jsfiddle.net/monknomo/g8zt9t3m/](https://jsfiddle.net/monknomo/g8zt9t3m/)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-10-14T07:55:05.650

如果您想在另一个屏幕尺寸的视图中隐藏整个 div。您可以按照以下代码为例。

```
div.disabled{
  display: none;
} 
```

# c++ - 从对话接收结果

> ID：14365757
> 
> 赞同：0
> 
> 时间：2013-01-16T19:02:33.133
> 
> 标签：c++, windows, mfc, dialog

我正在尝试从基于 MFC C++ 对话框的应用程序中的对话框中获取一些数据。我制作了这张图片以帮助您更好地了解我的情况：

![在此处输入图像描述](../Images/f13a284e44d4c867ab5b8256ec92e9f4.png)

当用户单击`findWndBtn`左侧窗口中的 时，右侧对话框按`dlg.DoModal()`功能出现。用户完成对话框右侧的字段后，将执行以下代码：

```
HWND WindowHandle = FindWindow( WindowClass, WindowName );
CDialogEx::OnOk(); 
```

对话框退出后，我希望该`m_myWndHwnd`字段填充该对话框找到的句柄。

我怎样才能做到这一点？

请告诉我，如果说得不够多，请让我完成您需要的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:08:12.363

两种选择：

*   让第二个对话框将消息发送回第一个对话框，将要存储的结果作为参数传递。
*   让第二个对话框将结果存储在类成员变量中，并让调用者在对话框返回时检索它（通过成员函数或直接，如果您同意的话）。

# c++ - 如何在正则表达式匹配结果中包含分隔符？

> ID：14365758
> 
> 赞同：2
> 
> 时间：2013-01-16T19:02:35.140
> 
> 标签：c++, regex, matchevaluator

目前，我正在使用这种模式进行搜索和替换： `"(?<=\\{).+?(?=\\})"`. 这会找到大括号内的所有内容。（由[https://stackoverflow.com/a/8526268/1143917](https://stackoverflow.com/a/8526268/1143917)提供）

我将 'MatchEvaluator' 与委托一起使用，因此，当输入字符串为`{this} is a {string}`时，委托接收`this`和`string`。

这对我不利，因为我想同时替换火柴和大括号。

如何更改我的正则表达式，以便代表将收到包含大括号的匹配项，即`{this}`和`{string}`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:05:46.273

删除 positve lookbehind 和 positive lookahead，只使用括号：

```
 "\\{[^\\}]+\\}" 
```

我不能确定这一点，因为我从未在 C++ 中使用过正则表达式，但原则是 match `{`，加上所有不是的字符`}`，加上`}`.

# django - DateTimeField 没有时间

> ID：14365759
> 
> 赞同：6
> 
> 时间：2013-01-16T19:02:35.663
> 
> 标签：django

```
class Data(models.Model):
    time = models.DateTimeField() 
```

我的变量中有：

```
var = 2013-01-17 17:30

Data.objects.filter(time=var) 
```

我需要今天的所有数据（2013-01-17 - 没有时间）

怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-12-09T18:11:18.583

我遇到了同样的问题，只需使用`models.DateField()`而不是`models.DateTimeField()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:38:58.260

似乎没有一种非常简单的方法可以做到这一点。请参阅[如何在 Django 中过滤 DateTimeField 的日期？](https://stackoverflow.com/questions/1317714/how-can-i-filter-a-date-of-a-datetimefield-in-django).

您可以使用 strptime 从字符串中获取日期时间（[将字符串转换为日期](https://stackoverflow.com/questions/466345/converting-string-into-datetime)时间）：

```
from datetime import datetime

datetime.strptime(var, '%Y-%m-%d %H:%M:%S') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T18:32:01.693

您可以在过滤器内使用范围

```
Data.objects.filter(date__range=(date_min, date_max)) 
```

您可以在 00.00 和 23.59 之间设置时间

# java - 使用 opentripplanner 地理编码器获取位置坐标

> ID：14365761
> 
> 赞同：0
> 
> 时间：2013-01-16T19:02:52.313
> 
> 标签：java, http, geocoding, opentripplanner

我安装了 opentripplanner 并想使用它的地理编码器按位置名称获取坐标。但是，我既没有找到任何有关如何使用它的信息，也没有找到任何示例。

有人可以提供对地理编码器示例的请求或与 API 使用教程共享链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T16:18:49.573

请参阅[此处](https://gis.stackexchange.com/questions/44640/using-geocoder-of-opentripplanner/75721#75721)的解决方案。

此外，如果您想使用其地理编码器按位置名称获取坐标，则只需将 url 更改为`localhost:8080/otp-geocoder/geocode/?address=Pune`

# c# - 单选按钮列表选定的值在 asp.net 中不持久

> ID：14365766
> 
> 赞同：0
> 
> 时间：2013-01-16T19:03:00.113
> 
> 标签：c#

我有两个动态填充的单选按钮列表。第一个在按钮单击时填充，另一个在第一个单选按钮列表的更改事件中填充。问题仅在于第二个列表。问题是我无法在 InsertButton_Click 方法（由 ** 标记）中检索第二个单选按钮列表的更改值。它总是返回默认索引值，即 0。page_load 事件中没有任何内容。我读了很多类似的问题，但似乎没有任何帮助。请指导。下面是相同的 asp 和 c# 代码：

ASP：

```
<asp:Button id="SaveButton" 
           Text="Save"
           runat="server" onclick="SaveButton_Click">
       </asp:Button>  
       &nbsp;&nbsp;
       <asp:Button id="VisualiseButton" 
           Text="Visualise"
           runat="server" onclick="VisualiseButton_Click">
       </asp:Button>  

       <!--<hr />-->
       <asp:RadioButtonList id="RadioButtonList2" runat="server" Visible="false" 
            onselectedindexchanged="RadioButtonList2_SelectedIndexChanged" ></asp:RadioButtonList>

        <asp:RadioButtonList id="RadioButtonList1" runat="server" Visible="false" ></asp:RadioButtonList>
         <asp:Button id="SaveToDBButton" 
           Text="Insert"
           runat="server" Visible="false" onclick="InsertButton_Click"> 
```

C＃：

```
 protected void SaveButton_Click(object sender, EventArgs e)
    {
        String selQuery = "SELECT id, name FROM categories";
        try
        {
            con.Open();
            SqlDataAdapter da = new SqlDataAdapter(selQuery, con);
            DataTable dt = new DataTable();
            da.Fill(dt);
            RadioButtonList2.DataSource = dt;
            RadioButtonList2.DataTextField = "name";
            RadioButtonList2.DataValueField = "id";
            RadioButtonList2.DataBind();
            RadioButtonList2.RepeatColumns = 3;
            RadioButtonList2.AutoPostBack = true;
            RadioButtonList2.Visible = true;
        }

        catch (SqlException ex)
        {

        }

        finally
        {

            if (con != null)
            {

                con.Close();

            }
        }

    }
    protected void RadioButtonList2_SelectedIndexChanged(object sender, EventArgs e)
    {
        String catId = RadioButtonList2.SelectedValue;
        SqlCommand cmdselect = new SqlCommand("SELECT DISTINCT categoryId, linkTablesCategories.tableName, tableDescription FROM linkTablesCategories, tableDescriptions where linkTablesCategories.tableName = tableDescriptions.tableName and categoryId ='" + catId + "'");
        RadioButtonList1.Items.Clear();
        try
        {
            con.Open();
            cmdselect.Connection = con;
            SqlDataReader dar = cmdselect.ExecuteReader();
            if (dar.HasRows)
            {
                while (dar.Read())
                {
                    ListItem li = new ListItem(dar["tableName"].ToString(), dar["categoryId"].ToString());
                    li.Attributes.Add("title", dar["tableDescription"].ToString());
                    RadioButtonList1.Items.Add(li);
                }
            }
            RadioButtonList1.Visible = true;
            SaveToDBButton.Visible = true;
        }
        catch (SqlException ex)
        {
            //lblMessage.Text = ex.Message;
        }

        finally
        {
            cmdselect.Dispose();
            if (con != null)
            {
                con.Close();
            }
        }
    }

    protected void InsertButton_Click(object sender, EventArgs e)
    {
        String tableId="";
        **tableId = RadioButtonList1.SelectedItem.Text;**

        String path = Server.MapPath("~/");
        string filepath = path + Session["filepath"].ToString();
        StreamReader sr = new StreamReader(filepath);
        string line = sr.ReadLine();
        string[] value = line.Split(',');
        DataTable dt = new DataTable();
        DataRow row;
        foreach (string dc in value)
        {
            dt.Columns.Add(new DataColumn(dc));
        }
        while (!sr.EndOfStream)
        {
            value = sr.ReadLine().Split(',');
            if (value.Length == dt.Columns.Count)
            {
                row = dt.NewRow();
                row.ItemArray = value;
                dt.Rows.Add(row);
            }
        }
        SqlBulkCopy bc = new SqlBulkCopy(con.ConnectionString, SqlBulkCopyOptions.TableLock);
        bc.DestinationTableName = tableId;
        bc.BatchSize = dt.Rows.Count;
        con.Open();
        bc.WriteToServer(dt);
        bc.Close();
        con.Close(); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:01:30.383

它是这样的：

```
 ListItem li = new ListItem(dar["tableName"].ToString(), dar["categoryId"].ToString()); 
```

categoryId 是一个常量值，因此也是我的问题。谢谢

# ruby - JRuby 运行一个程序的多个实例

> ID：14365767
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:03:01.563
> 
> 标签：ruby, multithreading, jruby, fork

我正在尝试编写一个负载测试来模拟同时创建数千个 ActiveRecord 对象。

所以基本思想是获取数千个不同 ActiveRecord 对象的 id，并为每个对象创建另一个属于它的对象。

分叉在 JRuby 上效果不佳，所以我不能使用分叉。

我正在考虑使用运行相同 ruby​​ 脚本并传入不同参数的 bash 脚本。

有一个更好的方法吗？

一点sudo代码：

```
for ids in [1,2,3,3,4,4,5,6,6,6...] |id|
  MyMode.find(1).create_some_other_model(1) // happen in the background
end 
```

因此，我几乎不希望应该在单独进程的后台发生的行让整个程序每次都等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:36:37.157

当您使用 JRuby 时，您可以使用线程（JRuby 线程是 Java 线程，它又映射到本机线程）；看[这篇文章](http://ybits.net/2012/03/the-case-for-jruby-part-1-threading/)的例子，也看看[JRuby wiki](https://github.com/jruby/jruby/wiki/Concurrency-in-jruby)。

# php - 使用 const 时解析错误？

> ID：14365769
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:03:21.890
> 
> 标签：php, oop, yii, constants, syntax-error

有人能告诉我如何解决这个错误吗？

> 解析错误：语法错误，第 6 行 /path/folders/etc/domain/protected/controllers/SiteController.php 中出现意外的 '('，期望 ',' 或 ';'

这是第 6 行的内容：

```
const URL = Yii::app()->params['url']; 
```

这可行，但我需要在一个配置文件中定义所有参数，这就是我将其更改为上面代码的原因：

```
const URL = 'http://domain.com/file.php'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:05:09.250

来自[PHP：常量 - 手动](http://php.net/manual/en/language.oop5.constants.php)：

> 该值必须是常量表达式，而不是（例如）变量、属性、数学运算的结果或函数调用。

根据定义，常数是常数。如果您需要给它一个计算值，请改用变量。

# css - 仅 CSS id 或完整路径

> ID：14365770
> 
> 赞同：-2
> 
> 时间：2013-01-16T19:03:24.950
> 
> 标签：css, browser

什么是更好的？只有`#logo`路径还是完整路径`body #header #navigation #logo`？它们中的哪一个更适合浏览器和 CSS 解析器。哪个更快？哪个是最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:05:33.673

ID 是唯一的，因此`#logo`是最有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:05:25.047

如果你的样式`#logo`不依赖于它的路径，你最好不要使用路径，因为没有它你的 CSS 会更加灵活。

# c# - 是否有任何技巧可以解决循环引用问题？

> ID：14365771
> 
> 赞同：5
> 
> 时间：2013-01-16T19:03:30.133
> 
> 标签：c#

我继承了一个没有经过深思熟虑的代码库，并且遇到了一些循环引用问题。我的团队目前没有时间或资源来进行大规模的重构，所以我想知道是否有一些我可以翻转的开关说“以原子方式构建这两个 dll”。

一个简化的例子：

```
DLL D0:
    class A1 -> References B1
    class B1 -> References A1 
```

A1 和 B1 类相互引用，因为它们在同一个 DLL 中，这很好 - 但它们没有太多共同点，所以我想将它们分解成单独的 dll。

但是，由于循环引用问题，以下是不可能的：

```
DLL D1: class A1 -> References D2.B1
DLL D2: class B1 -> References D1.A1 
```

我希望能够告诉 MSBuild 构建 (D1+D2)，就好像所有代码都在一个 dll 中一样。有什么我可以在这里做的，还是我遵循 SOP 并“破解它”？

免责声明：我理解这意味着我的模型存在更大的问题（最明显的是接口使用不当），但在小公司中，现实世界的场景要求我以牺牲最佳实践。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T19:07:08.060

> 我的团队目前没有时间或资源进行大规模重构

所以...不要这样做：

> 但它们没有太多共同点，所以我想将它们分解成单独的 dll。

在您可以对整个解决方案进行重大重构之前，请不要理会它。

在这种情况下，重构组织的烦恼将迫使下游进行大量重构。你有更大的问题要处理。我去过那儿。我对你有感觉。祝你好运朋友。

# python - 在python中循环NxNxN数组并替换所有符合条件的值

> ID：14365773
> 
> 赞同：0
> 
> 时间：2013-01-16T19:03:34.850
> 
> 标签：python, loops

我有一个 nxnxn 矩阵，我想循环并用 1E-35 替换所有 < 1E-35 的值。

```
 for i in range(N):
              for j in range(N):
                  for k in range(N):
                      if data[i][j][k] < 1E-35:
                          data[i][j][k] = 1E-35 
```

似乎不起作用。

编辑：我解决了。这是缩进和不正确的索引 [i][j][k]。

问题仍然存在：这会从 NxNxN 数据的 0 循环到 N-1？当我执行 data.min() 时，我仍然得到值 ~ 1E-101，在循环之后应该是 1E-35。我做错了for循环吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:08:12.287

在我看来，您使用的是 numpy，在这种情况下，您可能需要`np.where`：

```
data = np.where(data < 1e-35,1e-35,data) 
```

或者，您可以使用花哨的索引：

```
data[ data < 1e-35 ] = 1e-35 
```

# java - 在 servlet 中找不到文件，即使通过 context.getRealPath 获取路径？

> ID：14365777
> 
> 赞同：1
> 
> 时间：2013-01-16T19:03:50.780
> 
> 标签：java, gwt, tomcat, servlets, file-io

## 概要

给定以下（删节的）代码，它位于 servlet 的服务器端（Tomcat 是容器）。这是一个 GWT 应用程序，尽管这应该无关紧要（我认为）。

```
ServletContext context = getServletContext();
String dataFilePath= context.getRealPath("/WEB-INF/dir/dataFile.txt");
File dataFile = new File(dataFilePath);

TestCaseGenerator testCaseGenerator = new TestCaseGenerator(dataFile);
testCaseGenerator.generateTestCase(); 
```

`TestCaseGenerator`是项目文件夹中 jar 中的一个类，`war/WEB-INF/lib`已作为外部库添加到 GWT 项目中。

## 问题

当`testCaseGenerator.generateTestCase()`被执行时，它无法用于`dataFile`创建 a `new LineNumberReader(new FileReader(dataFile));`， a`FileNotFoundException`被抛出。

我已经验证了 的`String`值`dataFilePath`是正确的，并且包含我需要读取的服务器上文件的正确真实路径，`dataFile`也不是`null`. 我还验证了`TestCaseGenerator`在此 GWT 应用程序之外从命令行调用时运行良好。

我不确定为什么`TestCaseGenerator`不能使用`File`我传递的对象，考虑到我传递的是文件的真实文件路径。我可以想出一些替代解决方案来解决这个问题，但现在我真的很好奇为什么它无法找到该文件。

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:24:11.073

## 解决了

我愚蠢地忽略了将 包含`dir/dataFile.txt`在我`build.xml`的`war`目标中，因此实际上该文件并未包含在`war`包中，因此从未放置在 Tomcat 容器中。

```
<include name="dir/**" /> 
```

而且我也误解了`context.getRealPath("/WEB-INF/dir/dataFile.txt");`实际回报；。来自[ServletContext javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)

> 获取给定虚拟路径对应的真实路径。例如，如果 path 等于 /index.html，此方法将返回服务器文件系统上的绝对文件路径，http://index.html 形式的请求将映射到该路径，其中对应于此 ServletContext 的上下文路径。

因此，即使`getRealPath`返回路径值，也不一定意味着文件位于该实际路径中。

# assembly - 如何检查地址是否指向汇编中的数据/代码段？

> ID：14365780
> 
> 赞同：1
> 
> 时间：2013-01-16T19:03:57.083
> 
> 标签：assembly, x86-64

我希望能够将作为常量的字符串与驻留在堆上的字符串区分开来。有没有办法只用一个字符串的地址来做到这一点？我正在研究 Linux x86_64。

# python - 如何使用python从多个文件中读取数据

> ID：14365791
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:04:25.847
> 
> 标签：python

我是 python 新手，这可能是一个愚蠢的问题，但它困扰了我好几天。我有大约 30 个日志文件，每个文件都包含字符串和数据。除了几个数据不同外，它们几乎相同，并且它们的名称有规律地排列，如'log10.lammps'、'log20.lammps'等（'10''20'代表模拟的温度）。我想编写一个 python 脚本，它循环所有这些文件并在特定行中读取它们的数据（比如 line3900）。然后我想将这些数据写入另一个数据文件，该文件的排列方式如下：

10 XXX 20 XXX 30 XXX。. .

我可以从单个文件读取和写入，但我无法实现循环。谁能告诉我该怎么做。非常感谢！

PS。还有一个难点是3900行的数据是这样呈现的：“C11是180.1265465616”，我要提取的是180.1265465616。如何在没有字符串的情况下提取数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:15:45.773

```
#assuming files is a list of filenames
for filename in files:
    with open(filename) as f:
        <do stuff with file f> 
```

附言。浮动（line.split（''）[-1]）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:16:40.023

[这个答案](https://stackoverflow.com/questions/3207219/how-to-list-all-files-of-a-directory-in-python)涵盖了如何在 Python 中获取文件夹中的所有文件。总结最佳答案，要将所有文件放在一个文件夹中，您可以这样做：

```
import os
import os.path

def get_files(folder_path):
    return [f for f in os.listdir(folder_path) if os.path.isfile(os.path.join(folder_path, f))] 
```

下一步是从行中提取数字`The C11 is 180.1265465616`。我假设您有一个名为`get_line`给定文件名的函数，它将返回该确切的行。

你可以做三件事之一。如果末尾数字的长度是恒定的，那么您可以抓住字符串中的最后 n 个字符并将其转换为数字。或者，您可以用空格分割字符串并获取最后一项——数字。最后，您可以使用正则表达式。

我将选择第二个选项，因为它现在看起来最简单。

```
def get_numbers():
    numbers = []
    for file in get_files('folder'):
        line = get_line(file)
        components = line.split(' ')
        number = float(components[-1])
        numbers.append(number)
    return numbers 
```

我不确定您想如何将数字写入文件，但希望这些可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:22:30.140

好吧，我可以给你一个提示，我会走哪条路（但可能会有更好的路）：

1.  将目录中的所有文件添加到列表中`os.listdir`
2.  循环每一个并执行以下操作：
    *   使用`re`模块从文件名中提取温度（如果不匹配模式`break`），否则将其添加到列表（`to_write_out`）
    *   阅读正确的行[`linecache`](http://docs.python.org/2/library/linecache.html)
    *   获取值 ( `line.split()[-1]`)
    *   将值附加到列表中`to_write_out`。
3.  将列表加入`to_write_out`到字符串中`join`
4.  将字符串写入文件。

### 帮助使用正则表达式

如果您以前没有使用过正则表达式，它们可能会有点棘手。要从文件名中提取温度（第 2 点下方的第一个项目符号），您可以使用以下内容：

```
for fname in filenames:
    pattern = 'log(\d+)\.lammps'
    match = re.search(pattern, fname)
    if match:
        temp = match.group(1)

        # Append the temperature to the list.

    else:
        break

    # Continue reading the right line etc. 
```

# c# - 在 silverlight 中的准确时间启动调度程序计时器

> ID：14365793
> 
> 赞同：0
> 
> 时间：2013-01-16T19:04:35.453
> 
> 标签：c#, silverlight

我已经研究了如何在 C# 中一般地执行此操作，并且我一直想安排一个任务，但是，我不知道这是否是我需要的。这就是我想出的

```
 void MainPage_Loaded(Object sender, RoutedEventArgs e)
    {
        tomorrowAt8AM = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.AddDays(1).Day, 8, 0, 0);//This is always 'tomorrow' at 8 am.. I think.
        TimeSpan timeSpan = tomorrowAt8AM.Subtract(DateTime.Now);
        timer.Interval = timeSpan; 
        timer.Tick += new EventHandler(timerTick);

        queryDB();
        timer.Start();
    }

private void timerTick(object sender, EventArgs e)
    {
        queryDB();

        //Recalculate the time interval.
        tomorrowAt8AM = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.AddDays(1).Day, 8, 0, 0);//This is always 'tomorrow' at 8 am.. I think.
        TimeSpan newTimerInterval = tomorrowAt8AM.Subtract(DateTime.Now);
        timer.Interval = newTimerInterval; 
    } 
```

这个想法是找出从“现在”到“明天早上 8 点”的时间长度，并将该时间跨度设置为新的计时器间隔。在我的脑海里这行得通..有没有更好的方法来做到这一点？因为我改变了它的间隔，定时器是否需要重新启动？

@Richard Deeming 这是一段代码，用于测试 1 月 31 日的情况。

```
 System.DateTime tomorrowAt8AM = new System.DateTime(DateTime.Now.Year, 2, 1, 8, 0, 0);//This is always the 'next' day at 8 am. 

        while (true)
        {
            DateTime temp = new DateTime(DateTime.Now.Year, 1, 31, DateTime.Now.Hour, DateTime.Now.Minute, DateTime.Now.Second); 
            DateTime now = DateTime.Now;
            System.TimeSpan diff1 = tomorrowAt8AM.Subtract(temp);
            //Console.WriteLine(diff1.Days);
            Console.WriteLine("Days: {3}, Hours: {0}, Minutes: {1}, Seconds: {2}", diff1.Hours, diff1.Minutes, diff1.Seconds, diff1.Days);
            Thread.Sleep(1000); 
        } 
```

当我执行这段代码时，它似乎正确地打勾。你确定月底会有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:35:56.020

“明天早上 8 点”的代码是错误的。考虑一下 1 月 31 日发生的事情：

```
// DateTime.Now == 2013/01/31
// DateTime.Now.AddDays(1) == 2013/02/01
tomorrowAt8AM = new DateTime(2013, 1, 1, ... 
```

您还需要考虑[夏令时](http://en.wikipedia.org/wiki/Daylight_saving_time)会发生什么。当时钟前进时，您的代码将在上午 9 点执行。当他们回去时，它将在早上 7 点执行。为避免这种情况，您应该使用[DateTimeOffset 类型](http://msdn.microsoft.com/en-us/library/system.datetimeoffset%28v=vs.95%29.aspx)：

```
DateTimeOffset tomorrowAt8AM = Date.Today.AddDays(1).AddHours(8);
TimeSpan interval = tomorrowAt8AM.Subtract(DateTimeOffset.Now); 
```

[DispatcherTimer](http://msdn.microsoft.com/en-us/library/ms615945.aspx)将在您更改[Interval 属性](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.interval.aspx)时自动更新计时器；您无需重新启动计时器。

查看 MSDN 上的评论，定时器不能保证在上午 8 点准确触发：

> 定时器不能保证在时间间隔发生时准确执行，但可以保证在时间间隔发生之前不会执行。

您需要测试您的代码以查看计时器是否足以满足您的要求。

# git - Git：说master是最新的，但是在删除分支时它说它不是'

> ID：14365794
> 
> 赞同：3
> 
> 时间：2013-01-16T19:05:01.607
> 
> 标签：git, version-control, github

我为我的 1.0.2 修复创建了一个新分支。完成后，我想将它们合并回我的主人，所以我使用了：

```
git merge 'v1.0.2' 
```

但是，它告诉我它是“已经是最新的”，这很奇怪。我说，好吧，那很好，所以我尝试删除分支：

```
git branch -d 'v1.0.2' 
```

但现在它告诉我`error: The branch 'v1.0.2' is not fully merged.`。

为什么我的更改一开始没有被合并？我是否需要以某种方式强制它们合并？

**编辑：**

的输出`git log --all --oneline --graph --decorate`

```
* a783018 (HEAD, origin/master, master) Updated with 1.0.2 changes
* c208285 Updates
| * 655b0ea (v1.0.2) Submitted 1.0.2 to apple for review
| * 0d4f33d Updates
|/  
| * 02f7155 (origin/v1.1, v1.1) Additional fixes
| * 5a68697 Renaming classes and .m .h files with three letter prefixes to comply with Apple requirements
| * c90a76d Added pin pad as an option
| * 3dc6ceb Adding new security methods to lock app if the user chooses
| * 3bf1c88 Updates
|/  
* 71af916 Bug fixes
* 523672f (tag: v1.0.2) Final fixes before release
* 0269dab Bug fixes and added new methods to specifically layout details screens
* e1e7c08 Bug fixes
* 071c9cc (tag: v1.0.1) Last changes before 1.0.1 submission
* 8d56576 Bug fixes
* 9e86414 Major file restructure for easier git viewing and structure
* 4f14c9e Updated a few methods to no longer use the Utility object
* 1be42ea Moved some properties to the ZSSingleton rather than the Squiz Matrix singleton
* 1450e7d Updated a few code snippets
* 27c3ebb Updated methods for Metadata
* baf8a6c (tag: v1.0) Final fixes, submitted to apple
* d5ffb6c Addtional fixes
* aa7d123 Removed unused files
* a472a1d Removal of old Matrix library. Removal of ASIHTTPRequest!
* b533ac3 Added new attribute types
* 76c29ef Adding UIDatePicker for creating of Calendar assets
* 1fb09dc Added some fixes for ipad
* 0f93c82 Cleaning up of code, adding comments
* 27c7984 Cleaning up of code, adding comments
* d0d29bb Added ignore file
* 7911483 A file was deleted
* fdba63c First add of all files 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:08:26.133

您需要在另一个分支上才能合并它们。所以

```
git checkout master
git merge v1.0.2
git branch -d v1.0.2 
```

看来你的合并失败了。它告诉您它已经是最新的并不好。尝试添加`--allow-empty`到合并中只是为了测试这一点。发出合并命令时，请确保您在 master 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:01:41.217

尝试这个：

```
git checkout master
git merge refs/heads/v1.0.2 
```

您显然同时拥有一个名为 的分支和一个标签`v1.0.2`，而且似乎`git merge v1.0.2`更愿意猜测您想要与标签合并，而不是与分支合并。上面的语法明确表明您想要合并分支。

# visual-studio-2012 - MSDN 文档在本地机器上的位置在哪里

> ID：14365795
> 
> 赞同：2
> 
> 时间：2013-01-16T19:05:02.497
> 
> 标签：visual-studio-2012, msdn

我安装了 VS 2012 并选择了所有选项来安装我认为适用于 MSDN 的文档。但是，我不知道它安装在哪里。我想知道是否有人知道默认位置在哪里或如何找到它。

我假设安装的内容类似于下载的 Java API，并存储在具有某种导航方法的文件夹中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:21:10.900

在 VS 2012 中，本地帮助文档的位置显示在“管理内容”选项卡的右上角。默认本地存储路径为：C:\ProgramData\Microsoft\HelpLibrary2\Catalogs\VisualStudio11\

Help Viewer 2.0（与 VS 2012 一起提供）使您能够将本地商店移动到您选择的位置。单击“管理内容”选项卡中的“移动...”按钮来执行此操作。

在幕后，本地存储路径存储在以下注册表项中：

**密钥位置**：HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\Help\v2.0\Catalogs\VisualStudio11

**键名**：LocationPath

# c# - Models 和 ViewModels 应该如何交互？

> ID：14365796
> 
> 赞同：2
> 
> 时间：2013-01-16T19:05:02.693
> 
> 标签：c#, asp.net-mvc, model, viewmodel

Model 和 ViewModel 之间的交互应该如何？假设我有一个名为 Customer 的类，它具有 Id 和 Email 属性，另一个 CustomerModel 具有相同的属性。

这是场景：

我基于该 CustomerModel 加载了一个视图，该视图有一个表单。提交表单时，将 CustomerModel 传递给 Action，比如说 Save。在 Save 操作中，我应该创建一个 Customer 实例并逐个属性地填充它吗？

下面的例子：

```
ActionResult Save(CustomerModel cm)
{
   //validation goes here

   Customer c = new Customer();
   c.Id = cm.Id;
   c.Email = cm.Email;

   context.Entry<Customer>(c).State = System.Data.EntityState.Modified;
   context.SaveChanges();

   //continue
  } 
```

鉴于我在之前的一篇文章中读到我应该避免将模型类用于数据和视图模型这两个目的，我问：

**这是实现它的正确方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:12:06.413

> Model 和 ViewModel 之间的交互应该如何？

视图模型向视图描述数据。它用于表示逻辑并向视图提供数据。这些模型用于描述来自数据源（如 sql 或文件）的数据。

您的视图模型中的内容示例：

```
public class CustomerViewModel
{
    public long Id { get; set; }
    public bool IsFoundingMember { get { return Id < 1000; } }
    public string Name { get; set; }
    public bool IsABaggins { get { return !string.IsNullOrWhiteSpace(Name) ? Name.EndsWith("Baggins") : false; } }
} 
```

模型中的东西示例

```
public class Customer
{
    public long? Id { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
    public DateTime? DateOfBirth { get; set; }
} 
```

我会尝试将逻辑分组为可维护性的函数。

说：

```
ActionResult Save(CustomerModel cm)
{
   if(!ValidateCustomerModel(cm))
   {
        //Deal with invalid data
   }

   UpdateCustomer(cm);

   //continue
}

public bool ValidateCustomerModel(CustomerModel model)
{
    //Do stuff
    return true;
}

public void UpdateCustomer(CustomerModel model)
{
   Customer c = new Customer();
   c.Id = cm.Id;
   c.Email = cm.Email;

   context.Entry<Customer>(c).State = System.Data.EntityState.Modified;
   context.SaveChanges();
} 
```

在分离出所有 CRUD 逻辑之后，您可以为该逻辑创建一些类，并查看 Unity、Ninject 或普通的旧构造函数注入。

例如构造函数注入

```
public class MyController : Controller
{
    private readonly ICustomerDL _customerDL;
    public MyController(ICustomerDL customerDL)
    {
        _customerDL = customerDL;
    }

    //Load your implementation into the controller through the constructor
    public MyController() : this(new CustomerDL()) {}

    ActionResult Save(CustomerModel cm)
    {
       if(!ValidateCustomerModel(cm))
       {
            //Deal with invalid data
       }

       _customerDL.UpdateCustomer(cm);

       //continue
    }

    public bool ValidateCustomerModel(CustomerModel model)
    {
        //Do stuff
        return true;
    }
}

public interface ICustomerDL
{
    void UpdateCustomer(CustomerModel model);
}

public class CustomerDL : ICustomerDL
{
    public void UpdateCustomer(CustomerModel model)
    {
       Customer c = new Customer();
       c.Id = cm.Id;
       c.Email = cm.Email;

       context.Entry<Customer>(c).State = System.Data.EntityState.Modified;
       context.SaveChanges();
    }
} 
```

好处是您的所有逻辑都将是干净和结构化的，这将使单元测试和代码维护变得轻而易举。

# android - 应用程序在模拟器上意外停止

> ID：14365800
> 
> 赞同：0
> 
> 时间：2013-01-16T19:05:13.620
> 
> 标签：android, android-button

我想设计一个有 4 个按钮的应用程序，每个按钮的值从 1 到 4 和空格按钮。单击按钮时，它会在 textview 中给出一个值。在模拟器上运行时，它会给出错误“应用程序意外停止”。java代码如下：

```
package com.android.tusway;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class TapkeysActivity extends Activity  {
/** Called when the activity is first created. */

private Button b1,b2,b3,b4,bspace;
private String stringDb;
private TextView tv;

private void updateTextField() {
    tv.setText(this.stringDb);

}

@Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        // adjusting key regarding window sizes

        et = (EditText) findViewById(R.id.editText1);

        b1 = (Button) findViewById(R.id.button1);
        b2 = (Button) findViewById(R.id.button2);
        b3 = (Button) findViewById(R.id.button3);
        b4 = (Button) findViewById(R.id.button4);
        bspace = (Button) findViewById(R.id.btspace);

        tv = (TextView) findViewById(R.id.textView1);

        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                stringDb += "1";
                updateTextField();  

            }
        });

        b2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                stringDb += "2";
                updateTextField();  

            }
        });

        b3.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                stringDb += "3";
                updateTextField();  

            }
        });

        b4.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                stringDb += "4";
                updateTextField();  

            }
        });

        bspace.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                stringDb += " ";
                updateTextField();  

            }
        });

}
    } 
```

Main.xml 布局

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 >
 <EditText android:layout_height="wrap_content" android:layout_width="match_parent"     android:id="@+id/editText1">
    <requestFocus></requestFocus>
</EditText>
<TextView  android:id="@+id/textView1" android:layout_width="fill_parent" android:layout_height="wrap_content"></TextView>
<Button android:id="@+id/button1" android:layout_height="wrap_content" android:layout_width="100dp" android:text="1"></Button>
<Button android:text="2" android:id="@+id/button2" android:layout_height="wrap_content" android:layout_width="97dp"></Button>
<Button android:text="3" android:id="@+id/button3" android:layout_height="wrap_content" android:layout_width="96dp"></Button>
<Button android:text="4" android:id="@+id/button4" android:layout_height="wrap_content" android:layout_width="97dp"></Button>
<Button android:id="@+id/btspace" android:layout_height="wrap_content" android:text="Space" android:layout_width="match_parent"></Button>
</LinearLayout> 
```

日志猫：

```
01-17 00:23:50.069: ERROR/AndroidRuntime(1337): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.tusway/com.android.tusway.TapkeysActivity}: java.lang.NullPointerException
01-17 00:23:50.069: ERROR/AndroidRuntime(1337):     at com.android.tusway.TapkeysActivity.onCreate(TapkeysActivity.java:86) 
```

日志猫：

```
01-17 00:12:31.319: DEBUG/PackageManager(54): Scanning package com.android.tusway
01-17 00:12:31.389: INFO/PackageManager(54): /data/app/com.android.tusway-1.apk changed; unpacking
01-17 00:12:31.469: DEBUG/installd(34): DexInv: --- BEGIN '/data/app/com.android.tusway-1.apk' ---
01-17 00:12:32.820: DEBUG/installd(34): DexInv: --- END '/data/app/com.android.tusway-1.apk' (success) ---
01-17 00:12:32.829: DEBUG/PackageManager(54):   Activities: com.android.tusway.TapkeysActivity
01-17 00:12:32.849: INFO/ActivityManager(54): Force stopping package com.android.tusway uid=10043
01-17 00:12:33.639: INFO/installd(34): move /data/dalvik-cache/data@app@com.android.tusway-1.apk@classes.dex -> /data/dalvik-cache/data@app@com.android.tusway-1.apk@classes.dex
01-17 00:12:33.659: DEBUG/PackageManager(54): New package installed in /data/app/com.android.tusway-1.apk
01-17 00:12:49.059: INFO/ActivityManager(54): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.android.tusway/.TapkeysActivity }
01-17 00:12:50.719: INFO/ActivityManager(54): Start proc com.android.tusway for activity com.android.tusway/.TapkeysActivity: pid=1307 uid=10043 gids={}
01-17 00:12:53.663: ERROR/AndroidRuntime(1307): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.tusway/com.android.tusway.TapkeysActivity}: java.lang.NullPointerException
01-17 00:12:53.663: ERROR/AndroidRuntime(1307):     at com.android.tusway.TapkeysActivity.onCreate(TapkeysActivity.java:86)
01-17 00:12:53.769: WARN/ActivityManager(54):   Force finishing activity com.android.tusway/.TapkeysActivity
01-17 00:12:54.629: WARN/ActivityManager(54): Activity pause timeout for HistoryRecord{44f94e30 com.android.tusway/.TapkeysActivity}
01-17 00:13:04.169: INFO/ActivityManager(54): Process com.android.tusway (pid 1307) has died.
01-17 00:13:08.790: WARN/ActivityManager(54): Activity destroy timeout for HistoryRecord{44f94e30 com.android.tusway/.TapkeysActivity}
01-17 00:23:18.783: INFO/PackageManager(54): Removing non-system package:com.android.tusway
01-17 00:23:18.791: INFO/ActivityManager(54): Force stopping package com.android.tusway uid=10043
01-17 00:23:20.010: DEBUG/PackageManager(54): Scanning package com.android.tusway
01-17 00:23:20.060: INFO/PackageManager(54): Package com.android.tusway codePath changed from /data/app/com.android.tusway-1.apk to /data/app/com.android.tusway-2.apk; Retaining data and using new
01-17 00:23:20.118: INFO/PackageManager(54): /data/app/com.android.tusway-2.apk changed; unpacking
01-17 00:23:20.200: DEBUG/installd(34): DexInv: --- BEGIN '/data/app/com.android.tusway-2.apk' ---
01-17 00:23:21.969: DEBUG/installd(34): DexInv: --- END '/data/app/com.android.tusway-2.apk' (success) ---
01-17 00:23:22.000: INFO/ActivityManager(54): Force stopping package com.android.tusway uid=10043
01-17 00:23:22.009: WARN/PackageManager(54): Code path for pkg : com.android.tusway changing from /data/app/com.android.tusway-1.apk to /data/app/com.android.tusway-2.apk
01-17 00:23:22.119: WARN/PackageManager(54): Resource path for pkg : com.android.tusway changing from /data/app/com.android.tusway-1.apk to /data/app/com.android.tusway-2.apk
01-17 00:23:22.199: DEBUG/PackageManager(54):   Activities: com.android.tusway.TapkeysActivity
01-17 00:23:23.219: INFO/installd(34): move /data/dalvik-cache/data@app@com.android.tusway-2.apk@classes.dex -> /data/dalvik-cache/data@app@com.android.tusway-2.apk@classes.dex
01-17 00:23:23.219: DEBUG/PackageManager(54): New package installed in /data/app/com.android.tusway-2.apk
01-17 00:23:23.219: INFO/ActivityManager(54): Force stopping package com.android.tusway uid=10043
01-17 00:23:29.479: INFO/installd(34): unlink /data/dalvik-cache/data@app@com.android.tusway-1.apk@classes.dex
01-17 00:23:44.229: INFO/ActivityManager(54): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.android.tusway/.TapkeysActivity }
01-17 00:23:46.030: INFO/ActivityManager(54): Start proc com.android.tusway for activity com.android.tusway/.TapkeysActivity: pid=1337 uid=10043 gids={}
01-17 00:23:50.069: ERROR/AndroidRuntime(1337): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.tusway/com.android.tusway.TapkeysActivity}: java.lang.NullPointerException
01-17 00:23:50.069: ERROR/AndroidRuntime(1337):     at com.android.tusway.TapkeysActivity.onCreate(TapkeysActivity.java:86)
01-17 00:23:50.179: WARN/ActivityManager(54):   Force finishing activity com.android.tusway/.TapkeysActivity
01-17 00:23:51.263: WARN/ActivityManager(54): Activity pause timeout for HistoryRecord{44fc8bf8 com.android.tusway/.TapkeysActivity}
01-17 00:24:06.806: WARN/ActivityManager(54): Activity destroy timeout for HistoryRecord{44fc8bf8 com.android.tusway/.TapkeysActivity}
01-17 00:28:52.774: INFO/ActivityManager(54): Process com.android.tusway (pid 1337) has died. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:29:19.607

你没有启动你的stringDB，你可以把它放在0

# jquery - 将 CSS 类动态分配给网站菜单栏 struts2

> ID：14365802
> 
> 赞同：0
> 
> 时间：2013-01-16T19:05:16.753
> 
> 标签：jquery, css, struts2

我想将 CSS 类动态分配给我的网站菜单栏

Header.jsp 文件

```
 <div class='menuArea'>
         <ul>

            <li class="current"><s:a action="listUsers">Users</s:a></li>
            <li><s:a action="listCustomers">Customers</s:a></li>
            <li><s:a action="searchItems">Items</s:a></li>

        </ul>
    </div> 
```

“current”类应用于第一个 li 元素并且是静态的，但我希望它是动态的，具体取决于所选的页面。

`<s:include value="header.jsp"/>`用于在其他 JSP 中包含标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:49:12.467

如何使用`<s:include>`标签传递参数。

```
<s:include value="header.jsp">
  <s:param name="currentmenu" value="'page_id'" />
</s:include> 
```

然后在您的`header.jsp`检索参数中使用`${param.your_param_name}`符号并将其设置为某个变量，您可以在标签内部使用该`<s:if>`变量将类设置为元素。

```
<s:set name="curr">
  ${param.currentmenu}
</s:set>

<ul>
  <li <s:if test="#curr == 'first_page_id'">class="current"</s:if> >
    <s:a action="listUsers">Users</s:a>
  </li>
  <li <s:if test="#curr == 'second_page_id'">class="current"</s:if> >
    <s:a action="listCustomers">Customers</s:a>
  </li>
  <li <s:if test="#curr == 'third_page_id'">class="current"</s:if> >
    <s:a action="searchItems">Items</s:a>
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:22:00.357

在你的 header.jsp 中，在 javascript 中设置一个默认变量：

```
<script>var currPage = "Users";</script> 
```

然后，在主页中，最好在底部，覆盖：

```
<script>currPage = "Customers";</script> 
```

然后，在您的页脚中，添加一些 jquery：

```
 $("ul.menuArea > li").each(function(i, v){
     var $obj = $(this);
     if(currPage === $obj.find("a:first").text()){
      $obj.addClass("current");
      return false;
     }
    }); 
```

小提琴：http: [//jsfiddle.net/kydun/](http://jsfiddle.net/kydun/)

# android - Pushwoosh / Phonegap，在 Android 上使用推送通知无声音、振动和唤醒锁定

> ID：14365810
> 
> 赞同：0
> 
> 时间：2013-01-16T19:05:40.107
> 
> 标签：android, cordova, push-notification

我已经集成了 pushwoosh sdk 以使用 PhoneGap 在 Android 上发送 GCM 推送通知。我可以在我的设备上接收通知，但没有声音、没有振动、唤醒锁定和没有 LED。

在这里你可以找到我对我的 AndroidManifest.xml 的权限

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:windowSoftInputMode="adjustPan"
  package="MY_PACKAGE_NAME" android:versionName="1.1" android:versionCode="5" android:hardwareAccelerated="true">
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="false"
    android:resizeable="true"
    android:anyDensity="true"
    />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.RECORD_VIDEO"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />   
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>

<permission
     android:name="MY_PACKAGE_NAME.permission.C2D_MESSAGE"
     android:protectionLevel="signature"/>
<uses-permission
     android:name="MY_PACKAGE_NAME.permission.C2D_MESSAGE"/>
<uses-permission
     android:name="com.google.android.c2dm.permission.RECEIVE"/>

<application android:icon="@drawable/icon" android:label="@string/app_name"
    android:debuggable="true">
    <activity android:name="MyApp" android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale" android:screenOrientation="portrait" android:launchMode="singleTop">
        <intent-filter>
            <action android:name="MY_PACKAGE_NAME.MESSAGE"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="com.arellomobile.android.push.PushWebview"/>
    <activity android:name="com.arellomobile.android.push.MessageActivity"/>
    <activity android:name="com.arellomobile.android.push.PushHandlerActivity"/>

    <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE"/>
            <action android:name="com.google.android.c2dm.intent.REGISTRATION"/>
            <category android:name="MY_PACKAGE_NAME"/>
        </intent-filter>
    </receiver>
    <service android:name="com.arellomobile.android.push.PushGCMIntentService"/>

</application>

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/></manifest> 
```

这是我的初始化函数：

```
function initPushwoosh() {
var pushNotification = window.plugins.pushNotification;
pushNotification.onDeviceReady();

//projectid: "GOOGLE_PROJECT_ID", appid : "PUSHWOOSH_APP_ID"
pushNotification.registerDevice({ projectid: "MY_PROJECT_ID", appid : "MY_PUSHWOOSH_APP_ID" },
                                function(status) {
                                    var pushToken = status;
                                    console.warn('push token: ' + pushToken);
                                },
                                function(status) {
                                    console.warn(JSON.stringify(['failed to register ', status]));
                                });

document.addEventListener('push-notification', function(event) {
                            var title = event.notification.title;
                            var userData = event.notification.userdata;

                            if(typeof(userData) != "undefined") {
                                console.warn('user data: ' + JSON.stringify(userData));
                            }

                            navigator.notification.alert(title);
                            pushNotification.stopGeoPushes();
                          });} 
```

相反，您可以在这里找到 pushwoosh 的示例（我遵循的）：[pushwoosh example](https://github.com/shaders/phonegap-cordova-push-notifications/tree/master/Android)

我哪里错了？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:00:55.110

你必须做一些Java来实现这一点。

转到Android项目，找到`PushNotifications`类，位于`/src/com/pushwoosh/plugin/pushnotifications/`并寻找这一行：

```
mPushManager = new PushManager(cordova.getActivity(), 
    params.getString("appid"), params.getString("projectid")); 
```

然后添加以下行：

```
mPushManager.setVibrateNotificationType(VibrateType.ALWAYS);
mPushManager.setSoundNotificationType(SoundType.ALWAYS); 
```

**编辑：**或者您可以在通知本身中发送声音：

```
"android_sound" : "soundfile", // Optional. Sound file name in the "res/raw" folder, do not include the extension 
```

见：[[1]](http://www.pushwoosh.com/programming-push-notification/pushwoosh-push-notification-remote-api/#PushserviceAPI-Method%2Fmessages%2Fcreate)

# android - Android ProgressDialog，线程第一次不显示

> ID：14365818
> 
> 赞同：0
> 
> 时间：2013-01-16T19:05:59.047
> 
> 标签：android, progressdialog

嗨，我的 ListView 上的线程有一些问题。当我第一次运行活动时，线程不起作用，但如果我返回并再次运行该活动，一切正常。

那是我的代码：

```
protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        getListView().setOnItemClickListener(listlistener);
        // Find the ListView resource.   
        raid_list = new ArrayList<RaidWpis>();
        this.m_adapter = new OrderAdapter(this, R.layout.row, raid_list);
        setListAdapter(this.m_adapter);

        viewOrders = new Runnable(){
            @Override
            public void run() {
                getOrders();
            }
        };
        Thread thread =  new Thread(null, viewOrders, "raid");
        thread.start();
        m_ProgressDialog = ProgressDialog.show(Raidy_lista.this,"Prosze czekac...", "Pobieram dane ...", true);

        //ładowanie raidów z serwera
        tv  = (TextView)findViewById(R.id.tresc_gry);
        text    = "brak odpowiedzi";
        tv.setText("wysyłam plik");

        /*
        try {
            postData();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        */

    }

private void getOrders() {

        tv  = (TextView)findViewById(R.id.tresc_gry);
            try{
                raid_list = new ArrayList<RaidWpis>();

                // Create a new HttpClient and Post Header

                SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
                if (sharedPrefs.getString("ustawienia_wybrana_gra","1").equals("1"))
                {
                    user_login=sharedPrefs.getString("ustawienia_gra_1_login","1");
                    user_haslo=sharedPrefs.getString("ustawienia_gra_1_haslo","1");
                    user_adres=getString(R.string.ustawienia_gra_1_adres);
                }
                else
                {
                    user_login=sharedPrefs.getString("ustawienia_gra_2_login","1");
                    user_haslo=sharedPrefs.getString("ustawienia_gra_2_haslo","1");
                    user_adres=getString(R.string.ustawienia_gra_2_adres);
                }
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(user_adres+"/raidplanner_android.php");
                JSONObject json = new JSONObject();
                //tv.append("\nŁącza z serwerem");
                try {
                    // JSON data:
                    tv.append("\nWysyłam dane");
                    tv.append("\nStrona:" + user_adres);
                    tv.append("\nLogin:" + user_login);
                    tv.append("\nHasło:" + user_haslo);
                    json.put("metoda", "pokaz_raidplanner");
                    json.put("login", user_login);
                    json.put("haslo", user_haslo);
                    json.put("strona", user_adres);

                    JSONArray postjson=new JSONArray();
                    postjson.put(json);

                    // Post the data:
                    httppost.setHeader("json",json.toString());
                    httppost.getParams().setParameter("jsonpost",postjson);

                    // Execute HTTP Post Request
                    //System.out.print(json);
                    //httppost.setEntity(new UrlEncodedFormEntity(json));
                    HttpResponse response = httpclient.execute(httppost);
                    tv.append("\nOdbieram dane");
                    // for JSON:
                    if(response != null)
                    {
                        tv.append("\nDane odebrane\n\n");
                        InputStream is = response.getEntity().getContent();

                        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                        StringBuilder sb = new StringBuilder();

                        String line = null;
                        try {
                            while ((line = reader.readLine()) != null) {
                                sb.append(line + "\n");
                            }
                        } catch (IOException e) {
                            e.printStackTrace();
                            tv.append("\nBłąd IO");
                        } finally {
                            try {
                                is.close();
                            } catch (IOException e) {
                                e.printStackTrace();
                            }
                        }
                        text = sb.toString();
                    }
                    //tv.append(text);
                    JSONObject entireJson = new JSONObject(text);
                    //String odpowiedz = entireJson.getString("odpowiedz");
                    JSONObject raidyObject = entireJson.getJSONObject("raidy");
                    JSONArray raidyIds= raidyObject.getJSONArray("id");
                    JSONArray raidyNazwy= raidyObject.getJSONArray("nazwa");
                    //tv.append("\nArray zrobiony");

                    for (int i = 0; i < raidyNazwy.length(); i++)
                    {

                        raid_list.add(new RaidWpis(raidyIds.getString(i), raidyNazwy.getString(i)));
                        //listAdapter.add(raidyNazwy.getString(i) );
                    }
                    //tv.append("\n"+odpowiedz);
                }
                catch (ClientProtocolException e) 
                {
                    // TODO Auto-generated catch block
                    tv.append("\nBłąd protocol");
                } 
                catch (IOException e) 
                {
                    // TODO Auto-generated catch block
                    tv.append("\nBłąd IO 2");
                }

                // RaidWpis o1 = new RaidWpis("1","aaa");
                 // o1.setOrderName("SF services");
                 // o1.setOrderStatus("Pending");
                // RaidWpis o2 = new RaidWpis("2","bbb");
                  //o2.setOrderName("SF Advertisement");
                  //o2.setOrderStatus("Completed");
                 // raid_list.add(o1);
                 // raid_list.add(o2);
                  Thread.sleep(4000);
                //  Toast.makeText(getBaseContext(),  "dziala", Toast.LENGTH_LONG).show();
                } catch (Exception e) {
                    //Toast.makeText(getBaseContext(), "błąd", Toast.LENGTH_LONG).show();
                    Log.d("BACKGROUND_PROC", e.getMessage());
                }
                runOnUiThread(returnRes);
            } 
```

我注意到它`Log.d("BACKGROUND_PROC", e.getMessage());`显示在 logcat

```
01-16 18:51:17.703: D/BACKGROUND_PROC(4175): Only the original thread that created a view hierarchy can touch its views. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:11:46.163

这个错误的主要原因是

在您的情况下，您正在尝试`UI components`从方法内部的后台线程访问 (View) `Thread`。你不能这样做。[不允许这样做](http://android-developers.blogspot.com/2009/05/painless-threading.html)。

**编辑 ：**

您必须将更新 ui 的后台任务部分移动到主线程上。为此有一段简单的代码：

```
runOnUiThread(new Runnable() {
     public void run() {

//stuff that updates ui

    }
}); 
```

只需将其嵌套在后台运行的方法中，然后将实现任何更新的代码复制粘贴到块的中间。

# asp.net - 我们如何在 datalist 中找到 div

> ID：14365819
> 
> 赞同：0
> 
> 时间：2013-01-16T19:05:59.717
> 
> 标签：asp.net

在我的数据列表中，我有一个 (div)，它的 id 是 divpost，它的可见性是错误的。现在我喜欢在 datalist_databound 中找到它，如果条件正常，可见性将是真实的。

所以我使用了下面的代码，但我不知道我必须如何找到（divpost）。

根据以下代码查找标签或其他控件我没有问题，但对于 div 我不知道如何？

```
 protected void DataList1_ItemDataBound
 (object sender, DataListItemEventArgs e)
{

  var x = (Guid)(DataList1.DataKeys[e.Item.ItemIndex]);
    Label labelstatus = (Label)e.Item.FindControl("lblstatus");
    Label labelcomment = (Label)e.Item.FindControl("lblcomment");
    BindLable(labelstatus,labelcomment, x);

    var q3 = (from s in _DataContext.tblSends

              where (s.DraftId == _Draftid) 

              select s.ToEmailId ).Distinct();

    if ((Guid)q3.SingleOrDefault() == (Guid)Membership.GetUser().ProviderUserKey)
    {
        divpostcomment.visible = true;
    } 
```

aspx 标记如下所示：

```
<asp:DataList ID="DataList1" runat="server" DataKeyField="userid" 
    OnItemDataBound="DataList1_ItemDataBound" 
    >
    <SeparatorStyle BorderStyle="Dotted" />
    <ItemTemplate>
        <table class="style2">
            <tr>
                <td>

                   <asp:Label ID="Label5" runat="server" Text='<%# "comments from "+Eval("username") %>'></asp:Label>
                    <asp:Label ID="lblStatus" runat="server" Text=""></asp:Label>
                    <br />

                    <asp:Label ID="lblComment" runat="server" Text=""></asp:Label>

                    <div id="divPostComment" runat="server" visible="false">

                        <asp:TextBox ID="txtComment" runat="server"></asp:TextBox>
                        <asp:FileUpload ID="FileUpload1" runat="server" />
                        <asp:Button ID="btnUpload" runat="server" Text="Upload" />
                        <asp:Button ID="pstComment" runat="server" Text="Post Comment" />

                    </div>
                </td>
            </tr>
            <tr>
                <td>

                </td>
            </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:15:02.727

尝试这样的事情：

```
Control theDiv = e.Item.FindControl("divPostComment");
if (theDiv != null) theDiv.Visible = true; 
```

# ruby-on-rails - 使用 rails 3 将用户重定向到特定页面

> ID：14365827
> 
> 赞同：0
> 
> 时间：2013-01-16T19:06:17.263
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

`if seller_disabled_paypal_permissions != nil`我使用设计，我需要将用户重定向到我的特定页面`application_controller.rb`

我的 application_controller.rb 上有这段代码

```
class ApplicationController < ActionController::Base
 before_filter :bad_sellers
 #more code
 .
 .
 .
 private
   def bad_sellers
    if user_signed_in?
     redirect_to requirements_to_sell_user_path, :alert => t('.error') if current_user.seller_disabled_paypal_permissions != nil
     return false
    end
   end
end 
```

但我得到错误：

**错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。**

**我该怎么做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:19:56.197

```
private
   def bad_sellers
    if user_signed_in? && !(current_user.seller_disabled_paypal_permissions.nil?)
     redirect_to root_path, :alert => t('.error')
    end
   end 
```

我从来没有明确地从 a 返回任何值，`before_fiter`所以这是我的第一个猜测。

您的问题是您已经创建了此行为`ApplicationController`，我打赌您的根路径也是一个继承自的控制器，`ApplicationController`因此它将您置于无限重定向循环中。

你需要类似的东西：

```
before_filter :bad_sellers, :except => [:whatever_your_root_path_action_is] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:23:06.770

当您有条件重定向时，您会希望使用`return`这样 rails 就看不到任何其他重定向（不知道如何把它比这更好）。

根据您的示例：

```
def bad_sellers
  if user_signed_in?
    if !current_user.seller_disabled_paypal_permissions.nil?
      return redirect_to root_path, :alert => t('.error')
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:57:09.517

看起来它可能是递归的。root_path 是否也在过滤器之前调用它？在这种情况下，您会想找到一种不调用它的方法。调查`skip_before_filter`

此外，您不需要“返回 false”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:09:29.110

问题的修复：

在`applicatio_controller.rb`

```
class ApplicationController < ActionController::Base
 protect_from_forgery
 before_filter :bad_sellers
 #code here
 #code here
 def bad_sellers
  if user_signed_in? && !(current_user.seller_disabled_paypal_permissions.nil?)
   redirect_to requirements_to_sell_user_path(current_user), :alert => t('.error')
  end
 end
end 
```

On `users_controllers.rb`(`users_controllers`是 的子级`application_controller`)

```
class UsersController < ApplicationController
 skip_before_filter :bad_sellers, :only => [:requirements_to_sell] #parent filter on application_controller.rb

 def requirements_to_sell
  #more code
  #more code
 end

end 
```

# c# - 如何在 C# 中搜索对象列表？

> ID：14365828
> 
> 赞同：1
> 
> 时间：2013-01-16T19:06:17.520
> 
> 标签：c#, linq, collections

我仍在学习 C#，并正在尝试构建一个 NIC 列表，以后可以在我的代码中引用这些列表来执行 misc。功能。无论如何，我可以很好地填充列表，但现在的问题是我不确定在列表中搜索具有特定条件的 NIC 对象的最佳方法。我可以让 foreach 循环工作，但我不确定这是否是最好的方法。我已经搜索了这个主题，并找到了一堆关于如何使用 LINQ 或使用 Lambda 进行高级搜索的材料，但对于初学者来说，这些工作并没有任何好的信息。

这是我创建对象和列表的代码以及我想要完成的伪代码：

```
//Constructs a NIC structure and a list to store NICs (my actual code)
struct NIC
{
    public string nicName;
    public string nicIp;
    public string nicGateway;
    public string nicMask;
}
List<NIC> nicList = new List<NIC>();

//Example searches in semi pseudocode
if nicList contains any NIC where anyNIC.nicIp first three chars .Contains("169")
{
//Do something
}

if nicList contains any NIC where anyNIC.nicIP != null 
{
//Do something
} 
```

-谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:08:01.750

LINQ 即将成为您最好的朋友。在这种情况下，我会使用该[`Enumerable.Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)方法。`Enumerable.Any`是一个扩展方法`IEnumerable<T>`，所以你可以直接在你的`nicList`. 您向它传递一个函数，该函数接受一个实例`NIC`并返回`true`or `false`。

这是在您的特定情况下的样子：

```
if (nicList.Any(x => x.nicIp.StartsWith("169"))
{
   // Do something
}

if (nicList.Any(x => !string.IsNullOrEmpty(x.nicIP))
{
   // Do something
} 
```

在这种情况下，如果您有一个或多个满足您的条件的元素，则只`Enumerable.Any`返回。`true`如果要访问满足条件的元素，请使用 LINQ 方法[`Enumerable.Where`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)。签名是相同的，但不是 a `bool`，而是返回一个`IEnumerable<T>`。

例子：

```
var nicsWithIp = nicList.Where(x => !string.IsNullOrEmpty(x.nicIP); 
```

有关更多信息，请查看此 MSDN 页面：“ [C# 中的 LINQ 入门](http://msdn.microsoft.com/en-us/library/vstudio/bb397933.aspx)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:08:44.803

使用 LINQ：

```
var nics = nicList.Where(n => n.nicIp.Substring(0, 3) == "169").ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:31:44.340

您有几种方法可以使用 LINQ 框架来解决这个问题。

您可以使用**内联查询**语法：

```
// Get all NICs with 169.x.x.x IP address
var nic169 = from nic in nicList
              where nic.nicIp != null && nic.nicIp.StartsWith("169")
              select nic;

var contains169Ip = nic169.Count() > 0;

// Get all NICs with non-null, non-empty IP address    
var validIpNics = from nic in nicList
                   where !string.IsNullOrWhiteSpace(nic.nicIp)
                   select nic; 
```

或者，您可以将**lambda 语法**与 LINQ 方法一起使用：

```
// Do we have a 169.x.x.x NIC present?
var has169 = nicList.Any(nic => nic.nicIp != null && nic.nicIp.StartWith("169"));

// First NIC with a non-null, non-empty IP address
var firstNic = nicList.First(nic => !string.IsNullOrWhiteSpace(nic.nicIp)); 
```

为了更好地解释**lambda**表达式，请`delegate`采用`Func<string,bool>`. 这意味着“*一种接受字符串并**返回**布尔值*的方法”。该方法在`.Any()`方法中用作选择器来确定是否**有任何**对象匹配。

`var func = (text) => { return !string.IsNullOrWhiteSpace(text); }`

直接等价于：

`bool OurLambdaFunc(string text) { return !string.IsNullOrWhiteSpace(text); }`

该`.Any<T>(Func<T,bool> selector)`方法扩展为如下内容：

```
public bool Any<T>(IEnumerable<T> collection, Func<T, bool> selector)
{
  foreach(var value in collection)
    if(selector(value))
      return true;  // Something matched the selector method's criteria.

  // Nothing matched our selector method's criteria.
  return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T19:09:15.773

怎么样：

```
if(nicList.Where(n => n.nicIp.Substring(0, 3) == "169").Any())
{

} 
```

和

```
if(nicList.Where(n => n.nicIp != null).Any())
{

} 
```

明智的做法是在第一个检查中添加一个空检查，以防止出现 NullReferenceException：

```
if(nicList.Where(n => n.nicIp != null && n.nicIp.Substring(0, 3) == "169").Any())
{

} 
```

# php - 从未见过的加密源代码

> ID：14365831
> 
> 赞同：-4
> 
> 时间：2013-01-16T19:06:31.513
> 
> 标签：php, encryption

再会！前几天，我的一个客户给我发了一份来自其他人的源代码，以我从未遇到过的方式加密。我们谁也不明白为什么..

```
\x3c\x21DOCT\x59\x50\x45\x20\x68\x74\x6d\x6c\x20PUB\x4c\x49C 
\x22\x2d\x2f\x2fW\x33\x43\x2f/\x44\x54\x44\x20\x58HTM\x4c\ 
```

这只是其中的一小部分，而且还在继续。从我设法拼凑的字符中，我可以看到它是 php 并且......就是这样......谁能告诉我这是什么类型的加密？提及：我在谷歌上搜索了模型，但没有找到我的问题的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T19:09:14.813

这些只是 UTF-8 字符代码。你可以很容易地解析出来：

```
echo htmlentities("\x3c\x21DOCT\x59\x50\x45\x20\x68\x74\x6d\x6c\x20PUB\x4c\x49C\x22\x2d\x2f\x2fW\x33\x43\x2f/\x44\x54\x44\x20\x58HTM\x4c", ENT_QUOTES | ENT_IGNORE, "UTF-8"); 
```

输出：`<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML`

# wcf - NetMsmqBinding 可以与多播一起使用吗？

> ID：14365832
> 
> 赞同：1
> 
> 时间：2013-01-16T19:06:34.463
> 
> 标签：wcf, msmq, netmsmqbinding, msmqintegrationbinding

我正在尝试组合一个多播 MSMQ 示例。我找到的使用 PGM 进行多播的所有示例都具有集成绑定。我宁愿不必修改我的所有合同来使用 MsmqMessage，而且我担心我将无法为消息附加安全性。有什么我忽略了，还是我把自己画在一个角落里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T15:05:32.257

您可以一次从您的处理程序打开多个实例，每个实例将同时处理来自队列的不同消息。

# c - 将参数反转为可变参数宏

> ID：14365837
> 
> 赞同：3
> 
> 时间：2013-01-16T19:06:49.967
> 
> 标签：c, c-preprocessor, c99, variadic-macros

如何将参数反转为可变参数宏？例如，我想

```
#define REVERSE(...) ???

REVERSE(A,B,C) // expands to C,B,A 
```

我的目标是将前后参数分开：

```
#define APPLY(FUN,...) FUN(__VA_ARGS__)

#define FRONT(FIRST,...) FIRST
#define REST(FIRST,...) __VA_ARGS__
#define MOST(...) APPLY(REVERSE,APPLY(REST,REVERSE(__VA_ARGS__)))
#define BACK(...) APPLY(FRONT,REVERSE_ARGUMENTS(__VA_ARGS__))

FRONT(A,B,C) // expands to A
REST(A,B,C) // expands to B,C
MOST(A,B,C) // expands to A,B
BACK(A,B,C) // expands to C 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:13:00.327

[Boost 预处理器库](http://www.boost.org/libs/preprocessor)可以反转宏参数。不幸的是，它只能达到实现定义的最大参数列表长度。据我所知，不可能编写一个反转任意长参数列表的宏。

```
#include <boost/preprocessor.hpp>

#define REVERSE(...) BOOST_PP_SEQ_ENUM(BOOST_PP_SEQ_REVERSE(BOOST_PP_VARIADIC_TO_SEQ(__VA_ARGS__)))

#define APPLY(FUN,...) FUN(__VA_ARGS__)

#define FRONT(FIRST,...) FIRST
#define BACK(...) APPLY(FRONT,REVERSE(__VA_ARGS__))
#define REST(FIRST,...) __VA_ARGS__
#define MOST(...) APPLY(REVERSE,APPLY(REST,REVERSE(__VA_ARGS__))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-16T12:49:51.397

这是一个不使用任何外部库的答案。

没有办法在宏中反转任意长度的列表，因为编译器只通过代码，所以循环和递归实际上是不可能的。此代码适用于长度不超过 10 的列表。它可以扩展为更长的列表。

```
#define EXPAND(x) x

#define REVERSE_1(a) a
#define REVERSE_2(a,b) b,a
#define REVERSE_3(a,...) EXPAND(REVERSE_2(__VA_ARGS__)),a
#define REVERSE_4(a,...) EXPAND(REVERSE_3(__VA_ARGS__)),a
#define REVERSE_5(a,...) EXPAND(REVERSE_4(__VA_ARGS__)),a
#define REVERSE_6(a,...) EXPAND(REVERSE_5(__VA_ARGS__)),a
#define REVERSE_7(a,...) EXPAND(REVERSE_6(__VA_ARGS__)),a
#define REVERSE_8(a,...) EXPAND(REVERSE_7(__VA_ARGS__)),a
#define REVERSE_9(a,...) EXPAND(REVERSE_8(__VA_ARGS__)),a
#define REVERSE_10(a,...) EXPAND(REVERSE_9(__VA_ARGS__)),a
#define REVERSE1(N,...) EXPAND(REVERSE_ ## N(__VA_ARGS__))
#define REVERSE(N, ...) REVERSE1(N, __VA_ARGS__) 
```

REVERSE 获取 va args 列表和 args 列表的长度并返回其反向。

要获取列表的长度，请使用此

```
#define _GET_NTH_ARG(_1, _2, _3, _4, _5, _6, _7, _9, _10, N, ...) N
#define NUM_ARGS(...) EXPAND(_GET_NTH_ARG(__VA_ARGS__,9,8,7,6,5,4,3,2,1,0)) 
```

我将它与需要使用 EXPAND 的 msvc2015 一起使用。如果您使用的是 gcc/g++，它应该可以在没有 EXPAND 的情况下工作。

# php - JSON 对象的正确标签语法

> ID：14365840
> 
> 赞同：2
> 
> 时间：2013-01-16T19:07:00.373
> 
> 标签：php, javascript, json, portability, jslint

似乎在 JSON 的标签上有不同的标准，有些人想要 JSON 对象标签周围的引号，有些人不想要。谁能告诉我*标准*是什么？

## 行情是坏阵营

**铬合金**

`{"label":1111}`-*语法错误：意外的令牌：*

`{label:1111}`-*作品*

**火狐**

`{"label":1111}`-*语法错误：标签无效*

`{label:1111}`-*作品*

## 行情是好阵营

**JSLint**

`{"video_id":1111}`- *JSON：很好。*

`{video_id:1111}`- *JSON：不好。需要一个字符串，而是看到*“video_id”

**PHP**

```
echo json_encode(array('label' => 1111));
{"label":1111} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T19:08:24.410

标准是将 JSON 解析为 JSON。

JSON 语言（与 Javascript 不同）总是要求所有属性名称都用双引号括起来。

您的语法错误来自尝试将 JSON 解析为 Javascript*语句*。被`{}`解析为语句块，`label:`被解析为 GOTO 目标。
由于语句标签不能有引号，这会导致语法错误。

如果将 JSON 文字包装在括号中以强制 Javascript 将它们解析为表达式，则不会出现该错误。

# twitter-bootstrap - 如何将引导图标与按钮中的文本对齐？

> ID：14365841
> 
> 赞同：6
> 
> 时间：2013-01-16T19:07:00.713
> 
> 标签：twitter-bootstrap

如何将引导图标和图像与底部对齐？（我正在为图标使用 font-awsome ）。

JSBIN：http: [//jsbin.com/uwupuz/2/edit](http://jsbin.com/uwupuz/2/edit)

![在此处输入图像描述](../Images/1c177aef41b12730cf6feff5e58865be.png)

```
<div class="btn-group"> 
    <a class="btn" href="#">
      <i class="icon-plus"></i>
      <span>Add</span>
    </a>
    <a class="btn" href="#">
        <i class="icon-trash"></i>
        <span>Remove</span>
    </a>
    <a class="btn" href="#">
      <i class="icon-edit"></i>
      <span>Edit</span>
    </a>
  </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:23:38.980

试试这个： http: [//jsfiddle.net/jonschlinkert/CBss2/1/](http://jsfiddle.net/jonschlinkert/CBss2/1/) 这是申请后的样子`line-height: 1;`

![按钮屏幕帽](../Images/03b9391353a711e6ecf6ae5c754d8fe5.png)

我不会`position`像@hajpoj 建议的那样弄乱该属性，有更清洁的方法可以解决以后不会产生级联影响的问题。使用的另一个问题`position: relative`是每个图标的大小实际上都有点不同。您想通过考虑这一点来尝试减少维护。对于大多数正常大小的图标，最好让它*看起来*好像是底部对齐的，并且当使用大于平均大小的图标时，它会与文本正确居中。使用`position: relative`较大的图标将推到其他图标之上并看起来偏离中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:20:24.430

您可以使用相对位置。

```
i {
    position: relative;
    bottom: 1px; // or however much you want to offset it by
} 
```

[http://jsfiddle.net/hajpoj/ZdPGe/](http://jsfiddle.net/hajpoj/ZdPGe/)

# android - 如何使用扩展 baseadapter 的自定义适配器实现 getfilter()

> ID：14365847
> 
> 赞同：16
> 
> 时间：2013-01-16T19:07:12.537
> 
> 标签：android, listview

这是我的主要活动

```
package com.javacodegeeks.android.lbs;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.Toast;
import lbs.promotion.*;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.AdapterView.OnItemClickListener;

public class Curve extends Activity {

    private ProgressDialog pDialog;
     JSONParser jParser = new JSONParser();
     ArrayList<HashMap<String, String>> DaftarPromotion = new ArrayList<HashMap<String, String>>();

     private static String url_daftar_promotion = "http://10.0.2.2/webserver_maaug/promotion/daftar_promotion.php";

     String lon = "101.5178";
     String lat = "3.0724";

     public static final String TAG_SUCCESS = "success";
     public static final String TAG_DAFTAR_PROMOTION = "daftar_promotion";
     public static final String TAG_ID_PROMO = "PromoID";
     public static final String TAG_NAMA_PROMO = "PromoName";
     public static final String TAG_LINK_IMAGE_PROMO = "PromoImage";
     public static final String TAG_DESC_PROMO= "PromoDesc";
     public static final String TAG_CATE_PROMO = "PromoCate";
     public static final String TAG_CONT_PROMO = "PromoContact";
     public static final String TAG_DATES_PROMO = "PromoDateStart";
     public static final String TAG_DATEE_PROMO = "PromoDateEnd";

     JSONArray daftar_promotion = null;

     ListView list;

     PromotionListAdapter adapter;

     EditText inputSearch;

     private Curve activity;

     @Override
     public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_curve);
     DaftarPromotion = new ArrayList<HashMap<String, String>>();

      new Activity().execute();
      activity = this;
      list = (ListView) findViewById(R.id.list);

      inputSearch = (EditText) findViewById(R.id.search_box);

      inputSearch.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
                Curve.this.adapter.getFilter().filter(cs);
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub
            }
        }); 

      list.setOnItemClickListener(new OnItemClickListener() {
      @Override
      public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {
          HashMap<String, String> map = DaftarPromotion.get(position);
          String pna = map.get(TAG_NAMA_PROMO);
          String pde = map.get(TAG_DESC_PROMO);
          String pca = map.get(TAG_CATE_PROMO);
          String pcon = map.get(TAG_CONT_PROMO);
          String pds = map.get(TAG_DATES_PROMO);
          String pdae = map.get(TAG_DATEE_PROMO);

            Toast.makeText(Curve.this, pna +"\n" + pde +"\n" + pca +"\n" + pds +" to " + pdae +"\n" + pcon,Toast.LENGTH_LONG).show();

      }
      }); 

      }

     public boolean onCreateOptionsMenu(Menu menu) {
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.smenu, menu);
            return true;
        }
     public boolean onOptionsItemSelected(MenuItem item) {
         switch (item.getItemId()) {
            case R.id.about:
                 Toast.makeText(Curve.this,"Mobile Advertising Application Using GPS V1.0",Toast.LENGTH_LONG).show();
            return true;
            case R.id.search:{
                 Intent intent = new Intent(Curve.this, Search.class);
                 intent.putExtra("lon",lon);
                 intent.putExtra("lat",lat);
                 startActivity(intent);
            //startActivity(new Intent(this, Search.class));

            }
            return true;
            default:
            return super.onOptionsItemSelected(item);
        }
        }

      public void SetListViewAdapter(ArrayList<HashMap<String, String>> daftar) {
      adapter = new PromotionListAdapter(activity, daftar);
      list.setAdapter(adapter);
      }

      @Override
      protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      if (resultCode == 100) {
      Intent intent = getIntent();
      finish();
      startActivity(intent);
      }
      }

      class Activity extends AsyncTask<String, String, String> {

      @Override
      protected void onPreExecute() {
      super.onPreExecute();
      pDialog = new ProgressDialog(Curve.this);
      pDialog.setMessage("Please Wait...");
      pDialog.setIndeterminate(false);
      pDialog.setCancelable(false);
      pDialog.show();
      }

      protected String doInBackground(String... args) {
      List<NameValuePair> params = new ArrayList<NameValuePair>();
      JSONObject json = jParser.makeHttpRequest(url_daftar_promotion, "GET",params);

      Log.d("All Products: ", json.toString());
      try {
      int success = json.getInt(TAG_SUCCESS);
      if (success == 1) {
           daftar_promotion = json.getJSONArray(TAG_DAFTAR_PROMOTION);
           for (int i = 0; i < daftar_promotion.length();i++){
           JSONObject c = daftar_promotion.getJSONObject(i);
           String PromoID = c.getString(TAG_ID_PROMO);
           String PromoName = c.getString(TAG_NAMA_PROMO);
           String pat = "http://10.0.2.2/webserver_maaug/";
           String PromoImage = pat + c.getString(TAG_LINK_IMAGE_PROMO);
           String PromoDesc = c.getString(TAG_DESC_PROMO);
           String PromoCate = c.getString(TAG_CATE_PROMO);
           String PromoDateStart = c.getString(TAG_DATES_PROMO);
           String PromoDateEnd = c.getString(TAG_DATEE_PROMO);
           String PromoContact = c.getString(TAG_CONT_PROMO);

           HashMap<String, String> map = new HashMap<String, String>();

           map.put(TAG_ID_PROMO, PromoID);
           map.put(TAG_NAMA_PROMO, PromoName);
           map.put(TAG_LINK_IMAGE_PROMO, PromoImage);
           map.put(TAG_DESC_PROMO, PromoDesc);
           map.put(TAG_CATE_PROMO, PromoCate);
           map.put(TAG_DATES_PROMO, PromoDateStart);
           map.put(TAG_DATEE_PROMO, PromoDateEnd);
           map.put(TAG_CONT_PROMO, PromoContact);

           DaftarPromotion.add(map);
           }

           } else {
           }
           } catch (JSONException e) {
           e.printStackTrace();
           }
           return null;
           }

           protected void onPostExecute(String file_url) {
           pDialog.dismiss();
           runOnUiThread(new Runnable() {
           public void run() {

           SetListViewAdapter(DaftarPromotion);

                }
           });
        }
    }
    } 
```

这是我的自定义适配器，它非常简单，没有自己的对象类

```
package lbs.promotion;

import java.util.ArrayList;
import java.util.HashMap;

import com.javacodegeeks.android.lbs.Curve;
import com.javacodegeeks.android.lbs.R;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Filter;
import android.widget.Filterable;
import android.widget.ImageView;
import android.widget.TextView;

public class PromotionListAdapter extends BaseAdapter {

 private Activity activity;
 private ArrayList<HashMap<String, String>> data;
 private static LayoutInflater inflater = null;
 public ImageLoader imageLoader;

 public PromotionListAdapter(Activity a, ArrayList<HashMap<String, String>> d) {

 activity = a;
 data = d;
 inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
 imageLoader = new ImageLoader(activity.getApplicationContext());
 }

 public int getCount() {
 return data.size();
 }

 public Object getItem(int position) {
 return position;
 }

 public long getItemId(int position) {
 return position;
 }

 public View getView(int position, View convertView, ViewGroup parent) {

     View vi = convertView;
      if (convertView == null)vi = inflater.inflate(R.layout.item_list_promotion, null);

      TextView PromoID = (TextView) vi.findViewById(R.id.PromoID);
      TextView PromoName = (TextView) vi.findViewById(R.id.PromoName);
      TextView PromoImage = (TextView) vi.findViewById(R.id.PromoImage);
      TextView PromoDesc = (TextView) vi.findViewById(R.id.PromoDesc);
      TextView PromoCate = (TextView) vi.findViewById(R.id.PromoCate);
      TextView PromoContact = (TextView) vi.findViewById(R.id.PromoContact);
      TextView PromoDateStart = (TextView) vi.findViewById(R.id.PromoDateStart);
      TextView PromoDateEnd = (TextView) vi.findViewById(R.id.PromoDateEnd);
      ImageView thumb_image = (ImageView) vi.findViewById(R.id.image_promo);

      HashMap<String, String> daftar_promotion = new HashMap<String, String>();
      daftar_promotion = data.get(position);

      PromoID.setText(daftar_promotion.get(Curve.TAG_ID_PROMO));

      PromoName.setText(daftar_promotion.get(Curve.TAG_NAMA_PROMO));

      PromoImage.setText(daftar_promotion.get(Curve.TAG_LINK_IMAGE_PROMO));

      PromoDesc.setText(daftar_promotion.get(Curve.TAG_DESC_PROMO));

      PromoCate.setText(daftar_promotion.get(Curve.TAG_CATE_PROMO));

      PromoContact.setText(daftar_promotion.get(Curve.TAG_CONT_PROMO));

      PromoDateStart.setText(daftar_promotion.get(Curve.TAG_DATES_PROMO));

      PromoDateEnd.setText(daftar_promotion.get(Curve.TAG_DATEE_PROMO));

      imageLoader.DisplayImage(daftar_promotion.get(Curve.TAG_LINK_IMAGE_PROMO),thumb_image);

      return vi;

      }

} 
```

这是我的 layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

 <!-- Editext for Search -->
    <EditText android:id="@+id/search_box"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="type to search"
        android:inputType="text"
        android:maxLines="1"/>

<ListView
android:id="@+id/list"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:divider="#040404"
android:dividerHeight="1dp"
android:listSelector="@drawable/list_selector" />

</LinearLayout> 
```

如何让 getfilter() 函数工作？或者有没有更简单的方法在我的列表视图中实现过滤？我想根据我的 PromoName 过滤

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-16T22:48:01.537

过滤器有两个主要组件，`performFiltering(CharSequence)`方法和`publishResults(CharSequence, FilterResults)`方法。在您的 PromotionListAdapter 中，您需要实现 Filterable 接口，然后覆盖 getFilter() 方法以返回一个已实现这些方法的新过滤器。

该`performFiltering(CharSequence)`方法是您完成大部分工作的地方。CharSequence 参数是您要过滤的数据。在这里，您首先要确定是否应该将列表过滤为基本情况。决定执行过滤后，为过滤后的数据集创建一个新的 ArrayList（在您的情况下是一个新的 ArrayList>），然后循环遍历您的完整列表项集，将与过滤器匹配的值添加到新的 ArrayList .

该`performFiltering`方法的返回类型是 FilterResults。FilterResults 是一个具有两个变量的简单对象，`int count`并且`Object results`. 使用过滤后的数据创建新的 ArrayList 后，创建一个新的 FilterResults，将`performFiltering`新的 ArrayList 设置为结果，并将该 ArrayList 的大小设置为计数。

返回后调用该`publishResults(CharSequence, FilterResults)`方法`performFiltering()`。CharSequence 参数与您过滤的字符串相同。FilterResults 参数是从`performFiltering()`. 在此方法中，您需要将新的 ArrayList 设置为 List 的数据源，然后调用`notifyDataSetChanged()`以更新 UI。

为了实现这一点，当我的适配器跟踪数据的原始 ArrayList 和当前显示的过滤 ArrayList 时，我已经取得了成功。下面是一些基于您的适配器的样板代码，可以帮助您入门。我已经在重要的行上发表了评论。

```
public class PromotionListAdapter extends BaseAdapter implements Filterable
{
    private Activity activity;
    private static LayoutInflater inflater = null;
    public ImageLoader imageLoader;

    //Two data sources, the original data and filtered data
    private ArrayList<HashMap<String, String>> originalData;
    private ArrayList<HashMap<String, String>> filteredData;

    public PromotionListAdapter(Activity a, ArrayList<HashMap<String, String>> d) 
    {
        activity = a;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader = new ImageLoader(activity.getApplicationContext());

        //To start, set both data sources to the incoming data
        originalData = d;
        filteredData = d;
    }

    //For this helper method, return based on filteredData
    public int getCount() 
    {
        return filteredData.size();
    }

    //This should return a data object, not an int
    public Object getItem(int position) 
    {
        return filteredData.get(position);
    }

    public long getItemId(int position) 
    {
        return position;
    }

    //The only change here is that we'll use filteredData.get(position)
    //Even better would be to use getItem(position), which uses the helper method (see the getItem() method above)
    public View getView(int position, View convertView, ViewGroup parent) 
    {

       View vi = convertView;
       if (convertView == null)vi = inflater.inflate(R.layout.item_list_promotion, null);

      TextView PromoID = (TextView) vi.findViewById(R.id.PromoID);
      TextView PromoName = (TextView) vi.findViewById(R.id.PromoName);
      TextView PromoImage = (TextView) vi.findViewById(R.id.PromoImage);
      TextView PromoDesc = (TextView) vi.findViewById(R.id.PromoDesc);
      TextView PromoCate = (TextView) vi.findViewById(R.id.PromoCate);
      TextView PromoContact = (TextView) vi.findViewById(R.id.PromoContact);
      TextView PromoDateStart = (TextView) vi.findViewById(R.id.PromoDateStart);
      TextView PromoDateEnd = (TextView) vi.findViewById(R.id.PromoDateEnd);
      ImageView thumb_image = (ImageView) vi.findViewById(R.id.image_promo);

      HashMap<String, String> daftar_promotion = new HashMap<String, String>();

      //Get data from filtered Data
      //This line can be replaced with:
      //     daftar_promotion = getItem(position);
      daftar_promotion = filteredData.get(position);

      PromoID.setText(daftar_promotion.get(Curve.TAG_ID_PROMO));

      PromoName.setText(daftar_promotion.get(Curve.TAG_NAMA_PROMO));

      PromoImage.setText(daftar_promotion.get(Curve.TAG_LINK_IMAGE_PROMO));

      PromoDesc.setText(daftar_promotion.get(Curve.TAG_DESC_PROMO));

      PromoCate.setText(daftar_promotion.get(Curve.TAG_CATE_PROMO));

      PromoContact.setText(daftar_promotion.get(Curve.TAG_CONT_PROMO));

      PromoDateStart.setText(daftar_promotion.get(Curve.TAG_DATES_PROMO));

      PromoDateEnd.setText(daftar_promotion.get(Curve.TAG_DATEE_PROMO));

      imageLoader.DisplayImage(daftar_promotion.get(Curve.TAG_LINK_IMAGE_PROMO),thumb_image);

      return vi;

    }

    @Override
    public Filter getFilter()
    {
       return new Filter()
       {
            @Override
            protected FilterResults performFiltering(CharSequence charSequence)
            {
                FilterResults results = new FilterResults();

                //If there's nothing to filter on, return the original data for your list
                if(charSequence == null || charSequence.length() == 0)
                {
                    results.values = originalData;
                    results.count = originalData.size();
                }
                else
                {
                    ArrayList<HashMap<String,String>> filterResultsData = new ArrayList<HashMap<String,String>>();

                    for(HashMap<String,String> data : originalData)
                    {
                        //In this loop, you'll filter through originalData and compare each item to charSequence.
                        //If you find a match, add it to your new ArrayList
                        //I'm not sure how you're going to do comparison, so you'll need to fill out this conditional
                        if(data matches your filter criteria)
                        {
                            filterResultsData.add(data);
                        }
                    }            

                    results.values = filterResultsData;
                    results.count = filteredResultsData.size();
                }

                return results;
            }

            @Override
            protected void publishResults(CharSequence charSequence, FilterResults filterResults)
            {
                filteredData = (ArrayList<HashMap<String,String>>)filterResults.values;
                notifyDataSetChanged();
            }
        };
    }
} 
```

你有它！据我所知，您已经为您的 inputText EditText 正确设置了 TextWatcher，因此添加该`getFilter()`方法并对您的 Adapter 进行一些其他小的更改应该会引导您找到解决方案。我相信你也可以在你的适配器上为你的过滤器创建一个成员变量，所以你不会在每次调用 getFilter() 时创建一个新的类实例，但是我从我以前的项目中复制/粘贴了这个确保它以这种方式工作。玩它，看看什么对你有用！希望这可以帮助！如果您需要任何澄清，请发表评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T00:03:28.783

您的适配器需要实现 Filterable 。

有关此（以及有关 listView）的更多信息，请观看视频“ [listView 的世界](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)”

这是一个示例代码：

[http://codetheory.in/android-filters/](http://codetheory.in/android-filters/)

# sql - UNPIVOT 在多列上返回多列

> ID：14365848
> 
> 赞同：0
> 
> 时间：2013-01-16T19:07:24.643
> 
> 标签：sql, oracle, unpivot

以下是 PL/SQL 中要达到的要求-

表格格式为

```
CREATE TABLE NETWORK_TABLE ( ORIG_CODE NUMBER, ORIG_SV NUMBER, DEST_CODE NUMBER, DEST_SV NUMBER ) 
```

样本数据 -

```
INSERT INTO network_table VALUES ( 14, 1, 15, 1);

INSERT INTO network_table VALUES ( 18, 4, 11, 1);

INSERT INTO network_table VALUES ( 15, 1, 22, 3);

INSERT INTO network_table VALUES ( 23, 2, 21, 1);

INSERT INTO network_table VALUES ( 14, 3, 11, 1);

INSERT INTO network_table VALUES ( 12, 2, 22, 2); 
```

表数据看起来像 -

```
Orig_r  orig_sv  dest_r dest_sv
  14     1       15     1 
  12     2       22     2 
  18     4       11     1 
  15     1       22     3 
  14     3       11     1 
```

现在，我想得到如下输出 -

```
ROOT SV
14   1 
15   1  
12   2
22   2
18   4
11   1
15   1
22   3
14   3
1    1 
```

我怎样才能做到这一点？感谢您的意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:38:57.953

像这样：

```
SQL> select * from network_table;

 ORIG_CODE    ORIG_SV  DEST_CODE    DEST_SV
---------- ---------- ---------- ----------
        14          1         15          1
        12          2         22          2
        18          4         11          1
        15          1         22          3
        14          3         11          1

SQL> select case name when 'ORIG_SV' then orig_code else dest_code end code, val 
  2  from network_table 
  3  unpivot (val for name in (orig_sv, dest_sv));

      CODE        VAL
---------- ----------
        14          1
        15          1
        12          2
        22          2
        18          4
        11          1
        15          1
        22          3
        14          3
        11          1 
```

或 10g 及以下：

```
SQL> select case  r when 1 then orig_code else dest_code end code,
  2         case r when 1 then orig_sv else dest_sv end val
  3    from network_table, (select rownum r from dual connect by level <= 2)
  4  /

      CODE        VAL
---------- ----------
        14          1
        12          2
        18          4
        15          1
        14          3
        15          1
        22          2
        11          1
        22          3
        11          1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:15:26.747

您可以使用 a`UNION ALL`将数据从列转换为行。：

```
select ORIG_CODE Root, ORIG_SV SV
from network_table
union all
select DEST_CODE, DEST_SV  
from network_table
order by root 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/e7d0c/4)

这`UNION ALL`将留下任何重复的值。如果要删除重复项，则可以使用`UNION`

# mysql - MySQL select into outfile 不会将文件写入我选择的目录

> ID：14365850
> 
> 赞同：6
> 
> 时间：2013-01-16T19:07:28.933
> 
> 标签：mysql, select, directory, into-outfile

以下命令：

```
select * 
  INTO OUTFILE '\home\user1\NetBeansProjects\project1\dumps\theData.csv'
  FIELDS TERMINATED by ','
  LINES TERMINATED BY '\n'
  from database1 
```

不将名为 theData.csv 的文件写入指定目录。

1.  如何将此文件写入指定目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-02T19:46:05.217

路径似乎没有写 - 如果你在 Linux 服务器上，那么我希望路径包含斜杠而不是反斜杠，如果你在 Windows 机器上，我希望驱动程序字母出现在某个地方（你不能写一个网络文件夹 - 只是数据库服务器机器的本地文件夹）。

此外，为了消除权限问题或尝试覆盖现有文件，请尝试写入“/tmp/non_existing_file.csv”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T19:18:24.053

您使用的是 Windows 还是 Linux？您可能需要将反斜杠更改为正斜杠。您还需要更改 MySQL Query 浏览器或 Workbench 中的设置，以默认查看此文件夹。

# jquery - Jquery Webcam插件拍照时不显示图片

> ID：14365853
> 
> 赞同：0
> 
> 时间：2013-01-16T19:07:39.653
> 
> 标签：jquery, html, jquery-plugins

我正在使用**jquery 网络摄像头插件**，当我拍照时它没有出现在画布中。我想知道我是否必须先将图像上传到服务器才能显示在画布上，还是在拍摄后显示。

**代码：**

```
 $(document).ready(function(){

        $("#camera").webcam({
                width: 315,
                height: 240,
                useMicrophone: false,
                mode: "callback",
                swffile: "resources/swf/jscam_canvas_only.swf", 

                onLoad: function() {

                    var cams = webcam.getCameraList();
                    for(var i in cams) {
                        jQuery("#cams").append("<li>" + cams[i] + "</li>");
                    }
                },

                debug: function (type, string) {
                    $("#status").html(type + ": " + string);
                },

                onCapture: function () {

                    jQuery("#flash").css("display", "block");
                    jQuery("#flash").fadeOut("fast", function () {
                    jQuery("#flash").css("opacity", 1);

                    webcam.snap();

                    });

                    webcam.snap();
                },

                onSave: function(data) {

                    var col = data.split(";");
                    var img = image;

                    for(var i = 0; i < 320; i++) {
                        var tmp = parseInt(col[i]);
                        img.data[pos + 0] = (tmp >> 16) & 0xff;
                        img.data[pos + 1] = (tmp >> 8) & 0xff;
                        img.data[pos + 2] = tmp & 0xff;
                        img.data[pos + 3] = 0xff;
                        pos+= 4;
                    }

                    if (pos >= 4 * 320 * 240) {
                        ctx.putImageData(img, 0, 0);
                        pos = 0;
                    }
                }

        }); 
});

    <label id="status"></label>                             
                        <div id="camera"></div>
                        <div><p><canvas id="canvas" height="240" width="320"></canvas></p></div>
                         <a href="javascript:webcam.capture();changeFilter();void(0);">Take a picture instantly</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:20:07.913

这就是我所做的，现在效果很好。现在它只是想知道如何在java中上传到服务器：

**代码**

```
<script type="text/javascript">

    var pos = 0, ctx = null, saveCB, image = [];
    var canvas = document.createElement('canvas');
    canvas.setAttribute('width', 320);
    canvas.setAttribute('height', 240);
    ctx = canvas.getContext('2d');
    image = ctx.getImageData(0, 0, 320, 240);

    var saveCB = function (data) {
        var col = data.split(';');
        var img = image;
        for (var i = 0; i < 320; i++) {
            var tmp = parseInt(col[i]);
            img.data[pos + 0] = (tmp >> 16) & 0xff;
            img.data[pos + 1] = (tmp >> 8) & 0xff;
            img.data[pos + 2] = tmp & 0xff;
            img.data[pos + 3] = 0xff;
            pos += 4;
        }

        if (pos >= 4 * 320 * 240) {
            ctx.putImageData(img, 0, 0);
            foto = canvas.toDataURL("image/png");
            pos = 0;
        }
    };

    $(document).ready(function(){

        $("#camera").webcam({
                width: 315,
                height: 240,
                useMicrophone: false,
                mode: "callback",
                swffile: "resources/swf/jscam_canvas_only.swf",
                quality:85,

                onSave: saveCB,
                onCapture: function () {
                    webcam.save();
                }

        }); 

        $('#upload').click(function () {
            webcam.capture();
            return false;
        });

        window.addEventListener("load", function() {
            var canvas = document.getElementById("canvas");

            if (canvas.getContext) {
                ctx = document.getElementById("canvas").getContext("2d");
                ctx.clearRect(0, 0, 320, 240);

                image = ctx.getImageData(0, 0, 320, 240);
            }

            }, false);

});

    <label id="status"></label>                             
                        <div id="camera"></div>
                        <div><p><canvas id="canvas" height="240" width="320"></canvas></p></div>
                        <input  id="upload" type="button" value="Take Photo"> 
```

# c# - 是否可以从 C# 中的对象中修改或删除匿名类型？

> ID：14365858
> 
> 赞同：2
> 
> 时间：2013-01-16T19:07:45.017
> 
> 标签：c#, object, optimization, anonymous-types, ternary-operator

我有一段代码如下：

```
var selected = “A”;
bool isSelected = selected == "A" || selected == "C";
var codeLists = new
{
    displayProperty1 = isSelected ? "property1" : null,
    displayProperty2 = isSelected ? "property2" : null,
    displayProperty3 = selected == "C" ? "property3" : null
}; 
```

所以，我的目标是消除不满足条件的属性。在上面的代码中，`selected`是`"A"`. 因此，`displayProperty3`将具有 的值`null`。但是我想消除`displayProperty3`这样如果选择的是“A”，那么应该只`2 properties`存在于对象中。

如果有任何适当且有效的方法可以做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:13:01.963

不，匿名类型仍然遵循其他类型的规则，只是没有在编译时明确定义。要执行您想要的操作，您必须定义两种不同的类型。

如果您不想在 UI 中*显示*该属性（例如，如果您绑定到自动生成的网格并且您不希望它成为列），那么在您的 UI 中处理它。

但是，如果您必须这样做，则必须创建两种不同的类型（匿名或显式）：

```
var selected = "A";
bool isSelected = selected == "A" || selected == "C";
dynamic codeLists;
if(selected == "C")
{
    codeLists = new
    {
        displayProperty1 = isSelected ? "property1" : null,
        displayProperty2 = isSelected ? "property2" : null
    }; 
}
else
{
    codeLists = new
    {
        displayProperty1 = isSelected ? "property1" : null,
        displayProperty2 = isSelected ? "property2" : null,
        displayProperty3 = "property3" 
    }; 
} 
```

如果您创建具有公共属性的基本类型会*更好，但无论哪种方式，它们都将是两种不同的类型：*

```
public class CodeList
{
    public string displayProperty1 {get; set;}
    public string displayProperty2 {get; set;}
}

public class CodeListC : CodeList
{
    public string displayProperty3 {get; set;}
    // Other two properties will be inherited
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:16:16.133

我认为您不想删除该属性。您真正想要做的是在 UI 上进行测试，如果它为空则不显示任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T19:18:13.467

你应该看看 dynamic 而不是 var：

[http://msdn.microsoft.com/en-us/library/dd264736.aspx](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

Var 是一种在编译时创建新的强类型实体的方法。动态不是强类型的，可以在代码执行期间添加/删除属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T19:28:31.497

如果我理解正确，您正在构建的对象应该以某种方式代表一个接口，对吗？现在，基于属性的存在/不存在来构建一个界面对我来说听起来不是很吸引人，我认为这实际上是一个可怕的想法，因为您的代码将成为一场噩梦。
我认为你应该修改你的方法。您是否考虑过使用例如**字典**？您仍然可以检查是否存在某些东西以及处理所需的代码会更简单（首先，没有反射......）。
这是您在问题中发布的等效代码：

```
var selected = “A”;
bool isSelected = selected == "A" || selected == "C";

var codeList = new Dictionary<string, string>();
if(isSelected) {
    codeList["displayProperty1"] = "property1";
    codeList["displayProperty2"] = "property2";
}

if(selected == "C")
    codeList["displayProperty3"] = "property3"; 
```

如果 !isSelected 字典将不包含名为 displayProperty1 和 displayProperty2 的键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T19:16:17.340

仅仅因为匿名对象（和`var`）没有显式类型化并不意味着它们没有类型。该类型需要能够在编译时完全定义，否则您的代码将无法构建。

由于具有属性的类型的对象与`displayProperty1`具有`displayProperty2`这两个 plus 的类型不同`displayProperty3`，因此您不能尝试将它们都粘贴到同一个变量中，就像您可以将 a`string`和 an`int`放在同一个变量中一样。

# ios - 无法在所选设备 IOS FacebookSDK 上运行

> ID：14365859
> 
> 赞同：0
> 
> 时间：2013-01-16T19:07:44.890
> 
> 标签：ios, facebook-ios-sdk

当我 尝试在模拟器或设备中运行应用程序时（我在 ios 5 中尝试过**，** 5.1、6)。

这发生在我从[这里安装 Facebook SDK 3.1 之后](https://developers.facebook.com/ios/downloads/)

我找不到任何解决方案...有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:05:12.403

明确的答案在这里：[https](https://stackoverflow.com/a/11936610/2025924) ://stackoverflow.com/a/11936610/2025924 FacebookSDK 中的文件 info.plist 与项目的 info.plist 冲突。

# android - 无法更改寻呼机适配器 + FragmentPagerAdapter 中事件的 TextView 文本

> ID：14365860
> 
> 赞同：0
> 
> 时间：2013-01-16T19:07:45.363
> 
> 标签：android, interface, onlongclicklistener, fragmentpageradapter

我在 FragmentPagerAdapter 中有三个页面，我尝试从不同的片段（不在 pageradapter 中）捕获 longClick 事件，并通过接口使用此事件来更改 textview 中的文本。当我将片段保存在 MainActivity 中的数组列表中时，它在某种程度上起作用，但随后我尝试删除数组列表并从 pageradapter 中获取现有片段以解决片段从我的数组列表中消失的问题，现在是 textview根本不会改变（它会改变之前的部分时间）。

以下是相关部分（根据 Tushar 的要求，我只带了最相关的部分，如果需要其他任何内容来理解代码，请提及，我会添加它）：

```
 @Override
    public void onLocationSelected(String location) {
    setCurrentLocation(location);
    Fragment frag;
    for (int i = adapter.getCount() - 1; i >= 0; i--) {
        frag = adapter.getItem(i);
        if (frag instanceof LocationChangedListener) {
        ((LocationChangedListener) frag).onLocationChanged();
        }
    }
    }

    private class WeatherAppPagerAdapter extends FragmentPagerAdapter {

    private String[] titles;

    public WeatherAppPagerAdapter(FragmentManager fm) {
        super(fm);
        titles = getResources().getStringArray(R.array.titles);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
        return new OptionsFrag();
        case 1:
        return new ConditionsFrag();
        case 2:
        return new ForcastFrag();
        default:
        return null;
        }
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return titles[position];
    }

    } 
```

希望这对您有所帮助，因为我的 TextView 迫切需要一些文本。

编辑：这是 TextView 获取文本的位置：

```
@Override
public void onLocationChanged() {
if (view == null) {
    return;
}
((TextView) view.findViewById(R.id.tvLocationName)).setText(mainActivity
    .getCurrentLocation());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:23:48.723

好的，我找到的解决方案是从活动中设置文本，我猜从片段中无法访问视图。无论我如何尝试获取它，该视图始终为空。这意味着为小部件提供不同的 id，但至少它有效。

# php - 用 php 制作 javascript .click(function()

> ID：14365862
> 
> 赞同：0
> 
> 时间：2013-01-16T19:07:52.170
> 
> 标签：php, javascript

我正在尝试使用 PHP 循环使用一系列 javascript.click 函数：

```
$("document").ready(function()
{    

    $('#nav > li > a').click(function(){
    if ($(this).attr('class') != 'active'){
      $('#nav li ul').slideUp();
      $(this).next().slideToggle();
      $('#nav li a').removeClass('active');
      $(this).addClass('active');
    }
    else{
      $(this).next().slideToggle();
    $(this).removeClass('active');
    }
    })

<?php

        include_once '../admin/Clases/sql.php';
        $sql = new sql();

        $res = $sql->check("products","*","1");
        $javascript = "";
        if($res["ok"]){

            foreach($res["tabla"] as $fila)
            {
             $javascript .="$('#btn_".fila[2]."').click(function(){$('#prod_img').css('background-image','url(".fila[3].")');})";

            }
            echo $javascript;
        }

    ?> 
```

但是当我运行时它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:49:16.340

我相信您的 JavaScript 字符串末尾缺少分号：

```
$javascript .="$('#btn_".fila[2]."').click(function(){$('#prod_img').css('background-image','url(".fila[3].")');});";
// --------------------------------------------------------------------------------------------------------- HERE ^ 
```

还：

*   你忘记了`$`你的`$fila`php 变量
*   您必须在 php 字符串上使用单引号，并在 js 中反转（或转义）引号。在双引号内，php 尝试评估变量——任何以开头的变量`$`（并猜测 jQuery 函数以什么开头……）。

所以这最终应该起作用：

```
$javascript .= '$("#btn_'.$fila[2].'").click(function(){$("#prod_img").css("background-image","url('.$fila[3].')");});'; 
```

* * *

然而，它丑得要命。我会通过将您的数据作为 JSON 传递给 js 来解决这个问题，而不是从 php.ini 编写 js 代码。

# java - 计算机之间的 RMI 连接

> ID：14365865
> 
> 赞同：0
> 
> 时间：2013-01-16T19:07:56.820
> 
> 标签：java, rmi

我是 RMI 方面的新手。我正在使用 eclipse ide 并且我正在尝试连接到通过 lan 连接的另一个系统 1st 我编写了接口并在服务器类中实现了它，我在远程计算机中执行了它并且 srver 成功执行了 2nd 我创建了相同的接口和我计算机中的客户端并尝试执行它，但我收到错误“连接重用和我的本地主机计算机 ip”

为什么我得到这个错误我在服务器和客户端机器上创建了相同的接口如果我通过命令提示符运行我在 eclipse 中得到输出我得到了错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:12:22.990

您缺少的类必须与它所依赖的任何其他应用程序类一起部署到客户端。

# image - Qt - 无法将图像放在表格中

> ID：14365875
> 
> 赞同：4
> 
> 时间：2013-01-16T19:08:19.993
> 
> 标签：image, qt, qtablewidget, qtablewidgetitem

为什么使用以下代码我只得到一个空表小部件？

```
QString imgPath = "C:\\path\\to\\image.jpg";
QImage *img = new QImage(imgPath);

QTableWidget     *thumbnailsWidget = new QTableWidget;
QTableWidgetItem *thumbnail = new QTableWidgetItem;
thumbnail->setData(Qt::DecorationRole, QPixmap::fromImage(*img));

thumbnailsWidget->setColumnCount(5);
thumbnailsWidget->setRowCount(3);
thumbnailsWidget->setItem(0, 0, thumbnail);

setCentralWidget(thumbnailsWidget); 
```

如何将图像放入 QTableWidgetItem？

谢谢你。

PS：
我注意到桌子并不是真的空着。单击不同的 QTableWidgetItem 元素，空的元素变为蓝色，坐标为 [0,0] 的元素以不同的方式突出显示：青色，左侧有一个细蓝条...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T21:17:14.437

你做的几乎都是正确的，但试着控制你的`img`，例如，像这样：

```
QString imgPath = "C:\\path\\to\\image.jpg";
QImage *img = new QImage();
bool loaded = img->load(imgPath);
if (loaded) {
    QTableWidget *thumbnailsWidget = new QTableWidget;
    QTableWidgetItem *thumbnail = new QTableWidgetItem;
    thumbnail->setData(Qt::DecorationRole, QPixmap::fromImage(*img));

    thumbnailsWidget->setColumnCount(5);
    thumbnailsWidget->setRowCount(3);
    thumbnailsWidget->setItem(0, 0, thumbnail);

    w.setCentralWidget(thumbnailsWidget);
} else {
    qDebug()<<"Image "<<imgPath<<" was not opened!";
} 
```

希望，对你有帮助！祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T09:35:17.613

好的，我不得不重新调整图像：

```
thumbnail->setData(Qt::DecorationRole, QPixmap::fromImage(*img).scaled(100, 100)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-31T16:13:26.957

您可以尝试以下方法 - 这里我们使用资源文件夹中的图像...

```
QString imgPath = ":/image.png";
QImage imageName = *new QImage(imgPath);

QTableWidgetItem *thumbnail = new QTableWidgetItem;
thumbnail->setData(Qt::DecorationRole, QPixmap::fromImage(imageName)); 
```

然后 - 将缩略图设置为您想要的表格行/列 - 例如在第 1 列和第 1 行中：

```
tableWidget->setItem( 1, 1, thumbnail); 
```

您必须注意，您需要特定的头文件：

```
#include <QPixmap> 
```

# asp.net-mvc - EntityFramework 代码优先迁移

> ID：14365876
> 
> 赞同：0
> 
> 时间：2013-01-16T19:08:22.720
> 
> 标签：asp.net-mvc, asp.net-mvc-4, migration, entity-framework-5

我正在尝试实现一个 ASP.NET MVC 4 应用程序，首先使用 Entityframework 代码。实际上我有 2 个数据上下文，一个自定义的和默认的 UsersContext。

```
namespace Namespace.Models
{
    public class StoreDB : DbContext
    {
        public DbSet<Supplier> Suppliers { get; set; }
        public DbSet<Vendor> Vendors { get; set; }
        public DbSet<Product> Products { get; set; }
    }
} 
```

和

```
public class UsersContext : DbContext
{
    public UsersContext() : base("StoreDB")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
} 
```

很可能这个说法`public UsersContext() : base("StoreDB")`是错误的。但是当我离开默认值时，创建`: base("DefaultConnection")`了一个`DefaultConnection`数据库，当然，我只想要一个名为“StoreDB”的数据库。

`UserProfile`我对属于的进行了一些更改`UsersContext`

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public DateTime? DoB { get; set; }
} 
```

我更新了 Global.asax 如下：

```
Database.SetInitializer(new Namespace.Models.StoreDbInitializer());
Database.SetInitializer(new DropCreateDatabaseIfModelChanges<Namespace.Models.UsersContext>()); 
```

但是当我运行应用程序时，我得到了这个错误：

```
CREATE DATABASE permission denied in database 'master'. 
```

为什么要在“master”下创建数据库？

我的连接字符串如下：

```
<add name="StoreDB" 
     connectionString="Data Source=.\SQLEXPRESS; Initial Catalog=MyDB; Integrated Security=SSPI; MultipleActiveResultSets=True" 
     providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:02:45.787

您是否在 IIS 中运行该站点？应用程序池是否在可以在 SQL Express 实例中创建数据库的帐户下运行？如果它以运行方式运行，`ApplicationPoolIdentity`请尝试将其更改为以运行方式运行`NetworkService`。

另外，尝试删除`UsersContext`并将属性移动到您的`StoreDB`上下文中。您应该有一个与连接字符串同名的上下文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:29:41.677

听起来它忽略了这样一个事实，即您有一个名为“StoreDB”的连接字符串，它正在尝试创建一个名为它的数据库（这是您正在调用的同一构造函数的另一个函数）。

您可以明确告诉构造函数这是一个连接字符串的名称，如下所示：

```
public UsersContext() : base("name=StoreDB")
... 
```

试试看，让我知道它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:54:42.630

我认为问题在于我不是以管理员身份运行 Visual Studio .. 我不知道究竟是为什么，但现在似乎没问题。很抱歉打扰您，感谢您的时间和回答！

# javascript - RequireJS 加载的调试/查找脚本

> ID：14365879
> 
> 赞同：14
> 
> 时间：2013-01-16T19:08:25.650
> 
> 标签：javascript, debugging, requirejs

我刚刚开始使用[RequireJS](http://requirejs.org/)为我的页面加载脚本，但是在尝试使用 chrome 调试问题时遇到了障碍。

假设我的主脚本依赖于两个依赖项：`dep1`和`dep2`

```
require(["dep1", "dep2"], function(dep1, dep2) {
    //do something
}); 
```

在运行单元测试时，我注意到其中的某些`dep1.js`内容无法正常工作，因此我打开了 chrome 开发工具来插入断点，除了...

![缺少依赖项](../Images/78455556bb921fcb4db79fde000e5023.png)

……`dep1.js`不存在！

如何定位源文件以插入断点？！

我确信文件*正在*加载，因为脚本正在正确运行。我只是在来源列表中看不到它们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:24:59.347

终于意识到问题是我使用`r.js`的是`require.js`. 切换后，我可以毫无问题地看到文件。

顺便说一句，临时解决方法是在插入文件的末尾插入下面的行。这*只是*让 chrome 拾取文件。

```
//@ sourceURL=GameWorldAction.js 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:12:39.813

在上面的示例中，您永远不会关闭您的数组。

```
require(["dep1", "dep2", function(dep1, dep2) {
    //do something
}); 
```

应该：

```
require(["dep1", "dep2"], function(dep1, dep2) {
    //do something
}); 
```

**编辑以响应对问题的更新：**

我假设`r.js`是 RequireJs 文件。看起来 RequireJS 没有正确加载文件，如果有，那么文件将显示在您的检查器中。

您是否使用标签`data-main`上的属性`script`来指定主 JS 文件？如果是，`dep1`和`dep2`文件是否与主 JS 文件在同一目录中？`baseUrl`如果您尝试从不同的路径或域加载文件，您可能必须指定不同的。您可以通过在 require.config 中设置来更改 baseUrl。

```
<script>
  require.config({
    //path can also be a domain like "//image.mydomain.tld/jscript"
    baseUrl: "/another/path" 
  });
</script> 
```

# vim - 执行 :noremap 时如何阻止光标在 vim 中移动？

> ID：14365881
> 
> 赞同：1
> 
> 时间：2013-01-16T19:08:27.527
> 
> 标签：vim, remap

我的 .vimrc 中有很多这样的：

```
:noremap <F1> :set hls!<CR> :echo "hilight seach (hls) =" &hls<CR> 
```

（很高兴有自动缩进、行号、忽略大小写等，只需按一下按钮即可切换。）

但是在执行这些操作时会出现一种奇怪的行为。光标向右移动一列。如果我在一行的末尾，光标将移动到下一行的开头。为什么会这样，我该如何预防？

这是vim 7.3.429，但我在7.2.411中也看到了。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:17:46.397

问题是 和 之间的`<CR>`空间`:echo`。删除它，它应该可以工作。

```
:noremap <F1> :set hls!<CR>:echo "hilight seach (hls) =" &hls<CR> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:46:13.587

gpojd 是正确的，空间导致您的运动问题。也许您可能对更简单的切换映射感兴趣？

```
nnoremap <f1> :set hls! hls?<cr>
nnoremap <f2> :set spell! spell?<cr>
nnoremap <f3> :set list! list?<cr> 
```

使用`set hls?`将显示 的当前值`'hlsearch'`。因为`:set`可以一次设置多个设置，所以您切换值然后要求显示当前值。

# mysql - 如何获取用户从动态表中选择的值？

> ID：14365884
> 
> 赞同：0
> 
> 时间：2013-01-16T19:08:32.127
> 
> 标签：mysql, sql, database, select

我有一个动态表，我想单击链接示例位置 A 并转到另一个 php 页面。但是，在另一个 php 页面中，我想从位置 A 中选择一些详细信息。我可以知道如何获取这些值吗？我尝试了一些方法，但仍然失败。

创建动态表：

```
<?php
            include "mysqli.connect.php";
            // Make a MySQL Connection

            $_session['place'] = $row['links'];

            $retrieveLocation = "SELECT COUNT(c.userid) AS userid, p.places, p.address, p.telephone, p.links FROM promotion AS p LEFT JOIN candy AS c on p.places = c.places GROUP BY p.places ORDER BY userid desc"; 

            $result = $mysqli->query($retrieveLocation);    
            while ($row = $result->fetch_array(MYSQLI_ASSOC))
            {   
            echo "<tr><td>{$row['places']}</td><td>{$row['address']}</td><td>{$row['telephone']}</td><td>{$row['userid']}</td><td><a href=\"".$row['links']."\">View</a></td></tr>";
            }

        ?> 
```

因此它将从数据库中生成值并输出为表：

```
places | address | telephone | userid | links
----------------------------------------------
A                                     | A.php
B                                     | B.php
C                                     | C.php
D                                     | D.php 
```

一个.php

```
<?php
                include "mysqli.connect.php";

                // Make a MySQL Connection      
                $retrieve = "SELECT username, product, rating FROM ratings WHERE places='".$_SESSION['place']."'"; 

                $result = $mysqli->query($retrieve);    
                while ($row = $result->fetch_array(MYSQLI_ASSOC))
                {   
                    echo "<tr><td>{$row['product']}</td><td>{$row['rating']}</td><td>{$row['username']}</td></tr>";
                }
            ?> 
```

所以对于我的最后一列，当用户点击时，它会将他们定向到页面（例如 A.php）。并进入 A.php 页面，我需要从位置 A 中选择一些详细信息并将其显示出来。请问可以帮忙吗？谢谢。（我刚才尝试的会话部分，它没有工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:11:01.443

在指向新页面的 URI 中，您应该包含一个带有所选项目 id 的附加参数。

我的意思是，类似的东西：

```
"<a href=\"showItem.php?propertyId={$row['id']}\">View property</a>" 
```

# ruby-on-rails - WordPress VS RoR

> ID：14365890
> 
> 赞同：0
> 
> 时间：2013-01-16T19:08:54.817
> 
> 标签：ruby-on-rails, performance, wordpress

我有两种对网站进行编程的解决方案：Wordpress 和 RoR。首先更容易部署（这很重要，因为如果我选择 rails，有些人将不得不安装乘客、rvm 和配置 git）但我怀疑 Wordpress 在性能方面确实比 RoR 慢。

该站点将充满 AJAX 请求，我更喜欢使用性能最佳的解决方案。但是，我不完全确定差异是否足够大。

你怎么看？你知道我对`WordPress`与 Rails 性能相比慢的感觉是真还是假？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T19:37:09.913

我没有很多使用**Ruby on Rails**的经验，但我使用**WordPress**。在这种情况下，我会选择在功能集和易用性方面最适合您需求的应用程序。**WordPress**为网络上的一些顶级网站提供支持：[Smashing Magazine](http://smashingmagazine.com)、[Tech Crunch](http://techcrunch.com)、[CNN 的新闻博客](http://news.blogs.cnn.com/)等等。底线是无论任何速度比较，通过正确的设置，您都可以使用**WordPress**实现企业级性能。

您指的是哪个 CMS 用于 Ruby on Rails？您要求在软件和语言/平台之间进行比较。;)

**编辑：**

作为 Ruby on Rails 大规模出色性能的一个例子，[GitHub](http://github.com)使用了它。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T19:36:47.980

你在比较两个不同的东西。Wordpress 是一个 CMS。Ruby on Rails 是一个框架。您可以在几分钟内安装 wordpress，但灵活性不如框架。

如果您想要灵活性和可扩展性，您需要使用 Ruby on Rails、symphony、django 等框架

问候！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:39:46.343

无论您使用的是 RoR 还是 WP，缓存都将成为您的答案。

正如其他答案中提到的那样，RoR 是一个框架，这意味着您必须构建自己的 CMS 或安装供应商软件包。这意味着您的问题更多是关于该答案而不是 RoR。

我们使用 WP 为一些相当大的网站提供动力，随着它的扩展，您别无选择，只能缓存。

我个人更担心您的用户（访问者和管理员）的用户体验而不是速度，因为站点速度应该以毫秒为单位，培训以分钟或小时为单位。

# c# - sqlite“选择不同的”windows 8 app c#

> ID：14365891
> 
> 赞同：0
> 
> 时间：2013-01-16T19:08:55.920
> 
> 标签：c#, sql, sqlite

我正在尝试从 SQLITE 表列中读取唯一值并将其显示在列表框中。

这条 SQL 语句

```
SELECT DISTINCT [COLUMN NAME]
FROM [TABLE NAME] 
```

当我使用 SQLITE 浏览器在我的应用程序之外运行语句时返回正确的结果，但我似乎无法将结果放入我的应用程序内的列表（或作为单个项目）以添加到列表框中。

我的 c#/XAML 应用程序中有最新的 SQLITE3 包，它运行良好。

这是我所拥有的，但这似乎是一个低效的过程：

我有一个“qvdb”类来定义字符串值......

```
public class qvdb
    {
        [PrimaryKey, AutoIncrement] 
        public int qRecord { get; set; }

        [MaxLength(3000)]
        public string qCol_1 { get; set; }
        [MaxLength(3000)]
        public string qCol_2 { get; set; }
        [MaxLength(3000)]
        public string qCol_3 { get; set; }
        [MaxLength(3000)]
        public string qCol_4 { get; set; }
        [MaxLength(3000)]
        public string qCol_5 { get; set; }
        [MaxLength(3000)]
        public string qCol_6 { get; set; }
        [MaxLength(3000)]
        public string qCol_7 { get; set; }
        [MaxLength(3000)]
        public string qCol_8 { get; set; }
        [MaxLength(3000)]
        public string qCol_9 { get; set; }
        [MaxLength(3000)]
        public string qCol_10 { get; set; }
} 
```

...保存字符串的应用程序范围的列表...

```
public static List<String> qCols = new List<String>(); 
```

...以及将它们放入列表的过程...

```
public static async Task mProcessColumns(IEnumerable<qvdb> input)
        {
             var dbExists = await qFunctions.fnFileExistsAsync(ApplicationData.Current.LocalFolder, qgv.fileDBLocal);
            if (!dbExists) return;

            try
            {
                qCols.Clear();
                foreach (var item in input)
                {
                    qCols.Add(item.qCol_1);
                    qCols.Add(item.qCol_2);
                    qCols.Add(item.qCol_3);
                    qCols.Add(item.qCol_4);
                    qCols.Add(item.qCol_5);
                    qCols.Add(item.qCol_6);
                    qCols.Add(item.qCol_7);
                    qCols.Add(item.qCol_8);
                    qCols.Add(item.qCol_9);
                    qCols.Add(item.qCol_10);
} 
```

...以及使用上述方法填充列表框的笨拙“遍历每条记录”方式：

```
 private async Task mLoadListboxes(int varZeroRow, int deZeroCol)
        {
            //Debug.WriteLine("mLoadListboxes");

            try
            {
                // add a list
                var tempList = new List<string>();

                // check for no records ... no records means nothing to load
                if (lbRecord.Items == null) return;

                // add unique items to a list
                for (iRecord = 0; iRecord <= lbRecord.Items.Count - 1; iRecord++)
                {
                    var fillLBs = await qgv.db.QueryAsync<qvdb>("SELECT * FROM qvdb WHERE qRecord=" +
                                                                Convert.ToInt32(lbRecord.Items[iRecord].ToString()) +
                                                                ";");
                    await qProcessColumns.mProcessColumns(fillLBs);

                    if (qProcessColumns.qCols[varZeroRow] == null) continue;
                    var tempTextToDedup = qProcessColumns.qCols[varZeroRow];
                    if (tempTextToDedup == null) continue;
                    if (tempList.Contains(tempTextToDedup)) continue;
                    if (tempTextToDedup != " " && tempTextToDedup != "")
                    {
                        // add to list
                        tempList.Add(tempTextToDedup);
                    }
                }

                // sort list
                tempList.Sort();

                // set lb items to list
                qgv.deListboxes[deZeroCol].ItemsSource = tempList;

                Task.WaitAll();
            }
            catch (Exception)
            {
                qgv.failed = true;
            }
        } 
```

“SELECT DISTINCT”似乎绕过了很多步骤并返回一个可以使用.ItemsSource 排序并添加到列表框的列表。

* * *

感谢CL的指导。所以按照这个建议，我完全按照你的建议创建了这个类：

```
public class JustOneColumn
    {
        public string value { get; set; }
    } 
```

我首先尝试将列表框的 ItemsSource 属性直接设置为查询变量并得到此错误：

![错误](../Images/30bdb1b90ed5ecdab79a1ff6d2a68a2d.png)

然后我尝试创建一种方法来处理结果：

```
public static List<String> qDistinctColElements = new List<String>();

public static void mProcessDistinctColElements(IEnumerable<JustOneColumn> input)
        {
            try
            {
                qDistinctColElements.Clear();
                foreach (var item in input)
                {
                    qDistinctColElements.Add(item.value);
                }
            }
            catch (Exception) { failedProcessColumns = true; }

        } 
```

当我尝试调用此方法时...

```
var colContents = qgv.db.QueryAsync<JustOneColumn>("SELECT DISTINCT qCol_" + (_v + 1) + " FROM qvdb;");
qProcessColumns.mProcessDistinctColElements(colContents);  
qgv.deListboxes[_v].ItemsSource = colContents; 
```

...我在 colContents 下得到一条波浪线，说“错误 2 参数 1：无法从 'System.Threading.Tasks.Task System.Collections.Generic.List QuantiView.JustOneColumn' 转换为 'System.Collections.Generic.IEnumerable QuantiView。 JustOneColumn'"

我验证了 sql 查询在 SQLite 数据库浏览器中有效，还使用 ​​Debug.Writeline 查看了各种输出，没有看到返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:16:12.857

您的类`qvdb`对应于查询返回的表`SELECT * FROM qvdb`。

对于查询返回的表`SELECT DISTINCT ...`，还应该创建一个对应的类：

```
public class JustOneColumn
{
    public string value { get; set; }
}

... qgv.db.QueryAsync<JustOneColumn>("SELECT DISTINCT MyCol FROM ..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T23:06:30.123

我有同样的问题。我已经尝试了`JustOneColumn`此处显示的表格的解决方案。直到我在我的 sql 语句中添加别名，它才起作用`as value`，即

```
String sql = "SELECT DISTINCT col AS value FROM myTable"

IEnumerable<OneIntColumn> result = db.Query<OneIntColumn>(sql) 
```

请注意，在我的情况下`OneIntColumn.value`是 type `int`。在 SQL 语句查询中没有正确的列别名，结果总是返回 0。

# mysql - 如果 id 在以逗号分隔的字段中，则显示该行

> ID：14365892
> 
> 赞同：1
> 
> 时间：2013-01-16T19:08:56.440
> 
> 标签：mysql

> **可能重复：**
> [mysql 检查数字是否在逗号分隔的列表中](https://stackoverflow.com/questions/2674011/mysql-check-if-numbers-are-in-a-comma-separated-list)

> 注意：请不要告诉我规范化我的数据库

好的，所以我需要的是如果 id 存在于另一个用逗号分隔的表中，则仅获取行......但我不知道如何选择

`table1`

```
script_id | name | user_id
+-------------------------+
   33       demo    256 
```

`table2`

```
has_access| name |user_id
+-------------------------+
 33,34,56   demo    256 
```

`table1`所以我希望只有当 id 存在于列中时才返回行`table2` `has_access`，而且我需要精确，所以如果 ID 得到 33，或者 333 应该不同......我需要精确的值匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:14:17.640

Mysql 具有`FIND_IN_SET`针对这种数据的功能：

```
.... WHERE find_in_set(table1.script_id,table2.has_access) 
```

但是你最好~~norma~~对不起，无法抗拒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:12:58.517

请不要告诉我们要告诉你什么。

首先阅读：**[在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad)**
简短的回答：**是的，这真的很糟糕。**

和类似的：**[使用逗号分隔的多个外键是否错误，如果是，为什么？](https://dba.stackexchange.com/questions/17808/is-using-multiple-foreign-keys-separated-by-commas-wrong-and-if-so-why)**
简短的回答：**是的，这是非常非常错误的。**

**规范化您的数据库。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:12:54.540

这是一个简单的方法：

```
select *
from table1
where concat(',', has_access, ',') like concat('%,', YOURIDTOTEST, ',%') 
```

这用逗号（分隔符）分隔每个值。然后它在列表的开头和结尾放置一个逗号，并在第二个“喜欢”第一个时匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T19:16:43.887

我会看一下[find_in_set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set) mysql 函数（我假设这就是您正在使用的，因为它是帖子被标记的内容）。我没有尝试过，但是由于您的`has_access`列是字符串，因此您应该匹配字符串，而 333 之类的内容不会与 33 匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T19:17:27.613

select table1.* from table1 join table2 on ( table2.has_access = table1.script_id or table2.has_access like concat(table1.script_id, ',%') or table2.has_access like concat('%,', table1.script_id, ' ,%') 或 table2.has_access 像 concat('%,', table1.script_id) )

我想我涵盖了所有情况。

# asp.net - 避免在dao层尝试捕获代码并在服务层捕获它

> ID：14365893
> 
> 赞同：0
> 
> 时间：2013-01-16T19:08:57.670
> 
> 标签：asp.net, .net, asp.net-mvc-3, ninject

我有一个引用 dao 层的服务层。我使用ninject 的反转控制来绑定实现。

```
public class DaoA : IDaoA
{   
    private DaoA _dao;
    public void daoMethod() {
       //throw DBUpdate exception   
    }    
}

public class ServiceA : BaseService 
{   
    private DaoA _dao;
    public result methodA() {
       _dao.daoMethod();    
    }
} 
```

现在我想`try catch`避免`daoMethod`. 有没有办法`BaseService` 像我们在.NET`OnException`的类中捕获方法一样捕获这个异常？`Attribute`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:11:09.453

是的，如果您没有在 DAO 层中捕获异常，您可以在服务层中捕获它。

# html - 如何获取网站的 Windows 安全登录框

> ID：14365903
> 
> 赞同：0
> 
> 时间：2013-01-16T19:09:21.020
> 
> 标签：html, windows, security, login

我是新来的，我有一个带有 apache 的网站，我想设置它以便需要登录的网页，而不是有一个禁止页面（我现在正在获取）我怎么能得到带有用户名和密码的 Windows 安全登录框，如下所示：

http://i.stack.imgur.com/A0cCj.png> ?">

那么，像这样的密码框的 HTML 代码是什么，正如我搜索过的那样，我唯一能找到的就是如何摆脱它，而不是在我的网站上获取它！

# javascript - 在 AngularJs 中更改路线后，HTML5 相机不会关闭

> ID：14365904
> 
> 赞同：6
> 
> 时间：2013-01-16T19:09:21.383
> 
> 标签：javascript, html, video, camera, angularjs

我正在测试 HTML5 的视频功能。使用指令，我可以通过（实际上是通过适配器使其跨浏览器 - 至少那些支持它的人）`userMedia`打开我的 MacBook 上的相机。[`navigator.getUserMedia()`](http://dev.w3.org/2011/webrtc/editor/getusermedia.html)

但是当我更换我的 时`$route`，我再也看不到自己了（欢呼），但相机并没有关闭（绿灯一直亮着）。只有刷新页面才会重置所有内容（这是正常的）。

我希望观察变化`$location.path()`会起到作用：

```
 link: function(scope, elm, attrs, ctrl) {
            ...
            var path = $location.path();
            scope.$watch(function() {
                return $location.path();
            }, function(value) {
                if (value && value !== path) {
                    $log.info('Location changed, switching off camera');
                    webRTCAdapter.detachMediaStream(elm[0]);
                }
            }, true);
        } 
```

**分离媒体流（Chrome）：**

```
 webRTCAdapter.detachMediaStream = function(element) {
        console.log("Detaching media stream");
        element.pause();
        element.src = '';
        element.parentNode.removeChild(element);
    }; 
```

**html:**

```
<video id="localVideo" width="100%" autoplay="autoplay" user-media="user-media"></video> 
```

`detachMediaStream`被执行（我看到了必要的日志`console.log`），但相机没有关闭。

**知道如何解决这个问题吗？我应该以某种方式卸载元素吗？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T19:51:29.560

我找到了问题的原因。相机开机时创建的[`LocalMediaStream`](http://docs.webplatform.org/wiki/apis/webrtc/LocalMediaStream)，需要使用该`stop()`功能停止。

`LocalMediaStream`在将创建对象附加到视频元素时，必须保留对创建对象的引用：

```
 controller: function($element) {
            var self = this;
            self.onUserMediaSuccess = function(stream) {
                $log.info("User has granted access to local media.");
                webRTCAdapter.attachMediaStream($element[0], stream);

                // keep a reference
                self.localStream = stream;
            }; 
```

当事件发生时，这个`LocalMediaStream`引用必须添加到`detachMediaStream`函数中`$destroy`（谢谢你，[**Joseph Silber**](https://stackoverflow.com/users/825568/joseph-silber)）：

```
scope.$on('$destroy', function() {
   $log.info('Location changed, switching off camera');
   webRTCAdapter.detachMediaStream( elm[0], ctrl.localStream);
}); 
```

在`LocalMediaStream`我需要执行`stop()`函数的对象上：

```
 webRTCAdapter.detachMediaStream = function(element, stream) {
        console.log("Detaching media stream");
        element.pause();
        element.src = '';
        element.parentNode.removeChild(element);

        // stopping stream (camera, ...)
        stream.stop();
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:11:10.327

在 Firefox 中，我们已经支持 element.mozSrcObject = stream（成为 element.srcObject，Chrome 应该很快会有，但我暂时不知道他们是否会为其添加前缀）。这使得处理起来更容易，因为您*不需要*保留对它的第二次引用。(element.mozSrcObject.stop(); element.mozSrcObject = null)

# kendo-ui - Kendo UI：jQuery 插件与数据属性初始化

> ID：14365907
> 
> 赞同：1
> 
> 时间：2013-01-16T19:09:31.300
> 
> 标签：kendo-ui

我刚开始使用 Kendo UI，希望更好地了解大型 Web 应用程序的*jquery 初始化*与*数据属性初始化的优缺点。*我看到更多使用 jquery 的示例，但我喜欢属性方法；感觉有点像 Angularjs。在这一点上，我的偏好是非常主观的，希望得到客观的反馈。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:18:01.430

阅读[这篇](http://docs.kendoui.com/howto/declarative_initialization)关于 MVVM 和声明式初始化的文章。我想很多人都会同意，随着你的应用程序变得越来越大，DI 变得越来越有吸引力。如果您使用 MVVM，它尤其适用，但您不必获得好处。

# android - 显示 Android 应用程序的 XML 文档的所有详细信息

> ID：14365909
> 
> 赞同：0
> 
> 时间：2013-01-16T19:09:39.973
> 
> 标签：android, xml

我正在创建一个 Android 应用程序并希望在 XML 文档中显示所有单独的详细信息。到目前为止，我只能显示列表中的最后一个。以下是我正在使用的 XML 的一部分：

```
<Northwest>
<cp name="PARNELL" spaces="194"></cp>
<cp name="ILAC" spaces="875"></cp>
<cp name="JERVIS" spaces="901"></cp>
<cp name="ARNOTTS" spaces="265"></cp>
</Northwest> 
```

我想在应用程序中将名称和空格显示为标签。

# xml - Delphi XML (MSXML) 例程的二次运行时

> ID：14365910
> 
> 赞同：7
> 
> 时间：2013-01-16T19:09:41.670
> 
> 标签：xml, performance, delphi

在工作中，我们使用 XML 日志文件。每条日志消息都是一个`<message>`带有`<date>`子`<time>`节点的块，有`<submessage>`块、`<table>`结构等，并且可以稍后使用一些 Delphi 处理和 XSLT 将日志文件转换为本地化的 HTML。

对于中等大小的日志文件（大约 2 MB），我们遇到了性能问题（加载 XML 和进行一些基本操作最多需要一分钟），我可以将它们简化为这样的测试项目（编辑：更新代码并添加测量):

```
procedure TForm1.PrepareTest(MessageCount : integer);
var
  XML : IXMLDocument;
  i : integer;
begin
  XML := NewXMLDocument;
  XML.DocumentElement := XML.CreateNode('root');
  for i := 1 to MessageCount do
  begin
    XML.DocumentElement.AddChild('message').Text := 'Test Text';
  end;
  XML.SaveToFile(XML_NAME);
end;

procedure TForm1.XMLTest;
var
  StartTime : Cardinal;
  XML : IXMLDocument;
begin
  StartTime := GetTickCount();
  XML := NewXMLDocument;
  XML.LoadFromFile(XML_NAME);
  Memo1.Lines.Add('Node count: ' + IntToStr(XML.DocumentElement.ChildNodes.Count));
  Memo1.Lines.Add('Time: ' + FloatToStr((GetTickCount() - StartTime) / 1000) + ' seconds');
end; 
```

这会产生以下时间测量结果（节点计数每列增加 25%，所有时间都以毫秒为单位）：

```
Node count      8000    10000   12500   15625   19531   24413   30516   38145   47681
Base test time  484     781     1140    1875    2890    4421    6734    10672   16812
Variation 1                             32      47      62      78      78      141
Variation 2     2656    3157    3906    5015    6532    8922    12140   17391   24985
  (delta Base)   2172    2376    2766    3140    3642    4501    5406    6719    8173 
```

请注意这两种变体，第一种是`LoadFromFile`唯一的，第二种是另外在 XML 的开头（！）添加 10000 个节点，就像`PrepareTest`做的那样，这是最坏的情况，但是查看基本测试的增量，即使这样也没有显示二次效应。另请注意，计算节点可以替换为任何其他操作，因此看起来涉及的 XML 文件的初始化/验证存在一些延迟，这会导致问题，并且之后的任何操作都会显示预期的行为。

内存使用不高，最后一个测试用例（47681 个节点）的内存使用峰值为 39 MB，其 XML 文件大小为 1.3 MB。

加载 XML 后做的第一件事（例如读取或写入一些节点或访问节点计数）很慢，并且它显示*二次运行时行为*，因此任何超过 10 MB 的日志文件都无法使用。

我们已经通过解析 100 条消息的小块解决了性能问题以及其他一些问题，而且我知道 Delphi XML 例程不适合/过度杀伤这个用例 - 使用不同的 XML 库很可能会停止性能问题。所以我不是要求解决这个问题（尽管如果不使用不同的 XML 库就可以解决这个问题会很有趣）。

我的问题是：Delphi XML 例程和 MSXML 的二次运行时行为的原因是什么？我无法想象在 XML 加载/解析/验证中会导致这种情况的事情，除了真正“愚蠢”的事情，比如管理链表中的节点而不是树，但我可能忽略了一些东西，可能与 DOM 相关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T19:58:32.303

我同意 mj2008 的观点，即 XML 不适合记录日志。也就是说，这个问题和一般的大型 XML 文件，可以通过使用[SAX](http://msdn.microsoft.com/en-us/library/ms753774%28v=vs.85%29.aspx)更快地处理，它在解析传入的 XML 数据流时抛出事件，这使您可以在从磁盘读取项目时对其进行处理，实际上减轻了指数增长在将其交给 XSLT 之前将其全部加载到内存中。

我很遗憾我还没有在 Delphi 中完成 SAX，但我怀疑最难的部分是实现所需的 SAX 接口（例如[ISAXContentHandler](http://msdn.microsoft.com/en-us/library/ms762273%28v=vs.85%29.aspx)），但 Delphi 有 TInterfacedObject 和 TAutoObject 等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T22:06:27.527

简而言之，您的问题：为什么二进制库 MSXML 这么慢？谁知道。谁在乎。你要拆机吗？闯入微软抢其源代码？这里不是 Delphi，这是微软代码。

虽然 XML 对于日志记录来说是一个糟糕的选择，但 OmniXML 可能是比 MSXML 更好的选择。

但是，更好的选择称为“打开文本文件以进行追加、写入行、关闭文本文件”。请注意固有的可伸缩性，并且不需要解析。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T07:35:15.487

与其他人的评论相反，我认为 XML 是一种出色的日志记录格式。用于 XML 的 Delphi VCL 包装器对核心内存非常贪婪，因此这可能解释了纯 TXMLDocument 大规模处理性能不佳的原因。

相反，我建议使用简单的 XSLT 转换将其发布到您的 XML 日志中。我尚未大规模测量此解决方案的性能，但我相信这将比您当前报告的内容有很大的改进。

## 样式表。

例如，假设我们的日志看起来像这样......

```
<log>
  <message>This is the first message<message/> 
</log> 
```

这个简单的 XSLT 1.0 样式表，带有参数`addend-message`...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />  
<xsl:param name="addend-message" select="''" />

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>  

<xsl:template match="log">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
    <message><xsl:value-of select="$addend-message" /></message>
  </xsl:copy>
</xsl:template> 
```

... 将在日志中附加一条消息。

## 语言绑定

要在 Delphi 中实现这一点，请使用以下声明...

```
ITransform = interface
  procedure AddParameter( const sParamBaseName, sParamValue, sNamespaceURI: string);
  procedure Transform;
  property  InputDocumentFileName : string;
  property  OutputDocumentFileName: string;
end;

function MS_Transform( const sStylesheet: string): ITransform; 
```

创建一个 ITransform，将样式表作为字符串传递。将两个文件名属性都设置为日志的文件名。每次您需要向日志中添加消息时，调用`AddParameter()`然后`Transform()`.

## 解决方案实施细节

上述语言绑定的一种可能实现可能是......

```
uses XMLIntf, msxml, msxmldom, sysutils;

type
  ITransform = interface
    ['{1004AE9A-D4AE-40E1-956D-AD98801AF7C1}']
      procedure SetInputDocumentFileName ( const sValue: string);
      procedure SetOutputDocumentFileName( const sValue: string);
      procedure AddParameter( const sParamBaseName, sParamValue, sNamespaceURI: string);
      procedure Transform;

      property InputDocumentFileName : string    write SetInputDocumentFileName;
      property OutputDocumentFileName: string    write SetInputDocumentFileName;
    end;

    TMS_XSLT = class( TInterfacedObject, ITransform)
    private
      FStylesheet: IXSLTemplate;
      FStylesheetAsDoc: IXMLDOMDocument2;
      FInputFN, FOutputFN: string;
      FProcessor: IXSLProcessor;;

      procedure SetInputDocumentFileName ( const sValue: string);
      procedure SetOutputDocumentFileName( const sValue: string);
      procedure MakeProcessor;

    publc
      constructor Create( const sStylesheet: string);
      procedure AddParameter( const sParamBaseName, sParamValue, sNamespaceURI: string);
      procedure Transform;

      property InputDocumentFileName : string    write SetInputDocumentFileName;
      property OutputDocumentFileName: string    write SetInputDocumentFileName;
    end;

  function MS_Transform( const sStylesheet: string): ITransform

function MS_Transform( const sStylesheet: string): ITransform
begin
result := TMS_XSLT.Create( sStylesheet)
end;

constructor TMS_XSLT.Create( const sStylesheet: string);
begin
  FStyleSheet := msxml.CoXSLTemplate60.Create;
  FStylesheetAsDoc := msxml.CoFreeThreadedDOMDocument60.Create;
  FStylesheetAsDoc.loadXML( sStyleSheetContent);
  FStylesheet.stylesheet := FStylesheetAsDoc  
end;

procedure TMS_XSLT.MakeProcessor;
begin
if not assigned( FProcessor) then
  FProcessor := FStylesheet.createProcessor
end;

procedure TMS_XSLT.SetInputDocumentFileName( const sValue: string);
begin
FInputDoc := sValue
end;

procedure TMS_XSLT.SetOutputDocumentFileName( const sValue: string);
begin
FOutputDoc := sValue
end;

procedure TMS_XSLT.AddParameter( const sParamBaseName, sParamValue, sNamespaceURI: string);
begin
MakeProcessor;
FProcessor.addParameter( sParamBaseName, sParamValue, sNamespaceURI)
end;

procedure TMS_XSLT.Transform;
var
  Doc: TXMLDocument;
  DocIntf: IXMLDocument;
  oXMLDOMNode: IXMLDOMNodeRef;
  sOutput: string;
begin
MakeProcessor;
try
  Doc  := TXMLDocument.Create( nil);
  Doc.Options := [doNodeAutoCreate, doNodeAutoIndent, doAttrNull, doAutoPrefix, doNamespaceDecl];
  Doc.DOMVendor := GetDOMVendor( 'MSXML');
  DocIntf := Doc;
  DocIntf.LoadFromFile( FInputFN);
  DocIntf.Active := True;
  if Supports( DocIntf.Node.DOMNode, IXMLDOMNodeRef, XMLDOMNode) then
    FProcessor.input := XMLDOMNode.GetXMLDOMNode;
  FProcessor.transform;
  while oProcessor.readyState <> 4 do sleep(1);
  sOutput := FProcessor.output;
  if sOutput = '' then exit;
  WriteToFile( sFOutputFN, sOutput);
  // Alternate way..
  //  Doc  := TXMLDocument.Create( nil);
  //  Doc.Options := [doNodeAutoCreate, doNodeAutoIndent, doAttrNull, doAutoPrefix, doNamespaceDecl];
  //  Doc.DOMVendor := GetDOMVendor( 'MSXML');
 //   DocIntf := Doc;
  //  DocIntf.LoadFromXML( sOutput);
  //  DocIntf.Active := True;
  //  DocIntf.SaveToFile( FOutputFN)
finally
  FProcessor := nil
  end
end; 
```

这绑定到[Microsoft 的 MS XML 库](http://msdn.microsoft.com/en-us/library/windows/desktop/ms763742%28v=vs.85%29.aspx)和 XSLT 引擎。遗憾的是，我不知道将[Saxon 的 XSLT 处理器](http://www.saxonica.com/products/products.xml)绑定到 Delphi 代码的任何便捷方法。

## 替代实施

[我在此处的回答](https://stackoverflow.com/questions/9282370/xml-parsing-txmldocument/9307970#9307970)给出了利用 MS 的 XSLT 引擎的替代实现。这种方法的缺点是参数化不是原生的。要参数化样式表，您必须自己滚动，通过在转换之前对样式表进行字符串替换。

## 性能注意事项

如果您正在快速进行大量日志记录，那么将要记录的消息缓存到内存中可能是一个不错的策略，然后定期但不太频繁地使用单个 XSLT 转换来清除缓存以写入所有消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T23:48:09.487

您是在数学意义上使用术语“指数”，还是仅在通俗意义上使用？例如，知道它是否真的是二次的，或者它是否是某种性能相当线性的函数，直到你达到某个阈值（内存大小），此时它突然降级，这会很有趣。

如果处理 2Mb 需要一分钟，那么确实是非常严重的错误。我不太了解您的环境，无法开始猜测，但这最多需要一秒钟。您需要深入了解时间的去向。首先确定它是花时间解析 XML，还是在解析完成后处理 XML。

# perl - 用于将整数映射到给定范围的散列函数？

> ID：14365911
> 
> 赞同：6
> 
> 时间：2013-01-16T19:09:42.000
> 
> 标签：perl, r, hash

我有一组整数，每个整数的大小为 8,9 或 10 位。我有数以百万计的。我想将它们中的每一个映射到 1 到 1000 范围内的整数。我不能对整数做一个简单的 mod，因为这些数字的发布方式存在系统偏差（例如，偶数比奇数），所以

```
$id % 1000 
```

将产生更频繁的偶数和不太频繁的奇数。是否有任何简单的函数（执行按位运算的数学或棘手的函数）可以帮助我在 Perl 或 R 中获得这种映射？提前非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T19:46:50.800

您实际上是在要求将数字映射到 0 到 999 之间的值的哈希函数。

要构造它，您可以首先使用散列函数去除映射到值中的任何系统模式，然后使用 mod 将输出限制为 0 到 999 之间的值。

这是该想法的 R 实现：

```
library(digest)
set.seed(1)

(x <- sample(1e9, size=6))
# [1] 265508664 372123900 572853364 908207790 201681932 898389685

## To hash R's internal representation of these numbers
strtoi(substr(sapply(x, digest), 28, 32), 16L) %% 1e3
# [1] 552 511 233 293 607 819

## Or, for a hash mapping that's comparable to other programs' md5 hash 
## implementations
strtoi(substr(sapply(as.character(x), digest, serialize=FALSE),28,32),16L) %% 1e3
# [1] 153 180 892 294 267 807 
```

将那条线分解成碎片应该使它的作用更清晰：

```
## Compute md5 hash of R representation of each input number
(sapply(x, digest))
# [1] "a276b4d73a46e5a827ccc1ad970dc780" "328dd60879c478d49ee9f3488d71a0af"
# [3] "e312c7f09be7f2e8391bee2b85f77c11" "e4ac99a3f0a904b385bfdcd45aca93e5"
# [5] "470d800a40ad5bc34abf2bac4ce88f37" "0008f4edeebbafcc995f7de0d5c0e5cb"

## Only really need the last few hex digits
substr(sapply(x, digest), 28, 32)
# [1] "dc780" "1a0af" "77c11" "a93e5" "88f37" "0e5cb"

## Convert hex strings to decimal integers
strtoi(substr(sapply(x, digest), 28, 32), 16L)
# [1] 903040 106671 490513 693221 560951  58827

## Map those to range between 0 and 999
strtoi(substr(sapply(x, digest), 28, 32), 16L) %% 1e3
# [1]  40 671 513 221 951 827 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T20:05:57.897

除非您可以定义可用数字的数学属性（例如，它们是偶数、指数分布等），*否则任何确定性函数都无法将这些数字*均匀地映射到任何给定范围内。

您选择的每个函数都必须将某一类数字映射到输出范围内的一个小区域。如果散列函数很复杂，则可能难以先验地确定将被错误处理的类。当然，这是散列函数的普遍问题。您总是必须对输入进行假设。

理论上，唯一的解决方案（如果您对数字一无所知或无法分析它们）是将输入数字与真正的随机序列进行异或，然后使用`mod`操作。

在实践中，乔希的解决方案可能会奏效。

注意：如果您可以在散列数字时分析结果数组，则可以更改散列函数以均匀分布结果。这可能适用于创建哈希表以供以后搜索。但是，这似乎不是您的应用程序。

# ruby-on-rails-3 - Accepts_nested_attributes_for 子验证不起作用

> ID：14365913
> 
> 赞同：0
> 
> 时间：2013-01-16T19:09:46.573
> 
> 标签：ruby-on-rails-3

我有一个名为 Test 的模型，它接受_nested_attributes_for SubTest。一个测试基本上有一个 id，并且有多个子测试与一个单独的测试相关联。

我想验证 SubTest 的属性是否为数字。到目前为止，这是我的模型。

```
class Test < ActiveRecord::Base
 has_many :sub_tests
 accepts_nested_attributes_for :sub_tests
end

class SubTest < ActiveRecord::Base
 belongs_to :test
 validates :measurement, :numericality => true, :allow_nil => true
end 
```

这是测试控制器

```
def create
     respond_to do |format|
  if @test.save
    flash.now[:notice] = "Test Created"
    format.html { redirect_to(@test) }
    format.xml  { render :xml => @test, :status => :created, :location => @test }
    format.js

  else
    flash.now[:error] = "[Error] Test Not Created Because: #{@test.errors.full_messages.join(", ")}"
    format.html { render :action => "new" }
    format.xml  { render :xml => @test.errors, :status => :unprocessable_entity }
    format.js
  end
end 
```

结尾

如果用户在 sub_test 的表单中输入非数字字符串，我希望控制器中的 create 操作引发错误。

目前，如果我为 sub_test.measurement 输入非数字值，Rails 不会创建 Test 或 SubTest 对象（期望的行为）。但是由于某种原因没有抛出错误，并且 Test 控制器触发了 create.js.erb 部分。

我的印象是 sub_test.measurement 的数值验证实际上应该发生在测试模型中，但我不确定如何编写一个自定义验证方法来测试数值。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:22:05.270

知道了。我需要在我的测试控制器中指定一个 _error.js.erb 部分。

```
def create
 respond_to do |format|
  if @test.save
   flash.now[:notice] = "Test Created"
   format.html { redirect_to(@test) }
   format.xml  { render :xml => @test, :status => :created, :location => @test }
   format.js

 else
  flash.now[:error] = "[Error] Test Not Created Because: #{@test.errors.full_messages.join(", ")}"
  format.html { render :action => "new" }
  format.xml  { render :xml => @test.errors, :status => :unprocessable_entity }
  format.js { render :partial => 'error' }
 end
end 
```

在错误部分中，我只是附加了我的#messages div（因为我正在通过 ajax 提交表单。）

# c# - C#求解二次方程组

> ID：14365915
> 
> 赞同：2
> 
> 时间：2013-01-16T19:09:47.260
> 
> 标签：c#, equation

你如何解决这种类型的方程？

```
a *X + b * Y + c *Z = q
d *X + e * Y + f *Z = w
X *X + Y * Y + Z *Z = z 
```

我们正在寻找 X,Y,Z。如果不是最后一行中的正方形，则可以将其作为典型的线性方程求解，例如使用 Dot Numerics 中的线性方程或编写高斯消元法。
但是我该如何解决这个问题？另外，您知道 .NET 中的任何库可以解决该等式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T14:24:36.650

这可以看作是 2 个平面和一个球体的一组方程。解决方案找到 2 个平面（一条线）的交点，然后找到该线与球体的交点。

可能有 0、1 或 2 个唯一解。

代码是 C，但我认为 OP 可以很容易地转换为 c#

```
// Eq1: a *X + b * Y + c *Z = q
// Eq2: d *X + e * Y + f *Z = w
// Eq3: X *X + Y * Y + Z *Z = z
typedef struct {
  double x,y,z,s;
} plane_t;

typedef struct {
  double x,y,z;
} point_t;

int Interection_PlanePlaneSphere(point_t XYZ[2], const plane_t *abc, const plane_t *def, double radius) {
  // Find intersection of 2 planes
  // V = abc cross def
  point_t V;  // This is really 3D vector, not a point
  V.x = abc->y*def->z - abc->z*def->y;
  V.y = abc->z*def->x - abc->x*def->z;
  V.z = abc->x*def->y - abc->y*def->x;
  // printf("V (%12g, %12g, %12g)\n", V.x, V.y, V.z);

  // Assume both planes go through z plane, e.g. z = 0 and V.z != 0
  // Code could be adapted to not depend on this assumption.
  // abc->x*P.x + abc->y*P.y = abc->s
  // def->x*P.x + def->y*P.y = def->s
  double det = abc->x*def->y - abc->y*def->x;

  // if Planes are parallel ...
  // Code could be adapted to deal with special case where planes are coincident.
  if (det == 0.0) return 0;  // 
  point_t P;
  P.x = ( abc->s*def->y - def->s*abc->y)/det;
  P.y = (-abc->s*def->x + def->s*abc->x)/det;
  P.z = 0.0;
  // L(t) = P + V*t = intersection of the 2 planes
  // printf("p (%12g, %12g, %12g)\n", P.x, P.y, P.z);

  if (radius < 0) return 0; // bad sphere
  // Find where L(t) is on the sphere, or |L(t)| = radius^2
  // (P.x - V.x*t)^2 + (P.y - V.y*t)^2 + (P.z - V.z*t)^2 = radius^2
  // (V.x^2 + V.y^2 + V.z^2)*t^2 - 2*(P.x*V.x + P.y*V.y + P.z*V.z) + (P.x^2 + P.y^2 + P.z^2) = radius^2;
  // Solve quadratic
  double a, b, c;
  a = V.x*V.x + V.y*V.y + V.z*V.z;
  b = -2*(P.x*V.x + P.y*V.y + P.z*V.z);
  c = P.x*P.x + P.y*P.y + P.z*P.z - radius*radius;
  // printf("abc (%12g, %12g, %12g)\n", a, b, c);
  det = b*b - 4*a*c;
  if (det < 0) return 0; // no solutions
  det = sqrt(det);
  double t;
  t = (-b + det)/(2*a);
  XYZ[0].x = P.x + t*V.x;
  XYZ[0].y = P.y + t*V.y;
  XYZ[0].z = P.z + t*V.z;
  if (det == 0.0) return 1;
  t = (-b - det)/(2*a);
  XYZ[1].x = P.x + t*V.x;
  XYZ[1].y = P.y + t*V.y;
  XYZ[1].z = P.z + t*V.z;
  return 2;
}

void Test() {
  plane_t abcq = {2, -1,  1, 5};
  plane_t defw = {1,  1, -1, 1};
  double z = 100;
  point_t XYZ[2];
  int result = Interection_PlanePlaneSphere(XYZ, &abcq, &defw, sqrt(z));
  printf("Result %d\n", result);
  int i=0;
  for (i=0; i<result; i++) {
    printf("XYZ[%d] (%12g, %12g, %12g)\n", i, XYZ[i].x, XYZ[i].y, XYZ[i].z);
  }
  // Result 2
  // XYZ[0] (           2,      5.41014,      6.41014)
  // XYZ[1] (           2,     -8.41014,     -7.41014)
} 
```

# ruby-on-rails - Rails - 根据数据库设置为模块中的某些控制器添加范围

> ID：14365922
> 
> 赞同：0
> 
> 时间：2013-01-16T19:09:59.227
> 
> 标签：ruby-on-rails, scopes

我有一个 API。在那个 api 中是一个基本控制器，所有其他控制器都从它继承。basecontroller 处理身份验证以及 API 是否打开等。

有用户，用户可以属于一个组。用户表有一个 group_id 列。

我正在尝试引入一项新功能，即在设置页面上选择管理员控制从哪些组显示哪些用户。如果选择了某个选项，则 api 应仅显示该组中的用户。

我可以进入每个控制器（对于几个不同的任务中的每一个都有一个控制器 - 获取所有用户信息，只有 active_users ids，单个用户信息等）并将额外的语句添加到每个

```
if !settings.api_group.nil?
  #add the additional where("group_id = ?, settings.group_id) 
```

但这似乎是在重复自己（在 8 个不同的地方做）

有没有办法向 basecontroller 添加一些内容：

如果此设置选项不为零，则仅返回该组中的用户信息

?

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:26:28.623

您可以向 BaseController 添加一个方法，并在每个应具有此限制的操作中调用它。像这样的东西：

在 base_controller.rb 中：

```
protected

def filtered_users
  if settings.api_group
    User.where(:group_id => settings.group_id)
  else
    User.scoped
  end
end 
```

并在从它继承的控制器中：

```
def index
  @users = filtered_users
end 
```

这样，您只需在一个地方定义过滤。如果以后需要更改，您只需在一处更改即可。因为实际上返回一个关系，您可以通过添加附加子句等`filtered_users`来继续更改查询，如下所示：`.where`

`@users = filtered_users.joins(:posts).where('posts.created_at > ?', 1.week.ago)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:37:07.973

仅供参考，我的回答正是我认为它可能必须在最初的帖子中。我希望有一个更干燥的解决方案，但我最终做了这样的事情：

在用户模型中

```
def find_in_api_group
  # NOTE settings.api_group is a string => "1,2,4"
  if settings.api_group.nil? || settings.api_group.blank?
    where("") # THERE HAS TO BE BETTER WAY OF SAYING THIS WITHOUT INTERRUPTING THE CHAIN
  else
    where("group_id IN (?)", settings.api_group)
  end
end 
```

在各种控制器中

```
user = User.find_in_api_group 
#then chain various error tests and additional activeRecord statement 
```

# android - 使用 ViewPager 引用片段中的活动

> ID：14365925
> 
> 赞同：0
> 
> 时间：2013-01-16T19:10:12.063
> 
> 标签：android, android-fragments, android-viewpager

这是我第一次尝试实现`ViewPager`. 我的应用程序基本上有一个列表和详细信息页面，我希望用户能够在详细信息之间滑动。详细信息基于我从列表页面传入的 ID。问题是我正在调用`getActivity()`详细信息片段，该片段返回为空。就像我说的，我是新手，`ViewPager`所以这可能很明显：

清单片段.class：

```
public class ListingFragment extends SherlockFragmentActivity
{
    private ViewPager mViewPager;  
    private MyFragmentPagerAdapter mMyFragmentPagerAdapter; 
    private static List<Fragment> fragments;
    public int Id = 0;

    @Override
    public void onCreate(final Bundle icicle)
    {    
        super.onCreate(icicle);

        setContentView(R.layout.main);

        mViewPager = (ViewPager)findViewById(R.id.viewpager);  
        mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());  
        mViewPager.setAdapter(mMyFragmentPagerAdapter);

        DetailsFragment df1 = new DetailsFragment();
        df1.Id = 1;
        df1.DisplayItems();
        fragments.add(lf);

        DetailsFragment df2 = new DetailsFragment();
        df2.Id = 2;
        df2.DisplayItems();
        fragments.add(lf);
    }

    private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {  

        public MyFragmentPagerAdapter(FragmentManager fm) {  
             super(fm);  
        }  

        @Override  
        public Fragment getItem(int index) {  
            return fragments.get(index);
        }  

        @Override  
        public int getCount() {  
             return 2;  
        }  
   }
} 
```

DetailsFragment.class

```
public class DetailsFragment extends SherlockFragmentActivity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onActivityCreated(final Bundle icicle)
    {    
        super.onActivityCreated(icicle);
    }

    private void DisplayItems()
    {
        PreferenceManager.getDefaultSharedPreferences(getActivity()).getBoolean("value", false);
        ...
    }
} 
```

**更新**

我已经更新了我的代码以使用静态`newInstance`方法和 a`Bundle`将 id 传递给详细信息片段。

清单片段.class：

```
public class ListingFragment extends SherlockFragmentActivity
{
    private ViewPager mViewPager;  
    private MyFragmentPagerAdapter mMyFragmentPagerAdapter; 
    private static List<Fragment> fragments;
    public int Id = 0;

    @Override
    public void onCreate(final Bundle icicle)
    {    
        super.onCreate(icicle);

        setContentView(R.layout.main);

        mViewPager = (ViewPager)findViewById(R.id.viewpager);  
        mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());  
        mViewPager.setAdapter(mMyFragmentPagerAdapter);

        DetailsFragment df1 =  DetailsFragment.newInstance(1);
        fragments.add(df1);

        DetailsFragment df2 =  DetailsFragment.newInstance(2);
        fragments.add(df2);
    }

    private static class MyFragmentPagerAdapter extends FragmentPagerAdapter {  

        public MyFragmentPagerAdapter(FragmentManager fm) {  
             super(fm);  
        }  

        @Override  
        public Fragment getItem(int index) {  

            return fragments.get(index);
        }  

        @Override  
        public int getCount() {  
             return 2;  
        }  
   }
} 
```

DetailsFragment.class

```
public class DetailsFragment extends SherlockFragmentActivity
{
    private int detailId;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);         
    }

    @Override
    public void onActivityCreated(final Bundle icicle)
    {    
        super.onActivityCreated(icicle);
    }

    public static DetailsFragment newInstance(int id) {

        DetailsFragment lf = new DetailsFragment();
        Bundle bundle = new Bundle();
        bundle.putInt("id", id);
        lf.setArguments(bundle);
        return lf;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.listing, container, false);
        detailId = getArguments().getInt("id");
        DisplayItems();

        return view;
    }

    private void DisplayItems()
    {
        PreferenceManager.getDefaultSharedPreferences(getActivity()).getBoolean("value", false);
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:16:41.903

您不应该设置变量和调用与此类活动初始化有关的方法。`Id`应该使用静态方法设置`setArguments(...)`并使用静态`newInstance(...)`方法来实例化您的片段。您应该`displayItems()`在`onCreateView(...)`Fragment 内部调用，而不是从附加的 Activity 调用。

有关更多信息，请参阅有关 Fragments 的官方 Android 指南。您绝对应该阅读整个内容。 [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# tfs - Team Foundation Server 2010 不支持我的 .tfignore 文件

> ID：14365929
> 
> 赞同：5
> 
> 时间：2013-01-16T19:10:44.800
> 
> 标签：tfs

这正是我的 .tfignore。它位于分支的根目录中并提交给 TFS，但它永远不会被兑现。我想我在阅读[TechNet 关于 .tfignore 文件的文章时](http://msdn.microsoft.com/en-us/library/ms245454.aspx#tfignore)遗漏了一些我不清楚的语法细节，但是什么？

```
### Team Foundation Server Source Control Ruleset Overrides for the Web Project
### These are created to ensure the proper files for the BEC Website end up
### under control.

## INCLUSIONS
# It is truly silly that VS excludes "Debug"...
!debug

# Include any binaries from sources, because they're all third party...
\sources\*.exe

## EXCLUSIONS
# Exclude site-specific tmp, cache and log folders...
wwwroot\administrator\cache
wwwroot\administrator\log
wwwroot\cache
wwwroot\log
wwwroot\tmp 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T19:22:11.227

您可能不会错过任何语法细节，[.tfignore 是 VS2012 中的一个新功能，似乎也需要 TFS2012](http://social.msdn.microsoft.com/Forums/en-CA/tfsgeneral/thread/7fe11e31-0d0b-42ed-ae4f-32de86a65c78)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T16:29:12.033

我不知道这是否会算作一个答案，但我的 .tfignore 文件似乎只在签入单个项目时才被考虑在内，如果我从解决方案中签入它会被完全忽略。我已经在几台机器上测试了它，并看到了相同的模式。因此，我必须让我的团队在进行完整解决方案签入或仅签入单个项目时手动检查并排除文件。两者都是可怕的解决方法，但目前我还没有找到更好的解决方案。

# c++ - Allegro 4.2.3 使用 Visual C++ 2010 Express 创建静态/发布版本以在其他 Windows 计算机上运行

> ID：14365930
> 
> 赞同：1
> 
> 时间：2013-01-16T19:10:54.530
> 
> 标签：c++, allegro

我已按照以下链接中的说明成功安装了 allegro 4.2.3，一切正常：

[http://blog.hamidnazari.com/2010/07/21/installing-allegro-on-visual-cpp-express-2010/](http://blog.hamidnazari.com/2010/07/21/installing-allegro-on-visual-cpp-express-2010/)

关于上面链接的教程，我最终偏离的唯一一件事是，我选择了 Windows 应用程序，而不是第三个图形示例中所示的控制台应用程序（注意在 Win32 控制台应用程序或 Win32 项目之间进行选择，如图所示第二个图形示例，到目前为止我发现没有明显的区别）。

选择第三个图形示例中所示的 Windows 应用程序，至少对我来说，只是导致不需要在我所有的 Allegro 程序中包含以下行：#define USE_CONSOLE。

请关于上面链接的教程和这篇文章的标题，有人可以通过回答以下问题来帮助我：

**问题开始：** 如何让我的 Allegro 游戏在其他使用 Windows 的计算机上运行，​​而其他计算机不需要安装 Visual C++ 2010 Express 和/或 Allegro 4.2.3 的预构建二进制版本（链接到在上述教程中）还需要在其他计算机上并在 Visual C++ 2010 Express 中链接/配置，也在上述教程中进行了描述。 **问题结束**

顺便说一句：对于任何有兴趣制作标准 C++ 程序（即不使用 Allegro 或其他各种库）的人来说，通过拥有一个完全独立的 .exe 文件（使用 Visual C++ 2010 Express 编译/构建）确实可以运行，这是一个很好的链接其他使用windows的电脑，如下：

[http://www.youtube.com/watch?v=AvrjQtFBJvk](http://www.youtube.com/watch?v=AvrjQtFBJvk)

感谢您花时间阅读这篇文章，我非常希望有人能够提供帮助。

加里。

**我对马修斯第一个答案的回复如下：**

嗨，马修，

我一直在谷歌上寻找你提到的各种元素，如何与我的帖子中的链接教程进行比较，该教程逐步解释了如何使用 Allegro 4.2.3 二进制文件配置 Visual C++ 2010 Express .

我想与您核实的第一件事是，Allegro.cc 站点上 4.4.2 部分和 4.2.3 部分中的所有二进制文件是否本质上都是预构建的二进制文件，因此最终将版本 4.4.2 配置为使用 VC++ 2010 原则上应该类似于配置 4.2.3 版（或者可能不是？）我已经下载了 4.4.2 版，可以看到确实有相同的 3 个文件夹，bin、include 和 lib。

这是在线教程的链接，该教程解释了如何使用 Visual C++ 2010 Express 逐步成功配置 Allegro 4.2.3：

[http://blog.hamidnazari.com/2010/07/21/installing-allegro-on-visual-cpp-express-2010/](http://blog.hamidnazari.com/2010/07/21/installing-allegro-on-visual-cpp-express-2010/)

通过上述教程中的步骤，我注意到您在下面列出的初始答案中的其他元素。（请注意，虽然本教程确实适用于版本 4.2.3，但在构建时仅选择发布选项而不是调试不会导致 .exe 文件在其他 Windows 计算机上工作（尽管发布文件夹中的 .exe 文件仍然在我的主计算机上运行），所以我想除了选择发布之外还有其他事情需要做。

**1) allegro-4.4.2-monolith-static-mt.lib** --- 这是否需要添加到链接器下拉列表中输入部分的附加依赖项中以进行调试和发布。（这与这部分配置的教程相比如何，即是否有任何其他附加依赖项）

**2) 静态链接时链接到所有各种 Win32 库**--- 我不知道如何链接到这些库。我对此有点困惑。

**3）#define ALLEGRO_STATICLINK** ---这是否意味着“ALLEGRO_STATICLINK”需要添加到 C/C++ 下拉列表中的预处理器部分，因为我读到其他人试图让它在 4.4.2 中正常工作

***总结一下：***考虑到到目前为止已经说过的所有内容，我想再次问我最初的问题，我将在以下两个部分中提出：

**第 1 部分）**在线教程需要如何添加/修改静态构建才能在其他计算机上使用 4.2.3 版本的 Windows 成功运行，这是否意味着选择发布构建选项，当然还有与分发时的.exe。

**第 2 部分）**如果使用 4.4.2 版本，在线教程需要如何添加/修改静态和动态构建才能成功运行。

第 1 部分或第 2 部分的教程类型答案对我和许多其他新手来说都很棒

非常感谢您阅读这篇文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:18:59.617

Allegro 4.2 已经过时了。您应该至少使用 4.4。它与 4.2（相同的 API）源代码兼容，并且仍然不时接收更新。Allegro 5 是现在所有活跃开发的地方，但它有一个全新的 API。我仍然强烈建议你看看它。

无论如何，要回答这个问题，是的，您需要静态链接。从这里获取二进制文件：

*   [https://www.allegro.cc/files/?v=4.4](https://www.allegro.cc/files/?v=4.4)

与`allegro-4.4.2-monolith-static-mt.lib`文件链接，并确保使用 /MT 开关（而不是 /MD）进行编译。`-static`方面意味着不需要 Allegro DLL 。该`-mt`标志表示不需要 C 运行时。

静态链接时，您还需要链接到所有各种 Win32 库。另外，请务必`#define ALLEGRO_STATICLINK`在您的项目设置中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T14:33:17.977

已经有一段时间了，但如果我没记错的话，有一个简单的方法可以做到这一点，尽管它可能不是最好的方法。只需向朋友发送一个小演示就很好。即使您只是在调试模式下构建，您也可以将游戏发送给其他人。将 allegro-4.2.2-monolith-md.lib 文件（其名称类似，但可能不完全如此）复制/粘贴到项目的 Debug 文件夹（.exe 旁边）。您可能还需要 MSVCR1000.lib 文件（或类似的文件。不记得确切的名称），但您必须在网上的某个地方找到它。

免责声明：我从未使用过如此完全旧版本的 Allegro，因此该解决方案可能并不完全适用。但是我在版本 5 和 5.6 之后使用 Allegro，所以我知道它适用于较新的版本。你应该只使用更新的版本，真的。

# ios - iOS：在 didSelectRowAtIndexPath 方法中解析所选行的 url

> ID：14365934
> 
> 赞同：1
> 
> 时间：2013-01-16T19:11:08.723
> 
> 标签：ios, pointers, types, nsxmlparser, didselectrowatindexpath

A. 是否可以/适合为 didSelectRowAtIndexPath 中的选定行初始化 NSXML 解析以填充该方法推送到的详细视图？我想将与所选项目的标题关联的 URL 解析为详细视图...

B. 如果是，那我该如何实现？我在以下小动物中有“afeed.title”：

```
NSXMLParser *urlParser = [[NSXMLParser alloc] initWithContentsOfURL:afeed.url]; 
```

afeed.url 上的警告行惊呼：“不兼容的指针类型将 'NSString *' 发送到类型为 'NSURL *' 的参数”

afeed 是由此创建的：

```
ArticleGroupLink *afeed = [array objectAtIndex:indexPath.row]; 
```

ArticleGroupLink 是一个包含标题（在 cellForRowAtIndexpath 方法中使用标题）和 url（字符串和@属性）的类，它将它们合成。

让我知道我需要分享的其他任何内容：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:07:48.333

正如编译器试图告诉你的那样，它期待一个`NSURL`对象，但你却给了它一个`NSString`对象。

因此，您可以尝试通过执行以下操作将您的 NSString 转换为 NSURL：

```
NSString *urlString = afeed.url;
NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

然后你可以这样做：

```
NSXMLParser *urlParser = [[NSXMLParser alloc] initWithContentsOfURL:url]; 
```

# mysql - SQL 查询加速

> ID：14365938
> 
> 赞同：0
> 
> 时间：2013-01-16T19:11:17.900
> 
> 标签：mysql, performance

我正在尝试从表中选择最后 N 个唯一关键字，该表具有以下结构：

```
id | keyword  | digit
1  | TEXT1    | 123
2  | TEXT2    | 125
...
3  | TEXT3    | 123 
```

带查询：

```
SELECT id, keyword FROM table 
WHERE digit = 123 
AND id IN 
(SELECT MAX(id) FROM table GROUP by keyword)
ORDER BY id DESC LIMIT 10 
```

当限制为 10 - 20 时，它需要不到一秒，但如果限制从 50 开始 - 查询时间从 3 秒或更多开始。

子选择是邪恶的。我是否可以加快这样的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T19:15:32.543

尝试这个

```
 SELECT MAX(id) max, keyword FROM table 
    WHERE digit = 123 
    GROUP BY keyword
    ORDER BY max DESC LIMIT 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:28:55.630

尝试这个

```
SELECT MAX(id) as id, keyword FROM table
    WHERE digit = 123
    GROUP BY keyword 
    ORDER BY id DESC LIMIT 10 
```

问候。

# git - 创建分支别名？

> ID：14365946
> 
> 赞同：49
> 
> 时间：2013-01-16T19:11:47.850
> 
> 标签：git, version-control, branching-and-merging, feature-branch

我正在研究从 starteam 切换到 Git。

目前，在starteam 中，我们使用具有特殊名称的“浮动视图”。这些浮动视图基本上像别名一样工作。因此，我们可以指定一个特定的别名来检出，我们将获得我们当前正在模型测试的分支。

这将如何在 Git 中完成？这基本上是我们的分支机构的组织方式：

**这些都是分支**

```
master (stable view)
   |  - Branch 2012.05.01
   |          | - Project 1
   |          | - Project 2
   |          | - model [floating view / alias to Branch 2012.05.01]
   |
   |  - Branch 2012.07.11   (these would also have various child views for projects)
   |  - Branch 2012.10.17 
```

（`Branch 2012.05.01`将`master`在模型测试完成时合并。）

在我们的自动化脚本 (ant) 中，为了运行我们的模型部署，我们只需从名为`model`. 这样，当我们更改我们正在模型测试的分支时，我们永远不必更改脚本，并且找出我们正在模型测试的视图就像找出`model`分支引用的分支一样容易。

有没有这样的方法可以在 Git 中做类似的事情？

澄清：

1.  我想要一个分支的别名。一个分支，而不是一个提交。
2.  `Branch 2012.05.01`表示打算在 2012.05.01 发货的分支，并不意味着 2012.05.01 时刻。
3.  我想要一个别名`Branch 2012.05.01`。`Branch 2012.05.01`是一个集成分支，它不断被修改。但我不想将其引用为`Branch 2012.05.01`，我想将其引用为`model`。这样，我可以将别名更改为`Branch 2012.07.11`，它将从该分支获取最新的代码，而无需更改任何结帐代码脚本。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-06-21T13:37:08.970

请看这里：[https ://stackoverflow.com/a/549949/606723](https://stackoverflow.com/a/549949/606723)

> 您可以按照 Greg 的建议重命名主分支主干，或者您也可以创建一个主干作为对主分支的符号引用，以便 git 和 svn 用户都拥有他们习惯的“主”分支。
> 
> ```
> git symbolic-ref refs/heads/trunk refs/heads/master 
> ```
> 
> 请注意，主干不是一等公民。如果您签出trunk 并执行git status，您实际上将在master 上，但是您可以在所有使用分支名称（日志、合并等）的地方使用trunk 命令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T19:14:35.320

## Git 不支持分支的别名。

这意味着您将不得不依赖脚本中的变量来制作 model="branch.2012.10.17" 或类似的东西。然后你的脚本会做这样的事情：

```
git checkout $model 
```

* * *

我将把这个答案的其余部分留在这里，因为我们在这个讨论中来自哪里：

可以在这里找到关于分支策略的非常复杂的讨论：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

具体来说，看一下集成分支和发布候选分支的作用。这可能是您正在寻找的。

将 git 视为拍摄工作目录快照的东西，而不是文件夹的历史记录。

progit.org/book 解释了存储历史的有向无环图。所有引用都只是指向其中节点的东西。这应该阐明您希望如何构建您的工作流程。

制作一个开始标签 - version2.1。从那里制作您的 int-version2.1 （为简洁起见，使用 nummers 而不是日期）。您开始的任何工作，都从版本 2.1 标记开始。将工作合并到 int-version2.1 中。其他人也会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:17:32.627

如果您需要每个功能分支 - Adam Dymitruk 的答案是正确的，但是如果您需要保存链接分支 - 特定状态（基于时间），无需更改它们，您可以使用 git 标签。

我使用标签来表示每个产品版本的商店状态。

# google-chrome - @font-face font-size 在某些浏览器中渲染得比其他浏览器大

> ID：14365948
> 
> 赞同：0
> 
> 时间：2013-01-16T19:11:53.247
> 
> 标签：google-chrome, firefox, font-face, chromium, font-size

我在我的网站上创建了一个使用自定义字体的标题，并应用了像素大小（61）。由于某些未知的（对我而言）原因，字体在 ie9 和 tor 中的渲染大小几乎是 chromium 和 firefox 的两倍。没有其他在我看来相关的 css 设置（例如，没有 font-weight:bold 或类似设置）。其他字体看起来在浏览器之间呈现接近或完全相同的大小。

我已经用尽了我的想法，这是什么原因..如果有人知道，我将不胜感激。您可以在此处查看标题：http: [//www.infiniteeureka.com](http://www.infiniteeureka.com) - 奶油字“infinite eureka”是焦点；多色较小的单词在两种浏览器中都可以根据需要呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:33:51.157

Firefox 存在呈现 Web 字体的已知问题。我真的没有时间研究你的问题，但他们有 Mozilla 特定的 CSS 来处理这些错误，Firefox 中的字体功能设置。我将从这里开始阅读：[https ://developer.mozilla.org/en-US/docs/CSS/font-feature-settings?redirectlocale=en-US&redirectslug=CSS%2F-moz-font-feature-settings](https://developer.mozilla.org/en-US/docs/CSS/font-feature-settings?redirectlocale=en-US&redirectslug=CSS%2F-moz-font-feature-settings)

# android - 在 google maps v2 api for android 上为标记添加标识

> ID：14365951
> 
> 赞同：31
> 
> 时间：2013-01-16T19:12:03.213
> 
> 标签：android, api, google-maps-markers, google-maps-android-api-2

好吧，我的应用程序上的每个标记都将代表一个用户，因此当我单击信息窗口以从 Internet 获取其数据时，我需要识别该用户，并且由于显而易见的原因，我无法通过名称识别他们。是否可以向标记对象添加额外的属性？谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-19T10:41:30.633

你可以做一个`HashMap<Marker, User>`

检查本教程： [http ://bon-app-etit.blogspot.be/2012/12/add-informationobject-to-marker-in.html](http://bon-app-etit.blogspot.be/2012/12/add-informationobject-to-marker-in.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T20:06:37.743

> 是否可以向标记对象添加额外的属性？

不是。`Marker`_ `final`此外，`Marker`您创建的对象很快就会消失，因为它们仅用于某些 IPC 到 Google Play 服务应用程序。`Marker`你得到的对象`OnInfoWindowClickListener`似乎是一个重组的副本。

> 我在片段字段中有一个字幕，所以这不是一个选项。

是的。将字幕存储在其他地方，并将您的用户密钥放在字幕中。当您`InfoWindow`从中渲染时`InfoWindowAdapter`，拉入字幕。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-26T20:46:08.967

我认为通过地图保持对标记的强烈引用不是一个好主意。由于您无论如何都使用自定义窗口适配器来呈现内容，因此您可以“滥用” MarkerOptions 上的 snippet() 或 title() 来存储您的信息。它们都是字符串，因此取决于要存储的信息，您会稍微使用更多内存，另一方面，通过持有对标记的强引用，您可以避免内存泄漏。

此外，您还可以兼容 Maps 在停止和恢复期间管理其持久性的方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-03T17:54:08.710

这是我实施的一个稍微简单的解决方案。您所做的只是创建一个 InfoWindowAdapter，它将您想要在其构造函数中传递给窗口的内容。

```
class CustomWindowAdapter implements InfoWindowAdapter{
LayoutInflater mInflater;
private HashMap<Marker, Double> mRatingHash;

public CustomWindowAdapter(LayoutInflater i, HashMap<Marker, Double> h){
    mInflater = i;
    mRatingHash = h;
}

@Override
public View getInfoContents(Marker marker) {
     // Getting view from the layout file
    View v = mInflater.inflate(R.layout.custom_info_window, null);

    TextView title = (TextView) v.findViewById(R.id.tv_info_window_title);
    title.setText(marker.getTitle());

    TextView description = (TextView) v.findViewById(R.id.tv_info_window_description);
    description.setText(marker.getSnippet());

    RatingBar rating = (RatingBar) v.findViewById(R.id.rv_info_window);
    Double ratingValue = mRatingHash.get(marker);
    rating.setRating(ratingValue.floatValue());
    return v;
}

@Override
public View getInfoWindow(Marker marker) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

您对要传递到信息窗口的任何数据负责，但您可以在此处看到我正在传递评级的哈希值。只是一个原型，绝不是最好的解决方案，但这应该让任何人开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-26T00:01:38.203

我正在使用一个附加类将一些信息和功能与每个标记相关联。我不认为这是最好的方法，但它是一种选择。特别是如果您想要的不仅仅是与每个地图标记相关联的信息。这是我用于此的基本结构。

```
//   Make an array list of for all of your things
ArrayList<Thing> things;

class Thing {
    long thing_key;
    String thing_string;
    int thingRadius;
    Double coord_long;
    Double coord_lat;
    Marker marker;
}

//    Then to use this to start your list.
things = new ArrayList<>();

//   Create the thing object and save all the data
thing = new Thing();
thing.marker = thingMarker;
thing.thing_key = thing_key;
thing.thing_string = thing_string;
thing.radius = Integer.getInteger(thingRadius.getText().toString());

//    Save the thing to the thing ArrayList
things.add(thing); 
```

# c# - 在 .NET MVC 4 (Web API) 中，如何拦截对控制器的请求并更改其 Content-Type？

> ID：14365953
> 
> 赞同：3
> 
> 时间：2013-01-16T19:12:20.967
> 
> 标签：c#, .net, rest, asp.net-mvc-4

感谢您的关注！

## 背景

我正在为一家公司编写一个 API 层，供不同的应用程序和外部消费者使用。

在消费端，大多数消费者会使用 jQuery 通过 ajax 调用服务`$.post()`；然而，Internet Explorer 让我们的生活更具挑战性（当然！）。对于 IE，我必须使用该`XDomainRequest`对象，因为 IE 不会运行 jQuery `$.post()`，而且如果我使用 IE `XMLHttpRequest()`，我会收到一条不可接受的安全消息（再次——当然！）：

![在此处输入图像描述](../Images/028a25b4c9cf2deeb8e9acea437e8296.png)

否则，`XMLHttpRequest()`工作正常。

我正在使用 C#、.NET MVC 4 (WebApi)

# 问题

问题是`XDomainRequest`不允许您设置`Content-Type`标头，并且始终默认为`text-plain`MVC 4 WebApi 控制器将不接受的默认值（再一次 - 当然！！）。

# 问题

如何拦截对我的控制器的请求，检测`text-plain`内容类型的存在并将它们动态更改为`text-json`内容类型？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T05:01:54.347

两天后，在这个线程中倾注文档和阅读我已经能够完成这项工作。所以如果我对解决方案的描述很差，请原谅我；这是我第一次回答这些类型的线程之一。因为我花了很长时间才找到问题，所以我认为值得拯救一些灵魂免于陷入同样的​​问题。

我的帮助来源来自[byterot](http://byterot.blogspot.com/search?q=delegatinghandler)的上述链接。

1.  我做的第一件事是创建一个**DelegatingHandler**。因此，在我的帮助文件夹或每个您想要创建一个类并将其命名为您想要的名称的地方。
    这是我的：

    ```
    public class ContentTypeHandler : DelegatingHandler
    {
        /** Check that this is an IE browser. */
        if ((request.Headers.UserAgent.ToString().IndexOf("MSIE", System.StringComparison.Ordinal) > -1))
        {
            MediaTypeHeaderValue contentTypeValue;
            if (MediaTypeHeaderValue.TryParse("application/json", out contentTypeValue))
            {
                request.Content.Headers.ContentType = contentTypeValue;
                request.Content.Headers.ContentType.CharSet = "utf-8";
            }
        }

        /** Return request to flow. */
        return base.SendAsync(request, cancellationToken)
           .ContinueWith(task =>
           {
                // work on the response
                var response = task.Result;
                return response;
           });
    } 
    ```

2.  最后认为你必须做的是在你的`Global.asax.cs`文件中调用处理程序`Application_Start()`：

    ```
    GlobalConfiguration.Configuration.MessageHandlers.Add(new ContentTypeHandler()); 
    ```

这就是我所做的一切，它奏效了。祝你好运，我希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T20:26:22.963

在 HTTP 堆栈中修改请求没有问题。它可以通过`DelegatingHandler`在到达控制器之前编写和注册您的自定义来完成。委托处理程序可以在游戏的早期处理此问题，因此您的请求将以您想要的形式到达控制器。它也可以是特定于路由的处理程序。 [http://msdn.microsoft.com/en-us/library/system.net.http.delegatinghandler.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.delegatinghandler.aspx)

您是否尝试过 $.ajax 而不是 $.post ？

# php - Content-Length 标头未在 Android 2.3 以上浏览器中获取

> ID：14365955
> 
> 赞同：0
> 
> 时间：2013-01-16T19:12:22.837
> 
> 标签：php, android, content-length

我有一个 hybrib 应用程序，其中一个简单的 php 页面将打开其中包含一些文件链接的内容，并且从我的 android 包装器中，我已经实现了文件的下载功能。

因此，为了方便用户，我在下载文件时显示了下载的长度和进度，因为我的应用程序服务器设置了一个内容长度标头来传递设备上的大小，但我面临的问题令人惊讶。文件长度在 Android 2.2 中运行良好。我得到了正确的内容标题，但在上面的 Android 2.3 中，我得到了较小文件的内容长度，但对于较大的文件，我什至没有得到标题字段。

```
con.getHeaderField("content-length"); 
```

在 Android 2.3 以上的情况下返回我 null 。

那么 2.3 以上的用户代理是否有大小限制，因为如果它在 2.2 中工作正常，则意味着服务器端没有问题，只有设备用户代理有问题。

**更新**

我已经尝试过使用不同大小的文件，并且在 Android 2.3 以上版本中它也可以正常工作，直到 60KB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:17:43.547

听起来客户端可能正在分块文件。检查是否存在以下标头：

```
Transfer-Encoding: chunked 
```

如果存在，则请求被分块，您将不会获得 Content-Length 标头。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Chunked_transfer_encoding 。](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)

# ruby-on-rails - has_one 和 embeds_one 有什么区别？

> ID：14365961
> 
> 赞同：0
> 
> 时间：2013-01-16T19:12:58.437
> 
> 标签：ruby-on-rails, mongoid

我注意到在[Mongoid 关系文档](http://mongoid.org/en/mongoid/docs/relations.html)中，它们同时引用了 has_one 和 embeds_one。这两件事有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:20:06.257

这些文档位于不同的集合中，关系为`has_one`。

否则，父文档`embeds_one`在其同一个集合中有子文档。

你可以看看[http://www.slideshare.net/mdirolf/mongodb-how-it-works](http://www.slideshare.net/mdirolf/mongodb-how-it-works)

我等着帮你！

问候！

# java - 理论：通过Web服务实现两系统集成

> ID：14365966
> 
> 赞同：0
> 
> 时间：2013-01-16T19:13:04.977
> 
> 标签：java, web-services, spring, integration

我有理论问题要问你们。最后，我正在处理作为 Web 应用程序公开的两个不同系统的集成。我到处阅读建议通过 3rd 方 Web 服务执行此操作，它是两个系统之间的一种连接器，它总是像这样的架构：
`system 1 <=> WebService <=> system 2`
而不是像
`system 1<=>system 2`
在两个系统中创建一个接口并直接连接不是更容易吗？谁能告诉我通过遵循 WS 方法我得到了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:09:48.153

如果您同时控制这两个系统，则可以链接这两个系统。如果你扮演积分器的角色，在这种情况下你必须成为中间人。

由于逻辑隔离，Spiting 系统（和集成）很好。第一个系统不必知道第二个系统，因此逻辑（和维护）非常简单。

一本关于集成模式的好书是[Enterprise Integration Patterns](http://www.eaipatterns.com/)。您还应该阅读有关[Apache Camel](http://camel.apache.org/)的信息。

# wcf - 从 Windows Azure 辅助角色转发 HttpWebRequest - 本地 wcf

> ID：14365967
> 
> 赞同：1
> 
> 时间：2013-01-16T19:13:10.280
> 
> 标签：wcf, azure, azure-worker-roles, azureservicebus, azure-servicebusrelay

使用 Windows Azure 服务，并从本地（防火墙后面、NAT ....）公开 WCF 服务终结点，是否可以让 Azure 中的工作人员角色可以使用 Intranet 站点？

基本上，我希望能够从 azure 中的工作角色向本地站点发出 HttpWebRequest 请求，例如 http://intranet.domain.net。这可能吗？或者我怎样才能使它成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:53:46.493

这是开箱即用的。你有几个选择（非平凡的）

1）您将需要构建一个自定义“代理”来接收来自服务总线的请求（通过 WebHttpRelayBinding），然后使用 HttpWebRequest 或其他 HTTP 客户端将请求转发到“本地”IIS。请注意，这是大量工作，需要对极端情况（例如身份验证场景）进行彻底测试。此外，它不适用于“https”上的自定义域名（例如intranet.domain.net）。

2) 或者，您可以将内容/网站和业务数据/逻辑拆分为单独的部分。您可以直接在公共站点上托管内容。然后，此公共站点可以通过 NetTcpRelayBinding（或 *HttpRelayBinding 之一）与 Intranet 中的 Web 服务通信并执行业务逻辑或检索数据。

# ruby - Anchor \z 和 \G 如何在 Ruby 中工作？

> ID：14365969
> 
> 赞同：4
> 
> 时间：2013-01-16T19:13:30.747
> 
> 标签：ruby, regex, ruby-1.9.3

我正在使用 Ruby1.9.3。我是这个平台的新手。

从[文档](http://ruby.runpaint.org/regexps#anchors)中，我刚刚熟悉了`anchor`两个`\z`和`\G`。现在我稍微玩了一下`\z`，看看它是如何工作的，因为定义（*End*或*End of String*）让我感到困惑，我无法理解它的意思 - by `End`。所以我尝试了下面的小片段。但还是抓不住。

***代码***

```
irb(main):011:0> str = "Hit him on the head me 2\n" + "Hit him on the head wit>
=> "Hit him on the head me 2\nHit him on the head with a 24\n"
irb(main):012:0> str =~ /\d\z/
=> nil

irb(main):013:0> str = "Hit him on the head me 24 2\n" + "Hit him on the head >
=> "Hit him on the head me 24 2\nHit him on the head with a 24\n"
irb(main):014:0> str =~ /\d\z/
=> nil

irb(main):018:0> str = "Hit1 him on the head me 24 2\n" + "Hit him on the head>
=> "Hit1 him on the head me 24 2\nHit him on the head with a11 11 24\n"
irb(main):019:0> str =~ /\d\z/
=> nil
irb(main):020:0> 
```

每次我得到`nil`作为输出。那么计算是如何进行的`\z`呢？是什么`End`意思？- 我认为我的概念`End`对文档中的单词有任何错误。因此，任何人都可以帮助我了解发生的原因以及为什么会发生这种情况？

而且我也没有找到任何锚的例子`\G`。请你们提供任何示例来可视化如何`\G`在实时编程中使用？

**编辑**

```
irb(main):029:0>
irb(main):030:0*  ("{123}{45}{6789}").scan(/\G(?!^)\{\d+\}/)
=> []
irb(main):031:0>  ('{123}{45}{6789}').scan(/\G(?!^)\{\d+\}/)
=> []
irb(main):032:0> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T19:19:08.017

`\z`匹配输入的结尾。您正在尝试查找输入末尾出现 4 的匹配项。问题是，输入末尾有一个换行符，所以你找不到匹配项。`\Z`匹配输入的末尾或输入末尾的换行符。

所以：

```
/\d\z/ 
```

匹配“4”：

```
"24" 
```

和：

```
/\d\Z/ 
```

匹配上例中的“4”和以下示例中的“4”：

```
"24\n" 
```

查看这个问题，例如使用`\G`：
[Examples of regex matcher \G (The end of the previous match) in Java 会很好](https://stackoverflow.com/questions/2708833/examples-of-regex-matcher-g-the-end-of-the-previous-match-in-java-would-be-ni)

* * *

**更新：现实世界的用途`\G`**

我想出了一个更真实的例子。假设您有一个由无法很好预测的任意字符分隔的单词列表（或者列出的可能性太多）。您希望匹配这些单词，其中每个单词都是其自己的匹配项，直到某个特定单词，之后您不想再匹配任何单词。例如：

> foo,bar.baz:buz'fuzz*hoo-har/haz|fil^bil!bak

你想匹配每个单词直到'har'。您不想匹配 'har' 或后面的任何单词。您可以使用以下模式相对轻松地执行此操作：

```
/(?<=^|\G\W)\w+\b(?<!har)/ 
```

[红色的](http://rubular.com/r/txPGpr8tOn)

第一次尝试将匹配输入的开头，然后是零个非单词字符，然后是 3 个单词字符 ('foo')，然后是单词边界。最后，否定的lookbehind 确保刚刚匹配的单词不是'har'。

在第二次尝试时，匹配会在最后一场比赛结束时重新开始。匹配了 1 个非单词字符（',' - 尽管由于后视（这是一个零宽度断言）而未捕获它），然后是 3 个字符（'bar'）。

这种情况一直持续到匹配 'har' 为止，此时会触发否定后视并且匹配失败。因为所有匹配都应该“附加”到最后一个成功的匹配，所以不会匹配其他单词。

结果是：

```
foo
bar
baz
buz
fuzz
hoo 
```

如果您想反转它并在“har”之后包含所有单词（但同样不包括“har”），您可以使用如下表达式：

```
/(?!^)(?<=har\W|\G\W)\w+\b/ 
```

[红色的](http://rubular.com/r/khxeACl9EH)

这将匹配一个以 'har' 开头的单词或最后一个匹配的结尾（除非我们必须确保不匹配输入的开头）。比赛名单如下：

```
haz
fil
bil
bak 
```

如果你确实想匹配 'har' 和所有以下单词，你可以使用这个：

```
/\bhar\b|(?!^)(?<=\G\W)\w+\b/ 
```

[红色的](http://rubular.com/r/0sEmSvkXLA)

这会产生以下匹配：

```
har
haz
fil
bil
bak 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T19:18:11.203

听起来您想知道 Regex 是如何工作的？或者你想知道 Regex 如何与 ruby​​ 一起工作？

检查这些。

[正则表达式类描述](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

[正则表达式教练](http://www.weitz.de/regex-coach/)- 非常适合测试正则表达式匹配

[正则表达式备忘单](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)

我理解 \G 是一个边界匹配字符。所以它会告诉下一场比赛在最后一场比赛结束时开始。也许因为你还没有进行匹配，所以你不能有第二个。

[这](http://msdn.microsoft.com/en-us/library/h5181w5w.aspx#Contiguous)是我能找到的最好的例子。它不是红宝石，但概念应该是相同的。

我收回它，[这](https://stackoverflow.com/a/3649054/1549155)可能更有用

# android - 游标错误的终结

> ID：14365971
> 
> 赞同：0
> 
> 时间：2013-01-16T19:13:38.830
> 
> 标签：android

我试图关闭 db 中的游标，但随后它说对已关闭的游标对象的无效调用，因为我得到了一个游标作为回报......

```
 Cursor getDB(String date) {
    int idate = Integer.parseInt(date.substring(0, 2)) * 1000000
            + Integer.parseInt(date.substring(3, 5)) * 10000
            + Integer.parseInt(date.substring(6));

    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getReadableDatabase();

    Cursor cursor = ourDatabase.rawQuery("SELECT * FROM " + DATABASE_TABLE
            + " WHERE " + KEY_DATE + " = " + idate,// +
                                                    // " ORDER BY "
                                                    // +
                                                    // KEY_NAME
                                                    // +
                                                    // " ASC",
            null);
    if (cursor != null && cursor.getCount() > 0)
        return cursor;

    return null;
} 
```

&这就是我如何使用我得到的光标作为回报

我将它们初始化为

```
adapter = new MyAdapter1(Day_Book.this, ourCursor, false);
adapter2 = new MyAdapter2(Day_Book.this, ourCursor2, false);
case R.id.bShowDB:
        db = new DB(Day_Book.this);
        ourCursor = db.getDB(et1.getText().toString());
        adapter.changeCursor(ourCursor);
        adapter2.changeCursor(ourCursor);
        //ourCursor.close();
        db.close();
        lv1.setAdapter(adapter);
        lv2.setAdapter(adapter2);
        //ourCursor.close();
        break; 
```

这是我得到的错误..

```
01-17 00:12:41.134: E/Cursor(8724): Finalizing a Cursor that has not been deactivated or closed. database = /mnt/sdcard/JournalDB.db, table = null, query = SELECT * FROM    Contains_all_the_entries_of_an_year_of_a_particular_company WHERE  date = 17012013
01-17 00:12:41.134: E/Cursor(8724): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
01-17 00:12:41.134: E/Cursor(8724):     at android.database.sqlite.SQLiteCursor.<init>(SQLiteCursor.java:212)
01-17 00:12:41.134: E/Cursor(8724):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
01-17 00:12:41.134: E/Cursor(8724):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1454)
01-17 00:12:41.134: E/Cursor(8724):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1424)
01-17 00:12:41.134: E/Cursor(8724):     at com.balance.start.JournalDB.getDayBook(DB.java:232)
01-17 00:12:41.134: E/Cursor(8724):     at com.balance.start.Day_Book.onClick(Book.java:93)
01-17 00:12:41.134: E/Cursor(8724):     at android.view.View.performClick(View.java:2408)
01-17 00:12:41.134: E/Cursor(8724):     at android.view.View$PerformClick.run(View.java:8816)
01-17 00:12:41.134: E/Cursor(8724):     at android.os.Handler.handleCallback(Handler.java:587)
01-17 00:12:41.134: E/Cursor(8724):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-17 00:12:41.134: E/Cursor(8724):     at android.os.Looper.loop(Looper.java:123)
01-17 00:12:41.134: E/Cursor(8724):     at     android.app.ActivityThread.main(ActivityThread.java:4633)
01-17 00:12:41.134: E/Cursor(8724):     at java.lang.reflect.Method.invokeNative(Native Method)
01-17 00:12:41.134: E/Cursor(8724):     at java.lang.reflect.Method.invoke(Method.java:521)
01-17 00:12:41.134: E/Cursor(8724):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-17 00:12:41.134: E/Cursor(8724):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-17 00:12:41.134: E/Cursor(8724):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:22:36.157

嗯，您为两个不同的适配器设置了两次相同的光标：

```
adapter.changeCursor(ourCursor);
adapter2.changeCursor(ourCursor); 
```

也许这就是问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:28:30.950

删除**db.close();** 从你的开关盒。

在 onDestroy() 中执行此操作。

# sed - 使用 sed 将数字 0-9 转换为大列表中的十六进制值

> ID：14365976
> 
> 赞同：3
> 
> 时间：2013-01-16T19:14:06.020
> 
> 标签：sed, hex

我有一个 10,000,000 位的数字字符串。数字没有任何分隔，它们都像这样挤在一起（它是 pi 中前 10,000,000 位数字的长字符串）：

```
1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679 
```

我正在尝试使用 sed 将每个数字替换为十六进制颜色值。这是我的代码：

```
sed -e 's/0/#F5F5F5/' -e 's/1/#FFE4B5/' -e 's/2/#98FB98/' -e 's/3/#ADFF2F/' -e 's/4/#FF69B4/' -e 's/5/#BA55D3/' -e 's/6/#FF6347/' -e 's/7/#2E8B57/' -e 's/8/#8B4513/' -e 's/9/#000000/' < pi > pi2 
```

麻烦的是，sed 开始从我的十六进制代码替换中转换数字。我希望这些转换保持不变。我该如何防止呢？希望这足够清楚。

最终得到这样的结果：

```
#FFE#FF#FF634#2E#8B4513B57#000000B4B#BA55D34159#98FB986535897932384626433832795#F5F5F528841971693993751 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:50:57.750

如果您在开头添加一个 sed 命令并对每个现有命令进行小的更改，则可以坚持使用此方法：

```
sed -e 's/\(.\)/\1,/g' -e 's/0,/#F5F5F5/g' -e 's/1,/#FFE4B5/g'  ...  < pi > pi2 
```

1) 用逗号标记输入中的每个整数。

2）当你做替换时，只替换后面跟着逗号的整数，当你完成每个整数时删除逗号。

此外，作为错误修复，您还应该`g`在每次替换时添加选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:27:57.113

尝试：

```
LC_LANG=C sed -e 's/[0-9]/,_\1_,/g' <pi >pi2| sed -e 's/,_0_,/#F5F5F5/g;s/,_1_,/#FFE4B5/g .....' 
```

`,_`并`_,` 根据文件的内容更改“分隔符” 。（这样它就不会干扰内容）。也许您需要添加一个空格或 ; 在每个颜色代码之后？...也许偶尔也会换行^^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:50:28.860

```
$ cat tst.awk
BEGIN{
   codes="F5F5F5 FFE4B5 98FB98 ADFF2F FF69B4 BA55D3 FF6347 2E8B57 8B4513 000000"
   split(codes,hex)
   FS=""
}
{  for (i=1;i<=NF;i++)
      printf "#%s",hex[($i)+1]
   print ""
}

$ echo 1415 | awk -f tst.awk
#FFE4B5#FF69B4#FFE4B5#BA55D3

$ echo 1042 | awk -f tst.awk
#FFE4B5#F5F5F5#FF69B4#98FB98 
```

上面只是创建了一个数组，将数字映射到字符串中的代码，然后为输入中的每个数字打印数组中的字符串。awk 数组从 1 开始，而不是 0，因此将 1 添加到 $i。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:40:17.067

可能更容易使用`perl`：

```
perl -pe 'BEGIN{ $/=\1 }; s/0/#F5F5F5/ or s/1/#FFE4B5/ or s/2/#98FB98/ ...' 
```

# javascript - 使用 Javascript 插件作为客户端的 Web API 的身份验证和授权

> ID：14365981
> 
> 赞同：2
> 
> 时间：2013-01-16T19:14:19.703
> 
> 标签：javascript, asp.net-mvc, rest, authentication, asp.net-web-api

我正在编写一个 Web Api（使用 asp.net Web Api），并且自然希望客户端进行身份验证以使用该服务。

我希望编写一个使用 Api 的 Javascript 插件，然后将其简单地放入其他网站。

有没有一种安全的方法可以让插件进行身份验证？我不确定如何对传递给插件的任何信息保密。

我还希望原生应用程序使用 API，那么这是否规定了使用 cookie 的任何内容？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:18:12.663

> 有没有一种安全的方法可以让插件进行身份验证？

您将不得不在插件中嵌入用户名/密码，或者有一些字段来从用户那里获取该信息。

如果您选择嵌入用户名/密码，请考虑一些代码：

```
$.ajax({
        url: 'api/foo',
        type: 'GET',
        dataType: 'json',
        success: onSuccess,
        error: onError,
        beforeSend: setHeader
    }); 
```

注意`beforeSend`to的分配`setHeader`：

```
function setHeader(xhr) {    
    xhr.setRequestHeader('Authorization', 'Basic YXBpX3VzZXIxOjEyMzQxMjM0'); 
```

}

*请注意，您必须使用以下方法预先计算身份验证字符串*

现在，如果您想从用户那里提取用户名/密码，您可以这样做：

```
function setHeader(xhr) {            
        xhr.setRequestHeader('Authorization', make_base_auth($("#username").val(), $("#password").val()));
}

function make_base_auth(user, password) {
    var tok = user + ':' + password;
    var hash = Base64.encode(tok);
    return "Basic " + hash;
} 
```

# php - 一点代码片段解释

> ID：14365982
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:14:21.417
> 
> 标签：php

我正在阅读此[页面](http://www.itnewb.com/tutorial/Generating-Session-IDs-and-Random-Passwords-with-PHP)中作者生成随机令牌的代码。我理解除了“**第 29 行**”之外的所有内容，他将令牌分成块并用 md5 散列它们。我的问题是：

1）为什么他不散列整个令牌，而是将它们划分并散列成块？

2) 将它们散列成块会提供与散列未分割令牌相同的结果吗？

3）在“**第 36 行”**上，他还做了一些 我认为可以减少字符数的**子字符串。**这样做可以将散列令牌重建为原始的未散列令牌吗？

这是代码中最重要的部分::

```
# Array indice friendly number of chars; empty token string
    $numChars = count($chars) - 1; $token = '';

    # Create random token at the specified length
    for ( $i=0; $i<$len; $i++ )
        $token .= $chars[ mt_rand(0, $numChars) ];

    # Should token be run through md5?
    if ( $md5 ) {

        # Number of 32 char chunks
        $chunks = ceil( strlen($token) / 32 ); $md5token = '';

        # Run each chunk through md5
        for ( $i=1; $i<=$chunks; $i++ )
            $md5token .= md5( substr($token, $i * 32 - 32, 32) );

        # Trim the token
        $token = substr($md5token, 0, $len);

    } return $token;
} 
```

我希望有人能帮助我得到一点理解。谢谢

**编辑**

4) 为什么他在 substr() 函数中使用了 32？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T19:17:22.017

[`md5()`](http://ca2.php.net/manual/en/function.md5.php)是一种单向哈希算法。这意味着它无法重建为其原始形式。

为了回答问题 1，它创建了一个更安全的散列。公共字符串可以匹配到它们已知的哈希值。这有助于防止这种情况发生。

2) 不会。每次拆分都会给您不同的结果，在这种情况下，这是为了使其更安全。

您对数字 4 的编辑，第三个参数 (32) 设置返回字符串的长度。我建议你仔细阅读 PHP 手册。这是一个很好的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:23:06.563

1.  代码（可能）需要生成一个长度超过 32 个字符的令牌。
2.  不
3.  不
4.  因为 md5() 返回一个 32 个字符的字符串，并且他需要一次建立所需的令牌长度 32 个字符。

# joomla - Joomla 无法在某个类别中插入更多文章

> ID：14365987
> 
> 赞同：0
> 
> 时间：2013-01-16T19:14:44.820
> 
> 标签：joomla, joomla1.5

这次我遇到了一个关于 Joomla 1.5 网站的奇怪问题。

当我尝试将新文章（编号 3093）添加到菜单中的部分/类别然后尝试检索它时，当我调用单个文章页面时出现错误。我不能说这是一个 500 错误，因为在我的托管日志和 joomla 日志中我找不到任何错误痕迹。

即使当我卷曲文件时，我得到的也是一个空洞的回应。

我检查了 MYSQL 数据库，文章在这里，我尝试恢复数据库的备份，一切正常，但是当我尝试添加文章 > 3093 时，我无法检索它们。

我尝试更改主题，删除 mod_rewrite，调试 php 和 mysql，但一切正常，我认为控制器路由出了点问题。

任何人都可以提供帮助，任何想法或类似经验都可以得到赞赏

# backbone.js - 骨干客户端集合过滤

> ID：14365988
> 
> 赞同：1
> 
> 时间：2013-01-16T19:14:59.433
> 
> 标签：backbone.js

考虑一个主干应用程序，它有一个`select`类别列表，下面有一个文件表。所有文件，无论它们属于哪个类别，都在`App.collection.files`集合中。当用户选择一个新类别时，我想过滤表格以仅显示那些匹配的文件。

我想完全在客户端做到这一点。每次选择新类别时，我都不想从服务器获取新的文件列表。

我计划到一个`App.collection.files.where({category_id: xx})`内部`App.View.Files.render()`来完成过滤本身。

触发/响应事件以使其正常工作的最佳 Backbone-y 方式是什么？

我正在玩的一个想法是另一个集合，其中包含过滤后的文件，但不确定这是否是最好的方法。

```
App.View.FilesPage = Backbone.View.extend({
    template: App.utils.template('files-page'),
    className: 'container-fluid',
    initialize: function(){
        this.render();
    },
    render: function(){
        this.$el.html(this.template());

        this.$el.find('.categories').append(
            new App.View.Categories({collection:App.collection.categories}).el
        );

        this.$el.find('.files table').append(
            new App.View.Files({collection:App.collection.files}).el
        );

        return this;
    }
});

App.View.Categories = Backbone.View.extend({
    tagName: 'select',
    events: {
        'change': 'onChange'
    },
    initialize: function(){
        this.$el.attr('size', this.collection.length + 1);

        this.render();
    },
    render: function(){
        var option = function(value, text, isSelected){
            return $('<option></option>', {'value':value, 'text':text});
        };

        this.$el.html(option(0, 'All Documents'));

        this.$el.append(
            this.collection.invoke(function(){
                return option(this.get('category_id'), this.get('title'));
            })
        ).val(0);

        return this;
    },
    onChange: function(event){

    }
});

App.View.Files = Backbone.View.extend({
    tagName: 'tbody',
    initialize: function(){
        this.render();
    },
    render: function(){         
        this.$el.html(
            this.collection.invoke(function(){
                return new App.View.File({model:this}).el;
            })
        );

        return this;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:13:33.013

这是我想出的一个解决方案，表面上看起来不错。

代码更改在注释中标注。

欢迎对此解决方案的想法以及完全不同的解决方案。

```
App.View.FilesPage = Backbone.View.extend({
    template: App.utils.template('files-page'),
    className: 'container-fluid',
    initialize: function(){
        // CHANGE: Store application wide reference to 'Categories' model
        App.model.categories = new App.Model.Categories();

        this.render();
    },
    render: function(){
        this.$el.html(this.template());

        this.$el.find('.categories').append(
            new App.View.Categories({
                // CHANGE: Pass model into 'Categories' view
                model: App.model.categories,
                collection: App.collection.categories
            }).el
        );

        this.$el.find('.files table').append(
            new App.View.Files({collection:App.collection.files}).el
        );

        return this;
    }
});

App.View.Categories = Backbone.View.extend({
    tagName: 'select',
    events: {
        'change': 'onChange'
    },
    initialize: function(){         
        this.$el.attr('size', this.collection.length + 1);

        this.render();
    },
    render: function(){
        var option = function(value, text, isSelected){
            return $('<option></option>', {'value':value, 'text':text});
        };

        this.$el.html(option(0, 'All Documents'));

        this.$el.append(
            this.collection.invoke(function(){
                return option(this.get('category_id'), this.get('title'));
            })
        ).val(0);

        return this;
    },
    onChange: function(){
        // CHANGE: Update attribute within 'Categories' model
        this.model.set('category_id', this.$el.val());
    }
});

App.View.Files = Backbone.View.extend({
    tagName: 'tbody',
    initialize: function(){     
        this.collection.on('reset', this.render, this);
        // CHANGE: Listen for change on 'Categories' model, and re-render this view
        App.model.categories.on('change:category_id', this.render, this);

        this.render();
    },
    render: function(){
        this.$el.html(
            _.invoke(this.getFilteredFiles(), function(){
                return new App.View.File({model:this}).el;
            })
        );

        return this;
    },
    // CHANGE: Return a filtered set of models from collection, based on 'Categories' model attributes
    getFilteredFiles: function(){
        var categoryId = App.model.categories.get('category_id');

        if (categoryId!=0){
            return this.collection.where({'category_id': categoryId});
        }
        else{
            return this.collection.models;
        }
    }
}); 
```

# ios - 检查数组是否包含某个对象（iOS）

> ID：14365991
> 
> 赞同：18
> 
> 时间：2013-01-16T19:15:12.700
> 
> 标签：ios, objective-c, arrays, nsmutablearray

我需要检查某个数组是否包含某个对象，如果包含，则删除该对象。如果它没有那个对象，函数应该把它添加到数组中。问题是对象总是被添加，因为检查语句总是返回 false。

这是我当前的功能：

```
- (void) myFunction:(NSString *)parameter {

    if (![myMutableArray containsObject:parameter]) {

        [myMutableArray addObject:parameter];
        NSLog(@"%@ added", parameter);

    } else {

        [myMutableArray removeObject:parameter];
        NSLog(@"%@ deleted", parameter);

    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-16T19:23:26.873

containsObject 正在对数组中的每个对象调用 isEqual。您正在检查什么类型的对象？如果是自定义对象，覆盖并实现方法 isEqual。

我猜您正在尝试检查对象的值，但 containsObject 实际上是调用 isEqual 来比较对象的引用，而不是其实际值。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-04T05:45:56.933

```
if (![arrList containsObject:arrObj]) {
    // do something
} 
```

[包含对象：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/containsObject:)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-16T19:58:53.297

首先，您需要检查您在 this 中添加的类型数据或对象`myMutableArray`。根据您的方法，您正在检查已传递参数的字符串类型的可变数组`parameter`。您可能包含 int 或 float 数组。

您的数组中可能存在类型转换问题。如果您是 STRING 类型的数据，那么您可以使用其他类似的方法。

```
- (void) myFunction:(NSString *)parameter {

for (int i = 0 ; i < [myMutableArray count ] ; i++) {

    if (![[myMutableArray objectAtIndex:i] isEqualToString:parameter]) {
        [myMutableArray addObject:parameter];
        NSLog(@"%@ added", parameter);
    }
    else{
        [myMutableArray removeObject:parameter];
        NSLog(@"%@ deleted", parameter);
    }
} 
```

}

希望这会帮助你。如果您的对象不是 NSString 类型，那么您需要转换。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T19:21:04.790

您应该`isEqual:`在您的自定义类中实现。默认情况下，只有当它们共享相同的引用时，两个对象才是相同的。

还要确保在使用可变数组之前对其进行初始化。

**编辑**：

看来您的数组的变量名很可能输入错误。

*   `myMutableArray`
*   `myMutbaleArray`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T19:23:26.590

你可能忘记初始化你的`NSMutableArray`. 如果未初始化，您`addObject`将向对象发送消息，该`nil`对象无效，并且该数组永远不会包含您之前添加的内容...

当然，如果数组是`nil`，那么`contains`检查将始终返回 false。根据 Objective-C 文档：

> 如果该方法返回一个对象、任何指针类型、任何大小小于或等于 sizeof(void*) 的整数标量、float、double、long double 或 long long，则发送到 nil 的消息返回 0 .

0 为假

# jquery - asp.net + jquery ui 对话框

> ID：14365992
> 
> 赞同：1
> 
> 时间：2013-01-16T19:15:13.050
> 
> 标签：jquery, asp.net

我有一个带有一个文本框 (TextBox1) 和一个链接按钮 (LinkBut​​ton1) 的主页 (default.aspx)。

单击 LinkBut​​ton1 时，会打开一个 jquery ui 对话框，其中包含从页面 popup.aspx 加载的内容（使用 load 方法）。

Popup.aspx 包含 3 个链接按钮。

单击其中一个链接按钮时，我希望将链接按钮文本传递回 default.aspx 并插入到 TextBox1 中。

有什么解决办法？？？

**来源 DEFAULT.ASPX：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<link href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    function OpenDialog() {
        var $dialog = $('<div></div>').load('./Popup.aspx').dialog({ autoOpen: false, modal: true, title: "Please select value", close: function (ev, ui) { $(this).dialog('close'); } });
        $dialog.dialog("open");
    }
</script>
</head>
<body>
    <form id="form1" runat="server">
<div>
    <asp:TextBox ID="TextBox1" runat="server" Enabled="False"></asp:TextBox>
    <asp:LinkButton ID="LinkButton1" runat="server" OnClientClick="OpenDialog(); return false;">Open selector</asp:LinkButton>
</div>
</form>
</body>
</html> 
```

**源 POPUP.ASPX：**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:LinkButton ID="LinkButton1" runat="server">Value 1</asp:LinkButton>
    <asp:LinkButton ID="LinkButton2" runat="server">Value 2</asp:LinkButton>
    <asp:LinkButton ID="LinkButton3" runat="server">Value 3</asp:LinkButton>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:27:23.040

这里的技巧是从顶部窗口获取元素，这是通过使用**window.top.document**来完成的：

```
jQuery("#ElementID", window.top.document) 
```

然后因为您无法从每个页面知道如何呈现 id 以`ClientIDMode="Static"`对每个控件使用静态模式以在您编写它时保留它，例如：

```
<asp:TextBox ID="TextBox1" ClientIDMode="Static runat="server" Enabled="False"></asp:TextBox> 
```

因此，例如从对话框中，您可以将文本发送到主窗口，如下所示：

```
jQuery("#TextBox1", window.top.document).text(jQuery("#LinkButton1").text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:27:31.153

```
$(document).on('click', '[id^=LinkButton]', function(){
    $('#TextBox1').text($(this).text());
}); 
```

# ios - 为神经科学项目研究目的构建“DrawSomething”风格的应用程序

> ID：14365995
> 
> 赞同：2
> 
> 时间：2013-01-16T19:15:25.657
> 
> 标签：ios, objective-c, opengl-es, core-graphics

我正在尝试实现一个为 iPad (4) 绘制用户笔迹（光标位置）的视图。我看到了使用 OpenGL 的 Apple 示例代码，但是，有些部分我无法理解，所以我尝试使用核心图形来实现它。

```
 #import "PaintView.h"
    #include <stdlib.h>

    @implementation PaintView

    - (id)initWithCoder:(NSCoder *)aDecoder {
        self = [super initWithCoder:aDecoder];
        if(self) {
            //
            pointsToDraw = [[NSMutableArray alloc] init];
        }
        return self;
    }

    - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
    {
        UITouch *touch = [touches anyObject];
        NSLog(@"%@", touch);

        CGPoint location = [touch locationInView:self];
        CGPoint previousLocation = [touch previousLocationInView:self];

        Ink *ink = [[Ink alloc] initWithPoint:previousLocation toPoint:location time:touch.timestamp];

    //    UITouch *newTouch = [touch copy];
        [pointsToDraw addObject:ink];

        [self setNeedsDisplay];
    }

    - (void)drawLine:(CGPoint)startingPoint toPoint:(CGPoint)endingPoint context:(CGContextRef)context
    {
        // Drawing code
        CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);

        CGRect temp = CGRectMake(10, 10, 100, 100);
        // Draw them with a 2.0 stroke width so they are a bit more visible.
        CGContextSetLineWidth(context, 2.0);

        CGContextMoveToPoint(context, startingPoint.x,startingPoint.y); //start at this point

        CGContextAddLineToPoint(context, endingPoint.x, endingPoint.y); //draw to this point

        // and now draw the Path!

    }

    - (void)drawRect:(CGRect)rect
    {
        [super drawRect:rect];

       // [self drawLine:CGPointMake(10, 10) toPoint:CGPointMake(30, 30)];

        CGContextRef context = UIGraphicsGetCurrentContext();

        for (Ink *ink in pointsToDraw){

            [self drawLine:ink.point toPoint:ink.previousPoint context:context];
        }
        CGContextStrokePath(context);

    }

    @end 
```

问题是，每次触摸我都会绘制所有内容（ink 是一个包含两个 CGPOINT 和一个时间戳的类），过了一段时间，这大大减慢了速度，从而产生了大量的滞后。

我的目标是既能以精确的方式捕捉笔迹，又能精确地回放。

另一件需要考虑的事情是，我使用的是提供压力信息的手写笔，所以我需要能够在改变宽度时画出我的线条。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:09:39.367

不要将点存储在数组中，而是将它们存储在数组和 UIBezierPath 中。然后你只需要在drawRect:中绘制贝塞尔路径，而不是设置整个方案。

触控笔不提供压力信息——至少在 iOS 上是这样。iPhone 的电容式触摸屏不是电阻式的。改变宽度的标准算法是使用速度作为因素，并使用您填写的小三角形进行绘制以创建您的线条。

有趣的！这是一篇相关文章： http: [//www.nearinfinity.com/blogs/jason_harwig/2012/11/06/capture-a-signature-on-ios.html](http://www.nearinfinity.com/blogs/jason_harwig/2012/11/06/capture-a-signature-on-ios.html)