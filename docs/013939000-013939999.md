# StackOverflow 问答 13939000-13939999

# java - 找到最近的点

> ID：13939001
> 
> 赞同：-3
> 
> 时间：2012-12-18T18:15:24.770
> 
> 标签：java, algorithm

我有很多积分。我想找到一种算法，它可以创建一个新点，该点具有所有点的最近位置。你能帮助我吗 ？例如，如果我输入以下几点： ![输入](../Images/507fa50eea0349198eafb370c82c7a22.png)

我会明白这一点：

![在此处输入图像描述](../Images/c7b879e2a5a5663b213d626ed869d2fa.png)

PS：我已经有一个函数距离（point1，point2）。此函数计算 2 点之间的距离

PS：我的观点是经度/纬度坐标

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:17:12.927

你正在寻找[质心](http://en.wikipedia.org/wiki/Centroid#Of_a_finite_set_of_points)

![在此处输入图像描述](../Images/e3e4aacf6c73f0927920e171b9848ea6.png)

假设 X [i]是一个点（或者在一般情况下是一个 n 维向量）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:16:46.370

将所有 x 和 y 坐标值相加并除以点数：

假设你有 3 点：

```
 x =   (x1 + x2 + x3) / 3;

  y=    (y1 + y2 + y3) / 3; 
```

# ios - 禁用 tabBar 上的用户交互

> ID：13939006
> 
> 赞同：5
> 
> 时间：2012-12-18T18:15:42.043
> 
> 标签：ios, uiview, uiimageview, uibutton, tabbar

我在应用程序之后显示图像`didFinishLaunchingWithOptions`，该应用程序包含在一个标签栏中，在第一个视图中我有一些按钮。用户只有在按下第一个图像中的按钮后才能继续使用该应用程序，问题是，一些用户可以与标签栏交互，而第一个视图中的按钮甚至可以与图像交互。我如何才能完全禁用这些按钮和 tabBar 中的用户交互，然后仅在按下按钮并且图像消失时启用？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-18T18:30:05.877

要禁用：

```
UITabBarController.tabBar.userInteractionEnabled = NO; 
```

启用：

```
UITabBarController.tabBar.userInteractionEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-12T04:16:01.430

```
 if let items =  self.tabBarController?.tabBar.items {

        for i in 0 ..< items.count {

            let itemToDisable = items[i]
            itemToDisable.isEnabled = false

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:33:12.200

不知何故，我没有完全理解您所描述的内容，但是您是否尝试过使用以下代码禁用按钮？

```
 button1.Enabled=false; 
```

您也可以使用禁用图像点击功能

```
 image1.Enabled=false; 
```

# c# - 如何从 XML 调用 HTTP Get 中的特定行

> ID：13939017
> 
> 赞同：0
> 
> 时间：2012-12-18T18:16:37.333
> 
> 标签：c#, xml, web-services, http, httpwebrequest

现在我得到了这个 XML 的完整转储......

[http://smart-ip.net/geoip-xml/68.5.63.33](http://smart-ip.net/geoip-xml/68.5.63.33)

我希望我的程序做的只是从那个 XML 中调用城市和地区。

我是网络服务的新手，所以我很难弄清楚如何做到这一点，非常感谢帮助

这是我的代码：

```
HttpWebRequest myHttpWebRequest = null;
HttpWebResponse myHttpWebResponse = null;
XmlTextReader myXMLReader = null;

try
{
    XPathNavigator nav;
    XPathDocument docNav;

    String weatherURL = "http://smart-ip.net/geoip-xml/" + txtIP.Text;

    myHttpWebRequest = (HttpWebRequest)HttpWebRequest.Create(weatherURL);
    myHttpWebRequest.Method = "GET";
    myHttpWebRequest.ContentType = "text/xml; encoding='utf-8'";
    myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();
    myXMLReader = new XmlTextReader(myHttpWebResponse.GetResponseStream());

    docNav = new XPathDocument(myXMLReader);

    nav = docNav.CreateNavigator();
    nav.MoveToRoot();
    nav.MoveToFirstChild();

    do
    {
        if (nav.NodeType == XPathNodeType.Element)
        {
            nav.MoveToFirstChild();
            do
            {
                txtIPresults.Text = txtIPresults.Text + nav.Name + " - " + nav.Value + Environment.NewLine;  //Display
            } while (nav.MoveToNext());
        }
    } while (nav.MoveToNext());
}
catch (Exception myException)
{
    throw new Exception("Error Occurred:", myException);
}
finally
{
    myHttpWebRequest = null;
    myHttpWebResponse = null;
    myXMLReader = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:32:12.173

如果我理解正确，您正试图从 XML 响应中的`countryName`and元素中获取值。`city`

这可以使用命名空间中的`XDocument`类通过以下方式完成`System.Xml.Linq`：

```
HttpWebRequest myHttpWebRequest = null;
HttpWebResponse myHttpWebResponse = null;

try
{
    String weatherURL = "http://smart-ip.net/geoip-xml/" + txtIP.Text;

    myHttpWebRequest = (HttpWebRequest)HttpWebRequest.Create(weatherURL);
    myHttpWebRequest.Method = "GET";
    myHttpWebRequest.ContentType = "text/xml; encoding='utf-8'";
    myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();

    //---- <Added code> -------

    var doc = XDocument.Load(myHttpWebResponse.GetResponseStream());

    var geoip = doc.Element("geoip");
    var country = geoip.Element("countryName").Value;
    var city = geoip.Element("city").Value;

    Console.WriteLine(country + " - " + city);

    //---- </Added code> -------
}
catch (Exception myException)
{
    throw new Exception("Error Occurred:", myException);
}
finally
{
    myHttpWebRequest = null;
    myHttpWebResponse = null;
} 
```

也可以使用该`XDocument.Load()`方法直接使用 url 字符串加载 XML 响应：

```
String weatherURL = "http://smart-ip.net/geoip-xml/" + txtIP.Text;
var doc = XDocument.Load(weatherURL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:59:58.580

我会做这样的事情：

```
 try
     {
        WebClient wc = new WebClient();
        wc.Headers.Add();//ADD ALL YOUR HEADERS IF YOU NEED
        var xml = wc.DownloadString(string.Format("http://smart-ip.net/geoip-xml/{0}", txtIP.Text));

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(xml);

        var name = doc.DocumentElement.SelectSingleNode("//countryName").Value;
        txtIPresults.Text = name
     }
     catch (Exception myException)
     {
        throw new Exception("Error Occurred:", myException);
     } 
```

我不确定它是否比 HTTP REQUEST/RESPONSE 具有更高的性能，但代码非常小且易于维护。

# linux - 如何在 Windows 环境中克隆 LINUX 可启动 USB 笔式驱动器

> ID：13939018
> 
> 赞同：-2
> 
> 时间：2012-12-18T18:16:39.623
> 
> 标签：linux, windows, usb, clone

我已将 LINUX mint OS 安装到 USB Pen 驱动器中。现在我无法使用 Windows 阅读它。我需要克隆此驱动器并将其存储以备将来使用。我可以在 Windows 环境中执行此操作吗？有什么软件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:05:08.703

unix 命令“dd”的 Windows 实现将完成这项工作。

[http://www.chrysocome.net/dd](http://www.chrysocome.net/dd)

# css - CSS防止菜单改变位置

> ID：13939021
> 
> 赞同：0
> 
> 时间：2012-12-18T18:16:44.960
> 
> 标签：css

有人要求我改进他的 CSS 以防止导航菜单在浏览器变小时改变位置，但我不知道为什么它不起作用。请参阅 jsFiddle：http: [//jsfiddle.net/gtvTY/10/](http://jsfiddle.net/gtvTY/10/)

的HTML：

```
<div id="menu">
    <ul>
        <li><a href="index.html" title="Home">HOME</a></li>
        <li><a href="virage.html" title="Virage">VIRAGE</a></li>
        <li><a href="rapide.html" title="Rapide">RAPIDE</a></li>
        <li><a href="dbs.html" title="DBS">DBS</a></li>
        <li><a href="db9.html" title="DB9">DB9</a></li>
        <li><a href="cygnet.html" title="Cygnet">CYGNET</a></li>
    </ul>
</div> 
```

这是原始菜单：

```
 ul.menu {
        position:absolute;
        left:18%;
        right:18%;
        background: #333;
        float: left;
        list-style: none;
        margin: 0;
        padding: 0;
        width: 64%;
        z-index: 3;
    }
    ul.menu li {
        float: left;
        margin: 0;
        padding: 0;
    }
    ul.menu a {
        background: #333;
        color: #ccc;
        display: block;
        float: left;
        margin: 0;
        padding: 8px 12px;
        text-decoration: none;
    }
    ul.menu a:hover {
        background: #666;
        color: #fff;
        padding-bottom: 8px;
    } 
```

我对此进行了一些重新设计。但它根本不起作用......

```
#menu ul {
        position: absolute;
        list-style: none;
        padding: 0;
        margin: 0;
    }

    #menu li
    {
        float: left;
        margin: 0 0.15em;
    }

    #menu li a
    {
        background-color: #333;
        height: 2em;
        line-height: 2em;
        float: left;
        width: 9em;
        display: block;
        color: #fff;
        text-decoration: none;
        text-align: center;
    }

    #menu ul a:hover {
        background: #666;
        color: #fff;
        padding-bottom: 2px;
    } 
```

为什么这个菜单不能一直居中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:48:14.780

也许您正在寻找这样的东西-评论中的jsFiddle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:57:50.023

您需要将菜单放入包装容器中。给它一个宽度并设置边距：0 auto;

在这里看小提琴：http: [//jsfiddle.net/AndrewHenderson/gtvTY/7/](http://jsfiddle.net/AndrewHenderson/gtvTY/7/)

HTML：

```
<div class="container">
    <div id="menu">
        <ul>
            <li><a href="index.html" title="Home">HOME</a></li>
            <li><a href="virage.html" title="Virage">VIRAGE</a></li>
            <li><a href="rapide.html" title="Rapide">RAPIDE</a></li>
            <li><a href="dbs.html" title="DBS">DBS</a></li>
            <li><a href="db9.html" title="DB9">DB9</a></li>
            <li><a href="cygnet.html" title="Cygnet">CYGNET</a></li>
        </ul>
    </div>    
</div>​ 
```

CSS：

```
.container{
    margin: 0 auto;
    width: 800px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:03:20.833

那是你要的吗？[jsfiddle](http://jsfiddle.net/gtvTY/9/)

1.  菜单在弓形器中对齐。
2.  菜单项不会进入第二行。

如果是这样，解决方案是

你必须使用 position:relative; 而不是位置：绝对；

```
<div class="center">
 <div id="menu">
    <ul>
        <li><a href="index.html" title="Home">HOME</a></li>
        <li><a href="virage.html" title="Virage">VIRAGE</a></li>
        <li><a href="rapide.html" title="Rapide">RAPIDE</a></li>
        <li><a href="dbs.html" title="DBS">DBS</a></li>
        <li><a href="db9.html" title="DB9">DB9</a></li>
        <li><a href="cygnet.html" title="Cygnet">CYGNET</a></li>
    </ul>
</div> 
```

​​​​​​​​​​​​​​​</p>

并为您的菜单 css 定义宽度

```
.center
{
 width:auto;   
}
#menu
{
width:900px;
margin:0 auto;
position:relative;

}
#menu ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    #menu li {
        float: left;
        margin: 0 0.15em;
    }

    #menu li a {
        background-color: #333;
        height: 2em;
        line-height: 2em;
        float: left;
        width: 9em;
        display: block;
        color: #fff;
        text-decoration: none;
        text-align: center;
    }

    #menu ul a:hover {
        background: #666;
        color: #fff;
        padding-bottom: 2px;
    } 
```

​</p>

# android - 使用钛和 sqlite 的测验应用程序没有给我结果

> ID：13939023
> 
> 赞同：0
> 
> 时间：2012-12-18T18:16:50.003
> 
> 标签：android, sqlite, mobile, titanium

嗨，我正在使用钛制作一个测验应用程序。我已经使用标签显示了答案。我的代码如下

```
 var options = db.execute('select * from Answers');

var laboption1 = Titanium.UI.createLabel({
text : options.fieldByName('Answer'),
top : '10%',
left : '10%',
color:'black'
 });
 QuizWin.add(laboption1);
 var laboption2 = Titanium.UI.createLabel({
text : options.fieldByName('Answer'),
top : '15%',
left : '10%',
color:'black'
 });
 QuizWin.add(laboption2);
 var laboption3 = Titanium.UI.createLabel({
text : options.fieldByName('Answer'),
top : '20%',
left : '10%',
color:'black'
});
QuizWin.add(laboption3);
var laboption4 = Titanium.UI.createLabel({
text : options.fieldByName('Answer'),
top : '25%',
left : '10%',
color:'black'

});
QuizWin.add(laboption4); 
```

我的sql查询结果如下

```
 Lahore
   Karachi
    Quetta
   Peshawar 
```

但它在每个条目中只显示拉合尔（第一个条目）。请帮助我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:29:03.603

将这些检查用于有效行并在除第一个标签创建之外的所有记录之间移动到下一条记录。

```
options.isValidRow() // Check that there is another row in the set

options.next(); // move to the next row in the set of data 
```

# c# - 签入政策以强制发表评论

> ID：13939025
> 
> 赞同：-3
> 
> 时间：2012-12-18T18:16:56.617
> 
> 标签：c#, asp.net, tfs

我想实施签入政策，以便在签入文件时进行评论是强制性的。请让我知道，我如何在 VS2010 的 TFS SDK 中做到这一点。

提前非常感谢。阿米特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:20:41.650

一个快速的[谷歌搜索](https://www.google.ca/search?client=opera&q=tfs%20mandatory%20checkin%20comments&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)拉出[这个网站](http://blog.clauskonrad.net/2010/08/tfs-2010-how-to-force-comments-when.html)（对于 TFS 2010）。

供参考（来自网站，不是我的）：

1.  找到“团队项目设置”</li>
2.  “源代码控制……”</li>
3.  进入签到政策选项卡
4.  添加…</li>
5.  选择“变更集评论政策”</li>
6.  好的

**编辑：** 显然您需要安装[TFS Power Tools](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)（适用于所有开发人员）才能正常工作。

# asp.net-mvc - 将 ASP 网站部署到 IIS 后如何修复与 Access 数据库的连接丢失？

> ID：13939030
> 
> 赞同：2
> 
> 时间：2012-12-18T18:17:08.153
> 
> 标签：asp.net-mvc, database, ms-access, visual-studio-2012

我对 ASP 还很陌生，所以如果有什么不明白的地方，或者你想，“你为什么要那样做？”，那是因为我真的不知道。

所以问题是我使用 Visual Studio 2012 Express for Web 创建了一个网站。这是一个 ASP.NET MVC。我已经花了一个多星期的时间来解决这个问题，进行测试并让一切正常工作并且看起来正确。所以我开始了部署它的过程。我遵循了几个指南，感觉我做的一切都是正确的。

现在我只是想在 上测试我的网站，然后我的第一个屏幕出现了。此屏幕是某种“登录”屏幕，应该连接到我的 Access 数据库以检查是否应允许用户进入下一个屏幕。但是单击“提交”按钮甚至不会打开数据库。当我在 Visual Studio 中运行它时，所有这些都可以正常工作。

我该怎么做才能让它工作？

我尝试过但失败的一些步骤： -重新部署 -更改 Access DB 的位置 -我开始尝试安装配置并将我的 Access 数据库转换为 SQL Server，但我也无法让它工作。

如果有人有任何建议，请告诉我。如果您需要代码示例或 IIS 设置，我会尽快将它们提供给您，但请帮助我，因为我不想失去一个多星期的工作。

感谢：D

编辑：在接受**HansUp**的建议后，它引导我找到其他一些搜索词，这些搜索词引导我访问[http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7 -and-iis-8/using-classic-asp-with-microsoft-access-databases-on-iis](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/using-classic-asp-with-microsoft-access-databases-on-iis)。我使用的是 64 位机器，并且我在 IIS 中的应用程序池未设置为运行 32 位应用程序，当使用 32 位的 Access ODBC 驱动程序时会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:26:10.400

将数据库文件和数据库文件所在文件夹的IUSR帐户设置为读/写。

然后，看到我使用的是 64 位机器，并且正在使用的 Access ODBC 驱动程序是 32 位的，我必须在 IIS 中将“启用 32 位应用程序”设置为“true”，以用于应用程序池我的网站正在使用。

这是我找到 64 位 32 位解决方案的链接 [http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis- 8/使用-经典-asp-with-microsoft-access-databases-on-iis](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/using-classic-asp-with-microsoft-access-databases-on-iis)

# django - 如何检索刚刚在 Tastypie 中创建的对象

> ID：13939034
> 
> 赞同：0
> 
> 时间：2012-12-18T18:17:12.223
> 
> 标签：django, backend, tastypie

使用 Tastypie 和 Django User Streams，我正在尝试构建活动提要。我已经成功构建了以下收藏功能：

```
class LikeResource(ModelResource):
user = fields.ForeignKey(BasicUserResource, 'user', full=True)  
class Meta:
    queryset = Journalist.objects.all()
    allowed_methods = ['get', 'put']
    resource_name = 'like'
    fields = ['user']
    default_format = "application/json"
    authorization = Authorization()
    authentication = BasicAuthentication()
    serializer = Serializer(formats=['json'])
    always_return_data = True
    include_resource_uri = False

def hydrate(self, bundle):
    shot = LifeShot.objects.all().get(id = bundle.data['post id'])
            if(bundle.obj.likes.filter(id = bundle.data['post id']).exists()):
                 bundle.obj.likes.remove(shot)
            else:
                 bundle.obj.likes.add(shot)
                 user_doing_the_liking=User.objects.get(username=bundle.request.user.username)
                 user_getting_liked = shot.journalist.user
                 user_streams.add_stream_item(user_getting_liked, '%s liked your shot %s %s' % (bundle.request.user.username, shot.url, datetime.datetime.utcnow()))
            return bundle

    def dehydrate(self, bundle):
         shot = LifeShot.objects.all().get(id = bundle.data ['post id'])
         user_getting_liked = shot.foodie.user
         likeitems = user_streams.get_stream_items(user_getting_liked)
         list = ''
         for likeitem in likeitems:
              list = list + likeitem.content +', '
         bundle.data['likestream'] = list
         return bundle 
```

现在要评论一张照片，这就是我目前所拥有的：

```
class CommentEntryResource(ModelResource):
user = fields.ForeignKey(BasicJournalistResource, 'user', full =True)
picture = fields.ForeignKey(BasicLifeShotResource, 'picture', full=True)
class Meta:
    queryset = Comment.objects.all()
    allowed_methods = ['post', 'get','put']
    resource_name = 'comment'
    fields = ['comment', 'picture', 'user']
    authorization = Authorization()
    authentication = BasicAuthentication()
    serializer = Serializer(formats=['json'])
    include_resource_uri = False
    always_return_data = True

    filtering = {
            'picture': ALL_WITH_RELATIONS,
    }

def hydrate_user(self, bundle):

    bundle.data['user'] = Journalist.objects.get(user = bundle.request.user)

    return bundle 
```

现在唯一的区别是 Tastypie 创建了一个新的评论对象。如何检索该评论对象并使用 Django 用户流实现它，以便在我的提要中显示“用户 1 评论了您的镜头：看起来不错！” ？？？

Django 用户流：[https](https://github.com/dabapps/django-user-streams) ://github.com/dabapps/django-user-streams Tastypie：[http ://django-tastypie.readthedocs.org/en/latest/](http://django-tastypie.readthedocs.org/en/latest/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:20:51.647

试试这个：

```
 bundle.data['user'] = Journalist.objects.get(user = bundle.obj.user) 
```

`bundle.obj`会给你`Comment`模型对象。您可以通过`bundle.obj.user`.

# facebook - 将应用程序张贴到随机页面的墙上

> ID：13939035
> 
> 赞同：0
> 
> 时间：2012-12-18T18:17:16.580
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在使用 php sdk 将应用程序发布到随机页面的墙上作为应用程序，而不是管理员。

```
$facebook->api('/'.$page_id.'/feed/', 'post', $attachment); 
```

返回的错误是：

```
The user hasn't authorized the application to perform this action 
```

facebook 对象已经有一个应用程序 ID 和应用程序密码，因此设置了应用程序的访问令牌，但它不允许应用程序发布到页面。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:48:15.227

使用您的应用程序的用户需要授权您的应用程序代表他们发布 - 如果您想作为页面本身发布，您应该阅读[https://developers.facebook.com/docs/howtos/上的页面登录文档login/login-as-page](https://developers.facebook.com/docs/howtos/login/login-as-page)并确保您确实使用页面访问令牌来发布帖子

# bash - 如何为文件的每一行运行命令？

> ID：13939038
> 
> 赞同：217
> 
> 时间：2012-12-18T18:17:24.887
> 
> 标签：bash, loops, line

例如，现在我正在使用以下内容来更改我将其 Unix 路径写入文件的几个文件：

```
cat file.txt | while read in; do chmod 755 "$in"; done 
```

有没有更优雅、更安全的方式？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-12-18T20:46:22.547

# 逐行读取文件并执行命令：4 个答案

这是因为不仅有1个答案...

0.  `shell`命令行扩展
1.  `xargs`专用工具
2.  `while read`附上一些评论
3.  `while read -u`使用专用*`fd`*, 进行*交互*处理（示例）

关于 OP 请求：***在 file 中列出的所有目标上******运行`chmod`***，`xargs`是指示的工具。但是对于其他一些应用程序，少量文件等......

## 0\. 读取整个文件作为命令行参数。

```
If your file is not too big and all files are *well named* (without spaces or other special chars like quotes), you could use *`shell` command line expansion*. Simply:

    chmod 755 $(<file.txt)

For small amount of files (lines), this command is the lighter one. 
```

## 1.`xargs`是正确的工具

```
For bigger amount of files, or almost ***any*** number of lines in your input file...

For many *binutils* tools, like `chown`, `chmod`, `rm`, `cp -t` ...

    xargs chmod 755 <file.txt

If you have special chars and/or a lot of lines in `file.txt`.

    xargs -0 chmod 755 < <(tr \\n \\0 <file.txt)

if your command need to be run exactly 1 time by entry:

    xargs -0 -n 1 chmod 755 < <(tr \\n \\0 <file.txt)

This is not needed for this sample, as `chmod` accept multiple files as argument, but this match the title of question.

For some special case, you could even define location of file argument in commands generateds by `xargs`:

    xargs -0 -I '{}' -n 1 myWrapper -arg1 -file='{}' wrapCmd < <(tr \\n \\0 <file.txt) 
```

### `seq 1 5`作为输入进行测试

试试这个：

```
 xargs -n 1 -I{} echo Blah {} blabla {}.. < <(seq 1 5)
    Blah 1 blabla 1..
    Blah 2 blabla 2..
    Blah 3 blabla 3..
    Blah 4 blabla 4..
    Blah 5 blabla 5.. 
```

**每行**执行一次命令。

## 2.`while read`和变体。

正如 OP 建议的那样`cat file.txt | while read in; do chmod 755 "$in"; done`，但有两个问题：

```
 - `cat |` is an *useless fork*, and

 - `| while ... ;done` will become a *subshell* where environment will disapear after `;done`. 
```

所以这可以更好地写：

```
 while read in; do chmod 755 "$in"; done < file.txt 
```

但，

*   您可能会收到以下警告`$IFS`和`read`标志：

    ```
     help read

     >     read: read [-r] ... [-d delim] ... [name ...] 
    ```

> ```
>  ...
>     Reads a single line from the standard input... The line is split
>     into fields as with word splitting, and the first word is assigned
>     to the first NAME, the second word to the second NAME, and so on...
>     Only the characters found in $IFS are recognized as word delimiters.
>     ...
>     Options:
>       ...
>       -d delim   continue until the first character of DELIM is read, 
>                  rather than newline
>       ...
>       -r do not allow backslashes to escape any characters
>     ...
>     Exit Status:
>     The return code is zero, unless end-of-file is encountered... 
> ```

```
 In some case, you may need to use

        while IFS= read -r in;do chmod 755 "$in";done <file.txt

   For avoiding problems with stranges filenames. And maybe if you encouter problems with *`UTF-8`*:

        while LANG=C IFS= read -r in ; do chmod 755 "$in";done <file.txt 
```

*   当你`STDIN`用于阅读`file.txt`时，你的脚本不能是*交互式*的（你不能再使用`STDIN`了）。

## 3\. `while read -u`、使用专用*`fd`*。

语法：`while read ...;done <file.txt`将重定向*`STDIN`*到`file.txt`. 这意味着，在他们完成之前，您将无法处理流程。

如果您打算创建*交互式*工具，则必须避免使用*`STDIN`*并使用一些替代*文件描述符*。

常量*文件描述符*是：`0`对于*STDIN*，`1`对于*STDOUT*和`2`对于*STDERR*。您可以通过以下方式查看它们：

```
 ls -l /dev/fd/ 
```

或者

```
 ls -l /proc/self/fd/ 
```

从那里，您必须选择未使用的数字，介于`0`和`63`（实际上，更多，实际上取决于`sysctl`超级用户工具）作为*文件描述符*：

对于这个演示，我将使用*fd* `7`：

 ~~```
 exec 7<file.txt      # Without spaces between `7` and `<`!
    ls -l /dev/fd/ 
```~~ 

然后你可以这样使用`read -u 7`：

```
 while read -u 7 filename; do
        ans=
        while [ -z "$ans" ]; do
            read -p "Process file '$filename' (y/n)? " -sn1 foo
            [ "$foo" ] && [ -z "${foo/[yn]}" ] && ans=$foo || echo '??'
        done
        if [ "$ans" = "y" ]; then
            echo Yes
            echo "Processing '$filename'."
        else
            echo No
        fi
    done 7<file.txt 
```

 ~~```
 done 
```~~ 

关闭`fd/7`：

```
 exec 7<&-            # This will close file descriptor 7.
    ls -l /dev/fd/ 
```

注意：我~~使用了罢工~~版本，因为这种语法在使用并行进程进行许多 I/O 时可能很有用：

```
 mkfifo sshfifo
    exec 7> >(ssh -t user@host sh >sshfifo)
    exec 6<sshfifo 
```

* * *

## 回答 #2

> 赞同：176
> 
> 时间：2012-12-18T18:19:09.467

是的。

```
while read in; do chmod 755 "$in"; done < file.txt 
```

这样你就可以避免一个`cat`过程。

`cat`对于这样的目的几乎总是不好的。您可以阅读有关**[Cat 的无用使用的更多信息。](http://archive.is/G9FTL)**

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-18T18:31:43.827

如果您有一个不错的选择器（例如目录中的所有 .txt 文件），您可以这样做：

```
for i in *.txt; do chmod 755 "$i"; done 
```

[bash for 循环](http://www.cyberciti.biz/faq/bash-loop-over-file/)

或您的变体：

```
while read line; do chmod 755 "$line"; done < file.txt 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-03-21T18:02:10.020

如果你想为每一行并行运行你的命令，你可以使用[GNU Parallel](http://www.gnu.org/software/parallel/)

```
parallel -a <your file> <program> 
```

文件的每一行都将作为参数传递给程序。默认情况下`parallel`，运行与 CPU 数量一样多的线程。但是你可以指定它`-j`

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-12-18T18:49:20.060

如果您知道输入中没有任何空格：

```
xargs chmod 755 < file.txt 
```

如果路径中可能有空格，并且您有 GNU xargs：

```
tr '\n' '\0' < file.txt | xargs -0 chmod 755 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-07-11T19:01:29.490

您还可以使用 AWK，它可以让您更灵活地处理文件

```
awk '{ print "chmod 755 "$0"" | "/bin/sh"}' file.txt 
```

如果您的文件有一个字段分隔符，例如：

> 字段 1、字段 2、字段 3

只得到你做的第一个字段

```
awk -F, '{ print "chmod 755 "$1"" | "/bin/sh"}' file.txt 
```

您可以查看有关 GNU 文档的更多详细信息 [https://www.gnu.org/software/gawk/manual/html_node/Very-Simple.html#Very-Simple](https://www.gnu.org/software/gawk/manual/html_node/Very-Simple.html#Very-Simple)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-03-18T16:19:48.673

现在`xargs`仍然是这个问题的答案，但是......您现在可以使用该`-a`选项直接从文件中读取输入：

`xargs -a file.txt -n 1 -I {} chmod 775 {}`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-18T18:49:37.860

我看到你标记了 bash，但 Perl 也是一个很好的方法：

```
perl -p -e '`chmod 755 $_`' file.txt 
```

您还可以应用正则表达式来确保您获得正确的文件，例如仅处理 .txt 文件：

```
perl -p -e 'if(/\.txt$/) `chmod 755 $_`' file.txt 
```

要“预览”正在发生的事情，只需用双引号替换反引号并添加`print`：

```
perl -p -e 'if(/\.txt$/) print "chmod 755 $_"' file.txt 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-30T16:41:28.103

该逻辑适用于许多其他目标。以及如何从 /home/ 文件系统中读取每个用户的 .sh_history ？如果有一千个呢？

```
#!/bin/ksh
last |head -10|awk '{print $1}'|
 while IFS= read -r line
 do
su - "$line" -c 'tail .sh_history'
 done 
```

这是脚本[https://github.com/imvieira/SysAdmin_DevOps_Scripts/blob/master/get_and_run.sh](https://github.com/imvieira/SysAdmin_DevOps_Scripts/blob/master/get_and_run.sh)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-20T09:43:57.937

我知道已经晚了，但仍然

如果您有任何机会遇到使用`\r\n`而不是 的Windows 保存的文本文件，`\n`如果您的命令在读取行之后有某事作为参数，您可能会对输出感到困惑。所以请删除`\r`，例如：

```
cat file | tr -d '\r' | xargs -L 1 -i echo do_sth_with_{}_as_line 
```

# android - OnTouchEvent 不适用于 Edittext 字段，是否有替代方法？

> ID：13939040
> 
> 赞同：0
> 
> 时间：2012-12-18T18:17:30.223
> 
> 标签：android, android-event

我有一个预填充值“请评论...”的编辑文本字段，现在我想在用户触摸此字段时删除此内容。在文档中，我看到可以将 onTouchEvent 添加到 edittext 字段。但它不起作用，因为编译器错误发生在

```
The method onTouchEvent(MotionEvent) in the type TextView is not applicable for the arguments (new View.OnTouchListener(){}) 
```

我的代码是：

```
 comment.onTouchEvent(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (comment.getText().equals( R.string.comment_content )){
                    comment.setText( "" );
                    return true;
                }
                return false;

            }}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:22:35.057

不要手动执行此操作。Android 已经提供了这个功能：[“提示文本”](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ahint)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:31:34.167

```
MyEditor.setOnTouchListener(new OnTouchListener(){
@Override
public boolean onTouch(View v, MotionEvent event) {
    int inType = MyEditor.getInputType(); // backup the input type
    MyEditor.setInputType(InputType.TYPE_NULL); // disable soft input
    MyEditor.onTouchEvent(event); // call native handler
    MyEditor.setInputType(inType); // restore input type
    return true; // consume touch even
}
}); 
```

> 这是禁用您的输入并设置为触摸工作..

# qooxdoo - QooxDoo：对话框贡献错误

> ID：13939044
> 
> 赞同：1
> 
> 时间：2012-12-18T18:18:00.870
> 
> 标签：qooxdoo

我正在使用 QooXDoo 做 RIA 应用程序，我想使用类似窗口的对话框来提示和通知用户。

我使用了来自 qooxdoo 的对话框贡献。但是当我尝试运行时出现以下错误

```
dialog.Dialog.warning( "I warned you!" ); 
```

***类对话框的属性装饰器出错。传入值“shadow-popup”的方法 setDecorator 中的警报：无效！***

我确实在“config.json”文件中添加了Dialog contrib，如下所示。

```
 "libraries" : 
    {
      "library" :
      [
        {
          "manifest" : "../qx-contrib-Dialog-master/Manifest.json"
        }
      ]
    } 
```

谁能猜出问题出在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T21:34:31.403

你能给出一些背景吗？

*   您使用的是`qooxdoo`哪个版本？`qx-contrib-Dialog`
*   您正在开发哪种类型的应用程序 ( `contribution|desktop|inline|mobile|native|server|website`)？
*   运行时是否收到错误消息`./generate.py source`？

我不确定您的问题是什么，但是当从头开始时，一切都对我有用（使用`qooxdoo-2.1`，创建`desktop`应用程序并使用 master 分支的当前负责人`qx-contrib-Dialog`）：

```
$ cd workspace
$ wget/unzip => qooxdoo-2.1-sdk/     // I've already done that before...
$ ./qooxdoo-2.1-sdk/create-application.py -n stackoverflow
$ git clone https://github.com/cboulanger/qx-contrib-Dialog.git

file system at this moment:
  workspace/
    |-- qooxdoo-2.1-sdk/
    |   |-- application/
    |   |-- component/
    |   |-- create-application.py
    |   `-- ...
    |-- qx-contrib-Dialog/
    |   |-- Manifest.json
    |   |-- README.md
    |   |-- demo/
    |   |-- qooxdoo/
    |   `-- source/
    |-- stackoverflow/
    |   |-- Manifest.json
    |   |-- config.json
    |   |-- generate.py
    |   |-- readme.txt
    |   `-- source/ 

$ cd stackoverflow
$ vim config.json

  config.json
.-----------
| ...
| "libraries" :
| {
|  "library" :
|  [
|    {
|      "manifest" : "../qx-contrib-Dialog/Manifest.json"
|    }
|  ]
| }
| ...

$ ./generate.py source
$ vim source/class/stackoverflow/Application.js

  Application.js (adapted with reference to the demo on github [1])
.-----------
|  ...
|  // Add an event listener
|  button1.addListener("execute", function(e) {
|    // alert("Hello World!");
|    dialog.Dialog.warning( "I warned you!" );
|  });
| ...
|

$ ./generate.py source (cause the dialog classes aren't known yet)

Open app in your browser! :) 
```

[1] [https://github.com/cboulanger/qx-contrib-Dialog](https://github.com/cboulanger/qx-contrib-Dialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:04:38.367

最后我得到了这个错误的解决方案。

我刚刚从 Dialog.js 文件中删除了以下行，之后一切正常。

```
'decorator'  : "shadow-popup" 
```

但是缺少阴影效果。

所以我确实在主题文件中写了一个名为“shadow-popup”的装饰器。

谢谢你。

# .htaccess - 在 .htaccess 重写中遗漏了一些明显的东西

> ID：13939046
> 
> 赞同：0
> 
> 时间：2012-12-18T18:18:02.117
> 
> 标签：.htaccess, mod-rewrite

我的目标很简单：

1.  任何事情都`/special`应该去`/SpecialHandler.php`
2.  其他一切都应该去`/index.php`

我的基本配置是这样写的，但它不起作用：

```
RewriteEngine on
RewriteBase /
RewriteRule ^/special(.*)/?$ SpecialHandler.php [L,NC]
RewriteRule ^.*/?$ index.php [L] 
```

以下是正在发生的事情：

*   本地主机 - 工作正常
*   localhost/bla_bla-bla%20bla - 工作正常
*   localhost/special/ -**去`index.php`而不是`SpecialHandler.php`**
*   localhost/special/fu/bar/bat - **去`index.php`而不是`SpecialHandler.php`**

这一定是我想念的明显东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:24:25.870

删除特殊规则的第一个 / ：

```
RewriteRule ^special(.*)/?$ SpecialHandler.php [L,NC] 
```

它应该工作

-- 完成工作 htaccess

```
RewriteEngine on
RewriteBase /a/
RewriteRule ^special(.*)/? SpecialHandler.php [NC,L]
RewriteRule ^.*/?$ index.php [L] 
```

网址：

```
http://localhost/a/special => special
http://localhost/a/special/really => special
http://localhost/a/index.php => index
http://localhost/a/foobarbaz => index 
```

# wpf - 绑定到实体数据库的 DataGrid 的 ComboBox 字段

> ID：13939047
> 
> 赞同：0
> 
> 时间：2012-12-18T18:18:06.993
> 
> 标签：wpf, database, datagrid, combobox, entity

我想制作一个带有**组合框**列的双向可编辑数据网格。此数据网格连接到 .NET 实体框架。我怎么能这样做？你能扩展我的代码吗？

**SQL：**

```
CREATE TABLE Languages(
    L_Id INTEGER PRIMARY KEY IDENTITY(1,1),
    L_Name VARCHAR(16) NOT NULL
);

CREATE TABLE Movies (
    M_Id INTEGER PRIMARY KEY IDENTITY(1,1),
    M_Title VARCHAR(128) NOT NULL,
    M_Language_Id INTEGER NOT NULL,

    CONSTRAINT MoviesToLanguages 
        FOREIGN KEY (M_Language_Id) 
        REFERENCES Languages (L_Id)
);

INSERT INTO Languages VALUES('subtitled');
INSERT INTO Languages VALUES('synchronized'); 
```

**主窗口.xaml**

```
...
<DataGrid Name="MoviesDataGrid" Grid.Row="1" AutoGenerateColumns="False" ItemsSource="{Binding Movies}">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Title" Binding="{Binding M_Title}" />
        <DataGridTemplateColumn Header="Language" CanUserReorder="False">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                        <TextBlock TextAlignment="Center" Text="{Binding Path=Languages.L_Name}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    ???
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate> 
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid>
... 
```

**CinemaViewModel.cs**

```
private CinemaEntities _Entities;
public ObservableCollection<Movies> Movies{ get; private set; }

public CinemaViewModel()
{
    _Entities = new CinemaEntities();
    Movies = new ObservableCollection<Movies>(_Entities.Movies.Include("Languages"));
    OnPropertyChanged("Movies");
}

private void Save()
{
    _Entities.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:21:52.913

在您的数据模板中：

```
<ComboBox ItemsSource="{Binding DataContext.Movies, RelativeSource={RelativeSource FindAncestor, AncestorType=DataGrid}" SelectedItem="{Binding WhateverPropertyReferencesTheMovieNavigationPropertyInYourEntities}" DisplayMemberPath="WhateverPropertyInTheMoviesYouWantToVisualizeInTheComboBox"/> 
```

# ruby - 构建文件系统爬虫的正则表达式问题

> ID：13939051
> 
> 赞同：1
> 
> 时间：2012-12-18T18:18:30.090
> 
> 标签：ruby, regex, macos, filesystems, web-crawler

我正在构建一个爬虫来搜索我的文件系统以查找包含特定信息的特定文档。然而，正则表达式部分让我有点困惑。我的桌面上有一个包含“teststring”和测试信用卡号“4060324066583245”的测试文件，下面的代码将正常运行并找到包含以下内容的文件`teststring`：

```
require 'find'
count = 0

Find.find('/') do |f|              # '/' for root directory on OS X
  if f.match(/\.doc\Z/)            # check if filename ends in desired format
    contents =  File.read(f)
      if /teststring/.match(contents) 
      puts f
      count += 1
    end
  end
end

puts "#{count} sensitive files were found" 
```

运行此确认爬虫正在工作并正确找到匹配项。但是，当我尝试运行它以查找测试信用卡号时，它找不到匹配项：

```
require 'find'
count = 0

Find.find('/') do |f|              # '/' for root directory on OS X
  if f.match(/\.doc\Z/)            # check if filename ends in desired format
    contents =  File.read(f)
      if /^4[0-9]{12}(?:[0-9]{3})?$/.match(contents) 
      puts f
      count += 1
    end
  end
end

puts "#{count} sensitive files were found" 
```

我检查了 rubular.com 上的正则表达式`4060324066583245`作为测试数据，它包含在我的测试文档中，Rubular 验证该数字是否与正则表达式匹配。总结一下：

1.  爬虫在第一种情况下使用`teststring`- 验证爬虫是否正确扫描我的文件系统并读取所需文件类型的内容
2.  Rubular 验证我的正则表达式成功匹配我的测试信用卡号`4060324066583245`
3.  爬虫找不到测试信用卡号。

有什么建议么？我不知道为什么 Rubular 将正则表达式显示为有效但脚本在我的机器上运行时不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:25:02.110

`^`和`$`是锚点，分别将匹配项与字符串的开头和结尾联系起来。

因此，`^[0-9]{4}$`将匹配`"1234"`，但不匹配`"12345"`或`" 1234 "`等。

您应该改用单词边界：

```
if contents =~ /\b4[0-9]{12}(?:[0-9]{3})?\b/ 
```

# iphone - textFieldDidBeginEditing 和 textFieldShouldBeginEditing 之间的确切区别是什么

> ID：13939053
> 
> 赞同：2
> 
> 时间：2012-12-18T18:18:44.053
> 
> 标签：iphone, objective-c, ios

textFieldDidBeginEditing 和 textFieldShouldBeginEditing 之间的确切区别是什么。我想知道我们在哪种情况下使用它们（我知道当我们在文本字段中输入任何内容时会调用它们。我想知道当我们在程序中同时使用它们时调用它们的确切时间）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T18:21:28.200

“shouldBegin” 允许您对返回值说“不”以禁止该操作。

“didBegin”表示它刚刚开始发生，你需要在那个时间点采取任何你需要做的动作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:24:15.967

一个`textFieldShouldBeginEditing`方法请求委托的许可，以允许在用户点击它时编辑 textField。

另一方面，`textFieldDidBeginEditing`当 textField 开始编辑内容时调用（即在 之后`textFieldShouldBeginEditing`，如果允许）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:26:35.660

示例：您想要创建一个不可编辑的文本字段，因此您返回 NO：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    return NO;
} 
```

关于 textFieldDidBeginEditing：

> 讨论 此方法通知委托指定的文本字段刚刚成为第一响应者。您可以使用此方法来更新您的委托的状态信息。例如，您可以使用此方法显示在编辑时应该可见的覆盖视图。

因此，假设您有一个文本字段子类（并且您希望它是可编辑的），当用户编辑内容时会更改图形（例如：它希望在用户键入时显示不同的焦点环），所以您使用它去做这些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-24T19:41:40.183

如果您将“用户名”和“密码”字段的标签（来自 Storyboard）分别设置为 0 和 1，然后尝试在 func textFieldDidBeginEditing 中捕获活动字段，它不起作用！

```
**func textFieldDidBeginEditing(_ textField: UITextField) -> Bool 
```

{
activeTextField = textField
返回真
}**

```
**func textFieldShouldReturn(_ textField: UITextField) -> Bool 
```

{
let value = activeTextField.tag
switch value
{
case 0:
// 对于用户名字段它应该执行这个案例
case 1:
// 对于密码字段它应该执行这个案例
}
}**

当被称为@objc func textFieldDidBeginEditing 时，相同的函数正在工作并提供正确的结果，没有“objc”字样，它不会选择活动字段。我只想知道，为什么会这样……

```
**@objc func textFieldDidBeginEditing(_ textField: ) -> Bool 
```

{
activeTextField = textField
返回真
}**

# php - 在 JavaScript 弹出框中创建带有验证的输入框

> ID：13939061
> 
> 赞同：0
> 
> 时间：2012-12-18T18:19:11.087
> 
> 标签：php, javascript, html

我对这个话题感到困惑，我应该做什么以及如何做。？

在从列表中删除用户之前，我希望有一个询问密码的弹出框。如果密码（作为某个值，例如 ex12345）是正确的，则删除用户。如果不是，则说密码不正确。

我的 PHP 页面带有简单的弹出窗口。我想弹出输入框

任何帮助将不胜感激。

这是我的代码。作为 view.php

```
<html>
<head>
<meta charset="utf-8">
<title>LogIn Information System</title>
<link rel="stylesheet" media="screen" href="stylesS.css" >
<script>
    function confirmDelete(delUrl) 
    {
        if (confirm("Are you sure you want to delete")) 
        {
             document.location = delUrl;
        }
    }
</script>
</head>
<body>
<div class="header-top">
            <a href="//home" class="utopia-logo">
                <img src="//images/logo.png" alt="asd" />
            </a>    
    </div><!-- End header -->

<table class = "button_table">
    <tr>
        <td><button class="submit" type="submit"><a href="home.php">Home</a></button></td>
        <td><button class="submit" type="submit"><a href="find.php">Search</a></button></td>
        <td><button class="submit" type="submit"><a href="view.php">Customer List</a></button></td>
        <?php
            if($_SESSION['valid']=='admin'){

            echo "<td><button class='submit' type='submit'><a href='add.php'>Add User</a></button></td>";
            echo "<td><button class='submit' type='submit'><a href='users.php'>View User</a></button></td>";
            }
        ?>
        <td><button class="submit" type="submit"><a href="logout.php">Logout</a></button></td>

    </tr>
</table>
<form class="contact_form" action="search.php" method="post" name="contact_form">
<ul>
    <li>
         <h2>Search Results</h2>
         <span class="required_notification">Following search matches our   database</span>
    </li>   
</li>
    <?php
        echo "<table border='0' width='100%'>";
        echo "<tr class='head'>";
              echo "<th>Name</th>";
              echo "<th>Last Name</th>";
              echo "<th>Phone</th>";
              echo "<th>Action</th>";
              echo "</tr>";
        while($row = mysql_fetch_array($find)){
              echo "<tr class='t1'>";
              echo "<td>".$row['fname']."</td>";
              echo "<td>".$row['lname']."</td>";
              echo "<td>".$row['phone']."</td>";
        ?>
              <td>
                <a href="edit.php?id=<?php echo $row['id'];?>"    class='action'>Edit</a> | 
                <a href="delete.php?id=<?php echo $row['id'];?>" class='action' onclick="return confirm('Are you sure you want to delete?')">Serve</a>
              </td>
        <?php
              echo "</tr>";

        }
        echo "</table>";
    ?>
</li>
</ul>

</form>
</body>
</html> 
```

删除.php

```
if (isset($_GET['id']) && is_numeric($_GET['id']))
{
 // get id value
$id = $_GET['id'];;
 }

$rec = "delete from data where id='$id'";

if(mysql_query($rec)){
echo "<center></h1>Selected Customer serve by DC</h1></center>"."<br />";
echo "<center></h6>Please wait while you are redirected Home in 3 seconds..</h6>      </center>"."<br />";
header('Refresh: 3; url=home.php');
}
else{
die("Data failed to delete in the database");
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:03:18.710

好的，这是我认为您所要求的一个示例：我在标题中分隔了 js，以便您更好地理解。第一个执行弹出框，第二个脚本执行 ajax 调用。记住这是一个非常基本的例子

测试.html

```
 <!DOCTYPE html>
<html lang="en">
  <head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>

$(document).ready(function() {  

    //select all the a tag with name equal to modal
    $('a[name=modal]').click(function(e) {
        //Cancel the link behavior
        e.preventDefault();

        //Get the A tag
        var id = $(this).attr('href');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow",0.9);  

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top',  winH/3-$(id).height()/3);
        $(id).css('left', winW/2-$(id).width()/2);

        //transition effect
        $(id).fadeIn(2000); 

    });

    //if close button is clicked
    $('.window .close').click(function (e) {
        //Cancel the link behavior
        e.preventDefault();

        $('#mask').hide();
        $('.window').hide();
    });     

    //if mask is clicked
    $('#mask').click(function () {
        $(this).hide();
        $('.window').hide();
    });         

    $(window).resize(function () {

        var box = $('#boxes .window');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        box.css('top',  winH/2 - box.height()/2);
        box.css('left', winW/2 - box.width()/2);

    });

});

</script>

 <script type="text/javascript"> 
function ConfirmDelete()
{
var confirm = document.getElementById('confirm').value;
var dataString = 'password='+ confirm;
if(confirm.length>0)

{

$.ajax({
type: "GET",
url: "delete.php",
data: dataString,
success: function(server_response)
{
 document.getElementById("results").style.display = "block";
$('#results').html(server_response).show();
$('#mask').hide();
$('.window').hide();

}
});

}
return false;
}

</script>
<style type="text/css">
#mask{position:absolute;left:0;top:0;z-index:9000;background-color:#222;display:none}
.window{position:fixed;left:0;top:0;width:450px;height:200px;display:none;z-index:9999;padding:20px}
#dialog1{padding:10px 10px 8px 25px;border:2px solid #a1a1a1;width:450px;height:200px; background-image:url('imgs/bg.jpg');

</style>
  </head>
  <body>
 <a href="#dialog1" name="modal">Delete this Entry</a> 
 <!-- Start of MODAL BOX -->  
<div id="dialog1" class="window" align="center">
<font color="#FFFFFF">If you are sure you wish to delete this please enter your admin password</font><br>
<font color="#FFFFFF"><b>test password ( Admin )</b></font>
<input type="password" id="confirm"/><br><br>
<input type="submit" name="confirm_delete" onclick="ConfirmDelete()"  value="Confirm Delete">
</div><!-- End of MODAL BOX --> 
<div id="mask"></div><!-- Mask to cover the whole screen -->

<div id="results" class="results" style="display:none;"> </div>

  </body>
</html> 
```

调用页面这是你将拥有你的 php 的地方

删除.php

```
 <?PHP
if($_GET['password'] === "Admin")
    {
        //sucess do your delete here
        echo " this was the correct password ";

    }
    else
        {
            //failure
            echo " Password incorrect!! ";

    }
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T18:20:59.550

在客户端进行 JS 检查并在服务器端使用 CRSF - [http://en.wikipedia.org/wiki/Cross-site_request_forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery)

这是一个很好的例子：[CSRF (Cross-site request forgery) attack example and prevent in PHP](https://stackoverflow.com/questions/2526522/csrf-cross-site-request-forgery-attack-example-and-prevention-in-php)

# excel - 在 excel 中链接两张工作表 - 所以在一个中添加的行会在第二个中添加

> ID：13939062
> 
> 赞同：0
> 
> 时间：2012-12-18T18:19:13.617
> 
> 标签：excel

我想知道是否可以链接两张纸，这样如果我在一张纸中添加一行，它会自动添加到第二张纸上。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:49:01.073

您可以通过按住 CTRL 并选择要分组的工作表的选项卡来将工作表“组合”在一起。添加和删​​除行和列将导致对所有选定的工作表进行相同的处理。但这是暂时的，一旦选择另一张纸或关闭文件，它就会丢失。

对于更长期的纠缠，您将需要 VBA 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:30:43.843

不完全是——我很确定你不能链接整个工作表。但是您可以使用带有单元格引用的公式，例如`=Sheet2!B2`引用 Sheet2 中的单元格 B2。

你也可以试试`vlookup()`公式函数。如果您在工作簿的某处定义了表，则可以使用此函数根据表中另一列提供的值从表的一列返回值。

# google-app-engine - 使用 Objectify 4 过滤属性

> ID：13939074
> 
> 赞同：-2
> 
> 时间：2012-12-18T18:20:00.020
> 
> 标签：google-app-engine, frameworks, objectify

我正在尝试在 GAE 中使用 Objectify 进行过滤：

```
List<users> ul =  ofy.load().type(Usuario.class).filter("name", "gildus").list(); 
```

在用户类中使用注解@Index：

```
@Entity
public class Users {

@Id
private Long id;

@Index
private String name;

... 
```

过滤结果为空，尽管有值“gildus”。当我使用 ID 字段时，如果它显示结果（....filter("id", "1").list() ）。

我还能做些什么来让它发挥作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T09:45:50.087

当我使用 ID 字段时，如果它显示结果`(....filter("id", "1").list() )`。

不要使用过滤器`id`。请改用以下内容：

```
Usuario user = ofy.load().type(Usuario.class).id(1).get(); 
```

# infragistics - Infragistics UltraWinGrid 列方向

> ID：13939075
> 
> 赞同：0
> 
> 时间：2012-12-18T18:20:00.867
> 
> 标签：infragistics, ultrawingrid, column-oriented

这是与 Infragistics UltraWinGrid Columns 有关的问题。![  Infragistics UltraWinGrid 列](../Images/04fa049ca06b1523c446cc837a074e1d.png)

我正在使用 Infragistics2.Win.UltraWinGrid.v10.3

正如您在图像中看到的，列在顶部并且从左到右跨越。

我可以用左侧从上到下的列显示相同的数据吗？

设置在哪里？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:50:41.453

您是在谈论 Cardview 布局模式吗？（图片取自安装的样本）

![卡片视图模式下的 Infragistics UltraGrid](../Images/7c8d5c2952bb59fef4a720a2dbed24ed.png)

可以激活此布局设置

```
ultraGrid1.DisplayLayout.Bands[0].CardView = True; 
```

视图外观中涉及的其他属性是

```
ultraGrid1.DisplayLayout.Bands[0].CardSettings..... 
```

# matlab - 为什么第一次调用 Matlab DLL 比后续调用要长得多？

> ID：13939076
> 
> 赞同：5
> 
> 时间：2012-12-18T18:20:01.513
> 
> 标签：matlab, matlab-deployment

我从我的 C++ 代码中调用了一个用 MATLAB 编写的 DLL。我观察到一个奇怪的效果：第一次调用比下一次调用花费更多的时间。它需要3-4倍以上。正常吗？有可能用它做点什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:25:52.267

是的，这很正常，延迟来自启动[MATLAB Runtime Compiler](http://www.mathworks.com/products/compiler/mcr/index.html)。这是从您通过 MATLAB 创建的 dll 运行 MATLAB 代码的内容。AFAIK 无法避免初始启动，但您可以在应用程序开始时向 DLL 添加一个虚拟调用，以避免以后的“成本”。

# html - 使用客户端模板的脚本标签，为什么我不能通过 src 属性加载？

> ID：13939084
> 
> 赞同：3
> 
> 时间：2012-12-18T18:20:34.797
> 
> 标签：html, templates, client-side-templating

这工作正常（我能够通过 id 访问 dom 中的片段）

```
<script type="text/x-template" id="todo-item-template">
  <div class="todo-view">
    {blah} {blah}
  </div>
</script> 
```

但是如果我将模板放在外部资源中，我在 dom 中找不到它：

```
<script type="text/x-template" id="todo-item-template" src="todo-item-template.html"> 
```

chrome 给了我一个我认为无关紧要的警告：

```
Resource interpreted as Script but transferred with MIME type text/html: 
"http://localhost:8000/todo2/todo-stats-template.html". 
```

我正在从文件系统和/或从`python -m SimpleHTTPServer`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:25:24.217

这是因为服务器将`.html`文件作为 HTML 文件提供。您将希望模板文件是不同的文件类型，例如`.tpl`让服务器发送适当的标头。

# java - Java如何按其元素之一按字母顺序排列列表

> ID：13939089
> 
> 赞同：-3
> 
> 时间：2012-12-18T18:20:45.610
> 
> 标签：java, android, list, sorting, twitter4j

我正在尝试将用户朋友列表添加到我的应用程序中，以便他们可以快速找到他们在 twitter 上关注的人，目前我能够做到这一点，但结果基于用户关注的最新人而不是返回按我想要的字母顺序，有没有一种方法可以让我从本质上获取一个列表并根据列表中的一个特定元素对整个列表进行排序？

编辑：抱歉完全忘了添加我的代码，我很抱歉

```
long cursor = -1;
        List<User> users = new ArrayList<User>();
        try {
            PagableResponseList<User> userGroups = null;
            do {
                userGroups = twitter.getFriendsList(app.getUserId(), cursor);
                for (User user : userGroups) {
                    users.add(user);
                }
            } while ((cursor = userGroups.getNextCursor()) != 0);

        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:15:31.480

使用[`Collections.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)方法。您必须为此创建一个自定义[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)，但有很多可用的教程。
您基本上所做的是将 Comparator 子类化以比较两个`User`对象，并根据名称返回结果。如果名称是字符串，您可以直接返回`user1.name.compareTo(user2.name);`，因为字符串已经有比较方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:44:48.967

将您的列表更改为一组

```
Set<User> users = new TreeSet<User>(); 
```

这假设您`User`的 s 是唯一的。

您可能必须`User`用自己的类包装该类，以便编写自己的`Comparator`.

# java - 在 URL 中获取图像

> ID：13939091
> 
> 赞同：1
> 
> 时间：2012-12-18T18:21:03.457
> 
> 标签：java, url

有什么问题，如果不保存在硬盘驱动器上，我就无法下载图像

```
try {
         sentenceLabel= new JLabel(new ImageIcon(ImageIO.read(new URL("http://www.google.ru/intl/en_com/images/logo_plain.png"))));
    } catch (MalformedURLException ex) {
        // TODO Auto-generated catch block
        ex.printStackTrace();
    } catch (IOException ex) {
        // "http://img.yandex.net/i/wiz"+imgType.trim()+".png"
        ex.printStackTrace();
    } 
```

怎么了？对不起菜鸟问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:37:37.433

**你的代码完全没问题。**这向我显示了内容窗格中的图像。

```
 JFrame frame = new JFrame(); 
    frame.setTitle("Polygons"); 
    frame.setSize(550, 550); 
    Container contentPane = frame.getContentPane(); 
    try {
     JLabel sentenceLabel= new JLabel(new ImageIcon(
                  ImageIO.read(new URL(
                     "http://www.google.ru/intl/en_com/images/logo_plain.png"))));
     contentPane.add(sentenceLabel);
    } catch (MalformedURLException ex) {
        // TODO Auto-generated catch block
        ex.printStackTrace();
    } catch (IOException ex) {
        // "http://img.yandex.net/i/wiz"+imgType.trim()+".png"
        ex.printStackTrace();
    }
    frame.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:26:14.607

您可以使用此代码下载图像：

```
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.net.URL;

public class ImageDownloader
{      
    public static void main(String[] args )
    {
        BufferedImage image =null;
        try{

            URL url =new URL("http://developerfeed.com/sites/default/files
                             /have_a_question.png");
            // read the url
           image = ImageIO.read(url);

            for png
            ImageIO.write(image, "png",new File("/tmp/have_a_question.png"));

            // for jpg
            ImageIO.write(image, "jpg",new File("/tmp/have_a_question.jpg"));

        }catch(IOException e){
            e.printStackTrace();
        }
    }} 
```

# c - Glue constant with macro in C

> ID：13939094
> 
> 赞同：0
> 
> 时间：2012-12-18T18:21:22.293
> 
> 标签：c

> **Possible Duplicate:**
> [C preprocessor and concatenation](https://stackoverflow.com/questions/1489932/c-preprocessor-and-concatenation)

I have the macro

```
#define BUS B 
```

I want to make macro `BUS_PORT` that expands to `PORTB`.

I did following:

```
#define BUS_PORT PORT ## BUS 
```

But `BUS_PORT` expands to `PORTBUS`. What I did wrong? How to make it right?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:31:10.607

As explained in [this answer](https://stackoverflow.com/questions/1489932/c-preprocessor-and-concatenation/1489985#1489985), you need an extra level of indirection. E.g.

```
#define BUS B
#define PASTER(x,y) x ## y
#define EVALUATOR(x,y) PASTER(x,y)
#define BUS_PORT EVALUATOR(PORT, BUS) 
```

# css - Eclipse 中 Javadocs 的自定义样式

> ID：13939095
> 
> 赞同：5
> 
> 时间：2012-12-18T18:21:24.353
> 
> 标签：css, eclipse, javadoc

我发现我可以在 Eclipse 中向 Javadocs 添加一些 CSS 样式，为内联代码悬停创建一些不错的效果。

示例 javadoc：

```
/**
 * <p>This is a general description of the class.<p>
 * 
 * <p>Here is a useful direct quote:</p>
 * 
 * <div style="background-color:white; border: 1px solid gray; margin: 1em 2.5em; padding: 0em 0.5em">
 *   <p>This quote has a list:</p>
 *   <ul>
 *     <li>Item 1</li>
 *     <li>Item 2</li>
 *   </ul>
 * </div>
 *
 */
public class SSCCE {

} 
```

样本结果： ![Javadoc 悬停示例](../Images/c9ec621e092d03e40cdb8771ea6975e9.png)

我想在我的代码中更多地利用这一点，但如果我可以使用类似的东西`<div class="box">`而不是手动设置样式属性会更好，原因如下：

1.  如果我以后决定调整样式，我可能需要更改数百个 Javadoc 注释
2.  目前，我只关心 Eclipse 中的外观。但是，如果我曾经将 Javadocs 导出为 HTML，我可能希望 HTML 版本具有与 Eclipse 版本不同的样式。

是否可以在 Eclipse 中执行此操作，也许使用插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T00:22:00.970

通过实验，我发现我可以使用相对于 .java 文件位置的`<link>`标签链接到样式表。`href`这确实解决了问题中提到的问题＃1，但我个人认为它太麻烦了，可能不会使用它。它也不能解决问题#2（如果有的话，它会使情况变得更糟）。

我仍然愿意接受更好的解决方案的建议！我怀疑虽然它需要一个 Eclipse 插件才能完全实现我真正想做的事情。

*[项目根]/src/org/foobar/Foo.java：*

```
package org.foobar;

/**
 * <link rel="stylesheet" type="text/css" href="../../../javadoc.css"/>
 * 
 * <p class="orange">Foo doc, in orange</p>
 */
public class Foo {

} 
```

*[项目根]/javadoc.css*

```
p.orange {
    color: orange;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T21:21:47.460

我认为当您将部分导出为样式化的 JavaDoc 时，您可以使用这个[Java 工具](http://docs.oracle.com/javase/6/docs/technotes/guides/javadoc/index.html)。还可以查看这[本书](http://my.safaribooksonline.com/book/programming/java/0321246233/documenting-your-code-with-javadoc/ch15lev1sec5)，它可能有助于在 Eclipse 中为 javadoc 指定样式表。也许您还可以创建自己的文档生成插件。

# ruby - 为什么在 Ruby 中不鼓励使用 else 语句？

> ID：13939099
> 
> 赞同：7
> 
> 时间：2012-12-18T18:21:30.447
> 
> 标签：ruby, coding-style, conditional-statements

前几天我在寻找一个 Ruby 代码质量工具，偶然发现了[pelusa](https://github.com/codegram/pelusa) gem，它看起来很有趣。它检查的一件事是给定 Ruby 文件中使用的 else 语句的数量。

我的问题是，为什么这些不好？我知道`if/else`语句通常会增加很多复杂性（我知道目标是降低代码复杂性），但是如果没有`else`?

回顾一下，我有两个问题：

1) 除了降低代码复杂性之外，还有其他原因可以避免 else 语句吗？

2) 这是我正在开发的应用程序中使用`else`语句的示例方法。没有人你会怎么写这个？我能想到的唯一选择是三元语句，但这里有足够的逻辑，我认为三元语句实际上会更复杂，更难阅读。

```
def deliver_email_verification_instructions
  if Rails.env.test? || Rails.env.development?
    deliver_email_verification_instructions!
  else
    delay.deliver_email_verification_instructions!
  end
end 
```

如果您使用三元运算符编写此代码，它将是：

```
def deliver_email_verification_instructions
  (Rails.env.test? || Rails.env.development?) ? deliver_email_verification_instructions! : delay.deliver_email_verification_instructions!
end 
```

是对的吗？如果是这样，那不是更难阅读吗？声明没有`else`帮助打破这一点吗？有没有另一种更好的、`else`更少的方式来写这个我没有想到的？

我想我在这里寻找风格方面的考虑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T00:17:15.247

首先让我说你的代码并没有什么*问题*，通常你应该知道，无论代码质量工具告诉你什么，都*可能*是完全无稽之谈，因为它缺乏评估你实际在做什么的上下文。

但回到代码。如果有一个类只有一个方法，其中代码片段

```
if Rails.env.test? || Rails.env.development?
    # Do stuff
else
    # Do other stuff
end 
```

发生了，那完全没问题（对于给定的事情*总是*有不同的方法，但你不必担心这一点，即使程序员会因为你不与他们争论而讨厌你:D）。

现在是棘手的部分。人们非常懒惰，因此像上面这样的代码片段很容易成为复制/粘贴编码的目标（这就是为什么人们会争辩说应该首先避免它们，因为如果你稍后扩展一个类，你更有可能只是复制和粘贴东西而不是实际重构它）。

让我们以您的代码片段为例。我基本上提出了与@Mik_Die 相同的建议，但是他的示例同样容易被复制/粘贴为您的示例。因此，应该做的（IMO）是这样的：

```
class Foo
  def initialize
    @target = (Rails.env.test? || Rails.env.development?) ? self : delay
  end

  def deliver_email_verification_instructions
    @target.deliver_email_verification_instructions!
  end
end 
```

这可能不适用于您的应用程序，但我希望您明白这一点，即：不要重复自己。曾经。每次你重复自己时，不仅会降低代码的可维护性，而且还会因此在未来更容易出错，因为你复制和粘贴的任何内容都可能发生一次甚至 99/100 次更改，但是剩下的一个事件是导致`@disasterOfEpicProportions`最终的原因:)

* * *

我忘记的另一点是@RayToal 提出的（谢谢:)，即 if/else 构造通常与布尔输入参数结合使用，从而产生了诸如此类的构造（我有一个项目的实际代码）维持）：

```
class String
  def uc(only_first=false)
    if only_first
      capitalize
    else
      upcase
    end
  end
end 
```

让我们忽略这里明显的方法命名和猴子补丁问题，并专注于 if/else 构造，它用于`uc`根据参数赋予方法两种不同的行为`only_first`。这样的代码违反了单一职责原则，因为你的方法**做的不止一件事**，这就是为什么你应该首先编写两个方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:43:20.270

```
def deliver_email_verification_instructions
  subj = (Rails.env.test? || Rails.env.development?) ? self : delay
  subj.deliver_email_verification_instructions!
end 
```

# javascript - D3.js 在 IE9 和 firefox 中访问本地文件

> ID：13939101
> 
> 赞同：0
> 
> 时间：2012-12-18T18:21:42.377
> 
> 标签：javascript, html, internet-explorer-9, d3.js, local

在使用 D3 时，以下代码可以在 Firefox 中访问 .csv 文件的内容，但不能在 IE9 中访问。

```
 d3.csv("cust_data.csv", function (csv) {}) 
```

cust_data.csv 与 .html 位于同一文件夹中，任何人都可以提出原因。在 IE9 中如何访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:24:59.907

知道您遇到了什么错误会很有用。如果它给你某种权限/ IO访问错误，我会假设错误是因为你没有使用本地Web服务器运行它。可以在[此处找到有关如何运行 python Web 服务器的描述](https://github.com/mbostock/d3/wiki)

# linux - 信号强度 adhoc 模式 ubuntu

> ID：13939106
> 
> 赞同：0
> 
> 时间：2012-12-18T18:21:58.677
> 
> 标签：linux, ubuntu

当两台 ubuntu 机器以 ad hoc 模式运行时，是否有任何可能的方法来测量信号强度。我曾尝试使用 iwspy 命令，但它显示错误如下。

root@dibya-notebook:~/Desktop# iwspy wlan0 wlan0 接口不支持无线统计

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:10:41.753

```
root@dibya-notebook:~/Desktop# iwspy wlan0 wlan0 Interface doesn't support wireless
statistic collection 
```

上面的错误是因为你`iwspy`没有在你的界面上激活。如果我没记错的话，你可以激活它，指定目标`IP`地址和`NIC`接口，

```
sudo iwspy wlan0 <IP addr> 
```

您也可以通过 取消激活它`sudo iwspy wlan0 off`。

# ruby - 使用 Ruby 运行 FFprobe 时出现问题

> ID：13939107
> 
> 赞同：0
> 
> 时间：2012-12-18T18:22:06.027
> 
> 标签：ruby, json, terminal, ffprobe

我对 Ruby 和编程相当陌生，不到一年的经验。这是 ruby​​ 1.9.3 和来自 FFmpeg 的 Ubuntu 的最新 ffmpeg。我使用的文件是基本的 .avi、一些 v210 .mov、其他 quicktime/finalcutpro 类型的文件。

我正在尝试编写一个自动探测工具，当我开始测试和处理大量媒体文件时，它有助于减轻我的手动工作量。基本上，脚本会遍历一个目录并探测每个文件，提取我需要的信息，然后将其写入 csv。

目前，每次我运行它时，命令行上的实际捕获都失败了。

```
def prober(file)
  @the_file = file
  stdout,stderr,status = Open3.capture3("ffprobe -v quiet -print_format json -      show_format -show_streams #{@the_file}")
  STDERR.puts stderr
  if status.success?
    out = stdout
  else
    STDERR.puts "There was a problem, please try again."
  end
  @raw_output = JSON.parse(out)
end 
```

我不知道这是否与我运行命令的方式有关（我并不完全了解 I/O 流），或者与 ffprobe 相关。当它通过探测时，它会将@raw_output 作为 nil 返回，这会导致 JSON 解析失败，或者我用于拆分和解析元数据的其他方法在 nil 上失败。

任何帮助都会很棒，我已经坚持了一段时间。谢谢！如果需要澄清，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:07:10.790

假期过后，我回来时发现了问题。文件路径字符串在输入到 ffprobe 的标准输入时需要在其周围加上引号，但是当我聚合文件时，它会去掉引号。修复？在字符串中的文件路径周围添加引号。

我希望这对某人有所帮助，显然我是整个互联网上唯一遇到此问题的人。

# ios - 我可以用什么代替“presentModalViewController”？

> ID：13939108
> 
> 赞同：0
> 
> 时间：2012-12-18T18:22:07.420
> 
> 标签：ios

我想从我的代码中拍照。所以这是我调用相机的代码：

```
 [self presentModalViewController:self.cameraViewController.imagePickerController animated:YES]; 
```

但是当它起作用时，我的父视图的`dealloc`功能就起作用了。所以我需要这个视图信息。反正我可以用它来代替`presentModalViewController`吗？或任何其他解决此问题的方法。谢谢。

编辑：我的 .h 类

```
@property(nonatomic,strong)CameraViewController_iPhone *cameraViewController; 
```

我的 .m 课

```
-(void)openCamera{

if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{
    [self.cameraViewController setupImagePicker:UIImagePickerControllerSourceTypeCamera];
    self.cameraViewController.modalPresentationStyle = UIModalPresentationCurrentContext;
    self.cameraViewController.modalPresentationStyle = UIModalPresentationFullScreen;

    [self presentModalViewController:self.cameraViewController.imagePickerController animated:YES];
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:41:56.257

您必须将相机呈现为模态视图控制器。

编辑：那么你有一个基本的内存管理问题。最好在没有 ARC 的情况下学习编程。只有在了解了 Objective-c 中的内存管理之后，才应该使用它。

# unit-testing - 在 Testng 中共享对象 b/w 测试

> ID：13939117
> 
> 赞同：0
> 
> 时间：2012-12-18T18:22:32.337
> 
> 标签：unit-testing, testng

在 Junit 中，只能重用静态对象 b/w 测试，但在 Testng 中，可以重用对象而无需声明它们是静态的。有什么方法可以关闭Testng的这个功能吗？

# python - 在python中清理文件路径

> ID：13939120
> 
> 赞同：12
> 
> 时间：2012-12-18T18:22:49.343
> 
> 标签：python

我有一个文件浏览器应用程序，它向用户公开目录及其内容。

我想清理用户输入，这是一个文件路径，因此它不允许诸如“/tmp/”之类的绝对路径和诸如“../../etc”之类的相对路径

是否有跨平台执行此操作的 python 函数？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-05-13T08:31:56.803

`A/./B -> A/B`也适用于寻找摆脱`A/B/../C -> A/C`路径的人。你可以使用[`os.path.normpath`](https://docs.python.org/2/library/os.path.html#os.path.normpath)它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-08T02:11:35.237

### 一个全面的python文件路径清理器

我对清理路径的任何可用方法都不满意，所以我编写了自己的相对全面的路径清理器。这适用于*从公共端点（http 上传、REST 端点等）获取输入，并确保如果您将数据保存在生成​​的文件路径中，它不会损坏您的系统**。（注意：此代码针对 Python 3+，您可能需要进行一些更改才能使其在 2.x 上运行）

***没有保证！请不要在没有自己彻底检查的情况下依赖此代码。

****同样，不保证！您仍然可以做一些疯狂的事情并将您在 *nix 系统上的根路径设置为`/dev/`或`/bin/`类似的东西。不要那样做。Windows 上也有一些可能导致损坏的边缘情况（例如设备文件名），如果您的目标是 Windows，您可以检查's中的`secure_filename`方法以获得处理这些问题的良好开端。`werkzeug``utils`

### 这个怎么运作

*   您需要指定根路径，消毒器将确保返回的所有路径都在此根下。检查`get_root_path`功能以了解在哪里执行此操作。确保根路径的值来自您自己的配置，而不是用户输入！
*   有一个文件名消毒剂：
    *   将 unicode 转换为 ASCII
    *   将路径分隔符转换为下划线
    *   仅允许文件名中的白名单中的某些字符。白名单包括所有小写和大写字母、所有数字、连字符、下划线、空格、左圆括号和右圆括号以及句号（句点）。如果需要，您可以自定义此白名单。
    *   确保所有名称至少有一个字母或数字（避免使用“..”之类的名称）
*   要获得有效的文件路径，您应该调用`make_valid_file_path`. 您可以选择在`path`参数中将子目录路径传递给它。这是根路径下的路径，可以来自用户输入。您可以选择在`filename`参数中传递一个文件名，这也可以来自用户输入。您传递的文件名中的任何路径信息都不会用于确定文件的路径，而是将其展平为文件名的有效、安全的组成部分。
    *   如果没有路径或文件名，它将返回为主机文件系统正确格式化的根路径，并带有尾随路径分隔符 (/)。
    *   如果有子目录路径，它会将其拆分为其组成部分，使用文件名 sanitiser 对每个部分进行清理，并在没有前导路径分隔符的情况下重建路径。
    *   如果有文件名，它将使用消毒剂对名称进行消毒。
    *   它将`os.path.join`路径组件获取文件的最终路径。
    *   作为最终的双重检查结果路径是否有效且安全，它会检查结果路径是否位于根路径下的某个位置。通过拆分和比较路径的组成部分来正确完成此检查，而不仅仅是确保一个字符串以另一个字符串开头。

好的，足够的警告和描述，这里是代码：

```
import os

def ensure_directory_exists(path_directory):
    if not os.path.exists(path_directory):
        os.makedirs(path_directory)

def os_path_separators():
    seps = []
    for sep in os.path.sep, os.path.altsep:
        if sep:
            seps.append(sep)
    return seps

def sanitise_filesystem_name(potential_file_path_name):
    # Sort out unicode characters
    valid_filename = normalize('NFKD', potential_file_path_name).encode('ascii', 'ignore').decode('ascii')
    # Replace path separators with underscores
    for sep in os_path_separators():
        valid_filename = valid_filename.replace(sep, '_')
    # Ensure only valid characters
    valid_chars = "-_.() {0}{1}".format(string.ascii_letters, string.digits)
    valid_filename = "".join(ch for ch in valid_filename if ch in valid_chars)
    # Ensure at least one letter or number to ignore names such as '..'
    valid_chars = "{0}{1}".format(string.ascii_letters, string.digits)
    test_filename = "".join(ch for ch in potential_file_path_name if ch in valid_chars)
    if len(test_filename) == 0:
        # Replace empty file name or file path part with the following
        valid_filename = "(Empty Name)"
    return valid_filename

def get_root_path():
    # Replace with your own root file path, e.g. '/place/to/save/files/'
    filepath = get_file_root_from_config()
    filepath = os.path.abspath(filepath)
    # ensure trailing path separator (/)
    if not any(filepath[-1] == sep for sep in os_path_separators()):
        filepath = '{0}{1}'.format(filepath, os.path.sep)
    ensure_directory_exists(filepath)
    return filepath

def path_split_into_list(path):
    # Gets all parts of the path as a list, excluding path separators
    parts = []
    while True:
        newpath, tail = os.path.split(path)
        if newpath == path:
            assert not tail
            if path and path not in os_path_separators():
                parts.append(path)
            break
        if tail and tail not in os_path_separators():
            parts.append(tail)
        path = newpath
    parts.reverse()
    return parts

def sanitise_filesystem_path(potential_file_path):
    # Splits up a path and sanitises the name of each part separately
    path_parts_list = path_split_into_list(potential_file_path)
    sanitised_path = ''
    for path_component in path_parts_list:
        sanitised_path = '{0}{1}{2}'.format(sanitised_path, sanitise_filesystem_name(path_component), os.path.sep)
    return sanitised_path

def check_if_path_is_under(parent_path, child_path):
    # Using the function to split paths into lists of component parts, check that one path is underneath another
    child_parts = path_split_into_list(child_path)
    parent_parts = path_split_into_list(parent_path)
    if len(parent_parts) > len(child_parts):
        return False
    return all(part1==part2 for part1, part2 in zip(child_parts, parent_parts))

def make_valid_file_path(path=None, filename=None):
    root_path = get_root_path()
    if path:
        sanitised_path = sanitise_filesystem_path(path)
        if filename:
            sanitised_filename = sanitise_filesystem_name(filename)
            complete_path = os.path.join(root_path, sanitised_path, sanitised_filename)
        else:
            complete_path = os.path.join(root_path, sanitised_path)
    else:
        if filename:
            sanitised_filename = sanitise_filesystem_name(filename)
            complete_path = os.path.join(root_path, sanitised_filename)
        else:
            complete_path = complete_path
    complete_path = os.path.abspath(complete_path)
    if check_if_path_is_under(root_path, complete_path):
        return complete_path
    else:
        return None 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-12T09:15:48.933

这将阻止用户输入文件名，`../../../../etc/shadow`但也不允许以下子目录中的文件`basedir`（即被`basedir/subdir/moredir`阻止）：

```
from pathlib import Path
test_path = (Path(basedir) / user_input).resolve()
if test_path.parent != Path(basedir).resolve():
    raise Exception(f"Filename {test_path} is not in {Path(basedir)} directory") 
```

如果您想允许以下子目录`basedir`：

```
if not Path(basedir).resolve() in test_path.resolve().parents:
    raise Exception(f"Filename {test_path} is not in {Path(basedir)} directory") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-05T00:49:30.990

我最终在这里寻找一种快速的方法来处理我的用例并最终编写了我自己的。我需要的是一种方法来获取路径并强制它进入 CWD。这适用于处理挂载文件的 CI 系统。

```
def relative_path(the_path: str) -> str:
    '''
    Force the spec path to be relative to the CI workspace
    Sandboxes the path so that you can't escape out of CWD
    '''
    # Make the path absolute
    the_path = os.path.abspath(the_path)
    # If it started with a . it'll now be /${PWD}/
    # We'll get the path relative to cwd
    if the_path.startswith(os.getcwd()):
        the_path = '{}{}'.format(os.sep, os.path.relpath(the_path))
    # Prepend the path with . and it'll now be ./the/path
    the_path = '.{}'.format(the_path)
    return the_path 
```

就我而言，我不想引发异常。我只想强制任何给定的路径都将成为CWD*中的绝对路径。*

测试：

```
def test_relative_path():
    assert relative_path('../test') == './test'
    assert relative_path('../../test') == './test'
    assert relative_path('../../abc/../test') == './test'
    assert relative_path('../../abc/../test/fixtures') == './test/fixtures'
    assert relative_path('../../abc/../.test/fixtures') == './.test/fixtures'
    assert relative_path('/test/foo') == './test/foo'
    assert relative_path('./test/bar') == './test/bar'
    assert relative_path('.test/baz') == './.test/baz'
    assert relative_path('qux') == './qux' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-05T09:03:20.930

这是对@mneil 解决方案的改进，使用了`relpath`第二个秘密参数：

```
import os.path

def sanitize_path(path):
    """
    Sanitize a path against directory traversals

    >>> sanitize_path('../test')
    'test'
    >>> sanitize_path('../../test')
    'test'
    >>> sanitize_path('../../abc/../test')
    'test'
    >>> sanitize_path('../../abc/../test/fixtures')
    'test/fixtures'
    >>> sanitize_path('../../abc/../.test/fixtures')
    '.test/fixtures'
    >>> sanitize_path('/test/foo')
    'test/foo'
    >>> sanitize_path('./test/bar')
    'test/bar'
    >>> sanitize_path('.test/baz')
    '.test/baz'
    >>> sanitize_path('qux')
    'qux'
    """
    # - pretending to chroot to the current directory
    # - cancelling all redundant paths (/.. = /)
    # - making the path relative
    return os.path.relpath(os.path.normpath(os.path.join("/", path)), "/")

if __name__ == '__main__':
    import doctest
    doctest.testmod() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-12T08:43:07.900

要非常具体地提出问题，但会引发异常而不是将路径转换为相对路径：

```
path = 'your/path/../../to/reach/root'
if '../' in path or path[:1] == '/':
    raise Exception 
```

# regex - 具有不同整数长度的正则表达式

> ID：13939125
> 
> 赞同：3
> 
> 时间：2012-12-18T18:23:44.023
> 
> 标签：regex, matlab

我想将这些字符串从

```
CH1Avg
Ch2Avg
Ch3
Ch4Avg
Ch5
Ch6Avg
Chan7
Channel9
Ch010
Ch011Avg
Chann12Average 
```

...取决于...

```
Ch100AVG 
```

我需要将它们分成它们的组成部分

```
"Ch", ##, "Avg" 
```

第 1 和第 3 分量具有可变长度和形式。我想使用第二个分量进行拆分，它是一个长度从 0 到 100 不等的整数。这个整数可能是零填充的，也可能不是零填充的。

有什么想法吗？我正在尝试使用`()`但没有太大成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:42:05.307

要将字符串拆分为组成部分，为了方便起见，我建议使用命名标记：

```
strCell = {'CH1Avg'
'Ch2Avg'
'Ch3'
'Ch4Avg'
'Ch5'
'Ch6Avg'
'Chan7'
'Channel9'
'Ch010'
'Ch011Avg'
'Chann12Average'}

out = regexp(strCell,'(?<channelName>\D+)(?<channelNum>\d+)(?<channelType>\w*)','names')
out = [out{:}];

out(end)
ans = 
    channelName: 'Chann'
     channelNum: '12'
    channelType: 'Average' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:53:58.367

拆分在`(\d+)`. 括号确保您要拆分的数字也将成为数组的一部分。

# python - 获取/设置表中列的宽度 (PyGTK)

> ID：13939126
> 
> 赞同：2
> 
> 时间：2012-12-18T18:23:45.553
> 
> 标签：python, gtk, pygtk, gtk2

我在 PyGTK 显示中有几个表，我希望它们的行和列相互对齐。有没有办法在表格中获取和设置列尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:16:20.487

用于[`GtkSizeGroup`](http://developer.gnome.org/gtk3/stable/GtkSizeGroup.html)使不同表中的类似小部件请求相同的高度和/或宽度。

# c# - HttpContext.User.Identity.Name 返回空白

> ID：13939128
> 
> 赞同：3
> 
> 时间：2012-12-18T18:23:53.237
> 
> 标签：c#, asp.net-mvc

我试图弄清楚为什么`HttpContext.User.Identity.Name`返回空白。

**代码**

```
public ActionResult Test()
{
    string username = HttpContext.User.Identity.Name;
    return Content(username);         
} 
```

我在错误的上下文中使用它吗？我正在尝试获取用户的用户名。

**网络配置**

```
<authentication mode="Windows" /> 
```

**IIS**

我启用了匿名，没有其他检查。我正在运行 IIS 6.0。

我需要添加任何类型的信息来帮助解决这个问题吗？我很困。我[检查了这个问题](http://stackoverflow.com/questions/1056487/httpcontext-current-user-identity-name-is-always-string-empty)，但我是否需要设置一个 Cookie 才能完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:33:33.680

> 我启用了匿名，没有其他检查。我正在运行 IIS 6.0。

这意味着您将不会被提示登录，因此`User.Identity.IsAuthenticated`将为 false 并且`User.Identity.Name`为空白。

取消选中匿名身份验证并选中 Windows 身份验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:35:55.620

IsAuthenticated 返回 false，因此 Identity.Name 返回空字符串，因为您不需要对该操作进行身份验证。您必须启用 Windows 身份验证并要求对操作进行身份验证。尝试通过使用属性装饰用户来要求用户被授权执行该操作`[Authorize]`- 这将启动身份验证协商。

```
[Authorize]
public ActionResult Test()
{
    if(Request.IsAuthenticated)
    {
        string username = HttpContext.User.Identity.Name;
        return Content(username);         
    }
    else 
    {
        return Content("User is not authenticated");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-22T02:56:44.653

如果其他人遇到此问题，请验证“加载用户配置文件”选项是否设置为**true**。转到 IIS 应用程序池。从列表中选择您的应用程序池。单击高级设置并向下滚动到流程模型部分。

这解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-13T16:48:01.797

如果您使用 FormsAuthentication.SetAuthCookie 那么您需要添加

```
<authentication mode="Forms" /> 
```

至

```
<System.Web> 
```

在 Web.config 文件中。从[这里解决](https://stackoverflow.com/questions/21913716/setauthcookie-setting-cookie-but-not-isauthenticated-on-subsequent-requests)

# performance - 通过在循环内部或外部执行操作来加速程序

> ID：13939135
> 
> 赞同：1
> 
> 时间：2012-12-18T18:24:44.550
> 
> 标签：performance, optimization, loops, fortran, bigdata

我只是有一个fortran优化的问题（可能是一般的程序）：

有两种方法可以执行基本操作，对整个向量或逐行进行，即

```
x = array(:,1)
y = array(:,2)
z = array(:,3)

x1 = floor(x/k) + 1
y1 = floor(y/k) + 1
z1 = floor(z/k) + 1 
```

或者

```
do i = 1:n
   x1(i) = floor(x(i)/k) + 1
   y1(i) = floor(y(i)/k) + 1
   z1(i) = floor(z(i)/k) + 1
end do 
```

我可以在循环中执行 openmp，因为有 1 亿个条目，但我不确定它是否会起作用。在循环中还是在循环外执行它会更快吗？经验和常识告诉我要在外面做。该程序还有其他组件，但我发现大部分时间都花在了创建新向量 x1,y1,z1 上，因为要转换的 x,y,z 值太多了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:47:52.567

如果您关心执行速度，那么我建议您配置一个代码版本，该版本省去了似乎是临时数组切片`x`、`y`和`z`. 创建它们需要在机器内存周围复制很多东西。你可以简单地写

```
x1 = floor(array(:,1)/k) + 1
y1 = floor(array(:,2)/k) + 1
z1 = floor(array(:,3)/k) + 1 
```

您的编译器应该能够在不制作副本的情况下执行此操作，`array`但这是您应该检查的内容。

根据您的问题中未显示的代码元素，您甚至可以声明`x1`,`y1`并`z1`成为指针并编写如下内容：

```
array_over_k = floor(array/k) + 1
x1 => array_over_k(:,1)
y1 => array_over_k(:,2)
z1 => array_over_k(:,3) 
```

无论您采用哪种方式进行计算，您仍然需要进行计算，但是您是否需要制作数组元素的所有副本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:35:15.940

这将受到内存带宽的限制。如果它们在内存中是分开的（即不是一些奇怪的非连续指针），我会采用第一种方式。但最好尝试和测量，没有分析器很容易出错。此外，您也可以对第一个版本进行 OpenMP 或仅自动并行化。

# python - 条件跳过列表的 2 个成员

> ID：13939136
> 
> 赞同：0
> 
> 时间：2012-12-18T18:24:45.833
> 
> 标签：python

> **可能重复：**
> [迭代时修改列表](https://stackoverflow.com/questions/1637807/modifying-list-while-iterating)

我被赋予了在 python 中编写代码的任务，该代码将删除列表中多次出现的所有成员，并留下一份副本。条件：它应该不区分大小写

所以我写下了以下代码：

```
string = raw_input()
list1 = string.split(",")
low_case_list = list1[:] #for case-insesitive
for i in range(len(low_case_list)):
    low_case_list[i] = low_case_list[i].lower()
for member in low_case_list:
    if(low_case_list.count(member) > 1):
        del list1[low_case_list.index(member)]
        del low_case_list[low_case_list.index(member)] 
```

输入后我得到这个列表： [a,b,c,d,A,B,C,D,a,b,c,d] 并且在我对其进行操作之后： [B,D,a,b ，光盘]

我的问题是，为什么它在删除成员时会跳过“B”和“D”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:45:45.863

试试这个，应该很简单。鉴于您的清单`li`：

```
lowcase = [elem.lower() for elem in li]
output = []
for el in lowcase:
  if el not in output: output.append(el)
return output # if necessary, otherwise a simple li = output 
```

或者，以更快、更优雅的方式，您可以将整个`for`循环替换为：

```
[output.append(el) for el in lowcase if el not in output] 
```

您的代码应该是错误的，因为您引用了元素的索引，但是列表在循环期间会更改大小，因此索引也会更改。

编辑：没有考虑套装，显然它们是这里最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:28:54.720

为什么不将您`list`的`set`所有元素转换为a `lower-case`，然后再转换为 a `list`。您可以使用 a`generator`将每个元素转换为`lowercase`.

你可以这样做： -

```
>>> l = ['a', 'b', 'c', 'A', 'B', 'C', 'a', 'b', 'c']
>>> new_list = list(set(elem.lower() for elem in l))
>>> new_list
['a', 'c', 'b'] 
```

请注意，订单可能会更改，因为`set`不维护`order`其元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T18:28:29.447

你可以尝试这样的事情：

```
input = raw_input().split(',')
unique = set([s.lower() for s in input])
result = list(unique) 
```

# jquery - 为什么回调函数（第二个动画回调）作为循环执行，导致图像继续向左移动？

> ID：13939137
> 
> 赞同：0
> 
> 时间：2012-12-18T18:24:46.497
> 
> 标签：jquery

我的图像是绝对水平定位的，并且应该在每个间隔后向右移动到结束。

当第一个图像到达最后一个图像位置时，它们应该向左返回到开始位置。

我的代码会这样做，但它会继续将图像移动到数千像素。
之后，他们又开始向右移动。

这是为什么？

```
$(document).ready(function() {
    //alert("Ok");
    var w = 0;
    $('ul>li').each(function(i, o) {
        $(this).css({
            "position": "absolute",
            "left": 5 + w + 'px'
        })`enter code here`
        w = w + 210;
    });

    var lastPos = parseInt($("ul>li:last").css("left"));
    //alert(lastPos);
    var I = 0;
    setInterval(function() {
        I = parseInt($("ul>li:first-child").css("left"));
        //$("#i1").text(I);
        $("ul>li").animate({
            left: "+=210px"
        }, 500, function() {
            I = parseInt($("ul>li:first-child").css("left"));
            $("#i2").text(I);
            $("#i4").text(I > lastPos)
            if (I > lastPos) { //here comes the problem
                $("ul>li").animate({
                    left: "-=" + lastPos
                }, 500, function() {
                    I = parseInt($("ul>li:first-child").css("left"));
                    $("#i3").text(I);
                });
            }
        });
    }, 4000);
}) 
```

# windows-7 - 无法使用 StreamReader 对象通过 Windows 服务读取两个连续文件

> ID：13939138
> 
> 赞同：0
> 
> 时间：2012-12-18T18:24:48.273
> 
> 标签：windows-7, windows-services, streamreader, filesystemwatcher

我需要能够使用 Windows 服务中的 FileSystemWatcher 处理的 StreamReader 读取文件的行。

我已经阅读并尝试了所有在网上有意义的东西，但它仍然不起作用。当我连接到我的 Windows 服务进程（使用 Visual Studio 2010 的本地机器）时，整个过程完美无缺！

当我尝试运行它（在我的本地机器上）而不附加它并对其进行调试时，第二个文件永远不会通过，我得到以下消息：“进程无法访问文件'C:\Projects\Data\VendingStats \20121213_AZM_Journey_MIS.txt'，因为它正被另一个进程使用。” 我没有在我的机器上的其他任何地方打开这个文件。它只是坐在一个目录中。然后我将它复制到一个目录中，然后 FSW 接管（以及下面的代码）。

有人可以告诉我我需要做什么才能让它工作吗？我不知道为什么当我附加并调试它时它工作正常，但是当我发送文件而不附加和调试它时它不起作用。我觉得这肯定是我本地盒子上需要禁用的东西，等等——我不知道.....

我注意到该错误甚至在它进入“使用”语句之前就发生了，因为第二个文件从未被复制到临时目录以进行处理。

我在 StackTrace 中注意到，我收到以下错误：system.io.__error.winioerror(int32 errorcode string maybefullpath)

这是我的代码：

```
protected override void OnStart(string[] args)
        {
            FileSystemWatcher Watcher = new FileSystemWatcher(@"C:\Projects\Data\VendingStats");
            Watcher.EnableRaisingEvents = true;
            Watcher.Created += new FileSystemEventHandler(Watcher_Created);
            Watcher.Filter = "*.txt";
            Watcher.IncludeSubdirectories = false;
        }

private void Watcher_Created(object sender, FileSystemEventArgs e)
        {
            try
            {
                string targetPath =  @"C:\Temp\VendorStats";

                // Use Path class to manipulate file and directory paths. 
                FileInfo fi = new FileInfo(e.FullPath); // full name of path & file in the FSW directory
                string destFile = Path.Combine(targetPath, fi.Name);

                // To copy a folder's contents to a new location: 
                // Create a new target folder, if necessary. 
                if (!Directory.Exists(targetPath))
                    Directory.CreateDirectory(targetPath);

                // To copy a file to another location and  
                File.Copy(e.FullPath, destFile, true);

                // Set attribute to READONLY
                if (fi.IsReadOnly == false)
                    fi.Attributes = FileAttributes.ReadOnly;

                GetCruiseLineShipName(destFile, ref cruiseLine, ref shipName);

                using (StreamReader sr = new StreamReader(File.Open(destFile, FileMode.Open, FileAccess.Read, FileShare.Read)))
                {
                    filename = e.FullPath;

                    //How many lines should be loaded?
                    int NumberOfLines = 39;

                    //Read the number of lines and put them in the array
                    for (int i = 1; i < NumberOfLines; i++)
                    {
                        ListLines[i] = sr.ReadLine();
                        switch (i)
                        {
                            case 3:
                                int idx = ListLines[i].IndexOf(":");
                                string timeLine = ListLines[i].Substring(idx + 1);
                                dt = GetDate(Convert.ToDateTime(timeLine.Substring(1)));
                                break;

                            //more code here of the same                        
                        }
                    }
                    //InsertData into database                }
            }
            catch (Exception ex)
            {
                EventLog.WriteEntry("VendorStats", "Error in the Main:" + "\r\n\r\n" + ex.Message + "\r\n\r\n" + ex.InnerException);
                return;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:26:44.990

解决这个问题的底线是让方法（由 FileSystemWatcher 产生）休眠“X”秒，直到 Windows 将资源完全释放到先前和当前文件以及文件夹。

实际控制资源的是 FileSystemWatcher。

这是一些示例代码：

```
private static void Watcher_Created(object sender, FileSystemEventArgs e)
        {
            try
            {
                Thread.Sleep(10000);

                GetCruiseLineShipName(e.FullPath, ref cruiseLine, ref shipName);

                using (StreamReader sr = new StreamReader(File.Open(e.FullPath, FileMode.Open, FileAccess.Read, FileShare.Read)))
                { 
```

# java - java RMI新手--关于SSL和auth/.rate限制RMI服务的一些基本问题

> ID：13939144
> 
> 赞同：0
> 
> 时间：2012-12-18T18:25:13.393
> 
> 标签：java, rmi

我正在尝试使用 SSL 保护基于 java 的 RMI 服务。

我对使用 SSL 的功能有一些基本问题。具体来说，据我了解，通过 SSL 连接的客户端和服务器需要在客户端和服务器中都有适当的凭据证书，以便客户端被授予对服务器的访问权限。我的理解正确吗？

另外，我想知道的是，已经在使用我的 RMI 服务并可以访问客户端机器的人是否可以将客户端机器中的证书复制到其他客户端机器 - 然后调用我的 RMI 服务其他机器也一样？

如何防止这种情况发生？我的意思是，在 REST API 中您可以使用 OAuth 身份验证，我们可以在 RMI 服务中进行某种身份验证吗？

另外，我可以限制 RMI 服务的使用吗？例如，一个特定的客户可能被允许每天只对我的 RMI 服务进行 5000 次调用，如果他进行更多调用，那么在 5000 次调用限制之后发生的调用都会被拒绝？如何对我的 RMI 服务进行此类速率限制和/或身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:02:20.067

> 具体来说，据我了解，通过 SSL 连接的客户端和服务器需要在客户端和服务器中都具有适当的凭据证书，以便客户端被授予对服务器的访问权限。我的理解正确吗？

不，只有服务器需要证书。客户端证书是可选的。

> 另外，我想知道的是，一个已经在使用我的 RMI 服务并可以访问客户端机器的人，是否可以将客户端机器中的证书复制到其他客户端机器——然后调用我的 RMI 服务其他机器也一样？

当然。证书和应用程序的物理安全是您的问题。SSL 无法为您解决。

> 另外，我可以限制 RMI 服务的使用吗？例如，一个特定的客户可能被允许每天只对我的 RMI 服务进行 5000 次调用，如果他进行更多调用，那么在 5000 次调用限制之后发生的调用都会被拒绝？如何对我的 RMI 服务进行此类速率限制和/或身份验证？

自己编码。在数据库中粘贴一个每日计数器。

# json - POST 到foursquare API 的示例？

> ID：13939145
> 
> 赞同：1
> 
> 时间：2012-12-18T18:25:15.913
> 
> 标签：json, api, http, post, foursquare

我正在尝试添加一个新的签入，但我无法弄清楚 Foursquare 希望如何接收参数。我在正文中尝试了一个 url 编码的字符串：

```
shout=test&venueId=4a663032f964a5202fc81fe3 
```

我在正文中尝试了一个 JSON 字符串（带有 application/json Content-Type 标头）：

```
{"shout":"test","venueId":"4a4a9f71f964a52004ac1fe3"} 
```

但是，我总是得到错误响应：

```
meta =     {
    code = 400;
    errorDetail = "Must provide parameter venueId";
    errorType = other;
}; 
```

POST 到他们的签到/添加端点的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:22:18.540

场地 ID 必须作为 POST 参数发送。执行此操作的精确方法取决于您使用的库/语言。

例如，要在命令行上使用 CURL 执行此操作，您可以使用

```
curl https://api.foursquare.com/v2/checkins/add -F venueId=<the id> -F oauth_token=<the token> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:00:58.473

我得到了那个错误。

我的问题的解决方法是包含这样的 HTTP 标头内容类型：`Content-Type: application/x-www-form-urlencoded`

之后，我使用了这样的普通帖子数据：

text="t"&url=xxx&v=20130224

我注意到版本和 url 不能被引用，并且 url 需要进行 HTML 编码。

# javascript - 尝试创建多维数组时未定义的值

> ID：13939151
> 
> 赞同：0
> 
> 时间：2012-12-18T18:25:33.530
> 
> 标签：javascript

我正在尝试创建一个多维数组。

我假设以下结构`stuff['mykey1']['mykey2']['mykey3']`可以解释为`stuff`二维数组的数组。并将`stuff['mykey1']`返回一个带有以下键的二维数组`['mykey2']['mykey3']`

我尝试像这样创建这个结构：

```
var stuff = null;

if(stuff === null) 
{
    stuff = []; // stuff is []
}

if(stuff[userId] === undefined)
{
    stuff[userId] = [];  // stuff is [undefined, undefined, undefined, 888087 more...]
}

if(stuff[userId][objectId] === undefined)
{
    stuff[userId][objectId] = [];
} 
```

但是，当我一步一步查看 stuff 数组时，我看到了`stuff[userId] = []`; 东西数组是`[undefined, undefined, undefined, 888087 more...]`

我期待 [888087, []]

未定义的值从何而来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:29:56.900

> 未定义的值从何而来？

您使用的是数组，而不是对象。如果您在 Array 对象上添加数值属性，`length`它将被更新并且其他索引保持统一化（[稀疏数组](https://stackoverflow.com/q/1510778/1048572)），但显示为`undefined`（请参阅[JavaScript 中的“未定义 x 1”是什么？](https://stackoverflow.com/q/10683773/1048572)）。

相反，使用普通对象，其中数值属性没有特殊行为：

```
var stuff = null;

if(stuff === null) 
{
    stuff = {}; // stuff is an empty object
}

if(stuff[userId] === undefined)
{
    stuff[userId] = {};  // stuff is now enriched with one property
}

if(stuff[userId][objectId] === undefined)
{
    stuff[userId][objectId] = {}; // or maybe you really want an array here?
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:48:12.620

您正在尝试创建**关联数组**，而在 JavaScript 中，这是通过...对象而不是数组完成的！

所以在每一步你都需要使用 {} 而不是 [] 来创建下一个级别。而且您需要使用 for...in 循环来遍历键。

有关更多详细信息，请在 Web 上搜索 JavaScript 关联数组”。例如：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:32:21.123

这是因为使用了数组。剩余元素的长度未定义。例如，如果指定了 a(1)，则 a(0) 将是未定义的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-16T20:09:15.900

这个问题已经得到了很长的回答，但我想用这个速记来补充一下，这确实使它更紧凑和可读：

```
stuff = stuff || {};

// if stuff is already defined, just leave it be. If not (||), define it as object

stuff[userId] = stuff[userId] || {};

// if stuff[userId] is already defined, define it as self (let it be unchanged). If not defined ( the || -signs ), define it as object.

stuff[userId][objectId] = stuff[userId][objectId] || {};

// and so on :) 
```

# python - 剥离非字符的 unicode 文本

> ID：13939152
> 
> 赞同：1
> 
> 时间：2012-12-18T18:25:37.077
> 
> 标签：python, unicode

我正在尝试编写一个简单的 Python 脚本，它将文本文件作为输入，删除每个非文字字符，并将输出写入另一个文件。通常我会做两种方式：

*   使用正则表达式结合`re.sub`用空字符串替换每个非字母字符
*   检查每一行中的每个字符，并仅当它在输出中时才将其写入输出`string.lowercase`

但是这次的文字是意大利语的神曲（我是意大利人），所以有一些Unicode字符，比如

```
èéï 
```

和其他一些。我写`# -*- coding: utf-8 -*-`在脚本的第一行，但我得到的是当 Unicode 字符写入脚本时，Python 不会发出错误信号。

然后我尝试在我的正则表达式中包含 Unicode 字符，例如：

```
u'\u00AB' 
```

它似乎可以工作，但是 Python 在从文件中读取输入时，不会以与读取文件相同的方式重写它读取的内容。例如，某些字符被转换为平方根符号。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:50:17.863

[`unicodedata.category(unichr)`](http://docs.python.org/2/library/unicodedata.html)将返回该代码点的类别。

您可以在[unicode.org](http://www.unicode.org/reports/tr44/tr44-4.html#General_Category_Values)上找到类别的描述，但与您相关的是*L*、*N*、*P*、*Z*以及可能*S*组：

> ```
> Lu    Uppercase_Letter    an uppercase letter
> Ll    Lowercase_Letter    a lowercase letter
> Lt    Titlecase_Letter    a digraphic character, with first part uppercase
> Lm    Modifier_Letter a modifier letter
> Lo    Other_Letter    other letters, including syllables and ideographs
> ... 
> ```

您可能还想首先规范化您的字符串，以便可以附加到字母的变音符号这样做：

> `unicodedata.normalize(form, unistr)`
> 
> 返回 Unicode 字符串 unistr 的范式形式。form 的有效值为“NFC”、“NFKC”、“NFD”和“NFKD”。

把所有这些放在一起：

```
file_bytes = ...   # However you read your input
file_text = file_bytes.decode('UTF-8')
normalized_text = unicodedata.normalize('NFC', file_text)
allowed_categories = set([
    'Ll', 'Lu', 'Lt', 'Lm', 'Lo',  # Letters
    'Nd', 'Nl',                    # Digits
    'Po', 'Ps', 'Pe', 'Pi', 'Pf',  # Punctuation
    'Zs'                           # Breaking spaces
])
filtered_text = ''.join(
    [ch for ch in normalized_text
     if unicodedata.category(ch) in allowed_categories])
filtered_bytes = filtered_text.encode('UTF-8')  # ready to be written to a file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:37:30.633

```
import codecs
f = codecs.open('FILENAME', encoding='utf-8')
for line in f:
    print repr(line)
    print line 
```

1\. 会给你 Unicode 格式
2\. 会给你写在你的文件里。

希望它会帮助你:)

# linux - pkg-config --libs 返回一个 .la 文件，但 g++ 无法处理

> ID：13939153
> 
> 赞同：0
> 
> 时间：2012-12-18T18:25:47.813
> 
> 标签：linux, g++, ld, libtool

我正在尝试从 git 构建针对 GStreamer 的东西。他们有一些让人`pkg-config`开心的神奇过程，但如果我运行它，我会得到一个`.la`文件：

```
$ pkg-config --libs gstreamer-1.0
/home/blong/gst/head/gstreamer/gst/libgstreamer-1.0.la -lgobject-2.0 -lglib-2.0 
```

这给 GCC 带来了问题：

```
g++ -o example switchtrackexample.cpp `pkg-config --libs --cflags gstreamer-1.0`
# comes out as: g++ -o example switchtrackexample.cpp -pthread -I/home/blong/gst/head/gstreamer -I/home/blong/gst/head/gstreamer/libs -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include /home/blong/gst/head/gstreamer/gst/libgstreamer-1.0.la -lgobject-2.0 -lglib-2.0
/usr/bin/ld: error: /home/blong/gst/head/gstreamer/gst/libgstreamer-1.0.la:8:8: invalid character
/usr/bin/ld: error: /home/blong/gst/head/gstreamer/gst/libgstreamer-1.0.la:8:8: syntax error, unexpected $end
/usr/bin/ld: error: /home/blong/gst/head/gstreamer/gst/libgstreamer-1.0.la: not an object or archive
# lots of undefined references here 
```

我读过一些东西，表明我应该可以`libtool`用来编译它，但我不知道怎么做。我应该如何处理这个`.la`文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:31:30.877

它数字，在我问这个之后，我[找到](http://gstreamer-devel.966125.n4.nabble.com/libgstreamer-0-10-la-file-not-recognized-td2341222.html)了 Julien Moutte 的答案：

> 在构建命令前面添加：
> libtool --mode=link 。

遵循该建议，我得到了这个，它有效：

```
libtool --mode=link g++ -o example switchtrackexample.cpp `pkg-config --cflags --libs gstreamer-1.0` 
```

# python - 为什么解包比传入列表更受欢迎

> ID：13939156
> 
> 赞同：3
> 
> 时间：2012-12-18T18:26:00.570
> 
> 标签：python, parameters, arguments, parameter-passing, iterable-unpacking

解包参数列表：

```
def send(*data):
    for datum in data:
        ser.write(datum) 
```

vs 首先发送列表：

```
def send(data):
    for datum in data:
        ser.write(datum) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:29:48.743

如果它简化了 API，否则您将*始终*必须传入一个列表：

```
send(something, otherthing) 
```

相对：

```
send([something, otherthing]) 
```

您*通常*的参数取自不同的位置；例如`something`，并且`otherthing`比已经收集在一个列表中的变量更可能是单独的变量。

Python 3.x`print()`函数和该函数正是这样做的`os.path.join()`。在调用 API 之前，您很少将所有打印参数或要加入的路径元素组合在一个列表中。

比较：

```
os.path.join(rootdirectory, relativepath, filename)
print('Debug information:', localvariable) 
```

对比

```
os.path.join([rootdirectory, relativepath, filename])
print(['Debug information:', localvariable]) 
```

如果`.join()`或`print()`将只接受一个位置参数（列表），API 的用户会发现自己一遍又一遍地键入`[`和括号。`]`

通过接受可变数量的位置参数，您可以为 API 的用户省去仅为函数调用创建列表的麻烦。在参数已经收集到列表中的极少数情况下，它们可以使用`*params`调用约定：

```
send(*params) 
```

回显您的函数签名。

# bash - g_spawn_async_with_pipes() 和 bash

> ID：13939159
> 
> 赞同：0
> 
> 时间：2012-12-18T18:26:11.970
> 
> 标签：bash, glib

我正在使用 bash 测试 glib 中的 g_spawn_async_with_pipes ()。

我想知道是否可以使用此函数作为子进程启动 bash，将命令从父进程写入子进程（bash）输入并从 bash 输出中获取结果？

我的 c 程序应该充当交互式 shell 的接口。

我认为我没有为 bash 提供好的选择，而且我并不真正了解 bash 的工作原理（我在手册页中看到在交互模式下 bash 的输出、输入链接到 tty/终端）。

我已经测试了很多东西，这里有一些代码：

```
//launcher:
GPid        pid;
gchar      *launch[] = {"/bin/bash","-s",NULL };
gint        in,
            out,
            err;
GIOChannel *out_ch,
           *err_ch;
gboolean    ret;

/* Spawn child process */
ret = g_spawn_async_with_pipes( NULL, launch, NULL,
                                G_SPAWN_DO_NOT_REAP_CHILD | 
                                G_SPAWN_FILE_AND_ARGV_ZERO, NULL,
                                NULL, &pid, &in, &out, &err, NULL );
if( ! ret )
{
    g_error( "SPAWN FAILED" );
    return;
}

/* Create channels that will be used to read data from pipes. */
out_ch = g_io_channel_unix_new( out );
err_ch = g_io_channel_unix_new( err );

/* Add watches to channels */
g_io_add_watch( out_ch, G_IO_IN | G_IO_HUP, (GIOFunc)cb_out_watch, NULL );
g_io_add_watch( err_ch, G_IO_IN | G_IO_HUP, (GIOFunc)cb_err_watch, NULL );

//create channel for input:
GIOChannel * input_channel;
input_channel = g_io_channel_unix_new (in);

//create the string "date\r\n" to send to bash input
GString * cmd = g_string_new("date");
GString * carriage_return = g_string_new("\r\n");
g_string_append(cmd,carriage_return->str);
GError * error;
error = NULL;
gsize bytes_written;
printf("Launching date in bash:\n");
g_io_channel_write_chars( input_channel,
                          cmd->str,
                          cmd->len,
                          &bytes_written,
                          &error);
if (error != NULL)
{
  printf("%s\n", error->message);
} 
```

这是 cb_out_watch 的代码

```
static gboolean
cb_out_watch( GIOChannel   *channel, GIOCondition  cond, gpointer user_data )
{
    printf("->reading bash output\n");
    gchar *string;
    gsize  size;

if( cond == G_IO_HUP )
{
    g_io_channel_unref( channel );
    return( FALSE );
}

g_io_channel_read_line( channel, &string, &size, NULL, NULL );
printf("output : \n:%s\n", string);
g_free( string );

return( TRUE );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:20:51.330

尝试运行`bash`并`-i`关心*3 个 IO*：`fd/0`-> *stdin*、`fd/1`-> *stdout*和`fd/2`-> *stderr*。

... ...并看看`man bash`，寻找*互动*。

# spring - 结果中的 FreeMarker 特定表索引

> ID：13939161
> 
> 赞同：0
> 
> 时间：2012-12-18T18:26:23.083
> 
> 标签：spring, freemarker

我正在使用使用 freeMarker 格式作为模板的 openReports。

以下：

```
<@display.table name="results" class="displayTag" sort="list" export=true pagesize=10 requestURI="queryReportResult.action">    
<@display.column property="first_name" title="First Name" sortable=true headerClass="sortable" />
<@display.column property="last_name" title="Last Name" sortable=true headerClass="sortable"/>
</@display.table> 
```

使用存储过程自动获取数据。这将创建一个可排序的表，有谁知道我如何只访问第一行数据。我打算将它保存到一个变量中并在页面的某些部分输出。

我想这样做的原因是我们有一个基本报告，如果我可以从它打印到报告上方页面的顶部，那么它会变得完美。

我知道很多人不熟悉 OpenReports，但我认为 freeMarker 确实有很多追随者。我知道这是否很晦涩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:22:21.917

从这里我可以看到，`@display.table`调用一次打印了整个表，所以没有地方可以插入 FreeMarker 代码来捕获第一行。但是，您当然应该查看 的文档，`@display.table`看看它是否提供了任何有用的选项。但是，我想你已经这样做了。因此，作为最后的手段，您可以将整个表捕获到一个变量中`<#assign tableHTML><@display.table ...>...</@display.table></#assign>`，然后使用正则表达式（或类似的东西）从`tableHTML`变量的值中提取第一行。

# r - 使用 R 从 html 定义列表中抓取变量名称和值

> ID：13939167
> 
> 赞同：2
> 
> 时间：2012-12-18T18:26:36.607
> 
> 标签：r, web-scraping

我希望从 R 中一些 html 代码中的定义列表中提取一些数据。到目前为止，我已经完成了以下工作；

```
url <- "myurl"
doc <- htmlParse(url) 
```

然后我（想我）想用它`xpathSApply`来提取列表数据；但是我一直返回一个错误...我对网络抓取和 HTML 的概念不熟悉，所以我不完全确定该函数如何定位要抓取的数据。

我如何找到`xpath`传递给的`xpathSApply`？

一个示例网址是[http://opencorporates.com/companies/gb/06309283](http://opencorporates.com/companies/gb/06309283)

我想将有关公司名称、编号、地址、董事等的数据刮到每个查询的一个观察值中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:31:18.977

Firefox 有一个名为 FireBug 的惊人插件，以及一个名为 FirePath 的扩展。使用它，您可以右键单击网页上的任何元素，然后单击“检查”。这将向您显示要传递给的 XPath `xpathSApply`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:11:39.387

If you can't use Firebug there's a nifty bookmarklet called [SelectorGadget](http://www.selectorgadget.com/) that does much the same thing and should work in IE9

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:10:45.183

原来我需要的语法是 '//node[@class="myclass"]' 用于 xpathSAppply 函数。祝大家欢呼

# java - 通过 java google api 访问服务

> ID：13939169
> 
> 赞同：1
> 
> 时间：2012-12-18T18:26:52.843
> 
> 标签：java, google-api, google-oauth

我正在尝试使用 java google-api 访问 Adsense Management API。但是，我在 oauth2 身份验证方面遇到了麻烦。根据[文档](https://code.google.com/p/google-api-java-client/wiki/OAuth2)，以下代码应该足够了：

```
public static GoogleCredential getCredential() 
   throws GeneralSecurityException, IOException {
    File file = new File("key.p12");
    return new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT).setJsonFactory(JSON_FACTORY)
            .setServiceAccountId(SERVICE_ACCOUNT_ID)
            .setServiceAccountScopes(AdSenseScopes.ADSENSE)
            .setServiceAccountPrivateKeyFromP12File(file)
            .setServiceAccountUser(ACCOUNT_USER)
            .build();
} 
```

但是，凭证总是返回 accessToken null，我不能做任何操作。我收到一个错误的请求：

```
Exception in thread "main" java.lang.RuntimeException:   com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "invalid_grant"
} 
```

我的客户代码：

```
private static AdSense initializeAdsense() throws Exception {
    // Authorization.
    Credential credential = getCredential();        
    String token = credential.getAccessToken();
    System.out.println(token);
    AdSense adsense = new AdSense.Builder(new NetHttpTransport(), JSON_FACTORY, credential).setApplicationName("Google-AdSenseSample/1.2").build();
    return adsense;
}

public static Accounts run(AdSense adsense, int maxPageSize) throws Exception {
    System.out.println("=================================================================");
    System.out.println("Listing all AdSense accounts");
    System.out.println("=================================================================");

    // Retrieve account list in pages and display data as we receive it.
    String pageToken = null;
    Accounts accounts = null;
    do {
        accounts = adsense.accounts().list().setMaxResults(maxPageSize).setPageToken(pageToken).execute();

        if ((accounts.getItems() != null) && !accounts.getItems().isEmpty()) {
            for (Account account : accounts.getItems()) {
                System.out.printf("Account with ID \"%s\" and name \"%s\" was found.\n", account.getId(), account.getName());
            }
        } else {
            System.out.println("No accounts found.");
        }

        pageToken = accounts.getNextPageToken();
    } while (pageToken != null);

    System.out.println();
    return accounts;
}

public static void test() throws Exception {
    AdSense adsense = initializeAdsense();
    run(adsense, 30);
} 
```

问题是，到底有什么问题？

**编辑：** 也许我不能那样做。

> 恐怕不支持通过服务帐户身份验证访问 AdSense Management API，因为它是受保护的用户信息

[https://groups.google.com/forum/#!msg/adsense-api/j-gQsp_fE94/CrOPhRLv4WUJ](https://groups.google.com/forum/#!msg/adsense-api/j-gQsp_fE94/CrOPhRLv4WUJ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:24:40.037

SERVICE_ACCOUNT_ID 应该是您的服务帐户的电子邮件地址 (xxxxxx@developer.gserviceaccount.com)，并且不要设置 ACCOUNT_USER。

# objective-c - iOS 5.1 dequeueReusableCellWithIdentifier 抛出 NSInvalidArgument 异常

> ID：13939175
> 
> 赞同：0
> 
> 时间：2012-12-18T18:27:25.873
> 
> 标签：objective-c, uitableview, ios5.1

我有一个在 iOS6.1 上运行良好的应用程序。今天我意识到我可能应该尝试让它与 iOS5 兼容。我尝试在 iOS 5 模拟器上运行它，并在我的 dequeCell 方法调用中抛出异常。我不知道为什么它在 iOS6 上运行良好。还有其他人遇到这个问题吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = //throws exception here
     [tableView dequeueReusableCellWithIdentifier:CellIdentifier 
                                     forIndexPath:indexPath];
    cell.accessoryView = nil;
    cell.backgroundColor = [UIColor colorWithRed:.97 
                                           green:.97 
                                            blue:.97 
                                           alpha:1];
    cell.textLabel.textColor = [UIColor blackColor];
    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.selectionStyle = UITableViewCellSelectionStyleBlue;
    ...
    return cell;
}

-[UITableView dequeueReusableCellWithIdentifier:forIndexPath:]: unrecognized 
 selector sent to instance 0x8a3a000 -*** Terminating app due to uncaught 
 exception 'NSInvalidArgumentException', reason: '-[UITableView 
 dequeueReusableCellWithIdentifier:forIndexPath:]: unrecognized selector 
 sent to instance 0x8a3a000' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T18:31:20.193

据我所知，该方法`dequeueReusableCellWithIdentifier:forIndexPath:`仅在 iOS 6.0 中添加。

更好的使用`dequeueReusableCellWithIdentifier:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T18:40:09.133

@Chase，我今天在尝试使我的应用程序与 iOS 5.1 兼容时也遇到了同样的问题。

我让按钮工作的一种方法是使用手势识别器，并在您实现的 tapDetected 委托方法中，查询您想要的按钮并直接在代码中调用它。
在您的 ViewDidLoad 中注册识别器

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];
tapRecognizer.numberOfTapsRequired = 1;
tapRecognizer.delegate = self;
[self.view addGestureRecognizer:tapRecognizer];

    - (void)tapDetected:(UIGestureRecognizer*)tap{
NSArray *versionCompatibility = [[UIDevice currentDevice].systemVersion componentsSeparatedByString:@"."];
if ( 6 == [[versionCompatibility objectAtIndex:0] intValue] ) {
    [self.view endEditing:YES];
} else {
    if (CGRectContainsPoint(self.createSessionButton.frame, [tap locationInView:self.view])) {
        [self.view endEditing:YES];
        [self createNewSession:nil];
    }
   } 
```

}

存在 iOS 检查的原因是因为在 ios 6 中这不是问题。抱歉格式错误，在这里发布仍然是新的。

# java - 使 JComboBox 透明

> ID：13939176
> 
> 赞同：2
> 
> 时间：2012-12-18T18:27:28.820
> 
> 标签：java, swing, jcombobox

我在使 JComboBox 透明时遇到问题。我尝试将 opaque 设置为 false 和背景 0 的 alpha，但它不起作用。我想我需要更改一些进行渲染或类似操作的类。这是代码..

```
 import java.awt.EventQueue;
  import java.awt.Graphics;
  import java.awt.Rectangle;

  import javax.swing.JFrame;
  import javax.swing.JComboBox;
  import javax.swing.JTextField;
  import javax.swing.plaf.basic.BasicComboBoxUI;

  import java.awt.Color;

public class App {

private JFrame frame;

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                App window = new App();
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public App() {
    initialize();
}

private void initialize() {
    frame = new JFrame();
    frame.getContentPane().setBackground(Color.GREEN);
    frame.setBounds(100, 100, 450, 300);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(null);

    String[] petStrings = { "Bird", "Cat", "Dog", "Rabbit", "Pig" };
    JComboBox comboBox = new JComboBox(petStrings);
    comboBox.setBounds(149, 99, 155, 20);
    comboBox.setOpaque(false);
    //comboBox.setBackground(new Color(0,0,0,0));
    ((JTextField)comboBox.getEditor().getEditorComponent()).setOpaque(false);
    comboBox.setUI(new BasicComboBoxUI(){  

        public void paintCurrentValueBackground(Graphics g,Rectangle bounds,boolean hasFocus){}});  
    frame.getContentPane().add(comboBox);

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:50:19.333

假设您只希望 ComboBox 的文本字段透明（也不是弹出窗口），使用以下代码应该可以工作。您需要弄乱 ComboBox 渲染器而不是编辑器。如果您可以在 ComboBox 中键入，则使用编辑器；如果 ComboBox 只是一个值列表，则使用渲染器。

```
comboBox.setOpaque(false);
comboBox.setRenderer(new DefaultListCellRenderer(){
    @Override
    public Component getListCellRendererComponent(JList list, Object value,
            int index, boolean isSelected, boolean cellHasFocus) {
        JComponent result = (JComponent)super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
        result.setOpaque(false);
        return result;
    }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-26T03:14:18.030

```
JComboBox myComboBox = new JComboBox(array);
myComboBox .setOpaque(false);
myComboBox .setEditable(true);
JTextField boxField = (JTextField)myComboBox .getEditor().getEditorComponent();
boxField.setBorder(BorderFactory.createEmptyBorder());
boxField.setBackground(new Color(0, 0, 0, 0));
boxField.setFocusable(false); 
```

答案在[http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6687960](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6687960)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-06T13:51:04.183

尝试这个。

```
yourComboBox.setOpaque(false);
((JTextField)yourComboBox.getEditor().getEditorComponent()).setOpaque(false);

setUI(new BasicComboBoxUI() {

   @Override    
   public void paintCurrentValueBackground(
       Graphics g, Rectangle bounds, boolean hasFocus) {

   }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-18T18:30:59.920

你需要预设这几件事

```
jcombo.setOpaque(false);
jcombo.setContentAreaFilled(false);
jcombo.setBorderPainted(false); 
```

# ruby - Ruby Koans 和字符串

> ID：13939177
> 
> 赞同：1
> 
> 时间：2012-12-18T18:27:32.067
> 
> 标签：ruby, string

我试图从 Ruby Koans 中理解一些东西。在一堂课中，我们制作了两个类，如下所示：

```
class CanNotBeTreatedAsString
  def to_s
    "non-string-like"
  end
end

not_like_a_string = CanNotBeTreatedAsString.new
not_like_a_string == "non-string-like"

class CanBeTreatedAsString
  def to_s
    "string-like"
  end

  def to_str
    to_s
  end
end

like_a_string = CanBeTreatedAsString.new
like_a_string.to_str == "string-like"

def acts_like_a_string?(string)
  string = string.to_str if string.respond_to?(:to_str)
  string.is_a?(String)
end

assert_equal false, acts_like_a_string?(CanNotBeTreatedAsString.new)
assert_equal true,  acts_like_a_string?(CanBeTreatedAsString.new) 
```

所以这两个类和最后两个“断言”语句是我不清楚的。这两个类几乎相同，除了第二个类只是有另一个函数`to_str`调用`to_s`. 我不明白为什么第二个断言语句是真的（因此第二个类可以被视为一个字符串）仅仅是因为有第二个函数调用第一个函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:32:55.003

这里没有魔法。第二个测试是检查 `to_str`方法的存在。这不是为 定义的，`CanNotBeTreatedAsString`而是*为*定义的`CanBeTreatedAsString`。

的作用`respond_to?`是测试一个方法是否被定义，在Ruby 2.0中会进一步指出是否可以调用。无法调用的受保护方法将不再计算在内。现在，如果`respond_to?(:method_name)`返回，`true`那么`send(:method_name)`理论上任何必需的参数都可以工作。

第二个类可以用`alias :to_str, :to_s`更少的代码实现相同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:36:19.913

本课的重点是说明被称为“[鸭式打字](http://en.wikipedia.org/wiki/Duck_typing)”的原理。基本上，如果它长得像鸭子，叫起来像鸭子，那么它就是鸭子。在这种情况下，确定某事物是否为字符串（或者更确切地说像字符串）的唯一因素是它是否响应该`to_str`方法。

尝试在交互式 ruby​​ ( `irb`) 会话中运行此代码并试验这两个类。你会发现每个类的一个实例都会响应`to_s`但只会`CanBeTreatedAsString`响应`to_str`. 这意味着，就 Ruby 而言，`CanBeTreatedAsString`它与任何其他响应`to_str`.

# ember.js - 向 Ember.js CollectionView 添加选择行为的推荐方法是什么？

> ID：13939179
> 
> 赞同：0
> 
> 时间：2012-12-18T18:27:44.750
> 
> 标签：ember.js

我基本上需要一个 Select 视图，但我想要一些更具视觉吸引力的东西。我的预感是我可以使用 CollectionView 来执行此操作，但我必须自己实现对集合中元素的选择。这是一种常见的做法吗？有推荐的方法吗？有什么好的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:21:21.177

假设我没看错，你只是想要比你的基本选择列表更漂亮的东西。我不知道你的限制，但我真的很喜欢这些类型的东西的[引导下拉菜单](http://twitter.github.com/bootstrap/javascript.html#dropdowns "引导下拉菜单")

简单：尝试`<select>`根据自己的喜好设计风格

```
{{view Ember.Select 
    contentBinding="App.content" 
    optionLabelBinding="content.text"
    optionValueBinding="content.value"
    selectionBinding="App.selection"
    prompt="Choose ...."}} 
```

如果你使用 Bootstrap，这样的东西应该可以工作

```
<div class="dropdown">
  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
  {{#each App.content}}
      {{#view App.SelectView contentBinding="this"}}{{label}}{{/view}}
  {{/each}}
  </ul>
</div> 
```

Javascript：

```
App.SelectView = Em.View.extend({
   tagName: 'li',
   click:function(){
      App.set('selected', this.get('content'));
      // then hide the dropdown
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:55:21.730

在 Freenode 上的 #emberjs 上向我推荐了此链接：

[https://gist.github.com/1626943](https://gist.github.com/1626943)

它扩展了 CollectionView 以允许选择项目。

# string - Common Lisp 中的反转字符串

> ID：13939180
> 
> 赞同：3
> 
> 时间：2012-12-18T18:27:49.087
> 
> 标签：string, common-lisp

**如何在 Common Lisp 中反转字符串？**

我想将“Hello World”转换为“dlroW olleH”。在 Python 中，它是使用[扩展 slice](https://stackoverflow.com/q/931092/596361)完成的：`"Hello World"[::-1]`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T18:38:30.097

[reverse](http://www.lispworks.com/documentation/HyperSpec/Body/f_revers.htm)可以采用任何序列，包括字符串，因此您只需编写：

```
> (reverse "Hello World")
"dlroW olleH" 
```

# iphone - 为 Iphone 3g、Iphone 4s 和 Iphone 5 设置背景图像

> ID：13939181
> 
> 赞同：0
> 
> 时间：2012-12-18T18:27:48.853
> 
> 标签：iphone, ios, xcode, background

我想设置视图的背景图像。我使用三张图片：backgroundimage.png（尺寸 320 x 480）、backgroundimage@2x.png（尺寸 640 x 960）和 backgroundimage-568h@2x.png（尺寸 640 x 1136）

适用于 iphone 3g 尺寸。但是当我测试它的视网膜尺寸时，背景图像只是原始图像的一小部分。我认为，我必须以某种方式缩小图像，或者为它设置一个框架，但我只是不知道如何。

谢谢你的帮助 ;）

这就是代码：

```
self.view.backgroundColor = [UIColor clearColor];
UIImage *backgroundImage = [[UIImage alloc]init];
if ([[UIScreen mainScreen] bounds].size.height == 568) {
    backgroundImage = [UIImage imageNamed:@"background-568h@2x"];
}
else{
    backgroundImage = [UIImage imageNamed:@"background"];
}
self.view.backgroundColor = [UIColor colorWithPatternImage:backgroundImage]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:00:09.800

我的第一个猜测是因为`colorWithPatternImage`. 仅当您有希望平铺的图案图像时才应使用此选项。而是尝试创建一个与视图大小相同的 UIImageView，然后将其添加为 self.view 的子视图。

```
UIImageView *backgroundImageView = [[UIImageView alloc] initWithImage:backgroundImage];
[backgroundImageView setFrame:[[self view] bounds]];
[[self view] addSubview:backgroundImageView]; 
```

# jquery - 在列表视图中隐藏特定的 html

> ID：13939183
> 
> 赞同：0
> 
> 时间：2012-12-18T18:27:52.427
> 
> 标签：jquery, listview, knockout.js

我有一个动态创建的列表视图，显示位置列表以及这些位置的距离。对于这些位置之一（WFH），我`<span data-bind="text: distanceBetweenPoints"></span><span>&nbsp; mi.</span>`根本不希望这条线出现。那么我该如何更改它，以便如果 locationName == 'WFH' 从 next 中没有出现任何内容`span`。

这是HTML：

```
<div data-role="content">
    <ul id="nearbyLocationsListView" data-bind="template: {name: 'locationsListTemplate', foreach: nearbyLocations}" data-role="listview" data-filter="false"></ul>         
    <script id="locationsListTemplate" type="text/html">
        <li>
            <div>       
                <span data-bind="text: locationName"></span>
                <span data-bind="text: distanceBetweenPoints"></span><span>&nbsp; mi.</span>
            </div>
        </li>
    </script>
</div> 
```

这是创建列表的位置：

```
function GetClosestLocationByCoordinates() {
    var url = 'http://localhost/GetClosestLocationByCoordinates;

    var jqxhr =
    $.getJSON(url,
    function (data) { 
        $.each(data.GetClosestLocationByCoordinatesResult, function (key, val) {
            var distanceBetweenPoints = distance();
            nearbyLocationsModel.addNearByLocations(val.LocationId, val.LocationName, val.NumberCheckedIn, distanceBetweenPoints);
        });
        ko.applyBindings(nearbyLocationsModel, document.getElementById("nearbyLocationsListView"));
    })
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:31:40.373

这应该有效：

```
<div data-role="content">
    <ul id="nearbyLocationsListView" data-bind="template: {name: 'locationsListTemplate', foreach: nearbyLocations}" data-role="listview" data-filter="false"></ul>         
    <script id="locationsListTemplate" type="text/html">
        <li>
            <div>       
                <span data-bind="text: locationName"></span>
                <div data-bind="visible: locationName() !== 'WFH'">
                    <span data-bind="text: distanceBetweenPoints"></span><span>&nbsp; mi.</span>
                </div>
            </div>
        </li>
    </script>
</div> 
```

您也可以使用`If`绑定代替`visible`. 请注意，`If`从页面中删除元素，而`visible`只是隐藏它。

更多细节可以在 KO 网站上找到：[如果绑定](http://knockoutjs.com/documentation/if-binding.html)，[可见绑定](http://knockoutjs.com/documentation/visible-binding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:32:21.960

在不改变 DOM 结构的情况下这样做：

```
<div data-role="content">
    <ul id="nearbyLocationsListView" data-bind="template: {name: 'locationsListTemplate', foreach: nearbyLocations}" data-role="listview" data-filter="false"></ul>         
    <script id="locationsListTemplate" type="text/html">
        <li>
            <div>       
                <span data-bind="text: locationName"></span>
                <!-- ko if: locationName !== 'WFH' -->
                    <span data-bind="text: distanceBetweenPoints"></span><span>&nbsp; mi.</span>
                <!-- /ko -->
            </div>
        </li>
    </script>
</div> 
```

# node.js - 在页面上渲染一些动态块 - express.js + jam

> ID：13939184
> 
> 赞同：0
> 
> 时间：2012-12-18T18:28:02.973
> 
> 标签：node.js, express, pug

找了几天的解决办法。需要帮忙。

来源：node.js + express.js + 玉模板引擎

问题：无法理解如何在一页上呈现 1+ 个动态块。

例如：

我们有一个页面：新闻主页页面块：最新消息（列出20条），热点新闻（列出4条），观看次数最多的新闻（4条），带有新闻类别的块（它可以在页面上显示当前类别带有一张选定新奇卡片的页面，因此它也是动态阻止），并使用一些用户身份验证数据进行阻止。“块”是指我们可以在网站上看到的小部件，而不是代码块。

我可以用快递做什么？我可以将特殊 url 路由到路由中的特殊功能。如我所见，如果想在一页上呈现所有这些块，我必须调用所有函数，仅在一个路由函数中呈现每个块。

我的意思是我似乎必须做这样的事情（当然在库中但在这里无关紧要）

```
    app.get('/news', function(req, res){
      call_last_news（函数（）{
        call_hot_news(函数(){
          call_get_user_info(函数(){
            ...
            ...
            ...
            模板.render.here();
            final_here();
          });
        });
      });
    });

```

这看起来很真实，但代码如此无用和无法支持，以至于......这很糟糕。我可以在来自模板引擎的调用中看到解决方案，以在页面上呈现一些块。但不仅仅是包含，因为所有块都可以使用 db 或 cookie、会话数据等。所有块都是动态的。但我不知道如何使用 express.js + 玉创建这样的引擎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:55:42.720

好吧，我不确定我是否理解所有问题，但基于伪代码，这里的主要问题似乎是您有一组深度嵌套的潜在独立和可重用函数。有两种方法可以解决这个问题：

### 使用控制流库

使用[异步](https://github.com/caolan/async)系列、并行等（哪个功能取决于您的代码的性质——所有`call_`功能都是独立的吗？）这将清理您的代码并使其更易于维护。

### 使用 ajax

您可以采取的另一种方法是在没有所有`call_`功能的情况下快速呈现页面，只需从客户端进行几次 ajax 调用来填充数据。你可以有看起来像'/news/last'和'/news/hot'等的路由。这很好，因为你可以将每个单元的所有逻辑分离成可重用的URL，这样你就可以混合和匹配它们在任何页面上。

# php - 同一个博客，每个类别一个主题

> ID：13939186
> 
> 赞同：1
> 
> 时间：2012-12-18T18:28:07.513
> 
> 标签：php, codeigniter, routing, themes

我正在为 Codeigniter 中的一个附带项目编写博客。我的博客将包含三个模块。

我需要知道该怎么做，例如：

*   example.org -> 显示所有带有 module3 主题的帖子
*   example.org/module1 -> 仅显示带有 module1 主题的 module1 帖子
*   example.org/module2 -> 仅显示带有 module2 主题的 module2 帖子
*   example.org/module3 -> 仅显示带有 module3 主题的 module3 帖子

任何想法如何在 URL 模式中处理这个问题？（路由）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:57:46.610

你可以做一个简单的切换：

```
class Post extends CI_Controller{

function index($module = null)
{
   switch($module)
   {
      case NULL:
      case 'module3':
        //load theme 3
      break;
      case 'module1':
        //load theme 1
      break;
      case 'module2':
        //load theme 2
      break;     
  }

} 
```

在您的路线中：

```
$route['default_controller'] = "post";
$route['(:any)'] = "post/index/$1"; 
```

如何实现不存在的案例现在取决于您，这只是一个开始。此外，":any" 路由是一个可以抓取*任何*url 的包罗万象的路由，因此您需要排除（通过将它们放在要重新映射的任何其他路由*之前*。或者您可以查看[_remap()](http://ellislab.com/codeigniter/user-guide/general/controllers.html)在您的控制器中使用的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:46:58.763

您可以修改 CI 的核心，但我认为您最好使用 RewriteRule。

# objective-c - 在沙盒中模拟按键

> ID：13939187
> 
> 赞同：1
> 
> 时间：2012-12-18T18:28:18.887
> 
> 标签：objective-c, xcode, macos, cocoa

之前使用碳层来模拟按键，但自从沙盒应用程序以来，这不再可能了。

有谁知道替代方案，或者我们如何才能从沙箱中“暂时排除”这种碳功能？

感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:05:43.050

你不能。沙盒的部分目的是防止您的应用程序与其他应用程序交互，并且模拟键盘输入会影响其他应用程序。

# scala - 玩框架氛围

> ID：13939192
> 
> 赞同：5
> 
> 时间：2012-12-18T18:28:32.287
> 
> 标签：scala, playframework-2.0, atmosphere

[的创建者博客](http://jfarcand.wordpress.com/)中有一个可用框架的列表`Atmosphere`。我想使用`scala`并且`Play Framework`包含在`Atmosphere`. 在博客中，他写道 Atmosphere 可以与“每个”框架一起使用。集成 Atmosphere 有那么容易吗？如何集成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:54:29.437

我知道这不一定是您要寻找的答案，但我建议您查看 Play 的原生彗星支持。

[http://www.playframework.org/documentation/2.0/ScalaComet](http://www.playframework.org/documentation/2.0/ScalaComet) http://www.playframework.org/documentation/api/2.0/scala/play/api/libs/Comet$.html

您是否有 Atmosphere 可以更优雅地解决的特定用例？如果是这样，这里的线程可能会有所帮助。

[https://groups.google.com/forum/m/?fromgroups#!topic/atmosphere-framework/GM6fC6-eSLE](https://groups.google.com/forum/m/?fromgroups#!topic/atmosphere-framework/GM6fC6-eSLE)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T13:49:24.543

是的，看看[这个项目](https://github.com/Atmosphere/atmosphere-play)——它是运行在 Play 之上的 Atmosphere 的原生实现！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T07:03:08.517

我也在找这个。它带来的好处是从 websocket 到长轮询的优雅降级以及客户端和服务器端的通用 api。

# sql - 在没有其他访问权限的情况下在 sql 查询中使用 iif

> ID：13939193
> 
> 赞同：2
> 
> 时间：2012-12-18T18:28:33.753
> 
> 标签：sql, ms-access, ms-access-2007, iif

我正在使用`iif`where 子句中的语句在访问中编写 sql 查询，其中我需要检查访问表单中的表单。

如果是真的，那么我需要匹配或过滤一列。我的声明是：

```
 And IIf(isnull(forms![abc QC]!combo45),
         null,
         w.[swt Team Member]=forms![abc QC]!combo45) 
```

现在当我写这篇文章时它不起作用。如果我删除声明并写下：

```
w.[swt Team Member]=forms![abc QC]!combo45 
```

然后它工作正常

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:33:48.687

```
And IIf(isnull(forms![abc QC]!combo45) , TRUE, w.[swt Team Member]=forms![abc QC]!combo45) 
```

条件应该是一个布尔值。

在您的示例中，假设`combo45`为空白，条件将被翻译为

```
And null 
```

这不是布尔表达式。

# javascript - 使用 extjs 重新渲染 .ascx 页面

> ID：13939194
> 
> 赞同：0
> 
> 时间：2012-12-18T18:28:43.457
> 
> 标签：javascript, asp.net-mvc-3, extjs

我需要动态地向已经加载的页面添加一列。该列由在加载 .ascx 页面后（通过用户交互）创建的对象表示。在 JavaScript 方面，我有一个带有 TabPanel 的面板：

```
var reportPanel = new Ext.Panel({
    layout: 'fit',
    items: [
        new Ext.TabPanel({
            id: 'reportTabs',
            renderTo: 'reportTabContainer',
            activeTab: 0,
            autoHeight: true,
            minHeight: 600,
            plain: true,
            stateful: true,
            deferredRender: false,//allows both reports to run at once
            defaults:
                {
                    autoHeight: true
                },
            items: tabsConfig
        })
    ]
}); 
```

};

tabsConfig 中的一个项目如下所示：

```
{{ id: 'totalOperation', title: 'Total Operation', autoLoad: {{url: '" +Url.Action("Detail","OverallReport") +"', params: 'null', scripts: true,  timeout: '9000000', method: 'POST'}} 
```

我的问题是，一旦创建了列对象，我需要在特定的 AJAX 调用之后重新呈现 ascx 页面（又名 extJSpanel）。我已经尝试过`panel.removeAll(true)`，`panel.doLayout(false,true)`并且不会删除面板中的任何元素，也不会刷新页面。

简而言之——我需要在对控制器的 AJAX 调用之前销毁 .ascx 页面，并让 AJAX 调用的返回重新填充 ascx 控件（使用`return PartialView(...)`）。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:17:19.553

回答了我的问题——这段代码解决了它：

```
var contentPanel = Ext.getCmp('totalOperation');
contentPanel.autoLoad = {
    url: 'URL path of controller method'
};
contentPanel.doAutoLoad(); 
```

# pygame - pygame.display.flip() 是否等到硬件执行命令后再继续下一行？

> ID：13939195
> 
> 赞同：1
> 
> 时间：2012-12-18T18:28:45.780
> 
> 标签：pygame

我正在设计一个实验，我需要非常准确地测量显示器翻转之间的间隔。我正在使用 pygame.display.flip() 后跟 time.time() 并想知道翻转功能是否等待硬件执行命令然后继续下一行。如果没有，有没有办法获得实际的显示刷新时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:16:32.880

由于 pygame 实际上只是 python 中的 SDL，具有更多功能，您可以在 SDL 文档中查找 SDL_Flip：[http ://sdl.beuc.net/sdl.wiki/SDL_Flip](http://sdl.beuc.net/sdl.wiki/SDL_Flip)

如果我理解正确，它确实会等待，但只有当游戏全屏时（因为那时，双缓冲真的发生了。

# android - 如何使用 AsyncTask 类输入参数

> ID：13939202
> 
> 赞同：0
> 
> 时间：2012-12-18T18:29:00.417
> 
> 标签：android, upload, android-asynctask

我尝试制作一个 AsyncTask 类以在后台上传可变温度。我如何插入参数？网址，变量？我制作了这段代码，但我有错误......

```
public class SimpleHttpPut extends AsyncTask<Void, Void, Void> {

@Override
protected Void doInBackground(Void... params) {

//public static void main(String urlt,int t) {
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(urlt);
    try {
      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
      nameValuePairs.add(new BasicNameValuePair("temp",String.valueOf(t)));
      post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

      HttpResponse response = client.execute(post);
      BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
      String line = "";
      while ((line = rd.readLine()) != null) {
        System.out.println(line);
      }

    } catch (IOException e) {
      e.printStackTrace();
    }
 // }
 return null;
}

protected void onPostExecute(Void result) {

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:31:11.637

[请参阅我对这个 SO 帖子](https://stackoverflow.com/questions/13827677/how-to-pass-a-parameters-to-asynctask-ksoap2/13827936#13827936)的回答......它解释了将参数直接传递给`doInBackground`函数以及 Aynctask 类本身，以及在调用活动中调用回调函数。

在您的情况下，最重要的答案是将参数的字符串数组传递给 doInBackground

在调用活动中：

```
//params to pass to doInBackground
private String[] params= {"mynamespace", "mymethods", "mysoap", "myuser", "mypass"}; 

//Pass your args array and the current activity to the AsyncTask
new MyTask("my arg1", 10).execute(params); 
```

在异步任务中：

```
public class MyTask extends AsyncTask<String, Void, String>{
    private String stringArg;
    private int intArg;

    public MyTask(String stringArg, int intArg){
        this.stringArg = stringArg;
        this.intArg = intArg;
    }
    @Override
    protected Void doInBackground(String... params) {
        //These are params local to this function
        String _NAMESPACE = params[0];
        String _METHODNAME = params[1];
        String _SOAPACTION = params[2];
        String _USER_NAME = params[3];
        String _USER_PASS= params[4];

        //intArg & stringArg are now available throughout the class

        //Do background stuff
    }
} 
```

# ruby - Watir：如何克隆表格单元格对象？

> ID：13939205
> 
> 赞同：1
> 
> 时间：2012-12-18T18:29:21.490
> 
> 标签：ruby, watir

我想制作一个`Watir::TableCell`对象的深层副本。

当我打电话`Marshal.load(Marshal.dump(cell))`时，有一个错误`TypeError: singleton can't be dumped`。

我使用了新函数`Watir::TableCell.new( cell, {:index => 0}, nil )`，但是`NoMethodError: unknown property or method: 'getElementsByTagName'`调用方法时出错`link.exists?`。看起来该对象仅获得了部分副本。

有没有人有解决问题的想法？

# java - 用于多个数据库用户的基于 Java 的数据库连接池库

> ID：13939207
> 
> 赞同：6
> 
> 时间：2012-12-18T18:29:25.093
> 
> 标签：java, database, connection, pool

我们的 Java 应用程序（在 Jetty 7.5.4 上运行的 Web 应用程序）使用底层数据库。有多个数据库用户，Java 部分需要使用这些数据库用户访问数据库。我想知道是否有一个数据库连接池库可以让我们使用多个数据库用户访问数据库。我知道有一堆 dbcp 库可以让我们与单个数据库用户一起使用，但我找不到任何支持多个数据库用户的库。

任何帮助表示赞赏，谢谢，婴儿车。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-20T16:18:49.930

Tomcat DBCP 绝对支持多用户（[源代码](http://svn.apache.org/repos/asf/tomcat/trunk/modules/jdbc-pool/src/main/java/org/apache/tomcat/jdbc/pool/DataSourceProxy.java)）。我不确定如何配置它，但它已经实现`DataSource.getConnection(username, password)`了，这是所需的关键功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-10T02:30:51.460

除了上面 ngreen 的评论，您还需要在数据源属性中将 AlternateUsernameAllowed 设置为 true，但是您仍然需要在属性上设置用户名/密码，因为这是在创建池时使用的。

```
/**
 * Returns true if the call {@link DataSource#getConnection(String, String) getConnection(username,password)} is
 * allowed. This is used for when the pool is used by an application accessing multiple schemas.
 * There is a performance impact turning this option on.
 * @return true if {@link DataSource#getConnection(String, String) getConnection(username,password)} is honored, false if it is ignored.
 */
public boolean isAlternateUsernameAllowed(); 
```

# google-app-engine - 尝试将任务添加到任务队列（推送）时出现大量 TransientErrors

> ID：13939209
> 
> 赞同：1
> 
> 时间：2012-12-18T18:29:40.397
> 
> 标签：google-app-engine

我的应用程序 (gqueues-hrd) 在尝试使用任务队列 API 添加任务时看到大量的 TransientErrors。实际上，每个请求都失败了。

几周来，我的应用程序没有任何改变。有人可以调查吗？这使我的应用程序完全无法使用，并且我有很多愤怒的客户。

“/base/python27_runtime/python27_lib/versions/1/google/appengine/api/taskqueue/taskqueue.py”，第 1637 行，添加 self._ *AddTasks(tasks, transactional,* self._FillAddPushTasksRequest) 文件“/base/python27_runtime/ python27_lib/versions/1/google/appengine/api/taskqueue/taskqueue.py"，第 1680 行，在 __AddTasks 中引发 _TranslateError(e.application_error, e.error_detail) TransientError

谢谢，卡梅伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:05:21.987

谷歌端的问题。根据他们的状态：“Google App Engine 任务队列 API 的问题应该在美国/太平洋时间上午 10:40 得到解决。” [https://code.google.com/status/appengine/detail/taskqueue/2012/12/18#ae-trust-detail-taskqueue-add-latency](https://code.google.com/status/appengine/detail/taskqueue/2012/12/18#ae-trust-detail-taskqueue-add-latency)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:38:58.633

和这里一样...

文件“/base/python27_runtime/python27_lib/versions/1/google/appengine/api/labs/taskqueue/taskqueue.py”，第 1042 行，添加 queue_name=queue_name，transactional=transactional) 文件“/base/python27_runtime/python27_lib/版本/1/google/appengine/api/labs/taskqueue/taskqueue.py”，第 717 行，添加返回 Queue(queue_name).add(self, transactional=transactional) 文件“/base/python27_runtime/python27_lib/versions/1 /google/appengine/api/labs/taskqueue/taskqueue.py”，第 803 行，添加 self.__AddTasks(tasks, transactional) 文件“/base/python27_runtime/python27_lib/versions/1/google/appengine/api/labs/ taskqueue/taskqueue.py"，第 836 行，在 _ *AddTasks raise self.* _TranslateError(e.application_error, e.error_detail) TransientError

是回来并工作了将近 1 小时后！

关于 GAE 引擎状态：

上午 10:00 - 晚上 11:59 任务队列

添加任务时出现问题 我们正在调查从美国/太平洋时间上午 10 点开始的 Google App Engine 任务队列服务问题。我们将很快提供更多信息。

# spring-mvc - Spring 控制器在非隐私浏览中调用了两次

> ID：13939213
> 
> 赞同：0
> 
> 时间：2012-12-18T18:29:55.660
> 
> 标签：spring-mvc

我遇到了一个奇怪的问题，我的 spring 控制器被一次请求调用了两次，但是当我的 firefox 变成私人浏览时，问题就消失了

控制器是：

```
@Controller
@RequestMapping("/user/*")
public class UserController {

@RequestMapping(method=RequestMethod.GET, value="home")
public String home(Model model, NativeWebRequest request, HttpSession session) {

    return "user/homepage";
}

} 
```

注意：我已经验证了 user/homePage.jsp 并且它没有任何引用空值的静态资源（而且问题仅发生在非隐私浏览上）。

提前感谢您的及时帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:13:52.993

您可以检查的一件事是扫描控制器组件的应用程序上下文是否被加载了两次。例如，在您的 web xml 中，您将调度程序 servlet 配置为在 web.xml 中命名为调度程序，并配置 contextConfigLocation 以加载以下 bean 配置文件。

```
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>classpath*:dispatcher-servlet.xml</param-value>
</context-param> 
```

这可能导致控制器在每个请求中被命中两次，因为调度程序 servlet 会在调度程序 servlet 启动时自动加载一次，而在 ContextLoaderListener 启动时会自动加载一次。

# asp.net-mvc - 从在 localhost 上运行的 webapi 获取图像路径

> ID：13939216
> 
> 赞同：1
> 
> 时间：2012-12-18T18:30:12.400
> 
> 标签：asp.net-mvc

我将图像存储在项目 Web API 的文件夹 App_Data 中。我使用路径存储在数据库中：

```
 var path = Path.Combine(System.Web.HttpContext.Current.Server.MapPath("~/App_Data/"), user.Username + ext); 
```

从项目 MVC 客户端我调用 Web Api，从路径图像我无法显示标签`<img />`。Chrome 显示错误：不允许加载本地资源。

```
<img id="img_id"  width="70px" heigh="70px" src="D:\Nguyen Nhu\Lap Trinh Hien Dai\ServerAPI\ServerAPI\App_Data\nophoto.gif"/> 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:37:16.157

通常，您应该使用[Url.Content](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content(v=vs.108).aspx)而不是`Server.MapPath`在 MVC 中映射服务的客户端 Url。[Server.MapPath](http://msdn.microsoft.com/en-us/library/ms524632(v=vs.90).aspx)返回物理文件夹，并且只能由服务器端代码使用。

但是，`App_Data`这是一个特殊的文件夹，存储在那里的文件[不会](https://stackoverflow.com/questions/1519790/images-that-are-in-app-data-folder-not-shown-in-browser)由 IIS 提供。

**TL;DR**：您需要使用另一个文件夹来存储您的图像，例如

`Url.Content('~/MyImagesFolder/' + user.Username + ext);`

# opengl - OpenGL 忽略带有 alpha 的像素

> ID：13939219
> 
> 赞同：0
> 
> 时间：2012-12-18T18:30:30.757
> 
> 标签：opengl, opengl-es

好吧，我正在修改一个 2D 开源游戏客户端，我试图为游戏对象纹理添加透明度。它已经读取并加载了 alpha 通道。纹理已经以 RGBA 格式和内部格式加载到 openGL 中。

问题是，当像素的 alpha 通道低于 255（或 1）时，它就不会出现在屏幕上。它没有忽略 alpha 通道并且只显示 RGB，它隐藏了像素。该客户端使用 OpenGL 和着色器进行绘图。

我已经通过调用： 和 启用`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA )`了 `glDisable(GL_DEPTH_TEST)`混合`glColorMask(1,1,1,1)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:58:18.110

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA ) 
```

这一行告诉 OpenGL 如何混合源像素和目标像素。

```
glDisable(GL_DEPTH_TEST) 
```

我认为这可能是您出错的地方，因为这会禁用 2D 渲染不需要的 Z-DEPTH 测试。

```
glColorMask(1,1,1,1) 
```

我对此不是 100%，但我怀疑这会隐藏任何与指定 RGBA 匹配的像素。在这种情况下，任何 R=255、G=255、B=255 和 A=255 的像素都不会被渲染。

尝试使用：

```
glEnable(GL_BLEND);
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);

renderEverything();

glDisable(GL_BLEND); 
```

希望你能让它工作:)

# android - 日志语句未在 onCreate() 中调用

> ID：13939220
> 
> 赞同：6
> 
> 时间：2012-12-18T18:30:35.597
> 
> 标签：android, logcat, oncreate

我的调试方法中有一系列`Log`语句`onCreate()`，但有时它们只是没有打印在我的`LogCat`. 有没有人知道的任何理由？

也许我误解了 Activity 生命周期的基础知识。我已经访问[了开发者的页面](http://developer.android.com/reference/android/app/Activity.html)，但仍然没有任何意义。

让我澄清一下，`Log`如果我卸载应用程序然后再次从 Eclipse 启动它，则会显示调用。但是，我正在运行测试以查看已经运行的应用程序功能。

我有一个 MainMenu Activity，它源于多个其他活动。当我卸载应用程序并重新启动它时，它会打印我期望它打印的内容。然后，我转到设备的设置和`Force Quit`应用程序（这是正确的做法吗？）。之后，我再次打开我的应用程序。该方法没有`Log`消息`onCreate()`，但是当我移动到不同的 Activity 时，我`MainMenu`的 's`onPause()`和`onStop()`方法具有`Log`正确打印到 LogCat 的消息。

有任何想法吗？

编辑：

我想在重新启动时添加它，方法中`Log`的消息`onStart()`也被跳过。

如果您有兴趣，这是我的 onCreate/onStart/onPause/onStop 方法。里面有很多重复的代码，这是为了尝试找出应用程序重新启动时调用的方法。不过不应该有所作为，我觉得这是我重新启动应用程序的方法的问题。

```
public void onCreate(Bundle savedInstanceState) {
    // This calls all inherited methods, as this is a subclass of Activity.
    super.onCreate(savedInstanceState);
    if(D) Log.e(TAG, "+++ ON CREATE +++");
    Log.i( TAG, "Whats going onnnn" );

    // Set the view the main.xml
    setContentView(R.layout.main);
    RelayAPIModel.bluetoothConnected = false;
    // Initialize the connection.
    setupConnection();
    Log.i( TAG, "Whats going onnnn2" );

    // Check how if bluetooth is enabled on this device.
    mService.checkBluetoothState();
    // Initialize stuff from PilotMain() method
    initMain();
    Log.i( TAG, "Whats going onnnn3" );
    // Add listeners to all of the buttons described in main.xml
    buildButtons();
    Log.i( "HERE", "HERE" );
    // If the adapter is null, then Bluetooth is not supported
    if (mService.getAdapter() == null) {
        Toast.makeText(this, R.string.toast_bt_not_avail, Toast.LENGTH_LONG).show();
        finish();
        return;
    }
    savedStuff = (SerializableObjects)LocalObjects.readObjectFromFile( getApplicationContext(), "LastDevice.txt" );
    if( savedStuff != null ) {
        hasLastDevice = true;
        Log.i( "HAS", "LAST DEVICE" );
        Log.i( "HAS", savedStuff.getName() );
    } else {
        hasLastDevice = false;
        Log.i( "HAS NO", "LAST DEVICE" );
    }

    pairedDeviceList = new ArrayList<BluetoothDevice>();
    pairedDevices = mService.getAdapter().getBondedDevices();

    for( BluetoothDevice device: pairedDevices ) {
        pairedDeviceList.add( device );
    }
    if( hasLastDevice ) {
        for( int i = 0; i < pairedDeviceList.size(); i++ ) {
            Log.i( "1 HERE HERE", pairedDeviceList.get( i ).getName() );
            Log.i( "1 HEUH?I@JD", savedStuff.getName() );
            if( pairedDeviceList.get( i ).getName().equals( savedStuff.getRealName() ) ) {
                // THIS IS THE DEVICE WE NEED
                previousDevice = pairedDeviceList.get( i );
                i = pairedDeviceList.size();
            }
        }
    }

} 
```

开始（）

```
 public void onStart() {
    super.onStart();
    if(D) Log.e(TAG, "++ ON START ++");

    savedStuff = (SerializableObjects)LocalObjects.readObjectFromFile( getApplicationContext(), "LastDevice.txt" );
    if( savedStuff != null ) {
        hasLastDevice = true;
        Log.i( "HAS", "LAST DEVICE" );
        Log.i( "HAS", savedStuff.getName() );
    } else {
        hasLastDevice = false;
        Log.i( "HAS NO", "LAST DEVICE" );
    }

    pairedDeviceList = new ArrayList<BluetoothDevice>();
    pairedDevices = mService.getAdapter().getBondedDevices();

    for( BluetoothDevice device: pairedDevices ) {
        pairedDeviceList.add( device );
    }
    if( hasLastDevice ) {
        for( int i = 0; i < pairedDeviceList.size(); i++ ) {
            Log.i( "2 HERE HERE", pairedDeviceList.get( i ).getName() );
            Log.i( "2 HEUH?I@JD", savedStuff.getName() );
            if( pairedDeviceList.get( i ).getName().equals( savedStuff.getRealName() ) ) {
                // THIS IS THE DEVICE WE NEED
                previousDevice = pairedDeviceList.get( i );
                i = pairedDeviceList.size();
            }
        }
    }

    // If BT is not on, request that it be enabled.
    // setupChat() will then be called during onActivityResult
    if (!mService.getAdapter().isEnabled()) {
        Log.i( TAG, "first !isEnabled " );
        Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
        Log.i( TAG, "second !isEnabled" );
    // Otherwise, setup the connection
    } else {
        if (mService == null) {
            Log.i( TAG, "setupConnection BEFORE" );
            setupConnection();
            Log.i( TAG, "setupConnection AFTER" );
        }
    }
} 
```

暂停（）

```
@Override
public synchronized void onPause() {
    super.onPause();
    if(D) Log.e(TAG, "- ON PAUSE -");

    savedStuff = (SerializableObjects)LocalObjects.readObjectFromFile( getApplicationContext(), "LastDevice.txt" );
    if( savedStuff != null ) {
        hasLastDevice = true;
        Log.i( "HAS", "LAST DEVICE" );
        Log.i( "HAS", savedStuff.getName() );
    } else {
        hasLastDevice = false;
        Log.i( "HAS NO", "LAST DEVICE" );
    }

    pairedDeviceList = new ArrayList<BluetoothDevice>();
    pairedDevices = mService.getAdapter().getBondedDevices();

    for( BluetoothDevice device: pairedDevices ) {
        pairedDeviceList.add( device );
    }
    if( hasLastDevice ) {
        for( int i = 0; i < pairedDeviceList.size(); i++ ) {
            Log.i( "4 HERE HERE", pairedDeviceList.get( i ).getName() );
            Log.i( "4 HEUH?I@JD", savedStuff.getName() );
            if( pairedDeviceList.get( i ).getName().equals( savedStuff.getRealName() ) ) {
                // THIS IS THE DEVICE WE NEED
                previousDevice = pairedDeviceList.get( i );
                i = pairedDeviceList.size();
            }
        }
    }

    if( savedStuff != null ) {
        Log.i( "HAS", savedStuff.getName() );
    }
} 
```

停止()

```
public void onStop() {
    super.onStop();
    if(D) Log.e(TAG, "-- ON STOP --");
    if( savedStuff != null ) {
        Log.i( "HAS", savedStuff.getName() );
    }
    //  Relay();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-14T08:56:37.747

我在记录时遇到了同样的问题`Application.onCreate()`。我发现如果我将过滤器从“仅显示选定的应用程序”更改为“无过滤器”并在 LogCat 中搜索`TAG`使用的，那么我可以看到日志消息。

# c++ - bison：存储自定义类

> ID：13939225
> 
> 赞同：1
> 
> 时间：2012-12-18T18:30:52.443
> 
> 标签：c++, parsing, bison

我现在正在学习 Bison 并用它编写一个玩具编译器。正如我发现的那样，我可以使用 %union 指令存储不同的值，但遗憾的是 %union 不支持我自己的类。我怎样才能拯救他们？假设我有一个名为`object_type`; 这个类有几个虚函数和一些继承者，比如`bool_type`，`int_type`等等。我可以创建一个指针`object_type*`，它可以保存任何类型的子类，但它只能保存一个对象；如果我有条件`OBJECT AND OBJECT`怎么办？如果我要使用 union，我可以使用`$1`and`$3`来获取值；但我更喜欢使用我自己的类型，这些类型具有我需要的功能。有没有办法解决？提前致谢！

```
%{
#include <iostream>
using namespace std;

extern "C" {
  int yylex(void);
  int yyparse(void);
  int yywrap() { return 1; }
} /* extern "C" */

void yyerror(const char *error) {
  cerr << error << endl;
} /* error handler */

%}

/*============================================================================*/
/* Create Bison union and stack */
/*============================================================================*/
%code requires {
#ifndef __TYPES_HPP_INCLUDED__
#define __TYPES_HPP_INCLUDED__
#include "types.hpp"
#endif
}

%union {
  object_type* pointer;
  none_type*   none_buffer;
  bool_type*   bool_buffer;
  int_type*    int_buffer;
  float_type*  float_buffer;
  bytes_type*  bytes_buffer;
} /* union */ 
```

g++ 返回此错误：`error: ‘bool_type’ does not name a type`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:34:05.287

您可以使用混合解决方案并存储一个包含多个不同类型对象的指针的联合。例如，如果你有`int_type`和`bool_type`对象，你可以像这样创建一个联合：

```
%union {
     int_type*  iType;
     bool_type* bType;
     /* ... */
} 
```

这样，如果你有一个像 的产品`OBJECT AND OBJECT`，你可以有像这样的动作

```
$$ = new bType($1->memberFunctionOnBool() && $3->memberFunctionOnBool()); 
```

希望这可以帮助！

# c++ - C++ - 递归函数中的字符串流

> ID：13939230
> 
> 赞同：0
> 
> 时间：2012-12-18T18:31:06.277
> 
> 标签：c++, recursion, segmentation-fault, stringstream

```
#include <sstream>
#include <string>

using namespace std;

void fRec(int i) {
    if (i == 0) {
        return;
    }

    fRec(i - 1);

    ostringstream s;
}

int main(int argc, char *argv[]) {
    fRec(50000);
    return 0;
} 
```

运行时，这会产生：

```
Segmentation fault (core dumped) 
```

来自 gdb 的回溯：

```
#0  0x000000000040064f in fRec (i=<error reading variable: Cannot access memory at address 0x7fffc75a6f5c>) at strstr.cpp:6
#1  0x000000000040066e in fRec (i=28182) at strstr.cpp:11
#2  0x000000000040066e in fRec (i=28183) at strstr.cpp:11
#3  0x000000000040066e in fRec (i=28184) at strstr.cpp:11
#4  0x000000000040066e in fRec (i=28185) at strstr.cpp:11
#5  0x000000000040066e in fRec (i=28186) at strstr.cpp:11
... 
```

我想问一下为什么会这样——如果我创建一个字符串对象而不是 ostringstream，一切都可以完成。在我看来，如果一次不能有太多的 stringstream 实例？

感谢您的澄清

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:34:52.900

很多时候自动存储（堆栈）是有界的。50,000 次递归已经很多了。

如果您的堆栈只有 1 MB，并且整个函数调用开销超过 20 个字节，那么您的堆栈就会崩溃。

`stringstream`只是一个在创建和销毁时执行操作的类，因此它将读取和写入堆栈顶部之外的内容。

要解决此问题，请不要递归 50k 深度。或者，增加你的堆栈大小（这将是一个编译器标志）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:34:11.143

你是对的，显然 50000 个`ostringstream`实例炸毁了堆栈。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T18:34:59.083

这是堆栈溢出。程序的堆栈大小通常是有限的。您所确定的只是它`std::string`的大小可能比它小`std::ostringstream`，因此它不会很快填满堆栈。这是循环构造可能优于递归的原因之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T18:35:12.530

您的*堆栈*空间不足。`s`分配在堆栈上，您正在执行 50,000 次。一旦你在你的堆栈上运行 OOM，你就会崩溃（理所当然）

# javascript - 测试丢失的 .data() 结果

> ID：13939239
> 
> 赞同：1
> 
> 时间：2012-12-18T18:31:31.773
> 
> 标签：javascript, jquery

如何读取数据属性的值并检查该属性是否不存在？

例如：

```
var value = $(selector).data('myData'); 
```

`data-myData`检查属性是否丢失或不包含数据的最可靠方法是什么？如果它丢失并且我执行“value.length”，那么我会得到一个错误。

我知道我可以使用`hasData()`，但是如果数据在那里，我需要它，并且两次检查该值似乎效率较低。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:34:14.320

我通常只是这样做：

```
var value = $(selector).data('myData') || ''; 
                                 // or || 0;
                                 // or || someBackupVariable;
                                 // (just depends on what you want/need) 
```

至少这种方式你有一个备份值，所以当你对变量进行操作时`value`它不会破坏它。

**[jsFiddle 演示](http://jsfiddle.net/Qr3R7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:34:25.527

如何获得这样的价值：

```
var value = $(selector).data('myData');
if (!value) do a hasData() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T18:35:45.880

我不认为它效率低下，但如果你真的不想读两遍，你应该检查`undefined`：

```
value = $(selector).data('myData');
if (typeof value === "undefined") {
    ... 
```

# random - 从直方图生成随机数

> ID：13939242
> 
> 赞同：2
> 
> 时间：2012-12-18T18:31:34.923
> 
> 标签：random

我需要从以下数据生成一个随机数：

0-10 : 23%

10-80 : 50%

80-100 : 27%

如何从这些信息中生成随机数？

一种方法是拟合分布，但我必须对大约一百个变量执行此操作，而且我不想拟合 100 个分布。有什么提示吗？

```
import random
a=[23, 73, 100]
b=[10, 80, 100]
rndval=awesomefunction(a,b) 
```

现在，关于`awesomefunction()`，我完全不知道。

但是，据我所知，（和一个非常草率的实现）

```
temp_rand=random.uniform(0,100)
if(temp_rand<=23):
 rndval=random.uniform(0,10)
if(temp_rand<=73 && temp_rand>23):
 rndval=random.uniform(10,80)
if(temp_rand>73):
 rndval=random.uniform(80,100) 
```

但是恕我直言，这是无法衡量的草率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:38:44.240

您可以使用 2 个随机生成器来实现此目的。第一个应该生成一个从 0 到 1 的随机双精度数。

对于这个生成器，您应该检查随机数是否在 0 到 .22、.23 到 .73 或 .74 到 1 之间。如果数字在第一个范围内，您只需运行另一个随机数生成器来生成一个从 0 到 10 的数字，这就是你的数字。第二个和第三个范围也是如此。

一些高级伪代码：

```
double firstRandomNumber = generateRandomNumberFromZeroToOne();
if (firstRandomNumber <= .22) {
    //generate random number from 0 to 10 and that's your number.
} else if (firstRandomNumber <= .73) {
    //generate random number from 10 to 80 and that's your number.
} else {
    //generate random number from 80 to 100 and that's your number.
} 
```

附注：大多数语言已经有随机数生成器，它们将生成一个从 0 到 1 的随机数或一个特定范围（0 到 10）的整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:04:59.417

请参阅[http://www.keithschwarz.com/darts-dice-coins/](http://www.keithschwarz.com/darts-dice-coins/)和 [加载骰子的数据结构？](https://stackoverflow.com/questions/5027757/data-structure-for-loaded-dice)有关几种方法、交易速度和复杂性的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:40:42.120

您可以进行两步随机提取。第一个随机数会告诉您（大致）使用哪个四分位数。然后从该组中随机抽取。

伪代码：

```
randPercentile = 100 * Rand()

if (randPercentile <= 23)
    randResult = Rand(0, 23)
else if (randPercentile > 23 && randPercentile <= 73)
    randResult = Rand(24, 73)
else
    randResult = Rand(74, 100)

print randResult 
```

您必须检查您选择的语言/框架的 Rand API，但大多数 Rand 函数将默认返回 0 和 1 之间的浮点数，并针对最小/最大值范围进行重载。如果它不可用，你可以很容易地对后一个调用（带有最小值/最大值）进行编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T20:00:17.940

C# 实现具有 N 个可能范围的“范围”随机数生成器。

```
using System;
using System.Collections.Generic;

public class MyClass
{
    static void Main()
    {
        var ranges = new List<Range>
        {
            new Range( 0,  23,  0,  10),
            new Range(24,  73, 11,  80),
            new Range(74, 100, 81, 100),
        };

        for (var i = 0; i < 50; i++)
        {
            var randInt = GetRand(0, 100, ranges);
            Console.WriteLine(randInt);
        }

        Console.ReadKey();
    }

    static Random _myRandom = new Random();

    static int GetRand(int absMin, int absMax, List<Range> ranges)
    {
        var i = _myRandom.Next(absMin, absMax);

        foreach (var range in ranges)
        {
            if (i >= range.PercentMin && i <= range.PercentMax)
            {
                return _myRandom.Next(range.ValueMin, range.ValueMax);
            }
        }

        throw new ArgumentOutOfRangeException("Incomplete range?");
    }
}

class Range
{
    public int PercentMin { get; set; }
    public int PercentMax { get; set; }
    public int ValueMin { get; set; }
    public int ValueMax { get; set; }

    public Range(int pctMin, int pctMax, int min, int max)
    {
        PercentMin = pctMin;
        PercentMax = pctMax;
        ValueMin = min;
        ValueMax = max;
    }
} 
```

# c++ - 阻塞套接字 - 检测状态

> ID：13939243
> 
> 赞同：3
> 
> 时间：2012-12-18T18:31:35.297
> 
> 标签：c++, c, sockets

我正在开发我的第一个 c/c++ 应用程序并使用套接字。此应用程序连接到服务器并读取从服务器发送的图像数据，图像数据前面有一些感兴趣的整数，例如要读取多少数据。

该应用程序正在使用阻塞套接字，因为当可以选择阻塞直到数据可用时，我认为让我的线程连续循环不会更好。

我现在的问题是，如果服务器只是失去与网络的连接，我的应用程序就坐在那里，我无法触发给用户的通知或尝试重新连接。我不知道如何检查连接状态。

有人可以就如何解决我的问题给我一些建议吗？

谢谢你。我已经粘贴了我的 readImageInt() 函数，它显示了我是如何从套接字读取的。我正在使用 linux 设备进行开发。

```
int readImageInt()
{

int nb, i;
union {
    long int whole;
    char bytes[4];
} v;
memset(v.bytes, 0x00, 4);
nb = recv(imagesock, v.bytes, 4, MSG_WAITALL);
if (nb == 0||nb == -1)
 {

    return -1;
 }
else
    {
    v.whole = ntohl(v.whole);

     return v.whole;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:48:10.703

您可以设置[套接字选项](http://www.kernel.org/doc/man-pages/online/pages/man2/setsockopt.2.html)以突破长阻塞接收操作。[`SO_RCVTIMEO`](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)

### 编辑0：

或者，您可以使用像[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html), [`poll(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)（或者[`epoll_wait(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/epoll_wait.2.html)如果您在 Linux 上）这样的轮询调用超时。这将允许您摆脱内核等待检查，例如，一些用户输入告诉您是继续等待还是保释。

不过，检测断开连接的更可靠方法是在对方支持的情况下*发送数据 - 您将收到信号或错误返回（尽管在崩溃的远程端可能需要几分钟）。*

### 编辑1：

看一眼[`select_tut(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select_tut.2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:02:54.500

您可以考虑在接收任何数据之前使用 select 函数来检查套接字的状态。请参阅此处，例如[http://support.sas.com/documentation/onlinedoc/sasc/doc750/html/lr2/select.htm](http://support.sas.com/documentation/onlinedoc/sasc/doc750/html/lr2/select.htm)

# javascript - 为什么我的 $scope 属性在我的 AngularJS 应用程序中不断重置？

> ID：13939244
> 
> 赞同：6
> 
> 时间：2012-12-18T18:31:35.873
> 
> 标签：javascript, angularjs

我有以下 AngularJS 应用程序，它由模板 ( `index.html`)、应用程序定义 ( `app.js`)、控制器定义 ( `controllers.js`) 和托管页面 ( `host.jsp`) 组成。

代码如下：

搜索.jsp

```
<div class="container-fluid" ng-app="facetedSearch">
    <div class="row-fluid" ng-view>
    </div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
<script src="/resources/js/page/search/app.js"></script>
<script src="/resources/js/page/search/controllers.js"></script> 
```

应用程序.js

```
angular.module('MyApp', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
     when('/', {templateUrl:'/index.html', controller: MyController}).
     otherwise({redirectTo: '/'});
}]); 
```

控制器.js

```
var MyController=['$scope','$http','$location',function ($scope, $http, $location) {
   //do some fancy stuff
   if($scope.myAttribute===undefined){
      $scope.myAttribute=someDataFromHttpRequest;
   }
   $location.search(someParameters);
}]; 
```

index.html 和 host.jsp 没有显示为简洁和无关紧要。

控制器从 Ajax 请求中获取一些数据，将其中的一些存储在其中`$scope`以避免再次请求，并将其显示给用户并等待输入。当用户在视图中选择一些数据时，我会更新 URL 查询部分以反映选择更改。但我想通过检查数据是否在`$scope`.

我面临的问题`$scope.myAttribute`是始终未定义。它会在每次请求时重置。我想我在滥用 AngularJS。有什么线索吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T20:05:31.617

当您离开控制器时，范围会被破坏。我会考虑制作一个存储你想要的东西的服务。

```
angular.module('MyApp', []).
    config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/', {templateUrl:'/index.html', controller: MyController}).
        otherwise({redirectTo: '/'});
}])
.service("myService", function(){
    this.myAttribute = null;
});

var MyController=['$scope','$http','$location', 'myService',function ($scope, $http,         $location, myService) {
   //do some fancy stuff
   if(myService.myAttribute===null){
      myService.myAttribute=someDataFromHttpRequest;
   }
   $location.search(someParameters);
}]; 
```

服务用于在多个控制器/指令之间共享日期，所以我很确定这就是你想要的。

这是关于它们的文档信息：http: [//docs.angularjs.org/guide/dev_guide.services.creating_services](http://docs.angularjs.org/guide/dev_guide.services.creating_services)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T20:29:10.493

您应该使用服务（或 $rootScope）来存储您想要保留的信息。服务是单例的，您可以将它们注入控制器中，您在那里设置的任何内容都将保留在您的应用程序中。

$scopes 在您更改路由时会被删除，因此它们不会持续存在。

这是一个例子：

```
var myApp = angular.module('myApp',[]);
myApp.factory('SomeService', function() {
  return {
      myAttribute : '12345'
  };
});

var MyController=['$scope','$http','$location', 'myService', 'SomeService',function ($scope, $http, $location, myService, SomeService) {
   //do some fancy stuff
   SomeService.myAttribute; //this is how you access myAttribute
}]; 
```

此外，我会在服务内部创建一个函数，以通过 AJAX 获取您想要的值（而不是将其放在控制器内部），因此服务将类似于：

```
myApp.factory('SomeService', function() {

    var SomeService = {};

    var myAttribute;

    SomeService.getMyAttribute = function () {

         if(!myAttribute) {

            //run ajax request then populate and return myAttribute

         }
         return myAttribute;
    };
    return SomeService;
}); 
```

# java - 在 Java 中滑动 DFT？

> ID：13939257
> 
> 赞同：4
> 
> 时间：2012-12-18T18:32:52.870
> 
> 标签：java, fft, dft

我熟悉在 Java 中进行 FFT 的 JTransforms。我想做一系列短时傅里叶变换，我读到滑动 DFT 更适合。有没有实现高效滑动 DFT 的 Java 库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:56:56.287

我看了看，找不到任何好的图书馆来做到这一点。[stackoverflow 上](https://stackoverflow.com/questions/6663222/doing-fft-in-realtime)有一些 C 代码，我可以尝试将其转换为 java，但我没有发现任何已经完成的操作。最后，即使没有滑动 DFT，我也能够使用 JTransforms 每秒执行大约 1000 个宽度为 2048 的 FFT，这足以满足我的需求，因此我没有费心尝试实现我自己的滑动 DFT。

# android - LinearLayout 和 OnItemClickListener 不起作用

> ID：13939262
> 
> 赞同：1
> 
> 时间：2012-12-18T18:33:22.183
> 
> 标签：android, android-linearlayout, onitemclicklistener

我已经读过可以[在 LinearLayout 上添加 OnItemClickListener ，就](https://stackoverflow.com/questions/2130875/onclicklistener-on-a-linearlayout)好像它是 ListView 一样，但是当我尝试将它添加到 LinearLayout 时，它会抛出一个错误，即未定义 LinearLayouts 的方法。你知道如何在布局上设置 onItemClickListener 吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:41:23.440

您不能`OnItemClickListener`向 LinearLayout 添加 ，但可以添加`OnClickListener`. 您需要将 LinearLayout 设置为`clickable`.

示例 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="true" > 
```

示例 Java：

```
LinearLayout layout = (LinearLayout) findViewById(R.id.layout);
layout.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        // Do something
    }
}); 
```

如果您需要更多帮助，请发布相关代码和 LogCat 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T06:28:18.757

**试试这个代码，** **我希望它能工作**

```
linearLayout ll = (LinearLayout)findViewById(R.id.linearlayout1);
ll.getChildAt(0).setOnClickListener(new View.OnClickListener() {
           @Override
           public void onClick(View v) {
              //your code here
              functionCalledOnItemClicked();

           }
      }); 
```

# c++ - 如何使用 DirectWrite 确定基线位置

> ID：13939264
> 
> 赞同：2
> 
> 时间：2012-12-18T18:33:31.917
> 
> 标签：c++, truetype, direct2d, baseline, directwrite

使用 DirectWrite 和 Direct2D1，我试图模仿 Illustrator CS6 对区域文本框的渲染。CS6 有一个选项，基线可以放置在距离区域文本框顶部的距离处，该距离等于字体的“em 框大小”。例如，使用 Trajan Pro 字体，100pt 磅值，基线距离区域文本框顶部 87.5pt。

从 IDWriteFontFace 对象，我可以获得上升、下降、designUnitsPerEm 值等。

似乎缺少的是相对于 em 框顶部的基线位置。

有没有办法获得设计单位中相对于 em 框顶部的基线位置？

DWRITE_FONT_METRICS 没有它。我查看了 DWRITE_LINE_METRICS，但它的基线值是 ascent + lineGap 并且不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:10:30.387

这只是部分答案，但在这里我在类似情况下处理这个问题的方式是：

EM 高度 - 上升 = 基线

我不确定的是如何甚至是否应该应用 linegap。许多字体的行间距为零，因此它并不相关，事实上，在我认为我熟悉的 css 世界中，通过指示行高为 1.2*EM 高度来排序添加行间距并不少见。当我真的需要知道这个差距的分布时，我总是把它归结为刚刚达到体面的高度，但我并不完全相信这是 100% 正确的，这对我所做的来说已经足够了。

一般来说，EM 高度 = Ascent + Descent + linegap 的顺序。同样，我相信负线间隙是完全有效的，所以无论它如何分布，都在底部，一半在顶部，一半在底部（我认为这真的没有意义，但我可能是错的），或者其他什么，你需要保持一致。希望这可以帮助。

# connection - QTcpSocket false 连接到 QTcpServer

> ID：13939269
> 
> 赞同：1
> 
> 时间：2012-12-18T18:33:48.890
> 
> 标签：connection, qtcpsocket, qtcpserver

一段时间以来，我一直在使用 Qt（对不起我的英语）。我现在正在使用 QtNetwork。

我需要创建一个类似系统的客户端服务器。基本思路如下：

*   两者（客户端和服务器）的 IP 都可以更改。无法将服务器 IP 存储在客户端的配置文件中。因此，服务器必须以某种方式公开其 IP，并且客户端必须能够检测到要连接的服务器 IP。

*   客户端必须能够在没有服务器的情况下工作，并更新服务器（一旦连接）它的工作。

*   客户端和服务器在同一个 WLAN 网络中运行，因此无需通过 Internet 连接。

*   这个新系统旨在替换旧系统（也包括客户端和服务器）。旧服务器仅使用 UDP 广播消息与客户端通信，因此，有时消息会丢失。

因此，对于第一点，我在服务器中实现了一个计时器。此计时器每 X 次通过 UDP 发送一条带有消息“连接到服务器”的广播消息。此消息的想法是客户端检测到此类消息并获取服务器 IP 进行连接。

服务器使用 QTcpServer 来检测客户端连接，并为每个客户端存储一个新的 QTcpSocket 进行通信。

客户端在获得服务器 IP 后使用 TcpSocket 进行连接。

听起来很简单。

我已经实现了连接系统，并且在本地机器（服务器和一些在同一台机器上运行的客户端）中，系统可以正常工作。可以完成连接并且可以进行通信。客户端和服务器都使用 gcc 4.7.2 在 Chakra Linux 64 位上编译。系统上安装的Qt版本是4.8.4。

现在，我用两台真机测试了系统（服务器在 Chakra Linux 64 位上运行，客户端在 Windows 7（一些 32 位和另一个 64 位）和两台 Windows 8（只有 32 位）上运行）。客户端的 Windows 版本已在运行 Windows 7 32 位、Qt 4.8.3 和 MingW 4.6.2 的虚拟机 (VirtualBox 4.2.4) 上编译。Windows 客户端运行所有 32 位编译版本的客户端（所有 32 位 Windows 机器和 64 位 Windows 机器）。

客户端可以检测和读取广播消息（UDP，工作在45454端口），一旦他们得到服务器IP（检测到的IP是正确的），他们会尝试连接。

问题是，从 7 个客户端中，只有一个 Windows 8 连接了一次。所有客户端都尝试连接，所有的 QTcpSocket 都发出“已连接”信号，但服务器没有检测到任何连接。

这完全是随机的，因为有时我可以连接 1 或 2 个客户端。其他时候没有。

此代码用于客户端广播初始化。

```
broadcast_socket = new QUdpSocket ();
server_connection = new QTcpSocket ();
if ( broadcast_socket->bind ( QHostAddress::Any , cfg->networkControl ()->udpPort () ) == false )
{
   cout << ">> NetworkManager: Error setting port " << cfg->networkControl ()->udpPort () << " for UDP broadcast listen." << endl;
}
connect ( broadcast_socket , SIGNAL ( readyRead () ) , this , SLOT ( broadcastMessageReceived () ) );
connect ( server_connection , SIGNAL ( readyRead () ) , this , SLOT ( serverMessageReceived () ) );
connect ( server_connection , SIGNAL ( disconnected () ) , this , SLOT ( serverConnectionLost () ) );
connect ( server_connection , SIGNAL ( connected () ) , this , SLOT ( serverConnected () ) ); 
```

此代码来自客户端，当接收到服务器广播消息时。

```
void NetworkManager::broadcastMessageReceived ( void )
{
   while ( broadcast_socket->hasPendingDatagrams () )
   {
      QByteArray datagram;
      QHostAddress sender_adress;
      datagram.resize ( broadcast_socket->pendingDatagramSize () );
      broadcast_socket->readDatagram ( datagram.data () , datagram.size () , &sender_adress );
      server_ip = sender_adress;

      QString message ( datagram.data () );

      cout << ">> NetworkManager: Broadcast message received: " << message.toStdString () << endl;      
      if ( message == QString ( "0:%1" ).arg ( NetworkMessages::ConnectToServer ) )
      {         
         if ( connection_status == 0 ) // If 0, there is no connection still.
         {
            cout << endl << "   Server asking for connection." << endl;
            cout << "   Server IP: " << sender_adress.toString ().toStdString () << endl;
            cout << "   Trying to connect." << endl;
            server_connection->connectToHost ( sender_adress , cfg->networkControl ()->tcpPort () );        
            cout << "   Waiting for responce." << endl;        
            connection_status = 1;
            break;
         }
      }
   } 
   return;
} 
```

在服务器端，我有这个代码来初始化：

```
connection_server = new QTcpServer ();
connect ( connection_server , SIGNAL ( newConnection () ) , this , SLOT ( connectClient () ) );

if ( connection_server->listen ( QHostAddress::Any , cfg->networkControl ()->tcpPort () ) == false )
{
   cout << ">> NetworkManager: Error setting port " << cfg->networkControl ()->tcpPort () << " for TCP server use" << endl;
} 
```

这是连接新客户端的代码的一部分：

```
void NetworkManager::connectClient ( void )
{
   cout << ">> NetworkManager: New client request." << endl;
   QTcpSocket* new_client = connection_server->nextPendingConnection ();
   connection_sockets[ i ] = new_client; // This is a QList of QTcpSocket pointers, the value of 'i' is calculated previously
   connect ( new_client , SIGNAL ( readyRead () ) , connection_listeners[ i ] , SLOT ( readyRead () ) );
   connect ( new_client , SIGNAL ( disconnected () ) , connection_listeners[ i ] , SLOT ( disconnected () ) );
   connection_state[ i ] = 1;

   cout << "   Asking to client with IP " << new_client->peerAddress ().toString ().toStdString () << " identify." << endl;
   connection_state[ i ] = 1;

   sendToClient ( QObject::tr ( "0:%1" ).arg ( NetworkMessages::IdentifyYourself ) , i );
} 
```

“sendToClient”成员函数只在连接后向客户端发送消息。

所以，问题是，我不知道为什么会有这么随机的连接，大多数时候是错误的连接（客户端再次发出连接的信号，但是在服务器端，当客户端没有发出信号时连接...）。

我不知道我做错了什么......

客户端和服务器都使用 UDP 端口 45454 和 TCP 端口 8888。我已经更改了 TCP 端口值（在客户端、服务器和两者上）和同样的故事。我已经更改了 TCP 端口，如果两者上的端口不同，则消息不会到达客户端...

对不起，很长的文字，但我认为最好告诉你我做了什么......

我正在寻找关于哪一个可能是我的问题的建议，或者如果我的代码有问题......但请记住，有时（并且只是有时）一两个客户端可以真正连接......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T04:53:47.430

`connection_status = 1;`

在`void NetworkManager::broadcastMessageReceived` `( void )`不应该在那里。当连接成功时，这应该设置在`serverConnected ()`.

# forms - 弹簧形式：错误定制

> ID：13939280
> 
> 赞同：0
> 
> 时间：2012-12-18T18:34:37.300
> 
> 标签：forms, spring, spring-mvc, error-handling

我正在尝试实现我自己的 form:errors 标签，或者将它包装在自定义标签上。我想这样做的原因是自定义消息，显示一些图标等。我不确定是否`<form:errors />`足以满足此目的。

我找到了可以替换的那段代码`<form:errors path="foo" />`

```
<spring:bind path="foo">
  <c:if test="${status.error}">
    <img src="<c:url value="/resources/images/warning.png"/>" 
       width="31" height="32" class="error_tooltip" title="${status.errorMessage}" />
  </c:if>
</spring:bind> 
```

顺便说一句...如果有人可以解释，我不知道这是如何工作的。我试图将该代码放入自定义标记（标记文件）中，但是：
javax.servlet.jsp.JspTagException： BindingResult 或 bean 名称“form”的普通目标对象都不能用作请求属性有
什么建议吗？

附言。我还想找到一个解决方案来返回带有 ajax 请求的反馈。我不确定 JSONize BindingResult 对象是否是一个好的解决方案，所以我将适当地创建自己的“反馈”对象。
如果`<form:error/>`标签无法帮助我进行自定义，最好将“反馈”对象用于普通请求和 ajax 请求（使用模型传递到 JSP 或 ajax 的 JSON 响应）。

**编辑：** 这是我的标签代码：

```
<%@attribute name="name" required="true" %>

<spring:bind path="${name}">
  <c:if test="${status.error}">
    <img src="<c:url value="/resources/images/warning.png"/>" 
       width="31" height="32" class="error_tooltip" title="${status.errorMessage}" />
  </c:if>
</spring:bind> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:12:11.380

是的，使用标签`<form:errors>`来自定义表单验证。为了让这个标签工作，你需要在你的控制器中有一个 BindingResult：

```
@RequestMapping(value="/save",method=RequestMethodPOST)
public String save(@Valid Bean yourBean, BindingResult bindingResult) {
    if (bindingResult.hasErrors()) {
        return "/create"; // your form
    } else {
        yourBean= beanService.save(yourBean);
        return "redirect:/view/" + yourBean.getId(); // other action  
    } 
} 
```

您可以阅读有关[表单验证自定义](http://duckranger.com/2012/04/customize-formerrors-output-on-spring-mvc/)的优秀教程。

# wpf - Snoop 无法识别我的程序

> ID：13939291
> 
> 赞同：8
> 
> 时间：2012-12-18T18:35:17.070
> 
> 标签：wpf, snoop

我正在构建一个 WPF 4 应用程序。过去，Snoop 能够看到应用程序，但现在不能。Snoop 2.7.1 和 2.8.0 也是如此。

也就是说，我单击刷新按钮，我的应用程序没有显示在下拉控件中。我将十字准线拖到窗口上方，但它什么也没做。

在调试一些模板问题时，我真的需要窥探我的应用程序。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-18T19:23:28.530

您的应用程序是否需要管理员权限？如果是这种情况，您需要运行提升的 snoop 实例，即以管理员身份运行它。

# objective-c - 如何在 iOS 上修改来电视图

> ID：13939294
> 
> 赞同：-2
> 
> 时间：2012-12-18T18:35:40.730
> 
> 标签：objective-c, ios

我想修改弹簧板在来电视图上显示的标签（例如添加城市信息）。我的应用程序不需要上传到 AppStore，但必须在没有越狱的设备上运行。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:38:56.123

不越狱是做不到的。

# xcode - 当我单击 Thread 上的回溯时，Xcode 4.5.2 没有更多链接到崩溃，没有符号化

> ID：13939296
> 
> 赞同：0
> 
> 时间：2012-12-18T18:35:53.030
> 
> 标签：xcode, crash

在 Xcode 4.5.2 上，当我的应用程序崩溃时，我的代码中没有崩溃行。崩溃不是象征性的。

我只是把这一行来测试我的崩溃处理程序：

```
NSMutableArray *arr = [NSMutableArray array];
[arr objectAtIndex:2]; 
```

当我的应用程序崩溃时，我收到了这条消息：

```
libobjc.A.dylib`_cache_getImp:
0x204c048:  movl   8(%esp), %ecx
0x204c04c:  movl   4(%esp), %edx
0x204c050:  pushl  %edi
0x204c051:  movl   8(%edx), %edi
0x204c054:  pushl  %esi
0x204c055:  movl   (%edi), %esi
0x204c057:  movl   %ecx, %edx
0x204c059:  shrl   $2, %edx
0x204c05c:  andl   %esi, %edx
0x204c05e:  movl   8(%edi,%edx,4), %eax
0x204c062:  testl  %eax, %eax
0x204c064:  je     0x204c06f                 ; _cache_getImp + 39
0x204c066:  cmpl   (%eax), %ecx
0x204c068:  je     0x204c080                 ; _cache_getImp + 56
0x204c06a:  addl   $1, %edx
0x204c06d:  jmp    0x204c05c                 ; _cache_getImp + 20
0x204c06f:  popl   %esi
0x204c070:  popl   %edi
0x204c071:  jmp    0x204c086                 ; _cache_getImp + 62
0x204c073:  nopw   %cs:(%eax,%eax)
0x204c080:  popl   %esi
0x204c081:  popl   %edi
0x204c082:  movl   8(%eax), %eax
0x204c085:  ret    
0x204c086:  xorl   %eax, %eax
0x204c088:  ret    
0x204c089:  nopl   (%eax) 
```

没有更多链接到崩溃的行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:44:37.890

I fixed this by Unchecking this option:

Product > Debug Workflow > Show disassembly when debugging

And done!

# ruby-on-rails - 使用 has_many 和 belongs_to 关联访问用户属性

> ID：13939299
> 
> 赞同：0
> 
> 时间：2012-12-18T18:35:56.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, object, associations

不知道为什么我能解决这个问题，但希望能得到一些帮助。使用 ransack 显示搜索结果时，我试图从我的用户模型中访问属性名称。

我的食谱控制器是这样的

```
def index
  @q = Recipe.search(params[:q])
  @searchresults = @q.result(:distinct => true)
  @q.build_condition
end

def search
  index
end 
```

因此，当我在搜索页面中输出结果时，我可以从配方模型中选择属性，但无法从用户模型中返回任何内容（我想这与我的索引中有 Recipe.search 的事实有关？）

看法

```
<% @searchresults.each do |r| %>
  <%= image_tag r.avatar.url(:thumb)%>
  <%= r.user.name%>
  <%= r.dish_name %>
  <%= r.difficulty %>
  <%= r.preperation_time %>
<% end %> 
```

我得到了未定义的方法名称

配方模型

```
belongs_to :user 
```

用户模型

```
has_many :recipes 
```

我错过了什么，简单的我猜？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:16:18.613

通常，您不想将关联方法链接在一起，因为它使处理`nil`关联变得更加困难（我假设这就是这里发生的事情：`r.user`is`nil`和`nil.name`is 是一个未定义的方法）。

Rails 有一个内置的委托器，你可以使用它来回避这个：

```
class Recipe < ActiveRecord::Base
  belongs_to :user
  delegate :name, :to => :user, :prefix => :user, :allow_nil => true
end 
```

这将定义一个调用的配方实例方法`r.user_name`，如果用户存在或`nil`不存在，则返回名称。

# c# - ContentLoadException 未处理 找不到 ContentTypeReader WindowsGame1.LevelContentReader, ContentImporter

> ID：13939302
> 
> 赞同：1
> 
> 时间：2012-12-18T18:36:01.937
> 
> 标签：c#, xna

我有这个运行时错误，我只是不明白是什么原因造成的。在构建过程中我没有收到任何错误。我的代码分为两部分：一个游戏程序和一个主要引用的内容处理器。

完整的错误是：

> *ContentLoadException 未处理：找不到 ContentTypeReader WindowsGame1.LevelContentReader、ContentImporter*

这是主要游戏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace WindowsGame1
{

public class LevelContentReader : ContentTypeReader<Level>
{
    protected override Level Read(ContentReader input, Level existingInstance)
    {
        Level level = new Level();
        level.Background = input.ReadObject<Texture2D>();
        int count = input.ReadInt32();
        level.LevelObjects = new List<MyLevelObject>(count);
        for (int i = 0; i < count; i++)
        {
            MyLevelObject obj = new MyLevelObject();
            obj.model = input.ReadObject<Model>();
            obj.Position = input.ReadVector3();
            obj.Rotation = input.ReadVector3();
            level.LevelObjects.Add(obj);
        }
        return level;
    }

}

public class MyLevelObject
{
    public Model model;
    public Vector3 Position;
    public Vector3 Rotation;
}

public class Level
{
    public List<MyLevelObject> LevelObjects;
    public Texture2D Background;
}

public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Level mylevel;
    Matrix view;
    Matrix proj;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    /// <summary>
    /// Allows the game to perform any initialization it needs to before starting to run.
    /// This is where it can query for any required services and load any non-graphic
    /// related content.  Calling base.Initialize will enumerate through any components
    /// and initialize them as well.
    /// </summary>
    protected override void Initialize()
    {
        // TODO: Add your initialization logic here

        base.Initialize();
    }

    /// <summary>
    /// LoadContent will be called once per game and is the place to load
    /// all of your content.
    /// </summary>
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);
        view = Matrix.CreateLookAt(new Vector3(0, 10, 150), Vector3.Zero, Vector3.Up);
        proj = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, GraphicsDevice.Viewport.AspectRatio, 1.0f, 1000.0f);
        mylevel = Content.Load<Level>("mylevel2");

        // TODO: use this.Content to load your game content here
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here

        base.Update(gameTime);
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);
        spriteBatch.Begin();
        spriteBatch.Draw(mylevel.Background, GraphicsDevice.Viewport.Bounds, Color.White);
        spriteBatch.End();
        foreach (MyLevelObject myObject in mylevel.LevelObjects)
        {
            foreach (ModelMesh mesh in myObject.model.Meshes)
            {
                foreach (BasicEffect effect in mesh.Effects)
                {
                    effect.EnableDefaultLighting();
                }
            }
            myObject.model.Draw(Matrix.CreateTranslation(myObject.Position) * Matrix.CreateFromYawPitchRoll(myObject.Rotation.X, myObject.Rotation.Y, myObject.Rotation.Z), view, proj);
        }
        // TODO: Add your drawing code here

        base.Draw(gameTime);
    }
}
} 
```

这是我的内容处理器。主游戏有这个参考，还有我的内容：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.IO;
using System.Collections;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Content.Pipeline;
using Microsoft.Xna.Framework.Content.Pipeline.Graphics;
using Microsoft.Xna.Framework.Content.Pipeline.Processors;
using Microsoft.Xna.Framework.Content.Pipeline.Serialization.Compiler;

using TInput = System.String;
using TOutput = System.String;

namespace ContentImporter
{

[ContentTypeWriter]
public class LevelContentWriter : ContentTypeWriter<Level>
{
    public override string GetRuntimeReader(TargetPlatform targetPlatform)
    {
        return "WindowsGame1.LevelContentReader, ContentImporter";
    }
    public override string GetRuntimeType(TargetPlatform targetPlatform)
    {
        return "ContentImporter.Level, ContentImporter";
    }
    protected override void Write(ContentWriter output, Level value)
    {
        output.WriteObject<TextureContent>(value.Background);
        output.Write(value.LevelObjects.Count);
        foreach (MyLevelObject obj in value.LevelObjects)
        {
            output.WriteObject<ModelContent>(obj.Model);
            output.Write(obj.Position);
            output.Write(obj.Rotation);
        }
    }
}

[ContentProcessor(DisplayName = "MyLevelProcessor")]
public class ContentProcessor1 : ContentProcessor<Level, Level>
{
    public override Level Process(Level input, ContentProcessorContext context)
    {
        Level level = new Level();
        level.LevelObjects = new List<MyLevelObject>();
        //Process the input, we'll need to create the texture that is specified
        ExternalReference<TextureContent> backgroundReference = new ExternalReference<TextureContent>(input.BackgroundFileName);
        level.Background = context.BuildAndLoadAsset<TextureContent, TextureContent>(backgroundReference, "TextureProcessor");
        foreach (MyLevelObject obj in input.LevelObjects)
        {
            MyLevelObject newobj = new MyLevelObject();
            newobj.Position = obj.Position;
            newobj.Rotation = obj.Rotation;
            ExternalReference<NodeContent> modelReference = new ExternalReference<NodeContent>(obj.ModelFileName);
            newobj.Model = context.BuildAndLoadAsset<NodeContent, ModelContent>(modelReference, "ModelProcessor");
            level.LevelObjects.Add(newobj);
        }
        return level;
    }

}

[ContentImporter(".mylevel", DisplayName = "My Level Importer", DefaultProcessor = "MyLevelProcessor")]
public class MyContentImporter : ContentImporter<Level>
{
    public override Level Import(string filename, ContentImporterContext context)
    {
        Level level = new Level();
        level.LevelObjects = new List<MyLevelObject>();
        using (StreamReader reader = new StreamReader(File.OpenRead(filename)))
        {
            level.BackgroundFileName = GetAbsolutePath(filename, reader.ReadLine());
        while (!reader.EndOfStream)
        {
            MyLevelObject info = new MyLevelObject();
            info.ModelFileName = GetAbsolutePath(filename, reader.ReadLine());
            string[] floats = reader.ReadLine().Split(' ');
            info.Position = new Vector3(float.Parse(floats[0]), float.Parse(floats[1]), float.Parse(floats[2]));
            info.Rotation = new Vector3(float.Parse(floats[3]), float.Parse(floats[4]), float.Parse(floats[5]));
            level.LevelObjects.Add(info);
        }
    }
        return level;
    }
    private string GetAbsolutePath(string input, string file)
    {
        return Path.Combine(Path.GetDirectoryName(input), file);
    }
}

public class MyLevelObject
{
    public ModelContent Model;
    public Vector3 Position;
    public Vector3 Rotation;
    public string ModelFileName;
}
public class Level
{
    public List<MyLevelObject> LevelObjects;
    public TextureContent Background;
    public string BackgroundFileName;
}
} 
```

在这件事上任何帮助都将不胜感激，因为我使用的这本书主要假设您接近 C# 专家，并且它教授 XNA 背后的所有细节，而不是游戏概念。它不提供任何形式的故障排除。这本书是 Tom Miller 和 Dean Johnson 的 XNA Game Studio 4.0 Programming。

顺便说一句，如果您需要的信息比我发布的更多，我很乐意提供。

# jquery - JQuery when() then() 导致缺少ajax responseText

> ID：13939304
> 
> 赞同：4
> 
> 时间：2012-12-18T18:36:24.113
> 
> 标签：jquery, ajax, deferred, responsetext

这让我很难过。我有一个 url 数组（用于数据），我需要将其拉入页面并在全部加载后处理结果。我正在尝试使用 JQuerys Defered 功能来确保在处理结果之前所有 ajax 调用都已完成。我一介绍它（when().done() 功能），我的 responseText 就神奇地消失了。

我最简单的例子：

```
$.when([$.ajax("pathToData")]).done(
    function(results) {
        console.log(results[0]);               //object with a responseText attribute
        console.log(results[0].responseText);  //undefined !!!
    }
) 
```

我怀疑我遗漏了一些简单的东西，但是我阅读文档越多，这看起来越正确。我希望其他人可以轻松发现问题并为我指明正确的方向。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:56:53.533

您看到的奇怪行为是 的限制`console`，实际上与您的代码无关。

对象属性的解析会延迟到您`Object`展开`console`. 到那时，AJAX 请求已经完成并且`responseText`可用。但是， 的值`results[0].responseText`会立即解析为`undefined`。

如果你这样做了：

```
$.when([$.ajax({
    url: '/echo/json/',
    type: 'POST',
    data: {json: '{"a":12}'}
})]).done(function(results) {
    console.log(JSON.stringify(results[0])); //object with a responseText attribute
    console.log(results[0].responseText); //undefined !!!
})​ 
```

你会看到的：

```
{"readyState": 1}
undefined 
```

反而。

* * *

至于如何解决您的问题；我从来不知道`$.when()`接受数组，文档也没有说它接受。因此，`when()`似乎正在`done()`立即执行，因为数组不是延迟的（根据文档）：

> 如果将单个参数传递给 jQuery.when 并且它不是 Deferred，它将被视为已解析的 Deferred，并且附加的任何 doneCallbacks 都将立即执行。

而是将您的 AJAX 请求作为单独的参数传递，如文档中所示：

```
$.when($.ajax('a'), $.ajax('b')).done(function (a, b) {
  // a & b = [ "success", statusText, jqXHR ]
}); 
```

像这样：

```
$.when($.ajax({
    url: '/echo/json/',
    type: 'POST',
    data: {json: '{"a":12}'}
}), $.ajax({
    url: '/echo/json/',
    type: 'POST',
    data: {json: '{"b":12}'}
})).done(function(a, b) {
    console.log(a[2].responseText);
    console.log(b[2].responseText);    
})​; 
```

你得到：

```
{"a": 12}
{"b": 12} 
```

...和更新的小提琴：http: [//jsfiddle.net/39mHw/2/](http://jsfiddle.net/39mHw/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:45:13.057

被设置的`results`是一个数组，它代表 3 个东西 - textStatus（即“成功”）、statusText 和 jqXHR 对象 - 按此顺序。

您需要访问数组位置 2 以获取具有该`responseText`属性的 jqXHR 对象。因此，只需像这样更改您的索引值：

```
$.when($.ajax("pathToData")).done(
    function(results) {
        console.log(results[2]);               //object with a responseText attribute
        console.log(results[2].responseText);  //undefined !!!
    }
) 
```

请注意，我在`ajax()`这里删除了函数调用周围的数组括号。

`when()`这是来自 jQuery页面 ( [http://api.jquery.com/jQuery.when](http://api.jquery.com/jQuery.when) )的一个确切示例：

```
$.when($.ajax("/page1.php"), $.ajax("/page2.php")).done(function(a1,  a2){
    /* a1 and a2 are arguments resolved for the 
        page1 and page2 ajax requests, respectively */
   var jqXHR = a1[2]; /* arguments are [ "success", statusText, jqXHR ] */
   if ( /Whip It/.test(jqXHR.responseText) ) {
      alert("First page has 'Whip It' somewhere.");
   }
}); 
```

# model-view-controller - 一个 Extjs 应用程序调用另一个 Extjs 应用程序

> ID：13939305
> 
> 赞同：6
> 
> 时间：2012-12-18T18:36:28.123
> 
> 标签：model-view-controller, extjs, extjs4.1, sencha-command

使用 Sencha Cmd 生成工作区并创建两个不同的应用程序后，我只想运行第一个应用程序，然后单击一个按钮后，它会调用第二个应用程序 :) 就像调用另一个子应用程序的主应用程序一样有办法吗它 ？谢谢你的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-19T02:27:24.820

您可以开发可以毫无问题地协同工作的独立模块。这两个概念根本没有冲突。

在这里分享一下我的经验。当我们开始我们当前的项目时（从头开始），另外两个团队正在开发另外两个应用程序，一段时间后我们应该将它们“集成”到一个大应用程序中。您不必是天才就能预测最终结果，对吧？当我们听说客户想要更多并行工作（更多团队开发模块）时，情况变得更糟。

第一个想法是使用 iframe，但 PoC 证明这是一个坏主意，所以我们停止了机器并开始设计可插拔架构。我们做得很好，因为目前我们能够轻松加载以隔离方式开发的模块（我们称之为插件）。例如，看看我们的文件夹结构是怎样的：

![在此处输入图像描述](../Images/d393dbcb6cb33c770b43dfbe30df86cb.png)

这是我们设置要加载的模块的元数据： ![在此处输入图像描述](../Images/5bfca9b2873480b0964804e326b5cc57.png)

这有很多优点：

*   模块可以并行开发，
*   模块可以被隔离测试，
*   模块可以动态加载、启用或禁用

当然，这不是 extjs 开箱即用的东西，但你可以这样做，因为它值得。

所以，简短的回答：你的问题不是应用程序的大小，而是它的结构。像我们一样遵循推荐的具有自定义文件夹结构的 MVC 模式。

**更新：**

关于插件元数据。应用程序主控制器只有一个职责：加载插件。这是通过以下代码完成的：

```
discoverPlugins: function () {
    var me = this;
    Ext.each(plugins(), function (d) {
        me.loadPluginController(d.controller);
    });

    App.History.notifyAppLoaded();
},

loadPluginController: function (controllerName) {
    try {
        var controller = App.current.getController(controllerName);
        controller.init(App.current);
    } catch (e) {
        console.log(controllerName + ' controller couldn\'t be loaded.' + e);
    }
}, 
```

每个插件控制器都充当调度程序，也就是说，有一个历史组件监听 url（在地址栏中），当它发生变化时，逐个插件迭代插件，请求处理 url。当插件能够处理请求的 url 时，该过程结束。
这是“操作”插件的调度程序配置：

```
constructor: function () {
    this.callParent(arguments);
    this.router.set({
        '!/operations/product/permissions/definition': this.viewPermissionsDefinition,
        '!/operations/product/accesslist/create': this.createProductAccessList,
        '!/operations/product/accesslist/{id}/edit': this.editProductAccessList,
        '!/operations/product/accesslist/{id}': this.viewProductAccessList,
        '!/operations/product/accesslist': this.viewProductAccessList,
        '!/operations/{...}': this.notFound,
        '!/operations': this.root
    });
} 
```

这是历史类代码的导航方法：

```
navigate: function (token) {
    var me = this,
        handled;

    if (token) {
        handled = false;
        for (var i = 0; i < me.routers.length; i++) {
            if (me.routers[i].processToken(token)) {
                handled = true;
                break;
            }
        }

        if (!handled) {
            App.current.fail(404, 'Resource not found.');
        }
    } else {
        App.current.gotoUrl('/servicedesk/search');
    }
}, 
```

重要的一点是插件只引用一个共享组件：渲染它们的中心区域：

```
refs: [
    { ref: 'main', selector: '#center-panel' }
], 
```

此引用由所有插件控制器继承，这些插件控制器是“AbstractPluginController”的子类。这很重要，因为模块只知道它们的宿主。这就是我们可以并行发展的原因。

关于 AbstractPluginController，这个类有一些对所有插件控制器有用的核心功能，例如，为了在需要时而不是在此之前加载他们所有的控制器/视图/模型，这个类实现了如下动态控制器加载：

```
createControllerGetters: function (controllers) {
    var me = this;
    controllers = Ext.Array.from(controllers);
    Ext.Array.each(controllers, function (controllerName) {
        var parts = controllerName.split('.'),
            idx = parts.indexOf('controller'),
            significants = parts.slice(idx + 1),
            name = significants.map(function (e) { return Ext.String.capitalize(e); }).join(''),
            fn = 'get' + name + 'Controller';

        if (!me[fn]) {
            me[fn] = Ext.Function.pass(me.getController, [controllerName], me);
        }
    });
},

getController: function (controllerName) {
    this.controllerCache = this.controllerCache || {};
    var me = this,
        cached = me.controllerCache[controllerName];

    if (!cached) {
        me.controllerCache[controllerName] = cached = App.current.getController(controllerName);
        if (cached) {
            cached.init();
            cached.on('beforedestroy', function () {
                me.controllerCache[ref] = null;
            });
        }
    }

    return cached;
}, 
```

这允许我们指定模块具有的子控制器列表（因为主控制器只是一个初始化器和调度），并允许我们按需创建它们。

```
controllers: [
    'Operations.controller.ProductAccessListViewer',
    'Operations.controller.ProductAccessListEditor',
    'Operations.controller.ProductAccessListCreator'
], 
```

总结：我认为主要有以下几点：

1.  模块不必了解主机应用程序的任何信息。
2.  通过链接进行导航/通信，主要是
3.  主机使用元数据执行的集成（插件也可以公开额外的元数据）
4.  延迟加载控制器（他们用自己的视图做某事）

我希望这能给你一个想法。有很多细节和一些整合它们的技巧，但基本上，我想在这里展示的是一个模块化应用程序可以（或应该）用 extjs 开发，只需一点额外的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:28:17.827

这个话题之前已经提过。在此处查看建议： [在 ExtJS 4 MVC 中使用多个控制器](https://stackoverflow.com/questions/7645180/using-more-than-one-controller-with-extjs-4-mvc)

# c++ - 您如何记住右值、左值等之间的区别？

> ID：13939306
> 
> 赞同：10
> 
> 时间：2012-12-18T18:36:29.097
> 
> 标签：c++, mnemonics

[这个问题](https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues)`rvalue`很好，因为它回答了, `lvalue`, `xvalue`,`glvalue`和之间的区别`prvalue`。最佳答案对每个都有一个不错的解释，当我阅读它们时，我理解它们的区别。但是，我很难将它们牢牢记在脑海中，每次有人使用这些术语来提醒自己哪个是哪个时，我都必须在谷歌上搜索它们。

人们是否有任何常见的助记符或其他方式记住哪个是哪个？我真的很希望能够将它们全部记在脑海中，而不会像现在这样混淆它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T18:45:18.037

我做了两个关联：

*   你只能取一个左值的地址
*   xvalues 是一个`std::move`表达式

如果两者都不是，那么它可能是一个prvalue。

现在，为了记住 glvalues 和 rvalues，我简单地想象这个图：

![](../Images/770bb740482181483232777c14f3cde8.png)

lvalues 和 xvalues 都是 glvalues，而 xvalues 和 prvalues 都是 rvalues。这就是您在实践中需要知道的全部内容。

也许记住 lvaluse、xvalues 和 prvalues 的助记符在底部是单词`Lower eXPRessions`（它包含 L、X 和 PR）。也许不吧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:53:57.623

您通常只需要知道某个东西是左值还是右值。这两类表达方式彼此不同。

通常情况下，左值表达式指的是会出现一段时间的东西。例如，变量名称是左值，因为变量会一直存在。另一方面，右值表达式通常指的是暂时存在的东西。您只能获取左值的地址，因为到底为什么您需要即将消失的东西的地址？

现在，在进行这种区分时，您必须考虑*编译器*当时所知道的内容。以函数为例`void foo(const A& a)`。在这个函数内部，编译器不知道传递的对象是否是临时对象，所以它只是假设它会一直存在。也就是说，`a`是一个左值。即使您可以愉快地将临时对象传递给此函数（使用右值表达式调用它），该表达式`a`仍然是左值。

考虑到这一点，您可以通过是否命名来进一步记住某物是左值还是右值。在上面的例子中，由于对象被命名为`a`，它是一个左值。

现在，对于其余类别，您应该记住下图：

![表达类别图](../Images/ddf8beeaa05ae4245f79e7cc73fca6a9.png)

请注意，左值和右值确实是不同的。然而，右值被分成另外两个类别，xvalues 和 prvalues。此外，xvalues 也被认为是 glvalues 以及所有左值表达式。

现在知道这些何时出现归结为记住一些案例。

*xvalues*不是很常见。它们只出现在涉及转换为右值引用的情况下。以下是所有案例：

*   返回右值引用的函数的结果
*   转换为右值引用
*   `object.x`如果`object`是一个 xvalue
*   `object.*member`如果`pobject`是一个 xvalue

根据定义，纯右值是不是 xvalue 的所有其他类型的右值*。*例如，从函数中按值返回对象会创建一个临时返回对象。表示该对象的表达式是纯右值。

类别*glvalue*用于指代不是纯右值的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:41:51.490

左值可以被认为是“命名”变量或内存位置......右值可以被认为是“未命名”内存位置（即，从函数返回的临时变量）或纯“值”（即，就像一个数字）。

# extjs - OpenLayers - 如何绘制多面体？

> ID：13939308
> 
> 赞同：3
> 
> 时间：2012-12-18T18:36:30.793
> 
> 标签：extjs, maps, gis, openlayers

我不是这样做的正确方法，但 OpenLayers 仅从多边形数组中绘制最后一个多边形。

这是我的代码：

```
 for (...) {
                var pointList = [];
                var polygonList = [];
                for (...) {
                    var newPoint = new OpenLayers.Geometry.Point(..X,...Y);
                    pointList.push(newPoint);
                }

                var linearRing = new OpenLayers.Geometry.LinearRing(pointList);
                var polygons = new OpenLayers.Geometry.Polygon([linearRing]);
                polygonList.push(polygons);
          }

          var style_polygon2 = {
                strokeColor: "#05fbff",
                strokeOpacity: 1,
                strokeWidth: 2,
                fillColor: "#05fbff",
                fillOpacity: 0.2

          };

          var multiPol = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(polygonList), null, style_polygon2);
          ...layer.addFeatures(multiPol); 
```

请让我知道是否有人做过这样的事情......

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T03:41:54.413

我已经测试了您的示例，并且在我的情况下一切正常。见[现场演示](http://jsfiddle.net/_DR_/uFbw8/)。代码示例：

```
var options = {
    div: "map",
    zoom: 13,
    center: [-9075004.4955698, 5028040.5259088],
    layers: [
        new OpenLayers.Layer.OSM()
    ]
},
source = [
    [{x: -9075004, y: 5028040}, {x:-9079132, y: 5025403}, {x: -9072673, y: 5023568}],
    [{x: -9074004, y: 5026040}, {x:-9073132, y: 5027403}, {x: -9074673, y: 5026568}],
    [{x: -9073004, y: 5027040}, {x:-9072132, y: 5029403}, {x: -9075673, y: 5028568}]
],
polygonList = [],
multuPolygonGeometry,
multiPolygonFeature,    
vector = new OpenLayers.Layer.Vector('multiPolygon'),
map = new OpenLayers.Map(options);

for (var i=0; i<source.length; i+=1) {
    var pointList = [];
    for (var j=0; j<source[i].length; j+=1) {
        var point = new OpenLayers.Geometry.Point(source[i][j].x, source[i][j].y);
        pointList.push(point);
    }
    var linearRing = new OpenLayers.Geometry.LinearRing(pointList);
    var polygon = new OpenLayers.Geometry.Polygon([linearRing]);
    polygonList.push(polygon);
}
multuPolygonGeometry = new OpenLayers.Geometry.MultiPolygon(polygonList);
multiPolygonFeature = new OpenLayers.Feature.Vector(multuPolygonGeometry);

vector.addFeatures(multiPolygonFeature);
map.addLayer(vector); 
```

# c# - C# 单元测试复杂处理程序网络

> ID：13939309
> 
> 赞同：3
> 
> 时间：2012-12-18T18:36:35.370
> 
> 标签：c#, unit-testing, moq

我有一个相当复杂的程序架构，逻辑最少，但传递了很多事件处理程序。我正在制作服务器框架的骨架，并且有以下类：

`Core`，它听：

`CommHandler`，它听：

`CommLayer`，它听：

`IServerMock`，我使用模拟框架 (MOQ) 将其删除。

对由事件触发的这种关系进行单元测试的最佳方法是什么？我知道单元测试应该是非常孤立和细化的东西，但我能想到的唯一测试方法是测试整个过程并检查 Core 的最终输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:40:39.077

您需要为每个类进行抽象，因此`Core`取决于`ICommHandler`非`CommHandler`等。依赖项应该通过构造函数提供，这样您就可以轻松地单独测试每个类，因为您可以模拟它的依赖项。

```
public class Core
{
    private ICommHandler commHandler;

    public Core(ICommHandler commHandler)
    {
        this.commHandler = commHandler;
    }
} 
```

在您的生产代码中，您可以执行以下操作：

```
var core = new Core(new CommHandler()); 
```

尽管使用 IOC 容器来管理对象的实例化会更好，因为`CommHandler`它有自己的依赖关系，但您应该单独研究。

然后在你的单元测试中，你可以这样做：

```
[Test]
public void TestSomeCommHandlerEvent()
{
     var mockCommHandler = new Mock<ICommHandler>();
     // set up the mock

     var core = new Core(mockCommHandler.Object);
} 
```

这样做可以让您将测试中的 ICommHandler 的实现替换为可以配置其行为的模拟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:49:01.833

听起来您可以模拟事件并检查侦听器是否执行正确的操作（即调用自己的事件）。例如：

```
// Create objects
var commLayerMock = new Mock<ICommLayer>();
var commHandler = new CommHandler(commLayerMock.Object);

// subscribe to CommHandler event
bool raised = false;
commHandler.OnCommHandlerEvent += delegate { raised = true; };

// Raise CommLayer event, ensure CommHandler event was subsequently raised
commLayerMock.Raise(m => m.OnCommLayerEvent += null, new CommLayerEventArgs());
Assert.True(raised); 
```

您可能希望在每个级别都执行类似的操作，以便您知道如果每个级别之间的交互正常工作，则整个链条将正常工作。

# ado.net - 适用于 Sybase ASE 的 Windows 8 OLEDB/ADO.NET 驱动程序？

> ID：13939317
> 
> 赞同：2
> 
> 时间：2012-12-18T18:37:24.777
> 
> 标签：ado.net, oledb, sap-ase

是否有人在 Windows 8（64 位）系统上成功安装了 Sybase OLEDB 驱动程序和 Sybase Central？我已经尝试了 Sybase 网站上的安装程序，但它们失败了。在 Sybase 站点上搜索“Windows 8”，在 Google 上搜索“Sybase Windows 8”，结果一无所获。我们这里有一位开发人员将它们安装在 Windows 7 系统上，然后将操作系统升级到 Windows 8，所以我知道它们可以工作。如果我能提供帮助，我宁愿不卸载 Windows 8 并走这条路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:17:53.783

我设法解决了这个问题！看起来实际的 GUI（用 Java 编写）在 Windows 8 中不起作用，但是有一种方法可以执行控制台安装，这对我有用。

在`Adaptive Server Enterprise 15.5 PC Client`安装 CD（或任何您的源）中，转到文件夹`pcclient32`（或 64）并运行以下命令：`setupConsole.exe -i Console`

按照那里的说明将其安装到您的 Sybase 文件夹中（我的是`c:\sybase`）。

# c++ - 明确提及预期分号

> ID：13939318
> 
> 赞同：3
> 
> 时间：2012-12-18T18:37:25.790
> 
> 标签：c++, compiler-construction, warnings

## 问题

我使用了一个空的声明并且知道这一点。那么如何禁用编译器警告呢？

> 警告 C4390：';' : 找到空的受控语句；这是意图吗？

可能有一种方式可以明确地说我想要一个空语句。

## 背景

在开发环境中，调试功能应显示错误消息并退出应用程序。在生产版本中，它应该什么都不做。所以我为此写了一个宏。

```
#ifdef _DEBUG
#include <iostream>
#define Debug(text) { cout << "Error: " << text; cin.get(); exit(1); }
#else
#define Debug(text) ;
#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:42:00.850

空语句宏的常见习语是：

```
#define Debug(text) do {} while (0) 
```

正如 Ben 在评论中指出的那样，在宏的两个版本中使用这种技术是谨慎的。

```
#ifdef _DEBUG
#include <iostream>
#define Debug(text) do { cout << "Error: " << text; cin.get(); exit(1); } while (0)
#else
#define Debug(text) do {} while (0)
#endif 
```

这个成语在很多地方都有讨论。例如：

*   [http://bruceblinn.com/linuxinfo/DoWhile.html](http://bruceblinn.com/linuxinfo/DoWhile.html)
*   [http://yarchive.net/comp/linux/empty_statement_macro.html](http://yarchive.net/comp/linux/empty_statement_macro.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:47:45.797

您可以明确告诉编译器您没有做任何事情

```
(void)0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:54:05.270

`Debug`用作类似函数的宏，但不像一个宏：

```
if( some_condition ) Debug(); else { blah }    // Ooops 
```

此外，它与标准输出流混淆，包含用于调试和发布构建的不同标头，使用保留符号（以下划线开头，后跟大写）`_DEBUG`（您的意思是使用标准`NDEBUG`吗？）并且不必要地使用非标准退出值。

因此，而不是当前

```
#ifdef _DEBUG
#include <iostream>
#define Debug(text) { cout << "Error: " << text; cin.get(); exit(1); }
#else
#define Debug(text) ;
#endif 
```

做

```
#ifndef DEBUGGING_H
#define DEBUGGING_H

#include <iostream>      // std::cerr, std::endl
#include <stdlib.h>      // exit, EXIT_FAILURE

#ifdef MYDEBUG
#   define Debug(text) ::debugging::sayByeAndTerminate( text )
#else
#   define Debug(text)
#endif

namespace debugging {
    inline void sayByeAndTerminate( char const* const text )
    {
        using namespace std;
        cerr << "Error: " << text; cin.get(); exit(EXIT_FAILURE);
    }
}  // namespace debugging 
```

注意上面的代码*没有*使用傻

```
do {} while( false ) 
```

也不是双傻

```
(void)0 
```

因为没有必要为了一无所获而写一些东西。

没有什么是完美无缺的。

对于警告：我无法使用 Visual C++ 11 重现它（请提供一个展示该行为的*完整示例），但只需***将其关闭**即可。不要调整代码以适应编译器。只需关闭警告即可。

免责声明：即兴代码，编译器未触及。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-29T09:47:58.630

另一个什么都不做的明确表达：

```
void(); 
```

此语法使用 C++ 默认构造函数作为`void`类型，因此它在 C 中不起作用。

它是包含单词的最短有效代码`void`，因此可能略好于`(void)0`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-26T09:08:09.980

禁用编译警告的另一种方法是在代码开头添加以下内容：

```
#pragma warning( disable : 4390 ) 
```

# jsf - f:setPropertyActionListener 不调用方法

> ID：13939323
> 
> 赞同：0
> 
> 时间：2012-12-18T18:37:56.383
> 
> 标签：jsf, primefaces

我需要一些帮助。我`f:setPropertyActionListener`在 JSF 上使用时遇到问题。问题是 JSF 没有在目标方法上设置任何值。

部分xhtml代码如下：

```
<h:form>
    <fieldset style="width:100; margin-left: 350px; margin-top: 250px; position:absolute; border-style: none">
        <p:dataGrid var="prod" value="#{productoController.arrProductosRelevantes}" 
                    columns="5" rows="10" paginator="true">

            <p:panel style="text-align:center">  
                <h:panelGrid columns="1" style="width:100%" columnClasses="colStyle1" rowClasses="rowStyle1" >  
                    <p:graphicImage value="#{prod.imagenUrl}" style="width:100px; height:100px"/>   
                    <h:outputText value="#{prod.marca}" style="width:40px"/>  
                    <p:commandLink value="Ver" action="#{productoController.visualizarProducto()}">  
                        <f:setPropertyActionListener value="#{prod}"   
                                                     target="#{productoController.productoSeleccionado()}" />  
                    </p:commandLink>
                </h:panelGrid>  
            </p:panel>  
        </p:dataGrid>  
    </fieldset>
</h:form> 
```

支持 bean 如下（最相关）：

```
public Producto getProductoSeleccionado() {
    return productoSeleccionado;
}

public void setProductoSeleccionado(Producto productoSeleccionado) {
    if (productoSeleccionado != null) {
        this.productoSeleccionado = productoSeleccionado;
        arrComentarios = null;
        arrProductosComplementarios = null;
        arrProductosSuplementarios = null;
    }
}

public String visualizarProducto() {
    if (arrComentarios == null) {
        obtenerComentarios();
    }
    if (arrProductosComplementarios == null) {
        obtenerArrProductosComplementarios();
    }
    if (arrProductosSuplementarios == null) {
        obtenerArrProductosSuplementarios();
    }
    return "visualizarProducto.xhtml?faces-redirect=true";
}

public ArrayList<Producto> getArrProductosRelevantes() {
    return arrProductosRelevantes;
}

public void obtenerArrProductosRelevantes() {
    clienteDAO = new ClienteDAO();
    productoDAO = new ProductoDAO();
    cliente = clienteDAO.getClientePorId(Sesion.IDCLIENTE);
    arrProductosRelevantes = productoDAO.obtenerProductoRelevantesPorCliente(cliente);
} 
```

顺便说一句，我正在使用@SessionScoped。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:35:50.687

的*目标*属性`f:setPropertyActionListener`应该是属性，而不是方法。这意味着，如果您设置`target="#{productoController.productoSeleccionado}"`它将调用bean`setProductoSeleccionado(Producto prod)`中的方法`productoController`，并将您为*value*属性设置的值作为参数传递。

您指的是一种`productoSeleccionado()`在您的代码中甚至可能不存在的方法。所以，只要丢掉括号就可以了：

```
<f:setPropertyActionListener value="#{prod}"
               target="#{productoController.productoSeleccionado}" /> 
```

# tcl - 在tcl中复制文件

> ID：13939324
> 
> 赞同：2
> 
> 时间：2012-12-18T18:38:09.113
> 
> 标签：tcl, file-copying

我在“文件复制”tcl 命令中有一个查询。我尝试将所有文​​件存储到一个列表中并在我的命令中使用它。但 tcl 无法识别这些文件。

例如：

```
 Files are abc.log , foo.log , bar.log 
```

如果将这些文件附加到列表中，请说 list_file 并且如果我在命令中替换 list_file

```
 lappend list_file abc.log foo.log bar.log
    file mkdir ../../abc
    file copy -- $list_file ../../abc 
```

我收到一条错误消息“错误复制，没有文件或目录”。如果我通过直接指定文件名（而不是列表）来尝试相同的操作，它会起作用。请指导我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:25:25.773

要详细说明@evil-otto 的答案...

`{*}`仅从 Tcl 8.5 开始可用；对于早期版本，`eval`可以使用一个或多个调用。

使用以下命令构造命令`eval`：

```
set cmd [list file copy --]
lappend cmd abc.log foo.log bar.log ../../abc
eval $cmd 
```

（阅读[本文](http://beedub.com/book/3rd/Eval.pdf)以了解为什么在创建要使用的命令时必须使用列表`eval`。）

多次调用（不费吹灰之力）：

```
foreach fname $list_file {
    file copy -- $fname ../../abc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:43:54.660

传递给的列表`file copy`必须展开。

```
file copy -- {*}$list_file ../../abc 
```

# sql - 如何验证 ANSI SQL 是否有语法错误或 DDL 语句？

> ID：13939325
> 
> 赞同：0
> 
> 时间：2012-12-18T18:38:12.730
> 
> 标签：sql, validation, ddl, ansi-sql

我想在不执行代码的情况下了解这两件事。

有没有办法在不编写半编译器的情况下做到这一点？

在我发送它执行之前，我会将一个 sql 传递给一个进程或验证这些东西的东西......

* * *

**@EDIT**：评论问题的答案：

*你想验证什么？*

*   ANSI SQL 语法，并了解它们是否使用 DDL 语句。

*这个是用户输入吗，如果是，他们是如何输入 SQL 语句的？*

*   他们编写了一个 *.sql 文件。我只是在不知道他们在哪里（在什么 IDE 中）编写它的情况下收到它，我必须验证 ANSI 语法（而不是语义）

*这是来自代码吗？你是如何执行代码的？*

*   我不应该执行它。运营员工会这样做。需要的时候。如果您的意思是关于我正在寻找的 ANSISyntaxAndDDLCheckerSomething*的代码，我会使用控制台应用程序运行它......可能使用.Net*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:38:21.973

实际上，没有什么可以验证 SQL 的完整 SQL 分析器（例如在 DBMS 中找到的那些）。这是双重事实，因为根据 SQL 标准有效的内容不一定根据您的目标 DBMS 有效。[SQL 标准](http://savage.net.au/SQL)的语法庞大而复杂。描述语言主要语法的[BNF](http://wikipedia.org/wiki/Backus_Naur_Form)未规定允许的内容有很多限制。

语义检查也非常复杂。例如，如下语句：

```
SELECT * FROM SomeTable; 
```

在语法上是正确的（您可以看到，我也可以看到），但是无法知道它是否会针对给定的数据库成功执行。这取决于`SomeTable`执行查询时数据库中是否存在调用的表。添加显式列名，并且您必须在执行查询时检查列名是否有效。您可能有一个语法有效的 CREATE TABLE 语句，该语句将无法执行，因为存在一个与已存在的表同名的视图。

如果您准备一个语句而不执行它，您会对该语句进行语法和语义检查。这可能是找出您所追求的最可靠的方法。

# function - opencl 辅助函数仅适用于 int 而不适用于 float 或 float2

> ID：13939326
> 
> 赞同：2
> 
> 时间：2012-12-18T18:38:17.333
> 
> 标签：function, kernel, opencl

我试图编写一个辅助函数，但在构建程序时总是出现这个错误。

:24:7: 错误: 'AddVector' 的类型冲突浮动 AddVector(float a, float b) ^:19:12: 注意: 先前的隐式声明在这里浮动 a = AddVector(b,c);

我的内核：

```
__kernel void square(
__global float* input,
__global float* output,
const unsigned int count)
{
//...
float b = 2.f;
float c = 4.f;
float a = AddVector(b,c);
}
float AddVector(float a, float b)
{
return a + b;
} 
```

但是当我对整数类型执行相同操作时，它可以工作：

```
__kernel void square(
__global float* input,
__global float* output,
const unsigned int count)
{
//...
int b = 2;
int c = 4;
int a = AddVector(b,c);
}
int AddVector(int a, int b)
{
return a + b;
} 
```

我做错了什么？

PS：这个内核什么也没做——它只是为了发现错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T21:08:25.783

您的问题是您在使用 AddVector 函数后声明它。将声明移到用法之上（即，在内核之上），它会编译得很好。

要了解有关“隐式函数”位的更多信息，请参见[此处](https://stackoverflow.com/questions/6704335/implicit-declaration-of-function-c99)。

此外，使用英特尔离线 OpenCL 编译器 - 我看到两个内核的警告相同。

```
 :9:9: warning: implicit declaration of function 'AddVector' is invalid in C99 
```

# php - 在 CodeIgniter 中的一行内动态增加文章视图

> ID：13939333
> 
> 赞同：0
> 
> 时间：2012-12-18T18:38:55.480
> 
> 标签：php, codeigniter, activerecord

我的表中有一个名为**计数器**的列，称为**文章**

问题是如何将这个列中的值增加 1 左右，所以在控制器或模型中我将使用 update db 函数。

例如，我正在考虑这样的事情：

```
 $id = 5; //article id (I will get that from the url or db, no problem with that)
 $this->db->update("current counter column value plus one where id column equals $id "); 
```

让我们假设我得到了文章# of views：

```
$this->db->select_sum("counter")->get("articles"); 
```

我知道我需要验证用户的 ip，所以例如我不是每次页面加载都计算它，而是仅在 5 分钟后计算。不过那是另一回事了 ;）。我只是需要完成这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:41:53.593

您可以使用常规查询（带有绑定）：

```
$sql = "UPDATE articles SET counter = counter + 1 WHERE id = ?";
$this->db->query($sql, array($id)); 
```

或者，使用 AR：

```
$query = $this->db->update('articles')
                   ->set('counter','counter+1', FALSE)
                   ->where('id', $id); 
```

作为第三个参数的 FALSE`set()`告诉它不要转义列名。
如果只需要增加，则不需要获取视图数。

# python - Django 和 knockoutjs (foreach)

> ID：13939337
> 
> 赞同：0
> 
> 时间：2012-12-18T18:39:05.493
> 
> 标签：python, django, foreach, knockout.js

在视图中：

```
 posts = Posts.objects.filter(...)
        template = loader.get_template('...')
        context = Context({
            'comments': comments,
            })
        return HttpResponseForbidden(template.render(RequestContext(request, context))) 
```

在模板中：

```
 <script type="text/javascript">
    head.js('...');
    head.ready(function() {
        $(document).ready(function() {
            postModel = new postModel({
                posts: '{{ posts }}'
            });
            ko.applyBindings(commentModel, $('#posts')[0]); 

        });
    });
    </script>
<ul data-bind="foreach: comments">
....
</ul> 
```

在 post.js 中

```
self.comments = ko.observableArray(ko.utils.parseJson(config.comments)); //error: Uncaught SyntaxError: Unexpected token & 
self.comments = ko.observableArray(config.comments); //error: Uncaught TypeError: Cannot use 'in' operator to search for 'length' in 
```

如何转换数据类型？

```
{{ posts}}
 [<Post: un posts!>, <Post: deux posts!>] to [{id:1, content:'un posts' etc},{...}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:21:45.673

在脚本中：

```
postModel = new postModel({
                posts: '{{ posts.fields }}'
            });
            ko.applyBindings(postModel, $('#post')[0]); 
```

这是工作）谢谢beaucoup）

# python - 为什么带有pop-method（或del语句）的for循环不会遍历所有列表元素

> ID：13939341
> 
> 赞同：11
> 
> 时间：2012-12-18T18:39:16.883
> 
> 标签：python, list, loops, for-loop

我是 Python 新手，正在尝试使用 Python 3.2.3（默认，2012 年 10 月 19 日，20:13:42）的列表，Linux2 上的 [GCC 4.6.3]

这是我的示例代码

```
>>> l=[1,2,3,4,5,6]
>>> for i in l:
...     l.pop(0)
...     print(l)
... 
```

我希望以下输出

```
1
[2, 3, 4, 5, 6]
2
[3, 4, 5, 6]
3
[4, 5, 6]
4
[5, 6]
5
[6]
6
[] 
```

相反，我得到了这个

```
1
[2, 3, 4, 5, 6]
2
[3, 4, 5, 6]
3
[4, 5, 6] 
```

for 循环在 3 圈后停止迭代。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T18:44:26.347

展开一点（插入符号 ( `^`) 位于循环“索引”处）：

```
your_list = [1,2,3,4,5,6]
             ^ 
```

弹出第一个项目后：

```
your_list = [2,3,4,5,6]
             ^ 
```

现在继续循环：

```
your_list = [2,3,4,5,6]
               ^ 
```

现在弹出第一项：

```
your_list = [3,4,5,6]
               ^ 
```

现在继续循环：

```
your_list = [3,4,5,6]
                 ^ 
```

现在弹出第一项：

```
your_list = [4,5,6]
                 ^ 
```

现在继续循环——等等，我们完成了。:-)

* * *

```
>>> l = [1,2,3,4,5,6]
>>> for x in l:
...     l.pop(0)
... 
1
2
3
>>> print l
[4, 5, 6] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-10-06T21:08:15.240

您可以为此任务使用`while`循环而不是循环。`for`

```
while len(some_list)>0 :
    some_list.pop(0) 
```

循环实际上会遍历列表中的`for`每个项目，这将不起作用，因为列表中的索引会随着每次删除而改变，并且您最终不会得到所有项目。

但是，`while`每次循环运行时，循环都会检查一个条件，如果仍然为真，则再次运行代码。这里我们指定列表的长度必须大于0，即列表中必须有内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T18:40:37.603

尝试修改要迭代的集合时必须小心。在这种情况下，列表使用简单的整数索引来跟踪“当前位置”。当您使用 时`pop()`，所有内容都会更改索引，因此会跳过元素。

在循环的第一次迭代中，i 是 l[0]。然后弹出列表，然后访问 l[1]，它最初位于 l[2]。然后你弹出列表，下一次迭代访问 l[2]，这就是以前在 l[4] 的位置，等等。

无论如何都不需要在这段代码中弹出元素，大概你在你的真实代码中做一些更复杂的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T18:40:20.703

Python 不支持在迭代列表时更改列表的长度。使用副本或使用[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)代替。

想想 Python 实际上是如何执行 for 循环的——它通过元素进行计数，返回当前索引处的项目。当您删除一个时，索引意味着不同的元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-16T02:06:58.550

**代码**

```
l = [1,2,3,4,5,6]
for i in range(len(l)):
    l.pop(0)
    print(l) 
```

**返回**

```
[2, 3, 4, 5, 6]
[3, 4, 5, 6]
[4, 5, 6]
[5, 6]
[6]
[] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-05T18:52:45.997

```
li = [1, 2, 3, 4, 5]

while li:
    # For descending order
    # print(li.pop())

    # For ascending order
    print(li.pop(0)) 
```

# spring - 如何将 spring RESTful 服务包含到我现有的 Struts2.0 项目中

> ID：13939342
> 
> 赞同：3
> 
> 时间：2012-12-18T18:39:24.950
> 
> 标签：spring, model-view-controller, struts2

我试图为我现有的 struts 项目实现 spring RESTful 服务，但无法完成相同的操作。我添加了 spring rest 服务，但是当我尝试运行现有的应用程序时，它不起作用..下面是我的完整代码相同。我有下面定义的所有文件，请检查并提供帮助。

下面是我的 Web.xml 文件

```
<!-- spring context config-->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml; classpath:applicationContext.xml</param-value>
    </context-param>

    <!-- spring listner-->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet> 
      <servlet-name>action</servlet-name> 
      <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
       <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/webmvc.xml</param-value>
        </init-param>     
      <load-on-startup>1</load-on-startup>
    </servlet> 

    <servlet-mapping>
        <servlet-name>action</servlet-name>
        <url-pattern>/showAllgrants/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>action</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- listener>
        <listener-class>
            org.nea.web.struts.ContextListener</listener-class>
    </listener-->

    <!--servlet>
        <servlet-name>action</servlet-name>
        <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
        <init-param>
            <param-name>application</param-name>
            <param-value>org.abc.efg.web.AppResources</param-value>
        </init-param>
        <init-param>
            <param-name>config</param-name>
            <param-value>/WEB-INF/struts-config.xml</param-value>
        </init-param>
        <init-param>
            <param-name>debug</param-name>
            <param-value>2</param-value>
        </init-param>
        <init-param>
            <param-name>detail</param-name>
            <param-value>0</param-value>
        </init-param>
        <init-param>
            <param-name>validate</param-name>
            <param-value>true</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet-->

    <session-config>
        <session-timeout>60</session-timeout>
    </session-config>

    <mime-mapping>
        <extension>css</extension>
        <mime-type>text/css</mime-type>
    </mime-mapping>

    <welcome-file-list>
        <welcome-file>Index.jsp</welcome-file>
    </welcome-file-list>
    <error-page>
        <error-code>404</error-code>
        <location>/NotFound.jsp</location>
    </error-page>
    <error-page>
        <error-code>400</error-code>
        <location>/NotFound.jsp</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/Error.jsp</location>
    </error-page> 
```

下面是我的春天 webmvc.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd">

          <!--  
            Enables automatic mapping of fund objects to and from JSON  
      -->  
      <mvc:annotation-driven/>  
      <!--  
            Setup spring to pull in @Controller, @RequestMapping, etc Configuration scans specified packages  
            for classes configured as Spring managed beans and automatically sets up objects annotated with  
            @Controller, @Service etc.  
      -->  
      <context:component-scan base-package="org.web.struts.uniservs" />  

      <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />  
      <!--  
            Configures view for returning JSON to the client  
      -->  
      <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">  
           <property name="contentType" value="text/plain"/>  
      </bean>  
      <!--  
            maps handler methods based on HTTP paths
      -->  
      <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">      
        <property name="order" value="1" />
        <property name="messageConverters">
            <list>
                <!-- Default converters -->
                <bean class="org.springframework.http.converter.StringHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.FormHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter" />
                <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.BufferedImageHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" />
            </list>
        </property>

    </bean>

   <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
<property name="mappings">
    <props>
        <prop key="/*">strutsWrappingController</prop>
    </props>
</property>
</bean>

<bean id="strutsWrappingController" class="org.springframework.web.servlet.mvc.ServletWrappingController" scope="singleton">

<property name="servletClass">
    <value>org.apache.struts.action.ActionServlet</value>
</property>
<property name="servletName">
    <value>action</value>
</property>
<property name="initParameters">
    <props>
        <prop key="config">/WEB-INF/struts-config.xml</prop>
    </props>
</property>
</bean>

    <bean id="empService"
        class="org.nea.spring.services.implementations.employee"/>  
    <bean id="iaUtilitiesService"
        class="org.nea.spring.services.implementations"/>

</beans> 
```

下面是我的struts TestAction.java

```
@Controller
public class TestAction   extends ActionSupport implements ServletRequestAware, ServletContextAware {
    private static final long serialVersionUID = 6274330790290034472L;

@RequestMapping(value="/showAllgrants/{year}/{status}/{stateId}",
            method=RequestMethod.GET,headers="Accept=application/xml, application/json")
    public String showAllgrants(@PathVariable String year,@PathVariable String status,@PathVariable String stateId) {
        /*commented to test restful service
        User user = (User) request.getSession().getAttribute("user");
        if (user == null) {
            return LOGIN;
        }
        */
        List<UniServGrantInfo> grantInfoList = new ArrayList<UniServGrantInfo>();
        //String year = request.getParameter("year");
        //String status = request.getParameter("status");
        //String stateId = request.getParameter("stateId");

        grantInfoList = uniservService.showAllgrants("ITSMAXK", year, status, stateId);
            /* commented to test restful service
        JSONObject jsonObject = new JSONObject(grantInfoList);

        JSONWrapper jsonWrap = new JSONWrapper();
        jsonWrap.setObjects(grantInfoList.toArray());
        jsonObject = new JSONObject(jsonWrap);
        String jsonString = convertJSONObjectToString(jsonObject);
        try {
            jsonObject = new JSONObject(jsonString);
        } catch (JSONException e) {
            e.printStackTrace();
        }
        inputStream = new ByteArrayInputStream(jsonString.toString().getBytes());
        request.getSession().setAttribute("grantInfoList", grantInfoList);
        request.getSession().setAttribute("year", year);
        request.getSession().setAttribute("status", status);
        request.getSession().setAttribute("stateId", stateId);
        */
        return SUCCESS;

    }
} 
```

下面是我的 struts-config.xml 文件

```
<action name="showAllgrants"
            class=""
            method="showAllgrants">
            <result type="stream">
                <param name="contentType">application/json</param>
                <param name="contentType">text/json</param>
                <param name="inputName">inputStream</param>
            </result>
        </action> 
```

# audio - Unity 3D 中的音高变换？

> ID：13939344
> 
> 赞同：0
> 
> 时间：2012-12-18T18:39:30.997
> 
> 标签：audio, transform, unity3d, pitch

我正在研究 Unity3D，我想知道是否有可能像 Talking Tom App 一样转换音频音高？

如果是，是否有可能在播放音频时更改音高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:14:49.997

AudioSource 音高修改，来自[Unity 文档](http://docs.unity3d.com/Documentation/ScriptReference/AudioSource-pitch.html)。

# c - 彻底销毁 System V 共享内存段

> ID：13939349
> 
> 赞同：4
> 
> 时间：2012-12-18T18:39:58.113
> 
> 标签：c, linux

我正在使用`shmget`,`shmat`并`shmctl`分别获取和创建一个共享内存段，将其附加到进程地址空间并删除它。

我想知道进程是否仍然可以使用共享内存段，即使它已被分离并要求使用

```
shmctl(id, IPC_RMID, ...) 
```

在一个过程中。

我无法从手册页获取信息：

> `IPC_RMID`标记要销毁的段。该段只有在最后一个进程将其分离后才会真正被销毁（即，当`shm_nattch`关联结构的成员`shmid_ds`为零时）。调用者必须是所有者或创建者，或者具有特权。如果段已被标记为销毁，则将设置 检索到的相关数据结构`SHM_DEST`中字段的（非标准）标志。`shm_perm.mode``IPC_STAT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:44:50.940

在 Linux 上，可以附加共享内存段，即使它已被标记为删除。但是，POSIX.1-2001 没有指定这种行为，并且许多其他实现不支持它。

# groovy - 从 HTTP 请求中获取纯 HTML

> ID：13939354
> 
> 赞同：2
> 
> 时间：2012-12-18T18:40:13.547
> 
> 标签：groovy, httprequest, grails-2.0, httpbuilder

我正在开发一个 grails 应用程序，并且已经尝试了几个小时从请求中获取 html 代码。我想要做的是获得纯 html（就像在 webPage 源中，带有所有标签和东西），这样我就可以工作了。

我已经设法使用以下代码为我的获取请求获取它：

```
url = ("http://google.com").toURL().getText()) 
```

它工作得很好，但我还需要能够发出帖子请求。

我已经尝试过使用 httpBuilder，但是我得到的响应看起来像是格式正确的文本（带有空格和其他东西），但是没有任何 html 标签，我需要它们。我正在使用的代码如下所示：

```
def url = "http://urlToRemoteServer.com/"
def http = new HTTPBuilder(url);

http.post( path: 'pathToMyApp',
        requestContentType: "text/xml" ) { resp, reader ->

            println "Tweet response status: ${resp.statusLine}"
            assert resp.statusLine.statusCode == 200
            System.out << reader
        } 
```

谁能告诉我如何获取该html代码？我正在研究 groovy，但 Java 解决方案也一样好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:15:18.423

更改发布地图以包含`contentType`强制纯文本解析（并且，我相信更改为`Accepts`标题），如下所示：

```
http.post( path: 'pathToMyApp',
           requestContentType: "text/xml",
           contentType: "text/xml") { resp, reader -> 
```

[`ParserRegistry`](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/ParserRegistry.html)或者，您可以通过在构造函数后添加重映射来更改此请求和将来请求的解析器​​：

```
http.parser.'text/html' = http.parser.'text/plain' 
```

您还可以[`setContentType()`](http://groovy.codehaus.org/modules/http-builder/apidocs/groovyx/net/http/HTTPBuilder.html#setContentType%28java.lang.Object%29)在构造函数调用之后添加对 的调用`HTTPBuilder`：

```
//...
def http = new HTTPBuilder(url);  //existing code
http.contentType = ContentType.TEXT //new addition
http.post( path: 'pathToMyApp', //existing code
//... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:31:53.830

你可以这样做的另一种方法：

```
import static groovyx.net.http.ContentType.TEXT 
import static groovyx.net.http.ContentType.URLENC       

def url = "http://urlToRemoteServer.com/"

def http = new HTTPBuilder(url);

http.request( Method.POST, TEXT) { resp, reader ->

    println "Tweet response status: ${resp.statusLine}"
    assert resp.statusLine.statusCode == 200
    println reader.text
} 
```

大致基于[http://groovy.codehaus.org/modules/http-builder/doc/contentTypes.html中包含的信息](http://groovy.codehaus.org/modules/http-builder/doc/contentTypes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T20:21:54.120

```
public static post(String url, String data, def contentType = ContentType.XML) {
    def client = new HTTPBuilder(url)
    def xml = null
    client.request(groovyx.net.http.Method.POST) {
        contentType = contentType
        requestContentType = contentType  
        body = data
        response.success = { resp, raw ->
            println "Success response: ${resp.statusLine} ->\n${raw.text}"
            xml = [status: resp.statusLine, response:raw]
        }
        response.failure = { resp, raw ->
            println "Error response: ${resp.statusLine} ->\n${raw.text}"
            xml = [status: resp.statusLine, response:raw]
        }      
    } 
    return xml
} 
```

# ruby-on-rails - validates_uniqueness_of 与 'has_many through =>' 关系

> ID：13939355
> 
> 赞同：4
> 
> 时间：2012-12-18T18:40:15.200
> 
> 标签：ruby-on-rails

导轨 2.3.5

下面，我有一个 TicketMarket 模型，管理员在其中维护“市场”名称。此表通过关联表链接到票证表。

我需要为 TicketMarket CRUD 提供“validates_uniqueness_of”，但如下所示，当有人创建票证并检查票证表单上的一些市场复选框时，它会导致验证错误。

我见过的每件事都说正确的做法是根据“ticket_market_associations”表的“ticket_id”字段来确定验证范围：

```
validates_uniqueness_of :market_name, :case_sensitive => false, :scope => :ticket_id 
```

但是，这是行不通的。在该范围到位后，使用 TicketMarket CRUD 会导致“#TicketMarket:0x630bdf0 的未定义方法 `ticket_id'”错误。

什么是正确的做法，所以只有在使用 TicketMarket CRUD 而不是 Ticket CRUD 时验证才会生效？

谢谢！

```
class TicketMarket < ActiveRecord::Base
  has_many :ticket_market_associations
  has_many :tickets, :through => :ticket_market_associations

  validates_presence_of :market_name
  validates_uniqueness_of :market_name, :case_sensitive => false
end 
```

# java - Android ant 构建在 xxhdpi 文件夹上失败

> ID：13939357
> 
> 赞同：1
> 
> 时间：2012-12-18T18:40:30.067
> 
> 标签：java, android, ant

使用我当前的 android 工具，我可以在 Eclipse 中构建一个 android 项目。当我尝试从命令行使用 ant 构建相同的项目时，它失败并显示以下输出：

```
-build-setup:
     [echo] Creating output directories if needed...

-pre-build:

-code-gen:
     [echo] ----------
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files...
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] Found Deleted Target File
     [aapt] Generating resource IDs...
     [aapt] invalid resource directory name: /data/project/res/drawable-xxhdpi

BUILD FAILED
/android-sdk-mac_x86/tools/ant/build.xml:485: The following error occurred while executing this line:
/android-sdk-mac_x86/tools/ant/build.xml:560: The following error occurred while executing this line:
/android-sdk-mac_x86/tools/ant/build.xml:589: null returned: 1 
```

据我了解，drawable-xxhdpi 现在是受支持的格式，那么为什么这在 Eclipse 中有效，但在 ant 中无效？

== 编辑（添加我的 project.properties 文件）== 这是我的 project.properties 文件中的内容：

```
 android.library.reference.1=resources/
 android.library.reference.2=../promotion
 # Project target.
 target=android-8
 android.library.reference.3=resources/
 android.library.reference.4=resources/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:53:12.557

您在 ant 脚本/project.properties 中设置了错误的 sdk 目标。Android 4.2 的 SDK 版本为 17，您使用 SDK 版本 8 编译，即 Android 2.2。

使用它来更新您的项目：

android update project --target**正确的目标**

您可以使用 列出可用的目标`android list targets`。

或者，只需更新您的 project.properties 并将 SDK 版本手动设置为 17（或您要编译的任何 android sdk）：

```
target=android-17 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:40:33.570

更新你的 AAPT ，我只是解决了这个问题。

# android - 无法从相机检测图像中的人脸

> ID：13939358
> 
> 赞同：1
> 
> 时间：2012-12-18T18:40:31.873
> 
> 标签：android

我无法用相机拍照并让它检测到任何人脸。我将图片显示在屏幕上，并且可以在图像上清楚地看到我的脸，但从未检测到它。我的 logcat 打印“找不到人脸！”

```
public void takePictureNoPreview(Context context) {
    camera = openFrontFacingCamera();
    if (camera != null) {
        try {
            SurfaceTexture dummy = new SurfaceTexture(0);
            camera.setPreviewTexture(dummy);
            camera.startPreview();

            camera.takePicture(null, null, this);

        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
        }

    } else {
        // booo, failed!
    }
}

@Override
public void onPictureTaken(byte[] data, Camera camera) {
    Log.i(LOG_TAG, "Picture taken");
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inPreferredConfig = Bitmap.Config.RGB_565;
    Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length, options);
    FaceDetector faceDetector = new FaceDetector(bitmap.getWidth(),
            bitmap.getHeight(), 1);
    Face[] faces = new Face[1];
    int foundFaces = faceDetector.findFaces(bitmap, faces);
    if (foundFaces > 0) {
        Log.i(LOG_TAG, "Found a face!");
    } else {
        Log.i(LOG_TAG, "No face found!");
    }
    camera.release();
    sendImageToActivity(bitmap);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:03:02.740

解决方案是将我的相机图像旋转 90 度。从相机返回的图像偏离了 90 度，这使 FaceDetector 无法正确处理图像。

```
Matrix matrix = new Matrix();
matrix.postRotate(90);
bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true); 
```

# image - 和图像之间的映射及其调整大小的版本

> ID：13939362
> 
> 赞同：2
> 
> 时间：2012-12-18T18:40:41.457
> 
> 标签：image, image-processing, thumbnails, image-resizing

我正在寻找一个特定的公式，该公式可用于获取图像与其重新调整大小的版本之间的像素位置映射。例如，我想知道使用公式调整大小的版本中原始图像的当前像素是多少。即，在行中，只有来自列 j_m、J_n、.... 的像素出现在调整大小的版本中，其余的被消除。我说的是重新调整大小，它只是在不保留任何纵横比或窗口平均的情况下进行缩放。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:16:18.980

阅读完所有评论后，我对您想要实现的目标感到困惑，因此您可能想原谅我在这个答案中可能的幼稚。

基础知识：要缩放图像（信号、函数、任何东西），您可以应用标准缩放矩阵。该站点不允许正确的 LaTeX 内联，因此请努力理解以下表示。对于 2D 图像，缩放矩阵由 S = [sx 0; 0 西]。由于我们对同时执行旋转和平移不感兴趣，因此将这种表示移动到齐次坐标没有多大意义。矩阵很简单，很简单。因此，例如，将 x 缩放 6 倍，将 y 缩放 4 倍，S = [6 0; 0 4]。将此矩阵应用于每个点都会得到您的缩放图像。以下是此应用程序的直接示例，原始图像并按 6x、4y 缩放：

![在此处输入图像描述](../Images/1311e84acbc84466e4b749f7aa950f56.png)    ![在此处输入图像描述](../Images/f7750b8acd2e540981405d4fd5b2ee64.png)

如您所见，放大后的星星中有很多空白点。这就是为什么实际上通过逆缩放矩阵执行放大。上面提到的矩阵的逆是很容易得到的，对应于 S-1 = [1/sx 0; 0 1/sy]。这样做的好处是插值基本上是执行逆变换的必要步骤，即你有一个离散域并且你得到真实位置，以处理你执行某种插值。以下是最简单的插值：通过将实数值截断为整数的最近邻。缩放因子再次为 6x 和 4y，但以相反的形式完成：

![在此处输入图像描述](../Images/d31f1b08e302209e9d992e9934c6b3e0.png)

应该清楚的是，您不能完全恢复缩放的图像（即使您知道缩放因子），因为缩放过程可以在插值步骤中自由地做任何事情。但是您可以简单地直接在缩放图像中应用具有反因子的缩放以获得未缩放图像的近似值。在此示例中，我们得到以下图像，它恰好与原始图像完全相同。

![在此处输入图像描述](../Images/ed52191dcdc181587db074b9d12364e4.png)

如果有帮助，这里有一个非常简单的 Python 代码，可以举例说明所讨论的内容。

```
import sys
from PIL import Image

img = Image.open(sys.argv[1]) # Assumed to be grayscale.
width, height = img.size
scale_x, scale_y = (6, 4)
imo = img.load()

# Upscale directly.
full_img = Image.new('L', (width * scale_x, height * scale_y), 'white')
im = full_img.load()
for x in xrange(width):
    for y in xrange(height):
        im[x * scale_x, y * scale_y] = imo[x, y]
full_img.save(sys.argv[2])

# Upscale by inverse transform.
full_img = Image.new('L', (width * scale_x, height * scale_y), 'white')
im = full_img.load()
for x in xrange(width * scale_x):
    for y in xrange(height * scale_y):
        im[x, y] = imo[int(x / float(scale_x)), int(y /
            float(scale_y))]
full_img.save(sys.argv[3])

# Downscale the previous upscaled image.
downscaled = Image.new('L', (width, height), 'white')
im2 = downscaled.load()
for x in xrange(width * scale_x):
    for y in xrange(height * scale_y):
        im2[x/scale_x, y/scale_y] = im[x, y]
downscaled.save(sys.argv[4]) 
```

# jquery - 如何在我的 html 文件中使用 Chosen jQuery？

> ID：13939369
> 
> 赞同：18
> 
> 时间：2012-12-18T18:41:18.017
> 
> 标签：jquery, html

如何在我的 html 页面中应用 Chosen jQuery？

我有一个`select`表格，所以我需要使用`multiple select`by Chosen 来使它看起来更加用户友好。

```
<select class="chosen" multiple="true" name="faculty">
        <option value="AC">A</option>
        <option value="AD">B</option>
        <option value="AM">C</option>
        <option value="AP">D</option>
</select> 
```

我已经下载了文件并将其复制到我的网页文件夹中。

所以，我所做的是`chosen.jquery.min.js`包括`<head>`：

```
<script type="text/javascript" src="chosen/chosen.jquery.min.js"></script> 
```

指令说调用所选插件：`$(".chzn-select").chosen();`

我不知道将该 JavaScript 语句放在何处以调用选择的多项选择。我认为这就像使用 Bootstrap 一样简单，哈哈。有什么帮助吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T18:44:43.287

你`select`必须有 class `chzn-select`，通常你会在页面加载后运行一个脚本，如下所示：

```
$(function() {
    $(".chzn-select").chosen();
}); 
```

下面是一个经过测试的工作示例：

```
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.jquery.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.css">
</head>
<body>

<script type="text/javascript">
$(function() {
    $(".chzn-select").chosen();
});
</script>

<select class="chzn-select" multiple="true" name="faculty" style="width:200px;">
        <option value="AC">A</option>
        <option value="AD">B</option>
        <option value="AM">C</option>
        <option value="AP">D</option>
</select>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T18:49:44.583

如果您遵循[Bootstrap 的示例标记结构](http://twitter.github.com/bootstrap/getting-started.html#examples)之一，您会注意到它们在底部（`</body>`标记正上方）调用所有 JavaScript 文件。

你也会想做同样的事情；就像是：

```
 </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap-transition.js"></script>
    <script src="../assets/js/bootstrap-alert.js"></script>
    <script src="../assets/js/script.js"></script>     <!-- Your custom JS -->

  </body>
</html> 
```

在此`script.js`文件中，您需要添加如下内容：

```
$(function(){
    $(".chzn-select").chosen();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T18:45:44.970

```
<script type="text/javascript" src="chosen/chosen.jquery.min.js"></script>
<script type="text/javascript">
$(function(){
    $(".chzn-select").chosen();
});
</script>

<select class="chzn-select" multiple="true" name="faculty">
        <option value="AC">A</option>
        <option value="AD">B</option>
        <option value="AM">C</option>
        <option value="AP">D</option>
</select> 
```

# fortran - Fortran 中的无限循环

> ID：13939373
> 
> 赞同：1
> 
> 时间：2012-12-18T18:41:36.420
> 
> 标签：fortran, infinite-loop, fortran90

这是我在 Fortran 90 中的代码

```
program final
   implicit none
   real, dimension(421,422) :: a
   real :: temp,factor
   real, dimension (421) :: soln
   integer :: i, rmax, pivot, row,n, O,P,COL,k,a_j,n2,a_i,t

   open(unit=177241,file="input_21.txt",status="old")
   open(unit=20,file="output.txt",status="unknown")

   do i =1,421
      read (177241,*) (a(i,:))
   end do
   do i = 1,421
      print *,a(i,13)
   end do
   do T=1,421
      n=421
      a_i=n

      n2=422
      a_j=n2

     !pivoting
      do pivot = T,n-1
         print *, 'pivot=',pivot
         rmax = pivot
         do row = pivot,a_i
            if (ABS(a(rmax,pivot)) < ABS(a(row,pivot)) ) then
               rmax=row
            end if
         end do
         if (rmax /= pivot) then
            do k=1, a_j
               temp = a(rmax,k)
               a(rmax,k) = a(pivot,k)
               a(pivot,k) = temp
            end do
         end if      
  !elimination      
         do row = pivot+1, n
            if ( a(pivot,pivot) /= 0 ) then
               factor = (a(row,pivot)) / (a(pivot,pivot))
               print *,'factor=',factor
               do col = 1, n2
                  a(row, col) = a(row,col) - a(pivot,col) * factor
                  print *,'a=',a(row,col)
               end do
            end if
         end do     
      end do
   end do
   !back-substitution
   soln(n2) = 0
   do o=n,1,-1
      do p=n2,o+1,-1
         a(o,n2) = a(o,n2) - soln(p)*a(o,p)
      end do
      soln(o) = a(o,n2) / a(o,o)
   end do        
   do i=1,n
      print *,soln(i)
      write (121,*) soln(i)
   end do
end program final 
```

输入文件是 441x442 矩阵 txt 文件。我认为这可以读取该输入文件，但这将是一个无限循环

```
if ( a(pivot,pivot) /= 0 ) then
   factor = (a(row,pivot)) / (a(pivot,pivot))
   print *,'factor=',factor    
   do col = 1, n2
      a(row, col) = a(row,col) - a(pivot,col) * factor 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T02:36:27.207

如果您正确缩进，您将看到以下循环结构（忽略数学部分）：

```
 do T=1,421
       do pivot=T,420
          do row=pivot+1,421
             do col=1,422
                print *,a
             enddo
          enddo
       enddo
    enddo 
```

这不是您拥有的无限循环，您只是`a(row,col)`在屏幕上打印**522,326,280 次**（如果您将其放入文件中，我不建议这样做，您的文件夹中将有一个 11 GB 的文件！）。如果你注释掉`print`关于的陈述`a`，`factor`但留下 for `pivot`，它将在大约 3 分钟内运行。忽略所有`print`语句，它只需几秒钟即可运行。

不用说，您可能不应该在屏幕上放置超过 10 行的内容。

# vb.net - 通过 VB.net 的 DataGridView 将值插入自定义列

> ID：13939383
> 
> 赞同：1
> 
> 时间：2012-12-18T18:42:13.720
> 
> 标签：vb.net, visual-studio-2010

我的问题是，我创建了一个自定义列，我将其命名为“座位”

我的程序可以工作，但是代码中缺少一些东西，我不知道如何解决它，我尽我所能调试，我使用 msgboxes 只是为了显示 countVal 值，它在 MsgBox 中可以工作，但是他们的我的这行代码有问题吗

```
dgSection.Rows.Item(startVal).Cells("seat").Value = countVal 
```

那行代码只显示一次输出，但如果我再次单击按钮以显示带有 DataGridView 的表单，唯一会显示的是我的表中的“SELECT statements”列，而自定义列“Available”座位”是空的。

我已经尝试过使用，刷新，Datasource = Nothing，rows.clear()，但它们根本没有效果。

各位大神能帮我解决一下这个问题吗，感谢大家的反馈，谢谢

* * *

```
 If dgSection.Columns.Contains("seat") = True Then
        dgSection.Columns.Remove("seat")
    End If

    FillGrid("SELECT SID,year_level,EntryID,Section,Year,MaxNumber FROM tbl_section LEFT JOIN tbl_personal_data ON tbl_section.Year = tbl_personal_data.year_level WHERE SID = " & frm_Enroll.SID, "tbl_section", dgSection)
    dgSection.Columns(0).Visible = False
    dgSection.Columns(1).Visible = False

    dgSection.Columns.Add("seat", "Available Seat")

    Dim i As Integer = 0
    Dim startVal As Integer = 0

    For i = startVal To dgSection.Rows.Count - 1
        Try
            DS = New DataSet
            DS.Clear()
            Comm = CONN.CreateCommand
            Comm.CommandText = "SELECT * FROM tbl_personal_data WHERE section_id = " & dgSection.Rows(i).Cells(2).Value
            DA.SelectCommand = Comm
            DA.Fill(DS, "tbl_personal_data")
            CONN.Close()

            Dim countVal As Integer
            For Each table As DataTable In DS.Tables
                countVal = countVal + table.Rows.Count
            Next

            MsgBox(countVal) 'this is working it shows the counted rows

            dgSection.Rows.Item(startVal).Cells("seat").Value = countVal 'there is something wrong about this line
        Catch ex As Exception
            MsgBox("Error number:" & Err.Number & vbCrLf & ex.Message, MsgBoxStyle.Critical)
        Finally
            CONN.Close()
        End Try
    Next i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:00:28.000

我的猜测是你打算用 i 变量而不是 startVal 循环遍历行，因为你的代码总是更新同一行：

```
'dgSection.Rows.Item(startVal).Cells("seat").Value = countVal
dgSection.Rows.Item(i).Cells("seat").Value = countVal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:01:47.287

try add this code

`dgsection.rows.add` before this `dgSection.Rows.Item(startVal).Cells("seat").Value = countVal 'there is something wrong about this line` and change the

```
dgsection.rows.item(startval) 
```

to

```
dgsection.rows.item(i) 
```

then tell me what happen.. or can you can printscreen

also i need to know, what is the problem show of the line?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T11:36:44.007

利用

```
dgSection.Rows(startVal).Cells("seat").Value = countVal 
```

# android - 管理我的 android 应用程序版本的最佳做法是什么？

> ID：13939384
> 
> 赞同：7
> 
> 时间：2012-12-18T18:42:22.067
> 
> 标签：android

实际上我的应用程序几乎到目前为止，有些人可以测试它。现在我想要一个应用程序的版本号。我应该把 version.properties 放在哪里还是有内置机制？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-09-23T18:04:03.037

至于最佳实践，您可以使用一种非常好的方法来管理Jake Wharton在[https://plus.google.com/+JakeWharton/posts/6f5TcVPRZij中描述的版本代码和名称。](https://plus.google.com/+JakeWharton/posts/6f5TcVPRZij)

基本上，您可以更新您的 build.gradle 以根据您的主要、次要和补丁版本号生成 versionCode 和 versionName。（为方便起见，从链接复制代码。）

```
def versionMajor = 3
def versionMinor = 0
def versionPatch = 0
def versionBuild = 0 // bump for dogfood builds, public betas, etc.

android {
  defaultConfig {
    ...
    versionCode versionMajor * 10000 + versionMinor * 1000 + versionPatch * 100 + versionBuild
    versionName "${versionMajor}.${versionMinor}.${versionPatch}"
    ...
  }
  ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T18:43:16.037

在你的清单中，你应该有这个：

```
 android:versionCode="1"
 android:versionName="1.0" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-05-21T13:54:04.460

参考@GregoryK 的回答，有一件重要的事情需要提及。

**每个部分之间的差异为 0 零允许次要**和**补丁**值的最大值为 9 。

（构建限制为 99，如果不在 CI/CD 环境中使用也可以）

当显然第二个“更大”时，值 3.0.10.0 和 3.1.0.0 将产生相同的版本代码。这里最大的问题是，如果上传 3.0.10.0，GooglePlay 将拒绝接受 3.1.0.0，因为版本代码已经存在。

为了解决上述问题，我们需要像构建和补丁一样遵循两个零（00）空间（补丁可以增加到99）：

```
versionMajor * 1000000 + versionMinor * 10000 + versionPatch * 100 + versionBuild 
```

我推荐这篇文章： [https ://medium.com/@maxirosson/versioning-android-apps-d6ec171cfd82](https://medium.com/@maxirosson/versioning-android-apps-d6ec171cfd82)

我最终采用了他的 build.gradle 来满足我们的需求。我在最后添加了一个构建代码，就像我给出的基于@GregoryK 答案的示例一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-30T13:31:00.423

在您的项目中，Gradle 文件 versionCode 将是一个整数值，而 versionName 可以是您可以识别的任何类型的文本。

```
defaultConfig {
    applicationId "your id"
    minSdkVersion 16
    targetSdkVersion 25
    versionCode 2
    versionName "1.0.1"
    multiDexEnabled true

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-24T10:02:07.987

versionCode 是您的 apk 后续版本号，其中 release 是要在 Google Play 中发布的内容

# php - 在 MySQL 数据库中选择两个随机行

> ID：13939385
> 
> 赞同：5
> 
> 时间：2012-12-18T18:42:25.070
> 
> 标签：php, mysql

我有一个充满图像的数据库，我想吐出并显示两个随机图像。这段代码正确地完成了它，但我不相信这是最好的方法，特别是如果数据库最终会有很多行。我已经研究过使用 MySQL 的 rand() 函数并将其限制为两个结果，但是从我所读到的 rand() 在大型数据库上相对较慢。另一个问题是双重数据库查询。有没有更好的方法来通过 img_id 选择两个随机行？

img_id 是一个 auto_incremented 行，但不能假定是连续的。

```
//get all image ids
$query = $conn->prepare('SELECT img_id FROM images');
$query->execute();
$result = $query->fetchAll();

//create an array in which to put all the ids
$list_imgs = array();

//put the ids into the array to search over
for ($x=0; $x < count($result); $x++) {
    array_push($list_imgs, $result[$x]['img_id']);
}

//output two random images
for ($x=0; $x < 2; $x++) {
    //create random index for search
    $rand = array_rand($list_imgs);

    //query to select one image
    $query = $conn->prepare('SELECT title, file_loc FROM images WHERE img_id=?');
    //random index value in array of img_ids
    $query->execute(array($list_imgs[$rand]));
    $result = $query->fetchAll();

    echo 'title:' . $result[0]['file_loc'] . '<br /><img src="' . $result[0]['file_loc'] . '" />';
} 
```

有什么建议可以使查询更有效吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T18:45:05.087

你可以使用

```
SELECT img_id, title, file_loc FROM images order by rand() limit 2 
```

所以你最终会得到

```
$query = $conn->prepare('SELECT img_id, title, file_loc FROM images order by rand() limit 2');
$query->execute();
$result = $query->fetchAll();

foreach($result as $row) {
    echo 'title:' . $row['file_loc'] . '<br /><img src="' . $row['file_loc'] . '" />';
} 
```

请注意，在大型表上，按 rand() 排序可能会特别慢。请参阅[如何优化 MySQL 的 ORDER BY RAND() 函数？](https://stackoverflow.com/questions/1244555/how-can-i-optimize-mysqls-order-by-rand-function) 优化它的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:48:51.497

使用每 x （您的调用）执行的脚本来标记要显示的两张图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:49:13.103

对于 MySQL 不太确定，在 MS SQL 中我会这样做：

```
SELECT TOP 2 img_id, newid() FROM images ORDER BY newid() 
```

如果它在 MySQL 中的工作方式相似，那将是

```
SELECT img_id, uuid() FROM images ORDER BY uuid() LIMIT 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T18:50:22.477

一开始选择所有图像是矫枉过正..

你可以这样做：

```
 SELECT file_loc
 FROM random AS r1 JOIN
       (SELECT (RAND() *
                     (SELECT MAX(id)
                        FROM random)) AS id)
        AS r2
 WHERE r1.id >= r2.id
 ORDER BY r1.id ASC
 LIMIT 2 
```

你可以查看这篇文章：http: [//jan.kneschke.de/projects/mysql/order-by-rand/](http://jan.kneschke.de/projects/mysql/order-by-rand/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-25T12:48:04.323

```
select * from table order by rand() limit 0,2 
```

代码取自这里：[http ://chandreshrana.blogspot.in/2014/06/how-to-fetch-randomly-two-records-from.html](http://chandreshrana.blogspot.in/2014/06/how-to-fetch-randomly-two-records-from.html)

# websphere - WebSphere 8.5 上的 JAX-RS 服务注入 EJB3.0 失败

> ID：13939386
> 
> 赞同：2
> 
> 时间：2012-12-18T18:42:45.087
> 
> 标签：websphere, ejb-3.0, jax-rs

我试图让现有的 EJB 在新实现的 JAX-RS 服务中工作。

我的项目设置如下

```
root
  ear
  ejb
  war 
```

以下是在战争项目中运行良好的遗留 JAX-WS 代码......

```
@WebService
public class MyService {
    @EJB
    MyEJBLocal local;
...
} 
```

我将以下 JAX-RS 资源添加到 EJB 项目中（长话短说，还没有时间在战争中进行测试）...

```
@Stateless
@Path("test")
public class MyResource {
    @EJB
    MyEJBLocal local;

    @GET
    @Produces("text/plain")
    public String getCount(){
        //int count = local.getCount();
        //TODO: remove below once above is working
    return String.valueOf(20);
    }
    ....
} 
```

当我删除评论时，我得到一个空指针异常，因为本地为空。我认为这是由于 JAX-RS 获取 EJB 映射存在问题，因为我尝试创建初始上下文并传递 JNDI 名称，但找不到该名称，所以我猜这就是这里发生的事情。

除了使用 JAX-WS 而不是 JAX-RS 之外，还有其他解决方法吗？

# cloud-foundry - 安装 caldecott osx 山狮时遇到问题

> ID：13939387
> 
> 赞同：2
> 
> 时间：2012-12-18T18:42:50.463
> 
> 标签：cloud-foundry, appfog

我在 osx 山狮上安装 caldecott 时遇到问题。我不断收到此错误：

> $ sudo gem install caldecott --no-rdoc --no-ri

错误：安装 caldecott 时出错：错误：无法构建 gem 原生扩展。

```
 /Users/Jay/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb 
```

检查 -lssl 中的 main()... *** extconf.rb 失败 *** 由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。

/Users/Jay/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:369:in `try_do'：编译器无法生成可执行文件。(RuntimeError) 你必须先安装开发工具。

这是我的宝石清单：

***当地宝石***

可寻址 (2.2.8) af (0.3.18.11) 捆绑器 (1.2.3) cfoundry (0.4.15) clouseau (0.0.2) 交互 (0.5.1, 0.4.8) json_pure (1.6.7) manifests-vmc- plugin (0.4.19) mime-types (1.19) Mothership (0.3.5) multi_json (1.4.0) multipart-post (1.1.5) rake (10.0.2) rb-readline (0.4.2) rest-client ( 1.6.7) ruby​​gems-bundler (1.1.0) ruby​​zip (0.9.9) rvm (1.11.3.5) terminal-table (1.4.5) tunnel-dummy-vmc-plugin (0.0.2) uuidtools (2.1.3) vmc (0.4.7)

关于如何让它发挥作用的任何想法。还是有另一种方法可以在 appfog 上通过隧道连接到我的 mongodb？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:37:07.123

First thing I notice is that your running gem install as root. If you're using RVM, you don't need to do this.

The likely issue here is that you don't have a C compiler installed, Caldecott uses native libraries and it requires them to be built. In the case of OS X, you need to install xcode. Do you have that installed?

# api - MFC DLL 库转换为 Web API 服务

> ID：13939388
> 
> 赞同：0
> 
> 时间：2012-12-18T18:42:50.463
> 
> 标签：api, dll, service, web, mfc

我们在 DLL 中有一个大型 MFC 库，它将我们的 .net 应用程序的 API 公开给在同一服务器上运行的任何其他 .net 应用程序。我们希望将所有 API 调用迁移到 Web API 服务。有没有可用的转换工具？有关有效迁移策略的任何提示？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:24:47.000

我们在我的 Windows 应用程序中做到了这一点。为此，我们使用 C++/CLI。我们创建了一个 C++/CLI 项目，该项目将与 MFC dll 和我们的 WPF 应用程序进行通信。使用此实现，我们可以与 WPF 应用程序和 MFC dll 进行通信。希望这会帮助你。

# c# - C#：我无法从 do-loop 内的列表中访问信息

> ID：13939392
> 
> 赞同：1
> 
> 时间：2012-12-18T18:43:14.417
> 
> 标签：c#, do-loops

我有一个带有 List 的类，我正在另一个类方法中访问它。这很好，但是当我尝试在 do-loop 中使用 List 时，我总是得到一个“ArgumentOutOfRangeExcetpion”。我真的很困惑为什么在 do-loop 中使用 List 会导致它为空，或者至少这是我认为正在发生的事情。如果有人可以向我解释为什么会发生这种情况，那将是非常有启发性的，也许我可以弄清楚我将如何让它发挥作用。

这是我的方法：

```
private void ListToAttributes()
    {
        int count = -1;

        //Finds Attribute starting Line.
        do
        {
            count = count + 1;

        } while (Player.PlayerList[count] != "Attributes;");

        //Adds all Attributes to a list
        List<string> TypeAndAmount = new List<string>();

        do
        {
            TypeAndAmount.Add(Player.PlayerList[count]);
            count = count + 1;
        } while (Player.PlayerList[count] != ".");

        //Sorts by type and adds amount to Player Class

        foreach (string Line in TypeAndAmount)
        {
            string[] Type = Line.Split(' ');

            if (Type[0] == "Mind") { Player.Mind = int.Parse(Type[1]); }
            if (Type[0] == "Body") { Player.Body = int.Parse(Type[1]); }
            if (Type[0] == "Soul") { Player.Soul = int.Parse(Type[1]); }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:49:21.847

您的第一个循环将导致`ArgumentOutOfRangeException`列表中没有项目与字符串匹配。在这种情况下，您将愉快地走过列表的末尾。你的第二个循环有同样的问题。

此外，我认为您必须`count`在两个循环之间再增加一次 - 目前您正在将项目添加`"Attributes;"`到列表中`TypeAndAmount`。这也将导致，`ArgumentOutOfRangeException`因为在空格处拆分字符串`"Attributes;"`只会产生一个字符串，并且您正在`Type[1]`最后一个循环中访问。

我建议使用一些 LINQ 重写您的代码（包括跳过该项目的步骤`"Attributes;"`）。

```
// Skip everything until we find 'Attributes;'.
var stepOne = Player.PlayerList.SkipWhile(entry => entry != "Attributes;");

// Skip over 'Attributes;'.
var stepTwo = stepOne.Skip(1);

// Take everything until we find '.'.
var stepThree = stepTwo.TakeWhile(entry => entry != ".");

// Stuff everything we selected into a new list.
var typeAndAmount = stepThree.ToList(); 
```

您还可以将所有内容放在一个语句中 - 不那么冗长但更难调试。

```
var typeAndAmount = Player.PlayerList
                          .SkipWhile(entry => entry != "Attributes;")
                          .Skip(1)
                          .TakeWhile(entry => entry != ".")
                          .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:45:56.910

我正在根据最佳猜测修改我的答案。当您点击第二个循环时，Player.PlayerList[count] 仍将等于“属性”。然后您进入第二个循环并将“属性”添加到 TypeAndAmount。当您尝试在该行上使用 Line.Split(' ') 时，它只会返回一个包含一个项目的数组。Type[1] 将抛出 ArgumentOutOfRangeException。

我认为如果您在第二个循环之前添加 count = count +1，那将解决您的问题。

找到第一个“属性”部分的另一种聪明（我认为）方法是将其全部包装在一行中：

```
int count = -1;
while (Player.PlayerList[count++] != "Attributes;"); 
```

++ 表示法只是一种更快的书写方式 count = count + 1。希望您会发现它很有用。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T19:09:01.877

我看到一些可能导致异常的错误。在您的第一个循环中，您需要检查并确保数组不为空，并且您需要有一个条件来检查数组大小，以防“属性”不存在。也许尝试：

```
if (Player.PlayerList.Length > 0){
  do
  {
    count = count + 1;
  }while (count < Player.PlayerList.Length && Player.PlayerList[count] != "Attributes;"); 
```

请注意，如果未找到 Attributes，您可能应该抛出您自己的异常。对于第二个循环，您需要添加类似的条件：

```
if (count < Player.PlayerList.Length){
  do
  {
      TypeAndAmount.Add(Player.PlayerList[count]);
      count = count + 1;
  } while (count < Player.PlayerList.Length && Player.PlayerList[count] != ".");
} 
```

请注意，这些只会防止异常。如果您的列表没有按照此方法所期望的方式排列，您仍然会遇到问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T18:46:50.650

问题出在您的 Do 循环中，您将计数增加 1，然后对其进行评估。这会导致您的计数大于元素的数量。

这会起作用：

```
 while (count < Player.PlayerList.Count && Player.PlayerList[count] != "Attributes;"); 
```

# http - 用于为带有标头的资产提供服务的开发服务器

> ID：13939396
> 
> 赞同：1
> 
> 时间：2012-12-18T18:43:23.010
> 
> 标签：http, templates, client-side-templating

我正在尝试提供可以像这样使用的模板资产：

```
<script type="text/x-template" id="todo-item-template" src="todo-item-template.xhtml"> 
```

这意味着我需要在与脚本类型一致的资产上设置标题。

有没有办法使用文件系统之外的某种开发应用服务器来做到这一点？我正在尝试构建一个工作流程，让我们的前端人员无需运行我们真正的后端即可工作。

`python -m SimpleHTTPServer`除了让我为某些扩展配置标头之外，其他简单的东西会很棒。自己编写代码会很简单，但宁愿使用现有的解决方案，因为可能会有更多无法预料的问题。

# javascript - ValidatorEnable 不能通过 JQuery 代码工作？

> ID：13939399
> 
> 赞同：0
> 
> 时间：2012-12-18T18:43:49.383
> 
> 标签：javascript, jquery, asp.net, webforms

我必须启用`Required Field Validator`从客户端禁用。我正在编写以下代码。

```
document.getElementById('ctl00_Container_ucControl_RequiredFieldValControlName');
ValidatorEnable(Object, false); 
```

我尝试使用 JQuery。我可以得到对象，但这种方式`ValidatorEnable`不起作用。

我不想使用 JQuery 编写完整的 ID。

你的评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:56:05.433

试试这种方式：

```
ValidatorEnable($([id$='RequiredFieldValControlName'])[0],false) 
```

# entity-framework - 从 EF 5 Code First 迁移生成完整的 SQL 脚本

> ID：13939404
> 
> 赞同：161
> 
> 时间：2012-12-18T18:44:01.763
> 
> 标签：entity-framework, entity-framework-migrations

如何使用 Entity Framework 5 Code First 迁移来创建从初始（空）状态到最新迁移的完整数据库脚本？

[MSDN Blog](http://msdn.microsoft.com/en-us/data/jj591621.aspx)上的博客文章建议这样做，但它似乎创建了一个空脚本：

```
Update-Database -Script -SourceMigration: $InitialDatabase 
```

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2012-12-18T18:44:01.763

API 似乎已经改变（或者至少，它对我不起作用）。

在包管理器控制台中运行以下命令按预期工作：

```
Update-Database -Script -SourceMigration:0 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2019-03-27T16:06:28.917

对于任何使用实体框架**核心**的人都在这里结束。这就是你的做法。

```
# Powershell / Package manager console
Script-Migration

# Cli 
dotnet ef migrations script 
```

您可以使用`-From`and`-To`参数生成更新脚本以将数据库更新到特定版本。

```
Script-Migration -From 20190101011200_Initial-Migration -To 20190101021200_Migration-2 
```

[https://docs.microsoft.com/en-us/ef/core/managing-schemas/migrations/#generate-sql-scripts](https://docs.microsoft.com/en-us/ef/core/managing-schemas/migrations/#generate-sql-scripts)

> 此命令有几个选项。
> 
> **from**迁移应该是在运行脚本之前应用到数据库的最后一次迁移。如果未应用任何迁移，请指定`0`（这是默认设置）。
> 
> **to**迁移是运行脚本后将应用于数据库的最后一个迁移。这默认为项目中的最后一次迁移。
> 
> 可以选择生成**幂等**脚本。此脚本仅在尚未应用到数据库时才应用迁移。如果您不确切知道应用于数据库的最后一次迁移是什么，或者如果您要部署到多个数据库，而这些数据库可能各自处于不同的迁移中，这将非常有用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-03-08T00:07:48.967

为了补充马特威尔逊的回答，我有一堆代码优先的实体类，但没有数据库，因为我没有备份。所以我在我的实体框架项目上做了以下事情：

在 Visual Studio 中打开包管理器控制台并键入以下内容：

```
Enable-Migrations

Add-Migration 
```

为您的迁移命名，例如“初始”，然后创建迁移。最后键入以下内容：

```
Update-Database

Update-Database -Script -SourceMigration:0 
```

最后的命令将从您的实体类创建您的数据库表（前提是您的实体类格式正确）。

# silverlight - ListBox Silverlight 中的性能 - DomainDataSource 和 DataPager

> ID：13939406
> 
> 赞同：0
> 
> 时间：2012-12-18T18:44:08.637
> 
> 标签：silverlight, wcf-ria-services

使用 DataPager 成功地将 Listbox 绑定到 DomainDataSource。大约有 7500 行被带回。

当我一次有 50 个时，性能开始很好。

但是，在翻阅 20 页或更多 50 页之后，性能就会下降。查看数据库查询，DataSource 是“智能的”，无需返回数据库获取数据。

```
 <riaControls:DomainDataSource x:Name="AccountsDataSource" AutoLoad="True" QueryName="GetUsersByxxx" LoadSize="100">
            <riaControls:DomainDataSource.QueryParameters> 
```

和寻呼机

```
<sdk:DataPager Margin="5,0,1,0" Source="{Binding Data, ElementName=AccountsDataSource}" PageSize="25" IsTotalItemCountFixed="True" /> 
```

问题：如何停止对象的缓存？列表框/数据源/数据分页器..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:15:35.567

发现问题出在 ListBox 中的 ContextMenu .... 现在尝试解决这个问题与以下问题[有关](http://silverlight.codeplex.com/workitem/6206) ：[这里](https://stackoverflow.com/questions/13955225/performance-silverlight-contextmenuservice-in-listbox)

# php - Magento + M2ePro。在销售订单上发送电子邮件，强制创建发票并将订单设置为已付款

> ID：13939408
> 
> 赞同：1
> 
> 时间：2012-12-18T18:44:09.820
> 
> 标签：php, magento, m2e-pro

我正在使用 Magento 和 M2ePro 扩展来在 eBay 上发布和管理产品。

有人购买产品 X，并通过银行存款支付。

当我将销售订单与 M2ePro 扩展同步时，订单会同时出现在订单的扩展列表和管理的默认 Magento 销售->订单菜单上。但是，如果我选择从销售订单中“发送电子邮件”，让我的客户查看详细信息，订单会自动在 eBay 列表上设置为已付款，并在 Magento 上生成发票。

我不希望这种情况发生，但找不到任何有效的设置，也无法帮助 M2ePro 扩展插件“论坛”。关于这个有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:43:18.477

我是 M2E Pro 开发人员之一。

最有可能的是，你错过了一些东西。M2E Pro 订阅了名为 sales_order_invoice_pay 的事件。只有此事件可能会强制 M2E Pro 更新 eBay 上订单的付款状态。

我相信这样的事件不能通过简单的电子邮件发送产生，我只是检查了它以确认我的假设。

# c# - 如何通过单选按钮在sql server中插入值

> ID：13939411
> 
> 赞同：2
> 
> 时间：2012-12-18T18:44:16.007
> 
> 标签：c#, winforms

我以前使用此代码进行插入操作，但同时我想保存单选按钮值：

```
cmd.CommandText="INSERT INTO Table1 (username,password,gender VALUES(@username,@password,gender)";
cmd.Parameters.AddWithValue("@username", textBox1.Text);
cmd.Parameters.AddWithValue("@password", textBox2.Text); 
```

我有两个用于男性和女性的单选按钮，我只想在数据库中保存一个值，所以我使用 groupbox 只选择一个单选按钮，但如何以男性或女性的身份插入数据库。

我正在处理 Windows 窗体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:48:38.673

怎么样：

```
 cmd.CommandText="INSERT INTO Table1 (username,password,gender) VALUES (@username,@password,@gender)";
cmd.Parameters.AddWithValue("@username", textBox1.Text);
cmd.Parameters.AddWithValue("@password", textBox2.Text);

if(radioMale.Checked)
    cmd.Parameters.AddWithValue("@gender", "Male");
else
    cmd.Parameters.AddWithValue("@gender", "Female"); 

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:56:10.357

另一种选择是使用一个包含 2 个值的组合框，一个用于男性，一个用于女性，然后插入选定的值。这也会在可能有用或可能没用的表单上占用更少的空间。

```
cmd.Parameters.AddWithValue("@gender", genderCombo.SelectedValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T12:26:37.670

试试这个

```
cmd.CommandText="INSERT INTO Table1 (username,password,gender) VALUES (@username,@password,@gender)";
cmd.Parameters.AddWithValue("@username", textBox1.Text);
cmd.Parameters.AddWithValue("@password", textBox2.Text);

if(radioMale.Checked)
    cmd.Parameters.AddWithValue("@gender", "Male");
else
    cmd.Parameters.AddWithValue("@gender", "Female"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-01T05:47:14.617

```
 private string selectedValue, date;
        private int i;
        private SqlCommand xcmd;
        private SqlConnection xcon;
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                day_DropDownList.Items.Insert(0, new ListItem("DD", "DD"));
                month_DropDownList.Items.Insert(0, new ListItem("MM", "MM"));
                year_DropDownList.Items.Insert(0, new ListItem("YY", "YY"));
                for (i = 1; i < 32; i++)
                {
                    day_DropDownList.Items.Add(i.ToString());
                }
                for (i = 1; i < 13; i++)
                {
                    month_DropDownList.Items.Add(i.ToString());
                }
                for (i = 1950; i < 2014; i++)
                {
                    year_DropDownList.Items.Add(i.ToString());
                }
                employeeName_Txt.Focus();
            }

        }

        protected void submit_Button_Click(object sender, EventArgs e)
        {
            selectedValue = gender_RadioButtonList.SelectedValue;

            xcon = new SqlConnection("Data Source=.; DataBase=AptechDB; UID=sa; Password=123;");

            xcon.Open();
            date = day_DropDownList.Text.ToString() + "/" + month_DropDownList.Text.ToString() + "/" + year_DropDownList.Text.ToString();
            xcmd = new SqlCommand("insert into tblEmployee values('" + employeeName_Txt.Text + "','" + date + "','" + selectedValue + "','" + post_Txt.Text + "','" + city_Txt.Text + "','" + country_Txt.Text + "','" + mobileno_Txt.Text + "')", xcon);
            xcmd.ExecuteNonQuery();
            Label1.Text = "Information submitted successfully";
            xcon.Close();
            clear();
        }

        public void clear()
        {
            employeeName_Txt.Text = "";
            day_DropDownList.SelectedIndex = 0;
            month_DropDownList.SelectedIndex = 0;
            year_DropDownList.SelectedIndex = 0;
            post_Txt.Text = "";
            city_Txt.Text = "";
            country_Txt.Text = "";
            mobileno_Txt.Text = "";
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-11-24T06:50:55.543

```
 SqlCommand cmd = new SqlCommand("insert into table1 (Name,Mail,Phone,Addres,Gender) values (@Name,@Mail,@Phone,@Addres,@Gender)", con);
        cmd.Parameters.AddWithValue("@Name", textBox1.Text);
        cmd.Parameters.AddWithValue("@Mail", textBox2.Text);
        cmd.Parameters.AddWithValue("@Phone", textBox3.Text);
        cmd.Parameters.AddWithValue("@Addres", textBox4.Text);
        if (radioButton1.Checked==true)
            cmd.Parameters.AddWithValue("@gender", "Male");
        else
            cmd.Parameters.AddWithValue("@gender", "Female"); 
```

# vb6 - 置换码的输出（逐块） - VB6编码

> ID：13939412
> 
> 赞同：1
> 
> 时间：2012-12-18T18:44:17.233
> 
> 标签：vb6, permutation

基本上，我有这个代码：

```
ReDim aPos(1 To Len(sInput))

Do
    aPos(1) = aPos(1) + 1
    For X = 1 To Len(sInput) - 1 
        If aPos(X) > Len(sInput) Then 
            aPos(X) = 1 
            aPos(X + 1) = aPos(X + 1) + 1
        End If
    Next X
    If aPos(Len(sInput)) > Len(sInput) Then Exit Do 
```

我唯一不明白的是最后一行的检查是什么。在我看来，它正在检查从临时创建的“位置”数组中找到的索引是否比来自输入数组的索引更多。那正确吗？我没有关注的是这里的数学，迭代的性质，如果你愿意的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:15:32.280

下面是一个小型测试项目，用于显示您的 apos 进度，我从您的代码中尽可能少地更改

你可以看到最后 apos 将用 '1' 填充，除了最后一个元素的字符串长度为 sInput 加 1

```
'1 form with
'    1 command button : name=Command1
Option Explicit

Private Declare Function GetTickCount Lib "kernel32" () As Long

Private Sub Command1_Click()
  Dim X As Integer
  Dim sInput As String
  Dim apos() As Integer
  Dim lngTime As Long
  sInput = "Hello"
  ReDim apos(1 To Len(sInput)) As Integer
  Do
    apos(1) = apos(1) + 1
    For X = 1 To Len(sInput) - 1
      If apos(X) > Len(sInput) Then
        apos(X) = 1
        apos(X + 1) = apos(X + 1) + 1
        ShowApos apos
        lngTime = GetTickCount + 100
        Do Until GetTickCount > lngTime
          DoEvents
        Loop
      End If
    Next X
    If apos(Len(sInput)) > Len(sInput) Then Exit Do
  Loop
End Sub

Private Sub ShowApos(apos() As Integer)
  Dim intIndex As Integer
  Dim strShow As String
  For intIndex = LBound(apos) To UBound(apos)
    strShow = strShow & CStr(apos(intIndex)) & " "
  Next intIndex
  Caption = strShow
End Sub 
```

所以它所做的只是有一些计数器填充到 len(sInput)+1 并将数组的所有其他元素设置为 1

最后一行将确保您在达到最终值时退出循环

# css - div的CSS垂直对齐方式

> ID：13939413
> 
> 赞同：0
> 
> 时间：2012-12-18T18:44:21.113
> 
> 标签：css, html, image

我有一个标题，然后在它下面我显示一个相邻的项目选择。在与项目选择相同的行上，我显示了一张图片。

我遇到的问题是我希望单个图像（X）对齐，以便它的底部与项目选择的底部（A、B 和 C）一致。例如。

```
H1 Title             ----------
                     |        |
                     |        |
                     |    X   |
-----  -----  -----  |        |
| A |  | B |  | C |  |        |
-----  -----  -----  ---------- 
```

我遇到的问题是它看起来像这样：

```
H1 Title

-----  -----  -----  ----------
| A |  | B |  | C |  |        |
-----  -----  -----  |        |
                     |    X   |
                     |        |
                     |        |
                     ---------- 
```

这是我使用的 HTML：

```
<h1>H1 Title</h1>

<div id="items">
<ul>
    <li>A</li>
    <li>B</li>
    <li>C</li>
</ul>
</div>

<div id="single_image">
        <img src="myImage.png" />
</div> 
```

我正在使用的 CSS 是：

```
#items { 
    float:left; 
}

#items ul { 
    list-style:none; margin:0; padding:0; 
}

#items ul li { 
    display:inline; float:left; 
    margin-bottom:20px; font-size:22px; 
}

#single_image { }

#single_image img { 
    float:right; height:130px; 
    width:inherit; margin-right:40px; 
} 
```

请问有人可以帮我吗？我无法解决这个问题。我尝试在 CSS 中的 img 上使用垂直对齐属性，但它似乎没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:12:29.300

如果图像是固定大小的，那么快速解决这个问题的方法就是使用负边距顶部，这样图像就是它自己的高度——所以底部实际上是现在顶部的位置。

例如，如果图像高度为 130px，请执行以下操作：

```
#single_image img { margin-top: -130px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:10:59.190

一种可能的解决方案是将它们包装在一个容器中，并将#items 绝对定位到容器的底部。这是一个示例：

[http://jsfiddle.net/5csWH/](http://jsfiddle.net/5csWH/)

```
<div class="container">
    <h1>H1 Title</h1>
    <div id="items">
        <ul>
            <li>A</li>
            <li>B</li>
            <li>C</li>
        </ul>
    </div>
    <div id="single_image">
        <img src="myImage.png" />
    </div>
    <div class="clearfix"></div>
</div> 
```

CSS：

```
#items          { float:left; }
#items ul       { list-style:none; margin:0; padding:0; position: absolute; bottom: 0; }
#items ul li    { float:left; margin-right:20px; font-size:22px; width: 50px; background: #DDD; }

#single_image       { }
#single_image img   { float:right; height:130px; width:inherit; background: #DDD; }

.container { width: 50%; margin: 0 auto; background: #EEE; position: relative; }
.clearfix { clear: both; }​ 
```

# posix - 使用 posix 未命名信号量的 IPC

> ID：13939415
> 
> 赞同：0
> 
> 时间：2012-12-18T18:44:20.700
> 
> 标签：posix, ipc, semaphore

如何在使用匿名 posix 信号量的进程中实现生产者/消费者问题？（这意味着我需要有 2 个进程依次打印一些文本，第 2 个可以从第 1 个分叉）

```
pthread_t pchild; 
int i = 0; 
pid_t pid; 

sem_init(&fst, 1, 1); 
sem_init(&scnd, 1, 0); 

if((pid = fork()) == 0){  

    while(i<10){ 
    sem_wait(&scnd); 
    printf("CHILD\n"); 
    sem_post(&fst); 
i++; 
} 
}else if(pid != -1){     

while(i<10){ 
        sem_wait(&fst); 
        printf("parent\n"); 
        sem_post(&scnd); 
        i++; 
        } 
}else{ printf("error - fork !!!\n");} 

sem_destroy(&fst); 
sem_destroy(&scnd); 
```

[此代码仅打印“父级”- 1 次，但我在 oracle 文档http://docs.oracle.com/cd/E19253-01/816-5137](http://docs.oracle.com/cd/E19253-01/816-5137/sync-39/index.html)中发现“未命名的信号量是私有的，通过 fork() 继承” [/sync-39/index.html](http://docs.oracle.com/cd/E19253-01/816-5137/sync-39/index.html) 怎么了？

* * *

我的解决方案在这里[https://www.dropbox.com/s/zzgsyj9rq1ngv0s/ost_13p.c](https://www.dropbox.com/s/zzgsyj9rq1ngv0s/ost_13p.c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:38:40.023

在共享内存中分配信号量（如 by [`shm_open`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/shm_open.html)），然后重试。

将`pshared`参数设置在`sem_init`. 参数引用的内存`sem_t *`也必须在进程之间共享。

# ruby - 根据用户输入引用变量

> ID：13939417
> 
> 赞同：-1
> 
> 时间：2012-12-18T18:44:26.103
> 
> 标签：ruby, user-input

使用以下代码，我希望用户输入`"pluto"`or `"scooby"`，然后调用该实例的`speak()`方法。

```
class Dog
  def speak()
    puts "Woof"
  end
end

scooby = Dog.new
pluto = Dog.new

puts "Which dog would you like to speak? [scooby/pluto]"
response = gets.chomp
response.speak() 
```

如果你能告诉我怎么做，和/或怎么称呼它，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:47:43.550

大多数 Ruby 程序员会建议您不要尝试按名称查找全局变量，而是将您的狗存储在`Hash`按名称索引的位置。

所以你应该有：

```
kennel = {}
kennel['scooby'] = Dog.new    
kennel['pluto'] = Dog.new 
```

然后你可以说

```
kennel[response].speak 
```

当然，你可能想提防`response`在狗窝里不成为狗的名字的价值；我会把这项研究留给你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:52:21.627

您可以`eval`通过用户的输入来获取局部变量的值：

```
eval(response).speak() 
```

但是，这并不安全。

另一项检查是：

```
eval(response).speak() if local_variables.include?(response.to_sym) 
```

但这也不安全。

# sql - 从 Oracle 复制到 SQL Server 表

> ID：13939424
> 
> 赞同：1
> 
> 时间：2012-12-18T18:44:44.160
> 
> 标签：sql, database, oracle

我想将 Oracle 数据库表中一列的内容复制到 SQL Server 数据库中的另一列中。我有超过 300 万行要转移。有没有解决这类问题的捷径。并非Oracle表中的所有内容都会被传输，因为Oracle表大约有400万行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:27:43.907

好吧，假设您的意思是 SQL/Server，我会使用 SQL Server Integration Services (SSIS)，这很容易做到，而且我最近也做过类似的事情。一个主要技巧是将数据暂存到一个未索引的表中，Oracle`VARCHAR2`列（如果有的话）`NVARCHAR`在 SQL/Server 中映射到该表中，这样可以避免 SSIS 中的数据转换步骤。从临时表中，您可以将它们放入正确的目标表中，然后摆脱临时表。我就是这样做的。

您可以将数据导入 MS/Access 数据库并使用 SQL/Server 导入/导出向导。如果您手边有 Ms/Access ，这非常快，也许是*您的最佳选择。*

您可以在 SQL/Server 中创建一个链接服务器，您可以简单地将数据吸入数据库中。这种方法的结果好坏参半。它确实有效，但我发现它有时会有点不稳定。这可能与我们的基础架构有关，而不是 Oracle 链接服务器的固有弱点。如果遇到问题，您可以对数据进行逻辑分区并将其零碎地拉入 SQL/Server。链接服务器非常优雅，但如果你能让它们工作的话。您用于`OPENQUERY()`从 Oracle 检索数据，例如

```
Select * Into SqlServerTableName 
  From OpenQuery(Oracle_Linked_Server,'Select * from OracleTable
                                        Where etc'); 
```

您还可以将数据导出到平面（或 CSV）文件中并导入，SSIS 也可以这样做，但不会那么容易。这有点容易出现格式化和导出/导入差异

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:18:19.733

为了澄清 Ciarán 答案的最后一句话。我曾经这样做过：

*   使用 sqlplus 和 SPOOL 从 Oracle 表中导出数据（[示例](https://stackoverflow.com/a/654723/1910242)）；
*   使用 bcp 实用程序快速加载到 MS SQL（[文档](http://msdn.microsoft.com/en-us/library/ms162802.aspx)）。

# android - 在社交媒体 Android 中分享高分截图

> ID：13939425
> 
> 赞同：0
> 
> 时间：2012-12-18T18:44:47.997
> 
> 标签：android, facebook, twitter, screenshot, social-networking

我正在开发一款游戏，我想知道如何在用户登录其帐户时向社交媒体发送消息和屏幕截图。

所以我有很多选择：

1.  我使用这样的代码[来](https://stackoverflow.com/questions/10296711/androidtake-screenshot-and-share-it)截取用户当前的高分截图。但问题是我如何将这张照片发送到社交媒体？有没有办法在登录 facebook/twitter 时发送图片？

2.  我读到我可以使用 facebook APK。但这对于只发布一条消息来说不是太多了吗？如果我也想要 twitter，我是否必须使用 twitter APK（如果存在）？

3.  我是否应该放弃发送屏幕截图的想法，而只使用短信来宣传高分（以及我的游戏）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:49:45.847

您可以使用共享意图来共享您的图像。这将导致 Android 显示一个对话框，其中包含所有可以共享和图像的可用应用程序。该对话框将包含 Facebook、twitter、google plus、SMS、whatsapp 等（如果已安装）。

```
Intent share = new Intent(Intent.ACTION_SEND);
share.setType("image/jpeg");// image/png if it's a png

share.putExtra(Intent.EXTRA_STREAM,
  Uri.parse("<path_to_image>"));

startActivity(Intent.createChooser(share, "Share Highscore")); 
```

您需要将屏幕截图保存在外部或内部存储中的某个位置，并为意图提供路径，然后才能完成此操作。

# ruby-on-rails-3 - 提交按钮不适用于嵌套表单

> ID：13939428
> 
> 赞同：1
> 
> 时间：2012-12-18T18:44:54.900
> 
> 标签：ruby-on-rails-3, submit, nested-forms, erb

我正在使用 RoR，我有 2 个对象，Warehouse 和 StateCity。Warehouse 对象属于 StateCity 对象。在我的表单中，当我在仓库的 _form.erb.html 中有以下 StateCity 代码时，用于创建新仓库的提交按钮将不会提交。

```
<%= form_for (@warehouse) do |f| %> 
...
<%= form_for (@state_city) do |s| %>
    <div class="field">
      <%= s.label :city %><br />
      <%= s.text_field :city %>
    </div>
    <div class="field">
      <%= s.label "State" %><br />
      <%= select_tag("state", options_for_select(us_states ,@state_city.state )) %>
    </div>
<% end %>
<% end %> 
```

有谁知道我哪里出错了？我的主要目标是让用户选择州和城市，然后我获取该信息并尝试在数据库中找到匹配的模型。如果找不到模型，我会创建一个模型并在新 Warehouse 上设置 StateCity 属性。我不想在每次保存 Warehouse 并在数据库中有冗余行时构建一个新的 StateCity。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:48:05.973

请看这个答案：[https ://stackoverflow.com/a/379622/1913769](https://stackoverflow.com/a/379622/1913769)

您**不能**在 HTML 上嵌套表单。

# javascript - 带有标签的div中的javascript movecontent

> ID：13939434
> 
> 赞同：0
> 
> 时间：2012-12-18T18:45:08.183
> 
> 标签：javascript, contenteditable

我有一个 contenteditable div，其中包含文本和一些 html 代码。我想将内容（文本和代码）从这个 div 移动到 textarea。我有 movecontent javascript，但它只移动文本.. 任何人都可以帮助我吗？

```
<html>
    <head>
<script type="text/javascript">
    function MoveContent () {
        var srcObj = document.getElementById ("src");
        var destObj = document.getElementById ("dest");

        if (document.createRange) {     // all browsers, except IE before version 9
            var rangeObj = document.createRange ();
            rangeObj.selectNodeContents (srcObj);
            var documentFragment = rangeObj.extractContents ();
            destObj.appendChild (documentFragment);
        }
    }
</script>
          </head>
     <body>
     <div id="src" style="background-color:#e0a0b0; width:300px; height:50px;">The <br>    <b>contents</b> of the <i>source</i> element.</div>
   <textarea id="dest" style="width: 500px; height:100px;"></textarea>
<br /><br />
<button onclick="MoveContent ();">Move the contents!</button>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:27:53.330

您似乎正在寻找那个：

```
destObj.value = documentFragment.innerHTML; 
```

您通常不会将内容附加到 a `<textarea>`，因为它们可能只包含 CDATA。只需使用该`.value`属性，就像使用`<input>`元素一样。另外，我不确定您到底需要什么`documentRange`，也不`srcObj.innerHTML`会这样做吗？

[jsfiddle.net 上的演示](http://jsfiddle.net/MMKub/)

# for-loop - unityscript 闭包迭代自定义类

> ID：13939435
> 
> 赞同：0
> 
> 时间：2012-12-18T18:45:10.873
> 
> 标签：for-loop, unity3d, closures, unityscript

我有一个名为 SaveData 的自定义类，它由四个字符串组成。我有一个名为 loadEntries 的 SaveData 数组，我想遍历每个数组并访问字符串以将它们与其他内容进行比较。在过去的几天里，我已经阅读了很多关于 unityscript 中的闭包的文章（这里显然有很多内容），但我还没有找到解决这个问题的方法。大多数示例似乎只处理打印出每个条目的值，并且不适用于我的目的。这是我到目前为止所拥有的，它不会编译（我明白为什么它不会，但我不明白如何让它工作）：

```
function Update() {
  for (var entry : SaveData in loadEntries) {
    entry = extractData(entry);

    //logic with "entry" members
  }
}

function extractData(entry : SaveData) {
  return function(entry : SaveData) { var myEntry = entry; };
} 
```

我是否需要对 SaveData 的每个成员而不是整个条目使用闭包？这种方法甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:51:14.670

这是代码的基本模板：

```
 // Create your class like this
  function SaveData(x1, x2, x3, x4) {

    this.string1 = x1; // Whatever value you need
    this.string2 = x2; // Whatever value you need 
    this.string3 = x3; // Whatever value you need
    this.string4 = x4; // Whatever value you need

  }

  // Now let us construct objects from SaveData class and insert them in array.
  var loadEntries = [];

  var firstInstance = new SaveData("a1", "a2", "a3", "a4");
  loadEntries.push(firstInstance);

  // we can directly push more objects without creating variables like this:
 loadEntries.push(new SaveData("b1", "b2", "b3", "b4"));
 loadEntries.push(new SaveData("c1", "c2", "c3", "c4"));
 loadEntries.push(new SaveData("d1", "d2", "d3", "d4"));

  // Access like this in update function
  var myGlobalVar = "d1";
  for (var i = 0; i < loadEntries.length; i++) {

    var saveDataInstance = loadEntries[i];

    // let us log the instance on console to see it is correct
    console.log(JSON.stringify(saveDataInstance));

    if (saveDataInstance.string1 === myGlobalVar) {
       console.log("Found the instance we were looking for");

       // Other strings are 
       // saveDataInstance.string2
       // saveDataInstance.string3
       // saveDataInstance.string4
    }
  } 
```

在这种情况下，我认为不需要关闭。

在此处查看工作演示：http: [//jsbin.com/utezuq/1/watch](http://jsbin.com/utezuq/1/watch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:55:40.117

感谢详细回答的结束，他是正确的，因为它没有任何范围问题。然而，我回到这个问题，发现它的出现是因为我的自定义类“SaveData”是由静态声明的字符串组成的。由于它们是静态的，因此只保存了最终结果。我会留下问题，以防有人犯我犯的同样错误。

# php - 如何制作一个验证表单中字段的函数？php

> ID：13939440
> 
> 赞同：-5
> 
> 时间：2012-12-18T18:45:23.460
> 
> 标签：php, validation, function

我在理解用户定义的函数一般如何工作时遇到了很多麻烦，但我想知道是否有人可以向我展示一个验证表单中字段的函数示例

（例如，用户名的长度必须为 5-10 个字符，并且只接受某些字符...等）

有人可以给我看一个简单解释php如何读取用户定义函数的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:58:08.650

这是一个简单的实现 -

```
function validateUserName($uname){
  $illegalCharacters = array('!','@','#');

  // first check the length
  $length = strlen($uname);
  if ($length < 5 && $length > 10){
    return false;
  }else{
    // now check for illegal characters
    foreach($illegalCharacters AS $char){
      if (strpos($uname,$char) != -1){
        return false;
      }
    }
  }
  return true;
}

$userName = "user1905577";
if (validateUserName($username)){
  echo "Valid username!";
}else{
  echo "INVALID username!";
} 
```

让我们看看这里发生了什么——

我们首先[`strlen()`](http://php.net/manual/en/function.strlen.php)用来测试用户名的长度，然后遍历我们定义的所有非法字符并使用[`strpos()`](http://php.net/manual/en/function.strpos.php)来查看用户名中是否出现任何字符。

函数的名称是`validateUserName`，我们可以通过简单地将其名称和括号放在后面来调用它。像这样—— `validateUserName()`。这个函数必须接收一个参数（用户名），所以我们在括号内传递它，像这样 -`validateUserName($username)`

# sql - Microsoft Access 备注字段在查询时被截断

> ID：13939443
> 
> 赞同：3
> 
> 时间：2012-12-18T18:45:29.310
> 
> 标签：sql, ms-access

我过去曾访问过同样的备忘录字段，并使用[此处](http://allenbrowne.com/ser-63.html)找到的注释来避免截断该字段。出于某种原因，我的新查询开始截断该`Description`字段，我无法找到导致截断的原因。

```
SELECT TableA.ID, Min(IIf([TableA].[YFLAG]="Y",[TableB].[CRHR],[TableA].[CRHR])) 
    AS [Min Credit], First(TableC.COU_DESC) AS Description
FROM (TableA LEFT JOIN TableC ON (TableA.END_DATE = TableC.END_DATE) AND 
    (TableA.ID = TableC.ID)) LEFT JOIN TableB ON TableA.ID = TableB.ID
GROUP BY TableA.ID
HAVING (((Min(IIf([TableA].[YFLAG]="Y",[TableB].[CRHR],[TableA].[CRHR])))>0)); 
```

我已将问题缩小到`Having`语句，但不知道如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:13:48.963

我想知道使用这样的工会是否可行

```
SELECT TableA.ID,0 AS [Min Credit],TableC.COU_DESC AS Description WHERE (FALSE)
Union All
SELECT TableA.ID, Min(IIf([TableA].[YFLAG]="Y",[TableB].[CRHR],[TableA].[CRHR])) 
    AS [Min Credit], First(TableC.COU_DESC) AS Description
FROM (TableA LEFT JOIN TableC ON (TableA.END_DATE = TableC.END_DATE) AND 
    (TableA.ID = TableC.ID)) LEFT JOIN TableB ON TableA.ID = TableB.ID
GROUP BY TableA.ID
HAVING (((Min(IIf([TableA].[YFLAG]="Y",[TableB].[CRHR],[TableA].[CRHR])))>0)); 
```

这种“联合所有”会根据您共享的链接诱使 Access 保留整个备注字段。

# sql-server-2012 - SQL Server Management Studio 2012 编辑器中的列指南

> ID：13939447
> 
> 赞同：2
> 
> 时间：2012-12-18T18:45:49.483
> 
> 标签：sql-server-2012

有没有办法在 SSMS 2012 中获取列指南（例如第 80 列的垂直线）？我[在 Visual Studio 2012](https://stackoverflow.com/q/84209/667632)和[以前版本的 SSMS](https://stackoverflow.com/a/332577/667632)中看到了执行此操作的方法，但我没有看到 SSMS 2012 的任何内容。

我尝试了一个名为at`Guides`的新字符串，但在重新启动 SSMS 2012 后没有指导方针。`RGB(128,0,0) 80``HKEY_CURRENT_USER\Software\Microsoft\SQL Server Management Studio\11.0\Text Editor`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-25T16:45:07.180

SSMS 2012 更新了编辑器控件，它不支持显示指南的“简单”方式，就像 2008 年那样（使用注册表设置）。

我开发了 SSMSBoost 插件 (www.ssmsboost.com)，在上一个版本 (v.2.12) 中，我们为 SSMS 2012 添加了指南功能。它是 100%“手工制作”的功能 - 我们需要编写自己的处理程序来实现它。您可以定义多个参考线（多个列位置）及其颜色。此外，我们还增加了对轻松配置 SSMS 2008 指南的支持，无需使用注册表编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T04:33:30.187

好的，可以的。这一切都取决于能否将 Visual Studio 2010 编辑器指南扩展安装到 SSMS 2012 中。

我之前已将编辑器指南扩展安装到 Visual Studio 2010。 [这](http://visualstudiogallery.msdn.microsoft.com/0fbf2878-e678-4577-9fdb-9030389b338c)是 Visual Studio Gallery 站点上的下载页面（链接到您的 Stackoverflow 参考资料之一）。请注意，您需要安装 Visual Studio 2010 扩展，而不是 Visual Studio 2012 扩展（因为 SSMS 2012 基于 VS 2010，而不是 VS 2012）。

现在您需要找到 SSMS 2012 的扩展文件夹。Brad Gearon 的[这篇博文为我指明了正确的方向。](http://blog.bagearon.com/2012/03/sql-server-management-studio-2012-color-themes-extension-support/)我在 C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\Extensions\ 找到了它。

接下来，您需要找到之前安装到 Visual Studio 2010 中的 Editor Guidelines 扩展。 [这](http://blogs.msdn.com/b/visualstudio/archive/2010/02/19/how-vsix-extensions-are-discovered-and-loaded-in-vs-2010.aspx)Visual Studio 博客文章将我指向主 devenv.pkgdef 文件，其中列出了可以为 Visual Studio 2010 保存扩展名的各种位置。在尝试了 devenv.pkgdef 文件中的各种位置后，我偶然发现了编辑器指南扩展名C:\Users{您的用户名}\AppData\Local\Microsoft\VisualStudio\10.0\Extensions\ 。扩展名只是一个看似随机的文件夹，在我的例子中是 zdtycyqi.0zr。我安装了几个扩展，为了找到正确的扩展，我浏览了每个具有随机名称的文件夹，打开每个文件夹中的 extension.vsixmanifest 文件。每个 extension.vsixmanifest 文件都有一个描述元素。我选择的那个有描述“向编辑器添加垂直列指南。使用与以前版本的 Visual Studio 相同的注册表语法。”。

现在，您只需将包含扩展名的整个文件夹（在我的情况下为 zdtycyqi.0zr 文件夹）从 Visual Studio 扩展文件夹复制到 SSMS 2012 扩展文件夹中。

为了添加指南，我在注册表项 HKEY_CURRENT_USER\Software\Microsoft\SQL Server Management Studio\11.0\Text Editor 中创建了一个名为 Guides 的字符串值。要在第 100 列设置指南，我将 Guides 的值设置为“RGB(196,0,0) 99”。

现在，当我在 SSMS 2012 中打开查询窗口时，我在第 100 列看到一条深红色的指南。

# ssms-2012 - 如何在 SSMS 查询编辑器中切换显示结果选项卡

> ID：13939451
> 
> 赞同：0
> 
> 时间：2012-12-18T18:46:26.580
> 
> 标签：ssms-2012

在以前的版本中，快捷键是

Ctrl+R

这将在以前版本的 SSMS 中关闭或打开查询结果窗格，但在 SSMS2012 中不再起作用。这是我在构建 sql 时获得额外屏幕空间的好方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T12:26:56.033

我们在工作中遇到了同样的问题。这解决了问题[http://support.microsoft.com/kb/2860024#MT2](http://support.microsoft.com/kb/2860024#MT2)

# xml - 导入 XSD 文件

> ID：13939454
> 
> 赞同：0
> 
> 时间：2012-12-18T18:46:40.623
> 
> 标签：xml, xsd, adobe-indesign, xmltable

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"   
           xmlns:aid="http://ns.adobe.com/AdobeInDesign/4.0/">
  <xs:import namespace="http://ns.adobe.com/AdobeInDesign/4.0/"
             schemaLocation="aid.xsd"/>
  <xs:element name="Table">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="Cell"/>
      </xs:sequence>
      <xs:attribute ref="aid:table" use="required"/>
      <xs:attribute ref="aid:tcols" use="required"/>
      <xs:attribute ref="aid:trows" use="required"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="Cell">
    <xs:complexType mixed="true">
      <xs:sequence>
        <xs:element minOccurs="0" 
                    maxOccurs="unbounded" 
                    ref="mathImage"/>
      </xs:sequence>
      <xs:attribute ref="aid:ccols" use="required"/>
      <xs:attribute ref="aid:ccolwidth" use="required"/>
      <xs:attribute ref="aid:crows" use="required"/>
      <xs:attribute ref="aid:table" use="required"/>
      <xs:attribute ref="aid:theader"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="mathImage">
    <xs:complexType>
      <xs:attribute name="href" 
        use="required" 
        type="xs:anyURI"/>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

我遇到的问题是 Adob​​e InDesign 的命名空间无效，架构位置也无效。有没有人可以替代这种情况？

这是我的问题的要点：我正在尝试在我编写的架构中验证来自 Adob​​e InDesign 的表格。由于我们需要捕获样式信息，我们决定将表格导出为 InDesign 表格，而不是 CALS。我已经编写了经过验证的架构的其余部分，但这部分给我带来了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:54:33.683

如果我正确理解了您的问题描述，则您正在尝试从三个架构文档构建架构：

1.  您的主要架构文档（未显示），其中包括或导入您的问题描述中显示的架构文档。
2.  问题描述中显示的架构文档，其中
    *   声明元素 Table、Cell 和 mathImage，它不绑定到命名空间
    *   导入命名空间`http://ns.adobe.com/AdobeInDesign/4.0/`并指向本地模式文档`aid.xsd`作为查找适当声明的位置
3.  架构文档aid.xsd，未显示，但从架构文档2中引用。从架构文档2中的声明，我们可以推断出该架构文档
    *   应该位于本地（在与模式文档 2 相同的目录中，因为使用了相对引用来指向它）
    *   应该声明`http://ns.adobe.com/AdobeInDesign/4.0/`为其目标命名空间
    *   应该声明名为 table、tcol、trows、ccol、ccolwidth、crows 和 theader 的顶级属性

您的错误消息涉及读取名为“Table_ASVAB.xsd”的模式文档的问题；从您的描述中我不清楚这个文件名是表示模式文档 1 还是模式文档 2。

如果 Table_ASVAB.xsd 是您的问题描述中显示的架构文档，则问题的可能原因是错误消息中给出的原因，减去我们可以看到的情况并非如此：

*   找不到文档。很有可能：不同的验证器在不同的地方寻找模式文档，你需要查阅验证器的文档，看看如何告诉它在哪里可以找到你的模式文档。从您的描述中不清楚您当前如何告诉或试图告诉验证器在哪里可以找到模式文档。

*   无法读取文档。也可能：检查运行验证器的进程是否具有模式文档的读取权限。

*   文档的根元素不是 xsd:schema。不是此错误消息的原因；我们可以看到问题描述中显示的架构文档的根元素*是*架构，并且它*位于*XSD 命名空间中。

如果 Table_ASVAB.xsd 不是您的问题描述中显示的架构文档，而是您的主架构文档，那么同样可能的原因也适用（您还应该检查以确保它的根元素具有正确的命名空间绑定和名称）。

关于附带问题的几点评论：

如果您`aid.xsd`自己提供架构文档，那么 Adob​​e 是否支持该产品并不重要：架构验证器将像从 adobe.com 的 URI 一样愉快地从您的硬盘读取给定名称空间的架构文档。如果您自己不提供aid.xsd，那么您有两个问题（至少）：您必须为该名称空间找到一个现有的模式文档，并且您必须在导入的 schemaLocation 属性中为其提供适当的 URI .

import 和 include 之间的区别很简单：`include`获取在​​调用模式文档的目标命名空间中声明附加组件的模式文档；`import`声明导入模式文档依赖于导入命名空间中的组件（这种依赖关系通常采用对这些组件的引用的形式；在您显示的模式文档的情况下，它是对属性的引用`aid:table`等。包含模式是错误的指定不同目标命名空间的文档；导入与当前架构文档的目标命名空间相同的命名空间是错误的。如果您在这一点上感到困惑，您可能会发现参考一个很好的 XSD 教程介绍很有帮助。

# javascript - ASP.NET MVC 4 WebApi JsonValueProviderFactory JSON 到 JavaScript 日期

> ID：13939462
> 
> 赞同：0
> 
> 时间：2012-12-18T18:47:03.337
> 
> 标签：javascript, json, asp.net-mvc-4

我正在使用 JsonValueProviderFactory 从我的 webapi 返回 JSON。当我发出 ajax 请求时，我得到了 JSON，并且我一直在将日期的 JSON 表示形式转换为 JavaScript Date 对象：

data.StartDateTime = new Date(data.StartDateTime);

data.StartDateTime JSON 看起来像“2012-12-19T10:00:00”，它在我们针对 FireFox 的测试中运行良好。当我对 Chrome 进行测试时，它会以不同的方式处理日期：

我测试了每个浏览器： new Date("2012-12-19T10:00:00")

```
FF: Date {Wed Dec 19 2012 10:00:00 GMT-0700 (Mountain Standard Time)}
IE: Date {Wed Dec 19 2012 03:00:00 GMT-0700 (Mountain Standard Time)}
Chrome: Date {Wed Dec 19 2012 03:00:00 GMT-0700 (Mountain Standard Time)}
Safari: Invalid Date 
```

因此，webkit 似乎希望包含时区。我可以计算用户时区偏移并将其附加到 JSON 日期值，这会产生：

新日期（“2012-12-19T10:00:00-07:00”）

```
FF: Date {Wed Dec 19 2012 10:00:00 GMT-0700 (Mountain Standard Time)}
IE: Date {Wed Dec 19 2012 10:00:00 GMT-0700 (Mountain Standard Time)}
Chrome: Date {Wed Dec 19 2012 10:00:00 GMT-0700 (Mountain Standard Time)}
Safari: Date {Wed Dec 19 2012 10:00:00 GMT-0700 (Mountain Standard Time)} 
```

因此，根据这些发现，我似乎只需要将时区偏移量附加到 JSON 日期表示，然后就可以了。请记住，这些日期/时间不是 UTC 日期，因为它们用于安排实体业务的约会，因此如果有意义的话，日期/时间必须保持在它创建的时区中。

我编写了这个方法来获取附加到 JSON 日期值的偏移量：

```
_calculateTimezoneOffset: function() {
            var offset = new Date().getTimezoneOffset(),
                hour = parseInt(offset / 60, 10),
                minutes = offset % 60,
                prefix = '-';

            if (offset > 0) {
                prefix = '-';
            } else {
                prefix = '+';
                hour *= -1;
            }

            if (hour < 10) {
                hour = prefix + '0' + hour;
            } else {
                hour = prefix + hour;
            }

            if (minutes < 0) {
                minutes *= -1;
            }   

            if (minutes < 10) {
                minutes = '00';
            }

            return hour + ':' + minutes;
        } 
```

有没有更好的方法来处理这个？在重新考虑这一切之后，我可能会开始将日期转换为 UTC 以避免这种情况。对任何一种方式的问题有什么想法吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:55:33.550

如果你继续走这条路，你可能会发疯……尤其是在软件维护期间。由于服务器和客户端可能在不同的时区运行，因此最安全、最简单的通信方式是通过 UTC 时间。不用担心...浏览器接收到的 UTC 格式的日期将显示在浏览器本地时间中。在将日期发送到 Json 中的浏览器之前请注意，您不需要将其转换为 UTC，此工作由所有 json 格式化程序以正确的方式自动完成......如果（并且仅当......） DateTime TimeKind 属性设置为*Utc*或*Local* ...如果此属性设置正确（即，如果其值不是*Unspecified*) 所有格式化程序都会在将日期发送到 Json 之前将其标准化为 UTC 格式。因此，在您的情况下，如果日期以当地时间表示，请确保所有 DateTime 在将它们传递给 Json Formatter 之前将其 TimeKind 设置为 Local ...这就足够了。

我建议阅读我关于时区相关问题的博客文章，深入分析与时区相关的所有问题：[Asp.net Mvc 和日期和时区的噩梦](http://www.dotnet-programming.com/post/2012/09/10/Aspnet-Mvc-and-the-Nightmare-of-Dates-and-Time-Zones.aspx)

# fluent-nhibernate - 如何获得根记录的唯一计数，而不是子记录？

> ID：13939463
> 
> 赞同：1
> 
> 时间：2012-12-18T18:47:03.553
> 
> 标签：fluent-nhibernate

我正在尝试统计有多少患者不使用与他们相关的设备。以下返回值 4。它需要返回值 1，因为有 1 名患者使用 4 台设备处于非活动状态。

```
return FluentSessionManager.GetSession()
            .CreateCriteria<Patients>()
            .CreateAlias("Locations", "l")
            .CreateAlias("l.Branches", "b")
            .CreateAlias("PatientsEquipment", "pe")
            .Add(Expression.Eq("b.ID", branchID))
            .Add(Expression.Eq("CurrentStatus", Enumerations.PatientStatus.Inactive))
            .Add(Expression.IsNull("pe.PickupDate"))
            .Add(Expression.Eq("pe.PickupRequestSent", false))
            .Add(Expression.Eq("pe.MaintenanceRequestSent", false))
            .SetResultTransformer(new DistinctRootEntityResultTransformer())
            .SetProjection(Projections.Count("ID")).UniqueResult<int>(); 
```

如果我执行以下操作，我可以获得准确的计数：

```
 ICriteria query = FluentSessionManager.GetSession()
            .CreateCriteria<Patients>()
            .CreateAlias("Locations", "l")
            .CreateAlias("l.Branches", "b")
            .CreateAlias("PatientsEquipment", "pe")
            .Add(Expression.Eq("b.ID", branchID))
            .Add(Expression.Eq("CurrentStatus", Enumerations.PatientStatus.Inactive))
            .Add(Expression.IsNull("pe.PickupDate"))
            .Add(Expression.Eq("pe.PickupRequestSent", false))
            .Add(Expression.Eq("pe.MaintenanceRequestSent", false))
            .SetResultTransformer(Transformers.DistinctRootEntity);

        IList<Patients> patients = query.List<Patients>();

        if (patients == null)
        {
            return 0;
        }

        return patients.Count(); 
```

有什么想法可以在不返回完整记录集然后对其进行计数的情况下获得准确的患者计数吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:39:31.990

您可以添加 GroupProperty 投影吗？像`Projections.GroupProperty(Projections.Property<Patients>(x => x.Id))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:06:26.403

我找到了答案......

```
 return FluentSessionManager.GetSession()
        .CreateCriteria<Patients>()
        .CreateAlias("Locations", "l")
        .CreateAlias("l.Branches", "b")
        .CreateAlias("PatientsEquipment", "pe")
        .Add(Expression.Eq("b.ID", branchID))
        .Add(Expression.Eq("CurrentStatus", Enumerations.PatientStatus.Inactive))
        .Add(Expression.IsNull("pe.PickupDate"))
        .Add(Expression.Eq("pe.PickupRequestSent", false))
        .Add(Expression.Eq("pe.MaintenanceRequestSent", false))
        .SetProjection(Projections.CountDistinct("ID")).UniqueResult<int>(); 
```

显然，当我使用 Projections.Count 时，它正在计算所有记录，包括重复记录。当我将其更改为 CountDistinct 时，它解决了我的问题。

# jquery - 干净且具有视觉吸引力的 jQuery/JavaScript 图形 API

> ID：13939464
> 
> 赞同：2
> 
> 时间：2012-12-18T18:47:04.300
> 
> 标签：jquery, css, api, graph, graphing

我一直在对用于我正在构建的社交媒体仪表板的各种图形 API 进行一些研究，但我很难找到一个既高度可配置又看起来“干净”的 API。我真的更愿意使用 API 并自己构建仪表板，而不是使用服务，因为我们将拥有一些我们自己的集成 - 我不想局限于仪表板包中提供的内容。

我要创建的图表理想情况下如下所示。扁平、干净和“WP8-Metro”风格。**有人有想法么？**

* * *

**微软组件艺术**

![在此处输入图像描述](../Images/4f8f82403221e030a40d6e9703837480.png)

![在此处输入图像描述](../Images/be514b8125611302ee445c11ee22a8ca.png)

* * *

**谷歌分析**

![在此处输入图像描述](../Images/78aa28ea4de333a655aee1cbafc17f48.png)

* * *

![在此处输入图像描述](../Images/f6ea20b422914f425471d500b98ad153.png)

![在此处输入图像描述](../Images/b759e5e53c1c39c351c7af427defba9a.png)

![在此处输入图像描述](../Images/34be5672c513bb75c901a3f3f54ebd8e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:48:57.893

[Raphael.js](http://raphaeljs.com/)你会很幸运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:51:56.850

如果您希望通过配置使用真正的 API 而不是图形/图表，则[d3.js](http://d3js.org/)是赢家。如果你想使用基于配置的库，那么[highcharts](http://www.highcharts.com/)和[flot](http://code.google.com/p/flot/)是不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T19:31:18.360

d3.js 很棒，但是使用 Highcharts 的学习曲线要​​容易得多（而且非常健壮）。

[http://www.highcharts.com/](http://www.highcharts.com/)

# javascript - 如何使用 Chrome 的 declarativeWebRequest 更改 http 响应标头

> ID：13939470
> 
> 赞同：2
> 
> 时间：2012-12-18T18:47:47.597
> 
> 标签：javascript, google-chrome-extension, httpresponse

我正在尝试编写一个简单的 Chrome 扩展程序，它使用[declarativeWebRequest](http://developer.chrome.com/extensions/declarativeWebRequest.html)`Content-Type`替换http 响应中的标头（当前处于测试阶段；我使用的是 25.0.1364.0）。

该代码基于[Catifier](http://developer.chrome.com/extensions/samples.html#ecc227966949f60af19c444222a775d9)示例，我在其中更改了`registerRules`方法：

```
var RequestMatcher = chrome.declarativeWebRequest.RequestMatcher;
var RemoveResponseHeader = chrome.declarativeWebRequest.RemoveResponseHeader;
var AddResponseHeader = chrome.declarativeWebRequest.AddResponseHeader;

function registerRules() {
  var changeRule = {
    priority: 100,
    conditions: [
      // If any of these conditions is fulfilled, the actions are executed.
      new RequestMatcher({
        contentType: ['audio/mpeg']
      }),
    ],
    actions: [
      new RemoveResponseHeader({name: 'Content-Type'}),
      new AddResponseHeader({name: 'Content-Type', value: 'application/octet-stream'}),
      new AddResponseHeader({name: 'X-ChromeExt-Content-Type', value: 'trap'})
    ]
  };

  var callback = function() {
    if (chrome.extension.lastError) {
      console.error('Error adding rules: ' + chrome.extension.lastError);
    } else {
      console.info('Rules successfully installed');
      chrome.declarativeWebRequest.onRequest.getRules(null,
          function(rules) {
            console.info('Now the following rules are registered: ' +
                         JSON.stringify(rules, null, 2));
          });
    }
  };

  chrome.declarativeWebRequest.onRequest.addRules(
      [changeRule], callback);
} 
```

从某种意义上说，它工作正常，规则已注册，我从浏览器控制台得到以下反馈：

```
Now the following rules are registered: [
  {
    "actions": [
      {
        "instanceType": "declarativeWebRequest.RemoveResponseHeader",
        "name": "Content-Type"
      },
      {
        "instanceType": "declarativeWebRequest.AddResponseHeader",
        "name": "Content-Type",
        "value": "application/octet-stream"
      },
      {
        "instanceType": "declarativeWebRequest.AddResponseHeader",
        "name": "X-ChromeExt-Content-Type",
        "value": "trap"
      }
    ],
    "conditions": [
      {
        "contentType": [
          "audio/mpeg"
        ],
        "instanceType": "declarativeWebRequest.RequestMatcher"
      }
    ],
    "id": "_0_",
    "priority": 100
  }
] 
```

问题是代码实际上并没有产生任何效果，即http响应头保持不变。我不确定这是否与[Chrome 中的一个（仍然未修复的）错误有关，](https://stackoverflow.com/q/11945665/1102014)没有显示更改的标题。但无论如何，我有以下问题：

1）上述`RequestMatcher`应用`contentType`是否正确或我应该使用匹配器`responseHeaders`代替（以某种方式指出`Content-Type`）？

2) 如果`RequestMatcher`应该应用于`responseHeaders`，那么这样的规则的语法是什么？

```
new RequestMatcher({
  responseHeaders: // what to place here to match a value in a specific header line?
  // or possibly responseHeaders['Content-Type']: ...?
}) 
```

3）如何调试规则执行？我的意思是我想跟踪和分析条件是如何处理的，以及操作是如何执行的。没有这种使用`declarativeWebRequest`将是一个难题，恕我直言。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T04:45:12.247

1）我尝试了以下代码（与您的几乎相同，只是它将内容类型从 text/html 修改为 text/plain）

```
chrome.declarativeWebRequest.onRequest.addRules([{
    priority: 100,
    conditions: [
      // If any of these conditions is fulfilled, the actions are executed.
      new chrome.declarativeWebRequest.RequestMatcher({
        contentType: ['text/html']
      }),
    ],
    actions: [
      new chrome.declarativeWebRequest.RemoveResponseHeader({name: 'Content-Type'}),
      new chrome.declarativeWebRequest.AddResponseHeader({name: 'Content-Type', value: 'text/plain'}),
      new chrome.declarativeWebRequest.AddResponseHeader({name: 'X-ChromeExt-Content-Type', value: 'trap'})
    ]
  }]) 
```

它奏效了！不过，修改并未反映在 DevTools 中。

2）根据[https://developer.chrome.com/trunk/extensions/declarativeWebRequest.html#type-HeaderFilter](https://developer.chrome.com/trunk/extensions/declarativeWebRequest.html#type-HeaderFilter)，您应该使用

```
new RequestMatcher({
  responseHeaders: [{nameEquals: "Content-Type", valueContains: "audio/mpeg"}]
}) 
```

~~But it didn't work (Did I make a mistake??).~~ Use valueContains instead of valueEquals since Content-Type may contain encoding.

3) It seems impossible to do that unless you debug Chrome itself.

I tested on Chromium 25.0.1363.0 (Build 173419)

# javascript - 使用 CSS/JS 的流动边距

> ID：13939472
> 
> 赞同：-5
> 
> 时间：2012-12-18T18:47:59.337
> 
> 标签：javascript, css, fluid-layout

我尝试创建以下内容：我有居中的块宽度最小和最大宽度，我需要将内容放在它的左侧和右侧。当块的宽度等于最大宽度时，左右内容可见（左右内容由阴影表示）：

[前 1 http://dev.graymur.net/example/1.jpg](http://dev.graymur.net/example/1.jpg)

当浏览器窗口调整为更窄的值时，中央块和左/右块按比例缩小：

[前 2 http://dev.graymur.net/example/2.jpg](http://dev.graymur.net/example/2.jpg)

当窗口宽度等于或小于中央块的最小宽度时，左/右块完全消失，只有中央块可见：

[前 3 http://dev.graymur.net/example/3.jpg](http://dev.graymur.net/example/3.jpg)

我不认为这可以用纯 HTML/CSS 来实现，我也想不出 javascript 解决方案。

请帮忙？

## 更新

上面的描述可能不太清楚，用简单的话来说：我尝试为我的中央块创建流体边距：0 当块处于最小宽度时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T03:17:50.853

There's not much you can do about the content on the right side. When the window shrinks to be smaller than the width of the content, the content slides offscreen to the right. However, you can make sure your left content doesn't get lost by wrapping everything in a container and setting the `min-width` on that parent.

There are a number of possibilities

[**Option 1: Static widths**](http://jsfiddle.net/G6zmq/)

[**Option 2: Semi-fluid widths**](http://jsfiddle.net/maWxR/)

[**Option 3: Completely fluid widths**](http://jsfiddle.net/Yr6L8/)

Code for Option 1:

# html

```
<div id='content'>
  <div class='border-content'></div>
  <div id="center"></div>
  <div class='border-content'></div>
</div> 
```

# css

```
#content {
  min-width: 400px;
  border: 3px solid #9ef;
}
#content:after {
  display: block;
  clear: both;
  content: '';
}
.border-content {
  float: left;
  width: 40px;
  height: 200px;
  background: #eee;
}
#center{
  float: left;
  width:300px;
  height:200px;
  background:url(http://placekitten.com/300/200) no-repeat;
} 
```

# c# - 如何从标记设置用户控件的属性

> ID：13939480
> 
> 赞同：0
> 
> 时间：2012-12-18T18:48:22.860
> 
> 标签：c#, asp.net, class

我在任何地方都找不到这个简单问题的答案。
因此，假设我的 MyUserControl 具有这样的公共属性：

```
 public int myInt
        {
            get
            {
                return (int)ViewState[MyKey];
            }

            set
            {
                ViewState[MyKey] = value;
            }
        } 
```

我能做的是我可以将此控件放在页面上并在 page_load 上设置此属性，如下所示：

```
controlId.myInt =10; 
```

但是我怎样才能用（可能）智能的标记来做同样的事情。像这样的东西：

```
<myNamesplace:MyUserControl Id="controlId" runat="server" myInt="10" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:52:52.127

您需要先在页面上注册包含该控件的程序集：

```
<%@ Register Assembly="your.assembly" Namespace="your.namespace" TagPrefix="myNamespace" %> 
```

然后智能应该把它捡起来。

# c++ - 使用记事本创建文件

> ID：13939484
> 
> 赞同：0
> 
> 时间：2012-12-18T18:48:43.603
> 
> 标签：c++

我需要编写一个从外部文件读取值的程序。我正在使用记事本创建文件，但是在输入值时，我是否需要用分号之类的任何符号分隔值？或者将值放在单独的行上就足够了吗？我问是因为我的程序应该分别读取每个值。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:52:52.860

取决于你如何读入它们。如果你使用一些流行的 Java 对象来读入文件，一个新的行就可以了。您还可以在 Java（和其他语言）中指定“分隔符”，以便在到达该值的末尾时停止。

最好的办法是使用“readLine”方法来查找换行符，仅此而已。这样，您的记事本文件对人类来说更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:53:29.770

你可以两者都做，如果值都与同一个属性相关，我会使用换行方法。
如果这些值与不同的属性（例如人的姓名和年龄）有关，那么我会用逗号分隔两个值，并为下一个人换行：

例子：

```
#name,age
John,23
Jimmy,28 
```

或者如果文件只包含年龄：

```
#age
23
28 
```

如果你是一个好人，你应该在第一行创建一个你过度阅读的评论

# android - 相当于 Android 的 iOS RestKit

> ID：13939485
> 
> 赞同：3
> 
> 时间：2012-12-18T18:48:44.723
> 
> 标签：android, ios, rest, restkit

您知道或多或少等同于[RestKit](http://restkit.org/)但适用于 Android 的优秀库吗？

我有一个小想法，但可能还有其他有趣的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T14:01:43.760

当我看到 Android 没有类似的东西时，我基于 RestKit 的想法创建并开源了一些代码。它可以帮助处理 Android 中的网络请求，特别是如果您在同一个活动中执行许多请求并希望保持可读性。

它被称为[Android Network Kit](https://github.com/jamieomatthews/AndroidNetworkKit)，包含的示例应用程序使用 Spotify API 来演示这一点。优点是您可以将所有凌乱的网络代码保存在单独的文件中，但公开一种方法来解析您返回的响应。

通过简单地提供键值的数组列表，它还可以帮助使用 GET 参数 (GET)、表单编码参数 (POST) 或 JSON 参数 (POST) 轻松构造 GET 或 POST 请求。

我没有 RestKit 拥有的任何对象映射，但你总是可以将我的应用程序与 Gson 结合起来。（我计划在下一个版本的 Android Network Kit 中包含它）。

# android - 如何创建三星 Galaxy S2 AVD

> ID：13939488
> 
> 赞同：2
> 
> 时间：2012-12-18T18:48:51.807
> 
> 标签：android, avd, samsung-mobile

如何为三星 Galaxy S2 创建 Android 虚拟磁盘？

我已经从[这里](http://developer.samsung.com/android/tools-sdks)下载了皮肤并按照我在[这里](http://www.droidikin.com/create-the-samsung-galaxy-s2-emulator/)找到的说明进行操作，但无济于事。我可以在 AVD 管理器中选择三星 Galaxy S2 作为“目标”，但皮肤在下拉列表中不可用？我已将 GALAXY_S2 文件夹放在 /add-ons/GALAXY_S2 和 /platforms/android-4.2/skins/GALAXY_S2 和 /platforms/android-17/skins/GALAXY_S2 中，但似乎都不起作用？

任何建议将不胜感激，在这里感到有点沮丧。

# c++ - 什么可能导致 Box2D 突然停止？

> ID：13939489
> 
> 赞同：2
> 
> 时间：2012-12-18T18:48:52.773
> 
> 标签：c++, box2d

我正在使用 Box2d 进行游戏，但我遇到了一个让我发疯的错误。我将情况简化为一个方形玩家在由一系列方形瓷砖组成的地板上无摩擦地来回滑动，由左右键（施加水平力）驱动。效果很好，在整个地板上来回滑动。

除了...每隔一段时间，玩家会突然粘在其中一个瓷砖的边缘，就好像它正在撞到（不存在的）墙壁一样。再往同一个方向推会失败，但只要我往相反的方向向后推一次，我就可以再次向前推过粘滞点。粘点似乎是随机的，除了在瓷砖的边缘。向左或向右时发生。

出于调试目的，我保留前两个更新刻度的位置/速度值，并在此停止发生时将它们打印出来。例如，在这里您看到玩家向右移动，略微减速；pos2 应该是 8.7 左右，但它反而停止了。

```
tick0:  pos= 8.4636 vel= 7.1875
tick1:  pos= 8.5816 vel= 7.0833
tick2:  pos= 8.5816 vel= 0.0000 
```

因此，当玩家为 0.8 且瓷砖宽度为 1.0 时，玩家在即将越过下一块瓷砖时停止（8.5816 + 0.8/2 = 8.9816）。事实上，我收到了一条冲突消息（我忽略了它，只是注意到它发生了）。它似乎只在向右移动时发生在 x.5816（或 -x.4184），向左移动时发生在 x.4167（或 -x.5833）

我说这就像撞墙，但实际上，当它撞墙时，数字看起来更像：

```
 tick0:  pos0= 12.4131 vel2= 8.4375
 tick1:  pos1= 12.5555 vel1= 8.5417
 tick2:  pos2= 12.5850 vel0= 0.0000 
```

所以它在最后一个滴答声上向右移动，使其与墙壁接触。

有人见过这样的吗？关于我如何导致这种行为的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:53:59.493

不幸的是，这是 Box2d 中的一个已知问题......[来自常见问题解答](http://code.google.com/p/box2d/wiki/FAQ)：

> **基于瓷砖的环境**
> 
> 为您的地形使用多个框可能效果不佳，因为类似框的字符可能会卡在内部角落。Box2D 的未来更新应该允许边缘链上的平滑运动。一般来说，您应该避免使用矩形字符，因为碰撞容差仍会导致不希望出现的阻碍。
> 
> 有关更多信息，请参阅此帖子： [http ://box2d.org/forum/viewtopic.php?f=3&t=3048](http://box2d.org/forum/viewtopic.php?f=3&t=3048)

来自 Box2d 的创建者 Eric Catto（强调添加）：

> 我正在研究边缘链的解决方案，但没有针对相邻多边形的解决方案。**您最好使用一个或多个圆圈来表示角色与环境**。大多数使用现代物理引擎的专业游戏都为角色使用平滑的形状，例如胶囊。对角色使用盒子形状确实只适用于使用基于像素的碰撞与积分数学的系统（即较旧的控制台游戏）。

所以基本上，你的身体应该是一个光滑的形状，而不是一个多边形，这样它就不会在瓷砖之间卡住。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-06T04:41:04.623

不，您不需要将瓷砖更改为光滑的身体。我遇到了完全相同的问题。简短的回答是

“使用 b2EdgeShape ，而不是 b2PolygonShape ”

试试这个..在我使用多边形之前，我遇到了你所说的那些意想不到的碰撞

```
b2PolygonShape* pBasic_1X1_Box = new b2PolygonShape();
pBasic_1X1_Box->SetAsBox(1.0f/2.f, 1.0f/2.f); 
m_mapPolygonShape["1X1_Box"] = pBasic_1X1_Box;       
....
pBody->CreateFixture(m_mapPolygonShape["1X1_Box"],0.f); 
```

在我使用边缘形状之后，我解决了这些问题

```
b2EdgeShape* pBasic_1X1_Box_Up = new b2EdgeShape();    
b2EdgeShape* pBasic_1X1_Box_Down = new b2EdgeShape();  

 b2EdgeShape* pBasic_1X1_Box_Left = new b2EdgeShape();  
 b2EdgeShape* pBasic_1X1_Box_Right = new b2EdgeShape(); 
 b2Vec2 v0(-0.5f, 0.5f);                                
 b2Vec2 v1( 0.5f, 0.5f);                                
 b2Vec2 v2( 0.5f,-0.5f);                                
 b2Vec2 v3(-0.5f,-0.5f);                                

 pBasic_1X1_Box_Up->SetOneSided(v2,v1,v0,v3);           
 pBasic_1X1_Box_Down->SetOneSided(v0,v3,v2,v1);         
 pBasic_1X1_Box_Left->SetOneSided(v1,v0,v3,v2);         
 pBasic_1X1_Box_Right->SetOneSided(v3,v2,v1,v0);        
 m_mapEdgeshape["1X1_Box_Up"]    = pBasic_1X1_Box_Up;   
 m_mapEdgeshape["1X1_Box_Down"]  = pBasic_1X1_Box_Down; 
 m_mapEdgeshape["1X1_Box_Left"]  = pBasic_1X1_Box_Left; 
 m_mapEdgeshape["1X1_Box_Right"] = pBasic_1X1_Box_Right;
...
// :x: using edge shape for tile structure                 
pBody->CreateFixture(m_mapEdgeshape["1X1_Box_Up"],0.f);    
pBody->CreateFixture(m_mapEdgeshape["1X1_Box_Down"],0.f);  
pBody->CreateFixture(m_mapEdgeshape["1X1_Box_Left"],0.f);  
pBody->CreateFixture(m_mapEdgeshape["1X1_Box_Right"],0.f); 
```

由于麦克沃斯的问题本身，我可以解决这个问题。

谢谢麦克沃斯

# android - Android 和 iPhone 之间的 Xamarin 可移植性

> ID：13939495
> 
> 赞同：2
> 
> 时间：2012-12-18T18:49:00.480
> 
> 标签：android, iphone, xamarin

我必须为 Android 和 Iphone 构建一个应用程序。

Xamarin 立即引起了我的注意，因为我是 .NET 开发人员。我知道我可以使用 Xamarin 为这两个平台构建应用程序，但这意味着我必须为每个平台“重写”它们？

是否可以轻松地从 Mono Touch 移植到 Android 的 Mono（反之亦然）？有没有人有做这个的经验？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:02:49.510

如果你更进一步，你可以使用 MvvmCross 之类的东西来最大化你可以跨平台共享的代码量。查看我的 Wsh Lst 项目，了解如何完成此操作的示例：[https ://github.com/Redth/WshLst](https://github.com/Redth/WshLst)

# security - 从密码中排除特殊字符有什么好处吗？

> ID：13939499
> 
> 赞同：1
> 
> 时间：2012-12-18T18:49:08.457
> 
> 标签：security, passwords, entropy

最近，我在设置密码时遇到了两条奇怪的错误消息，一条在[Chipolte 移动订购应用程序](https://itunes.apple.com/us/app/chipotle-ordering/id327228455?mt=8)上，另一条在金融服务门户上。在这两种情况下，我都无法设置密码，因为它包含非字母数字字符。金融服务网站还规定了一个我认为相当奇怪的最大长度（密码不能超过 8 个字符，[似乎非常短视](http://xkcd.com/936/)）。我想知道对于防止某些字符的密码策略是否有任何安全理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:51:45.523

这种类型的限制通常是因为后端的旧系统无法处理非字母数字字符，或者为数据库中的密码字符定义了较短的最大字段宽度。

有时对遗留应用程序进行更改可能非常具有挑战性（并不是说它本身很难，但它通常不是 IT 优先事项）。

我已经特别看到它与 SAP 集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:59:01.013

没有*安全*理由。为了安全起见，允许更多的字符总是更好，因为它增加了潜在组合的数量。

唯一的“理由”要么是短视，要么是某种形式的存储或传输问题（可以通过适当的编码来解决）。也许他们不知道如何进行参数化查询并担心用户试图使用密码进行注入攻击？谁知道。无论如何，它们至少应该是盐渍和散列，这至少真正解决了大多数存储问题。

他们可能试图确保用户不会写下他们的密码，而是选择那些“容易记住”的密码，但这会适得其反：已经打算写下密码的用户仍然会写下密码，并且蛮力强迫其他人的密码。密码变得容易多了。

如果他们还试图对密码不区分大小写，而这在某种程度上是这种选择的原因，那么在许多层面上，我会更加担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:53:38.017

这可能是因为在您创建密码后检查密码是否正确时，它会将所有字符转换为其 ASCII 值，并且特殊字符不包含在编程范围内。至于只有 8 个字符，当他们将您的密码和用户名信息存储在他们的服务器上时，它会减少占用的空间，确实不是很多，但最终可能会变得可以克服。

# php - 在创建产品时添加链接到特定产品的菜单项（自定义组件）

> ID：13939502
> 
> 赞同：0
> 
> 时间：2012-12-18T18:49:13.947
> 
> 标签：php, joomla, joomla2.5

我在 Joomla 2.5 中创建了一个产品组件，客户希望所有产品都显示在现有菜单项产品的子菜单中，这必须通过产品组件自动完成。

产品的创建是通过 Joomla 的后端通过自定义组件视图、控制器和模型来完成的。

给定产品的 id 和名称（用于菜单显示标题），我可以轻松地创建菜单项，我的问题在于在将全新产品添加到数据库时获取产品 id。控制器或模型中是否有可以重载的方法？可以使用我错过的某种模型方法以某种方式获得此 id 吗？

干杯，松鸡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:36:23.823

通过重载 JController 的 save 方法并在最后做修复

```
$db = &JFactory::getDBO();
parent::save($key, $urlVar);
$id = $db->insertid();

if ($id == 0) { 
    $id = JRequest::getInt('id', 0);
} 
```

然后将检索到的 id 传递给模型中定义的方法，并让该方法执行必要的操作。将其留在这里以供我自己和其他可能偶然发现它的人参考。

# objective-c - 当 iPhone 上的“可用存储空间不足...”时，相机应用程序不会关闭

> ID：13939511
> 
> 赞同：7
> 
> 时间：2012-12-18T18:49:51.140
> 
> 标签：objective-c, ios, camera

我有一个应用程序，可以让你用 iPhone 相机拍照。一切都像魅力一样，但是在碰巧没有足够可用存储空间的新设备上进行测试时，相机应用程序并没有关闭。

所以基本上我用源相机打开图像选择器，我得到一个弹出窗口，上面写着“没有足够的可用存储空间来拍照......”然后当我按下确定时，我在相机应用程序中，快门关闭，“拍照”和“取消”按钮都变灰了。从这一点开始，我唯一能做的就是杀死应用程序，因为没有办法离开这个屏幕。

在我的代码中，我用以下方式调用相机：

```
UIImagePickerController * photoPicker= [[UIImagePickerController alloc] init];
photoPicker.delegate = self;
photoPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
if ([UIImagePickerController isSourceTypeAvailable:photoPicker.sourceType]) {
    [self presentModalViewController:photoPicker animated:YES];
} 
```

调用它的对象当然是 UIImagePickerControllerDelegate 并且我实现了两个委托方法（都正确响应成功和取消事件）：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info;
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker; 
```

这种“没有可用空间”行为不属于任何委托方法，因此我无法以编程方式关闭相机应用程序。

有什么想法吗？

**编辑：**

当尝试在相机不可用的模拟器中运行应用程序时，我注意到应用程序崩溃，因为该源不可用。我发现即使在调用控制器之前，简单地将不可用的 sourceType 分配给 photoPicker，也会使应用程序崩溃，因此我将代码更改为以下内容：

```
UIImagePickerController * photoPicker= [[UIImagePickerController alloc] init];
photoPicker.delegate = self;
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
    photoPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
}else{
    return;
}
[self presentModalViewController:photoPicker animated:YES]; 
```

这仍然不能解决我的问题，但这是一个有趣的发现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:02:40.190

问题不在于相机，而在于应用程序的其余部分：相机已经欺骗`didReceiveMemoryWarning`并因此“杀死”了您试图返回的视图。它不再存在了。

修复方法是实现 UIViewController 的 viewDidLoad、viewDidUnload、viewWillDisappear、viewWillAppear 等，并确保您的应用可以处理由 Camera 引起的内存不足的情况，并在 Camera 消失时初始化所需的一切。

# grails - Grails 在使用关系映射时通过 id 获取

> ID：13939512
> 
> 赞同：0
> 
> 时间：2012-12-18T18:49:52.777
> 
> 标签：grails, persistence

使用这些域类：

```
class Country {
    static hasMany = [states:State]
}

class State {
    static belongsTo = [country: Country]
} 
```

我无法通过其 id 检索状态

```
def country = new Country()
def state = new State()
country.addToStates(state)
country.save()

def foundState = State.get(state.id) 
```

foundState 为空。从数据库中检索状态的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:13:16.773

您可能在某处验证失败。做`.save(failOnError: true)`，看看你是否得到异常。

此外，在 hibernate 实际执行插入之前，您将没有 ID。要立即触发此操作`.save(flush: true)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:03:33.160

缺少关键字`static`并且 State 有拼写错误（`s`最后没有），应该是：

```
static hasMany = [ states:State ] 
```

和

```
static belongsTo = [ country:Country ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:15:29.657

`country.save()`调用后`state.refresh()`从数据库中获取其最新状态。这是必要的，因为您没有明确调用`state.save()`（也不应该如此）。

# java - 在 JVM 之间共享类

> ID：13939516
> 
> 赞同：7
> 
> 时间：2012-12-18T18:50:24.887
> 
> 标签：java, jvm, shared-memory

我正在开发一个可以在同一台计算机上同时实例化多次的应用程序。每个 JVM 都不必要地将应用程序类加载到它们自己的内存中，因为所有应用程序的类都是相同的。

[我在此处](http://docs.oracle.com/javase/1.5.0/docs/guide/vm/class-data-sharing.html)和[此处](https://stackoverflow.com/questions/4692076/speed-up-application-start-by-adding-own-application-classes-to-classes-jsa)阅读了有关 CDS的信息，但它似乎仅对 JDK 类有效。

如何在 JVM 之间共享我的应用程序类的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T02:08:43.803

我不是特别了解这个主题，但我做了一些研究。我认为我们可以相当肯定地说，在大多数 JVM 中这实际上是不可能的。下面的问题与您的问题相似，它的答案和评论可能会有所帮助。

[多个 JVM 进程可以共享公共类的内存吗？](https://stackoverflow.com/questions/13496307/can-multiple-jvm-processes-share-memory-for-common-classes)

一种可能的选择是您可以将想要共享的类放在一个进程中，并使用 JMX（Java 管理扩展）之类的东西公开它们的功能。这样多次加载的其他进程就不必加载所有类。但是，这可以减少多少总资源足迹当然是有问题的，并且取决于具体情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T02:18:39.743

虽然理论上听起来不错，但这并不实际。Java 类的存储映像由一定数量的常量数据组成，但也可能包含同样多的“可变”数据——指向其他类的链接指针、各种运行时表、JITCed 代码等。弄清楚什么是可共享的，什么是' t 充其量是困难的，并导致设计不能产生最佳性能。

# image-processing - 在画布上调整亮度/对比度的公式？

> ID：13939520
> 
> 赞同：3
> 
> 时间：2012-12-18T18:50:40.283
> 
> 标签：image-processing, html5-canvas

就像有一个将图像转换为灰度的公式一样，是否有一个公式可以增加图像的亮度并在同一级别降低亮度？我尝试为每个 r、g 和 b 像素添加一个值。它确实增加了亮度，但是当我降低相同的值时，我不会恢复原来的值。

```
var pixels = context.getImageData(...);

//loop over the pixel data and add a value
p[i] = p[i]+100;
p[i+1] = p[i+1]+100;
p[i+2] = p[i+2]+100; 
```

这会使图像变亮。但是当我从每个像素中减少 100 时，我无法恢复原始图像。

我在网上看到有一些公式可以正确计算。谁能解释一下？同样对于对比度和伽玛？

***更新：***

谢谢大家的建议。在浏览了下面的一些帖子后，我尝试了这个。

为了增加亮度：

```
var pixels = context.getImageData(...);

//loop over the pixel data and add a value
p[i] = p[i]+100 < 255 ? p[i]+100 : 255;
p[i+1] = p[i+1]+100 < 255 ? p[i+1]+100 : 255;
p[i+2] = p[i+2]+100 < 255 ? p[i+2]+100 : 255; 
```

对于降低亮度：

```
var pixels = context.getImageData(...);

//loop over the pixel data and add a value
p[i] = p[i]-100 >= 0 ? p[i]-100 : 0;
p[i+1] = p[i+1]-100 >= 0 ? p[i+1]-100 : 0;
p[i+2] = p[i+2]+100 >= 0 ? p[i+2]-100 : 0; 
```

我可以看到增量工作正常，但是当我减量时，我仍然没有得到原始图像，原始图像和增亮图像之间存在一点差异！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:54:48.717

谷歌上的快速搜索显示：

[使用 C++ 调整位图图像亮度/对比度](https://stackoverflow.com/questions/2976274/adjust-bitmap-image-brightness-contrast-using-c)

链接：

[http://www.kweii.com/site/color_theory/2007_LV/BrightnessCalculation.pdf](http://www.kweii.com/site/color_theory/2007_LV/BrightnessCalculation.pdf)

[https://web.archive.org/web/20140825114946/http://bobpowell.net/image_contrast.aspx](https://web.archive.org/web/20140825114946/http://bobpowell.net/image_contrast.aspx)

请记住在发布之前寻找类似的问题:)。

**编辑：**

还有两个链接：

图像处理算法第 5 部分：对比度调整：

[http://thecryptmag.com/Online/56/imgproc_5.html](http://thecryptmag.com/Online/56/imgproc_5.html)

图像处理算法第 4 部分：亮度调整：

[http://www.dfstudios.co.uk/articles/image-processing-algorithms-part-4/](http://www.dfstudios.co.uk/articles/image-processing-algorithms-part-4/)

**编辑：**

您发布的第二个代码块有错误：

```
var pixels = context.getImageData(...);

//loop over the pixel data and add a value
p[i] = p[i]-100 >= 0 ? p[i]-100 : 0;
p[i+1] = p[i+1]-100 >= 0 ? p[i+1]-100 : 0;
p[i+2] = p[i+2]+100 >= 0 ? p[i+2]-100 : 0; // <- Tha p[i+2]+100 should be a p[i+2]-100 right? 
```

**Johannes Jendersie**说的是真的，你的问题是这样的：

以免说您有一个具有此值的像素

```
R = 100;
G = 210;
B = 20; 
```

你给每种颜色加 100，现在你有：

```
R = 200;
G = 255; // It was 310 but you have to clamp it to 255.
B = 120; 
```

现在减去相同的 100：

```
R = 100; // same
G = 155; // different!, this have to be 210!!
B = 20;  // same 
```

这就是为什么这个操作是不可逆的。您可以做的是始终拥有原始图像的副本，并且每次更改值时，都会重新应用亮度校正。

因此，撤消添加 100 操作的方法不是减去 100，而是将亮度校正值设置为 0。这就是图像编辑程序的工作量，您有一个滑块，当您在滑块窗口中更改值时，您可以如果将其设置为 0，则始终获得原始图像，但是一旦“应用”校正，就无法撤消，当您重新打开滑块窗口时，“0”现在是先前过滤的图像。

因此，您要么在某处保留图像的备份和brightnesCorrection 值，并且每次值更改时，您都在图像上重新应用校正，或者您只需要接受您将无法恢复的事实图像恢复到昔日的辉煌xD（至少没有这种亮度校正，不确定是否有更好的方法）。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T19:01:51.503

由于值的舍入和钳位的事实，对图像的许多操作是不可逆的。

您的每个颜色通道`p[i]`都可能是字节类型？如果是这样，则只能存储 0 到 255 之间的值。如果将 100 添加到例如 223 中，则最终将得到 323，即无法保存在 1 个字节中的值。这应该会导致溢出到 67，或者它被限制为 255（可能的最大数字）。减去 100 不会恢复 223，但会得到 155。

而不是添加偏移量，您应该尝试将颜色相乘。但这已被 AngelCastillo 的回答所涵盖。（在那里你也会丢失信息，但结果更好）

* * *

**对更新的反应**：

我的意思是，钳位值（例如您的实际实现）会导致数据丢失。就像上面解释的例子一样，一个太大的值变成了 255。所以再次减去 100 会将所有颜色设置为 155，原始颜色为 155**或更大**。较亮颜色 (>155) 的信息丢失。

在其他情况下（对比度和伽玛变化），您也会丢失信息，因为四舍五入会将以前的不同颜色设置为相同的值。

避免这种情况的唯一方法是使用具有每个频道更多信息的其他格式。例如 >16 位有符号整数或浮点数。我怀疑您的画布是否可以选择这样做，因此您需要保留自己的背景副本（具有更高的值范围）。对您的副本进行所有转换，然后只显示夹在画布上的图像。

# c# - 在新的 VS 选项卡中打开应用的 VS2012 插件

> ID：13939525
> 
> 赞同：1
> 
> 时间：2012-12-18T18:51:08.223
> 
> 标签：c#, visual-studio-2012

有没有办法让 VS2012 插件在新的 VS 选项卡中打开应用程序？VS 选项卡是指单击解决方案资源管理器中的项目时打开的相同选项卡。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:27:39.000

为了使您的应用程序出现在 VS2012 文档选项卡中，您必须编写一个实现文档窗口的 Visual Studio 扩展。Visual Studio [SDK](http://www.microsoft.com/en-us/download/details.aspx?id=30668)、其[文档](http://msdn.microsoft.com/en-us/library/vstudio/bb166441.aspx)以及 SDK 和[MSDN 代码](http://code.msdn.microsoft.com/site/search?query=vsx&f%5B0%5D.Value=vsx&f%5B0%5D.Type=SearchText&ac=8)中的示例应该可以帮助您实现它。

# javascript - Google Chart 未使用 AJAX 调用呈现

> ID：13939528
> 
> 赞同：1
> 
> 时间：2012-12-18T18:51:19.347
> 
> 标签：javascript, jquery, google-visualization

我有以下代码应该使用 Google Chart API 呈现一个简单的面积图，但我无法让它与 AJAX 调用（Python 后端）一起使用。调用（统计）的返回如下：

```
[
  ['2012-09-17',1000,400],
  ['2012-09-18',1170,460],
  ['2012-09-19',660,1120],
  ['2012-09-20',1030,540]
] 
```

我得到的错误是：

```
Uncaught Error: Argument given to addRows must be either a number or an array 
```

有什么明显是错误的吗？我觉得这是一个 javascript 对象问题，但不知道从哪里开始。谢谢！

下面是 HTML/javascript。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title></title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = new google.visualization.DataTable();
      data.addColumn('string', 'Year');
      data.addColumn('number', 'Quantity');
      data.addColumn('number', 'Sales');

      var options = {
        title: 'Company Performance',
        hAxis: {title: 'Year', titleTextStyle: {color: 'red'}},
        legend: {position: 'in'},
      };

      $.ajax({
        type: 'POST',
        url: "/loaddata",
        success: function(stats) {
          var vals = stats;
          data.addRows(vals); 
          var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
          chart.draw(data, options);         
        },
      });  
  }

</script>
</head>

<body>
     <div id="chart_div" style="width: 800px; height: 450px;"></div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:11:21.847

我只能建议您按照与[此 Google 示例](https://developers.google.com/chart/interactive/docs/php_example)中相同的方式执行此操作，将 Python 脚本中的整个 JSON 数据直接归因于 Javascript 变量：

```
var jsonData = $.ajax({
                    url: "/loaddata",
                    dataType:"json",
                    async: false
               }).responseText; 
```

# deployment - Websphere 8.5：根异常是 org.eclipse.jst.j2ee.commonarchivecore.internal.exception.DeploymentDescriptorLoadException：WEB-INF/web.xml

> ID：13939529
> 
> 赞同：10
> 
> 时间：2012-12-18T18:51:20.453
> 
> 标签：deployment, websphere, websphere-8

尝试使用 jacl 从 ant ask 部署带有 websphere 的 ear 时出现以下错误：

```
[wsadmin] WASX7017E: Exception received while running file "C:\...\AppData\Local\Temp\wsant6857788060872488512jacl"; exception information: com.ibm.websphere.management.application.client.AppDeploymentException: com.ibm.websphere.management.application.client.AppDeploymentException:  [Root exception is org.eclipse.jst.j2ee.commonarchivecore.internal.exception.DeploymentDescriptorLoadException: WEB-INF/web.xml] 
```

当我尝试从 websphere 控制台部署 ear 时，我得到：

```
The following exception occurred. Check log for details. 
com.ibm.websphere.management.application.client.AppDeploymentException: [Root exception is org.eclipse.jst.j2ee.commonarchivecore.internal.exception.DeploymentDescriptorLoadException: WEB-INF/web.xml] 
```

机器详细信息：Win7x64，WebSphere 8.5 x86，使用 oracle jdk 6u30 x86（也用 x64 测试过）。

其他人已经能够让安装程序为他们工作。WebSphere 连接信息是正确的，因为其他脚本正确地更新了共享库。我很困惑为什么它可以在其他机器上运行，而不是在这台机器上运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T23:28:52.927

经过大量搜索（甚至发布了类似问题的赏金），我发现问题是 web.xml 中的评论。

我很幸运有一个没有评论但工作的源分支，而另一个确实有评论但坏了的分支。来自不同分支的不同安装程序允许安装程序在某些机器上工作，而另一个分支安装程序在我的机器上中断。

删除评论允许 WebSphere 的验证器克服该错误...有趣的东西...将报告给 WebSphere 人员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-09T17:30:44.963

请检查 ear 中具有正确 war 文件名的 application.xml 文件，并检查 ejb 模块 jar 名称。如果 war 或 ejb jar 文件名不匹配，您将收到类似的错误。我的情况是在 application.xml 中错误指定的 war 文件名有问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-14T14:08:52.093

我也发生了同样的错误，但问题出在 application.xml 而不是 web.xml，application.xml 和 web.xml 之间的规范不一致。Web 3.0、J2EE 1.4 应该是 Java EE 6。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-27T18:15:51.527

就我而言，我做了这些步骤： -

1.  去耳朵

2.  右键单击-> 选择属性。

3.  单击部署程序集

4.  将 -WebApps 添加/删除到 EAR。

5.  单击未识别的项目。首先将其删除并重新添加。

    ![在此处输入图像描述](../Images/3fc60852db8b84a3a23835ccf2cbb234.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-14T18:24:49.203

在这个问题上花了一些时间，我终于发现web.xml中有一个**重复**的会话配置标签。它发生在我们的一位同事正在合并一些代码时。

最好您可以验证 web.xml，**类似的重复标签可能会导致此问题。**

```
 <session-config>
        <session-timeout>
            15
        </session-timeout>
    </session-config 
```

# android - 将 XML 中可绘制按钮的大小设置为图像大小

> ID：13939531
> 
> 赞同：2
> 
> 时间：2012-12-18T18:51:38.287
> 
> 标签：android, button, size, drawable

我正在尝试使用文本和 drawableTop 创建按钮。我希望 drawableTop 成为存储图像的常规尺寸，因为我对不同的屏幕尺寸有不同的尺寸。将高度和宽度设置为 match_parent 似乎是基于文本，并将它们设置为 dip 值会更改按钮的大小，但不会更改图像。我尝试了 scaleX 和 scaleY，但这也改变了文本的大小，这是我不想要的。

我正在使用以下内容，但图像看起来比它保存的要小得多

```
<Button
    android:id="@+id/button"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/label"
android:drawableTop="@drawable/my_image" /> 
```

无论如何创建一个带有自动设置为全尺寸的图像的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:58:59.557

您可以使用普通的 ImageView 并为其设置 onClickListener 或 XML onClick 属性。

如果您想要不同的状态（例如按下和未按下），您可以使用 xml 中定义的可绘制对象来设置它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:50:20.827

在文档[TextView#setCompoundDrawablesWithIntrinsicBounds](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds(int,%20int,%20int,%20int))中，它说：

```
The Drawables' bounds will be set to their intrinsic bounds. 
```

但是，按钮未将可绘制对象设置为完整大小的原因是我们将图像放置在应用程序项目中的错误 res/drawable 文件夹中。您可以尝试将图像放到其他可绘制文件夹中，例如 drawable-xhdpi、drawable-hdpi 等。图像会以不同的大小显示。请查看此文档[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)。

# c# - WebClient - 拉取“DOM 快照数据”与“源”

> ID：13939532
> 
> 赞同：0
> 
> 时间：2012-12-18T18:51:42.263
> 
> 标签：c#, asp.net, .net-4.0, webclient

我正在尝试使用 C# 提取 DOM 快照数据（相当于在 Chrome 中执行检查元素）。这是我的代码：

```
string url = "http://someurl";
HtmlDocument htmlDoc = new HtmlDocument();
htmlDoc.Load(new WebClient().OpenRead(url));
this.html = htmlDoc; 
```

问题是它只是拉取源，而不是 DOM 快照。如何在 C# 中提取 DOM 快照？

# php - 有关按位运算符和 foreach 循环的指南

> ID：13939535
> 
> 赞同：1
> 
> 时间：2012-12-18T18:51:53.227
> 
> 标签：php, foreach, bit-manipulation

我打算制作一个动态复选框表单，将每个 POST 绑定到特定的按位值，并最终计算按位数字的总数。我想不出什么好的方法。谁能指导我？

```
<html>
<head></head>
<body>
<form method="post" action="test.php"/>
<?php

    $fields = array('writePost','readPost','deletePost','addUser',
                      'deleteUser'); 

    $perms = array(
        'writePost' => 1,
        'readPost' => 2,
        'deletePost' => 4,
        'addUser' => 8,
        'deleteUser' => 16
  );

    $results = array();

     foreach($fields as $field)
     {
          echo "<input type='checkbox' name='".$field."' value='".$field."' />";
          echo "<label for='".$field."'>".$field."</label>";
          echo "<br/>";

     }

 if(isset($_POST['submit']))
 {
     foreach($_POST as $posts)
     {
       $posts = $results;

          //
          $total_key = 0;
          $array_key = 1;

          foreach ($perms as $key)
          {

            if (!$key=='read')
              {
              $array_key = $array_key*2;
              }else{
              $array_key  = $array_key+$total_key;
            }

            foreach ($posts as $perms)
            {

              $array_key = $post;
            }

        }
    }

    var_dump($results);

}

var_dump($fields);

?>
<input type="text" name="name" value="name"/>
<input type="submit" name="submit" value="submit"/>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:22:50.890

我认为您希望输入的值是数字而不是字段名称：

```
echo "<input type='checkbox' name='nums[]' value='".$perms[$field]."' />"; 
```

之后，您将希望从可能的最高数字开始并倒退：

```
$n = sizeof($perms)-1;
$total = array_sum($_POST['nums']);
for($i=$n;$i>0;$i--)
{
    $pow = pow(2, $i);
    if ($pow > $total)
    {
        //$fields[$i] is checked
        $total-=$pow;
    }
} 
```

但实际上，如果您想要一种不那么令人困惑的方法，您可以将检查的值放入一个数组并检查它们是否在 PHP 中设置。

# java - Java 单线程 RMI 或替代方案

> ID：13939538
> 
> 赞同：1
> 
> 时间：2012-12-18T18:52:06.037
> 
> 标签：java, rmi, rpc

Lotus Notes Java 库仅在 32 位 JVM 中运行，我需要从我的 64 位 JVM 应用程序中调用它，所以我编写了一个 RMI 桥：64 位应用程序运行 32 位 RMI 服务器，并与32 位服务器进行 Lotus Notes 调用。

Lotus Notes 要求每个线程（将调用任何 Lotus Notes 函数）调用 lotus.domino.NotesThread.sinitThread()；在调用任何其他 Lotus Notes 函数之前，并在最后通过调用 un-init 函数进行清理，这些调用可能很昂贵。

由于 RMI 不保证单线程执行，如何将所有请求通过管道传输到已为 Lotus Notes 初始化的单个线程？我也对其他 RPC/“桥”方法持开放态度（更喜欢使用 Java）。目前，我必须确保我定义的每个 RMI 函数调用都确保其线程已初始化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:46:34.080

使用[单线程执行器服务](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)，每次要调用lotus notes方法时，向执行器提交一个任务，获取返回的Future，从Future中获取方法调用的结果。

例如，要调用方法`Bar getFoo()`，您将使用以下代码：

```
Callable<Bar> getFoo = new Callable<Bar>() {
    @Override
    public Bar call() {
        return lotuNotes.getFoo();
    }
};
Future<Bar> future = executor.submit(getFoo);
return future.get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:10:17.627

getName() 是一个简单的示例，因此每个代码都得到了这种处理（这极大地使代码膨胀，但它确实有效！）

```
 @Override
    public String getName() throws RemoteException, NotesException {
        java.util.concurrent.Callable<String> callableRoutine =
                new java.util.concurrent.Callable<String>() {

                    @Override
                    public String call() throws java.rmi.RemoteException, NotesException {
                        return lnView.getName();
                    }
                };
        try {
            return executor.submit(callableRoutine).get();
        } catch (Exception ex) {
            handleExceptions(ex);
            return null; // not used
        }
    }

/**
 * Handle exceptions from serializing to a thread.
 *
 * This routine always throws an exception, does not return normally.
 *
 * @param ex
 * @throws java.rmi.RemoteException
 * @throws NotesException
 */
private void handleExceptions(Throwable ex) throws java.rmi.RemoteException, NotesException {
    if (ex instanceof ExecutionException) {
        Throwable t = ex.getCause();
        if (t instanceof java.rmi.RemoteException) {
            throw (java.rmi.RemoteException) ex.getCause();
        } else if (t instanceof NotesException) {
            throw (NotesException) ex.getCause();
        } else {
            throw new NotesException(LnRemote.lnErrorRmi, utMisc.getExceptionMessageClean(t), t);
        }
    } else {
        throw new NotesException(LnRemote.lnErrorRmi, utMisc.getExceptionMessageClean(ex), ex);
    }
} 
```

# python - py.test 不收集不是从“对象”继承的测试

> ID：13939543
> 
> 赞同：6
> 
> 时间：2012-12-18T18:52:38.420
> 
> 标签：python, oop, inheritance, pytest

我正在尝试使用测试所需的不同设置创建**基**类。我希望我的所有测试都继承自这个**基**类。作为跑步者，我使用[py.test](http://pytest.org)。

但是当我尝试这样做时，py.test 不会收集从**Base**类继承的这些测试，因此它不会运行它们。在文档中没有找到任何有用的信息。

也许有人以前遇到过这样的问题？有任何想法吗？

谢谢。

**PS当测试从对象**继承时一切正常。Py.test 看到它们并正确运行。

代码示例：

我的基类：

```
class BaseClass(object):
"""BaseClass"""
def __init__(self):
    super(BaseClass, self).__init__()
    self.bla = 'bla' 
```

我的测试课：

```
import pytest
from base_class import BaseClass

class TestSmth(BaseClass):
    def test_test(self):
        test_instatnce = TestSmth()
        print test_instatnce.bla

if __name__ == '__main__':
    pytest.main([__file__, '-v']) 
```

输出：

```
============================= test session starts ==============================
platform darwin -- Python 2.7.2 -- pytest-2.3.3 -- /usr/bin/python
collecting ... collected 0 items

===============================  in 0.01 seconds ===============================
[Finished in 0.4s] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T22:03:22.213

我不认为你可以使用`__init__`. 如果您要设置（或初始化）类，您可以执行以下操作：

```
# base_class.py

class BaseClass(object):
"""BaseClass"""

    @classmethod
    @pytest.fixture(scope = "class", autouse = True)
    def setup(self):
        self.bla = 'bla'

#test_class.py

import pytest
from base_class import BaseClass

class TestSmth(BaseClass):
    def test_test(self):
        print self.bla

if __name__ == '__main__':
    pytest.main([__file__, '-v']) 
```

同样要初始化`TestSmth`类，您可以创建另一个“方法”并用它来装饰它`@pytest.fixture`。但是，您必须记住，那些**“初始化方法”是按字母顺序调用的**。

# c - C中的串行输出错误

> ID：13939544
> 
> 赞同：-2
> 
> 时间：2012-12-18T18:52:39.440
> 
> 标签：c, serial-port, posix

我正在尝试通过 C 中的串行线路发送数据。我怀疑我的问题在于我设置的选项，但我无法弄清楚。

在下面的程序中，我发送字节 0x79、0x80、0x81，但在另一端，我收到 0x86、0x06、0x00

```
#include <stdio.h>   /* Standard input/output definitions */
#include <string.h>  /* String function definitions */
#include <unistd.h>  /* UNIX standard function definitions */
#include <fcntl.h>   /* File control definitions */
#include <errno.h>   /* Error number definitions */
#include <termios.h> /* POSIX terminal control definitions */

/*
 * 'open_port()' - Open serial port 1.
 *
 * Returns the file descriptor on success or -1 on error.
 */
char SERIAL_DEVICE[] = {"/dev/ttyUSB0"};
struct termios options;

void open_port(int* fd)
{
    *fd = open(SERIAL_DEVICE, O_RDWR | O_NOCTTY | O_NDELAY);

    if (*fd == -1){
        /* Could not open the port. */
        perror("open_port: Unable to open serial port - ");

    } else 
        fcntl(*fd, F_SETFL, 0);

}

void send(int message[], size_t bytes_to_send, int* fd){
    int n,i;

    for(i=0;i<bytes_to_send;i++){
        printf("%x", message[i]);
    }
    n = write(*fd, message, bytes_to_send);
    if (n < 0)
      fputs("write() failed!\n", stderr);
}

int main(){

    int fd; /* File descriptor for the port */

    int message[] = {0x79, 0x80, 0x81};

    // load the options structure with the cuurent port options
    tcgetattr(fd, &options);        
    cfsetispeed(&options, B19200); // set in baudrate
    cfsetospeed(&options, B19200); // set out baudrate
    options.c_cflag |= (CLOCAL | CREAD);

    // No Parity 8N1
    options.c_cflag &= ~PARENB;
    options.c_cflag &= ~CSTOPB;
    options.c_cflag &= ~CSIZE;
    options.c_cflag |= CS8;
    options.c_iflag &= ~(IXON | IXOFF | IXANY);
    options.c_iflag |= (IGNPAR | ISTRIP);

    //raw input and output
    options.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG);
    options.c_oflag &= ~OPOST;

    // Flush buffers and set new options
    tcsetattr(fd, TCSAFLUSH, &options);

    open_port(&fd);

    int array_length = sizeof(message) / sizeof(message[0]);    
    int i;
    for(i=0;i<array_length;i++){
        printf("%x", message[i]);
    }

    send(message, array_length, &fd);

    close(fd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:04:16.230

你所有的 termios 东西都是无效的。您正在更改随机文件描述符（`fd`未初始化）的终端特征，因为您在 AFTER 之后打开了串行端口`tcsetattr`。如果您检查`tcgetattr`and`tcsetattr`调用上的错误，您就会发现这一点。此外，如果您注意编译器发出的警告，您就会发现它。

然后，您的功能有两个问题`send`：

*   `send`它与系统调用同名。这在技术上是可以的，因为您`send`覆盖了`send`from libc 并且一切正常，但它令人困惑（当我第一次阅读代码时，我认为您正在使用`send`系统调用）并且很危险（如果您`send`在程序的其他地方使用系统调用）。
*   它将一个`int`s 数组传递给`write`，但`write`需要一个字节数组。结果，当您尝试写入 0x79 时，最终会写入 4 个字节 0x00 0x00 0x00 0x79（对于 big-endian 32 位平台）或 0x79 0x00 0x00 0x00（对于 little-endian 32 位平台）。

# javascript - Javascript正则表达式匹配test123中的“123”

> ID：13939548
> 
> 赞同：1
> 
> 时间：2012-12-18T18:52:56.243
> 
> 标签：javascript, regex

在 Javascript 中：

我有一个句子“这是一个test123”，我需要匹配单词test之后的一组数字。

除了使用组之外，还有其他方法吗？

这就是我得到的，但我想在不使用组的情况下完成这项工作（如果可能的话）

```
var str = str.match(/test.([0-9]{1,3})/) 
```

基本上我只需要说“任何以'test'开头的数字组”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:56:53.703

简单的单行代码（但组，但简单）：

```
"this is a test123".replace(/.*test(\d{1,3}).*/, "$1");  // "123" 
```

或另一个版本`match`：

```
("this is a test123".match(/test(\d{1,3})/) || []).pop();  // "123" 
```

还有一个没有正则表达式的单行：

```
parseInt("this is a test123".split("test")[1], 10);  // 123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:10:58.020

如果您不喜欢这些组，您可以在一行中使用 2 个简单的功能：

```
 str = str.match(/test[0-9]{1,3}/).toString().replace('test', ''); 
```

# java - 正则表达式在空格和其他字符上拆分字符串

> ID：13939550
> 
> 赞同：2
> 
> 时间：2012-12-18T18:53:01.747
> 
> 标签：java, regex, string, split

```
Pattern p = Pattern.compile("(.+)\\s(.+)\\s(.?)$");
Matcher m = p.matcher(line);
System.out.println("Method:");  
System.out.println(m.group(1));
System.out.println(m.group(2)); 
```

上面的代码是我用来分割这个字符串的代码：

```
method(public, static, void) main(String[] args){ 
```

我希望能够进入`method(public, static, void)`一个字符串和`main(String[] args)`另一个字符串。我不想要最后一个，并且和`{`之间可能有空格。`)``{`

到目前为止，我的代码是这样做的：

```
Method:
method(public, static, void) main(String[]
args){ 
```

我不擅长正则表达式。（我的代码目前不处理 last `{`，但我可以解决这个问题。）问题是我无法让线路按照我想要的方式拆分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:01:32.473

你不需要`Pattern`和`Matcher`这里。您应该对字符串使用`String#split()`方法on ，并获取数组的前两个元素：-`split``)`

```
String str = "method(public, static, void) main(String[] args){";

String[] parts = str.split("\\)");

System.out.println(parts[0]);  // method(public, static, void
System.out.println(parts[1]);  // main(String[] args 
```

但是，您可以看到的问题是，您的字符串不会包含最后一个`)`。

要在数组元素中包含分隔符，您可以在您的正则表达式上使用*look-behind*： - `"(?<=\\))"`。`empty character`现在，这将在前面分割你的字符串`)`。

**这就是你需要的： -**

```
String[] parts = str.split("(?<=\\))");  // split on empty character after )
System.out.println(parts[0]);
System.out.println(parts[1]); 
```

**输出： -**

```
method(public, static, void)
 main(String[] args) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:04:21.353

这

```
String str = "method(public, static, void) main(String[] args){";
Pattern pattern = Pattern.compile("\\p{Alnum}+\\([^)]*?\\)");
Matcher matcher = pattern.matcher(str);
while (matcher.find()) {
    System.out.println(matcher.group());
} 
```

产生以下输出：

```
method(public, static, void)
main(String[] args) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:10:11.333

如果您匹配：

```
/([^\(\)]+\([^\)]+\))([^\(\)]+\([^\)]+\))/ 
```

你应该得到你所需要的，`$1`并且`$2`

# ruby-on-rails - 如何记住 Facebook 被拒绝的权限？

> ID：13939551
> 
> 赞同：1
> 
> 时间：2012-12-18T18:53:03.180
> 
> 标签：ruby-on-rails, facebook

在我的应用程序中，我使用 Facebook connect，直接使用用户的 Facebook 帐户登录，一切都很好，但是，因为我要求获得 publish_stream 权限；一些用户拒绝此权限，问题是我如何记住哪些权限被拒绝？

我需要知道这些信息，否则，用户每次使用他的 Facebook 帐户登录时都会拒绝 publish_stream 权限！

我需要知道这样我就不会再问他了..有什么想法吗？

# java - Java：为滑块添加“接受”按钮

> ID：13939552
> 
> 赞同：1
> 
> 时间：2012-12-18T18:53:19.807
> 
> 标签：java, swing, jbutton, jslider

我正在尝试为我的滑块添加一个按钮。我想要的是当我单击按钮时，滑块的值将保存在变量中。但是我在使用 ActionListener 时总是遇到错误。任何人都可以帮忙吗？这是我的滑块的代码：

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.util.Hashtable;

public class SliderSample {

    public static void main(final String args[]) {
        Runnable runner = new Runnable() {
            public void run() {
                JFrame frame = new JFrame("Sample Sliders");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                ChangeListener listener = new SliderChangeListener();

                JSlider js4 = new JSlider(1,5);
                Hashtable<Integer, JComponent> table = new Hashtable<Integer, JComponent>();
                table.put(1, new JLabel("1"));
                table.put(2, new JLabel("2"));
                table.put(3, new JLabel("3"));
                table.put(4, new JLabel("4"));
                table.put(5, new JLabel("5"));
                js4.setLabelTable(table);
                js4.setPaintLabels(true);
                js4.addChangeListener(listener);
                frame.add(js4, BorderLayout.CENTER);
                frame.setSize(400, 300);
                frame.setVisible(true);
            }
        };
        EventQueue.invokeLater(runner);
    }

    public static class SliderChangeListener implements ChangeListener {
        public void stateChanged(ChangeEvent changeEvent) {
            Object source = changeEvent.getSource();
            JSlider theJSlider = (JSlider)source;
            if (!theJSlider.getValueIsAdjusting()) {System.out.println ("Slider changed: " +         theJSlider.getValue());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:10:55.933

此时不能使用“this”，因为您正在处理您所在的 Runnable。像这样更改它：

```
public class SliderSample {
    private JSlider js4 = new JSlider(1, 5);
    private int state = js4.getValue();

    public static void main(final String args[]) {
         SwingUtilities.invokeLater(new Runnable() {
              @Override
              public void run() {
                  new SliderSample();
              }
         });
    }

    public SliderSample() {
        JFrame frame = new JFrame("Sample Sliders");
        ...

        JButton b = new JButton("Save");
        b.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                state = js4.getValue();
                System.out.println("new state: " + state);
            }
        });

        Hashtable<Integer, JComponent> table = new Hashtable<Integer, JComponent>();
        ...
        frame.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:33:17.870

我已经修改了您的代码。添加了一个按钮，可将滑块中的值保存到变量中。

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.util.Hashtable;

public class SliderSample {
    private static JFrame frame = new JFrame("Sample Sliders");
    private static JSlider slider = new JSlider(1,5);
    private static JButton button =new JButton("Button");
    private static int saveNumberHere;

    public static void main(final String args[]) {
        Runnable runner = new Runnable() {
            public void run() {

                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                Hashtable<Integer, JComponent> table = new Hashtable<Integer, JComponent>();
                table.put(1, new JLabel("1"));
                table.put(2, new JLabel("2"));
                table.put(3, new JLabel("3"));
                table.put(4, new JLabel("4"));
                table.put(5, new JLabel("5"));
                slider.setLabelTable(table);
                slider.setPaintLabels(true);

                ChangeListener sliderListener = new SliderChangeListener();
                slider.addChangeListener(sliderListener);
                ChangeListener buttonListener = new ButthonChangeListener();
                button.addChangeListener(buttonListener);

                frame.add(slider, BorderLayout.CENTER);
                frame.add(button, BorderLayout.SOUTH);
                frame.setSize(400, 300);
                frame.setVisible(true);
            }
        };
        EventQueue.invokeLater(runner);
    }
    public static class SliderChangeListener implements ChangeListener {
        public void stateChanged(ChangeEvent changeEvent) {
            if (!slider.getValueIsAdjusting()) {
                System.out.println ("Slider changed: " +         slider.getValue());
            }            
        }
    }

    public static class ButthonChangeListener implements ChangeListener{
        public void stateChanged(ChangeEvent changeEvent) {
            saveNumberHere = slider.getValue();
        }
    }
} 
```

# jquery - JSON / JSONP - 适用于本地 json 文件，但不适用于实时外部 URL

> ID：13939554
> 
> 赞同：0
> 
> 时间：2012-12-18T18:53:24.287
> 
> 标签：jquery, ajax, jsonp, getjson

我有一个场景，我需要从我的客户端提供的外部 Web 应用程序显示一些相当简单的数据（使用 JQUERY），该应用程序提供格式良好的 json（使用 jsonlint.com 验证）。这是我第一次使用 json，当我使用 dataType jsonp 和 LIVE url 时，在名称开头的第一个引号上出现“无效标签”错误：JSON 数据中的值对......但是当我复制它时相同的 json 并将其保存在本地并将 jsonp 更改为 json，它可以工作，我可以在 DOM 中以任何我想要的方式操作数据并完成我想要的。

我需要做什么才能使实时 URL json 工作？

```
 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>JSON Test</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script>
$.ajax({
type : 'GET',
//url : 'jsondata2.js',
url: 'http://.....'    //MY LIVE URL HERE.   NOTE, THE LOCAL FILE ABOVE THAT DOES WORK (JSON NOT JSONP) IS JUST A COPY/PASTE OF THE DATA THAT THIS URL DISPLAYS IN BROWSER.  ,
dataType : 'jsonp',
success : function(jsonData) {
alert(jsonData.PropertyName);
},
error : function() {
alert('Error loading the JSON data');
}
});
</script>
</head>
<body></body>
</html> 
```

这是json数据：

```
{
"PropertyID": 1468,
"PropertyName": "AG Test One",
"Listing Information": {
    "Availability": "Not Specified",
    "Pricing Information": "For Sale, Price: 1.00 (Set Price per Acre)"
},
"Location": {
    "City": "ZZ",
    "County": "ZZ Test County",
    "Municipality": "Within City Limits",
    "State": "SC",
    "Tax Map ID": "123-123-123",
    "ZipCode": "22222"
},
"Physical Details": {
    "Certified Property": false,
    "Minimum Divisible Acreage": 0,
    "Site Comments": null,
    "Site Improvements": "Forested",
    "Surrounding Land Use": [
        "North: Airport / Port / Intermodal Facility",
        "South: Waterway (River / Lake)",
        "East: Utility (Easements / Substations)",
        "West: Correctional Facility"
    ],
    "Total Site Size": 500,
    "Zoning": null
},
"Transportation": {
    "Barge Access": false,
    "Name of Rail Carrier Providing Service": "None specified",
    "Nearest Commercial Airport": "None Specified",
    "Nearest Interstate": "None Specified",
    "Nearest Sea Port": "None Specified",
    "Railway Access": false,
    "Runway Access": false
},
"Utilities": {
    "Diameter of Waste Water Main": 0,
    "Diameter of Water Main": 0,
    "Distance To Electric Provider": 1,
    "Distance to Natural Gas Provider": 0,
    "Distance to Sewer Service": 0,
    "Distance to Water Service": 0,
    "Electric Provider": "Undetermined",
    "Fire Insurance Rating": "1",
    "Natural Gas Provider": null,
    "Telecommunications Providers": null,
    "Type of Sewer": "",
    "Water Service Provider": "Undetermined",
    "Water Water Service Provider": "Undetermined"
}
} 
```

我还尝试了 getJSON 方法......并在本地和外部 url 场景中获得相同的结果：

```
$(document).ready(function() {
            $.getJSON('jsondata2.js', function(data) {
                //$.getJSON('SAME LIVE URL HERE....', function(data) {
                var output = "<ul>";
                output += "<li>" + data.PropertyName + "</li>";
                output += "</ul>";
                document.getElementById("placeholder").innerHTML = output;
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:56:27.887

对于 JSONP，您的服务器需要输出

```
callback(JSONSTRING) 
```

而不仅仅是 JSON 字符串！jQuery 将使用 $.ajax() 的成功回调自动执行这段 Javascript 代码

# python - 向 matplotlib 输入任意数量的文件

> ID：13939558
> 
> 赞同：0
> 
> 时间：2012-12-18T18:53:43.700
> 
> 标签：python, matplotlib

我有以下 matplotlib python 代码，该代码从仅包含两列 x,y 值的文件中生成图：

```
#!/usr/bin/env python
import string
import pylab
from pylab import *
import sys,os

narg=len(sys.argv)
print narg
if narg != 7:
    print "@Usage: python get_pic.py results_file output_filename xmin xmax ymin ymax"
    sys.exit()

res1 = sys.argv[1] 
res_file_1 = open(res1,"r")
fileoutput = sys.argv[2]
xmin =float( sys.argv[3])
xmax =float( sys.argv[4])
ymin =float( sys.argv[5])
ymax =float( sys.argv[6])

x1=[]
y1=[]

for line in res_file_1.readlines():
    ll=string.split(line)
    x1.append(float(ll[0]))
    y1.append(float(ll[1]))

fig = plt.figure()
ax = fig.add_subplot(111)
# ax.set_yscale('log')
# ax.set_xscale('log')
ax.set_xlabel('NSTEPS')
ax.set_ylabel("RMSD")
ax.set_xlim(xmin,xmax)
ax.set_ylim(ymin,ymax)
ax.plot(x1,y1,color='blue')

pylab.legend((
r'AVERAGE',), shadow = True, loc = 2,numpoints = 1)
ltext = pylab.gca().get_legend().get_texts()
pylab.setp(ltext[0], fontsize = 13)
plt.savefig(fileoutput,dpi=300)
plt.show() 
```

我现在面临的问题是我需要绘制任意数量的文件（从 5 到 50）。我从以前的代码开始使用幼稚的方法，告诉脚本打开 5 个不同的输入文件等等，但是它变得一团糟，需要根据输入文件的数量来更改代码，此外，它变得难以处理50 个文件。那么，我怎样才能最小限度地修改我以前的代码，以便它可以读取任意数量的文件呢？

PS：我想要同一个图中的所有图，例如这个[例子](http://ars.els-cdn.com/content/image/1-s2.0-S0010465507004614-gr002.jpg)。PS2.：另外，如果连续的地块可以随机具有不同的颜色或遵循彩虹比例。

# c# - 使用 https 请求时，vs2012 中的 Asp.Net 调试失败

> ID：13939560
> 
> 赞同：0
> 
> 时间：2012-12-18T18:53:44.393
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, visual-studio-2012

我今天开始了这个问题：

[用于 asp.net 的 Visual Studio 2012 调试无法使用 IIS7](https://stackoverflow.com/questions/13931640/visual-studio-2012-debug-for-asp-net-not-working-using-iis7)

错误是当我尝试在启用了 asp net 调试的情况下从 vs2012 运行项目时，出现以下错误：

```
Unable to start debugging on the web server. 
The web server is not configured correctly. 
See help for common configuration errors. 
```

经过这么多尝试，我决定创建一个新的 Asp Net Mvc 4/c# 应用程序，我可以让 asp net debug 在 Visual Studio 2012 中工作。

所以我决定将一个文件一个文件地从一个项目复制到另一个项目，以检查问题从哪里开始。我发现当我启用 ssl 连接时，调试停止工作。

**对于我的申请**

*   我已设置我的应用程序所需的 SSL 和客户端证书
*   启用 http 和 https 协议

此外，在 VS2012 项目属性中，我已将项目 URL 更改为

```
 https://localhost/Gedi 
```

这是我的项目的网址。

如果我能在这里找到解决方案，那么我会更新另一篇文章，我相信这对将来的参考非常有用。

为了在使用 https 请求时启用 asp.net 调试，我需要更改任何其他特殊配置吗？

编辑1：

我的 web.config 文件

```
<compilation batch="true" debug="true" defaultLanguage="C#" explicit="false"
maxBatchGeneratedFileSize="10000" maxBatchSize="10000" 
numRecompilesBeforeAppRestart="100" strict="false" 
tempDirectory="C:\Windows\Temp" urlLinePragmas="false"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:56:26.083

首先从最简单的 web.config 文件开始

您需要确保您的 web.config 文件包含：

```
<compilation debug="true" defaultLanguage="c#" /> 
```

当然，这取决于您的默认语言是什么。

# javascript - Chrome HTML5 画布缩放

> ID：13939566
> 
> 赞同：2
> 
> 时间：2012-12-18T18:54:07.580
> 
> 标签：javascript, html, google-chrome, canvas

根据我在 SO 和其他地方听到的消息，`ImageSmoothingEnabled`自 v22.0 以来，Chrome 中已启用画布上下文选项。我似乎无法让 chrome 尊重这一点，或者在 stackoverflow 上使用 Chrome（23.0 版）获取像素化图像的任何其他方法。无论我在 css 或 javascript 中尝试什么，在 Chrome 中绘制时，图像仍会被插值。例如，我试过

```
image-rendering: optimizeSpeed;             // Older versions of FF
image-rendering: -moz-crisp-edges;          // FF 6.0+
image-rendering: -webkit-optimize-contrast; // Webkit
image-rendering: optimize-contrast;         // Possible future browsers.
-ms-interpolation-mode: nearest-neighbor;   // IE 
```

和

```
var context = canvas.node().getContext("2d");
context.ImageSmoothingEnabled = false;
context.webkitImageSmoothingEnabled = false;
context.mozImageSmoothingEnabled = false; 
```

但是，这些设置确实适用于 Firefox。有谁知道这些天如何强制 chrome 像素化画布图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:03:55.777

以下代码适用于我（Chrome 24.0.1312.56，Windows 7）：

```
ctx.imageSmoothingEnabled = false;
ctx.webkitImageSmoothingEnabled = false;
ctx.mozImageSmoothingEnabled = false; 
```

# html - 在哪里列出波多黎各？

> ID：13939572
> 
> 赞同：3
> 
> 时间：2012-12-18T18:54:21.033
> 
> 标签：html, forms, states, countries

当在表格中列出国家和州时（无论是在 web 应用程序、操作系统应用程序、移动应用程序等中），应该在哪里列出波多黎各。在国家名单还是州名单？

波多黎各不是一个国家，但它不是一个州。波多黎各是美国领土和共同财富，他们使用美元。

[https://www.google.com/search?q=puerto+rico+state+or+country](https://www.google.com/search?q=puerto%20rico%20state%20or%20country)

那么，它应该与美国各州一起列出还是作为自己的国家或以其他方式列出呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:58:15.080

ISO 3166 下仍有一个国家/地区代码。因此，要回答您的问题，这取决于您的应用程序。

[http://www.iso.org/iso/home/standards/country_codes/iso-3166-1_decoding_table.htm](http://www.iso.org/iso/home/standards/country_codes/iso-3166-1_decoding_table.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:02:00.380

根据 USPS，它与美国有关，并显示为 PR：[USPS Abbreviations](https://www.usps.com/send/official-abbreviations.htm)

# javascript - 如何在数组项之间添加空格javascript

> ID：13939573
> 
> 赞同：25
> 
> 时间：2012-12-18T18:54:29.963
> 
> 标签：javascript, arrays, list, split, tostring

我是 javascript 的初学者，所以我很感激任何帮助/建议。

我的问题是我试图弄清楚如何在 times[] 数组中的项目之间添加空格，该数组保存每个电影对象的放映时间值。我试图用逗号（“，”）分割，但这不起作用。当我尝试在（“pm”）进行拆分时，它起作用了。我还想出了一种在放映时间值本身中添加空间的方法，但我认为必须有更好的方法来实现它。有什么想法吗？谢谢！

```
window.onload = init;

function Movie(title, year, showtimes) { 
  this.title = title;
  this.year = year;
  this.showtimes = showtimes;
  }

  function init() {
    var darkKnight = new Movie("The Dark Knight Rises", "2012", ["1pm,", "2pm,", "3pm,"]);
    var takeThisWaltz = new Movie ("Take This Waltz", "2012", ["4pm", "5pm","6pm"]);
    var watchmen = new Movie("Watchmen", "2009", ["7pm","8pm","9pm"]); 

    var movieList = [darkKnight, takeThisWaltz, watchmen]

    for(var i = 0; i < movieList.length; i++) { 
    var theObj = movieList[i];
    var times = [movieList[i].showtimes] 
      for(var j = 0; j < times.length; j++) {
      var str = times[i];     
      } 
    makeResult();    }

    function makeResult() {             
    var list = document.getElementById("movieList"); 
    var li = document.createElement("li");          
    li.innerHTML = "title: " + movieList[i].title + " year: " + movieList[i].year + " showtimes: " + times[0].toString().split(",");
    list.appendChild(li); }

 } 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-18T18:58:32.223

该`array.join`函数采用一个可选`delimiter`参数，该参数将通过分隔符分隔元素。一个简单的例子：

```
var showtimes = ["1pm", "2pm", "3pm"];
var showtimesAsString = showtimes.join(', '); // gives "1pm, 2pm, 3pm" 
```

# ruby-on-rails - 如何将 Ruby 函数放入 SQLite3 查询中？

> ID：13939574
> 
> 赞同：2
> 
> 时间：2012-12-18T18:54:36.433
> 
> 标签：ruby-on-rails, ruby, methods, sqlite

我有一个需要放入 SQLite3 查询的函数。

我有以下方法：

```
def levenshtein(a, b)
  case
    when a.empty? then b.length
    when b.empty? then a.length
    else [(a[0] == b[0] ? 0 : 1) + levenshtein(a[1..-1], b[1..-1]),
      1 + levenshtein(a[1..-1], b),
      1 + levenshtein(a, b[1..-1])].min
  end
end 
```

我想做一个看起来像这样的查询：

```
@results = The_db.where('levenshtein("name", ?) < 3', '#{userinput}') 
```

我想`The_db`在名称列的值与用户输入之间的编辑距离小于的地方找到名称的值`3`。问题是我不知道如何在查询中使用 Ruby 函数。这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T21:39:52.003

看看[`create_function`方法](http://rdoc.info/github/luislavena/sqlite3-ruby/SQLite3/Database#create_function-instance_method)。您可以使用它来创建这样的自定义函数（您已经定义了`levenshtein`Ruby 方法）：

```
db.create_function "levenshtein", 2 do |func, a, b|
  func.result = levenshtein(a, b)
end 
```

然后，您可以在 SQL 中使用它：

```
# first set up some data
db.execute 'create table names (name varchar(30))'
%w{Sam Ian Matt John Albert}.each do |n|
  db.execute 'insert into names values (?)', n
end

#Then use the custom function
puts db.execute('select * from names where levenshtein(name, ?) < 3', 'Jan') 
```

在这个例子中，输出是

```
Sam
Ian
John 
```

我没有在 Rails 中测试过，但我认为它应该可以工作，查询字符串只是传递到数据库。您可以`db`使用[`ActiveRecord::Base.connection.raw_connection`](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/AbstractAdapter.html#method-i-raw_connection). （我不知道如何配置 Rails，以便所有 ActiveRecord 连接都定义了函数——如果你在控制器中添加函数，它似乎确实有效，但这并不理想）。

展示了如何做到这*一点*后，我不确定是否*应该*在网络应用程序中完成。您可能不想在生产中使用 Sqlite。`levenshtein`如果您在生产中使用例如具有自己功能的 Postgres（如[Tin Man 的回答](https://stackoverflow.com/a/13939629/214790)中所建议的那样），但想在开发中使用 Sqlite，它可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:58:23.177

如果您需要检索列的值以将其插入到 Ruby 函数中，那么您必须首先检索该值。

DBM 不能在你运行的代码中调用你的方法；您必须拥有该值，将其传递给您的方法，然后在辅助查询中使用结果。

或者使用内置了[Levenshtein 函数](http://www.postgresql.org/docs/8.3/static/fuzzystrmatch.html)的 DBM ，比如 PostgreSQL，或者在纯 SQL 中定义它。

# sql - MS-Access 2003 通过单击命令按钮触发追加查询

> ID：13939575
> 
> 赞同：1
> 
> 时间：2012-12-18T18:54:43.523
> 
> 标签：sql, vba, ms-access-2003

我有一个附加查询，我想通过单击命令按钮来触发。我的初始屏幕带有一个执行关闭和打开命令的命令按钮。我想在这个点击事件期间结合附加查询来执行。

我用于启动画面的 VBA

```
Option Compare Database

Private Sub SplCls_Click()
On Error GoTo Err_SplCls_Click

DoCmd.Close

stDocName = "Switchboard"
DoCmd.OpenForm stDocName

Exit_SplCls_Click:
Exit Sub

Err_SplCls_Click:
MsgBox Err.Description
Resume Exit_SplCls_Click

End Sub 
```

我知道它需要在 DoCmd.Close 和 DoCmd.OpenForm 之间进行。附加查询被命名为“qry_YOS” 任何关于这段代码的指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:19:22.137

使用 DAO 数据库`Excute`方法运行追加查询。如果您希望在`.Close`和之间发生这种情况`.OpenForm`...

```
DoCmd.Close ' close what?  If it works, fine.  '
CurrentDb.Execute "qry_YOS", dbFailonerror
stDocName = "Switchboard"
DoCmd.OpenForm stDocName 
```

顺便说一句，始终包含`Option Explict`在您的代码模块的声明中，如下所示：

```
Option Compare Database
Option Explicit 
```

从 VB 编辑器的主菜单中，选择工具->选项。然后在“选项”对话框的“编辑器”选项卡上，选中“需要变量声明”旁边的复选标记。该设置将确保`Option Explict`包含在所有*新*代码模块中。我强烈建议您手动将其添加到任何尚未拥有它的现有代码模块中。然后从 VB 编辑器的主菜单中选择 Debug->Compile 并修复编译器抱怨的任何问题。希望这不会太多，但从长远来看，这是一项很好的投资。

没有 VBA 开发人员的生活`Option Explicit`是不必要的复杂。只是总是用它来拯救自己的悲伤。您可以稍后感谢我。:-)

# python - python字符串对齐格式

> ID：13939581
> 
> 赞同：-2
> 
> 时间：2012-12-18T18:55:15.627
> 
> 标签：python

我在 python 中有一些字符串，我想相互配合，但似乎做不到。

```
 a = ("adam, home, wednesday, 17th")
 b = ("Tiffany, office, monday, 9th") 
```

我用“，”将它们分开

我想要输出：

```
 adam         home     wednesday     17th
 tiffany      office   monday        9th 
```

我正在尝试使用

```
 working_line =('{0} {1:<20} {2:<15} {3:<10}'.format(source,group,symbol,position)) 
```

这不起作用，我有点困惑......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:57:05.733

您在`{3}`字段定义中缺少一个冒号：

```
working_line =('{0} {1:<20} {2:<15} {3:<10}'.format(source,group,symbol,position)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:52:32.457

你不如做这样的事情：

```
a = ['adam', 'home', 'wednesday', '17th']
b = ['Tiffany', 'office', 'monday', '9th']

for x in [a, b]:
    working_line = ' '.join(map(lambda s: s.ljust(10, ' '), x))
    print working_line 
```

这是输出：

```
周三 17 日亚当回家      
蒂芙尼办公室 9 日星期一  

```

# javascript - Javascript (jQuery) 中的全局变量

> ID：13939582
> 
> 赞同：3
> 
> 时间：2012-12-18T18:55:18.343
> 
> 标签：javascript, global-variables, software-design

所以这是我第一次在更强大的环境中使用 Javascript，拥有一个胖客户端并通过 javascript 本身完成大部分繁重的工作。我正在使用 jQuery，现在很多代码都变得很混乱，因为它只是一堆函数。

结果对于我的一些函数，我需要通过多个函数传递变量，并保持它们的值。这样做的明显方法是将它们声明在函数范围之外，然后让函数以它应该的方式对其进行操作。（这些变量是对象而不是原始类型，所以我猜 javascript 是通过引用传递的，这是可行的）。

例如，我可能有这样的东西

```
var node = //init with some value;

$(document).ready(setup);
function setup()
{
 A();
 B();
}

function A()
{
  // operate on var node
}

function B()
{
  // operate on var node
} 
```

这显然是我的代码的缩小版本，但捕获了我处理全局变量的方式。我的问题是，有没有更优雅的方式来完成上述操作？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:58:19.217

你不能这样做的任何理由：

```
$(document).ready(function() {
    var node = //init with some value;
    setup(node);

    function setup(node) {
        A(node);
        B(node);
    }

    function A(node) {
      // operate on var node
    }

    function B(node) {
      // operate on var node
    }
}); 
```

一般来说，使用全局变量和函数是一个坏主意，应尽可能避免。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T19:00:42.940

请注意，虽然您似乎一直在专门询问有关`node`、 您的函数`setup`，`A`并且`B`也是您版本*中*的所有全局变量。

最简单的方法是将*所有*这些声明放在一个匿名函数中：

```
$(document).ready(function() {

    var node = ...;

    function A() {
        ...
    }

    function B() {
        ...
    }

    function setup() {
        A();
        B();
    }

    setup();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T19:00:41.013

只使用一个全局变量（或尽可能少）。使任何函数或对象成为您的一个全局变量的成员。

道格拉斯·克罗克福德 说

> 一个 JavaScript 程序质量的客观衡量标准是它有多少全局变量和全局函数？大量是不好的，因为与其他程序进行不良交互的机会增加了。理想情况下，应用程序、库、组件或小部件只定义一个全局变量。该变量应该是一个对象，它包含并且是您所有东西的根命名空间。
> 
> 雅虎的单一全球是YAHOO。它全部大写以将其标识为特殊的东西，因为所有小写都是普通的，并且首字母大写表示构造函数。全部大写，不太可能有人意外使用它，这进一步降低了碰撞的可能性。

[http://www.yuiblog.com/blog/2006/06/01/global-domination/](http://www.yuiblog.com/blog/2006/06/01/global-domination/)

此外，您可以创建对象来进一步组织您的代码。

GLOBAL.myObject = {}; GLOBAL.myObject.myFunction = ...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T19:02:15.590

我更喜欢[“展示模块”模式](https://stackoverflow.com/questions/5647258/how-to-use-revealing-module-pattern-in-javascript)：

```
var myApp = (function () {
    // privates
    var node;

    var a = function () {
        // operate on node
    };

    var b = function () {
        // operate on node
    };

    // publics
    var init = function () {
        // initialization stuff
        a();
        b();
    };

    return {
        init: init
    };
})();

$(document).ready(function () {
    myApp.init();
}); 
```

这样一来，您就只有一个全局 , `myApp`，它存储您的应用程序需要的所有其他内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T18:59:50.590

我认为这使代码更难理解，我宁愿将变量作为参数并将其作为返回值。

```
$(function(){
    var outcome = multiply(add(5));
});

function add(num)
{
    return num+1;
}

function multiply(num)
{
    return num*5;
} 
```

如果你觉得你绝对想让全局变量将你的东西包装在一个闭包中，这样它实际上就不会进入全局范围。

IE，

```
(function(){
    var a; // can be used in any functions within this closure, but not polluting window
    function A()
    {
        a = 'blah';
    }
})(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T19:03:13.903

有许多。例如，对象。

```
// jQuery shorthand for "wait till DOM ready"
$( function() {
   // create node object
   var node = {
      id: /* some value */,
      setup: function() {
         this.A();
         this.B();
      },
      A: function() {
         // operate on this.id
      },
      B: function() {
         // operate on this.id
      }
   };
   // setup node object
   node.setup();
} ); 
```

全局变量是等待发生的麻烦。不要弄脏你的全局命名空间。Javascript是一种面向对象的语言，使用对象。请注意，您的对象可以有一个属性，您可以`this`在对象方法中使用关键字引用该属性。

# python - 文本编辑 + 组合框 + pyqt4

> ID：13939588
> 
> 赞同：1
> 
> 时间：2012-12-18T18:55:50.460
> 
> 标签：python, combobox, pyqt, pyqt4, textedit

我需要有关程序的帮助。我需要使用 texedit + 组合框。我需要打开一个 txt 并将其设置为我的文本编辑（我已经这样做了），而不是我需要使用我的光标来获取一些单词，而不是在我的组合框中使用特定的东西......例如极性，这个框只有数字、1、-1、0 和一个按钮，我需要将其保存在新的 txt 或其他存档中。我有一个打开、新建、保存和关闭的菜单栏。我可以打开一个文件修改它并保存，但我想用一个按钮保存，我下划线的单词（带光标）+我为那个单词选择并保存的数字....有可能吗？我该怎么做？使用表格小部件更好吗？我是使用 pyqt4 的新手 :( 请帮帮我...我不知道该怎么做..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:51:59.117

开始使用 PyQt4 的最佳方法是查看一些与您要编写的应用程序类似的工作示例。PyQt4 源代码有很多 - 从[这里](http://www.riverbankcomputing.com/software/pyqt/download)下载，并查看*示例*目录。

除此之外，还有许多可帮助您入门的教程。[PyQt4 wiki](http://www.diotavelli.net/PyQtWiki/Tutorials)是一个开始寻找的好地方。

一旦你完成了一些教程，你可能会很容易地实现你想要的。而且，如果您遇到问题，您可以随时回来并在 SO 上询问它（只需确保提出*特定*问题，并发布您目前拥有的代码）。

# silverlight - 我应该使用 Cookie 还是独立存储来为 Silverlight 应用程序存储少量数据？

> ID：13939589
> 
> 赞同：2
> 
> 时间：2012-12-18T18:56:02.537
> 
> 标签：silverlight, cookies, isolatedstorage

我有一个 Silverilght 应用程序，需要在客户端存储少量数据（用户偏好的东西）。我应该使用 cookie 还是使用 Silverlight 的独立存储来存储它？为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T21:44:56.643

在大多数情况下，您应该使用隔离存储，原因如下：

*   隔离存储将在浏览器外的情况下工作
*   如果用户删除浏览器中的 cookie，隔离存储将继续存在
*   使用隔离存储的代码更便携
*   将用户偏好保存到隔离存储的代码更简单（请参阅：http: [//msdn.microsoft.com/en-us/library/cc221360](http://msdn.microsoft.com/en-us/library/cc221360(v=vs.95).aspx) (v=vs.95).aspx ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-29T09:18:30.327

隔离存储和 Cookie 都将解决在本地机器上保存用户偏好的问题。如果用户可能从不同的机器登录，您应该将用户首选项保存在服务器端。为此，您必须实现自己的服务来保存用户偏好。检索用户首选项应该在登录过程中进行。

# c# - 可选嵌套？这个语言特性叫什么，它是用来做什么的？

> ID：13939607
> 
> 赞同：5
> 
> 时间：2012-12-18T18:57:14.907
> 
> 标签：c#

我遇到了一些有趣的东西，我似乎找不到更多信息或正确的名称。

我想我们大多数人都知道，如果你有多个`using`块，你只需要在最后一个后面加上括号`using`：

```
using (FileStream fileStream = new FileStream(zipFilePath, FileMode.Open))
using (ZipInputStream zipStream = new ZipInputStream(fileStream))
{
    //stuff
} 
```

然而，我发现下面的代码也可以工作，没有括号紧跟在后面`using`，捎带`while`：

```
using (BinaryWriter br = new BinaryWriter(context.Response.OutputStream))
while (true)
{
    //stuff
} 
```

有谁知道这种允许代码块合并的语言“功能”的名称？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T19:05:31.837

是的，这是有意的。这是 C♯ 继承自 C 和 C++ 的习语。如果你有一个用大括号括起来的语句，大括号通常是可选的。是否使用它们主要是样式和可读性的问题。对于嵌套`using`语句，通常省略外层的大括号。

### 语言语法

在语法上，一个`using`块后面跟着一个*语句*。通常这是一个**块语句**，但它不是必须的。

有多种说法。有*表达式语句*，如`a = b;`. 有*迭代语句*，如`while (boolean-expression) { ... }`. 这里整个`while`循环算作一条语句。还有*块语句*，它由一个或多个用花括号括起来的*语句组成。*

有关语句的正式规范，请参阅 C# 语言规范、附录 C. 语法、[§C.2.5](http://msdn.microsoft.com/en-us/library/aa664812%28v=vs.71%29.aspx)*语句*：

> *语句：
>     标记语句
>     声明语句
>     嵌入语句
> 嵌入语句
>     **块**
>     空语句
>     表达式语句
>     选择语句
>     迭代语句
>     跳转语句
>     尝试语句
>     检查语句
>     未检查语句
>     锁定语句
>     使用语句
> 块
>     *`{` *语句语句列表[选择]* `}`

如果您只有一条语句，通常可以省略语句周围的花括号。这些是等价的：

```
if (condition) statement;
if (condition) { statement; } 
```

就像这些：

```
using (...)
using (...)
    statement;

using (...)
using (...)
{
    statement;
}

using (...)
{
    using (...)
    {
        statement;
    }
} 
```

### 有时需要

也有需要大括号的例外情况。方法体必须总是有花括号。它融入了语法。

> *方法体：
>     块
>     *`;`

同样，//`try`子句必须*有*花括号。和 也是一样的。您可以在语法中看到这一点。catch 子句被定义为“catch*块*”而不是“catch*语句*”。`catch``finally`*`checked``unchecked`*

 ***> *try-statement:
>     *`try` *block catch-clauses*`try` *block finally-clause*`try` *block catch-clauses finally-clause
> specific-catch-clause:* *类类型标识符**[opt]* *block* *general-catch-clause:* *block* *finally-clause:* *block* *checked-statement:* *block* *unchecked-声明：* *块* `catch``(``)``catch``finally``checked``unchecked`

 *为什么是这样？简短的回答是它消除了语法中的歧义。有关深入的解释，请参阅[Eric Lippert 对这种不一致的解释。](http://ericlippert.com/2012/12/04/why-are-braces-required/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T18:59:56.393

`{ }`创建单个代码块。如果你没有它们，那么下一条语句就是被执行的块。因此，您所做的事情是有道理的，因为这`using`将适用于`while`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T19:05:34.657

[正如 Eric Lippert 所描述的，](http://ericlippert.com/2012/12/04/why-are-braces-required/)每当您有一个`if`/ `else`/ `for`/ `while`/ `using`/ `foreach`/ `do`/ `case`/`switch`等表达式时，它总是后跟一条语句。使用大括号 ( `{ }`) 只是使大括号内的所有内容成为一个语句的一种方式。任何时候你自然只有一个语句，很少需要（除了可能的可读性）使用大括号。现在，在大多数情况下，可读性已经足够了，但从编译器的角度来看，它只需要任何有效的语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T19:00:52.943

该行为是大括号运算符的行为。它创建了一个变量范围，以及其他用途。它们可以省略，代码块就是下面这行。

```
for(int i = 0; i < 10; i++)
  foreach(blah in y)
    dosomething(); 
```

这是许多类 c 语言的特性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T19:01:42.717

using 后面跟着一个语句，一个块就是一个语句。因此，虽然通常在使用后你有一个块，但你可以有一个语句，在你的例子中是 while，然后，while 后面跟着一个块。

没有什么不寻常的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T19:03:13.120

在我看来，这个“概念”与允许以下内容的原则相同：

```
if(somethingTrue)
    when(somethingTrue)
       if(somethingTrue)
           // some code to be executed 
```

即，单行“块”而不是括号内的多行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-18T19:05:03.143

> 您只需要在最后一次使用后包含括号

不要求最后一次使用 have `{ }`。您的示例只是使用或不使用复合块嵌套语句的更一般能力的特例`{ }`。****

# iphone - how to create the control in xcode

> ID：13939608
> 
> 赞同：1
> 
> 时间：2012-12-18T18:57:22.037
> 
> 标签：iphone, objective-c, ios, xcode

I'm new to iphone programming. there are lot of basic controls in xcode which i can implement but i want to know how to create the control shown below in iphone.

It is not present in list of control objects in xcode

![enter image description here](../Images/9b434574e929da35d6db1bda765de347.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:58:48.310

There are no default dropdown implementations available for iPhone. You can try to implement a [`UIPickerView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html) or [`UIActionSheet`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html) based on the requirement.

If you cannot modify your design, you can go ahead and implement your own dropdown implementation. Basically you need to have a button with the above image as background view and on tap of that you need to show a table view below that. Alternatively you can check this [custom dropdown list](http://blog.lemberg.co.uk/iphone-development/custom-dropdown-list/) and [this Drop Down Demo iOS.](https://github.com/raihan/Drop-Down-Demo-iOS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:04:35.670

Xcode does not provide this control.You can create custom control with a table view and Button.Show the table view when you click on it and hide it on again clicking on it.You can also add images on background for the same look.

# java - 为什么 EL >= 有时会给出错误的结果？

> ID：13939614
> 
> 赞同：2
> 
> 时间：2012-12-18T18:57:42.130
> 
> 标签：java, jsp, tomcat, el

我有这个 JSP EL 表达式，它使用 >= 比较器。在我的开发环境中，我得到了您期望的结果，即 2 >= 188 是错误的。但是，在我的登台和生产服务器上，显然 2 >= 188 是正确的。

这是代码：

```
</ul>
<p>curPage: ${param.curPage}<br/>
totalPages: ${param.totalPages}<br/>
totalPages - curPage: ${param.totalPages - param.curPage}<br/>
curPage gt totalPages: ${param.curPage >= param.totalPages}<br/>
<p> 
```

在我的开发环境中，我得到如下输出：

```
curPage: 2
totalPages: 68
totalPages - curPage: 66
curPage gt totalPages: false 
```

在舞台上：

```
curPage: 2
totalPages: 181
totalPages - curPage: 179
curPage gt totalPages: true 
```

我的开发环境运行的是 Tomcat 7.0.29，staging 运行的是 7.0.30。代码库是相同的。

上面的代码在一个文件“pagination.jsp”中（我知道，它应该是一个.tag），它包含在另一个jsp中，如下所示：

```
<jsp:include page="/widgets/pagination.jsp">
    <jsp:param name="totalPages" value="${actionBean.jbp.totalPages}" />
    <jsp:param name="baseUrl" value="${baseUrl}" />
    <jsp:param name="curPage" value="${not empty param.page?param.page:0}" />
</jsp:include> 
```

“jbp.totalPages”定义为：

私人最终 int 总页数；

而“param.page”显然是一个页面参数。

我想这里可能存在类型转换问题，在参数和 int 之间，但这并不能解释为什么它在一台机器上工作而不是在另一台机器上工作。

另外，我认为 JSP EL 进行了自动类型转换。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:04:43.850

这些参数被评估为`String`而不是`Number`（因为这基本上是`HttpServletRequest#getParameter()`返回的）。的字符串值在`"2"`字典上比任何以 开头的字符串值“更大” `"1"`。

您需要将它们解析为`Number`. 您可以为此使用[JSTL 。](https://stackoverflow.com/tags/jstl/info) `<fmt:parseNumber>`

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
...
<fmt:parseNumber var="curPage" value="${param.curPage}" integerOnly="true" />
<fmt:parseNumber var="totalPages" value="${param.totalPages}" integerOnly="true" />
... 
<p>
  curPage: ${curPage}<br/>
  totalPages: ${totalPages}<br/>
  totalPages - curPage: ${totalPages - curPage}<br/>
  curPage gt totalPages: ${curPage >= totalPages}<br/>
</p> 
```

至于开发环境与生产环境的差异，这很可能是由于测试不好（不使用相同的测试数据甚至可能不使用相同的测试代码）造成的。在上述版本中，Tomcat 的 EL 实现没有任何类似的变化。只有当比较中的一手*真的*是 a`Number`而另一手是 a`String`时，EL 才会强制`String`to `Long`。这可能是真实代码中正在发生的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T19:01:45.990

`2 >= 188`如果比较的项目是数字，则为 false。

`2 >= 188`如果比较的项目是字符串，则为真。

您的两个部署中有些不同。

查看 jstl.jar 和 standard.jar 的版本以及所有的 jar，也许在您的`tomcat/lib`目录中。也许*您的*代码是相同的，但依赖库中还有其他差异？不知何故，类型不同。JSP 中的差异影响类型推断的可能性不大，但也不超出可能性范围。

**编辑**：

当问题对两个代码示例都使用 188（实际上是 181）时，这个问题得到了回答。*在其中一个*示例中，它已更改为 69 。现在一切都说得通了。

# mysql - 具有多个级别的 MySQL Rollup

> ID：13939615
> 
> 赞同：1
> 
> 时间：2012-12-18T18:57:44.980
> 
> 标签：mysql, sql, hierarchy

您好，我正在尝试汇总 x 个级别。层次结构是这样的：

```
1 - Total Depth 1
1.1, 1.2, 1.3 - Depth 2
1.1.1, 1.1.2, 1.1.3, 1.2.1, 1.2.2 - Depth 3 
```

等等等等...

我想过使用子字符串索引来比较和汇总，但我似乎无法弄清楚如何制定查询而不关心有多少级别。

例如，如果我想要 1.1.1，我还想检索 1.1 和 1。获取所有结果将显示向下钻取分类。

任何建议将不胜感激！

这是我目前使用的解决方法路径是 1、1.1、1.1.1 字段

```
IF(depth=3, SUBSTRING(path, 1, 3) , SUBSTRING(path, 1, 1)) as `Depth3`,
IF(depth=2, SUBSTRING(path, 1, 5) , SUBSTRING(path, 1, 1)) as `Depth2` 
```

这将给我 1.1 和 1 以及 1.1.1 的路径字段，但它需要我指定深度。

# spring-ws - 在 web 服务中，端点是否知道域类，或者它只是将请求参数传递给服务类？

> ID：13939616
> 
> 赞同：0
> 
> 时间：2012-12-18T18:57:45.047
> 
> 标签：spring-ws

我正在使用 spring 编写一些 web 服务。我想知道服务方法的参数是什么：域对象或请求参数？例如一个“用户”对象或一堆包含姓名、电子邮件等的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:27:39.480

根据您的配置（和方法签名），您将收到未编组的对象（例如 Jaxb）、MessageContext 等。

查看[文档](http://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html#d5e1063)，您会找到一些示例以及您需要了解的有关服务方法和参数的所有信息。

# jsf-2 - f:param 不适用于 h:graphicImage

> ID：13939619
> 
> 赞同：1
> 
> 时间：2012-12-18T18:57:49.963
> 
> 标签：jsf-2

我得到了`<f:param>`ie，在我的 ajax 调用期间的`menuItemIndex`价值。`null`是因为它在吗`<h:graphicImage>`？？？有人可以建议吗？注意：如果我使用`<h:commandLink>`而不是`<h:graphicImage>`.

```
 <c:forEach items="#{cc.attrs.value}" var="menuItem" varStatus="loopItem">
 ....
    <ui:fragment rendered="#{menuItem.hasChildren}">
        <h:graphicImage library="images" name="#{menuItem.symbol}">
           <f:ajax render=":fatcaForm:myMenu:menuID" event="click" listener="#{menuBean.refreshMenu}" />
           <f:param name="menuItemIndex" value="{loopItem.count}" />
        </h:graphicImage>
    </ui:fragment>
  ....
 </c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:44:34.043

这`<h:graphicImage>`不是命令组件，因此它根本不支持`<f:param>`子组件。仅当`<f:param>`嵌套在`UICommand`组件中时才有效，例如`<h:commandLink>`您自己发现的。

所以，这应该这样做：

```
<h:commandLink action="#{menuBean.refreshMenu}">
    <h:graphicImage library="images" name="#{menuItem.symbol}" />
    <f:ajax render=":fatcaForm:myMenu:menuID" />
    <f:param name="menuItemIndex" value="#{loopItem.count}" />
</h:commandLink> 
```

*（请注意，我也修复了 EL 语法错误`<f:param value>`）*

* * *

**与具体问题无关**，您使用的`<h:graphicImage library>`方式并不完全正确。请仔细阅读[JSF资源库是干什么用的，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)

# c++ - 加载共享库时出错：libboost_system.so 1.49.0：没有这样的文件或目录

> ID：13939620
> 
> 赞同：2
> 
> 时间：2012-12-18T18:57:50.313
> 
> 标签：c++, boost, shared-libraries, boost-asio

我正在尝试从 Boost:Asio 教程中运行一些基本的服务器/客户端软件。该应用程序在本地主机上运行良好，但是当我编译并将编译的程序移动到另一台服务器时，它无法找到库（这是有道理的，因为它们不存在）。当我编译时，我以为我通过键入以下内容链接了库：

g++ -I /usr/local/boost_1_52_0 client.cpp -o client -lpthread -lboost_system

如果我必须将库与我安装在网络上的每个客户端软件一起分发，这不会破坏拥有像 Boost 这样的跨平台解决方案的目的吗？我错过了什么吗？有没有办法将库打包到编译后的代码中，以便与软件一起分发？

类似于： [加载共享库时出错：libboost_system.so.1.45.0: cannot open shared object file: No such file or directory](https://stackoverflow.com/questions/4581305/error-while-loading-shared-libraries-libboost-system-so-1-45-0-cannot-open-sha)

（但不一样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:12:08.620

如上所述，需要 -static 选项。

# ios - 将 NSMutableArray 传递给服务器

> ID：13939623
> 
> 赞同：0
> 
> 时间：2012-12-18T18:58:02.147
> 
> 标签：ios, cocoa-touch, post, nsstring, nsarray

我目前正在 iOS 中使用 AddressBook，我正在从用户的所有联系人那里获取电子邮件，并将它们放入`NSMutableArray`. 现在我必须将此数组传递给服务器[PHP]。但问题是电子邮件在双引号中，所以它看起来像这样：

```
(
  "user@gmail.com",
  "user2@gmail.com",
  "user3@gmail.com"
) 
```

那是我的代码：

```
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, NULL);
__block BOOL accessGranted = NO;
if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS 6
    dispatch_semaphore_t sema = dispatch_semaphore_create(0);
    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
        accessGranted = granted;
        dispatch_semaphore_signal(sema);
    });
    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
}
else { // we're on iOS 5 or older
    accessGranted = YES;
}

if (accessGranted) {
    CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);
    _usersEmails = [[NSMutableArray alloc] initWithCapacity:CFArrayGetCount(people)];
    for (CFIndex i = 0; i < CFArrayGetCount(people); i++) {
        ABRecordRef person = CFArrayGetValueAtIndex(people, i);
        ABMultiValueRef emails = ABRecordCopyValue(person, kABPersonEmailProperty);
        for (CFIndex j=0; j < ABMultiValueGetCount(emails); j++) {
            NSData* email = [(__bridge NSString*)ABMultiValueCopyValueAtIndex(emails, j) dataUsingEncoding:NSUTF8StringEncoding];
            [_usersEmails addObject:email];
        }
        CFRelease(emails);
    }
    CFRelease(addressBook);
    CFRelease(people); 
```

实现服务器端的 Web 程序员告诉我，我必须传递不带双引号的字符串数组。

**如何删除数组每个字符串中的双引号？**

更新：

这是服务器接收到的实际数据：

```
\"user@gmail.com\"','\"user@gmail.com\"','\"user@gmail.com\"','\"user@me.com\" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:16:08.463

您可以使用 NSString 的`substringFromIndex`和`substringToIndex`方法来消除第一个和最后一个字符。就像是`[[string substringToIndex:string.length - 1] substringFromIndex:1];`

编辑：

你不能在这里检查/删除引号：

```
NSData* email = [(__bridge NSString*)ABMultiValueCopyValueAtIndex(emails, j) dataUsingEncoding:NSUTF8StringEncoding]; 
```

通过写类似的东西：

```
NSString *string = (__bridge NSString*)ABMultiValueCopyValueAtIndex(emails, j);
NSString *stringWithoutQuotations = [[string substringToIndex:string.length - 1] substringFromIndex:1];
NSData* email = [stringWithoutQuotations  dataUsingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:21:13.450

将 NSString 打印到控制台时会显示引号-我认为您的字符串实际上不包含引号..

尝试使用调试器检查器进行仔细检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T19:25:23.383

做这个：

```
for (NSString* aString in _userEmails) {
    NSLog(@"The string is %@", aString);
} 
```

你会看到没有引号。

# nuget - 如何将我的 Nuget 包推送到在我自己的服务器上拥有我的包的官方画廊

> ID：13939625
> 
> 赞同：1
> 
> 时间：2012-12-18T18:58:10.773
> 
> 标签：nuget, nuget-server

我有一个网络公共文件夹，当我想共享任何文件时会使用它，所以我正在考虑将我的 nuget 包放在那里。我尝试使用以下方法推动它：

nuget push Me.Utility.1.0.nupkg API_KEY -Source [http://www.mywebpage.mx/packages](http://www.mywebpage.mx/packages)

然后它要求我提供凭据，但我输入的凭据都没有工作（凭据正确）。我的网络文件夹不是一个 nuget 提要，它只是一个网络共享文件夹。我不清楚问题是它应该是一个 nuget 提要（类似于 myget 服务）还是我需要拥有的最低基础设施，因为这只是一个 nuget 包。我想在我自己的服务器上托管我的包，并且我希望我的包出现在官方画廊中，那么在这种情况下我应该设置自己的 nuget 提要吗？
你能解释一下这应该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:14:39.163

MyGet.org 支持向上游推送包，例如推送到 NuGet.org。查看这篇博文以了解如何执行此操作：[http ://blog.myget.org/post/2012/03/01/Introducing-MyGet-package-source-proxy-(beta).aspx](http://blog.myget.org/post/2012/03/01/Introducing-MyGet-package-source-proxy-(beta).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:05:07.257

我们有一个（免费）产品可以帮助您。[ProGet](http://inedo.com/proget/download)使您能够在自己的网络上托管自定义 NuGet 源，并允许您通过“连接器”无缝连接到现有的源，例如 NuGet.org 源。如果您发布到官方 NuGet 库并在 ProGet 中的私有源上启用缓存，则无论何时您从官方 NuGet 源中使用您自己的包，它都会自动为您将其（和任何其他）缓存在您的网络上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T20:36:20.837

官方画廊意味着 nuget.org？使用 nuget.org，您不能选择在外部站点上托管您的 nupkg，nuget.org 必须为您托管它。您可能会混淆 myget.org 和 nuget.org 的概念。

PS：如果您使用参数覆盖“源”，那么您将不再使用官方画廊 nuget.org。因此，问题标题令人困惑。

# python - 检查列表项整数是否是Python中另一个列表中每两个项目整数之间的数字？

> ID：13939633
> 
> 赞同：1
> 
> 时间：2012-12-18T18:58:40.477
> 
> 标签：python, list

我有两个列表都包含数字，我想检查一个列表中的数字是否是另一个列表中每两个数字之间的数字？“其他”列表具有有序数字，因此每两个数字是一个区间，如 234、238、567、569、2134、2156。

```
ListA = [200, 765, 924, 456, 231]

ListB = [213, 220, 345, 789, 12, 45] 
```

我想检查 ListA[0:] 是否是 ListB[0:1] 或 [2:3] 等之间的数字。

我试过这个：

```
for i in range(0,len(ListB), 2):
    for x in ListA:
        if i < x < (i:i+2):
            print 'within range' 
```

但是我收到“i：i + 2”的语法错误:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:10:16.887

如果您要做的是*确保*列表 A 中的所有项目都在列表 B 中*的至少一个*间隔内：

```
>>> listA = [200, 765, 924, 456, 231]
>>> listB = [213, 220, 345, 789, 12, 45]

>>> intervals = zip(*[listB[i::2] for i in range(2)])

>>> [any(low < x < high for low, high in intervals)
                    for x in listA]
[False, True, False, True, False] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:04:22.053

我*认为*这就是您想要的，尽管还不是很清楚：

```
for i in range(0, len(ListB), 2):
    for x in ListA:
        if ListB[i] < x < ListB[i+1]:
            print 'within range' 
```

你的直觉是对的，你可以`i:i+2`代表一个“范围”，但不完全是这样。该语法只能在切片 a 时使用`list`：`ListB[i:i+2]`返回一个只有 2 个元素的较小列表，`[ListB[i], ListB[i+1]]`正如您所期望的那样，但`i:i+2`其本身是非法的。（如果你真的想要，你可以写出`slice(i, i+2)`你的目标，但这在这里并不是那么有用。）

此外，根据您的描述，您希望与`x`值`ListB[i]`和进行比较`ListB[i+1]`，而不仅仅是代码中的`i`和`i+1`。

如果你想使用切片来生成一个范围，你可以这样做，但只是间接的，而且在大多数方面它实际上会更笨拙和更糟糕：

```
for i in range(0, len(ListB), 2):
    brange = range(*ListB[i:i+2])
    for x in ListA:
        if x in brange:
            print 'within range' 
```

但这是检查半开范围而不是开范围，它需要创建表示范围的列表，并遍历整个事物，它只适用于整数。所以，这可能不是你想要的。最好只明确使用`ListB[i] < x < ListB[i+1]`.

您可能想考虑是否有一种更易读的方法来构建从`ListB`. 在还不了解`itertools`和列出推导式或生成器表达式（我假设）的情况下，您可能不得不写一些非常冗长和明确的东西，但无论如何它可能是有用的练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:04:09.743

```
for i in range(0,len(ListB)-1, 2): #offest 1 less than the length
    for x in ListA:
        if ListB[i] < x < ListB[i+1]: #check if it is between ListB's elements
            print 'within range' 
```

至少假设我明白你想要什么......

# geocoding - 需要帮助查找特定邮政编码的 KML 数据

> ID：13939634
> 
> 赞同：1
> 
> 时间：2012-12-18T18:58:43.143
> 
> 标签：geocoding, kml, zipcode

我正在使用新泽西邮政编码制作热图，但我使用的几何信息对于两个邮政编码不正确。有谁知道我可以去哪里获取这两个特定邮政编码的 KML 信息？我在这里看到了很多关于 KML 数据使用哪些资源的帖子，但它们非常先进，我不知道如何挖掘论坛上其他人链接到的数据库。

具体来说，我需要邮政编码 08559 和 08757 的 KML 邮政编码数据。以下是这些邮政编码的有缺陷的 KML 数据：

08559:

```
<Polygon><outerBoundaryIs><LinearRing><coordinates>-74.892528,40.414294,0.0 -74.967386,40.39857,0.0 -75.060361,40.420788,0.0 -75.064463,40.500774,0.0 -75.06583,40.517523,0.0 -75.068223,40.457705,0.0 -74.991314,40.481632,0.0 -74.88911,40.47001,0.0 -74.892528,40.414294,0.0</coordinates></LinearRing></outerBoundaryIs></Polygon> 
```

08757:

```
<Polygon><outerBoundaryIs><LinearRing><coordinates>-74.190432,39.946002,0.0 -74.221537,39.932329,0.0 -74.322374,39.946002,0.0 -74.234185,40.008896,0.0 -74.26905,39.986678,0.0 -74.206839,39.952154,0.0 -74.19761,39.949762,0.0 -74.190432,39.946002,0.0</coordinates></LinearRing></outerBoundaryIs></Polygon> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:26:11.083

对于美国邮政编码，可从美国人口普查中获得数据： [http ://www.census.gov/geo/www/cob/z52000.html#ascii](http://www.census.gov/geo/www/cob/z52000.html#ascii)

下载新泽西州或其他 50 个州的 ASCII 数据集。

您可以在小文件（例如 zt34_d00a.dat）中查找您的邮政编码的索引

```
 317
 "08559"
 "08559"
 "Z5"
 "5-Digit ZCTA" 
```

然后在大文件中找到匹配的经纬度坐标列表。

```
317      -0.749719256389896E+02       0.404391641604938E+02
      -0.750611840000000E+02       0.404766960000000E+02
      -0.750607720000000E+02       0.404766880000000E+02
      -0.750620530000000E+02       0.404692640000000E+02
      -0.750637010000000E+02       0.404652440000000E+02
...
      -0.750622670000000E+02       0.404709200000000E+02
      -0.750611840000000E+02       0.404766960000000E+02
END 
```

第一个值是经度，第二个值是纬度，都是十进制度。

注意某些点可能有问题（或错误），因此您可能需要在转换为 KML 后对其进行清理。帮助调试点和删除坏点的一个方便的工具是[KML Number-the-points 工具](http://kml4earth.appspot.com/numbers.html)，该工具生成 KML 地标，每个地标都有对应于线或多边形中每个点的数字标签，给定一些 KML 作为输入。如果有很长的点列表并且需要轻松识别它们，则很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-04T19:36:47.753

# 如何创建具有多个邮政编码的区域地图

1.  [从census.gov](http://www.census.gov/geo/maps-data/data/kml/kml_zcta.html)下载包含所有美国邮政编码的 KML 文件。该站点上的最新文件是：[http](http://www2.census.gov/geo/tiger/GENZ2015/kml/cb_2015_us_zcta510_500k.zip) ://www2.census.gov/geo/tiger/GENZ2015/kml/cb_2015_us_zcta510_500k.zip 。如果此链接损坏，请在 Google 上搜索[site:census.gov KML ZIP](https://www.google.com/search?q=site%3Acensus.gov+KML+ZIP)。另一种选择：[https ://www.filosophy.org/post/17/zipcodes_in_kml/](https://www.filosophy.org/post/17/zipcodes_in_kml/)

2.  在纯文本编辑器中打开这个巨大的 (175MB) 文本文件，然后搜索您想要的邮政编码并复制该`<Polygon>`部分。这是搜索时的结果`>94117`：

    ```
    <Placemark id="cb_2015_us_zcta510_500k.kml">
    <name>&lt;at&gt;&lt;openparen&gt;&lt;closeparen&gt;</name>
    <visibility>1</visibility>
    <description><![CDATA[<center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor="#E3E3F3">
    <th>ZCTA5CE10</th>
    <td>94117</td>
    </tr><tr bgcolor="">
    <th>AFFGEOID10</th>
    <td>8600000US94117</td>
    </tr><tr bgcolor="#E3E3F3">
    <th>GEOID10</th>
    <td>94117</td>
    </tr><tr bgcolor="">
    <th>ALAND10</th>
    <td>4373059</td>
    </tr><tr bgcolor="#E3E3F3">
    <th>AWATER10</th>
    <td>1625</td>
    </tr></table></center>]]></description>
    <LookAt>
    <longitude>-102</longitude>
    <latitude>38.5</latitude>
    <range>7000000</range>
    <tilt>10</tilt>
    <heading>0</heading>
    </LookAt>
    <styleUrl>#KMLStyler</styleUrl>
    <ExtendedData>
    <SchemaData schemaUrl="#kml_schema_ft_cb_2015_us_zcta510_500k">
    <SimpleData name="ZCTA5CE10">94117</SimpleData>
    <SimpleData name="AFFGEOID10">8600000US94117</SimpleData>
    <SimpleData name="GEOID10">94117</SimpleData>
    <SimpleData name="ALAND10">4373059</SimpleData>
    <SimpleData name="AWATER10">1625</SimpleData>
    </SchemaData>
    </ExtendedData>
    <Polygon>
    <extrude>0</extrude>
    <tessellate>1</tessellate>
    <altitudeMode>clampToGround</altitudeMode>
    <outerBoundaryIs>
    <LinearRing>
    <coordinates>-122.477297,37.766069,0 -122.477379,37.765482,0 -122.458405,37.76616,0 -122.45779,37.766015,0 -122.457536,37.763566,0 -122.455999,37.763904,0 -122.456994,37.761842,0 -122.459173,37.761912,0 -122.455944,37.760239,0 -122.456603,37.759235,0 -122.454002,37.758785,0 -122.451817,37.759453,0 -122.447682,37.75919,0 -122.446783,37.761781,0 -122.445309,37.76188,0 -122.442915,37.763648,0 -122.443347,37.765333,0 -122.441242,37.765271,0 -122.4382,37.767159,0 -122.435624,37.767328,0 -122.435794,37.769058,0 -122.429128,37.769456,0 -122.428426,37.770452,0 -122.429178,37.774181,0 -122.429929,37.777909,0 -122.430115,37.778842,0 -122.444967,37.776958,0 -122.44478,37.776017,0 -122.446471,37.775802,0 -122.446846,37.777669,0 -122.453188,37.776853,0 -122.45281,37.774995,0 -122.463749,37.773624,0 -122.464611,37.77244,0 -122.459162,37.771314,0 -122.459901,37.770442,0 -122.464402,37.769669,0 -122.467004,37.768013,0 -122.469758,37.769209,0 -122.472245,37.76861,0 -122.473124,37.767116,0 -122.477297,37.766069,0 </coordinates>
    </LinearRing>
    </outerBoundaryIs>
    </Polygon>
    </Placemark> 
    ```

3.  创建一个干净的 KML 文件并将其移至`<Polygon>`该文件。下面是一个`service-delivery-area.kml`包含两个邮政编码多边形的 KML 文件 ( ) 示例。谷歌有一个很棒的[KML 参考](https://developers.google.com/kml/documentation/kmlreference)。

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <kml xmlns="http://www.opengis.net/kml/2.2">
      <Document>
        <name>Service Delivery Area</name>
        <open>0</open>
        <Placemark>
          <name>94117</name>
          <Polygon>
            <outerBoundaryIs>
              <LinearRing>
                <coordinates>
                  -122.477297,37.766069,0 -122.477379,37.765482,0 -122.458405,37.76616,0 -122.45779,37.766015,0 -122.457536,37.763566,0 -122.455999,37.763904,0 -122.456994,37.761842,0 -122.459173,37.761912,0 -122.455944,37.760239,0 -122.456603,37.759235,0 -122.454002,37.758785,0 -122.451817,37.759453,0 -122.447682,37.75919,0 -122.446783,37.761781,0 -122.445309,37.76188,0 -122.442915,37.763648,0 -122.443347,37.765333,0 -122.441242,37.765271,0 -122.4382,37.767159,0 -122.435624,37.767328,0 -122.435794,37.769058,0 -122.429128,37.769456,0 -122.428426,37.770452,0 -122.429178,37.774181,0 -122.429929,37.777909,0 -122.430115,37.778842,0 -122.444967,37.776958,0 -122.44478,37.776017,0 -122.446471,37.775802,0 -122.446846,37.777669,0 -122.453188,37.776853,0 -122.45281,37.774995,0 -122.463749,37.773624,0 -122.464611,37.77244,0 -122.459162,37.771314,0 -122.459901,37.770442,0 -122.464402,37.769669,0 -122.467004,37.768013,0 -122.469758,37.769209,0 -122.472245,37.76861,0 -122.473124,37.767116,0 -122.477297,37.766069,0
                </coordinates>
              </LinearRing>
            </outerBoundaryIs>
          </Polygon>
        </Placemark>
        <Placemark>
          <name>94102</name>
          <Polygon>
            <outerBoundaryIs>
              <LinearRing>
                <coordinates>
                  -122.429929,37.777909,0 -122.429178,37.774181,0 -122.428426,37.770452,0 -122.42822,37.769441,0 -122.426402,37.769596,0 -122.419334,37.77521,0 -122.419219,37.775316,0 -122.418704,37.775645,0 -122.404743,37.786778,0 -122.406399,37.786615,0 -122.406771,37.788499,0 -122.408595,37.789226,0 -122.411886,37.788808,0 -122.414807,37.78652,0 -122.414242,37.783724,0 -122.419182,37.783101,0 -122.420689,37.781955,0 -122.420906,37.782883,0 -122.422287,37.781752,0 -122.424108,37.782477,0 -122.427396,37.782057,0 -122.426829,37.779258,0 -122.429929,37.777909,0
                </coordinates>
              </LinearRing>
            </outerBoundaryIs>
          </Polygon>
        </Placemark>
      </Document>
    </kml> 
    ```

4.  转到[https://www.google.com/mymaps/](https://www.google.com/mymaps/)并创建一个新地图。单击“添加新图层”，然后单击“导入”，然后上传您的 KML 文件。如果多边形不正确，您可以在地图上编辑多边形。

5.  您的地图应该有这样的结果：[https ://www.google.com/maps/d/u/0/embed?mid=1zop5GMD1b2afmOvObQIi7YvF1d4](https://www.google.com/maps/d/u/0/embed?mid=1zop5GMD1b2afmOvObQIi7YvF1d4)

# c++ - OpenGL 将纹理应用于曲面细分

> ID：13939640
> 
> 赞同：1
> 
> 时间：2012-12-18T18:59:11.473
> 
> 标签：c++, opengl, textures, tessellation

我正在尝试采用凹多边形并将图像作为纹理应用到它。多边形可以有多个轮廓，包括内部孔和外部“岛”。它可以是任何形状，但会比图像小并适合其中。它不一定会触及图像的边缘。

我已经成功地显示了镶嵌多边形，并纹理了一个简单的正方形，但不能让两者一起工作。

这是我加载纹理的方式：

```
 GLuint texture;
    int width, height;
    BYTE * data;
    FILE * file;

    // open texture data
    file = fopen( filename, "rb" );
    if ( file == NULL ) return 0;

    // allocate buffer
    width = 256;
    height = 256;
    data = (BYTE *)malloc( width * height * 3 );

    // read texture data
    fread( data, width * height * 3, 1, file );
    fclose( file );

    glGenTextures( 1, &texture );
    glBindTexture( GL_TEXTURE_2D, texture );
    glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, wrap ? GL_REPEAT : GL_CLAMP );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, wrap ? GL_REPEAT : GL_CLAMP );

    gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width,height, GL_RGB, GL_UNSIGNED_BYTE, data );

    free( data );

    return texture; 
```

这是曲面细分功能：

```
GLuint tessellate1()
{
GLuint id = glGenLists(1);  // create a display list
if(!id) return id;          // failed to create a list, return 0

GLUtesselator *tess = gluNewTess(); // create a tessellator
if(!tess) return 0;  // failed to create tessellation object, return 0

GLdouble quad1[4][3] = { {-1,3,0}, {0,0,0}, {1,3,0}, {0,2,0} };

glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, GLTexture::LoadTextureRAW("texture.raw", true));

// register callback functions
gluTessCallback(tess, GLU_TESS_BEGIN, (void (CALLBACK *)())tessBeginCB);
gluTessCallback(tess, GLU_TESS_END, (void (CALLBACK *)())tessEndCB);
gluTessCallback(tess, GLU_TESS_ERROR, (void (CALLBACK *)())tessErrorCB);
gluTessCallback(tess, GLU_TESS_VERTEX, (void (CALLBACK *)())tessVertexCB);

glNewList(id, GL_COMPILE);
glColor3f(1,1,1);
gluTessBeginPolygon(tess, 0);                   // with NULL data
    gluTessBeginContour(tess);
        gluTessVertex(tess, quad1[0], quad1[0]);
        gluTessVertex(tess, quad1[1], quad1[1]);
        gluTessVertex(tess, quad1[2], quad1[2]);
        gluTessVertex(tess, quad1[3], quad1[3]);
    gluTessEndContour(tess);
gluTessEndPolygon(tess);
glEndList();

gluDeleteTess(tess);        // delete after tessellation

glDisable(GL_TEXTURE_2D);

setCamera(0, 0, 5, 0, 0, 0);

return id;      // return handle ID of a display list
} 
```

这是镶嵌顶点回调函数：

```
// cast back to double type
const GLdouble *ptr = (const GLdouble*)data;

double dImageX = -1, dImageY = -1;

//hardcoded extents of the polygon for the purposes of testing
int minX = 607011, maxX = 616590;
int minY = 4918219, maxY = 4923933;

//get the % coord of the texture for a poly vertex.  Assumes image and poly bounds are the same for the purposes of testing
dImageX = (ptr[0] - minX) / (maxX - minX);
dImageY = (ptr[1] - minY) / (maxY - minY);

glTexCoord2d(dImageX, dImageY);
glVertex2d(ptr[0], ptr[1]); 
```

这是显示回调：

```
void displayCB()
{
// clear buffer
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);

// save the initial ModelView matrix before modifying ModelView matrix
glPushMatrix();

// tramsform camera
glTranslatef(0, 0, cameraDistance);
glRotatef(cameraAngleX, 1, 0, 0);   // pitch
glRotatef(cameraAngleY, 0, 1, 0);   // heading

// draw meshes
glCallList(listId1);  //id of the tessellated poly

// draw info messages
showInfo();

glPopMatrix();

glutSwapBuffers();
} 
```

结果是一个正确绘制的多边形，没有应用纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:03:49.703

```
// init
glGenTextures( 1, &texture );

// vertex callback
glBindTexture(GL_TEXTURE_2D, 1); 
```

我不认为返回的第一个 ID`glGenTextures()`必须是`1`.

尝试在通话中使用`texture`而不是。`1``glBindTexture()`

此外，确实没有理由为*每个 vertex*启用纹理和重新绑定纹理。只需在调用 tesselator 之前执行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:39:15.737

您没有在显示列表中捕获纹理绑定和启用，因此重播时不会考虑它。所以，要么：

*   在显示列表中捕获 BindTexture 和 Enable，或者
*   调用 CallList 之前的 BindTexture 和 Enable(TEXTURE_2D)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:02:44.883

问题是曲面细分函数中的 glDisable(GL_TEXTURE_2D) 调用。删除它后，纹理被正确应用。

# parsing - ParseKit 贪心匹配模式

> ID：13939642
> 
> 赞同：1
> 
> 时间：2012-12-18T18:59:17.917
> 
> 标签：parsing, bnf, parsekit

我正在制作类似公式验证器的东西，我正在使用 ParseKit 框架来完成它。我的方法是创建正确的语法，当对示例字符串调用 didMatchFormula 回调方法时，我假设公式已找到，因此它是有效的。

然而，有一个困难 - 从示例字符串中检测到公式，即使它还包含公式部分后面的其他字符。我需要像贪婪模式这样的匹配 - 整个字符串将与公式语法匹配，以便仅当字符串包含公式且不包含其他字符时才会调用 didMatchFormula。

你能给我一些提示吗？如何使用 PaseKit 或其他方式来实现这一点。我不能使用正则表达式，因为我的公式会使用递归，而正则表达式不是处理它的好工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:37:51.680

[ParseKit](http://parsekit.com)的开发者在这里。

使用 ParseKit（或任何解析工具包）执行此操作的最简单和最优雅的方法可能是设计您的公式语言在每个语句之后都有一个终止符字符。`;`这与大多数类 C 编程语言中的终止语句的概念相同。

这是一个`.`用作语句终止符的示例玩具公式语言：

```
@start = lang;
lang = statment+;
statment = Word+ terminator;
terminator = '.'; 
```

请注意我是如何设计该语言的，以便您的“贪婪”要求是该语言的固有特征。想一想——如果输入字符串以任何不是以 a 结尾的有效语句的垃圾内容结尾`.`，我的`lang`生产将找不到匹配项，解析将失败。

使用这种类型的设计，您将不需要您使用的解析工具包中的任何“贪婪”功能。相反，您的语言设计自然会满足您的要求。

# java - JSF中arrayList的jsf-arrayList

> ID：13939644
> 
> 赞同：3
> 
> 时间：2012-12-18T18:59:23.050
> 
> 标签：java, jsf, jdbc

我有一个 ArrayList 的 ArrayList - 我以这种方式声明它：

```
ArrayList<ArrayList<String>> queryResult=new ArrayList<ArrayList<String>>(); 
```

然后我向数组中添加一个新元素，如下所示：

```
for(int i=1;i<colNumber;i++)
{
    queryResult.add(new ArrayList<String>(20));
} 
```

之后，我向数组元素添加一个值：

```
while(r.next())
{   
    for(int i=0;i<colNumber;i++)
    {
        queryResult.get(i).add(r.getString(i));  
    }     
} 
```

但是当我尝试在 DataTable 标记中使用它时，我什么也看不到:(

```
<h:dataTable value="#{polaczenieSQL.queryResult}" var="w">
          <h:column>
             <f:facet name="head">typ</f:facet>
             #{w[0]}
          </h:column> 
```

我做错了什么？我应该如何在 JSF 中使用这个数组？

PS这是我的faces.config：

```
 <managed-property>
        <property-name>queryResult</property-name>
        <property-class>java.util.ArrayList</property-class>
        <list-entries></list-entries>
     </managed-property> 
```

* * *

我发现了第一个问题：

```
r.getString(i) 
```

我添加了一个

```
System.out.print("something") 
```

循环后，但它不想打印。

当我更改变量“i”并键入例如： 4 我在控制台上看到“某物”。变量 'colNumber' 设置为 5（但我的 sql 表有 7 列，我使用“select * from mytable”，所以我不认为这是一个计数器问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:21:59.797

如果要打印内部列表中的所有值，您应该执行以下操作：

```
<h:dataTable value="#{polaczenieSQL.queryResult}" var="w">
      <h:column>
         <f:facet name="head">typ</f:facet>
         #{w[0]} <!--will print the first element in the inner list-->
      </h:column>
      <h:column>
         <f:facet name="head">typ</f:facet>
         #{w[2]} <!--will print the second element in the inner list-->
      </h:column>
      ...
      <h:column>
         <f:facet name="head">typ</f:facet>
         #{w[n]} <!--will print the nth element in the inner list-->
      </h:column>
</h:dataTable> 
```

所以基本上如果你想打印一个内部列表的所有值，你可以使用以下样式：

```
<ui:repeat value="#{activeUser.listInList}" var="innerList">
    <ui:repeat value="#{innerList}" var="innerListValue">
        #{innerListValue}
    </ui:repeat>
</ui:repeat> 
```

关于异常吞咽，除非您确切知道自己缺少什么，否则您应该在捕获到异常时抛出异常。

# c# - 如何将属性绑定到行的背景

> ID：13939646
> 
> 赞同：1
> 
> 时间：2012-12-18T18:59:48.507
> 
> 标签：c#, wpf

我想将属性绑定到行的背景...

目标是将颜色随机设置为值“msgid”为空的行（我有 +- 10 个 RGB 代码）。

注意：为什么我必须设置 INotifyPropertyChanged ？我不明白...我不需要设置部分！？

是）我有的：

在我的窗口类中：

```
OtherClass viewModel = new OtherClass();
this.DataContext = viewModel; 
```

然后在其他类中：

```
 class OtherClass : INotifyPropertyChanged
{

    Brush color = new SolidColorBrush(Colors.Green);

    public Brush RowColor
    {

        get { return color; }
        set
        {
            color = value;
            this.OnPropertyChanged("RowColor");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    void OnPropertyChanged(string propName)
    {
        if (this.PropertyChanged != null)
            this.PropertyChanged(
                this, new PropertyChangedEventArgs(propName));
    }

} 
```

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="536" Width="659" Loaded="Window_Loaded" Icon="/WpfApplication1;component/Images/dtc.ico">

<Window.Resources>

    <XmlDataProvider x:Key="SmsData" XPath="/response">

    </XmlDataProvider>

</Window.Resources>

<Grid Width="642">
    <DataGrid ItemsSource="{Binding Source={StaticResource SmsData}, XPath=conv/sms}" AutoGenerateColumns="False" Name="dataGrid1" GridLinesVisibility="None" IsReadOnly="True" ScrollViewer.CanContentScroll="True" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Auto" Margin="-5,13,4,244" BorderThickness="0" UseLayoutRounding="False" IsEnabled="True" SelectionChanged="dataGrid1_SelectionChanged">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding XPath=msgid}" Width="100"  />
            <DataGridTextColumn Binding="{Binding XPath=imsgid}" Width="100"  />
            <DataGridTextColumn Binding="{Binding XPath=recipient}" Width="100"  />
            <DataGridTextColumn Binding="{Binding XPath=datetime}" Width="120" />
            <DataGridTextColumn Binding="{Binding XPath=message}" Width="225" />
        </DataGrid.Columns>

        <DataGrid.RowStyle>
            <Style TargetType="{x:Type  DataGridRow}">

               <DataTrigger Binding="{Binding XPath=msgid}" Value="{x:Null}">

                        <Setter Property="Background" Value="{Binding RowColor}" />

                    </DataTrigger>

            </Style>
        </DataGrid.RowStyle>
    </DataGrid>
    <RichTextBox Height="122" HorizontalAlignment="Left" Margin="402,311,0,0" Name="richTextBox1" VerticalAlignment="Top" Width="228" VerticalScrollBarVisibility="Visible" />
    <Menu Height="23" HorizontalAlignment="Left" Name="menu1" VerticalAlignment="Top" Width="645">
        <MenuItem Header="Menu">
            <MenuItem Header="Exit" />
        </MenuItem>
        <MenuItem Header="Logs" />
        <MenuItem Header="Help" />
    </Menu>
    <Image Height="48" HorizontalAlignment="Left" Margin="-10,251,0,0" Name="image1" Stretch="None" VerticalAlignment="Top" Width="317" Source="/WpfApplication1;component/Images/send%20sms.jpg" />
    <Button Content="send messge" Height="23" HorizontalAlignment="Left" Margin="402,454,0,0" Name="button1" VerticalAlignment="Top" Width="228" Click="button1_Click" />
    <Label Content="Number:" Height="28" HorizontalAlignment="Left" Margin="165,311,0,0" Name="label1" VerticalAlignment="Top" />
    <Image Height="35" HorizontalAlignment="Left" Margin="300,252,0,0" Name="image2" Stretch="Fill" VerticalAlignment="Top" Width="338" Source="/WpfApplication1;component/Images/line.jpg" />
    <TextBox Text="{Binding Path=Name2}" Height="23" HorizontalAlignment="Left" Margin="240,316,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:15:14.400

rowColor 属性不会引发 PropertyChanged 事件。

在 OtherClass 上实现 INotifyPropertychanged 并在 rowColor 属性的设置器中引发 PropertyChanged 事件。

顺便说一句：请坚持微软命名属性的方式：RowColor 而不是 rowColor。这可以防止混淆。

# c# - 具有“全局”设置的实例类

> ID：13939649
> 
> 赞同：0
> 
> 时间：2012-12-18T18:59:51.633
> 
> 标签：c#, .net

来自脚本背景，我开始使用 c# 和 .net。我创建了一个类，该类创建一个文本文件通知一个过程已完成。我在控制台应用程序中实例化这个类并在最后调用写入过程。我要做的是在发生错误或警告时跟踪所有其他类，并在通知中反映该事件。

我已经使用公共静态布尔值实现了这一点，因此无论正在运行什么类，当发生捕获时，我都可以将布尔值更新为 true。虽然我觉得这是错误的，但我目前还没有足够的了解来找到我应该做的事情。

任何人都可以帮忙吗？代码示例：

```
namespace Logging
{
public class Notice
{
    public static bool HasWarning { get; set; }
    public static bool HasError { get; set; }

    public string ProcessName {get; set;}

    public enum Status
    {
        [Description("Complete Success")]
        Complete_Success,
        [Description("Complete with Warnings")]
        Complete_With_Warnings,
        [Description("Error Incomplete")]
        Error_Incomplete
    }

    public void EndProcess(Status status)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append(string.Format("{0} is Complete!", ProcessName));
        sb.Append(Environment.NewLine);
        sb.Append(Environment.NewLine);
        sb.Append(string.Format("Completion Status: {0}", ToStringEnums(status)));
        sb.Append(Environment.NewLine);
        sb.Append(string.Format("Completion Time: {0}", DateTime.Now.ToString("MM/dd/yy H:mm:ss")));

        File.WriteAllText(string.Format(@"{0}\EndProcess.txt", Directory.GetCurrentDirectory()), sb.ToString());
    } 
```

这就是我所说的：

```
 private static void WriteNotice()
    {
        Notice newNotice = new Notice();
        newNotice.ProcessName = "NCOA";
        if (Notice.HasError == true)
            newNotice.EndProcess(Notice.Status.Error_Incomplete);
        else if (Notice.HasWarning == true)
            newNotice.EndProcess(Notice.Status.Complete_With_Warnings);
        else
            newNotice.EndProcess(Notice.Status.Complete_Success);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:11:53.450

我建议在您的代码周围使用 Try Catch 语句并跟踪如下：

```
 try
        {
            //your code goes here

        }
        catch (Exception ex)
        {
            //write exception detail to output window using .Net Tracing Tools
            System.Diagnostics.Debug.WriteLine(ex.Message);
        } 
```

对于更高级的日志记录机制，我建议使用[NLOG](http://nlog-project.org)，如下所示：

```
 static NLog.Logger logger = NLog.LogManager.GetCurrentClassLogger();
    try
    {
    //your code
    }
    catch (Exception ex)
    {
    logger.Error(ex.Message + System.Reflection.MethodBase.GetCurrentMethod());
    } 
```

# qt - 在 QGraphicsScene::addItem ( QGraphicsItem * item ) 之后获取 item 的父场景

> ID：13939652
> 
> 赞同：3
> 
> 时间：2012-12-18T19:00:04.173
> 
> 标签：qt, qgraphicsitem, qgraphicsscene

我创建了一个新的`QGraphicsItem`名为`myItem`. 在*mainwindow.cpp*文件中，我有一个`QGraphicsScene scene`. 在的构造函数中`mainwindow`：

```
ui->setupUi(this);
scene = new QGraphicsScene(this);
ui->graphicsView->setScene(scene);
item = new myItem();
scene->addItem(item); 
```

这工作正常。我可以在现场看到我的物品。但现在我想在*myItem.cpp*文件中获取场景。我怎样才能做到这一点？
先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:05:58.087

```
auto myScene = scene(); 
```

请先阅读[文档](https://qt-project.org/doc/qt-4.8/qgraphicsitem.html#scene)。

# sql - sql查询空数据未检索到

> ID：13939653
> 
> 赞同：0
> 
> 时间：2012-12-18T19:00:04.930
> 
> 标签：sql

![在此处输入图像描述](../Images/f1f6ddaaa8a369c4f4bbe8aca1eb9fa7.png)

表部门

![表部门](../Images/7b7dcd3c63748a7b8a5e012599ab3f32.png)

表员工

![在此处输入图像描述](../Images/7058e8928a47288d17b508641918589b.png)

有一个没有任何员工的运营部门。所以，我相信查询也会检索到行（图 1）：

Department_ID=10 , Department_Name =Operations, Employee=0

为什么不发生？？？

```
 SELECT EMPLOYEE.Department_ID, DEPARTMENT.Department_Name, Count(*) AS Employees 
FROM EMPLOYEE right JOIN DEPARTMENT ON DEPARTMENT.Department_ID = EMPLOYEE.Department_ID
GROUP BY DEPARTMENT.Department_Name,.EMPLOYEE.Department_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:07:29.920

由于您对此查询关心的主要数据来自 DEPARTMENT 表，因此您可能需要考虑将查询重写为：

```
SELECT DEPARTMENT.Department_ID, DEPARTMENT.Department_Name, Count(EMPLOYEE.Employee_ID) As Employees 
FROM DEPARTMENT 
LEFT JOIN EMPLOYEE ON EMPLOYEE.Department_ID = DEPARTMENT.Department_ID 
GROUP BY DEPARTMENT.Department_ID, DEPARTMENT.Department_Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:01:56.150

默认`join`值为 an `inner join`，它仅返回在两侧至少找到一行的行。替换`join`为`left join`检索没有员工的部门。

示例代码：

```
SELECT  e.Department_ID
,       d.Department_Name
,       count(e.Employee_ID) AS Employees 
FROM    Department d
LEFT JOIN
        Employee e
ON      d.Department_ID = e.Department_ID
GROUP BY 
        d.Department_ID
,       d.Department_Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T19:23:24.780

这应该可以解决问题。如果您先有表，您*可以输入*a ，但这不好的原因是因为很快您的查询将开始混合和连接，这变得*非常*难以阅读，即使对于经验丰富的 SQL 专业人员也是如此。通过坚持与您保持查询的可维护性和可理解性。（在极少数情况下，可能会简化具有复杂优先顺序的查询，但我只做了两次，以避免必须在连接组周围添加括号）。`RIGHT JOIN``EMPLOYEE``LEFT``RIGHT`*`LEFT JOIN``RIGHT JOIN`*

 *```
SELECT
   D.Department_ID,
   D.Department_Name,
   Employees = Count(*) 
FROM
   dbo.DEPARTMENT D
   LEFT JOIN dbo.EMPLOYEE E
      ON D.Department_ID = E.Department_ID
GROUP BY
   D.Department_ID,
   D.Department_Name 
```

另外，我建议您为表使用别名而不是完整的表名。当别名使用一致时，查询变得更容易扫描和理解。拼写整个表名经常会掩盖查询的其他部分。*

# jquery-ui - Prototype.js 干扰 Jquery UI

> ID：13939660
> 
> 赞同：0
> 
> 时间：2012-12-18T19:00:29.880
> 
> 标签：jquery-ui, tabs, prototypejs, lightbox

所以我目前正在使用一个电子商务 cms，它实现了 Lightbox 来显示大型产品图片。

在侧边栏中，我实现了我自己的由 jquery-ui 提供支持的选项卡组。

侧边栏在除产品页面之外的每个页面上都能完美运行。我很快发现问题是 Lightbox 使用的对原型的调用...当我注释掉对原型脚本的调用时，选项卡组再次开始工作。

我尝试了各种方法，例如尝试更改代码的范围并在调用脚本时重新排序，但这并没有奏效……关于我可以做些什么来纠正这种情况的任何想法？注意：我没有包含任何代码，因为我认为我们可以抛开 soem 理论 :)...如果您认为有任何帮助，我可以添加它

感谢您的帮助，~skev

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:39:25.993

问题是我需要使用 $.noConflict();

在@MichealKoper 提出这个建议之前，我不知道它存在

谢谢！

# javascript - 如何在 Javascript 数组中仅维护特定数量的元素

> ID：13939662
> 
> 赞同：0
> 
> 时间：2012-12-18T19:00:37.880
> 
> 标签：javascript, arrays, fifo

我只需要在 Javascript 数组中维护特定数量的元素。假设数组中只有 10 个项目。它应该遵循先进先出的概念，这意味着如果数组上有 10 个项目并添加了一个新项目，那么 item[0] 应该会自动从数组中弹出。有没有办法做到这一点，或者我应该在 Javascript 数组上以编程方式完成所有工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:10:44.853

我可能会创建自己的对象，其中包含一个数组：

```
var myArray = {
    arr: [],
    add: function(val) {
        this.arr.unshift(val);
        if (this.arr.length > 10) {
            this.arr.length = 10;
        }
    }
};

for (var i = 0; i < 15; i++) {
    myArray.add(i);
    //alert(myArray.arr.length);
}​ 
```

[http://jsfiddle.net/6Nevz/2/](http://jsfiddle.net/6Nevz/2/)

# exchangewebservices - Exchange Web 服务 - 如何使用 Account 扩展属性检索联系人

> ID：13939666
> 
> 赞同：0
> 
> 时间：2012-12-18T19:00:46.710
> 
> 标签：exchangewebservices, extended-properties

我正在使用 C# 和 Exchange Web 服务 API，但无法找到使用名为 Account 的扩展属性检索联系人的方法。我们使用这个字段来保存一个对内部开发系统有意义的整数。在 WebDAV 下，我们知道如何检索联系人，但需要一些帮助（希望是一个简短的示例或代码片段）来演示如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T03:20:00.253

不知道你是否还需要这个……但我自己解决了一些问题：

我[在这里的回答](https://stackoverflow.com/a/16726773/409025)应该是你想要的。我在这里使用布尔值和帐户：

```
ExchangeService service = this.GetService(); // my method to build service
FolderId folderID = GetPublicFolderID(service, "My Address Book"); 
ContactsFolder folder = ContactsFolder.Bind(service, folderID);
int folderCount = folder.TotalCount;

var guid       = DefaultExtendedPropertySet.PublicStrings;
var epdAccount = new ExtendedPropertyDefinition(0x3A00, MapiPropertyType.String);
var epdCID     = new ExtendedPropertyDefinition(0x3A4A, MapiPropertyType.String);
var epdCBLN    = new ExtendedPropertyDefinition(guid, "CustomBln", MapiPropertyType.Boolean);
var epdCDBL    = new ExtendedPropertyDefinition(guid, "CustomDbl", MapiPropertyType.Double);

var view = new ItemView(folderCount);
view.PropertySet = new PropertySet(BasePropertySet.FirstClassProperties);
view.PropertySet.Add(epdAccount);
view.PropertySet.Add(epdCID);
view.PropertySet.Add(epdCBLN);
view.PropertySet.Add(epdCDBL);  

//var searchOrFilterCollection = new List<SearchFilter>();
//searchOrFilterCollection.Add(new SearchFilter.IsEqualTo(epdCBLN, true));
//searchOrFilterCollection.Add(new SearchFilter.IsEqualTo(epdAccount, "user"));
//var filter = new SearchFilter.SearchFilterCollection(LogicalOperator.And, searchOrFilterCollection);

var filter = new SearchFilter.IsEqualTo(epdAccount, "user");
var contacts = service.FindItems(folderID, filter, view);

foreach (Contact contact in contacts)
{
    string Account;
    int  CID;
    bool CBLN;
    double CDBL;

    contact.GetLoadedPropertyDefinitions();
    contact.TryGetProperty(epdAccuont, out Account);
    contact.TryGetProperty(epdCID, out CID);
    contact.TryGetProperty(epdCBLN, out CBLN);
    contact.TryGetProperty(epdCDBL, out CDBL);

    Console.WriteLine(String.Format("{0, -20} - {1} - {2} - {3} - {4}"
                    , contact.DisplayName
                    , contact.EmailAddresses[EmailAddressKey.EmailAddress1]
                    , Account
                    , CID
                    , CBLN
                    , CDBL
                ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:50:23.433

我已经在约会中使用了扩展属性，所以他们的工作原理可能与联系人相同。

想法是为约会放置一个指南，因为他们的本地 ID 不是恒定的。

```
private static readonly PropertyDefinitionBase AppointementIdPropertyDefinition = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.PublicStrings, "AppointmentID", MapiPropertyType.String);
public static PropertySet PropertySet = new PropertySet(BasePropertySet.FirstClassProperties, AppointementIdPropertyDefinition);

//Setting the property for the appointment 
 public static void SetGuidForAppointement(Appointment appointment)
{
    try
    {
        appointment.SetExtendedProperty((ExtendedPropertyDefinition)AppointementIdPropertyDefinition, Guid.NewGuid().ToString());
        appointment.Update(ConflictResolutionMode.AlwaysOverwrite, SendInvitationsOrCancellationsMode.SendToNone);
    }
    catch (Exception ex)
    {
        // logging the exception
    }
}

//Getting the property for the appointment
 public static string GetGuidForAppointement(Appointment appointment)
{
    var result = "";
    try
    {
        appointment.Load(PropertySet);
        foreach (var extendedProperty in appointment.ExtendedProperties)
        {
            if (extendedProperty.PropertyDefinition.Name == "AppointmentID")
            {
                result = extendedProperty.Value.ToString();
            }
        }
    }
    catch (Exception ex)
    {
     // logging the exception
    }
    return result;
} 
```

# android - 如何在 android 中创建 SQLlite 数据库？

> ID：13939670
> 
> 赞同：0
> 
> 时间：2012-12-18T19:01:10.313
> 
> 标签：android, database, sqlite

我正在编写一个简单的代码来尝试查看数据库文件是如何在 data/data/getPackageName()/databases 文件夹中创建的。代码如下：

```
package com.package.test;

import android.os.Bundle;
import android.app.Activity;
import android.database.sqlite.SQLiteDatabase;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

   SQLiteDatabase db = openOrCreateDatabase("MYDB",MODE_PRIVATE,null);
   db .execSQL("CREATE TABLE IF NOT EXISTS MyTable (LastName VARCHAR, FirstName VARCHAR, AGE INT(3));");
   db.execSQL("INSERT INTO MyTables VALUES ('Brimelow', 'lee', 37);");
   db.close();  
 }
} 
```

问题是，当我尝试运行上述代码时，出现以下错误：

```
12-18 10:35:21.568: I/Database(2090): sqlite returned: error code = 1, msg = no such table: MyTables
12-18 10:35:21.568: E/Database(2090): Failure 1 (no such table: MyTables) on 0x125ef0 when preparing 'INSERT INTO MyTables VALUES ('Brimelow', 'lee', 37);'.
12-18 10:35:21.568: W/dalvikvm(2090): threadid=1: thread exiting with uncaught exception (group=0x4001d890)
12-18 10:35:21.583: E/AndroidRuntime(2090): FATAL EXCEPTION: main
12-18 10:35:21.583: E/AndroidRuntime(2090): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.package.test/com.package.test.MainActivity}: android.database.sqlite.SQLiteException: no such table: MyTables: INSERT INTO MyTables VALUES ('Brimelow', 'lee', 37); 
```

同样在 Eclipse 中，当我在 DDMS 视图的文件资源管理器中搜索时，我似乎在我的“数据”文件夹中找不到任何东西。我知道数据库表无法创建，但我看不出问题出在哪里。有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:03:37.953

您正在创建表“MyTable”，但在“MyTables”中插入您的值

将其更改为：

```
db.execSQL("INSERT INTO MyTable VALUES ('Brimelow', 'lee', 37);"); 
```

# c# - Visual Studio 2010：停止“添加可部署依赖项”

> ID：13939671
> 
> 赞同：2
> 
> 时间：2012-12-18T19:01:13.897
> 
> 标签：c#, visual-studio-2010

我打开了“ **Add Deployable Dependencies** ”并决定不使用它。如何**阻止构建**添加所有可部署的依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:53:24.200

找到了。

要在 Visual Studio 中禁用添加可部署依赖项，请删除项目根目录中的项目 Web 部署 .xml 文件。它不在项目中，因此导航到该文件夹​​。

# java - Java：字符串拆分（）：我希望它在末尾包含空字符串

> ID：13939675
> 
> 赞同：82
> 
> 时间：2012-12-18T19:01:26.337
> 
> 标签：java, string, split

我有以下字符串：

```
String str = "\nHERE\n\nTHERE\n\nEVERYWHERE\n\n"; 
```

如果你只是打印这个，它会像这样输出（当然`\n`不会“字面上”打印）：

```
\n
HERE\n
\n
THERE\n
\n
EVERYWHERE\n
\n
\n 
```

当我调用该方法`split("\n")`时，我想获取新行 ( `\n`) 字符之间的所有字符串，甚至是末尾的空字符串。

例如，如果我今天这样做：

```
String strArray[] = str.split("\n");

System.out.println("strArray.length - " + strArray.length);
for(int i = 0; i < strArray.length; i++)
    System.out.println("strArray[" + i + "] - \"" + strArray[i] + "\""); 
```

我希望它像这样打印出来（输出 A）：

```
strArray.length - 8
strArray[0] - ""
strArray[1] - "HERE"
strArray[2] - ""
strArray[3] - "THERE"
strArray[4] - ""
strArray[5] - "EVERYWHERE"
strArray[6] - ""
strArray[7] - "" 
```

目前，它像这样打印（输出 B），并跳过任何结尾的空字符串：

```
strArray.length - 6
strArray[0] - ""
strArray[1] - "HERE"
strArray[2] - ""
strArray[3] - "THERE"
strArray[4] - ""
strArray[5] - "EVERYWHERE" 
```

如何使该`split()`方法包含输出 A 中的空字符串？当然，我可以编写一段多行代码，但想知道，在我浪费时间尝试实现它之前，是否有一个简单的方法或额外的两行左右的代码可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-12-18T19:16:03.897

使用`str.split("\n", -1)`（带有否定`limit`论点）。当`split`给出零或没有`limit`参数时，它会丢弃尾随的空字段，而当给出正`limit`参数时，它将字段数限制为该数字，但*负数*限制意味着允许任意数量的字段而不丢弃尾随的空字段。这[在此处](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)进行了记录，并且该行为取自 Perl。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T19:11:08.783

指定单参数拆分方法以忽略尾随的空字符串拆分，但采用“限制”参数的版本会保留它们，因此一种选择是使用具有较大限制的版本。

```
String strArray[] = str.split("\n", Integer.MAX_VALUE); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T19:18:18.237

就个人而言，我喜欢 Guava 用于拆分的实用程序：

```
System.out.println(Iterables.toString(
   Splitter.on('\n').split(input))); 
```

然后，如果要配置空字符串行为，可以这样做：

```
System.out.println(Iterables.toString(
   Splitter.on('\n').omitEmptyStrings().split(input))); 
```

# python - Python 中的优雅优化

> ID：13939677
> 
> 赞同：1
> 
> 时间：2012-12-18T19:01:36.927
> 
> 标签：python, optimization

我对这个问题有一些解决方案，但我知道在某个地方有一个优雅的解决方案，也许是两个班轮。

我有大量（M）项选择，基本上是具有数字特征的字典，例如： ItemOne = {width:5, height:10, cost:200,...}

我想将这组字典/项目分成 N (2, 3,...) 组，以便根据标准将宽度、高度或其他特征之间的差异保持在最低限度（我在想平方差的总和）。具有标准的部分不是问题，我只是很难找出分割数据集并获得所有组合而不重复子集的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:47:43.167

不太清楚你在问什么，但我会试一试

```
#example items
items = [{'width':5, 'height':10, 'cost':200}, {'width':6, 'height':9, 'cost':2}]

#whatever you want your criteria to be
def calculate_criteria(item):
    return item['width']+item['height']+item['cost']

# create subsets based on criterion
subsets = {}
for item in items:
    criteria = calculate_criteria(item)
    subset = subsets.get(criteria, list())
    subset.append(item)
    subsets[criteria] = subset

print subsets
{17: [{'width': 6, 'cost': 2, 'height': 9}], 215: [{'width': 5, 'cost': 200, 'height': 10}]} 
```

甚至更好地使用`collections.defaultdict`

```
# create subsets based on criterion
subsets = collections.defaultdict(list)
for item in items:
    subsets[calculate_criteria(item)].append(item) 
```

# php - 如何从返回的 JSON 数组中获取值

> ID：13939678
> 
> 赞同：0
> 
> 时间：2012-12-18T19:01:37.247
> 
> 标签：php, json

如果我有：

```
print_r($request->getRequestVars()); 
```

打印出来：

```
Array ( [n] => Coors [s] => 3 ) 
```

我将如何打印出 coors？

```
echo $request->getRequestVars()->n; 
```

不工作，我尝试了其他几件事。我知道这是超级基本的，但这让我很沮丧

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:18:18.560

请注意，`$request->getRequestVars()`返回数组不是对象。如果您正在运行函数数组取消引用，那么您可以`PHP 5.4`拥有[：](https://wiki.php.net/rfc/functionarraydereferencing)

```
echo $request->getRequestVars()['n']; 
```

别的

```
$v = $request->getRequestVars();
echo $v['n']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:04:11.650

尝试：

```
<?php

$var = $request->getRequestVars();
echo $var['n'];

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T19:05:29.807

我假设该方法`$request->getRequestVars();`实际返回一个数组。因此，您必须按照以下方式做一些事情：

```
$foo = $request->getRequestVars();
echo $foo['n']; 
```

# lotus-notes - Lotus Notes - 接收到特定邮件的电子邮件的自动回复代理

> ID：13939680
> 
> 赞同：2
> 
> 时间：2012-12-18T19:01:41.347
> 
> 标签：lotus-notes

我使用简单的操作代理创建了一个自动回复代理，它当前响应所有发件人，我只想将回复发送给一组特定的发件人。

这是我想要实现的示例：

我有一个带有电子邮件地址的 Lotus Notes 邮件数据库：`inquiries@estateexports.com`.

我为此邮件数据库创建了一个电子邮件别名：`order@estateexports.com`.

我只想向发送电子邮件的发件人发送自动回复`order@estateexports.com`。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T21:42:10.630

创建代理时，单击设计器左侧窗格中的“文档选择”，然后单击底部的“添加条件”按钮。这将打开“添加条件”对话框。填写如下：

*   条件 = '按字段'
*   字段 = '发送至'
*   运算符 = '包含'
*   值 = 'order@estateexports.com'

# mysql - 按空记录分组

> ID：13939683
> 
> 赞同：1
> 
> 时间：2012-12-18T19:01:48.073
> 
> 标签：mysql, group-by

我有这样的结构表：

```
 --------------------------------------------
|  id  |  tid  | uid |   title   |   time    |
 --------------------------------------------
|  1   |   3   | 15  |           |   120333  |
 --------------------------------------------
|  2   |   3   | 15  | Lorem ip..|   120394  |
 --------------------------------------------
|  3   |   3   | 15  |           |   120344  |
 --------------------------------------------
|  4   |   2   | 15  | Lorem ip..|   128994  |
 --------------------------------------------
|  5   |   2   | 15  | Lorem ip..|   126782  |
 -------------------------------------------- 
```

我有这样的查询（它选择所有带有“uid”的记录 - 用户 id 为 15）：

```
SELECT * FROM my_table WHERE uid = :uid GROUP BY tid ORDER BY time DESC 
```

Thos 工作正常，但你有一个问题：当我显示此查询的结果时，“标题”行通常是空的。（注意：每个“tid”数字必须至少有一个“title”）

我怎样才能强制这个查询总是显示标题，所以它永远不会是空的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:12:12.543

如果您想为 Title 字段取任意值，或者如果它们都相同，则可以对该列执行 MIN()。MIN 将省略空值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-18T19:18:11.977

```
SELECT COALESCE(title, 'no title'), * FROM my_table WHERE uid = :uid GROUP BY tid ORDER BY time DESC 
```

# java - Junit 测试，不会在 ArrayList 返回类型方法处停止运行

> ID：13939685
> 
> 赞同：0
> 
> 时间：2012-12-18T19:01:53.310
> 
> 标签：java, return, junit4

您好，我正在尝试测试一个返回 an`ArrayList`但`junit 4 framework`在我指定的测试中冻结的方法。测试

```
 @Test
    public void testInDebt() {
        AdminController cont = new AdminController();

        Apartment o1 = new Apartment(1, 4, "Maier B", true);
        Apartment o2 = new Apartment(1, 4, "Maier B", false);
        ArrayList<Expense> exp = new ArrayList<>();
        cont.addKeyWithList(o2, exp);

        assertEquals(exp, cont.inDebt());  <<<<<< Problem here  when I call inDebt
//      
//      cont.addKeyWithList(o1, exp);   
//      assertFalse(cont.inDebt().isEmpty());
    } 
```

回购类

```
public ArrayList<String> inDebt(){
        ArrayList<String> inDebt = new ArrayList<>();
        for (Map.Entry<Apartment, ArrayList<Expense>> entry : mp.entrySet() ) {
            if(entry.getKey().isDebt()){        // Flag like method on the key if  there are debts.
//              System.out.println("Key = " + entry.getKey() + ", Object = " + entry.getValue()); 
                inDebt.add(entry.getKey().getOwner());
            }
        }
        return inDebt;
    } 
```

控制器类

```
@Override
public ArrayList<String> inDebt() {
    return repo.inDebt();
} 
```

堆栈跟踪

```
proj_individual [JUnit] 
    org.eclipse.jdt.internal.junit.runner.RemoteTestRunner at localhost:24285   
        Thread [main] (Suspended (entry into method inDebt in AdminController)) 
            AdminController.inDebt() line: 24   
            AdminControllTests.testInDebt() line: 75    
            NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
            NativeMethodAccessorImpl.invoke(Object, Object[]) line: not available   
            DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: not available   
            Method.invoke(Object, Object...) line: not available    
            FrameworkMethod$1.runReflectiveCall() line: 45  
            FrameworkMethod$1(ReflectiveCallable).run() line: 15    
            FrameworkMethod.invokeExplosively(Object, Object...) line: 42   
            InvokeMethod.evaluate() line: 20    
            BlockJUnit4ClassRunner(ParentRunner<T>).runLeaf(Statement, Description, RunNotifier) line: 263  
            BlockJUnit4ClassRunner.runChild(FrameworkMethod, RunNotifier) line: 68  
            BlockJUnit4ClassRunner.runChild(Object, RunNotifier) line: 47   
            ParentRunner$3.run() line: 231  
            ParentRunner$1.schedule(Runnable) line: 60  
            BlockJUnit4ClassRunner(ParentRunner<T>).runChildren(RunNotifier) line: 229  
            ParentRunner<T>.access$000(ParentRunner, RunNotifier) line: 50  
            ParentRunner$2.evaluate() line: 222 
            BlockJUnit4ClassRunner(ParentRunner<T>).run(RunNotifier) line: 300  
            JUnit4TestClassReference(JUnit4TestReference).run(TestExecution) line: 50   
            TestExecution.run(ITestReference[]) line: 38    
            RemoteTestRunner.runTests(String[], String, TestExecution) line: 467    
            RemoteTestRunner.runTests(TestExecution) line: 683  
            RemoteTestRunner.run() line: 390    
            RemoteTestRunner.main(String[]) line: 197   
        Thread [ReaderThread] (Running) 
    C:\Program Files\Java\jre7\bin\javaw.exe (Dec 18, 2012 8:00:03 PM) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:28:17.340

以下几行：

```
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner at localhost:24285   
    Thread [main] (Suspended (entry into method inDebt in AdminController)) 
```

表明由于在管理控制器中遇到断点，程序的执行被暂停。您可以在测试运行时切换到调试视图以单步执行挂起的线程。

# sql-server - 使用 BulkCopy 将数据表复制到 SqlServer 新表或现有表

> ID：13939687
> 
> 赞同：1
> 
> 时间：2012-12-18T19:01:57.833
> 
> 标签：sql-server, database, visual-studio-2010

有没有办法将内存数据表（vb.net）及其列（模式）复制到 sql server 新表或现有表中？如果一列已添加到临时表中，是否有办法批量复制将新列添加到现有 sql server 表中的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:29:47.720

这是我用来将 DataTable 持久化到 SQL Server 的方法，它是用 C# 编写的，但您应该能够很容易地转换它：

```
public static string CreateCopyTableDataSQLServer(DataTable dt, string tableName, string connectionString)
{
    //Create the Destination Table based upon the structure of the DataTable
    string sql = string.Empty;
    string retValue = string.Empty;
    StringBuilder sbu;

    try
    {
        if (dt.Rows.Count == 0)
        {
            retValue += "The table " + tableName + " was NOT created because the source table contained zero (0) rows of data";
        }
        else
        {
            sbu = new StringBuilder(string.Format("IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[{0}]') AND type in (N'U')) DROP TABLE [dbo].[{0}] ", tableName));
            sbu.Append("Create Table " + tableName + " (");

            string dataType = string.Empty;

            foreach (DataColumn column in dt.Columns)
            {
                switch (column.DataType.Name)
                {
                    case "String":
                        dataType = " nvarchar(MAX) ";
                        break;
                    case "DateTime":
                        dataType = " nvarchar(MAX) ";
                        break;
                    case "Boolean":
                        dataType = " nvarchar(MAX) ";
                        break;
                    case "Int32":
                        dataType = " int ";
                        break;
                    case "Byte[]":
                        dataType = " varbinary(8000) ";
                        break;
                    default:
                        dataType = " nvarchar(MAX) ";
                        break;
                }
                string columnName = column.ColumnName.ToString();
                columnName = columnName.FormatProperNameCase();
                columnName = column.ColumnName.ToString().Replace(" ", "_").Replace("-", "_").Replace("#", "_").FormatRemoveNonLettersNumbers();
                sbu.Append("[" + columnName + "]" + dataType + " null, ");
            }

            sbu.Remove(sbu.Length - 2, 2);
            sbu.Append(")");
            sql = sbu.ToString();
            sql = sql.Replace("/", "_").Replace("\\", "_");

            //Copy the Data From the Data Table into the destination Table that was created above
            bool errorRetValue = SQLServerBulkCopy(dt, sql, tableName, connectionString);

            if (!errorRetValue)
            {
                retValue += " \r\n";
                retValue += "There was an error!";
            }
        }
        return retValue;
    }
    catch (Exception ex)
    {
        retValue = string.Format("Error - There was a problem with table {0} and thus it's data has NOT been transferred - {1}", tableName, ex.Message);
        return retValue;
    }
}

public static bool SQLServerBulkCopy(DataTable dt, string Sql, string TableName, string connectionString, bool connectionTypeSQL = true)
{
    try
    {
        if (connectionTypeSQL)
        {
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                conn.Open();
                using (SqlBulkCopy sqlcpy = new SqlBulkCopy(conn))
                {
                    using (SqlCommand cmd = new SqlCommand(Sql, conn))
                    {
                        cmd.ExecuteNonQuery();
                        sqlcpy.DestinationTableName = TableName;  //copy the datatable to the sql table
                        sqlcpy.WriteToServer(dt);
                    }
                }
            }
            return true;
        }
        else
        {
            throw new ArgumentOutOfRangeException("This method is only for SQL Server Engines");
        }
    }
    catch (Exception ex)
    {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:03:05.990

用于创建新表：

```
select  *
into    YourDb.dbo.NewTable
from    #YourTempTable 
```

要附加到现有表：

```
insert  YourDb.dbo.ExistingTable
select  *
from    #YourTempTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T11:02:38.240

在我工作的地方，他们不允许链接服务器，所以我使用 VB.NET 从不同的服务器传输了两个表：

1.  将源 Sql 表复制到 Datatable 中
2.  映射数据表中的列
3.  将 Datatable 复制到目标 Sql 表中

代码如下：

```
Sub BulkTransferSQLTables(strSchema As String, strTable As String, StrOutputServer As String, StrOutputDatabase As String) ', strEndSrvrDb As String)
    Dim DTBulkTransfer As New DataTable
    'get table of information
    Dim strSchemaTable As String = strSchema & "." & strTable
    Dim sqlstring As String = "Select * from " & strSchemaTable
    Dim Conn As SqlConnection = New SqlConnection("Data Source=" & PubstrServer & ";Initial Catalog=" & PubstrDatabase & ";Integrated Security=True") 'connection to server end
    Dim selectCMD As SqlCommand
    Dim adapter As SqlDataAdapter
    adapter = New SqlDataAdapter(sqlstring, Conn)

    'fill dataset
    Conn.Open()
    adapter.Fill(DTBulkTransfer)

    'Debug.Print(DTBulkTransfer.Rows.Count & " Rows, " & DTBulkTransfer.Columns.Count & " Cols ") 'works

    'build create table statement using details of destination table
    Dim strColname As String
    Dim intRecCount As Integer
    'Dim strSchema As String = "SuffolkPseudo"
    'Dim strTable As String = "Acute_Supporting"
    strSchemaTable = strSchema & "." & strTable
    Dim strCreateTableSQL As String = "CREATE TABLE [" & StrOutputDatabase & "].[" & strSchema & "].[" & strTable & "]("

    Dim strSQL As String = " select [Statement], [RowNo] = ROW_NUMBER() OVER (ORDER BY Statement) FROM [" & PubstrDatabase & "].[dbo].[vwTableAndColumns] " & _
        "where [TABLE_SCHEMA] = '" & strSchema & "' and table_name = '" & strTable & "'"

    Dim strSQL2 As String = "" & _
    " with CTE as ( " & _
    " " & _
    strSQL & _
    " ) " & _
    " " & _
    " select count(*) from CTE "

    intRecCount = GetSQLTableVal(strSQL2)

    For X = 1 To intRecCount
        strSQL2 = "" & _
                " with CTE as ( " & _
                " " & _
                strSQL & _
                " ) " & _
                " " & _
                " select * from CTE "
        strColname = GetSQLTableVal(strSQL2 & " Where [RowNo] = " & X)

        strCreateTableSQL = strCreateTableSQL & " " & Chr(13) & strColname
    Next

    strCreateTableSQL = Microsoft.VisualBasic.Left(strCreateTableSQL, Microsoft.VisualBasic.Len(strCreateTableSQL) - 1) & ") ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]"

    Debug.Print(strCreateTableSQL)

    Conn.Close()

    Dim Conn2 As SqlConnection = New SqlConnection("Data Source=" & StrOutputServer & ";Initial Catalog=" & StrOutputDatabase & ";Integrated Security=True") 'connection to server end

    'create sql string to check if table exists or not.

    strSQL = " select count(*) FROM [" & StrOutputDatabase & "].sys.Tables as t1 " & _
            " inner join [" & StrOutputDatabase & "].sys.schemas as t2 " & _
            " ON t1.schema_id = t2.schema_id" & _
            " where t2.name = '" & strSchema & "' " & _
            " and t1.name = '" & strTable & "'"

    If GetSQLTableValExternalServer(strSQL, StrOutputServer, StrOutputDatabase) > 0 Then

        Conn2.Open()
        'drop old table in destination area and recreate table.
        strSQL = "drop table " & StrOutputDatabase & "." & strSchema & "." & strTable
        selectCMD = New SqlCommand(strSQL, Conn2)
        selectCMD.CommandTimeout = 600
        selectCMD.ExecuteNonQuery()
        Conn2.Close()
    End If

    Conn2.Open()
    'create the table structure 
    selectCMD = New SqlCommand(strCreateTableSQL, Conn2)
    selectCMD.CommandTimeout = 600

    selectCMD.ExecuteNonQuery()

    'list datatable columns 

    Dim name(DTBulkTransfer.Columns.Count) As String
    Dim i As Integer = 0

    'transfer to sql database from datatable to newly created empty detsination table
    Using bulkcopy As SqlBulkCopy = New SqlBulkCopy(Conn2)

        bulkcopy.BulkCopyTimeout = 3000
        bulkcopy.DestinationTableName = strSchemaTable

        For Each column As DataColumn In DTBulkTransfer.Columns
            name(i) = column.ColumnName
            Dim ColMap As New SqlBulkCopyColumnMapping(name(i).ToString, name(i).ToString)
            bulkcopy.ColumnMappings.Add(ColMap)
            Debug.Print("dt COLUMN: " & name(i).ToString)
            i += 1
        Next

        bulkcopy.WriteToServer(DTBulkTransfer)
    End Using

    Conn2.Close()

    MsgBox("Bulk Transfer Complete")

End Sub 
```

谢谢

埃迪·贾德

# javascript - google chrome中按钮标签的子节点如何触发onclick事件？

> ID：13939689
> 
> 赞同：2
> 
> 时间：2012-12-18T19:02:08.087
> 
> 标签：javascript, html, google-chrome, button

情况：

1.  使用 document.createElement 创建按钮对象
2.  直接分配onclick事件，例如：button.onclick = showResult;
3.  修改按钮 innerHtml/append img 节点（我都试过了），在里面放一个放大镜 png 图标。
4.  定义showResult函数，它接收evt参数，然后尝试获取目标tagName属性，但是当你点击图标时，它返回'IMG'而不是'BUTTON'

这是片段：

```
td = document.createElement( 'td' );
btn = document.createElement( 'button' );
btn.type = "button";
btn.onclick = showResults;
btn.innerHTML = '<img src="../img/mag.png" />';
td.appendChild( btn ); 
```

和功能

```
function showResults( evt ) {
    console.log( evt.target.src );
} 
```

我使用这个条件解决了这个问题：

```
var btn = evt.target == 'BUTTON' ? evt.target : evt.target.parentNode; 
```

但我真的不喜欢它，有没有一种解决方法或关于这种行为的东西，你可以指出我的眼睛吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:14:40.407

我希望这可以帮助你

```
var btn = document.getElementById('btn');
btn.onclick = function(e) {
    clickedButton = e.currentTarget;
    console.log(clickedButton);
}​ 
```

检查示例[http://jsfiddle.net/Kohver/RD3Zg/](http://jsfiddle.net/Kohver/RD3Zg/)

# google-chrome - 按标题查找现有书签文件夹？

> ID：13939692
> 
> 赞同：0
> 
> 时间：2012-12-18T19:02:17.383
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试恢复**标题**与给定字符串匹配的任何书签文件夹的**文件夹 ID 。**

 **问题是当文本相同时它不会返回文件夹ID：C

这是我的代码：

```
chrome.bookmarks.getTree(function(bookmarks) 
{
  search_for_url(bookmarks, "herpaderp");
}); 
```

```
function search_for_title(bookmarks, title)
{
  for(i=0; i < bookmarks.length; i++)
  { 
    if(bookmarks[i].url != null && bookmarks[i].title == title)
    {
      // Totally found a folder that matches!
      return bookmarks[i].id;
    }
    else
    {
      if(bookmarks[i].children)
      {  
        // inception recursive stuff to get into the next layer of children
        return search_for_title(bookmarks[i].children, title);
      }
    }
  }

  // No results :C
  return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:52:44.983

`search_for_title`您的功能有两个问题。

1.  变量`i` **必须**是本地的。要使其成为局部变量，您必须使用**var** i = 0 而不是`i = 0`在`for`语句中。

2.  `search_for_title``false`当找不到具有指定标题的书签时返回，但您仍需要查看下一项，因此在递归调用之后`search_for_title`，*只有*找到书签时才`return`返回值。否则，应该继续搜索而不是返回。*`false`*

 *这是我测试正确运行的代码：

```
function search_for_title(bookmarks, title)
{
  for(var i=0; i < bookmarks.length; i++)
  { 
    if(bookmarks[i].url != null && bookmarks[i].title == title)
    {
      // Totally found a folder that matches!
      return bookmarks[i].id;
    }
    else
    {
      if(bookmarks[i].children)
      {  
        // inception recursive stuff to get into the next layer of children
        var id = search_for_title(bookmarks[i].children, title);
        if(id)
          return id;
      }
    }
  }

  // No results :C
  return false;
} 
```***

# node.js - Node.js + MongoDB 更新操作确认

> ID：13939695
> 
> 赞同：2
> 
> 时间：2012-12-18T19:02:25.913
> 
> 标签：node.js, mongodb

在 Node.js 中，我（简要地）有这个脚本：

```
var http = require('http');
var XmlStream = require('xml-stream');
var mongo = require('mongodb');

var tims = { ... };

var db = new mongo.Db('tims', new mongo.Server("127.0.0.1", 27017, {}), {w: 1});
db.open(function(e, db) {
    var req = http.get({
        host: tims.uri,
        path: '/xml/'+tims.database+tims.services.database
    }).on('response', function(res) {
        res.setEncoding('utf8');
        cProjects = db.collection("projects");
        var xml = new XmlStream(res);

        xml.on('updateElement: Tims ProjectID', function(project) {
            // console.log(project.$text+' - '+project.$.title);
            cProjects.update({project_id: project.$text}, {project_id: project.$text, title: project.$.title}, {upsert:true}, function(err, result) {
                console.log('result: '+result);
            });     
        });

        xml.on('end', function(data) {
            db.close();
        });

    });
}); 
```

我正在使用一个名为[xml-stream](https://github.com/assistunion/xml-stream)的 Node.js 包，它将来自 Node 的响应块拼凑在一起，以便在处理之前获取有效的 XML。我的问题：如果我遗漏了

```
xml.on('end', function(data) {
    db.close();
}); 
```

我的连接永远不会关闭，控制台只是挂起。好处是`console.log('result: '+result);`写入控制台，我可以看到我的数据已成功提交。因此，如果我在事件中离开`end`并在处理完所有 XML 后关闭数据库，则 Node 实例在`console.log('result: '+result)`写入之前终止。

我是 MongoDB 和 Node.js 的新手，所以我很好奇这里有什么最佳实践来确认，或者简单地指出我做错了什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:00:26.807

看起来`'end'`事件发生在所有`update`回调完成之前。因此，您需要稍微修改您的代码以跟踪仍待处理的更新数量，并且仅`db.close()`在`'end'`事件已触发且所有待处理更新都完成后才调用。

所以是这样的：

```
db.open(function(e, db) {
    var req = http.get({
        host: tims.uri,
        path: '/xml/'+tims.database+tims.services.database
    }).on('response', function(res) {
        res.setEncoding('utf8');
        cProjects = db.collection("projects");
        var xml = new XmlStream(res);
        var end = false;
        var pending = 0;

        xml.on('updateElement: Tims ProjectID', function(project) {
            // console.log(project.$text+' - '+project.$.title);
            ++pending;
            cProjects.update({project_id: project.$text}, {project_id: project.$text, title: project.$.title}, {upsert:true}, function(err, result) {
                console.log('result: '+result);
                if (--pending === 0 && end) {
                    db.close();
                }
            });     
        });

        xml.on('end', function(data) {
            end = true;
        });

    });
}); 
```

# xpath - XPath - 获取 textcontent() 和 HTML

> ID：13939696
> 
> 赞同：1
> 
> 时间：2012-12-18T19:02:28.837
> 
> 标签：xpath, domdocument

假设我有以下 HTML：

```
<div class="some-class">
     <p> some paragraph</p>
     <h2>a heading</h2>
</div> 
```

我想获取 中`<div class='some-class'>`的所有内容，包括 HTML。以下仅抓取文本：

```
$descriptions = $xpath->query("//div[contains(@class, 'some-class')]");
foreach($descriptions as $description)
       print $description->textContent; 
```

获取包含的 HTML 标签的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:02:37.190

使用这个函数——我从来没有找到任何内置函数，但这很好用：

```
function getInnerHTML($node)
{
    $innerHTML = "";
    $children = $node->childNodes; 
    foreach ($children as $child) { 
        $tmp_doc = new DOMDocument(); 
        $tmp_doc->appendChild($tmp_doc->importNode($child,true));        
        $innerHTML .= $tmp_doc->saveHTML(); 
    } 
    return $innerHTML;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:11:27.960

我相信您正在寻找`outerXml`- 看看[DOMDocument::saveXML](http://php.net/manual/en/domdocument.savexml.php)。还是我误解了你 - 你只需要`<div>`元素的 xml 序列化及其属性轴吗？

**编辑**我的意思是你想要：

```
<div class="some-class">
     <p> some paragraph</p>
     <h2>a heading</h2>
</div> 
```

要不就

```
<div class="some-class" /> 
```

?

# c# - C# Foreach-loop 给出空错误

> ID：13939697
> 
> 赞同：0
> 
> 时间：2012-12-18T19:02:31.427
> 
> 标签：c#, exception, foreach, null

我正在编写一些代码，其中有一部分给我带来了麻烦。我的代码中有以下结构：

```
foreach (Node node in nodes)
{
    try
    {
        bool n = node.previous == null;
    }
    catch (Exception e)
        {
            StreamWriter s = new StreamWriter("error.txt");
            s.WriteLine(e.Message);
            s.WriteLine("-----------");
            s.Close();
        }
} 
```

这里 Node 是自定义类型，node.prev 变量也是自定义类型（Location）。运行它会给出以下错误日志：

```
Object reference not set to an instance of an object.
----------- 
```

我 100% 确定该节点不为空（*foreach* = 不正确，抱歉！）。此外，正如您在以下清单中看到的那样，Node.previous 在声明时设置为 null：

```
public class Node
{
    public Location previous = null;
    public Location location;
    public int distance;
    ...
    ...
} 
```

我不知道如何解决发生的这些异常，而且我对如何解决这个问题有任何想法。有人可以帮我吗？

请注意，这些都不是最终代码，但我筛选了无关紧要的部分！

在此先感谢，德尔皮

**编辑：Ricovox 帮助我解决了[这个问题](https://stackoverflow.com/a/13939917/1764970)，非常感谢！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:10:25.260

最可能的问题是`node` **null** !。foreach 语句没有任何内容可以防止`node`为空，因为通常 IEnumerable 对象（例如列表或集合）**可以**包含空作为有效项。

如果为 null 则不会引发错误`previous`（除非`node.prev`类/结构覆盖了`==`运算符）。

正如其他人所提到的，进行这样的测试来验证：

```
foreach (Node node in nodes)
{
    bool n;
    try
    {
        if (node == null) 
        {
           n = true; //do something to deal with a null node
        }
        else 
        {
          n = node.previous == null;
        }
    }
    catch (Exception e)
    {
        StreamWriter s = new StreamWriter("error.txt");
        s.WriteLine(e.Message);
        s.WriteLine("-----------");
        s.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T19:16:58.637

因此，我发布了另一个答案以回应您的评论：

> “我已经检查过 node 是否为空，在任何时候都不是。”

如果这是真的，这里还有其他一些选择；

1.  看一下`node.previous`类/结构定义。它可以实现一个 CUSTOM`==`运算符，与 null 相比会引发错误。例如，考虑`Nullable<T>`类型。它有一个重载的`==`运算符，如果 HasValue 属性为 false，则返回 true （显然，由于它是一个结构，它不是真正的 null，但重载运算符会给出所需的行为。）要解决这个问题，您可以测试`object.ReferenceEquals(node.previous, null)`哪个不会被超载。如果您有权更改`node.previous`定义，也许您可​​以找出为什么重载运算符与 null 相比会引发异常（显然不应该）

2.  `nodes`可能为 null，在这种情况下，引发错误的是 foreach 语句。`nodes == null`在 foreach 之前进行测试。

**- - - - - - - -编辑 - - - - - - - -**

正如[Jeppe](https://stackoverflow.com/users/1336654/jeppe-stig-nielsen)指出的那样，我与`Nullable<T>`（在上面的选项 #1 中）的类比可能会产生误导（实际上它确实混淆了讨论，尽管这一点本身是正确的）。为了更好地说明重写`==`运算符的想法，我在下面发布了一个示例来演示该`Container`类型。这种类型是一个结构，所以它本身永远不能为空，但它包含一个值对象。（这个结构的要点是你可以使用任何`Container`对象而不用担心它是否为空，即使包含的`Value`对象可能是空的）。主要需要注意的是，当将 Container 与`==`null 进行比较时，如果`Value`is则结果将为 true `null`，如果`==`运算符没有被覆盖（因为结构永远不能为空）。

```
public struct Container {
    public object Value { get; set; }
    public bool IsNull { get { return Value == null; } }
    public static bool operator ==(Container x, object y) { return x.Equals(y); }
    public static bool operator !=(Container x, object y) { return !x.Equals(y); }
    public override bool Equals(object obj) {
        if (obj is Container)
            return Value == ((Container)obj).Value;
        return Value == obj;
    }
    public override int GetHashCode() { return Value == null ? 0 : Value.GetHashCode(); }
}

////---------Test----------
var x = new Container { Value = null };
var y = new Container { Value = "hi" };
var z = new Container { Value = null };
Print(x == null); //true 
Print(x == y);    //false
Print(x == z);    //true 
```

以防万一您想知道覆盖`==`将如何影响一个类，我在下面编写了另一个示例来演示一个`Box`类。它类似于`Container`结构，除了我们必须处理 Box 对象本身为 null 的情况。请注意，在这种情况下，覆盖还有另一个令人惊讶的结果`==`。两个引用类型可以彼此相等 ( `==`)，即使它们引用不同的对象，只要它们具有相等的`Value`属性。

```
public class Box {
    public static bool ItemsEqual(object x, object y) {
        object xval, yval;
        xval = x is Box ? (x as Box).Value : x;
        yval = y is Box ? (y as Box).Value : y;
        return xval == yval;
    }
    public object Value { get; set; }
    public bool IsNull { get { return Value == null; } }
    public static bool operator ==(Box x, object y) { return ItemsEqual(x, y); }
    public static bool operator !=(Box x, object y) { return !ItemsEqual(x, y); }
    public override bool Equals(object obj) { return ItemsEqual(this, obj); }
    public override int GetHashCode() { return Value == null ? 0 : Value.GetHashCode(); }
}

////---------Test----------
object n = null;
Box w = null;
Box x = new Box { Value = null };
Box y = new Box { Value = "hi" };
Box z = new Box { Value = "hi" };

Print(w == null);  //true (uses overridden '==' because w is defined as a Box)
Print(w == n);     //true
Print(x == w);     //true 
Print(x == null);  //true 
Print(x == n);     //true 

Print(w == y);    //false
Print(x == y);    //false
Print(y == z);    //true (actual ref's differ, but values are ==) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T19:15:00.810

如果`nodes`是`null`异常将在循环*之前*发生，并且不会捕获异常。

由于`previous`成员是一个简单的字段，我看到的唯一可能是您的集合中的一个`node`成员是. 你可以这样做：`nodes``null`

```
foreach (Node node in nodes)
{
  if (node == null)
    throw new Exception("I told you so");
} 
```

* * *

**编辑：**好的，事实证明有一种可能性我没有看到，那就是`==`操作员的过载损坏。为了确保您调用通常的重载，请说：

```
foreach (Node node in nodes)
{
  bool n = (object)(node.previous) == (object)null;
} 
```

`==`（实际上将运算符的一侧转换为 就足够了`object`），或者等效地使用[`ReferenceEquals`](http://msdn.microsoft.com/en-US/library/system.object.referenceequals.aspx)：

```
foreach (Node node in nodes)
{
  bool n = object.ReferenceEquals(node.previous, null);
} 
```

但是您**必须**`==`修复重载的错误实现。

如果您在原始问题中发布了异常的堆栈跟踪，那么 SO 上的大多数用户都会清楚异常来自对您的`==`重载的调用。所以下一次，检查你的堆栈跟踪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T19:12:52.807

> 我 100% 确定该节点不为空

但我 100% 确定*节点*中的元素为空！尝试这个：

```
foreach (Node node in nodes)
{
    try
    {
        if(null == node) throw new Exception("This is not expected!");
        bool n = node.previous == null;
    }
    catch (Exception e)
        {
            if(File.Exists("error.txt")) File.Delete("error.txt");
            using(StreamWriter s = new StreamWriter("error.txt")){
            s.WriteLine(e.Message);
            s.WriteLine("-----------");
            s.Close();}
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T19:04:41.940

没有什么可以确保它`node`不为空，因为`Node`它不是值类型。介意提供更多细节吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T19:05:22.167

在您的行中设置一个断点，`bool`并验证该节点不为空且节点不为空。我的猜测是任何一个节点都是空的，或者如果它不是类型安全的列表，它包含一个空值。

# amazon-ec2 - 在 Amazon EC2 实例中附加新的 EBS 卷后，我是否应该在根设备中分离 EBS 卷？

> ID：13939699
> 
> 赞同：0
> 
> 时间：2012-12-18T19:02:40.203
> 
> 标签：amazon-ec2, amazon-ebs

我的 Amazon EC2 实例只有 8GB 的​​ EBS 卷`sda1`，这个卷接近满容量。

然后我将新的 21GB EBS 卷附加`sdf`到这个 EC2 实例。

当我`df -h`用来检查这种用法时，这就是我得到的：

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/xvdf             7.9G  5.3G  2.6G  67% /
tmpfs                 298M     0  298M   0% /dev/shm 
```

然后我`resize2fs /dev/xvdf`用来调整大小，这是`df -h`：

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/xvdf              21G  5.3G   16G  26% /
tmpfs                 298M     0  298M   0% /dev/shm 
```

我应该分离第一个 EBS 卷`sda1`吗？为什么`sda1`不显示`df -h`？

*更新结果：*

```
$ ls /dev/xvd*

/dev/xvda1  /dev/xvdf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:37:04.437

不可以。您需要先挂载该卷，然后它才会出现在 df 命令中。

还有一点教育，8gb 驱动器是你的根驱动器。尽量不要把东西放在那里，除了应用程序安装等。

根据需要创建和安装新卷需要以下步骤：

1.  在 AWS 管理控制台中创建卷。
2.  在 AWS 管理控制台中附加卷。
3.  决定你想要的文件系统类型，我通常使用 XFS。
4.  `yum install xfsprogs`, 或 apt-get it 或其他
5.  `mkfs.xfs /dev/NEWVOLUME`（注意：亚马逊会告诉你它附加到 sdf 或其他什么时候它真的附加到 xvdf 或其他东西）
6.  预热音量。这是一个鲜为人知的秘密，但卷上的所有空间都已分配给该卷但尚未分配。因此，将一堆零写入卷将使其升温并使其执行得更快。对于大批量，这可能需要一段时间。命令是：`dd if=/dev/<device> of=/dev/null`
7.  制作一个目录以将其安装到：（`mkdir /logs`或其他）
8.  挂载 /dev/NEWVOLUME /logs

完毕。现在运行你的`df -h`，你会看到它。

# java - Java：使用 ActionListener，我需要从文本字段获取用户输入并使用它，我遇到了问题

> ID：13939702
> 
> 赞同：2
> 
> 时间：2012-12-18T19:02:52.660
> 
> 标签：java, string, swing, actionlistener, jtextfield

所以我需要做的是使用 JTextField 以字符串的形式获取用户输入，虽然我可以做这部分，但我无法从方法中获取字符串以在程序的其他地方进行分析，这就是我到目前为止：

```
 import javax.swing.* ;
 import java.awt.event.* ;
 import java.util.* ;
 class Games extends JFrame implements ActionListener
{
  JPanel pnl = new JPanel() ;
  JTextField input = new JTextField(38) ;
  JTextArea output = new JTextArea(6, 37) ;
  JScrollPane pane = new JScrollPane(output) ;
  String inputString ;

public Games()
{
    super("Text Based RPG") ;
    setSize(600,200) ;
    setDefaultCloseOperation(EXIT_ON_CLOSE) ;
    output.setLineWrap(true) ;
    output.setWrapStyleWord(true) ;
    pane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS) ;
    output.setEditable(false) ;
    pane.getVerticalScrollBar().setValue(100); //scrollbar always at bottom
    input.requestFocus() ;

    /*Edit: Should I call for the input string here, e.g. output.append(inputString)
     i get the compilation error message:
    Games.java:29: error: cannot find symbol
    output.append(inputString) ;
                  ^
    symbol:   variable inputString
    location: class Games
    */

    add(pnl) ;
    pnl.add(pane) ;
    pnl.add(input) ;

    input.addActionListener(this) ;

    setVisible(true) ;
}

public void actionPerformed(ActionEvent event) 
{
    inputString = input.getText() ;
    input.setText("") ;
}         
/*The string i need to analyse is inputString, but I cannot, get it out of this method
  any help you guys can give me would be greatly appreciated. */

public static void main(String[] args) 
{
    Games gui = new Games() ;
}
}

**********************************
    try
    {
        a = reader.readLine() ;
    }
    catch (IOException e ) 
    {
        System.out.println("An Input Error Has Occured") ;
    }
    if (a.indexOf("hide") != -1 ) switchvariable = 'b' ;
    if  ((a.indexOf("exit") != -1 ) || (a.indexOf("leave") != -1) || (a.indexOf("out") != -1)) switchvariable = 'a' ;
    if ((a.indexOf("exit") == -1) && (a.indexOf("hide") == -1) && (a.indexOf("leave") == -1) && (a.indexOf("out") == -1)) switchvariable= 'c' ;
    String outcome = "" ;
    switch (switchvariable) 
    {
    case 'a' : outcome = "You exit the tavern to be discovered by\na group of bandits!\n" ; i = -1 ; break ;
    case 'b' : outcome = "You hide behind the bar for 10 minutes until\nyou can no longer hear the group." ; i = -1 ; break ;
    case 'c' : outcome = "You must choose between the two given options, exit the tavern, or hide." ; break ; // the variable i will still be greater
    //than 1 so the loop will continue until you reach an agreeable option, which in this case is either hiding, or addressing the group of people
    }
    System.out.println(outcome) ; 
```

理想情况下我想做的是使用文本字段进行用户输入，所以我需要做的是将文本放在输出文本区域中，然后这应该根据用户输入进行更改，我想使用的代码示例显示在星号下方

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:00:50.540

如果我理解正确，当用户在文本字段中按 Enter 时，您希望将在文本字段中输入的文本附加到输出文本区域。

当按下 Enter 时，文本字段会触发一个动作事件。你在课堂上听这个事件。因此，此时，您只需要将值附加到文本区域即可。

Swing 是基于事件的：

```
public void actionPerformed(ActionEvent event) {
    String inputString = input.getText() ;
    output.append(inputString);
    input.setText("");
} 
```

构造函数中的代码仅在执行时执行。所以获取文本字段的值当然会返回一个空字符串，因为在构建时，文本字段甚至还不可见。

编辑：做你想做的事，只需要以下内容：

```
public void actionPerformed(ActionEvent event) {
    String inputString = input.getText() ;
    printOutcome(inputString);
    input.setText("");
}

private void printOutcome(String input) {
    char switchvariable = ' ';
    if (input.indexOf("hide") != -1) {
        switchvariable = 'b' ;
    }
    if ((input.indexOf("exit") != -1 ) || (input.indexOf("leave") != -1) || (input.indexOf("out") != -1)) {
        switchvariable = 'a';
    }
    if ((input.indexOf("exit") == -1) && (input.indexOf("hide") == -1) && (input.indexOf("leave") == -1) && (input.indexOf("out") == -1)) {
        switchvariable= 'c';
    }
    String outcome = "" ;
    switch (switchvariable) {
        case 'a' : 
            outcome = "You exit the tavern to be discovered by\na group of bandits!\n"; 
            break;
        case 'b' : 
            outcome = "You hide behind the bar for 10 minutes until\nyou can no longer hear the group." ; 
            break ;
        case 'c' : 
            outcome = "You must choose between the two given options, exit the tavern, or hide."; 
            break;
    }
    System.out.println(outcome);
} 
```

不过，这种方法太复杂了。使用 if 子句设置 char 变量，然后切换此 char 变量是没有意义的。你的 if 子句也应该清理干净。

# vbscript - 使用 ADSI 脚本获取 Netlogon 信息

> ID：13939704
> 
> 赞同：0
> 
> 时间：2012-12-18T19:03:02.980
> 
> 标签：vbscript, attributes, active-directory, adsi

以下屏幕截图显示了 Wireshark 嗅探到的网络通信片段。它是登录过程的一部分，加入域的客户端尝试登录到 Windows Server 2008 R2（它是域控制器）。使用的协议是无连接 LDAP (CLDAP)，也称为 LDAP Ping。

![Active Directory 通信 - 被 Wireshark 嗅探](../Images/07b303195d6f4b83346feaef79d43743.png)

示例响应：

![在此处输入图像描述](../Images/989943bcab87e8f9cab26b06f3c0cbfa.png)

该查询似乎正在尝试获取有关“Netlogon”属性的一些“过滤”信息。此属性记录在这里：http: [//msdn.microsoft.com/en-us/library/cc223260.aspx](http://msdn.microsoft.com/en-us/library/cc223260.aspx)

此外，如[http://msdn.microsoft.com/en-us/library/cc223254.aspx](http://msdn.microsoft.com/en-us/library/cc223254.aspx)中所述，此属性是可操作的，这意味着：

> ...服务器仅在明确请求时才返回该属性。

我尝试编写一个简单的 ADSI 脚本来获取有关此属性的更多信息，但出现错误。这是脚本：

```
Set obj = GetObject("LDAP://rootDSE")

attArray = Array("netlogon") 
obj.GetInfoEx attArray, 0
WScript.Echo obj.netlogon 
```

*   错误消息：对象不支持此属性或方法：'obj.netlogon'。
*   错误代码：800A01B6

你能帮我写剧本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:25:06.010

供以后参考，我在上面提供我的评论之一作为答案：

> 我终于明白出了什么问题：根据[这个页面](http://books.google.com/books?id=Tt_-3NRBVdEC&pg=PA195)：“客户端然后使用这个IP地址与DC上的LDAP服务建立UDP连接，并在RootDSE中查询NETLOGON属性。这个属性实际上并不存在于目录中; 相反，它用于执行 LDAP ping。” 更多信息： http: [//msdn.microsoft.com/en-us/library/cc223811 (v=prot.20).aspx](http://msdn.microsoft.com/en-us/library/cc223811(v=prot.20).aspx)

# php - 用一个键替换数组中的一个值

> ID：13939706
> 
> 赞同：0
> 
> 时间：2012-12-18T19:03:06.013
> 
> 标签：php

我对数组的转换有问题。我有这个数组：

```
 Array
  (
   [0] => Array
    (
        [x] => 1291
        [y] => 32
        [z] => 1142
        [number] => 51
    )

   [1] => Array
    (
        [x] => 1415
        [y] => 32
        [z] => 1142
        [number] => 22
    )
) 
```

如何从中制作，数组

```
 Array
  (
   [51] => Array
    (
        [x] => 1291
        [y] => 32
        [z] => 1142
    )

   [22] => Array
    (
        [x] => 1415
        [y] => 32
        [z] => 1142
    )

) 
```

[number] 不必从数组中删除。重要的是，成为关键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:06:34.363

```
$numbers = array();
//Get the list of 'number' keys and unset them (optional)
foreach ($array as &$values) {
   $numbers[] = $values['number'];
   unset($values['number']);
}
//create a new array with numbers as keys and the original array as values
//You could also overwrite the original array, which will save some memory
$result = array_combine($numbers, $array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:06:30.773

您可以创建一个新数组

```
$newarray = array();
foreach($yourarray as $k=>$v) {
    $newarray[$v['number']] = $v
}

print_r($newarray); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T19:06:55.190

对原始数组进行简单循环可以解决此问题：

```
$new = array();

foreach($old as $item) {
    $key = $item['number'];
    $new[$key] = $item;
}

var_dump($new); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T19:09:26.070

无需像许多其他答案所建议的那样创建一个新数组，这可以就地完成。

```
foreach ($array as $key => $value)
{
    $array[$value["number"]] = $array[$key];

    // remove number attribute (optional)
    unset($array[$value["number"]]["number"]);

    // remove array @ original key
    unset($array[$key]);
} 
```

# c# - 我可以重新分配 MEF 共享导出吗？

> ID：13939715
> 
> 赞同：1
> 
> 时间：2012-12-18T19:03:36.687
> 
> 标签：c#, silverlight, prism, mef

我有一个`DataContract`序列化的类，也标记为共享 MEF `[Export]`。

例子：

```
[DataContract(Name="MyClass")]
[Export(typeof(MyClass))]
[PartCreationPolicy(CreationPolicy.Shared)]
public class MyClass
{
    [DataMember]
    public string Field1{get;set;}

    [DataMember]
    public string Field2{get;set;}

    public static MyClass Deserialize(XElement serialized)
    {
        DataContractSerializer ser = new DataContractSerializer(typeof(MyClass));
        MyClass anotherMyClass = (MyClass)ser.ReadObject(serialized.CreateReader());

        return anotherMyClass;
    }
} 
```

我将此标记为共享导出，因为我一次只需要一个实例，但是如果我重新分配`[Import]`此类的 MEF ed 实例（通过`Deserialize`在分配中调用），它仍然是单例吗？另外，其他 Imported 实例会反映这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:22:49.380

`PartCreationPolicy`仅适用于 MEF 创建的零件。您的`Deserialize`方法不使用 MEF，因此它将创建一个新实例。由 MEF 创建和管理的实例将不会更新以匹配新实例。

# javascript - 为具有高时间精度的桌面创建时间敏感浏览器应用程序的最佳方法？

> ID：13939719
> 
> 赞同：1
> 
> 时间：2012-12-18T19:03:47.327
> 
> 标签：javascript, web-applications, browser, timer

我必须开发一个应用程序，在一系列实验中测量用户响应时间。该应用程序将在大约 100 台计算机上运行，​​因此我曾提到基于浏览器的方法可能是最好的减少执行安装和更新的方法。话虽如此，既然我已经了解了浏览器中计时器的准确性，特别是 javascript 计时器，我了解到可能会有几毫秒到 10-15 毫秒以上的延迟。当用户测量他们对屏幕上视觉队列的响应时间时，这种延迟会对这些实验的精度产生负面影响。

有没有一种已知的方法可以通过 javascript 为在浏览器中运行的 Web 应用程序获取精确的计时器？同样，其中一些实验需要简单的 2d 动画，例如查看用户可以将鼠标光标保持在旋转的立方体上多长时间。我更喜欢使用 HTML5 和 Javascript，我们不能使用 flash。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:12:44.227

的确，您不能依赖计时器的间隔，但可以依赖新的 Date 对象。例如：

```
var previousTime = new Date().getTime(); // returns milliseconds of "now"

var timer = setInterval( function() {
   var currentTime = new Date().getTime();
   var millisecondsSinceLastUpdate = currentTime - previousTime;
   previousTime = currentTime;
   alert( 'milliseconds since last update: ' + millisecondsSinceLastUpdate );
}, 1 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:26:59.463

正如@dqhendricks 建议的那样，您应该使用一个新`Date`对象。但是，如果您需要它保持一致和准确，则需要在具有相同浏览器版本的同一台计算机上运行它，并且没有在后台运行。

在 Firefox 和 chrome 中查看这个[演示。](http://jsfiddle.net/Ff6ZV/2/)单击边缘并尽可能快地将光标移出 - 我可以在 FF 中获得的最低值是 6MS，我可以在 Chrome 中获得的最低值是 42MS。

这些值在机器之间的差异可能更大。我设置了一个具有 512MB 内存和 50% 单核上限的虚拟机，在 FF 中打开了 5 个选项卡并尝试了测试——我得到的最低值是 52MS。

因此，除非您可以控制用户的浏览器、PC 和后台运行的东西，否则我不会指望数据是准确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T03:43:23.790

如果你有新的浏览器，你可以使用 performance.now() ，它比 Date 对象提供更高的精度，但使用浏览器的其他性能问题仍然适用:(

[http://updates.html5rocks.com/2012/08/When-milliseconds-are-not-enough-performance-now](http://updates.html5rocks.com/2012/08/When-milliseconds-are-not-enough-performance-now)

# web-services - 用于基于 REST 的 Web 服务的 WSDL？智能感知？

> ID：13939720
> 
> 赞同：0
> 
> 时间：2012-12-18T19:03:48.997
> 
> 标签：web-services, rest, soap

似乎大多数新人都在使用 RESTful Web 服务而不是 SOAP。我只涉足了它们足以了解它们如何工作的基础知识。

本质上，在 SOAP 实现中，您可以使用描述数据类型以及可用 RPC 的 WSDL 文件。查找 WSDL 文件并简单地将其添加为 Visual Studio 中的服务引用非常棒且易于实现。

在 REST Web 服务中，对于要执行的每个操作（GET、POST、PUT、DELETE），您都有一个（或多个，取决于覆盖）方法。虽然我可以看到这会有什么好处，但我可以看到这个问题......例如仍然必须反序列化为本地对象。

所以我的问题是……在使用 REST Web 服务时，你真的可以得到智能感知吗？当您向 WSDL 添加服务引用时，您可以看到可用方法的列表。否则，是通过文档实际查看可用方法的唯一方法吗？是否有任何“自包含”文档向 VS 描述您可以使用什么和/或如何解释数据类型而无需反序列化/序列化。

# php - PHP simpleXML，而不是追加，覆盖一切

> ID：13939723
> 
> 赞同：0
> 
> 时间：2012-12-18T19:04:03.533
> 
> 标签：php, xml, loops, simplexml

我有一个正在进行的 xml 文件，当我调用一个 php 函数来添加一个新子项时，它会遍历一个字符串数组并查询一个 db 以将一个新子项添加到文档中并将其保存为数组中的当前字符串。但是，它不是附加的，而是覆盖所有内容。我需要先加载文件吗？并检查它是否存在？

```
function createUnitsXML($units,$wcccanumber,$mysqli) {

// Delete whitespaces and create an array of units assigned to call
$unit = preg_replace('/\s+/', '', $units);
$unitsarray = explode(",",$unit);

    for ($i = 0; $i < count($unitsarray); $i++) {

        $xml = new SimpleXMLElement('<xml/>');

        $query = "SELECT * FROM calls WHERE wcccanumber = '$wcccanumber'";
        $result = $mysqli->query($query);

        while($row = mysqli_fetch_assoc($result)) {
             $draw = $xml->addChild('call');
             $draw->addChild('wcccanumber',$row['wcccanumber']);
             $draw->addChild('currentcall',$row['call']);
             $draw->addChild('county',$row['county']);
             $draw->addChild('id',$row['id']);
             $draw->addChild('location',$row['location']);
             $draw->addChild('callcreated',$row['callcreated']);
             $draw->addChild('station',$row['station']);
             $draw->addChild('units',$row['units']);
             $draw->addChild('calltype',$row['calltype']);
             $draw->addChild('lat',$row['lat']);
             $draw->addChild('lng',$row['lng']);
             $draw->addChild('inputtime',$row['inputtime']);
        }
        $fp = fopen("xml/units/$unitsarray[$i].xml","wb");
        fwrite($fp,$xml->asXML());
        fclose($fp);
    }
    echo "--- Created units XML document for call: $wcccanumber";
    echo "</br>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:06:25.777

```
$fp = fopen("xml/units/$unitsarray[$i].xml","wb"); 
```

通过将文件打开为“wb”，您正在截断要写入的文件。尝试使用“ab”（只写，附加到文件末尾）或“ab+”（读取或写入，附加到文件末尾）。

# c# - C# mysql 使用 Byte[] 将文件插入数据库

> ID：13939725
> 
> 赞同：0
> 
> 时间：2012-12-18T19:04:08.710
> 
> 标签：c#, mysql

我正在 AsyncUpload 集合中执行一个简单的 foreach 循环到 Byte[] 并尝试将其插入数据库。

```
 foreach (UploadedFile file in AsyncUpload1.UploadedFiles)
        {

            string[] splitFileExt = file.FileName.Split('.');
            List<string> CommandArgs = new List<string>();
            CommandArgs.Add("IID|" + Request.QueryString["InstructorID"]);
            CommandArgs.Add("FName|" + file.FileName);
            CommandArgs.Add("FTitle|" + file.FileName);
            CommandArgs.Add("FType|" + file.ContentType);
            CommandArgs.Add("FExtension|" + splitFileExt[1]);
            CommandArgs.Add("FSize|" + file.ContentLength.ToString());
            byte[] b = StaticControlCreationClass.ReadToEnd(file.InputStream);
            MySQLProcessing.MySQLProcessor.MySQL_UploadFile(b, "fileupload", CommandArgs, mysqlCon);

        }

public static void MySQL_UploadFile(byte[] value, string MYSQLCommand, List<string> CommandArgs, MySqlConnection con)
    {
        MySqlCommand cmd = new MySqlCommand(MYSQLCommand, con);
        cmd.Parameters.AddWithValue("FContent", value);
        foreach (string args in CommandArgs)
        {
            string[] splitArgs = args.Split('|');
            cmd.Parameters.AddWithValue(splitArgs[0], splitArgs[1].Trim());
        }
        cmd.ExecuteNonQuery();

    } 
```

然后这里是存储过程

```
如果存在文件上传，则删除程序；

创建过程文件上传`(
   IID 整数，
   TValue varchar(250),
   FName varchar(250),
   FType varchar(15),
   FSize varchar(45),
   FContent longblob，
   FExtension varchar(10))
   开始
      SET @IID = IID;
      SET @TValue = TValue;
      SET @FName = FName;
      SET @FType = FType;
      设置@FSize = FSize;
      SET @FExtension = FExtension;
      SET @FContent = FContent;

      插入到 tblfiles(rID,
                                     标题，
                                     文件名，
                                     文件类型，
                                     文件大小，
                                     文件_内容，
                                     文件扩展名）
      值（@IID，
              @T值，
              @F名称，
              @F类型，
              @FS大小，
              @F内容，
              @FExtension);
   结尾

```

我不断收到`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'fileupload' at line 1`@ cmd.ExecuteNonQuery();

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:12:05.680

我错过了分类器说它是一个存储过程

`cmd.CommandType = CommandType.StoredProcedure;`

# javascript - 在 contenteditable 部分插入带有 div 和 span 标签的 HTML

> ID：13939736
> 
> 赞同：1
> 
> 时间：2012-12-18T19:04:44.083
> 
> 标签：javascript, contenteditable, html, inserthtml

在 contenteditable div 中，我尝试使用 insertHTML 插入特殊的`<div>`和/或`<span>`. 无论出于何种原因，这似乎是不允许的，因为 insertHTML 在插入剩余内容之前删除了 div/span。举个例子：

```
document.execCommand('insertHTML', false, "<div class='btn equals'><a href='#'>=</a></div>"); 
```

有谁知道做我想做的事情的解决方法或替代方法？自定义标签适用于 WebKit，但并不保证所有浏览器都支持该概念：

```
document.execCommand('insertHTML', false, "<btn_equals><a href='#'>=</a></btn_equals>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T08:30:46.580

可能为时已晚，但我遇到了类似的问题，我们尝试了与您相同的事情，解决方案是不要在要插入的文本中包含任何单或双相当 ' 或 "

例如

```
document.execCommand('insertHTML', true, "<div class=btnequals>this is test</div>"); 
```

# php - 从 JavaScript 函数将 PHP 发布到 MySql-db

> ID：13939744
> 
> 赞同：0
> 
> 时间：2012-12-18T19:05:05.387
> 
> 标签：php, javascript

我有一个打开模式窗口的 JavaScript 函数（href 链接），我想从那个函数/窗口将它发送到一个 PHP 页面（box.php），它有大约四个 PHP 函数；其中之一是检查其他三个功能的“check_box”。有没有办法做到这一点，或者 JavaScript 不可能/不支持？这就是我所拥有的：

**PHP页面：**

```
<a href="javascript:openModal()" title="" style="padding-right: 10px;">LEAVE</a> 
```

**PHP代码：**

```
<?php
echo $class->box->check_box() ?> 
```

**JavaScript 函数：**

```
function openModal()
    {

        $.modal({
            content: 
                    /* This where the content of the modal window goes */

            title: 'Outside the workplace',
            width: 300,
            scrolling: false,
            actions: {
                'Close' : {
                    color: 'red',
                    click: function(win) { win.closeModal(); }
                },
                'Center' : {
                    color: 'green',
                    click: function(win) { win.centerModal(true); }
                },
                'Refresh' : {
                    color: 'blue',
                    click: function(win) { win.closeModal(); }
                },
                'Abort' : {
                    color: 'orange',
                    click: function(win) { win.closeModal(); }

                }
            },

            buttons: {
                'Close': {
                    classes:    'huge blue-gradient glossy full-width',
                    click:      function(win) { win.closeModal(); }
                                    }
                                    },

            buttonsLowPadding: true
        });
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:21:42.063

创建一个可以进行插入的 php 页面。在该 PHP 中解析来自浏览器的参数并执行插入。然后输出一条消息。在 JavaScript 中显示指定的消息`DIV`- 类似这样（修复您的值并将参数传递给函数）：

```
function setToDatabase() {
    jQuery(function($) {    
        $.ajax( {           
            url : "submittosql.php?valuetosubmit=NEWVALUE",
            type : "GET",
            success : function(data) {
                document.getElementById("YOURDIV").innerHTML=data;             
            }
        });
    });
} 
```

# marklogic - 您如何在短语上使用 MarkLogic 词库 API？

> ID：13939745
> 
> 赞同：0
> 
> 时间：2012-12-18T19:05:06.847
> 
> 标签：marklogic, thesaurus

假设您有一个美利坚合众国的词库条目，其中包括 United States、USA 和 America。不是最好的例子，但你明白了。用户搜索美国政府。你如何解析这个字符串以传递给 thsr:expand 函数？
“美国政府”行不通，也不是我想要的。我想要“美国”的词库完整，以便返回美国政府和美利坚合众国政府的文件。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:41:34.773

除非最近进行了更改，否则`thsr:expand`不适用于多词词库术语。但是，可以滚动您自己的多词词库扩展。

解决方案有几个步骤，实际上，我在 MarkLogic World 的题为[*Search Intelligence and MarkLogic API*](https://docs.google.com/file/d/0B7myFQ0BHzMbUFBhaVJlMk9zVFE/edit)的演示文稿中给出了这个 - 完全正确 - 作为示例。如果您想向前跳过，多词词库示例从幻灯片 32 开始。

我还将[演示文稿中的所有代码放在 Github 上](https://github.com/wthoolihan/MLUC-2012-Examples)。

要点是：首先`search:parse`将 cts:query XML 转换为包含“运行”的中间类型 XML（如果您熟悉 WordML）。`cts:highlight`然后使用词库术语的 OR 查询扩展运行。最后，剩余的运行被解析回 cts:query XML，并使用`search:resolve`.

它非常快，但是如果您的词库确实很大，则可以通过一些优化来提高速度。

**更新**

我刚刚注意到您可能只是试图将引用的短语扩展为多个引用的短语同义词，而我的示例将未引用的短语扩展为 AND ed 单词查询（未引用的短语）的 OR 查询。

您实际上可以跳过运行创建/解决步骤，并重新设计`exprun:thsr-expand-runs`直接适用于短语的内容：

```
declare function exprun:thsr-expand-phrases(
    $q as item(),     (: cts:query XML :)
    $q-thsr as item() (: thesaurus terms :)
) as item()
{
    typeswitch($q)    
        case element(cts:word-query) return
            if (not($q[@qtextpre and @qtextpost])) then $q 
            else (: this is a phrase :)
            cts:highlight($q, $q-thsr,
                if (count($cts:queries) gt 1)
                then xdmp:set($cts:action, "continue") (: ignore matches within matches :)
                else          
                    element cts:word-query {
                    $q/namespace::*, $q/@*, $q/node(),
                    let $expanded-text :=
                        cts:highlight($q/cts:text, $q-thsr,
                            if (count($cts:queries) gt 1)
                            then xdmp:set($cts:action, "continue") 
                            else thsr:lookup("/config/jmp-thesaurus.xml",
                                cts:word-query-text($cts:queries[1])//thsr:synonym/thsr:term/string()
                    )
                where ($expanded-text ne $q/cts:text) (: found matches :)
                return ($expanded-text,
                    element cts:option { 'synonym' })
            }
        else $q
    case text() return $q
    default return
        element {node-name($q)}{
            $q/namespace::*,
            $q/@*,
            exprun:thsr-expand-phrases($q/node(), $q-thsr)
        } 
```

};

您仍然需要提供此功能`cts:or-query`的同义词库术语：

```
cts:or-query(doc('thesaurus.xml')//thsr:entry/thsr:term/cts:word-query(string(.))))) 
```

不过，这只会对引用的短语起作用。因此，如果您想对未引用的短语进行操作，您仍然需要创建运行。如果您想对两者都进行操作，则需要对 github 示例代码进行细微更改（它会跳过引用的短语）。

# javascript - 使用jQuery点击后计算复选框

> ID：13939750
> 
> 赞同：0
> 
> 时间：2012-12-18T19:05:27.700
> 
> 标签：javascript, jquery, html, input, checkbox

我需要计算表单中在单击后和提交表单之前“选中”的复选框的数量。我有一个 javascript 函数，当单击一个框时会调用该函数，它会动态更改表单中的某些值。但它会返回单击框时存在的计数和值。

正如我现在的代码一样，我在一个封闭的复选框和标签上有一个 onClick 事件处理程序：

```
<div class="part" style="padding-right: 30px" onClick="runThis()">
    <input id="checkbox_2" name="dog" type="checkbox" class='topdog'                              checked='checked' value="2" />
    <label for="checkbox_2">Snoopy (Top Dog)</label>
</div>

...

    function runThis() { 
    var dogsSelected = jQuery("input[name='dog']:checked");
    var numSelected = dogsSelected.length;
    alert("numSelected: " + numSelected);
    } 
```

我确信有一个简单的解决方案，或者我正在错误地处理这个问题。

任何提示/建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:10:30.883

是否有任何 JavaScript 错误？我发现如果你把这个`runThis()`功能去掉，`$(document).ready`它就可以正常工作。

您也可以考虑删除该`onClick=`属性以支持 jQuery 事件处理程序：

```
$("input[name='dog']").on('click',function(e) {
    var dogsSelected = $("input[name='dog']:checked");
    var numSelected = dogsSelected.length;
    alert("numSelected: " + numSelected);
}); 
```

[http://jsfiddle.net/mblase75/xsWDn/](http://jsfiddle.net/mblase75/xsWDn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:13:24.230

您可以使用“更改”事件：

```
$("input[name='dog']").on('change', runThis);

function runThis() {
    var dogsSelected = jQuery("input[name='dog']:checked");
    var numSelected = dogsSelected.length;
    alert("numSelected: " + numSelected);
}​ 
```

[http://api.jquery.com/change/](http://api.jquery.com/change/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:16:20.937

如果是这样，您应该尝试更改它以对鼠标向上做出反应，您应该会得到不同的结果。

您可能在对 dom 3 进行更改之前激活了该事件。

编辑：

没关系，它在问题中说 onclick 触发器。我不读书不好。

尝试将其更改为：onmouseup，我想这应该可以解决问题：

```
<div class="part" style="padding-right: 30px" onmouseup="runThis()">
<input id="checkbox_2" name="dog" type="checkbox" class='topdog'                              checked='checked' value="2" />
<label for="checkbox_2">Snoopy (Top Dog)</label> 
```

# c++ - C ++数组插入到双向量

> ID：13939763
> 
> 赞同：-1
> 
> 时间：2012-12-18T19:06:26.190
> 
> 标签：c++, vector

如果我声明

```
vector< vector <double > > V; 
```

如何插入`(3.0, 4.0)`作为第一个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:12:22.687

您可以使用[`std::make_pair`](http://www.cplusplus.com/reference/utility/make_pair/)在向量中插入一对双精度数：

```
std::vector<std::pair<double, double>> V; 
V.push_back(std::make_pair(3.0, 4.0)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:16:21.407

您不能向该 2d 向量添加 2 个值，该 2d 向量仅在 M x N 个位置存储一个 double 类型的值。

您可以做的是创建一个结构，例如：

```
struct SPoint
{
  double X;
  double Y;
}; 
```

然后添加这样的点：

```
vector< vector <SPoint > > v; 
SPoint point = {3.0, 3.4};

v.push_back ( std::vector<SPoint >()
v[0].push_back(point); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T19:12:15.450

目前尚不清楚您是将元素插入到预先存在的向量中，还是插入到新的空向量中。无论哪种情况，您都可以根据需要使用`std::vector` `std::initializer_list`构造函数进行初始化或赋值：

```
#include <vector>

int main()
{
  std::vector<std::vector<double>> v1;
  v1.push_back({3.0,4.0}); // push first element using initializer_list

  std::vector<std::vector<double>> v2(10);
  v2[0] = {3.0, 4.0}; // assign value to pre-existing vector

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T19:13:57.083

在 C++03 中：

```
vector<vector<double>> V;
V.push_back(std::vector<double>(2));
V[0][0] = 3.0;
V[0][1] = 4.0; 
```

在 C++11 中：

```
vector<vector<double>> V; 
V.emplace_back({3.0, 4.0}); 
```

相反，如果使用 a `std::vector`of `std::pair`s 更有意义，您可以这样做：

```
std::vector<std::pair<double, double>> V;
V.push_back({3.0, 4.0}); 
```

访问该对中的一个元素看起来像`V[0].first`或`V[1].second`。

# ios - iOS 伪本地化有什么好的工具吗？

> ID：13939766
> 
> 赞同：15
> 
> 时间：2012-12-18T19:06:30.727
> 
> 标签：ios, localization

我想开始了解我们在本地化字符串方面的 iOS 代码有多全面。我们还没有准备好去翻译，但我想开始使用[伪本地化](http://en.wikipedia.org/wiki/Pseudolocalization)进行测试。在 Localizable.strings 文件中自动化这个过程应该很容易，但我似乎找不到任何工具可以做到这一点。坦率地说，我会对一个将我的所有字符串都更改为“不是英语！”的脚本感到满意。如果存在这样的事情。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-19T09:02:33.847

[您可以使用翻译工具包](http://docs.translatehouse.org/projects/translate-toolkit/)来实现这一点。

首先，您需要使用[prop2po转换器将](http://docs.translatehouse.org/projects/translate-toolkit/en/latest/commands/prop2po.html)*.strings*文件转换为*PO*：

```
$ prop2po Localizable.strings en.po 
```

这将创建一个*PO*文件，其中*Localizable.strings*文件的字符串作为源字符串（在这种情况下，我使用英语作为源）。

获得*PO*文件后，使用[podebug](http://docs.translatehouse.org/projects/translate-toolkit/en/latest/commands/podebug.html)以[所需的重写格式](http://docs.translatehouse.org/projects/translate-toolkit/en/latest/commands/option_rewrite.html)对其进行重写。

```
$ podebug --rewrite=unicode en.po en_rewritten.po 
```

最后将其转换回*.strings*格式（注意，您需要将原始*Localizable.strings*文件作为模板传递）：

```
$ po2prop en_rewritten.po rewritten.strings -t Localizable.strings 
```

生成的文件将如下所示：

```
"Account: %@" = "Ȧƈƈǿŭƞŧ: %@";

"Add command" = "Ȧḓḓ ƈǿḿḿȧƞḓ";

"Add connection." = "Ȧḓḓ ƈǿƞƞḗƈŧīǿƞ." 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-17T16:19:46.357

我遇到了这里尚未提到的两个解决方案：

*   一个在 Mac App Store 上调用的免费应用程序，它根据您的源代码（拖放）生成伪本地化的 .strings 文件。它生成与问题中提供的 OP 类似的字符串。

    [https://itunes.apple.com/us/app/pseudolocalizer/id503026674?mt=12](https://itunes.apple.com/us/app/pseudolocalizer/id503026674?mt=12)

*   在线翻译服务 Babble-on 提供基于现有 .strings 文件的免费伪本地化 .strings 文件（其他选项可用）。他们有额外的选项来生成比原始英语更长的字符串来测试你的 GUI。

    [http://www.ibabbleon.com/pseudolocalization.html](http://www.ibabbleon.com/pseudolocalization.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-09T08:54:20.100

尽管 Translate Toolkit 可以提供解决方案，但我一直在寻找使用 bash 脚本的更简单方法。创建 [changesDictionary.txt] 文件（请参阅本文末尾的格式）并使用语言文件作为参数运行以下脚本：

```
#  This script translate iOS strings file into pseudo languge for texting usage.
#  the script create a sed change and replace file based on [changesDictionary.txt].
#  the loop run across the input string file (ie. myFyle.strings)
#    and replace the secong strings with the dictionary values.
#  since the strings file is in BOM format (http://en.wikipedia.org/wiki/Byte_order_mark)
#   the input is converted from UTF16 to UTF8.
sed -e 's/^"\(.*\)" = "\(.*\)"$/s\/\1\/\2\/g/' changesDictionary.txt  > changesDictionary.sed

FILENAME=$1

while read -r; do
if [[ $REPLY = '/*'* ]] ; then
    echo "$REPLY"
else
    if [[ $REPLY = '' ]] ; then
        echo "$REPLY"
    else
        if [[ $REPLY = '"'* ]] ; then
            changes2=$(echo "$REPLY" | cut -d= -f2 | sed -f changesDictionary.sed)
            changes1=$(echo "$REPLY" | cut -d= -f1 )
            echo "$changes1=$changes2"
                        echo "$REPLY"
        fi
    fi
fi
done < <(iconv -f UTF-16 -t UTF-8 $FILENAME) | iconv -f UTF-8 -t UTF-16 >$FILENAME.new 
```

该脚本会查找以下格式的 [changeDictionary.txt] 文件：

```
"a" = "á"
"b" = "β"
"c" = "ç"
"d" = "δ"
"e" = "è"
"f" = "ƒ"
"g" = "ϱ"
"h" = "λ"
"i" = "ï"
"j" = "J"
"k" = "ƙ"
"l" = "ℓ"
"m" = "₥"
"n" = "ñ"
"o" = "ô"
"p" = "ƥ"
"q" = "9"
"r" = "ř"
"s" = "ƨ"
"t" = "ƭ"
"u" = "ú"
"v" = "Ʋ"
"w" = "ω"
"x" = "ж"
"y" = "¥"
"z" = "ƺ"
"\ñ" = "\n"
"$δ" = "$d"
"$ï" = "$i" 
```

您可以使用此示例或创建您自己的示例，请注意文件中的最后 3 个更改字符串。这是为了将行尾和参数恢复到正常状态。我选择了这种方法来简化脚本（我认为性能没有优化）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T18:38:42.963

我们提供伪本地化作为我们在 Tethras ( [www.tethras.com](http://www.tethras.com) ) 服务的一部分。伪本地化是免费的。我们会重音您的字符串中的所有字符，并将文本的长度延长 30%。这不仅可以帮助您测试硬编码字符串，还可以让您了解由于翻译过程中的文本扩展而导致的布局发生了什么。

例子：

纯文本

> Wè prôvïdè psèúdô lôçálïzátïôñ ás párt ôƒ ôúr sèrvïçè át Tèthrás (www.tèthrás.çôm)。ôñè twoô thrèè ƒôúr ƒïvè sïx Psèúdô lôçálïzátïôñ ïs ƒrèè。ôñè twô thrè Wè áççèñt áll ôƒ thè çháráçtèrs ïñ ¥ôúr strïñgs áñd èxtèñd thè lèñgth ôƒ thè tèxt b¥ 30%。一二三ƒôúrƒïvè六这将有助于¥OU测试不ONL¥ƒôr硬编码的字符串，而且还会让¥欧看看会发生什么¥对La¥出局由于文本增加在翻译过程中。ôñè twoô thrèè ƒôúr ƒïvè sïx sèvèñ èïght ñïñè tèñ

可本地化的字符串

```
"Bring All to Front" = "Brïñg Áll tô ƒrôñt ôñè twô";
"Hide" = "Hïdè 12";
"Quit" = "Qúït 12";
"Hide Others" = "Hïdè Óthèrs ôñè "; 
```

希望在翻译之前测试您的应用程序的本地化能力，这点值得称赞。这将在实际翻译过程中为您节省大量时间和精力。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-18T19:46:53.090

您可以使用`genstrings`Apple 提供的工具。[这一切都在资源编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Strings/Strings.html#//apple_ref/doc/uid/10000051i-CH6)的字符串部分进行了解释

# python - appengine 中的全文搜索，让某些字段的分数比其他字段更重要？

> ID：13939773
> 
> 赞同：0
> 
> 时间：2012-12-18T19:06:56.813
> 
> 标签：python, google-app-engine, full-text-search

我有一个使用全文搜索的 python appengine 应用程序。文档模型有类似的东西

标题：标题摘要：简短摘要全文：大量文本

如果有人搜索一个字符串，我希望它排序为标题>>摘要>>全文中的匹配分数。现有的评分选项似乎没有办法做到这一点，我不走运吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:27:36.467

不幸的是；我们还没有办法让您比其他人或多或少地衡量不同的领域。对不起！

# restructuredtext - 在 reStructuredText 中，如何同时使用强调和上标？

> ID：13939775
> 
> 赞同：11
> 
> 时间：2012-12-18T19:07:09.170
> 
> 标签：restructuredtext

以下 reStructuredText 没有给出我期望的结果。

```
*:sup:`superscript`* 
```

预期结果：*^(上标)*

实际结果：: *sup:`上标`*

发生这种情况的原因很清楚（不能嵌套 reST 文本角色），但是我怎样才能获得预期的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T16:52:49.867

正如[FAQ 中所指定的](http://docutils.sourceforge.net/FAQ.html#is-nested-inline-markup-possible)`raw`，如果不使用指令或不使用自定义的临时指令，目前这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-06T02:27:34.240

您可以使用替换：

```
The chemical formula for pure water is |H2O|.

.. |H2O| replace:: H\ :sub:`2`\ O 
```

[有关字符级标记](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#character-level-inline-markup)和[替换](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#substitution-references)机制的更多信息，请参阅[reStructuredText 规范。](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html)

# visual-studio - 将 Nuget 与可再发行源代码一起使用

> ID：13939776
> 
> 赞同：1
> 
> 时间：2012-12-18T19:07:19.340
> 
> 标签：visual-studio, nuget

我们出售一些应用程序的源代码，并尝试将依赖关系降至最低。目前，客户拿到源代码后，就可以打开解决方案并立即开始编码，唯一的前提是拥有VS 2010或更高版本。

我们考虑使用 Nuget。即使我们的大多数客户没有安装它，使用 Nuget 管理项目依赖项是否安全？

我可以看到 Nuget 将所有需要的库保存在“packages”文件夹中并添加了对它们的引用，所以它对我来说似乎很安全。我做了一些测试：卸载Nuget并尝试构建项目，一切正常，但我只有VS2012。

我在官方文档中找不到关于这个主题的任何准确信息，在其他网站上也没有。那么，是否有人确定是否需要在 Visual Studio 中安装 Nuget 才能使用启用了 nuget 的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:17:33.040

如果您打算将这些包重新分发为与您的源捆绑在一起的二进制文件，则不需要 NuGet。但是，如果您不打算重新分发这些包，则客户必须安装 NuGet。

<opinion> 我不认为让 NuGet 成为使用源代码的要求是不合理的。它很容易安装到 VS2010 中，并默认出现在 VS2012 中。微软越来越依赖它作为工具链的核心部分。抵抗是徒劳的。:) </意见>

# php - 如何在 Codeigniter 中为用户记住 10 篇带有时间戳的最后阅读文章？

> ID：13939786
> 
> 赞同：2
> 
> 时间：2012-12-18T19:08:28.470
> 
> 标签：php, codeigniter, session, cookies

我想制作一个**PHP if 条件代码**，用于检查用户阅读文章的最后 10 篇文章或 10 分钟是否已经过去。

例如

用户打开**id = 235**的页面（此 id 值在 url localhost/article/235 中）

并且这个**id**值将保存在会话中，带有**当前时间戳**，可能还有**他的 IP 地址**

然后他读了另一篇文章，同样的事情也会发生。

**我需要记住点击的东西再点击十次，然后只为第一行重置。例如，在第 10 次点击之后，id 和时间戳不会变成第 11 行，而是会替换列表中的第 1 行。**

CodeIgniter 中的 php 条件将检查这些值并更新文章表和列计数器中的文章命中计数器值，如下所示：

```
 $this->db->where('id', $id);
   $this->db->set('counter', 'counter+1', FALSE);
   $this->db->update('articles'); 
```

但在调用此代码之前，我需要从会话中进行此检查吗？

怎么做？

我认为在会话中存储例如 10 个条目以及每个用户的时间戳就足够了。

只是不要在会话中保存相同的页面两次。

并且条件将使用保存的时间戳检查当前时间戳，如果超过例如 10 分钟或者用户已经阅读/点击了另外 10 篇文章，它将允许更新计数器 php 代码。

我不需要这个防弹。只是使用浏览器的刷新按钮禁用增量。

**因此，如果他想增加计数器，他将需要等待十分钟或再阅读 10 篇文章；）**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:57:10.767

你绝对应该去参加会议。它可以节省您的带宽消耗，并且更容易处理。当然，除非您需要客户端的数据，根据您的解释，我认为您不需要。假设您参加了会议，您所要做的就是将您拥有的数据存储在一个数组中。下面的代码应该做到这一点：

```
$aClicks = $this->session
                ->userdata('article_clicks');

// Initialize the array, if it's not already initialized
if ($aClicks == false) {
    $aClicks = array();
}

// Now, we clean our array for the articles that have been clicked longer than
// 10 minutes ago.
$aClicks = array_filter(
    $aClicks,
    function($click) {
        return (time() - $click['time']) < 600; // Less than 10 minutes elapsed
    }
);

// We check if the article clicked is already in the list
$found = false;
foreach ($aClicks as $click) {
    if ($click['article'] === $id) { // Assuming $id holds the article id
        $found = true;
        break;
    }
}

// If it's not, we add it
if (!$found) {
    $aClicks[] = array(
        'article' => $id, // Assuming $id holds the article id
        'time'    => time()
    );
}

// Store the clicks back to the session
$this->session
     ->set_userdata('article_clicks', $aClicks);

// If we meet all conditions
if (count($aClicks) < 10) {
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T14:42:31.023

我假设 $clicks 是一个包含最多十篇访问文章的数组。id 用作键，时间戳用作值。$id 是新文章的id。

```
$clicks = $this->session->userdata('article_clicks');

//default value
$clicks = ($clicks)? $clicks : array();

//could be loaded from config
$maxItemCount = 10;
$timwToLive= 600;

//helpers
$time = time();
$deadline = $time - $timeToLive;

//add if not in list
if(! isset($clicks[$id]) ){
  $clicks[$id] = $time;
}
//remove old values
$clicks = array_filter($clicks, function($value){ $value >= $deadline;});

//sort newest to oldest
arsort($clicks);

//limit items, oldest will be removed first because we sorted the array
$clicks = array_slice($clicks, 0, $maxItemCount);

//save to session
$this->session->>set_userdata('article_clicks',$clicks) 
```

用法：

```
//print how mch time has passed since the last visit
if(isset($clicks[$id]){
  echo "visited ".($time-$clicks[$id]). "seconds ago." ;
} else {
  echo "first visit";
} 
```

**编辑：**你必须使用 arsort 而不是 rsort 否则钥匙会丢失，对不起

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:19:47.993

根据 Raphael_ 代码和您的问题，您可以尝试以下操作：

```
 <?php
            $aClicks = $this->session
                ->userdata('article_clicks');
        $nextId = $this->session->userdata('nextId');
        // Initialize the array, if it's not already initialized
        if ($aClicks == false) {
            $aClicks = array();
            $nextId = 0;
        }
        // Now, we clean our array for the articles that have been clicked longer than
       // 10 minutes ago.
        $aClicks = array_filter($aClicks, function($click) {
                    return (time() - $click['time']) < 600; // Less than 10 minutes elapsed
                }
        );
// We check if the article clicked is already in the list
        $found = false;
        foreach ($aClicks as $click) {
            if ($click['article'] === $id) { // Assuming $id holds the article id
                $found = true;
                break;
            }
        }
// If it's not, we add it
        if (!$found) {
            $aClicks[$nextId] = array(
                'article' => $id, // Assuming $id holds the article id
                'time' => time()
            );
            $nextId++;
            $this->session->set_userdata('nextId', $nextId);
        }
        $this->session->set_userdata('article_clicks', $aClicks);
        if (count($aClicks) > 10 && $nextId > 9) {
            $this->session->set_userdata('nextId', 0);
            echo "OK!";

        }
    ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T15:28:07.660

我希望我正确理解了您的需求。

用法：

```
$this->load->library('click');
$this->click->add($id, time()); 
```

类 API 很简单，代码加了注释。您还可以检查一个项目`expired()`，如果`exists()`您可以`get()`节省时间。

请记住：

*   每个项目将在 10 分钟后过期（*请参阅`$ttl`*）
*   会话中仅保存 10 个项目（*请参阅`$max_entries`*）

    ```
    class Click
    {
        /**
         * CI instance
         * @var object
         */
        private $CI;

        /**
         * Click data holder
         * @var array
         */
        protected $clicks = array();

        /**
         * Time until an entry will expire
         * @var int
         */
        protected $ttl = 600;

        /**
         * How much entries do we store ?
         * @var int
         */
        protected $max_entries = 10;

        // -------------------------------------------------------------------------

        public function __construct()
        {
            $this->CI =& get_instance();

            if (!class_exists('CI_Session')) {
                $this->CI->load->library('session');
            }

            // load existing data from user's session
            $this->fetch();
        }

        // -------------------------------------------------------------------------

        /**
         * Add a new page
         *
         * @access  public
         * @param   int     $id     Page ID
         * @param   int     $time   Added time (optional)
         * @return  bool
         */
        public function add($id, $time = null)
        {
            // If page ID does not exist and limit has been reached, stop here
            if (!$this->exist($id) AND (count($this->clicks) == $this->max_entries)) {
                return false;
            }

            $time = !is_null($time) ? $time : time();

            if ($this->expired($id)) {
                $this->clicks[$id] = $time;
                return true;
            }

            return false;
        }

        /**
         * Get specified page ID data
         *
         * @access  public
         * @param   int     $id     Page ID
         * @return  int|bool        Added time or `false` on error
         */
        public function get($id)
        {
            return ($this->exist($id)) ? $this->clicks[$id] : false;
        }

        /**
         * Check if specified page ID exists
         *
         * @access  public
         * @param   int     $id Page ID
         * @return  bool
         */
        public function exist($id)
        {
            return isset($this->clicks[$id]);
        }

        /**
         * Check if specified page ID expired
         *
         * @access  public
         * @param   int     $id Page ID
         * @return  bool
         */
        public function expired($id)
        {
            // id does not exist, return `true` so it can added
            if (!$this->exist($id)) {
                return true;
            }

            return ((time() - $this->clicks[$id]) >= $this->ttl) ? true : false;
        }

        /**
         * Store current clicks data in session
         *
         * @access  public
         * @return  object  Click
         */
        public function save()
        {
            $this->CI->session->set_userdata('article_clicks', serialize($this->clicks));

            return $this;
        }

        /**
         * Load data from user's session
         *
         * @access  public
         * @return  object  Click
         */
        public function fetch()
        {
            if ($data = $this->CI->session->userdata('article_clicks')) {
                $this->clicks = unserialize($data);
            }

            return $this;
        }

        public function __destruct()
        {
            $this->save();
        }
    } 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T12:47:08.823

您可以轻松地将其包装到它自己的类中，该类将信息序列化为字符串并能够操作数据，例如添加另一个值，同时注意最多包含十个元素。

一个潜在的用法可能看起来像，让我们假设*最后一个*cookie在开始时包含 256：

```
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(10), "\n";
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(20), "\n";
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(30), "\n";
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(40), "\n";
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(50), "\n";
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(60), "\n";
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(70), "\n";
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(80), "\n";
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(90), "\n";
echo $_COOKIE['last'] = (new StringQueue($_COOKIE['last']))->add(100), "\n"; 
```

和输出（[演示](http://eval.in/5419)）：

```
10,256
20,10,256
30,20,10,256
40,30,20,10,256
50,40,30,20,10,256
60,50,40,30,20,10,256
70,60,50,40,30,20,10,256
80,70,60,50,40,30,20,10,256
90,80,70,60,50,40,30,20,10,256
100,90,80,70,60,50,40,30,20,10 
```

一个粗略的实现：

```
class StringQueue implements Countable
{
    private $size = 10;
    private $separator = ',';
    private $values;

    public function __construct($string) {
        $this->values = $this->parseString($string);
    }

    private function parseString($string) {
        $values = explode($this->separator, $string, $this->size + 1);
        if (isset($values[$this->size])) {
            unset($values[$this->size]);
        }
        return $values;
    }

    public function add($value) {
        $this->values = $this->parseString($value . $this->separator . $this);
        return $this;
    }

    public function __toString() {
        return implode(',', $this->values);
    }

    public function count() {
        return count($this->values);
    }
} 
```

这只是一些基本的字符串操作，这里用[`implode`](http://php.net/implode)and [`explode`](http://php.net/explode)。

# html - CSS3 动画错误

> ID：13939787
> 
> 赞同：0
> 
> 时间：2012-12-18T19:08:31.990
> 
> 标签：html, css, css-animations

我有一个使用 CSS3 动画弹跳的加载圈。我在 CSS 中编写了一个简单的淡出动画，在一定秒数后隐藏进度圈，但它似乎不起作用。

[jsFiddle](http://www.jsfiddle.net/Lc489/5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:30:45.060

您缺少浏览器前缀，这是当前 CSS 动画在主流浏览器中工作所必需的。

Firefox 和其他 Mozilla 浏览器的前缀是`-moz-`，WebKit 是`-webkit-`，Opera 是`-o-`，IE 是`-ms-`。

或者，您可以尝试使用[PrefixFree](http://leaverou.github.com/prefixfree/)的 2kb JavaScript 。该脚本很小，如果没有别的，它会为您节省一些时间和麻烦，因为您不必键入所有这些前缀。

# jquery - jQuery ajax POST json

> ID：13939793
> 
> 赞同：1
> 
> 时间：2012-12-18T19:09:03.463
> 
> 标签：jquery, ajax, json, post

所以，这是我的问题（我确实研究过并尝试通过查看此处发布的其他类似问题来解决我的问题，但没有奏效）

代码片段（忽略大括号和其他东西）：

```
json_string = JSON.stringify(json_links); 
var data_obj = { id:n_id, links_json: json_string }; 

$.ajax({ 
url: 'server_api', 
type: 'GET', 
data: data_obj, 
dataType: 'json', 
```

在服务器端，我尝试使用 perl 模块、JSON 和函数 decode_json 进行解码，但它会引发异常，“JSON 字符串中的 UTF-8 字符格式错误，字符偏移量为 48（在 "\x{92f}does-it-. ..") '

我尝试使用 POST 方法和内容类型组合，但它不起作用。jQuery 文档指定它默认编码为 UTF-8？请帮忙？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T19:18:44.353

尝试将数据作为字符串化 JSON 传递。

```
$.ajax({
    url: 'server_api',
    type: 'GET',
    data: JSON.stringify(data_obj),
    contentType: 'application/json; charset=utf-8',
    dataType: 'json'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:57:56.660

您可能将编码的 Unicode 字符传递给 decode_json，而不是二进制 UTF-8 字符。[有关问题和两个简单​​的潜在修复，请参见此处](https://stackoverflow.com/questions/10708297/perl-convert-a-string-to-utf-8-for-json-decode#10710462)。

其他一些事情是您没有在 data_obj. 相反，它试图插入这些变量的内容。我假设您希望它们本身就是标识符：

`data_obj = { 'id' : n_id, 'links_json' : json_string }`

除非您只是使用它来访问已经存储在服务器上的数据，否则您应该考虑使用 POST（或 PUT）代替，以更恰当地使用 RESTful。

此外，GET 是通过附加到 URL 来执行的，您需要注意：

> 数据对象，字符串
> 
> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅 processData 选项以防止此自动处理。

> 处理数据，布尔值
> 
> 默认值：真
> 
> 默认情况下，作为对象（从技术上讲，除了字符串之外的任何内容）传入 data 选项的数据将被处理并转换为查询字符串，适合默认的内容类型“application/x-www-form-urlencoded” . 如果要发送 DOMDocument 或其他未处理的数据，请将此选项设置为 false。

因为数据是附加的 URL，即使*你*的 javascript 试图发送正确的二进制编码的 UTF-8，它仍然可能被翻译成编码的 Unicode。

此外，`datatype`与您*发送的数据无关**，*它指的是您希望收到的数据。我假设你意识到了这一点，但我想确定一下。

所以你可能想把你`data_obj`自己串起来，而不是让你自己`.ajax`做。

Have you tried simply echoing out your received (server side) data raw (without running a json decode) to see what you're receiving server side, and whether it matches what you expected? It's hard to tell what your problem is necessarily without a sample dataset that replicates it for you. I'm assuming it's going to be related to Perl's json_decode and related encoding issues (the first line here), however.

# php - 从下拉列表中选择后提交表单而不刷新

> ID：13939794
> 
> 赞同：1
> 
> 时间：2012-12-18T19:09:03.407
> 
> 标签：php, jquery, forms

我正在尝试设置一个表单，以便在从下拉菜单中进行选择时提交（不刷新页面）。我目前将其设置为在选择下拉列表时提交，但它会刷新页面。

我的表格代码是，

```
<form action="" method="get">
<select name="day" onchange="this.form.submit();">
<option>Please select a date</option>
<option value="Mon"><?php echo $monday; ?></option>
<option value="Tue"><?php echo $tuesday; ?></option>
<option value="Wed"><?php echo $wednesday; ?></option>
<option value="Thu"><?php echo $thursday; ?></option>
<option value="Fri"><?php echo $friday; ?></option>
</select>
</form> 
```

我已经尝试了几个关于提交表单而不刷新的 jquery 教程，但它们都涉及一个提交按钮。我需要一个将表单的提交绑定到在下拉列表中选择一个选项的时间。

任何帮助将非常感激。

编辑：使用此处答案中的一些想法、一些教程和大量试验/错误来解决。我终于弄明白了。这是有效的代码

```
$('#day').change(function() 
{
   $.ajax({
        type: 'post',
        url: "tutoringlistsession.php",
        data: $("form.day").serialize(),
        success: function() {
            $('#list').load('tutoringlist.php', function(){
            });
            $('#list').show("fast");
        }
    });
                return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:14:53.633

您需要绑定到表单的提交事件：

```
$("form").on('submit', function (e) {
   //prevent form submission / page refresh
   e.preventDefault();

   //submit form with ajax
   $.get(window.location, $(this).serialize());
}); 
```

我也将绑定到`select`jQuery 以及清洁/一致性：

```
$("form select").on('change', function () {
   $("form").trigger('submit');
}); 
```

我还会使用更具体的选择器，这需要更新您的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:19:37.643

通过选择元素的 ajax onChange 提交表单：

```
$("select").on('change', function () {
    var thisForm = $(this).closest('form');
    $.get($thisForm.attr('action'), $thisForm.serialize());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:20:34.117

我使用此处发布的想法和几个教程来找出答案。工作代码如下：

```
$('#day').change(function() 
{
   $.ajax({
        type: 'post',
        url: "tutoringlistsession.php",
        data: $("form.day").serialize(),
        success: function() {
            $('#list').load('tutoringlist.php', function(){
            });
            $('#list').show("fast");
        }
    });
                return false;
}); 
```

# asp.net-mvc - 在 asp.net mvc 中具有自定义表的成员资格

> ID：13939801
> 
> 赞同：0
> 
> 时间：2012-12-18T19:09:45.853
> 
> 标签：asp.net-mvc, asp.net-membership

我正在尝试将我的 vb.net 2010 Web 表单应用程序转换为 C# MVC 4 应用程序。由于我的会员资格已经设置，我宁愿继续使用会员资格提供程序而不是 simplemembershipprovider。你好，

我正在使用 PluralSight 来学习 MVC，但找不到任何关于如何将会员代码转换为 mvc 的参考资料。

我有一个由 UserID 链接到 mememberships User 表的自定义表。此自定义表 asp_customUser 存储有关用户的其他信息。

在帐户控制器中，有一个注册操作，带有视图和模型。注册过程不处理角色，更不用说我的自定义数据了。

我想知道的是，当注册视图中的部分字段来自会员库而另一部分进入我的自定义表时，如何将角色和自定义用户信息添加到数据库中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:21:38.890

是的，您可以使用旧会员。只需将您的会员提供商从旧的 web.config 复制并粘贴到新的。

但是，如果它在另一台计算机上运行，​​您可能需要设置机器密钥，以便它能够正确验证密码哈希。

然后，您将从 Account 控制器中删除 Simple 成员资格初始化属性，并且您需要删除所有其他简单成员资格代码。您还将放弃 OpenId 身份验证，因为普通成员资格不适用于 WebSecurity，因此您还必须删除所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:15:32.260

当我们想要扩展成员资格类时，我们继承了基本成员资格类并使用其中的所有字段和链接到它的表，然后创建一个附加的数据库表，其中 FK 链接到成员资格表中的 id。新表和扩展类中的任何附加参数以及任何标准参数都在 std 成员表和标准类中。

# java - Java单例检索局部变量在设置后始终为空

> ID：13939803
> 
> 赞同：0
> 
> 时间：2012-12-18T19:10:08.240
> 
> 标签：java, singleton

有一个问题真的让我很害怕。所以我们有一个 MainView，它在上面显示一个地图（MapView，它是一个 JComponent）。在 MapView 类中，我们覆盖了paintComponent(Graphics g) 来绘制我们的自定义内容。到目前为止工作正常。

我们还有一个 RouteControl 单例类，其中有一个局部变量 Route，我们可以使用 setRoute 设置它并使用 getRoute 检索。现在有趣的部分：

当在我们的 MapView paintComponent 中检索 RouteControl 实例时，Route 始终为空。但是我们在 MainView 中设置了一个路由，如果我们在设置后检索该路由，则它不为空。

我在这里错过了一个关键点，比如多线程吗？我还有一个带有 get/setMap 的单例类 MapControl 。

项目代码：

```
public class MainView extends javax.swing.JFrame {
    private static MainView instance;

    private void comboRouteActionPerformed(java.awt.event.ActionEvent evt) {
        File _routeFile = RouteControl.getInstance().getRouteFile(comboRoute.getSelectedItem().toString());
        Route _route = RouteControl.getInstance().loadRoute(_routeFile);
        RouteControl.getInstance().setRoute(_route);
        // if we retrieve the route here it works
    }
} 
```

现在 MapView:JComponent:

```
public class MapView extends JPanel {
    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        // this nicely works, also set in the MainView!
        if(MapControl.getInstance().getMap() != null) {
            BufferedImage mapImage = MapControl.getInstance().getMap().getMapImage();
            g.drawImage(mapImage, 0, 0, null);   

            // draw le route THIS IS ALWAYS NULL
            if(RouteControl.getInstance().getRoute() != null) {
                g.setColor(Color.red);
                g.fillRect(40, 40, 15, 15);
            }
            else {
                System.out.println("**** route is null");
            }
        }
    }
} 
```

路线控制：

```
public class RouteControl {
    private static RouteControl instance;
    private Route route;

    public static synchronized RouteControl getInstance() {
        if (instance == null) {
            instance = new RouteControl();
        }
        return instance;
    }    

    public Route getRoute() {
        return route;
    }

    public void setRoute(Route route) {
        System.out.println("RouteControl:setRoute");
        this.route = route;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:22:20.450

我想你在这里可能有**时间问题**。似乎您从`MainView`类中的某个位置加载路由并在加载后设置它。如果在`MapView`加载完成之前绘制 ，路线将为`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:46:56.617

你能把完整的代码放在这里吗？

像下面这样的调用会导致编译错误，所以必须有更多。

*   文件 _routeFile = RouteControl.getInstance().getRouteFile(comboRoute.getSelectedItem().toString());
*   路线 _route = RouteControl.getInstance().loadRoute(_routeFile);

我对错误单例布线的第一个猜测是类加载问题。请检查单例对象在物理上是否相同。

# c# - C# 传递一个类作为参数

> ID：13939806
> 
> 赞同：2
> 
> 时间：2012-12-18T19:10:16.167
> 
> 标签：c#, class, methods, interface, parameters

我有一个接口，它有一些方法

```
interface IFunction
{
    public double y(double x);

    public double yDerivative(double x);
} 
```

我有**静态**类，正在实现它。

```
static class TemplateFunction:IFunction
{
    public static double y(double x)
    {
        return 0;
    }

    public static double yDerivative(double x)
    {
        return 0;
    }
} 
```

我想将这些类作为参数传递给另一个函数。

```
 AnotherClass.callSomeFunction(TemplateFunction); 
```

以及其他一些捕获请求的类

```
class AnotherClass
{
    IFunction function;
    public void callSomeFunction(IFunction function)
    {
        this.fuction = function;
    }
} 
```

好吧，它不起作用...我尝试使用 Type 表达式，但这打破了使用接口的想法。有谁知道如何更正代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T19:16:28.543

静态类不能实现接口，但是您可以通过使您的类成为非静态类和泛型方法来轻松克服这一点：

```
class AnotherClass
{
    IFunction function;

    public void callSomeFunction<T>()
        where T: IFunction, new()
    {
        this.fuction = new T();
    }
} 
```

这与您想要的语法非常接近：

```
AnotherClass.callSomeFunction<TemplateFunction>(); 
```

但我实际上认为这种方式太复杂了，可能会混淆某人，你应该遵循 Servy 的方法，它更简单：

```
AnotherClass.callSomeFunction(TemplateFunction.Instance); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:16:47.967

让静态类实现接口的概念方法是使用单例，即使该单例不包含任何状态：

```
public sealed class TemplateFunction : IFunction
{
    private TemplateFunction() { }
    private static TemplateFunction instance = new TemplateFunction();

    public static TemplateFunction Instance { get { return instance; } }

    public double y(double x)
    {
        return 0;
    }

    public double yDerivative(double x)
    {
        return 0;
    }
} 
```

另一种选择是不使用接口，而是让您的方法接受一个或多个委托。如果您只需要一种方法，那很好，如果您有两种方法，有时可以，有时则不行。如果你有两个以上，这通常是一个问题。

```
public class AnotherClass
{
    public static void callSomeFunction(Func<double, double> y
        , Func<double, double> yDerivitive)
    {
        //store delegates for later use
    }
}

AnotherClass.callSomeFunction(TemplateFunction.y, TemplateFunction.yDerivative); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:15:58.207

您如何使用泛型方法来捕获您正在调用的类型。

像这样：

```
public void callSomeFunction<T>()
{
    //the type is T
    //you can create an instance of T with System.Activator.CreateInstance(T) and T's methods
    //alternatively if the classes are static you can call the methods with reflection knowing only their name.
} 
```

* * *

无论如何，如果您想要这样做的原因是因为您想要拥有多个实现相同方法的类，并且您想要编写一个方法来根据类型调用这些方法的某个实现，那么其他解决方案可能会在顺序，如重载。

或者，如果这确实是您想要做的，那么请记住，传递接口将不允许您使用我向您介绍的方法，因为 Activator 需要访问 Type 以便它可以创建实例.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T19:24:25.367

您可以按照 Allon 所说的将 TemplateFunction 更改为非静态，然后执行以下操作：

```
var anotherClass = new AnotherClass();
var templateFunction = new TemplateFunction();

anotherClass.callSomeFunction(templateFunction); 
```

# llvm - 尝试在 llvm 中运行 jited 代码时缺少符号 __Unwind_resume 和 __assert_fail

> ID：13939807
> 
> 赞同：1
> 
> 时间：2012-12-18T19:10:20.750
> 
> 标签：llvm, jit, llvm-clang

我们正在尝试调整 clang-llvm 解释器代码[，](http://llvm.org/viewvc/llvm-project/cfe/trunk/examples/clang-interpreter/)以运行一些使用 stl 向量和 c++ 字符串等的 c++ 代码。这导致了许多未解析的符号，在消除了一堆之后，我们仍然卡在 __Unwind_resume 和 __assert_fail

我真的很感激任何帮助解决这个问题。

注意：我们在需要被 jitted 的代码中包含问题，因此我们运行 clang++ 对其进行预处理，其输出是一个不依赖于本地包含的单个 c++ 文件。不确定这是否带来了一些问题。

注意 2：这是在 Ubuntu 12.01 上，我们尝试使用 clang+llvm 3.1 和 gcc 4.6.3 编译 clang 解释器

# asp.net - 无法识别用户控件中动态创建的控件

> ID：13939808
> 
> 赞同：0
> 
> 时间：2012-12-18T19:10:23.433
> 
> 标签：asp.net

在 ascx.cs 文件中，我动态生成按钮。在 .aspx 文件中，我将控件添加到表单中。控件本身呈现良好，但是单击按钮时出现此错误

> 发生错误，因为无法找到 ID 为“ctl03”的控件，或者在回发后将不同的控件分配给了相同的 ID。

桌面控制.ascx.cs

```
public partial class DesktopControl : PlaceHolder
{

    public void Build()
    {
    for (int i = 0; i < 10; i++)
    {
        Button button = new Button()
        {
            Width = 50,
            Height = 50,
            ID = string.Format("button{0}", i),
            Text = i.ToString()
        };
        button.Click+=new EventHandler(button_Click);
    }
    }
} 
```

默认.aspx.cs

```
DesktopControl desktop = new DesktopControl();
desktop.Build();
MainContent.Controls.Add(desktop); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:58:39.287

阅读评论后（很难阅读评论的代码部分），看起来是的，您正在生成您的控件`if(!isPostBack){}`; 好吧，看起来它是该声明的`else`一部分。`if`

每次页面回发时，您都必须生成控件，因为在单击`page_load`之前会触发控件。`button`因此，一旦重新创建控件，代码将继续到您的`button`单击处理程序，在那里控件应该可以处理。

从本质上讲，`ReloadUI(Session["ui"]);`删除`if(!isPostBack){}else{}`声明。把它放在你的`if`陈述之后。

像这样：

```
if (!isPostBack){

    // my first load code
}else{
   // my postback code
}

// load all my dynamic controls here
ReloadUI(Session["ui"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:34:59.427

找到了解决方案：

每次有一个新的 UI 时，我都会调用这个 ClearScreen() 来解决问题。'ctl03' 上的错误是一个菜单控件，它正在生成它自己的 ID，并且不知何故在回发时不可用。我给它分配了一个ID。但我想所有的问题都用这个 ClearScreen() 方法解决了。

```
private void ClearScreen()
{
    try
    {
        List<Control> controls = new List<Control>();
        foreach (Control control in MainContent.Controls)
        {
            controls.Add(control);
        }

        for (int i = 0; i < controls.Count; i++)
        {
            if (!(controls[i].GetType() == typeof(LiteralControl) || controls[i].GetType() == typeof(ScriptManager)))
            {
                MainContent.Controls.Remove(controls[i]);
            }
        }
    }
    catch (Exception ex)
    {

    }
} 
```

# eclipse - OSGI 包，无法解析 javax.servlet 类

> ID：13939810
> 
> 赞同：2
> 
> 时间：2012-12-18T19:10:29.970
> 
> 标签：eclipse, jakarta-ee, eclipse-plugin, osgi

我正在尝试构建一个导入以下内容的类的 OSGI 包：

```
import javax.servlet.jsp.JspWriter;
import javax.servlet.jsp.tagext.BodyContent;
import javax.servlet.jsp.tagext.BodyTagSupport; 
```

我正在尝试将其构建为 Eclipse 中的插件项目。我添加了解决错误但导出为插件失败的 j2ee jar。

我也不想将 j2ee jar 添加到它，因为我可能在 OSGi 容器中不匹配。解决此问题的最佳方法是什么？我是 OSGI 的新手..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:41:43.857

Geronimo 和 ServiceMix 提供了提供 Servlet API 的包。尽管您可能仍然需要一个 Web 容器来运行您的 OSGi-Web 应用程序。那么您的容器设置如何？

对于 OSGi 容器，有[Apache Karaf](http://karaf.apache.org/)和[Eclipse Virgo](http://www.eclipse.org/virgo/)。它们都提供了一个 Web 容器。如果你想设置自己的容器，你可能想看看[Pax-Web](http://team.ops4j.org/wiki/display/paxweb/Pax+Web)。这个还提供了所需的 Servlet API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:12:46.833

我确信有 j2ee.jar 的捆绑版本可用于 OSGi 容器。如果不是这种情况，请自行[捆绑](https://stackoverflow.com/questions/7277172/download-java-ee-api-jars-as-osgi-bundles)。

# php - 页面加载时重新加载下拉菜单

> ID：13939828
> 
> 赞同：0
> 
> 时间：2012-12-18T19:11:27.147
> 
> 标签：php, mysql, select

我有一个 html 表单，我一直在使用它来 POST 到 php 表单，这会将发布的数据保存到数据库中。当我单击编辑时，我现在正在将数据加载回表单中，这适用于文本字段，因为我可以使用

```
value="<?php echo $somefield ?>" 
```

问题是我不确定如何重新选择我的下拉菜单。菜单看起来像这样，用于选择一个类别，但是当页面重新加载时没有任何反应，下拉菜单也没有重新加载。

```
 <select name="category" id="category">
    <option>- Select A Category -</option>
      <optgroup label="Tractors">
      <option value="Tractor">Tractor</option>
      <option value="Compact">Compact</option>
    <option value="Forklift">Forklift</option>
    <option value="Load All">Load All</option>
    <option value="Loader">Loader</option>
    <option value="Maniscopic">Maniscopic</option>
    <option value="Masted">Masted</option>
    <option value="Piviot">Piviot</option>
    <option value="Telescopic">Telescopic</option>
    <option value="UTV">UTV</option>
      </optgroup>
      <optgroup label="Machinery">
      <option value="Attachments">Attachments</option>
      <option value="Bale Handling">Bale Handling</option>
      <option value="Cultivation Equipment">Cultivation Equipment</option>
      <option value="Drills">Drills</option>
      <option value="Feeders">Feeders</option>
      <option value="Fertlizer Spreaders">Fertlizer Spreaders</option>
      <option value="Grass Harrows">Grass Harrows</option>
      <option value="Grassland Equipment">Grassland Equipment</option>
      <option value="Hedge Cutters">Hedge Cutters</option>
      <option value="Mowers">Mowers</option>
      <option value="Muck Spreaders ">Muck Spreaders </option>
      <option value="Ploughs">Ploughs</option>
      <option value="Post Hammers">Post Hammers</option>
      <option value="Power Harrows">Power Harrows</option>
      <option value="Rakes">Rakes</option>
      <option value="Rolls">Rolls</option>
      <option value="Rotovators">Rotovators</option>
      <option value="Shredders">Shredders</option>
      <option value="Splitters">Splitters</option>
      <option value="Sprayers">Sprayers</option>
      <option value="Spreaders">Spreaders</option>
      <option value="Tankers">Tankers</option>
      <option value="Tedders">Tedders</option>
      <option value="Toppers">Toppers</option>
      <option value="Trailers">Trailers</option>
      <option value="Wrappers">Wrappers</option>

      </optgroup>
      <optgroup label="Forklifts">
      </optgroup>
    </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:13:35.160

构建列表时，所选选项应具有 selected="selected" 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:15:07.287

```
<?php

  echo '<select>';
  foreach( $names as $name )
    echo '<option value="'.$name.'" '.($name==$selected?' selected="selected"':'').'>'.$name.'</option>'

  echo '</select>';

?> 
```

# java - 创建一个对象

> ID：13939834
> 
> 赞同：0
> 
> 时间：2012-12-18T19:11:54.950
> 
> 标签：java, android

我怎样才能创建一个对象，以便我可以得到该项目。我找到了一个例子说

```
 Object item2 = getListView().getAdapter().getItem(holder.position); 
```

创建对象，但在我的课堂上有所不同，你能帮我找出我需要这个对象的原因吗

这是我的课。我该怎么做：

我需要这个对象来做一些功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:20:58.097

```
//if you have an instance of the adapter...
int index = 5;  //or whatever index you want
HashMap<String,String> mHashMap = adapter.getItem(index);

//if you are inside of the MyCustomAdapter class...
int index = 5;
HashMap<String,String> mHashMap = getItem(index); 
```

# java - ArrayList如何添加整数属性 - 逻辑问题

> ID：13939844
> 
> 赞同：1
> 
> 时间：2012-12-18T19:12:21.593
> 
> 标签：java, arraylist

我有一个名为的类`Animal`，它具有以下字段；

```
String ani_Name;
int animal_maintainance_cost; 
```

我有一堂课叫`Maintenance`. 和：

1.  它有一种方法来计算动物园中动物的总动物维护成本。
2.  它有一种方法可以计算动物园里所有动物的动物维护成本。

我试过的代码：

```
private Map <Integer,Animal> animal = new HashMap<Integer,Animal>();

// Here, `Integer` is the `animalID `and `Animal `is an object of the class `Animal`
//Then i generated getters and setters, and using the setter method i will be adding all the animals in the Zoo. 
```

### 1

```
public int returnAllAnimalMaintenanceCost(Integer animalID){
  int animalMaintenaceCostForGivenAnimalID = ???? // How do i calculate this using `Map <Integer,Animal>`
return animalMaintenaceCostForGivenAnimalID;

} 
```

### 2

```
public int returnAllAnimalMaintenanceCost() {
   return ??
} 
```

有人可以帮我计算动物园里所有动物的总维护成本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:21:36.727

起初我在想“你需要一个 HashMap”，然后我认为你可能不需要一个 HashMap。现在我意识到是的，您可能想要一个 HashMap 来存储每种类型的动物的数量。

我认为将 an 映射`animalId`到动物的概念有点奇怪，因为我认为每种动物的名称已经是唯一的，为什么需要一个 Id？

我相信这对你有用：我在下面假设动物地图用于将动物映射到计数（每种动物类型有多少）。

```
private Map<Animal, Integer> animal = new HashMap<Animal, Integer>();

public int returnAllAnimalMaintenanceCost() {
    int sum = 0;
    for (Entry<Animal, Integer> ee : animal.entrySet()) {
        sum += ee.getValue() * ee.getKey().getMaintenanceCost();
    }
    return sum;
} 
```

要查找特定动物的维护成本，您可以输入动物的名称，循环遍历您的 animal.keySet()，找到您正在寻找的特定动物，返回 Animal 类中的维护成本乘以存在该类型的动物数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:27:24.273

试试这个来获取特定动物的 id：

```
public int returnAnimalMaintenanceCost(int animalID) {
    return animal.get(animalID).getCost();
} 
```

您可以考虑将地图重命名为`aminals`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:39:50.683

```
public class Constants
{
      public static int ANIMAL_ID = 0;
      public Map <Integer,Animal> animal = new HashMap<Integer,Animal>();
} 
```

动物类

```
public class Animal
{
      public int id;
      String ani_Name;
      int animal_maintainance_cost;
      public Animal()
      {
            id = ++Constants.Animal_ID;
            constants.put( id, this );
      }
} 
```

维修班

```
public class Maintenance
{
     public int totalAnimalMaintenanceCostOfAnAnimal(Integer animalID)
     {
         return (Constants.get( animalID )).animal_maintainance_cost;
     }

     public int returnAllAnimalMaintenanceCost() 
     {
         int sum = 0;
          for ( int i = 1; i <= Constants.ANIMAL_ID; i++) 
          {
                sum = sum + (Constants.get( i)).animal_maintainance_cost;
          }
          return sum;
     }
} 
```

# php - PHP URL 字符串以避免浏览器缓存

> ID：13939851
> 
> 赞同：5
> 
> 时间：2012-12-18T19:12:55.960
> 
> 标签：php, caching

我的网站被设计成一个有趣的图片网站，当用户点击随机按钮时，同一页面上的 PHP 代码会生成一个新的随机图片，这就是它应该如何工作的。但是，我必须按 F5 按钮才能获得新图像。

我正在阅读另一个问题，即人们使用在链接末尾生成的获取日期和获取时间查询字符串来避免浏览器缓存，但是我一生都无法弄清楚。

我对php不是很好，所以请说我只知道基本的网页结构。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T19:20:38.800

您所描述的称为缓存断路器，通常是随机字符串或附加到 url 的时间戳。当你引用你的图像时，像这样添加它：

```
echo get_random_image_url() . '?' . time(); 
```

这将导致一个如下所示的 url：

[http://your.server.com/random.jpg?1355862360](http://your.server.com/random.jpg?1355862360)

注意：`get_random_image_url`只是一个例子，但我相信你明白了。

这个线程可能很有趣：[How to force a web browser NOT to cache images](https://stackoverflow.com/questions/126772/how-to-force-a-web-browser-not-to-cache-images)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:23:08.867

我认为使用标题比 url 技巧更好

```
<?php
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
?> 
```

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:21:32.057

这很容易解决：例如，检查以下两个链接：

[http://cdn.arstechnica.net/wp-content/uploads/2012/10/06_Place_20773_1_Mis.jpg](http://cdn.arstechnica.net/wp-content/uploads/2012/10/06_Place_20773_1_Mis.jpg)

[http://cdn.arstechnica.net/wp-content/uploads/2012/10/06_Place_20773_1_Mis.jpg?randomValue](http://cdn.arstechnica.net/wp-content/uploads/2012/10/06_Place_20773_1_Mis.jpg?randomValue)

这两个链接都将打开相同的图像。

这是你的解决方案！您必须在图像文件名的末尾添加一个随机值：

```
image.png?<?php echo someRandom();?> 
```

该社区或 Google 提供了一种编写生成随机值的函数的方法。

还有使用[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")的解决方案，假设如下

```
<img id="funny" src="scripts/php_rand_image.php" />
<a href="javascript:changeImage('funny')">Get another image</a>
<script>
function changeImage(ob){
image = document.getElementById(ob)
d = new Date();
image.src = image.src+'?'+d.getTime();
}
</script> 
```

# java - 不幸的是，我的第一个应用程序已在模拟器中停止

> ID：13939852
> 
> 赞同：3
> 
> 时间：2012-12-18T19:12:58.787
> 
> 标签：java, android

我正在尝试Android官方网站上的第一个教程。这是为了在单击发送时显示一条消息，但是当我单击发送时出现错误。

我已经尝试过类似这样的某些问题，但我找不到我的问题的答案

我对Java和Android缺乏经验。

错误日志：

```
12-18 18:56:33.421: W/Trace(1004): Unexpected value from nativeGetEnabledTags: 0
12-18 18:56:33.421: W/Trace(1004): Unexpected value from nativeGetEnabledTags: 0
12-18 18:56:33.450: W/Trace(1004): Unexpected value from nativeGetEnabledTags: 0
12-18 18:56:33.480: D/AndroidRuntime(1004): Shutting down VM
12-18 18:56:33.490: W/dalvikvm(1004): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-18 18:56:33.520: E/AndroidRuntime(1004): FATAL EXCEPTION: main
12-18 18:56:33.520: E/AndroidRuntime(1004): java.lang.IllegalStateException: Could not execute method of the activity
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.view.View$1.onClick(View.java:3597)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.view.View.performClick(View.java:4202)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.view.View$PerformClick.run(View.java:17340)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.os.Handler.handleCallback(Handler.java:725)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.os.Looper.loop(Looper.java:137)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at dalvik.system.NativeStart.main(Native Method)
12-18 18:56:33.520: E/AndroidRuntime(1004): Caused by: java.lang.reflect.InvocationTargetException
12-18 18:56:33.520: E/AndroidRuntime(1004):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.view.View$1.onClick(View.java:3592)
12-18 18:56:33.520: E/AndroidRuntime(1004):     ... 11 more
12-18 18:56:33.520: E/AndroidRuntime(1004): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.myfirstapp/com.example.myfirstapp.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml?
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.app.Activity.startActivityForResult(Activity.java:3370)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.app.Activity.startActivityForResult(Activity.java:3331)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.app.Activity.startActivity(Activity.java:3566)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at android.app.Activity.startActivity(Activity.java:3534)
12-18 18:56:33.520: E/AndroidRuntime(1004):     at com.example.myfirstapp.MainActivity.sendMessage(MainActivity.java:37)
12-18 18:56:33.520: E/AndroidRuntime(1004):     ... 14 more
12-18 18:56:37.129: I/Process(1004): Sending signal. PID: 1004 SIG: 9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T19:14:25.023

> 找不到明确的活动类 {com.example.myfirstapp/com.example.myfirstapp.DisplayMessageActivity}；您是否在 AndroidManifest.xml 中声明了此活动？

所以请确保您已声明`DisplayMessageActivity`为`AndroidManifest`：

```
<activity 
   android:name="com.example.myfirstapp.DisplayMessageActivity">
</activity> 
```

# scala - 如何在 Scala 中简化这个传递应用程序

> ID：13939854
> 
> 赞同：0
> 
> 时间：2012-12-18T19:13:09.550
> 
> 标签：scala

对于给定的函数调用 f，带有参数 a、b 和 c，它使用函数 h 和 i 调用函数 g 来构建参数，我可以说：

```
f(a)(b)(c) = g( h(a)(b)(c), i(a)(b)(c) ) 
```

我知道我可以创建一个函数：

```
g'(h,i)(a)(b)(c) = g(h(a)(b)(c), i(a)(b)(c)) 
```

所以 f 可以是

```
f = g'(h,i) 
```

因此应用 f(a)(b)(c) 将产生所需的结果。

我可以从（其中 f 变为 build ）强制执行此操作：

```
def build(a: String)(b: String)(c: String) =
  Message(convA(a)(b)(c), convB(a)(b)(c)) 
```

to（鉴于 h 和 i 作为参数并不重要，也许这就是断开连接的地方）：

```
def gDash = {
  a:String => b: String => c: String => Message(convA(a)(b)(c), convB(a)(b)(c))
}

def build = a:String => b:String => c:String => gDash(a,b,c) 
```

但我仍然必须为 (a,b,c) 指定整个类型。但是我已经从应该更复杂和更脆弱的东西变成了更简单的东西，但实现实际上是一个更大的混乱！有没有办法简化这个不需要所有这些？

如果我对参数进行元组化，以便：

```
def gDash = implicit composite:(String,String,String) => Message(convA, convB)

def convA(composite: s) => ...
def convB(composite: s) => ...

def f(a: String)(b: String)(c: String) = gDash((a,b,c)) 
```

我不确定这实际上更好，我觉得我错过了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T20:12:55.637

方法要求您明确使用参数。元组可以具有分配给它们的类型别名，这可以帮助处理多余的类型：

```
type S3 = (String, String, String) 
```

`(A, B) => C`你可以在函数和`A => B => C`with之间来回切换`curried`和`Function.uncurried`。

这些为您提供了对函数进行更紧凑表示所需的工具。例如，如果你想要一个叫做`build`form的东西`String => String => String => Whatever`，你可以

```
val build = ((abc: S3) => Message(convA(abc), convB(abc)).curried 
```

然后如果你想`gDash`代替你写，`Message`你可以做类似的事情

```
def dash[A,B,C,D,E](g: (A,B) => C)(h: E=>A, i: E=>B): E => C = 
  (e: E) => g(h(e),i(e)) 
```

`E`如果你想真正成为三个单独的字符串参数，然后在途中取消curry 。

# java - 带有 jQ uery 元素错误的外部页面 div 加载

> ID：13939856
> 
> 赞同：2
> 
> 时间：2012-12-18T19:13:19.123
> 
> 标签：java, javascript, ajax, jquery

如果有人比我更了解 jQuery（可能 99% 在这里，因为这是我尝试此代码的第一周 :) 还剩下一些时间，这是一个我真的需要回答的问题。对不起，一些不正确的英语。

你们中的一些人可能已经阅读了我提出的关于将外部页面内容放入 div 和 UI 选择幻灯片元素的其他问题，这些元素在此类加载的 div 中正确加载，这是该主题的延续，现在我希望解决这个问题，我做在这里收集信息的新主题。主要问题是为什么 UI 滑块（选择元素）在通过 jQuery（在同一主页中）加载（从另一个页面中的 div）到 div 时不起作用。

这是我用来将内容加载到网站的代码：

```
load_script.js
$(document).ready(function(){
    $('#div_that_will_receive_content').load('from_page.html #from_div');
}); 
```

**问题：**问题以两种不同的方式出现。1：当仅加载DIV时，滑块显示，div中的所有内容都显示并且div加载正确，除了滑块。滑块在加载时显示 0.1 秒，然后消失。2：当整个网站加载（包括 ui 滑块）内容循环并且网站永远不会停止加载时，在浏览器控制台中检查时，25-30mb 会在几秒钟内加载。即使在这种情况下，滑块在加载时刻也可能仅显示 0.1 秒，并且由于站点的循环加载，滑块会闪烁。

### Page_1.html

```
<html>
<head>
<script src="jquery-1.8.3.js" type="text/javascript"></script>
<script src="jquery-ui-1.9.2.js" type="text/javascript"></script>
<script src="load_script.js" type="text/javascript"></script>

<link href="jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css" />

<script>
$(function() {
    $( "#slider" ).slider();
});
</script>
</head>
<body>

<div id="div_1">DIV 1 = This is where the content of div_2 should be</div>

</body>
</html> 
```

### Page_2.html

```
<html>
<head>
<script src="jquery-1.8.3.js" type="text/javascript"></script>
<script src="jquery-ui-1.9.2.js" type="text/javascript"></script>
 <script src="load_script.js" type="text/javascript"></script>

<link href="jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css" />

<script>
$(function() {
    $( "#slider" ).slider();
});
</script>
 </head>
<body>

<div id="div_2">DIV 2 = This div containing a slide-select-element will be loaded to to     div_1</div>

</body>
</html> 
```

### load_script.js

```
<script>
    $(document).ready(function(){
        $('#div_1').load('Page_2 #div_2');
});
</script> 
```

* * *

我对此仍有一些问题。现在的问题是，如果我将整个 Page2.html 加载到 Page1.html 中的 div 中，一切都会顺利进行。但是，如果我只是从 Page2.html 加载选定的 div，则幻灯片元素不会显示，但其余内容会显示（文本）。

这项工作和整个页面都被加载，包括滑块：

```
<script>
    $(document).ready(function(){
        $('#div_1').load('Page_2');
});
</script> 
```

这不起作用，滑块不会显示，但其余内容会显示（文本）：

```
<script>
    $(document).ready(function(){
        $('#div_1').load('Page_2 #div_2');
});
</script> 
```

有人知道这取决于什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:18:56.320

删除第二页上的所有脚本导入-您只需要加载一次-每次加载时`load_script.js`-它都会导致无限循环，因为那是您的加载函数所在的位置。然后您可以使用 .load() 的回调函数来初始化滑块。

```
$(document).ready(function(){
    $('#div_that_will_receive_content').load('from_page.html #from_div',function(){
         $( "#slider" ).slider();
    });
}); 
```

但是，如果您还独立使用该页面，那将破坏您的第 2 页。如果是这种情况，那么您只需要从 page2 中删除以下内容

```
<script src="load_script.js" type="text/javascript"></script> 
```

# javascript - Tiny_mce - 无法设置宽度

> ID：13939864
> 
> 赞同：3
> 
> 时间：2012-12-18T19:13:58.440
> 
> 标签：javascript, jquery, css, tinymce

首先让我说我很清楚这是一个重复的问题 - [TinyMCE 宽度和高度不听话！](https://stackoverflow.com/questions/6436934/tinymce-width-and-height-disobedient)

问题是我尝试了所有建议的 css fixe 都无济于事，而且我没有使用 init（我发现的文档告诉你设置宽度和高度） - 我不知道为什么，我很久以前就这样做了。这是在fancybox的aftershow事件中启动的mce代码：

```
 $('textarea.tinymce').tinymce({
            // Location of TinyMCE script
            script_url: '/assets/js/common/tiny_mce/tiny_mce.js',

            // General options
            theme: "advanced",
            plugins: "autolink,lists,pagebreak,table,advlink,iespell,inlinepopups,insertdatetime,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,template,advlist",

            // Theme options
            theme_advanced_buttons1: "undo,redo,|,cut,copy,paste,|,bold,italic,underline,|,forecolor,|,justifyleft,justifycenter,justifyright,justifyfull,|,sub,sup,|,formatselect,fontsizeselect",
            theme_advanced_buttons2: "tablecontrols,|,charmap,iespell,|,cite,abbr,acronym,|,bullist,numlist,|,outdent,indent,blockquote,|,link,unlink,|,fullscreen",
            theme_advanced_toolbar_location: "top",
            theme_advanced_toolbar_align: "left",
            theme_advanced_statusbar_location: "bottom",
            theme_advanced_resizing: false
            }); 
```

请有人告诉我如何使这个该死的东西 500px 宽。我试过这个（什么都不做）：

```
.mceEditor > table {
    width:500px !important;
} 
```

尝试将其放在我的代码中的一般选项中：

```
width:"500", 
```

尝试将 textarea 的列设置为 2

尝试使用 !important 设置以下元素的 css 宽度：

```
id=desc_mce_parent,  id="desc_mce_tbl" 
```

我已将调整大小设置为 false

无论我做什么都没有改变——为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:34:53.420

好吧...我觉得这样说有点白痴，但就我而言，这是因为我的工具栏太大了。我通过将我的按钮分布在三个工具栏上解决了这个问题 - 你可以使用 css 设置宽度，但它不会比你的工具栏小，而且它们不会环绕（似乎这可能是一个很好的功能）。

# python - Pybrain 神经网络阶跃传递函数

> ID：13939865
> 
> 赞同：2
> 
> 时间：2012-12-18T19:14:02.877
> 
> 标签：python, machine-learning, neural-network, pybrain

有人可以告诉我如何在 pybrain 中实现步进激活功能吗？

例如。

```
def stepActivationFunction(n):
    if n > 0.5: return 1.
    else: return 0. 
```

[我似乎在pybrain.structure.modules](https://github.com/pybrain/pybrain/tree/master/pybrain/structure/modules)中找不到任何实现？

谢谢

编辑

**我现在明白您可以扩展 pybrain 并创建自己的图层。但是，我仍然不确定如何根据文档执行此操作。有人可以向我展示如何创建一个实现步进激活功能的层的示例吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:05:03.970

如果您想在经过反向传播训练的多层网络中使用它，那么这是不可能的。阶跃函数不可（[子](https://en.wikipedia.org/wiki/Subderivative)）可微，这是反向传播算法的要求。

最接近阶梯函数的函数是

```
f(x) = max(-1, min(x, 1)) 
```

它会裁剪 的值`x`以生成介于 1 和 -1 之间的值（如果您愿意，可以将其更改为 0 和 1）。这个函数有一个微分

```
f'(x) = 1 if -1 < x < 1
        0 otherwise 
```

# python - 每次使用 django-registration 创建新用户时，我应该将要执行的代码放在哪里？

> ID：13939866
> 
> 赞同：0
> 
> 时间：2012-12-18T19:14:07.490
> 
> 标签：python, django, django-registration

我正在使用 django 注册。我创建了一个名为“Statistics”的类，它与 User 类的每个实例都有一对一的关系。

每次通过 /accounts/register 页面创建新用户时，我希望能够创建“统计”类的新实例并将其与刚刚创建的用户相关联。

我的问题是，我应该在哪里编写代码才能做到这一点？每次创建新用户时我应该将要执行的代码放在哪里？类似于以下内容：

```
s = Statisics ( comments = 0, thanked = 0, user = UserThatWasJustCreated) 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:36:38.103

正如 Josh 所指出的，您应该将代码附加到信号上，但如果您需要运行代码，即使在django-registration 之外创建时，我也会考虑将其附加到[Django 的`post_save`信号上。](https://docs.djangoproject.com/en/1.4/ref/signals/#django.db.models.signals.post_save)`User`

在这种情况下，它应该是这样的：

```
from django.db.models.signals import post_save
from django.contrib.auth.models import User

def create_statistic(sender, *args, **kwargs):
    if kwargs.get('created'):
        s = Statisics( comments=0, thanked=0, user=kwargs['instance'])

post_save.connect(create_statistics, sender=User) 
```

您可以将该代码放在`Statistics`模型定义之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:21:44.370

查看 Django-Registration 提供的自定义信号：http: [//docs.b-list.org/django-registration/0.8/signals.html](http://docs.b-list.org/django-registration/0.8/signals.html)。我认为其中之一将为您完成这项工作。

# image - 无法从 src/images 文件夹访问图像

> ID：13939869
> 
> 赞同：-1
> 
> 时间：2012-12-18T19:14:13.817
> 
> 标签：image

我在 Netbeans 的 src 下创建了 images 文件夹。在我的应用程序中使用以下代码获取图像。

URL url = ClassLoader.getSystemClassLoader().getResource("/images/file.jpg");

logoimg=新图像图标（网址）；

但它没有加载任何图像..我在网络上尝试了许多现有的解决方案，但没有用。

我的要求是需要在任何系统中运行我的应用程序 jar 而不会丢失图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:17:35.080

以下代码修复了我的问题

ImageIcon ImageIcon = new ImageIcon(getClass().getResource("/images/logo.png"));

# android - 验证消息来自特定的应用程序/端点

> ID：13939870
> 
> 赞同：4
> 
> 时间：2012-12-18T19:14:16.817
> 
> 标签：android, security, ssl, cryptography, drm

我正在尝试构建一个安全系统，用于将数据从客户端 Android 应用程序传输到运行 PHP 的 Web 服务器。

我想要做的是确保系统在密码学上是安全的，这样来自应用程序的消息可以被验证为实际上来自应用程序本身，而不是来自可能编写了自定义脚本的狡猾用户，或者可能使用 cURL 来游戏系统。

这种验证有很多用例，例如：-

*   如果某个应用包含您从中收集指标的广告，您可能希望验证点击数据是从该应用发送的，而不是来自发现您的 API 并发送虚拟数据的恶意用户。

*   该应用程序可能有一个多项选择调查，并且您希望再次确保从该应用程序收集调查结果。

*   该应用程序正在收集 GPS 轨迹，您希望确保数据是从应用程序本身发送的。

在每种情况下，您都希望确保消息的来源是应用程序本身，而不仅仅是运行简单脚本来伪造数据的用户。

我考虑过的一些想法：-

*   **SSL** - 适用于保护通道和防止篡改（满足某些要求），但仍不能确保数据源的完整性。

*   **公钥加密**- 客户端应用程序可以使用私钥加密数据，然后将其传输到可以解码的服务器。问题是私钥需要在应用程序中进行硬编码——可以对应用程序进行反编译，提取私钥，然后用于发送虚假数据。

*   **自制算法**- 一个与此非常相似的问题在[这里](https://stackoverflow.com/questions/9331488/determining-if-a-request-came-from-an-iphone-app)被问到解决方案只在“有人弄清楚你的算法”之前有效 - 即不是一个很好的解决方案！

*   **[哈希链](http://en.wikipedia.org/wiki/Hash_chain)**- 这似乎是一种使用一次性密钥来验证从客户端到服务器的每个数据负载的非常有趣的方式，但它再次依赖于应用程序本身不被反编译，因为密码仍然需要由应用程序存储.

我对密码学的有限了解让我认为，理论上**不可能**以这种方式构建一个完全可验证的系统，因为如果我们不能信任最终客户端或通道，那么就没有任何信任的基础。 .但也许有一些我忽略了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:53:43.100

这并不难，您只需要对应用程序进行身份验证。您可以使用简单的用户名和密码（通过 SSL）或使用客户端身份验证来执行此操作。在这两种情况下，凭据都需要在应用程序中，攻击者可以提取它们并模拟应用程序。您必须离开它，并且可能实施一些方法来减轻它。

您还可以通过使用非对称密钥（RSA 等）或对称密钥（HMAC 等）对消息进行签名来验证消息。随机数有助于防止重放，其中有人捕获有效签名的消息并将其一遍又一遍地发送到您的服务器。根据您的协议，使用一个的开销可能太多。

为了保护凭证，您可以让客户端生成它们并将它们保存在系统中`KeyStore`，尽管公共 API 不太支持它，请参阅[此处](http://nelenkov.blogspot.jp/2012/05/storing-application-secrets-in-androids.html)了解一些详细信息。当然，这需要一个额外的步骤，您需要将生成的凭据（例如，公钥）安全地发送到您的服务器，这可能很难正确实施。

无论您做什么，都不要试图发明自己的加密算法或协议，使用已建立的加密算法或协议。

# c# - 无法在我的项目中加载 dll 文件

> ID：13939871
> 
> 赞同：0
> 
> 时间：2012-12-18T19:14:17.317
> 
> 标签：c#, dll

在我的项目中，我无法加载 dll 文件

dll 文件 --> 平台目标是 x86

我的项目——>平台目标是Anycpu

机器正在运行 64 位操作系统

这是我使用的代码

```
 pDll = NativeMethods.LoadLibrary(dllname);
// some code here
static class NativeMethods
{
    [DllImport("kernel32.dll")]
    public static extern IntPtr LoadLibrary(string dllToLoad);

    [DllImport("kernel32.dll")]
    public static extern IntPtr GetProcAddress(IntPtr hModule, string procedureName);

    [DllImport("kernel32.dll")]
    public static extern bool FreeLibrary(IntPtr hModule);
} 
```

为什么我无法加载这个 dll 文件？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:29:30.840

假设其他一切正常（DLL 名称等）：

您描述的是一个已知问题...例如，如果您的 DLL 是 32 位并且您使用的操作系统是 64 位，那么您的 .NET 应用程序将在 64 位模式下运行...

最简单的解决方案：如果 DLL 仅在 x86 中可用，则需要为 x86 而不是 AnyCPU 编译。

否则，您将需要该 DLL 的 64 位版本，然后您会遇到称为“并行组装”的问题......我认为您会发现这些很有帮助：

*   [使用 Side-by-Side 程序集加载 x64 或 x32 版本的 DLL](https://stackoverflow.com/questions/108971/using-side-by-side-assemblies-to-load-the-x64-or-x32-version-of-a-dll/156024#156024)
*   [http://blogs.msdn.com/b/gauravseth/archive/2006/03/07/545104.aspx](http://blogs.msdn.com/b/gauravseth/archive/2006/03/07/545104.aspx)
*   [http://www.thescarms.com/dotnet/Assembly.aspx](http://www.thescarms.com/dotnet/Assembly.aspx)

# excel - 有没有办法将 MSWord 编号项目符号传输到 MSExcel 列？

> ID：13939873
> 
> 赞同：3
> 
> 时间：2012-12-18T19:14:35.120
> 
> 标签：excel, ms-word

我一直在使用 MSWord 2010 来编写问题列表。这些问题被组织在单个 MSWord 文档中，使用编号 - 1\. 第一个问题，等等......

我想知道每个项目符号的内容是否可以转移到 MSExcel 单元格？所以如果我有 20 个问题，我会有 20 行的单元格，每行包含一个问题。

我问这个是因为我有 300 个问题要导入到 Excel 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T23:45:32.157

可以将编号的项目符号从 Excel 复制到 Word，然后使用 Excel 工作表函数将它们分解。但是，使用内置的 Excel 命令很容易做到这一点。

在文字中：

*   增加编号列表中悬挂缩进的宽度。这将使 Excel 中的转换更容易处理。
*   选择您的项目符号并复制它们。

在 Excel 中：

*   使用匹配目标格式选项将复制的文本“选择性粘贴”到 Excel 中。
*   按项目符号中的位数选择您粘贴项目符号的单元格（即，首先执行 1-9，然后执行 10-99 等）
*   选中单元格后，从功能区的“数据”选项卡中选择“文本到列”命令。
*   确保在出现的对话框中选择了“固定宽度”单选框，然后进行下一步。
*   调整断线，以便有三个字段：一个是数字+句点，另一个是数字和文本之间的空格，第三个是文本。
*   移动到下一步 - 选择第二个字段（空格）并单击“不导入列（跳过）单选按钮。
*   单击完成并导入项目符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-13T01:03:23.857

如果您已经建立了列表，则上述答案是最好的。我为此找到的最佳工作流程是创建一个表格以供使用。然后该表完美地复制到 Excel 中的单元格中，允许您创建一个可以在两个文档之间无缝传递的结构。

# php - Magento catalog_product_before_save 不会在实时服务器上触发

> ID：13939875
> 
> 赞同：1
> 
> 时间：2012-12-18T19:14:43.960
> 
> 标签：php, magento, observers

我正在部署中，我试图通过使用 Magento 的观察者和事件提供某些属性固定数据来覆盖产品保存，但问题是我已经在我一直在开发的本地工作，但是当我上传到服务器并尝试通过观察者运行时似乎根本没有触发。我基于本教程的以下代码：http: [//www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

我有两个文件用于在 /app/code/local 中实现此目的。

/app/code/local/Leafcutter/目录/etc/config.xml

```
<?xml version="1.0"?>
<config>
  <global>
    <models>
        <leafcuttercatalog>
             <class>Leafcutter_Catalog_Model</class>
        </leafcuttercatalog>
    </models>
    <events>
      <catalog_product_save_before>
        <observers>
          <leaf_cutter_catalog_productautoinsert_observer>
            <type>singleton</type>
            <class>Leafcutter_Catalog_Model_ProductAutoInsert_Observer</class>
            <method>catalog_product_save_before</method>
          </leaf_cutter_catalog_productautoinsert_observer>
        </observers>
      </catalog_product_save_before>
    </events>
  </global>
</config> 
```

/app/code/local/Leafcutter/Catalog/Model/ProductAutoInsert/Observer.php

```
class Leafcutter_Catalog_Model_ProductAutoInsert_Observer {

public function __construct(){}

/**
 * catalog_product_save_before() is called before the product in the model is about to be saved. In this
 * case, we want to override the saving mechanism and force the product to save certain preset data onto the product.
 * @param $observer
 * @return Leafcutter_Catalog_Model_ProductAutoInsert_Observer
 */
public function catalog_product_save_before($observer){
    Mage::log('Going to observer');
    $event = $observer->getEvent();
    $product = $event->getProduct();

    if($product->getWantitnow()){
        Mage::log('Product is want it now');

        $this->_checkAndSave($product, WANT_IT_NOW_SHIPPING_GROUP, WANT_IT_NOW_DELIVERIES_RETURNS);
    } else {
        Mage::log('Product is in warehouse');
        $this->_checkAndSave($product, IN_WAREHOUSE_SHIPPING_GROUP, IN_WAREHOUSE_DELIVERIES_RETURNS);
    }

    return $this;

}

/**
 * _checkAndSave() checks to ensure that the product has the appropriate delivery and returns text as well
 * @param $product - The product object in question
 * @param $specialShippingGroupId - The Special Shipping Group value that needs to be set.
 * @param $deliveriesReturnsText - The Deliveries and Returns text that needs to be set.
 * @return void
 */
private function _checkAndSave($product, $specialShippingGroupId, $deliveriesReturnsText){
    if($product->getDeliveriesAndReturns()!= $deliveriesReturnsText){
        $product->setDeliveriesAndReturns($deliveriesReturnsText);
    }

    if($product->getSpecialShippingGroup() != $specialShippingGroupId){
        $product->setSpecialShippingGroup($specialShippingGroupId);
    }

    Mage::log('_checkAndSave: outputting deliveries and returns' . $product->getDeliveriesAndReturns());
    Mage::log('_checkAndSave: outputting deliveries and returns' . $product->getGetSpecialShippingGroup());

} 
```

}

我也尝试输出一些文本进行测试，但没有任何内容进入日志，所以我认为事件没有被触发。我安装了确切的插件，所以我不确定实时版本的插件之间是否会发生冲突。

如果上面的代码可能不是真正的问题，还有哪些其他可能性会导致这个问题？

多谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T20:07:06.497

您是否添加了 app/etc/modules/Leafcutter_Catalog.xml？

```
<?xml version="1.0"?>
<config>
    <modules>
        <Leafcutter_Catalog>
            <active>true</active>
            <codePool>local</codePool>
        </Leafcutter_Catalog>
    </modules>
</config> 
```

/app/code/local/Leafcutter/目录/etc/config.xml

```
<?xml version="1.0"?>
<config>
  <modules>
    <Leafcutter_Catalog>
        <version>1.1</version>
    </Leafcutter_Catalog>
  </modules>
  <global>
    <models>
        <leafcuttercatalog>
             <class>Leafcutter_Catalog_Model</class>
        </leafcuttercatalog>
    </models>
    <events>
        <catalog_product_save_before>
            <observers>
                <leafcuttercatalog>
                    <type>singleton</type>
                    <class>catalog/productautoinsert_observer</class>
                    <method>catalog_product_save_before</method>
                </leafcuttercatalog>
            </observers>
        </catalog_product_save_before>
      </events>
  </global>
</config> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:31:08.980

一种可能性是本地代码分支未打开，或者存在文件系统区分大小写的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:55:37.980

使用此事件“ **catalog_product_prepare_save** ”将起作用。您正在使用的事件现在可能已被弃用。我不确定虽然上面的一个可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T03:53:16.183

抱歉耽误你们时间了。但最后它是我为 setSpecialShippingGroup 设置的值之一，但我错误地定义了它。但感谢您抽出宝贵时间。:)

# ios - iOS Sharepoint App 登录错误

> ID：13939879
> 
> 赞同：3
> 
> 时间：2012-12-18T19:14:53.337
> 
> 标签：ios, sharepoint, request, asihttprequest

我正在开发一个 iOS iPad 应用程序来连接到 Sharepoint。我正在使用 ASIHTTPRequest 框架执行此操作。我的代码如下所示：

```
NSURL *url = [NSURL URLWithString:@"https://SHAREPOINTURL"];

NSString *soapMessage = @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
"<soap12:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap12=\"http://www.w3.org/2003/05/soap-envelope\">\n"
"<soap12:Body>\n"
"<GetListCollection xmlns=\"http://schemas.microsoft.com/sharepoint/soap/\" />\n"
"</soap12:Body>\n"
"</soap12:Envelope>\n";

asiRequest = [ASIHTTPRequest requestWithURL:url];

[asiRequest setUsername:@"USERNAME"];
[asiRequest setPassword:@"PASSWORD"];

[asiRequest setDelegate:self];
[asiRequest appendPostData:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
[asiRequest addRequestHeader:@"Content-Type" value:@"text/xml; charset=utf-8"];
[asiRequest startAsynchronous]; 
```

到目前为止，一切都很好，但是当我调试它时，我得到一个 403 FORBIDDEN 错误。为什么？在我看来，我不认为错误是用户名和密码。也许请求有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T16:17:19.257

查看您的 SOAP 信封和错误消息，我认为您缺少`SOAPAction`请求中的标头。

下面的代码显示了如何创建请求以获取 Sharepoint 实例中的所有列表的示例。我正在使用 AFNetworking，某些部分可能不适用于 ASIHTTPRequest 框架。

```
...

NSMutableURLRequest *request = [self requestWithMethod:@"POST"
                                                  path:@"_vti_bin/Lists.asmx"
                                            parameters:nil];

NSString *soapEnvelope = @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
  @"<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
  @"<soap:Body>"
  @"<GetListCollection xmlns=\"http://schemas.microsoft.com/sharepoint/soap/\" />"
  @"</soap:Body>"
  @"</soap:Envelope>";

// Set headers
[request setValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setValue:@"http://schemas.microsoft.com/sharepoint/soap/GetListCollection" forHTTPHeaderField:@"SOAPAction"];

// Content length
NSString *contentLength = [NSString stringWithFormat:@"%d", soapEnvelope.length];
[request setValue:contentLength forHTTPHeaderField:@"Content-Length"];

// Set body
[request setHTTPBody:[soapEnvelope dataUsingEncoding:NSUTF8StringEncoding]];

... 
```

但正如蒂姆所说，您必须先通过身份验证才能使用此方法。

有几种身份验证机制，如 Tim 或 NTLM（和其他一些）在上面描述的 Forms 声明。您必须检查您的 Sharepoint 实例的配置方式，或者如果您无法控制服务器的配置，则可能支持多种机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:52:17.777

既然你没有发布你的网址，我不得不问，你是在发帖`_vti_bin/authentication.asmx`吗？

如果您已经是，我只能建议这样做，因为我不知道 ASI 是否正确输入了登录信息。尝试像这样手动将其放入您的 SOAP 消息中：（从[这里](http://msdn.microsoft.com/en-us/library/dd923689%28v=office.12%29.aspx)）

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <Login xmlns="http://schemas.microsoft.com/sharepoint/soap/">
      <username>USERNAME</username>
      <password>PASSWORD</password>
    </Login>
  </soap:Body>
</soap:Envelope> 
```

这应该会返回您使用其余 Web 服务所需的登录 cookie。

编辑：还有一件事，您需要将 SP 服务器设置为使用表单身份验证而不是 NTLM 身份验证（这是默认设置）。

# asp.net-mvc-3 - 会话开始后的 ACS

> ID：13939887
> 
> 赞同：2
> 
> 时间：2012-12-18T19:15:20.873
> 
> 标签：asp.net-mvc-3, azure, wif, acs

我正在尝试创建一个 ASP.NET MVC 站点，该站点具有受 Windows Azure ACS 保护的特定区域。我希望默认区域不受保护（即允许匿名用户），但只保护子区域。

我通过从我的 Web.config 中的 system.web 部分中删除授权元素来实现这一点。

```
<authorization>
     <deny users="?" />
</authorization> 
```

然后为所需的 MVC3 区域添加一个受保护的位置。

```
<location path="MyArea">
    <system.web>
        <authorization>
            <deny users="?" />
        </authorization>
    </system.web>
</location> 
```

但是，我用于访问 IClaimsIdentity 并从中提取属性以进行处理的旧代码曾经存在于我的 Global.asax 的 Session_Start 事件中。既然站点不需要身份验证来访问默认区域，Session_Start 就会发生而无需进行身份验证。

我可以连接什么事件来处理 WIF 的身份验证事件？

我已经使用 SessionAuthenticationModule_SessionSecurityTokenReceived 实现了滑动会话超时，并尝试在 OnPostAuthenticationRequest 事件上添加我的用户分析逻辑，但无济于事。

在第一次连接到以下事件后，我能够获得用户：

```
FederatedAuthentication.ServiceConfigurationCreated 
```

然后在这个事件中我连接到这个事件：

```
FederatedAuthentication.WSFederationAuthenticationModule.SignedIn 
```

但是，在此事件中，会话为空，并且再也不会调用 session_start。因此，在重定向到身份提供者时，会话似乎被破坏了。

anon -> Application_start
anon -> Session_start
anon -> 导航到 /MyArea
anon -> 重定向到 ACS -> 重定向到 idP
anon -> 登录
auth -> 重定向到 /MyArea
auth -> FederatedAuthentication.WSFederationAuthenticationModule.SignedIn 发生，但会话一片空白！

更新：我仍然没有找到同时存在会话和身份验证的地方。我正在使用 Unity 按需检测用户。如果有一个事件发生时我会喜欢它，但我的工作仍然有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:00:48.527

根据您想要执行逻辑的时间和方式（登录后、创建会话令牌时、接收后），您有几个选项。该`SessionAuthenticationModule_SessionSecurityTokenReceived`事件应该可以正常工作，但订阅它可能会很棘手。您可以这样做：

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        ...

        FederatedAuthentication.FederationConfigurationCreated += (s, e) =>
        {
            FederatedAuthentication.SessionAuthenticationModule.SessionSecurityTokenCreated += SessionAuthenticationModule_SessionSecurityTokenCreated;
            FederatedAuthentication.SessionAuthenticationModule.SessionSecurityTokenReceived += SessionAuthenticationModule_SessionSecurityTokenReceived;
            FederatedAuthentication.WSFederationAuthenticationModule.SessionSecurityTokenCreated += WSFederationAuthenticationModule_SessionSecurityTokenCreated;
            FederatedAuthentication.WSFederationAuthenticationModule.SecurityTokenValidated += WSFederationAuthenticationModule_SecurityTokenValidated;
            FederatedAuthentication.WSFederationAuthenticationModule.SecurityTokenReceived += WSFederationAuthenticationModule_SecurityTokenReceived;
            FederatedAuthentication.WSFederationAuthenticationModule.SignedIn += WSFederationAuthenticationModule_SignedIn;
        };
    }

    void SessionAuthenticationModule_SessionSecurityTokenReceived(object sender, SessionSecurityTokenReceivedEventArgs e)
    {
        Debugger.Break();
    }

    void SessionAuthenticationModule_SessionSecurityTokenCreated(object sender, SessionSecurityTokenCreatedEventArgs e)
    {
        Debugger.Break();            
    }

    void WSFederationAuthenticationModule_SessionSecurityTokenCreated(object sender, SessionSecurityTokenCreatedEventArgs e)
    {
        Debugger.Break();            
    }

    void WSFederationAuthenticationModule_SecurityTokenValidated(object sender, SecurityTokenValidatedEventArgs e)
    {
        Debugger.Break();            
    }

    void WSFederationAuthenticationModule_SecurityTokenReceived(object sender, SecurityTokenReceivedEventArgs e)
    {
        Debugger.Break();            
    }

    void WSFederationAuthenticationModule_SignedIn(object sender, EventArgs e)
    {
        Debugger.Break();     
    }
} 
```

所有这些代码都在 Global.asax 文件中，并且您希望在 FederationConfigurationCreated 事件引发之后设置事件（此时 SessionAuthenticationModule 和 WSFederationAuthenticationModule 将可用）。我在每个事件处理程序中添加了一个 Debugger.Break。将它们留在那里并调试您的应用程序以查看每个事件何时被触发。这将允许您决定何时何地添加逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:53:04.377

在要保护的控制器/操作上使用 [Authorize] 属性：

```
[Authorize]
public ActionResult Index()
{
    return View();
} 
```

# c++ - 字节正则表达式与 C++ 中的 Boost 匹配

> ID：13939890
> 
> 赞同：3
> 
> 时间：2012-12-18T19:15:23.743
> 
> 标签：c++, regex, boost, match

我正在使用 Boost lib 进行正则表达式匹配。
我要在其中搜索的输入“字符串”实际上不是字符串，而是位图，它可能包含任何字节。

只要输入字符串中没有空字节，匹配就可以正常工作。如果存在 Null 字节，则忽略它之后的所有内容。

如果我替换空字节，则此代码有效：

```
char* expr = ".*\\x08\\x00\\x27\\x47\\x6b\\xd4.*"
char data[] = {0x12, 0x08, 0x00, 0x27, 0x47, 0x6b, 0xd4, 0x08 }
boost::regex regex = boost::regex(expr);
boost::cmatch what;
if(boost::regex_match(data, what, regex)) 
  //found match
  ... 
else 
  // failure did not match
  ... 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:42:42.967

听起来像是`regex_match()`将您的`char`数组视为以空字符结尾的字符串，并将所有内容都输入到`0x00`. `regex_match()`也适用于`std::string`没有空终止符的类型。您是否尝试过以这种方式表示您的数据？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-13T19:20:33.180

Boost Regex 也可用于匹配二进制文本中的二进制模式。它不会被零字节等控制字符混淆。

构造函数和函数有[几个](http://www.boost.org/doc/libs/1_64_0/libs/regex/doc/html/boost_regex/ref/basic_regex.html) [重载](http://www.boost.org/doc/libs/1_64_0/libs/regex/doc/html/boost_regex/ref/regex_match.html)，例如那些采用 a ，一个以空结尾的 C 字符串 - 和 - 用于迭代器范围的重载。`boost::regex``boost::regex_match``std::string`

由于我们还想匹配零字节，我们显然不能使用以空结尾的 C 字符串。使用`std::string`是可能的（因为它可能包含零字节） - 但是复制模式和文本只是为了搜索是浪费的。

迭代器范围非常适合这个用例。

例子：

```
#include <iostream>
#include <boost/regex.hpp>
using namespace std;

int main(int argc, char **argv)
{   
  const unsigned char expr[] = {
    '.', '*', 0x08, 0x00, 0x27, 0x47, 0x6b, 0xd4, '.', '*' } ;
  const unsigned char data[] = {
    0x12, 0x08, 0x00, 0x27, 0x47, 0x6b, 0xd4, 0x08 };
  boost::regex regex(reinterpret_cast<const char*>(expr),
      reinterpret_cast<const char*>(expr) + sizeof expr);
  boost::cmatch what;
  if (boost::regex_match(reinterpret_cast<const char*>(data),
        reinterpret_cast<const char*>(data) + sizeof data, what, regex))
    cout << "match!\n";
  else 
    cout << "no match\n";
  return 0;
} 
```

通过例如编译：

```
$ g++ regex.cc -o regex -Wall -g -lboost_regex 
```

示例输出：

```
$ ./regex
match! 
```

s 可能看起来很危险，`reinterpret_cast`但它都是已定义的行为。请注意，将数组定义为`data`数组`char`并不是一个好主意，因为 char 可能是有符号或无符号的，具体取决于体系结构。当它被签署时，会`0xd4`产生这个错误：

```
error: narrowing conversion of ‘212’ from ‘int’ to ‘char’ 
  inside { } [-Wnarrowing] 
```

当尝试`"\xd4"`在字符串文字中使用类似的东西时，预计会出现类似的问题。使用双反斜杠，转义由 Boost 正则表达式解释，它很容易像这样混淆：“十六进制转义序列过早终止”。

因此，仅使用示例中的无符号字符数组是最简单的解决方案。

# javascript - 用javascript添加html文本

> ID：13939896
> 
> 赞同：0
> 
> 时间：2012-12-18T19:15:45.460
> 
> 标签：javascript

我正在使用 javascript 函数添加输入文件标签和链接，效果很好。现在我还想添加一个单选按钮和这个收音机的文本...我可以添加没有问题的收音机，但是文本...我知道如何。

这是代码...

```
addCampo = function () {  
    nDiv = document.createElement('div');
    nDiv.className = 'archivo';
    nDiv.id = 'file' + (++numero);

    nCampo = document.createElement('input');
    nCampo.name = 'archivos[]';
    nCampo.type = 'file';

    a = document.createElement('a');
    a.name = nDiv.id;
    a.href = '#';
    a.onclick = elimCamp;
    a.innerHTML = ' Eliminar';

    portada = document.createElement('input');
    portada.name = 'portada';
    portada.type = 'radio';
    portada.value = '1';

    nDiv.appendChild(nCampo);
    nDiv.appendChild(portada);

    // HERE I WANT A SIMPLE TEXT SAYING WHATS DOES THE RADIO =) 

    nDiv.appendChild(a);

    container = document.getElementById('adjuntos');
    container.appendChild(nDiv);
} 
```

这工作得很好！我唯一不知道的是如何添加文本whitout标签...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:19:28.450

你需要

```
text = document.createTextNode('what the radio does');
nDiv.appendChild(text); 
```

虽然最好使用标签，因为这样您就不必锐化单选按钮。在这种情况下，您需要：

```
portada.id = 'portada';
text = document.createElement('label');
text.innerText = 'what the radio does';
text.for = 'portada';
nDiv.appendChild(text); 
```

编辑：正如评论中提到的，所有浏览器都不一定支持innerText，对不起！只需使用 innerHTML 代替，如果您不关心旧版本的 IE，请使用 textContent，或者创建一个文本节点并将其添加到标签节点。

# php - Facebook Graph 搜索结果与“公开帖子”结果不匹配？

> ID：13939897
> 
> 赞同：2
> 
> 时间：2012-12-18T19:15:48.957
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-authentication

使用 graph.facebook.com 获得的结果似乎与您从他们自己的搜索结果中获得的结果不匹配。

例如： [https ://graph.facebook.com/search?q=www.mightytrainer.com&type=post&limit=25](https://graph.facebook.com/search?q=www.mightytrainer.com&type=post&limit=25)

相对

[https://www.facebook.com/search/results.php?q=www.mightytrainer.com&type=eposts&init=quick&tas=0.07711535459384322](https://www.facebook.com/search/results.php?q=www.mightytrainer.com&type=eposts&init=quick&tas=0.07711535459384322)

Joe Goodwin 和 Taryn Higgan 都没有和我共同的朋友。它们显示在网络结果中，但不在图表中。

我错过了一些基本的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:55:15.820

尝试使用用户访问令牌进行相同的搜索，就用户隐私设置而言，结果应该相似。

```
https://graph.facebook.com/search?q=www.mightytrainer.com&type=post&limit=25&access_token=your_user_access_token 
```

图资源管理器中的示例。

[https://developers.facebook.com/tools/explorer?method=GET&path=search%3Fq%3Dwww.mightytrainer.com%26type%3Dpost](https://developers.facebook.com/tools/explorer?method=GET&path=search%3Fq%3Dwww.mightytrainer.com%26type%3Dpost)

**参考：** [https ://developers.facebook.com/docs/concepts/login/access-tokens-and-types/](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

php 示例：假设 php sdk 3.1.1。已安装，并且应用程序已设置。

```
 // init sdk, sample coming
    require './src/facebook.php';
    $facebook = new Facebook(array(
      'appId'  => 'Your App Id Here',
      'secret' => 'Your App Secret Here',
      'cookie' => true, // enable optional cookie support
      ));      
    try { $user = $facebook->getUser(); } catch (FacebookApiException $e) {  }
    // Get the current access token if user.
    if($user){ 
    $access_token = $facebook->getAccessToken(); 
    // in the case of ajax we need to set the access token or will get expired error.
    // Comment out api get token, uncomment session.
    // $access_token = $_SESSION['fb_YourAppIdHere_access_token']; 
    if($access_token){ $facebook->setAccessToken($access_token); }
    };
    // access token usage should be handled by api.
    $api_search = $facebook->api('/search?q=www.mightytrainer.com&type=post');
// print results array  
echo '<pre>';
print_r($api_search);
echo '</pre>'; 
```

示例：

```
// init sdk, sample coming 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:35:32.577

facebook graph api 怎么知道你是哪个用户？您必须提供任何有效应用的访问令牌！

只需添加 access_token=$token ，您将在您的帐户中获得搜索结果。

```
https://graph.facebook.com/search?q=www.mightytrainer.com&type=post&limit=25&access_token=$token 
```

我希望它有所帮助。如果有效，请考虑接受我的回答。

# vb.net - VB.NET | HttpWebRequest，如何查看主机是否在线？

> ID：13939901
> 
> 赞同：1
> 
> 时间：2012-12-18T19:16:00.477
> 
> 标签：vb.net, httpwebrequest, httpwebresponse, whitelist

我正在为我在 VB.NET 中的应用程序编写一个白名单。我正在使用 HttpWebRequest 方法和 HttpWebResponse。

如果白名单主机关闭，则绕过白名单，任何存在漏洞的人都可以使用该程序。

```
Public Function GetWhitelist(ByVal PageURL As String) As String
        Dim S As String = ""
        Try
            Dim Request As HttpWebRequest = WebRequest.Create("WHITELIST URL HERE")
            Dim Response As HttpWebResponse = Request.GetResponse()
            Using Reader As StreamReader = New StreamReader(Response.GetResponseStream())
                S = Reader.ReadToEnd
            End Using
        Catch ex As Exception
            Debug.WriteLine("Start Program Error. Handle:0")
        End Try
        Return S
    End Function 
```

如果网站关闭，我想给用户一个错误，有什么想法吗？问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:23:51.590

你的错误情况是什么？仅此功能并不能防止发生异常时发生任何事情。该函数仍然退出并返回一个字符串。因此，任何消费代码都必须寻找错误条件并相应地处理它们。

如果请求失败，您应该有意义地处理异常。我脑海中浮现的两个想法包括：

1）让异常在堆栈中冒泡：

```
Public Function GetWhitelist(ByVal PageURL As String) As String
    Dim S As String = ""
    Dim Request As HttpWebRequest = WebRequest.Create("WHITELIST URL HERE")
    Dim Response As HttpWebResponse = Request.GetResponse()
    Using Reader As StreamReader = New StreamReader(Response.GetResponseStream())
        S = Reader.ReadToEnd
    End Using
    Return S
End Function 
```

这将尝试联系主机，如果尝试失败，则抛出异常而不是返回字符串。

2）抛出一个自定义异常：

```
Public Function GetWhitelist(ByVal PageURL As String) As String
    Dim S As String = ""
    Try
        Dim Request As HttpWebRequest = WebRequest.Create("WHITELIST URL HERE")
        Dim Response As HttpWebResponse = Request.GetResponse()
        Using Reader As StreamReader = New StreamReader(Response.GetResponseStream())
            S = Reader.ReadToEnd
        End Using
    Catch ex As Exception
        Debug.WriteLine("Start Program Error. Handle:0")
        Throw New SomeCustomException(String.Format("Unable to contact host: {0}", PageURL), ex)
    End Try
    Return S
End Function 
```

这将提供更有针对性的异常，而不是来自响应阅读器的任何异常，将为日志记录和分析提供有关错误的有用运行时信息（即 的运行时值`PageURL`），并朝着隐藏外部代码的实现细节迈出了一步这个对象的（因为该代码并不真正关心`HttpWebRequest`and `HttpWebResponse`，它只是想知道 URL 是否正确）。

请记住，抛出异常是一个完全可以接受的函数退出路径。它并不*总是*必须返回一个值。异常是指示错误条件的适当方式。但是，您当前的实现“吞下了”异常，并且没有向消费代码提供任何错误的指示。相反，它返回一个“神奇值” `String.Empty`，消费代码可能会或可能不会忽略该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:18:53.787

更改您的异常处理程序。正确的方法是尝试请求并在失败时处理异常。

# protocol-buffers - 如何在 autoconf/automake 中使用协议缓冲区？

> ID：13939904
> 
> 赞同：12
> 
> 时间：2012-12-18T19:16:09.813
> 
> 标签：protocol-buffers, automake

寻找用于构建使用协议缓冲区的项目的 autoconf 和 automake 规则的一个很好的示例，将 protoc 添加到构建过程的最佳方式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-20T07:09:25.983

### `configure.ac`

就 protobuf 库而言，它使用`pkg-config`，因此最好使用`PKG_CHECK_MODULES`宏来引用它：

```
PKG_CHECK_MODULES(PROTOBUF, protobuf >= 2.4.0)
AC_SUBST(PROTOBUF_LIBS)
AC_SUBST(PROTOBUF_CFLAGS)
AC_SUBST(PROTOBUF_VERSION) 
```

并检查`protoc`路径中的命令。这是一个非常基本的检查它是否在路径中：

```
AC_CHECK_PROG([PROTOC], [protoc], [protoc])
AS_IF([test "x${PROTOC}" == "x"],
    [AC_MSG_ERROR([ProtoBuf compiler "protoc" not found.])]) 
```

`protoc`或者，允许用户使用`--with-protoc=/path/to/protoc`或使用环境变量指定不同的`PROTOC`：

```
# ProtoBuf compiler.
# First, specify with --with-protoc=/path/of/protoc.
# Or, specify with env variable PROTOC.
# If neither of the above, find it in the path.
#AC_MSG_CHECKING([for ProtoBuf compiler protoc])
AC_ARG_WITH([protoc],
    [AS_HELP_STRING([--with-protoc=/path/of/protoc],
        [Location of the protocol buffers compiler protoc. Defaults to looking on path.])],
    [PROTOC="$withval"],
    [ AS_IF([test "x${PROTOC}" == "x"],
        [AC_PATH_PROG([PROTOC], [protoc], [no])])
    ]
)
#AC_MSG_RESULT([${PROTOC}])
AS_IF([test "${PROTOC}" == "no"], [AC_MSG_ERROR([ProtoBuf compiler "protoc" not found.])]) 
```

### `Makefile.am`

添加规则以构建`proto`文件：

```
%.pb.cc %.pb.h: %.proto
    $(PROTOC) --proto_path=$(srcdir) --cpp_out=$(builddir) $^ 
```

用 . 指定 protobuf 源文件`dist_noinst_DATA`。这对于确保将它们捆绑在`.tar.gz`使用`make dist`.

```
dist_noinst_DATA = whatever.proto 
```

（注意：对于较新版本的 autoconf/automake，可能需要使用`@builddir@`而不是`$(builddir)`.）

`nodist_`使用前缀和`$(builddir)`路径指定生成的文件：

```
nodist_myprog_SOURCES = $(builddir)/whatever.pb.cc $(builddir)/whatever.pb.h 
```

并用以下方法清洁它们`make clean`：

```
MOSTLYCLEANFILES = whatever.pb.cc whatever.pb.h 
```

用于`BUILT_SOURCES`处理构建的头文件的依赖关系：

```
BUILT_SOURCES = whatever.pb.h 
```

您的编译器标志可能需要参考构建目录来查找头文件（在 VPATH 构建中工作）：

```
AM_CPPFLAGS += -I$(builddir) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T00:31:59.993

这似乎有效：

配置.ac：

```
AC_ARG_WITH([protobuf-libdir],
    [AS_HELP_STRING([--with-protobuf-libdir=LIB_DIR],
        [location of the protocol buffers libraries, defaults to /usr/lib])],
    [PROTOBUF_LIBDIR="$withval"],
    [PROTOBUF_LIBDIR='/usr/lib'])
AC_SUBST([PROTOBUF_LIBDIR])

LDFLAGS="$LDFLAGS -L$PROTOBUF_LIBDIR"

AC_CHECK_LIB([protobuf], [main], [], [AC_MSG_ERROR([cannot find protobuf library])])

AC_ARG_WITH([protoc],
    [AS_HELP_STRING([--with-protoc=PATH],
        [location of the protoc protocol buffer compiler binary, defaults to protoc])],
    [PROTOC="$withval"],
    [PROTOC='protoc'])
AC_SUBST([PROTOC]) 
```

生成文件.am：

```
%.pb.cc %.pb.h: %.proto
    $(PROTOC) --proto_path=$(dir $^) --cpp_out=$(dir $^) $^ 
```

然后将 .pb.cc 文件添加到 SOURCES。

# matlab - LibSVM for MATLAB中多类分类概率估计的解释

> ID：13939911
> 
> 赞同：4
> 
> 时间：2012-12-18T19:16:29.130
> 
> 标签：matlab, probability, classification, libsvm

问题：标签为 1、2、3 的 3 类分类。

工具：用于 MATLAB 的 LibSVM

```
svmModel = svmtrain(<Trainfeatures>, <TrainclassLabels>, '-b 1 -c <someCValue> -g <someGammaValue>');
[predLabels, classAccuracy, **probEstimates**] = svmpredict(<TestFeatures>, <TestClassLabels>, '-b 1'); 
```

在这一步之后，我得到前十行 probEstimates 是，

```
0.9129    0.0749    0.0122
0.9059    0.0552    0.0389
0.8231    0.0183    0.1586
0.9077    0.0098    0.0825
0.9074    0.0668    0.0257
0.8685    0.0146    0.1169
0.8962    0.0664    0.0374
0.9074    0.0548    0.0377
0.9474    0.0054    0.0472
0.9178    0.0642    0.0180 
```

但前十个预测标签是：

```
 2
 2
 2
 2
 2
 2
 2
 2
 2
 2 
```

问题：

1.  我的理解是概率估计是特定项目属于特定类别的概率，给定其特征向量。但是，如果这是真的，那么这些项目应该属于 1 类而不是 2 类。 libsvm 是否会更改类的顺序，或者我在这里遗漏了什么？如果我错了，有人可以解释一下概率估计的真正解释是什么吗？

2.  如果我必须移动决策边界以提高第 1 类的精度（预测为第 1 类的项目更少，因此在决策边界上更加保守），我应该处理哪些类概率以及如何处理?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-20T09:47:18.367

我最近遇到了同样的问题。原因与训练数据的顺序有关。如果希望后概率向量的索引与训练数据的标签相对应，则应根据标签对训练数据进行排序。

例如，如果第一个数据点的标签是 4，那么后概率向量的第一个条目与标签为 4 的数据点相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T12:24:23.267

存储在模型中的标签的顺序可能与我们认为的不同。您可以使用 svmModel.Label 进行检查。并且按照这个顺序输出概率估计。

# python - 如何测试文件是否已由pickle创建？

> ID：13939913
> 
> 赞同：22
> 
> 时间：2012-12-18T19:16:32.427
> 
> 标签：python, pickle

有什么方法可以检查文件是否是由创建的`pickle`？我可以捕获抛出的异常，`pickle.load`但没有特定的“不是泡菜文件”异常。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T21:45:23.903

Pickle 文件没有标题，因此没有标准的方法来识别它们，除非尝试解开一个文件并查看这样做时是否引发了任何异常。

您可以通过子类化模块中的`Pickler()`和`Unpickler()`类来定义自己的增强协议，其中包含某种标头。`pickle`然而，这不能用更快的`cPickle`模块来完成，因为在其中，它们是工厂*函数*，不能被子类化^([1])。

一种更灵活的方法是定义您自己的独立类，这些类在其实现中使用这些模块中的任何一个模块中的相应`Pickler()`和`Unpickler()`实例。

**更新**

所有泡菜文件的最后一个字节应该是`pickle.STOP`操作码，所以虽然没有标题，但**实际上**有一个非常小的预告片，这将是一个相对简单的检查。

根据您的确切用法，您可能能够通过更复杂的内容（并且超过一个字节）来补充它，因为任何经过`STOP`腌制对象表示中的操作码的数据都会被忽略^([2])。

^([1] Python 2 文档中的)  [脚注 [2]](https://docs.python.org/2/library/pickle.html#id12)。
^([2])  的文档`[pickle.loads()](https://docs.python.org/2/library/pickle.html#pickle.loads)`，它也适用于，`[pickle.load()](https://docs.python.org/2/library/pickle.html#pickle.load)`因为它目前是根据前者实现的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-18T19:24:49.010

除了尝试解开它并捕获异常之外，没有其他确定的方法。

# sql - 从数字中删除小数点以在 JOIN 中使用

> ID：13939921
> 
> 赞同：0
> 
> 时间：2012-12-18T19:17:17.833
> 
> 标签：sql, sql-server-2008

我将匹配数字以链接表格。

问题是一个可能是 1234567，另一个是 1234.567

有什么办法可以消除。所以我可以将表格链接在一起并提取数据？

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:22:15.113

您应该能够像这样连接公共列上的 2 个表：

```
select a.cola, b.colb 
from tablea a inner join tableb b 
on replace(b.commonfield,'.','')=replace(a.commonfield,'.','') 
```

这将确保如果任一列具有`.`，则将其删除并仅与数字匹配。

# scala - 尝试使用 Squeryl 插入时出现 ClassCastException

> ID：13939922
> 
> 赞同：1
> 
> 时间：2012-12-18T19:17:20.533
> 
> 标签：scala, squeryl

这可能是由于我对 Squeryl 的工作原理的误解。我的实体定义为：

```
case class Wallet(userid: Int, amount: Long) 
    extends KeyedEntity[Int] with Optimistic {  
  def id = userid
} 
```

我的表变量定义为：

```
val walletTable = table[Wallet]("wallets")
on(walletTable) {
 w =>
   declare {
     w.userid is (primaryKey)
   }
} 
```

然后我只是调用一个方法来尝试向钱包中添加钱：

```
val requestedWallet = wallet.copy(amount = wallet.amount + amount)
try {
  inTransaction {
    walletTable.update(requestedWallet)
  } 
```

在我调用更新的那一行，抛出异常： **[ClassCastException: java.lang.Integer cannot be cast to org.squeryl.dsl.CompositeKey]**

我根本没有使用复合键，所以这很令人困惑。这是否与我的 id 字段不称为“id”而是“userid”这一事实有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T20:54:56.663

当我尝试你正在做的事情时，我会得到同样的行为。似乎由于某种原因`id`不能成为别名，除非它是复合键（至少在 0.9.5 中）。您可以解决这个问题并通过以下方式获得相同的结果：

```
case class Wallet(@Column("userid") id: Int, amount: Long)
  extends KeyedEntity[Int] with Optimistic  {  

  def userid = id

} 
```

列注释将在数据库中查找该`userid`字段，并将`id`改为 a `val`。然后，您可以`userid`为一致性起别名。

# java - 从字符串中删除所有出现的 \

> ID：13939925
> 
> 赞同：25
> 
> 时间：2012-12-18T19:17:30.950
> 
> 标签：java, regex, string, replace, escaping

我正在尝试使用 JSON 从服务器获取一组对象。

服务器向我发送以下字符串。

```
"[{\"DealComment\":null,\"DealVotes\":[],\"DealId\":1,\"CompanyId\":1,\"StartDate\":\"2012-12-13T00:00:00\",\"EndDate\":\"2012-12-16T00:00:00\",\"CouponCode\":\"Test Coupon 1\",\"Description\":\"Test Deal Description 1\",\"VoteUp\":null,\"VoteDown\":null,\"ViewCount\":null,\"Title\":\"Test Deal 1\"},{\"DealComment\":null,\"DealVotes\":[],\"DealId\":2,\"CompanyId\":1,\"StartDate\":\"2012-12-16T00:00:00\",\"EndDate\":\"2012-12-17T00:00:00\",\"CouponCode\":\"Test Coupon 2\",\"Description\":\"Test Description 2\",\"VoteUp\":null,\"VoteDown\":null,\"ViewCount\":null,\"Title\":\"Test Deal 2\"},{\"DealComment\":null,\"DealVotes\":[],\"DealId\":3,\"CompanyId\":1,\"StartDate\":\"2012-12-14T00:00:00\",\"EndDate\":\"2012-12-15T00:00:00\",\"CouponCode\":\"Test Code 3\",\"Description\":\"Test Description 3\",\"VoteUp\":null,\"VoteDown\":null,\"ViewCount\":null,\"Title\":\"Test Deal 3\"},{\"DealComment\":null,\"DealVotes\":[],\"DealId\":4,\"CompanyId\":1,\"StartDate\":\"2012-12-12T00:00:00\",\"EndDate\":\"2012-12-13T00:00:00\",\"CouponCode\":\"Test Coupon 4\",\"Description\":\"Test Description 4\",\"VoteUp\":null,\"VoteDown\":null,\"ViewCount\":null,\"Title\":\"Test Deal 4\"},{\"DealComment\":null,\"DealVotes\":[],\"DealId\":5,\"CompanyId\":2,\"StartDate\":\"2012-12-12T00:00:00\",\"EndDate\":\"2012-12-14T00:00:00\",\"CouponCode\":\"AwD\",\"Description\":\"Very awesome deal!\",\"VoteUp\":null,\"VoteDown\":null,\"ViewCount\":null,\"Title\":\"Awesome Deal 1\"}]" 
```

现在，如果您仔细查看字符串，您会注意到它包含 an**`\"`**而不是 every **`"`**。该字符串现在无法格式化为 JSONArray。所以，我需要替换每一个出现的**`\"`**with **`"`**，这将是一个非常简单的任务，而**`\`**不是一个**转义序列**。

我尝试使用以下代码。

```
String jsonFormattedString = jsonStr.replaceAll("\\", ""); 
```

但它给了我以下例外。

```
12-19 00:35:59.575: W/System.err(444): java.util.regex.PatternSyntaxException: Syntax error U_REGEX_BAD_ESCAPE_SEQUENCE near index 1:
12-19 00:35:59.575: W/System.err(444): \
12-19 00:35:59.575: W/System.err(444):  ^ 
```

我的整个代码，以防万一：

```
public void getAllDealsFromServerJson()
{

    String apiUrl = "http://passme.azurewebsites.net/api/TestApi/";

    HttpClient client = new DefaultHttpClient();
    HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
    HttpResponse response;
    JSONObject json = new JSONObject();

    try{
        HttpPost httpPost = new HttpPost(apiUrl);
        json.put("requestType", "getalldeals" );

        StringEntity se = new StringEntity( json.toString());  
        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        httpPost.setEntity(se);
        response = client.execute(httpPost);
        Log.d("Http Response:", response.toString());
        jsonResponse = response.toString();

        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String jsonStr = reader.readLine();
        Log.d("String Response", jsonStr);
        String jsonFormattedString = jsonStr.replaceAll("\\", ""); // gives error
        Log.d("Formatted String", jsonFormattedString);
        //JSONTokener tokener = new JSONTokener(jsonFormattedString);
        /*JSONObject finalResult = new JSONObject(tokener);
        Log.d("JSON Response", "" + finalResult.optString("Title"));*/
        JSONArray resultArray = new JSONArray(jsonFormattedString);
        Log.d("JSON Array Result Length", "" + resultArray.length());
        Log.d("JSON Array Result ", "" + resultArray.getJSONObject(0).optInt("DealId"));

    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-18T19:19:02.617

试试这个：

```
String jsonFormattedString = jsonStr.replaceAll("\\\\", ""); 
```

因为反斜杠是正则表达式中的转义字符（`replaceAll()`接收一个作为参数），它也必须被转义。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-18T19:33:20.383

实际上正确的方法是：

```
String jsonFormattedString = jsonStr.replace("\\\"", "\""); 
```

您只想替换`\"`为`"`，而不是全部`\`替换（如果有的*话*，它会耗尽 json 字符串中的斜杠）。与流行的相信相反，它`replace(...)`也会替换所有出现的给定字符串，就像`replaceAll(...)`，它只是不使用正则表达式，因此通常更快。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-25T08:51:09.947

只需使用：

```
try {
        jsonFormattedString = new JSONTokener(jsonString).nextValue().toString();
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

查看文档

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-18T19:20:32.887

看起来您的传入字符串是双重 JSON 编码的。您应该对其进行解码，然后再次对其进行解码。

这是我对如何在 Java 中做到这一点的最佳猜测：

```
JSONArray resultArray = new JSONArray(new JSONString(jsonFormattedString)); 
```

我假设这`JSONString`是一种类型。您的实际解决方案可能会有所不同。

在正常情况下，我希望服务能够直接为您提供 JSON。该服务似乎为您提供了一个*包含*JSON 的字符串（根据 JSON 规范编码）。

这是以下之间的区别：

```
String someJSON = "[0, 1, 2]";
String doublyEncodedJSON = "\"[0, 1, 2]\""; 
```

注意额外的前导和尾随引号？那是因为后者是一串 JSON。您必须对其进行两次解码才能获得实际对象。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-18T19:32:51.013

您可以使用：

```
str.replace("\\",""); 
```

replace 将字符串作为参数，replaceAll 使用正则表达式。它也可能像这样工作：

```
str.replaceAll("\\\\", ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-12T12:15:40.600

```
jsonObj.toString()
        .replace("\"[", "[").replace("]\"", "]")
        .replace("\\\"{", "{").replace("}\\\"", "}")
        .replace("\\\\\\\"", "\"") 
```

# cocoa - 避免未找到协议方法的方法

> ID：13939927
> 
> 赞同：0
> 
> 时间：2012-12-18T19:18:03.690
> 
> 标签：cocoa, polymorphism, protocols

我的 Cocoa AppDelegate 包含类型 ID 对其主视图的引用。该引用是多态的，因为它可能指向 PDFView 的子类或 NSImageView 的子类，具体取决于视图图像的来源。两个视图子类都实现了相同的协议，所以我的 AppDelegate 不必知道它正在处理什么类型的视图。但是，每次我调用其中一个协议方法时，我都会收到一条警告，上面写着“找不到实例方法'-methodName'（返回类型默认为'id'）”。我可以忽略警告或通过使用“performSelector:(@selector(methodName:)”调用协议方法来强制问题。

有没有什么我可以做（或应该做）来消除警告而不诉诸performSelector？

```
//FLAppDelegate.h
@interface FLAppDelegate : NSObject <NSApplicationDelegate>
{
    ...
    IBOutlet id _formImageView;  //type is FLPDFView* or FLImageView*
    …
}

//FLFormImageProtocol.h
@protocol FLFormImageProtocol <NSObject>
@required
- (void)        methodName;
@end

//FLPDFView.h
@interface FLPDFView : PDFView <FLFormImageProtocol>
@end

//FLImageView.h
@interface FLImageView : NSImageView <FLFormImageProtocol>
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:21:38.203

使用协议键入实例变量：

```
IBOutlet id<FLFormImageProtocol> _formImageView; 
```

# dart - 使用 js-interop 如何将 javascript Array 和 Object 转换为原生 dart Map。

> ID：13939932
> 
> 赞同：5
> 
> 时间：2012-12-18T19:18:22.260
> 
> 标签：dart, dart2js

是否可以将 javascript 对象或数组转换回本机飞镖地图和/或列表？我正在尝试从 javascript 返回作为 Object 的清单文件，并希望将其转换为 Dart Map 对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T20:30:47.623

您可以使用以下命令将 javascript JSON 转换为 Dart JSON：

```
import 'dart:json';
import 'package:js/js.dart' as js;

convert(js.Proxy jsonProxy) => JSON.parse(js.context.JSON.stringify(jsonProxy)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T19:43:38.927

您可以使用 Javascript 上下文中的内置 Javascript 方法 JSON.stringify()。

```
Future getManifest() {
  var completer = new Completer();

  js.scoped(() {
    var chrome = js.context.chrome; 
    var manifest_proxy = chrome.runtime.getManifest();
    var manifest_string = js.context.JSON.stringify(manifest_proxy);
    var manifest = JSON.parse(manifest_string);
    logger.fine("manifest_string = $manifest_string");
    completer.complete(manifest);
  });

  return completer.future;    
} 
```

这会将以下内容打印到控制台并向完成者发送飞镖地图。

```
manifest_string = {"app":{"background":{"scripts":["main.js"]}},"manifest_version":2,"minimum_chrome_version":"23","name":"chrome.dart - test","version":"1"} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-12T16:14:52.713

今年 API 发生了许多变化，以下代码是 Alexandre Ardhuin 的答案，适用于最新 (#30104) Dart Sdk

```
import "dart:convert";
import "dart:js" as js;

convert( js.JsObject object )
{
  return JSON.decode( js.context['JSON'].callMethod("stringify", [ object ] ) );
} 
```

# android - 使设备 SD 卡窗口可通过 android 应用程序启动

> ID：13939933
> 
> 赞同：8
> 
> 时间：2012-12-18T15:29:36.287
> 
> 标签：android

这可能看起来很奇怪，但我想知道一个 android 应用程序能够使设备窗口内的 SD 卡可启动吗？我想使 SD 可启动并将ultimatebootcd 写入其中。我是通过windows做到的，但如果android能做到就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:46:01.600

要使 SD 卡可引导，您必须修改卡的引导扇区。这不能从标准的 Android 应用程序中完成。如果 Android 设备是 root 的，那么几乎可以肯定它可以通过原生 Linux 程序或 NDK 程序来完成。

如果设备没有植根，你可能无法做你想做的事。正如[Chris Stratton](https://stackoverflow.com/users/429063/chris-stratton)评论的那样，如果该卡已经可以启动，那么您可能可以更改例如启动什么操作系统以及如何启动。

比如说，有启动代码加载和启动一个操作系统，然后你可以更改引导加载程序的配置文件。首发：[http ://www.syslinux.org/wiki/index.php/Boot_an_Iso_image](http://www.syslinux.org/wiki/index.php/Boot_an_Iso_image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-30T05:45:39.420

我使用 Rufus 并从运行窗口 10 的 PC 在 SdCard 上安装了一个 syslynux。然后我将卡放回 Moto 手机中。它正在接收我从内部存储移动到卡的文件，但我没有机会知道它们是否会在 PC 中打开。

# fortran - gfortran：使用实数作为数组索引

> ID：13939935
> 
> 赞同：3
> 
> 时间：2012-12-18T19:18:31.483
> 
> 标签：fortran, gfortran

使用 gfortran 编译时是否可以使用实数作为迭代器和数组索引？这是一些示例代码：

```
program test
    real i
    real testarray(5)
    testarray = 0.
    do i=1,5
        write(*,*) testarray(i)
    end do
end program 
```

我想运行一些我没有编写的代码。它可以在 Windows 上使用 intel 编译器编译，但我想使用 gfortran 编译器在 linux 中编译和运行它。我目前使用实数作为数组索引并执行循环迭代器时遇到错误。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:07:33.257

如果您不想看到警告，请尝试 --std=legacy。否则“gnu”，正如已经建议的那样。gfortran 手册指出：

> 作为扩展，GNU Fortran 允许使用 REAL 表达式或变量作为数组索引。

和

> std 的默认值是 'gnu'，它指定了 Fortran 95 标准的超集，其中包括 GNU Fortran 支持的所有扩展，尽管对于不建议在新代码中使用的过时扩展会给出警告。'legacy' 值是等效的，但没有过时扩展的警告，并且可能对旧的非标准程序有用。

使用实变量作为循环索引已从 Fortran 95 的语言标准中删除。由于使用它的遗留代码的数量，它可能会在编译器中保留数十年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:20:43.657

为什么要使用实数作为数组和循环索引？

如果您需要使用索引的实际值，请执行以下操作：

```
program test
    integer i
    real testarray(5)
    testarray = 0.

    do i=1,5
        testarray(i) = REAL(i)
    end do
end program 
```

当然，如果你需要，你可以去另一个方向，

```
integer j 
do j = 1, INTEGER(testarray(1))
...
end do 
```

例如。该标准不允许非整数索引。它们也没有意义——数组中的 1.5 索引是什么？

看起来真正的数组索引是一个[扩展](http://gcc.gnu.org/onlinedocs/gfortran/Extensions-implemented-in-GNU-Fortran.html#Extensions-implemented-in-GNU-Fortran)，如果你用`--std=gnu`. 但对它的支持可能并不总是存在，因为它不是标准的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T12:04:52.977

另一种可能性是将其实现为函数或子例程。用户体验将类似于`tab(x)`数组或函数，但允许更多控制（例如，您可以检查 x 是否在您定义了值的 x0 的某个值的 eps 内）。

一般来说，由于舍入错误，这个想法似乎很危险。

如果您正在研究有理数，或者说整数的 srqt，那么当`f(x)`作为函数应用时（`x`例如包含分子和分母的派生类型），这又是理想的情况。

所以我最终的答案是：把它写成一个函数。

# sql - 使用今天的日期创建日期范围

> ID：13939937
> 
> 赞同：1
> 
> 时间：2012-12-18T19:18:33.040
> 
> 标签：sql, oracle, date, range

我正在尝试创建一个用户将来可以运行的报告。我需要指定一个日期范围，在这种情况下是最近 6 周的数据。我在此报告中使用的日期字段是 app_receipt_date。我只是想学习如何使用类似于 excels today() 函数的函数。

这是sql语句。忽略我运行它的最后一个实例的日期。再次，我试图“自动化”这向前发展。

```
 select a.underwriting_app_id,
   q.underwriting_quote_id,
   a.application_source,
   q.insured_id,
   q.policy_year,
   a.underwriting_rep,
   --b.marketing_rep,
   a.mail_name,
   a.app_receipt_date,
   a.effective_date,
   a.expiration_date,
   SUBSTR(TO_CHAR(a.effective_date, 'MM/DD/YYYY'), 1,2) as Month,
   a.underwriting_app_status,
   s.description,
   a.last_status_date,
   a.governing_class_code_id,
   q.annual_premium,
   q.create_date,
   q.create_user

 from underwriting_app a,
 app_quote q,
 underwriting_app_status s

where a.underwriting_app_id = q.underwriting_app_id and
  a.underwriting_app_status = s.underwriting_app_status and
  --a.agency_no = b.agency_no (+) and
  q.active_quote_flag = 'Y' and
  a.app_receipt_date > to_date('04-Nov-2012','dd-mm-yyyy') and
  a.app_receipt_date < to_date('17-Dec-2012','dd-mm-yyyy') 
```

预先感谢您的帮助。

布拉德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:50:16.550

如果您在 Oracle 中，请使用“SYSDATE”作为当前日期，您可以通过直接加法和减法来添加天数。如果你可以假设一周是 7 天，你可以这样做：

```
SELECT * FROM Your_Table
WHERE app_receipt_date > SYSDATE - (6 * 7); 
```

其中“* 7”只是表示您将六周乘以七天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:27:41.300

如果您使用的是 T-SQL，您可以使用 GETDATE() 函数来获取今天的日期，然后可以使用 DATEADD() 函数来调整值以获取您的范围，因此您可以使用类似于以下的内容：

```
SELECT * FROM Your_Table
WHERE app_receipt_date > DATEADD(week,-6,GETDATE()); 
```

希望这可以帮助。

# php - 在蛋糕php中插入/更新

> ID：13939938
> 
> 赞同：1
> 
> 时间：2012-12-18T19:18:34.410
> 
> 标签：php, cakephp, insert

大家好，我陷入了一个奇怪的位置。

我有一个带有列的表。id_acces、id_user、id_menu、has_access（布尔值）

我基本上有一个带有复选框列表和 ID 号的表单，以允许特定用户访问页面的某些部分。基本上我需要更新表格，无论是否有访问权限，如果用户没有关于选择在表格中创建新条目的页面的条目。所以我回来的数组看起来像这样

```
 Array
       (
        [AdminMenu] => Array
          (
            [id_user] => 1
            [id_menu] => Array
            (
                [4] => enabled
                [21] => enabled
                [22] => enabled
                [23] => enabled
                [24] => enabled
                [1] => enabled
                [5] => enabled
                [25] => enabled
                [26] => enabled
                [6] => enabled
                [7] => enabled
                [29] => enabled
                [8] => enabled
                [30] => enabled
                [31] => enabled
                [32] => enabled
                [33] => enabled
                [34] => enabled
                [35] => enabled
                [36] => enabled
                [37] => enabled
                [38] => enabled
                [39] => enabled
                [40] => enabled
                [41] => enabled
                [60] => enabled
                [2] => enabled
                [10] => enabled
                [11] => enabled
                [12] => enabled
                [13] => enabled
                [14] => enabled
                [15] => enabled
                [16] => enabled
                [17] => enabled
                [18] => enabled
                [9] => enabled
                [3] => enabled
                [19] => enabled
                [20] => enabled
            )

           )

    ) 
```

键是 id_menu，值是复选框是否被选中。

有人可以告诉我如何使用这个数组在我的表中插入或更新蛋糕 php。我目前以 $key=>$value 的形式循环遍历数组，并对表运行查询以获取键的存在。如果它存在，那么我需要运行更新查询，如果不存在，那么我需要为该特定页面或 id_menu 执行插入查询。请帮忙

```
 foreach($this->data['AdminMenu']['id_menu'] as $key=>$value) {
          $check = select against the table where the id_menu = $key
       if($key = $check[0]['AdminAccess']['id_menu']) {
             $this->AdminAcess->id_menu=$key;
     $this->AdminAccess->id_user=$user_id;
     $this->AdminAccess->set('has_access', 't');
     $this->AdminAccess->save();
        } else {
           $this->AdminAcess->id_menu=$key;
    $this->AdminAccess->id_user=$user_id;
    $this->AdminAccess->saveField('has_access', 'false');

         }

    } 
```

我确定一定有比这个循环更简单的方法。另外我如何进行插入或更新。这甚至都没有进行插入或更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:04:36.433

这是一个 hasAndBelongsToMany 关系。您应该通读 Cake Book 的这一部分，并调整您的表单代码以遵循他们的建议：

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-habtm](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-habtm)

# php - 检查日期是否在两个月之间，一年在八月结束

> ID：13939944
> 
> 赞同：1
> 
> 时间：2012-12-18T19:19:03.430
> 
> 标签：php, datetime

我在创建日期算法（使用 DateTime 对象）时遇到困难，该算法检查日期是否在两个给定月份之间（今年年底被认为是 8 月 31 日）。

所以年初被认为是 9 月 1 日，XXXX，年底被认为是 8 月 31 日 XXXX+1

```
$today = new DateTime('now'); 
```

我需要看看日期是否在六月和五月之间。

例如，如果是 2009 年 12 月
，那么日期是否介于 2009 年 6 月和 2010 年 5 月之间？（是的）

如果日期是 2014 年 4 月
，日期是否在 2013 年 6 月和 2014 年 5 月之间？（是的）

如果日期是 2014 年 7 月
是 2013 年 6 月和 2014 年 5 月之间的日期。（否）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:22:51.597

DateTime 对象可以像两个整数一样进行比较：

```
$date1 = new DateTime('December 2012');
$date2 = new DateTime('June 2012');
$date3 = new DateTime('May 2013');

if ($date1 > $date2 && $date1 < $date3)
{
     // place your code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:52:49.013

找到了一个让我开始的答案：

[https://stackoverflow.com/a/11937688/36545](https://stackoverflow.com/a/11937688/36545)

```
function academicYear(DateTime $userDate) {
    $currentYear = $userDate->format('Y');
    $cutoff = new DateTime($userDate->format('Y') . '/08/31 23:59:59');
    if ($userDate < $cutoff) {
        return ($currentYear-1) . '/' . $currentYear;
    }
    return $currentYear . '/' . ($currentYear+1);
} 
```

# jquery - jQuery选择值设置问题

> ID：13939945
> 
> 赞同：0
> 
> 时间：2012-12-18T19:19:04.930
> 
> 标签：jquery, cookies, selected

对于我的生活，我无法弄清楚这一点。希望你们中的一些专家可以帮助我：> 我已经尝试了几种我在这里找到的方法..但是，我必须把代码放错了，因为我似乎无法正确设置值。

我希望发生的是，用户在下拉列表中选择一个区域，然后设置一个 cookie。根据 cookie，用户将被重定向到特定页面。我似乎已经正确设置/检测到 cookie，但是一旦用户到达新页面，我希望区域下拉列表中“选择”当前区域，以便用户知道他们在正确的区域.. 我该如何设置当 cookie 被检测为特定区域时选择的值？

到目前为止，这是我的代码：

```
<select id="regionSelect">
<option id="aus" value="aus">Australia</option>
<option id="fr" value="fr">France</option>
<option id="ger" value="ger">Germany</option>
<option id="usa" value="usa">USA</option>
</select>

<script>
$('#regionSelect').change(function() {

   $.cookie('hrregion', $(this).val(), {expires: 365});

if ($.cookie('hrregion') == "aus") {
       window.location.href = "australia.aspx";  
}

if ($.cookie('hrregion') == "fr") {
       window.location.href = "france.aspx";  
}

if ($.cookie('hrregion') == "ger") { 
        window.location.href = "germany.aspx";        
}

if ($.cookie('hrregion') == "usa") {
       window.location.href = "usa.aspx";  
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T19:20:50.527

在脚本结束之前，添加：

```
$("#regionSelect").val($.cookie('hrregion')); 
```

# android - 无法从 onActivityResult 更新 Fragment UI

> ID：13939946
> 
> 赞同：4
> 
> 时间：2012-12-18T19:19:06.427
> 
> 标签：android, android-layout, android-fragments, android-fragmentactivity

我正在开发一个应用程序，其中有一个扩展 FragmentActivity 的类。在 onResume() 方法中，我调用了一个类，我正在为其发送该片段活动的引用，并且在该类中，我将其替换为另一个片段。

在那个片段中，我正在动态添加布局，但是当我单击按钮时，我正在调用 startActivityForResult() ，它反过来在 OnActivityResult() 中接收结果，我正在尝试更新 EditText 的文本，但它是没有发生。当我单击后退按钮时，我可以看到 EditText 上的文本已更改。谁能帮我解决这个问题。我将在这里发布我的全部源代码。

**MainActivity.java**：

```
public class MainActivity extends FragmentActivity {

//FragmentActivity context;
Context context;
FragmentManager fm;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    context = MainActivity.this;

   /* fm = getSupportFragmentManager();
    FragmentManager fm = getSupportFragmentManager();
    Fragment multiFormScreenFragment = MultiFormScreenFragment.newInstance(1 );
    fm.beginTransaction()
    .replace(R.id.fragment_container, multiFormScreenFragment)
    .commit();
*/
    }

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
     new LoadScreenHelper((FragmentActivity)context,               R.id.fragment_container).loadTargetScreen("", 1,"",1,false,"","","");
}

      } 
```

**LoadScreenHelper.java**：

```
 package com.cognizant.aim.LoadScreen;

 import com.android.testfragmentactivityresult.MultiFormScreenFragment;

    public class LoadScreenHelper {

public FragmentActivity context;
//public Context context;
int mContainerId=-1;
public LoadScreenHelper(FragmentActivity c,int containerId){

    context =  c;
    mContainerId  = containerId ;
}

public void loadTargetScreen(String screenType,int nav_id,String usid,int screenorder, boolean isMain,String filterColumnName,String filterColumnVal,String uiHeadingTitle){//uiHeadingTitle

    System.out.println("ScreenType::::"+screenType+"nav_id"+nav_id+":::"+"screenorder::::"+screenorder);

    Bundle bundle = new Bundle();
    bundle.putInt("screenOrder", 1);
    bundle.putString("uniqueid", "1");
    bundle.putString("title", "Form");
    //  bundle.putString("tableName", dataSourceTableName);   
    // bundle.putString("rowId",  clicked_list_row_Id);

    FragmentManager fm = context.getSupportFragmentManager();
    Fragment multiFormScreenFragment = MultiFormScreenFragment.newInstance(1 /*screenId*/);
    multiFormScreenFragment.setArguments(bundle);
    if(isMain){
        fm.beginTransaction()
        .replace(mContainerId, multiFormScreenFragment)
        .commit();
    }
    else{
        fm.beginTransaction()
        .replace(mContainerId, multiFormScreenFragment)
        .addToBackStack("null")
        .commit();

    }

}

       } 
```

**MultiFormScreenFragment.java**：

```
 public class MultiFormScreenFragment  extends Fragment {
   View view;
int mContainerId = -1;
private static final String TAG = "MultiFormScreenFragment";
LinearLayout llayout;
public   static  MultiFormScreenFragment  newInstance(int parentid) {
    MultiFormScreenFragment f = new MultiFormScreenFragment();
    Bundle b = new Bundle();
    b.putInt("list_id", parentid);
    f.setArguments(b);
    return f;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    mContainerId =   container.getId();  
    view = inflater.inflate(R.layout.activity_main, container, false);
    llayout = (LinearLayout)view.findViewById(R.id.llayout);
    generateUILayout();

    return view;
}

private void generateUILayout() {
    // TODO Auto-generated method stub
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    Button newBtn = new Button(getActivity());
    newBtn.setLayoutParams(params);
    newBtn.setId(1);
    newBtn.setText("Demo");
    llayout.addView(newBtn);

    EditText newEText = new EditText(getActivity());
    newBtn.setLayoutParams(params);
    newEText.setId(2);
    newEText.setText("Demo");

    llayout.addView(newEText);

    newBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(getActivity(), SecondActivity.class);
            intent.putExtra("sampleData", "This is Sample Data");
            startActivityForResult(intent, 1);

        }
    });

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==getActivity().RESULT_OK && requestCode==1){
        String msg = data.getStringExtra("returnedData");
        EditText eText = (EditText)getActivity().findViewById(2);
        eText.setText(msg);
    }
}

      }

  SecondActivity.java
  ===================

    package com.android.testfragmentactivityresult;

     import android.app.Activity;
       import android.content.Intent;
    import android.os.Bundle;

        public class SecondActivity extends Activity {

 @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
      Intent intent= getIntent();
      String msg = intent.getStringExtra("sampleData");
      msg += ", Added at Third";
      intent.putExtra("returnedData", msg);
      setResult(RESULT_OK, intent);
      finish();
}
     }

 activity_main.xml
 ==================

     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:id="@+id/llayout">

    </LinearLayout>

       main.xml
       ========
        <?xml version="1.0" encoding="utf-8"?>
      <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
         android:orientation="vertical" >

        <FrameLayout
           android:id="@+id/fragment_container"
          android:layout_width="match_parent"
           android:layout_height="match_parent"
         android:layout_weight="1" />

       </LinearLayout> 

        AndroidManifest.xml
        ===================
          <manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.android.testfragmentactivityresult"
          android:versionCode="1"
       android:versionName="1.0" >

       <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

    <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name = ".SecondActivity"
        ></activity>
     </application>

     </manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:27:56.903

> ...但是当我单击按钮时，我正在调用 startActivityForResult() ，该按钮又在 OnActivityResult() 中接收结果，在该按钮中我试图更新 EditText 的文本，但没有发生。当我单击后退按钮时，我可以看到 EditText 上的文本已更改

我认为这是因为`LoadScreenHelper`在`onResume`. `FragmentActivity`请记住，`onResume`当活动到达前台时将始终被调用，这也将在`Activity`开始`startActivityForResult`返回后发生。现在通过调用`LoadScreenHelper`'s`loadTargetScreen()`方法，您将始终`MultiFormScreenFragment`向初始`FragmentActivity`. 当您从孩子那里回来时，`Activity`该`onResume`方法将被再次调用，并且`MultiFormScreenFragment`将创建一个新的最有可能覆盖最初添加的片段的方法。如果您单击后退按钮，该顶部片段将从屏幕中移除，留下最初添加的片段。

因为我不知道你最后想在`LoadScreenHelper`课堂上做什么，我建议要么移动这条线：

```
new LoadScreenHelper((FragmentActivity)context, R.id.fragment_container).loadTargetScreen("", 1,"",1,false,"","",""); 
```

在`onCreate`方法中，所以它只执行一次，或者在方法中插入一个检查，以确定布局中是否还没有`loadTargetScreen`的实例（使用来查找片段）。如果它已经在布局中，那么什么也不做，添加片段的新实例。`MultiFormScreenFragment``FragmentManager`

# sorting - Crystal Reports：显示一个字段的第一行，但在不同的字段上排序

> ID：13939954
> 
> 赞同：0
> 
> 时间：2012-12-18T19:20:02.040
> 
> 标签：sorting, crystal-reports, oracle11g, grouping

我有一份报告，每个项目编号显示三行，具有不同的交易日期（项目编号、交易日期）。我的问题是查询或水晶报表。我想对另一个名为 UnusedMonths desc 的字段进行排序，但想继续显示每个 ItemNum 的最新行。我可以隐藏 Section Expert 中的旧行：

```
 Previous ({ItemHistory.ItemNum}) = ({ItemHistory.ItemNum}) 
```

如果我不先对 ItemNum 进行分组，则报告中会出现重复的 ItemNum。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:36:14.637

一种选择是仅选择每个 itemnum 具有最新转换日期的行。您可以通过创建一个 SQL 表达式来做到这一点，我们称之为`{%MaxDate}`：

```
case when "ItemHistory"."ItemNum" is null then null
else (select max(transdate)
      from itemhistory
      where itemnum = "ItemHistory"."ItemNum")
end 
```

然后将以下行添加到报告的选择公式中：

```
{ItemHistory.TransDate} = {%Maxdate} 
```

# cpu - 在线禁用超线程

> ID：13939957
> 
> 赞同：0
> 
> 时间：2012-12-18T19:20:06.483
> 
> 标签：cpu, multicore, hyperthreading

我有一个具有以下属性的 Ubuntu 服务器（快照）

处理器：23 vendor_id：GenuineIntel cpu 系列：6 型号：44 型号名称：Intel(R) Xeon(R) CPU X5690 @ 3.47GHz 步进：2 cpu MHz：1600.000 缓存大小：12288 KB 物理 id：1 个兄弟姐妹：12 核 id : 10 个 CPU 核心 : 6

对于被测系统，启用了超线程。我想禁用此系统的超线程。我不想启动并进入 BIOS 这样做，但想在线完成。我遇到的几个建议是执行以下操作：

'echo 0 >/sys/devices/system/node/node0/cpu2/online'

我不确定我应该去哪个 CPU 或节点并根据系统中的 CPU 内核、兄弟姐妹的数量执行以下操作。

任何的想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T19:49:55.007

```
I am not sure which CPU or node shall I go to and perform the following operation 
based on the numbers of CPU cores, siblings in the system. 
```

系统的并行基准测试将评估多核 CPU 的性能和最大吞吐量，这可以告诉我们启用/禁用系统的超线程。

# java - Android 括号错误

> ID：13939958
> 
> 赞同：0
> 
> 时间：2012-12-18T19:20:07.823
> 
> 标签：java, android, eclipse

我收到了我无法弄清楚的括号错误。

按下按钮后，代码应该有一个随机数，然后我应该有一个计数器，在它下面计数。我最终的目标是有一个获胜条件，检查数字是否相同并且你获胜。但只需要帮助使这些括号对齐即可。在 Eclipse for android 中执行此操作，任何帮助都会很棒，谢谢！

```
package com.viralgamez.gastime;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class NewGame<Stopwatch> extends Activity {

    private TextView displayRandInt;
    private Button updateRandInt;
    final int MSG_START_TIMER = 0;
    final int MSG_STOP_TIMER = 1;
    final int MSG_UPDATE_TIMER = 2;

    private static final Random rand = new Random();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newgame);

        /* Setup your Activity */

        // Find the views (their id's should be specified in the XML layout file)
        displayRandInt = (TextView) findViewById(R.id.displayRandInt);
        updateRandInt = (Button) findViewById(R.id.updateRandInt);

        // Give the Button an onClickListener
        updateRandInt.setOnClickListener(new android.view.View.OnClickListener() {
            public void onClick(View v) {
                int randInt = rand.nextInt(100)+1;
                displayRandInt.setText(String.valueOf(randInt));
            }

            public void onClick2(View v) {
                if(status == false)
                {       
                    btnStart.setText("Stop");
                    status = true;        
                    new Thread(new Runnable()
                    { run(){
                          for(int i=0; i < 500; i++)
                          {
                              runOnUiThread(new Runnable()
                                    {
                                        @Override
                                        public void run()
                                        {
                                            txtCounter.setText(String.valueOf(i));
                                        }
                                    });
                               Thread.sleep(1000);
                          }}
                    }).start();

                }
                else if (status == true)
                {

                    btnStart.setText("Start");
                    status = false;
                    initCouner();
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:37:32.577

[我首先通过http://jsbeautifier.org/](http://jsbeautifier.org/)运行您的代码（对于 JavaScript，但它缩进 Java 就好了）。您可以使用`Control`++在 Eclipse 中执行此`Shift`操作`F`。如果每次添加新代码块时都这样做，那么您的代码将始终保持整洁。

从那里，很容易看出哪些括号匹配。首先，制作`run()`实际的方法签名很重要。除此之外，您的`else if`结尾括号有问题。

我已经从自动缩进器中转写了您的代码，并在底部添加了缺少的括号。我在一些您应该注意的地方发表了评论（即方法签名和缺少的括号）。

```
package com.viralgamez.gastime;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class NewGame<Stopwatch> extends Activity {

    private TextView displayRandInt;
    private Button updateRandInt;
    final int MSG_START_TIMER = 0;
    final int MSG_STOP_TIMER = 1;
    final int MSG_UPDATE_TIMER = 2;

    private static final Random rand = new Random();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.newgame);

        /* Setup your Activity */

        // Find the views (their id's should be specified in the XML layout file)
        displayRandInt = (TextView) findViewById(R.id.displayRandInt);
        updateRandInt = (Button) findViewById(R.id.updateRandInt);

        // Give the Button an onClickListener
        updateRandInt.setOnClickListener(new android.view.View.OnClickListener() {
            public void onClick(View v) {
                int randInt = rand.nextInt(100) + 1;
                displayRandInt.setText(String.valueOf(randInt));
            }

            public void onClick2(View v) {
                if (status == false) {
                    btnStart.setText("Stop");
                    status = true;
                    new Thread(new Runnable() {
                        // run() { // This needs to be changed to an actual method signature
                        public void run() {
                            for (int i = 0; i < 500; i++) {
                                runOnUiThread(new Runnable() {
                                    @Override
                                    public void run() {
                                        txtCounter.setText(String.valueOf(i));
                                    }
                                });
                                Thread.sleep(1000);
                            }
                        }
                    }).start();

                // } else if (status == true) { // Change this to just }else{
                } else {

                    btnStart.setText("Start");
                    status = false;
                    initCouner();
                // }); // This needs to be changed to the following:
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:24:02.813

您似乎缺少 . 末尾的括号`else if`，以及另一个右括号`onClick2`（Sam 在我之前抓住了第二个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:26:35.407

试试这个：

```
updateRandInt.setOnClickListener(new android.view.View.OnClickListener() {
    public void onClick(View v) {
    }

    public void onClick2(View v) {
        if(status == false)
        {       
        }
        else if (status == true)
        {
        } // Not Here );
    }
}); // Here 
```

在此之后您缺少一些右括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T19:34:01.617

如前所述，您缺少右括号，并且您的关闭不合适`);`，这已在下面更正。如果您正在使用 eclipse，为了将来轻松解决此问题，只需在页面底部添加右括号并单击它们旁边。Eclipse 会自动突出显示相应的左括号和右括号。您可以这样做以正确对齐括号和括号，或者确定括号是否太多或需要添加另一个括号。

```
 //starting from the last else if statement
            else if (status == true)
            {

                btnStart.setText("Start");
                status = false;
                initCouner();
            }
        }
    });
  }
} 
```

# c# - 如何将 Trace.WriteLine 的输出重定向到 Enterprise Library Logging 块？

> ID：13939960
> 
> 赞同：0
> 
> 时间：2012-12-18T19:20:11.513
> 
> 标签：c#, .net, logging, enterprise-library-5

我有`Trace.WriteLine`到处使用的遗留代码。

我决定使用 Microsoft Enterprise Library 来记录跟踪。所以我可以决定写入文件、发送电子邮件、登录数据库或创建自己的自定义侦听器。

如何将输出重定向`Trace.WriteLine`到 Enterprise Library Logging 块？

更新：我可以使用代码。但是我需要将什么类型传递给 Trace.Listeners.Add？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:21:53.637

您可以使用静态方法`Trace.Listeners.Add`。

# mysql - 仅在数据更改时触发的更新触发器后 MySQL 中的 NULL 处理

> ID：13939964
> 
> 赞同：3
> 
> 时间：2012-12-18T19:20:35.713
> 
> 标签：mysql, sql, triggers, null

[由于声誉限制，这是对先前问题的回答](https://stackoverflow.com/a/6296438/1913816)的后续问题。我想知道在处理 NULL 值时是否有更有效的方法来测试每个字段的更改。

```
CREATE TABLE foo (
  a INT NULL DEFAULT NULL, 
  b INT NULL DEFAULT NULL,
  c INT NULL DEFAULT NULL
);

CREATE TABLE bar (
  a INT NULL DEFAULT NULL,
  b INT NULL DEFAULT NULL,
  c INT NULL DEFAULT NULL
);

INSERT INTO foo (a, b) VALUES (1, 2); 
```

我想要一个触发器，它的动作只有在更新更改了值时才会在更新后发生。所以这个更新不会导致插入：

```
UPDATE foo SET a = 1 WHERE b = 2; 
```

但是这个 UPDATE 将导致一个 INSERT：

```
UPDATE foo SET a = 2 WHERE b = 2; 
```

我已经编写了这个触发器来处理它，但是我希望可以简化 IF 语句。

```
DELIMITER ///
CREATE TRIGGER t_after_update_foo
AFTER UPDATE ON foo
FOR EACH ROW 
  BEGIN
    IF
      ((OLD.a <> NEW.a OR OLD.a IS NULL OR NEW.a IS NULL) AND (NEW.a IS NOT NULL OR OLD.a IS NOT NULL))
      OR
      ((OLD.b <> NEW.b OR OLD.b IS NULL OR NEW.b IS NULL) AND (NEW.b IS NOT NULL OR OLD.b IS NOT NULL))
      OR
      ((OLD.c <> NEW.c OR OLD.c IS NULL OR NEW.c IS NULL) AND (NEW.c IS NOT NULL OR OLD.c IS NOT NULL))
    THEN
      INSERT INTO bar (a, b, c) VALUES (NEW.a, NEW.b, NEW.c);
    END IF;
  END;
///
DELIMITER ; 
```

IF语句可以简化吗？还是有更简单的整体解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T19:23:20.707

您可以使用`coalesce()`，它返回它的第一个参数，即`not null`.

```
if coalesce(old.a,'') <> coalesce(new.a,'') or
   coalesce(old.b,'') <> coalesce(new.b,'') or
   coalesce(old.c,'') <> coalesce(new.c,'')
   then
     insert ...;
   end if; 
```

选择第二个参数可能很棘手。上面的示例适用于 a、b 和 c 是字符串以及空字符串值等价于`null`值的常见情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-04T15:41:16.827

您可以通过使用[NULL 安全的等于运算符`<=>`](https://dev.mysql.com/doc/refman/5.1/en/comparison-operators.html#operator_equal-to)进行比较，然后[使用`NOT`](https://dev.mysql.com/doc/refman/5.7/en/logical-operators.html#operator_not).

所以，

```
((OLD.a <> NEW.a OR OLD.a IS NULL OR NEW.a IS NULL) AND (NEW.a IS NOT NULL OR OLD.a IS NOT NULL)) 
```

会成为

```
!(OLD.a <=> NEW.a) 
```

要检查多个列中的任何一个是否已更改，您可以执行

```
!(OLD.a <=> NEW.a AND OLD.b <=> NEW.b) 
```

* * *

如果您有许多列要比较，则可以使用稍短的替代方案，由[@dlauzon](/users/7037546/dlauzon)提供：

```
!((OLD.a, OLD.b, OLD.c, ...) <=> (NEW.a, NEW.b, NEW.c, ...)) 
```

# matlab - 根据最小值和最大值推断（转换）数据

> ID：13939967
> 
> 赞同：0
> 
> 时间：2012-12-18T19:20:42.640
> 
> 标签：matlab, statistics, data-analysis

我有一个大小为 10000 x 1 的列向量（不均匀间隔），范围为 1 到 7。我想设置新的最小值和最大值（最小值 = 32，最大值 = 72）并推断之前的值值（1 到 7）现在在新范围内（32 到 72）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:36:33.880

这是你想要的吗？

```
old = [1 4 7];
new = (old - 1)/(7-1)*(72-32) + 32 
```

结果：

```
new =
    32    52    72 
```

似乎太容易了，我错过了什么吗？上面把4变成20/3的例子让我觉得我是！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:37:37.273

```
A = 7*rand(10000,1);

B = (A-1)/6*(72-32)+32; 
```

或一般来说：

```
minVal = 32;
maxVal = 72;

B = (A-min(A(:)))/(max(A(:))-min(A(:)))*(maxVal-minVal)+minVal; 
```

# python - 如何使用 easy_install 为 Apple 构建的 Python 2.7 安装 pycairo

> ID：13939973
> 
> 赞同：1
> 
> 时间：2012-12-18T19:20:59.720
> 
> 标签：python, macos, cairo, easy-install, pycairo

我想在 Mac OSX Lion 上为 Cairo 安装 Python 绑定，以便可以将它们与 Apple 构建的 Python 2.7 一起使用。我倾向于使用 安装 Python 模块等`easy_install`，但在这种情况下似乎不起作用：

```
$ sudo easy_install pycairo
Searching for pycairo
Reading http://pypi.python.org/simple/pycairo/
Reading http://cairographics.org/pycairo
Best match: pycairo 1.10.0
Downloading http://cairographics.org/releases/pycairo-1.10.0.tar.bz2
Processing pycairo-1.10.0.tar.bz2
error: Couldn't find a setup script in /tmp/easy_install-BYpm4Y/pycairo-1.10.0.tar.bz2 
```

Stack Overflow 上的其他地方也有人问过类似的问题，但答案并不能解释我在这里做错了什么。

这个问题与 Python 2.6 有关，接受的答案使用 Macports 而不是`easy_install`，而另一个答案似乎是建议使用我上面尝试过的方法（但失败了）：

[你如何在 Mac OS X 上安装 pycairo？](https://stackoverflow.com/questions/1811783/how-do-you-install-pycairo-on-mac-os-x)

这个问题与从源代码构建pycairo有关，我不想这样做：

[如何在 osx 上安装 pycairo？](https://stackoverflow.com/questions/1500866/how-to-install-pycairo-on-osx)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T19:29:38.563

首先，您几乎总是想使用`pip`而不是`easy_install`尽可能地使用。而“只要有可能”几乎意味着“除了`pip`它自己之外的所有事物，并且`readline`。” Apple 不会预先安装，但`pip`您可以随意`sudo easy_install pip`安装。`sudo easy_install foo``sudo pip install foo`

其次，`pycairo`需要 Python 3.1+。你想要`py2cairo`的，Python 2.6-2.7 的版本。由于没有用于此的 PyPI 包，您必须下载它或手动 git 克隆它。但幸运的是，`pip`它会自动为您执行此操作：`sudo pip install http://cairographics.org/releases/py2cairo-1.10.0.tar.bz2`或`sudo pip install git+https://git.cairographics.org/git/py2cairo`.

不幸的是，并非所有东西都可以通过`pip`或安装`easy_install`。如果其中任何一个失败，您必须阅读项目的 PyPI 页面、主页或文档。

在 的情况下`pycairo`，它不能`easy_install`/ `pip install`ed 的原因是它是使用`waf`而不是构建的`distutils`（并且没有人`distutils`围绕`waf`构建编写包装器）。但你并不真正关心它*为什么*不起作用，只关心你必须做什么。

好吧，说明会告诉您必须做什么。您可能认为您不想从源代码构建，但这*正是`pip`通常所做*的（并且同样如此`easy_install`），因此不必害怕。

但所有这些都是主要问题的次要问题：`pycairo`Python 模块需要您没有的`cairo`库（同样如此）。`pixman`（实际上，根据您的 OS X 版本，您可能有一个无法外部链接的私有版本，或者一个非常旧的版本，对 pycairo 来说不够好，或者根本没有版本......但这三个中的任何一个都相当于就你而言。）

所以你必须在`pycairo`建造之前从某个地方得到它。（而且，即使您在其他地方制作了副本，也无法*使用*它。）

与文档的建议相反，我会使用[Homebrew](http://mxcl.github.com/homebrew/)而不是 MacPorts 来安装`cairo`. MacPorts 旨在构建一种完全隔离的工具集——因此，如果您想安装`cairo`MacPorts 以便将 MacPorts 安装`pycairo`到您的 MacPorts`/opt/local/bin/python`中，那就太好了，但如果您希望`pycairo`为库存 Apple 构建它，那就不是很好了`/usr/bin/python`。

# mysql - 在查询中查询具有大量匹配项的大表

> ID：13939975
> 
> 赞同：0
> 
> 时间：2012-12-18T19:21:07.007
> 
> 标签：mysql, sql

我有一个包含大约 8 亿个条目的电子邮件表，我需要将它与大约 100,000 封电子邮件的列表进行匹配。数据库中的电子邮件条目已编入索引。

最好的查询是什么？我尝试使用我想要匹配的条目创建一个临时表，然后对该表和主表执行 SELECT，但它似乎应该比它更快 - 多个查询似乎变慢了。有什么建议么？

服务器在 CentOS 6.3 上运行 MySQL 5.5.27。

编辑：这里是创建语句：

```
CREATE TEMPORARY TABLE temptable (Email varchar(50)) 
CREATE INDEX tempindex ON temptable (Email) 
```

这是我的查询：

```
SELECT temptable.Email FROM temptable, biglist WHERE temptable.Email = biglist.Email 
```

这是解释结果：

```
+----+-------------+-----------+-------+---------------+-----------+---------+-----------------------+------+--------------------------+
| id | select_type | table     | type  | possible_keys | key       | key_len | ref                   | rows | Extra                    |
+----+-------------+-----------+-------+---------------+-----------+---------+-----------------------+------+--------------------------+
|  1 | SIMPLE      | temptable | index | tempindex     | tempindex | 53      | NULL                  |   21 | Using index              |
|  1 | SIMPLE      | biglist   | ref   | idx_Email     | idx_Email | 202     | datab.temptable.email |    1 | Using where; Using index |
+----+-------------+-----------+-------+---------------+-----------+---------+-----------------------+------+--------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:27:29.143

您是否正在寻找类似的东西：

```
select emailaddress,
       (case when bg.emailaddress is NULL then 'MISSING' else 'PRESENT' end)
from TEMPemail te left outer join
     BigTable bg
     on te.emailaddress = bg.emailaddress 
```

您将电子邮件放在临时表中的想法是一个好主意。如果您在临时表和较大的表上都有索引，则查询可能会执行得更好。

# c# - C# 跨线程的静态变量访问

> ID：13939976
> 
> 赞同：11
> 
> 时间：2012-12-18T19:21:09.463
> 
> 标签：c#, multithreading

我在 C# 多线程程序中遇到了不良行为。我的一些静态成员在其他线程中丢失了它们的值，而相同声明类型的一些静态值不会丢失它们的值。

```
public class Context {
  public Int32 ID { get; set; }
  public String Name { get; set; }

  public Context(Int32 NewID, String NewName){
      this.ID = NewID;
      this.Name = NewName;
  }
}

public class Root {
    public static Context MyContext;
    public static Processor MyProcessor;

   public Root(){
     Root.MyContext = new Context(1,"Hal");

     if(Root.MyContext.ID == null || Root.MyContext.ID != 1){
         throw new Exception("Its bogus!") // Never gets thrown
     }

     if(Root.MyContext.Name == null || Root.MyContext.Name != "Hal"){
         throw new Exception("It's VERY Bogus!"); // Never gets thrown
     } 

     Root.MyProcessor = new MyProcessor();
     Root.MyProcessor.Start();
   }
}

public class Processor {
   public Processor() {
   }

   public void Start(){
      Thread T= new Thread (()=> {

          if(Root.MyContext.Name == null || Root.MyContext.Name != "Hal"){
                throw new Exception("Ive lost my value!"); // Never gets Thrown
          }

          if(Root.MyContext.ID == null){
              throw new Exception("Ive lost my value!"); // Always gets thrown
          }

      });
   }
} 
```

这是使用某些类型的静态成员时的线程突变问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T19:30:42.333

使用`volatile`或使用 Interlocked 访问变量。

您遇到的问题是编译器（以及本机编译器）可以自由地优化对变量的访问，因为他认为没有它们是合适的。所以他可能会将一个变量转储到一个寄存器中，而不是重新读取它。

为了避免它，您必须确保变量实际上已被真正读取。挥发性做到这一点。互锁也可以做到这一点（并允许增量/添加等以原子方式发生）。

你必须决定哪个更好。两者都将内存屏障强加到处理器上，这在经常执行时确实具有不小的成本。我经常使用的一种模式是让这些对象大部分只读，这样我就只替换根对象（一个内存屏障）。手动处理内存障碍（可能，阅读关键字手册）是一种痛苦。但是，它的效率要高得多 - 取决于你在那里做了多少等等。它可能是需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T19:26:20.253

尝试`volatile`对从多个线程修改/访问的变量使用修饰符

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T19:42:32.397

多线程应用程序中的共享变量值是不确定的！您应该对每个共享资源使用锁定以避免逻辑冲突：

```
 static Readonly Object _lock=new Object();
    lock(_lock)
    {
    //accessing your shared variable
    } 
```

# css - 在 Orchard 页面中以两种不同的方式设置导航样式

> ID：13939979
> 
> 赞同：0
> 
> 时间：2012-12-18T19:21:17.460
> 
> 标签：css, orchardcms

我有一个正在开发的 Orchard 网站。该站点在页面的页眉和页脚中使用相同的导航链接。诀窍是，链接的样式需要不同。这是我的代码的一个过于简化的版本：

```
<header>
  @Display(Model.Navigation)
</header>

...

<footer>
  @Display(Model.Navigation)
</footer> 
```

当我运行该页面时，会生成以下 HTML：

```
<header>
  <div class="zone zone-navigation">
    <article class="widget-navigation widget-menu-widget widget">
      <nav>
        <ul class="menu menu-main-menu">        
          <li class="current first"><a href="/Site/">Home</a></li>
          <li><a href="/Site/Blog">Blog</a> </li>
          <li><a href="/Site/Contact">Contact</a></li>
          <li class="last"><a href="/Site/About">About Us</a></li>
        </ul>
      </nav>
    </article>
  </div>
</header>

...

<footer>
  <div class="zone zone-navigation zone zone-navigation">
    <article class="widget-navigation widget-menu-widget widget widget-navigation widget-menu-widget widget">
      <nav>
        <ul class="menu menu-main-menu menu menu-main-menu">        
          <li class="current first"><a href="/Site/">Home</a></li>
          <li><a href="/Site/Blog">Blog</a> </li>
          <li><a href="/Site/Contact">Contact</a></li>
          <li class="last"><a href="/Site/About">About Us</a></li>
        </ul>
      </nav>
    </article>
  </div>
</footer> 
```

在 Model.Navigation 的第二次使用中，类名被列出两次似乎很奇怪。无论如何，我目前在我引用的 css 文件中有以下 css 类定义：

```
.menu-main-menu { list-style-type:none; display:inline; vertical-align:bottom; }
.menu-main-menu ul { float:left; margin-left:-1em; }
.menu-main-menu li { float:left; line-height:32px; border-left:1px solid green width:auto; font-size:10.5pt; font-weight:bold; font-family:Arial; }
.menu-main-menu li:first-child { border: 0;}
.menu-main-menu li a { display: block; padding: 0 1em; height:48px; }
.menu-main-menu li.current a, .menu-main-menu li.current a:hover {background:#d8e0be}
.menu-main-menu li a:hover {background:#e9e6d7; text-decoration:none} 
```

我的第一个导航部分看起来不错。如何为页脚中的导航项设置样式以使它们看起来不同？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:34:29.640

使用包含 .menu-main-menu 类的页眉和页脚标签。这将帮助您区分页面上的两者：

```
.menu-main-menu { ... }
header .menu-main-menu { ... }
footer .menu-main-menu { ... } 
```

# sql - 用于检查长度并构建字符串的 PL/SQL 函数

> ID：13939980
> 
> 赞同：0
> 
> 时间：2012-12-18T19:21:17.770
> 
> 标签：sql, plsql, oracle11g

我创建了一个包含聚合值的列的视图（以 varchar2 数据类型存储输出）。某些记录超出了最大限制，例如 varchar2(4000)。有人建议我使用 PL/SQL 函数来检查长度并在必要时构建一个字符串。

我检查过，并试图纠正语法错误，

```
CREATE OR REPLACE
FUNCTION SUBURL(col1 IN VARCHAR2, col2 IN varchar2)
RETURN varchar2
IS
v_result_string varchar2(4000);
v_length varchar2(4000);
BEGIN
IF (length (col1) + length (col2) ... <= 4000) then return col1 || col2 || ...
END IF; 
-- build the string and check the length for every column you contatenate
v_result_string := col1;
if (length(v_result_string) + length (col2) > 4000) THEN
   -- add as much of col2 as you can up to a total of 4000
   v_length := 4000 - length(v_result_string);
   v_result_string := v_result_string  + substr(col2, 1, v_length);
   return v_result_string;
end if;
end suburl; 
```

这次有两个错误，

错误（7,35）：PLS-00103：遇到符号“。” 预期以下情况之一时：。( ) , * % & = - + < / > at 是 mod 余数 not rem => <> or != or ~= >= <= <> and or like like2 like4 likec as between || member submultiset 符号“.” 被忽略了。

错误（7,76）：PLS-00103：遇到符号“。” 当期望以下之一时：（ - + case mod new null continue avg count current max min prior sql stddev sum variance execute forall merge time timestamp interval date pipe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:39:20.370

您的代码中有许多语法错误。

*   首先，你的函数应该接受一个参数吗？函数名称后面有一个开放括号，`FUNCTION suburl(`这意味着您确实希望传入一个参数。但是你没有声明一个参数，你只是从你的函数体开始。删除该打开的括号或添加要传入的参数的声明。
*   其次，您使用的是未声明的局部`v_length`变量`v_result_string`。你需要声明这些。如果`v_resultl_string`应该是第三个变量而不是 的拼写错误`v_result_string`，您还需要声明它。
*   第三，您缺少开始`BEGIN`和`END`结束函数主体的 and

函数声明的骨架类似于

```
CREATE OR REPLACE FUNCTION name_of_function( parameter_list )
IS
  variable_declarations;
BEGIN
  body_of_function;
END; 
```

除此之外，代码主体中还有许多带有不匹配括号的语法错误。

```
if (length(v_result_string) + length (col2) > 4000 THEN 
```

例如，在`THEN`

```
if (length(v_result_string) + length (col2) > 4000)
then 
```

您的代码中的省略号应该代表什么？您是否连接的不仅仅是`col1`and`col2`列？如果连接列导致字符串长度超过 4000 字节，那么您遵循的代码路径对我来说几乎没有意义。如果您只是尝试连接两列，则可以简化它，但如果有更多列，那么您也需要考虑这些列。

您使用了“聚合”一词，这意味着您想要组合来自多个不同*行*的数据，而不是多个不同的*列*。如果这实际上是您要完成的任务，则可以使用循环，也可以编写用户定义的聚合函数。

# facebook - Facebook Graph API - 仅选择具有特定字段的帖子？

> ID：13939993
> 
> 赞同：0
> 
> 时间：2012-12-18T19:22:03.937
> 
> 标签：facebook, facebook-graph-api

我正在尝试创建从页面中提取的 Facebook 帖子的提要，但我只想包含那些带有“消息”字段的帖子。我尝试过使用以下内容，但这仍然包括所有数据/条目。

[https://graph.facebook.com/PAGE_ID/posts?fields=message&access_token=TOKEN](https://graph.facebook.com/PAGE_ID/posts?fields=message&access_token=TOKEN)

有任何想法吗？我可以在 URL 中使用某种 WHERE 子句吗？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T20:38:11.723

您可以在流表上尝试 FQL，例如 -

```
select post_id, source_id, message from stream where source_id = 19292868552 and message != '' 
```

流式 FQL 表 - [https://developers.facebook.com/docs/reference/fql/stream](https://developers.facebook.com/docs/reference/fql/stream)

# php - 将 MySQL 行与 PHP 数组值进行比较

> ID：13939996
> 
> 赞同：1
> 
> 时间：2012-12-18T19:22:19.233
> 
> 标签：php, mysql, arrays, compare

我正在尝试将列表中的 IP 地址与被阻止的 IP 列表进行比较。如果 IP 地址等于 $blockedIP 数组中的地址，则该行不包含在列表中。该列表由 mysqli_query 填充。如果 IP 地址与数组中的一个匹配，我想做的是排除整行。

```
echo '<div class="genericTable"><h2>Downloaded Sermons Report</h2><table>';

$blockedIP = array('69.58.178.58', '173.199.115.123', '173.199.120.99');

foreach($blockedIP as $ip){
$sql = mysqli_query($db, "SELECT * FROM dl_log WHERE ipaddress <> '".$ip."'");

while($row = mysqli_fetch_assoc($sql)){
    echo '<tr>';

    if($row['ipaddress'] !== $ip){
        foreach($row as $each){
            echo '<td class="genericTable">'.$each.'</td>';
        }
    }
    echo '</tr>';
  }
}
echo '</table></div>'; 
```

我已经用几种不同的方式尝试了脚本，要么获取整个列表，要么将每一行和每一列都与数组进行比较，这使得表格看起来很翘。我正在使用 foreach 将值与数组进行比较。我应该把它放在哪里？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:24:53.343

> 如果 IP 地址与数组中的一个匹配，我想做的是排除整行。

你有几个选择：

1.  一个使用 SQL 的查询[`IN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)。用 压缩被阻止的 IP 地址[`implode()`](http://php.net/implode)。

    ```
    SELECT * FROM dl_log WHERE ipaddress NOT IN (...); 
    ```

2.  一次查询并使用 PHP`in_array()`过滤他的结果

    ```
    // SQL
    SELECT * FROM dl_log;

    // PHP
    if (!in_array($row['ipaddress'], $blockedIP)) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:27:10.237

如果您不想打印该行，请更改

```
if($row['ipaddress'] !== $ip){ 
```

到

```
if(!in_array($row['ipaddress'], $blockedIP)){ 
```

# emacs - Emacs：同一文件的多个视图

> ID：13939997
> 
> 赞同：10
> 
> 时间：2012-12-18T19:22:28.710
> 
> 标签：emacs

我试图在 2 个缓冲区中查看同一个文件，一个以正常比例，另一个缩小，以查看整个缓冲区（如 notepad++ 文档地图： http: [//notepad-plus-plus.org/assets/images /docMap.png](http://notepad-plus-plus.org/assets/images/docMap.png) )。

有没有办法在不同的缓冲区访问同一个文件，让每个缓冲区可以有不同的设置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T19:28:24.833

尝试`M-x clone-indirect-buffer`（或`M-x clone-indirect-buffer-other-window`aka `C-x 4 c`），然后您可以在其中一个非常小的缓冲区中设置字体。

您可以使用运行命令的绑定`C-x C--`或使缓冲区中的字体变小或变大。`C-x C-+``text-scale-adjust`

有人制作了一种自动进行拆分/收缩的模式，但我找不到它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-18T20:12:17.100

您想安装执行此操作的`minimap`包（它在 GNU ELPA 中）。

# php - 是否有具有身份验证（离子或类似）+bootstrap+mongo 支持的 Laravel 示例应用程序？

> ID：13939998
> 
> 赞同：0
> 
> 时间：2012-12-18T19:22:31.267
> 
> 标签：php, laravel

我正在探索在我们的创业公司中使用 Laravel 的可能性。希望通过一个应用程序来探索它，该应用程序首先提供了它的行为方式以及它与 codeigniter 框架的比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T20:12:43.413

我还没有找到你要求的所有东西，但是有两个用于 Laravel 3.2.1 的优秀捆绑包，它们提供了构建应用程序的基础平台。

1) bundles.laravel.com/bundle/orchestra

2) www.getplatform.com

两者都具有身份验证/授权、用户管理和 Twitter 引导支持。

据我所知，两者都不适用于 Mongo，但是，您可以插入 Mongo Bundle

[http://bundles.laravel.com/bundle/mongor](http://bundles.laravel.com/bundle/mongor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T09:43:43.807

我不知道有一个包可以满足您的所有要求 [特别是 Mongo]，但是如果您正在寻找行级身份验证，我编写了一个示例应用程序，您可以在[我的 github](https://github.com/sirbijan/LaravelFullAuthentication)上看到它。我编写的小“允许”过滤器 ( [app/filters.php](https://github.com/sirbijan/LaravelFullAuthentication/blob/master/app/filters.php) ) 允许您为任何页面/链接定义所需的任何权限，然后您可以在[app/routes.php](https://github.com/sirbijan/LaravelFullAuthentication/blob/master/app/routes.php)或刀片模板中强制执行它。