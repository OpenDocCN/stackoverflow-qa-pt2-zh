# StackOverflow 问答 13075000-13075999

# c# - 使用正则表达式从字符串中删除变量

> ID：13075000
> 
> 赞同：1
> 
> 时间：2012-10-25T18:35:36.020
> 
> 标签：c#, regex, string, parsing

我有一个包含以下内容的字符串：

```
value="'+c+'" 
```

并希望使用正则表达式来摆脱单引号、加号以及它们之间的任何内容：

```
value="" 
```

这就是我正在尝试的：

```
responseFromServer = Regex.Replace(responseFromServer, @"=""'\+.+?\+'""", "", RegexOptions.Singleline); 
```

解决方案：

```
responseFromServer = Regex.Replace(responseFromServer, "'[+].*[+]'", "", RegexOptions.Singleline); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:40:38.843

```
string afterReplace = Regex.Replace(responseFromServer, @"'\+[^+]*\+'", "", RegexOptions.Singleline) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:02:03.133

这是在给定示例中匹配所有`'+`和之间的表达式：`+'`

```
'[+].*[+]' 
```

如果你也想搭配look behind和look ahead，你可以试试：

```
(?<==")'[+].*[+]'(?=") 
```

它`="`在比赛前和比赛`"`后检查。

您还可以扩展它以查找 之前的值名称`=`，我希望它会发生变化。取决于这些值名称可以包含的确切内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:09:13.530

我认为这会奏效。

```
Regex.Replace(responseFromServer, @"(')(\\+)((?:[a-z][a-z0-9_]*))(\\+)(')", "", RegexOptions.Singleline) 
```

# javascript - 动态更改 HTML 表格的 ID

> ID：13075001
> 
> 赞同：0
> 
> 时间：2012-10-25T18:35:37.190
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, html

```
<% @level1.each do |row1| %>
<table id="tbl_main1" name="tbl_main1">
    <tr>
        **<td><a href="javascript:toggle_visibility('tbl1','lnk1');">**
            **<div align="right" id="lnk1" name="lnk1" width="2%">[+]</div></a></td>**      
    </tr>
    <tr>
                 **<table id="tbl1" name="tbl1">**
                <tr><td height="0.5" bgcolor="#EEEEEE"></td></tr>
                   </table>
    </tr>
</table>
<% end %> 
```

我想在运行时使用 Ruby 中的循环创建多个表。但我想动态更改“link1”和“tbl1”的 id，以便每个表都有一个唯一的“tbl”名称和“lnk1”名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:42:21.633

您可以使用 row1 的某些元素来执行此操作。伪代码如下：

```
<% @level1.each do |row1| %>
<table id="tbl_main1#{row1.id}" name="tbl_main1">
    <tr>
        **<td><a href="javascript:toggle_visibility('tbl1#{row1.id}','lnk1#{row1.id}');">**
            **<div align="right" id="lnk1#{row1.id}" name="lnk1" width="2%">[+]</div></a></td>**      
    </tr>
    <tr>
                 **<table id="tbl1#{row1.id}" name="tbl1">**
                <tr><td height="0.5" bgcolor="#EEEEEE"></td></tr>
                   </table>
    </tr>
</table>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:30:00.493

```
<% @level1.each_with_index do |row1, index| %>
  <table id= <%= "tbl_main#{index}" %> name="tbl_main1"> 
```

我会做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:43:01.370

正如上面评论中提到的，您应该更改代码来执行此操作。当您只需更改代码即可立即满足您的需求时，没有理由依赖客户端脚本或代码修改。

所以，而不是使用

```
id="lnk1" 
```

你应该使用

```
id=someDynamicVariableInYourCode 
```

此外，如果你能解释为什么你需要这个以及你试图用这个来实现什么，那么理解你想要什么会容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T22:25:58.010

确切的语法是这样的：

```
<td><a href="javascript:toggle_visibility('<%= "tbl1#{index}" %>', '<%= "lnk1#{index}" %>');>
......
......
div align="right" id=<%= "lnk1#{index}" %> name="lnk1" width="2%">[+]</div></a></td>
...... 
......
<table id=<%= "tbl1#{index}" %> 
```

# php - 没有设置 HttpOnly 标志的会话 Cookie

> ID：13075003
> 
> 赞同：4
> 
> 时间：2012-10-25T18:35:55.100
> 
> 标签：php, javascript, apache, security

我已经建立了一个带有登录系统的网站。准备好后，我使用 Acunetix 对其进行了扫描，但收到以下消息：

没有设置 HttpOnly 标志的会话 Cookie 没有设置安全标志的会话 Cookie（我想这只是在我有 SSL 连接的情况下）

所以我的问题是，如何为我的所有 Session 数据设置 HttpOnly 标志？当我登录用户时，我只是在使用会话。我用他们的用户 ID 号给他们一个会话，然后我使用那个用户 ID 获取数据。

有什么简单的方法可以设置所有会话 HTTPOnly 并保护它们，所以没有人可以触摸它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T18:40:28.603

您可以更改 php.ini 中的设置，也可以通过`ini_set()`调用 change`session.cookie_secure`和`session.cookie_httponly`values 来更改`true`.

或者，您可以`session_set_cookie_params()`在开始会话之前使用以获得所需的效果。

[http://us3.php.net/manual/en/function.session-set-cookie-params.php](http://us3.php.net/manual/en/function.session-set-cookie-params.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:40:15.517

你应该查看[这个优秀的网站](https://www.owasp.org/index.php/HttpOnly#Using_PHP_to_set_HttpOnly)来解决这个问题。归结为在 php.ini 的会话部分中设置它（或通过适当的运行时函数）：

```
session.cookie_httponly = True 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-19T20:57:53.590

您也可以在使用 PHP 时将`httponly`标志设置为：`false`[`setcookie`](http://php.net/manual/en/function.setcookie.php)

```
// params: name, value, expiration, path, domain, secure, http-only
setcookie('session-cookie-key', 'data', 0, '/', 'example.com', true, false); 
```

# jquery - 单击一个 div，将其添加到搜索查询输入

> ID：13075004
> 
> 赞同：0
> 
> 时间：2012-10-25T18:36:01.917
> 
> 标签：jquery, html, css

我基本上是在尝试让用户单击“最近的搜索标签”并将其完整添加到搜索输入中。我所说的“完整”是指标签的样式以及文本。

例如：

![单击最近的搜索标签时，将其添加到搜索中。](../Images/bafdbef98dc4a016c7fc75a9941239e8.png)

我知道有一个 jquery 插件。但我真的很想知道是否有一种简单的方法可以完成这项工作。

我有一个[jsfiddle](http://jsfiddle.net/YEr6m/9/)。现在，当我单击最近的搜索标签时，它会一次获取每个 div 的文本。

```
$('.tag').click(function(e){
     var tag = $(this).children().html();
     $('input').val(tag);
     e.preventDefault();
}); 
```

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:57:37.070

您可以通过将样式标签放置在输入下方（带透明背景）来获取样式标签以显示“在”输入框中（类似于 Google 使用其自动完成功能所做的）

在输入周围设置一些标记（输入包装器和标签的容器）：

```
<div class="input-group">
    <div class="tag tag-input"></div>
    <input name="q" id="search" class="input-text" multiple="multiple" placeholder="Search..." autocomplete="on" value="" />
</div> 
```

将 放置在`tag-input`与文本内联的位置，将 设置`input`为更宽`word-spacing`，以便标签等间距。设置`tag-input` `z-index`低于输入的值。它还会在用户键入长查询时调整输入宽度。

[jsfiddle](http://jsfiddle.net/pxfunc/YEr6m/14/)（[全屏](http://jsfiddle.net/pxfunc/YEr6m/14/show)）

这使用在现代浏览器中工作的`oninput`事件（ala ）（有关更多信息，请参见[On input change event? ）](https://stackoverflow.com/a/6458946/222714)`$input.bind('input'...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:06:24.593

```
$('.tag').click(function(e){
    var tag = $(this).children().html();
    $('input').val(function(i,v){return v+" "+tag});
    e.preventDefault();
}); 
```

将添加标签而不是替换它们。

# iphone - appDelegate 方法发生错误

> ID：13075007
> 
> 赞同：0
> 
> 时间：2012-10-25T18:36:06.410
> 
> 标签：iphone, ios, xcode, uiimageview

当我运行样本信号时，appDelegate.m 文件中发生错误中止

```
self.view.controller=root.view.controller 
```

请帮助我，我在下面添加了代码

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    /* bad signal occurred at this line */
    self.window.rootViewController=self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:47:22.153

UIWindow rootViewController 属性在 iOS4 之前不存在。如果您尝试在装有 iOS 3 或更旧版本的设备上运行此代码，它将崩溃。

在您的 AppDelegate 中，您可以改用 addSubview。

`//self.window.rootViewController = self.viewController; // Only iOS >= 4 [self.window addSubview:self.viewController.view]; [self.window makeKeyAndVisible]; return YES;`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:49:09.547

你的语法`self.view.controller = root.view.controller`有点奇怪。我想你的意思是`self.viewController = rootViewController`？即便如此，那也是不正确的。

尝试类似的东西 -

```
self.viewController = [[YourViewController alloc]init];
self.window.rootViewController = self.viewController; 
```

将 YourViewController 替换为控制器的类。

# sql - typeperf 记录到 SQL

> ID：13075009
> 
> 赞同：0
> 
> 时间：2012-10-25T18:36:10.480
> 
> 标签：sql, performance, ms-access

我正在尝试将 typeperf 记录到 ACCESS 数据库并且没有任何运气。我创建了一个访问数据库，添加了文件 DSN，当我尝试运行命令时：

typeperf -si 15 -f SQL "\Process(*)\ID 进程" -o SQL:accessDSN!log

输出只是说未知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:02:01.700

你有没有尝试过：

```
TYPEPERF -f SQL "\Process(*)\ID Process" -si 15 -o SQL:accessDSN!log 
```

# java - Java ActiveMQ - 如何将过期消息发送到另一个队列

> ID：13075012
> 
> 赞同：4
> 
> 时间：2012-10-25T18:36:12.863
> 
> 标签：java, activemq, mq

我有一个要求，如果客户端在 60 秒后没有读取它们，则队列上的消息必须过期。我不想删除消息，而是想将它们发送到另一个队列，例如“过期消息”队列或其他东西。我已经阅读了一些关于死信队列和退出队列的信息，但我不确定它们是否在做我需要的事情。

这是我在 60 秒后过期的代码：

```
MessageProducer producer = session.createProducer(destination);

producer.setTimeToLive(60 * 1000); 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T03:06:03.477

默认情况下，AMQ 会向 DLQ 发送过期消息

见[http://activemq.apache.org/message-redelivery-and-dlq-handling.html](http://activemq.apache.org/message-redelivery-and-dlq-handling.html)

# c# - 无法确定“。” 文本框 KeyPress 事件的 keychar

> ID：13075017
> 
> 赞同：3
> 
> 时间：2012-10-25T18:36:34.943
> 
> 标签：c#

我使用下面的代码不允许文本框中除数字以外的任何字符......但它允许'。' 特点！我不希望它允许点。

```
 private void txtJustNumber_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsDigit((char)(e.KeyChar)) &&
            e.KeyChar != ((char)(Keys.Enter)) &&
            e.KeyChar != (char)(Keys.Delete) &&
            e.KeyChar != (char)(Keys.Back)&&
            e.KeyChar !=(char)(Keys.OemPeriod))
        {
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:01:31.057

用这个：

```
 if (!char.IsDigit((char)(e.KeyChar)) &&
            e.KeyChar != ((char)(Keys.Enter)) &&
            (e.KeyChar != (char)(Keys.Delete) || e.KeyChar == Char.Parse(".")) &&
            e.KeyChar != (char)(Keys.Back) 
            ) 
```

这是因为 Keys.Delete 的 char 值为 46，与 '.' 相同。我不知道它为什么喜欢这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:51:41.663

你可以试试这个（`textBox1`你的文本框在哪里）：

```
// Hook up the text changed event.
textBox1.TextChanged += textBox1_TextChanged; 
```

...

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    // Replace all non-digit char's with empty string.
    textBox1.Text = Regex.Replace(textBox1.Text, @"[^\d]", "");
} 
```

或者

```
// Save the regular expression object globally (so it won't be created every time the text is changed).
Regex reg = new Regex(@"[^\d]");

private void textBox1_TextChanged(object sender, EventArgs e)
{
    if (reg.IsMatch(textBox1.Text))
        textBox1.Text = reg.Replace(textBox1.Text, ""); // Replace only if it matches.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T08:17:40.063

在按键事件中尝试使用此代码解决您的问题：

```
 private void txtMazaneh_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsDigit(e.KeyChar) && (int)e.KeyChar != 8 ||(e.KeyChar= .))
            e.Handled = true;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-09T03:55:28.543

```
//This is the shortest way
private void txtJustNumber_KeyPress(object sender, KeyPressEventArgs e)
{
    if(!char.IsControl(e.KeyChar) && !char.IsDigit(e.KeyChar))
    {
        e.Handled = true; 
    }
} 
```

# android - 从左到右滑动抽屉

> ID：13075018
> 
> 赞同：1
> 
> 时间：2012-10-25T18:36:35.367
> 
> 标签：android, menu, sidebar, sliding

我想让滑动抽屉从左边滑动。

我有一个部分解决方案，但它只适用于 Android 版本 3 或更高版本，我想支持 2.2。`android:rotation=180`解决方案是XML 中的 Sliding Drawer 组件中的属性。

有谁知道如何做或一些类似的效果来扩展菜单并将整个视图向右移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:45:09.817

使用这个， [http://blog.sptechnolab.com/2011/02/10/android/android-sliding-drawer/](http://blog.sptechnolab.com/2011/02/10/android/android-sliding-drawer/)它是 MultiDirectionSlidingDrawer

# c# - 使用正则表达式清理字符串与 Base64 编码字符串

> ID：13075020
> 
> 赞同：1
> 
> 时间：2012-10-25T18:36:38.417
> 
> 标签：c#, regex, base64

我有一个扩展方法，它`Regex.Replace`在将用户输入的字符串添加到 XML 文档之前使用它来清除用户输入的字符串中的无效字符。

正则表达式的目的是去除用户从 Microsoft Word 粘贴文本时偶尔出现在输入中的一些随机 hi-ASCII 字符，并用空格替换它们：

```
 public static string CleanInput(this string inputString) {
        if (string.IsNullOrEmpty(inputString))
            return string.Empty;

        // Replace invalid characters with a space.
        return Regex.Replace(inputString, @"[^\w\.@-]", " ");
    } 
```

现在就像命运一样，有人现在在包含 base64 编码数据的字符串上使用此扩展方法。

我相信正则表达式将使*大多数*base64 数据保持不变，但我认为它可能会改变其中的一些。

所以 - 知道`\w`在正则表达式中是匹配的`[A-Za-z0-9_]`并且 Base64 实际上是相同的范围，这个正则表达式是否*应该*改变字符串？

如果它正在更改字符串，为什么以及如何更改它，以便仍然在常规非编码文本中清理 hi-ASCII 垃圾，而不会弄乱编码的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:52:45.577

Base64 还使用`+`、`/`和`=`.

您可以将这些添加到您的角色类中：

```
[^\w\.@+/=-] 
```

请注意，`-`它必须是最后一个，才能成为文字连字符减号，而不是指定范围。

可能还值得考虑的`\w`是，这不一定与`[A-Za-z0-9_]` [Microsoft 的说法](http://msdn.microsoft.com/en-us/library/20bw873z%28v=vs.80%29.aspx)相同。

# javascript - 在 Backbone.js 中加载初始数据的最佳方法是什么？

> ID：13075021
> 
> 赞同：9
> 
> 时间：2012-10-25T18:36:39.233
> 
> 标签：javascript, backbone.js

在 Backbone.js 中，模型加载和保存是通过 ajax 调用完成的。但是，是否有任何最佳实践可以在页面加载时加载初始集合而不必通过 ajax 将其拉下来？我正在尝试尽可能多地预先进行服务器端渲染。

过去，我使用包含初始数据状态的 json 字符串的 javascript 变量为 html 播种，以便可以在服务器端呈现它，但我不确定这是否是一个好习惯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T19:06:53.553

不知道这是否一定是最佳实践，但是这种使用 json*对象*（不是您描述的 json*字符串*，对吗？）为 html 播种的方法当然是我进行初始加载的首选方式。不仅因为它消除了等待初始 AJAX 调用返回的延迟的（显而易见的）原因，而且还因为较少开放的连接释放了浏览器来加载其他东西（如 img src 或诸如此类），让你到 document.onLoad 稍微快一点。

建议在使用此方法时，将所述变量放在正文底部的脚本标记中（即不在头部部分），以使页面上的静态 html 元素有机会加载和呈现第一的。当 document.onLoad 触发时，json 数据就准备好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T10:05:50.457

从[Backbone docs](http://backbonejs.org/#FAQ-bootstrap)开始，在脚本标签中初始化模型并不是一个坏习惯。在我当前的项目中，我决定只在内部设置普通对象`window.projectData`，以便能够在外部 javascripts 中初始化 Backbone 模型。

```
<script>
  ;(window.projectData || (window.projectData = {})).modelName = {/* value */};
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:45:16.693

您选择的方法可能取决于您计划加载多少数据以及该数据将如何在页面中使用。

如果大多数所需数据最终不会最终呈现在页面上，那么将初始状态引导到 javascript 变量中可能不是一个糟糕的方法。

但是，如果数据与页面的呈现直接相关，您可能更愿意为主干应用程序的初始状态解析一个预渲染的 DOM。必须注意的是，这种解析会有些慢，尤其是对于大型数据集。

如果你最终选择解析预渲染的内容，我不久前组装了一个[小型 jQuery DOM 解析器](https://github.com/rjz/jquery-domdatasource)，它可能对将呈现的内容映射到 Backbone-ready 表单很有用。

# c# - WCF 调用需要 20 秒

> ID：13075022
> 
> 赞同：0
> 
> 时间：2012-10-25T18:36:49.327
> 
> 标签：c#, wcf

我对 WCF 有点陌生，获取记录的调用需要将近 20 秒，即使在调试期间进行本地调用也需要花费时间。它正确完成，但速度很慢。

客户来电：

```
var docImgSvc = new DocImagingService.DocImagingStatusServiceClient("WSHttpBinding_IDocImagingStatusService");
CurrentManifest = docImgSvc.GetManifest(manifestLookup);  //<<---This takes 20 secs
if (CurrentManifest == null || CurrentManifest.ManifestId == 0) 
```

服务器例程：

```
public Manifest GetManifest(int manifestNumber)
{
    var de = new DocumentImagingEntities(); //<<---Takes 20 secs before it gets here.
    var manifest = de.Manifests.FirstOrDefault(m => m.ManifestId == manifestNumber);
    return manifest;
} 
```

服务器配置：

```
 <system.serviceModel>
<services>
  <service name="DocImagingServices.DocImagingStatusService">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/DocImagingServices/DocImagingStatusService/"/>
      </baseAddresses>
    </host>
    <endpoint address="" binding="wsHttpBinding" contract="DocImagingServices.IDocImagingStatusService">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

客户端配置：

```
 <system.serviceModel>
<bindings>
  <wsHttpBinding>
    <binding name="WSHttpBinding_IDocImagingStatusService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
      textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
        enabled="false" />
      <security mode="Message">
        <transport clientCredentialType="Windows" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="Windows" negotiateServiceCredential="true"
          algorithmSuite="Default" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:8732/Design_Time_Addresses/DocImagingServices/DocImagingStatusService/"
  binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IDocImagingStatusService"
  contract="DocImagingService.IDocImagingStatusService" name="WSHttpBinding_IDocImagingStatusService">
    <identity>
      <dns value="localhost" />
    </identity>
  </endpoint>
</client> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:28:30.510

以前，当我看到这种类型的响应时间时，它是由于应用程序池设置造成的。

有一个设置允许您在运行应用程序池时加载用户配置文件，这个加载时间可以匹配您的 20 秒。

请参阅[http://blogs.msdn.com/b/vijaysk/archive/2009/03/08/iis-7-tip-3-you-can-now-load-the-user-profile-of-the-application -pool-identity.aspx](http://blogs.msdn.com/b/vijaysk/archive/2009/03/08/iis-7-tip-3-you-can-now-load-the-user-profile-of-the-application-pool-identity.aspx)有关如何设置此值的屏幕转储。

# c# - System.Convert 不包含“toString”的定义

> ID：13075023
> 
> 赞同：2
> 
> 时间：2012-10-25T18:36:49.533
> 
> 标签：c#, asp.net, oop

我正在尝试将值转换为字符串，据我所知，我必须使用命名空间 System.Convert 类的 toString 方法。

这是我的代码：

```
Compiler Error Message: CS0117: 'System.Convert' does not contain a definition for 'toString'

Source Error:

Line 101:                while (r.Read())
Line 102:                {
Line 103:                    listbox.Items.Add(new ListItem(Convert.toString(r["first_name"]), Convert.toString(r["first_name"])));
Line 104:                } 
```

我到底在做什么错？我是 C# 新手（因此，如果您查看我的个人资料，您会看到 6-7 个问题，最近都与 C# 相关！）。这真的让我也练习了我的 OOP 排骨！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T18:38:13.727

C# 区分大小写试试这个

```
Convert.ToString() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T18:38:46.503

摆脱

```
Convert.toString(r["first_name"]) 
```

并将其更改为

```
r["first_name"].ToString() 
```

编辑以消除这个令人讨厌的小错字的世界:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T18:38:13.190

```
Convert.ToString(myNonString); //  It's a casing issue. 
```

编辑：您可能不想使用 .ToString() ，因为如果您要转换的值为 null ，它会生成 NullReferenceException ，并且静态 Convert.ToString() 将始终返回一个字符串（即使在 null 对象的情况下）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T18:38:11.117

为什么不直接调用`ToString()`对象本身：

```
new ListItem(r["first_name"].ToString()) 
```

# c# - 如何在 C# 中读取 NASA .hgt 文件？

> ID：13075041
> 
> 赞同：4
> 
> 时间：2012-10-25T18:37:38.203
> 
> 标签：c#

有人知道如何在 C# 中读取 NASA .hgt 文件吗？

显然，这里用 Python 提出了这个问题： [how to read NASA .hgt binary files](https://stackoverflow.com/questions/357415/how-to-read-nasa-hgt-binary-files)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:41:46.067

使用 GDAL 库（地理数据抽象层）：它支持 HGT 文件，并使用 SWIG 进行 C# 绑定。

编辑：您需要的所有信息都[在这里](http://dds.cr.usgs.gov/srtm/version2_1/Documentation/)。

从[常见问题解答](http://www2.jpl.nasa.gov/srtm/faq.html)：

> **SRTM 数据文件的名称类似于“N34W119.hgt”。字母和数字分别代表什么，什么是“.hgt”格式？**
> 
> 每个数据文件覆盖地球表面一个纬度乘一经度的块。前七个字符表示该块的西南角，其中 N、S、E 和 W 分别表示北、南、东和西。因此，“N34W119.hgt”文件涵盖北纬 34 到 35 度和西经 118-119（该文件包括加利福尼亚州洛杉矶市中心）。文件扩展名“.hgt”仅代表单词“height”，意思是海拔。它不是格式类型。这些文件采用“原始”格式（无标题且未压缩），16 位有符号整数，海拔以米为单位测量，采用“地理”（纬度和经度数组）投影，数据空白由 -32768 表示. 国际 3 角秒文件有 1201 列和 1201 行数据，总文件大小为 2,884,802 字节 (= 1201 x 1201 x 2)。美国 1 角秒文件有 3601 列和 3601 行数据，总文件大小为 25,934,402 字节 (= 3601 x 3601 x 2)。有关更多信息，请阅读文本文件“SRTM_Topo.txt”，网址为 [http://edcftp.cr.usgs.gov/pub/data/srtm/Readme.html](http://edcftp.cr.usgs.gov/pub/data/srtm/Readme.html)

# include - xcode 4.5.1。标头搜索路径不起作用， 文件未找到

> ID：13075043
> 
> 赞同：14
> 
> 时间：2012-10-25T18:37:44.583
> 
> 标签：include, xcode4.5

我在我的主目录中添加了一个包含目录。我可以从构建目录运行“ls -l ~/include”。我已经在“标题搜索路径”和“用户标题搜索路径”中添加了该目录。在这两个地方，我都尝试过非递归和递归。但是 xcode 4.5.1 在任何情况下都找不到第一个声明的头文件。

它在源代码 call.m 中声明为：

```
 #include <directory/file.h> 
```

我收到“找不到词法或预处理器问题 'directory/file.h' 文件。”

但是当从 cli 运行 xcodebuild 时，构建源代码没有任何问题。

我尝试了许多在互联网上找到的建议

*   在 /usr/om 我的驱动器中添加一个包含
*   向项目添加索引，添加没有副本且没有“添加到目标”标记的文件。
*   重启xcode。
*   指定所有特定路径。

但是还是不行。

问题是什么。xcode中的错误？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T06:13:19.983

我刚刚遇到了类似的问题，这是因为我为标题搜索路径定义的路径中有空格。例如，我将以下内容定义为搜索路径：

`$(SRCROOT)/Frameworks/Headers`

正在扩展到以下内容：

`/Users/skoota/Documents/Xcode Projects/My App/Frameworks/Headers`

如您所见，路径中有空格（由于您正在使用`$(SRCROOT)`变量，因此不会立即显示出来）并且编译器并不特别欣赏这些空格。我通过将搜索路径更改为此解决了这个问题：

`"$(SRCROOT)"/Frameworks/Headers`

`$(SRCROOT)`（注意转义空格的引号）。现在扩展到：

`"/Users/skoota/Documents/Xcode Projects/My App"/Frameworks/Headers`

`"`虽然嵌入标记看起来有点奇怪，但效果很好。这花了我一段时间才弄清楚，所以希望它有所帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-27T11:04:04.223

如果目录路径中有空格，通常会发生这种情况。要解决此问题，请在路径周围使用双引号。

假设你想使用你的项目目录，那么你应该使用：`$PROJECT_DIR`. 如果您还想在文件夹中搜索，请启用递归。或者，您可以使用`$(SRCROOT)`

# python - 使用默认值初始化方法的参数

> ID：13075044
> 
> 赞同：17
> 
> 时间：2012-10-25T18:37:47.387
> 
> 标签：python

如果没有将显式值传递给方法，我想用一些默认值初始化方法的参数 - 如下所示：

```
class Example
   def __init__(self, data = self.default_data()):
      self.data = data

   def default_data():
      # ....
      return something 
```

我得到了错误：

```
NameError: name 'self' is not defined 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-25T18:40:28.143

这里的常见习惯用法是将默认值设置为某个哨兵值（`None`这是典型的，尽管[有些人`Ellipsis`](https://stackoverflow.com/questions/6185475/custom-placeholder-like-none-in-python/6186450#6186450)为此建议过），然后您可以检查。

```
class Example(object): #inherit from object.  It's just a good idea.
   def __init__(self, data = None):
      self.data = self.default_data() if data is None else data

   def default_data(self):  #probably need `self` here, unless this is a @staticmethod ...
      # ....
      return something 
```

您可能还会看到`object()`用于哨兵的实例。

```
SENTINEL = object()
class Example(object):
   def __init__(self, data = SENTINEL):
      self.data = self.default_data() if data is SENTINEL else data 
```

后一个版本的好处是您可以将其传递`None`给您的函数，但也有一些缺点（请参阅下面@larsmans 的评论）。如果您不预见需要将`None`有意义的参数传递给您的方法，我会提倡使用它。

# php - 使用 PHP 在多列中显示记录

> ID：13075052
> 
> 赞同：0
> 
> 时间：2012-10-25T18:38:10.120
> 
> 标签：php, two-columns

我查看了之前关于我的脚本问题的帖子的所有回复。一切都很好，但没有一个建议可以很好地解决我的问题。

我正在尝试显示两 (2) 列而不是我当前的一 (1) 列。

我在这里的例子：http: [//freeskateboardsticker.com/news/authors.php](http://freeskateboardsticker.com/news/authors.php)

我已经多次重写脚本，但我似乎无法正确显示行和列并且仍然保持分页完好无损。

以下是我的脚本，任何建议将不胜感激。

```
<?php include_once(realpath("templates/top.php")); ?>
<?php include_once(realpath("templates/$templates/mid1.php")); ?>

<?php
$page = @$_GET["page"];
$start = @$_GET["start"];

if (!is_numeric($page) || $page < 1)
    $page = 1;

if ($page == 1)
    $start = 0;
else
    $start = ($page * $authorsPerPage) - $authorsPerPage;

$aResult = mysql_query("select pk_alId, alEmail, alFName, alLName, alBio, alDateJoined from tbl_AdminLogins order by alFName, alLName limit $start, $authorsPerPage");
$numRows = mysql_num_rows(mysql_query("select pk_alId from tbl_AdminLogins order by alFName, alLName"));

if ($numRows > 0) {
    ?>
    <!-- Start Authors -->
    <div align="center">
        <center>
            <TABLE WIDTH="86%" BORDER="0" CELLSPACING="0" CELLPADDING="0"> 
                <TR> 
                    <TD WIDTH="100%" HEIGHT="20" COLSPAN="2" ALIGN="right" class="BodyText" VALIGN="top"><FONT COLOR="#0B75AF"> <?PHP
    if ($page > 1)
        $nav .= "<a href='authors.php?page=" . ($page - 1) . "'><span class='Link1'><u>&#171; Prev</u></span></a> | ";
    for ($i = 1; $i <= ceil($numRows / $authorsPerPage); $i++)
        if ($i == $page)
            $nav .= "<a href='authors.php?page=$i'><span class='Link4'><b>$i</b></span></a> | ";
        else
            $nav .= "<a href='authors.php?page=$i'><span class='Link1'>$i</span></a> | ";

    if (($start + $authorsPerPage) < $numRows && $numRows > 0)
        $nav .= "<a href='authors.php?page=" . ($page + 1) . "'><span class='Link1'><u>Next &#187;</u></span></a>";

    if (substr(strrev($nav), 0, 2) == " |")
        $nav = substr($nav, 0, strlen($nav) - 2);
    echo $nav . "<br>&nbsp;";
    ?></FONT>
                    </TD> 
                </TR> 
            </TABLE>
    <?php while ($aRow = mysql_fetch_array($aResult)) { ?>
                <div align="center"><center>
                        <TABLE WIDTH="720" CELLSPACING="0" CELLPADDING="0" BORDER="0"> 
                            <TR> 
                                <TD WIDTH="185"> <?php if ($showAuthorImages) { ?><img src="imageview.php?what=getAuthorPic&authorId=<?php echo $aRow["pk_alId"]; ?>">&nbsp;<?php } ?></TD> 
                                <TD WIDTH="5" VALIGN="top"> </TD> 
                                <TD WIDTH="530" VALIGN="MIDDLE"><SPAN CLASS="BodyHeading1"><?PHP echo $aRow["alFName"]; ?></SPAN>
                                    <BR><span class="Text1"><?php echo $aRow["alBio"]; ?></span><br></TD> 
                            </TR> 
                            <TR> 
                                <TD COLSPAN="3">  </TD> 
                            </TR> 
                        </TABLE>
                    </center></div>
    <?php } ?>
            <div align="center">
                <center>
                    <table width="96%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td width="100%" height="20" colspan="2" align="right" valign="top">
                                <SPAN CLASS="Text4"><?php echo $nav . "<br>&nbsp;"; ?></SPAN>
                                <br>&nbsp;
                            </td>
                        </tr>
                    </table>
                </center>
            </div>
            <!-- End Authors -->
            <?php
        } else {
            // No authors found in the database
            ?>
            <!-- StartAuthors -->
            <div align="center">
                <center>
                    <table width="96%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td width="100%" colspan="2" bgcolor="#FFFFFF" height="21">
                                <span class="BodyHeading">
                                    <br>No Authors Found
                                </span>
                                <span class="Text1">
                                    <br><br>
                                    No authors were found in the database. Please use
                                    the link below to return to our home page.
                                    <br><br>
                                </span>
                                <a href="index.php">Return Home</a>
                            </td>
                        </tr>
                    </table>
                </center>
            </div>
            <!-- End Authors -->
            <?php
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:00:52.963

将循环移动到表内，每次迭代创建一个新行，而不是一个新表：

```
<div align="center">
    <center>
        <TABLE WIDTH="720" CELLSPACING="0" CELLPADDING="0" BORDER="0"> 
            <?php while ($aRow = mysql_fetch_array($aResult)) { ?>
                <TR> 
                    <TD WIDTH="185"> <?php if ($showAuthorImages) { ?><img src="imageview.php?what=getAuthorPic&authorId=<?php echo $aRow["pk_alId"]; ?>">&nbsp;<?php } ?></TD> 
                    <TD WIDTH="5" VALIGN="top"> </TD> 
                    <TD WIDTH="530" VALIGN="MIDDLE"><SPAN CLASS="BodyHeading1"><?PHP echo $aRow["alFName"]; ?></SPAN>
                        <BR><span class="Text1"><?php echo $aRow["alBio"]; ?></span><br></TD> 
                </TR> 
                <TR> 
                    <TD COLSPAN="3">  </TD> 
                </TR> 
            <?php } ?>
        </TABLE>
    </center>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:43:55.380

1.  不要使用字体标签，它已被弃用
2.  br /> 不是 br>
3.  如果您正在写作，则将所有其他标签也写为小写
4.  使用一些 MySQLi 库（PDO 等）
5.  不要将 center 和 div 与 align center 标签放入 while 循环
6.  在 while 循环中构建表行，而不是每个作者一个表（表在 while 之前开始，表在 while 循环之后结束，在 while 内只保留 tr/td 生成）

# android - XML布局Android中的动态标题

> ID：13075057
> 
> 赞同：0
> 
> 时间：2012-10-25T18:38:18.987
> 
> 标签：android, layout, title

在我的应用程序中，我从 xml 代码中获取标题，因此我在 ArrayList 中有标题，并且可以将它们设置为 XML 布局中的标题栏！但是正如您在图片中看到的那样，由于字数或大小的原因，它没有正确显示……我想要***这个大小***的标题，但顺序正确，将它显示为一半没问题！那么实际上我如何更改 XML 代码以使标题居中且大小相同？

![在此处输入图像描述](../Images/315ba59d0dd0ae60ea49aa5b71dc6617.png)

这是我的 XML 代码：

```
<ImageView
    android:id="@+id/headerBar"
    android:background="@drawable/header"
    android:contentDescription = "@string/headerBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/navigation"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:paddingBottom="10dp"
    android:gravity="center"
    android:text="@string/naviText"
    android:textColor="#FFFFFF"
    android:textSize="20dp"
    android:textStyle="bold" />

<ImageView
    android:id="@+id/backButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_marginLeft="14dp"
    android:paddingBottom="10dp"
    android:background="@drawable/back1"
    android:contentDescription="@string/backBtn" /> 
```

**导航**用于标题栏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:12:55.620

包含的 ViewGroup 是什么？框架布局？

无论如何，我会考虑另一种方法。我会更倾向于线性布局（水平）或相对布局等顶级布局。使用标题图像作为其背景，然后将分隔线放在其下方。这样，您可以 wrap_content 您的 TextView

# php - 在PHP中使用reg ex查询MYSQL

> ID：13075058
> 
> 赞同：1
> 
> 时间：2012-10-25T18:38:22.113
> 
> 标签：php, mysql, regex

我正在尝试使用正则表达式查询 MYSQL 数据库。我正在寻找具有此模式 1234X32X12 的列下的值。

我写了一些伪代码，但我不熟悉正则表达式，所以我希望有人能帮助我。

**代码：**

```
if ($transposed_array[$i][0] starts with number)
    {
        $sid = regex something /^[0-9]*/
        $gid = regex something /X[0-9]*X/
        $gid = remove first and last character from $gid
        $qid = regex something /[0-9]*$/

        $question_text = mysql_query("select question from table where sid = ".$sid." and gid = ".$gid." and qid = ".$qid." limit 1");
        $transposed_array[$i][0] = $question_test
    } 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:40:35.420

MySQL 在其 SQL 命令中直接支持正则表达式匹配，请查看[其手册](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)：

```
select col from table where col regexp '^h'; 
```

（[在 sqlfiddle 看到这个](http://sqlfiddle.com/#!2/7e992/1/0)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:41:34.267

我建议阅读[Mysql-Manual](http://dev.mysql.com/doc/refman/5.0/en/regexp.html)的相应部分，该部分非常详细地介绍了如何执行正则表达式搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:42:00.490

可以参考`mysql`的正则表达式匹配函数。

[http://dev.mysql.com/doc/refman/5.0/en/regexp.html](http://dev.mysql.com/doc/refman/5.0/en/regexp.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:45:00.657

如果它是一个 X 你正在分裂，那么这会做：

```
$var = "1234X32X12";

$bits = explode("X", $var);

var_dump( $bits);

array
  0 => string '1234' (length=4)
  1 => string '32' (length=2)
  2 => string '12' (length=2) 
```

但我觉得 X 可以是任何字母字符，是吗？

# mysql - 为 Mysql 创建自定义库

> ID：13075061
> 
> 赞同：-2
> 
> 时间：2012-10-25T18:38:26.910
> 
> 标签：mysql, sql, customization

我的问题很简单。由于Mysql是开源的，所以我们可以为mysql创建一个库文件或修改mysql现有的lib文件。例如，我想将“INNER JOIN”的名称更改为“INSIDE JOIN”。

问题 1 > 我们可以这样做吗？

问题2>如果是，查找和编辑mysql lib文件，编译并保存它，重新启动mysql服务或参考步骤的步骤是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:44:03.797

我建议注册下一个[SQL 标准委员会](http://en.wikipedia.org/wiki/SQL:2011)并提交更改请求。然后，当 SQL:2020 标准推出时，MySQL 将为您实施此更改，您将拥有您想要的。

# sql - SQL Server 2008 中随机排序的 SQL 查询结果分页

> ID：13075066
> 
> 赞同：0
> 
> 时间：2012-10-25T18:38:36.397
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试在我的网站上实现从数据库表返回结果的页面的分页。

目前，它以随机顺序返回所有行。但是，随着我的数据库不断增长，我想对这些结果进行分页，而不是在一页上显示它们。但是，我不想仅仅为了显示 20 条记录而返回所有结果。根据页面的不同，我只想从数据库中获取 20 条相关记录。

我正在学习本教程：[教程](http://www.mikesdotnetting.com/Article/150/Web-Pages-Efficient-Paging-Without-The-WebGrid "教程")

但是，我不能使用带有`OFFSET`子句的查询，因为托管使用 SQL SERVER 2008。（我相信它是在 2012 年推出的）。

我尝试按照这个[问题](https://stackoverflow.com/questions/187998/row-offset-in-sql-server "问题")的答案，但我希望结果是随机顺序的，我不能`ORDER BY`在派生表上做一个......所以我有点卡住了想法！

有什么帮助吗？谢谢！

这是我目前拥有的：

```
 SELECT Title, Filename, PhotoURL, Orientation, FolderName, SetURL, RowNum
      FROM (
            SELECT  p.Title, p.Filename, p.URL AS PhotoURL, p.Orientation, s.FolderName, s.URL AS SetURL, ROW_NUMBER() OVER (ORDER BY p.PhotoID) AS RowNum
          FROM  Photos p
                LEFT OUTER JOIN SetPhotos sp
                    ON sp.PhotoID = p.PhotoID
                LEFT OUTER JOIN [Sets] s
                    ON s.SetID = sp.SetID
         WHERE  p.Hide = 0
      ORDER BY  NEWID()
        ) AS PaginatedPhotos
 WHERE  PaginatedPhotos.RowNum BETWEEN 0 AND 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:18:42.767

1.  将整数列“订单”添加到您的表中
2.  编写一个代码，用唯一的随机数填充所有行中的该列
3.  不时运行此代码以打乱您的行
4.  按“顺序”排序时照常进行分页

请记住，如果您在某人分页的中间随机排列行，则相同的行可能会出现在不同的页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:52:56.503

只需选择`TOP(pagesize)`. 由于您的订单是随机的，因此请求 page=2 不会导致显示第 1 页的*原始*结果的第 2 页。换句话说，当订单是*随机的并且**每次都*更改时，第 1 页对于任何请求的页面始终是正确的。

# regex - EXCEL/VBA：列标题和值偏移，如何使它们同步

> ID：13075067
> 
> 赞同：0
> 
> 时间：2012-10-25T18:38:37.610
> 
> 标签：regex, excel, vba, vlookup

我正在使用来自外部源的输出文件 (CSV) - 用于进行数据抓取。

但是，“报废”的网页没有相同的精确模式，因此在输出文件（Excel）中，我有偏移的列。幸运的是，这些值包含标题的名称，所以我正在寻找解决“偏移”问题的解决方案。

PS：有些行是偏移的，有些不是。偏移量可以是 1、2 或更多单元格，所以我不能这样做： value(i+1) = i 因为没有逻辑

[在此处](https://www.dropbox.com/s/omnu1452pmv4o98/SORTcannodale2013.csv)下载文件，或在此处下载相同的信息：

```
FRAME           BRAKES         SADDLE         WHEELS          etc….
brakes: info1   saddle:info1   wheels:info1     
frame:info2     brakes:info2   saddle:info2   wheels: info2 
brakes: info3   saddle:info3   wheels:info3 
```

我不知道 vlookUp 结合一些正则表达式是否可以解决问题，

你有什么建议？

[编辑：在此处](https://www.dropbox.com/s/omnu1452pmv4o98/SORTcannodale2013.csv)下载文件

VBA 代码

```
Option Explicit

Sub test()
Dim Titles As Variant
Dim Data As Variant
Dim Dataline As String
Dim NumDataPoints As Long
Dim FirstTitle As String
Dim WhichTitle As Long
Dim Offset As Long
Dim rowcount As Long

Open "SORTcannodale2013.csv" For Input As #1

Line Input #1, Dataline

Titles = Split(Dataline, ",")
For Offset = 0 To UBound(Titles)
    Cells(1, Offset + 1) = Titles(Offset)
Next

rowcount = 2
'While Not EOF(1)
    Line Input #1, Dataline
    Data = Split(Dataline, Chr$(34) & "," & Chr$(34))

    FirstTitle = LCase(Left(Data(0), InStr(Data(0), vbLf) - 1))
    For WhichTitle = 0 To UBound(Titles)
        If Titles(WhichTitle) = FirstTitle Then Exit For
    Next
    For Offset = WhichTitle To UBound(Titles)
        Cells(rowcount, Offset + 1) = Data(Offset - WhichTitle)
    Next
    rowcount = rowcount + 1
'Wend

Close #1

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:38:39.010

我能想到的最快方法是读取 CSV 文件，然后自己将其写到电子表格中。

我阅读了第一行以获得标题。

然后我阅读了第二行，并检查了第一条数据。然后我将其与标题进行比较以获得我的偏移量。

然后我使用我拥有的偏移量写出数据

遍历文件直到我到达最后，然后退出。

这将始终开始在当前工作表上的 A1 中写入。我会把它作为一个练习让它在其他地方写

```
Option Explicit

Sub test()
Dim Titles As Variant
Dim Data As Variant
Dim Dataline As String
Dim NumDataPoints As Long
Dim FirstTitle As String
Dim WhichTitle As Long
Dim Offset As Long
Dim rowcount As Long

Open "test.csv" For Input As #1

Line Input #1, Dataline
Titles = Split(Dataline, ",")
For Offset = 0 To UBound(Titles)
    Cells(1, Offset + 1) = Titles(Offset)
Next

rowcount = 2
While Not EOF(1)
    Line Input #1, Dataline
    Data = Split(Dataline, ",")
    FirstTitle = UCase(Left(Data(0), InStr(Data(0), ":") - 1))
    For WhichTitle = 0 To UBound(Titles)
        If Titles(WhichTitle) = FirstTitle Then Exit For
    Next
    For Offset = WhichTitle To UBound(Titles)
        Cells(rowcount, Offset + 1) = Data(Offset - WhichTitle)
    Next
    rowcount = rowcount + 1
Wend

Close #1

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T02:19:23.037

没有真正的理由在这里编写自己的 CSV 导入函数。上传到 DropBox 的文件具有用双引号括起来的字段，并且字段中的任何双引号都正确加倍。

将文件导入 Excel 非常简单：

```
Workbooks.OpenText Filename:="SORTcannodale2013.csv", _
    DataType:=xlDelimited, TextQualifier:=xlTextQualifierDoubleQuote, _
    ConsecutiveDelimiter:=True, Comma:=True 
```

标题行实际上并不包含所有可能值的条目。例如，“Rear Shock”和“Extras”在测试数据中，但未显示在标题行中。您应该识别所有可能的值并构建自己的包含所有这些值的标题行。

在每个数据条目中，我们有字段名称，然后是嵌入的换行符（ASCII 字符 10），然后是数据值。将条目拆分为字段名称和值只需要`Split`像以前一样使用函数作为`Chr$(10)`分隔符。

将数据转换为可用的工作表可以通过简单地硬编码每个字段名称（例如在`Dictionary`对象中）的列号、从每个条目中拆分字段名称、在字典中查找适当的列号并输出数据值来完成到相应的单元格。

如果您将持续需要处理这些数据，那么花时间将其转换为更标准化的格式（例如 XML）可能是值得的。数据中没有任何内容特别适合在 Excel 中处理。要将其转换为 XML，您需要做更多的工作来转义数据中的某些字符。如果您随后需要使用 Excel，那么导入 XML 数据就很容易了

# c# - 使用 imageresizer.dll 调整图像大小后如何将内容类型保持为 png 而不是 x-png

> ID：13075069
> 
> 赞同：-1
> 
> 时间：2012-10-25T18:38:40.057
> 
> 标签：c#, html, web-applications, imageresizer

我在我的 C# 应用程序中使用图像大小调整来调整 png 图像的大小（[http://imageresizing.net/](http://imageresizing.net/)上的 imageresizer.dll ）。我注意到当 png 图像调整大小时，它们会转换为 x-png 如果我直接转到图像而不调整大小，则检查标题 Content-Type: = image/png (This is correct type) {server host}/Content/ VevoImages/video/2109BE0486B5D47906280AB28F36FE2D.png 将调整大小字符串添加到上述 URL 后，图像会调整大小，但内容类型会发生变化.. Content-Type: = image/x-png {server host}/Content/VevoImages/video/2109BE0486B5D47906280AB28F36FE2D.png ?width=156&height=88&crop=auto

如何在图像调整大小后强制调整图像大小以保持相同的内容类型... Content-Type: = image/png？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:54:49.127

下载最新版本。在当前版本中，`/Core/Plugins/Basic/DefaultEncoder.cs:`

```
if (ImageFormat.Png.Equals(format)) 
    return "image/png"; //Changed from image/x-png to image/png on May 14, 2011, per http://www.w3.org/Graphics/PNG/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:30:19.803

## 您使用的是非常旧版本的 ImageResizer，可能是 V2.1 (2010)

对于向后兼容的升级，您可以切换到 V2.8：http: [//imageresizing.net/releases/2-8](http://imageresizing.net/releases/2-8)

但是，请注意，V2.8 已于 2011 年 7 月终止，并且存在未修补的内存泄漏（不过很小）。

升级到 V3[需要几个步骤](http://imageresizing.net/docs/2to3/guide)，但更快、更可靠。您只需更改 web.config 中的几个字符串。

# java - 来自 UNIX 的关闭挂钩

> ID：13075070
> 
> 赞同：5
> 
> 时间：2012-10-25T18:38:40.403
> 
> 标签：java, unix, shutdown-hook

我试图让我的 Java 程序在我的 unix 服务器上正常退出。我有一个 jar 文件，我从早上的 cron 作业开始。然后在晚上，当我想关闭它时，我有一个 cron 作业，它调用一个找到 PID 的脚本并调用`kill -9 <PID>`. 但是，当我以这种方式终止时，似乎没有激活我的关闭挂钩。我也试过`kill <PID>`（没有-9），我遇到了同样的问题。如何确保调用关闭挂钩？或者，也许有更好的方法可以每天杀死我的进程。

```
class ShutdownHook {

    ShutdownHook() {}

    public void attachShutDownHook() {

        Runtime.getRuntime().addShutdownHook(new Thread() {
        @Override
        public void run() {
                System.out.println("Shut down hook activating");
         }
        });
        System.out.println("Shut Down Hook Attached.");
    }   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T18:42:11.623

您可以在 Unix 上使用这样的代码来捕获 SIGINT (#2) 信号：

```
Signal.handle(new Signal("INT"), new SignalHandler() {
      public void handle(Signal sig) {
      // Forced exit
      System.exit(1);
   }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T18:43:24.607

`kill -9 <pid>`发出`KILL`信号。该信号不能被程序截获。

如果您调用`kill <pid>`，将`TERM`发送信号 (15)。在这种情况下，JVM 将捕获信号并执行关闭挂钩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T22:22:43.627

这与 JVM 捕获/接收的信号无关，而是与 Gnome 可怕的关闭过程有关，这显然需要合作，不要绝对拉屎（而且 jdk 没有用于此的 api ）。如果您想看到更糟糕的后果，请尝试运行：

```
dbus-monitor --profile --session type='method_call',interface='org.gnome.SessionManager' 
```

在外壳上，然后注销或重新启动：它将使 gnome-shell 崩溃并挂起计算机，直到您登录 TTY 并命令重新启动。也许 kdbus 会在这种情况下解决这个问题，也许不会。我唯一知道的是，使用 AWT（不是命令行）的 java 应用程序上的shutdownhooks 永远不会在 GNOME3 上运行它的shutdownhooks。实际上，VM 将始终以可能来自本机代码的非零代码（失败）退出。至少它不会挂起，尽管这使得关闭挂钩非常无用（我一直在尝试通过使用 dbus-monitor 来解决问题，但是从我给出的示例中可以看出，它也有点太危险了）。

# css - 中间有标签的复选框

> ID：13075077
> 
> 赞同：1
> 
> 时间：2012-10-25T18:39:07.797
> 
> 标签：css

我需要弄清楚如何将标签文本放在复选框按钮旁边。我需要复选框按钮中间的文本。我总是将复选框放在文本上方或下方。很难在中间找到它。当我在一个浏览器中固定到中间时，在另一个浏览器中它并不完全在中间。总是有一两个像素会破坏它。

这是小提琴 [http://jsfiddle.net/JhPHm/](http://jsfiddle.net/JhPHm/)

```
<style>
.field input
{
    margin: 0;
    padding: 0;
    vertical-align: top;
}
.field label
{
    margin: 0;
    padding: 0;
    vertical-align: top;
    font: normal 12px/14px arial;
}
</style>

<div style="padding: 30px;">

<div class="field">
    <label for="x"><input type="checkbox" id="x" name="x" value="1" /> Text in the middle</label>
</div>

</div> 
```

请帮助我在所有浏览器中获取中间文本。这里有一张不同的图片：http: [//img708.imageshack.us/img708/5410/checkbox.png](http://img708.imageshack.us/img708/5410/checkbox.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:37:46.353

我解决这个问题的方法是使用相对定位，如下所示：

```
input[type="radio"], input[type="checkbox"] {
    cursor: pointer;
    line-height: normal;
    margin: 0px;
    position: relative;
    top: -3px;
} 
```

例如，如果要将它们向上移动 3 个像素。就像您在上面指出的那样，您可能会在不同的浏览器中得到不同的结果。

在这种情况下，Firebug 或 Chrome 开发者工具会帮到你很多。您可能从其他地方继承了一些垃圾。就像上面的示例一样，我将边距设置回 0px，因为 CSS 结构中更高（且不可避免）的东西在所有输入上设置了 4px 的边距并搞砸了我。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:44:15.660

而不是`vertical-align:top`，尝试`vertical-align:middle`。它可能会有所帮助，但输入元素因在浏览器中不均匀而臭名昭著。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:37:33.300

对齐输入元素很困难，有时几乎是不可能的。

如果问题在于它在旧浏览器中的行为不端，请考虑使用这些浏览器浏览网页的人会在更多地方偶然发现未对齐的复选框，而不仅仅是您的地方。他们正在浏览网页，而网页在他们周围摇摇欲坠。他们不会在意，因为他们要么知道他们使用的是旧浏览器，要么他们没有注意到，因为所有网站都显示这些小故障。

如果您必须为各种浏览器添加各种调整和修复以获得可接受的最终结果，还要考虑所有这些调整会增加 CSS 的大小和复杂性，使其更难在未来。

最后对我来说，这些东西取决于观众、预算，显然还有复选框的数量。;-)

# sql - 在 SQL 表的文本字符串中查找换行符？

> ID：13075079
> 
> 赞同：41
> 
> 时间：2012-10-25T18:39:11.260
> 
> 标签：sql, sql-server, sql-server-2008

我试图在 SQL 表的列中查找换行符和回车符，但我不确定语法。

我试过了：

```
SELECT foo FROM test
WHERE foo LIKE CHAR(10) 
```

即使我知道该表应该返回结果，我也没有得到任何结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-25T18:40:42.803

```
SELECT foo FROM test WHERE foo LIKE '%' + CHAR(10) + '%' 
```

**编辑：**要查找所有各种类型的行尾，您可能应该同时检查两者：

```
SELECT foo FROM test WHERE foo LIKE '%' + CHAR(10) + '%'
                        OR foo LIKE '%' + CHAR(13) + '%' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-25T18:44:01.487

```
SELECT foo FROM Table WHERE foo LIKE '%' + CHAR(13)+CHAR(10) + '%' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T18:43:15.153

尝试

```
 SELECT foo FROM test WHERE foo LIKE '%'+ CHAR(10)+'%' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-03T19:25:05.333

尝试

```
SELECT foo FROM test WHERE foo LIKE CONCAT('%', CHAR(10), '%') 
```

# algorithm - 具有最大兴趣范围的 Levenshtein-Damerau 距离计算

> ID：13075087
> 
> 赞同：1
> 
> 时间：2012-10-25T18:39:54.880
> 
> 标签：algorithm, optimization, levenshtein-distance, edit-distance

考虑在[此 Wiki 页面](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)上建议的 LD 距离计算算法的**C#**实现。

如果已经超过某个（预定义的）距离阈值，我想扩展它以中止计算过程的能力。

这个**概念**优化方法是由 Alex Martelli 在[这个线程](https://stackoverflow.com/questions/3183149/most-efficient-way-to-calculate-levenshtein-distance)上提出的。

问题是：如何在建议的 C# 解决方案上实现此解决方案？{ 旁注：函数应该返回找到的最大距离，直到它返回。}

非常感谢。

# sql - 从三个表中相同列的联合中选择

> ID：13075090
> 
> 赞同：2
> 
> 时间：2012-10-25T18:40:08.483
> 
> 标签：sql, union, vectorwise

我有三个表，**A**，**B**和**C**。它们都保存不同的数据，但有一些共同的列。

如果**A**、**B**和**C**都有列**C1**和**C2**那么我如何使用可能在 3 个表中的任何一个中的**C1**值来查找特定的**C2**值？

 **基本上，我想做一个简单的查找，但让它作用于 3 个表的联合 - 我宁愿不使用视图来实现这一点。

请注意，这是一个**Ingres Vectorwise**数据库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T18:48:51.493

您可以通过合并`from`子句中的表来做到这一点：

```
select c2
from ((select c1, c2 from a) union all
      (select c1, c2 from b) union all
      (select c1, c2 from c)
     ) t
where c1 = <your value> 
```

我`union all`出于性能原因使用过。如果您担心重复值，`union`请`distinct`在`select`.

这是标准 SQL，应该适用于任何数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:48:59.187

我不知道您所说的“使用 C1 值的特定 C2 值”是什么意思，但是，无论您对视图的查询是什么，重复该查询并合并结果，

```
SELECT *
FROM A
WHERE C2 = ?
UNION ALL
SELECT *
FROM B
WHERE C2 = ?
UNION ALL
SELECT *
FROM C
WHERE C2 = ? 
```

（视图是一个标准的 SQL 功能，可以让您编写的任何查询更容易。）**

# php - 从我的 URI 的开头和结尾去除“/”

> ID：13075092
> 
> 赞同：1
> 
> 时间：2012-10-25T18:40:18.043
> 
> 标签：php

所以我有一个像 /intelliship/ 这样返回的 URI，我需要从该 URI 中删除开始斜杠和尾随斜杠。

尝试（失败）代码：

```
<?php 
$value = $_SERVER['REQUEST_URI'];
function __construct($value){
    if(strpos($value,'/')==FALSE){
        return trim(substr(strrchr($value, ' '), 1 ));
    }else{
        return trim(substr($value, strpos($value,'/')),'/');
    }

    $value = ucwords($value);
}
?> 
```

这不会去除任何斜线，并且是非常草率的代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T18:42:22.753

为什么不只是：

```
$value = trim($value, "/"); 
```

不需要正则表达式或检查第一个或最后一个字符是什么。

# jquery - Spring Jquery Ajax Post 上的 400 错误请求

> ID：13075101
> 
> 赞同：8
> 
> 时间：2012-10-25T18:40:36.610
> 
> 标签：jquery, spring-mvc, http-post

我在这个 POST 请求上收到 400 错误请求。知道这里有什么问题吗？日志在[这里](http://db.tt/0Dtl7PWu)。

控制器

```
@Controller
public class AjaxController {
    @RequestMapping(value="/addKeys", method=RequestMethod.POST, consumes="application/json; charset=UTF-8")
    public ResponseEntity<String> addKeys(@RequestParam(value="keys") ArrayList<Keys> keys){
        System.out.println("::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"+keys);
    }
} 
```

上下文-Servlet.xml

```
<beans>
    <mvc:annotation-driven />
    <context:component-scan base-package="com.canon.fw.controller" />
    <bean id="defaultViews" class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
</beans> 
```

阿贾克斯

```
tmpList = '[{"key":"camera","label":"Camera"},{"key":"mobile","label":"Mobile"}]';
$.ajax({
  type: 'POST',
  url: ctx+'/ajx/addKeys',
  data: JSON.stringify({"keys": tmpList }),
  success: function(r){
      if(r.model.status=='success'){
          debugger;
          //glist.push(elem.key);
          //addToList(elem.key, elem.label);
          highlightInfoDisc();
      }
  },
  dataType: 'json',
  contentType: 'application/json'
}); 
```

萤火虫 - 网址

```
http://localhost:8080/Di/ajx/addKeys 
```

Firebug - 响应标头

```
Cache-Control   must-revalidate,no-cache,no-store
Content-Length  1384
Content-Type    text/html; charset=iso-8859-1
Server  Jetty(6.1.26) 
```

Firebug - 请求标头

```
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Content-Length  74
Content-Type    application/json; charset=UTF-8
Cookie  JSESSIONID=7mymobst47ig1s7uqy2z1fvx4
Host    localhost:8080
Referer http://localhost:8080/Di/tiles/entNews.htm
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1
X-Requested-With    XMLHttpRequest 
```

萤火虫-来源

```
{"keys":[{"key":"canon","label":"Canon"},{"key":"ricoh","label":"Ricoh"}]} 
```

Firebug - 响应

```
"NetworkError: 400 Bad Request - http://localhost:8080/Di/ajx/addKeys" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T18:57:25.550

您正在发布 JSON，而不是表单数据，但您正在尝试将其`ArrayList<Keys>`作为表单参数读取。

尝试更改您的方法签名：

```
public ResponseEntity<String> addKeys(@RequestParam(value="keys") ArrayList<Keys> keys){ 
```

到

```
public ResponseEntity<String> addKeys(@RequestBody Keys[] keys){ 
```

这可能不起作用，因为您的 JSON 有一个对象，该对象的`keys`属性是键列表。因此，您可以尝试将您的 ajax 发布数据更改为类似

```
data: JSON.stringify(tmpList) 
```

这样您就只是发布列表，而不是将其包装在另一个具有 keys 元素的对象中。

# android - 如何使用json解析字符串

> ID：13075108
> 
> 赞同：-3
> 
> 时间：2012-10-25T18:40:49.417
> 
> 标签：android

这是 jsonArray

```
 [{"0":"4363","record_id":"4363","1":"54621681","shop_id":"54621681","2":"25","category_id":"25","3":"","category1":"","4":"Dress 10012","product":"Dress 10012","5":"5000","price":"5000","6":"My Description\r\nMy Description\r\nMy Description\r\nMy Description","desc":"My Description\r\nMy Description\r\nMy Description\r\nMy Description","7":"http:\/\/www.shoppingmall.pk\/images\/menuimages\/54621681\/4363","products_image":"http:\/\/www.shoppingmall.pk\/images\/menuimages\/54621681\/4363","8":"1","status":"1","9":null,"external_link":null}] 
```

[我必须在这个链接http://shops.alpha-trend.com/mobileapp/productinfo.php?productId=4363&function=GetProductInfo](http://shops.alpha-trend.com/mobileapp/productinfo.php?productId=4363&function=GetProductInfo)上解析 json 数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:44:58.790

使用[JSONArray](http://developer.android.com/reference/org/json/JSONObject.html)。

```
try {
  JSONArray json = new JSONArray(json_string);
  json.getJSONObject(0).getString("1"); // == "54621681"
catch (JSONException e) {
  // ....
} 
```

# xcode - 无论如何要读取 OS X Mountain Lion 上的性能计数器吗？

> ID：13075113
> 
> 赞同：28
> 
> 时间：2012-10-25T18:41:09.447
> 
> 标签：xcode, performance, macos, instruments, performancecounter

Shark 是 Apple 的分析器，可让您配置自定义性能计数器，但 OSX Mountain Lion 不再支持它，因为它无法运行 32 位内核。Instruments.app，Apple 的 Shark 替代品，似乎不支持读取性能计数器，例如 L1 缓存命中/未命中**。无论如何在 OS X 上实际设置和读取性能计数器？即使没有应用程序，是否有一些用户级 API 可以做到这一点？

**Instruments.app 似乎确实有一个性能计数器界面，但在我的 Retina MacBook Pro 上，PM 事件窗口没有列出任何事件，并显示“设备：未知”。Instruments 还有其他替代品吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-25T19:33:15.050

**是的。**它在那里，但很难找到并且使用起来很笨拙（ver.4.5）。

*   发射仪器。
*   巫师迎接你
*   为 OS X 选择“空白”模板
*   按`cmd`+`L`显示库
*   将“Counters”工具添加到您的 Instruments 文档中
*   按`cmd`+ `shf`+ `P`-- 您将看到 PM Events 浮动窗口。
*   让我们评估“执行的划分操作”——将“执行的划分操作”添加到 PM 事件窗口的搜索字段。
*   现在将“已执行的划分操作”的“状态”设置为“可见”
*   现在回到主文档窗口，按`cmd`+`I`显示“计数器”工具的信息弹出框。
*   按下`+`按钮
*   将新计数器的事件设置为“执行除法操作”
*   开始采样...
*   结束采样...

您将在 Instruments 的表格列中看到结果。当然，你可以记录很多事件——所以找到你感兴趣的 L1 缓存事件并添加它们而不是分割。

*还要为系统冻结做好准备（在写这篇文章时发生了一次）。*

# css - 参考 CSS 中的背景图像 - IIS 中的应用程序 MVC 3 ASP.NET

> ID：13075114
> 
> 赞同：3
> 
> 时间：2012-10-25T18:41:25.093
> 
> 标签：css, asp.net-mvc-3, layout

我有一个托管在 IIS 中的应用程序

![在此处输入图像描述](../Images/0aca44077b0c3ccee7cce8e8045a1c58.png)

但不能使用 CSS 文件中的*背景图像*

css 从布局中引用：

```
<link href="@Url.Content("~/Content/themes/NewStyleSUPERADMIN/style.css")" rel="stylesheet" type="text/css" /> 
```

在*style.css*中，我有：

```
background-image: url('/content/themes/NewStyleMeduimHarder/images/Bottom_texture.jpg'); 
```

或者

```
background-image: url('/content/themes/NewStyleMeduimHarder/images/Bottom_texture.jpg'); 
```

如何显示图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T18:49:36.517

使用相对路径。[部分`urls`相对于样式表被解析](http://www.w3.org/TR/REC-CSS1/#url)：

```
background-image: url(images/Bottom_texture.jpg); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:51:14.147

在CSS中你应该只使用`url(../images/Bottom_texture.jpg)`

据我所知，您还应该将 url 更改为 css`@Url.Content("~/Content/themes/NewStyleSUPERADMIN/style.css")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T04:20:03.263

网址应该是

```
url(themes/NewStyleMeduimHarder/images/Bottom_texture.jpg) 
```

关于内容文件夹。

# php - php update 没有更新数据库

> ID：13075115
> 
> 赞同：0
> 
> 时间：2012-10-25T18:41:29.530
> 
> 标签：php, html, mysql, phpmyadmin

这是我的 html 表单的代码：

```
<!DOCTYPE html>
<head>
<title> Question </title>

<style type = "text/css">

body {
font-family:cursive;
}

a:link {
text-decoration:none;
background-color:#D0D0D0;
color:#000000;
width:100px;
display:block;
text-align:center;
padding:4px;
}

a.visited {
text-decoration:none;
background-color:#D0D0D0;
color:#000000;
width:100px;
display:block;
text-align:center;
padding:4px;
}

a.active {
text-decoration:none;
background-color:#D0D0D0;
color:#000000;
width:100px;
display:block;
text-align:center;
padding:4px;
}

a:hover {
background-color:#686868;
color:#FFFFFF;
}

#title {
text-align:center;
}

</style>

</head>
<body>

<?php

session_start();

?>

<h1 id="title"> Question 1 </h1>

<br/>

<form action="q15.php" method="POST" >
<fieldset>
<legend>Who wrote the music we all recognise from the Paralympics?</legend>
<p>
<input 
type="checkbox"
value="your friend"
name="answer"
/>Your Friend
</p>

<p>
<input
type="checkbox"
value="public friend"
name="answer"
/>Public Friend
</p>

<p>
<input
type="checkbox"
value="your enemy"
name="answer"
/>Your Enemy
</p>

<p>
<input
type="checkbox"
value="public enemy"
name="answer"
/>Public Enemy
</p>

<p>
<input 
type="submit"
value="Submit"
/>
</p>
</fieldset>
</form>

</body>
</html> 
```

这是我的页面的代码，它将处理数据并更新一个数据库，其中的空格留空以便稍后填写（就像现在一样）

```
<body>

<h1 id="title"> Quiz </h1>

<?php

session_start();

$connection = mysql_connect("mysql15.000webhost.com", "a4987634_quiz", "********")
or die (mysql_error());

mysql_select_db("a4987634_quiz", $connection)
or die (mysql_error());

$fname = $_SESSION['fname'];
$lname = $_SESSION['lname'];
$id = $_SESSION['ID'];

$answer = $_POST['answer'];
$id = mysql_query("SELECT ID FROM users WHERE fname=$fname LIMIT 1");

if(isset($_POST['answer']) &&
$_POST['answer'] == 'public enemy')
{
?>

<h3 id = "correct"> Correct </h3>

<?php

$sqlcorrect = "UPDATE users SET q1 = correct WHERE ID = $ID LIMIT 1";

mysql_query($sqlcorrect);
(mysql_error());

}
else {

?>

<h3 id = "incorrect"> Incorrect </h3>

<?php

$sqlwrong = "UPDATE users SET q1 = 'wrong' WHERE ID = $ID LIMIT 1";

mysql_query($sqlwrong);
(mysql_error());

}

?>

</body>
</html> 
```

我可以完美地连接到数据库，它知道您何时得到正确或不正确的问题，但我的问题是当您尝试更新数据库时它不会这样做。有没有人有任何解决方案？也没有错误消息。这没有意义！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T18:44:30.877

您的查询有几个问题：

*   PHP 中的变量名区分大小写
*   更新查询可以有一个 LIMIT，但因为给出了一个 id，所以在这里没有意义。
*   更新字符串时，它们需要被引用。

当提供权利时，这应该有效`id`：

```
$sqlwrong = "UPDATE `users` SET `q1` = 'some text' WHERE `ID` = $id"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:45:47.483

```
$sqlcorrect = "UPDATE users SET q1 = 'correct' WHERE ID = $id"; 
```

除非正确的是另一个列名，否则您需要用单引号将字符串括起来。正如评论所说， $ID 可能是 $id 取决于您的意图。应该以任何一种方式定义

# java - 如何将 FTPClient.getModificationDate() 解析为 Java 日期

> ID：13075118
> 
> 赞同：0
> 
> 时间：2012-10-25T18:41:45.420
> 
> 标签：java

我想从 FTP 客户端中的文件中获取上次修改日期，而不下载该文件。这可以通过 FTPClient 类的 getModificationTime(String pathName) 方法来完成。但是这个方法返回一个格式为YYYYMMDDhhmmss的字符串，我得到的字符串是：213 20121023222739

我不明白前 3 个数字：“213”，这是什么意思？以及如何将其解析为日期格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:13:11.137

鉴于返回字符串中的第一个数字表示 FTP 返回代码，您可以这样解析日期：

```
String str = "213 20121023222739";
SimpleDateFormat format = new SimpleDateFormat("yyyyMMddhhmmss");
Date modifiedDate = format.parse(str.substring(str.indexOf(" "))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:52:22.770

似乎是 FTP 服务器返回码。参见[维基百科](http://en.wikipedia.org/wiki/List_of_FTP_server_return_codes)：

> 213 文件状态。

# php - mysql查询查找日期小于另一个日期

> ID：13075130
> 
> 赞同：0
> 
> 时间：2012-10-25T18:42:21.183
> 
> 标签：php, mysql, date

我试图检索一组将在接下来的 7 天内到期的 ID，并且我的一生无法让我的查询正常工作

```
 $target_date = date('Y-m-d', strtotime('+7 days'));
   $sql = "SELECT subscriptions.`id` FROM subscriptions WHERE date($target_date) <= expires AND cust_id =$_SESSION[uid]"; 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:47:28.627

如果您以大致与 MySQL 兼容的格式创建日期，则无需使用该`DATE`函数即可工作，只需将其作为字符串进行比较即可。

您的代码迫切需要一些适当的[SQL 转义](http://bobby-tables.com/php)来解决此问题，并且可能会在您的应用程序中出现令人担忧的大量其他问题。

在 PDO 中运行的查询`mysqli`大致如下所示：

```
$target_date = date('Y-m-d', strtotime('+7 days'));
$sql = "SELECT subscriptions.`id` FROM subscriptions WHERE ?<=expires AND cust_id=?"; 
```

然后，您可以调用适当的`bind_param`方法将正确的值链接到这些占位符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:01:20.763

这可以：

```
$target_date = date('Y-m-d', strtotime('+7 days')); 
```

因为它以与 MySQL 相同的方式构造日期`[YYYY-MM-DD]`

我已经切换了您的查询并将该`DATE()`功能应用于“过期”字段，而不是您`$target_date`不需要的。您的 expires 字段可能是`[YYYY-MM-DD HH:MM:SS]`格式，这可能是它不起作用的原因：

```
$sql = "
SELECT subscriptions.id 
FROM subscriptions 
WHERE DATE(expires) >= '$target_date' 
AND cust_id = '$_SESSION[uid]'"; 
```

回显`$sql`查询以查明它是否正确执行它并使用`or die(mysql_error());`告诉您它失败的地方。

如另一个答案中所述，也使用 SQL 转义（PDO 或 mysqli）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:03:02.163

你可以用 MySQL 做到这一点：

```
SELECT subscriptions.`id` FROM subscriptions WHERE date_add(curdate(),interval 7 day) <= expires AND cust_id =$_SESSION[uid] 
```

# javascript - 从外部 html 文件加载 handlebars.js 模板什么也没显示

> ID：13075132
> 
> 赞同：2
> 
> 时间：2012-10-25T18:42:22.690
> 
> 标签：javascript, html, handlebars.js, mustache

这个问题对我的 JS 技能有点延伸，所以我可能会像白痴一样解释它。

这是我从服务器获取 json 的 JavaScript，并尝试将其推送到模板中：

```
 //Server Interface Start
//Access the web api for The User:
var lucidServer = (function () {
    //global error handler
    $(document).ajaxError(function (event, xhr) {
        alert(xhr.status + " : " + xhr.statusText);
    });
    //client Calls
    var getClients = function (id) {
        return $.ajax(clientUrl + "/list/" + id)
    };
    var getClient = function (id) {
        return $.ajax(clientUrl + "/details/" + id)
    };

    //push them out to the world!
    return {
        getClients: getClients,
        getClient: getClient,
    };
}());
//Server Interface End

(function () {
    //list of clients
    var refreshClients = function () {
        lucidServer.getClients(1).done(showAllClients);
    };
    var showAllClients = function (templateInput) {
        var source;
        var template;
        var path = '../Templates/indexTemplates.html'
        $.ajax({
            url: path,
            cache: true,
            success: function (data) {
                source = data;
                template = Handlebars.compile(source);
                $('#clientListOutput').html(template(templateInput));
            }
        });
    };
    $(function () {
        refreshClients();
    });
}()); 
```

GetClients 工作正常并返回我期望的 Json 数据。当我检查 templateInput 时，它显示了我的期望。

这是外部模板：

```
<script id="clientList" type="text/html">

<div id="clients">
    {{#each client}}
                <span data-id="{{this.iD}}" />
    <div>
        <p>{{this.iD}}</p>
        <p>{{this.name}}</p>
    </div>
    {{/each}}
</div>
</script> 
```

我最终的目标是将我的所有模板保存在一个我可以通过脚本 ID 调用的 html 文件中，或者让每个模板都是我可以调用的自己的文件。当我运行此页面时，什么都没有显示，没有错误或任何东西。这是整个索引页面：

```
 <!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="../../Content/normalize.css">
    <link rel="stylesheet" href="../../Content/main.css">
    <script src="../../scripts/libs/modernizr-2.6.2.min.js"></script>
</head>
<body>
    <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->
    <section id="Application">
        <div id="clientListOutput">
        </div>
        <div id="clientCreateOutput">
        </div>
    </section>
    <footer>
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../scripts/libs/jquery-1.8.2.min.js"><\/script>')</script>
    <script src="../../scripts/plugins.js"></script>
    <script src="../../scripts/main.js"></script>
    <script type="text/javascript" src="../../Scripts/libs/handlebars.js"></script>
    <script>
        var freelancerUrl = '@Url.RouteUrl("ApiControllerAndIntegerId", new { httproute="", controller = "Freelancer"})';
        var clientUrl = '@Url.RouteUrl("ApiControllerAction", new { httproute="", controller = "Client"})';
        var projectUrl = '@Url.RouteUrl("ApiControllerAction", new { httproute="", controller = "Project"})';
        var storyUrl = '@Url.RouteUrl("ApiControllerAndIntegerId", new { httproute="", controller = "Story"})';
    </script>
    <script type="text/javascript" src="../../Scripts/serverInterface.js"></script>
</body>
</html> 
```

## 编辑

我稍微改变了模板的外观。通过在 Chrome 工具中调试 js，它告诉我在 showallclients 的 ajax 成功行中未定义“数据”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T18:54:24.277

您需要使用从 getClient 返回的数据调用模板。在您的示例中，showAllClients 的参数被成功回调中的参数所掩盖，因为您使用相同的名称（数据）。将 showAllClients 中的参数名称更改为其他名称，并将其传递给模板函数。

```
(function () {

        //list of clients
        var refreshClients = function () {
           $.when(lucidServer.getClients(1)).done(showAllClients);
        };
        var showAllClients = function (templateInput) {
            var source;
            var template;
            var path = 'Templates/indexTemplates.html'
            $.ajax({
                url: path,
                cache: true,
                success: function (data) {
                    source = data;
                    template = Handlebars.compile(source);
                    $('#clientListOutput').html(template(templateInput));
                }
            });
        };

        $(function () {

            refreshClients();
        });
    }()); 
```

编辑：

在模板中，您需要`this`在每个块内引用：

```
<div id="clients">
    {{#each client}}
                <span data-id="{{this.id}}">
                    <div>
                        <p>{{this.iD}}</p>
                        <p>{{this.name}}</p>
                     ...
                    </div>
        {{/each}}
</div> 
```

在您的示例中，您使用嵌套迭代器，我不确定是否支持。请阅读[如何在 Mustache.js 或 Handlebars.js 中使用嵌套迭代器？](https://stackoverflow.com/questions/9203858/how-do-i-use-nested-iterators-with-mustache-js-or-handlebars-js)或[Ember.js / Handlebars 嵌套每个迭代](https://stackoverflow.com/questions/11713833/ember-js-handlebars-nested-each-iterations)以采用不同的方法。

# php - 通过 PHP 具有重复键的 JSON 数据

> ID：13075143
> 
> 赞同：3
> 
> 时间：2012-10-25T18:43:09.110
> 
> 标签：php, json

当您想要一次添加多个条目时，Apache SOLR 需要一种古怪的 JSON 格式。（[http://wiki.apache.org/solr/UpdateJSON#Update_Commands——](http://wiki.apache.org/solr/UpdateJSON#Update_Commands)注意“添加”节点）

简而言之，我需要能够创建如下所示的 JSON：

```
{
   "key": "val 1",
   "key": "val 2"
} 
```

在 PHP 中，您可以轻松地创建一个数组，但是这个 JSON 结构需要一个对象，该对象具有两个显式不在数组中的同名键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:57:20.823

您将无法使用它来执行此操作，`json_encode`因为它不是有效的 JSON。（键空间冲突）

您将需要手动组装对象。

您可以考虑创建单个项目，然后使用`implode()`. 然后你可以预先和附加`{`and `}`。

这对我来说实际上会感觉更干净，然后破解 PHP 以使 json 编码工作。

**建议的替代方案**

我是 PHP 和 Solr 的 Solarium Project 的忠实粉丝。

批量添加并很容易在这里查看：[http ://wiki.solarium-project.org/index.php/V2:BufferedAdd_plugin](http://wiki.solarium-project.org/index.php/V2:BufferedAdd_plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-27T21:42:19.680

虽然`json_encode`不能直接这样做，但您可以解决它。试试这个：

```
$php_friendly_json = json_encode([
 "key1" => "val 1",
 "key2" => "val 2"
]);

$apache_weird_json = str_replace(["key1", "key2"], "key", $php_friendly_json); 
```

当然，一定要选择`key1`和`key2`，这样它们就不会出现在你的 JSON 值中！

# iphone - 缩放时，UIScrollview 子视图无法识别手势

> ID：13075147
> 
> 赞同：0
> 
> 时间：2012-10-25T18:43:30.020
> 
> 标签：iphone, ios, ipad, uiscrollview

我有一个滚动视图，我在其中添加了一个图像视图作为子视图。滚动视图的内容大小与图像视图的大小（宽度和高度）相同。滚动视图外有两个按钮。当我单击它们中的任何一个时，都会将一个小矩形视图作为子视图添加到图像视图中。添加后，用户可以将这个矩形视图拖到 imageview 上的任意位置。

这工作正常，直到我捏缩放滚动视图。在该`viewForZoomingInScrollView:`方法中，我返回图像视图并且缩放工作正常。但是在缩放视图中，当我尝试在矩形视图周围拖动时，它不会移动。它不再识别平移手势。知道为什么会这样吗？

谢谢

黑塔尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:11:29.457

根据您的最后评论，我建议尝试以下操作：

在您的`viewDidLoad`方法中添加以下内容：

```
for (UIGestureRecognizer *gr in self.scrollView.gestureRecognizers) {
    if ([gr isKindOfClass:[UIPanGestureRecognizer class]])
    {
        [gr requireGestureRecognizerToFail:self.dragGR];
    }
} 
```

其中 dragView 是你的矩形视图。

以下可能不是上述工作所必需的，但无论如何清理视图层次结构可能是一种好习惯：

添加一个普通的 UIView 作为具有相同框架的图像视图的超级视图，并将矩形视图添加为该新视图的子视图。在你`viewForZoomingInScrollView:`返回那个新观点。正如我在评论中所说，我不认为向 UIImageViews 添加子视图被认为是好的做法。但也许这只是我的意见:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T09:33:27.903

这应该也可以，并且稍微简洁一些：

`[self.scrollView.panGestureRecognizer requireGestureRecognizerToFail:self.myPanRecognizer];`

# perl - Perl Junit 测试用例错误

> ID：13075148
> 
> 赞同：-3
> 
> 时间：2012-10-25T18:43:30.520
> 
> 标签：perl, jenkins

我正在尝试执行测试用例。所以下面的代码写在我的构建脚本中。

```
cpanm TAP::Formatter::JUnit
prove --formatter TAP::Formatter::JUnit -lr t > testresults.xml 
```

从 jenkins 调用此构建脚本并添加构建后操作。我收到以下错误。

```
 **prove --formatter TAP::Formatter::JUnit -lr t
Can't load TAP::Formatter::JUnit at /var/local/maria/hudson/workspace/pigeon-build/target/bin/prove line 11**. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T21:43:55.433

您可以尝试使用 TAP::Harness:JUnit 代替，这就是我们从 jenkins 运行它的方式，我们让 jenkins 调用一个如下所示的脚本：

```
$harness = TAP::Harness::JUnit->new( xmlfile => 'output.xml' );

@tests = qw( t/test1.t t/test2.t ... );
$aggregator = $harness->runtests(@tests);

if(scalar($aggregator->failed())) {
    exit 1;
} else {
    exit 0;
} 
```

# php - 在ie8中使用php下载zip文件

> ID：13075150
> 
> 赞同：1
> 
> 时间：2012-10-25T18:43:45.583
> 
> 标签：php, zip

我能够在“chrome”和“FF”浏览器中使用 PHP 代码压缩文件夹并下载 zip 文件。但是当我在 IE8 中尝试时，它会将下载的 zip 文件显示为未知类型的文件。我将不得不专门使用 rar 应用程序打开它，但我希望将此 zip 文件直接下载为 IE8 中的 .zip 文件，因为它正在发生在其他浏览器中。以下是我使用的标题：

```
header("Pragma: public");
header("Pragma: no-cache");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-type: application/zip");
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".filesize($archive_file_name));
header("Content-Disposition: attachment; filename=$archive_file_name");
readfile("$archive_file_name");
unlink($archive_file_name); 
```

有人可以让我知道我需要在哪里更正代码吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:49:43.413

```
header("Content-Disposition: attachment; filename=$archive_file_name"); 
```

Make sure $archive_file_name is just a name not a whole path, also it needs to be url encoded and should probably have a ".zip" extension at the end.

```
header("Content-type: application/zip"); 
```

Why is the t in "type" lower cased?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:05:32.710

You are overwriting some headers, some are needed just for IE, some for other browsers, IE is more picky.

Look at this link:

[http://www.boutell.com/newfaq/creating/forcedownload.html](http://www.boutell.com/newfaq/creating/forcedownload.html)

# javascript - 如何在 Twilio SMS 请求中指定 unicode 消息正文？

> ID：13075151
> 
> 赞同：3
> 
> 时间：2012-10-25T18:43:46.277
> 
> 标签：javascript, unicode, twilio

[据 Twilio 称](http://forum.twilio.com/twilio/topics/spanish_sms_inbound_outbound#reply_9497615)，他们现在在 RESTful SMS 界面中支持 unicode 字符。但是，我不清楚如何在 Javascript 中利用这一点（这是在 Node 中）。

当我发送带有西班牙语翻译（默认为 UTF-8）的 SMS 消息时，该消息将在收件人手机上被分割成三条消息。我猜根本原因是我需要在请求中发送一个 unicode 消息体。

如何将 Javascript 字符串转换为 unicode？我尝试过逐字翻译...

```
function toUnicode(theString) {
  var unicodeString = '';
  for (var i=0; i < theString.length; i++) {
    var theUnicode = theString.charCodeAt(i).toString(16).toUpperCase();
    while (theUnicode.length < 4) {
      theUnicode = '0' + theUnicode;
    }
    theUnicode = '\\u' + theUnicode;
    unicodeString += theUnicode;
  }
  return unicodeString;
} 
```

...但这会产生一个被解释为比 160 个字符限制更长的消息正文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:15:01.620

如果您以 Unicode 格式发送消息，则需要 16 位编码。SMS 中 16 位编码的限制是 70 个字符。这是因为 SMS 信令协议限制为 140 个八位字节，如果您使用 7 位编码，则转换为正常的 160 个字符。这是 SMS 协议的限制，而不是 Twilio。我不确定您的问题是如何发送 Unicode，或者为什么它会破坏我的信息。

# php - Facebook 认证的推荐已经消失了。现在怎么办？

> ID：13075154
> 
> 赞同：0
> 
> 时间：2012-10-25T18:44:02.993
> 
> 标签：php, facebook, authentication

我必须创建一个新的简单 Facebook 应用程序。一切都很好，直到我想配置应用程序权限。“经过身份验证的推荐”选项消失了。也许这是一个很幼稚的问题，但是.. 现在呢？我配置了所有内容，但 Auth Dialog 没有出现，所以应用程序没有请求任何权限。

我必须访问用户：

*   电子邮件
*   喜欢

我必须将照片发布到他/她的个人资料中。

我现在如何获得权限？我试图在开发者博客上找到答案，但没有发现任何有用的东西。

在此先感谢并为我的英语感到抱歉。;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:02:45.863

似乎您使用的是 PHP，并且由于您没有提到使用 Javascript，因此这是[服务器端流程](https://developers.facebook.com/docs/howtos/login/server-side-login/)，第四步是您指定权限的位置（使用`scope`参数）：

```
 $code = $_REQUEST["code"];

   if(empty($code)) {
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'] . "&scope=email,publish_stream,user_likes";

     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   } 
```

有关权限列表，请参阅[权限文档](https://developers.facebook.com/docs/reference/login/#permissions)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:06:30.760

2013 年 2 月删除经过身份验证的推荐根本不会影响您现有的[登录](https://developers.facebook.com/docs/concepts/login/)代码 - 经过身份验证的推荐设置仅适用于一个特定的登录流程，即 Facebook 上的用户单击应用发布的内容的链接

ifaour 的示例显示了一个使用服务器端 Oauth 流程的非常简单的示例，但是您的代码可能应该已经看起来像那样，否则它会在非身份验证引用流程中失败

# c - ANSI C - 每行计算单词和字母

> ID：13075157
> 
> 赞同：3
> 
> 时间：2012-10-25T18:44:09.397
> 
> 标签：c, text, count, ansi

我正在做一个个人项目，但我不知道该怎么做：

*   数单词（每个单词 5 美元）
*   计算每个单词的字母（如果单词少于 4 个字母，则成本为 4 美元，如果超过 4 个字母，则成本为 5 美元）

    * * *

到目前为止，这是我的代码：

```
char txt[50];

printf("Introduce a text: ");
scanf("%s",&txt);
for(i=1; i <= N; i++){
  fgets(txt,50,stdin);
} 
```

预期输出示例：

```
The cost is: $24 USD 
```

我只是不知道接下来会发生什么，任何帮助将不胜感激:) 谢谢。

**更多解释：**

假设用户介绍了一段文字：

```
Lorem ipsum dolor sit ameth 
```

所以程序会检查每个单词，例如“Lorem”它有 5 个字母，这个词要花费 5 美元。现在“ipsum”也有 5 个字母，所以另一个 5 美元。“dolor”有 5 个，所以其他 5 美元……“坐”有 3 个字母，所以让我们再总结一下 4 美元……“ameth”有 5 个，所以多 5 美元……

这篇文章的成本是：24 美元

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T18:51:41.573

我一般会做什么：

1.  加载文本 - 除了错误处理/输入验证/溢出之外，您的想法是正确的。

2.  `strtok()`使用from将输入标记为单词`string.h`。查找它，但它基本上使用您提供的分隔符将您的输入字符串（可能`txt`）拆分为所需的标记（例如 - delimiter = "space" 会将输入拆分为空格所在的每个“简单”单词新词的唯一分界）。它在每次迭代中的输出（您`strtok`通常在循环中调用）是下一个标记或“单词”。

3.  使用`strlen`产生的每个结果 cstring`strtok`来计算每个“单词”的大小

是的，我知道我们讨厌 cplusplus.com，但这个例子乍一看似乎没问题（确认 - 有效）：

```
/* strtok example */
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] ="- This, a sample string.";
  char * pch;
  printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok (str," ,.-");
  while (pch != NULL)
  {
    printf ("%s\n",pch);
    pch = strtok (NULL, " ,.-");
  }
  return 0;
} 
```

标记化语法看起来有点奇怪的原因是：

[STRTOK函数说明及语法解释](http://en.cppreference.com/w/c/string/byte/strtok)

警告：从链接中可以看出`strtok`，修改您传递的原始字符串。因此，如果您想将其保留用于其他光荣目的，请在某处保存一份安全副本。

# sql - 返回 IN 查询的行，查找失败返回 NULL

> ID：13075159
> 
> 赞同：0
> 
> 时间：2012-10-25T18:44:16.673
> 
> 标签：sql, vectorwise

**鉴于此查询：**

```
SELECT a, b FROM c WHERE a IN ('v1', 'v2', 'v3'); 
```

如果表`c`有 v1 和 v2 的值但没有 v3，我会得到 2 行的结果集。有没有一种方法可以在为每个目标获取一行的同时执行相同的查询（或产生相同结果的查询）？

在这种情况下，我想接收 3 行，2 行带有“v1”和“v2”的值，1 行带有 NULL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:52:36.580

不确定这是否适用于您的特定 RDBMS，但这是我将如何处理它：

```
select x.a, c.b
from (
  select 'v1' as a union all
  select 'v2' as a union all
  select 'v3' as a
) x
left outer join c on c.a = x.a 
```

创建一个临时表并使用它左连接所需的表。

# eclipse - Subclipse 的最近分支列表可以扩展超过 5 个条目吗？

> ID：13075165
> 
> 赞同：1
> 
> 时间：2012-10-25T18:44:52.563
> 
> 标签：eclipse, svn, branch, subclipse

我经常使用 Subclipse 在许多分支之间切换，一次可能 10-15 个。（是的，我知道这很多。）

To URL 字段提供了 5 个最新分支的有用下拉列表。如果可以扩展以显示更多内容，那就太好了。是否可配置？

[截图 http://desktop-eclipse.open.collab.net/images/switch-multi.png](http://desktop-eclipse.open.collab.net/images/switch-multi.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T13:38:40.670

这当然不是偏好或任何东西，因此您需要向 Subclipse 项目提交增强请求 - [http://subclipse.tigris.org/servlets/ProjectProcess?pageID=t65B1R](http://subclipse.tigris.org/servlets/ProjectProcess?pageID=t65B1R)

您还可以查看分支/标签 UI 功能：

[http://subclipse.tigris.org/branch_tag.html](http://subclipse.tigris.org/branch_tag.html)

这使您可以在 SVN 属性中“注册”您的分支，然后在选择对话框中作为 UI 快捷方式存在。

# asp.net - 使用 AJAX 使多个页面在一个页面上被调用。创建人员方法停止工作

> ID：13075172
> 
> 赞同：1
> 
> 时间：2012-10-25T18:45:08.920
> 
> 标签：asp.net, vb.net, jquery

我已经在网上到处搜索了两天才能找到这个。到目前为止，我还没有找到我需要的东西。我不确定是不是因为我在用 AJAX 做一些奇怪的事情，但这是我的问题，如果你能帮忙的话。

我正在尝试制作一个只有多个页面但使用 AJAX 和 JQuery 来给人一种只有一页的错觉的网站。URL 没有像预期的那样更改，但是当我尝试创建销售人员或使用 AJAX 加载页面登录时，它不起作用。看起来确实如此，但实际上并没有提交数据输入，因为后面的代码永远不会在单独的页面上命中。以下代码是我的 AJAX 页面。

```
/// <reference path="jquery-1.8.2-vsdoc.js" />
$(document).ready(function () {
$('#ViewAllUsers').click(function () {
    $.ajax({
        type: 'POST',
        url: "/ViewAllUsers(test).aspx",
        success: function (result) {
            var main = $('#Main');
            main.html($('#Main', result).html());
        }
    });
});
$('#Button1').click(function () {
    $.ajax({
        type: 'POST',
        url: "/Login.aspx",
        success: function (result) {
            var main = $('#Main');
            main.html($('#Main', result).html());
        }
    });
});
$('#AddItem').click(function () {
    $.ajax({
        type: 'POST',
        url: "/admin/AddItem.aspx",
        success: function (result) {
            var main = $('#Main');
            main.html($('#Main', result).html());
        }
    });
});
$('#CreateSalesAccount').click(function () {
    $.ajax({
        type: 'POST',
        url: "/admin/CreateSalesAccount.aspx",
        success: function (result) {
            var main = $('#Main');
            main.html($('#Main', result).html());
        }
    });
});
$('#ViewAllOrderHistory').click(function () {
    $.ajax({
        type: 'POST',
        url: "/admin/ViewOrderHistory.aspx",
        success: function (result) {
            var main = $('#Main');
            main.html($('#Main', result).html());
        }
    });
});
}); 
```

此代码是管理页面，该页面使用 AJAX 按钮转到其他页面，同时停留在管理页面上。

```
<%@ Page Title="" Language="vb" AutoEventWireup="true" MasterPageFile="~/Site.Master" CodeBehind="AdminPage.aspx.vb" Inherits="PyriteGoldPresentation.AdminPage" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
<script src="../Scripts/jquery-1.8.2.js" type="text/javascript"></script>
<script src="../Scripts/PyriteGoldAjax.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div id = "Main">
    <input type="button" id="ViewAllUsers" value="View All Users" />
    <input type="button" id="AddItem" value = "Add Item" />
    <input type="button" id="CreateSalesAccount" value="Create A Sales Account" />
    <input type="button" id="ViewAllOrderHistory" value="View Order History" />
</div>
</asp:Content> 
```

Finnaly 这里是创建推销员页面及其背后的代码。

```
<%@ Page Title="" Language="vb" AutoEventWireup="false" MasterPageFile="~/Site.Master" CodeBehind="CreateSalesAccount.aspx.vb" Inherits="PyriteGoldPresentation.CreateSalesAccount"%>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
<script src="../Scripts/jquery-1.8.2.js" type="text/javascript"></script>
<script src="../Scripts/PyriteGoldAjax.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div id="Main">
    <div style="width: 400px; margin-left:auto; margin-right:auto;">
        <div class="row">
            <h2>
                Create Sales Account
            </h2>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="FirstNameLabel" runat="server" Text="First Name"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="FirstNameTextField" runat="server" Width="137px"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="*Required Field"
                 ControlToValidate="FirstNameTextField"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="LastNameLabel" runat="server" Text="Last Name"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="LastNameTextBox" runat="server" Width="137px"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="*Required Field" ControlToValidate="LastNameTextBox"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="EmailLabel" runat="server" Text="E-Mail Address"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="EmailTextBox" runat="server" Width="134px"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="*Required Field" ControlToValidate="EmailTextBox"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="VerifyEmailLabel" runat="server" Text="Verify E-Mail"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="VerifyEmailTextBox" runat="server" Width="136px"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ErrorMessage="*Required Field" ControlToValidate="VerifyEmailTextBox"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="PasswordLabel" runat="server" Text="Password"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="PasswordTextBox" runat="server" Width="138px" 
                TextMode="Password"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" ErrorMessage="*Required Field" ControlToValidate="PasswordTextBox"/>
            </span>
        </div>
        <div class="row">
            <span class="column1">
                <asp:Label ID="VerifyPasswordLabel" runat="server" Text="Verify Password"/>
            </span>
            <span class="column2">
                <asp:TextBox ID="VerifyPasswordTextBox" runat="server" Width="138px" 
                TextMode="Password"/>
            </span>
            <span class="column3">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" ErrorMessage="*Required Field" ControlToValidate="VerifyPasswordTextBox"/>
            </span>
        </div>
        <div class="row" style="color:Red;">
            <asp:CompareValidator ID="EmailValidator" runat="server" ErrorMessage="**E-mail Feilds Must Match" ControlToCompare="EmailTextBox" ControlToValidate="VerifyEmailTextBox"/><br />
            <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" 
            ErrorMessage="**E-mail Addresses must follow the pattern user@domain.com" ControlToValidate="EmailTextBox" 
            ValidationExpression="\w+([-+.']\w+[-]*)*@\w+([-.]*\w+)*\.\w+([-.]\w+)*"/><br />
            <asp:CompareValidator ID="PasswordValidator" runat="server" ErrorMessage="**Password Fields Must Match" ControlToCompare="PasswordTextBox" ControlToValidate="VerifyPasswordTextBox"/>
        </div>
        <div>
            <asp:Button ID="SubmitButton" runat="server" Text="Submit" OnClick="SubmitButton_Click" />
        </div>
    </div>
</div>
</asp:Content> 
```

代码背后

```
Imports PyriteGoldBLL
Imports PyriteGoldModel

Public Class CreateSalesAccount
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Session("permissionValue") <> 3 Then
        Response.Redirect("~/Home.aspx")
    End If
End Sub

Protected Sub SubmitButton_Click(sender As Object, e As EventArgs) Handles SubmitButton.Click
    Dim userLogic As New UserLogic()
    Dim user As New User()
    With user
        .FirstName = FirstNameTextField.Text
        .LastName = LastNameTextBox.Text
        .Email = EmailTextBox.Text
        .Password = PasswordTextBox.Text
        .Activated = True
        .Permission = 2
    End With
    userLogic.CreateUser(user)
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:20:35.783

我不是 100% 追随你想要达到的目标.. 虽然无论如何都要尝试一下:)

您正在尝试调用 AJAX 中的实际页面，而不是尝试调用 webmethod - 这是您需要做的......您不能以您尝试的方式调用您尝试调用的内容称它为...

我建议您创建一个包含您需要的所有方法的 Web 服务，例如 login、addItem 等。这些方法需要获取您需要的属性，IE Login 可能需要用户名和密码。

如果您不想创建 Web 服务，那么您必须将所有这些方法放入 ajax 所在的同一页面中。

例如：对于您的 ajax 登录 URL 是您的 Web 服务，后跟“/”，后跟方法名称。

```
$('#Button1').click(function () {
$.ajax({
    type: 'POST',
    url: "/MyWebservice.asmx/Login",
    data: "{'username':'" + YourUserNameVar + "', 'password':'" + YourPasswordVar +"'}",
    success: function (result) {
        var main = $('#Main');
        main.html($('#Main', result).html());
    }
}); 
```

});

接收此调用的方法如下所示：

```
 <WebMethod()> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Function Login(ByVal username As String, ByVal password as string) As Object

       '' Do your login here and return whatever it is you need to return
       '' i have used 'Object' for this function by way of example

    End Function 
```

这个答案当然可以用更多的信息来充实，尽管这更多是为了让你开始并走上正确的道路。

更新：

您需要了解一些关于使用 AJAX 使用 Web 方法/Web 服务的知识。看看这个[简单的教程](http://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-example.aspx)。显示您需要开始的所有步骤:)

# xaml - 控件以显示列表视图和缩略图/平铺视图

> ID：13075173
> 
> 赞同：0
> 
> 时间：2012-10-25T18:45:11.750
> 
> 标签：xaml, windows-8, wpf-controls, expression-blend

Windows 8 控件列表中是否有一个控件可用于自动将内容显示为列表视图和缩略图/平铺视图？我基本上有一个需要在 Windows 8 商店应用程序上使用 XAML 以这种方式表示的项目列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:17:42.310

通常，如果您想以两种不同的方式显示信息，您将拥有两个单独的视图。您还将拥有一个属性，您的视图的可见性将绑定到该属性。一个视图将在属性为真时显示，而另一个视图将在您的属性为假时显示。当你按下你的按钮，然后否定你的财产的价值（即财产=！财产）。

# javascript - 模板丢失（应用程序找不到 .js.erb 文件）

> ID：13075174
> 
> 赞同：2
> 
> 时间：2012-10-25T18:45:13.790
> 
> 标签：javascript, ruby-on-rails

我正在尝试使用位于 /app/views/users/ 中的 create.js.erb 模板，但出现以下错误：

```
Template is missing
Missing template users/create, application/create with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "/home/tim/fairym/app/views" 
```

我的控制器动作，我基于以下 railscast： [http: //railscasts.com/episodes/381-jquery-file-upload](http://railscasts.com/episodes/381-jquery-file-upload)

```
 def create   
    @user = User.create(params[:user])
  end 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:49:39.983

它不需要一个 js 文件。在您的方法中添加一个`respond_to`块：

```
def create
  @user = User.create(params[:user])

  respond_to do |format|
    format.js
    # add more 'format' calls for any other formats this method should ever respond to.
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:41:44.117

我知道这已经得到解答，但我遇到了同样的问题和错误消息，并通过在我的表单中添加“remote：true”来解决它。每当在表单上提交 ajax 调用时，您都需要这个。

我知道这对大多数人来说是显而易见的，但对于像我这样经常忘记这些事情的新手来说却不是。

例如：

```
<%= form_for([@club, @club_order], remote: true) do |f|  %> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T18:54:30.703

它找不到您的模板的原因是，如果您注意到 railscast 剧集，他正在为数据类型执行 AJAX 请求`script`

```
$('#new_painting').fileupload
    dataType: "script" 
```

因此，根据您如何链接到 create 操作，该链接可能需要呈现 html 格式。

```
Template is missing
Missing template users/create, application/create with {:locale=>[:en], **:formats=>[:html]**, :handlers=>[:erb, :builder, :coffee]}. Searched in: * "/home/tim/fairym/app/views" 
```

您可以通过将 a 添加`render js`到您的操作来解决此问题，或者如果您正在执行 ajax 请求，请确保您的数据类型设置为脚本。

# iphone - 如何在谷歌地图上显示位置列表

> ID：13075178
> 
> 赞同：0
> 
> 时间：2012-10-25T18:45:28.140
> 
> 标签：iphone, ios, ipad

我正在创建一个 iPhone 应用程序，我需要在其中从 gps 获取纬度经度。现在我正在调用 update-location 委托方法并向数组添加新位置，之后我需要在护目镜地图上显示所有纬度经度（位置）和所有位置之间的路线。

请帮我显示路线。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:57:17.347

以下是您可以使用 GoogleMaps javascript api 执行此操作的方法。

```
<style>
  #map_canvas {
    height: 190px;
    width: 300px;
    margin-top: 0.6em;
  }
</style>
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
<div id="map_canvas" ></div>

<script language="javascript" type="text/javascript">  
var latitude = 44.056389;
var longitude = -121.308056;

function initialize() {
        var mapOptions = { 
          center: new google.maps.LatLng(latitude,longitude),
          zoom: 9,
          streetViewControl: false,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);

        // Create a draggable marker which will later on be binded to a
        // Circle overlay.
        var marker = new google.maps.Marker({
          map: map,
          position: new google.maps.LatLng(latitude,longitude),
          draggable: true
        });

        // Add a Circle overlay to the map.
        var circle = new google.maps.Circle({
            strokeColor: "#0000FF",
            strokeOpacity: 0.4,
            strokeWeight: 2,
            fillColor: "#0000FF",
            fillOpacity: 0.20,
            map: map,
            radius: 16000 // meters
        });

        circle.bindTo('center', marker, 'position');

        google.maps.event.addListener(marker, 'dragend', function() {
            var location = marker.getPosition();
            latitude = location.lat();
            longitude = location.lng();
        });

        google.maps.event.addListener(autocomplete, 'place_changed', function() {
          var place = autocomplete.getPlace();
          var location = place.geometry.location;
          map.setCenter(location);
          map.setZoom(9);  // Why 9? Because it looks good.
          marker.setPosition(location);
          latitude = location.lat();
          longitude = location.lng();
        });

      }
</script> 
```

# php - ZF2 - 动态输入量（无 JavaScript）

> ID：13075182
> 
> 赞同：1
> 
> 时间：2012-10-25T18:45:38.310
> 
> 标签：php, zend-framework2

ZF2 已添加`formCollection`，它让您可以`formElement`在页面加载后动态添加 s。

我有一个动态行数表，每个行都应该有一个文本字段，如：

```
foreach ($types as $type) : 
    ?>
    <tr><td><?php echo $type ?></td><td><?php echo $this->formRow($form->get('amount')); ?></td></tr>
    <?php 
 endforeach; 
```

我正在循环遍历一组项目并为我的表打印行/列，但似乎 formCollection 只允许您一次打印所有字段。

是否有可能在每个循环中打印一个文本字段？所有文档都谈到了使用模板和 JavaScript 动态添加元素。但我基本上只想要一个我已经知道数量的输入数组。

看来我也无法`count`在我的控制器中更改它们。试过这个：

```
$types = array(1,2,3,4,5)
$form = new ThingsForm();
$form->get('amounts')->setOptions(array(
    'count' => count($types)
)); 
```

我尝试只拥有`count => 1`该系列，然后打印其中的许多，但是当您填充它们时，它只会被视为一件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:24:45.493

更短，更有用的版本：

```
$form->get('amounts')->setCount(count($types))->prepareFieldset(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:26:55.727

好像我已经破解了它，这并不容易，所以我质疑这是推荐的方式，还是没有考虑到用例：

收藏品：

```
$this->add(array(
        'type'      => 'Zend\Form\Element\Collection',
        'name' => 'amounts',
        'options' => array(
            'allow_add' => true,
             // Has to be 0 as you set the count later (and that adds)
            'count' => 0,
            'target_element' => array(
                'type' => 'Application\Form\AmountForm'
            )

        ),
        'required'  => true,
    )); 
```

抓取表单并将计数设置在某个地方，例如控制器操作：

```
$form = new AmountTypesForm();
$form->get('amounts')->setOptions(array(
    'count' => count($typesOfThings)
))->prepareFieldset(); 
```

视图内的循环

```
foreach ($types as $type) : 
    ?>
    <tr><td><?php echo $type ?></td><td><?php echo $this->formRow($form->get('amount')->getIterator()->extract()); ?></td></tr>
    <?php 
 endforeach; 
```

# php - 最简单的 Javascript If 语句不起作用

> ID：13075188
> 
> 赞同：2
> 
> 时间：2012-10-25T18:46:20.143
> 
> 标签：php, javascript, if-statement

我想在 javascript 中检查一个 php 变量并相应地创建一个数组。

我试过这个，但它不工作：

```
<script language="Javascript" type="text/javascript">
            var phpvar1_large = <?php echo $var1_large ?>; 
            var phpvar2_large = <?php echo $var2_large ?>; 
            var phpvar3_large = <?php echo $var3_large ?>; 
            var phpvar4_large = <?php echo $var4_large ?>; 

            if(!phpvar1_large){
            var imgArray = new Array(
                '<?=$main_img; ?>'
                );
            }else if(!phpvar2_large){
                var imgArray = new Array(
                '<?=$main_img; ?>',
                '<?=$var1_large; ?>'
                );
            }else if(!phpvar3_large){
            var imgArray = new Array(
                '<?=$main_img; ?>',
                '<?=$var1_large; ?>',
                '<?=$var2_large; ?>',
                '<?=$var3_large; ?>'
                );
            }else if(!phpvar4_large){
                var imgArray = new Array(
                '<?=$main_img; ?>',
                '<?=$var1_large; ?>',
                '<?=$var2_large; ?>',
                '<?=$var3_large; ?>'
                );
            }else if(phpvar4_large){
            var imgArray = new Array(
                '<?=$main_img; ?>',
                '<?=$var1_large; ?>',
                '<?=$var2_large; ?>',
                '<?=$var3_large; ?>',
                '<?=$var4_large; ?>'
            );
            }
</script> 
```

但是，如果我不使用 if 语句，则会正确创建数组：

```
<script language="Javascript" type="text/javascript">
            var imgArray = new Array(
                '<?=$main_img; ?>',
                '<?=$var1_large; ?>',
                '<?=$var2_large; ?>',
                '<?=$var3_large; ?>',
                '<?=$var4_large; ?>'
            );
</script> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:48:19.250

我强烈建议您简单地对您的数组进行 JSON 编码。

```
$imgArray = array('img1.jpg', 'img2.jpg', etc);
echo 'var imgArray = ' . json_encode($imgArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:52:14.783

我很确定您的问题是您通过 php 编写的布尔值没有被解释为布尔值而是字符串，这就是为什么它总是被评估为假的原因。

你应该写`var phpvar1_large = <?php echo json_encode($var1_large); ?>;`

不客气！

# jquery - 如何将联系表单从纯 HTML/JS 网站发送到 Django 项目中的外部 Web 服务？

> ID：13075192
> 
> 赞同：0
> 
> 时间：2012-10-25T18:46:32.440
> 
> 标签：jquery, ajax, django, web-services, rest

我有一个带有 html5/javascript/css3 的网站，我必须将联系表单值发送到位于 django 项目（带有活塞/休息）中的外部 Web 服务中的 Web 服务。我已将带有值的 Json 加载到 Jquery/Ajax 中，并发送到 Django 项目中的 Javascript 函数。这是表单网站中的 Js：

```
var json = "{\"nome\": "+nome
    +", \"empresa\": "+empresa
    +", \"email\": "+email
    +", \"telefone\": "+telefone
    +", \"assunto\": "+assunto
    +", \"mensagem\": "+mensagem
    +"}";
try{
    ws("http://127.0.0.1:8000/ws/wsname/", json,"POST","","", "alert(ws_returned_info)", "");
}catch(erros){
    alert(erros.message);
} 
```

并且 Django 项目中的 ws 函数在从 self 项目调用时工作正常，但在捕获中它会警告“responseText 未定义”

```
function ws( p_url, p_json, p_type, p_auth, p_before, p_success, p_finally ){
    var resposta = true;
    preLoader.show();

    dict = { url: p_url,
             beforeSend: function(request){
                            request.setRequestHeader('Authorization', "*" );
                            request.setRequestHeader('Access-Control-Allow-Origin', '*' );
                            eval(p_before);
                         },
             cache: false,
             type: p_type,
             data: p_json,
             async: false,
             contentType: 'application/json; charset=utf-8',
             processData: false,
             dataType: 'json',
             success: function(json, textStatus){
                        eval(p_success);
                      },
             error: function(XMLHttpRequest, textStatus, errorThrown){
                        erros(XMLHttpRequest.responseText);
                        resposta = false;
                      }
            };

    $.ajax(dict);

    preLoader.fadeOut("fast");
    eval(p_finally);

    return resposta;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:28:52.743

所以你有一个 django url `http://127.0.0.1:8000/ws/wsname/`，你想从一个单独的应用程序向它发送 JSON。

做什么`http://127.0.0.1:8000/ws/wsname/`？我的猜测是它没有向您的 ajax 调用发送正确的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:33:15.150

您似乎正在开发中，因此您可以查看控制台并查看 django 应用程序是否收到了请求，以及如何回答：

*   您的 Django 应用程序（在控制台中）可能会回复一个`401 Forbidden`响应，这将表明您没有为此视图禁用 CSRF 保护，鉴于您的用例，您必须这样做。
*   您的应用可能会回复一个`500 Internal Server Error`响应，这表明您的视图中存在编码错误。
*   您的应用程序可能会回复一个`200 OK`响应，这将表明错误在 JS 中的某个位置。
*   控制台中可能没有任何内容，这表明发送请求时出现问题。检查来自 JS 调试器的日志以查看错误是什么。

# java - 寻找跨平台移动应用程序与微控制器通信的选项

> ID：13075193
> 
> 赞同：0
> 
> 时间：2012-10-25T18:46:33.883
> 
> 标签：java, android, ios, mobile

我编写了一个与微控制器通信的 Java SE 桌面应用程序。它显示从它接收到的数据并向它发送更新，不断通信。它使用一些第三方库和 javax.comm 库通过串行通信。我们目前正在研究开发具有相同功能的跨平台移动应用程序的选项。最终，这个新应用程序将能够在桌面、手机和平板电脑上编译和运行。我研究了一些选项（Oracle 的新 ADF 移动、phoneGap、Java ME 等），但我想知道是否有人对什么是最好的有任何建议。随时提出任何后续问题。提前致谢。

射线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:31:48.720

在执行此操作时，您将遇到一些挑战。首先，任何跨平台的框架几乎都是立即淘汰的。由于下面概述的显着差异，我所知道的任何框架都没有支持硬件连接。

**硬件**

您的嵌入式设备当前正在使用 RS-232 (UART) 与 PC 通信。这是一个硬件接口，不存在于任何消费类移动设备（iPhone 除外，但我们会到达那里）。**从硬件角度来看，支持点对点连接**的所有主要设备平台（iOS、Android、Windows Phone）之间的唯一通用接口是 USB 和蓝牙。

在这两者中，蓝牙更容易适应您的嵌入式设备，因为市场上有许多蓝牙调制解调器，它们只需连接到 UART 并通过链路中继数据，作为使用 RFCOMM 协议的电线替代品。

**SDK 支持（即 APP 如何与此硬件通信？）**

*   Android SDK 支持应用程序和两个接口之间的通信。蓝牙出现在 Android 2.0 中，USB 出现在 Android 3.1 中。
*   自 iOS 3.0 起，iOS SDK 支持与两者的通信。从 iOS 5 开始，它还支持蓝牙 LE。
*   Windows Phone 8 SDK 声称它将支持蓝牙连接，据我所知没有关于 USB 支持的消息。

**许可**

这个真的只适用于 iOS，但它适用于**蓝牙**和 USB/Serial。为了开发 iOS 连接的**硬件**方面，您必须是其 Made For iPod 计划的成员。会员资格是免费的，但需要大量的文书工作，而这实际上只能让您访问实现其专有连接器所需协议所需的文档。获得进行实际连接所需的连接器和其他组件需要进一步的批准，这并不容易获得。

蓝牙 LE 是 iOS 上唯一不需要 MFi 成员即可在硬件和软件方面实施的连接标准。然而，迄今为止，还没有其他主要的移动 SDK 直接支持此接口（Android 正在实现这一点）。

总的来说，我的建议是倾向于添加蓝牙并密切关注蓝牙 LE 空间。如果你能找到一个运行双模式的嵌入式模块，你可以运行 LE 到 iOS 设备和标准蓝牙到其他平台。这是我能想到的唯一免许可途径，并且随着蓝牙 LE SDK 支持的改进，其他设备也可以利用这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:52:05.427

根据您的标签，我认为“跨平台”真的只是意味着 android 和 iOS？也就是说，选择哪个跨平台工具的问题在这里已经回答了好几次了，真的不值得重复。我的建议是原生，除非你真的不关心性能和最佳解决方案。

也就是说，硬件接口应该很有趣。Android 具有与最新版本的 Android 兼容的[开放附件协议。](http://source.android.com/tech/accessories/aoap/aoa2.html)这适用于通过 USB 进行的连接。Apple 更加封闭，并且需要为协议、连接器等支付许可费。最好的选择是使用蓝牙甚至 wifi 将您的硬件连接到移动设备。这将只需要两个设备的单一硬件设计，并且在某种程度上也是面向未来的。

# arrays - Fortran：将可分配向量组合在数组中，无需复制和重塑

> ID：13075194
> 
> 赞同：2
> 
> 时间：2012-10-25T18:46:42.307
> 
> 标签：arrays, vector, fortran, equivalence

如何在 Fortran 的数组中组合一堆大的可分配向量？我想避免使用复制和重塑，`reshape`因为数组*很大*。我想要达到的效果就像Fortran的一样`equivalence`，来说明一下：

```
program test_equiv
    integer x(10), y(10), z(10), xyz(10,3)
    equivalence (x, xyz(1,1))
    equivalence (y, xyz(1,2))
    equivalence (z, xyz(1,3))

    x = 1
    y = 2
    z = 3

! and we can use just normal array syntax
    print *, xyz(3,:)
end program 
```

但是，这不适用于可分配数组。如果是关于访问矩阵向量，则可以通过指针轻松实现。但是如何将向量组合到一个二维数组中呢？到目前为止，我只遇到了有问题的指针数组：

```
program test_arofpntrs
implicit none

integer :: i
integer, allocatable, target :: xs(:), ys(:), zs(:)

type t_p_xs
  integer, pointer :: p_xs(:)
end type t_p_xs

type(t_p_xs), allocatable :: coords(:)

allocate(coords(3), xs(10), ys(10), zs(10))

xs = 1
ys = 2
zs = 3

coords(1) % p_xs => xs
coords(2) % p_xs => ys
coords(3) % p_xs => zs

print *, coords(1) % p_xs(:)

! this fails:
!print *, coords(:) % p_xs(1)

end program 
```

这很难看，无法访问 xs(i)、ys(i)、zs(i)。没有副本可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:12:12.477

如果您从单独的一维数组开始，这将是不可能的。可分配数组可能位于内存中的任何位置。尽管 Fortran 数组不必是连续的，但必须有一些跨步系统。

```
! this fails:
!print *, coords(:) % p_xs(1) 
```

Fortran 标准禁止使用，因为不能简单地计算下一个元素的地址。一维数组甚至不能保证具有相同的长度。

同样`reshape`，它不一定是低效的，它可能只是在语法上有助于索引，但根本不接触数据。

指针是一个很好的工具，在这里可能会有所帮助。您必须以不同的方式使用一维数组。例如，分配一个长的 1D 数组，并为它的一部分分配 1D 指针，并将 2D 指针作为一个整体，或者反过来更好：

```
real,allocatable,target :: xyz(:,:)
real,pointer :: x(:),y(:),z(:)

allocate(xyz(1:10,1:3))
x => xyz(:,1)
y => xyz(:,2)
z => xyz(:,3) 
```

甚至其他索引顺序也是可能的，即`xyz(3,10); x => xyz(1,:)`.

你也可以做

```
long1D(1:size(xyz)) => xyz 
```

但请注意，这是 Fortran 2008 在这个方向上的功能（否则为 2003）。

# android - 如何实现 OnItemClickListener 从 ListView 显示 WebView？

> ID：13075196
> 
> 赞同：0
> 
> 时间：2012-10-25T18:46:57.660
> 
> 标签：android

这是我的列表视图。

```
ListView lv = (ListView) findViewById(R.id.favoritos_listView); 
```

此列表显示来自字符串数组的 URL，如下所示：

```
<string-array name="bookmark_urls">
    <item>http://www.google.com</item>
    <item>http://www.android.com/</item>
</string-array> 
```

这就是我设置列表的方式：

```
ArrayAdapter<CharSequence> aa = ArrayAdapter.createFromResource(this, R.array.bookmark_titles, android.R.layout.simple_list_item_1);
lv.setAdapter(aa); 
```

该列表有一个监听器来处理这样的项目中的点击：

```
private OnItemClickListener onListClick = new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) { 
```

***现在，我想在用户点击一个项目时打开一个 WebView。此 WebView 必须加载列表中已单击的 url。***

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:02:38.643

我不清楚你的问题。如果你想打开一个`webView`列表项点击，你可以这样做：（我不在我的开发机器附近，所以不确定。试试这个）

```
 @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        WebView webView = new WebView(v.getContext());
        String[] urls =  = getResources().getStringArray(R.array.bookmark_urls);
        webView.loadUrl(urls[position]);
        super.onListItemClick(l, v, position, id);
    } 
```

并且不要忘记在清单文件中添加权限，如下所示：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# algorithm - 如果我使用 4xManhattan 距离作为 15-Puzzle 的启发式，为什么 A* 更快

> ID：13075199
> 
> 赞同：4
> 
> 时间：2012-10-25T18:47:06.253
> 
> 标签：algorithm, a-star, heuristics

我已经实现了一个 A* 算法来解决 15 谜题。我进行了一项研究，以寻找一些可行或可接受的启发式方法，寻找一个快速的解决方案，我发现使用 4*Manhattan 距离作为启发式方法总是可以在不到一秒的时间内解决任何 15 个难题。我试过这个并且有效地工作。我试图找到答案，但我找不到。

任何人都可以解释这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:07:35.203

4* 曼哈顿距离是不可接受的启发式算法，这使得算法首先表现得“更接近”贪婪的最佳算法（算法仅根据启发式函数选择要开发的节点）。这使得算法有时更喜欢解决方案的深度和探索而不是广度和最优性。

这个想法类似于[A*-Epsilon](http://en.wikipedia.org/wiki/A%2a_search_algorithm#Bounded_relaxation)中发生的情况，您允许 A* 在一定范围内开发非最优节点以加速您的算法，实际上 - 我怀疑您会得到相同（或类似的结果）如果您以曼哈顿距离和`epsilon = 3`. （如果我是正确的，这将使您在修改后的启发式中找到解决方案`4*OPTIMAL`，其中 OPTIMAL 是最佳路径的长度）

# c - 从多个 C 文件调用方法，无需自定义头文件，Makefile Linking

> ID：13075200
> 
> 赞同：0
> 
> 时间：2012-10-25T18:47:17.767
> 
> 标签：c, methods, compilation, prototype

这在翻译中有点丢失，所以我要更准确地说：我们有类 recursion.c、fib.c 和 countUp.c。从 recursion.c 我们必须递归调用 fib.c 或 countUp.c，由输入参数决定。我不能使用头文件，只能放置原型：

```
int fib(int n); 
```

和

```
void countUp(int n); 
```

我的 Makefile

```
TAR = tar
COMPILER_FLAGS = -g -Wall -std=c99 -c
LINKER_FLAGS = -g -o
OBJS = recurse.o
C_FILES = recurse.c fib.c countUp.c
ASM_FILES = recurse.asm
TARGET_FILE = recurse
TARGET_TAR = PA5.tar

$(TARGET_TAR): $(TARGET_FILE)
    $(TAR) -cvf $(TARGET_TAR) $(C_FILES) $(ASM_FILES) $(TARGET_FILE) Makefi$

recurse.o: recurse.c
    $(C_COMPILER) $(COMPILER_FLAGS) $(C_FILES)

$(TARGET_FILE): $(OBJS)
    $(LD_LINKER) $(LINKER_FLAGS) $(TARGET_FILE) $(OBJS) 
```

其中 fib 和 countUp 类方法必须递归调用。recursive.c 文件被认为是我们的 c 驱动程序。不要创建或实现除标准 c 头文件（stdio.h、string.h 等）之外的任何头文件。当我尝试运行它时，我得到：

```
make
gcc -g -o recurse recurse.o
recurse.o: In function `main':
(file root location)/recurse.c:43: undefined reference to `fib'
(file root location)/recurse.c:46: undefined reference to `countUp'
collect2: ld returned 1 exit status
make: *** [recurse] Error 1 
```

任何线索发生了什么。

原始问题：我有多个 C 文件，我将它们组合成一个可执行文件。例如说我有 math.c，参数被传递给它，然后如果输入参数调用 add 它执行 add.c 中的函数，如果参数调用 subtract 它将调用 subtract.c 中的函数等。文件然后编译成 .o 文件，然后创建一个可执行文件。我遇到的问题是无法使用标头 (.h) 文件。有什么办法可以闯入单独的班级还是我错过了什么？我真的不知道如何问这个问题，就 C 而言，行话很糟糕，对不起:(

我想我真的不明白司机的想法。（不是设备驱动程序，她一直告诉我们这是 ac 可执行驱动程序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:24:23.550

如果我理解正确，我认为您需要做的是在您定义的任何函数之上添加以下原型`recursion.c`。原型将允许您从内部的任何函数中调用这些函数`recursion.c` （事实上，包括头文件类似于复制粘贴文件中定义的所有原型，正如@Justin 和 @EdS 已经指出的那样）

```
int fib(int n);
void countUp(int n);

int main() {
 ...
} 
```

**然后您需要确保您的项目文件包含文件 recursion.c、fib.c 和 countUp.c** - 当您构建项目时，链接器将完成其工作并在编译的目标文件中查找入口点，并且将继续组装单个可执行文件。

你用的是什么编译器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:56:11.933

包含头文件只是一个预处理器指令，用于在包含位置包含该文件的内容。要在没有头文件的情况下实现相同的目的，只需将您在头文件中放入的代码复制并粘贴到每个 c 文件的顶部即可。

当然，这不是很容易维护，就好像您想更改需要在许多文件中更改它的内容一样，因此为什么头文件首先存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:54:59.433

由于这是家庭作业，并且考虑到您告诉我们 A）您没有要使用的头文件，并且 B）您没有被指示使用`extern`关键字，所以在我看来，您唯一的选择是包含 . c 文件本身：

```
#include "add.c"
#include "subtract.c"
/* etc... */

int main()
{
    // use functions defined in "add.c", "subtract.c", etc.
} 
```

请注意，这是一种不好的形式，因为您包含实现而不是接口，并且可能会引入一堆您不想要或不需要的东西。如果这不能回答您的问题，那么问题中缺少一些东西，您的老师的一些指示。

# postgresql - PostgreSQL 计数查询优化

> ID：13075210
> 
> 赞同：10
> 
> 时间：2012-10-25T18:48:01.657
> 
> 标签：postgresql, count, database-performance, postgresql-performance

我在 postgresql 中有一个表，其中包含一个不断更新的数组。

在我的应用程序中，我需要获取该数组列中不存在特定参数的行数。我的查询如下所示：

```
select count(id) 
from table 
where not (ARRAY['parameter value'] <@ table.array_column) 
```

但是当增加该查询的行数和执行量（每秒几次，可能数百或数千次）时，性能会下降很多，在我看来，postgresql 中的计数可能具有线性执行顺序（我'不完全确定这一点）。

基本上我的问题是：

是否存在适用于这种情况的我不知道的现有模式？什么是最好的方法？

您能给我的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T00:30:20.570

PostgreSQL 实际上支持数组列上的 GIN 索引。不幸的是，它似乎不适用于`NOT ARRAY[...] <@ indexed_col`，而且`GIN`索引也不适合频繁更新的表。

演示：

```
CREATE TABLE arrtable (id integer primary key, array_column integer[]);

INSERT INTO arrtable(1, ARRAY[1,2,3,4]);

CREATE INDEX arrtable_arraycolumn_gin_arr_idx
ON arrtable USING GIN(array_column);

-- Use the following *only* for testing whether Pg can use an index
-- Do not use it in production.
SET enable_seqscan = off;

explain (buffers, analyze) select count(id) 
from arrtable 
where not (ARRAY[1] <@ arrtable.array_column); 
```

不幸的是，这表明我们不能使用索引。如果您不否定它可以使用的条件，那么您可以搜索并计算包含搜索元素的行*（*通过删除`NOT`）。

*您*可以使用索引来计算包含目标值的条目，然后从所有条目的计数中减去该结果。由于`count`在 PostgreSQL（9.1 和更早版本）中 ing 表中的所有行都非常慢，并且需要顺序扫描，这实际上会比您当前的查询慢。如果在 9.2 上有一个 b-tree 索引，则可以使用仅索引扫描来计算行数`id`，在这种情况下，这实际上可能没问题：

```
SELECT (
  SELECT count(id) FROM arrtable
) - (
  SELECT count(id) FROM arrtable 
  WHERE (ARRAY[1] <@ arrtable.array_column)
); 
```

对于 Pg 9.1 及更低版本，它的性能保证比您的原始版本差，因为除了 seqscan 您的原始版本*还*需要 GIN 索引扫描。我现在已经在 9.2 上对此进行了测试，它似乎确实使用了一个索引来进行计数，所以对于 9.2 来说值得探索。使用一些不那么琐碎的虚拟数据：

```
drop index arrtable_arraycolumn_gin_arr_idx ;
truncate table arrtable;
insert into arrtable (id, array_column)
select s, ARRAY[1,2,s,s*2,s*3,s/2,s/4] FROM generate_series(1,1000000) s;
CREATE INDEX arrtable_arraycolumn_gin_arr_idx
ON arrtable USING GIN(array_column); 
```

请注意，像这样的 GIN 索引会大大降低更新速度，并且一开始创建速度也很慢。它不适合更新太多的表格——比如你的表格。

更糟糕的是，**使用此索引的查询所花费的时间是原始查询的两倍，并且在**同一数据集上最多只有一半的时间。对于索引不是很有选择性的情况，例如`ARRAY[1]`原始查询的 4s vs 2s，这是最糟糕的。在索引具有高度选择性的情况下（即：没有多少匹配项，例如`ARRAY[199]`），它的运行时间约为 1.2 秒，而原始索引的运行时间为 3 秒。这个索引根本不值得这个查询。

这里的教训？有时，正确的答案就是进行顺序扫描。

由于这不会影响您的命中率，因此请按照@debenhur 的建议使用触发器维护物化视图，或者尝试将数组反转为条目没有的参数列表，*以便*您可以使用 GiST 索引作为@maniek 建议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T02:17:10.667

> 是否存在适用于这种情况的我不知道的现有模式？什么是最好的方法？

在这种情况下，您最好的选择可能是规范化您的模式。将数组拆分成一个表。在属性表上添加 b 树索引，或对主键进行排序，以便通过`property_id`.

```
CREATE TABLE demo( id integer primary key );
INSERT INTO demo (id) SELECT id FROM arrtable;
CREATE TABLE properties (
  demo_id integer not null references demo(id),
  property integer not null,
  primary key (demo_id, property)
);
CREATE INDEX properties_property_idx ON properties(property); 
```

然后您可以查询属性：

```
SELECT count(id) 
FROM demo 
WHERE NOT EXISTS (
  SELECT 1 FROM properties WHERE demo.id = properties.demo_id AND property = 1
) 
```

我预计这会比原始查询快得多，但实际上对于相同的样本数据来说几乎是一样的；它在与原始查询相同的 2s 到 3s 范围内运行。同样的问题是，搜索*不*存在的东西比搜索存在的东西要慢*得多*。如果我们正在寻找包含属性的行，我们可以避免 seqscan`demo`并直接扫描`properties`匹配的 ID。

同样，对包含数组的表进行 seq 扫描也可以完成这项工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T19:41:57.997

我认为您当前的数据模型不走运。尝试考虑数据库必须为您的查询执行的算法。如果没有顺序扫描数据，它就无法工作。

您可以安排列以便它存储数据的倒数（以便查询是`select count(id) from table where ARRAY[‘parameter value’] <@ table.array_column`）？此查询将使用 gin/gist 索引。

# jquery - jQuery add active tab class to the Body tag

> ID：13075214
> 
> 赞同：0
> 
> 时间：2012-10-25T18:48:09.123
> 
> 标签：jquery, if-statement, addclass

On the website im building, each tab has a class on its li of either tab1, tab2, tab3 etc

What I want to do is first check to see if a tab has a class of "cur" then if it does, check the rest of the li to see if it has another class of either "tab1", "tab2", "tab3", "tab4" or "tab5" then add that "tab" class to the body tag

to get get something like this

```
<body class="tab2">

<div class="nav">
<ul>
    <li class="current1 tab1">First Tab</li>
    <li class="current1 cur sub tab2">Second Tab</li>
    <li class="current1 sub tab3">Third Tab</li>    
    <li class="current1 sub tab4">Fouth Tab</li>    
    <li class="current1 sub tab5">Fifth Tab</li>    
</ul></div> 
```

i've tried something like the jQuery below but it always adds an additional class of tab5 to the body as well

```
 if ( $('.navigation ul li.tab1').hasClass('cur') ) {
        $('body').addClass('tab1'); 
     } else if ( $('.navigation ul li.tab2').hasClass('cur') ) {
        $('body').addClass('tab2'); 
    } else if ( $('.navigation ul li.tab3').hasClass('cur') ) {
        $('body').addClass('tab3'); 
    } else if ( $('.navigation ul li.tab4').hasClass('cur') ) {
        $('body').addClass('tab4'); 
    } else ( $('.navigation ul li.tab5').hasClass('cur') ); {
        $('body').addClass('tab5');
    } 
```

I know there is a much cleaner way of doing it but can't seem to work it out

I wish I could just add the class manually, but i dont have access to the HTML so have to generate it with javaScript

Any help much appreicated

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:08:13.117

仅遵循您提供的基础知识（不确定您是否使用 jQueryUI 之类的选项卡库），您可以非常轻松地简化您正在做的事情，而无需所有 ifs。

见下文：

```
var patt = new RegExp(/tab[0-9]/),
    tabClass = "" + $(".cur").attr("class").match(patt);
$('body').removeClass("tab1 tab2 tab3 tab4 tab5")
    .addClass("" + tabClass); // the "" + is required 
```

作为一条线：

```
$('body').removeClass("tab1 tab2 tab3 tab4 tab5").addClass("" + $(".cur").attr("class").match(/tab[0-9]/)); 
```

# [jsFiddle](http://jsfiddle.net/SpYk3/J3qWx/)

> 1-liner 的故障

*   [$('body')](http://api.jquery.com/category/selectors/) jQuery Selector - 这个抓取`body`元素
*   [.removeClass("tab1 tab2 tab3 tab4 tab5")](http://api.jquery.com/category/selectors/)从元素中删除可能的类，如果元素上不存在类则没有错误，所以不用担心
*   [.addClass(](http://api.jquery.com/addClass/)这开始添加你想要添加到你的 body 元素的类
*   "" + [$(".cur")](http://api.jquery.com/category/selectors/)这里的 " 确保正确返回正则表达式匹配的字符串，当然还有你的基本 jQuery 选择器，在这种情况下使用类抓取元素`cur`
*   [.attr("class")](http://api.jquery.com/attr/)这旨在获取包含类的元素上的所有类`cur`
    *   在较新的 jQuery 版本中，您可能会考虑将其更改为[.prop()](http://api.jquery.com/prop/)
*   [.match(/tab[0-9]/)](http://www.w3schools.com/jsref/jsref_match.asp) ) 最后，与正则表达式一起使用的旧 JS 匹配方法仅提取`tab`以整数 0 到 9 开头和结尾的类名，当然还有`)`调用[.](http://api.jquery.com/addClass/)元素上的[addClass()](http://api.jquery.com/addClass/)`body`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:00:09.577

```
$('.nav li').click(function(){
    $('.nav li').removeClass('active');
    // set the attribute of tab that was clicked as active
    $(this).attr('class', 'active');                
}); 
```

在这里找到 jsfiddle：http://jsfiddle.net/P5Kzr/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:52:27.873

如果您使用：

```
$('.navigation ul li.cur'); 
```

您将返回一个包含与选择器匹配的所有元素的数组。然后您可以使用元素 ids ala：

```
var elems=$('.navigation ul li.cur');
$('body').removeClass()
elems.each(function(){
    $('body').addClass($(this).attr('id'))
}) 
```

# c# - 比较两个列表（整数）是否相等

> ID：13075218
> 
> 赞同：9
> 
> 时间：2012-10-25T18:48:36.677
> 
> 标签：c#, .net, vb.net, linq

我知道这个非常相似的问题已经被问过很多次了，例如[比较两个集合是否相等，而不管它们中的项目顺序如何](https://stackoverflow.com/questions/50098/comparing-two-collections-for-equality)，但我正在尝试使用我正在阅读的解决方案，但有些东西不起作用......这一定是我犯的一个愚蠢的错误......请帮忙！

好的，这是我的场景，假设我在代码中创建了以下 3 个列表：

```
Dim lst1 as new list(of integer)
Dim lst2 as new list(of integer)
Dim lst3 as new list(of integer) 
```

然后，在代码中，我最终得到列表中的以下值：

```
lst1:    lst2:    lst3:
1        1        2
2        2        3
3        3        4
4        4        5 
```

所以，很明显，lst1 和 lst2 相等，而 lst1 和 lst3 不相等，但是我可以在 if 语句中写入什么代码来验证这一点？

我试过了：

```
lst1.SequenceEqual(lstXX) 
```

这对于我尝试过的 lst2 和 lst3 都返回**True ：**

```
lst1.Equals(lstXX) 
```

这对于 lst2 和 lst3 都返回**False**

现在，我知道我可以通过比较计数和 lst1.Except(lstXX) 的代码来做到这一点，但我想知道更多，所以我在这里做错了什么，更重要的是，最有效的方法是什么？

谢谢！！！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-25T18:59:27.437

假设您希望订购很重要，[`SequenceEqual`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)这正是您想要的 - 在您提供的示例中，`lst1.SequenceEqual(lst3)` *将*返回 false。这是一个简短但完整的程序来演示：

```
using System;
using System.Collections.Generic;
using System.Linq;

class Test
{
    static void Main(string[] args)
    {
        var lst1 = new List<int> { 1, 2, 3, 4 };
        var lst2 = new List<int> { 1, 2, 3, 4 };
        var lst3 = new List<int> { 2, 3, 4, 5 };

        Console.WriteLine(lst1.SequenceEqual(lst2)); // True
        Console.WriteLine(lst1.SequenceEqual(lst3)); // False
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:00:45.050

```
class Program
{
    static void Main(string[] args)
    {
        var list1 = new List<int>() { 1, 2, 3, 4 };
        var list2 = new List<int>() { 1, 2, 3, 4 };
        var list3 = new List<int>() { 2, 3, 3, 4 };

        Console.WriteLine(list1.SequenceEqual(list2)); // True
        Console.WriteLine(list1.SequenceEqual(list3)); // False
        Console.ReadLine();
    }
} 
```

按预期工作。一定是别的东西。

你*确定*你的`i`和`j`你认为的那样吗？

您*确定*您的列表按照您在问题中所写的顺序排列吗？如果它们的排序不正确，那`SequenceEqual`将返回**False**。

# php - Can't get curl working in wamp

> ID：13075220
> 
> 赞同：0
> 
> 时间：2012-10-25T18:48:41.907
> 
> 标签：php, curl, wamp

I'm a complete PHP/wamp noob but am just trying to get a simple bit of code to work. I'm using a library to help me out with OAuth for Twitter, and have been writing and testing my code with wamp on Windows.

This is my code:

```
<html>
<body>

<?php

include 'tmhOAuth.php';
include 'tmhUtilities.php';

$tweet_text = 'Test Tweet. If you can see this, my PHP code is working! Yay';
echo "Posting...\n";
$result = post_tweet($tweet_text);
echo "Response code: " . $result . "\n";

function post_tweet($tweet_text) {

    $connection = new tmhOAuth(array(
        'consumer_key' => 'xxxxxxxxxx',
        'consumer_secret' => 'xxxxxxxxxxxx',
        'user_token' => 'xxxxxxxxxxxxxxxxx',
        'user_secret' => 'xxxxxxxxxxxxxx',
    ));

    $connection->request('POST',
        $connection->url('1/statuses/update'),
        array('status' => $tweet_text));

    return $connection->response['code'];
}

?>

</body>
</html> 
```

And the error message I get: Fatal error: Call to undefined function curl_init() in C:\wamp\www\PHP\tmhOAuth.php on line 581 tmhOAuth is one of the library files I'm using.

After a quick Google, I followed this tutorial: [http://www.phpmind.com/blog/2011/02/how-to-enable-curl-in-wamp/](http://www.phpmind.com/blog/2011/02/how-to-enable-curl-in-wamp/) I found php.ini in both the apache and php folders, and uncommented the lines about curl. I also replaced php_curl.dll in the ext folder with a different version of the file as instructed by another tutorial I found.

Please help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:55:23.383

您是否检查了哪个 php.ini 与您的 PHP 一起加载？制作 php 文件并将 phpinfo() 放入其中，运行它并检查“加载的配置文件”

您是否重新启动了网络服务器？因为 php.ini 在您的情况下会在网络服务器重新启动时重新加载。

这个类使用https协议吗？然后您还需要取消注释 openssl 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:52:32.637

在 Windows中测试配置的一个好`PHP.INI`方法是运行 PHP-CLI 或检查日志。

您可以打开`cmd`并运行命令`php`以查看您的 conf 发生了什么。

# git - git-tf checkin Exception in thread "main" java.lang.StackOverflowError

> ID：13075221
> 
> 赞同：3
> 
> 时间：2012-10-25T18:48:46.270
> 
> 标签：git, tfs, git-tf

I am trying to take an existing git repository and check it in to TFS Preview using git-tf, and I am getting an error when I try to do the check in. Here is what I have done so far.

1.  git clone -b [https://github.com/](https://github.com/).git to clone the branch that I want to check in. I want to check in a branch that isn't named master into TFS.

2.  cd into local path of code.

3.  git tf configure https://.tfspreview.com/DefaultCollection $/ Then, I configured git tf to configure the TFS connection.

4.  git tf checkin Then, I got the following error:

Checking in to $/: 0% git-tf: no HEAD ref

1.  So I then created a master branch since I didn't have one by doing the following: git branch -b master

2.  Switched back to the branch I checked out: git checkout .

3.  Tried the check in again: git tf checkin.

4.  That got me past the first error. However, I got the following error, and I am not sure what to do about this.

Does anyone have any ideas on how to get past the error below from running git tf checkin?

Thanks!

```
Connecting to TFS...
Checking in to $/Sandbox/HammerheadGitTest/sCRM: 
Exception in thread "main" java.lang.StackOverflowError
    at java.io.RandomAccessFile.seek(Native Method)
    at org.eclipse.jgit.storage.file.PackFile.read(PackFile.java:614)
    at org.eclipse.jgit.storage.file.WindowCache.load(WindowCache.java:314)
    at org.eclipse.jgit.storage.file.WindowCache.getOrLoad(WindowCache.java:393)
    at org.eclipse.jgit.storage.file.WindowCache.get(WindowCache.java:204)
    at org.eclipse.jgit.storage.file.WindowCursor.pin(WindowCursor.java:334)
    at org.eclipse.jgit.storage.file.WindowCursor.copy(WindowCursor.java:203)
    at org.eclipse.jgit.storage.file.PackFile.readFully(PackFile.java:526)
    at org.eclipse.jgit.storage.file.PackFile.load(PackFile.java:684)
    at org.eclipse.jgit.storage.file.PackFile.get(PackFile.java:227)
    at org.eclipse.jgit.storage.file.ObjectDirectory.openObject1(ObjectDirectory.java:439)
    at org.eclipse.jgit.storage.file.FileObjectDatabase.openObjectImpl1(FileObjectDatabase.java:172)
    at org.eclipse.jgit.storage.file.FileObjectDatabase.openObject(FileObjectDatabase.java:157)
    at org.eclipse.jgit.storage.file.WindowCursor.open(WindowCursor.java:122)
    at org.eclipse.jgit.revwalk.RevWalk.getCachedBytes(RevWalk.java:856)
    at org.eclipse.jgit.revwalk.RevCommit.parseHeaders(RevCommit.java:136)
    at org.eclipse.jgit.revwalk.RevWalk.parseHeaders(RevWalk.java:965)
    at org.eclipse.jgit.revwalk.RevWalk.parseAny(RevWalk.java:814)
    at org.eclipse.jgit.revwalk.RevWalk.parseCommit(RevWalk.java:725)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:260)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286)
    at com.microsoft.gittf.core.util.CommitWalker.detectAutoSquashedPath(CommitWalker.java:286) 
```

The last two lines continues over and over again for a long time.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:47:30.227

我在[codeplex.com](http://gittf.codeplex.com/workitem/43)上收到了关于解决此问题的回复。这是我得到的答案：

你好，

您看到这个问题是因为您试图签入一个可能超过 2000 到 3000 个提交深度的巨大提交树。我们的代码有一些递归逻辑来识别要签入的提交。这个逻辑因为它本质上是递归的，所以将 JVM 调用堆栈大小推到 1800 标记以上，这大约是 JVM 使用的默认限制，在此之上JVM 将抛出您所看到的 StackOverFlowException。这是 JVM 的限制，幸运的是，有一种解决方法可以使用参数来扩展堆栈大小以克服此错误。

您需要更新 git-tf 部署目录中的 git-tf.cmd（如果未在 Windows 中运行，则为 git-tf），并将 –Xss3m 附加到对“java.exe”的调用中。

我们有一个用户故事可以让这个场景在未来变得更好。

谢谢，尤哈娜

这是答案的链接：http: [//gittf.codeplex.com/workitem/43](http://gittf.codeplex.com/workitem/43)

# wordpress - Wordpress - 显示帖子所在的类别？

> ID：13075225
> 
> 赞同：0
> 
> 时间：2012-10-25T18:48:54.757
> 
> 标签：wordpress

我正在尝试获取帖子在单​​个帖子页面上显示的类别。

它目前显示了整个站点使用的所有类别。

我查看了 WordPress Codex，但找不到我要找的东西。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:02:01.603

您想在 the_loop 中使用the_category [() 函数](http://codex.wordpress.org/Function_Reference/the_category)

# c# - 我的添加逻辑在 C# 代码中不起作用

> ID：13075226
> 
> 赞同：1
> 
> 时间：2012-10-25T18:48:55.097
> 
> 标签：c#, asp.net, .net

```
 public partial class Addition : System.Web.UI.UserControl
    {
        int Add1;
        int Add2;
        int answer;

        protected void Page_Load(object sender, EventArgs e)
        {

    }
    protected void Button2_Click(object sender, EventArgs e)
    {

        //Generates ramdom numbers for addition problem
        Random oRand = new Random();

        Add1 = oRand.Next(30);
        Add2 = oRand.Next(30);

        Label1.Text = Add1.ToString();
        Label2.Text = Add2.ToString();

    }
    protected void Button1_Click(object sender, EventArgs e)
    {

        //Validates users answer
        answer = Convert.ToInt32(TextBox1.Text);

        if (Add1 + Add2 != answer)
            Label3.Text = "InCorrect Answer";
        else
            Label3.Text = "Correct Answer";

        }
    } 
```

在过去的 30 分钟里，我一直在看这个，我知道我错过了一些简单的东西。当我执行程序并将正确答案放在 TextBox1 中时，Label3 仍然会生成“InCorrect Answer”。我知道这是补救措施，但我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:58:30.917

用户控件在回发时重新创建（以及在每次页面加载时），因此当您设置 and 的值时`Add1`，`Add2`它们会在回发时丢失。

您应该使用容器`ViewState`或`Session`保存这些值。

编辑：

或者正如@IronMan84 建议的那样，只需使用标签（duh）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:58:48.920

试试这个：

```
Add1 = Convert.ToInt32(Label1.Text);
Add2 = Convert.ToInt32(Label2.Text);

answer = Convert.ToInt32(TextBox1.Text);

if (Add1 + Add2 != answer)
  Label3.Text = "InCorrect Answer";
else
   Label3.Text = "Correct Answer"; 
```

# hashmap - hashmap remove complexity

> ID：13075233
> 
> 赞同：2
> 
> 时间：2012-10-25T18:49:24.740
> 
> 标签：hashmap, complexity-theory

So a lot of sources say the hashmap remove function is O(1), but I don't see how this could be unless a hashmap were backed by a linkedlist because list removals are O(n). Could someone explain?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T20:20:39.487

您可以将 Hasmap 视为一个数组。想象一下，您想将地球上所有人类的物体存储在某个地方。您可以为每个人获取一个唯一编号，并使用一个维度为 10*10^20 的数组。如果有人出生，她/他将获得下一个免费号码并添加到末尾。如果有人死了，则使用她/他的号码并将数组条目设置为空。

您可以很容易地看到，添加或删除某人，您只需要恒定的时间。计算数组地址，完成（如果你有随机存取存储器）。

Hashmap 添加了什么？有2个动机。一方面，你不想拥有这么大的阵列。如果您只想存储来自世界各地的 10 个人，则该数组的几乎所有条目都是免费的。另一方面，并​​非您要存储在某处的所有数据都具有唯一编号。有时有多次相同的数字，有些数字现在确实显示整体，有时您没有任何数字。因此，您定义了一个函数，该函数使用输入中的大数字并将它们减少为较小范围内的数字。这种减少在某种程度上应该是，对于不同的输入，结果数字很可能是唯一的。

示例：假设您要存储从 1 到 100000000 的 10 个数字。您可以使用具有 100000000 个索引的数组。或者您可以使用具有 100 个索引的数组和函数 f(x) = x % 100。如果您有数字 1234，则 f(1234) = 34。将 34 标记为已分配。

现在你可能会问，如果你有数字 2234 会发生什么？那我们就发生碰撞。你需要一些策略来处理这个，有几个。研究一些文献或为此提出具体问题。

如果你想存储一个字符串，你可以想象使用每个字符的长度或 ascii 值的总和。

如您所见，我们可以轻松地存储一些东西，并轻松地再次访问它。我们必须做什么？从函数计算散列（一个好的函数是常数时间），访问数组（常数时间），存储或删除（常数时间）。

在现实世界中，一个好的散列函数并不是那么容易。尝试坚持使用 java 中包含的内容。

如果您想阅读更多详细信息，关于哈希表的维基百科文章是一个很好的起点：[http ://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T00:15:19.977

我不认为 remove(key) 复杂度是 O(1)。如果我们有一个有很多冲突的大哈希表，那么在最坏的情况下它将是 O(n)。最坏的情况很少见，但我们不能忽视 O(1) 不能保证的事实。

# python - 将“帮助”移动到 python argparse 中的不同参数组

> ID：13075241
> 
> 赞同：25
> 
> 时间：2012-10-25T18:50:05.503
> 
> 标签：python, argparse

目前我正在使用 Python 创建一个目录阅读器程序。我正在使用“argparse”来解析命令行中的参数。我有以下代码：

```
parser = argparse.ArgumentParser(prog = "LS.py",
                                 usage = "%(prog)s [options] [path1 [path2 [...pathN]]]\nThe paths are optional; if not given . is used.")

group = parser.add_argument_group("Options")

group.add_argument("-path", default = ".", help = argparse.SUPPRESS, metavar = "")
group.add_argument("-m", "--modified", default = False,
                    help = "show last modified date/time [default: off]",
                    metavar = "")
group.add_argument("-o ORDER", "--order=ORDER", nargs = 2, default = "name",
                    help = "order by ('name', 'n', 'modified', 'm', 'size', 's')\n[default: name]",
                    metavar = "")
group.add_argument("-r", "--recursive", default = False,
                    help = "recurse into subdirectories [default: off]",
                    metavar = "")
group.add_argument("-s", "--sizes", default = False,
                   help = "show sizes [default: off]", metavar = "")

args = parser.parse_args()
return args 
```

当以以下方式调用“LS.py -h”时，它会产生以下输出：

```
usage: LS.py [options] [path1 [path2 [...pathN]]]
The paths are optional; if not given . is used.

optional arguments:
  -h, --help            show this help message and exit

Options:
  -m , --modified       show last modified date/time [default: off]
  -o ORDER  , --order=ORDER  
                    order by ('name', 'n', 'modified', 'm', 'size', 's')
                    [default: name]
  -r , --recursive      recurse into subdirectories [default: off]
  -s , --sizes          show sizes [default: off] 
```

我的问题：有没有办法将默认帮助参数移动到选项等组中？此外，我似乎无法找到删除选项参数中逗号前空格的方法。理想的输出是：

```
Usage: ls.py [options] [path1 [path2 [...pathN]]]
The paths are optional; if not given . is used.

Options:
  -h, --help            show this help message and exit
  -m, --modified        show last modified date/time [default: off]
  -o ORDER, --order=ORDER
                        order by ('name', 'n', 'modified', 'm', 'size', 's')
                        [default: name]
  -r, --recursive       recurse into subdirectories [default: off]
  -s, --sizes           show sizes [default: off] 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-25T19:06:17.263

您可以使用`add_help=False`禁用内置帮助命令并添加您自己的命令，使用`action="help"`（感谢@mgilson！）

要摆脱空格，请不要设置`metavar`为空字符串。您的选项应该被指定使用`action="store_true"`以使它们成为真正的（无参数）选项：

```
import argparse

parser = argparse.ArgumentParser(prog="LS.py",
                                 usage="%(prog)s [options] [paths...]\nThe paths are optional; if not given . is used.",
                                 add_help=False)

group = parser.add_argument_group("Options")

group.add_argument("-h", "--help", action="help", help="show this help message and exit")
group.add_argument("-path", default=".", help=argparse.SUPPRESS)
group.add_argument("-m", "--modified", action="store_true",
                    help="show last modified date/time")
group.add_argument("-o", "--order", nargs=1, default="name",
                    help="sort order (n[ame], m[odified], s[ize])\n[default: name]")
group.add_argument("-r", "--recursive", action="store_true",
                    help="recurse into subdirectories")
group.add_argument("-s", "--sizes", action="store_true",
                   help="show sizes")

args = parser.parse_args() 
```

输出：

```
Options:
  -h, --help            show this help message and exit
  -m, --modified        show last modified date/time
  -o ORDER, --order ORDER
                        sort order (n[ame], m[odified], s[ize]) [default:
                        name]
  -r, --recursive       recurse into subdirectories
  -s, --sizes           show sizes 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T19:03:52.853

你当然可以这样做。诀窍是只添加构造函数，然后将您自己的帮助操作添加到组中`add_help=False`：`ArgumentParser`

```
import argparse

parser = argparse.ArgumentParser(prog = "LS.py",
                                 usage = "%(prog)s [options] [path1 [path2 [...pathN]]]\nThe paths are optional; if not given . is used.",
                                 add_help=False)

group = parser.add_argument_group("Options")

group.add_argument("-path", default = ".", help = argparse.SUPPRESS, metavar = "")
group.add_argument("-m", "--modified", default = False,
                    help = "show last modified date/time [default: off]",
                    metavar = "")
group.add_argument("-o ORDER", "--order=ORDER", nargs = 2, default = "name",
                    help = "order by ('name', 'n', 'modified', 'm', 'size', 's')\n[default: name]",
                    metavar = "")
group.add_argument("-h", "--help", action='help', help='print this fabulous help message')
group.add_argument("-r", "--recursive", default = False,
                    help = "recurse into subdirectories [default: off]",
                    metavar = "")
group.add_argument("-s", "--sizes", default = False,
                   help = "show sizes [default: off]", metavar = "")

args = parser.parse_args() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-05T07:56:47.723

为了浓缩和简化[nneonneo 先前的答案](https://stackoverflow.com/a/13075485/832230)，您可以：

```
import argparse

parser = argparse.ArgumentParser(prog="LS.py",
                                 usage="%(prog)s [options] [paths...]\nThe paths are optional; if not given . is used.",
                                 add_help=False)

add_arg = parser.add_argument_group("Options").add_argument

add_arg("-h", "--help", action="help", help="show this help message and exit")
add_arg("-path", default=".", help=argparse.SUPPRESS)
add_arg("-m", "--modified", action="store_true",
        help="show last modified date/time")
add_arg("-o", "--order", nargs=1, default="name",
        help="sort order (n[ame], m[odified], s[ize])\n[default: name]")
add_arg("-r", "--recursive", action="store_true",
        help="recurse into subdirectories")
add_arg("-s", "--sizes", action="store_true",
        help="show sizes")

args = parser.parse_args() 
```

基本上，与上一个答案略有不同的是，**不需要保存`group`然后重复调用该`add_argument`方法就可以了**。

# algorithm - 硬币变化（动态编程）

> ID：13075242
> 
> 赞同：2
> 
> 时间：2012-10-25T18:50:09.870
> 
> 标签：algorithm, dynamic-programming

对于硬币找零问题，我们通常有以下递归关系：（`P`是我们需要找零的总金额，`d_i`是可用的硬币） ![](../Images/5acf2df9758c6d9e63f1f251915ab183.png)

但是我们不能这样：（`V`是给定的可用硬币的排序集合，`i`并且`j`它的下标`Vj`是给定的最高价值硬币）

```
C[p,Vi,j] = C[p,Vi,j-1]     if Vj > p
          = C[p-Vj,Vi,j] + 1  if Vj <=p 
```

我写的有什么问题吗？虽然解决方案不是动态的，但它不是更有效吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:11:19.883

考虑`P = 6, V = {4, 3, 1}`。你会选择`4, 1, 1`而不是`3, 3`，所以`3`硬币而不是最佳的`2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:09:31.063

你写的类似于只在特定条件下工作的贪心算法。（请参阅 -[如何判断贪心算法是否足以找到最小硬币变化？](https://stackoverflow.com/questions/6025076/how-to-tell-if-greedy-algorithm-suffices-for-the-minimum-coin-change-problem#6031625)）。

另外，在您的版本中，您实际上并没有`Vi`在重复中使用，所以这只是浪费内存

# oozie - Can oozie control jobs outside of Hadoop?

> ID：13075243
> 
> 赞同：1
> 
> 时间：2012-10-25T18:50:10.760
> 
> 标签：oozie

From documentation, it isn't very clear whether oozie can schedule and control jobs outside of Hadoop? Can someone shed some light on this? If not, is there any open source based workflow engine which can do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:58:23.043

尝试考虑使用 chronos（来自 airbnb）高级版本的 cron 和 UI，建立在 mesos 之上。airbnb.github.com/chronos/

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:36:11.187

我相信没有。因为 Oozie 本身没有资源管理策略，它所做的只是在正确的时间向 Hadoop 的作业跟踪器提交作业。此外，对于每个 Oozie 工作流，都会有一个启动器作业，负责将工作流中的真实作业提交给 Hadoop。启动器作业本身就是 Hadoop 作业。所以，我认为对于 Oozie 3.2 之前的版本，答案应该是否定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:03:46.380

您可以考虑[通过链接来尝试 azkaban](http://data.linkedin.com/opensource/azkaban/quick-start)。它是专门为 hadoop 构建的。但是可以在 azkaban 的作业文件中指定 unix 命令。因此，您可以为任何可以使用命令行运行的应用程序开发工作流程。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-15T08:27:00.133

我一直在研究一个名为 Soop 的新工作流引擎。[https://github.com/radixCSgeek/soop](https://github.com/radixCSgeek/soop)它非常轻量级，使用类似 cron 的语法设置和运行非常简单。它可以运行任何 Java POJO 以及运行 shell 进程，因此您可以启动 bash 脚本或其他任何东西。

# sql - SQL Server 2005 IndexOptimize SP 针对一个表的索引

> ID：13075245
> 
> 赞同：4
> 
> 时间：2012-10-25T18:50:14.130
> 
> 标签：sql, sql-server-2005, indexing

我试图弄清楚如何使用`IndexOptimize`从[http://ola.hallengren.com/](http://ola.hallengren.com/)获得的存储过程来仅针对单个表的索引运行。

当我运行以下查询时：

```
SELECT * 
FROM sys.dm_db_index_physical_stats (DB_ID(N'database_name'), 
                                     OBJECT_ID(N'dbo.table_name'), 
                                     NULL, NULL , 'DETAILED');' 
```

`IndexOptimize`我在运行作业之前和之后都得到了这个结果：

[http://cl.ly/image/472J160R1y2n](http://cl.ly/image/472J160R1y2n)

这是我要运行的内容：

```
EXECUTE dbo.IndexOptimize
     @Databases = 'database_name',
     @Indexes = 'database_name.dbo.table_name',
     @FragmentationLow = NULL,
     @FragmentationMedium = 'INDEX_REORGANIZE,INDEX_REBUILD_ONLINE',
     @FragmentationHigh = 'INDEX_REBUILD_ONLINE',
     @FragmentationLevel1 = 5,
     @FragmentationLevel2 = 30' 
```

查询完成，但似乎对表的索引没有影响。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T03:50:19.230

您已选择仅允许在线重建碎片 > 30% 的索引。在线重建索引只是企业功能。您使用的是 SQL Server 企业版吗？

# objective-c - 是否存在用于通过相机检测形状的任何类型的 iOS API？

> ID：13075246
> 
> 赞同：1
> 
> 时间：2012-10-25T18:50:21.337
> 
> 标签：objective-c, ios

我最近一直在使用增强现实 API，但无法实现不规则形状检测，即手。我希望能够通过视频/摄像头检测手形并根据手势执行代码。类似的东西已经存在了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:56:02.667

你看过[OpenCV](http://opencv.willowgarage.com/wiki/)吗？

这些是我使用 Google 找到的一些链接：[使用 OpenCV 进行人脸检测](http://opencv.willowgarage.com/wiki/FaceDetection)，[机器人视觉](http://www.iheartrobotics.com/search/label/Vision%20for%20Robots)

# iis - Publish web api on IIS

> ID：13075247
> 
> 赞同：2
> 
> 时间：2012-10-25T18:50:23.537
> 
> 标签：iis, asp.net-web-api

If I create a small web api project and publish it to a server with IIS7.5, i can't open the site. I get an

HTTP Error 403.14 - Forbidden The Web server is configured to not list the contents of this directory.

Someone who can help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:52:25.113

您的网站有默认页面吗？尝试将地址放入 URL 中的默认页面。

# android - 设置自定义通知声音Android时奇怪的声音

> ID：13075251
> 
> 赞同：2
> 
> 时间：2012-10-25T18:50:28.000
> 
> 标签：android

我设置了以下代码来播放自定义 MP3 声音：

```
notification.sound = Uri.parse("android.resource://nl.myapp.myappver/" + R.raw.mysound); 
```

然而，在我的 HTC 调试手机上，声音没有播放，它发出了一种非常奇怪的音调。这不是默认音调，因为听起来不同。日志

```
10-25 20:48:00.578: V/MediaPlayer(31528): setDataSource(android.resource://nl.myapp.myappver/2130968576)
10-25 20:48:00.578: V/MediaPlayerService(31483): setDataSource(android.resource://nl.myapp.myappver/2130968576)
10-25 20:48:00.578: V/MediaPlayerService(31483): getPlayerTypeFromMAP(android.resource://nl.myapp.myappver/2130968576): PLAYERS_MAP[18].playertype (UNKNOWN player_type code)0
10-25 20:48:00.578: I/AwesomePlayer(31483): setDataSource_l('android.resource://nl.myapp.myappver/2130968576')
10-25 20:48:02.380: D/HfmMessageReceiver(15434): receive ACTION_NOTIFICATION_SOUND_COMPLETE, pkg= nl.myapp.myappver, id= 920 
```

我的手机播放不同音调的原因是什么？声音文件是一个 +/- 4 秒的 MP3 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:24:32.353

找到了答案，我必须将文件保存为 .ogg 而不是 .mp3 现在声音播放正常！

# c# - Static members and instance methods for multiple requests at the same time

> ID：13075254
> 
> 赞同：2
> 
> 时间：2012-10-25T18:50:38.217
> 
> 标签：c#, .net, static

If I define an object like a logger object as static in a class, then call a method like the following:

```
public class Manager
{    
    private static ClientLogManager log = new ClientLogManager();

    public void Log(string Message)
    {
         log.Debug(string Message);
    }
} 
```

This is defined in a class library project.

My understanding is that the static variable is shared between all requests for this application, so the log object is shared. However the method Debug itself is not static, but the object is static, so there will be only one instance of this method. Is that correct?

If a lot of users are calling this code at the same time, if 2 requests are calling the log.Debug method at the same time, can the message of the 2nd request overwrite the message of the 1st request?

Also, is it better to replace this with a Singleton? wouldn't it be one Singleton object per request?

Here is the ClientLogManager code

```
 public class ClientLogManager
    {
        #region Member Variables

        private static readonly ILog _log = LogManager.GetLogger(typeof(ClientLogManager));

        #endregion

        #region Constructors

        public ClientLogManager()
        {

        }

        #endregion

        #region Public Methods

        public void Debug(string message)
        {
            _log.Debug(message);
        }

        #endregion
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:06:10.370

> 如果很多用户同时调用这段代码，如果2个请求同时调用log.Debug方法，那么第2个请求的消息会覆盖第1个请求的消息吗？

是的，除非记录器是专门为支持这一点而编写的。大多数记录器都旨在支持这一点，因此除非您从头开始创建自己的记录器，否则它可能会在内部同步所有写入（这样您就不必这样做）。如果您不确定是否应该检查您正在使用的特定记录器的文档，以查看它在同时写入时是否支持或中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:17:29.147

*“我的理解是，这个应用的所有请求都共享静态变量，所以共享日志对象。”* 正确，每个 AppDomain 仅存在 1 个静态成员实例。

*“但是Debug方法本身不是静态的，对象是静态的，所以这个方法的实例只有一个，对吗？”* 声明本身是正确的，但是...

它归结为：

*   静态方法和实例方法都只在内存中“存在”一次，区别在于静态方法不需要声明它的类的实例才能执行，而实例方法则需要。

*   如果可以同时处理多个请求，则它们必须在不同的线程上执行。每个线程都有自己的调用堆栈，如果您使用线程执行方法调用，则传递给该方法的参数将放置在该线程的调用堆栈中。

*   这意味着，只要参数是值类型（例如 int）或不可变类型（例如在本例中为字符串），它就不能被另一个线程修改（因为它要么对另一个线程不可见，或不可修改）。因此，您不必担心消息会在 Manager.Log() 或 ClientLogManager.Debug() 方法中混淆。

因此，您当前的 Manager 和 ClientLogManager 实现都是线程安全的（至少，如果 _log 实例是线程安全的）。

一旦你开始在你的 Manager 类中声明非静态成员变量，并且你将在 Manager.Log() 中使用它们，那么它就不再是线程安全的：同一个 Manager 实例可以被多个线程访问，一旦他们都开始在同一个成员变量中写入，你就有麻烦了......

我希望这能澄清一些事情。

# arrays - PostgreSQL的count查询效率，物化视图

> ID：13075257
> 
> 赞同：3
> 
> 时间：2012-10-25T18:50:52.697
> 
> 标签：arrays, postgresql, count, materialized-views

> **可能重复：**
> [PostgreSQL 的计数查询优化](https://stackoverflow.com/questions/13075210/optimization-of-count-query-for-postgresql)

使用 PostgreSQL 9.2，我们试图弄清楚是否有一种方法可以跟踪查询的结果数量，并以有效的方式返回该数字。这个查询应该每秒执行几次（可能几十到几百甚至几千次）。我们现在的查询看起来像这样，但我们想知道这是否效率低下：

```
-- Get # of rows that do not have ‘parameter value’ in array_column
select count(*) 
    from table
    where not (ARRAY[‘parameter value’] <@ table.array_column) 
```

我的问题是（一个答案可能同时解决多个问题）：

该查询的`count(id)`（或`count(*)`就此而言）是线性`(O(n))`查询吗？

有什么方法可以让这个查询在 PostgreSQL 中更有效吗？请记住，我们需要查询不同的参数值，因此我认为为其保留物化视图是不可行的（尽管如果认为这样更好，我们可能会考虑为每个参数值创建一个）。

我应该对查询、数据库结构或我的 PostgreSQL 服务器的配置进行任何更改以帮助我提高查询性能吗？

任何指针或建议将不胜感激。如果这是完全错误的方法，请告诉我。

**编辑**

考虑到答案，我想知道使用物化视图是否合理。我的意思是有几个物化视图（每个视图都有一个不同的参数值，具有不存在该值的行）。我们的参数值在一定程度上是可预测的，因此作为解决方案似乎并不太远。这带来了另一个问题：物化视图在这里会有所帮助吗？我可以在数据库中创建的物化视图（或表）的数量是否存在一些限制（定义或性能）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:18:56.180

想到的第一个想法是缓存值。

您应该评估此值的变化率，并根据此决定是否要在更新此表时执行触发器以计算新值并将其缓存在某处。

对该值的查询结果将是一个没有任何 WHERE 子句的简单 SELECT，因此速度非常快。

或者您可以简单地进行更改，并在之前和之后获取一些统计数据，以了解您是否提高了速度。

参见[那里](https://wiki.postgresql.org/wiki/Slow_Counting)以获得进一步的解释。

# c++ - how to call function in c++ from delphi compiled dll

> ID：13075258
> 
> 赞同：2
> 
> 时间：2012-10-25T18:50:52.733
> 
> 标签：c++, qt, dll

I have a problem with using dll library made in delphi. I don't have sources for it - only dll and interface. I want to import it in my c++ program. I don't need to use QT for loading (but it would be probably the best option as ) - also standard Windows api is applicable.

First, **interface of the dll:**

```
Unit VPInterface;
interface

type
 TSignal     = array of double;
 ShortVector = array[0..11] of double;

function VP(s: TSignal): ShortVector; stdcall;
 stdcall external 'VoicePrint.dll' name 'VP';

implementation

End {VPInterface.pas}. 
```

**The QT version:**

```
typedef double* (*VPFunct)(double[]);
vector<double> v_double;
// put some values in v_double
QLibrary lib("VoicePrint.dll");
VPFunct vpfunct = (VPFunct) lib.resolve("VP");
if (vpfunct) {
  double * res = vpfunct(&v_double[0]);
} 
```

1.  The function is called and some output is returned but it's rubbish. As you can see I passed internal vector's array (&v_double[0]). I tried with double array on stack but the function haven't finished. Can someone explain it why?
2.  Why I don't see correct results? I have similar code in C# and it works:

    ```
    namespace WAT_DLL_TEST
    {
    public class VoicePrint
    {
        [DllImport("VoicePrint.dll", CharSet = CharSet.Ansi, EntryPoint = "VP", CallingConvention = CallingConvention.StdCall)]
        [return: MarshalAs(UnmanagedType.Struct)]
        public static extern ShortVector VP(double[] signal);

        [StructLayout(LayoutKind.Explicit, Size = 48)]
        public unsafe struct ShortVector
        {
            [FieldOffset(0)]
            public fixed double m_buffer[6];
        }

    }
    } 
    ```

May a structure be the actual problem?

And here is my code for running it using windows api:

```
HINSTANCE hinstDLL;
VPFunct myFunct;
BOOL fFreeDLL;

hinstDLL = LoadLibrary(L"VoicePrint.dll");
if (hinstDLL != NULL)
{
    myFunct = (VPFunct) GetProcAddress(hinstDLL, "VP");
    if (myFunct != NULL) {
        double * dptr = myFunct(&v_double[0]);
        for(int i=0; i<11; i++)
            cout << dptr[i] << endl;
    }
    fFreeDLL = FreeLibrary(hinstDLL);
} 
```

Thanks for any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:58:53.543

你应该在你的`typedef`：

```
typedef double* (__stdcall *VPFunct)(double[]); 
```

无效的调用转换会导致堆栈损坏。它可以解释*每一个*不正确的行为。

您可以尝试使用以下代码模拟 Delphi 动态数组内存布局（[此处提到）：](http://docwiki.embarcadero.com/RADStudio/XE3/en/Internal_Data_Formats)

```
#pragma pack (push, 1)

template <uint32_t size>
struct DelphiArray
{
    uint32_t _refCounter;
    uint32_t _size;
    double array[size];
};
#pragma pack (pop) 
```

`DelphiArray`然后像这样调用函数

```
DelphiArray<N> arr;
arr._refCounter = 1;
arr._size = N;
//fill arr.array here
myFunc(arr.array); 
```

# asp.net - WCF、REST、并发、会话

> ID：13075259
> 
> 赞同：0
> 
> 时间：2012-10-25T18:50:55.847
> 
> 标签：asp.net, wcf, rest, session-state, asp.net-session

我们有一个 WCF REST 服务，它将数据从服务器发送到 Web 客户端。这些是 web.config 设置

```
 <binding name="Binding_Service_Name"
      closeTimeout="00:01:30" openTimeout="00:01:30" receiveTimeout="00:01:30"
      sendTimeout="00:01:30" allowCookies="false" bypassProxyOnLocal="false"
      hostNameComparisonMode="StrongWildcard" maxBufferSize="1048576"
      maxBufferPoolSize="524288" maxReceivedMessageSize="1048576" messageEncoding="Text"
      textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true"> 

   <client>
     <endpoint address="https://FQDN//RESTService.svc"
       binding="basicHttpBinding" bindingConfiguration="Binding_Service_Name"
       contract="Contract"
       name="BindingName" />
    </client> 

<services>
      <service behaviorConfiguration="RESTServiceBehavior"
        name="Name">
          <endpoint address="" behaviorConfiguration="webBehavior" binding="customBinding" 
           bindingConfiguration="jsonpBinding" contract="contract">
        </endpoint>
        <!--<endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />    jsonpBinding-->
      </service>
<serviceBehaviors>
        <behavior name="Bco.Sitecore.UI.RESTApi.RESTServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <!--HTTPS-->
          <!--<serviceMetadata httpsGetEnabled="true"/>-->
          <!--HTTP-->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceThrottling maxConcurrentCalls="1000" maxConcurrentInstances="1000" maxConcurrentSessions="1000" />
        </behavior>
</serviceBehaviors> 
```

web.config 中的兼容模式 - aspnetCompatibilitymode = true

REST 服务已读取/写入 HttpSession。

当网站有并发调用时，asp.net 会序列化这些调用。我该怎么做才能将这些作为并发调用？对此 REST 服务的会话的读/写是我们从旧代码中继承下来的东西，不可能绕过会话读/写

将不胜感激这个/方向​​的解决方案来解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:10:30.060

当应用程序使用会话状态时，对应用程序的调用总是被序列化的。

# html - 单元格中的表格图像显示较小

> ID：13075263
> 
> 赞同：3
> 
> 时间：2012-10-25T18:51:14.533
> 
> 标签：html, css, joomla, joomla2.5

我有麻烦了。我将 Joomla 1.5 升级到 2.5.7。也导入了所有内容。有些文章是使用 HTML TABLE 标记、行和 2 列构建的。第一列中的文本，具有正确 HEIGHT/WIDTH 属性的图像位于第二列。

请参阅此页面：

[http://stageseminars.com/index.php/2012-10-24-18-26-22/how-to-tech/paperwork/108-lighting-board-notes](http://stageseminars.com/index.php/2012-10-24-18-26-22/how-to-tech/paperwork/108-lighting-board-notes)

在 FireFox 中，它渲染得很漂亮，在 Chrome、IE9 和 Safari 中，**图像被调整为更小**，为可以包裹更多的文本留下了太多空间。

在网站的 J15 版本中，它很好。

昨晚我尝试了一点 CSS，我能做的最好的事情就是让图像显示出表格的偏移量，并以最小宽度/最大的方式播放主要内容容器。宽度，百分比，甚至强制像素（我不喜欢它，因为将来客户端可能会使用不同的图像尺寸）

有多篇文章，我知道这可以以某种方式转换为无表格，样式模板。但是有一种更好更快的方法，我将不胜感激！

请指教！如果您需要更多信息，也请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:21:18.030

除了评论中讨论的 css 修改外，还有一个功能`http://stageseminars.com/templates/rt_kirigami/js/modules-height.js` 可以为您在 IE9 和 IE10 上的图像设置一些样式。

```
 'load': function(){
        if (Browser.ie9 || Browser.ie10){
            document.getElements('img').each(function(img){
                img.setStyle('max-width', img.getStyle('width').toInt() || img.offsetWidth);
                img.setStyle('width', '100%');
            });
        } 
```

你可以评论一下，我已经在 IE9 上测试过了（去掉那个功能），它可以工作了！

# c# - 如果该行抛出异常，为什么要执行后递增操作？

> ID：13075266
> 
> 赞同：3
> 
> 时间：2012-10-25T18:51:35.697
> 
> 标签：c#

我今天遇到了一种出乎我意料的语言行为。现在我很想知道为什么。考虑以下示例：

```
try
{
    worksheet.AddCell(row, cell++, image.DisplayCaption());
}
catch (NullReferenceException)
{
    cell++;
    throw;
} 
```

在我的示例中，`image`是 null 导致该行抛出一个`NullReferenceException`; 但是，`cell`仍然递增，当然，它在 catch 块中再次递增。为什么执行第一个后自增操作？另外，如果`worksheet`为null，它会被执行吗？

谢谢，皮特

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T18:56:17.913

方法调用的参数从左到右进行评估。

而不是抓住`NullRefereneException`use `if(image != null)`。异常很慢。

事情发生的顺序：

1.  `cell`为 value 参数复制
2.  `cell`作为第二个参数表达式的最后一个操作递增：`cell++`
3.  `image.DisplayCaption()`
4.  `worksheet.AddCell(row, <non-incremented value>, <result of DisplayCaption()>);`

由于步骤 3\. 导致`NullReferenceException`步骤 4\. 不会发生。

# java - 将 JPanel 分层，底层为背景图像

> ID：13075269
> 
> 赞同：1
> 
> 时间：2012-10-25T18:51:56.610
> 
> 标签：java, swing, jpanel, paintcomponent, jlayeredpane

我正在尝试编写棋盘游戏。我想加载游戏板的图像，然后在其上加载透明网格。我编写了一个自定义面板来绘制图像并将其添加到分层面板中作为级别 0。然后我`JPanel`使用 a`GridLayout`并将其添加到级别 1。然后将分层窗格放入滚动窗格中以说明背景图像是有点大。希望在任何给定时间让大部分网格都是透明的，但是如果玩家棋子进入一个正方形，那么我会将那个正方形设置为代表该棋子的颜色。但是，当我将顶部面板设置为透明时（通过调用`setOpaque(false)`），我只是得到一个白色背景，没有图像存在。为什么是这样？

```
public class ImagePanel extends JPanel
{
   private Image image;

   public ImagePanel(Image image) 
   {
      this.image = image;
      this.setPreferredSize(new Dimension(936,889));
    }

   protected void paintComponent(Graphics g) 
   {
      g.drawImage(image, 0, 0, null);
   }
} 
```

这是创建面板并嵌套它们的主程序中的代码。背板是外框。稍后它是 setVisible ，所以这不是问题。

```
BufferedImage boardImage = null;
       try
       {
           boardImage = ImageIO.read(new File("Clue Board.jpg"));
       }
       catch(IOException e)
       {

       }

   ImagePanel background = new ImagePanel(boardImage); //load clue board image

   JPanel gameBoard = new JPanel (new GridLayout(24,24)); //yet to add actual squares
   gameBoard.setSize(936,889);
   gameBoard.setOpaque(false);

   JLayeredPane lPane = new JLayeredPane();
   lPane.setPreferredSize(new Dimension(936,889));
   lPane.add(background, new Integer(0));
   lPane.add(gameBoard, new Integer(1));

   JScrollPane layerScroller = new    JScrollPane(lPane,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
   backBoard.add(layerScroller, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:54:57.207

*   尝试这样调用`super.paintComponent(..)`：

    ```
    @Override
    protected void paintComponent(Graphics g) 
    {
       super.paintComponent(g);
       g.drawImage(image, 0, 0, null);
    } 
    ```

*   不要调用`JFrame#setSize(..)`使用[适当`LayoutManager`](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)的覆盖`getPrefferedSize(..)`，`JPanel`它会返回正确的大小，然后在将其设置为可见之前调用`pack()`实例`JFrame`。

`ImagePanel`这是您的班级应该如何看待的示例：

```
public class ImagePanel extends JPanel
{
    private int width,height;
    private Image image;

    public ImagePanel(Image image) 
    {
          this.image = image;

          //so we can set the JPanel preferred size to the image width and height
          ImageIcon ii = new ImageIcon(this.image);
          width = ii.getIconWidth();
          height = ii.getIconHeight();
     }

     //so our panel is the same size as image
     @Override
     public Dimension getPreferredSize() {
          return new Dimension(width, height);
     }

     @Override
     protected void paintComponent(Graphics g) 
     {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, null);
     }

} 
```

# jquery - 使用 html5 视频调整颜色框大小

> ID：13075275
> 
> 赞同：0
> 
> 时间：2012-10-25T18:52:16.773
> 
> 标签：jquery, html5-video, colorbox

我在彩盒中嵌入了一个视频，但我使用它`$.colorbox()`是因为视频不会通过 lin 点击开始。

这是一个片段：http: [//jsfiddle.net/xavier_seignard/48Zhz/](http://jsfiddle.net/xavier_seignard/48Zhz/)

我没有成功根据视频大小调整颜色框的大小，因此没有滚动。

任何的想法？

问候，

泽维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:43:28.823

我终于切换到[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)，好多了！

# c# - 发送电子邮件附件后在 C# 中删除文件

> ID：13075278
> 
> 赞同：5
> 
> 时间：2012-10-25T18:52:25.027
> 
> 标签：c#

我有以下代码，基本上将文件附加到电子邮件中，然后在附加所有附件并发送电子邮件后，我尝试删除所有文件，但是我得到一个文件正在使用异常。我相信错误出现在这一行

```
Attachment data = new Attachment(file, MediaTypeNames.Application.Octet); 
```

我尝试使用此代码，但收到无法发送的电子邮件

```
using Attachment data = new Attachment(file, MediaTypeNames.Application.Octet)){
//and the rest of the code in here.

}

foreach (KeyValuePair<string, string> kvp in reports) {
    browser.GoTo(kvp.Value);
    Thread.Sleep(1000);

    System.IO.File.Move(@"C:\Reports\bidata.csv", @"C:\Reports\"+kvp.Key.ToString()+".csv");

    string file = @"C:\Reports\" + kvp.Key.ToString() + ".csv";

    Attachment data = new Attachment(file, MediaTypeNames.Application.Octet);

    // Add time stamp information for the file.
    ContentDisposition disposition = data.ContentDisposition;
    disposition.CreationDate = System.IO.File.GetCreationTime(file);
    disposition.ModificationDate = System.IO.File.GetLastWriteTime(file);
    disposition.ReadDate = System.IO.File.GetLastAccessTime(file);
    // Add the file attachment to this e-mail message.

    mail.Attachments.Add(data);  
}

smtpserver.Send(mail);
string[] files = Directory.GetFiles(@"C:\Reports");
foreach (string files1 in files)
{
    File.Delete(files1);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T18:57:20.103

为了首先删除文件，您必须处理附件和邮件对象，然后删除文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:55:38.093

通过将 smtpclient 放入 usings 或直接调用 dispose 来处理它。那应该释放文件资源并允许您对其进行核对。

# php - PHP nusoap 服务器 - 调用时 ksoap2 客户端（Soap Envelope）错误

> ID：13075290
> 
> 赞同：1
> 
> 时间：2012-10-25T18:53:19.230
> 
> 标签：php, xml, wsdl, nusoap, android-ksoap2

CN: 我正在使用 PHP 和 Android。我正在使用 nusoap 来制作 WSDL 服务器和 ksoap2 到客户端。尝试从 androidHttpTransport 执行方法调用时收到解析器错误

我在 PHP 中使用 WSDL 的 WSDL 代码并且执行没有错误。

> 错误：org.xmlpull.v1.XmlPullParserException：预期：START_TAG {http://schemas.xmlsoap.org/soap/envelope/}信封（位置：START_TAG @2:455 in java.io.InputStreamReader@4054fe80）

变量

```
private final static String WEB_SERVICE_URI = "http://172.224.116.242/test.php";
private final static String WEB_SERVICE_NAMESPACE = "urn:smspublish.aldeiati.com";
private final static String WS_METHOD_GET_TOKEN = "SBPublish.getToken"; 
```

Android 中的代码（ksoap2 - 客户端）

```
 SoapObject parameters = new SoapObject(WEB_SERVICE_NAMESPACE,
            WS_METHOD_GET_TOKEN);

    parameters.addProperty("username", "test@aldeiati.com");
    parameters.addProperty("password", "123456");
    parameters.addProperty("deviceIMEI", "000000000000000");
    parameters.addProperty("deviceDDI", "us");
    parameters.addProperty("deviceNumber", "15555215554");

    SoapSerializationEnvelope envelope = this.getEnvelope(parameters);
    String host = this.getWebServiceURI();

    HttpTransportSE androidHttpTransport = new HttpTransportSE(host);
    androidHttpTransport
            .setXmlVersionTag("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
    androidHttpTransport.debug = true;

    try {
        androidHttpTransport.call(WS_METHOD_GET_TOKEN, envelope);
        SoapObject response =(SoapObject) envelope.getResponse();

        return response.toString();
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    } catch (XmlPullParserException xe) {
        xe.printStackTrace();
        return null;
    } 
```

这是我的 WSDL

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<definitions xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="urn:smspublish.aldeiati.com" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="urn:smspublish.aldeiati.com">
<types>
<xsd:schema targetNamespace="urn:smspublish.aldeiati.com"
>
 <xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/" />
 <xsd:import namespace="http://schemas.xmlsoap.org/wsdl/" />
 <xsd:complexType name="Token">
  <xsd:all>
   <xsd:element name="token" type="xsd:string"/>
   <xsd:element name="expireIn" type="xsd:long"/>
   <xsd:element name="status" type="xsd:int"/>
   <xsd:element name="error" type="xsd:int"/>
  </xsd:all>
 </xsd:complexType>
</xsd:schema>
</types>
<message name="SBPublish.checkServerRequest">
  <part name="nome" type="xsd:string" /></message>
<message name="SBPublish.checkServerResponse">
  <part name="return" type="xsd:token" /></message>
<message name="SBPublish.syncServerRequest">
  <part name="token" type="xsd:string" />
  <part name="data" type="xsd:string" /></message>
<message name="SBPublish.syncServerResponse">
  <part name="return" type="xsd:string" /></message>
<message name="SBPublish.getTokenRequest">
  <part name="mail" type="xsd:string" />
  <part name="password" type="xsd:string" />
  <part name="deviceIMEI" type="xsd:string" />
  <part name="deviceDDI" type="xsd:string" />
  <part name="deviceNumber" type="xsd:string" /></message>
<message name="SBPublish.getTokenResponse">
  <part name="return" type="tns:Token" /></message>
<portType name="smspublish.aldeiati.comPortType">
  <operation name="SBPublish.checkServer">
    <documentation>Testando o servidor</documentation>
    <input message="tns:SBPublish.checkServerRequest"/>
    <output message="tns:SBPublish.checkServerResponse"/>
  </operation>
  <operation name="SBPublish.syncServer">
    <documentation>Transmite ao servidor o registro as atividades realizadas e recupera novas atividades</documentation>
    <input message="tns:SBPublish.syncServerRequest"/>
    <output message="tns:SBPublish.syncServerResponse"/>
  </operation>
  <operation name="SBPublish.getToken">
    <documentation>Gera um token para comunicaÃ§Ã£o entre o dispositivo e o servidor</documentation>
    <input message="tns:SBPublish.getTokenRequest"/>
    <output message="tns:SBPublish.getTokenResponse"/>
  </operation>
</portType>
<binding name="smspublish.aldeiati.comBinding" type="tns:smspublish.aldeiati.comPortType">
  <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
  <operation name="SBPublish.checkServer">
    <soap:operation soapAction="SBPublish.checkServer" style="rpc"/>
    <input><soap:body use="encoded" namespace="urn:smspublish.aldeiati.com" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/></input>
    <output><soap:body use="encoded" namespace="urn:smspublish.aldeiati.com" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/></output>
  </operation>
  <operation name="SBPublish.syncServer">
    <soap:operation soapAction="SBPublish.syncServer" style="rpc"/>
    <input><soap:body use="encoded" namespace="urn:smspublish.aldeiati.com" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/></input>
    <output><soap:body use="encoded" namespace="urn:smspublish.aldeiati.com" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/></output>
  </operation>
  <operation name="SBPublish.getToken">
    <soap:operation soapAction="SBPublish.getToken" style="rpc"/>
    <input><soap:body use="encoded" namespace="urn:smspublish.aldeiati.com" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/></input>
    <output><soap:body use="encoded" namespace="urn:smspublish.aldeiati.com" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/></output>
  </operation>
</binding>
<service name="smspublish.aldeiati.com">
  <port name="smspublish.aldeiati.comPort" binding="tns:smspublish.aldeiati.comBinding">
    <soap:address location="http://172.224.116.242/test.php"/>
  </port>
</service>
</definitions> 
```

这就是我的 android 做的

```
<?xml version="1.0" encoding="UTF-8"?>
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
<v:Header />
<v:Body>
<n0:SBPublish.getToken id="o0" c:root="1" xmlns:n0="urn:smspublish.aldeiati.com">
<username i:type="d:string">test@aldeiati.com</username>
<password i:type="d:string">123456</password>
<deviceIMEI i:type="d:string">000000000000000</deviceIMEI>
<deviceDDI i:type="d:string">us</deviceDDI>
<deviceNumber i:type="d:string">15555215554</deviceNumber>
</n0:SBPublish.getToken>
</v:Body>
</v:Envelope> 
```

这是使用 android 制作的 xml 在soapUI 中收到的响应

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="urn:smspublish.aldeiati.com">
   <SOAP-ENV:Body>
      <ns1:SBPublish.getTokenResponse xmlns:ns1="urn:smspublish.aldeiati.com">
         <return xsi:type="tns:Token">
            <token xsi:type="xsd:string">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</token>
            <expireIn xsi:type="xsd:long">180000</expireIn>
            <status xsi:type="xsd:int">authorized</status>
            <error xsi:type="xsd:int">200</error>
         </return>
      </ns1:SBPublish.getTokenResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我在soapUI中使用这个xml来测试web服务，Android创建的xml是正确的。

在android中调用执行时会出现异常：

```
httpTransportSE.call(WS_METHOD_POLL_SERVER, envelope); 
```

# java - 创建一个异常类并在代码中使用它

> ID：13075292
> 
> 赞同：-1
> 
> 时间：2012-10-25T18:53:36.543
> 
> 标签：java

好的，现在我已经更新了我的代码，它看起来像这样：

```
public static double getDouble (String userShape, String parameter) throws BadShapeData
{

String missingValue = parameter, value = "", shape = userShape;
String s2 = "Enter a value for " + missingValue;

value = JOptionPane.showInputDialog(s2);

if (null == value || value.length() == 0) {
throw new BadShapeData("Error, nothing was entered. Must be double.");
}
try {
return Double.parseDouble(value);
}
catch (NumberFormatException e) {
throw new BadShapeData("Error entering " + value + ". Must be double."); 
}
} 
```

这也在我的代码中：

```
 public static void main(String args[]) {
  int choice;
  do {
       choice = menu();
       if(choice != 0) {
          System.out.println(makeShape(choice));
       }
   } while (choice != 0);
  }

  public static Shape3D makeShape(int choice) {
    if(choice == 1) 
      return new Cone(getDouble("Cone", "Radius"), getDouble("Cone", "Height"));
   else if(choice == 2) 
      return new Cylinder(getDouble("Cylinder", "Radius"), getDouble("Cylinder", "Height"));
   else if(choice == 3) 
      return new Sphere(getDouble("Sphere", "Radius"));
   else if(choice == 4) 
      return new Box(getDouble("Box", "Length"), getDouble("Box", "Width"), getDouble("Box", "Height"));
   else if(choice == 5) return new Pyramid(getDouble("Pyramid", "Base"), getDouble("Pyramid", "Height"));
   else return new Cube(getDouble("Cube", "Size"));
  } 
```

但是现在我收到的错误是“错误：未报告的异常 BadShapeData；必须被捕获或声明为抛出”，并且在我使用 getDouble 方法的地方突出显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:59:23.447

我会将您 finally 内部的 return 语句删除到外部。我对此不是 100% 的，但我认为它可能会吞下例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:55:54.333

你传递了什么价值？请注意，如果您传递 a `float`、 an `int`、 a`long`等。*它将*正确解析为 a `double`，因为所有这些类型都与 a 赋值兼容`double`。如果您想查看抛出的异常，则完全传递不同的类型，例如 string `"xyz"`。

请注意 a`char` *是*一个数字，因此可以将其分配给`double`变量。例如，这一行*不会*导致编译或执行错误；这是完全有效的，尽管可能会令人困惑：

```
double c = 'x'; 
```

**更新：**

尝试像这样更改您的代码：

```
try {
    return Double.parseDouble(value);
} catch (NumberFormatException e) {
    throw new BadShapeData(value);
} 
```

当然，你必须添加`throws BadShapeData`到方法声明中，像这样：

```
public static double getDouble (String userShape, String parameter) throws BadShapeData 
```

您还必须注意，从此时起，调用该`getDouble()`方法的代码中的所有部分都必须处理异常——通过捕获它或让它通过。正如您现在应该知道的，这就是 Java 中异常的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:40:44.440

将所有调用`getDouble`放在一个完整或单独的 try/catch 块中：

```
 public static void main(String args[]) {
  int choice;
  do {
       choice = menu();
       if(choice != 0) {
          System.out.println(makeShape(choice));
       }
   } while (choice != 0);
  }

  public static Shape3D makeShape(int choice) {
   try {
    if(choice == 1) 
      return new Cone(getDouble("Cone", "Radius"), getDouble("Cone", "Height"));
   else if(choice == 2) 
      return new Cylinder(getDouble("Cylinder", "Radius"), getDouble("Cylinder", "Height"));
   else if(choice == 3) 
      return new Sphere(getDouble("Sphere", "Radius"));
   else if(choice == 4) 
      return new Box(getDouble("Box", "Length"), getDouble("Box", "Width"), getDouble("Box", "Height"));
   else if(choice == 5) return new Pyramid(getDouble("Pyramid", "Base"), getDouble("Pyramid", "Height"));
   else return new Cube(getDouble("Cube", "Size"));
   } catch (BadShapeData e) {
      System.out.println(e.getMessage());
      //do whatever with exception
   }
  } 
```

**或者**已经`makeShape`抛出异常，然后在 void main() 中使用 try/catch 块：

```
 public static void main(String args[]) {
  int choice;
  do {
       choice = menu();
       if(choice != 0) {
         try {
          System.out.println(makeShape(choice));
         } catch (BadShapeData e) {
            System.out.println(e.getMessage());
            //do whatever with exception
         }
       }
   } while (choice != 0);
  }

  public static Shape3D makeShape(int choice) throws BadShapeData {
    if(choice == 1) 
      return new Cone(getDouble("Cone", "Radius"), getDouble("Cone", "Height"));
   else if(choice == 2) 
      return new Cylinder(getDouble("Cylinder", "Radius"), getDouble("Cylinder", "Height"));
   else if(choice == 3) 
      return new Sphere(getDouble("Sphere", "Radius"));
   else if(choice == 4) 
      return new Box(getDouble("Box", "Length"), getDouble("Box", "Width"), getDouble("Box", "Height"));
   else if(choice == 5) return new Pyramid(getDouble("Pyramid", "Base"), getDouble("Pyramid", "Height"));
   else return new Cube(getDouble("Cube", "Size"));
  } 
```

您选择实施哪种方法取决于您的需求。如果 void main 不需要知道 BadShapeData 异常，请先使用。如果 void main 应该知道并对此采取措施，请选择第二个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T19:08:08.513

试试这个，然后：

```
public static double getDouble (String userShape, String parameter) {
  String prompt = "Enter a value for " + parameter;
  String value = JOptionPane.showInputDialog(prompt);

  if (null == value || value.length() == 0) {
    throw new BadShapeData("Error, nothing was entered. Must be double.");
  }
  try {
    return Double.parseDouble(value);
  }
  catch (NumberFormatException e) {
    throw new BadShapeData("Error entering " + str + ". Must be double."); 
  }
}

public class BadShapeData extends RuntimeException {
  public BadShapeData(String message) {
    super(message);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T19:08:38.040

删除 finally 块中的 return 语句。你只是吞下你的例外。而不是这个 put return finally 。

参考相关问题：[异常被finally吞噬](https://stackoverflow.com/questions/4711064/exception-is-swallowed-by-finally)

**更新：** 抓住你的`BadShapeData`，因为它是一个检查的异常。另一种我更喜欢`RuntimeException`用作基类的方式。它更灵活，但不太安全。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T19:09:02.647

您遇到的问题是您将异常隐藏在 finally 块中；

finaly 块在您抛出异常后执行。这意味着它永远不会消失，因为最终你会回来

您应该避免在 finall 块中使用 return 关键字。

# asp.net - 将 HttpContext.RewritePath() 与静态文件一起使用

> ID：13075294
> 
> 赞同：2
> 
> 时间：2012-10-25T18:53:41.010
> 
> 标签：asp.net, gzip, rewritepath

我们使用 HttpContext.RewritePath() 来重写静态文件的路径。我们这样做是为了能够虚拟化服务器上​​静态文件的位置。

当我们这样做时，IIS 似乎表现得很奇怪，有时不压缩文件的内容，但仍然将 gzip 编码放在 http 响应标头中。发生这种情况时，浏览器无法正确解析静态文件，因为它们试图解压缩明文数据。

我们一直在四处寻找，发现有几个线程在谈论这个问题，但是对于如何避免这个问题，或者为什么不允许重写静态文件的路径，我们找不到令人满意的答案。

不应该可以重写静态文件的路径吗？

这里有几页我发现了这个问题：

[IIS7 中的 GZip 压缩不起作用，但内容编码标头设置为 gzip](https://stackoverflow.com/questions/6904826/gzip-compression-in-iis7-not-working-but-content-encoding-header-is-set-to-gzip/13075048#13075048)

[HttpContext.RewritePath 破坏了内置 IIS gzip](https://stackoverflow.com/questions/10801926/httpcontext-rewritepath-breakes-buildin-iis-gzip)

# haskell - haskell GHCi 无法导入模块

> ID：13075299
> 
> 赞同：2
> 
> 时间：2012-10-25T18:54:14.313
> 
> 标签：haskell, import, module

我有一个奇怪的问题。

我有一个模块，称为“编译器”，文件本身称为compiler.hs。如果我尝试将此模块导入另一个模块（在同一目录中），GHCi 会给出错误并说它找不到文件。现在我在同一个目录中有另一个模块，并且在导入时工作得很好。

我使用 ghci program.hs 来解释程序。“program.hs” 导入编译器模块。

我的操作系统是基于 debian 的 linux 发行版并运行 GHCi，版本 6.12.1：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:01:33.677

重命名`compiler.hs`为`Compiler.hs`（大写“C”）。Linux 文件名区分大小写。

# vb.net - 使用名称单击 web 按钮

> ID：13075302
> 
> 赞同：0
> 
> 时间：2012-10-25T18:54:26.747
> 
> 标签：vb.net, .net-4.0, webbrowser-control

```
Set HTMLDoc = WebBrowser1.document.frames("top").document
HTMLDoc.forms("Nav").GetCase.Click 
```

这是我的 vb6 代码，用于单击使用 HTMLDOC 作为 mshtml.document 的表单中的按钮。我如何在 vb.net 中执行此操作？我还需要在执行时准确指定是使用 mshtml 还是 windows 系统 browser.document。html如下：

```
 <form name = "Nav"> 'just for reference
<input name="GetCase" style="font: 7pt arial;" onclick="if(!getCase()){return;};" type="button" size="1" value="Retrieve"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:11:34.940

```
 myBrowser.Document.GetElementById("GetCase").InvokeMember("click"); 
```

假设 GetCase 是唯一的。基本上，mshtml 可以做的远不止 .net 网络浏览器。

# arrays - 存储一长串值的最佳方法

> ID：13075307
> 
> 赞同：3
> 
> 时间：2012-10-25T18:54:51.167
> 
> 标签：arrays, list, powershell, hashtable, sorted

我需要将已处理的网络文件共享列表（保留完整的 UNC 路径）存储在内存中，因此我不再处理这些文件夹。

我打算使用一个数组，但现在我认为哈希表可能是一个更快的选择。如果该文件夹路径（字符串值）已经存在，我将需要检查几个地方。

什么是最快的（检查该值是否存在）和更少的内存消耗选项？

1.  使用 key=folder 路径和空值将文件夹路径存储在哈希表中
2.  将文件夹路径存储在一维数组中
3.  别的东西

更新：我刚刚通过生成 50000 个字符串并进行 3 次查找来运行一些测试，例如在下面指出的那个线程中。我还研究了内存消耗，HashSet 是赢家。HashTable 仍然是一个不错的选择，但 Array 是最糟糕的选择。

数组 - 创建 125048 毫秒，查找 37 毫秒，RAM 中 18Mb

哈希 - 创建 2167 毫秒，查找 0.74 毫秒，RAM 中 2.4Mb

HashSet -创建**1966**毫秒，查找**0.02**毫秒，RAM中**1.4Mb**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:11:33.117

在这种情况下，hastable 比数组更可取，因为您将在填充后查询键并且项目数相对较大。我将从哈希表开始。如果性能不合适，请尝试其他方法，例如使用 .net 的[Dictionary(T,V)](http://msdn.microsoft.com/en-us/library/xfhwa508%28v=vs.80%29.aspx)或 .net 3.5+ 的[HashSet(T)](http://msdn.microsoft.com/en-us/library/bb359438%28v=vs.100%29.aspx)

另外，这里有一个你会感兴趣的链接：

[Powershell 2 和 .NET：针对超大哈希表进行优化？](https://stackoverflow.com/questions/7523143/powershell-2-and-net-optimize-for-extremely-large-hash-tables)

# regex - 正则表达式匹配在任意位置连字符并分成两行的特定单词

> ID：13075313
> 
> 赞同：4
> 
> 时间：2012-10-25T18:55:07.753
> 
> 标签：regex, multiline, hyphenation, hyphen

我希望在文本文件中搜索给定的单词，该单词可以选择在单词中的未知位置连字符并拆分为连续的行。

例如。匹配“连字符”内：

```
This sentence contains a hyphena-
ted word. 
```

最接近（没有吸引力）的解决方案：

```
"h\(-\s*\n\s*\)\?y\(-\s*\n\s*\)\?p\(-\s*\n\s*\)\?h\(-\s*\n\s*\)\?e\(-\s*\n\s*\)\?n\(-\s*\n\s*\)\?a\(-\s*\n\s*\)\?t\(-\s*\n\s*\)\?e\(-\s*\n\s*\)\?d" 
```

我希望一些比我强的 regex-foo 可以提出一个明确包含正在搜索的单词的正则表达式，即。我想在那里看到“连字符”。我还没有找到一种编码类似以下内容的方法（无论如何这都是错误的，因为它会匹配“hy-ted”）：

```
"{prefix-of:hyphenated}{hyphen/linebreak}{suffix-of:hyphenated}" 
```

我意识到预处理文档以折叠这些单词会使搜索更简单，但我正在寻找一个正则表达式，我可以在由于所涉及的工具而无法实现的上下文中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:22:38.310

考虑到这`hy-phen-ated`也应该匹配，我认为这是一个*单独*的正则表达式不是正确方法的情况。

我会这样做（不知道你的语言，我使用了伪代码）：

1.  从输入中删除连字符和换行符
2.  将清理后的输入与`.*hyphenated.*`

所有语言都可以轻松实现第 1 步，并且代码的可读性会更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:17:16.047

我认为这会奏效。如果您有很多词要搜索，您可能需要创建一个脚本来为您生成搜索模式。

```
[h\-]+\s*[y\-\s]+[p\-\s]+[h\-\s]+[e\-\s]+[n\-\s]+[a\-\s]+[t\-\s]+[e\-\s]+d\b 
```

我认为您没有提到您使用的是哪种语言，但我使用 .Net 对此进行了测试。

这是一个简单的 python 脚本，它将生成搜索模式：

```
# patterngen.py
# Usage:  python patterngen.py <word>
# Example:  python patterngen.py hyphenated

word = sys.argv[1]
pattern = '[' + word[0] + r'\-]+\s*'

for i in range(1,len(word)-1):
    pattern = pattern + r'[' + word[i]
    pattern = pattern + r'\-\s]+'

pattern = pattern + word[-1] + r'\b'
print pattern 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:39:46.593

另一种处理这个问题的方法，就在蝙蝠的右边，是像这样“滑动”连字符：

```
hyphenated|h(-\s*\n\s*)yphenated|hy(-\s*\n\s*)phenated|hyp(-\s*\n\s*)henated|hyph(-\s*\n\s*)enated|hyphe(-\s*\n\s*)nated|hyphen(-\s*\n\s*)ated|hyphena(-\s*\n\s*)ted|hyphenat(-\s*\n\s*)ed|hyphenate(-\s*\n\s*)d 
```

读起来更好，但我真的不知道这对您的原始模式有何表现。

* * *

另一个想法是首先使用以下模式来缩小搜索范围：

```
h[hypenatd]{0,9}(-\s*\n*\s)?[hypenatd]{0,9} 
```

然后在这个结果中匹配。

事实上，如果我没记错的话，如果你匹配这样的组：

```
(h[hypenatd]{0,9})(?:-\s*\n*\s)?([hypenatd]{0,9}) 
```

那么单词`hyphenated`的出现是所有匹配项，其中伪代码：

```
(match.group1 + match.group2) == "hyphenated" 
```

# c# - 如何编写这个正则表达式？

> ID：13075315
> 
> 赞同：1
> 
> 时间：2012-10-25T18:55:16.200
> 
> 标签：c#, regex, replace

我正在尝试用空格替换除字母、数字和一些特殊字符之外的所有字符。这是我正在使用的代码行：

```
documentText = Regex.Replace(documentText, @"^((?![a-zA-Z0-9%\-\@\$&']).*)$", " "); 
```

它不起作用。我在这样的示例文本上对其进行了测试：

```
[]\^|+*(){} ~#%=/<>-!@$&_'",.?;:
this should stay 
```

它删除了一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:57:34.170

使用以下正则表达式：

```
[^a-zA-Z0-9%\-@$&'] 
```

使用`^`反转字符类，这非常适合您正在寻找的内容，而无需使用负前瞻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:01:14.507

您正在搜索 .* 这意味着 0 个或更多任何字符....这就是它删除所有内容的原因。

# git - 如何确保此文件完全不在我的 git 存储库中？

> ID：13075316
> 
> 赞同：0
> 
> 时间：2012-10-25T18:55:17.123
> 
> 标签：git, terminal, git-tower

我有一个名为“sitemap.xml”的文件（据我所知）不是我的 git 存储库的一部分。它在我的 .gitignore 列表中。为了测试我的理论，我在本地更新了 sitemap.xml 文件，并且它在 Tower（我的 git GUI 客户端）中没有出现变化。

不过，我的网站上有一个现有的“sitemap.xml”。当我实时推送新的 git commit 时，我的站点上现有的“sitemap.xml”文件将被删除。这让我相信“sitemap.xml”仍然是我的 git 存储库的一部分。

我尝试进入本地机器上的终端并在我的 git 存储库的正确目录中执行“git rm sitemap.xml”，但是出现“pathspec”错误，说它“与任何文件都不匹配”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:01:36.923

尝试这个： `git rm sitemap.xml --cached`

在此处阅读文档 [http://www.kernel.org/pub/software/scm/git/docs/git-rm.html](http://www.kernel.org/pub/software/scm/git/docs/git-rm.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:02:14.613

您的问题意味着过去`sitemap.xml`实际上是您的存储库的一部分。如果您站点上的存储库*确实*包含`sitemap.xml`，则推送没有该文件的版本将导致该文件在远程更新时被删除。

但是，这只会发生一次。如果在更新到没有 的版本后`sitemap.xml`，您将该文件放回去，那么以后的更新将不会删除它。

# javascript - 复制数组中的第一个元素并替换最后一个元素

> ID：13075323
> 
> 赞同：-1
> 
> 时间：2012-10-25T18:55:39.673
> 
> 标签：javascript, jquery

我有一个包含 x 个值的 javascript 数组。

如何用第一个替换该数组中的最后一个元素？（不切换位置，但删除最后一个数组并将第一个数组放在最后一个位置）

例子：

初始数组： [9, 14, 23 ,12 ,1] 最终数组： [9, 14, 23, 12, 9]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T18:56:43.947

```
array[array.length-1] = array[0]; 
```

你不需要知道太多。对于初学者，请参阅[JavaScript 数组对象](http://www.w3schools.com/js/js_obj_array.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-24T18:04:39.317

您可以为数组使用任何值！希望这可以帮助！:)

```
// replaces the last index of an array with the first.
var replace = function(InputArray){
  //saves the first index of the array in var a
  var a = InputArray[0];
  //removes the last index of the array
  InputArray.pop;
  //places a copy of the first index in the place where the last index was
  InputArray.push(a);
  //returns the array
  return InputArray;
}
//call the function
replace([9, 14, 23 ,12 ,1]);
// result => [9, 14, 23, 12, 1, 9]

//If you want, you can log it in the console! 
console.log(replace([9, 14, 23 ,12 ,1])); 
```

# c# - RC4 算法：无法加密/解密客户端使用 Javascript 和服务器 c# 的数据

> ID：13075326
> 
> 赞同：0
> 
> 时间：2012-10-25T18:55:53.670
> 
> 标签：c#, javascript, encryption, rc4-cipher

我需要在 IIS（basicHttpBinding）中托管的 .NET 4.0 WCF 应用程序和使用 JavaScript RC4 算法实现加密/解密数据的内部客户端应用程序系统之间传递加密（和 base64 编码）字符串数据。

到目前为止，我还没有成功地将客户端加密的数据发送到服务器，然后在服务器上对其进行解密（或相反——客户端解密从服务器响应接收到的数据）。我们已经尝试了互联网上 JavaScript 文件（以及 AES）中的一些 RC4 算法变体。

我已将客户端使用的 RC4 算法版本转换为 C#（JavaScript 文件位于：[https](https://gist.github.com/2185197) ://gist.github.com/2185197 ）。我创建了一个 html 页面，以纯客户端方式测试 JavaScript 加密/解密功能。这行得通。同样，通过单元测试，我已经确定 c# Encrypt / Decrypt 也适用于 .NET WCF 服务。通过这些测试，没有 base64 编码/解码。

使用 c# RC4 算法，我可以成功处理通过线路发送的数据的加密/解密，其中加密数据是 base64 编码并且客户端是 .NET 应用程序（使用与服务器相同的 C# 算法实现类）

我逐行检查了客户端 JavaScript (Firebug) 和 C# (Visual Studio) 算法，验证变量值是否匹配。一切都匹配，除了代码将整数值转换为字符串（通过字符）。这里的结果是不一致的。下面是问题线。

下面是每个实现的代码行。

C#: var charX = Convert.ToChar(26).ToString();

JavaScript：

Var charX = String.fromCharCode(26);

一些视觉差异可能仅仅是由于 Firebug 和 Visual Studio 的渲染能力。[我的理解是它们都应该呈现 UTF8 编码的字符串]。我读过 JavaScript 引擎和 JavaScript 语言的编码不同。因此，微软已经实施了一个修复 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode]，我试图实施但没有成功。我可能需要在 C# 代码中实现一些编码；但目前还没有确定

根据上述整数值 26 的示例，当检查变量值时，C# 代码会显示一个左箭头。JavaScript 显示一个空格。对于 JavaScript，这与通过 W3Shools 完成的测试一致 (http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_fromcharcode)

我是否需要在 .NET 应用程序中执行某种编码以确保字符处理在 JavaScript v C# 中是一致的？

提前致谢。

下面是 JavaScript 代码：

```
 function rc4(key, str) {
        var s = [], j = 0, x, res = '';
        for (var i = 0; i < 256; i++) {
            s[i] = i;
        }
        for (i = 0; i < 256; i++) {
            j = (j + s[i] + key.charCodeAt(i % key.length)) % 256;
            x = s[i];
            s[i] = s[j];
            s[j] = x;                
        }
        i = 0;
        j = 0;
        for (var y = 0; y < str.length; y++) {
            i = (i + 1) % 256;
            j = (j + s[i]) % 256;
            x = s[i];
            s[i] = s[j];
            s[j] = x;

            //res += String.fromCharCode(str.charCodeAt(y) ^ s[(s[i] + s[j]) % 256]);

            var sx = s[i] + s[j];
            var ssx =  s[sx % 256];
            var fromChar1 =str.charCodeAt(y);
            var fromChar2 = (fromChar1 ^ ssx);
            var fromChar3 = String.fromCharCode(fromChar2);  //******  PROBLEM LINE *******
            //var fromChar3 = fixedFromCharCode(fromChar2);                
            res += fromChar3;
        }
        return res;
    }

    //Fix as per Microsoft
    //https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode
     function fixedFromCharCode(codePt) {
        if (codePt > 0xFFFF) {
            codePt -= 0x10000;
            return String.fromCharCode(0xD800 + (codePt >> 10), 0xDC00 + (codePt & 0x3FF));
        }
        else {
            return String.fromCharCode(codePt);
        }
    } 
```

下面是c#代码：

```
public class RC4
{
    public static string Encrypt(string key, string data)
    {
        var s = new List<int>();
        var j = 0;

        var x = 0;
        var res = string.Empty;

        for (var i = 0; i < 256; i++)
        {
            s.Add(i);
        }

        for (var i = 0; i < 256; i++)
        {
            var unicodeInt01 = ConvertedCharacterToItsUnicodeNumberic(key, i);

            j = (j + s[i] + unicodeInt01) % 256;

            x = s[i];
            s[i] = s[j];
            s[j] = x;
        }

        var f = 0;
        j = 0;
        for (var y = 0; y < data.Length; y++)
        {
            f = (f + 1) % 256;
            j = (j + s[f]) % 256;
            x = s[f];
            s[f] = s[j];
            s[j] = x;

            var unicodInt02 = ConvertedCharacterToItsUnicodeNumberic(data, y);
            var convStringOperationApplied = unicodInt02 ^ s[(s[f] + s[j]) % 256];

            var charX = Convert.ToChar(convStringOperationApplied);   //******  PROBLEM LINE *******
            var val = new string(charX, 1);
            res += val;

        }

        return res;
    }

    private static int ConvertedCharacterToItsUnicodeNumberic(string key, int i)
    {
        return key.ElementAt(i % key.Length);
    }

    public static string Decrypt(string key, string data)
    {
        return Encrypt(key, data);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:04:09.547

我认为您只需要对发送到代码的值进行 URL 编码。我在没有任何更改的情况下运行它，并注意到 FF 和 IE 发送了两个不同的值。所以我在发送值之前使用了 encodeURICompontent ，它工作得很好。RC4 算法没有变化

```
<script>
    $(function () {
        var value = encodeURIComponent(rc4('9F32B12B2D34FD5FB6B9F372DE67D5C38FC8BF862DB3486C52E5211589B50AB0', 'Welcome to ASP.NET MVC!'));
        $('#encrypted').val(value);
        $.get('/Home/Test?value=' + value, function (d) {
            $('#decrypted').val(d);
        });
    });
</script>
<textarea id="encrypted">
</textarea>

<textarea id="decrypted">
</textarea> 
```

这就是我在服务器端（ASP.NET MVC）所拥有的：

```
public string Test(string value)
{
    string test = RC4.Decrypt("9F32B12B2D34FD5FB6B9F372DE67D5C38FC8BF862DB3486C52E5211589B50AB0", value);

    return test;
} 
```

# jquery - jqGrid中子网格的行中有链接时如何获取父网格中的id或行

> ID：13075332
> 
> 赞同：0
> 
> 时间：2012-10-25T18:56:18.857
> 
> 标签：jquery, jquery-ui, jqgrid

我有一个`Grid`和一个`SubGrid`。当用户单击行`Grid`以展开 时`SubGrid`，我在 的列之一中有一个链接`SubGrid`。在子网格中此链接的 url 中，我想从父 ID 访问行的 ID。这是可行的吗？

下面是我如何在子网格的每一行创建一个链接。这是由[奥列格的回答采取的](https://stackoverflow.com/users/315935/oleg)

```
loadComplete: function() {
    var ids = jQuery('#'+subgridTableId).getDataIDs();
    var myGridNode = jQuery('#'+subgridTableId)[0];
        for (var i = 0, idCount = ids.length; i < idCount; i++) {
               var a = $("#"+ids[i]+" a",myGridNode);
               a.html("Link Name");
               a.click(function(e) {
                     var hash=e.currentTarget.hash;
                     if (hash.substring(0,5) === '#?id=') {//do something }
               }
        }
    } 
```

所以，我的问题是jqGrid中是否有办法访问`loadComplete`函数内部子网格中父行的id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:06:16.657

像这样的东西？

```
loadComplete: function() {
  var ids = jQuery('#'+subgridTableId).getDataIDs();
  var myGridNode = jQuery('#'+subgridTableId)[0];
  for (var i = 0, idCount = ids.length; i < idCount; i++) {
    var a = $("#"+ids[i]+" a",myGridNode);
    a.html("Link Name");
    $(a).live('click',function()
    {
      var hash=e.currentTarget.hash;
      thisParentRowID = $(this).parent().attr('id');
      if (hash.substring(0,5) === thisParentRowID) {
        //do something
      }
    });
  }
} 
```

# c# - 将 System.Color 转换为 Microsoft Word WdColor

> ID：13075335
> 
> 赞同：12
> 
> 时间：2012-10-25T18:56:29.053
> 
> 标签：c#, colors

我对 C# 相当陌生，发现几乎无法将 RGB 颜色或 system.color 转换为 WdColor 的简单方法！

VB很简单，C#——真的有那么难吗？

我不想在我的项目中引用 VB。

我在一些单词自动化项目中使用它来为字体着色，例如

```
tmpRange.Find.Replacement.Font.Color = Color.FromArgb(100, 150, 75); 
```

但是上面这条线是不可能的，它需要是 WdColor。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-25T19:12:20.260

```
Color c = Colors.Blue;
var wdc = (Microsoft.Office.Interop.Word.WdColor)(c.R + 0x100 * c.G + 0x10000 * c.B); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T19:17:09.763

添加对 Microsoft.VisualBasic dll 的引用

```
using Microsoft.VisualBasic;

int rgbColor = Information.RGB(100, 150, 75);
Word.WdColor wdColor = (Word.WdColor)rgbColor; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-26T05:22:59.260

我认为人们可能会喜欢一种扩展方法：

```
 public static void ColorRGB(this Wd.Font font, int red, int green, int blue)
    {
        font.Color = (Wd.WdColor)(red + 0x100 * green + 0x10000 * blue);
    } 
```

# hadoop - Hadoop 与 supercsv

> ID：13075343
> 
> 赞同：2
> 
> 时间：2012-10-25T18:56:51.763
> 
> 标签：hadoop, mapreduce, supercsv

我必须处理非常大的文本文件中的数据（如 5 TB 大小）。处理逻辑使用 supercsv 解析数据并对其进行一些检查。显然，由于大小相当大，我们计划使用 hadoop 来利用并行计算。我在我的机器上安装了 hadoop，我开始编写映射器和减速器类，但我被卡住了。因为地图需要一个键值对，所以要读取这个文本文件，我不确定在这个特定场景中应该是什么键和值。有人可以帮我解决这个问题。

我的思考过程是这样的（让我知道我是否正确） 1）使用 superCSV 读取文件，hadoop 为 hdfs 中的每个文件块生成 supercsv bean。（我假设 hadoop 负责拆分文件） 2) 对于这些 supercsvbeans 中的每一个运行我的检查逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T23:00:45.223

数据是否以换行符分隔？即，如果您只是在每个换行符上拆分数据，每个块是否总是一个完整的记录？这取决于 superCSV 如何对文本进行编码，以及您的实际数据是否包含换行符。

如果是：

只需使用 TextInputFormat。它为您提供（我认为）字节偏移量作为映射键，整行作为值。您可以忽略该键，并使用 superCSV 解析该行。

如果不：

您必须编写自己的自定义 InputFormat - 这是一个很好的教程：http: [//developer.yahoo.com/hadoop/tutorial/module5.html#fileformat](http://developer.yahoo.com/hadoop/tutorial/module5.html#fileformat)。确切的键是什么以及值是什么的细节对于映射器输入并不重要；只需确保两者之一包含您想要的实际数据。您甚至可以使用 NullWritable 作为其中之一的类型。

# vb.net - EF 5.0 - 无法使用 Code First 建立双向关系

> ID：13075344
> 
> 赞同：3
> 
> 时间：2012-10-25T18:56:58.063
> 
> 标签：vb.net, entity-framework, ef-code-first, entity-framework-5

我有一个名为 WidgetCollection 的类。它有一个 Items 属性公开一个 List(Of Widget) 和一个 SelectedWidget 属性。我希望EF按如下方式构建数据库：

*   在我的 Widgets 表中添加一个 WidgetCollection_Id 属性，指定每个小部件所在的 WidgetCollection
*   在我的 WidgetCollection 表中添加 SelectedWidget_Id 属性，指定选择哪个 Widget
*   添加从 WidgetCollection.Id 到 Widget.WidgetCollection_Id 的一对多关系
*   添加从 Widget.Id 到 WidgetCollection.SelectedWidget_Id 的 1 对 0 或 1 关系

我可以确认它似乎确实正确地构建了数据库模式，但是如果我在分配给 SelectedWidget 后保存了上下文，则会收到以下错误：

> System.Data.Entity.Infrastructure.DbUpdateException 发生 HResult=-2146233087 消息=保存不公开外键 > 关系属性的实体时发生错误。EntityEntries 属性将返回 null，因为无法将单个实体标识为异常源。通过在实体类型中公开外键属性，可以更轻松地处理保存时的异常。

除了内部的例外

> 无法确定相关操作的有效排序。由于外键约束、模型要求或存储生成的值，可能存在依赖关系。

我可以通过从不分配 WidgetCollect.SelectedWidget 来防止此错误。

我想问题在于 EF 无法弄清楚如何处理两个方向的关系，但我就是找不到将其指向正确方向的方法。示例代码如下，欢迎所有建议！

```
Public Class Widget
    Private miId As Integer
    Public Property Id As Integer
        Get
            Return miId
        End Get
        Set(value As Integer)
            miId = value
        End Set
    End Property

    Private msName As String
    Public Property Name As String
        Get
            Return msName
        End Get
        Set(value As String)
            msName = value
        End Set
    End Property
End Class
Public Class WidgetCollection
    Private miId As Integer
    Public Property Id As Integer
        Get
            Return miId
        End Get
        Set(value As Integer)
            miId = value
        End Set
    End Property

    Private msName As String
    Public Property Name As String
        Get
            Return msName
        End Get
        Set(value As String)
            msName = value
        End Set
    End Property

    Private moSelectedWidget
    Public Property SelectedWidget As Widget
        Get
            Return moSelectedWidget
        End Get
        Set(value As Widget)
            moSelectedWidget = value
        End Set
    End Property

    Private moWidgets As New List(Of Widget)
    Public Property Widgets As List(Of Widget)
        Get
            Return moWidgets
        End Get
        Set(value As List(Of Widget))
            moWidgets = value
        End Set
    End Property

End Class

Public Class MyContext
    Inherits DbContext
    Public Property Widgets As DbSet(Of Widget)
    Public Property WidgetCollections As DbSet(Of WidgetCollection)
End Class

Class Application
    Public Sub New()
        Database.DefaultConnectionFactory = New SqlCeConnectionFactory("System.Data.SqlServerCe.4.0", "", "Data Source=\EFtest.sdf")
        Database.SetInitializer(New DropCreateDatabaseIfModelChanges(Of MyContext))
        Dim oContext = New MyContext

        Dim oWidgetA = New Widget With {.Name = "Widget A"}
        Dim oWidgetB = New Widget With {.Name = "Widget A"}
        Dim oWidgetCollection = New WidgetCollection With {.Name = "My widget collection"}
        oWidgetCollection.Widgets.Add(oWidgetA)
        oWidgetCollection.Widgets.Add(oWidgetB)
        oWidgetCollection.SelectedWidget = oWidgetA  'Removing this line prevents error

        oContext.WidgetCollections.Add(oWidgetCollection)
        oContext.SaveChanges()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:00:25.523

我认为例外意味着它所说的：

> 无法确定相关操作的有效排序。

这两行...

```
oWidgetCollection.Widgets.Add(oWidgetA)
oWidgetCollection.SelectedWidget = oWidgetA 
```

...意味着 EF 必须先存储 ，`oWidgetCollection`然后才能将`WidgetCollection_Id`外键设置为`oWidgetA`，但第二行要求以相反的方式存储对象，即`oWidgetA`必须在 EF 设置外键之前`SelectedWidget_Id`存储`oWidgetCollection`。

要解决冲突，我相信您必须保存更改两次：

```
oWidgetCollection.Widgets.Add(oWidgetA)
oWidgetCollection.Widgets.Add(oWidgetB)

oContext.WidgetCollections.Add(oWidgetCollection)
oContext.SaveChanges()

oWidgetCollection.SelectedWidget = oWidgetA
oContext.SaveChanges() 
```

顺便说一句：这个期望...

> 添加从 Widget.Id 到 WidgetCollection.SelectedWidget_Id 的 1 对 0 或 1 关系

...是不正确的。EF 将创建另一个一对多的关系，`SelectedWidget`即可以为许多`WidgetCollection`s 选择相同的关系。当您仅在关系的一侧具有导航属性时，默认关系 EF 将按照约定创建，始终是一对多的。您需要数据注释或 Fluent API 来覆盖此默认行为。

我建议将这种关系保留为一对多。一对一的关系更加困难，EF 仅支持与共享主键的一对一关系，这意味着您不能选择不同的小部件作为选定的小部件。唯一可能选择的小部件是具有与 WidgetCollection 相同的主键值的小部件。

# firebird - Firebird 数据库的存储过程出错

> ID：13075352
> 
> 赞同：2
> 
> 时间：2012-10-25T18:57:30.310
> 
> 标签：firebird

我正在尝试创建一个存储过程，该过程将采用 50 个字节的字符串并一次扫描一个字节以查找逗号。找到后，我想更新一个字段，然后继续扫描字符串以查找其他逗号。

我正在使用 Firebird 数据库并`DBVisualizer`用于开发代码。

```
@delimiter ++;

CREATE PROCEDURE scan_for_comma(
       lastname_field CHAR(50),
       sr_bold_id     int
 )
 RETURNS (
    comma_flag varchar(1))
    AS
 declare variable   max_bytes inv default 50;
 declare variable I integer;

 BEGIN
 I = 0;
 While 
  (I <= max_bytes)
  DO
  Begin
  if (substring(name_field from I for 1) = ',') then
     Begin
       comma_flag = 'Y'
       I = I +1
       UPDATE sr_address
       SET lastname = (substring(name_field from i for 1) = ' ')
       WHERE bold_id   = :sr_bold_id
     end     
  ELSE 
     (substring(name_field from loop_cnt for 1) != ',') then
      Begin
      I = I +1
      END
  END
END
++
@delimiter ;++ 
```

我收到这个错误

> 14:45:34 [@DELIMITER - 0 行，0.000 秒]
> 命令处理
> 14:45:34 [CREATE - 0 行，0.000 秒]
> [错误代码：335544569，SQL 状态：HY000]
> GDS 异常. 335544569.
> 动态 SQL 错误 SQL 错误代码 = -104 令牌未知 - 第 21 行，第 12 列 14:45:34 [@DELIMITER - 0 行，0.000 秒]
> 命令已处理 ...
> 3 个语句已执行，0受影响的行，执行/获取时间：0.000/0.000 秒
> [2 成功，0 警告，1 错误]

任何帮助/方向将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T03:26:27.303

我不知道 DBVisualizer，但我会尝试语法：

```
set term ++ ;

create procedure ...
:
end ++

set term ; ++ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T03:30:49.267

您应该添加一个暂停命令以返回行。例子：

```
comma_flag = 'Y';
suspend; -- returns a row 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:22:28.503

在 ISQL 中，它不是 @delimiter，而是 SET TERM，但这只是关于 ISQL 和其他一些工具（例如 FlameRobin）。

然而，SET TERM 的使用并不特定于 Firebird 本身（数据库引擎本身并不知道该命令）。您很可能不需要在此工具中指定分隔符。只是不要`END`在过程之后使用分隔符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T04:49:19.800

在表达

```
 ...
  ELSE 
     (substring(name_field from loop_cnt for 1) != ',') then
  ... 
```

ELSE 后缺少关键字**IF**

# regex - 数据导入所需的 C# 正则表达式

> ID：13075355
> 
> 赞同：1
> 
> 时间：2012-10-25T18:57:49.983
> 
> 标签：regex

有人可以告诉我要提取的正则表达式吗

来自以下任何文件名的“EUR/USD”：

QR_IB_EURUSD.Quote.csv

QR_Integral_EURUSD.Quote.csv

QR_Currenex_EURUSD.Quote.csv

也需要它与其他货币对一起使用。

我知道 \..* 会敲掉文件名，但是如何获得带有反斜杠的符号？

我不知道正则表达式是什么语言，但它是 C#.Net 或 Java

![在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:00:44.867

```
_(\w+). 
```

然后你提取分组的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:15:29.443

```
$ echo QR_Currenex_EURUSD.Quote.csv | \
sed -r 's/(^.*[_])([AZ]{3})([AZ]{3})([.].*$)/\2\/\3/'
欧元/美元

```

在这种情况下，正则表达式是`(^.*[_])([A-Z]{3})([A-Z]{3})([.].*$)`，替换是`\2\/\3`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:01:30.493

这应该工作

```
^\w+_\w+_(\w+)\.Quote\.csv$ 
```

这里有一些 JavaScript 来演示

```
var test1 = [
    "QR_IB_EURUSD.Quote.csv",
    "QR_Integral_EURUSD.Quote.csv",
    "QR_Currenex_EURUSD.Quote.csv",
    "QR_IB_AUDCAD.Quote.csv"
    ];

for(var i=0; i<test1.length; i++)
    test1[i] = test1[i].match(/^\w+_\w+_(\w+)\.Quote\.csv$/i)[1];

alert(test1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T19:05:36.937

Try this out , this is in PERL, will detect if the word has EUR or USD

```
my $file_name = "QR_Integral_EURUSD.Quote.csv" #file name
$file_name =~ m/EUR|USD/ 
```

You could create any currency pair...

```
m/EUR|USD/
m/INR|AED/ 
```

or add all in one

```
m/EUR|AED|USD|INR/ 
```

# r - 来自R中`obj <- {}`的NULL分类对象的影响？

> ID：13075357
> 
> 赞同：1
> 
> 时间：2012-10-25T18:57:54.230
> 
> 标签：r

[在这篇文章https://stackoverflow.com/a/3417894/168689](https://stackoverflow.com/a/3417894/168689)中，语法`obj <- {}`引起了我的注意。我对它还很陌生，以前从未见过它，所以我启动了我的控制台：`R`

```
obj <- {}
class(obj) 
```

并找到了一个类对象`NULL`。

```
class(obj) 
[1] "NULL" 
```

I'd like to know the opinions on this technique in the R community. Is there merit in it? Do the possible downsides (really, no class?) outweigh those?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:28:19.433

`{}`相当于`NULL`。注意`identical({}, NULL)`是`TRUE`。`NULL`更清晰，imo，但使用它不会产生任何影响`{}`——除了可能会在审查你的代码的人身上引起暂时的混乱。

# python - 如何在没有窗口管理器的情况下使用 Python 从命令行界面显示全屏图像

> ID：13075358
> 
> 赞同：3
> 
> 时间：2012-10-25T18:57:54.083
> 
> 标签：python, image, command-line, debian

我有一个 python 脚本，在执行时，它会等到它从用户那里得到输入。我现在想知道在用户输入之前是否可以全屏显示图像？我已经搜索了一个解决方案，但我能找到的只是窗口管理器显示图片的工具，但这没有安装。它可能只在 Debian 上运行。

我正在寻找与 omxplayer 相同的想法，但它必须显示图片而不是电影。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T05:20:56.297

使用[pygame可能是在](http://www.pygame.org/)*Linux*帧缓冲区或*X Windows*根窗口（即没有窗口管理器）上全屏显示图像的最简单方法。

问题[Frame buffer module of python](https://stackoverflow.com/questions/11608454/frame-buffer-module-of-python)的答案包含有关如何实现此目的的所有详细信息。

# django - Django-cms 2.3 - 'cms_tags' 不是有效的标签库

> ID：13075359
> 
> 赞同：1
> 
> 时间：2012-10-25T18:57:56.267
> 
> 标签：django, django-cms

我正在尝试将我的 Django-cms 从版本 2.2 更新到 2.3，当我尝试“运行服务器”时，我收到此错误：

django.template.base.TemplateSyntaxError: 'cms_tags' 不是一个有效的标签库: ImportError raise loading cms.templatetags.cms_tags: cannot import name VersionAdapter

django-cms=2.3 的安装效果很好，但是有些东西破坏了一切。

以下是此 virtualenv 上安装的内容的列表：

```
BeautifulSoup==3.2.0
Django==1.3.1
Fabric==1.4.3
MySQL-python==1.2.3
PIL==1.1.7
South==0.7.3
argparse==1.2.1
cmsplugin-filer==0.8.0
django-admin-tools==0.4.0
-e git://github.com/bmihelac/django-app-name-translation-in-    admin.git@c7b033bdfb54fee5217248f4e596aa23752185e0#egg=django_app_name_translation_in_admin-dev
django-appconf==0.4.1
django-classy-tags==0.3.4.1
django-cms==2.3
django-debug-toolbar==0.8.5
django-filer==0.8.5
-e git+https://github.com/toastdriven/django-haystack.git@d2b51143c8008be8523a78822002de1836b9f501#egg=django_haystack-dev
django-hvad==0.1.5
django-mptt==0.5.1
django-page-cms==1.4.5
django-permissions==1.0.3
django-reversion==1.4
django-sekizai==0.5
django-staticfiles==1.1.2
django-transmeta==0.6.2
easy-thumbnails==1.0-alpha-18
feedparser==5.0.1
html5lib==0.90
httplib2==0.7.2
ipython==0.11
poster==0.8.1
pycrypto==2.6
pysolr==2.1.0-beta
python-ptrace==0.6.4
simplejson==2.2.1
sorl-thumbnail==11.09
ssh==1.7.14
virtualenv==1.6.4
wsgiref==0.1.2 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:49:56.903

`VersionAdapter`属于`django-reversion`所以你需要升级（django-reversion）到1.6版。请参阅`django-cms`安装说明：

```
http://docs.django-cms.org/en/2.3.3/getting_started/installation.html 
```

# python - 在 python / tkinter 中使用正则表达式更改文件的名称

> ID：13075360
> 
> 赞同：0
> 
> 时间：2012-10-25T18:57:58.873
> 
> 标签：python, regex, loops, tkinter

我正在尝试使用 python 更改列表中项目的编号，但无论我做什么，它似乎都按数字顺序排列。

假设我在名为 items 的列表中有以下项目

```
items = ['1\. item1', '2\. item2', '3\. item3', '4\. item4'] 
```

像这样更容易可视化，所以这是当前顺序

```
1\. item1
2\. item2
3\. item3
4\. item4 
```

从另一个函数中，我将顺序重新排列为：

```
3\. item3
1\. item1
4\. item4
2\. item2 
```

现在，我遇到问题的函数只是将文件重命名为与它们的位置相对应，所以它现在是：

```
1\. item3
2\. item1
3\. item4
4\. item2 
```

**问题是数字被放回数字顺序。我的列表项按特定顺序排列，我希望根据它们在列表中的位置对项目进行编号**

```
def order(self, directory):
    i = 1
    #print self.files
    for filename in os.listdir(directory): 
        if filename in self.files: #if the current file in the directory is part of the files list
            newfile = re.sub(r'^[0-9][.]',"",filename) #remove the number and decimal from the beginning
            os.rename(directory + "/" + filename, directory + "/" + str(i) + ". " + newfile) #rename it with a new number and decimal
            i = i + 1
            #print newfile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:03:56.283

尝试改用`i`- 列表中项目的索引

```
os.rename(directory + "/" + filename, directory + "/" + str(self.files.index(filename)) + ". " + newfile) 
```

因为我不确定如何`os.listdir`制作文件的顺序。

# powershell - 在此处字符串中使用变量时如何保留换行符

> ID：13075361
> 
> 赞同：5
> 
> 时间：2012-10-25T18:57:59.380
> 
> 标签：powershell

运行以下代码时：

```
 $txt = Get-Content file1.txt

    $a = @"
     -- file start --
     $txt
     -- file end --
    "@

   $a 
```

所有新行都从文件内容中删除，但只是运行

```
$txt 
```

在不删除新行的情况下打印出文件。

知道如何使用这里的字符串让它按需要工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T19:00:42.243

如果将数组放入字符串中，它将在项目之间扩展`$OFS`（或空格，如果`$OFS`是`$null`）。您可以看到相同的效果

```
"$txt"
''+$txt 
```

和其他一些人。您可以设置`$OFS="`r`n"`将它们连接到换行符的空间。

您也可以`Get-Content`在开始时将其更改为

```
$txt = Get-Content file1.txt | Out-String
$txt = [IO.File]::ReadAllText((Join-Path $pwd file1.txt)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-25T19:10:25.400

管道 $txt 到子表达式内的 Out-String。

```
$a = @"
    -- file start --
    $($txt | Out-String)
    -- file end --
"@ 
```

# magento - 如何找出 Magento 进行重定向的原因？

> ID：13075363
> 
> 赞同：0
> 
> 时间：2012-10-25T18:58:05.367
> 
> 标签：magento, redirect

我正在使用多个网站运行 Magento 安装，这些网站或多或少配置相同。在其中一个网站上，当我浏览到高度定制的单页结帐时，用户会被重定向到网站的主页，尽管他当然应该留在单页结帐上。对于每个其他网站，这都有效。

直到布局渲染部分我知道控制器得到处理没有任何错误。并且我在单页结帐中使用的所有自定义模板也会被加载。我添加了一些日志消息，以便我可以看到布局的处理程度。

但就在完成渲染过程之前，会发生内部重定向并渲染主页。目前我不知道如何找出重定向发生的原因或位置。

那么有没有办法找到重定向的来源？

# php - PHP中的运算符优先级

> ID：13075365
> 
> 赞同：2
> 
> 时间：2012-10-25T18:58:10.743
> 
> 标签：php, operator-precedence

> **可能重复：**
> [前缀/后缀增量](https://stackoverflow.com/questions/12862733/prefix-suffix-increment)

[关于运算符优先级](http://www.php.net/manual/en/language.operators.precedence.php)的官方 php 手册有以下奇怪的代码和注释：

```
// mixing ++ and + produces undefined behavior
$a = 1;
echo ++$a + $a++; // may print 4 or 5 
```

有人能解释一下为什么它说在某些情况下它可能会打印 4 或 5 吗？对我来说很明显，它首先会增加 $a（到 2 的值），然后会总结 $a 和 $a (4)，然后才将 $a 的值更改为 3。所以，结果应该是 4 .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:00:30.843

更新。这并*没有*给出完整的答案。我无法清楚地说明你如何获得 5。

我在下面写的内容是基于 C++ 的真实情况，它可能有助于 Precedence 不控制语句各部分的执行顺序，并且一条语句的效果不会自动（至少不能保证）更新语句中的变量。

例如：

```
a=1 
b=a++ ; // b is 1, a is 2 
c=++a ; // c is 3, a is 3 
```

现在想想写c+b。这将评估为 1+3=4。但是当你写

```
a++ + ++a 
```

语言不能保证在每次单独递增后都会更新 a 。

所以你不妨得到的效果

```
a=1 
b=a++ ; // b is 1, a is 2 
a=1 ; 
c=++a ; // c is 2, a is 2 
```

结果 3

这实际上与优先级甚至评估顺序无关。例如，如果保证在语句中更新变量，则翻转评估顺序无论如何都会得到 4。

```
a=1 
c=++a ; // c is 2, a is 2
b=a++ ; // b is 2, a is 3 
```

# java - 动态检索 JUnit 类

> ID：13075370
> 
> 赞同：1
> 
> 时间：2012-10-25T18:58:39.283
> 
> 标签：java, junit, webdriver, selenium-webdriver

我想从用户输入收集的外部位置实例化一个新的类对象。程序询问用户文件在哪里，比如 /tmp/MyTestClass.java。然后我希望它抓取该 .java 文件并使其成为程序中的可用类。所以我可以调用类似 MyClass = new MyTestclass() 的东西。我一直在环顾四周，似乎找不到答案，或者甚至可能找不到答案？任何信息都会很有用。

谢谢！！

- - - - - -编辑 - - - - - - - -

我可能一直在思考我的问题。这是针对 JUnit 测试的（抱歉之前应该提到过）。下面是我用来拉入静态类的示例。我希望能够从用户输入中动态提取 JUnit 测试文件。testcastjunit 是类的名称。我需要能够以编程方式从用户输入中获取类并运行测试用例。

```
org.junit.runner.Result result = JUnitCore.runClasses(**testcastjunit.class**);
            for (Failure failure : result.getFailures()) {
                System.out.println(failure.toString());
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:15:11.447

如果我理解你，这就是你需要的：

```
JavaCompiler jCompiler = ToolProvider.getSystemJavaCompiler();
List<String> options = Arrays.asList(
                           "-d", "./bin/",
                           path+".java");
int compilationResult = jCompiler.run(null, null, null, 
                options.toArray(new String[options.size()]));
if (compilationResult == 0) {
    mensaje = "Compiled the "+path+" to its .class";
    ClassLoader cLoader = ClassLoader.getSystemClassLoader();
    try {
        cLoader.loadClass("THE CLASS");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
} else {
    mensaje = "Couldnt compile.";
} 
```

这对你有用：

1.  它让java编译器编译一个类。
2.  创建选项，-d 是编译后要放置 .class 的任何位置，第二个是 .java 文件的路径。
3.  编译，如果编译成功，它会加载类。
4.  开始使用您的课程！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:13:33.740

感谢 Javier 的建议，我能够让我的程序动态编译和运行 JUnit 测试用例。我正在使用它来运行 Selenium IDE 导出的 .java 文件。下面是我完成的例子。希望这可以帮助其他寻找类似解决方案的人。另一个说明我正在使用 Eclipse IDE 进行开发，快乐编码！

```
 //the loc and name variables are gathered from user input
    String fileloc = loc +"/"+ name + ".java";
    JavaCompiler jCompiler = ToolProvider.getSystemJavaCompiler();
    List<String> options = Arrays.asList("-d", "./bin/",fileloc);

    int compilationResult = jCompiler.run(null, null, null, 
            options.toArray(new String[options.size()]));
    if (compilationResult == 0){
        //This is the package name exported from selenium IDE exported files
        File file = new File("./bin/com/example/tests/" + name);
        URL url = null;
        try {
            url = file.toURL();
            URL[] urls = {url};
            ClassLoader cl = new URLClassLoader(urls);
            org.junit.runner.Result result = JUnitCore.runClasses(cl.loadClass
                    ("com.example.tests." + name));
            for (Failure failure : result.getFailures()) {
                System.out.println(failure.toString());
            };
        } catch (MalformedURLException e) {
            System.out.println("Error with file location (URL)");
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            System.out.println("Couldn't Not Find Test Class To Load");
            e.printStackTrace();
        }
    }else{
        System.out.println("Could not Find Java Source File Located in `" + fileloc + "`");
        System.exit(1);
    }
} 
```

# background - 如何在gtk中绘制纹理作为背景？

> ID：13075371
> 
> 赞同：0
> 
> 时间：2012-10-25T18:58:40.543
> 
> 标签：background, gtk, vala

我想在 gtk 容器中添加纹理作为背景，可以吗？

我想要的类似于 css 中的 repeat-x repeat-y 属性，但是 gtk 还不支持它，那么，如何在没有任何丑陋的黑客攻击的情况下做到这一点？另一个例子是鹦鹉螺有什么，你可以改变背景。

谢谢 ：）

PD：对不起 4 ma 英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T05:22:58.597

我是这样做的：

```
 private bool draw_background (Cairo.Context cr) {

    int width = this.get_allocated_width ();
    int height = this.get_allocated_height ();

    cr.set_operator (Cairo.Operator.CLEAR);
    cr.paint ();
    cr.set_operator (Cairo.Operator.OVER);

    var background_style = this.get_style_context ();
    background_style.render_background (cr, 0, 0, width, height);
    background_style.render_frame (cr, 0, 0, width, height);

    var pat = new Cairo.Pattern.for_surface (new Cairo.ImageSurface.from_png (Build.PKGDATADIR + "/files/texture.png"));
    pat.set_extend (Cairo.Extend.REPEAT);
    cr.set_source (pat);
    cr.paint_with_alpha (0.6);

    return false;
} 
```

# python - 在无头 CentOS 5.x-6.x 上无需安装 python web 应用程序

> ID：13075376
> 
> 赞同：0
> 
> 时间：2012-10-25T18:58:57.093
> 
> 标签：python, web-applications, installation

我有一个 Linux 网络应用程序，它使用一组`.sh`脚本安装网络服务器、数据库、数字证书等。

为了简化安装过程中的用户交互，例如输入密码、证书详细信息等，我想创建一个 GUI 安装程序。经过深思熟虑，以下是一些决定和相关问题

1.  目标系统可能有也可能没有安装桌面或显示器。因此，为安装过程提供 Web 界面可能是可行的方法。用户将应用程序复制到目标机器，启动 web 服务，然后公开一个 web 界面以继续安装。**Python 会是一个不错的选择吗？**
2.  由于这是一个安装程序本身，运行它的要求必须几乎为零。这需要

    *   使用 python 内置的`SimpleHTTPServer`. 这将在安装期间使用一次，然后被杀死。**使用默认 python web 服务器有什么注意事项吗？**
    *   使用 Freezing 实用程序之一将应用程序编译为独立的二进制文件。我们不想依赖在他们的系统上安装 python 的用户，并且已经被要求解释由于任何原因删除了 python 的管理员。**这种预防措施有必要吗？**

对一般方法或替代选项的任何评论将不胜感激。

# javascript - Javascript图表点击打开新的

> ID：13075377
> 
> 赞同：4
> 
> 时间：2012-10-25T18:59:06.180
> 
> 标签：javascript, charts, dom-events, google-visualization

我正在使用一组数据，即美国所有州的 CO [2]输出量。到目前为止，我将所有州划分为相应的区域。我想做的是；当有人点击一个区域时，它会制作一个新的对应状态的饼图。因此，如果单击东北地区部分，它将打开一个新的 PA、NY、NH 等图表。我不确定如何设置代码以单击打开新图表。我的最终目标是让它淡出并在新图表中淡出。我对此很陌生，所以我不太确定。这是我已经拥有的代码：

```
<html>
<head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(drawChart);

function drawChart() {
    var data = google.visualization.arrayToDataTable([
        ['Region',      'CO2 Output'],
        ['Northeast',   31887048.7],
        ['Midwest',     64278877.8],
        ['South',       76192034.1],
        ['West',        78808504.3],
    ]);

    var options = {
        title: 'Average Maximum Co2 Output of the US Regions'
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
}

</script>
</head>

<body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:04:35.720

您可以使用此处描述的交互性[https://developers.google.com/chart/interactive/docs/basic_interactivity](https://developers.google.com/chart/interactive/docs/basic_interactivity)

看：

```
 // The select handler. Call the chart's getSelection() method
  function selectHandler() {
    var selectedItem = chart.getSelection()[0];
    if (selectedItem) {
      var value = data.getValue(selectedItem.row, selectedItem.column);
      alert('The user selected ' + value);
    }
  }

  // Listen for the 'select' event, and call my function selectHandler() when
  // the user selects something on the chart.
  google.visualization.events.addListener(chart, 'select', selectHandler); 
```

对于淡出，您可以只使用 jQuery `$('#myChartDiv').fadeOut();`，然后在下一个图表中淡入。您必须将参数传递给第二个图表，以便它知道要显示哪个图表。

# html - 输入框长文本不结束，水平滚动显示隐藏文本

> ID：13075378
> 
> 赞同：0
> 
> 时间：2012-10-25T18:59:15.587
> 
> 标签：html, css

所以我为我的输入文本设置了列宽（客户要求我这样做......）

```
 <td colspan="1" width="250">
             <input type="text" id="CUSTOMER_NAME" 
               name="APPLICATION.CUSTOMER_NAME" 
               value="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567891011" 
               size="30" 
               maxlength="30"/>
     </td> 
```

乍一看，它似乎确实被截断了。如下所示。但实际上，双击文本后，您可以水平滚动以将文本进一步向右显示

![在此处输入图像描述](../Images/a661fec53ca59ab6e64686236b55d00f.png) ![在此处输入图像描述](../Images/de1c1c212d6746baedcc93a6b8ee2e29.png)

**有什么方法可以防止水平滚动并将文本换行到 IE 7 的第二行*而不使用 textarea*？**

预期结果： ![在此处输入图像描述](../Images/474eabec3fc1a96e846d9e6d0fbd97de.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:03:06.627

文本框只有单行（[source](http://www.w3.org/TR/html401/interact/forms.html#input-control-types)）。我建议使用 a`<textarea>`来尝试解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:08:00.090

是否可以选择在 focus width: 100% 上做一些事情，然后模糊回客户指定为他们想要的宽度？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:04:02.773

如果您想要第二行，请使用`<textarea>`. 或者，尝试使用`width`CSS 属性，如`<input type="text" style="width: 100px;" />`

# internet-explorer - .htm 文件的 VBS WScript.Shell 运行挂起 IE

> ID：13075380
> 
> 赞同：1
> 
> 时间：2012-10-25T18:59:16.770
> 
> 标签：internet-explorer, vbscript, wsh

我正在尝试使用 WScript.Shell.Run 打开文件。该文件并不总是相同的类型，我想依靠 Windows 使用默认程序打开文件。

对于带有记事本设置的 .txt，它的效果非常好。对于带有 Internet Explorer 8 或 9（Windows XP 或 Windows 7）的 .htm（或 .html），该命令将执行，并且会发生以下两种情况之一。

1.  如果在脚本启​​动之前没有运行其他 IE 实例，它将打开 IE 并挂起，不显示任何内容。
2.  如果至少有 1 个其他 IE 窗口（或选项卡）打开，则脚本将执行并执行打开新选项卡或窗口的默认操作，并显示 .htm（或 .html）文件的内容。

该问题在其他浏览器中并不明显，例如，如果您将 .htm 的默认处理程序更改为 Chrome，它在两种情况下都能正常工作，始终显示内容。

测试.vbs

```
Set App = Wscript.CreateObject("WScript.Shell")
App.Run("C:\test.htm")
WScript.Quit 
```

测试.htm

```
<html>
<head><title>Test File</title></head>
<body><p>Test File</p></body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:21:07.297

我发现以下代码块可以代替使用 WScript.Shell.Run

```
Set objShell = CreateObject( "Shell.Application" )
objShell.ShellExecute "C:\Backups\Scripts\test.htm" 
```

# c# - WebApplication 通过 Socket 与 Windows 应用程序通信

> ID：13075389
> 
> 赞同：0
> 
> 时间：2012-10-25T19:00:14.440
> 
> 标签：c#, sockets

我在计算机和服务器之间的 Socket 通信上有问题。发生的情况是，仅当我单击特定按钮时，我才通过套接字建立通信。在第一次沟通中，一切都发生得很完美。如果我再次单击，则不会执行代码。我放了一个断点来查看发生了什么，当我尝试连接到服务器时，发现出现以下错误

`Cannot access a disposed object. Object name: 'System.Net.Sockets.TcpClient'.`

因此，为了再次工作，我关闭客户端应用程序并再次打开，然后正常工作。

**我想要什么** 我有一个只能在 FireFox 上运行的 Web 应用程序。我有一台打印机，我需要通过 DLL 访问他，所以我制作了一个客户端应用程序，通过 Socket 与这个 Web 应用程序连接。我通过流传递一些参数并在客户端应用程序中恢复这些参数，然后打印。

**在我的 Web 应用程序代码中**

```
public void btnImprimeBematech_Venda()
        {            
            Utilidade.QuebraToken tk = new Utilidade.QuebraToken();
            int Credenciada = Convert.ToInt32(tk.CarregaToken(1, HttpContext.Current.Request.Cookies["token"].Value));
            TcpListener serverSocket = new TcpListener(8852);            
            int requestCount = 0;
            TcpClient clientSocket = default(TcpClient);
            serverSocket.Start();

            while (true)
            {
                clientSocket = serverSocket.AcceptTcpClient();

                requestCount = 0;

                while (clientSocket.Connected == true)
                {
                    try
                    {
                        requestCount = requestCount + 1;
                        NetworkStream networkStream = clientSocket.GetStream();
                        string serverResponse = Request.QueryString["id"].ToString() + ";" + Credenciada.ToString() + ".";
                        Byte[] sendBytes = Encoding.ASCII.GetBytes(serverResponse);
                        networkStream.Write(sendBytes, 0, sendBytes.Length);
                        networkStream.Flush();
                    }
                    catch (Exception ex)
                    {
                    }
                }
            }

            clientSocket.Close();
            serverSocket.Stop();
        } 
```

我通过流传递一个字符串，并在客户端应用程序中恢复。

**客户端应用程序代码**

```
`System.Net.Sockets.TcpClient clientSocket = new System.Net.Sockets.TcpClient();`

private void Form1_Load(object sender, EventArgs e)
    {
        clientSocket.Connect("server_ip", 8852);
        this.imprimir();
    }

private void button3_click(object sender, EventArgs e)
{
    if (clientSocket.Connected == false)
        clientSocket.Connect("server_ip", 8852);            

    this.imprimir();
}

protected void imprimir()
{            
    NetworkStream serverStream = clientSocket.GetStream();
    byte[] inStream = new byte[10025];
    serverStream.Read(inStream, 0, (int)clientSocket.ReceiveBufferSize);
    string returndata = System.Text.Encoding.ASCII.GetString(inStream);
    int ponto = returndata.IndexOf('.');
    returndata = returndata.Substring(0, ponto);
    string[] quebraretorno = returndata.Split(';');

    ServiceReference1.bematechSoapClient bema = new ServiceReference1.bematechSoapClient();            
    string r = bema.InformacoesImovelBematech(quebraretorno[0], quebraretorno[1]);
    int retorno = -1;

    retorno = IniciaPorta("COM7");         

    if (retorno == 1)
    {
        ConfiguraModeloImpressora(7);
        BematechTX(r);
        AcionaGuilhotina(1);
        FechaPorta();
    }

    clientSocket.Close();
} 
```

每次我的用户单击我的 Web 应用程序上的特定按钮时，我都需要它，打电话给我`btnImprimeBematech_Venda()`，然后与我的客户端应用程序交谈以进行打印。现在，每当我的用户单击我的按钮进行打印时，我都需要关闭客户端应用程序并再次打开。

我不太了解，`Thread`但也许我需要使用它。我不知道。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:17:41.857

我认为您的问题是`Close()`客户端应用程序结束时的呼叫。关闭将释放与解释您的处置异常的套接字关联的所有资源。尝试使用`Shutdown`后跟`Disconnect(true)`which 应该允许您的套接字被重用。[请参阅此处](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.disconnect.aspx)的msdn 文档。

或者，您可以保持关闭，并在每次连接时创建一个新套接字。

# hibernate - Hibernate 子查询 detachedCriteria

> ID：13075390
> 
> 赞同：8
> 
> 时间：2012-10-25T19:00:14.757
> 
> 标签：hibernate, subquery, detachedcriteria

如何在具有多个子查询的休眠中编写子查询。例如

```
select * from project_dtls where project_id in  
  (select project_id from project_users where user_id =
  (select user_id from user_dtls where email='abc@email.com')) 
```

我知道我们可以通过 DetachedCriteria 编写，但找不到任何可以使用多个子查询的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T19:08:47.187

这是一个例子：

```
DetachedCriteria exampleSubquery = DetachedCriteria.forClass(MyPersistedObject.class)
    .setProjection(Property.forName("id"))
    // plus any other criteria...
    ;

Criteria criteria = getSession().createCriteria(ARelatedPersistedObject.class)
    .setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)
    .add(Subqueries.propertyIn("myPersistedObjectId", exampleSubquery))); 
```

对于多个子查询，您可以使用像 Restrictions.or() 这样的布尔运算符：

```
DetachedCriteria anotherSubquery = DetachedCriteria.forClass(MyPersistedObject.class)
    .setProjection(Property.forName("id"))
    // plus any other criteria...
    ;

Criteria criteria = getSession().createCriteria(ARelatedPersistedObject.class)
    .setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)
    .add(Restrictions.or(
        Subqueries.propertyIn("myPersistedObjectId", exampleSubquery),
        Subqueries.propertyIn("myPersistedObjectId", anotherSubquery))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-30T19:22:04.407

完全使用分离标准来完成（因为我喜欢在没有会话的情况下构建分离标准）

```
DetachedCriteria idQuery = DetachedCriteria.forClass(MyPersistedObject.class)
    .setProjection(Property.forName("id"))
DetachedCriteria recordQuery = DetachedCriteria.forClass(MyPersistedObject.class)
    .add(Property.forName("id").eq(idQuery) ); 
```

# javascript - onchange 劫持 onclick

> ID：13075393
> 
> 赞同：0
> 
> 时间：2012-10-25T19:00:31.917
> 
> 标签：javascript, html, javascript-events

修改文本然后点击按钮只触发**onchange**代码

但我需要知道按钮是否被点击

```
<input type="text" onchange="alert('change')" value="Text">
<input type="button" onclick="alert('click')" value="Button"> 
```

我需要更改什么来获取点击处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:06:15.347

效果很好，`alert()`就是烂。

我不知道它周围的确切细节，但我过去注意到，`alert()`当这些事件一起发生时，它们会以奇怪的方式混淆 DOM 事件。

```
<input type="text" onchange="console.log('change')" value="Text">
<input type="button" onclick="console.log('click')" value="Button">​ 
```

见这里： http: [//jsfiddle.net/25EsQ/](http://jsfiddle.net/25EsQ/) （确保调出 JS 控制台，以便看到输出）

好消息是这只是一个调试问题（希望如此），当您使用真实且有用的 JS 代码时，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:10:53.563

警报出现在 onmousedown 和 onmouseup 事件之间，导致 onclick 永远不会触发

# asp.net-mvc-3 - MVC3 链接 SEO - 如何从一个控制器调用另一个控制器

> ID：13075395
> 
> 赞同：0
> 
> 时间：2012-10-25T19:00:32.057
> 
> 标签：asp.net-mvc-3, url, seo, controllers

我有一个问题，我不知道如何解释，但我会尝试。我遵循了这个： http: [//www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx](http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx) 我能够实现他们所描述的。但是，如果我有一个希望从其他控制器调用操作的页面，它就不起作用。它不会以这种方式显示链接：URL 中的“this-is-my-link”。

我不知道我做错了什么？

在 Global.asax

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Default2",
            "{controller}/{action}/{id}/{pageTitle}",
            new
                {
                    controller = "Home",
                    action = "Index",
                    id = UrlParameter.Optional,
                    pageTitle = UrlParameter.Optional
                }
            );

    } 
```

意见/帮助/常见问题

```
@Html.ActionLink(FaqStrings.ContactUs, "ContactUs", "Home", new { id = 1, pageTitle = "link text".ToSeoUrl() }) 
```

它说它无法解决 ContactUs。它看到的不是 HomeController 的动作，而是 HelpController 的动作。

在 HomeController

```
[AllowAnonymous]
    public ActionResult ContactUs()
    {
        var model = new ViewModelContactUs
                        {
                            Resultmessage = string.Empty,
                            Youremail = string.Empty,
                            Yourmessage = string.Empty,
                            Yourname = string.Empty
                        };
        return View(model);
    }

    [AllowAnonymous]
    [HttpPost]
    public ActionResult ContactUs(ViewModelContactUs model)
    {
        Log.DebugFormat("HomeController-ContactUs()"); 
```

...........

```
 var model2 = new ViewModelContactUs
                         {
                             ......
                         };

        ModelState.Clear();
        return View(model2);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:34:01.303

尝试将您的控制器移动到您的 RouteValues 字典部分`@Html.ActionLink`

```
@Html.ActionLink(FaqStrings.ContactUs, "ContactUs", new {controller="Home", id = 1, pageTitle = "link text".ToSeoUrl() }) 
```

**编辑**

为了解决这个逻辑，它与 Html.ActionLink 方法的可用签名有关。 [这是 MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink%28v=vs.108%29.aspx)的信息，但...

您使用的方法签名是`Html.ActionLink("Link Text", "Action", "Contoller", RouteValues, HtmlAttributes)`. 由于您没有传递 HtmlAttributes，因此匹配错误并生成了错误的链接。通过将控制器移入或在调用结束时`RouteValuesDictionary`传递 a应该可以解决它。`, null`但是，除非需要，否则我个人不喜欢到处乱扔空值，所以我通常只在`RouteValuesDictionary`.

如果您没有传递任何 RouteValues，则调用`Html.ActionLink("Link Text", Action, Controller)`没有问题。

希望这能澄清一点！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:21:26.123

根本问题是：

```
@Html.ActionLink(FaqStrings.ContactUs, 
                 "ContactUs", 
                 "Home", 
                 new { id = 1, pageTitle = "link text".ToSeoUrl() }) 
```

将产生一个`Anchor`单击时会产生一个`HTTP GET`，但是您的方法需要`HTTP POST`：

```
[AllowAnonymous]
[HttpPost]  // <-----POST
public ActionResult ContactUs(ViewModelContactUs model) 
```

# javascript - 预先确定的消息类型在按键时输出

> ID：13075396
> 
> 赞同：2
> 
> 时间：2012-10-25T19:00:39.140
> 
> 标签：javascript, events, onkeypress

我有一个 id 为“可编辑”的可内容编辑的 div。我希望最终结果是用户键入，而不是物理键事件，而是出现预先确定的消息。

例如，如果预先确定的消息是单词“Sing”，那么无论用户首先输入什么字母，第一个出现的字母都是“S”，第二次按键时，会出现一个“i”，等等。

我在这个论坛上找到了模拟更改与关键事件关联的字符的代码，并且我修改了代码以实现示例中的“S”。我粘贴了下面的代码并在这里创建它：http: [//jsfiddle.net/Ukkmu/61/](http://jsfiddle.net/Ukkmu/61/)

当然，这段代码给了我无限次的“S”。我被卡住的地方是只执行一次这个函数，然后为“i”调用另一个函数，然后是“n”等等。
我在一个我认为可能有效的切换功能上得到了一个可能的线索，但我无法辨别如何将它应用到我的代码中。

```
function transformTypedCharacter(charStr) {
  return /[a-z]/.test(charStr) ? "S" : /[A-Z]/.test(charStr) ? "S" :   charStr;
}

function insertTextAtCursor(text) {
  var sel, range, textNode;
  if (window.getSelection) {
    sel = window.getSelection();
    if (sel.getRangeAt && sel.rangeCount) {
      range = sel.getRangeAt(0).cloneRange();
      range.deleteContents();
      textNode = document.createTextNode(text);
      range.insertNode(textNode);

      // Move caret to the end of the newly inserted text node
      range.setStart(textNode, textNode.length);
      range.setEnd(textNode, textNode.length);
      sel.removeAllRanges();
      sel.addRange(range);
    }
  } else if (document.selection && document.selection.createRange) {
    range = document.selection.createRange();
    range.pasteHTML(text);
  }
}

$("#editable").keypress(function(evt) {
  if (evt.which) {
    var charStr = String.fromCharCode(evt.which);
    var transformedChar = transformTypedCharacter(charStr);
    if (transformedChar != charStr) {
      insertTextAtCursor(transformedChar);
      return false;
    } 
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:47:27.840

改用这个：

```
var list = "Sing".split('');
function transformTypedCharacter(charStr) {
    return /[a-zA-Z]/.test(charStr) ? list.shift()||" " : charStr;
} 
```

但是我不确定这是否真的是最好的方法，因为它可能`transformTypedCharacter`不是以与预期输出字符串相关的线性方式调用的。如果您按退格键，您可能会返回一些字符两次，如果您按元音变音等，则会将其插入结果中的某个位置。

# mysql - mySQL 查询杀死了服务器

> ID：13075403
> 
> 赞同：0
> 
> 时间：2012-10-25T19:00:56.317
> 
> 标签：mysql, cpu-usage

我正在尝试在列上查找重复条目，以便可以修复它们以准备在该列上创建唯一索引。该数据库目前有大约 450 万条记录。

我使用的查询是：

```
SELECT `sig`, COUNT(*) c FROM `info` GROUP BY `sig` HAVING c > 1; 
```

这立即将我锁定在服务器之外，远程管理员必须重新启动它才能恢复功能。我的问题是，是否有另一种更好的选择来查找重复项？减轻查询影响的其他方法？

# sql - Complex Query Involving Search for Contiguous Dates (by Month)

> ID：13075405
> 
> 赞同：1
> 
> 时间：2012-10-25T19:01:05.470
> 
> 标签：sql, pattern-matching

I have a table that contains a list of accounts by month along with a field that indicates activity. I want to search through to find when an account has "died", based on the following criteria:

1.  the account had consistent activity for a contiguous period of months
2.  the account had a spike of activity on a final month (spike = 200% or more of average of all previous contiguous months of activity)
3.  the month immediately following the spike of activity and the next 12 months all had 0 activity

So the table might look something like this:

```
ID | Date      | Activity
1  | 1/1/2010  | 2
2  | 1/1/2010  | 3.2
1  | 2/3/2010  | 3
2  | 2/3/2010  | 2.7
1  | 3/2/2010  | 8
2  | 3/2/2010  | 9
1  | 4/6/2010  | 0
2  | 4/6/2010  | 0
1  | 5/2/2010  | 0
2  | 5/2/2010  | 2 
```

So in this case both accounts 1 and 2 have activity in months Jan - Mar. Both accounts exhibit a spike of activity in March. Both accounts have 0 activity in April. Account 2 has activity again in May, but account 1 does not. Therefore, my query should return Account 1, but not Account 2\. I would want to see this as my query result:

```
ID | Last Date
1  | 3/2/2010 
```

I realize this is a complicated question and I'm not expecting anyone to write the whole query for me. The current best approach I can think of is to create a series of sub-queries and join them, but I don't even know what the subqueries would look like. For example: how do I look for a contiguous series of rows for a single ID where activity is all 0 (or all non-zero?).

My fall-back if the SQL is simply too involved is to use a brute-force search using Java where I would first find all unique IDs, and then for each unique ID iterate across the months to determine if and when the ID "died".

Once again: any help to move in the right direction is very much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:17:13.817

用Java处理，或者部分用SQL处理，用Java完成处理是一个好办法。

我不打算解决如何定义尖峰。

我建议你从条件 3 开始。很容易找到最后一个非零值。那么这就是您要测试峰值的那个，以及峰值之前的一致数据。

```
SELECT out.*
FROM monthly_activity out
  LEFT OUTER JOIN monthly_activity comp
    ON out.ID = comp.ID AND out.Date < comp.Date AND comp.Activity <> 0
WHERE comp.Date IS NULL 
```

不错，但是如果这是因为该记录是该月的最后一个记录，则您不想要结果，因此，

```
SELECT out.*
FROM monthly_activity out
  INNER JOIN monthly_activity comp
    ON out.ID = comp.ID AND out.Date < comp.Date AND comp.Activity == 0
GROUP BY out.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:48:03.470

可能不是世界上最有效的代码，但我认为这可以满足您的需求：

```
declare @t table (AccountId int, ActivityDate date, Activity float)

insert @t 
      select 1,   '2010-01-01', 2
union select 2,   '2010-01-01', 3.2
union select 1,   '2010-02-03', 3
union select 2,   '2010-02-03', 2.7
union select 1,   '2010-03-02', 8
union select 2,   '2010-03-02', 9
union select 1,   '2010-04-06', 0
union select 2,   '2010-04-06', 0
union select 1,   '2010-05-02', 0
union select 2,   '2010-05-02', 2

select AccountId, ActivityDate LastActivityDate --, Activity
from @t a
where 
--Part 2 --select only where the activity is a peak
Activity >= isnull
(
    (
        select 2 * avg(c.Activity)
        from @t c
        where c.AccountId = 1
        and c.ActivityDate >= isnull
        (
            (
                select max(d.ActivityDate)
                from @t d
                where d.AccountId = c.AccountId
                and d.ActivityDate < c.ActivityDate
                and d.Activity = 0  
            )
            ,
            (
                select min(e.ActivityDate)
                from @t e
                where e.AccountId = c.AccountId
            )
        )
        and c.ActivityDate < a.ActivityDate
    )
    , Activity + 1 --Part 1 (i.e. if no activity before today don't include the result)
)
--Part 3
and not exists --select only dates which have had no activity for the following 12 months on the same account (assumption: count no record as no activity / also ignore current date in this assumption)
(
    select 1
    from @t b
    where a.AccountId = b.AccountId
    and b.Activity > 0
    and b.ActivityDate between dateadd(DAY, 1, a.ActivityDate) and dateadd(YEAR, 1, a.ActivityDate)
) 
```

# jquery - jQueryt Stackoverflow 样式的标签框不提交值

> ID：13075406
> 
> 赞同：0
> 
> 时间：2012-10-25T19:01:11.980
> 
> 标签：jquery, forms, tags

我有一个 stackoverflow 风格的标签框，它工作正常，只是在提交表单时它不会提交标签值。url 只是以'/?tags=' 的形式出现。我想不出有什么问题。有任何想法吗？

```
$(".tag_field").each(function() {
  var buttons = $("<div/>");
  var input = $(this).find("input[type=text]"); /* locate element input type text */
  var output = $(this).find("input[type=hidden]"); /* locate element input type text */

  var update_padding = function() {
      input.css("padding-left", buttons.width() + 2); 
  };       
  setInterval(update_padding, 300);

  $(this).prepend(buttons);
  buttons.addClass("tag_buttons");
  buttons.css({ left: input.offset().left + 1,
                top: input.offset().top + 2 });
  input.bind("keyup change paste", function() {
    var i = input.val().indexOf(",");
    if (i >= 0) {
      var new_tag = input.val().substr(0, i);
      input.val(input.val().substr(i+1));
      buttons.append("<div id='button'><span class='value'>"+new_tag+"</span> <span class='close'>(x)</span></div>");
    }
  });

  var form = $(this).closest("form");
  if (form.length > 0) {
    form.submit(function() {
      var v = [];
      form.find(".tag_buttons div").each(function() {
        v.push($(this).find(".value").html());      
      });

      output.val(v.join(","));
      return false;
    });          
  }

}); 
```

HTML如下：

```
<form method="get"> <!-- renders to same page -->
    <div class="row">
        <div class="twelve columns tag_field">
             <input type="text">  
             <input type="hidden" name="tags">
        </div>
    </div>
    <input type="submit" value="Apply Filters"> 
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:10:52.850

根据 Blender 的评论，我最后确实返回了 false，所以提交事件没有触发。

# ios - 在容器视图中均匀分布多个视图

> ID：13075415
> 
> 赞同：286
> 
> 时间：2012-10-25T19:01:35.597
> 
> 标签：ios, rotation, ios6, spacing, autolayout

自动布局使我的生活变得困难。理论上，当我切换时它会非常有用，但我似乎一直在与它作斗争。

我做了一个演示项目来尝试寻求帮助。有谁知道如何在调整视图大小时使视图之间的空间均匀增加或减少？

这是三个标签（手动垂直均匀间隔）：

![图像1](../Images/bb871eac5488b72373b4f63c675d7ff4.png)

我想要的是让他们在我旋转时均匀地调整间距（而不是视图大小）。默认情况下，顶部和底部视图向中心挤压：

![图2](../Images/fb0289e6b4bcb1c3b57982f7f959d6a3.png)

* * *

## 回答 #1

> 赞同：317
> 
> 时间：2014-09-17T19:38:17.517

**看，没有间隔！**

根据我原始答案的评论部分中的建议，尤其是@Rivera 的有用建议，我简化了我的原始答案。

我正在使用 gif 来说明这是多么简单。我希望你觉得这些 GIF 很有帮助。以防万一您对 gif 文件有疑问，我在下面的旧答案中包含了纯屏幕截图。

**指示：**

**1)**添加您的按钮或标签。我正在使用 3 个按钮。

**2）**将每个按钮的中心x约束添加到超级视图：

![在此处输入图像描述](../Images/b70b14b2d4e95a4c3e83bb04c159a8ff.png)

**3）**从每个按钮添加一个约束到底部布局约束：

![在此处输入图像描述](../Images/994f8796e6f34ab4ce3a7bede3c6d307.png)

**4)**调整上面#3中添加的约束如下：

*a)*选择约束， *b)*移除常量（设置为 0）， *c)*更改乘数如下：取按钮数 + 1，从顶部开始，将乘数设置为*buttonCountPlus1:1*，然后是*buttonCountPlus1 :2*，最后是*buttonCountPlus1:3*。（如果您有兴趣，我会在下面的旧答案中解释我从哪里得到这个公式）。

![在此处输入图像描述](../Images/7f63a1ff9f0da76de8dc1982b80376df.png)

**5）**这是一个正在运行的演示！

![在此处输入图像描述](../Images/128625e2bc8873a4bcc448638c564f31.png)

注意：如果您的按钮具有较大的高度，那么您将需要在常量值中对此进行补偿，因为约束来自按钮的底部。

* * *

**旧答案**

* * *

尽管 Apple 的文档和 Erica Sadun 的优秀书籍（*Auto Layout Demystified ）说了什么，但可以在**没有*间隔的情况下均匀地分隔视图。这在 IB 和代码中非常简单，可以用于您希望均匀分布的任意数量的元素。您所需要的只是一个称为“截面公式”的数学公式。做起来比解释要简单。我会尽力在 IB 中演示它，但在代码中也很容易做到。

在有问题的示例中，您将

1）首先将每个标签设置为具有中心约束。这很简单。只需控制从每个标签到底部的拖动。

2) 按住 shift 键，因为您不妨添加我们将要使用的另一个约束，即“底部空间到底部布局指南”。

3）选择“底部空间到底部布局指南”和“在容器中水平居中”。对所有 3 个标签执行此操作。

![按住 shift 为每个标签添加这两个约束](../Images/a932d3a318bd3b1fae7799a3a294dfab.png)

基本上，如果我们取我们希望确定其坐标的标签并将其除以标签总数加 1，那么我们可以将一个数字添加到 IB 以获得动态位置。我正在简化公式，但您可以使用它来设置水平间距或同时设置垂直和水平间距。它超级强大！

这是我们的乘数。

标签1 = 1/4 = .25，

标签2 = 2/4 = .5，

标签3 = 3/4 = .75

（编辑：@Rivera 评论说您可以直接在乘数字段中使用比率，并使用 xCode 进行数学运算！）

4) 所以，让我们选择 Label1 并选择底部约束。像这样： ![在此处输入图像描述](../Images/01649bdc34866e80cfa7c365d444659d.png)

5）在属性检查器中选择“第二项”。

6) 从下拉列表中选择“反转第一项和第二项”。

7) 将常数和 wC hAny 值清零。（如果需要，可以在此处添加偏移量）。

8）这是关键部分：在乘数字段中添加我们的第一个乘数 0.25。

9）当你在它设置顶部的“第一项”为“CenterY”，因为我们想将它居中到标签的 y 中心。这就是所有应该看起来的样子。

![在此处输入图像描述](../Images/f4042c552e7c30d20836f7fb65d4b792.png)

10) 对每个标签重复此过程并插入相关乘数：Label2 为 0.5，Label3 为 0.75。这是所有紧凑型设备的所有方向的最终产品！超级简单。我一直在研究很多涉及大量代码和间隔的解决方案。这是我在这个问题上看到的最好的解决方案。

更新：@kraftydevil 补充说底部布局指南仅出现在故事​​板中，而不出现在 xibs 中。在 xibs 中使用“底部空间到容器”。接得好！

![在此处输入图像描述](../Images/9fd47e4a2776afbe955a1641bde48244.png)

* * *

## 回答 #2

> 赞同：212
> 
> 时间：2013-03-11T19:51:57.970

因此，我的方法允许您在界面生成器中执行此操作。您所做的是创建您已设置为同等匹配高度的“间隔视图”。然后将顶部和底部约束添加到标签（参见屏幕截图）。

![在此处输入图像描述](../Images/e43c34cd1ccfa4b5274dde5ca23cce2f.png)

更具体地说，我对“Spacer View 1”有一个最高约束，它的高度约束低于 1000，并且高度等于所有其他“间隔视图”。“Spacer View 4”对超级视图有底部空间限制。每个标签对其最近的“间隔视图”都有各自的顶部和底部约束。

注意：确保您的标签上没有额外的顶部/​​底部空间限制以进行超级查看；只是“空间视图”的那些。这将是可以满足的，因为顶部和底部约束分别在“Space View 1”和“Spacer View 4”上。

Duh 1：我复制了我的视图，只是将其置于横向模式，以便您可以看到它有效。

Duh 2：“间隔视图”可能是透明的。

Duh 3：这种方法可以横向应用。

* * *

## 回答 #3

> 赞同：100
> 
> 时间：2015-05-15T00:17:33.980

**非常快速的界面生成器解决方案：**

对于在超级视图中均匀分布的任意数量的视图，只需为水平布局给每个“对齐中心 X 到超级视图”约束，或为垂直布局设置“对齐中心 Y 超级视图”，并将乘数设置为`N:p`（*注意：一些有更好的运气`p:N`- 见下文*）

在哪里

`N = total number of views`， 和

`p = position of the view including spaces`

第一个位置是 1，然后是一个空格，使下一个位置为 3，所以 p 变成了一个序列 [1,3,5,7,9,...]。适用于任意数量的视图。

所以，如果你有 3 个视图要留出空间，它看起来像这样：

![如何在 IB 中均匀分布视图的图示](../Images/f0d62a308434a68f5304a10b2ffca93c.png)

**编辑**注意：`N:p`或的选择`p:N`取决于对齐约束的关系顺序。如果“第一项”是 Superview.Center，则可以使用`p:N`，而如果 Superview.Center 是“第二项”，则可以使用`N:p`。如有疑问，请尝试两者... :-)

* * *

## 回答 #4

> 赞同：75
> 
> 时间：2015-11-16T11:00:22.977

从 iOS 9 开始，Apple 使用 (期待已久的) 让这一切变得非常简单[`UIStackView`](https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIStackView_Class_Reference/)。只需选择要包含在 Interface Builder 中的视图，然后选择 Editor -> Embed In -> Stack view。为堆栈视图设置适当的宽度/高度/边距约束，并确保将 Distribution 属性设置为“等间距”：

![](../Images/ed578890fa9e16750004fb281f55e910.png)

当然，如果您需要支持 iOS 8 或更低版本，则必须选择其他选项之一。

* * *

## 回答 #5

> 赞同：51
> 
> 时间：2012-10-25T19:39:31.930

我一直在喜欢自动布局并讨厌它的过山车。爱它的关键似乎是接受以下几点：

1.  界面构建器的编辑和“有用的”约束自动创建对于除了最微不足道的情况外几乎没有用处
2.  创建类别以简化常见操作可以挽救生命，因为代码是如此重复和冗长。

也就是说，您所尝试的并不简单，并且很难在界面构建器中实现。在代码中执行非常简单。这段代码， in `viewDidLoad`，创建和定位三个标签，您如何要求它们：

```
// Create three labels, turning off the default constraints applied to views created in code
UILabel *label1 = [UILabel new];
label1.translatesAutoresizingMaskIntoConstraints = NO;
label1.text = @"Label 1";

UILabel *label2 = [UILabel new];
label2.translatesAutoresizingMaskIntoConstraints = NO;
label2.text = @"Label 2";

UILabel *label3 = [UILabel new];
label3.translatesAutoresizingMaskIntoConstraints = NO;
label3.text = @"Label 3";

// Add them all to the view
[self.view addSubview:label1];
[self.view addSubview:label2];
[self.view addSubview:label3];

// Center them all horizontally
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:label1 attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:1.0 constant:0]];

[self.view addConstraint:[NSLayoutConstraint constraintWithItem:label2 attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:1.0 constant:0]];

[self.view addConstraint:[NSLayoutConstraint constraintWithItem:label3 attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:1.0 constant:0]];

// Center the middle one vertically
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:label2 attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterY multiplier:1.0 constant:0]];

// Position the top one half way up
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:label1 attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:label2 attribute:NSLayoutAttributeCenterY multiplier:0.5 constant:0]];

// Position the bottom one half way down
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:label3 attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:label2 attribute:NSLayoutAttributeCenterY multiplier:1.5 constant:0]]; 
```

正如我所说，这段代码通过 中的几个类别方法得到了极大的简化`UIView`，但为了清楚起见，我在这里做了很长的路要走。

该类别适用于那些感兴趣[的](https://github.com/jrturton/UIView-Autolayout)人，它有一种方法可以沿特定轴均匀分布一组视图。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2016-06-26T22:05:54.857

正确和最简单的方法是使用堆栈视图。

1.  将您的标签/视图添加到**Stack View**：

[![在此处输入图像描述](../Images/7b6bb26fbac12c6353831e369f675a40.png)](https://i.stack.imgur.com/tC2wM.jpg)

2.  选择 Stack View 并将**Distribution**设置为**Equal Spacing**：

[![在此处输入图像描述](../Images/2bce8b47d7de0142fa0ace0d2b7d4670.png)](https://i.stack.imgur.com/78eRY.jpg)

3.  将**Spacing 添加到 Stack View 的最近邻**约束并更新帧：

[![在此处输入图像描述](../Images/953c3cffb115366ecf5c86bcc3a59a8b.png)](https://i.stack.imgur.com/Bvupl.jpg)

4.  为所有标签添加**高度**约束（可选）。仅对于没有固有大小的视图才需要）。例如，标签在这里不需要高度约束，例如只需要设置 numberOfLines = 3 或 0。

[![在此处输入图像描述](../Images/e6c97d469ba7b7bda8dfb19e4f4cdca0.png)](https://i.stack.imgur.com/eqtaU.jpg)

5.  享受预览：

[![在此处输入图像描述](../Images/8258aa8800ca357a85443db63c64200e.png)](https://i.stack.imgur.com/D8eDh.jpg)

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2013-01-28T18:12:28.267

这些解决方案中的大多数都依赖于奇数个项目，以便您可以取中间项目并将其居中。如果您有偶数个项目但仍希望平均分配怎么办？这是一个更通用的解决方案。此类别将沿垂直或水平轴均匀分布任意数量的项目。

在其超级视图中垂直分布 4 个标签的示例用法：

```
[self.view addConstraints:
     [NSLayoutConstraint constraintsForEvenDistributionOfItems:@[label1, label2, label3, label4]
                                        relativeToCenterOfItem:self.view
                                                    vertically:YES]]; 
```

**NSLayoutConstraint+EvenDistribution.h**

```
@interface NSLayoutConstraint (EvenDistribution)

/**
 * Returns constraints that will cause a set of views to be evenly distributed horizontally
 * or vertically relative to the center of another item. This is used to maintain an even
 * distribution of subviews even when the superview is resized.
 */
+ (NSArray *) constraintsForEvenDistributionOfItems:(NSArray *)views
                             relativeToCenterOfItem:(id)toView
                                         vertically:(BOOL)vertically;

@end 
```

**NSLayoutConstraint+EvenDistribution.m**

```
@implementation NSLayoutConstraint (EvenDistribution)

+(NSArray *)constraintsForEvenDistributionOfItems:(NSArray *)views
                           relativeToCenterOfItem:(id)toView vertically:(BOOL)vertically
{
    NSMutableArray *constraints = [NSMutableArray new];
    NSLayoutAttribute attr = vertically ? NSLayoutAttributeCenterY : NSLayoutAttributeCenterX;

    for (NSUInteger i = 0; i < [views count]; i++) {
        id view = views[i];
        CGFloat multiplier = (2*i + 2) / (CGFloat)([views count] + 1);
        NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:view
                                                                      attribute:attr
                                                                      relatedBy:NSLayoutRelationEqual
                                                                         toItem:toView
                                                                      attribute:attr
                                                                     multiplier:multiplier
                                                                       constant:0];
        [constraints addObject:constraint];
    }

    return constraints;
}

@end 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2013-08-19T03:41:44.037

查看开源库[PureLayout](https://github.com/smileyborg/PureLayout)。它提供了一些用于分发视图的 API 方法，包括每个视图之间的间距是固定的（视图大小根据需要而变化）和每个视图的大小是固定的（视图之间的间距根据需要而变化）的变体。请注意，所有这些都是在*不*使用任何“间隔视图”的情况下完成的。

从[NSArray+PureLayout.h](https://github.com/smileyborg/PureLayout/blob/b4d3210c716dcc9ac2d4e9aeb63c478568725a29/PureLayout/PureLayout/NSArray%2BPureLayout.h#L78)：

```
// NSArray+PureLayout.h

// ...

/** Distributes the views in this array equally along the selected axis in their superview. Views will be the same size (variable) in the dimension along the axis and will have spacing (fixed) between them. */
- (NSArray *)autoDistributeViewsAlongAxis:(ALAxis)axis
                                alignedTo:(ALAttribute)alignment
                         withFixedSpacing:(CGFloat)spacing;

/** Distributes the views in this array equally along the selected axis in their superview. Views will be the same size (fixed) in the dimension along the axis and will have spacing (variable) between them. */
- (NSArray *)autoDistributeViewsAlongAxis:(ALAxis)axis
                                alignedTo:(ALAttribute)alignment
                            withFixedSize:(CGFloat)size;

// ... 
```

由于它都是开源的，如果您有兴趣了解如何在没有间隔视图的情况下实现这一点，只需查看实现。（这取决于同时利用`constant` **和** `multiplier`约束。）

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2013-02-01T08:56:52.290

我遇到了类似的问题并发现了这篇文章。但是，当前提供的答案都没有以您想要的方式解决问题。他们不会使间距相等，而是平均分配标签的中心。重要的是要理解这是不一样的。我已经构建了一个小图表来说明这一点。

![查看间距图](../Images/2a75397cde769be5e3e8192c72ada096.png)

有 3 个视图，全部为 20pt 高。使用任何建议的方法均等地分布视图的中心并为您提供图示的布局。请注意，视图的 y 中心是等距的。然而，superview 和 top view 之间的间距是 15pt，而 subview 之间的间距只有 5pt。要使视图等距分布，它们都应为 10pt，即所有蓝色箭头应为 10pt。

尽管如此，我还没有想出一个好的通用解决方案。目前我最好的想法是在子视图之间插入“间距视图”并将间距视图的高度设置为相等。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2014-11-04T21:13:10.093

我能够在 IB 中完全解决这个问题：

1.  进行约束以将每个子视图的中心 Y 与父视图的底部边缘对齐。
2.  将每个约束的乘数设置为 1/2n、3/2n、5/2n、...、n-1/2n，其中 n 是您正在分发的子视图的数量。

因此，如果您有三个标签，请将每个约束的乘数设置为 0.1666667、0.5、0.833333。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-11-02T06:49:14.400

我找到了一个完美而简单的方法。自动布局不允许您平等地调整空间大小，但它允许您平等地调整视图大小。只需在您的字段之间放置一些不可见的视图，并告诉自动布局保持它们相同的大小。它完美地工作！

![初始 XIB](../Images/3f6a846bfa04ab626f46cf61df9483a5.png)

![拉伸 XIB](../Images/c352b2f39d1bf189262069b68ecda033.png)

不过要注意一件事；当我在界面设计器中减小尺寸时，有时它会感到困惑并在原来的位置留下一个标签，如果尺寸更改为奇数，它就会发生冲突。否则它工作得很好。

编辑：我发现冲突成了一个问题。因此，我采用了一个间距约束，将其删除并用两个约束替换它，一个大于或等于和一个小于或等于。两者大小相同，优先级远低于其他约束。结果没有进一步的冲突。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-06-29T21:06:50.817

基于 Ben Dolman 的回答，这可以更均匀地分布视图（使用填充等）：

```
+(NSArray *)constraintsForEvenDistributionOfItems:(NSArray *)views
                           relativeToCenterOfItem:(id)toView vertically:(BOOL)vertically
{
    NSMutableArray *constraints = [NSMutableArray new];
    NSLayoutAttribute attr = vertically ? NSLayoutAttributeCenterY : NSLayoutAttributeCenterX;

    CGFloat min = 0.25;
    CGFloat max = 1.75;
    CGFloat d = (max-min) / ([views count] - 1);
    for (NSUInteger i = 0; i < [views count]; i++) {
        id view = views[i];
        CGFloat multiplier = i * d + min;
        NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:view
                                                                      attribute:attr
                                                                      relatedBy:NSLayoutRelationEqual
                                                                         toItem:toView
                                                                      attribute:attr
                                                                     multiplier:multiplier
                                                                       constant:0];
        [constraints addObject:constraint];
    }

    return constraints;
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-01-02T04:38:19.027

检查[https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/AutoLayoutbyExample/AutoLayoutbyExample.html](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/AutoLayoutbyExample/AutoLayoutbyExample.html)对解决您的问题有很好的描述。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2015-03-19T12:12:34.200

使用标签至少可以正常工作：

`@"H:|-15-[first(==second)]-[second(==third)]-[third(==first)]-15-|`

如果第一个与第二个具有相同的宽度，第二个与第三个具有相同的宽度，第三个与第一个具有相同的宽度，那么它们都将具有相同的宽度……您可以水平（H）和垂直（V）。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-10-24T06:39:17.327

迅捷3版

```
let _redView = UIView()
        _redView.backgroundColor = UIColor.red
        _redView.translatesAutoresizingMaskIntoConstraints = false

        let _yellowView = UIView()
        _yellowView.backgroundColor = UIColor.yellow
        _yellowView.translatesAutoresizingMaskIntoConstraints = false

        let _blueView = UIView()
        _blueView.backgroundColor = UIColor.blue
        _blueView.translatesAutoresizingMaskIntoConstraints = false

        self.view.addSubview(_redView)
        self.view.addSubview(_yellowView)
        self.view.addSubview(_blueView)

        var views = ["_redView": _redView, "_yellowView": _yellowView, "_blueView":_blueView]

        var nslayoutConstraint_H = NSLayoutConstraint.constraints(withVisualFormat: "|->=0-[_redView(40)]->=0-[_yellowView(40)]->=0-[_blueView(40)]->=0-|", options: [.alignAllTop, .alignAllBottom], metrics: nil, views: views)
        self.view.addConstraints(nslayoutConstraint_H)

        var nslayoutConstraint_V = NSLayoutConstraint.constraints(withVisualFormat: "V:[_redView(60)]", options: NSLayoutFormatOptions.init(rawValue: 0), metrics: nil, views: views)
        self.view.addConstraints(nslayoutConstraint_V)

        let constraint_red = NSLayoutConstraint.init(item: self.view, attribute: .centerY, relatedBy: .equal, toItem: _redView, attribute: .centerY, multiplier: 1, constant: 0)
        self.view.addConstraint(constraint_red)

        let constraint_yellow = NSLayoutConstraint.init(item: self.view, attribute: .centerX, relatedBy: .equal, toItem: _yellowView, attribute: .centerX, multiplier: 1, constant: 0)
        self.view.addConstraint(constraint_yellow)

        let constraint_yellow1 = NSLayoutConstraint.init(item: _redView, attribute: .centerX, relatedBy: .equal, toItem: _yellowView, attribute: .leading, multiplier: 0.5, constant: 0)
        self.view.addConstraint(constraint_yellow1)

        let constraint_yellow2 = NSLayoutConstraint.init(item: _blueView, attribute: .centerX, relatedBy: .equal, toItem: _yellowView, attribute: .leading, multiplier: 1.5, constant: 40)
        self.view.addConstraint(constraint_yellow2) 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-01-21T19:53:59.823

我知道距离第一个答案已经有一段时间了，但我刚刚遇到了同样的问题，我想分享我的解决方案。为子孙后代...

我在 viewDidLoad 上设置了我的观点：

```
- (void)viewDidLoad {

    [super viewDidLoad];

    cancelButton = [UIButton buttonWithType: UIButtonTypeRoundedRect];
    cancelButton.translatesAutoresizingMaskIntoConstraints = NO;
    [cancelButton setTitle:@"Cancel" forState:UIControlStateNormal];
    [self.view addSubview:cancelButton];

    middleButton = [UIButton buttonWithType: UIButtonTypeRoundedRect];
    middleButton.translatesAutoresizingMaskIntoConstraints = NO;
    [middleButton setTitle:@"Middle" forState:UIControlStateNormal];
    [self.view addSubview:middleButton];

    nextButton = [UIButton buttonWithType: UIButtonTypeRoundedRect];
    nextButton.translatesAutoresizingMaskIntoConstraints = NO;
    [nextButton setTitle:@"Next" forState:UIControlStateNormal];
    [self.view addSubview:nextButton];

    [self.view setNeedsUpdateConstraints];

} 
```

然后，在 updateViewConstrains 上，首先删除所有约束，然后创建视图字典，然后计算要在视图之间使用的空间。之后，我只使用 Visual Language Format 来设置约束：

```
- (void)updateViewConstraints {

    [super updateViewConstraints];

    [self.view removeConstraints:self.view.constraints];

    NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(cancelButton, nextButton, middleButton);

    float distance=(self.view.bounds.size.width-cancelButton.intrinsicContentSize.width-nextButton.intrinsicContentSize.width-middleButton.intrinsicContentSize.width-20-20)/  ([viewsDictionary count]-1);  // 2 times 20 counts for the left & rigth margins
    NSNumber *distancies=[NSNumber numberWithFloat:distance];

//    NSLog(@"Distancies: %@", distancies);
//    
//    NSLog(@"View Width: %f", self.view.bounds.size.width);
//    NSLog(@"Cancel Width: %f", cancelButton.intrinsicContentSize.width);
//    NSLog(@"Middle Width: %f", middleButton.intrinsicContentSize.width);
//    NSLog(@"Next Width: %f", nextButton.intrinsicContentSize.width);

    NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|-[cancelButton]-dis-[middleButton]-dis-[nextButton]-|"
                                                                   options:NSLayoutFormatAlignAllBaseline
                                                                   metrics:@{@"dis":distancies}
                                                                     views:viewsDictionary];

    [self.view addConstraints:constraints];

    constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:[nextButton]-|"
                                                          options:0
                                                          metrics:nil
                                                            views:viewsDictionary];
    [self.view addConstraints:constraints];

} 
```

这种方法的好处是你只需要做很少的数学运算。我并不是说这是完美的解决方案，但我为我试图实现的布局工作。

我希望它有所帮助。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2013-06-18T18:13:46.820

这是一个将任意数量的子视图垂直居中的解决方案，即使它们具有唯一的大小。您要做的是制作一个中级容器，将其置于超级视图的中心，然后将所有子视图放入容器中并相互排列。但至关重要的是，您还需要将它们限制在容器的顶部*和*底部，以便容器可以正确调整大小并在超级视图中居中。通过从其子视图中计算出正确的高度，容器可以垂直居中。

在此示例中，`self`是您将所有子视图居中的超级视图。

```
NSArray *subviews = @[ (your subviews in top-to-bottom order) ];

UIView *container = [[UIView alloc] initWithFrame:CGRectZero];
container.translatesAutoresizingMaskIntoConstraints = NO;
for (UIView *subview in subviews) {
    subview.translatesAutoresizingMaskIntoConstraints = NO;
    [container addSubview:subview];
}
[self addSubview:container];

[self addConstraint:[NSLayoutConstraint constraintWithItem:container attribute:NSLayoutAttributeLeft relatedBy:NSLayoutRelationEqual
                                                    toItem:self attribute:NSLayoutAttributeLeft multiplier:1.0f constant:0.0f]];
[self addConstraint:[NSLayoutConstraint constraintWithItem:container attribute:NSLayoutAttributeRight relatedBy:NSLayoutRelationEqual
                                                    toItem:self attribute:NSLayoutAttributeRight multiplier:1.0f constant:0.0f]];
[self addConstraint:[NSLayoutConstraint constraintWithItem:container attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual
                                                    toItem:self attribute:NSLayoutAttributeCenterY multiplier:1.0f constant:0.0f]];

if (0 < subviews.count) {
    UIView *firstSubview = subviews[0];
    [container addConstraint:[NSLayoutConstraint constraintWithItem:firstSubview attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual
                                                             toItem:container attribute:NSLayoutAttributeTop multiplier:1.0f constant:0.0f]];
    UIView *lastSubview = subviews.lastObject;
    [container addConstraint:[NSLayoutConstraint constraintWithItem:lastSubview attribute:NSLayoutAttributeBottom relatedBy:NSLayoutRelationEqual
                                                             toItem:container attribute:NSLayoutAttributeBottom multiplier:1.0f constant:0.0f]];

    UIView *subviewAbove = nil;
    for (UIView *subview in subviews) {
        [container addConstraint:[NSLayoutConstraint constraintWithItem:subview attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual
                                                                 toItem:container attribute:NSLayoutAttributeCenterX multiplier:1.0f constant:0.0f]];
        if (subviewAbove) {
            [container addConstraint:[NSLayoutConstraint constraintWithItem:subview attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual
                                                                     toItem:subviewAbove attribute:NSLayoutAttributeBottom multiplier:1.0f constant:10.0f]];
        }
        subviewAbove = subview;
    }
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2015-07-03T04:30:45.683

我刚刚使用乘数功能解决了我的问题。我不确定它是否适用于所有情况，但对我来说效果很好。我在 Xcode 6.3 仅供参考。

我最终做的是：

1) 首先将我的按钮放置在 320px 宽度的屏幕上，按照我希望它在 320px 设备上的显示方式分布。

![第 1 步：定位按钮](../Images/90b7cc3a8a6e6d54d0251392cecb699a.png)

2）然后我在所有按钮的超级视图中添加了一个领先的空间约束。

![第 2 步：添加前导空间约束](../Images/3b1d8905fcdd787c5dbb2e4de22327be.png)

3）然后我修改了前导空格的属性，使常数为0，乘数是x偏移除以屏幕宽度（例如，我的第一个按钮距离左边缘8px，所以我将乘数设置为8/320）

4）那么这里重要的一步就是将约束关系中的第二个Item改为superview.Trailing而不是superview.leading。这是关键，因为 superview.Leading 为 0，在我的情况下为 320，因此 8/320 在 320px 设备上为 8 px，然后当 superview 的宽度更改为 640 或其他任何值时，视图都以相对于宽度的比例移动320px 的屏幕尺寸。这里的数学更容易理解。

![第 3 步和第 4 步：将乘数更改为 xPos/screenWidth 并将第二项设置为 .Trailing](../Images/b74a313b1d40040f94f845e8308a18ae.png)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2015-07-16T09:31:55.597

许多答案不正确，但得到很多计数。这里我只是以编程方式写了一个解决方案，三个视图是水平对齐的，**没有使用间隔视图**，但它**只有在故事板中使用时知道标签的宽度时才有效**。

```
NSDictionary *views = NSDictionaryOfVariableBindings(_redView, _yellowView, _blueView);

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|->=0-[_redView(40)]->=0-[_yellowView(40)]->=0-[_blueView(40)]->=0-|" options:NSLayoutFormatAlignAllTop | NSLayoutFormatAlignAllBottom metrics:nil views:views]];

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[_redView(60)]" options:0 metrics:nil views:views]];
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:_redView attribute:NSLayoutAttributeCenterY multiplier:1 constant:0]];

[self.view addConstraint:[NSLayoutConstraint constraintWithItem:self.view attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:_yellowView attribute:NSLayoutAttributeCenterX multiplier:1 constant:0]];
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:_redView attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:_yellowView attribute:NSLayoutAttributeLeading multiplier:0.5 constant:0]];
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:_blueView attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:_yellowView attribute:NSLayoutAttributeLeading multiplier:1.5 constant:40]]; 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-04-19T17:37:15.067

这是另一个答案。我正在回答一个类似的问题，并看到引用此问题的链接。我没有看到任何类似于我的答案。所以，我想把它写在这里。

```
 class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        view.backgroundColor = UIColor.whiteColor()
        setupViews()
    }

    var constraints: [NSLayoutConstraint] = []

    func setupViews() {

        let container1 = createButtonContainer(withButtonTitle: "Button 1")
        let container2 = createButtonContainer(withButtonTitle: "Button 2")
        let container3 = createButtonContainer(withButtonTitle: "Button 3")
        let container4 = createButtonContainer(withButtonTitle: "Button 4")

        view.addSubview(container1)
        view.addSubview(container2)
        view.addSubview(container3)
        view.addSubview(container4)

        [

            // left right alignment
            container1.leftAnchor.constraintEqualToAnchor(view.leftAnchor, constant: 20),
            container1.rightAnchor.constraintEqualToAnchor(view.rightAnchor, constant: -20),
            container2.leftAnchor.constraintEqualToAnchor(container1.leftAnchor),
            container2.rightAnchor.constraintEqualToAnchor(container1.rightAnchor),
            container3.leftAnchor.constraintEqualToAnchor(container1.leftAnchor),
            container3.rightAnchor.constraintEqualToAnchor(container1.rightAnchor),
            container4.leftAnchor.constraintEqualToAnchor(container1.leftAnchor),
            container4.rightAnchor.constraintEqualToAnchor(container1.rightAnchor),

            // place containers one after another vertically
            container1.topAnchor.constraintEqualToAnchor(view.topAnchor),
            container2.topAnchor.constraintEqualToAnchor(container1.bottomAnchor),
            container3.topAnchor.constraintEqualToAnchor(container2.bottomAnchor),
            container4.topAnchor.constraintEqualToAnchor(container3.bottomAnchor),
            container4.bottomAnchor.constraintEqualToAnchor(view.bottomAnchor),

            // container height constraints
            container2.heightAnchor.constraintEqualToAnchor(container1.heightAnchor),
            container3.heightAnchor.constraintEqualToAnchor(container1.heightAnchor),
            container4.heightAnchor.constraintEqualToAnchor(container1.heightAnchor)
            ]
            .forEach { $0.active = true }
    }

    func createButtonContainer(withButtonTitle title: String) -> UIView {
        let view = UIView(frame: .zero)
        view.translatesAutoresizingMaskIntoConstraints = false

        let button = UIButton(type: .System)
        button.translatesAutoresizingMaskIntoConstraints = false
        button.setTitle(title, forState: .Normal)
        view.addSubview(button)

        [button.centerYAnchor.constraintEqualToAnchor(view.centerYAnchor),
            button.leftAnchor.constraintEqualToAnchor(view.leftAnchor),
            button.rightAnchor.constraintEqualToAnchor(view.rightAnchor)].forEach { $0.active = true }

        return view
    }
} 
```

[![在此处输入图像描述](../Images/bcdfbd1a967ccb0a7f137ffd9bfc1a29.png)](https://i.stack.imgur.com/lpbA9.png)

同样，这也可以通过 iOS9 UIStackViews 轻松完成。

```
class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        view.backgroundColor = UIColor.greenColor()
        setupViews()
    }

    var constraints: [NSLayoutConstraint] = []

    func setupViews() {

        let container1 = createButtonContainer(withButtonTitle: "Button 1")
        let container2 = createButtonContainer(withButtonTitle: "Button 2")
        let container3 = createButtonContainer(withButtonTitle: "Button 3")
        let container4 = createButtonContainer(withButtonTitle: "Button 4")

        let stackView = UIStackView(arrangedSubviews: [container1, container2, container3, container4])
        stackView.translatesAutoresizingMaskIntoConstraints = false
        stackView.axis = .Vertical
        stackView.distribution = .FillEqually
        view.addSubview(stackView)

        [stackView.topAnchor.constraintEqualToAnchor(view.topAnchor),
            stackView.bottomAnchor.constraintEqualToAnchor(view.bottomAnchor),
            stackView.leftAnchor.constraintEqualToAnchor(view.leftAnchor, constant: 20),
            stackView.rightAnchor.constraintEqualToAnchor(view.rightAnchor, constant: -20)].forEach { $0.active = true }
    }

    func createButtonContainer(withButtonTitle title: String) -> UIView {
        let button = UIButton(type: .Custom)
        button.translatesAutoresizingMaskIntoConstraints = false
        button.backgroundColor = UIColor.redColor()
        button.setTitleColor(UIColor.whiteColor(), forState: .Normal)
        button.setTitle(title, forState: .Normal)
        let buttonContainer = UIStackView(arrangedSubviews: [button])
        buttonContainer.distribution = .EqualCentering
        buttonContainer.alignment = .Center
        buttonContainer.translatesAutoresizingMaskIntoConstraints = false
        return buttonContainer
    }
} 
```

请注意，它与上述方法完全相同。它添加了四个容器视图，它们被平均填充，并且一个视图被添加到每个中心对齐的堆栈视图中。但是，这个版本的 UIStackView 减少了一些代码并且看起来不错。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2012-11-05T22:11:13.267

另一种方法可能是让顶部和底部标签分别具有相对于视图顶部和底部的约束，并且让中间视图分别具有相对于第一和第三视图的顶部和底部约束。

请注意，您对约束的控制比通过将视图彼此靠近拖动直到出现引导虚线时看起来有更多的控制 - 这些表示将形成的两个对象之间的约束，而不是对象和父视图之间的约束。

在这种情况下，您可能希望将约束更改为“大于或等于”所需值，而不是“等于”以允许它们调整大小。不确定这是否会完全符合您的要求。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2013-01-24T17:35:37.900

在 InterfaceBuilder 中解决这个问题的非常简单的方法：

将居中标签（label2）设置为“Horizo​​ntal Center in Container”和“Vertical Center in Container”

选择居中标签和顶部标签 (label1 + label2) 并为垂直间距添加**两个**约束。**一个****大于或等于**最小间距。**一个****小于或等于**最大间距。

居中标签和底部标签 (label2 + label3) 相同。

此外，您还可以向 label1 添加两个约束 - 到 SuperView 的顶部空间和到 label2 的两个约束 - 到 SuperView 的底部空间。

结果将是所有 4 个间距都将同样地改变它们的大小。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-03-18T09:00:47.067

我做了一个可能有帮助的功能。此用法示例：

```
 [self.view addConstraints: [NSLayoutConstraint fluidConstraintWithItems:NSDictionaryOfVariableBindings(button1, button2, button3)
                                                                asString:@[@"button1", @"button2", @"button3"]
                                                               alignAxis:@"V"
                                                          verticalMargin:100
                                                        horizontalMargin:50
                                                             innerMargin:25]]; 
```

将导致[垂直分布](http://i.stack.imgur.com/DohpQ.png)（抱歉没有 10 名嵌入图像）。如果您更改轴和一些边距值：

```
alignAxis:@"H"
verticalMargin:120
horizontalMargin:20
innerMargin:10 
```

你会得到那个[水平分布](http://i.stack.imgur.com/fKX6m.png)。

我是 iOS 的新手，但瞧！

**均匀分布.h**

```
@interface NSLayoutConstraint (EvenDistribution)

/**
 * Returns constraints that will cause a set of subviews
 * to be evenly distributed along an axis.
 */
+ (NSArray *)  fluidConstraintWithItems:(NSDictionary *) views
                               asString:(NSArray *) stringViews
                              alignAxis:(NSString *) axis
                         verticalMargin:(NSUInteger) vMargin
                       horizontalMargin:(NSUInteger) hMargin
                            innerMargin:(NSUInteger) inner;
@end 
```

**均匀分布.m**

```
#import "EvenDistribution.h"

@implementation NSLayoutConstraint (EvenDistribution)

+ (NSArray *) fluidConstraintWithItems:(NSDictionary *) dictViews
                              asString:(NSArray *) stringViews
                             alignAxis:(NSString *) axis
                        verticalMargin:(NSUInteger) vMargin
                      horizontalMargin:(NSUInteger) hMargin
                           innerMargin:(NSUInteger) iMargin

{
    NSMutableArray *constraints = [NSMutableArray arrayWithCapacity: dictViews.count];
    NSMutableString *globalFormat = [NSMutableString stringWithFormat:@"%@:|-%d-",
                                     axis,
                                     [axis isEqualToString:@"V"] ? vMargin : hMargin
                                     ];

        for (NSUInteger i = 0; i < dictViews.count; i++) {

            if (i == 0)
                [globalFormat appendString:[NSString stringWithFormat: @"[%@]-%d-", stringViews[i], iMargin]];
            else if(i == dictViews.count - 1)
                [globalFormat appendString:[NSString stringWithFormat: @"[%@(==%@)]-", stringViews[i], stringViews[i-1]]];
            else
               [globalFormat appendString:[NSString stringWithFormat: @"[%@(==%@)]-%d-", stringViews[i], stringViews[i-1], iMargin]];

            NSString *localFormat = [NSString stringWithFormat: @"%@:|-%d-[%@]-%d-|",
                                     [axis isEqualToString:@"V"] ? @"H" : @"V",
                                     [axis isEqualToString:@"V"] ? hMargin : vMargin,
                                     stringViews[i],
                                     [axis isEqualToString:@"V"] ? hMargin : vMargin];

            [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:localFormat
                                                                                     options:0
                                                                                     metrics:nil
                                                                                       views:dictViews]];

    }
    [globalFormat appendString:[NSString stringWithFormat:@"%d-|",
                                [axis isEqualToString:@"V"] ? vMargin : hMargin
                                ]];

    [constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:globalFormat
                                                                             options:0
                                                                             metrics:nil
                                                                               views:dictViews]];

    return constraints;

}

@end 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2013-04-17T15:30:43.620

是的，您可以仅在界面生成器中执行此操作而无需编写代码 - 需要注意的是您正在调整标签大小而不是分配空白。在这种情况下，将标签 2 的 X 和 Y 与超级视图对齐，使其固定在中心。然后将标签 1 的垂直空间设置为超级视图并将标签 2 设置为标准，对标签 3 重复此操作。设置标签 2 后，设置标签 1 和 3 的最简单方法是调整它们的大小，直到它们对齐。

这是水平显示，注意标签1和2之间的垂直空间设置为标准：![水平显示](../Images/0c825b1063c844a8e91b61354f74f439.png)

这是纵向版本：![在此处输入图像描述](../Images/c8bf4479576a4c17dceecf32f043e9bd.png)

我意识到由于标签之间的标准空间和超级视图之间的标准空间之间的差异，它们在基线之间并不是绝对 100% 等间距的。如果这让您感到困扰，请将大小设置为 0 而不是标准

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-06-07T21:18:36.520

我只为第一项设置宽度值（>= 宽度）和每个项目之间的最小距离（>= 距离）。然后我使用 Ctrl 将第二个、第三个...项目拖到第一个项目上，以链接项目之间的依赖关系。

![在此处输入图像描述](../Images/83ab8e4446c1d9071e6bc1320d4d615f.png)

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-04-13T11:50:03.730

聚会迟到了，但我有一个可行的解决方案，可以用间距水平创建菜单。`==`在 NSLayoutConstraint 中使用它可以很容易地完成

```
const float MENU_HEIGHT = 40;

- (UIView*) createMenuWithLabels: (NSArray *) labels
    // labels is NSArray of NSString
    UIView * backgroundView = [[UIView alloc]init];
    backgroundView.translatesAutoresizingMaskIntoConstraints = false;

    NSMutableDictionary * views = [[NSMutableDictionary alloc] init];
    NSMutableString * format = [[NSMutableString alloc] initWithString: @"H:|"];
    NSString * firstLabelKey;

    for(NSString * str in labels)
    {
        UILabel * label = [[UILabel alloc] init];
        label.translatesAutoresizingMaskIntoConstraints = false;
        label.text = str;
        label.textAlignment = NSTextAlignmentCenter;
        label.textColor = [UIColor whiteColor];
        [backgroundView addSubview: label];
        [label fixHeightToTopBounds: MENU_HEIGHT-2];
        [backgroundView addConstraints: [label fixHeightToTopBounds: MENU_HEIGHT]];
        NSString * key = [self camelCaseFromString: str];
        [views setObject: label forKey: key];
        if(firstLabelKey == nil)
        {
            [format appendString: [NSString stringWithFormat: @"[%@]", key]];
            firstLabelKey = key;
        }
        else
        {
            [format appendString: [NSString stringWithFormat: @"[%@(==%@)]", key, firstLabelKey]];
        }
    }

    [format appendString: @"|"];

    NSArray * constraints = [NSLayoutConstraint constraintsWithVisualFormat: (NSString *) format
                                                                               options: 0
                                                                               metrics: nil
                                                                                 views: (NSDictionary *) views];
    [backgroundView addConstraints: constraints];
    return backgroundView;
} 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-04-11T07:52:07.917

我想水平对齐 5 张图像，所以我最终遵循了 Mete 的[响应](https://stackoverflow.com/a/30249550/4196117)，但差别很小。

第一个图像将在容器中水平居中，等于 0 和 1:5 的乘数：

[![第一张图片](../Images/20531590f64733a9912807383a105aa8.png)](https://i.stack.imgur.com/A3Xvo.png)

第二个图像将在容器中水平居中，等于 0，乘数为 3:5： [![第二张图片](../Images/f0df55693918673d22f8139fcd5ed971.png)](https://i.stack.imgur.com/5Uhna.png)

其余的图像也是如此。例如，第五个（也是最后一个）图像将在容器中水平居中，等于 0 和 9:5 的乘数： [![最后一张图片](../Images/287e622e3012910728f87395601940d8.png)](https://i.stack.imgur.com/x2Roo.png)

正如 Mete 解释的那样，顺序是 1、3、5、7、9 等。位置遵循相同的逻辑：第一个位置是 1，然后是空格，然后是下一个位置 3，依此类推。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-07-15T13:45:41.973

Android 有一种在我想模仿的基于约束的布局系统中将视图链接在一起的方法。搜索把我带到了这里，但没有一个答案很有效。我不想使用 StackViews，因为它们往往会给我带来更多的悲伤，而不是它们预先保存的内容。我最终创建了一个使用放置在视图之间的 UILayoutGuides 的解决方案。控制它们的宽度允许不同类型的分布，Android 用语中的链样式。该函数接受前导和尾随锚而不是父视图。这允许将链放置在两个任意视图之间，而不是分布在父视图内部。它确实使用`UILayoutGuide`了仅在 iOS 9+ 中可用的功能，但这不再是问题。

```
public enum LayoutConstraintChainStyle {
    case spread //Evenly distribute between the anchors
    case spreadInside //Pin the first & last views to the sides and then evenly distribute
    case packed //The views have a set space but are centered between the anchors.
}

public extension NSLayoutConstraint {

    static func chainHorizontally(views: [UIView],
                                  leadingAnchor: NSLayoutXAxisAnchor,
                                  trailingAnchor: NSLayoutXAxisAnchor,
                                  spacing: CGFloat = 0.0,
                                  style: LayoutConstraintChainStyle = .spread) -> [NSLayoutConstraint] {
    var constraints = [NSLayoutConstraint]()
    guard views.count > 1 else { return constraints }
    guard let first = views.first, let last = views.last, let superview = first.superview else { return constraints }

    //Setup the chain of views
    var distributionGuides = [UILayoutGuide]()
    var previous = first
    let firstGuide = UILayoutGuide()
    superview.addLayoutGuide(firstGuide)
    distributionGuides.append(firstGuide)
    firstGuide.identifier = "ChainDistribution\(distributionGuides.count)"
    constraints.append(firstGuide.leadingAnchor.constraint(equalTo: leadingAnchor))
    constraints.append(first.leadingAnchor.constraint(equalTo: firstGuide.trailingAnchor, constant: spacing))
    views.dropFirst().forEach { view in
        let g = UILayoutGuide()
        superview.addLayoutGuide(g)
        distributionGuides.append(g)
        g.identifier = "ChainDistribution\(distributionGuides.count)"
        constraints.append(contentsOf: [
            g.leadingAnchor.constraint(equalTo: previous.trailingAnchor),
            view.leadingAnchor.constraint(equalTo: g.trailingAnchor)
        ])
        previous = view
    }
    let lastGuide = UILayoutGuide()
    superview.addLayoutGuide(lastGuide)
    constraints.append(contentsOf: [lastGuide.leadingAnchor.constraint(equalTo: last.trailingAnchor),
                                    lastGuide.trailingAnchor.constraint(equalTo: trailingAnchor)])
    distributionGuides.append(lastGuide)

    //Space the according to the style.
    switch style {
    case .packed:
        if let first = distributionGuides.first, let last = distributionGuides.last {
            constraints.append(first.widthAnchor.constraint(greaterThanOrEqualToConstant: spacing))
            constraints.append(last.widthAnchor.constraint(greaterThanOrEqualToConstant: spacing))
            constraints.append(last.widthAnchor.constraint(equalTo: first.widthAnchor))
            constraints.append(contentsOf:
                distributionGuides.dropFirst().dropLast()
                    .map { $0.widthAnchor.constraint(equalToConstant: spacing) }
                )
        }
    case .spread:
        if let first = distributionGuides.first {
            constraints.append(contentsOf:
                distributionGuides.dropFirst().map { $0.widthAnchor.constraint(equalTo: first.widthAnchor) })
        }
    case .spreadInside:
        if let first = distributionGuides.first, let last = distributionGuides.last {
            constraints.append(first.widthAnchor.constraint(equalToConstant: spacing))
            constraints.append(last.widthAnchor.constraint(equalToConstant: spacing))
            let innerGuides = distributionGuides.dropFirst().dropLast()
            if let key = innerGuides.first {
                constraints.append(contentsOf:
                    innerGuides.dropFirst().map { $0.widthAnchor.constraint(equalTo: key.widthAnchor) }
                )
            }
        }
    }

    return constraints
} 
```

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2017-05-05T18:37:08.717

您可以只创建一个 tableView 并制作`isScrollEnabled = false`.

# java - java JFrame图形

> ID：13075417
> 
> 赞同：2
> 
> 时间：2012-10-25T19:01:40.607
> 
> 标签：java, swing, graphics, jframe, paint

我在 JFrame 构造函数中有以下简单代码

```
 super(name);
    setBounds(0,0,1100,750);
    setLayout(null);

    setVisible(true);

    g = this.getGraphics();
    int[] x =new int[]{65,  122,  77,  20, };
    int[] y =new int[]{226,  258, 341,  310};
    g.setColor(Color.RED);  
    g.drawPolygon (x, y, x.length);
    System.out.println(g); 
```

我在控制台上得到输出：

> sun.java2d.SunGraphics2D[font=java.awt.Font[family=Dialog,name=Dialog,style=plain,size=12],color=java.awt.Color[r=255,g=0,b=0 ]]

但是在 JFrame 上没有绘制红色多边形，而只是空白的 JFrame。

为什么 ？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T19:13:32.190

*   `paint(..)`不要覆盖`JFrame`

*   而是添加*自定义* `JPanel`覆盖`paintComponent(Graphics g)`到`JFrame`

*   不要使用`Null`/`AbsoluteLayout` [使用适当的`LayoutManager`](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

*   不要调用实例（不是`setBounds(..)`它`JFrame`不允许但看不到它与此应用程序相关）

*   不要忘记使用[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)来创建和更改 GUI 组件：

    ```
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
                @Override
               public void run() {
                    Test test = new Test();
               }
    }); 
    ```

然后你会做这样的事情：

```
public class Test {

    /**
     * Default constructor for Test.class
     */
    public Test() {
        initComponents();
    }

    public static void main(String[] args) {

        /**
         * Create GUI and components on Event-Dispatch-Thread
         */
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Test test = new Test();
            }
        });
    }

    /**
     * Initialize GUI and components (including ActionListeners etc)
     */
    private void initComponents() {
        JFrame jFrame = new JFrame();
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        jFrame.add(new MyPanel());

        //pack frame (size JFrame to match preferred sizes of added components and set visible
        jFrame.pack();
        jFrame.setVisible(true);
    }
}

class MyPanel extends JPanel {

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        int[] x = new int[]{65, 122, 77, 20};
        int[] y = new int[]{226, 258, 341, 310};
        g.setColor(Color.RED);
        g.drawPolygon(x, y, x.length);
    }

    //so our panel is the corerct size when pack() is called on Jframe
    @Override
    public Dimension getPreferredSize() {
        return new Dimension(400, 400);
    }
} 
```

产生：

![在此处输入图像描述](../Images/0807898f481bb83e81e1677ca7290e4a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:04:12.460

您应该更好地覆盖`paint(Graphics g)`或`paintComponent(Graphics g)`比您正在尝试的方法。在代码中添加下面的行并删除后面的行`setVisible`。

```
public void paint(Graphics g) {
  int[] x =new int[]{65,  122,  77,  20};
  int[] y =new int[]{226,  258, 341,  310};
  g.setColor(Color.RED);  
  g.drawPolygon (x, y, x.length);
} 
```

# iphone - 带有 UIPageControl 的 GMGridView

> ID：13075418
> 
> 赞同：4
> 
> 时间：2012-10-25T19:01:45.317
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在做一个项目并研究使用此处找到的 GMGridView：[https](https://github.com/gmoledina/GMGridView) ://github.com/gmoledina/GMGridView 。

有没有人使用它并添加了一个 UIPageControl？如果是这样，怎么办？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:11:52.417

您需要进行以下更改：-

```
 1.)In Demo1ViewController.h  do
    @interface Demo1ViewController : UIViewController
    {
        UIPageControl *pageCont;
    }
    @end

2.)In Demo1ViewController.m  do

In load view method write:-

      pageCont=[[UIPageControl alloc]init];
        pageCont.numberOfPages=10// set this according to your total pages
        pageCont.backgroundColor=[UIColor blueColor];
        [pageCont addTarget:self action:@selector(pagechanged:) forControlEvents:UIControlEventValueChanged];
        pageCont.frame=CGRectMake(0, 0, 320, 30);// set frame as your requirements
        [self.view addSubview:pageCont]; 
        _gmGridView.delegate=self;

    and add these two methods

    -(IBAction)pagechanged:(id)sender
    {
// add code according  to your requirements if needed

    }

    - (void)scrollViewDidScroll:(UIScrollView *)scrollView {
        CGFloat pageWidth = _gmGridView.frame.size.width; 
        float fractionalPage = _gmGridView.contentOffset.x / pageWidth;
        NSInteger page = lround(fractionalPage);
        pageCont.currentPage = page; 
    } 
```

这适用于 gmgrid 视图的水平布局，如果需要，您可以更改 didscroll 方法的逻辑以进行垂直滚动。它可能会帮助你。快乐编码！

# c++ - 如何列出 XCOFF TOC 条目

> ID：13075423
> 
> 赞同：1
> 
> 时间：2012-10-25T19:02:12.430
> 
> 标签：c++, c, xlc

是否有任何工具可以让我在 XCOFF 文件中列出 TOC 条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:20:31.857

我还没有找到可以做到这一点的工具，但我想记录下我的经验，以防万一它对其他人有所帮助。

在我的特殊情况下，我需要的是一种了解我自己的代码生成了哪些 TOC 条目的方法。我的第一种方法是寻找一种工具，该工具可以列出从我的源代码编译的目标文件中的 TOC 条目。由于未能做到这一点，我不得不寻找另一种方法。

`-S`通过使用XLC 命令行上的选项，我设法获得了我正在寻找的信息。`.s`然后，我可以通过检查文件`.toc`和`.tc`伪操作来获取有关 TOC 条目的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:05:44.067

不确定这是否有帮助。

[http://www.regatta.cs.msu.su/doc/usr/share/man/info/ru_RU/a_doc_lib/cmds/aixcmds2/dump.htm](http://www.regatta.cs.msu.su/doc/usr/share/man/info/ru_RU/a_doc_lib/cmds/aixcmds2/dump.htm)

但是制作一个小工具来做到这一点应该不会太难。

# java - 用于查找格式化为 $VAR 或 ${VAR} 的 Unix 环境变量的 Java RegEx 模式

> ID：13075425
> 
> 赞同：0
> 
> 时间：2012-10-25T19:02:22.460
> 
> 标签：java, regex

这适用于 ${VAR}：

```
Pattern.compile("\\$\\{(.+?)\\}"); 
```

但我正在努力格式化它，以便它也接受 $VAR 到下一个单词边界（\b）。因为文字可以

```
$FIRSTVAR.${SECONDVAR}LITERAL 
```

然后我想同时检测 $FIRSTVAR 和 ${SECONDVAR} ，如果第一个是“X”，第二个是“Y”，我想将它替换为**X.YLITERAL**。该模板同时使用 $VAR 和 ${VAR} 样式，如果 var 后跟一个非单词字符，则更喜欢前者，但如果是后者，则使用后者（就像我上面给出的示例一样）。

我试过

```
Pattern.compile("\\$(\\{|)(.+?)(\\}|\b})"); 
```

但这与**FIRSTVAR.${SECONDVAR**作为 group(2) 匹配。所以不好。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:15:07.870

我会写：

```
Pattern.compile("\\$(?:(\\w+)|\\{(\\w+)\\})") 
```

自然地，这意味着其中*一个* `matcher.group(1)` *或* `matcher.group(2)`将是变量名——另一个将是`null`——所以你必须同时检查两者。

另一个不太可靠的选择是编写：

```
Pattern.compile("\\$\\{?(\\w+))\\}?") 
```

但随后它将`$SECONDVAR}`用`Y`而不是用替换例如`Y}`。

* * *

**编辑添加：**如果您使用的是 Java 7，我认为您应该能够编写

```
Pattern.compile("\\$(?:(?<varname>\\w+)|\\{(?<varname>\\w+)\\})") 
```

然后使用检索变量名`matcher.group("varname")`。（我没有在 Java 中测试过，因为我手边只有 Java 6，而且 Java 6 不支持命名的捕获组。但它*在*Perl 中有效。）请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28java.lang.String%29)[中的“组名”`java.util.regex.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#groupname)和[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#groupname) .[`java.util.regex.Matcher.group(java.lang.String)`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:34:55.760

我想添加一个新模式

```
Pattern.compile("\\$(\\{?(\\w+)\\}?)\\.?"); 
```

它会反向引用你类似的东西：[Demo](http://regex101.com/r/uL0wY4)但是那会匹配类似的东西`$firstvar$secondvar}literal`，我不知道它是否正确。

如果它仅适用于 2 个变量...

```
Pattern.compile("\\$(\\{?(\\w+)\\}?)\\.(?:\\$(\\{?(\\w+)\\}?))?"); 
```

[演示 2](http://regex101.com/r/wX9gH9)

第三次审查，如果它是你想要的[Demo 3](http://regex101.com/r/nX1aN5)

请记住，您可以使用`(?<groupname>group)`

# java - Android IllegalAccessError java.util.concurrent.TimeUnit.toHours

> ID：13075431
> 
> 赞同：1
> 
> 时间：2012-10-25T19:02:35.143
> 
> 标签：java, android

为什么会这样：

```
long diffInMis = date2.getTime() - date.getTime();
diffInHour = TimeUnit.MILLISECONDS.toHours(diffInMis); 
```

扔这个：

> java.lang.IllegalAccessError：试图访问方法 java.util.concurrent.TimeUnit.toHours:(Z)V

?

我在开发者控制台中有这个错误，无法重现。知道我只是自己做数学，但我很好奇。

设备：HTC Legend Android 2.2

答案：API < 9 中缺少 TimeUnit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:38:41.757

Java 5 没有[toHours](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/TimeUnit.html)，但[Java 6 有](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html#toHours%28long%29)。我的猜测是您在运行时使用的 TimeUnit 类版本不包括 toHours。当您的代码无法从您的引用位置访问字段或方法时，就会发生这种异常。

# java - 在访问器（getter）方法上使用转换器时出现异常

> ID：13075432
> 
> 赞同：1
> 
> 时间：2012-10-25T19:02:38.343
> 
> 标签：java, eclipselink, moxy

我正在尝试使用自定义转换器为此 SupplierOrderCharge 对象创建一种聚合，在该对象中我总结了列表中的所有值。

如果我删除转换器注释，下面列出的异常就会消失。这是一个有效的配置吗？我可以为这样的吸气剂方法放置一个变压器吗？或者它可能是 MOXy 中的一个错误？

这是我的代码：

```
@XmlElement
@XmlTransformation
@XmlReadTransformer(transformerClass = GeneralAttributeMarkerTransformer.class)
@XmlWriteTransformers({ @XmlWriteTransformer(xmlPath = "ORDER_HEADER/SHIPPING_INFO/SHIPMENT_CODE/text()", transformerClass = ShippingInfoTransformer.class),
@XmlWriteTransformer(xmlPath = "ORDER_HEADER/SHIPPING_INFO/SHIPPING_COST_EX_VAT/text()", transformerClass = ShippingInfoTransformer.class),
@XmlWriteTransformer(xmlPath = "ORDER_HEADER/SHIPPING_INFO/SHIPPING_COST_VAT/text()", transformerClass = ShippingInfoTransformer.class),
@XmlWriteTransformer(xmlPath = "ORDER_HEADER/SHIPPING_INFO/SHIPPING_COST_INC_VAT/text()", transformerClass = ShippingInfoTransformer.class), })
@Transient
protected SupplierOrderCharge getShippingInfo() {
    for (final SupplierOrderCharge soCharge : getOrderCharges()) {
        if (EntryType.SHIPPING.equals(soCharge.getEntryType())) {
            return soCharge;
        }
    }
    return null;
} 
```

我得到这个例外：

```
javax.xml.bind.JAXBException: 
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-60] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The method [] or [getShippingInfo] is not defined in the object [com.debijenkorf.data.model.supplier.SupplierOrder].
Internal Exception: java.lang.NoSuchMethodException: com.debijenkorf.data.model.supplier.SupplierOrder.(com.debijenkorf.data.model.supplier.SupplierOrderCharge)
Mapping: org.eclipse.persistence.oxm.mappings.XMLTransformationMapping[shippingInfo]
Descriptor: XMLDescriptor(com.debijenkorf.data.model.supplier.SupplierOrder --> [DatabaseTable(SALES_ORDER)])

Runtime Exceptions: 
---------------------------------------------------------

java.lang.NullPointerException

- with linked exception:
[Exception [EclipseLink-0] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-60] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The method [] or [getShippingInfo] is not defined in the object [com.debijenkorf.data.model.supplier.SupplierOrder].
Internal Exception: java.lang.NoSuchMethodException: com.debijenkorf.data.model.supplier.SupplierOrder.(com.debijenkorf.data.model.supplier.SupplierOrderCharge)
Mapping: org.eclipse.persistence.oxm.mappings.XMLTransformationMapping[shippingInfo]
Descriptor: XMLDescriptor(com.debijenkorf.data.model.supplier.SupplierOrder --> [DatabaseTable(SALES_ORDER)])

Runtime Exceptions: 
---------------------------------------------------------

java.lang.NullPointerException
]
at org.eclipse.persistence.jaxb.JAXBContext$ContextPathInput.createContextState(JAXBContext.java:771)
at org.eclipse.persistence.jaxb.JAXBContext$ContextPathInput.createContextState(JAXBContext.java:711)
at org.eclipse.persistence.jaxb.JAXBContext.<init>(JAXBContext.java:157)
at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:134)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:128)
at javax.xml.bind.ContextFinder.find(ContextFinder.java:249)
at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:372)
at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:337)
at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:244)
at com.debijenkorf.services.core.JaxbMoxyMarUn.marshal(JaxbMoxyMarUn.java:48)
at com.debijenkorf.services.fc4.JaxbMarUnFC1Test.testMarshal(JaxbMarUnFC1Test.java:36)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: Exception [EclipseLink-0] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.IntegrityException
Descriptor Exceptions: 
---------------------------------------------------------

Exception [EclipseLink-60] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: The method [] or [getShippingInfo] is not defined in the object [com.debijenkorf.data.model.supplier.SupplierOrder].
Internal Exception: java.lang.NoSuchMethodException: com.debijenkorf.data.model.supplier.SupplierOrder.(com.debijenkorf.data.model.supplier.SupplierOrderCharge)
Mapping: org.eclipse.persistence.oxm.mappings.XMLTransformationMapping[shippingInfo]
Descriptor: XMLDescriptor(com.debijenkorf.data.model.supplier.SupplierOrder --> [DatabaseTable(SALES_ORDER)])

Runtime Exceptions: 
---------------------------------------------------------

java.lang.NullPointerException

at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:638)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:574)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:533)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:777)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.login(DatabaseSessionImpl.java:735)
at org.eclipse.persistence.oxm.XMLContext$XMLContextState.<init>(XMLContext.java:857)
at org.eclipse.persistence.oxm.XMLContext$XMLContextState.<init>(XMLContext.java:832)
at org.eclipse.persistence.oxm.XMLContext.<init>(XMLContext.java:193)
at org.eclipse.persistence.jaxb.JAXBContext$ContextPathInput.createContextState(JAXBContext.java:797)
at org.eclipse.persistence.jaxb.JAXBContext$ContextPathInput.createContextState(JAXBContext.java:769)
... 37 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:36:34.777

这里可能有一个错误。您介意在下面的链接中输入一个，并且可以提供一个示例来演示您所看到的问题吗？

*   [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=EclipseLink)

我在下面添加了一些示例代码，可以`XmlTransformationMapping`为我正确创建一个。我做了以下事情：

*   删除了`@XmlElement`注释。
*   公开了`getShippingInfo()`方法。
*   添加了一个`setShippingInfo(SupplierOrderCharge s)`方法。

```
package forum13075432;

import java.util.List;
import org.eclipse.persistence.oxm.annotations.*;

public class Root {

    @XmlTransformation
    @XmlReadTransformer(transformerClass = GeneralAttributeMarkerTransformer.class)
    @XmlWriteTransformers({
            @XmlWriteTransformer(xmlPath = "ORDER_HEADER/SHIPPING_INFO/SHIPMENT_CODE/text()", transformerClass = ShippingInfoTransformer.class),
            @XmlWriteTransformer(xmlPath = "ORDER_HEADER/SHIPPING_INFO/SHIPPING_COST_EX_VAT/text()", transformerClass = ShippingInfoTransformer.class),
            @XmlWriteTransformer(xmlPath = "ORDER_HEADER/SHIPPING_INFO/SHIPPING_COST_VAT/text()", transformerClass = ShippingInfoTransformer.class),
            @XmlWriteTransformer(xmlPath = "ORDER_HEADER/SHIPPING_INFO/SHIPPING_COST_INC_VAT/text()", transformerClass = ShippingInfoTransformer.class), })
    public SupplierOrderCharge getShippingInfo() {
        for (final SupplierOrderCharge soCharge : getOrderCharges()) {
            if (EntryType.SHIPPING.equals(soCharge.getEntryType())) {
                return soCharge;
            }
        }
        return null;
    }

    public void setShippingInfo(SupplierOrderCharge s) {
    }

    private List<SupplierOrderCharge> getOrderCharges() {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

# android - Android GUI：尝试在画布上绘图

> ID：13075435
> 
> 赞同：2
> 
> 时间：2012-10-25T19:02:48.437
> 
> 标签：android, view

```
public class Player extends ViewGroup {
    private RectF rect = new RectF();
    private Paint paint;

    public Player(Context context,String pname) {
        super(context);
        setWillNotDraw(false);
        paint=new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setStyle(Style.FILL);
        paint.setColor(getResources().getColor(R.color.red));

    }

    public void onDraw(Canvas canvas) {
        canvas.drawRoundRect(rect, 10, 10, paint);
        canvas.drawCircle(rect.centerX(), rect.centerY(), 10, paint);
        //canvas.drawColor(Color.RED);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        int wspec = MeasureSpec.makeMeasureSpec(
                getMeasuredWidth(), MeasureSpec.EXACTLY);
        int hspec = MeasureSpec.makeMeasureSpec(
                getMeasuredHeight(), MeasureSpec.EXACTLY);
        for(int i=0; i<getChildCount(); i++){
            View v = getChildAt(i);
            v.measure(wspec, hspec);
        }
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        rect.set(l, t,r, b);
    }
} 
```

第三个命令确实绘制了一个红色矩形，其边界是由参数 rect 给出的 rect (l,t,r,b) = (412,415,735,754)，并且由于某种原因，前两个命令对帆布！

我已经确定矩形是一个实际的矩形，因为我提到它的值是 (412,415,735,754)，它确实是一个有效的矩形，你看到我是如何定义油漆的，为什么它不画呢？

花了2个小时试图弄清楚，认真...

谢谢！

顺便说一句，该类扩展了 ViewGroup ，因为它最终意味着实现一个视图容器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:27:48.747

试试这个你的 onLayout 例程：

```
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    rect.set(0, 0, r-l, b-t);
} 
```

这样，您将创建一个具有完整布局的宽度和高度的矩形，但其左上角（相对于画布）为 0、0。

# apache - Apache ModRewrite 在 vhost 中工作，但不在 .htaccess 中

> ID：13075438
> 
> 赞同：1
> 
> 时间：2012-10-25T19:03:02.287
> 
> 标签：apache, .htaccess, mod-rewrite

我有以下 mod 重写：

```
RewriteEngine On

# rest api rewrites
RewriteCond %{REQUEST_URI} /api/v [NC]
RewriteRule ^(.*)$ /index.php/$1 [L,QSA]

# main application rewrite
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteRule ^/[a-zA-Z0-9\-\_/]+?$ /index.html [L,QSA] 
```

当我将这些放入我的 vhost 配置时，一切正常，但是当我将其放入我的 .htaccess 文件时，第一次重写执行无限循环（日志显示内部重写），第二次重写根本不起作用。

为什么这些重写会在 vhost 而不是我的 .htaccess 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T04:24:47.073

1.  第一条规则循环是因为您的目标与正则表达式匹配，所以一旦它第一次重写并且规则循环，`^(.*)$ matches the URI that you've just rewritten to (`/index.php/etc...`），所以它会导致无限循环（或循环与内部重定向限制配置为）。您需要添加一个条件来防止循环：

    ```
    # rest api rewrites
    RewriteCond %{REQUEST_URI} !^/index\.php
    RewriteCond %{REQUEST_URI} /api/v [NC]
    RewriteRule ^(.*)$ /index.php/$1 [L,QSA] 
    ```

2.  第二条规则根本没有被应用，因为在 htaccess 文件中通过规则的 URI 已经去掉了前导斜杠（因为 htaccess 本质上就像`<Directory>`vhost/server 配置中的一个），所以你至少需要使那个前导斜线可选：

    ```
    # main application rewrite
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
    RewriteRule ^/?[a-zA-Z0-9\-\_/]+?$ /index.html [L,QSA] 
    ```

# javascript - 计时器不运行超过一次

> ID：13075442
> 
> 赞同：0
> 
> 时间：2012-10-25T19:03:39.513
> 
> 标签：javascript, jquery

出于某种原因，当我第一次运行以下脚本时，计时器第二次没有再次激活，知道为什么吗？

```
 var timer = 0;
 $(document).ready(function() {
     $('#search').keypress(function() {
         if(timer == 0) { $('#sel').html('<iframe src="search.php?p=' + $('#search').val() + '"></iframe>');    }
         timer = 1;
         setTimeout('timer = 0;', 2000);        
      });
 }); 
```

问候

马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:05:18.060

`setTimeout` only runs once. You probably want `setInterval`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:07:59.670

```
$('#search').keypress(function() {
    if(timer == 0) { setTimeout('clearTimeout(this);timer = 0;', 2000); $('#sel').html('<iframe src="search.php?p=' + $('#search').val() + '"></iframe>');  }
    timer = 1;
}); 
```

在里面运行计时器很好地修复了它:)

# python - 无法让 Django Tastypie 创建具有深度相关资源的资源

> ID：13075444
> 
> 赞同：0
> 
> 时间：2012-10-25T19:03:51.573
> 
> 标签：python, django, tastypie

我的模型看起来像：

```
class LocAddress(models.Model):
    property_number = models.CharField(max_length=8)
    street_name = models.CharField(max_length=50)
    postal_code = models.CharField(max_length=6)
    city_name = models.CharField(max_length=50)

class LluOrder(models.Model):
    # [...]
    address = models.ForeignKey(LocAddress, db_column='address')

class OrderItem(models.Model):
    # [...]
    llu = models.ForeignKey(LluOrder, db_column='llu', null=True, blank=True) 
```

和资源：

```
class LocAddressResource(ModelResource):
    class Meta(ModelResource.Meta):
        queryset = LocAddress.objects.all()

class LluOrderResource(ModelResource):
    address = fields.ToOneField(LocAddressResource, 'address', full=True)

    class Meta(ModelResource.Meta):
        queryset = LluOrder.objects.all()

class OrderItemResource(ModelResource):
    llu = fields.ToOneField(LluOrderResource, 'llu', full=True, null=True)

    class Meta(ModelResource.Meta):
        queryset = OrderItem.objects.all() 
```

当我将以下数据发布到“http://localhost:8000/api/v1/orderitem/”时：

```
{
    "someotherattr": 12,
    "llu":{
        "address":{
            "city_name":"Warszawa",
            "postal_code":"05-600",
            "property_number":"34",
            "street_name":"Gr\u00f3jeckas"
        }
    }
} 
```

我得到 IntegrityError：

```
Traceback (most recent call last):
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py", line 192, in wrapper
    response = callback(request, *args, **kwargs)
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py", line 397, in dispatch_list
    return self.dispatch('list', request, **kwargs)
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py", line 427, in dispatch
    response = method(request, **kwargs)
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py", line 1165, in post_list
    updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py", line 1777, in obj_create
    self.save_related(bundle)
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py", line 1918, in save_related
    related_obj.save()
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/base.py", line 463, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/base.py", line 551, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/manager.py", line 203, in _insert
    return insert_query(self.model, objs, fields, **kwargs)
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/query.py", line 1576, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 917, in execute_sql
    cursor.execute(sql, params)
  File "/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
IntegrityError: null value in column "address" violates not-null constraint 
```

我错过了什么吗？我应该重写什么来使美味派创建嵌套`LocAddress`资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:46:43.413

尝试设置：

```
address = models.ForeignKey(LocAddress, db_column='address', null=True, blank=True) 
```

# php - PHP中动态更改的文件。有时在 include()、ftp_put() 中看不到更改

> ID：13075449
> 
> 赞同：0
> 
> 时间：2012-10-25T19:03:58.123
> 
> 标签：php, file-io, php-include

我有这样的脚本：

```
file_put_contents("filters.php", '<? $filter_arr = '.var_export($filter_arr, true).'; ?>');
include("filters.php"); 
```

或者：

```
$xml = '<?xml version="1.0" encoding="UTF-8"?>'."\n<xml>\n\t<items>\n".$xml_0."\n\t</items>\n</xml>";
file_put_contents($PROJECT_ROOT."/xml/$file_type.xml", $xml);
$upload_result = ftp_put($ftp_stream, $destination_file, $PROJECT_ROOT."/xml/$file_type.xml", FTP_BINARY); 
```

实际上，对这些文件的更改是物理应用的（写入文件）。

但有时在 include() 之后不可见，或者 ftp_put() 未将其发送到远程服务器。

看起来像 PHP 缓存这些文件。

在 include() 之前添加 sleep(1) 没有帮助。

A也有这样的测试：

```
for ($i=1; $i <= 100; $i++) {
    echo "$i)";
    $filter_arr = array($i);
    file_put_contents("test.txt", '<? $filter_arr = '.var_export($filter_arr, true).'; ?>');
    include("test.txt");
    echo $filter_arr[0]."<br>";
} 
```

大约 90% 的时间输出正常：

```
1) 1
2) 2
...
100) 100 
```

大约 10% 的时间输出是错误的：

```
1) 1
2) 1
...
100) 1 
```

使用flock() 或clearstatcache() 也没有影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T06:04:52.360

我也面临同样的问题。

**编辑正确答案**

您可以使用

```
opcache_invalidate('second.php');//Reset file cache 
```

如此处所述：[PHP包含不读取源文件的更改](https://stackoverflow.com/questions/24074220/php-include-doesnt-read-changes-of-source-file/24075706#24075706)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:14:25.597

似乎没有文件系统或文件锁定问题，因为在这两次文件中都写入了文件，但有一次数据不正确，比如 $i 没有升序，这很奇怪。我得到的唯一错误是当我按住 F5 时文件被锁定以进行写入，就是这样。

你能更准确地了解版本和操作系统吗？

# c# - 图形未显示在 C# 中的 UserControl 上

> ID：13075454
> 
> 赞同：-1
> 
> 时间：2012-10-25T19:04:20.900
> 
> 标签：c#, events, graphics, scroll, mousewheel

在 Paint Event 中调用 RedrawLines() 方法是有效的，但我做了一些应该没有效果的小改动，现在我遇到了问题。首先，当我切换选项卡时，每个选项卡都包含我的 UserControl，这些线不会像以前那样重绘。此外，当我使用 MouseWheel 时，线条并没有完全绘制出来，因为它们在 UserControl 的顶部和底部被截断。然而，当我使用 ScrollBar 时，它们是完整绘制的。任何的想法？

在获得必要的点后，这是我的 DrawLine() 方法的一部分：

```
System.Drawing.Pen myPen;
myPen = new System.Drawing.Pen(Color.Black);
myPen.Width = 3;
System.Drawing.Graphics formGraphics = this.CreateGraphics();

formGraphics.DrawLine(myPen, p1.X, p1.Y, p2.X, p2.Y);
myPen.Dispose();
formGraphics.Dispose(); 
```

所以我有一个 RedrawLines 方法可以准确地调用它

```
private void RedrawLines(){
    Graphics g = Graphics.FromHwnd(this.Handle);
    g.Clear(Color.White);
    g.Dispose();
    for (int i =0; i < Set_Of_Connections.Count; i++)
    {
         DrawLine(Set_Of_Connections[i].ins.cb, Set_Of_Connections[i].outs.cb, Color.Green);
    }
} 
```

在 Paint 事件中调用它：

```
private void Switch_Paint(object sender, PaintEventArgs e)
{
    RedrawLines();
} 
```

但就像我说的那样，这可能根本不会帮助你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:09:37.903

试试这样：

```
public UserControl1() {
  InitializeComponent();
  this.DoubleBuffered = true;
  this.ResizeRedraw = true;
}

protected override void OnPaint(PaintEventArgs e) {
  base.OnPaint(e);

  e.Graphics.Clear(Color.White);
  for (int i = 0; i < Set_Of_Connections.Count; ++i)
  {
     DrawLine(e.Graphics, 
              Set_Of_Connections[i].ins.cb,
              Set_Of_Connections[i].outs.cb,
              Color.Green);
  }
}

protected override void OnMouseWheel(MouseEventArgs e) {
  base.OnMouseWheel(e);
  this.Invalidate();
}

protected override void OnScroll(ScrollEventArgs se) {
  base.OnScroll(se);
  this.Invalidate();
} 
```

You should pass the Graphic object from the Paint event to your DrawLine method and use the graphic object there instead of using the CreateGraphic function, which is just a temporary drawing and will cause flickering since it will ignore any DoubleBuffering settings.

# java - 从递归函数返回多个值

> ID：13075456
> 
> 赞同：2
> 
> 时间：2012-10-25T19:04:30.340
> 
> 标签：java, recursion, binary, linked-list, return

我有这个问题，我必须将十进制数转换为二进制，然后将这些位存储在一个链表中，其中头节点是最高有效位，最后一个节点是最低有效位。解决问题本身实际上很容易，因为您只需要递归地继续取模 2 并将结果添加到列表中，直到十进制数变为 0。

我卡住的地方是我必须编写函数，使其返回最高有效位和最后一个有效位的一对数字（无论是数组还是列表）。即：在函数中输入 14 将返回 (1, 0)，因为 14 是二进制的 1110。

我确实可以轻松访问 MSB 和 LSB（getFirst()、getLast()）。

该函数只能接受一个参数，即十进制数。

目前我有这个当前代码：

```
public static void encodeBin(int n) {
    if(n == 0) return; //Base case
    else {
        if(n % 2 == 0)
            theList.addFirst(0);
        else
            theList.addFirst(1);
        encodeBin(n / 2);
    }
    // return?
} 
```

问题是我不知道如何返回 2 个值。有一个返回值意味着我不能自己调用​​ encodeBin() 。

此外，我应该在哪里创建列表？如果我把类似的东西放在`List<Integer> = new LinkedList<Integer>()`函数的开头，那么每次函数调用自己时，它都会创建一个新列表并在那个新列表中添加位而不是原来的对吗？（从调用函数时创建的列表第一次）

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:08:16.360

您不能分别返回两个值。但是，您可以返回一个包含第一位和最后一位的数组，*或者*创建您自己的类来保存这些数据，并返回该类的一个实例。

* * *

关于列表，我看到两个选项：

1.  使其成为`static`类变量
2.  让它成为函数的参数（尽管我看到你说你不能这样做）。

第一种方法如下所示：

```
public class MyClass {
    private static List<Integer> theList = new LinkedList<Integer>();

    // `encodeBin` method as you have it
} 
```

第二种方法如下所示：

```
public static void encodeBin(int n, List<Integer> theList) {
    if(n == 0) return; //Base case
    else {
        if(n % 2 == 0)
            theList.addFirst(0);
        else
            theList.addFirst(1);
        encodeBin(n / 2, theList);
    }
} 
```

然后你可以按照以下方式做一些事情

```
List<Integer> theList = new LinkedList<Integer>();
encodeBin(14, theList); 
```

并将`theList`根据需要保存适当的位。

* * *

请注意，您可能需要考虑将其设为*booleans*而不是*integers*的列表，并使用`true`表示`1`和`false`表示`0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:14:33.960

您不能返回 2 个值。您将不得不返回一些包含 2 个值的对象。一个数组或一些新对象，取决于你的作业要求和这个函数将在哪里使用。

对于链表的创建，您需要的是一个递归辅助方法。您的公共方法将用于初始化您的对象、开始递归并返回您的结果。这允许您的实际递归函数有多个参数。

```
public static SOME_TYPE encodeBin(int n) {
  LinkedList result = new LinkedList();
  encodeBin_helper(result,n);
  // return the MSB and LSB
}

public static void encodeBin_helper(LinkedList theList, int n) {
  if(n == 0) return; //Base case
  else {
    if(n % 2 == 0)
        theList.addFirst(0);
    else
        theList.addFirst(1);
    encodeBin_helper(theList, n/2);
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:45:50.103

我建议声明两种方法：

(1) public static int[] encodeBin(int n) 和 (2) private static void encodeBin(LinkedList, int n)

公共方法只是创建一个空列表，然后调用私有版本，同时传递空列表和原始输入 n 作为参数

像这样的东西：

```
public static int[] encodeBin(int n) {
  LinkedList<Integer> aList = new LinkedList<Integer>();
  encodeBin(aList , n);
  int MSB = aList.getFirst();
  int LSB = aList.getLast();

  return new int[] {MSB, LSB};
}

private static void encodeBin(LinkedList<Integer> list, n) {
  //your recursive version here
} 
```

# lucene - 用于自定义查询的 Sitecore System Lucene Index

> ID：13075457
> 
> 赞同：0
> 
> 时间：2012-10-25T19:04:32.447
> 
> 标签：lucene, indexing, sitecore

我一直在对网站的某些部分使用 Sitecore 查询和 FAST 查询。但是随着内容的增长，这些查询变得缓慢，我想实现 Lucene 查询内容以加快速度。

我想知道我是否可以只使用系统索引而不必设置单独的索引。Sitecore 默认是否索引内容编辑器中的所有内容？这是一个好方法还是我应该创建自己的索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:19:09.053

（我假设您使用的是 Sitecore 6.4->6.6）

与所有内容一样 .. 这取决于 .. Sitecore 在其系统索引中保留了所有 Sitecore 项目的索引，欢迎您使用它。有时您可能需要更专业或受限制的项目列表，例如基于某个模板、被索引或需要索引复选框字段（因为系统默认情况下仅索引`text`字段）。

设置自己的搜索索引非常简单。不过，它确实需要对 web.config 进行一些摆弄（我建议将其添加为`.include`文件）。

创建一个`<index>`具有自己的新节点，该节点`id`将定义集合的名称和它将进入的文件夹。（您可以通过在安装目录中查找目录来检查其工作`/data/indexes`情况。

![在此处输入图像描述](../Images/a50b8fe5af748ecaf35d6b262be68c89.png)

.. 接下来，您可以告诉爬虫查看哪个数据库（`master`如果您希望对未发布的内容或已发布的内容进行索引，则很可能`web`）以及从何处开始搜索（在此示例中，我仅索引新闻部分）。你可以`tag`，`boost`并告诉是否要`IndexAllFields`（否则它只会索引它理解为文本的字段..富文本/多行文本/文本等）。

![在此处输入图像描述](../Images/510f531d6763bde61592d99f0b0aff21.png)

.. 最后，您可以告诉索引器要包含或排除哪些模板类型。

![在此处输入图像描述](../Images/db9227edef6518c8025e65f6053cfff6.png)

索引器的工作原理是它将订阅 sitecore 中的项目事件 .. 所以每次更改、移动或删除项目时，索引都会自动更新。显然，如果您正在索引`web`数据库，则需要发布这些项目。

![在此处输入图像描述](../Images/c66588a6bbed1b62f86883663c1247b1.png)

有关查询语法和索引的更深入信息可以[在 SDN](http://sdn.sitecore.net/Reference/Sitecore%206/Sitecore%20Search%20and%20Indexing.aspx)上找到。

搜索语法和 API 在 6.4/6.5 中得到了很大改进，但如果您想增加额外的功能，那么我的同事 Alex Shyba 的[Advanced Database Crawler](http://sitecoreblog.alexshyba.com/2010/11/sitecore-searcher-and-advanced-database.html)也值得一试。

希望这会有所帮助：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:12:55.150

您将要实现自己的索引。出于同样的原因，当有很多内容时，您会看到事情变慢，当其中有很多内容时，索引也会变慢。

我更喜欢专门用于驱动我需要的功能的目标索引，并且只包含所需的数据。这允许在您的组件上使用更小、更高效的索引。

此外，您可能想查看[由 Alex Shyba 组合的 AdvancedDatabaseCrawler](http://sitecoreblog.alexshyba.com/2010/11/sitecore-searcher-and-advanced-database.html)。有[一些博客有](http://briancaos.wordpress.com/tag/advanceddatabasecrawler/)一些关于实现这个 lucene 索引模块的好文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:11:48.307

单独的索引总是一个明智的决定，您可以保持轻松。在大型环境中，系统索引可以增长到千兆字节。

您可以从索引中排除内容，因为您只会将其用于执行查找，而不是显示索引中的内容。

最后：系统索引用于主数据库，您将查询 Web 数据库，可能在内容交付服务器上。

# vb.net - 使用线程回调通过计时器触发事件

> ID：13075458
> 
> 赞同：1
> 
> 时间：2012-10-25T19:04:33.240
> 
> 标签：vb.net, multithreading, timer, delegates, callback

好的，我正在使用 vb.net dll 类（不是表单应用程序）。

在这个类中，我使用了一个创建计时器的方法，最后将调用一个引发事件的方法。

`timerDriver = New System.Timers.Timer()`

`timerDriver.Interval = 500`

`timerDriver.Enabled = True`

`AddHandler timerDriver.Elapsed, AddressOf DriverLicenseInTray`

我将描述该过程的一部分，就好像它正在工作一样

因此，用户按下启动扫描仪的 .asp 页面上的按钮。一旦扫描仪启动，定时器进程就会不断地监听而不锁定页面（基本上这个进程不会影响用户正在做的任何事情）。现在，该软件正在监视要插入此扫描仪的卡。一旦这是真的，它就会调用一个处理卡片的方法。处理完卡片后，它会调用`RaiseEvent ProcessCard`将事件抛出到具有适当事件处理程序的 .asp 页面。

我遇到的问题是`RaiseEvent`。由于计时器，它在错误的线程上提高了它。有谁知道如何解决这一问题？

我已经搜索过，我发现我可能不得不使用委托，但我没有 Me.Invoke 或任何东西.invoke。如果我是对的，invoke 是什么触发了主线程上的事件？我已经疯狂地搜索了 msdn 页面，但他们的修复并没有修复我的问题。

我知道 .asp 的 RaiseEvent 正在工作，因为如果我将它扔到 main 方法上，在计时器之前，.asp 页面会捕获它。

# javascript - 没有显式存储行和列的 D3 热图

> ID：13075459
> 
> 赞同：6
> 
> 时间：2012-10-25T19:04:34.583
> 
> 标签：javascript, d3.js

我有一个二维数据数组，我想在 D3 中将其可视化为热图。

从我看到的例子中，包括：

[https://stackoverflow.com/a/12925448/1647819](https://stackoverflow.com/a/12925448/1647819)

[http://bl.ocks.org/2605010](http://bl.ocks.org/2605010)

看起来您必须将行和列编码为每个数据元素的属性。有没有办法利用数据的结构（即它是一个可使用 [i][j] 表示法索引的二维数组这一事实）来避免对位置信息进行冗余编码？

如果没有，是否有一种简洁和/或有效的方法来生成对位置信息进行编码的数据结构？我的意思不是嵌套的 for 循环：

```
myData = [[1, 2], [3, 4]]
myDataWithPos = []

nRow = myData.length
nCol = myData[0].length

for (i = 0; i < nRow; i++){
    for(j = 0; j < nCol; j++){
        myDataWithPos.push({val: myData[i][j], row: i, col: j})
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:45:51.653

当然，您可以使用二维数组的索引来绘制热图。[我在http://jsfiddle.net/uArga/4/](http://jsfiddle.net/uArga/4/)上整理了一个简单的例子。

假设您的数据如下所示：

```
var data = [[3,5],[9,2]]; 
```

首先，我设置了一些基本的尺度来根据数据的大小和图表的大小来计算偏移量`x`。`y`这使得通过更改图表来调整图表大小变得很容易，`height`并且`width`无需手动重新计算每个单元格的大小。

```
var x = d3.scale.linear()
    .range([0, width])
    .domain([0,data[0].length]);

var y = d3.scale.linear()
    .range([0, height])
    .domain([0,data.length]); 
```

然后，您可以将每一行添加到热图中

```
var row = svg.selectAll(".row")
             .data(data)
           .enter().append("svg:g")
             .attr("class", "row"); 
```

然后使用子选择将每个单元格添加到行中。可能有一种更简洁的方法可以做到这一点，但我基本上只是在每个单元格的数据旁边捕获行号。然后，我使用刻度来计算每个单元格的`x`、`y`、`height`和`width`。

```
var col = row.selectAll(".cell")
    .data(function (d,i) {return d.map(function(a){return {value: a, row: i};})})
  .enter().append("svg:rect")
    .attr("class", "cell")
    .attr("x", function(d, i) { return x(i); })
    .attr("y", function(d, i) { return y(d.row); })
    .attr("width", x(1))
    .attr("height", y(1))
    .style("fill", function(d) { return colorScale(d.value); }); 
```

# ruby-on-rails - Rails 中带有可选参数的路由

> ID：13075461
> 
> 赞同：5
> 
> 时间：2012-10-25T19:04:44.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我正在尝试设置如下所示的路线`acme.com/posts/:category/:status`：两者都是可选的`:category`。`:status`我写了很多变体，但没有一个奏效：

```
resources :posts do
  match '(/:category)(/:status)', to: 'posts#index', as: 'filter', on: :collection
end

# Category Links
link_to "Questions", filter_posts_path(:questions)
link_to "Suggestions", filter_posts_path(:suggestions)

# Status Links
link_to "Published", filter_posts_path(params[:category], :published)
link_to "Draft", filter_posts_path(params[:category], :draft) 
```

这个想法是能够*1) 按类别过滤*，*2) 按状态过滤*，*以及 3) 如果两者都可用，则按类别和状态过滤*。当前的设置也破坏了我的`/posts/new`路径，总是重定向到`posts#index`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T07:47:52.983

我有这个变化，它似乎工作正常：

```
 namespace :admin do
    resources :posts, :except => [:show] do
      collection do
        get "/(:category(/:status))", to: "posts#index", as: "list", :constraints => lambda{|req|
          req.env["PATH_INFO"].to_s !~ /new|\d/i
        }
      end
    end
  end 
```

= CONTROLLER=admin/posts rake 路由

```
list_admin_posts GET    /admin/posts(/:category(/:status))(.:format)                 admin/posts#index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:51:05.537

您可以使用更多 RESTful `resources :posts`（在 config/routes.rb 中）并在查询字符串中发送参数。

使用这种方法，所有参数都是可选的，并且您不限于使用预定义的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T11:01:59.663

你可以尝试这样的事情：

```
match '/filter/*category_or_status' => 'posts#index', as: 'filter' 
```

有了这个，您可以构建自己的过滤器路径。然后，您可以在控制器中解析`params[:category_or_status]`并获取类别或状态（如果已给出）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T19:57:55.403

这对你有用吗？

```
resources :posts do
  collection do
    match '/:category(/:status)', to: 'posts#index', as: 'filter'
    match '/:status', to: 'posts#index', as: 'filter'
  end
end 
```

希望至少它有所帮助！

# text - Xcode - Button changing label to a series of words?

> ID：13075462
> 
> 赞同：-2
> 
> 时间：2012-10-25T19:04:48.577
> 
> 标签：text, label, series

I want a button to change a label's text in a set series. For example, that one box app on the app store where theres a button and every time you press it, it says the next thing. I want, let's say, one button and one label. The first time you press the button, it says, "hi", you press it again and it says, "how", then, "are", "you?". How would I go about doing this? Any help would be good.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:19:29.787

1.  向视图控制器添加一个整数属性`currentWordIndex`，以记住哪个是当前单词。

2.  创建一个标签。将其连接到视图控制器中的插座，名称如`wordLabel`.

3.  创建一个按钮。将其连接到将标签更改为您想要的任何文本的操作，如下所示：

```
    - (IBAction)changeTheLabel:(id)sender
    {
        NSArray *words = @[@"hi", @"how", @"are", @"you?];
        self.currentWordIndex = (self.currentWordIndex + 1) % [字数];
        self.wordLabel.text = [words objectAtIndex:self.currentWordCount];
    }

```

就这些。

# asp.net-mvc - MvcSiteMapProvider 导致 MVC4 网站出现授权问题

> ID：13075463
> 
> 赞同：3
> 
> 时间：2012-10-25T19:04:52.837
> 
> 标签：asp.net-mvc, authorization, mvcsitemapprovider, authorize-attribute

我正在尝试使用我的新 MVC4 网站实现 MvcSiteMapProvider，但我遇到了一些我似乎无法修复的问题。

我使用 Active Directory 设置授权（目前没有角色提供程序），并且一切正常。当您尝试访问登录页面以外的任何页面时，您将被重定向到登录页面。Account 控制器的操作方法具有 [allowAnonymous] 属性，以允许未经身份验证的用户访问它们，以便他们可以登录。

出于某种未知原因，将 MvcSiteMapProvider 添加到项目中会阻止此操作，现在未经身份验证的用户可以访问任何页面。MvcSiteMapProvider 创建的菜单正常工作，只有经过身份验证的用户才能看到它，但如果未经身份验证的用户在直接链接中键入，他们不会像以前那样重定向到登录页面。

我已经从项目中删除了 MvcSiteMapProvider 并且身份验证再次开始正常工作。我相信这与 MvcSiteMapProvider 以某种方式覆盖 authorizeAttribute 过滤器有关，但我不知道在哪里/如何。

我可以将 [Authorize] 放在控制器的顶部，并且重定向与 MvcSiteMapProvider 一起工作，但这与使用 MVC4 的全部原因背道而驰。

```
//this is supposed to set authorize for the entire app
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new System.Web.Mvc.AuthorizeAttribute()); 
} 
```

我感觉这个问题来自 MvcSiteMapProvider/External/AuthorizeAttributeBuilder.cs，但我没有足够的经验来解决这个问题。

更新：原来我刚刚错误地设置了我的全局过滤器。由于某种原因，RegisterGlobalFilters 方法在我的 global.asax 文件中，所以我的 FilterConfig.cs 文件没有以下行：

```
filters.Add(new System.Web.Mvc.AuthorizeAttribute()); 
```

我从 global.asax 文件中删除了该方法，然后使用上述过滤器更新了 FilterConfig.cs 文件，现在一切都按预期工作。不知道我是如何陷入这种境地的，但我很高兴我弄明白了。

mvcSiteMapProvider GitHub 项目上有人提到他让 MVC4 和 mvcSiteMapProvider 无缝工作，所以我创建了一个新的 MVC4 应用程序并在进行任何更改之前添加了 mvcSiteMapProvider，然后添加了授权全局过滤器。一切都按预期工作，所以我比较了项目并发现了哪里出错了。希望此信息对某人有所帮助，但我对此表示怀疑，因为这是一个非常独特的案例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-22T13:37:07.370

原来我刚刚错误地设置了我的全局过滤器。由于某种原因，RegisterGlobalFilters 方法在我的 global.asax 文件中，所以我的 FilterConfig.cs 文件没有以下行：

filters.Add(new System.Web.Mvc.AuthorizeAttribute()); I removed the method from my global.asax file then updated the FilterConfig.cs file with the above filter and everything is now working as expected. Not sure how I got into this situation, but I'm glad I figured it out.

Someone on the mvcSiteMapProvider GitHub project had mentioned that he had MVC4 and mvcSiteMapProvider working seamlessly, so I created a new MVC4 app and added the mvcSiteMapProvider before making any changes and then added the authorize global filter. Everything worked as expected, so I compared projects and found where I had gone wrong. Hopefully this info helps someone, but I doubt it as it's a pretty unique case.

# elasticsearch - How to write fast Elastic Search queries

> ID：13075464
> 
> 赞同：4
> 
> 时间：2012-10-25T19:04:58.153
> 
> 标签：elasticsearch

Is there a guide to writing the ES queries - what to do, what to avoid, this sort of stuff. The official site describes all various ways to search, but provides little giudance as to when select what.

In my particular instance I have a list of providers, each one has a name an address and a number of IDs. I want to give the user a box he can type in anything he knows about the provider and run search based on whatever is provided. Essentially I would like to match every word from the box against the records (documents) in the index.

For the end user this should look like a simple keyword search.

Matching should cover exact matches, wild card matches, phonetic matches, synonyms (for names). Also some fuzziness should be included too.

The official site describes various ways to do that, but how to combine them together? For instance to support wild card search do I use wild card query, or do I index it with the NGram and do just text query?

With the SQL queries a certain way to get this sort of information is to check the execution plan for the query. If the SQL optimizer tells you that it will use table scan against a table of considerable size, you know you should change your query, or, may be, add an index. AFAIK there is no equivalent for this powerful feature in ES and I am not even sure if it is possible to build it.

But at least some generic considerations...? Pretty please...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:45:32.193

做事没有最好的方法，因为很多时候这取决于您要索引的内容，以及如何将数据映射到 Elasticsearch 中的变量。

您应该注意的一些经验法则：

一个。Elasticsearch 中的分面查询按顺序工作：

```
{   
 "query": {
   // data will be searched from this block first //
 }, "facets": {
   // after the data is received, it will be processed into facets //
 }
} 
```

因此，如果您的查询规模很大，您将通过分面进一步减慢查询速度。监控查询的结果。

湾。过滤器与查询

过滤器执行查询的子集，这意味着它将获取查询的全部结果，然后过滤掉您想要的或不想要的。

查询通常是直接搜索数据。

因此，如果您可以在进行过滤之前使您的查询尽可能具体，它应该会产生更快的结果。

C。查询被缓存；一次又一次地运行它们通常会产生更快的响应。如果您总是要使用相同的查询集， [Warmers API](http://www.elasticsearch.org/guide/reference/api/admin-indices-warmers.html)应该能够让您的查询更快

同样，所有这些都是经验法则，不能严格遵循，因为您对特定变量的索引会影响处理时间。字符串不同于长类型，带有分析器的字符串不同于非分析器。您需要做的可能是对您的查询进行试验以获得更好的判断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T08:53:30.987

上面的一个更正 - 过滤器可以被 ES 缓存，而不是查询。查询执行相关性评分和全文搜索的额外步骤。因此，建议在不需要使用过滤器进行全文搜索的地方。

此外，使用正确的索引值（not_analyzed、no、analyzed）设计您的映射

# sql - Is there any alternative of 'like' operators in sql - for searching data

> ID：13075465
> 
> 赞同：1
> 
> 时间：2012-10-25T19:05:06.080
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

I need some help here, I am fetching data dependent upon the conditions

Here I am using like operators, where client may use search with any word thus I have the below logic but here retrieval time is too high (it's taking 4mins) to get the data which is too slow.

I did all indexing to table but still can't optimize the query.

select * from authors where (address like '% Walmart %' OR address like 'Walmart %' OR address like '% Walmart' OR address like '% Walmart.com %' OR address like 'Walmart.com %' OR address like '% Walmart.com' OR address like '% Walmarts %' OR address like 'Walmarts %' OR address like '% Walmarts' OR address like '% Walmarts.com %' OR address like 'Walmarts.com %' OR address like '% Walmarts.com')

-- Result is 1 Rows

if i follow this logic

select * from authors where address like '%Walmart%'

-- Result is 44 rows - it is fetching all rows

But I need to get only that one row

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:19:16.233

我相信这是您在条款中唯一需要的东西`where`，它应该涵盖包含该单词的所有内容：

```
select * from authors
where address like '%' + @word + '%' 
```

您实际上已经在 where 子句的第二行执行此操作：

```
or like '%'+@word+'%' 
```

这涵盖了一切，使所有其他的过度。删除这些可能会加快一点速度：

```
declare @title varchar(20)

set @title = 'coll' set @title = LTRIM(rtrim(@title))

select * from authors
where address like '%'+@title+'%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:15:06.437

索引很可能无济于事。在许多情况下，当您使用 Like 语句时，无法使用索引。您允许的搜索类型非常低效。这个查询很可能会扫描地址表。如您所见，如果表中有大量行，这将需要很长时间。

您可能会更好地研究全文[搜索](http://msdn.microsoft.com/en-us/library/ms142571%28v=sql.105%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T19:24:11.653

如果您想在文本列上获得适当的性能，您将需要使用全文搜索。

[http://msdn.microsoft.com/en-us/library/ms142571.aspx](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T19:19:09.957

索引不会帮助像这样的通配符搜索，请尝试查看全文搜索

这将利用一个索引，它可能会做一个搜索

```
address like @wordcom+' % 
```

这不会使用索引，它必须扫描整个索引

```
address like '% '+@wordcom+' %' 
```

如上所述，请改用全文搜索

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T19:38:13.510

正如其他人所说，您所需要的只是

```
select * from authors where address like '%' + @word + '%' 
```

如果优化器知道我们告诉您的内容，这可能不会加快速度。（索引也无济于事，其他人建议使用全文搜索）。

如果您不明白为什么上面的查询就是您所需要的，让我们看看您的查询：

```
select * from authors
where address like @word or address like '% '+ @word
 or address like @word+' %' or address like '%'+@word+'%'
 or address like '% '+@word+' %' or address like @words
 or address like '% '+@words or address like @words+' %'
 or address like '%'+@words+'%' or address like '% '+@words+' %'
 or address like @wordcom or address like '% '+@wordcom
 or address like @wordcom+' %' or address like '%'+@wordcom+'%'
 or address like '% '+@wordcom+' %' or address like @wordscom
 or address like '% '+@wordscom or address like @wordscom+' %'
 or address like '% '+@wordscom+' %' 
```

你确实有一个“like @word + '%'”，所以请注意，如果一条记录匹配“like @word”，它也会匹配“like @word + '%'”。所以@word 不会再添加任何结果。由于“或”，无论@word 试图匹配的结果是相同的，还是你只是得到来自@word+'%' 的结果。

应用该逻辑，您的查询可以简化为：

```
select * from authors
where address like @word+' %' or address like '%'+@word+'%'
 or address like @words+' %' or address like '%'+@words+'%'
 or address like @wordcom+' %' or address like '%'+@wordcom+'%'
 or address like @wordscom+' %' or address like '% '+@wordscom+' %' 
```

同样，@word 不会添加 '%'+@word 尚未包含的任何内容，从而将查询简化为：

```
select * from authors
where address like '%'+@word+'%'
 or address like '%'+@words+'%'
 or address like '%'+@wordcom+'%'
 or address like '% '+@wordscom+' %' 
```

此外，由 '%'+@word+'s%'、'%'+@word+'.com%' 或 '%'+@word+'s.com%' 找到的任何内容都将由 '%'+@word+'%' 找到.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-20T13:26:31.767

如果您在查询中使用 LIKE，请使用双 %% 包装要过滤的值。这是最好的解决方案。如果您喜欢该解决方案，请投票。例如，在我的情况下，这与主查询连接在一起

```
filter_value = "'%%"+filter_value+"%%'" 
```

# wpf - 与 WPF MVVM Unity、通用存储库纠缠不清

> ID：13075471
> 
> 赞同：3
> 
> 时间：2012-10-25T19:05:33.787
> 
> 标签：wpf, dependency-injection, unity-container

如何将我的 CustomerRepository 注入到我的 CustomerVM 视图模型中？在我看来，我有一个 WPF 页面：

> ```
> <Page.DataContext>
>     <viewModel:CustomerVM/>
> </Page.DataContext> 
> ```

但是我的视图模型构造函数显然传入了参数，

> ```
>  public CustomerVM(ICustomerRepository customerRepository)
>     {
>         //this._customerRepository = customerRepository;
>     } 
> ```

我明白了

> 类型“CustomerVM”不能用作对象元素，因为它不是公共的或未定义公共无参数构造函数或类型转换器。

真的很挣扎。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:28:21.243

如果您使用依赖注入，我认为您无法在 XAML 中初始化 DataContext。在视图的代码隐藏中设置 DataContext，以便 Unity 可以解决依赖关系。尝试将此添加到 YourView.xaml.cs：

```
public YourView(CustomerVM viewModel)
{
    InitializeComponent();

    this.DataContext = viewModel;
} 
```

如果您通过 Unity 解决您的观点，上述方法将起作用。如果没有，您还可以使用 ServiceLocator 来解析视图模型：

```
using Microsoft.Practices.ServiceLocation;

public YourView()
{
    InitializeComponent();

    this.DataContext = ServiceLocator.Current.GetInstance<CustomerVM>();
} 
```

如果您不使用 Prism，您可能还需要在注册码中的某处添加以下内容来设置 ServiceLocator：

```
ServiceLocator.SetLocatorProvider(new ServiceLocatorProvider(() => new UnityServiceLocator(_unityContainer))); 
```

# excel - 使用 VBA 验证复选框

> ID：13075473
> 
> 赞同：0
> 
> 时间：2012-10-25T19:05:41.617
> 
> 标签：excel, vba

我在验证一组单选按钮时遇到了困难，这是我现在正在使用的代码，但我不断收到错误消息：`Runtime error 438 - Object doesn't support this property or method`.

这是导致问题的代码。

```
For Each ctl In Me.frPriority.Controls
        If ctl.Value = True Then GoTo nxtCheck1
    Next
        MsgBox "You didn't select a priority"
    Exit Sub
nxtCheck1: 
```

造成所有麻烦的线路是

```
If ctl.Value = True Then 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:24:45.423

如果框架中有非选项按钮控件类型，请使用它，首先检查控件类型。

```
For Each ctl In Me.frPriority.Controls
    If TypeOf ctl Is msforms.OptionButton Then
        If ctl.Value = True Then GoTo nxtCheck1
    end if 
Next
        MsgBox "You didn't select a priority"
    Exit Sub
nxtCheck1: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:19:21.800

您的问题是您正在遍历所有控件，并且您的某些控件没有 Value 属性。

尝试这样的事情：

```
For Each ctl In Me.frPriority.Controls
   If TypeOf ctl Is msforms.OptionButton Then
        If ctl.Value = True Then GoTo nxtCheck1
   End if
Next 
```

# objective-c - How to call pickerView: didSelectRow: inComponent: without user interaction?

> ID：13075474
> 
> 赞同：3
> 
> 时间：2012-10-25T19:05:47.450
> 
> 标签：objective-c, ios, uipickerview

I have a 2 components, dependent `pickerView`. I have a preview `UIImageView` that changes each time the user uses the `pickerView` (and triggers the `didSelectRow:inComponent:`). This works just as I expected.

However, I want the `pickerView` to trigger `didSelectRow:` when the app launches, so that there is a Preview the moment the user sees the `UIImageView`. In `viewDidLoad`, when I try this:

```
[self pickerView:picker didSelectRow:row inComponent:component]; // row and component have 0 values. 
```

next thing that happens - the `pickerView` shows up blank! Remove this line, and it works perfectly again. I tried this as well:

```
[picker selectRow: row inComponent:component animated:NO]; 
```

thinking that it will trigger `didSelectRow:` however it doesn't trigger it and my `UIImageView` remain blank.

Any advice on how to call the `didSelectRow:` method without the users help?

**Update**: by the way, the picker is inside another `UIView` (not the main one). In case it matters.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T19:32:43.780

`didSelectRow:...`*只有当用户交互*选择了一行时才会调用。如果您以编程方式选择一行，`selectRow:...`那么您必须添加自己的逻辑来更新其他组件，例如图像视图。

该原则适用于许多其他委托功能，例如`tableView:didSelectRowAtIndexPath:`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T19:25:51.920

根据您的评论，这就是您正在寻找的内容。 [UIPickerView 的 selectRow:inComponent:animated: 是否调用 pickerView:didSelectRow:inComponent:？](https://stackoverflow.com/questions/7001738/does-uipickerviews-selectrowincomponentanimated-call-pickerviewdidselectrow)

您必须手动调用该`didSelectRow`方法。

# java - Error when creating a Jasper file from database

> ID：13075475
> 
> 赞同：1
> 
> 时间：2012-10-25T19:05:51.043
> 
> 标签：java, jasper-reports

I have a multi module project where it read a byte array column from database and create a jasper file to sent it to email.

From my web application it works perfectly, but when running from my Java SE application I'm getting the following error:

```
Caused by: java.lang.RuntimeException: net.sf.jasperreports.engine.JRException: Error loading object from file : D:\file.jasper
    at com.project.RReportJasper.gerarJasperPrint(RReportJasper.java:78)
    at com.project.RReportJasper.gerarJasperPrint(RReportJasper.java:53)
    at com.project.RReportJasper.geraRelatorioPDF(RReportJasper.java:29)
    at com.project.RGenerate.geraRelatorio(RGenerate.java:63)
    at com.project.AbstractUtil.gerar(AbstractUtil.java:44)
    at com.project.util.Util.gerar(DameUtil.java:66)
    at com.project.mail.EnvioEmailAbstractBase.montarAnexo(EnvioEmailAbstractBase.java:514)
    ... 16 more 
```

The weird is when reading from my web application, the return of bytes from database is **120323** bytes and when the Java SE application read this, the size is **240645** (double size)

Here is my entity class:

```
@Entity
@Table(name= "arquivo")
public class EArquivo  extends TransferObject<Long> {

    private static final long serialVersionUID = -183345111110383391L;

    private byte[] arquivo;
    private String nome;

    @Override
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO, generator = "arquivo_id_seq")
    @SequenceGenerator(name = "arquivo_id_seq", allocationSize = 1, sequenceName = "arquivo_id_seq")
    @Column(name = "id_arquivo")
    public Long getId() {
        return id;
    }   

    @Column (name = "arquivo")
    public byte[] getArquivo() {
        return arquivo;
    }

    public void setArquivo(byte[] arquivo) {
        this.arquivo = arquivo;     
    }

    @Column(length=80)
    @Basic(fetch = FetchType.LAZY)
    public String getNome() {
        return nome;
    }

    public void setNome(String nome) {
        this.nome = nome;
    }

    @Transient
    public File getFile() throws NotFoundException {
        File file = null;
        try {
            if(arquivo == null){
                return null;
            }
            byte[] bytes = arquivo;
            if (bytes.length == 0) {
                throw new NotFoundException("Not found for: " + getFilial().getCnpj());
            }
            String cnpj = getFilial().getCnpj();

            file = Arquivo.createTempFile("file-" + cnpj + "-", ".jasper");
            FileOutputStream fos = new FileOutputStream(file);
            fos.write(bytes);
            fos.flush();
            fos.close();
            FileCleaner.track(file, file);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        return file;
    }
} 
```

Someone have any idea of what might be this problem?

**EDIT**: Add how I get the file in my bean

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:19:07.763

问题是 Postgres jar。

在我的 Web 容器中，版本是 9.1，在我的 Java SE 应用程序中是 8.4。当我更新我的应用程序以使用 9.1 时，问题就解决了。

# silverlight - How to change data in a Silverlight DataContext Object

> ID：13075476
> 
> 赞同：0
> 
> 时间：2012-10-25T19:05:51.010
> 
> 标签：silverlight

I have a datacontext object that displays a list of uploaded files, and number of copies. So far, the user can click an edit icon that is in each row, and retrieve the data in that row, but I do not know how to change any data.

**Here is the button event for the 'change details' dialog on the main page:**

```
 private void Image_MouseLeftButtonUp_1(object sender, MouseButtonEventArgs e)
    {
        Image b = sender as Image;
        FileReceivedItem fi = b.DataContext as FileReceivedItem;
        string fileCopies = fi.fileCopies;
        string fileName = fi.FileName;
        DetailsWindow detailsDlg = new DetailsWindow(fileCopies, fileName);
        detailsDlg.Show();
        detailsDlg.Closed += new EventHandler(detailsWnd_Closed);
    }

    public DetailsWindow detailsDlg;
    void detailsWnd_Closed(object sender, EventArgs e)
    {
        MessageBox.Show("I want to change fileCopies here");
    } 
```

**The relevant portions of the XAML:**

```
 <ListBox ScrollViewer.HorizontalScrollBarVisibility="Hidden"  ItemsSource="{StaticResource FileReceivedItem}"  Name="filesReceivedList" HorizontalAlignment="Left"  Grid.Row="1" Grid.Column="1"  Background="White" Margin="12,23,0,0"
     VerticalAlignment="Top" Width="411" Height="175" Loaded="filesReceivedList_Loaded">

        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Width="404" Height="19" Orientation="Horizontal" >
                    <TextBlock x:Name="ListFileName" Text="{Binding FileName}" Width="283"  VerticalAlignment="Center">
                        <ToolTipService.ToolTip>
                            <ToolTip Content="{Binding FileName}"></ToolTip>
                        </ToolTipService.ToolTip>
                    </TextBlock>
                    <TextBlock Text="{Binding fileCopies}" Width="50"  VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding FileID}" Width="0" Visibility="Collapsed"  VerticalAlignment="Center"/>

                    <Image Source="images/Edit.png" MouseLeftButtonUp="Image_MouseLeftButtonUp_1" Width="20" Margin="0 0 0 0">
                        <ToolTipService.ToolTip>
                            <ToolTip Content="Edit"></ToolTip>
                        </ToolTipService.ToolTip>
                    </Image>

                    <TextBlock Text="" Width="10" />

                    <Image Source="images/Delete.png" MouseLeftButtonUp="Image_MouseLeftButtonUp" >
                        <ToolTipService.ToolTip>
                            <ToolTip Content="Delete"></ToolTip>
                        </ToolTipService.ToolTip>
                    </Image>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

Let me know if any important pieces of code are missing. I'm not sure how the data source works exactly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:18:28.370

我最终让它工作了。很简单。我只是没有在ahwile中使用过SL。这就是我所做的，尽管有人可能会提供更好的方法作为更好的答案：

```
 void detailsWnd_Closed(object sender, EventArgs e)
    {
        changeFileCopies(detailsDlg.FileName, detailsDlg.nCopies.Text);
    }

    public void changeFileCopies(string filename, string newCopies)
    {
        var row = (FileReceivedItem)filesReceivedDataSource.Where(x => x.FileName == filename).FirstOrDefault();
        row.fileCopies = newCopies;
        filesReceivedList.ItemsSource = null;
        this.filesReceivedList.ItemsSource = filesReceivedDataSource;
    } 
```

# jquery - Jquery 数组，追加和鼠标悬停问题

> ID：13075481
> 
> 赞同：0
> 
> 时间：2012-10-25T19:06:12.943
> 
> 标签：jquery, arrays, append, mouseover

我基本上正在制作幻灯片，一旦用户相应地点击导航，数组元素就会显示给给定的按钮。

```
 var modules ={};
    modules[0] = new Array();
    modules[0][0] ="content 1 - 0";
    modules[0][1] ="content 1 - 1";
    modules[0][2] ="content 1 - 2";
    modules[0][3] ="content 1 - 3";

    modules[1] = new Array();
    modules[1][0] ="content 2 - 0";
    modules[1][1] ="content 2 - 1";
    modules[1][2] ="content 2 - 2";
    modules[1][3] ="content 2 - 3";
    modules[1][4] ="content 2 - 4";

        $(".container").mouseover(function(){
            var number = $(".container").index(this);
            jQuery.each(modules[number], function(index,value){
                $(".details").eq(0).append("<div class='details-word'>" + value + '</div>');
            })
        });

}) 
```

我使用数字来跟踪用户鼠标悬停在哪个按钮上，并且每个数组都将包含详细信息 div。使用此代码，详细信息容器会不断从数组中获取重复内容。我想我的代码有问题，但不知道如何修复它......

我还是 jquery 的新手，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:32:26.143

解决了，我使用悬停而不是鼠标悬停，并使用 .remove() 删除附加。

# asp.net-mvc - 在 MVC3 中，我试图让我的 dropdownlistfor 的值为零，而不是开始“请选择 ...”的空字符串

> ID：13075484
> 
> 赞同：-1
> 
> 时间：2012-10-25T19:06:16.220
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html.dropdownlistfor

如何使第一个选项值为零而不是空字符串。因此，当用户进入表单并且没有选择任何内容时，值将像零一样传递。我是 MVC 的新手，花了很多时间试图找到一个简单的答案。这可以在 Jquery 中完成吗？任何建议将不胜感激。

这是我的观点

```
@Html.DropDownListFor(x => x.ItemCatId,
 new SelectList(Model.CategoryddList, "Value", "Text"),
 "Select Category") 
```

和控制器

```
items.CategoryddList =
        itemsRepository.GetItemDdl("Item Categories").Select(c => new SelectListItem 
                        {
                           Value = c.DropdownID.ToString(),
                           Text = c.DropdownText
                        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:01:52.210

像许多问题一样，有很多方法可以做到这一点。Jquery 和 Javascript 是一种选择。对我来说最快（也是懒惰）的方法是在列表顶部添加一个额外的项目，其值为“请选择”。我不知道你的门面是如何工作的，但它应该是这样的

```
items.CategoryddList = new Category( null , 0, “Please Select …”); //add the default
//rest of your code
items.CategoryddList =
    itemsRepository.GetItemDdl("Item Categories").Select(c => new SelectListItem 
                    {
                       Value = c.DropdownID.ToString(),
                       Text = c.DropdownText
                    }); 
```

请记住，您还必须在 HTTPPost 操作中处理这种情况。

另一种方法是不使用剃须刀 @Html.DropDownListFor 并使用其中包含 foreach 的 HTML。稍后我将尝试查找其他方法来执行此操作

编辑：这是从视图中执行此操作的另一种方法（我现在找不到快速的 Jquery 代码）。试试这个：

```
<select name="FOOName"  id="FOOName" onchange="test(this)">
   <option value=""> Please Select</option>
   @{ foreach (var type in Model.CategoryddList)
   { 
    <option value="@type.Value"> @type.Text </option>
   }
}
</select> 
```

# css - 是否有实现垂直滚动的标准方法，可以在常规和移动浏览器之间无缝工作？

> ID：13075486
> 
> 赞同：1
> 
> 时间：2012-10-25T19:06:18.297
> 
> 标签：css, scroll

我需要在我的站点的音频播放器中实现垂直滚动。我以最简单的方式完成了它（在我看来）。

我为窗口保持了恒定的高度，并使溢出“自动”：

```
overflow: auto;
height: 333px; 
```

它适用于我可以测试的所有版本的 IE、Firefox、Chrome。（在 Windows 操作系统中）。它在右侧给了我一个小滚动条。

![在常规浏览器中滚动](../Images/cd99064629cce99eda544134e2767ca9.png)

在移动（触摸）浏览器中，我不认为滚动条是一个单独的实体。我可以触摸其中一个列表项并向上或向下拖动。这会滚动列表。问题是，这种滚动方式在某些手机上提供了良好的体验，而在其他手机上提供了非常差的体验。

例如：在 iPhone (Safari) 中，它运行良好。在三星 Galaxy (Firefox) 中，它非常糟糕。在我猜是 Opera 的本机浏览器中情况更糟。

触控方面，我认为，两款手机都不错。但是当谈到这个滚动功能时，可用性就会有所不同。最糟糕的是，除非我随身携带设备，否则我无法对此进行测试。

是否有一种标准方法可以在常规和移动浏览器之间无缝滚动？

感谢您的帮助。

# typescript - 如何告诉 TypeScript 动态添加属性？

> ID：13075487
> 
> 赞同：8
> 
> 时间：2012-10-25T19:06:18.290
> 
> 标签：typescript, marionette

我在打字稿中使用 Backbone.Marionette。我已经写了我自己的木偶类型描述。

```
var ProviderSpa = new Backbone.Marionette.Application();
ProviderSpa.addRegions({
    'servicesRegion': "#services-offered"
});
ProviderSpa.servicesRegion.show(); 
```

我的问题是 addRegions 具有向 ProviderSpa 添加属性的副作用，TypeScript 不知道，因此它抱怨“Backbone.Marionette.Application”类型的值上不存在“属性“servicesRegion”。

我如何告诉 TypeScript 这些动态属性添加到一个类型的实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:24:25.217

在这个例子中，我使用了 BackBone Marionette 的简化定义。

如果你有很多动态属性被添加到一个对象中，你可能希望让事情保持动态，而不是尝试为它们创建声明或接口——尤其是保持声明与新属性保持同步的开销与好处对实际上是动态属性的内容进行静态类型不是我愿意付出的代价。

在此示例中，使用方括号语法访问属性意味着它无需声明即可通过类型检查。重要的一点在最后一行。

您可以在[TypeScript 游乐场](http://www.typescriptlang.org/Playground/)上进行测试。

```
declare module Backbone {
    export module Marionette {
        export class Application {
            addRegions(regions: any): void;
        }
    }
}

var servicesRegion = 'servicesRegion';
var ProviderSpa = new Backbone.Marionette.Application();
ProviderSpa.addRegions({
    servicesRegion: "#services-offered"
});
ProviderSpa[servicesRegion].show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T05:24:12.680

实际上，TypeScript 和 Marionette 是相得益彰的。
这里的关键是考虑类而不是动态属性。考虑到这一点，您上面的代码变成了这样：

```
class ProviderSpa extends Marionette.Application {
 servicesRegion: Marionette.Region;
 constructor(options?: any) {
  super(options);
  this.addRegions( { servicesRegion: "#services-offered" });
}
}

var providerSpa = new ProviderSpa();
providerSpa.show(); 
```

**更新：**
我刚刚发布了一篇关于[TypeScript 的博客文章的第 1 部分：使用 Backbone.Marionette 和 RESTful WebAPI。](http://blorkfish.wordpress.com/2014/03/22/typescript-using-backbone-marionette-and-rest-webapi-part-1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:19:58.760

TypeScript 类型系统不能考虑运行时影响，因为 TypeScript 类型仅在编译时存在。您必须在编译时适当地键入 ProviderSpa。也许最简单的方法是为 ProviderSpa 创建一个具有 addRegions 和 servicesRegion 类型的接口，以便您可以执行以下操作：

```
interface IProviderSpa { servicesRegion: ...; addRegions: ...; };
var ProviderSpa = <IProviderSpa> new Backbone.Marionette.Application(); 
```

如果 Marionette 有一个应用程序的接口类型，你甚至可以像下面这样扩展它：

```
interface IProviderSpa extends Backbone.Marionette.IApplication { ... } 
```

# mysql - 为什么'1.66'在双字段中与 MySQL 中的 1.66 不匹配？

> ID：13075491
> 
> 赞同：4
> 
> 时间：2012-10-25T19:06:28.307
> 
> 标签：mysql, perl, dbi

我想知道，为什么我使用 DBI 在 Perl 代码中形成的查询没有返回正确的记录。我有简单的查询，例如：

```
my $query = "SELECT id FROM table WHERE title = ? AND price = ?"; 
```

我像这样执行它：

```
my $sth = $dbh->prepare( $query );
my ($id) = $dbh->selectcol_arrayref( $sth, undef, $title, $price ); 
```

大多数时候一切正常，但在极少数情况下，我没有得到预期的结果。所以我也从 CLI 尝试过。具有可疑值的完整查询：

```
SELECT id FROM table WHERE title = 'Some title' AND price = 1.66; 
```

并获得了想要的记录。之后我也**引用**了价格：

```
SELECT id FROM table WHERE title = 'Some title' AND price = '1.66'; 
```

结果是**零**记录。

之后，我尝试了其他报价值，例如“1.67”，它们运行良好。

这里有什么问题？为什么这样简单的查询会失败？为了重现行为，我将简单的模式和查询放到[sqlfiddle 上](http://sqlfiddle.com/#!8/b7847/7/0)，如您所见，简单的查询`SELECT * FROM Table1 WHERE price = '1.66' OR price = '1.67';`只给出一个结果。

我觉得，这可能与双数据类型的性质有关（1.66 表示为 1.66666666...？），但是当我在 DBI 中使用占位符时，我应该如何形成我的查询？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T19:54:49.510

您永远不应该比较浮点数是否相等。您应该使用公差。`numeric`要么使用容差，要么从浮点数切换（到`text`或 中的分`integer`）。

# android - Phonegap闹钟应用

> ID：13075492
> 
> 赞同：0
> 
> 时间：2012-10-25T19:06:30.523
> 
> 标签：android, cordova, jquery-mobile, phonegap-plugins

我正在使用 jquery mobile 和 phonegap 开发一个闹钟应用程序。当用户单击**SET ALARM 按钮**时，我正在向 HTML5 localStorage 添加警报时间，并且我正在使用 setTimout 调用递归函数。在递归函数中，我现在正在比较用户设置的闹钟时间。它穿着很棒。但是这种情况在应用程序每次运行时都是有效的。**我的应用程序如何在后台工作？** 当用户设置警报时，用户不应随时关闭我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:30:30.630

考虑使用 localNotification 插件。

# ruby-on-rails - 通过多个表获取记录

> ID：13075494
> 
> 赞同：1
> 
> 时间：2012-10-25T19:06:48.277
> 
> 标签：ruby-on-rails

该图像显示了我的数据模型的一部分。我想获取与用户关联的所有项目（通过组织和 items_group）。我应该如何更改模型并在控制器中编写此查询？使用 :through => organizations 我可以获得所有 items_groups 但我不知道如何包含与查询相关项目的另一个关系。

![在此处输入图像描述](../Images/0bfe198a371dd94652eab0c00514b7c1.png)

```
class User < ActiveRecord::Base           
  has_and_belongs_to_many :organizations
  has_many :items_groups, :through => :organizations         
end

class Organization < ActiveRecord::Base
  has_and_belongs_to_many :users
  has_and_belongs_to_many :items_groups
  has_many :items, :through => :items_groups  
end

class ItemsGroup < ActiveRecord::Base  
  has_many :items, :inverse_of => :items_group
  has_and_belongs_to_many :organizations
  has_many :users, :through => :organizations             
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:58:27.713

我认为您可能必须从头到尾进行操作，并找到加入用户的项目。

您可以在 User 类中定义这样的方法：

```
def items
  Item.joins(:items_group => {:organizations => :users}).where("users.id" => self.id).select("distinct items.*")
end 
```

由于显式，它返回的项目将是只读的，`select`但我认为您希望避免多次返回单个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:29:21.757

如果您在模型中设置关系，这应该有效：

```
users.organizations.item_groups.items 
```

尽管要使其正常工作，您的模型应包含以下内容：

```
class User < ActiveRecord::Base         
  has_many :organizations, :through => :organization_users
end

class Organization < ActiveRecord::Base
  has_many :item_groups, :through => :items_groups_organizations
end

class ItemsGroup < ActiveRecord::Base  
  belongs_to :item
end 
```

希望对你有帮助！

# python - 无法通过 Selenium Hub 获取 Chrome

> ID：13075496
> 
> 赞同：1
> 
> 时间：2012-10-25T19:06:55.153
> 
> 标签：python, selenium, webdriver, selenium-webdriver

我正在使用 Selenium Webdriver，2.25 我有一个本地集线器，使用 chrome 和 firefox 的这个 json 设置：

```
[
    {
        "browserName": "firefox",
        "maxInstances": 5,
        "seleniumProtocol": "WebDriver"
    },
    {
        "browserName": "chrome",
        "maxInstances": 5,
        "seleniumProtocol": "WebDriver"
    }
], 
```

我可以像这样启动 webdriver firefox 会话：

```
capability = getattr(webdriver.DesiredCapabilities, "FIREFOX")
dd=webdriver.Remote('http://localhost:4444/wd/hub', capability) 
```

效果很好，但是如果我尝试像这样启动 Chrome 会话：

```
capability = getattr(webdriver.DesiredCapabilities, "CHROME")
dd=webdriver.Remote('http://localhost:4444/wd/hub', capability) 
```

我收到此错误：

> 回溯（最后一次调用）：文件“”，第 1 行，文件“/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py”，第 62 行，**init** self.start_session(desired_capabilities, browser_profile) 文件“/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py”，第 104 行，在 start_session 'desiredCapabilities'：desired_capabilities，文件“/ usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py”，第 155 行，在执行 self.error_handler.check_response(response) 文件“/usr/local/lib/python2.7 /dist-packages/selenium/webdriver/remote/errorhandler.py"，第 147 行，在 check_response 中引发 exception_class(message, screen, stacktrace) selenium.common.exceptions.WebDriverException: Message: None ; Stacktrace：方法 innerGet 在 None 中抛出错误

但我可以像这样直接连接到 Chrome：

```
dd=webdriver.Chrome() 
```

没有任何问题。

如何通过我的 Selenium Hub 访问 Chrome？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:48:11.300

我有完全相同的问题。

问题是，与 Firefox 不同，Chrome 需要单独的 chromdriver.exe 来充当浏览器和驱动程序之间的桥梁。

从文档中：

> ChromeDriver 由三个独立的部分组成。有浏览器本身（“chrome”）、Selenium 项目提供的语言绑定（“驱动程序”）和从 Chromium 项目下载的可执行文件，它充当“chrome”和“驱动程序”之间的桥梁。此可执行文件称为“chromedriver”，但我们将尝试在此页面中将其称为“服务器”以减少混淆。

[在此处下载 chromdriver.exe](http://code.google.com/p/chromedriver/downloads/list)

并将其放入您的 chrome 二进制目录中。

然后，我使用 .bat 文件通过以下列表启动我的集线器：

```
java -Dwebdriver.chrome.driver="C:\Program Files (x86)\Google\Chrome\Application\chromedriver.exe" -jar D:\soft\selenium-server-standalone-2.29.0.jar 
```

然后我在我的 Linux 机器上执行以下 Python 代码，一旦我将 chromedriver.exe 放入 Chrome 目录并使用正确的路径参数启动集线器，它就可以完美运行：

```
from selenium import webdriver
url = "http://192.168.1.115:4444/wd/hub"
driver = webdriver.Remote(command_executor = url, desired_capabilities = {'browserName':'chrome'})
driver.get("http://google.com") 
```

希望这可以帮助您和其他有同样问题的人。找到解决方案当然是不要把firefox的方法和RTFM视为理所当然： [Chrome驱动文档](http://code.google.com/p/selenium/wiki/ChromeDriver)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:25:09.853

您需要设置 chrome 驱动程序，有关此的信息[here](http://code.google.com/p/selenium/wiki/ChromeDriver)

**更新**

* * *

根据第一个链接中提供的[示例 json 设置文件](http://code.google.com/p/selenium/source/browse/trunk/java/server/src/org/openqa/grid/common/defaults/DefaultNode.json) 和步骤，浏览器名称似乎不应该是大写，实际上是小写。

所以`CHROME`改为`chrome`

例子

```
WebDriver driver = new RemoteWebDriver("http://localhost:9515", DesiredCapabilities.chrome());
driver.get("http://www.google.com"); 
```

在你的情况下，我会假设

```
dd=webdriver.Remote('http://localhost:4444/wd/hub', DesiredCapabilities.chrome()) 
```

# javascript - Dojo 中 jQuery .css() 的替代方案

> ID：13075497
> 
> 赞同：3
> 
> 时间：2012-10-25T19:06:58.920
> 
> 标签：javascript, jquery, css, dojo, element

我目前正在大学里从事一个只允许使用的项目`Dojo`（1.8 版）。我有以下问题：我需要在 javascript 代码中设置元素 css。那么， for 中的任何替代`Dojo`方案`jQuery.css()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:09:33.820

看起来您正在寻找模块中的`set`功能`dojo/dom-style`：

[http://dojotoolkit.org/reference-guide/1.8/dojo/dom-style.html#dojo-dom-style-set](http://dojotoolkit.org/reference-guide/1.8/dojo/dom-style.html#dojo-dom-style-set)

只是一件事，您尝试做的正确术语是设置元素的内联样式。CSS 只是用于编写样式表的语言。

# error-handling - 在 FQL 查询中使用大于

> ID：13075501
> 
> 赞同：0
> 
> 时间：2012-10-25T19:07:14.000
> 
> 标签：error-handling, facebook-fql

谁能告诉我为什么会这样：

```
https://graph.facebook.com/fql
?q=SELECT display_name FROM application WHERE app_id=0&access_token=... 
```

（显然返回 0 个结果）

但这不是：

```
https://graph.facebook.com/fql
?q=SELECT display_name FROM application WHERE app_id>=0&access_token=... 
```

(HTTP 500)

Facebook 本身的 FQL 页面只提供最简单的查询——它们从不提供涉及 strpos() 和除 = 之外的任何更复杂查询的示例。

我知道需要处理索引列，但 app_id 绝对是其中之一:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:09:37.953

如果该列是可索引的，您仍然需要为其提供特定值。如果您可以提供模糊的范围（例如“> 0”），它将打破要求您先指定目标对象，然后再过滤的限制

# javascript - 在 div 中包含 script 标签是不是很糟糕？

> ID：13075502
> 
> 赞同：28
> 
> 时间：2012-10-25T19:07:25.033
> 
> 标签：javascript, html

在body里面的div里面有一个script标签有什么不好的？

我正在动态更新 div 以在 div 中重新加载 javascript 代码。有什么问题需要担心吗？

* * *

# 编辑

正如@Bergi 坚持要查看代码。在这里（见下文）。这`div`（连同其他`div`包含演示 HTML 元素）通过 AJAX 更新。这`script`里面`div`包含地图来处理页面上新加载的 HTML 元素和原始数据。

```
 <div>
            <script type="text/javascript">
                var namesMap = <dynamic string from server here>;
                var addressesMap = <dynamic string from server here>;
            </script>
        </div> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-25T19:10:49.650

`<script>`将标签放置在文档正文中的任何位置都是完全可以的。

从[这里开始](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.1)，

> SCRIPT 元素将脚本放置在文档中。这个元素可以在 HTML 文档的 HEAD 或 BODY 中出现任意次数。

但是，无论何时出现`<script>`标签，它都会暂停代码解析，直到脚本被加载并执行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-25T19:10:32.670

您可以`<script></script>`在 DIV 标签内添加。只需检查 w3c，它是有效的 HTML。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-25T19:11:14.190

没什么不好的。大多数小部件都以这种方式工作。它仍然是有效的 HTML。

如果您想在网页中嵌入 AdSense 单元，则需要这样做。亚马逊小部件也是如此。这意味着大多数网站在 div 中都有一个 script 标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-15T03:18:35.133

将脚本放入 html 中有利有弊。好处是可以将一个小脚本放置在使用它的位置附近，这样您就可以更轻松地了解页面在做什么。

我认为，如果除了那个位置之外没有其他人需要该脚本，那么将它放在那里就可以了。

不好的是，当您将程序的各个部分分成多个位置时，查看和管理这些部分如何相互作用和相互干扰变得更加困难。然而，如果您将 html 和 javascript 保存在单独的文件中，则更容易独立理解它们，然后最终关注它们如何相互交互。它们之间的“接口”是什么。

如果 JavaScript 散布在 html 中，那么您不能将脚本代码与组织 HTML 分开组织。

还有一点需要注意：如果你有一个 DIV，你可能会认为你可以通过重新分配它的 innerHTML 来操纵它的内容。这很有效，但您不能以这种方式将脚本注入 DIV。看：

[可以用 innerHTML 插入脚本吗？](https://stackoverflow.com/questions/1197575/can-scripts-be-inserted-with-innerhtml)

因此，在 DIV 中包含脚本的一件坏事是，您无法通过重新分配其 innerHTML 来替换此类脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-23T08:38:24.353

通过里面的脚本`<DIV>`仍在工作。但是你的布局有些恼火 - 滚动时摇晃。最佳解决方案：将脚本放入`<body>`或`<head>`：D

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-25T19:11:19.183

尝试将`<script></script>`标签放入`<head></head>`. 然而，最近出现了是否将标签放在标签末尾的争论`<body></body>`，就在之前会使页面更快。

我建议将你的`<script></script>`in`<head></head>`部分放在你的 HTML 文档中，因为它更受欢迎。此外，将一个`<script></script>`放在 DIV 中并不是一个好习惯。

您可以发布您的示例以获得关于组织文档结构的更好答案。

总而言之，你所做的没有问题。但我建议采用更有条理的方式。

# xsd - JAXB Schema 设计，具有枚举动态值

> ID：13075503
> 
> 赞同：1
> 
> 时间：2012-10-25T19:07:26.330
> 
> 标签：xsd, jaxb, schema

我有以下架构

```
<xs:simpleType name="enumType">    
    <xs:restriction base="xs:string">    
        <xs:enumeration value="STRING_ONE"/>
        <xs:enumeration value="STRING_TWO"/>
    </xs:restriction>
</xs:simpleType> 
```

只要我得到一个已知的字符串，我就可以将它切换到我的 jaxbobject ，它需要一个`enumType`对象。但是如果我不知道这个字符串怎么办？有没有办法基于 JAXB Schema 来处理它？我知道基于枚举这是不可能的。

* * *

**编辑**：试图让它更清楚

对于给定的 Schema 设计，我的 JAXBObject 接受`enumType`作为参数，只能有 2 个输入值，即 STRING_ONE 或 STRING_TWO，它们将作为编组的一部分转换为 XML。

问题是，如果我想通过我的模式设计来处理一种情况，如果我可以有一个`enumType`好的对象，否则我可以给 JAXBObject 一个 XML，而不是`enumType`它仍然解析它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:27:26.293

从 XSD 的角度来看，听起来您希望能够编写

```
<xs:simpleType name="soft-enumeration">
  <xs:union>
    <xs:simpleType>
      <xs:restriction base="xs:string">
        <xs:enumeration value="STRING_ONE"/>
        <xs:enumeration value="STRING_TWO"/>
      </xs:restriction>
    </xs:simpleType>
    <xs:simpleType>
      <xs:union memberTypes="xs:string"/>
    </xs:simpleType>
  </xs:union>
</xs:simpleType> 
```

此类型包括您描述的枚举，但随后将其与 xs:string 联合，以便也接受其他值。如果您的模式接口允许您访问有关使用了哪个联合成员类型的信息，那么您可以使用该信息将 STRING_ONE 和 STRING_TWO 的实例与其他字符串区别对待。

但是，我不知道 jaxb 是否对这个习语有用。在那里你自己。

# mysql - MySql：是否可以“SUM IF”或“COUNT IF”？

> ID：13075505
> 
> 赞同：111
> 
> 时间：2012-10-25T19:07:43.147
> 
> 标签：mysql

我有一列“小时”我有一列“种类”（可以是 1,2 或 3）

我想做类似的事情：

```
SELECT count(id), SUM(hour) as totHour, SUM( IF ( kind = 1, 1, 0 ) ) as countKindOne 
```

或者

```
SELECT count(id), SUM(hour) as totHour, COUNT( IF ( kind = 1 ) ) as countKindOne 
```

但是mysql告诉我我有一个错误......错误是什么！？

请参阅此 stackoverflow 主题：[MySQL SUM IF field b = field a](https://stackoverflow.com/questions/9083283/mysql-sum-if-field-b-field-a)

..我无法回复这个...

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-10-25T19:13:12.150

您可以使用以下`CASE`语句：

```
SELECT count(id), 
    SUM(hour) as totHour, 
    SUM(case when kind = 1 then 1 else 0 end) as countKindOne 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-10-25T19:09:10.287

你想要类似的东西：

```
SELECT count(id), SUM(hour) as totHour, SUM(kind=1) as countKindOne; 
```

请注意，您的第二个示例很接近，但 IF() 函数*始终*采用三个参数，因此它必须是`COUNT(IF(kind=1,1,NULL))`. 我更喜欢上面显示的 SUM() 语法，因为它很简洁。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2015-05-31T02:27:26.087

您也可以使用`SUM + IF`which is short than `SUM + CASE`：

```
SELECT
    count(id)
    , SUM(IF(kind=1, 1, 0)) AS countKindOne
    , SUM(CASE WHEN kind=2 THEN 1 ELSE 0 END) AS countKindTwo 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-10-18T07:38:12.683

最佳答案之间存在细微差别，即`SUM(case when kind = 1 then 1 else 0 end)`和`SUM(kind=1)`。

当列中的所有值`kind`恰好是`NULL`时，结果`SUM(case when kind = 1 then 1 else 0 end)`是`0`，而结果`SUM(kind=1)`是`NULL`。

一个例子（[http://sqlfiddle.com/#!9/b23807/2](http://sqlfiddle.com/#!9/b23807/2)）：

架构：

```
CREATE TABLE Table1
(`first_col` int, `second_col` int)
;

INSERT INTO Table1
    (`first_col`, `second_col`)
VALUES
       (1, NULL),
       (1, NULL),
       (NULL, NULL)
; 
```

查询结果：

```
SELECT SUM(first_col=1) FROM Table1;
-- Result: 2
SELECT SUM(first_col=2) FROM Table1;
-- Result: 0
SELECT SUM(second_col=1) FROM Table1;
-- Result: NULL
SELECT SUM(CASE WHEN second_col=1 THEN 1 ELSE 0 END) FROM Table1;
-- Result: 0 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-29T14:28:00.263

从MYSQL我解决了这样的问题：

```
SUM(CASE WHEN used = 1 THEN 1 ELSE 0 END) as amount_one, 
```

希望这会有所帮助：D

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-25T08:25:47.960

值得注意的是，您可以通过使用查询中的多个字段来构建 Gavin Toweys 的答案，例如

`SUM(table.field = 1 AND table2.field = 2)`

您也可以使用此语法`COUNT`，我相信其他功能也是如此。

# internationalization - zend framework 2 从视图 PhpRenderer 获取语言环境

> ID：13075506
> 
> 赞同：0
> 
> 时间：2012-10-25T19:07:49.133
> 
> 标签：internationalization, zend-framework2, zend-view, zend-translate, zend-locale

在我看来，如何获得翻译语言环境？

我想从变量 $this （视图的 PhpRenderer）开始。即我不想使用 onBootstrap 或 ActionController 因为我不在乎有一个视图变量。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T22:36:36.990

你应该试试：

```
<?php echo \Locale::getDefault(); ?> 
```

许多 I18n 类都引用了 PHP 的 Locale 类 (http://www.php.net/locale) - 所以在我看来，这将是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T06:55:10.437

```
<?php echo $this->plugin('translate')->getTranslator()->getLocale(); ?> 
```

请参阅： [在 Zend Framework 2 中的布局或视图中获取本地值](https://stackoverflow.com/questions/20088050/get-local-value-in-layout-or-view-in-zend-framework-2)

# facebook - 使用 FQL 获得我所有家人的喜欢（粉丝页面）

> ID：13075507
> 
> 赞同：0
> 
> 时间：2012-10-25T19:07:51.627
> 
> 标签：facebook, facebook-like, facebook-fql

我正在尝试获取我家人喜欢的粉丝页面列表。我在用着：

```
SELECT uid, page_id, type FROM page_fan WHERE uid IN (SELECT uid FROM family WHERE profile_id = me()) 
```

但是，它没有给我页面的名称。我能做些什么？

我得到：

```
 "data": [
    {
      "uid": 100000920150807, 
      "page_id": 147629621952548, 
      "type": "SPORT"
    }, 
    {
      "uid": 1342682182, 
      "page_id": 175822015800898, 
      "type": "INTEREST"
    },... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:26:02.093

您可以使用多重查询一次从两个表中获取数据：

```
{"family_page_likes":
    "SELECT uid, page_id, type FROM page_fan WHERE 
       uid IN (SELECT uid FROM family WHERE profile_id = me())",
 "page_names":
     "SELECT page_id, name, description FROM page WHERE 
        page_id IN (SELECT page_id FROM #family_page_likes)"} 
```

# mysql - 查找每人的第一、第二、第三等记录

> ID：13075511
> 
> 赞同：2
> 
> 时间：2012-10-25T19:08:05.737
> 
> 标签：mysql, rows

我在人与人之间建立了一对多的关系，并记录了他们。每人可以有 0 个或多个便笺。

我需要将所有笔记放在一个字段中，因为不会有很多人有笔记，我计划每人只带入前 3 个笔记，我认为我最多可以使用 3 个查询来收集我所有的信息。

我的问题是将 mySQL 查询放在一起以获得每个人的第一个、第二个等注释。

我有一个查询，让我知道每个人有多少笔记，我的桌子上有。我尝试了类似的东西

```
SELECT
 f_note, f_person_id
FROM
 t_person_table,
 t_note_table
WHERE
 t_person_table.f_number_of_notes > 0
 AND t_person_table.f_person_id = t_note_table.f_person_id
GROUP BY
 t_person_table.f_person_id
LIMIT 1 OFFSET 0 
```

我曾希望最多运行 3 次，将 OFFSET 更改为 1，然后更改为 2，但我得到的只是返回一个音符，而不是每人一个音符。

我希望这很清楚，如果不继续阅读示例：

我有 3 个人在桌子上。一个人 (A) 有 0 个音符，一个 (B) 有 1 个音符，一个 (C) 有 2 个音符。

首先，我会得到 B 和 C 的第一个注释，并将它们插入到我的人员表注释字段中。

然后我会得到人 C 的第二个注释，并将其添加到人员表的注释字段中。

最后，我会为 B 和 C 提供注释，其中 C 的注释字段将是他们的 2 个注释的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:53:33.710

您可以使用这样的嵌套查询为每个人获取一张便条：

```
SELECT
 f_person_id,
 (SELECT f_note
  FROM t_note_table
  WHERE t_person_table.f_person_id = t_note_table.f_person_id
  LIMIT 1) AS note
FROM
 t_person_table
WHERE
 t_person_table.f_number_of_notes > 0 
```

请注意，SQL 中的表基本上没有定义的固有顺序，因此您应该使用某种形式或`ORDER BY`在子查询中。否则，您的结果可能是随机的，并且要求不同注释的重复运行可能会意外返回相同的数据。

如果您在任何情况下都只针对音符的串联，那么您可以使用该[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)功能将所有音符组合成一列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:39:36.623

欢迎来到 SO。您正在尝试做的事情，从表中为提到的每个人选择三个最近的项目，这在 MySQL 中并不容易。但这是可能的。看到这个问题。

[为每组选择行数，其中两个列值组成一组](https://stackoverflow.com/questions/12786666/select-number-of-rows-for-each-group-where-two-column-values-makes-one-group)

并且，请参阅我的回答。

[为每组选择行数，其中两个列值组成一组](https://stackoverflow.com/questions/12786666/select-number-of-rows-for-each-group-where-two-column-values-makes-one-group/12789615#12789615)

一旦您有一个为您提供三行的查询，您就可以使用它`GROUP_CONCAT() ... GROUP BY`来聚合注释字段。

# django - 在我的 Django 网站上创建诸如 craigslist 之类的后期表单

> ID：13075514
> 
> 赞同：2
> 
> 时间：2012-10-25T19:08:15.050
> 
> 标签：django, django-forms, django-users, django-permissions

我正在创建一个市场网站，例如 Craigslist。我想为用户制作“发布表单”，以便在我网站的类别页面上发布他们自己的产品信息（通过上传照片、添加表单（名称、价格、状况等））。

现在，我想我可以通过使用“Django Permission”来做这些事情，但它正确吗？如果是这样，我该怎么做？或者如果没有，还有其他方法可以让用户做这些事情吗？

我的网站的简短摘要如下所示。具体来说，我想知道如何让人们在分类页面上发布他们的产品。

1.  注册和登录

2.  您将拥有多个类别，例如家具、书籍、游戏等，然后单击其中一个类别。（我使用“Django admin”创建了这个类别页面）（例如） [http://bakersfield.craigslist.org/](http://bakersfield.craigslist.org/)

3.  然后，您可以查看该类别页面上销售的商品种类。然后，在网站顶部，您可以找到“发布”按钮，将我们的产品发布到我的网站顶部。点击后可以找到“发帖标题”“价格”“上传照片”等多种形式。（例如） [https://post.craigslist.org/k/7v](https://post.craigslist.org/k/7v) ...

4.填写完这些表格后，点击“提交”按钮将您的产品页面链接发布到类别页面。

Craigslist 是我网站的最佳示例。

# sql - SAS中的条件合并？

> ID：13075516
> 
> 赞同：1
> 
> 时间：2012-10-25T19:08:16.563
> 
> 标签：sql, sas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:25:53.630

答案是“是”。我发现跟踪您的表格和列有点困难。假设提供者的集合不同，然后对没有电话号码的提供者进行计数，然后将其与您加入第二个表的计数结合起来。

查询看起来像：

```
select PROV_PHONE, count(distinct prv_id) as uni_prv, count(distinct pt_id) as uni_pt
from a
where PRV_SPECIAL_HANDLING='N'
group by prov_phone
union all
select PROV_PHONE, count(distinct prv_id) as uni_prv, count(distinct pt_id) as uni_pt
from a join
     b
     on a.prv_id = b.prv_id
where PRV_SPECIAL_HANDLING='Y'
group by prov_phone 
```

如果有重叠，那么您需要在组之前通过以下方式进行联合：

```
select PROV_PHONE, count(distinct prv_id) as uni_prv, count(distinct pt_id) as uni_pt
from ((select PROV_PHONE, prv_id, pt_id
       from a
       where PRV_SPECIAL_HANDLING='N'
       group by prov_phone
      ) union all
      (select PROV_PHONE, b.prv_id, b.pt_id
       from a join
            b
            on a.prv_id = b.prv_id
       where PRV_SPECIAL_HANDLING='Y'
      )
     ) t
 group by prov_phone 
```

我`count(unique)`用`count(distinct)`. 我很确定 SAS 支持后者并且它是标准 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:54:37.263

我认为你可以使用一个`ifc`语句来实现你所需要的技术，如下所示：

```
select count(distinct ifc(sex='M',name,'DUMMYVALUE')) -1 as number_of_distinct_male_names
from my sashelp.class 
```

您需要减去 -1，因为“DUMMYVALUE”会将 1 添加到唯一男性姓名列表中。

在你的情况下，它会有点复杂，因为你有两个条件要满足，所以你需要嵌套`ifc`语句：

```
select count(distinct   
             ifc(if_my_condition1_is_met,
                 unique_value,
                 ifc(if_my_condition2_is_met, 
                     alternate_unique_value, 
                     'DUMMY_VALUE')
                ) -1 as number_of_conditional_unique_values
from my table 
```

# php - 自定义 Google + 分享文本（片段）

> ID：13075517
> 
> 赞同：4
> 
> 时间：2012-10-25T19:08:24.490
> 
> 标签：php, javascript, html, google-plus

我正在创建一个在线 HTML5/Javascript 测验。我正在通过 Facebook 和 Twitter 分享测验的结果。消息是通过 Javascript 创建的，“我刚刚在 Y 个问题中答对了 X 个”

我想对 Google Plus 做同样的事情。但是，“片段”似乎是由页面上的 schema.org、Open Graph 或 Title/Description 标签生成的。此处的文档：[https ://developers.google.com/+/plugins/snippet/](https://developers.google.com/+/plugins/snippet/)

我以为我可以通过 PHP 中的查询字符串参数动态生成这些标签，但看起来 Google 缓存了页面。有任何想法吗？

PHP：

```
<?php 
$correct = strval($_GET['correct']);
$title = "I took the Quiz and answered " . $correct . " of 9 questions correctly.";
?>
<!DOCTYPE html>
<html>
    <head>
        <title><?php echo($title); ?></title>
        <meta property="og:title" content="<?php echo($title); ?>" />
    </head>
</html> 
```

我动态创建 url .../share.php?correct=4

但是当我分享页面时，我看到了消息：

```
I took the Quiz and answered of 9 questions correctly. 
```

它似乎没有显示动态数据。我假设是因为谷歌已经缓存了页面？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:19:14.460

据我所知，加一按钮会缓存页面。fb like 按钮也是如此。你可能想试试这个

```
https://plus.google.com/share?url=http://example.com/share.php?correct=4 
```

它成功了。希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T16:22:15.833

+1 按钮和共享对话框确实使用缓存。片段提取器应该尊重缓存控制指令，因此您应该能够通过提供必要的标头来防止缓存来实现您的目标。

在 PHP 中，以下代码使用必要的数据设置标头以防止缓存：

```
<?php
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
?> 
```

您也可以考虑做的其他事情是将随机生成的 ID 插入到查询字符串参数中，以便每次共享 URL 对提取器而言都是唯一的。

希望有帮助。

# php - iOS App Emoji 问题 - JSON 无法正确编码

> ID：13075518
> 
> 赞同：3
> 
> 时间：2012-10-25T19:08:34.233
> 
> 标签：php, ios, json, web-services, emoji

抱歉，这听起来可能很疯狂。所以主要问题是，如果我来自网络服务的数据是 json_encoded，那么大多数表情符号在应用程序中显示为正方形。不是全部，而是大多数。我正在尝试在 Web 服务端解决此问题。

我发现如果我不使用 json_encode，而是执行以下操作：

```
$array .= '{"text":"emoji"}
echo = '[' . $array . ']'; 
```

基本上像它的 json 编码一样回显它。表情符号在应用程序中正确显示，但其他事情正常工作，因为它没有编码。所以我使用 mb_detect_encoding 发现有表情符号的文本是 UTF-8，没有表情符号的文本是 ASCII。所以我所做的是检查我是否可以检查它是否不是 UTF-8 以及它是否不仅仅是 json_encode 字符串。如果它是 UTF-8 并且什么也不做。这适用于返回的所有数据的 95%。像下面的东西。

```
$encode = mb_detect_encoding($theMemo);
if($encode != 'UTF-8'){
$theMemo = json_encode($theMemo);
}

$array .= '{"text":"' . $theMemo . '"}
echo = '[' . $array . ']'; 
```

我遇到的问题是有时文本类似于“Floyd Mayweatherâ€@FloydMayweather #TheMoneyTeam”，其中包含一些 unicode，但不是表情符号，所以我需要对其进行 json_encode 以使其正确显示.

基本上我需要找到一种方法来 json_encode 任何没有表情符号的东西，或者找到一种更合适的方法来解决这个问题。我知道我在做什么可能看起来很奇怪，但我只是想找到一个解决方案，即使它看起来像一个 hack。

# c# - 在后台加载整个 ListView 并在每个 ListItem 中获取一个 UIControl

> ID：13075521
> 
> 赞同：0
> 
> 时间：2012-10-25T19:08:43.327
> 
> 标签：c#, listview, mono, xamarin.android, xamarin

即使项目视图未显示在屏幕上，我也需要完全加载 ListView 并在每个 ListItem 中获取 UIControl。

我尝试了 ChildViewAdded 事件，但仅当 ListItem 显示在屏幕上时才会引发它。

所以，我需要一种在显示之前以编程方式准备我的 UI ListView 的方法。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:19:59.647

快速回答 - 如果您需要列表中每个项目的真实视图，那么您不想使用像 ListView 这样的虚拟化控件。

相反，您可以在 ScrollView 内的垂直 LinearLayout 内使用重复的自定义视图。

如果使用 mvvmcross，您可能会发现 MVXBindableLinearLayout 有助于执行此操作 - 它有一个 ItemsSource 和一个模板，就像 MvxBindableListView 一样。

* * *

我不知道您尝试做的事情是否有意义，但是如果您愿意，上述内容应该可以帮助您做到这一点！

不要尝试对包含大量项目的列表使用线性布局 - 你会耗尽资源。

# ruby-on-rails - 是否有用于从 Web 界面将数据映射和导入到 Rails Web 应用程序的 gem？

> ID：13075523
> 
> 赞同：8
> 
> 时间：2012-10-25T19:08:47.663
> 
> 标签：ruby-on-rails, import, rubygems, gem

如果您曾经[将订阅者列表导入 MailChimp](http://kb.mailchimp.com/article/how-do-i-create-and-import-my-list)，那么您就知道我在寻找什么。

1.  用户上传 .csv、.xls、.xlsx、.txt 文件。
2.  应用程序将列标题与模型相匹配。
3.  用户能够编辑匹配的列并为那些未自动匹配的列选择匹配项。
4.  应用程序验证并导入行。
5.  （可选）为用户提供更正错误的界面（例如数字字段中的字符串）。
6.  应用程序导出错误行，以便用户可以更正并重新导入。

我正在寻找一个 gem 或教程来给我一个良好的开端，但没有取得太大的成功。这似乎是一个普遍的要求，肯定有什么东西在那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:52:11.277

可以在 Ruby 工具箱中找到各种可能为您指明正确方向的宝石。[Conformist](https://www.ruby-toolbox.com/projects/conformist)（当前）和[CSV Importer](https://github.com/sparkboxx/csv_importer)（过时）正朝着正确的方向前进。

# c# - 如何使用asp.net C#按时间顺序显示Blogspot的BlogArchive等数据

> ID：13075527
> 
> 赞同：0
> 
> 时间：2012-10-25T19:08:58.210
> 
> 标签：c#, asp.net, sql-server-2008

如何按时间顺序在我的 aspx 页面上显示数据条目，例如 Blogspot 的 BlogArchive？

我认为基本上数据库包括一个包含列的表：条目、年、月、日，这样我们就可以像我的意思那样显示数据。（查看链接：http: [//i160.photobucket.com/albums/t194/perakit/mess/BlogArchive.jpg](http://i160.photobucket.com/albums/t194/perakit/mess/BlogArchive.jpg)）

注意：我的项目使用 SQL Server 2008 和 Visual Studio 2008，asp.net C#。

非常感谢并感谢所有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:56:11.687

您可以尝试在您的`SqlDataSource`

```
SELECT Entry, Year, Month, Day
FROM EntryInfo 
ORDER BY Year, Month, Day; 
```

Aspx 代码（客户端）：

```
<asp:SqlDataSource
      id="SqlDataSource1"
      runat="server"
      ConnectionString="...."
      SelectCommand="SELECT Entry, Year, Month, Day FROM EntryInfo ORDER BY Year, Month, Day;">
  </asp:SqlDataSource>

  <asp:GridView
      id="GridView1"
      runat="server"
      DataSourceID="SqlDataSource1">
  </asp:GridView> 
```

# oracle - pl sql %NOTFOUND

> ID：13075538
> 
> 赞同：10
> 
> 时间：2012-10-25T19:09:50.883
> 
> 标签：oracle, plsql

我只是想知道为什么这段代码不起作用。`id=1`我的桌子上没有任何供应商。

```
DECLARE
    VAR SUPP_NM VARCHAR(100);
    VAR_SUPP_ID  NUMBER := 1;
    WHILE_VAR CHAR := 'Y';
BEGIN
    SELECT SUPP_NM
    INTO VAR_SUPP_NM
    FROM TEST.SUPPLIER
    WHERE SUPP_ID = VAR_SUPP_ID;

    IF SQL%NOTFOUND THEN
        DBMS_OUTPUT.PUT_LINE('SQL DATA NOT FOUND');
    ELSIF SQL%FOUND THEN
        DBMS_OUTPUT.PUT_LINE('DATA FOUND');
    END IF;    
END; 
```

我在 Toad 中收到 01403 错误，但未处理为`sql%notfound`.

为什么不`sql%notfound`工作？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-25T19:19:16.403

要捕获异常，请通过添加部分`NO_DATA_FOUND`重写代码，如下所示：`exception`

```
DECLARE
    VAR_SUPP_NM VARCHAR2(100);
    VAR_SUPP_ID  NUMBER := 1;
    WHILE_VAR CHAR := 'Y';
BEGIN
  SELECT SUPP_NM
    INTO VAR_SUPP_NM
    FROM TEST.SUPPLIER
   WHERE SUPP_ID = VAR_SUPP_ID;

 DBMS_OUTPUT.PUT_LINE('DATA FOUND');

exception
  when no_data_found 
  then DBMS_OUTPUT.PUT_LINE('SQL DATA NOT FOUND');

END; 
```

在语句的情况下检查`SQL%FOUND`或`SQL%NOTFOUND`没有意义`select into`，因为如果 select 语句没有返回任何行，它总是会引发`no_data_found`异常，除非该 select 语句调用聚合函数，如果没有选择任何行，它将总是返回数据或 null。

不要使用`varchar`数据类型，`varchar2`而是使用数据类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-18T19:32:27.740

如果你想使用 Nicholas 的答案就是你想要的`SELECT INTO`。但是，如果您能够使用`%FOUND`or更重要，请`%NOTFOUND`考虑使用`FETCH`游标代替：

```
DECLARE
    VAR SUPP_NM VARCHAR2(100);
    VAR_SUPP_ID  NUMBER := 1;
    WHILE_VAR CHAR := 'Y';
    CURSOR c1 IS
        SELECT SUPP_NM
        FROM TEST.SUPPLIER
        WHERE SUPP_ID = VAR_SUPP_ID;
BEGIN
    OPEN c1;
    FETCH c1 INTO VAR_SUPP_NM;

    IF c1%NOTFOUND THEN
            DBMS_OUTPUT.PUT_LINE('SQL DATA NOT FOUND');
    ELSIF c1%FOUND THEN
            DBMS_OUTPUT.PUT_LINE('DATA FOUND');
    END IF;

    CLOSE c1;
END; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-12-08T07:14:16.450

尼克的回答是正确的。

然而，在 oracle 文档中，它表示`SQL%NOTFOUND`可以使用`SELECT INTO` 但在检查`SQL%NOTFOUND`为 TRUE 之前会生成一个错误，称为`no_data_found`.

所以使用`SQL%NOTFOUND`一个首先需要处理`no_data_found`错误。

```
DECLARE
    VAR SUPP_NM VARCHAR(100);
    VAR_SUPP_ID  NUMBER := 1;
    WHILE_VAR CHAR := 'Y';
BEGIN
    BEGIN
        SELECT SUPP_NM
        INTO VAR_SUPP_NM
        FROM TEST.SUPPLIER
        WHERE SUPP_ID = VAR_SUPP_ID;

        EXCEPTION 
            WHEN NO_DATA_FOUND THEN
                null; -- or write something here if u want.
    END;
    IF SQL%NOTFOUND THEN
        DBMS_OUTPUT.PUT_LINE('SQL DATA NOT FOUND');
    ELSIF SQL%FOUND THEN
        DBMS_OUTPUT.PUT_LINE('DATA FOUND');
    END IF;    
END; 
```

所以我所做的是添加一个包含生成异常`BEGIN-END`的语句的内部块。之后，您可以检查 的值。`SELECT``no_data_found``SQL%NOTFOUND`

You can read more about this in oracle docs. Start from this active link in mytime : [https://docs.oracle.com/cd/B28359_01/appdev.111/b28370/errors.htm#LNPLS00703](https://docs.oracle.com/cd/B28359_01/appdev.111/b28370/errors.htm#LNPLS00703)

# c++ - C++ 2D 指针数组分段错误

> ID：13075540
> 
> 赞同：1
> 
> 时间：2012-10-25T19:09:53.803
> 
> 标签：c++, pointers, segmentation-fault, multidimensional-array

我面临一个二维指针数组的问题。它编译时没有错误，但是当我尝试运行文件时，我得到的只是一行，说我有分段错误。

我的头文件：

```
#ifndef __TWODARRAY_H__
#define __TWODARRAY_H__

template <typename T>
class TwoDArray {
  private:
    T** theArray;
    int numRows;
    int numCols;
    T defSpace;

  public:
    TwoDArray<T> (int r, int c, T def);
    ~TwoDArray<T>();
    void insert(int r, int c, T value);
    T access(int r, int c);
    void remove(int r, int c);
    void print();
    int getNumRows();
    int getNumCols();
};
#endif 
```

我的方法：

```
#include "TwoDArray.h"
#include <iostream>
#include <assert.h>
#include <string>

//initializes the 2D Array
template <typename T>
TwoDArray<T>::TwoDArray(int r, int c, T def) {
  assert(r > 0 && c > 0);
  numRows = r;
  numCols = c;
  defSpace = def;
  theArray = new T*[r];
  for(int i=0; i<r; i++) {
    theArray[i] = new T[c];
  }
  //sets all values to the default
  for(int i=0; i<r; i++) {
    for(int j=0; j<c; j++) {
    theArray[i][j] = defSpace;
    }
  }
}

//deletes the 2D Array
template<typename T>
TwoDArray<T>::~TwoDArray() {
  for(int i=0; i<numRows; i++) {
    delete[] theArray[i];
  }
  delete[] theArray;
}

//inserts value v at row r and column c
template<typename T>
void TwoDArray<T>::insert(int r, int c, T value) {
  assert(r < numRows && c < numCols);
  assert(value != defSpace);
  theArray[r][c] = value;
}

//get value at row r, column c
template<typename T>
T TwoDArray<T>::access(int r, int c) {
  assert(r < numRows && c < numCols);
  T result = theArray[r][c];
  return result;
}

//set value at row r and column c back to default
template<typename T>
void TwoDArray<T>::remove(int r, int c) {
  assert(r < numRows && c < numCols);
  assert(theArray[r][c] != defSpace);
  theArray[r][c] = defSpace;
}

//print the 2D Array
template<typename T>
void TwoDArray<T>::print() {
  for(int i=0; i<numRows; i++) {
    for(int j=0;j<numCols; i++) {
      std::cout << theArray[i][j];
      std::cout << " ";
    }
    std::cout << std::endl;
  }
}

//gets number of rows for test
template<typename T>
int TwoDArray<T>::getNumRows() {
  return numRows;
}

//gets number of columns for test
template<typename T>
int TwoDArray<T>::getNumCols() {
  return numCols;
}

template class TwoDArray<int>;
template class TwoDArray<std::string>; 
```

而我的主要：

```
#include <iostream>
#include <string>
#include "TwoDArray.h"

using std::cout;
using std::endl;

int main() {
  TwoDArray<int>* i = new TwoDArray<int>(5, 5, 0);

  TwoDArray<std::string>* s = new TwoDArray<std::string>(5, 5, "o");

  i->insert(1, 1, 1);
  i->insert(1, 3, 1);
  i->insert(3, 2, 8);
  i->insert(2, 0, 3);
  i->insert(2, 4, 3);
  i->insert(3, 2, 8);

  i->print();

  s->insert(0, 2, "North");
  s->insert(4, 2, "South");
  s->insert(2, 4, "East");
  s->insert(2, 0, "West");

  s->print();

  return 0;
} 
```

任何想法为什么我会遇到分段错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T19:13:52.367

这是个错误：

```
template<typename T>
void TwoDArray<T>::print() {
  for(int i=0; i<numRows; i++) {
    for(int j=0;j<numCols; i++) {   // should be j++, not i++
      std::cout << theArray[i][j];
      std::cout << " ";
    }
    std::cout << std::endl;
  }
} 
```

as`i`在外部和内部都递增，`for`最终将导致`i`等于`numRows`并超过数组末尾，这是未定义的行为，也是分段错误的可能原因。

由于存在动态分配的成员，因此`TwoDArray`您需要防止复制实例`TwoDArray`或实现赋值运算符和复制构造函数（请参阅[什么是三规则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)）。

如果这不是一个学习练习，您可以使用 a`vector<vector<T>>`代替。

此外，由于数组的维度是编译时常量，因此也可以将它们设为模板参数并完全避免动态内存：

```
template <typename TType, int TRows, int TCols>
class TwoDArray {
  private:
    TType theArray[TRows][TCols];
    TType defSpace;
    ....

TwoDArray<int, 5, 5> i(0); 
```

有关完整演示，请参阅[http://ideone.com/dEfZn5](http://ideone.com/dEfZn5)。

# android - 嗅探移动应用程序中的 REST API URL

> ID：13075541
> 
> 赞同：2
> 
> 时间：2012-10-25T19:10:03.537
> 
> 标签：android, url, rest, https

我的移动应用程序（Android 和 iOS）中有一些 HTTPS POST REST API URL，我想知道是否可以嗅探这些 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:51:29.260

可以使用包嗅探器、代理服务器、网关等嗅探 url。但是，由于您使用的是 SSL（并且只要您不禁用证书检查），因此您的发布参数和响应都将被加密。

# javascript - 使用主干关系反转数据结构

> ID：13075542
> 
> 赞同：0
> 
> 时间：2012-10-25T19:10:07.757
> 
> 标签：javascript, backbone.js, data-structures, backbone-relational

我正在使用骨干关系来编写使用嵌套数据的应用程序。数据结构的顶层包含大部分数据（以 MB 为单位），但从不用作独立项；它仅用于充实其相关子项的属性（享元模式？）。

要将所有这些数据发送到浏览器，我正在使用类似于以下数据结构的东西

```
records = [ 
   {performerName: 'Jane', details: {composerName: 'Beethoven', ... }}, 
   ... 
] 
```

然后这由两个模型封装，`Piece`并且`Performance`- 都继承自 Backbone.RelationalModel 但只有`Performance`一个定义如下的关系

```
relations: [
    {
        type: 'HasOne',
        key: 'piece',
        relatedModel: 'Piece',
        reverseRelation: {
            key: 'performances'
        }
    }
], 
```

然后可以直接从原始 JSON 构建一个表演集合。

这一切都很好，但问题是我为每个数据发送了几个副本`Piece`（因为每个片段通常有几个表演）所以下载大小比它需要的大很多。

发送更轻量级的数据结构（如下所示或避免大量重复的其他结构）的最佳方式是什么，但仍然可以相对轻松地创建我需要使用的性能集合。

```
records = [ 
   {composerName: 'Beethoven', ..., performances: [array of jsons, one for each performance] 
   ... 
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:34:33.100

我最终这样做的方式是将数据发送为

```
var data = { pieces: [
              {tune_name: 'eidelweiss', ..., performances: [{id:23}, {id:52}]} 
              ... 
             ],
             performances: [ array of performance jsons ]
           }; 
```

在片断模型中定义以下关系

```
relations: [
    {
        type: 'HasMany',
        key: 'performances',
        relatedModel: 'Performance',
    includeInJSON: false,
        reverseRelation: {
            key: 'piece'
        }
    }
] 
```

然后像往常一样建立一个表演收藏和一个作品收藏

# c++ - 找出重载的流运算符并在链表中复制分配

> ID：13075543
> 
> 赞同：-1
> 
> 时间：2012-10-25T19:10:14.987
> 
> 标签：c++, linked-list

我有一个链表类，但我遇到了两件事：

1.  我的复制赋值运算符没有复制确切的列表
2.  我不知道如何用链表进行重载输出，我知道它在基础上是如何工作的，但我对我的链表迷路了。

更新：为什么复制赋值运算符给了我列表的反转？

```
list& list::operator =(const list &l){
    while (p!=NULL)
       del();
    Node* current=l.p;
    while(current!=NULL){
       insert(current->x); 
       current=current->next;
       } 
```

当我有 10--2--NULL 它打印 2--10--NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:20:27.260

在赋值运算符的末尾，您设置`p`which`current`必须是空指针，否则您将不会退出`while`循环。 `p`应该已经由之前的调用设置`insert`。

如果分配给它时列表已经有元素会发生什么？您真的要追加，还是要先删除现有元素？

在您的`print`成员中，循环运行直到`q`为 NULL，然后在完成后您测试是否`q`为 NULL ...当然是。所以你总是在任何列表之后打印 NULL 。

在`main`你有这个，它破坏了列表：

```
l1.~list(); 
```

所以下一行是未定义的行为，因为您访问了一个已经被销毁的对象，然后该对象再次超出范围并运行其析构函数，这也是未定义的行为，因为该对象已经被销毁。您不需要手动调用析构函数，这就是析构函数的重点，当对象超出范围时它们会自动清理。

**编辑：**您的赋值运算符反向复制列表，因为您按顺序遍历它，但`insert`将每个元素放在复制列表的开头，因此您复制第一个元素，然后将第二个元素放在它之前，然后将第三个元素放在之前等等

要复制列表，您需要以*相同的顺序放置复制的元素，即在**末尾*而不是开头插入每个元素。

# php - 使用 PHP 表单从 txt 文件中加载数据

> ID：13075547
> 
> 赞同：2
> 
> 时间：2012-10-25T19:10:27.777
> 
> 标签：php, mysql, load

我正在尝试使用简单的 php 表单从 txt 文件（| 分隔）加载数据。贝娄是代码：

```
$sql = "LOAD DATA INFILE '".$_FILES['file']['tmp_name']."'
INTO TABLE asn_data
FIELDS TERMINATED BY '|' OPTIONALLY ENCLOSED BY '\"'
LINES TERMINATED BY '\r\n'
IGNORE 2 LINES
"; 
```

但是当我浏览文件并提交它时显示以下错误：

```
File '/tmp/phpkR9fXW' not found (Errcode: 13) 
```

如果我将语法更改为`LOAD DATA LOCAL INFILE`它提供以下错误：此 MySQL 版本不允许使用的命令

我的 PHP 版本是 5.3.10，MySQL 版本是 5.5，操作系统是 Ubuntu 12.04.1 LTS。

我已经尝试过[http://ubuntuforums.org/showthread.php?t=822084](http://ubuntuforums.org/showthread.php?t=822084)中给出的解决方案，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:03:04.057

我们有一个非常相似的问题，结果是 MySQL 服务器无法打开文件的权限问题。

[MySQL Doc](http://dev.mysql.com/doc/refman/5.0/en/cannot-create.html)有一些关于这个问题的有用信息。

# c - 为什么人口计数的输入参数必须是无符号的

> ID：13075554
> 
> 赞同：3
> 
> 时间：2012-10-25T19:10:53.193
> 
> 标签：c, algorithm, assembly, count, population

```
int pcount_r (unsigned x) {
    if(x==0)
        return 0;
    else
        return ((x & 1) + pcount_r(x >> 1));
} 
```

只是想知道为什么输入参数是无符号的。

最好的祝福！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:19:12.553

`E1 >> E2`当 E1 具有带符号类型和负值 (C99 6.5.7:5) 时产生的结果是实现定义的。另一方面，`E1 >> E2`由标准明确定义。接受和操作无符号整数是使函数最可移植的一种方法。

顺便说一句，通常使用无符号类型进行位旋转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:38:49.173

如果数字有符号，则右移将复制符号位（最后一位），从而有效地为负数提供无限位数。

```
int pcount_r(int x) {
    if (x == 0)
        return 0;
    else if (x < 0)
        return sizeof(int)*8 - pcount_r(~x);
    else
        return (x & 1) + pcount_r(x >> 1);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-25T19:42:18.820

问题是 C（与 Java 不同）不支持有符号（算术）移位。CPU 有两种不同类型的移位运算符，有符号和无符号。例如，在 x86 上，SAR 指令执行算术右移，而 SHR 执行无符号右移。由于 C 语言只有一个右移运算符 (>>)，因此不能同时支持这两种运算符。如果编译器使用无符号移位 (SHR) 实现上述代码，并且您向该过程提供负数，您将得到错误的答案。

# php - PHP – 在 $_POST 中查找特定单词

> ID：13075559
> 
> 赞同：0
> 
> 时间：2012-10-25T19:11:14.800
> 
> 标签：php, post, sql-injection

我做了一个易受 sql 注入攻击的登录。这是伟大的。但我想避免有人在登录时使用 DROP TABLE。例如，我能否以某种方式检查输入是否包含诸如 drop 或 table 之类的单词。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:17:31.757

我建议您使用我的简单[PDO 数据库库](https://github.com/Xeoncross/DByte)，它将解决您的 SQL 注入问题。

阅读代码，它不是很长（~3kb），它会教你如何使用准备好的语句来处理数据库查询。然后，稍后您可以迁移到具有迁移、查询构建器和 ORM 实现等功能的真实数据库库。

```
$pdo = new PDO(...)

$name = $_POST['name'];
// @todo make sure it's a good name

$statement = $pdo->prepare('INSERT INTO `user` (`name`) VALUES (?)');
$statement->execute(array($name));

$user_id = $pdo->lastInsertId(); 
```

## 更新

好的，所以我只是重新阅读了您的问题，您实际上*想要*一个 SQL 注入演示系统 - 您只是不希望它容易受到*某些类型*的 SQL 注入的影响？这听起来像是一个不值得麻烦的坏主意。设置一个可以销毁并重新创建每个页面请求的 SQLite 数据库，然后您无需担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:43:00.367

`if (false !== stripos($_POST['username'], 'DROP'))`如果您想知道在发布的“用户名”字段中是否提到了“DROP”一词，它将起作用。

# grails - GSP 访问控制器结果

> ID：13075562
> 
> 赞同：0
> 
> 时间：2012-10-25T19:11:22.320
> 
> 标签：grails, dojo, grails-plugin, dojox.grid.datagrid

我正在使用 Grails 的 Dojo 插件来填充 dojox.grid.DataGrid 对象。现在，与此网格关联的控制器操作呈现定义网格内容的 JSON。只要我预定义了 GSP 中的列，它就可以正常工作。但是，我的应用程序需要能够根据某些数据库查询结果动态设置列数（及其关联名称）。这个网格的 JSON 格式不包括列名，所以我不能在我的 GSP 中使用 ag:each 标记来遍历这些名称。

我想做这样的事情，但无法这样做：

```
<dojo:grid controller='foo' action='getGridData' ...>
   <g:each in=${columns}>
       <dojo:col width="15%" name="{it}" field="{it}">{row.{it}}<dojo:col/>
   </g:each>
</dojo:grid> 
```

我给出了 Dojo 插件的具体示例作为背景，但我想将此扩展到关于 Grails 的更一般的问题。如果我通过呈现 JSON 的控制器操作构造 GSP 元素，我如何访问控制器中的其他内容以构造嵌套元素？这甚至可能吗？我对 Web 开发还是新手，所以我确信我误解了这些组件之间的一些粘合剂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:51:11.943

我认为您的代码有问题的主要问题是您试图错误地引用列数据。

```
<g:each in="${columns}">
   <dojo:col width="15%" name="${it}" field="${it}">{row.{it}}<dojo:col/>
</g:each> 
```

请注意值周围的引号`in=`和用于引用`it`变量的美元符号。

关于最后一点

```
{row.{it}} 
```

我不清楚`row`在这种情况下是什么。所以我不确定如何解决这个问题，但也许这会让你朝着正确的方向前进。

您通常不会在一个请求中呈现 GSP 并构造 JSON。这里会发生的是你渲染你的 GSP，它获取你所有的 taglib 代码并生成 HTML/JavaScript。然后，一旦浏览器呈现它，就会进行 AJAX 调用以获取 JSON。

请记住，当 GSP 到达浏览器时，它只是 HTML。

# java - 限制 JTextField 中的输入长度不起作用

> ID：13075564
> 
> 赞同：6
> 
> 时间：2012-10-25T19:11:29.823
> 
> 标签：java, swing, user-interface, document, jtextfield

我试图限制用户可以在文本字段中输入的最大字符长度，但它似乎不起作用。

这是代码：

```
text2 = new JTextField("Enter text here",8); 
```

有什么我做错了吗？如何使限制正常工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T19:18:26.747

您当前的代码没有设置最大长度，而是定义了可见列的数量。

要限制数据的最大长度，您可以[`Document`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Document.html)为文本字段设置一个自定义，不允许添加违反最大长度限制的内容：

```
public final class LengthRestrictedDocument extends PlainDocument {

  private final int limit;

  public LengthRestrictedDocument(int limit) {
    this.limit = limit;
  }

  @Override
  public void insertString(int offs, String str, AttributeSet a)
      throws BadLocationException {
    if (str == null)
      return;

    if ((getLength() + str.length()) <= limit) {
      super.insertString(offs, str, a);
    }
  }
} 
```

然后将您的文本字段设置为使用此文档：

```
text2.setDocument(new LengthRestrictedDocument(8)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T19:15:22.477

构造函数

```
new JTextField("Enter text here",8); 
```

将可见列数设置为 8，但不限制您输入更多。

您可以使用[DocumentFilter](https://stackoverflow.com/questions/10586395/jtextfield-how-to-limit-the-number-of-charaters)来限制输入长度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-04T02:09:32.303

只需扩展 JTextField 类并覆盖构造函数中的 KeyReleased 事件，并将其指向一个检查长度的新方法：

```
package gui;

import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.JTextField;

public class RecordClassTextField extends JTextField {

    public RecordClassTextField() {
        this.addKeyListener(new KeyAdapter() {
            @Override
            public void keyReleased(KeyEvent e) {
                cleanText();
            }
        });
    }

    private void cleanText()
    {
        if(this.getText().length() > 17){
            System.out.println("Over 17");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-05-25T11:21:38.960

无需使用任何只需在 事件 `API`
上编写此代码`TextFieldKeyTyped`

```
if (jTextField.getText().trim().length() == 8 || evt.getKeyChar() == java.awt.event.KeyEvent.VK_BACK_SPACE) {
        evt.consume();
    } 
```

并且在使用此代码集`JTextField`属性之前`setTransferHandler(null);`会阻止粘贴。

# sharepoint - 减少内容索引对 SharePoint Server 2010 的影响

> ID：13075565
> 
> 赞同：2
> 
> 时间：2012-10-25T19:11:31.587
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试为我的一项认证考试回答一个问题，如下所示：

* * *

您有一个 SharePoint Server 2010 Service Pack 1 (SP1) 服务器场。

您有一个前端 Web 服务器和一个应用程序服务器。

您发现当应用程序服务器索引内容时，前端 Web 服务器需要很长时间才能响应用户请求。

您需要减少应用程序服务器可以同时索引的项目数。

解决方案必须确保所有内容都已编入索引。

你应该配置什么？

A. 爬虫影响规则
B. 爬虫规则
C. 主机分布规则
D. 搜索范围

正确答案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:16:24.170

配置 Crawler Impact 规则将允许您减少应用程序服务器对源数据（在本例中为 Web 前端）发出的请求数量。

# php - 从查询中获取结果

> ID：13075568
> 
> 赞同：0
> 
> 时间：2012-10-25T19:11:43.597
> 
> 标签：php, mysql

> **可能重复：**
> [我如何从 PHP 中的 MySql 响应中“回显”“Resource id #6”？](https://stackoverflow.com/questions/4290108/how-do-i-echo-a-resource-id-6-from-a-mysql-response-in-php)

我正在寻找查询的结果，但它一直给我资源 id #3。

以下是我的代码。

```
$type = "SELECT `sellingid` FROM `ticket` WHERE `ticketid` = $_GET[ticketid]";
$typeResult = mysql_query($type);

print_r($typeResult); 
```

我在这里缺少什么步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:13:43.697

您需要**获取**结果。您所做的就是发送查询。

请注意，如果您正在编写新代码，则应该使用`mysqli_`or`PDO`函数，因为您的查询容易受到 SQL 注入的攻击，并且`mysql_`函数正在[被弃用](http://www.deprecatedphp.com)。犹豫不决，下面是一个示例`mysql_fetch_assoc`。

```
<?php

$sql = "SELECT `sellingid` FROM `ticket` WHERE `ticketid` = $_GET[ticketid]";

$result = mysql_query($sql);

if (mysql_num_rows($result) == 0) {
    echo "No rows found, nothing to print so am exiting";
    exit;
}

// While a row of data exists, put that row in $row as an associative array
// Note: If you're expecting just one row, no need to use a loop
// Note: If you put extract($row); inside the following loop, you'll
//       then create $userid, $fullname, and $userstatus
while ($row = mysql_fetch_assoc($result)) {
    echo $row[sellingid];
}

mysql_free_result($result);

?> 
```

[参考](http://php.net/manual/en/function.mysql-fetch-assoc.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:15:26.827

```
$type = "SELECT `sellingid` FROM `ticket` WHERE `ticketid` = $_GET[ticketid]";
$typeResult = mysql_query($type);
$row = mysql_fetch_array($typeResult);
print_r($row); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:15:32.007

您实际上并没有获取查询结果。下面是两个使用 WHILE 循环将结果作为行获取的示例。然后，您可以获取列值并使用它们。

不正确和折旧的方法，但有效：

```
$type = "SELECT `sellingid` FROM `ticket` WHERE `ticketid` = $_GET[ticketid]";
$typeResult = mysql_query($type);
// for each row
while ($row = mysql_fetch_array($typeResult)) {
    // grab the columns
    $value = $row['column_name'];
} 
```

我建议使用 MySQLi 或 PDO 喜欢以下（MySQLi）：

```
$mysqli_connection = new mysqli("hostname", "username", "password", "database");
$type = "SELECT `sellingid` FROM `ticket` WHERE `ticketid` = $_GET[ticketid]";
$res = $mysqli_connection->query($type);
while($row = $res->fetch_array(MYSQLI_ASSOC)) {
    $value = $row['column_name'];
}
$res->free();
$mysqli_connection->close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T19:17:47.000

更清晰的提示 - 使用 MySQLi 类/函数，请阅读：

[http://lt1.php.net/manual/en/mysqli-result.fetch-assoc.php](http://lt1.php.net/manual/en/mysqli-result.fetch-assoc.php)

或者如果你更喜欢 OOP 方法

[http://lt1.php.net/manual/en/mysqli-result.fetch-object.php](http://lt1.php.net/manual/en/mysqli-result.fetch-object.php)

# git - git github 发布到网站，但不删除文件夹？

> ID：13075570
> 
> 赞同：1
> 
> 时间：2012-10-25T19:12:01.273
> 
> 标签：git, bash, github

我正在从 Github 拉到我们网站的网络服务器。所有操作都是通过 bash 脚本和 scalr 完成的。在我们的网站中，其中一个文件夹是 NFS 挂载到 S3 文件夹。有没有一种方法可以在不杀死该文件夹并且不必重新安装它的情况下进行拉动？这是我当前的脚本：

```
## Git Clone -------------------------------------------------------------------

if [ -d "$DEPLOY_PATH"/.git ]; then
    cd "$DEPLOY_PATH"
    if $GIT_PATH status >/dev/null 2>&1; then
       $GIT_PATH pull
       exit 0
    fi
fi

$GIT_PATH clone $GIT_REPO_URL $GIT_CL_DIR  .

## Git Checkout ----------------------------------------------------------------
# There should be *no* changes to the pristine repo.
echo "Ensure pristine copy. Executing 'git reset --hard'."
$GIT_PATH reset --hard HEAD 2>/dev/null

echo "Pulling updates from $GIT_REMOTE"
$GIT_PATH fetch $GIT_REMOTE

current_branch=$($GIT_PATH branch | awk '/\* /{print $2}')

if [[ "$current_branch" = "$GIT_BRANCH" ]] then
    echo "Already on branch '$GIT_BRANCH'."
elif ! $GIT_PATH branch | awk "/$GIT_BRANCH$/" >/dev/null 2>&1 then
    echo "Checkout of branch '$GIT_BRANCH'"
    $GIT_PATH checkout -b $GIT_BRANCH --track $GIT_REMOTE/$GIT_BRANCH 2>/dev/null

elif ! $GIT_PATH checkout $GIT_BRANCH 2>/dev/null then
    echo "Branch '$GIT_REMOTE/$GIT_BRANCH' not found. Skipping remainder of update." 1>&2
    exit 1
fi

# Run our git commands
$GIT_PATH pull

## Get submodules, if exist.
if [ -e ".gitmodules" ]
then
    echo "Updating submodules."
    $GIT_PATH submodule init 2>/dev/null
    $GIT_PATH submodule update
fi 
```

然后我安装文件夹等....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:39:20.520

一种方法是符号链接到挂载的目录。
即使该符号链接驻留在 git 工作树中，它也不会受到 Git 的影响，因为它不遵循符号链接（详见“[让 git 遵循符号链接（再次）](https://stackoverflow.com/questions/1500772/getting-git-to-follow-symlinks-again) ”）

# wordpress - Woocommerce：如何删除标题中的“存档”？

> ID：13075573
> 
> 赞同：17
> 
> 时间：2012-10-25T19:12:15.467
> 
> 标签：wordpress, woocommerce

我正在尝试从页面标题中删除“*存档”一词。*

如何删除它？通过添加过滤器？

例子：

> 我的收藏**档案**| 我的网站名称

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-03T23:44:18.160

最好使用 Yoast 的 Wordpress SEO。

在 Titles & Metas 中，转到 Taxonomies 选项卡并更新 Product Categories 的 Title 模板以删除单词 Archive。我的最终看起来像这样：

%%term_title%% %%page%% %%sep%% %%sitename%%

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-15T23:01:50.700

您可以在 functions.php 中重写过滤器，使其失败，导致 WooCommerce 无法呈现它。

```
function override_page_title() {
return false;
}
add_filter('woocommerce_show_page_title', 'override_page_title'); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-09-11T13:28:20.277

如果您使用的是 Yoast SEO（版本 8.1.2），选项将移至：

Yoast SEO -> 搜索外观 -> 分类法。

[![在此处输入图像描述](../Images/1e54edc94b45bea3ec91eed6c41821f2.png)](https://i.stack.imgur.com/hx9eZ.png)

在那里按产品类别（product_cat）查找并打开它。

[![在此处输入图像描述](../Images/c512d50d93ef5e761af1201ea8e7602f.png)](https://i.stack.imgur.com/3cMct.png)

然后从头部删除 Archives 字符串。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-06T23:46:37.193

我知道这是一篇旧帖子，但我在这里尝试了答案，但没有奏效。我找到了基于 renegadesk 答案的解决方案，但除了转到分类法选项卡之外，我还必须在帖子类型选项卡中更改它。见下文：

如果您还没有 Yoast 的 Wordpress SEO，请点击 SEO > Titles & Metas > Post Types。向下滚动并查找标题“自定义帖子类型档案”。在“产品”上，您可以编辑此标题的内容。我的现在看起来像这样：

```
%%pt_plural%% %%page%% %%sep%% %%sitename%% 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T01:45:45.280

在 woocommerce 中似乎有 3 个档案实例（区分大小写），其中一个在 \wp-content\plugins\woocommerce\woocommerce-hooks.php 中的第 50 行和 2 在 \wp-content\plugins\woocommerce\woocommerce-template.php 中大约第 240 行 ish 也许其中之一就是您正在寻找的内容，并且您可以修改代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-04T08:16:32.397

除了泰德 C：

为此，Wordpress 已经预定义了以 __return_ 开头的函数。在这种情况下，您要查找的函数是 __return_false。

add_filter('woocommerce_show_page_title', '__return_false',10,0); 也将工作。

最后两个参数是函数的顺序和传递给它的参数数量。

设置它们始终是一个好习惯，但这仅在您想修改默认顺序 (10) 和传递的参数数量 (1) 时才需要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-13T10:37:33.980

您对所有情况都有这个过滤器：“get_the_archive_title”。但是还有不同的情况。

例如，您可以执行简单类别：

```
function prefix_category_title( $title ) {
  if(is_category()){
    $title = single_cat_title( '', false );
  }
  return $title;
}
add_filter( 'get_the_archive_title', 'prefix_category_title' ); 
```

对于自定义帖子类型，您应该这样做：

```
function prefix_category_title( $title ) {
  if(is_archive('slug-of-your-custom-post-type')){
    $title = single_cat_title( '', false );
  }
  return $title;
}
add_filter( 'get_the_archive_title', 'prefix_category_title' ); 
```

所以最后你有很多条件，比如：

*   is_category
*   is_archive
*   is_tag
*   is_author
*   is_year
*   is_tax

[https://developer.wordpress.org/reference/functions/get_the_archive_title/](https://developer.wordpress.org/reference/functions/get_the_archive_title/)

文森特。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2015-10-25T16:35:40.100

wp-content/plugins/woocommerce/templates/archive-product.php

编辑此文件 archive-product.php 并删除以下 3 行。

```
 <h1 class="page-title"><?php woocommerce_page_title(); ?></h1>

            <?php endif; ?> 
```

这将删除商店页面和所有其他页面上的页面标题。

# qt - 尝试在 Debian 上为 win32 交叉编译 Qt 4.8.3 时构建失败

> ID：13075577
> 
> 赞同：2
> 
> 时间：2012-10-25T19:12:27.640
> 
> 标签：qt, compiler-errors, debian, cross-compiling

我正在尝试构建一个原始的 Qt 4.8.3 tarball，并使用以下命令配置构建：

```
./configure -opensource -xplatform win32-g++ -device-option CROSS_COMPILE=i686-w64-mingw32- 
```

以下是（重新）运行的结果`make`：

```
$ make
cd src/tools/bootstrap/ && make -f Makefile 
make[1]: Entering directory `/home/wena/src/qt-4.8.3/src/tools/bootstrap'
make[1]: Nothing to be done for `first'.
make[1]: Leaving directory `/home/wena/src/qt-4.8.3/src/tools/bootstrap'
cd src/tools/moc/ && make -f Makefile 
make[1]: Entering directory `/home/wena/src/qt-4.8.3/src/tools/moc'
make[1]: Nothing to be done for `first'.
make[1]: Leaving directory `/home/wena/src/qt-4.8.3/src/tools/moc'
cd src/tools/rcc/ && make -f Makefile 
make[1]: Entering directory `/home/wena/src/qt-4.8.3/src/tools/rcc'
make[1]: Nothing to be done for `first'.
make[1]: Leaving directory `/home/wena/src/qt-4.8.3/src/tools/rcc'
cd src/tools/uic/ && make -f Makefile 
make[1]: Entering directory `/home/wena/src/qt-4.8.3/src/tools/uic'
make[1]: Nothing to be done for `first'.
make[1]: Leaving directory `/home/wena/src/qt-4.8.3/src/tools/uic'
cd src/winmain/ && make -f Makefile 
make[1]: Entering directory `/home/wena/src/qt-4.8.3/src/winmain'
make -f Makefile.Debug all
make[2]: Entering directory `/home/wena/src/qt-4.8.3/src/winmain'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/home/wena/src/qt-4.8.3/src/winmain'
make -f Makefile.Release all
make[2]: Entering directory `/home/wena/src/qt-4.8.3/src/winmain'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/home/wena/src/qt-4.8.3/src/winmain'
make[1]: Leaving directory `/home/wena/src/qt-4.8.3/src/winmain'
cd src/corelib/ && make -f Makefile 
make[1]: Entering directory `/home/wena/src/qt-4.8.3/src/corelib'
make -f Makefile.Debug all
make[2]: Entering directory `/home/wena/src/qt-4.8.3/src/corelib'
i686-w64-mingw32-g++ -shared -mthreads -Wl,--out-implib,/home/wena/src/qt-4.8.3/lib/libQtCored4.a -o ../../lib/QtCored4.dll object_script.QtCored.Debug  -L'/home/wena/src/qt-4.8.3/lib' -L'/home/wena/src/qt-4.8.3/lib' -lole32 -luuid -lws2_32 -ladvapi32 -lshell32 -luser32 -lkernel32 .obj/debug-shared/QtCored_resource_res.o 
Creating library file: /home/wena/src/qt-4.8.3/lib/libQtCored4.a
./.obj/debug-shared/qtextcodec.o: In function `setup':
/home/wena/src/qt-4.8.3/src/corelib/codecs/qtextcodec.cpp:771: undefined reference to `QGb18030Codec::QGb18030Codec()'
/home/wena/src/qt-4.8.3/src/corelib/codecs/qtextcodec.cpp:772: undefined reference to `QGbkCodec::QGbkCodec()'
/home/wena/src/qt-4.8.3/src/corelib/codecs/qtextcodec.cpp:773: undefined reference to `QGb2312Codec::QGb2312Codec()'
/home/wena/src/qt-4.8.3/src/corelib/codecs/qtextcodec.cpp:774: undefined reference to `QEucJpCodec::QEucJpCodec()'
/home/wena/src/qt-4.8.3/src/corelib/codecs/qtextcodec.cpp:775: undefined reference to `QJisCodec::QJisCodec()'
/home/wena/src/qt-4.8.3/src/corelib/codecs/qtextcodec.cpp:776: undefined reference to `QSjisCodec::QSjisCodec()'
./.obj/debug-shared/qtextcodec.o: In function `QEucKrCodec':
/home/wena/src/qt-4.8.3/src/corelib/codecs/../../plugins/codecs/kr/qeuckrcodec.h:77: undefined reference to `vtable for QEucKrCodec'
./.obj/debug-shared/qtextcodec.o: In function `QCP949Codec':
/home/wena/src/qt-4.8.3/src/corelib/codecs/../../plugins/codecs/kr/qeuckrcodec.h:91: undefined reference to `vtable for QCP949Codec'
./.obj/debug-shared/qtextcodec.o: In function `QBig5Codec':
/home/wena/src/qt-4.8.3/src/corelib/codecs/../../plugins/codecs/tw/qbig5codec.h:56: undefined reference to `vtable for QBig5Codec'
./.obj/debug-shared/qtextcodec.o: In function `QBig5hkscsCodec':
/home/wena/src/qt-4.8.3/src/corelib/codecs/../../plugins/codecs/tw/qbig5codec.h:70: undefined reference to `vtable for QBig5hkscsCodec'
collect2: ld returned 1 exit status
make[2]: *** [../../lib/QtCored4.dll] Error 1
make[2]: Leaving directory `/home/wena/src/qt-4.8.3/src/corelib'
make[1]: *** [debug-all] Error 2
make[1]: Leaving directory `/home/wena/src/qt-4.8.3/src/corelib'
make: *** [sub-corelib-make_default-ordered] Error 2 
```

我正在构建最新的 Debian 7 (Wheezy)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:20:54.367

使用-no-iconv cc-ing 4.7 时我遇到了同样的错误。

来到这个 src/corelib/codecs/codecs.pri 的 hack：

```
win32 {
        !contains(QT_CONFIG,iconv) {
                # no iconv, so we put all plugins in the library
                HEADERS += \
                        ../plugins/codecs/cn/qgb18030codec.h \
                        ../plugins/codecs/jp/qeucjpcodec.h \
                        ../plugins/codecs/jp/qjiscodec.h \
                        ../plugins/codecs/jp/qsjiscodec.h \ 
                        ../plugins/codecs/kr/qeuckrcodec.h \
                        ../plugins/codecs/tw/qbig5codec.h \
                        ../plugins/codecs/jp/qfontjpcodec.h
                SOURCES += \
                        ../plugins/codecs/cn/qgb18030codec.cpp \
                        ../plugins/codecs/jp/qjpunicode.cpp \
                        ../plugins/codecs/jp/qeucjpcodec.cpp \
                        ../plugins/codecs/jp/qjiscodec.cpp \
                        ../plugins/codecs/jp/qsjiscodec.cpp \ 
                        ../plugins/codecs/kr/qeuckrcodec.cpp \
                        ../plugins/codecs/tw/qbig5codec.cpp \
                        ../plugins/codecs/jp/qfontjpcodec.cpp
        }
} 
```

还有其他错误和黑客攻击，但看起来它们在 4.8.3 中消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:44:14.163

You are missing the `libiconv` library used by the text codec plugins. Someone with the same problem [here](http://comments.gmane.org/gmane.comp.lib.qt.general/42338).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T18:30:07.953

为避免此错误：

```
In file included from main.cpp:42:0: dialog.h:65:5: error: ‘QSharedMemory’ does not name a type 
```

看起来像 mxe 使用`./configure -nomake examples ...`（另一个选项是 vlc 使用的，它只是做`make sub-src`而不是全局 make——尽管你不能使用`make install`这个方法，因为它仍然试图构建示例）。对我来说似乎是 qt 中的一个错误......或者使用本地构建的 qmake 会有所帮助，没有尝试过......

另请参阅[如何配置 Qt 以实现从 Linux 到 Windows 目标的交叉编译？](https://stackoverflow.com/questions/10934683/how-do-i-configure-qt-for-cross-compilation-from-linux-to-windows-target/18775859#18775859)

# jquery - Jquery Countup until Next Monday 和从定义日期到今天日期的总星期一

> ID：13075578
> 
> 赞同：1
> 
> 时间：2012-10-25T19:12:47.560
> 
> 标签：jquery, count, counter

我正在尝试编写一个计数来显示我们从特定日期开始有多少个星期一。

例如，自 2012 年 10 月 1 日以来，我们有 4 个星期一，直到今天 10 月 25 日。

这第一步我可以通过从某些地方进行一些编码搜索并根据我的需要进行调整来实现。

现在对我来说棘手的部分是要找到一种方法来显示一个计数，该计数显示从现在到下个月剩余的百分比，以增加另一个星期一到主计数器。

例如，从 2012 年 10 月 1 日到现在，我们有 4 个星期一，但是 10 月 25 日是星期四，所以我怎么能做一个计数来显示时间随着下星期一达到的剩余价值而增加？

我试着像使用天、小时、分钟和秒一样进行计数，所以每次运行它都从今天开始，值一直计数到下一个星期一，所以每周我们都会在计数器中有一个这样的数字：6days 23hours 59minutes 59seconds 然后在星期一的数量上添加一个新数字，这样我们在 6 天后实现了一个新的星期一，但是当然，如​​果我访问运行中间代码的页面，我将已经有了带有附加值的计数器它并计数每一秒的生活。

有人可以帮忙吗？如果您知道实现相同目标的更好方法，那是完全可以的。

**总结一下我想要实现的是一个计数器，它显示已经过去了多少个星期一以及下一个星期一还剩多少时间并实时计数。它必须永远持续下去，不要在下周一停止，在达到下周一之后，它会一直持续到下周一。**

欢迎提问！

```
<pre><code>

// This Code Counts how many mondays from a specified date to the actual date.
// Create a new date variable
var d = new Date();
var month = d.getMonth() + 1;
var day = d.getDate();

// Get the actual date and store on a variable
var actualDate = d.getFullYear() + '/' + (('' + month).length < 2 ? '0' : '') + month + '/' + (('' + day).length < 2 ? '0' : '') + day;

// Set dates start and get actual date
var date1 = new Date('10/01/2012'); // Set the begninning date here
var date2 = new Date(actualDate);

var monday = Math.abs(date1.getTime() - date2.getTime()) / (1000 * 60 * 60 * 24 * 7);
monday -= 0.1;
monday = Math.floor(monday);
monday *= 1;

if (date1.getDay() == 1) monday += 1;
if (date2.getDay() == 1) monday += 1;

//$('').html(monday);
$("#showMondays").text(monday);

</pre></code> 
```

这是周一的工作柜台：http: [//jsfiddle.net/hRaAF/](http://jsfiddle.net/hRaAF/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:54:33.863

我将以下代码添加到您的小提琴中，您可以看到它在[这里](http://jsfiddle.net/hRaAF/24/)工作。

```
var nextMonday = function(now) {
    var day = now.getUTCDay();
    var next = new Date();
    next.setDate(next.getDate() + (7 - day));
    next.setHours(0);
    next.setMinutes(0);
    next.setSeconds(0);
    return next;
};

var SECS = 1000;
var MINS = 60 * SECS;
var HOURS = 60 * MINS;
var DAYS = 24 * HOURS;

var countDown = function() {
    var now = new Date();
    var next = nextMonday(now);
    var difference = Math.abs(next - now);

    var days = Math.floor(difference / DAYS);
    difference = difference % DAYS;
    var hours = Math.floor(difference / HOURS);
    difference = difference % HOURS;
    var minutes = Math.floor(difference / MINS);
    difference = difference % MINS;
    var seconds = Math.floor(difference / SECS);

    var text = days + ' days ' + hours + ' hours ' + minutes + ' minutes ' + seconds + ' seconds ';

    $('#count').text(text);
    setTimeout(countDown, 1000);
};

countDown();
setTimeout(countDown, 1000); 
```

* * *

**编辑**

[这](http://jsfiddle.net/hRaAF/38/)是修改后的代码。我删除了以前计算自给定星期一以来的星期一数的代码，并替换为更简单的版本。您可以测试它更改计算机中的日期和时间，因为这是 javascript 获取当前日期值的地方。

```
var begin = new Date('10/01/2012');

var SECS = 1000;
var MINS = 60 * SECS;
var HOURS = 60 * MINS;
var DAYS = 24 * HOURS;
var WEEKS = 7 * DAYS;

var countMondaysFrom = function(begin) {
    var difference = Math.abs(new Date() - begin);
    var days = Math.floor(difference / WEEKS);
    return days;

};

var lastMonday = function(now) {
    var day = now.getUTCDay() - 1;
    day = day < 0 ? 6 : day;
    var last = new Date();
    last.setDate(last.getDate() - day);
    last.setHours(0);
    last.setMinutes(0);
    last.setSeconds(0);
    return last;
};

var countUp = function() {
    var now = new Date();
    var last = lastMonday(now);
    var difference = Math.abs(now - last);

    var days = Math.floor(difference / DAYS);
    difference = difference % DAYS;
    var hours = Math.floor(difference / HOURS);
    difference = difference % HOURS;
    var minutes = Math.floor(difference / MINS);
    difference = difference % MINS;
    var seconds = Math.floor(difference / SECS);

    var text = days + ' days ' + hours + ' hours ' + minutes + ' minutes ' + seconds + ' seconds ';

    $('#count').text(text);
    $("#showMondays").text(countMondaysFrom(begin));
    setTimeout(countUp, 1000);
};

countUp();
setTimeout(countUp, 1000);​ 
```

# powershell - 如何使用 Powershell 管理 Azure Table？

> ID：13075580
> 
> 赞同：1
> 
> 时间：2012-10-25T19:13:09.313
> 
> 标签：powershell, azure

我已经在搜索这个，但我无法让它工作。我已经可以访问表存储并列出所有表。我现在如何使用 Powershell 更新 Azure 中特定表中的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-13T21:51:32.480

这是一个纯powershell + azure storage api的解决方案：

[https://github.com/chriseyre2000/Powershell/tree/master/Azure2](https://github.com/chriseyre2000/Powershell/tree/master/Azure2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:51:36.013

请查看 Cerebrata Azure 管理 Cmdlets ( [http://www.cerebrata.com/Products/AzureManagementCmdlets](http://www.cerebrata.com/Products/AzureManagementCmdlets) )，其中包含用于管理 Windows Azure 存储的 Cmdlet。其他替代方法是在 PowerShell 中使用存储客户端库。请查看此线程以获取示例：[如何更改 Add-Blob Azure cmdlet 的超时值？](https://stackoverflow.com/questions/12976896/how-do-i-change-the-timeout-value-for-add-blob-azure-cmdlet/12986393#12986393)虽然它是用于上传具有超时值的 blob，但它应该让您了解在 PowerShell 中使用存储客户端库。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-05T22:07:33.093

还有 Pipeworks 库[http://powershellpipeworks.com/](http://powershellpipeworks.com/)

按照连接云示例。

# sql - 为什么会出现“[SQL0802] 数据映射错误的数据转换”异常？

> ID：13075585
> 
> 赞同：9
> 
> 时间：2012-10-25T19:13:29.480
> 
> 标签：sql, ibm-midrange, data-conversion

我对 iseries/DB2 不是很熟悉。但是，我在一个使用它作为主要数据库的网站上工作。

最近向现有表中添加了一个新列。当我通过 AS400 查看时，我看到以下数据类型：

```
Type: S
Length: 9
Dec: 2 
```

这告诉我这是一个数字字段，小数点前有 6 位，小数点后有 2 位。

当我使用简单的 SELECT ( `SELECT MYCOL FROM MYTABLE`) 查询数据时，我可以毫无问题地取回所有记录。但是，当我尝试在同一列上使用 、 或 时，出现以下`DISTINCT`异常`GROUP BY`：`ORDER BY`

```
[SQL0802] Data conversion of data mapping error 
```

我推断至少一条记录包含无效数据——我的 DBA 称之为“空白”或“4 O”。这怎么可能呢？当尝试将无效数据添加到该列时，数据库不应该抛出异常吗？

有什么办法可以解决这个问题，例如过滤掉查询中的那些不良记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:05:38.643

“4 O”表示 0x40，它是空格或空白字符的 EBCDIC 代码，是放入记录中任何新空格的默认值。

遗留程序/操作可能会引入十进制数据错误。例如，如果新文件是使用带有选项的`CPYF`命令创建和填充的。`FMTOPT(*NOCHK)`

修复它的最简单方法是编写一个 HLL 程序 (RPG) 来读取文件并更正记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T15:40:35.243

我能找到的唯一解决方案是编写一个脚本来检查列中的空白值，然后在找到它们时将它们更新为零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T20:07:56.620

如果文件已关闭记录格式级别检查 [即。`LVLCHK(*NO)`] 或被覆盖，然后是 HLL 程序。（例如 RPG、COBOL 等）未使用新记录重新编译的记录可能会在此列中写出具有无效数据的记录，尤其是在新列不在记录末尾时。

确保重新编译所有使用本机 I/O 写入或更新此文件记录的程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-03T13:58:26.543

我能够通过将键列强制转换为整数来解决此错误。我从这个改变了加入......

```
FROM DAILYV INNER JOIN BXV ON DAILYV.DAITEM=BXV.BXPACK 
```

……到这……

```
FROM DAILYV INNER JOIN BXV ON CAST(DAILYV.DAITEM AS INT)=CAST(BXV.BXPACK AS INT) 
```

...而且我不必对表格进行任何更正。这是一个非常古老、非常混乱的数据库，里面有很多垃圾。我做了很多更正，但这是一项正在进行的工作。

# c# - 配置 AutoMapper 以映射到具体类型，但在我的类的定义中允许接口

> ID：13075588
> 
> 赞同：21
> 
> 时间：2012-10-25T19:13:36.157
> 
> 标签：c#, .net, automapper

我有一些类似于下面的代码。基本上，它表示从 Web 服务获取数据并将其转换为客户端对象。

```
void Main()
{
    Mapper.CreateMap<SomethingFromWebService, Something>();    
    Mapper.CreateMap<HasSomethingFromWebService, HasSomething>(); 
    // Service side
    var hasSomethingFromWeb = new HasSomethingFromWebService();
    hasSomethingFromWeb.Something = new SomethingFromWebService
            { Name = "Whilly B. Goode" };
    // Client Side                
    HasSomething hasSomething=Mapper.Map<HasSomething>(hasSomethingFromWeb);  
}    
// Client side objects
public interface ISomething
{
    string Name {get; set;}
}    
public class Something : ISomething
{
    public string Name {get; set;}
}    
public class HasSomething
{
    public ISomething Something {get; set;}
}    
// Server side objects
public class SomethingFromWebService
{
    public string Name {get; set;}
}    
public class HasSomethingFromWebService
{
    public SomethingFromWebService Something {get; set;}
} 
```

我遇到的问题是我想在我的类中使用接口（在这种情况下是 HasSomething.ISomething），但我需要将 AutoMapper 映射到具体类型。（如果我不映射到具体类型，那么 AutoMapper 将为我创建代理。这会导致我的应用程序出现其他问题。）

上面的代码给了我这个错误：

> 缺少类型映射配置或不支持的映射。
> 
> 映射类型：SomethingFromWebService -> ISomething
> UserQuery+SomethingFromWebService -> UserQuery+ISomething

**所以我的问题是，我怎样才能映射到具体类型并在我的类中仍然使用接口？**

***注意：***我尝试添加此映射：

```
Mapper.CreateMap<SomethingFromWebService, ISomething>(); 
```

但是返回的对象不是类型`Something`，它返回使用 ISomething 作为模板生成的代理。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-25T19:36:02.677

所以我想出了一些似乎可行的方法。

如果我添加这两个映射：

```
Mapper.CreateMap<SomethingFromWebService, Something>();
Mapper.CreateMap<SomethingFromWebService, ISomething>().As<Something>(); 
```

然后它按我的意愿工作。

我无法找到有关“As”方法的任何文档（尝试使用谷歌搜索！:)，但它似乎是映射重定向。

例如：对于这个 Mapping( `ISomething`) 将它解析`As`为`Something`.

# asp.net-mvc-3 - 我们可以共享站点身份验证 cookie 吗？

> ID：13075591
> 
> 赞同：1
> 
> 时间：2012-10-25T19:13:43.477
> 
> 标签：asp.net-mvc-3

我有两个网站 domain1.com 和 domain2.com 用户进入 domain1.com 并且我进行身份验证

它并创建身份验证cookie，是否可以通过domain2.com共享此cookie，对于

例如，当用户 Soto domain2.com 因为在 domain1.com 中进行了身份验证而进行了身份验证时？

```
is it possible?
I'm looking for a simple way and these domains are not 
a sub domains they are two separate site 
```

注意我不想使用 sql server url 参数或其他方式

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:16:57.077

这可以在您的网络配置中 使用`<authentication>`和。`<machineKey>`

机器密钥 包含解密密钥和验证密钥。这在两个 Web 配置中必须相同。

```
<machineKey
 decryptionKey="A225194E99BCCB0F6B92BC9D82F12C2907BD07CF069BC8B4"
 validationKey="6FA5B7DB89076816248243B8FD7336CCA360DAF8" /> 
```

身份验证这必须在两个 Web 配置中，但值特定于应用程序。

```
<authentication mode="Forms">
  <forms name=".ASPXFORMSAUTH" 
         path="/" 
         loginUrl="~Membership/login"
         protection="ALL"
         timeout="1000" />
</authentication> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:31:52.210

绝对地。希望两个站点共享相同的用户名数据库或复制它，以便您可以使用`HttpContext.User.Identity.Name`.

无论如何，基本上您需要更新您的 web.config`<authentication>`部分，使其在两个站点之间完全相同。这意味着您的机器密钥、解密密钥、算法......一切。

[这是 MSDN 文章](http://msdn.microsoft.com/en-us/library/eb0zx8fc%28v=vs.100%29.aspx)，其中包含有关如何继续跨多个应用程序共享身份验证的完整说明

# javascript - 如何判断一个对象是否是 jQuery Promise/Deferred？

> ID：13075592
> 
> 赞同：29
> 
> 时间：2012-10-25T19:13:42.877
> 
> 标签：javascript, jquery, jquery-deferred

我有一个接受单个参数的函数。我需要能够判断这个参数是 jQuery`Promise`还是`Deferred`对象。如果不是，那么该值可能是任何类型并具有任何属性，因此仅仅因为 promise 方法的存在是不安全的。

这是我希望我的函数如何表现的示例：

```
function displayMessage(message) {
  if (message is a Promise or Deferred) {
    message.then(displayMessage);
  } else {
    alert(message);
  }
} 
```

注意promise 的递归处理：如果一个promise 被另一个promise 值解决，我们不显示它，我们等待它被解决。如果它返回另一个承诺，请重复。

* * *

这很重要，因为如果不是这种情况，我就可以使用[`jQuery.when`](http://api.jquery.com/jQuery.when/)：

```
function displayMessage(message) {
  jQuery.when(message).then(function(messageString) {
    alert(messageString);
  });
} 
```

这将正确处理价值观和价值观的承诺......

```
displayMessage("hello");                            // alerts "hello"
displayMessage(jQuery.Deferred().resolve("hello")); // alerts "hello" 
```

...但是一旦我们得到价值承诺的承诺，它就会崩溃：

```
displayMessage(jQuery.Deferred().resolve(
  jQuery.Deferred().resolve("hello")
));                                                 // alerts "[object Object]" 
```

* * *

`jQuery.when`能够判断一个值是否是承诺，所以显然这是可能的。我该如何检查？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-25T19:40:59.153

> `jQuery.when`能够判断一个值是否是承诺，所以显然这是可能的。

这是错误的。jQuery 本身无法检查对象是否是完全准确的承诺。如果您查看`jQuery.when` [jQuery 源代码查看器中的](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.when)源代码，您会发现它所做的只是：

```
jQuery.isFunction(firstParam.promise) 
```

如果您返回的对象有自己的`.promise()`方法，`jQuery.when`则会出现异常：

```
var trickyValue = {
  promise: function() { return 3; },
  value: 2
};

jQuery.when(trickyValue).then(function(obj) {
  alert(obj.value);
}); 
```

这会抛出`TypeError: Object 3 has no method 'then'`，因为 jQuery 假定该对象是一个 Promise 并信任其`.promise()`方法的值。

这可能无法正确解决。Promise 对象被创建为`jQuery.Deferred`（[查看源代码](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.Deferred)）内部的对象文字。它没有原型，也没有任何其他真正独特的属性可以用来区分它。

但是，我可以想到一个 hacky 解决方案，只要只使用一个版本的 jQuery，它就应该是可靠的：

```
function isPromise(value) {
  if (typeof value === 'object' && typeof value.then !== "function") {
    return false;
  }
  var promiseThenSrc = String($.Deferred().then);
  var valueThenSrc = String(value.then);
  return promiseThenSrc === valueThenSrc;
}

isPromise("test");                 // false
isPromise($.Deferred());           // true
isPromise($.Deferred().promise()); // true 
```

将函数转换为字符串会给你它的源代码，所以在这里我将`.then`一个新`Deferred`对象的方法的源与我感兴趣的值的源进行比较。你的值不会有一个`.then`完全相同的方法源代码为 a`jQuery.Deferred`或`Promise`¹。

[^(1.)除非你在恶劣的环境中运行，在这种情况下你应该放弃。]

* * *

如果你对 jQuery Promise 不是特别感兴趣，但想检测*任何*类型的 Promise，包括 ECMAScript 6 中的内置 Promise，你可以测试 value 是否是一个对象并且有一个`then`方法：

```
if (typeof value === 'object' && typeof value.then === 'function') {
  // handle a promise
} else {
  // handle a concrete value
} 
```

这是 ES6 中定义的几个 Promise 处理函数的方法。您可以在[功能](http://www.ecma-international.org/ecma-262/6.0/#sec-promise-resolve-functions)[规范中`resolve(...)`](http://www.ecma-international.org/ecma-262/6.0/#sec-promise-resolve-functions)看到这一点，部分引用如下：

> 当使用参数*resolution调用 promise resolve 函数**F*时，将执行以下步骤：
> 
>  *[...]
> 
> 7.  如果 Type( *resolution* ) 不是 Object，那么
>     1.  返回 FulfillPromise(*承诺*,*决议*)。
> 8.  让然后是Get（*分辨率*，**`"then"`**）。
> 9.  如果 then 是一个突然的完成，那么
>     1.  返回 RejectPromise( *promise*，*然后*.[[value]])。
> 10.  让*thenAction*为*then* .[[value]]。
> 11.  如果 IsCallable( *thenAction* ) 为**false**，则
>     1.  返回 FulfillPromise(*承诺*,*决议*)。
> 12.  执行 EnqueueJob ( **`"PromiseJobs"`**, PromiseResolveThenableJob, *«‍promise, resolution, thenAction»* )*

 ** * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-25T19:20:22.897

快速而肮脏的解决方案是测试对象是否具有`then`功能：

```
if (typeof message.then === 'function') {
    //assume it's a Deferred or fits the Deferred interface
} else {
    //do other stuff
} 
```*

# linux - termios.c_cflag 中的 CLOCAL 和 CRTSCTS 标志如何影响串行端口？

> ID：13075595
> 
> 赞同：8
> 
> 时间：2012-10-25T19:13:48.977
> 
> 标签：linux, serial-port, uart, termios

我想配置一个 UART 以在 Linux 中使用硬件流控制线 RTS 和 CTS。根据[http://linux.die.net/man/3/termios](http://linux.die.net/man/3/termios)，CRTSCTS 启用 RTS/CTS（硬件）流控制，CLOCAL 将串口配置为忽略调制解调器控制线。这两个标志似乎是矛盾的，你怎么能用 CRTSCTS 启用硬件流控制而忽略 CLOCAL 行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T21:12:37.253

`CLOCAL`仅忽略**CD**信号。

# php - 无法取消链接或 chmod - 权限被拒绝

> ID：13075598
> 
> 赞同：0
> 
> 时间：2012-10-25T19:14:24.443
> 
> 标签：php, permissions, chmod, unlink

我正在尝试将文件更改为 777 权限，然后使用 PHP 中的取消链接将其删除。但是，我收到权限被拒绝错误。不过，我可以在 filezilla 中通过 FTP 登录时更改权限。

我该如何解决 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:19:16.827

您可能会被拒绝权限，因为 PHP 可能以特殊权限运行，这意味着您将无法从 PHP 更改该文件的权限，但是，您将能够使用 FTP 管理器将其删除. 如果您仍然希望能够更改该文件的权限，您可能需要创建一个特殊用户来运行 PHP，或者如果您使用的是主机，您可能需要联系为您提供 Web 服务的主机。我只是让您知道，随着时间的推移，授予 PHP 更多权限可能会带来安全风险。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T19:19:57.623

我建议你尝试以下。

```
while(is_file($data_file_to_delete) == TRUE)
{
   chmod($data_file_to_delete, 0666);
   unlink($data_file_to_delete);
 } 
```

如果它不起作用，那么试试这个

```
unlink('ftp://user:pass@host/absolute/path/to/file'); 
```

如果这些都不起作用，那么我会考虑使用更复杂的 FTP 功能。

# javascript - 使用 jQuery 反向滚动元素

> ID：13075600
> 
> 赞同：4
> 
> 时间：2012-10-25T19:14:29.553
> 
> 标签：javascript, jquery, html, jquery-ui

**找到了以下问题的解决方案：**这里是[Js Fiddle](http://jsfiddle.net/daneuchar/zHyA9/)

特别感谢[jonhkr](https://stackoverflow.com/users/1669229/jonhkr)

我一直在 jquery 中进行反向滚动，我需要帮助。我的东西/代码：[Js Fiddle](http://jsfiddle.net/daneuchar/CZvWC/)

**达到：**

1.  当内容向下滚动时，火箭向上移动。

**问题：**

1.  当火箭向上拖动时，内容必须向下滚动。
2.  向可拖动对象添加“遏制”似乎不起作用。
3.  这必须与隐藏的溢出一起使用。

**对于那些没有小提琴的人：**

**HTML：**

```
<div id="test">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eget nisi ipsum. Donec semper, justo at fringilla condimentum, felis tellus ultricies dolor, id convallis metus nulla quis est. Vivamus facilisis orci vel lectus blandit commodo blandit sem tempor. Curabitur condimentum, diam quis pretium feugiat, sem ante pretium tortor, in lobortis massa eros vitae dui. Nullam nisi mauris, condimentum a feugiat in, euismod quis augue. Maecenas euismod adipiscing tellus. Aliquam elementum egestas dolor, vel aliquam nulla tincidunt eget. Etiam risus elit, scelerisque eu volutpat sed, faucibus non ante. Donec sed nunc erat, eget facilisis risus. Etiam id odio tortor. Sed aliquam viverra volutpat. Sed gravida lectus eu mi ornare in feugiat magna elementum. Pellentesque in dolor ligula.

Maecenas condimentum nisl eget arcu elementum nec imperdiet risus lobortis. Suspendisse id placerat turpis. Etiam dolor quam, placerat et volutpat nec, ultricies sed lorem. Fusce volutpat lobortis est ut pellentesque. Donec enim mauris, pretium quis gravida vitae, pellentesque ac nibh. Proin condimentum aliquam scelerisque. Vestibulum aliquet pharetra dapibus. Donec id nisi non nibh fringilla auctor et eget erat. Morbi pretium mauris sed orci pretium aliquam. Nulla pharetra venenatis nunc, in venenatis purus tempor vitae. Vivamus tincidunt dui non eros gravida sit amet consectetur nibh lacinia. 

Maecenas semper ligula et urna tincidunt placerat. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Suspendisse arcu urna, facilisis at tempus id, posuere sed lacus. Vestibulum in feugiat tellus. Nullam suscipit, velit nec tincidunt pellentesque, enim odio ornare mauris, quis faucibus sem sapien sed turpis. Nulla sit amet risus in magna iaculis scelerisque sit amet vel erat. Morbi eu vestibulum nulla. Etiam auctor auctor felis, nec sodales velit condimentum non. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Duis eu massa diam, eu porttitor eros. Etiam blandit, turpis ac volutpat gravida, massa lorem congue orci, eget fringilla eros felis quis elit. Suspendisse quam tellus, pretium non mattis ut, laoreet in diam. Suspendisse ante odio, venenatis vel condimentum vitae, varius id sapien. Quisque ac nunc ipsum. Mauris porttitor blandit magna, id rutrum ipsum pellentesque non. In suscipit diam ligula, non tristique diam.

Aliquam interdum ante at nisl sagittis vel luctus eros fringilla. Vestibulum purus orci, ultrices at tristique et, malesuada eget enim. Praesent commodo erat vel massa auctor id elementum elit elementum. Duis diam urna, mollis ut imperdiet aliquam, commodo id dui. Etiam vulputate facilisis dui id convall

</div>
<div id="track">
    <div id="rocket">    
    </div>
</div>
<div id="xpos" style="clear:both">
</div> 
```

**CSS：**

```
#track {
    height: 400px;
    width: 48px;
    overflow: hidden;
    margin: 10px 0 0 10px;
    background:#ccc;
    float:left;
}
#rocket{
    height:48px;
    width:48px;
    background:#ccc url('http://www.veryicon.com/icon/preview/System/GANT%203/Rocket,%20This%20is%20a%20damn%20good%20Icon.jpg');

}
​ 
```

**JS (JQuery 1.8.2 & Jquery UI):**

```
$(document).ready(function() {
    $(function() {
        var left = parseInt($('#track').css('margin-left'), 10);
        var top = parseInt($('#track').css('margin-top'), 10);
        $("#rocket").draggable({
            containment: "#track",
            axis: "y",
            scroll: false,
            drag: function(event, ui) {
                // Show the current dragged position of image
                var currentPos = $(this).position();
                $("div#xpos").text("CURRENT: \nLeft: " + (currentPos.left - left) + "\nTop: " + (currentPos.top - top));
            }
        });
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:37:20.060

我改变了一点你的代码来解决这些问题：

向可拖动对象添加“遏制”似乎不起作用。

```
 var draggingRocket = false;
   $("#test").scroll(function(event) {
       if(!draggingRocket){
            var st = $(this).scrollTop();
            var pos = iHeight - (st / cr);
            $("#rocket").css("top", pos);
       }
   });

    //rocket drag
    $("#rocket").draggable({
        containment: $('#track'),
        axis: "y",
        scroll: false,
        start: function(event, ui) {
            draggingRocket = true;
        },
        drag: function(event, ui) {
            // Show the current dragged position of image
            var currentPos = $(this).position();
            $("div#xpos").text("CURRENT: \nLeft: " + (currentPos.left - left) + "\nTop: " + (currentPos.top - top));
            $("#test").scrollTop(currentPos.top);    
        },
        stop: function(event, ui) {
            draggingRocket = false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:33:02.743

首先，干得好。

好吧，我认为您的解决方案并不牵强。基本上你需要使用

```
$("#test").scrollTop((top - currentPos.top)*cr); 
```

设置 div 测试的 scrollTop。我使用的方程式不准确，但您可以相应地更改它。

希望这能给你带来领先：

演示：http: [//jsfiddle.net/CZvWC/7/](http://jsfiddle.net/CZvWC/7/)

# xml - 在另一个类中显示 NSMutableArray 的内容

> ID：13075601
> 
> 赞同：1
> 
> 时间：2012-10-25T19:14:30.743
> 
> 标签：xml, class, parsing

我已将推文加载到 NSMutableArray 中，我想在另一个类、文本视图或类似的东西中显示最新推文的内容。

推文.h：

```
#import <Foundation/Foundation.h>

@interface Tweet : NSObject

@property (strong, nonatomic)NSString *content;
@property (strong, nonatomic)NSString *dateCreated;

@end 
```

推文.m:

```
#import "Tweet.h"

@implementation Tweet

@synthesize content = _content;
@synthesize dateCreated = _dateCreated;

@end 
```

XMLParser.h：

```
#import "Foundation/Foundation.h"
#import "Tweet.h"

@interface XMLParser : NSObject <NSXMLParserDelegate>

@property (strong, readonly) NSMutableArray *tweets;

-(id) loadXMLByURL:(NSString *)urlString;

@end 
```

XMLParser.m：

```
#import "Foundation/Foundation.h"
#import "XMLParser.h"

@implementation XMLParser
@synthesize tweets = _tweets;

NSMutableString *currentNodeContent;
NSXMLParser *parser;
Tweet *currentTweet;
bool isStatus;

bool isdone = true;

-(id) loadXMLByURL:(NSString *)urlString
{
    _tweets = [[NSMutableArray alloc] init];
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *data = [[NSData alloc] initWithContentsOfURL:url];
    parser = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
    return self;
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:     [NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"status"])
    {
    currentTweet = [Tweet alloc];
    isStatus = YES;
    }
    if ([elementName isEqualToString:@"user"])
    {
        isStatus = NO;
    }
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if (isStatus) {
        if ([elementName isEqualToString:@"text"])
        {
            currentTweet.content = currentNodeContent;
        }
        if ([elementName isEqualToString:@"created_at"])
        {
            currentTweet.dateCreated = currentNodeContent;
        }

    }
    if ([elementName isEqualToString:@"status"])
    {
        [self.tweets addObject:currentTweet];
        currentTweet = nil;
        currentNodeContent = nil;
    }
}

@end 
```

ProgramTeknik.h:

```
#import <UIKit/UIKit.h>
#import "XMLParser.h"
#import "Tweet.h"

@interface ProgramTeknik : UIViewController
@property (weak, nonatomic) IBOutlet UITextView *teknikNews;

@end 
```

ProgramTeknik.m:

```
#import "ProgramTeknik.h"
#import "ViewController.h"
#import "XMLParser.h"
#import "Tweet.h"

@interface ProgramTeknik ()

@end

@implementation ProgramTeknik

XMLParser *xmlParser; 

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    [super viewDidLoad];
    // Do any additional setup after loading the view.

    xmlParser = [[XMLParser alloc] loadXMLByURL:@"http://api.twitter.com/1/statuses/user_timeline/baristashopen.xml"];

_teknikNews.text = @"test";

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我想在 ProgramTeknik 课上展示推文，你们有什么想法吗？非常感谢！

# asp.net-mvc - ASP.Net MVC3 路由问题

> ID：13075604
> 
> 赞同：3
> 
> 时间：2012-10-25T19:15:06.560
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我正在一个交易网站上工作，并在 global.asax 中定义了以下路线。

```
routes.MapRoute(
    "AboutFooter",
    "about-bicker-shop",
    new { controller = "Footer", action = "About" }
);

routes.MapRoute(
    "ContactFooter",
    "contact-bickershop",
    new { controller = "Footer", action = "Contact" }
);

routes.MapRoute(
    "PrivacyPolicyFooter",
    "privacy-policy",
    new { controller = "Footer", action = "PrivacyPolicy" }
);

routes.MapRoute(
    "TermsAndConditionsFooter",
    "terms-and-conditions",
    new { controller = "Footer", action = "TermsAndConditions" }
);

routes.MapRoute(
    "SiteMapFooter",
    "sitemap",
    new { controller = "Footer", action = "SiteMap" }
);

routes.MapRoute(
    "FAQFooter",
    "faq",
    new { controller = "Footer", action = "FAQ" }
);

routes.MapRoute(
    "UnsubscribeFooter",
    "unsubscribe",
    new { controller = "Footer", action = "Unsubscribe" }
);

routes.MapRoute(
    "GetDealsByCity",
    "daily-bickers/{cityName}",
    new { controller = "Home", action = "Home" }
);

routes.MapRoute(
    "GetDealsbyCategory",
    "daily-bickers/{cityname}/{category}",
    new { controller = "Home", action = "GetDealsByCategory" }
);

routes.MapRoute(
    "GetDealDetails",
    "{cityName}/{dealName}",
    new { controller = "Home", action = "GetDealsByDealName" }
);

routes.MapRoute(
    "DealCheckout",
    "{cityName}/{dealName}/checkout",
    new { controller = "Home", action = "CheckoutDealByDealName" }
);

routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

在我查看交易详情之前它工作正常，但是当我点击购买按钮购买交易时出现错误。

在进一步的研究中，我发现点击购买按钮时，代码调用的是`GetDealsByDealName`action 而不是 action `CheckoutDealByDealName`。请建议我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:46:25.750

MVC 将始终提供它可以在路由表中找到的与请求的路由匹配的第一个路由。在这种情况下，您获得错误路线的原因是因为它们都与`GetDealDetails`路线匹配。即使第二条路线更具体，它也永远不会到达，因为它`GetDealDetails`总是首先匹配。尝试像这样重新排序您的路线：

```
routes.MapRoute(
    "DealCheckout",
    "{cityName}/{dealName}/checkout",
    new { controller = "Home", action = "CheckoutDealByDealName" }
);

routes.MapRoute(
    "GetDealDetails",
    "{cityName}/{dealName}",
    new { controller = "Home", action = "GetDealsByDealName" }
); 
```

这应该允许 details 路线与 checkout 路线不匹配，但在冲突期间将首先捕获 checkout。我真的建议你完全重命名你的路线，但是看看你有什么我可以理解你为什么想要这些路线。

# c# - 在 C# 控制台应用程序中组合来自 SSRS 的多个 Excel 电子表格

> ID：13075615
> 
> 赞同：1
> 
> 时间：2012-10-25T19:15:37.563
> 
> 标签：c#, export-to-excel, npoi

我正在尝试将一个 Excel 工作簿目录合并，每个 Excel 工作簿都有一个我从 SSRS 生成的工作表到一个工作簿中，而不会丢失其格式和单元格样式以及合并的单元格。我正在尝试使用 NPOI，但我似乎无法找到任何可以保持我的格式的东西（每个电子表格都是从几个子报告生成的一个报告，因此 SSRS 的布局包含各种合并区域）。关于我如何做到这一点的任何想法？

# ruby - Rails 3.2.8 - 如何从 Rails 获取周数？

> ID：13075617
> 
> 赞同：27
> 
> 时间：2012-10-25T19:15:45.173
> 
> 标签：ruby, ruby-on-rails-3

我想知道如何从 Rails 获取当前周数以及如何操作它：

1.  将周数转换为日期。
2.  根据周数进行间隔。

谢谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-25T19:18:34.003

使用[`strftime`](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)：

> `%U`- 一年中的周数。一周从星期日开始。(00..53)
> `%W`- 一年中的周数。一周从星期一开始。(00..53)

```
Time.now.strftime("%U").to_i # 43

# Or...

Date.today.strftime("%U").to_i # 43 
```

如果您想*将*43 周（或天、年、分钟等）添加到日期，您可以使用[`43.weeks`](http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Numeric/Time.html#M000324)ActiveSupport 提供的：

```
irb(main):001:0> 43.weeks
=> 301 days

irb(main):002:0> Date.today + 43.weeks
=> Thu, 22 Aug 2013

irb(main):003:0> Date.today + 10.days
=> Sun, 04 Nov 2012

irb(main):004:0> Date.today + 1.years # or 1.year
=> Fri, 25 Oct 2013

irb(main):005:0> Date.today + 5.months
=> Mon, 25 Mar 2013 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-01-05T17:13:26.927

你会想要远离`strftime("%U")`and `"%W"`。

**相反，使用`Date.cweek`.**

问题是，如果您想要获取周数并将其转换为日期，`strftime`则不会给您一个可以传回的值`Date.commercial`。

`Date.commercial`期望一个基于 1 的值范围。 `Date.strftime("%U|%W")`返回一个基于 0 的值。你会认为你可以 +1 就可以了。问题将在一年结束时出现，那时有 53 周。（就像刚刚发生的那样……）

例如，让我们看一下 2015 年 12 月末以及您获得周数的两个选项的结果：

```
Date.parse("2015-12-31").strftime("%W") = 52
Date.parse("2015-12-31").cweek = 53 
```

现在，让我们看一下将该周数转换为日期...

```
Date.commercial(2015, 52, 1) = Mon, 21 Dec 2015
Date.commercial(2015, 53, 1) = Mon, 28 Dec 2015 
```

如果您盲目地 +1 传递给 的值`Date.commercial`，则在其他情况下您最终会得到无效的日期：

例如，2014 年 12 月：

```
Date.commercial(2014, 53, 1) = ArgumentError: invalid date 
```

如果您必须将该周数转换回日期，唯一可靠的方法是使用`Date.cweek`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T19:29:26.070

```
date.commercial([cwyear=-4712[, cweek=1[, cwday=1[, start=Date::ITALY]]]]) → date
Creates a date object denoting the given week date.

The week and the day of week should be a negative 
or a positive number (as a relative week/day from the end of year/week when negative). 
They should not be zero. 
```

对于区间

```
require 'date'

  def week_dates( week_num )
    year = Time.now.year
    week_start = Date.commercial( year, week_num, 1 )
    week_end = Date.commercial( year, week_num, 7 )
    week_start.strftime( "%m/%d/%y" ) + ' - ' + week_end.strftime("%m/%d/%y" )
  end

  puts week_dates(22) 
```

> EG：输入（周数）：22
> 
> 输出：06/12/08 - 06/19/08

信用：Siep Korteling [http://www.ruby-forum.com/topic/125140](http://www.ruby-forum.com/topic/125140)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-16T13:51:18.937

[`Date#cweek`](http://ruby-doc.org/stdlib-2.2.2/libdoc/date/rdoc/Date.html#method-i-cweek)似乎`%V`在 strftime 中获得了 ISO-8601 周数（基于星期一的一周）（@Robban 在评论中提到）。

例如，我正在写这个星期的星期一和星期日：

```
[ Date.new(2015, 7, 13), Date.new(2015, 7, 19) ].map { |date|
  date.strftime("U: %U - W: %W - V: %V - cweek: #{date.cweek}")
}

# => ["U: 28 - W: 28 - V: 29 - cweek: 29", "U: 29 - W: 28 - V: 29 - cweek: 29"] 
```

# django - django 模型形式，根据 ForeignKey 模型中的值限制选择

> ID：13075619
> 
> 赞同：2
> 
> 时间：2012-10-25T19:15:58.027
> 
> 标签：django, django-models, django-forms, django-views

我有两个模型：`League`和`Team`. `Team`有一个外键链接到`League`. 我希望能够`Team`根据存储在`League`. 具体来说：

```
class League(models.Model):
    number_of_teams = models.IntegerField()

class Team(models.Model):
    league = models.ForeignKey(League)
    draft_slot = models.IntegerField(choices=[(i+1,i+1) for i in range(?????????)]) 
```

我认识到我无法`draft_slot.choices`在`Team`模型中准确定义我的。所以我希望这样设置`Team`：

```
class Team(models.Model):
    league = models.ForeignKey(League)
    draft_slot = models.IntegerField() 
```

我已经设置了`ModelForm`一个`Team`：

```
class TeamModelForm(ModelForm):
    class Meta:
        model = Team 
```

并查看`Team` `ModelForm`：

```
def SetupTeam(request, fanatic_slug=None, league_slug=None):
    league = League.objects.get(slug=league_slug)
    form = TeamModelForm()
    return render_to_response('league/addteam.html', {
        'form': form
    }, context_instance = RequestContext(request)) 
```

我需要什么 foo 才能使用`league.id`，`league.number_of_teams`所以`TeamModelForm`预填充视图`team.league`并呈现一个字段来表示`team.draft_slot`看起来像

```
draft_slot = models.IntegerField(choices=[(i+1,i+1) for i in range(league.number_of_teams+1)]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:44:35.173

工作答案：

```
class TeamModelForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(TeamModelForm, self).__init__(*args, **kwargs)
        if self.instance:
            n = self.instance.number_of_teams
            self.fields['draft_position'].widget.choices = [(i+1,i+1) for i in range(n)]

    class Meta:
        model = Team
        widgets = {'draft_position': Select(choices=())} 
```

# javascript - iframe 加载和回退

> ID：13075620
> 
> 赞同：1
> 
> 时间：2012-10-25T19:16:01.070
> 
> 标签：javascript, iframe, external

我已经使用了几个 javascript 在我的 iframe 上放置了加载消息，但如果没有连接，我无法让它们粘贴。

我通过 iframe 采购外部网站。我希望人们在加载时查看图片，然后继续查看该图片直到加载完成。这意味着如果该外部站点的网络关闭，他们将继续看到图片。如果需要，我可以在外部站点上添加文件/脚本。我刚刚加载了脚本，有谁知道我如何保持图像，直到我们确定与外部站点有连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:26:40.153

我会做

```
<img onload="if (this.src.indexOf('http')!=-1) window.open(URL,iframename)" 
onerror="this.src='sitedown.gif'" 
src="http://foreignsite.com/siteup.gif"/> 
```

其中 sitedown.gif 是本地文件，src 是来自远程站点的图像文件 该文件可以是服务器进程，只要它返回具有 image/xxx 的 mime 的有效图像，其中 xxx 是 jpg、gif、png 或浏览器可以理解的任何其他图像类型。

# javascript - jQuery链接以创建连接字符串

> ID：13075621
> 
> 赞同：0
> 
> 时间：2012-10-25T19:16:13.317
> 
> 标签：javascript, jquery, optimization, syntax, chaining

很简单，但我做错了什么。我想在这里做一个漂亮的干净链，而不是声明一个 var 然后连接它：

```
the_function( null, null, 
   $( this ) // START string I'm passing as a parameter
   .attr( 'data-href' )
   .html( '|foo:' + event.var ) 
); // END string I'm passing as a parameter 
```

我意识到`.html()`这里是无效的，什么是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:19:11.273

嗯？你的意思是做这样的事情吗

```
the_function( null, null, 
   $( this ) // START string I'm passing as a parameter
   .attr( 'data-href' ) +  '|foo:' + event.var); 
```

你有什么

```
$( this ).attr( 'data-href' ) // returns a string.. it doesn't have a html method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:20:20.520

我不太确定你想要完成什么，但这里有一些注意事项：

*   您可以将 .data() 方法用于数据属性
*   你不能在 .attr() 上使用 .html()，你需要在 $(selector) 上使用 html()

所以，基本上，你可以使用这个：

`$(this).html('|foo:' + event.var).data('href')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:20:22.677

我不确定你想要什么结果，但如果你真的想要方法链接，你可以将本机`.concat()`方法链接到字符串。

```
the_function( null, null, 
   $( this ).attr( 'data-href' )
            .concat('|foo:', event.var) 
); 
```

* * *

`.concat()`或者，如果您真的挖掘链接，则单独调用。

```
the_function( null, null, 
   $( this ).attr( 'data-href' )
            .concat('|foo:')
            .concat(event.var) 
); 
```

# com - “空”继承的 COM 接口未正确编组

> ID：13075623
> 
> 赞同：1
> 
> 时间：2012-10-25T19:16:24.533
> 
> 标签：com, marshalling, idl

我有一个进程内 COM 服务器（dll，内置于 MSVC10），用于 C# 客户端。其中一个接口定义如下：

```
[
    object,
    uuid(some guid),
    dual,
    nonextensible,
    helpstring("IDerived Interface"),
    pointer_default(unique)
]
interface IDerived : IBase{
}; 
```

共同类同时实现`IDerived`和`IBase`（以及一些其他接口）：

```
[
    uuid(some guid),
    helpstring("SomeClass Class"),
    noncreatable,
    hidden
]
coclass SomeClass
{
    [default] interface IDerived;
    interface IBase;
    // etc.
}; 
```

co-class 是单元线程的。当 MTA 客户端线程获取`IDerived`并尝试调用其任何方法（继承自`IBase`）时，它会在代理/存根中的某处崩溃。在 STA 中它运行良好，所以我相信`IDerived`没有正确编组。另一方面，如果我`IBase`明确地 QI 或者如果我添加一个方法到`IDerived`，一切正常。

为什么空`IDerived`的没有正确编组？

# svn - 无法从带有重音字符的 svn 日志输出中发送正确的字符集

> ID：13075626
> 
> 赞同：1
> 
> 时间：2012-10-25T19:16:32.177
> 
> 标签：svn, ant, character-encoding

我使用 ant 生成一个 svn 日志文件，然后将结果与邮件任务一起发送。我无法设置正确的字符编码。当我用 Outlook 打开邮件时，重音字符显示不正确。

输出文件在 cp850 中（基于我的 cmd shell）

```
D:\MEP>chcp
Active code page: 850 
```

蚂蚁任务是

```
 <target name="test">
    <exec executable="svn" output="logresult.txt">
    <arg line="log -g src" />
    </exec>
    <mail mailhost="mail.xxxxxx.xx" subject="Test character-encoding"
          tolist="sxxxxx@xxxxx.com" 
          messagefile="logresult.txt">
      <from address="ant@xxxxx.com"/>
    </mail>
    </target> 
```

我试图更改 svn 日志输出编码...没有成功。
我试图在邮件任务上设置“charset”道具......但没有成功。

任何 i18n 技巧？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:39:11.277

尝试默认设置为 auto 的属性编码（请参阅[ant 手动邮件任务](http://ant.apache.org/manual/Tasks/mail.html)）：

```
 <mail mailhost="mail.xxxxxx.xx" subject="Test character-encoding"
  tolist="sxxxxx@xxxxx.com" 
  messagefile="logresult.txt"
  encoding="plain">
  <from address="ant@xxxxx.com"/>
 </mail> 
```

一些用于重新编码文本文件的新 ant 任务也可能派上用场 => [重新编码 0.1](http://thewonggei.wordpress.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:21:10.827

编码不适用于邮件标签。

我最终使用“iconv”将输出从 cp850 转换为 iso-88590-1。

# php - PHP urlencode 转换 HTML 特殊字符

> ID：13075628
> 
> 赞同：3
> 
> 时间：2012-10-25T19:16:41.300
> 
> 标签：php, html, urlencode, chars

我已经进行了大量搜索，但到目前为止还没有找到已经回答的问题（尽管我可能没有正确询问）。

我在存储到 php 变量中的页面上有一个简单的标题字符串

```
$title 
```

当我 print_r 它时，我会像我应该的那样得到一个快乐，正常的字符串

```
Art's of Glass: Photos From Crystal Castles' Gra 
```

现在这里是我迷路的地方。我在这个变量上运行 urlencode 然后我回来了

```
urlencode($title);
Art%26%23039%3Bs+of+Glass%3A+Photos+From+Crystal+Castles%26%23039%3B+Gra 
```

如果您查看前 10 个字符，则 urlencode 完成了它应该做的事情，但它也做了一些额外的事情。它将“'”更改为它的 html 编码 (')，然后对结果字符串进行 urlencode。

当我打印手动编码的字符串时

```
urlencode("Art's");
Art%27s 
```

结果正确地出来了。

我一生都无法弄清楚为什么在第一个示例中会发生额外的步骤。我什么都试过了。我在编码之前已经 htmlspecialchar_decode -d $title，我已经尽可能地打印它，我已经尝试了 rawurlencode，我已经尝试了在 javascript 端反转 html 特殊字符的所有方法，但最终无处可去。如果有人可以阐明一些问题，甚至对可能存在的问题提出一些建议，那将不胜感激。我真的很想避免不得不为这个特定实例“定制”解决方案，因为它可能会在以后以其他伪装出现。

**解决方案**：Quentin 和 JMB 帮助解决了这个问题，原始字符串已经被 HTML 编码，必须使用 htmlspecialchars_decode($title, ENT_QUOTES) 将其转换为普通字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:36:09.247

您的原始数据可能包括 HTML 字符参考`'`

当您使用`print_r`它时，您的浏览器会将其解释为 HTML 并呈现`'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T13:58:52.170

我已经找到了解决方案，在这里；

```
<?php
$string = "amir'qureshi";
$postipn3 = urlencode(htmlspecialchars_decode($string, ENT_QUOTES));
//out put will be amir%27qureshi
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:22:11.237

我通常做的是：

```
$string = htmlentities($string);
$string = html_entity_decode($string); 
```

你也可以这样做：

```
$string = htmlentities(base64_encode($string));
$string = html_entity_decode(base64_decode($string)); 
```

也许那是过度的，但我喜欢它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T19:27:25.080

对于它的价值，当我运行这段代码时：

```
<?php
$title = "Art's of Glass: Photos From Crystal Castles' Gra";
$title = urlencode($title);
print_r($title);
?> 
```

我得到这个结果：

```
Art%27s+of+Glass%3A+Photos+From+Crystal+Castles%27+Gra 
```

我们可以看到更多你的代码吗？不知道你为什么会从你提供的东西中遇到这个问题......

尝试只使用我使用的 php 片段，看看它是否做同样的事情。如果是这样，就像其他人提到的那样，它可能是您的 php 配置中某处的愚蠢设置。

# r - 修改使用 scatterplot3d 生成的图形

> ID：13075631
> 
> 赞同：1
> 
> 时间：2012-10-25T19:16:55.140
> 
> 标签：r

我`scatterplot3d`用来生成下图。目前，所有线都是从与 关联的底面开始绘制的`value=-1`。

我想移除顶面（与 相关联`value=5`）和底面（与 相关联`value=-1`）。另外，我希望这些线是从与关联的表面开始绘制的`value=0`。有什么方法可以帮助我实现这一目标吗？

![在此处输入图像描述](../Images/ee5cdfa9306380dbfc9867481fed4139.png)

生成此图的数据和代码如下：

```
s3d.dat <- read.table(text="
   V1 V2 V3
   1  2 -1
   2  1  0
   1  1  2
   1  5 -1
   5  1  0",header=TRUE)

library(scatterplot3d)

s3d<-scatterplot3d(s3d.dat,type="h",pch=8,color="red")
s3d$plane3d(0,0,0) 
```

# python - typeerror 'builtin_function_or_method' 对象没有属性 '__getitem__'

> ID：13075632
> 
> 赞同：17
> 
> 时间：2012-10-25T19:16:59.183
> 
> 标签：python, typeerror

这是代码：

```
The_Start = [1,1]
The_End = [1, 1]
for z in range(20):
    for x in range(len(The_Start) - 1):
        y  = The_Start[x] + The_Start[x + 1]
        The_End.insert[x + 1, y]
    print The_End
    The_Start = The_End
    The_End = [1, 1] 
```

这段代码应该是一个帕斯卡三角形。错误在第六行。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-25T19:20:02.753

您需要将括号中的括号更改`The_End.insert[x + 1, y]`为括号。

```
The_End.insert(x + 1, y) 
```

在 Python 中使用小写变量名是一种很好的做法。大写通常用于类。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-25T19:21:09.597

您需要括号而不是`[]`：

```
The_End.insert(x + 1, y) 
```

# c++ - strtok 似乎没有修改输入字符串

> ID：13075635
> 
> 赞同：0
> 
> 时间：2012-10-25T19:17:08.623
> 
> 标签：c++, c

我一直认为`strtok`应该谨慎对待，因为它通过在最后一个令牌位置插入 NULL 来修改其输入字符串。这也由[cppreference](http://en.cppreference.com/w/c/string/byte/strtok)验证。

但是，在尝试验证来自 cplusplus.com 的[示例](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)时，我发现在 32 位 Windows 7 中的 VS2010 中，strtok 实际上并未在原始字符串中插入 NULL。我可以通过将示例中的参数中的 NULL 修改为 str 来确定这一点，并且程序重复循环，将“This”作为令牌传递，这（正如我解释的那样）与传递前一个行为不同指针，正如 cppreference 声称的那样。

另外，我想也许字符串文字的 const-ness 可能有问题，所以我复制了字符串

```
char str2[] ="- This, a sample string.";
char str[50];
strcpy(str,str2); 
```

并再次运行它，但循环重复了。调试器显示输入字符串没有被修改。

有人可以在这里解释我哪里出错了吗？*编辑：我认为这是我对“行为与先前存储的指针作为 str 传递的行为相同”的解释。*

谢谢你。

编辑：确切的代码：

```
/* strtok example */
#include <iostream>
#include <stdio.h>
#include <string.h>

int main ()
{
  char str2[] ="- This, a sample string.";
  char str[50];
  strcpy(str,str2);
  char * pch;
  printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok (str," ,.-");
  while (pch != NULL)
  {
    printf ("%s\n",pch);
    pch = strtok (str, " ,.-");
    printf("%s\n", str);
  }
  std::cin.ignore();
  return 0;
} 
```

代码输出：

```
Splitting string "- This, a sample string." into tokens:
This
- This
This
- This
This
- This
This
- This
This
- This
This
- This
This
- This 
```

编辑：已解决我应该删除这个垃圾还是让它留下来？哈哈，我不想从不得不处理这个问题的穷人那里拿分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:29:01.397

> 我可以通过将示例中的参数中的 NULL 修改为 str 来确定这一点，并且程序反复循环

这样做是因为当您传入`str`（或非 NULL 指针）时，`strtok()`会重新开始，所以它只会标记现在是单个标记的内容（一遍又一遍地返回它）。这是将非 NULL 指针传递给`strtok()`.

当您`NULL`作为第一个参数传入时`strtok()`，它会告诉它从上次中断的地方继续（它会在某处的静态变量中跟踪该状态，这是 的问题之一`strtok()`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T19:23:52.090

首先，它不是`NULL`插入到原始字符串中，而是插入一个零字符。虽然我知道这可能是您想说的，但涉及一个众所周知且完全不相关的宏仍然不是一个好主意`NULL`。

其次，如果`strtok`在原始字符串中插入零个字符失败，它就不会按预期工作。出于这个原因，我坚信你以某种方式误解了你的实验结果。`strtok`即使在 32 位 Windows 7 下的 VS2010 中也会修改输入字符串。

* * *

您发布的代码的输出清楚地表明该字符串已被*修改*。`str`的原始值为`"- This, a sample string."`。从循环内部打印的值`str`只是`"- This"`. 字符串被截断了，因为`strtok`在后面插入了一个零字符`"- This"`（更准确地说，`,`字符被*替换*为`\0`字符）。

# jquery - 为什么 jquery 为不存在的选择器执行代码

> ID：13075639
> 
> 赞同：2
> 
> 时间：2012-10-25T19:17:17.920
> 
> 标签：jquery, jquery-ui, datepicker

我想知道jquery的执行。假设我有一个不存在的 ID，为什么 jquery 仍然尝试执行那部分代码：

```
$(function() {
        $( "#datepicker_doesnotexist" ).datepicker({
         defaultDate: new Date(date_var)   
        });
    }); 
```

在这种情况下，它抱怨`date_var`未定义。这是可以理解的，我可以进行检查以防止这种情况发生，等等。

我想知道如果该 ID (datepicker_doesnotexist) 不存在，jQuery 为什么会执行这部分代码。如果无论如何都不能将其绑定到元素，那么这样做似乎效率很低。

一个例子：http: [//jsfiddle.net/CdE3k/](http://jsfiddle.net/CdE3k/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:36:06.920

您尚未初始化**date_var**。这应该停止抛出错误

```
 $(function() {
    var date_var = new Date( 2012, 10, 25 );

    $( "#datepicker_doesnotexist" ).datepicker({
        defaultDate: date_var   
    });
 }); 
```

如果没有找到具有匹配 ID 的元素，jQuery 将返回一个没有元素的 jQuery 对象。返回的 jQuery 对象上的 datepicker 方法仍然被调用，但它只是没有任何 html 元素可以使用。

这实际上是一件好事。如果 jQuery 在没有元素与 ID 匹配时返回 undefined，则上面的代码将引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:21:55.167

`{defaultDate: new Date(date_var)}`只是传递一些参数它不是函数本身。

这和这样做是一样的：

```
function someFunction(date) {

}

// this will result in an error because it is not defined. Same things happens in your code.
someFuntion(undefinedVariable); 
```

简单地说`date_var`尚未定义（例如页面加载），但您正在尝试使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:21:35.137

编辑：它的发生是因为您将一个对象传递给该函数 .datepicker() 并且它评估该对象作为传递对象的一部分。所以这是预期的行为。

# qt - 在 QTreeWidget 中按日期排序

> ID：13075643
> 
> 赞同：1
> 
> 时间：2012-10-25T19:17:43.067
> 
> 标签：qt

我有一个 3 列的 QTreeWidget。它用于搜索功能并且树持有

1.  结果名称
2.  结果日期
3.  $searchterm 结果中的命中数。

默认行为是按日期降序排序。这最初工作得很好，因为这是通过 SQL 查询完成的，然后才加载到树中。但是，当我决定允许用户按其他列而不是日期排序时，事情就搞砸了。

日期采用 mm/dd/yyyy 格式，但 QTreeWidget 忽略年份，同时按月份和日期排序。它似乎想将日期视为整数。月份和日期排序正确，但年份在不应该的时候混合在一起。（10/06/2012、10/06/2011、10/05/2012 等）有没有办法告诉 QTreeWidget 排序函数将年份放在首位（以便 2012 年的所有内容都组合在一起，所有内容从 2011 年开始被组合在一起，等等），或者甚至告诉它在该列中使用日期格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:27:06.560

它不是按整数排序的，而是按字符串排序的。您用于树视图的模型需要返回`QDate`或`QDateTime`用于[`data()`](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#data)函数中的列。

# javascript - 如何使用 Greasemonkey 将数据复制到剪贴板？

> ID：13075645
> 
> 赞同：16
> 
> 时间：2012-10-25T19:17:44.080
> 
> 标签：javascript, firefox, greasemonkey, clipboard, clipboard-interaction

我发现[了这个问题](https://stackoverflow.com/questions/316508/greasemonkey-javascript-copy-to-clipboard-button)，但试图使用那里给出的代码：

```
unsafeWindow.netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
const clipboardHelper = Components.classes["@mozilla.org/widget/clipboardhelper;1"]
    .getService(Components.interfaces.nsIClipboardHelper)
;
clipboardHelper.copyString('test'); 
```

给出错误信息：

> [« http://example.com](http://example.com) »的脚本被拒绝 UniversalXPConnect 权限。

我也尝试使用（[来自 Mozilla 网站](https://developer.mozilla.org/en-US/docs/Using_the_Clipboard)）：

```
const gClipboardHelper = Components.classes["@mozilla.org/widget/clipboardhelper;1"]
    .getService(Components.interfaces.nsIClipboardHelper)
;
gClipboardHelper.copyString("test2"); 
```

这给出了错误消息：`Components.classes is undefined`。

在这两种情况下，它都不适用于 Windows 7 上的最新 Firefox。
我还应该尝试什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-25T21:11:04.813

# 更新：

从 1.10 版（2013 年 6 月 20 日）开始，Greasemonkey 现在支持[该`GM_setClipboard()`功能](http://wiki.greasespot.net/GM_setClipboard)。
像这样使用：

```
// ==UserScript==
// @name     _YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @grant    GM_setClipboard
// ==/UserScript==

GM_setClipboard ("The clipboard now contains this sentence."); 
```

* * *

* * *

# 较旧的 GM 版本：

Greasemonkey 很难做到这一点，因为 GM 开发人员拒绝支持它，并且必须克服 FF 和 Flash 安全设置。
如果复制将通过***手动单击***启动，则可以执行此操作。在这种情况下，请使用[此问题](https://stackoverflow.com/q/400212/331508)中的一种技术。

如果您希望有某种全自动剪贴板操作，那么您将必须开发自己的插件或插件供您的 GM 脚本使用。

* * *

# Scriptish 多年来一直支持这一点：

如果您愿意切换脚本插件，请注意[**Scriptish**](https://addons.mozilla.org/en-US/firefox/addon/scriptish/)提供[`GM_setClipboard()`设置剪贴板](https://github.com/scriptish/scriptish/wiki/GM_setClipboard)。（但没有读取它的功能？！）

Scriptish 并不完美，但在某些方面它比 Greasemonkey 更好。（请注意，我不隶属于任何一个附加组件，也不完全满意。）

大多数 GM 脚本可以毫无问题地在 Scriptish 中运行。

* * *

至于代码片段，来自问题；它们本质上是一样的（第一个只占 GM 沙箱）。对于许多版本的 Firefox，这种方法已经过时，并且替换代码的文档记录很差。
您必须使用需要用户交互的技术，或者您必须编写自定义帮助程序插件。

# android - Android ContractCalendar 当天的事件

> ID：13075649
> 
> 赞同：0
> 
> 时间：2012-10-25T19:17:55.830
> 
> 标签：android, calendar

如何根据手机的当前日期查询当天的所有事件。

我想包括全天事件、重复事件和常规事件。我到处都没有找到一个好的工作示例。一些代码会很好。我一直在结束前一天出现的全天事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T06:32:04.603

全天事件问题可能是由全天事件的时区独立性引起的。通过查看您全天活动的开始时间来检查 - 看看它是否与您的时区和 GMT 之间的差异相同。如果这是问题所在，请为您的全天活动使用 GMT 时区制作单独的日期/时间格式。

```
 Format dfAllDay = DateFormat.getDateInstance();
    ((DateFormat)dfAllDay).setTimeZone(TimeZone.getTimeZone("UTC")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:27:22.233

你还需要这个吗？如果您需要帮助，我只是对此进行了编码。

基本上它归结为几件事。如果您使用 API 14?/15+，您可以使用 CalendarContract。您需要查询实例表，因为事件表只包含一个用于重复事件集的条目。您可能想要获取当前时间（只需一个日历 getInstance() 即可），然后通过在当前时间上添加一天来获取搜索的截止时间。

您会在文档中找到还不错的示例。您可能需要一些 SQL 知识才能正确完成它。如果您想要一些提示，请告诉我。一旦你了解发生了什么，这真的很容易。

如果您使用的是较早的 api，您将不得不查看一堆我还没有真正检查过的 contenturi 东西。我认为他们更麻烦，但网上也会有更多的东西。

# servlets - Servlet 和静态方法

> ID：13075651
> 
> 赞同：0
> 
> 时间：2012-10-25T19:18:09.137
> 
> 标签：servlets, thread-safety, static-methods

有人可以带走我的疑问吗？我有一个由三个不同部分调用的 Servlet。每个部分都代表不同的操作，但使用相同的 servlet 和相同的参数。现在我想用三个静态方法来实现一个类，这些方法将被充分调用。我认为这是为了避免 processRequest() 方法中的代码过多。我不使用静态变量！这样做更好还是将所有代码都放在 Servlet 中？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:23:50.913

请避免`static methods`在 servlet 中简单地创建`Normal java class`所有业务逻辑并将其放置为 `Different functions`。无论何时何地，您都希望这些函数使用该类的对象调用它们。因为`servlet`从另一个调用静态方法或方法`servlet`不是一个好主意。

# javascript - 访问jquery插件ResponsiveSlides.js的内部方法

> ID：13075658
> 
> 赞同：0
> 
> 时间：2012-10-25T19:18:38.467
> 
> 标签：javascript, jquery, jquery-plugins, slideshow

我试图理解一个基本的 javascript ：如何访问插件的内部方法，在它附加到 DOM 的元素之后？

基本上，做完之后...

```
var $div = $('#slideshow .rslides').responsiveSlides({
    speed:1000,
    timeout:4000,
    pager:true,
    pause:true
}); 
```

...使用以下插件：[https](https://github.com/viljamis/ResponsiveSlides.js) ://github.com/viljamis/ResponsiveSlides.js ，我可以称这个插件吗？

```
 slideTo = function (idx) {
      settings.before();
      $slide
        .stop()
        .fadeOut(fadeTime, function () {
          $(this)
            .removeClass(visibleClass)
            .css(hidden);
        })
        .eq(idx)
        .fadeIn(fadeTime, function () {
          $(this)
            .addClass(visibleClass)
            .css(visible);
          settings.after();
          index = idx;
        });
    }; 
```

方法第 73 行？非常感谢您的帮助和时间。

# c# - 正则表达式全局替换为组

> ID：13075660
> 
> 赞同：2
> 
> 时间：2012-10-25T19:18:40.630
> 
> 标签：c#, regex

关于如何在涉及组的 C# 中实现正则表达式全局替换的示例，我从高处和低处看，但我发现是空的。所以我自己写了。谁能建议一个更好的方法来做到这一点？

```
static void Main(string[] args)
{
    Regex re = new Regex(@"word(\d)-(\d)");
    string input = "start word1-2 filler word3-4 end";
    StringBuilder output = new StringBuilder();
    int beg = 0;
    Match match = re.Match(input);
    while (match.Success)
    {
        // get string before match
        output.Append(input.Substring(beg, match.Index - beg));

        // replace "wordX-Y" with "wdX-Y"
        string repl = "wd" + match.Groups[1].Value + "-" + match.Groups[2].Value;
        // get replacement string
        output.Append(re.Replace(input.Substring(match.Index, match.Length), repl));

        // get string after match
        Match nmatch = match.NextMatch();
        int end = (nmatch.Success) ? nmatch.Index : input.Length;
        output.Append(input.Substring(match.Index + match.Length, end - (match.Index + match.Length)));

        beg = end;
        match = nmatch;
    }
    if (beg == 0)
        output.Append(input);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T06:15:03.660

您根本不需要执行任何逻辑，可以使用替换字符串中的组引用来完成替换：

```
string output = Regex.Replace(input, @"word(\d)-(\d)", "wd$1-$2"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:25:00.010

你可以通过[`Replace`](http://msdn.microsoft.com/en-us/library/cft8645c.aspx)一个[`MatchEvaluator`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx). 它是一个接受 a[`Match`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)并返回要替换它的字符串的委托。

例如

```
string output = re.Replace(
    input,
    m => "wd" + m.Groups[1].Value + "-" + m.Groups[2].Value); 
```

或者，我对此不太确定，您可以使用*前瞻*- “检查此文本是否如下，但不要将其包含在匹配中”。语法是`(?=whatver)`这样的，我认为您需要类似的东西`word(?=\d-\d)`，然后将其替换为`wd`.

# asp.net-mvc-4 - jQuery 时间选择器和 MVC 验证 - 字段必须是日期

> ID：13075663
> 
> 赞同：3
> 
> 时间：2012-10-25T19:18:46.950
> 
> 标签：asp.net-mvc-4, asp.net-mvc-validation, jquery-ui-timepicker

我有一个`StartDate`在我的模型中命名的属性。我 从[这里](http://trentrichardson.com/examples/timepicker/)`timepicker`使用插件插件。它工作正常，但问题是我收到验证错误消息。如何更改验证以使其通过日期时间。`jquery.ui`

型号为：

```
public class DateTimePickerTest : EntityBase
{
    [DataType(DataType.DateTime)]
    [DisplayName("Start Date")]
    public DateTime StartDate { get; set; }
    [DataType(DataType.DateTime)]
    [DisplayName("End Date")]
    public DateTime EndDate { get; set; }
} 
```

![以下是错误信息](../Images/114b2ecf02afb01e630a473438ecbdc3.png)

我主要遵循[Rick Anderson 在 MSDN](http://www.asp.net/mvc/tutorials/javascript/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4)上给出的指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:20:17.610

由[这个答案](https://stackoverflow.com/a/7555471/13198)保存。

我使用`DisplayFormat`了`ApplyFormatInEditMode`属性设置为的属性`true`：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd.mm.yy}")] 
```

# c# - 带有 DataGridViewCheckBoxColumn 和 DataGridViewButtonColumn 的 DataGridViews

> ID：13075667
> 
> 赞同：0
> 
> 时间：2012-10-25T19:19:02.380
> 
> 标签：c#, datagridview, datagridviewcheckboxcell

我昨天发布了类似的内容，但我认为我的措辞可能不太好，因为我通常会在几分钟内得到多个答案，但我什么也没得到。

我使用 VS 2008 在 C# 环境中工作。我可以很好地使用 datagridviews，并且可以使用按钮 (DataGridViewButtonColumn) 或复选框 (DataGridViewCheckBoxColumn) 来处理它们，没有任何问题。我已经使用按钮通过“CellContentClick”功能触发简单的操作。我已经使用复选框来检查选定的项目，然后使用datagridview**外部**的按钮，但仍然在表单中运行批量进程。我的代码在这篇文章的最底部。

我现在面临的任务是创建一个两者兼有的数据网格视图；所以我将有一列按钮 (DataGridViewButtonColumn)、一列复选框 (DataGridViewCheckBoxColumn)，然后是 DGV 外引用复选框列的按钮。

我剩下的是，我无法弄清楚如何解决 CellContentClick，即使我单击复选框时会触发它，因为当我单击复选框时我不想触发任何内容。我通过识别它不是单击按钮的正确列，使基础代码跳过 CellContentClick 中的代码，但该复选框永远不会被选中，因为 CellContentClick 在识别框已被选中之前触发。

任何人都有任何代码片段、链接或建议。除了基础知识之外，我对 DGV 不太熟悉，但我意识到我真的需要学习。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
//using System.Data.Odbc;
using System.Data.SqlClient;
using System.Collections;

namespace AmortClient
{
    public partial class frmAmortControl : Form
    {
        public frmAmortControl()
        {
            InitializeComponent();
        }

        public void LoadGrid()
        {
            object[] theRow = null;
            StringBuilder sql = new StringBuilder();

            // Data objects are unmanaged code.  
            // Declare them above the try{} block and always dispose of them in finally{}.
            SqlCommand cmd = null;
            SqlDataReader dr = null;

            try
            {
                grd1.Rows.Clear();
                cmd = util.SqlConn.CreateCommand();
                sql.Length = 0;
                sql.AppendLine("select ");
                sql.AppendLine(" i.import_control_key, i.is_initial_dsc, i.stat_mo, loaded_total = round(i.loaded_total,0), ");
                sql.AppendLine(" a.amort_control_key, m.amort_mode_description, a.time_stamp, a.amort_status, loaded_total_excl_NDC = round((i.loaded_total-i.NDC_Total),0), amort_total = round(a.amort_total,0), diff_total = round((i.loaded_total-i.NDC_Total),0) - round(isnull(a.amort_total,0),0) ");
                sql.AppendLine(" from zstbl_import_control i ");
                sql.AppendLine(" left outer join zstbl_amort_control a on i.import_control_key = a.import_control_key ");
                sql.AppendLine(" left outer join tbl_amort_mode m on a.amort_mode_key = m.amort_mode_key ");
                sql.AppendLine(" order by i.import_control_key desc, a.amort_control_key desc ");
                cmd.CommandText = sql.ToString();
                dr = cmd.ExecuteReader();
                while (dr.Read())
                {
                    theRow = new object[dr.FieldCount];
                    for (int ii = 0; ii < dr.FieldCount; ii++)
                    {
                        if (dr.GetName(ii).IndexOf("_total") > 0)
                            theRow[ii] = double.Parse(dr[ii].ToString());
                        else if (dr.GetName(ii).ToUpper()=="TIME_STAMP")
                            theRow[ii] = DateTime.Parse(dr[ii].ToString());
                        else
                            theRow[ii] = dr[ii].ToString();
                    }
                    grd1.Rows.Add(theRow);
                }
                dr.Close();

            }
            catch (Exception ex)
            {
                util.LogError(ex);
                MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            }
            finally
            {
                if (dr != null) dr.Dispose();
                if (cmd != null) cmd.Dispose();
            }

        }

        private void grd1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            DataGridView dgv = (DataGridView)sender;
            int amortControlKey = int.Parse(dgv.Rows[dgv.SelectedCells[0].RowIndex].Cells[4].Value.ToString());
            string msg = "";
            dgv.Rows[dgv.SelectedCells[0].RowIndex].Selected = true;

            switch (dgv.Columns.Count - e.ColumnIndex)
            {
                case  2:
                    {
                        msg = "Are you sure that you want to delete amortization " + amortControlKey + "?";
                        if (MessageBox.Show(msg, "Confirm delete", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                        {
                            Application.DoEvents();
                            if (DeleteAmortization(amortControlKey))
                                LoadGrid();
                        }
                        break;
                    }
                case 3:
                    {
                        msg = "Are you sure that you want to recalculate all amortization for " + amortControlKey + "?";
                        if (MessageBox.Show(msg, "Confirm recalculation", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                        {
                            Application.DoEvents();
                            if (UpdateAmortization(amortControlKey))
                            {
                                MessageBox.Show("Amortization " + amortControlKey + " has been recalculated.", "Success", MessageBoxButtons.OK, MessageBoxIcon.Information);
                            }
                            LoadGrid();
                        }
                        break;
                    }
            }
       }

        private bool DeleteAmortization(int amortControlKey)
        {
            bool retval = true;

            // Data objects are unmanaged code.  
            // Declare them above the try{} block and always dispose of them in finally{}.
            SqlCommand cmd = null;
            SqlTransaction trx = null;

            try
            {
                Cursor.Current = Cursors.WaitCursor;
                cmd = util.SqlConn.CreateCommand();
                cmd.CommandTimeout = 600;
                trx = util.SqlConn.BeginTransaction();
                cmd.Transaction = trx;
                cmd.CommandText = "delete from tbl_amortization where amort_control_key = " + amortControlKey;
                cmd.ExecuteNonQuery();
                cmd.CommandText = "update zstbl_amort_control set amort_status = 'Deleted', amort_total = 0, time_stamp = getdate() where amort_control_key = " + amortControlKey;
                cmd.ExecuteNonQuery();
                trx.Commit();
            }
            catch (Exception ex)
            {
                retval = false;
                util.LogError(ex);
                trx.Rollback();
                MessageBox.Show("Delete failed: " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            }
            finally
            {
                cmd.Dispose();
                trx.Dispose();
                Cursor.Current = Cursors.Default;
            }
            return retval;
        }

        private bool UpdateAmortization(int amortControlKey)
        {
            bool retval = true;

            // Data objects are unmanaged code.  
            // Declare them above the try{} block and always dispose of them in finally{}.
            SqlCommand cmd = null;

            try
            {
                if (DeleteAmortization(amortControlKey))
                {
                    cmd = util.SqlConn.CreateCommand();
                    Cursor.Current = Cursors.WaitCursor;
                    Amortizer amt = new Amortizer(cmd);
                    amt.AmortizeSingleMode(amortControlKey);
                }
            }
            catch (Exception ex)
            {
                retval = false;
                util.LogError(ex);
                MessageBox.Show("Delete failed: " + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            }
            finally
            {
                cmd.Dispose();
                Cursor.Current = Cursors.Default;
            }
            return retval;
        }

        private void btnDeleteAmort_Click(object sender, EventArgs e)
        {
            ArrayList AmortKeyList = new ArrayList();
            //DataGridView dgv = (DataGridView)sender;
            List<DataGridViewRow> rows_with_checked_column = new List<DataGridViewRow>();
            foreach (DataGridViewRow row in grd1.Rows)
            {
                if (Convert.ToBoolean(row.Cells[Del2.Name].Value) == true)
                {
                    rows_with_checked_column.Add(row);
                    AmortKeyList.Add(row.Cells[colAmortKey.Name].Value);

                    //string importKey = grd1.Rows[grd1.SelectedCells[0].RowIndex].Cells[0].Value.ToString();
                    //grd1.ClearSelection();
                    //if (DeleteImport(importKey))
                    //    LoadGrid();
                }
            }
            foreach (object obj in importKeyList)
            {
                int amortControlKey = (int)obj;
                grd1.ClearSelection();
                msg = "Are you sure that you want to delete amortization " + amortControlKey + "?";
                if (MessageBox.Show(msg, "Confirm delete", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
                {
                    Application.DoEvents();
                    if (DeleteAmortization(amortControlKey))
                        LoadGrid();
                }
                break;
            } 
```

# asp.net - @Html.TextBoxFor 能够从条形码扫描仪中获取输入，但不能从键盘输入中获取

> ID：13075679
> 
> 赞同：0
> 
> 时间：2012-10-25T19:19:22.720
> 
> 标签：asp.net, asp.net-mvc-3, razor, textbox

怎么可能使@Html.TextBoxFor() 能够接受条形码扫描仪输入但不能接受键盘输入？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:22:35.000

这实际上是不可能的，因为条形码扫描仪所做的只是将条形码翻译成可读的文本。没有办法限制您用于输入文本的输入设备。

```
 if (TextBox1.Text.Substring(0,2) == "##" && TextBox1.Text.Substring(TextBox1.Text.Length - 2) == "##")
        {
            TextBox1.Text = TextBox1.Text.Substring(2, TextBox1.Text.Length - 4);
            // or TextBox1.Text = TextBox1.Text.Replace("##","");
        }
        else
        {
            TextBox1.Text = "";
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:22:28.600

您将使用 JavaScript 限制此客户端并在服务器端验证用户输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:32:50.837

限制输入是不可能的，您只能订阅窗口对象的 keydown 事件，累积输入，如果它与条形码格式匹配，则将其放入禁用输入。

一些条形码扫描仪还能够将用户定义的字符放在条形码的开头和结尾，因此您可以使用这些字符来确定条形码范围。

# c++ - 这个 getter 是返回构造函数给出的引用还是类内对象的引用？C++

> ID：13075681
> 
> 赞同：1
> 
> 时间：2012-10-25T19:19:29.930
> 
> 标签：c++, reference

```
class A{

    A(B& ref) : b(ref){}
    B getB(){return this->b;}
    B b;
}; 
```

getB() 是否返回对 Ab 的引用或构造函数给出的相同引用？如果原始 B 已在 A 之外更改但 A.getB() 仍返回旧 B，这将是一个问题。如果这会既然如此，有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:21:01.710

不，只有 的副本`ref`存储在`b`的相应实例的成员中`A`，而 this 的副本是由 . 返回的`getB`。

要返回该实例的初始化实例（`B`不是*您*想要做的，而是ffr），您可以这样做：`A`

 *```
class A{

    A(B& ref) : b(ref){}
    B& getB(){return this->b;}
    B& b;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:24:00.680

您的吸气剂不返回参考。要返回参考，您必须编写

```
B &getB(){return this->b;} 
```

此外 b 也被存储为一个值而不是引用。因此，如果您想返回相同的引用，它应该如下所示：

```
class A {
  B &b;
public:
  A(B &ref) : b(ref){}
  B &getB(){return this->b;}
}; 
```*

# javascript - 为什么我的父指令和子指令之间有额外的范围？

> ID：13075683
> 
> 赞同：1
> 
> 时间：2012-10-25T19:19:42.160
> 
> 标签：javascript, scope, angularjs

我有一个指令，然后作为其模板的一部分使用内部指令。当我的内部指令中发生某件事时，我想在父指令的范围内调用一个函数。我认为`scope`指令中属性的“&”是针对这种情况的。但是，当我尝试调用该函数时，父指令中的函数永远不会被调用。在此处查看 jsFiddle：http: [//jsfiddle.net/hdm3Q/](http://jsfiddle.net/hdm3Q/)

调试的时候发现`$parent`inner指令的作用域和父指令的作用域不一样。直到我这样做`scope.$parent.$parent`了，我才找到了外部指令的范围。那么，为什么这里有这个额外的范围？如何在我的父范围内调用该函数。我真的很想在这些指令中有独立的范围。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:05:03.383

`parentFunction`和之间的名称翻译`parent-function`正在发生。

在您的指令中，您应该使用名称的连字符版本。此规则适用于所有 angular html 属性。

```
<div child parent-function="parentFunction()"></div> 
```

工作小提琴：http: [//jsfiddle.net/p2dtC/](http://jsfiddle.net/p2dtC/)

# bash - bash do 循环出错 - 意外令牌“完成”附近出错

> ID：13075684
> 
> 赞同：0
> 
> 时间：2012-10-25T19:19:42.487
> 
> 标签：bash, loops, while-loop

下面的代码在我运行它时给了我一个错误，我看不到我哪里出错了。

我也看过男人。

```
while [inotifywait -m -r -e modify -e move -e create -e delete '/home/client/Files' ]; do
    echo "File Notification" | mail -s "Client File Notification" -t "test@test.com"
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:04:06.287

`[`是一个做测试的命令。您不想测试有关 inotify 的内容，但想测试该命令的结果。所以支架`[ ... ]`太多了。你必须写：

```
while inotifiwait ... ;do 
```

或更好

```
while array_answer=($(inotifywait ...)); [ "$array_answer" ] ;do
    echo Event is: ${array_answer[0]}
    echo file is: ${array_answer[1]}
    ...
    done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:32:05.110

`[`实际上是一个命令名称，是 的同义词`test`，因此您需要在其前后使用空格。

改变这个：

```
while [inotifywait ... ]; do 
```

对此：

```
while [ inotifywait ... ]; do 
```

如果没有空格，shell 可能会尝试执行一个名为 的命令`[inotifywait`，而该命令可能不存在。（您应该已经在问题正文中向我们展示了错误消息；我最初没有注意到您在标题中引用了它。）

（请注意，可以`;`紧跟在`]`之后，因为`;`它是一个 shell 元字符。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T20:50:53.323

虽然 F. Hauri 关于 while 条件中的错误是正确的，但这并不能解释“错误接近意外令牌'完成'”错误。您发布的命令中没有任何内容会导致此错误，因此我怀疑您的文件中可能有不可见的字符，可能在行尾有回车（它们是 Windows/DOS 文本文件的标准）。尝试查看脚本`cat -v`并在行尾查找“^M”或其他任何奇怪的东西。

如果问题是错误的回车，请使用`dos2unix`删除它们，然后切换到一开始不添加它们的文本编辑器。

# perl - 在 Perl 替换表达式中连接字符串

> ID：13075687
> 
> 赞同：2
> 
> 时间：2012-10-25T19:20:00.177
> 
> 标签：perl

我有一个具有重复模式的字符串，我想用另一个字符串替换每次出现的这种模式。替换字符串是通过连接一组其他字符串形成的。一个例子如下。我首先尝试使用`.`如图所示的运算符进行连接。

但是输出本身包含点，所以 Perl 不把它当作一个操作符，而是一个字面量`.`。

```
#!/usr/bin/perl
use warnings;
use strict;

my $start = 'not-so-';
my $end = '-but-a-little-bad';
my $string = 'I am a good boy. Infact I am a very good boy';
print "Before: $string\n";
>>>> $string =~ s/(good)/$start.$1.$end/g;
print "Later : $string\n"; 
```

所以我删除了`.`s，我的语句变成`$string =~ s/(good)/$start$1$end/g;`了 ，并且输出符合预期。但是，我觉得这样的声明可能会在以后引起维护问题。

我的问题：除此之外还有更好的连接字符串的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T19:22:20.823

你符号

```
$string =~ s/(good)/$start$1$end/g; 
```

很好。如果你愿意，你也可以写

```
$string =~ s/(good)/$start . $1 . $end/ge; 
```

但它是完全等价的。

# macos - git 播放声音剪辑的预提交钩子

> ID：13075689
> 
> 赞同：1
> 
> 时间：2012-10-25T19:20:11.033
> 
> 标签：macos, git

我需要一个可以播放声音剪辑的预提交钩子（特别是 Salt-n-Pepa 的“Push It”）关于如何完成此操作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:30:18.747

如果您使用的是 OS X 10.5 或更高版本，则可以使用[`afplay`](http://www.macworld.com/article/1138554/105audioterm.html)预提交挂钩中的实用程序来完成此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:24:46.283

不确定您使用的是哪个声音播放器，但您需要使用该命令`start`来启动非控制台应用程序。

例如，要启动 VisualStudio 解决方案，您可以从 MSysGit 执行此操作（我假设您在 Windows 上）：

```
start myproject.sln 
```

这也适用于钩子。

# android - Sidenavigation Webview 链接

> ID：13075698
> 
> 赞同：1
> 
> 时间：2012-10-25T19:20:44.437
> 
> 标签：android, menu, webview

我正在玩这个网站[https://github.com/johnkil/SideNavigation](https://github.com/johnkil/SideNavigation)的示例 Sidenavigation 应用程序。我已经将示例应用程序加载到我的手机上，没有任何问题。我想要实现的是将菜单项链接到 webview 上的各种网站。在下面的代码中，我在侧导航面板中只有一个按钮。我尝试使用以下代码将按钮链接到 webview，但是当我加载应用程序并单击按钮时，应用程序每次都会崩溃。

```
`case R.id.side_navigation_menu_item1:
 setContentView(R.layout.tab2);
 break;` 
```

完整代码见下文。

任何帮助将不胜感激，因为我长期以来一直在这个循环中陷入困境。

以下是应用程序关闭时出现的错误：10-27 08:36:45.886: D/TilesManager(10889): new EGLContext from framework: 5182a990 10-27 08:36:45.886: D/GLWebViewState(10889) ：重新初始化着色器 10-27 08:36:45.922：D/GLWebViewState(10889)：重新初始化 transferQueue 10-27 08:36:46.050：D/dalvikvm(260)：GC_CONCURRENT 释放 2099K，19% 空闲 23941K/29255K，暂停 2ms +10 毫秒，总计 217 毫秒 10-27 08:36:46.050：D/dalvikvm(260)：WAIT_FOR_CONCURRENT_GC 阻塞 90 毫秒 10-27 08:36:46.050：D/dalvikvm(260)：WAIT_FOR_CONCURRENT_GC 阻塞 50 毫秒

谢谢你。

**MainActivity.java**

```
`package com.devspark.sidenavigation.sample;

import android.content.Intent;
import android.os.Bundle;
import android.widget.ImageView;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.MenuItem;
import com.devspark.sidenavigation.sample.R;
import com.devspark.sidenavigation.ISideNavigationCallback;
import com.devspark.sidenavigation.SideNavigationView;
import com.devspark.sidenavigation.sample.News;

public class MainActivity extends SherlockActivity implements
    ISideNavigationCallback {

public static final String EXTRA_TITLE =                   "com.devspark.sidenavigation.sample.extra.MTGOBJECT";
public static final String EXTRA_RESOURCE_ID =   "com.devspark.sidenavigation.sample.extra.RESOURCE_ID";

private ImageView icon;
private SideNavigationView sideNavigationView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    icon = (ImageView) findViewById(android.R.id.icon);
    sideNavigationView = (SideNavigationView)     findViewById(R.id.side_navigation_view);
    sideNavigationView.setMenuItems(R.menu.side_navigation_menu);
    sideNavigationView.setMenuClickCallback(this);

    if (getIntent().hasExtra(EXTRA_TITLE)) {
        String title = getIntent().getStringExtra(EXTRA_TITLE);
        int resId = getIntent().getIntExtra(EXTRA_RESOURCE_ID, 0);
        setTitle(title);
        icon.setImageResource(resId);
    }

    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        sideNavigationView.toggleMenu();
        break;
    default:
        return super.onOptionsItemSelected(item);
    }
    return true;
}

public void onSideNavigationItemClick(int itemId) {
    switch (itemId) {

    case R.id.side_navigation_menu_item1:
        setContentView(R.layout.tab2);
                        break;

    default:
        return;
    }
    finish();
}

@Override
public void onBackPressed() {
    // hide menu if it shown
    if (sideNavigationView.isShown()) {
        sideNavigationView.hideMenu();
    } else {
        super.onBackPressed();
    }
}
/**
 * Start activity from SideNavigation.
 * 
 * @param title
 *            title of Activity
 * @param resId
 *            resource if of background image
 */
private void invokeActivity(String title, int resId) {
    Intent intent = new Intent(this, MainActivity.class);
    intent.putExtra(EXTRA_TITLE, title);
    intent.putExtra(EXTRA_RESOURCE_ID, resId);

    // all of the other activities on top of it will be closed and this
    // Intent will be delivered to the (now on top) old activity as a
    // new Intent.
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

startActivity(intent);
// no animation of transition
overridePendingTransition(0, 0);
}   
}` 
```

**新闻.java**

```
`import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebView;

public class News extends Activity {

private static String TAG = "WebViewTest";
private WebView mWebView;

public void onCreate(Bundle savedInstanceState) {
Log.i(TAG, "Entering onCreate");
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

mWebView = (WebView)findViewById(R.id.webview);
mWebView.clearCache(true);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.loadUrl("http://www.google.com");
Log.i(TAG,"Exiting onCreate");
}
}` 
```

**活动主文件.xml**

```
`<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@android:id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:contentDescription="@string/image_desc"
    android:src="@drawable/android" />

<com.devspark.sidenavigation.SideNavigationView
    android:id="@+id/side_navigation_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</RelativeLayout>` 
```

**tab2.xml**

```
`<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
        <WebView
            android:id="@+id/webview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
              android:scrollbarStyle="outsideOverlay"
              android:scrollbarFadeDuration="5"
              android:fillViewport="true"/>

</RelativeLayout>` 
```

**side_navigation_menu.xml**

```
`<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/side_navigation_menu_item1"
    android:icon="@drawable/ic_action_side_navigation"
    android:title="News"/>

</menu>` 
```

# python - django + mod_wsgi 是否需要线程编程规则？

> ID：13075702
> 
> 赞同：5
> 
> 时间：2012-10-25T19:21:02.457
> 
> 标签：python, django, thread-safety, mod-wsgi

我们正在 mod_wsgi 下推出我们的第一个 django 应用程序

```
`WSGIDaemonProcess our-appname processes=6 threads=15'` 
```

我们正在讨论我们的 Python 代码以及它使用的 Redis 和 Postgres 库是否需要是线程安全的。

从阅读 mod_wsgi 文档中我可以看出，即使 apache worker 正在使用多个**apache**线程处理请求，我们的**python**代码也是单线程的。我在 mod_wsgi 文档上没有看到任何警告说“当心！您现在必须担心全局数据和线程安全！” 但也没有明确的“不要担心没有线程”。

我们没有在 Python 代码中明确使用线程做任何事情，在我们编写的任何内容中都没有提及它们。

但是这里的一些人认为，既然我们正在运行它`threads=15`，我们现在就处于多线程世界中。

谁能澄清这里到底发生了什么？我们的 Python 代码现在是否可以通过以前没有的相同数据执行多个线程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T19:27:17.357

是的，显然您正在运行多线程应用程序，如果您不注意全局变量、类属性等，它将产生问题

如果您需要全局保存某些内容，请将其保存在线程本地存储中。

这是来自[modwsgi 文档 Building_A_Portable_Application的引述](http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading#Building_A_Portable_Application)

> 3\. 应用程序必须是可重入的，或者简单地说，能够被多个线程同时调用。需要在请求的生命周期内存在的数据需要存储为基于堆栈的数据、线程本地数据或缓存在 WSGI 应用程序环境中。实际应用程序模块中的全局变量不能用于此目的。

所以我认为你已经被充分警告了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:59:56.087

python 解释器不是线程安全的，特别是因为引用计数，所以线程不能在同一个进程空间中同时访问 python 对象。您无法无意或有意地配置 mod_wsgi 来解决此问题，因为解释器受 GIL（全局解释器锁）保护。因此，您不必担心并发线程访问相同内存对象（内存锁定等）的风险带来的特别棘手的线程安全问题。

一些网络服务器（例如带有 gevent 支持者的 gunicorn）将同时在内存中拥有多个线程，因此无需在 I/O（数据库访问、网络访问等）上阻塞单个进程。mod_wsgi 也可能是这种情况。但是，这是以这样一种方式实现的，您不需要在应用程序代码中担心它——如果您的应用程序在多处理中使用是安全的，那么在这种有限的非并发线程中使用它也应该是安全的模型。

当然，您不能在应用程序运行时使用全局变量或动态编辑应用程序的某些部分，但是如果您在 Django 中执行类似的操作，那么您甚至在不必担心线程之前就会遇到问题。Django 和其他 Web 框架的设计使得数据作为请求传入和作为响应传出，而不必担心该模型中的线程/进程安全性。

对于任何 Web 应用程序，您确实需要担心对数据存储（尤其是数据库条目）的并发访问。在数据库访问方面进行防御性代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-01T19:20:17.690

我认为安德鲁的回答有点误导。CPython（请注意还有其他 Python 实现，例如 Jython 和 PyPy）具有 GIL 的事实并不意味着您不必担心您的代码是线程安全的！由于 GIL，一个进程中的两个线程不能同时处于活动状态。但是并行性是通过定期在线程之间切换来模拟的。在程序执行期间，这种上下文切换可能**随时发生。**例如，如果您有一个`foo`包含“全局”变量的模块`x`，则以下方法可能会输出 2、3、4、... 中的任何内容，具体取决于执行相同方法的线程数：

```
def bar():
    foo.x = 1
    # a context switch might happen here!
    foo.x = foo.x + 1
    # or here!
    print(foo.x) 
```

实际上，您可以将 mod_wsgi 配置为使用 max。1个线程。然后你不必担心线程安全。但是您的程序的正确性将取决于 Web 服务器的配置，这是一种非常不可取的情况。

# macos - 如何“找到”检查返回码？

> ID：13075704
> 
> 赞同：0
> 
> 时间：2012-10-25T19:21:09.647
> 
> 标签：macos, shell

```
find . -iname '*.rar' -execdir unar {} \; -exec rm {} \; 
```

仅当 unar 返回成功的返回码时，如何修改上面的命令才能删除存档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:42:07.327

你不需要；`-execdir`已经像普通谓词一样起作用，成功或失败取决于执行命令的结果。

# .htaccess - .htaccess 301 重定向解决方法

> ID：13075707
> 
> 赞同：0
> 
> 时间：2012-10-25T19:21:27.730
> 
> 标签：.htaccess, redirect

一位客户在媒体上投放了一个带有自定义 URL 的招聘广告：

例如 www.clientsname.com/newjob

...该页面在网站上不存在，但是当人们访问它时，他们希望它重定向到他们的招聘页面：

例如 www.clientsname.com/recruitment

这是他们的 .htaccess 文件当前的样子：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?action=PublicDisplayPage&url=$1 [L,QSA] 
```

...我不假装理解上面的内容！但是，我尝试了以下重定向：

```
Redirect 301 /newjob www.clientsname.com/recruitment 
```

但这导致了这个网址：

[http://www.clientsname.com/recruitment?action=PublicDisplayPage&url=newjob](http://www.clientsname.com/recruitment?action=PublicDisplayPage&url=newjob)

谁能告诉我我需要做什么才能将其重定向到*www.clientsname.com/recruitment* - 即没有*?action=PublicDisplayPage&url=newjob*

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T04:17:31.737

该`Redirect`指令是一个 mod_alias 指令，并且路由`/index.php`是通过 mod_rewrite。两个模块都处理相同的 URI，因此它们都破坏了 URI。在这种情况下，您只需要坚持使用 mod_rewrite：

```
RewriteEngine On

RewriteRule ^/?newjob(.*)$ /recruitment$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?action=PublicDisplayPage&url=$1 [L,QSA] 
```

在路由规则之前进行重定向很重要，否则重定向将永远不会发生。

# javascript - 如何在 Java Script 或 jQuery 上检查加载 flash 对象

> ID：13075715
> 
> 赞同：-4
> 
> 时间：2012-10-25T19:21:47.140
> 
> 标签：javascript, jquery, flash

如何在 Java Script 或 jQuery 上检查加载 flash 对象 no edit flash。

Flash 插入到页面中（使用 lib.swfobjec.js）：

```
<script type="text/javascript">
var flashvars = false;
var params = {
    salign: "b",
    wmode: "transparent",
    menu: "false"
};
var attributes = {
  id: "website",
  name: "website",
  styleclass: "myclass"
};

swfobject.embedSWF("gesmMainIndex.swf", "website", "800", "600", "9.0.0","expressInstall.swf", flashvars, params, attributes);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:27:23.663

这是@Amitd 所指的帖子......可能有帮助吗？

“定义一个 Javascript 函数，如果 Flash 加载，则应调用该函数。从 Flash 文件的顶部调用此方法。使用计时器来检测是否从未调用过回调。更喜欢从 Flash 调用 Javascript 函数而不是从 Javascript 调用 Flash 函数。无论哪种方式，您都无法调用尚未加载的函数。在从 Flash 调用它之前保证浏览器已经完成加载您的 Javascript 函数，比在从 Javascript 调用它之前保证 Flash 完成加载您的 Flash 函数要容易得多。这是一个例子：

我正在使用 swfobject 嵌入 Flash。我使用 FlashVars 来告诉 Flash 要调用哪个 Javascript 函数。如果页面上有多个 Flash 对象，这很有用。

**闪光**

```
var params:Object = LoaderInfo(this.root.loaderInfo).parameters;
if (ExternalInterface.available)
{
  var onLoaded:String = params["onLoaded"];
  if (onLoaded != null)
    ExternalInterface.call(onLoaded, true);
} 
```

**Javascript**

```
var flashLoaded = false;
var flashTimer;

function onFlashLoaded()
{
flashLoaded = true;
clearTimeout(flashTimer);
}

function onFlashTimeout()
{
if (!isFlashLoaded)
{
    // Remove the Flash object in case it is partially loaded
    $("#videoFeed").empty();
    $("#videoFeed").append('<div id="flashObject"></div>');
    alert("Failed to load video player");
}
clearTimeout(flashTimer);
}

function connectToVideo()
{
var flashvars = {};
flashvars.onLoaded = "onFlashLoaded";

var params = {};
params.menu = false;

var attributes = {};

isFlashLoaded = false;
flashTimer = setTimeout("onFlashTimeout()", 5000);

swfobject.embedSWF("flash/VideoFeed.swf", "flashObject", "800", "600", "11", "expressInstall.swf", flashvars, params, attributes);
} 
```

# c# - 在函数中将委托作为参数传递，不允许调用委托

> ID：13075717
> 
> 赞同：1
> 
> 时间：2012-10-25T19:21:52.897
> 
> 标签：c#

我想让这个函数在我的程序中工作，但 Visual Studio 告诉我 MyFunc 是一个变量，但它像一个方法一样使用，但这就是我想要做的。试图调用它。

```
static private void TryThisFunc(Delegate MyFunc)
{
   try
   {
       MyFunc(); // MyFunc is a variable but is used like a method
   }
   catch (Exception ex)
   {
       Console.WriteLine(ex.Message);
   }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T19:25:03.020

您尚未指定要使用的委托*类型。*它可能是一个带参数的委托——在这种情况下，显然你不能在没有参数的情况下调用它。您可能想使用*特定*的委托类型，例如

```
static private void TryThisFunc(Action action)
{
    try
    {
        action();
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

# c++ - C++ 2d Char 数组不正确地比较

> ID：13075722
> 
> 赞同：1
> 
> 时间：2012-10-25T19:22:17.873
> 
> 标签：c++, char, multidimensional-array

我创建了一个连接四，试图实现删除功能，添加到特定列的最低行。这是董事会的初始化

```
Board::Board()
{
    for(int i=0;i<8;i++)
        for(int j=0;j<8;j++)
            place[i][j] = EMP;  // EMP is a const char = '-'

    cout << "Initalized.\n";
} 
```

由于某种原因，这段代码一直运行到 i = 1，然后将 place[1][col] 设置为 * 但是当我去显示这个时，它会在数组底部显示 *，所以 place[7][科尔]。

同样 this->place 和 place in the cout 在开始时永远不会给我应该的'-'输出。

```
int Board::add(int player, int col)
{
    char piece;
    col--;  // Dealing with array starting at 0, not 1
    (player==1) ? piece = P1: piece = P2;   // Character defining players piece
    int i;

    for (i = 7; i >= 0; i--)
    {

        cout << "this - " << this->place[i][col] << endl;
        cout << "place - " << place[i][col] << endl;
        if(place[i][col] == EMP)
        {
            cout << "Empty looks like " << place[i][col] << "\ti: " << i << endl;
            place[i][col] = piece;
            system("pause");
            return i;
        }else
        {
            cout << "not EMP - " << place[i][col] << endl;
            system("pause");
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:49:51.033

您将 char 传递给您的 int 函数，它将数字转换为 char 变量（给您垃圾）。我稍微改写了函数，一切似乎都运行良好。

```
int Board::add(int player, char col)
{
    char piece;
    int Num;
    Num = atoi(&col);
    cout << Num << endl << endl;
    Num--;  // Dealing with array starting at 0, not 1
    (player==1) ? piece = P1: piece = P2;   // Character defining players piece
    int i;

    for (i = 7; i >= 0; i--)
    {

        cout << "this - " << this->place[i][Num] << endl;
        cout << "place - " << place[i][Num] << endl;
        if(place[i][Num] == EMP)
        {
            cout << "Empty looks like " << place[i][Num] << "\ti: " << i << endl;
            place[i][Num] = piece;
            return i;
        }else
        {
            cout << "not EMP - " << place[i][Num] << endl;
        }
        system("pause");
    }

    return 0;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:42:15.330

一些想法：

不要`delete place`，你从来没有用来`new`获取内存。
像这样使用条件运算符更惯用：`piece = (player==1) ? P1: P2;`

初始化、添加和显示片段的代码在这里非常有效：http: [//codepad.org/QIWHagMk](http://codepad.org/QIWHagMk)

您能否更具体地提出您的要求或显示一个更小的代码片段来演示您所看到的问题？

# actionscript-3 - 从影片剪辑创建和缩放精灵表

> ID：13075726
> 
> 赞同：1
> 
> 时间：2012-10-25T19:22:27.437
> 
> 标签：actionscript-3, flash, flash-cs5, flash-cs4

我正在尝试从影片剪辑创建一个精灵表，然后根据屏幕的分辨率对其进行缩放。另外，我需要知道框架的确切高度和宽度。这是我使用的代码：（注意：BimapWithDimension 是我制作的自定义类，用于存储位图数据以及宽度和高度；_m - 是一个矩阵）

```
private function createSpriteSheet(mc:Class):BimapWithDimension
{
        var _bD:BimapWithDimension = new BimapWithDimension();

        var _mc:MovieClip = new mc();
        _mc.gotoAndStop(1);

        var _frejmoviVoRed:int = _mc.totalFrames < 10 ? _mc.totalFrames : 10;
        var _redovi:int = Math.ceil(_mc.totalFrames/_frejmoviVoRed);
        var _h:int = _mc.height * _redovi;

        _bmp = new BitmapData((_mc.width * _frejmoviVoRed) * _appScale, _h * _appScale, true, 0x00000000);

        var _sirina:int = Math.ceil(_mc.width * _appScale);
        var _visina:int = Math.ceil(_mc.height * _appScale);

        var _bmp1:BitmapData = new BitmapData(_sirina, _visina);
        var _rect:Rectangle = new Rectangle(0, 0, _sirina, _visina);

        for (var i:uint = 0; i < _mc.totalFrames; i++)
        {
            _bmp1.fillRect(_rect, 0x000000);
            _m.identity();
            _m.scale(_appScale, _appScale);
            _bmp1.draw(_mc, _m );

            _m.identity();
            _m.translate(_sirina * (i % _frejmoviVoRed), _visina * Math.floor(i / _frejmoviVoRed));
            _bmp.draw(_bmp1, _m);
            _mc.nextFrame();
        }

        _bD.bmp = _bmp; 
        _bD.width = _sirina;
        _bD.height = _visina;

        return _bD;
} 
```

现在的问题是某些分辨率的尺寸是错误的。例如，在 480x320 的分辨率下，某些工作表的宽度不同，即存储的宽度和实际绘制的宽度。我猜这是由于对值进行了四舍五入，但无论我如何尝试纠正这个问题（使用强制转换为 int、Math.floor() 或 Math.ceil()），我都不能。

那么，如何找出真正的宽度和高度呢？

编辑：我找到了一个......让我们说一个半解决方案。我介绍了另一个 BitmapData，它被缩放到一个整数，然后在其上绘制 moviclip 的帧（缩放），然后在 sprite 表上绘制该对象。我用新代码更新了函数。如果有人有其他解决方案，我真的很想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:16:53.387

Have a look to this, this class allow you to transform a movieclip into a bitmap spritesheet

[https://github.com/emibap/Dynamic-Texture-Atlas-Generator/blob/master/dynamicTextureAtlasGenerator/src/com/emibap/textureAtlas/DynamicAtlas.as](https://github.com/emibap/Dynamic-Texture-Atlas-Generator/blob/master/dynamicTextureAtlasGenerator/src/com/emibap/textureAtlas/DynamicAtlas.as)

This class output to starling texture altlas but it require minor change to obtain a regular bitmapData.

Another way is to use flash cs6 > right click on your movieclip in the library and select 'convert to sprtiesheet'

# android - Fancybox：无法在 Android 手机上滚动

> ID：13075729
> 
> 赞同：6
> 
> 时间：2012-10-25T19:22:38.020
> 
> 标签：android, jquery, css, wordpress, fancybox

我正在使用[Fancybox](http://fancybox.net/)在我的网站上输出计算器的结果：[inlandprotitle.com](http://inlandprotitle.com)

使用以下命令在桌面和 iphone 上输出看起来不错：

```
-webkit-overflow-scrolling: touch; 
```

输出在安卓手机上被裁剪。

有什么方法可以在安卓手机上启用fancybox滚动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T20:26:35.993

不同设备上的某些功能不可用，因此无法使用。最好的办法是检查 android 规范并在不同的 android 设备上进行测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:53:13.233

我也遇到了很多麻烦。答案是，这取决于。您正在测试什么 Android 操作系统？是2.X吗？

# nlp - 口语对话系统的自然语言理解

> ID：13075731
> 
> 赞同：3
> 
> 时间：2012-10-25T19:22:52.140
> 
> 标签：nlp, speech

我希望在我的项目中实现一个基于任务的口语对话系统。我发现很难为系统构建自然语言理解 (NLU) 单元。它是系统“理解”用户的单词（话语）以将语音映射到特定动作的部分。这是一个复杂的过程，但如果有人在构建口语对话系统方面有任何实际经验，任何关于如何开始进行此操作的想法都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:51:38.773

这是一个相当广泛的话题，但由于我对这个领域的研究很陌生，让我分享一下我学到的东西。

通常，第一步是解析句子的语法结构（特别是单词之间的依赖关系）。这将为您提供如下输出：http: [//nlp.stanford.edu/software/lex-parser.shtml#Sample](http://nlp.stanford.edu/software/lex-parser.shtml#Sample)

我正在使用这个 python 包装器连接到斯坦福解析器： [https ://github.com/dasmith/stanford-corenlp-python](https://github.com/dasmith/stanford-corenlp-python)

通常，第二步是将每个单词映射到一个“意义”，即所谓的词义消歧 (WSD)。

一旦您了解了每个单词的含义以及它们之间的关系，您应该能够理解句子并触发所需的动作。

没有开放和免费的系统能够为通用句子开箱即用地完成所有这些工作。这对于口语来说尤其困难。

例如，像斯坦福解析器这样的语法解析器通常会提供针对报纸文章文本类型训练的语言模型，这往往与口语有很大不同。您很可能希望训练一种新的语言模型，将您希望在系统中接收的句子类型添加到训练“树库”中。（Stanford Parser 提供了这样的模型训练器应用程序）。

不幸的是，没有很好的通用软件库来进行词义消歧 (WSD)。主要原因是“感官”一词还没有实用的参考。该领域事实上的标准仍然是 WordNet，但显然即使是人类也经常在单词和“同义词集”之间的映射上存在分歧。换句话说，WordNet 含义过于细化，无法提供可靠的映射。

很多时候，您会想要建立自己的含义数据库（通常以树结构），为您的应用程序创建尽可能粗粒度的数据库。有许多方法可以将单词映射到这种粗粒度的含义，其中一种最简单但仍然非常有效的方法是古老的朴素贝叶斯分类器。另一种我自己还没有尝试过的方法是使用关于“词框”的信息（即某个词的某种含义会与它周围的词有某种关系）。

无论如何，现实是这是一个开放的问题。最初，您应该专注于解决特定子域的问题。

# java - 无法安装 GWT Toolkit for Eclipse？

> ID：13075734
> 
> 赞同：3
> 
> 时间：2012-10-25T19:22:59.707
> 
> 标签：java, eclipse, gwt, installation, toolkit

我无法在我的 Eclipse 上安装 GWT Toolkit，谁能帮我解决这个问题？我需要它用于 Windows Builder Pro...

```
 Your original request has been modified.
  "WindowBuilder Core" will be ignored because a newer version is already installed. 
  "WindowBuilder XML Core (requires Eclipse WTP/WST)" will be ignored because a newer version is already installed. 
Cannot complete the install because of a conflicting dependency.
  Software being installed: Google Plugin for Eclipse 3.7 3.1.0.v201208080120-rel-r37 (com.google.gdt.eclipse.suite.e37.feature.feature.group 3.1.0.v201208080120-rel-r37)
  Software currently installed: Eclipse IDE for Java EE Developers 1.5.1.20120917-1257 (epp.package.jee 1.5.1.20120917-1257)
  Only one of the following can be installed at once: 
    Eclipse Platform 3.7.1.v201109091335 (org.eclipse.platform 3.7.1.v201109091335)
    Eclipse Platform 3.7.0.v201106131736 (org.eclipse.platform 3.7.0.v201106131736)
    Eclipse Platform 4.2.1.v201209141800 (org.eclipse.platform 4.2.1.v201209141800)
    Eclipse Platform 3.7.2.v201202080800 (org.eclipse.platform 3.7.2.v201202080800)
  Cannot satisfy dependency:
    From: Google Plugin for Eclipse 3.7 3.1.0.v201208080120-rel-r37 (com.google.gdt.eclipse.suite.e37.feature.feature.group 3.1.0.v201208080120-rel-r37)
    To: org.eclipse.platform.feature.group [3.7.0,3.8.0)
  Cannot satisfy dependency:
    From: Eclipse IDE for Java EE Developers 1.5.1.20120917-1257 (epp.package.jee 1.5.1.20120917-1257)
    To: org.eclipse.epp.package.jee.feature.feature.group [1.5.1.20120917-1257]
  Cannot satisfy dependency:
    From: Java EE IDE 1.5.1.20120828-0743 (org.eclipse.epp.package.jee 1.5.1.20120828-0743)
    To: bundle org.eclipse.platform [4.2.0,5.0.0)
  Cannot satisfy dependency:
    From: Java EE IDE Feature 1.5.1.20120917-1257 (org.eclipse.epp.package.jee.feature.feature.group 1.5.1.20120917-1257)
    To: org.eclipse.epp.package.jee [1.5.1.20120828-0743]
  Cannot satisfy dependency:
    From: Eclipse Platform 3.7.0.v20110530-9gF7UHNFFt4cwE-pkZDJ7oz-mj4OSEIlu9SEv0f (org.eclipse.platform.feature.group 3.7.0.v20110530-9gF7UHNFFt4cwE-pkZDJ7oz-mj4OSEIlu9SEv0f)
    To: org.eclipse.platform [3.7.0.v201106131736]
  Cannot satisfy dependency:
    From: Eclipse Platform 3.7.1.r37x_v20110729-9gF7UHOxFtniV7mI3T556iZN9AU8bEZ1lHMcVK (org.eclipse.platform.feature.group 3.7.1.r37x_v20110729-9gF7UHOxFtniV7mI3T556iZN9AU8bEZ1lHMcVK)
    To: org.eclipse.platform [3.7.1.v201109091335]
  Cannot satisfy dependency:
    From: Eclipse Platform 3.7.2.v20120207-1839-9gF7UHPDFxGjd-PqDr2jX_4yKaumkoHTz04_q-q (org.eclipse.platform.feature.group 3.7.2.v20120207-1839-9gF7UHPDFxGjd-PqDr2jX_4yKaumkoHTz04_q-q)
    To: org.eclipse.platform [3.7.2.v201202080800] 
```

我会附上一个屏幕截图来显示我在哪里得到这个错误...... ![在此处输入图像描述](../Images/d0f6a61f501107ab7f3b9357bd29d348.png)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T19:37:36.623

您的 Eclipse 版本可能比 3.7.x 更新。因此，不要使用[http://dl.google.com/eclipse/plugin/3.7](http://dl.google.com/eclipse/plugin/3.7)，而是使用更新站点[http://dl.google.com/eclipse/plugin/4.2](http://dl.google.com/eclipse/plugin/4.2)

# .net - Il(d)asm 与 xaml 和其他资源的往返？

> ID：13075736
> 
> 赞同：3
> 
> 时间：2012-10-25T19:23:03.800
> 
> 标签：.net, xaml, resources, .net-assembly, il

我有一个 C# 程序集 foo.exe，我正在尝试对其进行分解、修改和重新组装。该 exe 引用了一堆其他程序集，将 xaml 用于 UI，并具有一些托管和一些非托管资源。

在我尝试反编译往返后，应用程序在启动过程中崩溃，并出现如下错误：

*组件“Fu”没有由 URI“/Bar;component/baz.xaml”标识的资源。*

这到底是什么意思，我可能做错了什么？

在我天真的尝试执行往返时，这就是我所做的：

```
> ildasm.exe /out=foo.exe.il foo.exe 
```

这产生了一个 .il 文件、一个 .res 文件和一些 .resource 文件。我开始修改 il。接下来我尝试像这样再次组装exe：

```
> ilasm.exe /output=foo.exe /resource=afile.res /exe foo.exe.il 
```

# linux - printk 参数和 syslog.h 设施名称

> ID：13075738
> 
> 赞同：1
> 
> 时间：2012-10-25T19:23:15.190
> 
> 标签：linux, module, linux-kernel

我们可以将许多参数传递给 printk：

```
 printk (KERN_INFO  "blahahaha");
 printk (KERN_EMERG "bababa"); 
```

等等。这些标签是否与 syslog.conf 中的设施级别有关？KERN_EMERG 会打印到“kern.emerg”指定的设施吗？这两个实体是如何联系在一起的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:20:54.287

按问题顺序：

> 这些标签与在 中找到的设施级别有什么关系`syslog.conf`吗？

是的。标签实际上是一对，`KERN` `EMERG`即`KERN`设施和`EMERG`级别——它们是大写的，因为它是一个预处理器宏，按照惯例，它是用大写的。Linux 内核只关心`KERN`设施，因此没有定义其他设施。

发生的情况是所有这些`printk`命令都记录到内部内核环形缓冲区。根据您的内核设置，此消息可能会或可能不会复制到控制台（可能是屏幕或串行终端）。

> KERN_EMERG 会打印到“kern.emerg”指定的设施吗？

假设您的意思是登录到匹配的文件`kern.emerg`，那么是的。`syslog.conf`与此匹配的条目示例是`kern.*`, `kern.emerg`, `*.emerg`。该级别的消息`emerg`被认为是*致命*的，即发生了非常糟糕的事情。

来自该级别内核的消息可能不会最终出现在 syslog 文件中，因为该错误可能会阻止将数据写入硬盘驱动器。

> 这两个实体是如何联系在一起的？

有一个辅助守护程序，通常称为`klogd`. 它从内核中的环形缓冲区获取输出，默认情况下将它们传递到`syslogd`其中，根据`syslog.conf`文件记录它们。

**总而言之**：

`printk`将消息放入`ring buffer`. 被`ring buffer`读取，`klogd`将其转发到`syslogd`。`Syslogd`将此数据记录到`syslogd.conf`文件指定的目的地。

# facebook-canvas - 拖动选择时，Facebook 画布中的 JCrop 抖动图像

> ID：13075739
> 
> 赞同：1
> 
> 时间：2012-10-25T19:23:15.470
> 
> 标签：facebook-canvas, jcrop

我有一些代码可以在 Facebook 画布中使用 JCrop，并将其剥离到最低限度以调试问题。代码在[这里](http://bit.ly/XZYxb1)的 JS Fiddle 中，但我也将它内联在下面。您会看到在该小提琴中拖动裁剪选择框很流畅。但是，当我将相同的代码放入 Facebook 画布时，拖动选择时图像会晃动非常小。这几乎就像某物正在被某物自动调整。仅供参考 - 我什至没有在我的画布代码中加载 Facebook JS SDK。画布中的代码与小提琴及下面的代码**完全相同：**

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css" media="screen">
        /* jquery.Jcrop.min.css v0.9.10 (build:20120429) */
        .jcrop-holder{direction:ltr;text-align:left;}
        .jcrop-vline,.jcrop-hline{background:#FFF url('https://raw.github.com/tapmodo/Jcrop/master/css/Jcrop.gif') top left repeat;font-size:0;position:absolute;}
         .jcrop-vline{height:100%;width:1px!important;}
        .jcrop-hline{height:1px!important;width:100%;}
        .jcrop-vline.right{right:0;}
        .jcrop-hline.bottom{bottom:0;}
        .jcrop-handle{background-color:#333;border:1px #eee solid;font-size:1px;}
        .jcrop-tracker{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;height:100%;width:100%;}
        .jcrop-handle.ord-n{left:50%;margin-left:-4px;margin-top:-4px;top:0;}
        .jcrop-handle.ord-s{bottom:0;left:50%;margin-bottom:-4px;margin-left:-4px;}
        .jcrop-handle.ord-e{margin-right:-4px;margin-top:-4px;right:0;top:50%;}
        .jcrop-handle.ord-w{left:0;margin-left:-4px;margin-top:-4px;top:50%;}
        .jcrop-handle.ord-nw{left:0;margin-left:-4px;margin-top:-4px;top:0;}
        .jcrop-handle.ord-ne{margin-right:-4px;margin-top:-4px;right:0;top:0;}
        .jcrop-handle.ord-se{bottom:0;margin-bottom:-4px;margin-right:-4px;right:0;}
        .jcrop-handle.ord-sw{bottom:0;left:0;margin-bottom:-4px;margin-left:-4px;}
        .jcrop-dragbar.ord-n,.jcrop-dragbar.ord-s{height:7px;width:100%;}
        .jcrop-dragbar.ord-e,.jcrop-dragbar.ord-w{height:100%;width:7px;}
        .jcrop-dragbar.ord-n{margin-top:-4px;}
        .jcrop-dragbar.ord-s{bottom:0;margin-bottom:-4px;}
        .jcrop-dragbar.ord-e{margin-right:-4px;right:0;}
        .jcrop-dragbar.ord-w{margin-left:-4px;}
        .jcrop-light .jcrop-vline,.jcrop-light .jcrop-hline{background:#FFF;filter:Alpha(opacity=70)!important;opacity:.70!important;}
        .jcrop-light .jcrop-handle{-moz-border-radius:3px;-webkit-border-radius:3px;background-color:#000;border-color:#FFF;border-radius:3px;}
        .jcrop-dark .jcrop-vline,.jcrop-dark .jcrop-hline{background:#000;filter:Alpha(opacity=70)!important;opacity:.7!important;}
        .jcrop-dark .jcrop-handle{-moz-border-radius:3px;-webkit-border-radius:3px;background-color:#FFF;border-color:#000;border-radius:3px;}
        .jcrop-holder img,img.jcrop-preview{max-width:none;} 
    </style>
    <script type="text/javascript" charset="utf-8" src="https://raw.github.com/tapmodo/Jcrop/master/js/jquery.Jcrop.min.js"></script>

    <script type="text/javascript" charset="utf-8">
        function doit(){
            var imgWidth = 640;
            var imgHeight = 640;
            var cropWidth = 150;
            var cropHeight = 150;
            var cropX = (imgWidth-cropWidth)/2;
            var cropY = (imgHeight-cropHeight)/2;

            var opt = {};
            opt.allowSelect = false;
             var jCropApi = $.Jcrop('#crop_this', opt);
            jCropApi.animateTo([cropX,cropY,cropX+cropWidth,cropY+cropHeight]);
        }

        window.onload = doit;
    </script>
</head>
<body> 
    <img id="crop_this" src="http://sphotos-a.xx.fbcdn.net/hphotos-prn1/522265_10101329774882328_647210628_n.jpg" />        
</body>
</html>​ 
```

**更新** 虽然我还没有 100% 验证这一点，但我怀疑它与自动宽度边距有关，以便水平居中。插件[imgareaselect](http://odyniec.net/projects/imgareaselect/)有这个问题，我已经验证过了。

# objective-c - CFR 与 ARC 一起发布

> ID：13075740
> 
> 赞同：3
> 
> 时间：2012-10-25T19:23:18.707
> 
> 标签：objective-c, cocoa, automatic-ref-counting

我终于将应用程序更新到 Xcode 4.5 和 ARC。我有几个问题。在代码中的几个点，我`CFRelease()`用于函数返回的值`CFxxCopyxx()`。

但是，有了`CFRelease()`，我得到了一个

> *** -[CFURL 类]：在运行时发送到已释放实例的消息。

如果我删除`CFRelease()`，我会收到有关 Object leaked 的编译警告，这对我来说很有意义。我错过了什么？

```
char path[PATH_MAX]={0};
CFBundleRef mainBundle = CFBundleGetMainBundle();
if (NULL != mainBundle)
{
    CFURLRef resourcesURL = CFBundleCopyResourcesDirectoryURL(mainBundle);
    if (!CFURLGetFileSystemRepresentation(resourcesURL, TRUE, (UInt8 *)path, PATH_MAX))
    {
        NSLog(@)"CFURLGetFileSystemRepresentation() failed.\n");
    }
    CFRelease(resourcesURL);
}else
{
    NSLog(@"CFBundleGetMainBundle() failed.\n");
} 
```

# c# - 为 Unity 构造函数注入配置封闭的泛型类型

> ID：13075741
> 
> 赞同：2
> 
> 时间：2012-10-25T19:23:22.170
> 
> 标签：c#, generics, dependency-injection, unity-container, .net-4.5

我有以下一组类型： `IQueryProvider`接口：

```
public interface IQueryProvider<TEntity, TEntityKey> 
```

并添加了一个通用参数的实现：

```
public class EFQueryProvider<TContext, TEntity, TEntityKey> : IQueryProvider<TEntity, TEntityKey>. 
```

此外，还有包含通用 QueryProvider 的具体存储库。例如：

```
UserRepository : IUserRepository
{
   private IQueryProvider<User, int> _provider;

   public UserRepository(IQueryProvider<User, int> provider)
   {
       _provider = provider;
   }
} 
```

我正在尝试使用 Unity 配置解析构造函数参数：

```
<register type="IUserRepository" mapTo="ConcreteUserRepository">
  <constructor>
     <param ... What should be here??? />
  <constructor>
</register> 
```

如何将封闭的泛型类型的实例传递给构造函数（以便将实例`EFQueryProvider<MySampleContext, User, int>`传递给构造函数？我需要为每个存储库注册执行此操作，例如导致 ArticlesRepository 可能需要另一个上下文。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:24:10.393

自己找到了解决办法。配置应如下所示：

```
<register name="myQueryProvider" type="MyLib.IQueryProvider[[User, MyEntityLib], int], MyAnotherLib" mapTo="MyLib.EFQueryProvider[[MyContext, MyEFLib], [User, MyEntityLib], int], MyEFLib" /> 
```

和存储库注册：

```
<register type="IUserRepository" mapTo="UserRepository">
        <constructor>
          <param name="queryProvider">
            <dependency name="myQueryProvider" />
          </param>
        </constructor>
      </register> 
```

# dojo - 当父 div 样式显示无时，dojo 忽略元素

> ID：13075743
> 
> 赞同：0
> 
> 时间：2012-10-25T19:23:35.930
> 
> 标签：dojo

我的选择位于具有 style 属性的 div 元素中，`display:none`因为它仅显示在弹出窗口中 dojo 忽略了这些，我看到一个普通的 html 选择，但弹出窗口外的相同 3 行显示了一个完美的 dijit 选择表单

我尝试隐藏可见性，但是 jquery 的 bpupop 插件无法显示 div

```
<select name="ToServer" id="ToServer" data-dojo-type="dijit/form/Select">
    <option value="1" label="breitseite">breitseite</option>
    <option value="2" label="pepe">pepe</option>
    <option value="3" label="grow">grow</option>
    <option value="4" label="hurricane">hurricane</option>
</select> 
```

任何想法我做错了什么或如何在弹出窗口打开时强制dojo重新设置div

**更新：** 我有解析器，问题是我用相同的 id 调用了 1 个对象两次，但我现在修复了它，它是 dojo 样式，但它只显示了 select 的 1 个选项（相同的 html 输出）

在道场“渲染”之后，它看起来像这样：

```
<table class="dijit dijitReset dijitInline dijitLeft dijitDownArrowButton dijitSelect dijitValidationTextBox" data-dojo-attach-point="_buttonNode,tableNode,focusNode" cellspacing="0" cellpadding="0" role="listbox" aria-haspopup="true" tabindex="0" id="ToServer" widgetid="ToServer" aria-expanded="false" aria-invalid="false"><tbody role="presentation"><tr role="presentation"><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"><div class="dijitReset dijitInputField dijitButtonText" data-dojo-attach-point="containerNode,_popupStateNode" role="presentation" popupactive="true"><span role="option" class="dijitReset dijitInline dijitSelectLabel dijitValidationTextBoxLabel ">breitseite</span></div><div class="dijitReset dijitValidationContainer"><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="? " type="text" tabindex="-1" readonly="readonly" role="presentation"></div><input type="hidden" name="ToServer" data-dojo-attach-point="valueNode" value="1" aria-hidden="true"></td><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer" data-dojo-attach-point="titleNode" role="presentation"><input class="dijitReset dijitInputField dijitArrowButtonInner" value="? " type="text" tabindex="-1" readonly="readonly" role="presentation"></td></tr></tbody></table></dd></div><div class="dijitPopup dijitMenuPopup" style="visibility: visible; top: 174px; z-index: 1000; right: auto; left: 619px; display: none; " role="presentation" id="ToServer_dropdown" dijitpopupparent="ToServer"><div style="overflow: visible; top: 0px; width: 67px; visibility: visible; " class="dijit dijitMenu dijitReset dijitSelectMenu dijitValidationTextBoxMenu dijitMenuPassive" role="presentation" id="ToServer_menu" widgetid="ToServer_menu" tabindex="0"><table class="dijitReset dijitMenuTable" role="listbox" tabindex="0" data-dojo-attach-event="onkeypress:_onKeyPress" cellspacing="0" style="">
<tbody class="dijitReset" data-dojo-attach-point="containerNode"><tr class="dijitReset dijitSelectSelectedOption dijitValidationTextBoxSelectedOption dijitMenuItemSelected dijitMenuItem" data-dojo-attach-point="focusNode" role="option" tabindex="-1" aria-labelledby="dijit_MenuItem_0_text dijit_MenuItem_0_accel" id="dijit_MenuItem_0" aria-disabled="false" widgetid="dijit_MenuItem_0" aria-selected="true">
<td class="dijitReset dijitMenuItemIconCell" role="presentation">
    <img src="//ajax.googleapis.com/ajax/libs/dojo/1.8.0/dojo/resources/blank.gif" alt="" class="dijitIcon dijitMenuItemIcon dijitNoIcon" data-dojo-attach-point="iconNode">
</td>
<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode" id="dijit_MenuItem_0_text">breitseite</td>
<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode" id="dijit_MenuItem_0_accel"></td>
<td class="dijitReset dijitMenuArrowCell" role="presentation">
    <div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">
        <img src="//ajax.googleapis.com/ajax/libs/dojo/1.8.0/dojo/resources/blank.gif" alt="" class="dijitMenuExpand">
        <span class="dijitMenuExpandA11y">+</span>
    </div>
</td> 
```

佩佩+成长+飓风+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:31:30.210

`<body>` 如果所有元素都在具有主题集的标签内，它们都将获得 Dojo 样式。

您的问题实际上与样式无关，但很可能与解析有关。我建议您`dijit/form/Select`不要被解析。

您可以通过从控制台运行来确认这一点：

```
require(["dojo/parser"], function(parser){
  parser.parse();
}); 
```

# ios - 如何在 MpMovieplayer 加载期间显示缓冲符号/符号

> ID：13075745
> 
> 赞同：2
> 
> 时间：2012-10-25T19:23:39.003
> 
> 标签：ios, ios6, mpmovieplayercontroller

我遇到的问题是当用户单击链接播放电影时 - 我正在使用 Mpmovie 播放器加载电影，但显示电影需要 5-10 秒，在此期间它显示一个黑页，没有任何内容它。我可以在上面贴一个装载标志吗？

如何使用`MPMoviePlayerLoadStateDidChangeNotification`显示缓冲标志等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:41:35.193

我找到了你必须包含这一行的答案

```
movieViewController.moviePlayer.movieSourceType = MPMovieSourceTypeFile; 
```

否则显示黑屏

# matlab - 警告: 目录名称太长。:

> ID：13075748
> 
> 赞同：1
> 
> 时间：2012-10-25T19:23:53.980
> 
> 标签：matlab, parameters, curve-fitting, fminsearch

我正在尝试为一个非常困难的功能应用一个拟合程序，这实际上是

```
||F(theoretical)-F(experimental)||^2\. 
```

我需要拟合大约 12 个参数。我决定不打印这个函数，因为它包含大约 20K 个字符。做拟合我使用`fminsearch`. 开始后，我收到一条很长的消息，其中指出：

> 警告：目录名称太长。：%D:\upcon_1.m>fit_all_Callback/（这是我的函数的完整代码）

在启动 matlab 后大约 4 秒后，matlab 被挂起，windows 将其关闭。这是什么原因？

提前感谢您的每一个回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:35:53.000

我看不到/不想看到您的代码，但警告消息表明您以某种方式编写了代码来告诉 MATLAB 将文件内容作为字符串并将其视为路径！我建议您在代码的第一行放置一个断点，并逐行遍历它，直到找到有问题的命令。布雷特

# c# - 关于 As<>() 方法在 AutoMapper 中的作用的详细信息

> ID：13075749
> 
> 赞同：4
> 
> 时间：2012-10-25T19:23:55.140
> 
> 标签：c#, .net, automapper

我已经进行了大量的谷歌搜索，并且查看了 AutoMapper wiki，但我找不到 As<> 方法在 AutoMapper 中的作用的定义。

我有一些猜测。我玩过它一点。但我觉得我需要查看一些文档。

我认为该方法的名称对于有效的谷歌搜索来说太普通了。

如果有人知道此方法的文档在哪里（或知道它的来龙去脉），请发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:55:29.463

它是映射重定向。下面的测试证明了这一点：

```
[TestFixture]
public class DestinationTypePolymorphismTest
{
    public class Customer
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    public class CustomerStubDTO
    {
        public int Id { get; set; }
    }

    public class CustomerDTO : CustomerStubDTO
    {
        public string Name { get; set; }
    }

    public class Order
    {
        public Customer Customer { get; set; }
    }

    public class OrderDTO
    {
        public CustomerStubDTO Customer { get; set; }
    }

    [Test]
    public void Mapper_Should_Allow_Overriding_Of_Destination_Type()
    {
        var order = new Order() { Customer = new Customer() { Id = 1, Name = "A" } };
        Mapper.CreateMap<Order, OrderDTO>();
        Mapper.CreateMap<Customer, CustomerDTO>();
        Mapper.CreateMap<Customer, CustomerStubDTO>().As<CustomerDTO>();
        var orderDto = Mapper.Map<Order, OrderDTO>(order);

        var customerDto = (CustomerDTO)orderDto.Customer;
        Assert.AreEqual("A", customerDto.Name);
        Assert.AreEqual(1, customerDto.Id);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:38:43.143

我仍然无法找到有关“As”方法的任何文档，但据我所知，这是一个映射重定向。

例如，这段代码：

```
Mapper.CreateMap<SomethingFromWebService, ISomething>().As<Something>(); 
```

意思是：对于这个 Mapping ( `ISomething`) 解决它`As`一个`Something`.

注意：这个[问题](https://stackoverflow.com/q/13075588/16241)可以为这个答案提供一些背景信息。

# matlab - MATLAB 样条：沿 y 轴计算

> ID：13075751
> 
> 赞同：0
> 
> 时间：2012-10-25T19:23:56.937
> 
> 标签：matlab, spline

请参阅此图以获取说明：[![前](../Images/a1206fda17765d6ab8fab928eb29f792.png)](https://i.stack.imgur.com/XoOzt.jpg) 。两条红色曲线通过两次使用样条函数进行插值。现在我需要找到将蓝色点与两条红色曲线对齐的水平位移。结果必须如下所示：[![后](../Images/9752c5c85df641518840e686af8596a7.png)](https://i.stack.imgur.com/YaI3b.jpg) .

是否可以找到属于某个样条曲线的某个给定 y 坐标的 x 坐标？那么这可以很容易地解决。

编辑：简单地改变 x 和 y 轴并没有帮助，因为样条曲线并没有为两条曲线之一提供良好的曲线。

Edit2：我忘了说时间很重要。我正在寻找一个非常快速的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:34:06.637

设`xBlue`和`yBlue`是蓝点的坐标（n×1 向量），并且`yRedFun`是样条逼近函数，因此`yRedFun(x)`将返回插值的红线`x`。例如`yRedFun`，可能是匿名函数句柄`@(x) ppval(pp,x)`。也许您需要稍微外推红线，以便在所有 xBlue 上定义 yRedFun。

我们现在可以定义一个最小化函数：

`cost = @(deltaX) norm( yBlue - arrayfun(yRedFun, xBlue + deltaX) )`

它的最小值可以通过`deltaX = fminsearch(cost, 0)`或找到`deltaX = fzero(cost, 0)`。

虽然这可能是一种过于笼统的方法，但如果不需要快速性能，应该没问题。此外，由于蓝色和红色之间的拟合可能不准确，因此该方法将您试图最小化的规范形式化。

* * *

如果需要性能，可以使用下一个算法：

```
function deltaX = findDeltaX(xBlue, yBlue, yRedFun, precision)
    deltaX = 0;         % total delta
    deltaDeltaX = Inf;  % delta at each iteration
    yRedFunDer = fnder(yRedFun);

    while(abs(deltaDeltaX) > precision)
        xRed = xBlue + deltaX;
        yRed = fnval(yRedFun, xRed);
        yRedDer = fnval(yRedFunDer, xRed);

        deltaDeltaX = yRedDer \ (yRed - yBlue);

        deltaX = deltaX + deltaDeltaX;
    end
end 
```

低导数的点可能会降低精度。在第一次迭代中，您可以选择`N`具有最高导数的点并丢弃所有其他点。这也将提高性能。

```
[~, k] = sort(abs(yRedDer), 'descend');  
k = k(1:N);  
yRedDer = yRedDer(k);
xBlue = xBlue(k);  
yBlue = yBlue(k); 
```

# java - Java：无效的线程访问

> ID：13075755
> 
> 赞同：0
> 
> 时间：2012-10-25T19:24:06.750
> 
> 标签：java, multithreading, swt

我是 java noob 程序员，我遇到了 SWT Exception Invalid thread access 的问题，我已经找到了，我发现*当你尝试从不是 UI 线程的线程中对接口项进行操作时，就会发生这种情况。*但我不知道如何解决它。

**问题：** 我有 4 个课程：

*   notify - 创建显示通知的 swt 窗口
*   主线程 - 从网上下载内容并使用通知类显示通知
*   窗口 - 它显示托盘图标，设置，它是主类 - 它启动主线程
*   在第二个 swt 窗口中显示通知的类。

问题是它因无效的线程访问而崩溃。我不知道如何**显示两个 swt 窗口（完全不同的类）**

* * *

该应用程序下载网页，解析它并获取我想要的信息。然后使用类*通知*它显示通知。我添加了 SWT Window 类*Window*，它显示托盘图标，还有一些设置，它也是主类，并且该类运行*ZadaneReader*线程。**第一个问题：**我应该以其他方式添加 SWT 窗口（主要目标是：托盘图标和设置）吗？

我的应用程序包含以下类：

*   ZadaneReader - 它下载网页，解析它并使用类*Notify*，它显示通知
*   通知 - 该类以 2 种方式显示通知：a）使用 exec *notify-send*（但它仅是 Ubuntu）和 b）它创建对象 UniNotifyWindow，这是显示通知的第二个 SWT 窗口
*   UniNotifyWindow - 显示自己的通知的 swt 窗口
*   窗口 - 设置、托盘图标、启动线程**时的主类**和 ZadaneReader 线程

目前：当我不使用 UniNotifyWindow**或者**我不使用 Window 时它可以工作（使用测试器类启动 Zadane 线程）。

我想这是一个愚蠢的问题，我犯了很多错误，但我希望你不会责怪我，但如果你能告诉我我做错了什么，我会很高兴。

**来源：** [https ://docs.google.com/open?id=0B5VL4J_7HrgaTkt4a1Q2VVQxZEE](https://docs.google.com/open?id=0B5VL4J_7HrgaTkt4a1Q2VVQxZEE)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:51:21.480

您只能从主（又名“显示”）线程访问 SWT UI 元素。这意味着您不能像在另一个线程的文本框中设置文本一样多。将工作推送到显示线程的最简单方法是调用

```
Display.getDefault().asyncExec(...) 
```

请注意，您应该在显示线程中运行的内容保持离散 - 长时间运行的任务会使您的 UI 无响应。

# c# - 使用正则表达式从字符串中删除一些字符

> ID：13075757
> 
> 赞同：1
> 
> 时间：2012-10-25T19:24:10.640
> 
> 标签：c#, regex, string, replace

我正在使用以下正则表达式：

```
documentText = Regex.Replace(documentText, "\\\\|\\^|\\+|\\*|~|#|=|\"", ""); 
```

它有效。但是当我使用以下方法拆分此字符串时：

```
wordsInText = documentText.ToLower().Split(' ').ToList(); 
```

我得到标记为`""`（空字符串）的元素。我可以通过遍历集合并删除空元素来手动删除它，但它必须是防止这种奇怪行为的一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:27:35.657

```
documentText.ToLower().Split(new char[]{' '},StringSplitOptions.RemoveEmptyEntries) 
```

# speech-recognition - 改进 kinect 语音识别

> ID：13075758
> 
> 赞同：1
> 
> 时间：2012-10-25T19:24:12.437
> 
> 标签：speech-recognition, kinect, kinect-sdk

我已经能够在 kinect 上进行语音识别。但是，我正在尝试提高识别某些单词的效率，即使它们是句子的一部分。

```
this.speechEngine = new SpeechRecognitionEngine(ri.Id);

var words = new Choices();
words.Add(new SemanticResultValue("emerging", "EMERGING"));
words.Add(new SemanticResultValue("expiriences", "EXPIRIENCES"));
words.Add(new SemanticResultValue("paris", "PARIS"));
words.Add(new SemanticResultValue("atlanta", "ATLANTA"));
words.Add(new SemanticResultValue("creative", "CREATIVE"));
words.Add(new SemanticResultValue("back", "BACK"));

var gb = new GrammarBuilder { Culture = ri.Culture };
gb.AppendWildcard();
gb.Append(words);

var g = new Grammar(gb);
speechEngine.LoadGrammar(g);

speechEngine.SpeechRecognized += SpeechRecognized;

speechEngine.SetInputToAudioStream(
  this.audioStream, new SpeechAudioFormatInfo(EncodingFormat.Pcm, 16000, 16, 1, 32000, 2, null));
  speechEngine.RecognizeAsync(RecognizeMode.Multiple); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:57:35.100

您应该退后一步，查看 Micrsoft Speech Platform（版本 11 是最新版本）。

[http://msdn.microsoft.com/en-us/library/dd266409.aspx](http://msdn.microsoft.com/en-us/library/dd266409.aspx)

文档（包括参考文档）详细介绍了您在处理语法定义时的具体程度。更好的文档之一是语音识别语法规范 (SRGS) v1.0 以及如何定义“动态”词汇。

[http://www.w3.org/TR/speech-grammar/](http://www.w3.org/TR/speech-grammar/)

如果您想要更多动态词汇表，我强烈建议您使用外部 XML（使用 SRGS 定义）而不是在代码中定义语法。

例如，这是我为航空公司创建的部分：

```
 <rule id="showFlight">
    <example>Show me Alaska Airlines flight number 2117.</example>
    <example>Where is US Airways flight 45.</example>
    <item>
      <one-of>
        <item>show me</item>
        <item>where is</item>
      </one-of>
    </item>
    <item>
      <ruleref uri="#airline" />
      <tag>out.Carrier = rules.airline;</tag>
    </item>
    flight
    <item repeat="0-1">number</item>
    <tag>out.Number = "";</tag>
    <item repeat="1-">
      <ruleref uri="#digit" />
      <tag>out.Number += rules.digit;</tag>
    </item>
  </rule> 
```

...请注意，那里有很多参考资料以及许多可选和替代方案...而且这个很简单！

仅仅在句子中间拿起“Paris”这个词，你的运气就会变差，然后你会研究在引用“Paris”这个词时，你的应用程序将如何被使用和说话。

# c# - 具有隔离级别的 SQL 到 DataTable.Readuncommitted

> ID：13075761
> 
> 赞同：1
> 
> 时间：2012-10-25T19:24:19.853
> 
> 标签：c#, sql, datatable

我有下面的代码，我想确保它做我认为它做的事情。

简单地说，我正在尝试使用 select 命令填充数据表，并且我想将isolationlevel.readuncommitted 与我使用的任何命令一起使用。

```
DataTable dtTable = new DataTable();
TransactionOptions transOptions = new TransactionOptions() { IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted };
using (new TransactionScope(TransactionScopeOption.Required, transOptions))
{

    SqlCommand sqlCMD = new SqlCommand(sqlquery, SqlCon);
    sqlCMD.CommandTimeout = 0;
    SqlDataAdapter sqlDataAdp = new SqlDataAdapter(sqlCMD);
    sqlDataAdp.Fill(dtTable);
}
return dtTable; 
```

# php - 如何使用 Jquery 从多选条件中获取输入值

> ID：13075766
> 
> 赞同：0
> 
> 时间：2012-10-25T19:24:31.157
> 
> 标签：php, javascript, jquery, html, jquery-ui

我有这个带有多选块的表单，我试图在单击时获取每个块的值，以便将其发送到数据库，但是每次单击块时，我的脚本都会获取所有值，有什么想法吗？

我在这里有一个 jsFiddle：http: [//jsfiddle.net/creativestudio/Hqbmk/1/](http://jsfiddle.net/creativestudio/Hqbmk/1/)

这是我的html：

```
<form action="" method="post" id="postingFeedback">

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote1" value="0">
                </li>
                <li class="vote" nname="vote1" value="1">
                </li>
                <li class="vote" name="vote1" value="2">
                </li>
                <li class="vote" name="vote1" value="3">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote2" value="0">
                </li>
                <li class="vote" nname="vote2" value="1">
                </li>
                <li class="vote" name="vote2" value="2">
                </li>
                <li class="vote" name="vote2" value="3">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote3" value="3">
                </li>
                <li class="vote" nname="vote3" value="2">
                </li>
                <li class="vote" name="vote3" value="1">
                </li>
                <li class="vote" name="vote3" value="0">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote4" value="0">
                </li>
                <li class="vote" nname="vote4" value="1">
                </li>
                <li class="vote" name="vote4" value="2">
                </li>
                <li class="vote" name="vote4" value="3">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                <li class="vote" name="vote5" value="0">
                </li>
                <li class="vote" nname="vote5" value="1">
                </li>
                <li class="vote" name="vote5" value="2">
                </li>
                <li class="vote" name="vote5" value="3">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

<div class="clear"></div>

            <!-- .votes-list -->
            <ul class="vote-list">
                   <li class="vote" name="vote6" value="0">
                </li>
                <li class="vote" nname="vote6" value="1">
                </li>
                <li class="vote" name="vote6" value="2">
                </li>
                <li class="vote" name="vote6" value="3">
                </li>
                <input name="smileVote" class="is-hidden" data-role="none" value="" />
            </ul><!-- / .votes-list -->
            <div class="clear"></div>

 <button class="" type="submit" >Send</button>

</form> 
```

这是我的jQuery：

```
function getValues(){    
    $('#postingFeedback .vote-list li').on('click', function(event){         
           var $clickedValue = $(this).val(); // Retreive "value"
           $('input[name="smileVote"]').val($clickedValue); // Plug smile value into input for database POSTS
    });
}

getValues();
​ 
```

我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:31:39.947

您需要获取`li`'s 的同级输入，因此它不会为所有输入设置值

```
$('#postingFeedback li').on('click', function(event){        
       var $clickedValue = $(this).val(); // Retreive "value"
       $(this).siblings('input[name="smileVote"]').val($clickedValue); // Plug smile value into input for database POSTS
}); 
```

此外，要发布每个输入值，您需要为输入元素使用不同的名称

[http://jsfiddle.net/wirey00/Hqbmk/2/](http://jsfiddle.net/wirey00/Hqbmk/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:28:42.803

问题是每个都有相同的名称：“smileVote”

每个都应该有不同的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:32:30.790

```
function getValues(){    
    $('#postingFeedback .vote-list li').on('click', function(event){         
           var $clickedValue = $(this).val(); // Retreive "value"            
           $(this).parent().find('input[name="smileVote"]').val($clickedValue); // Plug smile value into input for database POSTS
    });
}

getValues(); 
```

这应该会有所帮助。

# javascript - 等待一个函数返回一个值，然后再继续执行其他函数的其余命令

> ID：13075767
> 
> 赞同：1
> 
> 时间：2012-10-25T19:24:32.763
> 
> 标签：javascript, jquery, ajax, callback, return

我正在将 jquery 中的一些动画与一些 ajax 加载相结合 - 从函数 A，我希望能够调用函数 B 以淡出当前内容，一旦该动画完成，返回以运行函数 A 中的其余代码。 这可能吗？我正在描绘这样的事情：

```
function buttonClicked(){
  if(sectionHidden != true){
    hideSection($sectionRef);
  }
  //RUN THE FOLLOWING AFTER HIDE SECTION HAS FINISHED (FUNCTION B)
  loadSection();
}

function hideSection($sectionRef){
  $sectionRef.fadeTo(500,0,function(){
    return someValue;
  });
} 
```

由于我的代码中存在一些其他复杂性（调用 hideSection 的多个函数），我无法从 hideSection 调用 loadSection。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T19:26:52.693

`.fadeTo()`接受一个在淡出完成时调用的回调参数。您所要做的就是为其提供`loadSection`功能。以机智：

```
function buttonClicked() {
    if (!sectionHidden) {
        hideSection($sectionRef, loadSection);
    }
    else {
        loadSection();
    }
}

function hideSection($sectionRef, doneCallback) {
    $sectionRef.fadeTo(500, 0, doneCallback);
} 
```

如果您不想在`hideSection()`从代码的另一部分调用后加载该部分：

```
function someStuff() {
    //stuff...
   hideSection($superRef); //won't call loadSection()
   //more stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:31:51.287

不幸的是，这不是 javascript 的工作方式。在 JS 中，您的代码不应阻塞。改用回调：在函数 A 中调用 fadeTo 并在回调中提供函数 A 的其余部分。当 fadeTo 完成时调用回调。

从[jquery fadeTo()](http://api.jquery.com/fadeTo/)：

```
$('#clickme').click(function() {
    $('#book').fadeTo('slow', 0.5, function() {
      // Animation complete.
    });
  }); 
```

编辑：你的代码应该是这样的......

```
function buttonClicked(){
  if(sectionHidden != true){
    hideSection($sectionRef, function(){
      loadSection();
    });
  }
}

function hideSection($sectionRef, func){
  $sectionRef.fadeTo(500,0,func);
} 
```

# jquery - 未应用图像的灯箱

> ID：13075769
> 
> 赞同：0
> 
> 时间：2012-10-25T19:24:41.623
> 
> 标签：jquery, image, lightbox, lightbox2

我对图像的 LightBox 有一些问题

问题是当我从外部 php 文件加载图像时，它没有在灯箱中显示图像。

```
 <script type="text/javascript">
    $(document).ready(function(){   
    //Display Loading Image
    function Display_Load()
    {
        $("#loading").fadeIn(900,0);
        $("#loading").html("<img src='../images/lightbox-ico-loading.gif' />");
    }
    //Hide Loading Image
    function Hide_Load()
    {
        $("#loading").fadeOut('slow');
    };

   //Default Starting Page Results

    Display_Load();

    $("#content").load("images.php?page=1&uid=28", Hide_Load(), lightBox());

    //Pagination Click
    $("#pagination li").click(function(){

        Display_Load();

        //Loading Data
        var pageNum = this.id;
        var uid = 1;
        uid = "<?php echo $id; ?>";
        $("#content").load("images.php?page=" + pageNum + "&uid=" + uid, Hide_Load());
    });

});
    </script> 
```

它加载下面框中的所有图像，但没有任何灯箱效果。

```
<center><div id="loading" ></div>
                            <div id="content"></div>
            </center> 
```

通常要在灯箱中显示图像，我们将执行以下操作，它在所有其他地方都可以正常工作，然后只有上面的代码有问题。

```
 <script type="text/javascript">
$(function() {
    $('#gallery a').lightBox();
});
</script> 
```

任何人都可以分享一些关于它的提示。

谢谢你提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:29:16.723

试试这个：[http ://docs.jquery.com/Plugins/livequery](http://docs.jquery.com/Plugins/livequery)

使用此插件，您可以执行以下操作：

```
$('#gallery a').livequery(function() { $(this).lightBox() }); 
```

这样， .lightBox() 将应用于初始页面加载后添加的选择器。

# iphone - Facebook sdk 3.1.1、ios 6、FBNativeDialogs

> ID：13075772
> 
> 赞同：2
> 
> 时间：2012-10-25T19:24:45.050
> 
> 标签：iphone, ios, ios5, ios6

当我尝试在 ios 6 上显示共享对话框时，我的应用程序没有显示 FBNativeDialogs！

我正在使用 DEFacebookComposeViewController 库，在 ios 4.3、5.0 和 5.1 上没关系，在应用程序获取 facebooktoken 后出现对话框。但在 iOS 6 上，如果应用程序具有 facebook 令牌（我的意思是应用程序已经获得它，例如用户使用 facebook 登录），则不会出现对话框。只有在没有令牌然后它的工作时才会出现。并且使用 iOS 6 DEFacebookComposeViewController 它无法正常工作。FBNativeDialogs 返回错误代码 7。所以我的问题是如何在 iOS 6 上调用 DEFacebookComposeViewController，或者当已经有 facebook 令牌时如何使用 FBNativeDialogs。

```
 BOOL displayedNativeDialog = [FBNativeDialogs
 presentShareDialogModallyFrom:self
 initialText:@""
 image:nil
 url:[NSURL URLWithString:@"www.google.com"]
 handler:^(FBNativeDialogResult result, NSError *error) {

     // Only show the error if it is not due to the dialog
     // not being supporte, i.e. code = 7, otherwise ignore
     // because our fallback will show the share view controller.
     if (error && [error code] == 7) {
         return;
     }

     NSString *alertText = @"";
     if (error) {
         alertText = [NSString stringWithFormat:
                      @"error: domain = %@, code = %d",
                      error.domain, error.code];
     } else if (result == FBNativeDialogResultSucceeded) {
         alertText = @"Posted successfully.";
     }
     if (![alertText isEqualToString:@""]) {
         // Show the result in an alert
         [[[UIAlertView alloc] initWithTitle:@"Result"
                                     message:alertText
                                    delegate:self
                           cancelButtonTitle:@"OK!"
                           otherButtonTitles:nil]
          show];
     }
 }];

// Fallback, show the view controller that will post using me/feed
if (!displayedNativeDialog)
{
    UIDevice *device = [UIDevice currentDevice];
    CGFloat systemVersion = [[device systemVersion] floatValue];
    if (systemVersion > 5.5)
    {
        return;
    }
    DEFacebookComposeViewController *facebookViewComposer = [[DEFacebookComposeViewController alloc] init];
    self.modalPresentationStyle = UIModalPresentationCurrentContext;
    [facebookViewComposer setInitialText:@""];
    [facebookViewComposer addURL:@"www.google.com"]];

    [facebookViewComposer setCompletionHandler:^(DEFacebookComposeViewControllerResult result) {
        switch (result) {
            case DEFacebookComposeViewControllerResultCancelled:
                NSLog(@"Facebook Result: Cancelled");
                break;
            case DEFacebookComposeViewControllerResultDone:
                NSLog(@"Facebook Result: Sent");
                break;
        }

        [facebookViewComposer dismissModalViewControllerAnimated:YES];
    }];
    [self presentModalViewController:facebookViewComposer animated:YES];

    [facebookViewComposer release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:13:17.750

您需要在设备/模拟器上设置 Facebook 帐户（在 Settings->Facebook 下）。

更多细节： http: [//facebook.stackoverflow.com/questions/12592898/facebook-sdk-3-1-presentsharedialogmodally-fails/12681352#12681352](http://facebook.stackoverflow.com/questions/12592898/facebook-sdk-3-1-presentsharedialogmodally-fails/12681352#12681352)

# excel - 在 VBA 中将多页 Excel 工作簿导出为 PDF

> ID：13075781
> 
> 赞同：0
> 
> 时间：2012-10-25T19:25:15.587
> 
> 标签：excel, vba, pdf

我正在使用 Excel 2007 构建一个复杂的多选项卡（工作表）工作簿。我想从 VBA 中将其保存为 PDF。我正在尝试使用 ExportAsFixedFormat。

果然，这个调用正确地导出了一个 PDF，在正确的地方有正确的名称。但是，它仅包含当前可见的选项卡。

我在 Excel 2010 中找到了一个关于此的线程（我假设它是相似/相同的），它将所有工作表放在一个数组中，然后选择它们......

工作表（数组（“一个”，“两个”））。选择

但是，这会在我的机器上返回一个错误，即 Select 失败。

我敢肯定这是相当简单的事情，任何指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:33:14.483

*叹息*这很简单。

如果您导出 ActiveWorkbook 而不是 ActiveSheet...，那么您将获得没有任何数组或选择的所有工作表。

# thrift - thrift 中定义的异常

> ID：13075783
> 
> 赞同：2
> 
> 时间：2012-10-25T19:25:47.660
> 
> 标签：thrift

我有一个由其他人编写的旧文件，其中有一些数据格式异常。我有一个我几乎不理解的thrift编译器生成的java文件。我正在尝试验证一些日期输入，当输入无效时它应该抛出该异常。我真的不确定我是否可以使用该异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:38:30.490

这取决于生成代码的 Thrift IDL 文件。如果 IDL 不存在，可以通过查看为每个函数调用生成的反序列化方法来获取详细信息，通常它们被命名为 recv_Foo() 和 recv_Bar() 之类的东西。

```
exception MyError
{
  1: i32  code
}

exception UglyError
{
  1: i64  what_a_mess
}

Service Sample
{
  i32 Foo() throws (1: MyError me)
  i32 Bar() throws  (1: MyError me, 2: UglyError ue)
} 
```

Foo() 只能抛出 MyError，而 Bar() 可以抛出这两个异常。如果在处理 Foo() 调用时抛出 UglyError，客户端将不会看到此错误（但可能是另一个异常）。

# rubygems - 在 openhsift 中升级红宝石宝石

> ID：13075785
> 
> 赞同：1
> 
> 时间：2012-10-25T19:25:49.900
> 
> 标签：rubygems, openshift

有没有人遇到过这个问题我的意思是我有一个应用程序从那时起就爆炸了

**openshift**正在使用 ruby​​gem 版本**1.3.7**我想将 ruby​​gems 版本升级到至少

**1.5.3**有没有人面临这个问题

我怎样才能升级它

试图`update_rubygems`在 pre_build 钩子中定义命令不起作用

甚至`gem update --system`不起作用

有没有人这样做过

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:57:35.060

您能描述一下您在使用 1.3.7 和 Ruby 1.8 时遇到的问题吗？

如果它是 Rubygems 库中的一个严重错误，我们可以考虑在上游更新它。OpenShift 中的 Ruby 插件包含并运行来自上游存储库的 Rubygems 版本（在本例中，RHEL 6.x 将 Ruby 1.8 与 Rubygems 1.3.7 捆绑在一起，我们将 Ruby 1.9 与 Rubygems 1.8.24 捆绑在一起）。但是，由于我们需要在 RHEL 生态系统中工作，可能需要一段时间才能进行任何更新，并且如果 1.3.7 -> 1.5.3 的过渡不能完全向后兼容，则 RHEL 可能无法更新。

根据您的需求，您可以使用其他一些选项：

*   升级到 Ruby 1.9 - 在 OpenShift 中创建一个新应用程序并将您的 git 源上传到它 [https://gist.github.com/2cbccaa65b2a38cd8778](https://gist.github.com/2cbccaa65b2a38cd8778)
*   使用 Ruby 1.8 和 Rubygems 1.5.3 实现 DIY 墨盒 [https://openshift.redhat.com/community/developers/do-it-yourself](https://openshift.redhat.com/community/developers/do-it-yourself)

# expressionengine - 表达式引擎 - 如何设置类别以显示为下拉列表？

> ID：13075786
> 
> 赞同：1
> 
> 时间：2012-10-25T19:25:48.863
> 
> 标签：expressionengine

我正在使用 SafeCracker 表单在网站上输入数据，并且需要能够将类别选择显示为下拉列表而不是多选。

我在这里有这段代码，但我修改它的尝试没有任何区别：

```
<p>
{category_menu}
    <label for="categories">Choose a category...</label><br />
    <select name="category[]" id="categories" size="4" multiple="single">
            {select_options}
    </select>
{/category_menu}
</p> 
```

将其设置为显示下拉列表的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:56:30.197

我相信这更像是一个 HTML 错误。:) 没有multiple="single"这样的东西

只需完全删除它并拥有：

```
<select name="category[]" id="categories" size="4"> 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:10:05.803

总是可以在下面尝试，可能在 Safecracker 中工作（未测试）

```
<select name="my_custom_field">
{exp:channel:categories category_group="1" style="linear"}   
<option value="{category_name}">{category_name}</option>
{/exp:channel:categories} 
</select> 
```

# c# - 在 asp.net 中使用 updatepanel 后，选项卡控件中的网格没有用值刷新

> ID：13075789
> 
> 赞同：1
> 
> 时间：2012-10-25T19:25:56.467
> 
> 标签：c#, asp.net, updatepanel

我正在使用包含网格的选项卡下的更新面板。请在代码结构下方找到

我必须使用 ajax updatepanel 通过选择组合框控件中的元素来使用新值刷新网格。我的组合框不支持服务器端事件。我正在我的客户端文件中编写javascript函数，它在C#中调用按钮事件，并且按钮在不可见的更新面板中

.

我在 C# 中使用 updatepanel.update() 方法，但是值没有被刷新。

请提供问题的解决方案

# javascript - 为什么我需要做 $(document.body) 来使用 Mootools Element 方法扩展 document.body？

> ID：13075790
> 
> 赞同：3
> 
> 时间：2012-10-25T19:25:58.400
> 
> 标签：javascript, internet-explorer, mootools

因此，在尝试让我的应用程序在最新的 IE 上运行后，事实证明 IE 不喜欢以下代码：

```
document.body.getElement('.className'); 
```

Firefox 和 Chrome 响应正常，但`document.body`在 IE 上没有 Mootools Element 方法。

查看[文档](http://mootools.net/docs/core/Element/Element)后，包含一些示例`document.body`以`$()`将其公开给 Mootools 方法。

只是想知道它在 FireFox/Chrome 中运行良好但在 IE 中无法自动运行的原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T20:51:47.693

这是因为 IE 暴露（或者，呃，不）用于扩展的 Element 原型的方式。在适当的浏览器中，`document.body`- 以及作为 DOM 的一部分并从 Element 派生的所有其他内容 - 继承附加到`Element.prototype`

在旧的 IE 中，这不会发生（它继承自内置的 proto 但它是只读的）。查看有关原因的任何主题 - 例如。[真的没有办法在IE（<8）中暴露一个html元素的原型吗？](https://stackoverflow.com/questions/592815/is-there-really-no-way-to-expose-the-prototype-of-a-html-element-in-ie-8)

简而言之，它是 DOM。这不是 ECMA 规范。他们没有这样做。他们现在这样做（完全从 IE9 开始）

MooTools - 作为原型 - 通过扩展它手动访问的元素来解决这个问题。它通过 $ 或元素构造函数或 Slick（当它第一次遇到元素时）这样做。

在 IE 中，extend 不仅会设置元素存储/uid，还会将对 expando 属性的引用从 Element.prototype 复制到元素对象本身。

所以，如果你这样做了：

```
$(document.body);
document.body.addClass('bar').adopt(new Element('div')); 
```

这会奏效。您只需要扩展一次，然后将所有方法复制到实际对象上。

将来，mootools 将不再是原型，而是包装（如 jquery），因此任何元素访问都将通过 $ 类型函数。

见[https://github.com/mootools/mootools-core/blob/master/Source/Element/Element.js#L268-275](https://github.com/mootools/mootools-core/blob/master/Source/Element/Element.js#L268-275)

# unity3d - kinect unity3d 人脸追踪

> ID：13075791
> 
> 赞同：0
> 
> 时间：2012-10-25T19:26:03.130
> 
> 标签：unity3d, kinect

我想在用户的脸上放置一个面具来跟踪头部以匹配运动和旋转，最后抓取表演者的 30 秒视频。我一直在寻找如何在 unity3d 中使用 kniect 面部跟踪示例，但我找不到任何相关信息？...我检查了一个 kinect 包装器[http://wiki.etc.cmu.edu/unity3d/index.php/Microsoft_Kinect_-_Microsoft_SDK](http://wiki.etc.cmu.edu/unity3d/index.php/Microsoft_Kinect_-_Microsoft_SDK)但它不仅适用于骨骼，任何人都可以指出我的解决方案?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:00:56.453

官方 Microsoft Kinect for Windows Developer Toolkit v1.6 提供了您尝试执行的操作的示例：http: [//www.microsoft.com/en-us/download/details.aspx?id=34807](http://www.microsoft.com/en-us/download/details.aspx?id=34807)

如果您想将其移植到不同的平台，那么查看这些应该有大量的重用。

# ajax - 谷歌浏览器中的传输错误

> ID：13075799
> 
> 赞同：0
> 
> 时间：2012-10-25T19:27:00.330
> 
> 标签：ajax, json, google-chrome, cors, asp.net-web-api

在我自己的机器上调用网络服务时，我在 Chrome 中遇到错误。错误是：

```
Origin http://localhost:52386 is not allowed by Access-Control-Allow-Origin. 
```

我在[这里](https://stackoverflow.com/questions/10143093/origin-is-not-allowed-by-access-control-allow-origin "这里")阅读了其他问题和这样的文章：[Cross Domain AJAX](http://www.cypressnorth.com/blog/programming/cross-domain-ajax-request-with-json-response-for-iefirefoxchrome-safari-jquery/)；但他们倾向于处理 IE 无法正常工作的问题，而我的 Chrome 也有问题。

我将以下内容添加到我的 webservice/Global.asax.cs 中：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    //HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
    // Changed to this:
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "http://localhost:52386");
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "http://localhost:80");

} 
```

这是我的 HTML 代码（我需要将其保存为纯 HTML，后面没有代码）：

```
 $(document).ready(function () {
        var user = 'testuser';
        var pwd = 'abc123';
        var auth = 'Basic ' + Base64.encode(user + ':' + pwd);
        if ($.browser.msie) {
            jQuery.support.cors = true;
            $.ajax({
                type: "GET",
                url: "http://localhost/Website.Webservice/api/TaxDocument",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "text json",
                headers: { Authorization: auth },
                crossDomain: true,
                success: function (data, textStatus, jqXHR) { ProcessOutput(data); },
                error: function (jqXHR, textStatus, errorThrown) { alert('Error: ' + textStatus + ' ' + errorThrown); }
            });
        } else {
            $.ajax({
                type: "GET",
                url: "http://localhost/Website.Webservice/api/TaxDocument",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                crossDomain: true,
                dataType: "json",
                headers: { Authorization: auth },
                success: function (data, textStatus, jqXHR) { ProcessOutput(data); },
                error: function (jqXHR, textStatus, errorThrown) { alert('Error: ' + textStatus + ' ' + errorThrown); }
            });
        }
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:55:12.443

好的，所以这是一个相当大的问题。首先，IIS 7.5 和 VS 开发服务器，以及 IIS Express 处理 CORS 的方式不同。主要问题是我的网络服务没有响应来自 chrome 和 firefox 的 OPTIONS 请求；IE 和 Safari 根本不在乎。

我使用了 ThinkTecture 的 NuGet 包，它有一个 CORS 处理程序。请参阅此处的讨论：[CORS 支持](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)。

我修改后的 JS 现在不关心浏览器了（我在 IE、Safari、Chrome 和 FireFox 中测试过）

```
<script type="text/javascript">
        var GetTaxDocument = function () {
            var url = "http://myWebService.com/WebService/Api/Products;
            var user = "myUser";
            var pwd = "pwd123";
            var auth = Base64.encode(user + ':' + pwd);

            jQuery.support.cors = true;
            $.ajax({
                type: "GET",
                url: url,
                //data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "text json",
                headers: { Authorization: 'Basic ' + auth },
                crossDomain: true,
                success: function (data, textStatus, jqXHR) {ProcessOutput(data); }
                error: function (jqXHR, textStatus, errorThrown) { alert('Error: ' + textStatus + ' ' + errorThrown.message); }
            });
        };

        var ProcessOutput = function (data) {
            var body = "";
            $.each(data, function () {
                var row = "";
                row += "ID:   " + this.ID + "<br />";
                row += "Desc: " + this.Desc + "<br />";
                body += "<p>" + row + "</p>";
            })
            $('#results').html(body);
        };
    </script> 
```

我在 global.asax.cs 中添加了以下内容：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        GlobalConfiguration.Configuration.MessageHandlers
          .Add(new BasicAuthMessageHandler()
          {
              PrincipalProvider = new AuthenticationPrincipalProvider()
          });
        //This is the CORS handler
        CorsConfig.RegisterCors(GlobalConfiguration.Configuration);

    } 
```

在我的 App_start\CorsConfig.cs 中，如下：

```
public class CorsConfig
{
    public static void RegisterCors(HttpConfiguration httpConfig)
    {
        WebApiCorsConfiguration corsConfig = new WebApiCorsConfiguration();

        // this adds the CorsMessageHandler to the HttpConfiguration’s
        // MessageHandlers collection
        corsConfig.RegisterGlobal(httpConfig);

        // this allow all CORS requests to the Products controller
        // from the http://foo.com origin.
        corsConfig
            .ForResources("TaxDocument")
            //.ForOrigins("http://localhost", "http://localhost:49878", "http://localhost:52386")
            .AllowAllOrigins()
            .AllowAll();
    }
} 
```

localhost:52386 和 localhost:49878 解决了我在调用在 localhost 上运行的 web 服务并从 VS 调试网页时遇到的问题。当我调试在 49878 上运行的 web 服务并在 localhost 或 52386 上运行网页时，添加 localhost 会有所帮助。我最终切换到`.AllowAll()`现在，因为我正在从 FILE:///c:/myWebPage.html 加载 HTML

如果我需要添加更多细节，请给我一些反馈和/或让我知道。

# python - 搜索目录和子目录

> ID：13075804
> 
> 赞同：1
> 
> 时间：2012-10-25T19:27:23.097
> 
> 标签：python

我正在尝试使此函数（搜索给定字符串的目录）也搜索所有子目录，并递归执行此操作。我对 Python 的了解还不够，无法开始。任何指导都会很棒。

谢谢！

```
def grep(regex, base_dir):
    matches = list()
    for filename in os.listdir(base_dir):
        full_filename = os.path.join(base_dir, filename)
        if not os.path.isfile(full_filename):
            continue
        with open(os.path.join(base_dir, filename)) as fh:
            content = fh.read()
            matches = matches + re.findall(regex, content)
    return matches 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:32:12.630

如果您要爬取整个目录，请尝试`os.walk()`. 像这样的东西可能有效（未经测试，但如果它不起作用可以调整）：

```
def grep(regex, base_dir):
    matches = list()
    # os.walk() returns a tuple - the directory path, a list of directories and the files
    for dirpath, dirname, files in os.walk(base_dir):
        # Iterate through the directory list, reading the files
        for directory in dirname:
          for filename in os.listdir(directory):
              with open(os.path.join(base_dir, directory, filename)) as fh:
                  content = fh.read()
                  matches = matches + re.findall(regex, content)
    return matches 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:18:54.477

我会使用这样的东西：

```
def find_file_matches(filename, regex):
    with open(filename, 'rt') as fh:
        return re.findall(regex, fh.read())

def walktree(top):
    """ Walk the directory tree starting from top, and
        yield a tuple of each folder and all the files in it. """
    names = os.listdir(top)
    yield top, (name for name in names if not os.path.isdir(name))
    for name in names:
        if os.path.isdir(name):
            for (newtop, children) in walktree(os.path.join(top, name)):
                yield newtop, children

def grep(regex, base_dir="."):
    matches = []
    for dir, files in walktree(base_dir):
        for file in files:
            filename = os.path.join(dir, file)
            matches.append(find_file_matches(filename, regex))
    return matches 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:32:04.487

对于递归遍历 try `os.walk`。你可以在这里找到如何使用它：www.saltycrane.com/blog/2007/03/python-oswalk-example/

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T19:29:47.797

从命令行

```
find . -type d | grep -i nameofdir 
```

或类似的东西。

# c# - 从 OnActionExecuting 重定向——匹配的路由不包含“控制器”值

> ID：13075812
> 
> 赞同：2
> 
> 时间：2012-10-25T19:27:45.143
> 
> 标签：c#, asp.net-mvc, controller, asp.net-mvc-4, asp.net-mvc-routing

这应该是一项超级简单的任务 - 从基本控制器重定向。这是一个示例性参考，但不包括我遇到的错误：[Redirecting from OnActionExecuting in a Base Controller](https://stackoverflow.com/questions/3214774/how-to-redirect-from-onactionexecuting-in-base-controller)

### 代码：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    if (myObject == null) {
        // System.InvalidOperationException: The matched route does not include a 'controller' route value, which is required.            
        filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary {{ "controller", "controllerName"}, {"action", "actionName"}});

        // Throws the same exception: 
        filterContext.Result = RedirectToAction("actionName", "controllerName");
    }
} 
```

### 呈现的网址：

```
http://localhost/controllerName/actionName?controller=controllerName&action=actionName 
```

调试时，传递给 Result 属性的重定向对象同时包含控制器和操作值。在返回的 URL 中它也存在。

### 问题：

为什么抱怨没有控制器值？为什么除了正常格式之外，它还显示查询字符串中的控制器和操作值？

### 更新：

```
// hard coded URL produces the same result. What am I misunderstanding?
filterContext.Result = new RedirectResult("~/Employee/Create"); 
```

# c++ - Eclipse 平台版本：3.7.2 不允许匿名联合

> ID：13075816
> 
> 赞同：2
> 
> 时间：2012-10-25T19:28:07.907
> 
> 标签：c++, eclipse, g++

这是我项目的一个片段->

```
union {
    struct {
        double x;
        double y;
        double z;
    };
    struct {
        double r;
        double g;
        double b;
    };
}; 
```

从命令行 g++ 能够编译这个，但 Eclipse IDE 说

```
Description    Resource Path    Location    Type
invalid use of non-static data member ‘Vector3d::<anonymous union>::<anonymous struct>::C/C++ Problem 
```

我知道之前讨论过一些类似的问题。但就我而言，我只是好奇为什么使用相同编译器（即 g++）的 IDE 无法编译，以及如何让它工作？

提前致谢

# ruby - 根据某些条件在 ruby 中拆分数组

> ID：13075822
> 
> 赞同：27
> 
> 时间：2012-10-25T19:28:59.010
> 
> 标签：ruby, arrays, multidimensional-array

我有一个名为的数组`@level1`，其值如下：

```
[
  [3.1, 4],
  [3.0, 7],
  [2.1, 5],
  [2.0, 6],
  [1.9, 3]
] 
```

我想把它分成两个数组，这样第一个数组 ( `@arr1`) 包含直到的值`2.1`，第二个数组 ( `@arr2`) 包含它之后的值。

之后，我将通过执行以下操作对我的第二个数组进行反向排序：

```
@arr2 = @arr2.sort_by { |x, _| x }.reverse 
```

然后我想将此数组合并到`@arr1`. 有人可以帮助我如何拆分数组然后将它们合并在一起吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-25T19:46:35.640

试试[分区](https://ruby-doc.org/core-3.0.1/Enumerable.html#method-i-partition)法

```
@arr1, @arr2 = @level1.partition { |x| x[0] > 2.1 } 
```

可能需要调整那里的条件，因为问题中没有很好地说明这一点，但这应该提供一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:43:41.633

像这样的东西？

```
arr = [
  ["3.1", 4],
  ["3.0", 7],
  ["2.1", 5],
  ["2.0", 6],
  ["1.9", 3]
]

arr1, arr2 = arr.inject([[], []]) do |f,a|
  a.first.to_f <= 2.1 ? f.last << a : f.first << a; f
end

arr = arr1 + arr2.reverse
# => [["3.1", 4], ["3.0", 7], ["1.9", 3], ["2.0", 6], ["2.1", 5]] 
```

# opengl - 如何将图像后处理着色器的结果添加到场景中

> ID：13075824
> 
> 赞同：3
> 
> 时间：2012-10-25T19:29:07.783
> 
> 标签：opengl, glsl, shader, framebuffer

我有一个 opengl 上下文，我在其中渲染了几个线框图元。我想在其中一些（不是全部）上应用一些后期处理效果（例如模糊、绽放）。为了实现这一点，我定义了一个带有附加纹理（颜色缓冲区）和渲染缓冲区（深度缓冲区）的屏幕外帧缓冲区。然后，我执行以下操作：

1.  绑定屏幕外缓冲区
2.  设置透视图
3.  绘制我想要模糊的线框图元
4.  取消绑定屏幕外帧缓冲区并绑定“主”帧缓冲区
5.  绘制不应进行后处理的更多图元

6.  设置正交视图

7.  设置后处理着色器，将屏幕外缓冲区的纹理作为统一参数传递
8.  绘制全屏四边形

9.  显示主机缓冲区的内容

问题是，通过将纹理渲染到屏幕外缓冲区并将结果用作 2D 四边形的纹理，我丢失了深度信息，整个场景看起来并不真实。

所以我的问题是，如何将我的深度缓冲区合并到帧缓冲区？或者将模糊或其他片段着色器效果应用于复杂 3D 场景的常用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:19:14.520

要专门解决这个问题：

> 所以我的问题是，如何将我的深度缓冲区合并到帧缓冲区？

如果它们是纹理（通过），则没有什么可以阻止您在不同的 FBO 之间共享**附件。**`glFramebufferTexture2D`这甚至适用于深度/深度模板缓冲区。afaik 在 GL3 中使用不同大小的附件甚至是有效的。

如果您稍后需要主帧缓冲区（可见窗口）中的深度信息，您可以使用[Framebuffer Blitting](http://www.opengl.org/wiki/Framebuffer_Object#Framebuffer_Blitting)来复制它。blit 操作非常快。

有很多方法可以处理渲染顺序。个人喜好/灵活性/性能。由于灵活性，我个人尽可能在 FBO 中做尽可能多的事情，并在需要时进行优化。最终的颜色结果也通过 blit 移动到帧缓冲区。

我在某些 linux 驱动程序上以及在某些情况下在 OS X 下共享深度附件（或一般附件）时遇到了问题，并且最终使用 blit 而不是共享深度附件也取得了巨大成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:52:04.943

我会使用早期深度测试来实现这一点。这个想法是，您首先将整个场景渲染到深度缓冲区中，即没有颜色写入。接下来进行颜色传递，在此禁用深度写入并使用相同的转换进行深度测试以确保相等。这为您提供了所需的隐藏表面去除。像你已经概述的那样进行颜色传递。现在通过覆盖模糊的图片，它应该看起来没问题（有一些病理情况可能会破坏，但这些可能会使用一些模板缓冲区技巧来修复）。

顺便说一句，您不需要为全屏四边形顶点着色器设置投影。只需通过顶点位置并使用坐标 (-1,-1) (1,-1) (1,1) (-1,1) 作为顶点。

# c++ - 在析构函数中检测到“尝试释放无效指针”错误

> ID：13075826
> 
> 赞同：2
> 
> 时间：2012-10-25T19:29:12.053
> 
> 标签：c++

我正处于编写相当大的代码的开始阶段。我已经定义了一个类：

```
class GPUMD {
    private:
        double xhi, xlo, yhi, ylo, zhi, zlo;
        int numAtoms;
        Atom *atoms;
    public:
        GPUMD();
        ~GPUMD();
}; 
```

析构函数定义如下：

```
GPUMD::~GPUMD() {
    if(atoms != NULL)
        delete [] atoms;
} 
```

现在，代码执行此操作：

```
int main(int argc, char *argv[]) {
    GPUMD gpumd;
    exit(0);
} 
```

我得到一个 glibc 检测到的错误：试图释放无效指针。使用 valgrind，我看到这个错误可以追溯到我的 GPUMD 析构函数。出于某种原因，即使我没有为该指针分配任何内容，atoms != NULL 测试也会返回 true。这是为什么？

编辑：构造函数定义为：

```
GPUMD::GPUMD() {} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T19:31:09.247

因为在构造函数`atoms`中没有显式初始化`NULL`或有效指针。将构造函数更改为：

```
GPUMD::GPUMD() : numAtoms(0), atoms(NULL) {} 
```

请注意，在 ,`atoms != NULL`之前的检查`delete[]`是多余的，因为`delete[]`, 或`delete`, 在`NULL`指针上是无操作的。以下是安全的：

```
GPUMD::~GPUMD() {
    delete [] atoms;
} 
```

由于存在动态分配的成员，因此`GPUMD`您需要防止复制实例`GPUMD`或实现赋值运算符和复制构造函数（请参阅[什么是三规则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)）。

作为 C++，考虑使用一个`vector<Atom>`（或一个`vector`智能指针）来代替它来为您管理动态内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:31:53.580

如果你没有为指针分配任何东西（换句话说，如果你没有初始化它）那么它的值是未定义的。它不是`NULL`（好吧，这可能是`NULL`纯粹的机会，但这种机会是微乎其微的。）只有`static`变量会自动零初始化。

长话短说，`NULL`在构造函数中将其初始化为：

```
GPUMD::GPUMD()
: atoms(NULL)
{ } 
```

或者，如果您不喜欢 POD 类型的初始化程序（为什么不呢？），那么：

```
GPUMD::GPUMD()
{ atoms = NULL; } 
```

# .htaccess - .htaccess 中带有 cookie 的多语言重定向？（没有 php）

> ID：13075829
> 
> 赞同：2
> 
> 时间：2012-10-25T19:29:21.387
> 
> 标签：.htaccess, cookies, multilingual, redirectwithcookies

我正在尝试通过浏览器对站点进行语言检测，但也允许 cookie 优先于自动检测。

我还是复杂的 .htaccess 规则的新手，所以我希望在这里能得到一些帮助。我真的不知道任何php，所以我希望避免它。

这就是我想要做的：

我有 3 种语言选项：德语 (de)、英国英语 (en-gb) 和英语主站点 (en) 它们对应于：www.site.com/de/、www.site.com/uk/、和 www.site.com/

1.  检查是否设置了语言 cookie
    1a) 如果设置，将访问者重定向到相应的语言目录。

2.  如果未设置 cookie：
    2a) 检测浏览器语言并设置语言 cookie（或默认为英语）
    2b) 将访问者重定向到相应目录。

3.  如果用户通过站点语言选择切换语言，请更新 cookie。

这样的事情可能吗？尝试这样做有限制吗？

# asp.net - 从 aspx 下拉列表调用 aspx.cs 文件中的方法

> ID：13075836
> 
> 赞同：0
> 
> 时间：2012-10-25T19:30:07.170
> 
> 标签：asp.net

我有 Java 中的服务器端代码和 .Net 中的客户端页面。现在我必须从 Java 中的服务器端操作类加载 .Net 中的下拉列表。为此，我创建了一个 asp 下拉列表，如下所示：

```
<asp:DropDownList ID="invoiceYear" runat="server" OnLoad='<%#GetYearRange()%>'  
    Width="150px" AutoPostBack="True">
</asp:DropDownList> 
```

我在 aspx.cs 中有一个 GetYearRange 方法，如图所示：

```
[WebMethod]
public static string GetYearRange()
{
    System.Diagnostics.Debug.WriteLine("I am in");
    string strNewValue = "page=" + "" + "&rows=" + "" + "&sort=" + "" + "&order=" + ""; 
    string ss = ServerUtil.getServerString(strNewValue, "/invoice/invoice!getYearRange.action");
    System.Diagnostics.Debug.WriteLine("ss-->" + ss);
    return ss;
} 
```

它不会采用那种方法。请建议我如何将这种方法的结果放入我的下拉列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:33:34.893

它不应该用`[WebMethod]`属性装饰，而且您也没有正确调用该方法。如果您想将此绑定到值，则需要将其 DataSource 设置为适当的集合。如果您尝试设置其当前选定的值，则需要专门设置它。我真正的问题是：你想用这段代码做什么？

如果您尝试使用从服务调用收到的值加载下拉列表：

```
protected void Page_Load(object sender, EventArgs e)
{
    // GetYearRange() will have to return at least a string[]
    // It would be better if it was a ListItem[] or a List<ListItem>
    invoiceYear.DataSource = GetYearRange();
    invoiceYear.DataBind();
} 
```

如果您已经拥有它 DataBound 但您需要强制所选项目成为您的服务的结果，则需要使用该`OnDataBound`事件：

```
<asp:DropDownList ID="invoiceYear" runat="server" OnDataBound="invoiceYear_DataBound"  
    Width="150px" AutoPostBack="True">
</asp:DropDownList>

...

protected void invoiceYear_DataBound(object sender, EventArgs e)
{
     invoiceYear.SelectedValue = GetYearRange();
} 
```

# python - Python C 扩展：返回 PyFloat_FromDouble(double) 段错误

> ID：13075843
> 
> 赞同：2
> 
> 时间：2012-10-25T19:30:36.377
> 
> 标签：python, python-3.x, python-c-api, python-c-extension, python-extensions

我最近将一些慢速 python 代码转换为 C 扩展。它工作得很好，除了它在第 162 次调用时生成段错误，就在 return 语句处。

这是它的工作原理。有一次，在对要计算的函数的所有调用之前，我将数据加载到内存中（记住 INCREF 父对象）：

```
static PyObject *grm_loadDosage(PyObject *self, PyObject *args) {
 /***
 Load the dosage matrix into global memory
 Global variables: DOSAGES_PYMAT - will be a pointer to the PyArrayObject of the dosage array (must incref this)
                   DOSAGES - will be a pointer to the double array underlying DOSAGES_PYMAT
 ***/
 PyArrayObject *dosageMatrixArr;
 if ( ! PyArg_ParseTuple(args,"O",&DOSAGES_PYMAT_OBJ) ) return NULL;
 if ( NULL == DOSAGES_PYMAT_OBJ ) return NULL;

 Py_INCREF(DOSAGES_PYMAT_OBJ);

 /* from PyObject to Python Array */
 dosageMatrixArr = pymatrix(DOSAGES_PYMAT_OBJ);
 /* get the row and col sizes */
 N_VARIANTS = dosageMatrixArr->dimensions[0];
 N_SAMPLES = dosageMatrixArr->dimensions[1];
 DOSAGES = pymatrix_to_Carray(dosageMatrixArr);
 Py_RETURN_TRUE;
} 
```

（有关 C 数组方法，请参阅[http://www.scipy.org/Cookbook/C_Extensions/NumPy_arrays ）。](http://www.scipy.org/Cookbook/C_Extensions/NumPy_arrays)然后我在我将从 python 调用的函数中引用加载的 double[][], DOSAGES：

```
static PyObject *grm_calcdistance(PyObject *self, PyObject *args) {
 /** Given column indeces (samples) of DOSAGES, and an array of row indeces (the variants missing for one or both),
     calculate the distance **/
 int samI,samJ,nMissing, *missing;
 PyObject *missingObj;
 PyArrayObject *missingArr;
 printf("debug1\n");
 if ( ! PyArg_ParseTuple(args,"iiOi",&samI,&samJ,&missingObj,&nMissing) ) return NULL;
 if ( NULL == missingObj ) return NULL;
 missingArr = pyvector(missingObj);
 missing = pyvector_to_Carray(missingArr);
 double replaced1[nMissing];
 double replaced2[nMissing];
 printf("debug2\n");

 int missingVectorIdx;
 int missingVariantIdx;
 // for each sample, store the dosage at the missing site (as it could be missing
 // in the OTHER sample), and replace it with 0.0 in the dosage matrix
 for ( missingVectorIdx = 0; missingVectorIdx < nMissing; missingVectorIdx++ ) {
  printf("debugA: %d < %d\n",missingVectorIdx,nMissing);
  missingVariantIdx = missing[missingVectorIdx];
  replaced1[missingVariantIdx] = DOSAGES[missingVariantIdx][samI];
  replaced2[missingVariantIdx] = DOSAGES[missingVariantIdx][samJ];
  printf("debugB\n");
  DOSAGES[missingVariantIdx][samI]=0.0;
  DOSAGES[missingVariantIdx][samJ]=0.0;
 }

 // calculate the distance (this uses DOSAGES which we just modified)
 double distance = _calcDistance(samI,samJ);

 printf("debug3\n");
 // put the values that we replaced with 0.0 back into the matrix
 for ( missingVectorIdx = 0; missingVectorIdx < nMissing; missingVectorIdx++ ) {
  missingVariantIdx = missing[missingVectorIdx];
  DOSAGES[missingVariantIdx][samI] = replaced1[missingVariantIdx];
  DOSAGES[missingVariantIdx][samJ] = replaced2[missingVariantIdx];
 }
 printf("debug4: %f\n",distance);
 // grab the python object wrapper and return it
 PyObject * distPy = PyFloat_FromDouble((double)distance);
 printf("debug5\n");
 if ( NULL == distPy )
  printf("and is NULL\n");
 return distPy;

} 
```

通过大量调试语句（如您所见），我已将段错误本地化为 return 语句。也就是说，在 python 浮点对象的实例化之后，但是在从 C 调用 return 和 python 的下一个执行行之间的某个位置（你猜对了，一个 print("debugReturned")。我在 stdout 中看到的是：

```
debug4: -0.025160
debug5
Segmentation fault 
```

所以 double 不是一个奇怪的值，python 对象是正确创建的，它不是 NULL，但是从 C 返回和在 python 中继续之间存在一些错误。在线资料表明这可能是一个 INCREF/DECREF 问题，但也指出 PyFloat_FromDouble() 和 Py_BuildValue("f",double) 会生成新的引用，因此不需要进行 INCREF。两种选择都会产生相同的结果。虽然我有理由确定我需要在我的 grm_loadDosage 函数期间对持有我的矩阵的 PyObject 进行 INCREF，但我已经尝试了使用和不使用 INCREF 的情况，其行为相同。

有什么想法吗？

谢谢

此外，堆栈跟踪：

```
#0  0x0000000000000000 in ?? ()
#1  0x000000000045aa5c in PyEval_EvalFrameEx (f=0x2aaae1ae3f60, throwflag=<value optimized out>) at Python/ceval.c:2515
#2  0x000000000045ecb4 in call_function (f=0x3fb7494970227c55, throwflag=<value optimized out>) at Python/ceval.c:4009
#3  PyEval_EvalFrameEx (f=0x3fb7494970227c55, throwflag=<value optimized out>) at Python/ceval.c:2692
#4  0x000000000045ecb4 in call_function (f=0x95c880, throwflag=<value optimized out>) at Python/ceval.c:4009
#5  PyEval_EvalFrameEx (f=0x95c880, throwflag=<value optimized out>) at Python/ceval.c:2692
#6  0x000000000045f626 in PyEval_EvalCodeEx (_co=0x98abe0, globals=<value optimized out>, locals=<value optimized out>, args=0x0, argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, kwdefs=0x0,
    closure=0x0) at Python/ceval.c:3350
#7  0x000000000045f74b in PyEval_EvalCode (co=0x146b098, globals=0x71, locals=0xc7) at Python/ceval.c:767
#8  0x0000000000482fab in run_mod (fp=0x881b80, filename=0x2aaaae257de0 "/humgen/gsa-hphome1/chartl/projects/t2d/gcta/resources/bin/cGRM/calculateGRM.py", start=<value optimized out>,
    globals=0x81e340, locals=0x81e340, closeit=1, flags=0x7fffffffbfd0) at Python/pythonrun.c:1783
#9  PyRun_FileExFlags (fp=0x881b80, filename=0x2aaaae257de0 "/humgen/gsa-hphome1/chartl/projects/t2d/gcta/resources/bin/cGRM/calculateGRM.py", start=<value optimized out>, globals=0x81e340,
    locals=0x81e340, closeit=1, flags=0x7fffffffbfd0) at Python/pythonrun.c:1740
#10 0x0000000000483268 in PyRun_SimpleFileExFlags (fp=<value optimized out>, filename=0x2aaaae257de0 "/humgen/gsa-hphome1/chartl/projects/t2d/gcta/resources/bin/cGRM/calculateGRM.py", closeit=1,
    flags=0x7fffffffbfd0) at Python/pythonrun.c:1265
#11 0x00000000004964d7 in run_file (argc=<value optimized out>, argv=0x7df010) at Modules/main.c:297
#12 Py_Main (argc=<value optimized out>, argv=0x7df010) at Modules/main.c:692
#13 0x000000000041563e in main (argc=11, argv=0x7fffffffc148) at ./Modules/python.c:59 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:52:22.903

我建议尝试对您的代码运行 valgrind，请参阅 [如何将 valgrind 与 Python C++ 扩展一起使用？](https://stackoverflow.com/questions/3982036/how-can-i-use-valgrind-with-python-c-extensions) 至于如何用 python 做到这一点，我不确定该 exeoption 列表对 python 3 有多大用处。无论如何，忽略所有来自没有任何文件部分的部分的输出。

如果您使用的是 Windows，我会推荐其中之一。 [是否有一个好的 Valgrind 替代 Windows？](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows)

您所做的调试告诉我错误发生在您的函数返回后。我不明白为什么 return 语句本身应该有问题。根据您的堆栈跟踪，错误的根源在于 python-3 本身的一些代码。我假设 python-3 本身没有错误。您可以尝试安装不同版本的 python-3 以进一步排除此问题。这就是为什么我假设您损坏了堆栈或堆，这就是 valgrind 派上用场的原因。

# wcf - 如何在控制台应用程序中托管 WCF 服务

> ID：13075844
> 
> 赞同：0
> 
> 时间：2012-10-25T19:30:40.197
> 
> 标签：wcf, host, wcf-hosting

我正在学习 wcf。所以我创建了 wcf 项目，它有一个类。代码如下

```
namespace TestWcfService1
{
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
public class Service1 : IService1
{
    public string GetData(string value)
    {
        return string.Format("You entered: {0}", "Welcome " + value);
    }

}
} 
```

现在，当我尝试将 wcf 服务引用添加到我的控制台应用程序时，例如添加服务引用和服务 url，例如**http://localhost:21541/Service1.svc**，然后我收到错误，称为**Metadata contains a reference that cannot be resolved ：'http://localhost:21541/Service1.svc'。**

所以我只是无法实现我的目标。我知道有些地方我遗漏了一些东西，这就是我出错的原因。所以请指导我如何将服务引用添加到控制台应用程序。app.config 将自动更新或者我需要在那里写任何东西。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:35:02.867

如果您的解决方案中有 WCF 服务项目，您可以右键单击控制台应用程序并说“添加服务引用”，然后单击“发现”按钮，它应该会为您找到它。
是的，配置文件需要使用行为和端点等进行更新。

查看：[WCF Metadata 包含无法解析的引用](https://stackoverflow.com/questions/4660480/wcf-metadata-contains-a-reference-that-cannot-be-resolved)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:37:57.470

在配置中仔细检查服务行为是否设置为允许服务元数据：

`<serviceMetadata httpGetEnabled="true"/>`

并在服务部分添加元数据端点

`<endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>`

编辑：示例配置

```
<system.serviceModel>
  <services>
    <service behaviorConfiguration="BehaviorConfig"
      name="[ServiceNameGoesHere]">
      <endpoint address="" binding="wsHttpBinding" contract="[ServiceContractHere]">
      </endpoint>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior name="BehaviorConfig">
        <serviceMetadata httpGetEnabled="True"/>
        <!-- To receive exception details in faults for debugging purposes, 
        set the value below to true.  Set to false before deployment 
        to avoid disclosing exception information -->
        <serviceDebug includeExceptionDetailInFaults="False" />
      </behavior>
    </serviceBehaviors>
  </behaviors>
</system.serviceModel> 
```

Dan Rigsby 的博客上有一篇很好的文章，名为[WCF 元数据](http://www.danrigsby.com/blog/index.php/2008/05/27/wcf-metadata/)，它更详细地解释了有关设置 MEX 端点（添加服务引用工作所必需的）的详细信息。

# css - 一排的多张桌子需要固定高度

> ID：13075846
> 
> 赞同：0
> 
> 时间：2012-10-25T19:31:06.467
> 
> 标签：css

抱歉标题不好，但我想不出更好的了。我有多个表，其中只有一行嵌入在另一个表的`<tr>`标签中，如下所示。

```
<tr>
  <td>
    <table>
      <tbody>
        <tr>
          <td>ABCD</td>
        </tr>
      </tbody>
    </table>
  </td>
  <td>
  <!-- Same code as above but with different content -->
  </td>
</tr> 
```

`<tr>`我希望两个标签的高度相同。我不想使用`<tr style="height: 20px;">`它，因为无论上下文如何，它都会插入固定高度，并且在许多情况下会增加额外的空间。外部表在`<td>`标签内有多个标签，而不是上面示例中显示的`<tr>`2 个标签。`<td>`

我遇到的问题是第二个表的内容更多，它的高度更多。此内容是随机的，我希望所有行都具有相同的高度。这可能吗？

```
 ___________
_____|ABCDEFCH |
|ABCD| ADASDF  |
-----|_________| 
```

**编辑**

* * *

在图片中，由于第 5 行第 2 列有更多文本，因此占用了更多空间。 ![在此处输入图像描述](../Images/5e654fba89be76a090ec46ff55eae8de.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:07:34.077

你的桌子应该是这样的：

```
 <table border="3" cellpadding="3" cellspacing="1">
    <tr>
        <td align="center">DD-004174-09</td>
        <td align="center">ASDFDFRT DFG DFSDFG SDFGSDF SDFSDF</td>
        <td align="center">SDFSDFG SDFGDF </td>
        <td align="center">09/02/2009</td>
    </tr>
    <tr>
        <td align="center" colspan="4">IGRT</td>
    </tr>
    <tr>
        <td align="center">XXEE</td>
        <td align="center">SDFSDG FGDFGH</td>
        <td align="center">YUTRYU</td>
        <td align="center">4568 DFGDGF DFGDFG </td>
    </tr>
    <tr>
        <td align="center">EEEE</td>
        <td align="center">AASDFASDFD DFGHDFGH</td>
        <td align="center">SDDS</td>
        <td align="center">2344 GFDT GFDGF</td>
    </tr>
    <tr>
        <td align="center">ASDF</td>
        <td align="center">ASDFDFRT DFG DFSDFG <br />SDFGSDF SDFSDF</td>
        <td align="center">-</td>
        <td align="center">-</td>
    </tr>
    </table> 
```

请在 google.com 上进行一些阅读和搜索，了解如何使用基本 HTML 构建页面，并在遇到更具体的问题时在此处发布。

一些有用的链接：

[http://www.w3schools.com/html/html_tables.asp](http://www.w3schools.com/html/html_tables.asp)

[http://www.webdesignfromscratch.com/html-css/html-tables/](http://www.webdesignfromscratch.com/html-css/html-tables/)

一切顺利。

# android - Android 浏览器使用 Overflow-y: auto 产生意外行为

> ID：13075849
> 
> 赞同：1
> 
> 时间：2012-10-25T19:31:18.783
> 
> 标签：android, jquery, css, user-interface, overflow

**当表溢出父级时，我正在尝试实现滚动：**

```
<div class="main_container">
<form id="list_wrapper">
<table>
    <tbody>
           <tr><td>HELLO</td></tr>
           <tr><td>HELLO</td></tr>
           <tr><td>HELLO</td></tr>
           <tr><td>HELLO</td></tr>
           <tr><td>HELLO</td></tr>
           <tr><td>HELLO</td></tr>
           <tr><td>HELLO</td></tr>
           <tr><td>HELLO</td></tr>
     </tbody>
   </table>
 </form>
</div>

//JQuery that will dynamically resize rows depending on how many rows there are.
<script type="text/javascript>
setTimeout(function(){
    var totalRowHeight = $("tr").height() * $("tr").length;    
    $("form#list_wrapper").css("height", "" + totalRowHeight + "");
},1);​
</script> 
```

请参阅[JSFiddle](http://jsfiddle.net/bigthyme/CL3Fk/1)进行演示！

有趣的是，在我的 Droid X 浏览器（版本：2.3.4）上打开此链接时，表格仍然溢出但不滚动。我希望 Android 能够复制通过桌面浏览器打开链接时看到的行为。

**注意**：我已经在包括 Safari 和 Chrome 在内的 IOS 浏览器中测试了这个链接，并且效果很好。

# nhibernate - FluentNHibernate 映射到现有表而不进行规范化

> ID：13075850
> 
> 赞同：0
> 
> 时间：2012-10-25T19:31:19.553
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我的数据库中有现有的表，需要创建一个域来处理现有数据。

我有下一个表结构：

```
Application
'ORDERSCANNER'

ApplicationFunction
'ORDERSCANNER','SCAN'
'ORDERSCANNER','READ'
'ORDERSCANNER','PRINT'

FunctionalGroup
'ADMIN','RUS','ORDERSCANNER','SCAN'
'ADMIN','RUS','ORDERSCANNER','PRINT'
'ADMIN','JAP','ORDERSCANNER','SCAN'
'ADMIN','JAP','ORDERSCANNER','PRINT'
'OPERATOR','RUS','ORDERSCANNER','SCAN'
'OPERATOR','JAP','ORDERSCANNER','SCAN'

User
'IVANOV','RUS','OPERATOR'
'PETROV','RUS','OPERATOR'
'PETROV','JAP','OPERATOR'
'SIDOROV','RUS','ADMIN - he is an ADMIN group but only for RUS. He is not able to scan for JAP 
```

这是我如何看待我的域

```
public class Application // root
{
    private readonly List<ApplicationFunction> _functions;
    public string ApplicationId { get; set; }

    public Application()
    {
        _functions = new List<ApplicationFunction>();
    }
    public void AddFunction(string newFunction)
    {
        var function = new ApplicationFunction(this, newFunction);
        _functions.Add(function);
    }
}
public class ApplicationFunction // value object
{
    public Application Application { get; private set; }
    public string FunctionId { get; private set; }

    public ApplicationFunction(Application application, string functionId)
    {
        if (application == null) throw new ArgumentNullException("application");
        if (functionId == null) throw new ArgumentNullException("functionId");
        Application = application;
        FunctionId = functionId;
    }
}
public class FunctionalGroup // root
{
    private readonly List<ApplicationFunction> _functions;
    public string GroupId { get; set; }
    public string MarketingPlanCode { get; set; }
    public IEnumerable<ApplicationFunction> Functions { get { return _functions; } }

    public FunctionalGroup()
    {
        _functions = new List<ApplicationFunction>();
    }
    public void AddFunction(ApplicationFunction applicationFunction)
    {
        _functions.Add(applicationFunction);
    }
}
public class User // root
{
    private readonly List<FunctionalGroup> _groups;
    public string UserId { get; set; }
    public IEnumerable<FunctionalGroup> Groups { get { return _groups; } }

    public User()
    {
        _groups = new List<FunctionalGroup>();
    }
    public void AddToGroup(FunctionalGroup functionalGroup)
    {
        _groups.Add(functionalGroup);
    }
} 
```

让我们看看用户。

```
public class UserMap : ClassMap<User>
{
     public UserMap()
     {
         Id(x => x.UserId).Column("USER_ID");
         HasMany(x => x.Groups).Cascade.All();
     }
} 
```

看起来我需要额外的数据来映射我的 FunctionalGroup 集合 - 它是 MarketingPlanCode。如果我将 MarketingPlanCode 属性添加到我的 User 类中，每个集合将只获得一个属性。但是我需要该集合中的每个项目的 I 属性。

好吧，如果我无法解释我需要什么，请查看我表中的示例数据。有没有办法映射它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:11:04.750

我认为该模型可以进一步简化，但首先完全放弃 FunctionalGroup 类。

```
public ApplicationFunctionMap()
{
    CompositeId()
        .KeyReference(x => x.Application, "application_id")
        .KeyProperty(x => x.FunctionId, "FunctionId");
}

public UserMap()
{
    Component(x => x.Group, c => 
    {
        c.Map(g => g.Name, "GroupId");
        c.Map(g => g.MarketingPlanCode, "MarketingPlanCode");
    })

    HasManyToMany(x => x.AllowedFunctions)
        .Table("FunctionalGroup")
        .ParentKeyColumns.Add("GroupId", "MarketingPlanCode") // in FunctionalGroup table
        .ChildKeyColumns.Add("application_id", "FunctionId") // in FunctionalGroup table
        .Propertyref(x => x.Group);   // Component defined above
} 
```

# visual-studio-2012 - 为什么我在运行项目后会丢失 JavaScript 智能感知？

> ID：13075852
> 
> 赞同：8
> 
> 时间：2012-10-25T19:31:30.623
> 
> 标签：visual-studio-2012, resharper, javascript-intellisense

由于某种原因，我在 Visual Studio 2012 中调试了我的 ASP.NET Web 应用程序后丢失了 JavaScript 智能感知。

你可以看到，当我开始时，我有完整的智能感知。在下图中，我得到了 knockoutjs 智能感知：

![智能感知工作](../Images/da21fc83da5f7c63dbd349f96435c6ad.png)

但是，一旦我调试应用程序，我就会失去智能感知。例如，如果我按 F5 调试 [更新：顺便说一句，这也发生在 CNTL-F5 上] 当我返回我的代码时，我失去了智能感知：

![智能感知不起作用](../Images/b9cecfc5d2457f02c44779b49d97bf27.png)

我发现让智能感知再次工作的唯一方法是去**Tools** -> **Import and Export Settings** -> **Reset all settings**。问题是这只会继续工作，直到我再次运行应用程序。

有谁知道如何永久解决这个问题？谢谢！

**更新**：这似乎与 ReSharper 有关（我使用的是 7.0.1）。如果我在 ReSharper的常规选项下将它从**ReSharper**更改为**Visual Studio intellisense，问题就会消失。**我想这会稍微改变我的问题 - 使用 ReSharper 时，如何让智能感知适用于诸如 knockoutjs 之类的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:21:56.350

除了 .cs 文件，我最近也丢失​​了智能感知。我开始一一禁用VS扩展，直到它得到修复。所以我发现，在我删除了一个 VS 扩展（与 TFS 相关）之后，Re-sharper 又开始以完全的智能感知功能再次工作。

因此，如果您的任何建议都不起作用，我建议您禁用扩展并检查 ReSharper 是否再次工作，以便您可以重新启用它们，直到 ReSharper 中断，然后您可以发现哪个扩展对您的 ReSharper 有害。祝你好运。

# c# - 在一个 datalist 模板单元格中显示多个图像

> ID：13075854
> 
> 赞同：3
> 
> 时间：2012-10-25T19:31:40.913
> 
> 标签：c#, asp.net, sql-server

我知道关于这个主题有很多问题，但我的情况有点不同。我试图在一个数据列表单元格中显示 3 个图像，例如，我在 SQL Server 中有一个可以有多个图像的产品表。

```
 Image Mapping table 
 ID     URL_Mapping_ID ProductID  
 1      image 1.png    1
 2      image 2.png    1
 3      image 3.png    1   

 Product Table 
 ProductID   Product
 1           Chips 
```

从 SQL 中选择它后，结果是多行但具有不同的图像。

现在在我的 asp 数据列表中，我必须显示 1 个带有所有图像的产品，以便用户可以放大缩略图。

实施此方案的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:33:42.323

您需要使用 HttpHandler 并将 IsReusable 属性设置为 true 以适应多个图像：

[使用 HttpHandler 流式传输数据库图像](https://stackoverflow.com/questions/1507572/streaming-databased-images-using-httphandler)

```
public class FeaturedHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        ...
    }

    public bool IsReusable
    {
        get
        {
            return true;
        }
    }
} 
```

[绑定图像](https://stackoverflow.com/questions/13018623/eval-image-data/13018763#13018763)：

```
<img class="mainEventsImage" 
    src='<%# Eval("MainImagePath").ToString().Replace("\\", "/") %>' 
        alt='<%# Eval("Title") %>' runat="server" /> 
```

由于您可能事先不知道每条记录有多少图像，因此您必须在代码隐藏中动态创建图像控件：

[在服务器端动态创建项目模板](http://www.codeproject.com/Articles/240760/Dynamically-create-item-templates-server-side)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:58:50.703

我做了一个小演示，演示如何在**dataList 中显示 dataList**。对于您给定的示例，我在产品 dataList 中创建了**另一个**图像**dataList**。`ItemTemplate`

 **```
<asp:DataList ID="dlProducts" runat="server" DataKeyField="ProductID" DataSourceID="sqlProducts">
    <HeaderTemplate>
        <table>
        <thead>
            <tr>
                <th>ProductID</th>
                <th>Product</th>
                <th>Images</th>
            </tr>
        </thead>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td><asp:Label ID="ProductIDLabel" runat="server" Text='<%# Eval("ProductID") %>' /></td>
            <td><asp:Label ID="ProductLabel" runat="server" Text='<%# Eval("Product") %>' /></td>
            <td>
                <asp:DataList ID="dlImages" runat="server" DataKeyField="ID" DataSourceID="sqlImages">
                    <ItemTemplate>
                        <img src='<%# Eval("URL_Mapping_ID") %>' width="20px" height="20px" />
                    </ItemTemplate>
                </asp:DataList>
                <asp:SqlDataSource runat="server" ID="sqlImages" ConnectionString='<%$ ConnectionStrings:ConnectionString %>' ProviderName='<%$ ConnectionStrings:ConnectionString.ProviderName %>' SelectCommand="SELECT * FROM [Image] WHERE ([ProductID] = @ProductID)">
                    <SelectParameters>
                        <asp:ControlParameter ControlID="ProductIDLabel" PropertyName="Text" Name="ProductID" Type="Int32"></asp:ControlParameter>
                    </SelectParameters>
                </asp:SqlDataSource>
            </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:DataList>
<asp:SqlDataSource ID="sqlProducts" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" SelectCommand="SELECT * FROM [Products]"></asp:SqlDataSource> 
```

此解决方案*可能又快又脏*，因此欢迎提供任何**提示或提示**！仅供参考：运行此演示会导致此结果。

![给定解决方案的输出](../Images/9ec3c66956776cbeb198e40c8aaea4a9.png)**

# c - 数据包过滤、IpTables 和路由

> ID：13075859
> 
> 赞同：0
> 
> 时间：2012-10-25T19:31:55.373
> 
> 标签：c, linux, routing, erlang, ip

从技术上讲，我是网络方面的新手。我需要正确理解所有这些是如何组合在一起来组织我的学习的，就像在这个大领域的所有地方一样。我已经了解网络结构、节点和协议（感知级别） 我看到数据包过滤和路由是通过 Erlang、C、Linux 命令中的代码完成的。我现在有点困惑，如果我加入并希望让我们说，在现有路由器中实现一个新功能。我真正需要知道什么？哪些编程教程最能帮助我正确理解这个编程领域（根据我所见，它是 C、Linux、Erlang）通常是嵌入式程序。

所以有人可以帮助澄清所有这些东西是如何在技术术语中拼接在一起的，编程视角，如何在这个领域成为一名程序员（修改路由器的东西），推荐教程

谢谢，任何帮助表示赞赏。

附言。我不是在这里捎带，我在这里和那里阅读了一些东西，但它们彼此之间没有直接关系，无法找到将其全部付诸实践的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:34:30.963

你想要由已故的 Richard W. Stevens绘制的[TCP/IP 。](http://en.wikipedia.org/wiki/TCP/IP_Illustrated)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T19:52:41.003

为什么你认为包过滤很重要？除非您计划开发网络嗅探器，否则它与大多数应用程序无关。

进行网络编程的典型方法是使用套接字，尽管对于大多数应用程序来说这有点太低级和原始。有更适合特定场景的更高级别的框架。例如，许多人在他们只需要跨网络的 IPC 时使用套接字。在这种情况下，最好在 Java 中使用 RMI（远程方法调用）或在 C++ 中使用 DCOM（分布式组件对象模型）（我确信在 .NET 中有类似的东西）。

所以你看，网络编程都是关于抽象和分层的。即使您使用原始 TCP，您也将使用抽象，因为 TCP 位于 IP 之上，而 IP 位于以太网之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:42:56.863

在编程方面，您应该从套接字编程开始，尽管可以使用任何语言。同样的 Richard Stevens Unix Networking Programming Vol 1 是一个很好的参考。

网络编程只能分层学习。除非您很好地了解应用层，否则您不应该期望了解传输层，并且同样会通过网络层一直到物理层

# struts2 - actioncontext 和 actionInvocation struts2 有什么区别？

> ID：13075860
> 
> 赞同：3
> 
> 时间：2012-10-25T19:31:57.247
> 
> 标签：struts2, actioncontext

我对 ActionContext 和 ActionInvocation 有点困惑。我知道 Action Context 是执行 Action 的上下文。ActionInvocation 是否位于 ActionContext 中，如 Session、Value Stack 等？其次，是否在每个用户请求上创建 ActionContext 因为它是每个线程唯一的？如果是这样，每次在每个用户请求上创建一个新的操作上下文是否成本太高？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:56:44.407

由于您知道`ActionContext`作为正在执行动作的上下文以及执行动作的上下文，我们还需要调用。它是 ActionContext 的一部分，您可以通过所有方式`ActionInvocation`从上下文中获取

```
public ActionInvocation getActionInvocation() 
```

上下文使用 ThreadLocals，这意味着存储在 ActionContext 中的值对于每个线程都是唯一的。对我来说这不是任何开销，因为在其他情况下，您必须确保在多线程应用程序中访问的所有内容都是线程安全`ActionContext`的。将为每个请求创建一个新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-03T16:03:12.217

Struts 2 ActionContext 和 Action Invocation 的区别

ActionContext 是在其中执行操作的对象的容器。存储在 ActionContext 中的值对于每个线程都是唯一的（即 ThreadLocal）。所以我们不需要让我们的动作线程安全。

我们可以通过调用 ActionContext 类的 getContext() 方法来获取 ActionContext 的引用。它是一种静态工厂方法。例如：ActionContext 上下文 = ActionContext.getContext();

动作调用：--

ActionInvocation 表示操作的执行状态。它包含动作和拦截器对象。

struts 框架提供了ActionInvocation 接口来处理ActionInvocation。它提供了很多方法，其中一些可以用来获取ValueStack、ActionProxy、ActionContext、Result等实例。 ActionInvocation接口的方法ActionInvocation接口常用的方法如下：

1)public ActionContext getInvocationContext() 返回与ActionInvocation 关联的ActionContext 对象。

2)public ActionProxy getProxy()返回持有这个ActionInvocation的ActionProxy实例。

3)public ValueStack getStack() 返回 ValueStack 的实例。

4)public Action getAction() 返回与此ActionInvocation 关联的Action 实例。

5)public void invoke()在处理这个ActionInvocation时调用下一个资源。

6)public Result getResult() 返回Result的实例。

# ruby-on-rails-3 - 具有基本身份验证的 HTML5 离线应用程序

> ID：13075867
> 
> 赞同：2
> 
> 时间：2012-10-25T19:32:27.123
> 
> 标签：ruby-on-rails-3, asset-pipeline, basic-authentication, html5-appcache

我正在尝试使用 HTML5 Appcache 和 Rack::Offline 让 Rails 3 项目脱机工作。我正在使用 Rails 3 Asset Pipeline，它提供了额外的摘要（application-dfla33q23jad.js）来保持清单文件的新鲜。理论上，只要资产发生变化，清单也会发生变化以包含资产的新消化版本。

（应用程序清单）

```
CACHE MANIFEST
assets/application-785189fec63978372c177135a521e081.js
assets/application-c69de8169df1ae42a1a4dcafdc5a1af4.css
assets/application.css
assets/application.js 
```

浏览器检测到新的清单，并且新的资产被缓存在后台，但是 html 没有得到更新以反映更新的资产。除了主条目之外，几乎所有资产都被缓存了。请注意下面的 js 和 css 链接如何与新版本没有相同的摘要，从而在刷新时导致 404（未找到）。

(index.html)

```
<html manifest="/application.manifest">
<head>
  <title>Project</title>
  <link href="/assets/application-cb58254cec63978372c177135a521e081.js" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/application-918b26fdf1ae42a1a4dcafdc5a1af4.css" type="text/javascript"></script>
</head>
<body>
  <p> Content </p>
</body>
</html> 
```

解决此问题的第一个想法是将 html 显式添加到清单中，以便 html 与其余资产一起更新。

```
CACHE MANIFEST
index.html
assets/application-785189fec63978372c177135a521e081.js
assets/application-c69de8169df1ae42a1a4dcafdc5a1af4.css
assets/application.css
assets/application.js 
```

我相信这会奏效，但 index.html 使用基本身份验证进行保护，因此在尝试更新 appcache 时会引发 401（未授权）错误。这引出了我的问题：

1.  appcache 不应该在显式条目更新时更新主条目（index.html）吗？
2.  appcache 是否提供了一种方法来包含使用基本身份验证保护的条目？
3.  appcache 请求不应该使用用户输入的相同凭据来查看页面吗？

# php - PHP time() 未计算

> ID：13075870
> 
> 赞同：0
> 
> 时间：2012-10-25T19:32:37.790
> 
> 标签：php, time

我对以下内容有点困惑

```
 echo "<p>" . time() . "</p>"; // current unix timestamp
  echo "<p>" . time() - 60*60*1 . "</p>"; // 1 hours ago
  echo "<p>" . date('H:i',time() - 60*60*1 ) . "</p>"; // 1 hours ago 
```

返回

```
 1351193453
 -3600
 20:30 
```

为什么`time()-3600`单独站立时不评估？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:34:16.777

这是一个运算符优先级问题。连接后计算减法。用括号括起来，就可以了：

```
echo "<p>" . (time() - 60*60*1) . "</p>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:33:40.747

尝试：

```
echo "<p>" . (time() - 60*60*1) . "</p>"; // 1 hours ago 
```

[演示](http://codepad.org/2ZhtWJVZ)

# python - Aptana Studio 未找到“assert_equal”Python

> ID：13075876
> 
> 赞同：0
> 
> 时间：2012-10-25T19:33:03.290
> 
> 标签：python

从事“Learn Python the Hard Way”练习 47，我有以下项目框架。

```
ex47 
    bin/
    docs/
    ex47/
        __init__.py
    tests/
        __init__.py
        game_tests.py
    game.py
    setup.py 
```

在 Aptana 工作室工作。在 game_tests.py 我有

```
from nose.tools import *
from game import Room

def test_room():
    gold = Room("GoldRoom", 
                """This room has gold in it you can grab. There's a
                door to the north.""")
    assert_equal(gold.name, "GoldRoom")
    assert_equal(gold.paths, {})

def test_room_paths():
    center = Room("Center", "Test room in the center.")
    north = Room("North", "Test room in the north.")
    south = Room("South", "Test room in the south.")
    center.add_paths({'north': north, 'south': south})
    assert_equal(center.go('north'), north)
    assert_equal(center.go('south'), south)

def test_map():
    start = Room("Start", "You can go west and down a hole.")
    west = Room("Trees", "There are trees here, you can go east.")
    down = Room("Dungeon", "It's dark down here, you can go up.")
    start.add_paths({'west': west, 'down': down})
    west.add_paths({'east': start})
    down.add_paths({'up': start})
    assert_equal(start.go('west'), west)
    assert_equal(start.go('west').go('east'), start)
    assert_equal(start.go('down').go('up'), start) 
```

但是 Aptana 不能定义“assert_equal”。我相信`assert_equal`是一个内置功能。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:35:13.327

`assert_equal`在 中`nose.tools`，但它不在 中，`__all__`也没有使用 * 导入。尝试 `from nose.tools import assert_equal`

# google-app-engine - 如何为 SDK/Production 全局更改 Google App Engine 中的 Python 日志记录格式？

> ID：13075877
> 
> 赞同：2
> 
> 时间：2012-10-25T19:33:10.013
> 
> 标签：google-app-engine

如何使用开发或生产服务器中的一些全局设置更改 Google App Engine 中的日志记录格式。当前的日志记录格式在某些情况下并没有多大用处，因为不允许定位发出消息的代码。

我想在开发服务器中更改此格式，从以下位置显示**init** .py 的源位置：

```
DEBUG    2012-10-25 21:09:11,717 __init__.py:135] google, test@example.com 
```

至：

```
DEBUG    2012-10-25 21:09:11,717 parentDirectory/__init__.py:135] google, test@example.com 
```

在生产中，我想将其更改为：

```
DEBUG    2012-10-25 21:09:11,717 google, test@example.com 
```

至：

```
DEBUG    2012-10-25 21:09:11,717 parentDirectory/__init__.py:135] google, test@example.com 
```

请建议一些全局配置加载器 - 如果不可能，我可以在每个脚本中放置，但我认为这会浪费时间 - 如果您知道解决此问题的一些解决方案，请提供帮助。我搜索了很多页面，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T04:16:50.877

如果您使用 webapp2 框架，您可以将“全局”代码添加到 中`appengine_config.py`，这些代码会[自动包含在 中的某些 AppEngine 模块](https://developers.google.com/appengine/docs/python/tools/appengineconfig)中`import`。虽然看起来很老套，但将记录器配置添加到此文件似乎非常合理，因为它也是一个全局设置。

[可以在此 StackOverflow 答案](https://stackoverflow.com/a/3105859/158676)中找到重新配置记录器的代码。基本上，您需要`import logging`, 并侵入 AppEngine 本身预先配置的记录器：

```
logging.getLogger().handlers[0].setFormatter(fr) 
```

# haskell - 如何在 lhs2TeX 中隐藏代码块？

> ID：13075881
> 
> 赞同：9
> 
> 时间：2012-10-25T19:33:19.453
> 
> 标签：haskell, literate-programming

我想用乳胶来记录我的代码，但是在乳胶文档的开头显示所有这些模块和编译器扩展真的很烦人。是否有一些标志我可以传递给 lhs2TeX 以防止它在 pdf 中显示这部分代码，同时仍然让 ghc 看到代码？

这似乎是一个非常基本的功能，但我在手册中找不到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T21:39:51.307

正确的方法确实是使用条件。

简单的选择是从 lhs2TeX 处理中完全排除此类代码：

```
%if False
Everything you want LaTeX not to see. Can be

> code

as well as other stuff.
%endif 
```

在更高级的场景中，您可能希望使用 lhs2TeX 来预处理 LaTeX 的源代码和 Haskell 的代码。在这样的设置中，您可以使用

```
%if style /= newcode
Everything you want LaTeX not to see, as above.
%else
Everything you want LaTeX to see, but not Haskell.
%endif 
```

这是我在实践中如何使用它的一个示例：假设我有一个函数的两个版本；在文档中我不想区分它们，但在 Haskell 代码中，它们应该得到不同的名称。另一方面，示例的第一个版本不完整，所以我有一个省略号，但我*仍然*希望它进行类型检查。所以我可以做到以下几点：

```
%if style /= newcode
%format example1 = example
%format example2 = example
%format DOTS = "\dots "
%else
%format DOTS = "undefined"
%endif

Our first attempt:

> example1 = 42 == DOTS

Now we complete the example:

> example2 = 42 == 6 * 9 
```

您可以在 mode 下处理此文件`--newcode`以提取预处理的 Haskell，并在`--poly`mode 下像往常一样获取 LaTeX。

手册在第 10 节中描述了条件。第 11.1 和 11.4 节提供了条件的使用示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T19:54:32.347

我使用以下样式。

```
%if False

\begin{code}
<code>
\end{code}

%endif 
```

**编辑：**我刚刚找到了 Andres Löh 的[幻灯片](http://www.andres-loeh.de/lhs2TeX-IFIP.pdf)，我可能从那里获得了这种风格。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T19:54:17.823

来自[http://www.haskell.org/haskellwiki/Literate_programming](http://www.haskell.org/haskellwiki/Literate_programming) ...

如果你想隐藏一些代码，你可以定义：

```
\long\def\ignore#1{} 
```

辅助功能可以隐藏如下：

```
\ignore{
\begin{code}
help = putStr "Help me, what is this LiterateProgramming thing??"
\end{code}
} 
```

# javascript - 启动 ASP.NET MVC 4 项目。如果我使用捆绑，是否有必要使用 RequireJS？

> ID：13075886
> 
> 赞同：2
> 
> 时间：2012-10-25T19:33:37.403
> 
> 标签：javascript, asp.net-mvc, requirejs

*   如果 RequireJS 将多个 js 文件合并到一个 main.js 文件中，它本质上是否与 ASP.NET 的脚本捆绑功能相同？
*   *除了*捆绑之外，使用 RequireJS 的唯一好处是能够根据 RequireJS 配置加载某些脚本吗？

我对捆绑和 RequireJS 都很陌生，但是在阅读了一些内容之后，似乎捆绑处理了加载多个 js 文件的多个请求。关于将 RequireJS 与捆绑一起使用，我可能会遗漏任何其他事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:42:11.597

如果你打算使用 MVC 4，我建议你使用 Bundles。

使用捆绑包，您可以定义将在浏览器上呈现的脚本集，具体取决于您是在调试还是在生产环境中。

为了检测您是否处于调试状态，您必须更改 web.config 文件中的以下设置

```
<compilation debug="true"> 
```

*   如果您正在调试，Bundle 引擎会将所有脚本呈现为单独的标签。

*   如果你不调试，Bundle 引擎将只渲染一个标签，并且当前 bundle 引用的所有脚本都将合并到一个单独的 JS 文件中

捆绑包也使用约定来检测应该呈现的脚本文件

### 简单示例

例如，在 JQuery 的情况下

JQuery 脚本文件如下所示：

*   jquery-1.8.2.js

*   jquery-1.8.2.min.js

当你声明你的包时，你这样做：

```
 bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js")); 
```

请注意，您没有指定版本或文件名的*.min*部分，这是因为这些是捆绑引擎在选择正确文件时会考虑的特殊标记

每当您使用指定的路径引用您的包时，包引擎将处理它们，并选择正确的脚本文件，例如：

*   如果调试，会渲染*jquery-1.8.2.js文件*

*   如果不调试，*jquery-1.8.2.min.js*将被渲染

在此示例中，捆绑包名为：`~/bundles/jquery`，您将在页面上引用如下：

```
@Scripts.Render("~/bundles/jquery") 
```

如果捆绑包有更多脚本，则相同的规则适用于所有脚本。

### 复杂的例子

考虑这个捆绑注册

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
            "~/Scripts/jquery.unobtrusive*",
            "~/Scripts/jquery.validate*")); 
```

*   如果调试，这将是呈现的 HTML

    ```
    <script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="/Scripts/jquery.validate.js"></script>
    <script src="/Scripts/jquery.validate.unobtrusive.js"></script> 
    ```

*   如果不调试，这将呈现：

    ```
    <script src="/bundles/jqueryval?v=6Fqs6ZHMM_nFyDgv5mxz89PzsVLAnRNKOhqrK-mI5yU1"></script> 
    ```

    该链接将包含所有合并的脚本文件，从而使页面加载速度更快，因为浏览器只需单击一下即可下载所有脚本

有关详细信息，[请参阅 ASP.NET 4.5 新功能](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097384)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:58:06.143

RequireJS 是合适的，有些人可能会说对于实现 JavaScript 繁重 UI 的项目是必要的。

1.  首先，RequireJS 的工作方式与 Asp.net MVC 捆绑不同。默认情况下，脚本会继续单独加载。通过捆绑，您可以控制脚本在 MVC 中的组合方式。使用 RequireJS，您可以编写每个单独的代码模块，使其可以声明为另一个模块中的依赖项，也可以声明它自己的依赖项。本质上，您最终会在 JS 中处理所有 JS 结构。
2.  RequireJS 提供的不仅仅是捆绑机制。如果您使用 JavaScript 构建 UI，那么使用 RequireJS 会更好。如果您只需要几个 jQuery 小部件，Asp.net MVC 捆绑将是最简单的设置。

多个请求并不总是一件坏事。最重要的是，您选择的解决方案会随着项目的增长而扩展。

# html - png 显示背景而不是背景图像

> ID：13075889
> 
> 赞同：2
> 
> 时间：2012-10-25T19:33:42.343
> 
> 标签：html, css, image, background, png

我有多个图层，我无法让它们正确工作。

我网站的主要背景是黑色#000000。

然后我有一个带有背景图像的 div，它很好地位于我的黑色背景上。

现在我想在上面提到的图像上覆盖我的徽标，这是一个具有透明背景的 PNG 图像文件。

我认为这很容易，但我得到的结果是我的徽标在图像周围有一个黑框。

为什么透明度下降两层到我的背景*颜色*而不是下降一层到我的背景*图像*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T08:30:42.530

尝试使用 z-index:n 其中 n 为 0,1,2,-1

# java - 使用编译的 java 代码修改 Buildbot 退出代码

> ID：13075890
> 
> 赞同：0
> 
> 时间：2012-10-25T19:33:47.793
> 
> 标签：java, ant, continuous-integration, buildbot

我最近开始研究持续集成系统，并开始学习如何使用 Buildbot。

我有一个在每次提交时运行的 buildslave，我想在构建完成后添加一个新步骤来解析某些数据文件，并根据结果触发构建通过/失败。

```
buildSteps.addStep(shell.ShellCommand( description=["File Parser"], workdir=dataDirectory, command=["call", "ant", "ParseTest"] ) ) 
```

在该步骤结束时，输出类似于：

```
 [java] Java Result: 1

    BUILD SUCCESSFUL
    Total time: 38 seconds
    program finished with exit code 0 
```

在 java 代码中，我使用 System.exit(1) 表示失败，使用 System.exit(0) 表示成功。

所以我的问题是，如何将实际退出代码更改为非零值，以便 Buildbot 将其识别为失败的构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:56:57.010

我不知道 buildbot，但[ant java 任务](http://ant.apache.org/manual/Tasks/java.html)的 failonerror 属性默认设置为 false。
因此，如果 java 以非 0 的返回码退出，要获得 BUILD FAILED，您必须将
java 任务的 failonerror 属性设置为 true。

# php - PHP If 切换为具有未知的多维数组

> ID：13075891
> 
> 赞同：0
> 
> 时间：2012-10-25T19:33:54.550
> 
> 标签：php, multidimensional-array, arrayiterator

只是好奇是否有办法在`If`开关中做到这一点

```
$account = array (
'{unkown value}' => 
    array (
      'accountID' => '4430290',
      'accountStatus' => '1',
      'parentAccountID' => '',
      'offerID' => '746',
      'billingModel' => '2.0',
    ),
);

if(array_pop($account)['billingModel'] == 'SomeValue') {
    // do stuff
} 
```

我目前正在这样做，但认为可能有更好的方法

```
 $model = array_pop($accountInfo);
        if ($model['billingModel'] == 'someValue') return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:59:41.720

较新版本的 php 允许您像这样链接表达式。例子：

php 5.3：[http ://codepad.viper-7.com/4zgSxW](http://codepad.viper-7.com/4zgSxW)

php 5.4：[http ://codepad.viper-7.com/oGtKqc](http://codepad.viper-7.com/oGtKqc)

两者都使用相同的代码：

```
<?php
$array = array(range(1,5), range(6,10), range(11, 15));

if(array_shift($array)[0] == 1){
    echo "hello";   
} 
```

5.3 显示了一个解析错误。5.4 显示了预期的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:44:32.490

如果您只想在子数组元素具有某个值的情况下做某事，那么您实际上必须查看 array_search()

[http://php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)

# html - 如何在父容器框中使用 css3 进行模糊处理？

> ID：13075892
> 
> 赞同：2
> 
> 时间：2012-10-25T19:33:55.547
> 
> 标签：html, css

css3 模糊效果会忽略父容器尺寸并溢出。我需要一些可以与**css3**产生内在模糊的东西。这可能吗？有什么诀窍吗？

html

```
<div class="box">
      <div class="blur">
           <img src="..." />
      </div>
</div>​ 
```

css

```
.box{
    width: 300px;
    height: 300px;
    border: 1px solid red;
}

.blur{
    -webkit-filter: blur(20px);
} 
```

模糊溢出**示例**：

[http://jsfiddle.net/ngJer/](http://jsfiddle.net/ngJEr/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:39:25.703

```
.box{
width: 300px;
height: 300px;
border: 1px solid red;
overflow:hidden;
}

.blur{
-webkit-filter: blur(20px);
} 
```

[http://jsfiddle.net/calder12/ngJEr/8/](http://jsfiddle.net/calder12/ngJEr/8/)

# jquery - 一次显示隐藏 5 个 div

> ID：13075893
> 
> 赞同：1
> 
> 时间：2012-10-25T19:33:58.750
> 
> 标签：jquery, html, toggle

我不久前找到了这段代码，不幸的是我找不到原作者是谁（不管是谁，谢谢）......

[http://jsbin.com/amituh/11/](http://jsbin.com/amituh/11/)

这太棒了，但我怎样才能做到这一点，所以还有另一个按钮可以少显示 3 个 div（但总是至少显示 3 个 div）。如何让它显示所有的div？

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:45:33.593

快速说明一下，如果您使用的是 Chrome（Firefox 也这样做，我只是不太熟悉），您可以右键单击并检查元素，以查看页面的源代码，并且资源选项卡提供您也可以访问任何外部脚本。学习新技术真的很方便！

无论如何，关于你的问题，

要删除三行，有几种方法。这是我会采取的路线，但请记住，还有其他方法，可能甚至更好。

您作为示例提供的脚本以所有已创建的行开头，只是隐藏了。您可以在 jQuery 中使用 append/remove 来获得相同的效果而没有限制。

这是我为它编写的函数，它们可以包含在头部的脚本标签中：

```
window.linecount = 0;
function add3lines()
{
     $('body').append("<div id='line"+window.linecount+"'>A Line Of Text</div><br />");
     window.linecount = window.linecount+1;
     $('body').append("<div id='line"+window.linecount+"'>A Line Of Text</div><br />");
     window.linecount = window.linecount+1;
     $('body').append("<div id='line"+window.linecount+"'>A Line Of Text</div><br />");
     window.linecount = window.linecount+1;
}

function remove3lines()
{
     $(body).remove('#line'+window.linecount);
     window.linecount = window.linecount-1;
     $(body).remove('#line'+window.linecount);
     window.linecount = window.linecount-1;
     $(body).remove('#line'+window.linecount);
     window.linecount = window.linecount-1;
} 
```

然后，您可以通过单击按钮或链接调用所需的功能，如下所示：

```
<button onclick='add3lines()'>Add 3 Lines</button>
<button onclick='remove3lines()'>Remove 3 Lines</button> 
```

# javascript - 页面刷新后保持从数组中隐藏的 div 选择

> ID：13075895
> 
> 赞同：0
> 
> 时间：2012-10-25T19:34:15.370
> 
> 标签：javascript, jquery, html, refresh, hidden

我创建了一个 div id 数组，以便页面的用户可以在选择要显示的一个 div 或所有这些 div 之间切换。我的脚本如下所示：

```
<script type="text/javascript">
function switchdivs(theid){
var thearray= new Array("div1", "div2", "div3");
for(i=0; i<thearray.length; i++){
  if(thearray[i] == theid || theid == "all"){
        document.getElementById(thearray[i]).style.display="block";

  }else{
document.getElementById(thearray[i]).style.display="none";
  }
}
}
</script> 
```

我希望在页面刷新后保留用户的选择。我已经阅读了一些示例，例如[页面重新加载时 Jquery 显示/隐藏重置，](https://stackoverflow.com/questions/5642564/jquery-show-hide-resetting-when-page-reloads)这有助于我的理解，但我仍然无法让它与我的数组一起使用。我是否需要为每个单独的 id 设置规则，或者是否有使用数组的更优雅的解决方案？我已经尝试过这样的事情，但正如你可能从我糟糕的脚本中看出的那样，我对 javascript 很陌生，而且很迷茫：

```
$(document).ready(function() {

if (sessionStorage['divselection']) {
if (sessionStorage['divselection'] === 'theid')
    $("#theid").show();
else
    $("#thearray[i]").hide();
}  

$("input[name='theid']").change(function() {
if( $("input[name='thearray[i]']:checked").val() == "theid")
{
    $("#thearray[i]").hide();
    $("#theid").show();
    sessionStorage['divselection'] = 'theid';
}
}); 
```

感谢您为我指明正确方向提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:46:02.267

CSS 类名的全部意义在于您可以将它们应用于元素**组**。因此，不要跟踪单个 ID，而是使用类。

此外，不再隐藏和显示元素，而是再次使用类名，但将类名与实际样式相关联。如：

```
.hideMe {
    display:none
} 
```

...然后您可以添加/删除为您完成所有隐藏/显示的类名。

# regex - 正则表达式歧义

> ID：13075898
> 
> 赞同：5
> 
> 时间：2012-10-25T19:34:37.980
> 
> 标签：regex

关于正则表达式机制的基本问题：

我有以下表达式：`[10]*1[10]*`.

这会匹配`100`吗？

我的推理：
第一个选项：`[10]*`匹配“100”，然后到达字符串的末尾=> 不匹配。
第二个选项：`[10]*`被忽略并且表达式匹配。

我是否忘记了一些琐碎的事情，或者这实际上取决于正则表达式引擎？
（我记得一些关于贪婪与不贪婪的事情，但我不确定这是否适用于这种情况）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:38:09.733

正则表达式引擎进行回溯。

引擎尝试与 匹配`100`，`[10]*`但这不起作用，因为那时`1`没有可匹配的。但随后引擎会丢弃重复的最后一个字符（仅使用`[10]*`for `10`）并再次尝试。还是不行，因为`1`不匹配`0`。引擎将一次丢弃一个字符，直到第一个`[10*]`完全丢弃。现在`1`匹配并且`[10]*`很高兴匹配其余的。

我建议通读本[教程](http://www.regular-expressions.info/tutorial.html)，因为它很好地解释了**幕后**发生的事情。（对于您的特殊问题，请查看重复部分）。

更多细节：

这不取决于重复是贪婪还是不贪婪。正则表达式引擎将始终回溯。`[10]`如果你让它像这样不贪婪，它将只是从另一端开始（出现 0 次） `[10]*?`：在这种情况下，这将加快进程，因为第一次尝试已经匹配，但它不会改变它总是匹配的事实。

事实上，您可以通过使重复“占有”来手动防止引擎回溯。如果您这样做，并且首先离开重复，那么引擎将不会尝试其他可能的重复。这将是语法：`[10]*+`. 现在引擎将`100`只匹配第一部分。然后匹配`1`会失败，但是由于您使重复所有格，它不会回去尝试使用不同的选项`[10]*`。在这种情况下，这当然是无用的，但在某些用例中，这种行为是可取的。所有这些也包含在链接的教程中。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:37:36.623

答案是，是的，它匹配，因为正则表达式解析器将从每个子表达式中消耗尽可能多的内容，以实现对整个表达式的匹配。

在你的情况下，匹配它会这样做：

*   第一个`[10]*`将消耗零个字符
*   那么它将匹配文字`1`
*   然后最后一个`[10]*`将消耗剩余的输入

最后，与其在这里问，不如在[regexpal](http://regexpal.com/)上尝试一下，自己看看！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:39:57.303

这很容易测试。这是一个小 php 脚本：

```
<?php
if (preg_match('/[10]*1[10]*/', '100')) {
    echo "It matches.\n";
} else {
    echo "It doesn't match.\n";
}
?> 
```

输出是：

```
It matches. 
```

解释：经过一些正则表达式引擎的试验和回溯，最终结果是第一个`[10]*`不匹配。`1`匹配文本`1`，第二个匹配`[10]*`文本`00`。

# java - 在类路径中使用 .jar 中的类

> ID：13075906
> 
> 赞同：2
> 
> 时间：2012-10-25T19:35:17.527
> 
> 标签：java, jar, cmd, swt, classpath

当我尝试使用某个类时，例如 Layout，在*`swt.jar`*cmd 中它抱怨我没有它，这是消息错误：

> 线程“主”java.lang.NoClassDefFoundError 中的异常：org/eclipse/swt/widgets/Layout

奇怪的是，*`swt.jar`*在`\ext`目录中，我的 CLASSPATH 是`C:\Program Files\Java\jdk1.6.0_26\jre\lib\ext`

当我在 Eclipse 中创建一个新项目时没有问题，从这个 jar 中导入的所有内容都可以正常工作，但是在 cmd 上我收到了这个错误。

请帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:38:21.430

您正在学习一个艰难的教训：IDE（包括 Eclipse）和 Java EE 应用程序服务器（如 Tomcat）不注意任何环境变量（如 CLASSPATH）。

我认为像 swt.jar 这样的 JAR 不属于 jre/lib/ext 目录。这应该只适用于 Oracle 的 JVM 扩展。

您应该将它与所有其他 3rd 方 JAR 一起添加到您的项目 /lib 目录中，并在 Eclipse 和启动脚本中正确设置 CLASSPATH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:36:29.993

您需要将类路径设置为`Jar File`, 才能使用该类下的类`Jar File`

```
C:\Program Files\Java\jdk1.6.0_26\jre\lib\ext\swt.jar 
```

只是一个建议： - 不要将您的 Jar 文件放在`ext`目录中。把它放在别的地方。

就`Eclipse`目前而言，它不使用`System Classpath`环境变量中的集合。在 Eclipse 中使用时，您应该将其`Jar File`放在项目下的目录中，并将其添加到您的 BuildPath。`lib``Jar File`

# php - 通过在 php 中选择第一个下拉值来填充第二个下拉列表

> ID：13075908
> 
> 赞同：0
> 
> 时间：2012-10-25T19:35:24.340
> 
> 标签：php, javascript, mysql

> 我被宣布为两个选择。一旦我在第一次选择中选择值，那么我将在第二次选择中获取值。

```
<?php
$result1 = mysql_query("SELECT row1 FROM information");?>
<select id='select1'>
<?php
while($row=mysql_fetch_array($result1))
{
if($row['row1']!=NULL)
{
echo "<option value='$row[row1]'>$row[row1]</option>";
}
}?>
</select><br/><br/>
<?php
//*******************************************  
$result1 = mysql_query("SELECT column1 FROM information");
echo "<select id='select2'>";
while($row=mysql_fetch_array($result1))
{
if($row['column1']!=NULL)
{
echo "<option value='$row[column1]'>$row[column1]</option>";
}
}?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:41:04.300

你有两种可能：

1.  使用 jQuery + ajax 在第一个（onselect 事件）之后动态构建第二个选择
2.  提交表单或将用户重定向到具有第一次选择的选定值的同一页面，如果给出（从 $_GET 或 $_POST 签入 PHP），如果是 - 使用此信息生成第二个选择

# oracle - Oracle CATSEARCH 不处理特殊字符

> ID：13075910
> 
> 赞同：1
> 
> 时间：2012-10-25T19:35:33.223
> 
> 标签：oracle, full-text-search

我创建了一个 Oracle Text 索引，如下所示：

```
create index my_idx on my_table (text) indextype is 
    ctxsys.ctxcat parameters('index set my_table_iset'); 
```

现在，当我运行查询时：

```
DECLARE
  cnt  NUMBER;
  attr VARCHAR2(256);
BEGIN
  attr := 'BECKMANNS';
  SELECT COUNT(text)
  INTO cnt
  FROM my_table
  WHERE catsearch(text, attr, '') > 0 ;
  dbms_output.put_line( '->' || cnt);
END; 
```

这行得通。但是当我改变

```
attr := '"BECKMANNS"' 
```

我收到一个错误：

```
ORA-29902: error in executing ODCIIndexStart() routine
ORA-20000: Oracle Text error:
DRG-50943: query token too long on line 1 on column 1 
```

我在 Oracle 文档中发现我可以将特殊字符括在括号中

```
attr := '{' || '"BECKMANNS"' || '}' 
```

但这仍然给出了同样的错误。我尝试了这种变化，但无济于事。

有任何想法吗？

# ios - ios 自定义地图、地理定位、地图绘制等

> ID：13075911
> 
> 赞同：2
> 
> 时间：2012-10-25T19:35:33.613
> 
> 标签：ios, geolocation, maps

下一张图片来自 www.Trimaps.com

![将 Google 地图中的某个区域映射到自定义图像](../Images/d758cba3346d9c8800a542690ed4f0c9.png)

（我希望这里允许使用图片，如果没有，请告诉我，我会立即删除它）。

这些图像完美地解释了我想要完成的事情。

我拥有所有需要的数据：

1.  所需区域的 4 个角的纬度/经度（十进制值）（来自 Google 地图）。

2.  一个美丽的山的自定义图像（类似于右图）。

我需要的只是数学。我已经尝试了所有的公式，缩放/转换，你说的。

我确信这是可能的，因为它取决于纯数学，相对简单的数学方程。

www.Trimaps.com 目前希望使用他们的代码获得 300 美元。恕我直言，这对我来说有点贵......

有谁知道开源或自己实现了这一点？

更新：顺便说一句，我不是要求复制和粘贴代码。我知道如何编码。

我在问程序，背后的逻辑，公式。

任何形式的帮助将不胜感激:)

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:54:18.897

这也取决于您可以承受的复杂性。例如，将大地图图像拆分为小图块并按需加载它们会更好。

无论如何，您都可以使用 UIScrollView，无论是否使用瓷砖。我将缺少一个单一的大图像解决方案（不确定使用这样的大图像是否可以）。你需要选择度数公里比计算公式，你可以在维基百科找到很多：[纬度](http://en.wikipedia.org/wiki/Latitude)或搜索`km per degree latitude`或类似这样。当您知道一度纬度和一度经度中有多少公里时，您可以使用此信息以及滚动视图的缩放级别。所以现在你需要根据scrollView的缩放级别得到一个点有多少公里。只要您知道地理矩形坐标、scrollView 的框架和scrollView 的内容状态，您就可以轻松获得比率。

使用所有这些信息，您可以将位置坐标转换为视点，反之亦然。所以你甚至可以放一个定位销或其他东西。

还要检查这个： http: [//mapbox.com/mobile/](http://mapbox.com/mobile/)和这个[答案](https://stackoverflow.com/q/2709786/1032151)。

**更新：** 起初，伙计，看到我的回答不被接受真的很不愉快，但无论如何，我会添加一些信息。下次我就不打扰了。检查 UIScrollView 的[contentOffset 和 contentSize](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)属性。这意味着您可以使用`contentSize`和的组合自行管理缩放级别`contentView's frame`。我的意思是您可以调整例如 UIImageView 的大小并使用 UIScrollView 的 contentOffset 定位它的可见框架。

# deployment - 正确删除 Seaside 中的开发工具栏

> ID：13075919
> 
> 赞同：5
> 
> 时间：2012-10-25T19:36:11.697
> 
> 标签：deployment, smalltalk, pharo, seaside

我在 Pharo 1.3 和 Pharo 1.4 上使用 Seaside 3.0.7。为了禁用我的 Seaside 应用程序底部的开发工具栏，我确实执行[了，正如 Seaside Book 所说](http://book.seaside.st/book/advanced/deployment/deployment-preparing)：

```
WAAdmin applicationDefaults
    removeParent: WADevelopmentConfiguration instance 
```

确实如其所说——**但只有大约一半的注册申请注意到他们的父母已经离开了**。

另一半仍然显示工具栏，这些应用程序的配置网站仍然显示：

> 根装饰类：WAToolDecoration [继承]

只有在我单击一次配置（根装饰类）后，下一个屏幕才会显示

> 可用：WAToolDecoration，当前：（空）

所以我只点击OK，工具栏终于消失了。

谁能帮我这个？

**更新：**

正如 Paul DeBruicker 在邮件列表中暗示的那样，这可能是与 Seaside 3.0.4 中引入的缓存相关的错误。我在 bugtracker 中打开了一个[问题](http://code.google.com/p/seaside/issues/detail?id=746)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:04:59.480

目前存在某种缓存问题。Paul DeBruicker 提供了一种解决方法：

> 如果您不关心访问其他应用程序，您可以运行以下命令：
> 
> WADispatcher 默认处理程序执行以下操作： [ :each | WADispatcher 默认注销：每个]。
> 
> 这将删除映像中安装的所有应用程序，然后您可以重新初始化自己的应用程序，这样您就只有您感兴趣的应用程序需要修复。
> 
> 学习如何在不取消注册所有内容的情况下删除工具栏会很好，但这在短期内可能会有所帮助。

此后，您可以初始化您关心的应用程序。

# javascript - 通过 jQuery 为未来创建的元素添加 CSS 规则

> ID：13075920
> 
> 赞同：60
> 
> 时间：2012-10-25T19:36:12.087
> 
> 标签：javascript, jquery, css

我有一个有点不寻常的问题。我做过很多次这样的事情：

```
$('#selector').css('color','#00f'); 
```

我的问题是我创建了一个`<div id="selector">`，我调用了上面的命令，它工作正常。

现在，在稍后的另一个事件中，我从[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)中删除了该元素，并在稍后使用相同的 id 再次添加它。这个元素现在没有`color:#00f`.

有没有办法可以在 CSS 中添加规则，这样它会影响将来使用相同`id`/创建的项目`class`？我喜欢[jQuery](http://en.wikipedia.org/wiki/JQuery)，但任何使用纯 JavaScript 的东西都可以。

它必须是动态的，而且我不知道要放入 CSS 文件中的类。此外，我计划在整个应用过程中多次更改单个属性。例如，设置`color`to `black`、 to `blue`、 to`red`和 back to `black`。

* * *

我接受了**@lucassp**的回答，这就是我最终得到的结果：

```
function toggleIcon(elem, classname)
{
    if($(elem).attr('src')=='img/checkbox_checked.gif')
    {
        $(elem).attr('src', 'img/checkbox_unchecked.gif')
        //$('.'+classname).hide();//this was the old line that I removed
        $('html > head').append($('<style>.'+classname+' { display:none; }</style>'));
    }
    else
    {
        $(elem).attr('src', 'img/checkbox_checked.gif')
        //$('.'+classname).show();//this was the old line that I removed
        $('html > head').append($('<style>.'+classname+' { display:block; }</style>'));
    }
} 
```

我还想说**@Nelson**可能是最“正确的”，尽管它需要更多的工作才能进入始终运行良好的应用程序代码，而这不是我目前想要花费的精力。

如果将来我必须重写这个（或写类似的东西），我会研究`detach()`.

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-10-25T19:39:07.967

这应该有效：

```
var style = $('<style>.class { background-color: blue; }</style>');
$('html > head').append(style); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-25T19:38:19.657

当您计划从 DOM 中删除元素以稍后重新插入它们时，请使用[**.detach()**](http://api.jquery.com/detach/)而不是`.remove()`.

Using`.detach()`将在稍后重新插入时保留您的 CSS。从文档中：

> .detach() 方法与 .remove() 方法相同，不同之处在于 .detach() 保留与已删除元素关联的所有 jQuery 数据。当移除的元素稍后要重新插入到 DOM 中时，此方法很有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-25T19:43:00.243

这是我之前编写的一些 JavaScript 代码，用于添加、删除和编辑 CSS：

```
function CSS(sheet) {

    if (sheet.constructor.name === 'CSSStyleSheet' )
        this.sheet = sheet;
    else if (sheet.constructor.name === 'HTMLStyleElement')
        this.sheet = sheet.sheet;
    else
        throw new TypeError(sheet + ' is not a StyleSheet');
}

CSS.prototype = {
    constructor: CSS,
    add: function( cssText ) {
        return this.sheet.insertRule(cssText, this.sheet.cssRules.length);
    },
    del: function(index) {
        return this.sheet.deleteRule(index);
    },
    edit: function( index, cssText) {
        var i;
        if( index < 0 )
            index = 0;
        if( index >= this.sheet.cssRules.length )
            return this.add(cssText);
        i = this.sheet.insertRule(cssText, index);
        if (i === index)
            this.sheet.deleteRule(i + 1);
        return i;
    }
}; 
```

然后如果需要一个新的样式表，构造为

```
var myCss = new CSS(document.head.appendChild( document.createElement('style'))); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-12-15T15:26:06.847

如果此样式部分假设多次更改，您可以在 html 文件中设置带有 id 的样式标记：

```
<style id="myStyleTag">
</style> 
```

然后您可以使用 js 引用它，编辑或删除以下内容：

```
var style = $('#myStyleTag');
styl.html('.class { background-color: blue; }'); 
```

这样，如果您多次更改样式部分，它不会变大，因为您不只是将其附加到头部，而是根据需要对其进行编辑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T19:38:30.120

您可以使用[livequery 插件](http://docs.jquery.com/Plugins/livequery)。

```
$('#selector').livequery(function() { $(this).css('color', '#00f'); }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T19:37:34.273

最好的选择是添加一个类：

```
.selected {
    color : #00f ;
}

$('#elemId').addClass('selected') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-19T20:26:45.533

接受的答案没有错。但是，如果您只想在一行中执行此操作，则可以执行以下操作：

```
$('<style>').append('.'+classname+'{display:none}').appendTo('head') 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-24T15:06:22.570

这是一个老问题，有一个选择的答案，但添加动态 CSS 来实现目标并不是必需的，并且可能会将人们引向错误的方向。

如果您想使用 jQuery 在元素上动态设置样式，最好使用`.addClass()`和`.removeClass()`与影响所需样式的类一起使用。

鉴于问题中的功能：

```
function toggleIcon(elem, classname)
    {
      if($(elem).attr('src')=='img/checkbox_checked.gif')
    {
        $(elem).attr('src', 'img/checkbox_unchecked.gif');
        $("." + classname).addClass("hidden");
    }
    else
    {
        $(elem).attr('src', 'img/checkbox_checked.gif');
        $("." + classname).removeClass("hidden");
    }
} 
```

然后只需将其添加到您的 CSS 中：

```
.hidden {display: none;} 
```

这也可以改变颜色，正如问题中所提到的：

```
.checkbox-red {color: red;}
.checkbox-blue {color: blue;} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-25T19:38:36.690

在 CSS 文件中创建 CSS 规则

```
.yourclass{
    color: #00f;
} 
```

`yourclass`在创建元素时添加：

```
$("#selector").addClass("yourclass"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-25T19:40:06.810

只需使用一个类，例如：

CSS：

```
.setcolor { color: #fff; } 
```

JavaScript：

```
$('#selector').addClass('setcolor'); 
```

然后在需要时将其删除：

```
$('#selector').removeClass('setcolor'); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-17T12:03:12.523

如果您的文档中已经有样式元素，则可以使用 vanilla js 添加另一个规则：

```
document.styleSheets[0].addRule('#selector', 'color: #00f'); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-04-12T07:33:06.550

尝试这个

```
var style = $('<style>.class { background-color: blue !important; }</style>');
$('html > head').append(style); 
```

# python - 制作 "string".functions() 函数 python

> ID：13075925
> 
> 赞同：4
> 
> 时间：2012-10-25T19:36:57.153
> 
> 标签：python, function, python-2.7

> **可能重复：**
> [我可以将自定义方法/属性添加到内置 Python 类型吗？](https://stackoverflow.com/questions/4698493/can-i-add-custom-methods-attributes-to-built-in-python-types)

在使用 Python 的过程中，我看到了许多可以在字符串上使用的东西，例如`.lower()`or`.startswith()`或`.endswith()`，但是，我不确定如何制作与其相似的函数，因为我认为必须使用一个传递字符串的类到函数，我只是想做一些类似的事情，`"the string".myfunc()`而不是`MyClassObjWithString.myfunc()`.

有没有办法制作这样的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T19:41:30.570

在 python 中，字符串文字总是类型`basestring`（或`str`在 py3k 中）。因此，您不能向字符串文字添加方法。您可以创建一个在构造函数中接受字符串并具有可能有用的方法的类：

```
MyClass("the string").myfunc() 
```

当然，那么可能会争辩说您应该编写一个函数：

```
myfunc("the string") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:41:13.007

你不能写一个你可以做的函数

```
"the string".myfunc() 
```

因为这意味着修改字符串类。但是为什么不写一个你可以做的方法

```
myfunc("the string") 
```

就像是

```
def myfunc(s):
   return s * 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:42:38.903

这些是方法，虽然您可以在定义（某些）类之后添加或替换方法 - 这种做法称为猴子补丁 - 强烈建议不要使用内置类并且不可能使用内置类。

只需使用一个功能。

# python - 在 Python 中查找两个表/图之间的相关性

> ID：13075926
> 
> 赞同：3
> 
> 时间：2012-10-25T19:37:05.323
> 
> 标签：python, graph

假设我有两个数据表，每个表都给出了一个时间点的值。每个表中给出的时间和值不一定是固定的。

我想找出这两个图表的匹配程度。我还想看看是否有变化（在这种情况下是及时的）我可以应用到其中一个图表上，这将使这两个图表更加相关。

一种方法可能是计算每个图之间的积分并找出差异。然后，继续应用轻微的时间偏移，直到确定最佳相关的时间偏移。虽然这对我来说似乎有点麻烦。

有谁知道是否有更好的方法可以做到这一点，或者是否有任何图书馆可以帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:40:42.227

听起来你想做一个互相关。如果你对时间序列数据做任何事情，我会推荐使用很棒的 Pandas 包。这是您的具体问题的链接：

[如何使用 Pandas 获得两个时间序列之间的相关性](https://stackoverflow.com/questions/6467832/how-to-get-the-correlation-between-two-timeseries-using-pandas)

# html - 为什么 WebKit 不能正确重绘此文本？

> ID：13075928
> 
> 赞同：2
> 
> 时间：2012-10-25T19:37:19.637
> 
> 标签：html, css, webkit

WebKit 渲染器有一个非常具体的问题。当文本节点的下降或上升超出文本节点的选择框，并且该文本节点更改位置时，WebKit 不会重新绘制正确的区域。

[我用 Open Sans 做了一个例子。](http://jsfiddle.net/p4Ezr/8/)

在 Windows 7 上的 Chrome`J`中，动画中的下降器会被切断。我可以通过在文本节点上添加一个边距来修复它，但这有点麻烦，而且它与布局有关。有人在其他浏览器中看到这个吗？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:05:14.493

`padding-left: 5px;`我在规则上投了一个`#container p`，J在盒子外面。

希望有帮助。

*编辑我错过了阅读，不确定填充物是否也会影响您的布局，我认为是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:12:12.323

这看起来像 Webkit 中的一个错误。您需要让 Webkit 知道在其边界框之外有绘制的像素，您可以通过多种方式做到这一点，但这里有两个我通过一些快速测试发现的：

```
#expand {
    height: 0px;
    box-shadow: 0 0 0 5px rgba(0,0,0,0);
}

#expand {
    height: 0px;
    outline: solid transparent 5px;
} 
```

我猜`outline`有更好的性能。

如果你添加它，它似乎也可以`#expand`工作`p`。Chrome 中有一些标志，您可以启用这些标志来查看重绘区域的工作方式，但我现在没有方便使用。

# javascript - 动态脚本加载——安全吗？

> ID：13075929
> 
> 赞同：1
> 
> 时间：2012-10-25T19:37:21.430
> 
> 标签：javascript, loading

```
function LoadFoo(selected_foo) {
var foobar = selected_foo.bar;
var head = document.getElementsByTagName('head')[0];
var nextfoo = document.createElement('script');
nextfoo.type= 'text/javascript';
nextfoo.src="foobaz.php?form=foo" + ... + "&foobar=" + foobar; // a php script which reads from MYSQL and generates script that updates selectboxes of the document
head.appendChild(nextfoo) } 
```

在 Chrome 版本 23.0.1271.26、FF 16、IE 9 上测试，到目前为止没有问题。但是我有点担心，因为我之前从来没有做过 JS，也没有在 IE6~8 上测试过。`nextfoo`另外，由于每次执行都会创建更多对象，这不会有问题吗？我尝试了appeding `head.removeChild(nextfoo);`，并放弃了它，因为它`nextfoo`无法在IE9上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:00:18.603

您当前的代码创建了新的脚本标签，它不太理想，但它不会真正引起任何问题（除了可能有数百个脚本标签添加到您的页面。将其更改为使用 xmlhttp 或类似的东西会更好。阅读您的评论我猜你有点坚持你所拥有的？

如果您只是对 .src 属性有问题，您可以尝试使用 setAttribute 进行设置。

```
function LoadFoo(selected_foo) {
var foobar = selected_foo.bar;
var head = document.getElementsByTagName('head')[0];
var nextfoo = document.createElement('script');
nextfoo.setAttribute("type", "text/javascript");
nextfoo.setAttribute("src", "foobaz.php?form=foo" + ... + "&foobar=" + foobar);
head.appendChild(nextfoo) } 
```

我不确定您将使用 removeChild() 位去哪里，如果您尝试在完成后删除刚刚加载的那个，则无法将其添加到此函数中。（它可能会在加载之前删除元素）

您可以删除旧的 foo（通过添加 ID 或其他东西来区分每个脚本标签），但如果您快速加载大量它们，您可能会面临删除未加载的相同问题。

# css - 我想垂直翻转一个div，但不是它里面的内容

> ID：13075930
> 
> 赞同：0
> 
> 时间：2012-10-25T19:37:30.400
> 
> 标签：css

我正在使用 -webkit-transform 垂直翻转 div，但问题是 div 内的文本也被翻转了......我能做些什么来翻转 div 而不是文本？

这是我的 HTML

```
<div>
    <ul>
        <li>Primer elemento</li>
        <li>Segundo elemento</li>
    </ul>
</div>​ 
```

这是我的 CSS

```
div {
    background: lightblue;
    padding-left: 150px;
    -webkit-transform: scaleX(-1);  
    -moz-transform: scaleX(-1);
} 
```

​ 这是我的 jsfiddle：http: [//jsfiddle.net/uTGXx/](http://jsfiddle.net/uTGXx/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:47:56.290

将文本放在另一个您也翻转的 div 中，如下所示：

```
<div class="flipped">
    <div class="flipped">
    <ul>
        <li>Primer elemento</li>
        <li>Segundo elemento</li>
    </ul>
    </div>
</div>​ 
```

在哪里

```
div.flipped {
    background: lightblue;
    padding-left: 150px;
    -webkit-transform: scaleX(-1);
    -moz-transform: scaleX(-1);
} 
```

​见[http://jsfiddle.net/uTGXx/2/](http://jsfiddle.net/uTGXx/2/)。

# php - Mac 和 Apache：允许 chmod -R g+rx 并且仍然被禁止

> ID：13075936
> 
> 赞同：0
> 
> 时间：2012-10-25T19:37:45.967
> 
> 标签：php, ajax, apache, permissions

我正在尝试使用 Ajax（方法`GET`）发送一些数据来`/root/Site/test/index.php`构建链接，如下所示：

```
/root/Site/test/index.php/section/option/value 
```

但我从服务器收到这条消息：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>403 Forbidden</title>
</head><body>
<h1>Forbidden</h1>
<p>You don't have permission to access /root/Site/test/index.php/section/option/value
on this server.</p>
</body></html>
Forbidden 
```

根据我所阅读的内容，我已经设置了`test`文件夹的权限，甚至设置了`Site`to `sudo chmod -R g+rx`（我也尝试过没有`sudo`），但我仍然收到错误。为什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:44:11.740

通过使用：

```
sudo chmod -R g+rx 
```

您只是授予组的读取和执行权限，并且 apache 服务作为守护程序运行，运行 apache 的用户与文件所有者不同，可能不属于文件的组。

```
sudo chmod 755 filename 
```

使用它，您允许每个人读取文件，并且只允许所有者写入权限。

对于文件夹，使用 -R 执行相同操作以应用于其所有内部文件。

```
sudo chmod -R 755 foldername 
```

** 不要分配权限 777，因为这会使文件容易受到不希望的修改。除非你是 100% 777 是一个安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:59:17.963

还要仔细检查您的 httpd.conf 目录子句中是否有“全部允许”。

```
<Directory "/home/domain/www">
        Options +Indexes FollowSymLinks +ExecCGI
        AllowOverride AuthConfig FileInfo
            Order allow,deny
        Allow from all
</Directory> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:45:15.030

服务器可能正在访问另一个用户下的文件。它是 Debian Linux 安装中的 www-data:www-data。尝试给它 chmod -R 777 或 chmod -R a+rwx 代替。

另一个选项是你没有正确配置 httpd.conf，所以也要检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T21:18:15.313

另一种可能性，因为你的路径是

```
 /root/Site/test/index.php/section/option/value
                 ^^^^^^^^^--- actual php script
                          ^^^^^^^^^^^^^^^^^^^^^-- extra stuff 
```

确保启用 Apache 的`AcceptPathInfo`( [docs](http://httpd.apache.org/docs/2.2/mod/core.html#acceptpathinfo) ) 选项。否则，额外的位将被视为 url 路径的一部分，而不是 PHP 脚本的 path_info 的参数。

# java - 使用 TransferHandler 进行 JTable 拖放

> ID：13075943
> 
> 赞同：1
> 
> 时间：2012-10-25T19:38:14.987
> 
> 标签：java, swing, drag-and-drop, jtable

目前我有两张桌子说`Table-A, Table-B`。我的任务是将行从 Table-A 拖到 Table-B 或将行从 Table-B 拖到自身上。使用`TransferHandler`我已经完成了这个任务。但我的问题是，我无法识别从哪个表行被拖到`Table-B`.. 即，从表 A 到表 B 或从表 B 到自身。在我`exportData`的方法中，`TransferHandler`我向其中一列添加了一些额外的数据。基于此，当我通过`importData`方法导入数据时，我能够使用我添加数据的特定列从哪个表中找出它。我知道这根本不推荐..所以我需要知道是否有解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T04:39:30.280

您可以创建自己的实现，`Transferable`该实现将引用源组件。然后，`TransferHandler.importData()`您可以将其与`TransferSupport.getComponent()`哪个是目标组件进行比较。

例如，这是一个将要传输的字符串的包装器：

```
public class DataWrapper {
    String data;
    Object source;

    public DataWrapper(String data, Object source) {
        super();
        this.source = source;
        this.data = data;
    }

    public String getData() {
        return data;
    }
    public Object getSource() {
        return source;
    }
} 
```

这是一个非常基本的`Transferable`实现。

```
public class DataWrapperTransferable implements Transferable {
    public static DataFlavor FLAVOR = new DataFlavor(DataWrapper.class,
            "DataWrapper");

    private DataFlavor flavors[];
    private DataWrapper dataWrapper;

    public DataWrapperTransferable(String data, Object source) {
        dataWrapper = new DataWrapper(data, source);
        flavors = new DataFlavor[] { FLAVOR };
    }

    @Override
    public Object getTransferData(DataFlavor flavor)
            throws UnsupportedFlavorException, IOException {
        if (flavor.equals(FLAVOR)) {
            return dataWrapper;
        } else {
            throw new UnsupportedFlavorException(flavor);
        }
    }

    @Override
    public DataFlavor[] getTransferDataFlavors() {
        return flavors;
    }

    @Override
    public boolean isDataFlavorSupported(DataFlavor flavor) {
        return flavor.equals(FLAVOR) || flavor.equals(DataFlavor.stringFlavor);
    }
} 
```

然后，在`TransferHandler`：

```
public boolean importData(TransferSupport support) {
    DataWrapper dataWrapper = (DataWrapper) support
            .getTransferable().getTransferData(
                    DataWrapperTransferable.FLAVOR);

    if (dataWrapper.getSource() == support.getComponent()) {
        //the originator and destination are the same 
    } else {
        //drop from another component
    }               

    //rest of the method
} 
```

# ipad - Xcode 更新 Sqlite 记录

> ID：13075944
> 
> 赞同：-1
> 
> 时间：2012-10-25T19:38:16.953
> 
> 标签：ipad, sqlite, sql-update

我在更新我的 sqlite 数据库时遇到问题，所以如果有人能帮助我，我将非常感激。我尝试了所有可能的示例和教程，但没有。在我的 sqlite 表中，我有 9 个属性，但我只需要更新三个。

```
const char *sql = "UPDATE studentNotes SET title = ? , note = ? , existingAudioNote = ? , audioNoteName = ? , audioNoteDuration = ? , existingPdf = ? , pdfFileName = ? WHERE id = ?";

if(sqlite3_open([[AppDelegate getDatabasePath]UTF8String], &database) == SQLITE_OK){

    if (sqlite3_prepare_v2(database, sql, -1, &updateStmt, NULL) != SQLITE_OK){
        NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
    }
    else {

        sqlite3_bind_text(updateStmt, 1, [noteTitle UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(updateStmt, 2, [noteText UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(updateStmt, 3, [noteExistingAudioNote UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(updateStmt, 4, [noteAudioName UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(updateStmt, 5, [audioNoteDuration UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(updateStmt, 6, [existingPdf UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(updateStmt, 7, [pdfFileName UTF8String], -1, SQLITE_TRANSIENT);
        if (SQLITE_DONE != sqlite3_step(updateStmt)){
            NSAssert1(0, @"Error while updating data. '%s'", sqlite3_errmsg(database));
        }

        sqlite3_reset(updateStmt);
    }
}
sqlite3_close(database); 
```

我尝试使用此代码，但是当我从我的类调用此方法到视图时，它不起作用。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:49:59.080

您的`UPDATE`命令有八个参数，但您只设置了前七个。最后一个参数仍然有它的默认值，这意味着被执行的是：

```
UPDATE ... WHERE id = NULL 
```

不匹配任何记录（因为`NULL`不能与 比较`=`）。

# c# - 对单个控件使用多个条件语句并将条件语句放在公共方法中

> ID：13075956
> 
> 赞同：0
> 
> 时间：2012-10-25T19:38:53.960
> 
> 标签：c#

我正在尝试根据个别条件验证多个字段/控件。问题是我有个别标签基于特定控件而不是消息框指示错误；有没有更有效的方法来做到这一点？

**这是代码：**

```
if (txtPhone. Text. Length <= 0) 
{ 
lblPhoneRequired.Visible = true; 
} 
else 
{ 
lblPhoneRequired.Visible = false; 
}

if (txtName. Text. Length <= 0) 
{ 
lblNameRequired. Visible = true; 
} 
else 
{ 
lblNameRequired. Visible = false; 
} 
```

最后，我尝试将其包装成这样的公共方法：

```
public void validation() {
if (txtPhone. Text. Length <= 0)
{ 
lblPhoneRequired.Visible = true; 
} 
else 
{ 
lblPhoneRequired.Visible = false; 
}

if (txtName. Text. Length <= 0) 
{ 
lblNameRequired. Visible = true; 
} 
else 
{ 
lblNameRequired. Visible = false; 
}
} 
```

然后在按钮单击事件中调用该方法，但它不起作用。

```
private void btnSample_Click(object sender, EventArgs e) 
validation(); 
} 
```

这是新领域，所以请容忍我的无知：

盖伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:40:29.637

你可以缩短你的代码：

```
lblPhoneRequired.Visible = (txtPhone.Text.Length == 0); 
lblNameRequired.Visible =  (txtName.Text.Length  == 0); 
```

请注意，这并不比您的方法效率更高或更低，但它不那么冗长并且可能更具可读性。

当然，您也可以使用带有不同错误消息的单个控件：

```
lblError.Visible =   (txtPhone.Text.Length == 0)
                  || (txtName.Text.Length  == 0);
if((txtPhone.Text.Length == 0) && (txtName.Text.Length  == 0))
     lblError.Text = "Enter phone number and name";
else if(txtPhone.Text.Length == 0)
     lblError.Text = "Enter phone number";
else if(txtName.Text.Length == 0)
     lblError.Text = "Enter name";
else
    lblError.Text = String.Empty; 
```

但是您应该查看每个控件所具有的[`Validating`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)事件和属性。[`CausesValidation`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.causesvalidation.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:46:32.410

```
if (txtPhone. Text. Length <= 0)
  lblPhoneRequired.Visible = lblNameRequired. Visible = true; 
else
  lblPhoneRequired.Visible = lblNameRequired. Visible = false; 
```

# dynamics-crm-2011 - 用户执行 RetrieveAttributeRequest 需要哪些权限？

> ID：13075957
> 
> 赞同：4
> 
> 时间：2012-10-25T19:38:56.060
> 
> 标签：dynamics-crm-2011

我有一个将实体导出到另一个系统的插件。目前它以当前用户身份运行，对于某些角色，我收到此错误：

```
SecLib::CheckPrivilege failed. 
User: f64a1945-f91d-e211-a13b-0050569d79dd, 
PrivilegeName: prvReadAttribute, 
PrivilegeId: b8caea5d-f379-4295-aa59-38adeb73e853, 
Required Depth: Basic, BusinessUnitId: 9cc1eec6-2f1d-e211-ac61-005056870017 
```

对于其他人来说，它工作得很好，但我无法确定需要哪些权限......如果这有所作为，选项集是一个全局选项集。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T22:36:07.827

这些情况可能有点棘手，幸运的是错误消息（几乎总是）为您提供所需的信息。

在这种情况下，您缺少“字段”上的读取（在自定义选项卡下）。

我知道这一点是因为，我打开了这篇 MSDN 文章：[Security Role UI to Privilege Mapping](http://msdn.microsoft.com/en-us/library/hh547441.aspx)。

并进行了搜索`prvReadAttribute`。

# ruby-on-rails - Rails 2 应用程序查找 current_user 最后五条推文

> ID：13075958
> 
> 赞同：0
> 
> 时间：2012-10-25T19:38:59.150
> 
> 标签：ruby-on-rails, twitter, tweets

我正在开发 Rails 2 应用程序

我已经安装了 twitter gem

我想要最近五条推文的列表

我不知道如何获取列表，虽然我安装了 twitter gem

请帮我。

**编辑**

我已经创建`twitter.rb`并输入了以下详细信息

```
Twitter.configure do |config|     
   config.consumer_key = ""     
   config.consumer_secret = ""      
   config.oauth_token = ""      
   config.oauth_token_secret = ""       
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:08:17.047

谷歌搜索解决方案并不难找到：

[检索 Twitter 列表时间线的 4 种方法](http://blog.wyeworks.com/2010/2/1/4-ways-to-retrieve-a-twitter-list-timeline/)

# active-directory - thumbnailPhoto 从 Active Directory 到 Google Apps

> ID：13075960
> 
> 赞同：0
> 
> 时间：2012-10-25T19:39:04.080
> 
> 标签：active-directory, google-apps

我已将 Active Directory 中的每个人的照片设置为属性`thumbnailPhoto`。如何将此同步到他们的 Google 个人资料？我目前正在使用 GADS，但找不到执行此操作的任何说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-22T18:25:24.197

这个脚本对我有用。

```
Get-ADUser -Filter * -Properties thumbnailphoto, EmailAddress | where {$_.thumbnailphoto} | foreach {$_.thumbnailphoto | Set-Content -Path "C:\Downloads\ADPicture\Pictures\$($_.EmailAddress).jpg" -Encoding Byte}

C:\gam\gam.exe all users update photo C:\Downloads\ADPicture\Pictures\#user#.jpg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T02:51:47.907

GAM 可以设置头像： [https ://github.com/jay0lee/GAM/wiki/ExamplesEmailSettings#user-profile-photos](https://github.com/jay0lee/GAM/wiki/ExamplesEmailSettings#user-profile-photos)

您需要编写一个脚本，将用户的广告照片提取到文件中，然后通过 GAM 命令将其上传到 Google。

周杰伦

# cgi - XPages - 在 URL 查询字符串中使用与号

> ID：13075965
> 
> 赞同：0
> 
> 时间：2012-10-25T19:39:31.010
> 
> 标签：cgi, query-string, xpages, xpages-ssjs

我有一个 XPage，它以 URL 参数的形式将信息传递给另一个 XPage（由于 SEO，这很重要）。我可以使用：`java.net.URLEncoder.encode`对 URL 进行编码，然后我可以在我的参数值中使用与号，并且我可以使用它`param.get()`来获取值而不解码它们。这很好用，但是当我将它与服务器端替换结合使用时，它不能按预期工作，它将与符号恢复为正常的＆符号而不是 %26。任何想法都会在这里受到赞赏？由于 SEO，服务器端替换也很重要。

**更新：**

这是地址栏中显示的提交之前的 URL（如果我们假设我的类别是水果和蔬菜）：

```
/product-byCategory/Fruit+%26+Vegetables 
```

服务器端替换规则是：

```
- /product-byCategory/*
- /mywebsite.nsf/xspProductByCat.xsp?cat=* 
```

查询字符串值为：

```
cat=Fruit+&+Vegetables 
```

有趣的是，如果我在地址栏中输入这个 URL，我会得到正确的查询字符串：

```
http://www.mywebsite.com/mywebsite.nsf/xspProductByCat.xsp?cat=Fruit+%26+Vegetables 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:36:47.127

我遇到了同样的问题，但我搜索（并找到了）不同的解决方案。我不需要替换，我不使用 QueryString，Google 显然不介意。

我使用这种类型的 URL：

```
http://www.mywebsite.com/mywebsite.nsf/xspProductByCat.xsp/Fruit+%26+Vegetable 
```

而不是QueryString，我通过

```
 var name= facesContext.getExternalContext().getRequestPathInfo(); 
```

以这种方式创建的网站页面被 Google 和 Bing 正确索引。我们对页面排名并不完全满意，但这是一个不同的话题。

这是[网站和](http://www.the-academy.nl)[扩展 URL](http://www.the-academy.nl/TA.nsf/Page.xsp/Training/MS10953--HTML5-Programming)的示例

# css - CSS3 PIE - 在没有尾随反斜杠的情况下访问站点时不加载行为 HTC 文件

> ID：13075967
> 
> 赞同：1
> 
> 时间：2012-10-25T19:39:41.980
> 
> 标签：css, internet-explorer-8, internet-explorer-7, css3pie

当我以两种不同的方式访问使用 CSS3 PIE 的站点时，在一种情况下找不到 HTC 文件。我使用示例域名和路径名来说明以下问题。什么可能导致这种情况发生？

> [http://sampledomain.com/site](http://sampledomain.com/site) <-- 在 IE8 中不呈现圆角
> 
> [http://sampledomain.com/site/](http://sampledomain.com/site/) <-- 呈现圆角

CSS圆角文件位于

> [http://sampledomain.com/site/content/css/pie.htc](http://sampledomain.com/site/content/css/pie.htc)

该网站包含来自的 CSS 文件

> [http://cdn.cdndomain.com/path/to/content/css/rounded-corners.css](http://cdn.cdndomain.com/path/to/content/css/rounded-corners.css)

CSS：

```
.rounded-corners
{
    behavior: url(content/css/pie.htc);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T20:44:50.960

尽管您在其他地方对此问题发表了评论，但这实际上并不是 IE 中的错误。它完美地合理地处理了相对路径。

发生此问题的原因是，就 URL 路径而言，这两个 URL（即带斜杠和不带斜杠）实际上位于不同的目录中。

*   `http://sampledomain.com/site`-- 这被视为`site`根目录中的文件名。

*   `http://sampledomain.com/site/`-- 这被视为`site`根目录中的一个目录，并且您正在该目录中加载默认文件。

所以就浏览器而言，这两个 URL 位于不同的目录路径中。因此，如果您指定相对路径，它将与每个路径中的不同路径相关，并且其中一个显然不会指向正确的位置。如果您有其他具有相对路径的项目，例如图像，它们也会有同样的问题，并且它会出现在所有浏览器中，而不仅仅是 IE。（因此，我假设您在此页面上没有很多其他相对路径）

正如您已经制定的那样，快速解决方案是将其转换为绝对路径，以斜杠开头。这将确保它是从站点中的同一位置加载的，无论您从哪个 URL 加载它。

然而，这个问题暗示了一个更大的问题。行为良好的网站不应允许这两个 URL 都有效。不带斜线的 URL 应重定向到带斜线的 URL；无论是否有斜线，它都不应该简单地加载相同的内容。

允许两个 URL 加载相同的内容显然对您网站的 SEO 不利。这意味着谷歌会将您的网站视为具有相同内容的两个页面，这反过来会被视为您的谷歌排名的减分。

使用 .htaccess/mod_rewrite 可以轻松解决此问题，理想情况下，您可以像原始 CSS3Pie 加载问题一样紧迫地解决此问题。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:49:28.223

由于`behavior`它是 Internet Explorer 的非标准 CSS 属性，因此它的实现也是非标准的（如，没有规范）。似乎唯一的选择是确保声明中 URL 的值是绝对路径——而不是相对路径。

这解决了这个问题：

```
.rounded-corners
{
    behavior: url(/site/content/css/pie.htc);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:46:53.800

根据[W3C](http://www.w3.org/TR/REC-CSS1/#url)，一个 url 是相对于样式表的 - 即。在你的情况下，cdn。我不知道它为什么会起作用！

但是，由于它部分工作，我有另一个答案给你。/site url 被浏览器解释为网站内的一个页面 - 浏览器无法判断它是一个没有 / 结尾的文件夹。这意味着相对路径将相对于网站的根文件夹。解决这个问题的最简单方法是将 url 更改为 /site/content/css/pie.htc

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-01T23:50:53.183

在[标准 CSS 属性](https://developer.mozilla.org/en-US/docs/Web/CSS/url)中，相对 URL 是相对于 CSS 文档的：

> URI 可以用单引号或双引号引起来。相对 URI 是允许的，并且相对于样式表的 URL（而不是相对于网页的 URL）。

但是，`behavior`它是一个专有的 IE 属性，并且 URL 是相对于引用工作表的 HTML 文件的，因此确保它工作的更简单方法是使用绝对路径。

如果您仍然想使用相对路径，您可以使用 URL 重写，或者`.htc`在所有可能的路径中复制文件，或者在服务器端进行一些其他 hack，使其能够`.htc`从任何路径提供文件（例如在MVC 您可以添加一个处理所有`.htc`文件请求的路由，并使用从适当位置为它们提供服务的控制器）。由于所有这些解决方案都有些老套，我更喜欢绝对路径，除非应用程序可以同时存在于根目录或任何虚拟文件夹中。

# plone - Plone - 运行 bootstrap.py 启动新项目失败：“用作下载缓存的目录不存在。”

> ID：13075968
> 
> 赞同：1
> 
> 时间：2012-10-25T19:39:43.207
> 
> 标签：plone, zope, bootstrapper, buildout

我采取了以下步骤：

**首先**- 创建一个名为的目录`pln41`和一个名为`pln41`. （我在 virtualenv 中安装了 PIL。）

**第二**- 进入目录并运行：

```
wget http://svn.plone.org/svn/plone/buildouts/plone-coredev/branches/4.1/bootstrap.py 
```

**第三**- 创建以下`buildout.cfg`文件：

```
[buildout]
extends = http://dist.plone.org/release/4.1/versions.cfg
parts = instance 

[instance] 
recipe = plone.recipe.zope2instance
user = admin:admin
eggs = Plone 
```

**第四**- 运行`python bootstrap.py --distribute

该程序产生以下输出并崩溃：

```
Downloading http://pypi.python.org/packages/source/d/distribute/distribute-0.6.30.tar.gz
Extracting in /var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpLrULV3
Now working in /var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpLrULV3/distribute-0.6.30
Building a Distribute egg in /var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmp54ZJQK
/var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmp54ZJQK/distribute-0.6.30-py2.7.egg
While:
  Initializing.
Error: The directory:
'/Users/Jon/dev/pln41/~/.buildout/extends'
to be used as a download cache doesn't exist. 
```

现在，我的主目录中确实有一个`.builtout/`目录。问题在于，将`~`标志放在路径中间，就像引导程序试图做的那样，会产生问题。如果我尝试`cd /Users/Jon/dev/pln41/~/.buildout/`从任何地方运行，我会得到“没有这样的文件或目录”，但如果我运行，`cd ~/.buildout/`那么一切正常。为什么引导程序创建此路径：**/Users/Jon/dev/pln41/~/.buildout/extends**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:52:40.473

你的`~/.buildout/default.cfg`文件里有什么？我希望这样：

```
[buildout]
eggs-directory = /Users/Jon/.buildout/eggs
download-cache = /Users/Jon/.buildout/downloads
extends-cache  = /Users/Jon/.buildout/extends 
```

确保您已创建这些行引用的目录。

# svn - svn 移动所有文件，子目录到一个新目录

> ID：13075970
> 
> 赞同：0
> 
> 时间：2012-10-25T19:39:53.363
> 
> 标签：svn

svn的新手。我尝试将一个完整的目录加载到 svn

例如：

```
svn import mynewcontent svn.something.edu/repo/portal -m "First import" 
```

mynewcontent*有*许多子目录和文件。`svn.something.edu/repo/portal`现在，当我查看Eg时，我有一个目录/文件列表：

```
File1
File2
Subdir1/
Subdir2/ 
```

但是我希望所有这些文件都在 svn 上的 mynewcontent 目录中。

我可以做类似的事情：

```
svn move http://svn.something.edu/repo/portal/* http://svn.something.edu/repo/portal/mynewcontent 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:09:16.810

是的你可以。不是一招，而且不仅是一招，而是一招

*   纯存储库端

    > svn mkdir [http://svn.something.edu/repo/portal/mynewcontent](http://svn.something.edu/repo/portal/mynewcontent)
    > 
    > svn move .../portal/file1 ... ..../portal/fileN ...portal/mynewcontent/

*   在中间使用WC

    > svn co [http://svn.something.edu/repo/portal/](http://svn.something.edu/repo/portal/)
    > 
    > svn 开关 ^/mynewcontent
    > 
    > svn ci

    并稍后从根目录中删除过时的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:34:30.693

我会说，虽然这可能会奏效，但它不是要走的路。将您的项目重新导入到您想要的结构中。

```
svn import mynewcontent svn.something.edu/repo/portal/trunk/mynewcontent -m "First import" 
```

之后不要忘记检查它，您用于导入的源不是工作副本

```
svn checkout --force svn.something.edu/repo/portal/trunk/mynewcontent . 
```

# ruby-on-rails - Rspec 控制器错误，期望 <"index"> 但使用 <""> 呈现

> ID：13075972
> 
> 赞同：9
> 
> 时间：2012-10-25T19:40:02.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, devise, cancan

新的测试，我正在努力让一些控制器测试通过。

以下控制器测试引发错误：

```
 expecting <"index"> but rendering with <""> 
```

我的控制器规格之一中有以下内容：

```
 require 'spec_helper'

  describe NasController do

  render_views
  login_user

  describe "GET #nas" do
      it "populates an array of devices" do
        @location = FactoryGirl.create(:location)
        @location.users << @current_user
        @nas = FactoryGirl.create(:nas, location_id: @location.id )      
        get :index
        assigns(:nas).should eq([@nas])
      end

      it "renders the :index view" do
        response.should render_template(:index)
      end
    end 
```

在我的控制器宏中，我有这个：

```
 def login_user
    before(:each) do
      @request.env["devise.mapping"] = Devise.mappings[:user]
      @current_user = FactoryGirl.create(:user)
      @current_user.roles << Role.first
      sign_in @current_user
      User.current_user = @current_user
      @user = @current_user
      @ability = Ability.new(@current_user)
    end
  end 
```

我正在使用 devise 和 cancan 并遵循他们的指南。测试。我相信我的用户之前已登录并能够查看索引操作。

我该怎么做才能让测试通过？

-- 更新 1 --

控制器代码：

```
class NasController < ApplicationController
   before_filter :authenticate_user!
   load_and_authorize_resource

   respond_to :js

   def index

     if params[:location_id]
       ...
     else
     @nas = Nas.accessible_by(current_ability).page(params[:page]).order(sort_column + ' ' + sort_direction)

     respond_to do |format|
      format.html # show.html.erb
     end    
    end
  end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-25T20:05:36.520

我想如果你改变

```
it "renders the :index view" do
  response.should render_template(:index)
end 
```

至

```
it "renders the :index view" do
  get :index
  response.should render_template(:index)
end 
```

它应该工作。

更新：试试这个

```
it "renders the :index view" do
  @location = FactoryGirl.create(:location)
  @location.users << @current_user
  @nas = FactoryGirl.create(:nas, location_id: @location.id ) 
  get :index
  response.should render_template(:index)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:45:43.600

我设法最终解决了这个错误，但不知道我们是否有同样的问题。

在我的设置中，我有一个控制器宏，它将遍历每种响应格式（html、js、json 等）并在该格式下测试规范。像个白痴一样，我实际上还没有针对我的某些规范的 json 响应模板，而且我没有意识到如果它实际上找不到模板会引发错误。所以这是我的问题。

尝试在您的规范中指定格式，如下所示，然后在正确的文件夹中编写一些名为 index.html 的模拟模板，看看是否会遇到相同的错误。

```
get :index, :format => "html" 
```

# python - Python中模板生成器的文件名

> ID：13075973
> 
> 赞同：1
> 
> 时间：2012-10-25T19:40:04.890
> 
> 标签：python, regex

我正在尝试从模板生成器创建一个文件名。

我想创建一个模板，例如：

```
/path/to/my/file/{{ dir_id }}/is/here/{{ file_id }} 
```

然后使用正则表达式查找这些键并将键与字典进行匹配。

我想尽可能优雅地做到这一点，似乎这样的事情应该有效。

```
s = re.compile(r'\{\{*?P<key>*?\}\})
s.findall(template) 
```

但是，这并没有找到任何东西。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:56:46.447

我不确定正则表达式是解决这个问题的最合适的方法。传统[格式字符串](http://docs.python.org/library/string.html#format-string-syntax)有什么问题？

```
 "/path/to/my/file/%(dir_id)s/is/here/%(file_id)s" % \
         {"dir_id": "dir", "file_id": "fileId"} 
```

# javascript - Javascript使用变量作为对象键将匿名对象推送到数组中

> ID：13075975
> 
> 赞同：1
> 
> 时间：2012-10-25T19:40:20.557
> 
> 标签：javascript

> **可能重复：**
> [使用变量访问对象](https://stackoverflow.com/questions/11230063/accessing-property-of-object-with-variable)
> [的属性 如何使用变量作为名称将属性添加到 JavaScript 对象？](https://stackoverflow.com/questions/695050/how-do-i-add-a-property-to-a-javascript-object-using-a-variable-as-the-name)

我正在尝试实现以下目标，将匿名对象推送到数组中，但使用变量“名称”作为对象键。有什么想法我能做到这一点吗？

```
var json = $('form[name="edit-form"]').serializeArray();
var data = {};
data.user = [];
var l = json.length;
for(var i = 0; i < l; i++){
  var name = json[i].name;
  var value = json[i].value;
  data.user.push({[name]: value});
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:43:35.780

像这样的东西？假设您要查找的是一个对象，其属性取自包含该值的 name 变量。

```
 var json = $('form[name="edit-form"]').serializeArray();
    var data = {};
    data.user = [];
    var l = json.length;
    for(var i = 0; i < l; i++){
        var name = json[i].name;
        var value = json[i].value;
        var tempObj = {};
        tempObj[name] = value;
        data.user.push(tempObj);
    } 
```

# xaml - 如何在 WinRT 的 ListView 中设置滚动条的宽度？

> ID：13075976
> 
> 赞同：1
> 
> 时间：2012-10-25T19:40:24.423
> 
> 标签：xaml, listview, styles, windows-runtime, scrollbar

我在 WinRT 平台上有一个 ListView 控件，但它的滚动条比我想要的要小。我想让它比默认样式更大。我应该如何创建样式并应用它？我关注这个线程[如何将 WPF ScrollBar 样式应用于特定的列表视图？](https://stackoverflow.com/questions/5163259/how-to-apply-wpf-scrollbar-style-to-a-particular-listview)，但不会影响我这边的滚动条。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:58:45.267

最简单的方法是在表单的设计视图中右键单击 ListView，单击编辑模板/编辑副本，然后单击确定。然后你必须对作为 ListView 模板一部分的 ScrollViewer 执行相同的操作 - 这有点棘手，因为当你右键单击它时 - 你会选择 ItemsPresenter，所以你需要点击 Esc 来选择外部控件是 ScrollViewer 并确保您只右键单击它的边框，这样您就可以编辑 ScrollViewer 的模板。然后你必须对垂直滚动条做同样的事情......然后你必须将所有元素的宽度以及顶部和底部的重复按钮的高度设置为你想要的值。然后更改 ListView 上的填充以考虑更宽的 ScrollBar（也许有更好的方法），通常会摆弄模板。[这是一个示例](https://dl.dropbox.com/u/1192076/App55.zip)（对不起，模板相当冗长，不适合 SO 答案。

# java - Java中C的这些等效数据类型是什么？

> ID：13075980
> 
> 赞同：0
> 
> 时间：2012-10-25T19:40:43.757
> 
> 标签：java, c, types, biginteger, bits

假设我有很大的数字。我知道在 C 中我们可以声明：

```
long long int // What is equivalent of this in Java?

long double   // and this? 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T19:43:57.127

即使在 C 中，a`long double`并`long long int`在不同的硬件和编译器上使用不同的表示形式。许多编译器认为与 -`long double`相同`double`或可能会出错。

同样，`long long`对 16 位和 32 位编译器的支持有限，尤其是此类平台。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T19:44:37.357

从[这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)我们可以看到，在 Java 中，

64 位 = 长，32 位 = 整数。

因此，您`long long int`在 64 位 linux 环境中的 C 语言会生成一个 64 位 int，这相当于 Java 中的 long。在 Windows 中，64 位是 _int64。

然而，long double 是一个较新的特性，它扩展了 double 的通常长度，并且在 Java 中没有原始等价物

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T19:43:24.127

java中没有原生的等价物。您应该查看[BigInteger](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)类。

# db2 - 比较不同服务器上的模式

> ID：13075983
> 
> 赞同：0
> 
> 时间：2012-10-25T19:40:54.983
> 
> 标签：db2

我必须比较`X`存在于 2 个服务器（即 S1 和 S2）上的模式。谁能帮助我了解如何比较架构`X`中存在的所有表`S1`和`S2`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:31:36.040

如果您只想比较表名，请在两台服务器上运行此查询，将返回的数据导出到文件中，然后针对这两个文件运行 diff 实用程序以查找任何差异。

```
SELECT TABLE_NAME
FROM SYSIBM.TABLES
WHERE TABLE_SCHEMA = 'X' 
```

如果您需要比较所有表中的所有列，请改用此查询：

```
SELECT TABLE_NAME, COLUMN_NAME, TYPE_NAME, COLUMN_SIZE, DECIMAL_DIGITS
FROM SYSIBM.SQLCOLUMNS
WHERE TABLE_SCHEM = 'X'
ORDER BY TABLE_NAME, COLUMN_NAME 
```

# android - 平板电脑布局，根据屏幕方向更改错误

> ID：13075990
> 
> 赞同：1
> 
> 时间：2012-10-25T19:41:16.033
> 
> 标签：android, layout, android-fragments, actionbarsherlock, fragment

基本上我的问题有点“简单”：
**我有这个平板电脑的横向布局：**

![平板电脑布局横向](../Images/9e82f4c951a4fed7f76e355d2a3bb5dd.png)

**如果用户将平板电脑旋转为纵向模式，并且想要将布局更改为以下布局：**

![平板电脑布局纵向](../Images/b06b108d82323a596043eca38062a889.png)

在第一个，横向，布局中，UI 一次显示两个片段，`Fragment1`在左侧和`Fragment2`右侧。的容器`Fragment2`是 a `ViewPager`，其中也包含`Fragment3`. `Fragment3`是可见的，用户滑动到它，或单击 中的选项卡`ActionBar`。

在第二个，纵向，布局 Ui`Fragment`一次显示所有三个，`ViewPager`被删除，选项卡也被删除，因为它们是不必要的。

我在我的 MainActivity 中创建横向布局，如下所示：

```
 // ActionBar Stuff
    mActionbar = getSupportActionBar();
    mActionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    mActionbar.setHomeButtonEnabled(false);

    // Swipe Stuff
    mAdapter = new FragmentAdapter(fm);
    mPager = (ViewPager) findViewById(R.id.viewpager);
    mPager.setAdapter(mAdapter);
    mPager.setOnPageChangeListener(this);

    // Initialize Tabs
    Tab1 = mActionbar.newTab().setText("Tab1");
    Tab2 = mActionbar.newTab().setText("Tab2");

    // Set Tab to Fragment // they're initialized here and accessed in the ViewPager (mPager)
    Fragment1 = new FirstFragment();
    Fragment3 = new ThirdFragment();

    android.support.v4.app.FragmentManager fm = getSupportFragmentManager();
    android.support.v4.app.FragmentTransaction ft = fm.beginTransaction();
    ft.replace(R.id.fragment_one_container, Fragment1).commit();

    // //TabListener///////////////////////////
    Tab1.setTabListener(new TabsListener(mApp, 0 + "", mPager));
    Tab2.setTabListener(new TabsListener(mApp, 1 + "", mPager));

    // //Add Tabs//////////////////////////////
    mActionbar.addTab(Tab1);
    mActionbar.addTab(Tab2); 
```

滑动时这两个 Fragment 之间的`ViewPager`切换以及一些更复杂的事情，例如在运行时替换`Fragment2`为其他`Fragment`s（用于导航）。

到目前为止一切都很好，我的纵向布局代码是相似的：

```
 // ActionBar Stuff
    mActionbar = getSupportActionBar();
    mActionbar.setHomeButtonEnabled(false);

    // Swipe Stuff
    mAdapter = new FragmentAdapter(fm);
    mPager = (ViewPager) findViewById(R.id.viewpager);
    mPager.setAdapter(mAdapter);
    mPager.setOnPageChangeListener(this);

    // Set Tab to Fragment // they're initialized here and accessed in the ViewPager (mPager)
    Fragment1 = new FirstFragment();
    Fragment3 = new ThirdFragment();

    android.support.v4.app.FragmentManager fm = getSupportFragmentManager();
    android.support.v4.app.FragmentTransaction ft = fm.beginTransaction();
    ft.replace(R.id.fragment_one_container, Fragment1);
    ft.replace(R.id.fragment_three_container, Fragment3);
    ft.commit(); 
```

ViewPager 是 的容器`Fragment2`，其他容器在上面的代码中解释。

布局文件`R.layout.main_tablet_land`和`R.layout.main_tablet_port`位于`layout-lard-land`和中`layout-large-port`。

我的实际问题不是显示，这是可行的，我的问题是方向改变，我得到这个异常：`java.lang.IllegalStateException: Can't change container ID of fragment Fragment3`

我覆盖`onConfiguratioChange`并尝试重新应用布局`setContentView(layout)`并调用布局`tablet_land`（第一个代码块）和`tablet_port`（第二个块）的方法。（还有很多 ..）

任何想法如何避免这种情况？

编辑：没有想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:17:38.323

如果在两个面板布局中没有容器，则必须添加一些代码来清除 fragment3：

因此，尝试像这样重写您的 XXX_FragmentActivity onCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_activity);
    // fragment 3 trick
    FragmentManager fm = getSupportFragmentManager();
    Fragment oldFragment3 = fm.findFragmentById(R.id.fragment_three_container);
    View fragment3Container = findViewById(R.id.fragment_three_container);
    if(null==fragment3Container && null!=oldFragment3){
        FragmentTransaction ft = fm.beginTransaction();
        ft.remove(oldFragment3);
        ft.commit();
        fm.executePendingTransactions();
    }
    // other stuff
} 
```

# css - 在 Windows8 Metro 中，如何更改下拉列表中已选择项目的突出显示颜色

> ID：13075995
> 
> 赞同：3
> 
> 时间：2012-10-25T19:41:36.563
> 
> 标签：css, windows-8, microsoft-metro, winjs

我正在使用 WinJS 在 Windows Metro 中构建一个页面。我有一个 DatePicker JavaScript 对象，它是 HTML 中的基本选择/选项下拉菜单。我已经弄清楚了如何在单击下拉菜单后对它的每个部分进行 CSS，除了所选项目的突出显示颜色。无论我针对的是什么 css 类或伪元素，我都无法找到那个元素。它始终保持默认的 Windows 8 紫色。

[http://paulkarpenko.com/images/dropdowncolor.png](http://paulkarpenko.com/images/dropdowncolor.png)

假设下拉列表是 .myDropdown。我试过了

```
.myDropdown select        //styles pre-clicked select element
.myDropdown::-ms-value    //styles pre-clicked select label area
.myDropdown::-ms-expand   //styles pre-clicked select down arrow
.myDropdown option        //styles entire dropdown area
.myDropdown option:hover  //styles dropdown area's mouse-hover elements 
```

请帮忙。如何设置所选元素的样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T01:54:46.967

试试这个——颜色应该足够花哨，可以注意到它们来自哪里。

```
.myDropdown option:checked, .myDropdown:focus::-ms-value {
    color: rgb(255, 255, 255);
    background-color: yellow;
}

.myDropdown option:checked:hover, .myDropdown:focus option:checked:hover {
    color: rgb(255, 255, 255);
    background-color: yellowgreen;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T04:08:27.350

您还可以使用位于[http://code.msdn.microsoft.com/windowsapps/Theme-roller-sample-64b679f2](http://code.msdn.microsoft.com/windowsapps/Theme-roller-sample-64b679f2)的 ThemeRoller 示例来帮助生成 CSS 以覆盖所有控件。

# delphi - 当我需要调用所有者所有者的所有者方法时该怎么办？

> ID：13075996
> 
> 赞同：1
> 
> 时间：2012-10-25T19:41:50.900
> 
> 标签：delphi, collections, delphi-xe2

我有 TbsManager 类，它公开 Load 方法，如：

```
 TbsManager = class(TComponent)
 private
   FItems: TbsItems;  
 public
   procedure Load(Item: TbsItem); 
```

TbsItem 是一个 TCollectionItem，它由 TbsItems 拥有：

```
TbsItem = class(TCollectionItem)
TbsItems = class(TCollection) 
```

我希望我的 TbsItems 具有 Load 方法（在 onwer 的所有者类中），这就是我实现它的方式：

```
procedure TbsItem.Load;
begin
  TbsManager(TbsItems(GetOwner).Owner).Load(Self);
end; 
```

我不确定我是否做得对。它是一个安全的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:45:19.507

如果您的设计要求该层次结构，那么您的代码是合理的。我会用`as`操作员修改它以使用检查的演员表。如果类不是所需的类型，这些将引发运行时错误：

```
((GetOwner as TbsItems).Owner as TbsManager).Load(Self); 
```

# php - Memcache 和 memcached：“getaddrinfo 失败”

> ID：13075997
> 
> 赞同：2
> 
> 时间：2012-10-25T19:41:53.643
> 
> 标签：php, memcached, xampp

我已经在 OSX Mountain Lion 的 XAMPP 中安装了 memcache 和 memcached。虽然它们都没有出现在`phpinfo()`.

在我*`index.php`*的文件顶部，我只是简单地包含了该文件：

```
include 'memcache.php' 
```

然后当我进入我的网站时，我得到一个 MEMCACHE INFO 页面，它给了我这个错误：

> 错误消息：fsockopen() [function.fsockopen]: php_network_getaddresses: getaddrinfo failed: nodename or servname provided, or not known`

我究竟做错了什么？

可以在不显示的情况下安装 memcache 和 memcached`phpinfo()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:49:32.077

必须有一个 memcache 或 memcached 守护进程在运行和监听。Memcache(d) 就像 apache 一样是一个单独的服务器进程。它在端口/套接字上侦听请求。如果您没有运行一个，则无法连接到它。如果一个正在运行，你可能得到了错误的连接细节......它有点像你的 DSN 字符串，用于通过 mysqli 或 PDO 访问数据库。

我猜在您包含的“memcache.php”文件中，它要求设置主机名或节点名。这也告诉我您应该尝试连接到 memcached 服务器（因为 memcached 具有节点的概念）。打开它并找到它试图连接到 memcache 服务器的位置并将其编辑为指向 localhost 或任何您的机器名称（或 IP 地址）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:51:04.820

问题是您为连接到 memcached 提供的主机名不正确。您的错误本质上是 DNS 找不到主机名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:58:24.800

[我按照本指南](http://m-schmidt.eu/tag/memcached/)修复了它。 似乎 memcache 没有完全安装或其他什么，因为现在它出现了`phpinfo()`并且一切正常！不知道为什么在遵循其他几个教程时它不起作用，尽管理论是它为 OSX 中的内置 apache 安装了 memcache。