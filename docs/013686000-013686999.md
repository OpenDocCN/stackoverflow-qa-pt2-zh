# StackOverflow 问答 13686000-13686999

# maven-2 - EasyWSDL 缺少依赖项

> ID：13686000
> 
> 赞同：0
> 
> 时间：2012-12-03T15:07:56.087
> 
> 标签：maven-2, wsdl, artifact

我正在尝试将 WSDL 模块添加到我现有的应用程序中，但我正在努力解决依赖关系。

根据他们的网站，这是正确的依赖

```
<dependency>
<groupId>org.ow2.easywsdl</groupId>
<artifactId>easywsdl-wsdl</artifactId>
<version>2.1</version>
</dependency> 
```

经过搜索（search.maven.org），我已经将版本更改为 2.3，并且有一堆文件下载到我的本地存储库中，但是在运行应用程序（使用网站演示代码）时，我碰到了这个错误：

```
java.lang.ClassNotFoundException: com.ebmwebsourcing.easycommons.uri.UriManager 
```

我相信这与丢失的工件有关：

```
com.ebmwebsourcing.easycommons:easycommons.uri:jar:1.1
com.ebmwebsourcing.easycommons:easycommons.logger:jar:1.1 
```

特别是第一个。现在，我对使用 Maven 比较陌生……我将如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:56:41.613

解决方案是添加petalslink存储库。显然，标准的 maven 存储库不包含 easycommons 依赖项。花瓣链接存储库可以。

# python - 用于从美国城市名称中获取纬度和经度的 Python 模块

> ID：13686001
> 
> 赞同：22
> 
> 时间：2012-12-03T15:08:10.423
> 
> 标签：python, geolocation, geopy

我正在寻找一个python模块，它可以将城市名称作为输入并返回输入的纬度和经度。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-03T15:09:50.980

看看[**geopy**](https://github.com/geopy/geopy)。在“入门”文档中，它显示：

```
>>> from geopy import geocoders  
>>> gn = geocoders.GeoNames()

>>> print gn.geocode("Cleveland, OH 44106")
(u'Cleveland, OH, US', (41.4994954, -81.6954088))

>>> gn.geocode("Cleveland, OH", exactly_one=False)[0]
(u'Cleveland, OH, US', (41.4994954, -81.6954088)) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-08-29T14:08:14.410

一个例子：

```
from geopy.geocoders import Nominatim
geolocator = Nominatim(user_agent='myapplication')
location = geolocator.geocode("Chicago Illinois")
print(location.address) 
```

可用信息：

```
>>> location.raw
{u'display_name': u'Chicago, Cook County, Illinois, United States of America', u
'importance': 1.0026476104889, u'place_id': u'97957568', u'lon': u'-87.6243706',
 u'lat': u'41.8756208', u'osm_type': u'relation', u'licence': u'Data \xa9 OpenSt
reetMap contributors, ODbL 1.0\. http://www.openstreetmap.org/copyright', u'osm_i
d': u'122604', u'boundingbox': [u'41.6439170837402', u'42.0230255126953', u'-87.
9401016235352', u'-87.5239791870117'], u'type': u'city', u'class': u'place', u'i
con': u'http://nominatim.openstreetmap.org/images/mapicons/poi_place_city.p.20.p
ng'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-29T13:06:37.083

您还可以将地理编码器与 Bing Maps API 一起使用。API 为我获取所有地址的纬度和经度数据（与 Nominatim 不同），它有一个非常好的非商业用途免费版本（每年最多 125000 个免费请求）。要获取免费 API，请转到[此处](https://www.microsoft.com/en-us/maps/create-a-bing-maps-key)并单击“获取免费基本密钥”。获取 API 后，您可以在下面的代码中使用它：

```
import geocoder # pip install geocoder
g = geocoder.bing('Tokyo', key='<API KEY>')
results = g.json
print(results['lat'], results['lng']) 
```

输出：

```
>>> 35.68696212768555 139.7494659423828 
```

`results`包含比经度和纬度更多的信息。一探究竟。

# git - heroku 远程分支

> ID：13686002
> 
> 赞同：1
> 
> 时间：2012-12-03T15:08:11.340
> 
> 标签：git, heroku

我有一个非常烦人的问题，我用所有应用程序删除了我以前在 heroku 上的帐户，然后我创建了一个新帐户，我想将远程分支添加到 git，然后问题就开始了。

```
git remote -v 
heroku  git@heroku.com:freezing-moon-116.git (fetch)
heroku  git@heroku.com:freezing-moon-116.git (push)
origin  git@gitbus.fiit.stuba.sk:laser_kn/laser_kn.git (fetch)
origin  git@gitbus.fiit.stuba.sk:laser_kn/laser_kn.git (push)

git remote rm heroku 
error: Could not remove config section 'remote.heroku'

vim .git/config
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
        ignorecase = true
[remote "origin"]
        url = git@gitbus.fiit.stuba.sk:laser_kn/laser_kn.git
        fetch = +refs/heads/*:refs/remotes/origin/* 
```

我的问题是如何删除损坏的远程 heroku 存储库并添加一个新的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:33:51.263

正如`git remote`向您展示了遥控器但`.git/config`没有显示的那样，似乎该遥控器是在另一个配置文件中定义的。

引用`man git config`：

```
FILES
       If not set explicitly with --file, there are three files where git
       config will search for configuration options:

       $GIT_DIR/config
           Repository specific configuration file. (The filename is of course
           relative to the repository root, not the working directory.)

       ~/.gitconfig
           User-specific configuration file. Also called "global"
           configuration file.

       $(prefix)/etc/gitconfig
           System-wide configuration file. 
```

看看`~/.gitconfig`你很可能应该在那里找到你的遥控器。

# python - 使用按钮事件 tkinter 在画布中创建图像

> ID：13686009
> 
> 赞同：2
> 
> 时间：2012-12-03T15:08:44.200
> 
> 标签：python, events, tkinter

我需要在 Tkinter gui 中向我的按钮添加一个事件，该事件将在画布中创建一个图像。我该怎么做？

谢谢大家

它可以工作，但我需要获取同一图像文件的动态数量图像，但每次创建新图像时，旧图像都会被垃圾收集。我想不出该怎么办。我想在我的画布上有多个相同图像的实例。请，很高兴提出一些建议

我的代码

```
from Tkinter import *
import tkMessageBox

def callback():
        if tkMessageBox.askokcancel("Quit", "Do you really wish to quit?"):
            root.destroy()

class AppUI(Frame):
        def __init__(self, master):

            Frame.__init__(self, master, background="white", relief=FLAT, bd=2, height=768, width=1024)

            self.menubar = Menu(self)

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="File", menu=menu)
            menu.add_command(label="New")
            menu.add_command(label="Open")
            menu.add_command(label="Save As")
            menu.add_command(label="Save Copy of")
            menu.add_separator()
            menu.add_command(label="exit")

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="Edit", menu=menu)
            menu.add_command(label="Cut")
            menu.add_command(label="Copy")
            menu.add_command(label="Paste")

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="Debug", menu=menu)
            menu.add_command(label="Open Debugger")
            menu.add_command(label="Auto-debug")
            menu.add_command(label="Revert")

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="Run", menu=menu)
            menu.add_command(label="Stimulation")
            menu.add_command(label="Check")
            menu.add_command(label="Scan Module")

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="Help", menu=menu)
            menu.add_command(label="Help files")
            menu.add_command(label="FTA site")
            menu.add_separator()
            menu.add_command(label="Credits")

            self.master.config(menu=self.menubar)      

            f0 = Frame(root, background="white")

            b1 = Button(f0, bd=2, padx=15, pady=15, justify = LEFT)
            photo1 = PhotoImage(file="Images/p1.gif")
            b1.config(image = photo1,width="50",height="50", command=self.create_image1)
            b1.image = photo1
            b1.pack(side=LEFT)

            b2 = Button(f0, bd=2, padx=15, pady=15, justify = LEFT)
            photo2 = PhotoImage(file="Images/p4.gif")
            b2.config(image=photo2, width="50",height="50", command = self.create_image2)
            b2.image = photo2
            b2.pack(side=LEFT)

            b3 = Button(f0,padx=15, bd=2, pady=15, justify = LEFT)
            photo3 = PhotoImage(file="Images/p8.gif")
            b3.config(image=photo3, width="50",height="50", command = self.create_image3)
            b3.image = photo3
            b3.pack(side=LEFT)

            b4 = Button(f0,padx=15, bd=2, pady=15, justify = LEFT)
            photo4 = PhotoImage(file="Images/p7.gif")
            b4.config(image=photo4, width="50",height="50", command = self.create_image4)
            b4.image = photo4
            b4.pack(side=LEFT)

            b5 = Button(f0,padx=15, bd=2, pady=15, justify = LEFT)
            photo5 = PhotoImage(file="Images/p5.gif")
            b5.config(image=photo5, width="50",height="50", command=self.create_image5)
            b5.image = photo5
            b5.pack(side=LEFT)

            f0.pack(anchor=NW, side=TOP)

            self.canvas = Canvas(self, height=750, width=1500, bg="white")
            self.canvas.pack(side=LEFT)

    def create_image1(self):
            photos1 = PhotoImage(file="Images/p1.gif")
            self.photos1=photos1
            self.img1=self.canvas.create_image(60, 60, image=photos1)
            self.canvas.bind("<B1-Motion>", self.move_image1)

    def create_image2(self):
            photos2 = PhotoImage(file="Images/p4.gif")
            self.photos2=photos2
            self.img2=self.canvas.create_image(60, 60, image=photos2)
            self.canvas.bind("<B1-Motion>", self.move_image2)

    def create_image3(self):
            photos3 = PhotoImage(file="Images/p8.gif")
            self.photos3=photos3
            self.img3=self.canvas.create_image(60, 60, image=photos3)
            self.canvas.bind("<B1-Motion>", self.move_image3)

    def create_image4(self):
            photos4 = PhotoImage(file="Images/p7.gif")
            self.photos4=photos4
            self.img4=self.canvas.create_image(60, 60, image=photos4)
            self.canvas.bind("<B1-Motion>", self.move_image4)

    def create_image5(self):
            photos5 = PhotoImage(file="Images/p5.gif")
            self.photos5=photos5
            self.img5=self.canvas.create_image(60, 60, image=photos5)        
            self.canvas.bind("<B1-Motion>", self.move_image5)

    def move_image1(self, event):
            self.canvas.delete(self.img1)
            x = event.x
            y = event.y
            self.img1 = self.canvas.create_image(x, y, image=self.photos1, anchor='nw')
            self.canvas.update()
    def move_image2(self, event):
            self.canvas.delete(self.img2)
            x = event.x
            y = event.y
            self.img2 = self.canvas.create_image(x, y, image=self.photos2, anchor='nw')
            self.canvas.update()
    def move_image3(self, event):
            self.canvas.delete(self.img3)
            x = event.x
            y = event.y
            self.img3 = self.canvas.create_image(x, y, image=self.photos3, anchor='nw')
            self.canvas.update()
    def move_image4(self, event):
            self.canvas.delete(self.img4)
            x = event.x
            y = event.y
            self.img4 = self.canvas.create_image(x, y, image=self.photos4, anchor='nw')
            self.canvas.update()
    def move_image5(self, event):
            self.canvas.delete(self.img5)
            x = event.x
            y = event.y
            self.img5 = self.canvas.create_image(x, y, image=self.photos5, anchor='nw')
            self.canvas.update()        

root = Tk()
root.protocol("WM_DELETE_WINDOW", callback)

app = AppUI(root)
app.pack()

root.mainloop() 
```

此外，只能拖放最后绘制的图像所有以前的图像都不能交互。而且，正如我所说，我似乎无法创建多个克隆图像。我知道我应该锚定所有图像，这样它们就不会被垃圾收集，但我似乎无法找到一种方法来做到这一点。我尝试将函数 create_image 的图像实例返回到数组。但它没有用。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:08:26.847

你具体有什么问题？它没有什么棘手的：

```
def __init__(...):
    ...
    self.canvas = tk.Canvas(...)
    b = tk.Button(..., command=self.create_image)
    ...
def create_image(self):
    self.canvas.create_image(...) 
```

要记住的重要一点是，除非您保留对它们的引用，否则图像将被垃圾收集。由于您要创建多个图像，因此一种简单的方法是创建一个列表，您可以在其中附加对图像的引用：

```
def __init__(...):
    ...
    self.images = []
    ...
    photo1 = PhotoImage(file="Images/p1.gif")
    self.images.append(photo1)
    ... 
```

您的代码还有其他一些问题。一方面，您不需要在移动图像时删除然后重新创建图像。画布有一个`move`专门用于移动现有项目的方法。此外，调用`self.canvas.update()`完全没有用。

最后，如果您只有一个“移动”方法，而不是每个图像一个方法，您的代码将更容易维护。这不是这个特定问题的主题，但您可能想要搜索`lambda`并`functools.partial`作为能够通过绑定传递参数的解决方案。

# java - jsp页面中的swf播放器

> ID：13686012
> 
> 赞同：0
> 
> 时间：2012-12-03T15:08:48.703
> 
> 标签：java, jsp, flash

我在 JSP 页面中嵌入了一个小型 swf 播放器，该播放器在 Chrome 和 FF 中运行良好，它也适用于 IE，但仅在第一次访问时，如果我在第一次访问后再次打开音频文件，音频不会播放，除非我按下暂停然后再次播放，要让它再次工作，我必须清除浏览器缓存。

我尝试阻止浏览器缓存（设置 Pragma,Cache-Control ...）但它也不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:31:05.893

有两种方法可以解决这个问题：

更改请求 mp3 的代码或更改提供 mp3 文件的服务器的代码。

1-更改请求代码，以便每次请求某些内容时，它看起来像是对缓存的不同请求。这将取决于您的 mp3 播放器。有些玩家允许这样做，有些则不允许。

```
<param name="url-to-mp3" value="mymp3.mp3?<%=System.currentTimeMillis() %>" /> 
```

2-更改服务器代码。前任。在 Servlet 中尝试添加以下标头以让浏览器知道您不希望缓存 mp3。

```
 // Set to expire far in the past.
        response.setHeader("Expires", "Sat, 6 May 1995 12:00:00 GMT");
        // Set standard HTTP/1.1 no-cache headers.
        response.setHeader("Cache-Control", "no-store, no-cache, must-revalidate");
        // Set IE extended HTTP/1.1 no-cache headers (use addHeader).
        response.addHeader("Cache-Control", "post-check=0, pre-check=0");
        // Set standard HTTP/1.0 no-cache header.
        response.setHeader("Pragma", "no-cache"); 
```

我希望这有帮助。

# javascript - 可以在 Android 4.0.4 上暂时禁用 webkit 的垂直滚动行为吗？

> ID：13686019
> 
> 赞同：2
> 
> 时间：2012-12-03T15:09:08.787
> 
> 标签：javascript, android, jquery, webkit

我在移动网页上有 2 个水平滑块（这是一个移动网络应用程序，而不是应用程序）。在一些具有较小屏幕（或者可能只是不同的高/宽比）的 android 设备上，只需触摸屏幕即可激活设备/浏览器的垂直滚动行为。这会干扰使用水平滑块的能力——浏览器“认为”用户想要上下滚动，但实际上他们需要左右拖动滑块手柄。

有没有办法防止滑块手柄内的触摸事件发生垂直滚动行为，然后在触摸时重新启用它？Android 4.0.4 上的 Webkit 股票浏览器是否支持此功能？

# mysql - 在列更改时触发更新

> ID：13686025
> 
> 赞同：1
> 
> 时间：2012-12-03T15:09:30.840
> 
> 标签：mysql, sql, triggers

您好，目前我的触发器更新表更新，我需要将其更改为仅在特定列更改时触发。

代码：更新后创建触发货币`things`

```
for each row
begin
UPDATE `current` c 
INNER JOIN things    t ON c.id2 = t.id2
INNER JOIN dude_base d ON d.id1 = c.is1
SET c.`curr_cash` = t.thing_cost * d.salary / 100;
end;
$$ 
```

而且我需要进行更改，以便当事物更新“thing_cost”时它会打开。

@edit我必须更新 curr_cash 和东西 cost 是完全不同的值，我无法比较它们，它们总是不同的。

当我使用

```
if NEW.things_cost <> OLD.things_cost 
```

我收到以下错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 10 
```

@编辑

```
create trigger wys_sk_b after update on `dude_base`
for each row
begin
if NEW.salary <> OLD.salary
then
UPDATE `current` s 
INNER JOIN things u ON s.id_thing = u.id_thing 
INNER JOIN dude_base b ON b.id = s.id
SET s.`curr_cash` = u.thing_cost * b.salary/ 100;
end if;
$$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:11:32.537

```
delimiter $$
create trigger wys_sk_b after update on `dude_base`
for each row
begin
  if NEW.salary <> OLD.salary
  then
    UPDATE `current` s 
    INNER JOIN things u ON s.id_thing = u.id_thing 
    INNER JOIN dude_base b ON b.id = s.id
    SET s.`curr_cash` = u.thing_cost * b.salary/ 100;
  end if;
end;
$$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-06T10:20:59.170

**试试这个代码...**

```
**create table sales** (orderno INT, sale INT,empsalary int, ts TIMESTAMP);

**create table history** (updated varchar(20), oldvalue INT,newvalue INT);

INSERT INTO **sales** (orderno,sale,empsalary) VALUES(1,700,7000);

INSERT INTO **sales** (orderno,sale,empsalary) VALUES(2,800,8000);

INSERT INTO **sales** (orderno,sale,empsalary) VALUES(3,900,9000);

DROP TRIGGER test.instrigger; 
```

**分隔符 ///**

```
CREATE TRIGGER test.instrigger AFTER UPDATE ON sales
FOR EACH ROW

BEGIN

    IF NEW.sale <> OLD.sale THEN  
        INSERT INTO history (updated, oldvalue, newvalue) VALUES('sale', OLD.sale,NEW.sale);

    END IF;
    IF NEW.empsalary <> OLD.empsalary THEN  
        INSERT INTO history (updated, oldvalue, newvalue) VALUES('empsalary', OLD.empsalary,NEW.empsalary);
    END IF;
END; 
```

///

**分隔符；**

# python - 在 Python 模块中处理列表有效，但在单独的文件中处理相同的列表不起作用

> ID：13686028
> 
> 赞同：0
> 
> 时间：2012-12-03T15:09:44.487
> 
> 标签：python, io

我正在尝试处理包含在单独文本文件中的列表。我能够读取文件，并生成包含文件内容的输出，但生成的输出是未处理的版本，与输入相同。当列表包含在我正在使用的模块中时，我没有遇到此问题 - 该过程成功运行。任何想法为什么使用输入文件会导致问题？

这成功运行（请注意 - 对于两次运行，“正确”是同一模块中的一个函数）：

```
import sys
sys.stdout = open('out.txt','w')

def spelltest():
    for i in test:
        print correct(i)

test = ['acess','accesing','accomodation','acommodation','acomodation',
'acount','adress','adres','addresable','aranged','arrainged',
'arrangeing','aranging','arragment','articals',
'annt','anut','arnt','auxillary','avaible',
'awfall','afful','basicaly','begining',
'benifit','benifits','beetween',
'bicycal','bycicle','bycycle']

if __name__ == '__main__':
    print spelltest() 
```

这不会：

```
import sys
sys.stdout = open(r'C:\Python26\out.txt','w')

infile = open('C:\\Python26\\text.txt','r')

def spelltest():
    for line in infile:
        print correct(line)

if __name__ == '__main__':
    print spelltest() 
```

有什么想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:12:51.860

一个区别是，在第二个示例中，`line`将保留文件中的换行符 ( `\n`)。第一个示例没有这些字符。

另外，我假设它`text.txt`的格式是每行一个字。

PS 要删除换行符（和其他空格）：

```
def spelltest():
    for line in infile:
        print correct(line.strip()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:02:31.370

鉴于您的文件格式，您可以在开头手动添加“words =”，例如：

```
words = ['acess', 'accesing', 'accomodation', 'acommodation', 'acomodation', 'acount', 'adress', 'adres', 'addresable', 'aranged', 'arrainged'] 
```

然后将其保存为 text.py 而不是 text.txt 。

之后，您可以使用以下命令在实际脚本中导入列表：

`from text import words`

并且不需要任何解析

# intellij-idea - 将 IntelliJ 运行配置保存在自定义位置

> ID：13686029
> 
> 赞同：1
> 
> 时间：2012-12-03T15:09:46.410
> 
> 标签：intellij-idea

我想将我的运行配置保存在自定义位置。

这是可能的还是必须将所有内容存储在 .idea/runConfigurations 中 - 我似乎找不到另存为选项？

我正在使用版本 12 EAP。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:48:19.850

如果你把它保存在其他地方，intellij 不会把它捡起来，这将是多余的。

您可以将文件添加到源代码控制系统的正常位置。

# plasticscm - Plastic SCM 存储库权限继承/分配

> ID：13686035
> 
> 赞同：3
> 
> 时间：2012-12-03T15:10:10.123
> 
> 标签：plasticscm

我已经评估了一段时间，测试不同的场景并尝试不同的配置。在此期间，我多次删除并重新创建了我的存储库。每次，我都不得不返回并将所有权限重新分配给每个存储库。

目前，我决定为公共代码使用一个存储库，然后为每个将要生产的产品使用一个单独的存储库。

现在，我即将迈出一步，开始认真使用 Plastic SCM。但在我这样做之前，我有一个问题：有没有办法从另一个存储库继承/分配对存储库的权限？例如，我在“回购 A”上设置了所有权限，然后在“回购 B”上继承/分配这些相同的权限。

我相信随着我们生产更多产品，我会添加更多存储库，我想找到最简单的方法将它们上线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:32:49.580

您可以通过右键单击存储库并单击权限来为存储库服务器定义一组`Repository Server`权限：

![存储库服务器权限](../Images/7a7c8b910622481ff69c1d777c1396b6.png)

然后所有存储库都将从存储库服务器继承权限。

希望能帮助到你。

# python - 我的 python 脚本没有完全执行我的存储过程

> ID：13686036
> 
> 赞同：2
> 
> 时间：2012-12-03T15:10:10.400
> 
> 标签：python, stored-procedures

我的存储过程本身可以正常工作，但是我的 python 脚本无法使用我下载的文件完全执行存储过程。python脚本的目的是使用ftp下载文件并将文件存储在本地。它首先比较远程位置和本地位置以找到新文件，然后将新文件下载到本地位置。然后对每个新文件执行存储过程。

**蟒蛇脚本：**

```
import os
import ftplib
import pyodbc 
```

**连接到 sql server*** conn = pyodbc.connect('DRIVER={SQL Server};SERVER=localhost;DATABASE=Development;UID=myid;PWD=mypassword') cursor = conn.cursor()

```
ftp = ftplib.FTP("myftpaddress.com")
ftp.login("loginname", "password")
print 'ftp on'

#directory listing 
rfiles = ftp.nlst()
print 'remote listing'

#save local directory listing to files
lfiles = os.listdir(r"D:\Raw_Data\myFiles")
print 'local listing'

#compare and find files in rfiles but not in lfiles
nfiles = set(rfiles) - set(lfiles)
nfiles = list(nfiles)
print 'compared listings'

#loop through the new files
#download the new files and open each file and run stored proc
#close files and disconnect to sql server
for n in nfiles:
   local_filename = os.path.join(r"D:\Raw_Data\myFiles",n)
   lf = open(local_filename, "wb")
   ftp.retrbinary("RETR " + n, lf.write, 1024)
   lf.close()
   print 'file written'
  cursor.execute("exec SP_my_Dailyfiles('n')")
  conn.close()
  lf.close()
  print 'sql executed'

ftp.quit() 
```

**存储过程：**

```
ALTER PROCEDURE [dbo].[SP_my_Dailyfiles] 
    -- Add the parameters for the stored procedure here
@file VARCHAR(255)
-- Add the parameters for the stored procedure here

AS
BEGIN

IF EXISTS(SELECT * FROM sysobjects WHERE name = 'myinvoice')
DROP TABLE dbo.myinvoice
----------------------------------------------------------------------------------------------------
CREATE TABLE myinvoice(

     [Billing] varchar(255)
    ,[Order] varchar(45)
    ,[Item] varchar(255)
    ,[Quantity in pack] varchar(255)
    ,[Invoice] varchar(255)
    ,[Date] varchar(255)
    ,[Cost] varchar(255)
    ,[Quantity of pack] varchar(255)
    ,[Extended] varchar(255)
    ,[Type] varchar(25)
    ,[Date Due] varchar(255)

)

----------------------------------------------------------------------------------------------------            
DECLARE @SourceDirectory VARCHAR(255)
DECLARE @SourceFile VARCHAR(255)

EXEC (' BULK
    INSERT dbo.myinvoice 
    FROM ''D:\Raw_Data\myfile\'+@file+'''
    WITH
    (
        FIRSTROW = 1,
        FIELDTERMINATOR = '','',
        ROWTERMINATOR = ''0x0a''
    )'
)
-------------------------------------------------------------------------------------------------------------

INSERT INTO [Development].[dbo].[my_Dailyfiles](

     [Billing]
    ,[Order] 
    ,[Item] 
    ,[Quantity in pack] 
    ,[Invoice] 
    ,[Date]  
    ,[Cost] 
    ,[Quantity of pack] 
    ,[Extended] 
    ,[Type] 
    ,[Date Due] 
    ,[FileName] 
    ,[IMPORTEDDATE] 

    )
    SELECT

         replace([Billing], '"', '') 
          ,replace([Order], '"', '') 
          ,replace([Item], '"','') 
          ,replace([Quantity in pack],'"','') 
          ,replace([Invoice],'"','') 
          ,cast(replace([Date],'"','') as varchar(255)) as date
          ,replace([Cost],'"','')
          ,replace([Quantity of pack],'"','') 
          ,replace([Extended],'"','') 
          ,replace([Type],'"','') 
          ,cast(replace([Date Due],'"','') as varchar(255)) as date
          ,@file,
          GetDate()      

 FROM [myinvoice] WHERE [Bill to] <> ' '  and ndc != '"***********"' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:28:51.457

我认为问题可能是您在执行存储过程后立即关闭数据库连接，同时仍在循环中。

这意味着第二次循环时，当您尝试执行 SP 时，DB 连接将关闭。我实际上希望在循环周围第二次抛出错误。

我的结构是这样的：

```
conn = pyodbc.connect(...)
for n in nfiles:
    ...
    cursor = conn.cursor()
    cursor.execute("exec SP_my_Dailyfiles('n')")
    conn.commit() 
```

# javascript - JS函数没有执行

> ID：13686044
> 
> 赞同：0
> 
> 时间：2012-12-03T15:10:24.950
> 
> 标签：javascript

我已经尝试了几个小时来找出我的错误，但我找不到它。没有错误出现，这让我更加不安。

[http://jsfiddle.net/qhpDb/](http://jsfiddle.net/qhpDb/)

```
<div id="Game">
    <div class="Helper">
        <div id="Stats">
            Current Position
            <div id="PlayerPosition">0</div>
            <div id="Right">
                <div id="TargetsLeft">0</div> Targets Left
                <div id="MovesCount">0</div> Moves
            </div>
        </div>
        <div id="Map"></div>
    </div>
</div>​ 
```

```
#Game
{
    width: 882px;
    height: 509px;
    border: 2px solid black;
}

#Game div#Stats
{
    padding: 15px;
}

#Game div#Stats div
{
    font-weight: bold;
    display: inline;
}

#Game div#Stats #Right
{
    float: right;
    font-weight: normal;
}

#Game div#Stats #Right div
{
    margin-left: 10px;
}

#Game #Map
{
    width: 882px;
    height: 462px;
}

#Game #Map div
{
    width: 20px;
    height: 20px;
    border-top: 1px solid #333;
    border-right: 1px solid #333;
    display: inline-block;
}
​ 
```

```
/* Constants */

// Colors
var EMPTY_COLOR = "000000";
var GROUND_COLOR = "663300";
var STONE_COLOR = "33FF33";
var PLAYER_COLOR = "66CCFF";
var TARGET_COLOR = "FFFFFF";

// Size in pixels
var BLOCK_HEIGHT = "20";
var BLOCK_WIDTH = "20";

// Map's grid size in Blocks
var MAP_WIDTH = 42;
var MAP_HEIGHT = 22;

// Element the map will be drawed on
var MAP_ID = "Map";

/* END Contants */

/* Helpers */

String.prototype.repeat = function (times) {
    return (new Array(times + 1)).join(this);
}

function Point2D(r, c) {
    this.Row = r;
    this.Col = c;
}

function Color(hex) {
    this.Color = '#' + hex;
}

var CreateType = {
    Ground: function () { return new Ground(); },
    Target: function () { return new Target(); },
    Stone: function () { return new Stone(); },
    Player: function () { return new Player(); }
};

// [0] = GROUND, [1] = TARGET, [2] = STONE, [3] = PLAYER
var CreateTypeByDigit = [
    CreateType.Ground,
    CreateType.Target,
    CreateType.Stone,
    CreateType.Player,
];

var Direction = {
    Left: new Point2D(-1, 0),
    Right: new Point2D(1, 0),
    Up: new Point2D(0, 1),
    Down: new Point2D(0, -1)
};

/* END Helpers */

/* Main Objects */

function Map() {
    this.Blocks = null;
    this.HTML_Element = null;

    this.map_string = "0".repeat(MAP_HEIGHT * MAP_WIDTH);

    this.createAt = function (r, c, elem) {
        var cell = document.createElement('div');

        this.Blocks[r][c] = CreateTypeByDigit[parseInt(this.map_string[r * MAP_HEIGHT + c])];
        this.Blocks[r][c].HTML_Element = b;
        this.Blocks[r][c].Position = new Point2D(r, c);

        elem.appendChild(cell);
    };

    this.Create = function () {
        alert('WE DID IT');

        this.Blocks = new Array(MAP_HEIGHT);
        for (var r = 0; r < MAP_HEIGHT; r++) {
            this.Blocks[r] = new Array(MAP_WIDTH);
        }

        alert('WE DID IT');

        this.HTML_Element = document.getElementById(MAP_ID);
        if (this.HTML_Element == null)
            alert('Was unable to find the map element');

        for (var r = 0; r < MAP_HEIGHT; r++) {
            for (var c = 0; c < MAP_WIDTH; c++) {
                this.createAt(r, c, this.HTML_Element);
            }
        }
    };
}

function AbstractBlock() {
    // Instance variables
    var Position;
    var Color;
    var HTML_Element;

    // Static variables
    AbstractBlock.Width = BLOCK_WIDTH;
    AbstractBlock.Height = BLOCK_HEIGHT;
}

function Ground() {
    // Inherit AbstractBlock
    AbstractBlock.apply(this, arguments);

    // Define the color of this block
    this.Color = new Color(GROUND_COLOR);
}

function Target() {
    // Inherit Ground
    Ground.apply(this, arguments);

    // Define the color of this block
    this.Color = new Color(TARGET_COLOR);
}

function Stone() {
    // Inherit AbstractBlock
    AbstractBlock.apply(this, arguments);

    // Define the color of this block
    this.Color = new Color(STONE_COLOR);
}

function Player() {
    // Inherit AbstractBlock
    AbstractBlock.apply(this, arguments);

    // Define the color of this block
    this.Color = new Color(PLAYER_COLOR);

    // Move player, while switching it's last position
    this.MovePlayer = function (x2, y2) {
        var r = this.Position.Row;
        var c = this.Position.Col;

        Blocks[r, c] = Blocks[r + y2, c + x2];
        Blocks[r, c].ApplyStyle();

        r += x2;
        c += y2;

        Blocks[r, c] = this;
        Blocks[r, c].ApplyStyle();
    };

    // Check if a move is valid. If so, execute it.
    this.Move = function (dir) {
        var r = this.Position.Row;
        var c = this.Position.Col;

        if (Map.Blocks[r + dir.Row][c + dir.Col] instanceof Ground)
        {
            this.Move(dir.Col, 0);
        }
        else if (Map.Blocks[r + dir.Row][c + dir.Col] instanceof Stone && Map.Blocks[r + dir.Row * 2][c + dir.Col * 2] instanceof Ground)
        {
            this.MovePlayer(dir.Row, dir.Col);
            Blocks[r + dir.Row][c + dir.Col].Move(dir.Row, dir.Col);
        }
    };

    this.MoveLeft = function () { Move(Direction.Left); };
    this.MoveRight = function () { Move(Direction.Right); };
    this.MoveUp = function () { Move(Direction.Up); };
    this.MoveDown = function () { Move(Direction.MoveDown); };

    function ApplyStyle(mapInstance) {
        mapInstance.ApplyStyle(this.Position.X, this.Position.Y, PLAYER_COLOR);
    }
}

function Map() {
    this.Blocks = null;
    this.HTML_Element = null;

    this.map_string = "0".repeat(MAP_HEIGHT * MAP_WIDTH);

    this.createAt = function (r, c, elem) {
        var cell = document.createElement('div');

        this.Blocks[r][c] = CreateTypeByDigit[parseInt(this.map_string[r * MAP_HEIGHT + c])];
        this.Blocks[r][c].HTML_Element = b;
        this.Blocks[r][c].Position = new Point2D(r, c);

        elem.appendChild(cell);
    };

    this.Create = function () {
        this.Blocks = new Array(MAP_HEIGHT);
        for (var i = 0; i < MAP_HEIGHT; i++) {
            this.Blocks[i] = new Array(MAP_WIDTH);
        }

        this.HTML_Element = document.getElementById(MAP_ID);
        if (this.HTML_Element == null)
            alert('Was unable to find the map element');

        for (var r = 0; i < MAP_HEIGHT; i++) {
            for (var c = 0; j < MAP_WIDTH; j++) {
                this.createAt(r, c, this.HTML_Element);
            }
        }
    };
}

function AbstractBlock() {
    // Instance variables
    var Position;
    var Color;
    var HTML_Element;

    // Static variables
    AbstractBlock.Width = BLOCK_WIDTH;
    AbstractBlock.Height = BLOCK_HEIGHT;
}

function Ground() {
    // Inherit AbstractBlock
    AbstractBlock.apply(this, arguments);

    // Define the color of this block
    this.Color = new Color(GROUND_COLOR);
}

function Target() {
    // Inherit Ground
    Ground.apply(this, arguments);

    // Define the color of this block
    this.Color = new Color(TARGET_COLOR);
}

function Stone() {
    // Inherit AbstractBlock
    AbstractBlock.apply(this, arguments);

    // Define the color of this block
    this.Color = new Color(STONE_COLOR);
}

function Player() {
    // Inherit AbstractBlock
    AbstractBlock.apply(this, arguments);

    // Define the color of this block
    this.Color = new Color(PLAYER_COLOR);

    // Move player, while switching it's last position
    this.MovePlayer = function (x2, y2) {
        var r = this.Position.Row;
        var c = this.Position.Col;

        Blocks[r, c] = Blocks[r + y2, c + x2];
        Blocks[r, c].ApplyStyle();

        r += x2;
        c += y2;

        Blocks[r, c] = this;
        Blocks[r, c].ApplyStyle();
    };

    // Check if a move is valid. If so, execute it.
    this.Move = function (dir) {
        var r = this.Position.Row;
        var c = this.Position.Col;

        if (Map.Blocks[r + dir.Row][c + dir.Col] instanceof Ground) {
            this.Move(dir.Col, 0);
        }
        else if (Map.Blocks[r + dir.Row][c + dir.Col] instanceof Stone && Map.Blocks[r + dir.Row * 2][c + dir.Col * 2] instanceof Ground) {
            this.MovePlayer(dir.Row, dir.Col);
            Blocks[r + dir.Row][c + dir.Col].Move(dir.Row, dir.Col);
        }
    };

    this.MoveLeft = function () { Move(Direction.Left); };
    this.MoveRight = function () { Move(Direction.Right); };
    this.MoveUp = function () { Move(Direction.Up); };
    this.MoveDown = function () { Move(Direction.MoveDown); };

    function ApplyStyle(mapInstance) {
        mapInstance.ApplyStyle(this.Position.X, this.Position.Y, PLAYER_COLOR);
    }
}

/* Main Script */

function Game() {
    this.oMap = null;
    this.oSettings = null;
    this.oPlayer = null;

    this.ToString = "Game";

    this.Init = function () {
        this.oMap = new Map();
        this.oMap.Create();
        this.Log('Map Initialized');

        this.oSettings = new Settings();
        this.oPlayer = new Player();
    };

    this.Start = function () {
        this.SetSettings();
        this.Log('Controls are binded');       
    };

    this.SetSettings = function () {
        this.oSettings.Add(37, this.oPlayer.MoveLeft);
        this.oSettings.Add(39, this.oPlayer.MoveRight);
        this.oSettings.Add(38, this.oPlayer.MoveUp);
        this.oSettings.Add(40, this.oPlayer.MoveDown);

        document.onkeypress = function (e) {
            this.oSettings.Binds[e.keyCode] && this.oSettings.Binds[e.keyCode]();
        }
    };

    this.UpdateStats = function () {

    };

    this.Log = function (msg) {
        console.log(this.ToString + ': ' + msg);
    };
}

function Settings() {
    this.Binds = {};

    this.Add = function (keycode, callback) {
        this.Binds[keycode] = callback;
    };
}

window.log = console.log.bind(console);

window.onload = function () {
    var g = new Game();
    g.Init();
    g.Start();
};

​ 
```

以上是我尝试过的链接。该脚本开始（在底部）声明一个`Game`对象，然后调用它`Init`和`Start`函数。

出于某种原因，当我调用`this.oMap.Create()`它时，它什么也不做。没有错误出现。我在代码周围使用了警报和 console.log，但没有任何帮助。

为什么不`this.oMap.Create()`执行？

有没有更好的方法来搜索错误，而不是在整个脚本上植入警报（如分析器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:15:49.133

你有两个问题：

1.  您有**两个**称为“地图”的功能。
2.  您的代码在 jsfiddle 中作为窗口的“加载”处理程序运行。因此，通过设置“加载”处理程序使其工作会导致问题。

所以更改“Map”函数的名称之一（目前只有第二个重要）并将小提琴设置更改为“no wrap（head）”或“no wrap（body）”。

# android - Android - HTTP GET 自签名

> ID：13686047
> 
> 赞同：-2
> 
> 时间：2012-12-03T15:10:31.743
> 
> 标签：android, http, ssl, get, self-signed

> **可能重复：**
> [如何接受带有 Java HttpsURLConnection 的自签名证书？](https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection)

我已经设置了一个 HTTP GET。

代码如下：

```
public class GetMethodEx {

public String getInternetData() throws Exception{       

        BufferedReader in = null;
        String data = null;
        try
        {
            HttpClient client = new DefaultHttpClient();
            URI website = new URI("http://www.google.com");
            HttpGet request = new HttpGet();
            request.setURI(website);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while ((l = in.readLine()) !=null){
                sb.append(l + nl);
            }
            in.close();
            data = sb.toString();
            return data;        
        } finally{
            if (in != null){
                try{
                    in.close();
                    return data;
                }catch (Exception e){
                    e.printStackTrace();
                }
            }
        }
} 
```

}

该代码允许我检索我假设签名证书的任何 http 网站。

但是，当我尝试从我的自签名服务器检索请求时。我没有得到回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:15:30.287

要恢复，您可以使用这两个答案之一，这将解决您的问题：

*   [Android 上的自签名 SSL 接受](https://stackoverflow.com/questions/1217141/self-signed-ssl-acceptance-android)

*   [如何在特定连接上使用不同的证书？](https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection)（感谢 Warpzit ）

解决您的问题很容易。

# c# - 将值保存/加载到数组中的优雅方式

> ID：13686050
> 
> 赞同：0
> 
> 时间：2012-12-03T15:10:50.527
> 
> 标签：c#, .net, arrays

我基本上是将值保存并加载到数组中以输入 JSON 库，我只是在寻找一种更优雅的方法来执行此操作：

**类属性到数组**

```
 return new object[] { path, pathDir, name }; 
```

**数组到类属性**

```
c.path = values[0];
c.pathDir = values[1];
c.name = values[2]; 
```

理想情况下不需要额外运行时开销（例如反射）的简单解决方案值得赞赏。

我可以做这样的事情吗？

```
 c.{path, pathDir, name} = values[0...2] 
```

**编辑：**我特别要求数组。我知道序列化、JSON 和 Protobuf 以及其他所有人的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:21:47.267

这不是诀窍吗？

```
return  new {path= "/Some/Path", pathDir= "SiteRoot", name="MyPath"} 
```

编辑：

```
 //Mock function to simulate creating 5 objects with 'CreateArrayOb' function
        public void CreatingObjects()
        {
            var lst = new List<object>();
            for (var x = 0; x < 5; x++)
            {
                lst.Add(CreateArrayOb(new string[] {"Path" + x, "Dir" + x, "Path" + x}));
            }
        }
        public object CreateArrayOb(object[] vals)
        {
            if (vals != null && vals.Any())
            {
                //Switch cases in the event that you would like to alter the object type returned
                //based on the number of parameters sent
                switch (vals.Count())
                {
                    case 0:
                        break;
                    case 1:
                        break;
                    case 2:
                        break;
                    case 3:
                        return new { path = vals.ElementAt(0), pathDir = vals.ElementAt(1), name = vals.ElementAt(2) };
                }

            }
            return null;
        } 
```

# django - django modelform 和其他字段及其顺序

> ID：13686052
> 
> 赞同：1
> 
> 时间：2012-12-03T15:11:07.560
> 
> 标签：django, django-forms, modelform

我有一个模型表单，我为它的表单创建了额外的字段（模型中不存在）。

[我知道您可以像文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#changing-the-order-of-fields)中所说的那样重新排序模型表单中的字段。

但问题是 - 我希望在其他字段之前呈现附加字段。

是否可以在渲染之前以某种方式重新排序表单的字段？表单对象如何跟踪其字段的顺序？

艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:23:32.527

不管。看来我已经找到了答案，这似乎可以解决问题，因为我添加了 2 个附加字段：

```
 def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)

        self.build_fields()
        l = len(self.fields.keyOrder)
        for i in range(0,2):
            f = self.fields.keyOrder[l-1]
            self.fields.keyOrder.pop(l-1)
            self.fields.keyOrder.insert(0, f) 
```

以上是我最初的修复。后来我发现它不再切割了。然后我这样做了：

```
class AlertForm(forms.ModelForm):
    class Meta:
        model = Message
        fields = model_fields

    def __init__(self, *args, **kwargs):
        super(AlertForm, self).__init__(*args, **kwargs)

        self.build_fields()
        newKeyOrder = []
        newKeyOrder.append('field_that_had_to_be_first')
        if typechange:
            newKeyOrder.append('field_thats_sometimes_necessary')
        newKeyOrder += model_fields 
        self.fields.keyOrder = newKeyOrder 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-14T21:40:06.400

上面的解决方案不再适用于 django 2（我不知道从什么时候开始）......

但是现在，ModelForm 上有一个有序的 dict fields 属性，我们可以使用它来重新排序字段......

```
class MyForm(forms.ModelForm):
    class Meta:
        fields = ['model_field1', 'model_field2']
        model = MyModel
    extra_field = forms.CharField()
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        for k in self._meta.fields:
            self.fields.move_to_end(k) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T15:24:21.143

[ModelForm 的 Meta 类](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)的 fields 属性定义了要显示的字段和顺序。

> 使用 ModelForm 的内部 Meta 类的 fields 属性。此属性（如果给定）应该是要包含在表单中的字段名称列表。当表单呈现它们时，会遵循在该列表中指定字段名称的顺序。

# opencv - crtmp 无法读取数据 tcpcarrier.cpp 错误

> ID：13686053
> 
> 赞同：0
> 
> 时间：2012-12-03T15:11:08.173
> 
> 标签：opencv, ubuntu-12.04, gstreamer, rtmpd

我有 apache2 监听端口 808 而不是端口 80 或 8080 的服务器。我有一个 flash 程序，它从客户端的网络摄像头生成视频流，并使用 rtmp 协议（如“rtmp:///flvplayback/”）将其发送到 IP 地址的服务器"

它将流发布到该 IP 地址

1 ) 在本地机器上，字符串看起来像

"rtmp://192.168.1.12/flvplayback/"

并且工作正常。

2）在远程机器上，即VPS，字符串看起来像

“rtmp://222.222.222.222/flvplayback/”

并在这里生成以下错误

（在 VPS 上运行的 crtmpserver 产生此错误） .... /tcpcarrier.cpp:78 无法读取数据。111.111.111.111:33984 -> 222.222.222.222:1935 ....

我不确定为什么会生成此错误....我正在使用来自站点 rtmpd.com 下载部分的 ubuntu12.04 crtmpserverr 构建相同的构建在我的本地计算机上完全可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:42:59.723

我认为您应该按照此处的步骤操作：[http](http://wiki.rtmpd.com/quickbuild) ://wiki.rtmpd.com/quickbuild 该站点上的构建非常旧。来源要新得多

你也可以提供一些日志文件吗？我不记得确切...您是否也将这个问题放在 crtmpserver 的邮件列表中？

最好的问候，安德烈

# javascript - 如何将 Jquery 链接应用于多个父方法

> ID：13686067
> 
> 赞同：2
> 
> 时间：2012-12-03T15:12:15.203
> 
> 标签：javascript, jquery

需要根据级别和学期选择器值过滤课程详细信息..我们尝试使用[链接到多个父母](http://www.appelsiini.net/2010/jquery-chained-selects)

（一个孩子也可以有两个父母。链接到多个父母的孩子的可用选项取决于父母选择的一个或两个值）

这里我们尝试的代码（删除所有链式选择代码，以获得清晰的想法）

```
<html>
    <head>
    <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="jquery.chained.js"></script>

    </head>
    <body>

    <select name="level" id="level_id">
                 <option value="level-1">Level 1</option>
                 <option value="level-2">Level 2</option>
                 <option value="level-3">Level 3</option>
    </select>

    <select name="semester" id="semester_id">
                 <option value="semester-1">Semester 1</option>
                 <option value="semester-2">Semester 2</option>
     </select>

     <select name="course" id="course_id">
                 <option value="1">Multimedia</option>
                 <option value="10">Botany Practicals II</option>
                 <option value="9">Genetics</option>
                 <option value="4">Plant Diversity Unity & Evolution</option>
                 <option value="6">Plant Anatomy</option>
                 <option value="5">Scientific Approach & Biometrics</option>
                 <option value="11">Advanced Ecology</option>
                 <option value="12">Advanced Plant Pathology </option>
                 <option value="7">Advanced Microbiology</option>
                 <option value="8">Economic Botany</option>
                 <option value="13">Cropping System</option>
                 <option value="14">Food Technology</option>
     </select>

    </body>
    </html> 
```

这里将如何根据级别和学期过滤课程 ![在此处输入图像描述](../Images/a30fd410e846d1cfed3184b8711dae2c.png)

但无法理解如何应用该代码。请帮助我们..

jQuery 代码：[jQuery](http://www.appelsiini.net/download/jquery.chained.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:15:27.207

您应该将选择与他们的 id 联系起来

```
$("#course_id").chained("#level_id, #semester_id"); 
```

* * *

**编辑：**添加了一个测试小提琴：http: [//jsfiddle.net/scaillerie/VwuvY/](http://jsfiddle.net/scaillerie/VwuvY/)。

**编辑 2：**为了获得前面 2 个列表的过滤器，该类应由以 a 分隔的 2 个值组成`\`（例如，对于第一学期和第一级，该类应为`level-1\semester-1`. 更新小提琴：[http://jsfiddle .net/scaillerie/VwuvY/1](http://jsfiddle.net/scaillerie/VwuvY/1)。

# regex - Wordpress 重写规则

> ID：13686069
> 
> 赞同：3
> 
> 时间：2012-12-03T15:12:34.587
> 
> 标签：regex, wordpress, url, permalinks

**更新**

我已经浏览了 rewrite API 上的 codex 文档，现在我的 functions.php 中有以下内容：

```
function my_rewrite_rules() {
    add_rewrite_rule('(a|b|c|d)/?$', 'index.php?pagename=$matches[1]-overview&myVar=var', 'top');
}
add_action('init', 'my_rewrite_rules'); 
```

是的，我会在调整后去永久链接页面刷新规则。行为是相同的，404s 以上的规则，即使页面确实存在，我可以通过直接在地址栏中输入来访问它。但是，如果我像这样对其中一个正则表达式匹配项进行硬编码：

```
function my_rewrite_rules() {
    add_rewrite_rule('(a|b|c|d)/?$', 'index.php?pagename=a-overview&myVar=var', 'top');
}
add_action('init', 'my_rewrite_rules'); 
```

然后一切都按预期工作，查询变量设置正确。想法？

* * *

**原始问题**

我一直在尝试让 Wordpress 重写规则工作很长一段时间，并且对于为什么以下代码（在 functions.php 中）不起作用感到非常困惑：

```
function my_rewrite_rules($rules) {
    $my_rules = array('(a|b|c|d)/?$' => 'index.php?pagename=$matches[1]-overview&my_var=somevar');

    return array_merge($my_rules, $rules);
}
add_filter('page_rewrite_rules', 'my_rewrite_rules'); 
```

我禁用了规范重定向，并且仅重写 40​​4s。如果启用了重定向，它确实会转到正确的页面，但我的查询变量被剥离。如果我删除 '$matches[1]' 并将其替换为 a、b、c 或 d，则在禁用规范重定向的情况下一切正常。我意识到有一些解决方法，但我只想了解为什么以下方法不起作用？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:57:30.780

在 Wordpress 的 url_to_post() 函数中，显然在 pagename 查询变量之后直接具有 $matches 变量被视为一种特殊情况。这是该代码的一个[片段](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/rewrite.php#L0)：

```
if ( $wp_rewrite->use_verbose_page_rules && preg_match( '/pagename=\$matches\[([0-9]+)\]/', $query, $varmatch ) ) {
    // this is a verbose page match, lets check to be sure about it
    if ( ! get_page_by_path( $matches[ $varmatch[1] ] ) )
        continue;
} 
```

如果我正确阅读，似乎 Wordpress 假设（错误地） $matches 变量应该与页面路径匹配。因此，在您的示例中，如果您没有名为`a`,的页面`b`，`c`或者`d`您的重写规则将被完全跳过（将调用 continue ）。

我从阅读 Wordpress 代码中推断出这一点，但我没有测试过我的理论（我实际上从未使用过 Wordpress）。`a`您可以通过创建一个名称为 、`b`、`c`和 的页面来测试我的理论，然后`d`再次运行您的代码。如果我是正确的，这应该使您的规则起作用。我建议不要`-overview`在您的页面名称后面使用，从而解决问题。

# haskell - 模式匹配失败

> ID：13686078
> 
> 赞同：0
> 
> 时间：2012-12-03T15:12:58.733
> 
> 标签：haskell, hugs

还是我只是瞎了眼？

非常简单的函数，抛出“模式匹配失败：get_rtg db”

```
type Movie       = (Title,Regisseur,MainActors,ReleaseDate,Genre,SalesPrice)
type Title       = String
type Regisseur   = String
type Actor       = String
type MainActors  = [Actor]
type ReleaseDate = Int
data Genre       = Thriller | Fantasy | ScienceFiction | Comedy deriving (Eq,Ord,Show)
type SalesPrice  = Int
type Database    = [Movie]

-- gets all entrys which have a Regisseur, who is in MainActors at the same time
get_rtg :: Database -> [(Regisseur,Title,Genre)]
get_rtg []                             = []
ger_rtg ((ti,reg,acts,rel,gen,sal):xs) = if (isInfixOf [reg] acts) then ([(reg,ti,gen)] ++ (get_rtg xs)) else (get_rtg xs) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:39:18.517

我想这只是一个错字：`ger_rtg`在最后一行声明了一个新函数，所以`get_rtg`现在在非 [] 情况下不能进行模式匹配。

另外，我会`filter`用来做这个操作：

```
get_rtg = filter (\(_,reg,acts,_,_,_) -> reg `elem` acts) 
```

# c# - 使用 P/Invoke 从 C# 调用 C 函数

> ID：13686080
> 
> 赞同：1
> 
> 时间：2012-12-03T15:13:11.707
> 
> 标签：c#, .net, visual-c++, pinvoke

我有一个 C 函数，它是 VS 2010 项目的一部分，具有以下签名：

```
real_T wrapper(void) 
```

在哪里

```
typedef double real_T; 
```

在我的 C# 代码中，我尝试这样做：

```
[DllImport(@"C:\Users\bla\Documents\Visual Studio 2010\Projects\bla\bla\Debug\bladibla.dll")]
public static extern double wrapper();

static void Main(string[] args)
{
    wrapper();
} 
```

但得到：

无法在 DLL 'C:\Users\bla\Documents\Visual Studio 2010\Projects\bla\bla\Debug\bladibla.dll' 中找到名为 'wrapper' 的入口点。

dll肯定在那里。还有什么可能是错的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:18:37.777

可能正在使用损坏的名称导出该函数。您可以像这样抑制重整：

```
extern "C" {
    real_T wrapper(void);
} 
```

您显然也没有导出该功能。简单的方法是这样的：

```
extern "C" {
    __declspec(dllexport) real_T wrapper(void);
} 
```

如果仍然无法解决丢失的导出问题，请使用 Dependency Walker 之类的工具来检查函数是否实际上正在导出，如果是，则以什么名称导出。

最后，您应该将 C# 端的调用约定声明为 cdecl 以匹配您的本机函数的调用约定。

```
[DllImport(@"...", CallingConvention=CallingConvention.Cdecl)]
public static extern double wrapper(); 
```

# cordova - PhoneGap ChildBrowser 和 Foursquare

> ID：13686081
> 
> 赞同：4
> 
> 时间：2012-12-03T15:13:14.470
> 
> 标签：cordova, foursquare, phonegap-plugins

我正在使用phonegap 开发一个应用程序。我想在我的应用程序中集成foursquare。如何存储和检索foursquare 的access_token 以在我的应用程序中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T20:49:52.027

[当我快速查看foursquare文档时，使用javascript和oauth js](http://oauth.googlecode.com/svn/code/javascript/)库检索令牌看起来很容易。只需查看[文档](https://developer.foursquare.com/overview/auth)和[教程](https://developer.foursquare.com/overview/tutorial)。

要将数据存储在应用程序中，您可以使用[localStorage](http://diveintohtml5.info/storage.html)轻松完成。

如果您使用服务器端解决方案来处理您的 api 调用。您可以将令牌保存到会话中，然后只需执行一个 ajax 请求即可返回会话内容。（然后再次使用 localStorage ......）

# android - 表视图未正确显示 SeekBar Android

> ID：13686084
> 
> 赞同：0
> 
> 时间：2012-12-03T15:13:33.453
> 
> 标签：android, xml, android-layout

我无法让我的 SeekBar 填写我的表格视图。

这就是它的样子：

![表视图](../Images/e263f77ed69630851b2c4e22361ce85b.png)

我的代码：

```
 <TableRow
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >
                <TextView
                    android:id="@+id/tvneg7"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="e" />

                <SeekBar
                    android:id="@+id/totalE"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:max="5" />

                <TextView
                    android:id="@+id/tvneg8"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="0"/>
            </TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:52:29.547

我添加了

```
 android:layout_weight="1" 
```

它修复了它

# javascript - 带有 setTimeOut 的 Javascript 流控制

> ID：13686085
> 
> 赞同：2
> 
> 时间：2012-12-03T15:13:37.353
> 
> 标签：javascript, controls, settimeout, flow

这是“为什么这行得通”而不是“为什么这行不通？” movePic 函数更新几个图像的坐标，并根据需要更改图像，然后调用 setTimeOut(movePic, delay)。所以 movePic 函数在 mnovePic 函数中被调用。

1.  为什么这不会在函数内部进行函数的无限递归？

2.  如果 #1 的答案是当 setTimeOut 调用 movePic 时，它也首先脱离了 movePic，那么在 setTimeOut 之后的图像的实际移动是如何执行的？

完整页面位于[www.salemharvest.org](http://www.salemharvest.org)。功能是：

```
function movePic ()  {
left1 += movement;
left2 += movement;
if (left1 > 500)  { //  photo1 disappears over right edge
  left1 = -510; // photo1 goes to  500 left of window
  left2=-510;  // photo2 goes to START of window 
  j=j+1;
  if (j > (p - 1)) j = 0;
  document.images.animated1.src = preLoad[j].src; // switches to photo
  }
else if (left1==0)  { // photo1 fully in window
  left2 =-1010; // photo2 goes to 510 ABSOLUTE to left of window
  j=j+1;
  if (j > (p - 1)) j = 0; 
  document.images.animated2.src = preLoad[j].src; // switches the photo
  }
setTimeout (movePic, delay);
photo1.style.left = left1 + "px"; 
photo2.style.left = left2 + "px"; 
} // end of movePic function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:14:49.937

`setTimeout`安排函数**稍后**调用。它不影响，实际上与当前调用堆栈中执行的代码无关。

当`setTimeout`回调运行时，之前的调用已经完成；它不在调用堆栈上。

因此，您不会遇到堆栈溢出。

# android - 带有 setImageDrawable 的 ImageButton LayoutProblem

> ID：13686089
> 
> 赞同：0
> 
> 时间：2012-12-03T15:14:03.700
> 
> 标签：android, android-layout, android-button, android-image

我正在尝试在运行时设置 ImageButton 的图像。它应该填充屏幕的宽度并使用正确缩放所需的高度空间。

ImageButton 声明如下：

```
 <ImageButton
        android:id="@+id/map_plan_topview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:onClick="onMapImageClicked"
        android:background="#0000"
        android:scaleType="fitXY" /> 
```

现在我正在尝试使用以下方式设置图像：

```
 ImageButton topView = (ImageButton) findViewById(R.id.map_plan_topview);
        Drawable d = Drawable.createFromPath(path);
        topView.setImageDrawable(d); 
```

图像宽度使用 fill_parent 缩放，但高度未正确拉伸。如果我 `topView.setImageResource(R.drawable.button_where_citymap);`改用，一切正常，但我确实想在运行时从文件路径设置源。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:26:50.200

`fitXY` stretches the image without respecting proportions. If proportions matter, then use `center_crop`, or `center_inside`

You can set the `ScaleType` in code as well:

```
ImageButton topView = (ImageButton) findViewById(R.id.map_plan_topview);
Drawable d = Drawable.createFromPath(path);
topView.setScaleType(ScaleType.CENTER_CROP);
topView.setImageDrawable(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T05:57:45.103

您应该使用“ `SetImageResource`”代替“ `setImage Drawable`”...！

# java - 使用 SOLR 4.0 索引许多表，然后在查询期间加入它们？

> ID：13686090
> 
> 赞同：2
> 
> 时间：2012-12-03T15:14:12.737
> 
> 标签：java, sql, solr, lucene

如果表不相互关联，如何索引 SOLR 4.x（或更高版本）中的许多表？

或者这种方法是错误的？

例如，如果我有关于

```
tableShop
tableProduct
tableBook
tableWhatever 
```

`Shop`，`Product`并且`Book`相互关联，但`tableWhatever`不关联，但我也需要对其进行索引。

或者也许有些书`tableBook`没有分配到任何一行`tableShop`，我怎样才能用 SOLR 索引它们？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:52:15.723

这完全取决于您的商业模式。使用最新版本的 solr，您可以使用核心来分隔具有不同架构的文档。但是，文档的构成通常取决于您对实体的看法以及在该实体上的搜索方式。

在您的情况下，您可以将每个表建模为文档，并单独查询集合。如果您必须查询哪些书没有分配给它们的商店，则必须对表进行非规范化并创建一个不同的模式来组合两个表中的实体。（或 n 个表）。Solr 4.0 允许加入，但正因为如此，不要采取将关系数据库模式直接建模到 solr 模式的路线

# objective-c - 比较 ParentViewController

> ID：13686105
> 
> 赞同：0
> 
> 时间：2012-12-03T15:14:56.167
> 
> 标签：objective-c, uiviewcontroller, viewcontroller

我想根据视图的来源（因此取决于 parentViewController）更改视图上的标题文本。

有没有办法说：如果父视图控制器是viewControllerX？

现在我已经向 viewControllerX 添加了一个协议，我正在做

```
if ([self.parentViewController confromsToProcol:@protocol(vcX)]) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:25:01.910

如果您谈论的是同一类的 ViewController 实例，您可以向该类添加一个属性（例如“myInstanceName”并为每个实例设置不同的值。

```
#define kInstanceNameFoo @"myInstanceFoo"

FooClassName *pvc = (FooClassName *)self.parentViewController;
if (pvc.myInstanceName == kInstanceNameFoo) { 
```

如果 ViewControllers 实际上是不同的类，您可以使用“类”属性进行比较。

```
if (self.parentViewController.class == [FooClassName class]) { 
```

# ruby-on-rails-3 - Rails 中的 simple_format 助手是否足以防止 xss？

> ID：13686106
> 
> 赞同：2
> 
> 时间：2012-12-03T15:14:57.057
> 
> 标签：ruby-on-rails-3, xss, html-sanitizing

我阅读并测试了`simple_format`允许某些 html 标签。

是否足够安全以再次保护 xss？（假设我不介意用户将 html 放在使他们的文本漂亮）这会导致 xss 吗？还是我应该坚持`h`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-05T17:29:12.777

看起来 Rails 4.0.0 和 4.0.1 中存在一个漏洞，现在已经解决，所以它应该是安全的。这是该问题的链接：[https ://groups.google.com/forum/#!topic/ruby-security-ann/5ZI1-H5OoIM](https://groups.google.com/forum/#!topic/ruby-security-ann/5ZI1-H5OoIM)

# c++ - 在绘制循环中绘制精灵

> ID：13686108
> 
> 赞同：1
> 
> 时间：2012-12-03T15:14:59.717
> 
> 标签：c++, sprite, textures, draw, sfml

有一个问题，当我试图在绘图循环中绘制一个精灵时，它不会绘制在这个类的构造函数中，我正在设置精灵。

构造函数我有：

```
texture.loadFromFile("img1.png");
sprite.setTexture(texture); 
```

精灵和纹理在头文件中

我做了一些实验，如果我`texture.loadFromFile();`在绘图循环中使用它就可以了。但随后我必须每秒“重新加载”图片 60 次。

```
void PlayerReceiver::draw(sf::RenderWindow & rw){
        //texture.loadFromFile("mario.png");

        //std::cout<<texture.getSize().y<<std::endl;

            rw.draw(sprite);

    } 
```

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-28T00:21:04.977

> 有一个问题，当我试图在绘图循环中绘制一个精灵时，它不会绘制在这个类的构造函数中，我正在设置精灵。

根据我从这个问题的理解，您想在构造函数中加载纹理和精灵，当您尝试从绘制循环中绘制它时它不起作用。

我有一个在构造函数中加载纹理的程序，它运行良好，所以我认为是错误的（我不确定，因为我在上面的帖子中没有看到你的程序的六行）是纹理和 sprite 对象不是在类级别上定义的。

这是我正在使用的纹理对象的头文件：

```
class GraphPaper
{
    public:
        GraphPaper();
        ~GraphPaper();
        bool isObjectLoaded();
        sf::Sprite getSprite();

    private:
        void load(std::string filename);
        bool isLoaded;

        sf::Texture texture;
        sf::Sprite sprite;

        const std::string file = "images/Graph-Paper.png";
}; 
```

纹理和精灵对象作为私有成员在类范围级别上列出，并通过 getter 方法访问。

这是该类的构造函数（稍作改动以更好地匹配您想要完成的操作）：

```
#include "GraphPaper.h"

GraphPaper::GraphPaper() //: isLoaded(false)
{
    if (texture.loadFromFile(file) == false)
        isLoaded = false;
    else
    {
        texture.setRepeated(true);
        sprite.setTexture(texture);
        isLoaded = true;
    }
    //load(file);
    assert(isObjectLoaded());
} 
```

在此之后，我只需绘制我的“GraphPaper”对象。

```
mainWindow.draw(paper.getSprite()); 
```

我已经可以访问它，因为我在 MainWindow 头文件中定义了一个名为“paper”的“GraphPaper”对象。

```
#pragma once
#include "GraphPaper.h"
#include "stdafx.h"

class MainWindow
{
    public:
         void close();
         void start();
         void moveCamera(sf::Event);

    private:
        bool leftMousePressed, rightMousePressed, isExiting;
        int r, g, b, mouseX, mouseY;

        GraphPaper paper;

        const sf::Color white = sf::Color(255, 255, 255);

        sf::RenderWindow mainWindow;
        sf::View view;
}; 
```

假设这是您想要做的，那么您的问题可能出在头文件中。在类级别上定义的任何对象，一旦加载，在类本身被销毁之前都不会被销毁。也许您需要确保不会破坏对构造函数所在类的引用。例如，如果您在循环中创建类的实例，则循环结束的那一刻类对象将被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:43:30.797

只是一个假设：您的构造函数中有这个：

```
PlayerReceiver::PlayerReceiver()
{
    sf::Texture texture;
    texture.loadFromFile("img1.png");
    sprite.setTexture(texture);
} 
```

这样纹理对象在构造函数结束后立即被销毁。the`sprite`和 the都`texture`必须是该类的成员，以便在玩家本身被销毁之前它们不会被销毁。

如果这不是您的问题，请发布更多代码。

# android - 我们如何在不同的条件下为同一个 TextView 分配不同的颜色，比如在 android 中的 if...else

> ID：13686109
> 
> 赞同：0
> 
> 时间：2012-12-03T15:15:00.710
> 
> 标签：android, android-layout, android-widget

在我的android应用程序中..用户使用EditText输入了一个数字..我的应用程序告诉我这个数字是TextView中的整数还是浮点类型的数字..！我面临的问题是，我想以红色显示整数类型数的 TextView 和浮点数的绿色 .. 这应该是什么代码。

我想要的 if..else 条件代码是这样想象的：

```
TextView tv = (TextView) findViewById(R.id.my_text_view);
if (number= interger)
{
tv.setText("integer number");
// and the color of this TextView will be RED
}
else
{
tv.setText(Float number);
// and the color of this TextView will be GREEN
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:22:07.750

像这样的代码：

```
tv.setText(Html.fromHtml("<font color='red'>integer</font> is <font color='blue'>number</font>")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:28:07.743

这是资源中预定义颜色或定义颜色的示例 textview.setTextColor(this.getResources().getColor(R.color.orange));

# algorithm - 如何知道数字是否包含特定数字而不转换字符串？

> ID：13686112
> 
> 赞同：1
> 
> 时间：2012-12-03T15:15:11.753
> 
> 标签：algorithm, numbers

例如，我想在不转换字符串的情况下从 1 到 7000 查找包括 2,7 在内的数字。2 7 12 17 ... 20 21 22 23...7000 有没有好的数学算法？先感谢您...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:20:29.497

类似的东西

```
while ( n > 0 ) {
   digit = n % 10;
   // check the digit
   n = n / 10;
} 
```

以 523 为例

1.  在第一次迭代中，您将有 digit = 3 (123 % 10)
2.  在第二次迭代中，您将获得 digit = 2 (12 % 10)
3.  第三位数 = 5 (5 % 10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:37:41.840

考虑一下，如果您将 Matteo 的代码放在一个循环中，它就可以工作。顺便说一句，您可以跳过明显的数字来提高性能。

例如，如果您在 15783 这样的第三位上找到 7，您可以跳过所有 127XX（它们都是有效的！），您可以转到 15800

您也可以直接构建它们。从 1 到 7000，它们是：

```
xxx2 xxx7
xx2x xx7x
x2xx x7xx
2xxx 7000 
```

替换`x`为 0-9 位。（注意重叠，如 xxx2 = xx7x for 0072 或 0172 ...）

编辑：

提示：您不需要字符串来执行此操作。1332 == 1 * 10^3 + 3 * 10^2 + 3 * 10^1 + 2 * 10^0

# android - java.lang.ArrayIndexOutOfBoundsException com.google.android.maps

> ID：13686113
> 
> 赞同：2
> 
> 时间：2012-12-03T15:15:15.060
> 
> 标签：android, google-maps

我在使用 com.google.android.maps 的应用程序中收到此错误，消息是“不幸的是，该应用程序已停止。”

> 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) E/AndroidRuntime(3338): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) E/AndroidRuntime （3338）：在dalvik.system.NativeStart.main（本机方法）E/AndroidRuntime（3338）：引起：java.lang.ArrayIndexOutOfBoundsException：长度=0；索引=0
> 
> E/AndroidRuntime（3338）：在 com.google.android.maps.MapActivity.createMap（MapActivity.java:575）
> 
> E/AndroidRuntime（3338）：在 com.google.android.maps.MapActivity.onCreate（MapActivity.java:423）
> 
> E/AndroidRuntime（3338）：在 com.ee.map.MainActivity.onCreate（MainActivity.java:170）
> 
> E/AndroidRuntime（3338）：在 android.app.Activity.performCreate（Activity.java:5104）
> 
> E/AndroidRuntime（3338）：在 android.app.Instrumentation.callActivityOnCreate（Instrumentation.java:1080）
> 
> E/AndroidRuntime（3338）：在 android.app.ActivityThread.performLaunchActivity（ActivityThread.java:2144）
> 
> E/AndroidRuntime(3338): ... 11 更多

有没有人见过这样的错误，你知道是什么原因造成的吗？com.google.android.maps.MapActivity.createMap(MapActivity.java:575) 中有什么？

# java - Java DTO 是否应该为 BlazeDS 实现 Serializable

> ID：13686115
> 
> 赞同：0
> 
> 时间：2012-12-03T15:15:17.010
> 
> 标签：java, apache-flex, blazeds, serializable

在将 Java 数据对象映射到 Flex 值对象时，即使 Java 类没有实现 Serializable，代码也可以工作。

所以即使没有它代码也能工作，应该吗？当您希望使用 BlazeDS 进行映射时，确保所有数据对象类都实现 Serializable 是一种很好的做法。

实现 Serializable 有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:55:23.410

答案是不。Serializable 接口用于 Java 本机[序列化](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)。AMF 序列化与它没有任何共同之处，用于对 Flash 播放器数据进行序列化和反序列化。此外，您不会`Serializable`在 BlazeDS 文档中找到有关的任何信息。

您可以检查，AMF 是在[BlazeDS 库](http://opensource.adobe.com/svn//opensource/blazeds/trunk/modules/core/src/flex/messaging/io/amf/)中实现的。

# cuda - CUDA Parallel NSight 同时调试主机和设备

> ID：13686119
> 
> 赞同：0
> 
> 时间：2012-12-03T15:15:26.620
> 
> 标签：cuda, nsight

有谁知道是否可以在远程机器上使用并行 NSight 调试 CUDA？我可以进入 CUDA 代码，但不能进入我的主机代码。它说 CUDA 有能力生成主机调试信息，因此远程和本地调试应该是可能的。我的卡是580 GTX。

```
//device code <-- able to debug device code
//host code   <---- when device code returns, should be able to debug host code 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:33:18.077

遗憾的是，当前版本的 Nsight 和 Visual Studio 无法从单个 IDE 实例同时调试 GPU/CPU。

作为一种解决方法，您可以从 Visual Studio 的一个副本启动 GPU 调试，然后打开第二个 IDE 实例并附加其 CPU 调试器。他们不会有统一的步进，但你至少可以独立设置断点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T09:17:48.130

现在应该可以在同一个 VS 实例中附加 Visual Studio 默认调试器和 NSight。那么这应该工作。

# linq - LINQ to Objects - 使用 ToArray / ToList 优于 IEnumerable 的任何性能优势

> ID：13686123
> 
> 赞同：0
> 
> 时间：2012-12-03T15:15:29.200
> 
> 标签：linq, ienumerable, linq-to-objects

这几乎毫无疑问是一个愚蠢的问题。为我辩护，我病了。反正。

我有一个内存对象列表。我使用以下表达式从对象列表中提取出我感兴趣的字符串：

```
var myStrings = myListOfObjects.Select(r => r.MyString); 
```

这为我提供了一个 IEnumerable 字符串。myStrings 稍后将在我的代码中多次重复使用。我想知道的是，在使用之前对其执行 ToArray 或 ToList （即“贪婪”运算符）是否有任何性能优势？（所以我的操作将直接针对数组/列表。）

对于它的价值， myStrings 将在使用时全部重新使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:16:55.477

这是速度与空间的权衡。

如果您的`Select()`回调计算量很大，您可能希望计算一次并将其存储以备后用。

如果没有，您可能希望节省存储空间并每次都计算它。

如果你需要随机访问，你绝对应该调用`ToList()`，因为`ElementAt()`是 O(n)。

请注意，这`ToList()`比 快`ToArray()`，因为`ToArray()`需要在完成后修剪数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:17:18.293

`myStrings`只是一个查询而不是一个集合。如果您多次需要它并且它不是太大（对于内存），您最好通过`ToArray`or创建一个集合`ToList`。

否则，您每次访问它时都会执行查询（fe via `foreach`），因为它是[deferred execution](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)。如果查询现在返回不同的结果，这也可能导致令人讨厌的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:17:28.130

**除非您特别需要**List 或 Array 功能，否则将其保留为 IEnumerable 是最好的。没有强制转换 == 更少的计算周期。

# textarea - 文本区域消失 - Ckeditor

> ID：13686125
> 
> 赞同：2
> 
> 时间：2012-12-03T15:15:32.720
> 
> 标签：textarea, ckeditor

我尝试使用 ckeditor，但如果我放置例如 colorbutton 插件，textarea 就会消失。这是我尝试的方法：

```
CKEDITOR.replace( 'editor1', {
                extraPlugins: 'colorbutton',
            } ); 
```

我尝试了其他插件，但没关系。

如果我尝试只放置一个文件，该文件只是一个带有 textarea 的表单，则 colorbutton 插件可以正常工作。但是上面我尝试在我的网站中放置一个更复杂的表单，然后，textarea 消失了......

为什么？我的解决方案有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:21:13.190

你用的是CKEditor 4吗？

如果是，那么您的包中可能只是缺少 colorbutton 插件（或其依赖项之一）。

检查您在 Firebug 中有哪些错误。是否缺少插件，您应该会看到类似

```
[CKEDITOR.resourceManager.load] Resource name "colorbutton" was not found 
```

# javascript - Mootools幻灯片在下拉菜单中不起作用

> ID：13686126
> 
> 赞同：0
> 
> 时间：2012-12-03T15:15:37.587
> 
> 标签：javascript, drop-down-menu, mootools

我有一个使用 mootools 的带有下拉菜单的 html5 页面。如果我使用 hide() 和 show() 函数，它就可以工作。但是，我希望菜单可以滑入和滑出，如下所示：

```
var m        = e.getElement(".dropdown-menu, .sidebar-dropdown-menu");

if (e.hasClass('active')) {

    m.hide();
    e.removeClass('active');

} else {

    m.show();
    e.addClass('active');
} 
```

而不是隐藏和显示我想要slideIn和slideOut：

```
var m    = new Fx.Slide(e.getElement(".dropdown-menu, .sidebar-dropdown-menu"));
if (e.hasClass('active')) {

    m.slideOut();
    e.removeClass('active');

} else {

    m.slideIn();
    e.addClass('active');
} 
```

工作示例：http: [//jsfiddle.net/wzzeZ/](http://jsfiddle.net/wzzeZ/)

不工作：http: [//jsfiddle.net/37V53/1/](http://jsfiddle.net/37V53/1/)

它不是抛出错误；我在哪里寻找修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:47:43.083

这里发生了一些事情。

首先，您没有看到任何错误，因为没有。如果你用 console.log() 调用乱扔代码，它们都会运行。

这是阻止菜单显示的样式问题。

Mootools 中的`FX.Slide`Class 似乎没有明确设置您要滑动到的元素的“显示”属性`block`。您仍然需要调用`.show()`它才能工作。

接下来，如果您查看 的[文档`FX.Slide`](http://mootools.net/docs/more/Fx/Fx.Slide)，您会注意到它创建了一个包装元素来执行幻灯片效果（高度动画需要容器，溢出：隐藏等）

不幸的是，这似乎弄乱了菜单的定位，该菜单相对于其包含元素定位 - 但包含元素具有高度和溢出：隐藏样式，然后隐藏菜单（更不用说，即使你能看到它，它在正确的位置）。

要了解我在说什么，请在此处查看此更新的 Fiddle：http: [//jsfiddle.net/37V53/2/](http://jsfiddle.net/37V53/2/)

如果您在带有 Firebug 的 Firefox 中运行它，并将光标悬停在记录到控制台的元素上，您将看到 Firebug 的蓝色亮点出现在您的元素实际**显示**的位置 - 在窗口中间，并且从视图中隐藏.

这是您正在使用的 MooTools 类中的假设组合；使用`FX.Tween`而不是`FX.Slide`.

我创建了一个基于原始小提琴（有效）的示例 - [http://jsfiddle.net/LkLgk/](http://jsfiddle.net/LkLgk/)

技巧是将元素显示给浏览器而不是用户（通过设置`visibility: hidden`before `display: block`，抓取高度，设置`height`为`1px`，`visibility`返回`visible`，然后将高度补间到先前检测到的值。

希望能为您指明正确的方向；记住，当有疑问时，`console.log`一切！

# c# - 客户端和服务器之间的通信层

> ID：13686128
> 
> 赞同：3
> 
> 时间：2012-12-03T15:15:50.570
> 
> 标签：c#, asp.net, client-server, communication

我想知道是否有任何技术可以控制 Web 应用程序（ASP.NET）中客户端和服务器之间的通信

例子：

*   请求数
*   检查没有重复请求
*   检查是否执行了操作

工作流程

1.  客户端发送请求“A”
2.  服务器收到请求“A”，并响应
3.  服务器将请求“A”标记为已回答
4.  客户端重新发送请求“A”
5.  服务器回答请求“A”已被回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:49:37.390

您可以在`Global.asax`文件中通过以下方法拦截请求：

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        var request = ((System.Web.HttpApplication)(sender)).Context.Request;
        //here you can evaluate and take decisions about the request
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:12:41.490

在任何 ASP.NET 应用程序中，您都可以使用 HttpApplication 事件来跟踪所需的更改。例如，您可以使用 BeginRequest 和/或 EndRequest 事件来跟踪它：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    if(MyGlobalFlags.TrackingRequests){
        //  do stuff
    }
}

protected void Application_EndRequest(object sender, EventArgs e)
{
    if(MyGlobalFlags.TrackingRequests){
        //  do stuff
    }
} 
```

根据个人意见，如果我愿意，我会使用可以轻松关闭的全局标志。

如果您谈论的是 ASP.NET MVC 应用程序，我还建议您在要跟踪的操作中使用[ActionFilters 。](http://msdn.microsoft.com/en-us/library/dd470536%28v=vs.100%29.aspx)您可以实现自己的 ActionFilter 类并跟踪 OnActionExecuted 和/或 OnResultExecuted 的这些更改。我仍然会使用全局标志来关闭跟踪而不更改代码。

```
public class MyTrackingActionFilter: ActionFilterAttribute{
    public override OnActionExecuted(ActionExecutedContext filterContext)
    {
           if(MyGlobalFlags.TrackingRequests){
            //  do stuff
        }
    }

    public override OnResultExecuted(ActionExecutedContext filterContext)
    {
           if(MyGlobalFlags.TrackingRequests){
            //  do stuff
        }
    }
} 
```

作为说明，我不会尝试在这些事件中做重的事情。如果轨道需要大量可以并行运行的数据库操作，我建议您在使用线程池的同时使用队列系统。

# delphi - 如何在不专注的情况下从键盘获取输入 Delphi

> ID：13686135
> 
> 赞同：5
> 
> 时间：2012-12-03T15:16:23.537
> 
> 标签：delphi, screenshot

我想知道如何在我的 delphi 应用程序中获取键盘输入而不集中。我正在编程的应用程序将在我玩游戏时截取屏幕截图。

我已经编写了屏幕截图代码，但我错过了最后一块，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T15:23:19.517

您可以注册一个热键（使用[RegisterHotKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)和[UnregisterHotKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646327%28v=vs.85%29.aspx)函数）并在`WM_HOTKEY`按下键时使用消息进行拦截。

试试这个样本

```
type
  TForm3 = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { Private declarations }
  public
     procedure WMHotKey(var Message: TMessage); message WM_HOTKEY;
  end;

var
  Form3: TForm3;

implementation

{$R *.dfm}

{ TForm3 }

const
  SaveScreeenHK=666;

procedure TForm3.FormCreate(Sender: TObject);
begin
 RegisterHotKey(Handle, SaveScreeenHK , MOD_CONTROL, VK_F10);
end;

procedure TForm3.FormDestroy(Sender: TObject);
begin
  UnregisterHotKey(Handle, SaveScreeenHK);
end;

procedure TForm3.WMHotKey(var Message: TMessage);
begin
 //call your method here
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T11:07:38.863

从那以后，我一直很忙，并创建了一个用于在 delphi 中获取击键的库。你可以在这里找到它：[https ://github.com/Kobusvdwalt/DelphiKeylogger](https://github.com/Kobusvdwalt/DelphiKeylogger)

它仍然需要文档，但基本上你只需调用 olgetletter 函数。

# php - 结合 MySQL 查询？

> ID：13686136
> 
> 赞同：0
> 
> 时间：2012-12-03T15:16:24.930
> 
> 标签：php, mysql

有没有办法可以结合这两个 MySQL 查询？它目前使排序和分页等变得非常困难。

```
SELECT *
FROM (`lb_sales`)
WHERE `recurring` =  '0'
AND `created` >= '2012-10-01 00:00:00'
AND `created` <= '2012-10-30 23:59:59'
AND `status` =  'pending'
AND `type` =  'sale'
AND `account_id` =  '2'
ORDER BY `id` ASC
LIMIT 5;

SELECT *
FROM (`lb_sales`)
WHERE `recurring` =  '1'
AND `created` <= '2012-10-30 23:59:59'
AND `status` =  'pending'
AND `type` =  'sale'
AND `account_id` =  '2'
ORDER BY `id` ASC
LIMIT 5; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:17:40.297

试试看`UNION ALL`，只要确保列对齐即可。另外，不要使用`SELECT *`. 始终指定列列表。

```
SELECT col1, col2, ...
FROM (`lb_sales`)
WHERE `recurring` =  '0'
AND `created` >= '2012-10-01 00:00:00'
AND `created` <= '2012-10-30 23:59:59'
AND `status` =  'pending'
AND `type` =  'sale'
AND `account_id` =  '2'
ORDER BY `id` ASC
LIMIT 5
UNION ALL
SELECT col1, col2, ...
FROM (`lb_sales`)
WHERE `recurring` =  '1'
AND `created` <= '2012-10-30 23:59:59'
AND `status` =  'pending'
AND `type` =  'sale'
AND `account_id` =  '2'
ORDER BY `id` ASC
LIMIT 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:20:28.950

```
SELECT *
FROM (`lb_sales`)
WHERE
(
`recurring` =  '0'
AND `created` >= '2012-10-01 00:00:00'
AND `created` <= '2012-10-30 23:59:59'
)
OR
( 
`recurring` =  '1'
AND `created` <= '2012-10-30 23:59:59'
)
AND `status` =  'pending'
AND `type` =  'sale'
AND `account_id` =  '2'
ORDER BY `id` ASC
LIMIT 5; 
```

括号是你的朋友年轻的帕万。当然，我假设您想要满足任一条件的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:18:29.357

```
SELECT *
FROM (`lb_sales`)
WHERE ((`recurring` =  '0'
AND `created` >= '2012-10-01 00:00:00'
AND `created` <= '2012-10-30 23:59:59')
OR (`recurring` =  '1'
AND `created` <= '2012-10-30 23:59:59'))
AND `status` =  'pending'
AND `type` =  'sale'
AND `account_id` =  '2'
ORDER BY `id` ASC
LIMIT 10; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:19:26.270

尝试：

```
SELECT *  FROM (`lb_sales`)
WHERE (`recurring` =  '0' AND `created` >= '2012-10-01 00:00:00'
 AND `created` <= '2012-10-30 23:59:59' ) 
OR (`recurring` =  '1' AND `created` <= '2012-10-30 23:59:59')    
AND `status` =  'pending'
AND `type` =  'sale'
AND `account_id` =  '2'
ORDER BY `id` ASC
LIMIT 5; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T15:20:26.690

```
SELECT *
FROM (`lb_sales`)
WHERE ( `recurring` =  '0' 
AND `created` >= '2012-10-01 00:00:00'
AND `created` <= '2012-10-30 23:59:59'
AND `status` =  'pending'
AND `type` =  'sale'
AND `account_id` =  '2' ) 
OR  (`recurring` =  '1'
AND `created` <= '2012-10-30 23:59:59'
AND `status` =  'pending'
AND `type` =  'sale'
AND `account_id` =  '2' )
ORDER BY `id` ASC
LIMIT 5; 
```

可能是这样的，但如果语法正确则不确定

# java - 使 AsyncTask （或服务）无法杀死（或接近它的东西）

> ID：13686137
> 
> 赞同：2
> 
> 时间：2012-12-03T15:16:27.277
> 
> 标签：java, android, service, kill, dalvik

在我的应用程序中有一个 AsyncTask 在后台运行很长时间。问题是在内存不足的情况下它被VM杀死，有没有办法让应用程序的优先级更高，这样就更难杀死了？我应该改用服务吗？我唯一的目标是让它难以杀死，任何建议或指导将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:18:56.470

我建议您将其作为一项服务和使用`startForeground()`，这将使其更具抵抗力。但即便如此，它也可能因内存不足而停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:31:45.853

不，没有，否则每个人都会滥用它。如果操作系统杀死了您的服务，那么它就是有原因的。如果条件允许并且您的服务符合条件，如果 Android 认为它应该这样做，它将重新启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:26:21.653

If your service is killed, then it's restarted by the system as soon as resources allow.

So, make it a service (it shouldn't be a foreground service, if it doesn't do anything decidedly user-oriented like playing music), but a service that can save its state (`onMemoryLow()` and `onDestroy()` methods). So after the restart it can resume its process with the user being none the wiser.

# php - PHP：如何以小时：分钟：秒获取当前时间？

> ID：13686139
> 
> 赞同：19
> 
> 时间：2012-12-03T15:16:31.647
> 
> 标签：php, date, time

为了以我想要的正确格式获取日期，我使用了`date("d-m-Y")`. 现在我想以以下格式获取除日期外的时间我该`H:M:S`如何处理？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-03T15:29:50.933

每当您对 PHP 中的特定函数有疑问时，获得快速答案的最简单方法是访问 php.net，该网站有关于该语言所有功能的大量文档。

查找功能很容易，只需访问`http://php.net/<function name>`它，它就会将您转发到适当的位置。对于日期函数，我们将访问[http://php.net/date](http://php.net/date)。

通过检查其签名，我们立即了解了有关此函数的一些信息：

```
string date ( string $format [, int $timestamp = time() ] ) 
```

首先，它返回一个字符串。这就是`string`上面代码中第一个的意思。其次，第一个参数应该是一个包含格式的字符串。有一个可选的第二个参数用于传入您自己的时间戳（从现在以外的某个时间构造字符串）。

```
date("d-m-Y") // produces something like 03-12-2012 
```

在此代码中，`d`表示月份中的某一天（必须以 0 开头）。`m`表示月份，如有必要，再次使用前导零。并`Y`代表完整的 4 位数年份。所有这些都记录在上述链接中。

为了满足您获取小时、分钟和秒的要求，我们需要快速查看文档以了解哪些字符代表这些特定的时间单位。当我们这样做时，我们会发现以下内容：

```
h   12-hour format of an hour with leading zeros    01 through 12
i   Minutes with leading zeros                      00 to 59
s   Seconds, with leading zeros                     00 through 59 
```

考虑到这一点，我们不能创建新的格式字符串：

```
date("d-m-Y h:i:s"); // produces something like 03-12-2012 03:29:13 
```

希望这对您有所帮助，并且我希望您发现这些文档对您的开发有所帮助，就像我必须做的那样。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-03T15:20:06.187

您可以将两者结合在同一个日期函数调用中

```
date("d-m-Y H:i:s"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-03T15:19:00.353

您可以将这两种格式作为函数 date() 的参数：

```
date("d-m-Y H:i:s") 
```

查看手册了解更多信息： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

正如@ThomasVd Berge 指出的那样，要显示分钟，您需要“i”字符

# visual-studio-2008 - 实例化时出现 NullReferenceException

> ID：13686147
> 
> 赞同：0
> 
> 时间：2012-12-03T15:16:54.390
> 
> 标签：visual-studio-2008, visual-c++

我在这条线上遇到了异常

```
this->root = new node; 
```

在 Visual C++ 中。请注意，它`node`是一个`struct`并且`root`是指向节点结构的指针（此行之前为空）

我该如何解决这个问题，或者为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:30:51.173

已解决的类实例化已被 Visual Studio 表单设计器删除，但仍会调用该方法，并且该方法不是静态的，有人知道为什么吗？

# magento - Magento：pdf中的发票ID

> ID：13686149
> 
> 赞同：1
> 
> 时间：2012-12-03T15:16:59.463
> 
> 标签：magento, invoice

如何在 \app\code\local\Mage\Sales\Model\Order\Pdf\Abstract.php 中显示发票 ID

我不需要显示`getRealOrderId()`在 pdf 发票中，但我需要发票 ID。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:58:44.397

首先确保您的订单已加载……看看：

```
protected function insertOrder(&$page, $obj, $putOrderId = true)
{
    if ($obj instanceof Mage_Sales_Model_Order) {
        $shipment = null;
        $order = $obj;
    } elseif ($obj instanceof Mage_Sales_Model_Order_Shipment) {
        $shipment = $obj;
        $order = $shipment->getOrder();
    }
    .....
} 
```

所以稍后你可以使用这个片段：

```
$invoiceIncrementId = '';
if ($order->hasInvoices()) {
    // "$_eachInvoice" is each of the Invoice object of the order "$order"
    foreach ($order->getInvoiceCollection() as $_eachInvoice) {
        $invoiceIncrementId = $_eachInvoice->getIncrementId();
    }
} 
```

我提到，那个论坛回复： http: [//www.magentocommerce.com/boards/viewthread/198222/#t393368](http://www.magentocommerce.com/boards/viewthread/198222/#t393368)

祝你好运。

# c# - Monotouch 守护程序应用程序

> ID：13686151
> 
> 赞同：2
> 
> 时间：2012-12-03T15:17:00.843
> 
> 标签：c#, iphone, ios, xamarin.ios

有没有办法为 iOS 创建守护程序应用程序，我不确定 App Store 中是否允许守护程序应用程序，但 Google Latitude 这样做是为了在应用程序未加载或在后台更新用户信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:52:22.280

iOS 没有服务。

但是您可以设置您的应用程序在后台处理位置更新。（但如果用户从双击主页强制退出应用程序，您的应用程序将不再接收这些事件）

我会在[这里](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)查看 iOS 文档，不确定是否有 MonoTouch 示例，但您应该能够翻译您将在 Objective-C 中执行的操作。

然而，我不认为这将是一项微不足道的任务。

# php - PHP + MySQL - 从表中获取多个外部数据后的回显变量

> ID：13686152
> 
> 赞同：0
> 
> 时间：2012-12-03T15:17:04.433
> 
> 标签：php, mysql

我已经这样做了：-

```
 $qry=mysql_query("SELECT client.resID, menu.name FROM client INNER JOIN menu ON   
    client.resID = menu.resID WHERE client.resID = $resID");

    $row=mysql_fetch_array($qry);

    echo $row['name'];

}

?>
<form action="client_admin_post.php" method="post" enctype="multipart/form-data" name="form1" id="form1">

<p>Services &nbsp;&nbsp;:
<label for="cat"></label>
<input type="text" name="name" id="name" value="<?php echo $row['name']; ?>" />
</p>

<p align="center">
<input type="submit" name="Submit" id="Submit" value="Submit" />
</p>
</form> 
```

我正在构建一个从 MySQL 表中获取数据的 php 表单。它用于编辑 MySQL 表中的数据。现在的问题是，比方说，一家餐馆有很多菜单。因此，在这种情况下，“menus”MySQL 表中有许多行具有相同的 restaurantID(pk)。我需要将所有菜单提取到 5 个字段。使用此代码，我只能获取菜单。我怎么能那样做？

谢谢 :D 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:19:39.860

您只需要遍历您的结果集。像这样的东西应该工作

```
$names = array(); //array to store all names

while ($row = mysql_fetch_array($qry)) { // loop as long as there are more results
    $names[] = $row['name'];  // push to the array
}

print_r($names);    // $names array now contains all names 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:29:42.337

我删除了 id，所以没有重复的 id。如果您的姓名输入确实需要一个 id，最好为每个循环添加一个增量变量。例如“name1”、“name2”等...

```
<form action="client_admin_post.php" method="post" enctype="multipart/form-data" name="form1" id="form1">
    <?php
    $qry = mysql_query("SELECT client.resID, menu.name FROM client INNER JOIN menu ON client.resID = menu.resID WHERE client.resID = $resID");

    while($row = mysql_fetch_assoc($qry))
    {
        ?>
        <p>
            Services &nbsp;&nbsp;:
            <label for="cat"></label>
            <input type="text" name="name" value="<?php echo $row['name']; ?>" />
        </p>
        <?php
    }
    ?>
    <p align="center">
        <input type="submit" name="Submit" id="Submit" value="Submit" />
    </p>
</form> 
```

# c++ - Qt：信号槽不工作

> ID：13686153
> 
> 赞同：1
> 
> 时间：2012-12-03T15:17:07.063
> 
> 标签：c++, multithreading, qt, qthread, qt-signals

我正在尝试在主 gui 和另一个移动到另一个线程的对象之间实现信号和插槽系统......以下是类设计的样子......不幸的是无法实现它......

**主窗口.h**

```
signals:
    void StopDisplayWidget();
    void StartDisplayWidget();
    void signalFromGUI();

private slots:
    void on_pushButton_start_display_clicked();

    void on_pushButton_stop_display_clicked();

    void on_pushButton_check_clicked();

private:
    Ui::MainWindow *ui;
    displaythread *threadforDisplay;
    display *displayWidget;
    QThread *WorkerDisplay; 
```

**主窗口.cpp**

```
{
    threadforDisplay = new displaythread;
    threadforDisplay->setptr2display(displayWidget);

    WorkerDisplay = new QThread;
    QObject::connect(WorkerDisplay,SIGNAL(started()),threadforDisplay,SLOT(Process()));

    QObject::connect(this,SIGNAL(StartDisplayWidget()),threadforDisplay,SLOT(StartDisplay()));
    QObject::connect(this,SIGNAL(StopDisplayWidget()),threadforDisplay,SLOT(StopDisplay()));
    QObject::connect(this,SIGNAL(signalFromGUI()),threadforDisplay,SLOT(Check()));

    threadforDisplay->moveToThread(WorkerDisplay);
}

void MainWindow::on_pushButton_start_display_clicked()
{
    if(!threadforDisplay->IsDisplayActive())
        emit this->StartDisplayWidget();

    if(!WorkerDisplay->isRunning())
        WorkerDisplay->start();
}

void MainWindow::on_pushButton_stop_display_clicked()
{
    if(threadforDisplay->IsDisplayActive())
    {
        emit this->StopDisplayWidget();
    }
}

void MainWindow::on_pushButton_check_clicked()
{
    std::cout<<"CHECKING SIGNAL SLOT"<<std::endl;
    emit this->signalFromGUI();
} 
```

**threadforDisplay**是一个指向**displaythread 类**的指针，它看起来像

**显示线程.h**

```
#include <QObject>
#include <QWaitCondition>
#include <QMutex>
#include "display.h"

class displaythread : public QObject
{
    Q_OBJECT
public:
    explicit displaythread(QObject *parent = 0);
    bool IsDisplayActive() const;
    void setptr2display(display *);

signals:

public slots:
    void Process();
    void StartDisplay();
    void StopDisplay();
    void Check();

private:
    void SleepThread();

    volatile bool stopped,running;
    QMutex mutex;
    QWaitCondition waitcondition;
    display *displayinGUI; 
```

**显示线程.cpp**

```
void displaythread::setptr2display(display *ptr)
{
    displayinGUI = ptr;
}

void displaythread::Process()
{
    std::cout<<"RECEIVED START PROCESS SIGNAL"<<std::endl;
    running = true;
    while(true)
    {
        if(!stopped)
        {
            displayinGUI->update();
            this->SleepThread();
        }
    }

}

void displaythread::SleepThread()
{
    mutex.lock();
    waitcondition.wait(&mutex,20);
    mutex.unlock();
}

void displaythread::StartDisplay()
{
    std::cout<<"RECEIVED START SIGNAL"<<std::endl;
    stopped = false;
    running = true;
}

void displaythread::StopDisplay()
{
    std::cout<<"RECEIVED STOP SIGNAL"<<std::endl;
    stopped = true;
    running = false;
}

bool displaythread::IsDisplayActive() const
{
    return running;
}

void displaythread::Check()
{
    std::cout<<"SIGNAL FROM GUI RECEIVED"<<std::endl;
} 
```

**显示.h**

```
class display : public QWidget
{
    Q_OBJECT
public:
    explicit display(QWidget *parent = 0);
    ~display();

signals:

public slots:

private:
    void paintEvent(QPaintEvent *);

    IplImage *image_opencvBGR,*image_opencvRGB;
    QImage image;
    CvCapture *webcam; 
```

**显示.cpp**

```
display::display(QWidget *parent) :
    QWidget(parent)
{
    image_opencvRGB = cvCreateImage(cvSize(640,480),8,3);
    webcam = cvCaptureFromCAM(-1);
}

display::~display()
{
    cvReleaseCapture(&webcam);
}

void display::paintEvent(QPaintEvent *)
{
    //std::cout<<"IN PAINT LOOP"<<std::endl;
    image_opencvBGR = cvQueryFrame(webcam);

    cvCvtColor(image_opencvBGR,image_opencvRGB,CV_BGR2RGB);
    image = QImage((const unsigned char*)image_opencvRGB->imageData,image_opencvRGB->width,image_opencvRGB->height,QImage::Format_RGB888);
    QRectF target(0.0,0.0,image.width(),image.height());
    QRectF source(0.0,0.0,image.width(),image.height());
    QPainter painter(this);
    painter.drawImage(target,image,source);
} 
```

**输出 ：**

接收到的启动过程信号

但是，当从主 gui 即 MainWindow 发出信号时，除了 Process 插槽之外，没有其他插槽正在工作。是由于 movetoThread 命令吗？Donno我哪里错了..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:32:58.497

答案很简单：Qwidgets 不能在主线程之外工作。所以你不能使用`displaythread`.

此外，您的 while 循环可能会导致问题（我知道变量是易变的，但如果它是正确的，我没有时间正确分析）

有关更多信息，请参阅[文档](http://doc.qt.digia.com/main-snapshot/threads-qobject.html#qobject-reentrancy)。

ps：看来你做的有点过头了。重新设计你的整个设计。GUI 操作在主线程中。仅将线程用于计算。如果线程之间的通信和对其变量的访问仅使用信号和插槽，则不需要锁定机制。

# android - order by sum (score) desc 返回错误结果

> ID：13686155
> 
> 赞同：1
> 
> 时间：2012-12-03T15:17:12.357
> 
> 标签：android, sql, sum, sql-order-by

不知道是什么原因造成的，但我试图获得该级别所有答案中得分总和最高的级别。

```
Cursor c = myDataBase
                .rawQuery(
                        "select level "
                                + "from answers where player ='"
                                + player
                                + "' group by level order by sum (score) desc",
                        null); 
```

一定级别的所有答案都有一个分值。它不断返回第 10 级（共 10 级），而实际上另一个级别的得分最高......如果我应用 asc 顺序，它就可以正常工作：s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:21:36.693

如果您只想获得最高分的级别，请尝试使用`having`如下：

```
 "select level "
            + "from answers where player ='"
            + player
            + "' group by level "
            + " having sum (score) = max(sum (score))"; 
```

编辑：

```
 "select level from (select level, max(levelscore) as maxscore from "+
                               +" (select level, sum (score) as levelscore, "
                               + " from answers where player ='"
                               + player
                               + "' group by level )"
            + " ) where levelscore = maxscore"; 
```

或者

```
 "select level from "+
                   +" (select level, sum (score) as levelscore, "
                   + " from answers where player ='"
                   + player
                   + "' group by level )"
                   + "order by levelscore desc LIMIT 1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:26:09.823

```
SELECT level, SUM( score ) AS scoresum
FROM answers
WHERE player = ?
GROUP BY level
ORDERBY scoresum DESC
LIMIT 0, 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:24:48.400

为什么不这样声明（更容易）

```
SELECT TOP 1 level 
FROM answers 
WHERE player = {player} 
ORDER BY score DESC 
```

请注意，如果您在“保存”播放器的第一个结果之前执行此查询，您将不会得到任何结果...

哔叽

# c# - 如何以最优雅的方式更新 EntityFramework？

> ID：13686160
> 
> 赞同：0
> 
> 时间：2012-12-03T15:17:20.360
> 
> 标签：c#, entity-framework

这是我的模型 - 两张表 Contacts 和 Companies。联系人通过其 Company_ID 属性绑定到每个公司，我使用 EntityFramework。

当我想将联系人添加到公司时，我会浏览我想要添加的联系人并将他们的 Company_ID 属性更改为我想要添加他们的公司的 Company_ID。

但是它不会更新该公司的联系人，除非我执行以下操作，否则它们是相同的旧联系人：

```
Context.Dispose();
Context = new CompanyContactsEntity(); 
```

但这效率不高，因为我只想更新当前实例而不创建新实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:00:31.103

Try to avoid assigning the Identifiers. try to assign the entity reference instead. For instance:

```
Company company = ...//look-up/cerate for your company, etc.
Contact contact = ...//look-up/create for the contact
contact.Company = company; // Assign an instance reference but not the ID 
```

# javascript - 对象内部引用声明

> ID：13686161
> 
> 赞同：12
> 
> 时间：2012-12-03T15:17:25.973
> 
> 标签：javascript

我正在寻找一种使用字典中的值作为字典内部引用的快捷方式。代码显示了我的意思：

```
var dict = {
    'entrance':{
        'rate1': 5,
        'rate2':10,
        'rate3':20,
    },

    'movies':{
        'theDarkKnight':{
            '00:00':<entrance.rate1>,
            '18:00':<entrance.rate2>,
            '21:00':<entrance.rate3>
        },
        ...
    }; 
```

有没有偷偷摸摸的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T15:20:04.023

不，您能做的最好的事情是：

```
var dict = {
    'entrance' : {
        'rate1' : 5,
        'rate2' : 10,
        'rate3' : 20,
    }
};
dict.movies = {
    'theDarkKnight' : {
        '00:00' : dict.entrance.rate1,
        '18:00' : dict.entrance.rate2,
        '21:00' : dict.entrance.rate3
    },
    ...
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-03T20:13:01.160

您可以使用[mustache](https://github.com/mustache/mustache)并将您的 json 定义为“mustache 模板”，然后运行 ​​mustache 以呈现模板。考虑到如果您有嵌套的依赖项，您将需要运行 (n) 次。在这种情况下，您有 3 个依赖项`ABC --> AB --> A`。

```
var mustache = require('mustache');

var obj = {
  A : 'A',
  AB : '{{A}}' + 'B',
  ABC : '{{AB}}' + 'C'
}

function render(stringTemplate){
  while(thereAreStillMustacheTags(stringTemplate)){
    stringTemplate = mustache.render(stringTemplate, JSON.parse(stringTemplate));
  }
  return stringTemplate;
}

function thereAreStillMustacheTags(stringTemplate){
  if(stringTemplate.indexOf('{{')!=-1)
    return true;
  return false;
}

console.log(render(JSON.stringify(obj))); 
```

输出是：

```
{"A":"A","AB":"AB","ABC":"ABC"} 
```

# events - 如何在视图中使用 Backbone.EventBinder

> ID：13686165
> 
> 赞同：4
> 
> 时间：2012-12-03T15:17:48.637
> 
> 标签：events, backbone.js, marionette, backbone.eventbinder

参考 Backbone.EventBinder 上的[这篇](http://lostechies.com/derickbailey/2012/10/01/backbone-eventbinder-better-event-management-for-your-backbone-apps/)文章，我不知道如何将 EventBinder 与 Backbone 视图一起使用（这是最流行的用例）。是否仍然建议按照本文中的建议向 Backbone.View 原型添加 close() 方法和向视图添加 onClose()[方法](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)？还有一个人在哪里存储活页夹对象，以便可以在关闭时调用 binder.unbindAll()？关闭子视图的推荐方法是什么（例如，集合上的父视图在关联模型上具有子视图）。一个工作示例将是对 Backbone.EventBinder 项目的一个很好的补充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:32:44.980

是的，您仍然应该`close`在视图中添加一个方法。EventBinder 并没有否定 Zombies 帖子所说的任何内容。相反，它有助于更​​轻松地取消绑定视图中的所有事件，从而使许多过程自动化。

查看 Marionette.View 源代码，了解如何使用它的示例：

[https://github.com/marionettejs/backbone.marionette/blob/master/src/marionette.view.js#L9](https://github.com/marionettejs/backbone.marionette/blob/master/src/marionette.view.js#L9) https://github.com/marionettejs/backbone.marionette/blob/master/src/marionette.view .js#L16 [https://github.com/marionettejs/backbone.marionette/blob/master/src/marionette.view.js#L97](https://github.com/marionettejs/backbone.marionette/blob/master/src/marionette.view.js#L97)

如果您使用的是 Marionette，则无需`close`自己添加方法，也无需自己添加事件绑定器。这是为你处理的。

如果您想将其添加到您自己的视图中，很简单：

```
 MyView = Backbone.View.extend({

  initialize: function(){

    // add the event binder
    this.eventBinder = new Backbone.EventBinder();

    // bind some stuff
    this.eventBinder.bindTo(this.model, "change:foo", this.doStuff, this);
  },

  close: function(){
    // ... other stuff

    this.eventBinder.unbindAll();
  }
}); 
```

# java - java中的2 / 4 = 0.0？

> ID：13686168
> 
> 赞同：-3
> 
> 时间：2012-12-03T15:17:52.460
> 
> 标签：java, math, integer, double

> **可能重复：**
> [为什么两个整数相除在 Java 中返回 0.0？](https://stackoverflow.com/questions/4931892/why-does-the-division-of-two-integers-return-0-0-in-java)

我有一些非常令人困惑的问题..我想计算一些东西，经过一些调试，我看到 java 计算这个算术：**2 / 4 = 0.0**但它应该是 0.5

2 & 4 存储在整数变量中，结果存储在双精度类型中。

我是否清楚地错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T15:18:39.173

这是因为整数除法（整数除法向 0 舍入）。将操作数之一转换为双精度类型。

例子：

`double temp = (double)2/4`

会给你正确的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T15:18:34.073

采用

```
myDouble = (double) integerWhoseValueIs2 / integerWhoseValueIs4 
```

将它存储在 double 中的事实并没有改变两个整数相除得到整数的事实。当你储存它时，为时已晚。

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)：

> 整数除法向 0 舍入。也就是说，在二进制数值提升（第 5.6.2 节）之后为整数的操作数 n 和 d 产生的商是一个整数值 q，其幅值尽可能大，同时满足 |d · q|。≤ |n|。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:20:04.413

如果你不写强制转换`double`，结果总是一个`int`。

`double a = (double) 2/4;`

# xml - 我的 xpath 查询没有找到任何结果

> ID：13686174
> 
> 赞同：3
> 
> 时间：2012-12-03T15:18:20.390
> 
> 标签：xml, xpath, xml-parsing

我有一个简单的 xml 节点和一个同样简单的 xpath 查询表达式，但它不能正常工作。我已经尝试了各种变体（//node-name, *[name()='node-name'], current-node-name/node-name），但它仍然没有找到正确的节点！

这是我的xml：

```
<page-reference xmlns="http://something.com">
  <relative-path>something/something</relative-path>
  <base-path>somePath</base-path>
</page-reference> 
```

我尝试了几种不同的 x 路径变体。如果我取出 page-reference 标记的 xmlns 属性，它们中的大多数都可以工作。例如：`//relative-path, /page-reference/relative-path, relative-path, page-reference/relative-path`，但它们都不能与 xmlns 属性一起使用。

有什么想法可能导致这种情况吗？我认为这是值中 http 之后的双斜杠，但我不知道为什么会导致问题，而且似乎也并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:23:59.227

该`xmlns`属性为元素提供了一个命名空间，这意味着它不仅仅是一个普通的“页面引用”或“相对路径”元素，因此不能这样访问它。不同的语言有不同的方式来指示命名空间，从指示 XPath 查询的默认值到使用前缀。

对于 JavaScript，您可以使用命名空间解析器：[https](https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#Implementing_a_User_Defined_Namespace_Resolver) ://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#Implementing_a_User_Defined_Namespace_Resolver （如果您想指定前缀——在文档中使用不同的命名空间时很有用）和/ 或依赖 XPath 表达式中的默认命名空间（尽管您需要使用一些--ANY--前缀）：[https ://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#Implementing_a_default_namespace_for_XML_documents](https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript#Implementing_a_default_namespace_for_XML_documents)

```
var xml = new DOMParser().parseFromString('<page-reference xmlns="http://something.com">'+
  '<relative-path>something/something</relative-path>'+
  '<base-path>somePath</base-path>'+
'</page-reference>', 'text/xml');

function resolver() {
    return 'http://something.com';
}
var refs = xml.evaluate('//x:page-reference', xml, resolver, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
alert(refs.snapshotItem(0).nodeName) // 'page-reference' 
```

你需要一个 shim 来支持 IE。（快速搜索出现了[http://sourceforge.net/projects/js-xpath/files/js-xpath/](http://sourceforge.net/projects/js-xpath/files/js-xpath/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:28:55.633

**或者，您也可以使用**：

```
//*[name()='relative-path'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:24:32.520

XPath 不知道“默认” XML 名称空间 (xmlns)。因此，您需要在 XPath 表达式中的所有节点前面加上 page-reference 标记的命名空间。

**XML:**

```
<page-reference xmlns:s="http://something.com">
  <relative-path>something/something</relative-path>
  <base-path>somePath</base-path>
</page-reference> 
```

**XPath：**

```
//s:relative-path 
```

# playframework - 到处玩框架静态方法

> ID：13686182
> 
> 赞同：1
> 
> 时间：2012-12-03T15:18:43.300
> 
> 标签：playframework

所以我刚开始研究 Play Framework，我在示例 (http://www.playframework.org/documentation/2.0.4/JavaTodoList) 中看到一切似乎都是静态的。我是其中之一，尽管我认为静态并不是一件好事，如果您需要静态，您可能应该使用单例。更熟悉游戏框架的人能否告诉我围绕所有这些静态调用的思考过程与更符合单例模式的东西是什么？我知道我可以在初始静态方法调用之后实现我想要的任何模式，但在我看来，这里可以做其他事情来限制静态方法的使用。我今天第一次看游戏框架，所以我可能会遗漏一些东西，所以请随时启发我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:40:58.223

Play 的方法是无状态的，而非静态方法将状态引入类。

单例模式也不是真的在那里工作。使用 Singleton，您只有*一个类的全局*实例。这可能有 4 种可能的结果，具体取决于您的定义（可能更多，但我想不出任何结果）：

*   如果您的 Singleton 实例是**有状态**的并且*全局*意味着*application-wide*，那么同一页面的多个访问者将共享相同的状态（“哦，看，我现在是用户 X。这很奇怪。”）
*   如果您的 Singleton 实例是**有状态**的并且*每个 HTTP 请求都是**全局*的，那么您只需创建一个新的“Singleton”并且不要重用它，从而使 Singleton 模式（在我看来）无用。
**   如果您的 Singleton 实例是**无状态**的，那么为什么还要费心生成它的实例并设法拥有一个呢？*

 *第四点是有**状态**的Singleton，其中*global*意味着*per user*。事实上，这确实导致了一种管理用户会话的简洁方式。但这并不是 Play 的做法。*

# c# - Converting an advanced query from SQL to LINQ

> ID：13686187
> 
> 赞同：0
> 
> 时间：2012-12-03T15:18:46.810
> 
> 标签：c#, asp.net, sql, linq

Still getting used to LINQ syntax, and have come across this query that I need to create in LINQ - but not exactly sure how.

```
SELECT *,
   (SELECT 1 FROM Applications 
   WHERE Applications.jID = Jobs.ID 
   AND Applications.uID = @uID) AS Applied 
FROM [Jobs] 
```

Playing in LinqPad, but the interface isn't really helping (at least with what I can see).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:50:34.003

Based on the link provided by Paul Sasik, and his advice that you're after a `LEFT OUTER JOIN`, this query should meet your requirements;

```
var query = from job in jobs
            join app in applications on job.ID equals app.jID into grouped
            from subApp in grouped.DefaultIfEmpty()
            select new { Job = job, Applied = (subApp != null) }; 
```

**EDIT**: To filter by user, update the query as follows;

```
var query = from job in jobs
    join app in
    (
        from userApp in applications where userApp.uID == uID select userApp
    ) on job.ID equals app.jID into grouped
    from subApp in grouped.DefaultIfEmpty()
    select new { Job = job, Applied = (subApp != null) }; 
```

I personally would have reverted to just using the .Where() method directly at this point, but just thought I'd keep everything consistent and continue using the query syntax.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:32:35.917

```
var jobs = from j in this.db.Jobs
           where !j.Applications.Any(x => x.UserId == currentUserId)
           select j; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T19:12:08.850

I recommend checking out the tool [Linqer](http://www.sqltolinq.com/) -- which converts SQL to Linq code. It's not free but there is a 10 day trial.

![enter image description here](../Images/76b6ad8c0d87eb6e51f7d72c6bf6e27c.png)

# vb.net - VB.NET USB 转并行编程

> ID：13686198
> 
> 赞同：2
> 
> 时间：2012-12-03T15:19:20.773
> 
> 标签：vb.net, parallel-port

在我在集成并行端口的 PC 上工作之前，但现在我有笔记本电脑，我购买了 USB 到并行端口转换器，希望我可以处理将与该并行端口的数据引脚通信的应用程序......

这个转换器可以用作常规的集成并行端口吗？

我检查了引脚，所有数据输出引脚一直都有信号......

我尝试使用用于我的 PC 的**inpout32.dll**脚本（可以 100% 工作），但它看起来不适用于笔记本电脑......

当使用这样的转换器时，编程是否必须有所不同？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:18:46.660

从计算机到计算机，用于并行端口的 IO 地址可能会有所不同。这个页面很好地解释了如何找到计算机的端口地址。[http://www.codeproject.com/Articles/20545/IO-Ports-Programming-Parallel-port-Reading-Writin](http://www.codeproject.com/Articles/20545/I-O-Ports-Programming-Parallel-port-Reading-Writin)

# mysql - 检查mysql中n个数字的相等性

> ID：13686200
> 
> 赞同：1
> 
> 时间：2012-12-03T15:19:23.403
> 
> 标签：mysql, sql

我需要检查所有数字是否相同。这些值来自不同的列。签名应该允许放置任意数量的列（如`COALESCE(...)`方法）

```
SELECT equality(42, 42, 42) 
```

应该返回`true`并且

```
SELECT equality(23, 42, 133) 
```

应该返回`false`。

有没有一种很好的编码方式？

当时我是这样做的：

```
SELECT (x1 = x2 AND x2 = x3); 
```

但我希望有一种更优雅的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:25:10.473

### 用这个：

```
SELECT GREATEST(42, 42, 42) = LEAST(42, 42, 42) 
```

# ruby - 如何在循环的帮助下创建数组

> ID：13686202
> 
> 赞同：1
> 
> 时间：2012-12-03T15:19:28.903
> 
> 标签：ruby, ruby-on-rails-3, loops, instance-variables

我有一个模型图像：

```
class Image < ActiveRecord::Base
  attr_accessible :date, :description, :name, :quality, :size
end 
```

我现在有一个带有一堆图像的实例变量：

```
@images = Image.where("id<30") 
```

我想创建一个`@keywords`包含所有图像名称的变量。在 Rails 控制台中，我可以这样做：

```
for i in 0...@image.count
  puts @image[i].name
end 
```

我得到了所有图像名称的列表。

如何`@keywords`在 my 中定义变量`images_controller`以便将此列表存储在数组中？

```
@keywords = ...? 
```

输出应该是一个列表，最好用逗号分隔，并带有图像名称：

```
"Blue ocean, Green leafs, Sunset in New York" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:21:36.487

```
@keywords = @images.collect{|i| i.name}.join(",") 
```

这将获得一个包含所有名称的数组，并将它们连接成一个逗号分隔的字符串。

# java - 消息 [0] 在消息数组中是最终的吗

> ID：13686204
> 
> 赞同：1
> 
> 时间：2012-12-03T15:19:36.017
> 
> 标签：java, final

我正在`Cannot refer to a non-final variable message inside an inner class defined in a different method`接受我的以下 onMessage 方法。

```
@Override
public void onMessage(Message msg) {

    if (msg instanceof ActiveMQMessage){
        try {
             ActiveMQMessage aMsg =  (ActiveMQMessage)msg;

             String message = ""; // I cant use final here because my if else message assingment
                int consumerCount =(Integer) aMsg.getProperty("consumerCount");

                if(consumerCount == 0 ){
                    message = "No cousumers for queue bank.7083 (HNB Bank)";
                }else{
                    message = "Added new consumer to bank.7083 (HNB Bank) total counsumers : "+consumerCount;
                }

                final MessageCreator request = new MessageCreator() {

                    public Message createMessage(final Session session) throws JMSException {
                        TextMessage textMessage = session.createTextMessage();
                        textMessage.setText(message); // I’m getting compilation issue here
                        return textMessage;
                    }
                };

                amqTemplate.send("HUTCH", request);

        } catch (IOException e) {
            e.printStackTrace();
        }

    } 
```

然后我使用`String [] messages = new String[1]`数组而不是我的`String message`，并像下面这样更改了我的代码。

```
.
.
.
                final String[]  message = new String[1];
if(consumerCount == 0 ){
                    message[0] = "No cousumers for queue bank.7083 (HNB Bank)";
                }else{
                    message[0] = "Added new consumer to bank.7083 (HNB Bank) total counsumers : "+consumerCount;
                }

.
.
.
textMessage.setText(message[0]); 
```

它编译没有任何问题。在我的理解中，消息 [0] 不是最终的。这就是为什么我能够为 message[0] 分配不同的消息。同样，尽管消息数组是最终的 setText 方法，但询问的是字符串而不是数组。我想我在这里错过了一些东西，这将阻止我理解这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:21:25.923

不，你没有错过任何东西。只`message`需要`final`；`message[0]`没有也不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:21:02.920

`final`在内部类中访问非事物的限制仅适用于**局部变量**。

`final`在您有权访问的实例上访问非字段或数组元素并没有错。

# java - 在 Java 中执行所有脚本后如何获得结果 HTML？

> ID：13686207
> 
> 赞同：0
> 
> 时间：2012-12-03T15:19:47.347
> 
> 标签：java, httpclient

我想使用 Java 获取整个 HTML 响应实体。我尝试过 httpclient 但失败了，因为它不会尝试执行嵌入在 html 页面中的 Javascript。

我能做些什么？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T04:06:25.943

如果您确实想抓取需要浏览器渲染的内容，[Selenium](http://www.seleniumhq.org/)似乎是唯一的选择。

# java - 使用java通过http循环播放音乐

> ID：13686209
> 
> 赞同：1
> 
> 时间：2012-12-03T15:19:52.753
> 
> 标签：java, http, audio, stream

我有一个小型的自写网络服务器，能够处理 POST\GET 查询。另外，我有一个处理程序，它接收音频文件并将它们放入响应流中，如下所示：

```
package com.skynetwork.player.server;

import ...

public class Server {
private static Logger log = Logger.getLogger(Server.class);
//Here goes the handler.
static class MyHandler implements HttpHandler {
    private String testUrl = "D:\\test";
    private ArrayList<File> urls = new ArrayList<File>();

    private long calculateBytes(ArrayList<File> urls) throws IOException {
        long bytes = 0;
        for (File url : urls) {
            bytes += FileUtils.readFileToByteArray(url).length;
        }
        return bytes;
    }

    public void handle(HttpExchange t) throws IOException {
        File dir = new File (testUrl);
        System.out.println(dir.getAbsolutePath());
        if (dir.isDirectory()) {
            log.info("Chosen directory:" + dir);
            Iterator<File> allFiles = (FileUtils.iterateFiles(dir, new String[] {"mp3"}, true));
            while (allFiles.hasNext()) {
                File mp3 = (File)allFiles.next();
                if (mp3.exists()) {
                    urls.add(mp3);
                    log.info("File " + mp3.getName() + " was added to playlist.");
                }
            }                       
        } else {
            log.info("This is not a directory, but a file you chose.");
            System.exit(0);
        }

        t.sendResponseHeaders(200, calculateBytes(urls));
        OutputStream os = t.getResponseBody();
        for (File url : urls) {
            os.write(FileUtils.readFileToByteArray(url));
        }
        os.close();
    }
}

public static void main(String[] args) throws Exception {
    HttpServer server = HttpServer.create(new InetSocketAddress(8080), 0);

    server.createContext("/test", new MyHandler());
    server.setExecutor(null); 
    server.start();
}

} 
```

现在它需要所有的音频文件并创建一个可靠的流。我希望它可以无限循环播放，就像网络上的小型广播电台一样。所以当我的服务器运行时，我在浏览器中输入一个 url，它会循环播放目录中的音频文件。

编辑：

如果我的服务器有所需的字节，我如何循环播放这些字节，例如在 VLC Player 中？我的意思是它只会播放一次流，但我怎么能循环呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:16:57.777

[您好康斯坦丁，我认为在这里](http://www.onlinevideo.net/2011/05/streaming-vs-progressive-download-vs-adaptive-streaming/)了解渐进式下载和流式传输之间的区别很重要。您所做的根本不是流式传输，而是渐进式下载，也就是说，如果您想在流式传输中跳转到文件的那部分（例如 You Tube），则必须先下载，这不是必需的，您可以收听无休止地接受它（例如 BBC 电台）

我建议您查看您对流媒体感兴趣的 red5 服务器项目。

如果您想继续使用当前代码（渐进式），也许您应该创建一个永无止境的输出流并不时暂停以限制下载速度。

我希望这有帮助！

# php - Zend 框架传递隐藏字段和取消链接文件

> ID：13686211
> 
> 赞同：0
> 
> 时间：2012-12-03T15:19:56.350
> 
> 标签：php, zend-framework, unlink

我正在使用 Zend FW 并从视图中提交的表单中删除图像。我成功地从数据库中删除了所有图像名称，数组中的每一个都使用它们的 ID。

我无法解决的是，一旦名称被删除，如何从文件夹中取消每个文件的链接？

我有一个隐藏字段如下：

```
<input type="hidden" name="Image[]" value="<?php echo $this->escape($r['image']); ?>" /> 
```

而且我知道在控制器中我可以使用以下方法调用文件名：

```
$images = $this->_getParam('image'); 
```

这对于一个图像来说很好，但我如何取消链接一个文件数组？这是我第一次遇到这个问题，请帮助。

我正在尝试做这样的事情：

```
foreach ($images as $img) { 
            foreach(("/uploads/thumb}/{$img}") as $file) {

        unlink($file); 
         }
    } 
```

我可能在做一些愚蠢的事情......道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:37:50.703

考虑到 vascowhite 的帮助，我设法使它以这种方式工作。最简单明了的真的：-

```
foreach($images as $img) { 
        $file = "./uploads/thumb/$img";
        unlink($file); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:36:38.057

您使用`foreach`(http://php.net/manual/en/control-structures.foreach.php) 控制结构来遍历数组。然后使用 unlink 到`$value`循环内的每个。

它应该看起来像这样：

```
foreach ($images as $img) { 
    unlink('uploads/thumb/'.$img);
} 
```

# javascript - 如何定期检查直到ajax返回状态值发生变化？

> ID：13686218
> 
> 赞同：1
> 
> 时间：2012-12-03T15:20:15.257
> 
> 标签：javascript, jquery, ajax

我如何检查 ajax 响应的状态以等待并检查它是否已从 200 --> 500 --> 200 更改？它必须检查并重新检查。我的在下面的代码中无法正常工作。注意：在成功提交表单时，它将始终为 200 .. 因此它需要检查并重新检查 500，然后再检查 200，然后再次重定向到主页。

我试图创建 checkstatus 函数，以便我可以重用。如何正确地做到这一点？

```
 // setTimeout(function() { location.reload(true);}, 3000);
     function checkStatus() {
            /***  Re check bit ***/
            var restartCheck = window.setInterval(
            $.ajax({
                // dataType : 'jsonp',
                //jsonp : 'js',
                url: "../../../../../rest/configuration",
                beforeSend: function (jqXHR, settings) {
                    console.info('in beforeSend');
                    console.log(jqXHR, settings);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(" 500 top data still loading " + jqXHR + " : " + textStatus + " : " + errorThrown);
                    console.info('in error');
                    console.log(jqXHR, textStatus, errorThrown);

                },
                complete: function (jqXHR, textStatus) {
                    alert(" complete " + jqXHR + " : " + textStatus);
                    console.info('in complete');
                    console.log(jqXHR, textStatus);
                },
                success: function (data, textStatus, jqXHR) {
                    window.clearInterval(restartCheck);
                    alert(" success " + jqXHR + " : " + textStatus);
                    console.info('in success');
                    console.log(data, textStatus, jqXHR);
                }
            }), 3000); //This will call the ajax function every 3 seconds until the clearInterval function is called in the success callback.
            /*** recheck bit **/

} 
```

/** 在初始成功表单提交时，成功值为 200。之后我有时需要等待检查并重新检查 500 是否服务器启动，当服务器重新启动或重新启动时，它会给出 500 内部服务器消息，大约需要 30到 40 秒或更长时间来重新启动服务器，所以我有 30 秒的等待时间。一旦服务器重新启动，它会给出 200 成功服务器消息。然后重定向页面。所以我正在尝试检查状态，直到它从 200 --> 500 -200 **/

```
 $.ajax({
        type: "POST",
        url: "foo.json",
        data: json_data,
        contentType: 'application/json',
        success: function (data, textStatus, xhr) {
            console.log(arguments);
            console.log(xhr.status);
            alert("Your changes are being submitted: " + textStatus + " : " + xhr.status);
            $('#myModal').modal('hide');
            $('#myModal-loading').modal('show');

            //call function checkstatus  not currently workign
            //statsu val ==200 server inital form success val from server
            setTimeout(function () {
              count=0;
             var statusval = checkStatus();
            while(statusval == 200 and count <=5) {
               statusval = checkStatus();
 //statsu val has changed to 500 server is restarting

               if (statusval==500) {
               //wait for   30 sec to recheck if the server has restarted and changed to success ie 200 
                setTimeout(function () { checkStatus();}, 30000);
               }

             count++;
            }, 3000);

            alert("restartCheck " + restartCheck)
            setTimeout(function () {
                location.reload(true);
            }, 3000);
            // $('#myModal-loading').modal('hide');
            $('<div id="loading">Loading...</div>').insertBefore('#myform');
            //location.reload(true);
        },
        error: function (jqXHR, textStatus, errorThrown) {
            // alert("Warning and error has occured: "+errorThrown + " : " + jqXHR.status);
            alert(jqXHR.responseText + " - " + errorThrown + " : " + jqXHR.status);

        }
    });

    });
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:30:32.340

试试这个[小提琴。](http://jsfiddle.net/anderslyman/dHxgB/)

HTML：

```
<div></div>​ 
```

代码：

```
function waitForStatus(url, status, maxRetries, success, failure) {
    var count = 0;
    var restartCheck = setInterval(function() {
        count++;
        if (count <= maxRetries) {
            $.ajax({
                url: url,
                type: "POST",
                complete: function (jqXHR, textStatus) {
                    if (jqXHR.status == status) {
                        clearInterval(restartCheck);
                        success(status);
                    }
                }
            });
        } else {
            clearInterval(restartCheck);
            failure();
        }
    }, 3000);
}

var successCallback = function(status) { 
    $("div").append('<p>SUCCESS: returned ' + status + '</p>');
}; 

var failureCallback = function() {
    $("div").append('<p>FAILURE: max attempts reached</p>');
};

// This will succeed    
waitForStatus('/echo/xml', 200, 5, successCallback, failureCallback);

// This will fail
waitForStatus('/echo/xml/404', 200, 5, successCallback, failureCallback); 
```

# asp.net - 使用连接字符串用户 ID 而不是应用程序池帐户进行身份验证

> ID：13686219
> 
> 赞同：0
> 
> 时间：2012-12-03T15:20:19.280
> 
> 标签：asp.net

我有一个 ASP.NET 应用程序，它通过实体框架连接到数据库。

我正在使用特定的应用程序池帐户，并且还在我的连接字符串“User Id=XXX;Password=YYY”中指定了一个用户帐户。

我的问题是我的应用程序在尝试连接到数据库时使用了应用程序池帐户，而不是使用我的连接字符串凭据。

# spring - 版本高于 Spring2.0.6.jar

> ID：13686220
> 
> 赞同：0
> 
> 时间：2012-12-03T15:20:21.913
> 
> 标签：spring, maven

我目前正在使用 Spring2.0.6.jar，但是在使用时出现错误。如果没有这个 jar，很少有应用程序可以成功运行，但很少有应用程序不能成功。

那么有没有支持 Spring 3 的 jar 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:37:22.097

目前有

*   春天 2.5.x
*   春天 3.0.x,
*   Spring 3.1.x 和
*   Spring 3.2.0\. 里程碑。

[http://www.springsource.org/download/community](http://www.springsource.org/download/community)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:36:35.690

[http://mvnrepository.com/artifact/org.springframework/spring](http://mvnrepository.com/artifact/org.springframework/spring)

现在到版本 2.5.6 [分钟字符]

# c# - Windows 应用商店应用程序的免费映射组件？

> ID：13686222
> 
> 赞同：6
> 
> 时间：2012-12-03T15:20:26.237
> 
> 标签：c#, map, gis, windows-store-apps

我一直在我的 .net 项目中使用开源 GIS 和地图组件，例如Sharpmap、mapnik、brutile。我主要在winforms应用程序中使用它们，现在我正在为windows store（'Metro'风格的桌面）应用程序寻找这些组件。由于许可问题，Bing 地图控制对我来说不是一个选项。

到现在为止，我还没有找到任何针对 Windows 商店应用程序的免费映射组件。你认识他们中的任何一个吗？你知道我可以参与这个主题的开源项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:01:41.707

最后我找到了一个很有前途的：http: [//xamlmapcontrol.codeplex.com](http://xamlmapcontrol.codeplex.com)

# functional-programming - 重新定义中缀运算符

> ID：13686223
> 
> 赞同：3
> 
> 时间：2012-12-03T15:20:27.843
> 
> 标签：functional-programming, ocaml

我正在学习[Jason Hickey 的 Objective Caml 简介](http://www.cs.caltech.edu/courses/cs134/cs134b/book.pdf)。

**只是对重新定义中缀运算符**有疑问。

* * *

所以在书中，有这样一段话：

```
# let (+) = ( * )
      and (-) = (+)
      and ( * ) = (/)
      and (/) = (-);;
  val + : int > int > int = <fun>
  val - : int > int > int = <fun>
  val * : int > int > int = <fun>
  val / : int > int > int = <fun>
# 5 + 4 / 1;;
-: **int = 15** 
```

* * *

**首先，这些重新定义是如何工作的？**

对我来说，这些函数似乎在一种无限循环中运行，因为所有操作似乎都重新定义并相互关联。

例如，如果我这样做`1+2`，那么它将是`1 * 2`，并且因为`( * ) = (/)`，它将是，然后`1 / 2`，因为`(/) = (-)`，那么它将是`1-2`，等等。**我对吗？**

* * *

**其次，即使函数在重新定义中只执行了一步，结果是否`5 + 4 / 1`会是？`15`**

因此，假设重新定义将进一步执行，即`1 + 2`只会进行`1 * 2`转换，不再进行转换，所以`5 + 4 / 1`应该是`5 * 4 -1`，对吗？那么答案是`19`。**我对么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T15:31:59.473

> 对我来说，这些函数似乎在一种无限循环中运行，因为所有操作似乎都重新定义并相互关联。

不是真的，它只是同时重新定义中缀运算符（使用`and`关键字）。你看到的**不是**递归定义。在 OCaml 中，递归定义是用**let rec**进行的（你可能已经知道了）。

对于问题的第二部分，我认为这是**operator priority**的问题。请注意，原始表达式`5 + 4 / 1`实际上`5 + (4/1)`遵循算术运算符的通常优先规则。所以，我认为转换只是保留了这种绑定（有点）。你得到了`5 * (4 - 1) = 15`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T15:58:31.783

关键观察 (恕我直言) 是`(+)`由 的*预先存在*的定义定义的`( * )`，而不是由几行之后出现的定义定义的。同样，`( * )`is 由 的*预先存在*的定义定义`(/)`。正如 Asiri 所说，这是因为使用了`let`而不是`let rec`.

这也是事实，在 OCaml 中，优先级和关联性是运算符固有的，不能通过定义进行更改。优先级和关联性由运算符的第一个字符决定。

如果您查看[OCaml 手册 6.7 节](http://caml.inria.fr/pub/docs/manual-ocaml/expr.html)中的运算符优先级和关联性表，您会看到所有条目都是为“以字符 X 开头的运算符”定义的。

# cmake - 如何检查 CMake 中是否存在宏

> ID：13686228
> 
> 赞同：17
> 
> 时间：2012-12-03T15:20:34.487
> 
> 标签：cmake

如何正确检查 CMake 中是否定义了宏？

```
macro(foo)
    message("foo")
endmacro()

if(<what goes here?>)
    foo()
endif() 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-03T15:34:22.107

[if 命令](https://cmake.org/cmake/help/latest/command/if.html)`COMMAND`为此目的支持一个子句：

```
if(COMMAND foo)
    foo()
endif() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:31:42.000

使用[给定目录的](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3aget_directory_property)[MACROS](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#prop_dir%3aMACROS)属性。

```
get_directory_property(DEFINED_MACROS DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} MACROS)
list(FIND DEFINED_MACROS "foo" MACRO_INDEX)
if(MACRO_INDEX EQUAL -1)
    # macro foo does not exist
else(MACRO_INDEX EQUAL -1)
    # macro foo exists
endif(MACRO_INDEX EQUAL -1) 
```

# javascript - 创建一个带有水平和垂直滚动条的可滚动表格？

> ID：13686229
> 
> 赞同：0
> 
> 时间：2012-12-03T15:20:35.203
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我有一个宽表，我想创建带有水平和垂直滚动条的表，并且表顶部可以有一个固定的标题

水平的需要同时滚动带有标题的列 垂直的应该一直出现

我尝试使用 css 溢出，但大多数示例只是给我带有固定标题的垂直滚动，没有水平滚动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:47:35.130

添加

```
position:fixed; 
```

在标题的 css 类中。当您进行滚动时，标题将保持静止。

不确定这是否是您所期望的。

# xcode - xcode 4 applescript 单选按钮 if 语句

> ID：13686230
> 
> 赞同：1
> 
> 时间：2012-12-03T15:20:39.703
> 
> 标签：xcode, macos, xcode4, applescript

我创建了应用程序（Cocoa-AppleScript 应用程序），它使用用户提供的文本字段的值和“安装”按钮执行 shell 命令。我想扩展应用程序以合并单选按钮（列表），允许用户选择一个或多个单选按钮，并且在单击安装按钮时，将执行与每个单选按钮相关的命令。我无法在网上找到很多与单选按钮和 if 语句相关的信息。

我确实找到了这篇文章，但它似乎不适用于 xcode 4： [http ://macscripter.net/viewtopic.php?id=24755](http://macscripter.net/viewtopic.php?id=24755)

```
 on InstallButton_(sender)
    set hostName to ""
    set hostName to textField's stringValue as string
    do shell script ("/usr/sbin/scutil --set HostName " & hostName) with administrator privileges
    do shell script ("/usr/sbin/scutil --set ComputerName " & hostName) with administrator privileges
   #IF RADIO BUTTON 1 IS SELECTED
         RUN COMMAND1
   #IF RADIO BUTTON 2 IS SELECTED
         RUN COMMAND2
end InstallButton_ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:32:40.360

我无法使用单选按钮（列表）找到解决方案，但我能够找出如何使用复选框获得确切结果。属性复选框：

```
missing value set checkBoxValue to "" 
set checkBoxValue to checkBox's integerValue as string 
#display dialog checkBoxValue 
if checkBoxValue = 1 
#run policy 
end 
```

如果复选框被选中，则 checkBoxValue 参数 = 1，如果未选中，则值为 0。

# xcode - 在monodevelop中查看plist raw xml

> ID：13686231
> 
> 赞同：2
> 
> 时间：2012-12-03T15:20:40.827
> 
> 标签：xcode, mono, xamarin.ios, plist, monodevelop

我真的需要在 monodevelop 或 xcode 中查看 plist 的 xml。

目前 plist 文件仅在 monodevelop 中不出现在 xcode 中，我找不到直接编辑 xml 的方法。

作为一般的咆哮，monodev 很棒，但是当人们避免使用 xcode 的一个关键原因可能是因为它坚持这种混淆时，为什么还要对 xml 进行这种 gui 编辑。

感谢您的任何指点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:52:21.210

它*可能会*根据您安装的软件起作用。

例如，从 MonoDevelop 我可以右键单击我的`Info.plist`，选择**打开**方式并选择 Dashcode.app。

这很有效（对我来说），因为我仍然安装了旧的 Xcode 4.2（在 OSX Lion 上），并且附带 dashcode 作为单独的 .app。

AFAIK MonoDevelop 在操作系统中查询任何可以打开`.plist`文件的应用程序。因此，如果您有一个可以读取它们（或 XML）的应用程序，您*应该*能够创建此关联（使用 Finder）并让 MonoDevelop 打开它。

无论如何，您应该在 MonoDevelop 上填写错误报告（增强功能），以便它可以`.plist`使用自己的 XML 编辑器打开这些文件。

# html-select - 下拉列表不填充其他控件

> ID：13686232
> 
> 赞同：1
> 
> 时间：2012-12-03T15:20:42.637
> 
> 标签：html-select

我是 webapps 的完全新手，但这里有。

我有一个带有下拉列表的 Web 表单，该列表从数据库过程中填充度假胜地列表。那一点效果很好。当我从列表中选择一个项目时，我需要用特定于该度假村的酒店填充一个列表框。

这一点我遇到了麻烦，如果我单击下拉列表到表单上的日历控件上，列表会填充。

问题：在我单击下拉列表中的值后，如何让它填充列表？

谢谢

顺便说一下，这里是代码：

```
Private Sub Page_Init(sender As Object, e As System.EventArgs) Handles Me.Init
    Me.Calendar1.SelectedDate = Now()

    Me.DropDownList1.Items.Clear()

    Dim connStr As String = Web.Configuration.WebConfigurationManager.ConnectionStrings("ITC").ConnectionString
    Dim conn As New SqlClient.SqlConnection(connStr)
    conn.Open()

    Dim sqlProducts As String = "<<sql_string>>"

    Dim da As New SqlDataAdapter(sqlProducts, conn)
    Dim ds As New DataSet()
    da.Fill(ds, "Products")

    DropDownList1.DataTextField = "Rcode"
    DropDownList1.DataValueField = "Rcode"
    DropDownList1.DataSource = ds.Tables("Products")
    DropDownList1.DataBind()

    ds.Dispose()
    da.Dispose()

    conn.Close()

End Sub

Protected Sub DropDownList1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles DropDownList1.SelectedIndexChanged

    Me.ListBox1.Items.Clear()
    Me.ListBox2.Items.Clear()

    Dim connStr As String = WebConfigurationManager.ConnectionStrings("ITC").ConnectionString
    Dim conn As New SqlConnection(connStr)
    conn.Open()

    Dim sqlProducts As String = "sql_string '" & Me.DropDownList1.Text & "'"

    Dim da As New SqlDataAdapter(sqlProducts, conn)
    Dim ds As New DataSet()
    da.Fill(ds, "Products")

    ListBox1.DataTextField = "accommDescription"
    ListBox1.DataValueField = "accommCode"
    ListBox1.DataSource = ds.Tables("Products")
    ListBox1.DataBind()

    ds.Dispose()
    da.Dispose()
    conn.Close()

    ListBox1.Focus()

End Sub 
```

# java - 用另一个 log4j.xml 文件覆盖 log4j 配置

> ID：13686233
> 
> 赞同：1
> 
> 时间：2012-12-03T15:20:43.383
> 
> 标签：java, log4j

是否可以使用在运行时加载的另一个 log4j.xml 文件添加或覆盖以前由 log4j.xml 文件加载的 log4j 配置？

我的 Glassfish 服务器在启动时加载 log4j.xml 文件，我想用 EAR 文件中的另一个 log4j.xml 文件更改此配置。

我尝试使用`DOMConfigurator.configure("log4j.xml")`，但似乎之前的配置没有被覆盖（但是这个方法找到 log4j.xml 文件，因为当我更改为不存在的文件时，我有异常）。

请问我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:53:57.033

log4j`Configurator`总是从“当前”设置开始应用其配置。如果您希望新设置替换旧设置，只需`LogManager.resetConfiguration()`先调用，然后再调用`DOMConfigurator`.

# regex - 接受浮点数和减号 (-) 的正则表达式

> ID：13686237
> 
> 赞同：15
> 
> 时间：2012-12-03T15:20:57.750
> 
> 标签：regex

我想要一个只接受从 0 到 9 的浮点数和减号的正则表达式。

请帮忙。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-03T15:34:24.017

`^[-+]?[0-9]*\.?[0-9]+$`

*   `^`- 字符串的开始
*   `[-+]?`- 0 或 1 符号指示符
*   `[0-9]*`- 0 个或多个整数
*   `\.`- 字符`.`（`.`在正则表达式中用于表示“任何字符”）
*   `[0-9]+`- 1 个或多个整数
*   `$`- 字符串的结尾

如果您改为使用逗号作为小数分隔符，请使用`,`代替`\.`

如果您同时使用两者/任何一个，则可以使用`[.,]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T15:26:54.753

试试`^[-+]?[0-9]*[.,]?[0-9]+$`。

此正则表达式将匹配一个可选符号，即后跟零个或多个数字，后跟一个点和一个或多个数字（带有可选整数部分的浮点数），或者后跟一个或多个数字（整数）。

资料来源：[http](http://www.regular-expressions.info/floatingpoint.html) ://www.regular-expressions.info/floatingpoint.html - 改为使用逗号作为小数分隔符

# prolog - PROLOG：如何知道一个数字是否是一个完美的数字？

> ID：13686241
> 
> 赞同：2
> 
> 时间：2012-12-03T15:21:16.003
> 
> 标签：prolog, perfect-numbers

完美数等于除自身之外的所有除数之和。例如 6 = 1+2+3，那么 6 是一个完美数。

我想知道如何在 PROLOG 中实现这一点。

你能给我一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:51:29.663

-Hello Steven,as you may be aware by now PROLOG is a declarative language where we express the program logic using relations.

Your task is to express the relation between a given number and the sum of its divisors. In order to find the sum, you will have to iterate through all possible integers starting from 1 to Number-1(since Number wont be included in the sum) and test whether a given integer is a divisor of the input number. If the integer is a divisor then add it to the current sum,increment the integer and repeat the task until you reach an integer that has the same value as the input number. Once you get there all you have to do is check the sum( if the sum is equal to our input number, we have a perfect number,otherwise we don't). Below are given the predicates we need :

```
perfectNumber(Number) :- perfectNumber(Number,1,0).

perfectNumber(Number,Number,Sum):- Number = Sum.
perfectNumber(Number,CurrDivisor,CurrSum) :-  not(CurrDivisor = Number),
                                              NewDivisor is CurrDivisor+1,
                                              0 is mod(Number,CurrDivisor), 
                                              NewSum is CurrSum+CurrDivisor,
                                              perfectNumber(Number,NewDivisor,NewSum).

perfectNumber(Number,CurrDivisor,CurrSum) :- not(CurrDivisor = Number),
                                             NewDivisor is CurrDivisor+1,perfectNumber(Number,NewDivisor,CurrSum). 
```

Let me know what you think.

# php - 如何基于 Wordpress 中的下拉菜单创建自定义 URL - 表单提交

> ID：13686245
> 
> 赞同：1
> 
> 时间：2012-12-03T15:21:28.567
> 
> 标签：php, wordpress, post

我需要根据从下拉列表中选择的选项在 URL 上附加一个特定的词，以创建自定义确认屏幕 URL。我使用哪种联系表格（联系表格 7、Gravity 等）并不重要。我一直在网上寻找解决方案，并找到了一个可能有帮助的解决方案：

```
header( "Location: http://mysite.com/result/?" . $_POST['dropdown_name'] ); 
```

但我不知道把它放在哪里。在联系表格 7 的 submits.php 中，我有这个：

```
<input type="text" name="submit" class="tag" readonly="readonly" onfocus="this.select()" /> 
```

我可以在这里使用它以某种方式根据选择的下拉值重定向到页面吗？我可以预先定义要传递的 URL 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:32:05.957

下拉列表是一个`<select>`元素而不是`<input>`.
当然可以这样做，我建议为此制作一个小插件并将重定向添加到`init`类似这样的操作中。

```
<?php
/*
Plugin name: redirect on post
Desciption: http://stackoverflow.com/questions/13686245/how-to-create-a-custom-url-based-on-dropdown-in-wordpress-form-submission
*/ 
function redirect_on_submit() {
  // check if the post is set
  if (isset($_POST['dropdown_name']) && ! empty ($_POST['dropdown_name'])) {
    header( "Location: http://mysite.com/result/?" . $_POST['dropdown_name'] );
  }
}
add_action('init', redirect_on_submit); 
```

将此添加到插件文件夹中的新文件并在插件菜单中激活它。

# java - Shiro Security，多个领域，哪些授权信息被占用？

> ID：13686246
> 
> 赞同：1
> 
> 时间：2012-12-03T15:21:32.210
> 
> 标签：java, security, authentication, authorization, shiro

我在我的 shiro 安全保护 java 应用程序中使用了两个领域。一个支持我的 OAuthToken，另一个支持 UsernamePasswordToken。现在，当我的用户使用 OAuthToken 进行身份验证时，我的 OAuthRealm 的 doGetAuthenticationInfo 方法被调用，但我的**PasswordRealm**的 doGetAuthorizationInfo被调用，谁能告诉我，为什么？

亲切的问候克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:42:57.273

尝试在您的领域中覆盖方法[isPermitted()](http://shiro.apache.org/static/current/apidocs/org/apache/shiro/realm/AuthorizingRealm.html#isPermitted%28org.apache.shiro.subject.PrincipalCollection,%20java.lang.String%29)。Shiro 使用此方法检查每个声明的领域，是否允许当前领域授权用户。您可以以某种方式实现此方法：

```
/**
 * {@inheritDoc}
 */
@Override
public boolean isPermitted(PrincipalCollection principals, String permission) {
    if (principals.fromRealm("realm name").isEmpty()) {
        return false;
    }
    else {
        return super.isPermitted(principals, permission);
    }
} 
```

# windows - 已调试进程中的 WriteProcessMemory

> ID：13686247
> 
> 赞同：1
> 
> 时间：2012-12-03T15:21:35.383
> 
> 标签：windows, debugging, winapi

我尝试编写简单的调试器。为简单起见，假设调试器在 Windows XP 下运行。

首先，我创建新流程如下：

```
CreateProcess(processName,
        NULL, 
        NULL, 
        NULL, 
        false, 
        DEBUG_PROCESS | DEBUG_ONLY_THIS_PROCESS, 
        NULL, 
        NULL, 
        &startInfo, 
        &openedProcessInfo); 
```

当我尝试在调试过程的内存中读取或写入某些内容时，会出现一些问题。例如：

```
 DWORD oldProtect;
    if(!VirtualProtectEx(hProcess, breakpointAddr, 1, PAGE_EXECUTE_READWRITE, &oldProtect)) {
        printf("Error: %d\n", GetLastError());
    }

    SIZE_T bytesRead = 0;
    SIZE_T bytesWritten = 0;        
    BYTE instruction;

    BOOL isOk = ReadProcessMemory(hProcess, breakpointAddr, &instruction, 1, &bytesRead);
    BYTE originalByte = instruction;

    instruction = 0xCC;
    if(isOk && bytesRead == 1) {
        isOk = WriteProcessMemory(hProcess, breakpointAddr, &instruction, 1, &bytesWritten);
        if(isOk) {
            isOk = FlushInstructionCache(hProcess, breakpointAddr, 1);
        }
    }
    if(!isOk) {
        printf("Error: %d\n", GetLastError());
    } 
```

它有效，但并非无处不在。当我要写入（读取）某些内容的地址位于可执行模块（.exe）中时，它可以工作。

但是当我尝试在 DLL 库中写入（读取）某些内容时（例如，在函数 VirtualAlloc 的地址处读取）**VirtualProtectEx 返回 false 和 GetLastError = 487**（尝试访问无效地址）并且**ReadProcessMemory 也返回 false 和 GetLastError = 299**（仅部分ReadProcessMemory 或 WriteProcessMemory 请求已完成。）

调试权限已启用，但没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-28T21:56:27.567

您的代码看起来不错，如果您以管理员身份运行，则问题的最可能原因是 breakpointAddr 是无效地址。VirtualProtectEx 给你“尝试访问无效地址”错误支持这个结论。

# c# - c# - 如何编码要在嵌入标签中使用的 pdf 文档的路径？

> ID：13686257
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:22:02.647
> 
> 标签：c#, html, urlencode

在我的 c# 代码中，我将嵌入标签的字符串（在网络上显示 pdf）嵌入到 DOM（asp.net 站点）中，我注意到当 pdf 的名称包含撇号之类的字符时，它无法加载文档.

我可以对 pdf 文档的路径进行编码以使其适用于任何 url 的最佳方法是什么？

这不起作用：http: [//msdn.microsoft.com/en-us/library/zttxte6w.aspx](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

当我这样做时，它虽然 src = src.Replace("'", "%27"); 有没有一个函数可以像这样对它进行 url 编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:32:03.403

我测试过`HttpServerUtility.UrlEncode`，`HttpServerUtility.HtmlEncode`它们不编码简单的引号。

您应该编写自己的代码来做到这一点。

# java - AVL 和红黑树

> ID：13686263
> 
> 赞同：-5
> 
> 时间：2012-12-03T15:22:26.507
> 
> 标签：java, binary-tree, avl-tree, red-black-tree

我不知道如何解决这些问题。但是，我确实在这里找到了 AVL 树的示例代码：http: [//users.cis.fiu.edu/~weiss/dsaajava/code/DataStructures/AvlTree.java](http://users.cis.fiu.edu/~weiss/dsaajava/code/DataStructures/AvlTree.java)

但是，我仍然不确定如何做到这一点。有人可以帮我解决这个问题吗？

我需要将以下键插入到空的 AVL 树中，并在每次插入后显示树。密钥需要被视为字符串而不是月份。例如，Jul < Jun. DEC, JAN, APR, MAR, JUL, AUG, OCT, SEP, FEB, NOV, MAY, JUN

将以下键插入到一个空的红黑树中，并在每次插入后显示该树。键应视为字符串而不是月份。例如，Jul < Jun. DEC, JAN, APR, MAR, JUL, AUG, OCT, SEP, FEB, NOV, MAY, JUN

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:28:38.320

去找一块白板，带上你的教科书，按照教科书中描述的操作进行插入、删除等操作。忘记实际代码，直到你明白发生了什么。如果您没有教科书，请获取这本（可能在图书馆）[Corman、Leiserson、Rivest 和 Stein](https://rads.stackoverflow.com/amzn/click/com/0262033844)。

StackOverflow 上没有人能比谷歌搜索“我如何实现 AVL 树？”更好地帮助您。直到你这样做。我保证，whiteboard-fu 将比您在互联网上阅读的任何内容更能帮助您 - 边做边学。

# android - 如何检查适配器的最新元素何时显示在屏幕上？

> ID：13686264
> 
> 赞同：0
> 
> 时间：2012-12-03T15:22:26.673
> 
> 标签：android

我有自己的`Adapter`扩展名`BaseAdapter`。我需要知道当`Adapter`用户滚动到它时，用户屏幕上何时显示最新的元素。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:24:35.840

您可以覆盖元素视图中的 onDraw() 方法。当 onDraw() 被调用时，你知道元素在屏幕上。设计方面，您可以在每个元素的视图中都有一个观察者。适配器将自己（或不同的客户端）注册为最后/最新元素视图的观察者。当视图被绘制时，它会通知观察者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:28:46.067

尝试这个...

```
adapter.notifyDataSetChanged(); 
```

它将刷新您的适配器，通知是否有任何更改..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:28:47.243

检查下面的代码：

```
listView.setOnScrollListener(new OnScrollListener() {
        // ...

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {             
            boolean isLastRowShown = view.getLastVisiblePosition() == (view.getAdapter().getCount() - 1);
        }
    }); 
```

# java - OutputStream 的 flush 方法什么都不做？

> ID：13686265
> 
> 赞同：13
> 
> 时间：2012-12-03T15:22:28.893
> 
> 标签：java, io, outputstream

来自[`OutputStream.flush()`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html#flush%28%29)文档。

为什么它在文档中说明*flush 方法`OutputStream`*在解释它实际上做了*什么之后什么都不做？*很混乱。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-03T15:24:16.143

`OutputStream`是要派生的抽象类。*如有必要*，子类将提供它们自己的实现。否则默认行为是什么都不做。

例如查看[ObjectOutputStream.flush()的代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/ObjectOutputStream.java#ObjectOutputStream.BlockDataOutputStream.flush%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:25:44.350

`OutputStream`是一个抽象类。如果需要刷新，派生实例必须覆盖它。例如`BufferedOutputStream`.
没有缓冲区的流可能不需要覆盖`flush()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:27:19.937

正文的第一部分是描述一般合同`flush`。扩展的类`OutputStream`应遵守本合同。

`OutputStream`是一个抽象类，但提供了一个默认实现`flush`。如前所述，该实现什么也不做。

# rdf - 按标题对 DBpedia 进行稳健搜索

> ID：13686266
> 
> 赞同：6
> 
> 时间：2012-12-03T15:22:34.627
> 
> 标签：rdf, sparql, wikipedia, dbpedia, wikipedia-api

我需要编写一个 SPARQL 查询来从 dbpedia 获取电影。我已经写了几乎所有的查询，但我有这个问题：

我拥有所有这些标题，它们必须给我相同的维基百科资源：

*   蜘蛛侠
*   蜘蛛侠
*   电影：蜘蛛侠
*   蜘蛛侠 1
*   蜘蛛侠：开始

目标维基百科：[http](http://en.wikipedia.org/wiki/Spider-Man_(film) ://en.wikipedia.org/wiki/Spider-Man_(film )

我想要一个 sparql 查询，它可以让我找到按标题搜索的相同 Wikipedia 资源

此外，有没有办法获得每个结果的“相关性”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:32:48.980

试试这个，它应该返回原始页面或重定向到主页的任何其他页面：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX dbo: <http://dbpedia.org/ontology/>

SELECT ?s WHERE {
  {
    ?s rdfs:label "Spider-man"@en .

  }
  UNION
  {
    ?altName rdfs:label "Spider-man"@en ;
             dbo:wikiPageRedirects ?s .
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:15:10.063

您可以显示查询吗？

对于文本搜索，如果您使用官方 dbpedia 端点，您可能可以使用 virtuoso 的文本搜索工具。

见这里：[http ://dbpedia.aksw.org/dbpedia_demo/dbpedia/tutorials/ranked_keyword_search/demo.php](http://dbpedia.aksw.org/dbpedia_demo/dbpedia/tutorials/ranked_keyword_search/demo.php)

# mysql - 选择两种日期时间格式之间的所有记录

> ID：13686274
> 
> 赞同：6
> 
> 时间：2012-12-03T15:22:58.740
> 
> 标签：mysql, sql, date, date-format

我有这个查询，我需要选择两个日期之间的所有记录，mysql 表是日期时间格式。

我试过这个，但没有用。

```
select * from cdr
 WHERE calldate BETWEEN '2012-12-01' AND '2012-12-03'; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T15:23:56.233

试试这个：

```
select * from cdr
WHERE DATE(calldate) BETWEEN '20121201' AND '20121203'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T06:52:39.757

**试试这个查询 -**

```
SELECT * FROM cdr WHERE calldate BETWEEN str_to_date('2012-12-01','%Y-%m-%d') AND str_to_date('2012-12-03','%Y-%m-%d'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T17:24:18.653

以上会很好用。如果您想添加额外的条件，正常的布尔逻辑也适用于日期/时间，因此您可以执行类似的操作

```
...
where DATE(calldate) < '20121201' AND DATE(calldate) >= '20121203' OR DATE(calldate) = '20121205' 
```

只是一个简单的例子。

# android - Android - 动态添加标签

> ID：13686278
> 
> 赞同：1
> 
> 时间：2012-12-03T15:23:22.240
> 
> 标签：android, tabs

我必须在所有选项卡中添加 n 个具有相同布局的选项卡（比如在 xml 中声明的 llItemList）。在下面的代码片段中，当我创建 n 个选项卡时。所有布局都使用 llItemList 的相同副本，而不是选项卡自己的副本。您能否让我知道如何在将动态创建的所有选项卡中创建 llItemList 的单独副本。提前致谢

```
 //---------------------------------
    // insert the tabs dynamically
    //--------------------------------- 
    for (int i=1; i<=n; i++){
        final String tabName = "tab" + Integer.toString(i);
        final TabSpec ourSpec = th.newTabSpec(tabName);
        ourSpec.setContent(new TabHost.TabContentFactory() { 
            public View createTabContent(String tag) { 
            ourSpec.setContent(R.id.llItemList);   
            TextView text = new TextView(NewTicket.this);
            String tabText = tabName;
            text.setText("You've created a new tab " + tabText); 
            return (text);
            }
        });
        ourSpec.setIndicator(tabName);
        th.addTab(ourSpec);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:43:45.097

您应该`TabSpec`通过指定来指定

*   视图的 id，**或**
*   一个`TabHost.TabContentFactory`创建视图内容的

您的代码两者兼而有之！

将您的代码更改为以下之一：

```
for (int i=1; i<=n; i++){
    final String tabName = "tab" + Integer.toString(i);
    final TabSpec ourSpec = th.newTabSpec(tabName);
    ourSpec.setContent(new TabHost.TabContentFactory() { 
        public View createTabContent(String tag) { 
            TextView text = new TextView(NewTicket.this);
            String tabText = tabName;
            text.setText("You've created a new tab " + tabText); 
            return (text);
        }
    });
    ourSpec.setIndicator(tabName);
    th.addTab(ourSpec);
} 
```

或者

```
for (int i=1; i<=n; i++){
    final String tabName = "tab" + Integer.toString(i);
    final TabSpec ourSpec = th.newTabSpec(tabName);
    ourSpec.setContent(R.id.llItemList);   
    ourSpec.setIndicator(tabName);
    th.addTab(ourSpec);
} 
```

**编辑：**

如您的评论中所述，要保留相同的 实例`ListView`，请执行以下操作：

1.  注册一个`TabHost.OnTabChangeListener`
2.  When the tab changes, you should first call `removeView()`on the ListView's current parent and then `addView()`it to the new parent.

# java - Android FragmentTabHost - 尚未完全出炉？

> ID：13686282
> 
> 赞同：18
> 
> 时间：2012-12-03T15:23:32.617
> 
> 标签：java, android, android-fragments, android-tabhost

我想看看是否有人在使用新的 Android API 级别 17 附带的 FragmentTabHost 自定义选项卡方面取得了成功。

我很高兴能够在我的 ViewPager SherlockFragments 中嵌套一个 tabHost，但是我在做一些简单的事情时遇到了麻烦，比如将选项卡移动到底部或更改选项卡的布局。

有人见过使用此功能的好例子吗？

这是我可以在 Android 文档中找到的唯一示例，并且几乎没有任何描述其用途的示例。它似乎也忽略了布局中定义的任何内容`R.id.fragment1`。

我想我的问题是是否有人遇到过一个很好的教程 re:FragmentTabHost 或者他们是否知道如何 a) 将嵌套选项卡放在底部或 b) 更改所述选项卡的布局。

我已经尝试了所有常用的方法，但是由于 XML 布局文件似乎被覆盖了，所以我运气不佳。

```
private FragmentTabHost mTabHost;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    setContentView(R.layout.fragment_tabs);
    mTabHost = (FragmentTabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent);

    mTabHost.addTab(mTabHost.newTabSpec("simple").setIndicator("Simple"),
            FragmentStackSupport.CountingFragment.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("contacts").setIndicator("Contacts"),
            LoaderCursorSupport.CursorLoaderListFragment.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("custom").setIndicator("Custom"),
            LoaderCustomSupport.AppListFragment.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("throttle").setIndicator("Throttle"),
            LoaderThrottleSupport.ThrottledLoaderListFragment.class, null);

    return mTabHost;
} 
```

在做了一些研究之后，似乎在支持库中初始化 FragmentTabHost 时可能会出现故障。[Google 代码上](http://code.google.com/p/android/issues/detail?id=40035)的用户对此提出了建议：

FragmentTabHost.java

```
private void initFragmentTabHost(Context context, AttributeSet attrs) {
    TypedArray a = context.obtainStyledAttributes(attrs,
            new int[] { android.R.attr.inflatedId }, 0, 0);
    mContainerId = a.getResourceId(0, 0);
    a.recycle();

    super.setOnTabChangedListener(this);

    // If owner hasn't made its own view hierarchy, then as a convenience
    // we will construct a standard one here.

/***** HERE COMMENT CODE BECAUSE findViewById(android.R.id.tabs) EVERY TIME IS NULL WE HAVE OWN         LAYOUT ******//

//        if (findViewById(android.R.id.tabs) == null) {
//            LinearLayout ll = new LinearLayout(context);
//            ll.setOrientation(LinearLayout.VERTICAL);
//            addView(ll, new FrameLayout.LayoutParams(
//                    ViewGroup.LayoutParams.FILL_PARENT,
//                    ViewGroup.LayoutParams.FILL_PARENT));
//
//            TabWidget tw = new TabWidget(context);
//            tw.setId(android.R.id.tabs);
//            tw.setOrientation(TabWidget.HORIZONTAL);
//            ll.addView(tw, new LinearLayout.LayoutParams(
//                    ViewGroup.LayoutParams.FILL_PARENT,
//                    ViewGroup.LayoutParams.WRAP_CONTENT, 0));
//
//            FrameLayout fl = new FrameLayout(context);
//            fl.setId(android.R.id.tabcontent);
//            ll.addView(fl, new LinearLayout.LayoutParams(0, 0, 0));
//
//            mRealTabContent = fl = new FrameLayout(context);
//            mRealTabContent.setId(mContainerId);
//            ll.addView(fl, new LinearLayout.LayoutParams(
//                    LinearLayout.LayoutParams.FILL_PARENT, 0, 1));
//        }
} 
```

片段的 XML 布局：

```
<android.support.v4.app.FragmentTabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">  
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0"/>
    <FrameLayout
        android:id="@+id/realtabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>
    <TabWidget
        android:id="@android:id/tabs"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"/>

</LinearLayout>
</android.support.v4.app.FragmentTabHost> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T15:12:21.830

我终于明白了这一点。FragmentTabHost.java 存在一个问题，它总是会为您创建一个 TabHost 元素，无论您在 XML 中定义什么并预先膨胀。

因此，我在编写自己的 FragmentTabHost.java 版本时注释掉了那部分代码。

确保在您的 XML 布局中使用您的新版本，`<com.example.app.MyFragmentTabHost`

当然还有充气：

片段1.java：

```
mTabHost = (MyFragmentTabHost) view.findViewById(android.R.id.tabhost);
mTabHost.setup(getActivity(), getChildFragmentManager(), android.R.id.tabcontent); 
```

MyFragmentTabHost.java：

```
package com.example.app;

import java.util.ArrayList;

import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.os.Parcel;
import android.os.Parcelable;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.util.AttributeSet;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.TabHost;

/**
 * Special TabHost that allows the use of {@link Fragment} objects for
 * its tab content.  When placing this in a view hierarchy, after inflating
 * the hierarchy you must call {@link #setup(Context, FragmentManager, int)}
 * to complete the initialization of the tab host.
 *
 */
public class MyFragmentTabHost extends TabHost
    implements TabHost.OnTabChangeListener {
private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
private FrameLayout mRealTabContent;
private Context mContext;
private FragmentManager mFragmentManager;
private int mContainerId;
private TabHost.OnTabChangeListener mOnTabChangeListener;
private TabInfo mLastTab;
private boolean mAttached;

static final class TabInfo {
    private final String tag;
    private final Class<?> clss;
    private final Bundle args;
    private Fragment fragment;

    TabInfo(String _tag, Class<?> _class, Bundle _args) {
        tag = _tag;
        clss = _class;
        args = _args;
    }
}

static class DummyTabFactory implements TabHost.TabContentFactory {
    private final Context mContext;

    public DummyTabFactory(Context context) {
        mContext = context;
    }

    @Override
    public View createTabContent(String tag) {
        View v = new View(mContext);
        v.setMinimumWidth(0);
        v.setMinimumHeight(0);
        return v;
    }
}

static class SavedState extends BaseSavedState {
    String curTab;

    SavedState(Parcelable superState) {
        super(superState);
    }

    private SavedState(Parcel in) {
        super(in);
        curTab = in.readString();
    }

    @Override
    public void writeToParcel(Parcel out, int flags) {
        super.writeToParcel(out, flags);
        out.writeString(curTab);
    }

    @Override
    public String toString() {
        return "FragmentTabHost.SavedState{"
                + Integer.toHexString(System.identityHashCode(this))
                + " curTab=" + curTab + "}";
    }

    public static final Parcelable.Creator<SavedState> CREATOR
            = new Parcelable.Creator<SavedState>() {
        public SavedState createFromParcel(Parcel in) {
            return new SavedState(in);
        }

        public SavedState[] newArray(int size) {
            return new SavedState[size];
        }
    };
}

public MyFragmentTabHost(Context context) {
    // Note that we call through to the version that takes an AttributeSet,
    // because the simple Context construct can result in a broken object!
    super(context, null);
    initFragmentTabHost(context, null);
}

public MyFragmentTabHost(Context context, AttributeSet attrs) {
    super(context, attrs);
    initFragmentTabHost(context, attrs);
}

private void initFragmentTabHost(Context context, AttributeSet attrs) {
    TypedArray a = context.obtainStyledAttributes(attrs,
            new int[] { android.R.attr.inflatedId }, 0, 0);
    mContainerId = a.getResourceId(0, 0);
    a.recycle();

    super.setOnTabChangedListener(this);

    /*** REMOVE THE REST OF THIS FUNCTION ***/
    /*** findViewById(android.R.id.tabs) IS NULL EVERY TIME ***/
}

/**
 * @deprecated Don't call the original TabHost setup, you must instead
 * call {@link #setup(Context, FragmentManager)} or
 * {@link #setup(Context, FragmentManager, int)}.
 */
@Override @Deprecated
public void setup() {
    throw new IllegalStateException(
            "Must call setup() that takes a Context and FragmentManager");
}

public void setup(Context context, FragmentManager manager) {
    super.setup();
    mContext = context;
    mFragmentManager = manager;
    ensureContent();
}

public void setup(Context context, FragmentManager manager, int containerId) {
    super.setup();
    mContext = context;
    mFragmentManager = manager;
    mContainerId = containerId;
    ensureContent();
    mRealTabContent.setId(containerId);

    // We must have an ID to be able to save/restore our state.  If
    // the owner hasn't set one at this point, we will set it ourself.
    if (getId() == View.NO_ID) {
        setId(android.R.id.tabhost);
    }
}

private void ensureContent() {
    if (mRealTabContent == null) {
        mRealTabContent = (FrameLayout)findViewById(mContainerId);
        if (mRealTabContent == null) {
            throw new IllegalStateException(
                    "No tab content FrameLayout found for id " + mContainerId);
        }
    }
}

@Override
public void setOnTabChangedListener(OnTabChangeListener l) {
    mOnTabChangeListener = l;
}

public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
    tabSpec.setContent(new DummyTabFactory(mContext));
    String tag = tabSpec.getTag();

    TabInfo info = new TabInfo(tag, clss, args);

    if (mAttached) {
        // If we are already attached to the window, then check to make
        // sure this tab's fragment is inactive if it exists.  This shouldn't
        // normally happen.
        info.fragment = mFragmentManager.findFragmentByTag(tag);
        if (info.fragment != null && !info.fragment.isDetached()) {
            FragmentTransaction ft = mFragmentManager.beginTransaction();
            ft.detach(info.fragment);
            ft.commit();
        }
    }

    mTabs.add(info);
    addTab(tabSpec);
}

@Override
protected void onAttachedToWindow() {
    super.onAttachedToWindow();

    String currentTab = getCurrentTabTag();

    // Go through all tabs and make sure their fragments match
    // the correct state.
    FragmentTransaction ft = null;
    for (int i=0; i<mTabs.size(); i++) {
        TabInfo tab = mTabs.get(i);
        tab.fragment = mFragmentManager.findFragmentByTag(tab.tag);
        if (tab.fragment != null && !tab.fragment.isDetached()) {
            if (tab.tag.equals(currentTab)) {
                // The fragment for this tab is already there and
                // active, and it is what we really want to have
                // as the current tab.  Nothing to do.
                mLastTab = tab;
            } else {
                // This fragment was restored in the active state,
                // but is not the current tab.  Deactivate it.
                if (ft == null) {
                    ft = mFragmentManager.beginTransaction();
                }
                ft.detach(tab.fragment);
            }
        }
    }

    // We are now ready to go.  Make sure we are switched to the
    // correct tab.
    mAttached = true;
    ft = doTabChanged(currentTab, ft);
    if (ft != null) {
        ft.commit();
        mFragmentManager.executePendingTransactions();
    }
}

@Override
protected void onDetachedFromWindow() {
    super.onDetachedFromWindow();
    mAttached = false;
}

@Override
protected Parcelable onSaveInstanceState() {
    Parcelable superState = super.onSaveInstanceState();
    SavedState ss = new SavedState(superState);
    ss.curTab = getCurrentTabTag();
    return ss;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    SavedState ss = (SavedState)state;
    super.onRestoreInstanceState(ss.getSuperState());
    setCurrentTabByTag(ss.curTab);
}

@Override
public void onTabChanged(String tabId) {
    if (mAttached) {
        FragmentTransaction ft = doTabChanged(tabId, null);
        if (ft != null) {
            ft.commit();
        }
    }
    if (mOnTabChangeListener != null) {
        mOnTabChangeListener.onTabChanged(tabId);
    }
}

private FragmentTransaction doTabChanged(String tabId, FragmentTransaction ft) {
    TabInfo newTab = null;
    for (int i=0; i<mTabs.size(); i++) {
        TabInfo tab = mTabs.get(i);
        if (tab.tag.equals(tabId)) {
            newTab = tab;
        }
    }
    if (newTab == null) {
        throw new IllegalStateException("No tab known for tag " + tabId);
    }
    if (mLastTab != newTab) {
        if (ft == null) {
            ft = mFragmentManager.beginTransaction();
        }
        if (mLastTab != null) {
            if (mLastTab.fragment != null) {
                ft.detach(mLastTab.fragment);
            }
        }
        if (newTab != null) {
            if (newTab.fragment == null) {
                newTab.fragment = Fragment.instantiate(mContext,
                        newTab.clss.getName(), newTab.args);
                ft.add(mContainerId, newTab.fragment, newTab.tag);
            } else {
                ft.attach(newTab.fragment);
            }
        }

        mLastTab = newTab;
    }
    return ft;
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T10:08:58.763

我认为，将方法设置`initFragmentTabHost()`为构造函数是错误的。那时 TabHost 不要他的孩子 - 它发生在之后。`LinearLayout`，例如，在`onMeasure()`方法（[grepcode](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/LinearLayout.java#LinearLayout.onMeasure%28int,int%29)）中与他的孩子一起工作。`ViewGroup`在构造函数中只是初始化变量，并设置`mChildrenCount = 0`（[grepcode](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/view/ViewGroup.java#ViewGroup.initViewGroup%28%29)）。

我所能做的，只是装扮`FragmentTabHost`：

```
<android.support.v4.app.FragmentTabHost xmlns:a="http://schemas.android.com/apk/res/android"
    a:id="@android:id/tabhost"
    style="@style/Widget.TabHost"
    a:inflatedId="@+id/content" /> 
```

和服装`Tabs`（标签高度有问题，我在代码中解决它们）：

```
<LinearLayout xmlns:a="http://schemas.android.com/apk/res/android"
    style="@style/Widget.Tab" >
    <TextView
        a:id="@android:id/title"
        style="@style/Widget.TabTitle" />
</LinearLayout> 
```

在代码中：

```
 tabSpec = mTabHost.newTabSpec(tag).setIndicator(createTab(caption));

...

    private View createTab(CharSequence title) {
        final View v = View.inflate(getActivity(), LAYOUT_TAB, null);
        ((TextView) v.findViewById(android.R.id.title)).setText(title);
        return v;
    } 
```

`TabWidget`我认为我们只能通过编程操作进行其他自定义，如下所示：

```
 final View tabs = (TabWidget) mTabHost.findViewById(android.R.id.tabs);
    final ViewGroup parent = (ViewGroup) mTabHost.getChildAt(0); 
    parent.removeView(tabs);
    parent.addView(tabs); 
```

恕我直言，这不好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:27:13.273

据我测试[jamisOn](https://stackoverflow.com/users/1171978/jamis0n)解决方案很好。重要的是不要使用其构造函数初始化 MyFragmentTabHost。至少如果持有 MyFragmentTabHost 的类是一个片段。我还没有用 FragmentActivity 测试过......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-05T04:34:26.023

我想提一下 FragmentTabHost 的更多问题。我正在使用**ViewPager**，其中每个页面（视图）都包含一个 FragmentTabHost，我必须克服几个问题：

1) FragmentTabHost 假定它是其父 FragmentManager 中唯一的 FragmentTabHost（第二个参数`FragmentTabHost.setup()`）。这导致了其余的问题......

2）您在调用时提供的“标签”`addTab()`直接传递给 FragmentManager，因此，如果您只是对所有页面使用硬编码标签（这是一个非常合理的做法），您的第一页将创建标签片段，而其他所有页面将**重用**那些标签。是的，第 2 页控制第 1 页...

解决方案是生成唯一的标签名称。我将页码附加到硬编码的字符串中：

```
public Object instantiateItem( ViewGroup container, int position )
{
    ...
    tabHost.addTab( tabHost.newTabSpec( "tab1_" + position ) ...);
    tabHost.addTab( tabHost.newTabSpec( "tab2_" + position ) ...);
    tabHost.addTab( tabHost.newTabSpec( "tab3_" + position ) ...);
    ...
} 
```

3) 所有选项卡片段都放置在仅由“view id”（的第三个参数`FragmentTabHost.setup()`）标识的容器中。这意味着当 FragmentManager 将 viewId 解析为 View 时，它总是会找到第一个实例（从第一页开始）。您的所有其他页面都将被忽略。

解决方案是为您的“标签内容”视图分配唯一 ID，例如：

```
public Object instantiateItem( ViewGroup container, int position )
{
    View view = m_inflater.inflate(R.layout.page, null);

    View tabContent = view.findViewById(R.id.realtabcontent);
    tabContent.setId(m_nextViewId);
    m_nextViewId++;

    MyFragmentTabHost tabHost = (MyFragmentTabHost) view.findViewById(android.R.id.tabhost);
    tabHost.setup(m_activity, m_activity.getSupportFragmentManager(), tabContent.getId());
    ...
} 
```

4) 销毁时不会移除标签碎片。当您滑动时 ViewPager 会破坏未使用的视图，而这些视图中包含的 FragmentTabHosts 会“泄漏”选项卡片段。当 ViewPager 重新实例化以前看到的页面（使用以前使用的标签）时，FragmentTabHost 会注意到这些选项卡的片段已经存在并简单地重新附加它们。这会爆炸，因为片段指向已被 ViewPager 破坏的视图。

解决方案是在 FragmentTabHost 被销毁时移除 Fragment。您需要将此代码添加到`onDetachedFromWindow()`FragmentTabHost.java 的本地副本中

```
class MyFragmentTabHost
{
    ...

    protected void onDetachedFromWindow()
    {
        super.onDetachedFromWindow();
        mAttached = false;

        boolean removeFragments = false;
        if( mContext instanceof Activity )
        {
            Activity activity = (Activity)mContext;
            removeFragments = !activity.isDestroyed();
        }

        if( removeFragments )
        {
            FragmentTransaction ft = null;
            for (int i = 0; i < mTabs.size(); i++)
            {
                TabInfo tab = mTabs.get(i);
                if (tab.fragment != null)
                {
                    if (ft == null)
                    {
                        ft = mFragmentManager.beginTransaction();
                    }
                    ft.remove(tab.fragment);
                }
            }

            if (ft != null)
            {
                ft.commit();
                mFragmentManager.executePendingTransactions();
            }
        }
    } 
```

* * *

您也可以通过使用 FragmentPagerAdapter 或 FragmentStatePagerAdapter（制作片段）而不是标准的 PagerAdapter（制作视图）来解决这些问题。然后你会打电话`FragmentTabHost.setup( ... fragment.getChildFragmentManager() ... )`。

# c++ - 提升与 Q_FOREACH (Qt) 和 moc 生成的 foreach 冲突？

> ID：13686283
> 
> 赞同：4
> 
> 时间：2012-12-03T15:23:36.613
> 
> 标签：c++, qt, boost, point-cloud-library

我有一个使用 Qt 和点云库 (PCL) 等库在 Vs 2008 中编辑的程序。

PCL 有一个包含 boost 的 3rd 方库。

但是编译后出现了一些错误：

> 1>C:\Program Files\PCL 1.5.1\3rdParty\Boost\include\boost/multi_index/sequenced_index.hpp(926) : 错误 C3083: 'Q_FOREACH': '::' 左边的符号必须是类型 1>C:\Program Files\PCL 1.5.1\3rdParty\Boost\include\boost/multi_index/sequenced_index.hpp(926) : 错误 C2039: 'tag' : is not a member of 'boost' 1>C :\Program Files\PCL 1.5.1\3rdParty\Boost\include\boost/multi_index/sequenced_index.hpp(926)：错误 C2061：语法错误：标识符 'tag' 1>C:\Program Files\PCL 1.5.1\ 3rdParty\Boost\include\boost/multi_index/ordered_index.hpp(1399)：错误 C3083：“Q_FOREACH”：“::”左侧的符号必须是类型 1>C:\Program Files\PCL 1.5。 1\3rdParty\Boost\include\boost/multi_index/ordered_index.hpp(1399)：错误 C2039：“标签”：不是 'boost' 的成员 1>C:\Program Files\PCL 1.5.1\3rdParty\Boost\include\boost/multi_index/ordered_index.hpp(1399)：错误 C2061：语法错误：标识符 'tag' 1> C:\Program Files\PCL 1.5.1\3rdParty\Boost\include\boost/multi_index/hashed_index.hpp(1254) : 错误 C3083: 'Q_FOREACH': '::' 左边的符号必须是一个类型1>C:\Program Files\PCL 1.5.1\3rdParty\Boost\include\boost/multi_index/hashed_index.hpp(1254) : error C2039: 'tag' : is not a member of 'boost' 1>C:\ Program Files\PCL 1.5.1\3rdParty\Boost\include\boost/multi_index/hashed_index.hpp(1254)：错误 C2061：语法错误：标识符 'tag' 1>C:\Program Files\PCL 1.5.1\3rdParty\ Boost\include\boost/multi_index/random_access_index.hpp(1012)：错误 C3083：'Q_FOREACH'：'::' 左侧的符号必须是类型 1>C:\Program Files\PCL 1.5.1\3rdParty\Boost\include\boost/multi_index/random_access_index.hpp(1012)：错误 C2039：'tag ' : 不是 'boost' 的成员 1>C:\Program Files\PCL 1.5.1\3rdParty\Boost\include\boost/multi_index/random_access_index.hpp(1012) : 错误 C2061: 语法错误: 标识符 'tag'

对于第一个问题，源文件中的错误位置是：

```
template<typename SuperMeta,typename TagList>
inline boost::mpl::true_* boost_foreach_is_noncopyable(
  boost::multi_index::detail::random_access_index<SuperMeta,TagList>*&,
  boost::foreach::tag) // <-------------error here for the first compile error.
{
  return 0;
} 
```

我认为这可能表明`Q_FOREACH`与 boost foreach 的冲突。

但是我不知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-08T15:59:08.950

问题是 Qt 定义了一个与命名空间冲突的`foreach`宏 ( ) 。`#define foreach Q_FOREACH``boost::foreach`

解决它的最简单方法是在 Qt 之前包含 Boost，或者在包含 boost 的头文件之前简单地取消定义 Qt 的宏。`// remember to include Boost before Qt`我更喜欢第二种，因为它不需要额外的文档（

```
#undef foreach
#include <boost/foreach.hpp> 
```

此选项比禁用 Qt 的关键字（编译标志`-DQT_NO_KEYWORDS`）的侵入性更小，如果需要，只能在受影响的文件中应用。它不会影响使用`Q_FOREACH`（显然如果你使用Qt`foreach`它会失败）。如果 Qt 包含在 之前或之后，它也可以独立工作`<boost/foreach.hpp>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-20T12:21:21.480

设置编译器标志`-DQT_NO_KEYWORDS`，禁用 boost 和 qt 之间的冲突！

但随后您需要替换代码中的 qt 关键字，例如`slots`, `signals`, `emit`...，请参阅[这篇文章](https://stackoverflow.com/questions/22188432/cdk-collides-with-qt-signals)。

（在我的项目中引入 boost::multi_index 容器时，我收到了这条消息。）

*   （对于 qmake 项目`CONFIG += no_keywords`执行此操作。）
*   （对于 cmake 项目`add_definitions(-DQT_NO_KEYWORDS)`执行此操作。）

# java - 将 JsonObject 解析为列表> 使用 Gson？

> ID：13686284
> 
> 赞同：1
> 
> 时间：2012-12-03T15:23:44.117
> 
> 标签：java, gson

我正在尝试将 JSON 对象的字符串表示解析为地图列表。json 对象的结构如下：

```
[
 {       
  "first_name": "fname1",
  "last_name": "lname1"
 },
 {
  "first_name": "fname2",
   "last_name": "lname2"
 }
 .
 .
 .
] 
```

唯一已知的是**仅在运行时**的字符串值（例如“first_name”、“last_name”） ，因此我无法创建任何预定义的类（就像通常在 fromJson() 方法中使用的那样）。

我试图创建以下函数（在我在网上看到一些示例之后）但它没有工作：

```
public List<Map<String, Object>> fromJson(String jsonAsString) {
    final JsonElement jsonElement = this.jsonParser.parse(jsonAsString);

    List<Map<String, Object>> myList= new ArrayList<Map<String, Object>>();
    Type listType = TypeToken.get(myList.getClass()).getType();
    myList= (new Gson()).fromJson(jsonElement, listType);

    return myList;
} 
```

此函数的结果是一个列表（在上述情况下长度 == 2），但不是 2 个地图，而是我得到 2 个对象。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:34:37.670

我不太明白你对`TypeToken`.

的要点`TypeToken`是通过创建匿名类来捕获参数化类型（例如`List<...>`），该类扩展由您要捕获的类型参数化的泛型超类型，使用以下语法：

```
new TypeToken<... type you want to capture ...>() {}.getType() 
```

在您的情况下，应按如下方式使用：

```
myList = new Gson().fromJson(jsonAsString, 
    new TypeToken<List<Map<String, Object>>>() {}.getType()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:38:44.193

您不能像那样使用泛型，在运行时`List<Map<String, Object>> myList`与`List<Object> myList`.

您可以尝试使用一系列地图

```
 Gson gson = new Gson();
    Map[] x = new Map[0];
    Map[] fromJson = gson.fromJson("[\r\n" + 
            " {       \r\n" + 
            "  \"first_name\": \"fname1\",\r\n" + 
            "  \"last_name\": \"lname1\"\r\n" + 
            " },\r\n" + 
            " {\r\n" + 
            "  \"first_name\": \"fname2\",\r\n" + 
            "   \"last_name\": \"lname2\"\r\n" + 
            " }]",x.getClass()); 
```

# c# - 使用 IQueryable 的单元测试代码

> ID：13686286
> 
> 赞同：3
> 
> 时间：2012-12-03T15:23:54.507
> 
> 标签：c#, linq, entity-framework, unit-testing

我被要求为某些功能编写一些单元测试，但坦率地说，我不太确定**对这段特定**代码这样做的必要性或有用性。*我绝不会试图质疑一般单元测试的必要性或有用性。*

有问题的代码非常简单，并且被大量使用。基本上它是 .Skip() 和 .Take() 扩展方法的包装。在我看来，整个方法的合法性值得怀疑。

代码基本上是这样的：

```
public IQueryable<T> Page(IQueryable<T> query, int page, int size)
{
    if(query == null) throw new ArgumentNullException("query");
    if(page < 0) throw new ArgumentOutOfRangeException("page"); 
    if(page < 0) throw new ArgumentOutOfRangeException("size"); 

    return query.Skip(page * size).Take(size);
} 
```

当然我可以对预期的异常进行单元测试，但是还有什么呢？很可能是我错过了重点，所以这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:28:59.000

您可以通过调用来提交静态集合[`AsQueryable`](http://msdn.microsoft.com/en-us/library/bb353734.aspx)

```
List<T> dummyData = new List<T>();
//Add data
var result = Page(dummyData.AsQueryable(), 0, 10);
//Perform assertions on result. 
```

如果您实际上只是想测试您的分页是否正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:30:55.870

你可以在这里测试很多东西：

1.  检查适当的防护（传递无效参数时引发的异常）。
2.  检查是否`Skip`使用正确的参数调用。
3.  检查是否`Take`使用正确的参数调用。
4.  检查`Skip`之前调用`Take`的。

第 2 - 4 点最好用模拟测试。一个模拟框架在这里派上用场。
这种测试称为“基于交互的测试”。

您还可以通过使用包含数据的列表调用被测方法并检查返回的数据是否是正确的子集来使用“基于状态的测试”。

第 2 点的测试可能如下所示：

```
public void PageSkipsThePagesBeforeTheRequestedPage()
{
    var sut = new YourClass();
    var queryable = Substitute.For<IQueryable<int>>();

    sut.Page(queryable, 10, 50);

    queryable.Received().Skip(500);
} 
```

该测试使用[NSubstitute](http://nsubstitute.github.com/)作为模拟框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:27:59.967

事实上，由于`IQueryable<T>`可能封装了一个底层数据存储——实体框架的可查询对象就是这种情况——我们正在谈论**集成测试**。

就我而言，如果我需要测试类似你的代码的东西，我会在数据库中存储一些测试数据以供以后查询。

因为我可以预期结果，所以我可以执行一个断言来检查测试的方法是否返回了预期的结果。

## 更新

由于我对不赞成票和一些评论感到有些困惑，因此我想指出，考虑到**答案被标记为实体框架**这一事实，我已经回答了这个问题，并且我猜可查询是从`DbSet`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:35:10.683

我敢肯定，非常需要测试这种方法。首先，由于错误：

```
if(page < 0) throw new ArgumentOutOfRangeException("page"); 
if(page < 0) throw new ArgumentOutOfRangeException("size"); 
```

实际上，您并没有检查 size 变量。

无论如何，没有必要执行“集成”测试——您可以简单地模拟您的 IQueryable 对象并执行单元测试。（请参阅此答案：[我如何模拟 IQueryable<T>](https://stackoverflow.com/questions/2242534/how-do-i-mock-iqueryablet)）在我看来，测试此方法是绝对正确的。

# android - 应用程序数据库相关活动在模拟器中有效，但在设备中无效

> ID：13686289
> 
> 赞同：1
> 
> 时间：2012-12-03T15:23:58.703
> 
> 标签：android, sqlite, database-connection

我已经使用 Android (api 15) 创建了一个 android 应用程序，并且 android:minSdkVersion 是“8”。我正在使用 4.1 模拟器来运行这个应用程序。它在模拟器中工作正常，并成功安装在具有 api 4.1 的设备中......但是当使用我的`datak`类（数据库连接文件）的活动开始时，应用程序停止工作。

该应用程序是一个测验，其中有四个问题和一个可能的答案。数据库名称是“KBC”，当我推送游戏时会检索到……但在设备上没有检索到数据库。我认为设备找不到我的数据库文件“KBC”位置，其中包含我在模拟器中推送的所有表格和问题......

在虚拟设备文件资源管理器中，它在“data/data/android.kt.banoge.karodpati/databases”位置显示数据库 kbc

我的`datak`课程的代码包含在下面。我已经查看了许多其他问题，但它们没有帮助：

*   [http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)
*   [Android 应用程序在模拟器中工作但在设备中不工作](https://stackoverflow.com/questions/5103031/android-application-working-in-emulator-but-not-in-device)

任何人都可以给我这个问题的原因或解决方案吗？

```
public class Datak 
{
public static final String QUE = "question";
public static final String A = "optionA";
public static final String B = "optionB";
public static final String C = "optionC";
public static final String D = "optionD";
public static final String ANS = "answer";
public static final String LEV = "level";

private static final String TAG = "DBAdapter";

public static final String played = "played";
public static final String five = "five";
public static final String one = "one";
public static final String second = "second";
public static final String first = "first";

private static final String DATABASE_NAME = "KBC";
private static final String DATABASE_TABLE = "main";
private static final String DATABASE_TABLE2 = "main2";
private static final String DATABASE_TABLE3 = "main3";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE =
    "create table "+ DATABASE_TABLE +"("
    + QUE + " text not null,"
    + A + " text not null, " 
    + B + " text not null,"
    + C + " text not null,"
    + D + " text not null," 
    + ANS + " text not null,"
    + LEV + " text not null); ";

private final Context context; 

private DatabaseHelper DBHelper;

private SQLiteDatabase db;

public Datak(Context ctx) 
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper 
{
    DatabaseHelper(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        db.execSQL(DATABASE_CREATE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, 
    int newVersion) 
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion 
                + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS titles");
        onCreate(db);
    }
}    

public Datak open() throws SQLException 
{
    db = DBHelper.getWritableDatabase();
    return this;
}

public void close() 
{
    DBHelper.close();
}

public Cursor getValue()
{
     return db.query(DATABASE_TABLE, new String[] {
            QUE, 
            A,
            B,
            C,
            D,
            ANS,LEV
            },
            null,
            null,
            null,
            null,
            null,null
             );

}
public Cursor getValue2()
{
     return db.query(DATABASE_TABLE2, new String[] {
            QUE, 
            A,
            B,
            C,
            D,
            ANS,LEV
            },
            null,
            null,
            null,
            null,
            null,null
             );

}
public Cursor getValue3()
{
     return db.query(DATABASE_TABLE3, new String[] {
            QUE, 
            A,
            B,
            C,
            D,
            ANS,LEV
            },
            null,
            null,
            null,
            null,
            null,null
             );

}
public Cursor getState()
{
     return db.query("states", new String[] {
                played, 
                five,
                one,
                second,
                first
                },
                null,null,null,null,null);

}

public void updateRow(int a) 
{
    final Cursor c1;
    int pl;
 ContentValues CV=new ContentValues();
 c1=db.query("states", new String[] {
        played, 
        five,
        one,
        second,
        first
        },
        null,null,null,null,null);
    c1.moveToPosition(0);

    if(a==1)
    {
        pl=c1.getInt(0);
        pl++;
        CV.put(played, pl); 
    }
    if(a==2)
    {
        pl=c1.getInt(1);
        pl++;
        CV.put(five, pl);
    }
    if(a==3)
    {
        pl=c1.getInt(2);
        pl++;
        CV.put(one, pl);    
    }
    if(a==4)
    {
        pl=c1.getInt(3);
        pl++;
        CV.put(second, pl); 
    }
    if(a==5)
    {
        pl=c1.getInt(4);
        pl++;
        CV.put(first, pl);  
    }

    db.update("states", CV, null, null);
    c1.close();

} 
```

* * *

12-05 19:08:57.158: E/AndroidRuntime(13825): 致命异常: main 12-05 19:08:57.158: E/AndroidRuntime(13825): java.lang.IllegalStateException: 无法执行活动 12 的方法-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.view.View$1.onClick(View.java:3069) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android. view.View.performClick(View.java:3591) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.view.View$PerformClick.run(View.java:14263) 12-05 19: 08:57.158: E/AndroidRuntime(13825): 在 android.os.Handler.handleCallback(Handler.java:605) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.os.Handler.dispatchMessage (Handler.java:92) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.os.Looper.loop(Looper.java:137) 12-05 19:08:57.158: E/AndroidRuntime (13825)：在 android.app.ActivityThread。main(ActivityThread.java:4507) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 java.lang.reflect.Method.invokeNative(Native Method) 12-05 19:08:57.158: E/AndroidRuntime (13825): 在 java.lang.reflect.Method.invoke(Method.java:511) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:790）12-05 19:08:57.158：E/AndroidRuntime（13825）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:557）12-05 19:08： 57.158: E/AndroidRuntime(13825): at dalvik.system.NativeStart.main(Native Method) 12-05 19:08:57.158: E/AndroidRuntime(13825): 由: java.lang.reflect.InvocationTargetException 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 java.lang.reflect.Method.invokeNative(Native Method) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 java.lang.reflect。方法。调用(Method.java:511) 12-05 19:08:57.158: E/AndroidRuntime(13825): at android.view.View$1.onClick(View.java:3064) 12-05 19:08:57.158: E /AndroidRuntime(13825): ... 11 more 12-05 19:08:57.158: E/AndroidRuntime(13825): Caused by: android.database.sqlite.SQLiteException: no such table: states: , while compile: SELECT 播放，五，一，二，第一 FROM states 12-05 19:08:57.158: E/AndroidRuntime(13825): at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method) 12-05 19:08:57.158: E /AndroidRuntime(13825): 在 android.database.sqlite.SQLiteCompiledSql.(SQLiteCompiledSql.java:68) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram .java:143) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.database.sqlite.SQLiteProgram。compileAndbindAllArgs(SQLiteProgram.java:361) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.database.sqlite.SQLiteProgram.(SQLiteProgram.java:127) 12-05 19:08:57.158: E /AndroidRuntime(13825): 在 android.database.sqlite.SQLiteProgram.(SQLiteProgram.java:94) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.database.sqlite.SQLiteQuery.(SQLiteQuery. java:53) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47) 12-05 19:08:57.158: E/AndroidRuntime( 13825): 在 android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1690) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java :1575) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.database。sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1531) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1611) 12-05 19: 08:57.158: E/AndroidRuntime(13825): 在 com.kt.banoge.karodpati.Datak.updateRow(Datak.java:172) 12-05 19:08:57.158: E/AndroidRuntime(13825): 在 com.kt .banoge.karodpati.MainActivity.change(MainActivity.java:66) 12-05 19:08:57.158: E/AndroidRuntime(13825): ... 14 更多 }66) 12-05 19:08:57.158: E/AndroidRuntime(13825): ... 14 更多}66) 12-05 19:08:57.158: E/AndroidRuntime(13825): ... 14 更多}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:36:34.620

你能替换 db.execSQL("DROP TABLE IF EXISTS title"); by db.execSQL("如果存在则删除表" + DATABASE_TABLE);

这可能会有所帮助；）

哔叽

# oracle - Oracle触发器导致无限循环

> ID：13686293
> 
> 赞同：1
> 
> 时间：2012-12-03T15:24:03.673
> 
> 标签：oracle, triggers

我的 Oracle 数据库中有一个`students`表，其中有一个名为`RECORD_NUMBER`. 该字段有 8 个字符长，我想创建一个触发器，以便在`0`插入时用 s 填充左侧部分。这是我到目前为止所拥有的：

```
create or replace
TRIGGER STUDENTS_RECORD_NUMBER_TRG 
BEFORE INSERT OR UPDATE OF RECORD_NUMBER ON TBL_STUDENTS 
FOR EACH ROW
BEGIN
  WHILE length(:new.RECORD_NUMBER) < 9
    LOOP
      :new.RECORD_NUMBER := LPAD(:new.RECORD_NUMBER,8,'0');
    END LOOP;
  NULL;
END; 
```

但是，当我尝试插入一行时，数据库连接会锁定，我必须重新启动 Oracle 才能再次使用它。这个触发器是否有可能导致无限循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:26:12.087

如果`record_number`是 a `varchar2(8)`，那么`length(:new.record_number)`将始终小于 9 并且您的循环将无休止地迭代。但是这里不需要循环，只需调用`LPAD`

```
create or replace TRIGGER STUDENTS_RECORD_NUMBER_TRG 
  BEFORE INSERT OR UPDATE OF RECORD_NUMBER 
  ON TBL_STUDENTS 
  FOR EACH ROW
BEGIN
  :new.RECORD_NUMBER := LPAD(:new.RECORD_NUMBER,8,'0');
END; 
```

当然，这假设填充物理存储在数据库中的数据确实有意义，而不是像`LPAD`在视图层中应用这样的事情。一般来说，我希望将这种表示逻辑放在视图中会更好，因为视图非常适合实现表示逻辑。但是这个触发器应该做你所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:32:26.790

将条目保留为数字。如果需要使用填充零显示，则将其作为显示逻辑的一部分。

# breeze - 非 EF 的 Breeze js 基础知识

> ID：13686294
> 
> 赞同：0
> 
> 时间：2012-12-03T15:24:05.293
> 
> 标签：breeze

我正在尝试拼凑有关非 EF 应用程序的配置代码的帖子。看来我需要：

```
 core.config.initializeAdapterInstances(
        new DataService({
            serviceName: serviceName,
            hasServerMetadata: false
        })); 
```

所以，虽然很傻，但我似乎找不到 core.config.initializeAdapterInstances。我该如何解决这个问题？

谢谢

米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:21:46.310

如果问题是核心未定义，请尝试在代码之前添加此行

`var core = breeze.core;`

# iphone - 如何通过在 iphone 中混合多个音频来录制音频？

> ID：13686305
> 
> 赞同：-3
> 
> 时间：2012-12-03T15:24:37.790
> 
> 标签：iphone, objective-c, ios, core-audio, audio-recording

我必须通过混合多个音频文件来录制音频。例如，如果正在播放三个音频文件，那么我必须将所有播放音频的声音混合并将其录制到一个音频文件中。如果有任何工作代码可以实现它，请在这方面帮助我。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:27:32.713

我想我明白你在问什么。

您想使用三个可用的轨道创建一个轨道。现在，当您尝试使用它们时，您无法播放音频文件，它们已被锁定。

您需要使用 AVMutableComposition，将所有曲目加载为 AVURLAssets，然后将它们组合起来。现在我只编写了将一个文件附加到另一个文件的代码，所以我的示例并不完整，但它应该为您指明正确的方向。

```
// Generate a composition of the two audio assets that will be combined into
// a single track
AVMutableComposition* composition = [AVMutableComposition composition];
AVMutableCompositionTrack* audioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio
                                                                 preferredTrackID:kCMPersistentTrackID_Invalid];

// grab the two audio assets as AVURLAssets according to the file paths
AVURLAsset* masterAsset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:self.masterFile] options:nil];
AVURLAsset* activeAsset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:self.newRecording] options:nil];

NSError* error = nil;

// grab the portion of interest from the master asset
[audioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, masterAsset.duration)
                ofTrack:[[masterAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0]
                 atTime:kCMTimeZero
                  error:&error];
if (error)
{
    // report the error
    return;
}

// append the entirety of the active recording
[audioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, activeAsset.duration)
                ofTrack:[[activeAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0]
                 atTime:masterAsset.duration
                  error:&error];

if (error)
{
    // report the error
    return;
}

// now export the two files
// create the export session
// no need for a retain here, the session will be retained by the
// completion handler since it is referenced there

AVAssetExportSession* exportSession = [AVAssetExportSession
                                   exportSessionWithAsset:composition
                                   presetName:AVAssetExportPresetAppleM4A];
if (nil == exportSession)
{
    // report the error
    return;
}

NSString* combined = @"combined file path";// create a new file for the combined file

// configure export session  output with all our parameters
exportSession.outputURL = [NSURL fileURLWithPath:combined]; // output path
exportSession.outputFileType = AVFileTypeAppleM4A; // output file type

[exportSession exportAsynchronouslyWithCompletionHandler:^{

    // export status changed, check to see if it's done, errored, waiting, etc
    switch (exportSession.status)
    {
        case AVAssetExportSessionStatusFailed:
            break;
        case AVAssetExportSessionStatusCompleted:
            break;
        case AVAssetExportSessionStatusWaiting:
            break;
        default:
            break;
    }
    NSError* error = nil;

    // your code for dealing with the now combined file
}]; 
```

# php - Magento 一夜之间减速？

> ID：13686308
> 
> 赞同：0
> 
> 时间：2012-12-03T15:24:51.387
> 
> 标签：php, magento, compilation, magento-1.7

昨晚我在一个 Magento 1.7 网站上工作，这不是最快的，但至少在速度方面是可以接受的。我尝试运行一个简单的重新编译（系统>工具>编译），这需要很长时间才能完成（5+分钟）所以我取消它，刷新缓存（2+分钟），然后再次重新编译，这需要一段时间但是最终完成。

现在网站运行速度极慢：页面加载速度 > 8 秒，而管理页面加载速度 > 20 秒。

在重新编译之前，我做了一些其他的小改动。在 Admin > Configuration > Checkout 中，当用户单击 Add-To-Cart 时，将 Redirect 更改为 Checkout 从 Yes 到 No。以及一些基本的代码更改以改变类别列表页面的布局。

我基本上不知道从哪里开始。该网站是[http://www.vapetropolis.ca](http://www.vapetropolis.ca)

编辑：只是想到这一点-在编译之前，Wordpress 已安装在站点的子目录中。这可能是问题吗？将尝试删除它并重新编译，看看会发生什么......编辑2：问题仍然存在

编辑3：确认，编译是问题的一部分。禁用编译后，站点运行速度更快。比以前编译和工作时慢，但比损坏的编译状态快得多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:26:35.160

我的猜测是您在重新编译期间已经清除了缓存，并且只需要时间重新开始缓存。这样想，缓存是一个存储的内存，其中保存了一些东西以供经常/可访问的使用。你清除缓存，直到它被重新缓存，事情会变慢。

此外，您可以做很多事情来使这个问题在它发生时“不那么”明显。

1 除非您有某种 PHP 缓存，例如安装在服务器端的 APC，否则重新编译实际上并不会帮助提高速度。像 APC 这样的东西是一个 STAPLE，你会看到性能提高和加载时间减少。

1.7 比以前的版本更像一头猪，但它似乎对 Varnish 反应良好。我们的 Varnish 全页缓存实现仅在加载时间上就节省了大约 70%。如果你可以实现 Varnish，这是必须的。

对于搜索和分类页面，SOLR 是一个很棒的工具。它使用自己的索引（由 Magento 创建）并且不使用 MySQL 全文搜索。这不仅减少了搜索结果页面上的加载时间，而且您的类别单位​​也会飞起来。

硬件——Magento 需要大量的处理，但在使用 APC 和 Varnish 等工具时非常需要 RAM，因为它们将数据存储在机器更快的 RAM 中，而不是硬盘空间中。尽管`top`可能并不表示 RAM“使用率”很高，但安装`munin tools`并查看您为上述工具保留的 RAM 空间，我敢打赌您正在有效地使用几乎所有这些空间。

我了解您担心 Magento 在重新编译后移动缓慢。我的回答是“这是预期的结果”。-- 通过上述操作，您可以显着降低清除 Magento 缓存的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T18:21:06.653

**解决方案！**

我删除了编译前已经安装的Wordpress子目录。编译器必须在非 Magento 文件上阻塞。删除目录、刷新所有缓存、重新索引所有数据、禁用编译然后重新编译后，站点现在可以正常运行了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:36:46.480

尝试启用缓存，如果它还没有
转到系统>缓存管理>（在右侧）从下拉列表中选择启用并单击“提交”

如果它已经在
尝试刷新所有类型的缓存，然后尝试打开您的网站

# delphi - 拖放时移动图像

> ID：13686309
> 
> 赞同：10
> 
> 时间：2012-12-03T15:24:52.510
> 
> 标签：delphi, drag-and-drop, delphi-7

我在 TPanel 上有一个 TImage，还有一个（空的）TPanel。我想使用拖放将图像从第一个面板拖到第二个面板。

我实际上想在图像从一个面板移动到另一个面板（半透明）时看到它。

我想我应该使用`TDragObject.GetDragImages`，但我不知道如何构建整个魔法。

```
procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  Image1.ControlStyle := Image1.ControlStyle + [csDisplayDragImage]; // ???
  TImage(Sender).BeginDrag(False);
end;

procedure TForm1.Image1StartDrag(Sender: TObject; var DragObject: TDragObject);
begin
  // ???
end;

procedure TForm1.Panel1DragOver(Sender, Source: TObject; X, Y: Integer;
  State: TDragState; var Accept: Boolean);
begin
  if (Source is TImage) then
    Accept := TImage(Source).Parent <> Sender;
end;

procedure TForm1.Panel1DragDrop(Sender, Source: TObject; X, Y: Integer);
begin
  if (Source is TImage) then
  begin
    TImage(Source).Parent := TPanel(Sender);
    TImage(Source).Align := alClient;
  end;
end; 
```

* * *

更新 - 我发现了一篇有用的文章：[在 VCL/CLX 应用程序中实现专业拖放](http://www.blong.com/Conferences/BorCon2001/DragAndDrop/4114.htm)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T16:39:54.110

```
unit Unit3;

interface
// 2012 Thomas Wassermann - demo
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs,  ExtCtrls;

type

  TMyDragObject = class(TDragControlObject)
  private
    FImageList:TImageList;
    FDragSource:TControl;
  protected
    function GetDragImages: TDragImageList; override;
  public
    Procedure StartDrag(G:TGraphic;p:TPoint;DragSource:TControl);
    Constructor Create(AControl: TControl); override;
    Destructor Destroy;override;
    Property DragSource:TControl read FDragSource;
  end;

  TForm3 = class(TForm)
    Panel1: TPanel;
    Panel2: TPanel;
    Image1: TImage;
    procedure Image1StartDrag(Sender: TObject; var DragObject: TDragObject);
    procedure FormCreate(Sender: TObject);
    procedure Panel1DragOver(Sender, Source: TObject; X, Y: Integer; State: TDragState; var Accept: Boolean);
    procedure FormDestroy(Sender: TObject);
    procedure Panel1DragDrop(Sender, Source: TObject; X, Y: Integer);
  private
    { Private-Deklarationen }
    FDragObject:TMyDragObject;
  public
    { Public-Deklarationen }
  end;

var
  Form3: TForm3;

implementation

constructor TMyDragObject.Create(AControl: TControl);
begin
  inherited;
  FImageList:=TImageList.Create(nil);
end;

destructor TMyDragObject.Destroy;
begin
  FImageList.Free;
  inherited;
end;

function TMyDragObject.GetDragImages: TDragImageList;
begin
   Result := FImageList;
end;

{$R *.dfm}

procedure TMyDragObject.StartDrag(G: TGraphic;p:TPoint;DragSource:TControl);
var
 bmp:TBitMap;
begin
   FDragSource := DragSource;
   bmp:=TBitMap.Create;
   try
   FImageList.Width := g.Width;
   FImageList.Height := g.Height;
   bmp.Width := g.Width;
   bmp.Height := g.Height;
   bmp.Canvas.Draw(0,0,g);
   FImageList.Add(bmp,nil);
   finally
     bmp.Free;
   end;
    FImageList.SetDragImage(0,p.x,p.y)
end;

procedure TForm3.FormCreate(Sender: TObject);
var
 i:Integer;
begin
  ControlStyle := ControlStyle + [csDisplayDragImage];
  for I := 0 to ControlCount -1  do
      if Controls[i] is TPanel then
         TPanel(Controls[i]).ControlStyle := TPanel(Controls[i]).ControlStyle + [csDisplayDragImage];
  ReportMemoryLeaksOnShutDown := True;
end;

procedure TForm3.FormDestroy(Sender: TObject);
begin
  if Assigned(FDragObject) then FDragObject.Free;
end;

procedure TForm3.Image1StartDrag(Sender: TObject; var DragObject: TDragObject);
var
 p:TPoint;

begin
    p:=TImage(Sender).ScreenToClient(mouse.cursorpos);
    if Assigned(FDragObject) then FDragObject.Free;
    FDragObject := TMyDragObject.Create(TImage(Sender));
    FDragObject.StartDrag(TImage(Sender).Picture.Graphic,p,TImage(Sender));
    DragObject := FDragObject;
end;

procedure TForm3.Panel1DragDrop(Sender, Source: TObject; X, Y: Integer);
begin
  if FDragObject.DragSource is TImage then
    TImage(FDragObject.DragSource).Parent := TPanel(Sender);
end;

procedure TForm3.Panel1DragOver(Sender, Source: TObject; X, Y: Integer; State: TDragState; var Accept: Boolean);
begin
    Accept := Source is TMyDragObject;
end;

end. 
```

# php - 通过 PHP SDK 2 从 S3 抓取对象的内容？

> ID：13686316
> 
> 赞同：18
> 
> 时间：2012-12-03T15:25:12.987
> 
> 标签：php, sdk, amazon-s3, amazon-web-services

我一直在试图弄清楚如何从 S3 存储桶中获取内容以包含在 ZipArchive 中，以供在 S3 上存储文件的客户使用，他们现在需要创建包含客户推送到 S3 的文件的报告。我使用 PHP SDK 2 API（与 PEAR 一起安装）尝试了以下操作：

```
require 'AWSSDKforPHP/aws.phar';

use Aws\S3\S3Client;
use Aws\Common\Enum\Region;

$config = array(
    'key'    => 'the-aws-key',
    'secret' => 'the-aws-secret',
    'region' => Region::US_EAST_1
);

$aws_s3 = S3Client::factory($config);
$app_config['s3']['bucket'] = 'the-aws-bucket';
$app_config['s3']['prefix'] = '';
$attach_name = 'hosted-test-file.jpg';
try {
    $result = $aws_s3->getObject(
        array(
            'Bucket' => $app_config['s3']['bucket'],
            'Key' => $app_config['s3']['prefix'].$attach_name
        )
    );
    var_dump($result);
    $body = $result->get('Body');
    var_dump($body);
    $handle = fopen('php://temp', 'r');
    $content = stream_get_contents($handle);
    echo "String length: ".strlen($content);
} catch(Aws\S3\Exception\S3Exception $e) {
    echo "Request failed.<br />";
} 
```

但是，它返回的只是一个`Guzzle\Http\EntityBody`对象，不确定如何获取实际内容，以便将其推送到 zip 文件中。

[抓取物体](http://docs.amazonwebservices.com/aws-sdk-php-2/latest/class-Aws.S3.S3Client.html#_getObject)

```
object(Guzzle\Service\Resource\Model)[126]
    protected 'structure' => object(Guzzle\Service\Description\Parameter)[109]
    protected 'name' => null
    protected 'description' => null
    protected 'type' => string 'object' (length = 6)
    protected 'required' => boolean false
    protected 'enum' => null
    protected 'additionalProperties' => boolean true
    protected 'items' => null
    protected 'parent' => null
    protected 'ref' => null
    protected 'format' => null
    protected 'data' => array (size = 11)
        'Body' => object(Guzzle\Http\EntityBody)[97]
            protected 'contentEncoding' => boolean false
            protected 'rewindFunction' => null
            protected 'stream' => resource(292, stream)
            protected 'size' => int 3078337
            protected 'cache' => array (size = 9)
            ...
        'DeleteMarker' => string '' (length = 0)
        'Expiration' => string '' (length = 0)
        'WebsiteRedirectLocation' => string '' (length = 0)
        'LastModified' => string 'Fri, 30 Nov 2012 21:07:30 GMT' (length = 29)
        'ContentType' => string 'binary/octet-stream' (length = 19)
        'ContentLength' => string '3078337' (length = 7)
        'ETag' => string '"the-etag-of-the-file"' (length = 34)
        'ServerSideEncryption' => string '' (length = 0)
        'VersionId' => string '' (length = 0)
        'RequestId' => string 'request-id' (length = 16) 
```

[从身体返回](http://docs.amazonwebservices.com/aws-sdk-php-2/latest/class-Guzzle.Http.EntityBody.html)

```
object(Guzzle\Http\EntityBody)[96]
    protected 'contentEncoding' => boolean false
    protected 'rewindFunction' => null
    protected 'stream' => resource(292, stream)
    protected 'size' => int 3078337
    protected 'cache' => array (size = 9)
        'wrapper_type' => string 'php' (length = 3)
        'stream_type' => string 'temp' (length = 4)
        'mode' => string 'w+b' (length = 3)
        'unread_bytes' => int 0
        'seekable' => boolean true
        'uri' => string 'php://temp' (length = 10)
        'is_local' => boolean true
        'is_readable' => boolean true
        'is_writable' => boolean true

// Echo of strlen()
String length: 0 
```

任何信息将不胜感激，谢谢！

**解决方案**

我花了一段时间才弄清楚，但我找到了一个指向正确方向的要点，为了获取文件的内容，您需要执行以下操作：

```
require 'AWSSDKforPHP/aws.phar';

use Aws\S3\S3Client;
use Aws\Common\Enum\Region;

$config = array(
    'key'    => 'the-aws-key',
    'secret' => 'the-aws-secret',
    'region' => Region::US_EAST_1
);

$aws_s3 = S3Client::factory($config);
$app_config['s3']['bucket'] = 'the-aws-bucket';
$app_config['s3']['prefix'] = '';
$attach_name = 'hosted-test-file.jpg';
try {
    $result = $aws_s3->getObject(
        array(
            'Bucket' => $app_config['s3']['bucket'],
            'Key' => $app_config['s3']['prefix'].$attach_name
        )
    );
    $body = $result->get('Body');
    $body->rewind();
    $content = $body->read($result['ContentLength']);
} catch(Aws\S3\Exception\S3Exception $e) {
    echo "Request failed.<br />";
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-05T18:54:47.097

响应的主体存储在一个`Guzzle\Http\EntityBody`对象中。这用于保护您的应用程序免于下载非常大的文件和内存不足。

如果需要将 EntityBody 对象的内容用作字符串，可以将对象强制转换为字符串：

```
$result = $s3Client->getObject(array(
    'Bucket' => $bucket,
    'Key'    => $key
));

// Cast as a string
$bodyAsString = (string) $result['Body'];

// or call __toString directly
$bodyAsString = $result['Body']->__toString(); 
```

如果需要，您也可以直接下载到目标文件：

```
use Guzzle\Http\EntityBody;

$s3Client->getObject(array(
  'Bucket' => $bucket,
  'Key'    => $key,
  'command.response_body' => EntityBody::factory(fopen("/tmp/{$key}", 'w+'))
)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-09T05:55:49.630

这对我有用：

```
$tempSave = 'path/to/save/filename.txt';

return $this->S3->getObject([
     'Bucket' => 'test',
     'Key'    => $keyName,
     'SaveAs' => $tempSave,
]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:32:48.933

调用时`getObject`，您可以传入一个选项数组。在这些选项中，您可以指定是否要将对象下载到文件系统。

```
$bucket = "bucketName";
$file = "fileName";
$downloadTo = "path/to/save";

$opts = array(  // array of options
    'fileDownload' => $downloadTo . $file   // tells the SDK to download the 
                                             // file to this location
);

$result = $aws_s3->getObject($bucket, $file, $opts); 
```

[获取对象参考](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/get_object)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T16:21:30.780

我对 2.00 SDK 版本不是很熟悉，但看起来您已经在`php://temp`. 通过查看您更新的问题并简要浏览文档，该流似乎可以作为：

```
$result = $aws_s3->getObject(
    array(
        'Bucket' => $app_config['s3']['bucket'],
        'Key' => $app_config['s3']['prefix'].$attach_name
    )
);
$stream = $result->get('stream');
$content = file_get_contents($stream); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-24T18:36:36.027

```
<?php
   $o_iter = $client->getIterator('ListObjects', array(
    'Bucket' => $bucketname
   ));
   foreach ($o_iter as $o) {
    echo "{$o['Key']}\t{$o['Size']}\t{$o['LastModified']}\n";
   } 
```

# python - 每隔一个值列出python中的切片

> ID：13686317
> 
> 赞同：-2
> 
> 时间：2012-12-03T15:25:16.870
> 
> 标签：python, slice

假设我有一个列表 x = [1,2,3] 并且我想输出除索引之外的所有其他值，是否可以使用列表操作？即：x[0]=> [2,3] , x[1] => [1,3], x[2] =>[1,2] ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:29:59.330

你可以使用这个：

```
def exclude(l, e):
  return [v for i, v in enumerate(l) if i != e]

>>> exclude(range(10), 3)
[0, 1, 2, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T15:31:00.480

你可以用切片来做，但我很想尝试：

```
a = [1, 2, 3]
b = a[:]
del b[1] 
```

**编辑**

上面确实“技术上”使用了切片操作，它恰好在`list`对象上实际上是浅拷贝。

更灵活且不应该有任何缺点的是使用：

```
a = [1, 2, 3]
b = list(a)
del b[1] 
```

内置列表适用于任何可迭代对象（而切片操作`[:]`适用于列表或可索引的列表），因此您甚至可以将其扩展到以下构造：

```
>>> a = '123'
>>> b = list(a)
>>> del b[0]
>>> ''.join(b)
'23' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:28:33.527

你可以使用`x[:i] + x[i+1:]`：

```
In [8]: x = [1, 2, 3]

In [9]: i = 0

In [10]: x[:i] + x[i+1:]
Out[10]: [2, 3] 
```

根据上下文，`x.pop(i)`也可能有用。它通过删除和返回`i-th`元素来修改列表。如果您不需要该元素，`del x[i]`也是一种选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:28:06.973

```
>>> x = [1, 2, 3]
>>> x[:1] + x[2:]
[1, 3] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-03T16:15:15.087

```
my_list  = [1, 2, 3]
my_list.remove(my_list[_index_]) #_index_ is the index you want to remove 
```

这样：`my_list.remove(my_list[0])`会屈服`[2, 3]`， `my_list.remove(my_list[1])`会屈服`[0, 3]`， `my_list.remove(my_list[2])`会屈服`[1, 2]`。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-03T15:28:29.840

所以你想要除索引值之外的每个值： 其中 i 是索引：

```
>>> list = [1,2,3,4,5,6,7,8]
>>> [x for x in list if not x == list[i]] 
```

这将为您提供一个没有 i't 元素实例的列表，例如：

```
>>> i = 2
>>> list = [1,2,3,4,5,6,7,1,2,3,4,5,6,7]
>>> [x for x in list if not x == list[i]]
[1, 2, 4, 5, 6, 7, 1, 2, 4, 5, 6, 7] 
```

请注意 3 根本不在该列表中。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-12-03T15:27:13.583

Every other is

```
x[::2], start at 0
x[1::2], start at 1 
```

# .net - 播种时如何避免重复行？

> ID：13686318
> 
> 赞同：1
> 
> 时间：2012-12-03T15:25:19.560
> 
> 标签：.net, entity-framework, ef-code-first, entity-framework-migrations

这是配置文件：

```
internal sealed class Configuration : DbMigrationsConfiguration<Context>
{
    public Configuration()
    {
      AutomaticMigrationsEnabled = true;
    }

    protected override void Seed(Context context)
    {
        //my seeding DB, here's an example
        context.HomePageAreas
          .AddOrUpdate(new HomePageArea { Title = HomePageArea.TopAreaKey });
    }
} 
```

应用启动：

```
Database.SetInitializer<Context>(
  new MigrateDatabaseToLatestVersion<Context, Configuration>());

using (var context = new Context())
  context.Database.Initialize(false); 
```

然后我得到`DbEntityValidationException`每个添加的行（从第二次启动开始）：

> {0}：已有一个“{1}”记录，其“{0}”字段设置为“{2}”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:56:16.700

由于您没有指定标识符表达式，因此 EF 按主键进行比较（未出现在您的对象初始化程序中）

如果 ID 已知，则指定它，或者使用不同的表达式。例如：

```
context.HomePageAreas
       .AddOrUpdate(x => x.Title,
                    new HomePageArea { Title = HomePageArea.TopAreaKey }); 
```

在这种情况下，它将匹配现有记录`Title`。

# javascript - 手动触发 jQuery 自动完成

> ID：13686319
> 
> 赞同：20
> 
> 时间：2012-12-03T15:25:23.093
> 
> 标签：javascript, jquery, ajax, search, autocomplete

我正在使用带有一些 AJAX 的 jQuery UI 自动完成（数据在他们停止输入之前不会被提取）。我想这样做，一旦找到数据，自动完成将作为搜索结果弹出。这有效，但是只有当我再次开始输入时（下拉菜单在我输入之前不会触发，因为它在我停止输入之后才被初始化）。

我的代码：

```
var availableTags = [
    "Perl",
    "PHP",
    "Python",
    "Ruby"
];
$('input#mainSearchBox').autocomplete({
    source: availableTags,
        minLength: 0
});
    $('input#mainSearchBox').data('autocomplete').menu.active; 
```

最后一部分是尝试激活自动完成功能，但失败了。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-03T15:33:38.817

[搜索方法](http://api.jqueryui.com/autocomplete/#method-search)应该可以解决问题：

```
$('input#mainSearchBox').autocomplete("search"); 
```

[小提琴](http://jsfiddle.net/W56yq/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T15:29:04.850

您可以使用以下脚本手动切换自动完成：

```
var textbox = $('input#mainSearchBox');
var autocompleteBox = textbox.autocomplete('widget');

// toggle the autocomplete widget
autocompleteBox.is(':hidden') ? 
    textbox.autocomplete('search', textbox.val()).focus() :
    autocompleteBox.hide(); 
```

此代码可以在 jquery 自动完成演示站点上的[组合框示例](http://jqueryui.com/autocomplete/#combobox)的源代码中找到（第 127-141 行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-23T07:58:36.447

For [https://github.com/devbridge/jQuery-Autocomplete](https://github.com/devbridge/jQuery-Autocomplete), you can use:

```
$('input#mainSearchBox').autocomplete("getSuggestions", $('input#mainSearchBox').val()) 
```

# sql - VBS 选择行

> ID：13686320
> 
> 赞同：0
> 
> 时间：2012-12-03T15:25:30.350
> 
> 标签：sql, vbscript

如何从 sql 表中选择特定行。示例如果变量的值为 2，则从表中选择第二行？

VBS中是否有任何函数可以确定表中有多少行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:53:23.130

> 如何从 sql 表中选择特定行。示例如果变量的值为 2，则从表中选择第二行？

您可以执行以下 SQL，该 SQL 使用[`RANK()`](http://msdn.microsoft.com/en-us/library/ms176102.aspx)SQL Server 函数始终获取第二行，例如，通过按`id`列对记录进行`DESC`排序：

```
SELECT * FROM 
(
    SELECT *, RANK() OVER (ORDER BY id DESC) 'RowRank' FROM MyTable 
) AS A
WHERE RowRank = 2 
```

> VBS中是否有任何函数可以确定表中有多少行？

我不确定 VBS 是否具有开箱即用的功能来获取表中的行数，但您可以使用简单的 SQL 查询来找出它：

```
SELECT COUNT(*) FROM MyTable 
```

这将返回一个值，但上面选择第二行的查询将返回列值列表，如表中所示。

# jquery-mobile - 底部的jquery移动页脚

> ID：13686322
> 
> 赞同：0
> 
> 时间：2012-12-03T15:25:38.297
> 
> 标签：jquery-mobile

我在 jquery 移动应用程序中为我的页脚设置了 CSS 样式：

```
[data-role=footer]{
    bottom:0px; 
    position: relative !important; 
    top: auto !important; 
    width:100%;
} 
```

现在我希望页脚始终位于页面底部，包括内容高于页面的情况，因此我必须滚动。外观和感觉应该类似于在 iOS 上的 safari 中打开的普通网站。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:29:13.633

在 jquery-mobile 中创建一个[**固定的页脚**](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)只是做：

```
<div data-role="footer" data-position="fixed">
your footer data
</div> 
```

# vba - Merging excel spreadsheets into one spreadsheet

> ID：13686323
> 
> 赞同：5
> 
> 时间：2012-12-03T15:25:39.557
> 
> 标签：vba, excel

Okay, I tried to look for similar questions but I didn't understand much of what was being discussed since it's the first time I'm looking at Excel's VBA editor.

In simple terms, I have 2 spreadsheets: "Sheet1" and "Sheet2"

Sheet 1:

```
 A         B
1 Header1   Header2
2 Text1     Info1
3 Text2     Info2 
```

Sheet 2:

```
 A         B
1 Header1   Header2
2 Text3     Info3
3 Text4     Info4 
```

And I would like to have a macro to merge the two sheets into a new sheet (Sheet3), like this:

```
 A         B
1 Header1   Header2
2 Text1     Info1
3 Text2     Info2
4 Text3     Info3
5 Text4     Info4 
```

I have tried recording a macro and saving it for later use. To do this, I created a new sheet, copy/paste everything from Sheet1 to Sheet3, then copy all the information except the headings from Sheet2 to Sheet3.

Well, the macro works for this data, but I found that the code generated by excel makes it so it selects the cell A4 (here) before pasting the data. While this works for this data, it wouldn't work if the number of records in each sheet changes now and again. Basically,

1) I was wondering if there was a function that goes to the last relevant cell automatically before pasting the next set of data (in this example, cell A4, and if I have one more table, then cell A6).

2) I've seen the function "ActiveCell.SpecialCells(xlLastCell).Select" (activated when I use Ctrl+End) but that carries me to the end of the sheet. I would need something similar to "Home" and "Down" arrow key after using that function for it to work best.

Either one of those options would be good with me. ^_^

Here's my current VBA code recorded from the Macro Recorder in excel 2010:

```
Sub Collate_Sheets()

    Sheets.Add After:=Sheets(Sheets.Count)
    Sheets(Sheets.Count).Select
    Sheets(Sheets.Count).Name = "Sheet3"
    Sheets("Sheet1").Select
    Range("A1").Select
    Range(Selection, ActiveCell.SpecialCells(xlLastCell)).Select
    Selection.Copy
    Sheets("Sheet3").Select
    ActiveSheet.Paste
    ActiveCell.SpecialCells(xlLastCell).Select
    ' I need to select one cell below, and the cell in column A at this point
    Sheets("Sheet2").Select
    Range("A2").Select
    Range(Selection, ActiveCell.SpecialCells(xlLastCell)).Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Sheet3").Select
    ActiveSheet.Paste
End Sub 
```

I hope I didn't forget any useful piece of information. Let me know if I did!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T16:07:55.560

杰瑞，试试这个代码。我稍微清理了你的代码，让它更高效地做你想做的事。我根据您的代码所说的我认为是正确的做了一些假设。如果没有，请对此答案发表评论，如果需要，我会进行调整。

```
Option Explicit

Sub Collate_Sheets()

   Sheets.Add After:=Sheets(Sheets.Count)
   Dim wks As Worksheet
   Set wks = Sheets(Sheets.Count)

   wks.Name = "Sheet3"

   With Sheets("Sheet1")

    Dim lastrow As Long
    lastrow = .Range("B" & .Rows.Count).End(xlUp).Row

    .Range("A1:B" & lastrow).Copy wks.Range("A" & wks.Rows.Count).End(xlUp)

   End With

   With Sheets("Sheet2")

    lastrow = .Range("B" & .Rows.Count).End(xlUp).Row

    .Range("A2:B" & lastrow).Copy wks.Range("A" & wks.Rows.Count).End(xlUp).Offset(1)

   End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-06T06:08:50.730

如果有人想在创建之前删除 Shee3 以避免错误

```
 'Delete Sheet 3
   Application.DisplayAlerts = False
   Sheets("Sheet3").Delete 
```

谢谢斯科特霍尔兹曼！！

# python - Debugging Python bottle apps with WingIDE

> ID：13686325
> 
> 赞同：4
> 
> 时间：2012-12-03T15:25:45.567
> 
> 标签：python, debugging, breakpoints, bottle, wing-ide

I'm writing an Python Bottle application (Python 2.7.2 and Bottle 0.10.9) and developing it in the WingIDE (3.2.8-1) Professional for Linux. This all works well, except when I want to debug the Bottle application. I have it running in standalone mode within WingIDE, but it won't stop at any of my break points in the code, even if I set Bottle.debug(False). Does anyone have any suggestions/ideas about how I can setup Bottle so it will stop on breakpoints within WingIDE?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:39:37.777

如果您将重新加载器设置为 true，则瓶子会为实际应用程序启动一个子进程。在 Wing 中，您需要关闭重新加载器，然后它应该可以工作。

```
run(reloader=False). 
```

但是每次进行更改时，您都必须重新启动应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T16:35:42.313

您是使用wingdbstub.py 在WSGI 下调试还是从IDE 启动bottle？我对瓶子不太熟悉，但一个常见的问题是 Web 框架的重新加载机制在未调试的子进程中运行代码。但是，我不确定瓶子是否会在 WSGI 下执行此操作，但是在导入wingdbstub（或从IDE 启动时启动）时打印进程ID 并再次在错过断点的行处打印将排除这一点。Bottle.__init__ 的“重新加载器”参数可能与此处相关。如果设置为 True，请尝试在 Wing 下调试时将其设置为 False。

要尝试的另一件事是在断点所在的位置故意引发异常（如“assert 0, 'test exception'”，并查看 Wing 的调试器中的异常工具中是否报告了此异常，如果是，Wing 是否也设法打开源代码。如果瓶子以无法找到源代码的方式运行代码，那么它仍然会在断言上停止（即使主机代码处理异常，Wing 的调试器也会默认停止*所有*断言）但是它将无法显示调试文件，并会在状态区域（在 IDE 屏幕和消息工具中）显示一条消息，指示调试过程指定的文件名。根据这一点，可能可以解决问题（但如果文件名类似于“”，则需要修改 Bottle。

顺便说一句，要插入仅在 Wing 调试器下运行的代码，我们可以这样：

import os if 'WINGDB_ACTIVE' in os.environ: # code here

如果这没有帮助，请在wingware dot com 发送电子邮件支持。

# html - 阻止官方 twitter 小部件逃出我的 div 边界

> ID：13686329
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:25:55.607
> 
> 标签：html, css, twitter

所以在这里[http://www.prxa.info/](http://www.prxa.info/)我在右边使用官方 twitter 小部件。目前它正在使用设定的宽度。

如果有一种方法可以让它扩展到包含它的 div 的宽度来扩展和收缩，我正在徘徊吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:42:39.577

只需将其添加到您的 CSS 中：

```
#twitter-widget-0 { 
    width: 100% !important; 
} 
```

结果：

![结果](../Images/8174f66eff630cab1bf5648273ddbf90.png)

# java - Null Pointer while converting to JSON

> ID：13686335
> 
> 赞同：4
> 
> 时间：2012-12-03T15:26:15.440
> 
> 标签：java, json, gson

I am using WDCalendar in Struts2. I was converting Hashmap to Json String using GSON, but all of a sudden, i am getting NULL pointer exception while conveting Hashmap to JSON String

```
result = new Gson().toJson(ret); 
```

My Code :

```
public static String loadAllEvents(String start, String end) throws SQLException {
        PreparedStatement ps1 = null;
        ResultSet rs1 = null;
        Gson gson = new Gson();
        String result = "";
        Connection con = ULDBConnectionUtility.getDBConnection();
        HashMap<String, Object> ret = new HashMap<String, Object>();

        try{
            String strSql = "SELECT * FROM EVENT_MANAGER";// WHERE START_DATE BETWEEN '"+start+"' AND '"+end+"'";           
            ps1 = con.prepareStatement(strSql);
            rs1  = ps1.executeQuery();

            SimpleDateFormat fromDB = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
            java.text.SimpleDateFormat sourceFormat = new SimpleDateFormat("EEE MMM dd yyyy HH:mm:ss ZZZ");

            ArrayList<ArrayList> eventArrayList = new ArrayList<ArrayList>();
            while(rs1.next()){              
                ArrayList EvtData = new ArrayList();
                EvtData.add(rs1.getInt("EVENT_ID"));//0
                EvtData.add(rs1.getString("EVENT_TITLE"));//1
                EvtData.add(sourceFormat.format(fromDB.parse(rs1.getString("START_DATE"))));//2
                EvtData.add(sourceFormat.format(fromDB.parse(rs1.getString("END_DATE"))));//3
                EvtData.add(rs1.getInt("IS_ALL_DAY_EVENT"));//4
                EvtData.add(Integer.parseInt("0"));//5
                EvtData.add(rs1.getInt("RECURRING_RULE"));//6
                EvtData.add(rs1.getString("COLOR"));//7
                EvtData.add(Integer.parseInt("1"));//8
                EvtData.add(rs1.getString("LOCATION"));//9
                EvtData.add("");//10
                eventArrayList.add(EvtData);
            }
            String error = "";
             ret.put("events", eventArrayList);
             ret.put("issort", true);
             ret.put("start", sourceFormat.format(fromDB.parse(start)));
             ret.put("end", sourceFormat.format(fromDB.parse(end)));
             ret.put("error", error);
             System.out.println("ret : "+ret);
             result = new Gson().toJson(ret);

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                if (rs1 != null) {
                    rs1.close();
                }
                if (ps1 != null) {
                    ps1.close();
                }
                if (con != null) {
                    con.close();
                }
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        return result;
    } 
```

HashMap before passing to convertion:

```
{events=[[98, EvebtTitle, Mon Dec 03 2012 10:45:00 +0530, Wed Oct 17 2012 11:15:00 +0530, 0, 0, 0, 0, 1, NJ, ], [118, testDec, Wed Dec 05 2012 09:00:00 +0530, Wed Dec 05 2012 10:00:00 +0530, 0, 0, 0, null, 1, null, ], [67, Test45, Wed Dec 05 2012 10:30:00 +0530, Tue Oct 16 2012 11:00:00 +0530, 1, 0, 0, 0, 1, NY, ], [119, sd, Tue Dec 04 2012 00:00:00 +0530, Tue Dec 04 2012 00:00:00 +0530, 1, 0, 0, null, 1, null, ], [78, Test, Fri Dec 07 2012 09:30:00 +0530, Mon Oct 15 2012 10:15:00 +0530, 0, 0, 0, 1, 1, LA, ], [66, Event 2, Tue Dec 04 2012 10:00:00 +0530, Tue Oct 16 2012 10:30:00 +0530, 0, 0, 1, 0, 1, CA, ]], start=Thu Jan 01 1970 05:30:00 +0530, issort=true, end=Thu Jan 01 1970 05:30:00 +0530, error=null} 
```

Error:

```
20:49:15,597 ERROR [STDERR] java.lang.NullPointerException
20:49:15,599 ERROR [STDERR]     at com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter.serialize(DefaultTypeAdapters.java:443)
20:49:15,601 ERROR [STDERR]     at com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter.serialize(DefaultTypeAdapters.java:430)
20:49:15,604 ERROR [STDERR]     at com.google.gson.JsonSerializationVisitor.visitUsingCustomHandler(JsonSerializationVisitor.java:128)
20:49:15,605 ERROR [STDERR]     at com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:96)
20:49:15,606 ERROR [STDERR]     at com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:47)
20:49:15,608 ERROR [STDERR]     at com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter.serialize(DefaultTypeAdapters.java:445)
20:49:15,609 ERROR [STDERR]     at com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter.serialize(DefaultTypeAdapters.java:430)
20:49:15,610 ERROR [STDERR]     at com.google.gson.JsonSerializationVisitor.visitUsingCustomHandler(JsonSerializationVisitor.java:128)
20:49:15,611 ERROR [STDERR]     at com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:96)
20:49:15,612 ERROR [STDERR]     at com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:47)
20:49:15,613 ERROR [STDERR]     at com.google.gson.DefaultTypeAdapters$MapTypeAdapter.serialize(DefaultTypeAdapters.java:509)
20:49:15,613 ERROR [STDERR]     at com.google.gson.DefaultTypeAdapters$MapTypeAdapter.serialize(DefaultTypeAdapters.java:489)
20:49:15,614 ERROR [STDERR]     at com.google.gson.JsonSerializationVisitor.visitUsingCustomHandler(JsonSerializationVisitor.java:128)
20:49:15,615 ERROR [STDERR]     at com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:96)
20:49:15,616 ERROR [STDERR]     at com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:47)
20:49:15,617 ERROR [STDERR]     at com.google.gson.Gson.toJson(Gson.java:269)
20:49:15,618 ERROR [STDERR]     at com.google.gson.Gson.toJson(Gson.java:220)
20:49:15,618 ERROR [STDERR]     at com.google.gson.Gson.toJson(Gson.java:200)
20:49:15,619 ERROR [STDERR]     at dao.UtilityDao.loadAllEvents(UtilityDao.java:174)
20:49:15,620 ERROR [STDERR]     at utility.CalendarUtility.loadAllList(CalendarUtility.java:64)
20:49:15,621 ERROR [STDERR]     at servlet.DataFeed.doGet(DataFeed.java:56)
20:49:15,622 ERROR [STDERR]     at servlet.DataFeed.doPost(DataFeed.java:97)
20:49:15,623 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
20:49:15,624 ERROR [STDERR]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
20:49:15,625 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
20:49:15,626 ERROR [STDERR]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
20:49:15,627 ERROR [STDERR]     at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
20:49:15, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:13:41.393

解决了：

一些事件字段值在 DB 中为 NULL，这就是原因。

在`ret.put("events", eventArrayList);`

eventArrayList 引用`ArrayList<ArrayList>`并且很少有字段值为`<ArrayList>`NULL，

从上面的示例：（查看位于第二个索引的内部数组列表中的 Null 值）

```
{events=[[98, EvebtTitle, Mon Dec 03 2012 10:45:00 +0530, Wed Oct 17 2012 11:15:00 +0530, 0, 0, 0, 0, 1, NJ, ], [118, testDec, Wed Dec 05 2012 09:00:00 +0530, Wed Dec 05 2012 10:00:00 +0530, 0, 0, 0, null, 1, null, ]]} 
```

从内部 ArrayList 中删除 Null 值后，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:37:30.497

关于方法我想到的一件事

> public String toJson(Object src)

是[GSON 文档](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/Gson.html#toJson%28java.lang.Object%29)，其中指出*“当指定的对象不是泛型类型时，应使用此方法。如果对象是泛型类型，请改用 toJson(Object, Type)。”*

另一件事是空指针异常可能是由任何其他对象引起的，而不是特别是HashMap。您似乎认为这是理所当然的，但我建议您调试代码。

# jsf - Duplicate id when dynamically adding new component to JSF component tree

> ID：13686341
> 
> 赞同：3
> 
> 时间：2012-12-03T15:26:41.060
> 
> 标签：jsf, dynamic, primefaces, components, mojarra

Using JSF 2.1, Mojarra 2.1.3, Glassfish 3.1.1, and PrimeFaces 3.3.1

I'm trying to handle processing field level security in JSF, on the preRenderView event, and having issues when needing to add a dynamic component to the JSF component tree. On first render, everything is fine and field level security is processed. After any sort of update, however, Mojarra complains about a duplicate id even though, through printing to the console, my add code is only running once per update.

It appears as if Mojarra isn't clearing the component tree for postbacks and thus each subsequent rendered update adds an additional version of the component to the tree.

Thanks for any help anyone can provide. Here's some dumbed-down sample code. On commandButton click the error is thrown.

index.xhtml:

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
        >
    <f:event listener="#{lifeCycle.event}" type="preRenderView" />
    <h:body>
        <h:form id="form" prependId="false">
            <h:panelGroup id="testPanel">
                <h:inputText id="viewSec" value="viewSec node"/><br/>
            </h:panelGroup>
            <p:commandButton update="testPanel"/>
        </h:form>
    </h:body>
</html> 
```

LifeCycle.java:

```
package com.dynamic.test;

import java.io.Serializable;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.component.UIComponent;
import javax.faces.component.UIViewRoot;
import javax.faces.component.html.HtmlOutputText;
import javax.faces.component.visit.VisitContext;
import javax.faces.context.FacesContext;
import javax.faces.event.ComponentSystemEvent;

@ManagedBean
@RequestScoped
public class LifeCycle implements Serializable {
    public void event(ComponentSystemEvent event){
        FacesContext facesContext = FacesContext.getCurrentInstance();
        UIViewRoot root = facesContext.getViewRoot();
        NodeInspector visitCallback = new NodeInspector();

        root.visitTree(VisitContext.createVisitContext(FacesContext.getCurrentInstance()), visitCallback);

        List<UIComponent> securityEnabledComponents = visitCallback.getSecurityEnabledComponents();
        for (UIComponent securityEnabledComponent : securityEnabledComponents) {

            if(securityEnabledComponent.getClientId().equals("viewSec")){
                List<UIComponent> childList = securityEnabledComponent.getParent().getChildren();
                int targetPosition = securityEnabledComponent.getParent().getChildren().indexOf(securityEnabledComponent);

                HtmlOutputText outputTextComponent = new HtmlOutputText();
                outputTextComponent.setId(securityEnabledComponent.getId());
                outputTextComponent.setValue(securityEnabledComponent.getAttributes().get("value"));

                childList.set(targetPosition, outputTextComponent);
            }
        }
    }
} 
```

NodeInspector.java

```
package com.dynamic.test;

import java.util.ArrayList;
import java.util.List;
import javax.faces.component.UIComponent;
import javax.faces.component.visit.VisitCallback;
import javax.faces.component.visit.VisitContext;
import javax.faces.component.visit.VisitResult;
import javax.faces.context.FacesContext;

public class NodeInspector implements VisitCallback {
    private List<UIComponent> securityEnabledComponents = new ArrayList<UIComponent>();
    FacesContext facesContext = FacesContext.getCurrentInstance();

    @Override
    public VisitResult visit(final VisitContext context, final UIComponent target) {
        if(target.getClientId().equals("viewSec")){
            securityEnabledComponents.add(target);
        }
        return VisitResult.ACCEPT;
    }

    public List<UIComponent> getSecurityEnabledComponents() {
        return securityEnabledComponents;
    }
} 
```

Error:

```
SEVERE: JSF1007: Duplicate component ID viewSec found in view.
    ...  +id: j_idt2
       type: <html xmlns="http://www.w3.org/1999/xhtml">

      +id: j_idt3
       type: javax.faces.component.UIOutput@17098e7
        +id: form
         type: javax.faces.component.html.HtmlForm@14677de
          +id: testPanel
           type: javax.faces.component.html.HtmlPanelGroup@167ab25
            +id: viewSec  <===============
             type: javax.faces.component.html.HtmlOutputText@14a3d2e
            +id: viewSec  <===============
             type: javax.faces.component.html.HtmlOutputText@f6a607
            +id: j_idt4
             type: <br/>

          +id: j_idt5
           type: org.primefaces.component.commandbutton.CommandButton@1380fc5
      +id: j_idt6
       type: 
    </html>...

    SEVERE: Error Rendering View[/index.xhtml]
    java.lang.IllegalStateException: Component ID viewSec has already been found in the view.  
        at com.sun.faces.util.Util.checkIdUniqueness(Util.java:821)... 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-11T11:20:35.910

检查您使用的 Mojarra 版本是否与 Primefaces 3.3.1 兼容。
使用最新版本的 Primefaces 3.6。

# java - GAE-JAVA-JDO How to build a decoded entity key breadcrumb

> ID：13686343
> 
> 赞同：1
> 
> 时间：2012-12-03T15:26:45.403
> 
> 标签：java, google-app-engine

I'd like to know how they did it in the edit page of the datastore viewer and any help would be much appreciate. Seems pretty simple but can't figure it out. Here's a screenshot to show exactly what I mean.![A decoded entity key](../Images/7e43c2167c6c3807a47080435f2b1f73.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T21:07:42.890

该类`Key`有一个 kind 和（名称或 id），还有一个`parent`，它将是 null 或另一个键。

从实体的 key 开始，可以打印 kind 和 id，然后查找 parent，打印它的 kind 和 id，然后查找它的 parent，打印 kind 和 id，等等。

请参阅[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Key](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Key)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T15:04:53.583

字符串编码的 Key 确实包含其自身及其所有祖先的种类和 ID。在父字段为空之前循环服务器端没有问题（它基本上是字符串+对象操作，不涉及对数据存储的查询），以创建面包屑。

我不知道它是否已经在 J​​S 中完成了客户端，但它应该是可能的，因为它基本上是一个 base64 编码。`Encode()`有关算法，请参见[https://github.com/golang/appengine/blob/master/datastore/key.go](https://github.com/golang/appengine/blob/master/datastore/key.go)中的函数。

这个在线工具对密钥进行解码和编码：http: [//datastore-key.appspot.com](http://datastore-key.appspot.com)。它还可以作为具有 JSON 输出的服务。Go 代码服务器端不发出数据存储查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-04T20:18:23.740

Java 的答案可能是这样的：

[https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/KeyFactory#stringToKey(java.lang.String)](https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/KeyFactory#stringToKey(java.lang.String))

这为您提供了`Key`一个编码表示，然后您可以查询种类、命名空间、id、父项和 appId，这允许与上面评论中提到的 python 答案类似的处理。

例如，以下代码片段重新映射具有一个父项且最初来自另一个 GAE 应用程序的密钥：

```
 String key = "sflkjsadfliasjflkhsa"; // replace this by a real key

  // a not very elegant way to get the current app id
  String appId = KeyFactory.createKey("dummy", 1).getAppId();

  // here, the key is converted from an encoded String to a key object
  Key keyObj = KeyFactory.stringToKey(key);
  String oldAppId = keyObj.getAppId();

  // if the app id is different, we have to convert the key
  if (!appId.equals(oldAppId)) {
      // creeate a new key with parent having the correct app id
      Key parentKey = keyObj.getParent();
      Key newParentKey = KeyFactory.createKey(parentKey.getKind(), parentKey.getId());
      Key newKeyObj = KeyFactory.createKey(newParentKey, keyObj.getKind(), keyObj.getId());

      // convert the key back to a String replacing the original one
      String newKey = KeyFactory.keyToString(newKeyObj);

      // replace this by a call to your logger
      Log.warn(getClass(), "remapped key: appId: " + oldAppId + " -> " + appId + " oldKey: " + key + " -> " + newKey);

      key = newKey;
  } 
```

# mysql - Error establishing database connection when running mamp on port 80

> ID：13686348
> 
> 赞同：2
> 
> 时间：2012-12-03T15:27:00.433
> 
> 标签：mysql, wordpress, apache, mamp

I'm trying to run Mamp appache on port 80, because the application(wordpress MU) doesn't allow port-numbers in the domain-name.

When I run appache on the default MAMP-port, I manage to get a connection to the database, but when I run it on port 80, I get Error establishing database connection.

While on port 80, I have tried using both the default MAMP-port and default mySQL-port, I have also tried specifying the ports according to wordpress specifications, ie:

```
 define('DB_HOST', 'localhost:8889'); 
```

Nothing of this makes any difference. I'm clueless what should I do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:05:20.803

使用 MySQL 端口 3306 时，

![港口码头](../Images/b8b161692b0a4c8df0e5d5e9d1e17de1.png)

这是主持人：`define('DB_HOST', 'localhost');`。

* * *

**相关**：

> [MAMP 上的 WordPress 多站点子域](http://perishablepress.com/wordpress-multisite-subdomains-mamp/)
> 设置 WordPress 多站点的最简单且推荐的方法是使用子目录。因此，当您创建一个名为“business”的新站点时，它将位于`http://localhost/business/`. 这是关于如何为您的网络站点使用*子域*的迷你教程。

# git - 如何让 bash 假设所有命令都是 git 命令？

> ID：13686349
> 
> 赞同：3
> 
> 时间：2012-12-03T15:27:02.813
> 
> 标签：git, bash, alias

我可以让 bash 假设命令始终是 git 命令吗？

我是说：

如果我写了`push origin master`它会执行`git push origin master`吗？

注意：我会在 git bash（Windows 环境）中使用它，所以我不需要常规命令（ls、cd 等）来工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:37:01.533

您可以为常用命令添加别名，例如`push`将成为`git push`等。此解决方案需要指定您正在使用的所有命令，但不应破坏任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:28:13.117

你可能想试试这个小的 git shell，而不是：

```
gitsh () {
    while read -r -p "gitsh> " -a GITCOMMAND; do
        git "${GITCOMMAND[@]}"
    done
} 
```

定义该函数后，运行一次，它将处于无限循环中，读取命令行并将其作为选项传递给`git`命令。

编辑：按照 gniourf_gniourf 的建议，将`-e`选项添加到`read`命令中，为您提供了一个不错的基于 Readline 的环境，您可以在其中检索和编辑历史记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T17:49:20.083

假设“git bash”就像普通的 bash，使用`command_not_found_handle`函数：

```
function command_not_found_handle {
  command git "$0" "$@"
} 
```

[http://www.gnu.org/software/bash/manual/bashref.html#Command-Search-and-Execution](http://www.gnu.org/software/bash/manual/bashref.html#Command-Search-and-Execution)

存在发送 git 无意命令的可能性，但这就是您在问题中所要求的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:37:07.640

您可以将名为 push、commit 等的脚本添加到您的 PATH 中。这样，您的外壳将具有推送、提交等“命令”。这应该适用于您使用的任何 shell，而不仅仅是 bash。

# css - Can using percentages for height of padding/margin/border be better than em?

> ID：13686350
> 
> 赞同：4
> 
> 时间：2012-12-03T15:27:04.363
> 
> 标签：css, height, responsive-design, margin, padding

What are good and recommended uses of percentage values for vertical CSS declarations?

In other words, under responsive design, **are we overlooking something where % would be beneficial over em?**

Because it seems that for most situations (except for cases where you want all sides equal; [credit](https://stackoverflow.com/a/13686665/1779823)), `em` would be better served than `%`, consider:

Using percentages for the horizontal values of padding, margin or border of elements in CSS is fairly standard — especially in responsive web design. For example, take `margin-left: 7.2%` and `padding: 0 5%`. It also makes sense: the wider the screen, then the space will increase proportionally.

One *can* do the same for the vertical values:

```
margin-top: 5%;
padding: 10% 0;
border: 1% 0 2% 0; 
```

As expected, an increasing viewport width will increase the corresponding vertical spaces.

However, in the cases I've come across, it can look a bit odd — unfitting to the design. It seems that `em` values may be better served.* But, on the other hand, where would it be beneficial to use percentages?

[* Since these won't increase with the width of the screen, but will increase according to the font size of the page.]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:43:57.280

Yes, depending on the situation just like any other css practice.

Say you have a container div that uses 100% of the screen height and you have a header you want to appear at the top of your div. You could say `margin-top: 15px` on your header, which works, but then if I come and view it on my phone it will look very squished.

So instead you say `margin-top: 10%` then no matter what screen I come and view your site on your header is always 10% from the top of the div. which means the relative flow of your layout will always be the same.

The general rule is this: For any valid css you can write there is a use-case where it would be the best way to go about achieving your design goal. Forget anyone who says "Never use negative margins" or "always avoid absolute positioning" or any of the other crap they throw around.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:43:08.840

我不认为这个问题有任何正确或错误的答案。这确实取决于您的设计。

正如您所指出的，% 值，即使在边距和填充的基于垂直的属性上，仍然与文档的*宽度*相关。因此，如果您的设计需要均匀的填充，那么所有的 % 值都很棒。

但是，如果设计是面向内容的，并且您仍然在水平属性上使用 % 值进行响应式设计，则 % 可能不是垂直属性的最佳选择。例如，您可能希望`padding-top`恰好是 1 行文本的高度。所以你会使用`ems`.

但我离题了；这确实取决于您的设计和个人喜好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T15:45:45.633

我最近也一直在思考这个问题，在网上阅读后，我开始依赖的“经验法则”如下。首先，为什么 % 是水平轴的良好响应式设计的原因是因为众所周知，浏览器的宽度可能会因用户使用手机还是计算机而有很大差异。然而，垂直轴是不同的，因为虽然它也可以像水平轴一样变化，但许多网页都是为垂直滚动而创建的，并且用户希望向下滚动。在这种情况下，由于 ems 响应速度较慢，因此垂直滚动多一点是可以的。

要基于该假设回答您的问题，您将使用 % 作为垂直边距的时间是当您有一个设计时，您不想让用户滚动太多以查看页面的一部分。具体示例可能是您不希望任何滚动的单页 Web 应用程序或标题或初始页面内容，例如您希望用户无需向下滚动即可完整查看的图片。

# assembly - THUMB push/pop instructions

> ID：13686353
> 
> 赞同：3
> 
> 时间：2012-12-03T15:27:13.217
> 
> 标签：assembly, arm, thumb

I'm trying to create a factorial method using THUMB instructions, and I'm basically there.

I just have one question about the `PUSH`/`POP` opcodes: if I stored the value of r0 in the stack using push (so `push {r0}`), can I later use `pop {r1}` to pull it out or do I need to specify the same register as it was in to begin with? Thanks for your help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:12:32.963

Yes, you can since `push`/`pop` actually expand to store/load multiple, which are generic instructions operating on registers and memory, so

```
push {r0} 
```

is equivalent to

```
stmdb sp!, {r0}  @ or stmfd sp!, {r0} in alt notation 
```

and

```
pop {r1} 
```

is the same as

```
ldmia sp!, {r1}  @ or ldmfd sp!, {r1} 
```

# javascript - Detect index.html length size for iPhone 4s and iPhone 5 using JavaScript

> ID：13686354
> 
> 赞同：0
> 
> 时间：2012-12-03T15:27:13.817
> 
> 标签：javascript, iphone

Is there a script that I can use to detect a length size for iPhone 4s and iPhone 5 using JavaScript so I can use two index.html for iphone4s and iphone 5?

When using the app the iphone automatically detect iphone 4s or iphone 5 the choose a correct index.html

This is not a launch page I'm talking about as I've

This is for iPhone app and I'll be using HTML5, CSS3 and JS (cordova 2.1 formerly Phonegap).

# c - Error: selected processor does not support ARM mode `wfi'

> ID：13686357
> 
> 赞同：12
> 
> 时间：2012-12-03T15:27:20.437
> 
> 标签：c, assembly, embedded, arm, stm32

I'm getting the following errors while trying to compile an ARM embedded C program (I'm using YAGARTO as my cross compiler). I'm trying to work out what this error means and what are the steps to correct it. From the research I've done so far, the issue it seems to be `wfi`, and `wfe` are not ASM instruction. How could I fix this?

```
\cc9e5oJe.s: Assembler messages:
\cc9e5oJe.s:404: Error: selected processor does not support ARM mode `wfi'
\cc9e5oJe.s:414: Error: selected processor does not support ARM mode `wfe'
\cc9e5oJe.s:477: Error: selected processor does not support ARM mode `wfi'
make: *** [STM32F10x_StdPeriph_Driver/src/stm32f10x_pwr.o] Error 1 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T16:25:58.590

您可能会错过 STM32F10x 的一些重要编译器选项 - 这是一个 Cortex M3：

```
-mcpu=cortex-m3 -mthumb -mno-thumb-interwork -mfpu=vfp -msoft-float -mfix-cortex-m3-ldrd 
```

# regex - RegEx backreference modification in AutoHotkey possible?

> ID：13686358
> 
> 赞同：1
> 
> 时间：2012-12-03T15:27:23.057
> 
> 标签：regex, autohotkey, backreference

I'd like to modify a backreference in RegExReplace before using it.

I want to make something like this work:

```
RegExReplace(ManualTimeValues, "(\d+)\.(\d+)", "$1"*60+"$2") 
```

`ManualTimeValues` is a line containing numbers in integer and floating point format, separated by spaces. I want to replace the floating point numbers with integers computed by multiplying the part before the point with 60 and adding the part after the point.
I've also tried :

```
RegExReplace(ManualTimeValues, "\d+\.\d+", min2sec("$0")) 
```

with `min2sec` being a custom function that converts a single floating point number.
I've also tried the same lines with unquoted backreferences.

I've solved this in practice using

```
Loop, Parse, ManualTimevalues, %A_Space% 
```

but is there a way to use RegExReplace for this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:58:05.927

如果您使用 AutoHotkey_L（如果您不使用，则应该使用），请在索引中搜索“Regular Expression Callouts”。这将允许您做您正在寻找的事情，尽管您的循环解析在这种情况下同样出色。

# spring - 嵌入式Jetty测试spring应用启动

> ID：13686363
> 
> 赞同：1
> 
> 时间：2012-12-03T15:27:53.947
> 
> 标签：spring, junit, jetty, embedded-jetty

我想要做的是，进行测试以启动整个应用程序，看看是否有任何错误。但我想使用 /src/resource 文件夹中的 applicationContext.xml 而不是形成测试/资源。我怎样才能在 JUnit 中做到这一点？

我的应用程序很大，很多人共享相同的代码库。所以，我只想快速测试一下 checkin 是否可以启动应用程序。

这是我的简单代码，但它看起来缺少一些自动装配的东西，这就是我想使用 /src/resource 中的 xml 文件的原因，所以我不必维护两个位置。

我的应用程序是普通的 Spring MVC 3.0

```
@Test(enabled = false)
public void shouldStartupTheApp() throws Exception {
    Server server = new Server();
    SelectChannelConnector connector = new SelectChannelConnector();
    connector.setPort(9999);
    server.setConnectors(new Connector[] {connector});

    Context context = new Context(server, "/", Context.SESSIONS);

    DispatcherServlet dispatcherServlet = new DispatcherServlet();
    dispatcherServlet.setContextConfigLocation("classpath:/test-applicationContext.xml");

    ServletHolder servletHolder = new ServletHolder(dispatcherServlet);
    context.addServlet(servletHolder, "/*");
    server.start();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:45:30.917

您可以使用 src/resources/filename.xml 在其他 xml 文件中导入

```
<import resource="classpath:/filename.xml" /> 
```

# php - 在 codeigniter 中使用 jQuery $.post 动态加载页面

> ID：13686366
> 
> 赞同：-5
> 
> 时间：2012-12-03T15:27:55.960
> 
> 标签：php, jquery, codeigniter

我有一个主页，其中有两个 DIV（左和右）。在左 div 我将有一些项目。并在正确的 div 中显示其详细信息。（请看图片）

![设想](../Images/bb13a61c28d0276c9b505c6fb85b6fc8.png)

在这里，单击左侧 div 中的项目，应加载其相应的详细信息。我对两个 div 有两个单独的视图。我能够从控制器功能加载左视图。

但是我应该根据左 div 项的 加载右 div`item_id`而无需任何页面刷新。

为此，我将`item_id`通过 jQuery发送`$.post`并获取`details_page`.

我对详细信息页面的看法是

```
<div class="title"><?php echo $title; ?></div>
<div class="details">
    <div class="author"><?php echo $author; ?></div>
    <div class="pagedata"><?php echo $pagedata; ?></div>
</div> 
```

当详细信息页面加载时，这些 PHP 变量应该被替换。

请帮助我在 codeigniter 中使用 jQuery 对上述场景进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:41:07.943

在您的 PHP 控制器中，您需要一个为视图提供服务的方法：

```
class Foo extends CI_Controller {
    public function getItem($item) {
        // the view holds the html for the right div
        $this->load->view($item);
    }   
} 
```

在 jquery 中，您可以像这样获取视图：

```
$.get('example.com/foo/getItem/item1', function(resp){
    $('#contentDiv').html(resp);
}, 'html'); 
```

当然，每次使用适当的项目名称单击左侧 div 上的窗格时，您都会调用此 jquery 代码片段。

# iphone - AVAudioPlayer 是否能够在没有可听间隙的情况下循环播放大型音频文件？

> ID：13686369
> 
> 赞同：1
> 
> 时间：2012-12-03T15:28:02.930
> 
> 标签：iphone, ios, ipad, avfoundation, avaudioplayer

我有长达 10 分钟的大型循环背景音乐文件。声音循环完美，如果播放器没有引入延迟，您将不会注意到循环点在哪里。

AVAudioPlayer 可以播放它们，而用户不会听到由延迟或其他循环问题引起的间隙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-22T20:14:02.347

您可能会听到延迟，因为您的音乐被压缩（例如 mp3）。AVAudioPlayer 必须在 mp3 流式传输时对其进行解码。如果你有相同的未压缩格式的音乐，它会占用更多的磁盘空间，但会无缝循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:42:54.420

只要您最后不停止/启动它并且设置`numberOfLoops`为负整数，它就可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-08T00:46:25.600

我在尝试创建无缝循环时遇到了问题。我尝试使用该`numberOfLoops`属性，但没有成功。我尝试切换到未压缩的音频文件，但没有成功。我什至尝试切换到`AVAudioQueuePlayer`, 与同一资产的多个实例一起排队，但没有成功。最后，我通过创建`AVAudioPlayer`(player1 & player2) 的两个实例并在它们之间切换来解决问题。我开始播放 player1 并使用 player2 的`prepareToPlay`方法，以及`play(atTime time:)`将 TimeInterval 设置为`player1.deviceCurrentTime - player1.currentTime + player1.duration`. 然后我使用委托方法`audioPlayerDidFinishPlaying`准备 player1 在 player2 完成后重新开始播放。老实说，我不知道为什么这种方法有效并且简单地设置`numberOfLoops`为 -1 没有。但它也可能对你有用

# mysql - MySQL 查询。给出最接近今天的日期

> ID：13686385
> 
> 赞同：0
> 
> 时间：2012-12-03T15:28:54.120
> 
> 标签：mysql

我有这个查询，它给了我不止一个结果。我想对其进行编辑，以便每个 o.Customer_ID 只给我一个结果，然后使用 o.OrderPlaceServerTime 将其设为最接近今天的订单。

这是我的查询：

```
SELECT
    o.Order_ID,
    o.Customer_ID,
    o.OrderPlaceServerTime,
    o.CustomerOrderTotal
FROM 
    Orders o
    LEFT JOIN Order_LineDetails oln 
    ON oln.Order_ID = o.Order_ID
WHERE 
    o.OrderPlaceServerTime >= '2012-09-01 00:00:00'
AND o.OrderPlaceServerTime <= '2012-12-01 00:00:00'
AND o.CustomerOrderTotal >= '50'
AND oln.Product_ID = '75' 
```

我需要改变什么来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:35:17.193

> 我想对其进行编辑，以便每个 o.Customer_ID 只给我一个结果

因此，首先您应该通过按客户 ID 对合格订单进行分组并选择最大值或 OrderPlaceServerTime 来获取合格客户 ID 的最新订单。然后，您可以将这些记录与客户 ID 上的 Orders 和 OrderPlaceServerTime 结合起来，以选择其他两个感兴趣的属性。

```
SELECT
    o.Order_ID,
    o.Customer_ID,
    o.OrderPlaceServerTime,
    o.CustomerOrderTotal
FROM 
    Orders o
    JOIN (
        SELECT
            o.Customer_ID,
            MAX(o.OrderPlaceServiceTime) 'MaxOrderPlaceServiceTime'
        FROM 
            Orders o
            LEFT JOIN Order_LineDetails oln 
            ON oln.Order_ID = o.Order_ID
        WHERE 
            o.OrderPlaceServerTime >= '2012-09-01 00:00:00'
        AND o.OrderPlaceServerTime <= '2012-12-01 00:00:00'
        AND o.CustomerOrderTotal >= '50'
        AND oln.Product_ID = '75'
        GROUP BY o.Customer_ID
    ) AS A
    ON 
        o.Customer_ID = A.Customer_ID AND 
        o.OrderPlaceServiceTime = A.MaxOrderPlaceServiceTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:38:00.827

如果我正确理解您的需要，这应该是查询：

```
 SELECT * FROM 

    ( SELECT
    o.Order_ID,
    o.Customer_ID,
    o.OrderPlaceServerTime,
    o.CustomerOrderTotal
    FROM 
        Orders o
        LEFT JOIN Order_LineDetails oln 
        ON oln.Order_ID = o.Order_ID
    WHERE 
        o.OrderPlaceServerTime >= '2012-09-01 00:00:00'
    AND o.OrderPlaceServerTime <= '2012-12-01 00:00:00'
    AND o.CustomerOrderTotal >= '50'
    AND oln.Product_ID = '75'    
    ORDER BY o.Customer_ID, o.OrderPlaceServerTime DESC ) AS tab1   

    GROUP BY o.Customer_ID; 
```

# java - Apache POI HSSF：如何添加不会与相应单元格一起调整大小的形状？

> ID：13686389
> 
> 赞同：1
> 
> 时间：2012-12-03T15:29:01.140
> 
> 标签：java, apache-poi, poi-hssf

我需要使用 POI 向 xls-document 添加形状（特别是圆形）。所以，我写了以下代码：

```
private void drawLabel(HSSFSheet sheet, HSSFCell cell) {
    final short columnIndex = (short) cell.getColumnIndex();
    final int rowIndex = cell.getRowIndex();
    HSSFClientAnchor anchor = new HSSFClientAnchor(60, 60, 200, 200, columnIndex, rowIndex, columnIndex, rowIndex);
    anchor.setAnchorType(ClientAnchor.MOVE_DONT_RESIZE);
    HSSFSimpleShape shape = sheet.getDrawingPatriarch().createSimpleShape(anchor);
    shape.setShapeType(HSSFSimpleShape.OBJECT_TYPE_OVAL);
    ...
} 
```

有用。但是，如果我尝试以编程方式更改列宽（例如`sheet.setColumnWidth(0, 5 * 256);`（假设已将形状添加到列索引 == 0 的单元格中）），圆形会扭曲并变成椭圆形（尽管锚的类型设置为`MOVE_DONT_RESIZE`）。我的方法有什么问题，有没有办法绘制一个不会与相应单元格一起调整大小的形状？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:00:43.607

我还没有找到这个问题的适当解决方案。但解决问题的一种方法是根据实际大小缩放形状（特别是其锚点）：

```
private void drawLabel(HSSFSheet sheet, HSSFCell cell) {
    final int defaultColumnWidth = 2048; // column width before resizing
    final int defaultRowHeight = 255; // row height before resizing
    final double xDistortionFactor = 1.0 * defaultColumnWidth / sheet.getColumnWidth(cell.getColumnIndex());
    final double yDistortionFactor = 1.0 * defaultRowHeight / cell.getRow().getHeight();

    final int dx1 = (int) (60 * xDistortionFactor);
    final int dy1 = (int) (60 * yDistortionFactor);
    final int dx2 = (int) (200 * xDistortionFactor);
    final int dy2 = (int) (200 * yDistortionFactor);
    final short columnIndex = (short) cell.getColumnIndex();
    final int rowIndex = cell.getRowIndex();
    final HSSFClientAnchor anchor = new HSSFClientAnchor(dx1, dy1, dx2, dy2, columnIndex, rowIndex, columnIndex, rowIndex);
    anchor.setAnchorType(ClientAnchor.MOVE_DONT_RESIZE);

    HSSFSimpleShape shape = sheet.getDrawingPatriarch().createSimpleShape(anchor);
    shape.setShapeType(HSSFSimpleShape.OBJECT_TYPE_OVAL);
    ...
} 
```

这个解决方案并不优雅，但它确实有效。

# html - 位置 2 箭头用 CSS 固定到 HTML 页面容器的外部 - 屏幕大小

> ID：13686392
> 
> 赞同：0
> 
> 时间：2012-12-03T15:29:06.923
> 
> 标签：html, css, screen, resolution

我正在尝试创建一个 HTML 页面滑块，所以我有我的容器 div，然后坐在外面，在左边我有一个上一个图标，在右边我有一个下一个图标。

我的问题是，当我将窗口调整为较小的屏幕时，图标会移动到容器的中心，我希望它们在调整大小时始终保持固定在容器外部的位置。

我的容器代码：-

```
width: 960px;
margin: 0 auto;
clear: both;
overflow: hidden;
min-height: 449px; 
```

下一个和上一个代码：

```
a.vehicleSliderLeft {background: url('../img/slider_arrow_left.png'); 
             width: 55px; height: 112px; left: 270px; background-position:0px; 
             background-repeat: no-repeat; position: fixed; top: 420px;}    

a.vehicleSliderRight {background: url('../img/slider_arrow_right.png'); 
             width: 55px; height: 112px; right: 270px; background-position:0px; 
             background-repeat: no-repeat; position: fixed; top: 420px;} 
```

有任何想法吗？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:00:54.187

You should try something like this:

```
.container{
    width: auto;
    margin: 0 auto;
    clear: none;
}

a.vehicleSliderLeft {
    float: left;
}    

a.vehicleSliderRight {
    float: right;
} 
```

Fiddle: [http://jsfiddle.net/EhdkP/1/](http://jsfiddle.net/EhdkP/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:03:40.513

您需要提供主容器`position: relative`，然后使用 . 将箭头元素放置在容器内`position: absolute`。

`right: x , left: x , top: x , bottom: x.`然后，这允许您使用x 是任何数字或百分比来操纵将两个箭头放在页面上的位置。

jsFiddle：http: [//jsfiddle.net/LZG3R/3/](http://jsfiddle.net/LZG3R/3/)

来源：[十步学习 CSS 位置](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:36:06.497

在主 div 中，您可以将每个元素保存在单独的 div 中，指定每个 div 的位置，指定宽度的百分比

# c# - 在上传期间或上传后加密文件

> ID：13686393
> 
> 赞同：3
> 
> 时间：2012-12-03T15:29:10.733
> 
> 标签：c#, asp.net, encryption

我有一个使用 C# 的 .net Web 应用程序，它允许用户上传文件，我们需要加密该文件以更安全，而不是将文件原样留在服务器上，因此还需要一种解密方法文件，以便用户可以从 Web 应用程序中查看它。有人可以推荐一种方法吗？文件类型可能会有所不同，但现在他们只想上传 .pdf 文件，如果这很重要的话。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:36:25.103

请按照以下步骤操作：

1.  使用[AES 加密](https://stackoverflow.com/questions/273452/using-aes-encryption-in-c-sharp)
2.  在数据库中生成和存储 AES 密钥和 IV 作为 varbinary
3.  加密有人上传文件时的文件流
4.  添加一个通用处理程序 *.ashx，并在其中查询数据库以获取 AES 密钥和 IV
5.  将解密的字节写入响应流

# openssl - SSL_read 失败并出现 SSL_ERROR_SYSCALL 错误

> ID：13686398
> 
> 赞同：21
> 
> 时间：2012-12-03T15:29:29.877
> 
> 标签：openssl, ssl

我们已经使用 openssl 实现了 tls。从服务器下载较大数据时`SSL_ERROR_SYSCALL`收到一些数据后出现错误。对于较小的文件，我没有收到此错误，可以毫无错误地下载。对于较大的文件，ERR_get_error() 显示为零。

我们正在使用 linux 和 c++ 框架。如何寻找失败的原因？失败的原因可能是什么？请提供您的建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T15:49:00.837

SSL_ERROR_SYSCALL 表示底层 I/O 发生了一些问题（在这种情况下应该是 TCP）。因此，您可以尝试使用 errno 进行检查。

OpenSSL 帮助说：

> **SSL_ERROR_SYSCALL**
> 
> 发生了一些 I/O 错误。OpenSSL 错误队列可能包含有关错误的更多信息。如果错误队列为空（即 ERR_get_error() 返回 0），则可以使用 ret 来查找有关错误的更多信息：如果 ret == 0，则观察到违反协议的 EOF。如果 ret == -1，则底层 BIO 报告 I/O 错误（对于 Unix 系统上的套接字 I/O，请参阅 errno 了解详细信息）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-24T20:16:46.447

如果您查看源代码，`SSL_get_error()`您会看到，`SSL_ERROR_SYSCALL`只要不确定到底发生了什么，它就会返回。它基本上是“未知”情况的默认返回码。

例如，在我的情况下（使用 BIO 进行非阻塞 IO）：

```
int buf;
const int n = SSL_read(ssl, &buf, 0);
const int err = SSL_get_error(ssl, n);
const int st = ERR_get_error(); 
```

当`n`为 0 时，`err`将`SSL_ERROR_SYSCALL`只是因为。但是`st`仍然为 0，表示没有真正的错误。`SSL_read`刚刚返回 0，因为 0 字节被写入`buf`.

但是，请在调用后查找`errno`/`WSAGetLastError()`值以获取更多详细信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-04T09:35:51.653

检查是否调用了缓冲区大小为 0 的 SSL_read()。我使用 SSL_pending() 犯了以下错误：

```
int waitForReadFd = nBuf < bufSize;

if (waitForReadFd)
    FD_SET(fd, &rfds);

// ...
// select

int doReadFd = FD_ISSET(fd, &rfds) || SSL_pending(ssl);

if (doReadFd)
    n = SSL_read(ssl, buf, bufSize - nBuf); 
```

如果`nBuf == bufSize`SSL_read() 将以 0 的缓冲区大小调用，则会导致 errno == 0 的 SSL_ERROR_SYSCALL。

更改 doReadFd 检查将避免此问题：

```
int doReadFd = FD_ISSET(fd, &rfds) || nBuf < bufSize && SSL_pending(ssl); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-12T22:05:44.903

我发现问题是我公司的防火墙阻止了请求。回家吧，它应该工作

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-29T16:44:43.340

该问题是由于网络连接被切断和服务器重新设置引起的。

在下载数据之前确保连接正常。

使用 vagrant 时也可以看到类似的问题。

[https://github.com/hashicorp/vagrant/issues/9612](https://github.com/hashicorp/vagrant/issues/9612)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-10T11:10:09.807

我们在 Go 应用程序中遇到了这个错误。我们使用第三方库从 Go 连接到底层的 openssl 库。在读取数据时，第三方库正在将要读取的缓冲区/数据的长度转换为 32 位的 C.int。对于 >= 2GB 的大数据，这会导致溢出并将负值传递给 C.SSL_read 函数。在这种情况下，它引发了 SSL_ERROR_SYSCALL 错误。

# caching - 流水线模拟器的指令缓存

> ID：13686400
> 
> 赞同：1
> 
> 时间：2012-12-03T15:29:39.167
> 
> 标签：caching, pipeline

我正在尝试使用 java 完成一个基于简化 mips 计算机的模拟器。我相信我已经完成了分配所需的流水线逻辑，但我很难理解指令和数据缓存应该做什么。

指令缓存应直接映射为 4 个块，块大小为 4 个字。

所以我真的很困惑缓存在做什么。它会进入记忆并从记忆中提取指令吗？例如，在一个块中，它将只有 add 命令。

将它实现为二维数组是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:23:40.090

首先，您应该了解缓存的基础知识。您可以将缓存想象为位于 DRAM 或主内存与处理器之间的中间内存，但其大小非常有限。现在，当您尝试访问内存中的某个位置时，您将首先在缓存中搜索它。如果找到（缓存命中），处理器将获取此数据并恢复执行。通常缓存命中应该是非常少的时钟周期，比如 1 或 2。假设如果在缓存中找不到数据（缓存未命中），则从主内存中获取数据，填充缓存并馈送到处理器。处理器阻塞直到获取数据。这通常需要数百个时钟周期，具体取决于您使用的 DRAM。从 DRAM 获取的数据量等于缓存线大小。

我认为这应该让你开始。

# android - 获取具有特定 id 的行在 ListView 中的位置

> ID：13686401
> 
> 赞同：0
> 
> 时间：2012-12-03T15:29:41.090
> 
> 标签：android, android-listview, click, simplecursoradapter

我有一个`ListView`，`SimpleCursorAdapter`我想知道如何获得一个职位`ListView`？我需要它像这样单击列表的特定行

```
lv.performItemClick(lv, pos, lv.getItemIdAtPosition(pos)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T15:38:48.143

遍历您`Cursor`使用的`SimpleCursorAdapter`并检查 id：

```
if (cursor.moveToFirst()) {
    while (!cursor.isAfterLast) {
         if (cursor.getLong(/*the index of the _id column*/) == theTargetId) {
              theWantedPosition = cursor.getPosition();
              break; 
         }
         cursor.moveToNext();
    } 
}
lv.performItemClick(lv, theWantedPosition, lv.getItemIdAtPosition(theWantedPosition)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:33:19.540

此覆盖方法将为您提供此单击的 listView 的位置

```
 @Override
        protected void onListItemClick(ListView l, View v, int position, long id) {
    } 
```

# javascript - 如果 URL 有 /directory/ 列表，则将活动类添加到菜单“父”项

> ID：13686403
> 
> 赞同：3
> 
> 时间：2012-12-03T15:29:41.867
> 
> 标签：javascript, jquery

当 URL 包含目录路径时，尝试将 CSS 类添加到父项。

例如，如果我的网址是

`example.com/directory/about.html`

我想在我的顶部导航中添加一个 CSS 类，如果它包含`/directory/`在其中。

所以在这种情况下，`example.com/directory/overview.html`会得到一个 CSS 类“ `active-parent`”

这将是`.main-nav li a.active-parent`

（请注意，我已经在使用 jquery 来检查 URL 并使该页面处于活动状态，但是当它是一个部分的子页面时，父页面没有突出显示）

我以为我可以使用[`:contains() Selector`](http://api.jquery.com/contains-selector/)但我不知道如何将它应用到 URL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:38:56.470

jQuery 选择器不能用于 url。您必须自己解析 url 并检查内容。

```
if (window.location.href.indexOf('/directory/') != -1) {
    // Add a css class to a html element
} 
```

您可能希望使用更通用的方式使用 split 函数：

```
window.location.pathname.split('/').forEach(function(directory) {
    if (directory == 'directory') {
        // Add a css class to a html element
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:45:05.020

I f I understand you correctly, you want to filter through a group of urls and then, based on text within the `href`, you want to manipulate data. In that case, use the [**.filter()**](http://api.jquery.com/filter/) function like so:

```
$("a").filter(function(i) { return $(this).attr("href").indexOf("document") > -1; }) 
```

This Grabs **ALL** `A` tag elements, filters them using the function inside to determine if the `href` has "document" in it or not. Then simply use the [**.each()**](http://api.jquery.com/each/) function to do whatever, like so:

```
$("a")
    .filter(function(i) { return this.href.indexOf("document") > -1; })
    .each(function(i) {
        $(this).parent().addClass("some-class-name");
    }); 
```

[](http://jsfiddle.net/SpYk3/KEmUQ/)

# *[***See jsFiddle Example***](http://jsfiddle.net/SpYk3/KEmUQ/)*

*If you need more understanding, just comment.*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:45:59.060

基于有限的信息，我建议：

```
$('a').filter(
    function(){
        return this.href.match(/(\/\w+\/)/);
    }).parent().addClass('parent'); 
```

这假设如果`href`包含*任何目录，而不是简单地**名为*“目录”的特定目录，则添加该类。

参考：

*   [`match()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match).
*   [JavaScript 中的正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。*

# qt - FIND_LIBRARY 未找到现有库

> ID：13686410
> 
> 赞同：2
> 
> 时间：2012-12-03T15:30:04.773
> 
> 标签：qt, cmake

在函数中`findQt4.cmake`：

```
FIND_LIBRARY(QT_QTCORE_LIBRARY_RELEASE
                   NAMES QtCore QtCore4
                   HINTS ${QT_LIBRARY_DIR_TMP}
          ) 
```

如果我打印：

```
MESSAGE("HINT PATH " ${QT_LIBRARY_DIR_TMP}) 
```

我会得到：

```
~/dev/Libraries/Qt4.8.0/lib 
```

在这个目录中有：`~/dev/Libraries/Qt4.8.0/lib$ ls -all libQtCore*`

我有：

```
-rw-r--r-- 1 abc abc     950 Nov 30 13:08 libQtCore.la
-rw-r--r-- 1 abc abc     942 Nov 30 13:07 libQtCore.prl
lrwxrwxrwx 1 abc abc      18 Nov 30 13:07 libQtCore.so -> libQtCore.so.4.8.0
lrwxrwxrwx 1 abc abc      18 Nov 30 13:08 libQtCore.so.4 -> libQtCore.so.4.8.0
lrwxrwxrwx 1 abc abc      18 Nov 30 13:08 libQtCore.so.4.8 -> libQtCore.so.4.8.0
-rwxr-xr-x 1 abc abc 2697932 Nov 30 13:08 libQtCore.so.4.8.0 
```

但是为什么`FIND_LIBRARY`函数返回：`QT_QTCORE_LIBRARY_RELEASE = NOT FOUND?`

甚至，如果我这样做，也没有结果：

```
FIND_LIBRARY(QT_QTCORE_LIBRARY_RELEASE
                       NAMES libQtCore.so
                       HINTS ${QT_LIBRARY_DIR_TMP}
              ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T14:09:33.317

而不是`find_library()`你可以使用[`find_package()`](http://www.cmake.org/cmake/help/v2.8.12/cmake.html#command%3afind_package). 这是 Qt 与 CMake 的[常用方法](http://qt-project.org/quarterly/view/using_cmake_to_build_qt_projects)。

```
# Find Qt package
find_package(Qt4 REQUIRED) 

include(${QT_USE_FILE}) # Add and run Qt CMake modules
add_definitions(${QT_DEFINITIONS}) # Add definitions (if required)

# And later put all together
add_executable( ... )
target_link_libraries( ... ${QT_LIBRARIES}) # Link Qt libraries 
```

# php - PHP向后foreach问题

> ID：13686411
> 
> 赞同：-4
> 
> 时间：2012-12-03T15:30:06.750
> 
> 标签：php

我想使用 foreach 循环遍历 php scandir 函数的结果，然后显示文件名，**然后**显示大小，但是当我使用代码时：

```
$scan = scandir("/home/foo");
foreach ($scan as $value) {
echo "$value" . "<br>" . filesize("/home/foo/$value") . " ";
} 
```

我最终得到的是文件大小值，然后是 $value，如下所示：

```
3337 Desktop
4096 Downloads
4096 Mail
4096 Scripts 
```

为什么是这样？以及如何让它以与代码相同的顺序格式化，即。文件名，然后是文件大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:34:32.067

在值和文件大小之间有一个换行符 ( `<br>`)，但在文件大小之后没有。

因此文件大小将作为新行的第一件事出现，下一个元素的名称将出现在它旁边。所以它实际上是以正确的顺序输出东西；它只是在打印输出中看起来不那样。

解决方案：

交换字符串的`"<br>"`和`" "`部分。

```
echo "$value" . " " . filesize("/home/foo/$value") . "<br>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:34:04.153

将 移动`<br>`到最后，它是一个换行符并开始一个新行。

# sql - 如何从 INSERT 语句运行子查询？

> ID：13686413
> 
> 赞同：0
> 
> 时间：2012-12-03T15:30:15.353
> 
> 标签：sql, sql-server, insert

SQL 2005

我有一个名为 tPieceTable 的表，其布局如下：

```
ID   BatchNo    PieceNo
-----------------------
1    abc        123
2    xyz        321 
```

在 tPieceTable 中，“ID”是一个 IDENTITY(1,1)。

我还有另一个表格（tLiveTable），它具有以下布局。

```
ID   TimeStamp  LocationRef
--------------------------- 
```

我要做的是创建一个存储过程，它将 tPieceTable 中的 ID 插入到 tLiveTable 中，其中 BatchNo 等于 @BatchNo 并且 PieceNo 等于 @PieceNo （这些是存储过程的参数）。

我有以下似乎正在工作：

```
CREATE PROCEDURE spSetLocationChargeTable
  @BatchNo nvarchar(50),
  @PieceNo nvarchar(50)
AS
  INSERT INTO tLiveTable(PieceID)
  SELECT ID FROM tPieceTable
  WHERE tPieceTable.BatchNo = @BatchNo AND tPieceTable.PieceNo = @PieceNo
GO 
```

现在，在插入的同时，我想将新记录的时间戳更新为 GetDate()，对于 LocationRef，我想插入以下查询的输出：

```
SELECT ID FROM tLocationRefs WHERE Equipment = 'CHARGE_TABLE' 
```

作为参考 tLocationRefs 看起来像这样：

```
ID   Equipment     Description
------------------------------
0    CHARGE_TABLE  Charger Machine Table 
```

我苦苦挣扎的地方是如何将所有这些结合到一个 INSERT 中。我尝试进行插入，然后进行两次更新，但我无法引用 tPieceTable，例如使用以下内容：

```
CREATE PROCEDURE spSetLocationChargeTable
  @BatchNo nvarchar(50),
  @PieceNo nvarchar(50)
AS
  INSERT INTO tLiveTable(PieceID)
  SELECT ID FROM tPieceTable
  WHERE tPieceTable.BatchNo = @BatchNo AND tPieceTable.PieceNo = @PieceNo

  UPDATE tLiveTable
  SET TimeStamp = GetDate()
  WHERE tPieceTable.BatchNo = @BatchNo AND tPieceTable.PieceNo = @PieceNo

  UPDATE tLiveTable
  SET LocationRef = (SELECT ID FROM tLocationRefs WHERE Equipment = 'CHARGE_TABLE')
  WHERE BatchNo = @BatchNo AND PieceNo = @PieceNo
GO 
```

我得到：-

“找不到多部分标识符“tPieceTable.BatchNo”。” “找不到多部分标识符“tPieceTable.PieceNo”。”

感谢大家的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:32:41.680

```
INSERT  INTO tLiveTable
        (PieceID, TimeStamp, LocationRef)
SELECT  ID 
,       getdate()
,       (
        SELECT  ID 
        FROM    tLocationRefs 
        WHERE   Equipment = 'CHARGE_TABLE'
        )
FROM    tPieceTable  
WHERE   tPieceTable.BatchNo = @BatchNo
        AND tPieceTable.PieceNo = @PieceNo 
```

# jquery - jQuery 的多重选择器 + find() vs children()

> ID：13686415
> 
> 赞同：2
> 
> 时间：2012-12-03T15:30:24.633
> 
> 标签：jquery, jquery-selectors, find, children

```
<select id="select1">
    <option value="11">11</option>
    <option value="12">12</option>
</select>

<select id="select2">
    <option value="21">21</option>
    <option value="22">22</option>
</select>​ 
```

的行为`find()`和`children()`方法：

**`find()`**：

```
$('#select1, #select2').find('option:not(:first)').remove();​​​​​​ 
```

按预期工作：`select1`只有选项`11`并且`select2`只有选项`21`

**`children()`**：

```
$('#select1, #select2').children('option:not(:first)').remove(); 
```

奇怪的工作：`select1`只有选择`11`，但`select2`没有选择了......

**为什么？**

[演示](http://jsfiddle.net/tyZzy/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:35:50.213

我无法解释为什么`.find`使用`:first`，但`.children`无法使用，`:first`因为`:first`获取选定元素集中的第一个选定元素，而不是第一个子元素。你想要的是`:first-child`.

```
// children
$('#select1, #select2').children('option:not(:first-child)').remove();

// find
$('#select3, #select4').find('option:not(:first-child)').remove();​ 
```

演示：http: [//jsfiddle.net/tyZzy/2/](http://jsfiddle.net/tyZzy/2/)

这可能是一个错误，尽管它需要更多的研究。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:47:15.590

从我看到的

```
$('#select1, #select2').find('option:not(:first)') 
```

等于

```
$('#select1  option:not(:first), #select2  option:not(:first)') 
```

不是

```
$('#select1, #select2').children('option:not(:first)') 
```

考虑上下文选择器，因为它与使用 .find() 相同

```
$('option:not(:first)',$('#select1, #select2')) 
```

通过将 children 与 first.. 一起使用，您只会在 collection.. 中返回第一个 children 选项，而 context/find 选择器在每个上下文中查找第一个

# qt - Qt - 调用将自定义指针作为参数的插槽

> ID：13686418
> 
> 赞同：4
> 
> 时间：2012-12-03T15:30:36.253
> 
> 标签：qt, invoke, reinterpret-cast, metaobject

我试图破解 Qt 的信号和槽，我遇到了一个问题，即 QMetaType::invokeMethod 不能正确地将指针参数传递给被调用的槽。

```
call(QObject *receiver, const char *slot, const QList<QGenericArgument> &args)
{
    const QMetaObject *meta = receiver->metaObject();
    bool success = meta->invokeMethod(receiver, slot, 
            args.value(0, QGenericArgument()),
            args.value(1, QGenericArgument()),
            args.value(2, QGenericArgument()),
            ...
            args.value(9, QGenericArgument()));
} 
```

然后我这样称呼它：

```
MyReceiver *receiver;
MyObject *myObject;

call(receiver, "mySlot", QList<QGenericArgument>() << Q_ARG(MyObject *, myObject)); 
```

哪里`class MyObject : public QObject { ... }`。我也这样`Q_DECLARE_METATYPE(MyObject *)`做`qRegisterMetaType<MyObject *>("MyObject *")`

`0`发生的情况是接收器上的插槽正在被调用，但是无论我传递给`call(...)`as什么，参数的值总是`Q_ARG`

出于好奇，我查看了接收器自动生成的 MOC 文件，发现插槽是使用以下代码调用的：

```
void MyReceiver::qt_static_metacall(QObject *_o, QMetaObject::Call _c, int _id, void **_a)
{
    if (_c == QMetaObject::InvokeMetaMethod) {
        Q_ASSERT(staticMetaObject.cast(_o));
        MyReceiver *_t = static_cast<MyReceiver *>(_o);
        switch (_id) {
        case 0: _t->mySlot((*reinterpret_cast< MyObject*(*)>(_a[1]))); break;
        default: ;
        }
    }
} 
```

结果表明 的值`_a[1]`具有 的正确地址`MyObject *`。但`reinterpret_cast`它变成了`0`.

现在我有以下问题：

1) 如何以编程方式调用插槽并确保指针参数正确传递给插槽？2) 这是什么`*reinterpret_cast< MyObject*(*)>(_a[1])`意思？额外的括号是什么`(*)`意思，以及如何解释这段代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:18:50.413

好的，我想我知道为什么它不工作了...... Q_ARG 只会创建一个指向我的指针的指针并存储前者。我没有提到该`call`函数是`Task`稍后调用插槽的调用的一部分 - 当包装到 Q_ARG 中的值已经超出范围时。基本上 Q_ARG 只维护对参数对象的弱引用。

# javascript - jQuery 允许单击但不允许双击

> ID：13686419
> 
> 赞同：5
> 
> 时间：2012-12-03T15:30:48.373
> 
> 标签：javascript, jquery

我最初希望在单击事件上进行提交：

```
 $("#booking_Form #submit_Booking").bind("click", function(event){..... 
```

然后我发现（显然）双击导致重复提交。

所以我尝试通过以下方式捕获和抑制它：

```
 $("#booking_Form #submit_Booking").bind("dblclick", function(event){
          return false;
    }); 
```

但是单击事件仍然触发了两次。

我是否更正它认为如果双击不提交两次是必须的，我必须将单击事件更改为双击事件。

还是有一些全局方法可以关闭双击。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T15:44:29.637

你应该使用`.one()`. 这样所有后续点击都不会执行任何操作

```
$("#booking_Form #submit_Booking").one("click", function(event) {
    //do something
}); 
```

链接：[http ://api.jquery.com/one/](http://api.jquery.com/one/)

编辑：如果你想使用`.one()`，如何做这样的事情......

JAVASCRIPT：

```
$(document).ready(function(){
     $("#b1").one("click", function(e){
        ajaxFunction();
     });   

    function ajaxFunction(){
         $("#b1").one("click", function(e){
             ajaxFunction()
         });

        $.ajax({
            type: "POST",
            url: "http://fiddle.jshell.net/", //use actual URL
            success: function(data){
               //do something    
            }
        });           
    }
});​ 
```

演示：http: [//jsfiddle.net/BKqm9/13/](http://jsfiddle.net/BKqm9/13/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T15:34:46.950

只需在单击处理程序中禁用您的输入，这样用户就不能再次单击，当您完成单击处理程序中的逻辑时，您将再次启用它。因此，您可以执行以下操作：

```
$("#booking_Form #submit_Booking").bind("click", function(event){
   $(this).attr('disabled','true');
   ...
   ...
   var btn = $(this);
   $.ajax('someurl.php',{success: function(){
          ...
          ...
          btn.removeAttr('disabled');
    }
   })
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T15:54:39.017

您可以将其包装在闭包中并使用脏标志变量。（关闭所以标志不是全局的）

```
(function(){
    var dirtyFlag = false;
    $('#clicker').click(function(){
        if (dirtyFlag) return;
        dirtyFlag = true;
        setTimeout(function(){
            console.log('clean and proceeding');
            dirtyFlag = false;
        }, 500);
    });
})();​ 
```

[在这里](http://jsfiddle.net/wZPVQ/)拉小提琴。由于禁用按钮不是一个选项，这是 IMO 最干净和最简单的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T15:46:21.113

如果你想要排队方法，试试这样的：（只是一个模型）

```
$('<div>').clearQueue('buttonQueue');

$("#booking_Form #submit_Booking").bind("click", function(event) {
    $('<div>').clearQueue('buttonQueue');
    $('<div>').queue('buttonQueue', myFunctionHere());
}); 
```

把它放在 DocumentReady 函数中应该没问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T15:55:02.663

这可能会有所帮助：

```
$("#booking_Form #submit_Booking").bind("click", function(e) {

    // custom handling here
    e.preventDefault();
    e.stopPropagation();
}​ 
```

试试看。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-14T04:22:54.803

在执行逻辑之前，您可以在单击后禁用按钮，在执行代码后，您可以启用按钮单击事件。这很简单-

```
$("#saveOrder").attr("disabled", true); 
```

你的逻辑在这里

```
$("#saveOrder").attr("disabled", false); 
```

# c# - C#中非托管对象的最大大小

> ID：13686424
> 
> 赞同：2
> 
> 时间：2012-12-03T15:31:05.480
> 
> 标签：c#, .net

快速提问：C# 可以处理的非托管对象的最大大小是多少？我想我可能通过调用 C++ dll 找到了解决 64 位数组问题的方法，但我想确定一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:38:22.837

最后，这是有限的，`VirtualAlloc`这取决于您如何使用内存以及您正在运行的操作系统。通过 C#/.NET 访问它并没有真正改变这一点。Windows Internals 这本书有[一个 Testlimit[64] 应用程序来探索这些限制](http://blogs.technet.com/b/markrussinovich/archive/2008/11/17/3155406.aspx)。阅读链接的帖子并试用该应用程序以获得完整的答案。

# javascript - Backbone.js 扩展函数有什么作用？

> ID：13686425
> 
> 赞同：3
> 
> 时间：2012-12-03T15:31:06.617
> 
> 标签：javascript, backbone.js

我知道它提供静态或“类”属性，但我想了解它是如何做到这一点的，它是创建一个新对象并将这些静态属性放在原型上吗？

Backbone.View.extend（属性，[classProperties]）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:38:14.973

使用的主干和称为的内部辅助函数`inherits`。[您可以在此处](http://documentcloud.github.com/backbone/docs/backbone.html#section-176)查看带注释的源代码。它设置原型链以提供类类功能。

# javascript - 如何通过javascript将客户端中dropDownList的值传递给webmethod

> ID：13686426
> 
> 赞同：4
> 
> 时间：2012-12-03T15:31:07.623
> 
> 标签：javascript, asp.net, webmethod

我的客户端有一个文本框和一个下拉列表。我需要使用 javascript 将这些控件的值传递给 webmethod（在后面的代码中）。我可以传递文本框值，但不能传递下拉列表。

```
<p><asp:DropDownList id="ddlList" runat="server"></asp:DropDownList></p>
<p><asp:TextBox ID="txtSearch" runat="server"  OnTextChanged="txtSearch_TextChanged"    OnKeyPress="onKeyFunction();" AutoPostBack="True"></asp:TextBox>
<asp:GridView ID="grdLista" runat="server"></asp:GridView>

<script type="text/javascript">
    function onKeyFunction() {
        var search = document.getElementById('<%=txtSearch.ClientID %>').value;
        //var ddl = i need to pass the dropdownlist values here..
        PageMethods.callJS(search, /*ddl */, onSucess, onError);

        function onSucess(result) {
            alert(result);
        }

        function onError(result) {
            alert('Something wrong.');
        }
    }
</script> 
```

这是我的 WebMethod 中的代码

```
[WebMethod]            
public static IEnumerable<string> callJS(string search)
{
    IEnumerable<string> results = itemList.Where(item => item.Contains(search.ToLower()));
    return (results);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:02:51.743

您可以像这样获取 DDL 的值：

```
var liste =  document.getElementById('#ddlList');
var ddl = liste.options[liste.selectedIndex].value; 
```

* * *

**编辑 ：**

为了从 DDL 中检索所有值，我们必须遍历选项值：

```
var ddl = [];
for(var i = 0; i<3; i++) {
    ddl.push(document.getElementById("<%=ddlList.ClientID %>").options[i].value);
} 
```

这个数组可以在服务器端作为`List<string>`：

```
[WebMethod()]
public static IEnumerable<string> callJS(List<string> ddl) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:06:29.553

不清楚在 page 方法中何处使用了 ddl 值。也许你还没有写那部分。作为建议，您可以将所有值作为逗号分隔的字符串传递。或作为一个数组。

使用 Jquery 可以这样取值：

```
function getDropDownList() {
        var $ddl = $('#' + 'ctl00_ContentPlaceHolder1_ddlList');
        var $array = []
        $ddl.children('option').each(function () {
            $array.push($(this)[0].value);

        })
        //return $array you can return the value here as an array;
 //return $array.join(',') or as a string;

        try {
            PageMethods.callJS(search,$array, success, failure);
        }
        catch (e) {
            alert('error');
        }

} 
```

页面方法签名将需要更改。

```
[WebMethod]            
public static IEnumerable<string> callJS(string search, string[] ddlList)
    {

        IEnumerable<string> results = itemList.Where(item => item.Contains(search.ToLower()));
        return (results);
    } 
```

希望这可以帮助。

# ios - 当我为 UIImageView 设置动画时，UITapGestureRecognizer 不起作用

> ID：13686429
> 
> 赞同：10
> 
> 时间：2012-12-03T15:31:22.313
> 
> 标签：ios, animation, gesture, uitapgesturerecognizer

当我想为 制作动画时`UIImageView`，`UITapGestureRecognizer`添加到它的内容不起作用。为什么？？？

```
-(void) testTap:(id)sender {
    NSLog(@"Test tap...");
}

-(void) testSlide {
    UITapGestureRecognizer* testTap = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(testTap:)] autorelease];
    testTap.numberOfTapsRequired = 2;

    UIImageView* imageView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tip_slide"]] autorelease];
    [imageView setFrame:CGRectMake(40, 40, 200, 200)];
    imageView.userInteractionEnabled = YES;
    imageView.multipleTouchEnabled = YES;
    [imageView addGestureRecognizer:testTap];

    [self.view addSubview:imageView];

    // When I add the following code, the UITapGestureRecognizer will not work. WHY???
    imageView.alpha = 0;
    CGAffineTransform t = imageView.transform;
    if (CGAffineTransformIsIdentity(t)) {
        UIViewAnimationOptions options = UIViewAnimationCurveEaseInOut;
        [UIView animateWithDuration:1.0 delay:0 options:options animations:^{
            imageView.alpha = 1.0;
        } completion:^(BOOL finished) {
            if (finished) {
                [UIView animateWithDuration:1.0 delay:2.0 options:options animations:^{
                imageView.alpha = 0.4;
                } completion:^(BOOL finished) {
                    if (finished) {
                        [imageView removeFromSuperview];
                    }
                }];
            }
        }];
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-03T15:54:43.930

您需要在动画期间允许用户交互。

```
UIViewAnimationOptions options = UIViewAnimationCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-22T23:19:56.117

只是为 Swift 添加这个......这样的东西会很好用......使用**.AllowUserInteraction**。

```
UIView.animateWithDuration(0.4, delay: 1.5, usingSpringWithDamping: 0.5, initialSpringVelocity: 20, options: UIViewAnimationOptions.AllowUserInteraction, animations:
                {self.frame = originalFrame}, completion: nil) 
```

# jquery - fancybox 2 iframe 大小不变

> ID：13686431
> 
> 赞同：1
> 
> 时间：2012-12-03T15:31:24.393
> 
> 标签：jquery, iframe, fancybox

我正在使用 fancybox 打开外部网址。我厌倦了fancybox-html class a href的这段代码：

```
$(document).ready(function() {  
    $(".fancybox-html").fancybox({
    fitToView   : false,
    width       : '90%',
    height      : '90%',
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none'
    });
}); 
```

HTML：

```
 <script type="text/javascript" src="http://localhost:8000/media/js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="http://localhost:8000/media/js/jquery.pageslide.min.js"></script>

    <script type="text/javascript" src="http://localhost:8000/media/js/autocomplete.js"></script>
    <!-- <script type="text/javascript" src="http://localhost:8000/media/js/overlay.js"></script> -->

    <!-- FancyBox -->
    <link href="http://localhost:8000/media/fancybox/jquery.fancybox.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://localhost:8000/media/fancybox/jquery.fancybox.pack.js"></script>
    <script type="text/javascript" src="http://localhost:8000/media/fancybox/jquery.easing-1.3.pack.js"></script>
    <script type="text/javascript" src="http://localhost:8000/media/fancybox/jquery.mousewheel-3.0.6.pack.js"></script> 
```

这不起作用，iframe 以不同的尺寸打开，就像它忽略了我的设置一样。可以调试吗？

也许我错过了一些图书馆。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:34:39.260

首先你必须下载最后一个fancybox才能确定。然后将 js 和 css 包含到您的页面中，如果是 iframe，请尝试使用此代码。如果不起作用，请发布您的 html，看看您是否有错误

```
 $(".fancybox-html").fancybox({ 
width    : '75%', 
height   : '75%', 
autoSize    : false, 
closeClick  : false, 
fitToView   : false, 
openEffect  : 'none', 
closeEffect : 'none', 
type : 'iframe' 
});

<a href="yourpage.php" class="fancybox-html">test test</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T17:45:05.653

尝试这个：

```
$(document).ready(function() {  
    $(".fancybox-html").fancybox({
    fitToView   : false,
    frameWidth  : '90%',
    frameHeight : '90%',
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none'
    });
}); 
```

# c# - .NET 中数组的泛型函数

> ID：13686432
> 
> 赞同：1
> 
> 时间：2012-12-03T15:31:26.023
> 
> 标签：c#, .net, arrays

我经常在 C# 中定期使用 int/float 数组和其他东西，因为它们比 List 更快（也许？）。目前我已经为每种类型实现了几十个函数：

```
/// <summary>
/// Checks if the array contains the given value.
/// </summary>
public static bool contains(int[] values, int value) {
    for (int s = 0, sl = values.Length; s < sl; s++) {
        if (values[s] == value) {
            return true;
        }
    }
    return false;
}
/// <summary>
/// Checks if the array contains the given value.
/// </summary>
public static bool contains(float[] values, float value) {
    for (int s = 0, sl = values.Length; s < sl; s++) {
        if (values[s] == value) {
            return true;
        }
    }
    return false;
} 
```

有没有办法以通用的方式实现这些？或者只有当我使用时才有可能`List<T>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:37:43.043

该`System.Array`类型有一个令人眼花缭乱的静态方法数组，可以帮助您搜索、排列、排序等您的数组。你绝对不需要自己动手。这些静态方法（如`Find`, `FindAll`）也接受泛型参数。这是在 PowerShell 的帮助下转储的列表：

```
Name                           Definition                    
----                           ----------                    
AsReadOnly                     static System.Collections.... 
BinarySearch                   static int BinarySearch(ar... 
Clear                          static void Clear(array ar... 
ConstrainedCopy                static void ConstrainedCop... 
ConvertAll                     static TOutput[] ConvertAl... 
Copy                           static void Copy(array sou... 
CreateInstance                 static array CreateInstanc... 
Equals                         static bool Equals(System.... 
Exists                         static bool Exists[T](T[] ... 
Find                           static T Find[T](T[] array... 
FindAll                        static T[] FindAll[T](T[] ... 
FindIndex                      static int FindIndex[T](T[... 
FindLast                       static T FindLast[T](T[] a... 
FindLastIndex                  static int FindLastIndex[T... 
ForEach                        static void ForEach[T](T[]... 
IndexOf                        static int IndexOf(array a... 
LastIndexOf                    static int LastIndexOf(arr... 
ReferenceEquals                static bool ReferenceEqual... 
Resize                         static void Resize[T]([ref... 
Reverse                        static void Reverse(array ... 
Sort                           static void Sort(array arr... 
TrueForAll                     static bool TrueForAll[T](... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:33:27.920

**感谢@Servy 的更正：**

```
/// <summary>
/// Checks if the array contains the given value.
/// </summary>
public static bool Contains<T>(T[] values, T value) {
    for (int s = 0, sl = values.Length; s < sl; s++) {
        if (object.Equals(values[s].value)) {
            return true;
        }
    }
    return false;
} 
```

对于这种事情，你也可以使用 Linq ：

```
using System.Linq;
...
var myArray = new float[12];
...
if(myArray.Any(a => a == 2.4)) 
```

# c# - 获取数据库列表取决于选择的服务器

> ID：13686433
> 
> 赞同：6
> 
> 时间：2012-12-03T15:31:34.933
> 
> 标签：c#, database, sql-server-2008

我正在使用带有框架 4.0 和 SQL Server 2008 R2 的 C#。我已经用这段代码列出了 SQL Server 2008：

```
 public static string[] GetSQLServerList()
        {
            SqlDataSourceEnumerator dse = SqlDataSourceEnumerator.Instance;
            DataTable dt = dse.GetDataSources();
            if (dt.Rows.Count == 0)
            {
                return null;
            }

            string[] SQLServers = new string[dt.Rows.Count];
            int f = -1;
            foreach (DataRow r in dt.Rows)
            {
                string SQLServer = r["ServerName"].ToString();
                string Instance = r["InstanceName"].ToString();
                if (Instance != null && !string.IsNullOrEmpty(Instance))
                {
                    SQLServer += "\\" + Instance;
                }
                SQLServers[System.Math.Max(System.Threading.Interlocked.Increment(ref f), f - 1)] = SQLServer;
            }
            Array.Sort(SQLServers);
            return SQLServers;
        } 
```

我在 ComboBox 上列出了我的服务器。

如何列出数据库，取决于我在 ComboBox 中选择的服务器？

我找到了这个[教程](http://4rapiddev.com/csharp/c-get-list-of-databases-in-sql-server/)，但是它需要`sqlconnection`，我没有选择服务器时如何连接？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T15:36:38.343

这是您获取网络上服务器名称列表的方式：

```
List<String> ServerNames = new List<String>();

 SqlDataSourceEnumerator servers = SqlDataSourceEnumerator.Instance;
 DataTable serversTable = servers.GetDataSources();

     foreach (DataRow row in serversTable.Rows) {
            string serverName = row[0].ToString();

             try {

                if (row[1].ToString() != "") {

                            serverName += "\\" + row[1].ToString();

                }

              }
              catch {

              }

              ServerNames.Add(serverName);
      } 
```

从选定服务器获取数据库列表：

```
List<String> databases = new List<String>();

SqlConnectionStringBuilder connection = new SqlConnectionStringBuilder();

 connection.DataSource = SelectedServer;
 // enter credentials if you want
 //connection.UserID = //get username;
// connection.Password = //get password;
 connection.IntegratedSecurity = true;

 String strConn = connection.ToString();

 //create connection
  SqlConnection sqlConn = new SqlConnection(strConn);

//open connection
sqlConn.Open();

 //get databases
DataTable tblDatabases = sqlConn.GetSchema("Databases");

//close connection
sqlConn.Close();

//add to list
foreach (DataRow row in tblDatabases.Rows) {
      String strDatabaseName = row["database_name"].ToString();

       databases.Add(strDatabaseName);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T13:55:48.813

```
 using (var connection = new System.Data.SqlClient.SqlConnection("ConnectionString"))
    {
        connection.Open();
        var command = new System.Data.SqlClient.SqlCommand();
        command.Connection = connection;
        command.CommandType = CommandType.Text;
        command.CommandText = "SELECT name FROM master.sys.databases";

        var adapter = new System.Data.SqlClient.SqlDataAdapter(command);
        var dataset = new DataSet();
        adapter.Fill(dataset);
        DataTable dtDatabases = dataset.Tables[0];
    } 
```

# iphone - 将图像添加到 iphone 中的图像属性后，按钮文本不可见

> ID：13686439
> 
> 赞同：1
> 
> 时间：2012-12-03T15:31:48.490
> 
> 标签：iphone, ios, xcode, uibutton, background-image

我有一个按钮。我在它的图像属性和背景图像属性中添加了一个图像。现在它只显示添加图像的按钮，看不到按钮文本。这是什么原因。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:42:35.437

设置背景图像很好，但是当您设置 button.image 属性时，它会覆盖在按钮的文本字段上，因此如果您打算使用按钮文本，则不希望将图像添加到该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:37:22.077

您必须使用 的`EdgeInset`属性`UIButton`才能正确对齐按钮的内容（为图像命名）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:36:41.270

的使用`setBackgroundImage:forState:`方法`UIButton`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:40:33.197

![在此处输入图像描述](../Images/7828fec7779424ed0ced09370bcb8eb8.png)如果您想稍后添加标题或使用带有文本的图像，则必须将图像添加到背景。如果您通过笔尖进行，请将图像放在图像下方的背景图像中

# jquery - 应用样式时的初始过渡

> ID：13686440
> 
> 赞同：0
> 
> 时间：2012-12-03T15:31:50.673
> 
> 标签：jquery, jquery-mobile, knockout.js

在进行 AJAX 调用后，我正在使用带有 KnockoutJS 添加的一些动态内容的 jQuery Mobile。这导致了各种问题，因为 jQuery mobile 在绑定有机会启动之前应用了它的样式并转换了 HTML。我尝试了几种不同的方法来处理这个问题，但似乎 jQuery mobile 文档中没有很好地记录它.

现在，我在 AJAX 调用完成后尝试这样做：

```
ko.applyBindings(ws);
$.getScript("Scripts/jquery.mobile-1.2.0.min.js", function () {
    $("#index").fadeIn();
}); 
```

我对所有页面进行了设置，以便在应用模板（by ）和应用 jQuery mobile`display:none`之前它们不可见。`applyBindings`这是有效的，除非它完成时，内容会相当刺耳地弹出。有没有办法使这种过渡变得平滑？显然 jQuery mobile 自动使第一页可见，因为 my`fadeIn`没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:52:16.030

应用更改后尝试刷新 jquery 移动小部件。

```
$("#myddl").selectmenu("refresh"); 
```

或者

```
$("#mylistview).listview("refresh"); 
```

大多数 jquery 移动增强控件都存在类似的方法。

# function - Powerbuilder 12.5 - DataWindows 上的函数

> ID：13686441
> 
> 赞同：1
> 
> 时间：2012-12-03T15:31:51.657
> 
> 标签：function, global, powerbuilder, datawindow

我注意到 PB12 和 PB12.5（均已修补）之间的行为发生了变化。我很少有带有全局函数的数据窗口。在以前的 PB 版本中，这些函数仅在数据窗口获得焦点（getfocus 事件）时才被触发——这非常适合应用程序。

这些函数现在似乎一直被触发（它似乎是在 mousemove 事件上——但我不能确定）。

有没有其他人注意到相同的 - 有什么解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T19:56:56.753

实际上，我注意到恰恰相反：他们总是比 GetFocus 更频繁地开火。鉴于表达式可以包含 FirstOnPage 和 LastOnPage 之类的值，他们必须这样做。

Powersoft/Sybase/SAP 的建议一直是在表达式中谨慎使用全局函数，因为它们**经常**触发。（我清楚地记得在圣地亚哥/科罗纳多的第一次 PowerBuilder 会议上听到过这个建议，这将使该建议接近 PB3 的发布日期。）如果 PB12 只在 GetFocus 上触发，那可能是一个非常特定于版本的错误，因为它会破坏许多应用程序，因此它会很快得到修复。

祝你好运，

特里。

# c# - ExifLib 无法从 NuGet 安装

> ID：13686443
> 
> 赞同：0
> 
> 时间：2012-12-03T15:32:00.143
> 
> 标签：c#, windows-phone-7, visual-studio-2012, exiflib

我只想在 Windows Phone 7.1 项目中使用 ExifLib.dll。我尝试从 NuGet 安装包，但出现兼容性错误：

> 无法安装包“ExifLib 1.3.0.0”。您正在尝试将此包安装到以“Silverlight,Version=v4.0,Profile=WindowsPhone71”为目标的项目中，但该包不包含任何与该框架兼容的程序集引用或内容文件。有关详细信息，请联系包作者。

我正在使用 Visual Studio 2012。为什么会这样？是否有任何兼容性问题，如果是，如何解决？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:04:17.983

[ExifLib](http://www.codeproject.com/KB/graphics/exiflib.aspx)刚刚更新到 1.4 版，它现在可以与 Windows Phone 一起使用 - 您需要使用新的构造函数重载，它需要一个`Stream`.

[NuGet](http://www.nuget.org/packages/exiflib)包也已更新为包含与 Windows Phone 兼容的 DLL 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:59:37.430

Common ExifLib 与 Windows Phone 不兼容。但是你可以阅读这篇[文章](http://igrali.com/2011/11/01/reading-and-displaying-exif-photo-data-on-windows-phone/) 并尝试 Tim Heuer 的这个[库](http://storage2.timheuer.com/WindowsPhoneApplication63.zip)。

# android - 如何在 Android 的 opengl es 2 中将 mat4 数组传递给着色器？

> ID：13686448
> 
> 赞同：2
> 
> 时间：2012-12-03T15:32:14.113
> 
> 标签：android, opengl-es, vbo

嗨，这是我在这里的第一篇文章 :) 我在 Android 2.3 OpenGL ES 2 2D 游戏引擎上工作。我尝试通过构建一个大的 VBO 而不是一个一个地绘制精灵来提高性能。我使用批处理一次绘制 32 个精灵。

这是我的顶点着色器定义：

```
uniform mat4 mvpMatrix[32]; 
```

当我使用客户端内存时

```
for (int k = 0; k < m; k++)
    mvpBuffor.put(models[k], 0, models[k].length);
mvpBuffor.position(0);
GLES20.glUniformMatrix4fv(mMVPMatrixHandle, m, false, mvpBuffor);
GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, m * VERTEX_PER_SPRITE); 
```

这很好用，但是当我尝试使用 VBO

```
GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, batch.mvpBufferIndex);
GLES20.glEnableVertexAttribArray(mMVPMatrixHandle);
GLES20.glVertexAttribPointer(mMVPMatrixHandle, MVP_SIZE * BATCHSIZE, GLES20.GL_FLOAT, false, 0, 0); 
```

我收到错误代码 1281

任何人都知道如何将 mat4 统一数组传递给顶点着色器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:49:35.947

如果您阅读此[页面](http://www.khronos.org/opengles/sdk/docs/man)，它应该类似于：

```
GLES20.glUniformMatrix4fv(<handle>, <number of matrices>, <transposed?>, <array of matrices>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-29T17:33:55.703

出于某种原因，在手机上的 GLES 中，统一数组被破坏了 [https://www.opengl.org/discussion_boards/showthread.php/176674-Uniform-arrays-in-OpenGLES](https://www.opengl.org/discussion_boards/showthread.php/176674-Uniform-arrays-in-OpenGLES)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-30T07:33:44.083

看起来您的着色器仍在将 mvpMatrix 声明为统一

统一 mat4 mvpMatrix[32]；

但是您试图将其作为属性传递：

GLES20.glEnableVertexAttribArray(mMVPMatrixHandle); GLES20.glVertexAttribPointer(mMVPMatrixHandle, MVP_SIZE * BATCHSIZE, GLES20.GL_FLOAT, false, 0, 0);

# database-design - 从 1NF 到 3NF 的逐步归一化

> ID：13686454
> 
> 赞同：0
> 
> 时间：2012-12-03T15:32:36.777
> 
> 标签：database-design, normalization

我正在尝试使这种关系正常化：

```
film_year  film_name  critic_id critic_name cinemas_debut           score
     2004  I robot          111        John  NY_cinema, LA_cinema       4 
     2004  I robot          222     Mathiew  NY_cinema, LA_cinema       5 
```

在哪里 ...

*   film_year 和 film_name 标识电影。
*   Cinemas_debut 是一个多值属性。
*   批评者 ID -> 批评者姓名
*   电影年、电影名、影评人 ID -> 得分

我无法转换与 3FN 的关系。这是我尝试过的：

*   步骤1

到 1NF：没有重复的元素或元素组：

```
film_year  film_name  critic_id critic_name cinemas_debut           score
     2004  I robot          111        John  NY_cinema                  4 
     2004  I robot          222     Mathiew  LA_cinema                  5
     2004  I robot          111        John  NY_cinema                  4 
     2004  I robot          222     Mathiew  LA_cinema                  5 
```

*   第2步

到 2NF：对连接键没有部分依赖：我把它当作 PK `film_year, film_name, critic_id, cinemas_debut`。然后`critic_name`和`score`ara 部分依赖项，我将这些属性与其行列式的副本脱离关系：

```
 critics ( critic_id (pk), critic_name )
 reviews(film_year (pk), film_name (pk), critic_id (pk), score) 
```

但我不知道如何处理结果关系：

```
film_year  film_name  critic_id cinemas_debut          
     2004  I robot          111    NY_cinema                   
     2004  I robot          222    LA_cinema                  
     2004  I robot          111    NY_cinema                   
     2004  I robot          222    LA_cinema 
```

目前我不知道如何对这个结果关系应用归一化。我正在寻找的是**逐步规范化**。我不需要最终结果。我不想学习规范化规则，因为我需要一步一步的表格规范化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:39:44.790

这将是您的 3NF，但是我没有测试约束。

```
电影（名称，年份）
PK >（姓名、年份）

评论家（身份证，姓名）
PK > 身份证

film_critic (film_name, film_year,critic_id, score)
PK > (film_name, film_year,critic_id)
FK > (film_name, film_year) &critic_id

电影院（名称）
PK > 名称

film_cinema（电影名称、电影年份、电影名称）
PK >（电影名称、电影年份、电影名称）
FK > (film_name, film_year) & 电影名称
```

使用代理键而不是引用电影名称和年份（对于电影也是如此）会更容易。

```
电影（身份证、姓名、年份）
PK > 身份证

评论家（身份证，姓名）
PK > 身份证

film_critic (film_id,critic_id, score)
PK > (film_id, critic_id)
FK > film_id & critic_id

cinema (id, name)
PK > id

film_cinema (film_id, cinema_id)
PK > (film_id, cinema_id)
FK > film_id & cinema_id

```

# python - 在python中读取一维文本文件并将其排序为多维数组

> ID：13686459
> 
> 赞同：0
> 
> 时间：2012-12-03T15:32:54.500
> 
> 标签：python, multidimensional-array, readlines

我正在尝试读取一个大型数据文件并将其转换为我的其他脚本可以更好地处理的格式。

每个数据文件都有一系列标题，后跟两列引用相关数据点。然后是另一系列标题（在同一列中）和下一组相关数据点。例如：

![数据文件示例](../Images/95d11449e2db84e03cb8ef0d8c12e1ca.png)

我需要对这些行进行排序并将它们写入由多列组成的文件。所以每组数据的第一列是相同的（频率），所以我想要得到的应该如下所示：

![排序数据集](../Images/d3737cc2dbebe307b7cfb4bd5eb0243a.png)

我是 python 新手，还必须找到任何甚至一半成功的方法来管理它。我尝试了一个基本的 if 语句：

```
def LoadData(filename):

Datafile = open(filename,'r')

# Define empty lists to read the values into
a1 = []
data=Datafile.readlines()

index = 1   
for line in range(14,len(data)):
    w=data[line].split()
    if type(w[0]) == float:
        a1.append(w[index])
    if re.findall(r'[\w.]THz', w[0]):
        index = index +1

return a1 
```

但是由于我无法将列表定义为多维的，所以我不知道如何才能将下一组数据值分配给另一列。定义一个 numpy 数组也对我没有帮助，因为我需要知道确切的尺寸才能开始。

我确信必须有一个相对直接的方法来做到这一点，但我没有找到它。我会很感激任何帮助！

这是按照评论中的要求使用记事本打开的数据： ![记事本版本的数据](../Images/10e7e27410ef6ca64ba4b99eac2e6e67.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:04:35.643

虽然我（还）没有使用过它，但 pandas 看起来对于您的用例来说将是一个很好的工具。检查数据框数据结构[http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)

和 IO 工具 [http://pandas.pydata.org/pandas-docs/stable/io.html](http://pandas.pydata.org/pandas-docs/stable/io.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:04:32.397

您可以在列表中使用列表来模拟您想要的二维结构：

```
arr= []
arr.append(['R1C1', 'R1C2', 'R1C3'])
arr.append(['R2C1', 'R2C2', 'R2C3'])
arr.append(['R3C1', 'R3C2', 'R3C3', 'R3C4'])
# each list can have as many elements as required
print(arr[-1][1]) # last row, second column 
```

如果您的算法需要稀疏数组和对元素的即时访问，您可以使用带有元组的字典作为索引：

```
arr= {}
arr[1,2]= 'R1C2'
arr[10,5]= 'R10C5'
print(arr[1,2]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:14:22.633

我并不完全清楚您的示例中的数字如何连接到您要创建的结果表，但这里有一个函数将读取制表符分隔的文件并将其转换为二维数组，其中每个字段代表一个float 被转换为 Python 浮点数，其余的仍然是字符串。

```
def load_data(filename):
    data = []
    with open(filename) as f:
        for line in f:
            fields = []
            for field in line.strip().split("\t"):
                try:
                    fields.append(float(field))
                except Exception, e:
                    fields.append(field)
            data.append(fields)
    return data 
```

例子：

```
8.57    0.21
8.58    0.22
8.59    0.23

Curvelabel    = Balance [ 1 (6) ]
Filename      = bil

8.57    0.21
8.58    0.22
8.59    0.23 
```

输出：

```
[[8.57, 0.21], [8.58, 0.22], [8.59, 0.23],
[''],
['Curvelabel    = Balance [ 1 (6) ]'],
['Filename      = bil'],
[''],
[8.57, 0.21], [8.58, 0.22], [8.59, 0.23]] 
```

# php - Apache和PHP导致服务器超时

> ID：13686461
> 
> 赞同：1
> 
> 时间：2012-12-03T15:33:00.380
> 
> 标签：php, apache, apache2, timeout

如果我在一个脚本中使用代码，例如：

```
ignore_user_abort(1);
sleep(30); 
```

然后我关闭页面，客户端在服务器的任何页面上停留 30 秒。我尝试在 apache2.conf 中放置“超时 5”以关闭客户端的连接，但什么也没有……

*   我在页面中输入：www.example.com/timeout.php（使用代码 sleep(30) ）
*   关闭页面
*   在页面中输入：www.example.com/somebody.php（内容只是一个“Hello, World”）
*   保持加载页面......页面加载 30 秒。

有人可以帮忙吗？感谢。

# java - java控制台应用程序的良好部署目录结构是什么

> ID：13686463
> 
> 赞同：6
> 
> 时间：2012-12-03T15:33:15.660
> 
> 标签：java, unix

我有一个 Java 控制台应用程序，准备部署到 Unix 服务器上。我正在编写一个 shell 脚本来运行该应用程序。

我计划将我的 shell 脚本放在一个文件夹中，将我的应用程序 jar 和依赖 jar（spring 等）放在另一个文件夹中，并将属性文件（那些需要“实时”维护的文件）再次放在一个单独的文件夹中。然后我会让我的 shell 脚本遍历 'jars' 和 'properties' 文件夹中的文件，将它们附加到类路径中，最后调用 java ...

这是一个“好的”部署结构吗？是否有关于如何安排文件以最大限度地提高可维护性和稳定性的指南？是否有最好避免的明显“错误”方法来做到这一点？

我应该补充一点，对于以前的项目，我将所有 shell 脚本（启动 java 进程的那些和不启动 java 进程的那些）放入脚本文件夹中，我的应用程序 jar 放入一个文件夹中，其中库 jar 在库子文件夹和外部资源中进入配置子文件夹。然后我编写了一个显式加载所有文件的脚本。每当我升级库 jar 时，它写起来很冗长，并且需要维护。这一次，我想做得更好。此外，感觉没有必要将我的应用程序 JAR 与库分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:39:59.327

对于它的价值，这就是我们使用的；

```
/
    /class
        //package hierarchy here, raw .class files
    /lib
        //library jars here, apache commons, gson etc, all .jars
    /conf
        //.properties files go here, including ones for libraries
    /doc
        //program documentation files, typically .txt
        /javadocs
            //java doc html root
    /sh
        //shell scripts including execute.sh and compile.sh 
```

我们`ant`用于构建，`src`如果需要，通常有一个用于源树的文件夹。这样，您只需将`/class`和添加`/lib`到您的类路径中，并且永远不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T18:33:35.807

适合您的案例的良好结构称为 uberJar 或 oneJar，可以使用许多实用程序制作，只需 google 即可。我也可以推荐这样一段不错的代码，例如[http://www.jdotsoft.com/JarClassLoader.php](http://www.jdotsoft.com/JarClassLoader.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T18:41:43.500

坦率地说，如果它只是一个小应用程序，我会把它全部放在下面`/opt/<my_java_app>`并在那里有一个目录子结构，就像你在 dev 中所做的那样。

如果您想更符合 UNIX 推荐的做法，请将您的可执行文件（包括您`jar`的.`/usr/local/bin/<my_java_app>``/etc/<my_java_app>``/var/<my_java_app>`

此外，您可能需要参考[此文档](http://www.pathname.com/fhs/pub/fhs-2.3.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T18:51:08.957

构建系统原生包，并使用系统默认值。如果使用 Debian，请直接从您的构建系统创建一个 .deb（例如，使用[ant deb task](http://code.google.com/p/ant-deb-task/)）。如果使用 rpm，请使用[rpm 任务](http://ant.apache.org/manual/Tasks/rpm.html)。这样，您就可以像其他任何应用程序一样轻松部署、取消部署和更新应用程序。

系统包应该将库（我`/usr/share/java/AppName`用于我的 jars）和配置（to`/etc/AppName`或`/home/UserName/.AppName`）分开；我符号链接到的启动脚本`/usr/bin`。除此之外，让事情发挥作用并没有太大的复杂性。我建议在你的发行版中找到著名的基于 java 的包并复制它们的启动脚本（特别是它们的 VM 定位魔法）。

# php - 使用嵌套静态数组的 PHP 配置文件

> ID：13686468
> 
> 赞同：0
> 
> 时间：2012-12-03T15:33:42.643
> 
> 标签：php, arrays, static, initialization

我在 PHP 中遇到一个“菜鸟问题”：我会有一个包含类似内容的 conf.php 文件：

```
<?php

static $oauthConfig = array(
    'facebook'=> array(
        'appId'     => 'xxx' ,
        'secret'    => 'xxx' ,
        'loginURL'  => 'xxx' ,
        'logoutURL' => 'xxx'
    ) ,
    'twitter' => array(
        'appId'     => 'xxx' ,
        'secret'    => 'xxx' ,
        'loginURL'  => 'xxx' ,
        'logoutURL' => 'xxx'
    )
);

?> 
```

我需要一个数组来向其中添加一些嵌套级别，并使其易于理解和访问，例如：

```
//auth.php , in the same folder than conf.php

<?php

require_once( 'conf.php' );

$service = $_REQUEST[ 'ref' ];

switch( $service )
{
    case 'facebook':
    {
        $params = $oauthConfig[$service];
        $fb     = OAuthFactory::getInstanceOf( $service , $params );
                    ...
        break;
    }
}

...
?> 
```

我不知道如何使用我的 conf.php 文件，因为包含它不允许我使用数组。我尝试了一些配置（带/不带静态等），但没有办法让它工作......

不幸的是，解析谷歌智慧并没有帮助我很多。

我会避免使用 .ini 文件或 XML conf。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:02:14.567

您似乎遇到了范围错误，或者您使用的库需要对象而不是数组。不管这个问题如何，考虑使用 INI 文件，尽管您不喜欢它们。它们简单、可预测且具有延展性。例如，如果这是您的 conf.ini：

```
; comments
[facebook]
appId = 1231456465798
loginURL = "http://www.somewhere/login"

; more comments
[twitter]
appId = 3432423342 
```

你可以阅读它`$conf = parse_ini_file( "conf.ini", true );`

在这种形式中，`print_r( $conf );`显示：

```
Array (
    [facebook] => Array (
            [appId] => 1231456465798
            [loginURL] => http://www.somewhere/login
        )
    [twitter] => Array (
            [appId] => 3432423342
        )) 
```

如果需要，您可以将其转换为接收库的 stdObject：

`$params = (object)$conf['facebook']; var_dump( $params );`

```
object(stdClass)#1 (2) {
  ["appId"]=> string(13) "1231456465798"
  ["loginURL"]=> string(26) "http://www.somewhere/login"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:46:16.653

我认为您正在寻找的是一个全局数组。

```
global $oauthConfig;
$oauthConfig = array(
'facebook'=> array(
    'appId'     => 'xxx' ,
    'secret'    => 'xxx' ,
    'loginURL'  => 'xxx' ,
    'logoutURL' => 'xxx'
) ,
'twitter' => array(
    'appId'     => 'xxx' ,
    'secret'    => 'xxx' ,
    'loginURL'  => 'xxx' ,
    'logoutURL' => 'xxx'
)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:57:16.183

您已经在 conf.php 中有数组声明！你只需要包含它并正常使用它：

```
include "conf.php";

$params=$oauthConfig[$service]; 
```

# sql - 选择批次的行

> ID：13686469
> 
> 赞同：0
> 
> 时间：2012-12-03T15:33:45.450
> 
> 标签：sql, postgresql

我有一张表格`widget_events`，记录了小部件在 date`event_what`发生的事件。同一事件可能在同一天多次发生在同一个小部件上。出于这个原因，列被用作区分这些行的主键。这是表声明：`widget_id``event_when``event_id`

```
CREATE TABLE widget_events
(
event_id    int4 UNIQUE NOT NULL,
event_when  date NOT NULL,
event_what  text NOT NULL,
widget_id   int4 REFERENCES widgets (widget_id) NOT NULL,
PRIMARY KEY (event_id)
); 
```

客户端应用程序分批处理事件，其中每个批次包含一个小部件在一个日期的所有事件。但是，应用程序不知道哪些小部件和日期存储在`widget_events`.

一种可能的解决方案是首先从 `widget_events`（使用 SQL 的`LIMIT`）中选择一个随机行，然后对所有具有相同`widget_id`and的行进行另一次查询`widget_when`。处理完这个批次后，可以从 中删除这些行`widget_events`，我们回到第一步。当第一步报告没有更多随机行要返回时，算法停止。

我的问题是是否有更快、更优雅的方式来做到这一点。在 SQL（特别是 PostgreSQL 理解的 SQL）中是否可以在单个查询中返回每个不同的批次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:35:33.583

要选择不同的批次：

```
select  distinct event_when
,       event_what
from    widget_events 
```

或者您可以在一个查询中获取一个批次，例如：

```
select  batch.*
from    widget_events batch
join    (
        select  event_when
        ,       event_what
        from    widget_events
        limit   1
        ) filter
on      filter.event_when = batch.event_when
        and filter.event_what = batch.event_what 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:42:45.937

为什么不直接返回按 event_when 排序的行：

```
select *
from widget_events we
order by event_when, event_what, event_id 
```

我也加入了 event_what，所以所有类似的事件都将出现在连续的行上。

然后，您的逻辑可以只查找日期何时更改以确定某事是否是最后一个事件。如果需要，您甚至可以将其放入选择中：

```
select *,
       (case when lag(event_when) over (partition by event_id) < event_when then 1
             else 0
        end) as isFirst,
       (case when lead(event_when) over (partition by event_id) < event_when then 1
             else 0
        end) as isLast
from widget_events we
order by event_when, event_what, event_id 
```

# javascript - 如何将数字 HTTP 状态代码转换为其在 javascript 中的显示名称？

> ID：13686470
> 
> 赞同：5
> 
> 时间：2012-12-03T15:33:53.537
> 
> 标签：javascript, jquery, http, http-status-codes

有没有办法将数字 http 状态代码（即 404,403,500，...）转换为它们的显示名称（未找到，禁止，内部服务器错误，...）？

如果它有任何帮助，我正在使用 AngularJS 和 jQuery。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:40:07.117

您可以构建自己的对象（或下载[此](https://github.com/andreineculau/http-status-codes-json/blob/master/http_status.json)对象）并在那里查找它们：

```
var codes = {
    "100": "Continue",
    "101": "Switching Protocols",
    "102": "Processing",
    "200": "OK",
    ...
};

var code = 200;

console.log(codes[code]); // "Ok" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-11T15:46:53.830

您可以使用来自 npm[的 http-status-codes 。](https://www.npmjs.com/package/http-status-codes)

```
 var HttpStatus = require('http-status-codes');
    HttpStatus.getStatusText(200) // ==> "OK" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-10T12:13:05.957

只是为了帮助大家复制/粘贴

```
/* Helpers */
var friendlyHttpStatus = {
    '200': 'OK',
    '201': 'Created',
    '202': 'Accepted',
    '203': 'Non-Authoritative Information',
    '204': 'No Content',
    '205': 'Reset Content',
    '206': 'Partial Content',
    '300': 'Multiple Choices',
    '301': 'Moved Permanently',
    '302': 'Found',
    '303': 'See Other',
    '304': 'Not Modified',
    '305': 'Use Proxy',
    '306': 'Unused',
    '307': 'Temporary Redirect',
    '400': 'Bad Request',
    '401': 'Unauthorized',
    '402': 'Payment Required',
    '403': 'Forbidden',
    '404': 'Not Found',
    '405': 'Method Not Allowed',
    '406': 'Not Acceptable',
    '407': 'Proxy Authentication Required',
    '408': 'Request Timeout',
    '409': 'Conflict',
    '410': 'Gone',
    '411': 'Length Required',
    '412': 'Precondition Required',
    '413': 'Request Entry Too Large',
    '414': 'Request-URI Too Long',
    '415': 'Unsupported Media Type',
    '416': 'Requested Range Not Satisfiable',
    '417': 'Expectation Failed',
    '418': 'I\'m a teapot',
    '429': 'Too Many Requests',
    '500': 'Internal Server Error',
    '501': 'Not Implemented',
    '502': 'Bad Gateway',
    '503': 'Service Unavailable',
    '504': 'Gateway Timeout',
    '505': 'HTTP Version Not Supported',
};

/* Usage */
var code = 200;

console.log(friendlyHttpStatus[code]); // "Ok" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T15:36:29.293

我不这么认为，但您可以使用这个有用的网站：[http](http://httpstat.us/) ://httpstat.us/ 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-18T18:39:03.963

我蹩脚的解决方案：

```
var friendlyHttpStatus = function(status){

    if(status == '200') return 'OK'
    if(status == '201') return 'Created'
    if(status == '202') return 'Accepted'
    if(status == '203') return 'Non-Authoritative Information'
    if(status == '204') return 'No Content'
    if(status == '205') return 'Reset Content'
    if(status == '206') return 'Partial Content'
    if(status == '300') return 'Multiple Choices'
    if(status == '301') return 'Moved Permanently'
    if(status == '302') return 'Found'
    if(status == '303') return 'See Other'
    if(status == '304') return 'Not Modified'
    if(status == '305') return 'Use Proxy'
    if(status == '306') return 'Unused'
    if(status == '307') return 'Temporary Redirect'
    if(status == '400') return 'Bad Request'
    if(status == '401') return 'Unauthorized'
    if(status == '402') return 'Payment Required'
    if(status == '403') return 'Forbidden'
    if(status == '404') return 'Not Found'
    if(status == '405') return 'Method Not Allowed'
    if(status == '406') return 'Not Acceptable'
    if(status == '407') return 'Proxy Authentication Required'
    if(status == '408') return 'Request Timeout'
    if(status == '409') return 'Conflict'
    if(status == '410') return 'Gone'
    if(status == '411') return 'Length Required'
    if(status == '412') return 'Precondition Required'
    if(status == '413') return 'Request Entry Too Large'
    if(status == '414') return 'Request-URI Too Long'
    if(status == '415') return 'Unsupported Media Type'
    if(status == '416') return 'Requested Range Not Satisfiable'
    if(status == '417') return 'Expectation Failed'
    if(status == '418') return 'I\'m a teapot'
    if(status == '500') return 'Internal Server Error'
    if(status == '501') return 'Not Implemented'
    if(status == '502') return 'Bad Gateway'
    if(status == '503') return 'Service Unavailable'
    if(status == '504') return 'Gateway Timeout'
    if(status == '505') return 'HTTP Version Not Supported'
} 
```

# javascript - 无法加载 Struts2-Jquery 的远程对话框

> ID：13686471
> 
> 赞同：0
> 
> 时间：2012-12-03T15:33:55.753
> 
> 标签：javascript, jquery, jsp, struts2, struts2-jquery

我正在使用 Struts2 Jquery 插件，请看一下这段代码。

```
<s:iterator status="stat" value="primeDisplayLocationBeans">
    <tr>
        <td class="last center">        
            <sj:a openDialog="myremotedialog" href="opendemographicdetails?locationId=%{id}">
                Demographic
            </sj:a>
            <sj:dialog id="myremotedialog"   autoOpen="false" 
                    title="Demographic Details" width="800"/>
        </td>
    </tr>
</s:iterator> 
```

现在发生了什么代码创建了一个动态链接列表，如果我单击这些链接，它将在远程对话框中打开相应的内容。但问题是第一行链接不起作用，但所有其他链接都正常工作并打开有各自的对话框。对于第一个链接，甚至对话框都没有打开。它在 Java 脚本控制台中显示的错误是：

> 无法设置未定义的属性“href”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:18:35.050

您正在为多个元素分配相同的 ID，这[违反 (X)HTML 规范](http://webdesign.about.com/od/css/f/blfaqmultiIDs.htm)，并且不允许您稍后唯一地引用一个元素（其中多个元素具有相同的 ID）。

用这样的东西参数化你的 ID：

```
<s:iterator status="stat" value="primeDisplayLocationBeans">
   <tr>
      <td class="last center">
         <sj:a openDialog="myremotedialog_%{#stat.index}" 
               href="opendemographicdetails?locationId=%{id}">Demographic</sj:a>

         <sj:dialog id="myremotedialog_%{#stat.index}" 
                    autoOpen="false" title="Demographic Details" width="800"/>

      </td>
   </tr>
</s:iterator> 
```

# database-design - 存储屏幕抓取数据的正确方法是什么？

> ID：13686474
> 
> 赞同：1
> 
> 时间：2012-12-03T15:34:03.970
> 
> 标签：database-design, screen-scraping, web-scraping, store, datastore

我在一个网站上工作。它从各种网站上抓取产品详细信息（名称、功能、价格等），进行处理和显示。我正在考虑每天运行更新脚本并保持数据新鲜。

1.  抓取数据
2.  处理它们
3.  存储在数据库中
4.  读取（从数据库）并显示它们

我已经将所有数据存储在 sql 模式中，但我不确定。每次更新后，所有旧记录都将消失。如果抓取的新数据以某种方式损坏，则没有什么可显示的。

那么，有没有什么通用的方法来归档旧数据呢？哪一个更方便：单独的 sql 模式或 xml 文件？或者是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:51:05.263

我强烈建议将数据放入 MySQL 数据库。将有大量关于如何安全地执行此操作的示例，您可以从他们的数据中控制过去的数据，并在添加的同时显示最新数据。

去源码： http: [//php.about.com/od/security/Security_for_PHP_and_MySQL.htm](http://php.about.com/od/security/Security_for_PHP_and_MySQL.htm)

# java - UTC 字符串添加到 XML 转换

> ID：13686475
> 
> 赞同：0
> 
> 时间：2012-12-03T15:34:15.437
> 
> 标签：java, android

看来我的 java.util.date 变量正在以我无法控制的方式格式化。

在代码中，我有一个 Date 变量来保存该值，所以它看起来像这样。

日期 X；

日期 DD = new Date(); X = DD;

X 看起来很棒，直到我将它序列化为止。日期在我的 XML 中正确显示，最后带有 UTC。例如：

2012-12-03 12:12:12:345 UTC

所以我不确定最后的UTC字符串。当我将它发送到数据库时，它会引发异常。如果它不会弄乱任何东西，我不介意将 UTC 留在那里，但我之前从未见过，所以想知道......？

JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:20:48.163

使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)将`Date`as 格式化为`String`您需要的任何格式。

# cakephp - CakePHP 2.2 随机通知消息

> ID：13686477
> 
> 赞同：1
> 
> 时间：2012-12-03T15:34:18.213
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.2

有时，我会在我的 CakePHP 网站上随机且非常罕见地收到以下消息：

> 注意 (8): session_start(): ps_files_cleanup_dir: opendir(C:\WINDOWS\TEMP) failed: No such file or directory (2) [CORE\Cake\Model\Datasource\CakeSession.php, line 615]

为什么会这样？自从用户进入以来，我一直在使用会话……为什么我只是不时收到此消息，而且很少？

我在 IIS 6 上使用 Windows Server 2003，但在 Windows 7 和 IIS 7 上我遇到了完全相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:32:36.840

很可能，IUSR 丢失且需要授予的唯一权限是 C:\Windows\Temp 文件夹上 Advanced Security 下的“List folder”。

[注意（8）：CakePHP 2.2 中的 session_start()](https://stackoverflow.com/questions/13123615/notice-8-session-start-at-cakephp-2-2/15233031#15233031)

如果您使用的是 Windows 服务器，则 C:\Windows\Temp 不太可能不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:19:10.560

似乎没有`C:\WINDOWS\TEMP`目录或 IIS 用户不可写。这就是它无法打开新会话的原因。

磁盘上也可能存在死锁或写锁，但这不太可能。检查尝试访问该文件夹的用户。

# c++ - C++11 std::to_string(double) - 没有尾随零

> ID：13686482
> 
> 赞同：73
> 
> 时间：2012-12-03T15:34:24.017
> 
> 标签：c++, stl, c++11

今天试用了C++11 STL的一些新功能，遇到了`std::to_string`.

可爱，可爱的一组功能。只为一次双字符串转换创建一个字符串流对象对我来说似乎有点过头了，所以我很高兴我们现在可以做这样的事情：

```
std::cout << std::to_string(0.33) << std::endl; 
```

结果？

```
0.330000 
```

我对此并不完全满意。有没有办法告诉`std::to_string`省略尾随零？我搜索了互联网，但据我所知，该函数只接受一个参数（要转换的值）。回到使用字符串流的“过去”，您可以设置流的宽度，但我宁愿不转换回来。

有人遇到过这个问题/有解决方案吗？一些 StackOverflow 搜索一无所获。

（C++11 STL 参考：[http](http://en.cppreference.com/w/cpp/string/basic_string/to_string) ://en.cppreference.com/w/cpp/string/basic_string/to_string ）

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-04T18:54:37.407

如果您只想删除尾随零，那很容易。

```
std::string str = std::to_string (f);
str.erase ( str.find_last_not_of('0') + 1, std::string::npos ); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-12-03T15:55:48.417

C++11 标准明确表示 ( `21.5/7`)：

> 返回：每个函数都返回一个字符串对象，该对象保存其参数值的字符表示，该参数值将通过使用格式说明符“%d”、“%u”、“%ld”调用 sprintf(buf, fmt, val) 生成"、"%lu"、"%lld"、"%llu"、"%f"、"%f" 或 "%Lf"，其中 buf 指定足够大小的内部字符缓冲区

对于按此顺序声明的函数：

```
string to_string(int val);
string to_string(unsigned val);
string to_string(long val);
string to_string(unsigned long val);
string to_string(long long val);
string to_string(unsigned long long val);
string to_string(float val);
string to_string(double val);
string to_string(long double val); 
```

因此，您无法控制结果字符串的格式。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-03T15:41:14.493

`std::to_string`让您无法控制格式；您得到的结果`sprintf`与使用类型的适当格式说明符相同（`"%f"`在这种情况下）。

如果您需要更大的灵活性，那么您将需要更灵活的格式化程序 - 例如`std::stringstream`.

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-09-26T11:13:51.740

要省略尾随零：

```
std::ostringstream oss;
oss << std::setprecision(8) << std::noshowpoint << double_value;
std::string str = oss.str(); 
```

注意：`#include <sstream>`和`#include <iomanip>`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-03T15:51:17.780

`std::to_string(double)`由标准定义为仅返回由 . 生成的相同字符序列`sprintf(buf, "%f", value)`。不多也不少，尤其是无法调整格式说明符。所以不，你无能为力。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-12T05:48:04.100

`boost::to_string`您也无法控制格式，但它会输出更接近您在屏幕上看到的内容。与 相同`std::lexical_cast<std::string>`。

对于具有格式控制的类似函数的操作，请使用`str(boost::format("...format...")% 0.33)`.

[std::to_string、boost::to_string 和 boost::lexical_cast<std::string> 之间有什么区别？](https://stackoverflow.com/questions/29399064/whats-the-difference-between-stdto-string-boostto-string-and-boostlexic)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-14T05:18:49.917

创建自定义转换函数，如有必要，删除拖尾零。

```
//! 2018.05.14 13:19:20 CST
#include <string>
#include <sstream>
#include <iostream>
using namespace std;

//! Create a custom convert function, remove the tailing zeros if necessary.  
template<typename T>
std::string tostring(const T &n) {
    std::ostringstream oss;
    oss << n;
    string s =  oss.str();
    int dotpos = s.find_first_of('.');
    if(dotpos!=std::string::npos){
        int ipos = s.size()-1;
        while(s[ipos]=='0' && ipos>dotpos){
            --ipos;
        }
        s.erase ( ipos + 1, std::string::npos );
    }
    return s;
}

int main(){
    std::cout<< tostring(1230)<<endl;
    std::cout<< tostring(12.30)<<endl;
} 
```

* * *

输入数字：

```
1230
12.30 
```

编译`-std=c++11`，然后结果：

```
1230
12.3 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-18T04:27:47.730

该问题的多种解决方案`to_string`不起作用。《魔方》——我的CS2400老师

```
std::cout.setf(ios::fixed);
std::cout.setf(ios::showpoint);
std::cout.precision(2);

const double x = 0.33, y = 42.3748;
std::cout << "$" << x << std::endl;
std::cout << "$" << y << std::endl; 
```

输出：

```
$0.33
$42.37 
```

您使用十进制数字执行的任何后续输出都将被设置为这样。

您可以随时更改您认为合适的 setf 和精度。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-26T12:48:31.833

编写一个通用辅助函数，如下所示，您可以将其重新用于 C++ 项目中的舍入需求。

```
inline static const string roundDouble(const double input, const int decimal_places)
{
    ostringstream str;
    str << fixed << setprecision(decimal_places);
    str << input;
    return str.str();
} 
```

# java - 原始数据中的 1 和 0 字符串

> ID：13686486
> 
> 赞同：0
> 
> 时间：2012-12-03T15:34:34.043
> 
> 标签：java, string, file, binary

我有一个在正文中有随机 1 和 0 的网页，我想将其视为原始二进制数据并将其保存到文件中。

```
<html>
    <head>...</head>
        <pre style="word-wrap: break-word; white-space: pre-wrap;">1 0 1 0 1 1 1 1 1 0</pre>
    </body>
</html> 
```

或者，我可以在一列中获取文件。如果我只是 url.openStream() 并读取字节，它会吐出 ascii 值（49 和 48）。我也不确定如何一次将一位写入文件。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:05:53.403

> <pre style="word-wrap: break-word; white-space: pre-wrap;">1 0 1 0 1 1 1 1 1 0</pre>

这可以作为两个（base64）或三个（十六进制）字节发送，所以我假设效率在这里不是问题。;) 提取字符串后，您可以使用它进行转换。

```
String s = "1 0 1 0 1 1 1 1 1 0";
long l = Long.parseLong(s.replaceAll(" ", ""), 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:41:14.257

您可以将位读入字节，然后将字节写入文件：

```
int byteIndex = 0;
int currentByte = 0;
while (hasBits) {
    String bit = readBit();
    currentByte = currentByte << 1 | Integer.valueOf(bit);
    if (++byteIndex == 8) {
        writeByte(currentByte);
        currentByte = 0;
        byteIndex = 0;
    }
}

// write the rest of bits here 
```

我也同意罗伯特鲁哈尼的观点，这是一种非常低效的数据传输方式。

# c# - 连接到数据库服务器

> ID：13686487
> 
> 赞同：0
> 
> 时间：2012-12-03T15:34:35.843
> 
> 标签：c#, sql-server-2008, connection, database-server

IP 地址有一个数据库服务器`192.168.1.11`。该服务器上有几个数据库。它具有身份验证，例如`user : System`和`pass : 123123`。

现在我只想连接到该服务器，而不是任何特定的数据库，然后获取该服务器上可用的数据库列表。

我知道使用`SqlConnection`. 但我想知道如何才能连接到服务器并获取该服务器上的数据库列表。

我正在使用 Visual Studio 2010 和 SQL Server 2008-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:37:32.360

在方法上运行此查询

```
SELECT [name] 
FROM master.dbo.sysdatabases 
WHERE dbid > 4 
```

或通过

```
String connString ="Data Source=localhost;User ID=username;Password=passwrd;";

        using (SqlConnection sqlConn = new SqlConnection(connString))
        {
            sqlConn.Open();
            DataTable tblDatabases = sqlConn.GetSchema("Databases");
            sqlConn.Close();
            DataTable td = tblDatabases.Select("dbid>6").CopyToDataTable();
         } 
```

# jquery - 如何使 load() 以 100% 的宽度和高度工作？

> ID：13686489
> 
> 赞同：1
> 
> 时间：2012-12-03T15:34:37.683
> 
> 标签：jquery, jquery-load

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            background-color: lightgray;
        }

        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .container {
            width: 600px;
            height: 600px;
            margin: 50px auto;
            background-color: gray;
            z-index: 1;
        }

        .demo {
            position: fixed;
            width: 100%;
            height: 100%;
            display: none;
            z-index: 22;
        }
    </style>

</head>
<body>
    <div class="container">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cum iste fugit saepe incidunt voluptatum quisquam nulla asperiores dolores aspernatur at assumenda veniam porro ad delectus dicta magni facere perferendis officia commodi laboriosam laborum possimus similique pariatur reiciendis repudiandae suscipit quibusdam ipsa tempore dolore sunt nemo et expedita quis quod mollitia maiores nihil dolorum non accusamus omnis esse minus quas libero qui consequatur recusandae. Doloremque possimus voluptatum iure autem excepturi laborum mollitia dolorem eum fugit numquam architecto facere incidunt non laboriosam hic assumenda ipsam! Delectus sapiente dolorem aliquid voluptate magni voluptas ratione nulla ducimus suscipit quo est maiores atque molestias laboriosam perspiciatis neque inventore sed rem impedit odio autem nisi earum illum animi accusantium consequatur officiis tempore nemo modi! Laboriosam qui doloremque tempore quas corporis iste fugiat ratione libero vero aperiam quam minus itaque impedit at repellat illum animi nemo vitae officiis sed perferendis maiores quos cupiditate magnam dignissimos nesciunt excepturi voluptatibus suscipit amet reiciendis architecto quasi nihil accusantium voluptas laudantium atque odit praesentium! Ad harum delectus necessitatibus praesentium velit nobis officiis illum odio quibusdam inventore eum eveniet sapiente soluta aperiam expedita voluptatem ab fuga tempore dolor aut laborum atque ut labore reprehenderit rerum veritatis dignissimos ipsam quos porro minima. Autem quisquam excepturi assumenda deserunt nulla odio ea eveniet atque eum vitae dicta quaerat corrupti voluptas sapiente sint! Veritatis et aspernatur quaerat nulla necessitatibus tempora impedit provident mollitia beatae! Excepturi omnis architecto adipisci impedit sequi repellat dolorum laboriosam et totam consectetur doloribus quis ipsum aliquam alias repudiandae ex reprehenderit eaque error deleniti a ipsa? Beatae at culpa distinctio debitis vel tempore deleniti consequuntur est cupiditate laborum iste quo cum quis ex vero voluptate fugiat maxime facilis totam quia dolorum sunt veniam. Labore optio voluptatem at voluptas libero natus veritatis quidem nulla ipsa temporibus nihil aperiam placeat aliquam saepe obcaecati omnis asperiores.
            <button>GOGOGO</button>
    </div>

    <div class="demo"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script>
        (function(){
            $('button').on('click', function(){
                $('.demo').load('demo.html');
            })
        })();
    </script>
</body>
</html> 
```

这是我的 html，我想加载这个： [http](http://buildinternet.com/project/supersized/slideshow/3.2/demo.html) ://buildinternet.com/project/supersized/slideshow/3.2/demo.html 通过单击 DOM 窗口全长中的按钮并在某处放置一个关闭按钮关闭它并再次查看索引页面。不透明度是要走的路，是的，但 demo.html 甚至无法正确加载，我没有 jQuery 功能或任何东西，我得到的只是背景图像，我不知道为什么。

# msbuild - 我想为 al 文件运行任务并排除那些没有更改的文件

> ID：13686494
> 
> 赞同：0
> 
> 时间：2012-12-03T15:34:56.673
> 
> 标签：msbuild

我有两个构建目标来检查我的代码质量。

每次编译时我都会运行以下构建目标。这占用了太多时间，我希望他们只检查确实更改的文件。

换句话说，我想过滤没有从`ItemGroup` `CppCheckFiles`/更改的文件`LinterFiles`。

```
 <Target Name="CppCheck">
    <ItemGroup>
      <CppCheckFiles Include="*main.c" />
      <CppCheckFiles Include="Source/*/*.c" />
    </ItemGroup>
    <Message Text="$(Configuration) starting." Importance="High" />
    <Exec Command="C:\Cppcheck\cppcheck.exe %(CppCheckFiles.FullPath)  --enable=style --template=&quot;{file}({line}): error:{severity}-{id}: {message}&quot;" />
  </Target>
  <Target Name="SPLint">
    <ItemGroup>
      <LinterFiles Include="*main.c" />
      <LinterFiles Include="Source/*/*.c" />
      <LinterFiles Include="Source/*/*.h" />
    </ItemGroup>
    <Message Text="$(Configuration) starting." Importance="High" />
    <Exec Command="splintCaller %(LinterFiles.FullPath)" />
  </Target> 
```

我知道常规的构建过程会这样做，我想知道我是否必须如此快速地编写自己的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:26:57.467

嗯..这听起来很有趣。我帮不了你。但是，如果 cppcheck wiki 或手册有一些小的示例项目可以做到这一点，那就太好了。

有些人在提交挂钩中使用 cppcheck。我自己用 GIT 试过（我添加了一个 linux shell 脚本）。还有一个 TortoiseSVN 插件你可以试试（http://sourceforge.net/apps/phpbb/cppcheck/viewtopic.php?f=3&t=443）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:51:04.210

解决方案是[增量构建](http://msdn.microsoft.com/en-us/library/ms171483.aspx)。如果没有任何更改，MSBuild 会比较时间戳以排除完整的构建目标。

以下目标为每个文件创建一个时间戳并跳过那些未更改的文件。

如果检测到错误并且未写入时间戳，cppcheck.exe 将返回 -1。

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="CppCheck" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <ItemGroup>
      <CppCheckFiles Include="*main.c" />
      <CppCheckFiles Include="Source/*/*.c" />
    </ItemGroup>   

  <Target Name="CppCheck"
    Inputs="@(CppCheckFiles)" 
    Outputs="CCPCheck\%(CppCheckFiles.Filename)%(CppCheckFiles.Extension).stamp">
    <Exec Command="C:\Cppcheck\cppcheck.exe %(CppCheckFiles.FullPath)  --enable=style --template=&quot;{file}({line}): error:{severity}-{id}: {message}&quot;" />
    <MakeDir Directories="CCPCheck"/>
    <Touch Files="CCPCheck\%(CppCheckFiles.Filename)%(CppCheckFiles.Extension).stamp" AlwaysCreate = "true" />
  </Target>

</Project> 
```

# contextmenu - Infragistics.UltraGrid 中不同列的行为

> ID：13686496
> 
> 赞同：0
> 
> 时间：2012-12-03T15:35:09.003
> 
> 标签：contextmenu, infragistics, right-click, contextmenustrip, ultrawingrid

我有一个 Infragistics.UltraGrid，我想在它上面添加一个右键单击事件。我在网格中有 6 列，当我单击六列中的最后四列时，我调用上下文菜单，但是当我右键单击第一列和第二列时，什么也没有发生。

顺便说一句，如果我右键单击第一列或第二列，然后右键单击其他列，我的上下文菜单就会消失。

那么你能回答我前两列有什么问题吗？

# java - 重置或清除 Lucene 索引

> ID：13686497
> 
> 赞同：0
> 
> 时间：2012-12-03T15:35:09.643
> 
> 标签：java, hibernate, lucene, hibernate-search

目前我正在为我的 lucene 查询编写单元测试。因此，我创建了一个包含虚拟数据的测试数据库。对于每个测试，我都会重新创建我的数据库，因此每个测试都是使用“新鲜”数据开始的。通常我只是将我的 hbm ddl 属性创建（如下所示）

```
<property name="hibernate.hbm2ddl.auto">update</property> 
```

但我注意到这并没有清除 Lucene 索引。任何人都知道如何确保每个测试都在新创建的索引上运行？我的临时解决方案是在每次测试之前运行一个脚本，它将简单地删除索引文件夹。但是由于这些文件夹位于文件系统的某个位置，我希望有一种更通用/标准的方法来解决这个问题……有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:38:20.497

您可以通过设置**create=true**来创建新的[IndexWriter](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/index/IndexWriter.html#IndexWriter%28org.apache.lucene.store.Directory,%20org.apache.lucene.analysis.Analyzer,%20boolean,%20org.apache.lucene.index.IndexDeletionPolicy,%20org.apache.lucene.index.IndexWriter.MaxFieldLength%29)。这将覆盖现有索引。

# java - 在 JLabel 中添加图像但没有响应

> ID：13686502
> 
> 赞同：0
> 
> 时间：2012-12-03T15:35:23.387
> 
> 标签：java, image, swing, jlabel, imageicon

我正在尝试在 JLabel 中添加图像，但它不起作用。第二个标签有效，但第一个 JLabel 无效。这是代码。提前致谢。

```
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.Label;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class MainLabel {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        JFrame jframe;
        jframe = createFrame();

        ImageIcon ii = new ImageIcon("images.jpeg");

        JLabel label = new JLabel(ii);
        jframe.add(label);

        Label label123 = new Label("Be Nice to World!!");
        jframe.add(label123);

        jframe.setVisible(true);

    }

    static JFrame createFrame() {
        JFrame guiFrame = new JFrame();
        guiFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        guiFrame.setTitle("BorderLayout Example");
        guiFrame.setSize(700, 300);
        return guiFrame;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:41:19.703

您的包含图像的位置`label`被替换为*没有*附加任何图像的位置。你可以使用：`label123``BorderLayout.CENTER`

 *```
label123.setIcon(ii); 
```

如果您希望显示 2 个标签，您可以将基于文本`label123`的`SOUTH`位置放在：

```
jframe.add(label123, BorderLayout.SOUTH); 
```

注意：使用`JLabel`代替`Label`.*

# c# - 代码问题

> ID：13686504
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:35:27.170
> 
> 标签：c#

```
try
{

    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("http://www.site.ru/group/" + gr);
    request.AllowAutoRedirect = false;
    request.Method = "GET";
    request.CookieContainer = cookies;
    request.UserAgent = "Opera/9.80 (Windows 7; U; en) Presto/2.9.168 Version/11.50";
    request.ContentType = "application/x-www-form-urlencoded";
    HttpWebResponse response_headers = (HttpWebResponse)request.GetResponse();
    System.IO.Stream stream = response_headers.GetResponseStream();
    System.IO.StreamReader sr = new System.IO.StreamReader(stream);
    string response = sr.ReadToEnd();
    sr.Close();
    /*if (response_headers.Headers["Location"].Contains("alted"))
    {
        log("[-] GROUP is " + gr + " closed\r\n");
        return -2;
    }*/
    string gash = Regex.Match(response, @"gwtHash:""(?<id>[^""]+)""").Groups["id"].Value;
    string grpId = Regex.Match(response, @"state:""st.cmd=altGroupMain&amp;st.groupId=(?<id>[^""]+)""").Groups["id"].Value;
}
catch { log("[?] Can't parse ash and grpId\r\n"); return -1; } 
```

如果 {} 被注释，则此代码在构造时成功运行。但是当我删除评论并运行它时，我收到`[?] Can't parse ash and grpId` Why?=\

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:36:54.990

**response_headers.Headers["Location"]**必须为空，因此会引发异常。插入验证：

```
if (response_headers.Headers["Location"] != null && response_headers.Headers["Location"].Contains("alted"))
    {
        log("[-] GROUP is " + gr + " closed\r\n");
        return -2;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:37:01.573

您收到该消息是因为您在所有代码周围都有一个 catch everything 块：

```
catch { log("[?] Can't parse ash and grpId\r\n"); return -1; } 
```

这是一个不好的做法。删除 try/catch 块并让原始异常显示出来。这将有可能看到真正的问题是什么。

# mysql - 我希望mysql表支持两种语言

> ID：13686510
> 
> 赞同：2
> 
> 时间：2012-12-03T15:35:50.260
> 
> 标签：mysql, jsp, meta

我有一个jsp表单，代码中有下一行：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> 
```

我将表单的参数发送到mysql中的一个表中。

参数可以是英文或希伯来文。

我查看了mysql是否支持希伯来语：

```
show character set; 
```

并得到：

```
| hebrew   | ISO 8859-8 Hebrew           | hebrew_general_ci   |      1 | 
```

但是，当我在希伯来语中插入参数时，mysql 中的拟合显示如下：

```
╫⌐╫?╫?╫?╫?╫? 
```

我也在尝试打印我的jsp文件中的参数并得到奇怪的字母..

如何更新我的代码以支持英语和希伯来语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:40:12.323

做

```
SET CHARACTER SET 'utf8'; 
```

建立连接后。我用不同的语言遇到了完全相同的问题，这解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:07:00.377

作为使用 utf-8 编码创建新表的示例，这应该适合您；

```
CREATE TABLE IF NOT EXISTS `test` (
  `id` int(10) NOT NULL,
  `name` varchar(10)
  collate utf8_unicode_ci NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

# c# - 这种类型的委托叫什么（C#）

> ID：13686513
> 
> 赞同：1
> 
> 时间：2012-12-03T15:35:56.827
> 
> 标签：c#, .net, delegates, anonymous-delegates

我有这些代码行。

```
class Program
{
    public delegate void printer();

    public static void Method()
    {
        Console.WriteLine("Hello");
    }
    static void Main(string[] args)
    {
        printer del = delegate { Method(); };
        del();
        Console.ReadKey();
    }
} 
```

现在我怎么称呼这个声明`printer del = delegate { Method(); };`。

当然它不能称为匿名方法，因为这里我有一个命名方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T15:37:00.723

它被称为[匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=vs.80%29.aspx)

> 当然不能称为匿名方法，因为这里我有一个命名方法

它仍然是一种匿名方法，正如@Daniel 在评论中指出的那样，您所做的是`printer`通过分配具有相同签名的方法（恰好是......匿名方法）来实例化委托的实例。您可以通过执行以下操作完全避免使用匿名方法：

```
Printer del = Method; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T15:37:43.327

这是一个匿名委托，其唯一的功能恰好是调用命名方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:39:20.653

正如其他人所说，这是一种匿名方法。

你也可以用这段代码完成同样的事情：

```
Action del = () => Method();
del(); 
```

这样，您不需要定义`delegate`和使用内置`Action`类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T15:40:56.253

这是一种匿名方法。方法的内部确实调用了一个命名的方法，但这并没有改变外部方法是匿名的这一事实。

当您展开 del 时，您可以很容易地看到这一点：

```
class Program
{
    public delegate void printer();

    public static void MethodA()
    {
        Console.WriteLine("Hello");
    }

    public static void MethodB()
    {
        Console.WriteLine("World");
    }
    static void Main(string[] args)
    {
        bool x = true;

        printer del = delegate 
        {
            if (x)
            {
                MethodA();
            }
            else
            {
                MethodB();
            }
        };

        del();
        Console.ReadKey();
    }
} 
```

如果你不想使用委托，你可以对 Action 做同样的事情：

```
 Action delA = () => MethodA();
   delA(); 
```

`Action`指向一个不带参数的 void 返回方法。

# android - Android - 让音频通过扬声器播放

> ID：13686514
> 
> 赞同：0
> 
> 时间：2012-12-03T15:35:57.547
> 
> 标签：android, audio

当用户接到电话时，我想播放具有相同扬声器和音量的 mp3 音频文件。我正在使用以下代码

```
int result = audioManager.requestAudioFocus(afChangeListener,
                    AudioManager.MODE_IN_CALL,
                    AudioManager.AUDIOFOCUS_GAIN);
audioManager.setSpeakerphoneOn(true); 
```

与

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

在清单中

但它不起作用。音量非常高。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:46:09.967

该呼叫`setSpeakerPhoneOn`（最有可能）将执行的操作是将音乐和语音呼叫路由到扬声器，在这种情况下，它们可能会混合在一起，并且音乐可能会被下采样到语音呼叫采样率（8 或 16 kHz） .

您可以尝试的一件事是我在[如何在 android 4.0 中以编程方式打开/关闭扬声器的](https://stackoverflow.com/questions/12036221/how-to-turn-speaker-on-off-programatically-in-android-4-0)建议， 这可以让您只将音乐路由到扬声器，而语音通话音频被路由到听筒。但不能保证在所有设备上都能正常工作。

# gwt2 - GWT：ErrorHandler 它将在小部件上捕获什么类型的错误

> ID：13686521
> 
> 赞同：0
> 
> 时间：2012-12-03T15:36:17.073
> 
> 标签：gwt2

您好刚通过 GWT 2.5，遇到了[ErrorHandler](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/ErrorHandler.html)，可以将其添加到已实现 hasErrorHanlder 的小部件中。任何人都可以帮助我理解。

我正在尝试通过扩展 Compoiste 来编写新的自定义小部件，如果我实现 HasErrorHanlders 接口，它可以帮助我捕捉此类中发生的任何错误应该被它使用类知道...可能我错了..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:39:45.650

这是一个 DOM 事件，而不是 GWT 小部件事件。它仅在某些 GWT 内部案例中针对 DOM 相关错误被触发或使用。我见过只有 GWT Image 类使用这个类。

就我所遇到的而言，它在复合小部件中没有用。如果我们能找到任何其他用例，那将会很有趣。注意：它`DomEvent`在 GWT 代码中被引发或触发，并且不会被触发。

**编辑**- 在 GWT 中使用未捕获的异常处理程序来处理这种奇怪的情况。

```
1) http://stackoverflow.com/questions/3028521/gwt-setuncaughtexceptionhandler
2) http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/core/client/GWT.html#setUncaughtExceptionHandler(com.google.gwt.core.client.GWT.UncaughtExceptionHandler) 
```

# c# - 使用 SQL Server CE 的问题

> ID：13686527
> 
> 赞同：0
> 
> 时间：2012-12-03T15:36:28.543
> 
> 标签：c#, .net, sql-server-ce

我正在为我正在从事的项目使用 SQL Server Compact 数据库，并且一直难以尝试将数据插入数据库。

我的插入语句和一切工作正常，数据也被插入，我什至可以搜索插入的数据（在应用程序中）。

我遇到的问题是当我退出并重新运行应用程序时，似乎数据没有插入数据库并且表也是空的。

谁能让我知道我哪里出了问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:39:32.357

每当您重建/运行应用程序时，是否会用空版本覆盖 SDF 文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:41:22.390

正如 Thorsten 指出的，检查 SDF 文件上的构建操作。

# xna - XNA 在玩家使用键盘时更改抽签

> ID：13686554
> 
> 赞同：0
> 
> 时间：2012-12-03T15:37:34.420
> 
> 标签：xna, sprite, draw

有人能给我一个例子，当用户按下键盘时如何改变绘制的纹理？

基本上我有 5 个精灵图像`stood still`, `up`, `down`, `left`,`right`

我的第一次尝试是在更新方法中创建布尔条件，例如如果`keys.left`按下矩形向左移动，而对于绘制方法来绘制向左移动的角色，我的问题是他的纹理`stood still`不会消失并且在移动时重叠相同不同方向。

我尝试过其他语句等，但我坚持基本动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:59:44.143

So this is very pseudo code, but this is a basic approach how to do that

First we create class which contains all our informations about the player. You can add Health, Score etc aswell.

```
class Player
{
    Texture2D Sprite;
    Vector2 Position;
    Vector2 Velocity;
    static const float PlayerSpeed = 5;
} 
```

Important here is the Position (top left of the sprite), the Velocity(the amount of change every second) and the sprite which is just our texture we want to use. Of course it would be better to use only one player texture and modify the source rect accordingly.

Now our input handling.

```
void OnKeyboard(GameTime aGameTime, KeyArg aKey)
{
    if(aKey == Keys.Left)
    {
        mPlayer.Velocity = new Vector2(-Player.PlayerSpeed, 0);
        mPlayer.Sprite = TextureManager.GetTexture("left_player");
    }
    else if(aKey == Keys.Right)
    {
        mPlayer.Velocity = new Vector2(Player.PlayerSpeed, 0);
        mPlayer.Sprite = TextureManager.GetTexture("right_player");
    }

    mPlayer.Position += aGameTime.EllapsedMiliseconds * mPlayer.Velocity;
} 
```

Here we just check which key was pressed, modify the velocity and change the current sprite for our player. The final line is the most important one, this modifies the players position using the velocity modified by the elapsed time of the frame. That way you have a steady movement instead despite any frame rate inconsistencies.

```
void Render()
{
    Sprite.Draw(mPlayer.Sprite, mPlayer.Position);
} 
```

Finally the rendering, how to render a sprite should be clear, here you just use the set sprite and the position. There is a lot of room for improvements, for example minimizing texture switches, handling sprites with alpha, and the most important one proper handling of the keyboard. You need to steadily adjust the position, but depending on how you implement it, the movement might be bound to the key repeat rate, which may not be desired.

# cordova - 在没有插件的情况下将 Google Analytics 与 Phonegap 2.1 一起使用？

> ID：13686560
> 
> 赞同：2
> 
> 时间：2012-12-03T15:37:55.393
> 
> 标签：cordova, google-analytics

我希望在没有 phoneGap 2.1 插件的情况下使用谷歌分析。

我关注了这个线程：

[如何在没有插件的情况下将 Google Analytics 与 Phonegap 一起使用？](https://stackoverflow.com/questions/11026916/how-to-use-google-analytics-with-phonegap-without-a-plugin)

步骤：
1\. 下载 ga.js
2\. 修改 ga.js 文件，增加一个字符。在 ga.js 文件中搜索单词“file:”并将其替换为“_file:”。
3\. 在页面顶部包含谷歌分析代码

但它似乎在 phoneGap 2.1 中不起作用。

有人找到了解决这个问题的方法吗？

谢谢

* * *

在我的 ga.js 文件中，我有“_file:”，

在我的 index.html 我有这个代码：

```
<script type="text/javascript" src="js/ga.js"></script> 
```

在我的 javascript 中：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-36500003-1']);

_gaq.push(['_setDomainName', 'none']);

_gaq.push(['_setAllowLinker', true]);

_gaq.push(['_trackPageview']);

_gaq.push(['_trackEvent', 'IpadVideos', 'Play', 'Gone With the Wind']); 
```

当我进入谷歌的报告时，实时我没有任何人，对于我的事件操作，我第二天检查了，我什么都没有......

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:44:29.380

不，我已经使用它并且它对我有用。我在 iOS 和 android 中使用 phonegap 2.1。

请确保您已在 index.html 中添加了已编辑的 ga.js n 将域名设置为无。

`_gaq.push(['_setDomainName', 'none']);`

它应该工作。

GA 事件有时不会立即注册，因此请等待一段时间再检查。

# google-chrome - Chrome 插件与我的服务器交互

> ID：13686561
> 
> 赞同：1
> 
> 时间：2012-12-03T15:37:56.553
> 
> 标签：google-chrome

它花了很多天阅读数百种方法来帮助我做出我真正需要的东西。根本没有成功。

我需要的是这个：

1) 有一个按钮，该按钮仅在选项卡具有特定 url 时才有效。

2）点击它后，必须阅读页面的源代码，然后获取其中的一些片段以将它们发送到我的服务器页面，以便检查我的数据库的记录数（我假设使用 AJAX 和 javascript）。然后此页面应将其响应发送回扩展程序并填充弹出 html。

我知道看起来很容易，但如果不是扩展所需的代码，我需要工作流程。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:15:51.067

好的，所以您可以检查选定的选项卡及其网址：

```
chrome.tabs.getSelected(null,function(tab) {
  workWithUrl(tab.url);
});
...
function workWithUrl(url){
  if (url == ...
     ...
} 
```

为了能够检查这一点，您需要为“标签”添加权限

要处理页面源代码，请将其发送到 Web 服务并更改 popup.html：

```
var xhr = new XMLHttpRequest();
xhr.open("POST", "__server adress___", true);
//headers   
xhr.setRequestHeader("Content-Type", "application/json");

//response 
xhr.onreadystatechange = function() {
    if (xhr.readyState == 4) {

    //response from service to popup.html
    document.body.innerHTML = xhr.responseText;
    }
}

//process page here 

xhr.send(pageText); 
```

您还必须为服务器地址添加权限以显示，并且所有内容都应从 popup.js（或 html）执行。

# javascript - Raphael JS 文本沿路径

> ID：13686564
> 
> 赞同：8
> 
> 时间：2012-12-03T15:38:03.197
> 
> 标签：javascript, raphael, webfonts

我正在寻找一个概念的例子或一些确认。希望在应用程序上使用 Raphael JS，并希望能够像 Illustrator 等图形设计应用程序那样扭曲文本。

![跟随路径的扭曲文本示例](../Images/2d6ea4f15b838d4bd63f71775ef111fd.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-01T17:36:10.340

这是对 Chris Wilson 代码的改编，被重构为一个插入函数，并添加了一些特性：

*   **IE8 / VML 模式支持**和**Gecko/Firefox 支持**（通过定义旋转原点 - 没有这个，IE8 和 Firefox 会发疯地将文本扔到页面周围）
*   一个小调整，使 Gecko 浏览器（例如**Firefox**）中的文本不那么难看 - 没有这个，这些会任意增加字母间距
*   支持**手动定义的字体大小和字母间距**，以及动态“填充路径”大小和间距
*   支持手动**字距调整**（逐个字符微调字母间距）。路径上的文本通常会创建非常难看的字母空间；这允许您通过以下方式定义手动调整来修复这些问题：
    *   字符串中的数字位置，或者，
    *   性格，或者，
    *   字符对（应用于基于前一个字符的字符实例，例如下面的示例收紧 'ae' 对并加宽 'rn' 对）

## [JSBIN 演示](http://jsbin.com/UJIYAco/1/)

```
function textOnPath( message, path, fontSize, letterSpacing, kerning, geckoKerning) {
    // only message and path are required, other args are optional
    // if fontSize or letterSpacing are undefined, they are calculated to fill the path
    // 10% of fontSize is usually good for manual letterspacing

    // Gecko, i.e. Firefox etc, inflates and alters the letter spacing
    var gecko = /rv:([^\)]+)\) Gecko\/\d{8}/.test(navigator.userAgent||'') ? true : false;

    var letters = [], places = [], messageLength = 0;
    for (var c=0; c < message.length; c++) {
        var letter = paper.text(0, 0, message[c]).attr({"text-anchor" : "middle"});
        letters.push(letter);

        if (kerning) {
            if(gecko && geckoKerning) {
                kerning = geckoKerning;
            }
            var character = letter.attr('text'), kern = 0;
            var predecessor = letters[c-1] ? letters[c-1].attr('text') : '';

            if (kerning[c]) {
                kern = kerning[c];
            } else if (kerning[character]) {
                if( typeof kerning[character] === 'object' ) {
                    kern = kerning[character][predecessor] || kerning[character]['default'] || 0;
                } else {
                    kern = kerning[character];
                }
            }
            if(kerning['default'] ) {
                kern = kern + (kerning['default'][predecessor] || 0);
            }            
            messageLength += kern;
        }

        places.push(messageLength);
        //spaces get a width of 0, so set min at 4px
        messageLength += Math.max(4.5, letter.getBBox().width);
    }

    if( letterSpacing ){
        if (gecko) {
            letterSpacing = letterSpacing * 0.83;
        }
    } else {
        letterSpacing = letterSpacing || path.getTotalLength() / messageLength;
    }
    fontSize = fontSize || 10 * letterSpacing;

    for (c = 0; c < letters.length; c++) {
        letters[c].attr("font-size", fontSize + "px");
        p = path.getPointAtLength(places[c] * letterSpacing);
        var rotate = 'R' + (p.alpha < 180 ? p.alpha + 180 : p.alpha > 360 ? p.alpha - 360 : p.alpha )+','+p.x+','+p.y;
    letters[c].attr({ x: p.x, y: p.y, transform: rotate });
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T16:44:24.333

正如 Kevin Nielsen 所建议的，使用 path.getPointAtLength 并不太难：

```
path = paper.path("M50,100c40,-50 270,50 300,0").attr("stroke", "#CCC");
message = "I want to do this in RaphaelJS";

//since not every letter is the same width, get the placement for each letter 
//along the length of the string
//however, Raphael appears to group the width of letters into intervals of 4px,
//so this won't be perfect        
for (; c < message.length; c += 1) {
        letter = paper.text(0, 0, message[c]).attr({"text-anchor" : "start"});
    letters.push(letter);
    places.push(message_length);
    //spaces get a width of 0, so set min at 4px
    message_length += Math.max(4, letter.getBBox().width);
}

ratio = path.getTotalLength() / message_length;
fontsize = 10 * ratio;

for (c = 0; c < letters.length; c += 1) {
    letters[c].attr("font-size", fontsize + "px"); 
    p = path.getPointAtLength(places[c] * ratio);
    //there does appear to be a bug in p.alpha around 180\. Here's the fix
    letters[c].attr({ x: p.x, y: p.y, transform: 'r' + (p.alpha < 180 ? p.alpha + 180 : p.alpha)});
} 
```

[jsFiddle](http://jsfiddle.net/chriswilsondc/4UykA/)

# c++ - 注入我的代码后游戏卡顿

> ID：13686567
> 
> 赞同：5
> 
> 时间：2012-12-03T15:38:13.587
> 
> 标签：c++

我制作了要注入游戏的 .dll。在我按下 alt + s 后它会运行像素检测，但游戏会滞后。有没有可能修复它？

它检测到红色，按下鼠标 3 并在游戏中射击，但速度太慢，游戏滞后。

我试图删除 Sleep() 但它滞后更多。有什么建议么？

```
#include <windows.h>
#include <gdiplus.h>

const int SX = GetSystemMetrics(SM_CXSCREEN);
const int SY = GetSystemMetrics(SM_CYSCREEN);

const int SCREEN_X = (SX/2);
const int SCREEN_Y = (SY/2);
const COLORREF red=RGB(255, 0, 0);
const int Sound[]={SND_ALIAS_SYSTEMASTERISK,SND_ALIAS_SYSTEMEXCLAMATION};
const int State[]={MOUSEEVENTF_MIDDLEDOWN,MOUSEEVENTF_MIDDLEUP};

bool PixelCheck(HDC hdc)
{
    time_t stop=GetTickCount()+50;
    bool result=false;
    while(GetTickCount()<stop) if(GetPixel(hdc,SCREEN_X,SCREEN_Y) == red) result=true;
    Sleep(1);
    return result;
}

DWORD WINAPI ThreadFunction(PVOID pvParam)
{
    HDC hdc=GetDC(0);
    bool shotbot=false,isdown=false;
    INPUT ip;
    ip.type=INPUT_MOUSE;
    ip.mi.dx=0;
    ip.mi.dy=0;
    ip.mi.dwExtraInfo=0;
    while(true)
    {
        if(GetAsyncKeyState(0xA4) && GetAsyncKeyState(0x53))
        {
            shotbot=!shotbot;
            PlaySound((LPCSTR)Sound[shotbot],NULL,SND_ALIAS_ID);
        }
        Sleep(1);
        if((shotbot&&PixelCheck(hdc))||isdown)
        {
            ip.mi.dwFlags=State[isdown];
            SendInput(1,&ip,sizeof(INPUT));
            isdown=!isdown;
        }
    }
    ReleaseDC(0, hdc);
    return 0;
}

BOOL WINAPI DllMain(HINSTANCE hinstDLL,DWORD fdwReason,LPVOID lpvReserved) 
{
    if(fdwReason==DLL_PROCESS_ATTACH) SetThreadPriority(CreateThread(0,0,ThreadFunction,0,0,NULL),THREAD_PRIORITY_NORMAL);
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:44:25.103

You're doing nothing but call `GetPixel()` for 50 milliseconds. That's a 50 millisecond lag right there. What did you expect?

Removing the `Sleep` call just means you lag more often, and each time still for 50 milliseconds. That too is expected.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:45:42.150

几点：

1）您的 while 循环很紧凑且占用大量 CPU。如果您有支持它的 CPU，请将 __mm_pause 内在函数放在那里（`::YieldProcessor()`）或尝试`::SwitchToThread()`

2)`GetPixel`非常慢的 IIRC，可能有一种更快的方法可以从`HBITMAP`

# jquery - 如果用户通过移动设备导航，如何显示 HTML 模板？

> ID：13686575
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:38:31.807
> 
> 标签：jquery, mobile

我有两种类型的 HTML 文件。

第一种是针对计算机用户的。第二种是针对移动用户的。它是用 jQuery Mobile 编码的。

第一种是上传到服务器的。如果用户通过移动设备（iphone、三星等）导航，我该如何编写代码来显示移动设备的 HTML？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:46:55.730

使用 PHP，您可以使用[Mobile Detect](http://code.google.com/p/php-mobile-detect/)库。这很容易并且保持最新。也允许使用`isTablet()`和其他。

您可以执行以下操作：

```
include 'Mobile_Detect.php';
$detect = new Mobile_Detect();
if ($detect->isMobile()) {
  includeMobilePage();  // Any mobile device.
} else {
  includeDesktopPage();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:42:16.607

你可以根据宽度来做。像这样：

```
if($(window).width() < 480){
 window.location = "mobile.yoursite.com"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:44:51.117

If your site content is the same for both mobile and regular users, and you just need different layout, I suggest looking into CSS media queries and building a responsive design site.

For example, in your CSS:

```
@media screen and (min-width: 400px) and (max-width: 700px) { … } 
```

Any CSS directive you put within those brackets will only apply when the screen is at least `400px` wide, but less than `700px` wide.

This example and others can be found here: [http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-03T15:42:55.640

通常我在 php 中使用此代码，并将所有 jquery mobile 放在一个名为 smartphone 的文件夹中

```
<?php 
$mobile_browser = '0';
if (preg_match('/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone|android|ipad)/i', strtolower($_SERVER['HTTP_USER_AGENT']))) {
    $mobile_browser++;
}

if ((strpos(strtolower($_SERVER['HTTP_ACCEPT']),'application/vnd.wap.xhtml+xml') > 0) or ((isset($_SERVER['HTTP_X_WAP_PROFILE']) or isset($_SERVER['HTTP_PROFILE'])))) {
    $mobile_browser++;
}    

$mobile_ua = strtolower(substr($_SERVER['HTTP_USER_AGENT'], 0, 4));

$mobile_agents = array(
    'w3c ','acs-','alav','alca','amoi','audi','avan','benq','bird','blac',
    'blaz','brew','cell','cldc','cmd-','dang','doco','eric','hipt','inno',
    'ipaq','java','jigs','kddi','keji','leno','lg-c','lg-d','lg-g','lge-',
    'maui','maxo','midp','mits','mmef','mobi','mot-','moto','mwbp','nec-',
    'newt','noki','oper','palm','pana','pant','phil','play','port','prox',
    'qwap','sage','sams','sany','sch-','sec-','send','seri','sgh-','shar',
    'sie-','siem','smal','smar','sony','sph-','symb','t-mo','teli','tim-',
    'tosh','tsm-','upg1','upsi','vk-v','voda','wap-','wapa','wapi','wapp',
    'wapr','webc','winw','winw','xda ','xda-');

if (in_array($mobile_ua,$mobile_agents)) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['ALL_HTTP']),'OperaMini') > 0) {
    $mobile_browser++;
}

if (strpos(strtolower($_SERVER['HTTP_USER_AGENT']),'windows') > 0) {
    $mobile_browser = 0;
}

if ($mobile_browser > 0) {
   header("Location: smartphone/");
} 
```

# java - 如何托管 Java 应用程序？

> ID：13686578
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:38:42.413
> 
> 标签：java, web-applications, hosting

我正在我的 Windows 7 机器上用 java 制作一个应用程序，我想将此应用程序托管到 Internet。

我可以在互联网上使用与公共服务器相同的机器吗？java托管我还需要注意什么？

请让我详细了解，因为我不知道如何托管 java 应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:01:58.903

> 我可以在互联网上使用与公共服务器相同的机器吗？

如果您使用 Java 开发服务器和单独的客户端应用程序，那么您可以在自己的机器上托管服务器并分发客户端以从网站下载或使用小程序。

> java托管我还需要注意什么？

如果您使用您的家用机器，您需要注意保持它始终打开并拥有静态 IP 地址。如果您的 IP 不是静态的，那么您应该使用 no-ip.com 或相关服务进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:47:43.443

您需要使您的 Java`application`成为[`applet`](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html).

您需要将所有文件存储在服务器上，然后您可以[`<object>`](http://www.w3.org/TR/html401/struct/objects.html#edef-OBJECT)在 HTML 网页上放置标签，如下所示（假设您将应用程序转换为文件中的小程序`MyApplet.class`）：

```
<OBJECT codetype="application/java"
        classid="java:path/to/MyApplet.class"
        width="500" height="500">
    My Applet (this text will appear if the applet cannot be loaded).
</OBJECT> 
```

# haskell - 捕捉静态 javascript 文件位置

> ID：13686580
> 
> 赞同：0
> 
> 时间：2012-12-03T15:38:43.683
> 
> 标签：haskell, haskell-snap-framework

当您在抢劫模板中链接静态内容时，其搜索规则是什么？我遇到了一些与找不到 javascript 文件有关的问题。

因此，当提供的 URL 是 /index 时，将我的“myjavascript.js”和“jquery.js”粘贴到“static”目录的根目录中似乎是有效的。如果 URL 是 /something/index，那么它无法在“静态”目录的根目录中找到我的 javascript 文件。所以把它们放在“静态/东西”中可以修复它。无论如何，我最终将我的 javascript 文件的副本散布在各处，以便可以在不同的 URL 字符串下找到它们。所以，要么我使用了错误的位置，要么我的链接在模板中不正确。

给定链接`<script type="text/javascript" src="/js/jquery.js"> </script>`它会在哪里查找文件？怎么样 `src="jquery.js"`？

如果我将文件放在“static/js”下，我也会从 javascript 控制台收到这些类型的错误：

```
Resource interpreted as Script but transferred with MIME type text/html: "http://0.0.0.0:8000/js/jquery.js". new:6
Uncaught SyntaxError: Unexpected token < :8000/js/jquery.js:1
Resource interpreted as Script but transferred with MIME type text/html: "http://0.0.0.0:8000/js/base.js". new:6
Uncaught SyntaxError: Unexpected token < 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T18:33:42.887

这完全取决于您如何定义路线。我通常将我的 javascript 放在 static/js、resources/js 或 resources/static/js 中，但任何位置都可以。关键是您如何路由该目录。你可能有这样的路线：

（“静态”，serveDirectory “资源/静态”）

这意味着如果您在 resources/static 目录中有 jquery.js，那么它将在 url 中可用`http://localhost:8000/static/jquery.js`。这意味着您将放入`src="/static/jquery.js"`您的脚本标签。路由元组的第一部分确定 URL 路径，元组的第二部分确定本地文件系统上的目录。

# ruby-on-rails - Ruby on Rails：在 Rails 中创建用户配置文件

> ID：13686583
> 
> 赞同：1
> 
> 时间：2012-12-03T15:38:47.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用`devise`宝石。因此，我可以通过生成`devise views`. 我已经有一个模型`user`，它与`devise`用于身份验证的 gem 相关。现在，我想在单个页面中显示`user profile`或。`user information`我可以通过创建一个新的控制器来做到这一点。但是，这样做是有效的还是推荐的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:48:23.983

Ryan Bates 有一个[RailsCast](http://railscasts.com/episodes/196-nested-model-form-part-1)解释了如何做到这一点。本质上，您使用模型的嵌套属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T09:15:55.130

创建另一个控制器没有性能损失，它所做的只是帮助您组织代码。我是这样做的：

```
**controller**
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
  end

end

**routes**
  devise_for :users, 
  resources :users, :only => [:show] 
```

# javascript - 使用jQuery根据搜索关键字过滤表格数据

> ID：13686587
> 
> 赞同：1
> 
> 时间：2012-12-03T15:38:49.927
> 
> 标签：javascript, jquery, search, filter

我想使用 jQuery 完成一件简单的事情。我想过滤页面上的一些表格数据，并且同一页面顶部有一个搜索框。

在每次击键时，我都想隐藏与搜索字段不匹配的每一行。我只想处理客户端数据。我怎样才能做到这一点？

任何人都可以给出一些示例代码吗？就像，我怎样才能抓住每个击键并隐藏所需的元素？我想要这样的东西[。](http://developer.yahoo.com/yui/examples/datatable/dt_localfilter_clean.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:41:02.097

您需要使用`onkeydown`，然后抓住它`val()`，然后找出值是否`:contains`与您用来比较它的任何元素相匹配，然后`hide()`任何元素与此条件不匹配，瞧。

**HTML：**

```
<input type = "text" id="theText"> 
```

**JQuery 获取它的当前值并将其显示在控制台上：**

```
$('#theText').onkeydown(function(){

var x = $('#theText').val();

console.log(x);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:07:22.980

现在有点老了，但是我之前在一个项目中使用过这个插件，效果很好： [https ://github.com/riklomas/quicksearch](https://github.com/riklomas/quicksearch)

# android - android中的numberformatexception和edittext

> ID：13686589
> 
> 赞同：0
> 
> 时间：2012-12-03T15:38:56.423
> 
> 标签：android, android-edittext, numberformatexception

以下代码给了我 numberformatexception。你能告诉我在哪里放置exepcions或如何处理以下几行吗？logcat 告诉注释行有问题

```
public void zaplatiti(){
   EditText zbrojka = (EditText) findViewById(R.id.editText7);
   Float[] strings = new Float[allTexts.size()];
   Float zbroj=(float) 0;
   for(int i=0; i < allTexts.size(); i++){
       strings[i] = Float.valueOf(allTexts.get(i).getText().toString());////problem

   }
   for (int k=0;k<strings.length;k++){
       zbroj =zbroj+ strings[k];}

   }
   zbrojka.setText(String.valueOf(zbroj)+"KN"); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:40:11.967

```
for(int i=0; i < allTexts.size(); i++){
    try {
        strings[i] = Float.valueOf(allTexts.get(i).getText().toString());////problem
    }
    catch (NumberFormatException e) {
        // Code to execute if the entered value is not a number
    }
} 
```

这也可以通过只允许您的 EditTexts 具有数值来避免。这将迫使用户首先只输入一个数值，然后您不必捕获异常。但是你应该先检查输入的文本是否为空。

编辑：

为此，您必须`if`声明，但字符串值之间的正确比较是：

```
if ( mEditText.getText().toString().equals("String to compare with")){ ... } 
```

an 的“数值模式”`editText`可以在 XML 文件中设置为：

```
android:inputType = "number" 
```

其他有效的数值模式是`numberSigned`和`numberDecimal`。

因此，更改输入类型后，您的代码可能如下所示：

```
for(int i=0; i < allTexts.size(); i++){
    if (!allTexts.get(i).getText().toString().equals("")) {
        strings[i] = Float.valueOf(allTexts.get(i).getText().toString());////problem
    }
    else {
        // Code to execute if there is no entered value
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:43:09.183

您是否检查了 allTexts 数组类型？

# asp.net - 是否可以禁用 ASP.NET 客户端感知呈现？

> ID：13686590
> 
> 赞同：2
> 
> 时间：2012-12-03T15:39:07.413
> 
> 标签：asp.net, user-agent, .net-4.5

[作为ASP.NET Webforms Don't Render Postback JavaScript Function for Chrome/iOS](https://stackoverflow.com/questions/12326736/)的后续行动，我们继续让客户端（主要是 iOS 和 Android 上的移动设备）报告同样的问题，虽然这是一个相对简单的修复，但没有这似乎不是万能的。

在我们的应用程序范围内，我们认为假设一个支持 HTML、JavaScript 和 CSS 的客户端呈现页面是安全的。

有什么办法可以禁用此功能？我们是否可以更改默认浏览器功能而无需修改每个网络场节点上的 .browser 文件？...或其他一些解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:49:05.330

我没有时间做概念证明，但如果您可以在请求周期中及早修改用户代理标头，那么 ASP.NET 应该为该代理呈现。

不利的一面是请求标头是只读的，因此您必须使用反射来颠覆只读集合。

以下是如何更改请求中的标头的示例。 [HttpModule 添加请求头](https://stackoverflow.com/questions/4091157/httpmodule-to-add-headers-to-request)

我从经验中知道这不适用于所有 .net 框架——必要的代码从 1.1 更改为 2.0 并再次用于后续框架，因为该技巧要求调用非公共内部。

# matlab - 对矩阵中的第一列进行排序并返回第二列的先前对应值

> ID：13686591
> 
> 赞同：1
> 
> 时间：2012-12-03T15:39:09.157
> 
> 标签：matlab

我需要对 Job 矩阵的第一列进行排序，并在再次返回 Job 时返回第二列的相应值。例如，如果

```
Job=[8 19;5 11;18 23;10 26] 
```

我想要这个结果

```
Job=[5 11;8 19;10 26;18 23] 
```

这就是我编写起始步骤的方式

```
Pt=randint(10,1,[10,30])
d=randint(10,1,[5,20])
Job=[d,Pt] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:47:10.577

我不确定我是否正确解释了您的问题。如果我这样`sortrows`做了，工作是否：

```
 Job2 =   sortrows(Job)

 Job2 =

 5    11
 8    19
10    26
18    23 
```

并获得您键入的第二列

```
 Job2(:,2) 
```

# sql-server - 如何在镜像中处理从镜像切换到主体？

> ID：13686592
> 
> 赞同：1
> 
> 时间：2012-12-03T15:39:08.470
> 
> 标签：sql-server, mirroring

祝大家有美好的一天！

当镜像服务器成为主体时，有人可以告诉我如何处理事件吗？例如，我有：

*   S1 - 主服务器
*   S2 - 镜像服务器
*   W - 见证服务器
*   J1 - S1 上的一些工作
*   J2 - S2 上的一些工作

以及我需要的结果的不同情况：

1.  当 S1 失败并且 W 将 S2 切换为主体时，必须执行 J2。
2.  当我手动单击 S1 上的“故障转移”按钮时，S2 成为主体，必须执行 J2。
3.  当我手动单击 S2 上的“故障转移”按钮时（在解决 S1 上的问题后），S1 成为主体，必须执行 J1。

我找到了这篇文章（[Database Mirroring Automating Failover for Multiple SQL Server Databases](http://www.mssqltips.com/sqlservertip/1564/database-mirroring-automating-failover-for-multiple-sql-server-databases/)），它在 1 和 3 情况下工作得很好，但在 2 情况下它不起作用。据我了解，问题在于 S1 上发生了手动故障转移事件，而 S2 没有收到此事件。所以这种方法对我来说是不可接受的。

问题：如何正确处理将镜像数据库切换到主体以启动作业或执行脚本？

# regex - 正则表达式匹配 2 位冒号 2 位数字

> ID：13686597
> 
> 赞同：4
> 
> 时间：2012-12-03T15:39:28.427
> 
> 标签：regex

我需要一个正则表达式来验证已按以下格式输入的数据：22:33。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T15:44:42.507

使用 thjis 正则表达式`^\d{2}:\d{2}$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:41:52.763

由于您没有指定任何特定的正则表达式类型或它可能在输入中出现的位置；这是一个例子`[0-9][0-9]:[0-9][0-9]`。

如果您想将整个输入与恰好在该格式上匹配`^[0-9][0-9]:[0-9][0-9]$`..等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:42:18.203

`^\d\d:\d\d$`应该做的伎俩。

# c++ - reading data from a .txt file and saving to a vector

> ID：13686604
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:39:51.497
> 
> 标签：c++

This is a very simple question: How can I read .txt file and save to a vector using c++? I've 9 data stored in a txt file separated by tab and I want to save this to three different Vector (I'm using Eigen library). the 9 data are this:

```
 -468.01    198.74  -123.9  -471.67 195.41  46.878  -471.39 111.84  45.518 
```

Someone can help me? Thanks in advance!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:43:45.007

假设您要将它们存储到双精度向量中，并且您有一个 ifstream 对象，最简单的方法是：

```
std::ifstream ifs( "data.txt" );

std::vector< double > values;
double val;
while( ifs >> val )
   values.push_back( val ); 
```

有一个使用 istream_iterator 的替代方法：

```
std::copy( std::istream_iterator<double>(ifs), std::istream_iterator<double>(),
          std::back_inserter( values ) ); 
```

这将保存到单个向量中（不是 3 个）。标题说保存到向量中，问题的文本要求您保存到 3 个向量中。很难知道如何将数据格式化为 3 个向量。

当然，您可以将它们从文件中读取到单个向量中，并拥有一个包装类，使一个向量显示为 3 个子范围。

我已经为您提供了基础知识，请您自己尝试其余的编码。

# opencv - OpenCV可以用C++和C一起开发吗

> ID：13686606
> 
> 赞同：3
> 
> 时间：2012-12-03T15:39:59.503
> 
> 标签：opencv

可以同时使用 C++ 和 C 开发 OpenCV 吗？以下是我遇到此问题的程序。它是用 C 编码的并且运行良好。但是如果我使用

```
cv::Mat saveImage=cv::imread("D:\\opencvStudy\\opencv_test\\TaskDemo\\TaskDemo\\save.jpg");
cv::imshow("save",saveImage); 
```

取代

```
IplImage* saveImge =cvLoadImage("D:\\opencvStudy\\opencv_test\\TaskDemo\\TaskDemo\\save.jpg");
cvShowImage("saveimage",saveImge); 
```

我遇到了这个：

**TaskDemo.exe 中 0x75709673 处的未处理异常：Microsoft C++ 异常：内存位置 0x0039ea0c 处的 cv::Exception。**

以下是整个程序。希望有人能帮助我。非常感谢

```
#include<opencv/cv.h>
#include<opencv/highgui.h>
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/video/tracking.hpp"

#include <iostream>
#include <ctype.h>

CvPoint pt1 = cvPoint(0,0);
CvPoint pt2 = cvPoint(0,0);
bool is_selecting = false;

void cvMouseCallback(int mouseEvent,int x,int y,int flags,void* param)
{
switch(mouseEvent)
{
case CV_EVENT_LBUTTONDOWN:
    pt1 = cvPoint(x,y);
    pt2 = cvPoint(x,y);
    is_selecting = true;
    break;
case CV_EVENT_MOUSEMOVE:
    if(is_selecting)
        pt2 = cvPoint(x,y);
    break;
case CV_EVENT_LBUTTONUP:
    pt2 = cvPoint(x,y);
    is_selecting = false;
    break;
}
return;
 }

int main(int argc,char* argv[])
{
char img_path[80] = "D:\\opencvStudy\\pic\\boldt.jpg";
char save_path[80] = "save.jpg";
char* window = "img";

IplImage* img = cvLoadImage(img_path);  
IplImage* img_show = cvCloneImage(img);

cvNamedWindow(window,CV_WINDOW_AUTOSIZE);
cvSetMouseCallback(window,cvMouseCallback);

char text[80];
CvFont font;
cvInitFont(&font,CV_FONT_HERSHEY_PLAIN,1.0,1.0);
while(true)
{
    cvCopy(img,img_show);
    cvRectangle(img_show,pt1,pt2,cvScalar(255,255,255));
    sprintf(text,"roi = cvRect(%d,%d,%d,%d)",pt1.x,pt1.y,std::abs(pt2.x-pt1.x),std::abs(pt2.y-pt1.y));
    cvPutText(img_show,text,cvPoint(10,20),&font,cvScalar(0,0,255));

    cvShowImage(window,img_show);
    char key = cvWaitKey(10);
    if (key='r')
    {
        cvSetImageROI(img,cvRect(pt1.x,pt1.y,std::abs(pt2.x-pt1.x),std::abs(pt2.y-pt1.y)));
        cvSaveImage(save_path,img);
        cvResetImageROI(img);
        IplImage* saveImge = cvLoadImage("D:\\opencvStudy\\opencv_test\\TaskDemo\\TaskDemo\\save.jpg");

        cvShowImage("saveimage",saveImge);
        //cv::Mat saveImage=cv::imread("D:\\opencvStudy\\opencv_test\\TaskDemo\\TaskDemo\\save.jpg");
        //cv::imshow("save",saveImage);
    }
    else if(key==27)
        break;
}
cvReleaseImage(&img);
cvReleaseImage(&img_show);
return 0; 
```

}

**更新**

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/core/core.hpp"
#include <iostream>
#include <ctype.h>

using namespace std;
using namespace cv;
cv::Point pt1=Point(0,0);
cv::Point pt2=Point(0,0);
bool is_selecting=false;

static void onMouse(int mouseEvent,int x,int y,int flags,void* param)
{
switch(mouseEvent)
{
case CV_EVENT_LBUTTONDOWN://CV_EVENT_LBUTTONDOWN
    pt1 = Point(x,y);
    pt2 = Point(x,y);
    is_selecting = true;
    break;
case CV_EVENT_MOUSEMOVE:
    if(is_selecting)
        pt2 = Point(x,y);
    break;
case CV_EVENT_LBUTTONUP:
    pt2 = Point(x,y);
    is_selecting = false;
    break;
}
}

int main()
{
cv::Mat img=cv::imread("D:\\opencvStudy\\pic\\boldt.jpg");
cv::Mat img_show=img.clone();

cv::namedWindow("Task2",0);
cv::setMouseCallback("Task2",onMouse,0);

char text[80];
while(true)
{
    img.copyTo(img_show);
    cv::rectangle(img_show,pt1,pt2,cv::Scalar(255,255,255));
    sprintf(text,"roi = cvRect(%d,%d,%d,%d)",pt1.x,pt1.y,std::abs(pt2.x-pt1.x),std::abs(pt2.y-pt1.y));
    cv::putText(img_show,text,cvPoint(10,20),10,10,Scalar(0,0,255));
    cv::imshow("Task2",img_show);
    char key=cv::waitKey(10);
    if (key='r')
    {
        cv::Mat save=img(cv::Rect(pt1.x,pt1.y,std::abs(pt2.x-pt1.x),std::abs(pt2.y-pt1.y)));
        cv::imwrite("save.jpg",save);
        cv::Mat saveImage=cv::imread("D:\\opencvStudy\\opencv_test\\TaskDemo\\TaskDemo\\save.jpg");
        cv::imshow("save",saveImage);
    }
    else if(key==27)
        break;
}
return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T20:40:35.620

问题在于标题冲突。您不应该像这样同时包含旧的和新的：

```
#include<opencv/cv.h>
#include<opencv/highgui.h>
#include "opencv2/highgui/highgui.hpp" 
```

相反，**只包含新的标头**，如下所示：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp> 
```

原因是 C++ 头文件还包括 C 接口。

更新：

当然，如果您使用 cv::Mat，那么您也需要为此使用新功能。

cvCopy变成cv::copy，不需要cvReleaseImage，cvRectangle变成cv::rectangle，cvSetImageROI变成img(rect)，cvPoint变成cv::Point cvRect变成cv::Rect cvCloneImage变成img.clone()等等。 ..

或者您需要从 cv::Mat 到 IplImage 进行一些转换才能使用旧功能。SO处理来回转换有一些问题。

更新2：

最好全部删除，`cv::`因为您正在使用`using namespace cv`.

然后检查带有旧`cv`前缀的函数和变量，并删除这些前缀。（我仍然找到了一个：）`cvPoint`。

等一下，你正在使用`char text[80]`！

我认为这又是问题的根源。最好切换到

```
#include <sstream>
//...
stringstream ss;
ss << "Rect(" << pt1.x << ", " << ... << ")";
//...
putText(img_show, ss.str(), Point(10,20), FONT_HERSHEY_PLAIN, 1, Scalar(0, 0, 255) ); 
```

请注意，字体（我使用的）不是 10，而是**FONT_HERSHEY_PLAIN**（或其他一些 FONT_ 常量）。

# macos - QuickTime Player inside mediaelements.js - strange bug

> ID：13686611
> 
> 赞同：0
> 
> 时间：2012-12-03T15:40:13.840
> 
> 标签：macos, firefox, mediaelement.js

developers.

我正在使用 mediaelements.js 插件在网站上显示视频，我正在开发。所以问题是，当我在带有 MACOS 的 Mac 上使用 Firefox 3.6 打开 URL 时，QuickTime 播放器会显示在 mejs 播放器中： [http ://gyazo.com/70dc452527ac8e219497e7b193d88d17.png?1354549129](http://gyazo.com/70dc452527ac8e219497e7b193d88d17.png?1354549129)

如果有人能告诉我为什么会这样，我会很高兴。

提前致谢， Le Koki

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:38:33.727

看起来MEJS甚至没有被解雇。你实例化 MediaElementPlayer 了吗？

# php - 仅在 CodeIgniter IE 中丢失 PHP 会话

> ID：13686620
> 
> 赞同：0
> 
> 时间：2012-12-03T15:40:47.753
> 
> 标签：php, internet-explorer, codeigniter, session

我失去了与 CodeIgniter 的会话，并且仅在 Internet Explorer 中

我向我的第一个控制器发送 AJAX 请求：

> /控制器/方法1

在这个方法1中，我创建了我的会话

```
$this->session->set_userdata('user', 1); 
```

我在第一个 AJAX 请求 5 秒后发送第二个 AJAX 请求到另一个方法：

> /控制器/方法2

在这种方法中，我尝试显示会话用户的内容

```
var_dump($this->session->userdata('user')); 
```

但我得到了一个 bool(false) 的答案。

有关信息，会话库是自动加载的。在 Chrome 中，效果很好。

你有解决这个问题的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T20:29:49.463

Change the `'sess_cookie_name'` in config from `'ci_session'` to `'cisession'`and `sess_expiration` from 7200 to 84200\.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T05:59:14.730

我的解决方案类似于@sachin-prasad 的回答。仅删除值的下划线`sess_cookie_name`将不起作用。你也需要增加`sess_expiration`。

我在 IE 11 中对其进行了测试，并且会话运行良好。

# html - 具有多行的 Html 表

> ID：13686625
> 
> 赞同：1
> 
> 时间：2012-12-03T15:41:02.360
> 
> 标签：html, css, grid

我想扩展一列并在其中显示一组行。

我想要达到的目标：

![原始输出](../Images/150f5052d62779a6ab1928e5daa5d8c2.png)

到目前为止我所取得的成就

![我的尝试](../Images/d056652e536a04631922c0764c596eb1.png)

我的代码：

```
<table style="background-color:lightgreen"  border="1">
 <tr >
     <td>Id</td>
     <td>Name</td>
     <td>Col1</td>
     <td>Col2</td>
     <td>Group Related Column (value for each expanded cell)</td>
     <td>Col4</td>
 </tr>
 <tr >
     <td  rowspan="5" >#1</td> 
     <td  rowspan="5">AFSBEESS1</td>
     <td rowspan="5">
         <tr><td>[-] Group Name</td></tr>
         <tr><td>#1 in Group</td></tr>
         <tr><td>#2 in Group</td></tr>
         <tr><td>#3 in Group</td></tr>
     </td>
    <td rowspan="5">
         <tr><td>[-] Group Name</td></tr>
         <tr><td>#1 in Group</td></tr>
         <tr><td>#2 in Group</td></tr>
         <tr><td>#3 in Group</td></tr>
     </td>

     <td>x</td>
     <td>x</td>
 </tr> 
```

​</p>

我的小提琴输入：http: [//jsfiddle.net/yDUZg/78/](http://jsfiddle.net/yDUZg/78/)

执行相同操作的最佳表格格式是什么？

是否有一些插件可以实现轻松分组列的相同效果？

还是解决问题的更好方法？

在 ASP.NET 中做，但由于这是一个基本的东西，我将它标记为 HTML

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:57:59.990

你看过类似的东西 - [http://www.jankoatwarpspeed.com/post/2009/07/20/Expand-table-rows-with-jQuery-jExpand-plugin.aspx](http://www.jankoatwarpspeed.com/post/2009/07/20/Expand-table-rows-with-jQuery-jExpand-plugin.aspx)？

此插件允许您根据需要折叠/展开表格行。

你上面的 html 是错误的，因为你嵌套`tr`在`td`元素中。当您添加到一列时，您应该在接下来的行中`rowspan="x"`省略它。`x`例如，

```
<table>
<tr>
   <td rowspan="2">Funky</td>
   <td>Joy</td>
</tr>
<tr>
   <td>Fun</td>
</tr>
</table> 
```

您对行跨度的概念感到困惑 - [http://www.htmlcodetutorial.com/tables/index_famsupp_30.html](http://www.htmlcodetutorial.com/tables/index_famsupp_30.html)

现在，我已经创建了一个[JSFiddle](http://jsfiddle.net/xrnBK/)来满足您的要求。该示例高度专业化，可能无法以通用方式工作。在小提琴中，我删除了`rowspan`and`colspan`属性。当您对它们的工作感到满意时，请随意添加它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:44:34.673

如果您打算使用表格，那么为什么不将它们嵌套呢？您希望行出现在单元格中的位置，只需添加另一个表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:51:48.713

你可能可以用 JavaScript 做到这一点。我认为它看起来像这样：

```
<script type="text/javascript">
...
// You could use these in an event (inside some callback function)

$('tr.expand').style.visibility = 'hidden'
$('tr.expand').style.visibility = 'visible'

// OR you could use these...

$('tr.expand').show();
$('tr.expand').hide();
...
</script>

<!-- And then of course the group of <tr>'s you want to expand 
     on an event would all have the same class -->

<table>
...
<tr class="expand">
    <td>...</td>
</tr>
<tr class="expand">
    <td>...</td>
</tr>
...
</table> 
```

# svn - 将文件夹与 SVN 存储库合并

> ID：13686628
> 
> 赞同：2
> 
> 时间：2012-12-03T15:41:12.137
> 
> 标签：svn

我有一个文件夹，其中包含要与 SVN 存储库合并的子目录和文件。我怎样才能做到这一点？请注意，我要合并的文件夹中的文件可以位于不同的文件夹下。例如， `/folder/dir1/file.cpp`在文件夹中可能 `/src/dir2/file.cpp`在存储库中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:45:52.243

前言：你**真的要读**SVN Book！

因为从你对问题的描述不可能对初始状态做出明确的结论，所以我将描述这两种选择

# 两个版本的起点

你有：

*   `somefile of old version`
*   `patched somefile of old version`
*   更新`somefile of new version`

# 你知道的修订`somefile of old version`

设旧版本为**R1**

*   获取此修订：`svn co REPO@R1`如果缺少 WC，`svn up -r R1`如果现有 WC
*   在 WC 中替换`somefile of old version`为`patched somefile of old version`
*   获取其他更改：`svn up`. 出现在 R1 和 HEAD 之间的所有更改`somefile`将被合并到`patched somefile of old version`: 如果没有检测到冲突，则自动合并或使用合并工具手动解决冲突（如果配置了合并工具），结果`patched somefile of new version`将在 WC 中显示为 not- commited-local-change，你必须提交才能保存

# 你不知道修改`somefile of old version`

*   使用 OS diff，从`somefile of old version`和生成补丁`patched somefile of old version`
*   得到`somefile of new version`（见`svn up`或`svn co`）
*   尝试将p.1的补丁应用到`somefile of new version`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:15:15.670

如果其他答案中提出的解决方案由于某种原因确实不起作用，那么您可以尝试一下。虽然它更复杂，但我看不出它不应该起作用的原因：

*   将修订版 0 转储到文件中。
*   将修订转储到另一个文件中。
*   创建一个新的仓库并导入第一个转储。
*   签出那个新的 repos 头，替换文件并签入。
*   将第二个转储的修订版导入新的存储库。

这样你就可以在存储库中间注入一个额外的修订。我自己从来没有这样做过，但为什么不呢？只要确保你保留你的旧回购一段时间......你永远不知道......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:46:18.770

我会这样做：

将 repos 签出到工作副本中。然后用正确的文件移动（替换！）要合并的文件。由于这并不明显，因此您必须一个接一个地进行。完成后，您可以`svn diff`进行更改。

（从技术上讲，这不是合并，但我不确定您是否真的想要合并:)）

# javascript - 在 mousemove kineticJS 上更改半径

> ID：13686629
> 
> 赞同：1
> 
> 时间：2012-12-03T15:41:12.530
> 
> 标签：javascript, html5-canvas, kineticjs, mousemove

我想用我在画布上用 KineticJS 生成的形状创建一种 3D 效果。当我把它们拖到顶部时，需要变小，当我拖到底部时，它们需要变大。

我最接近我想要的是你在这里看到的 mousemove 事件

```
$.each(bubbles, function(){
var bubble = this;
bubble = new Kinetic.Circle({x:this.x, y:this.y, radius:this.r, fill:'#000000', draggable:true});
bubble.on("mousemove",function(){
    bubble.setRadius((bubble.getY()/5));
});
layer.add(bubble);

}); 
```

但这只会在结束拖动并再次单击形状时改变半径。

如果我可以在拖动时“实时”更改它们，那就太好了。

有谁知道如何解决这个问题？这是我的 JSFiddle [http://jsfiddle.net/ZsADd/1/](http://jsfiddle.net/ZsADd/1/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:52:27.780

我想你想要的是`bubble.on("dragmove")`。 [这是它的一个例子](http://jsfiddle.net/ZsADd/5/)。有关拖动事件的更多信息，请查看我在[此处](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-events-tutorial/)找到的文档。

> 要使用 KineticJS 检测拖放事件，我们可以使用`on()` 检测`dragstart`、`dragmove`或`dragend`事件的方法。该`on()` 方法需要事件类型和事件发生时要执行的函数。

# sql - PostgreSQL 索引性能问题

> ID：13686630
> 
> 赞同：1
> 
> 时间：2012-12-03T15:41:11.310
> 
> 标签：sql, postgresql, indexing

我有一个 PostgreSQL 数据库，其中包含很多行 ~160,000,000。数据库基本上是一组网络日志。有一个名为 time 的列，它是一个时间戳。基本上，对于每个独特的时间，网络上的每台机器都有一个日志。因此，有多行具有相同的时间戳。IE

```
time    ip             value
2:00    192.168.1.1    5
2:00    192.168.1.2    4
2:00    192.168.1.3    5
3:00    192.168.1.1    3
3:00    192.168.1.2    5
3:00    192.168.1.3    2
etc     etc 
```

现在我已经按时间为这个数据库创建了一个索引，因为这是我经常查询的字段。

```
i.e. select * from networklogs where time = '2:00' and value = 5 
```

在不使用索引的情况下，每个查询大约需要 2 分钟，因为查询必须扫描整个数据库。我创建了索引，以便我的查询将找到包含匹配时间的数据子集，然后根据此处的另一个值进行过滤，因此我希望查询会快得多。

但是现在查询似乎需要更长的时间......

这很奇怪，因为在 pgAdmin 中它解释了查询将使用时间索引，并且时间索引将数据从总共 160,000,000 项中缩小到约 800,000 项，然后查询上的过滤器将此数据缩小到 1,700 项。这个解释需要 17 毫秒，但是如果我运行查询则需要 3 分钟。

这应该比在 160,000,000 个项目上搜索两个匹配条件更快！

我无法弄清楚为什么它没有更快，我想知道即使 pgAdmin 将查询解释为使用时间索引，它是否在执行查询时实际使用它？

有没有人有任何想法或建议？

谢谢，詹姆斯

更新：我对以下命令运行了 EXPLAIN ANALYZE：

```
explain analyze select latitude,longitude from networklogs where value = 5 and time = '2:00' 
```

结果是：

```
"Bitmap Heap Scan on networklogs  (cost=13178.17..1488620.94 rows=848 width=19) (actual time=3507.923..278760.509 rows=33 loops=1)"
"  Recheck Cond: (time = '2:00'::timestamp without time zone)"
"  Rows Removed by Index Recheck: 38302021"
"  Filter: (value = 5)"
"  Rows Removed by Filter: 882873"
"  ->  Bitmap Index Scan on timeindex  (cost=0.00..13177.95 rows=530111 width=0) (actual time=695.771..695.771 rows=882906 loops=1)"
"        Index Cond: (time = '2:00'::timestamp without time zone)"
"Total runtime: 278764.148 ms" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:41:19.627

如果这些主要是您要执行搜索的参数，我建议在它们上创建一个多重索引。因为，在您的实际情况下，数据库准时有一个索引，因此它能够知道哪些行与此条件匹配，但是它必须从索引给定的所有不同位置获取它们，然后检查辅助条件。

```
CREATE INDEX time_and_value ON networklogs (time, value); 
```

使用这个索引，数据库不必为了检查另一个条件而获取数据，它会简单地获取它知道已经匹配搜索条件的数据。顺序当然很重要。

我看到您正在使用纬度和经度数据，也许使用该`point`类型会很好，因此您将能够使用 Postgres 默认提供的所有[几何运算符](http://www.postgresql.org/docs/9.2/static/functions-geometry.html)。这些类型的数据也可以被索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:54:45.787

PostgreSQL 有[EXPLAIN 和 EXPLAIN ANALYZE](http://wiki.postgresql.org/wiki/Using_EXPLAIN)来检查查询是如何运行的。PG Admin 很可能使用 EXPLAIN 来告诉您查询将如何运行；您可以使用 EXPLAIN ANALYZE 获得更准确的结果，它实际运行查询并从实际运行中生成统计信息。即使它按预期使用索引，您至少可以看到时间花在了哪里。

# clock - VDM++ 时钟时间

> ID：13686633
> 
> 赞同：0
> 
> 时间：2012-12-03T15:41:15.990
> 
> 标签：clock, vdm++

我在 vdm++ 中实现了一个随机数生成器。但我想种子是来自计算机的时钟时间。有谁知道是否有与 c++ 函数等效的 vdm++ 函数`time(NULL)`？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:15:20.070

不存在任何内置库来获取系统时间，`time(NULL)`但如果您使用 Overture IDE for VDM，很容易在 Java 中创建这样的函数并将其链接到您的模型。

Overture 用户指南有一个关于此的部分：[14.1 定义您自己的 Java 库以从 Overture 中使用。](http://overture.sourceforge.net/docs/OvertureIDEUserGuide.pdf)

您必须使用 java 类创建一个 jar 文件，该类为您提供系统时间，如下所示：

```
public class SystemTime
{
    public static Value time()
    {
        return new RealValue(System.currentTimeMillis());
    }
} 
```

及其 VDM 对应物：

```
class SystemTime

operations
public static time : () ==> real
time() == is not yet specified;

end SystemTime 
```

然后将 jar 和 vdm 文件放入项目中，如下所示： Project root/lib/systemtime.jar systemtime.vdmpp

现在您可以使用 VDM 操作 SystemTime`time() 来获取系统时间。

# security - 缺少 Windows 安全中心服务

> ID：13686634
> 
> 赞同：-2
> 
> 时间：2012-12-03T15:41:19.063
> 
> 标签：security, windows-7

我正在尝试修复已感染各种恶意软件的 Windows 7 机器。据我所知，我已经删除了所有这些，但我被最后一项任务难住了。

一个小虫子设法从 Windows 服务列表中删除了 Windows 安全中心服务。所以我无法启动它或设置为自动启动。目前我无法打开 Windows 防火墙或任何防病毒软件。

当我尝试时，安全中心会显示：

![安全中心形象](../Images/48418de5967101eee649e19b77e9e5f2.png)

有谁知道如何将其添加回服务列表，以便我可以将其设置为启动。我没有这台计算机的注册表备份（它不是我的）。

非常感谢

TT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:57:00.033

您永远无法真正确定您已从计算机中删除了所有恶意软件感染。可能有无数的注册表项/服务被弄乱了。

我的建议是擦除它并重新安装 Windows。这无疑将解决您的问题，然后您可以确定您已删除恶意软件。

# .net - 是否可以在不包含的情况下加载整个实体？

> ID：13686636
> 
> 赞同：1
> 
> 时间：2012-12-03T15:41:21.457
> 
> 标签：.net, entity-framework

如果没有循环，EF 可以自动（不包含）加载整个图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:16:58.350

没有办法实现这一点，要么明确指定要加载的数据，要么`Include`允许延迟加载按需加载相关实体。

# backbone.js - 使用 fetch 但不是 $.ajax() 时出现backbone.js 错误

> ID：13686638
> 
> 赞同：2
> 
> 时间：2012-12-03T15:41:26.310
> 
> 标签：backbone.js, backbone-model, backbone.js-collections

我在获取收藏时遇到了一些麻烦。我正在使用控制台的网络检查器来查看是否可以找出问题所在，我看到的唯一内容是请求有效负载的格式。

以`.fetch()`这种格式发送请求有效负载时：

```
query=this+is+my+query 
```

这会从我的服务器返回 400 Bad Request 状态。我已经使用以下方法进行了测试：

```
$.ajax({
contentType: 'application/json',
async : false,
type:'POST',
url: '/search',
data: JSON.stringify({"query":"this is my query"}),
dataType: 'json',
success: function(data) {
    alert('yup');
},
error: function(data) {
    alert('nope');
}}); 
```

它按预期返回我的数据。在这种情况下，请求有效负载采用以下格式：

```
{"query":"enterprise search is gonna rock","scope":null} 
```

我试过用我的 fetch 传递标题：

```
my_results.fetch({data:{"query":"this is my query"}, type: 'POST', dataType: 'json', contentType: 'application/json'}); 
```

这是我的模型和集合的样子：

```
EnterpriseSearch.Result = Backbone.Model.extend(); 
EnterpriseSearch.Results = Backbone.Collection.extend({     
  model: EnterpriseSearch.Result,
  url: "/search"
}); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:05:32.157

尝试`data: JSON.stringify({"query":"this is my query"})`在您的 fetch 选项中使用，就像您在使用`$.ajax`. jQuery 将默认`application/x-www-form-urlencoded`用于表单数据。

# javascript - d3js在另一个标签内添加标签

> ID：13686639
> 
> 赞同：0
> 
> 时间：2012-12-03T15:41:30.793
> 
> 标签：javascript, d3.js, data-visualization

我想像这样在 html 中创建一个图例：

```
<li><span style="background-color:#n;"></span> Label</li> 
```

但输出是：

```
<li>Label <span style="background-color:#n;"></span></li> 
```

这是我的代码：

```
d3.select("#myid").selectAll("li")
.data(dataset)
.enter().append("li")
.text(function(d) {return d;})
.insert("span")
.attr('style', function(d, i) {return "background-color:" + color}); 
```

几点建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:35:01.473

好的，最后我用 css float 修复了@Asad 代码的左端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:46:19.853

只需在文本前插入跨度：

```
d3.select("#myid").selectAll("li")
.data(dataset)
.enter()
.append("li")
.text(function(d) {return d;})
.insert("span", ":first-child")
.attr('style', function(d, i) {return "background-color:" + color}); 
```

# c# - 从回调中获取 oauth_verifier

> ID：13686640
> 
> 赞同：3
> 
> 时间：2012-12-03T15:41:36.927
> 
> 标签：c#, oauth, verification

我一直在寻找这个问题的答案。基本上，我正在创建一个 C# 应用程序，它（在它的第一个化身中）将使用使用 OAuth 1.0a 的 Projectplace API 进行身份验证。它目前将 oauth_verifier 返回到地址栏，但是当我使用该`var response = request.GetResponse();`方法时，它首先返回我作为授权的一部分发送的`oauth_token`and 。`oauth token_secret`

也许我误解了这个过程的工作方式，但我已经阅读了那里的每一个答案，似乎没有一个答案能解决这个问题。在加载回调 URL 后，在身份验证页面上输入我的用户名和密码后，您是否必须或是否可以从地址栏（或其他任何可以获得的地方）提取验证码？

我相信 OAuth1.0a 需要验证码来检索访问令牌，我找不到一种简单的方法来提取验证码。

我真的很感激任何帮助，这让我发疯了！

2012 年 3 月 12 日更新

感谢您的答复！

本质上，我是在下面发送此初始请求后尝试从 oauth 提供程序检索 oauth_verifier 的客户端，我的下一步是授权然后检索验证程序。我尝试了以下，希望如你所建议的那样，就像在这里的深处游泳:)

```
//Generate string for initiation request.
 requestUri.AppendFormat("?oauth_consumer_key={0}&", consumerKey);
 requestUri.AppendFormat("oauth_nonce={0}&", nonce);
 requestUri.AppendFormat("oauth_timestamp={0}&", timeStamp);
 requestUri.AppendFormat("oauth_signature_method={0}&", "HMAC-SHA1");
 requestUri.AppendFormat("oauth_version={0}&", "1.0");
 requestUri.AppendFormat("oauth_signature={0}", signature);
 var request = (HttpWebRequest)WebRequest.Create(new Uri(requestUri.ToString()));
 request.Method = WebRequestMethods.Http.Get;
 var response = request.GetResponse();
 var queryString = new StreamReader(response.GetResponseStream()).ReadToEnd();
 var parts = queryString.Split('&');
 var token = parts[1].Substring(parts[1].IndexOf('=') + 1);
 var tokenSecret = parts[0].Substring(parts[0].IndexOf('=') + 1);
 var queryString2 = String.Format("oauth_token={0}", token);

//AUTHORIZE WITH CREDENTIALS FROM USER.
 var authorizeUrl = "https://api.projectplace.com/authorize?" + queryString;
 Process.Start(authorizeUrl);`

//TRY AND READ VERIFICATION STRING AFTER AUTHORIZATION REDIRECT`
 String oauthVerifier = HttpContext.Current.Request.QueryString["oauth_verifier"]; 
```

不幸的是，一旦我这样做了，我似乎无法返回一个查询字符串，显示我在地址栏中显示的字符串中清楚地看到的 oauth_verifier。（是的，这是一种非常新颖的描述方式，我正在学习代码以及 OAuth :P）。

感谢您一直以来的帮助。我试图运行上面的，但它只是说“对象引用未设置为对象的实例。”。

另外，如果我尝试使用以前用于获取查询字符串/响应的代码？从使用以下几行的启动请求中，querystring3 只是返回为空白......真是令人沮丧！:)

`var queryString3 = new StreamReader(response.GetResponseStream()).ReadToEnd();` `var parts3 = queryString3.Split('&');`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:51:11.570

我将假设“在地址栏中”是指 oauth_verifier 通过重定向 URL 中的查询字符串参数从 ProjectPlace 服务器传递到您的站点。为了在您的 C# 服务器端代码中阅读此内容，您将使用以下内容（我为此解决方案修改了您的示例代码）：

```
 requestUri.AppendFormat("?oauth_consumer_key={0}&", consumerKey);
 requestUri.AppendFormat("oauth_nonce={0}&", nonce);
 requestUri.AppendFormat("oauth_timestamp={0}&", timeStamp);
 requestUri.AppendFormat("oauth_signature_method={0}&", "HMAC-SHA1");
 requestUri.AppendFormat("oauth_version={0}&", "1.0");
 requestUri.AppendFormat("oauth_signature={0}", signature);
 var request = (HttpWebRequest)WebRequest.Create(new Uri(requestUri.ToString()));

 //Note: this is unnecessary - GET is the default
 request.Method = WebRequestMethods.Http.Get; 
 //By casting to HttpWebResponse you get access to the QueryString property
 var response = request.GetResponse() as HttpWebResponse;
 var oauthVerifier = response.QueryString["oauth_verifier"];

//The response stream contains the HTTP response body, 
//which will not contain the URL to which the redirect is sent
//I'm not sure if there is anything there that you will need
var responseBody = new StreamReader(response.GetResponseStream()).ReadToEnd();

 //AUTHORIZE WITH CREDENTIALS FROM USER.  -- Not sure what this section is doing
 var queryString = string.Format("oauth_token={0}", oauthVerifier);
 var authorizeUrl = "https://api.projectplace.com/authorize?" + queryString;
 Process.Start(authorizeUrl); 
```

# java - 更改 JXTable 中的当前选择不起作用？

> ID：13686641
> 
> 赞同：1
> 
> 时间：2012-12-03T15:41:41.763
> 
> 标签：java, swing, jxtable

我有一个 JXTable，用户需要在其中引入数据，然后保存。唯一的问题是，用户必须在保存之前取消选择最后编辑的单元格。如果他们不这样做，则不会保存该单元格的数据。

我唯一想到的就是在保存之前自动更改当前选择。这是我尝试过的：

```
table.getSelectionModel().setSelectionInterval(0, 0);
table.getColumnModel().getSelectionModel().setSelectionInterval(0, 0); 
```

或者

```
table.getSelectionModel().setLeadSelectionIndex(0);
table.getColumnModel().getSelectionModel().setLeadSelectionIndex(0); 
```

两者似乎都不起作用，但这是我发现的唯一两种方法。

谁能告诉我如何正确执行此操作或提出替代方案以让它保存最后一个单元格中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:56:38.097

我假设用户在[`JButton`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JButton.html)希望保存数据时单击了另一个组件 ( )。如果您有[`JXTable`](http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/JXTable.html)对该事件发生时间的引用，则可以在其中添加以下代码：

```
if (table.isEditing()) {
    table.getCellEditor().stopCellEditing();
} 
```

应该保存模型的[`stopCellEditing()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#getCellEditor%28%29)状态并允许您保存所有内容，包括当前选择/编辑的单元格。

* * *

**编辑**：正如[**kleopatra**](https://stackoverflow.com/users/203657/kleopatra)指出的那样，处理此问题的默认（更好！）方法是通过 JTable 组件的 client 属性：

```
table.putClientProperty("terminateEditOnFocusLost", Boolean.TRUE); 
```

因为`JXTable`这应该已经设置，这表明您的 UI 处理保存功能的方式不包括将焦点从表格移开。所以本质上，当你的“保存”事件被触发时，你最好改变焦点。

# java - 使用带有 JGit 的密钥安全地访问 Git 存储库

> ID：13686643
> 
> 赞同：16
> 
> 时间：2012-12-03T15:41:46.003
> 
> 标签：java, git, ssh, jsch, jgit

我正在使用[JGit](http://www.jgit.org/)访问远程 Git 存储库，我需要为此使用[SSH](http://en.wikipedia.org/wiki/Secure_Shell)。JGit 使用[JSch](http://www.jcraft.com/jsch/)提供安全访问。但是，我不确定如何为 JGit 设置密钥文件和知道主机文件。我尝试过的如下。

通过继承[JSchConfigSessionFactory](http://download.eclipse.org/jgit/docs/jgit-2.0.0.201206130900-r/apidocs/org/eclipse/jgit/transport/JschConfigSessionFactory.html)创建了[SshSessionFactory](http://download.eclipse.org/jgit/docs/jgit-2.0.0.201206130900-r/apidocs/org/eclipse/jgit/transport/SshSessionFactory.html)的自定义配置：

```
public class CustomJschConfigSessionFactory extends JschConfigSessionFactory {
    @Override
    protected void configure(OpenSshConfig.Host host, Session session) {
        session.setConfig("StrictHostKeyChecking", "yes");
    }
} 
```

在我访问远程 Git 存储库的课程中，执行了以下操作：

```
CustomJschConfigSessionFactory jschConfigSessionFactory = new CustomJschConfigSessionFactory();

JSch jsch = new JSch();
try {
    jsch.addIdentity(".ssh/id_rsa");
    jsch.setKnownHosts(".ssh/known_hosts");
} catch (JSchException e) {
    e.printStackTrace();  
}
    SshSessionFactory.setInstance(jschConfigSessionFactory); 
```

我不知道如何将此 JSch 对象与 JGit 相关联，以便它可以成功连接到远程存储库。当我尝试使用 JGit 克隆它时，出现以下异常：

```
org.eclipse.jgit.api.errors.TransportException: git@git.test.com:abc.org/test_repo.git: reject HostKey: git.test.com
at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:137)
at org.eclipse.jgit.api.CloneCommand.fetch(CloneCommand.java:178)
at org.eclipse.jgit.api.CloneCommand.call(CloneCommand.java:125)
at GitTest.cloneRepo(GitTest.java:109)
at GitTest.main(GitTest.java:223)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.eclipse.jgit.errors.TransportException: git@git.test.com:abc.org/test_repo.git: reject HostKey: git.test.com
at org.eclipse.jgit.transport.JschConfigSessionFactory.getSession(JschConfigSessionFactory.java:142)
at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:121)
at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.<init>(TransportGitSsh.java:248)
at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:147)
at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:136)
at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:122)
at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1104)
at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:128)
... 9 more
Caused by: com.jcraft.jsch.JSchException: reject HostKey: git.test.com
at com.jcraft.jsch.Session.checkHost(Session.java:748)
at com.jcraft.jsch.Session.connect(Session.java:321)
at org.eclipse.jgit.transport.JschConfigSessionFactory.getSession(JschConfigSessionFactory.java:116)
... 16 more 
```

我已将 git.test.com 条目添加到我的`/etc/hosts`文件中。我使用相同的代码通过 http url 访问 git repo，因此代码运行良好。这是失败的关键处理部分。关于如何处理这个的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-12T13:53:54.147

您需要覆盖`getJSch`自定义工厂类中的方法：

```
class CustomConfigSessionFactory extends JschConfigSessionFactory
{
    @Override
    protected JSch getJSch(final OpenSshConfig.Host hc, FS fs) throws JSchException {
        JSch jsch = super.getJSch(hc, fs);
        jsch.removeAllIdentity();
        jsch.addIdentity( "/path/to/private/key" );
        return jsch;
    }
} 
```

打电话`jsch.removeAllIdentity`很重要；没有它似乎行不通。

一个警告：我用 Scala 编写了上面的代码，然后将它翻译成 Java，所以它可能不太正确。原来的Scala如下：

```
class CustomConfigSessionFactory extends JschConfigSessionFactory
{
    override protected def getJSch( hc : OpenSshConfig.Host, fs : FS ) : JSch =
    {
        val jsch = super.getJSch(hc, fs)
        jsch.removeAllIdentity()
        jsch.addIdentity( "/path/to/private/key" )
        jsch
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-11T17:30:29.670

Jsch 不喜欢采用散列格式的 known_hosts 文件——它必须符合以下生成的格式：

`ssh-keyscan -t rsa hostname >> ~/.ssh/known_hosts`

例如

```
<hostname> ssh-rsa <longstring/longstring> 
```

不是：

```
 |1|<hashed hostname>= ecdsa-sha2-nistp256 <hashed fingerprint>= 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-05T07:55:44.620

设法找到问题。服务器端的公钥与通常的 id_rsa.pub 名称不同，而我这边的私钥是 id_rsa。默认情况下，JSch 期望公钥与私钥同名并加上 .pub 后缀。使用具有通用名称的密钥对（例如：private = key_1 和 public = key_1.pub）解决了这个问题。

# mysql - mySQL 根据重复日期生成行

> ID：13686645
> 
> 赞同：0
> 
> 时间：2012-12-03T15:41:59.863
> 
> 标签：mysql, date, recurrence

我有一个 mySQL 表，其中包含事件、事件详细信息、事件日期和重复值 - 这是事件在几天内重复发生的频率。

例如日期：2012-12-03，重复：7 - 每 7 天重复一次。

我现在希望按日期搜索，如果搜索是 2012-12-03、2012-12-10、2012-12-17、2012-12-24...+ 7天。

目前，搜索是针对特定日期的：

```
SELECT 
    id, 
    title, 
    venue, 
    date_format(datetime, '%I:%i%p') AS time 
from 
    bt_db_eventcal 
WHERE 
    DATE(datetime) = '" . $date . "' 
```

任何人都可以帮助扩展它以根据重复返回行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:45:43.737

它真的是一个简单的数学。您从搜索日期中减去保存的日期，并通过重复来修改该值。如果值为 0 则很好。

# php - 执行php文件时出错

> ID：13686656
> 
> 赞同：0
> 
> 时间：2012-12-03T15:42:48.283
> 
> 标签：php, windows

我正在尝试`.php`在命令提示符下执行文件。我已经安装了 PHP5。但是当我执行我得到错误：

```
Unable to find wrapper(https) 
```

我用谷歌搜索并知道我丢失了`php_openssl.dll`文件。但是我还没有安装xampp。让我知道我是否需要安装 xampp 来获得这个？或进行任何其他设置以消除此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:47:40.427

在 php.ini 文件中找到这一行：

`;extension=php_openssl.dll`

...并取消注释（删除前面的分号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:55:20.763

您需要安装**wampserver**或**xampp**之类的应用程序来运行 php 文件，然后将`.php`文件**放入**`/www/youapplicationfolder/yourphpfile`wampserver或**xampp**。然后尝试在您喜欢的浏览器中运行您的文件并在地址栏中输入 [这不是链接]http://localhost/yourapplicationfolder/yourphpfile.php。嗯！**`/htdocs/youapplicationfolder/yourphpfile`**

# sorting - Groovy 自定义按值对地图进行排序

> ID：13686659
> 
> 赞同：20
> 
> 时间：2012-12-03T15:42:55.020
> 
> 标签：sorting, groovy, map

我有一张地图，例如

```
m=[
     "james":"silly boy",
     "janny":"Crazy girl",
     "jimmy":"funny man",
     "georges":"massive fella"
]; 
```

我想按它的值对这个地图进行排序，但**忽略大小写**（这就是为什么需要自定义排序的原因）。因此，我认为我必须使用闭包来实现自定义排序。但我是 Groovy 的新手，一直在努力完成这个非常简单的任务！

期望的结果是：

```
["janny":"Crazy girl", "jimmy":"funny man", "georges":"massive fella", "james":"silly boy"] 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-03T15:58:57.400

要以不区分大小写的方式排序，请使用

```
m.sort { it.value.toLowerCase() } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-03T15:47:22.643

假设你的意思是你想对价值进行排序，你可以这样做：

```
Map m =[ james  :"silly boy",
         janny  :"Crazy girl",
         jimmy  :"funny man",
         georges:"massive fella" ]

Map sorted = m.sort { a, b -> a.value <=> b.value } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-10-10T08:59:08.330

如果有人正在寻找如何使其在 Jenkins 管道脚本中工作，您将必须为此创建一个带有`@NonCPS`注释的单独方法：

```
@NonCPS
def getSorted(def mapSizeMap){
    mapSizeMap.sort(){ a, b -> b.value <=> a.value }
} 
```

然后从管道脚本中调用它。

`def sortedMapZoneMap = getSorted(mapZonesMap)`

您当然可以在顶部应用“区分大小写”的逻辑。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-26T08:22:14.863

顺便说一句，这里的代码显示了使用和不使用 toLowerCase() 的不同排序：

```
Map m =[ james  :"silly boy",
         janny  :"crazy girl",
         jimmy  :"Funny man",
         georges:"massive fella" ]
Map sorted = m.sort { a, b -> a.value <=> b.value }
println sorted
sorted = m.sort { a, b -> a.value.toLowerCase() <=> b.value.toLowerCase() }
println sorted 
```

并将打印：

```
[jimmy:Funny man, janny:crazy girl, georges:massive fella, james:silly boy]
[janny:crazy girl, jimmy:Funny man, georges:massive fella, james:silly boy] 
```

# linq - HtmlAgilityPack 与 linq 一起使用以选择节点

> ID：13686661
> 
> 赞同：1
> 
> 时间：2012-12-03T15:43:00.023
> 
> 标签：linq, html-agility-pack

我基本上尝试使用 htmlagilitypack 解析一段 html 并使用 linq 将其放入对象中，以便与我的其他代码一起使用。我有以下两个代码片段，其中 #1 使用 linq 并且不起作用，但 #2 使用 for 循环并且可以工作。

除了使用 linq 之外，两段代码几乎相同。从这个意义上说，我想我在 linq 中错过了一些阻止我让它工作的东西？

感谢是否有人可以帮我看看

1.  使用 linq - 它不起作用。res 最终为空

    ```
    res = from li in ul.Elements("li").Where(i => GetClass(i) != "titles-h")
    select new Post()
    {
        title = li.Element("h2").InnerText,
        // ....
    }; 
    ```

2.  没有 linq - 它有效

    ```
    foreach (var li in ul.Elements("li"))
    {
        if (GetClass(li) != "titles-h")
            ress.Add(new Post()
              {
                  title = li.Element("h2").InnerText,
                 // ....
              });
    } 
    ```

GetClass 的实现

```
static string GetClass(HtmlNode n)
{
    if (n.Attributes["class"] != null)
        return n.Attributes["class"].Value;
    else
        return "";
} 
```

# c# - 在 windows phone7 c# 上使用 JSON.net 解析 json

> ID：13686667
> 
> 赞同：1
> 
> 时间：2012-12-03T15:43:13.133
> 
> 标签：c#, json, windows-phone-7, parsing, json.net

我是 WP 的新手开发人员。我在解析 json 数据时遇到了一些问题。我从网站上获取它并使用 JSON.Net 进行解析。

JSON数据示例：

{"openfooty":{"version":"1.0","re​​sponse":{"status":"ok"},"teams":{"team":[{"id":"660","cdata" :"阿森纳"},{"id":"661","cdata":"切尔西"},{"id":"662","cdata":"曼联"},{"id":"663 ","cdata":"利物浦"},{"id":"664","cdata":"纽卡斯尔联队"},{"id":"665","cdata":"阿斯顿维拉"},{ "id":"667","cdata":"富勒姆"},{"id":"670","cdata":"南安普顿"},{"id":"674","cdata":"埃弗顿"},{"id":"675","cdata":"托特纳姆热刺队"},{"id":"676","cdata":"曼城"},{"id":"677","cdata":"诺维奇城"},{"id ":"678","cdata":"西布罗姆维奇"},{"id":"683","cdata":"桑德兰"},{"id":"684","cdata":"西Ham United"},{"id":"686","cdata":"维冈竞技"},{"id":"688","cdata":"Reading"},{"id":"690" ,"cdata":"斯托克城"},{"id":"702","cdata":"皇后公园巡游者队"},{"id":"738","cdata":"斯旺西城"}] }}}},{"id":"676","cdata":"曼彻斯特城"},{"id":"677","cdata":"诺维奇城"},{"id":"678"," cdata":"西布罗姆维奇"},{"id":"683","cdata":"桑德兰"},{"id":"684","cdata":"西汉姆联队"},{" id":"686","cdata":"维冈竞技"},{"id":"688","cdata":"阅读"},{"id":"690","cdata":"斯托克城市"},{"id":"702","cdata":"皇后公园巡游者队"},{"id":"738","cdata":"斯旺西市"}]}}}},{"id":"676","cdata":"曼彻斯特城"},{"id":"677","cdata":"诺维奇城"},{"id":"678"," cdata":"西布罗姆维奇"},{"id":"683","cdata":"桑德兰"},{"id":"684","cdata":"西汉姆联队"},{" id":"686","cdata":"维冈竞技"},{"id":"688","cdata":"阅读"},{"id":"690","cdata":"斯托克城市"},{"id":"702","cdata":"皇后公园巡游者队"},{"id":"738","cdata":"斯旺西市"}]}}}{"id":"677","cdata":"诺维奇城"},{"id":"678","cdata":"西布罗姆维奇"},{"id":"683","cdata ":"桑德兰"},{"id":"684","cdata":"西汉姆联"},{"id":"686","cdata":"维冈竞技"},{"id" :"688","cdata":"阅读"},{"id":"690","cdata":"斯托克城"},{"id":"702","cdata":"女王公园巡游者"},{"id":"738","cdata":"斯旺西市"}]}}}{"id":"677","cdata":"诺维奇城"},{"id":"678","cdata":"西布罗姆维奇"},{"id":"683","cdata ":"桑德兰"},{"id":"684","cdata":"西汉姆联"},{"id":"686","cdata":"维冈竞技"},{"id" :"688","cdata":"阅读"},{"id":"690","cdata":"斯托克城"},{"id":"702","cdata":"女王公园巡游者"},{"id":"738","cdata":"斯旺西市"}]}}}{"id":"683","cdata":"桑德兰"},{"id":"684","cdata":"西汉姆联"},{"id":"686","cdata" :"维冈竞技"},{"id":"688","cdata":"Reading"},{"id":"690","cdata":"斯托克城"},{"id":" 702","cdata":"皇后公园巡游者"},{"id":"738","cdata":"斯旺西城"}]}}}{"id":"683","cdata":"桑德兰"},{"id":"684","cdata":"西汉姆联"},{"id":"686","cdata" :"维冈竞技"},{"id":"688","cdata":"Reading"},{"id":"690","cdata":"斯托克城"},{"id":" 702","cdata":"皇后公园巡游者"},{"id":"738","cdata":"斯旺西城"}]}}}690","cdata":"斯托克城"},{"id":"702","cdata":"皇后公园巡游者队"},{"id":"738","cdata":"斯旺西城" }]}}}690","cdata":"斯托克城"},{"id":"702","cdata":"皇后公园巡游者队"},{"id":"738","cdata":"斯旺西城" }]}}}

我需要解析球队名称，即“阿森纳”、“切尔西”等，最好使用他们的 ID 并存储在一个列表中。我制作的课程（使用[http://json2csharp.com/#](http://json2csharp.com/#)）是：

```
public class Response
{
public string status { get; set; }
}

public class Team
{
public string id { get; set; }
public string cdata { get; set; }
}

public class Teams
{
public List<Team> team { get; set; }
}

public class Openfooty
{
public string version { get; set; }
public Response response { get; set; }
public Teams teams { get; set; }
}

public class RootObject
{
public Openfooty openfooty { get; set; }
} 
```

我在cs页面中这样做：

```
 public class Loaddata
    {

        public  Loaddata()
        {

            if (NetworkInterface.GetIsNetworkAvailable())
            {
                WebClient proxy = new WebClient();
                proxy.DownloadStringCompleted += new DownloadStringCompletedEventHandler(proxy_DownloadStringCompleted);
                proxy.DownloadStringAsync(new Uri("http://api.openfooty.org/1.0/league.getTeams?api_key=4&league_id=8&format=json"));

            }

        }

     void  proxy_DownloadStringCompleted(object sender,DownloadStringCompletedEventArgs e)
        {
            if (e.Error != null) return;
            {

              var o = JObject.Parse(e.Result);

              var x= o["openfooty"].First.First["team"];
              string name = x.Value<string>();}} 
```

但我没有得到解析的数据。需要帮助！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:50:06.867

为什么要像`var x= o["openfooty"].First.First["team"];`声明所有类一样采用动态方式。

这行得通

```
 RootObject root = JsonConvert.DeserializeObject<RootObject>(e.Result); 
 var id = root.openfooty.teams.team[0].id; 
```

# iphone - iOS 6 中的界面方向检查

> ID：13686668
> 
> 赞同：-2
> 
> 时间：2012-12-03T15:43:20.340
> 
> 标签：iphone, objective-c, ios6

> **可能重复：**
> [iOS 6 shouldAutorotate：没有被调用](https://stackoverflow.com/questions/12775265/ios-6-shouldautorotate-is-not-being-called)

我需要一种方法来知道用户何时改变方向......

我努力了

```
-(BOOL) shouldAutorotate { //never called

UIInterfaceOrientation toInterfaceOrientation = [[UIDevice currentDevice] orientation];
if(toInterfaceOrientation == UIInterfaceOrientationPortrait)
    //a code here

return YES;
} 
```

我如何知道用户何时更改 iPad 的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:46:30.877

请记住在`info.plist`.

尝试使用

```
 - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration;
  - (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation; 
```

（在 iOS 6.0 中已弃用）

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:50:02.537

确保首先调用它：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

然后在这里跟踪方向变化：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    //your code here 
} 
```

此处的持续时间很重要，因为这是完成方向更改所需的时间。只有在这一点上，新的方向才会完全确定

# magento - Magento MatrixRate - 如何根据重量添加附加费？

> ID：13686670
> 
> 赞同：0
> 
> 时间：2012-12-03T15:43:34.860
> 
> 标签：magento, webshop

我正在使用 WebShopApps - MatrixRates 来计算我的运费，而且效果很好。我只需要根据重量添加超过 50 公斤的运费。为此，我需要编辑 MatrixRate 的模型，但我对 magento 不太满意。有没有人有任何建议/建议？

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:56:42.330

为什么需要编辑模块的模型？您只需在导入 CSV 中添加一个最小重量为 50000 的行项目（假设您使用克），并将附加费包含在该重量增量的运费中以及任何高于它的运费中。

我已经包含了我的一个 Matrix Rates 表的屏幕截图，如果我需要按照您的建议进行操作，我只需添加一个`Weight >=`50000 的行。

![在此处输入图像描述](../Images/de16d89612c76601311e180d805938ea.png)

# ruby-on-rails - 导入数据时如何跳过特定验证？

> ID：13686671
> 
> 赞同：1
> 
> 时间：2012-12-03T15:43:37.213
> 
> 标签：ruby-on-rails, ruby, activerecord

导入数据时如何跳过特定的模型验证？

例如，假设我有这个模型：

```
class Account
  validates :street_address, presence: true
end 
```

通常情况下，我不希望没有地址的帐户被保存，但我还要转换旧系统中的大量数据，而那里的许多帐户没有地址。

我的目标是我可以将旧帐户添加到新数据库中，但是将来在编辑这些帐户时，必须添加街道地址。

## 澄清

正如我所说，我想跳过**特定**的验证；其他人应该仍然运行。例如，根本不应该将没有帐号的帐户加载到新系统中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T15:43:37.213

这应该有效：

```
class Account
  attr_accessor :importing
  validates :street_address, presence: true, 
    unless: Proc.new { |account| account.importing }
end

old_system_accounts.each do |account|
  # In the conversion script...
  new_account = Account.new
  new_account.importing = true   # So it knows to ignore that validation
  # ... load data from old system
  new_account.save!
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:13:08.270

如果您只打算进行一次转换（即，在导入旧数据后，您不需要再次执行此操作），您可以在保存导入的记录时[跳过验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html#skipping-validations)，而不是修改您的应用程序以支持它.

```
new_account.save validate: false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T18:04:37.197

注意

```
account.update_attribute(:street_address, new_address) 
```

也将跳过验证。#update_attributes（注意“s”）运行验证，而 update_attribute（单数）不运行。

# model-view-controller - 从表中设置操作链接文本

> ID：13686675
> 
> 赞同：1
> 
> 时间：2012-12-03T15:43:40.740
> 
> 标签：model-view-controller, actionlink, renderaction

我正在开发一个 MVC 3.0 应用程序。我有一个来自我的数据库的人员列表，他们每个人都与数据库中另一个名为 area 的表有关系。

人DTO

```
 public class Person
{
    int PersonId {get; set;}
    string Name { get; set;}
    int AreaId {get;set;}
} 
```

现在在我的 MVC 视图中，我想使用操作链接创建指向区域视图的链接，并且我希望链接文本是区域名称，而不是区域 ID。我的标记如下所示：

```
@foreach (var item in Model)
    {
        <tr>            
            <td>@Html.ActionLink(item.Name, "Edit", new { item.PersonId })</td>
            <td>@Html.ActionLink(item.AreaId.ToString(), "ListArea", "Area", new { item.AreaId}, null)</td>
            <td>@using (Html.BeginForm("Delete", "Person"))
                { 
                @Html.Hidden("PersonId", item.PersonId)
                <input type="submit" value="Delete" />
                }
            </td>
        </tr>
    } 
```

这是我想将**item.AreaId.ToString()**更改为区域名称的第二个 ActionLink。我正在考虑添加一个：

```
Html.RenderAction("AreaName", "Area", new {item.AreaId}) 
```

在操作方法中，我将从数据库中检索区域名称。

我究竟做错了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:03:18.687

如果我的理解是正确的，为什么不将操作链接文本更改为获取区域名称，如下所示：

```
@Html.ActionLink(item.AreaINameToString(), "ListArea", "Area", new { item.AreaName}, null)</td> 
```

问候 Pavan.G

# objective-c - Cocoa 和 OpenGL 茶壶未正确绘制

> ID：13686679
> 
> 赞同：2
> 
> 时间：2012-12-03T15:43:49.180
> 
> 标签：objective-c, c, cocoa, opengl, glut

我混合了 Cocoa、GLUT 和 OpenGL 框架来绘制一个茶壶。
我通常在纯 C 中执行此操作，但我需要将 Cocoa 按钮和东西与 OpenGL 混合，这是 Corrispettive C 代码：

```
#import <OpenGL/OpenGL.h>
#import <GLUT/GLUT.h>
#import <math.h>
#include "utility.h"

GLuint width=640, height=480;
GLfloat angle=0.0;

void init()
{

    glEnable(GL_DEPTH_TEST);
    glViewport(-500, -500, 1000, 1000);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45, width/(float)height, 1, 1000);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0, 0, -100, 0, 0, 0, 0, 1, 0);

    // Luci

    glShadeModel(GL_FLAT);

    glLightfv(GL_LIGHT0, GL_AMBIENT, (const GLfloat[]) {0,0,0} );
    glLightfv(GL_LIGHT0, GL_DIFFUSE, (const GLfloat[]) {1,1,0} );
    glLightfv(GL_LIGHT0, GL_SPECULAR, (const GLfloat[]) {0.5,0.5,0} );

    glMaterialfv(GL_FRONT, GL_AMBIENT, (const GLfloat[]) {1,0,0} );
    glMaterialfv(GL_FRONT, GL_DIFFUSE, (const GLfloat[]) {1,0.25,0} );
    glMaterialfv(GL_FRONT, GL_SPECULAR, (const GLfloat[]) {1,0.75,0} );
    glMaterialfv(GL_FRONT, GL_SHININESS, (const GLfloat[]) {1,1,0} );

    glEnable(GL_LIGHT0);
    glEnable(GL_LIGHTING);

}

void display()
{
    glClearColor(BLACK);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glPushMatrix();
    glRotatef(angle, 0, 1, 0);
    glutSolidTeapot(10);
    glPopMatrix();

    glutSwapBuffers();
}

void keyboard(unsigned char key, int x, int y)
{
    if(key=='+')
    {
        angle+=5.0;
    }
    else if(key=='-')
    {
        angle-=5.0;
    }
    else
    {
        return;
    }
    makeRound(&angle);
    glutPostRedisplay();
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_DEPTH | GLUT_DOUBLE);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(width, height);
    glutCreateWindow(argv[0]);
    glutDisplayFunc(display);
    glutKeyboardFunc(keyboard);
    init();
    glutMainLoop();
    return 0;
} 
```

这是结果：

![在此处输入图像描述](../Images/b578932e885219e31d25d92724ab935e.png)

然后我将一个 NSOpenGLView 子类化，并对这个 C 代码执行相同的操作，只是大小不同，但材质和灯光是相同的：

```
@implementation MyView

@synthesize angle;

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
    }
    return self;
}

- (void) prepareOpenGL
{
    NSOpenGLContext* context= self.openGLContext;
    GLfloat width= self.bounds.size.width;
    GLfloat height= self.bounds.size.height;

    [context makeCurrentContext];
    glEnable(GL_DEPTH_TEST);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45, width/height, 1, 1000);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0, 0, -100, 0, 0, 0, 0, 1, 0);

    // Lighting

    glShadeModel(GL_FLAT);
    glLightfv(GL_LIGHT0, GL_AMBIENT, (const GLfloat[]) {0,0,0} );
    glLightfv(GL_LIGHT0, GL_DIFFUSE, (const GLfloat[]) {1,1,0} );
    glLightfv(GL_LIGHT0, GL_SPECULAR, (const GLfloat[]) {0.5,0.5,0} );

    glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, (const GLfloat[]) {1,0,0} );
    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, (const GLfloat[]) {1,0.25,0} );
    glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, (const GLfloat[]) {1,0.75,0} );
    glMaterialfv(GL_FRONT_AND_BACK, GL_SHININESS, (const GLfloat[]) {1,1,0} );
    glEnable(GL_LIGHT0);
    glEnable(GL_LIGHTING);

}

- (void)drawRect:(NSRect)dirtyRect
{
    glClearColor(0, 0, 0, 0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glPushMatrix();
    glRotatef(angle, 0, 1, 0);
    glutSolidTeapot(20);
    glPopMatrix();

    glFlush();
}

#pragma mark - Actions

- (IBAction) increaseAngle :(id)sender
{
    angle+=5.0;
    if(angle>360.0)
    {
        angle-=360.0;
    }
    [self setNeedsDisplay: YES];
}

- (IBAction) decreaseAngle:(id)sender
{
    angle-=5.0;
    if(angle<0.0)
    {
        angle+=360.0;
    }
    [self setNeedsDisplay: YES];
}

@end 
```

这是结果：

![在此处输入图像描述](../Images/fe6851b09166505f08ff31f3d5059c85.png)

这非常难看，考虑到我使用了相同的材质和灯光，我认为我在使用 Cocoa 和 OpenGL 混合完成的那个中做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:56:30.443

确保在创建 GL 上下文时请求深度缓冲区。默认情况下，您可能不会得到一个。

# java - 如何使用 GUI 组织服务器架构

> ID：13686681
> 
> 赞同：1
> 
> 时间：2012-12-03T15:43:51.530
> 
> 标签：java, jtable, client-server, abstracttablemodel

我正在开发一个银行客户端-服务器架构。

我想知道组织服务器端最方便的方法是什么。银行是否需要在同一个文件中作为服务器和图形用户界面？

因为目前我有实例化银行的服务器 GUI。这家银行有一个客户列表，每个客户都有几个账户。

1.  我的第一个问题涉及服务器 GUI 中的 JTable。实际上，银行存储了一个 ArrayList，其中包含客户先前完成的每个操作。我写了一个 AbstractTableModel 的实现，它也存储了一个 ArrayList。问题是服务器为 JTable 实例化了一个 Bank 和一个 TableModel。因此，当银行在其 ArrayList 中添加一个操作时，TableModel 并没有意识到这一点。如何在不将 TableModel 提供给 Bank 的情况下将这两者联系起来？

2.  第二个问题涉及与客户端的连接。当登录名/密码正确时，服务器将会话接口传递给客户端。会话包含客户可以执行的银行操作。如果 SessionImpl 封装了 Bank 实例，是否存在安全问题？因为实际上 Session 方法调用了 Bank 方法。会话是客户端和服务器之间唯一的远程对象，但封装银行给我的印象是客户端可以直接访问银行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:12:47.520

1）您希望您的 AbstractTableModel 在构造函数中采用 Bank 对象。然后，AbstractTableModel 方法委托给 Bank 对象上的底层操作列表。

有两种方法可以解决如果银行对象更改问题会发生什么。

a) 假设一个带有方法的 Bank 对象：

```
public List<Operation> getOperations(); 
```

`getOperations()`每次向表模型发出请求时，您都可以调用。例如：

```
public Object getValueAt(int row, int column) {
  return bank.getOperations().get(row)...
} 
```

这是一种缓慢但简单的获取更新的方法。

b) 以更复杂的方式，您可以让 AbstractTableModel 向 Bank 对象注册，以便在向 Bank 添加新操作时接收事件。这看起来像：

```
public class BankTableModel extends AbstractTableModel {
  private List<Operation> operations;

  public BankTableModel(Bank bank) {
    operations = bank.getOperations();
    bank.addOperationEventListener(...);
  }

  public Object getValueAt(int row, int column) {
    return operations.get(row)...
  }
} 
```

这样做的问题是 RMI 没有提供服务器与客户端对话的机制，因此服务器和客户端都需要成为 RMI 端点。请参阅[RMI 事件](https://stackoverflow.com/questions/3390454/is-there-a-way-to-send-an-event-through-an-rmi-object)。

2) RMI 的全部意义在于您获得了驻留在服务器上的远程对象的存根。存根允许您调用远程对象上的方法，就好像该对象是本地对象一样。不要担心这个级别的安全性，尤其是在学术环境中。

我会摆脱 Session 对象，直接返回 Bank 对象。如果您将所有调用转发到 Bank 对象，那么您真的只想直接与 Bank 对象交互。在更复杂的系统中，您可能有正当理由添加代理或外观层，但在这种情况下我会保持简单。

3）您的 GUI 和您的服务器应该是两个不同的对象。您的 GUI 是您的客户端，您的服务器端根本不应该有 GUI 代码。

# ruby-on-rails - rails integration test pass with Itest but "rake test:integration" provides no output. no error though

> ID：13686683
> 
> 赞同：3
> 
> 时间：2012-12-03T15:43:56.357
> 
> 标签：ruby-on-rails, ruby, integration-testing

When I run my integration tests individually using "ruby -Itest test/integration/mytest.rb", it works just fine.

When I try to run `rake test:integration` to run all my integration tests in one command, I have to wait a few seconds but I never get any output. No good result, no error. If I run `rake --trace test:integration`, everything seems to be fine until the Execute test:integration (**which does not provide any output**).

Looks as though the integration folder was not found or was empty.

Any ideas?

Thanks Christian

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T02:48:23.030

我刚刚花了 3 个小时试图弄清楚这一点，并得到了这个：你的测试文件必须以“_test.rb”结尾，否则它们会被跳过

# events - richfaces select menu rendering triggered by event

> ID：13686685
> 
> 赞同：1
> 
> 时间：2012-12-03T15:44:06.047
> 
> 标签：events, jsf, richfaces, rendering, select-menu

I have popup window that is used in few tabs and popup uses some params from tabs such as `dialogContainerId` and `dialogId`.

I have "select item" menu and "refresh items" button near it. So when user click button i want to get new item list for select menu. Select menu works as expected, but "refresh" button is not. I'm sure that listener on refresh button works well and can see updated item list if new items appear in database. But select menu doesn't update. It seems like `render` attribute on `f:ajax` doesn't work or there is id mismatch. I checked page and found nothing. Ids look well. I tried constant ids, and tried to move id to parent tag, but always have got same result - select menu is not re-rendered.

Does any one have ideas or suggestions? Thanks in advance.

Here is source page:

```
<ui:composition>
    <h:panelGroup id="#{dialogContainerId}">
        <rich:popupPanel id="#{dialogId}" autosized="true" modal="true" domElementAttachment="parent">
            <h:panelGrid id="#{dialogId}commonControls" columns="3">

                <!-- more input tags -->

                <h:outputLabel value="Create dialog" />
                <h:panelGroup>
                    <rich:select id="#{dialogId}expenseItem" value="#{expenseItemInstanceBean.selectedExpenseItemId}"
                                 selectFirst="true" required="true" requiredMessage="Required">
                        <f:selectItems value="#{expenseItemInstanceBean.expenseItemsAsList}"
                                       var="item" itemValue="#{item.id}" itemLabel="#{item.name}" />
                    </rich:select>
                    <h:graphicImage library="icons" name="refresh_16x16.gif" title="Refresh">
                        <f:ajax event="click" execute="@this" render="#{dialogId}expenseItem"
                                listener="#{expenseItemInstanceBean.refreshExpenseItems()}" />
                    </h:graphicImage>
                </h:panelGroup>
                <h:messages for="#{dialogId}expenseItem" />

                <!-- more input tags -->

            </h:panelGrid>

            <!-- button tags tags -->

        </rich:popupPanel>
    </h:panelGroup>
</ui:composition> 
```

And part of rendered html page:

```
<td>
    <div class="rf-sel" id="idForm:wrkSchedDialogexpenseItem">

        <!-- here is my list and additional autogenerated jsf tags -->

    </div>
    <img id="idForm:j_idt42" src="/logistics-web/javax.faces.resource refresh_16x16.gif.xhtml?ln=icons"
         alt="" style="vertical-align: bottom" title="Refresh"
         onclick="mojarra.ab(this,event,'click','@this','idForm:wrkSchedDialogexpenseItem');return false"
         class="linkLikeCursor" name="idForm:j_idt42"/>ev
</td> 
```

# windows - Does PSCP work with PowerShell?

> ID：13686686
> 
> 赞同：2
> 
> 时间：2012-12-03T15:44:10.370
> 
> 标签：windows, powershell, putty

I have a PowerShell script that produces a text file. At the end, I would like to copy this file to a Linux server. From CMD.EXE, I can use PSCP (from Putty), it works and copies the file. But from PowerShell, either interactively or from a PowerShell batch, PSCP has no visible effect: no error messages and the file is not copied. Even if I run simply .\PSCP.EXE without arguments, on the CMD command line it displays the options, but from PowerShell it does nothing. Can PSCP be used from inside PowerShell?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:07:16.740

从 PowerShell 中执行程序的工作方式应该与 CMD 相同，但取决于该程序如何生成其输出（是否写入 STDOUT、STDERR 等？），其行为可能不同。

我一直在 .NET 应用程序和 PowerShell 脚本中使用[Rebex 的](http://www.rebex.net)FTPS 和 SFTP 组件；SFTP 包包含一个 SCP 类。是的，它要花钱，但根据您的使用情况，这可能是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-05T14:56:57.980

刚刚尝试从 PowerShell 自动化 PSCP。请记住使用 pscp 的**`-batch`**参数，这样，如果您执行诸如输入错误密码之类的操作，就不会被要求输入。

```
$Cmd = "pscp -l username -pw password -batch c:\folder\file.txt server:/home/user1"
Invoke-Expression "& $( $Cmd )" 
```

否则，您的脚本将停止运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:23:22.310

如果在脚本内部使用 pscsp，例如 perl

*   没有和号

*   像这样引用“我的密码”

例如

```
"C:\Program Files\Putty\pscp.exe" -C -p -pw "password"  /local_dir/file_to_copy  user@hostname:/remote_directory 
```

在 perl 中（注意 \ 是“字符串”中的转义字符）

```
$cmd = q("C:\Program Files\Putty\pscp.exe" -C -p -pw "password"  /local_dir/file_to_copy  user@hostname:/remote_directory);

system($cmd); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T17:08:47.227

是的 - 大多数可执行文件都可以从 PowerShell 中调用。pscp.exe 在这方面没有什么特别之处。您可能需要在其前面加上呼叫运算符 - 与号 - `&`：

```
PS C:\>& "C:\Program Files (x86)\Putty\pscp.exe" -V
pscp: Release 0.62 
```

以上是我的 PowerShell 提示符的直接输出。如果可执行文件的路径包含空格，则调用运算符特别有用 - 调用运算符用于告诉 PowerShell 将被视为字符串的内容视为应尝试执行的内容。

**请**包含您尝试执行的完整命令，因为它将有助于提供更好的答案。如果您没有得到任何输出，您的 PATH 变量或其他奇怪的东西可能有问题。

# c - Learning C - Compiling error allocating pointers

> ID：13686687
> 
> 赞同：0
> 
> 时间：2012-12-03T15:44:12.263
> 
> 标签：c, pointers, malloc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:13:10.173

Welcome to SO and the wonderful world of C!

A few pointers for you:

Syntax-ically there's no problem with defining a struct inside a function, but typically it's defined outside so that it can be used in other functions. For example:

```
main(){ 
  struct nodedef{vars};
  add_to_node(node var);
}

add_to_node(node var)
{
   // How can I add a to a node when I don't know what that is?
} 
```

The main problem with your code is that you aren't correctly referencing your node later on, if I declaire:

```
struct me {
    int i;
}; 
```

Then anytime I reference this type of struct, I have to explicitly say `struct` again:

```
struct me myself;
myself = malloc(sizeof(struct me));
myself.i = 5; 
```

The way to avoid this reuse of the `struct` keyword is to use the `typedef`:

```
typedef struct me {
    int i;
}m;

m myself;
myself = malloc(sizeof(m));
myself.i = 5; 
```

Last point is anytime you allocate some memory via `malloc()` make sure you call `free()` to release that memory:

```
free(myself); 
```

Or else you'll have a memory leak.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:45:00.507

Try `sizeof(struct Node)` instead.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:51:01.757

`struct Node`应该用来指结构。如果您希望上面的代码有效，另一种方法是`typedef`将`struct Node`结构设置为

```
typedef struct Node {
    int value;
    struct Node *next;
} Node; 
```

# c - Error: Bad file descriptor, when open() a file

> ID：13686688
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:44:19.573
> 
> 标签：c, ubuntu-11.04

I want to create a file with name that input by user.

Here is my code:

```
int function1(){

    char path[50];
    char choice_f;
    char choice_m;
    int flag;     <-- updated
    mode_t mode;

    printf("Filename : ");
    scanf("%s", path);
    //printf("%s", path);     <-- path can be shown
    printf("\n");

    printf("Desire flag : ");
    scanf("%c", &choice_f);                 <-- updated
    //printf("%s", path);     <-- path CANNOT be shown from here
    while (choice_f != '1' && choice_f != '2' && choice_f != '3'){
        printf("Invalid input! Flag: ");
        scanf("%c", &choice_f);             <-- updated
    }
    if (choice_f == '1')
        flag = O_RDONLY;                      <-- updated
    else if (choice_f == '2')
        flag = O_WRONLY;                      <-- updated
    else if (choice_f == '3')
        flag = O_RDWR;                    <-- updated

    printf("Desire mode : ");
    scanf("%c", &choice_m);                <-- updated
    while(choice_m != '1' && choice_m != '2' && choice_m != '3' && choice_m != '4'){
        printf("Invalid input! Mode: ");
        scanf("%c", &choice_m);                <-- updated
    }
    if (choice_m == '1')
        mode = S_IRWXU;
    else if (choice_m == '2')
        mode = S_IRWXG;
    else if (choice_m == '3')
        mode = S_IRWXO;
    else if (choice_m == '4')
        mode = S_IRWXU | S_IRWXG | S_IRWXO;

    int fd = open(path, (int)flag|O_EXCL|O_CREAT);
    fchmod(fd, mode);
    printf("%d", fd);
    if (fd == -1){
        perror("error");
        return 1;
    }else
        printf("File \'%s\' Created \n", path);
    if (close(fd)<0)
        perror("close()");
    return 0;
} 
```

But at the end of the program, I get the error message:

```
Error: Bad file descriptor 
```

I tested the `path` with several times, and seems like after the second `scanf()`, the `path` cannot be shown. Even I tried to assign the `path` to another variable, it's still the same.

What should I do to solve this error?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:47:43.797

我不确定这是否是唯一的问题，但您设置的choice_f 和choice_m 不正确，应该是

```
scanf("%c", &choice_f);
scanf("%c", &choice_m); 
```

反而。即您应该改用`%c`格式说明符。如果您使用`%s`，将写入一个 nul 终止符（至少）；您尚未为此提供存储空间，因此其他堆栈变量将被覆盖。

之后，正如 Nicholas Wilson 所建议的那样，您应该更改`flags`为`int`而不是`char*`（并从作业中删除引号到 O_RDONLY 等）

# python - Instantiating an object in a function - Python

> ID：13686690
> 
> 赞同：0
> 
> 时间：2012-12-03T15:44:24.443
> 
> 标签：python, oop, instantiation

I'm relatively new to python but think I have a decent enough understanding, except for (apparently) the correct way to use the "import" statement. I assume that's the problem, but I don't know.

I have

```
from player import player

def initializeGame():
    player1 = player()
    player1.shuffleDeck()
    player2 = player()
    player2.shuffleDeck() 
```

and

```
from deck import deck

class player(object):
    def __init__(self):
        self.hand = []
        self.deck = deck()

    def drawCard(self):
        c = self.deck.cards
        cardDrawn = c.pop(0)
        self.hand.append(cardDrawn)

    def shuffleDeck(self):
        from random import shuffle
        shuffle(self.deck.cards) 
```

But when i try to initializeGame() it says "player1 has not been defined" and I'm not really sure why. In that same file if I just use "player1 = player()" then it woks perfectly fine but it refuses to work inside of a function. Any help?

EDIT: ADDING THINGS THAT WEREN'T INCLUDED BEFORE

```
class deck(object):
    def __init__(self):
        self.cards = []

    def viewLibrary(self):
        for x in self.cards:
            print(x.name)

    def viewNumberOfCards(self, cardsToView):
        for x in self.cards[:cardsToView]:
            print(x.name)

from deck import deck

class player(object):
    def __init__(self):
        self.hand = []
        self.deck = deck()

    def drawCard(self):
        c = self.deck.cards
        cardDrawn = c.pop(0)
        self.hand.append(cardDrawn)

    def shuffleDeck(self):
        from random import shuffle
        shuffle(self.deck.cards) 
```

and the traceback error is

```
player1.deck.cards

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    player1.deck.cards
NameError: name 'player1' is not defined 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T15:57:19.867

```
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    player1.deck.cards
NameError: name 'player1' is not defined 
```

这显示了引发错误的行：`player1.deck.cards`. 所述行不在您提供给我们的代码中，因此我们只能对您获得异常的原因做出假设。

但是，您的脚本很可能看起来像这样：

```
initializeGame()

# and then do something with
player1.deck.cards 
```

然而，这不起作用，因为`player1`并且`player2`只是`initializeGame`函数内部的局部变量。一旦函数返回，就不会再留下对它们的引用，并且它们很可能会等待垃圾回收。

因此，如果您想访问这些对象，您必须确保它们存在。你可以通过全局变量来做到这一点，或者你可以简单地从你的`initializeGame`函数中返回它们：

```
def initializeGame():
    player1 = player()
    player1.shuffleDeck()
    player2 = player()
    player2.shuffleDeck()
    return player1, player2 
```

然后你可以这样称呼它：

```
player1, player2 = initializeGame() 
```

并且对创建的对象有本地引用。

或者更好的是，创建一个代表整个游戏的对象，其中玩家是实例变量：

```
class Game:
    def __init__ (self):
        self.player1 = player()
        self.player1.shuffleDeck()
        self.player2 = player()
        self.player2.shuffleDeck() 
```

然后您可以创建一个实例并使用or`Game`访问播放器。当然，拥有游戏本身的对象也允许您将许多与游戏相关的功能封装到该对象中。`game.player1``game.player2`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T15:50:55.190

我假设引用 player1 的代码在函数之外。在函数内部定义的变量是它的局部变量，并且在函数调用结束时被销毁。

您需要将 player1 和 player2 声明为全局变量，或者将整个事物包装在一个类中并使它们成为类实例的属性。

# mysql - 如何使用 date > NOW() ASC 和其余 DESC 来订购 SQL 结果？

> ID：13686691
> 
> 赞同：0
> 
> 时间：2012-12-03T15:44:24.863
> 
> 标签：mysql, sql, conditional-statements

我有一个 WordPress 数据库，其中包含一个名为 events 的自定义帖子类型，其中包含事件的开始日期和结束日期的自定义字段。我想在列表中输出所有这些事件，其中即将发生的事件按升序排列，其余按降序排列。

我试图从这个答案复制代码，但我似乎无法正确 - 所有帖子都按升序排序：[MySQL conditional ORDER BY ASC/DESC for date column](https://stackoverflow.com/questions/10626363/mysql-conditional-order-by-asc-desc-for-date-column)

这是我现在的代码：

```
SELECT p.post_title, m.meta_value 
FROM wp_posts as p, wp_postmeta as m 
WHERE p.ID = m.post_id 
    AND p.post_type = "events"
    AND m.meta_key = "startdate" 
    AND p.post_status = "publish"
ORDER BY m.meta_value ASC,
    CASE m.meta_value WHEN m.meta_value > DATE(NOW()) THEN m.meta_value END ASC,
    CASE WHEN m.meta_value < DATE(NOW()) THEN m.meta_value END DESC
LIMIT 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:50:20.273

删除 中的第一个子句`order by`。它应该是：

```
ORDER BY 
    CASE m.meta_value WHEN m.meta_value > DATE(NOW()) THEN m.meta_value END ASC,
    CASE WHEN m.meta_value < DATE(NOW()) THEN m.meta_value END DESC 
```

实际上，我不确定 NULL 在 postgres 中的整理顺序是什么。你可以通过以下方式得到你想要的：

```
ORDER BY 
    CASE m.meta_value WHEN m.meta_value > DATE(NOW()) THEN m.meta_value
                      else cast('9999-01-01' as date) END ASC,
    CASE WHEN m.meta_value < DATE(NOW()) THEN m.meta_value END DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:55:35.800

我*认为*这会做到。逻辑是合理的，但我对 mysql 不太熟悉，所以你可能需要在第二种情况下进行一两次转换：

```
ORDER BY CASE WHEN m.meta_value > DATE(NOW()) THEN 0 ELSE 1 END,
         CASE WEHN m.meta_value > DATE(NOW()) THEN m.meta_value ELSE m.meta_value * -1 END 
```

诀窍是您希望将日期视为数字，而 mysql 可能会要求您以不同的方式执行此操作。它之所以有效，是因为在第二级中，排序仅在第一级的值相等时才适用：因此所有即将发生的事件将被排序到顶部，并且在这些即将发生的事件中，按升序排序。所有过去的事件将在接下来显示，并且在该列表中它们将降序排序，因为我们反转了日期值。

# android - I have three activities.From the main activity i can call the 2nd, but i can't call the 3rd one?

> ID：13686692
> 
> 赞同：2
> 
> 时间：2012-12-03T15:44:26.393
> 
> 标签：android, android-activity, manifest, multiscreen

In this app i designed 3 activities. from the 1st activity i have 2 buttons for the other 2 activities respectively add and view. the add activity is executed but the view is not working. Thanks for any helps..

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.task.reminder"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.task.reminder.TaskActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".View"
             android:label="@string/app_name" >>
                          </activity>
        <activity android:name=".Add"
             android:label="@string/app_name" >>
                        </activity>

    </application>

</manifest> 
```

Any ideas...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:45:38.283

Change your `View` and `Add` Activity declaration in manifest as:

```
<activity android:name=".View"
     android:label="@string/app_name" />

<activity android:name=".Add"
     android:label="@string/app_name"/> 
```

**NOTE :** View is already a class in Android so maybe this name will cause problem when you use Intent for starting View.java Activity. you can also change name of View.java Activity

you will also see :

[Code Style Guidelines for Contributors](http://source.android.com/source/code-style.html)

# android - Android - Image animation not working as intended

> ID：13686695
> 
> 赞同：0
> 
> 时间：2012-12-03T15:44:31.323
> 
> 标签：android, android-animation

I have 4 clickable images surounding the center of my screen. Upon clicking one of the images I want the image to slide from it's current position to the center of the screen.

Once the image reaches the center of the screen I would like the image to flip and then have my fragment load.

How do I obtain this full sequence? I have my fragment loading but I am unsure of how to create an animation that slides my image from it's current position to the center. The layout of the page is know and is as follows.

1 2 3

4 5 6

7 8 9

where 2, 4, 6, 8 are my images that I want to slide and 5 is the position that I want them to slide to on click (then flip and show my fragment).

Thanks, Dman

**EDIT :**

One thing I cannot get to occur is the events to play in sequence. Currently when i click the image it waits the offset that I have set on the flip_image.xml animation and then plays them all at once in the duration given to the flip_image.xml animation. Any help on this would be much appreciated.

**slide_left.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<translate 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:fromXDelta="0%" 
    android:toXDelta="-112%"
    android:duration="1000"/> 
```

**slide_alpha.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<alpha 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:fromAlpha="0.8"
    android:toAlpha="1.0"
    android:duration="1000" /> 
```

**flip_image.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<scale
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXScale="0.0"
    android:toXScale="1.0"
    android:pivotX="50%"
    android:fromYScale="1.0"
    android:toYScale="1.0"
    android:startOffset="1000"
    android:duration="200" /> 
```

**Calling Code:**

```
private void loadFragmentAnimation(final ImageView view, final int slideDirection) {
        AnimationSet animSet = new AnimationSet(true);
        animSet.addAnimation(AnimationUtils.loadAnimation(getActivity(), slideDirection));
        animSet.addAnimation(AnimationUtils.loadAnimation(getActivity(), R.anim.slide_alpha));
        animSet.addAnimation(AnimationUtils.loadAnimation(getActivity(), R.anim.flip_image));
        animSet.setAnimationListener(new AnimationListener() {

            public void onAnimationStart(Animation animation) {             
            }

            public void onAnimationRepeat(Animation animation) {                
            }

            public void onAnimationEnd(Animation animation) {
                // mCallBack.categorySelected(view.getId());
            }
        });

        view.startAnimation(animSet);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:03:31.713

使用[查看动画](http://developer.android.com/guide/topics/graphics/view-animation.html)。

1.  创建一个[`AnimationSet`](http://developer.android.com/reference/android/view/animation/AnimationSet.html)有 a[`TranslateAnimation`](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html) 后跟 a[`ScaleAnimation`](http://developer.android.com/reference/android/view/animation/ScaleAnimation.html)来模拟翻转（您可能需要将图像镜像到翻转的另一侧。也许有更简单的方法？）。
2.  然后将动画设置为`ImageView`using [`setAnimation()`](http://developer.android.com/reference/android/view/View.html#setAnimation%28android.view.animation.Animation%29)。

我想您也应该能够在 XML 中指定动画。

**编辑：**

翻转动画可以参考以下链接：

*   [Android 动画 3D 翻转](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)
*   [Android 动画 - 翻转](https://stackoverflow.com/q/3364010/165674)

# php - 使用 AJAX 发送多个 PHP 文件

> ID：13686696
> 
> 赞同：1
> 
> 时间：2012-12-03T15:44:31.277
> 
> 标签：php, jquery

通常，当我想在 php 文件中创建新内容并在我的站点中的某个位置实现它时，我会执行以下操作（JS 和 PHP）：

```
 case 'someCasename':
    ...
    include_once 'file.php';
    break;

...
success: function(data){
    $("#idSelector").html(data);
} 
```

并且新内容显示在所选元素处。

但我很好奇是否可以同时发送多个 php 文件。不确定这是否真的有必要，而且我还没有遇到过需要这样做的地方，但我想到了它并想问。最后的代码很可能非常非常错误，但我只想展示我的意思：

```
 case 'someCasename':
...
$phpArray = array("file1" => include_once 'file1.php', "file2" => include_once 'file2.php', "file3" => include_once 'file3.php'):
echo $phpArray;
break;

...
success: function(data){
    $("#idSelector").html(data.file1);
    $("#idSelector").html(data.file2);
    $("#idSelector").html(data.file3);
} 
```

这样的事情甚至可能吗？你不能 json_encode php 文件可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:12:14.947

如果我理解正确，您包含的 php 文件会回显出您想在 ajax 调用的成功函数中使用的内容。

您可以做的是遍历所有包含并使用输出缓冲来捕获数组中这些文件的输出。

就像是：

```
case 'someCasename':
  ...
  $results = array();
  while (files_to_include)
  {
    ob_start;    // start output buffering
    include_once "your_file";
    $results[] = ob_get_clean();    // get the contents of the output buffer
  }
  echo json_encode($results);    // send all collected output as json to be used on the js side
  break; 
```

尽管这可行，但使用在您的包含中返回值的函数当然会更好。

# delphi - Delphi 7, SelectDirectory with UNC

> ID：13686702
> 
> 赞同：2
> 
> 时间：2012-12-03T15:44:44.220
> 
> 标签：delphi, delphi-7

I use Delphi 7 on Windows 7, I need to open a dialog that allow to choose a directory. I use SelectDirectory (from unit FileCtrl). The problem is that I want to navigate through an "unmapped" network directory, like `"\\10.0.0.1\Mickey"`.

Is it possible to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:51:57.487

你对老式的不走运，`SelectDirectory`这是一个过时和弃用的功能。

在 Vista 及更高版本上，您应该`IFileDialog`在其文件夹选择模式下使用。对于 Vista 之前的操作系统，您能做的最好的可能是`SHBrowseForFolder`.

`SelectDirectory`调用过多`SHBrowseForFolder`。这是 5 个参数的重载。不知道什么时候介绍的。也许它甚至存在于 Delphi 7 中。我也不能确定是否`SHBrowseForFolder`会提供您正在寻找的目录。

由于您还使用过时且不推荐使用的 Delphi 版本，因此调用`IFileDialog`. 您需要自己声明接口并使用`CoCreateInstance`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T16:36:16.903

Win32`SHBrowseForFolder()`函数以及因此 RTL 的重载`SelectDirectory()`函数确实支持网络路径。只需将`Root`参数设置为空白字符串，以便网络共享可以出现在对话框中。

# asp.net-mvc - Localized resx resources are not being loaded from App_GlobalResources folder when changing culture on the fly

> ID：13686703
> 
> 赞同：1
> 
> 时间：2012-12-03T15:44:43.080
> 
> 标签：asp.net-mvc, asp.net-mvc-3

I have a solution consisting of two MVC3 projects with resources located in each project's **App_GlobalResources** folder:

**MyApp.Web project**'s App_GlobalResources folder contains default resources (default culture is en-US) such as **MyPage1.resx**

**MyApp.Web.Europe project** - App_GlobalResources folder contains resources for European cultures such as **MyPage1.de-DE.resx**. It's a startup project.

When I change culture on the fly setting **Thread.CurrentThread.CurrentCulture** and **Thread.CurrentThread.CurrentUICulture** what I have is that resources from MyApp.Web.Europe App_GlobalResources folder are not being loaded.

In addition to that MyApp.Web core project also contains some resources in Resources folder for all cultures, so when I change culture on the fly, European resources such as de-DE are being loaded from Resources folder fine. Does someone have any considerations how to make them load from App_GlobalResources?

# c - separate compilation in C gives error if function is declared in header file

> ID：13686705
> 
> 赞同：0
> 
> 时间：2012-12-03T15:44:45.383
> 
> 标签：c, module, compilation, linkage

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:16:50.587

从上面的代码中，我看到的是：你包含`common.h`了两次。在你的文件中一个`myfunction.c`又一个，你有 main()。

# php - PHP中的类方法访问控制

> ID：13686706
> 
> 赞同：4
> 
> 时间：2012-12-03T15:44:45.363
> 
> 标签：php, oop

当在不同的上下文（我系统中的 API）中使用对象方法时，我需要对对象方法进行某种访问控制。这是代码示例：

```
 class A
    {
      public function doA(){}
      public function doB(){}
    }

    class APIAClient
    {
      public function getA()
      {
        return new A();
      }
    }

    class APIBClient {
      public function getA()
      {
        return new A();
      }
    } 
```

在 APIAClient 对象中 A 应该有方法 doA() 和 doB()，但在 APIBClient 中不应该有 doB() 方法。

现在我已经实现了 APIBClientAProxy（由 APIBCleint->getA() 返回）

```
 class APIBClientAProxy
   {
     private $a = new A;
     public function doA()
     {
       $this->a->doA()
     }
   } 
```

但是可能有更好的模式来解决我的问题，而无需为每个上下文（即 API）使用额外的代理对象。我正在考虑具有特定上下文中允许方法列表的魔术 __call 方法，但是魔术调用很难做文档，文档是我应用程序中的重点（API 应该有很好的文档记录）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:00:58.107

您可以通过特征使用组合来代替继承（在 PHP 5.4 中引入）。

首先定义特征

```
trait A {
  public function doA() {
    // do something here
  }
}

trait B {
  public function doB() {
    // do something here
  }
} 
```

然后在你的类声明中使用这些特征

```
class APIAClient {
  use A, B

}

class APIBClient {
  use A
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:50:31.807

您可以在这里使用继承，如下所示：

```
class A {
    public function doA() {
        // do something here
    }
}

class B extends A {
    public function doB() {
        // do something here
    }
}

class APIAClient
{
    public function getObj() {
        return new B();
    }
}

class APIBClient {
    public function getObj() {
        return new A();
    }
} 
```

这样，当您调用`getObj()`APIAClient 时，它将返回一个`B`同时具有`doA()`和的实例`doB()`。但是，当您调用它时，您会返回一个只有`APIBClient`的实例。`A``doA()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:05:26.900

您不能根据创建实例的时间和方式来更改类（嗯，不是真的）。
您可以使用 hacky 解决方法（但我建议不要这样做）

```
class A
{
    private $_canDoB = null;
    public function __construct($doB = true)
    {
        $this->_canDoB = !!$doB;//force bool
    }
    public function doB()
    {
        if ($this->_canDoB === false)
        {
            throw new LogicError('You can\'t doB');
        }
    }
} 
```

因此，如果您将虚假值传递给 A(in your `APIBClient`) 的构造函数，`doB`将引发错误。但是，我也建议使用继承：

```
class AB
{
    public function doA()
    {
        //both B and B share this method
    }
}
class B
{//nothing atm
}
class A
{
    public function doB()
} 
```

并让您`APIAClient`返回 a `new A()`，而`APIBClient`返回该类的新实例`B`。
使用类型提示时，您可以只检查`AB`实例：

```
public function doSomething(AB $instance)
{
    if ($instance instanceof A)
    {
        return $instance->doB();
    }
    return $instance->doA();
} 
```

或者，当不依赖类型提示和类型检查时，您始终可以使用许多功能之一，例如`method_exists`

# haskell - 为什么 monad 转换器不被限制为产生 monad？

> ID：13686714
> 
> 赞同：14
> 
> 时间：2012-12-03T15:45:12.763
> 
> 标签：haskell, monads, typeclass, monad-transformers

在[MonadTrans](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/src/Control-Monad-Trans-Class.html#MonadTrans)类中：

```
class MonadTrans t where
    -- | Lift a computation from the argument monad to the constructed monad.
    lift :: Monad m => m a -> t m a 
```

为什么不被`t m`限制为 Monad？即，为什么不：

```
{-# LANGUAGE MultiParamTypeClasses #-}
class Monad (t m) => MonadTrans t m where
  lift :: Monad m => m a -> t m a 
```

如果答案是“因为它就是这样”，那很好——这只是让 n008 感到困惑。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T17:10:27.143

您提出以下建议：

```
class Monad (t m) => MonadTrans t m where
    lift :: Monad m => m a -> t m a 
```

...但这真的意味着你想要的吗？似乎您想表达类似“一个类型`t`可能是`MonadTrans`if 的实例，对于所有`m :: * -> *`where`m`的实例`Monad`，`t m`也是`Monad`”的实例。

上面的类定义*实际上*说的更像是“类型`t`并且`m`可能构成`MonadTrans`if 的实例，对于那些特定类型，`t m`是`Monad`”的实例。仔细考虑差异，以及可能不是您想要的实例的隐含潜力。

在一般情况下，类型类的每个参数都是一个独立的“参数”，当人们尝试使用 MPTC 时，这一事实一直是令人头疼和 GHC 扩展的丰富来源。

这并不是说无论如何都不能使用这样的定义-正如您所指出的，当前的定义也不理想。古老的问题“为什么`Data.Set`不是`Functor`”是相关的，这些问题有助于激发最近的`ConstraintKinds`愚蠢行为。

这里“为什么不”的最终答案几乎可以肯定是 Daniel Fischer 在评论中给出的答案——因为`MonadTrans`它是非常核心的功能，所以不希望让它依赖于一些越来越神秘的 GHC 扩展的可怕级联。

# facebook - Graph API 不会返回朋友的宗教信仰

> ID：13686717
> 
> 赞同：0
> 
> 时间：2012-12-03T15:45:22.957
> 
> 标签：facebook, facebook-graph-api, koala

我有一个屏幕，用户可以在其中选择 Facebook 朋友。提交表单后，我从 Facebook 请求具有特定字段（例如：）的个人资料对象`https://graph.facebook.com/some_id?fields=id,name,religion&access_token=xxx`。

当我使用请求中的`religion`字段请求我自己的个人资料数据时，我看到结果中正确包含了该值。当我请求我朋友的个人资料数据时，即使我在直接查看他们的个人资料页面时可以看到它，但响应不包括他们的宗教信仰。

在进行此调用之前，我已确保我同时请求了权限（`user_religion_politics`并且正在使用更新的访问令牌）。`friends_religion_politics`这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:37:30.850

创建两个测试用户帐户后，似乎必须满足以下两项之一才能通过 Graph API 访问朋友的宗教信仰：

1.  朋友必须将他们的宗教信息设为“公开”。例如，将其设置为“Friends of Friends”并不足以让 API 出于某种原因对其进行检索，而不管我们的友谊如何。

2.  朋友必须授权应用程序的`friends_religion_politics`权限。通过在我自己的帐户上授权该权限，我并没有告诉 Facebook 我想允许访问我朋友的宗教信息。相反，我告诉 Facebook，我想允许其他通过 Graph API 请求的朋友提供我自己的宗教信息。

第二点是一个非常重要的区别，我希望在文档中这样说明。不幸的是，就我现在的需要而言，许可基本上毫无价值。

# webview - 修复了 WP8 模拟器上的页脚问题

> ID：13686718
> 
> 赞同：7
> 
> 时间：2012-12-03T15:45:29.150
> 
> 标签：webview, scrollview, windows-phone-8

我在我的一个 HTML5 网络应用程序中使用了固定页脚。它在 IE10 手机浏览器上运行良好，但是当我使用 web-view 在 WP8 Emulator 上试用它时

```
mainBrowser.Navigate(new URi("http://jqtouch.rediffmailpro.com/iScroll/win8Example1.html",URiKind.Absolute)); 
```

**它在底部留下一个空隙。**

我在某处读过它，并编辑了元标记以包含高度。

```
<meta name="viewport" content="width=device-width, height=541 initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"> 
```

差距消失了。但是，我认为这不是一个好主意，因为在方向更改时，页脚会丢失，因为高度仍然是 541。我不想在任何地方硬编码高度，因为多个设备可能具有不同的高度。

似乎没有为 css 正确设置视口高度。我正在使用底部：0；位置：绝对；修复页脚。我也尝试过 position:fixed 。

这是参考链接：[WP8 Scroll Demo](http://jqtouch.rediffmailpro.com/iScroll/win8Example1.html "演示")

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T07:13:42.887

使用 iscroll4 并在 css 中使用少量媒体查询：

```
@media screen and (orientation: portrait) {
  @-ms-viewport {
    width: 320px;
    user-zoom: fixed;
    max-zoom: 1;
    min-zoom: 1;
  }
}

@media screen and (orientation: landscape) {
  @-ms-viewport {
    width: 480px;
    user-zoom: fixed;
    max-zoom: 1;
    min-zoom: 1;
  }
} 
```

这在 Windows Mobile 8 手机上运行良好。这是一个演示：http: [//jqtouch.rediffmailpro.com/iScroll/win8Example.html](http://jqtouch.rediffmailpro.com/iScroll/win8Example.html)

# regex - 查找和替换一长串单词的正则表达式

> ID：13686723
> 
> 赞同：0
> 
> 时间：2012-12-03T15:45:38.287
> 
> 标签：regex, insert, whitespace

我是正则表达式的新手。

什么表达式可以找到一长串以 3 位数字开头并在大写单词开头放置空格的单词：

代替：

```
013TheBlueCowJumpedOverTheFence1984.jpg 
```

和：

```
013 The Blue Cow Jumped Over The Fence 1984 
```

注意：删除最后的 .jpg

这将为我节省大量时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:56:42.017

我不会为这个任务使用正则表达式。这将是丑陋且难以维护的。更好的方法是循环遍历字符串并根据您的输入重建字符串。

```
string retVal = "";
foreach(char s in myInput){
    if(IsCapitol(s)){
        reVal += " " + s;
    }
    //insert the rest of your conditions
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:57:59.677

这将需要两个操作，因为每个操作的替换都不同。

首先：

```
/(((?<![\d])\d)|((?<![A-Z])[A-Z](?![A-Z])))/ 
```

替换为：（`' $1'`注意空格）

将在单词之间放置空格。第二：

```
/\s*(.*)\s*\..*$/ 
```

用。。。来代替：`'$1'`

将删除尾随空格和扩展名。

第一个表达式可以分为几部分：`(?<![\d])\d`找到一个前面没有另一个数字的数字，第二个：`((?<![A-Z])[A-Z](?![A-Z]))`找到一个前面没有或后面没有大写字母的大写字母。

您可能会有更多的规则需要合并到其中，例如您如何处理字符串：`'BackInTheUSSR.jpg'`？

**编辑**：这应该处理那个例子：

```
/(((?<![\d])\d)|((?<![A-Z])[A-Z](?![A-Z]))|((?<![A-Z])[A-Z]+(?![a-z])))/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:53:01.730

尝试使用这个正则表达式`\d+|[A-Z][a-z]*`

它会收集所有的比赛，你必须加入他们与 spases

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:56:02.723

匹配：

```
'[A-Z][a-z]*' 
```

用。。。来代替

```
' \0' 
```

请注意，这不会在 1984 年之前添加空格，也不会删除 .jpg。你可以通过匹配来做前者

```
'[0-9]+|[A-Z][a-z]*' 
```

反而。后者通过在单独的指令中删除它，例如用正则表达式替换 ' `\.jpg$`' 和 ''

请注意`\`' 需要像`\\`许多语言一样编写。

# android - 无法将数据从一个意图发送到另一个 Android

> ID：13686726
> 
> 赞同：0
> 
> 时间：2012-12-03T15:45:45.903
> 
> 标签：android

我正在尝试从 editText 框中获取数据并在单击按钮时打开该 url。为此，我必须将数据从一个意图发送到另一个意图。为此，我已经提到[了这个](https://stackoverflow.com/questions/2405120/how-to-start-an-intent-by-passing-some-parameters-to-it)和[这个](https://stackoverflow.com/questions/6235619/android-problems-pass-variable-intent-to-an-activity)但无法发送数据..我正在尝试将数据从主要发送到网络视图活动..

**MainActivity.Java**

```
public class MainActivity extends Activity {
Button b;

WebView mWebVIew2;
EditText mEdit;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    b = (Button) findViewById(R.id.button1);
    mEdit = (EditText) findViewById(R.id.editText1);
    final String s = mEdit.getText().toString();

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), mEdit.getText(), Toast.LENGTH_LONG).show();
            Intent i = new Intent(getApplicationContext(), WebViewActivity.class);
            i.putExtra("mSite", s);
            startActivityForResult(i, 0);
        }
    });

}

} 
```

**WebViewActivity.java**

```
public class WebViewActivity extends Activity {
private WebView mWebView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webv);
    mWebView = (WebView) findViewById(R.id.webView1);
    Intent mIntent = getIntent();
    String y = mIntent.getExtras().getString("mSite");

    Toast.makeText(getApplicationContext(), y, Toast.LENGTH_LONG).show();

    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl(y);

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:50:00.880

您的 String`s`在 onCreate 中被定义为 mEdit.getText。单击按钮时，它不会反映 editText 的内容。

`s`相反，在 onClick 方法中获取值。

## 编辑

更详细的说明：在 Java 中，String 对象是不可变的。指针可能指向不同的引用，但引用可能不会被更改（即静音）。

在这种情况下，这意味着您的 String 永远不能*反映*EditText 的值，而只能反映给定时间的副本。在此特定场景中，String s 包含启动时（在 onCreate 中）的 editText 的内容，它很可能不包含任何内容或包含默认值。

# c++ - 加入线程

> ID：13686727
> 
> 赞同：0
> 
> 时间：2012-12-03T15:45:47.210
> 
> 标签：c++, multithreading, join, pthreads

我对本质上是 pthread 的包装器的第三方库有疑问。
它的join函数是这样实现的：

```
 bool Join() throw ()
            {
                ThreadState s;
                {
                    CCriticalSectionLock L(m_CS);
                    s = m_CurrentThreadState;
                }

                if (s == Started) {...}
            } 
```

不应该将`if (s == Started) {...}`代码放在定义锁的块中吗？

实际上，关键部分仅包括变量赋值，作为基本操作不需要它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:48:24.927

关键部分的重点是保护`m_CurrentThreadState`字段的读取，这可能会被其他线程更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:49:12.297

> 不应该将`if (s == Started) {...}`代码放在定义锁的块中吗？

简短的回答：没有。

更长的答案：不，因为关键部分仅涵盖`m_CurrentThreadState`.

在这段代码`s`中是一个局部堆栈变量，每个线程都有它自己的副本（即它不需要被保护）。

代码阻止访问`m_CurrentThreadState`并读取它的值（进入`s`）。然后，它使用 s 中的值（这将是一致的，即使另一个线程修改了`m_CurrentThreadState`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:50:46.397

临界区确保读取共享变量 ( `m_CurrentThreadState`) 以原子方式完成。C++ 不保证基本操作是原子的，尽管现在人们可以使用`std::atomic`而不是锁。

是否需要为访问之后的任何逻辑维护锁定是一个需要仔细分析线程如何交互的问题。希望库作者进行了分析，并确定在不维护锁的情况下对值进行操作是安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T15:50:47.793

该变量`s`是`m_CurrentThreadState`

看起来该函数希望在短时间内保持锁定，因此检查此状态值的副本。

这段时间状态值是否发生变化都没有关系，代码无论如何都会执行。

# tfs - 云中的团队基础服务器 (TFS) 无法删除/调整映射

> ID：13686728
> 
> 赞同：0
> 
> 时间：2012-12-03T15:45:47.637
> 
> 标签：tfs, visual-studio-2012, workspace, azure-devops

我用我的一个项目试用了 TFS 服务。在我遇到一些问题（可能是误用）之后，我使用 VSUnbindSourceControl.exe（参见： http: [//vsunbindsourcecc.codeplex.com/](http://vsunbindsourcecc.codeplex.com/)）将项目（本地）从 TFS 中分离出来，但它看起来好像在服务器端，上传的项目仍然绑定到我的电脑。

见图片：

![在此处输入图像描述](../Images/bacafdd70c5834b5ae6a64b750445391.png)

以及输出窗口中的错误消息：

创建映射失败 工作文件夹 G:\Quant 工具 DotNet4 已被工作区 USER-PC 使用；myemail@ somedomain dot com 在计算机 USER-PC 上。

（我现在使用与上述不同的电子邮件地址）

我试图通过 VS 中的源代码管理资源管理器从服务器中删除项目，但删除选项被禁用。（当我在 hotmail dot com 上使用 mldz 登录时也是如此。

我也无法通过 TFS Web 界面删除项目或更改其设置。

任何人都遇到过这个问题以及如何使用云中的新 TFS 解决它？我看到了普通 TFS 的一些类似问题，一些解决方案可以通过团队基础管理工具完成，但不能应用于云中的 TFS (AFAIK)

**有关尝试安装 TFS 集成工具的一些信息**

你好，

我使用VS2012 express，虽然我安装了vs_teamexplorer.exe，

![在此处输入图像描述](../Images/c198f96fbe422f4b68d13f40adeaff7b.png)

我无法安装 Microsoft Team Foundation Server 集成工具。

![在此处输入图像描述](../Images/959416b6a456f087b506d76170037f19.png)

![在此处输入图像描述](../Images/aed786c6ba3fe537cf2b65c71442064f.png)

安装后已经重新启动计算机并再次尝试。不工作。遗漏了什么？问候，

马蒂斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T02:53:08.437

您可以对 tfs.visualstudio 使用相同的管理工具。请参阅示例。[例如，在http://msdn.microsoft.com/en-us/magazine/jj130558.aspx](http://msdn.microsoft.com/en-us/magazine/jj130558.aspx)文章的末尾，其中显示了工作区的删除。

# c# - 在 C# 中从分层数据集创建 XML

> ID：13686729
> 
> 赞同：7
> 
> 时间：2012-12-03T15:45:49.410
> 
> 标签：c#, asp.net, xml, xml-parsing, dataset

我有一个使用 SQL 中的递归创建的数据集，

```
Parent        UserId   Child     Reporting_To_UserId   Depth        id
Aditya         13     Abhishek     4                   0            13
Abhishek       4      Saurabh      6                   1            16
Abhishek       4      Mohinder     8                   1            17
Mohinder       8      Mohammad     14                  2            18
Saurabh        6      Rahul        1                   2            11
Saurabh        6      Amitesh      5                   2            12 
```

现在我想生成一个如下所示的 XML：-

```
 <Person name="Aditya" User_Id="13">

    <Person name="Abhishek" User_Id="4">

           <Person name="Mohinder" User_id="8">
               <Person name="Mohammad" User_id="14"/>
           </Person>         

           <Person name="Saurabh" User_Id="6">
              <Person name="Rahul" User_Id="1"/>
              <Person name="Amitesh" User_Id="5"/>
           </Person>

     </Person>

 </Person> 
```

我想使用数据集中的父子关系创建分层 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:51:02.857

I think you could utilize following piece of code:

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DataSet ds = new DataSet();
        string connStr = @"Data Source=MY-PC\SQLExpress;Initial Catalog=DataDB;User Id=ME;Password=YourPassword;Trusted_Connection=True;";
        using (SqlConnection conn = new SqlConnection(connStr))
        {
            string sql = "Select MenuID, Text,Description, ParentID from UserInfo";
            SqlDataAdapter da = new SqlDataAdapter(sql, conn);
            da.Fill(ds);
            da.Dispose();
        }
        ds.DataSetName = "UserInfos"; //You can start directly from here as you have the dataset just mantain Parent and Child ID Proper
        ds.Tables[0].TableName = "UserInfo";
        DataRelation relation = new DataRelation("ParentChild",
         ds.Tables["UserInfo"].Columns["MenuID"],
         ds.Tables["UserInfo"].Columns["ParentID"], true);

        relation.Nested = true;
        ds.Relations.Add(relation);  //XmlDataSource1 is any source of xml you can have this in file also
        XmlDataSource1.Data = ds.GetXml(); //Here Dataset will automatically generate XML for u based on relations added

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:36:58.297

我认为可以使用递归LINQ来完成，但我仍然需要弄清楚如何正确编写它，所以这里有一个递归方法的解决方案：

首先，您声明方法（我已经完成了搜索`Name`，但您也可以使用`Id`）：

```
public static IEnumerable<XElement> BuildXML(string Parent, DataTable dt)
{
    string filter = string.Format("[Parent] = '{0}'", Parent);
    return from x in dt.Select(filter)
            select new XElement("Person",
                        new XAttribute("Name", x["Child"]),
                        new XAttribute("User_Id", x["Reporting_To_UserId"]),
                        BuildXML(x["Child"].ToString(), dt)
                    );
} 
```

然后，你用你的父元素调用它（我添加了一个顶行，否则查询会更复杂）：

```
var dt = new DataTable();
dt.Columns.AddRange(new[] {
    new DataColumn("Parent"),
    new DataColumn("UserId"),
    new DataColumn("Child"),
    new DataColumn("Reporting_To_UserId"),
    new DataColumn("Depth"),
    new DataColumn("id")
});
dt.Rows.Add(new object[] { "", 0, "Aditya", 13, 0, 12 });
dt.Rows.Add(new object[] {"Aditya", 13, "Abhishek", 4, 0, 13});
dt.Rows.Add(new object[] { "Abhishek", 4, "Saurabh", 6, 1, 16 });
dt.Rows.Add(new object[] { "Abhishek", 13, "Mohinder", 8, 1, 17 });
dt.Rows.Add(new object[] { "Mohinder", 8, "Mohammad", 14, 2, 18 });
dt.Rows.Add(new object[] { "Saurabh", 6, "Rahul", 1, 2, 11 });
dt.Rows.Add(new object[] { "Saurabh", 6, "Amitesh", 5, 2, 12 });

var result = BuildXML("", dt); 
```

现在你有`IEnumerable<XElement>`，把它变成字符串，你可以这样做：

```
var xml = result.
            Select(e => e.ToString()).
            Aggregate((current, next) => current + next); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T09:09:16.277

您可以在数据集中创建 DataRelation，例如

```
DataRelation relation = new DataRelation("ParentChild",
         ds.Tables["UserInfo"].Columns["MenuID"],
         ds.Tables["UserInfo"].Columns["ParentID"], true);
**relation.Nested = true;**
ds.Relations.Add(relation);  // 
```

属性“嵌套”非常重要！

[造园](http://www.makeyuan.com)

# sql - 从 DTS ActiveX 任务创建一个 excel 文件

> ID：13686730
> 
> 赞同：0
> 
> 时间：2012-12-03T15:45:54.720
> 
> 标签：sql, dts

我需要从 DTS ActiveX 任务创建十个不同的 excel 文件。只是创造，而不是操纵它。我只知道我必须使用

> CreateObject(Excel.Application)

和

> CreateObject(Scripting.FileSystemObject)

谢谢一会儿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:53:03.727

如果您使用 SQL 2005+，请参阅以下 URL [http://oakdome.com/programming/SSIS_ActiveXScript_to_ScriptTask.php](http://oakdome.com/programming/SSIS_ActiveXScript_to_ScriptTask.php)

UPD。添加了用于文件创建的 vbscript。只需在您的 DTS 脚本任务中使用它

```
fileName = "d:\test_file.xls"

Set excelObj = CreateObject("Excel.Application")
excelObj.Visible = True

Set objWorkbook = excelObj.Workbooks.Add()
objWorkbook.SaveAs(fileName)

excelObj.Quit 
```

# android - 如果不使用单点登录，在 Facebook SDK 3.0 中打印哈希键？

> ID：13686732
> 
> 赞同：0
> 
> 时间：2012-12-03T15:46:01.800
> 
> 标签：android, authentication, facebook-android-sdk

我遇到了“应用程序配置错误”的问题，我认为问题出在哈希键上。

我会打印以进行验证。

如何在不使用单点登录但使用 LoginButton 身份验证的情况下在 logcat 中显示它？

谢谢。

我忘了提到我正在Android上开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:25:37.313

也许您需要从调试密钥存储中生成一个哈希密钥，并将其放入您的 fb 应用程序配置中。

尝试使用密钥工具：

keytool -exportcert -alias YOUR-ALIAS_HERE -keystore PATH_TO_YOUR_KEYSTORE -storepass KEYSTORE-PASSWORD -keypass KEY-PASSWORD | openssl sha1 -二进制 | openssl base64

对于 android 调试密钥库：

**别名**：androiddebugkey

**两个密码**：android

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:36:00.580

我终于解决了！！！:D

我使用 SSO 创建了一个“测试”项目。

链接旧的 Facebook API 一切正常（使用 keytool 生成的哈希密钥），但是链接新的 Facebook API 3.0.2 会检索错误消息“密钥不匹配”。

然后，我复制了在仪表板的错误消息中显示的密钥，一切正常！

# c# - WP7 RGBA MediaStreamSource 立即关闭 - 高分辨率

> ID：13686737
> 
> 赞同：1
> 
> 时间：2012-12-03T15:46:18.923
> 
> 标签：c#, silverlight, windows-phone-7

我试图让我的 MediaStreamSource 在 Windows Phone 7.1 上工作。对于较小的分辨率，如 256*256 或 512*512，它可以工作，但在某些分辨率下，它在我调用 ReportOpenMediaCompleted 后立即关闭。我没有得到任何例外等。

这是我的代码：

```
public class BitmapStreamSource : MediaStreamSource
{
    MediaStreamDescription bitmapMediaStream;
    const int width = 1024;
    const int height = 1024;

    protected override void OpenMediaAsync()
    {
        Dictionary<MediaSourceAttributesKeys, string> mediaStreamAttributes;

        List<MediaStreamDescription> availableMediaStreams;
        Dictionary<MediaStreamAttributeKeys, string> bitmapStreamAttributes;

        mediaStreamAttributes = new Dictionary<MediaSourceAttributesKeys, string>(2);
        mediaStreamAttributes[MediaSourceAttributesKeys.CanSeek] = false.ToString();
        mediaStreamAttributes[MediaSourceAttributesKeys.Duration] = "-1";

        bitmapStreamAttributes = new Dictionary<MediaStreamAttributeKeys,string>(3);
        bitmapStreamAttributes[MediaStreamAttributeKeys.VideoFourCC]= "RGBA";
        bitmapStreamAttributes[MediaStreamAttributeKeys.Width]= width.ToString();
        bitmapStreamAttributes[MediaStreamAttributeKeys.Height] = height.ToString();

        bitmapMediaStream = new MediaStreamDescription(MediaStreamType.Video, bitmapStreamAttributes);
        availableMediaStreams = new List<MediaStreamDescription>(1);
        availableMediaStreams.Add(bitmapMediaStream);

        ReportOpenMediaCompleted(mediaStreamAttributes, availableMediaStreams);
    }

    protected override void SeekAsync(long seekToTime)
    {
        ReportSeekCompleted(seekToTime);
    }

    int sampleCount = 0;
    protected override void GetSampleAsync(MediaStreamType mediaStreamType)
    {
            int pixel = width * height;
            var buffer = new byte[pixel * 4];

            for (int i = 0; i < pixel; i++)
            {
                byte value = (byte)((i + sampleCount) % 256);

                var k = i * 4;
                //buffer[k] = 255; // B
                buffer[k + 1] = value; // G
                buffer[k + 2] = 255; // R
                //buffer[k + 3] = value; // A
            }

            var stream = new MemoryStream(buffer);

            var keys = new Dictionary<MediaSampleAttributeKeys, string>();
            var sample = new MediaStreamSample(bitmapMediaStream, stream, 0, buffer.Length, 0, keys);

            sampleCount++;
            ReportGetSampleCompleted(sample);
    }

    protected override void CloseMedia()
    {
        Debug.WriteLine("CloseMedia()");
    }

    protected override void GetDiagnosticAsync(MediaStreamSourceDiagnosticKind diagnosticKind)
    {
        throw new NotImplementedException();
    }

    protected override void SwitchMediaStreamAsync(MediaStreamDescription mediaStreamDescription)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:33:28.037

您正在超越 Windows Phone 7.x 设备（或模拟器）的媒体功能。

通常，最大分辨率和支持的视频编解码器取决于手机内部的 SoC 芯片，并[在 MSDN 上](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087%28v=vs.105%29.aspx)针对 Windows Phone 7.x 和 8.0 进行了记录。

特别是 Windows Phone 7.x 手机中的芯片通常将分辨率限制在 1280x720 或 800x480 分辨率。Windows Phone 8 手机可能支持更高的分辨率。

如果您使用的是模拟器，这会变得更加复杂——它通常会模拟典型的设备功能，但您需要测试媒体在真实设备上的行为以确定。

# mysql - MySQL查询按列名选择表名

> ID：13686741
> 
> 赞同：0
> 
> 时间：2012-12-03T15:46:21.570
> 
> 标签：mysql, information-schema

我正在尝试从包含列“lang”和“project”的指定数据库中选择所有表。这就是我正在做的事情：

```
SELECT DISTINCT(ISC1.TABLE_NAME) AS `table` FROM INFORMATION_SCHEMA.COLUMNS AS ISC1 
JOIN INFORMATION_SCHEMA.COLUMNS AS ISC2 ON 
    (ISC1.TABLE_SCHEMA=ISC2.TABLE_SCHEMA AND ISC1.TABLE_NAME=ISC2.TABLE_NAME AND ISC2.COLUMN_NAME='project') 
WHERE ISC1.COLUMN_NAME='lang' AND ISC2.COLUMN_NAME='project' AND ISC1.TABLE_SCHEMA='some_database' 
```

*   它确实有效，但我觉得编写这种查询是一种不好的方式。如果有人可以改进它，那就太好了。
*   现在我必须更改此查询以选择所有具有“lang”列但没有“project”列的表。老实说，我不知道从哪里开始......

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:49:28.277

```
SELECT DISTINCT(ISC1.TABLE_NAME) AS `table`
FROM INFORMATION_SCHEMA.COLUMNS AS ISC1,
    INFORMATION_SCHEMA.COLUMNS AS ISC2 
WHERE ISC1.TABLE_SCHEMA=ISC2.TABLE_SCHEMA
AND ISC1.TABLE_NAME=ISC2.TABLE_NAME
AND ISC2.COLUMN_NAME='project'
AND ISC1.COLUMN_NAME='lang'
AND ISC1.TABLE_SCHEMA='some_database' 
```

没有项目栏：

```
SELECT DISTINCT(ISC.TABLE_NAME) AS `table`
FROM INFORMATION_SCHEMA.COLUMNS AS ISC
WHERE ISC.COLUMN_NAME='lang'
AND ISC.TABLE_SCHEMA='some_database'
AND NOT EXISTS(SELECT *
    FROM INFORMATION_SCHEMA.COLUMNS C
    WHERE C.COLUMN_NAME = 'project'
    AND C.TABLE_NAME=ISC.TABLE_NAME
    AND C.TABLE_SCHEMA=ISC.TABLE_SCHEMA) 
```

# linux - libnl-3 包括损坏的？

> ID：13686752
> 
> 赞同：1
> 
> 时间：2012-12-03T15:47:11.790
> 
> 标签：linux, ubuntu, ipc, netlink

我正在尝试在 Ubuntu 下使用 libnl 3 ( [http://www.infradead.org/~tgr/libnl/](http://www.infradead.org/~tgr/libnl/) ) 来使用 netlink 以便从 IPv6 邻居缓存中获取一些信息。

我为这个库包含了一堆头文件，但第一个库的 gcc 已经失败：

```
#include <libnl3/netlink/netlink.h> 
```

没有像 libnl.h 这样的“主标头”。

```
>$ gcc netlink_test.c 
In file included from netlink_test.c:11:0:
/usr/include/libnl3/netlink/netlink.h:24:36: fatal error: netlink/netlink-compat.h: No such file or directory
compilation terminated. 
```

文件 netlink.h 包括“netlink/netlink-compat.h”。不幸的是，没有“/usr/include/netlink/”文件夹。只有“/usr/include/libnl3/netlink/”

包括“netlink/netlink.h”因此给了我：

```
netlink_test.c:10:29: fatal error: netlink/netlink.h: No such file or directory
compilation terminated. 
```

我在 Ubuntu 12.04 下安装了以下软件包：

```
libnl-3-200
libnl-3-200-dbg
libnl-3-dev
libnl-3-doc
libnl-genl-3-200
libnl-genl-3-200-dev
libnl-route-3-200
libnl-route-3-200-dev 
```

我在这里遗漏了什么还是真的坏了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T10:15:57.490

好的，所以包装没有破损，我是；）

不久前，他们引入了一种机制，使用户能够安装这个库的不同版本。现在您可以使用“pkg-config”对其进行配置，或者使用“-I /usr/include/libnl3/”将精确的目录传递给编译器。它有效。

# java - EntityUtils toString 在大响应上花费的时间太长

> ID：13686753
> 
> 赞同：1
> 
> 时间：2012-12-03T15:47:13.327
> 
> 标签：java, http, post

以下代码：

```
//
// Define HTTP Post and content
//
HttpPost httppost = new HttpPost(url);
ByteArrayEntity be = new ByteArrayEntity(strPostData.getBytes("UTF-8"));
httppost.setEntity(be);
//
// Define HTTP Client
// 
HttpClient httpclient = new DefaultHttpClient();
HttpParams httpParameters = httpclient.getParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 10 * 1000);
//      
// Sets the default socket timeout
// in milliseconds which is the timeout for waiting for data.
//
int timeoutSocket = 10000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
HttpResponse response = httpclient.execute(httppost);
//      
// This line takes too long on big responses
//
String content = EntityUtils.toString(response.getEntity()); 
```

当我的响应包含大量字节时，最后一行 (EntityUtils.toString) 花费的时间太长。

我正在使用 HTTP Post 检索 PDF 文件**（最大 500 Kb）**，每个请求可能需要 1 或 2 秒，这太多了。

*编辑信息：PDF 文件采用 base 64 编码并包装到 XML 标记中（字符串在接收后解析）。*

有什么方法可以让我的字符串响应更快吗？

编辑 2：为了知道我的 EntityUtils.toString 花了多少时间，我做了一个方法：

```
public static void logger(String header, String content) {
    Date dateActualLog = new Date();
    long milliseconds = (dateActualLog.getTime() - dateLastLog.getTime());
    Log.d(header, String.valueOf(milliseconds) + " => " + content);
    dateLastLog = dateActualLog;
} 
```

（仅供参考：dateLastLog 是一个静态变量）

我像这样修改了上面的代码：

```
//      
// This line takes too long on big responses
//
logger(TAG, "toString ...");
String content = EntityUtils.toString(response.getEntity());
logger(TAG, "toString OK"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T17:16:10.763

好吧，首先要尝试的简单事情是确保您的 Web 服务器`ContentLength`在 HTTP 响应中提供正确的标头。查看 HttpCore`EntityUtils`类的某些版本的源代码，我们看到如果此信息不可用，则默认使用`CharArrayBuffer`仅 4k 的 a，写入时缓冲 1k 数据。在第 4 次、第 5 次和随后的写入`CharArrayBuffer`（一直到 500，你说），它逐渐将缓冲区增加 1k ... 使用`System.arrayCopy()`. 呸。那里有你的表演痛苦。

但是，如果速度对您来说真的很重要，那么您将`EntityUtils`完全避免使用。将流变成临时的 500k 是不负责任的`String`……尤其是在手机上！您需要找到或编写一个`Base64DecodingInputStream`or`Base64DecodingReader`来包装您的`InputStream`from `response.getEntity().getContent()`，并将其提供`String`给您的解析器...而不是...。

# spring - 启用 HiddenHttpMethodFilter 后使用 Spring MVC 3.0.2 上传多个文件

> ID：13686757
> 
> 赞同：7
> 
> 时间：2012-12-03T15:47:20.567
> 
> 标签：spring, spring-mvc, file-upload, spring-3

**重要提示：**这个问题对于任何高于**3.0.4**的 Spring 版本完全没有用，因为该线程中讨论的问题很久以前就已在该版本中[修复](https://jira.spring.io/browse/SPR-2784)，并且在 Spring 的后续版本中不再可重现。

* * *

我正在使用 Spring 3.0.2 版。我需要使用`multiple="multiple"`文件浏览器的属性上传多个文件，例如，

```
<input type="file" id="myFile" name="myFile" multiple="multiple"/> 
```

（而不是使用多个文件浏览器，就像[这个答案](https://stackoverflow.com/a/4241128)所说的那样，它确实有效，我试过了）。

尽管除非使用适当的 jQuery 插件/小部件，否则没有任何版本的 Internet Explorer 支持这种方法，但我现在并不关心它（因为大多数其他浏览器都支持这种方法）。

这适用于[公共文件上传](http://commons.apache.org/fileupload/)，但除了使用`RequestMethod.POST`和`RequestMethod.GET`方法之外，我还想在它们自己的适当位置使用 Spring 支持`RequestMethod.PUT`和建议的其他请求方法。`RequestMethod.DELETE`为此，我已经配置了 Spring，[`HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)正如[这个问题所](https://stackoverflow.com/q/13629653/1391249)表明的那样。

但即使在文件浏览器中选择了多个文件，**它一次也只能上传一个文件。**在 Spring 控制器类中，方法映射如下。

```
@RequestMapping(method={RequestMethod.POST}, value={"admin_side/Temp"})
public String onSubmit(@RequestParam("myFile") List<MultipartFile> files, @ModelAttribute("tempBean") TempBean tempBean, BindingResult error, Map model, HttpServletRequest request, HttpServletResponse response) throws IOException, FileUploadException {
    for (MultipartFile file : files) {
        System.out.println(file.getOriginalFilename());
    }
} 
```

即使请求参数`@RequestParam("myFile") List<MultipartFile> files`是一种[`List`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)类型[`MultipartFile`](http://static.springsource.org/spring/docs/2.0.0/api/org/springframework/web/multipart/MultipartFile.html)（它一次只能有一个文件）。

* * *

[我可以在此博客上](http://dhruba.name/2008/12/27/implementing-single-and-multiple-file-multipart-uploads-using-spring-25/)找到一种可能适用于多个文件的策略。我已经仔细检查过了。

解决*方案 2 – 使用原始请求*部分**下方**的解决方案说，

 *> 但是**，如果客户坚持使用相同的表单输入名称，例如“files[]”或“files”，然后用多个文件填充该名称，则需要进行如下小技巧**。如上所述，如果 Spring 2.5 多次检测到类型文件的相同表单输入名称，则会引发异常。[CommonsFileUploadSupport](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/multipart/commons/CommonsFileUploadSupport.html) –**抛出该异常的类不是最终的，并且抛出该异常的[方法](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/web/multipart/commons/CommonsFileUploadSupport.html#parseFileItems%28java.util.List,%20java.lang.String%29)受到保护，因此使用继承和子类化的奇迹可以简单地修复/修改逻辑，如下所示**。我所做的更改实际上是一个单词代表一种方法调用，它使我们能够以相同的表单输入名称接收多个文件。

它试图覆盖该方法

```
protected MultipartParsingResult parseFileItems(List fileItems, String encoding){} 
```

[`CommonsFileUploadSupport`](http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/web/multipart/commons/CommonsFileUploadSupport.html)通过扩展类来实现抽象类，[`CommonsMultipartResolver`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/multipart/commons/CommonsMultipartResolver.html)例如，

```
package multipartResolver;

import java.io.UnsupportedEncodingException;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import javax.servlet.ServletContext;
import org.apache.commons.fileupload.FileItem;
import org.springframework.util.StringUtils;
import org.springframework.web.multipart.MultipartException;
import org.springframework.web.multipart.MultipartFile;
import org.springframework.web.multipart.commons.CommonsMultipartFile;
import org.springframework.web.multipart.commons.CommonsMultipartResolver;

public final class MultiCommonsMultipartResolver extends CommonsMultipartResolver {

    public MultiCommonsMultipartResolver() {}

    public MultiCommonsMultipartResolver(ServletContext servletContext) {
        super(servletContext);
    }

    @Override
    @SuppressWarnings("unchecked")
    protected MultipartParsingResult parseFileItems(List fileItems, String encoding) {
        Map<String, MultipartFile> multipartFiles = new HashMap<String, MultipartFile>();
        Map multipartParameters = new HashMap();

        // Extract multipart files and multipart parameters.
        for (Iterator it = fileItems.iterator(); it.hasNext();) {
            FileItem fileItem = (FileItem) it.next();

            if (fileItem.isFormField()) {
                String value = null;

                if (encoding != null) {
                    try {
                        value = fileItem.getString(encoding);
                    } catch (UnsupportedEncodingException ex) {
                        if (logger.isWarnEnabled()) {
                            logger.warn("Could not decode multipart item '" + fileItem.getFieldName()
                                    + "' with encoding '" + encoding + "': using platform default");
                        }

                        value = fileItem.getString();
                    }
                } else {
                    value = fileItem.getString();
                }

                String[] curParam = (String[]) multipartParameters.get(fileItem.getFieldName());

                if (curParam == null) {
                    // simple form field
                    multipartParameters.put(fileItem.getFieldName(), new String[]{value});
                } else {
                    // array of simple form fields
                    String[] newParam = StringUtils.addStringToArray(curParam, value);
                    multipartParameters.put(fileItem.getFieldName(), newParam);
                }
            } else {
                // multipart file field
                CommonsMultipartFile file = new CommonsMultipartFile(fileItem);
                if (multipartFiles.put(fileItem.getName(), file) != null) {
                    throw new MultipartException("Multiple files for field name [" + file.getName()
                            + "] found - not supported by MultipartResolver");
                }

                if (logger.isDebugEnabled()) {
                    logger.debug("Found multipart file [" + file.getName() + "] of size " + file.getSize()
                            + " bytes with original filename [" + file.getOriginalFilename() + "], stored "
                            + file.getStorageDescription());
                }
            }
        }

        return new MultipartParsingResult(multipartFiles, multipartParameters);
    }
} 
```

发生的事情是方法中的最后一行`parseFileItems()`（return 语句），即

```
return new MultipartParsingResult(multipartFiles, multipartParameters); 
```

导致编译时错误，因为第一个参数`multipartFiles`是由[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)实现的类型，**但实际上，它需要一个类型的参数**[`HashMap`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html) **`MultiValueMap<String, MultipartFile>`**

 **它是抽象类内部静态类的构造函数[`CommonsFileUploadSupport`](http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/web/multipart/commons/CommonsFileUploadSupport.html)，

```
public abstract class CommonsFileUploadSupport {
    protected static class MultipartParsingResult {
        public MultipartParsingResult(MultiValueMap<String, MultipartFile> mpFiles, Map<String, String[]> mpParams) {}
    }
} 
```

原因可能是 - 这个解决方案是关于 Spring 2.5 版的，我使用的是 Spring 3.0.2 版，这可能不适合这个版本。

* * *

但是，我尝试以各种方式替换 ，[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)例如[`MultiValueMap`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/util/MultiValueMap.html)以下代码段中显示的方式，

```
MultiValueMap<String, MultipartFile>mul=new LinkedMultiValueMap<String, MultipartFile>();   

for(Entry<String, MultipartFile>entry:multipartFiles.entrySet()) {
    mul.add(entry.getKey(), entry.getValue());
}

return new MultipartParsingResult(mul, multipartParameters); 
```

但没有成功。我不确定如何替换[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)，[`MultiValueMap`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/util/MultiValueMap.html)甚至这样做也可以。完成此操作后，浏览器显示 Http 响应，

> **HTTP 状态 400 -**
> 
> 类型状态报告
> 
> **信息**
> 
> 描述客户端发送的请求语法错误（）。
> 
> Apache Tomcat/6.0.26

* * *

我试图尽可能缩短问题，并且我没有包含不必要的代码。

在配置了 Spring 之后，如何才能上传多个文件[`HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)？

该博客表明这是一个长期存在的高优先级错误。

如果没有关于版本 3.0.2（3 或更高版本）的解决方案，那么我必须永远禁用 Spring 支持并继续使用[commons-fileupolad](http://commons.apache.org/fileupload/)，正如该博客上的第三个解决方案所建议的那样，永远省略 PUT、DELETE 和其他请求方法.

* * *

`parseFileItems()`对类内方法中的代码进行很少的更改`MultiCommonsMultipartResolver` 可能会使其上传多个文件，但我的尝试无法成功（再次使用 Spring 版本 3.0.2（3 或更高版本））。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:32:17.973

为了在一个请求中上传多个文件，我使用了以下代码：

**我有这样的jsp：**

```
<p>Select files to upload. Press Add button to add more file inputs.</p>
<table>
    <tr>
        <td><input name="files" type="file" multiple="true"/></td>
    </tr>
    <tr>
        <td><input name="files" type="file" multiple="true"/></td>
    </tr>
</table>
<br/><input type="submit" value="Upload" /> 
```

**文件上传类bean：**

```
import org.springframework.web.multipart.commons.CommonsMultipartFile;

public class FileUploadForm {

    private CommonsMultipartFile [] files;

    public CommonsMultipartFile[] getFiles() {
        return files;
    }

    public void setFiles( CommonsMultipartFile[] files ) {
        this.files = files;
    }
} 
```

**控制器：**

```
@Controller
@RequestMapping("/upload")
public class FileUploadController {

    @RequestMapping(method = RequestMethod.GET)
    public String displayForm(ModelMap modelMap) {
        modelMap.addAttribute( new FileUploadForm() );
        return "uploadForm.jsp";
    }

    @RequestMapping(method = RequestMethod.POST)
    public String save(FileUploadForm uploadForm) {
        CommonsMultipartFile[] files = uploadForm.getFiles();
        if(files != null && files.length != 0) {
            for(MultipartFile file : files) {
                System.out.println( file.getOriginalFilename() );
            }
        }
        return "success.jsp";
    }
} 
```

此代码允许在一个请求中上传多个文件，并且可以获取`CommonsMultipartFile`每个文件的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T08:41:17.470

问题中提到的问题自 Spring 3.0.4 起已[修复](https://jira.spring.io/browse/SPR-2784)。因此，如果您碰巧使用了该版本或更高版本（是的，现在是 4.xx），您将不再需要阅读此问题/答案。***

# asp.net - 对 DetailsView 进行更改时刷新 ASP.Net GridView

> ID：13686760
> 
> 赞同：0
> 
> 时间：2012-12-03T15:47:31.103
> 
> 标签：asp.net, vb.net, gridview, refresh, detailsview

我们有一个 ASP.Net / VB.Net 代码隐藏 Web 表单。此表单上有一个 GridView 和一个 DetailsView。

当细节视图发生变化时，我们希望这些变化反映在 GridView 中。

此代码用于填充 GridView：

```
Private Sub Teachers_Init(sender As Object, e As EventArgs) Handles Me.Init

    ' Load the data from the database into the GridView.
    '---------------------------------------------------
    GridViewSummary.DataSource = theTableAdapter.GetDataAllTeachers
    GridViewSummary.DataBind()
End Sub 
```

在 DetailsView 中对详细信息进行更改后，此编码用于反映 GridView 中的更改：

```
Private Sub DetailsView_ItemUpdated(sender As Object, e As DetailsViewUpdatedEventArgs) Handles DetailsView.ItemUpdated

    ' Refresh the data so current values are displayed.
    '--------------------------------------------------
    GridViewSummary.DataSource = theTableAdapter.GetDataAllTeachers
    GridViewSummary.DataBind()
End Sub 
```

有没有办法不需要使用：

```
 GridViewSummary.DataSource = theTableAdapter.GetDataAllTeachers 
```

在上面的编码中？我知道这只是 1 行代码，但如果不需要，我想删除它。

# c++ - 在 C++ 中使用堆栈评估后缀时处理十进制值

> ID：13686761
> 
> 赞同：1
> 
> 时间：2012-12-03T15:47:31.587
> 
> 标签：c++, evaluation, decimal

我是新发帖者，对使用 c++ 进行编码相对较新。

我的问题涉及： **在使用 c++ 中的堆栈评估后缀时处理十进制值**。这是一项家庭作业，但我已经让我的代码能够满足基本要求。我不是在寻求家庭作业的帮助。我的教授希望我们强行分配作业，所以我避免了许多使用特殊头文件的快捷方式，例如`<stack>`.

我研究了这个问题，对给出的答案不满意。似乎没有其他人像我一样拆分他们的代码。我在将检测十进制值的内部循环中的值传递给主函数的其余部分时遇到问题。代码编译并运行，但我的最终结果是乱码。我发现一篇文章指出不能从带有 的函数传递多个值`'return'`，但我确实需要从内部十进制函数返回至少两个值。我不明白`'tuple'`or`'pair'`命令。

我知道这是一个冗长的前奏，但我确实希望任何读者都明白我已经阅读了先决材料并且确实丢失了研究。就个人而言，我讨厌蛮力方法。我知道回复可能无法及时帮助我的项目，但我已经为此工作了数周。我希望看到这种方法按设想工作而感到满意。非常欢迎提出建议和指点。

这是我的代码的链接： [link](http://ideone.com/z330hh)

这是我的代码：

```
//*****************************************************************************
// Postfix expression evaluation
// 11/13/2012
// by DJH
//
// all applicable copyrights apply
//
// this program evaluates an input postfix string
// 
// created using Dev-C++ 5.2.0.3
//*****************************************************************************

// ----------------------------------libraries---------------------------------

#include <iostream>                     // For cin, cout and endl
#include <string>
#include <cctype>
#include <vector>
#include <sstream>
#include <cstdlib>
#include <cmath>
#include <iomanip>

using namespace std;
// ------------------------------ Globals -------------------------------------
string postfix;

// --------------------------- stack class ------------------------------------
class Stack {
public:
    enum {MaxStack = 50};
    void init() {top = -1;}
    void push( double p ) {
        if ( isFull() ) {
            cerr << "Full Stack. DON'T PUSH\n";
            return;
        }
        else {
            arr[ ++top ] = p;
            cout << "Just pushed " << p << endl;
            return;}
    }
    int pop() {
        if (isEmpty() ) {
            cerr << "\tEmpty Stack. Don't Pop\n\n";
            return 1;
        }
        else
        return arr[top--];
    }
    bool isEmpty() {return top < 0 ? 1 : 0;}
    bool isFull() {return top >= MaxStack -1 ? top : 0;}
    void dump_stack() {
        cout << "The Stack contents, from top to bottom, from a stack dump are: " << endl;
        for (int s = top; s >= 0; s--)
        cout << "\t\t" << arr[s] << endl;
    }
private:
    int top;
    double arr[MaxStack];
} pStack;
// ------------------------------ end stack class -----------------------------

// -----------------------------function prototypes----------------------------
void evalPostfix( string);
double decimalEvaluate( string, int, double);
// ----------------------------------------------------------------------------

// -----------------------------------Main()-----------------------------------
int main() {
    cout << "Enter a postfix expression\n\t (without spaces - using '_' for delimiters):\n\t";
    cout << "For example: 8_5_3_+_*_2_/_5_+\n" << endl;
    getline(cin, postfix);

    //  postfix = "7_2_*_5_+_2_*";
    cout << "You entered: " << postfix << endl;

    int c = 0;

    while (postfix[c] != '\0') {
        // this loop counts the characters in the input string including 
        // whitespace
        ++c;
    }

    cout << "\tThe string length is:\t" << c << endl;
    evalPostfix(postfix);
    int result = pStack.pop();
    cout << "The result of the postfix expression is: " << result << endl;

    /*
     stack commands:
     Stack a_stack;                  // creates new stack
     a_stack.init();                 // initializes top element
     a_stack.pop();                  // pops top of stack
     a_stack.push(n);                // push element to top of stack
     a_stack.dump_stack();           // displays the contents of the stack from top to bottom
     */
    return 0;
    cin.get();
}

// --------------------------------end of Main()-------------------------------

// ------------------------------functions follow------------------------------
void evalPostfix( string) {
    double ch = 0, dc = 0, b = 0, a = 0, d = 0;
    double tempDC = 0;
    double tempDCD = 0;
    char op;
    int i = 0, j = 0, k = 0, m = 0, n = 0, q = 0;
    while (postfix[i] != '\0') {

        if (postfix[i] == '_') {
            i++;
        } else if (isdigit(postfix[i])) {
            ch = postfix[i] - '0';         // for numbers only
            j = i + 1;
            while (postfix[j] != '_') {
                if (isdigit(postfix[j])) {
                    ch = ch * 10 + (postfix[j] - '0');
                    k = j + 1;
                    // this accounts for decimals by skipping the '.' and
                    // conducting operations on trailing numbers
                    if (postfix[k] == '.') {
                        dc = 0;
                        decimalEvaluate(postfix, k, dc);
                        dc = tempDC / tempDCD;
                        d = ch + dc;
                        k++;
                    }
                    j = k - 1;
                    j++;
                }
            }
            cout << "Post decimal function k: " << k << endl;
            cout << "Post decimal function dc: " << setprecision(12) << dc
                    << endl;
            cout << "Post decimal function d: " << d << endl;
            pStack.push(d);
            i = j - 1;
            i++;
        } else if (postfix[i] == '+' || postfix[i] == '-' || postfix[i] == '*'
                || postfix[i] == '/' || postfix[i] == '^') {
            b = pStack.pop();
            a = pStack.pop();
            op = postfix[i];         // for operators only
            switch (op) {
            case '+':
                pStack.push(a + b);
                break;
            case '-':
                pStack.push(a - b);
                break;
            case '*':
                pStack.push(a * b);
                break;
            case '^':
                pStack.push(pow(a, b));
                break;
            case '/':
                if (b == 0) {
                    cout << "Division by zero not allowed!" << endl;
                    cin.get();
                    exit(0);
                }
                pStack.push(a / b);
            default:
                cout << "Invalid Operation" << endl;
            }
            i++;
        }

    }
}
// ----------------------------------------------------------------------------

double decimalEvaluate(string postfix, int k, double dc) {
    dc = 0;
    double tempDC = 0;
    double tempDCD = 0;
    int n = 0, m = 0, lenDC = 0;
    n = k;

    while (postfix[n] != '_') {
        if ((isdigit(postfix[n])) == false) {
            n++;
        }
        cout << "This step (1) n: " << n << endl;
        if (isdigit(postfix[n])) {
            m = n;
            // assumes characters between a '.' and '_' are all digits
            // (may need to check)
            while (postfix[m] != '_') {
                lenDC++;
                // this loop counts the digits in the input trailing a decimal
                // point
                m++; 
            }

            cout << "This step (2) m: " << m << endl;
            cout << "This step (2) lenDC: " << lenDC << endl;

            while ((postfix[n]) != '_') {
                tempDC = tempDC * 10 + (postfix[n]) - '0';
                n++;
            }

            cout << "This step (3) n: " << n << endl;
            cout << "This step (3) tempDC: " << tempDC << endl;
        }

        k = n;
        tempDCD = pow(10, lenDC);
        dc = tempDC / tempDCD;

        cout << "This step (4) k: " << k << endl;
        cout << "This step (4) tempDCD: " << tempDCD << endl;
        cout << "This step (4) tempDC: " << tempDC << endl;
        cout << "This step (4) dc: " << dc << endl;
    }

    return dc, k, tempDC, tempDCD;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:59:46.420

Pass the variables by reference:

```
void decimalEvaluate (string postfix, int& k, double& dc, double& tempDC, double& tempDCD)
{
    tempDC = 0.0;
    //...
} 
```

# django - Django数据库字符集问题

> ID：13686767
> 
> 赞同：3
> 
> 时间：2012-12-03T15:47:44.327
> 
> 标签：django, django-models, character-encoding

我有以下问题，经过一个小时的搜索，我没有得到适当的解决方案。

我有一个具有“长文本”列的 MySQL 数据库表。为了使用更少的空间来存储该文本列中的文件内容，PHP 中使用了以下压缩方法来存储内容。

```
$compressed_content = bzcompress($content);
$db_compressed_content = addslashes($compressed_content); 
```

'db_compressed_content' 使用 PHP 本身存储在数据库中。

现在我可以使用 Django 来利用数据库内容。我能够提出模型类来表示表格。'TextField' 用于表示该特定列。

这是我的确切问题，我使用python**的“bz2.decompress()”**来解压缩并获取文本内容，但是当我尝试这样做时，在 django 下得到了“UnicodeEncodeError”。

仅供参考，用于使用 PHP 在数据库中存储内容的字符集是“latin-1”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-25T18:14:21.317

**答：** Django 使用“utf-8”作为数据库的默认字符集，因此如果您的数据库使用任何其他字符集（大多数旧数据库将配置为“latin1”），那么需要在数据库设置下明确提及该字符集。设置例如：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'test_db',
        'USER': 'root',
        'PASSWORD': '',
        'HOST': '',
        'PORT': '3306',
        'OPTIONS': {
                    'charset': 'latin1',
                    'use_unicode': True, },
    }, 
} 
```

除此之外，如果您不需要使用 unicode，那么您可以将“use_unicode”设置为 False，但我想不推荐这样做。

干杯！！！

# ruby - 在 OS X 10.7.4 上安装 RSRuby 时找不到库

> ID：13686769
> 
> 赞同：2
> 
> 时间：2012-12-03T15:47:53.127
> 
> 标签：ruby, r, gem

我正在尝试在我的 Mac 上安装 RSRuby。调用后：

```
sudo gem install rsruby 
```

我收到此错误：

```
ERROR: Cannot find the R library, aborting.
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/xxxxx/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
    --with-R-dir
    --with-R-include
    --without-R-include=${R-dir}/include
    --with-R-lib
    --without-R-lib=${R-dir}/lib
    --with-Rlib
    --without-Rlib 
```

我正在使用 Mac OS X 10.7.4 并通过提供的 .pkg 安装了 R。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:57:51.440

对于处于相同情况的任何人，只需执行以下操作：

```
$ R_HOME=/Library/Frameworks/R.framework/Resources
$ gem install rsruby -- --with-R-dir=$R_HOME 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-14T10:50:21.310

我遇到了这个问题，因为我还没有在我的 mac（优胜美地）上安装 R。我是用

```
$ brew tap homebrew/science 
$ brew install gcc
$ brew install Caskroom/cask/xquartz
$ brew install r 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T18:50:40.210

我正在运行 OS X 10.9.4，这对我有用。

```
export R_HOME=/Library/Frameworks/R.framework/Resources
gem install rsruby -- --with-R-dir=$R_HOME --with-R-include=$R_HOME/include --with-R-lib=$R_HOME/lib 
```

# c# - 为什么我的 FederatedAuthentication.FederationConfigurationCreated 为空？

> ID：13686780
> 
> 赞同：1
> 
> 时间：2012-12-03T15:48:52.173
> 
> 标签：c#, asp.net-mvc, azure-acs

我以前在我的 ACS 联合安全应用程序中使用过它：

```
 FederatedAuthentication.FederationConfigurationCreated +=
FederatedAuthentication_FederationConfigurationCreated; 
```

在 global.asax.cs 文件中。出于某种原因，它在我当前的应用程序中为空，我不知道为什么。任何人都得到了一些关于可能导致这种情况的提示。

```
 <system.identityModel>
    <identityConfiguration>
      <audienceUris>
        <add value="site" />
      </audienceUris>
      <issuerNameRegistry type="System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <trustedIssuers>
          <add name="https://s-innovations.accesscontrol.windows.net/" thumbprint="thmp" />
        </trustedIssuers>
      </issuerNameRegistry>
      <certificateValidation certificateValidationMode="None" />
      <securityTokenHandlers>
        <add type="System.IdentityModel.Services.Tokens.MachineKeySessionSecurityTokenHandler, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <remove type="System.IdentityModel.Tokens.SessionSecurityTokenHandler, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </securityTokenHandlers>
    </identityConfiguration>
  </system.identityModel>
  <system.identityModel.services>
    <federationConfiguration>
      <cookieHandler requireSsl="false" />      
      <wsFederation passiveRedirectEnabled="false" issuer="https://s-innovations.accesscontrol.windows.net/v2/wsfederation" realm="site" requireHttps="false" />
    </federationConfiguration>
  </system.identityModel.services> 
```

# python - Python终端菜单？终端着色？终端进度显示？

> ID：13686781
> 
> 赞同：2
> 
> 时间：2012-12-03T15:48:54.887
> 
> 标签：python, bash, menu, terminal

我有一个广泛使用 Python（2.* 风格）的项目，我想知道是否有终端菜单库或类似的东西？我希望通过使用箭头键突出显示选项、一些颜色等来简化一些选项，从而为我的脚本注入一些风味和活力。我隐约记得有一种方法可以制作 bash shell 终端菜单，但我不在确定我将如何将用户输入从 bash 传递到 python 脚本，也许有一个 bash 终端菜单用 sysargs 推送脚本调用？如果可能的话，我想要 python 方面的东西。有什么建议么？

也只是一个随机的问题，因为我们讨论的是终端美学这个话题，所以这里很适合，处理柜台的最佳方式是什么？我的脚本查找图像文件，然后当它找到一个时，它通过子进程调用清除终端以清除，然后再次打印找到的总图像 IE 10 图像，找到一个，清除，打印“找到 11 个图像”，有时我的脚本有效真的很快，我觉得这会损害性能。想法？

非常感谢大家，我喜欢堆栈溢出；）

编辑 - 感谢所有快速回复！我有很多选择要考虑。我给了每个人一个赞成票，因为您的所有回答都很有帮助。当我回到家时，我会查看所有的图书馆，并尝试根据最佳答案选择你们中的一个作为答案，但希望我能选择你们所有人，因为你的所有答案都是相关的！非常感谢各位。下班回家后我会回来报告并有机会编写一些代码；）

编辑 2 - 计数器/进度显示的说明，当我的脚本在很短的时间内找到数千张图像时，寻找一种方法来防止这种情况损害性能，这是真正切碎的 python ...

```
for each item in list:
    if item ends with .jpg
        cnt=cnt+1
        do stuff with image file
        subprocess.call('clear')
        print str(cnt)+" total images processed." 
```

再次感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:37:00.967

看看**Clint** (* *C* *command * *L* *ine * *IN* *terface * *T* *tools)！

*   官方页面：[https ://github.com/kennethreitz/clint](https://github.com/kennethreitz/clint)
*   很棒的概述：[http ://www.nicosphere.net/clint-command-line-library-for-python/](http://www.nicosphere.net/clint-command-line-library-for-python/)

示例颜色：

```
from clint.textui import colored

print 'I love ' + colored.yellow('pyt') + colored.blue('hon') 
```

和缩进：

```
from clint.textui import colored, indent, puts

with indent(3, quote=colored.red(' >')):
    puts ('some random text')
    puts ('another text')
    with indent(3, quote=colored.green(' |')):
        puts('some more nested identation')
        puts('cool isn\'t?') 
```

PS 同一作者写了一个类似的不错的 HTTP 请求库，叫做“requests”：[https ://github.com/kennethreitz/requests](https://github.com/kennethreitz/requests)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T15:53:42.893

如果你想要大量控制并且你在 *nix 上，你可以使用 stdlib [curses 模块](http://docs.python.org/2/library/curses.html)。

如果你只是想要一点颜色（/不想修改你的脚本以适应`curses`），你可以使用[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code#Colors)。例如：

```
print '\033[1;32mgreen\033[1;m' 
```

将打印“绿色”字样...绿色。

这是我使用回车提出的加载栏（基于[此论坛](http://ubuntuforums.org/showthread.php?t=1189350)中的答案）：

```
from time import sleep 
import sys 

num = 100

print 'Loading: [%s] %d%%' % (' '*(num/2), 0),

try:
    colorCode = 43
    for x in xrange(num+1):
        if x == num: colorCode = 42
        print '\rLoading: [\033[1;%dm%s\033[1;m%s] %d%%' % (colorCode, "|"*(x/2), " "*(num/2-x/2), x), 
        sys.stdout.flush()
        sleep(0.02) # do actual stuff here instead 
except KeyboardInterrupt:
        print '\rLoading: [\033[1;41m%s\033[1;m%s] %d%%  ' % ("|"*(x/2), " "*(num/2-x/2), x) 
```

示例输出：

```
Loading: [|||||||||||||||||||||||||||||||||||||||||         ] 82% 
```

（虽然它没有显示在 SO 上，但它是彩色的——黄色表示加载，红色表示中止，绿色表示完成。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T16:06:13.213

有一个名为[Urwid](http://lwn.net/Articles/172998/)的库，提供菜单等。我从未将它用于严肃的目的，但根据我的初步经验，它工作得很好。它仅适用于 Un*x 系统。（项目页面说它在 Cygwin 下工作，但我从未尝试过。）

# facebook-graph-api - 自定义应用程序中的 FB 喜欢页面

> ID：13686782
> 
> 赞同：2
> 
> 时间：2012-12-03T15:48:57.437
> 
> 标签：facebook-graph-api, facebook-like, facebook-fql, facebook-likebox

目前我正在开发一个自定义的 facebook 应用程序。

简单地说，它会列出公司的产品。

对于每种产品（每页 10 个），我不仅想显示公司 FB 页面的数量，而且还想展示一些面孔（喜欢该页面的人）。我的想法看起来很像 FB like box 插件，尽管我无法自定义它的设计。

我提出的一个选择是获取所有喜欢的朋友（每天 1 次）并且只显示这些面孔，尽管这可能会变得非常服务器繁重，因为将有几百家公司。这最终将使每天轻松 1000 个用户 = 1000 * 500 个查询。

不知何故，我找不到任何其他喜欢“刮”样框的方法（每个列表只需要 5 到 10 个面孔）。

# c# - 设置幻灯片以更新系列颜色

> ID：13686784
> 
> 赞同：1
> 
> 时间：2012-12-03T15:49:04.887
> 
> 标签：c#, charts, aspose

```
ChartDataCellFactory fact = chart.ChartData.ChartDataCellFactory;
            ChartSeriesEx series = chart.ChartData.Series[0];

       for(int i=0;i<9;i++)
       {

            fact.GetCell(0, 0, 1, "Index");
            series.Values[check].Value = 10;
       } 
```

以上是我当前使用 aspose.slides 更新图表的代码。我想知道如何更改代码的代码系列的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:36:02.887

我的名字是 Nayyer，我是 Aspose 的开发布道者。

请尝试使用以下设置特定系列填充颜色的代码片段。

```
ChartSeriesEx series = chart.ChartData.Series[0];
series.Format.Fill.FillType = FillTypeEx.Solid;
series.Format.Fill.SolidFillColor.Color = Color.FromArgb(32, 202, 250);
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 1, 1, 40));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 2, 1, 64));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 3, 1, 50));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 4, 1, 1)); 
```

但是，您可以考虑查看以下代码片段，因为它可以帮助您理解使用不同图表实体的概念。但首先我想在 X 轴（类别轴）上分享，类别绘制在 Y 轴（值轴）上。您能否通过设置 x 轴和 y 轴的最小/最大值来详细说明您的意思。x 轴仅包含类别名称。其次，以我的拙见，在 PowerPoint 中也无法设置值轴的最小/最大值。您能否以快照的形式分享在 PowerPoint 中设置轴的最小/最大值的方式，我将尝试使用 Aspose.Slides 在我的末端实现相同的方法。请分享这方面的信息，以便我可以进一步帮助您。

以下代码还显示了如何在辅助轴上绘制系列值。

```
PresentationEx pres;
pres = new PresentationEx();
SlideEx sld = pres.Slides[0];
ChartEx chart = sld.Shapes.AddChart(ChartTypeEx.ClusteredColumn, 0, 0, 500, 500);
chart.ChartTitle.Text.Text = "Sample Title";
chart.ChartTitle.Text.CenterText = true;
chart.ChartTitle.Height = 20;
chart.HasTitle = false;
chart.HasLegend = false;
chart.ChartData.Series[0].Labels.ShowValue = true;

chart.SecondCategoryAxis.IsVisible = true;

int defaultWorksheetIndex = 0;
ChartDataCellFactory fact = chart.ChartData.ChartDataCellFactory;
chart.ChartData.Series.Clear();
chart.ChartData.Categories.Clear();
int s = chart.ChartData.Series.Count;
s = chart.ChartData.Categories.Count;
chart.ChartData.Series.Add(fact.GetCell(defaultWorksheetIndex, 0, 1, "1"), chart.Type);
chart.ChartData.Series.Add(fact.GetCell(defaultWorksheetIndex, 0, 2, "2"), chart.Type);
chart.ChartData.Series.Add(fact.GetCell(defaultWorksheetIndex, 0, 3, "3"), chart.Type);
chart.ChartData.Categories.Add(fact.GetCell(defaultWorksheetIndex, 1, 0, "Age"));
chart.ChartData.Categories.Add(fact.GetCell(defaultWorksheetIndex, 2, 0, "Gender"));
chart.ChartData.Categories.Add(fact.GetCell(defaultWorksheetIndex, 3, 0, "Status"));
chart.ChartData.Categories.Add(fact.GetCell(defaultWorksheetIndex, 4, 0, "Nationality"));
chart.GapDepth = 200;
//chart.GapWidth = 50 I need to be able to do something similar to this code

ChartSeriesEx series = chart.ChartData.Series[0];
series.Format.Fill.FillType = FillTypeEx.Solid;
series.Format.Fill.SolidFillColor.Color = Color.FromArgb(32, 202, 250);
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 1, 1, 40));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 2, 1, 64));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 3, 1, 50));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 4, 1, 1));
series.PlotOnSecondAxis = true;

series = chart.ChartData.Series[1];
series.Format.Fill.FillType = FillTypeEx.Solid;
series.Format.Fill.SolidFillColor.Color = Color.FromArgb(0, 122, 171);
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 1, 2, 4));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 2, 2, 19));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 3, 2, 50));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 4, 2, 25));
series.PlotOnSecondAxis = true;

series = chart.ChartData.Series[2];
series.Format.Fill.FillType = FillTypeEx.Solid;
series.Format.Fill.SolidFillColor.Color = Color.FromArgb(0, 136, 188);
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 1, 2, 3));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 2, 2, 17));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 3, 2, 0));
series.Values.Add(fact.GetCell(defaultWorksheetIndex, 4, 2, 63));

series.PlotOnSecondAxis = true;

chart.GapDepth = 80;//Values in percentage
chart.GapWidth = 250;

pres.Write("D:\\Aspose Data\\Presentation2.pptx"); 
```

# html - 如何实现像这里的曲线？

> ID：13686787
> 
> 赞同：-2
> 
> 时间：2012-12-03T15:49:15.150
> 
> 标签：html, css

我正在创建一个新网站，并希望重新创建 SAVE 25% 横幅的弧形角落。[http://www.sonycreativesoftware.com/](http://www.sonycreativesoftware.com/)

有谁知道我会如何用css或html做到这一点？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:50:25.843

将图像用作`background-image`，并应用于`border-radius`元素

```
div
{
    background-image:url('http://placehold.it/350x150');
    width:350px;height:150px;
    border-radius:5px;
}​ 
```

[http://jsfiddle.net/mdNCm/1/](http://jsfiddle.net/mdNCm/1/)

* * *

您可以使用[border-radius.com](http://border-radius.com/)生成跨浏览器CSS

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:52:15.203

是的，通过使用[border-radius](http://www.w3schools.com/cssref/css3_pr_border-radius.asp)。

**CSS：**

```
div.rounded{
    border-radius: 5px;
    border: 1px solid black;
} 
```

**HTML：**

```
<div class="rounded">This text is in a rounded border!</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:50:56.850

这是一个 css3 功能，尚未完全支持所有浏览器。进一步了解此标签：

```
border-radius: 25px; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T16:34:47.510

你可以用border-radius: 5px;

如果你想要一个有角的边框，请使用这个。Border-radius.com 为您提供代码。

注意：border-radius 不适用于某些浏览器，例如 ie

或者，您可以在 css 中使用一些图像作为背景。

# matplotlib - matplotlib gtk 问题

> ID：13686789
> 
> 赞同：2
> 
> 时间：2012-12-03T15:49:23.723
> 
> 标签：matplotlib, gtk, x11

首先，我对 Python、Xwindows、Matplotlib 或 GTK 知之甚少。我正在尝试运行一个名为 SpliceGrapher 的工具，它使用上述内容。我收到一个（丑陋，抱歉）错误：

```
 /usr/lib64/python2.6/site-packages/gtk-2.0/gtk/__init__.py:57: GtkWarning: could not open display
 warnings.warn(str(e), _gtk.Warning)
 /home/my/bin/lib64/python2.6/site-packages/matplotlib/backends/backend_gtk.py:52: GtkWarning: gdk_cursor_new_for_display: assertion `GDK_IS_DISPLAY (display)' failed
 cursors.MOVE          : gdk.Cursor(gdk.FLEUR),
 Traceback (most recent call last):
 File "/home/my/bin/SpliceGrapher-0.2.0/scripts/view_splicegraphs.py", line 28, in <module>
    from pylab      import *
  File "/home/my/bin/lib64/python2.6/site-packages/pylab.py", line 1, in <module>
from matplotlib.pylab import *
  File "/home/my/bin/lib64/python2.6/site-packages/matplotlib/pylab.py", line 264, in <module>
from matplotlib.pyplot import *
  File "/home/my/bin/lib64/python2.6/site-packages/matplotlib/pyplot.py", line 95, in <module>
new_figure_manager, draw_if_interactive, _show = pylab_setup()
  File "/home/my/bin/lib64/python2.6/site-packages/matplotlib/backends/__init__.py", line 25, in pylab_setup
globals(),locals(),[backend_name])
  File "/home/my/bin/lib64/python2.6/site-packages/matplotlib/backends/backend_gtkagg.py", line 10, in <module>
from matplotlib.backends.backend_gtk import gtk, FigureManagerGTK, FigureCanvasGTK,\
  File "/home/my/bin/lib64/python2.6/site-packages/matplotlib/backends/backend_gtk.py", line 52, in <module>
    cursors.MOVE          : gdk.Cursor(gdk.FLEUR),
  RuntimeError: could not create GdkCursor object 
```

如果有人知道我能做什么，那就太好了。

我在 Linux (RedHat) 系统上，通过 puTTy 使用 Xming。我配置了 X11，并且 xeyes 显示了跟随我的鼠标的小眼睛，所以我知道那是有效的。

新错误：

```
16:00:46 view_splicegraphs.py Started
Traceback (most recent call last):
File "/home/bmoran/bin/SpliceGrapher-0.2.0/scripts/view_splicegraphs.py", line 164, in <module>
g = getFirstGraph(f)
File "/home/bmoran/bin/lib64/python2.6/site-packages/SpliceGrapher/SpliceGraph.py", line 371, in getFirstGraph
result = SpliceGraphParser(f, **args).next()
File "/home/bmoran/bin/lib64/python2.6/site-packages/SpliceGrapher/SpliceGraph.py", line 1351, in __init__
self.loadFromFile()
File "/home/bmoran/bin/lib64/python2.6/site-packages/SpliceGrapher/SpliceGraph.py", line 1424, in loadFromFile
raise ValueError("Graph feature found before graph header at line %d" % lineNo)
ValueError: Graph feature found before graph header at line 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:56:12.373

```
 /usr/lib64/python2.6/site-packages/gtk-2.0/gtk/__init__.py:57: GtkWarning: could not open display 
```

告诉您您的脚本无权访问您的 X 会话。

你可以在这里发布你的脚本吗？

您是否使用 访问机器`ssh -XC ...`？

当你发出shell时`echo $DISPLAY`你看到了什么？
当您添加脚本`print os.getenv("DISPLAY")`时，您会看到相同的结果吗？

还有一点注意...我不知道`Xming`，但我可以推荐你试试[MobaXterm](http://mobaxterm.mobatek.net/)，它有一个为 Windows 编译的内置 ssh 和 X11 服务器，我猜它会解决你的 X 问题。

# azure - 上传名称中带括号 ([ & ]) 的文件

> ID：13686792
> 
> 赞同：4
> 
> 时间：2012-12-03T15:49:31.287
> 
> 标签：azure, azure-storage, azure-blob-storage, azure-sdk-.net

我正在将 ClickOnce 安装从常规 Web 服务器移动到 Azure Blob 存储，并且某些文件存在问题。文件名包含`[` `]`并`CloudBlob.UploadFile`失败并出现异常：

> Microsoft.WindowsAzure.Storageclient.StorageException：
> 访问 Blob 存储时出错：服务器无法对请求进行身份验证。确保 Authorization 标头的值正确形成，包括签名。

该代码已经使用了一段时间，并且只`[` `]`在名称中的文件上失败，所以我不认为这是“身份验证失败”。在这种特殊情况下，这是循环上传的第七个文件。我[在 MSDN 上找到了这个关于有效文件名的链接](http://msdn.microsoft.com/en-us/library/windowsazure/dd135715.aspx)和[这个关于堆栈溢出的链接，它们都显示了 URL 和参考中方括号的问题`UrlEncode`](https://stackoverflow.com/questions/40568/square-brackets-in-urls)。我添加了一个电话`UrlEncode`，但没有帮助。该容器是通过公共访问创建的，因为我们使用它来支持客户下载我们的软件。我们一直在另一个容器中托管“测试”安装，并且访问该容器也没有权限问题。

我可以在不更改名称的情况下上传文件，然后使用 newdesic 的 Azure 存储资源管理器工具重命名文件以添加“路径”，那么我没有在做什么呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T20:35:26.663

我看到您使用的是 1.7 SDK。这是 SDK 的一个小编码问题，也存在于 v2.0 中。让我们看看发生了什么。

## 无编码

```
account.CreateCloudBlobClient()
       .GetContainerReference("temp")
       .GetBlobReference("abc[]def.txt")
       .UploadFile("myfile.txt"); 
```

如果您不对 blob 名称进行编码，您最终会收到对以下导致身份验证异常的 URL 的请求：

> [http://account.blob.core.windows.net/temp/abc[]def.txt](http://account.blob.core.windows.net/temp/abc[]def.txt)

这是因为 SDK 在`Uri.EscapeUriString`内部使用对您的字符串进行编码，但这没有考虑方括号。

## 编码

然后，您会期望以下内容可以解决问题：

```
account.CreateCloudBlobClient()
       .GetContainerReference("temp")
       .GetBlobReference(HttpUtility.UrlEncode("abc[]def.txt"))
       .UploadFile("myfile.txt"); 
```

这里的问题是你最终会得到这个网址：

> [http://account.blob.core.windows.net/temp/abc%255b%255ddef.txt](http://account.blob.core.windows.net/temp/abc%255b%255ddef.txt)

那么这里发生了什么？调用 HttpUtility.UrlEncode 将**abc[]def.txt**变为**abc%5B%5Ddef.txt**，这是正确的。但是在内部，SDK 会再次编码这个字符串，这会导致**abc%255b%255ddef.txt**，这不是你想要的。

## 解决方法

应用包含方括号的编码的唯一方法是使用一个小的解决方法。如果您将完整 URL 传递给 GetBlobReference 方法，则 SDK 假定您自己完成了所有编码：

```
var container = account.CreateCloudBlobClient().GetContainerReference("temp");
var blob = container.GetBlobReference(String.Format("{0}/{1}", 
                container.Uri, System.Web.HttpUtility.UrlEncode("abc[]def.txt")));
blob.UploadFile("myfile.txt"); 
```

这会产生正确编码的 URL：

```
http://account.blob.core.windows.net/temp/abc%5b%5ddef.txt 
```

如果您使用 CloudXplorer 之类的工具，您将看到具有正确文件名的 blob：

![在此处输入图像描述](../Images/d66bb6c67d591924572513e1b8e07410.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T22:12:25.520

.Net 4.5 中的 Uri 类有两个已知的中断

• '[',']' 字符不再被转义

• '\' 字符现在转义为 %5C

当服务器尝试验证请求的签名时，这会导致身份验证，因为规范化字符串现在在客户端和服务器上不同。

存在此问题时，客户可以使用一些解决方法。正确的解决方案将取决于您的具体应用和要求。避免资源名称中的 '['、']' 或 '\' 字符 通过简单地同时避免这些字符，您将能够避免上述问题。

**目标.Net 4.0**

目前，建议客户在调查完整解决方案的同时继续将其应用程序定位到 .Net 4.0。请注意，由于 .Net 4.5 是就地升级，客户端仍然可以利用 GC 等方面的一些性能改进，而无需专门针对 .Net 4.5 配置文件。对于 Windows RT 开发人员来说，这不是一个选项，因此您需要下面详述的解决方法。

**逃逸前数据**

如果可能，客户端可以预先转义数据或用不受影响的字符替换给定的字符。这就是上述解决方法有效的原因。

# php - Magento 分页未显示在主页上

> ID：13686797
> 
> 赞同：0
> 
> 时间：2012-12-03T15:49:54.280
> 
> 标签：php, magento

我按照本教程[http://www.dnawebagency.com/displaying-new-products-in-magento-with-pagination](http://www.dnawebagency.com/displaying-new-products-in-magento-with-pagination)来展示最新产品。所有工作完美，工具栏显示，分页工作良好（我检查了在链接末尾手动添加：“？p = 2”）。

那么，问题/问题是：不显示页面的原因是什么？

![我放了一个打印屏幕看看会发生什么](../Images/6dda60b6676afe94684a55e9344c6ab2.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:57:04.380

解决了！

只需在“布局更新 XML”中添加：

```
<reference name="content">
<block type="catalog/product_new" name="home.catalog.product.new" template="catalog/product/new.phtml">
    <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
        <block type="page/html_pager" name="product_list_toolbar_pager"/>
    </block>
    <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
</block>
</reference> 
```

# java - 正则表达式模式 - 仅在用连字符分隔时提取字符串

> ID：13686799
> 
> 赞同：0
> 
> 时间：2012-12-03T15:49:56.890
> 
> 标签：java, regex

我看过其他问题，但他们没有让我得到答案。

我有这个代码：

```
Pattern p = Pattern.compile("exp_(\\d{1}-\\d)-(\\d+)"); 
```

我要匹配的字符串是：`exp_5-22-718`

我想提取`5-22`和`718`. 我不太确定为什么它不起作用我错过了什么？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:51:34.570

如果字符串总是以`exp_`我不会使用正则表达式作为前缀。

我会：

*   [`replaceFirst()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29) `exp_`
*   [`split()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)结果字符串`-`

**注意：**此答案基于假设。如果您有多个连字符，我将其提供为更强大的功能。但是，如果您需要验证数字的格式，那么正则表达式可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:54:42.777

试试这个：

```
Pattern p = Pattern.compile("exp_(\\d-\\d+)-(\\d+)"); 
```

在您的原始模式中，您指定第二个数字应该只包含一个数字，所以我`\d+`尽可能多地匹配。我也`{1}`从第一个数字定义中删除了，因为它没有为正则表达式增加价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:56:14.650

在您的正则表达式中，您错过了第二个数字所需的量词`\\d`。这个量词是`+`or `{2}`。

```
 String yourString = "exp_5-22-718";

    Matcher matcher = Pattern.compile("exp_(\\d-\\d+)-(\\d+)").matcher(yourString);
    if (matcher.find()) {
        System.out.println(matcher.group(1)); //prints 5-22
        System.out.println(matcher.group(2)); //prints 718
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T16:00:25.533

您可以使用 string.split 方法来执行此操作。检查以下代码。我假设您的字符串以“exp_”开头。

```
 String str = "exp_5-22-718";
    if (str.contains("-")){
        String newStr = str.substring(4, str.length());
        String[] strings = newStr.split("-");

        for (String string : strings) {
            System.out.println(string);
        }
    } 
```

# excel - 如何确定 VBA 中使用的最后一行，包括中间的空格

> ID：13686801
> 
> 赞同：36
> 
> 时间：2012-12-03T15:49:59.283
> 
> 标签：excel, vba

如何确定 Excel 工作表中的最后一行，包括中间的一些空白行？

使用此功能：

```
Function ultimaFilaBlanco(col As String) As Long        
        Dim lastRow As Long
        With ActiveSheet
            lastRow = ActiveSheet.Cells(ActiveSheet.Rows.Count, col).End(xlUp).row
        End With            
        ultimaFilaBlanco = lastRow          
End Function 
```

而这个数据：

```
Row 1 : Value
Row 2 : Value
Row 3 : Value
Row 4 : Value
Row 5 : Value
Row 6 : White
Row 7 : Value
Row 8 : Value
Row 9 : Value
Row 10  : White
Row 11  : White
Row 12  : White
Row 13  : Value
Row 14  : White 
```

该函数返回 5，我需要 13。知道该怎么做吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-06-12T14:19:29.413

获取使用的最后一行数的最佳方法是：

`ActiveSheet.UsedRange.Rows.Count`对于**当前工作表**。

`Worksheets("Sheet name").UsedRange.Rows.Count`对于**特定的工作表**。

要获取使用的最后一列的编号：

`ActiveSheet.UsedRange.Columns.Count`对于**当前工作表**。

`Worksheets("Sheet name").UsedRange.Columns.Count`对于**特定的工作表**。

我希望这有帮助。

阿卜杜

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-12-23T14:30:56.973

```
ActiveSheet.UsedRange.Rows.Count + ActiveSheet.UsedRange.Rows(1).Row -1 
```

短的。安全的。快速地。即使工作表顶部或其他任何地方有空行，也会返回最后一个非空行。也适用于空工作表（Excel 报告在空工作表上使用了 1 行，因此表达式将为 1）。在 Excel 2002 和 Excel 2010 上测试和工作。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-03T17:24:18.060

我使用以下内容：

```
lastrow = ActiveSheet.Columns("A").Cells.Find("*", SearchOrder:=xlByRows, LookIn:=xlValues, SearchDirection:=xlPrevious).Row 
```

它会在特定列中找到最后一行。*如果您想要任何*列的最后使用行，则：

```
lastrow = ActiveSheet.Cells.Find("*", SearchOrder:=xlByRows, LookIn:=xlValues, SearchDirection:=xlPrevious).Row 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-12-03T16:18:57.577

你真的很亲近。尝试使用大行号`End(xlUp)`

```
Function ultimaFilaBlanco(col As String) As Long

        Dim lastRow As Long
        With ActiveSheet
            lastRow = ActiveSheet.Cells(1048576, col).End(xlUp).row
        End With

        ultimaFilaBlanco = lastRow

End Function 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-03T16:19:07.700

```
LastRow = ActiveSheet.UsedRange.Rows.Count 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-06-14T12:03:43.927

问题是您的函数中的“作为字符串”。将其替换为“as double”或“as long”以使其工作。如果最后一行大于接受的答案中提出的“大数字”，它甚至可以工作。

所以这应该有效

```
Function ultimaFilaBlanco(col As double) As Long        
    Dim lastRow As Long
    With ActiveSheet
        lastRow = ActiveSheet.Cells(ActiveSheet.Rows.Count, col).End(xlUp).row
    End With            
    ultimaFilaBlanco = lastRow          
End Function 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-06-21T05:26:43.230

如果工作表顶部包含未使用区域，`UsedRange.Rows.Count`则不是最大行。

这是正确的最大行数。

```
maxrow = Sheets("..name..").UsedRange.Rows(Sheets("..name..").UsedRange.Rows.Count).Row 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-05T17:23:20.050

除了所有提到的方法之外，还有其他几种方法可以找到工作表或指定范围中的最后一行或最后一列。

```
Function FindingLastRow(col As String) As Long

  'PURPOSE: Various ways to find the last row in a column or a range
  'ASSUMPTION: col is passed as column header name in string data type i.e. "B", "AZ" etc.

   Dim wks As Worksheet
   Dim lstRow As Long

   Set wks = ThisWorkbook.Worksheets("Sheet1") 'Please change the sheet name
   'Set wks = ActiveSheet   'or for your problem uncomment this line

   'Method #1: By Finding Last used cell in the worksheet
   lstRow = wks.Range("A1").SpecialCells(xlCellTypeLastCell).Row

   'Method #2: Using Table Range
   lstRow = wks.ListObjects("Table1").Range.Rows.Count

   'Method #3 : Manual way of selecting last Row : Ctrl + Shift + End
   lstRow = wks.Cells(wks.Rows.Count, col).End(xlUp).Row

   'Method #4: By using UsedRange
   wks.UsedRange 'Refresh UsedRange
   lstRow = wks.UsedRange.Rows(wks.UsedRange.Rows.Count).Row

   'Method #5: Using Named Range
   lstRow = wks.Range("MyNamedRange").Rows.Count

   'Method #6: Ctrl + Shift + Down (Range should be the first cell in data set)
   lstRow = wks.Range("A1").CurrentRegion.Rows.Count

   'Method #7: Using Range.Find method
   lstRow = wks.Column(col).Cells.Find("*", SearchOrder:=xlByRows, LookIn:=xlValues, SearchDirection:=xlPrevious).Row

   FindingLastRow = lstRow

End Function 
```

**注意**：请仅使用上述方法之一，因为它可以证明您的问题陈述。

请注意*Find 方法看不到单元格格式*，而只有数据，因此如果只有数据重要而不是格式，则查找 xlCellTypeLastCell。此外，*合并单元格（必须避免）可能会给您带来意想不到的结果*，因为它会给您第一个单元格的行号，而不是合并单元格中的最后一个单元格。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-29T21:48:48.953

```
ActiveSheet.UsedRange.Rows(ActiveSheet.UsedRange.Rows.count).row 
```

ActiveSheet 可以替换为`WorkSheets(1)`或`WorkSheets("name here")`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-09-14T08:51:23.157

这是我在第一行“A”中查找下一个空行的代码。要将其用于任何其他行，只需更改单元格（i、2 或 3 或 4 等等）

```
Sheets("Sheeet1").Select
   for i=1 to 5000
        if cells(i,1)="" then nextEmpty=i goto 20
   next i
20 'continue your code here 

enter code here 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-12-12T13:43:37.377

更好的：

```
if cells(i,1)="" then 
nextEmpty=i: 
exit for 
```

# java - 毫无意义地使用 PrintStream？

> ID：13686803
> 
> 赞同：1
> 
> 时间：2012-12-03T15:50:05.903
> 
> 标签：java

我正在查看一个`OutputStream`通过其构造函数获取对象并使用它来创建`PrintStream`对象的类，如下所示：

```
this.pout = new PrintStream(out); 
```

然后这个类`pout`在类实现中的许多地方以下列方式使用对象：

```
String string;
...
pout.print(string);
pout.flush(); 
```

我是否正确地说在这里使用 PrintStream 是没有意义的，并且这会完成同样的工作：

```
this.out = out
...
out.print(string);
out.flush(); 
```

其中 out 是 type `OutputStream`。

另外，我正在使用此类在 ssh2 连接上写出命令。然后我使用一个类实现`InputStream`来读回响应。在轮询回复之前是否有任何幕后同步`OutputStream`，或者我是否应该始终调用flush？`InputStream`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:51:28.173

第二个片段无效。[`OutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html)没有`print()`方法。

> 在轮询回复之前是否有任何幕后同步`OutputStream`，或者我是否应该始终调用flush？`InputStream`

这取决于您使用的实际流类的机制。如有疑问，请使用`flush()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:03:43.167

除了在 中明显缺少`print...()`方法外`OutputStream`，PrintStream 还抑制`IOException`并设置了一个错误标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:02:36.363

print() 调用 write() 但隐藏任何可能发生的 IOException。这通常比有用更危险，除非您正在写入永远不会失败的设备，或者只有在用户控制中才会失败，例如 System.out 和 System.err 是 PrintStream 并且程序的调用者可能会在程序运行时关闭它们跑。

# image - 当我合并复制两个png时php裁剪图像

> ID：13686805
> 
> 赞同：1
> 
> 时间：2012-12-03T15:50:07.343
> 
> 标签：image, transparency, crop

如果可能的话，我需要一些帮助，我想将两个图像与 php 结合起来，两者都是 png，只有一个是透明度。

我的问题是：当制作“imagecopy”时，我想要顶部裁剪第二张图像。附上一张图片以最好地解释。 [图片](http://i.stack.imgur.com/PZDPR.png)

代码是：

```
function imagecopymerge_alpha($dst_im, $src_im, $dst_x, $dst_y, $src_x, $src_y, $src_w, $src_h, $pct){ 
$cut = imagecreatetruecolor($src_w, $src_h);
imagecopy($cut, $dst_im, 0, 0, $dst_x, $dst_y, $src_w, $src_h); 
imagecopy($cut, $src_im, 0, 0, $src_x, $src_y, $src_w, $src_h); 
imagecopymerge($dst_im, $cut, $dst_x, $dst_y, 0, 0, $src_w, $src_h, $pct); 
}
$image1 = imagecreatefrompng('images/product/'.$image); //300 x 300
$image2 = imagecreatefromgif('dsgcache/123456.gif'); //150 x 150
$merged_image = imagecreatetruecolor(300, 300);
imagealphablending($merged_image, false);
imagesavealpha($merged_image, true);
imagecopy($merged_image, $image1, 0, 0, 0, 0, 300, 300);
imagecopymerge_alpha($merged_image, $image2, 0, 0, 0, 0, 150, 150, 50);
header('Content-Type: ' . image_type_to_mime_type(IMAGETYPE_PNG));
imagepng($merged_image); 
```

可以用 gd 和 php 做到这一点吗？

谢谢。

# java - Java - Spring 控制台应用程序全局异常处理程序

> ID：13686808
> 
> 赞同：1
> 
> 时间：2012-12-03T15:50:21.743
> 
> 标签：java, spring, exception, handler, global

Java - 弹簧 - 石英应用

我有带有 spring 3.x 的 Java 应用程序，它使用石英调度程序来处理一些数据。我正在查看以下文章，他们在其中定义了全局[Global Servlet 容器异常处理程序](http://doanduyhai.wordpress.com/2012/05/06/spring-mvc-part-v-exception-handling/)

我想配置 spring 以捕获我的应用程序中发生的任何异常。上面提到的文章使用“org.springframework.web.servlet.handler.HandlerExceptionResolverComposite”它是servlet特定的实现，这就是我不能使用它的原因。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:55:25.347

您没有提到捕获异常时要做什么。如果您只想记录异常，则可以使用 AOP。

一个可能更简单的解决方案是用一个捕获异常的类来包装你的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:16:21.130

您提到的类在 Spring MVC DispatcherServlet 的 catch 块中使用，用于将特定异常与处理程序匹配。AFAIK 没有一个类可以使用 vanilla Spring 开箱即用地执行此操作，但是您没有理由不能为您的应用程序创建类似的执行容器：

```
public interface ExceptionHandler {
  public void handle(Exception e);
}

public class ExecutionEnvironment {
  private Map<Class, ExceptionHandler> executionHandlers;

  public void run() {
    try {
      // Your app code...
    } catch (Exception e) {
      if(executionHandlers.get(e.getClass()) != null) {
         executionHandlers.get(e.getClass()).handle(e); 
      } else {
        throw new RuntimeException(e);
      }
    }
  }
} 
```

然后使用上下文配置来设置您的异常处理程序。希望这可以帮助。

# javascript - 我可以通过客户端 JS 访问 Notes 文档/集合吗？

> ID：13686810
> 
> 赞同：1
> 
> 时间：2012-12-03T15:50:26.813
> 
> 标签：javascript, client-side, lotus-notes, xpages, lotusscript

我想知道是否可以通过 Xpages 中的客户端脚本处理笔记视图和文档集合？

到目前为止的故事......我正在建立一个人力资源系统，其中包括一个完整的缺勤部分（假期、疾病、其他缺勤等）。我在笔记客户端中编写了一个按钮，该按钮创建一个 Excel 电子表格，根据缺勤文档（getview、getalldocumentsbykey 进入集合）显示当前用户过去 12 个月缺勤的日历。它使用每个文档中的各种字段（包括多值字段）循环集合以计算缺勤长度、全天/半天等，并在工作表上以不同颜色标记它们，并带有超链接以访问文档。

它还计算诸如布拉德福德因子评级之类的其他事物，并围绕用户工作日进行计算。

任何人，我一直面临着让整个系统在浏览器中工作的挑战，消除对笔记客户端的任何需求，所以....回到我原来的问题，我需要能够从笔记中获取文档集合通过一个键查看，然后我可以通过客户端 javascript 访问该字段。

这可能吗？如果需要，我可以提供更多信息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:01:50.800

您是否考虑过 Notes 浏览器插件？它应该让您通过浏览器运行基于 Notes 的应用程序，而无需修改代码。

[这是一篇关于它的文章](http://planetlotus.org/profiles/shrinivas-sahadev_100787)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:52:11.790

您可以通过 Java 和 CORBA 从客户端 JavaScript 访问所有 Domino 对象。您只需要一个将 Session 返回到 javascript 的小程序。以下是 Designer 帮助中的说明：

[http://www-12.lotus.com/ldd/doc/domino_notes/rnext/help6_designer.nsf/9/0d05bb3cec358f7085256c54004bdbff](http://www-12.lotus.com/ldd/doc/domino_notes/rnext/help6_designer.nsf/9/0d05bb3cec358f7085256c54004bdbff)

然而，正如 Per 现在建议的那样，通常使用 XPages 中客户端和服务器端 Javascript 的组合来代替 CORBA。[Domino 数据服务](http://www-10.lotus.com/ldd/ddwiki.nsf/xpDocViewer.xsp?lookupName=Domino%20Data%20Service#action=openDocument&content=catcontent&ct=prodDoc)是将数据从服务器获取到（例如）客户端 javascript 的最新方法。

您可能还想查看[Apache POI](http://poi.apache.org/)，您可以使用它在服务器端创建 Excel 文件。ActiveX 只能在 IE 中工作，尽管有插件可以让它在其他浏览器上工作。

**编辑**

我通常对“客户端和服务器端Javascript的组合”做的是在客户端使用`dojo.xhrGet`（或`xhrPost`）。在服务器上，我有一个 XPage（早期代理），它收集数据并以 JSON 格式返回。

*   帕努

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:29:49.247

我认为您应该选择 REST。在 Domino 中，它可以以 JSON 格式提供来自视图/文档的数据，您可以在本机客户端 JavaScript 中使用这些数据。有关更多信息，请尝试搜索 google 和[ddwiki](http://www-10.lotus.com/ldd/ddwiki.nsf/xpSearch.xsp?searchValue=rest)，例如[本教程视频](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Demo_XPages_Extension_Library-Dojo_Grid__REST_Services_Controls)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T19:46:04.693

**编辑以强调 &ReadViewEntries 并添加细节**

纯粹在浏览器端执行此操作可能最好通过使用 &ReadViewEntries URL 命令获取 DXL 或 JSON，然后编写 Javascript 来处理数据并在本地执行与 CreateObject 调用等效的操作。[您可以在此处](http://www-12.lotus.com/ldd/doc/domino_notes/Rnext/help6_designer.nsf/0/53e0cb0653be6d2685256c54004b8de2?OpenDocument)找到 &ReadViewEntries 的文档。（@Panu 已经提到了 DDS，这也是一个好主意。）

或者查看[这里](http://www.botstation.com/code/view2excelweb.phpfor)的一些示例代码，这些示例代码展示了一种技术，用 LotusScript 编写的 Domino Web 代理可以使用该技术创建数据，这些数据将发送到带有内容类型标头的浏览器，该标头可以在 Excel 中打开。我还没有验证这个特定的代码，但我已经看到了对该技术的其他参考。此特定代码可能无法为您提供所需的控制——例如，颜色和链接，但我认为也可以将数据实际生成为 xlsx 格式的 XML 并以类似方式发送。

# sqlite - 对 SQLite 的许多小写入

> ID：13686814
> 
> 赞同：2
> 
> 时间：2012-12-03T15:50:36.143
> 
> 标签：sqlite

我有一个应用程序，它一直在运行并接收一些消息（它们的速率从每秒几条到每小时一条不等）。每条消息都应该放入 SQLite 数据库中。最好的方法是什么？

在每条消息上打开和关闭数据库听起来并不好：如果每秒有几十个，它会非常慢。

另一方面，如果进程意外终止，打开数据库一次并仅写入它可能会导致数据丢失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:59:26.373

It sounds like whatever you do, you'll have to make a trade-off.

If safety is your top-most concern, then update the database on each message and take the speed hit.

If you want a compromise, then update the database write every so many messages. For instance, maintain a buffer and every 100th message, issue an update, wrapped in a transaction.

The transaction wrapping is important for two reasons. First, it maximizes speed. Second, it can help you recover from errors if you employ logging.

If you do the batch update above, you can add an additional level of safety by logging each message as it comes to a file. You will reset this log every time a database update is successfully issues. That way, if an update fails, you know it failed on the entire block (since you are using transactions) and your log will have the information that did not update. This will allow you to re-issue the update, or even see if there was a problem with the data that caused the failure. This of course assumes that keeping a log is cheaper than updating the database, which can be the case depending on how you are connecting.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:03:02.740

如果您的最高速率是“每秒几次”，那么我认为打开和关闭数据库没有真正的问题。如果在服务器发生故障时立即记录数据至关重要，则尤其如此。

我们在报告产品中使用 SQLite，我们能够获得的最佳性能是一次以数千个块的形式记录行。我们的默认设置是 50k。这意味着我们的应用程序会等待，直到收集到 50k 行数据，然后将其作为一个事务提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T17:36:20.833

有一个简单的算法可以根据消息速率调整应用程序的行为：

*   当你刚刚写了一条消息时，检查是否有任何新消息。
    *   如果是，也写下那条信息，然后重复。
*   只有当您用完立即可用的消息时，才提交事务并关闭数据库。

以这种方式，每条消息都会立即保存，除非消息率变得太高。

注意：关闭数据库不会增加数据的持久性（这就是事务提交的目的），它只会释放一点内存。

# nhibernate - NHibernate：复合键、一对一关系和“执行 LoadByUniqueKey 时出错”

> ID：13686822
> 
> 赞同：0
> 
> 时间：2012-12-03T15:50:49.237
> 
> 标签：nhibernate, mapping, key, composite

我有两节课。第一类：

```
public class Einsatz
{
    public virtual ProjNrPindex Id { get; set; }

    public virtual Int32? Knr { get; set; }
    public virtual String RessNr { get; set; }
    public virtual String AdrNr { get; set; }
    public virtual DateTime EndeIst { get; set; }
    public virtual DateTime StartIst { get; set; }
    public virtual DateTime ArbeitsbeginnIst { get; set; }
    public virtual String Kennwort { get; set; }

    public virtual Taetigkeit Taetigkeit { get; set; }

    public Einsatz()
    {
        this.Id = new ProjNrPindex();
    }

    public class ProjNrPindex
    {
        public virtual Int32? Pindex { get; set; }
        public virtual String ProjNr { get; set; }

        public override Boolean Equals(Object obj)
        {
            if (obj as Einsatz == null)
           {
               return(false);
           }

           if (Object.ReferenceEquals(this, obj) == true)
           {
               return(true);
           }

           ProjNrPindex other = obj as ProjNrPindex;

           if (Object.Equals(this.Pindex, other.Pindex) == false)
           {
               return(false);
           }          

           if (Object.Equals(this.ProjNr, other.ProjNr) == false)
           {
               return(false);
           }

           return(true);
       }

       public override Int32 GetHashCode()
       {
           Int32 hash = 0;

           hash += (this.Pindex != null) ? this.Pindex.GetHashCode() : 0;
           hash += 1000 * ((this.ProjNr != null) ? this.ProjNr.GetHashCode() : 0);

           return(hash);
       }
    }

    public override bool Equals(object obj)
    {
        var other = obj as Einsatz;

        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;

        return this.Id.Equals(other.Id);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int hash = GetType().GetHashCode();
            hash = (hash * 31) ^ this.Id.GetHashCode();

            return hash;
        }
    }
} 
```

第 2 类：

```
public class Taetigkeit
{
    public virtual ProjNrPindex Id { get; set; }

    public virtual string Text { get; set; }
    public virtual string RessNr { get; set; }

    public virtual Einsatz Einsatz { get; set; }

    public Taetigkeit()
    {
        this.Id = new ProjNrPindex();
    }

    public class ProjNrPindex
    {
        public virtual Int32? Pindex { get; set; }
        public virtual String ProjNr { get; set; }

        public override Boolean Equals(Object obj)
        {
            if (obj as Einsatz == null)
            {
                return (false);
            }

            if (Object.ReferenceEquals(this, obj) == true)
            {
                return (true);
            }

            ProjNrPindex other = obj as ProjNrPindex;

            if (Object.Equals(this.Pindex, other.Pindex) == false)
            {
                return (false);
            }

            if (Object.Equals(this.ProjNr, other.ProjNr) == false)
            {
                return (false);
            }

            return (true);
        }

        public override Int32 GetHashCode()
        {
            Int32 hash = 0;

            hash += (this.Pindex != null) ? this.Pindex.GetHashCode() : 0;
            hash += 1000 * ((this.ProjNr != null) ? this.ProjNr.GetHashCode() : 0);

            return (hash);
        }
    }

    public override bool Equals(object obj)
    {
        var other = obj as Einsatz;

        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;

        return this.Id.Equals(other.Id);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int hash = GetType().GetHashCode();
            hash = (hash * 31) ^ this.Id.GetHashCode();

            return hash;
        }
    }
} 
```

映射是：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               assembly="RestService"
               namespace="RestService">

<class name="Einsatz" table="PLANUNG">
    <composite-id name="Id">
      <key-property name="ProjNr">
        <column name="ProjNr"  />
      </key-property>
      <key-property name="Pindex">
        <column name="Pindex" />
      </key-property>

  </composite-id>

    <property name="Knr" column="Knr" />
    <property name="AdrNr" column="AdrNr" />
    <property name="RessNr" column="RessNr" />
    <property name="EndeIst" column="EndeIst" />
    <property name="StartIst" column="StartIst" />
    <property name="ArbeitsbeginnIst" column="ArbeitsbeginnIst" />
    <property name="Kennwort" column="Kennwort" />

    <one-to-one name="Taetigkeit" class="Taetigkeit" property-ref="Id"/>

</class>

</hibernate-mapping> 
```

和

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               assembly="RestService"
               namespace="RestService">

<class name="Taetigkeit" table="PLANBER">
    <composite-id name="Id">
        <key-property name="ProjNr">
            <column name="ProjNr"  />
        </key-property>
      <key-property name="Pindex">
            <column name="Pindex" />
        </key-property>
    </composite-id>

    <property name="RessNr" column="RessNr" />
    <property name="Text" column="Text" />

  <one-to-one name="Einsatz" class="Einsatz" property-ref="Id"/>

</class>

</hibernate-mapping> 
```

编码：

```
var q = s.CreateQuery("from Einsatz e").List<Einsatz>(); 
```

给我：

```
Error performing LoadByUniqueKey[SQL: SQL not available]
"The given key was not present in the dictionary." 
```

我害怕我做错了什么，但我不知道是什么。我可能会补充一点，sql server 中的数据库没有外键，因此数据不太连贯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:30:55.983

你的 equals 方法有缺陷。当它获得的另一个对象不是`Einsatz`应该将其`ProjNrPindex`更改为更简单的实现时，它将返回 false：

```
public override bool Equals(object obj)
{
    var other = obj as ProjNrPindex;
    return other != null &&
        Pindex == other.Pindex &&
        ProjNr == other.ProjNr;
} 
```

此外 Gethashcode 在某些情况下会抛出溢出异常使用 unchecked

```
public override Int32 GetHashCode()
{
    unchecked
    {
        return Pindex.GetOrDefault().GetHashCode() +
            1000 * ((this.ProjNr != null) ? this.ProjNr.GetHashCode() : 0);
    }
} 
```

# java - 我想让打印机打印，直到帐户中的余额不足以打印作业

> ID：13686824
> 
> 赞同：3
> 
> 时间：2012-12-03T15:50:50.980
> 
> 标签：java, variables, methods, instance, private

问题是我的余额一直是负数，它执行了需要取出钱的部分，但是我已经放置的“if”语句应该可以防止这种情况发生。我是编程新手，如果这很愚蠢，我很抱歉。

这是我的主要内容：

```
public class PrinterAccount
{
    private int balance;

    public void topUp(int amount)
    { 
        balance += amount;
    }
    public int getBalance()
    { 

        return balance;
    }
    public boolean printDocument(int numPages, boolean isDoubleSided)
    {

        if (isDoubleSided)
        {
            if(numPages % 2 == 0)
            {
                int b = 0;
                b = b - ((numPages/2)*5);
                    if (balance > b)
                    {
                        balance -= ((numPages/2) * 5);
                        return true;
                    }
                    else
                    {
                        return false;
                    }
            }
            else
            {
                numPages = numPages + 1;
                int a = 0;
                a = a - ((numPages/2)*5);
                    if (balance > a)
                    {
                        balance -= ((numPages/2) * 5);
                        return true;
                    }
                    else
                    {
                        return false;
                    }
            }
        }
        else
        {
            int c = 0;
            c = c - (numPages*5);
                if (balance > c)
                {
                    balance -= (numPages*5);
                    return true;
                }
                else
                {
                    return false;
                }

        }   
    }
} 
```

这是我的测试：

```
public class PrinterAccountTest
{
    public static void main(String[] args)
    {
        // Create an object of class PrinterAccount
        PrinterAccount myprinterAccount = new PrinterAccount();
        // Add 10 pounds credit (1000 pence)
        myprinterAccount.topUp(1000);

        // **************TEST 1************************
        // Print a 15-page document, single-sided, should cost 75p
        boolean res = myprinterAccount.printDocument(15, false);
        // The document should have printed successfully
        if (res)
            System.out.println("The document printed successfully");
        else
            System.out.println("The document failed to print: not enough credit.");
        // Display the remaining balance: should be 925
        System.out.println("Remaining balance is " + myprinterAccount.getBalance());

        // **************TEST 2************************
        // Print a 20-page document (even number of pages), double-sided, should cost 50p
        res = myprinterAccount.printDocument(20, true);
        // The document should have printed successfully
        if (res)
            System.out.println("The document printed successfully");
        else
            System.out.println("The document failed to print: not enough credit.");
        // Display the remaining balance: should be 875
        System.out.println("Remaining balance is " + myprinterAccount.getBalance());

        // **************TEST 3************************
        // Print a 7-page document (odd number of pages), double-sided, should cost 20p
        res = myprinterAccount.printDocument(7, true);
        // The document should have printed successfully
        if (res)
            System.out.println("The document printed successfully");
        else
            System.out.println("The document failed to print: not enough credit.");
        // Display the remaining balance: should be 855
        System.out.println("Remaining balance is " + myprinterAccount.getBalance());

        // **************TEST 4************************
        // Print a 200-page document, single-sided, should cost 1000p
        res = myprinterAccount.printDocument(200, false);
        // Should get a message saying the document failed to print
        if (res)
            System.out.println("The document printed successfully");
        else
            System.out.println("The document failed to print: not enough credit.");
        // Display the remaining balance: should be 855
        System.out.println("Remaining balance is " + myprinterAccount.getBalance());

    }
} 
```

这是我运行代码时得到的结果：

```
The document printed successfully
Remaining balance is 925
The document printed successfully
Remaining balance is 875
The document printed successfully
Remaining balance is 855
The document printed successfully
Remaining balance is -145 
```

但我需要它显示：

```
The document printed successfully
Remaining balance is 925
The document printed successfully
Remaining balance is 875
The document printed successfully
Remaining balance is 855
The document failed to print: not enough credit.
Remaining balance is 855 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:00:45.137

打印文档方法中的这一行：

```
 int c = 0;
    c = c - (numPages*5);
    if (balance > c) ... 
```

变量 c 将始终具有负值。我想您想添加 (numPages*5) 而不是减去它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T16:00:35.843

因为您`balance`将始终大于 a,b,c，因为 c 将是负数，而余额将是正数，因此值 `balance>c`将始终为真。尝试改变逻辑

# c# - 单链表特定位置的插入和删除

> ID：13686832
> 
> 赞同：-2
> 
> 时间：2012-12-03T15:51:16.450
> 
> 标签：c#, linked-list

谁能告诉我如何从特定位置插入或删除节点。请用示例代码解释它，以便我能很好地理解它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:16:39.067

这个想法是：

1°/ 找到要插入或删除的位置。

2°/ 保存下一个节点以将其链接到新节点（插入）或前一个节点（删除）

插入应该是这样的：

```
public class Node
{
    public string Name { get; set; }
    public Node Next { get; set; }

    public void InsertAt(string name, int index, Node start)
    {
        Node current = start;
        // Skip nodes until you reach the position
        for (int i = 0; i < index; i++)
        {
            current = current.Next;
        }
        // Save next node
        Node next = current.Next;
        // Link a new Node which next Node is the one you just saved
        current.Next = new Node () { Name = name, Next = next };
    }
} 
```

现在试试自己的删除:)。

# c++ - 如何告诉编译器不要在 /ob1 优化下内联类定义中定义的方法？

> ID：13686835
> 
> 赞同：1
> 
> 时间：2012-12-03T15:51:21.490
> 
> 标签：c++, visual-c++, g++, inline

在使用优化选项 /Ob1 编译 Visual C++ 项目时，只有带有关键字 __inline / inline 的函数或在类定义中定义的函数才会被内联（即使这样也不一定，但只有在编译器认为合适的情况下）。

我的问题是，是否可以告诉编译器（在 Visual C++ 下）仅内联使用 inline 关键字内联定义的函数，而不是在 /Ob1 优化选项下内联定义在类定义中的方法？

g++ 编译器是否与 Windows 上的 /Ob1 选项相同（比如说，在 g++ -O3 选项下），它是否内联定义在类定义中的成员方法？如果是，有没有办法告诉它只内联带有 inline 关键字的类定义之外的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:09:31.750

C++ 标准（第 7.1.2/3 节）指定在类定义中定义的函数被隐式声明为内联，主要是因为它们需要不违反单一定义规则。所以你所要求的基本上是一个不内联声明为内联（隐式）的函数的选项。如果您不想将函数声明为内联（无论出于何种原因），则不应在类定义中定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:54:25.040

用于`#pragma optimize`逐个函数地指定优化指令：http: [//msdn.microsoft.com/en-us/library/chh3fb0k%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/chh3fb0k%28v=vs.100%29.aspx)

# php - Cakephp 使用 Set::extract 获取部分匹配值

> ID：13686837
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:51:26.990
> 
> 标签：php, cakephp

有没有办法使用正则表达式提取下面数组中包含“.html”的值？

```
 Array
    (
        [urlset] => Array
            (
                [url] => Array
                    (
                        [0] => Array
                            (
                                [loc] => http://www.abc.com.au/computers
                                [lastmod] => 2012-12-02
                                [changefreq] => daily
                                [priority] => 0.5
                            )
                        [1] => Array
                            (
                                [loc] => http://www.abc.com.au/hp-scanjet-5590-digital-flatbed-scanner.html
                                [lastmod] => 2012-12-02
                                [changefreq] => daily
                                [priority] => 1.0
                            )

                        [2] => Array
                            (
                                [loc] => http://www.abc.com.au/stock-wardrobe-dark-walnut-doors.html
                                [lastmod] => 2012-12-02
                                [changefreq] => daily
                                [priority] => 1.0
                            )

                        [3] => Array
                            (
                                [loc] => http://www.abc.com.au/stock-wardrobe-white-mirror-door.html
                                [lastmod] => 2012-12-02
                                [changefreq] => daily
                                [priority] => 1.0
                            )
                     )
               )
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:58:12.987

您可能没有理由使用正则表达式来搜索数组。（这将比许多其他方式更困难）。

如果您想在数组中搜索“.html”，只需构建一个简单的[php foreach 循环](http://php.net/manual/en/control-structures.foreach.php)并使用[PHP 的 array_search()](http://php.net/manual/en/function.array-search.php)来检查您要查找的任何文本。

# jquery - 在jquery中获取回调函数的结果

> ID：13686839
> 
> 赞同：1
> 
> 时间：2012-12-03T15:51:32.730
> 
> 标签：jquery

我如何从这个 ajax 获得结果，我可以将它传递给 hello 函数吗？`console.log(data);`结果在 hello 函数中未定义

```
 $(function(){
     $.ajax({
                    url:'example.com',
                    type : 'POST' ,
                    async: false,
                    contentType: "application/json",
                    dataType: 'jsonp' , 
                    data : {
                        collectionName:'alltibyy',
                        facet: 'constellio',
                        fq: qt_value2,
                        wt: 'json',
                        hl: 'true',
                        q : key,
                        searchType: 'atLeastOneWord',
                        rows: '10',
                       'json.wrf': hello
                    },
                    success: function(json) {

                    },
                    error: function(e) {
                    console.log(e.message);
        }
    });

        });

 function hello(data)
    { 
      console.log(data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:06:39.003

从成功和/或错误回调中移动您的 hello 函数和 callt。
jsfiddle= >http://jsfiddle.net/Ye9fa/

```
$(function() {

    function hello(data) {
        console.log(data);
    }

    var qt_value2, key;
    $.ajax({
        url: 'example.com',
        type: 'POST',
        async: false,
        contentType: "application/json",
        dataType: 'jsonp',
        data: {
            collectionName: 'alltibyy',
            facet: 'constellio',
            fq: qt_value2,
            wt: 'json',
            hl: 'true',
            q: key,
            searchType: 'atLeastOneWord',
            rows: '10'
        },
        success: function(json) {
            hello(json);
        },
        error: function(e) {
            hello(e);
        }
    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:56:34.937

soderslatt 的回答会奏效。

问题是ajax调用不知道hello函数

# c# - 如何在 IIS 日志中获取最终用户计算机名称

> ID：13686840
> 
> 赞同：0
> 
> 时间：2012-12-03T15:51:31.943
> 
> 标签：c#, iis, logging, dns

IIS 7.0 及更高版本。此设置中不涉及负载均衡器。被请求的文件是一个小的间隔图像，可以使用 JQuery 同步或异步加载。该文件并不重要，它只是让最终用户访问此 IIS 服务器进行分析的一种方式。

我需要从 IIS 日志中捕获访问者的机器名称。当前日志中已包含客户端 IP 地址。问题是 IP 在我们的环境中是短暂的，如果我不尽快将其解析为机器名称，它就没有用。所以我们需要实时确定访问IP的机器名。

什么是解决这个问题的好方法。这些是我找到的选项...

1) 在 IIS 中启用反向 DNS 查找 -> [http://www.expta.com/2010/01/how-to-enable-reverse-dns-lookup-in-iis.html](http://www.expta.com/2010/01/how-to-enable-reverse-dns-lookup-in-iis.html)。这会影响服务器性能，我担心这会最终导致用户请求停止，并导致他的页面加载缓慢，因为反向查找操作的费用增加

2) 编写一个 IIS 日志模块，该模块通过对 IP 进行严格查找并在日志中写入机器名称来增强日志记录。>> 恐怕这会减慢最终用户的请求周转时间并由于反向 DNS 查找而影响服务器性能。几乎我想这是我在做上面的第 1 点，而不是依赖微软的内置功能。最后，实时反向 DNS 查找会影响性能。

3) 与上面的第 1 点或第 2 点相同，但我将更改用户点击的页面的 HTML，以使用异步 javascript 调用（而不是内联调用）加载 IIS 托管图像文件。这样，最终用户不必等待此 IIS 请求完成，并且可以加载剩余的页面（对他们重要的内容），而无需依赖间隔图像请求来完成。但是浏览器仍然会专门为异步图像加载一个线程，这仍然是最终用户的性能损失。

4) 只需使用默认的 IIS 日志记录即可实时登录。让一个单独的 C# 应用程序每 5 分钟左右读取一次文件，检测添加的新行，解析它们并获取 IP，进行反向查找并找到机器名称，并根据要求将其记录到数据库或平面文件中。另一方面，现在我几乎需要实时登录，因为如果我不立即记录，那么在我的应用程序读取日志、找到它并进行反向查找时，IP 可能已经分配给了另一台机器在上面。此外，我还必须处理读取日志文件的复杂性，以便在上次读取后仅读取新插入的日志条目等。

5) [http://www.iis.net/learn/extensions/advanced-logging-module/advanced-logging-for-iis-real-time-logging](http://www.iis.net/learn/extensions/advanced-logging-module/advanced-logging-for-iis-real-time-logging) -> 我想这与上面的第 2 点相同，只是它是用 VC++ 代替 C# 编写。所以我猜这种方法也有同样的缺点

因此，每种方法似乎都有缺点。您认为解决问题的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:35:35.887

由于路由的工作方式，不可能将 IP 反转为机器名称 - 许多机器可以通过同一个 IP 来。

如果您找到了一种将 IP 映射到您可以接受的机器名称的方法，那么一种方法可能是简单地让站点提供图像并在正常请求处理程序中进行所有必要的发现。通过这种方式，您还可以获得有关用户的更多信息（cookie、身份验证标头，...）。这种方法可能比配置 IIS 日志记录更灵活。

# android - Android在部分文本上设置颜色和监听器

> ID：13686842
> 
> 赞同：0
> 
> 时间：2012-12-03T15:51:34.990
> 
> 标签：android, xml, text, colors, textview

假设我有 TextView 并且我想更改其中某些部分的颜色。像这样

![在此处输入图像描述](../Images/d567ab106f0ecd18d8404a38c3bb7792.png)

**而且我必须在文本“使用条款”**上设置 OnclickListener ，所以我该怎么做，但使用两个 textViews。谢谢

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:54:09.077

使用没有文本的简单复选框，对于文本单击事件，这就是您正在寻找的[Spannable](http://developer.android.com/reference/android/text/Spannable.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:55:41.187

您可以在 TextView 中使用 HTML：

```
myTextView.setText(Html.fromHtml("<h2>Test</h2>")); 
```

# css - 如何在没有 css 定位的情况下设置背景图像以适应屏幕大小？

> ID：13686846
> 
> 赞同：0
> 
> 时间：2012-12-03T15:51:50.383
> 
> 标签：css, image

如何在没有 css 定位的情况下设置背景图像以适应屏幕大小？我在做功课，我想设置背景图像，但我的教授说我不能使用定位，所以还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:05:52.000

尝试这个

```
html{
    background:url('backgroundimage.jpg') no-repeat center center;
    min-height:100%;
    min-width:100%;
    background-size:cover;
}

body{

    min-height:100%;/*hack for some mobile browsers */
    min-width:100%;
} 
```

[参考链接](http://tutorialzine.com/2012/06/quick-tip-fullscreen-backgrounds/)

# class - UML 泛化和关系

> ID：13686848
> 
> 赞同：0
> 
> 时间：2012-12-03T15:51:57.700
> 
> 标签：class, inheritance, uml, diagram

目前，我们的 UML 类图中有如下结构：

```
Node --1------------*-- Data
 ^                        ^
 |                        |
SpecialNode--1----*--SpecialData 
```

例如，SpecialNode 是 Node 类的特化，SpecialData 是 Data 类的特化。

这个想法是每个 SpecialNode 只有 SpecialData，没有“普通”数据。然而，有些人会争辩说，由于 SpecialNode 是一个节点，它可以与 Data 和 SpecialData 都有关系。

是否有任何可用的参考材料可以阐明 SpecialNode 是否只能具有 SpecialData？如果不是，我们如何（以干净的方式）强制执行此操作。

亲切的问候，乔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:00:43.333

Indeed, such modeling implies that `SpecialNode` inherits all the properties of `Node`, including `Data`. Otherwise it would contradict the [Liskov Substitution Principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle) which is an important rule for good design. I would suggest not to define your `Node` and `SpecialNode` as "having" `Data` or `SpecialData` but rather **have an interface to** `Data`. For `Node` it will be associated with `Data` object and for `SpecialNode` it will be associated with `SpecialData` object.

# pandas - 索引（列 [0]）具有重复值

> ID：13686849
> 
> 赞同：0
> 
> 时间：2012-12-03T15:51:59.967
> 
> 标签：pandas

我有以下数据：

```
Start Time=2012-04-12   16:13:09    
Finish Time=2012-11-30  13:31:08    
Sample Period=01:00:00 
```

作为 CSV 文件：

```
Date(yyyy-mm-dd)    Time(hh:mm:ss)  Celsius (C)
2012-04-12          16:13:09        20.6
2012-04-12          17:13:09        20.6
2012-04-12          18:13:09        20.6
2012-04-12          19:13:09        20.6
2012-04-12          20:13:09        20.6
2012-04-12          21:13:09        20.6
2012-04-12          22:13:09        20.6
2012-04-12          23:13:09        20.6 
```

现在我想通过 pandas 读取数据，如下所示：

```
df=read_csv('mmf0401.txt',skiprows=(0,5),parse_dates=[[0,1]],index_col=0) 
```

不幸的是，它引发了一个异常`Index (columns [0]) have duplicate values ['2012-04-12']`

我不知道为什么，我该如何纠正这个问题？

# mysql - 如何加快从 mysql 插入 neo4j 的速度？

> ID：13686850
> 
> 赞同：1
> 
> 时间：2012-12-03T15:52:00.153
> 
> 标签：mysql, nosql, neo4j, graph-databases

我在 mysql 中有一个包含 60000 个项目的数据集，我正在尝试将其插入 neo4j。插入正在进行，但需要很长时间（大约每 3 秒 10-15 次）。有什么办法可以加快速度吗？还有什么办法我可以在neo4j中给出诸如唯一键之类的东西，这样重复索引就不会被索引？我是neo4j的新手。

我正在使用带有 PHP Everyman 驱动程序的 neo4j 1.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:26:10.380

如上所述，首选选项是批量导入器。

如果您需要通过 PHP 客户端，这里我举了一个使用 REST 批处理 api 的示例：http: [//phpfiddle.org/main/code/mu3-sgk](http://phpfiddle.org/main/code/mu3-sgk)

您可以测试最适合您的系统的行/批次。对于我的笔记本电脑，它是 750，对于我的测试服务器，它是 1250。发生的 json_decode 在 CPU 上很重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:49:37.603

Max De Marzi 有一个很好的介绍，关于 ETL 到 Neo4j。

见：[http ://www.slideshare.net/maxdemarzi/etl-into-neo4j](http://www.slideshare.net/maxdemarzi/etl-into-neo4j)

这取决于您要使用哪种语言，通过 jruby 嵌入的 java 和通过 ruby​​、php、python 远程嵌入的许多选项。

您可能希望在适当大小的交易中批量处理您的请求（例如，每笔交易 10k 个项目）。

[可以使用我的批处理导入器](http://github.com/jexp/batch-importer)或通过Neo4j 服务器的[BATCH REST API](http://docs.neo4j.org/chunked/milestone/rest-api-batch-ops.html)将 CSV 文件直接导入数据库文件。

# ios - Apple iOS Ad Hoc Distribution 合法性标准许可证

> ID：13686853
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:52:21.120
> 
> 标签：ios, ad-hoc-distribution

我没有找到关于这个主题的明确答案，谷歌搜索往往会说这两种情况，但这是我的问题。我看到一些网站说他们将应用程序分发给客户，通常是为了测试，然后再通过 Ad-Hoc 分发推送到 AppStore。我的理解是 Ad-Hoc 分发是为了测试，这意味着分发给“任何人”是**不行的。**可以以这种方式向任何人发布应用程序吗？短语 Ad-Hoc 分发是否暗示“测试”。这句话令人困惑。如果您是单人团队甚至是小团体，100 台设备的上限似乎确实很高，这是否表明您可以通过 Ad-Hoc 分发给任何人？以下是 Apple 标准 iOS 许可下的程序许可协议第 7.2 节的一部分：

> 根据本协议的条款和条件，您还可以将您的应用程序分发给您的公司、组织、教育机构、团体或与您有其他关联的个人，仅在有限数量的注册设备上使用（如程序门户网站），如果您的应用程序已按照本协议所述使用 Apple 颁发的数字证书进行了数字签名。通过以这种方式分发您的应用程序，您向 Apple 声明并保证您的应用程序符合当时有效的文档和程序要求，并且您同意按照 Apple 的合理要求与 Apple 合作并回答问题并提供有关您的应用程序的信息.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:58:10.660

将应用程序分发给您的客户以便他们可以测试应用程序是测试的**一部分**

像[Testflight](http://testflightapp.com)这样的服务使用临时分发来简化您的应用程序向客户和测试人员的分发。

Ad-hoc 分发允许您将应用程序发送到已注册到您的开发者帐户的设备。100台设备真的不是很多。

# c++ - wxWidgets 应用程序中的重叠 IO

> ID：13686856
> 
> 赞同：1
> 
> 时间：2012-12-03T15:52:33.383
> 
> 标签：c++, windows, ipc, wxwidgets, overlapped-io

我正在开发一个*仅限 Windows 的*wxWidgets GUI 应用程序，该应用程序应通过命名管道从服务进程接收异步通知。我想避免为管道句柄监视生成单独的线程。因此，我正在考虑使用重叠 IO。我的问题是：在主线程中接收管道句柄通知的最直接方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T19:07:43.807

不幸的是，没有办法将任意`HANDLE`事件循环与 wxWidgets 事件循环集成，因此最好的解决方案是使用单独的线程，如果您确实需要修改主线程，则可能调用[wxQueueEvent 。](http://docs.wxwidgets.org/trunk/group__group__funcmacro__events.html#gae921d7bd0e52fedbf3f253d2c408bce1)

# perl - Greping 通过 NET:TELNET 获得的数组

> ID：13686857
> 
> 赞同：1
> 
> 时间：2012-12-03T15:52:38.970
> 
> 标签：perl, telnet, munin

我正在写一个 Munin-Pluging，我喜欢从 telnet 会话中捕获屏幕输出。此类会话的输出如下所示：

```
...
    0x00017   0x41b3f340  BPING                       0           0         0            0         198          132            330             
    0x00018   0x41b47340  CHKFAILED                   0           0         0            0         198          132            330             
    0x00026   0x41b4f340  CIP                         0           0         0            0         370          264            634             
    0x0001e   0x41b57340  CONTROL                     0           1         0            0         3876         2178           6054            
    0x01014   0x41b5f340  UNETSRVR                    0           0         0            1         296          198            494             
    0x00037   0x41b67340  ----                        0           0         0            0         198          132            330             
    0x00000   0x43b67450  ----                        0           0         0            0         0            0              0               
    0x00000   0x4bb67450  ----                        0           0         0            0         5084         4224           9308            
    0x00000   0x49367450  ----                        0           0         0            0         14742        4158           18900           
    -------------------------------------------------------------------------------------------
                                            SUMMARY : 2           40        5            7         4898229      2728176        7626405 
```

此脚本将屏幕内容提取到一个数组 (@lines) 中。

```
#!/usr/bin/perl

use Net::Telnet ();
use strict;
use warnings;

my $t = new Net::Telnet (Timeout => 10);

$t->port(777);
$t->open("192.168.0.1");

$t->buffer_empty;
my @lines = $t->waitfor(match =>"m/.* SUMMARY : .* \n/");

my @gagu = grep { "$_" =~ /^.*BPING.*\n/ } @lines;

print @gagu; 
```

*   数组@lines 是什么类型的？
*   为什么我总是从 grep 而不是过滤行中获取全部内容？
*   我从 net:telnet 得到的数组与其他数组不同吗？

是的，我是 Perl 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:15:32.777

我不熟悉这个模块以及它的作用，但我认为它会给你一些类似于你所说的返回值。

如果您正在获取`@gagu`数组中的所有行，则可能是`@lines`数组中的数据仅包含一行，或者`grep`失败。

例如，`@lines`可能包含以下字符串：

```
"foo   bar    baz\nfoo1   bar1   baz1\n"; 
```

而不是，如你所料

```
"foo   bar    baz\n";
"foo1  bar1   baz1\n"; 
```

您的 grep 语句可能按预期工作，但您可能需要考虑：

*   不引用`$_`，因为那没有任何意义。
*   根本不使用`$_`，因为这是默认变量，因此不需要（为了清楚起见）使用它。
*   不使用锚点`^`and `\n`，因为它们是多余的。

例如，`^.*`匹配任何地方的任何字符串。使用它来简单地匹配一个字符串是多余的。结束正则表达式`.*\n`是多余的，因为它所说的只是“匹配除换行符以外的任何字符，直到我们找到换行符”。假设你有换行符，它什么都不做。假设你不这样做，它会给你一个假阴性。这场比赛你只需要`/BPING/`. 因此，您的代码可能如下所示：

```
use Data::Dumper;
my @lines = $t->waitfor(match =>"m/ SUMMARY :/");
my @gagu = grep /BPING/, @lines;

print Dumper \@gagu; 
```

如果您想看到明显打印出的空白，可以使用以下`$Data::Dumper::Useqq`变量：

```
$Data::Dumper::Useqq = 1;
print Dumper \@gagu; 
```

打印变量是一个很好的调试工具。

# python - Python 中的 MySQL

> ID：13686863
> 
> 赞同：-3
> 
> 时间：2012-12-03T15:53:01.587
> 
> 标签：python, mysql, command-line-interface

目的是使用 python 和 MySQLdb 检查电子邮件是否已存在于数据库中。我正在使用变量 mail 来存储电子邮件。MySQL 表单是电子邮件。我有以下代码：

```
if cursor.execute("select count(*) from registrants where email = " + "'"email2"'") == 0:
     print "it doesn't exist!" 
```

这句话有什么问题，或者我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:57:02.520

我几乎不知道从哪里开始。

仅仅在 Python 程序中输入一串 SQL 并不会以某种方式查询数据库。您实际上必须打开一个数据库连接、实例化一个游标、使用该游标运行 SQL 并获取结果。所有这些都在 MySQLdb 文档中进行了解释。

完成此操作后，您仍然需要将表单中的电子邮件参数实际传递给 SQL 语句，而您也没有这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:57:55.700

好吧，那是行不通的，因为那只是 mysql 查询字符串。您必须使用 mysql 客户端执行此查询接收结果和测试。使用[pymysql](https://github.com/petehunt/PyMySQL)将是这样的：

```
import pymysql
connection = pymysql.connect(host,user,password,database)
cursor = connection.cursor()
cursor.execute("select count(*) from registrants where email = ?") #you need to replace the ? with some actual value or the query will fail
result = cur.fetchone()
if result[0]==0:
    print "E-mail does not exist!" 
```

# javascript - setInterval 和 clearInterval，如何只运行 1 次？

> ID：13686867
> 
> 赞同：8
> 
> 时间：2012-12-03T15:53:21.243
> 
> 标签：javascript, jquery, function

我只想运行该功能 1 次。

```
timerA = setInterval(function()
         {
            //codes..
            clearInterval(timerA);
         }, 2000); 
```

我只想调用 setInterval 内的函数 1 次。如何使用 setInterval 和 clearInterval 做到这一点？

还是有另一种技术可以做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-03T15:54:23.803

如果您只希望它运行一次，请使用[setTimeout方法。](http://jquerybyexample.blogspot.com/2012/02/how-to-use-jquery-settimeout-function.html)

**例子：**

```
 setTimeout(function() {
      // Do something after 5 seconds
 }, 5000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T15:54:21.920

如果您只想运行一次代码，我建议您`setTimeout`改用：

```
setTimeout(function(){
   //code
}, 2000); 
```

* * *

[“setInterval”与“setTimeout”](https://stackoverflow.com/questions/2696692/setinterval-vs-settimeout)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-03T15:55:44.313

改用`setTimeout`：

```
setTimeout(function() { [...] }, timeout); 
```

`timeout`这将在毫秒后仅执行一次该函数。

# c# - 关于“可能的多重枚举”的可枚举的 *all* 使用的 Resharper 警告

> ID：13686870
> 
> 赞同：4
> 
> 时间：2012-12-03T15:53:29.947
> 
> 标签：c#, linq, resharper, ienumerable, enumeration

我从 Reshaper 收到“ [IEnumerable 的可能多重枚举](http://confluence.jetbrains.net/display/ReSharper/Possible+multiple+enumeration+of+IEnumerable)”警告。如何处理它已经[在另一个 SO question 中提出](https://stackoverflow.com/q/8240844/419956)。不过，我的问题稍微具体一点，关于会弹出警告的各个地方。

我想知道的是 Resharper 给我这个警告是否正确。我主要担心的是**警告出现在下面变量的*所有*实例**上`users`，在代码中用“ `//Warn`”表示。

我的代码正在收集要在网格中的网页上显示的信息。我正在使用服务器端分页，因为整个数据集可能长达数万或数十万行。我已经尽可能地注释了代码。

再次，请让我知道此代码是否容易受到多个枚举的影响。我的目标是在调用 ToList()*之前对数据进行过滤和排序。*这是正确的方法吗？

```
private List<UserRow> GetUserRows(UserFilter filter, int start, int limit,
                                  string sort, SortDirection dir, out int count)
{
    count = 0;

    // LINQ applies filter to Users object
    var users = (
            from u in _userManager.Users
            where filter.Check(u)
            select new UserRow
                        {
                            UserID = u.UserID,
                            FirstName = u.FirstName,
                            LastName = u.LastName,
                            // etc.
                        }
        );

    // LINQ orders by given sort
    if (!String.IsNullOrEmpty(sort))
    {
        if (sort == "UserID" && dir == SortDirection.ASC)
            users = users.OrderBy(u => u.UserID); //Warn
        else if (sort == "UserID" && dir == SortDirection.DESC)
            users = users.OrderByDescending(u => u.UserID); //Warn
        else if (sort == "FirstName" && dir == SortDirection.ASC)
            users = users.OrderBy(u => u.FirstName); //Warn
        else if (sort == "FirstName" && dir == SortDirection.DESC)
            users = users.OrderByDescending(u => u.FirstName); //Warn
        else if (sort == "LastName" && dir == SortDirection.ASC)
            users = users.OrderBy(u => u.LastName); //Warn
        else if (sort == "LastName" && dir == SortDirection.DESC)
            users = users.OrderByDescending(u => u.LastName); //Warn
        // etc.
    }
    else
    {
        users = users.Reverse(); //Warn
    }

    // Output variable
    count = users.Count(); //Warn

    // Guard case - shouldn't trigger
    if (limit == -1 || start == -1)
        return users.ToList(); //Warn

    // Pagination and ToList()
    return users.Skip((start / limit) * limit).Take(limit).ToList(); //Warn
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:58:04.653

是的，ReSharper 是对的：`count = users.Count();`无条件枚举，然后如果 the`limit`或 the`start`不是负数`1`，`ToList`则将再次枚举`users`。

看来，一旦 ReSharper 确定某些内容有被多次枚举的风险，它就会使用多次枚举警告标记对相关项目的每个引用，即使它不是负责多次枚举的代码。这就是为什么您在这么多行上看到警告的原因。

更好的方法是添加一个单独的调用来设置计数。您可以在单独的语句中预先执行此操作，如下所示：

```
count = _userManager.Users.Count(u => filter.Check(u)); 
```

这样，您将能够保持`users`其预先枚举的状态，直到最终调用`ToList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:58:57.807

希望您的警告是由对 的调用生成的`Count`，它确实运行了一个额外的查询。

在`limit == -1 || start == -1`您可以`ToList`拨打电话然后从中获取的`count`情况*下*，但在一般情况下，您无能为力 - 您*正在进行*两个查询，一个用于完整计数，一个用于项目的子集。

我很想知道修复特殊情况是否会导致警告消失。

* * *

编辑：由于这是 LINQ-to-objects，您可以用一个循环替换最后`return`一行，该`foreach`循环遍历整个集合对它们进行计数，但也可以动态构建受限的跳过/获取子列表，因此只迭代一次。

您还可以受益于仅`(select new UserRow)`在此`foreach`循环中和您的 special-case 之前进行`ToList`投影，而不是投影整个集合然后可能丢弃大部分对象。

```
var users = _userManager.Users.Where(u => filter.Check(u));

// Sort as above

List<UserRow> rtn;
if (limit == -1 || start == -1)
{
    rtn = users.Select(u => new UserRow { UserID = u.UserID, ... }).ToList();
    count = rtn.Length;
}
else
{
    int takeFrom = (start / limit) * limit;
    int forgetFrom = takeFrom + limit;
    count = 0;
    rtn = new List<UserRow>();
    foreach(var u in users)
    {
        if (count >= takeFrom && count < forgetFrom)
            rtn.Add(new UserRow { UserID = u.UserID, ... });
        count++;
    }
}
return rtn; 
```

# c# - 部分回发后asp菜单不起作用

> ID：13686871
> 
> 赞同：0
> 
> 时间：2012-12-03T15:53:30.730
> 
> 标签：c#, asp.net, webforms

我有一个在我的页面上执行搜索后停止运行的 asp:menu。搜索使用更新面板并由提交按钮触发。一旦结果显示在页面上，菜单悬停效果就会停止工作。它不会再在鼠标悬停时向下展开。可点击的链接仍然有效。

该菜单位于站点的母版页中，并且位于搜索控件的更新面板之外。

感谢您的任何帮助！

这是菜单

```
 <asp:Menu ID="Menu5" runat="server" 
                                        DynamicEnableDefaultPopOutImage="False"
                                         Orientation="Horizontal"
                                         RenderingMode="List"
                                         StaticEnableDefaultPopOutImage="False"
                                         StaticPopOutImageUrl="~/Images/DownArrow.png"
                                         Visible="False" Font-Bold="False" ForeColor="Black">

                                        <Items>
                                            <asp:MenuItem PopOutImageUrl="~/Images/bullet.png" Selectable="False" Text="Add" >
                                                <asp:MenuItem Text="Item" NavigateUrl="~/Admin/CreateItem.aspx" ></asp:MenuItem>
                                                <asp:MenuItem Text="Contact" NavigateUrl="~/Admin/CreateContact.aspx" ></asp:MenuItem>
                                            </asp:MenuItem>
                                            <asp:MenuItem Text="Update" Selectable="False" Value="Update">
                                                <asp:MenuItem Text="Item" NavigateUrl="~/Admin/UpdateItem.aspx" Value="Item"></asp:MenuItem>
                                                <asp:MenuItem Text="Contact" NavigateUrl="~/Admin/UpdateContact.aspx" Value="Contact"></asp:MenuItem>
                                            </asp:MenuItem>
                                            <asp:MenuItem Text="Approve" Selectable="False"  Value="Approve" >
                                                <asp:MenuItem Text="Item" NavigateUrl="~/Admin/ApproveItem.aspx" Value="Item"></asp:MenuItem>
                                                <asp:MenuItem Text="Contact" NavigateUrl="~/Admin/ApproveContact.aspx" Value="Contact"></asp:MenuItem>
                                            </asp:MenuItem>
                                        </Items>
                                         <StaticMenuItemStyle HorizontalPadding="10px" />
                                    </asp:Menu> 
```

这是按钮单击事件

```
 protected void btnSubmit_Click(object sender, EventArgs e)
    {
        if (Page.IsValid)
        {

            string keyword = txtSearch.Text.Trim();
             List<dynamic> results = SearchItems(keyword);
             List<dynamic> Cresults = SearchContacts(keyword);

            //bind and return
            lv.DataSource = results;
            lv.DataBind();

            //Contact Bind return
            LVC.DataSource = Cresults;
            LVC.DataBind();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:53:56.810

我的解决方案是不使用 VS 2012 中的拖放菜单。我用一个 Jquery Menu 替换了这个菜单，该菜单从那以后就没有问题了。

# php - 用php加载页面，但用jquery淡入

> ID：13686875
> 
> 赞同：0
> 
> 时间：2012-12-03T15:53:52.617
> 
> 标签：php, jquery, loading, dynamic-loading

我正在使用 php 在我的页面中动态加载内容。我想添加一个很好的效果，比如用 jquery 淡入。

但是如果用户关闭了javascript，我希望我的页面仍然有效。

这是我加载内容的 php 代码：

```
/// load page content
        $pages_dir = 'content';

        if(!empty($_GET['p'])) {

            $pages = scandir($pages_dir, 0);
            //delete . and ..
            unset($pages[0], $pages[1]);

            $p = $_GET['p'];

            // only files that are in the array can be loaded
            if (in_array($p. '.php', $pages)) {
                include($pages_dir. '/'.$p. '.php');    

            } else {
                echo 'This page is not available';
            }
        } else {
            include($pages_dir. '/index.php');
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:08:04.903

这就是我所做的。用 id "fadein" 在我的 PHP 代码周围包裹了一个 div，然后使用了这个 jquery 代码：

```
$(function(){
            $('#fadein').hide();
            $('#fadein').fadeIn();

        }); 
```

简单的

# visual-studio - 有没有办法挂钩到 Visual Studio 2012 Express Editions 中的保存事件？

> ID：13686876
> 
> 赞同：1
> 
> 时间：2012-12-03T15:53:59.517
> 
> 标签：visual-studio

我有一组 js、html、css 文件。我有一个将所有这些文件构建到一个页面中的应用程序。在 Visual Studio 中处理这些 js、html 和 css 文件时，我希望每次保存它们时都构建页面。这样，当我保存任何页面时，我只需刷新浏览器，它们就会显示出来。

那么有没有办法在 Visual Studio 中触发保存和另存为事件时挂钩？

# java - 用android继承对象simplexml

> ID：13686881
> 
> 赞同：1
> 
> 时间：2012-12-03T15:54:14.120
> 
> 标签：java, android, xml-serialization, xml-deserialization, simple-framework

我正在尝试使用 simplexml 反序列化使用 java 工作的对象和代码在 Android 上不起作用。

简单的类：

```
@Root    
public class GenericContainer
{
  @Element
  public MainEntity el;
} 
```

声明如下：

```
GenericContainer genContainer = new GenericContainer();
genContainer.el = new SubClassBEntity(); //SubClassBEntity is a Subclass of MainEntity 
```

被序列化并生成一个xml：

```
<?xml version='1.0' encoding='utf-8'?>
<genericContainer>
  <el class="test.entities.SubClassBEntity>
    <x>1</x>
  </el>
</genericContainer> 
```

如果我尝试使用 java 反序列化 xml 一切正常，但如果我使用 android 执行相同操作，我会在异常消息所在的位置崩溃`test.entities.SubClassBEntity`。

任何想法来解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:56:56.820

我发现的唯一解决方案是使用`@ElementUnion`将所有可能性放入其中。这是一个肮脏的解决方案，因为您可以拥有一个包含 50 个子类的基类，而您必须将所有子类都放入其中。自动重构不会改变注解，它会是一段容易出错的代码。

# matlab - Matlab：将矩阵的每一行绘制为其索引的函数

> ID：13686887
> 
> 赞同：4
> 
> 时间：2012-12-03T15:54:26.367
> 
> 标签：matlab, matrix, plot, matlab-figure

我想创建一个包含多条线的图，每条线对应于给定矩阵的一行。

更详细地说，我有一个矩阵*M*，其中每一行代表一个沿列变化的值。我想将此更改绘制为每行的列索引的函数，因此绘制（例如）第一行我应该：

```
plot(M(1,:)); 
```

问题是，我想绘制*所有*行。当然，我可以遍历它们，[保存](http://www.mathworks.com/help/matlab/ref/hold.html)并绘制当前的：

```
(plot(M(i,:)) 
```

但我想知道是否有一个简单的命令或单线可以做到这一点。

我已经尝试过[plotmatrix](http://www.mathworks.com/help/matlab/ref/plotmatrix.html)但在理想结果方面没有取得太大成功。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T15:59:10.647

Have you tried `plot(M')`?

From the first paragraph of the [documentation of `plot`](http://www.mathworks.se/help/matlab/ref/plot.html):

> plot(Y) plots the columns of Y versus the index of each value when Y is a real number.

# jquery - jQuery 简单历史解决方案，用于 div 的“打开”或“关闭”状态

> ID：13686890
> 
> 赞同：0
> 
> 时间：2012-12-03T15:54:42.777
> 
> 标签：jquery

我有一个使用简单机制构建的项目，当单击一组图标链接时，一个 div 层动画进入内容区域 - 然后要求用户单击“关闭”按钮以反向动画 div ，意味着将不透明度设置为 0 并滑回视野之外。

使用 div 'open'，有指向外部页面的链接（标记为 'GO'）。目前我让他们在一个新的标签/窗口中打开。但是，客户希望如果您访问外部页面链接，然后单击浏览器的后退按钮，则 div 将保持其“打开”状态。

有谁知道一种相对简单的设置方法 - 无需完全重新设计我构建它的方式？或者它是否需要某种高级插件和完整的代码返工？

打开 div 的 jQuery 在这里：

```
var triggerPanels = function(){
for(i=1; i <= 9; i++){
(function(e) {
var trigger = $("#iconTrig" + i);
var panel = $("#pane" + i);
$(trigger).click(function(){
    $(panel).animate({
     right: 0, opacity: 1
      }, 500 );

    return false;
});
 })(i);
 }
}; 
```

该页面的工作版本的链接在这里，如果您单击 Enter 按钮，然后单击其中一个图标，您将看到它正在运行。任何帮助是极大的赞赏。谢谢！ [http://dev.seanchristiandampier.com/asia-timber/index-dev-new.html](http://dev.seanchristiandampier.com/asia-timber/index-dev-new.html)

更新：客户很高兴只需在新选项卡中打开链接 - 因此绕过了将哈希用于历史目的的需要。但是，这里的所有评论和答案都有助于指向一个解决方案，我可能会自己尝试一下，以便我可以吸收这个概念，看看我是否可以让它发挥作用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:32:31.500

不确定代码的细节，但挂钩到窗口历史记录是一项相对简单的任务。您可以使用哈希（网址 # 之后的所有内容）来制定您的逻辑。

非常简单的解决方案：

```
<div class="div">TheColor</div>
<a href="#blue">Blue</a>
<a href="#red">Red</a>​ 
```

然后使用 jQuery：

```
//capture the hash change event and do what you want with the window hash.
$(window).on('hashchange',function(e){
    $('.div').css('background-color',window.location.hash.replace('#',''));
});

//Used to trigger the above event if someone links to the page with the hash set already.
$(window).trigger('hashchange'); 
```

工作示例（您看不到哈希，因为 jsFiddle 使用 Iframe，但尝试单击浏览器上的按钮和后退按钮）：[JSFIDDLE](http://jsfiddle.net/hvc42/)

# macos - 如何检测qt中的大写锁定状态？

> ID：13686897
> 
> 赞同：1
> 
> 时间：2012-12-03T15:54:58.340
> 
> 标签：macos, qt, capslock

> **可能重复：**
> [Qt 4.7.4：有没有办法找出 CAPS LOCK 的状态？](https://stackoverflow.com/questions/9830905/qt-4-7-4-is-there-a-way-to-find-out-the-status-of-caps-lock)

如何在 mac os x 上检测 qt 中的大写锁定键状态。我努力了

显示 * d = XOpenDisplay((char*)0);

```
bool caps_state = false;
if (d)
 {
  unsigned n;
  XkbGetIndicatorState(d, XkbUseCoreKbd, &n);
  caps_state = (n & 0x01) == 1;
 }
 return caps_state; 
```

但它给了我以下错误：

架构 x86_64 的未定义符号：

“_XOpenDisplay”，引用自：.o myclass::GetCapslockState()

```
 myclass::keyEvent(QKeyEvent*) 
```

“_XkbGetIndicatorState”，引用自：.o

```
 myclass::GetCapslockState()       in .o
  myclass::keyEvent(QKeyEvent*)      in .o 
```

ld：未找到架构 x86_64 的符号 collect2：ld 返回 1 退出状态

我是 qt devlopment 的新手。我不明白为什么它向我显示此错误。我已经包含了“#include”头文件。如果有人知道请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:31:21.580

您可以使用以下方法检测键的更改：

```
QWidget::keyPressEvent()
// and
QWidget::keyReleaseEvent() 
```

这些可用于在某些情况下确定状态，例如您是否知道程序初始化时大写锁定的状态，或者您假设或需要某个状态。但是，我知道没有独立于平台的方法来彻底查询大写锁定的当前状态。您将需要使用平台相关的方法。一定要支持大写锁定状态不存在或无法检测到的情况。

# drupal - 更改了 php.ini 中 max_execution_time 的设置，Drupal 仍然存在问题

> ID：13686900
> 
> 赞同：0
> 
> 时间：2012-12-03T15:55:07.833
> 
> 标签：drupal, timeout, php

好的，我正在尝试为客户做一些工作。目前，我们只是在尝试对另一个开发人员创建的自定义函数进行 kludgy 修复，该函数导出他们所有联系人的 CSV。

随着他们添加了更多联系人，该功能需要更长的时间，并且需要更多内存（我们不得不将他们的内存限制从 128M 提高到 256M，现在提高到 512M）。

无论如何，我正在尝试运行 CSV 导出器，但在不同的运行中出现以下错误：

```
Fatal error: Maximum execution time of 30 seconds exceeded in /home/readyby2/public_html/includes/module.inc on line 19

Fatal error: Maximum execution time of 30 seconds exceeded in /home/readyby2/public_html/sites/all/modules/contrib/views/modules/field/views_handler_field_field.inc on line 0 
```

我时不时地收到内部服务器错误 500

请注意，此功能以前曾工作过 - 我已经看到它工作过。

现在，据我所知，这意味着我需要更改 php.ini 中的最大执行时间设置。

文件夹外有一个 php.ini 文件`/public_html`（Drupal 安装文件保存在其中），我已经修改了该设置 - 但仍然出现上述所有错误。我已经分别将其更改为 60、90 和 0，没有变化。

是否还有其他地方为 Drupal 安装设置了超时设置？我找到正确的 php.ini 文件了吗？我没有在`/public_html`目录中看到一个，也没有看到其他任何一个。

我该如何解决这个问题？我已经提高了内存限制（服务器错误是否暗示服务器上没有足够的内存来执行此功能？）

任何建议或帮助都会很有用。

作为一个仅供参考，这是在 Drupal 7 中。PHP 版本是 5.x（我不记得确切的版本，认为是 5.1，如果需要可以查找）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:02:19.007

正确的 php.ini 所在的位置很大程度上取决于您的托管环境，但您可以通过使用脚本中`ini_set`的任何一个或函数来快速绕过它。`set_time_limit`

您可以在 settings.php 中进行 ini 设置，但它对整个站点都是全局的。

`ini_set('max_execution_time', 120);`到 settings.php

或者在您的脚本`set_time_limit ( 120 )`中，如果 PHP 安全模式打开，这将不起作用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:57:56.090

通常 php.ini 文件在某处类似`/etc/php5/apache/php.ini`或类似的地方。也许只是`/etc/php.ini`在更简单的设置上。

您可能想咨询您的软件管理系统：`$> rpm -ql php5`或者，如果您使用的是基于 debian 的系统，则可以使用适当的替代方法。这列出了包中包含的文件。php.ini 文件应该在其中。根据您的发行版，您可能还需要查看包`apache-mod_php5`或类似内容。在包管理中搜索 php，例如使用`$> rpm -q --whatprovides /usr/bin/php5`或`$> rpm -qa | grep -i php`。

`phpinfo()`在 drupal 环境中调用。在输出中 php 指定了哪个`php.ini`文件已被解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:39:37.117

您可以随时尝试（在您的站点的 settings.php 中（sites/default/settings.php）查看您是否有权限编写它。

`ini_set('memory_limit', '256M');`

它覆盖 php.ini。但是我认为您不能通过增加内存来解决它（每次遇到内存问题时都不能增加限制）。您必须找到产生此到达限制的原因（无限的 boucle，结果太多......）您始终可以使用 Views 模块和 csv 导出来制作具有良好视图的良好 csv :D 只需考虑覆盖 csv 的寻呼机。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T16:02:59.013

另一种选择是将以下内容添加到 drupal 的`.htaccess`：

```
php_value max_execution_time 0 
```

# mysql - 第一个数据库模式 - 产生错误

> ID：13686901
> 
> 赞同：-1
> 
> 时间：2012-12-03T15:55:12.897
> 
> 标签：mysql, sql, database, postgresql

这是我的架构：

```
CREATE TABLE item (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    title varchar(60) NOT NULL,
    description varchar(900) NOT NULL,
    company_id integer NOT NULL REFERENCES company (id),
    date datetime NOT NULL,
    source_id integer NOT NULL REFERENCES source (id),
    link varchar(255) NOT NULL,
    location_id integer NOT NULL REFERENCES location (id)
);

CREATE TABLE location (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name varchar(255) NOT NULL,
    coordinate varchar(255) NOT NULL,
    location_id integer NOT NULL REFERENCES country (id)
);

CREATE TABLE country (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name varchar(255) NOT NULL
);

CREATE TABLE company (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name varchar(60) NOT NULL,
);

CREATE TABLE source (
    id integer NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name varchar(60) NOT NULL,
); 
```

当我将其放入并单击构建模式时，它告诉我[http://sqlfiddle.com](http://sqlfiddle.com)上的第四行存在无效语法。我看不出有什么错误，有人能解释一下吗？

另外，如果我做的不好或做出了错误的决定，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:59:15.810

您有 2 个错误的逗号。一个在“CREATE TABLE company”、“CREATE TABLE source”的末尾。并在位置之前创建国家。

```
CREATE TABLE company (
    id SERIAL PRIMARY KEY,
    name varchar(60) NOT NULL
);

CREATE TABLE country (
    id SERIAL PRIMARY KEY,
    name varchar(255) NOT NULL
);

CREATE TABLE location (
    id SERIAL PRIMARY KEY,
    name varchar(255) NOT NULL,
    coordinate varchar(255) NOT NULL,
    location_id integer NOT NULL REFERENCES country (id)
);

CREATE TABLE source (
    id SERIAL PRIMARY KEY,
    name varchar(60) NOT NULL
);

CREATE TABLE item (
    id SERIAL PRIMARY KEY,
    title varchar(60) NOT NULL,
    description varchar(900) NOT NULL,
    company_id integer NOT NULL REFERENCES company (id),
    date timestamp NOT NULL,
    source_id integer NOT NULL REFERENCES source (id),
    link varchar(255) NOT NULL,
    location_id integer NOT NULL REFERENCES location (id)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:59:34.387

您必须先创建表，然后才能在其他地方引用它们。按以下顺序创建表格：来源、公司、国家/地区、位置、项目

请注意，您可以按任意顺序执行前三个操作，但 Country 必须在 Location 之前，并且 Location、Source 和 Company 必须在 Item 之前。

在 Source 和 Company 的定义末尾还有两个额外的逗号。你必须删除那些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:57:18.010

1.  `country`在引用它之前创建`location`表。
2.  删除 和`,`的定义中的悬空。`company``source`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T15:59:44.433

首先，您需要创建表，`country`然后`location`是`company`，`source`最后是`item`。

# jquery - 返回 False 并不总是阻止事件

> ID：13686909
> 
> 赞同：1
> 
> 时间：2012-12-03T15:55:35.350
> 
> 标签：jquery, wordpress, shortcode

这是 WordPress 短代码中使用的代码。功能几乎不言自明：它是一个简单的视频库 - 单击播放列表框将主视频 div 的 html 替换为隐藏 div 之一的内容。

HTML

```
<div class="main-video">
    <iframe src="http://player.vimeo.com/video/50781537" frameborder="0" width="630" height="400"></iframe> 
</div>

    <div id="video-playlist-wrapper">
    <ul class="video-playlist">

    <a href="#"><li><div class="playlist-video-wrapper"><div class="playlist-video-title">Title 1</div><div id="playlist-video1">Desc 1</div></div></li></a>
    <a href="#"><li><div class="playlist-video-wrapper"><div class="playlist-video-title">Title 2</div><div id="playlist-video2">Desc 2</div></div></li></a>
    <a href="#"><li><div class="playlist-video-wrapper"><div class="playlist-video-title">Title 3</div><div id="playlist-video3">Desc 3</div></div></li></a>
    <a href="#"><li><div class="playlist-video-wrapper-last"><div class="playlist-video-title">Title 4</div><div id="playlist-video4">Desc 4</div></div></li></a>
    </ul>
    </div>

    <div id="playlist-video1-content" class="hidden-video"><iframe src="http://player.vimeo.com/video/50781537" frameborder="0" width="630" height="354"></iframe></div>
    <div id="playlist-video2-content" class="hidden-video"><iframe src="http://player.vimeo.com/video/50697289" frameborder="0" width="215" height="130"></iframe></div>
    <div id="playlist-video3-content" class="hidden-video"><iframe src="http://player.vimeo.com/video/50771550" frameborder="0" width="215" height="130"></iframe></div>
    <div id="playlist-video4-content" class="hidden-video"><iframe src="http://player.vimeo.com/video/50750012" frameborder="0" width="215" height="130"></iframe></div>

     </div> 
```

jQuery

```
 jQuery(document).ready(function($) {

    $('#playlist-video1').click(function() {
    $('.main-video').html($('#playlist-video1-content').html());
    return false;
    });

    $('#playlist-video2').click(function() {    
    $('.main-video').html($('#playlist-video2-content').html());
    return false;
    });

    $('#playlist-video3').click(function() {    
    $('.main-video').html($('#playlist-video3-content').html());
    return false;
    });

    $('#playlist-video4').click(function() {
    $('.main-video').html($('#playlist-video4-content').html());
    return false;
    });

    }); 
```

问题：有时链接事件仍然发生并重新加载带有 href="#" 的页面，导致跳转到页面顶部并且没有替换 html。其他时候它可以正常工作，并且主视频会使用其中一个播放列表视频进行更新。

为什么会这样？我反复查看代码，找不到任何错误或问题。当我使用 xampp 在本地开发它时，一切正常，没有问题。现在在 WordPress 网站上，它正在崩溃。

页面是否可能已经加载了太多的 Jquery，并且加载视频库 jquery 的时间太长。任何帮助表示赞赏！谢谢。

这是一个小提琴： http://jsfiddle.net/ [xjpv2](http://jsfiddle.net/xjpv2/1/) /1/ `

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:32:26.723

有点像我不久前发表的一篇旧帖子，但我想我会回答它，以防万一有人遇到我遇到的同样问题。

我从头开始：

```
jQuery(document).ready(function(cash) {
    jQuery('.video-playlist a').click(function(e) {
    jQuery('#main-video-iframe').attr('src', jQuery(this).attr('data-url'));
    return false; 
}); 
```

});

和我的 HTML（在 vimeo 嵌入之后的 # 只是视频 ID）：

```
 <div class="main-video">
         <iframe src="http://player.vimeo.com/video/#" id="main-video-iframe"></iframe>
     </div>

 <div id="video-playlist-wrapper">
     <ul class="video-playlist">
        <li>
            <a href="#" data-url="http://player.vimeo.com/video/#">
               <div class="playlist-video-wrapper"></div>
            </a>
        </li>
     </ul> 
 </div> 
```

尴尬地承认我在这方面很挣扎，但我希望它可以帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:48:23.477

代替：

```
 $('#playlist-video1').click(function() {
    $('.main-video').html($('#playlist-video1-content').html());
    return false;
 }); 
```

和：

```
 $('#playlist-video1').click(function(e) {
    e.preventDefault();
    $('.main-video').html($('#playlist-video1-content').html());
 }); 
```

# resize - 用鼠标调整大小后，框架集无法正确调整大小

> ID：13686917
> 
> 赞同：10
> 
> 时间：2012-12-03T15:56:02.893
> 
> 标签：resize, mouse, frame, frameset

我有一个框架集，其中一个框架中有一个按钮，可将其父框架集最小化到一定大小。

该代码有效，但问题是如果我选择先用鼠标手动调整框架大小，然后按下最小化按钮，它将在 IE8 和 Chrome 中错误地调整大小。它在 FF 中正确调整大小。

我有这个 HTML 结构

```
...
<frameset cols="32%,*" border="2" frameborder="1" framespacing="1">
    <frameset rows="350,*" border="2" frameborder="1" framespacing="1" id="searchResultFrameset">
        <!-- The minimize button are in this frame searchResultFrame -->
        <frame name="searchResultFrame" scrolling="no" src="dummy">
        <frame name="itemFrame" frameborder="1" scrolling="no" id="itemFrame" src="dummy2"></frameset>
    <frame name="contentFrame" frameborder="0" scrolling="yes" id="contentFrame" src="dummy3">
</frameset>
... 
```

以及按下按钮时执行的代码。

```
// Minimize frame button
$('.minimizeFrame').toggle(function () {
    parent.document.getElementsByTagName('frameset')[1].setAttribute('cols','22,*');
}, function () {
    parent.document.getElementsByTagName('frameset')[1].setAttribute('cols','32%,*');
}); 
```

我可以看到开发人员工具中的`cols="32%,*"`更改`cols="22,*"`，但仍然呈现错误的大小。

为什么鼠标更改后大小调整不正确？我错过了什么还是浏览器中的错误？或者是否有替代解决方案可以在没有此错误的情况下调整框架大小？

**例子**

[http://jsbin.com/ohihiy/2](http://jsbin.com/ohihiy/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T17:31:10.843

看起来这是自 2010 年以来一直被忽略的 Webkit 中的这个错误：

[https://bugs.webkit.org/show_bug.cgi?id=36584](https://bugs.webkit.org/show_bug.cgi?id=36584)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-15T10:50:10.693

这对我有用。我创建了一个“重置”列并“稍后”设置正确宽度的函数。重置后似乎必须有超时或“接触”子帧的一种循环

```
function init_page() {
  function setCols(frms, cols) {
    // for some magic reason we have to 1st -> reset current cols 
    frms.setAttribute('cols', '');
    // and 2nd ask about child width (it's now clientWidth)
    for (var i = 0; i < frms.children.length; ++i) {
      if (frms.children[i] && (typeof frms.children[i].clientWidth != "undefined" || typeof frms.children[i].width != "undefined")) {
      }
    }
    frms.setAttribute('cols', cols);
  }
  // Minimize frame button
  $('#minimizeButton')
    .toggle(function () {
      setCols(parent.document.getElementsByTagName('frameset')[0], '50,*');
    },
    function () {
      setCols(parent.document.getElementsByTagName('frameset')[0], '50%,*');
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:26:28.677

如果我理解正确，您尝试设置位于不同框架中的对象的属性。有些浏览器不接受这一点。

如果我尝试重现您的问题，我可以在 Firefox 中看到我可以切换框架的大小（没问题）。

然而，在 chromium 中，我得到一个安全错误，因为我试图在另一个页面上设置一个属性，即框架内页面内的框架集页面。

*编辑：* 以下代码适用于 IE8。那是你需要的吗？

> 不要忘记添加 jquery-1.8.2.min.js 文件

**文件：index.html**

```
<!doctype html public "-//w3c//dtd html 4.01 frameset//en"
   "http://www.w3.org/tr/html4/frameset.dtd">
<html>
<head>
<title>a simple frameset document</title>
</head>

<frameset cols="32%,*" border="2" frameborder="1" framespacing="1">
    <frameset rows="350,*" border="2" frameborder="1" framespacing="1" id="searchResultFrameset">
        <!-- The minimize button are in this frame searchResultFrame -->
        <frame name="searchResultFrame" scrolling="no" src="frame1.html">
        <frame name="itemFrame" frameborder="1" scrolling="no" id="itemFrame" src="dummy2"></frameset>
    <frame name="contentFrame" frameborder="0" scrolling="yes" id="contentFrame" src="dummy3">
</frameset>

</html> 
```

文件：frame1.html

```
<html>
  <head>
    <script src="jquery-1.8.2.min.js"></script>

    <script>

    $(init_page);

    function init_page()
        {
        // Minimize frame button
        $('#minimizeButton')
        .toggle(function ()
            {
            parent.document.getElementsByTagName('frameset')[0].setAttribute('cols','22,*');
            },
            function ()
            {
            parent.document.getElementsByTagName('frameset')[0].setAttribute('cols','32%,*');
            });
        }

    </script>
  </head>
  <body>
  <button id='minimizeButton'>toggle</button>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-02T20:29:29.877

我遇到了同样的问题，我使用了隐藏，然后设置然后重新出现的建议，它对我有用。请参见下面的示例：

```
var $frames = $( <parentElement> ).find( '<framesetname>' )[ 0 ];
frames.hide().attr('cols', '*,500').show(); 
```

他们为 Chrome、Firefox、IE11 和 Opera 工作。希望对你有效。

# windows - 使用批处理文件从文件名中检索变量值

> ID：13686918
> 
> 赞同：0
> 
> 时间：2012-12-03T15:56:05.917
> 
> 标签：windows, batch-file

有没有办法使用批处理文件根据文件名中的变量将文件`MOVE`下载到*目录 A*到*目录 B中时立即生成文件？*

我有一个文件命名约定，如下所示：`Photo-87654321-1.jpeg`

`87654321`零件是变量。现在，通过`if`语句等，我可以找到目录，或者如果它不存在，则创建目录，然后将图像放在那里。我遇到的问题是：a）从文件名中复制该变量字符串，b）每次将文件移动到*Directory A*时运行此脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:09:09.853

当您找到变量编号时，您没有提供足够的详细信息来说明您想要对文件执行的操作，所以我只能即兴发挥。

此脚本将从文件中获取变量名称，`C:\DirectoryA`然后将它们移动到具有该名称的文件夹中。

```
:LOOP
for /f "tokens=2 delims=-" %%a in ('dir /b /a-d "C:\DirectoryA"') do (
md "%%~na"
move "%%a" "%%~na"
)
goto :LOOP 
```

这应该为您提供足够的详细信息来调整您的需求，但如果您需要更具体的内容，请提供更多详细信息。

***注意：***鉴于您想在文件放入后立即移动文件`DirectoryA`，这是一个无限循环，因此您可能需要观察您的 CPU。

# ios - iOS6 - 从苹果服务器下载的应用内购买

> ID：13686919
> 
> 赞同：1
> 
> 时间：2012-12-03T15:56:06.670
> 
> 标签：ios, download, in-app-purchase

我能够成功地进行应用内购买并从 Apple 服务器下载内容并使用它。
我的应用内购买内容是非消耗品。所以我在我的应用程序中提供“恢复”按钮
现在当用户按下“恢复”按钮时，我正在调用该方法：

```
restoreCompletedTransactions 
```

但是在这里，我没有接到委托方法的调用：

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 
```

这样我就可以识别交易对象并再次开始从苹果服务器下载内容。有人可以帮我写“恢复”选项吗？

根据苹果，它说：

*// 异步。将当前用户的已完成事务添加回待重新完成的队列。将要求用户进行身份验证。观察者将收到 0 个或多个 -paymentQueue:updatedTransactions:，然后是 -paymentQueueRestoreCompletedTransactionsFinished: 成功或 -paymentQueue:restoreCompletedTransactionsFailedWithError: 失败。在部分成功的情况下，一些交易可能仍会交付。*

但对我来说，我根本没有接到“paymentQueue:updatedTransactions”的电话。我刚接到电话“paymentQueueRestoreCompletedTransactionsFinished：”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:59:49.727

您可能没有观察到事务队列。确保你有

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self]; 
```

在调用 restoreCompletedTransactions 方法之前的某个地方

# android - ListFragment 内 ListView 内的 CheckBox

> ID：13686921
> 
> 赞同：0
> 
> 时间：2012-12-03T15:56:11.710
> 
> 标签：android, listview, checkbox

当我点击 ListView 中的复选框时，列表中的第二项也会被选中。例如，如果我选中第一项，则列表中的第 7 项将被选中。这是我的单元格布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/relativeLayout1" android:layout_width="fill_parent"    android:layout_height="fill_parent"    xmlns:android="http://schemas.android.com/apk/res/android">

    <ImageView 
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content" 
        android:id="@+id/imgDisclosureIndicator" 
        android:src="@drawable/disclosureon" 
        android:layout_alignParentTop="true" 
        android:layout_alignParentRight="true" 
        android:paddingRight="6dp"></ImageView>

    <ImageView
        android:id="@+id/imgTaskState"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/taskok" />

    <CheckBox
        android:id="@+id/chkTaskImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imgTaskState"
        android:layout_toLeftOf="@+id/imgDisclosureIndicator"
        android:layout_toRightOf="@+id/imgTaskState"
        android:focusable="false" />

</RelativeLayout> 
```

我加入了一张图片来帮助你：

![复选框问题](../Images/841e9b8875c095a69bfd2b822efe287d.png)

附带说明一下，ListView 位于 ListFragment 内。

**编辑：下面是将我的单元格与其数据映射的代码。**

```
String[] from = {"taskId", "taskStateId", "taskText", "disclosureIndicatorId"};
                    int[] to = {0, R.id.imgTaskState, R.id.chkTaskImage, R.id.imgDisclosureIndicator};
SimpleAdapter adapter = new SimpleAdapter(mContext, mList, R.layout.task_cell, from, to);
setListAdapter(adapter); 
```

**编辑#2：如果 ListView 垂直显示，则不会发生这种情况。**

![列表视图问题](../Images/d2e19370cec093a85024b0668aaf46e9.png)

编辑#3：即使我使用 SimpleAdapter，使用以下代码，当 ListView 是水平的时，我也会遇到同样的错误。

```
private class CellInspectionAdapter extends BaseAdapter
    {
            private Vector<InspectionCell> cells;
            private Context context;

            public CellInspectionAdapter(Context context, Vector<InspectionCell> cells)
            {
                this.cells = cells;
                this.context = context;
        }

        @Override
        public int getCount()
        {
            return this.cells.size();
        }

        @Override
        public Object getItem(int position)
        {
            return null;
        }

        @Override
        public long getItemId(int position)
        {
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            // Map data from the ArrayList from the adapter
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View celluleTask;

            if (convertView == null) 
            {
                celluleTask = new View(context);
                celluleTask = inflater.inflate(R.layout.laprise_task_cell, null);

                // Assign data to the cell
                ImageView imgEtat = (ImageView)celluleTask.findViewById(R.id.imgTaskState);
                imgEtat.setImageResource(cells.get(position).getStateDrawable());

                // Assign text
                CheckBox chkCell = (CheckBox)celluleTask.findViewById(R.id.chkTaskImage);
                chkCell.setText(cells.get(position).getTexte());

                // Disclosure
                ImageView imgDisclosure = (ImageView)celluleTask.findViewById(R.id.imgDisclosureIndicator);
                imgDisclosure.setImageResource(cells.get(position).getDisclosureDrawable());    
            }
            else
            {
                celluleTask = (View)convertView;
            }

            return celluleTask;
        }
    } 
```

编辑#5：这是解决方案！覆盖 getViewTypeCount() 和 getItemViewType(int position) 方法。我已将这些行添加到 SimpleAdapter 并且它可以工作。

```
@Override
public int getViewTypeCount() {                 

    return getCount();
}

@Override
public int getItemViewType(int position) {

    return position;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:54:45.813

你使用`convertView`不正确。非 null`convertView`只会让您不必创建新 View 并进行布局，但您*必须*设置所有子项的内容`convertView`以匹配当前项。这也解释了为什么它垂直工作，因为这样两行都是同时可见的。

试试这个：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // Map data from the ArrayList from the adapter
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View celluleTask = convertView;

        if (celluleTask == null) {
            celluleTask = inflater.inflate(R.layout.laprise_task_cell, null);
        }

        // Assign data to the cell ALWAYS!
        ImageView imgEtat = (ImageView)celluleTask.findViewById(R.id.imgTaskState);
        imgEtat.setImageResource(cells.get(position).getStateDrawable());

        // Assign text
        CheckBox chkCell = (CheckBox)celluleTask.findViewById(R.id.chkTaskImage);
        chkCell.setText(cells.get(position).getTexte());

        // Disclosure
        ImageView imgDisclosure = (ImageView)celluleTask.findViewById(R.id.imgDisclosureIndicator);
        imgDisclosure.setImageResource(cells.get(position).getDisclosureDrawable());    

        return celluleTask;
} 
```

PS：您还应该将布局充气器的获取移出`getView`方法，因此不必一遍又一遍地完成。

PPS：为避免`findViewById`一次又一次地调用，请*[查看 View Holder Pattern](http://www.jmanzano.es/blog/?p=166)*。

# c++ - C++：重载 [ ] 运算符以进行读写访问

> ID：13686924
> 
> 赞同：5
> 
> 时间：2012-12-03T15:56:16.660
> 
> 标签：c++, c++11, operators, operator-overloading

一般来说，你如何声明`[ ]`一个类的索引操作符来进行读写访问？

我尝试了类似的东西

```
/**
 * Read index operator.
 */
T& operator[](T u);

/**
 * Write index operator
 */
const T& operator[](T u); 
```

这给了我错误

```
../src/Class.h:44:14: error: 'const T& Class::operator[](T)' cannot be overloaded
../src/Class.h:39:8: error: with 'T& Class::operator[](T)' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T15:58:15.027

您的可变版本很好：

```
T& operator[](T u); 
```

但`const`版本应该是一个`const`成员函数以及返回一个`const`引用：

```
const T& operator[](T u) const;
                         ^^^^^ 
```

这不仅将它与其他重载区分开来，而且还允许（只读）访问`const`您的类的实例。通常，重载的成员函数可以通过它们的参数类型和 const/volatile 限定来区分，但*不能通过*它们的返回类型来区分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-03T15:57:30.457

您只需有一个用于读取和写入的重载：

```
T& operator[](int); 
```

话虽如此，您可能还希望有一个`const`重载：

```
const T& operator[](int) const; 
```

`const`这将为您的类的实例提供只读索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T16:01:27.697

您会收到错误消息，因为重载函数不能仅因返回类型而异。但它们可能因 const-ness 而不同。

```
/**
 * Write index operator.
 */
T& operator[](T u);

/**
 * Read index operator
 */
const T& operator[](T u) const; 
```

注意“写”和“读”交换的地方。

另外，您实际上不是说运算符的参数是某种整数类型吗？

# haskell - 避免多次列表遍历的好处

> ID：13686926
> 
> 赞同：28
> 
> 时间：2012-12-03T15:56:27.943
> 
> 标签：haskell, functional-programming, ml

我在函数式语言中看到了许多关于处理列表和构造函数以在接收到一些附加值（通常在生成函数时不存在）后对其元素执行某些操作的示例，例如：

*   [计算每个元素与平均值之间的差异](http://www.haskell.org/haskellwiki/The_Monad.Reader/Issue4/Why_Attribute_Grammars_Matter)

    （“懒惰评估”下的最后两个例子）

*   使用严格的函数式语言（例如 ML/OCaml）暂存列表追加，[以避免多次遍历第一个列表](http://www.cs.cmu.edu/~rwh/smlbook/book.pdf)

    （标题为“分期”的部分）

*   使用 foldr 将列表与另一个列表进行比较（即生成一个函数以将另一个列表与第一个列表进行比较）

    ```
    listEq a b = foldr comb null a b
      where comb x frec [] = False
            comb x frec (e:es) = x == e && frec es
    cmp1To10 = listEq [1..10] 
    ```

在所有这些示例中，作者通常都提到只遍历原始列表一次的好处。但是我不能不让自己思考“当然，不是遍历 N 个元素的列表，而是遍历 N 个评估链，那又怎样？”。我知道它一定有一些好处，有人可以解释一下吗？

* * *

**编辑：**感谢两位的回答。不幸的是，这不是我想知道的。我将尝试澄清我的问题，因此它不会与（更常见的）关于创建中间列表的问题（我已经在各个地方读到过）混淆。也感谢您更正我的帖子格式。

我对您构造要应用于列表的函数的情况感兴趣，在这种情况下您还没有评估结果的必要值（无论是否是列表）。那么你就无法避免生成对每个列表元素的引用（即使不再引用列表结构）。而且您拥有与以前相同的内存访问权限，但您不必解构列表（模式匹配）。

例如，请参阅上述 ML 书中的“暂存”章节。我已经在 ML 和 Racket 中尝试过，更具体地说是“append”的分段版本，它遍历第一个列表并返回一个在尾部插入第二个列表的函数，而无需多次遍历第一个列表。令我惊讶的是，即使考虑到它仍然必须复制列表结构，因为最后一个指针在每种情况下都不同，它也快得多。

以下是 map 的一种变体，它应用于列表后，更改功能时应该更快。由于 Haskell 并不严格，我将不得不强制对`listMap [1..100000]`in进行评估`cachedList`（或者可能不强制，因为在第一个应用程序之后它仍然应该在内存中）。

```
listMap = foldr comb (const [])
  where comb x rest = \f -> f x : rest f

cachedList = listMap [1..100000]
doubles = cachedList (2*)
squares = cachedList (\x -> x*x)

-- print doubles and squares
-- ... 
```

`comb x rest f = ...`我知道在 Haskell 中使用vs并没有什么不同（如果我错了，请纠正我）`comb x rest = \f -> ...`，但我选择了这个版本来强调这个想法。

**更新：**经过一些简单的测试，我在 Haskell 中找不到任何执行时间的差异。那么问题只是关于严格的语言，例如 Scheme（至少是我测试过的 Racket 实现）和 ML。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-03T17:28:59.067

基本上，在循环体中执行一些额外的算术指令比执行一些额外的内存获取便宜。

遍历意味着做大量的内存访问，所以你做的越少越好。遍历的融合减少了内存流量，并增加了直线计算负载，因此您可以获得更好的性能。

具体来说，考虑这个程序来计算列表上的一些数学：

```
go :: [Int] -> [Int]
go = map (+2) . map (^3) 
```

显然，我们用列表的两次遍历来设计它。在第一次和第二次遍历之间，将结果存储在中间数据结构中。但是，它是一个惰性结构，因此只消耗`O(1)`内存。

现在，Haskell 编译器立即将两个循环融合为：

```
go = map ((+2) . (^3)) 
```

这是为什么？毕竟，两者都很`O(n)`复杂，对吧？区别在于常数因子。

考虑到这种抽象：对于第一个管道的每个步骤，我们执行以下操作：

```
 i <- read memory          -- cost M
  j = i ^ 3                 -- cost A
  write memory j            -- cost M
  k <- read memory          -- cost M
  l = k + 2                 -- cost A
  write memory l            -- cost M 
```

所以我们支付 4 次内存访问和 2 次算术运算。

对于融合结果，我们有：

```
 i <- read memory          -- cost M
  j = (i ^ 3) + 2           -- cost 2A
  write memory j            -- cost M 
```

其中`A`和`M`是在 ALU 和内存访问上进行数学运算的常数因子。

还有其他常数因子（两个循环分支）而不是一个。

因此，除非内存访问是免费的（远非如此），否则第二个版本总是更快。

请注意，对不可变序列进行操作的编译器可以实现数组融合，即为您执行此操作的转换。GHC就是这样一个编译器。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-03T20:37:33.093

还有一个非常重要的原因。如果你只遍历一个列表一次，并且没有其他引用，那么 GC 可以在你遍历列表元素时释放它们所占用的内存。此外，如果列表是延迟生成的，那么您总是只有恒定的内存消耗。例如

```
import Data.List

main = do
    let xs = [1..10000000]
        sum = foldl' (+) 0 xs
        len = foldl' (\_ -> (+ 1)) 0 xs
    print (sum / len) 
```

计算`sum`，但需要保留对的引用`xs`并且它所占用的内存不能被释放，因为它需要`len`稍后计算。（或反之亦然。）所以程序消耗相当多的内存，越大`xs`它需要的内存就越多。

但是，如果我们只遍历一次列表，它是惰性创建的，并且元素可以立即被GC，所以无论列表有多大，程序都只`O(1)`占用内存。

```
{-# LANGUAGE BangPatterns #-}
import Data.List

main = do
    let xs = [1..10000000]
        (sum, len) = foldl' (\(!s,!l) x -> (s + x, l + 1)) (0, 0) xs
    print (sum / len) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T17:36:02.053

提前为一个健谈风格的答案道歉。

这可能很明显，但如果我们谈论的是性能，您应该始终通过测量来验证假设。

几年前，我在思考 GHC（STG 机器）的操作语义。我也问过自己同样的问题——著名的“单次遍历”算法肯定不是很好吗？它只是表面上看起来像一次遍历，但在引擎盖下你也有这个通常与原始列表非常相似的链式结构。

我为著名的 RepMin 问题写了几个版本（严格程度不同）——给定一棵充满数字的树，生成相同形状的树，但用所有数字中的最小值替换每个数字。如果我没记错的话（记住——总是自己验证东西！），朴素的两次遍历算法比各种聪明的一次遍历算法执行得快得多。

我还与 Simon Marlow 分享了我的观察结果（那段时间我们都在 FP 暑期学校），他说他们在 GHC 中使用了这种方法。但不是像您想象的那样提高性能。相反，他说，对于一个大的 AST（比如 Haskell 的那个），写下所有的构造函数会占用很多空间（就代码行而言），所以他们只是通过写下一个（句法）遍历来减少代码量.

我个人避免这个技巧，因为如果你犯了一个错误，你会得到一个循环，这是一个非常不愉快的调试事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T18:59:53.867

所以你的问题的答案是，*部分编译*。提前完成，这样就无需遍历列表来获取各个元素 - 所有引用都提前找到并存储在预编译函数中。

至于您对也需要遍历该函数的担忧，这在解释语言中是正确的。但是编译消除了这个问题。

在存在懒惰的情况下，这种编码技巧可能会导致相反的结果。拥有完整的方程，例如 Haskell GHC 编译器能够执行各种优化，这基本上完全消除了列表并将代码转换为等效的循环。当我们使用例如`-O2`switch 编译代码时会发生这种情况。

写出部分方程可能会阻止这种编译器优化并强制实际创建函数——结果代码会大大减慢。我尝试了您的`cachedList`代码，看到 0.01 秒的执行时间变成了 0.20 秒（现在不记得我所做的确切测试）。

# android - 重启后注册 Phonestate 接收器

> ID：13686936
> 
> 赞同：0
> 
> 时间：2012-12-03T15:57:01.737
> 
> 标签：android, broadcastreceiver, reboot

我已经实现了这样的接收器（在清单文件中）

```
 <receiver android:name="com.phonelight.realparrot.RecorderBroadcastReceiver">
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE">        
             </action>
                 </intent-filter>
        </receiver> 
```

如果电话的状态发生变化，则调用记录器广播接收器。一切都很好。但是，如果我重新启动设备，则在我运行我的应用程序之前永远不会调用接收器。

我需要在启动后注册（而不是调用）这个接收器。

多谢，

[编辑]

我通过将以下接收器添加到清单文件来解决了这个问题

```
 <receiver android:name="com.phonelight.realparrotpro.RecorderBroadcastReceiver">
                <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver> 
```

不过，我没有在 Java 代码中注册 RecorderBroadcastReceiver。我只添加了上面的接收器。这意味着从应用程序调用任何内容都会注册所有写入 Manifest 文件的接收器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:59:22.003

You need to create a receiver for onBootComplete and then register your receiver there. This way your receiver will get registered even after reboot.

```
<receiver android:name="App_Receiver">
<intent-filter>
    <action android:name="android.intent.action.BOOT_COMPLETED" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

# javascript - 如何使用 jQuery 更改颜色亮度和饱和度？

> ID：13686939
> 
> 赞同：2
> 
> 时间：2012-12-03T15:57:09.707
> 
> 标签：javascript, jquery, colors

我正在尝试创建一个自定义颜色菜单，用户可以从中选择颜色并通过调整颜色的*亮度*和*饱和度*来创建自己的颜色。我的目标是创建类似于[CUSTOM COLOR的东西](http://jquerymobile.com/themeroller/) *（仅使用 2 个滑块亮度和饱和度的颜色调整部分）*。

*关于我尝试过的描述*：我创建了 2 个 jqueryui 滑块，一个用于亮度，一个用于饱和度。

```
$("#lightness").slider({
    range: "min",
    value: 0,
    min: -0.5,
    max: 0.5,
    step: 0.1,
    slide: function (e, ui) {
     $("#existingcolor").children("div").not("#lightdarkslider,#saturations")
      .each(function (i, v) {
          var color = $(v).attr("title");
          var lightcolor = Lighten(color, ui.value);
          $(v).attr("title", lightcolor).css("backgroundColor", lightcolor);
      });
    }
});

$("#saturation_slider").slider({
    range: "min",
    value: 0,
    min: -0.5,
    max: 0.5,
    step: 0.1,
    slide: function (e, ui) {
     $("#existingcolor").children("div").not("#lightdarkslider,#saturations")
       .each(function (i, v) {
        var color = $(v).attr("title");
        var rgb = HEXtoRGB(color);
        var hsv = rgbToHsv(rgb[0], rgb[1], rgb[2]);
        hsv[1] += ui.value * 32;
        rgb = hsvToRgb(hsv[0], hsv[1], hsv[2]);
        color = RGBtoHEX("rgb(" + rgb[0] + "," + rgb[1] + "," + rgb[2] + ")");
        $(v).attr("title", color).css("backgroundColor", color);
        });
    }
}); 
```

现在如果用户滑动亮度滑块，函数*LIGHTEN*被调用。它接受 3 个参数 col(color)、by 和 shade。我正在传递颜色*（值：调色板中的所有现有颜色）*和*（值：jQuery ui 滑块当前值）*和阴影*（值：它将始终未定义）*。

```
function Lighten(col, by, shade) {
    if (undefined === by) {
        by = 1;
    } else if (by < 0) {
        Darken(col, -by, shade);
    }
    if (undefined === shade) {
        shade = 32;
    }

    var c = HEXtoRGB(col);

    if ((c[0] += shade * by) > 0xff) c[0] = 0xff;
    if ((c[1] += shade * by) > 0xff) c[1] = 0xff;
    if ((c[2] += shade * by) > 0xff) c[2] = 0xff;

    return RGBtoHEX("rgb(" + c[0] + "," + c[1] + "," + c[2] + ")");
} 
```

如果用户滑动饱和度滑块，首先我们将调色板中所有现有颜色的 HSV 值*一一*获取，然后将*当前滑块值** *32*添加到饱和度值。

这在一定程度上起作用，但如果用户连续滑动滑块，所有颜色都会变亮。谁能告诉我我做错了什么，如果有比让我知道的更好或更简单的方法来做同样的事情吗？

*其他支持功能*：

```
function Darken(col, by, shade) {
    if (undefined === by) {
        by = 1;
    } else if (by < 0) {
        return Lighten(col, -by, shade);
    }
    if (undefined === shade) {
        shade = 32;
    }

    var c = HEXtoRGB(col);

    if ((c[0] -= shade * by) < 0) c[0] = 0;
    if ((c[1] -= shade * by) < 0) c[1] = 0;
    if ((c[2] -= shade * by) < 0) c[2] = 0;

    return RGBtoHEX("rgb(" + c[0] + "," + c[1] + "," + c[2] + ")");
}

function HEXtoRGB(color) {
    document.getElementById("temp1").style.backgroundColor = color;
    color = document.getElementById("temp1").style.backgroundColor;

    var rgb = color.split(",");
    rgb[0] = parseInt(rgb[0].substring(rgb[0].indexOf("(") + 1));
    rgb[1] = parseInt(rgb[1]);
    rgb[2] = parseInt(rgb[2].substring(0, rgb[2].lastIndexOf(")")));

    return rgb;
}

function hsvToRgb(h, s, v) {

    var s = s / 100,
         v = v / 100;

    var hi = Math.floor((h / 60) % 6);
    var f = (h / 60) - hi;
    var p = v * (1 - s);
    var q = v * (1 - f * s);
    var t = v * (1 - (1 - f) * s);

    var rgb = [];

    switch (hi) {
        case 0: rgb = [v, t, p]; break;
        case 1: rgb = [q, v, p]; break;
        case 2: rgb = [p, v, t]; break;
        case 3: rgb = [p, q, v]; break;
        case 4: rgb = [t, p, v]; break;
        case 5: rgb = [v, p, q]; break;
    }

    var r = Math.min(255, Math.round(rgb[0] * 256)),
        g = Math.min(255, Math.round(rgb[1] * 256)),
        b = Math.min(255, Math.round(rgb[2] * 256));

    return [r, g, b];

}

function rgbToHsv(r, g, b) {
     var r = (r / 255),
         g = (g / 255),
     b = (b / 255);

    var min = Math.min(Math.min(r, g), b),
        max = Math.max(Math.max(r, g), b),
        delta = max - min;

    var value = max,
        saturation,
        hue;

    // Hue  
    if (max == min) {
        hue = 0;
    } else if (max == r) {
        hue = (60 * ((g - b) / (max - min))) % 360;
    } else if (max == g) {
        hue = 60 * ((b - r) / (max - min)) + 120;
    } else if (max == b) {
        hue = 60 * ((r - g) / (max - min)) + 240;
    }

    if (hue < 0) {
        hue += 360;
    }

    // Saturation  
    if (max == 0) {
        saturation = 0;
    } else {
        saturation = 1 - (min / max);
    }

    return [Math.round(hue), Math.round(saturation * 100), Math.round(value * 100)];
}

function RGBtoHEX(rgbstring) {
    var str, rgb, hexstring;
    str = rgbstring.substring(rgbstring.indexOf("(") + 1, rgbstring.indexOf(")"));
    rgb = str.split(",");
    if (rgb.length == 4)
        hexstring = rgbToHex(rgb[0], rgb[1], rgb[2], rgb[3]);
    else if (rgb.length == 3)
        hexstring = rgbToHex(rgb[0], rgb[1], rgb[2]);
    return hexstring;
}

function rgbToHex(R, G, B, A) {
    if (typeof A == "undefined")
        return "#" + toHex(R) + toHex(G) + toHex(B);
    else
        return "#" + toHex(R) + toHex(G) + toHex(B) + toHex(A);
}

function toHex(n) {
    n = parseInt(n, 10);
    if (isNaN(n)) return "00";
    n = Math.max(0, Math.min(n, 255));
    return "0123456789ABCDEF".charAt((n - n % 16) / 16)
      + "0123456789ABCDEF".charAt(n % 16);
} 
```

**编辑**

*HTML*

```
 <div id="newcolorpicker" class="ui-widget-content ui-corner-all">
            <div id="existingcolor" class="ui-widget-content ui-corner-all">
                <span class="ui-widget-content ui-widget">Drag a color onto an element below </span>
                <br />
                <div class="rc ec col" title="#FFFFFF" style="background-color: #FFFFFF;">
                </div>
                <div class="rc ec col" title="#F2F2F2" style="background-color: #F2F2F2;">
                </div>
                <div class="rc ec col" title="#E6E6E6" style="background-color: #E6E6E6;">
                </div>
                <div class="rc ec col" title="#CCCCCC" style="background-color: #CCCCCC;">
                </div>
                <div class="rc ec col" title="#808080" style="background-color: #808080;">
                </div>
                <div class="rc ec col" title="#4D4D4D" style="background-color: #4D4D4D;">
                </div>
                <div class="rc ec col" title="#000000" style="background-color: #000000;">
                </div>
                <div class="rc ec col" title="#C1272D" style="background-color: #C1272D;">
                </div>
                <div class="rc ec col" title="#ED1C24" style="background-color: #ED1C24;">
                </div>
                <div class="rc ec col" title="#F7931E" style="background-color: #F7931E;">
                </div>
                <div class="rc ec col" title="#FFCC33" style="background-color: #FFCC33;">
                </div>
                <div class="rc ec col" title="#FCEE21" style="background-color: #FCEE21;">
                </div>
                <div class="rc ec col" title="#D9E021" style="background-color: #D9E021;">
                </div>
                <div class="rc ec col" title="#8CC63F" style="background-color: #8CC63F;">
                </div>
                <div class="rc ec col" title="#009245" style="background-color: #009245;">
                </div>
                <div class="rc ec col" title="#006837" style="background-color: #006837;">
                </div>
                <div class="rc ec col" title="#00A99D" style="background-color: #00A99D;">
                </div>
                <div class="rc ec col" title="#33CCCC" style="background-color: #33CCCC;">
                </div>
                <div class="rc ec col" title="#33CCFF" style="background-color: #33CCFF;">
                </div>
                <div class="rc ec col" title="#29ABE2" style="background-color: #29ABE2;">
                </div>
                <div class="rc ec col" title="#0071BC" style="background-color: #0071BC;">
                </div>
                <div class="rc ec col" title="#2E3192" style="background-color: #2E3192;">
                </div>
                <div class="rc ec col" title="#662D91" style="background-color: #662D91;">
                </div>
                <div class="rc ec col" title="#93278F" style="background-color: #93278F;">
                </div>
                <div class="rc ec col" title="#D4145A" style="background-color: #D4145A;">
                </div>
                <div class="rc ec col" title="#ED1E79" style="background-color: #ED1E79;">
                </div>
                <div class="rc ec col" title="#C7B299" style="background-color: #C7B299;">
                </div>
                <div class="rc ec col" title="#736357" style="background-color: #736357;">
                </div>
                <div class="rc ec col" title="#C69C6D" style="background-color: #C69C6D;">
                </div>
                <div class="rc ec col" title="#8C6239" style="background-color: #8C6239;">
                </div>
                <div class="rc ec col" title="#603813" style="background-color: #603813;">
                </div>
                <br />
                <div id="lightdarkslider" class="ui-widget">
                    <div class="lightcontol">
                        <label for="lightness" class="csl">
                            Lightness
                        </label>
                        <div id="lightness" class="cssb uislider">
                        </div>
                    </div>
                </div>
                <div id="saturations" class="ui-widget" style="margin-left: 200px; width: 300px;
                    height: 20px">
                    <div class="saturationcontol">
                        <label for="saturation_slider" class="csl" style="padding-left: 35px;">
                            Saturation
                        </label>
                        <div id="saturation_slider" class="cssb uislider" style="margin: 8px 0 0 15px;">
                        </div>
                    </div>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:31:16.307

您可能需要阅读他们在这篇文章中谈论 hsla 的部分： [http ://www.jquerysdk.com/api/jQuery.Color](http://www.jquerysdk.com/api/jQuery.Color)

我希望它有所帮助。

# vb.net - 如何正确使用 List(Of T).Contains 方法？

> ID：13686940
> 
> 赞同：0
> 
> 时间：2012-12-03T15:57:14.797
> 
> 标签：vb.net, visual-studio-2010, list

我正在努力弄清楚如何在 List(Of Checkbox) 中搜索特定的复选框名称。我想搜索现有列表，并将与特定名称匹配的复选框添加到另一个列表。在现有列表中，我添加了名称为：chkClass11、chkClass12、chkClass21 等的复选框。

我的代码如下：

```
Dim lstCheckboxes As New List(Of CheckBox)
Dim lstGroupCheckboxes As New List(Of CheckBox)

Do While intNextGroupNumber <= intTotalGroups
    Dim grpNewGroupBox = New GroupBox
    grpNewGroupBox.Name = "grpGroup" & intNextGroupNumber
    grpNewGroupBox.Text = "Group " & intNextGroupNumber
    grpNewGroupBox.Location = New Point(intCurrentXPosition, intCurrentYPosition)
    grpNewGroupBox.Size = New Size(intGroupBoxWidth, intGroupBoxHeight)
    grpNewGroupBox.AutoSize = True
    strGroupBoxNameAddArray(intArrayLocation) = "grpGroup" & intNextGroupNumber

    Do While intCurrentRow < intTotalRows
        Dim chkClassCheckBox = New CheckBox
        chkClassCheckBox.Name = "chkClass" & intNextGroupNumber & intCurrentRow
        chkClassCheckBox.Text = m_DataTableClass.Rows(intCurrentRow).Item("ClassName")
        chkClassCheckBox.Location = New Point(intCurrentXPosition, intCurrentCBYPosition)
        grpNewGroupBox.Controls.Add(chkClassCheckBox)
        lstCheckboxes.Add(chkClassCheckBox)
        intCurrentCBYPosition += 30
        intCurrentRow += 1
        intArrayLength += 1
    Loop

    Me.Controls.Add(grpNewGroupBox)

    strGroupNamesArray(1, intNextGroupNumber - 1) = grpNewGroupBox.Name ' Add group names to array to sort checked checkboxes into

    intCurrentRow = 0
    intNextGroupNumber += 1
    intCurrentGroupBoxHeight = grpNewGroupBox.Height
    intCurrentYPosition = intCurrentYPosition + intCurrentGroupBoxHeight + 50
    intCurrentCBYPosition = 15
    intArrayLocation += 1
Loop

intArrayLocation = 0

'Search strGroupBoxNameArray for next group and then insert strGroupBoxNameAddArray values
For Each Group In strGroupBoxNameAddArray
    intClassNumber = 1
    Try
        strGroupName = strGroupBoxNameAddArray(intArrayLocation)
        intGroupNumber = Microsoft.VisualBasic.Right(strGroupName, 1)

        If Not dicGroups.ContainsKey(Group) Then
            Do
                Try
                    strCheckBoxName = "chkClass" & intGroupNumber & intClassNumber
                    If lstCheckboxes.Contains(strCheckBoxName) Then
                        lstGroupCheckboxes.Add(lstCheckboxes.Item("chkClass" & intGroupNumber & intClassNumber))
                    Else
                        Exit Do
                    End If
                    intClassNumber += 1
                Catch
                    MessageBox.Show(ErrorToString)
                    Exit Do
                End Try
            Loop
            dicGroups.Add(Group, lstGroupCheckboxes)
        End If
        intArrayLocation += 1
    Catch
        MessageBox.Show(ErrorToString)
        Exit For
    End Try
Next 
```

清单上有什么好的参考资料吗？我很难找到能够准确解释列表如何工作的材料。

谢谢！

我确实替换了以下内容：

```
Do
    Try
        strCheckBoxName = "chkClass" & intGroupNumber & intClassNumber
        If lstCheckboxes.Contains(strCheckBoxName) Then
            lstGroupCheckboxes.Add(lstCheckboxes.Item("chkClass" & intGroupNumber & intClassNumber))
        Else
            Exit Do
        End If
        intClassNumber += 1
    Catch
        MessageBox.Show(ErrorToString)
        Exit Do
    End Try
Loop 
```

具有以下内容：

```
lstGroupCheckboxes.AddRange(lstCheckboxes.Where(Function(cb) cb.Name.StartsWith("chkClass" & intGroupNumber))) 
```

但是我在这条线上遇到了一些麻烦：

```
dicGroups.Add(Group, lstGroupCheckboxes) 
```

我用列表 lstCheckboxes 填充这个字典键没有问题，我只是在用新列表 lstGroupCheckboxes 填充它时遇到了问题。新列表的格式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:14:50.177

使用 .Where() 或 .Any() 而不是 .Contains()。整个 If 块：

```
If lstCheckboxes.Contains(strCheckBoxName) Then 
```

（整个块，而不仅仅是那一行）可以变成：

```
lstGroupCheckboxes.AddRange(lstCheckboxes.Where(Function(cb) cb.Name = strCheckBoxName)) 
```

* * *

用这个替换整个 Do ... Loop：

```
lstGroupCheckboxes.AddRange(lstCheckboxes.Where(Function(cb) cb.Name.StartsWith("chkClass" & intGroupNumber)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:18:21.773

这将创建一个包含所有匹配复选框的列表：

```
lstCheckboxes.Where(function(x) x.Name=="chkClass" & intGroupNumber & intClassNumber).ToList() 
```

# c# - 从另一个 IEnumerable 中提取 IEnumerable

> ID：13686942
> 
> 赞同：0
> 
> 时间：2012-12-03T15:57:16.853
> 
> 标签：c#, entity-framework

我有 3 个具有以下属性的类：

优惠清单类：

```
Guid Id
IEnumerable<Offer> Offers 
```

优惠等级：

```
Guid Id
Product Product 
```

产品类别：

```
Guid Id 
```

一个 OfferList 包含多个 Offer，一个 Offer 有确切的 1 个产品。

如何获得包含 OfferList 的所有产品的 IEnumerable？

```
OfferList offerList = this.GetOfferList(id);
IEnumerable<Product> products = offerList.Offers.SelectMany? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T15:58:53.453

您只需要[投影](http://msdn.microsoft.com/en-us/library/bb738447.aspx)：

```
IEnumerable<Product> products = offerList.Offers.Select(o => o.Product); 
```

# javascript - 基于选择值显示/隐藏 div 使用子 ref 使用 jquery 动态更新选择

> ID：13686945
> 
> 赞同：-2
> 
> 时间：2012-12-03T15:57:20.863
> 
> 标签：javascript, jquery, html, css, forms

这些选择选项通过 wordpress 后端以及以下 div 标签进行更改。

我需要的是相应的div标签只能在选择框在那个选择的位置时显示它。

代码示例：

```
<form>
    <select class="select" name="SELECT_Mood_30">
        <option value="0"></option>
        <option value="hap">Happy</option>
        <option value="sad">Sadness</option>
        <option value="ang">Angry</option>
        <option value="gru">Grumpy</option>
    </select>
</form>

<ul id="show-these">
    <li></li>
    <li>Happy huh?</li>
    <li>Why so sad?</li>
    <li>Everything will be ok!</li>
    <li>Cheer up!</li>​​​​​​​​​​​​​​​​​​​​​​​​
</ul> 
```

所以基本上我希望jquery能够知道选择了哪个数字孩子并在li ID“show-these”中显示相同的数字孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:59:57.260

**JS**

```
var $ul = $('#show-these');
$ul.find('li').hide();

$('.select').on('change', function(){
    var index = $(this).find('option:selected').index();
    var $ul = $('#show-these');
    $ul.find('li').hide();
    $ul.find('li').eq(index).show();

});​ 
```

**HTML**

```
<div id="show-these">
    <li></li>
    <li>Happy huh?</li>
    <li>Why so sad?</li>
    <li>Everything will be ok!</li>
    <li>Cheer up!</li>​​​​​​​​​​​​​​​​​​​​​​​​
</div> 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/36PfL/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T16:08:08.113

猜猜这有帮助：

```
<select class="select" onchange="update(this.value)" name="SELECT_Mood_30">
    <option value="0"></option>
    <option value="hap">Happy</option>
    <option value="sad">Sadness</option>
    <option value="ang">Angry</option>
    <option value="gru">Grumpy</option>
</select>
<div id="show-these">
    <li></li>
    <li>Happy huh?</li>
    <li>Why so sad?</li>
    <li>Everything will be ok!</li>
    <li>Cheer up!</li>
</div>

<script type="text/javascript">
    function update(value){
        var option = $('.select').find('option[value="'+value+'"]');
        var index = $('.select').children().index(option);
        $('#show-these').children().hide();
        $($('#show-these').children()[index]).show();
    }
</script> 
```

# php - 如何提前删除上传的文件

> ID：13686950
> 
> 赞同：0
> 
> 时间：2012-12-03T15:57:30.693
> 
> 标签：php, javascript, mysql

所以用户正在插入一篇新文章，他也是通过ajax文件上传的，每个上传的文件都保存在mysql表中，每个文件都绑定到当前未添加的文章，如果用户添加了文章那么一切都好，但是如果他离开页面或关闭浏览器，这些文件已上传，但它们绑定的 article_id 不存在，问题是如果用户离开页面或其他内容，我该如何删除这些文件发生，因为我不想在未使用的表中收集垃圾，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:08:36.303

让一个 cron 作业执行一个小脚本，每天进行一次清理。通常这样的事情是在后半夜完成的。请注意该进程已启动，以便它具有足够的权限来写入文件系统。

如果您无法以 shell 的形式访问系统以允许您执行“可怜的 mans cron”：使用 wget 调用一些 php 文件，以通过对 http 服务器的请求触发文件。最后的工作方式相同，您可以从其他地方触发该过程。

# css - Firefox 和 Opera 渲染边框不正确

> ID：13686958
> 
> 赞同：17
> 
> 时间：2012-12-03T15:57:56.307
> 
> 标签：css, firefox, border, shapes

我使用纯 CSS 制作的梯形创建了一个[圆形菜单](http://codepen.io/joexadrez/pen/cDgfo)，但是当我旋转它们时，Firefox 会在两侧显示一条线，并且在 Opera 上，所有梯形都有一种奇怪的背景/边框颜色，有点透明。梯形[看起来像这样](http://codepen.io/joexadrez/pen/GByhd)。

```
.trapezoid {
  width: 100px;  height: 0px;
  margin: 55px auto 0 auto;
  border-bottom: 140px solid black;
  border-left: 35px solid transparent;
  border-right: 35px solid transparent;
  transition: rotate (100deg);
} 
```

Chrome 和 IE9 都可以。我怎样才能找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:54:06.203

你会想在 Firefox 中使用 -moz；-o 用于 Opera。这些是在这些浏览器中正确格式化的扩展。[这里是一个很棒的形状网站](http://css-tricks.com/examples/ShapesOfCSS/)。

```
.trapezoid 
{ 
        border-bottom: 100px solid red; 
        border-left: 50px solid transparent; 
        border-right: 50px solid transparent; 
        height: 0; 
        width: 100px; 
        transform:rotate(180deg);
        -moz-transform:rotate(180deg); /* Firefox 4 */
        -webkit-transform:rotate(180deg); /* Safari and Chrome */
        -o-transform:rotate(180deg); /* Opera */

} 
```

另外我不确定你是否试图改变某种效果；但转换代码如下所示：

```
 transition:width 2s, height 2s;
 -moz-transition:width 2s, height 2s, -moz-transform 2s; /* Firefox 4 */
 -webkit-transition:width 2s, height 2s, -webkit-transform 2s; /* Safari and Chrome */
 -o-transition:width 2s, height 2s, -o-transform 2s; /* Opera */ 
```

只需事先添加过渡；然后将变换置于悬停状态。如果您尝试像按钮一样添加它。希望这会有所帮助。

我用 Firebug 查看了一些额外的数据；对于 Firefox 16.02，此代码有效：

```
.trapezium
{
  height: 0px;
  width: 80px;
  border-bottom-width: 80px;
  border-bottom-style: solid;
  border-bottom-color: #2d9dcd;
  border-left-width-value: 40px;
  border-left-style-value: solid;
  border-left-color-value: transparent;
  border-right-width-value: 40px;
  border-right-style-value: solid;
  border-right-color-value: transparent;
  margin-top: 30px;
  margin-right: 0px;
  margin-bottom: 0px;
  margin-left: 10px;
} 
```

我相信这就是您正在寻找的。试试看，让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:53:57.937

发生这种情况是因为缺少供应商前缀。如下应用供应商前缀，您会得到正确的。

过渡属性用于设置和计时过渡。
[https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)

```
.trapezoid {
  width: 100px;  height: 0px;
  margin: 55px auto 0 auto;
  border-bottom: 140px solid black;
  border-left: 35px solid transparent;
  border-right: 35px solid transparent;
  -webkit-transform: rotate(100deg);
    -moz-transform: rotate(100deg);
    -o-transform: rotate(100deg);
    -ms-transform: rotate(100deg);
    transform: rotate(100deg);
} 
```

# perl - Perl 将值 1 添加到值 2 值 2 到值 3 等到文件末尾

> ID：13686965
> 
> 赞同：1
> 
> 时间：2012-12-03T15:58:00.770
> 
> 标签：perl, data-manipulation

我有一个 Perl 问题，应该相当简单，但似乎不太正确 我有一个包含 2 列数字的文件，我需要获取第二列并将此列中的第一个值添加第二个，第二个到第三个，第三个到第四个等等。我不知道第 2 列中有多少个数字，所以我需要这样做直到文件结束，我也希望能够使用这些在我的程序中进一步价值观。我将在下面给出一个虚拟示例以及到目前为止我尝试过的代码。

示例文件制表符分隔文件 data.txt

```
1   29
2   26
3   24
4   28 
```

期望输出示例

```
55

50

52 
```

代码原样：

```
#!/usr/bin/perl -w
# use and library files
use strict;
use warnings;

my $line;
my $Val;
my $sum;
open(FH, "data.txt") or die $!;
while (my $line = <FH>){
my @val = split("\t", $line);
my $Val = $val[1];
my $sum = $Val+$Val;
print "$sum\n";
}
close FH; 
```

行 $sum = $Val+$Val; 需要有某种循环，以便添加正确的值，但不确定如何正确处理，然后我需要以某种方式分配总和值变量名称以供以后使用。

任何帮助将不胜感激

在此先感谢 Sinead

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:02:32.603

你几乎在你的例子中得到了它。`$Val`是你以前的值。因此，在 $sum 中使用它之前，您不能覆盖它。这意味着交换这两行并添加前一个值和当前值。

```
my $sum = $Val+$val[1];
my $Val = $val[1]; 
```

一个建议是，尝试为变量赋予不同的名称。大小写的差异只会导致混淆。

这是我的版本

```
my $prev = 0;
while (<>) {
    my(@cols) = split;
    my $sum = $prev + $cols[1];
    $prev = $cols[1];
    print "$sum\n" if ($. > 1); # skip first line
} 
```

并调用它

```
perl sum.pl data.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:19:21.580

这可以使用单行轻松完成：

```
perl -lanwe 'push @a, $F[1]; 
             next if @a < 2; print $a[0]+$a[1]; shift @a;" nums.csv 
```

**输出：**

```
55
50
52 
```

**解释：**

这是单行代码的解析代码：

```
while (<>) {              # comes from the -n switch
    chomp;                # remove line ending, -l switch does this
    our(@F) = split;      # split the input line, -a switch does this
    push @a, $F[1];       # buffer the second field
    next if @a < 2;       # check buffer size
    print $a[0] + $a[1];  # print sum
    shift @a;             # remove first value from buffer
} 
```

总之：

*   `-l`为你处理你的行尾
*   `-a`在空白处自动拆分输入行。`-F`您可以使用开关自己提供拆分模式，例如`-F"\t"`。
*   `-n`在您的代码周围放置一个`while(<>)`循环。这有效地将参数作为文件名并循环遍历文件内容。
*   `-w`启用警告，这是一件好事。

# c# - BitVector32 - 第一位为真

> ID：13686968
> 
> 赞同：2
> 
> 时间：2012-12-03T15:58:05.810
> 
> 标签：c#, .net, bitvector

我对 BitVector32 的行为有点困惑。看测试：

```
[TestClass]
public class ParallelPortDevices {
    [TestMethod]
    public void BitVector32Test() {
        var lVector = new BitVector32(0);

        Assert.IsTrue(lVector[0]);
        Assert.IsFalse(lVector[1]);
    }
} 
```

这通过了。即第一位设置为1（根据测试）。但是，如果您运行 ToString 方法，您将得到“BitVector32{00000000000000000000000000000000}”

有什么我想念的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T16:09:21.757

`BitVector32`不使用索引器语法进行索引，它使用它作为位掩码。例如，如果您要这样做：

```
lVector[7] = true; 
```

`ToString`会给`0...000111`。

getter 的反编译代码如下所示：

```
return ((long) this.data & (long) bit) == (long) (uint) bit; 
```

所以最终发生的事情是这样的：

```
(0 & 0) == 0 
```

这当然是真的。

# routing - DSR（动态源路由）的路由请求标头

> ID：13686971
> 
> 赞同：2
> 
> 时间：2012-12-03T15:58:14.967
> 
> 标签：routing, protocols, tinyos

```
 typedef  nx_struct RouteRequest{

    nx_uint16_t   src ; // the node ID of RREQ originator 

    nx_uint16_t   desn ;  // the node ID of desired destination

    nx_uint16_t   reqid;  // unique id to recognize duplicate request

   nx_uint16_t  route_record;  // append node address in the route record

    nx_uint8_t  numhops;  // hop count 
 } RouteRequest; 
```

我的问题是，虽然路由请求（src、desn、reqid）在到达目标节点之前是相同的。在路线记录中，每个注释都必须在其中附加其地址（Node_id）。那么路由记录中的字节会发生变化，对吗？？
请在这方面帮助我..

谢谢， 普雷姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-06T17:33:57.427

路由记录将在每一跳处扩展，在每一跳处附加字节。沿途每个数据包都可以使用此字节列表来了解其前身。

# android - 像工具提示一样设计自定义视图

> ID：13686980
> 
> 赞同：0
> 
> 时间：2012-12-03T15:58:35.030
> 
> 标签：android, custom-component

有没有人知道创建一个像下图这样的自定义组件而不是使用图像本身。我知道如何创建一个矩形（使用 xml 而不是在 java 中的圆形），这在[此处的链接](https://stackoverflow.com/questions/5618402/how-to-draw-rounded-rectangle-in-android-ui)中进行了讨论，但我无法使用指针部分之类的东西。

如果有人建议我这样做，我会很高兴。

![在此处输入图像描述](../Images/0a1b5e893e8240d59d0ca10936889fd0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:05:19.050

您可以使用自定义的弹出窗口。我以前从未尝试过，但是您可以尝试一下，如果成功，请在此处分享....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:26:31.097

创建一个扩展 PopupWindow 的类，并通过代码设置背景，以便您可以替换它的颜色。

这是一个简单的 PopupWindow 示例：[http ://www.ceveni.com/2009/09/popup-window-in-android-sample-program.html](http://www.ceveni.com/2009/09/popup-window-in-android-sample-program.html)

请参阅这篇文章以了解如何更改/替换可绘制对象中的[颜色：如何在 Android 中更改可绘制对象的颜色？](https://stackoverflow.com/questions/1309629/how-to-change-colors-of-a-drawable-in-android)

那篇文章中的`adjust()`方法对你来说已经足够了。
创建一个新的`PopupWindow`，加载 bg drawable，更改其颜色并将新的 drawable 设置为 popupWindow。

# javascript - 在准备好的文档中包装一堆函数

> ID：13686981
> 
> 赞同：0
> 
> 时间：2012-12-03T15:58:36.417
> 
> 标签：javascript, jquery

这个问题可能更多的是语法问题。我有一些简单的代码来控制一些自定义选项卡，这些选项卡在单击时会在屏幕上流动和流动。在大多数情况下，代码（尤其是动画）按预期工作并且没有问题。

```
<script type="text/javascript">
                    $('.side_drawer_face').click(function() {

                            if ($('#side_drawer').css("left") <= "0"){
                                  $('#overlay_div').show();  
                                  document.getElementById('side_drawer').style.zIndex = 6000;
                                  document.getElementById('side_drawer2').style.zIndex = 5000;
                                  $('#side_drawer').animate({ opacity: 1.0, left: '+=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '+=406'}, 500);

                            } else if ($('#side_drawer').css("z-index") == "6000"){
                                  $('#overlay_div').hide();
                                  $('#side_drawer').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  document.getElementById('side_drawer').style.zIndex = 6000;
                                  document.getElementById('side_drawer2').style.zIndex = 5000;
                            }   else {
                                      document.getElementById('side_drawer').style.zIndex = 6000;
                                      document.getElementById('side_drawer2').style.zIndex = 5000;

                                }

                        });
                    $('.side_drawer_face2').click(function() {
                                //shows Bio div
                            if ($('#side_drawer2').css("left") <= "0"){
                                  $('#overlay_div').show(); 
                                  document.getElementById('side_drawer2').style.zIndex = 6000;
                                  document.getElementById('side_drawer').style.zIndex = 5000;
                                  $('#side_drawer').animate({ opacity: 1.0, left: '+=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '+=406'}, 500);
                            } else if ($('#side_drawer2').css("z-index") == "6000"){
                                  $('#overlay_div').hide();
                                  $('#side_drawer').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '-=406'}, 500);

                            } else {
                                  document.getElementById('side_drawer2').style.zIndex = 6000;
                                  document.getElementById('side_drawer').style.zIndex = 5000;

                            }
                        });
                    $('.clear_overlay').click(function() {

                                  $('#overlay_div').hide();
                                  $('#side_drawer').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  document.getElementById('side_drawer2').style.zIndex = 5000;
                                  document.getElementById('side_drawer').style.zIndex = 6000;
                        }); 

                    </script> 
```

我的问题是，在某些浏览器中（以 I 开头并以 E 结尾）在加载其他页面元素时快速单击选项卡会导致意外行为。我想做的是用文档就绪语句包装整个脚本，以便在加载页面上的所有内容之前无法执行任何功能。（脚本已经位于 html 正文的底部）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:09:14.440

```
$(document).ready(function() {
                     $('.side_drawer_face').click(function() {

                            if ($('#side_drawer').css("left") <= "0"){
                                  $('#overlay_div').show();  
                                  document.getElementById('side_drawer').style.zIndex = 6000;
                                  document.getElementById('side_drawer2').style.zIndex = 5000;
                                  $('#side_drawer').animate({ opacity: 1.0, left: '+=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '+=406'}, 500);

                            } else if ($('#side_drawer').css("z-index") == "6000"){
                                  $('#overlay_div').hide();
                                  $('#side_drawer').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  document.getElementById('side_drawer').style.zIndex = 6000;
                                  document.getElementById('side_drawer2').style.zIndex = 5000;
                            }   else {
                                      document.getElementById('side_drawer').style.zIndex = 6000;
                                      document.getElementById('side_drawer2').style.zIndex = 5000;

                                }

                        });
                    $('.side_drawer_face2').click(function() {
                                //shows Bio div
                            if ($('#side_drawer2').css("left") <= "0"){
                                  $('#overlay_div').show(); 
                                  document.getElementById('side_drawer2').style.zIndex = 6000;
                                  document.getElementById('side_drawer').style.zIndex = 5000;
                                  $('#side_drawer').animate({ opacity: 1.0, left: '+=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '+=406'}, 500);
                            } else if ($('#side_drawer2').css("z-index") == "6000"){
                                  $('#overlay_div').hide();
                                  $('#side_drawer').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '-=406'}, 500);

                            } else {
                                  document.getElementById('side_drawer2').style.zIndex = 6000;
                                  document.getElementById('side_drawer').style.zIndex = 5000;

                            }
                        });
                    $('.clear_overlay').click(function() {

                                  $('#overlay_div').hide();
                                  $('#side_drawer').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  $('#side_drawer2').animate({ opacity: 1.0, left: '-=406'}, 500);
                                  document.getElementById('side_drawer2').style.zIndex = 5000;
                                  document.getElementById('side_drawer').style.zIndex = 6000;
                        }); 

}); 
```

Nick 和 Matt 的评论是正确的——语法非常简单，只需在`ready`函数中绑定事件处理程序

# python - 从文本文件中删除字符串保持浮动

> ID：13686983
> 
> 赞同：3
> 
> 时间：2012-12-03T15:58:38.197
> 
> 标签：python, string, file

我正在寻找删除文本文件中带有字符串或空行的行。它看起来像这样。正如您所看到的，标题在文件中自我重复。包含数据的行数因每个块而异。我需要将它作为数组导入 numpy. 起初我用逗号表示小数点，至少我能够改变它。

我试过了，但它根本不起作用：

```
from types import StringType

z = open('D:\Desktop\cycle 1-20 20-50 kPa (dot).dat', 'r')
for line in z.readlines():
    for x in z:
        if type(z.readline(x)) is StringType:
            print line

z.close() 
```

数据示例：

```
bla bla

cyclical stuff                      Time:   81.095947   Sec 2012-08-02 17:05:42
stored :    1   cycle           stores for :    62  seg-cycle
Points :    4223
Servo_Hyd count Temps   Servo_Air pressure  Servo_Hyd load Servo_Hyd LVDT1  Servo_Hyd LVDT2 Servo_Hyd LVDT3
name1    name1    name1 name1   name1   name1   name1
1   60.102783   0.020013755 89.109558   0.3552089   0.4015148   -0.33822596
1   60.107666   0.020006953 89.025749   0.35519764  0.4015218   -0.33821729
1   60.112549   0.02000189  88.886292   0.3551946   0.4015184   -0.33822691
1   60.117432   0.020007374 89.559196   0.35519707  0.40151948  -0.33823174
1   60.122314   0.019991774 89.741402   0.35519552  0.40151322  -0.33822927
1   60.127197   0.020003742 89.748924   0.35520011  0.40150556  -0.33822462

bla bla

cyclical stuff                      Time:   81.095947   Sec 2012-08-02 17:05:42
stored :    1   cycle           stores for :    62  seg-cycle
Points :    4223
Servo_Hyd count Temps   Servo_Air pressure  Servo_Hyd load Servo_Hyd LVDT1  Servo_Hyd LVDT2 Servo_Hyd LVDT3
name1    name1    name1 name1   name1   name1   name1
1   60.102783   0.020013755 89.109558   0.3552089   0.4015148   -0.33822596
1   60.107666   0.020006953 89.025749   0.35519764  0.4015218   -0.33821729
1   60.112549   0.02000189  88.886292   0.3551946   0.4015184   -0.33822691
1   60.117432   0.020007374 89.559196   0.35519707  0.40151948  -0.33823174
1   60.122314   0.019991774 89.741402   0.35519552  0.40151322  -0.33822927
1   60.127197   0.020003742 89.748924   0.35520011  0.40150556  -0.33822462 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:05:32.647

Python 最初会将所有文件元素读取为字符串，除非您强制转换它们，因此您的方法将不起作用。

您最好的选择可能是使用正则表达式来过滤掉其中包含非数据字符的行。

```
f = open("datafile")
for line in f:
  #Catch everything that has a non-number/space in it
  if re.search("[^-0-9.\s]",line): 
     continue
  # Catch empty lines
  if len(line.strip()) == 0:
     continue
  # Keep the rest
  print(line)

f.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:03:34.180

你为什么不使用`numpy.loadtxt`？它有一个非常适合这些情况的界面。
请参阅[此处的文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html#numpy.loadtxt)

```
yourArry = np.loadtxt(open('yourfilename.txt', skiprows=7) 
```

此外，由于您有 heder（它应该是标题，可以在文件顶部找到），您可以将文件拆分为多个文件。您可以使用 Python 来完成，也可以使用 UNIX 命令`csplit`。怎么做，你会得到什么：

```
oz123@:~/tmp> csplit -k data.txt   '/^bla/' '{*}'
0
787
786
oz123@:~/tmp> ls xx
xx00  xx01  xx02
oz123@:~/tmp> ls xx00
xx00
oz123@:~/tmp> cat xx00
oz123@:~/tmp> cat xx01
bla bla

cyclical stuff                      Time:   81.095947   Sec 2012-08-02 17:05:42
stored :    1   cycle           stores for :    62  seg-cycle
Points :    4223
Servo_Hyd count Temps   Servo_Air pressure  Servo_Hyd load Servo_Hyd LVDT1  Servo_Hyd LVDT2 Servo_Hyd LVDT3
name1    name1    name1 name1   name1   name1   name1
1   60.102783   0.020013755 89.109558   0.3552089   0.4015148   -0.33822596
1   60.107666   0.020006953 89.025749   0.35519764  0.4015218   -0.33821729
1   60.112549   0.02000189  88.886292   0.3551946   0.4015184   -0.33822691
1   60.117432   0.020007374 89.559196   0.35519707  0.40151948  -0.33823174
1   60.122314   0.019991774 89.741402   0.35519552  0.40151322  -0.33822927
1   60.127197   0.020003742 89.748924   0.35520011  0.40150556  -0.33822462

oz123@:~/tmp> cat xx02
bla bla

cyclical stuff                      Time:   81.095947   Sec 2012-08-02 17:05:42
stored :    1   cycle           stores for :    62  seg-cycle
Points :    4223
Servo_Hyd count Temps   Servo_Air pressure  Servo_Hyd load Servo_Hyd LVDT1  Servo_Hyd LVDT2 Servo_Hyd LVDT3
name1    name1    name1 name1   name1   name1   name1
1   60.102783   0.020013755 89.109558   0.3552089   0.4015148   -0.33822596
1   60.107666   0.020006953 89.025749   0.35519764  0.4015218   -0.33821729
1   60.112549   0.02000189  88.886292   0.3551946   0.4015184   -0.33822691
1   60.117432   0.020007374 89.559196   0.35519707  0.40151948  -0.33823174
1   60.122314   0.019991774 89.741402   0.35519552  0.40151322  -0.33822927
1   60.127197   0.020003742 89.748924   0.35520011  0.40150556  -0.33822462 
```

# javascript - IE8 中断函数：预期的标识符、字符串或数字

> ID：13686984
> 
> 赞同：0
> 
> 时间：2012-12-03T15:58:41.457
> 
> 标签：javascript, jquery

```
success: function(html){
    var halfh = html.height;
    $('#contact_'+id).show();
    $('#contact_'+id).css({'width':'90%'}).animate({
        opacity: '0.6',
        height: halfh
    }, 500 ,'linear').animate({
        opacity: '1',
    },500,'linear',function(){  <--- Error on this line
        $(this).html(html.content)
    }); 
```

注意：我将其全部更改为双引号，例如：

```
 opacity: "0.6",
    height: halfh
}, 500 ,"linear").animate({
    opacity:"1",
},500,"linear",function(){ 
```

但仍然是同样的错误:(

请帮忙。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:03:13.727

正如@soderslatt 在评论中所写，逗号有误。删除它并稍微优化您的代码。

```
success: function(html){
    $('#contact_' + id).show().css({'width': '90%'}).animate({
            opacity: 0.6,
            height: html.height
          }, 500, 'linear').animate({
             opacity: 1
          }, 500, 'linear', function() {
              $(this).html(html.content);
          });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:07:46.430

就像我之前的评论一样。后面有一个逗号。

```
opacity:"0.6",
        height: halfh
      }, 500 ,"linear").animate({
         opacity:"1"
      },500,"linear",function(){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:06:34.317

```
}, 500 ,'linear').animate({
   opacity:'1',  <---  Remove this comma
},500,'linear',function(){ 
```

# php - 在PHP中查找图像边框颜色的算法

> ID：13686990
> 
> 赞同：4
> 
> 时间：2012-12-03T15:58:50.520
> 
> 标签：php, gd

我正在尝试找到一种从图像中获取边框颜色的方法`php`

我曾尝试使用此代码，但此算法为我提供了任何图像中的所有颜色。

```
<?php 
function colorPalette($imageFile, $numColors, $granularity = 5) 
{ 
   $granularity = max(1, abs((int)$granularity)); 
   $colors = array(); 
   $size = @getimagesize($imageFile); 
   if($size === false) 
   { 
      user_error("Unable to get image size data"); 
      return false; 
   } 
   $img = @imagecreatefromjpeg($imageFile); 
   if(!$img) 
   { 
      user_error("Unable to open image file"); 
      return false; 
   } 
   for($x = 0; $x < $size[0]; $x += $granularity) 
   { 
      for($y = 0; $y < $size[1]; $y += $granularity) 
      { 
         $thisColor = imagecolorat($img, $x, $y); 
         $rgb = imagecolorsforindex($img, $thisColor); 
         $red = round(round(($rgb['red'] / 0x33)) * 0x33);  
         $green = round(round(($rgb['green'] / 0x33)) * 0x33);  
         $blue = round(round(($rgb['blue'] / 0x33)) * 0x33);  
         $thisRGB = sprintf('%02X%02X%02X', $red, $green, $blue); 
         if(array_key_exists($thisRGB, $colors)) 
         { 
            $colors[$thisRGB]++; 
         } 
         else 
         { 
            $colors[$thisRGB] = 1; 
         } 
      } 
   } 
   arsort($colors); 
   return array_slice(array_keys($colors), 0, $numColors); 
} 
// sample usage: 
$palette = colorPalette('rmnp8.jpg', 10, 4); 
echo "<table>\n"; 
foreach($palette as $color) 
{ 
   echo "<tr><td style='background-color:#$color;width:2em;'>&nbsp;</td><td>#$color</td></tr>\n"; 
} 
echo "</table>\n"; 
```

此外，我正在尝试使用它来构建类似这些设计的设计。

![第一的](../Images/a229241c2f21b40bcdd2a3b34144655c.png) ![第二](../Images/ded9c67a13e3ee7b21369d4183245e6a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T16:08:21.727

您获得图像中所有颜色的原因是因为您使用嵌套循环来迭代图像中的像素。相反，您应该使用两个顺序循环：一个检查水平边界，另一个检查垂直边界，因此您的循环代码将变成这样：

```
function checkColorAt(&$img, $x, $y, &$colors) {
    $thisColor = imagecolorat($img, $x, $y); 
    $rgb = imagecolorsforindex($img, $thisColor); 
    $red = round(round(($rgb['red'] / 0x33)) * 0x33);  
    $green = round(round(($rgb['green'] / 0x33)) * 0x33);  
    $blue = round(round(($rgb['blue'] / 0x33)) * 0x33);  
    $thisRGB = sprintf('%02X%02X%02X', $red, $green, $blue); 
    if(array_key_exists($thisRGB, $colors)) 
    { 
        $colors[$thisRGB]++; 
    } 
    else 
    { 
        $colors[$thisRGB] = 1; 
    }
}

$colors = array();
for($x = 0; $x < $size[0]; $x += $granularity) 
{ 
    checkColorAt(&$img, $x, $0, &$colors);
    checkColorAt(&$img, $x, $size[1] - 1, &$colors);
}

for($y = 0; $y < $size[1]; $y += $granularity) 
{ 
    checkColorAt(&$img, $0, $y, &$colors);
    checkColorAt(&$img, $size[0] - 1, $y, &$colors);
} 
```

# c# - 泛型类型和继承

> ID：13686996
> 
> 赞同：0
> 
> 时间：2012-12-03T15:59:05.873
> 
> 标签：c#, generics, inheritance

我希望能够为几个课程执行以下操作：

```
var obj1 = new MyClass { Id = 1 };
var obj2 = new MyClass { Id = 2 };
obj1.Compare(obj2); 
```

我做了以下扩展方法（[灵感来自一个不同的问题](https://stackoverflow.com/questions/5811478/find-differences-between-two-entities-of-the-same-type)）：

```
public static class ObjExt
{
    public static ICollection<string> Compare<T>(this T obj1, T obj2)
    {
        var properties = typeof(T).GetProperties();
        var changes = new List<string>();

        foreach (var pi in properties)
        {
            var value1 = typeof(T).GetProperty(pi.Name).GetValue(obj1, null);
            var value2 = typeof(T).GetProperty(pi.Name).GetValue(obj2, null);

            if (value1 != value2 && (value1 == null || !value1.Equals(value2)))
            {
                changes.Add(string.Format("Value of {0} changed from <{1}> to <{2}>.", pi.Name, value1, value2));
            }
        }
        return changes;
    } 
```

现在，如果我在要比较的所有类中创建一个方法，这将起作用，所以我想我会将它作为一个超类移动到 DRY。

```
public class MyClass
{
    public int Id { get; set; }

    public ICollection<string> CompareMe<T>(T obj2)
    {
        return Compare<T>(obj2);
    }
} 
```

如果我将它移动到一个超类，我会得到这个编译错误：

> 无法将实例类型参数“SuperClass”转换为“T”

如果我在我的超级班上这样做：

```
return this.Compare<T>(obj2); 
```

我得到一个编译错误说：

> 无法从用法中推断出方法“Compare(T, T)”的类型参数。尝试明确指定类型参数。

如何在超类中使其通用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:05:50.090

不知道你的超级班长什么样。但这编译得很好：

```
public class SuperClass
{
    public bool GenericTest<T>(T obj2)
    {
       return ObjExt.GenericTest(obj2, obj2);
    }
}

public class MyClass : SuperClass
{
    public int Id { get; set; }

    public bool SuperTest<T>(T obj2)
    {
        return this.GenericTest<T>(obj2);
    }
}

public static class ObjExt
{
    public static bool GenericTest<T>(this T obj1, T obj2)
    {
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:14:03.557

这种扩展方法：

```
public static bool GenericTest<T>(this T obj1, T obj2)
{
} 
```

不会编译，因为编译器不知道到底是什么`T`：没有上下文可以推断类型。您要么需要使用类似的东西，`where T: SuperClass`要么将方法参数更改为`this SuperClass obj1, SuperClass obj2`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:14:11.260

您可以在方法上添加通用约束`SuperTest`：

```
public bool SuperTest<T>(T obj2) where T: SuperClass
            {
                return this.GenericTest(obj2);
            } 
```

并`T`在扩展方法中替换为`SuperClass`：

```
public static bool GenericTest(this SuperClass obj1, SuperClass obj2)
        {
            return true;
        } 
```

我不确定这是否是您的想法。

# java - 在播放框架中处理表单输入

> ID：13686997
> 
> 赞同：0
> 
> 时间：2012-12-03T15:59:08.417
> 
> 标签：java, jsp, playframework, request, playframework-2.0

这开始让我感到沮丧。阅读文档后，看起来在游戏中处理表单输入的典型方法是这样的：

```
val form = Form(tuple(
           "param1" -> text,
           "param2" -> text
           )
        ); 
```

但是，这样做存在一些问题。即使我 import `play.api.data.*`，我也会收到以下错误：

1.  val 无法解析为类型。
2.  文本无法解析为变量。
3.  预计“-”、“--”上有语法错误。

我可以在网上找到零文档。

有人知道为什么会这样吗？我会错过进口或其他什么吗？这些是我的进口：

```
import play.*;
import play.api.data.*;
import play.mvc.*;
import views.html.*; 
```