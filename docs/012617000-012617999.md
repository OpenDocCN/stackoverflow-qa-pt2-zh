# StackOverflow 问答 12617000-12617999

# tfs - TFSPreview 登记入住时的电子邮件通知

> ID：12617001
> 
> 赞同：3
> 
> 时间：2012-09-27T08:23:03.647
> 
> 标签：tfs, azure-devops

如何在 TFSPreview 上设置电子邮件通知？

我想在每次登记时收到一封电子邮件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T09:03:55.930

您可以访问团队的警报电子邮件

![在此处输入图像描述](../Images/1011e04f28bc74ec5bde944ce2d927f5.png)

一旦在那里，您可以选择您想要的警报并输入您的电子邮件地址。

![在此处输入图像描述](../Images/61f0b45fbc87e1cc4b449839aa8430f6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:34:46.257

检查有关请求的此主题。[http://msdn.microsoft.com/en-us/magazine/cc507647.aspx](http://msdn.microsoft.com/en-us/magazine/cc507647.aspx) 在这里您可以找到您需要的所有信息。=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-12T11:38:37.860

通过浏览器查看 microsoft TFS 2017 的官方文档

[电子邮件通知设置](https://docs.microsoft.com/en-us/azure/devops/boards/queries/alerts-and-notifications?view=tfs-2017)

# bit-manipulation - << 和 >> 之间总是混淆

> ID：12617002
> 
> 赞同：0
> 
> 时间：2012-09-27T08:23:05.253
> 
> 标签：bit-manipulation

我总是对这两个运算符感到困惑，我不知道是什么让这个数字变小或变大。

有人可以告诉我如何记住每个运算符的作用吗？（标志，一些例子等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:27:27.240

将它们视为向上或向下“推”位的箭头。

运算符将`<<`通过将位向上推向一个字节中的较高值槽来增加数字的大小，例如：

```
128  64  32  16  8   4   2   1
-------------------------------
 0   0   0   0   0   1   0   0    before push (value = 4)
 0   0   0   0   1   0   0   0    after << push (value = 8) 
```

运算符将`>>`通过将位向下推向字节中的较低值槽来减小数字的大小，例如：

```
128  64  32  16  8   4   2   1
-------------------------------
 0   0   0   0   0   1   0   0    before push (value = 4)
 0   0   0   0   0   0   1   0    after >> push (value = 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:24:19.203

您不能真正将它们视为使数字变大或变小。这两种转变都可以使数字更大或更小，具体取决于输入。

*   左移（无符号解释）：0 位可以从左侧脱落，使数字更大，或者 1 位可以从左侧脱落，使数字更小。
*   左移（有符号解释）：可以将 0 位移到之前为 0 的符号中，使数字变大；可以将 0 位移入之前为 1 的符号，使数字更大；可以将 1 位移入之前为 1 的符号，使数字更小；可以将 1 位移入以前为 0 的符号，使数字小得多。
*   无符号右移：好的，这个很简单，数字变小了。
*   有符号右移：负数变大，正数变小。

我为左移而不是右移编写“解释”的原因是只有一种左移，但取决于您将结果解释为有符号还是无符号，它有一个“不同”的结果（位是当然也一样）。但是实际上有两种不同的右移，一种保持符号，而无符号右移只是移动一个 0 位（这也有一个有符号的解释，但它通常并不重要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:24:30.937

移位在二进制中的工作方向与在十进制中的工作方向相同。左移 (1, 10, 100, ...) 使数字变大。右移使数字变小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T08:24:31.073

<< 是左移运算符。例如 0b10 << 2 = 0b1000 （由 0b 语法组成）。>> 是右移运算符，相反。0b10 >> 1 = 0b1。对于有符号的数字右移，符号不会改变。对于带符号的左移，您必须了解[2 的补码](http://en.wikipedia.org/wiki/Two%27s_complement)才能了解发生了什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T08:30:55.550

```
<< --- it tells going left direction and this means left side decreasing.

>> --- it tells going right direction and this means right side decreasing. 
```

# ios - iOS 应用无法接收报亭通知

> ID：12617004
> 
> 赞同：1
> 
> 时间：2012-09-27T08:23:05.420
> 
> 标签：ios, xcode, notifications, push, newsstand-kit

我是 iOS 编程新手，在开发 Newsstand 应用程序时遇到了一个真正的问题。简单地说，应用程序似乎没有收到报亭通知（我在 didReceiveRemoteNotification 和 didFinishLaunchingWithOptions 中有 NSLog，并且在 XCode 中运行的应用程序期间没有显示日志）。我在 info.plist 中设置了所有需要的设置，我也在我的应用程序中包含了这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// register for Push notification and don't use throttling for development
//[[UIApplication sharedApplication] unregisterForRemoteNotifications];
[[NSUserDefaults standardUserDefaults] setBool:YES  forKey:@"NKDontThrottleNewsstandContentNotifications"];
[[NSUserDefaults standardUserDefaults] synchronize];
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:UIRemoteNotificationTypeNewsstandContentAvailability]; 
```

由于该应用程序能够处理正常的推送通知（警报、声音等）。我认为这都是关于节流的，但是，正如我上面提到的，我将默认设置为不使用节流。我已经阅读了一些 Apple 的指南并搜索了许多论坛，发现我需要在 XCode 组织中将我正在使用的设备设置为“启用开发”。但是我找不到任何复选框或按钮来设置它。我使用 XCode 4.5。

谁能帮我解决这个问题？您知道如何调试通知并检查它们消失的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:26:12.627

您必须发送带有 content-available : 1 的推送通知，并在您设备中应用的 Newsstand 设置中将 Automatic Downloads 设置为“ON”。

# c# - 如何获取列表框项？

> ID：12617006
> 
> 赞同：0
> 
> 时间：2012-09-27T08:23:07.577
> 
> 标签：c#, windows-phone-7, xaml

我有一个`ListBox`. 如果我使用`listBox.Items[0]`我得到这个项目的数据内容，但我想得到这个项目的高度。

如何获取这些信息？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:04:25.603

你可以使用一个`VisualTreeHelper` [类你可以](http://msdn.microsoft.com/ru-ru/library/system.windows.media.visualtreehelper%28v=vs.95%29.aspx)[在这里](https://stackoverflow.com/questions/11521980/list-box-and-visual-tree-helper) 找到一个例子。因此，如果您只需要第一个元素 - 以这种方式使用它：

```
 var item = FindFirstElementInVisualTree<ListBoxItem>(listBox);
        var height = item != null ? item.ActualHeight : 0.0; 
```

如果您不仅需要检查第一个，请随意修改该方法或编写您自己的方法。

# mysql - Rails - 热插拔表

> ID：12617016
> 
> 赞同：0
> 
> 时间：2012-09-27T08:23:42.113
> 
> 标签：mysql, ruby-on-rails, hotswap

我每天都从外部来源获得一张桌子的转储（让学生们留在桌子上）。为了减少表被截断并使用新数据更新时的停机时间，我计划维护该表的两个副本（students_1 和 students_2）。这两个都需要每天交替使用学生模型进行映射。因此，如果今天我使用来自students_1 的数据，明天，一旦将数据输入到students_2，我就需要无缝切换到那个数据。

所以我的问题是 1）这种方法足够好还是有更好的方法？2）对于热交换表，是否可以只维护一个指示当前正在使用的表的文件，然后通过读取该特定文件的方法设置_table_name？有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:46:03.257

您可以将其作为数据加载策略的一部分，我不会弄乱存储表名或使用非标准表名。数据加载完成后，改为执行表重命名命令，它是原子完成的，不应中断您的应用程序。

```
RENAME TABLE students TO students_secondary_temp, students_secondary TO students, students_secondary_temp TO students_secondary; 
```

# asp.net - ASP.NET 向报告处理程序添加身份验证

> ID：12617019
> 
> 赞同：0
> 
> 时间：2012-09-27T08:23:55.450
> 
> 标签：asp.net, asp.net-mvc, authentication, httphandler, activereports

我在我的网站上配置了一个活动报告处理程序，以便我可以直接通过链接打开报告，例如

```
http://localhost/Report.rdlx?OutputFormat=pdf 
```

现在的问题当然是没有认证，所以每个人都可以调用这个链接。

**如何向此处理程序添加身份验证检查？**

我正在使用表单身份验证，最好我还想检查用户是否处于某个角色，但会对`IsAuthenticated`检查感到满意 - 这样用户至少必须登录才能查看报告。

我尝试构建一个“反向代理”路由处理程序（我正在使用 MVC），仅当用户通过身份验证时才返回来自报告 URL 的响应。但这并不能解决问题，因为“原始” URL 仍然暴露在外。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:42:01.337

[您仍然可以使用 ASP.NET 授权控制，这意味着您可以在 web.config 文件http://support.microsoft.com/kb/316871](http://support.microsoft.com/kb/316871)中限制对该位置的 访问

# java - 在Java中测量单链表的大小/长度？

> ID：12617021
> 
> 赞同：3
> 
> 时间：2012-09-27T08:23:56.703
> 
> 标签：java, list, linked-list, size

我需要帮助`int size();`在 Java 中制作单链表的方法。

这是我到目前为止所拥有的，但它没有返回列表的正确大小。

```
public int size()
{
    int size = 0;
    Node CurrNode = head;
    while(CurrNode.next != null)
    {
        CurrNode = CurrNode.next;
        size++;     
    }
    return size;
} 
```

有人可以帮我用 Java 实现这个方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T08:30:42.180

您可以做出的最大改进是使用 Java Coding Convension 并使用 camelCase 局部变量。

你可以这样写。

```
public int size() {
   int size = 0;
   for(Node n = head; n.next != null; n = n.next)
       size++;     
   return size;
} 
```

当您在 Java 中重写一个常用的类时，如果您想要一种更好的做事方式，我建议您看看它是如何完成的。

来自[链表](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)

```
/**
 * Returns the number of elements in this list.
 *
 * @return the number of elements in this list
 */
public int size() {
    return size;
} 
```

正如你所看到的，当一个元素被添加时，尺寸会增加，而当一个元素被移除时，它的 id 会减少，这样你就不必遍历列表来获取尺寸。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T08:30:12.267

最简单的方法是让变量跟踪初始化为 0 的大小。然后，每次添加节点时，它只是 size++，或 size-- 当您删除节点时。然后你的 size() 方法只需要返回这个变量而不遍历列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-05T20:55:35.257

您需要将列表传递给您的方法并检查 currNode!= null ：

```
public static int size(Node currNode){
    int count = 0;
    while (currNode!= null){
        count++;
        currNode=currNode.getNext();
    }
    return count;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-23T11:13:08.657

嗯，计算长度的最简单方法是检查 currentNode!=null 是否并保持 currentNode 递增。

我们可以使用 while 或 for 循环来实现这一点。

下面是使用 for 循环的示例。

```
public int getLength(){
    ListNode temp = head;
    for(temp = head; temp!=null; temp=temp.getNextNode()){

        length++;
    }
    return length;
} 
```

# python - 使用 Python 在列中组织数据文件的有效方法

> ID：12617024
> 
> 赞同：3
> 
> 时间：2012-09-27T08:24:06.447
> 
> 标签：python, regex, multiple-columns

我得到一个程序的输出数据文件，它看起来像这样，每个时间步都有不止一行：

```
0.0000E+00   0.0000E+00   0.0000E+00   0.0000E+00   0.0000E+00   0.0000E+00 \n   0.0000E+00   0.0000E+00   0.0000E+00   0.0000E+00
7.9819E-06   1.7724E-02   2.3383E-02   3.0048E-02   3.8603E-02   4.9581E-02 \n  5.6635E-02   4.9991E-02   3.9052E-02   3.0399E-02
.... 
```

我想把它排成十列

我制作了一个 Python 脚本，使用正则表达式在正确的行中删除 \n，但我认为应该有一种更简单更优雅的方法来做到这一点，这是我的脚本：

```
import re

with open('inputfile', encoding='utf-8') as file1:
       datai=file1.read()

dataf=re.sub(r'(?P<nomb>(   \d\.\d\d\d\dE.\d\d){8})\n','\g<nomb>',datai)

with open('result.txt',mode='w',encoding='utf-8') as resultfile:
        resultfile.write(datof) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:31:02.057

你可以尝试一个简单的

```
single_list = []
with open(your_file) as f:
    for line in f.readlines():
        single_list.extend(line.rstrip().split())

list_of_rows = [single_list[i*10:i*10+10] for i in range(len(single_list)//10)]

with open(output_file) as f:
    for line in list_of_rows:
        f.write(' '.join(line) + '\n') 
```

* * *

如果您的所有数据都可以读取为单个字符串（使用 your `data = f.read()`），您还可以：

```
merged_data = data.replace("\n", " ")
single_list = merged_data.split() 
```

并`single_list`如上所述使用。

* * *

如果输入文件很大并且创建临时列表存在内存问题，您可以尝试以下操作：

```
 with open(input_file,'r') as inpf, open(output_file,'w') as outf:
        writable = []
        for line in input_file:
            row = line.rstrip().split()
            writable.extend(row)
            while len(writable) >= 10:
                outf.write(" ".join(writable[:10]) + "\n")
                writable = writable[10:] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:32:18.363

您可以`split()`在每一行（或一组留置权）上使用来生成一个字符串列表，每个字符串包含一个数字，用于`<string>.join(<list_of_numbers>)`将它们连接到一个新行中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:06:13.727

您可以创建一个字典来将数据存储在类似结构的列中：

```
with open('inputfile', encoding='utf-8') as file1:
      in_f=file1.readlines()
arr = [line.strip().split('   ') for line in in_f] # or is it a tab that separates the  values?
# create an empty dict
db = {}

# use the index of the elements as a key
for i in range(len(arr[0])):
    db[i]=[]

# loop through first through the lists, then 
# iterate over the elements... 
for line in arr:
    for i,element in enumerate(line):
        db[i].append(element) 
```

输出：

`>>> db` `{0: ['0.0000E+00', '7.9819E-06'], 1: ['0.0000E+00', '1.7724E-02'], 2: ['0.0000E+00','2.3383E-02'], 3: ['0.0000E+00', '3.0048E-02'], 4: ['0.0000E+00', '3.8603E-02'], 5: ['0.0000E+00', '4.9581E-02'], 6: ['0.0000E+00', '5.6635E-02'], 7: ['0.0000E+00', '4.9991E-02'], 8: ['0.0000E+00', '3.9052E-02'], 9: ['0.0000E+00', '3.0399E-02']}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T09:10:56.897

我能想到的最简单的解决方案就是使用 numpy：

```
file = np.genfromtxt('file',unpack=True,names=True,dtype=None) 
```

你得到的是一本你可以访问的字典

```
print file[1][1] 
```

或者如果您有标题，请使用这些：

```
print file['header'] 
```

# .net - .NET MVC 4 HttpPost 出错

> ID：12617025
> 
> 赞同：1
> 
> 时间：2012-09-27T08:24:11.597
> 
> 标签：.net, asp.net-mvc, http-post

我在使用 .NET MVC 4 时遇到了一个有趣的小问题。我正在尝试了解它是如何工作的，在完成了一些教程之后，我一直遇到同样的问题。

下面是我的默认索引方法，页面加载时应该调用它。

```
 public ActionResult Index() {
       var result = (from Product in db.Products
                     orderby Product.Id ascending
                     select Product);
       return View(result.ToList());
   } 
```

该方法从我的数据库中返回一个产品列表。

```
@using (Html.BeginForm("Index", "Stap1", FormMethod.Post, new { id = "form1" }))
{
    <select id="select" size="4" name="product">
        @foreach (var item in Model)
        {
            <option value="@item.Id" >@Html.DisplayFor(modelItem => item.Naam), @Html.DisplayFor(modelItem => item.Prijs)</option>            
        }
    </select>
    <input type="submit" value="Voeg Toe!" name="Add" />
} 
```

我添加了一个函数来捕获表单的发布数据。像这样..

```
[HttpPost]
public ActionResult Index(int product = 0) {
                var result = (from Product in db.Products
                              orderby Product.Id ascending
                              select Product);
                System.Diagnostics.Debug.WriteLine("wrong function called!");
                return View(result.ToList());
            } 
```

但是，当我尝试加载索引页面时，您可以看到这是非常基本的东西。它调用“重载的 httppost Index()”而不是正常的。为什么在没有发布任何内容时调用 HTTPPOST 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:49:42.743

我检查了您的代码，这是正确的行为。您的应用程序从呈现**Index**视图 的**HomeController开始。**

 **在您看来，我发现了这段代码：

```
@using (Html.BeginForm("Index", "Stap1", FormMethod.Post, new { id = "form1" }))
{
   <input type="submit" value="Start!" name="start" />
} 
```

所以您实际上是在发布到**Stap1Controller**操作**Index**。
如果您想在不发布的情况下调用（HttpGet）您的索引，您应该执行以下操作：

```
@Html.ActionLink("Start!", "Index", "Stap1") 
```**

# java - `java.util.Properties` 文件保存在哪里以及如何访问它？

> ID：12617026
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:24:10.867
> 
> 标签：java

我正在向我的网络应用程序添加电子邮件发送功能。将从`java.util.Properties`文件中读取 SMTP 服务器设置。我不想硬编码这个文件的路径。

我应该把这个文件放在哪里？

我应该如何访问这个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:37:38.610

一个好的模式是将静态资源（如属性文件）保存在`WEB-INF/classes/`目录下。

这样它们就可以从浏览器中读取`classpath`而不能被浏览器访问：

例如，将您的设置文件放在 下`WEB-INF/classes/mail-settings.properties`，然后使用以下内容读取它：

```
InputStream is = MyClass.class.getResourceAsStream("mail-settings.properties");
Properties p = new Properties();
p.load(is);
is.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:41:29.913

将属性文件保存在类路径位置，如文件夹：WEB-INF/classes/mail.properties 这里属性文件是-mail.properties。要阅读此文件，您可以使用以下代码

```
import java.util.Locale;
import java.util.MissingResourceException;
import java.util.ResourceBundle;

public class EmailPropertyReader {
    private static ResourceBundle myResources;  
    public static String FILENAME = "mail";
    static{
        initialize(FILENAME);
    }
    public static void initialize(String propertyFile) throws MissingResourceException
    {
        try{
            myResources = ResourceBundle.getBundle(FILENAME, Locale.getDefault());
        }catch(Exception ex){
            //Logger
        }
        } 
private static String getParameter(String parmName) 
    {
        String param = null;
        try
        {
            param = myResources.getString(parmName) ;

        }catch(Exception e){            
            param = null;
                        //Logger
        }
        if (param != null)
            return param.trim();
        else
            return param;
    }
} 
```

您只需创建对象并在此处输入代码使用方法`getParameter() ->` 例如：

```
mail.properties :
EMAILID=a@a.com 
```

然后

```
String strEmailid=EmailPropertyReader.getParameter("EMAILID"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:38:24.687

如果您想将它与您的代码一起保存，您也可以通过编程方式创建 Properties 实例。

```
 Properties mailProperties = new Properties();
    mailProperties.setProperty("mail.transport.protocol", "smtp");
    mailProperties.setProperty("mail.smtp.host", "localhost");
    mailProperties.setProperty("mail.smtp.port", "587");
    mailProperties.setProperty("mail.smtp.auth", "false");

    javax.mail.Session.getInstance(mailProperties); 
```

如果你想把它放在一个属性文件中，你可以将它作为类路径资源加载。看看 java.lang.Class 中的 getResourceAsStream。更新：有关如何执行此操作，请参阅 epochs 答案！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:22:16.887

这是一个解决方案：

我已将`EmailSettings.properties`文件放入`WebContent\WEB-INF\classes`. 此代码现在有效：

```
InputStream inputFile = this.getClass().getClassLoader().getResourceAsStream("EmailSettings.properties");

Properties emailConfig = new Properties();

emailConfig.load( inputFile );
.
.
. 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-27T08:30:59.917

如果设置依赖于阶段，您可以通过 vm Enviorment 变量设置文件的路径。

-DmyPropertyFilePath=....

还有一篇关于在[Java World上加载属性文件的好文章（即使它有点过时）](http://www.javaworld.com/javaqa/2003-08/01-qa-0808-property.html)

# javascript - 如果缺少，脚本标记的 src 属性应该为 null 还是空字符串？

> ID：12617028
> 
> 赞同：1
> 
> 时间：2012-09-27T08:24:14.553
> 
> 标签：javascript, firefox, standards, princexml

我正在使用[PrinceXML](http://www.princexml.com)制作一些包含一些[MathJax](http://www.mathjax.org)标记的 HTML 的 PDF。为了正确呈现数学，处理数学呈现的 javascript 需要在转换为 PDF 之前在页面上运行。

如果我在 PrinceXML 中启用 javascript 并尝试加载 MathJax 库，我会在初始化代码中得到“TypeError：null value is not an object”。跟踪这一点，事实证明以下原因导致错误：

```
var scripts = (document.documentElement || document).getElementsByTagName("script");
var namePattern = new RegExp("(^|/)"+BASENAME+"\\.js(\\?.*)?$");
for (var i = scripts.length-1; i >= 0; i--) {
if (scripts[i].src.match(namePattern)) { // <--- Error thrown here
  STARTUP.script = scripts[i].innerHTML;
  if (RegExp.$2) {
    <etc...> 
```

在没有 src 属性的脚本元素上引发错误（MathJax 使用脚本元素来存储 LaTeX 代码）。PrinceXML 似乎通过在访问缺少的 src 属性时返回 null 来处理缺少的 src 属性 - 因此会像null`scripts[i].src.match(namePattern)`一样抛出错误。`src`但是，当在 Firefox 中完成时（参见小提琴： http: [//jsfiddle.net/9ZHMR/](http://jsfiddle.net/9ZHMR/)），当缺少 src 属性时 element.src 返回空字符串，因此在浏览器中工作时我没有看到这个问题。

哪种行为是“正确的” - 如果该属性不存在，脚本元素的 src 属性应该为 null 还是空字符串？这是现实生活与标准的对比吗？

**编辑**我主要感兴趣的是这种行为是否由某处的标准指定，所以我知道是否向 Firefox 或 PrinceXML 发布错误报告，或者如果没有标准，向 MathJax 发布错误报告以处理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:30:25.363

这取决于[HtmlScriptElement](http://www.w3.org/2003/01/dom2-javadoc/org/w3c/dom/html2/HTMLScriptElement.html)的具体实现。如果特定实现将 src 属性预定义为空字符串，就像在 FireFox 中的情况一样，那么 src 将作为空字符串返回。如果最初定义为 null，则 src 将返回为 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:33:03.123

您可能可以通过这个小修改来避免错误，它会在使用之前检查 src：

```
if (scripts[i].src && scripts[i].src.match(namePattern)) {
    ... 
```

还是长手...

```
if (scripts[i].src) {
    if (scripts[i].src.match(namePattern)) {
        ... 
```

如果 scripts[i].src 为 null，它将评估为“falsey”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T04:34:23.920

The spec at [http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#the-script-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#the-script-element) says:

```
 attribute DOMString src; 
```

That's not a nullable string return value, so returning null from .src is not allowed by the spec.

# python - django中的DataTables Ajax错误

> ID：12617030
> 
> 赞同：0
> 
> 时间：2012-09-27T08:24:17.220
> 
> 标签：python, ajax, django

我正在 django 中进行一些服务器端 ajax 加载。

这是我的代码片段：

```
@login_required
def cmdb_list_page_server_side(request):
#do not prepare data in view (as in  above view), data will be retrieved using ajax call (see get_countries_list below).
    return render_to_response('cmdb/list.html', locals(), context_instance = RequestContext(request))

def get_cmdb_list(request):
    #prepare the params

    #initial querySet
    querySet = CMDB.objects.all()
    #columnIndexNameMap is required for correct sorting behavior
    columnIndexNameMap = {
        0:'envcode',
        1:'appname',
        2:'sysip',
        3   :'ostype',
        4   :'hostname',
        5   :'cpu',
        6   :'mem',
        7   :'rootdisk',
        8   :'storagetype',
        9   :'location',
        10  :'enclosure',
        11  :'position1',
        12  :'position2',
        13  :'unit',
        14  :'serviceIP',
        15  :'manufacture',
        16  :'seller',
        17  :'machinemodel',
        18  :'machinecode',
        19  :'serialnumber',
        20  :'appearance',
        21  :'archtype',
        22  :'partition',
        23  :'storagesize',
        24  :'applevel',
        25  :'domains',
        26  :'netnote',
        27  :'gateway',
        28  :'mask',
        29  :'serviceport',
        30  :'ha',
        31  :'hbIP1',
        32  :'hbIP2',
        33  :'hardwarecharge',
        34  :'systemcharge',
        35  :'appcharge',
        36  :'managegateway',
        37  :'managemask',
        38  :'repairlevel',
        39  :'repairdate',
        40  :'dbinfo',
        41  :'middlewareinfo',
        42  :'nonsysusers',
        43  :'note',
    }
    #path to template used to generate json (optional)
    jsonTemplatePath = 'cmdb/json_cmdb.txt'

    #call to generic function from utils
    return get_datatables_records(request, querySet, columnIndexNameMap,jsonTemplatePath) 
```

**文件“'cmdb/json_cmdb.txt”如下所示：**

```
{
    sEcho: {{sEcho}},
    iTotalRecords: {{iTotalRecords}},
    iTotalDisplayRecords: {{iTotalDisplayRecords}},
    aaData:[
        {% for item in querySet %}
        [
            "{{ item.envcode }}",
            "{{ item.appname }}",
            "{{ item.sysip }}",
            "{{ item.ostype }}",
            "{{ item.hostname }}",
            "{{ item.cpu }}",
            "{{ item.mem }}",
            "{{ item.rootdisk }}",
            "{{ item.storagetype }}",
            "{{ item.location }}",
            "{{ item.enclosure }}",
            "{{ item.position1 }}",
            "{{ item.position2 }}",
            "{{ item.unit }}",
            "{{ item.serviceIP }}",
            "{{ item.manufacture }}",
            "{{ item.seller }}",
            "{{ item.machinemodel }}",
            "{{ item.machinecode }}",
            "{{ item.serialnumber }}",
            "{{ item.appearance }}",
            "{{ item.archtype }}",
            "{{ item.partition }}",
            "{{ item.storagesize }}",
            "{{ item.applevel }}",
            "{{ item.domains }}",
            "{{ item.netnote }}",
            "{{ item.gateway }}",
            "{{ item.mask }}",
            "{{ item.serviceport }}",
            "{{ item.ha }}",
            "{{ item.hbIP1 }}",
            "{{ item.hbIP2 }}",
            "{{ item.hardwarecharge }}",
            "{{ item.systemcharge }}",
            "{{ item.appcharge }}",
            "{{ item.managegateway }}",
            "{{ item.managemask }}",
            "{{ item.repairlevel }}",
            "{{ item.repairdate }}",
            "{{ item.note }}",
            "{{ item.dbinfo }}",
            "{{ item.middlewareinfo }}",
            "{{ item.nonsysusers }}",
        ]
            {% if not forloop.last %}
                ,
            {% endif %}
        {% endfor %}
    ]
} 
```

**最后，我从 webbrowser(Chrome) 收到错误警报窗口，提示数据表格式错误。使用萤火虫，我收到如下错误消息：**

PS我的ajax返回值包含中文。我想知道这是根本原因。Ajax 返回如下：

```
{
    sEcho: 1,
    iTotalRecords: 1178,
    iTotalDisplayRecords: 1178,
    aaData:"[

        [
            "",
            "王晴测试机(临时)",
            "197.1.5.206",
            "windows 2003 64bit",
            "FANGLTST",
            "4",
            "32",
            "100G",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "0",
            "False",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "None",
            "",
            "",
            "",
            "",
        ]

                ,

        [
            "",
            "Opsware测试",
            "197.1.4.201",
            "Redhat 64bit",
            "bsae",
            "1",
            "1",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "0",
            "False",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "None",
            "",
            "",
            "",
            "",
        ]

                ,

        [
            "",
            "预留分区",
            "N/A",
            "AIX 6.1",
            "N/A",
            "4",
            "32",
            "100G",
            "",
            "兆维II",
            "ZWII-B1-08",
            "DOWN",
            "S13/14",
            "",
            "199.0.34.173",
            "IBM",
            "志鸿英华",
            "PS702",
            "8406",
            "06DB59A",
            "刀片",
            "小型机",
            "",
            "",
            "",
            "",
            "",
            "",
            "255.255.255.0",
            "0",
            "False",
            "",
            "",
            "陈晓峰/毕伟光",
            "姜晓寒",
            "张元泉",
            "199.0.34.250",
            "255.255.255.0",
            "7*24*4",
            "None",
            "",
            "",
            "",
            "",
        ]

                ,

        [
            "",
            "Opsware测试",
            "197.1.4.202",
            "Redhat 64bit",
            "hpna",
            "8",
            "16",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "0",
            "False",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "None",
            "",
            "",
            "",
            "",
        ]

                ,

        [
            "",
            "预留分区",
            "",
            "AIX 6.1",
            "N/A",
            "2",
            "16",
            "100G",
            "",
            "兆维II",
            "ZWII-B1-08",
            "DOWN",
            "S13/14",
            "",
            "199.0.34.173",
            "IBM",
            "志鸿英华",
            "PS702",
            "8406",
            "06DB59A",
            "刀片",
            "小型机",
            "",
            "",
            "",
            "",
            "",
            "",
            "255.255.255.0",
            "0",
            "False",
            "",
            "",
            "陈晓峰/毕伟光",
            "姜晓寒",
            "张元泉",
            "199.0.34.250",
            "255.255.255.0",
            "7*24*4",
            "None",
            "",
            "",
            "",
            "",
        ]

                ,

        [
            "",
            "Opsware测试",
            "197.1.4.122",
            "",
            "opsware2",
            "0",
            "0",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "0",
            "False",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "None",
            "",
            "",
            "",
            "",
        ]

                ,

        [
            "",
            "开发机",
            "197.1.4.18",
            "HPUX 11.23",
            "cmbcux1",
            "4",
            "8",
            "2*300G",
            "",
            "兆维",
            "ZW-01-01",
            "N/A",
            "",
            "U16/19",
            "197.1.7.205",
            "HP",
            "志鸿英华",
            "rx4640",
            "AB370B",
            "SGH4617B1X",
            "标准机架",
            "小型机",
            "N/A",
            "",
            "",
            "内联",
            "",
            "197.1.4.250",
            "255.255.255.0",
            "0",
            "False",
            "",
            "",
            "杨杰",
            "张立新",
            "张小龙",
            "197.1.7.250",
            "255.255.255.0",
            "N/A",
            "十一月 19, 2009",
            "sapcool1",
            "DB2 9.5.0.5",
            "",
            "",
        ]

                ,

        [
            "",
            "Opsware测试",
            "197.1.4.123",
            "",
            "opsware3",
            "0",
            "0",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "0",
            "False",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "None",
            "",
            "",
            "",
            "",
        ]

                ,

        [
            "",
            "开发机",
            "197.1.4.24",
            "HPUX 11.23",
            "hpux3",
            "4",
            "8",
            "6*146G",
            "",
            "兆维",
            "ZW-01-01",
            "N/A",
            "",
            "U1/8",
            "197.1.7.206",
            "HP",
            "志鸿英华",
            "rx6600",
            "AD132A",
            "SGH4711KDR",
            "标准机架",
            "小型机",
            "N/A",
            "",
            "",
            "内联",
            "",
            "197.1.4.250",
            "255.255.255.0",
            "0",
            "False",
            "",
            "",
            "杨杰",
            "张立新",
            "胡汝能",
            "197.1.7.250",
            "255.255.255.0",
            "N/A",
            "四月 13, 2010",
            "None",
            "&quot;DB2 9.1.0.1",
            "None",
            "None",
        ]

                ,

        [
            "",
            "Opsware测试",
            "197.1.4.127",
            "",
            "opsware4bb",
            "0",
            "0",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "0",
            "False",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "",
            "None",
            "",
            "",
            "",
            "",
        ]

    ]
} 
```

# rest - 对 ID 的 Neo4j 密码查询不通过 REST 返回值，但通过数据浏览器返回

> ID：12617033
> 
> 赞同：3
> 
> 时间：2012-09-27T08:24:24.467
> 
> 标签：rest, neo4j

Neo4j 版本 1.8.M06

在 Web 管理界面的数据浏览器中执行的以下查询返回 Forename 属性的值：

```
start n=node(*) where ID(n)=147 return n.Forename 
```

然而，使用 REST API 发布的相同查询

```
{
  "query" :
  "start n=node(*) where ID(n)={id} return n.Forename",
  "params" : 
  {"id" : "147"}
} 
```

回报：

```
{
  "columns" : [ "n.Forename" ],
  "data" : [ ]
} 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:39:09.437

您不想在 REST 调用中引用 147 左右的引号。

另外，也许是因为你的简化，但我很确定你应该这样做`start n=node({id})`，以获得最佳性能。不确定它是否优化了这种事情。

# ruby - 红宝石。为什么 arr = %w{'a', 'b', 'c'} => ["'a',", "'b',", "'c'"]

> ID：12617036
> 
> 赞同：0
> 
> 时间：2012-09-27T08:24:32.410
> 
> 标签：ruby, arrays

来自这个问题[indexOf in Ruby](https://stackoverflow.com/questions/12616878/indexof-in-ruby)，

想知道为什么在 Ruby 中 `arr = %w{'a', 'b', 'c'} #=> ["'a',", "'b',", "'c'"]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:26:37.750

`%w`初始化数组，用空格分隔括号（或其他符号）中的内容（如果需要空格，用 转义`\`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T08:28:17.423

`%w{one two}`是 的快捷方式`["one", "two"]`：`%w{...}`符号将**空格分隔的**元素作为数组的字符串。

这实际上是背后的全部原因`%w{...}`：编写不带引号或逗号的数组来分隔元素，从而允许使用引号和逗号而不转义它们。

# android - 如何缩放位图

> ID：12617037
> 
> 赞同：-2
> 
> 时间：2012-09-27T08:24:35.643
> 
> 标签：android, bitmap

如何在运行时将位图缩放到非常小的尺寸，然后将它们存储在内部存储中？如何在运行时将缩放的位图从存储中调用到程序中，如果不存在，则从可绘制文件夹中调用它，对其进行缩放，将其写入存储，然后将其绑定到视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:25:56.377

您可以使用`BitmapFactory.Options`类将图像裁剪为任何大小。

您可以使用以下内容：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
options.inSampleSize = 8; // 1/8th of actual image.
BitmapFactory.decodeResource(getResources(), R.id.myimage, options);
int imageHeight = options.outHeight;
int imageWidth = options.outWidth;
String imageType = options.outMimeType; 
```

在这里，当你使用 Bitmap 时，总是调用它的`bmp.recycle()`方法，因为 GC 不能清除 Bitmap 持有的内存，如果你的 bitmap 没有被垃圾收集，那么你也会得到 OME。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:28:12.303

如果要缩放位图，可以使用[Bitmap.createScaledBitmap](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)

要将任意位图缩放到 32x32，您可以按如下方式进行：

```
Bitmap smallBitmap = Bitmap.createScaledBitmap( fullSizeBitmap, 32,  32,  true ); 
```

# android - 移动背景图像时出现空白行（Andengine）

> ID：12617043
> 
> 赞同：0
> 
> 时间：2012-09-27T08:24:56.467
> 
> 标签：android, andengine

我正在使用andengine开发游戏..我使用AutoParallaxBackground移动背景图像..它工作正常..但我在图像之间有一个空白行..图像没有问题

```
ie: autoParallaxBackground.addParallaxEntity(new ParallaxEntity(-20.0f, new Sprite(0, 0, this.bgTextureRegion1))); 
```

如何解决这个问题？

![在此处输入图像描述](../Images/5f71493868562e4e30007d8034761652.png)

设备屏幕截图...左角可见空白行

图像尺寸：720x480 相机尺寸：720x480 手机屏幕尺寸：320x240

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:08:16.403

问题是由于在应用双线性过滤时 TextureAtlas 的黑色背景溢出到图像上造成的。解决方法是将最左边和最右边的 1px 线加倍，使出血具有正确的颜色。这是一个令人讨厌的修复，应该证明这确实是问题所在，但是它将加载背景所需的时间增加了三倍，因此它对生产代码没有用处。当您为背景创建 TextureAtlas 时，请执行以下操作：

```
BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.backgroundBitmapTexture, this, "background.png", 0, 0);
BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.backgroundBitmapTexture, this, "background.png", 2, 0);
this.backgroundTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.backgroundBitmapTexture, this, "background.png", 1, 0); 
```

这样做是加载纹理三次，前两次向左和向右移动 1 个像素。第三个调用在两者之间创建实际的纹理区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T22:30:52.030

双线性纹理选项正是问题所在。在 GLES2.0 中，您可以消除 TextureOptions.BILINEAR，也可以将其更改为 NEAREST_PREMULTIPLYALPHA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T12:31:50.137

**为您的背景精灵实现 preDraw() 方法并设置 pGLState.enableDither();**

```
new Sprite(0, CAMERA_HIGHT,
                    this.mParallaxLayerBack, vertexBufferObjectManager) {

                @Override
                protected void preDraw(GLState pGLState, Camera pCamera) {

                    super.preDraw(pGLState, pCamera);
                    pGLState.enableDither();
                }

            } 
```

# jquery - Vegas JQuery 背景点击

> ID：12617045
> 
> 赞同：4
> 
> 时间：2012-09-27T08:25:02.660
> 
> 标签：jquery

我正在使用[Vegas Jquery](http://vegas.jaysalvat.com/)全屏显示图像作为背景。

有谁知道我可以将链接与这些背景图像中的每一个相关联的方法？基本上，如果他们单击背景，我想将它们发送到另一个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:58:16.157

这听起来有点矫枉过正，但你有没有试过：

```
$.vegas({
  src:'http://vegas.jaysalvat.com/demo/images/background-1.jpg',
  fade:2000,
  complete:function() {
      $(this).wrap('<a href="http://www.w3schools.com" target="_blank">');
  }
}); 
```

就像[这里](http://jsfiddle.net/bldoron/x5dRY/1/)
而且我不以任何方式提倡吸烟。

# php - PHP静态类Array []运算符？

> ID：12617046
> 
> 赞同：0
> 
> 时间：2012-09-27T08:25:06.817
> 
> 标签：php, class, static, overloading, operator-keyword

我需要在静态 PHP 类中实现方括号（数组运算符）。

主要目标是在最后进行这样的类调用：

```
MyStaticClass[ $something ] = $somethingElse ;
$SomeVar = MyStaticClass[ $something ] ; 
```

我知道这是异端邪说，但我真的需要它……

任何的想法 ？

我想知道是否可以对这样的操作员进行静态调用，因为我在网上一无所获。

感谢您的每一个帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:27:17.443

我认为您不需要重载运算符。

如果我理解您的问题，您希望能够访问和修改 MyStaticClass 中的字段吗？

然后这样做：

```
MyStaticClass::$something = $somethingElse ;
$SomeVar = MyStaticClass::$something ; 
```

只需确保您的静态属性在类定义中设置为公共。

PHP 并不像 C++ 那样真正支持运算符重载：

[http://www.php.net/manual/en/language.oop5.overloading.php](http://www.php.net/manual/en/language.oop5.overloading.php)

[是否可以在 PHP 中重载运算符？](https://stackoverflow.com/questions/787692/operator-overloading-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:27:39.890

`[]`只有变量和方法不能重载

样本类

```
class MyStaticClass
{
    static public $somthing = array("somthingElse"=>"Hello Benj") ;
} 
```

直接调用

```
var_dump(MyStaticClass::$somthing["somthingElse"]); 
```

你也可以使用

```
$MyStaticClass = MyStaticClass::$somthing ;
var_dump($MyStaticClass["somthingElse"]); 
```

他们俩都会输出

```
string 'Hello Benj' (length=10) 
```

**在 PHP 5.4 中**

```
function MyStaticClass()
{
    return MyStaticClass::$somthing ;
}

var_dump(MyStaticClass()["somthingElse"]); 
```

# iphone - iPhone应用程序崩溃没有任何日志

> ID：12617047
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:25:11.227
> 
> 标签：iphone, memory, crash

我的应用程序在玩了 10 分钟后崩溃了。

在控制台中，没有任何关于这次崩溃的显示，也没有警告，没有日志。

而且我没有收到任何内存警告。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:30:16.717

请参阅 Next to stop 按钮，您的项目名称将在那里单击并转到编辑`Scheme -> Argument -> Environment Variables ->`单击`+`按钮并写入`NSZombieEnabled`然后 value `YES`。

它会告诉你的应用程序到底在哪里崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:40:01.770

然后尝试将您的设置`Run Static Analyzer`为 YES `shift+Command+B`。看看你是否有潜在的内存泄漏。或者尝试使用 Intruments 运行您的代码。

或试试这个：

`Edit Scheme` ![在此处输入图像描述](../Images/626a8291af17ae12a071bd40ef52f5f3.png)

然后添加`NSZombieEnabled`如下图所示。 ![在此处输入图像描述](../Images/89b6e88933470c6d6a8ca9c6070e07c5.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:29:04.787

尝试在代码中添加断点以检查应用程序崩溃的点。

# java - Java SWT 图形上下文 - 如何获取渐变矩形坐标处的颜色？

> ID：12617050
> 
> 赞同：0
> 
> 时间：2012-09-27T08:25:20.243
> 
> 标签：java, swt, 2d, draw

我有一个渐变矩形，用 SWT 图形上下文绘制。如何检索在矩形内的不同点使用的颜色？

```
e.gc.setForeground(color_highlight_shadow);
e.gc.setBackground(color_normal_shadow);
e.gc.fillGradientRectangle(0, 1, 100, 100, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:32:35.447

您可以通过将区域（您的像素）复制到图像中并从该图像中提取 RGB 来获得它：

```
final Image image = new Image(display, 1, 1);
e.gc.copyArea(image, x, y);

ImageData data = image.getImageData();

int pixelValue = imageData.getPixel(0,0);

PaletteData palette = data.palette; 
RGB rgb = palette.getRGB(pixelValue); 
System.out.println("RGB value for (x,y): " + rgb); 
```

# android - 布局不适合不同的屏幕尺寸

> ID：12617054
> 
> 赞同：0
> 
> 时间：2012-09-27T08:25:37.107
> 
> 标签：android

我有一个游戏布局，但它不适合不同尺寸的屏幕，虽然我有

```
<supports-screens android:smallScreens="true"
    android:normalScreens="true" android:largeScreens="true"
    android:anyDensity="true">
</supports-screens> 
```

在我的清单中，我的 xml 文件设置为 fill_parent。

这是我的xml代码之一：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/mainlay"
    android:orientation="vertical" android:background="@drawable/menubackground">

    <Button
        android:id="@+id/cloud"
        android:layout_width="87dp"
        android:layout_height="57dp"
        android:background="@drawable/clouds" android:layout_marginTop="130dp"/>

    <Button
        android:id="@+id/newgame"
        android:layout_width="168dp"
        android:layout_height="63dp"
        android:layout_marginRight="7dp"
        android:layout_marginTop="50dp"
        android:background="@drawable/mainbuttoncontrol1" />

    <Button
        android:id="@+id/highscores"
        android:layout_width="166dp"
        android:layout_height="44dp"
        android:layout_marginRight="7dp"
        android:background="@drawable/mainbuttoncontrol3" />

    <Button
        android:id="@+id/settings"
        android:layout_width="165dp"
        android:layout_height="38dp"
        android:layout_marginRight="7dp"
        android:background="@drawable/mainbuttoncontrol4" />

    <Button
        android:id="@+id/instructions"
        android:layout_width="164dp"
        android:layout_height="61dp"
        android:layout_marginRight="7dp"
        android:background="@drawable/mainbuttoncontrol2" />

    <RelativeLayout android:layout_width="wrap_content" android:id="@+id/rl_onoff"
    android:layout_height="wrap_content">
<ImageView android:id="@+id/on_btn" android:layout_width="50dp"  android:layout_height="50dp" android:src="@drawable/soundon" android:visibility="visible" android:layout_alignParentBottom="true" android:layout_alignParentRight="true"></ImageView>
<ImageView android:id="@+id/off_btn" android:layout_width="50dp"  android:layout_height="50dp" android:src="@drawable/soundoff" android:visibility="invisible" android:layout_alignParentBottom="true" android:layout_alignParentRight="true"></ImageView>
   </RelativeLayout>

</LinearLayout> 
```

你能帮我找出为什么它不适合不同的屏幕尺寸吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:29:33.257

因为支持它并不意味着它会自动缩放它。您必须根据屏幕尺寸和屏幕密度制作“不同”的布局。

读[这个](http://developer.android.com/guide/practices/screens_support.html)

# php - 使用 PHP 安全上传图片？

> ID：12617070
> 
> 赞同：1
> 
> 时间：2012-09-27T08:26:18.203
> 
> 标签：php, file-upload, image-upload

我想从浏览器窗口将图像上传到我的服务器。但是，上传字段对每个人都是可见的，所以我需要设置一些限制。我只找到了 w3schools 文件上传（从 w3fools.com 开始，我不相信它）。我希望限制是：

**最大尺寸 2,5M**

**图像类型 jpg、jpeg、png、gif**

所以这是 w3schools 提供的代码，但它实际上不会将文件保存在任何地方？我已经对其进行了一些修改以满足我的需要。

```
<?php
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/jpeg"))
|| ($_FILES["file"]["type"] == "image/png"))
&& ($_FILES["file"]["size"] < 2500000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Error: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Stored in: " . $_FILES["file"]["tmp_name"];
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

由于我不希望我的网站被黑客入侵，我想要一个安全的解决方案，对此有什么帮助吗？

**编辑**

代码甚至什么都不做。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:39:37.033

您需要使用 php move_upload_file 函数，并且我已经对您的 if 语句进行了更改，这是工作和测试的示例：

```
<?php

if (isset($_REQUEST["submit"])) {

    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));

    if ($_FILES["file"]["type"] == "image/gif" || $_FILES["file"]["type"] == "image/jpg" || $_FILES["file"]["type"] == "image/jpeg" || $_FILES["file"]["type"] == "image/png" && $_FILES["file"]["size"] < 2500000 && in_array($extension, $allowedExts)) {

      if ($_FILES["file"]["error"] > 0) {

        echo "Error: " . $_FILES["file"]["error"] . "<br />";

      }
      else {

        $fname = $_FILES["file"]["name"];
        move_uploaded_file($_FILES["file"]["tmp_name"], $fname);

        echo "Upload: " . $_FILES["file"]["name"] . "<br />";
        echo "Type: " . $_FILES["file"]["type"] . "<br />";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
        echo "Stored in: " . $fname;

      }

    }
    else {

      echo "Invalid file type";

    }

}
?>
<form action="" method="post" enctype="multipart/form-data">
<input type="file" name="file" />
<input type="submit" name="submit" value="submit" />
</form> 
```

您还可以按照以下建议使用 getimagesize 函数：

```
$size = getimagesize("http://www.simplestudio.rs/060620121945.jpg");

$file_format = $size['mime']; 
```

$file_format 将表示为例如“image/jpeg”，因此您可以轻松检查图像类型，如下所示：

```
foreach($allowedExts as $allowed) {

$chk_types = strpos($file_format, $allowed);

if($chk_types > -1) {
$type_is_good = true;
break;
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:30:50.870

使用：move_uploaded_file，请参阅，[手册](http://php.net/manual/en/function.move-uploaded-file.php)

还有一件事情，

该`$_FILES["file"]["type"]`变量不好使用，因为它可以通过浏览器设置进行更改。

请改用 getimagesize，请参阅，[手册](http://php.net/manual/en/function.getimagesize.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T10:55:02.703

1.  $ratio2) { $thumb_w=$new_w; $thumb_h=$old_y/$ratio1; } 其他 { $thumb_h=$new_h; $thumb_w=$old_x/$ratio2; }

    ```
     $dst_img=ImageCreateTrueColor($thumb_w,$thumb_h);

        imagecopyresampled($dst_img,$src_img,0,0,0,0,$thumb_w,$thumb_h,$old_x,$old_y);

                if(!strcmp("png",$ext))             imagepng($dst_img,$filename);       else            imagejpeg($dst_img,$filename); 
            imagegif($dst_img,$filename);
                imagedestroy($dst_img);         imagedestroy($src_img);   }  }  if(!function_exists('getExtension'))    {       function 
    ```

    getExtension($str) { $i = strrpos($str,"."); if (!$i) { return ""; } $l = strlen($str) - $i; $ext = substr($str,$i+1,$l); 返回 $ext; } }

    ```
    $image=$_FILES["$imagename"]['name'];   if($image)      {  
        $filename = stripslashes($_FILES["$imagename"]['name']); 
        $extension = getExtension($filename);       $extension = 
    ```

    strtolower($extension); if (($extension != "jpg") && ($extension != "jpeg") && ($extension != "png") && ($extension != "gif") && ($extension != "bmp" )) {

    ```
     $obj->set_flash("Unknown extension...!");           header("Location: $filename ");             exit;       }       else        {

            $size=getimagesize($_FILES["$imagename"]['tmp_name']);
            $sizekb=filesize($_FILES["$imagename"]['tmp_name']);

            if ($sizekb > MAX_SIZE*1024)
            {
                $obj->set_flash("You have exceeded the size limit...!");
                header("Location: $filename");
                exit;
            }

        $select_max = $obj->sql_query("select max($fieldname) as MaxID from  ".$tablename."");
                        if($action=="Add")          {
                $Max = $select_max[0]['MaxID'];
                $image_name = $Max + 1;
                $new_name = $image_name.".".$extension;//the new name will be containing the full path where will be stored (images folder)
                $$imagename = $new_name;//New Name of Image same as Image Field Name
                $thumbfilename = $new_name;
                $newname="$uploadpath/large/".$new_name;

                $copied = copy($_FILES["$imagename"]['tmp_name'], $newname);
                //we verify if the image has been uploaded, and print error instead
                if (!$copied) 
                { 
                    $obj->set_flash("Copy unsuccessfull...!");
                    header("Location: $filename");
                    exit;
                }
                else
                {
                    $thumb_name="$uploadpath/thumb/".$thumbfilename;
                    $thumb=make_thumb($newname,$thumb_name,$WIDTH,$HEIGHT);
                }           }           if($action=="Update")           {

                $new_name=$ID.".".$extension;
                $$imagename = $new_name;//New Name of Image same as Image Field Name
                $newname = "$uploadpath/large/".$new_name;
                $thumbfilename = $new_name;
                $copied = copy($_FILES["$imagename"]['tmp_name'], $newname);

                if (!$copied) 
                {
                    $obj->set_flash("Copy unsuccessfull...!");
                    header("Location: $filename");
                    exit;
                }
                else
                {
                    $thumb_name="$uploadpath/thumb/".$thumbfilename;
                    $thumb=make_thumb($newname,$thumb_name,$WIDTH,$HEIGHT);
                }           }       }   }       if($action=="Delete")   {       $SelectImage = $obj->sql_query("select $imagename from  $tablename where $fieldname 
    ```

    = ".$$ 字段名。" "); $ThisImage = $SelectImage[0]["$imagename"]; unlink("$uploadpath/thumb/".$ThisImage); unlink("$uploadpath/large/".$ThisImage); } ?>
    1.  项目清单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-20T02:34:20.967

```
<?php

          $file_name   = $_FILES['file']['name'];
          $file_size   = $_FILES['file']['size'];
          $file_tmp    = $_FILES['file']['tmp_name'];
          $file_type   = $_FILES['file']['type'];

          /* variable array for store errors */
          $errors   = [];                   

          /* Check if file already exists in location file save */
          $file_dir  = "uploads";
          /** if folder not exists, then create it **/
          if (!file_exists($file_dir)) {
            mkdir($file_dir, 0777, true);
          }

          $file_target = $file_dir . $file_name;
          if (file_exists($file_target)) {
            //$errors[] = "Sorry, <strong>{$file_name}</strong> already exists.";
          }

             /* Check file size */
          if ($file_size > 2500000) {
            $errors[] = "Sorry, <strong>{$file_name}</strong> is too large. It size is {$file_size} > 2500000 bytes";
          }

          /* Check current file formats with file secure */
          $file_secure  = array('jpg', 'jpeg', 'png', 'gif');                   
          $file_current = strtolower(pathinfo($file_name, PATHINFO_EXTENSION)); /* (end(explode('.', $file_name) */

          if (in_array($file_current, $file_secure) === false) {
            $errors[] = "Sorry, <strong>{$file_current}</strong> extension not allowed";            
          }

          /* Check if Errors exist, then not upload. Or if Errors NOT exist, then try upload */
          if (!empty($errors)) {                            

            /* display error */                 
            foreach ($errors as $keyError => $valueError) {
              echo "$keyError = $valueError <br />";
            }

            echo "<br />";
            echo "<strong>{$file_name}</strong> could not uploaded. <hr />";                            

          } else {

            if (move_uploaded_file($file_tmp, $file_target)) {

              echo "Upload: "    . $file_name . "<br />";
              echo "Type: "      . $file_type . "<br />";
              echo "Size: "      . ($file_size / 1024) . " Kb<br />";
              echo "Stored in: " . $file_tmp;

            } else {

              echo "Invalid file";

            }

          }

?> 
```

# xaml - 在鼠标悬停时使按钮透明

> ID：12617071
> 
> 赞同：4
> 
> 时间：2012-09-27T08:26:18.910
> 
> 标签：xaml, windows-8, visual-studio-2012

我正在使用 Microsoft Visual Studio Express 2012 构建一个 Metro 风格的应用程序。我对这个应用程序非常陌生，我需要帮助。我在 XAML 中定义了一个按钮，按钮背景是从图像中设置的。鼠标悬停在按钮上时，其背景变为空白。我想改变它，使图像在鼠标悬停时大约透明 50%。那可能吗？有什么帮助吗？谢谢你。

我已将按钮声明如下：

```
<Button Height="100" Width="100" Margin="0,0,0,0">
  <Button.Background>
    <ImageBrush ImageSource="../Images/home.png"></ImageBrush>
  </Button.Background>
</Button> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:16:03.257

Windows 应用商店应用程序不存在 Interactivity dll。您应该改用视觉状态。使用 Blend 很容易实现。

如果您在 Blend 中打开您的应用程序并编辑按钮模板的副本，您最终将在您的 xaml 中获得完整的默认按钮样式。您只需编辑 PointerOver 视觉状态即可实现您想要的效果。

您的按钮将如下所示：

```
<Button Height="100" Width="100" Margin="0,0,0,0" Style="{StaticResource ButtonStyle1}">
    <Button.Background>
        <ImageBrush ImageSource="/Assets/Images/home.png"></ImageBrush>
    </Button.Background>
</Button> 
```

并且您必须在应用程序的资源中定义样式，以便您可以在任何地方使用它。

在下面的代码中，查看 PointerOver 视觉状态。它定义了按钮在进入该状态时应如何更改。在这里，我们说边框的不透明度（即显示背景图像的内容）应该是 0.5 ：

```
<DoubleAnimation Duration="0" To="0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Border" d:IsOptimized="True"/> 
```

这是完整的样式：

```
<Style x:Key="ButtonStyle1" TargetType="Button">
    <Setter Property="Background" Value="{StaticResource ButtonBackgroundThemeBrush}"/>
    <Setter Property="Foreground" Value="{StaticResource ButtonForegroundThemeBrush}"/>
    <Setter Property="BorderBrush" Value="{StaticResource ButtonBorderThemeBrush}"/>
    <Setter Property="BorderThickness" Value="{StaticResource ButtonBorderThemeThickness}"/>
    <Setter Property="Padding" Value="12,4,12,4"/>
    <Setter Property="HorizontalAlignment" Value="Left"/>
    <Setter Property="VerticalAlignment" Value="Center"/>
    <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
    <Setter Property="FontWeight" Value="SemiBold"/>
    <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="PointerOver">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Border" d:IsOptimized="True"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonPressedBackgroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonPressedForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonDisabledBackgroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonDisabledBorderThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonDisabledForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhite"/>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlack"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused"/>
                            <VisualState x:Name="PointerFocused"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Border x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="3">
                        <ContentPresenter x:Name="ContentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                    <Rectangle x:Name="FocusVisualWhite" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
                    <Rectangle x:Name="FocusVisualBlack" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# iphone - 如何为自定义 UIButton 类创建构造函数？

> ID：12617078
> 
> 赞同：1
> 
> 时间：2012-09-27T08:26:37.830
> 
> 标签：iphone, ios, uibutton

我创建了该类的子`UIButton`类。我想在创建时更改其背景颜色。如何编写构造函数方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:32:01.150

```
-(id)initWithFrame :(CGRect)frame{
    if(self = [super init]) {

        // The default size for the save button is 49x30 pixels
        self.frame = frame;//CGRectMake(0, 0, 60.0, 34.0);

        // Center the text vertically and horizontally
        self.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        self.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;

        UIImage *image = [UIImage imageNamed:@"image.png"];

        [self setBackgroundImage:image forState:UIControlStateNormal];

            [self setBackgroundColor:[UIColor blueColor]];

        // Set the font properties
    //  [self setTitleColor:[UIColor orangeColor] forState:UIControlStateNormal];

        self.titleLabel.font = [UIFont boldSystemFontOfSize:12];

    }

    return self;
} 
```

# encoding - 如何减小 H.264 电影的 moov atom 的大小以改善智能手机的流媒体启动？

> ID：12617080
> 
> 赞同：8
> 
> 时间：2012-09-27T08:26:39.933
> 
> 标签：encoding, ffmpeg, h.264, mp4, aac

我们将视频服务流式传输到智能手机（iOS 和 Android）。我们使用 H.264+AAC 编码并使用 mp4 容器。我们有一个问题，即长电影（60 分钟以上）需要很长时间才能开始播放，并且已将其追踪到这些电影的大尺寸 moov atom。对于 110 分钟的电影，原子有 4.2Mb 大，显然需要很长时间才能通过 3G 下载到智能手机！

有没有办法让 moov 原子变小？我们可以通过降低音频采样率来减少它，但显然低于 22kHz 的任何东西都是不可接受的。

我们使用 ffmpeg 作为编码器，使用 MP4Box 将元数据移动到文件的前面。有没有办法让它做一个更小的moov？还有其他可以制作更小的moov的编码器吗？

例如...

大尺寸（280 Mb，1 小时 49 分钟）流式 mp4（h.264，AAC）文件具有大标题（4.2 Mb）。文件由两遍 ffmpeg 和 MP4Box 编码，用于将元数据替换到文件的开头：

```
/usr/bin/ffmpeg -i /var/lib/encoder/incoming/2388 -aspect 320:210 -threads 8 -vcodec libx264 -profile baseline -level 13 -flags +loop+mv4 -cmp 256 -partitions +parti4x4+parti8x8+partp4x4+partp8x8+partb8x8 -me_method hex -subq 7 -trellis 1 -refs 5 -bf 0 -me_range 16 -g 250 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -qmin 10 -qmax 51 -qdiff 4 -b:v 270k -maxrate 270k -bufsize 270k -g 30 -passlogfile /tmp/mediaservice/3100/video-IPH.ffmpeg -an -f rawvideo -pass 1 -y /dev/null

/usr/bin/ffmpeg -i /var/lib/encoder/incoming/2388 -aspect 320:210 -threads 8 -vcodec libx264 -profile baseline -level 13 -flags +loop+mv4 -cmp 256 -partitions +parti4x4+parti8x8+partp4x4+partp8x8+partb8x8 -me_method hex -subq 7 -trellis 1 -refs 5 -bf 0 -me_range 16 -g 250 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -qmin 10 -qmax 51 -qdiff 4 -b:v 270k -maxrate 270k -bufsize 270k -g 30 -passlogfile /tmp/mediaservice/3100/video-IPH.ffmpeg -acodec libfaac -ac 2 -b:a 32k -ar 44100 -f mp4 -pass 2 -y /var/lib/encoder/encoded/3100/video-IPH.mp4

/usr/bin/MP4Box -quiet -tmp /tmp/mediaservice/3100/ -inter 500 /var/lib/encoder/encoded/3100/video-IPH.mp4 
```

**媒体信息（音频采样率 = 44100）：**

```
General
Count                                    : 278
Count of stream of this kind             : 1
Kind of stream                           : General
Kind of stream                           : General
Stream identifier                        : 0
Count of video streams                   : 1
Count of audio streams                   : 1
Video_Format_List                        : AVC
Video_Format_WithHint_List               : AVC
Codecs Video                             : AVC
Audio_Format_List                        : AAC
Audio_Format_WithHint_List               : AAC
Audio codecs                             : AAC LC
Complete name                            : 1348645218_970458_2465.iph.mp4
File name                                : 1348645218_970458_2465.iph.mp4
File extension                           : mp4
Format                                   : MPEG-4
Format                                   : MPEG-4
Format/Extensions usually used           : mp4 m4v m4a m4b m4p 3gpp 3gp 3gpp2 3g2 k3g jpm jpx mqv ismv isma f4v
Commercial name                          : MPEG-4
Format profile                           : Base Media
Internet media type                      : video/mp4
Codec ID                                 : isom
Codec ID/Url                             : http://www.apple.com/quicktime/download/standalone.html
Codec                                    : MPEG-4
Codec                                    : MPEG-4
Codec/Extensions usually used            : mp4 m4v m4a m4b m4p 3gpp 3gp 3gpp2 3g2 k3g jpm jpx mqv ismv isma f4v
File size                                : 272703970
File size                                : 260 MiB
File size                                : 260 MiB
File size                                : 260 MiB
File size                                : 260 MiB
File size                                : 260.1 MiB
Duration                                 : 6556027
Duration                                 : 1h 49mn
Duration                                 : 1h 49mn 16s 27ms
Duration                                 : 1h 49mn
Duration                                 : 01:49:16.027
Overall bit rate                         : 332767
Overall bit rate                         : 333 Kbps
Stream size                              : 4230761
Stream size                              : 4.03 MiB (2%)
Stream size                              : 4 MiB
Stream size                              : 4.0 MiB
Stream size                              : 4.03 MiB
Stream size                              : 4.035 MiB
Stream size                              : 4.03 MiB (2%)
Proportion of this stream                : 0.01551
HeaderSize                               : 4230683
DataSize                                 : 268473217
FooterSize                               : 70
IsStreamable                             : Yes
File last modification date              : UTC 2012-09-26 12:38:19
File last modification date (local)      : 2012-09-26 21:38:19
Writing application                      : Lavf54.6.100

Video
Count                                    : 201
Count of stream of this kind             : 1
Kind of stream                           : Video
Kind of stream                           : Video
Stream identifier                        : 0
ID                                       : 1
ID                                       : 1
Format                                   : AVC
Format/Info                              : Advanced Video Codec
Format/Url                               : http://developers.videolan.org/x264.html
Commercial name                          : AVC
Format profile                           : Baseline@L1.3
Format settings                          : 5 Ref Frames
Format settings, CABAC                   : No
Format settings, CABAC                   : No
Format settings, ReFrames                : 5
Format settings, ReFrames                : 5 frames
Format settings, GOP                     : M=1, N=30
Internet media type                      : video/H264
Codec ID                                 : avc1
Codec ID/Info                            : Advanced Video Coding
Codec ID/Url                             : http://www.apple.com/quicktime/download/standalone.html
Codec                                    : AVC
Codec                                    : AVC
Codec/Family                             : AVC
Codec/Info                               : Advanced Video Codec
Codec/Url                                : http://developers.videolan.org/x264.html
Codec/CC                                 : avc1
Codec profile                            : Baseline@L1.3
Codec settings                           : 5 Ref Frames
Codec settings, CABAC                    : No
Codec_Settings_RefFrames                 : 5
Duration                                 : 6556017
Duration                                 : 01:49:16.017
Bit rate                                 : 270000
Bit rate                                 : 270 Kbps
Width                                    : 480
Width                                    : 480 pixels
Height                                   : 270
Height                                   : 270 pixels
Pixel aspect ratio                       : 1.000
Display aspect ratio                     : 1.778
Display aspect ratio                     : 16:9
Rotation                                 : 0.000
Frame rate mode                          : CFR
Frame rate mode                          : Constant
FrameRate_Mode_Original                  : VFR
Frame rate                               : 29.970
Frame rate                               : 29.970 fps
Frame count                              : 196484
Resolution                               : 8
Resolution                               : 8 bits
Colorimetry                              : 4:2:0
Color space                              : YUV
Chroma subsampling                       : 4:2:0
Bit depth                                : 8
Bit depth                                : 8 bits
Scan type                                : Progressive
Scan type                                : Progressive
Interlacement                            : PPF
Interlacement                            : Progressive
Bits/(Pixel*Frame)                       : 0.070
Stream size                              : 220159060
Stream size                              : 210 MiB (81%)
Stream size                              : 210 MiB
Stream size                              : 210 MiB
Stream size                              : 210 MiB
Stream size                              : 210.0 MiB
Stream size                              : 210 MiB (81%)
Proportion of this stream                : 0.80732
Writing library                          : x264 - core 125
Writing library                          : x264 core 125
Writing library/Name                     : x264
Writing library/Version                  : core 125
Encoding settings                        : cabac=0 / ref=5 / deblock=1:0:0 / analyse=0x1:0x131 / me=hex / subme=7 / psy=1 / psy_rd=1.00:0.00 / mixed_ref=1 / me_range=16 / chroma_me=1 / trellis=1 / 8x8dct=0 / cqm=0 / deadzone=21,11 / fast_pskip=1 / chroma_qp_offset=-2 / threads=8 / lookahead_threads=1 / sliced_threads=0 / nr=0 / decimate=1 / interlaced=0 / bluray_compat=0 / constrained_intra=0 / bframes=0 / weightp=0 / keyint=30 / keyint_min=16 / scenecut=40 / intra_refresh=0 / rc_lookahead=30 / rc=2pass / mbtree=1 / bitrate=270 / ratetol=1.0 / qcomp=0.60 / qpmin=10 / qpmax=51 / qpstep=4 / cplxblur=20.0 / qblur=0.5 / vbv_maxrate=270 / vbv_bufsize=270 / nal_hrd=none / ip_ratio=1.40 / aq=1:1.00
Tagged date                              : UTC 2012-09-25 07:21:37

Audio
Count                                    : 169
Count of stream of this kind             : 1
Kind of stream                           : Audio
Kind of stream                           : Audio
Stream identifier                        : 0
ID                                       : 2
ID                                       : 2
Format                                   : AAC
Format/Info                              : Advanced Audio Codec
Commercial name                          : AAC
Format profile                           : LC
Codec ID                                 : 40
Codec                                    : AAC LC
Codec                                    : AAC LC
Codec/Family                             : AAC
Codec/CC                                 : 40
Duration                                 : 6556027
Duration                                 : 1h 49mn
Duration                                 : 1h 49mn 16s 27ms
Duration                                 : 1h 49mn
Duration                                 : 01:49:16.027
Bit rate mode                            : VBR
Bit rate mode                            : Variable
Bit rate                                 : 58955
Bit rate                                 : 59.0 Kbps
Maximum bit rate                         : 270000
Maximum bit rate                         : 270 Kbps
Channel(s)                               : 2
Channel(s)                               : 2 channels
Channel positions                        : Front: L R
Channel positions                        : 2/0/0
Sampling rate                            : 44100
Sampling rate                            : 44.1 KHz
Samples count                            : 289120791
Compression mode                         : Lossy
Compression mode                         : Lossy
Stream size                              : 48314149
Stream size                              : 46.1 MiB (18%)
Stream size                              : 46 MiB
Stream size                              : 46 MiB
Stream size                              : 46.1 MiB
Stream size                              : 46.08 MiB
Stream size                              : 46.1 MiB (18%)
Proportion of this stream                : 0.17717
Tagged date                              : UTC 2012-09-25 07:21:37 
```

**Moov atom info (/moov/trak[0] - video, /moov/trak[1] - audio) 采样率 44100:** (查看 trak 中的 stsz 和 stts 节点)

```
Atom ftyp @ 0 of size: 32, ends @ 32
Atom moov @ 32 of size: 4230651, ends @ 4230683
     Atom mvhd @ 40 of size: 108, ends @ 148
     Atom trak @ 148 of size: 868970, ends @ 869118
         Atom tkhd @ 156 of size: 92, ends @ 248
         Atom edts @ 248 of size: 36, ends @ 284
             Atom elst @ 256 of size: 28, ends @ 284
         Atom mdia @ 284 of size: 868834, ends @ 869118
             Atom mdhd @ 292 of size: 32, ends @ 324
             Atom hdlr @ 324 of size: 45, ends @ 369
             Atom minf @ 369 of size: 868749, ends @ 869118
                 Atom vmhd @ 377 of size: 20, ends @ 397
                 Atom dinf @ 397 of size: 36, ends @ 433
                     Atom dref @ 405 of size: 28, ends @ 433
                 Atom stbl @ 433 of size: 868685, ends @ 869118
                     Atom stsd @ 441 of size: 149, ends @ 590
                         Atom avc1 @ 457 of size: 133, ends @ 590
                             Atom avcC @ 543 of size: 47, ends @ 590
                     Atom stts @ 590 of size: 24, ends @ 614
                     Atom stss @ 614 of size: 26340, ends @ 26954
                     Atom stsc @ 26954 of size: 52, ends @ 27006
                     Atom stsz @ 27006 of size: 785956, ends @ 812962
                     Atom stco @ 812962 of size: 56156, ends @ 869118
     Atom trak @ 869118 of size: 3361468, ends @ 4230586
         Atom tkhd @ 869126 of size: 92, ends @ 869218
         Atom edts @ 869218 of size: 36, ends @ 869254
             Atom elst @ 869226 of size: 28, ends @ 869254
         Atom mdia @ 869254 of size: 3361332, ends @ 4230586
             Atom mdhd @ 869262 of size: 32, ends @ 869294
             Atom hdlr @ 869294 of size: 45, ends @ 869339
             Atom minf @ 869339 of size: 3361247, ends @ 4230586
                 Atom smhd @ 869347 of size: 16, ends @ 869363
                 Atom dinf @ 869363 of size: 36, ends @ 869399
                     Atom dref @ 869371 of size: 28, ends @ 869399
                 Atom stbl @ 869399 of size: 3361187, ends @ 4230586
                     Atom stsd @ 869407 of size: 91, ends @ 869498
                         Atom mp4a @ 869423 of size: 75, ends @ 869498
                             Atom esds @ 869459 of size: 39, ends @ 869498
                     **Atom stts @ 869498 of size: 2135816, ends @ 3005314**
                     Atom stsc @ 3005314 of size: 39712, ends @ 3045026
                     **Atom stsz @ 3045026 of size: 1129400, ends @ 4174426**
                     Atom stco @ 4174426 of size: 56160, ends @ 4230586
     Atom udta @ 4230586 of size: 97, ends @ 4230683
         Atom meta @ 4230594 of size: 89, ends @ 4230683
             Atom hdlr @ 4230606 of size: 33, ends @ 4230639
             Atom ilst @ 4230639 of size: 44, ends @ 4230683
                 Atom ©too @ 4230647 of size: 36, ends @ 4230683
                     Atom data @ 4230655 of size: 28, ends @ 4230683
Atom mdat @ 4230683 of size: 268473217, ends @ 272703900
Atom free @ 272703900 of size: 8, ends @ 272703908
Atom free @ 272703908 of size: 62, ends @ 272703970
------------------------------------------------------
Total size: 272703970 bytes; 50 atoms total. AtomicParsley version: 0.9.0 (utf8)
Media data: 268473217 bytes; 4230753 bytes all other atoms (1.551% atom overhead).
Total free atom space: 70 bytes; 0.000% waste. Padding available: 0 bytes.
------------------------------------------------------ 
```

使用音频采样率 11025 重新编码这部电影后，标题大小要小得多：

**媒体信息（音频采样率 = 11025）：（裁剪重复信息）**

```
General
***
HeaderSize                               : 1276359

Video
***

Audio
Count                                    : 169
Count of stream of this kind             : 1
Kind of stream                           : Audio
Kind of stream                           : Audio
Stream identifier                        : 0
ID                                       : 2
ID                                       : 2
Format                                   : AAC
Format/Info                              : Advanced Audio Codec
Commercial name                          : AAC
Format profile                           : LC
Codec ID                                 : 40
Codec                                    : AAC LC
Codec                                    : AAC LC
Codec/Family                             : AAC
Codec/CC                                 : 40
Duration                                 : 6556132
Duration                                 : 1h 49mn
Duration                                 : 1h 49mn 16s 132ms
Duration                                 : 1h 49mn
Duration                                 : 01:49:16.132
Bit rate mode                            : VBR
Bit rate mode                            : Variable
Bit rate                                 : 37991
Bit rate                                 : 38.0 Kbps
Maximum bit rate                         : 128000
Maximum bit rate                         : 128 Kbps
Channel(s)                               : 2
Channel(s)                               : 2 channels
Channel positions                        : Front: L R
Channel positions                        : 2/0/0
Sampling rate                            : 11025
Sampling rate                            : 11.025 KHz
Samples count                            : 72281355
Compression mode                         : Lossy
Compression mode                         : Lossy
Stream size                              : 31134257
Stream size                              : 29.7 MiB (12%)
Stream size                              : 30 MiB
Stream size                              : 30 MiB
Stream size                              : 29.7 MiB
Stream size                              : 29.69 MiB
Stream size                              : 29.7 MiB (12%)
Proportion of this stream                : 0.12327
Tagged date                              : UTC 2012-09-25 13:20:28 
```

**Moov 原子信息（/moov/trak[0] - 视频，/moov/trak[1] - 音频）采样率 11025：**

```
Atom ftyp @ 0 of size: 32, ends @ 32
Atom moov @ 32 of size: 1276327, ends @ 1276359
     Atom mvhd @ 40 of size: 108, ends @ 148
     Atom trak @ 148 of size: 821662, ends @ 821810
         Atom tkhd @ 156 of size: 92, ends @ 248
         Atom edts @ 248 of size: 36, ends @ 284
             Atom elst @ 256 of size: 28, ends @ 284
         Atom mdia @ 284 of size: 821526, ends @ 821810
             Atom mdhd @ 292 of size: 32, ends @ 324
             Atom hdlr @ 324 of size: 45, ends @ 369
             Atom minf @ 369 of size: 821441, ends @ 821810
                 Atom vmhd @ 377 of size: 20, ends @ 397
                 Atom dinf @ 397 of size: 36, ends @ 433
                     Atom dref @ 405 of size: 28, ends @ 433
                 Atom stbl @ 433 of size: 821377, ends @ 821810
                     Atom stsd @ 441 of size: 149, ends @ 590
                         Atom avc1 @ 457 of size: 133, ends @ 590
                             Atom avcC @ 543 of size: 47, ends @ 590
                     Atom stts @ 590 of size: 24, ends @ 614
                     Atom stss @ 614 of size: 26340, ends @ 26954
                     Atom stsc @ 26954 of size: 52, ends @ 27006
                     Atom stsz @ 27006 of size: 785956, ends @ 812962
                     Atom stco @ 812962 of size: 8848, ends @ 821810
     Atom trak @ 821810 of size: 454452, ends @ 1276262
         Atom tkhd @ 821818 of size: 92, ends @ 821910
         Atom edts @ 821910 of size: 36, ends @ 821946
             Atom elst @ 821918 of size: 28, ends @ 821946
         Atom mdia @ 821946 of size: 454316, ends @ 1276262
             Atom mdhd @ 821954 of size: 32, ends @ 821986
             Atom hdlr @ 821986 of size: 45, ends @ 822031
             Atom minf @ 822031 of size: 454231, ends @ 1276262
                 Atom smhd @ 822039 of size: 16, ends @ 822055
                 Atom dinf @ 822055 of size: 36, ends @ 822091
                     Atom dref @ 822063 of size: 28, ends @ 822091
                 Atom stbl @ 822091 of size: 454171, ends @ 1276262
                     Atom stsd @ 822099 of size: 91, ends @ 822190
                         Atom mp4a @ 822115 of size: 75, ends @ 822190
                             Atom esds @ 822151 of size: 39, ends @ 822190
                     Atom stts @ 822190 of size: 161368, ends @ 983558
                     Atom stsc @ 983558 of size: 1480, ends @ 985038
                     Atom stsz @ 985038 of size: 282372, ends @ 1267410
                     Atom stco @ 1267410 of size: 8852, ends @ 1276262
     Atom udta @ 1276262 of size: 97, ends @ 1276359
         Atom meta @ 1276270 of size: 89, ends @ 1276359
             Atom hdlr @ 1276282 of size: 33, ends @ 1276315
             Atom ilst @ 1276315 of size: 44, ends @ 1276359
                 Atom ©too @ 1276323 of size: 36, ends @ 1276359
                     Atom data @ 1276331 of size: 28, ends @ 1276359
Atom mdat @ 1276359 of size: 251293325, ends @ 252569684
Atom free @ 252569684 of size: 8, ends @ 252569692
Atom free @ 252569692 of size: 62, ends @ 252569754
------------------------------------------------------
Total size: 252569754 bytes; 50 atoms total. AtomicParsley version: 0.9.0 (utf8)
Media data: 251293325 bytes; 1276429 bytes all other atoms (0.505% atom overhead).
Total free atom space: 70 bytes; 0.000% waste. Padding available: 0 bytes.
------------------------------------------------------ 
```

在慢速连接上，这部电影在 30-40 秒后开始播放，直到标题信息 (4.2 Mb) 下载。我需要那部电影尽可能快地开始播放。我还有下一个问题：

1.  如何减小电影标题的大小？

2.  如何减小 /moov[0]/trak[1]/mdia[0]/minf[0]/stbl[0] 的大小以及为什么在采样率 44100 时它这么大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:56:21.373

看起来 AAC 编码器或 ffmpeg 在编码 AAC 流时做得不好。采样率不是这里的问题。您是否尝试过使用其他 AAC 编码器？

```
-acodec aac -strict experimental 
```

ffmpeg 通常使用非常小的块大小，因此会导致更大的标头。视频也是如此。

下面是相当极端的。

**Atom stts @ 869498 大小：2135816，结束 @ 3005314**

**Atom stsz @ 3045026 大小：1129400，结束 @ 4174426**

如果另一个 AAC 编码器最终看起来相同，我会尝试使用不同的编码器。我建议您查看 ffmpeg 的一个分支，称为 ffmbc ，而不是使用 ffmpeg 和[mp4box](http://code.google.com/p/ffmbc/downloads/list)。这可以在转码时将标头放在开头，而不是将其作为后期处理。但鉴于它是一个 ffmpeg 分支，我不确定它是否有助于解决您的标题大小问题。不过值得一试。

# jquery - JQuery 确认对话框

> ID：12617084
> 
> 赞同：18
> 
> 时间：2012-09-27T08:27:13.257
> 
> 标签：jquery, jquery-ui, confirm

> **可能重复：**
> [是或否使用 jQuery 的确认框](https://stackoverflow.com/questions/3519861/yes-or-no-confirm-box-using-jquery)

我在这里看到很多关于替换 jQuerys 标准确认对话框的示例，但不理解其中任何一个。

如果我想使用 jQuery 或 jQueryUI 弹出一个确认对话框。我该怎么做并检索用户单击的按钮？

当然，必须有一种简单的方法来设置像`alert("Something!");`命令一样的确认对话框。

向其添加两个按钮并设置回调函数 on `yes`or `no`?

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-27T08:38:28.823

试试这个

```
$('<div></div>').appendTo('body')
  .html('<div><h6>Yes or No?</h6></div>')
  .dialog({
      modal: true, title: 'message', zIndex: 10000, autoOpen: true,
      width: 'auto', resizable: false,
      buttons: {
          Yes: function () {
              doFunctionForYes();
              $(this).dialog("close");
          },
          No: function () {
              doFunctionForNo();
              $(this).dialog("close");
          }
      },
      close: function (event, ui) {
          $(this).remove();
      }
}); 
```

[小提琴](http://jsfiddle.net/3d7QC/1032/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-27T08:37:12.713

您可以使用 jQuery UI 并执行类似的[操作](http://jsfiddle.net/vandalo/nvZc4/)

**html:**

```
<button id="callConfirm">Confirm!</button>

<div id="dialog" title="Confirmation Required">
  Are you sure about this?
</div>​ 
```

**Javascript：**

```
$("#dialog").dialog({
   autoOpen: false,
   modal: true,
   buttons : {
        "Confirm" : function() {
            alert("You have confirmed!");            
        },
        "Cancel" : function() {
          $(this).dialog("close");
        }
      }
    });

$("#callConfirm").on("click", function(e) {
    e.preventDefault();
    $("#dialog").dialog("open");
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T08:39:04.930

您是否尝试过使用[官方的 JQueryUI 实现](http://jqueryui.com/demos/dialog/#modal-confirmation)（不仅仅是 jQuery） ：？

# java - JBoss Seam 可以在使用登录页面后重定向用户的“上次访问页面”吗？

> ID：12617085
> 
> 赞同：1
> 
> 时间：2012-09-27T08:27:14.820
> 
> 标签：java, jsf, seam

**笔记**

我有`ServletFilter`哪个用于检查用户是否已经登录，使用`<url-pattern>`. 如果用户未登录，则重定向到`login.xhtml`.

**我的问题**

用户登录后，我的程序总是重定向`dashboard.xml`（基于`navigation-rule`）。我想`last visited page`自动重定向。你能提供可能的方法吗？

**目前我的解决方案正在为此工作**

但是，我不乐意使用它。`Seam`支持吗？你能提供更好的方法吗？

在我的`ServletFilter`，我保持上次访问的页面如下

AuthenticationFilter.java

```
httpSession.setAttribute(Constants.ORIGINAL_VIEW_KEY, requestPath); 
```

在我`LoginBean`的 , 在用户登录后重定向最后访问的页面。

登录Bean.java

```
ELContext elContext = facesContext.getELContext();
Application application = facesContext.getApplication();
ExpressionFactory eFactory = application.getExpressionFactory();
ValueExpression binding = eFactory.createValueExpression(elContext, "#{" + Constants.VISIT_KEY_SCOPE + Constants.VISIT_KEY + "}", Visit.class);
binding.setValue(elContext, visit);

ValueExpression originalViewBinding = eFactory.createValueExpression(elContext, "#{" + Constants.ORIGINAL_VIEW_SCOPE + Constants.ORIGINAL_VIEW_KEY + "}", String.class);

String originalViewId = (String) originalViewBinding.getValue(elContext); <--- last visited view id.

UIViewRoot viewRoot = application.getViewHandler().createView(facesContext, originalViewId) ;
facesContext.setViewRoot(viewRoot);
facesContext.renderResponse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:09:11.420

从 login.page.xml 中删除以下内容

```
<navigation from-action="#{identity.login}">
  <rule if="#{identity.loggedIn}">
     <redirect view-id="/view/dashboard.xhtml"/>
  </rule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:36:28.013

如果使用`Identity`and `Credentials`，则在登录后页面自动重定向上次访问的页面（访问该页面，使用需要登录）。我们必须`component.xml`如下配置。

组件.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<components ----->
   <event type="org.jboss.seam.security.loginSuccessful">
      <action execute="#{redirect.returnToCapturedView}"/>
   </event>
</components> 
```

# vim - vim：用加号标记换行

> ID：12617089
> 
> 赞同：0
> 
> 时间：2012-09-27T08:27:19.547
> 
> 标签：vim

在[mutt](http://en.wikipedia.org/wiki/Mutt_%28e-mail_client%29)中，当我打开一条消息时，它是用*vim*打开的。长于屏幕宽度的行被换行，并在换行的开头显示一个小的红色“加号”。什么*vim*命令可以做到这一点？

展开：

```
|<------ screen width -------->|                                             
very long line very long line very long line ... 
```

用“加号”包裹：

```
|<------ screen width -------->|                                             
very long line very long line                                                
+very long line very long line                                               
+very long line 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T08:59:50.560

除非*mutt*摆弄实际的文本，否则它可能是

```
:set wrap
:set showbreak=+ 
```

然后红色突出显示将来自`@<hlgroupname>`.`:set highlight?`

除了`'wrap'`，这些是全局设置，所以你的 Vim 要么在某处有这些非默认配置，要么在调用 Vim 时由 mutt 显式设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T08:56:26.037

试试这个：

```
 set showbreak=+
 set wrap 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T08:56:35.443

见`:help showbreak`。您可以更改用于预先换行的字符串。

# asp.net - 带有 asp.net 的 Google 文档

> ID：12617092
> 
> 赞同：2
> 
> 时间：2012-09-27T08:27:27.797
> 
> 标签：asp.net, google-docs, google-docs-api

我需要像在 Google docs 中那样编辑 word 文档/电子表格。我可以将 Google 文档集成到我的 asp.net 应用程序中吗？我是否可以将此编辑后的文档保存到我的服务器上，而不是保存在 google 帐户中？

谢谢，弗朗西斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:33:09.437

> 我可以将 Google 文档集成到我的 asp.net 应用程序中吗？

谷歌提供[API 文档](https://developers.google.com/drive/)

> 我可以将这个编辑过的文档保存到我的服务器上吗

是的，[见`get`](https://developers.google.com/drive/v2/reference/files/get)

> 而不是将其保存在谷歌帐户中？

您不能让人们使用 Google Docs 所见即所得的编辑器并直接保存到您的系统中。他们必须保存到他们的 Google 帐户，然后您才能下载该文件。

# ios - 如何将适当的 Default.png 加载到 UImageView？

> ID：12617095
> 
> 赞同：4
> 
> 时间：2012-09-27T08:27:37.787
> 
> 标签：ios, uiimageview, uiimage, splash-screen

对于所有类型的设备，我都有带有名称的默认初始屏幕：Default-568h@2x.png、Default-Portrait.png、Default.png、Default@2x.png 等等。

我知道系统会自动为特定设备选择合适的启动画面并显示出来。

问题：是否有可能知道系统选择了哪个图像？如何将系统选择的合适图片加载到UIimageView中。

我试过这个：

```
UIImageView *splashView=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, screenWidth, screenHeight)];
splashView.image=[UIImage imageNamed:@"Default.png"]; 
```

但它只为所有类型的设备（iPhone 4、5、iPad）加载名称为 Default.png 的图像。

我需要手动管理吗？我的意思是在识别设备类型后加载适当的图像？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T16:24:42.907

在遇到同样的问题后，我发现了这个问题。似乎如果您使用`[UIImage imagedNamed:@"Default"];`iOS 将检测视网膜与非视网膜并应用`@2x`但它不会检测到 iPhone 5 并应用`-568h`

我想出的解决方案是在 UIImage 上编写一个类别来检查主窗口的高度并返回适当的图像（如果存在）：

```
@interface UIImage (Compatible)

+ (UIImage *)compatibleImageNamed:(NSString *)name;

@end

@implementation UIImage (Compatible)

+ (UIImage *)compatibleImageNamed:(NSString *)name {

    if ([[UIScreen mainScreen] bounds].size.height==568.0){

        NSString *extension = [name pathExtension];

        NSString *iPhone5Name = [[name stringByDeletingPathExtension] stringByAppendingString:@"-568h"];

        if (extension.length!=0)
            iPhone5Name = [iPhone5Name stringByAppendingPathExtension:extension];

        UIImage *image = [UIImage imageNamed:iPhone5Name];

        if (image)
            return image;

    }

    return [UIImage imageNamed:name];
}

@end 
```

然后，无论我知道我想加载一个也有我使用的 iPhone 5 版本的图像：

`[UIImage compatibleImageNamed:@"MyImage"];`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T10:32:11.327

我为所有启动画面手动完成：

```
 CGRect screenRect = [[UIScreen mainScreen] bounds];
 float screenWidth = screenRect.size.width;
 float screenHeight = screenRect.size.height;

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    splashView=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, screenWidth, screenHeight)];
    if (screenHeight==568.0) {
         splashView.image=[UIImage imageNamed:@"Default-568h@2x.png"];//iPhone 5
    }else{
          splashView.image=[UIImage imageNamed:@"Default.png"]; //other iPhones
    } 
} else {
    splashView=[[UIImageView alloc] initWithFrame:CGRectMake(0, 20, screenWidth, screenHeight-20)];
    splashView.image=[UIImage imageNamed:@"Default-Portrait.png"];// iPads
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T08:35:25.280

**编辑**：检查[这个](https://stackoverflow.com/questions/12612767/default-568h2x-png-for-iphone5) 和[这个](https://stackoverflow.com/questions/12536486/undo-auto-resizing-for-iphone-5-screen-after-adding-default-568h2x-png)。

你如何使用这条线来提供启动画面无论你有视网膜还是非视网膜显示器

```
UIImageView *splashView =[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default.png"]]; 
```

应用程序检测设备显示相应地拍摄图像。

如果设备有视网膜显示，那么它会自动采用 Default@2x.png。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T23:20:29.240

你应该改变这个：

```
[UIImage imageNamed:@"Default.png"]; 
```

到

```
[UIImage imageNamed:@"Default"]; 
```

# javascript - AngualrJS：在 html 刷新时维持数据

> ID：12617103
> 
> 赞同：28
> 
> 时间：2012-09-27T08:28:08.747
> 
> 标签：javascript, html, angularjs

有什么方法可以将少量数据加载到angular js中的某个缓存中，并且页面的onrefresh从缓存中加载这些数据并再次显示？

现在的问题是，每当我刷新页面时，sharedServices 应用程序共享的详细信息都会重新启动，因为所有 JS 都会在刷新页面时重新加载。

我有一个登录页面和一个主页。登录成功后，我使用 $route 路由到主页并将 loginID 广播到主页控制器。现在，当我刷新此主页或复制 url 并粘贴到另一个选项卡时，我希望存在相同的数据。但在我的情况下，由于 htmls/javascripts 被重新加载，它被初始化为 null。

这里有任何角度技术吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-27T12:39:03.750

看看[这个讨论](https://groups.google.com/forum/?fromgroups=#!topicsearchin/angular/local$20storage/angular/KEqxQ45WUxk)。

对于少量数据（<= 4k），您可以使用[$cookieStore](http://docs.angularjs.org/api/ngCookies.$cookieStore)，但之后您需要查看[localStorage](http://www.w3schools.com/html/html5_webstorage.asp)，请记住 localStorage 将您的应用程序与 HTML5 兼容的浏览器联系起来。

如果您不介意后端的一些状态，那也是一种选择。

**根据第一条评论进行**编辑****

 **听起来您的目标是当用户点击刷新时，页面应该看起来好像他们从未点击过它。每当这些更改时，您都必须将整个应用程序状态持久化到 localStorage（范围、DOM 属性、有状态服务）。不确定这是可取的。

但是，您可以足够接近以发挥作用：

从上面扩展答案：

*   使用 URL 描述应用程序状态，使用 Angular 的 $route 服务。我一直很喜欢[这篇文章](http://tomdale.net/2012/05/ember-routing/)来解释 URL 和状态，尽管这篇文章是非常特定于 Ember 的。

*   至于阻止客户端在刷新时重新加载您的脚本，没有办法做到这一点 - 您最接近的是让您的服务器为这些脚本返回一个 304（未修改）代码。

*   如上所述，范围数据和服务状态必须保存在本地存储中。

尽管刷新问题很烦人，但它实际上迫使您尽可能无状态地思考，无状态代码更容易维护和测试。如果您正在寻找好处:)**

# c++ - 如何解释 g++ 生成的 .i 文件

> ID：12617104
> 
> 赞同：4
> 
> 时间：2012-09-27T08:28:10.583
> 
> 标签：c++, gcc, c-preprocessor

> **可能重复：**
> [gcc 预处理器输出](https://stackoverflow.com/questions/5370539/gcc-preprocessor-output)

出于某种原因，我需要调查一些由 g++ 预处理器生成的 .i 文件，我在其中看到如下代码：

```
#1  /usr/local/include/boost/python.hpp 1 3
#11  /usr/local/include/boost/python.hpp 3 
```

我是一位经验丰富的 C++ 程序员，我知道 .i 文件是什么，问题是，我找不到关于如何解释 .i 文件中的行的详细说明。

有人可以解释上述几行的含义（尤其是文件后面的数字）或指出我可以找到有关此文件的地方吗？

* * *

谢谢，查看链接后，我的问题解决了。我想添加一些背景，以防其他人看到同样的问题。我的项目使用了严格的编译器检查，即 g++ -Wall -Werror。所有警告都被视为错误。而且我们使用的是boost.python，昨天之前，boost放在/usr/local/include下，编译就可以了。然后我们决定将 boost 移到我们的源代码控制中以便于升级，并出现警告（视为错误）。

所以经过CrazyCasta给出的链接的调查和细节，问题实际上是这样的：当boost在/usr/local/include时，它被视为系统头，所以gcc抑制了一些警告；当我们将 boost 移出时，gcc 并不能容忍它。

基本上，只需手动忽略或抑制该警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:31:39.760

你的答案可以在[这里](http://gcc.gnu.org/onlinedocs/cpp/Preprocessor-Output.html)找到。

基本上它正在重新映射输入的行号/文件名空间，以便编译器知道行的来源。第一个数字是源代码的行号，后面的文件名是它来自的文件。之后的数字是标志。

# android - 读取数组列表 将 URI 放入一个 Coverflow 应用程序而不是 R.drawables

> ID：12617113
> 
> 赞同：0
> 
> 时间：2012-09-27T08:28:50.007
> 
> 标签：android, android-contentprovider, sd-card, coverflow

我正在将 ArrayList 中的 MediaStore.Images.Media.DATA 字符串读取到一个数组中，这样我就可以将 SD 卡中的图像而不是 R.drawable 文件夹中的图像用于封面流画廊应用程序。并撞上了砖墙。读取整数类型与字符串类型以获取图像信息的问题。

能够从 SD 卡中的所有图像中获取 URI 到数组列表中，但不知道下一步该做什么。

是否值得继续使用这种方法，或者最好放弃这种方法并尝试另一种方法来完成将这个coverflow应用程序的图像源从R.drawables文件夹更改为SD卡的任务。

这就是我所做的

首先，这是它使用数组作为过程的一部分从 android 中的 R.drawable 文件夹获取图像的方式：

```
 public class ImageAdapter extends BaseAdapter {
       int mGalleryItemBackground;
       private Context mContext;

       private FileInputStream fis;

      // private Integer[] mImageIds = {
       //       R.drawable.pic01,
         //      R.drawable.pic02,
            //    R.drawable.pic03,
            //  R.drawable.pic04,
           //   R.drawable.pic05,
           //   R.drawable.pic06,
          //   R.drawable.pic07,
         //     R.drawable.pic08,
        //    R.drawable.pic09
       //   };

       private ImageView[] mImages; 
```

我的想法是使用光标从 SD 卡中读取类似“//mnt/sdcard/pic01.png”的 URI，并使用这些地址而不是来自 R.drawables 的数组中的地址，例如“R.drawable .pic02" 在数组中。

这就是我所做的，这部分工作没有问题：我从 SD 卡上的图像中获取所有 URI，并将它们存储在 arrayList 中，到目前为止一切正常。我通过使用 Toast 在活动屏幕上显示加载的 URI 来验证它是否可以正常工作。

```
 ArrayList<String> list1 = new ArrayList<String>();

    String[] proj = {MediaStore.Images.Media.DATA};
    Cursor cur = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, proj, null, null, null);
    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String pic = cur.getString(cur.getColumnIndex(MediaStore.Images.Media.DATA));
            list1.add(pic);
        //    Toast.makeText(CoverFlowExample.this, "data name: " + pic, Toast.LENGTH_SHORT).show();
         //   Log.d("TAG", "ID: " + pic);
        }
       }
    cur.close(); 
```

接下来我尝试将这些字符串读入用于 R.drawables 数组的数组中，这就是我遇到麻烦的地方：程序使用 Integer 作为数组的类型。所以我猜这个数组是读取 URI 的错误位置。那么如果这是错误的地方。现在做什么？

```
 Integer[] mImageIds = new Integer[list1.size()];

    for(int t = 0; t<= list1.size(); t++){
        mImageIds[t]= list1.get(t); // type mismatch cannot convert string to integer
    }

    Toast.makeText(CoverFlowExample.this, "data name: " + y , Toast.LENGTH_SHORT).show(); 
```

我得到的错误是这部分的“类型不匹配，无法将字符串转换为整数”：

```
 mImageIds[t]= list1.get(t); 
```

这是应用程序 getview 部分的其余代码：我现在正试图弄清楚下一步该做什么。

```
 public View getView(int position, View convertView, ViewGroup parent) {

        //Use this code if you want to load from resources from external source
        ImageView i = new ImageView(mContext);

            // this method is what someone suggested to use but i don't know how to use this, what do i put for "image" and how to read URIs from arrayList to this?
        i.setImageBitmap(BitmapFactory.decodeFile("image_" + position));

            // this works for reading in only one image from the SD card into the coverflow app
        i.setImageBitmap(BitmapFactory.decodeFile("/mnt/sdcard/pic04.png"));

   // when getting from R.drawable images　-->  i.setImageResource(mImageIds[position]);

        i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
        i.setScaleType(ImageView.ScaleType.MATRIX);         
        return i;

        //return mImages[position];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:33:27.797

由于您已经有了 URIs / 文件系统路径，您可以使用[android docu 中的 java doc](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)`createFrom*`方法之一来加载它。`Drawable`

# jquery - jQuery如果选择的值等于

> ID：12617115
> 
> 赞同：0
> 
> 时间：2012-09-27T08:28:52.900
> 
> 标签：jquery, select

在我的网站表单中，我需要将`var kwh_production`连接到选择框项的值相乘。这是我的代码，但不起作用，因为它不检查所选项目，只是乘以`kwh_production`最后一个值（0.27325）

```
function earn_or_save() {
    var eos = 0;

    // erd modules
    if ($('select_20').val() = 3025) eos = kwh_production * 0.28525
    if ($('select_20').val() = 4407) eos = kwh_production * 0.28525
    if ($('select_20').val() = 5809) eos = kwh_production * 0.28525
    if ($('select_20').val() = 5850) eos = kwh_production * 0.27325
    if ($('select_20').val() = 8724) eos = kwh_production * 0.27325
    if ($('select_20').val() = 9320) eos = kwh_production * 0.27325
    if ($('select_20').val() = 10464) eos = kwh_production * 0.27325
    if ($('select_20').val() = 13649) eos = kwh_production * 0.27325
    if ($('select_20').val() = 15938) eos = kwh_production * 0.27325    
    if ($('select_20').val() = 16326) eos = kwh_production * 0.27325    
    if ($('select_20').val() = 17612) eos = kwh_production * 0.27325    
    if ($('select_20').val() = 21288) eos = kwh_production * 0.27325    

    // europe modules
    if ($('select_20').val() = 3289) eos = kwh_production * 0.28525
    if ($('select_20').val() = 4882) eos = kwh_production * 0.28525
    if ($('select_20').val() = 6410) eos = kwh_production * 0.28525
    if ($('select_20').val() = 9350) eos = kwh_production * 0.27325
    if ($('select_20').val() = 9350) eos = kwh_production * 0.27325
    if ($('select_20').val() = 10481) eos = kwh_production * 0.27325
    if ($('select_20').val() = 11463) eos = kwh_production * 0.27325
    if ($('select_20').val() = 14745) eos = kwh_production * 0.27325
    if ($('select_20').val() = 17269) eos = kwh_production * 0.27325
    if ($('select_20').val() = 18285) eos = kwh_production * 0.27325
    if ($('select_20').val() = 19772) eos = kwh_production * 0.27325
    if ($('select_20').val() = 23653) eos = kwh_production * 0.27325

    if (eos != 0) {
      $("earn_or_save").set('text', "€ " + number_format(eos, 2, ',', '.'));
      $("i_earn_or_save").value = number_format(eos, 2, '.', '');
    }
    else {
      $("earn_or_save").set('text', "");
      $("i_earn_or_save").value = 0;
    }
  }

$("select_20").addEvent('onChange', earn_or_save); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:32:04.497

select_20 应该是您的 id 或 class 并且您在比较时缺少 ==。阅读更多解释。

1.  如果 select_20 是一个**id**，你的选择器应该是`$('#select_20')`；如果 select_20 是一个**类**，你的选择器应该是`$('.select_20')`；
2.  比较时使用**==**而不是**=** `if ($('#select_20').val() == 3025)`

希望这会帮助你。如果您有任何问题，请随时提问。谢谢

# c# - 在多个表单上使用相同的串行端口实例

> ID：12617116
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:28:53.470
> 
> 标签：c#, winforms, serial-port

我很陌生`C#`，我正在尝试将一个通用串行端口用于 3 种不同的形式：`Form2, Form3, Form4`

`Form1.cs`不需要这个，因为它只需要启动其他形式的程序。基本上，所有 3 种形式都必须同时从同一个串口接收数据。我面临的问题是只有一种形式可以从串口接收数据，而其他两种形式不能。

我发现了一个类似的问题：

[在两种不同的形式上使用相同的串口数据接收事件](https://stackoverflow.com/questions/9358216/using-same-serial-port-data-received-event-on-two-different-forms?answertab=active#tab-top)

这个问题和我的一样吗？如果是，我可以知道我应该将示例代码放在代码中上述链接的什么位置吗？

有人可以帮忙吗？提前致谢！

# 表格1：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form2 f2 = new Form2();
        f2.Show();
        Form3 f3 = new Form3();
        f3.Show();
        Form4 f4 = new Form4();
        f4.Show();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        this.Close();
    }
} 
```

# 表格2：

```
public partial class Form2 : Form
{
    GMapControl MainMap = new GMapControl();
    //Initialise data type for latituide and longitude
    double lat, lng;
    //Initialise customise marker (plane maker). Declared as m.
    GMapMarkerImage m = new GMapMarkerImage(new PointLatLng());
    GMapOverlay overlayOne;

    public Form2()
    {
        InitializeComponent();

        SuspendLayout();

        overlayOne = new GMapOverlay(MainMap, "OverlayOne");
        MainMap.MapProvider = GMapProviders.YahooMap;

        MainMap.SetCurrentPositionByKeywords("Singapore");
        MainMap.MinZoom = 1;
        MainMap.MaxZoom = 24;
        MainMap.Zoom = 13;
        MainMap.CanDragMap = true;
        MainMap.DragButton = MouseButtons.Left;
        MainMap.Dock = DockStyle.Fill;
        MainMap.Manager.Mode = AccessMode.ServerAndCache;

        Controls.Add(MainMap);
        ResumeLayout(true);

    }

    public void button1_Click(object sender, EventArgs e)
    {
        if (!serialPort1.IsOpen)    //if serial port is not open
            try
            {
                serialPort1.Open(); //Open Serial Port
                if (lat != 0 && lng != 0)  //Display marker only when GPS has receive data
                {
                    overlayOne.Markers.Add(m);          //Add marker on the position given to the overlayOne layer
                    MainMap.Overlays.Add(overlayOne);   //Add overlayOne layer to the MainMap layer
                }
            }
            catch
            {
                //A message box will display this message, informing user either a wrong port has been chosen, or have not been plugged in.
                MessageBox.Show("There was an error. Please make sure that the correct port was selected, and the device, plugged in.");
            }

    }

    public void button2_Click(object sender, EventArgs e)
    {
        if (serialPort1.IsOpen)                // if Serial Port is open
        {
            serialPort1.Close();               //Close Serial
            overlayOne.Markers.Remove(m);
        }
    }

    //When microsoft visual studio receive data
    public void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        this.Invoke(new EventHandler(DoUpdate));    //for function DoUpdate

        //Pause Microsoft Visual Studio for 100 milliseconds from receiving data, 
        //to ensure serialPort can be close successfully
        Thread.Sleep(100);
    }

    //Function for updating data. Declared as DoUpdate.
    public void DoUpdate(object sender, EventArgs e)
    {
        string[] c = serialPort1.ReadLine().Split(',');  //Stored data seperately by using array & using the Split() function

        lat = Convert.ToDouble(c[9]);               //Convert Latitude string data to double data
        lng = Convert.ToDouble(c[10]);              //Convert Longitude string data to double data

        //Input lat and lng data in m.
        //Updating the position of the marker
        m.Position = new PointLatLng(lat, lng);

    }
} 
```

# 表格3：

```
 public partial class Form3 : Form
    {
        public Form3()
        {
            InitializeComponent();

        }

        private void pictureBox1_Click(object sender, EventArgs e)
        {
            if (!serialPort1.IsOpen)    //if serial port is not open
                try
                {
                    serialPort1.Open(); //Open Serial Port

                    //Enable blocks to have colour
                    // ...
                }
                catch
                {
                    //A message box will display this message, informing user either a wrong port has been chosen, or have not been plugged in.
                    MessageBox.Show("There was an error. Please make sure that the correct port was selected, and the device, plugged in.");
                }

        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)                // if serial port is open
            {
                serialPort1.Close();                   // Close serial Port 

                //Clear data in textboxes
                FrontSonar.Text = "    ";
                LeftSonar.Text = "   ";
                RightSonar.Text = "    ";

                //Clear colours in the boxes
                // ...
            }
        }

        private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e) //When microsoft visual studio receive data
        {
            this.Invoke(new EventHandler(DoUpdate1)); //To update and ensure sonar data infront of UAV can be displayed without error
            this.Invoke(new EventHandler(DoUpdate2)); //To update and ensure sonar data left side of UAV can be displayed without error
            this.Invoke(new EventHandler(DoUpdate3)); //To update and ensure sonar data on the right side of UAV can be displayed without error

            Thread.Sleep(100);
        }

        private void DoUpdate1(object s, EventArgs e) //Display for Sonar infront of UAV
        {
            string[] c = serialPort1.ReadLine().Split(',');  //Stored data seperately by using array & using the Split() function
            FrontSonar.Text = c[1] + "\n";
            double d = Convert.ToDouble(c[1]);

            if (d > 500)
            {
                //Fill blocks with green
                this.rectangleShape1.FillColor = System.Drawing.Color.Green;
                this.rectangleShape2.FillColor = System.Drawing.Color.Green;
                this.rectangleShape3.FillColor = System.Drawing.Color.Green;
            }
            else
                if (d > 400 && d <= 500)
                {
                    //Fill block with Orange colour
                    this.rectangleShape1.FillColor = System.Drawing.Color.Orange;
                    this.rectangleShape2.FillColor = System.Drawing.Color.Orange;

                    //Fill block with Lavender colour
                    this.rectangleShape3.FillColor = System.Drawing.Color.Lavender;
                }
                else
                    if (d <= 400)
                    {
                        //Fill block with red colour
                        this.rectangleShape1.FillColor = System.Drawing.Color.Red;

                        //Fill block with Lavender colour
                        this.rectangleShape2.FillColor = System.Drawing.Color.Lavender;
                        this.rectangleShape3.FillColor = System.Drawing.Color.Lavender;
                    }

        }

        private void DoUpdate2(object s, EventArgs e) //Display for Sonar on the left side of UAV
        {
            string[] c = serialPort1.ReadLine().Split(',');  //Stored data seperately by using array & using the Split() function
            // ....

        }

        private void DoUpdate3(object s, EventArgs e) //Display for Sonar on the right side of UAV
        {
            string[] c = serialPort1.ReadLine().Split(',');  //Stored data seperately by using array & using the Split() function
            // ...
        }    
    } 
```

# Form4：（仍在进行中）

```
public partial class Form4 : Form
{
    public Form4()
    {
        InitializeComponent();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:37:32.873

是的你可以。以下是实现这一目标的关键点：

1.  打开串口一次，您的方法`if (!port.IsOpened) { port.Open(); }`是正确的，将其提取为静态方法并以每种形式（f2，f3，f4）调用以避免复制/粘贴此代码段。

2.  `serialPort`变量应该在所有三种表单中共享，因此所有表单都可以访问相同的打开和初始化端口实例。考虑到您提供的代码，创建和初始化，在`Form1`类中打开端口，然后通过构造函数注入将 serialPort 的初始化实例传递给其他表单类，基本上`SerialPort port`为类添加构造函数参数`Form2,3,4`，然后：

    ```
    // renamed button1_Click
    private void OnSetup(object sender, EventArgs e)
    {
        this.port = new SerialPort(...);
        // TODO: initialize port

        Form2 f2 = new Form2(this.port);
        f2.Show();
        Form3 f3 = new Form3(this.port);
        f3.Show();
        Form4 f4 = new Form4(this.port);
        f4.Show();
    } 
    ```

3.  然后在每个表单构造函数中只订阅`serialPort.DataReceived`事件就可以了。

    ```
    public Form2(SerialPort port)
    {
         port.DataReceived += ...
    } 
    ```

一些建议，

*   为变量和方法提供更具描述性的名称，而不是`form1`, `form2`, `c`, `d`,`button2_Click`
*   避免使用幻数，提取变量中的常量并给出描述性名称，例如`400`,`500`幻数多次出现，不清楚它们是什么。
*   在对您说的代码的注释中`Pause Microsoft Visual Studio...`，`microsoft visual studio receives data...`这是不正确的，您的应用程序（但不是 Visual Studio）的执行将暂停，而`Thread.Sleep()`您的应用程序将接收传入的串行端口数据，Visual Studio 只是一个开发环境，在这种情况下不直接参与端口通信。

# c# - Money vs. Decimal vs. Float 性能问题（货币值的 SQL 数据类型）？

> ID：12617118
> 
> 赞同：1
> 
> 时间：2012-09-27T08:29:01.760
> 
> 标签：c#, sql-server

SQL server中货币值列应该选择什么数据类型。我在网上阅读了一些**关于客户实现的地方，我们发现了一些关于货币数据类型的有趣的性能数据。例如，当 Analysis Services 设置为货币数据类型（从双精度）以匹配 SQL Server 货币数据类型时，处理速度（行/秒）提高了 13%。** 是真的吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T09:36:34.970

> SQL server中货币值列应该选择什么数据类型。

`decimal`除非有充分的理由不去，否则我会一直去。`float`是不合适的，因为并非所有十进制值都可以精确表示，并且您最终会得到奇怪的伪像（例如，您将有一个数量`48.15000000000000000135`）。

`money`通常是不合适的，因为它具有固定的精度和比例，可能与您的实际要求不匹配。它对每个中间结果以及最终结果进行舍入，这可能不适合复杂的计算。通过`decimal`计算，您可以更好地控制何时进行舍入（通过转换为`decimal`具有较小精度的 a）。

# php - 相交不起作用

> ID：12617127
> 
> 赞同：1
> 
> 时间：2012-09-27T08:29:27.067
> 
> 标签：php, mysql

我正在 php-mysql 框架中执行一个 mysql 查询，该框架涉及 2 个查询结果的交集。但它没有执行。可能需要更改 INTERSECT 操作的语法。你能告诉我错误在哪里吗？

```
SELECT p.*
FROM property p
    , property_type pt
    , location l
    , city c
WHERE p.STATUS = 1
    AND p.prop_id = '1'
    AND p.property_type = 'Sale'
    AND (
        pt.prop_name LIKE '%dlf%'
        OR p.furnish LIKE '%dlf%'
        OR p.description LIKE '%dlf%'
        OR p.bed LIKE '%dlf%'
        OR p.term_condition LIKE '%dlf%'
        OR p.bedroom LIKE '%dlf%'
        OR p.property_type LIKE '%dlf%'
        OR c.city_name LIKE '%dlf%'
        OR (
            (
                p.location_id = l.loct_id
                AND l.loct_name LIKE '%dlf%'
                )
            )
        )
    AND p.prop_id = pt.prop_id
    AND p.city = c.city_id

INTERSECT

SELECT p.*
FROM property p
    , property_type pt
    , location l
    , city c
WHERE p.STATUS = 1
    AND p.prop_id = '1'
    AND p.property_type = 'Sale'
    AND (
        pt.prop_name LIKE '%sohna%'
        OR p.furnish LIKE '%sohna%'
        OR p.description LIKE '%sohna%'
        OR p.bed LIKE '%sohna%'
        OR p.term_condition LIKE '%sohna%'
        OR p.bedroom LIKE '%sohna%'
        OR p.property_type LIKE '%sohna%'
        OR c.city_name LIKE '%sohna%'
        OR (
            (
                p.location_id = l.loct_id
                AND l.loct_name LIKE '%sohna%'
                )
            )
        )
    AND p.prop_id = pt.prop_id
    AND p.city = c.city_id
ORDER BY sortnum LIMIT 0 , 30 
```

但它显示错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'intersect Select p.* from property p,property_type pt,location l,city c where p.' at line 1 
```

你能告诉我正确的语法是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:36:46.717

MySQL 不支持`INTERSECT`，使用`WHERE`or`JOIN`代替。查看[http://gablog.eu/online/node/33](http://gablog.eu/online/node/33)以获取解决方案。

# drupal - Drupal 过滤器和 $_GET 参数

> ID：12617129
> 
> 赞同：0
> 
> 时间：2012-09-27T08:29:40.007
> 
> 标签：drupal, drupal-6, drupal-views

**德鲁巴 6**

大家好，有人可以帮我解决这个问题吗？

我有一个名为“ **heat_model_carousel** ”的轮播（视图），这个轮播显示桑拿列表。所以，每个桑拿房都有一个名为“**模型类型**”的字段——可以是：基本、高级或高级。

现在，我添加了一个链接块：`<a href = '?model_type=Basic'></a>`

我只想在模型类型上过滤这些结果，所以只有在轮播中才会出现 Basic、Advanded 或 Premium Sauna 的...

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:53:39.797

在视图中为“模型类型”添加参数，请通过 url 传递您的参数，例如

浏览页面的路径/**基本**

这将帮助您过滤“字段模型类型 = 基本”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:16:39.483

在此视图的设置中，为“模型类型”设置一个过滤器，然后选中“向访问者公开此过滤器，以允许他们更改它”框。这将在视图上生成一个控制权限，允许用户按模型类型进行过滤。

# javascript - 在输入设置时隐藏 div

> ID：12617131
> 
> 赞同：0
> 
> 时间：2012-09-27T08:29:44.680
> 
> 标签：javascript, html, input, draggable, hidden

我正在做的脚本遇到了麻烦，

事实上它不起作用。

我想做的是使一些 div 可拖动，并将内容放入 iput 类型的文本中。为此，我写了一个这样的函数：

```
function checkdiv()
    {
      var position1= document.getElementById("position1").value;
        if(position1=="1")
        {
         document.getElementById("1").style.display = "none"                        
        }
        if(position1==2)
        {
         document.getElementById("2").style.display = "none"                        
        }
        if(position1==3)
        {
         document.getElementById("3").style.display = "none"                        
        }
        if(position1==4)
        {
         document.getElementById("4").style.display = "none"                        
        }    
        if(position1==5)
        {
         document.getElementById("5").style.display = "none"                        
        }
        if(position1==6)
        {
         document.getElementById("6").style.display = "none"                        
        }
        if(position1==7)
        {
         document.getElementById("7").style.display = "none"                        
        }
        if(position1==8)
        {
         document.getElementById("8").style.display = "none"                        
        }                 
        if(position1==9)
        {
         document.getElementById("9").style.display = "none"                        
        }  
        if(position1==10)
        {
         document.getElementById("10").style.display = "none"                        
        }             
        if(position1==11)
        {
         document.getElementById("11").style.display = "none"                        
        }     
        if(position1==12)
        {
         document.getElementById("12").style.display = "none"                        
        }    
        if(position1==13)
        {
         document.getElementById("13").style.display = "none"                        
        }            

    }
       checkdiv();    ​ 
```

但它并没有真正起作用。

我想在将它们重新放入输入时使它们消失，并在输入设置为空或带有其他内容时使它们返回。

这是jsfiddle。[http://jsfiddle.net/FqM4A/13/](http://jsfiddle.net/FqM4A/13/)

接受我最大的尊重。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:42:48.440

那里有很多问题，HTML 非常过时，但我认为这只是一个学习练习，请参阅此处的工作代码：

[http://jsfiddle.net/FqM4A/22/](http://jsfiddle.net/FqM4A/22/)

请注意，元素的 ID 不应以数字开头。

# c++ - Boost 1.51.0 和 Code::Blocks

> ID：12617134
> 
> 赞同：1
> 
> 时间：2012-09-27T08:29:53.377
> 
> 标签：c++, boost, codeblocks

所以，我不得不问一个非常愚蠢的问题，但我一直在互联网上争吵，我似乎找不到答案。

因此，我决定将 Boost 与 Code::Blocks 一起使用。我使用 BoostPro Installer 并安装了最新版本，即 1.51.0。

因此，我的 Boost 文件夹所在的目录是：

```
C:/Program files/boost 
```

该目录还包含一个文件夹，所以它是这样的：

```
C:/Program files/boost/boost_1_51 
```

所以，我的问题是，如何设置我的 Code::Blocks 以便它可以工作。我做了以下事情：

转到设置>全局变量，创建一个名为 boost 的新变量。

将其基础设置为：C:\Program Files\boost\boost_1_51

将其设置为：C:\Program Files\boost\boost_1_51\boost

然后，我进入我的项目，右键单击它 > 构建选项 > 突出显示我的根项目 > 搜索目录。

然后，在我的编译器子选项卡下，我单击添加并添加了这个：

```
$(#boost.include) 
```

在链接器子选项卡下，我单击添加并添加了这个：

```
$(#boost.lib) 
```

而且我似乎无法编译示例代码（位于官方 Boost 网站 > 入门）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:46:11.220

CodeBlocks wiki 有关于设置 boost 的说明：[http ://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef](http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef)

特别是，对于从源代码构建 boost，请查看**Build Boost**部分并确保选择正确的工具集（在您的情况下，我假设它是`--toolset=gcc`在使用 MinGW 时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T17:51:46.423

为了使用文件系统，我使用了另一台计算机，并执行了以下步骤，它工作了：

```
1) Installed MinGW
2) Added this enviroment variable => C:\MinGW\bin
3) bootstrap.bat gcc
4) b2 install --prefix="C:\Boostbuild" --toolset=gcc
5) Added this enviroment variable => C:\Boostbuild\bin
6) b2 --build-dir="C:\Boostbuild" toolset=gcc --build-type=complete stage
7) Installed CodeBlocks without MinGW
CodeBlocks:
8) Settings->Global variables: current variable => boost, Base => C:\boost_1_53_0, include => C:\boost_1_53_0\stage\lib
9) On the new C++ console project:
Build Options->Choose Project Name on the left -> search directories
On compiler tab, press Add and type: $(#boost)
On linker tab, press Add and type: $(#boost.lib)
10) On the new C++ console project:
Build Options->Choose Project Name on the left -> linker settings
Add the following link libraries:
..\..\boost_1_53_0\stage\lib\libboost_filesystem-mgw46-mt-1_53.a
..\..\boost_1_53_0\stage\lib\libboost_system-mgw46-mt-1_53.a 
```

谢谢大家

# javascript - JavaScript 返回未定义

> ID：12617136
> 
> 赞同：0
> 
> 时间：2012-09-27T08:30:01.243
> 
> 标签：javascript, json, cordova, jquery-mobile

我有以下从 URL 收到的 JSON，我们在这里调用 URL`www.blabla.com/testjson`

它返回：

```
[{"Identifier":1,"Naam":"NOT Given","Adres":"Kopenhagen 9","Postcode":"0000LL","Plaats":"NOT Given","Longitude":"0.00000","Latitude":"0.00000"},
    {"Identifier":2,"Naam":"NOT Given","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Rotterdam","Longitude":"0.00000","Latitude":"0.00000"},
    {"Identifier":3,"Naam":"NOT Given","Adres":"NOT Given 6","Postcode":"0000LL","Plaats":"Rotterdam","Longitude":"0.00000","Latitude":"0.00000"},
    {"Identifier":4,"Naam":"NOT Given","Adres":"NOT Given 1","Postcode":"0000LL","Plaats":"Den Haag","Longitude":"0.00000","Latitude":"0.00000"},
    {"Identifier":5,"Naam":"NOT Given","Adres":"NOT Given 218","Postcode":"0000LL","Plaats":"Zoetermeer","Longitude":"0.00000","Latitude":"0.00000"}
]; 
```

我想检索这个 JSON 并返回这个结果，但是我得到了 UNDEFINED，这是我的代码：

```
$.each("www.blabla.com/testjson", function(index, element) {
    $('.result').append(element.Naam);
    alert(element.Naam);
}); 
```

您还需要检查用户 cookie 是否为真，否则它不会返回任何内容，我不这样做，因为我使用 phonegap 和 jquery mobile。这可能是问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:36:26.443

尝试使用以下方法`$.getJSON`：

```
$.getJSON('http://www.blabla.com/testjson.json', function(data) {
    $.each(data, function(key, val) {
        $('.result').append(val.Naam);
        alert(val.Naam);
    });
}); 
```

有关更多信息，请查看在线文档：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

**PS：**确保您将该网站添加`www.blabla.com`到您的白名单例外。

有关 Phonegap 白名单例外的更多信息，请查看在线文档（以下链接适用于 Phonegap / Cordova 版本 2.1.0）：[http ://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain %20白名单%20指南](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:39:18.733

您的代码将遍历参数字符串“www.blabla.com/testjson”的每个字符，返回“未定义”，因为通过编写 element.Naam，您正试图访问一个不存在的名为“Naam”的字符串的属性。

您需要使用 ajax 调用加载外部 json 内容并对其进行解析。

如果您也有兴趣处理错误，这里是[Littm](https://stackoverflow.com/a/12617257/1032370)答案的更长替代方案：

```
 $(document).ready(function()
    {
        $.ajax(
        {
            type: "GET",
            url: "data.json",
            data: "nocache=" + Math.random(),

            // dataType: "json",
            // the above requires 'application/json' as Content-Type headers
            // see 'reference A' in the footer notes
            // if you active this, please modify following code accordingly

            success: function (source, textStatus, jqXHR)
            {
                var data = jQuery.parseJSON(source);
                $.each(data, function(index, value)
                {
                    alert(index+" "+value.Naam);
                });
            },

            error: function(data)
            {
                // alert("ERROR");
            }
        });
    }); 
```

注：
1.[参考文献 A](https://stackoverflow.com/questions/249692/jquery-wont-parse-my-json-from-ajax-query)

**编辑：** 要从错误中获取更多信息，请添加以下内容：

```
$(document).ajaxError(
    function (event, jqXHR, ajaxSettings, thrownError)
    {
        console.log(event);
        console.log(jqXHR);
        console.log(ajaxSettings);
        console.log(thrownError);
    }); 
```

然后使用 chrome 控制台。

**编辑：**
如果我在浏览器中键入您提供的 url，我将被重定向到登录页面。
我认为您的 ajax 代码也正在获取此 HTML 文档。

尝试检查您的会话：您可以在代码中添加一个 div，并在这个新 div 中使用 curl 加载您的 url 内容。除非您在此 div 中看不到您的 json 代码，否则您的会话变量无法正常工作。
如果 curl 可以正确获取您的文件内容，那么 ajax 也可以。

**编辑：**
看到了吗？您的问题是正确登录到您尝试从中获取 json 文件的 web 服务。

你的朋友是对的。
您必须在 PHP 中正确设置[$_SESSION](http://php.net/manual/en/reserved.variables.session.php)，它基本上使用[cookie](https://stackoverflow.com/questions/661599/login-session-cookies-ajax-and-security)来保留会话信息。

尝试正确：

```
session_start() ; 
```

在您的 php 代码的开头，在使用 ajax 之前。
参考：
- php.net [session_start](http://php.net/manual/en/function.session-start.php)
- [PHP 会话不能与 JQuery Ajax 一起使用？](https://stackoverflow.com/questions/1564418/php-session-not-working-with-jquery-ajax)

**请注意，这仅适用于同一域**：
[为什么 jquery ajax 不发送会话 cookie](https://stackoverflow.com/questions/2870371/why-jquery-ajax-not-sending-session-cookie)

如果您使用不同的子域，您可以尝试使用

```
setcookie 
```

参考： - php.net [setcookie](http://be.php.net/setcookie)
-[跨域 cookie 访问（或会话）](https://stackoverflow.com/a/939294/1032370)

据我所知，无法在不同域中设置 cookie。
如果你遇到这种情况，我建议你看看这里描述的 SimpleSAMLPHP： [cross domain cookies](https://stackoverflow.com/a/1095901/1032370)

**祝你好运 ：）**

# python - Django中的冲突MPTTModel和TransMeta

> ID：12617138
> 
> 赞同：2
> 
> 时间：2012-09-27T08:30:09.997
> 
> 标签：python, django, models, mptt, django-transmeta

我的 django 模型有问题。

这是我的模型：

```
class Item(MPTTModel):
    __metaclass__ = TransMeta

    name = models.CharField(max_length=250, verbose_name=u'Menu name', blank=True)
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')

    class Meta:
        translate = ('name',)

    class MPTTMeta:
        order_insertion_by = ['name',] 
```

我试图在一个模型中合作两件事：TransMeta 和 MPTTModel。当我尝试运行它时，出现错误：

> TypeError：调用元类基类时出错元类冲突：派生类的元类必须是其所有基类的元类的（非严格）子类

我在 google 中找到了类似的解决方案：http: [//code.activestate.com/recipes/204197-solving-the-metaclass-conflict/](http://code.activestate.com/recipes/204197-solving-the-metaclass-conflict/)并像这样更改了我的代码：

```
class Item(MPTTModel):

    __metaclass__ = classmaker(right_metas=(TransMeta,))

    name = models.CharField(max_length=250, verbose_name=u'Menu name', blank=True)
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')    

    class Meta:
        translate = ('name',)

    class MPTTMeta:
        order_insertion_by = ['name',] 
```

classmaker 在哪里是这个代码[http://code.activestate.com/recipes/204197-solving-the-metaclass-conflict/#block-0](http://code.activestate.com/recipes/204197-solving-the-metaclass-conflict/#block-0)。但是翻译不起作用。当我尝试获取 model.name 时出现错误：

```
FieldDoesNotExist at /admin/menu/item/add/
Item has no field named 'name' 
```

# c# - 使用带有嵌套 OU 的 UserPrincipal.FindByIdentity 和 PrincipalContext

> ID：12617143
> 
> 赞同：4
> 
> 时间：2012-09-27T08:30:19.387
> 
> 标签：c#, active-directory, principalcontext

这是我想要实现的目标：我有一个大约 5 层深的嵌套 OU 结构。

```
OU=Portal,OU=Dev,OU=Apps,OU=Grps,OU=Admin,DC=test,DC=com 
```

我试图找出用户是否在 OU=Portal 上具有权限/存在。

这是我目前拥有的一个片段：

```
PrincipalContext domain = new PrincipalContext(
    ContextType.Domain,
    "test.com",
    "OU=Portal,OU=Dev,OU=Apps,OU=Grps,OU=Admin,DC=test,DC=com");

UserPrincipal user = UserPrincipal.FindByIdentity(domain, myusername);
PrincipalSearchResult<Principal> group = user.GetAuthorizationGroups(); 
```

由于某些未知原因，`user`上述代码生成的值始终为空。但是，如果我要删除所有 OU，如下所示：

```
PrincipalContext domain = new PrincipalContext(
    ContextType.Domain,
    "test.com",
    "DC=test,DC=com");

UserPrincipal user = UserPrincipal.FindByIdentity(domain, myusername);
PrincipalSearchResult<Principal> group = user.GetAuthorizationGroups(); 
```

这可以正常工作并返回正确的用户。我只是想减少结果的数量，而不是从 AD 中获取所有内容。

有什么我做错了吗？我已经用谷歌搜索了几个小时并测试了各种组合，但运气不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:56:42.477

好吧，如果

```
UserPrincipal.FindByIdentity(context, identityType, username) == null 
```

然后找不到用户，在您的情况下可能是，因为用户未在 OU= 中定义，您在上下文中设置为容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:21:11.177

经过大量探索、实验、谷歌搜索和堆栈溢出搜索；.NET 似乎没有内置方法来“读取”特定 OU，该 OU 引用了包含用户作为其成员的外部组。不幸的是，建议和推荐的解决方案是在域级别检索并执行某种形式的自定义过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:36:41.650

您正在寻找的用户是在里面`OU=Portal,OU=Dev,OU=Apps,OU=Grps,OU=Admin,DC=test,DC=com`吗？

`user`第二次搜索后，您的对象是什么样的？它的`DistinguishedName`属性是什么？

您在第一个示例中的搜索将**仅**搜索该 sub-sub-sub-sub-OU（`OU=Portal, ....`您拥有的那个）内的对象。

如果您的用户存在于其他某个 OU 中，那么您必须从域顶部或用户实际存在的 OU（或其任何父级）内部进行搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T21:04:36.120

该用户在那里不存在，否则您将不会返回 null。

你的最终游戏是什么？你是什​​么意思：

> 我试图找出用户是否在 OU=Portal 具有权限。

您正在寻找什么类型的权限？管理员委托？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T15:47:19.267

希望这会有所帮助，我在尝试从嵌套 OU 中检索组时遇到了同样的问题。ou 的结构是 Groups > WebGroups。所以我写了以下...

```
var ctx = new PrincipalContext(ContextType.Domain, "domain", "OU=Groups,OU=WebGroups,DC=domain,DC=ie", "username", "password") 
```

事实证明顺序很重要，WebGroups 必须排在第一位。当我将其更改为以下代码时，我的代码工作了......

```
var ctx = new PrincipalContext(ContextType.Domain, "domain", "OU=WebGroups,OU=Groups,DC=domain,DC=ie", "username", "password") 
```

所以我假设你必须写“OU=Admin,OU=Groups...OU=Portal”才能让你的工作。

# php - 如何使用 Simple Php Dom 查找所有内部元素？

> ID：12617144
> 
> 赞同：0
> 
> 时间：2012-09-27T08:30:19.293
> 
> 标签：php, arrays, dom, simpledom

我们希望使用 Simple PHP DOM 查看和修改特定元素，

```
<?php     
    include('../../../../dom/simple_html_dom.php');
    $html = new simple_html_dom();
    $html->load_file('http://www.google.com');   

    foreach ($tags as $tag)
    {           
        //something like that match with $string, if value found then the particular element edited by the <u>$string</u>.
        if(stristr($tag->innertext,$string)) {}    
    }

    echo $html ; 
?> 
```

我们想要以数组的形式获取所有 HTML 元素。我们必须检查每个元素，如果其中一个与我们的数据匹配，那么我们会调整该特定元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:57:22.943

您可以尝试以下方法来提取所有`<ul> .. </ul>`

```
include 'simple_html_dom.php';
$html = file_get_html('http://www.yahoo.com/');
foreach($html->find('ul') as $element)
    echo $element->plaintext . '<br>'; 
```

# php - 如何使用 PHP 从浏览器检查数字签名

> ID：12617150
> 
> 赞同：6
> 
> 时间：2012-09-27T08:30:27.903
> 
> 标签：php, javascript, digital-signature, digital-certificate, capicom

我有一个在浏览器中签署文本字符串的 Javascript。它在 Internet Explorer 下使用 CAPICOM，在 Mozilla 浏览器下使用 window.crypto。在签名过程之后，我收到一个 BASE64 编码的签名。

我使用 HTTPS 将签名和文本字符串上传到带有 PHP 应用程序的网络服务器。从 SSL (HTTPS) 我收到用户的证书。从这个证书中，我可以提取用户的公钥。

现在我想验证签名文本字符串以及用户的证书和公钥的签名。我尝试使用[openssl_verify](http://www.php.net/openssl_verify) PHP 函数但没有成功。

我总是收到一个错误：

> 错误：0408D077：rsa 例程：FIPS_RSA_VERIFY：错误的签名长度

*   我有证书，没问题；
*   我有从证书中提取的公钥，它也经过验证并且可以；
*   我有签名（BASE64 解码）；

不幸的是我无法验证签名？我无法提供演示或示例，因为它目前仅在本地网络中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:51:28.987

好的，我终于找到了解决方法。

1.  我有一个以 UTF-8 编码的网页（这在接下来的一些步骤中非常重要）；
2.  生成签名：
    *   如果用户使用 Mozilla/Firefox/Chrome - 使用`window.crypto`. 有关更多信息，请阅读[此](http://docs.oracle.com/cd/E19957-01/816-6152-10/index.htm)
    *   如果用户使用 Internet Explorer - 使用 CAPICOM（Crypot 应用程序接口 COM 对象）生成签名。有关更多信息，请阅读[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375732%28v=vs.85%29.aspx) -`window.crypto`和 CAPICOM 都没有很好地记录用于 Web 使用（CAPICOM 不仅适用于 Web！）
3.  文本字符串和签名正在通过 POST 请求发送到网络服务器。
4.  服务器（Linux、Apache 和 PHP）必须验证签名。

现在的问题：

1.  PHP的`openssl_verify()`功能也没有很好的文档记录，并且总是返回零 - 签名无效。
2.  CMD 工具 openssl 也没有验证签名。
3.  因为我的 Web 服务器需要 SSL 证书身份验证，所以我希望用户使用他登录的相同证书对文本字符串进行签名。

那么解决方法是什么：

1.  我发现 CAPICOM 在签名之前将签名字符串转换为 UTF-16LE。不幸的是，网络浏览器将文本字符串发送到以 UTF-8 编码的网络服务器。这意味着您必须在验证签名之前将字符串从 UTF-8 转换为 UTF-16LE。但这仅在签名由 CAPICOM 生成时才有效。
2.  openssl CMD 工具现在可以正常工作。CMD工具和PHP函数的区别在于：
    *   签名和来源作为字符串发送到 PHP 函数。在使用 CMD 工具的情况下，签名和源将作为文件路径发送。因此，如果您使用 CMD 而不是 PHP 函数，您必须首先将签名和源代码保存为文件。如果需要，请记住转换编码。
    *   PHP 函数期望作为参数接收签名者的公钥。因此，在此之前，您必须检查证书是否由受信任的证书颁发机构 (CA) 颁发。相反 - CMD 工具期望作为参数接收包含受信任证书颁发机构的根证书列表的文件。这意味着 - 您必须在验证之前检查签名者。
3.  似乎在 Firefox/Mozilla/Chrome 浏览器下，无法准确限制用户使用哪个证书进行签名。但是可以限制选项。当然，这根本没有记录（或者我没有找到任何有关此的适当信息）。因此，该`signText()`函数需要第三个参数，该参数必须是受信任的证书颁发机构名称。首先，我希望这必须是客户证书颁发者的 CN。但实际上并非如此。它必须是用逗号分隔的所有发行者字符串，例如：`"C=Country,ST=State,L=Location,O=Organization,CN=CommonName,STREET=Address"`不幸的是，这个字符串与来自 openssl 的发行者字符串略有不同，看起来像`issuer=/streetAddress=Address/CN=CommonName/O=Organization/L=Location/ST=State/C=Country`. 如果有人在 Linux 下使用 Firefox，那么检查该字符串的格式是否相同会非常有趣。我不知道如何在单个字符串中分隔更多 CA 名称。
4.  在 Internet Explorer 下，使用 CAPICOM 可以只向签名对象发送一个证书对象，因此它不会打开从列表中选择证书的对话框。您可以通过比较根证书指纹（BASE64 65 chr/line 编码证书的 SHA1 哈希，不包括页眉和页脚）和证书的序列号来找到正确的证书。只需阅读 MSDN，它就有很好的文档记录。

现在。我的源代码是什么样的：

1.  如果签名是由 CAPICOM 生成的`window.crypto`（我从 webbrowser 收到一个附加参数，签名是如何生成的）如果使用 CAPICOM，我会像这样转换源数据：`$_POST['source'] = iconv('UTF-8', 'UTF-16LE', $_POST['source'])`
2.  我生成 2 个临时文件。可以使用 PHP 函数[uniqid()](http://php.net/manual/en/function.uniqid.php)生成文件名。可以使用[sys_get_temp_dir()](http://php.net/manual/en/function.sys-get-temp-dir.php)找到默认临时目录。
3.  源文件完全按照从 POST 数组接收到的方式保存。如果签名由 CAPICOM 生成，则必须将其转换为 UTF-16LE。
4.  签名来自网络浏览器 BASE64 编码。不要解码它。只需将其保存在一个新文件中并添加一个特殊的页眉和页脚，如下所示：`"-----BEGIN PKCS7-----\n".$_POST['signature']."\n-----END PKSC7-----"`注意页眉和页脚必须在不同的行上。行分隔符只能是 \n (ASCII #10) 而不是 \r\n (ASCII #13#10) 的 \r (ASCII #13)。
5.  您必须拥有一个包含所有受信任 CA 根证书的文件。该文件的格式必须如下：
    *   标题“-----BEGIN CERTIFICATE-----”
    *   BASE64 编码证书
    *   页脚“-----END CERTIFICATE-----”
    *   空行
    *   如果您有多个受信任的 CA 根 - 每个证书必须以标头开头并以页脚字符串结尾。所有证书都存储在一个文件中
6.  使用下一个参数运行 CMD 工具 openssl：
    *   `smime`- 使用 CMD 工具的 SMIME 功能
    *   `-verify`- 做一个验证
    *   `-in filepath`- 步骤 4 中创建的签名文件的路径
    *   `-inform PEM`- 签名的格式是带有页眉和页脚的 BASE64 编码文件
    *   `-binary`- 防止将源代码从二进制转换为文本
    *   `-content filepath`- 在步骤 3 中创建的源文件的路径
    *   `-CAfile filepath`- 步骤 5 中创建的可信 CA 根证书文件的路径 所以最终命令如下所示：`openssl smime -verify -in file.pem -inform PEM -binary -content source.txt -CAfile root.pem`
7.  现在使用[shell_exec()](http://bg2.php.net/manual/en/function.shell-exec.php)函数从 PHP 调用它并读取输出。
    *   如果输出字符串以`Verification successful`- 开头，则签名正常
    *   如果输出字符串以`Verification failure`- 开头，则签名不正确
    *   如果输出字符串不同 - 发生了一些错误。错误描述存储在输出字符串中。

以上对我有用。不幸的是，openssl、CAPICOM 和`window.crypto`非常棘手，总是有可能出现问题。希望这会对某人有所帮助。

最好的祝福

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T02:35:19.050

好的，我终于找到了解决方法。

我有一个以 UTF-8 编码的网页（这在接下来的一些步骤中非常重要）；生成签名：如果用户使用 Mozilla/Firefox/Chrome - 使用`window.crypto`. 有关更多信息，请阅读此内容 如果用户使用 Internet Explorer - 使用`CAPICOM`（加密应用程序接口 COM 对象）生成签名。有关更多信息，请阅读 MSDN 两者 -`window.crypto`并且`CAPICOM`没有很好地记录用于 Web 使用（`CAPICOM`不仅适用于 Web！）文本字符串和签名正在通过 POST 请求发送到 Web 服务器。服务器（Linux、Apache 和 PHP）必须验证签名。现在的问题：

PHP的`openssl_verify()`功能也没有很好的文档记录，并且总是返回零 - 签名无效。CMD 工具`openssl`也不会验证签名。因为我的 Web 服务器需要 SSL 证书身份验证，所以我希望用户使用他登录的相同证书对文本字符串进行签名。那么解决方法是什么：

我发现在签名之前`CAPICOM`将签名字符串转换为*UTF-16LE 。*不幸的是，网络浏览器将文本字符串发送到以*UTF-8*编码的网络服务器。这意味着您必须在验证签名之前将字符串从 UTF-8 转换为 UTF-16LE。但这仅在签名由 生成时才有效`CAPICOM`。

`openssl`CMD 工具现在工作正常。CMD工具和PHP函数的区别在于：

*   签名和来源作为字符串发送到 PHP 函数。在使用 CMD 工具的情况下，签名和源将作为文件路径发送。因此，如果您使用 CMD 而不是 PHP 函数，您必须首先将签名和源代码保存为文件。如果需要，请记住转换编码。

*   PHP 函数期望作为参数接收签名者的公钥。因此，在此之前，您必须检查证书是否由受信任的证书颁发机构 (CA) 颁发。相反 - CMD 工具期望作为参数接收包含受信任证书颁发机构的根证书列表的文件。这意味着 - 您必须在验证之前检查签名者。

似乎在 Firefox/Mozilla/Chrome 浏览器下，无法准确限制用户使用哪个证书进行签名。但是可以限制选项。当然，这根本没有记录（或者我没有找到任何有关此的适当信息）。因此，该`signText()`函数需要第三个参数，该参数必须是受信任的证书颁发机构名称。首先，我希望这必须是客户证书颁发者的 CN。但实际上并非如此。它必须是用逗号分隔的所有发行者字符串，例如：

```
C=Country,ST=State,L=Location,O=Organization,CN=CommonName,STREET=Address 
```

`openssl`不幸的是，这个字符串与看起来像的发行者字符串略有不同

```
issuer=/streetAddress=Address/CN=CommonName/O=Organization/L=Location/ST=State/C=Country. 
```

如果有人在 Linux 下使用 Firefox，那么检查该字符串的格式是否相同会非常有趣。我不知道如何在单个字符串中分隔更多 CA 名称。在 Internet Explorer 下，使用`CAPICOM`它可以只向签名对象发送一个证书对象，因此它不会打开从列表中选择证书的对话框。您可以通过比较根证书指纹（BASE64 65 chr/line 编码证书的 SHA1 哈希，不包括页眉和页脚）和证书的序列号来找到正确的证书。只需阅读 MSDN，它就有很好的文档记录。现在。我的源代码是什么样的：

如果签名是由`CAPICOM`of生成的`window.crypto`（我从 Web 浏览器收到一个附加参数，签名是如何生成的）如果`CAPICOM`使用，我将源数据转换如下：

```
$_POST['source'] = iconv('UTF-8', 'UTF-16LE', $_POST['source']) 
```

我生成 2 个临时文件。文件的名称可以使用 PHP 函数生成`uniqid()`。默认临时目录可以使用`sys_get_temp_dir()`. 源文件完全按照从`POST`阵列接收到的方式保存。如果签名是由它生成的，`CAPICOM`则必须将其转换为 UTF-16LE。

签名来自网络浏览器 BASE64 编码。不要解码它。只需将其保存在一个新文件中并添加一个特殊的页眉和页脚，如下所示：

```
"-----BEGIN PKCS7-----\n".$_POST['signature']."\n-----END PKSC7-----" 
```

请注意，页眉和页脚必须位于不同的行上。行分隔符只能是 \n (ASCII #10) 而不是 \r (ASCII #13) 或 \r\n (ASCII #13#10)。您必须拥有一个包含所有受信任 CA 根证书的文件。该文件的格式必须如下：

```
A header "-----BEGIN CERTIFICATE-----"
BASE64 encoded certificate
A footer "-----END CERTIFICATE-----"
empty line 
```

如果您有多个受信任的 CA 根 - 每个证书必须以标头开头并以页脚字符串结尾。所有证书都存储在一个文件中`openssl`使用以下参数运行 CMD 工具：

*   `smime`- 使用 CMD 工具的 SMIME 功能
*   `-verify`- 做一个验证
*   `-in filepath`- 步骤 4 中创建的签名文件的路径
*   `-inform PEM`- 签名的格式是带有页眉和页脚的 BASE64 编码文件
*   `-binary`- 防止将源代码从二进制转换为文本
*   `-content filepath`- 在步骤 3 中创建的源文件的路径
*   `-CAfile filepath`- 在步骤 5 中创建的可信 CA 根证书文件的路径

所以最终的命令如下所示：

```
openssl smime -verify -in file.pem -inform PEM -binary -content source.txt -CAfile root.pem 
```

现在使用`shell_exec()`函数从 PHP 调用它并读取输出。如果输出字符串以 Verification successful 开头 - 签名是 OK。如果输出字符串以验证失败开头 - 签名不正确。如果输出字符串不同 - 发生了一些错误。错误描述存储在输出字符串中。

以上对我有用。不幸的是`openssl`，`CAPICOM`并且`window.crypto`非常棘手，并且总是有可能出现问题。希望这会对某人有所帮助。

# .net - 当满足某个值或条件时，如何触发 Observable 数据流的缓冲？

> ID：12617151
> 
> 赞同：4
> 
> 时间：2012-09-27T08:30:30.140
> 
> 标签：.net, c#-4.0, system.reactive

我正在使用绑定到 COM 端口的 Reactive Extensions Observable 数据流，并且我正在显示来自该数据流的缓冲区，该数据流在一个时间间隔内获取。

这是我的基本 Rx 代码，其中以 25 毫秒的块返回字节数据。我想在第一次达到特定阈值时触发缓冲区的生成，然后仅在收集前一个缓冲区后再次执行此操作。

```
var o = serialData.Buffer(TimeSpan.FromMilliseconds(25))
                  .ObserveOn(SynchronizationContext.Current);
var mySerialObserver = o.Subscribe<IList<byte>>(SubscribeAction()); 
```

serialData 对象是来自 USB COM 端口的连续字节值流的 IObservable。代码改编自 Bart De Smet 帖子：

[如何使用 Rx 实现 SerialPort 解析器](http://social.msdn.microsoft.com/Forums/pl-PL/rx/thread/5a12822d-92a6-4ff3-9a37-9bcce83dae0c "如何使用 Rx 实现 SerialPort 解析器")

使用 Rx Buffer(TimeSpan) 方法，我可以对 serialData 进行采样并在图形上显示缓冲区值（在我的 SubscribeAction 方法中使用[DynamicDataDisplay ）。](http://dynamicdatadisplay.codeplex.com/)

我想将功能扩展为类似于示波器触发器，这可能涉及在 serialData 值超过给定阈值时调用 Rx Buffer 方法，但不收集重叠缓冲区（这类似于示波器时基触发在一定的输入电压下，但在扫描完成之前不会再次触发）

请有人能给我一些关于如何实施的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T22:53:23.177

缓冲区只会在缓冲区关闭之前释放所有值，这对于实时图表不是很有用。您必须将值拆分为不重叠的窗口 - 从给定的触发器开始，并在扫描条件完成时关闭 - 一个完整的扫描周期的窗口。不幸的是，窗口在启动时仍会为我们提供值，因此我们将不得不跳过触发器触发之前进入的所有值。

```
 static IObservable<IObservable<T>> TriggeredSweep<T>(
        this IObservable<T> source,
        Func<T, bool> triggerCondition,
        Func<T, bool> sweepEnd
        )
    {
        source = source.Publish().RefCount();
        return source.Window(() => source.Where(triggerCondition).Sample(source.Where(sweepEnd)))
                     .Select(s => s.SkipWhile(v => !triggerCondition(v)));

    } 
```

测试这一点的最佳方法是使用它所依据的示波器模型：

```
 double period = 1000 / 0.5; //0.5 Hz
        int cycles = 4;             //cycles to display
        int quantization = 100;     //cycles to display            
        int amplitude = 10;         //signal peak            

        int range = quantization * cycles;    //full range 

        //Sine wave generator for n cycles
        //makes tuple of (t, sin(t))
        var source = Observable.Interval(TimeSpan.FromMilliseconds(period / range))
                               .Select(s => s % (range + 1))
                               .Select(s => Tuple.Create(s, amplitude * Math.Sin((double)s / ((double)range / (double)cycles) * 2 * Math.PI)));

        source.TriggeredSweep(
            value => value.Item2 > 5, //Trigger when Signal value > 5
            value => value.Item1 / quantization >= cycles //end sweep when all cycles are done
            )
              .Subscribe(window =>
              {
                  Console.Clear(); //Clear CRO Monitor

                  window.Subscribe(value =>
                  {
                      //Set (x, y)
                      Console.CursorLeft = (int)((double)value.Item1 / range * (Console.WindowWidth - 1));
                      Console.CursorTop = (int)((amplitude - value.Item2) / (2 * amplitude) * (Console.WindowHeight - 1));

                      //draw
                      Console.Write("x");
                  });
              });

        //prevent close
        Console.ReadLine(); 
```

输出：

```
 xxx                   xxxx                   xxx                   xxxx
   xx  x                  x  x                  xx  x                  x  x
   x   x                 xx   x                 x   x                 xx   x
  xx    x                x    x                xx    x                x    x
  x     x               xx     x               x     x               xx     x
  x      x              x      x               x      x              x      x
  x      x              x      x              xx      x              x      x
         x              x       x             x       x              x       x
         x             x        x             x       x             x        x
          x            x        x             x        x            x        x
          x            x        xx           x         x            x        xx
          x           x          x           x         x           x          x
           x          x          x           x          x          x          x
           x          x          x           x          x          x          x           x
           x          x          x          x           x          x          x          x
           x          x           x         x           x          x           x         x
           xx        x            x         x           xx        x            x         x
            x        x            x        x             x        x            x        x
            x        x             x       x             x        x             x       x
            x       x              x       x             x       x              x       x
             x      x              x      xx              x      x              x      xx
             x      x               x     x               x      x               x     x
             x     xx               x     x               x     xx               x     x
              x    x                x    xx                x    x                x    xx
              x   xx                 x   x                 x   xx                 x   x
               x  x                  x  xx                  x  x                  x  xx
               xxxx                   xxx                   xxxx                   xxx
                x                      x                     x                      x 
```

我希望这段代码可能对使用 Rx 测试简单的信号处理功能有用。:)

# ruby - 如果在 Ruby 中使用 File 类不存在，如何创建目录？

> ID：12617152
> 
> 赞同：139
> 
> 时间：2012-09-27T08:30:31.463
> 
> 标签：ruby

我有这样的声明：

```
File.open(some_path, 'w+') { |f| f.write(builder.to_html)  } 
```

在哪里

```
some_path = "somedir/some_subdir/some-file.html" 
```

我想要发生的是，如果路径中没有调用目录`somedir`或`some_subdir`两者都没有，我希望它自动创建它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-09-27T08:42:06.200

如果父目录不存在，您可以使用 FileUtils 递归创建父目录：

```
require 'fileutils'

dirname = File.dirname(some_path)
unless File.directory?(dirname)
  FileUtils.mkdir_p(dirname)
end 
```

**编辑：这是一个仅使用核心库的解决方案（重新实现轮子，不推荐）**

```
dirname = File.dirname(some_path)
tokens = dirname.split(/[\/\\]/) # don't forget the backslash for Windows! And to escape both "\" and "/"

1.upto(tokens.size) do |n|
  dir = tokens[0...n]
  Dir.mkdir(dir) unless Dir.exist?(dir)
end 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2014-05-14T07:52:36.870

对于那些寻找**创建目录的方法的人，如果它不存在**，这里是简单的解决方案：

```
require 'fileutils'

FileUtils.mkdir_p 'dir_name' 
```

基于尤里卡的[评论](https://stackoverflow.com/questions/12617152/how-do-i-create-directory-if-none-exists-using-file-class-in-ruby#comment17013487_12617369)。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-03-03T07:36:15.650

```
directory_name = "name"
Dir.mkdir(directory_name) unless File.exists?(directory_name) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-09T15:43:00.230

根据其他人的回答，什么也没发生（没用）。没有错误，也没有创建目录。

这是我需要做的：

```
require 'fileutils'
response = FileUtils.mkdir_p('dir_name') 
```

我需要创建一个变量来捕获`FileUtils.mkdir_p('dir_name')`发回的响应......然后一切都像魅力一样！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-13T19:10:32.990

怎么用`Pathname`？

```
require 'pathname'
some_path = Pathname("somedir/some_subdir/some-file.html")
some_path.dirname.mkdir_p
some_path.write(builder.to_html) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-02T14:08:42.180

沿着类似的思路（并且取决于您的结构），这就是我们解决屏幕截图存储位置的方法：

在我们的环境设置（env.rb）

```
screenshotfolder = "./screenshots/#{Time.new.strftime("%Y%m%d%H%M%S")}"
unless File.directory?(screenshotfolder)
  FileUtils.mkdir_p(screenshotfolder)
end
Before do
  @screenshotfolder = screenshotfolder
  ...
end 
```

在我们的 hooks.rb 中

```
 screenshotName = "#{@screenshotfolder}/failed-#{scenario_object.title.gsub(/\s+/,"_")}-#{Time.new.strftime("%Y%m%d%H%M%S")}_screenshot.png";
  @browser.take_screenshot(screenshotName) if scenario.failed?

  embed(screenshotName, "image/png", "SCREENSHOT") if scenario.failed? 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-04T23:12:31.617

最佳答案的“核心库”唯一解决方案不完整。如果您只想使用核心库，请使用以下内容：

```
target_dir = ""

Dir.glob("/#{File.join("**", "path/to/parent_of_some_dir")}") do |folder|
  target_dir = "#{File.expand_path(folder)}/somedir/some_subdir/"
end

# Splits name into pieces
tokens = target_dir.split(/\//)

# Start at '/'
new_dir = '/'

# Iterate over array of directory names
1.upto(tokens.size - 1) do |n|

  # Builds directory path one folder at a time from top to bottom
  unless n == (tokens.size - 1)
    new_dir << "#{tokens[n].to_s}/" # All folders except innermost folder
  else
    new_dir << "#{tokens[n].to_s}" # Innermost folder
  end

  # Creates directory as long as it doesn't already exist
  Dir.mkdir(new_dir) unless Dir.exist?(new_dir)
end 
```

我需要这个解决方案，因为 FileUtils 的依赖 gem rmagick 阻止了我的 Rails 应用程序部署在 Amazon Web Services 上，因为 rmagick 依赖于包 libmagickwand-dev (Ubuntu) / imagemagick (OSX) 才能正常工作。

# sql - SQL：对列中的某些项目求和并从该列中的另一个数字中减去它

> ID：12617153
> 
> 赞同：1
> 
> 时间：2012-09-27T08:30:35.927
> 
> 标签：sql, database, variables, plsql, sum

对不起标题。可能有点混乱！我正在使用的示例表如下所示：

```
 ID         Quantity         Type
 -----------------------------------------------
     1             14             PO
     1              2             PO  
     1              4             MH  
     1              3             MH
     1              2             MH
     2             16             PO
     2             12             MH
     2              9             MH 
```

这就是我想做的。我想将 ID = 1 和 Type = PO (14 + 2) 的所有数量相加为 SUM_IN。然后，我想将 ID = 1 和 Type = MH (4 + 3 + 2) 的所有数量相加为 SUM_OUT。完成此操作后，我想比较两者并仅在 SUM_OUT > SUM_IN 处返回值。所以对于 ID = 1 不会像 ID = 2 那样返回，因为 (12 + 9) > 16。

有没有办法在 SQL 中做到这一点，或者我需要使用 PL/SQL 和变量来完成任务。我在 PL/SQL 方面的经验很少，但从逻辑上讲，变量似乎是解决问题的最简单方法。我知道选择语句可以存储在变量中，但我不确定如何存储。无论如何，这是我的两个 SQL 选择

```
 SELECT SUM(QUANTITY) AS SUM_IN
  FROM TRANSLOG
  WHERE TYPE IN ('PO')
  AND ID = '1'

  SELECT SUM(QUANTITY) AS SUM_OUT
  FROM TRANSLOG
  WHERE TYPE IN ('MH')
  AND ID = '1' 
```

因此，如果我可以将这两个都设置为变量，那么任务应该不会太难，对吧？？？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:31:42.463

```
select ID, 
    sum ( Quantity * case Type when 'po' then 1 else 0 end ) as SUM_IN,
    sum ( Quantity * case Type when 'mh' then 1 else 0 end ) as SUM_OUT
from translog
group by ID
having sum ( Quantity * case Type when 'po' then 1 else -1 end ) < 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:37:20.997

```
SELECT CASE WHEN b.SUM_OUT > a.SUM_IN then b.SUM_OUT else '' END as SUM_OUT,
       CASE WHEN b.SUM_OUT > a.SUM_IN then a.SUM_IN else '' END as SUM_IN
FROM

(SELECT ID,SUM(QUANTITY) AS SUM_IN
FROM TRANSLOG
WHERE TYPE IN ('PO')
AND ID = '1'
GROUP BY ID,Type
) a

INNER JOIN 

(SELECT ID,SUM(QUANTITY) AS SUM_OUT
FROM TRANSLOG
WHERE TYPE IN ('MH')
AND ID = '1'
GROUP BY ID,Type
) b

ON a.ID=b.ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:45:06.550

正如您用`plsql`标签标记了您的问题，我假设您要执行查询的 RDBMS 是 Oracle。如果是这样，那么这是另一种方法（使用[DECODE](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions049.htm#i1017437)函数）来获得您想要的结果集。

```
select *
  from (select id
             , sum(Quantity*decode(tp, 'PO', 1, 0)) as sum_in
             , sum(Quantity*decode(tp, 'MH', 1, 0)) as sum_out
         from t1
        group by id
        order by id  )
 where sum_out > sum_in 
```

结果：

```
ID    SUM_IN    SUM_OUT
-----------------------
 2     16        21 
```

如果您想与 一起显示其余列`sum_in`，`sum_out`则以下查询可能会派上用场：

```
select id
     , quantity
     , Tp
     , sum_in
     , sum_out
  from (select id
             , quantity
             , tp
             , sum(Quantity*decode(tp, 'PO', 1, 0)) over(partition by id) as sum_in
             , sum(Quantity*decode(tp, 'MH', 1, 0)) over(partition by id) as sum_out
         from t1
       )
 where sum_out > sum_in 
```

结果：

```
Id    Quantity    Tp    Sum_In    Sum_Out 
---------------------------------------------
2      16         PO     16        21 
2      12         MH     16        21 
2      9          MH     16        21 
```

# java - 如何覆盖 Hibernate 中的删除？

> ID：12617157
> 
> 赞同：0
> 
> 时间：2012-09-27T08:30:41.740
> 
> 标签：java, hibernate, jpa

我将图像存储在外部文件中，同时在数据库记录中只保留它们的路径。但是如果删除了适当的记录，我想删除一个文件。

我应该如何通过文件删除来扩展删除操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:42:21.163

有多个问题：

*   如果文件无法删除怎么办？是否应该删除数据库条目？
*   如果交易失败怎么办？
*   如果文件已经被删除了怎么办？

您不能将字节数据保存在数据库本身中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T19:55:51.677

您可以使用休眠拦截器。

一般来说，您必须以类似的形式扩展 EmptyInterceptor 和覆盖方法

```
public void onDelete(Object entity, Serializable id, 
    Object[] state, String[] propertyNames, 
    Type[] types) {

    System.out.println("onDelete");

    if (conditionOnFileDeletionIsMet()){
        deleteFile();
    }
} 
```

更详细的例子在[这里](http://www.mkyong.com/hibernate/hibernate-interceptor-example-audit-log/)和[这里](http://www.tutorialspoint.com/hibernate/hibernate_interceptors.htm)。文档在[这里](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)。

# excel - 如何使用 vba 选择粘贴范围

> ID：12617163
> 
> 赞同：0
> 
> 时间：2012-09-27T08:30:56.980
> 
> 标签：excel, vba

我编写了一些代码来选择特定行并使用 paste-special 属性将其按列粘贴。它工作正常我的代码是：

```
lngRow = Me.TextBox4.Value
strCol = Me.TextBox5.Value
Set rng = Range("A:A").Find(What:=lngRow, LookIn:=xlValues, LookAt:=xlWhole)
If rng Is Nothing Then
MsgBox "Value not found in row 1", vbExclamation
Else
 Range(rng, rng.End(xlToRight)).Copy
 Range("A1:E3").Columns(strCol).Offset(, 1).PasteSpecial Transpose:=True
 Range("A1:E3").Rows(1).Copy
 Range("A1:E3").Columns(strCol).PasteSpecial Transpose:=True
endif 
```

这里的问题是我使用 Range(rng, rng.End(xlToRight)).Copy 来复制值和粘贴我使用 Range("A1:E3").Columns(strCol).Offset(, 1)。 PasteSpecial 转置：=真。

如何粘贴所有复制的值？因为如果值在 F 列中，那么这个宏将不会粘贴这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:36:25.427

此代码将从第 1 行开始粘贴整行（如果找到）转置到给定的列。

如果它必须从不同的行或列开始，您应该能够适应它。

```
lngRow = Me.TextBox4.Value
strCol = Me.TextBox5.Value

Set rng = Range("A:A").Find(What:=lngRow, LookIn:=xlValues, LookAt:=xlWhole)
If rng Is Nothing Then
MsgBox "Value not found in row 1", vbExclamation
Else
 Range(Rng, Rng.End(xlToRight)).Copy
 Cells(1, strCol).PasteSpecial Transpose:=True
End If 
```

# php - Yii 框架 - 控制器动作

> ID：12617166
> 
> 赞同：2
> 
> 时间：2012-09-27T08:31:00.133
> 
> 标签：php, yii

我正在尝试在 yii 中创建示例项目，但是在尝试运行我的代码时遇到了这个问题：

```
CHttpException

The system is unable to find the requested action "error". (C:\wamp\www\yii\framework\web\CController.php:484)

#0 C:\wamp\www\yii\framework\web\CController.php(271): CController->missingAction('error')
#1 C:\wamp\www\yii\framework\web\CWebApplication.php(276): CController->run('error')
#2 C:\wamp\www\yii\framework\base\CErrorHandler.php(310): CWebApplication->runController('site/error')
#3 C:\wamp\www\yii\framework\base\CErrorHandler.php(183): CErrorHandler->render('error', Array)
#4 C:\wamp\www\yii\framework\base\CErrorHandler.php(108): CErrorHandler->handleException(Object(CHttpException))
#5 C:\wamp\www\yii\framework\base\CApplication.php(713): CErrorHandler->handle(Object(CExceptionEvent))
#6 [internal function]: CApplication->handleException(Object(CHttpException))
#7 {main} 
```

谁能告诉我原因？因为我认为这不是我的代码的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:33:04.303

发生了异常（很可能是由于错误或配置错误）并且 Yii 尝试运行[错误处理程序](http://www.yiiframework.com/doc/guide/1.1/en/topics.error#handling-errors-using-an-action)，在这种情况下是控制器`error`上的操作。`site`

发生错误是因为您没有`site`控制器，或者它没有`error`操作。

# php - CodeIgniter 上传到服务器后给出 404

> ID：12617170
> 
> 赞同：0
> 
> 时间：2012-09-27T08:31:13.163
> 
> 标签：php, codeigniter

我在本地机器上安装了 CodeIgniter。我`hosts`在 Windows 和 Apache 配置中使用了文件来使其在我的真实域名下工作（例如。`site.com`）。效果很好，所以今天我把所有东西都上传到了我的主机上。我更改了`hosts`Apache 配置，通过刷新 DNS `ipconfig /flushdns`，现在输入某些 URL（`games`）给了我 404。

我的控制器名称以大写开头，但我的路由设置如下：

```
$route['Games/(:num)/(:any)'] = 'Games/Game/$1';
$route['games/(:num)/(:any)'] = 'Games/Game/$1'; 
```

通过输入`games/14/game`或`Games/14/game`不起作用。

搜索图像（使用[merahulpk 给出的解决方案](https://stackoverflow.com/questions/11100706/codeigniter-doesnt-see-images-using-file-exists)）也不起作用。

会是什么？

不幸的是，它仍在开发中，所以我现在还不能给你地址。

- 编辑 -

图像包含脚本：

`views/game.php`

```
<?php
    $image_path = $this->config->item('base_path').'images/games/'.$info['id'].'-s.jpg';
    if(file_exists($image_path)) {
        $small = $this->config->item('base_url').'images/games/'.$info['id'].'-s.jpg';
        $big = $this->config->item('base_url').'images/games/'.$info['id'].'-b.jpg';
    } else {
        $small = $this->config->item('base_url').'images/games/none-m.png';
        $big = $this->config->item('base_url').'images/games/none-m.png';
    }
?> 
```

`config/sit-config.php`

```
<?php

$config['base_url'] = "http://".$_SERVER['SERVER_NAME'] . str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']);

if(!defined('DOCUMENT_ROOT')) define('DOCUMENT_ROOT',str_replace('system/application/config','',substr(__FILE__, 0, strrpos(__FILE__, '/'))));

$config['base_path']    =   constant("DOCUMENT_ROOT");
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:35:14.130

不要在您的路线中使用大写字母。像这样使用所有小写：

```
$route['games/(:num)/(:any)'] = 'games/game/$1'; 
```

如果您使用大写的控制器名称，路由将不起作用。至于方法名称，它们可以是小写或大写，两者都可以......不需要重复的路线！

# jquery - ajax：在清除输入之前

> ID：12617173
> 
> 赞同：0
> 
> 时间：2012-09-27T08:31:31.427
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我有一个表格。

```
 <%= simple_form_for(@something, :remote => true ) do |f| %>
    <%= f.input :name, :label => false, :placeholder => "Add new something" %>
  <% end %> 
```

它没有按钮，通过点击return实现提交。

有一些 javascript 可以对表单的提交采取行动。

```
$('form.new_something')
  .on("ajax:before", function(){
    $text_box = $('input:text', this);
    $text_box.prop('disabled', true);
    $text_box.val('Loading...');
  }) 
```

这导致我的新 Something 模型的“name”属性**设置为“null”，**而不是文本框的值。

我想这是因为我正在使用“ajax:before”，它是在发布之前触发的。

关于我应该做什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:47:11.613

你可以试试`.on('submit', function(){...})`吗？

# apache - .htaccess 缓存控制不缓存我的文件（js|png|css 等）

> ID：12617174
> 
> 赞同：3
> 
> 时间：2012-09-27T08:31:32.087
> 
> 标签：apache, .htaccess, caching, cache-control

正如我的标题所说，我正在尝试缓存控制我网站上的内容，但似乎我的内容没有被缓存。

这是我的 .htaccess 文件中的代码：

```
Header unset Pragma
FileETag None
Header unset ETag

# cache images/pdf docs for 10 days
<FilesMatch "\.(ico|pdf|jpg|jpeg|png|gif|js)$">
Header set Cache-Control "max-age=864000, public, must-revalidate"
Header unset Last-Modified
</FilesMatch>

# cache html/htm/xml/txt diles for 2 hours
<FilesMatch "\.(html|htm|xml|txt|xsl)$">
Header set Cache-Control "max-age=7200, must-revalidate"
</FilesMatch> 
```

我尝试了很多教程，但似乎没有一个能奏效。顺便说一句，其他 .htaccess 代码，如重定向和其他东西，确实有效。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T08:09:21.117

我想通了，你必须删除`Header unset Last-Modified`

```
Header unset Pragma
FileETag None
Header unset ETag

# cache images/pdf docs for 10 days
<FilesMatch "\.(ico|pdf|jpg|jpeg|png|gif|js)$">
Header set Cache-Control "max-age=864000, public, must-revalidate"
</FilesMatch>

# cache html/htm/xml/txt files for 2 hours
<FilesMatch "\.(html|htm|xml|txt|xsl)$">
Header set Cache-Control "max-age=7200, must-revalidate"
</FilesMatch> 
```

# java - Eclipse：如何在 Tomcat 上部署引用其他动态 Web 项目的动态 Web 项目

> ID：12617180
> 
> 赞同：0
> 
> 时间：2012-09-27T08:31:44.783
> 
> 标签：java, eclipse, tomcat, deployment

我正在尝试在本地 Tomcat 7.0 上部署动态 Web 项目。问题是，我在我的项目中引用了另一个动态 Web 项目。调试器知道所有的类，因为我在构建路径中引用了它们，但是如果我将它们部署在 Tomcat 上，那么不会抛出 ClassNotFoundException 吗？

我试图更改部署程序集，但这不适用于对动态 Web 项目的引用。我找到的唯一解决方案是创建引用的 Web 项目的 .jar 并将 .jar 添加到部署程序集。这可行，并且可以使用某种 maven/ant 脚本自动化，但我不喜欢这些解决方案，所以最好的解决方案是 Eclipse 中的解决方案。有人在这里有想法吗？

最好的问候， 罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:39:00.220

尝试使用eclipse的**导出**功能。

导出为 jar 文件到您引用的项目，并将此 jar 添加到您的主项目。

> 右键单击您的项目->导出->Java->Jar 文件

# jquery - 销毁 jquery cookie

> ID：12617181
> 
> 赞同：0
> 
> 时间：2012-09-27T08:31:52.557
> 
> 标签：jquery, json, cookies, append

我有一个允许将输入值保存为列表的脚本：[JsFiddle](http://jsfiddle.net/dx6CN/7/)

所以现在我试图创建一个事件，如果单击该事件将删除某个列表，当然 cookie 应该被销毁。所以我尝试了：

```
$('.jq-text li').click(function(e) {

$.cookie("myDemoCookie", null);

 }); 
```

这应该破坏cookie，但它不会......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:35:19.820

我看到了您的 jsfiddle 代码，您正在使用路径创建 cookie，因此您必须`path`在删除 cookie 时指定。

确保您已阅读[$.cookie 的文档](http://moskah.nl/jquery.cookie.js)。

```
@example $.cookie('the_cookie', null);

@desc Delete a cookie by passing null as value. 
 Keep in mind that you have to use the same path 
 and domain used when the cookie was set.` 
```

**试试下面的代码：**

```
$.cookie('myDemoCookie', null, { path: '/' }); 
```

# php - 稍后在同一文件中定义的派生类“不存在”？

> ID：12617188
> 
> 赞同：18
> 
> 时间：2012-09-27T08:32:15.313
> 
> 标签：php, class, include, require, extends

假设我们有两个 php 文件，a.php 和 b.php 这是文件 a.php 的内容：

```
<?php // content of a.php
class A {
} 
```

这是文件 b.php 的内容

```
<?php  // content of b.php
include dirname(__FILE__) . "/a.php";
echo "A: ", class_exists("A") ? "exists" : "doesn’t exist", "\n";
echo "B: ", class_exists("B") ? "exists" : "doesn’t exist", "\n";
echo "BA (before): ", class_exists("BA") ? "exists" : "doesn’t exist", "\n";
echo "BB: ", class_exists("BB") ? "exists" : "doesn’t exist", "\n";
class B {
}
class BA extends A {
}
class BB extends B {
}
echo "BA (after): ", class_exists("BA") ? "exists" : "doesn’t exist", "\n"; 
```

如果您启动 b.php 脚本，您将得到以下输出：

```
A: exists
B: exists
BA (before): doesn’t exist
BB: exists
BA (after): exists 
```

为什么BA类只存在于类定义之后？为什么其他类甚至在定义之前就存在？有什么区别？我希望在这两种情况下都有一个共同的行为......有没有一种方法可以在定义之前使用 BA 类？

谢谢

米歇尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T09:37:48.620

免责声明：我并不声称了解 Zend 的内部工作原理。以下是我对 PHP 源代码的解释，很大程度上是由有根据的猜测推动的。尽管我对结论完全有信心，但术语或细节可能会有所偏差。我很想听听任何在 Zend 内部有经验的人对此事的看法。

## 调查

从 PHP 解析器[中我们可以看到](http://lxr.php.net/xref/PHP_5_4/Zend/zend_language_parser.y?r=a4862503d485abf449e0565ac03157d859a31bf7#232)，当遇到类声明时，[`zend_do_early_binding`](http://lxr.php.net/xref/PHP_5_4/Zend/zend_compile.c?r=4c0bb6d76eb0c8b9fdc74c3c8858a146ab34e2f8#4426)会调用该函数。[下面](http://lxr.php.net/xref/PHP_5_4/Zend/zend_compile.c?r=4c0bb6d76eb0c8b9fdc74c3c8858a146ab34e2f8#4448)是处理派生类声明的代码：

```
case ZEND_DECLARE_INHERITED_CLASS:
{
    zend_op *fetch_class_opline = opline-1;
    zval *parent_name;
    zend_class_entry **pce;

    parent_name = &CONSTANT(fetch_class_opline->op2.constant);
    if ((zend_lookup_class(Z_STRVAL_P(parent_name), Z_STRLEN_P(parent_name), &pce TSRMLS_CC) == FAILURE) ||
        ((CG(compiler_options) & ZEND_COMPILE_IGNORE_INTERNAL_CLASSES) &&
         ((*pce)->type == ZEND_INTERNAL_CLASS))) {
        if (CG(compiler_options) & ZEND_COMPILE_DELAYED_BINDING) {
            zend_uint *opline_num = &CG(active_op_array)->early_binding;

            while (*opline_num != -1) {
                opline_num = &CG(active_op_array)->opcodes[*opline_num].result.opline_num;
            }
            *opline_num = opline - CG(active_op_array)->opcodes;
            opline->opcode = ZEND_DECLARE_INHERITED_CLASS_DELAYED;
            opline->result_type = IS_UNUSED;
            opline->result.opline_num = -1;
        }
        return;
    }
    if (do_bind_inherited_class(CG(active_op_array), opline, CG(class_table), *pce, 1 TSRMLS_CC) == NULL) {
        return;
    }
    /* clear unnecessary ZEND_FETCH_CLASS opcode */
    zend_del_literal(CG(active_op_array), fetch_class_opline->op2.constant);
    MAKE_NOP(fetch_class_opline);

    table = CG(class_table);
    break;
} 
```

此代码立即调用[`zend_lookup_class`](http://lxr.php.net/xref/PHP_5_4/Zend/zend_execute_API.c?r=8d86597d7368460383a33a4399ea7a8b244cd6fa#1148)以查看符号表中是否存在父类......然后根据是否找到父类而发散。

让我们先看看如果找到了父类，它会做*什么*：

```
if (do_bind_inherited_class(CG(active_op_array), opline, CG(class_table), *pce, 1 TSRMLS_CC) == NULL) {
    return;
} 
```

转到[`do_bind_inherited_class`](http://lxr.php.net/xref/PHP_5_4/Zend/zend_compile.c?r=4c0bb6d76eb0c8b9fdc74c3c8858a146ab34e2f8#4378)，我们看到最后一个参数（在这个调用中是`1`）被调用了`compile_time`。这听起来很有趣。它与这个论点有什么关系？

```
if (compile_time) {
    op1 = &CONSTANT_EX(op_array, opline->op1.constant);
    op2 = &CONSTANT_EX(op_array, opline->op2.constant);
} else {
    op1 = opline->op1.zv;
    op2 = opline->op2.zv;
}

found_ce = zend_hash_quick_find(class_table, Z_STRVAL_P(op1), Z_STRLEN_P(op1), Z_HASH_P(op1), (void **) &pce);

if (found_ce == FAILURE) {
    if (!compile_time) {
        /* If we're in compile time, in practice, it's quite possible
         * that we'll never reach this class declaration at runtime,
         * so we shut up about it.  This allows the if (!defined('FOO')) { return; }
         * approach to work.
         */
        zend_error(E_COMPILE_ERROR, "Cannot redeclare class %s", Z_STRVAL_P(op2));
    }
    return NULL;
} else {
    ce = *pce;
} 
```

好的...所以它从静态（从 PHP 用户的角度）或动态上下文中读取父类和派生类名称，具体取决于`compile_time`状态。然后它尝试在类表中找到类条目（“ce”），如果*没有*找到，那么......*它在编译时不做任何事情就返回，但在运行时发出致命错误*。

这听起来非常重要。让我们回到`zend_do_early_binding`. 如果找不到父类怎么办？

```
if (CG(compiler_options) & ZEND_COMPILE_DELAYED_BINDING) {
    zend_uint *opline_num = &CG(active_op_array)->early_binding;

    while (*opline_num != -1) {
        opline_num = &CG(active_op_array)->opcodes[*opline_num].result.opline_num;
    }
    *opline_num = opline - CG(active_op_array)->opcodes;
    opline->opcode = ZEND_DECLARE_INHERITED_CLASS_DELAYED;
    opline->result_type = IS_UNUSED;
    opline->result.opline_num = -1;
}
return; 
```

似乎它正在生成将再次触发调用的操作码——[但这](http://lxr.php.net/xref/PHP_5_4/Zend/zend_vm_execute.h?r=f4dc2240a048050a87a6e3e31573f13a2256cf2e#935)`do_bind_inherited_class`一次， 的值`compile_time`将是`0`（假）。

最后，[`class_exists`](http://lxr.php.net/xref/PHP_5_4/Zend/zend_builtin_functions.c?r=dfc6feb6e84f27094e6a2e3947caa094f7c35d26#1217)PHP函数的实现呢？查看源代码显示了这个片段：

```
found = zend_hash_find(EG(class_table), name, len+1, (void **) &ce); 
```

伟大的！这个`class_table`变量与我们之前看到的调用`class_table`中涉及的变量相同！`do_bind_inherited_class`因此 的返回值`class_exists`取决于该类的条目是否已经被`class_table`by插入`do_bind_inherited_class`。

## 结论

**Zend 编译器在编译时不作用于`include`指令（即使文件名是硬编码的）。**

如果是这样，那么就没有理由根据`compile_time`未设置的标志发出类重新声明致命错误；可以无条件地发出错误。

**当编译器遇到未在同一脚本文件中声明基类的派生类声明时，它会将在其内部数据结构中注册类的行为推送到运行时。**

从上面的最后一个代码片段可以看出这一点，它设置了一个`ZEND_DECLARE_INHERITED_CLASS_DELAYED`操作码来在脚本执行时注册类。到那时，`compile_time`旗帜`false`和行为将略有不同。

**的返回值`class_exists`取决于该类是否已经注册。**

由于这在编译时和运行时以不同的方式发生，所以行为`class_exists`也不同：

*   其祖先都包含在同一源文件中的类在编译时注册；它们存在并且可以在该脚本中的任何位置实例化
*   在另一个源文件中定义了祖先的类在运行时注册；在 VM 执行与源中的类定义相对应的操作码之前，这些类并不存在于所有实际目的（`class_exists`返回`false`，实例化会产生致命错误）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:17:14.103

这与包含文件中的 PHP 句柄类有关`include dirname(__FILE__) . "/a.php";`

`BB` 存在是因为它扩展`B`了在同一文件中定义的内容。

`BA`不存在，因为PHP没有 `A`在线解析它被称为

两者都可以返回相同的结果

使用`class BA extends B`

```
include dirname(__FILE__) . "/a.php";
echo "BA (before): ", class_exists("BA") ? "exists" : "doesn’t exist", "\n";
echo "BB: ", class_exists("BB") ? "exists" : "doesn’t exist", "\n";
class B {
}
class BA extends B {
}
class BB extends B {
}
echo "BA (after): ", class_exists("BA") ? "exists" : "doesn’t exist", "\n"; 
```

或定义`class A`和使用`class BA extends A`

```
class A {
}
echo "<pre>";
echo "BA (before): ", class_exists("BA") ? "exists" : "doesn’t exist", "\n";
echo "BB: ", class_exists("BB") ? "exists" : "doesn’t exist", "\n";
class B {
}
class BA extends A {
}
class BB extends B {
}
echo "BA (after): ", class_exists("BA") ? "exists" : "doesn’t exist", "\n"; 
```

输出

```
BA (before): exists
BB: exists
BA (after): exists 
```

**结论**

形成 PHP 文档

> 当一个文件被包含时，它包含的代码继承了包含发生的行的变量范围。从那时起，调用文件中该行的任何可用变量都将在被调用文件中可用。但是，包含文件中定义的所有函数和类都具有全局范围。

我认为 PHP 文档中涵盖了扩展类，这可以被视为需要纠正的 BUG，但主要是在调用或使用它们之前包括你的类

# lua - 如何在c中获取lua表的表长度？

> ID：12617191
> 
> 赞同：7
> 
> 时间：2012-09-27T08:32:17.703
> 
> 标签：lua

我有从 lua 调用的 ac 函数。第一个参数是一个表格。该表被滥用为底层 api 的输入数字数组。所以现在我的代码看起来像这样：

```
int n = 0;
lua_pushnil ( L );
while ( lua_next ( L, 2 ) ) {
   n++;
   lua_pop ( L, 1 );
}
int *flat = alloca ( n * 4 );
lua_pushnil ( L );
int i = 0;
while ( lua_next(L,2) ) {
   flat[i++] = (int)lua_tonumber( L, -1 ); 
   lua_pop ( L, 1 );
} 
```

我是盲打代码，请见谅。也没有错误检查。但问题是我必须执行两次 while 循环。有没有一种简单的方法可以避免这种情况？我想针对输入良好的情况进行优化 - 一个整数表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T08:47:40.507

您正在寻找的函数是不直观的 named [`lua_objlen`](http://www.lua.org/manual/5.1/manual.html#lua_objlen)，或者在 Lua 5.2 中，`lua_len`（`lua_rawlen`如果您希望避免元方法调用，有一个）。它有很多作用（虽然有些作用，比如字符串的长度，在你可以用来获取字符串及其长度时并不是很有用`lua_tolstring`），所以你应该熟悉它。

# android - Android：我正在尝试将视图添加到列表中

> ID：12617193
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:32:25.057
> 
> 标签：android, view

我制作了这个 xml 布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/gray"
    android:orientation="vertical" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_margin="10dp"
    android:background="@color/black"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/s_hour"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/gray"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/e_hour"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/gray"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout>

</RelativeLayout>

</LinearLayout> 
```

我有这行代码：

```
class WorkingView extends LinearLayout
{

public WorkingView(Context context,String str) {
    super(context);
    // TODO Auto-generated constructor stub
    setContentView(R.layout.work_data);

    Text s_hour = (Text) findViewById(R.id.s_hour);
    s_hour.setData(str);
    }

} 
```

这条线来自另一个扩展活动的主类：

```
private void readData() {
    WorkingView wv = new WorkingView(this,"hello");
    list.addView(wv);
 } 
```

一切正常，直到代码调用此 readData() 方法。

我不明白出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:41:16.793

对于您正在做的事情，您不应该使用列表。

如果您只是想在另一个视图下添加一个视图：将 linearLayout 作为“容器”，然后将它们添加到其中。

如果您有一堆数据，这些数据都需要用一个或多个属性排列在彼此的下方，则使用列表。为此，您需要研究适配器，arrayadapter 更简单，而 cursoradapter 更高级。

此外，您的方法可能会崩溃，因为您没有膨胀您的 xml。对于视图膨胀看[这里](https://stackoverflow.com/questions/2335813/how-to-inflate-one-view-with-an-layout)

对于滚动功能，请查看[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)，[这是使用它的指南](http://www.basic4ppc.com/forum/designer4android-tutorials/17214-scrollview-example.html)

# replace - sed 替换上一行字符串匹配后第一次出现的字符串

> ID：12617199
> 
> 赞同：2
> 
> 时间：2012-09-27T08:32:47.377
> 
> 标签：replace, sed, line, match

我有一个问题，我真的希望能找到答案。
这是一个包含几行相同的文件，但我只想替换匹配后的第一次出现。

我想在 [blabla] 行之后将第一个 Iam2 更改为 Iwas2。

文件.txt：

```
Iam  
Iam1  
Iam2  
Iam21  
[blabla]  
Iam3  
Iam2  
Iam3  
Iam2 
```

我试过了：

```
$ cat file.txt | sed '1,/[blabla]/a \' | sed '0,/Iam2/s//Iwas2/' 
```

并且

```
$ cat file.txt | sed '/[blabla]/a \' | sed '0,/Iam2/s//Iwas3/' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T08:48:44.147

`infile`用问题的数据假设的一种方法：

```
sed -e '
    ## From "[blabla]" until last line try to substitute "Iam2". If the
    ## substitution succeeds go to label "a".
    /\[blabla\]/,$ { 
        s/Iam\(2\)/Iwas\1/; 
        ta 
    }
    ## The substitution didn't succeed, so begin next cycle.
    b
    ## Label "a".
    :a
    ## Substitution succeed, so I don't want to repeat previous process. Now
    ## read each line and print it without modification until end of file.
    N; 
    P; 
    s/^[^\n]*\n//;
    ba
' infile 
```

这会产生：

```
Iam  
Iam1  
Iam2  
Iam21  
[blabla]  
Iam3  
Iwas2
Iam3  
Iam2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T08:48:53.077

```
awk 'f==1 && /Iam2/{$0="Iwas2";f=0}/blabla/{f=1}1' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:35:39.620

这可能对您有用（GNU sed）：

```
sed '/\[blabla\]/,/Iam2/!b;/Iam2/!b;s//Iwas2/;:a;n;$!ba' file 
```

# embedded - 从 IMU 加速度计中移除重力

> ID：12617200
> 
> 赞同：6
> 
> 时间：2012-09-27T08:32:47.360
> 
> 标签：embedded, accelerometer, sensors, gravity

我发现了这种从加速度计读数中消除重力的[快速方法。](http://www.varesano.net/blog/fabio/simple-gravity-compensation-9-dom-imus)但是，我有一个 6dof IMU（xyz 陀螺仪，xyz 加速度，没有磁力计）所以我不确定我是否可以使用这个代码（我试过但它不能正常工作）。

有人会如何移除重力分量？这是一个很大的障碍，因为我无法继续我的项目。

* * *

**编辑：**

是）我有的：

*   描述飞机位置的四元数（使用扩展卡尔曼滤波器得到）
*   加速度传感器读数（未过滤；轴与平面对齐；重力也包含在这些读数中）

我想要的是：

*   去除重力
*   校正（旋转）加速度计读数，使其轴与地球参考系的轴对齐
*   读取朝向地球的加速度（现在是加速度计的 Z 分量）

**基本上，无论飞机的方向如何，我都想读取朝向地球的加速度！**但我猜第一步是消除重力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:59:20.170

**更新：**好的，所以你需要用四元数旋转一个向量。见[这里](https://math.stackexchange.com/q/40164/9010)或[这里](https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation#Using_quaternion_as_rotations)。

您使用四元数（对应于方向）旋转测量的加速度矢量，然后`[0, 0, 9.81]`从结果中减去重力（根据您的符号约定，您可能有 -9.81）。就这样。

* * *

我已经根据这份[手稿为](https://drive.google.com/open?id=0B9rLLz1XQKmaZTlQdV81QjNoZTA)[Shimmer 2](http://www.shimmersensing.com/products/all-products/)设备实现了传感器融合，我强烈推荐它。它只使用加速度计和陀螺仪，但没有磁力计，并且完全符合您的要求。

您在问题中链接到的资源具有误导性。它依赖于来自传感器融合的四元数。也就是说，有人已经为你做了重担，已经为你准备好了重力补偿。

# android - 覆盖所有活动 Android 的 OnResume() 方法

> ID：12617207
> 
> 赞同：9
> 
> 时间：2012-09-27T08:33:03.523
> 
> 标签：android, overriding, android-activity, onresume

我有超过 10 个活动的应用程序，我想`onResume()`在所有活动中使用相同的代码覆盖该方法。

我知道我可以在每个活动中重写此方法，但我正在寻找一个有效的解决方案。

此外，我希望在此 onResume 中显示一条消息，具体取决于来自哪个活动，例如：如果您在 MainActivity 中，我希望这个常见的 onResume 检测到来自此活动并显示`I'm coming from MainActivity`

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-27T08:36:17.633

您应该`Override`在 a中进行活动，并在其他活动中`BaseClass`使用您的而不是 Activity：`BaseClass`

```
public class BaseClass extends Activity 
{

  public void onResume() 
  {
    // common code
  } 
}

public class OtherClass extends BaseClass 
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:36:37.300

创建一个父活动并覆盖其 onResume，然后让所有 10 个活动扩展创建的父活动。

# android - 在 VideoView 中从暂停状态播放视频

> ID：12617209
> 
> 赞同：7
> 
> 时间：2012-09-27T08:33:07.920
> 
> 标签：android, android-videoview

对于自定义视频视图，我必须覆盖 MediaController（更改按钮的设计并连接到按钮暂停/播放选择器）。情况是这样的：将视频暂停并打开应用程序，然后再次恢复，视频再次开始播放，而不是从暂停的点开始播放，因此出现了问题：如何让视频开始播放从那个地方，它停止的地方？我需要在 VideoActivity 中进行哪些更改？

```
public class VideoActivity extends Activity {

    VideoView videoView;

    VkMediaController mc;

    private static final String CURRENT = "duration";

    private static final String URL = "url";

    private Uri mURI;

    private int mCurrentPosition = -1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.video_view_player);
        videoView = (VideoView) findViewById(R.id.videoViewplayer);
        mc = new VkMediaController(this);
        mURI = getIntent().getData();
        if (savedInstanceState != null) {
            mURI = Uri.parse(savedInstanceState.getString(URL));
            mCurrentPosition = savedInstanceState.getInt(CURRENT);

        }
        videoView.setMediaController(mc);
        videoView.setVideoURI(mURI);
        videoView.requestFocus();
    }

    @Override
    protected void onStart() {
        super.onStart();
        videoView.start();
        if (mCurrentPosition != -1) {
            videoView.seekTo(mCurrentPosition);
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        outState.putInt(CURRENT, videoView.getCurrentPosition());
        outState.putString(URL, mURI.toString());
        super.onSaveInstanceState(outState);
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-27T08:54:33.260

我认为问题是`videoView.getCurrentPosition()`当你调用 inside 时总是返回 0 `onSaveInstanceState(Bundle outState)`，因为当时视频已经重置，所以调用`videoView.getCurrentPosition()`when `onPause()`，这将返回你想要的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:01:37.680

我有同样的问题。我以为我做的一切都是正确的，但它没有用。然后我只是更改了顺序，所以我先打电话`VideoView.seekTo()`，然后再打电话`VideoView.start()`。那行得通。我也有`VideoView.requestFocus()`，但我不知道这是否重要。

```
videoPlayer.requestFocus();
videoPlayer.seekTo(position);
videoPlayer.start(); 
```

因此，如果您确定您的位置变量具有正确的值，这可能就是您的答案。未加载视频时，您可能无法搜索。像这样实现 onPreparedListener：

```
public class VideoActivity extends Activity implements OnPreparedListener {
    VideoView videoPlayer;
    int position;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(savedInstanceState!=null){
    position=savedInstanceState.getInt("pos")
    }
    // setting up the videoview
    setContentView(R.layout.activity_video);
    getIntent().getExtras().getString("url");
    Uri videouri = Uri.parse(getIntent().getExtras().getString("url"));
    videoPlayer = (VideoView) findViewById(R.id.videoView);
    videoPlayer.setOnPreparedListener(this);
    videoPlayer.setKeepScreenOn(true);
    videoPlayer.setVideoURI(videouri);

    }

    /**
     * Start the plaback when the video is loaded
     * 
     * @param mp
     * @see android.media.MediaPlayer.OnPreparedListener#onPrepared(android.media.MediaPlayer)
     */
    public void onPrepared(MediaPlayer mp) {
    //this is a TextView infront of the VideoView which tells the User the Video is loading- hide that
    findViewById(R.id.tv_video_load).setVisibility(View.GONE);

    videoPlayer.requestFocus();
    videoPlayer.seekTo(position)
    videoPlayer.start();
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-30T11:14:06.817

[LandScape LifeCycle 演示的肖像](https://drive.google.com/open?id=1ByH3gE9kODZ6DbU46E4X5hVVaoHXvVJ1)

```
 VideoView videoView;
    int lastPosition;
    int Video_STATE_POSITION  = 0;

  @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (savedInstanceState != null)
        {
            String message = savedInstanceState.getString("message");
            Toast.makeText(this, message, Toast.LENGTH_LONG).show();

            lastPosition=savedInstanceState.getInt("STATE_POSITION");
            videoView.seekTo(lastPosition);
            videoView.start();
            Log.e("Keshav", "MainActivity onCreate() is called  savedInstanceState  lastPosition->" + lastPosition);
        }
}

  @Override
    public void onSaveInstanceState(Bundle outState)
    {
        outState.putString("message", "This is my message to be reloaded");
        outState.putInt("STATE_POSITION", Video_STATE_POSITION);
        super.onSaveInstanceState(outState);
    }

 @Override
    protected void onPause() {
        super.onPause();

        Video_STATE_POSITION = videoView.getCurrentPosition();

        Log.e("Keshav", "MainActivity onPause is called  ->" +Video_STATE_POSITION);
    } 
```

# c++ - Valgrind 显示简单 QML 应用程序的许多警告/错误

> ID：12617212
> 
> 赞同：1
> 
> 时间：2012-09-27T08:33:11.297
> 
> 标签：c++, valgrind, qml

我有用 C++ 和 QML 编写的项目，并尝试使用 Valgrind 调查内存泄漏，但即使应用程序是最简单的，它也会显示大量错误，如下所示：

```
#include <QtGui/QApplication>
#include "qmlapplicationviewer.h"
Q_DECL_EXPORT int main(int argc, char *argv[])
{
    QScopedPointer<QApplication> app(createApplication(argc, argv));
    QScopedPointer<QmlApplicationViewer> viewer(QmlApplicationViewer::create());
    viewer->setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
    viewer->setMainQmlFile(QLatin1String("qml/Interface/main2.qml"));
    viewer->showExpanded();
    return app->exec();
} 
```

QML 文件是：

```
import QtQuick 1.0
Rectangle {
    width: 800
    height: 480
    color: "blue"
    MouseArea {
        anchors.fill: parent
        onClicked: Qt.quit()
    }
} 
```

我正在使用命令运行 Valgrind：

```
valgrind -v --leak-check=full --show-reachable=yes --track-origins=yes --log-file=Interface2.valgrind.log ./Interface2 
```

Valgrind 摘要说：

```
==16840== LEAK SUMMARY:
==16840==    definitely lost: 344 bytes in 2 blocks
==16840==    indirectly lost: 20 bytes in 1 blocks
==16840==      possibly lost: 9,935 bytes in 308 blocks
==16840==    still reachable: 133,085 bytes in 2,234 blocks
==16840==         suppressed: 0 bytes in 0 blocks 
```

以下是从 Valgrind 获得的一些（大约 3000 行日志）消息：

```
==16840== Memcheck, a memory error detector
==16840== Copyright (C) 2002-2009, and GNU GPL'd, by Julian Seward et al.
==16840== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
==16840== Command: ./Interface2
==16840== Parent PID: 13367
==16840== 
--16840-- 
--16840-- Valgrind options:
--16840--    --suppressions=/usr/lib/valgrind/debian-libc6-dbg.supp
--16840--    -v
--16840--    --leak-check=full
--16840--    --show-reachable=yes
--16840--    --track-origins=yes
--16840--    --log-file=Interface2.valgrind.log
--16840-- Contents of /proc/version:
--16840--   Linux version 2.6.32-43-generic (buildd@roseapple) (gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5.1) ) #97-Ubuntu SMP Wed Sep 5 16:43:09 UTC 2012
--16840-- Arch and hwcaps: X86, x86-sse1-sse2
--16840-- Page sizes: currently 4096, max supported 4096
--16840-- Valgrind library directory: /usr/lib/valgrind
--16840-- Reading syms from /lib/ld-2.11.1.so (0x4000000)
--16840-- Reading debug info from /lib/ld-2.11.1.so ..
--16840-- .. CRC mismatch (computed 1f70923a wanted 671e42e8)
--16840-- Reading debug info from /usr/lib/debug/lib/ld-2.11.1.so ..
--16840-- Reading syms from /root/workspace/CC5/AIO_CC5/Tools/Interface/Interface2 (0x8048000)
--16840-- Reading syms from /usr/lib/valgrind/memcheck-x86-linux (0x38000000)
--16840--    object doesn't have a dynamic symbol table
--16840-- Reading suppressions file: /usr/lib/valgrind/debian-libc6-dbg.supp
--16840-- Reading suppressions file: /usr/lib/valgrind/default.supp
--16840-- REDIR: 0x4016100 (index) redirected to 0x3803e9b3 (vgPlain_x86_linux_REDIR_FOR_index)
--16840-- Reading syms from /usr/lib/valgrind/vgpreload_core-x86-linux.so (0x401f000)
--16840-- Reading syms from /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so (0x4022000)
==16840== 148 (128 direct, 20 indirect) bytes in 1 blocks are definitely lost in loss record 133 of 200
==16840==    at 0x4024F20: malloc (vg_replace_malloc.c:236)
==16840==    by 0x60438C1: ??? (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x60443C4: ??? (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x60444D9: ??? (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x6048876: ??? (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x60493C0: ??? (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x61CACFD: ??? (in /lib/libexpat.so.1.5.2)
==16840==    by 0x61CBBC0: ??? (in /lib/libexpat.so.1.5.2)
==16840==    by 0x61CD412: ??? (in /lib/libexpat.so.1.5.2)
==16840==    by 0x61CDCD9: ??? (in /lib/libexpat.so.1.5.2)
==16840==    by 0x61C6F02: XML_ParseBuffer (in /lib/libexpat.so.1.5.2)
==16840==    by 0x604724A: FcConfigParseAndLoad (in /usr/lib/libfontconfig.so.1.4.4)

==16840== 216 bytes in 1 blocks are definitely lost in loss record 137 of 200
==16840==    at 0x4024F20: malloc (vg_replace_malloc.c:236)
==16840==    by 0x60CE9D2: _XimOpenIM (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x60CE817: _XimRegisterIMInstantiateCallback (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x60B1D77: XRegisterIMInstantiateCallback (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x4BF6A51: ??? (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x4BF4500: QInputContextFactory::create(QString const&, QObject*) (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x4551C2C: QApplication::inputContext() const (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x459DEA6: QWidgetPrivate::inputContext() const (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x45A9E03: QWidget::setAttribute(Qt::WidgetAttribute, bool) (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x4C65E0B: QGraphicsViewPrivate::updateInputMethodSensitivity() (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x4C7185E: QGraphicsView::setScene(QGraphicsScene*) (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x40A5A06: ??? (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtDeclarative.so.4.7.4)

==16840== 256 bytes in 1 blocks are still reachable in loss record 143 of 200
==16840==    at 0x4025016: realloc (vg_replace_malloc.c:525)
==16840==    by 0x602ED60: FcBlanksAdd (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x60495CB: ??? (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x61CACFD: ??? (in /lib/libexpat.so.1.5.2)
==16840==    by 0x61CBBC0: ??? (in /lib/libexpat.so.1.5.2)
==16840==    by 0x61CD412: ??? (in /lib/libexpat.so.1.5.2)
==16840==    by 0x61CDCD9: ??? (in /lib/libexpat.so.1.5.2)
==16840==    by 0x61C6F02: XML_ParseBuffer (in /lib/libexpat.so.1.5.2)
==16840==    by 0x604724A: FcConfigParseAndLoad (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x603D091: FcInitLoadConfig (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x603D19B: FcInitLoadConfigAndFonts (in /usr/lib/libfontconfig.so.1.4.4)
==16840==    by 0x603D29C: FcInit (in /usr/lib/libfontconfig.so.1.4.4)

==16840== 360 bytes in 3 blocks are possibly lost in loss record 144 of 200
==16840==    at 0x4024106: memalign (vg_replace_malloc.c:581)
==16840==    by 0x4024163: posix_memalign (vg_replace_malloc.c:709)
==16840==    by 0x5E9C9C1: slab_allocator_alloc_chunk (gslice.c:1148)
==16840==    by 0x5E9D222: g_slice_alloc (gslice.c:678)
==16840==    by 0x5E9E881: g_slist_prepend (gslist.c:273)
==16840==    by 0x5EA1A94: g_strsplit (gstrfuncs.c:2431)
==16840==    by 0x5EB5731: g_get_language_names (gutils.c:3169)
==16840==    by 0x5EA9B49: g_thread_init_glib (gthread.c:940)
==16840==    by 0x5E3F69D: g_thread_init (gthread-impl.c:360)
==16840==    by 0x50FC7D9: QEventDispatcherGlibPrivate::QEventDispatcherGlibPrivate(_GMainContext*) (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtCore.so.4.7.4)
==16840==    by 0x460CB4C: ??? (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x460CC32: ??? (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)

==16840== 16,352 bytes in 2 blocks are still reachable in loss record 199 of 200
==16840==    at 0x4024F20: malloc (vg_replace_malloc.c:236)
==16840==    by 0x6098833: ??? (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x6098CA6: _XrmInternalStringToQuark (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x609F4C5: XStringToKeysym (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x60D2849: _XimParseStringFile (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x60D0466: _XimLocalOpenIM (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x60CEB3C: _XimOpenIM (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x60CE817: _XimRegisterIMInstantiateCallback (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x60B1D77: XRegisterIMInstantiateCallback (in /usr/lib/libX11.so.6.3.0)
==16840==    by 0x4BF6A51: ??? (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x4BF4500: QInputContextFactory::create(QString const&, QObject*) (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4)
==16840==    by 0x4551C2C: QApplication::inputContext() const (in /opt/QtSDK/Desktop/Qt/474/gcc/lib/libQtGui.so.4.7.4) 
```

问题是：我需要做些什么来消除应用程序中的内存泄漏错误。这是错误库的问题吗？我已经使用来自 Qt 官方网站的安装程序安装了它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:53:17.547

是的，这似乎是错误库的问题。如果您认为可以将其追踪到 Qt 中的泄漏，我肯定会将其报告为他们的错误：http: [//qt-project.org/wiki/ReportingBugsInQt](http://qt-project.org/wiki/ReportingBugsInQt)

也就是说，我认为您对 QScopedPointer 的使用非常好奇。为什么不简单地在堆栈上分配您的应用程序？像这样：

```
QApplication app(argc, argv); 
```

我会对你的 QmlApplicationViewer 指针说同样的话，但我看不到 QmlApplicationViewer::create() 做了什么:)

无论如何，我认为这不太可能为您解决泄漏问题...

# objective-c - XCode 中的图像和声音文件在哪里？

> ID：12617213
> 
> 赞同：0
> 
> 时间：2012-09-27T08:33:13.303
> 
> 标签：objective-c, ios, xcode, image, unity3d

Unity IDE 中使用的图像和声音文件是否以某种方式编译到 XCode 中的 libiPhone-lib.a 中？我正在寻找一种方法来访问 XCode/Objective-C 中的音频文件和图像。据我通过查看导出的 XCode 项目可以看出，在任何地方都看不到声音文件或其他资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:45:05.470

它们作为字节码编译到库中，然后在运行时进行解释。披露这一点会破坏 Unity 的商业模式，因为每个人都会对统一生成的代码进行更正。他们更容易解释字节码，而不是将其翻译成人类可读的语言，如 C 或 Objective-c。

答案是：是的，它们被编译成 lib。

如果要从objective-c层访问它们，则必须以通常的xCode方式再次将它们添加到项目中，因此它们的数据将在项目中加倍。

# iphone - 辅助动作序列（UITableViewController）

> ID：12617219
> 
> 赞同：17
> 
> 时间：2012-09-27T08:33:48.713
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我正在尝试通过 IB 进行 segue，在 tableView 中按下单元格附件时切换视图。

来自我的 IB 的图片：

1.我从 tableviewcontroller 的单元格拖动到另一个视图并选择 Accessory Action -> push

![IB截图](../Images/1bd4ac9a5dd96855a14db2dc9fb1abf9.png)

当我运行我的项目时，我收到错误：

> [ setValue:forUndefinedKey:]: 这个类对于 key accessoryActionSegueTemplate 不符合键值编码

我认为这可能是单元格的重用标识符有问题。

我的`cellForRowAtIndexPath:`方法：

```
static NSString *CellIdentifier = @"champion cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

NSString *cellIconName = ((championList *)[self.champions objectAtIndex:indexPath.row]).championImage;
UIImage *cellIcon = [UIImage imageNamed:cellIconName];
[[cell imageView] setImage:cellIcon];

cell.imageView.frame = CGRectMake(0.0f, 0.0f, 70.0f, 70.0f);

cell.imageView.layer.cornerRadius = 7;
[cell.imageView.layer setMasksToBounds:YES];

cell.textLabel.text = ((championList *) [self.champions objectAtIndex:indexPath.row]).championName;
cell.detailTextLabel.text = ((championList *) [self.champions objectAtIndex:indexPath.row]).championId;

return cell; 
```

* * *

我可以使用 performSegueWithIdentifier: 方法作为这个问题的解决方案，但我想弄清楚为什么我在 IB 中遇到辅助操作问题。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-21T17:16:28.020

当我从原型单元的详细附件按钮 ctrl 拖动一个 segue 到下一个视图控制器时，我遇到了这个问题。因此，我从表格视图控制器本身进行了拖动，并添加了一些代码。

**目标-C：**

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier: @"EditUser" sender: [tableView cellForRowAtIndexPath: indexPath]];
} 
```

**斯威夫特 3.0：**

```
func tableView(_ tableView: UITableView, accessoryButtonTappedForRowWith indexPath: IndexPath) {
    performSegue(withIdentifier: "EditUser", sender: tableView.cellForRow(at: indexPath))
} 
```

这适用于 iOS 5.0 - 10.x

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:14:25.333

当我在 iPod Touch 上的 iOS 5 上而不是在 iPhone 5 上的 iOS 6 上运行我的应用程序时，我收到了这个错误。

文档说 iOS 3.0 中不推荐使用辅助操作。该错误似乎是它在 iOS 6 中被显示和允许。

您能否确认您正在测试的 iOS 版本是什么？

[https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/DeprecationAppendix/AppendixADprecatedAPI.html#//apple_ref/occ/instp/UITableViewCell/accessoryAction](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instp/UITableViewCell/accessoryAction)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T19:40:21.347

我刚刚遇到了同样的问题。在 iOS 6 上运行良好，在 5.1 上崩溃。

我解决它的方法是使用标准`UITableViewCell`并从 a 中创建附件按钮`UIButton`，我在其上放置了一个 segue。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T19:14:23.970

在 iOS 5.x 上，当您在情节提要中创建弹出框样式 segue 并且（在我的情况下）将其锚定到 UITableViewCell 时，也会发生此错误。

在这种情况下，错误消息是完全误导性的红鲱鱼。

我假设 iOS 5.x 不支持锚定弹出框 segues。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-27T08:46:35.623

将导航控制器从对象库拖到您的故事板文件中并尝试这样做，它应该可以工作。您的下一个视图应该有导航控制器。

# qt - 无法使用 Qt 环境在 Linux 中解析库

> ID：12617222
> 
> 赞同：0
> 
> 时间：2012-09-27T08:34:01.787
> 
> 标签：qt, opencv, qt-creator

在一些有用的提示之后，这是这篇文章的新版本，问题是我的程序似乎正在以某种方式运行，但它只是发出一些错误......我不知道它实际上提到了什么，因为安装了库，我将路径形式 LIBS += -`LC:/usr/local/lib/ \`更改`LIBS += -L/usr/local/lib/ \`为有人说它实际上是指 Windows 而你使用 linux(chakra) 然后在目录末尾添加“\”并将 pkg-config 添加到我的 .pro 文件中，所以这个是新版本的新问题...：

```
 Starting /home/lucifer/PR0J3CTs/FirstOpenCV-build-desktop-Qt_4_8_2_in_PATH__System__Release/FirstOpenCV...
/home/lucifer/PR0J3CTs/FirstOpenCV-build-desktop-Qt_4_8_2_in_PATH__System__Release/FirstOpenCV exited with code 0

Debugging starts
the debug information found in "/usr/lib/libQtOpenGL.so.4.8.2.debug" does not match "/usr/lib/libQtOpenGL.so.4" (CRC mismatch).
the debug information found in "/usr/lib/libQtGui.so.4.8.2.debug" does not match "/usr/lib/libQtGui.so.4" (CRC mismatch).
the debug information found in "/usr/lib/libQtCore.so.4.8.2.debug" does not match "/usr/lib/libQtCore.so.4" (CRC mismatch).
the debug information found in "/usr/lib/libQtTest.so.4.8.2.debug" does not match "/usr/lib/libQtTest.so.4" (CRC mismatch).
the debug information found in "/usr/lib/libQtNetwork.so.4.8.2.debug" does not match "/usr/lib/libQtNetwork.so.4" (CRC mismatch).
the debug information found in "/usr/lib/libQtXml.so.4.8.2.debug" does not match "/usr/lib/libQtXml.so.4" (CRC mismatch).
the debug information found in "/usr/lib/libQtSvg.so.4.8.2.debug" does not match "/usr/lib/libQtSvg.so.4" (CRC mismatch).
the debug information found in "/usr/lib/libQtDBus.so.4.8.2.debug" does not match "/usr/lib/libQtDBus.so.4" (CRC mismatch).
Debugging has finished 
```

这是我的 .pro 配置 [如您所见，我评论了 (#) 两个 LIBS 配置之一，我只是想问哪个更准确或更有用，昨天我尝试过，它与较新版本的libavcodec 所以我搜索了一些并下载了 libavcodec.53 并对其进行了配置，但我不确定现在应该发生什么，我现在正试图从 ccr 社区存储库获取 opencv-qt-for-all 包并让程序自己处理这些问题，但我确信它不会解决我的问题]：

```
QT       += core
QT       -= gui

TARGET = FirstOpenCV
CONFIG   += console
CONFIG   -= app_bundle
CONFIG   += link_pkgconfig
PKGCONFIG += opencv

TEMPLATE = app

SOURCES += main.cpp

INCLUDEPATH += /usr/local/include/opencv2/

#LIBS += -L/usr/local/lib/ \
#-libopencv_core.so \
#-libopencv_highgui.so \
#-libopencv_imgproc.so \
#-libopencv_features2d \
#-libopencv_calib3d.so

LIBS += /usr/lib/libopencv_core.so \
/usr/lib/libopencv_highgui.so \
/usr/lib/libopencv_imgproc.so \
/usr/lib/libopencv_features2d.so \
/usr/lib/libopencv_calib3d.so \
/usr/lib/libavcodec.so 
```

这是代码：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;

int main() {

    // read an image
    Mat image = imread("002.jpg");
    // create image window named "My Image"
    namedWindow("My Image");
    // show the image on window
    imshow("My Image", image);
    // wait key for 5000 ms
    waitKey(5000);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:47:27.753

尝试：

```
QT       += core

QT       -= gui

TARGET = FirstOpenCV
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp

INCLUDEPATH += /usr/local/include/opencv2/

LIBS += -LC:/usr/local/lib/ \
-lopencv_core \
-lopencv_highgui \
-lopencv_imgproc \
-lopencv_features2d \
-lopencv_calib3d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:56:40.087

您的 LIBS 声明似乎失败了。

你可以试试这个：

```
LIBS += -LC:/usr/local/lib/ \
    -libopencv_core.so.2.4.2 \
    -libopencv_highgui.so.2.4.2 \
    -libopencv_imgproc.so.2.4.2 \
    -libopencv_features2d.so.2.4.2 \
    -libopencv_calib3d.so.2.ss4.2 
```

请注意行末的反斜杠。如果没有这些，下一行将被解析为单独的声明，并且“-libopencv_core.so.2.4.2”本身不是有效的声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:44:42.883

我从未见过在 Unix 上使用 C:/ ：那么这可能是必需的更正（也解释了@enderland 的答案）：

```
LIBS += -L/usr/local/lib/ \
-lopencv_core \
-lopencv_highgui \
-lopencv_imgproc \
-lopencv_features2d \
-lopencv_calib3d 
```

升级到 OpenCV 2.4.2 时，我的系统出现了一些问题 -*运行时*绑定到以前的版本，与操作系统捆绑在一起。我不得不（痛苦地）重新编译并重新安装 OpenCV，并且我发现了一个不错的“技巧”：使用 pkgconfig 而不是硬编码路径：

```
CONFIG += link_pkgconfig
PKGCONFIG += opencv 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T09:02:01.180

问题已解决，正如我之前所说，我的程序已执行但出现错误问题是图片目录，我已将其放在 main.cpp 旁边的源文件中，问题是如果你想获得真实的结果使用调试或发布模式你应该把图片放在这两个目录中，然后再运行一次。

如果您愿意通过与我使用的源文件相同的目录运行它，您应该打开一个终端或在您的 Dolphin 文件管理器中按 F4 或您使用的任何内容并首先运行，然后`qmake`调用`make`，另一个问题是我的操作系统（脉轮）不会让已安装的设备具有可执行权限，因此您必须将您的项目移动到您的操作系统环境中的主页或您喜欢的任何位置。

解决了... :) Tnx 每一个 :)

# javascript - JavaScript 提示/警报问题

> ID：12617224
> 
> 赞同：1
> 
> 时间：2012-09-27T08:34:17.887
> 
> 标签：javascript

这是很基本的...

我坚持要做什么。

```
alert("The capital of " + n + " is " + capitals.n); 
```

警报中的 capitals.n 显示为未定义。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:36:06.723

使用方括号：

```
alert("The capital of " + n + " is " + capitals[n]); 
```

您当前所拥有的将查找不存在的`capitals`带有 identifier的属性。`n`相反，您希望使用 的*值*作为`n`标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:36:16.080

使用方括号代替点表示法：

`alert("The capital of " + n + " is " + capitals[n]);`

**解释：**

*   `capitals.n`查找字面上名为“n”的属性。
*   `capitals[n]`查找以变量值`n`作为名称的属性。

`capitals.n`（通过在您的代码中给出一个值来验证，例如`capitals.n = 'FOO'`：）

# visual-studio-2010 - corelDraw 6 插件

> ID：12617232
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:34:49.430
> 
> 标签：visual-studio-2010, add-in, coreldraw

感谢您花时间检查我的问题，所以我需要使用 VB.NET 构建 corelDraw 6 插件

## 所以我采取了 2 种方法 (1) 只是尝试使用 VSTA 编辑器，但没有用 :( 我收到此错误，尝试将 .NET 版本切换到 3 或 2 但也没有用，只需显示以下消息 > >>>>>>>>>

## CorelDRAW

无法附加。检查以下其中一项。

1.  您尝试调试的应用程序使用了调试器不支持的 Microsoft .NET Framework 版本。

2.  调试器对您的应用程序将使用的 Microsoft .NET Framework 版本做出了错误的假设。

3.  您为调试指定的 Microsoft .NET Framework 版本不正确。

## 请参阅 Visual Studio .NET 调试器文档以正确指定您的应用程序将用于调试的 Microsoft .NET Framework 版本。

有什么建议...？

(2) 我使用我的 VS 2010 并创建了一个类库项目，然后使用 VSTA 中的代码并插入了所有对 corelDraw 的相关引用 -> 构建 -> 一切顺利我得到了我的 dll 文件:( 但是如何使它工作作为 corelDraw 6 中的插件

有什么建议...？

太感谢了，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:11:59.603

哦，我只是解决它:)

我在 C:\Users\\Documents\Corel\VSTA\CorelDRAW\Addins 中复制了我使用 VS2010 所做的 dll 文件

重新打开corel，它就可以了，谢谢大家

关于方式（1）的任何想法答案也将得到解决，谢谢

# php - 无限循环尝试验证/保存

> ID：12617233
> 
> 赞同：1
> 
> 时间：2012-09-27T08:35:08.300
> 
> 标签：php, ajax, yii

我正在使用 Yii 框架创建一个非常简单的 1 个文本区域字段和 2 个隐藏输入，其中包含从服务器发送的预定义值。

它应该*按预期*工作，我的意思是，您在该文本区域上写一些东西，然后单击*发送*按钮。进行了 ajax 验证（文本区域的唯一必要条件是它不应该为空），如果验证，保存数据并重定向到其他页面。

问题是如果触发验证错误，它不会保存任何数据。

我的意思是，如果我去页面，写一些东西并点击*发送*按钮，数据将被保存，我将被正确重定向。但是如果我转到页面，点击*发送*按钮（不在文本区域输入任何内容），等待错误出现（注意这是通过 ajax 完成的，所以这里没有页面重新加载），写点东西然后点击再次*发送*Yii 将在无限循环中的请求之后开始发出请求。

我已经检查了正在发送的数据，一切都很好（数据和操作 URL）。

这是我的控制器代码

```
public function actionView($id)
{

    $user = Usuario::model()->findByAttributes(
        array(
            'nick'=>Yii::app()->user->getId()
        )
    );

    $dataProvider=new CActiveDataProvider('Mensaje', array(
        'criteria'=>array(
            'with'=>array('usuario', 'usuario.detallesusuario'),
            'condition'=>'Tema_idtema='.$id
        ),
        'pagination'=>array(
            'pageSize'=>1000,
        ),
    ));

    $this->render('view',array(
        'model'=>$this->loadModel($id),
        'usuario_id'=>$user->idusuario,
        'tema_id'=>$id,
        'dataProvider'=>$dataProvider,
    ));

}

public function actionCreateMessage(){

    $model=new Mensaje;

    $this->performAjaxValidation($model);

    if(isset($_POST['Mensaje']))
    {

        $model->attributes=$_POST['Mensaje'];
        $model->fecha_hora=new CDbExpression('NOW()');

        $model->save();

        $this->redirect(array('view', 'id'=>$model->Tema_idtema));
    }

} 
```

以及来自视图的代码

```
<?php 

$model = new Mensaje();
echo $this->renderPartial('_mensaje_form', array(
        'model'=>$model,
        'usuario_id'=>$usuario_id,
        'tema_id'=>$tema_id,
    ), 
    false, //return instead of echo
    true //post-process
);

?> 
```

这是“_mensaje_form”代码

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'mensaje-form',
    'action'=>CHtml::normalizeUrl(array('tema/createMessage')),
    'enableAjaxValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,
        'validateOnChange'=>false,
        'validateOnType'=>false,
    ),
)); ?>

<?php echo $form->errorSummary($model); ?>

<div class="row" style="margin:20px 5px 0 176px;">
    <?php echo $form->labelEx($model,'mensaje'); ?>
    <?php echo $form->textArea($model,'mensaje',array('rows'=>6, 'cols'=>50)); ?>
    <?php echo $form->error($model,'mensaje'); ?>

    <?php echo $form->hiddenField($model, 'Tema_idtema', array('value'=>$tema_id)); ?>      
    <?php echo $form->hiddenField($model, 'Usuario_idusuario', array('value'=>$usuario_id)); ?>
</div>
<div class="row buttons" style="margin:-3px 0 -8px 176px;">
    <?php echo CHtml::submitButton($model->isNewRecord ? 'Responder' : 'Guardar'); ?>
</div>

<?php $this->endWidget(); ?> 
```

知道为什么我会得到那个循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:39:17.863

我的猜测（有点远）你的**表格 id**`preformAjaxValidation()`可能是错误的，所以它会导致循环！因为它不会进入身体`if`并因此执行`Yii::app()->end();`！

**在您的控制器**中检查它：

```
protected function performAjaxValidation($model)
{
    if(isset($_POST['ajax']) && $_POST['ajax']==='exact-form-id')//should be mensaje-form
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:45:49.777

这可能对你有帮助，

[http://www.yiiframework.com/forum/index.php/topic/10427-ajax-clientscript/](http://www.yiiframework.com/forum/index.php/topic/10427-ajax-clientscript/)

在您看来，renderPartial 中的最后一个参数“true”可能是问题所在。

# ruby-on-rails - Rails 3.2 强制准备好的语句

> ID：12617237
> 
> 赞同：0
> 
> 时间：2012-09-27T08:35:18.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, prepared-statement

如果我使用表达式`Model.find(1)`，则 rails 将其作为准备好的语句执行：`SELECT "models".* FROM "models" WHERE "models"."id" = $1 LIMIT 1 [["id", 1]]`

但是当我使用`Model.where("id = ?", 1)`它时，它在没有准备好的语句的情况下执行：`SELECT "models".* FROM "models" WHERE (id = 1)`

在这种情况下，如何强制 Rails 也使用准备好的语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:59:58.733

我不确定你能不能。

但

```
Model.where(:id => 1) 
```

应该生成一个准备好的语句。片段字符串的工作方式不同，因此您可以在自定义情况下准确生成所需的内容。

编辑 ：

试试这个，我不确定它是否有效，我现在不能测试，但它看起来像你需要的：

```
 Client.where("created_at >= :start_date AND created_at <= :end_date",
   {:start_date => params[:start_date], :end_date => params[:end_date]}) 
```

更多信息：http: [//guides.rubyonrails.org/active_record_querying.html#conditions](http://guides.rubyonrails.org/active_record_querying.html#conditions)

在占位符部分。此外，日期范围以数组格式工作：

:date => date_begenning..date_end

编辑2：确实可以，但我似乎不支持手动构建它。

您可以手动构建准备好的查询：

[http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-exec_query](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-exec_query)

```
exec_query(sql, name = 'SQL', binds = []) 
```

您的关系还有一个绑定方法。

但是这两个绑定都需要值有一个名称方法，如果你给出一个固定编号、一个哈希等，它们会崩溃。我没有找到任何文档解释这是如何工作的。

Bu 对于 where 子句，只要它是 Class String 的，activeecord 就会在其上应用一个 .to_sql，所以你不会得到你准备好的语句。

# iphone - 在iphone中交换位置信息+游戏中心

> ID：12617240
> 
> 赞同：1
> 
> 时间：2012-09-27T08:35:23.830
> 
> 标签：iphone, ios, game-center, gamekit

我想通过游戏中心在游戏的其他玩家之间交换玩家的当前位置信息。我经历过[这个](https://developer.apple.com/library/ios/#documentation/GameKit/Reference/GameKit_Collection/_index.html)

但是哪个课程帮助我使位置转移成为可能？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:08:18.030

```
-(void)sendData
{  
NSString *mystring=[NSString stringWithFormat:@"lat=22.810000log=71.477989user=%@",lp.alias];
    int myscore=20;
    NSError *error;
    NSData* data=[mystring dataUsingEncoding: [NSString defaultCStringEncoding] ];
    BOOL success = [match sendDataToAllPlayers:data withDataMode:GKPlayerStateConnected error:&error];
    if (!success) {
        NSLog(@"Error sending init packet:\n%@",error);
    }
} 
```

为了发送数据，其中 match 是 GKMatch 的对象，为了接收数据，使用以下委托方法

```
- (void)match:(GKMatch *)theMatch didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID {    

    if (match != theMatch) return;
    NSString *string = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease];
    NSLog(@"Received String : %@",string);

    NSString* str_lat =[[[[string componentsSeparatedByString:@"lat="]objectAtIndex:1] componentsSeparatedByString:@"log="]objectAtIndex:0];

     NSString* str_long =[[[[string componentsSeparatedByString:@"log="]objectAtIndex:1] componentsSeparatedByString:@"user="]objectAtIndex:0];

    NSRange range = [string rangeOfString:@"user="];
    NSString *str_username = [[string substringFromIndex:NSMaxRange(range)] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

    NSLog(@"str_lat%@",str_lat);
    NSLog(@"str_long%@",str_long);

    NSLog(@"str_username--%@",str_username);
} 
```

# c++ - 查找动态分配数组的大小

> ID：12617244
> 
> 赞同：26
> 
> 时间：2012-09-27T08:35:32.387
> 
> 标签：c++, size, new-operator, dynamic-allocation

为什么无法获得以这种方式分配的缓冲区的长度。

```
AType * pArr = new AType[nVariable]; 
```

当同一个数组被释放时

```
delete [] pArr; 
```

运行时必须知道要释放多少。在删除数组之前有什么方法可以访问长度。如果没有，为什么没有提供这样的 API 来获取长度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T08:37:47.227

> 在删除数组之前有什么方法可以访问长度吗？

不，没有办法确定。
该标准不要求实现记住并提供通过`new`.
该实现可以简单地在分配的内存块的末尾插入特定的位模式，而不是记住元素的数量，并且可以在释放内存时简单地查找模式。
简而言之，它只是一个实施细节。

* * *

附带说明一下，有两个选项可以实际克服这个问题：

1.  您可以简单地使用 a`std::vector`它为您提供成员函数，例如`size()`或
2.  您可以简单地自己做簿记。

`new` *至少*根据您的要求分配足够的内存。
您已经知道您请求了多少内存，因此您可以轻松计算长度。您可以使用 找到每个项目的大小`sizeof`。

```
Total memory requested / Memory required for 1 item = No of Items 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T08:39:01.270

运行时确实知道分配了多少。然而，这些细节是编译器特定的，所以你没有任何跨平台的方式来处理它。

如果您想要相同的功能并且能够跟踪大小，您可以使用 std::vector 如下：

```
std::vector< AType > pArr( nVariable ); 
```

这也具有使用 RAII 的额外优势。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T08:39:37.887

`delete`操作员不需要知道释放分配内存的大小，就像系统`free`调用不需要一样。这是因为该问题留给了操作系统，而不是编译器运行时系统。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-27T10:37:45.897

运行时必须释放与其分配相同的数量，并且它确实以某种方式（通常非常间接）跟踪这一点。但是从分配的数量到元素的数量没有可靠的方法：分配的数量不能小于元素数量乘以每个元素的大小，但通常会更多。例如，对齐考虑意味着`new char[5]`并且`new char[8]`通常会分配相同数量的内存，并且有各种分配策略可能导致分配比严格必要的内存更多的内存。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-27T08:39:31.753

不，不是。至少不是以独立于平台的、定义的方式。

大多数实现都在实际数组之前存储动态分配数组的大小。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-25T13:43:58.657

C++ 中没有可移植的方法来从原始指针获取动态分配的数组的大小。

在 MSVC 和 WIN32 下，您可以使用 _msize(void*) 函数获取分配块的大小。

有关详细信息，请参阅[https://msdn.microsoft.com/en-us/library/z2s077bc.aspx](https://msdn.microsoft.com/en-us/library/z2s077bc.aspx)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-25T12:46:07.290

为什么不提供一些这样的额外信息：

```
template <typename T> class AType
{
public:

    AType(size_t s) : data(0)
    {
        a_size = s;
        data = new T[s];
    }
    ~AType() {
        if (data != nullptr)
            delete [] data;
    }

    size_t getSize() const
    {
        return a_size * sizeof(T);
    }

private:
    size_t a_size;
    T* data;
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-07T08:56:40.507

我使用这种“脏”方法，仅用于调试目的：

```
T *p = new T[count];
size_t size = (char*)&(p[count]) - (char*)p; 
```

这给出了实际数据的大小，但没有给出编译器可能分配的任何额外大小。

对于已经对齐的类型 T，它等于：

```
size_t size = sizeof(T) * count; 
```

当然，如果您不知道数组中的项目数，这将不起作用。

# javascript - 从 select 获取最接近的输入并将其放在 $.post

> ID：12617248
> 
> 赞同：0
> 
> 时间：2012-09-27T08:35:56.177
> 
> 标签：javascript, jquery, ajax, forms, .post

好的。请参阅底部屏幕截图以了解前端的说明。我在这里要做的是当用户在选择表单中进行选择时，即：选择**Received**，我想直接在选择表单的底部获取输入框的值并通过 $.post 将其发送到另一个脚本以便我处理它。

我似乎无法通过 $.post 获取数据以读取输入框中的值。主要关注点应该在 $.post 区域。我尝试使用 $('.order_item_id').val(); 在我的 $.post 数据中，但无论我从哪个选择框进行选择，我都只能获得**第一个输入框下的值。**

![截屏](../Images/b9f4a8564364af3095a4bb89377b5fa2.png)

这是我的 javascript 和 php 部分。

**.js**

```
$('.order_stat_sel').change(function(){
    var closest_div=$(this).closest('div.order_receipt');
    var closest_selectbox=$(this).closest('.order_stat_sel');       
    if($('.select_received:selected').length>0){
        if(confirm('Confirm Receipt of this item?')){
            $.post("/seller/buyer_cfm_receive.php",{order_item_id: $(this).closest('.order_item_id').val()}, function(data) {
                alert("Congrats, Order Item Completed" + data);
                closest_div.append('<p>Completed</p>');
                closest_selectbox.remove().fadeOut("slow");
            });
        }else{
            $('.order_stat_sel').val('p');
        }
    }
}); 
```

**php**

```
 if($this->orderstatuses[$item->order_status]!='received'){
                echo '<select class="order_stat_sel" name="order_status">';
                    echo '<option class="select_pending" value="'.$pendingitem_state[2].'">'.$pendingitem_state[3].'</option>';
                    echo '<option class="select_received" value="'.$enditem_state[2].'">'.$enditem_state[3].'</option>';            
                echo '</select>';
            }?>
            <form class="send_order_cfm_input">
                <input class="order_item_id" name="order_item_id" value="<?php echo $item->virtuemart_order_item_id;?>" type="text" readonly="readonly">
            </form> 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:41:17.217

[`.closest()`](http://api.jquery.com/closest)找到元素的最近*祖先*，但您实际上是在搜索[邻居](http://api.jquery.com/next)的[后代](http://api.jquery.com/find)：

```
$.post("/seller/buyer_cfm_receive.php",
    {
        order_item_id:$(this)
                      .next(".send_order_cfm_input")
                      .find('.order_item_id').val()
    },
    function() {
        /*...*/
    }
); 
```

# php - 使用带有 require_once('Mail.php') 的 smtp 错误发送电子邮件；

> ID：12617249
> 
> 赞同：2
> 
> 时间：2012-09-27T08:36:00.170
> 
> 标签：php, email, smtp

我正在尝试使用 smtp 发送电子邮件，但似乎在线发生错误

> require_once('Mail.php');

（来源：http://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page）

> 警告：require_once（Mail.php）：无法打开流：第 4 行的 /Applications/MAMP/htdocs/p/forgot.php 中没有这样的文件或目录
> 
> 致命错误：require_once()：无法在 /Applications/MAMP/htdocs/p/forgot 中打开所需的“Mail.php”（include_path='.:/Applications/MAMP/bin/php/php5.4.4/lib/php'） .php 在第 4 行

这是我输入时的消息：pear -V

> PEAR 版本：1.9.4 PHP 版本：5.4.4 Zend 引擎版本：2.4.0 ...

安装 pear 后如何包含“Mail.php”？

**这个问题通过**

检查路径安装在哪里

> $ pear config-get php_dir

然后更改 php.ini 文件中的 include_path

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:39:04.340

如果我理解正确，您想使用 mail() 函数吗？

一旦设置好，我就不必在使用它时要求或包含它。通常我的 PHP 环境会选择默认包含路径中的所有内容。

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# reporting-services - 每个部分显示不同的组页眉和页脚

> ID：12617250
> 
> 赞同：0
> 
> 时间：2012-09-27T08:36:00.540
> 
> 标签：reporting-services, group-by, ssrs-2008

谁能告诉我如何在 SSRS 2008R2 中显示 SSRS 组页眉和页脚？我们的想法是采用类似于 Crystal Reports 的方法，我们可以在其中添加组页眉/页脚，并根据分页功能在每个页面上的该部分进行自己的设计。

有谁知道SSRS中的这种方法？我应该能够显示我自己的设计/控件/数据集字段组标题区域，并且能够根据组的分页符在每个页面上看到它。如果您可以分享与该方法相关的任何视频或教程，也将不胜感激。

以下是我的场景和问题：

![预期功能](../Images/130bd1ddf4b4e18ca152c43e1f0b8173.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:20:41.873

首先，您不能在 SSRS 2008 的页眉和页脚中做很多事情，这对于这些要求来说不够灵活。

那么创建多个部分的最佳解决方法可能是将主报表拆分为多个[子报表](http://msdn.microsoft.com/en-us/library/dd220581%28v=sql.100%29.aspx)。每个子报表都可以有自己的“起始区域”，其中包含图像、文本框、汇总信息：“标题”中的任何内容。在主报告中，您可以设置[分页符](http://msdn.microsoft.com/en-us/library/dd207058.aspx)以确保每个“部分”（子报告）出现在新页面上。

这种方法的一个缺点，如本答案的第一部分所述：您不能在每一页上重复页眉，因为子报表会忽略页眉和页脚。

# javascript - 当我单击使用 observableArray 显示的 href 标记时，UI 不会刷新

> ID：12617255
> 
> 赞同：0
> 
> 时间：2012-09-27T08:36:18.743
> 
> 标签：javascript, knockout.js

我的问题是，当我单击使用 observableArray 显示的 href 标记时，它不会刷新我的 UI。我必须使用列表控件。

我有一个显示 6 个文件夹的列表控件，然后是一个显示相同 6 个文件夹和 6 个 href 标签的表格。当我更改列表框控件中的选择时，文件会被刷新，非常轻松流畅。但是，我想/需要使用 href 标签刷新这些文件。如果有人有任何答案，请告诉我。

我已经从这个位置获取了示例中的大部分代码： [knockout tutorial](http://knockoutjs.com/examples/twitter.html)

* * *

## Java 脚本文件“proto.js”：

```
 var folders = [
    { name: "Folder 3", fileNames: ['File 3_1', 'File 3_2', 'File 3_3']},
    { name: "Folder 4", fileNames: ['File 4_1', 'File 4_4', 'File 4_2', 'File 4_3'] },
    { name: "Folder 5", fileNames: ['File 5_1', 'File 5_4', 'File 5_5', 'File 5_2', 'File 5_3'] },
    { name: "Folder 6", fileNames: ['File 6_1', 'File 6_4', 'File 6_6', 'File 6_5', 'File 6_2', 'File 6_3'] },
    { name: "Folder 2", fileNames: ['File 2_2', 'File 2_1'] },
    { name: "Folder 1", fileNames: ['File 1_1'] }
];

var FileExplorerViewModel = function (lists, selectedList) {
    this.folders = ko.observableArray(lists);

    this.editingList = {
        name: ko.observable(selectedList),
        fileNames: ko.observableArray()
    };

    this.changeFolder = ko.computed({
        read: function () {
            alert("changeFolder: Read");
            return this.editingList;
        },
        write: function (folder) {
            alert("changeFolder: write");
            alert(folder.name);
            if (folder && this.editingList) {
                alert("changeFolder: Write executing");
                selectedList = folder.name;
            }
        },
        owner: this //FileExplorerViewModel
    }, this);

    this.sortFolders = function () {
        this.folders.sort(function (a, b) {
            return a.name < b.name ? -1 : 1;
        });
    };
    this.sortFiles = function () { 
        this.editingList.fileNames.sort(function (a, b) { 
            return a < b ? -1 : 1; 
        }); 
    };

    this.findSavedList = function (name) {
        var lists = this.folders();
        return ko.utils.arrayFirst(lists, function (list) {
            return list.name === name;
        });
    };

    ko.computed(function () {
        //alert("ko.computed");
        // Observe viewModel.editingList.name(), so when it changes (i.e., user selects a different list) we know to copy the saved list into the editing list
        var savedList = this.findSavedList(this.editingList.name());
        if (savedList) {
            var userNamesCopy = savedList.fileNames.slice(0);
            this.editingList.fileNames(userNamesCopy);
        } else {
            this.editingList.fileNames([]);
        }
    }, this);

};

$(document).ready(function () {
    ko.applyBindings(new FileExplorerViewModel(folders, "Folder 4"));
}); 
```

* * *

## HTML 文件：“proto.html”

```
<!

DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <title>File Explorer Prototype</title>
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.1.0.css" />
    <script type="text/javascript" src="../cordova-1.6.0.js"></script>
    <script type="text/javascript" src="../jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="scripts/knockout-2.0.0.js"></script>
    <script type="text/javascript" src="Proto.js"></script>
</head>
<body class="homeBody">

    <div class='listChooser'>
        <!--<button data-bind='click: deleteList, enable: editingList.name'>Delete</button>
        <button data-bind='click: saveChanges, enable: hasUnsavedChanges'>Save</button>-->
        <!--<select data-bind='options: folders, optionsValue: "name", value: editingList.name'> </select>-->
        <select multiple="multiple" data-bind="options: folders, optionsValue: 'name', value: editingList.name"></select>
        <button data-bind='click: $root.sortFolders'>Sort Folders</button>
        <table>
            <tbody data-bind="foreach: folders">
                <tr><td>
                    <span data-bind="text: name"></span>
                    <a href="#" data-bind="click: $root.changeFolder">Change</a>&nbsp;&nbsp;&nbsp;
                    <!--<a data-bind="attr: {href: name}, click: $root.changeFolder">Change Folder</a>-->
                    <br />
                    </td></tr>
            </tbody>
        </table>
    </div>

    <p>Currently viewing <b><font color="red"><span data-bind='text: editingList.fileNames().length'></span></font></b> file(s) from folder <b><font color="red"><span data-bind="text: editingList.name"></span></font></b>:</p>
    <button data-bind='click: $root.sortFiles'>Sort Files</button>
    <div data-bind='with: editingList'>
        <ul data-bind='foreach: fileNames'>
            <li>
                <div data-bind="text: $data"> </div>
            </li>
        </ul>
    </div>
</body>
</html> 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T02:35:30.340

您计算的所有 changeFolder 在 write is 时都在做`selectedList = folder.name`，但这不会影响其他任何事情。我想也许您打算这样做：`this.editingList.name(folder.name)`相反。这是它的工作原理：http: [//jsfiddle.net/antishok/KXhem/44/](http://jsfiddle.net/antishok/KXhem/44/)

这是可行的，但只需进行一些更改，它可能会更简单。不要基于您当前正在工作的文件夹的名称，而是基于文件夹本身。您应该很少需要使用`optionsValue`绑定，因为使用它意味着覆盖默认功能，即 KO 将每个选项映射到实际对象并将实际对象标识用作“值”。我还将计算更改为简单的订阅，并简化了`changeFolder`函数 - 没有理由让它成为可写计算。更新小提琴：http: [//jsfiddle.net/antishok/KXhem/45/](http://jsfiddle.net/antishok/KXhem/45/)

# c# - 如何从 Outlookmailitem 中获取嵌入式附件？-> 从 *.msg 文件中获取附件

> ID：12617260
> 
> 赞同：4
> 
> 时间：2012-09-27T08:36:28.683
> 
> 标签：c#, compression, outlook-addin, outlook-2007, 7zip

目前我正在用 C# 开发 Outlook 插件（Outlook 2007），我需要保存嵌入的附件（通常是 BMP 格式的图像）。

我指的是通过粘贴嵌入的附件（[CRTL]+[V]）

当我尝试保存所有附件时：

```
foreach (Outlook.Attachment a in mail.Attachments)
{

 a.SaveAsFile(path);

} 
```

我有一个 ComException （如果附件是嵌入的，否则它会正确保存）

有人可以帮助我吗 - 请;-D

* * *

*编辑* 目前我正在考虑一种解决方法。我尝试导出“OLE”对象（我认为它是 ole），但没有成功。

现在我正在测试 *.msg 导出。如果你用 7zip fileexplorer 打开 *.msg 文件，你会得到一些文件和文件夹。在“*附件*”文件夹中，您可以找到一个“内容”文件，即嵌入的 BMP 文件。但我无法使用 GZip（在 .net 中）访问 *.msg。我还尝试了 7zip SDK[示例](http://7-zip.org/sdk.html)，但出现错误 - “系统错误：功能不正确”。

如果我在 .net 中尝试 Gzip - 我会得到一个异常“坏幻数”或其他东西 - 所以问题出在文件头上。

有人可以解释我如何提取文件吗？

# c# - ItemsControl.GetContainerForItemOverride 用于什么？

> ID：12617261
> 
> 赞同：4
> 
> 时间：2012-09-27T08:36:30.460
> 
> 标签：c#, wpf

在为我遇到的问题寻找解决方案时，我遇到了`GetContainerForItemOverride()`并且我认为我不理解[文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.getcontainerforitemoverride.aspx)。

MSDN 说：

> 创建或标识用于显示给定项目的元素。

但是，没有给定的项目 - 没有参数被传递到方法中。

出于好奇 - 这种方法的目的是什么？

（我显然搜索它并无法真正找到答案）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T08:48:38.820

ItemContainerGenerator 使用此方法来获取项目的容器。每个 ItemsControl 都应指定其自己的项目容器类型。例如，ListBox 在此方法中返回 ListBoxItem 的实例。当您创建自己的 ItemsControl 时，您可以覆盖此方法并返回自定义容器。在这里您可以找到有关 ItemContainerGenerator 的更多详细信息：http: [//drwpf.com/blog/2008/07/20/itemscontrol-g-is-for-generator/](http://drwpf.com/blog/2008/07/20/itemscontrol-g-is-for-generator/)

# google-tv - Google TV 应用程序是否总是全屏显示？

> ID：12617266
> 
> 赞同：1
> 
> 时间：2012-09-27T08:36:47.780
> 
> 标签：google-tv

我正在比较智能电视平台开发应用程序的方式，我想知道谷歌电视应用程序是否仅在“全屏”模式下可用？换句话说，占据了整个屏幕。三星智能电视提供三种不同的应用程序布局，请参阅链接： http: [//www.samsungdforum.com/upload_files/files/guide/data/html/html_2/getting_started/intro_to_samsung_smarttv_apps.html](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_2/getting_started/intro_to_samsung_smarttv_apps.html)

全屏、单宽应用程序和自动收报机。这指定了应用程序在屏幕上占用了多少空间，因此用户可以在使用应用程序时例如看电视，因为应用程序只占用屏幕的一部分。

我发现了这个常见问题解答：

**我可以在我的 Google TV Android 应用程序中使用画中画 (PIP) 吗？** 不可以。画中画 (PIP) 功能仅适用于直播电视。您不能在 Android 应用程序中使用它，也不能在 PIP 窗口中运行 Android 应用程序。

从那个答案我想说谷歌电视应用程序只能在全屏模式下使用。我对吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:01:09.973

是的，它们只能在全屏模式下运行。也就是说，只有一个应用程序可以在特定时间获得焦点。但是，您可以使您的应用程序在大多数情况下透明，以允许其下方的任何内容显示出来。这篇文章有一个很好的解决方案[全屏透明活动（没有标题和状态栏）不起作用....为什么？](https://stackoverflow.com/questions/8623605/full-screen-transparent-activity-no-title-status-bar-doesnt-work-why)

# php - PHP - 需要调试

> ID：12617267
> 
> 赞同：3
> 
> 时间：2012-09-27T08:36:50.317
> 
> 标签：php, debugging, require, require-once

我在使用`require`或`require_once`调用后代码停止执行时遇到一些问题，我正在努力找出导致问题的确切原因。

我已经检查了文件是否存在并且可以读取（通过`file_exists`和`is_readable`），但是这两个似乎都是真的，所以我有点难过。

```
require_once('file1.php');
print('a');
$file = 'file2.php';
if (!file_exists($file)) { die('file does not exist'); }
if (!is_readable($file)) { die('cannot read file'); }
require_once($file);
print('b'); 
```

上面的代码只输出'a'，之后什么也没有。

服务器上的另一个文件以相同的方式使用有问题的两个文件，没有问题。

还有什么我可以检查的吗？

任何帮助，将不胜感激。

编辑：

设置`error_reporting(E_ALL)`不会改变输出。

将文件路径更改为同一目录中的空白文件会将输出更改为“ab”，表明 require 已经工作并表明它们是 的问题`file2.php`，但是服务器上的另一个文件以完全相同的方式成功使用了这些文件。

运行`php -l`file2.php 不会返回错误。

注释掉第一个要求没有任何区别。

编辑2：

问题在于调用`class_exists`和版本 5.0 中的行为更改与自动加载有关。有问题的代码是在升级到 5.0 之前编写的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:40:37.557

设置`error_reporting(E_ALL)`并尝试包含一个空文件而不是`file2.php`.

也许`file2.php`有一些错误会阻止流程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:44:07.527

`file2.php`您的文件中的某处可能存在错误。您应该启用错误报告：

```
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors', 1); 
```

失败时的错误报告级别`require_once`将是`E_COMPILE_ERROR`

**UPDATE** 检查是否`file1`和`file2`定义函数同名，或者有其他不兼容的逻辑。

# xml - xmlParse 上的错误 - ColdFusion IIS 6

> ID：12617269
> 
> 赞同：0
> 
> 时间：2012-09-27T08:37:01.600
> 
> 标签：xml, parsing, coldfusion, iis-6

几天来我一直试图找到这个问题的答案，但现在正在苦苦挣扎。

我有一个在 windows 2003 iis6 中运行的 Coldfusion MX 6.1 应用程序设置。几天前试图解决另一个问题，我以某种方式设法删除了应用程序上各种目录的权限映射，经过大量汗水，我放弃了尝试恢复。

我的解决方案是复制应用程序并重新配置 iis 下的权限。

这已经奏效，但是当我现在尝试访问该应用程序时，它将不再解析 XML（RSS 提要）。

该应用程序尚未更改，因此我认为这是 iis6 中的配置问题。

错误是：`Next character must be ">" terminating declaration "%HTML.Version".`

但我认为这是一个红鲱鱼。我确定我最初部署应用程序时遇到了这个问题，但我不记得解决方案是什么。是 MIME 类型问题吗？

我还应该补充一点，当我尝试从新站点解析原始站点中的文件时（即，我将端口 8080 用于新站点，将端口 80 用于旧站点），这也有效。一旦我关闭旧站点并将新站点上的端口更改为端口 80，xmlParse 就会引发错误。

任何人都可以帮助或指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:14:22.810

要进行故障排除，您需要能够手动运行解析 XML 的函数，并拥有一个在使用时出错的已知工作文件。为方便起见，我会让您的 XML 文件尽可能简单，这样就不必深入文件的多个部分来试图找出错误所在。

首先删除 XML 文件中的所有数据，只留下 DTD 和第一级数据标记，这应该是空的。如果未能成功运行，您的问题可能出在您的配置设置中；否则它在你的 XML 中。

如果它在您的 XML 中，则开始重新添加数据，一次一个级别，最深的向下钻取保持为空，然后再次运行它，直到遇到错误；那将是导致问题的文件的一部分。如果您在已知工作的 XML 文件中看不到错误是什么，请在此处显示它，并且应该有人能够弄清楚。

# html - 使用 AJAX POST 到两个位置

> ID：12617273
> 
> 赞同：0
> 
> 时间：2012-09-27T08:37:08.843
> 
> 标签：html, ajax, post

在网页上，我有一个按钮，可以向与我没有任何关系的服务器发送 POST。当有人单击该按钮时，我需要更新我的（另一台）服务器上的一些数据，以便当用户最终被重定向回来时，将显示正确的信息。这是AJAX可以做到的吗？

非常感谢，TA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:12:01.690

当然。

使用 Jquery，它将是这样的：

```
 var url1 = $.post("url1", {...});
 var url2 = $.post("url2", {...});

 $.when(url1, url2).then(function() {
      // Action when the two posts are back
 }); 
```

如果另一个网址不重要，您也可以只对其中一个网址采取行动。

# java - 根据配置文件在不同的 jar 中在 Eclipse 中构建相同的项目

> ID：12617275
> 
> 赞同：-2
> 
> 时间：2012-09-27T08:37:12.890
> 
> 标签：java, eclipse, build, jar, profile

我将服务器和客户端代码保存在 Eclipse 的同一个项目中。他们两个的库都包括在内。客户端的图像也被添加到构建路径中。

现在我想为服务器和客户端生成 jar，它们只包含必需的库，而服务器 jar 不包含图像。

有没有办法在没有 Maven 等的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:42:13.037

右键单击项目并转到导出。从选择树中选择 jar，然后在下一个选项卡中，删除您不希望包含在 jar 中的代码/资源。如果将它们保存在单独的项目中会更好（即使没有客户端 java 代码，您也可以创建资源项目）。

但是，您所描述的内容听起来很像 WAR 文件。与 jar 不同，WAR 文件是一个可部署的 jar，旨在添加到[Tomcat](http://tomcat.apache.org/)等 Web 托管应用程序中。我不知道这是否适合您的需求，但通常情况下，您希望同时拥有服务器和客户端代码。如果您的项目依赖于另一个项目，该项目将自动创建一个将包含在 WAR 中的 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:43:35.027

您可以在同一项目中将源分成三个源（和输出）文件夹：

*   src 共享
*   源服务器
*   src-客户端

然后创建一个`build.xml`（Ant buildfile），它从 + 创建一个 jar 并从+创建`bin-shared`一个jar 。`bin-server``bin-shared``bin-client`

* * *

注意：将其保留在同一个项目中的一个危险是您可能会意外地使用服务器类中的客户端类，反之亦然，这将在运行时失败。要解决此问题，请创建三个项目而不是三个源文件夹。

# c# - 如何检查对象是否为列表枚举类型对象？

> ID：12617280
> 
> 赞同：2
> 
> 时间：2012-09-27T08:37:22.257
> 
> 标签：c#, list, enums

我有一个对象，它可以是不同枚举类型或非枚举类型（普通类实例）的列表。

验证对象是否是列表很容易：

```
myobject is IList 
```

现在我可以验证列表元素的类型：

```
(myobject as IList)[0].GetType().IsEnum 
```

但是如果我还没有元素，如何验证我的列表元素是否是枚举？

```
if (myobject is IList)
{ 
    if ((myobject as IList).Count > 0)
    {
        if ((myobject as IList)[0].GetType().IsEnum)
            return true;
    }
    else
    {
        // how to check if the list is enum list here ?
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T08:40:14.733

IList 可以包含它想要的任何类型，因此如果您没有任何内容，则无法检查。如果您实际上有一个泛型类型，您可以使用 Type 的 GetGenericArguments 方法进行检查。（添加 GetInterface 以防您有实现 IList 但没有 IList 类型的东西，因为它是第一个通用参数）。

```
 myobject.GetType().GetInterface("System.Collections.Generic.IList").GetGenericArguments()[0].IsEnum 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T08:39:42.957

您可以查看索引器的[`PropertyType`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.propertytype.aspx)via [`Type.GetProperty`](http://msdn.microsoft.com/en-us/library/efekk662%28v=vs.80%29.aspx)：

```
List<int> list = new List<int>(); // an empty List<T>
Type type = list.GetType().GetProperty("Item").PropertyType; // System.Int32
bool isEnum = type.IsEnum; // of course false

List<DayOfWeek> days = new List<DayOfWeek>();
type = days.GetType().GetProperty("Item").PropertyType;
isEnum = type.IsEnum; // true 
```

演示：http: [//ideone.com/3JyEf](http://ideone.com/3JyEf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T08:40:48.883

只有 IList 你不能这样做 - IList 不保证其中的对象类型，也不会让你知道它会接受的对象类型。

如果可能，请考虑使用通用版本`IList<T>`- 您将能够获得列表中没有元素的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T08:45:33.250

除非您的列表是通用列表，否则您不能，因为非通用列表可能包含任何对象。

如果列表是泛型的，则检查枚举类型的泛型类型参数。

如果 list 不是通用的，请尝试通过检查 或 indexer 方法的参数来解析项目`Add`类型`IndexOf`。这是一种非常丑陋的方法，但可能会给你一个线索，因为许多旧的实现继承`List`了对象并添加了`Add`重载，或者一些新的和惰性的实现可能被用来隐藏泛型参数，如`public class MyObjectList: List<MyObject> {}`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T08:50:02.820

大家提出的解决方案：

```
IList<Days> list = new List<Days>();

if (list is IList<Days>)
{
    Console.WriteLine("list has days");
} 
```

# vba - Sheet.Activate 在 Office 2010 中不起作用 - 64 位

> ID：12617282
> 
> 赞同：0
> 
> 时间：2012-09-27T08:37:30.117
> 
> 标签：vba, excel

我创建了一个在我的机器上完美运行的宏（Windows 64 位和 Office 32 位）

但客户面临问题。他有 Windows 64 位和 Office 64 位。

不知道为什么，但`Sheet.Activate`不在他的机器上工作。请参阅下面的屏幕打印。

![在此处输入图像描述](../Images/893808ecc41871c5358518c2a766f7d3.png)

![在此处输入图像描述](../Images/1784ee66660ec61c741c784f54953eac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:19:31.677

根据您的输入，我找不到“记录表”的声明。由于您在事件例程“Workbook_open”中输入了此代码，我怀疑您是否在任何地方进行了声明。

如果你想申请

```
RecordSheet.Activate 
```

你至少应该做的是：

```
Set oRecordSheet = thisworkbook.sheets("Records") 
oRecordSheet.activate 
```

我强烈怀疑您的 Office / Windows 版本与它有什么关系。Microsoft 不再支持 Vba，并且没有对该语言进行进一步的开发。

如果它是客户，请考虑该客户可能已更改工作表名称的可能性。
如果您正确设置了工作表对象，这也可能是问题的根源。

**编辑：**

在查看您通过邮件收到的文件后，我确认上述解决方案修复了该错误。
更换整个

```
UserForm_Initialize 
```

子程序：

```
Private Sub UserForm_Initialize()

    Dim oRecordSheet As Excel.Worksheet

    Set oRecordSheet = ThisWorkbook.Sheets("Expense Report")
    oRecordSheet.Activate
    EnableDisableConrols (False)
    Call FillDropDowns
    Navigator.Max = RecordSheet.UsedRange.Rows.Count
    If RecordSheet.UsedRange.Rows.Count = 1 Then
        RowNumber = 1
    Else
        RowNumber = 2
        Call FillDataIntoControls
    End If

End Sub 
```

编辑 2：上述解决方案是正确的，但是，如果您的工作表的**代号**确实设置为 RecordSheet，您也可以使用此解决方案。但是请注意，代号只能与工作簿一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T22:20:45.613

您的代码的第一行显示一个`UserForm`. 一些广泛使用的表单控件（在`ComCtl`库中定义的那些）在 64 位版本的 Office 中不存在，因此很可能`UserForm`是问题所在。

除非您可以说服客户改用 32 位 Office 或更改您的`UserForm`以便不使用受影响的控件，否则没有简单的解决方案。

受影响的控件有：ImageCombo、ImageList、ListView、ProgressBar、Slider、StatusBar、TabStrip（虽然普通库中有TabStrip的替代版本`MSForms`）、Toolbar、Treeview

[此线程](http://social.technet.microsoft.com/Forums/en-US/officeappcompat/thread/f3a71d69-580b-4cdb-ae0b-d8189e6cfd40)中讨论了问题的详细信息并[在此处](http://office.microsoft.com/en-us/word-help/choose-the-32-bit-or-64-bit-version-of-office-HA010369476.aspx#_Toc254341419)确认

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:57:26.260

我认为可能缺少参考。

转到`Tools`-> `References`，看看是否有任何被列为缺失

![例子](../Images/0b629356d92490fe8aa1f154cd5d5e77.png)

删除那里的复选标记，基本的东西`date`就会重新开始工作。如果这些引用对您正在运行的代码至关重要，则必须搜索 64 位等效项

有关参考的更多信息 - 通常解决“缺失”可以修复它，但是，从[这里](http://forums.devx.com/archive/index.php/t-63738.html)

您所描述的是典型的损坏引用。这可能是由于引用的文件是不同的版本或位于开发代码的机器和客户端机器之间的不同位置。我们公司还尝试保持所有机器的配置方式相同，但我发现这基本上是不可能管理的。

打开任何代码模块（或使用 Ctrl-G 打开调试窗口，前提是您尚未选择“将调试窗口保持在顶部”选项）。选择工具 | 来自菜单栏的引用。检查所有选定的参考。

如果任何选定的参考文献前面有“MISSING:”，请取消选择它们，然后退出对话框。如果您确实需要刚刚取消选择的参考（您可以通过编译所有模块来判断），请返回并重新选择它们。

如果没有“MISSING：”，请随机选择一个附加参考，退出对话框，然后返回并取消选择刚刚添加的参考。如果这不能解决问题，请尝试尽可能多地取消选择已选择的引用（Office 可能不允许您全部取消选择），退出对话框，然后返回并重新选择刚刚取消选择的引用。（注意：在删除它们之前写下引用的内容，因为当您返回时它们的顺序会有所不同）

（作为旁注，消除歧义为 VBA.xxxx 将起作用，因为 Excel 不再需要查看所有引用。）

# php - 如何在php中更改时区？

> ID：12617288
> 
> 赞同：2
> 
> 时间：2012-09-27T08:37:53.597
> 
> 标签：php, mysql, date

您好，我有 hostgator 网络托管，因为他们的服务器在美国，而我住在欧洲，所以我在 php 中的时区是 USA。我如何更改时区，因为我在 mysql 中插入了日期和时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T08:38:52.403

你可以`date_default_timezone_set`在php中使用

例子

```
 date_default_timezone_set('Europe/Vienna'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:40:36.233

请用

```
date_default_timezone_set 
```

[http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

以下链接将帮助您找到您的欧洲时区

[http://php.net/manual/en/timezones.europe.php](http://php.net/manual/en/timezones.europe.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:40:42.503

如果您使用的是 DateTime 对象，请使用`date_timezone_set` [http://php.net/manual/en/datetime.settimezone.php](http://php.net/manual/en/datetime.settimezone.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:38:23.080

ini_set('date.timezone', 'America/Los_Angeles');

[http://www.electrictoolbox.com/php-change-timezone/](http://www.electrictoolbox.com/php-change-timezone/)

更改时区的其他方式。

# jquery - 将 JSON 对象捕获为单个字符串

> ID：12617289
> 
> 赞同：0
> 
> 时间：2012-09-27T08:37:59.227
> 
> 标签：jquery, asp.net-mvc, json

我将一个 JSON 对象发布到 asp.net mvc 控制器操作，如下所示。控制器操作自动将 json 变量绑定到单个对象。虽然这是一个很好的功能，但我的要求是将传入的 json 字符串“原样”捕获到单个字符串对象中并将其存储在数据库中。我的问题是如何覆盖默认行为并以单个字符串获取传入的 json 对象？

看法

```
$.ajax({
            type: "POST",
            url: "@(storeLocation)IDR/OpcInsertCustomerProfile/",
            data: JSON.stringify(currSelection),
            contentType: "application/json",
            success: function(data) {
              alert('success : ' + JSON.stringify(data));
            },
            error: function(data) {
             alert('Error : ' + JSON.stringify(data));
            }
          }
        ); 
```

控制器

```
[HttpPost]
        [ActionName("OpcInsertCustomerProfile")]
        public JsonResult OpcInsertCustomerProfile(string jsonProfile)
        {
            try
            {
                JavaScriptSerializer ser = new JavaScriptSerializer();
                return Json(jsonProfile, JsonRequestBehavior.AllowGet);

            }
            catch (Exception exc)
            {
                return Json(new { error = 1, message = exc.Message });
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:21:43.113

您可以尝试类似的方法将您的内容转换回 json

```
System.Web.Script.Serialization.JavaScriptSerializer oSerializer = 
     new System.Web.Script.Serialization.JavaScriptSerializer();

string sJSON = oSerializer.Serialize(oList);

[{"Name":"Pini","Age":"30","ID":"111"},
{"Name":"Yaniv","Age":"31","ID":"Cohen"},
{"Name":"Yoni","Age":"20","ID":"Biton"}] 
```

[参考这里](http://blogs.microsoft.co.il/blogs/pini_dayan/archive/2009/03/12/convert-objects-to-json-in-c-using-javascriptserializer.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:43:18.260

使用该`HttpRequest`对象，有一个表单变量集合，您可以从该对象获取原始数据。

```
string rawdata = Request.Form["variable name"]; 
```

您必须找到变量名称。

您可以使用调试器查看此内容。

# c# - 调整绘制矩形的大小以适合原始图像

> ID：12617297
> 
> 赞同：1
> 
> 时间：2012-09-27T08:38:37.573
> 
> 标签：c#, wpf, crop, rectangles, imaging

我正在开发一个应用程序来处理在宽幅图像扫描仪上扫描的图像。这些图像显示为 a`ImageBrush`上的 a `Canvas`。在此`Canvas`他们可以`Rectangle`用鼠标来定义要裁剪的区域。

我的问题是`Rectangle`根据原始图像大小调整大小，以便裁剪原始图像上的确切区域。

到目前为止，我已经尝试了很多事情，只是在挤压我的大脑，找出正确的解决方案。
我知道我需要获得原始图像比画布上显示的图像大的百分比。

原始图像的尺寸为：

> 小时：5606 瓦
> ：7677

当我展示图片时，它们是：

> 小时：1058,04 瓦
> ：1910

这给出了这些数字：

```
float percentWidth = ((originalWidth - resizedWidth) / originalWidth) * 100;
float percentHeight = ((originalHeight - resizedHeight) / originalHeight) * 100;

percentWidth = 75,12049
percentHeight = 81,12665 
```

从这里我无法弄清楚如何`Rectangle`正确调整大小以适合原始图像。

我的最后一种方法是：

```
int newRectWidth = (int)((originalWidth * percentWidth) / 100);
int newRectHeight = (int)((originalHeight * percentHeight) / 100);
int newRectX = (int)(rectX + ((rectX * percentWidth) / 100));
int newRectY = (int)(rectY + ((rectY * percentHeight) / 100)); 
```

希望有人能引导我朝着正确的方向前进，因为我在这里偏离了轨道，我看不到我错过了什么。

**解决方案**

```
 private System.Drawing.Rectangle FitRectangleToOriginal(
        float resizedWidth,
        float resizedHeight,
        float originalWidth,
        float originalHeight,
        float rectWidth,
        float rectHeight,
        double rectX,
        double rectY)
    {
        // Calculate the ratio between original and resized image
        float ratioWidth = originalWidth / resizedWidth;
        float ratioHeight = originalHeight / resizedHeight;

        // create a new rectagle, by resizing the old values
        // by the ratio calculated above
        int newRectWidth = (int)(rectWidth * ratioWidth);
        int newRectHeight = (int)(rectHeight * ratioHeight);
        int newRectX = (int)(rectX * ratioWidth);
        int newRectY = (int)(rectY * ratioHeight);

        return new System.Drawing.Rectangle(newRectX, newRectY, newRectWidth, newRectHeight);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:42:04.250

我认为唯一可靠的选择是让您的用户放大图像（100% 或更高的缩放级别）并选择图像的一部分。通过这种方式，他们可以进行精确的基于像素的选择。（假设您选择矩形的目的是选择图像的一部分。）

您现在的问题是您正在使用浮点计算，因为 75% 的缩放级别和舍入错误会使您的选择矩形不准确。无论您做什么，当您尝试在缩小的图像上进行选择时，您都没有选择精确的像素 - 您在调整矩形大小时选择了部分像素。由于无法选择部分像素，因此选择边缘将向上或向下舍入，因此您在给定方向上选择一个像素太多或一个像素太少。

我刚刚注意到的另一个问题是你扭曲了你的图像——水平是 75%，垂直是 81%。这对用户来说更加困难，因为图像在两个方向上的平滑度会有所不同。水平方向 4 个原始像素将插值在 3 个输出像素上；垂直 5 个原始像素将在 4 个输出像素上插值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:44:09.007

你实际上是在做一种投影。不要使用百分比，只需使用 5606 和 1058,4 = ~5.30 之间的比率。当用户拖动矩形时，将其重新投影为`selectedWidth * 5606/1058.4`.

# android - 以编程方式在相对布局中定位按钮

> ID：12617298
> 
> 赞同：2
> 
> 时间：2012-09-27T08:38:37.310
> 
> 标签：android, android-layout, button, android-widget, android-button

这是我正在使用的布局 XML。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/tabTransparent"
    android:id="@+id/aLayoutRelative">

    <LinearLayout
        android:id="@+id/linearLayout8"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/linearLayout7"
        android:layout_below="@+id/linearLayout7"
        android:layout_marginTop="14dp" >

        <Button
            android:id="@+id/button5"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/text_accounts_aHistoryNotes" />
    </LinearLayout>

</RelativeLayout> 
```

我想以编程方式在 java 源代码中添加按钮。这是我尝试过的。

```
RelativeLayout relativeLayout = (RelativeLayout)findViewById(R.id.aLayoutRelative);
LinearLayout lastLinearLayout = (LinearLayout)findViewById(R.id.linearLayout8);
lastLinearLayout.setOrientation(LinearLayout.HORIZONTAL);

LinearLayout linearLayout = new LinearLayout(this);
linearLayout.setOrientation(LinearLayout.HORIZONTAL);
LayoutParams layoutParams = new LayoutParams(LayoutParams.FILL_PARENT,       LayoutParams.WRAP_CONTENT);
layoutParams.addRule(RelativeLayout.LEFT_OF, lastLinearLayout.getId());
layoutParams.addRule(RelativeLayout.BELOW, lastLinearLayout.getId());
layoutParams.setMargins(0, 14, 0, 0);
linearLayout.setLayoutParams(layoutParams);

Button button9 = new Button(this);
Log.i("tab0", recordTabs.get(0));
button9.setText(""+recordTabs.get(0));
button9.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
linearLayout.addView(button9);
relativeLayout.addView(linearLayout); 
```

但是在视图中，按钮是垂直的，上面没有文字；向页面左侧对齐（实际上是向相对布局）。XML 版本运行良好。我认为方向设置是罪魁祸首。在各种文档中搜索几乎没有帮助。

有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:00:56.847

你想达到什么目的？

首先，删除

```
layoutParams.addRule(RelativeLayout.LEFT_OF, lastLinearLayout.getId()); 
```

所以你至少可以看到下面的按钮。

为什么要将按钮放置在线性布局中？

# c++ - 将数据从一个矩阵复制到另一个矩阵

> ID：12617308
> 
> 赞同：1
> 
> 时间：2012-09-27T08:39:09.893
> 
> 标签：c++, pointers, matrix, copy

在 C++ 中，我试图将数据从一个矩阵复制到另一个矩阵。我的代码如下：

```
int data[height][width];
void MyCode::setData ( int newData[height][width] )
{   
    for ( int i = 0; i < height; i ++ )
    {
        for ( int j = 0; j < width; j ++ )
        {
            data[i][j] = newData[i][j];
        }   
    }       
} 
```

我的问题是，这些“for”循环太耗时了，代码就停在这里（可能内存超载，我正在读取视频帧）。我想知道如何使用指针，如下所示：

```
int* data[height][width];
void MyCode::setData ( int* newData[height][width] )
{   
     data = newData;
} 
```

但它没有用，我不知道原因。有人可以为此建议我更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:41:38.963

解决此问题的一种方法是使用大小为宽度 * 高度的一维数组。这样您就可以轻松地 memcpy 两者之间的数据。

通过执行以下操作，很容易从行和列中计算出一维数组中的最终位置：

```
int index = column + (row * width); 
```

编辑：如果您必须使用二维数组，则必须知道其中一个维度。

因此，您可以执行以下操作：

```
int data[height][width];
void MyCode::setData ( int (*newData)[width] )
{   
    for ( int i = 0; i < height; i ++ )
    {
        for ( int j = 0; j < width; j ++ )
        {
            data[i][j] = newData[i][j];
        }   
    }       
} 
```

在 C++ 中，你最好使用基于模板的解决方案之类的东西，就像你传入一个高度尺寸错误的数组一样，你会遇到问题，编译器不会捕捉到它。

周围有很多模板矩阵库。例如：

[http://sourceforge.net/projects/tmv-cpp/](http://sourceforge.net/projects/tmv-cpp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:48:25.767

看看 Boost 的多维数组。它可能实现了更有效的复制操作：

[http://www.boost.org/doc/libs/1_51_0/libs/multi_array/doc/user.html](http://www.boost.org/doc/libs/1_51_0/libs/multi_array/doc/user.html)

另外，我想看看 Blitz++。该库使用 c++ 中的模板元编程来消除临时变量，并且它们可能已经很好地优化了此类矩阵运算。这是他们的项目所述：

> Blitz++ 是一个用于科学计算的 C++ 类库，提供与 Fortran 77/90 相当的性能。它使用模板技术来实现高性能。Blitz++ 提供密集数组和向量、随机数生成器和小向量（用于表示多分量或向量场）。

[http://blitz.sourceforge.net/](http://blitz.sourceforge.net/)

希望有帮助！

# c# - WP7通过代码打开电子邮件+帐户寻呼机

> ID：12617309
> 
> 赞同：0
> 
> 时间：2012-09-27T08:39:15.250
> 
> 标签：c#, windows-phone-7, email, account

是否可以从我自己的应用程序以编程方式打开[电子邮件+帐户页面](http://www.wingadgetnews.com/wp-content/uploads/2012/01/wp7-add-outlook-2.jpg)，让用户创建一个新的社交帐户？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:58:38.010

不，这是不可能的。您只能启动[几个任务](http://www.c-sharpcorner.com/UploadFile/iersoy/task-system-in-windows-phone-7/)

*   相机捕捉任务
*   电子邮件地址选择器任务
*   市场搜索任务
*   市场中心任务
*   媒体播放器启动器
*   电话任务
*   电话号码选择器任务
*   照片选择器任务
*   搜索任务
*   短信撰写任务
*   网络浏览器任务

# c++ - 如何获取进程中的计时器数量？

> ID：12617314
> 
> 赞同：1
> 
> 时间：2012-09-27T08:39:23.703
> 
> 标签：c++, c, linux, timer, ulimit

我遇到了与此处描述的完全相同的问题：

[timer_create() : -1 EAGAIN (资源暂时不可用)](https://stackoverflow.com/questions/8179427/timer-create-1-eagain-resource-temporarily-unavailable)

简而言之，一些进程通过 timer_create 保留了很多计时器，但从不释放它们。我无法弄清楚的是如何确定我们的生产环境中受泄漏影响的过程。

我怎么能知道哪个进程是坏进程，而不随机杀死所有正在运行的东西？

任何*/proc/`pidof myprocess`/*调试信息告诉我保留了多少计时器？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:01:43.707

为什么是的，实际上。使用该[`stap`](http://linux.die.net/man/1/stap)工具跟踪系统调用并确定进程最常进行的调用。

[SystemTap 初学者指南](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/SystemTap_Beginners_Guide)是一个很好的资源。特别是，请参阅[此页面](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/SystemTap_Beginners_Guide/timeoutssect.html)上的脚本以获取计算每个进程的特定系统调用的示例。

# php - 如何联合两个查询

> ID：12617315
> 
> 赞同：0
> 
> 时间：2012-09-27T08:39:25.110
> 
> 标签：php, mysql

*SQL*

```
SELECT IFNULL(parent, id) as p
FROM article_comments
WHERE article_id = 3
GROUP BY p LIMIT 8 
```

*PHP*

```
foreach ($result AS $data)
{
    $parents .= $data['p'] . ',';
} 
```

*SQL*

```
SELECT 
    *,
    IFNULL(parent, id) AS p,
    IFNULL(reply_comment_id, id) AS r
    FROM article_comments
WHERE IFNULL(parent, id) IN('.$parents.') AND article_id = 3
ORDER BY p ASC, r ASC, date DESC 
```

如何在不使用 PHP 的情况下合并两个查询？（限制 8 很重要！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:50:55.120

## 1.带子查询

```
SELECT 
    *,
    IFNULL(parent, id) AS p,
    IFNULL(reply_comment_id, id) AS r
FROM
    article_comments
WHERE
    IFNULL(parent, id) IN (
        SELECT IFNULL(parent, id)
        FROM article_comments
        WHERE article_id = 3
        GROUP BY p
        LIMIT 8
    ) AND 
    article_id = 3
ORDER BY 
    p ASC, 
    r ASC, 
    date DESC 
```

## 2.带临时表

```
CREATE TEMPORARY TABLE _temp ( p INT(10) NULL );

INSERT INTO _temp
SELECT IFNULL(parent, id)
FROM article_comments
WHERE article_id = 3
GROUP BY p
LIMIT 8;

SELECT 
    *,
    IFNULL(parent, id) AS p,
    IFNULL(reply_comment_id, id) AS r
FROM
    article_comments
WHERE
    IFNULL(parent, id) IN (
        SELECT p
        FROM _temp
    ) AND 
    article_id = 3
ORDER BY 
    p ASC, 
    r ASC, 
    date DESC;

DROP TABLE _temp; 
```

ps不要为你的表字段使用mysql保留字（比如日期）

# ios - 如何将录制的文件保存在自己的ios目录中？

> ID：12617317
> 
> 赞同：1
> 
> 时间：2012-09-27T08:39:28.697
> 
> 标签：ios, ipad, avcam

您好我想录制视频并存储到本地自己创建的目录中。所以我按照这个链接[http://developer.apple.com/library/ios/#samplecode/AVCam/Listings/Read_Me_txt.html](http://developer.apple.com/library/ios/#samplecode/AVCam/Listings/Read_Me_txt.html)。我可以成功运行这个项目。但它存储在照片库中。但我想存储到我自己创建的目录中。我怎样才能做到这一点？有谁能够帮我？提前致谢。

# perl - perl 中的文件句柄是全局的吗？

> ID：12617318
> 
> 赞同：4
> 
> 时间：2012-09-27T08:39:30.617
> 
> 标签：perl

```
#!/usr/local/bin/perl
sub trial
{
    open (LOGFILE, 'C:\Users\out.txt');
    trial();
}
trial(); 
```

*请忽略它会进入无限循环。*

文件句柄`LOGFILE`是本地的还是私有的？如果没有，我怎样才能将其设为私有/本地？我知道**我**的. 但我不知道如何在文件句柄上使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T08:42:44.860

这些文件句柄是全局的，因为它们是[typeglobs](http://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles)。这有时会导致非常糟糕的意外，因为您可能会意外覆盖在您正在使用的某个模块中定义的此类文件句柄。

如果你想要词法文件句柄，`my`像这样定义它们：

```
open my $fh, '<', 'C:\Users\out.txt'; 
```

也可以看看：

*   [哪个是好的做法，词法文件句柄或类型球？](https://stackoverflow.com/questions/3276674/which-one-is-good-practice-a-lexical-filehandle-or-a-typeglob)
*   [brian d foy 在*Learning Perl中谈“为什么我们教裸字文件句柄”*](http://www.learning-perl.com/?p=235)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T08:42:35.000

词法文件句柄只是标准的`my`标量。[请参阅perldoc 中`open`](http://perldoc.perl.org/functions/open.html)的示例以获取.

```
open (my $logfile, 'C:\Users\out.txt'); 
```

一般来说，三自变量形式`open`也是首选：

```
open (my $logfile, '<', 'C:\Users\out.txt'); 
```

# visual-c++ - 具有多个窗口的 opencv 应用程序 - 只有具有焦点的窗口会不断刷新

> ID：12617320
> 
> 赞同：1
> 
> 时间：2012-09-27T08:39:33.703
> 
> 标签：visual-c++, opencv

我正在开发一个 C++ 应用程序，它使用 opencv 进行一些数据操作和可视化。我使用三到四个`cvShowImage()`语句来可视化数据。我最近注意到，只有具有焦点的窗口才会在每次`cvShowImage()`调用后不断更新。所有其他窗口仅不经常更新。有没有办法确保所有 opencv 窗口都得到刷新和更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:20:37.597

如果您还没有，我建议`cvWaitKey(30)`在每个之后发布一个`cvShowImage()`，而不仅仅是在最后一个之后发布一次。或者您可以尝试[在一个窗口中显示所有图像](http://opencv.willowgarage.com/wiki/DisplayManyImages)。

# android - 录制高清视频 Galaxy SII 时 Android 崩溃

> ID：12617321
> 
> 赞同：0
> 
> 时间：2012-09-27T08:39:35.317
> 
> 标签：android, camera, mediarecorder, android-mediarecorder

尝试使用以下设置 fps > 15、分辨率 1080p 设置 MediaRecorder 时，

on 方法`recorder.prepare()`设备挂起，然后 Android 崩溃。

Galaxy SII 可以录制 1080p 分辨率的视频吗？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-15T07:15:45.753

这是无法在移动设备上播放高清视频的原因 [http://cyber-progo.blogspot.in/2013/04/why-we-cannot-record-hd-videos-on-any.html](http://cyber-progo.blogspot.in/2013/04/why-we-cannot-record-hd-videos-on-any.html)

# java - 为什么Gradle的java编译classpath不包含指定的依赖

> ID：12617327
> 
> 赞同：2
> 
> 时间：2012-09-27T08:39:48.727
> 
> 标签：java, gradle

我正在使用 gradle 构建一个 groovy/java 应用程序。在我向 google guice 3.0 添加依赖项之前，这一直很好。Gradle 不会将 guice jar 添加到编译类路径中，至少看起来是这样。我收到如下错误：

```
C:\dev\workspaces\initial>gradle -q compileJava
C:\dev\workspaces\initial\src\main\java\com\comp\test\solmon\di\GuiceDI.java:3: package com.google.inject does not exist
import com.google.inject.Guice;
                    ^
C:\dev\workspaces\initial\src\main\java\com\comp\test\solmon\di\GuiceDI.java:4: package com.google.inject does not exist
import com.google.inject.Injector; 
```

在我的 build.gradle 文件中，我有以下依赖项：

```
dependencies{
    runtime 'com.beust:jcommander:1.27'
    runtime "org.slf4j:slf4j-api:1.7.1"
    runtime "ch.qos.logback:logback-classic:1.0.7"
    runtime 'com.google.inject:guice:3.0'
    testRuntime 'junit:junit:4+'
} 
```

我正在使用其 gradle 插件在 Springsource Tool Suite 2.9.2 中开发应用程序，它使用 gradles 依赖项管理来获取所有依赖项。Sts 设法编译代码就好了，只有 gradle 失败了。我尝试使用“--debug”参数运行 gradle 编译，但我看不到 gradle 提供给编译器的类路径。

任何想法如何让 gradle 编译我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:20:53.270

您已将 Guice 添加到*运行时*依赖项（即*运行*应用程序所需的依赖项，但不是*编译*它）。将其添加到编译依赖项中：

```
dependencies {
    ...
    compile 'com.google.inject:guice:3.0'
} 
```

显然，编译依赖也是运行时依赖。

# python - 在 Plone 中的字段上移动不变验证错误消息

> ID：12617328
> 
> 赞同：4
> 
> 时间：2012-09-27T08:39:54.297
> 
> 标签：python, validation, plone, dexterity, z3c.form

我正在灵活地使用 Plone，并且正在使用不变装饰器验证 2 个相关字段。一切正常，但是...我想将通用错误消息移到一个特定字段上。

我怎样才能做到这一点？我发现了 Martin Aspeli 三年前提出的关于这样做会很酷的建议：

[http://plone.293351.n2.nabble.com/plone-app-form-does-not-display-invariant-errors-td348710.html](http://plone.293351.n2.nabble.com/plone-app-form-does-not-display-invariant-errors-td348710.html)

但他们没有提出解决方案。

我也找到了一种方法来做到这一点，但它很丑：将这个代码放在表单的更新方法上：

```
for widget in widgets:
    name = widget.context.getName()
    if errors:
        for error in errors:
            if isinstance(error, Invalid) and name in error.args[1:]:
                if widget._error is None:
                    widget._error = error 
```

是不是有一个较低级别的实现允许将字段的名称传递给引发的 Invalid 并且不需要循环遍历所有字段和每个字段的所有错误？！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:51:13.603

您可以通过在表单的操作处理程序中进行额外的验证来做到这一点，并引发 WidgetActionExecutionError 指定应显示错误的小部件。

这看起来如下（取自[http://plone.org/products/dexterity/documentation/manual/schema-driven-forms/customising-form-b​​ehaviour](http://plone.org/products/dexterity/documentation/manual/schema-driven-forms/customising-form-behaviour/validation) /validation ）：

```
from five import grok
from plone.directives import form

from zope.interface import invariant, Invalid
from zope import schema

from z3c.form import button
from z3c.form.interfaces import ActionExecutionError, WidgetActionExecutionError

from Products.CMFCore.interfaces import ISiteRoot
from Products.statusmessages.interfaces import IStatusMessage

from example.dexterityforms.interfaces import MessageFactory as _

...

class OrderForm(form.SchemaForm):

    ...

    @button.buttonAndHandler(_(u'Order'))
    def handleApply(self, action):
        data, errors = self.extractData()

        # Some additional validation
        if 'address1' in data and 'address2' in data:

            if len(data['address1']) < 2 and len(data['address2']) < 2:
                raise ActionExecutionError(Invalid(_(u"Please provide a valid address")))
            elif len(data['address1']) < 2 and len(data['address2']) > 10:
                raise WidgetActionExecutionError('address2', Invalid(u"Please put the main part of the address in the first field"))

        if errors:
            self.status = self.formErrorsMessage
            return 
```

我认为也有可能从你的不变量中引发 WidgetActionExecutionError ，但是如果在处理 z3c.form 表单时之外的某个时间检查不变量，它可能不会做你想做的事情。

# iphone - UIButton 的 BackgroundImage 有时不会随着 touchUpInside 事件而改变

> ID：12617330
> 
> 赞同：1
> 
> 时间：2012-09-27T08:40:05.827
> 
> 标签：iphone, ios, uibutton, touch-up-inside

`UIButton`设置为以下代码：

```
UIButton *btn = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 27, 27)];
[btn setBackgroundImage:[UIImage imageNamed:@"imgUp.png"] forState:UIControlStateNormal];
[btn setBackgroundImage:[UIImage imageNamed:@"imgDown.png"] forState:UIControlStateHighlighted];
[btn addTarget:self action:@selector(btnPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

`btw`如果我快速触摸，`imgDown.png`则不会出现，但`btnPressed:`会触发动作。怎么可能修好？任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:47:11.110

在您的代码中添加这一行：

```
[btn setBackgroundImage:[UIImage imageNamed:@"imgDown.png"] forState:UIControlStateSelected]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:43:15.020

您应该为 btnPressed: 函数内的按钮 (btn) 调用 setHiglighted: 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:05:38.590

它工作正常我会测试它请检查你的图像并尝试它：

```
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 27, 27)];
[button setBackgroundImage:[UIImage imageNamed:@"rainy.jpg"] forState:UIControlStateNormal];
[button setBackgroundImage:[UIImage imageNamed:@"Icon.png"] forState:UIControlStateHighlighted];
[button addTarget:self action:@selector(btnPressed:) forControlEvents:UIControlEventTouchUpInside];
[self.view button]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:19:51.613

下面的代码可以解决问题。

```
-(void)btnPressedDelay{

    //original code in btnPressed: method
}

- (void) btnPressed:(id)sender
{    

    [self performSelector:@selector(btnPressedDelay) withObject:nil afterDelay:0];
// 0 did the magic here

} 
```

# php - SQL如何从每个值中只得到一个结果

> ID：12617331
> 
> 赞同：0
> 
> 时间：2012-09-27T08:40:06.507
> 
> 标签：php, sql

我有这个 sql 查询：

```
$result = mysql_query("SELECT * FROM chat WHERE `to_id` = '$user_id' AND `from_id`   IN($data)") or die(mysql_error());
    while ($row = mysql_fetch_assoc($result)) {
    print_r($row);
} 
```

返回这个数组：

```
Array ( [id] => 3505 [from_id] => 111 [to_id] => 109 [message] =>How are you? [sent] =>          1343109753 [recd] => 1 [system_message] => no )    
Array ( [id] => 3506 [from_id] => 111 [to_id]   => 109 [message] =>well... [sent] =>   1343109759 [recd] => 1 [system_message] => no ) 
Array ( [id] => 3507 [from_id] => 141 [to_id] => 109 [message] => bye [sent] => 1343901524 [recd] => 1 [system_message] => no ) 
```

From_id 是发送消息的人的用户 ID，但我只想为每个“from_id”获得一个（最近的）结果。（在这个例子中，我收到了来自同一个“from_id”的 2 条消息 - 111）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:42:14.180

也许`GROUP BY`：

```
SELECT * FROM chat WHERE `to_id` = '$user_id' AND `from_id` IN($data) GROUP BY  `from_id` ORDER BY `sent` DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:41:53.237

`SELECT * FROM chat WHERE to_id = '$user_id' AND`from_id`IN($data) GROUP BY from_id order by sent desc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:45:13.957

试试这样的，

```
SELECT a.*
FROM chat a INNER JOIN
        (
           SELECT   from_id, to_id ,MAX(sent) maxSent
           FROM     chat
           GROUP BY from_id, to_id
        ) b ON a.from_id = b.from_id AND
                a.to_id = b.to_id AND
                a.sent = b.maxSent
WHERE `to_id` = '$user_id' AND 
        `from_id` IN ($data) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:40:41.990

SELECT * FROM chat WHERE to_id = '$user_id' AND from_id IN($data) order by sent desc limit 0,1

Order by 将订购最近的消息，LIMIT 0,1 将只返回一条消息。

# eclipse - 以编程方式将不在工作区中的文件加载到 TextEditor

> ID：12617334
> 
> 赞同：1
> 
> 时间：2012-09-27T08:40:09.760
> 
> 标签：eclipse, file, editor, text-editor, rcp

有没有办法在工作区之外加载文件？这是我发现的：

```
IFile fileToBeOpened = ...;
IEditorInput editorInput = new FileEditorInput(fileToBeOpened);
IWorkbenchWindow window=PlatformUI.getWorkbench().getActiveWorkbenchWindow();
IWorkbenchPage page = window.getActivePage();
page.openEditor(editorInput, "org.eclipse.ui.DefaultTextEdtior"); 
```

这里的问题是第一行。我要编辑的文件属于 java.io.File 类型。但是没有办法将其转换为 IFile 实例。如何将我的 java.io.File 作为编辑器的输入传递？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:42:37.557

要打开外部文件，请按照此处的说明进行操作 [http://wiki.eclipse.org/FAQ_How_do_I_open_an_editor_programmatically%3F](http://wiki.eclipse.org/FAQ_How_do_I_open_an_editor_programmatically%3F)

```
import java.io.File;
import org.eclipse.core.filesystem.EFS;
import org.eclipse.core.filesystem.IFileStore;
import org.eclipse.ui.PartInitException;
import org.eclipse.ui.IWorkbenchPage;
import org.eclipse.ui.PlatformUI;
import org.eclipse.ui.ide.IDE;

File fileToOpen = new File("externalfile.xml");

if (fileToOpen.exists() && fileToOpen.isFile()) {
    IFileStore fileStore = EFS.getLocalFileSystem().getStore(fileToOpen.toURI());
    IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();

    try {
        IDE.openEditorOnFileStore( page, fileStore );
    } catch ( PartInitException e ) {
        //Put your exception handler here if you wish to
    }
} else {
    //Do something if the file does not exist
} 
```

# excel - 这是将列转换为 Excel VBA 中的行的好方法吗？

> ID：12617339
> 
> 赞同：1
> 
> 时间：2012-09-27T08:40:31.483
> 
> 标签：excel, vba

我有一个具有以下结构的 Excel，我想将其转换为另一种结构：

![将年份从列转置为行](../Images/d844fe9ecc9e9512c3fafc66965c6316.png)

实际文件比这复杂得多——但我创建了这个示意图来描述问题的本质。该文件目前有大约 5K 行，但预计将包含大约 50K-100K 条目。因此，该解决方案应该具有良好的性能。

我的想法是

1.  将列从 Customer Name 复制到 Unit Price 和 Year 1 Quantity & Year 1 TotalCost 并将其粘贴到目标范围并添加列年份编号并用 1 填充
2.  将列从客户名称复制到单价和第 2 年数量和第 2 年总成本，并用 2 填充年份编号列

我的问题是：

1.  这个解决方案会表现良好吗？
2.  是否有其他解决方案可以避免多次复制和粘贴？
3.  有没有办法更新源范围本身而不将数据粘贴到新的目标范围中？

**我做过的功课：**

我做了一个谷歌搜索，并试图阅读尽可能多的文章。我还在 Stackoverflow 中阅读了以下主题，但没有一个拥有我正在寻找的答案

[将 Excel 行转换为列（比转置更智能）](https://stackoverflow.com/questions/12372468/converting-excel-rows-to-columns-smarter-than-transpose)

[将多行转置为多列](https://stackoverflow.com/questions/12097773/transpose-multiple-rows-to-multiple-columns)

[Excel将行转换为带有组的列](https://stackoverflow.com/questions/11725698/excel-converting-rows-to-columns-with-groups)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:25:12.617

我认为您应该考虑将此应用程序转移到 Access 或其他数据库。该答案的其余部分假设目前这是不可能的。

您正在考虑的方法有一个缓慢的循环：

```
With Worksheets("Input")
  Cut
End With
With Worksheets("Output")
  Paste
End With 
```

我会 ：

*   将整个 UsedRange 从 Worksheet Input 上传到 Array1
*   分析 Array1 以确定工作表输出的大小
*   创建一个适当大小的 Array2
*   将数据从 Array1 移动到 Array2
*   将 Array2 下载到工作表输出。

如果您需要示例代码，我很乐意提供一些。我可以为您的示例表编写代码，但实际工作表的某些特征将为您提供更多有用的代码，而我无需付出额外的努力。

**第2部分**

你说“实际的文件比这复杂得多——但我创建了这个示意图来描述问题的本质。”

我假设：

*   未链接到特定年份的列在左侧。
*   对于每一年，都有相同顺序的相同列。
*   所有标题单元格具有相同的前景色和背景色以及相同的单个粗体状态。
*   数据单元格的水平对齐是数据类型的默认设置。
*   不需要为每个客户/产品组合提供每年的数据。
*   第一个数据行的数字格式可以应用于所有行。
*   年份列块的第一列的第 1 行中的值可用于输出中的年份列。

我创建了工作表输入并创建了 20 个数据行。我将数据行 3 到 22 向下复制以创建 5,000 个数据行。我认为这是您数据的公平表示：

![样本输入数据](../Images/ce10cc5006a172288941bea9aba7418c.png)

宏的输出在工作表输出中：

![样本输入数据的宏输出](../Images/d1d77d62083dca3932825670d6232b75.png)

这就是我相信你所寻求的。我已经按照指定重新排列了数据。我已经复制了标题行的格式、列宽和数字格式。如果输入中有公式，它们将是输出中的值。

对于 5,000 行，宏需要大约 0.1 秒来复制数据，大约需要 0.05 秒来应用格式。

在代码中，我包含了注释来说明我在做什么以及我为什么这样做，但是解释 VBA 语句的注释并不多。例如第一个语句是`Option Explicit`. 在 VB 帮助中查找此内容很容易，或者您可以在 Internet 上搜索“Excel VBA Option Explicit”。如有必要，请回来提出问题。

希望这可以帮助。

```
Option Explicit
Sub Reformat()

  Dim CellHeaderColourBack As Long
  Dim CellHeaderColourFore As Long
  Dim CellHeaderBold As Boolean
  Dim CellInValue() As Variant
  Dim CellOutHeaderHAlign() As Long
  Dim CellOutNumberFormat() As String
  Dim CellOutValue() As Variant
  Dim ColInCrnt As Long
  Dim ColInCrnt2 As Long
  Dim ColInMax As Long
  Dim ColOutCrnt As Long
  Dim ColOutMax As Long
  Dim ColWidth() As Single
  Dim NumRowsData As Long
  Dim RowInCrnt As Long
  Dim RowInMax As Long
  Dim RowOutCrnt As Long
  Dim RowOutMax As Long
  Dim TimeStart As Single

  ' I use constants to define values that might change.  For example, you have
  ' two header rows so the first data row is 3.
  ' "For RowCrnt = RowDataFirst to RowMax" instead of
  ' "For RowCrnt = 3 to RowMax"
  ' makes the code easier to understand and makes it easy to update the code
  ' if you add another header row.
  Const RowDataFirst As Long = 3   ' First data row
  Const NumNonYearCols As Long = 4 ' Number of columns not linked to a year
  Const NumColsPerYear As Long = 2 ' Number of columns per year

  TimeStart = Timer     ' Seconds since midnight

  With Worksheets("Input")

    ' There are several ways of identifying the last column and the last row.
    ' None work in every situation.  I think this method should be satisfactory
    ' for your worksheet although there is a warning later about ColMax.
    ColInMax = .Cells.SpecialCells(xlCellTypeLastCell).Column
    RowInMax = .Cells.SpecialCells(xlCellTypeLastCell).Row

    ' Debug.Print output to the Immediate Window.  I have left diagnostic
    ' outputs within the code.  Delete once you have adapted the code to
    ' your requirements.
    Debug.Print "ColInMax=" & ColInMax & "  RowInMax=" & RowInMax

    ' I never did much programming in C++ or Java but I never used a language
    ' that did not have an Assert statement of some kind.
    ' A key assumption of the code is that the the number of columns is of the
    ' form: NumNonYearCols + NunYears * NumColsPerYear.
    ' The interpreter will stop on this statement if this assumption is untrue.
    ' If the interpreter does stop even though you think the assumption is true,
    ' you will probably have a stray value or formatted cell to the right of the
    ' main data table.  Try deleting columns to the right of the data table.
    ' Alternatively, set ColInMax = NumNonYearCols + NumYears * NumColsPerYear
    ' so the extract ignores anything outside the data table.
    Debug.Assert (ColInMax - NumNonYearCols) Mod NumColsPerYear = 0

    ' Load all values within the worksheet to the array CellValue.
    CellInValue = .Range(.Cells(1, 1), .Cells(RowInMax, ColInMax)).Value
    ' CellInValue will now be a two dimensional array.  Dimension 1 will be for
    ' rows and dimension 2 will be for columns.  This is not conventional for
    ' arrays but matches the VBA for accessing cells.
    ' The lower bound for both dimensions will be 1.

    ' Record the formatting of cell A1 so this can be applied to all header
    ' cells in worksheet Output.  If the formatting is more complicated than
    ' this, it will probably be easier to copy and paste the header rows from
    ' the input to the output worksheet.
    With .Cells(1, 1)
      CellHeaderColourBack = .Interior.Color
      CellHeaderColourFore = .Font.Color
      ' Warning the bold state of a cell will be non-boolean if
      ' some characters are bold and some are not.
      CellHeaderBold = .Font.Bold
    End With

    ' Calculate number of columns in worksheet Output
    ColOutMax = NumNonYearCols + 1 + NumColsPerYear

    ' Record column widths and number formats for first data row and horizontal
    ' alignment for last header row.
    ' The column widths will be applied to the relevant output columns
    ' The number formats will be applied to data cells in the relevant
    ' output column.
    ' The horizontal alignments  will be applied to header cells in the
    ' relevant output column.
    ReDim ColWidth(1 To ColOutMax)
    ReDim CellOutNumberFormat(1 To ColOutMax)
    ReDim CellOutHeaderHAlign(1 To ColOutMax)

    ColOutCrnt = 1
    ' Non-year-linked columns
    For ColInCrnt = 1 To NumNonYearCols
      ColWidth(ColOutCrnt) = .Columns(ColInCrnt).ColumnWidth
      CellOutNumberFormat(ColOutCrnt) = _
                                 .Cells(RowDataFirst, ColInCrnt).NumberFormat
      CellOutHeaderHAlign(ColOutCrnt) = _
                      .Cells(RowDataFirst - 1, ColInCrnt).HorizontalAlignment
      ColOutCrnt = ColOutCrnt + 1
    Next
    ' Year column
    ColWidth(ColOutCrnt) = 5
    CellOutNumberFormat(ColOutCrnt) = "General"
    CellOutHeaderHAlign(ColOutCrnt) = xlRight
    ColOutCrnt = ColOutCrnt + 1
    ' Year-linked columns
    For ColInCrnt = NumNonYearCols + 1 To NumNonYearCols + NumColsPerYear
      ColWidth(ColOutCrnt) = .Columns(ColInCrnt).ColumnWidth
      CellOutNumberFormat(ColOutCrnt) = _
                                 .Cells(RowDataFirst, ColInCrnt).NumberFormat
      CellOutHeaderHAlign(ColOutCrnt) = _
                      .Cells(RowDataFirst - 1, ColInCrnt).HorizontalAlignment
      ColOutCrnt = ColOutCrnt + 1
    Next

  End With

  ' I have now extracted everything I want from worksheet Input.

  ' Worksheet Output will have 1 data row per value in a Quantity column.
  ' Count these values.
  NumRowsData = 0
  For RowInCrnt = RowDataFirst To RowInMax
    For ColInCrnt = NumNonYearCols + 1 To ColInMax Step NumColsPerYear
      If CellInValue(RowInCrnt, ColInCrnt) <> "" Then
        NumRowsData = NumRowsData + 1
      End If
    Next
  Next

  Debug.Print NumRowsData

  ' Size CellOutValue so it can hold all the data for Worksheet Output.
  ' ColOutMax = NumNonYearCols + 1 + NumColsPerYear   ' Calculated earlier
  RowOutMax = RowDataFirst - 1 + NumRowsData
  ReDim CellOutValue(1 To RowOutMax, 1 To ColOutMax)

  ' Build new header rows.

  ' Copy header cells for non-year-linked columns
  RowOutCrnt = 1
  For RowInCrnt = 1 To RowDataFirst - 1
    ColOutCrnt = 1
    For ColInCrnt = 1 To NumNonYearCols
      CellOutValue(RowOutCrnt, ColOutCrnt) = CellInValue(RowInCrnt, ColInCrnt)
      ColOutCrnt = ColOutCrnt + 1
    Next
    RowOutCrnt = RowOutCrnt + 1
  Next

  ' Create header for new column
  CellOutValue(RowDataFirst - 1, ColOutCrnt) = "Year"

  ' Copy one set of year-linked column header cells
  RowOutCrnt = 2        ' Row 1 holds year numbers
  For RowInCrnt = 2 To RowDataFirst - 1
    ColOutCrnt = NumNonYearCols + 2
    For ColInCrnt = NumNonYearCols + 1 To NumNonYearCols + NumColsPerYear
      CellOutValue(RowOutCrnt, ColOutCrnt) = _
                                           CellInValue(RowInCrnt, ColInCrnt)
      ColOutCrnt = ColOutCrnt + 1
    Next
    RowOutCrnt = RowOutCrnt + 1
  Next

  ' Copy data
  RowOutCrnt = RowDataFirst
  For RowInCrnt = RowDataFirst To RowInMax
    For ColInCrnt = NumNonYearCols + 1 To ColInMax Step NumColsPerYear
      ' This for-loop tracks the first column of each block of year columns
      If CellInValue(RowInCrnt, ColInCrnt) <> "" Then
        ' There is data for this year for this customer/product

        ' Copy non-year-linked data
        ColOutCrnt = 1
        For ColInCrnt2 = 1 To NumNonYearCols
          CellOutValue(RowOutCrnt, ColOutCrnt) = _
                                            CellInValue(RowInCrnt, ColInCrnt2)
          ColOutCrnt = ColOutCrnt + 1
        Next

        ' Copy year
        CellOutValue(RowOutCrnt, ColOutCrnt) = CellInValue(1, ColInCrnt)
        ColOutCrnt = ColOutCrnt + 1

        ' Copy year-linked data
        For ColInCrnt2 = ColInCrnt To ColInCrnt + NumColsPerYear - 1
          CellOutValue(RowOutCrnt, ColOutCrnt) = _
                                            CellInValue(RowInCrnt, ColInCrnt2)
          ColOutCrnt = ColOutCrnt + 1
        Next
        RowOutCrnt = RowOutCrnt + 1
      End If
    Next
  Next

  With Worksheets("Output")

    ' Delete any existing value
    .Cells.EntireRow.Delete

    ' Download contents of CellOutValue
    .Range(.Cells(1, 1), .Cells(RowOutMax, ColOutMax)).Value = CellOutValue

    'Set formatting.  Selection formats from the input worksheet were saved at
    ' the beginning.  Applying these formats to the output worksheet is not
    ' necessary but makes the process a little smoother.
    For RowOutCrnt = 1 To RowDataFirst - 1
      For ColOutCrnt = 1 To ColOutMax
        With .Cells(RowOutCrnt, ColOutCrnt)
          .Interior.Color = CellHeaderColourBack
          .Font.Color = CellHeaderColourFore
          .Font.Bold = CellHeaderBold
          .HorizontalAlignment = CellOutHeaderHAlign(ColOutCrnt)
        End With
      Next
    Next
    For ColOutCrnt = 1 To ColOutMax
      .Columns(ColOutCrnt).ColumnWidth = ColWidth(ColOutCrnt)
      .Range(.Cells(RowDataFirst, ColOutCrnt), _
             .Cells(RowOutMax, ColOutCrnt)).NumberFormat _
                                            = CellOutNumberFormat(ColOutCrnt)
    Next

  End With

  Debug.Print "Duration " & Timer - TimeStart

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T16:09:17.737

我会使用另一种方法：我只需添加缺少的列并删除不需要的列。

我的许多宏从创建或导入包含所有数据的表开始，然后复制它，对其进行排序，删除顶部或底部不需要的行（如果排序足够聪明，所有需要的行将组合在一起)，删除不需要的列，添加几列，格式化并在所有工作表上重复。

# c# - C# 插入排序 1xforeach 2xfor

> ID：12617344
> 
> 赞同：0
> 
> 时间：2012-09-27T08:40:48.947
> 
> 标签：c#, arrays, sorting

我想创建一个插入排序，但我不能再进一步了。我在路上解决了它，直到我越界，在我无法解决的第二个“for-command”中。我不确定我是否走在正确的道路上，但我想让解决方案保持简单。

```
int arrayzähler = 0;
int[] Speicherarray = new int[randomarray.Length];
//ausgabearray[1] = randomarray[1]; //für vergleich

foreach (int wert in randomarray)
{
    if (wert == randomarray[0])
    {
        Speicherarray[0] = wert;
        ausgabearray[0] = wert;
        arrayzähler++;
        continue; // erster wert = ausgabearray[0]
    }

    arrayzähler++;

    for (int i = arrayzähler - 1; i >= arrayzähler - 1; i--)
    {
        for (int a = arrayzähler - 2; a >= arrayzähler - 2; a--)
        {
            if (Speicherarray[i] < Speicherarray[a])
            {
                Speicherarray[a] = Speicherarray[a + 1];
            }
            else if (Speicherarray[i] >= Speicherarray[a])
            {
                Speicherarray[a] = wert;
                ausgabearray[i] = Speicherarray[i];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:44:04.407

这是插入排序的精确编码，

```
public void Sort(int[] collection)
    {
        int inner, temp;
        for (int i = 1; i < collection.Length; i++)
        {
            temp = collection[i];
                 inner = i;
            while (inner > 0 && collection[inner - 1] >= temp)
            {
                collection[i] = collection[inner - 1];
                --inner;
            }
            collection[inner] = temp;
        }
        Console.WriteLine("Printing Insertion Sorted Items");
        Print();                           
    } 
```

# python - python使用模块和路径

> ID：12617345
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:40:54.453
> 
> 标签：python, path, argv

说我有一个模块 MyModule。MyModule 作为函数 Myfunction。Myfunction 根据输入和 pickle 文件 'my.p' 执行某些操作并返回它。

我有一个名为 MyProgram.py 的程序。在 MyProgram.py 我导入 MyModule 并大量使用 Myfunction。喜欢 ：

```
from MyModule import MyFunction 
```

MyProgram.py 需要一些输入文件。

MyModule.py 和 MyProgram.Py 和 my.p 都在同一个文件夹中。

问题是，我想在 Windows 资源管理器上启动 MyProgram.py。我告诉过你它需要一些输入文件。所以我（实际上是我正在为其编写这个程序的人）更可取的方法是单击输入文件，拖放到 MyProgram.py 上，然后 tada！一切都完成了。

不好的部分是，如果我那样做，它会抛出一条错误消息，说它找不到 my.p。

如果我转到命令行并输入

```
>python MyProgram.py input.text 
```

这里没有问题。

我想我必须在 sys.argv 上附加一些东西，但我真的不知道。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:01:32.167

这可能是由使用相对路径名引起的。

使用绝对路径：

```
from os.path import realpath, dirname
BASE_PATH = dirname(realpath(__file__))
myp       = open(BASE_PATH+'/my.p') 
```

# c# - 线性代数库

> ID：12617346
> 
> 赞同：1
> 
> 时间：2012-09-27T08:40:57.090
> 
> 标签：c#, c++, python

我在哪里可以找到与[`numpy.linalg.norm`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html)C++ 或 C# 的 (Python) 类似的函数？此函数能够返回七种不同的矩阵范数之一，或无限数量的向量范数之一，具体取决于`ord`参数的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:01:18.097

根据您的平台和口袋的深度，您可能会对[英特尔的 MKL](http://software.intel.com/en-us/articles/using-intel-mkl-in-your-c-program/)感兴趣，它可以从 C++ 和 C# 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:42:28.400

看看这个库对你是否有意义：

[促进](http://www.boost.org/doc/libs/1_51_0/libs/numeric/ublas/doc/index.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:45:48.583

您可以使用 Fortran 编译器编译[blas](http://www.netlib.org/blas/)和[lapack](http://www.netlib.org/lapack/)，并在您的 C++ 程序中链接它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:32:18.360

也许[alglib](http://www.alglib.net/matrixops/rcond.php)适合你？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T09:36:12.960

对于 C#，Math.NET 项目的数字部分可能是您想要的。

[http://numerics.mathdotnet.com/](http://numerics.mathdotnet.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-27T22:56:20.980

您可以使用 Vector2.Length() 示例：

```
using System.Numerics;

namespace LinearAlgebraCSharp
{
    class Program
    {
        static void Main(string[] args)
        {

            Vector2 vec1 = new Vector2(2, 3);

            // Equivalent of <numpy.linalg.norm>
            float vectorModule = vec1.Length();
        }
    }
} 
```

# php - 我们什么时候选择 DateTime 而不是 Timestamp

> ID：12617347
> 
> 赞同：6
> 
> 时间：2012-09-27T08:40:59.667
> 
> 标签：php, mysql, sql, datetime, unix-timestamp

*由于我大部分时间都在使用 php 和 mysql 或 pgsql，因此我将使用 DateTime 作为日期 API 的通用词。在 php 中没有“日期”、“时间”、“日期时间”和“日期时间偏移”*

随着我开发 Web 应用程序越来越精细，我大部分时间都使用 DateTime，但有时我想知道它是否真的是我想要的。例如，碰巧我只想显示今天的日期（例如，当我想存储论坛或博客文章时），没有计算，没有过滤器提供，没有迭代发生......那我为什么要使用`\DateTime`超过`date()`功能？

我看到[这个主题](https://stackoverflow.com/questions/2218732/what-are-good-reasons-to-choose-timestamp-over-datetime-columns-in-mysql)提供了对每种技术的优点的一些简单描述。

但它并没有真正回答这个问题。在 PHP 中的 DateTime 对象中再抛出 2 个字节并在我的数据库中抛出另外 2 个字节真的是一种损失，因为它允许我使用`DATE_INTERVAL`API（在 php 中它是`DateInterval`）和 IntlDateFormatter。

此外，这篇文章说 unix_timestamp 是从 1970 年开始保留的。但这不合逻辑，一些测试证明了这一点：

```
echo date('d/m/Y',time(-1)); 
```

呼应“1969 年 12 月 31 日”！这是合乎逻辑的。一个 32 位的 unsigned int 从 0 到`4 294 967 295`68 年只有将近 20 亿秒，所以这个 int 是有符号的，“负时间戳”一定存在！

另一个对我来说真的很重要，让我每次都选择 DateTime 的想法是我想处理日期，而不是整数。DateTime 是日期，时间戳不是！我发现时间戳的唯一意义是我想为文件名加上时间标记的时间，因为在那个 cas 时间戳**是**时间戳......

但是，仍然存在一个问题：时区处理。由于 MySQL 和其他人在将日期存储为 DateTime 时不处理时区，所以现在，我使用 TimeZone 集成作为“filter in escape out”的转义部分

```
$toStoreDate = new \DateTime($_POST['date'],new DateTimeZone('UTC'));
$dao->exec('INSERT INTO mytable(mydate) VALUES (\''.$toStoreDate->format('Y-m-d h:i:s').'\')');
$toDisplayDate =new \DateTime( $dao->query('SELECT mydate FROM mytable')
    ->fetch(DAO::FETCH_ASSOC)['mydate']);
$toDisplayDate->setTimeZone(new DateTimeZone('myLocal')); 
```

这是正确的方法吗？存储一个简单的时间戳然后获取良好的本地时间不是更好吗？

* * *

所以，这里是问题的总结：

*   在真正简单地使用 API 时，多 2 个字节的 DateTime 是否会丢失（仅显示）
*   是时候放弃 unix_timestamp 了吗？
*   存储一个简单的时间戳然后获取良好的本地时间不是更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T11:21:22.643

正如评论中所说，我相信这主要取决于个人喜好。在我看来，在当今世界使用 Unix 时间戳和“遗留”非 OOP 接口并不是实现它的方式，例如，我们不（阅读：不应该）`INT`在我们的数据库以 Unix Timestamp 格式存储日期，我们应该改为使用数据库的本机类型，它通常是在标准转换方面几乎原生地与 PHP 的对象（和其他语言）协作的 a`DATE`或`DATETIME`类型。`DateTime`

详细说明一下我所说的标准转换的含义：当您使用 MySQL 并将值拉回 PHP 时，您会得到一个 ISO 格式的日期字符串，`DateTime`该类在其构造函数中对其进行解析，从而为您提供一个立即可用的对象。相比之下，要走 Unix 时间戳路线，您必须使用`strtotime`，*然后* `date`将其转换为您想要的任何本机格式。

我之前提到过我们的 PHP 系统和 .NET 系统之间的互操作。虽然使用时间戳不会引起任何具体问题，但它根本不是实际的解决方案，同样，我们使用一个返回 DateTime 值的数据库，该值可以直接通过管道发送。如果我们要将其转换为 unix 时间戳以便在 PHP 内部使用，如果我们要发送响应或向 .NET 应用程序发送响应（或者我应该只说 API在这种情况下）这是一个时间戳，并在最后进行转换。通过全面使用`DateTime`，它减轻了任何转换的需要，并且整个开发过程更加容易。

最后，添加所有这些，正如您在帖子中提到的那样，您可以在使用时使用闪亮的项目，例如`DateInterval`更容易的时区、更容易的操作和更容易的格式化等，`DateTime`并且它是犯罪中相关的面向对象的合作伙伴。在我看来，这只是一个更简单的开发过程。

正如我最初所说的那样，我不相信对此有一个“正确”的答案，更多的是基于您自己的编码风格的个人偏好，上面的评论反映了我的看法。

> 在真正简单地使用 API 时，多 2 个字节的 DateTime 是否会丢失（仅显示）

*   我无论如何都不相信。尤其是 PHP 脚本通常都是如此短的运行过程。

> 是时候放弃 unix_timestamp 了吗？

是的 ：）

> 存储一个简单的时间戳然后获取良好的本地时间不是更好吗？

请参阅上面关于数据库的评论，为此目的使用 Unix 时间戳不是“本机”IMO。您可以调用`->getTimezone`并将其存储在数据库中，然后`->setTimezone`在您再次将其拉出时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T10:04:52.713

不是您问题的确切答案，但我会选择`Timestamp`over `DateTime`，因为我**相信**处理一个`Integer`值更具成本效益（测量 CPU 的处理时间），而不是处理`DateTime`值。

当我拥有`Numbers`a时，我感觉很舒服`Binary Machine`，而不是拥有`Strings`or `Objects`。

**人与机器**

**就可理解**性而言，我会说，当我为计算机编写程序时，我会认为我正在为 a`Machine`工作，但是如果该层上的抽象可以帮助人类理解更好的是，为什么我们不在`Performance`不成问题的时候不使用它呢？

我不记得是谁说的或在哪里听到的，但有人说了类似的话`People hate Computers, but they should hate Programmers`，我完全同意。所以，作为一个人，我仍然尊重那台机器，并将尝试制作更易于计算机理解的程序。:)

**更新：**

为了更好地描绘它，假设我们有一个处理“日期”的程序，每分钟处理 10,000 次，对吗？

```
// it LOOKS Better
$date = new DateTime();
$date->setDate(1986, 3, 24);   // March 24, 1986
echo $date->format('Y-m-d');

// it WORKS Better
echo date("Y-m-d", mktime(0, 0, 0, 3, 24, 1986));    // March 24, 1986 
```

假设我每周要查看这个代码一个小时，假设有 10,000 人需要 24/7/365 处理，当然我不会处理这个，这是一个任务机器。

顺便说一句，我要再说一遍，如果`Performance`不是问题，那为什么我们不让程序员更容易理解呢？如果我们需要充分利用它，那么让程序员更好地查看代码，`Works`而不是`Looks`！:)

# mysql - MySQL 编辑器

> ID：12617348
> 
> 赞同：3
> 
> 时间：2012-09-27T08:41:00.257
> 
> 标签：mysql, mysql5

我正在尝试创建一个用于计算 levenshtein 距离的 MySQL 函数。我找到了一个看起来非常接近我需要的函数，但是它总是到处抛出错误——我是 MySQL 函数的新手，所以我不知道出了什么问题？

这是功能：

```
DELIMITER $$

CREATE FUNCTION LEVENSHTEIN( s1 CHAR(255), s2 CHAR(255)) 
RETURNS int(3) 
DETERMINISTIC
BEGIN
    DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT;
    DECLARE s1_char CHAR(255);
    DECLARE cv0, cv1 CHAR(255);

    SET s1_len = LENGTH(s1);
    SET s2_len = LENGTH(s2);
    SET cv1 = 0x00;
    SET j = 1;
    SET i = 1;
    SET c = 0;

    IF s1 = s2 THEN
        RETURN 0;
    ELSE IF s1_len = 0 THEN
        RETURN s2_len;
    ELSE IF s2_len = 0 THEN
        RETURN s1_len;
    ELSE
        WHILE j <= s2_len DO 
          SET c = c + 1; 
          IF s1_char = SUBSTRING(s2, j, 1) THEN  
            SET cost = 0; ELSE SET cost = 1; 
          END IF; 
          SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost; 
                SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
                IF c > c_temp THEN
                    SET c = c_temp;
                END IF;
                SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
            END WHILE;
            SET cv1 = cv0, i = i + 1;
        END WHILE;
    END IF;
    RETURN c;
END$$

DELIMITER ; 
```

这是错误（到目前为止）。

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHILE; END IF; RETURN c; END' at line 36 
```

**编辑：**原始代码可以在[这里找到](http://www.artfulsoftware.com/infotree/queries.php#552)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T08:48:19.240

`delimiter`在创建函数之前不要忘记更改。

```
DELIMITER $$

CREATE FUNCTION LEVENSHTEIN( s1 CHAR(255), s2 CHAR(255)) 
RETURNS int(3) 
DETERMINISTIC
BEGIN
    DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT;
    DECLARE s1_char CHAR(255);
    DECLARE cv0, cv1 CHAR(255);

    SET s1_len = LENGTH(s1);
    SET s2_len = LENGTH(s2);
    SET cv1 = 0x00;
    SET j = 1;
    SET i = 1;
    SET c = 0;

    IF s1 = s2 THEN
        RETURN 0;
    ELSE IF s1_len = 0 THEN
        RETURN s2_len;
    ELSE IF s2_len = 0 THEN
        RETURN s1_len;
    ELSE
        WHILE j <= s2_len DO 
          SET c = c + 1; 
          IF s1_char = SUBSTRING(s2, j, 1) THEN  
            SET cost = 0; ELSE SET cost = 1; 
          END IF; 
          SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost; 
                SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
                IF c > c_temp THEN
                    SET c = c_temp;
                END IF;
                SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
            END WHILE;
            SET cv1 = cv0, i = i + 1;
        END WHILE;
    END IF;
    RETURN c;
END$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-10T12:56:25.467

这对我来说很好

```
DELIMITER $$
CREATE FUNCTION levenshtein( s1 VARCHAR(255), s2 VARCHAR(255) )
RETURNS INT
DETERMINISTIC
BEGIN
DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT;
DECLARE s1_char CHAR;
-- max strlen=255
DECLARE cv0, cv1 VARBINARY(256);
SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = 0x00, j = 1, i = 1, c = 0;
IF s1 = s2 THEN
RETURN 0;
ELSEIF s1_len = 0 THEN
RETURN s2_len;
ELSEIF s2_len = 0 THEN
RETURN s1_len;
ELSE
WHILE j <= s2_len DO
SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1;
END WHILE;
WHILE i <= s1_len DO
SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1;
WHILE j <= s2_len DO
SET c = c + 1;
IF s1_char = SUBSTRING(s2, j, 1) THEN
SET cost = 0; ELSE SET cost = 1;
END IF;
SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost;
IF c > c_temp THEN SET c = c_temp; END IF;
SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
IF c > c_temp THEN
SET c = c_temp;
END IF;
SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
END WHILE;
SET cv1 = cv0, i = i + 1;
END WHILE;
END IF;
RETURN c;
END$$
DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T08:45:21.020

您忘记了语句分隔符 ';' 几乎在每一行的末尾。

# c++ - 使用动态分配存储大约 10000 个变量的布尔信息的内存有效方法

> ID：12617349
> 
> 赞同：3
> 
> 时间：2012-09-27T08:41:00.850
> 
> 标签：c++, c, memory-management

我需要存储大约 10000 个变量的布尔信息。首先我想使用一个布尔数组 arr[10000] 但它需要 40000 个字节。但我需要以一种内存有效的方式存储这些信息。也许使用位操作？还有一件事我需要全局存储它并动态分配它。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T08:44:21.800

你可以这样做：

```
vals = new char[(len+7)/8];
// To access
vals[i/8] & 1 << (i % 8)
// To set
vals[i/8] |= 1 << (i % 8);
// To clear
vals[i/8] &= ~(char)(1 << (i % 8)); 
```

虽然要最快，但您应该使用任何字长大小的块。所以在 32 位计算机上：

```
vals = new uint32_t[(len+31)/32];
// To access
vals[i/32] & 1 << (i % 32)
// To set
vals[i/32] |= 1 << (i % 32);
// To clear
vals[i/32] &= ~(uint32_t)(1 << (i % 32)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T09:49:01.973

在 C++ 中，您可以选择`std::bitset<10000>`以固定大小存储单个位，或者`std::vector<bool>`如果您需要动态更改大小。这两个都将使用每个值一个位。

没有太多需要手动进行位摆弄。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T08:42:04.970

显然，最有效的方法是稍微存储一个值。Wich 将减少 8 倍的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T09:04:51.627

10000 是一个非常小的数字，目前的计算机有几 Gb 的可用内存。如果您对每个布尔变量使用“int”类型，则仅占 40kB，这是很小的。先做一个`int arr[N]`，然后在进一步优化之前测试和测量性能。

从`int`每个布尔变量转换为位压缩格式将使您使用更少的内存，但一切都会变慢，因为您必须从压缩格式中打包和解压缩数据。您获得了内存，但这是一种权衡，这听起来像是过早的优化，对我来说是不必要的。

您还可以使用[RLE 压缩](http://en.wikipedia.org/wiki/Run-length_encoding)或[BDD 之](http://en.wikipedia.org/wiki/Binary_decision_diagram)类的东西，它们更高效，但实现起来更复杂，并且再次实现了不同的运行时/内存权衡。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T11:29:34.200

我会制作一个位字段数组，如下所示。正好是 10000... 对于动态分配，只需将 BoolBytes 设为指针，使用 malloc 和 bob 即可。

```
typedef struct
    {
    unsigned b0     :1;
    unsigned b1     :1;
    unsigned b2     :1;
    unsigned b3     :1;
    unsigned b4     :1;
    unsigned b5     :1;
    unsigned b6     :1;
    unsigned b7     :1;
    }BitField;

BitField BoolBytes[1250]; // The number of bools is OVER NINE-THOUSAAAAAAAND! 
```

另一个“效率”问题是询问 8 倍的内存是否比在内存中执行 10000 个布尔的地址计算所增加的时间更好。开销不大，但这会比布尔数组稍慢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T12:10:13.293

使用`std::vector<bool>`应该是最简单的方法。您可以只使用众所周知的矢量接口（它带有动态分配，例如，通过使用`push_back`向其中添加项目），而我知道的所有 stl 实现（我不确定它是否也是定义所必需的）使用模板布尔向量的专门化并将其实现为每个值 1 位。

请注意，动态重新分配（您不必关心它，这一切都由向量类完成）将允许插入的恒定摊销时间，但可能会有内存开销（实际位数的一小部分）到允许这个。特别是，在需要时，调整大小会将分配的内存扩展/缩小当前长度的一小部分。

虽然这不是每次存储信息所需的最小内存，但我仍然认为它是一种内存有效的方式。

# vb.net - 如何从 VB.NET 2005 向 EPSON LQ-300+ 发送打印机命令

> ID：12617358
> 
> 赞同：1
> 
> 时间：2012-09-27T08:41:38.153
> 
> 标签：vb.net, visual-studio-2005, epson, dot-matrix

我必须发送一个用于从 VB.NET 更改字体的 priter 命令。

我正在使用 RawprinterHelperClass 和 sendstringtoprinter(printername,stringname) 函数来打印字符串。

我有打印机命令，但我不知道要发送它。打印机命令是

![在此处输入图像描述](../Images/0ea01d31b120559ddb3575f1bb8d0d92.png)

# infragistics - 需要显示两个不同的列表一个Wingrid

> ID：12617359
> 
> 赞同：0
> 
> 时间：2012-09-27T08:41:40.663
> 
> 标签：infragistics

需要在一个波段的一个Wingrid上显示两个不同的波纹管显示类型列表。按类别分组并仅显示不同的列表。

注意：2 种类型的字段可能不同，但必须只显示常见字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:59:10.937

将这两种类型的项目放在一个可绑定列表中，并以编程方式填充网格的列 (UltraGridColumn)（列的键 - 属性名称），您需要哪些（通用）属性。

# objective-c - “现代Objective-C”真的是一个新版本，即Objective-C 2.1吗？

> ID：12617360
> 
> 赞同：6
> 
> 时间：2012-09-27T08:41:45.890
> 
> 标签：objective-c, llvm

在 WWDC 2012 中，Apple 在名为“Modern Objective-C”的谈话 405 中引入了 NSNumber 字面量和 Collection 字面量的新语法。我从 Stephen G. Kochan 的 Objective-C 2.0 一书中学习了 Objective-C。

“现代 Objective-C”是否会成为 Objective-C 2.1，还是应该将 Apple 的新语法视为编译器处理的现有结构的替代、Apple 特定语法（简写）？

（我在网上做了一些研究，但仅在 Objective-C 运行时的上下文中发现了术语“现代”和“传统”。我想了解语言中到底是什么，什么是预处理器指令，什么是编译器指令。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T09:13:03.077

Objective-C 被定义为 C 的扩展。预处理器指令和编译器指令正是它们在 C 中的用途。

Objective-C 语言没有“正式”定义（没有标准）。苹果发布了一份文件，或多或少地解释了它。该语言也没有真正的“版本号”。Apple 有时会添加一项新功能，仅此而已。在某个时刻，Apple 决定将某些功能集推广为“Objective-C 2.0”，但这并不意味着所有以前的版本都具有相同的功能集，也不意味着所有后续版本都将具有相同的功能集。Apple 最近使用的绰号是“现代 Objective-C”，指的是一种支持所有当前定义的功能的语言。

请注意，有些功能是在编译器级别定义的，有些是在库级别定义的，还有一些是两者的混合。如果您使用在编译器级别完全实现的功能（例如新的文字语法），它将适用于您使用该编译器编写和编译的任何程序。但是，如果您使用在库级别定义的功能或需要编译器和库支持的功能，则它仅适用于在最新库可用的系统上运行的程序（Apple 不允许您静态链接语言库） . 例如 GC、ARC 和附加到`weak`.

因此：是的，“现代Objective-C”与早期的Objective-C有很大不同，您应该将其视为一个新版本，但是不，它没有附加版本号，Apple很有可能会为该语言添加新功能并且仍然称它为“现代Objective-C”。此外，究竟哪些特性是语言的一部分，不仅取决于编译器，还取决于您正在编译的目标系统。因此，针对 iOS 4 的“现代 Objective-C”程序将能够使用与针对 OsX 10.8 的“现代 Objective-C”程序不同的一组功能。

# java - 不能引用在不同方法中定义的内部类中的非最终变量

> ID：12617365
> 
> 赞同：-4
> 
> 时间：2012-09-27T08:41:56.467
> 
> 标签：java, android

> **可能重复：**
> [无法引用在不同方法中定义的内部类中的非最终变量](https://stackoverflow.com/questions/1299837/cannot-refer-to-a-non-final-variable-inside-an-inner-class-defined-in-a-differen)

我的程序有一些问题。

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activityenter code here`_main);

    ImageView ob4 = (ImageView) findViewById(R.id.imageView4);
    ShapeDrawable d4 = new ShapeDrawable(new OvalShape());

    d4.setIntrinsicHeight(150);
    d4.setIntrinsicWidth(40);
    d4.getPaint().setColor(Color.WHITE);
    d4.setVisible(true, true);
    ob4.setImageDrawable(d4);

    Button btn_start = (Button) this.findViewById(R.id.button1);
    btn_start.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
        //Cannot refer to a non-final variable d4 inside an inner class defined in a      different method
        //But i don't want to make this field "final", becouse i will change color of this shape in future. Thanks.
        d4.getPaint().setColor(Color.RED);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T08:44:44.237

在您的方法之外（在类级别）声明您的字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T08:45:41.097

最简单（无需思考）的方法是创建一个副本，但`final`引用同一个对象：

```
ShapeDrawable d4 = new ShapeDrawable(new OvalShape());
final ShapeDrawable d4Final = d4;

// you can use d4Final in your inner class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T08:50:13.500

在你的`onCreate()`方法放这个之前

```
ShapeDrawable d4; 
```

在你的`onCreate`方法中

```
d4 = new ShapeDrawable(new OvalShape()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T08:53:18.697

尝试这个 ：

```
public class MainActivity extends Activity {

ImageView ob4;
ShapeDrawable d4;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activityenter code here`_main);

ob4 = (ImageView) findViewById(R.id.imageView4);
d4 = new ShapeDrawable(new OvalShape());

d4.setIntrinsicHeight(150);
d4.setIntrinsicWidth(40);
d4.getPaint().setColor(Color.WHITE);
d4.setVisible(true, true);
ob4.setImageDrawable(d4);

Button btn_start = (Button) this.findViewById(R.id.button1);
btn_start.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    //Cannot refer to a non-final variable d4 inside an inner class defined in a      different method
    //But i don't want to make this field "final", becouse i will change color of this shape in future. Thanks.
    d4.getPaint().setColor(Color.RED);
    }
});
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
getMenuInflater().inflate(R.menu.activity_main, menu);
return true;
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T08:46:57.463

你可以让它成为最终的，而不是改变它。final 仅表示对象的内存地址相同。

```
final ShapeDrawable d4;
d4.setShape(new Shape()); 
```

会没事的;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T08:46:29.117

只需让您的类实现接口，即：

```
public class MainActivity extends Activity implements View.OnClickListener { 
```

然后将`onClick`其作为类方法并将其添加到您的按钮中，如下所示：

```
btn_start.setOnClickListener(this); 
```

您还必须使 d4 成为实例变量，因此您的类将如下所示：

```
public class MainActivity extends Activity implements View.OnClickListener {

ShapeDrawable d4 = new ShapeDrawable(new OvalShape());

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activityenter code here`_main);

    ImageView ob4 = (ImageView) findViewById(R.id.imageView4);

    d4.setIntrinsicHeight(150);
    d4.setIntrinsicWidth(40);
    d4.getPaint().setColor(Color.WHITE);
    d4.setVisible(true, true);
    ob4.setImageDrawable(d4);

    Button btn_start = (Button) this.findViewById(R.id.button1);
    btn_start.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    //Cannot refer to a non-final variable d4 inside an inner class defined in a      different method
    //But i don't want to make this field "final", becouse i will change color of this shape in future. Thanks.
    d4.getPaint().setColor(Color.RED);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

# c# - 获取树结构的孩子

> ID：12617366
> 
> 赞同：0
> 
> 时间：2012-09-27T08:41:56.637
> 
> 标签：c#, tree, parent-child

```
public JsonResult GetFolderChildren(int id, List<string> res)
    {
            List<tblFolders> folders = (from x in db.tblFolders
                                where x.folderParent == id
                                select x).ToList();
            foreach (var f in folders)
            {
                res.Add("FOLDER_" + f.id.ToString());
            }
            foreach (var r in res)
            {
                GetFolderChildren(int.Parse(r.Replace("FOLDER_", "")), res);
            }

        return Json(res, JsonRequestBehavior.AllowGet);
    } 
```

但它不起作用。一个文件夹可以有孩子，他们的孩子可以有其他孩子等等。我的代码只是给了我第一个孩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:47:19.460

我不确定那是什么语言，但如果我不得不猜测，那是因为您在文件而不是文件夹上调用“GetFolderChildren”。您可能打算做相反的事情，也就是说，为每个文件夹调用“GetFolderChildren”并简单地添加每个存在的资源。

另外，如果您不打算使用它，我建议您不要退回某些东西。效果似乎是通过修改列表来完成的。如果需要最后一次调用返回一个 JsonResult 对象，那么有两个方法，父调用内部方法，父返回 JsonResult 对象（避免不必要的性能损失）。

# css - Internet Explorer 中的样式列表项

> ID：12617378
> 
> 赞同：0
> 
> 时间：2012-09-27T08:42:29.070
> 
> 标签：css, internet-explorer, list, drop-down-menu

嗨，我对列表项导航菜单有一个非常奇怪的体验。

在主要父级上，`li`我有一个背景颜色，但是当我下拉到`li ul li`我希望删除背景颜色时，这在所有浏览器上都`IE9/8/7`可以正常工作。

我的基本代码是：

```
 .topnav li {
    background:#c60;
    }
    .topnav li ul li {
    background:none;
    } 
```

在`IE`仍然显示`background color`，我已经尝试了我能想到的一切。

该网站是[***链接是***](http://www.arcdatasystems.co.uk)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:48:54.830

s在`li`Internet Explorer 中应用了渐变过滤器 - 您需要将其设置为无（或等效）以删除背景。

例如

```
.topnav li ul li { filter: none; } 
```

# r - 创建每个级别的累积计数向量

> ID：12617385
> 
> 赞同：2
> 
> 时间：2012-09-27T08:42:49.713
> 
> 标签：r

我有很多这样的小向量：

```
 id<-c(2,2,5,2,1,9,4,4,3,9,5,5) 
```

并且我想创建另一个相同长度的向量，该向量具有迄今为止每个 id 的累积出现次数。对于上面的示例数据，这看起来像：

```
> id.count
 [1] 1 2 1 3 1 1 1 2 1 2 2 3 
```

我找不到一个可以轻松做到这一点的函数，可能是因为我真的不知道如何用语言完全表达我真正想要的是什么（因此问题标题有点尴尬）。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T09:02:38.927

这是另一种方式：

```
ave(id,id,FUN=seq_along) 
```

给出：

```
 [1] 1 2 1 3 1 1 1 2 1 2 2 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T08:45:21.850

```
> sapply(1:length(id), function(i) sum(id[1:i] == id[i]))
 [1] 1 2 1 3 1 1 1 2 1 2 2 3 
```

或者如果你有`NA`s`id`你应该使用`id[1:i] %in% id[i]`。

# objective-c - 我怎样才能找到一条线上的点 - 目标c？

> ID：12617387
> 
> 赞同：2
> 
> 时间：2012-09-27T08:42:51.787
> 
> 标签：objective-c, line, point, cgcontextdrawimage

考虑从点 A (x,y) 到 B (p,q) 的线。

该方法`CGContextMoveToPoint(context, x, y);`移动到点 x,y 并且该方法`CGContextAddLineToPoint(context, p, q);`将绘制从点 A 到 B 的线。

我的问题是，我能找到这条线覆盖的所有点吗？

实际上我需要知道终点 B 之前的 x 点的确切点。

参考这张图。。 ![在此处输入图像描述](../Images/7512368244acb22e5893ab20d45ec8fa.png)

上面的行仅供参考。这条线可能有任何角度。我需要第 B 点之前的第 5 个点。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:22:25.763

你不应该考虑像素。坐标是浮点值。处的几何点`(x,y)`根本不需要是像素。实际上，您应该将像素视为坐标系中的矩形。

这意味着“终点前的 x 个像素”实际上没有意义。如果像素是矩形，则水平移动时的“x 像素”与垂直移动时的数量不同。而且，如果您朝任何其他方向移动，则更难确定它的含义。

根据您尝试执行的操作，以像素术语翻译您的概念可能容易，也可能不容易。然而，相反的做法可能会更好，停止以像素为单位进行思考，并将您当前以像素术语表达的所有内容转换为非像素术语。

还要记住，一个像素到底是什么取决于系统，一般来说，您可能会也可能不会查询系统（特别是如果您考虑到视网膜显示器和所有与分辨率无关的功能）。

编辑：

我看到你编辑了你的问题，但“点”并不比“像素”更精确。

不过我会尽量给你一个可行的解决方案。至少，一旦您以正确的方式重新表述您的问题，它将是可行的。

你的问题，正确表述，应该是：

*给定两个点`A`，`B`在一个笛卡尔空间和一个距离`delta`上，一个点的坐标是多少，`C`在`C`通过`A`和的直线`B`上，线段 BC 的长度是`delta`？*

这是该问题的解决方案：

```
// Assuming point A has coordinates (x,y) and point B has coordinates (p,q).
// Also assuming the distance from B to C is delta. We want to find the 
// coordinates of C.

// I'll rename the coordinates for legibility.
double ax = x;
double ay = y;
double bx = p;
double by = q;

// this is what we want to find
double cx, cy;

// we need to establish a limit to acceptable computational precision
double epsilon = 0.000001;

if ( bx - ax  <  epsilon   &&   by - ay < epsilon ) {

  // the two points are too close to compute a reliable result
  // this is an error condition. handle the error here (throw
  // an exception or whatever).

} else {

  // compute the vector from B to A and its length
  double bax = bx - ax;
  double bay = by - ay;
  double balen = sqrt( pow(bax, 2) + pow(bay, 2) );

  // compute the vector from B to C (same direction of the vector from
  // B to A but with lenght delta)
  double bcx = bax * delta / balen;
  double bcy = bay * delta / balen;

  // and now add that vector to the vector OB (with O being the origin)
  // to find the solution
  cx = bx + bcx;
  cy = by + bcy;

} 
```

您需要确保 A 点和 B 点不太接近，否则计算将不精确，结果将与您预期的不同。这`epsilon`就是应该做的（你可能想也可能不想改变 的值`epsilon`）。

理想情况下，合适的值`epsilon`与 a 中可表示的最小数字无关，而是与 a为您提供的坐标数量级值`double`的精度水平有关。`double`

我已经硬编码`epsilon`，这是定义它的值的常用方法，因为您通常事先知道数据的数量级，但也有“自适应”技术可以`epsilon`从参数的实际值（坐标 A和 B 和三角洲，在这种情况下）。

另请注意，我已为易读性编码（编译器无论如何都应该能够优化）。如果您愿意，请随时重新编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:41:54.103

没那么难，把你的线段翻译成数学线表达式，x像素可以翻译成以B为中心的圆的半径，制作一个系统来找到它们的截距，你得到两个解决方案，取更接近的点一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:19:17.623

这是您可以使用的代码

```
 float distanceFromPx2toP3 = 1300.0;    

 float mag = sqrt(pow((px2.x - px1.x),2) + pow((px2.y - px1.y),2));
 float P3x = px2.x + distanceFromPx2toP3 * (px2.x - px1.x) / mag;
 float P3y = px2.y + distanceFromPx2toP3 * (px2.y - px1.y) / mag;

 CGPoint  P3 = CGPointMake(P3x, P3y); 
```

您可以点击此链接，它也会为您提供详细说明 -

[如何使用其他两个点及其角度找到第三个点](https://stackoverflow.com/questions/7780374/how-to-find-a-third-point-using-two-other-points-and-their-angle)。

你可以找出任何你想找到的点数。

# java - JUnit - assertFalse 不除了 == 运算符？

> ID：12617391
> 
> 赞同：0
> 
> 时间：2012-09-27T08:43:10.227
> 
> 标签：java, eclipse, unit-testing, testing, junit

我目前正在为我的程序编写 junit 测试。

我的一项测试更新了现有产品。这是代码：

```
@Test
public void testUpdate(){
    Produkt p = new Produkt(1, "apple", "food", true, 2.00, false, true);
    assertFalse(handler.updateProdukt(p)==0);;  
} 
```

但 eclispe 总是说：

> 运算符 == 未定义参数类型 void, int

如果我写 null 没有任何改变......

是否有可能测试 updatedProdukt 是否为空？

真的很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:44:32.173

你的方法是`void`。它不返回任何内容，因此返回值不能用于赋值或表达式。

与 jUnit 或 Eclipse 无关。

也许你想要这样的东西：

```
handler.updateProdukt(p);
assertEquals("has been updated", theNewExpectedValue,  p.getSomeValue()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:44:45.890

它不仅仅是这样

```
handler.updateProdukt(p) 
```

不返回任何值，您需要将签名更改为

```
int handler.updateProdukt(p) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:44:11.197

这是因为您的`updateProdukt`方法返回 void。将其更改为返回一些东西，例如 a`boolean`或 an `int`，然后您可以在 a 中使用它`assert`。

问题是：正在`updateProdukt`做什么以及您希望测试什么？如果它正在更新指定的产品，那么您应该返回一个`boolean`（true 或 false）来指示指定的产品是否已成功更新。或者，`Product`如果没有更新产品，则返回已更新的或 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T08:44:57.903

你的`updateProdukt()`回报是什么？退货不是无效吗？

您需要从 updateProdukt() 返回一些内容才能使用 == 运算符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T09:05:18.293

如果返回 int 或 Strings 或 Long 值，请尝试以下代码。

```
assertFalse(handler.updateProdukt(p).equals(0)); 
```

# c# - 视频从 android 流式传输到 C# 中的媒体播放器

> ID：12617392
> 
> 赞同：1
> 
> 时间：2012-09-27T08:43:12.897
> 
> 标签：c#, android, video-streaming

我想做一个简单的视频流。我使用的应用程序是 android 和使用 c# 的简单媒体播放器。我审查的大部分代码都会有 POST 方法到 ip 服务器。同时我的应用程序正在使用 gsm 网络，它需要使用数据包来传输数据媒体。

我的第一步是拥有一个可以记录的 android 应用程序。这一步完成了。这是我的代码。

```
public class Videotest1Activity extends Activity implements 
    SurfaceHolder.Callback, OnInfoListener, OnErrorListener{

    Camera camera;
VideoView videoView;
SurfaceHolder holder;
TextView msg;
Button initBtn, startBtn, stopBtn, playBtn, stprevBtn;
MediaRecorder recorder;

String outputFileName;
static final String TAG = "RecordVideo";
int maxDuration = 7000;//7sec
int frameRate = 1;//15

String serverIP = "172.19.117.12";
int serverPort = 2000;
Socket socket;

int mCount;
//TimerThread mTimer;

Chronometer chronometer;

LocalSocket receiver,sender;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_videotest1);

    videoView = (VideoView) findViewById(R.id.videoView1);
    initBtn = (Button) findViewById(R.id.initialize);
    startBtn = (Button) findViewById(R.id.button1);
    stopBtn = (Button) findViewById(R.id.button3);
    msg = (TextView) findViewById(R.id.textView1);
    playBtn = (Button) findViewById(R.id.reviewBtn);
    stprevBtn = (Button) findViewById(R.id.stprevBtn);
    chronometer = (Chronometer) findViewById(R.id.chronometer1);

    /*
    mTimer= new TimerThread();
    mTimer.setOnAlarmListener(mSTimer_OnAlarm);
    mTimer.setPeriod(100);
    */
}

public void buttonTapped(View view){
    switch(view.getId()){
    case R.id.initialize:
        initRecorder();
        break;
    case R.id.button1:
        beginRecording();
        break;
    case R.id.button3:
        stopRecording();
        break;
    case R.id.reviewBtn:
        playRecording();
        break;
    case R.id.stprevBtn:
        stopPlayback();
        break;
    }
}

@Override
public void onError(MediaRecorder mr, int what, int extra) {
    Log.e(TAG, "Record error");
    stopRecording();
    Toast.makeText(this, "Recording limit reached", 2500).show();
}

@Override
public void onInfo(MediaRecorder mr, int what, int extra) {
    Log.i(TAG, "recording event");
    if(what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED){
        Log.i(TAG, "...max duration reached");
        stopRecording();
        Toast.makeText(this, "Recording limit info", 2500).show();
    }
}

@Override
public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {

}

@Override
public void surfaceCreated(SurfaceHolder arg0) {
    Log.v(TAG, "in surfaceCreated");

    try{
        camera.setPreviewDisplay(holder);
        camera.startPreview();
    }catch(IOException e){
        Log.v(TAG, "Could not start the preview");
        e.printStackTrace();
    }
    initBtn.setEnabled(true);
    startBtn.setEnabled(true);
    stopBtn.setEnabled(true);
}

@Override
public void surfaceDestroyed(SurfaceHolder arg0) {

}

protected void onResume(){
    Log.v(TAG, "in onResume");
    super.onResume();
    initBtn.setEnabled(false);
    startBtn.setEnabled(false);
    stopBtn.setEnabled(false);
    playBtn.setEnabled(false);
    stprevBtn.setEnabled(false);
    if(!initCamera())
        finish();
}

public boolean initCamera(){
    try{
        camera = Camera.open();
        Camera.Parameters camParam = camera.getParameters();
        camera.lock();
        holder = videoView.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        //Thread thread = new Thread(new hantarThread());
        //thread.start();
    }catch(RuntimeException re){
        Log.v(TAG, "Could not initialize the camera");
        re.printStackTrace();
        return false;
    }
    return true;
}

public void initRecorder(){
    if(recorder != null)return;     
    outputFileName = Environment.getExternalStorageDirectory() + "/videooutput.mp4";

    File outputFile = new File(outputFileName);
    if(outputFile.exists())
        outputFile.delete();//knp nk dlt?

    try{
        Toast.makeText(this, "InitRecord", 2500).show();
        camera.stopPreview();
        camera.unlock();
        recorder = new MediaRecorder();
        recorder.setCamera(camera);

        recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        recorder.setVideoSize(176, 144);
        recorder.setVideoFrameRate(15);//15
        recorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);//mpeg_4
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setMaxDuration(60000);
        recorder.setPreviewDisplay(holder.getSurface());
        recorder.setOutputFile(outputFileName);

        recorder.prepare();
        Log.v(TAG, "MediaRecorder initialized");
        initBtn.setEnabled(false);
        startBtn.setEnabled(true);
    }catch(Exception e){
        Log.v(TAG, "MediaRecorder failed");
        e.printStackTrace();
    }
}

public void beginRecording(){
    //mCount = 0;
    //mTimer.start();

    try{
        Log.v(TAG, "start Recording begin");

        int stoppedMilliseconds = 0;
          String chronoText = chronometer.getText().toString();
          String array[] = chronoText.split(":");
          if (array.length == 2) {
            stoppedMilliseconds = Integer.parseInt(array[0]) * 60 * 1000
                + Integer.parseInt(array[1]) * 1000;
          } else if (array.length == 3) {
            stoppedMilliseconds = Integer.parseInt(array[0]) * 60 * 60 * 1000 
                + Integer.parseInt(array[1]) * 60 * 1000
                + Integer.parseInt(array[2]) * 1000;
          }
          chronometer.setBase(SystemClock.elapsedRealtime() - stoppedMilliseconds);

        //chronometer.setBase(SystemClock.elapsedRealtime());           
        chronometer.start();
        Log.v(TAG, "timer start");
        long dTime = chronometer.getDrawingTime();
        long autoLink = chronometer.getAutoLinkMask();          

        Log.v(TAG, "getDrawingTime: " + dTime);
        Log.v(TAG, "AutoLink: " + autoLink);

        recorder.setOnInfoListener(this);
        recorder.setOnErrorListener(this);
        recorder.start();               

        msg.setText("Recording");
        startBtn.setEnabled(false);
        stopBtn.setEnabled(true);
    }catch(Exception e){
        Log.v(TAG, "start Recording failed");
        e.printStackTrace();
    }

}

public void stopRecording(){
    if(recorder != null){
        recorder.setOnErrorListener(null);
        recorder.setOnInfoListener(null);
        try{
            recorder.stop();
            Log.v(TAG, "stop Record Begin");

            chronometer.stop();
            Log.v(TAG, "Timer stop");
            //mTimer.stop();
        }catch(IllegalStateException e){
            Log.e(TAG, "stop is ILLEGAL");
        }
        releaseRecorder();
        msg.setText("");
        releaseCamera();
        startBtn.setEnabled(false);
        stopBtn.setEnabled(false);
        playBtn.setEnabled(true);
    }
    else{
        Log.v(TAG, "video cannot stop. Video null");
        long autoLink = chronometer.getAutoLinkMask();
        Log.v(TAG, "stop aLink: " + autoLink);                              
        long elapsedMillis = SystemClock.elapsedRealtime() - chronometer.getBase();
        Log.v(TAG, "elapsedMillis: " + elapsedMillis);
    }
}

private void releaseCamera(){
    if(camera != null){
        try{
            camera.reconnect();
        }catch(IOException e){
            e.printStackTrace();
        }
        camera.release();
        camera = null;
    }
}

private void releaseRecorder(){
    if(recorder != null){
        recorder.release();
        recorder = null;
    }
}

private void playRecording(){
    MediaController mc = new MediaController(this);
    videoView.setMediaController(mc);
    videoView.setVideoPath(outputFileName);
    videoView.start();
    stprevBtn.setEnabled(true);
}

private void stopPlayback(){
    videoView.stopPlayback();
}       

} 
```

}

我要做的下一步是使媒体播放器可以播放 videooutput.mp4。在这里，要让它播放，它首先必须加载视频然后播放。好吧，这是第二步。它也很好用。这是我的代码。

```
private void button6_Click_1(object sender, EventArgs e)
    {
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            // create video source
            FileVideoSource fileSource = new FileVideoSource(openFileDialog1.FileName);

            // open it
            OpenVideoSource(fileSource);
        }
    }

    // Open video source
    private void OpenVideoSource(IVideoSource source)
    {
        // set busy cursor
        this.Cursor = Cursors.WaitCursor;
        // stop current video source
        CloseCurrentVideoSource();
        // start new video source
        videoSourcePlayer.VideoSource = source;
        videoSourcePlayer.Start();                        
        // reset stop watch
        stopWatch = null;
        // start timer
        videoTimer.Start();

        this.Cursor = Cursors.Default;
    }

    // New frame received by the player
    private void videoSourcePlayer_NewFrame(object sender, ref Bitmap image)
    {
        DateTime now = DateTime.Now;
        Graphics g = Graphics.FromImage(image);

        // paint current time
        SolidBrush brush = new SolidBrush(Color.Red);
        g.DrawString(now.ToString(), this.Font, brush, new PointF(5, 5));
        brush.Dispose();

        g.Dispose();
    }

    // Close video source if it is running
    private void CloseCurrentVideoSource()
    {
        if (videoSourcePlayer.VideoSource != null)
        {
            videoSourcePlayer.SignalToStop();
            // wait ~ 3 seconds
            for (int i = 0; i < 30; i++)
            {
                if (!videoSourcePlayer.IsRunning)
                    break;
                System.Threading.Thread.Sleep(100);
            }
            if (videoSourcePlayer.IsRunning)
            {
                videoSourcePlayer.Stop();
            }
            videoSourcePlayer.VideoSource = null;
        }
    } 
```

我在 C# 中使用 AForge 作为媒体播放器。我所做的只是添加 AForge.Controls、AForge.Video 和 AForge.Video.DirectShow 的引用。

现在，我需要做的是将媒体数据逐字节发送到媒体播放器（c#）。我不知道如何做到这一点。我还发现了示例编码[IP 摄像头 android](http://code.google.com/p/ipcamera-for-android/source/browse/)，它将视频带到服务器。但是，我仍然不知道在我的应用程序中执行此操作。

请注意，gsm 将需要使用的 sim 卡的电话号码以及调制解调器 gsm 的端口号。

任何人都可以帮我解决这个问题。或者给我一些关于修改代码的想法。任何帮助表示赞赏。感谢提前。

# java - 如何在运行时在mysql表中创建列

> ID：12617396
> 
> 赞同：-2
> 
> 时间：2012-09-27T08:43:25.417
> 
> 标签：java, mysql, jsp

在我的 Web 应用程序中，我有一个表单，我根据需要创建动态选择框和文本框（可以超过 1 个），默认有一对选择框和文本框，我的表格有两列用于存储该选择框和文本框的值以及值正在存储在我的表中，但问题是如果我在表单中添加多对选择和文本框，如何在我的表中存储值？是否可以根据需要在运行时在表中创建列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:56:35.460

您可以使用良好的旧 JDBC 轻松创建；你可以在这里看到[一个例子](http://www.tutorialspoint.com/jdbc/jdbc-create-tables.htm)。正如其他人所建议的那样，这不是一种适当的设计方法。

我不知道是否可以使用 JPA，因为表创建是您需要在 persistence.xml 中指定的属性。JPA 可以自动创建表，但是每次您想要将数据持久保存到现有表时都会丢失所有数据（除非有一些我不知道的覆盖配置参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:48:22.937

如果您可以计算文本框和选择框的数量，则可以在运行时使用 sql 的 alter table 查询来动态添加列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:57:34.000

您为应用程序创建了错误的架构。为了简单地解决这个尝试模式，如下所示：

```
groupid, selectbox, textbox 
```

并将数据存储在更多行中。

例如，如果有 2 对框，则存储两行：

```
1, 'select', 'text'
1, 'select2', 'text2' 
```

等等。

# c++ - 默认赋值运算符是否对所有成员调用 operator=？

> ID：12617397
> 
> 赞同：6
> 
> 时间：2012-09-27T08:43:29.933
> 
> 标签：c++, class, copy-constructor, assignment-operator

同样，默认复制构造函数是否调用所有成员的复制构造函数？例如，如果一个类有一个非 POD 成员，如下所示：

```
class A
{
    std::string str;
}; 
```

...默认的编译器生成的复制构造函数和赋值运算符会正常工作吗？他们会调用字符串的复制构造函数，`operator=`还是只是按位复制成员变量`str`？

换句话说，拥有`std::string`成员是否意味着此类需要用户实现的复制构造函数和赋值运算符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T08:44:39.307

是的，编译器生成的可以正常工作。

但是，如果您实现自己的并将它们留空，则不会。

如果您不管理内存并且您的所有成员都提供了正确的复制/赋值/销毁，那么您不需要（也不应该）实现自己的复制构造函数/析构函数/赋值运算符。

> 换句话说，拥有 std::string 成员是否意味着此类需要用户实现的复制构造函数和赋值运算符？

不，编译器生成的将完美运行。

# c# - 如何获取在 asp.net reportviewer 控件中加载的报告的名称？

> ID：12617403
> 
> 赞同：1
> 
> 时间：2012-09-27T08:43:55.157
> 
> 标签：c#, asp.net, reporting-services, reportviewer

我`ReportViewer`在我的 asp.net Web 应用程序中使用控件。

有一个名为**View Report**的按钮，以下代码位于`Click`加载报告的 asp.net 按钮事件中。在网页上选择参数并传递给`ReportViewer`控制，如下所示。这工作正常。

```
rptvw.ProcessingMode = ProcessingMode.Remote;
rptvw.ServerReport.ReportServerUrl = new Uri("http://localhost:90/reportserver");
rptvw.ServerReport.ReportPath = "/Reports/Dashboard1";

var param = new ReportParameter[2];
param[0] = new ReportParameter("Parameter1", dropdownlist1.SelectedItem.Text))
param[1] = new ReportParameter("Parameter2", dropdownlist2.SelectedItem.Text));
rptvw.ServerReport.SetParameters(param);
rptvw.ServerReport.Refresh(); 
```

`Dashboard2`例如，我有 3 个单独的报告（.rdl 文件）`Dasboard3`和`Dashboard4`. 在`Dashboard1`（.rdl 文件）报告中，有`actions`、*链接*、单击时会加载`Dashboard2`和`Dashboard3`4 个报告。

我的问题是网页如何知道加载了哪个报告，以便在单击**查看报告**按钮时应用相关参数并显示相应的报告？

我可以使用哪个`ReportViewer`Web 控件事件来确定加载了哪个报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:16:08.353

我从您的问题和您提供的代码中感受到的是，单击此**查看报告**按钮将始终显示**Dashboard1**报告，单击链接后您将显示其他相关报告。因此，参数应该从单击链接的报告中传递，而**不是****从**网页传递。

您可以查看[此](http://technet.microsoft.com/en-us/library/ff519554%28v=sql.105%29.aspx)以获取更多信息。

因此，当您单击其他地方时，实际上应该没有将值传递给网页中的参数的问题。

高温高压

# c++ - C中关于除以零的一些事情

> ID：12617408
> 
> 赞同：19
> 
> 时间：2012-09-27T08:44:09.587
> 
> 标签：c++, c, visual-c++

> **可能重复：**
> [返回值 1.#INF000](https://stackoverflow.com/questions/8488841/value-returning-1-inf000)

我一直认为除以 0 会导致编译的程序崩溃

但是我今天发现（使用 VC++ 2010 Express）除以 0 会得到一个叫做 1.#INF000 的东西，它应该是正无穷大

当它被传递给一个函数时，它被传递为 -1.#IND000

这是怎么回事？

在谷歌上搜索 1.#INF000 和 -1.#IND000 也没有提供任何明确的解释

它只是特定于 VC++ 的东西吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-27T08:52:20.703

浮点除以零的行为不同于整数除以零。

[IEEE 浮点标准](http://en.wikipedia.org/wiki/Division_by_zero#In_computer_arithmetic)区分 +inf 和 -inf，而整数不能存储无穷大。整数除以零会导致未定义的行为。浮点除以零由浮点标准定义，结果为 +inf 或 -inf。

**编辑：**

正如 Luchian 所指出的，C++ 实现不需要遵循 IEEE 浮点标准。如果您使用的实现不遵循 IEEE 浮点标准，则浮点除以零的结果是未定义的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-27T08:46:13.753

编辑：问题是关于 C++ 并且 C++ 中的结果是未定义的，正如**标准所明确指出的那样**，而不是 IEEE 或任何其他实际上不规范 C++ 语言的实体。标准可以。C++ 实现*可能*遵循 IEEE 规则，但在这种情况下，很明显行为是未定义的。

> 我一直认为除以 0 会导致编译的程序崩溃

不，它会导致未定义的行为。任何事情都可能发生，不能保证崩溃。

根据 C++ 标准：

### 5.6 乘法运算符

> 4) 二元 / 运算符产生商，二元 % 运算符产生第一个表达式除以第二个表达式的余数。**如果 / 或 % 的第二个操作数为零，则行为未定义**；否则 (a/b)*b + a%b 等于 a。如果两个操作数都是非负数，则余数是非负数；如果不是，则余数的符号是​​实现定义的79)。（强调我的）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-27T09:16:00.037

引用 ISO C++ 标准的[最新草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)，第 5.6 节（[expr.mul]）：

> 如果 / 或 % 的第二个操作数为零，则行为未定义。

这适用于整数和浮点除法。

特定的 C++ 实现可能符合[IEEE 浮点标准](http://en.wikipedia.org/wiki/IEEE_floating-point)，该标准对除以零有更具体的要求，在这种情况下，该*实现*的行为可能会得到很好的定义。这可能就是为什么浮点除以零会在您的实现中产生 Infinity。但是 C++ 标准不需要 IEEE 浮点行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T14:40:55.753

您可以在 C 中使用以下代码片段。它会引发异常。它适用于关于 windows 的 linux donno

```
#include <fenv.h>

#include <TRandom.h>
static void __attribute__ ((constructor)) trapfpe(void)
{
    /* Enable some exceptions. At startup all exceptions are masked. */
    feenableexcept(FE_INVALID|FE_DIVBYZERO|FE_OVERFLOW);
} 
```

# crystal-reports - 如果部分重复，水晶报告分层分组选项

> ID：12617410
> 
> 赞同：1
> 
> 时间：2012-09-27T08:44:16.263
> 
> 标签：crystal-reports

我遇到一个关于水晶报表如何分组的问题？

我有一个名为 Part 的表

```
 Part_ID   Parent_Part_ID
    B             A
    c             A
    A             NULL
    C             B
    D             B
    E             C
    F             C 
```

A是顶部，B，C，D不仅是子部分，而且是父部分，E，F是最低子部分。

现在，我需要显示从 Parent_part 到 Part 的级别，像这样![在此处输入图像描述](../Images/d77849aadb6c9022280d1607708f3e73.png)

如何在水晶报表中显示此格式数据

我尝试使用`hierachical grouping options`，但结果不是我想要的

![在此处输入图像描述](../Images/a9ac8b83343b8ab09353a056aee90f2c.png)

我需要的结果是：

```
 A 
   B
     C   (shold be show even the part have two parent part)
      E
      F
    D
  C
    E
    F 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:15:40.887

## 解决了！

尝试调用菜单语音`hierachical grouping options`并指定将每条记录链接到其父级的字段。

结果应该类似于：

```
A
  B
    C
      E
      F
    D
  C
    E
    F 
```

**但是 Crystal Reports Hierarchies 只获取每条记录一次，并且不关心同一个元素是否应该在两个父级之下。**

所以我做了一个查询破解，**使用基于父项的同一张表上的 JOIN 直接在数据中创建层次结构**

```
DECLARE @t TABLE (Part_ID varchar(1), Parent_Part_ID varchar(1) );
insert into @t 
SELECT 'B' , 'A'  
UNION   SELECT 'C'   ,   'A' 
UNION   SELECT 'A'   ,  NULL 
UNION   SELECT 'C'   ,   'B' 
UNION   SELECT 'D'  ,    'B' 
UNION   SELECT 'E'    ,  'C' 
UNION   SELECT 'F'    ,  'C' 

SELECT 
 t1.Part_ID as t1, 
 t2.Part_ID as t2, 
 t3.Part_ID as t3, 
 t4.Part_ID as t4
FROM @t t1 
  LEFT JOIN @t t2 on t1.Part_ID = t2.Parent_Part_ID
  LEFT JOIN @t t3 on t2.Part_ID = t3.Parent_Part_ID
  LEFT JOIN @t t4 on t3.Part_ID = t4.Parent_Part_ID
WHERE t1.Parent_Part_ID is null 
```

并**删除了分层分组选项，只是在 t1、t2、t3 上创建了 3 个组，**使用每个组的标题并使用 t4 的详细信息。

结果是，根据需要，

```
A
 B
  C
   E
   F
  D
 C
  E
  F 
```

如果有人需要，[这里是 .rpt 。](http://beativoi.altervista.org/opentech/Hierarchy.rpt)

# asp.net - 宽度未适用于 IE 兼容模式

> ID：12617413
> 
> 赞同：0
> 
> 时间：2012-09-27T08:44:27.137
> 
> 标签：asp.net, html, css

当我使用以下 css 时，宽度未适用于 IE 兼容模式

```
.multipleShipmentsGrid
{
    border-color:#949EAA;
    border-style:solid;
    border-width:1px;
    width:80%!important;
    border-collapse:collapse;
} 
```

如果我在 vb.net 代码端应用宽度 80%，它的工作正常，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:50:19.583

如果您的元素是`display:inline-block;`您应该指定`_display:inline;`IE7/compat 模式来设置宽度。设置`zoom:1;`也可能有所帮助。容器元素的宽度可能存在问题，因此无法为您的元素设置 80% 的宽度。

[如果没有http://jsfiddle.net](http://jsfiddle.net)上的实时示例，很难说出问题的原因。

# connection - 在黑莓中加载图像 - Lwiit

> ID：12617428
> 
> 赞同：0
> 
> 时间：2012-09-27T08:45:19.353
> 
> 标签：connection, lwuit

我用 lwuit 开发诺基亚和黑莓。我尝试从互联网加载一些图像。在诺基亚中一切正常，但在黑莓中我得到 IllegalArgumentException。

我发现问题出现在 createImage(byte[] bytes, int offset, int len) function 中。设备日志告诉我发生失败的源函数在编码图像类中。

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T11:13:56.073

我发现了问题。这是因为我使用 POST 方法。我认为如果我们不发送参数但使用方法 POST 会出现 HTTP 消息标头中的 Content-Length 问题，这就是我收到错误的原因（400 或 411）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:23:04.360

该问题可能与有据可查的黑莓网络有关。有多个建议的修复（例如，使用 deviceside=true）在某些情况下有效，但在其他情况下失败。这篇文章解释 RIM 网络问题实在是太过分了，但我们确实为[Codename One](http://www.codenameone.com/)解决了这些问题。

# java - 如何使用 Selenium Web 驱动程序从文件系统拖放到浏览器

> ID：12617433
> 
> 赞同：1
> 
> 时间：2012-09-27T08:45:34.953
> 
> 标签：java, selenium, selenium-webdriver

我正在尝试自动化要求，我必须将图像（jpeg 或 png）从文件中拖放到浏览器中。我正在使用 Selenium Web Driver 作为 JAVA 的自动化工具，我试过但 selenium 不支持浏览器之外的任何东西。

我需要帮助，谁能指导我如何实现自动化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:03:41.353

您将无法使用 selenium 执行此操作。*selenium 绑定*可以访问浏览器实例（`WebDriver`），但不能访问它之外的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:29:44.680

你最好使用**autoit**。

[拖放](https://www.autoitscript.com/forum/topic/122881-files-drag-drop/ "拖放”")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T02:41:00.307

如果您尝试将图像放入某种输入中，您可以试试这个。我用它来上传带有硒的文件。

```
WebElement inputField = driver.findElement(By.xpath("//*[@id='MyInputField']");

inputField.sendKeys("path to image"); 
```

希望这可以帮助。

# javascript - 我如何检查页面中是否有视频

> ID：12617435
> 
> 赞同：0
> 
> 时间：2012-09-27T08:45:45.887
> 
> 标签：javascript, jquery, google-chrome-extension

我正在使用*JavaScript*构建我的第一个 chrome 扩展。它需要自动识别页面中的视频。然后发送信息。到网络服务。
我不确定保存*URL*和*视频标签*是否是记住视频的好主意。你觉得呢？这是个好主意吗？如果可以，我如何识别页面内的视频标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:46:58.087

谷歌浏览器中的控制台会告诉您是否加载了网站以外的内容。

右键单击检查页面，然后单击控制台。

# php - 验证函数中的复选框并返回结果

> ID：12617438
> 
> 赞同：0
> 
> 时间：2012-09-27T08:46:06.713
> 
> 标签：php, function

我创建了一个小函数来验证表单中的复选框控件。我不确定函数中的数组...

函数中的return真的返回一个数组吗？

我需要将 $arr_category 声明为数组吗？换句话说，我的功能是否有意义，需要改进什么？

```
function val_checkbox($name, $required = false) {
    global $warning;
    $value = array();

    if(isset($_POST[$name])) {
        $value = $_POST[$name];

    } else {
        if ($required) {
            $warning[$name] = "Required field!";
        }
    }

    return $value;
}

$arr_category = val_checkbox('category'); // category 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:57:06.377

我不知道这个功能不起作用！

`$value`将是一个数组，无需声明`$arr_caterogy`为数组。

它似乎对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:10:13.063

你可以试试这个

```
function val_checkbox($name, $required = false)
{
    global $warning;
    $value = false;
    if(isset($_POST[$name])) $value = $_POST[$name];
    else
    {
        if ($required) $warning[$name] = "Required field!";
    }
    return $value;
}
$arr_category = val_checkbox('category'); 
```

所以如果无效就可以`false`作为返回值，否则返回复选框的值，不需要声明`$arr_category`为数组。

# jquery - 想了解 domReady.done、domReady.timer 是什么意思吗？

> ID：12617441
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:46:20.073
> 
> 标签：jquery, javascript, javascript-framework, unobtrusive-javascript

我在一本 JavaScript 书中找到了这个例子

```
// Checks to see if the DOM is ready for navigation
function isDOMReady() {
    // If we already figured out that the page is ready, ignore

    if (domReady.done) return false;
    // Check to see if a number of functions and elements are
    // able to be accessed
    if (document && document.getElementsByTagName && document.getElementById && document.body) {
        // If they're ready, we can stop checking
        clearInterval(domReady.timer);
        domReady.timer = null;
        // Execute all the functions that were waiting
        for (var i = 0; i < domReady.ready.length; i++)
        domReady.ready[i]();
        // Remember that we're now done
        domReady.ready = null;
        domReady.done = true;
    }
}

// calling the domReady function
domReady(function () {
    alert("The DOM is loaded!");
    tag("h1")[0].style.border = "4px solid black";
}); 
```

想了解什么`domReady.done`，是什么`domReady.timer`意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:51:30.347

`domReady.done`是一个标志，一旦 DOM 准备好，就会设置为 true。`domReady.timer`是对间隔开始的引用/句柄，`window.setInterval`以便`window.clearInterval()`在 DOM 准备好后立即清除它，因为不再需要检查。

# java - 从 Java 创建 .BPMN2.0.xml

> ID：12617447
> 
> 赞同：0
> 
> 时间：2012-09-27T08:46:38.587
> 
> 标签：java, xml, api, bpmn, activiti

我需要使用 Java 创建我的流程。这个想法是从 db 读取数据，然后使用这些信息个性化流程。

例如，我可以在我的任务中创建一个表单，其中包含一个加载了从 sql 查询中提取的信息的组合框。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:19:13.073

您可以使用或扩展eclipse的[activiti 设计器。](http://docs.codehaus.org/display/ACT/Activiti+Designer+Developer+Guide)它是开源的，也许您可​​以设计一个扩展来从您的数据库加载数据。

# objective-c - 如何在不同的类中使用 int

> ID：12617448
> 
> 赞同：0
> 
> 时间：2012-09-27T08:46:43.503
> 
> 标签：objective-c, xcode

```
//class1

competitionSettingsViewController.m

int *myint;

// in some void I made.
myint = 7;

//class2
competitionViewcontroller.m

#import "competitionSettingsViewController.m" 

int *myextraint = 0;

competitionSettingsViewController a = [[competitionSettingsViewController alloc]........]
myextraint = a.myint; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:54:02.650

您可以按如下方式使用[属性：](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

```
@interface MyObject : NSObject
@property int myInt;
@end 
```

然后，您可以按如下方式访问它：

```
MyObject mo        = [[MyObject alloc] init];
int myExtraInt     = mo.myInt; 
int myAltExtraInt  = [mo myInt]; 
```

# android - Android 应用程序在 WIFI 和 3G（无代理）上工作，但在 3G 上不工作（如果分配了代理和端口）

> ID：12617451
> 
> 赞同：6
> 
> 时间：2012-09-27T08:46:53.097
> 
> 标签：android, sockets, ssl, ksoap2, 3g

我遇到了一些奇怪的问题，当我切换到 3G 服务（带代理）时，只有我的应用程序无法正常工作，但它在 WIFI 和 3G（不带代理）中运行良好。

我的 Starhub（网络提供商）提供的默认代理和端口：

```
Proxy: 10.12.1.2
Port: 80 
```

对于数据，我正在向我的网络服务器发送肥皂请求。

这是我的代码：

```
public class SearchThread extends Thread {
private String mUrl;
private SoapSerializationEnvelope mEnvelop;
private Handler mHandler;
private String mSoapAction;
private KeepAliveHttpsTransportSE mTransport;

public SearchThread(String url) {
    this.mUrl = url;
}

@Override
public void run() {
    mEnvelop = new SoapSerializationEnvelope(SoapSerializationEnvelope.VER11);
    mEnvelop.setOutputSoapObject(interfaceListener.getSoapObject(element));
    mSoapAction = interfaceListener.getSoapAction(element);
    try {
        TrustManagerManipulator.allowAllSSL();
        mTransport = new KeepAliveHttpsTransportSE(URLS.URL_MAIN, 443, mUrl, 60000);
        mTransport.call(mSoapAction, mEnvelop);
        if (this.isInterrupted()) {
            Log.v(TAG,"Interrupted");
            return;
        }
        recevedSoapResponse(mEnvelop.getResponse());
    } catch (SocketException ex) {
        Log.e("Error : ", "Error on soapPrimitiveData() " + ex.getMessage());
        ex.printStackTrace();
    } catch (IOException e) {
        interfaceListener.recievedParsingResults(
                PARSER.RESULT.CONNECTION_FAILED, element, mHandler, mView);
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
        interfaceListener.recievedParsingResults(
                PARSER.RESULT.INTERNAL_ERROR, element, mHandler, mView);
    }
}
private void recevedSoapResponse(Object response) {
   //Parsing XML here.
}
public class KeepAliveHttpsTransportSE extends HttpsTransportSE
{
    private final String host;
    private final int port;
    private final String file;
    private final int timeout;
    private ServiceConnection serviceConnection;

    public KeepAliveHttpsTransportSE (String host, int port, String file, int timeout) {
        super(host, port, file, timeout);
        this.host = host;
        this.port = port;
        this.file = file;
        this.timeout = timeout;
    }
 //@Override
    public ServiceConnection getServiceConnection() throws IOException
    {
        if (serviceConnection == null) {
            serviceConnection = new HttpsServiceConnectionSE(host, port, file, timeout);
            serviceConnection.setRequestProperty("Connection", "keep-alive");
        }
        return serviceConnection;
    }
} 
```

}

这是我的 SSL 代码：

```
public class TrustManagerManipulator implements X509TrustManager {
    private static TrustManager[] trustManagers;
    private static final X509Certificate[] acceptedIssuers = new X509Certificate[] {};

public boolean isClientTrusted(X509Certificate[] chain) {
    return true;
}

public boolean isServerTrusted(X509Certificate[] chain) {
    return true;
}

public static void allowAllSSL() {
    HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {
        public boolean verify(String hostname, SSLSession session) {
            return true;
        }
    });
    SSLContext context = null;
    if (trustManagers == null) {
        trustManagers = new TrustManager[] { new TrustManagerManipulator() };
    }
    try {
        context = SSLContext.getInstance("TLS");
        context.init(null, trustManagers, new SecureRandom());
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (KeyManagementException e) {
        e.printStackTrace();
    }
    HttpsURLConnection.setDefaultSSLSocketFactory(context
            .getSocketFactory());
}

public void checkClientTrusted(X509Certificate[] chain, String authType)
        throws CertificateException {
}

public void checkServerTrusted(X509Certificate[] chain, String authType)
        throws CertificateException {
}

public X509Certificate[] getAcceptedIssuers() {
    return acceptedIssuers;
}
} 
```

例外：

```
09-27 12:21:03.295: W/System.err(8924): java.net.SocketException: Socket is closed
09-27 12:21:03.295: W/System.err(8924):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.checkOpen(OpenSSLSocketImpl.java:262)
09-27 12:21:03.295: W/System.err(8924):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:273)
09-27 12:21:03.295: W/System.err(8924):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:257)
09-27 12:21:03.295: W/System.err(8924):     at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:210)
09-27 12:21:03.295: W/System.err(8924):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:477)
09-27 12:21:03.295: W/System.err(8924):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:441)
09-27 12:21:03.295: W/System.err(8924):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
09-27 12:21:03.295: W/System.err(8924):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
09-27 12:21:03.295: W/System.err(8924):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
09-27 12:21:03.300: W/System.err(8924):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
09-27 12:21:03.300: W/System.err(8924):     at libcore.net.http.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:280)
09-27 12:21:03.300: W/System.err(8924):     at org.ksoap2.transport.HttpsServiceConnectionSE.openOutputStream(HttpsServiceConnectionSE.java:98)
09-27 12:21:03.300: W/System.err(8924):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:157)
09-27 12:21:03.300: W/System.err(8924):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
09-27 12:21:03.300: W/System.err(8924):     at com.mobile.utils.parser.SearchThread.run(SearchThread.java:25) 
```

附加信息：所有其他应用程序都在 3G 网络上运行（带/不带代理设置），并且在我的应用程序中，只有 SOAP 请求不起作用。

我已经尝试了所有可能的情况，但没有运气。请给我一些意见。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-12T09:02:14.590

也许太晚了四个，但我希望这对未来像我一样到达这里的人有所帮助，因为同样的问题而疯狂。

**这是一个Android错误**。一切都适用于 WiFi，但它在 3G 上崩溃。它发生在我的 4.1 上，但在 4.2.2 上没有问题。

要解决它，您必须修改文件**org.ksoap2.transport.HttpTransportSE**（我扩展了一个新文件并将其命名为 MyHttpTransportSE，因为我使用的是 ksoap2 程序集 jar）。只需覆盖方法*public void call(String soapAction, SoapEnvelope envelope)*注释掉该行

```
 //connection.setRequestProperty("Connection", "close"); 
```

当然，如果您使用 SSL，则需要从新的*MyHttpTransportSE扩展您自己的**HttpsTransportSE*。

 ***HttpTransportSE**源代码：[https ://github.com/karlmdavis/ksoap2-android/blob/master/ksoap2-j2se/src/main/java/org/ksoap2/transport/HttpTransportSE.java?source=c](https://github.com/karlmdavis/ksoap2-android/blob/master/ksoap2-j2se/src/main/java/org/ksoap2/transport/HttpTransportSE.java?source=c)

**HttpsTransportSE**源码：[https ://github.com/mosabua/ksoap2-android/blob/master/ksoap2-j2se/src/main/java/org/ksoap2/transport/HttpsTransportSE.java](https://github.com/mosabua/ksoap2-android/blob/master/ksoap2-j2se/src/main/java/org/ksoap2/transport/HttpsTransportSE.java)

更多详细信息：[https ://groups.google.com/forum/#!searchin/ksoap2-android/closed/ksoap2-](https://groups.google.com/forum/#!searchin/ksoap2-android/closed/ksoap2-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-04T15:27:31.870

正如 Ender Muab'Dib 所说，您必须将“连接”属性设置为“关闭”。但是没有必要扩展 HttpTransportSE。根据您的代码编写方式，可能更容易将第三个参数传递给“调用”函数，该函数是参数列表。

```
ArrayList<HeaderProperty> headerPropertyArrayList = new ArrayList<HeaderProperty>();
headerPropertyArrayList.add(new HeaderProperty("Connection", "close"));
transport.call(soapAction, envelope, headerPropertyArrayList); 
```*

# php - 更新 RSS 提要的最佳方式

> ID：12617452
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:46:54.873
> 
> 标签：php, caching, rss

我的网站有数千个提要。其中一些一直在下载，其中一些每月只下载几次，而另一些则从不下载。

例子：

*   most_popular_products.rss（10 次下载/分钟）

*   category1.rss（10 次下载/天）

*   product1_comments.rss (0 下载/天)

记住这些不成比例，处理更新提要的最佳解决方案是什么？

我的想法：

*   每个提要每小时运行一次的 Cron 脚本 - 检查更新以及是否有任何用新创建的静态 rss 文件替换现有的静态 rss 文件（数千个 cron 脚本，其中大多数将更新未使用的提要）
*   使 name_of_feed.rss 成为一个 PHP 文件，它将决定做什么 - 返回一个缓存版本的提要或创建一个新版本（每次下载都意味着另一个 PHP 脚本运行 - 需要许多服务器资源）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:29:29.657

我个人会选择cron。

每分钟 10 个请求并不多，您的 Web 服务器可以轻松地提供服务，这就像平均每 6 秒 1 个请求。

或者可能是一个更好的解决方案，根据您在网站中插入新内容的频率，您可以在每次向网站添加新文章时更新您的提要。

所以更合适的问题是您多久更新一次您需要在您的 RSS 提要中包含的内容。

如果不是那么频繁，我会在每次添加一些新内容时更新 rss 提要。

# javascript - 检查实例是否由 javascript 中的相同构造函数构造

> ID：12617457
> 
> 赞同：3
> 
> 时间：2012-09-27T08:47:05.577
> 
> 标签：javascript, class, object, types

> **可能重复：**
> [自定义对象的 Javascript 类型](https://stackoverflow.com/questions/1486300/javascript-type-of-custom-object)

我有一个关于 JavaScript 实例的问题。让我们考虑以下代码：

```
function Box(col)
{
   var color = col;

   this.getColor = function()
   {
       return color;
   };
}

var blueBox=new Box("blue");
console.log(blueBox.getColor())

var greenBox=new Box("green");
console.log(greenBox.getColor())
console.log(typeof(blueBox))
console.log(typeof(greenBox)) 
```

现在，当我们检查最后两个语句时，浏览器将 type 打印为`object`
How do I check If they are created from same constructor `Box`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:51:00.387

您可以使用**[instanceof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)**，例如：

```
var blueBox=new Box("blue");
if (blueBox instanceof Box){
  //yay 4 boxes!
} 
```

如果您想检查两个元素，您还可以比较它们[**`constructor`**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/constructor)的 s：

```
var blueBox = new Box("blue");
var greenBox = new Box("green");
if (blueBox.constructor === greenBox.constructor){
  //yay 4 same constructors
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:51:38.660

采用`instanceof`

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:52:59.953

就 javascript 而言，您的自定义对象`Box`是一个对象，但它可以是一个对象类型的*实例。*`Box`

# matlab - Matlab，线性规划

> ID：12617460
> 
> 赞同：2
> 
> 时间：2012-09-27T08:47:18.163
> 
> 标签：matlab, linear-programming

我想使用 MATLAB 7 解决这个线性规划（单纯形）问题，但它返回

> 退出：问题是无限的。

这个功能

```
f = 2(15 s0 + 8s1 + 2576s2 + 744s3 + 427s4 + 8s5) 
```

应以满足每个观察的两个约束的方式最小化

```
0.1s0 + 0.1s1 + 14.5s2 + 4s3 + 2.4s4 – a0 − a1 − 145a2 − 40a3 − 24a4 ≥ −2.2

0.1s0 + 0.1s1 + 14.5s2 + 4s3 + 2.4s4 + a0 + a1 + 145a2 + 40a3 + 24a4 ≥ 2.2 
```

`S5`是0。`a5`我用过

```
f = [15   8  2576  744  427 8   15   8  2576 744  427 8];

b = [-2.2; 2.2];

a = [0.1  0.1 14.5  0.4  2.4 0 -1 -1  -145 -40 -24 0 ; 0.1  0.1 14.5  4  2.4 0 1  1   145  40  24 0]; 

[x, fval, exitflag, output, lambda] = linprog(f, a, b) 
```

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:50:37.943

您没有将`s5`and限制`a5`为实际上为零，因为您将`a`矩阵中的相应系数设置为零。因此，它们可以取任何值，并且 LP 是无界的。

要修复，请添加一个*等式约束*：

```
beq = [0; 0];
aeq = [0 0 0 0 0 1 0 0 0 0 0 0; 0 0 0 0 0 0 0 0 0 0 0 1];
[x,fval,exitflag,output,lambda] = linprog(f,a,b,aeq,beq) 
```

或者，只是从 LP 中删除`s5`，`a5`因为他们根本没有贡献。

# javascript - 如何提高谷歌地图加载时间？

> ID：12617468
> 
> 赞同：1
> 
> 时间：2012-09-27T08:47:56.590
> 
> 标签：javascript, performance, google-maps

我的网站有许多页面显示带有一堆标记的谷歌地图，[这里有一个例子](http://festivals.ie/festival/map?location=EUROPE&types=HEADLINE&types=MUSIC&types=COMEDY&types=SPORT&types=ARTS&types=FILM&types=FOOD_AND_DRINK&types=OTHER)。

如您所见，地图需要很长时间才能加载，我正在寻找改进的方法。我希望使用[GeoWebCache](http://geowebcache.org/docs/current/introduction/whatis.html)来缓存服务器上的地图图块，但我被告知这将违反 Google 地图的使用条款。

我用来显示地图和添加标记的代码附在下面。这是 Google Maps V3 JavaScript API 的一个非常简单的用法，所以我认为优化它的空间不大。我可以采取任何明显的步骤来减少地图加载时间吗？

```
SF.Map = function(elementId, zoomLevel, center, baseImageDir) {

    this._baseImageDir = baseImageDir;
    var focalPoint = new google.maps.LatLng(center.latitude, center.longitude);

    var mapOptions = {
        streetViewControl: false,
        zoom: zoomLevel,
        center: focalPoint,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false
    };

    this._map = new google.maps.Map(document.getElementById(elementId), mapOptions);
    this._shadow = this._getMarkerImage('shadow.png');
};

SF.Map.prototype._getMarkerImage = function(imageFile) {
    return new google.maps.MarkerImage(this._baseImageDir + '/map/' + imageFile);
};

SF.Map.prototype._addField = function(label, value) {
    return "<span class='mapField'><span class='mapLabel'>" + label + ": </span><span class='mapValue'>" + value + "</span></span>";
};

/**
 * Add a marker to the map
 * @param festivalData Defines where the marker should be placed, the icon that should be used, etc.
 * @param openOnClick
 */
SF.Map.prototype.addMarker = function(festivalData, openOnClick) {

    var map = this._map;
    var markerFile = festivalData.markerImage;

    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(festivalData.latitude, festivalData.longitude),
        map: map,
        title: festivalData.name,
        shadow: this._shadow,
        animation: google.maps.Animation.DROP,
        icon: this._getMarkerImage(markerFile)
    });

    var bubbleContent = "<a class='festivalName' href='" + festivalData.url + "'>" + festivalData.name + "</a><br/>";
    var startDate = festivalData.start;
    var endDate = festivalData.end;

    if (startDate == endDate) {
        bubbleContent += this._addField("Date", startDate);

    } else {
        bubbleContent += this._addField("Start Date", startDate) + "<br/>";
        bubbleContent += this._addField("End Date", endDate);
    }

    // InfoBubble example page http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html
    var infoBubble = new InfoBubble({
        map: map,
        content: bubbleContent,
        shadowStyle: 1,
        padding: 10,
        borderRadius: 8,
        borderWidth: 1,
        borderColor: '#2c2c2c',
        disableAutoPan: true,
        hideCloseButton: false,
        arrowSize: 0,
        arrowPosition: 50,
        arrowStyle: 0
    });

    var mapEvents = google.maps.event;

     // either open on click or open/close on mouse over/out
    if (openOnClick) {

        var showPopup = function() {
            if (!infoBubble.isOpen()) {
                infoBubble.open(map, marker);
            }
        };
        mapEvents.addListener(marker, 'click', showPopup);

    } else {

        mapEvents.addListener(marker, 'mouseover', function() {
            infoBubble.open(map, marker);
        });

        mapEvents.addListener(marker, 'mouseout', function() {
            infoBubble.close();
        });
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:33:37.980

您可以尝试“延迟加载”谷歌地图，如下所示：

```
var script=document.createElement("script");
script.type="text/javascript";
script.async=true;
script.src="http://maps.google.com/maps/api/js?sensor=false&callback=handleApiReady";
document.body.appendChild(script); 
```

或者甚至像我这样为 Facebook AIP 使用它，这样就不会减慢初始加载时间。

```
$.getScript('http://connect.facebook.net/en_US/all.js#xfbml=1', function() { 
           FB.init({appId: opt.facebook_id, status: true, cookie: true, xfbml: true}); 
}); 
```

示例：[http ://blog.rotacoo.com/lazy-loading-instances-of-the-google-maps-api](http://blog.rotacoo.com/lazy-loading-instances-of-the-google-maps-api)

还要查看您的 HTML，您有很多 JS 应该在外部 JS 文件中而不是内联，您可以不传递数组而不是有很多重复的内联代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:08:52.157

一种选择是拍摄静态快照并在其后面创建地图。地图完全加载后，将动态地图替换为静态地图。

我还建议你看看： [https ://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

可能您可以在不使用完整的动态地图 API 的情况下为您的站点提供更简单的解决方案。

# jquery - 设置超时后重置表格

> ID：12617470
> 
> 赞同：0
> 
> 时间：2012-09-27T08:48:08.693
> 
> 标签：jquery, forms, settimeout, reset

我想在 setTimeout 函数调用后重置表单，不知何故我的语法无法正常工作

```
<script>
setTimeout(function() {
   $('#alert-success').slideUp('slow', resetForm('crt_clt'));
}, 5000);
</script>​​ 
```

请更正我的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:49:00.163

您应该正确使用*完整*的回调函数[`slideUp()`](http://api.jquery.com/slideUp/)：

```
setTimeout(function() {
   $("#alert-success").slideUp("slow", function() {
       resetForm("crt_clt");
   });
}, 5000); 
```

# c# - 调整 MVC 4 WebApi XmlSerializer 以丢失名称空间

> ID：12617471
> 
> 赞同：13
> 
> 时间：2012-09-27T08:48:10.677
> 
> 标签：c#, xml, asp.net-mvc, xml-serialization, asp.net-web-api

我正在开发一个 MVC WebAPI，它使用 EF 和 POCO 类进行存储。我想要做的是从 XML 中删除名称空间，以便端点将返回并接受没有它的 xml 对象。（json工作得很好）

```
<ACCOUNT xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/Platform.Services.AccountService.Data">
<id>22</id>
<City i:nil="true"/>
<Country i:nil="true"/>
<Email>testas@email.com</Email>
<Phone i:nil="true"/> ... 
```

我希望这个工作

```
 <ACCOUNT>
    <id>22</id>
    <City i:nil="true"/>
    <Country i:nil="true"/>
    <Email>testas@email.com</Email>
    <Phone i:nil="true"/> ... 
```

希望不必用一堆属性来装饰 POCO。

我已经为此设置了一个测试解决方案，实际上，这些方法正在被击中（一定是我系统中的其他问题）。无论如何-我使用此解决方案得到的结果是：

```
<ArrayOfAccount>
<Account>
<id>22</id>
<name>TestAcc</name>
<parentid xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:nil="true"/>
<status_id xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:nil="true"/>
<Email>Test@Test.com</Email>
</Account>
</ArrayOfAccount> 
```

摆脱了顶部的架构，但属性现在搞砸了:(这是一个[示例项目的链接](http://dl.dropbox.com/u/26220441/MvcApplication1.zip)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T09:59:31.357

这里的答案是标记[Remove namespace in XML from ASP.NET Web API](https://stackoverflow.com/questions/12590801/remove-namespace-in-xml-from-asp-net-mvc-web-api)。\

如果您根本不想装饰您的 POCO，请使用第一个选项：

```
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

如果您使用选项 2，则可能需要添加对`System.Runtime.Serialization`

假设这样的帖子接受设置正确：

GET http://任何旧服务器/api/foos/5 接受：application/xml

**控制器**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Runtime.Serialization;
using System.Web.Http;

namespace CutomXmlFormater.Controllers
{
//[DataContract(Namespace = "")]
public class Foo
{
    //[DataMember]
    public string Bar { get; set; }
}

public class FoosController : ApiController
{
    // GET api/foos/5
    public Foo Get(int id)
    {
        return new Foo() { Bar = "Test" };
    }
} 
```

}

**配置（App_Start/WebApiConfig）**

```
//(Use this is you don't go the data contact and model annotation route)
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

**结果**

任一（带有注释和数据联系）：

```
<Foo xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    xmlns:xsd="http://www.w3.org/2001/XMLSchema"><Bar>Test</Bar></Foo> 
```

或者（使用 XML 序列化程序路由）：

```
<Foo xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Bar>Test</Bar></Foo> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T09:39:42.880

也许你可以试试这个：

用您自己的替换默认 XmlFormatter：

```
GlobalConfiguration.Configuration.Formatters.Add(new CustomXmlFormatter());
GlobalConfiguration.Configuration.Formatters.Remove(GlobalConfiguration.Configuration.Formatters.XmlFormatter); 
```

并使用 XmlSerializer 实现它，并在序列化期间指定空命名空间，如下所示：

```
public CustomXmlFormatter()
{
    SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/xml"));
    SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));
    Encoding = new UTF8Encoding(false, true);
}

protected override bool CanReadType(Type type)
{
    if (type == (Type)null)
        throw new ArgumentNullException("type");

    if (type == typeof(IKeyValueModel))
        return false;

    return true;
}

protected override bool CanWriteType(Type type)
{
    return true;
}

protected override Task OnReadFromStreamAsync(Type type, Stream stream, HttpContentHeaders contentHeaders, FormatterContext formatterContext)
{
    return Task.Factory.StartNew(() =>
            {
                using (var streamReader = new StreamReader(stream, Encoding))
                {
                    var serializer = new XmlSerializer(type);
                    return serializer.Deserialize(streamReader);
                }
            });
}

protected override Task OnWriteToStreamAsync(Type type, object value, Stream stream, HttpContentHeaders contentHeaders, FormatterContext formatterContext, System.Net.TransportContext transportContext)
{
    var serializer = new XmlSerializer(type);
    return Task.Factory.StartNew(() =>
            {
                using (var streamWriter = new StreamWriter(stream, Encoding))
                {
                    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
                    ns.Add("", "");
                    serializer.Serialize(streamWriter, value, ns);
                }
            });
    }
} 
```

自定义 XML 序列化程序是从[这里](http://myrandomykien.blogspot.com/2012/02/default-xmlserializer-for-web-api-do.html)被盗的，因此未经测试。

这应该序列化对象而不写命名空间。我不确定它是否适用于反序列化的 OOTB，您可能必须尝试`XmlSerializer.Deserialize()` [提供事件](http://msdn.microsoft.com/en-us/library/w7hdy1ss.aspx)并处理[UnknownElement](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.unknownelement.aspx)或[UnknownNode](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlnodeeventhandler.aspx)事件的重载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T12:50:06.600

自从我弄乱 MVC 4 以来已经有一段时间了，但我们最终用 XmlSerializer 替换了默认格式化程序，如下所示：

```
protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings = GetSerializeSettings();
        GlobalConfiguration.Configuration.Formatters.XmlFormatter.UseXmlSerializer = true;
    }

    internal JsonSerializerSettings GetSerializeSettings()
    {
        return new JsonSerializerSettings
                           {
                               Formatting = Formatting.Indented,
                               ContractResolver = new CamelCasePropertyNamesContractResolver(),
                               Converters = new List<JsonConverter> { new IsoDateTimeConverter() }
                           };
    } 
```

这可能会有所帮助...我知道我们还使用 POCO 上的属性自定义了属性名称，您说您不想这样做，但那是因为我们希望它们是驼峰式的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T05:20:16.140

我已经自定义了 Boris 对 MVC Webapi 5 的回答。使用以下任一 http 标头使用 CustomFormatter 呈现结果：

接受：应用程序/xml

接受：文本/xml

WebApiConfig.cs：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        GlobalConfiguration.Configuration.Formatters.Add(new CustomXmlFormatter());
        GlobalConfiguration.Configuration.Formatters.Remove(GlobalConfiguration.Configuration.Formatters.XmlFormatter);
    }
} 
```

CustomXmlFormatter.cs ：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Net.Http.Formatting;
using System.Net.Http.Headers;
using System.Text;
using System.Threading.Tasks;
using System.Web;
using System.Xml.Serialization;

namespace Custom.Formatter
{
    public class CustomXmlFormatter: MediaTypeFormatter
    {
        private  UTF8Encoding encoder;

        public CustomXmlFormatter()
        {
            SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/xml"));
            SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));
            encoder = new UTF8Encoding(false, true);
        }

        public override bool CanReadType(Type type)
        {
            if (type == (Type)null)
                throw new ArgumentNullException("type");

            //Type filtering
            if (type == typeof(SendEmailMessageResponse) || type == typeof(SendSmsMessageResponse))
                return true;
            else
                return false;
        }

        public override bool CanWriteType(Type type)
        {
            return true;
        }

        public override Task<object> ReadFromStreamAsync(Type type, Stream stream, HttpContent content, IFormatterLogger formatterLogger)
        {
            return Task.Factory.StartNew(() =>
                    {
                        using (var streamReader = new StreamReader(stream, encoder))
                        {
                            var serializer = new XmlSerializer(type);
                            return serializer.Deserialize(streamReader);
                        }
                    });
        }

        public override Task WriteToStreamAsync(Type type, object value, Stream stream,    HttpContent content, TransportContext transportContext)
        {
            var serializer = new XmlSerializer(type);
            return Task.Factory.StartNew(() =>
                    {
                        using (var streamWriter = new StreamWriter(stream, encoder))
                        {
                            XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
                            ns.Add("", "");
                            serializer.Serialize(streamWriter, value, ns);
                        }
                    });
        }
    }
} 
```

# javascript - 在 Microsoft Word 中使用 javascript 应用突出显示 HTML 文本

> ID：12617472
> 
> 赞同：1
> 
> 时间：2012-09-27T08:48:14.020
> 
> 标签：javascript, jquery

**我有以下代码用于使用 javascript 突出显示 html 文本：**

```
var counter = 1;
function BindEventForHighlight() {
   $('#ParaFontSize').bind("mouseup", HighlightText);
   $('#ParaFontSize').unbind("mouseup", RemoveHighlight);
}

function UnBindHighlightEvent() {
   $('#ParaFontSize').bind("mouseup", RemoveHighlight);
   $('#ParaFontSize').unbind("mouseup", HighlightText);
}

function HighlightText() {

   var text = window.getSelection();
   var start = text.anchorOffset;
   var end = text.focusOffset - text.anchorOffset; 

   range = window.getSelection().getRangeAt(0);
   range1 = window.getSelection().toString();
   var selectionContents = range.extractContents();
   var span = document.createElement("span");

   span.appendChild(selectionContents);

   span.setAttribute("id", counter);
   span.setAttribute("class", "highlight");
   range.insertNode(span);
   counter++;

}

function RemoveAllHighlights() {
  var selection = document.getElementById('ParaFontSize');
  var spans = selection.getElementsByTagName("span");
  for (var i = 0; i < spans.length; i++) {
      spans[i].className = ""; 
  }
}

function RemoveHighlight() {
   var selection = window.getSelection();
  if (selection.toString() !== "" &&
           selection.anchorNode.parentNode.nodeName === "SPAN") {
     selection.anchorNode.parentNode.className = "";
  }
  else {
     return false;
  }
} 
```

HighlightText 函数使用范围对象来突出显示文本。我想将所选文本的开始和结束保存到数据库中，当用户返回同一页面时，他将看到上一次突出显示的文本。我还想要其他场景如下：

1.  当用户突出显示某些文本时，他将能够取消突出显示所有或部分突出显示的文本并保持剩余的文本突出显示。

2.  用户能够清除页面中所有突出显示的文本。

假设我想要这个荧光笔作为 MS word 中的荧光笔。

提前感谢真的很感激。

# apache - HTACCESS Mod_Rewrite 问题

> ID：12617473
> 
> 赞同：0
> 
> 时间：2012-09-27T08:48:18.290
> 
> 标签：apache, .htaccess, url, mod-rewrite

我的 mod_rewrite 有点麻烦，我在以前的 litespeed VPS 上运行得非常好。现在我使用的是我自己的运行 CentOS 6 的专用服务器，所以我不知道我是否没有正确配置。

这是它目前的样子：

http:// ***** **** .com/?pageName=FourthPage

这就是我希望它看起来的样子：

http:// ***** **** .com/FourthPage

这是我当前的 .htaccess 文件：

```
RewriteEngine On

RewriteCond %{REQUEST_fileNAME} !-d
RewriteCond %{REQUEST_fileNAME} !-f
RewriteRule ^([^/\.]+)/?$ index.php?pageName=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:53:49.580

我不擅长 htaccess 语法。如果您有权访问，则应直接在服务器配置中配置此类规则。将 htaccess 用于此类目的只是一种解决方法。然而：

RequestRule 中的模式是错误的。尤其是尾部斜杠 ('/')。匹配是什么意思？您可能需要再次阅读该规则的文档。该模式与完整的 URL 不匹配，而在 htaccess 的情况下仅与路径的一部分匹配。

尝试以下方法：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]*)$ index.php?pageName=$1 
```

此外，您应该在服务器内启用重写日志记录。相关的配置选项是 RewriteLog（用于文件）和 RewriteLogLevel（嗯，用于级别...）。它有助于理解重写模块内部发生的事情。但是，这也不能在 htaccess 中完成，您需要访问服务器的常规配置。

# java - Hibernate 下载选项之间的区别？

> ID：12617480
> 
> 赞同：1
> 
> 时间：2012-09-27T08:48:45.403
> 
> 标签：java, hibernate

[http://sourceforge.net/projects/hibernate/files/hibernate4/](http://sourceforge.net/projects/hibernate/files/hibernate4/)

如您所见，上面我有一个指向 Hibernate 下载页面的链接，至少今天最上面的文件夹是：

`4.1.7-Final`

上面虽然说下载最新版本：

`hibernate-search-4.1.1.Final-dist.zip (31.0 MB)`

我的问题是：

1.  我应该下载哪个文件？
2.  为什么最新版本的编号比列表顶部的版本低。
3.  最新下载的`4.1.7`版本是测试版的稳定版本吗？
4.  hibernate-search作为标题是什么意思？
5.  为什么有些文件称为 final 而其他文件称为：

    *   `Alpha`

    *   `Beta`

    *   `CR1-5`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T08:54:28.173

看看：[软件发布生命周期](http://en.wikipedia.org/wiki/Software_release_life_cycle)。

*CR* - 代表候选释放；更通常称为：
*RC* - 候选发布

最终版本是您真正应该用于任何生产开发的版本。

此外，您可能需要考虑使用 Maven 进行依赖管理，而不是手动下载依赖项。

# mysql - 在 MySQL 中订购发票编号和字母

> ID：12617482
> 
> 赞同：0
> 
> 时间：2012-09-27T08:48:48.857
> 
> 标签：mysql, sorting

我的 MySQL 数据库中的查询的 SQL 排序结果出现问题。我需要一种方法来对混合了字母和多位数字的发票编号进行排序。

格式为：${optional-prefix}${number part}${optional-postfix}，它们都存储在 Varchar(32) 中。更改数字格式不是一个选项，因为这些值是从多个系统导入的。

我要排序的内容：（未排序）

*   IoCustTextNoNumber
*   IO-700
*   IO39ABC
*   IO-137-kk
*   IO-037-kk
*   201-ib
*   201
*   38-kk
*   036
*   12
*   11-KE
*   IO-37-kk
*   00001342
*   IO-36-kk
*   11-KEk
*   13
*   035
*   37-kk
*   200
*   IO-701

预期结果：（已排序）

*   11-KE
*   11-KEk
*   12
*   13
*   035
*   036
*   37-kk
*   38-kk
*   200
*   201
*   201-ib
*   00001342
*   IO-36-kk
*   IO-037-kk
*   IO-37-kk
*   IO-137-kk
*   IO-700
*   IO-701
*   IO39ABC
*   IoCustTextNoNumber

任何人都可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:51:39.033

MySQL 不会那样做。您可以在 PHP 之类的东西中构建自定义排序，然后执行 for 循环并将事物分配给某个位置。或者，您可以选择所有以 lo 开头的内容，然后更新所有这些内容以将 lo 放入另一列。

在 php 中，您可以执行以下操作：

```
foreach($data => row){

   $test = strpos('-', $row); // If this is successful than it has a dash in the string, and it goes towards the front.

  if(!$test) { // If its not a test does it begin with a number.
     if($row[0] >= 0){
         // Do whatever you need
     }
  }

} 
```

# iphone - Twitter发布iOS6“取消”按钮问题

> ID：12617490
> 
> 赞同：14
> 
> 时间：2012-09-27T08:49:16.807
> 
> 标签：iphone, ios, xcode, ios6, xcode4.5

我正在更改我的应用程序以供 iOS6 和 iPhone 使用，我似乎无法弄清楚为什么当我使用新的社交框架从 Twitter 发帖时，我必须按两次“取消”才能关闭，其他人都有这个问题或修复？这是按钮的代码。

```
- (IBAction)twitterPost:(id)sender
{
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
{
    mySLComposerSheet = [[SLComposeViewController alloc] init];
    mySLComposerSheet = [SLComposeViewController   composeViewControllerForServiceType:SLServiceTypeTwitter];
    [mySLComposerSheet setInitialText:[NSString stringWithFormat:@"This is my tweet, hello!",mySLComposerSheet.serviceType]];
    [self presentViewController:mySLComposerSheet animated:YES completion:nil];
}
[mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
    NSLog(@"dfsdf");
    switch (result) {
        case SLComposeViewControllerResultCancelled:
            break;
        case SLComposeViewControllerResultDone:
            break;
        default:
            break;
    }
}];

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-29T08:12:05.040

如果您使用 mySLComposerSheet 这很好用...

```
[mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
[mySLComposerSheet dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-11T06:46:04.670

我对 SLComposeViewController 的经验是 twitter 和 weibo 控制器需要手动关闭，而 facebook 控制器似乎表现更好。

如果我自己不关闭 ViewControllerAnimated，点击“发送”按钮将发送推文或微博帖子，但我会留下一个似乎是我自己视图的不可见视图。因此，我无法再与我的应用程序交互。

我不知道为什么我的应用程序会这样工作......有趣的是，用于取消的 completionHandler 只被调用一次。第二次点击关闭视图控制器。

```
+ (void) shareText:(NSString*)text image:(UIImage*)image social:(NSString*)service url:(NSString*)url
{
    SLComposeViewController*    controller = [SLComposeViewController composeViewControllerForServiceType:service];

    [controller setInitialText:text];
    [controller addImage:image];
    [controller addURL:[NSURL URLWithString:url]];

    controller.completionHandler = ^(SLComposeViewControllerResult result) {
        if( SLComposeViewControllerResultDone == result )
        {
            NSLog(@"rewards for share: %@!", service );
        }
        if( ![SLServiceTypeFacebook isEqualToString:service] )  // facebook behaves
            [[CBLAppDelegate instance].activeViewController dismissViewControllerAnimated:true completion:nil];
    };
    [[CBLAppDelegate instance].activeViewController presentViewController:controller animated:true completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-28T21:53:36.367

发现问题。它仅在将完成处理程序添加到 TWTweetComposeViewController 时发生。如果添加，请确保调用：

[自我dismissModalViewControllerAnimated：是]；

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-05T13:20:13.217

试试这个朋友

```
 [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {

        switch (result) {
            case SLComposeViewControllerResultCancelled:
                [self performSelector:@selector(showalert)];
                [mySLComposerSheet dismissViewControllerAnimated:YES completion:nil];
                break;
            case SLComposeViewControllerResultDone:
                [self performSelector:@selector(showalert1)];
                [mySLComposerSheet dismissViewControllerAnimated:YES completion:nil];
                break;

            default:
                break;

        }
    }]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T11:16:02.990

在上面发表评论作为答案：

> 您是否尝试过在呈现视图控制器之前设置完成处理程序？

# asp.net - 将参数传递给 Click-once Setup.exe 文件

> ID：12617491
> 
> 赞同：0
> 
> 时间：2012-09-27T08:49:21.113
> 
> 标签：asp.net, .net, deployment, clickonce

我有一个 .net windows 应用程序，我通过 asp.net 网页在客户端机器上运行这个应用程序。

我使用了 Click-once 技术，即在安装包中发布 Windows 应用程序并将其作为 IIS 应用程序放置。

现在我想将参数传递给 Windows 应用程序。

传递参数单击应用程序我使用 URL 到 .application 并将参数作为查询字符串参数文件传递，但这里的问题是 .application 文件没有首先设置先决条件，即如果客户端机器没有.NET framework 安装应用程序会返回错误！！。

谁能告诉我如何将参数传递给单击一次应用程序并首先检查先决条件。

另外，如果有其他技术而不是单击一次，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:56:27.630

在 Windows 应用程序项目的属性窗口中，查找发布选项卡。您可以在此选项卡中设置先决条件。

这也是[MSDN](http://msdn.microsoft.com/en-us/library/8st7th1x%28v=vs.80%29.aspx)的详细说明。

![在此处输入图像描述](../Images/54397179f985add7a265a2705c8425f8.png)

# php - mpdf 发票未按我的意愿生成

> ID：12617493
> 
> 赞同：2
> 
> 时间：2012-09-27T08:49:23.387
> 
> 标签：php, javascript, jquery, pdf, mpdf

这是我用来生成 pdf 发票的编码，我正在使用 jquery 在 $html 中加载 php 页面的 div 内容，但它根本没有加载。我尝试使用隐藏字段和 javascript，但没有一个有效。

```
<?php

include("mpdf/mpdf.php");

$mpdf=new mPDF('win-1252','A4','','',20,15,48,25,10,10);
$mpdf->useOnlyCoreFonts = true;    // false is default
$mpdf->SetProtection(array('print'));
$mpdf->SetTitle("Acme Trading Co. - Invoice");
$mpdf->SetAuthor("Acme Trading Co.");
$mpdf->SetWatermarkText("Paid");
$mpdf->showWatermarkText = true;
$mpdf->watermark_font = 'DejaVuSansCondensed';
$mpdf->watermarkTextAlpha = 0.1;
$mpdf->SetDisplayMode('fullpage');

$html = '
<html>
<head>
<style>
body {font-family: sans-serif;
   font-size: 10pt;
 }
p {    margin: 0pt;
}
td { vertical-align: top; }
.items td {
 border-left: 0.1mm solid #000000;
border-right: 0.1mm solid #000000;
}
table thead td { background-color: #EEEEEE;
text-align: center;
border: 0.1mm solid #000000;
}
.items td.blanktotal {
background-color: #FFFFFF;
border: 0mm none #000000;
border-top: 0.1mm solid #000000;
border-right: 0.1mm solid #000000;
}
.items td.totals {
text-align: right;
border: 0.1mm solid #000000;
}
</style>

</head>
<body>

<!--mpdf
<htmlpageheader name="myheader">
 <table width="100%"><tr>
 <td width="50%" style="color:#0000BB;"><span style="font-weight: bold; font-size:     14pt;">Acme Trading Co.</span><br />123 Anystreet<br />Your City<br />GD12 4LP<br /><span style="font-size: 15pt;">&#9742;</span> 01777 123 567</td>
 <td width="50%" style="text-align: right;">Invoice No.<br /><span style="font-weight: bold; font-size: 12pt;">0012345</span></td>
 </tr></table>
 </htmlpageheader>

<htmlpagefooter name="myfooter">
<div style="border-top: 1px solid #000000; font-size: 9pt; text-align: center;   padding-top: 3mm; ">
Page {PAGENO} of {nb}
</div>
</htmlpagefooter>

<sethtmlpageheader name="myheader" value="on" show-this-page="1" />
<sethtmlpagefooter name="myfooter" value="on" />
mpdf-->

<div style="text-align: right">Date: '.date('jS F Y').'</div>

<table width="100%" style="font-family: serif;" cellpadding="10">
<tr>
<td width="45%" style="border: 0.1mm solid #888888;"><span style="font-size: 7pt;   color: #555555; font-family: sans;">SOLD TO:</span><br /><br />345 Anotherstreet<br   />Little Village<br />Their City<br />CB22 6SO</td>
<td width="10%">&nbsp;</td>
<td width="45%" style="border: 0.1mm solid #888888;"><span style="font-size: 7pt; color: #555555; font-family: sans;">SHIP TO:</span><br /><br />345 Anotherstreet<br />Little Village<br />Their City<br />CB22 6SO</td>
</tr>
 </table>

        **<div style="font-size:9px" id="serviced"><b>Service :</b></div>
        <script type="text/javascript">
$(document).ready(function(){
$("#serviced").load("http://website.com/service.php #serviced")
})
</script>**
        <div style="font-size:9px" id="tratyped"><b>Type of Transport :</b></div>
        <div style="font-size:9px" id="custyped"><b>Type of Client</b></div>
        <div style="font-size:9px" id="datepickerd"><b>Date :</b></div>
        <div  style="font-size:9px;display:none" id="timed"><b>Time :</b></div>
        <div  style="font-size:9px" id="departured"><b>Departure Address :</b></div>
        <div style="font-size:9px" id="destinationd"><b>Arrival Address</b></div>

        <div style="font-size:9px" id="passengerd"><b>No. of Passengers :</b></div>
        <div style="font-size:9px" id="shairwelld"><b>No. of Chariwells :</b></div>
        <div style="font-size:9px" id="babycd"><b>No. of Baby Chairs :</b></div>
        <div style="font-size:9px" id="companiond"><b>No. of Companions :</b></div>
        <div style="font-size:9px" id="luggaged"><b>No. of Luggages :</b></div>
        <div style="font-size:9px" id="petd"><b>No. of Pets :</b></div>
        <div style="font-size:9px" id="waitingd"><b>Waiting Time :</b></div>
        <div style="font-size:9px" id="insuranced"><b>Insurance :</b></div>
        <div style="font-size:9px" id="stopd"><b>Stop in Way :</b></div>

        <div style="font-size:9px" id="dis"><b>Distance(app) :</b></div>
        <div style="font-size:9px" id="tim"><b>Time(app) :</b></div>
        <div style="font-size:9px" id="ht"><b>PRICE (HT) :</b></div>
        <div style="font-size:9px" id="vat"><b>VAT :</b></div>
        <div style="font-size:9px" id="ttc"><b>PRICE (TTC) :</b></div>

<div style="text-align: center; font-style: italic;">Payment terms: payment due in 28 days</div>
</body>
</html>
';

$mpdf->WriteHTML($html);

$mpdf->Output(); exit;

exit;

?> 
```

我已经将我遇到问题的代码加粗了。

```
**<div style="font-size:9px" id="serviced"><b>Service :</b></div>
    <script type="text/javascript">
 $(document).ready(function(){
$("#serviced").load("http://website.com/service.php #serviced")
})
</script>** 
```

我正在尝试在上述代码中的 $html 内加载 php 页面的 div 内容，但它没有加载。我已经尽我所能，但到目前为止还没有运气。

请帮助我提供代码或建议。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:08:35.130

查看文档：[http](http://mpdf1.com/manual/index.php) ://mpdf1.com/manual/index.php 不支持 JavaScript。

解析您的页面以检索您的#service（我可以建议您使用此解析器[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)）

然后，只需在 HTML 中实现您的文本。

可以是这样的：

首先包含两个库：mpdf 和 simplehtmldom。

```
include("mpdf/mpdf.php");
include("simple_html_dom.php"); 
```

然后为了拥有页面的正确部分：

```
$html     = file_get_html('http://yoururl.tld/');
$serviced = $html->find('div[id=serviced]', 0)->plaintext; 
```

然后生成您的 PDF：

```
$mpdf = new mPDF('win-1252','A4','','',20,15,48,25,10,10);
... // Configure your PDF like you used to

$html  = '<your html before the #serviced part>';
$html .= $serviced;
$html .= '</your html after the #serviced part>';

$mpdf->WriteHTML($html);
$mpdf->Output(); 
```

还有 tadaaaaa

# java - 来自两种不同类型的两个空对象的比较

> ID：12617495
> 
> 赞同：6
> 
> 时间：2012-09-27T08:49:27.810
> 
> 标签：java, types, null, comparison

```
public void m1(Integer f) {
    ...
}

public void m1(Float f) {
    ...
}

public void main() {
    m1(null); // error: the method m1(Integer) is ambiguous for the type Main
    m1((Integer) null); // success
} 
```

鉴于上面的例子，我们可以承认*在某些方面*是`null`类型化的。那么为什么要打印以下几行`true`？当然`o1`，`o2`两者都没有价值（ie `null`），但它们不是来自同一类型（`Integer`vs `Float`）。我首先认为`false`会被打印出来。

```
Integer i = null;
Object o1 = (Object) i;
Float f = null;
Object o2 = (Object) f;
System.out.println(o1 == o2); // prints true

// in short:
System.out.println(((Object) ((Integer) null)) == ((Object) ((Float) null))); // prints true 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T08:55:04.413

所有`null`值都是无类型的并且是相等的。您可以将它传递给不同的引用类型，但用于比较目的没有区别。

输入的不是`null`值，而是可以输入的对 null 的引用。

一个常见的问题是这里发生了什么

```
class A {
    public static void hello() { System.out.println("Hello World"); }

    public static void main(String... args) {
        A a = null;
        a.hello();
        System.out.println("a is an A is " + (a instanceof A)); // prints false.
    }
} 
```

*编译器*将类型`a`视为 an `A`，因此调用静态方法。但是引用的值是`null`无类型的。

您可以在`null`不导致 NullPointerException 的情况下执行的唯一操作是分配或传递它而不检查它或将其与另一个引用进行比较。

顺便提一句

简而言之：编译器将根据引用的类型选择方法，在运行时执行基于引用的对象的类。在运行时`null`被视为任何类型或无类型，或者如果您尝试取消引用它，则会收到 NullPointerException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:55:47.313

Java 中的“==”检查它是否是同一个实例，而不是简单地“它们相等吗？”。Java 中没有多个 null 实例的概念。如果将 null 与 null 进行比较，无论类型如何，您都将始终收到 true。

之所以不能将 null 作为参数传递给与另一个具有不同参数类型的方法同名的方法，是因为这两种方法都可能是在没有进一步类型上下文的情况下调用的候选方法。它不是猜测可能是哪一个，而是正确地指示错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T16:20:08.480

请参阅[http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.1)

`null`属于“空类型”。“空类型”只有一个值 - `null`.

null 类型是每个引用类型的子类型。因此我们可以做

```
Integer i = null;   
(Integer)null 
```

换句话说，`null`是每个引用类型中的有效值。

（将类型视为一组值；值的类型是它所属的集合；“子类型”表示“子集”。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T08:57:03.760

鉴于上面的例子，我们可以承认 null 没有类型：当你调用时`m1(null)`，编译器无法确定实际参数的类型，也无法决定调用哪个方法。所有空值都相等且未键入，因此`(null==null)==true`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T08:58:20.513

Null 没有类型，但*引用*（对`null`或其他任何内容）具有类型。我们可以声明两个具有不同类型的引用变量，但`null`它们所引用的在两种情况下是相同的：

```
Integer a = null;
Double  b = null; 
```

在你的例子中，

```
m1((Integer) null); 
```

编译器使用它传递的*引用*类型来计算要调用哪个重载方法，而不是`null`值本身的类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T09:02:35.880

在您的示例中，它证明编译器无法识别（null）类型并决定调用哪个方法。所以你必须明确给出类型。也`null == null`将永远是真的；无论你做什么演员，它都不会改变或给 null 一个类型。

这篇[文章](https://stackoverflow.com/questions/2707322/what-is-null-in-java)有很长的描述`null`。

# asp-classic - 逗号分隔的字符串到经典asp中的下拉列表

> ID：12617496
> 
> 赞同：2
> 
> 时间：2012-09-27T08:49:28.240
> 
> 标签：asp-classic

我有一个逗号分隔的字符串，比如 12345,67890,3453,124556,56778，我想在下拉列表中显示这些项目

我正在使用经典的 asp 页面。

请帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T10:02:21.503

试试这个：

```
<%
' put your string into a variable.
Dim myString : myString = "12345,67890,3453,124556,56778"

' split your variable up into a array
Dim splitmystring : splitmystring = split(myString,",")

' create a dropdown box
Response.write  "<select value=""dropdown"">"
Response.write  "<option selected>choose a option</option>"

' Loop through your array
For Each item In splitmystring
    response.write "<option value='"& item &"'>"& item & "</option>"
Next

'close your dropdown box
response.write "</select>"
%> 
```

# actionscript-3 - 如何从 itemclick 处理程序 mx:list 链接到服务中的 url

> ID：12617498
> 
> 赞同：0
> 
> 时间：2012-09-27T08:49:36.060
> 
> 标签：actionscript-3, flash, apache-flex

所以这个让我无法在任何地方找到一个好的解释，所以我有一个 php 服务，它以二进制形式将一组对象提供给我的 flash 应用程序。该服务被输入一个 mx:list，该服务有 4 个字段**countrycode、citycode、city 和 url。**我需要做的是调用每个对象的 url 并将其提供给这个 itemClickHandler 这是我尝试过的加上其他两个在 RIAstar 的答案中我在做什么错了？

```
protected function citylist_itemClickHandler(event:ListEvent):void
    {
        var data:City = citylist.selectedItem as City;
        navigateToURL(new URLRequest(data.url));

    } 
```

这是以 getCitysResult 作为对象的 mx:list

```
 <mx:List includeIn="data" x="28" y="10" width="312" height="255" id="citylist" dataProvider="{getCitysResult.lastResult}" labelField="city" itemClick="citylist_itemClickHandler(event)">
    </mx:List> 
```

我需要做的是让这个列表的每一行都有一个用于鼠标点击的 url 链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:32:38.890

有`ListEvent`一个属性[rowIndex](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/events/ListEvent.html#rowIndex)，它携带刚刚被点击的行的索引。您可以使用此索引从 dataProvider 中检索正确的元素。

```
var city:City = cityList.dataProvider.getItemAt(event.rowIndex) as City;
navigateToURL(new URLRequest(city.url)); 
```

或直接在服务结果对象上（这是相同的，因为它已绑定）：

```
var city:City = getCitysResult.lastResult.getItemAt(event.rowIndex) as City; 
```

（除非 lastResult 对象是一个 Array: 那么它将是`getCitysResult.lastResult[event.rowIndex]`）

或（最短的方法）使用列表的[selectedItem](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/listClasses/ListBase.html#selectedItem)属性：

```
var city:City = cityList.selectItem as City; 
```

# iphone - 带有多行链接的 UILabel

> ID：12617502
> 
> 赞同：1
> 
> 时间：2012-09-27T08:49:57.400
> 
> 标签：iphone, objective-c, ios, uilabel

我想使用带有链接的 UILabel。

为此，我正在使用 IFTweetLabel，它正在查找任何链接并在其下方显示一条线，并且它是可点击的。

但如果一个字符串很大，那么只有第一行得到超链接而不是完整的 URL。

作为[https://github.com/clawoo/IFTweetLabel/issues/3](https://github.com/clawoo/IFTweetLabel/issues/3)的问题。

那么还有其他选择吗，或者其他库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:49:33.923

首先你必须导入 RegexKitLite 框架。通过这个链接。当然，这会对你有所帮助。它提供与您想要的相同的东西。

[http://furbo.org/stuff/FancyLabel_1.0.zip](http://furbo.org/stuff/FancyLabel_1.0.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:07:44.357

我想建议的第一件事是

`UITextView`与编辑属性一起使用为**否**，它会自动检测所有链接，分别与您需要的相似。

```
textview.editable = NO;
textview.dataDetectorTypes = UIDataDetectorTypeAll; 
```

如果您仍然想使用 UILabel，那么

您可以通过使用来实现这一点[`NSArrtibutedStrings`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)——但我建议在这个 C 函数周围使用一些包装器。我喜欢[`OHAttributedLabel`](https://github.com/AliSoftware/OHAttributedLabel)。

包含的演示准确地显示了如何处理超链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:07:42.247

不使用的原因是什么`UITextView`..有链接检测属性。您的`UITextView`应用程序不会被拒绝

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:02:09.817

你应该尝试一下[three20](https://github.com/facebook/three20) 项目。

# android - Android 如何检测是否以编程方式启用了小部件？

> ID：12617504
> 
> 赞同：1
> 
> 时间：2012-09-27T08:50:01.063
> 
> 标签：android, widget, detect, launcher

我正在开发一个小部件应用程序，但我不知道如何从代码中检查是否以编程方式启用了小部件（放置在 HomeScreen 上）。

请帮我。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:22:41.077

您`AppWidgetProvider`有一种方法`onEnabled`可以设置布尔变量。看看这个答案[https://stackoverflow.com/a/11815421/661079](https://stackoverflow.com/a/11815421/661079)

# c# - 如何将样式设置为属性网格行？

> ID：12617508
> 
> 赞同：2
> 
> 时间：2012-09-27T08:50:09.503
> 
> 标签：c#, propertygrid

我有一个包含 10 个项目的属性网格（例如）。

我想将偶数项（2,4,6,8,10）的颜色设置为红色，奇数项（1,3,5,7,9）设置为蓝色。我该怎么办？

在 Datagridview 的 AlternatingRowsDefaultCellStyle 属性的 Appearence 中设置 BackColor 类似。

# ruby-on-rails - Ruby on Rails 乘客安装问题

> ID：12617514
> 
> 赞同：0
> 
> 时间：2012-09-27T08:50:19.597
> 
> 标签：ruby-on-rails, rubygems, gem, rvm, passenger

user@ubuntu: ~/Documents/WorkSpace/proj1$ rvmsudo bundle exec rake Passenger config_dev[proj1]

[sudo] 用户密码：

耙中止！

RVM- Ruby 集成到一个单独的 gem，它应该默认安装在 RVM 中，删除 'LOAD_PATH.unshift' 并且一切都应该再次正常。

我是 Rails 新手，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:14:15.393

按照此处的说明进行操作：[https ://rvm.io/integration/passenger/](https://rvm.io/integration/passenger/)

# android - Android ListView 双击更改一行

> ID：12617525
> 
> 赞同：0
> 
> 时间：2012-09-27T08:51:05.123
> 
> 标签：android, listview, layout, double-click

我有一个带有一些产品名称的 ListView。我必须做的是当用户在该行上执行双击时更改一行的布局，另一个布局包含有关产品的其他数据。这可能吗？如果是，我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:09:37.957

有关类似设置，请参阅此问题[How to detect a double touch/taps on an Android ListView？](https://stackoverflow.com/questions/1962865/how-to-detect-a-double-touch-taps-on-an-android-listview)

有一个答案指向[http://developer.android.com/guide/topics/ui/ui-events.html](http://developer.android.com/guide/topics/ui/ui-events.html)

如果您*真的**非常*想处理双击，则必须处理该事件`OnClick()`并将第一次单击计为双击的一部分。

为单击操作注册一个延迟处理程序（如果应该有的话）。

当您下一次收到`OnClick()`事件时，请计算该点击与上一次点击之间的时间。如果它低于某个任意阈值，那么您将其视为双击。取消延迟的 SingleClick 处理程序并运行您的 DoubleClick 处理程序。

但它会很脆；可能会使用户感到困惑，并且将更难以构建和维护。

所以，简而言之，使用`OnLongClick()`代替`OnClick()`. Twitter 应用程序是使用这种 UX 的一个很好的例子。

但是，一旦您决定如何捕获事件，请在此处查看有关替换 ListView 中的单个项目[的博客文章](http://erikw.eu/android-update-single-item-in-listview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:09:47.140

如果我清楚地了解您的需求，我不知道，但这是可能的。
1\. 制作一个自定义列表视图（列表视图必须具有双击时需要的所有组件）
2\. 在开始时隐藏除具有产品名称的文本视图之外的所有组件。
3.在双击显示点击行的组件（可见=真）
注意：至于双击是另一回事。你应该考虑长按。

# css - 如何修复导航栏以跨越容器 - twitter bootstrap

> ID：12617528
> 
> 赞同：0
> 
> 时间：2012-09-27T08:51:19.960
> 
> 标签：css, twitter-bootstrap

[http://jsfiddle.net/PAj78/](http://jsfiddle.net/PAj78/)

我把我的`navbar`里面`class="container"`

（将分区向左移动以查看整个容器）。

您会看到导航栏将超出其容器。

我玩了 bootstrap.css 但似乎无法弄清楚在哪里/在哪里调整

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:56:27.813

用这样的类制作`.navbar`一个全宽列：`.span12`

```
<div class="navbar span12"> 
```

[演示](http://jsfiddle.net/PAj78/1/)

* * *

**解释**

默认情况下，具有类的元素具有`row`负值`margin-left`以补偿列上的边距（具有`span`类）。这些列有一个左边距以与之前的列保持距离，因此内容有一些很好的间距。默认情况下，bootstrap 有 12 列，因此当您创建`navbar`12 列的跨度时，它正好适合容器。但因为它是一列，它有权对负数进行`margin-left`补偿。[您可以在此处](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)看到不同大小列的一个很好的示例。`margin-left``row`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:54:58.873

是一个边距：-20px；在“.row, .thumbnails”和“.row”上。覆盖它以防止您的问题发生。

# c - 在动态指针数组和静态数组之间复制数据

> ID：12617530
> 
> 赞同：1
> 
> 时间：2012-09-27T08:51:32.590
> 
> 标签：c, pointers

我试图定义一个动态数组，将数据从静态数组复制到动态数组中，然后再复制回静态数组。但似乎数据没有正确复制。我做错什么了吗？

```
 #include <stdio.h>

int main(){
    int n = 2;
    double a[2][2];
    double c[2][2];
    a[0][0] = 0.0;
    a[0][1] = 0.1;
    a[1][0] = 1.0;
    a[1][1] = 1.1;

    double* b = NULL;
    double* p = NULL;
    int i,j;

    b = (double*) malloc(n*n*sizeof(double));

    for(i=0; i<n; i++){
        for(j=0; j<n; j++){
            p = b+i;
            *(p+j) = a[i][j];
        }
    }

    memcpy(c, b, sizeof(*b));    

    for(i=0; i<n; i++){
        for(j=0; j<n; j++){
            p = b+i;
            fprintf(stderr, "[%d][%d] = %.1f, c[%d][%d] = %.1f \n", i, j, *(p+j), i, j, c[i][j]);              
        }
    }

    free(b);
    b = NULL;

    return 0;
} 
```

* * *

结果

[0][0] = 0.0，c[0][0] = 0.0

[0][1] = 1.0，c[0][1] = 0.0

[1][0] = 1.0，c[1][0] = 0.0

[1][1] = 1.1，c[1][1] = 0.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:58:17.667

问题（或其中之一）可能是您正在尝试

```
 p = b+i;
*(p+j) = a[i][j]; 
```

而应该是这样的：

```
*(p+i*n+j) = a[i][j]; 
```

原因是，您可能希望将数据“逐行”存储到指针处的内存中，因此乘以 i*n 至关重要。如果您无法将其可视化，请想象 j=0，因此您希望行的第一个条目位于索引 0, n, 2*n,... 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:01:50.750

根据我的意见，您分配了错误的内存，您应该尝试以下代码

```
#include <stdio.h>

int main()
{
    int n = 2;
    double a[2][2];
    double c[2][2];
    a[0][0] = 0.0;
    a[0][1] = 0.1;
    a[1][0] = 1.0;
    a[1][1] = 1.1;

    double** b = NULL;
    int i,j;

    b = (double**) malloc(n * sizeof(double*));
    for(i = 0; i < n; i++)
        b[i] = (double *)malloc(n * sizeof(double));

    for(i=0; i<n; i++){
        for(j=0; j<n; j++){
            b[i][j] = a[i][j];
        }
    }

    memcpy(c, b, (n*n*sizeof(double)));

    for(i=0; i<n; i++){
        for(j=0; j<n; j++){
            printf("b[%d][%d] = %lf, c[%d][%d] = %lf, a = %lf\n", i, j, b[i][j], i, j, c[i][j], a[i][j]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:57:14.583

`sizeof(*b)`是`memcpy`你的问题，你只得到一个双倍的大小。您需要将使用的大小存储在`malloc`变量（或常量）中并使用它。

# javascript - 存储浏览器选项卡特定数据

> ID：12617536
> 
> 赞同：15
> 
> 时间：2012-09-27T08:51:54.390
> 
> 标签：javascript, jquery, django, local-storage, browser-tab

我有一个 Web 应用程序，用于存储有关最近访问的页面的信息，我们称它们为 A。当用户访问另一种称为 B 的页面类型时，我会在顶部呈现一个菜单，其中包含一个指向最近访问的 A 页面的按钮。B 页面可以通过 A 页面或 B 页面访问，并且可以被用户视为 A 的属性。

这很好用，但是当有人打开两个选项卡并且在选项卡 1 中的 B 页面上带有指向 A 页面 A1 的链接时，他们会打开一个新选项卡并访问 A 页面 A2，这会成为一个问题。当用户随后刷新选项卡 1 中的 B 页面时，菜单更改为 A2。我希望能够识别正在使用的选项卡，以便我可以为选项卡 1 保存 A1，这样它就不会更改为 A2。

使用一个选项卡时：

```
A1 -> B1 -> B2 (the menu points back to A1) 
```

使用两个选项卡时：

```
Time            | T1       | T2       | T3          
----------------+----------+----------+-------------
Tab 1:          | A1 -> B1 |          | [refresh B1]
Tab 2:          |          | A2 -> B3 |             
----------------+----------+----------+-------------
Menu points to: | A1    A1 | A2    A2 | A2 
```

当用户返回选项卡 1 时，这会使用户感到困惑，他们在选项卡 2 (A2) 而不是 A1 中查看的用户。

恐怕无法获得浏览器标签 ID，但有人可能对解决方法有任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-09-02T08:46:46.833

HTML5 [sessionStorage](https://w3c.github.io/webstorage/#introduction)解决了这个问题：

> 站点可以将数据添加到会话存储中，并且该窗口中打开的同一站点的任何页面都可以访问这些数据。

[所有现代浏览器都支持](http://caniuse.com/#feat=namevalue-storage)它

另一种方法是使用`window.name`属性。它是特定于选项卡/窗口的，并且在浏览器导航中保持不变。`window.name`因此，您可以在您的财产中存储一些标签 ID 之王

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T11:04:12.630

**编辑：**时间的流逝使我从 2012 年开始的原始答案不正确。正如bedrin 指出的那样，您现在可以使用该[`Window.sessionStorage`对象](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage)：

> sessionStorage 属性允许您访问当前源的会话存储对象。sessionStorage 与 Window.localStorage 类似，唯一的区别是 localStorage 中存储的数据没有设置过期时间，而 sessionStorage 中存储的数据在页面会话结束时会被清除。只要浏览器打开并在页面重新加载和恢复后仍然存在，页面会话就会持续。在新选项卡或窗口中打开页面将导致启动新会话，这与会话 cookie 的工作方式不同。

**原始答案（2012）：**

恐怕这无法以可移植的方式实现，因为您发现自己无法检索浏览器选项卡 ID 之类的东西。据我所知，HTML 标准完全不知道浏览器中的选项卡。

我能想到的唯一解决方法是：在您的应用程序中实现和管理选项卡。我见过几个这样做的商业网络应用程序，但是（恕我直言）用户体验非常糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:00:33.913

因此，我提出了一种*似乎效果很好的*解决方案，但事实并非如此。请参阅最后一个问题项目符号。我仍然希望有更好的想法，所以请让我知道你是否继续！

反正; 这就是我的做法。请记住，这不是 100% 万无一失的解决方案，如果用户“行为不端”并同时刷新多个选项卡，它可能会感到困惑：

**base.html**（所有页面都继承）（{{ A }} 呈现来自 Django 的变量）：

```
// This is executed right before leaving the page
window.onunload = function() {
    if( '{{ A }}' != null ) 
        var prev_A = '{{ A }}';
    else if (typeof previous_A != 'undefined') {
        var prev_A = previous_A;
    else 
        var prev_A = '';
    localStorage.setItem('a', prev_A);
};
// Remove the local storage as soon as you get to this page
localStorage.removeItem('a'); 
```

**B_base.html**（所有B的基础模板。B_base.html也继承了base.html。我把这段代码放在base.html中的代码之前执行）

```
var previous_A = localStorage.getItem('a'); 
```

所以基本上我得到的是每个页面在离开页面时设置localStorage'a'并在进入页面后立即删除localStorage'a'，除了首先将'a'保存为本地的B页面删除之前的变量。

问题：

*   同时在多个选项卡中打开链接将覆盖此变量，并且一个选项卡将没有previous_A。
*   不去任何地方关闭一个A标签，然后直接打开一个新的B页面，会导致B标签的previous_A中有关闭的A的值。
*   在 A 页面的新选项卡中打开 B 链接不会给他们返回链接......这是破坏者。

# java - 当响应大小很大时，来自 Android 的 HTTP POST 不返回数据

> ID：12617539
> 
> 赞同：0
> 
> 时间：2012-09-27T08:52:05.577
> 
> 标签：java, android, servlets

我在向服务器发出 POST 请求并在处理服务器响应结果之后遇到问题，但是当服务器写入数据时，有时数据无法传输到客户端，死在 writer.write() 函数中。我使用Apache Tomcat部署应用程序，每次服务器需要在gzip之前响应大约7m数据，在gzip之后需要300k

请帮忙 ！

我的代码：

```
protected void dispatch(JSONObject request,
              Map<String, FormDataItem> formItems,
              HttpServletRequest servletRequest,
              HttpServletResponse servletResponse, SecurityToken token,
              String callback) throws JSONException, IOException {
        long timeGetData = 0;
        long begin = System.currentTimeMillis();

        String key = null;

        if (request.has("id")) {
              key = request.getString("id");
        }

        // getRpcHandler never returns null
        Future<?> future = getHandler(request, servletRequest).execute(
                    formItems, token, jsonConverter);

        timeGetData = System.currentTimeMillis();
        // Resolve each Future into a response.
        ResponseItem response = getResponseItem(future);
        ResponseItem responseTemp = (ResponseItem) response.getResponse();

        // Generate the output
        Writer writer = servletResponse.getWriter();

        if ("syndata.getAllDataFromServer".equals(request.getString("method"))) {
              if (responseTemp.getErrorCode() == 200) {
                    SynDataObject outObject = (SynDataObject) (responseTemp
                                .getResponse());
                    writer.write(jsonConverter.convertToString(outObject
                                .getParams()));
                    writer.write("\r\n");

                    for (int i = 0; i < outObject.getListTableData().size(); i++) {
                          TableDataObject subData = outObject.getListTableData().get(
                                      i);
                          int subDataLength = subData.getData().size();
                          int currentFarm = 0;
                          int factor = 1000;
                          int lastIndex = 0;

                          while (lastIndex < subDataLength) {
                                if ((currentFarm * factor + factor) > subDataLength) {
                                      lastIndex = (factor * currentFarm)
                                                  + (subDataLength - (factor * currentFarm));
                                } else {
                                      lastIndex = (factor * currentFarm) + factor;
                                }

                                TableDataObject chilData = new TableDataObject();
                                chilData.setTableName(subData.getTableName());
                                chilData.setTableColumns(subData.getTableColumns());
                                chilData.setPkField(subData.getPkField());

                                 chilData.setData(subData.getData().subList(
                                            currentFarm * factor, lastIndex));

                                writer.write(jsonConverter.convertToString(chilData));
                                writer.write("\r\n");
                                writer.flush();

                                ++currentFarm;
                          }
                    }
              } else {
                    Object result = getJSONResponse(key, response);
                    String content = jsonConverter.convertToString(result);

                    if (callback != null) {
                          writer.write(callback);
                          writer.write('(');
                    }

                    writer.write(content);

                    if (callback != null) {
                          writer.write(");\n");
                    }
              }
        } else {
              Object result = getJSONResponse(key, response);
              String content = jsonConverter.convertToString(result);

              if (callback != null) {
                    writer.write(callback);
                    writer.write('(');
              }

              writer.write(content);

              if (callback != null) {
                    writer.write(");\n");
              }
        }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:08:34.680

每个浏览器都有一些请求超时值。如果服务请求所花费的时间或到达 writer.write() 行所花费的时间超过，则客户端连接将关闭。

所以你将无法向作家写任何信息。

# java - Spring Web Flow 单元测试：在没有视图状态的 FlowScope 中设置属性

> ID：12617545
> 
> 赞同：1
> 
> 时间：2012-09-27T08:52:41.263
> 
> 标签：java, spring-webflow, spring-webflow-2

这类似于[Spring Web Flow - 如何使用对话范围中已有的值设置单元测试？](https://stackoverflow.com/questions/804326/spring-web-flow-how-can-i-set-up-unit-test-with-values-already-in-conversation)

我已经使用该问题中列出的解决方案来解决会话范围问题，但一直试图为 FlowScope 做同样的事情。出于某种原因，FlowExecution 没有 getFlowScope() 方法。

任何指向正确方向的帮助或一般性指示将不胜感激。谢谢！

更新：

为了提供更多上下文，这是我要测试的 webflow 中的行：

```
<evaluate expression="serviceFactory.getInstance(flowScope.config.country).startTransaction(flowScope.SomeList.get(0), 0)" /> 
```

相关的测试语句是：

```
EasyMock.expect(serviceObjectMock.startTransaction(someObjectMock, 0)).andReturn(true); 
```

它默默地失败了。当我浏览调试器中的代码时，我看到此调用中有一个 IndexOutOfBoundsException，这导致我假设我必须以某种方式在 flowScope 中拥有该列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:12:22.427

在 中`FlowExecution`，您可以使用`getActiveSession().getScope()`
它将为您提供 FlowScope，然后您可以在其中放置您的属性（在流程开始后）

您尝试执行的操作实际上没有任何意义，因为 Flow 范围属性存在于活动流会话的生命周期中。您不能在流程开始之前设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T23:14:59.093

对于任何感兴趣的人，我了解到我不必在 flowScope 中显式设置属性，因为 EasyMock 在遍历“期望”列表时会处理该属性。

我的问题是“flowScope.SomeList.get(0)”指的是在上一行中设置的属性，我在该行的“expect”语句中使用“new ArrayList()”作为返回值。

而且，“静默失败”部分是由于我没有在 Spring 的测试配置文件中启用 DEBUG 级别信息。

这在测试 log4j.xml 文件中解决了这个问题：

```
 <logger name="org.springframework">
    <level value="DEBUG" />
</logger> 
```

# svn - 如何使用 git svn 配置 svn 忽略设置？

> ID：12617547
> 
> 赞同：19
> 
> 时间：2012-09-27T08:52:45.117
> 
> 标签：svn, git-svn, svnignore, svn-propset

我知道我可以使用以下命令将文件夹和文件配置为被颠覆忽略：

```
svn propset svn:ignore build . // Ignores the build folder.
svn propedit svn:ignore . // Opens an editor. 
```

不过，我使用`git svn`检查存储在颠覆服务器上的存储库。我找不到以这种方式进行配置的命令。`zsh`以下列表显示了由完成建议的所有命令`git svn`：

```
$ git svn
blame           -- show what revision and author last modified each line of a file:
branch          -- create a branch in the SVN repository
clone           -- same as init, followed by fetch
commit-diff     -- commit diff of two tree-ishs
create-ignore   -- recursively finds the svn:ignore property and creates .gitignore files
dcommit         -- commit diffs from given head onto SVN repository
fetch           -- fetch revisions from the SVN remote
find-rev        -- output git commit corresponding to the given SVN revision's hash
info            -- show information about a file or directory
init            -- initialize an empty git repository with additional svn data
log             -- output SVN log-messages
propget         -- get a given SVN property for a file
proplist        -- list the SVN properties stored for a file or directory
rebase          -- fetch revs from SVN parent of HEAD and rebase current work on it
set-tree        -- commit given commit or tree to SVN repository
show-externals  -- show the subversion externals
show-ignore     -- output corresponding toplevel .gitignore file of svn:ignore
tag             -- create a tag in the SVN repository 
```

**问题：**

*   你知道是否有任何方法可以通过编辑颠覆忽略配置`git svn`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T10:59:45.053

不，git-svn 仅支持通过 svn:ignore 创建 .gitignore。要设置 svn:ignore 你可以

1.  使用`svn propset svn:ignore 'value' URL`where URL 可以通过 ( `git-svn git svn info path/to/directory | awk '/URL:/{print $2}'`) 获得所以你可以编写自己的 'svn_propset.sh' 脚本。同步你的 .gitignore 和 svn:ignore run`git svn create-ignore`

2.  使用任何允许 .gitignore <-> svn:ignore 翻译的工具。我只知道两个：[SmartGit](http://www.syntevo.com/smartgit/)（客户端，注意：您需要一个新的克隆来打开忽略支持）和[SubGit](http://subgit.com/)（服务器端，您需要使用 SVN 访问服务器）。在这种情况下 svn:ignore 设置为将您的本地提交推送到 SVN(for SmartGit)/Git(for SubGit) 存储库。

# asp.net-mvc-3 - 为什么没有在iss 中加载网站的任何图片、样式或脚本？

> ID：12617548
> 
> 赞同：0
> 
> 时间：2012-09-27T08:52:45.893
> 
> 标签：asp.net-mvc-3, iis, roles

我使用 IIS 来查看我的网站。当我浏览它时，它只显示文本，不加载任何图片、样式或脚本。当我使用 firebuge 查看 css 时，它显示了这个消息：

> 该元素没有样式规则。您可以为其创建规则。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:00:38.527

通过打开 **“静态内容”**，我的问题解决了。“静态内容”在此路径中：

> 控制面板 --> 程序和功能 --> 打开或关闭 Windows 功能 --> Internet 信息服务 --> 万维网服务 --> 通用 HTTP 功能

谢谢大家...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:49:36.673

我认为 ZippyV 是对的。您引用的 .css 错误；双重和三重检查。检查所有内容如何映射到您的 IIS 以确保。

# php - php中用于十进制和字符值的数据类型

> ID：12617549
> 
> 赞同：0
> 
> 时间：2012-09-27T08:52:46.607
> 
> 标签：php

php 中的数据类型（我应该为 phpmyadmin 中的列设置）用于输入字符和十进制数字。前任。0.09 或 na 或 100 (1) 所有这些东西都可以输入到列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:05:25.903

我会亲自将这些数据存储在两个不同的字段中：

一个整数表示整数

一个十进制数的 DEC(m,n) * m 是所有位数，n 是小数分隔符后面的位数。

例如：DEC(5,2) 数据为 123.45

如果您需要将它放在一个字段中，请使用 VARCHAR 但这不是我的建议，因为将整数存储在 varchar 类型字段中并不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:56:38.593

`VARCHAR`可以使用类型。这将存储一个允许您使用字符或小数的字符串。请务必设置适当的长度 - 不要太短，否则数据将被截断。

如果您发现自己在单个字段中存储了许多不同类型的数据，那么可能建议您可以使用更好的表/数据库设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:40:42.187

虽然`varchar`不推荐使用 a，但如果您使用 a，`varchar`请确保在获取时对代码中的变量进行类型转换。

# c++ - ODBC c ++（oracle）中的空blob插入查询

> ID：12617550
> 
> 赞同：1
> 
> 时间：2012-09-27T08:52:57.523
> 
> 标签：c++, sql, oracle, odbc

我需要在 o oracle 数据库中插入一个 blob。我正在使用 c++ 和 ODBC 库。我被插入查询和更新查询困住了。对我来说，如何进行 blob 插入查询是抽象的。我知道如何查询非 blob 列。我的表结构是：

```
REATE TABLE t_testblob (
     filename VARCHAR2(30) DEFAULT NULL NULL,
     apkdata  BLOB         NULL
) 
```

我发现了一个关于插入和更新的例子：

```
 INSERT INTO table_name VALUES (memberlist,?,memberlist)
 UPDATE table_name SET ImageFieldName = ? WHERE ID=yourId 
```

但是这些查询结构对我来说还是抽象的。成员列表应该是什么？为什么会有“？” 要插入的值在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:43:05.237

那些问号表示它是 PreparedStatement。这样的陈述对服务器和客户端都有好处。服务器的工作量更少，因为这样更容易解析这样的语句，客户端不需要担心 SQLInjection。客户端准备这样的查询，为输入值构建缓冲区并调用它。

与“正常”查询相比，此类语句的执行速度也非常快，尤其是在循环中，从 csv 文件导入数据等。

我不知道您使用什么 ODBC C++ 库，而 ODBC 是严格的 C 库。Java 或 Python 等其他语言也可以使用它。我认为最简单的是 Python 中的示例：

```
cursor = connection.cursor()
for txt in ('a', 'b', 'c'):
    cursor.execute('SELECT * FROM test WHERE txt=?', (txt,)) 
```

当然，这样的 PreparedStatement 也可以在 INSERT 或 UPDATE 语句中使用，对于您的示例，它可能如下所示：

```
cursor.execute("INSERT INTO t_testblob (filename, apkdata) VALUE (?, ?)", filename, my_binary_data) 
```

# c - 后缀数组实现

> ID：12617552
> 
> 赞同：1
> 
> 时间：2012-09-27T08:52:59.427
> 
> 标签：c, data-structures

谁能给我提示如何开发后缀数组部分？我知道这个概念；LCP 阵列设计，但我不知道如何在 C 中实现它？有人可以帮忙吗？我知道后缀数组的用途和算法，因为我已经阅读了很多。我想要对字符串后缀进行排序的部分的实现提示。

例如，如果字符串被指定为 'banana'，那么：

数据结构应该是这样的：($ -> mnemonic)

```
banana
anana
nana
ana
na
a
$ 
```

然后，保留它之后，我需要对其进行排序，这意味着最低的子字符串应该在最高点。那么该怎么做呢？字符串可以很长。这件事怎么办？你能给出提示或链接吗？我已经尝试过，现在正在考虑您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:13:33.857

你可能想看看这篇[文章](http://www.cs.cmu.edu/afs/cs/academic/class/15492-f07/www/handouts/ks-icalp03.pdf)

在文章的最后，你会发现后缀树的这个实现：

**注意：**以下代码是 C++，但是如果您将 new[] 和 delete[] 运算符替换为 C 类似的堆分配，您可以很容易地重用它。

```
inline bool leq(int a1, int a2,   int b1, int b2) { // lexic. order for pairs
  return(a1 < b1 || a1 == b1 && a2 <= b2); 
}                                                   // and triples
inline bool leq(int a1, int a2, int a3,   int b1, int b2, int b3) {
  return(a1 < b1 || a1 == b1 && leq(a2,a3, b2,b3)); 
}
// stably sort a[0..n-1] to b[0..n-1] with keys in 0..K from r
static void radixPass(int* a, int* b, int* r, int n, int K) 
{ // count occurrences
  int* c = new int[K + 1];                          // counter array
  for (int i = 0;  i <= K;  i++) c[i] = 0;         // reset counters
  for (int i = 0;  i < n;  i++) c[r[a[i]]]++;    // count occurences
  for (int i = 0, sum = 0;  i <= K;  i++) { // exclusive prefix sums
     int t = c[i];  c[i] = sum;  sum += t;
  }
  for (int i = 0;  i < n;  i++) b[c[r[a[i]]]++] = a[i];      // sort
  delete [] c;
}

// find the suffix array SA of s[0..n-1] in {1..K}^n
// require s[n]=s[n+1]=s[n+2]=0, n>=2
void suffixArray(int* s, int* SA, int n, int K) {
  int n0=(n+2)/3, n1=(n+1)/3, n2=n/3, n02=n0+n2; 
  int* s12  = new int[n02 + 3];  s12[n02]= s12[n02+1]= s12[n02+2]=0; 
  int* SA12 = new int[n02 + 3]; SA12[n02]=SA12[n02+1]=SA12[n02+2]=0;
  int* s0   = new int[n0];
  int* SA0  = new int[n0];

  // generate positions of mod 1 and mod  2 suffixes
  // the "+(n0-n1)" adds a dummy mod 1 suffix if n%3 == 1
  for (int i=0, j=0;  i < n+(n0-n1);  i++) if (i%3 != 0) s12[j++] = i;

  // lsb radix sort the mod 1 and mod 2 triples
  radixPass(s12 , SA12, s+2, n02, K);
  radixPass(SA12, s12 , s+1, n02, K);  
  radixPass(s12 , SA12, s  , n02, K);

  // find lexicographic names of triples
  int name = 0, c0 = -1, c1 = -1, c2 = -1;
  for (int i = 0;  i < n02;  i++) {
    if (s[SA12[i]] != c0 || s[SA12[i]+1] != c1 || s[SA12[i]+2] != c2) { 
      name++;  c0 = s[SA12[i]];  c1 = s[SA12[i]+1];  c2 = s[SA12[i]+2];
    }
    if (SA12[i] % 3 == 1) { s12[SA12[i]/3]      = name; } // left half
    else                  { s12[SA12[i]/3 + n0] = name; } // right half
  }

  // recurse if names are not yet unique
  if (name < n02) {
    suffixArray(s12, SA12, n02, name);
    // store unique names in s12 using the suffix array 
    for (int i = 0;  i < n02;  i++) s12[SA12[i]] = i + 1;
  } else // generate the suffix array of s12 directly
    for (int i = 0;  i < n02;  i++) SA12[s12[i] - 1] = i; 

  // stably sort the mod 0 suffixes from SA12 by their first character
  for (int i=0, j=0;  i < n02;  i++) if (SA12[i] < n0) s0[j++] = 3*SA12[i];
  radixPass(s0, SA0, s, n0, K);

  // merge sorted SA0 suffixes and sorted SA12 suffixes
  for (int p=0,  t=n0-n1,  k=0;  k < n;  k++) {
#define GetI() (SA12[t] < n0 ? SA12[t] * 3 + 1 : (SA12[t] - n0) * 3 + 2)
    int i = GetI(); // pos of current offset 12 suffix
    int j = SA0[p]; // pos of current offset 0  suffix
    if (SA12[t] < n0 ? 
        leq(s[i],       s12[SA12[t] + n0], s[j],       s12[j/3]) :
        leq(s[i],s[i+1],s12[SA12[t]-n0+1], s[j],s[j+1],s12[j/3+n0]))
    { // suffix from SA12 is smaller
      SA[k] = i;  t++;
      if (t == n02) { // done --- only SA0 suffixes left
        for (k++;  p < n0;  p++, k++) SA[k] = SA0[p];
      }
    } else { 
      SA[k] = j;  p++; 
      if (p == n0)  { // done --- only SA12 suffixes left
        for (k++;  t < n02;  t++, k++) SA[k] = GetI(); 
      }
    }  
  } 
  delete [] s12; delete [] SA12; delete [] SA0; delete [] s0; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:55:20.370

这可能会帮助你。

[http://code.google.com/p/code-share/source/browse/trunk/cpp/algo/suffix_array/SuffixArray.h](http://code.google.com/p/code-share/source/browse/trunk/cpp/algo/suffix_array/SuffixArray.h)

```
#ifndef _SUFFIX_ARRAY_H
#define _SUFFIX_ARRAY_H

#include<algorithm>
#include<cstring>
#include <stdexcept>

using namespace std;
template<class T>
struct comp_func
{
    bool operator()(const T l,const T r)
    {
        return strcmp(l,r) < 0;

    }
};
template<class T =char>
class SuffixArray
{
    int len_;
    T **data_;

    public:
    T *operator[](int i)
    {
        if(i<0 || i>len_)
            throw std::out_of_range("Out of range error\n");
        return data_[i];
    }
    SuffixArray(T *str):len_(strlen(str)),data_(new T*[len_])
    {
        //len_ = strlen(str);
        //data_= new T*[len];
        for(int i =0;i<len_;++i)
        {
            data_[i] = &str[i];
            cout << data_[i] << endl;
        }
        std::sort(&data_[0],&data_[len_],comp_func<T *>());
    }
    void Print()
    {
        for(int i =0;i<len_;++i)
        {
            cout << data_[i] << endl;
        }

    }
};

#endif 
```

# qt - 解决信号和插槽参数限制的问题

> ID：12617553
> 
> 赞同：1
> 
> 时间：2012-09-27T08:53:03.387
> 
> 标签：qt, qt4

我想在单击时制作一个 PushButton，它的文本变为“已单击”。我试过了

```
connect(button1, SIGNAL(clicked()), this, SLOT(markClicked(button1))); 
```

在哪里`this`参考`MainWindow`和

```
void MainWindow::markClicked(QPushButton *button) { button->setText("Clicked"); } 
```

它似乎不起作用，因为我认为 SLOT 不能接受比 SIGNAL 更多的参数。是否有任何方法可以解决此限制？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:13:17.760

Qt 信号/槽机制只能将信号传递给具有*相似参数*的槽函数。作为一种解决方法，您应该使用[QSignalMapper](http://doc.qt.nokia.com/4.7-snapshot/qsignalmapper.html)：

```
QSignalMapper mapper;
...
connect(button1, SIGNAL(clicked()), &mapper, SLOT(map()));
mapper.setMapping(button1, button1); // not sure whether this is mandatory or not
...
connect(&mapper, SIGNAL(mapped(QWidget*)), this, SLOT(markClicked(QWidget*))); 
```

和功能*markClicked*是

```
void MainWindow::markClicked(QWidget *widget) {
  QPushButton *button = qobject_cast<QPushButton*>(widget);
  button->setText("Clicked");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T18:01:10.370

另一种方法是使用参数的默认值，然后使用 sender() 方法：

在 MainWindow 中：
`void markClicked(QPushButton *button = NULL);`

然后：
`connect(button1, SIGNAL(clicked()), this, SLOT(markClicked()));`

和：

```
void MainWindow::markClicked(QPushButton *button) {
   if (button==NULL) { button = qobject_cast<QPushButton*>(sender()); }
    button->setText("Clicked");
} 
```

# c - 非法使用类型作为表达式

> ID：12617554
> 
> 赞同：1
> 
> 时间：2012-09-27T08:53:14.000
> 
> 标签：c, compiler-errors, libharu

我的源代码中有以下几行给出了错误

> 错误 C2275：“HPDF_Array”：非法使用这种类型作为表达式”：这是头文件中的实际代码：

```
 typedef struct _HPDF_Array_Rec  *HPDF_Array;

typedef struct _HPDF_Array_Rec {
    HPDF_Obj_Header  header;
    HPDF_MMgr        mmgr;
    HPDF_Error       error;
    HPDF_List        list;
} HPDF_Array_Rec;

    HPDF_Array id; 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:00:30.827

此代码适用于我的编译器（gcc 4.7.1），因此如果您仍然遇到问题，可能需要显示更多代码或信息：

```
// content of this struct is irrelevant, so I just made a dummy struct
struct _HPDF_Array_Rec {
    int dummy;
};

typedef struct _HPDF_Array_Rec  *HPDF_Array;
HPDF_Array id; 
```

您问题中的代码的作用是将类型**HPDF_Array**定义为指向类型**struct _HPDF_Array_Rec**的指针并实例化一个名为 id 的**HPDF_Array**（它是指向 _HDPF_Array_Rec 结构的指针）

* * *

**编辑：**

代码仍然可以正常工作。我用谷歌搜索了错误代码并得到了这个：

[http://msdn.microsoft.com/en-us/library/76c9k4ah(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/76c9k4ah(v=vs.71).aspx)

```
An expression uses the -> operator with a typedef identifier. 
```

检查您的代码是否存在此类错误。你在哪里做**HPDF_Array->something**而不是**id->something**？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:32:56.310

如果编译`hpdf_pdfa.c`文件时出错，请移动

```
HPDF_Array id; 
```

行到`HPDF_PDFA_GenerateID(HPDF_Doc pdf)`函数的开头。

看来 2.2.1 分支是作为 C++ 代码构建的，提交者没有注意到错误。在主干分支中，此错误已修复。

# jquery - Jquery UI 组合框不工作

> ID：12617555
> 
> 赞同：0
> 
> 时间：2012-09-27T08:53:16.183
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

我正在使用 jquery UI 组合框，但它在这里不起作用是我的代码给出了以下错误，我在 Firefox 控制台中看到了该错误。

**错误**

TypeError: input.data("autocomplete") is undefined [Break On This Error]

input.data("autocomplete")._renderItem = function (ul, item) {

**Javascript**

```
 (function ($) {
    $.widget("ui.combobox", {
        _create: function () {
            var input,
                self = this,
                select = this.element.hide(),
                selected = select.children(":selected"),
                value = selected.val() ? selected.text() : "",
                wrapper = this.wrapper = $("<span>")
                    .addClass("ui-combobox")
                    .insertAfter(select);

            input = $("<input>")
                .appendTo(wrapper)
                .val(value)
                .addClass("ui-state-default ui-combobox-input")
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: function (request, response) {
                        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                        response(select.children("option").map(function () {
                            var text = $(this).text();
                            if (this.value && (!request.term || matcher.test(text)))
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>"),
                                    value: text,
                                    option: this
                                };
                        }));
                    },
                    select: function (event, ui) {
                        ui.item.option.selected = true;
                        self._trigger("selected", event, {
                            item: ui.item.option
                        });
                    },
                    change: function (event, ui) {
                        if (!ui.item) {
                            var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                                valid = false;
                            select.children("option").each(function () {
                                if ($(this).text().match(matcher)) {
                                    this.selected = valid = true;
                                    return false;
                                }
                            });
                            if (!valid) {
                                // remove invalid value, as it didn't match anything
                                $(this).val("");
                                select.val("");
                                input.data("autocomplete").term = "";
                                return false;
                            }
                        }
                    }
                })
                .addClass("ui-widget ui-widget-content ui-corner-left");

            input.data("autocomplete")._renderItem = function (ul, item) {
                return $("<li></li>")
                    .data("item.autocomplete", item)
                    .append("<a>" + item.label + "</a>")
                    .appendTo(ul);
            };

            $("<a>")
                .attr("tabIndex", -1)
                .attr("title", "Show All Items")
                .appendTo(wrapper)
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass("ui-corner-all")
                .addClass("ui-corner-right ui-combobox-toggle")
                .click(function () {
                    // close if already visible
                    if (input.autocomplete("widget").is(":visible")) {
                        input.autocomplete("close");
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $(this).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete("search", "");
                    input.focus();
                });
        },

        destroy: function () {
            this.wrapper.remove();
            this.element.show();
            $.Widget.prototype.destroy.call(this);
        }
    });
})(jQuery);

$(function () {

    $("#combobox").combobox();

}); 
```

**html**

```
<div class="ui-widget">

<select id="combobox">
        @foreach (var item in Model)
        {
            <option value="@item.Name">@item.Name</option>
        }
</select> 
```

我不知道为什么，但它不工作。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:44:50.630

自动完成与 elr_notify.js 冲突，因此已解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-07T10:59:14.697

检查布局页面和当前页面中是否调用了相同的jquery js文件，进入共享文件夹找到视图并检查相应的布局页面，这是由于冲突引起的

# iphone - 具有应用内购买上传功能的 iPhone 应用程序

> ID：12617560
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:53:48.753
> 
> 标签：iphone, upload, in-app-purchase

> **可能重复：**
> [如何在测试用户帐户中创建应用内购买？](https://stackoverflow.com/questions/4710773/how-to-create-at-test-user-account-for-inapp-purchase)

我正在上传我的 iPhone 应用程序，其中实现了应用内购买。我是否应该在评论说明中提供任何测试帐户以进行应用内购买测试。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:26:31.847

想一想.. Apple 不会因为您在评论说明中不必要地包含您的测试帐户详细信息而拒绝您的应用程序。但是，如果您不这样做，他们可能会拒绝它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:29:42.280

您需要在“备注”部分提供 IAP 测试用户帐户，以便苹果审阅者可以为您的应用程序模拟 IAP。

# java - java.lang.NoSuchMethodError 尝试修改 Jar 并重新构建时

> ID：12617561
> 
> 赞同：0
> 
> 时间：2012-09-27T08:53:49.923
> 
> 标签：java, instagram

我尝试使用`JInstagram`java wrapper sachin-handiekar 来访问 Instagram Api。

`JInstagram`Jar 使用 Long 作为媒体 ID 参数的数据类型，但 instagram 已将媒体 ID 更改为类似于`xxxxxxxxxxxxxxxx_xxxxxx`format 的东西，这显然是一种`String`数据类型。所以我正在尝试更改源并通过以下更改成功重新创建 jar

```
public MediaCommentsFeed getMediaComments(**long mediaId**) throws InstagramException {
        ...
}

public MediaCommentsFeed getMediaComments(**String mediaId**) throws InstagramException {
    ...
} 
```

但是当我尝试使用新 jar 运行应用程序时，出现以下错误：

```
java.lang.NoSuchMethodError: org.jinstagram.Instagram.getMediaComments(**Ljava/lang/String;)Lorg/jinstagram/entity/comments/MediaCommentsFeed;**
    at com.shoewars.controller.InstagramController.hanldeInstagramOauthCallBackResponse(InstagramController.java:92) 
```

重新创建罐子时我错过了什么吗？

# php - PHP - 锁定导出的文件

> ID：12617565
> 
> 赞同：0
> 
> 时间：2012-09-27T08:54:08.050
> 
> 标签：php, mysql, csv, passwords, zip

我正在寻找一种最简单的方法来锁定文件。以下代码通过 php 代码从 mysql 导出 .csv 文件：

```
<?php
require_once('connect_db.php');
$fdate = $_POST['fdate'];
$tdate = $_POST['tdate'];
//Selecting Items based on Date 
$result = mysql_query("SELECT item_no, qty, discount_price, date FROM sold_items WHERE date BETWEEN '".$fdate."' AND '".$tdate."' ORDER BY date Desc");

//Check if File Name Exists
$filename = $name = "C:/Sales-{$tdate}".".csv";
$index = 1;
while(file_exists($filename)) {
  $filename = $name.'--'.$index.".csv";
  $index++;
}

//Fputs the Table Headers
fputcsv($f, array('Item No', 'Qty', 'Sell Price', 'Date'));

//Fputcsv adds records to csv file
while($row = mysql_fetch_array($result, MYSQL_NUM))
{
    fputcsv($f, $row);
}

//Close file
fclose($f);

?> 
```

我只需要知道一个可以执行以下任何操作的代码：

*   尝试打开时使用密码保护 .csv 文件

*   锁定字段，使该文件不可编辑

*   或将此 .csv 文件转换为 zip 文件，并在解压缩之前创建密码。

我不是在寻找高安全性的方法来锁定这个文件。然而，在谷歌搜索时，我发现了这段代码：

```
<?php echo system('zip -P pass file.zip file.txt'); ?> 
```

我试过了！但它不工作。

谢谢你

* * *

编辑：使用羊群

```
$file = fopen("{$filename}", "w+"); 

// exclusive lock 
if (flock($file,LOCK_EX)){ 
//Fputs the Table Headers
fputcsv($f, array('Item No', 'Qty', 'Sell Price', 'Date'));

//Fputcsv adds records to csv file
while($row = mysql_fetch_array($result, MYSQL_NUM))
{
    fputcsv($f, $row);
}

  flock($file,LOCK_UN); 
} 
else{ 
  echo "Could not lock file!"; 
} 

fclose($file); 

?> 
```

它会将 csv 文件导出为空，但在尝试在任何字段中写入内容并保存时；将弹出一个错误“文件名”是只读的，并迫使我将文件另存为另一个名称。但保存为文件后，您仍然可以编辑字段并保存。如何禁用另存为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:01:08.840

PHP函数[flock](http://php.net/manual/en/function.flock.php)怎么样？小例子：

```
<?php

$file = fopen("test.txt","w+");

// exclusive lock
if (flock($file,LOCK_EX)){

  //write to file here

  // release lock
  flock($file,LOCK_UN);
}
else{
  echo "Could not lock file!";
}

fclose($file);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:12:35.590

您可以使用 chmod() 函数更改其权限。

您可以传递参数，例如

0777 这意味着读写的完全权限，您可以分配相同的方式，没有人可以在文件中读取或写入。

# java - Java if 语句何时退出？

> ID：12617569
> 
> 赞同：0
> 
> 时间：2012-09-27T08:54:15.337
> 
> 标签：java, if-statement, conditional-statements

当有 if-else 语句时，我有一个函数。它基本上看起来像这样：

```
if(boolean == true)
{
    // do something
    boolean = false;
}

else if(boolean == false)
{
    // do the other thing
    boolean = true;
} 
```

现在，我的理解是 if 语句将退出并将控制权返回给函数，然后根据更改的布尔值继续。但是我显然遗漏了一些东西，因为我的代码没有退出原始的“if”/“else if”语句（无论原始情况如何）。谁能告诉我我错过了什么？

根据要求，有关代码的其他数据是它是我的 android 项目的一部分，并且 if-else 块中的每个条件都有一个嵌套函数，并且正在使用这些函数设置/取消设置布尔（全局）值。所以代码现在看起来像这样：

```
dummyFunction(){

boolean = checkIfTrueOrFalse();

if (boolean) {

onClick( public void onClick(){

     // do something

boolean = false;}

} else if(boolean == false){

   onClick( public void onClick(){

     // do something

boolean = true;}

}
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:56:19.887

```
if(boolean == true)
{
    // do something
    boolean = false;
}

if (boolean == false)
{
    // do the other thing
    boolean = true;
} 
```

当你这样做时，程序将转到第二个条件。在 if/else if 语句中，如果`if`满足该语句，则程序将忽略该`else if`块。

您当前的代码只是流过第一个`if`块，然后跳过该`else if`语句以结束该块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:01:39.630

```
void someMethod()
{
    boolean aBoolean = true;
    if(aBoolean == true) 
    {     
        // do something     
        aBoolean = false; 
    }  
    else if(aBoolean == false) 
    {     
        // do the other thing     
        aBoolean = true; 
    }
} 
```

什么时候`someMethod`执行，由于`aBoolean`被赋值`true`，控制将`if`阻塞，导致条件变为真。如果是`false`，则控制权将分崩离析`else`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-11T08:44:18.993

我们已经有很多很好的答案/评论，但只是想在这里添加一些东西 -

1.

```
if (condition) {
} else {
} 
```

是一个单一的代码结构。条件将在运行时开始评估，java 将决定执行哪个块，即**if**块或**else**块。**只能执行 2 个中的 1 个。**

2.  Java 允许我们嵌套**if/else**。这意味着我们可以有类似下面的东西 -

    if(condition1){ } else if (condition2) { } else if (condition3) { } else { }

它实际上与以下相同 -

```
if (condition1) {
} else {
  if (condition2) {
  } else {
    if (condition 3) {
    } else {
    }
  }
} 
```

这里需要注意的是，只有满足条件的块才会被执行。如果不满足任何条件，则执行最里面的**else**（即*condition3的***else**块）

 *3.  最后，我觉得你的困惑是在下面的块之间

    布尔 aBoolean = true; if(aBoolean == true) {
    // 做某事
    aBoolean = false; } else if(aBoolean == false) { // 做另一件事 aBoolean = true; }

*VS*

```
boolean aBoolean = true;
if(aBoolean == true) 
{     
  // do something     
  aBoolean = false; 
}  

if(aBoolean == false) 
{
  // do the other thing
  aBoolean = true; 
} 
```

在 2 个示例中的后一个示例中，有 2 个独立的**if**块，并且两者都将被执行（当然，这在逻辑上不正确，但它是合法的 java 代码。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:04:10.613

您能否提供有关您的代码未退出两个块中的任何一个的更多信息？在块中执行 System.out.println() 变量可能能够帮助您确定代码未退出的原因。

您可以使用 if/else 对而不是 if/else-if，因为您的代码所依赖的参数是真/假。如果不满足 if 块，则自动遍历 else 块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T09:09:45.900

你的代码实际上是一个快捷方式

```
if (boolean) {
    // do something
    boolean = false;

} else {

    if (!boolean) {
        // do the other thing
        boolean = true;
    }
} 
```

以这种方式编写，如果已经满足第一个条件，则不会处理 case中的内部`if`嵌套可能会变得更清楚。`else``if`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T09:46:55.107

好吧，我已经解决了（当然从这里获取输入）。我刚刚在嵌套函数中添加了对该函数的调用，并且它起作用了。现在代码如下所示：

```
public static void dummyFunction(){

boolean = checkIfTrueOrFalse();

if (boolean) {

onClick( public void onClick(){

 // do something
 dummyFunction();

boolean = false;}

} else if(boolean == false){

   onClick( public void onClick(){

 // do something

dummyFunction();

boolean = true;}

}
} 
```*

# javascript - 将文本传递给单击时起作用

> ID：12617570
> 
> 赞同：1
> 
> 时间：2012-09-27T08:54:19.687
> 
> 标签：javascript, jquery, html

请看以下代码：

```
function liReplace(txt) {
    $('#srch > a').text(txt);
}

<ul class="dropdown">
    <li id='srch'>
        <a href="#">All Categories</a>
        <ul class="sub_menu">
            <li>
                <a href="#">Gadgets</a>
                <ul>
                    <li onclick='liReplace("DVD")'><a href="#" >DVD</a></li>
                    <li><a href="#">XBOX</a></li>
                    <li><a href="#">Ps2</a></li>
                    <li><a href="#">Cellphone</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Locations</a>
                <ul>
                    <li><a href="#">Indoor</a></li>
                    <li><a href="#">Outdoor</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

我想删除代码`onclick='liReplace("DVD")'`并将其更改为 jquery。

我可以使用 class="dropdown" 来识别它。如何编码并调用该`<li>`ul“下拉菜单”内的标签单击并传递文本？

我在想

```
$("li").click(function () {
    $("li").val(this.text);

}); 
```

我知道这是非常错误的，我的借口是我还在学习阶段。

- -回答

```
$("ul.dropdown li > a").click(function () {
        var old_text = $(this).text();
        liReplace(old_text);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:59:48.413

像这样的东西应该工作：

```
$(".dropdown .sub_menu ul li").on("click", function() {
    $("#srch > a").text($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T08:58:41.513

尝试 -

```
<li title='DVD'><a href="#" >DVD</a></li>

$("li").click(function () {

    $(this).find('a').text($(this).attr('title'));

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T08:58:46.143

```
function liReplace(txt) {
    $('#srch > a').text(txt);
}

$("li a").click(function () {
    var old_text = $(this).text();
    liReplace(old_text);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T09:01:55.870

您可以像这样选择带有 ul 类名的 li

```
 $('ul[class="dropdown"] li').click(function () {

       $(this).find('a').text($(this).attr('title'));

     }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-27T09:05:15.597

采用

```
$('li').live('click', function(){
    $('#srch > a').text($(this).text());   
}); 
```

或者

```
$('li').click(function (){
    $('#srch > a').text($(this).text());   
}); 
```

# neural-network - 反向传播学习无法收敛

> ID：12617576
> 
> 赞同：0
> 
> 时间：2012-09-27T08:54:47.273
> 
> 标签：neural-network, backpropagation

我使用具有 3 层的神经网络来解决分类问题：1）~2k 个神经元 2）~2k 个神经元 3）20 个神经元。我的训练集由 2 个示例组成，每个示例中的大部分输入都是零。出于某种原因，在反向传播训练之后，网络为两个示例提供了几乎相同的输出（这要么仅对 1 个示例有效，要么对于其中一个示例具有 1 的输出具有 1.0）。它在第一个 epoch 之后进入这个状态，之后变化不大，即使学习率是最小的双倍值。我使用 sigmoid 作为激活函数。我认为我的代码可能有问题，所以我使用了 AForge 开源库，似乎也遇到了同样的问题。这里可能有什么问题？

解决方案：我已经移除了一层并将隐藏层中的神经元数量减少到 800

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:14:33.507

2000 到 2000 到 20 是巨大的。这大约需要确定 400 万个权重，这意味着算法必须搜索 400 万维空间。在这种情况下，任何优化算法都会完全不知所措。我假设您正在使用梯度下降，它甚至没有那么强大，因此该算法很可能在这个巨大的搜索空间中的某个地方陷入了局部最优。

简化您的模型！

添加：

并且还请更详细地描述您正在尝试做的事情。你真的只有 2 个训练样例吗？这就像尝试使用 400 万维平面对 2 个点进行分类。这对我来说没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T22:19:20.297

您提到大多数输入为零。为了减少搜索空间的大小，请尝试删除训练示例中的冗余。例如，如果

```
trainingExample[0].inputValue[i] == trainingExample[1].inputValue[i] 
```

那么 x.inputValue[i] 没有 NN 的信息承载数据。

另外，也许不清楚，但似乎两个训练示例似乎很小。

# ios - NSFetchedResultsController 进入后台后丢失行数

> ID：12617579
> 
> 赞同：0
> 
> 时间：2012-09-27T08:55:07.147
> 
> 标签：ios, nsfetchrequest, nsfetchedresultscontroller

我的应用程序中有一个奇怪的问题。

我实例化 a`NSFetchedResultsController`来填充我的数组。

它是这样声明的（作为`@propoerty (nonatomic, retain)`）

```
- (NSFetchedResultsController *)fetchedContactsController {
    if (self->fetchedContactsController != nil) return self->fetchedContactsController;

    // Create the fetch request
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    // I want every contact...
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Contact" inManagedObjectContext:self->managedObjectContext];
    [fetchRequest setEntity:entity];

    // ... whose are not associated with my order item
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"NOT (%@ IN items)", self.orderItem];
    [fetchRequest setPredicate:predicate];

    // Edit the section name key path and cache name if appropriate
    self.fetchedContactsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self->managedObjectContext sectionNameKeyPath:nil cacheName:nil];

    [aFetchedResultsController release];
    [firstnameSortDescriptor release];
    [lastnameSortDescriptor release];
    [sortDescriptors release];
    [fetchRequest release];

    // Execute the fetch request
    [self->fetchedContactsController performFetch:nil];
    return self->fetchedContactsController;
} 
```

当然，contacts.items 是存在的。

当我的应用程序进入后台然后再次进入前台时，如果我再做一次

```
NSLog(@"before >>> %d", [[fetchedContactsController fetchedObjects]count]); // >>> 3
[self->fetchedContactsController performFetch:nil];
[tableView reloadData];
NSLog(@"after >>> %d", [[fetchedContactsController fetchedObjects]count]); // >>> 0 
```

我数组中的每一行都消失了！

**编辑 ：**

如果我评论这些行：

```
 // ... whose are not associated with my order item
    //NSPredicate *predicate = [NSPredicate predicateWithFormat:@"NOT (%@ IN items)", self.orderItem];
    //[fetchRequest setPredicate:predicate]; 
```

问题不再出现！但这不是我想要的……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:31:10.750

好的，我找到了。[感谢这个问题](https://stackoverflow.com/q/9065711/127493)，我替换了这一行：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"NOT (%@ IN items)", self.orderItem]; 
```

经过

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"NOT SELF IN %@", self.orderItem.recipients]; 
```

有趣的是，您提出问题的事实如何使您走上解决问题的道路。

# iphone - 从设备中删除应用程序后，无法使用 nil 模型创建 NSPersistentStoreCoordinator

> ID：12617585
> 
> 赞同：6
> 
> 时间：2012-09-27T08:55:40.047
> 
> 标签：iphone, ios, xcode, core-data

`'Cannot create an NSPersistentStoreCoordinator with a nil model'`从设备中删除我的应用程序后，我收到错误消息。我正在 iPad 设备上测试 iPhone 应用程序。我已经把这段代码检查我是否有文件`AppDelegate.m`：

```
- (NSManagedObjectModel *)managedObjectModel {
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Name" withExtension:@"momd"];
    if ([[NSFileManager defaultManager] fileExistsAtPath:[modelURL path]]) {
        NSLog(@"%@", [modelURL path]); //This is printed because file exists
    }
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
} 
```

问题是`[NSManagedObjectModel initWithContentsOfURL]`返回 nil 值。我做了以下事情，但没有成功：

1.  使用此更改 managedObjectModel 实例化`__managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];`
2.  清理构建文件夹和清理项目
3.  重新启动 Xcode
4.  重新启动计算机
5.  将“妈妈”改为“妈妈”
6.  `.xcdatamodeld`在 Copy Bundle Resources 和 Compile Sources
7.  `.xcdatamodeld`多次重命名、清理和关闭 Xcode 项目
8.  关闭和打开设备
9.  从以下位置删除的文件夹：`$ cd /Users/john/Library/Developer/Xcode/DerivedData`
10.  更改了用于强制生成数据库的 sqlite 名称
11.  从 devine 删除（再次）应用程序

我一直在寻找解决方案几个小时，但我仍然找不到它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T14:14:06.273

最后，经过两天的尝试解决这个问题，我在这里找到了解决方案：

[如何创建神奇的 .xcdatamodeld 文件夹/包？](https://stackoverflow.com/questions/4518000/how-to-create-the-magic-xcdatamodeld-folder-package/4518137#4518137)

我现在正在完成一个其他开发人员开始的项目，似乎他没有将最新的更改推送到 repo，但这些更改在设备的应用程序中，当我删除应用程序时，我删除了正确的`.xcdatamodeld`文件. 问题是我在项目中只有一个文件，这似乎`MyApp.xcdatamodel`是有一个空文件夹的原因。`momd`

为了创建正确的数据模型层次结构，解决方案非常简单：

1.  选择`MyApp.xcdatamodel`
2.  转到编辑器 > 添加模型版本...

这将`MyApp.xcdatamodel`文件嵌入到`MyApp.xcdatamodeld`. 现在`momd`文件夹中有`mom`文件并且应用程序运行正常。现在唯一的问题是我有两个`MyApp.xcdatamodel`，一个带有绿色选中图标，但两者都具有相同的内容，所以没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-13T16:18:48.780

我支持再次构建我的第一个 iOS 应用程序。今天，我收到了这个错误：'Cannot create an NSPersistentStoreCoordinator with a nil model'。实际上，这很容易解决。请制作这行代码：

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"[name]" withExtension:@"momd"]; 
```

您填写的 [name] 与您的模型文件 (.xcdatamodeld) 相同。例如我有一个 TipRecord.xcdatamodeld 那么这一行应该是：

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"TipRecord" withExtension:@"momd"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:44:33.470

```
 NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"select xcdatamodeld" withExtension:@"momd"]; 
```

为资源名称选择确切的 url..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T02:49:02.523

它相对简单。

如果您有一个**没有**版本的 xcdatamodel 文件：在您的 managedObjectModel 声明中使用扩展名“mom”。如果你的 xcdatamodel 有版本，你应该使用“momd”。

# javascript - 关于 JQuery 自动调整大小

> ID：12617590
> 
> 赞同：1
> 
> 时间：2012-09-27T08:55:58.940
> 
> 标签：javascript, jquery, autosize

我有一个使用 JQuery Autosize 自动调整大小的文本框，但是我似乎无法让某个功能正常工作。

当我按“Enter”键时，我需要文本框返回 1 行，没有任何值。但是我似乎无法让它工作，我的文本框始终有 2 行。我试过 e.preventDefault() 无济于事。有人可以帮忙吗？

我有一个小提琴，你可以在这里查看我的代码：

[http://jsfiddle.net/RZjq7/](http://jsfiddle.net/RZjq7/)

提前致谢！

你的，雷

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:20:12.903

丽，

需要使用 preventDefault 取消 Enter 按键并手动触发 autosize 调用插件的调整函数

```
$(function() {
    $('textarea').autosize();
    $('textarea').keypress(function(e) {
        if (e.which == 13 && !e.shiftKey) {
            $('textarea').val('');
            $('textarea').trigger('autosize');
            e.preventDefault();
        }
    });
});​ 
```

# ruby-on-rails - Ruby on Rails：显示 2 个模型之间的关系

> ID：12617592
> 
> 赞同：1
> 
> 时间：2012-09-27T08:56:00.653
> 
> 标签：ruby-on-rails, ruby, models, has-many, belongs-to

我有一个作者页面，显示数据库中的所有作者。

```
<h1>Listing authors</h1>

<table>
  <tr>
    <th>Name</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @authors.each do |author| %>
  <tr>
    <td><%= author.name %></td>
    <td><%= link_to 'Show', author %></td>
    <td><%= link_to 'Edit', edit_author_path(author) %></td>
    <td><%= link_to 'Destroy', author, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<%= link_to 'New Author', new_author_path %> 
```

对于每个作者，您单击显示，以显示他们自己的页面。

```
<p>
  <b>Name:</b>
  <%= @author.name %>
</p>

<%= link_to 'Edit', edit_author_path(@author) %> |
<%= link_to 'Back', authors_path %> 
```

现在我为书籍设置了相同的设置，用户可以在其中输入新书籍，在数据库中显示和编辑书籍。

然后我建立了一个名为 authorbooks 的模型，它使用`has_many`，`belongs_to`在 author.rb、book.rb 和 authorbook.rb 的模型中保存作者和书籍之间的关系。

我希望作者的显示页面显示与他们相关的每一本书。

我该怎么办？我是 Rails 新手，还在学习，所以请记住回答。提前致谢。

编辑每个模型的模型代码：

**作者.rb**

```
class Author < ActiveRecord::Base
  attr_accessible :name

  validates :name, :presence => true

  has_many :authorbooks
  has_many :books, :through => :authorbooks
end 
```

**书本.rb**

```
class Book < ActiveRecord::Base
  attr_accessible :name

  validates :name, :presence => true

  has_many :authorbooks
  has_many :authors, :through => :authorbooks
end 
```

**作者书.rb**

```
class Authorbook < ActiveRecord::Base
  attr_accessible :author_id, :book_id

  belongs_to :book
  belongs_to :author
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:03:07.503

看到模型代码也会很有趣。我假设你有类似的东西：

```
class Author
  has_many :author_books
  has_many :books, :through => :author_books # this line might be missing,
                                             # read in the api documentation about it.

class AuthorBooks
  belongs_to :author
  belongs_to :book 
```

现在您可以执行以下操作：

```
<h3>Related books</h3>

<ul>
  <% @author.books.each do |book| %>
    <li><%= book.name %> <%= link_to "Details", book_path(book) %></li>
  <% end %>
</ul> 
```

如果没有这`:through`条线，您可以执行以下操作：

```
@author.author_books.each do |ab|
  ... ab.book.name ... 
```

注意 1：第二个示例会出现 N+1 负载问题。有关更多信息，请参阅 A::R 指南中的[急切加载章节。](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)

注2：结帐HAML；比ERB好很多

# python - 如何在 Python 中匹配没有特定字符的字符串？

> ID：12617594
> 
> 赞同：0
> 
> 时间：2012-09-27T08:56:08.187
> 
> 标签：python, regex

哪个正则表达式模式将匹配Python 中*不*包含特定字符的子字符串？例如，我有字符串`"abc,5 * de"`，我想匹配`"abc"`和`"5 * de"`作为两个子字符串，而不是`,`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T08:59:03.760

使用包含您不想匹配的所有字符的[否定字符类。](http://www.regular-expressions.info/charclass.html)

就像是

```
[^,]+ 
```

[在 Regexr 上](http://regexr.com?329m0)查看

`[]`表示字符类，而as`^`第一个字符使其成为否定类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T09:02:16.437

```
s = "abc,5 * de"
result = s.split(',')
result[0] # "abc"
result[1] # "5* de" 
```

正则表达式并不总是解决字符串问题的唯一方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T08:58:16.907

我不知道 Python，但是对于我知道的所有正则表达式引擎，那将是`/[^,]*/`. 或者，如果 Python 有一个内置函数可以在正则表达式上拆分字符串，那么您可以只在`/,/`.

# windows-phone-7 - WP7 播放声音 - 播放声音时收到通知

> ID：12617596
> 
> 赞同：1
> 
> 时间：2012-09-27T08:56:14.527
> 
> 标签：windows-phone-7, audio

我正在播放这样的声音：

```
IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();
IsolatedStorageFileStream stream;

stream = isoStore.OpenFile(fileName, FileMode.Open);
SoundEffect effect = SoundEffect.FromStream(stream);
FrameworkDispatcher.Update();
effect.Play(); 
```

有没有办法在播放完成时收到通知？我需要这个来在播放时禁用播放按钮，然后在完成后再次启用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:39:53.080

您可以使用 `effect.Duration` [属性](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.audio.soundeffect_members.aspx)通过计时器设置 `button.Enable`播放按钮。

# php - 这个重定向元刷新有什么问题

> ID：12617602
> 
> 赞同：2
> 
> 时间：2012-09-27T08:56:28.577
> 
> 标签：php, html, redirect

我在这里有这段代码：

```
<meta HTTP-EQUIV="REFRESH" content="5" url="<? if($saydim=="0") { 
echo "$site/search.php?load=$search"; }
else { 
echo "$site/v-$seoo-$idd.html"; } ?>" /> 
```

重定向不适用于此 if else 语句，只是不断刷新同一页面并且不重定向到 if url 或 else url，在源代码中我看不到任何错误。

我感谢您可能需要解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T08:59:42.410

正确的语法：`<meta http-equiv="refresh" content="5;URL='http://example.com/'">`

```
<meta HTTP-EQUIV="REFRESH" content="5;URL='<? if($saydim=="0") { 
echo "$site/search.php?load=$search"; }
else { 
echo "$site/v-$seoo-$idd.html"; } ?>' /> 
```

或短版：

```
<meta HTTP-EQUIV="REFRESH" content="5;URL='<?php echo ($saydim=="0") ? "$site/search.php?load=$search" : "$site/v-$seoo-$idd.html"; ?>'" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T08:58:07.707

```
<meta HTTP-EQUIV="REFRESH" content="5;url='<?php echo ($saydim=="0") ? "$site/search.php?load=$search":"$site/v-$seoo-$idd.html"; ?>' /> 
```

改用旋转运算符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:00:49.460

您的元语法错误：

```
<meta HTTP-EQUIV="REFRESH" content="5;URL=<? if($saydim=="0") { 
echo "$site/search.php?load=$search"; }
else { 
echo "$site/v-$seoo-$idd.html"; } ?>" /> 
```

# asp.net-mvc-3 - 范围刷新 + 部分刷新 + Kendo 数据源 + Kendo Grid + WebSync

> ID：12617610
> 
> 赞同：2
> 
> 时间：2012-09-27T08:56:45.697
> 
> 标签：asp.net-mvc-3, html, jquery, kendo-ui, websync

我们一直在使用以下技术实施网站。

**客户端：** Html5、KendoUI、WebSync（发布、订阅者）

**服务器：** ASP.net MVC 3.0

Grid 对每一行都有特定的操作。例如，我们需要在选中特定行的复选框后通过单击操作菜单来更新每一行的状态。

当我们在菜单上执行此操作时，我们向 MVC 控制器发送 ajax 请求以更新数据库中的记录，它会简单地返回 true 给客户端。这里，我们使用 WebSync**发布者 - 订阅者**模型在此请求完成时实际通知客户端，因为这些操作需要一些时间来处理。

当我们从**Web Sync**获得回调时，我们更新 kendo 数据网格如下。

```
onMoveActionMessageReceived = function (data) {

     $("#resultGrid").data("kendoGrid").dataSource.read();
     WebSyncClient.UnsubscribeToMoveTransactionActions($('#moveTransactionIdTxt').val());
 } 
```

由于我们在网格数据的数据库中有超过 40 万条记录，并且我们使用分页，因此该解决方案是一个耗时的解决方案，并且会影响用户体验。

无论如何用给定的数据项（即不是总数据源）刷新剑道数据源。（网格范围更新）？或者还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:24:21.393

我在 Kendo + WebSync 中找到了范围更新的解决方案。完成服务器端的处理后，**webSync**通知**refreshSearchData**函数，该函数负责更新客户端数据源。**getSearchResultViewItem**函数从数据库返回数据项，我已经从客户端更新了数据源。

```
 refreshSearchData = function (entityId, entityType) {

    getSearchResultViewItem(entityId, entityType, function (data) {

        var kendoGrid = $("#resultGrid").data("kendoGrid");

        if (kendoGrid) {
            if ($('#SelectedTypeId')[0].value == entityType) {
               var items = kendoGrid.dataSource.data().toJSON();

                for (var i = 0; i < items.length; i++) {
                    if (items[i].Id == data.Id) {
                        items[i] = data;
                        break;
                    }
                }
                kendoGrid.dataSource.data(items);
            }
        }
    });

};

getSearchResultViewItem = function (entityId, entityType, callback) {
    $.get(baseUrl + 'Search/GetSearchViewDtoById', { id: entityId, searchTypeId: entityId }, function (data) {
        callback(data);
    });
}; 
```

# drupal - DC 新产品未显示在“所有产品”中

> ID：12617614
> 
> 赞同：0
> 
> 时间：2012-09-27T08:57:04.743
> 
> 标签：drupal, drupal-7, drupal-views, drupal-commerce

我不确定这是问这个问题的正确地方，但我到处都试过（drupal.exchange drupal 等......似乎没有人看到它）

所以我在这里尝试。不是我很乐意调查自己，但由于我是 drupal 新手，所以我不知道如何“调试”或发现问题，因此任何提示都会受到赞赏。

我创建了一个新的产品显示内容类型，然后创建了一个这种类型的新产品。这个新项目显示在类别列表中，但不在产品列表中。

可重复：总是重现步骤：

```
install KC without demo store, no option selected
create a new content type : structure/content type/add new content type
save it : save and edit fields
add a product reference to this content type: add existing field / select product reference
save (this generate an error, I raised issue about it).
save settings
add a product category to this content type
save settings
save content type
Create a product : store/product/add product/
select the later display
fill the name, sky and price
save product
select a product category
save (bottom of the page) Now the product and its display should be created
click on the corresponding category on the main menu (top right) => the new item is listed
clik on all product (main menu) => the new item is not listed. 
```

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:26:28.017

好的，我找到了答案。我的新产品没有显示不是因为它被过滤了，而是因为搜索 API 使用的索引没有更新。一旦您知道视图不是使用查询而是搜索结果，这似乎很明显。

# knockout.js - 是否可以在模板绑定中添加可选绑定参数？

> ID：12617617
> 
> 赞同：3
> 
> 时间：2012-09-27T08:57:08.450
> 
> 标签：knockout.js, jquery-templates

我正忙于为一个中型项目创建模板。我使用带有 jquery 模板引擎的 knockoutjs，一切正常。我将一些模板嵌套了几个级别。现在我想为一些模板添加可选的绑定参数。这是我对根模板的绑定，在一个 html 表中：

```
<tr data-bind="template: { name: 'RowTextboxTemplate', data: { caption: 'Transporter', property: Transporter } }" /> 
```

这是 rowtextboxtemplate 模板：

```
<td data-bind="template: { name: 'CellLabelTemplate', data: { caption: caption, property: property } }" />
<td data-bind="template: { name: 'TextboxTemplate', data: { field: property } }" /> 
```

这是子模板之一，文本框模板：

```
<input data-bind="value: field, valueUpdate: 'afterkeydown'" type="text"> 
```

现在，我想这样做：

```
<tr data-bind="template: { name: 'RowTextboxTemplate', data: { caption: 'Transporter', property: Transporter, readOnly: IsTransporterReadOnly } }" /> 
```

但是，我希望它是可选的，所以当省略最后一个属性时它仍然可以工作。我想要这个的原因是有很多字段不需要这个参数，所以它会污染我的 HTML。我在根模板中试过这个：

```
 <td data-bind="template: { name: 'CellLabelTemplate', data: { caption: caption, property: property } }" />
{{if readOnly !== undefined}}
 <td data-bind="template: { name: 'CellComboboxTemplate', data: { options: property, selectedValue: selectedValue, optionsText: optionsText, readOnly: readOnly } }" />
{{else}}
 <td data-bind="template: { name: 'CellComboboxTemplate', data: { options: property, selectedValue: selectedValue, optionsText: optionsText, readOnly: false } }" />
{{/if}} 
```

接下来我将 readonly 属性绑定到子模板中的 readonly 属性，但不幸的是这不起作用。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:05:20.163

您可以做的一件事是`$data.readOnly`在绑定中使用，因为如果 readOnly 未定义，它不会出错，因为您正在从对象访问它。

这里有更详细的描述：[knockout viewmodel property undefined](https://stackoverflow.com/questions/9281196/knockout-viewmodel-property-undefined)

这是您更新的小提琴：http: [//jsfiddle.net/ZRjWz/2/](http://jsfiddle.net/ZRjWz/2/)

# java - Ant：编译失败；有关详细信息，请参阅编译器错误输出

> ID：12617618
> 
> 赞同：4
> 
> 时间：2012-09-27T08:57:09.120
> 
> 标签：java, linux, ant, javac

我想运行一个项目 build.xml 的“ant build-project”。

```
 <javac deprecation="true"
           includeantruntime="false"
           debug="true"
           debuglevel="${debuglevel}"
           destdir="${project.build.outputpath}"
           verbose="true"
           encoding="UTF-8">
        <src path="${project.src.classes}" />
        <compilerarg value="-Xlint" />
        <classpath refid="core.classpath" />
    </javac>

<path id="core.classpath">          
   <pathelement location="${project.build.outputpath}" />       
      <pathelement location="${test.dir}" />
              <fileset dir="${project.build.libpath}">
                <include name="**/*.jar"/>
              </fileset>        
</path> 
```

project.build.outputpath:/PROJECT_MAIN_DIR/target/classes project.build.libpath:/PROJECT_MAIN_DIR/target/lib

但是这个输出让我抓狂：

> build.xml:77：编译失败；有关详细信息，请参阅编译器错误输出。在 org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:999) 在 org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:820) 在 org.apache.tools.ant .UnknownElement.execute(UnknownElement.java:288) at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method .java:601) 在 org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:105) 在 org.apache.tools.ant.Task.perform(Task.java:348) 在 org.apache。 tools.ant.Target.execute(Target.java:357) at org.apache.tools.ant.Target.performTasks(Target.java:385) at org.apache.tools.ant.Project.executeSortedTargets(Project.java: 1329）在组织。

我的配置：

**Ant：** Apache Ant 1.7.0 版

**Java：** java版本“1.6.0_24”OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1) OpenJDK 64-Bit Server VM（build 20.0-b12，混合模式）

**PC** Ubuntu 12.04

```
XXX.java:248: warning: [rawtypes] found raw type: Class
    [javac]     private static void logNotFoundInMemory(Class entityClass, Integer id)
    [javac]                                             ^
    [javac]   missing type arguments for generic class Class<T>
    [javac]   where T is a type-variable:
    [javac]     T extends Object declared in class Class

StatReporterJob.java:219: warning: [unchecked] unchecked cast
    [javac]             T stat = (T) snapshotRow[REFERENCE];
    [javac]                                     ^
    [javac]   required: T
    [javac]   found:    Object 
```

你会帮忙吗？

# python - 下拉框中的 GTK3 Python 类型

> ID：12617619
> 
> 赞同：1
> 
> 时间：2012-09-27T08:57:11.987
> 
> 标签：python, gtk3

有没有我可以让下拉框接受文本。因为我想让下拉框列出以前输入的项目并能够添加新项目。

我在谷歌上进行了很好的搜索，但没有找到任何东西。

谢谢山姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:44:22.717

您正在寻找一个`Gtk.ComboBoxText`与条目。

```
from gi.repository import Gtk
combo_box = Gtk.ComboBoxText.new_with_entry() 
```

有关文档，请参见[此处](http://developer.gnome.org/gtk3/stable/GtkComboBoxText.html)。

# ios - 将 ZKSforce 与 Salesforce Sdk API 集成

> ID：12617623
> 
> 赞同：-1
> 
> 时间：2012-09-27T08:57:16.957
> 
> 标签：ios, salesforce

这是否可以在通过 ZKSForce 传递用户名和密码并获得 ex- by salesforce sdk api 的帐户列表后自定义登录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:55:19.333

您可以在 zksforce 提供的 FDCServerSwitchboard 中调用 loginwithUsername:password 方法

```
[[FDCServerSwitchboard switchboard] loginWithUsername:usernameTextField.text password:passwordTextField.text target:rootViewController selector:@selector(loginResult:error:)]; 
```

可以参考[zksforce](https://github.com/palaniraja/Force.com-Toolkit-for-iOS/blob/master/SVNTest/LoginViewController.m)示例代码中提供的loginviewcontroller

我还写了一些使用 zksforce api 进行常规工作所需的片段@[我的博客 - 为 salesforce 开发 iOS 应用程序 [如何]](http://dr-palaniraja.blogspot.in/2012/01/developing-ios-application-for.html)

# vb.net - 屏幕截图功能作为雅虎聊天并将其保存到数据库

> ID：12617625
> 
> 赞同：0
> 
> 时间：2012-09-27T08:57:25.173
> 
> 标签：vb.net, screenshot

我如何将屏幕截图功能设置为 Yahoo Chat 11.5 版？

我需要捕获一个屏幕区域并将其保存到数据库以在用户需要时显示。

我想要一个功能，接受用户在他们screchuyeenrmove上选择一个区域并按住鼠标，然后将其保存到数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:26:52.640

您可能可以“捕获”鼠标让用户选择点 1，然后选择点 2。然后将该值传递给方法。

# android - Ellipsize 不适用于表格行内的 textview

> ID：12617627
> 
> 赞同：5
> 
> 时间：2012-09-27T08:57:32.923
> 
> 标签：android, android-layout

我正在使用表格布局。我在表格行中有两个（列）文本视图。我想`android:ellipsize="end"`在结束时申请`textView`。

但这对我不起作用，请参见下面的屏幕截图。请给我任何想法，如何将 ellipsize`textview`应用于`table row`.

这是代码：

```
<TableLayout
        android:id="@+id/linerLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_margin="10dip"
        android:background="@drawable/shape1"
        android:stretchColumns="2" >

        <TableRow
            android:id="@+id/TableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:text="Product used for "
                android:textColor="@color/black_color" />

            <TextView
                android:id="@+id/productusedfor"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:ellipsize="end"
                android:minLines="1"
                android:padding="5dp"
                android:singleLine="true"
                android:text="TextView"
                android:textColor="@color/black_color" />
        </TableRow>

        <TableRow
            android:id="@+id/TableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:text="Treatment for "
                android:textColor="@color/black_color" />

            <TextView
                android:id="@+id/treatementfor"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:ellipsize="end"
                android:minLines="1"
                android:padding="5dp"
                android:singleLine="true"
                android:text="TextView"
                android:textColor="@color/black_color" />
        </TableRow>

        <TableRow
            android:id="@+id/TableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:text="Horse Name "
                android:textColor="@color/black_color" />

            <TextView
                android:id="@+id/horsename"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginRight="10dp"
                android:ellipsize="end"
                android:minLines="1"
                android:padding="5dp"
                android:singleLine="true"
                android:text="TextView"
                android:textColor="@color/black_color" />
        </TableRow>

        <TableRow
            android:id="@+id/TableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:text="Where "
                android:textColor="@color/black_color" />

            <TextView
                android:id="@+id/location"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:ellipsize="end"
                android:minLines="1"
                android:padding="5dp"
                android:singleLine="true"
                android:text="TextView"
                android:textColor="@color/black_color" />
        </TableRow> 
```

![在此处输入图像描述](../Images/e7bb24b4c24204be9b1e65b0abb575de.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T06:19:56.187

尝试这个

您必须使用以下属性。因为 textview 的宽度是`wrap_content`这样的，所以它从 tablerow 之外。因此，如果您使用此属性，那么它将起作用：`android:layout_weight="1"`.

```
<TableLayout
        android:id="@+id/linerLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_margin="10dip"
        android:background="@drawable/shape1"
        android:stretchColumns="2" >

        <TableRow
            android:id="@+id/TableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:text="Product used for "
                android:textColor="@color/black_color" />

            <TextView
                android:id="@+id/productusedfor"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:ellipsize="end"
                android:minLines="1"
                android:layout_weight="1"
                android:padding="5dp"
                android:singleLine="true"
                android:text="fjdsngfksngfkfngkaklmngkldfmnkldgfnskldngkldnsklnghdnklgfnkdtgfndkgfn"
                android:textColor="@color/black_color" />
        </TableRow>

        <TableRow
            android:id="@+id/TableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:text="Treatment for "
                android:textColor="@color/black_color" />

            <TextView
                android:id="@+id/treatementfor"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:ellipsize="end"
                android:minLines="1"
                android:layout_weight="1"
                android:padding="5dp"
                android:singleLine="true"
                android:text="TextView"
                android:textColor="@color/black_color" />
        </TableRow>

        <TableRow
            android:id="@+id/TableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:text="Horse Name "
                android:textColor="@color/black_color" />

            <TextView
                android:id="@+id/horsename"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginRight="10dp"
                android:ellipsize="end"
                android:minLines="1"
                android:layout_weight="1"
                android:padding="5dp"
                android:singleLine="true"
                android:text="TextView"
                android:textColor="@color/black_color" />
        </TableRow>

        <TableRow
            android:id="@+id/TableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"
                android:text="Where "
                android:textColor="@color/black_color" />

            <TextView
                android:id="@+id/location"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:ellipsize="end"
                android:minLines="1"
                android:layout_weight="1"
                android:padding="5dp"
                android:singleLine="true"
                android:text="TextView"
                android:textColor="@color/black_color" />
        </TableRow>
</TableLayout> 
```

它可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:04:43.000

//尝试这个

        `android:maxEms="9"`这个属性会根据你想要达到的长度改变你的**maxEms 。**

```
<TextView
                android:id="@+id/productusedfor"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:ellipsize="end"
                android:minLines="1"
                android:padding="5dp"
                android:maxEms="5"
                android:singleLine="true"
                android:text="TextView"
                android:textColor="@color/black_color" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T09:22:12.437

对于我`android:maxLines="3"`在每个需要椭圆大小的 TextView 中使用的多行 TextView。

# android - 在 RelativeLayout 内旋转到 ImageView

> ID：12617632
> 
> 赞同：4
> 
> 时间：2012-09-27T08:57:37.883
> 
> 标签：android, android-layout, android-widget, android-imageview

我有`ImageView`一个`RelativeLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tabBar"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#272727"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/logoMobile"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:gravity="center"
    android:paddingTop="2.2dp"
    android:src="@drawable/logo" />

<ImageButton
    android:id="@+id/BtnSlide"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_centerVertical="true"
    android:background="@null"
    android:src="@drawable/lin" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/BtnSlide"
    android:gravity="center"
    android:paddingLeft="30dp"
    android:text="HEADER"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

这个 xml 在应用程序的顶部定义了一个“标签栏”，就在通知栏的下方。我想要`ImageView`围绕它的中心旋转。我在我的方法中尝试过这种方式`onCreate`：

```
logo = (ImageView)findViewById(R.id.logoMobile);
ApplyAnimationToObject doAnimation = new ApplyAnimationToObject(logo);
doAnimation.startRotationAnimation(); 
```

然后`ApplyAnimationToObject`上课：

```
package Logic;

public class ApplyAnimationToObject {

final ImageView image;

public ApplyAnimationToObject(ImageView image) {
    this.image = image;
}

public void startRotationAnimation() {
    RotateAnimation anim = new RotateAnimation(0f, 350f, 15f, 15f);
    anim.setInterpolator(new LinearInterpolator());
    anim.setRepeatCount(Animation.INFINITE);
    anim.setDuration(7000);
    image.startAnimation(anim);
  }
} 
```

但是 ImageView 根本不会旋转或有任何动画。谁能帮我吗？

**编辑**

我尝试使用此代码：

```
public void rotateView(View v){
    Animation rotateAnimation = new RotateAnimation(0,
            360, v.getWidth() / 2, v.getWidth() / 2);
    rotateAnimation.setDuration(10000);
    v.startAnimation(rotateAnimation);
    if(rotateAnimation.hasEnded())
        Log.i("+++++ANIMATION+++++", "ENDED!!");
    else
        Log.i("+++++++ANIMATION++++++", "NOT ENDED");
} 
```

并且输出 til`LogCat`告诉我动画还没有结束，但是没有动画到`ImageView`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:04:15.823

试试下面的代码：

```
 Matrix matrix=new Matrix();
     imageView.setScaleType(ScaleType.MATRIX);   //required
     matrix.postRotate((float) angle, pivX, pivY);
     imagView.setImageMatrix(matrix); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T09:06:42.127

也尝试另一种方式：

在要旋转的视图上使用 RotateAnimation，并确保 Animation 设置为 fillAfter=true、duration=0 和 fromDegrees=toDgrees

```
<?xml version="1.0" encoding="utf-8"?>
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="45"
    android:toDegrees="45"
    android:pivotX="50%"
    android:pivotY="50%"
    android:duration="0"
    android:startOffset="0"
/> 
```

并在代码中充气动画：

```
Animation rotation = AnimationUtils.loadAnimation(this, R.anim.rotation);
myView.startAnimation(rotation); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T09:05:48.303

尝试使用以下代码：

```
public void rotateView(View v){
    Animation rotateAnimation = new RotateAnimation(0,
            360, v.getWidth() / 2, v.getWidth() / 2);
    rotateAnimation.setDuration(3000);
    v.startAnimation(rotateAnimation);
} 
```

要求轮换：

```
rotateView(imgView); 
```

# solr - Solr 非规范化和引用数据的更新

> ID：12617635
> 
> 赞同：3
> 
> 时间：2012-09-27T08:57:48.283
> 
> 标签：solr, lucene, parent-child, elasticsearch, relation

考虑以下情况。我们有一个数据库，将作家和书籍存储在两个单独的表中。一本书显然存储了对写这本书的作者的引用。对于 Solr，我必须将此结构非规范化为一个大文档，其中每本书都包含相关作者的详细信息。该索引现在用于查询书籍。

系统的一位用户现在决定更新系统中的写入者记录。因为很多书都可以与之关联，所以我必须更新 Solr 中包含来自该作者记录的嵌入数据的每个文档。这非常痛苦，因为据我所知，我必须删除并重新添加每个受影响的文档。

有没有更好的方法来做到这一点？如果引用的数据之一被修改，我需要对系统中的索引进行近乎实时的更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:19:57.237

这将是嵌套文档的完美用例。据我所知，lucene 确实支持嵌套文档，但 Solr 不支持，不完全确定此功能的当前状态。

不过，此功能在 elasticsearch 中可用。你可能想看看它，如果你想知道我认为[elasticsearch 有什么很酷的](http://blog.trifork.com/2012/09/25/whats-so-cool-about-elasticsearch/)话，我刚刚写的一篇文章会很有趣。你的问题让我想起了我的文章中没有提到嵌套文档功能，这也很酷。您可以在映射中使用[嵌套类型](http://www.elasticsearch.org/guide/reference/mapping/nested-type.html)。如果你想了解更多，可以看看[这篇](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)文章。顺便说一句，它完全包含书籍/作者的例子。

Elasticsearch 还可以帮助您[更新文档](http://www.elasticsearch.org/guide/reference/api/update.html)。您不需要重新索引整个文档，只需通过脚本发送更改。由于它存储已被索引的[源](http://www.elasticsearch.org/guide/reference/mapping/source-field.html)文档，它在内部检索它，更新它运行脚本并重新索引它。这就是 lucene 在内部的工作方式，因为它的索引段是一次性写入的。使用即将发布的 Solr 4，您可以[更新](https://issues.apache.org/jira/browse/SOLR-139)仅提供更改的文档，但据我所知，这只有在您的所有字段都已存储时才有效。未存储的字段无法从索引中检索。

如果我们谈论的是近实时更新，elasticsearch 确实使用了 Lucene 近实时 API，并且每秒自动刷新索引读取器。Solr 3 还没有使用这些 API，但 Solr 4 使用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T06:53:46.463

要更新 SOLR 中的嵌套类型，您可以使用数据导入器和增量导入。[https://wiki.apache.org/solr/DataImportHandler#Delta-Import_Example](https://wiki.apache.org/solr/DataImportHandler#Delta-Import_Example)上的示例显示了它是如何工作的。显然，您需要让 solr 访问您的数据库。

# javascript - svg 中的文本不会显示动画使用

> ID：12617638
> 
> 赞同：0
> 
> 时间：2012-09-27T08:57:53.827
> 
> 标签：javascript, html, dom, timer, svg

我正在尝试在 svg 内开发带有“text”标签的文本，并在尝试使用简单网页构建时使用“animate”标签在动画组内开发，它工作正常，但是当我将 SVG 与 HTML DOM 一起应用时Timer 中的 Javascript 动画不会显示，但 svg 和文本正确显示（没有动画）

动画：

```
 var Animate;
    Animate = document.createElementNS("http://www.w3.org/2000/svg", "animate");
    Animate.setAttribute("attributeName", "x");
    Animate.setAttribute("from", 500);
    Animate.setAttribute("to", 35);
    Animate.setAttribute("dur","1s");
    Animate.setAttribute("fill", "freeze");

    var SVG=document.createElementNS("http://www.w3.org/2000/svg", "svg");
    SVG.style.zIndex = 1;
    SVG.style.position = "absolute";

    var Group = document.createElementNS("http://www.w3.org/2000/svg", "g");
    Group.setAttribute("id","Effect1");

    var Component=document.createElementNS("http://www.w3.org/2000/svg", "text");
    Component.setAttribute("fill", "rgb(30,100,245)");
    Component.setAttribute("font-family", "Arial");
    Component.setAttribute("font-size", 20);
    Component.setAttribute("style", "dominant-baseline:hanging");

    var txt = document.createTextNode("Complete Trial");
    Component.appendChild(txt);

    Component.appendChild(Animate);
    Group.appendChild(Component);

    SVG.appendChild(Graph);
    document.body.appendChild(SVG); 
```

谁能告诉我为什么动画没有出现？或者它只是无法与 javascript 计时器同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:10:51.937

这可以在 Firefox 中正确设置动画。如果您使用的是基于 Webkit 的浏览器，您似乎遇到了[这个问题](https://bugs.webkit.org/show_bug.cgi?id=74801)

# c# - 奇怪的随机异常

> ID：12617639
> 
> 赞同：1
> 
> 时间：2012-09-27T08:57:55.857
> 
> 标签：c#, asp.net, linq, linq-to-sql

与[ASP.NET MVC + LINQ 异常相关](https://stackoverflow.com/questions/1309235/asp-net-mvc-linq-exception/12597713)

我在 8 到 12 次页面重新加载时随机出现 2 个异常 - 其中异常也是随机的，可能是第一，也可能是第二。例外情况如下

```
[IndexOutOfRangeException: Index was outside the bounds of the array.]
       System.Data.SqlClient.SqlDataReader.ReadColumnHeader(Int32 i) +701
       System.Data.SqlClient.SqlDataReader.IsDBNull(Int32 i) +29
       Read_BoardMessage(ObjectMaterializer`1 ) +348
       System.Data.Linq.SqlClient.ObjectReader`2.MoveNext() +42
       System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +472
       System.Linq.Enumerable.ToList(IEnumerable`1 source) +80
       Website.BusinessLogic.Services.BoardMessageService.GetBoardMessageModelsFromQuery(IQueryable`1 boardMessagesQuery) in D:\Applications\Website.BusinessLogic\Services\BoardMessageService.cs:167
       Website.BusinessLogic.Services.<>c__DisplayClass6.<GetStudentsBoardMessages>b__5() in D:\Applications\Website.BusinessLogic\Services\BoardMessageService.cs:89
       Library.Web.Utilities.RequestScopeCache.Get(String key, Func`1 defaultGetter) in D:\APPLICATIONS\Library\Web\Utilities\RequestScopeCache.cs:66
       Website.BusinessLogic.Services.BoardMessageService.GetStudentsBoardMessages(Int32 classId) in D:\Applications\Website.BusinessLogic\Services\BoardMessageService.cs:89
       Website.Web.usercontrols.ShowMessages.Initialize() in D:\Applications\Website.Web\usercontrols\ShowMessages.ascx.cs:28
       System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25
       System.Web.UI.Control.LoadRecursive() +71
       System.Web.UI.Control.LoadRecursive() +190
       System.Web.UI.Control.LoadRecursive() +190
       System.Web.UI.Control.LoadRecursive() +190
       System.Web.UI.Control.LoadRecursive() +190
       System.Web.UI.Control.LoadRecursive() +190
       System.Web.UI.Control.LoadRecursive() +190
       System.Web.UI.Control.LoadRecursive() +190
       System.Web.UI.Control.LoadRecursive() +190
       System.Web.UI.Control.LoadRecursive() +190
       System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064 
```

- - - 和 - - -

```
[InvalidOperationException: Sequence contains more than one element]
   System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult) +4539
   System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries) +207
   System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query) +500
   System.Data.Linq.DataQuery`1.System.Linq.IQueryProvider.Execute(Expression expression) +41
   System.Linq.Queryable.Count(IQueryable`1 source) +352
   Website.Web.usercontrols.TopMenu.SetStudentMenu() in D:\Applications\Website.Web\usercontrols\TopMenu.ascx.cs:93
   Website.Web.usercontrols.TopMenu.IsLoggedIn() in D:\Applications\Website.Web\usercontrols\TopMenu.ascx.cs:60
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25
   System.Web.UI.Control.LoadRecursive() +71
  System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064 
```

堆栈跟踪指向以下代码

```
using (var dataContext = new MyDataContext(Config.ConnectionString))
{
   int numberOfBoardMessages = dataContext.BoardMessages.
                Where(boardMessage => boardMessage.BoardMessageClasses.
      Any(boardMessageClass => boardMessageClass.ClassId == currentClassId) && boardMessage.IsPublished).
                    Count();
} 
```

我尝试使用没有“BoardMessages”的空白数据库，但错误仍然存​​在。有没有人对可能是什么问题有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:05:42.190

听起来有人需要使用[`TransactionScope`](https://www.google.ru/search?q=TransactionScope&oq=TransactionScope&sugexp=chrome,mod=11&sourceid=chrome&ie=UTF-8).

# java - 从 FTP 服务器读取文件的最佳方法

> ID：12617640
> 
> 赞同：0
> 
> 时间：2012-09-27T08:58:00.380
> 
> 标签：java, ftp, apache-poi

我想使用 Apache POI API 从 Ftp 服务器（不在我的网络中）读取 ms excel 文件。

我对性能不太关心，从 FTP 读取文件是更好的方法，或者首先在本地系统上下载然后执行读取操作。

请帮助我选择更好的方法来读取文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:08:07.823

我觉得第一个更好。后者比前者需要多2个io-op，io-op比较耗时。

# zend-framework - 社交引擎从个人资料页面获取用户 ID

> ID：12617641
> 
> 赞同：0
> 
> 时间：2012-09-27T08:58:02.400
> 
> 标签：zend-framework, socialengine

我正在尝试向用户个人资料页面添加一些功能，为此我需要该用户 ID - 只是为了澄清，这不是我正在追逐的观众 ID，而是我正在查看其个人资料的用户的 ID。所以，我使用`$subject = Engine_Api::_()->core()->getSubject('user');`它返回一个充满各种数据的大对象，但不知道如何提取用户ID？

有人有线索吗？（SocialEngine 4 是我正在使用的平台）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:20:24.657

这将为您提供配置文件的用户 ID..

```
$profileownerid = Engine_Api::_()->core()->getSubject('user')->getIdentity(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:46:29.393

我想通了：`$subject_id = $subject->getIdentity();`瞧！

# jquery - onclick灯箱的鼠标悬停图像标记

> ID：12617642
> 
> 赞同：1
> 
> 时间：2012-09-27T08:58:06.500
> 
> 标签：jquery, popup, fancybox, lightbox

我想不出正确的措辞方式，但基本上我想要一些与谷歌地图非常相似的东西：

**选择一些图像（这些图像将是简单的选项卡列表，单击时会在页面上具有淡入淡出过渡），但在每张图像上单击某个部分（例如标记或突出显示的区域）会弹出一个小灯箱弹出窗口可能包含简化信息和“更多信息”链接。**

到目前为止，我已经发现了很多创建 svg 图像的地图插件，但我不确定所使用的图像是地图还是建筑物的图片或其他东西。似乎还有很多不同的可能性，fancybox 可以在点击时以时尚的方式显示 html 元素。我只是对您如何制作它感到困惑，因此单击图像的某些区域会打开不同的弹出窗口。

任何有关解决此问题的最佳方法的帮助都会很好

-马特

# xcode - 无法在路径加载平台

> ID：12617644
> 
> 赞同：46
> 
> 时间：2012-09-27T08:58:10.380
> 
> 标签：xcode, mercurial, filemerge

使用`filemerge`解决`HG`冲突时，出现以下**错误**

```
FileMerge[18002:707] Unable to load platform at path
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-04T11:06:34.263

我在 Git 中有相同的 FileMerge 警告。当我查看 Xcode 的首选项时，我可以看到既没有安装 iPhoneSimulator 也没有安装 iPhoneOS 平台，但是当我查看“/Applications/Xcode.app/Contents/Developer/Platforms”时目录确实存在。

我不是为 iOS 开发的，所以我删除了 iPhoneOS.platform 和 iPhoneSimulator.platform 并且警告消失了。

如果您确实需要这些平台，请尝试从 Xcode 正确重新安装它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-09T10:56:18.380

我尝试`iPhoneSimulator.platform/Info.plist`从二进制转换为 xml，确认 Filemerge 不再产生错误。然后我将它转换回二进制文件，Filemerge 仍然很好。

```
$ cd /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform
$ sudo plutil -convert xml1 Info.plist
$ sudo plutil -convert binary1 Info.plist 
```

免责声明：灵感来自@user3761183！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-20T18:14:46.493

我尝试将所有`*.platform/Info.plist`from转换`binary`为`xml1`并解决了问题。奇怪的 ...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-03T06:48:43.200

我面临同样的问题，以下命令解决了我的问题：

```
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-11T10:17:47.523

这个问题有一个简单的解决方案对我有用。我只是启动了 Xcode 并创建了一个 iOS Playground 项目。Xcode 要求我在 Mac 上启用开发者模式，我做到了。然后我关闭了 Xcode，删除了项目，文件合并错误不再存在。

运行 Xcode 6.2 版

# jquery - 使用 jquery addClass 管理菜单并删除类

> ID：12617646
> 
> 赞同：0
> 
> 时间：2012-09-27T08:58:13.150
> 
> 标签：jquery, click, addclass

我正在创建一个导航，它有 3 个状态。正常、翻转和选定。

每个按钮对于所有 3 种状态都有不同的图像。 ![航海](../Images/5bce69384443730cce135460ea8485a5.png)

我想用 jQuery 做到这一点。

状态 1 和 2 我可以单独显示

```
.boy1 a {background-image:...}
.boy1 a:hover {background-image:...}
.boy2 a {background-image:...}
.boy2 a:hover {background-image:...}
.boy3 a {background-image:...}
.boy3 a:hover {background-image:...} 
```

但是当您单击 BUTTON 时，它应该显示一个包含其名称或任何其他图像的 DIV。

例如

```
$(".boy1").click(function() {
  $("#boy1").show("slow");
}); 
```

**但现在我的问题是，如果有人之前点击其他按钮 #boy1 DIV 应该隐藏，如果你点击 .boy2 那么 #boy2 show show 和其他 #boy1 或 #boy3 应该隐藏**

HTML 部分：

```
<div id="navigation">
    <div class="boy1"><a href="#section1"></a></div>
    <div id="boy1">MR ABC</div>

    <div class="boy2"><a href="#section2"></a></div>
    <div id="boy2">MR XYZ</div>

    <div class="boy3"><a href="#section3"></a></div>
    <div id="boy3">MR LALOLA</div>
</div>

<style type="text/css">
    .boy1 a { background-image:images/boy1.gif; display:block; cursor:pointer; height:100px; width:50px}
    .boy1 a:hover { background-image:images/boyimage1.gif;}
    #boy1 {position:absolute; top:100; left:50; height:30px; width:60px;}

    .boy2 a { background-image:images/boy2.gif; display:block; cursor:pointer; height:100px; width:50px}
    .boy2 a:hover { background-image:images/boyimage2.gif;}
    #boy2 {position:absolute; top:100; left:200; height:30px; width:60px;}

    .boy3 a { background-image:images/boy3.gif; display:block; cursor:pointer; height:100px; width:50px}
    .boy3 a:hover { background-image:images/boyimage3.gif;}
    #boy3 {position:absolute; top:100; left:350; height:30px; width:60px;}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:10:03.490

如果我理解正确，您希望在单击元素时显示`#boy1`div `.boy1`，如果单击`.boy2`元素，它应该显示`#boy2`div 但隐藏其他男孩 div。，

我假设你的 boy1 或 boy2 元素上只有一个类。

如果是，你可以试试这个。

```
$(".boy1, .boy2, .boy3").click(function() {
   var self = this;
   $('[id^=boy]').hide();
   $("#"+self.className).show("slow");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:10:27.350

HTML

```
<div id="navigation">
    <div class="boy1"><a href="#section1">x</a></div>
    <div id="boy1" class="showhidediv">MR ABC</div>

    <div class="boy2"><a href="#section2">y</a></div>
    <div id="boy2" class="showhidediv">MR XYZ</div>

    <div class="boy3"><a href="#section3">z</a></div>
    <div id="boy3" class="showhidediv">MR LALOLA</div>
</div>​ 
```

JS

```
$(document).ready(function() {

  $('div.boy1').on('click',function(){
    $('div#boy1').siblings('.showhidediv').hide();
    $('div#boy1').show();
});

  $('div.boy2').on('click',function(){
    $('div#boy2').siblings('.showhidediv').hide();
    $('div#boy2').show();
});

   $('div.boy3').on('click',function(){
    $('div#boy3').siblings('.showhidediv').hide();
    $('div#boy3').show();
});

}); 
```

​<a href="http://jsfiddle.net/Kxgh2/" rel="nofollow">在这里查看演示

`$('.showhidediv').hide();`如果您想从隐藏所有 div 开始，请添加到您的代码中。

我希望这能解决你的问题。如果您有任何问题，请随时提问。谢谢

# delphi - 如何在 Delphi 中重新组织我的单元的文件夹结构？

> ID：12617648
> 
> 赞同：16
> 
> 时间：2012-09-27T08:58:15.707
> 
> 标签：delphi, refactoring, directory, delphi-xe, directory-structure

我用 Delphi 开始了一个原型，**所有源文件都在一个目录下**。
现在，我想**用文件夹重新组织所有内容**。

我找到了两种方法来做到这一点。

1/ 首先是在 Delphi IDE 中打开每个单元和`Save as` 新文件夹。然后删除旧的单元文件。

2/ 在windows explorer下，重新组织所有东西，然后在Delphi IDE中打开项目，删除对旧（未知）单元的引用，然后逐个文件夹添加每个单元文件夹。

因为我有 100 多个单位，所以无论我使用哪种方法（1 或 2）都非常痛苦。
**你是如何进行这样的重组的？** 我错过了一个功能吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-27T10:14:13.937

我没有检查 XE，但在 XE2 中，这在 IDE 中很容易做到：

*   如果有多个项目，则将所有项目都放在一个项目组中
*   在项目经理对每个单位做
    *   按 F2 或使用上下文菜单重命名单位
    *   重命名时将子文件夹放在单元名称的前面（例如 test\Unit1.pas）

IDE 将移动该单元（移除旧的）并将此更改推广到项目组中的所有项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T09:22:46.167

您真的需要在项目中命名所有 100 多个单位吗？其中一些不是可以放在搜索路径上的文件夹中的普通功能吗？从项目中删除所有不太常用的单元并将它们放在文件夹中以适合您的逻辑。IDE 会找到它们，你也可以在需要的时候在 IDE 中右键打开它们，而不用在项目中用固定路径命名它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T10:08:52.073

最简单的方法是：

1.  将项目文件复制到您希望它们所在的文件夹中；
2.  编辑项目 *.dpr 文件以删除所有`in ..`;
3.  编辑项目选项并将项目文件夹的路径添加到搜索路径选项（不是全局 IDE 默认项目选项，而是您项目的选项）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T09:20:35.277

只有第二个选项。使用 TotalCommander、Windows Explorer 等将文件移动到新目录。我认为您的源代码布局应如下所示：

```
myutils
libs
    crypto
    database
    network 
```

然后添加这些目录：

```
myutils;libs\crypto;libs\database;libs\network 
```

给你的`Unit Search Path`

# css - 用图像 HTML 定位文本

> ID：12617653
> 
> 赞同：1
> 
> 时间：2012-09-27T08:58:28.873
> 
> 标签：css, html, styling

我这里有个小问题。我有一个 Div，我希望文本在中间浮动。

我现在附上了它的屏幕截图，我希望它看起来如何，有人知道这是否可以实现，还是我需要将其制作成实际图像？

![推特脸书订阅源](../Images/704a3b39c8935b8e1db54286c9538659.png)

JS 小提琴 >> [http://jsfiddle.net/DU4u4/](http://jsfiddle.net/DU4u4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:00:34.303

你可以试试`vertical-align: middle`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:01:55.253

………………………………………………………………………………………………………………………………………………

现在习惯`line-height`了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:14:26.993

希望，这是你需要的东西......

检查**[演示](http://jsfiddle.net/vijaysarin/pxFWA/19/)**

**HTML**

```
<div id="socialConnect">
    <div class="fbConnect">Follow us on</div>
    <div class="twitterConnect">OR</div>
</div> 
```

**CSS**

```
.fbConnect{
    background-image:url('http://www.seedaneed.com/images/fb_btn.png');
    background-repeat:no-repeat;
    background-position:right;
    height:32px;
    width:125px;
    float:left;
    padding-top:10px;
}

.twitterConnect{
    background-image:url('http://www.boson.com/images/twitter-button.jpg');
    background-repeat:no-repeat;
    background-position:right;
    height:32px;
    width:60px;    
    float:left;    
    padding-top:10px;
    padding-left:5px;
    text-align:left;
} 
```

# communication - 当我有多个电话号码使用同一个 SIP 提供商时，如何路由来电？

> ID：12617657
> 
> 赞同：2
> 
> 时间：2012-09-27T08:58:42.177
> 
> 标签：communication, sip, voip, asterisk, telephony

我的SIP 提供商为我的办公室提供了一个**主要**电话号码。`0120120020`我最近向我的 SIP 提供商询问了同一 SIP 帐户上的**第二个**电话号码。`0230230030`

当有人通过拨打**主要**电话号码呼叫办公室时，我希望 Asterisk 振铃属于**A 组的**所有电话，并且如果拨打**第二个**电话号码，我希望它振铃属于**B 组**的所有电话。

 ******我的 extensions.conf 包含以下几行：

```
[sip-incoming-calls]
exten => s,1,Dial(SIP/10&SIP/11&SIP/12&SIP/20&SIP/21,20,tr) 
```

分机 10、11 和 12 属于**A 组**，分机 20 和 21 属于**B 组**。对于来自**主**电话号码和**第二**电话号码的每个来电，每部电话都会响铃。

如何在 CentOS 6.3 下使用 Asterisk 1.8 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T08:58:42.177

对于每个呼叫，Asterisk 都会设置一些变量，其中包含有关当前来电的信息。如果呼叫来自特定国家/地区，这些信息有助于采取不同的行动，您还可以阻止来自他们电话号码的不良呼叫者，...

我们正在寻找一种方法来检索 DID，这实际上意味着直接拨入号码，即呼叫者拨打您办公室的号码。

有两种方法可以检索它：

*   通过`CALLERID(dnid)`直接使用变量，它的值将设置为**0120120020**或**0230230030**

    ```
    [sip-incoming-calls]
    exten => s,1,Set(thedid=${CALLERID(dnid)}) 
    ```

*   如果上述变量为空，那么您的 SIP 提供商不会根据需要发送任何信息以使 Asterisk 正确填充它。

    但是，您可以使用 直接从 SIP 标头内的 To 字段中检索电话号码`SIP_HEADER(To)`，此变量将包含`<sip:0230230030@sip.provider.com>`有人从您的**第二个**电话号码呼叫您的办公室的时间。

    ```
    [sip-incoming-calls]
    exten => s,1,Set(thedid=${SIP_HEADER(To)})
    exten => s,2,Set(thedid=${CUT(thedid,@,1)})
    exten => s,3,Set(thedid=${CUT(thedid,:,2)}) 
    ```

一旦你在变量中检索到 DID，你必须设置一个条件，让我们使用`GotoIf`. 在您的情况下，结果会是这样：

```
exten => s,4,GotoIf($["${thedid}" = "0120120020"]?6:5)
exten => s,5,GotoIf($["${thedid}" = "0230230030"]?7)
exten => s,6,Dial(SIP/10&SIP/11&SIP/12,20,tr)
exten => s,7,Dial(SIP/20&SIP/21,20,tr) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-27T22:57:37.120

```
[sip-incoming-calls]

exten => s,1,goto(${CUT(CUT(SIP_HEADER(TO),@,1),:,2)},1)

exten => 0120120020,1,Dial(SIP/10&SIP/11&SIP/12,20,tr)

exten => 0230230030,1,Dial(SIP/20&SIP/21,20,tr) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T07:31:05.587

您可以轻松地创建中继（单独的 dahdi 端口）并将中继重定向到特定的扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:05:01.733

要求您的 voip 提供商发送来电的 DID 号码，然后使用以下拨号方案

```
[sip-incoming-calls] 
exten => _0120120020,1,Dial(SIP/10&SIP/11&SIP/12,tr) 
exten => _0120120020,n,hangup
exten => _0230230030,1,Dial(SIP/20&SIP/21,20,tr) 
exten => _0230230030,n,hangup 
```******

# ios - RevClusterMap 半径

> ID：12617660
> 
> 赞同：0
> 
> 时间：2012-09-27T08:58:47.423
> 
> 标签：ios, xcode, mapkit

我在我的项目中使用 REVClusterMap 将我的地图注释聚集在不同的缩放级别上，因此我不会一次显示所有这些注释，因为它们有很多。问题是在某些级别上，一些注释被包含在一个不是很接近的集群中。所以我猜这是因为它们聚集的半径。有没有办法做到这一点？BASE_RADIUS 似乎没有在任何地方使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:55:42.590

经过一番研究，似乎它毕竟不能使用 BASE_RADIUS 。它将视图拆分为几个区域，然后将进入相应区域的视图聚集在一起。

# haskell - 一个简单的例子表明 IO 不满足单子定律？

> ID：12617664
> 
> 赞同：39
> 
> 时间：2012-09-27T08:59:05.293
> 
> 标签：haskell, io, functional-programming, monads

我见过提到`IO`不满足单子定律，但我没有找到一个简单的例子来说明这一点。有人知道一个例子吗？谢谢。

**编辑：**正如[ertes](https://stackoverflow.com/a/12620418/1333025)和 nm 所指出的， using`seq`有点非法，因为它可以使任何 monad 违反法律（结合`undefined`）。由于`undefined`可能被视为非终止计算，因此使用它非常好。

所以修改后的问题是：**任何人都知道一个`IO`不满足单子定律的例子，没有使用`seq`？**（或者如果不允许，也许是一个`IO`确实满足法律的证明？）`seq`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-27T11:33:12.093

`seq`如果你排除了奇怪的组合子，Haskell 中的所有单子都是单子。对于`IO`. 由于`seq`它实际上不是常规函数，而是涉及魔法，因此您必须将其排除在检查单子定律之外，原因与您必须排除`unsafePerformIO`. 使用`seq`you 可以证明所有单子都是错误的，如下所示。

在 Kleisli 范畴中，monad 产生，`return`是恒等态射并且`(<=<)`是组合。所以`return`必须是一个身份`(<=<)`：

```
return <=< x = x 
```

即使使用`seq`Identity 和 Maybe 也不能成为 monad：

```
seq (return <=< undefined :: a -> Identity b) () = ()
seq (undefined            :: a -> Identity b) () = undefined

seq (return <=< undefined :: a -> Maybe b) () = ()
seq (undefined            :: a -> Maybe b) () = undefined 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-27T14:14:08.647

tl; dr upfront：`seq`是唯一的方法。

由于`IO`标准没有规定的实现，我们只能看具体的实现。如果我们看一下 GHC 的实现，因为它可以从源代码中获得（可能是某些幕后特殊处理`IO`引入了违反单子定律，但我不知道有任何此类事件发生），

```
-- in GHC.Types (ghc-prim)
newtype IO a = IO (State# RealWorld -> (# State# RealWorld, a #))

-- in GHC.Base (base)
instance  Monad IO  where
    {-# INLINE return #-}
    {-# INLINE (>>)   #-}
    {-# INLINE (>>=)  #-}
    m >> k    = m >>= \ _ -> k
    return    = returnIO
    (>>=)     = bindIO
    fail s    = failIO s

returnIO :: a -> IO a
returnIO x = IO $ \ s -> (# s, x #)

bindIO :: IO a -> (a -> IO b) -> IO b
bindIO (IO m) k = IO $ \ s -> case m s of (# new_s, a #) -> unIO (k a) new_s

thenIO :: IO a -> IO b -> IO b
thenIO (IO m) k = IO $ \ s -> case m s of (# new_s, _ #) -> unIO k new_s

unIO :: IO a -> (State# RealWorld -> (# State# RealWorld, a #))
unIO (IO a) = a 
```

它被实现为（严格的）状态单子。因此，任何违反单子定律的行为`IO`，也是由`Control.Monad.State[.Strict]`.

让我们看看 monad 法则，看看会发生什么`IO`：

```
return x >>= f ≡ f x:
return x >>= f = IO $ \s -> case (\t -> (# t, x #)) s of
                              (# new_s, a #) -> unIO (f a) new_s
               = IO $ \s -> case (# s, x #) of
                              (# new_s, a #) -> unIO (f a) new_s
               = IO $ \s -> unIO (f x) s 
```

忽略 newtype 包装器，这意味着`return x >>= f`变成`\s -> (f x) s`. （可能）区分它的唯一方法`f x`是`seq`. （并且`seq`只有在 时才能区分`f x ≡ undefined`。）

```
m >>= return ≡ m:
(IO k) >>= return = IO $ \s -> case k s of
                                 (# new_s, a #) -> unIO (return a) new_s
                  = IO $ \s -> case k s of
                                 (# new_s, a #) -> (\t -> (# t, a #)) new_s
                  = IO $ \s -> case k s of
                                 (# new_s, a #) -> (# new_s, a #)
                  = IO $ \s -> k s 
```

再次忽略 newtype 包装器，`k`被替换为`\s -> k s`，它再次只能由 区分`seq`，并且仅当`k ≡ undefined`。

```
m >>= (\x -> g x >>= h) ≡ (m >>= g) >>= h:
(IO k) >>= (\x -> g x >>= h) = IO $ \s -> case k s of
                                            (# new_s, a #) -> unIO ((\x -> g x >>= h) a) new_s
                             = IO $ \s -> case k s of
                                            (# new_s, a #) -> unIO (g a >>= h) new_s
                             = IO $ \s -> case k s of
                                            (# new_s, a #) -> (\t -> case unIO (g a) t of
                                                                       (# new_t, b #) -> unIO (h b) new_t) new_s
                             = IO $ \s -> case k s of
                                            (# new_s, a #) -> case unIO (g a) new_s of
                                                                (# new_t, b #) -> unIO (h b) new_t
((IO k) >>= g) >>= h = IO $ \s -> case (\t -> case k t of
                                                (# new_s, a #) -> unIO (g a) new_s) s of
                                    (# new_t, b #) -> unIO (h b) new_t
                     = IO $ \s -> case (case k s of
                                          (# new_s, a #) -> unIO (g a) new_s) of
                                    (# new_t, b #) -> unIO (h b) new_t 
```

现在，我们一般有

```
case (case e of                    case e of
        pat1 -> ex1) of       ≡      pat1 -> case ex1 of
  pat2 -> ex2                                  pat2 -> ex2 
```

根据语言报告的方程[3.17.3.(a)](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-610003.17.3)，因此该定律不仅适用于模`seq`。

总结，`IO`满足单子定律，除了`seq`可以区分`undefined`和`\s -> undefined s`. 这同样适用于`State[T]`, `Reader[T]`,`(->) a`和任何其他包装函数类型的 monad。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-27T09:14:25.947

单子定律之一是

```
m >>= return ≡ m 
```

让我们在 GHCi 中尝试一下：

```
Prelude> seq ( undefined >>= return :: IO () ) "hello, world"
"hello, world"

Prelude> seq ( undefined :: IO () ) "hello, world"
*** Exception: Prelude.undefined 
```

所以`undefined >>= return`与 不同`undefined`，因此`IO`不是单子。`Maybe`另一方面，如果我们对 monad 尝试相同的操作：

```
Prelude> seq ( undefined >>= return :: Maybe () ) "hello, world"
*** Exception: Prelude.undefined

Prelude> seq ( undefined :: Maybe () ) "hello, world"
*** Exception: Prelude.undefined 
```

这两个表达式是相同的 - 所以`Maybe`这个例子不排除是一个单子。

如果有人有一个不依赖于使用的例子，`seq`或者`undefined`我有兴趣看到它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-15T18:00:17.433

```
m >>= return ≡ m 
```

被打破：

```
sequence_ $ take 100000 $ iterate (>>=return) (return ()) :: IO () 
```

使内存混乱并增加计算时间，而

```
sequence_ $ take 100000 $ iterate (>>=return) (return ()) :: Maybe () 
```

才不是。

AFAIR 有一个 Monad Transformer 可以解决这个问题；如果我猜对了，它就是 Codensity Monad Transformer。

# c - 使用 Regex (POSIX) 在 #ifdef 语句之外查找 printf() 调用

> ID：12617667
> 
> 赞同：2
> 
> 时间：2012-09-27T08:59:22.167
> 
> 标签：c, regex, posix, c-preprocessor

一位同事要求我提出一个正则表达式（POSIX 语法），用于`printf(...);`在 c 代码文件中查找对不在`#ifdef`...`#endif`范围内的调用。

但是，鉴于我只是在 Uni 学习正则表达式，我对此并不完全有信心。

场景看起来像这样：

```
possibly some code
printf(some_parameters);  // This should match
possibly more code

#ifdef DEBUG
possibly some code
printf(some_parameters);  // This shouldn't match
possibly more code
#endif

possibly some code
printf(some_parameters);  // This should also match
possibly more code 
```

请注意，c 文件可能根本不包含#ifdef/#endif 语句，在这种情况下，所有调用都`printf();`应该匹配。

到目前为止，我尝试过的是：

```
(?<!(#ifdef [A-Å0-9]+)).*printf\(.*\);.*(?!(#endif)) 
```

...以及玩弄 .* 的位置（甚至包含/排除）

任何帮助或提示表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:09:20.930

正则表达式不是解决这个问题的好方法。它们不能很好地处理多行搜索，并且它们可以表达的模式受到限制，例如，不可能用正则表达式指定任意嵌套。

解决此问题的正确方法是使用旨在处理 C 代码中的条件编译指令的工具。这将是编译器的 C 预处理器，或专用工具，例如`unifdef`：

```
$ unifdef -UDEBUG file.c | grep printf
printf(some_parameters);  // This should match
printf(some_parameters);  // This should also match 
```

从手册：

```
UNIFDEF(1)                BSD General Commands Manual               UNIFDEF(1)

NAME
     unifdef, unifdefall — remove preprocessor conditionals from code

SYNOPSIS
     unifdef [-ceklst] [-Ipath -Dsym[=val] -Usym -iDsym[=val] -iUsym] ... [file]
     unifdefall [-Ipath] ... file

DESCRIPTION
     The unifdef utility selectively processes conditional cpp(1) directives.
     It removes from a file both the directives and any additional text that
     they specify should be removed, while otherwise leaving the file alone.

     The unifdef utility acts on #if, #ifdef, #ifndef, #elif, #else, and #endif
     lines, and it understands only the commonly-used subset of the expression
     syntax for #if and #elif lines.  It handles integer values of symbols
     defined on the command line, the defined() operator applied to symbols
     defined or undefined on the command line, the operators !, <, >, <=, >=,
     ==, !=, &&, ||, and parenthesized expressions.  Anything that it does not
     understand is passed through unharmed.  It only processes #ifdef and
     #ifndef directives if the symbol is specified on the command line, other‐
     wise they are also passed through unchanged.  By default, it ignores #if
     and #elif lines with constant expressions, or they may be processed by
     specifying the -k flag on the command line. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:06:41.487

不需要正则表达式。

```
cpp -D<your #define options here> | grep printf 
```

# git - git clone git@myserver:gitolite-admin 失败

> ID：12617672
> 
> 赞同：8
> 
> 时间：2012-09-27T08:59:39.500
> 
> 标签：git, gitolite

我正在尝试运行一个 git 服务器存储库。我确实安装了 gitolite

通过 ssh 运行 git info 时，服务器会回答

```
ssh git@myserver info

hello Brian, this is git@hepide01pep1 running gitolite3  on git 1.6.3.2
R W   testing 
```

尝试克隆 gitolite-admin 存储库时出现以下错误

```
git clone git@myserver:gitolite-admin

Cloning into 'gitolite-admin'...
FATAL: R any gitolite-admin Brian DENIED by fallthru
(or you mis-spelled the reponame)
fatal: The remote end hung up unexpectedly 
```

这种语法也会发生同样的事情

```
git clone ssh://git@myserver/gitolite-admin 
Cloning into 'gitolite-admin'...
FATAL: R any gitolite-admin Brian DENIED by fallthru
(or you mis-spelled the reponame)
fatal: The remote end hung up unexpectedly 
```

谁能给我一些有用的提示？我在这里和网上检查了答案，但没有找到任何进一步帮助我的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-29T20:56:30.393

如果您只是设置 gitolite，则接受的答案是一个很好的答案，但如果您是现有安装的新用户，除非您被添加为，否则您将收到与问题中相同的错误管理员。

如果您对 gitolite 存在的服务器具有 shell 访问权限，请登录并切换到 gitolite 用户的用户 - 通常称为`git`.

登录 gitolite 用户后，转到 conf 文件并在 gitolite-admin 存储库中授予自己 RW+ 权限。Gitolite conf 通常在`/home/git/.gitolite/conf/gitolite.conf`（假设用户名是`git`）。对于名为 的 gitolite 用户`Peaches`，授予权限：

```
repo gitolite-admin
    RW+     =   OriginalAdmin Peaches 
```

保存文件，并从命令行运行 setup，仍然是 gitolite 用户：

```
gitolite setup 
```

如果您已正确设置为用户，您现在应该可以克隆了。

有关添加用户的更多信息，请参阅[文档](http://sitaramc.github.com/gitolite/users.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T09:33:18.047

`gitolite-admin`只能使用以用于 gitolite 服务器的 git 帐户命名的公钥访问。

您默认使用 your `brian.pub`，它只允许您访问`testing.git`repo。

您需要`$HOME/.ssh/config`在本地工作站上定义一个文件，以便记录 ssh 参数以使用正确的密钥。
请参阅“ [gitolite：可以通过 ssh 连接，无法克隆](https://stackoverflow.com/a/9340778/6309)”。

```
~/.ssh/gitolite.pub
~/.ssh/gitolite 
```

> 然后我定义了一个配置文件： ~/.ssh/config 在里面：

```
host gitolite
     user git # replace it by the actual git user for the gitolite server
     hostname server.com
     identityfile ~/.ssh/gitolite 
```

克隆将起作用：

```
git clone gitolite:gitolite-admin 
```

* * *

[OP macbert](https://stackoverflow.com/users/135785/macbert)确认：

> 我确实将密钥重命名为`git.pub`，运行`gitolite setup -pk git.pub`并`brian`从`.gitolite/keydir`.
> 之后我得到`git clone git@myserver:gitolite-admin`：

```
Cloning into 'gitolite-admin'... 
remote: Counting objects: 15, done. 
remote: Compressing objects: 100% (12/12), done. 
remote: Total 15 (delta 0), reused 0 (delta 0) 
Receiving objects: 100% (15/15), done. 
```

因此，使用正确的默认密钥，`ssh git@myserver info`这一次应该在“hello”消息中显示对`gitolite-admin`repo 的正确访问权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T09:28:28.770

通常裸 git repos 使用*.git*名称。请尝试做

`git clone git@myserver:gitolite-admin.git`

# playframework-2.0 - OptimisticLockException 与 Ebean 和 Play Framework 2

> ID：12617676
> 
> 赞同：7
> 
> 时间：2012-09-27T08:59:44.143
> 
> 标签：playframework-2.0, ebean

我正在将 Ebean 与 Play Framework 2 一起使用，有时它会遇到此类 OptimisticLockException：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[OptimisticLockException: Data has changed. updated [0] rows sql[update manager set modification_time=?, session_id=?, expiration_date=? where id=? and rating=? and creation_time=? and modification_time=? and name=? and surname=? and login=? and password_hash=? and email=? and session_id=? and expiration_date=?] bind[null]]] 
```

当很少有参与者开始访问数据库时，就会发生这种情况。

因此，Manager 类是：

```
public class Manager extends Model {
@Getter @Setter
Long id;

@Getter @Setter
private String name;

@Getter @Setter
private String surname;

@Column(unique = true)
@Getter @Setter
private String login;

@Getter @Setter
private String passwordHash;

@Getter @Setter
private String email;

@Embedded
@Getter @Setter
private ManagerSession session;

@Getter
private Timestamp creationTime;

@Getter
private Timestamp modificationTime;

@Override
public void save() {
    this.creationTime       = new Timestamp(System.currentTimeMillis());
    this.modificationTime   = new Timestamp(System.currentTimeMillis());
    super.save();
}

@Override
public void update() {
    this.modificationTime   = new Timestamp(System.currentTimeMillis());
    super.update();
}

} 
```

使用 save() 和 update() 钩子代替 @PrePersist 注释，因为 Ebean 不支持它。据我所知，@Version 注解总是会带来乐观锁模式，所以我开始使用这种技巧。我知道什么是 Optimistick 锁，但是这种情况应该如何解决，当许多参与者应该修改相同的数据库记录时，最后一次修改在哪里获胜？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-28T13:50:09.943

[解决方案：](https://play.lighthouseapp.com/projects/82401/tickets/207-ebean-saving-detached-entity-directly-from-form-causes-problems)

问题：直接从 Play Form 保存分离的 EBean 模型会导致 OptimisticLockException，或者在使用 @Version 时会导致 NullpointerException。

```
Form<Venue> form = form(Venue.class).bindFromRequest();
form.get().update(id); // this causes the exception 
```

解决方案：表单应该支持在从请求参数绑定之前从数据库中提供一个对象。然后在请求中找到的参数应该覆盖对象上的相关属性。也许在 bindFromRequest() 之前调用 fill()：

```
Form<Venue> form = form(Venue.class).fill(Venue.find.byId(id)).bindFromRequest();
form.get().update(id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T12:48:06.883

我解决了这个 OptmistLockException 问题，只是在尝试更新时将实体 ID 传递给控制器​​。为了防止用户更改值，该值作为隐藏字段传递。

```
 <input type="hidden" name="id" value="@formVar(<identifierVariable>).value"/> 
```

在控制器端，我检查收到的表单是否有错误。在否定的情况下，我更新表单中的附加实体。

```
 public static Result update() {
     Form<Entity> filledForm = form.bindFromRequest();
     if ( filledForm.hasErrors() ) {
        flashError("app.oh_snap", "app.change_things");
     } else {
        Entity entity = filledForm.get();
        entity.update();
     }
 } 
```

# symfony - Symfony2 FosUserBundle 和 SonataUserBundle：覆盖实体？

> ID：12617682
> 
> 赞同：3
> 
> 时间：2012-09-27T08:59:59.153
> 
> 标签：symfony, doctrine-orm, fosuserbundle, symfony-2.1

我在 Symfony2 项目中使用 FosUserBundle 和 SonataUserBundle。

我现在很困惑。我想为实体用户添加字段，但它不起作用。例如，架构没有更新。

这是我的配置：

```
AppKernel:
...
new FOS\UserBundle\FOSUserBundle(),
new Sonata\UserBundle\SonataUserBundle(),
new Application\Sonata\UserBundle\ApplicationSonataUserBundle('FOSUserBundle')

config.yml:
...
# FOSUserBundle Configuration
fos_user:
    db_driver:     orm                        # BDD type
    firewall_name: main                       # firewall name
    user_class:    Application\Sonata\UserBundle\Entity\User # entity class defined 
```

以及添加字段的用户实体，在 app/Application/Sonata/userBundle/Entity/

```
namespace Application\Sonata\UserBundle\Entity;

use Sonata\UserBundle\Entity\BaseUser as BaseUser;

/**
 * This file has been generated by the Sonata EasyExtends bundle ( http://sonata-    project.org/easy-extends )
 *
 * References :
 *   working with object : http://www.doctrine-project.org/projects/orm/2.0        /docs/reference/working-with-objects/en
 *
 * @author <yourname> <youremail>
 */
class User extends BaseUser
{

    /**
     * @var integer $id
     */
    protected $id;

    /**
     * @var string
     */
    protected $institution;

    /**
     * @var string
     */
    protected $department;

    /**
     * @var string
     */
    protected $city;

    /**
     * @var string
     */
    protected $country;

    /**
     * Get id
     *
     * @return integer $id
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * @return string
     */
    public function getInstitution()
    {
        return $this->institution;
    }

    /**
     * @return string
     */
    public function getDepartment()
    {
        return $this->department;
    }

    /**
     * @return string
     */
    public function getCity()
    {
        return $this->city;
    }

    /**
     * @return string
     */
    public function getCountry()
    {
        return $this->country;
    }
} 
```

在我的数据库中，表 fos_user_user 似乎是包含用户保存数据的表。

调用“php app/console dictionary:schema:update --force”时不会创建添加的字段（国家、城市...）。如何向用户实体添加字段？我迷失在 fosuserbundle 和 sonatauserbundle....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T15:20:34.757

事实上，我使用 fos 和 sonata 用户包的方式似乎迫使我使用 XML 定义。因此，例如添加一个名为“city”的字段，您必须添加以下行：

User.php（在 /app/Application/Sonata/UserBundle/Entity/）：

```
protected $city; 
```

User.orm.xml（在 /app/Application/Sonata/UserBundle/Ressource/config/doctrine/ 中）：

```
<field name="city" column="city" type="text"/> 
```

也许把它放在捆绑包的文档中对新手来说会很有趣；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-28T08:53:03.053

如果您想使用注释，我找到了更好的解决方案。

删除`UserBundle/Resorces/config/doctrine`文件夹，您可以在`UserBundle/Entity`文件夹中使用注释

# c# - 当前上下文中不存在名称“InvokeRequired”

> ID：12617685
> 
> 赞同：0
> 
> 时间：2012-09-27T09:00:10.707
> 
> 标签：c#

我在我的大多数表单中都使用了一个方法，我想在一个类中创建这个方法，然后调用它。

这是方法：

```
 using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using DevExpress.XtraEditors;
using System.Data.SqlClient;
using System.IO;

namespace GestionBib
{
    class MyClass
    {
    public void InfoLabel(string value)
        {
            if (InvokeRequired)
            {
                this.Invoke(new Action<string>(InfoLabel), new object[] { value });
                return;
            }
            barStaticItem3.Caption = value;

            if (!String.IsNullOrEmpty(value))
            {
                System.Timers.Timer timer = new System.Timers.Timer(6000) { Enabled = true };
                timer.Elapsed += (sender, args) =>
                {
                    this.InfoLabel(string.Empty);
                    timer.Dispose();
                };
            }

        }
}

} 
```

问题是当我在一个类中创建这个方法时，它给了我这些错误：

***错误一：***

> 当前上下文中不存在名称“InvokeRequired”

***错误2：***

> “GestionBib.MyClass”不包含“Invoke”的定义，并且找不到接受“GestionBib.MyClass”类型的第一个参数的扩展方法“Invoke”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:14:00.570

简单地说，你的类既没有声明`Invoke`方法，也没有声明`InvokeRequired`. 您需要以某种方式实现它们或派生派生表单的类表单类型`Control`（`Form`例如）。

# qt - 拖出应用程序时如何覆盖光标？

> ID：12617686
> 
> 赞同：3
> 
> 时间：2012-09-27T09:00:10.370
> 
> 标签：qt, drag-and-drop, cursor

当我在主窗口外拖放时，是否可以覆盖标准的“停止”（交叉圆圈）光标？我有非常简单的代码，这对我来说已经足够了。我将 PushButton 拖到主窗口外，并在释放鼠标按钮时得到释放鼠标的窗口。就像一个标准的 Windows Spy。那么如何在主窗口之外覆盖光标呢？

标题

```
class DDButton : public QPushButton
{
    Q_OBJECT
public:
    explicit DDButton(QWidget *parent = 0);

signals:

public slots:

private:
    void mousePressEvent(QMouseEvent *event);
}; 
```

cpp

```
void DDButton::mousePressEvent(QMouseEvent *event)
{
     if (event->button() == Qt::LeftButton) {

         QDrag *drag = new QDrag(this);
         QMimeData *mimeData = new QMimeData;

         drag->setMimeData(mimeData);
         drag->setPixmap(cursor.pixmap());
         drag->setHotSpot(QPoint(0,0));

         //This block not working
         QCursor cursor(Qt::OpenHandCursor);
         drag->setDragCursor(cursor.pixmap(), Qt::IgnoreAction);

         Qt::DropAction dropAction = drag->exec();

         //Do something
         qDebug()<<"Press";
     }
} 
```

# c++ - 新线程只制作第一条指令并且从不恢复

> ID：12617689
> 
> 赞同：1
> 
> 时间：2012-09-27T09:00:15.537
> 
> 标签：c++, windows, multithreading

这是我的问题：

我正在创建线程

```
HANDLE Threads[THREAD_NUM] 
```

启动线程

```
void LaunchThread (int i) {
  *some checks if the handle is not null etc*;
  DWORD threadId;
  threads[i] = CreateThread ( 
    NULL,
    0,
    (LPTHREAD_START_ROUTINE)*StaticMethodInvokingTheThreadFunc, 
    *StructPassingToThatMethod ( basically have a pointer and thread number)*,
    0,
    &threadId);
  *DebugMessage "thread created"*;
  *DebugMessage "with id = (threadId)"*;
} 
```

静态方法调用函数

```
void DoSmth () {
  *DebugMessage "thread func started"*;
  ...;
  *then code with another messages all the way*;
} 
```

等待功能简单

```
void WaitThread (i){
  *DebugMessage "wait for thread to finish"*;
  WaitForSingleObject (Threads[i], INFINITE);
} 
```

在主要功能中，序列：

```
LaunchThread (i);
WaitThread (i); 
```

程序永远不会返回`WaitThread ()`函数，并且（！）消息列表看起来像

```
"thread created"
"thread func started" (and nothing done after that message in DoSmth () func)
"with id = .."
"wait for thread to finish" 
```

即使有 1 个线程也会发生这种情况......对于几个线程我只是有

```
 for ( int t = 0; t < THREAD_NUM; t++)
   LaunchThread (t); 
```

和等待线程的相同循环

为什么会这样？我尝试`ResumeThread ()`关闭线程句柄并重新启动它，但没有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:16:20.973

可能是函数 StaticMethodInvokingTheThreadFunc 并没有真正的 LPTHREAD_START_ROUTINE 签名，但这被函数指针强制转换为它的事实所掩盖。移除石膏。如果编译器开始抱怨然后调整你的函数的签名。

在您的情况下，调用 CreateThread 可能是错误的。在 99% 的情况下都是错误的，你应该真正调用 CRT 库函数`_beginthreadex`。这个函数在内部调用 CreateThread，但它也做了一些初始化工作。将 CreateThread 替换为 _beginthreadex。

在打印文本“thread func started”之后，执行可能会在 StaticMethodInvokingTheThreadFunc 中挂起。修改函数中的代码，或者在函数的最后一行放置一个断点并调试项目以查看是否会命中断点。

# c#-4.0 - 实体框架插入具有相关对象的对象

> ID：12617690
> 
> 赞同：4
> 
> 时间：2012-09-27T09:00:16.423
> 
> 标签：c#-4.0, entity-framework-4

我是 Entity Framework 的新手，我需要将`Comment`具有相关 FK 对象的对象`User`插入到数据库中。

```
 public Class Comment
    {
        public int CommentID { get; set; }
        public string CommentContent { get; set; }
        public virtual User User { get; set; }
        public virtual DateTime CommentCreationTime { get; set; }
    }

public class User
{      

    public int UserID { get; set; }
    public string UserName { get; set; }
    public string UserPassword { get; set; }

    public string UserImageUrl{get; set;}
    public DateTime UserCreationDate { get; set; }

    public virtual List<Comment> Comments { get; set; }
}

  public void AddComment()
  {
        User user = new User() { UserID = 1 };            
        Comment comment = new Comment() { CommentContent = "This is a comment", CommentCreationTime = DateTime.Now, User = user };

        var ctx = new WallContext();
        comments = new CommentsRepository(ctx);

        comments.AddComment(comment);
        ctx.SaveChanges();
   } 
```

理想情况下，使用 T-SQL，如果我知道我的对象的主键`User`，我可以插入我的`Comment`对象并在插入语句中指定我的“用户”的 PK。

我试图对实体框架做同样的事情，但它似乎不起作用。必须首先`User`从数据库中获取对象才能插入新的“评论”，这将是矫枉过正。

请问，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T09:13:04.173

您需要将用户对象附加到上下文，以便上下文知道其现有实体

```
 public void AddComment()
  {
       var ctx = new WallContext();

        User user = new User() { UserID = 1 };  

        ctx.Users.Attach(user);

        Comment comment = new Comment() { CommentContent = "This is a comment", CommentCreationTime = DateTime.Now, User = user };

        comments = new CommentsRepository(ctx);

        comments.AddComment(comment);
        ctx.SaveChanges();
   } 
```

# asp.net - 恢复 ASP.Net 站点的有效方法

> ID：12617691
> 
> 赞同：0
> 
> 时间：2012-09-27T09:00:23.117
> 
> 标签：asp.net, database, backup, restore

谁能推荐一种恢复asp.net网站的有效方法，目前我采取的步骤是：

```
1) Unzip site backup
2) Edit web.config connection string to reflect my local SQLEXPRESS database
3) Restore Database in SQL studio 2008
4) Delete primary user in the database
5) Add the removed user in the Security tab and set him as the db owner 
```

如果有人对减少这些步骤或不同的系统有任何想法，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:05:24.933

*   如果您要恢复当前版本，请备份现有站点（以防发生更改）

*   创建所需的任何文件夹并分配权限

*   如果这是一台新机器，请创建用户/应用程序池

否则对我来说似乎合理？

# svn - svn checkout 与谷歌代码错误中的子目录？

> ID：12617698
> 
> 赞同：0
> 
> 时间：2012-09-27T09:01:06.200
> 
> 标签：svn, google-code

我正在尝试使用 svn 签出一些代码。

这是我正在使用的命令：

```
svn checkout http://xssm.googlecode.com/svn/trunk/commons-lib/WordNet/3.0/ xssm-read-only 
```

我可以访问子目录（/commons-lib/WordNet/3.0），如下所示：[http://code.google.com/p/xssm/source/browse/trunk/commons-lib/WordNet/? r=151#WordNet%2F3.0](http://code.google.com/p/xssm/source/browse/trunk/commons-lib/WordNet/?r=151#WordNet%2F3.0)

为什么我可以访问该子目录结构，但在我尝试结帐时它不可用？

这是我得到的错误： svn: URL 'http://xssm.googlecode.com/svn/trunk/commons-lib/WordNet/3.0' 不存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:28:46.010

> 我可以访问子目录（/commons-lib/WordNet/3.0），如此处所示

这是旧的历史修订的 URL，而不是 HEAD。**而且这个网址现在**不存在

 **> svn ls [http://xssm.googlecode.com/svn/trunk/commons-lib/WordNet](http://xssm.googlecode.com/svn/trunk/commons-lib/WordNet)
> 
> 2.0/

与此 URL 比较并输出

> svn ls [http://xssm.googlecode.com/svn/trunk/commons-lib/WordNet@151](http://xssm.googlecode.com/svn/trunk/commons-lib/WordNet@151)
> 
> 3.0/

为了签出这个旧版本，您必须将[PEG-revision](http://svnbook.red-bean.com/en/1.7/svn.advanced.pegrevs.html)添加到 URL

`svn checkout http://xssm.googlecode.com/svn/trunk/commons-lib/WordNet/3.0@151 xssm-read-only`**

# c - Dealing with serial port at 100 baud rate

> ID：12617702
> 
> 赞同：3
> 
> 时间：2012-09-27T09:01:10.677
> 
> 标签：c, linux, serial-port, baud-rate

I am looking to know if it is possible to read from a serial port at 100 baud rate. As per `termio.h` there is no provision to set 100 as baud rate. I am working in Linux. The communicating device on the other end is sending data at 100 baud rate and it is fixed. I would like to know if my baud rate is set to 110, would it guarantee that the data I am receiving is correct? or is there any solution for this?

Kindly guide.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T09:07:32.110

You're actually in luck. 100 baud is low enough that you can compute a divisor that will do it (1,152) with typical 16450-compatible serial ports (which is pretty much what everything is) and linux [supports custom divisors](https://stackoverflow.com/questions/3192478/specifying-non-standard-baud-rate-for-ftdi-virtual-serial-port-under-linux) with the `spd_cust` parameter to `setserial`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:00:39.633

Hmmm.... 110 bps is unique among serial port speeds in that it conventionally has two stop bits (all other speeds use one stop bit), so that sending one character requires 10 bits for 7-bit data, or 11 bits for 8-bit data.

If the communication protocol was communicated as *ten characters per second* and someone ignorant of 1950s protocols might convert cps to baud by assuming only one stop bit and 8-bit data, they would conclude that 100 baud is the result.

If the custom setting for a true 100 baud doesn't work, try setting standard 110 baud.

Excerpted from a [related answer](https://stackoverflow.com/a/6947758/198536):

```
#include <errno.h>
#include <termios.h>
#include <unistd.h>

int
set_interface_attribs (int fd, int speed, int parity)
{
        struct termios tty;
        memset (&tty, 0, sizeof tty);
        if (tcgetattr (fd, &tty) != 0)
        {
                error_message ("error %d from tcgetattr", errno);
                return -1;
        }

        cfsetospeed (&tty, speed);
        cfsetispeed (&tty, speed);

        tty.c_cflag = (tty.c_cflag & ~CSIZE) | CS8;     // 8-bit chars
        if (speed == B110)
            tty.c_cflag |= CSTOPB;      // 2 stop bits for 110

        // disable IGNBRK for mismatched speed tests; otherwise receive break
        // as \000 chars
        tty.c_iflag &= ~IGNBRK;         // ignore break signal
        tty.c_lflag = 0;                // no signaling chars, no echo,
                                        // no canonical processing
        tty.c_oflag = 0;                // no remapping, no delays
        tty.c_cc[VMIN]  = 0;            // read doesn't block
        tty.c_cc[VTIME] = 5;            // 0.5 seconds read timeout

        tty.c_iflag &= ~(IXON | IXOFF | IXANY); // shut off xon/xoff ctrl

        tty.c_cflag |= (CLOCAL | CREAD);// ignore modem controls,
                                        // enable reading
        tty.c_cflag &= ~(PARENB | PARODD);      // shut off parity
        tty.c_cflag |= parity;
        tty.c_cflag &= ~CSTOPB;
        tty.c_cflag &= ~CRTSCTS;

        if (tcsetattr (fd, TCSANOW, &tty) != 0)
        {
                error_message ("error %d from tcsetattr", errno);
                return -1;
        }
        return 0;
}

void
set_blocking (int fd, int should_block)
{
        struct termios tty;
        memset (&tty, 0, sizeof tty);
        if (tcgetattr (fd, &tty) != 0)
        {
                error_message ("error %d from tggetattr", errno);
                return;
        }

        tty.c_cc[VMIN]  = should_block ? 1 : 0;
        tty.c_cc[VTIME] = 5;            // 0.5 seconds read timeout

        if (tcsetattr (fd, TCSANOW, &tty) != 0)
                error_message ("error %d setting term attributes", errno);
}

...
char *portname = "/dev/ttyUSB1"
 ...
int fd = open (portname, O_RDWR | O_NOCTTY | O_SYNC);
if (fd < 0)
{
        error_message ("error %d opening %s: %s", errno, portname, strerror (errno));
        return;
}

set_interface_attribs (fd, B110, 0);  // set speed to 115,200 bps, 8n2 (no parity) 
```

# jquery - 自定义jquery ui进度条

> ID：12617705
> 
> 赞同：0
> 
> 时间：2012-09-27T09:01:13.500
> 
> 标签：jquery, css, jquery-ui

我想在 jquery 进度下添加一些值，例如![在此处输入图像描述](../Images/14746e21d09abaf254c2648d69ee0ba4.png)

我当前的代码是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js">   </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<style type="text/css">
    .ui-progressbar { height:2em; text-align: left; overflow: hidden; }
    .ui-progressbar .ui-progressbar-value {margin: -1px; height:100%; }

    .ui-widget { font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif; font-size: 1.1em; }
    .ui-widget .ui-widget { font-size: 1em; }
    .ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button { font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif; font-size: 1em; }
    .ui-widget-content { border: 1px solid #dddddd; background: #EDEFF1 50% top repeat-x; color: #333333; }
    .ui-widget-content a { color: #333333; }
    .ui-widget-header { border: 1px solid #e78f08; background: #AB3B3B 50% 50% repeat-x; color: #ffffff; font-weight: bold; }
    .ui-widget-header a { color: #ffffff; }

    .ui-corner-all, .ui-corner-top, .ui-corner-left, .ui-corner-tl { -moz-border-radius-topleft: 4px; -webkit-border-top-left-radius: 4px; -khtml-border-top-left-radius: 4px; border-top-left-radius: 4px; }
    .ui-corner-all, .ui-corner-top, .ui-corner-right, .ui-corner-tr { -moz-border-radius-topright: 4px; -webkit-border-top-right-radius: 4px; -khtml-border-top-right-radius: 4px; border-top-right-radius: 4px; }
    .ui-corner-all, .ui-corner-bottom, .ui-corner-left, .ui-corner-bl { -moz-border-radius-bottomleft: 4px; -webkit-border-bottom-left-radius: 4px; -khtml-border-bottom-left-radius: 4px; border-bottom-left-radius: 4px; }
    .ui-corner-all, .ui-corner-bottom, .ui-corner-right, .ui-corner-br { -moz-border-radius-bottomright: 4px; -webkit-border-bottom-right-radius: 4px; -khtml-border-bottom-right-radius: 4px; border-bottom-right-radius: 4px; }

    #progressbar { float: right; margin-right: 100px; width: 120px; margin-top: -30px }
    #progress { position: relative}
</style></head>
<body>
<script type="text/javascript">
$().ready(function() {
    $("#progressbar").progressbar({ value: 29 });

});
</script>

<div id="progressbar"></div>

</body></html> 
```

我没有找到如何得到这个结果......另一种可能性是在进度条的右侧添加一些文本（我尝试使用 a 但它在后面的行中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:36:03.870

你可以试试这个

```
$( "#progressbar" ).progressbar({
    value: 37,
    create: function(event, ui){
        var spanl=$("<span id='left'>0%</span>").css('float','left');
        var spanr=$("<span id='right'>100%</span>").css('float','right');    
        var div=$("<div id='percent'></div>").css('width', $(this).width())
        .append(spanl).append(spanr);  
        div.insertAfter($(this));
    }
}); 
```

[**演示**](http://jsbin.com/ajisoz/1/edit)。

**更新：** [JSFIDDLE 上的演示](http://jsfiddle.net/9ACTm/)。

# jquery - 如何在 div 容器中使用 jquery mobile 并防止此 div 之外的样式效果？

> ID：12617708
> 
> 赞同：2
> 
> 时间：2012-09-27T09:01:17.407
> 
> 标签：jquery, jquery-ui, css, jquery-mobile

目前我有 data-role='page' 的 div 容器和 data-role='fieldcontain' 的几个内部 div。在 (div data-role='page' ) 下，我几乎没有受 jquery mobile 样式影响的按钮和元素。如何防止这种行为？

```
<div>
    <div data-role='page' >
        <div data-role='fieldcontain'>....</div>
    </div>

    <div><button id="btn1"></button>....</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:08:27.260

尝试`data-role="none"`在本机表单中使用 like 来防止按钮样式：

```
<button id="btn1" data-role="none">Button element</button> 
```

或者您必须定义自己的主题（没有结构 CSS），例如：

```
<button id="btn1" data-theme="e"></button> 
```

否则我认为这是不可能的，因为 jQuery 旨在“更新”整个页面。

**另请参阅：http:**
[//jquerymobile.com/demos/1.1.1/docs/forms/forms-all-native.html](http://jquerymobile.com/demos/1.1.1/docs/forms/forms-all-native.html)

**示例：http:**
[//jsfiddle.net/X83rh/](http://jsfiddle.net/X83rh/)

# regex - 使用 Sublime 的正则表达式

> ID：12617719
> 
> 赞同：4
> 
> 时间：2012-09-27T09:01:43.077
> 
> 标签：regex, sublimetext2

使用我选择的文本编辑器 Sublime 2，我想搜索具有未注释警报的代码。所以我需要一个正则表达式来找到“alert”但不是“//alert”或“// alert”。我不知道如何反转然后结合两个结果。Sublime Text 对正则表达式使用 Boost 语法。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T09:34:00.107

您可以搜索前面没有的文本`//`，因此

```
(?<!\/\/\s?)alert 
```

编辑：如果编辑器不支持变量后视，您必须在不同的后视中指定所有可能性

```
(?<!\/\/\s)(?<!\/\/)alert 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T09:38:07.767

试试这个：

```
(?<!//)(?<!// )alert 
```

Boost 语法基于 Pearl RegExp。`(?<!text)`因此，应该支持消极的后视。在这个例子中，我使用了两次否定的lookbehind（有和没有空格），因为lookbehind 文本必须是固定长度的。

您可以在此处阅读有关 RegExp 中的lookaraound 功能的更多信息：
[http ://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

# android - Andengine 在游戏暂停时从 RenderTexture 获取像素

> ID：12617721
> 
> 赞同：1
> 
> 时间：2012-09-27T09:01:45.130
> 
> 标签：android, andengine, fbo

在这种情况下，我需要保存 a 中的像素`RenderTexture`并将它们存储到 a `Bitmap`当游戏活动暂停（按下主页按钮），并使用保存的位图恢复渲染纹理。

目前我正在做以下事情：

在调用渲染纹理的引擎中`onPause`注册 a ，然后调用 R方法，强制重绘然后休眠 1 秒，确保绘制会发生，最后调用.`Draw Handler``getBtimap()``enderSurfaceView.reqestRender()``Thread``super.onPause()`

我认为这不是一个好方法:)。

问题是`RenderTexture.getBitmap()`必须在渲染线程中调用`glReadPixels()`，因为调用需要正确执行 GL 上下文。

那么在 GL 上下文被破坏之前有没有得到通知？

或者有关如何以不同方式完成此操作的任何建议？

# r - 转换将数据框转换为 r 中的列表（重塑包） - 想保留为数据框

> ID：12617722
> 
> 赞同：1
> 
> 时间：2012-09-27T09:01:46.823
> 
> 标签：r, list, casting, reshape

我一定遗漏了一些微不足道的东西，但我不明白为什么下面的演员将我的数据框转换为列表。如果可能的话，我希望输出是一个数据框。

它开始于

```
 str(d)
     'data.frame':   12 obs. of  4 variables:
     $ credit_id: num  12 12 12 12 18 ...
     $ Date     : Date, format: "2003-06-30" "2003-09-30" "2003-12-31" ...
     $ value    : num  840 854 847 834 4831 ...
     $ varb     : chr  "sales" "sales" "sales" "sales" ... 
```

然后我尝试投射它

```
d<-cast(d,Date+credit_id~varb) 
```

我得到

> 字符串（d）

```
 List of 4
     $ Date     : Date[1:9], format: "2003-06-30" "2003-06-30" "2003-09-30" ...
     $ credit_id: num [1:9] 12 18 12 18 12 ...
     $ ebitda   : num [1:9] NA NA NA NA NA ...
     $ sales    : num [1:9] 840 4831 854 4670 847 ...
     - attr(*, "row.names")= int [1:9] 1 2 3 4 5 6 7 8 9
     - attr(*, "idvars")= chr [1:2] "Date" "credit_id"
     - attr(*, "rdimnames")=List of 2
      ..$ :'data.frame':    9 obs. of  2 variables:
      .. ..$ Date     : Date[1:9], format: "2003-06-30" "2003-06-30" "2003-09-30" ...
      .. ..$ credit_id: num [1:9] 12 18 12 18 12 ...
      ..$ :'data.frame':    2 obs. of  1 variable:
      .. ..$ varb: chr [1:2] "ebitda" "sales" 
```

完整代码如下。提前致谢。

```
 d<-structure(list(credit_id = c(12, 12, 12, 12, 18, 18, 2073, 2073,
    2103, 2103, 1776, 1776), Date = structure(c(12233, 12325, 12417,
    12508, 12233, 12325, 15552, 15552, 15552, 15552, 15552, 15552
    ), class = "Date"), value = c(839.8, 853.9, 846.9, 833.7, 4831.2,
    4670, 54.1, 995, 90.944, 1092.8, 81.2, 1348.2), varb = c("sales",
    "sales", "sales", "sales", "sales", "sales", "ebitda", "sales",
    "ebitda", "sales", "ebitda", "sales")), .Names = c("credit_id",
    "Date", "value", "varb"), row.names = c(606799L, 606800L, 606801L,
    606802L, 606805L, 606806L, 1131814L, 1131822L, 1131950L, 1131958L,
    1132034L, 1132042L), class = "data.frame")
    head(d)
    str(d)
    d<-cast(d,Date+credit_id~varb)
    head(d)
    str(d) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:24:54.250

`dcast`从 reshape2 包中使用。从`?dcast`你可以意识到这`dcast`给了你一个`dataframe`作为输出。

```
set.seed(001) # Generating some data.
credit_id <- sample(c(12,14,13,11), 10, TRUE)
Date  <- seq(Sys.Date(), length.out=10, by="1 day")
value <- rnorm(10,1000,50)
varb <- sample(c("ebitda", "sales"), 10, TRUE)

d <- data.frame(credit_id, Date, value, varb) # this is something like your df
str(d)

'data.frame':   10 obs. of  4 variables:
 $ credit_id: num  14 14 13 11 12 11 11 13 13 12
 $ Date     : Date, format: "2012-09-27" "2012-09-28" ...
 $ value    : num  959 1024 1037 1029 985 ...
 $ varb     : Factor w/ 2 levels "ebitda","sales": 1 2 1 1 2 2 2 1 2 1

d2 <- dcast(d,Date+credit_id~varb)
str(d2)

'data.frame':   10 obs. of  4 variables:
 $ Date     : Date, format: "2012-09-27" "2012-09-28" ...
 $ credit_id: num  14 14 13 11 12 11 11 13 13 12
 $ ebitda   : num  959 NA 1037 1029 NA ...
 $ sales    : num  NA 1024 NA NA 985 ... 
```

`d`看起来`d2`像：

```
d
   credit_id       Date     value   varb
1         14 2012-09-27  958.9766 ebitda
2         14 2012-09-28 1024.3715  sales
3         13 2012-09-29 1036.9162 ebitda
4         11 2012-09-30 1028.7891 ebitda
5         12 2012-10-01  984.7306  sales
6         11 2012-10-02 1075.5891  sales
7         11 2012-10-03 1019.4922  sales
8         13 2012-10-04  968.9380 ebitda
9         13 2012-10-05  889.2650  sales
10        12 2012-10-06 1056.2465 ebitda

d2
         Date credit_id    ebitda     sales
1  2012-09-27        14  958.9766        NA
2  2012-09-28        14        NA 1024.3715
3  2012-09-29        13 1036.9162        NA
4  2012-09-30        11 1028.7891        NA
5  2012-10-01        12        NA  984.7306
6  2012-10-02        11        NA 1075.5891
7  2012-10-03        11        NA 1019.4922
8  2012-10-04        13  968.9380        NA
9  2012-10-05        13        NA  889.2650
10 2012-10-06        12 1056.2465        NA 
```

下次确保通过使用提供一些数据`dput(dataframe)`以使您的问题可重现。

# google-maps - Sencha Touch 2 + Maps Api - fitbounds() 不起作用

> ID：12617723
> 
> 赞同：1
> 
> 时间：2012-09-27T09:01:47.680
> 
> 标签：google-maps, sencha-touch-2, google-maps-markers

我试图将我的谷歌地图的中心设置为我使用谷歌地图 Api V3 定义的 2 个标记。但它只居中第一个标记，即位置标记。我有这个呈现地图的代码：

```
 openShops : function(data) {
    if (Ext.ComponentManager.get('shops-details') == undefined) {
        Ext.create('Oxfam.view.ShopsDetails');
    }

    var shopsDetailsPage = Ext.ComponentManager.get('shops-details');

    Ext.Viewport.setActiveItem(shopsDetailsPage);

    var bounds;

    var map = Ext.create('Ext.Map', {
        id : 'shopMap',
        xtype : 'map',
        useCurrentLocation : {
            autoUpdate : false
        },
        listeners : {
            maprender : function(comp, map) {
                var image = 'img/oxfamLogoSmall.png';
                var locationMarker = new google.maps.Marker({
                    position : new google.maps.LatLng(this._geo
                            .getLatitude(), this._geo.getLongitude()),
                    map : map
                });

                var shopCoord = new google.maps.LatLng(sessionStorage
                        .getItem('longitude'), sessionStorage
                        .getItem('latitude'));

                var locCoord = new google.maps.LatLng(this._geo
                        .getLatitude(), this._geo.getLongitude());

                bounds = new google.maps.LatLngBounds();

                var shopMarker = new google.maps.Marker({
                    position : new google.maps.LatLng(sessionStorage
                            .getItem('longitude'), sessionStorage
                            .getItem('latitude')),
                    map : map,
                    icon : image
                });

                bounds.extend(shopCoord);
                bounds.extend(locCoord);
                console.log(shopCoord);

                map.fitBounds(bounds);

            },

        }

    });

    shopsDetailsPage.setItems(map);

} 
```

日志记录正确的坐标。地图显示： [点击这里查看地图](http://s14.directupload.net/images/120927/muypi2ql.png)

但我的愿望是这样的： [点击这里查看我的愿望](http://s1.directupload.net/images/120927/plfkltsp.png)

我不知道该怎么做，我的意思是我从几个小时开始就在寻找解决方案，但是网络中的每个解决方案都不适用于我的应用程序..

有人知道我做错了什么吗？我希望我发布您需要的所有信息来帮助我的薄弱开发经验；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:33:39.763

在我看来，您的纬度和经度方向错误：

```
var shopCoord = new google.maps.LatLng(sessionStorage
                        .getItem('longitude'), sessionStorage
                        .getItem('latitude')); 
```

再次在这里：

```
var shopMarker = new google.maps.Marker({
                    position : new google.maps.LatLng(sessionStorage
                            .getItem('longitude'), sessionStorage
                            .getItem('latitude')),
                    map : map,
                    icon : image
                }); 
```

如果是这种情况（并且您不仅错误地标记了“sessionStorage”对象中的变量），那么这将影响边界，这可能是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:34:14.453

得到了答案。谢谢大家。

问题是，

```
useCurrentLocation : {
        autoUpdate : false
    }, 
```

自动将 locationMarker 居中。

我通过使用没有 sencha touch 实现的定位方法的 html5 地理位置解决了 ist。

感谢您的帮助！

# ruby-on-rails - 在 rails 3.0 中使用 form_tag 时出现路由错误

> ID：12617739
> 
> 赞同：1
> 
> 时间：2012-09-27T09:02:39.980
> 
> 标签：ruby-on-rails, ruby, routes

我是新来的轨道。今天遇到一个问题，不知道怎么解决。基本上我试图在一个网页上放置一个输入区域和一个提交按钮，输入值存储在 params[:name] 中，传递给问题控制器中定义的 export_issues 方法。这是视图文件的样子

```
 <%= form_tag(:controller => 'issues', :action => 'export_issues') do%>
    <p>
    <%= label_tag :name, "name:" %>
    <%= text_field_tag :name, params[:name]%>
    </p>
    <%= submit_tag "Submit"  %> 
```

当我单击“提交”时，出现“路由错误”。但是，如果我只是按 F5 刷新错误页面或输入 127.0.0.1/issues/export_issues 它将按我的意愿工作

这是与 routes.rb 中的问题控制器相关的代码

```
resources :issues, :only => [:index, :destroy] do
  member do
    post 'create_comment'
    get 'mark_readed'
end
collection do
  get 'export_issues'
  delete 'destroy_comment'
end
end 
```

基本上 export_issues 所做的是读取数据库并将数据导出到 CSV 文件。如果没有 form_tag 代码参与，它工作得很好。

那么问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:12:18.560

原因很简单。默认情况下`form_tag`使用`method=post`. 像：

```
form_tag('/myposts') 
```

将创建表单标签如下：

```
<form action="/myposts" method="post"> 
```

但是，我们的路由说，它只接受`get`. 因此，表单开始标记应为：

```
<%= form_tag(:controller => 'issues', :action => 'export_issues', :method => :get) do%> 
```

如需更多信息，请查阅[apidocs](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag)。

# java - 如何使用 RESTEasy 访问 HTTP 请求的正文

> ID：12617740
> 
> 赞同：8
> 
> 时间：2012-09-27T09:02:42.260
> 
> 标签：java, http, rest, resteasy

我正在寻找一种直接访问 HTTP 请求正文的方法。事实上，在我的代码中，我在正文中收到了不同的参数，我事先并不知道我会收到什么。此外，我希望尽可能灵活：我正在处理可能会有所不同的不同请求，并且我希望针对每种类型的请求（GET、POST、...）以单一方法处理它们。有没有办法使用 RESTEasy 来处理这种级别的灵活性？我应该切换到别的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T18:59:03.970

根据[此答案](https://stackoverflow.com/a/4119495)中给出的代码，您可以访问 HTTPServletRequest 对象。

拥有 HTTPServletRequest 对象后，您应该能够像往常一样访问请求正文。一个例子可以是：

```
String requestBody = "";
StringBuilder stringBuilder = new StringBuilder();
BufferedReader bufferedReader = null;
try {
    InputStream inputStream = request.getInputStream();
    if (inputStream != null) {
        bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
        char[] charBuffer = new char[128];
        int bytesRead = -1;
        while ((bytesRead = bufferedReader.read(charBuffer)) > 0) {
            stringBuilder.append(charBuffer, 0, bytesRead);
        }
    } else {
        stringBuilder.append("");
    }
} catch (IOException ex) {
    throw ex;
} finally {
    if (bufferedReader != null) {
        try {
            bufferedReader.close();
        } catch (IOException ex) {
            throw ex;
        }
    }
}
requestBody = stringBuilder.toString(); 
```

# mysql - 使用多个较小的 varchars 与一个大的

> ID：12617741
> 
> 赞同：1
> 
> 时间：2012-09-27T09:02:44.590
> 
> 标签：mysql, innodb, varchar

(mysql innodb)

假设我想在下面的步骤中列出食谱描述。我应该为每个步骤使用多个较小的 varchars 还是应该使用一个大的？您认为最灵活/最有效的是什么？请记住，我是数据库的新手。另外， varchar 是适合这项工作的工具吗？谢谢！

1.  将烤箱设置为 350 度
2.  加牛奶
3.  加入鸡蛋
4.  烤40分钟

此外，如果它对性能/存储很重要，存储的语言将是瑞典语（包括一些“奇怪”字符）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:06:29.130

我认为配方描述将是数据库中的一个字段.. 对吗？

如果您无法想象它会有多长，您应该保留文本，以便您也可以添加长文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:06:05.453

你宁愿使用`nvarchar`. `varchar`无论您的条目有多大，它都有一个固定的大小。和`nvarchar`入口一样大。

示例： `nvarchar(50)`条目 'aa' 占用 2 个字符 `varchar(50)`条目 'aa' 占用 50 个字符

# ios - 如何在itunesconnect中一次上传多张图片？

> ID：12617742
> 
> 赞同：4
> 
> 时间：2012-09-27T09:02:44.820
> 
> 标签：ios, app-store-connect

如何在itunesconnect中一次将多张图片上传到我的应用程序详细信息？我记得有时可以通过 Safari 将多张图片拖放到“选择图片”按钮上。现在（Mountain Lion，Safari 6.0.1）它不再是了。

关于如何解决这个问题的任何想法？一张一张上传15张照片（iPhone、iPhone5、iPad）真的很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:46:04.383

我不确定是否可以一次上传多张图片。但是，仍然可以拖放（对于单个文件） - 它只是在 Safari 中被破坏，它打开/显示拖动的文件。在 Firefox 和 Chrome 中，将图像文件（例如一些 .png）放在“选择文件”按钮上会导致上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:45:30.743

似乎苹果出于某种原因删除了此功能。最好在 iTunes Connect 上提出建议。只需登录并点击页脚中的“联系我们”即可。

（我无法提供链接，因为它会有所不同）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:39:55.253

你不能这样做，因为我已经尝试了最多 2 张图片

# sql-server - 检查约束 SQL 中的 IF

> ID：12617743
> 
> 赞同：1
> 
> 时间：2012-09-27T09:02:45.940
> 
> 标签：sql-server, check-constraints

我有这张桌子。。

```
CREATE TABLE [dbo].[Tipo_Servicios_Info](
[TSI_TS_Id] [int] NOT NULL,
[TS_Tar_Id] [int] NOT NULL,
[TS_PDI_Id] [int] NOT NULL,
[TSI_Descripcion] varchar(100),
[TSI_FechaIni] date not null,
[TSI_FechaFin] date not null,
[TSI_HoraMin] time,
[TSI_HoraMax] time,
[TSI_Duracion] varchar(50) not null,
[TSI_Unidad] varchar(50) not null,
[TSI_Cantidad] int not null,

CONSTRAINT [PK_TIPO_SERVICIOS_INFO] PRIMARY KEY CLUSTERED 
(
[TSI_TS_Id] ASC,
[TS_Tar_Id] ASC,
[TS_PDI_Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,
       ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

通过一些检查..

```
ALTER TABLE Dbo.Tipo_Servicios_Info
ADD CONSTRAINT Ck_Valores_Unidad CHECK(Tsi_Unidad IN('Dia', 'Hora'));
GO

ALTER TABLE Dbo.Tipo_Servicios_Info
ADD CONSTRAINT Df_Tipo_Servicios_Info_Tsi_Unidad DEFAULT 'Dia' FOR Tsi_Unidad;
GO 
```

在上面的这两个中，我将 TSI_Unidad 的默认值设置为“Dia”，但该字段只能包含 Dia 或 Hora 通过第二个约束。

但是我有一个问题，我必须定义可以为空的 TSI_HoraMin 和 TSI_HoraMax（如果 TSI_Unidad 是 Dia，它们必须可以为空），但是如果 TSI_Unidad 是 Hora，[TSI_HoraMin] 和 [TSI_HoraMax] 不能为空。

我想创建一个新的约束，但我不知道我该怎么做..

会是这个想法。。

```
ALTER TABLE [dbo].[Tipo_Servicios_Info]
ADD CONSTRAINT CK_HorasMin CHECK([TSI_HoraMin] is not null if [TSI_Unidad] = 'Hora')
GO 
```

但显然，这个约束没有很好地定义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T09:21:33.530

据我所知，如果 TSI_Unidad = 'Hora`，您试图不允许 TSI_HoraMin 出现空值。在这种情况下，您可以使用：

```
ALTER TABLE [dbo].[Tipo_Servicios_Info]
ADD CONSTRAINT CK_HorasMin 
CHECK(NOT([TSI_HoraMin] IS NULL AND [TSI_Unidad] = 'Hora')); 
```

# asp.net - Asp.Net Telerik RadDataPager 上一个按钮渲染 onclick 返回 false

> ID：12617744
> 
> 赞同：0
> 
> 时间：2012-09-27T09:02:47.097
> 
> 标签：asp.net, telerik, raddatapager

我正在尝试将 Asp.Net Telerik RadDataPager 与我自己的服务器端自定义分页一起使用（我有数百万行，因此需要自己管理）。Next 和 Last 按钮正在触发，我可以在网格中显示相关的数据页面，但 Previous 和 First 按钮没有触发。当我检查呈现的 HTML 时，它显示 onclick 返回 false。

```
<input id="WebUserControl11_RadDataPager1_ctl00_PrevButton" class="rdpPagePrev" type="submit" onclick="return false;" value=" " name="WebUserControl11$RadDataPager1$ctl00$PrevButton"> 
```

如果我使用 FireBug 删除 OnClick，则按钮会触发，我可以在服务器端处理它。

知道如何在没有 OnClick 的情况下让 RadDataPager 呈现吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:11:46.217

好吧，我猜对了。我的网格控件有一个内置的寻呼机，我不需要使用单独的 RadDataPager 控件。

# c - 选项后跟 getopt 中的选项 [之前的选项需要一个值]

> ID：12617749
> 
> 赞同：1
> 
> 时间：2012-09-27T09:03:28.643
> 
> 标签：c, getopt

我怀疑我们是否有两个选项 -a 和 -c 并且选项 -a 需要有一个值，而 -c 没有值

现在如果我给 ->testopt -a -c [testopt 是程序]

然后我的程序将 -c 作为 -a 的值。有没有一种方法可以确保具有值的选项没有其他选项作为其值？

问题是系统接受 - 一个关键字的值作为我需要阻止的另一个关键字。例如 - testopt -a -c。在这种情况下，-a 有一个强制参数（值），-c 没有值。但我的 getopt 将其解释为“-c”是“-a”的值，我如何使用得到选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:24:15.027

您将`-c`作为`-a`选项的值获得，因为您指定`-a`了一个值。如果你用相反的方式调用你的程序

```
$ testopt -c -a 
```

然后`getopt`将返回一个`'?'`指示缺少选项值（根据[`getopt`手册页](http://pubs.opengroup.org/onlinepubs/009695399/functions/getopt.html)），并且将在控制台上打印错误。

不幸的是，没有办法告诉`getopt`参数具有可选值，那么您必须实现自己的选项解析器。

# mysql - MySQL select in join 子句扫描太多行

> ID：12617750
> 
> 赞同：0
> 
> 时间：2012-09-27T09:03:29.717
> 
> 标签：mysql, performance, join

好吧，伙计们，以下问题整天困扰着我：

我使用下面的查询来选择产品和价格的概述，包括基于另一个表（结果）中的字段 StartTime 的最新结果价格。为此，我认为我需要在连接中进行子选择。

问题是 EXPLAIN 函数告诉我 MySQL 正在扫描所有结果行（225000 行）而不使用任何索引。

有什么方法可以加快速度吗？最好通过添加 WHERE 语句让 mysql 只查看具有相应 pID 的行。

```
select p.pID, brandname, description, p.EAN, RetailPrice, LowestPrice, min(price), min(price)/lowestprice-1 as afwijking
from tproducts p
    join ( 
    select Max(tresults.StartTime) AS maxstarttime, tresults.pID
    from tresults
    -- maybe adding a where clause here?
    group by tresults.pID
    ) p_max on (p_max.pID = p.pID)
join tresults res on (res.starttime = p_max.maxstarttime and p.pID = res.pID and res.websiteID = 1)
join tsupplierproducts sp on (sp.pID = p.pID AND supplierID = 1)
join tbrands b on (b.brandID = p.BrandID)
group by p.pID, brandname, description, p.EAN, RetailPrice, LowestPrice 
```

索引位于属于连接或 where 子句的所有列上。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:59:42.670

根据您的 SQL，我假设您仅列出基于 1 个供应商 (supplierID = 1) 的产品。

**最佳做法是在 sql 开头**执行您已知的过滤器以消除记录，然后使用内部连接连接其他没有过滤器的表。

```
select p.pID, brandname, description, p.EAN, RetailPrice, LowestPrice, min(price), min(price)/lowestprice-1 as afwijking
from 
(select p.pID, p.BrandID p.EAN, Max(t.StartTime) AS maxstarttime
FROM tproducts p INNER JOIN tresults t on supplierID=1 and p.pID=t.pID
group by tresults.pID
) p 
inner join tresults res on (res.websiteID = 1 and p.pID = res.pID and res.starttime = p_max.maxstarttime)
inner join tsupplierproducts sp on (sp.pID = p.pID)
inner join tbrands b on (b.brandID = p.BrandID)
group by p.pID, brandname, description, p.EAN, RetailPrice, LowestPrice 
```

从上面的代码中，我在加入结果之前从 tproducts 中消除了所有供应商ID！= 1。

让我知道上面的 sql 是否有帮助，以及 EXPLAIN 函数的结果是什么

:-)

# sql - 将 SSIS 变量传递给 Process 任务

> ID：12617753
> 
> 赞同：5
> 
> 时间：2012-09-27T09:03:41.637
> 
> 标签：sql, sql-server-2005, ssis

如何将 SSIS 中定义的变量作为参数传递给运行 bat 文件的 SSIS Process 任务。

在 bat 文件中，用户名和密码将替换为 %1 参数，并且输入将从脚本任务传递，该脚本任务将从 .NET 前端接收输入。

如果可能的话，请帮忙截图

![在此处输入图像描述](../Images/361cd6a67887b6122ebc258f8d09e313.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T06:28:06.510

在脚本任务中，将值写入 SSIS 变量。

在 Exec Process 任务中，修改 Arguments 表达式，将变量传递给任务

此线程上有一个屏幕截图[How to execute a Process Task 其中可执行路径来自用户变量](https://stackoverflow.com/questions/6818398/how-to-execute-a-process-task-where-the-executable-path-comes-from-a-user-variab)

# mongoose - mongoose.js 3：如何判断嵌套不是文档

> ID：12617754
> 
> 赞同：1
> 
> 时间：2012-09-27T09:03:41.230
> 
> 标签：mongoose

我的猫鼬模式：

```
mongoose.Schema({
        title: 'string',
        items: [{
            uid: 'string',
            type: {type: 'string'},
            title: 'string',
            items: [{uid: 'string', type: {type: 'string'}, text: 'string'}]
        }]
    }); 
```

如何告诉猫鼬项目（和项目的项目）不是文档，而只是嵌套对象？我既不需要`_id`属性也不需要任何文档的功能，但我想定义它们并使用模式进行限制。

够`_id: false`了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:23:34.543

没有自己架构的嵌入式文档数组（如上所示）将始终有一个`_id`字段。如果你想抑制`_id`他们必须有自己的模式，你需要在他们的模式定义上设置`{ _id: false }` [选项。](http://mongoosejs.com/docs/guide.html#_id)

```
mongoose.Schema({
    title: 'string',
    items: [mongoose.Schema({
        uid: 'string',
        type: {type: 'string'},
        title: 'string',
        items: [mongoose.Schema({
            uid: 'string', 
            type: {type: 'string'}, 
            text: 'string'
        }, {_id: false})]
    }, {_id: false})]
}); 
```

# postgresql - PDO 异常 Symfony 2

> ID：12617756
> 
> 赞同：0
> 
> 时间：2012-09-27T09:03:48.860
> 
> 标签：postgresql, symfony, pdo, doctrine-orm

试图运行`php app\console doctrine:schema:update --force`。我发现了这个错误：![在此处输入图像描述](../Images/b1c5c1e2b8142ad296af46287bdcfe11.png)

在 parameters.ini 我使用`database_driver = pdo_pgsql`

我的phpinfo呢？似乎一切都好！![在此处输入图像描述](../Images/7a0a42851cf701e51ee957da6aac3c1d.png)

你能给我建议该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:20:23.133

原因可能是 CLI 和 Apache 版本的 PHP 具有不同的配置，并且`pdo_pgsql`没有为 CLI 版本激活。

# asp.net - 如何根据 asp.net Gridview 中的 DateDiff 值显示字符串？

> ID：12617759
> 
> 赞同：0
> 
> 时间：2012-09-27T09:03:54.817
> 
> 标签：asp.net, sql, datetime, gridview, datediff

我有一个显示`DATEDIFF`任务完成日期和任务截止日期的查询。我想显示任务是否按时完成，并根据日期差异的值将结果显示为“按时完成”和“未按时完成”。

```
select memname, 
      CONVERT(nvarchar, DATEDIFF(d,CompleteDate,FreeTrialTaskMst.Enddate)) AS Difference
  from member 
```

如果按时完成，我会在这里得到`value >= 0`，如果没有按时完成，我会得到 <0。

现在得到这个值，我想将文本绑定到网格作为“及时完成”或“未及时完成”。

在网格视图中：

```
 <asp:TemplateField HeaderText=" DeadLine">
     <ItemTemplate>
     <asp:Label ID="lblDeadLine" runat="server" Text='<%# (Eval("DeadLine")) %>' ReadOnly="true"></asp:Label>
    </ItemTemplate>
   </asp:TemplateField> 
```

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:12:13.810

可能最简单和最易读的方法是使用`RowDataBound`：

```
protected void gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DataRow row = ((DataRowView)e.Row.DataItem).Row;
        Label lblDeadLine = (Label)e.Row.FindControl("lblDeadLine");
        int deadLine = int.Parse(row.Field<String>("DeadLine"));
        if(deadLine < 0)
            lblDeadLine.Text = "Not Completed in Time";
        else
            lblDeadLine.Text = "Completed in Time";
    }
} 
```

但我建议首先也按 sql 执行此操作（`SELECT CASE WHEN ...`）。

顺便说一句，你为什么将`int`值从`DATEDIFF`to 转换为`nvarchar`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:23:09.470

```
select memname, 
    (case when  DATEDIFF(d,CompleteDate,FreeTrialTaskMst.Enddate) >0 then 'completed'
else 'Not Complete' end) as  DeadLine
  from member 
```

# linux - 使用win 7本地凭据的linux smbclient

> ID：12617762
> 
> 赞同：0
> 
> 时间：2012-09-27T09:04:10.327
> 
> 标签：linux, smb

我有一台连接到域的 win 7 机器（比如 TEST）。有一个域管理员帐户和一个本地管理员帐户（均已启用）。

如果我使用域管理员的凭据运行 smbclient，那么它可以正常工作：

`smbclient -L //mytestmachine -U Administrator -W TEST`

我希望能够使用本地凭据登录：

`smbclient -L //mytestmachine -U Administrator -W WORKGROUP`

请注意，win 7 上的默认工作组名称是 WORKGROUP。这以前在 XP 上有效，但现在我只是不断收到 NT_STATUS_LOGON_FAILURE。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:53:25.310

尝试在以下位置启用 win 支持`/etc/samba/smb.conf`：

```
wins support = yes 
```

或者，您可以将 Samba 设置为使用现有的 wins 服务器`/etc/samba/smb.conf`：

```
wins server = <ip-address> 
```

重新启动选项一的 samba 守护程序，选项二不需要：

```
/etc/init.d/smbd restart 
```

在 Linux Mint 11 和 Samba Client 3.5.8 上工作。

# php - 在本地服务器上使用 apache bench

> ID：12617766
> 
> 赞同：2
> 
> 时间：2012-09-27T09:04:28.543
> 
> 标签：php, apache, webserver, web-testing, apachebench

我想通过 apache bench 测试我的网站负载（网站写在 php 上）。

我有本地服务器（xampp），OC：windows。

在 apache/bench 目录中有文件 ab.exe，这意味着 apachebench 安装在我的本地服务器中是吗？

我有本地站点 localhost/my_test，我想在这个站点上模拟并发 1000 请求，在 CMD 中我写了这个命令：

**ab -c 1000 本地主机/my_test**

CMD 的回答是： **'ab' 不是内部或外部命令、可运行程序或批处理文件。**

请告诉我，我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T14:31:16.173

AB 需要一个完整的 URL： 用法：ab [options] [http://]hostname[:port]/path

因此，在您的情况下，URL 应如下所示：localhost/my_test/

它需要路径 - 在这种情况下只是 /

希望这可以帮助

保罗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T11:37:34.093

> **ab -c 1000 本地主机/my_test**
> 
> CMD 的回答是：**'ab' 不是内部或外部命令、可运行程序或批处理文件。**

这意味着 ab.exe 不在您的 PATH 中。如果您启动 CMD，首先您应该将自己导航到 apache/bench 目录，然后从该文件夹运行命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-09T14:04:18.257

我认为您应该输入您的服务器一直在运行的端口；

例如，我使用`http://127.0.0.1:8080`（我在 XAMPP 配置中设置的端口是 8080）

# session - 为什么会话数据只能在 CakePHP 的控制器中使用？

> ID：12617767
> 
> 赞同：2
> 
> 时间：2012-09-27T09:04:29.350
> 
> 标签：session, cakephp, cakephp-2.0

所以，我喜欢 CakePHP 并经常使用它。当 2.0 出现时，我很高兴地看到 AuthComponent 作为静态类在整个应用程序中可用，这使很多事情变得更加容易 - 即您不再需要将用户数据作为参数传递给模型方法。

最近在一个项目中，我意识到需要从模型中访问 SessionComponent 的方法。具体来说，当用户登录时，会执行一些检查以查看用户是否拥有对该站点的有效订阅。这一切都在模型中完成。如果用户不再拥有有效的订阅，可能有几个原因。从模型中返回似乎最容易`false`，同时设置一个闪烁消息，说明过期订阅的原因。而不是像这样返回一个数组：

```
array('status' => 0, 'message' => 'You\'re not welcome here anymore') 
```

这需要在控制器中解释。

还有其他时候我想处理模型中的会话，但这是我想到的例子。

所以，我想知道，我想访问模型中的 SessionComponent 是否正确？当我有这个需要时，我应该直接使用 $_SESSION 吗？还是我做错了-有更好的编码方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:07:27.413

你可以随时使用

```
CakeSession::read() 
```

应用程序中的任何位置。在模型中也是如此。请参阅以前的帖子，例如[在 cakephp 2 中的行为中读取会话变量](https://stackoverflow.com/questions/8529199/reading-a-session-variable-inside-a-behavior-in-cakephp-2)

但请注意，如果可能，您应该尽量避免它。模型应该尽可能无状态 - 将它们与会话混合会使它变得越来越模糊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:15:47.073

根据 CakePHP[食谱](http://book.cakephp.org/2.0/en/development/sessions.html)：

> 在 CakePHP 中通常避免使用 $_SESSION，而是首选使用 Session 类。

有几种不同的配置可以存储会话数据，f.ex。在数据库中。因此，通过`CakeSession`更改会话配置不会影响您访问会话数据的每个地方。

我建议不要使用模型中的 SessionComponent。使用必要的数据更好地将参数传递给模型。看看[了解模型-视图-控制器](http://book.cakephp.org/2.0/en/cakephp-overview/understanding-model-view-controller.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T21:30:45.117

将会话控制传递给模型违反了 MVC。您应该使用模型来做出决策，并使用控制器将这些决策反映到应用程序中。在正确的 MVC 环境中，模型甚至不知道您正在使用会话，更不用说操纵它了。

此外，使用 $_SESSION 变量违反了框架封装。如果您发现自己**需**要这样做，是的，您在某个地方出错了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T04:35:34.107

`Authcomponent`您可以使用和在模型中的会话中写入和读取数据`session`

```
App::uses('AuthComponent', 'Controller/Component');
App::import('Component', 'Session'); 
```

您可以使用以下功能写入和读取数据

```
CakeSession::write('Auth.User.id', '1');
debug(CakeSession::read()); 
```

# plugins - Munin - 如何从插件返回未知值

> ID：12617768
> 
> 赞同：1
> 
> 时间：2012-09-27T09:04:36.497
> 
> 标签：plugins, ntp, munin

如果无法报告值，我希望我的 munin 插件报告未知值。我必须返回什么？

*   “楠”
*   “-南”
*   什么都没有，只是跳过返回一个值
*   “未知”
*   ...？

没有什么对我有用。

背景：如果 ntp 根本没有运行，则 ntp_offset 插件会失败。我想返回未知值并发送警报消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T10:55:13.057

我认为返回的正确值是“U”。

这在文档中被简要提及，但没有解释：

[http://munin.readthedocs.org/en/latest/reference/plugin.html#plugin-reference](http://munin.readthedocs.org/en/latest/reference/plugin.html#plugin-reference)

# f# - 约束通用函数参数

> ID：12617776
> 
> 赞同：1
> 
> 时间：2012-09-27T09:05:10.810
> 
> 标签：f#

我有这个代码

```
let inline ProcessExpendableADGroups (input : ('a * SPUser) seq) =
  input
  |> Seq.filter (fun (_, u : SPUser) -> u.IsDomainGroup = true)       
  |> Seq.filter (fun (_, u : SPUser) -> ADUtility.IsADGroupExpandable u.LoginName = true)      
  |> List.ofSeq
  |> List.iter( 
      fun ( li : 'a, u : SPUser) -> 
        let userList = ADUtility.GetUsers u.LoginName 
        if (Seq.length userList <= 500) then
          userList
          |> Seq.filter (fun l -> InfobarrierPolicy.IsUserInPolicy l "FW" = true) 
          |> Seq.iter (
              fun ln ->
                let x = ADUtility.GetNameAndEmail ln 
                let (email, name) = x.Value
                SPUtility.CopyRoleAssignment li u.LoginName ln email name
                li.Update()
              )
          SPUtility.RemoveRoleAssignment li u
      )      

list3 
|> List.iter (
    fun w -> 
      SPUtility.GetDirectAssignmentsforListItems w |> ProcessExpendableADGroups
      SPUtility.GetDirectAssignmentsforFolders w |> ProcessExpendableADGroups
      SPUtility.GetDirectAssignmentsforLists w |> ProcessExpendableADGroups
      SPUtility.GetDirectAssignmentsforWeb w |> ProcessExpendableADGroups
   ) 
```

这里 GetDirectAssignmentsforListItems 方法返回一个元组序列 (SPListItem * SPUser) GetDirectAssignmentsforWeb 返回一个元组序列 (SPWeb * SPUser)。

我需要将此序列发送到一个函数，该函数对这些项目进行非常相似的处理，除了最后我必须在这些项目上调用一个名为“更新”的方法。

我已经编写了一个带有通用参数的方法，但是当我在通用参数上调用 Update 时遇到了问题。

我不能限制这个参数，说这个参数必须有一个名为 Update 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:23:32.487

您可以使用成员约束和[静态解析的类型参数](http://msdn.microsoft.com/en-us/library/dd548046.aspx)来执行此操作。

```
let inline ProcessExpendableADGroups (input : (^a * SPUser) seq) = //'
  input
  |> Seq.filter (fun (_, u) -> u.IsDomainGroup && ADUtility.IsADGroupExpandable u.LoginName)       
  |> Seq.iter( 
      fun (li, u) -> 
        let userList = ADUtility.GetUsers u.LoginName 
        if (Seq.length userList <= 500) then
          userList
          |> Seq.filter (fun l -> InfobarrierPolicy.IsUserInPolicy l "FW") 
          |> Seq.iter (
              fun ln ->
                let x = ADUtility.GetNameAndEmail ln 
                let (email, name) = x.Value
                SPUtility.CopyRoleAssignment li u.LoginName ln email name
                (^a : (member Update : unit -> unit) li) //'
              )
          SPUtility.RemoveRoleAssignment li u
      ) 
```

[这里](http://codebetter.com/matthewpodwysocki/2009/09/28/generically-constraining-f-part-ii/)还有一系列关于该主题的有用文章。

我对上面的功能做了一些改进：

*   一系列`Seq.filter`可以折叠为一个`Seq.filter`，并且`= true`始终是代码气味。
*   `List.ofSeq`并且`List.iter`可以替换为`Seq.iter`. 当您使用 时`Seq.iter`，无论如何都会评估惰性序列。
*   不要编写多余的类型注释，例如`li: 'a`和`u: SPUser`。由于您使用管道并具有类型注释`input`，因此类型检查器将能够推断出正确的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T09:22:10.253

约束看起来像这样（它不需要在方法声明处 - 只是你使用它的地方）

```
 (^a: ( member Update: unit-> unit )t)) 
```

这将调用`Update`在对象上调用的方法`t`

# liferay - 在两台服务器之间传输 liferay 文件（documentt 库）

> ID：12617779
> 
> 赞同：1
> 
> 时间：2012-09-27T09:05:23.407
> 
> 标签：liferay

我已经在开发环境中建立了我的 liferay 网站，现在可以发布了。我还在两个不同的服务器上安装了两个 liferay 节点，我想在其中放置我的网站。Server1 处于活动状态，server2 作为备份。

问题是当我开始开发时，我不知道有一天我需要拥有两台服务器的结构，所以我将所有文档和图像都存储在文件系统上，而不是存储到数据库中。所以基本上有了这个设置，当我在服务器 1 上进行更改时，我必须手动将文档库传输到服务器 2，就像我为主题所做的那样。

我尝试将文档库位置从文件系统更改为 portal-ext.properties 中的数据库，但这没有帮助。

所以，我的问题：

*   现在有没有办法将这些文件传输到数据库，两台服务器都可以共享它们？如果不，

*   是否可以通过某些脚本自动将文档库从 server1 传输到 server2？

谢谢，

阿迪亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:42:08.960

如果server2是冷备备份服务器，假设你在同一时刻对server1的Liferay数据目录和数据库进行了正确备份，你只需将Liferay数据目录的备份恢复到server2，将DB恢复到将相应时刻作为数据目录备份并启动server2。

在热备方案和集群环境中，事情变得有点复杂，因为您需要使用一个公共位置来存储文档、图像、搜索索引等......最简单的方法是将所有内容存储在数据库中或一个公共文件系统，以便多个节点始终处理相同的数据。

如果您想将存储在磁盘上的当前文档集导入数据库，最简单的方法是使用控制面板中的**服务器 > 服务器管理 > 数据迁移选项卡。**它具有将文档从现有存储库（即磁盘）迁移到另一个存储库的选项，在您的情况下这将是 JCRStore，因为该存储库可以配置为使用数据库。

# nosql - Redis 与 Cassandra（大表数据模型）

> ID：12617782
> 
> 赞同：4
> 
> 时间：2012-09-27T09:05:32.267
> 
> 标签：nosql, redis, cassandra, bigtable

假设我需要集中执行以下操作：
`put(key, value)`
其中 value 是 <column name, column value> 的映射。
我对 NoSQL 的了解并不长，我所知道的是 Cassandra 插入（符合 Bigtable 论文中定义的 api）和 Redis “HSET” 命令都可以做到这一点。但是这两种方式的优缺点是什么？那里有任何性能和可扩展性差异吗？

编辑 ：

我的需求类似于 IM 服务器 --- 我需要存储会话数据，并且我希望它们都在内存中，以便轻松实现低延迟。会议最多持续2小时。尚无需要考虑的一致性要求。并且磁盘仅用于故障转移。数据丢失并不可怕。我需要的是更低的延迟。每秒操作数——越多越好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-29T14:31:31.870

redis 和 cassandra 都可以用作键值存储。区别在于速度、规模和可靠性。

Redis 最适合作为单个服务器，其中整个数据集驻留在内存中。

Cassandra 可以处理不适合内存的数据集，以及不适合单个机器的数据集。作为分布在多台机器上的一部分，cassandra 更加可靠。Cassandra 可以处理机器故障、重建机器、在需要时增加集群容量。

因为 redis 完全在内存中，并且读/写由单台机器提供（单个 cassandra 写入通常会与多台机器对话），所以 redis 很可能会更快。

如果您的主要目标是速度，并且您不需要可靠地存储数据，并且您的数据集适合内存，那么 redis 可能是一个更好的解决方案。

# sql - 从 SP 调用同一架构中的存储过程

> ID：12617787
> 
> 赞同：2
> 
> 时间：2012-09-27T09:05:45.283
> 
> 标签：sql, stored-procedures, db2, sql-pl

在编码另一个存储过程时，如何在不指定完整模式名称的情况下调用同一模式中的存储过程。这些是 DB2 中的 SQL PL 过程。

第一个SP：

```
CREATE PROCEDURE MYSCHEMA.SP_TEST
  LANGUAGE SQL
  BEGIN
  END 
```

创建一个没有模式名直接调用这个SP的SP会导致编译错误：

```
CREATE PROCEDURE MYSCHEMA.SP_TEST2
  LANGUAGE SQL
  BEGIN
    CALL SP_TEST();
  END 
```

它会抛出：

> 未找到具有兼容参数的类型为“PROCEDURE”的名为“SP_TEST”的授权例程。SQLCODE=-440，SQLSTATE=42884，DRIVER=3.53.71

直接给出完整的模式名称有效：

```
CREATE PROCEDURE MYSCHEMA.SP_TEST2
  LANGUAGE SQL
  BEGIN
    CALL MYSCHEMA.SP_TEST();
  END 
```

但是，如果我移动到不同的模式，我将不得不在整个地方替换这些引用。是否有合适的解决方法或更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:29:34.267

`CURRENT PATH`特殊寄存器用于解析对非限定存储过程和函数的调用 。`CURRENT SCHEMA`用于解析不合格的对象名称。

默认情况下，`CURRENT PATH`具有 IBM 函数和您的 AUTHID：

```
$ db2 "values substr(current path,1,60)"

1
------------------------------------------------------------
"SYSIBM","SYSFUN","SYSPROC","SYSIBMADM","IBJORHOV"

  1 record(s) selected. 
```

`SET CURRENT PATH`您可以使用语句修改它。

当您创建存储过程时，DB2 会`CURRENT PATH`在编译时记下 的值，并使用它们来解决存储过程中不合格的存储过程和函数调用。相同的逻辑适用于`CURRENT SCHEMA`非限定表名。

因此，在存储过程中允许不合格的过程和函数调用的正确方法是设置`CURRENT PATH`寄存器，然后创建过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:08:24.730

不鼓励省略 SCHEMA 名称。在您的调用中保留您的架构名称。如果您移动到不同的模式，则无论如何都必须通过提取/更改 SQL 脚本来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:24:27.263

该`SET SCHEMA`命令允许您更改当前架构：

```
SET CURRENT SCHEMA FOO;
CALL MY_PROC_THAT_RESIDES_IN_FOO(); 
```

但是，将模式设置为动态值并不容易。您将不得不：

1.  对主机变量执行某些操作（如果您在调用应用程序中）或
2.  构建并执行动态 SQL 语句字符串。

到那时，它可能变得比它的价值更麻烦。

更多信息可以在[命令的](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.sqlref/src/tpc/db2z_sql_setschema.htm)[文档中`SET SCHEMA`](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.sqlref/src/tpc/db2z_sql_setschema.htm)找到。

# objective-c - 在 iOS 上管理本地存储和后端数据库存储

> ID：12617795
> 
> 赞同：1
> 
> 时间：2012-09-27T09:06:12.693
> 
> 标签：objective-c, ios, core-data

我正在制作一个 iPad 应用程序。

我在哪里填写一些表格并提交保存表格数据。现在这是问题所在：-

1.  如果 iPad 具有 Internet 连接，则应通过 API 调用将数据发送到后端数据库。
2.  否则它应该在用户不知道的情况下保存在本地存储中。
3.  有一个屏幕，用户可以在其中看到以前填写的表格列表，[lats a week or so]他可以编辑。不知道有没有同步。

当用户上线并点击同步按钮时，数据与后端同步。

我正在使用 Core Data 进行本地存储，并且有一个 MySQL 后端，前面有一个 RoR WS API。

现在我有多个关于实体模式设计和缓存技术的实现的问题。

我不想让事情变得过于复杂。

欢迎所有建议:)

**我的问题**

*   每个表单数据的唯一 id 是在后端自动生成的。因此，当我将数据保存在本地并且未与后端同步时，它应该具有什么 id ？
*   我应该在本地存储中保留数据多长时间以及何时应该删除相对较旧的数据。

*   重要的因素是，用户并不总是有连接，他的登录状态也将被缓存到用户默认值中。

# html - 在页面上显示正确调整大小的图像或放大？

> ID：12617797
> 
> 赞同：0
> 
> 时间：2012-09-27T09:06:13.000
> 
> 标签：html, performance, http

嗨，这里更多的是意见或最佳实践问题。我正在建立一个网站，该网站的顶部有一个旋转木马，下面有一个手风琴。手风琴包含所有与旋转木马相同的图像，但大小只有一半。

为了提高性能，最好使用与轮播相同的图像，因为那样只会对该资产进行一次 http 调用，或者为所有相关插槽生成正确大小的图像变体，但会增加对同一资产的请求数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:00:53.047

在两个地方使用相同的图像并使用 img 标签的 height 和 width 属性重新调整它们的大小

# javascript - Zepto/JQuery AJAX 请求自动从请求的 html 下载媒体文件

> ID：12617798
> 
> 赞同：0
> 
> 时间：2012-09-27T09:06:15.547
> 
> 标签：javascript, jquery, ajax, zepto

我需要为 HTML 内容发出 AJAX 请求，但是当我查看 firebug 时，似乎请求正在下载附加到请求的 html（图像、CSS）的媒体文件。我怎样才能阻止它？我只需要来自 PHP 生成的 HTML 的纯文本。

```
$.ajax({
    type:     'GET',
    url:      'http://examplehost.com,
    dataType: 'text',
    cache: false,
    success:  function (data) {
        // SUCCESS CODE HERE
    },
    error:    function (xhr, type, error) {
        // ERROR CODE HERE
    },
    complete: function() {
        // ON COMPLETE CODE HERE
    }
}); 
```

当请求完成时，我还必须有可能运行函数！我使用 ZEPTO 库，但它的 JQuery 克隆，所以功能是相似的。

# scala - 如何在 Scala 中实现速率限制器？

> ID：12617801
> 
> 赞同：3
> 
> 时间：2012-09-27T09:06:33.327
> 
> 标签：scala, guava, akka

我想在 Scala 中使用 RateLimiter 来限制方法调用的频率。

我需要类似于 Guava 实现的东西： [http ://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html)

我知道我可以在本地使用 Guava，但我想知道 Scala 中是否有更好的本地解决方案，有或没有 Akka

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:10:13.980

就个人而言，我会使用番石榴。但是您可以使用期货轻松创建自己的。

```
class RateLimiter(delayMs: Int) {
  private[this] var last: Long = System.currentTimeMillis
  private[this] val done = scala.actors.Futures.alarm(0)
  def request = {
    val now = System.currentTimeMillis
    val elapsed = synchronized {
      val elapsed = now - last
      last = if (elapsed < delayMs) last+delayMs else now
      elapsed
    }
    if (elapsed < delayMs) scala.actors.Futures.alarm(delayMs-elapsed)
    else done
  }
} 
```

然后，您为要限制访问的每个方法或一组方法创建一个限制器，并通过调用`request()`;来启动该方法。如果需要，这将使用 a`Future`来阻止。如果你想要的不是至少这么多毫秒的间隔，你只需要改变一点数学和/或跟踪更多的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T20:36:04.297

[我围绕 Guava`RateLimiter`](http://nxt.flotsam.nl/rate-limiting)编写了一些包装器，以允许您将任何函数转换为其速率限制版本。怀疑 Guava 的 RateLimiter 是否真的是他们的路要走。它的`acquire()`调用正在阻塞线程，即使它不会阻塞线程，你很有可能会引入一些可能会炸毁堆顶的东西。

# asp.net - 如何使用 wcf 服务将大数据传递到服务层？

> ID：12617802
> 
> 赞同：0
> 
> 时间：2012-09-27T09:06:35.863
> 
> 标签：asp.net, wcf, file-upload

我正在尝试在我的一个 Web 应用程序中实现附件功能。它有三层。演示、业务和服务层，我在附件字段的数据库中有 blob 数据类型....在将数据从业务层传输到服务层时出现错误。

```
The remote server returned an unexpected response: (400) Bad Request 
```

即使我尝试增加数组长度、缓冲区大小等，我也找不到任何解决方案......但仍然出现错误......所以如果有人有任何想法，请帮助我......我从 5 天开始就面临这个问题...... .

这是我的 web.config 设置

```
<binding name="BasicHttpBinding_ITestService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="83886080" maxBufferPoolSize="83886080" maxReceivedMessageSize="83886080"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:20:55.750

通过将以下部分添加到 WCF 主机的配置文件中，在服务器端打开 WCF 跟踪。您将能够从跟踪文件中获得更具体的失败原因。

```
<system.diagnostics>
    <trace autoflush="false"/>
    <sources>
      <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
        <listeners>
          <add name="sdt" type="System.Diagnostics.XmlWriterTraceListener" initializeData="c:\temp\ServiceTrace.svclog"/>
        </listeners>
      </source>
    </sources>
</system.diagnostics> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:05:52.857

> 需要使用 WCF 流来上传大文件。但是，所使用的方法仍然存在一些限制。所以通过 HTTP 传输大文件需要很多考虑。详细示例和注意事项已在以下链接中发布。 [http://garfoot.com/blog/2008/06/transferring-large-files-using-wcf/](http://garfoot.com/blog/2008/06/transferring-large-files-using-wcf/) http://kjellsj.blogspot.com/2007/02/wcf-streaming-upload-files-over-http。 html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:29:15.087

您需要使用 WCF 流来上传大文件。但是，所使用的方法仍然存在一些限制。所以通过 HTTP 传输大文件需要很多考虑。详细示例和注意事项已在以下链接中发布。

1.  [http://garfoot.com/blog/2008/06/transferring-large-files-using-wcf/](http://garfoot.com/blog/2008/06/transferring-large-files-using-wcf/)
2.  [http://kjellsj.blogspot.com/2007/02/wcf-streaming-upload-files-over-http.html](http://kjellsj.blogspot.com/2007/02/wcf-streaming-upload-files-over-http.html)

# c++ - ASSERT_TRUE() 返回类型与 gtest 中的函数类型不匹配

> ID：12617806
> 
> 赞同：9
> 
> 时间：2012-09-27T09:07:04.543
> 
> 标签：c++, visual-studio-2010, googletest

当我使用`ASSERT_TRUE()`提供的时，`Gtest`我遇到了以下错误。 `return type does not match function type`中带有下划线`VS 2010.`。

### abc.h

```
#include "gtest\gtest.h"

class abc {
pubilc:
    bool fun();
    private:
    bool fun1();
}; 
```

### ABC

```
bool abc::fun()
{
    ASSERT_TRUE(fun1()); // Getting error: return type does not match function type
}

bool abc::fun1()
{
    return true; // True or false depanding on operation
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-02-18T11:21:10.630

`ASSERT_TRUE`是一个宏。展开后，它将包含一个分支，例如：

```
if (fun1() == false) {
   return;
} 
```

这就是`ASSERT_TRUE`失败时硬停止的方式，但这也意味着您的方法`bool abc::fun()`现在有一个`void`返回退出路径，与其签名相冲突。

可能的修复包括不使用硬停止断言：

```
bool abc::fun(){
    bool result = fun1();
    EXPECT_TRUE(result); //No return in expansion
                         //No hard stop!
    return result;
} 
```

或在不需要时更改您的方法返回类型：

```
void abc::fun(){
    ASSERT_TRUE(fun1()); //Hard stop on failure
} 
```

或通过引用返回：

```
void abc::fun(bool &outResult){
   outResult = fun1();  //return result by reference
   ASSERT_TRUE(result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:09:56.057

中没有`return`指定语句，`fun()`但它返回一个`bool`. 添加`return false;`or或`return true;`将`fun()`其返回类型更改为`void`：

```
void abc::fun()
{
    ASSERT_TRUE(fun1());
} 
```

* * *

基于[我的编译器抱怨构造函数（或析构函数）无法返回值。这是怎么回事？](https://github.com/google/googletest/blob/master/googletest/docs/FAQ.md#my-compiler-complains-that-a-constructor-or-destructor-cannot-return-a-value-whats-going-on)其中指出（逐字）：

> 由于 C++ 的特殊性，为了支持将消息流式传输到 ASSERT_* 的语法，例如

```
ASSERT_EQ(1, Foo()) << "blah blah" << foo; 
```

> 我们不得不放弃在构造函数和析构函数中使用 ASSERT* 和 FAIL*（但不是 EXPECT* 和 ADD_FAILURE*）。解决方法是将构造函数/析构函数的内容移动到私有 void 成员函数，或者如果可行，则切换到 EXPECT_*()。用户指南中的本节对此进行了解释。

`return`类型必须`void`在使用`ASSERT_*()`宏的函数中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T09:10:14.920

该`fun`方法有一个`bool`返回类型，所以它仍然需要`return`一些东西。

`ASSERT_TRUE`是一个测试某事是否真实的宏，它不会为您调用 return。实际上，您可以`ASSERT_TRUE`连续执行多个，并且（如果它们都是真实的）它们将一个接一个地执行。把`ASSERT_TRUE`宏想象成一个函数调用，即使它不是技术上的。

这应该有效：

```
bool abc::fun()
{
   ASSERT_TRUE(fun1()); 
   return true;
} 
```

# c# - 多选结果和 Linq to Entity

> ID：12617807
> 
> 赞同：0
> 
> 时间：2012-09-27T09:07:17.730
> 
> 标签：c#, sql-server, stored-procedures, ado.net, entity-framework-5

我有一个返回未知数量数据的 SP，这是我的查询示例：

我的SP：

```
WHILE (@counter <= @SomeParameter)
BEGIN
   Select *
   From tblFoo
   Where tblFoo.Counter=@counter

   @counter=@counter+1
END 
```

为了有效地存储数据，我想使用 DataSet ，它将在每个 DataTable 中存储每个 Selects 的结果。

由于我的应用程序基于 EF 5 ，我试图用我的`dbContext`对象调用我的 SP，这就是我试图做的。

```
var ds=db.Database.SqlQuery<DataSet>("MySP @counter @SomeParameter", value1,value2); 
```

这似乎无法正常工作。

我想使用经典的 ADO.NET 来解决这个问题，并使用`SqlDataAdapter`，但是我不确定如何将原始 Connection 引用从.Connection 属性传递`dbContext`给`SqlDataAdapter`.Connection 属性，因为它的类型不同。

注意：在这个问题上我使用 DataSet 而不是 Entities Collection 的原因是因为我从 SP 获得的结果可能有不同的列，因此我不确定 Entities Collection 是否会这样做。

我想知道如何使用实体（或 SqlAdapter）调用我的 SP，以使用我的 SP 中的每个 Select 的结果填充我的 DataSet 中的每个表。

我是 EF 的新手，所以如果我在思考或做错任何事，任何小费都会被告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:09:48.823

您可以尝试使用此代码 - 基于`SqlDataAdapter`类

```
var connectionString = "...";
using (SqlConnection connection = 
        new SqlConnection(connectionString))
    {
        SqlDataAdapter adapter = new SqlDataAdapter();

         var cmd = new SqlCommand("YourSP", connection);//Adjust your stored procedure name
         cmd.CommandType = CommandType.StoredProcedure;
         cmd.Parameters.Add(new SqlParameter("@SomeParameter", YourValue));//Adjust your value

         adapter.SelectCommand = cmd;
         adapter.Fill(dataset);
        return dataset;
    } 
```

# python - 如何使我的 Django 应用程序的这个随机博客文章重定向更有效

> ID：12617811
> 
> 赞同：1
> 
> 时间：2012-09-27T09:07:27.453
> 
> 标签：python, django, redirect, random, blogs

我在我的网站上创建了一个随机的博客文章链接，它使用的代码有效。当我创建它时，由于它一直说'QuerySet'对象没有属性'slug'，所以让它正常工作时出现了问题，所以我想出了一个解决方法。解决方法对数据库提出了不必要的请求（我认为）：

```
from django.http import HttpResponseRedirect
def randompost(request):
    blog_posts = BlogPost.objects.filter(post_status = 'published').order_by('?')[:1]
    blog_title = blog_posts[0]
    blog_post = get_object_or_404(BlogPost, title=blog_title)

    path = '/theblog/post/' + blog_post.slug + '/'

    return HttpResponseRedirect(path) 
```

理想情况下，我想要一个解决方案，例如[Django 将 URL 重定向到最新创建的博客文章](https://stackoverflow.com/questions/5440276/django-redirect-url-to-latest-created-blog-post)

由于它是重定向，它是否还需要正确的 http 代码？

带有 Queryset 错误的旧代码：

```
blog_post = BlogPost.objects.filter(post_status = 'published').order_by('?')[:1]
path = '/theblog/post/' + blog_post.slug + '/'

return HttpResponseRedirect(path) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:36:40.620

您可能知道也可能不知道，这`.order_by('?')`是非常低效的，并且可能是该代码效率低下的最大根源。

这是获取随机发布的帖子的更有效（db wise）的方法

```
from django.shortcuts import redirect
from django.http import Http404
from random import randint

def randompost(request):
    published_posts = BlogPost.objects.filter(post_status='published')
    count = published_posts.count()
    if count == 0:
        # Raise an error or something as there are no blog posts
        raise Http404
    random_index = randint(0, count - 1)
    random_post = published_posts[random_index] 

    # Then redirect to your post
    return redirect('blog_post', random_post.slug) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:17:09.033

1.  最好使用`redirect`和反向 URL；
2.  您可以使用`[]`语法来获取 QuerySet 的第一个对象。

更新代码：

```
from django.shortcuts import redirect

def randompost(request):
    blog_posts = BlogPost.objects.filter(post_status='published').order_by('?')
    latest_post = blog_posts[0]

    return redirect('blog_post', latest_post.slug) 
```

更新：

URL 示例，反向由 url name 完成`blog_post`：

```
url(r'^post/(\w+)$', 'view_name', name='blog_post') 
```

# asp.net - 是否可以在 ASP.NET 中获得 Windows 身份验证而不在 IIS 中启用它？

> ID：12617813
> 
> 赞同：0
> 
> 时间：2012-09-27T09:07:31.740
> 
> 标签：asp.net, iis, plugins, windows-authentication

### 背景

我们的 asp.net webapp 已经发展壮大，现在有 6 种不同的身份验证方法，未来还会有更多。我想将这些方法标准化，并将它们提取到一个独立的插件中，该插件可以随意禁用/启用（甚至可能从应用程序内配置）。这也是必要的，因为至少其中一种方法是特定于客户端的，并且使用由所述客户端提供的 DLL，不应将其分发给其他客户端。

### 问题

当我尝试为身份验证方法创建插件机制时，我面临着一种特定的方法，即 Windows 身份验证。通常它通过在 IIS 中启用 Windows 身份验证来工作，但由于它应该是一个独立的插件，我想避免它修改 web.config 和/或 IIS 配置。那么，假设在 IIS 中默认关闭 Windows 身份验证（所有内容都只匿名），有什么方法可以让我的插件工作吗？我可以从我的 ASP.NET 应用程序中以某种方式告诉 IIS，我想对特定的 URL/请求进行 Windows 身份验证吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:13:33.497

使用 advapi32，您应该能够获得详细信息，而无需使用 Windows 身份验证。

看看这里：

[http://www.pinvoke.net/default.aspx/advapi32.logonuser](http://www.pinvoke.net/default.aspx/advapi32.logonuser)

除此之外，除了用户 Windows 集成身份验证之外，没有其他方法可以获取更多用户详细信息

# java - 循环获取价值的问题

> ID：12617817
> 
> 赞同：0
> 
> 时间：2012-09-27T09:07:53.777
> 
> 标签：java, list, arraylist

我在下面的循环中获取数据时遇到问题，即使大小不为零，我在 sysout 的“数据是”中得到空值。那里有什么问题？

```
List<Long> dd = domainItemMapper.getIsSearchable(34372);
    System.out.println("the test is-" + dd.size());
    for (int i = 0; i < dd.size(); i++) {
        Long isSearch = dd.get(i);
        System.out.println("data is"+dd.get(i));
        if (isSearch.equals(0)) {
            isSearchValue = false;
        } else
            isSearchValue = true;
    } 
```

对数据库的调用是mybatis调用，如下界面

```
List<Long> getIsSearchable(@Param("parentFieldId") long parentFieldId); 
```

暗示

```
<mapper namespace="com.ge.dbt.common.persistence.IFormValidatorMapper">

        <select id="getIsSearchable" statementType="CALLABLE"
        resultType="Long">
        select is_searchable from t_field where parent_field_id=#{parentFieldId}
    </select>

</mapper> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:20:09.770

我猜你的整个代码可以转换成两行。

```
if(dd!= null && !dd.isEmpty())
 return dd.contains(0);//Contains Guard you in such cases because equals check
                       //happen on passed element ie *0* 
```

`Long`java 中的默认值为`null`. 因此，您需要对`null`您的情况进行额外检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:20:21.890

`isSearch.equals`在支票中附上您的`null`支票

```
if(isSearch != null)
{
    if (isSearch.equals(0)) 
    {             
        isSearchValue = false;         
    } 
    else             
    {
       isSearchValue = true;
    }
} 
```

但是，最好修改`domainItemMapper.getIsSearchable(34372);`方法的代码，以便它根本不会填充列表`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:25:13.777

似乎您的列表包含`null`文字。并且`List`支持 null 作为值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:29:44.283

根据您的此评论

> 数据有 null、0 和 1 数据。我只想返回 0 和 1 的数据。

您需要像这样修复您的查询

```
 select is_searchable from t_field where parent_field_id=#{parentFieldId} and is_searchable is not NULL; 
```

# blackberry - 如何在 JDE NetBeans 中为 BlackBerry 应用程序设置图标

> ID：12617820
> 
> 赞同：1
> 
> 时间：2012-09-27T09:08:05.153
> 
> 标签：blackberry, netbeans, java-me, icons, blackberry-jde

我为 BlackBerry 开发应用程序，我使用 JDE 7.1.0 和 NetBeans 6.9
如何在 JDE NetBeans 中为 BlackBerry 应用程序设置图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:17:20.617

转到`BlackBerry_App_Descriptor.xml`并在“应用程序图标”选项卡中放置您的图标。完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:18:41.203

如果您只使用 Netbeans，请考虑使用[BlackBerry Ant Tools](http://bb-ant-tools.sourceforge.net/docs#rapc)

有蚂蚁任务`rapc`

它有一个嵌套元素`jdp`，jdp 有`icon`属性。

检查我上面提供的链接。BB Ant Tools 有完整的文档。

如果您使用 Netbans + JDE，则在 JDE 中设置图标，只需将图片添加到您的项目中，并将其指定为应用程序描述符文件中的应用程序图标。

# titanium - 将我的聊天记录存储在 Appcelerator 云服务中

> ID：12617821
> 
> 赞同：0
> 
> 时间：2012-09-27T09:08:06.453
> 
> 标签：titanium

我正在开发 Titanium 中的聊天应用程序。我需要将我的聊天记录存储在 appcelerator(ACS) 提供的云服务器中。任何人都可以给出一些想法。

建议总是受到赞赏。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:11:21.723

我建议阅读手册。有一个专门用于聊天的 API。

[http://cloud.appcelerator.com/docs/api/v1/chats/create](http://cloud.appcelerator.com/docs/api/v1/chats/create)

# actionscript-3 - 类型未找到或不是编译时常量：光栅

> ID：12617823
> 
> 赞同：1
> 
> 时间：2012-09-27T09:08:08.573
> 
> 标签：actionscript-3, compiler-errors, flashdevelop

这是完整的错误消息：

```
C:\Project Files\Good\src\views\RasterView.as(26): col: 39 Error: Type was not found or was not a compile-time constant: Raster.
C:\Project Files\Good\src\views\RasterView.as(42): col: 45 Error: Type was not found or was not a compile-time constant: Raster.
C:\Project Files\Good\src\views\RasterView.as(47): col: 45 Error: Type was not found or was not a compile-time constant: Raster.
C:\Project Files\Good\src\views\RasterView.as(62): col: 32 Error: Type was not found or was not a compile-time constant: Raster. 
```

这是文件（很大）

```
package views 
{
    import flash.display.Bitmap;
    import flash.geom.Point;
    import views.Canvas.Raster;
    /**
     * ...
     * @author Arthur Wulf White
     */
    public class RasterView extends Bitmap
    {   
        import views.Canvas.Raster

        public static const SCHEMATIC   : int = 1;
        public static const SMOOTH      : int = 2;
        public static const RENDER_ONCE : int = 4;
        public static const BOTH        : int = SCHEMATIC + SMOOTH;

//      protected var bitmapData : Raster;
        protected var viewMode : int = 0;

        protected var lineColor : int = 0xff000000;
        protected var fillColor : int = 0xff808080;
        protected var bgColor   : int = 0xffffffff;

        public function RasterView(raster : Raster) 
        {
            this.bitmapData = raster;
        }

        public function getStyle():Vector.<int>
        {
            return new <int> [lineColor, fillColor, bgColor];
        }
        public function setStyle(lineColor : int, fillColor : int, bgColor : int):void
        {
            this.lineColor  = lineColor;
            this.fillColor  = fillColor;
            this.bgColor    = bgColor;
        }

        public function backupView(backupRaster : Raster):void
        {
            backupRaster.copyPixels(bitmapData, bitmapData.rect, new Point());
        }

        public function loadBackup(backupRaster : Raster):void
        {
            bitmapData.copyPixels(backupRaster, backupRaster.rect, new Point());
        }

        public function getViewMode():int
        {
            return viewMode;
        }

        public function setViewMode(mode : int):void
        {
            viewMode = mode;
        }

        public function get Raster():Raster
        {
            return Raster(bitmapData);
        }

        public function refreshView():void
        {
            bitmapData.lock()
            render();
            bitmapData.unlock();
            if ((getViewMode() & RENDER_ONCE) != 0)
            {
                setViewMode( getViewMode() ^ RENDER_ONCE);
            }
        }

        public function render():void
        {

        }

        protected function clear():void
        {
            bitmapData.fillRect(bitmapData.rect, bgColor);
        }

    }

} 
```

这是 Raster 类的文件（我认为这对这个问题并不重要）

```
/**
*
*   Raster class
*   
*   @author     Didier Brun aka Foxy - www.foxaweb.com
*   @version        1.4
*   @date       2006-01-06
*   @link       http://www.foxaweb.com
* 
*   AUTHORS ******************************************************************************
* 
*   authorName :    Didier Brun - www.foxaweb.com
*   contribution :  the original class
*   date :          2007-01-07
* 
*   authorName :    Drew Cummins - http://blog.generalrelativity.org
*   contribution :  added bezier curves
*   date :          2007-02-13
* 
*   authorName :    Thibault Imbert - http://www.bytearray.org
*   contribution :  Raster now extends BitmapData, performance optimizations
*   date :          2009-10-16
* 
*   PLEASE CONTRIBUTE ? http://www.bytearray.org/?p=67
* 
*   DESCRIPTION **************************************************************************
* 
*   Raster is an AS3 Bitmap drawing library. It provide some functions to draw directly 
*   into BitmapData instance.
*
*   LICENSE ******************************************************************************
* 
*   This class is under RECIPROCAL PUBLIC LICENSE.
*   http://www.opensource.org/licenses/rpl.php
* 
*   Please, keep this header and the list of all authors
* 
*/
package views.Canvas
{
    import flash.display.BitmapData;
    import flash.display.Shape;
    import flash.geom.Point;
    import flash.geom.Rectangle;

    public class Raster extends BitmapData
    {
        private var shape : Shape = new Shape();
        private var buffer:Array = new Array();
        private var r:Rectangle = new Rectangle();

        public function Raster ( width:uint, height:uint, transparent:Boolean=false, color:uint=0)
        {       
            super ( width, height, transparent, color);
        }

        // ------------------------------------------------
        //
        // ---o public methods
        //
        // ------------------------------------------------

        public function setPoint( p : Point, color : int, size : int = 1):void
        {
            if(size == 1)
                setPixel(p.x, p.y, color);
            else if (size > 1)
                drawRect(new Rectangle(p.x - size / 2, p.y - size / 2, size, size), color);
        }

        public function lineAA( x0:int, y0:int, x1:int, y1:int, color:uint ):void
        {
            var i : int = 0;
            var cInt : int;
            var cNum : Number;
            var div  : Number;

            var dx : int = Math.abs(x1 - x0);
            var dy : int = Math.abs(y1 - y0);

            if(dx >= dy)
            {
                //do x
                if (x0 < x1)
                {
                    cInt = x0;
                    cNum = y0;
                }
                else
                {
                    cInt = x1;
                    cNum = y1;
                }

                div = Number(y1 - y0) / Number(x1 - x0);
                setPixel32(cInt, cNum, color);
                for (; i <= dx; i++)
                {
                    cInt++;
                    cNum += div;
                    setAAPixel(cInt, cNum, color, true, false);
                }
            }
            else
            {
                //do y
                if (y0 < y1)
                {
                    cInt = y0;
                    cNum = x0;
                }
                else
                {
                    cInt = y1;
                    cNum = x1;
                }

                div = Number(x1 - x0) / Number(y1 - y0);
                setPixel32(cNum, cInt, color);
                for (; i <= dy; i++)
                {
                    cInt++;
                    cNum += div;
                    setAAPixel(cNum, cInt, color, false, true);
                }
            }
        }

        public function quadLine(x0 : int, y0 : int, cx : int, cy : int, x1 : int, y1 : int, color : int = 0xff0000ff, detail : int = 20):void
        {
            var epsilon : Number = 1.0 / Number(detail);
            var total : Number = 0;
            var x : int = 0;
            var y : int = 0;
            for (; total <= 1.001; total+=epsilon)
            {
                x = (1 - total) * ((1 - total) * x0 + total * cx) + total * (total * x1 + (1 - total) * cx); 
                y = (1 - total) * ((1 - total) * y0 + total * cy) + total * (total * y1 + (1 - total) * cy);
                setPixel32(x, y, color);
            }
        }
         /**
         * Draws a antialias Quadratic Bezier Curve (equivalent to a DisplayObject's graphics#curveTo)
         * 
         * @param x0            x position of first anchor
         * @param y0            y position of first anchor
         * @param x1            x position of control point
         * @param y1            y position of control point
         * @param x2            x position of second anchor
         * @param y2            y position of second anchor
         * @param c             color
         * @param resolution    [optional] determines the accuracy of the curve's length (higher number = greater accuracy = longer process)
         * */

        public function aaQuadBezier ( anchorX0:int, anchorY0:int, controlX:int, controlY:int, anchorX1:int, anchorY1:int, c:Number, resolution:int = 3):void
        {   
            shape.graphics.clear();
            shape.graphics.lineStyle(1, c, 1);
            shape.graphics.moveTo(anchorX0, anchorY0);
            shape.graphics.curveTo(controlX, controlY, anchorX1, anchorY1);
            this.draw(shape);
        }

        /**
        * Draw an anti-aliased line
        * 
        * @param x0     first point x coord
        * @param y0     first point y coord 
        * @param x1     second point x coord
        * @param y1     second point y coord
        * @param c      color (0xaarrvvbb)
        */
        public function aaLine2( x1:int, y1:int, x2:int, y2:int, color:uint ):void
        {   
            shape.graphics.clear();
            shape.graphics.lineStyle(1, color, 1);
            shape.graphics.moveTo(x1, y1);
            shape.graphics.lineTo(x2, y2);
            this.draw(shape);
        }

        /**
        * Draw a line
        * 
        * @param x0     first point x coord
        * @param y0     first point y coord 
        * @param x1     second point x coord
        * @param y1     second point y coord
        * @param c      color (0xaarrvvbb)
        */
        public function line ( x0:int, y0:int, x1:int, y1:int, color:uint ):void
        {   
            var dx:int;
            var dy:int;
            var i:int;
            var xinc:int;
            var yinc:int;
            var cumul:int;
            var x:int;
            var y:int;
            x = x0;
            y = y0;
            dx = x1 - x0;
            dy = y1 - y0;
            xinc = ( dx > 0 ) ? 1 : -1;
            yinc = ( dy > 0 ) ? 1 : -1;
            dx = dx < 0 ? -dx : dx;
            dy = dy < 0 ? -dy : dy;
            setPixel32(x,y,color);

            if ( dx > dy )
            {
                cumul = dx >> 1;
                for ( i = 1 ; i <= dx ; ++i )
                {
                    x += xinc;
                    cumul += dy;
                    if (cumul >= dx)
                    {
                        cumul -= dx;
                        y += yinc;
                    }
                    setPixel32(x,y,color);
                }
            }else
            {
                cumul = dy >> 1;
                for ( i = 1 ; i <= dy ; ++i )
                {
                    y += yinc;
                    cumul += dx;
                    if ( cumul >= dy )
                    {
                        cumul -= dy;
                        x += xinc ;
                    }
                    setPixel32(x,y,color);
                }
            }
        }

        /**
        * Draw a triangle
        * 
        * @param x0     first point x coord
        * @param y0     first point y coord 
        * @param x1     second point x coord
        * @param y1     second point y coord
        * @param x2     third point x coord
        * @param y2     third point y coord
        * @param c      color (0xaarrvvbb)
        */

        public function triangle ( x0:int, y0:int, x1:int, y1:int, x2:int, y2:int, color:uint ):void
        {
            line (x0,y0,x1,y1,color);
            line (x1,y1,x2,y2,color);
            line (x2,y2,x0,y0,color);
        }

        /**
        * Draw a filled triangle
        * 
        * @param x0     first point x coord
        * @param y0     first point y coord 
        * @param x1     second point x coord
        * @param y1     second point y coord
        * @param x2     third point x coord
        * @param y2     third point y coord
        * @param c      color (0xaarrvvbb)
        */
        public function filledTri ( x0:int, y0:int, x1:int, y1:int, x2:int, y2:int, color:uint ):void
        {
            buffer.length = 0;
            lineTri (buffer,x0,y0,x1,y1,color);
            lineTri (buffer,x1,y1,x2,y2,color);
            lineTri (buffer,x2,y2,x0,y0,color);
        }

        /**
        * Draw a circle
        * 
        * @param px     first point x coord
        * @param py     first point y coord 
        * @param r      radius
        * @param c      color (0xaarrvvbb)
        */
        public function circle ( px:int, py:int, r:int, color:uint ):void
        {
            var x:int;
            var y:int;
            var d:int;
            x = 0;
            y = r;
            d = 1-r;
            setPixel32(px+x,py+y,color);
            setPixel32(px+x,py-y,color);
            setPixel32(px-y,py+x,color);
            setPixel32(px+y,py+x,color);

            while ( y > x )
            {
                if ( d < 0 )
                {
                    d += (x+3) << 1;
                }else
                {
                    d += ((x - y) << 1) + 5;
                    y--;
                }
                x++;
                setPixel32(px+x,py+y,color);
                setPixel32(px-x,py+y,color);
                setPixel32(px+x,py-y,color);
                setPixel32(px-x,py-y,color);
                setPixel32(px-y,py+x,color);
                setPixel32(px-y,py-x,color);
                setPixel32(px+y,py-x,color);
                setPixel32(px+y,py+x,color);
            }
        }

        /**
        * Draw an anti-aliased circle
        * 
        * @param px     first point x coord
        * @param py     first point y coord 
        * @param r      radius
        * @param c      color (0xaarrvvbb)
        */
        public function aaCircle ( px:int, py:int, r:int, color:uint ):void
        {
            var vx:int;
            var vy:int;
            var d:int;
            vx = r;
            vy = 0;

            var t:Number=0;
            var dry:Number;
            var buff:int;

            setPixel(px+vx,py+vy,color);
            setPixel(px-vx,py+vy,color);
            setPixel(px+vy,py+vx,color);
            setPixel(px+vy,py-vx,color);

            while ( vx > vy+1 )
            {
                vy++;
                buff = Math.sqrt(r*r-vy*vy)+1;
                dry = buff - Math.sqrt(r*r-vy*vy);
                if (dry<t) vx--;

                drawAlphaPixel(px+vx,py+vy,1-dry,color)
                drawAlphaPixel(px+vx-1,py+vy,dry,color)
                drawAlphaPixel(px-vx,py+vy,1-dry,color)
                drawAlphaPixel(px-vx+1,py+vy,dry,color)
                drawAlphaPixel(px+vx,py-vy,1-dry,color)
                drawAlphaPixel(px+vx-1,py-vy,dry,color)
                drawAlphaPixel(px-vx,py-vy,1-dry,color)
                drawAlphaPixel(px-vx+1,py-vy,dry,color)

                drawAlphaPixel(px+vy,py+vx,1-dry,color)
                drawAlphaPixel(px+vy,py+vx-1,dry,color)
                drawAlphaPixel(px-vy,py+vx,1-dry,color)
                drawAlphaPixel(px-vy,py+vx-1,dry,color)

                drawAlphaPixel(px+vy,py-vx,1-dry,color)
                drawAlphaPixel(px+vy,py-vx+1,dry,color)
                drawAlphaPixel(px-vy,py-vx,1-dry,color)
                drawAlphaPixel(px-vy,py-vx+1,dry,color)

                t=dry;
            }
        }

        /**
        * Draw an anti-aliased line
        * 
        * @param x0     first point x coord
        * @param y0     first point y coord 
        * @param x1     second point x coord
        * @param y1     second point y coord
        * @param c      color (0xaarrvvbb)
        */
        public function aaLine ( x1:int, y1:int, x2:int, y2:int, color:uint ):void
        {   
            var steep:Boolean = Math.abs(y2 - y1) > Math.abs(x2 - x1);
            var swap:int;

            if (steep)
            {
                swap=x1; x1=y1; y1=swap;
                swap=x2; x2=y2; y2=swap;
            }

            if (x1 > x2)
            {
                swap=x1; x1=x2; x2=swap;
                swap=y1; y1=y2; y2=swap;
            }

            var dx:int = x2 - x1;
            var dy:int = y2 - y1

            var gradient:Number = dy / dx;

            var xend:int = x1;
            var yend:Number = y1 + gradient * (xend - x1);
            var xgap:Number = 1-((x1 + 0.5)%1);
            var xpx1:int = xend;
            var ypx1:int = yend;
            var alpha:Number;

            alpha = ((yend)%1) * xgap;

            var intery:Number = yend + gradient;

            xend = x2;
            yend = y2 + gradient * (xend - x2)
            xgap = (x2 + 0.5)%1;

            var xpx2:int = xend; 
            var ypx2:int = yend;

            alpha = (1-((yend)%1)) * xgap;

            if (steep)
                drawAlphaPixel(ypx2,xpx2,alpha,color);
            else drawAlphaPixel(xpx2, ypx2,alpha,color);

            alpha = ((yend)%1) * xgap;

            if (steep)
                drawAlphaPixel(ypx2 + 1,xpx2,alpha,color);
            else drawAlphaPixel(xpx2, ypx2 + 1,alpha,color);

            var x:int=xpx1;

            while (x++<xpx2)
            {
                alpha = 1-((intery)%1);

                if (steep)
                    drawAlphaPixel(intery,x,alpha,color);
                else drawAlphaPixel(x,intery,alpha,color);

                alpha=intery%1;

                if (steep)
                    drawAlphaPixel(intery+1,x,alpha,color);
                else drawAlphaPixel(x,intery+1,alpha,color);

                intery = intery + gradient
            }
        }

        /**
         * Draws a Rectangle
         * 
         * @param rect          Rectangle dimensions
         * @param color         color
         * */
        public function drawRect ( rect:Rectangle, color:uint ):void
        {
            line ( rect.x, rect.y, rect.x+rect.width, rect.y, color );
            line ( rect.x+rect.width, rect.y, rect.x+rect.width, rect.y+rect.height, color );
            line ( rect.x+rect.width, rect.y+rect.height, rect.x, rect.y+rect.height, color );
            line ( rect.x, rect.y+rect.height, rect.x, rect.y, color );
        }

        /**
         * Draws a rounded Rectangle
         * 
         * @param rect          Rectangle dimensions
         * @param ellipseWidth  Rectangle corners width
         * @param color         color
         * */
        public function drawRoundRect ( rect:Rectangle, ellipseWidth:int, color:uint ):void
        {
            var arc:Number = 4/3 * (Math.sqrt(2) - 1);
            var xc:Number = rect.x+rect.width-ellipseWidth;
            var yc:Number = rect.y+ellipseWidth;
            line( rect.x+ellipseWidth, rect.y, xc, rect.y, color );
            cubicBezier(xc, rect.y, xc + ellipseWidth*arc, yc - ellipseWidth, xc + ellipseWidth, yc - ellipseWidth*arc, xc + ellipseWidth, yc, color);
            xc = rect.x+rect.width-ellipseWidth;
            yc = rect.y+rect.height-ellipseWidth;
            line( xc + ellipseWidth, rect.y+ellipseWidth, rect.x+rect.width, yc, color );
            cubicBezier(rect.x+rect.width, yc, xc + ellipseWidth, yc + ellipseWidth*arc, xc + ellipseWidth*arc, yc + ellipseWidth, xc, yc + ellipseWidth, color);
            xc = rect.x+ellipseWidth;
            yc = rect.y+rect.height-ellipseWidth;
            line( rect.x+rect.width-ellipseWidth, rect.y+rect.height, xc, yc + ellipseWidth, color );
            cubicBezier( xc, yc + ellipseWidth, xc - ellipseWidth*arc, yc + ellipseWidth, xc - ellipseWidth, yc + ellipseWidth*arc, xc - ellipseWidth, yc, color );
            xc = rect.x+ellipseWidth;
            yc = rect.y+ellipseWidth;
            line( xc - ellipseWidth, rect.y+rect.height-ellipseWidth, rect.x, yc, color );
            cubicBezier(rect.x, yc, xc - ellipseWidth, yc - ellipseWidth*arc, xc - ellipseWidth*arc, yc - ellipseWidth, xc, yc - ellipseWidth, color);
        }

        /**
         * Draws a Quadratic Bezier Curve (equivalent to a DisplayObject's graphics#curveTo)
         * 
         * @param x0            x position of first anchor
         * @param y0            y position of first anchor
         * @param x1            x position of control point
         * @param y1            y position of control point
         * @param x2            x position of second anchor
         * @param y2            y position of second anchor
         * @param c             color
         * @param resolution    [optional] determines the accuracy of the curve's length (higher number = greater accuracy = longer process)
         * */
        public function quadBezier ( anchorX0:int, anchorY0:int, controlX:int, controlY:int, anchorX1:int, anchorY1:int, c:Number, resolution:int = 3):void
        {   
            var ox:Number = anchorX0;
            var oy:Number = anchorY0;
            var px:int;
            var py:int;
            var dist:Number = 0;

            var inverse:Number = 1 / resolution;
            var interval:Number;
            var intervalSq:Number;
            var diff:Number;
            var diffSq:Number;

            var i:int = 0;

            while( ++i <= resolution )
            {
                interval = inverse * i;
                intervalSq = interval * interval;
                diff = 1 - interval;
                diffSq = diff * diff;

                px = diffSq * anchorX0 + 2 * interval * diff * controlX + intervalSq * anchorX1;
                py = diffSq * anchorY0 + 2 * interval * diff * controlY + intervalSq * anchorY1;

                dist += Math.sqrt( ( px - ox ) * ( px - ox ) + ( py - oy ) * ( py - oy ) );

                ox = px;
                oy = py;
            }

            //approximates the length of the curve
            var curveLength:int = dist;
            inverse = 1 / curveLength;

            var lastx:int=anchorX0;
            var lasty:int=anchorY0;

            i = -1;
            while( ++i <= curveLength )
            {
                interval = inverse * i;
                intervalSq = interval * interval;
                diff = 1 - interval;
                diffSq = diff * diff;

                px = diffSq * anchorX0 + 2 * interval * diff * controlX + intervalSq * anchorX1;
                py = diffSq * anchorY0 + 2 * interval * diff * controlY + intervalSq * anchorY1;

                line(lastx,lasty,px,py,c);
                //aaLine(lastx, lasty, px, py, c);
                lastx = px;
                lasty = py;
            }
        }

        /**
         * Draws a Cubic Bezier Curve
         * 
         * TODO: Determine whether x/y params would be better named as anchor/control
         * 
         * @param x0            x position of first anchor
         * @param y0            y position of first anchor
         * @param x1            x position of control point
         * @param y1            y position of control point
         * @param x2            x position of second control point
         * @param y2            y position of second control point
         * @param x3            x position of second anchor
         * @param y3            y position of second anchor
         * @param c             color
         * @param resolution    [optional] determines the accuracy of the curve's length (higher number = greater accuracy = longer process)
         * */
        public function cubicBezier ( x0:int, y0:int, x1:int, y1:int, x2:int, y2:int, x3:int, y3:int, c:Number, resolution:int = 5 ):void
        {
            var ox:Number = x0;
            var oy:Number = y0;
            var px:int;
            var py:int;
            var dist:Number = 0;

            var inverse:Number = 1 / resolution;
            var interval:Number;
            var intervalSq:Number;
            var intervalCu:Number;
            var diff:Number;
            var diffSq:Number;
            var diffCu:Number;
            var i:int = 0;

            while( ++i <= resolution )
            {
                interval = inverse * i;
                intervalSq = interval * interval;
                intervalCu = intervalSq * interval;
                diff = 1 - interval;
                diffSq = diff * diff;
                diffCu = diffSq * diff;

                px = diffCu * x0 + 3 * interval * diffSq * x1 + 3 * x2 * intervalSq * diff + x3 * intervalCu;
                py = diffCu * y0 + 3 * interval * diffSq * y1 + 3 * y2 * intervalSq * diff + y3 * intervalCu;

                dist += Math.sqrt( ( px - ox ) * ( px - ox ) + ( py - oy ) * ( py - oy ) );

                ox = px;
                oy = py;
            }

            //approximates the length of the curve
            var curveLength:int = dist;
            inverse = 1 / curveLength;

            var lastx:int=x0;
            var lasty:int=y0;

            i = -1;

            while( ++i <= curveLength )
            {
                interval = inverse * i;
                intervalSq = interval * interval;
                intervalCu = intervalSq * interval;
                diff = 1 - interval;
                diffSq = diff * diff;
                diffCu = diffSq * diff;

                px = diffCu * x0 + 3 * interval * diffSq * x1 + 3 * x2 * intervalSq * diff + x3 * intervalCu;
                py = diffCu * y0 + 3 * interval * diffSq * y1 + 3 * y2 * intervalSq * diff + y3 * intervalCu;

                line(lastx,lasty,px,py,c);
                lastx = px;
                lasty = py;
            }
        }

        // ------------------------------------------------
        //
        // ---o private static methods
        //
        // ------------------------------------------------

        /**
        * Draw an AA pixel
        */
        private function setAAPixel (x:Number, y:Number, c:Number, roundX : Boolean = false, roundY : Boolean = false):void
        {   
            var xpos    : Number = Math.floor(x);
            var ypos    : Number = Math.floor(y);
            var xA      : Number = x - xpos;
            var yA      : Number = y - ypos;
            if (!roundX && !roundY)
            {
                drawAlphaPixel(xpos     , ypos      , (1 - xA) * (1 - yA)   , c);
                drawAlphaPixel(xpos + 1 , ypos      , xA * (1 - yA)         , c);
                drawAlphaPixel(xpos     , ypos + 1  , (1 - xA) * yA         , c);
                drawAlphaPixel(xpos + 1 , ypos + 1  , xA * yA               , c);
            }
            else if (roundX && !roundY)
            {
                drawAlphaPixel(xpos     , ypos      , (1 - yA)              , c);
                drawAlphaPixel(xpos     , ypos + 1  , yA                    , c);
            }
            else if (roundY && !roundX)
            {
                drawAlphaPixel(xpos     , ypos      , (1 - xA)              , c);
                drawAlphaPixel(xpos + 1 , ypos      , xA                    , c);
            }
            else if (roundX && roundY)
            {
                setPixel32(xpos , ypos  , c);
            }
        }

        /**
        * Draw an alpha32 pixel
        */
        private function drawAlphaPixel ( x:int, y:int, a:Number, c:Number, bg : int = -1 ):void
        {   
            //var g:uint = getPixel32(x,y);
            var g : int = 0xff000000;

            var r0:uint = ((g & 0x00FF0000) >> 16);
            var g0:uint = ((g & 0x0000FF00) >> 8);
            var b0:uint = ((g & 0x000000FF));

            var r1:uint = ((c & 0x00FF0000) >> 16);
            var g1:uint = ((c & 0x0000FF00) >> 8);
            var b1:uint = ((c & 0x000000FF));

            var ac:Number = 0xFF;
            var rc:Number = r1*a+r0*(1-a);
            var gc:Number = g1*a+g0*(1-a);
            var bc:Number = b1*a+b0*(1-a);

            var n:uint = (ac<<24)+(rc<<16)+(gc<<8)+bc;
            setPixel32(x,y,n);
        }

        /**
        * Check a triangle line
        */
        private function checkLine ( o:Array, x:int, y:int, c:int, r:Rectangle ):void
        {
            if (o[y])
            {
                if (o[y]>x)
                {
                    r.width=o[y]-x;
                    r.x=x;
                    r.y=y;
                    fillRect(r,c);
                }else
                {
                    r.width=x-o[y];
                    r.x=o[y];
                    r.y=y;
                    fillRect(r,c);
                }
            }else
            {
                o[y]=x;
            }
        }

        /**
        * Special line for filled triangle
        */
        private function lineTri ( o:Array, x0:int, y0:int, x1:int, y1:int, c:Number ):void
        {
            var steep:Boolean= (y1-y0)*(y1-y0) > (x1-x0)*(x1-x0);
            var swap:int;

            if (steep)
            {
                swap=x0; x0=y0; y0=swap;
                swap=x1; x1=y1; y1=swap;
            }

            if (x0>x1)
            {
                x0^=x1; x1^=x0; x0^=x1;
                y0^=y1; y1^=y0; y0^=y1;
            }

            var deltax:int = x1 - x0
            var deltay:int = (y1 - y0) < 0 ? -(y1 - y0) : (y1 - y0);
            var error:int = 0;
            var y:int = y0;         
            var ystep:int = y0<y1 ? 1 : -1;
            var x:int = x0;
            var xend:int = x1-(deltax>>1);
            var fx:int = x1;
            var fy:int = y1;
            var px:int = 0;
            r.x = 0;
            r.y = 0;
            r.width = 0;
            r.height = 1;

            while (x++<=xend)
            {
                if (steep)
                {
                    checkLine(o,y,x,c,r);
                    if (fx != x1 && fx != xend)
                        checkLine(o,fy,fx+1,c,r);
                }

                error += deltay;
                if ((error<<1) >= deltax)
                {
                    if (!steep)
                    {
                        checkLine(o,x-px+1,y,c,r);
                        if (fx!=xend) 
                            checkLine(o,fx+1,fy,c,r);
                    }
                    px = 0;
                    y += ystep;
                    fy -= ystep;
                    error -= deltax; 
                }
                px++;
                fx--;
            }

            if (!steep)
                checkLine(o,x-px+1,y,c,r);
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:56:36.100

看起来只是一个错字或复制/粘贴错误。import 语句不应该在你的类定义中重复：

```
package views 
{
    import flash.display.Bitmap;
    import flash.geom.Point;
    import views.Canvas.Raster; // Yes
    /**
     * ...
     * @author Arthur Wulf White
     */
    public class RasterView extends Bitmap
    {   
        import views.Canvas.Raster // No 
```

另外，避免使用与类同名的访问器：

```
 public function get Raster():Raster  // Call this function get MyRaster or similar
    {
        return Raster(bitmapData);
    } 
```

代码突出显示是您的朋友。任何时候，除了构造函数之外的属性或函数名称在 Cyan 中亮起时，就意味着您正在使用现有的类名称，这可能会导致问题。

# c# - 从 for 循环更新进度条

> ID：12617826
> 
> 赞同：5
> 
> 时间：2012-09-27T09:08:15.580
> 
> 标签：c#, winforms, progress-bar

我正在 for 循环中处理一些 xml 文件，根据已处理的文件数，我想显示进度条。假设目录中有 100 个文件，并且文件正在循环处理中，我想根据 for 循环的当前计数更新进度条。
请建议..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:11:44.913

使用 Background Worker 处理 100 个文件，每次迭代调用 ReportProgress，连接到 backgroundworker 的 Process changed 事件并相应地更新进度条。

您可以查看[本教程](http://www.dreamincode.net/forums/topic/112547-using-the-backgroundworker-in-c#/)以获取详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T09:11:55.547

看看[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)课堂，特别是在[`ProgressChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)活动中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T09:11:59.573

您应该将 BackgroundWorker 与 ProgressBar 控件结合使用。这是一个简单的[例子](http://www.codeproject.com/Tips/83317/BackgroundWorker-and-ProgressBar-demo)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-24T09:00:20.440

```
for(int i=1;i<linecount;i++)
{
 progressBar1.Value = i * progressBar1.Maximum / linecount;  //show process bar counts
 LabelTotal.Text = i.ToString() + " of " + linecount; //show number of count in lable
 int presentage = (i * 100) / linecount;
 LabelPresentage.Text = presentage.ToString() + " %"; //show precentage in lable
 Application.DoEvents(); keep form active in every loop
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-10T14:48:51.477

> Set Minimum and Maximum and then use the `Step` property with the `PerformStep` method to increment the value of the ProgressBar.

```
 progressBar1.Step = 1;
 int part=someList.Count / 100;
 ....
 .... 
 //Inside the loop 

  if (loop_counter % part == 0)
  {
       progressBar1.PerformStep();
  } 
```

[See](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.progressbar?view=netcore-3.1)

# gradle - Gradle 1.2：资源sourceSets下的排除目录

> ID：12617827
> 
> 赞同：12
> 
> 时间：2012-09-27T09:08:23.280
> 
> 标签：gradle

我有`src/main/resources/certs/test`一个外部库所需的开发相关目录。这有一些生产构建中不需要的证书文件。

目前，我使用以下块排除该目录下的所有内容`build.gradle`：

```
sourceSets {
    main {
        resources {
            exclude '**/test/*'
        }
    }
} 
```

这可以很好地工作，但会留下丑陋的空目录`test`。在最终战争中不包含此目录的选项是什么？

我试过 exclude `'**/test'`，但它根本不起作用。

我使用战争插件和 Gradle 1.2

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-28T02:47:18.067

使用 Gradle 1.1，这对我有用：

```
apply plugin: 'war'

sourceSets {
    main {
        resources {
            exclude '**/test/*'
            exclude 'certs/test'
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-10T18:55:42.450

我对 JAR 文件中的生产文件有类似的问题（尽管我的不是测试文件）。我用以下方法解决了它：

```
jar {
    exclude ("DIRECTORY-TO-EXCLUDE/**")
} 
```

例如

```
jar {
    exclude ("test/**")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:14:04.083

一个常见的项目布局是将测试文件放在`test`源集下，这样您就不必将它们从`main`源集中排除。

从[Gradle 文档](http://www.gradle.org/docs/current/userguide/java_plugin.html)中，默认的项目布局是这样的：

```
src/main/java       Production Java source
src/main/resources  Production resources
src/test/java       Test Java source
src/test/resources  Test resources 
```

# asp.net - iframe 无法运行

> ID：12617834
> 
> 赞同：0
> 
> 时间：2012-09-27T09:08:35.720
> 
> 标签：asp.net, visual-studio, html

我想使用`iFrame`以下方式显示视频：

```
<tr>
            <td class="style3" style="width: 50%">
            </td>
            <td class="style3" style="width: 50%">

               <iframe id="frame1" src="http://www.youtube.com/watch?v=3Kk-yZ7VpeA" runat="server" style="height: 222px; width: 482px"  ></iframe>

            </td>
        </tr> 
```

但它不能在运行时运行。我缺少什么特定代码或代码是否有任何错误。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:21:06.607

对于 youtube 视频，您必须在 iframe 中使用以下嵌入链接：

```
http://www.youtube.com/embed/#VIDEO_ID# 
```

所以会是

```
src="http://www.youtube.com/embed/3Kk-yZ7VpeA" 
```

另见[http://jsfiddle.net/QsQEP/](http://jsfiddle.net/QsQEP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:21:40.423

现在它的工作..我已经改变了网址并开始工作。不知道基本是什么问题。总之谢谢

# asp.net-mvc-3 - ASP.NET MVC“比较”验证无法正常工作

> ID：12617835
> 
> 赞同：1
> 
> 时间：2012-09-27T09:08:41.877
> 
> 标签：asp.net-mvc-3, data-annotations

我对密码进行了比较验证 - 确认密码字段以及服务器验证以检查密码是否符合最少字符数。

看法：

```
@Html.PasswordFor(model => model.password)
@Html.PasswordFor(model => model.repeatPassword) 
```

模型：

```
 public class Model_Clerk
    {            
        public int clerkID { get; set; }    

        public string password { get; set; }

        [Compare("password", ErrorMessage = "Error comparing password and password confirm values")]                        
        public string repeatPassword { get; set; }

    } 
```

控制器动作方法：

```
 public ActionResult SaveClerk(Model_Clerk model)
    {            
        //Password minimum lenght
        if (!string.IsNullOrEmpty(model.password) && model.password.Trim().Length < 5)
        {
            ModelState.AddModelError(model.password, "Password must be at least 5 characters long");                 
        }

        if (ModelState.IsValid)
        {
            //Save logic here...
        }
        else
        {
            return PartialView("EditClerks", model);
        }
    } 
```

执行服务器验证时，警告消息会正确显示，之后比较验证将不再起作用。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:31:25.930

根据我们的评论，我认为实际上最好的解决方案是编写自己的 DataAnnotation。

就像是`[CompareIf("password", ErrorMessage = "Error comparing password and password confirm values")]`

您的 DataAnnotation 代码必须检查密码是否为空且有效，然后比较这两个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-22T15:55:55.480

今天碰到这个问题，写了一个`CompareIf`自定义属性。`RequiredIf` [它与(covered here)](https://stackoverflow.com/questions/7390902/requiredif-conditional-validation-attribute)几乎相同，但继承`CompareAttribute`并接受`otherProperty`作为第三个参数。

```
using System.ComponentModel.DataAnnotations;

public class CompareIfAttribute : CompareAttribute
{
    private readonly string _dependentProperty;
    private readonly object _targetValue;

    public CompareIfAttribute(string dependentProperty, object targetValue, string otherProperty) : base(otherProperty)
    {
        _dependentProperty = dependentProperty;
        _targetValue = targetValue;
    }

    /// <summary>
    ///     Returns if the given validation result is valid. It checks if the RequiredIfAttribute needs to be validated
    /// </summary>
    /// <param name="value">Value of the control</param>
    /// <param name="validationContext">Validation context</param>
    /// <returns></returns>
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var field = validationContext.ObjectType.GetProperty(_dependentProperty);

        if (field != null)
        {
            var dependentValue = field.GetValue(validationContext.ObjectInstance, null);

            if (dependentValue == null && _targetValue == null || dependentValue?.ToString() == _targetValue?.ToString())
            {
                var test = base.IsValid(value, validationContext);

                if (test != ValidationResult.Success)
                {
                    return test;
                }
            }

            return ValidationResult.Success;
        }

        throw new ValidationException($"CompareIf Dependant Property {_dependentProperty} does not exist");
    }
} 
```

前两个参数是依赖属性和目标值，第三个是要比较的属性。用法：

```
 public bool CandidateHasNoLegalMiddleName { get; set; }

    public string CandidateMiddle { get; set; }

    [CompareIf(nameof(CandidateHasNoLegalMiddleName), false, nameof(CandidateMiddle)]
    public string ConfirmMiddle { get; set; } 
```

这将允许仅在条件为真时进行比较。

# javascript - 保存 pdf 并以 编程方式关闭它

> ID：12617841
> 
> 赞同：0
> 
> 时间：2012-09-27T09:09:03.827
> 
> 标签：javascript, automation, acrobat

我正在使用 Selenium Webdriver 自动化一个基于 Web 的应用程序。打开 Acrobat reader 会生成 PDF 格式的报告。我必须将该 PDF 保存到特定位置，然后关闭 pdf。那么如何通过自动化来完成。我尝试在网上搜索，发现这可以使用 VB 脚本完成，但需要 Adob​​e 专业版。此外，生成的报告没有特定的标题。这一直在变化。这可以使用 javascript 完成吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:13:03.827

可以在 JS 中生成一些 PDF，试试[http://snapshotmedia.co.uk/blog/jspdf](http://snapshotmedia.co.uk/blog/jspdf)

它将返回一个 base64 字符串或 URI。然后，您可以将访问者重定向到 PDF（使用此 URI）或在文件中记下 base64。

# php - 无法在 mac os x leopard 上为 php5 安装 tidy html 扩展

> ID：12617842
> 
> 赞同：1
> 
> 时间：2012-09-27T09:09:07.740
> 
> 标签：php, installation, pecl, htmltidy

我正在尝试在 mac os x leopard 上为 php5 安装 pecl tidy 扩展。我从

[http://pecl.php.net/package/tidy](http://pecl.php.net/package/tidy)

1.2版

我运行 phpize，然后配置并制作命令。在 make 命令我得到这个错误：/usr/include/tidy/platform.h:530: error: duplicate 'unsigned'</p>

```
/usr/include/tidy/platform.h:530: warning: useless type name in empty declaration
/Users/paganotti/Desktop/tidyphp/tidy-1.2/tidy-1.2/tidy.c: In function ‘zm_info_tidy’:
/Users/paganotti/Desktop/tidyphp/tidy-1.2/tidy-1.2/tidy.c:387: warning: cast from pointer to integer of different size
lipo: can't open input file: /var/tmp//ccUDFWws.out (No such file or directory)
make: *** [tidy.lo] Error 1 
```

如何在 mac os x leopard 上安装 tidy php 扩展？是否有一个 tidy.so 库已经编译，所以我只安装而不编译它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:16:46.073

从 macports 获取 php5-tidy 以获得适用于 MacOSX 的版本。

您可以从这里获得 macports：http: [//www.macports.org](http://www.macports.org) ，一旦安装，您只需执行“port install php5-tidy”

或者，您可以使用 HomeBrew [http://mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)

# scala - 在 Play 中使用 Scalaz7

> ID：12617844
> 
> 赞同：2
> 
> 时间：2012-09-27T09:09:20.847
> 
> 标签：scala, playframework-2.0, scalaz7

我在使用 Scalaz7 和 Play 时遇到了一些麻烦。现在我正在使用标准的 Play 发行版和 Scala 2.9.1 和 scalaz-core 7.0-SNAPSHOT。它位于存储库[http://repo.typesafe.com/typesafe/repo/](http://repo.typesafe.com/typesafe/repo/)中，这似乎不是官方的。我不确定这一点，但已经有[http://repo.typesafe.com/typesafe/snaphots/](http://repo.typesafe.com/typesafe/snaphots/)和[http://repo.typesafe.com/typesafe/releases/](http://repo.typesafe.com/typesafe/releases/)我不知道**repo**是否得到官方认可并得到维护。它现在已经起来了，但几天前它似乎消失了。

在**快照**存储库中，我看到了 scalaz-core 7.0-M3，但仅适用于 Scala 2.9.2。我什至不确定 7.0-SNAPSHOT 和 7.0-M3 之间的哪一个是 scalaz 的最新版本，尽管我发现的大多数博客文章和文档似乎都引用了 7.0-M3 版本。

所以，考虑到我正在开发一个使用 Scalaz 的 Play 应用程序，现在我花了一些时间学习 scalaz 7，回到 scalaz 6 似乎太麻烦了，

> 在游戏中使用 Scalaz 7 的正确方法是什么？我应该像现在一样去非官方回购，还是将项目升级到 Scala 2.9.2？是玩！已经支持 2.9.2？如果没有，我应该如何升级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:35:50.680

因为 play2 使用的是 scala 2.9.1，所以默认情况下 sbt 会尝试获取 2.9.1 scalaz 库 jar。但是，由于 scalaz7 仅针对 2.9.2 发布，您需要执行以下操作以强制它下载 2.9.2 版本。Scala 2.9.1 和 2.9.2 足够兼容，可以正常工作。

```
"org.scalaz" % "scalaz-core_2.9.2" % "7.0.0-M4" 
```

# android - Android Eclipse - 如何让页面向下滚动并显示更多文本

> ID：12617845
> 
> 赞同：0
> 
> 时间：2012-09-27T09:09:29.320
> 
> 标签：android, android-layout, text, scroll, android-scrollview

我需要一些关于我在几周前使用在线源代码和一些小游戏创建的当代艺术画廊应用程序的帮助。一切正常，但现在我们正在向关于艺术家的页面添加更多艺术家，但出现了问题。当我添加更多文本时，它会聚在一起并尝试将其全部放入一个屏幕中。相关代码如下。我认为布局设置很简单，但似乎并非如此。

如果有人可以提供帮助，我将不胜感激。

谢谢，乔纳森

如果您需要下载它，可以在 Flaneur Art Gallery 下的 Google Play 上下载。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

 <Button
 android:id="@+id/buttonBack"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="Back"/>

    <TextView
        android:layout_width="316dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.03"
        android:gravity="top|left"

        android:text="About the artists:"
        android:textSize="15dp" />

      <TextView
        android:layout_width="316dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.03"
        android:gravity="top|left"

        android:text="RUTH SCOTT is painter who has finally been released from a desk job and can't wait to make the most of her abilities. \nARTISTX is a conceptual artist with an interest in food.\nMELANIE PHELAN creates bold and seductive pieces with a sense of strength, positivity and humour, based on the aesthetic ideal of women portrayed in mass media."
        android:textSize="12dp" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:13:20.050

//尝试使用lines或maxlines并删除`LayoutWeight` 使用`android:maxEms="30"`

```
<TextView
        android:layout_width="316dp"
        android:layout_height="wrap_content"
        android:maxEms="30"
        android:gravity="top|left"
        android:lines="5"

        android:text="RUTH SCOTT is painter who has finally been released from a desk job and can't wait to make the most of her abilities. \nARTISTX is a conceptual artist with an interest in food.\nMELANIE PHELAN creates bold and seductive pieces with a sense of strength, positivity and humour, based on the aesthetic ideal of women portrayed in mass media."
        android:textSize="12dp" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:13:56.820

在线性布局之前添加滚动视图：

```
 <?xml version="1.0" encoding="utf-8"?>
   <ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/edittext1"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="25dp"
    android:background="@android:drawable/editbox_background_normal" >

      <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:orientation="vertical" >

<Button
 android:id="@+id/buttonBack"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="Back"/>
<TextView
    android:layout_width="316dp"
    android:layout_height="wrap_content"
    android:layout_weight="0.03"
    android:gravity="top|left"
    android:text="About the artists:"
    android:textSize="15dp" />

  <TextView
    android:layout_width="316dp"
    android:layout_height="wrap_content"
    android:layout_weight="0.03"
    android:gravity="top|left"

    android:text="RUTH SCOTT is painter who has finally been released from a desk job and can't wait to make the most of her abilities. \nARTISTX is a conceptual artist with an interest in food.\nMELANIE PHELAN creates bold and seductive pieces with a sense of strength, positivity and humour, based on the aesthetic ideal of women portrayed in mass media."
    android:textSize="12dp" />
   </LinearLayout>    
</ScrollView> 
```

最后结束滚动视图标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:16:06.917

您可以将文本视图放在 a`ScrollView`中，如下所示。这样，您将在屏幕上固定按钮和标题标签，并在其下方滚动“关于”文本视图，占据屏幕的其余部分。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

     <Button
     android:id="@+id/buttonBack"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:text="Back"/>

    <TextView
        android:layout_width="316dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.03"
        android:gravity="top|left"

        android:text="About the artists:"
        android:textSize="15dp" />

      <ScrollView
        android:layout_width="316dp"
        android:layout_height="fill_parent">

          <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="top|left"

            android:text="RUTH SCOTT is painter who has finally been released from a desk job and can't wait to make the most of her abilities. \nARTISTX is a conceptual artist with an interest in food.\nMELANIE PHELAN creates bold and seductive pieces with a sense of strength, positivity and humour, based on the aesthetic ideal of women portrayed in mass media."
            android:textSize="12dp" />

    </ScrollView>

</LinearLayout> 
```

您可能需要调整重量和宽度/高度以获得所需的精确视图。

# macos - 端口上的 Cocoa 监控数据包

> ID：12617847
> 
> 赞同：2
> 
> 时间：2012-09-27T09:09:38.803
> 
> 标签：macos, cocoa, packet-sniffers, packets, kernel-extension

我想监视 Mac OS X 中特定端口上的数据包。能够读取它们的内容并有时更改它们的内容（如果可能的话）。我想知道是否可以通过编写 KEXT 或者我可以在应用程序中执行此操作并立即显示结果。我将不胜感激有关我可以用来实现这一目标的库和方法的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:30:57.903

“监控包”是什么意思？

如果您的意思是“观察发送到或来自特定 TCP 或 UDP 端口的数据包”或“在特定网络接口上发送或接收哪些数据包”，您将使用[pcap 库](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/pcap.3pcap.html)，就像在其他 UN*Xes 上一样。libpcap/WinPcap 是 Wireshark 和 tcpdump 使用的库；在 OS X 上，它使用的底层内核机制是 BPF（伯克利包过滤器），它内置在 XNU 中（它是开源的 - 请参阅 XNU 源代码中的`bsd/net/bpf.c`和`bsd/net/bpf_filter.c`文件以及它们包含的头文件）并且不不需要kext。（Wireshark 没有自己的 kext；它使用 libpcap/WinPcap，因此它可以在 Linux 和 OS X 和 *BSD 和 Solaris 和 HP-UX 和 AIX 和 Tru64 UNIX 和 IRIX 等等，以及在 Windows 上运行，如果WinPcap 已安装，因此，在 OS X 和 *BSD 上，它最终使用 BPF。）

除 Linux 外，Libpcap/WinPcap 不允许您使用一个“句柄”捕获所有接口；您必须使用`pcap_findalldevs()`查找所有当前可用的接口，然后为每个接口打开单独的句柄。如果“端口”是指“网络端口”，那么一个“端口”是您的以太网端口，另一个是您的 Wi-Fi 适配器，您必须单独打开要捕获的所有“端口”。

如果“端口”是指 TCP 或 UDP 端口，并且您只想查看进出特定端口的流量，则必须指定“过滤器”表达式，使用 将其转换为“BPF 代码” `pcap_compile()`，然后使其特定 libpcap/WinPcap 句柄的过滤器，带有`pcap_setfilter()`.

如果您想为 pcap 使用 Cocoa 包装器，我不久前进行的 Google 搜索发现了[packetniffer](https://github.com/nark/packetsniffer)和[CapKit](http://mac.softpedia.com/get/Developer-Tools/CapKit.shtml)；我没有使用过其中任何一个，所以我不能推荐其中一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:52:58.290

您是否看过[Apple 关于网络内核扩展的概述文档](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/NKEConceptual/about/about.html)？那应该让你开始。

[本书](http://www.apress.com/9781430235361-4892)的可下载源代码还包含一些网络堆栈不同级别的包过滤示例 NKE。（这本书当然也在第 13 章中详细解释了这些东西）

您还可以重新使用现有的开源 kext 进行纯监控：Wireshark 应用程序已经这样做了，您应该能够连接到它的 kext。对于实际修改数据包流，您可能必须纯粹在内核中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:58:31.860

因为 OS X 和 iOS 是 Unix 而 Objective-C 是 C，所以答案是，“就像你在 C 中的 Unix 上做的一样”——Cocoa 是高级的，而你想做的是低级的。我在 SO 上找不到问题，但有人建议查看[MenuMeters](http://www.ragingmenace.com/software/menumeters/)的源代码作为网络监控的示例。

# javascript - 使用Edge的视差/滚动效果？

> ID：12617848
> 
> 赞同：0
> 
> 时间：2012-09-27T09:09:40.463
> 
> 标签：javascript, jquery, html, flash, adobe-edge

嗨，我基本上需要为客户重新创建它（https://victoriabeckham.landrover.com/INT），我正在努力想一个解决方案来为工作提供时间表（http://stackoverflow.com/问题/12461710/jquery-parallax-scrolling-effect-multi-directional)

有没有想过我可以使用 Flash 或 Edge 构建动画并在水平滚动时触发播放，但我不确定在反转滚动时如何（或是否可能）反转播放？

有没有人有任何想法/想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:08:35.037

查看 steller.js 以获得一个不错的插件，它必须满足您的需求：

[http://markdalgleish.com/projects/stellar.js/demos/](http://markdalgleish.com/projects/stellar.js/demos/)

# .net - 检查 WPF 属性设置器中的值是否实际更改？

> ID：12617859
> 
> 赞同：1
> 
> 时间：2012-09-27T09:10:06.167
> 
> 标签：.net, wpf

在 WPF 中，在调用 NotifyPropertyChanged 之前检查模型属性的值是否会在属性设置器中实际更改是最佳实践吗？

例如：

```
 private string foobar;

    public string Foobar
    {
        get
        {
            return this.foobar;
        }

        set
        {
            if (value != this.foobar)
            {
                this.foobar = value;
                this.NotifyPropertyChanged("Foobar");
            }
        }
    } 
```

另一种方法是不检查，每次只调用 NotifyPropertyChanged：

```
 private string foobar;

    public string Foobar
    {
        get
        {
            return this.foobar;
        }

        set
        {
            this.foobar = value;
            this.NotifyPropertyChanged("Foobar");
        }
    } 
```

我已经在代码示例中看到了这两种样式。如果有的话，每种方法的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T09:11:29.027

我总是进行检查，因为该事件似乎暗示应该发生实际变化。

（还可以防止不必要的更新）

# sql - 如何添加我标记为粗体的列并在总时间或新列中获得结果

> ID：12617862
> 
> 赞同：-2
> 
> 时间：2012-09-27T09:10:14.150
> 
> 标签：sql, sql-server, sql-server-2008

```
Date          Event   eventid     username       starttime     Endtime   Remark   Totaltime
----------------------------------------------------------------------------------------
05/30/2012  Break Out   0      Premnath Nair    **13:06:06**   13:06:06     NULL  00:00:00
05/30/2012  Break In    1      Premnath Nair    **13:22:24**   13:22:24     NULL  00:00:00
05/30/2012   NULL   255    Premnath Nair       08:54:49    19:21:02   normal  10:26:13
05/31/2012   NULL   255    Premnath Nair       07:52:55    18:50:45   normal  10:57:50
06/01/2012   NULL   NULL       NULL          NULL       NULL        NULL
06/02/2012   NULL   NULL        NULL         NULL       NULL        NULL
06/03/2012  Break Out   0      Premnath Nair       13:32:55 13:32:55    NULL  00:00:00
06/03/2012  Break In    1      Premnath Nair       13:43:11 13:43:11    NULL  00:00:00
06/03/2012  Out Duty    2   Premnath Nair   12:03:52    12:03:52    NULL  00:00:00 
```

这是来自数据库的数据

我通过这个查询得到了总时间

```
convert (varchar(8), convert(datetime, endtime, 8) - convert(datetime, starttime, 8), 108)  as totaltime 
```

需要知道如何获得总休息时间需要添加休息时间和休息时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:18:44.887

使用 ：

```
select datediff(minute,'11:11:11 PM','11:15:13 PM') 
```

# django - Django-models: Choices,select,widget 如何更改小部件的默认选项

> ID：12617863
> 
> 赞同：0
> 
> 时间：2012-09-27T09:10:14.970
> 
> 标签：django, django-models, django-templates

我对模型有疑问，例如我有

```
fallBack = models.CharField(max_length=100, choices=FALLBACK,  default = 99,blank = True,null = True)
FALLBACK = (
    (u'99','-'),
    (u'standard', u'Standard TPF deactivation/exlusion applies'),
    (u'fallback', u'Fallback script provided'),
    (u'na',u'N/A'),
    (u'other',u'Other'),
    ) 
```

如果我将在模板中使用

```
{% for obj in form.forms %}
    {{obj.fallBack}}
{% endfor %} 
```

它会返回这样的东西

```
<select name="form-0-fallBack" id="id_form-0-fallBack">
    <option value="">---------</option>
    <option value="99" selected="selected">-</option>
    <option value="standard">Standard TPF deactivation/exlusion applies</option>
    <option value="fallback">Fallback script provided</option>
    <option value="na">N/A</option>
    <option value="other">Other</option>
</select> 
```

但我想做这样的事情：

```
<select **onchange="javascript:make()"** name="form-0-fallBack" id="id_form-0-fallBack">
    <option value="">---------</option>
    <option value="99" selected="selected">-</option>
    <option value="standard">Standard TPF deactivation/exlusion applies</option>
    <option value="fallback">Fallback script provided</option>
    <option value="na">N/A</option>
    <option value="other">Other</option>
</select> 
```

怎么做 ？？我可以在模板中写这个第二个选项而不是 {{obj.fallBack}} 但是我的 formset.is_valid() 不起作用，什么时候我会做这样的事情：

```
1)I will choose from fallBack second option(Standard TPF deactivation/exlusion applies) 
2) submit,
3) I have some error in other place in template 
4) Then my obj.fallBack returning to default option (99 , -) 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:01:44.837

查看 django 文档[`Widgets`](https://docs.djangoproject.com/en/dev/ref/forms/widgets/)

```
widget=forms.Select(attrs={'onchange': 'javascript:make()'}) 
```

这看起来像`ModelForm`，查看如何为[ModelForms指定小部件](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:45:34.887

好的，因此使用此属性创建新字段而不是 charfield

```
widget=forms.Select(attrs={'onchange': 'javascript:make()'}) 
```

感谢帮助

# c# - 将数据表（单独类中的代码）绑定到数据网格并在页面加载 C# ASP.NET 上执行数据表代码

> ID：12617864
> 
> 赞同：1
> 
> 时间：2012-09-27T09:10:16.890
> 
> 标签：c#, asp.net, datagridview, datatable

我想在首次加载 aspx 页面时创建一个数据表。我已放置我的代码以在类文件中创建带有空白行的数据表。下面是创建数据表的代码。

```
public class PaymentDetailsDataTable
{
    public PaymentDetailsDataTable()
    {
        DataTable pventries = new DataTable();

        DataColumn col1 = new DataColumn("col1");
        DataColumn col2 = new DataColumn("col2");
        DataColumn col3 = new DataColumn("col3");
        DataColumn col4 = new DataColumn("col4");
        DataColumn col5 = new DataColumn("col5");
        DataColumn col6 = new DataColumn("col6");
        DataColumn col7 = new DataColumn("col7");
        DataColumn col8 = new DataColumn("col8");
        DataColumn col9 = new DataColumn("col9");

        col1.DataType = System.Type.GetType("System.Int32");
        col2.DataType = System.Type.GetType("System.String");
        col3.DataType = System.Type.GetType("System.String");
        col4.DataType = System.Type.GetType("System.String");
        col5.DataType = System.Type.GetType("System.String");
        col6.DataType = System.Type.GetType("System.String");
        col7.DataType = System.Type.GetType("System.String");
        col8.DataType = System.Type.GetType("System.Double");
        col9.DataType = System.Type.GetType("System.String");

        pventries.Columns.Add(col1);
        pventries.Columns.Add(col2);
        pventries.Columns.Add(col3);
        pventries.Columns.Add(col4);
        pventries.Columns.Add(col5);
        pventries.Columns.Add(col6);
        pventries.Columns.Add(col7);
        pventries.Columns.Add(col8);
        pventries.Columns.Add(col9);

        pventries.Rows.Add();        

    }
} 
```

在我的代码隐藏文件中，我实例化了我的类并尝试按如下方式使用它：

```
 public partial class create_pv  : System.Web.UI.Page 
{
    String conn = WebConfigurationManager.ConnectionStrings["pvconn"].ToString();

    PaymentDetailsDataTable pmd = new PaymentDetailsDataTable();

    protected void Page_Load(object sender, EventArgs e)
    {

        /**/if(!IsPostBack)
            pmd.PaymentDetailsDataTable(); 
            allpventries.DataSource = pmd;
            allpventries.DataBind();
        }
} 
```

现在，当我尝试访问这样的方法时`PaymentDetailsDataTable`，`pmd.PaymentDetailsDataTable()`出现以下错误

```
'PaymentDetailsDataTable' does not contain a definition for 'PaymentDetailsDataTable' and no extension method 'PaymentDetailsDataTable' accepting a first argument of type 'PaymentDetailsDataTable' could be found (are you missing a using directive or an assembly reference?) 
```

如果我将我的方法返回类型（`PaymentDetailsDataTable`）更改为 void，它可以工作，但我稍后想将数据表绑定到网格视图（称为 allpventries），它会带来编译器错误。

如何从代码库位于不同类的数据表中绑定数据网格？稍后我将向数据表添加新行。实现这一目标的替代选择也是可以接受的。

在面向对象编程和 C# ASP.NET 方面非常新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:19:48.413

您正在`DataTable`构造函数中创建一个`PaymentDetailsDataTable`从未分配给任何东西的局部变量。因此，您应该从方法返回 DataTable 或从`DataTable`. 我认为这是您的初衷：

```
public class PaymentDetailsDataTable : DataTable
{
    public PaymentDetailsDataTable()
    {
        DataColumn col1 = new DataColumn("col1");
        DataColumn col2 = new DataColumn("col2");
        DataColumn col3 = new DataColumn("col3");
        DataColumn col4 = new DataColumn("col4");
        DataColumn col5 = new DataColumn("col5");
        DataColumn col6 = new DataColumn("col6");
        DataColumn col7 = new DataColumn("col7");
        DataColumn col8 = new DataColumn("col8");
        DataColumn col9 = new DataColumn("col9");

        col1.DataType = System.Type.GetType("System.Int32");
        col2.DataType = System.Type.GetType("System.String");
        col3.DataType = System.Type.GetType("System.String");
        col4.DataType = System.Type.GetType("System.String");
        col5.DataType = System.Type.GetType("System.String");
        col6.DataType = System.Type.GetType("System.String");
        col7.DataType = System.Type.GetType("System.String");
        col8.DataType = System.Type.GetType("System.Double");
        col9.DataType = System.Type.GetType("System.String");

        this.Columns.Add(col1);
        this.Columns.Add(col2);
        this.Columns.Add(col3);
        this.Columns.Add(col4);
        this.Columns.Add(col5);
        this.Columns.Add(col6);
        this.Columns.Add(col7);
        this.Columns.Add(col8);
        this.Columns.Add(col9);

        this.Rows.Add();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:16:59.427

该类`PaymentDetailsDataTable`应该是返回对象引用的类的子类`DataTable`或在类中定义一个方法。`PaymentDetailsDataTable``DataTable`

```
public class PaymentDetailsDataTable : DataTable
{
    public PaymentDetailsDataTable()
    {
        Columns.Add("Col1", typeof(int));
        Columns.Add("Col2");

        Rows.Add(1, "Foo");
        Rows.Add(2, "Bar");
    }
} 
```

和 page_load 处理程序中的代码，

```
protected void Page_Load(object sender, EventArgs e)
{
  if(!IsPostBack)
   {
      allpventries.DataSource = new PaymentDetailsDataTable();
      allpventries.DataBind();
   }
} 
```

# android - 如何排除显示最近应用程序的我的应用程序屏幕截图

> ID：12617868
> 
> 赞同：3
> 
> 时间：2012-09-27T09:10:26.333
> 
> 标签：android

根据安全问题，我的应用程序屏幕的屏幕截图不应显示在最近的应用程序中。我尝试`android:excludeFromRecents="true"`在清单文件中添加所有活动。但是，最近的应用程序中显示了屏幕截图，可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:58:34.973

`excludeFromRecents`从最近的不包括您需要的内容中排除。尝试设置`FLAG_SECURE`：

```
public class MyActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getWindow().setFlags(LayoutParams.FLAG_SECURE,
                         LayoutParams.FLAG_SECURE);

    setContentView(R.layout.main_layout;
  }
} 
```

# java - 如何在指定目录中创建 tar

> ID：12617872
> 
> 赞同：0
> 
> 时间：2012-09-27T09:10:34.923
> 
> 标签：java, tar

我在目录 /home

如何使用 /home/user/a/b/old/ 中的文件创建 tar *。这个 tar 应该在文件夹中： /home/user/a/b/old/ 并且 tar 应该只包含文件和文件夹 /home/user/a/b/old/ 中的文件和文件夹，*而不是这个文件的完整路径。而且我不能使用命令 cd。这可能吗 ？

这必须从 Java 运行，这就是它有`[java]`标签的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:12:56.340

你的意思是？

```
(
cd /home/user/a/b/old/
tar cvf /tmp/old.tar .
mv /tmp/old.tar .
) 
```

您可能还想使用

```
(
cd /home/user/a/b/old/
tar cjvf /tmp/old.tar.bz2 .
mv /tmp/old.tar.bz2 .
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:26:07.223

我认为你应该尝试这样的事情： `Process p = Runtime.getRuntime().exec(new String[]{"bash","-c","tar cjvf /home/user/a/b/old/ /home/user/a/b/old/"});`

# sugarcrm - 与其他模块交互的新模块

> ID：12617874
> 
> 赞同：0
> 
> 时间：2012-09-27T09:10:39.557
> 
> 标签：sugarcrm

我正在尝试在 Sugar CRM CE 中创建我的第一个自定义模块。

我在“/modules”文件夹中创建了一个新文件夹，然后放置核心文件，以便模块在顶部模块菜单栏中显示为新选项卡。

起初我希望这个模块创建和搜索联系人数据，但我不知道在哪里编写代码。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:04:42.040

为什么不在产品中使用 Module Builder 来构建模块？

# css - Facebook 自定义样式：可见性隐藏作品，显示无作品

> ID：12617875
> 
> 赞同：0
> 
> 时间：2012-09-27T09:10:39.410
> 
> 标签：css, facebook

我正在尝试编写一个自定义样式表来重命名左侧边栏中的 Facebook 群组。我不是组的管理员，不能更改名称，我只想在那里阅读对我有意义的东西，尤其是当许多组名称以相同的单词开头并且在侧边栏列表中显示相同时。

我尝试做的是隐藏原始名称并插入我的自定义名称。

我可以插入我的自定义组名，例如：

```
#navItem_group_136453550474635 a div:nth-child(2):after{
content: "Custom name";
} 
```

不幸的是，我不能用“display:none”“缩小”原始名称的 div，只能隐藏它，这样实际上有一些空白空间将我的自定义名称推到第二行。

这有效：

```
#navItem_group_162405550444366 a div div{
visibility: hidden;
} 
```

这不起作用：

```
#navItem_group_162405550444366 a div div{
display: none;
} 
```

"display:none" 不起作用，大概是因为 div 已经有了`display:block`，但是为什么我的浏览器样式表没有覆盖它呢？

我在 OS 10.8 下使用 safari。？，但我相信这不应该有所作为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:53:38.130

> “display:none”不起作用，大概是因为 div 已经有 display:block，但是为​​什么我的浏览器样式表没有覆盖它呢？

您的规则是否与 Facebook 用于格式化此元素的规则具有相同的特异性？

您是否尝试添加`!important`到您的声明中，以覆盖 Facebook 自己的样式表的格式？

# jquery - 将序列化的表单值发送到 php

> ID：12617878
> 
> 赞同：0
> 
> 时间：2012-09-27T09:10:54.597
> 
> 标签：jquery, ajax, forms

我有这个带有单选按钮的表单：

```
<form>
    <input type="radio" name="try" value="radio1" checked="checked" id="r1"/>
    <label for="r1">radio1</label>

    <input type="radio" name="try" value="radio2" checked="checked" id="r2"/>
    <label for="r2">radio2</label>
</form> 
```

我有这个 jquery 代码来发送值：

```
<script>
function sendValues() {
    var str = $("form").serialize();
    $.ajax({
        type: "Get",
        url: "samepage.php",
        data: str,
        succes : function(data) {
            result = data;
        } 
    }); 
 }
$(":radio").click(sendValues);
sendValues();
</script> 
```

使用萤火虫，如果我选择值为 radio1 的单选按钮，我可以设置代码返回 /sampage?try=radio1。

然后我尝试将此值发送到 php 变量：

```
$value = $_GET['try']; 
```

但是 echo $value 什么也没提供。因此，我的问题是，如何将带有 jquery 的序列化值发送到 php 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:16:17.247

```
<form>
    <input type="radio" name="try" value="radio1" checked="checked" id="r1"/>
    <label for="r1">radio1</label>

    <input type="radio" name="try" value="radio2" checked="checked" id="r2"/>
    <label for="r2">radio2</label>
</form>
<div id="result"></div>

<script>
function sendValues() {
    var str = $("form").serialize();
    $.ajax({
        type: "Get",
        url: "samepage.php",
        data: str,
        success : function(data) { //syntax error its success
           $("#result").html(html);
        } 
    }); 
 }
$(":radio").click(sendValues);
sendValues();
</script> 
```

在同页.php

```
echo $value = $_GET['try']; 
```

# sql - 如果不在表中，则加入其他所有值

> ID：12617880
> 
> 赞同：0
> 
> 时间：2012-09-27T09:10:56.677
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, join

我有一个尺寸表

```
@dimensions
Dateid  Rep Mkt Prodgroup
201111  002 S   001
201111  002 R   001
201111  002 S   002
201111  002 R   002
201111  002 S   003
201111  002 R   003
201111  002 S   004
201111  002 R   004
... 
```

我想将它与此表一起加入以包含百分比。

```
@percentageincrease
Prodgroup   Mkt Percent
ALL         S   1.05
ALL         R   1.06
002         S   1.07
002         R   1.08
003         S   1.09
003         R   1.10 
```

我想加入他们，在`Mkt`哪里`Prodgroup`以及`@dimensions.Prodgroup IN @percentageincrease.Prodgroup`是否`not in`加入 ALL。所以输出表将是

```
Dateid  Rep Mkt Prodgroup   Percent
201111  002 S   001         1.05 // joined on ALL
201111  002 R   001         1.06 // joined on ALL
201111  002 S   002         1.07 // joined on 002
201111  002 R   002         1.08 // joined on 002
201111  002 S   003         1.09 // joined on 003
201111  002 R   003         1.10 // joined on 003
201111  002 S   004         1.05 // joined on ALL
201111  002 R   004         1.06 // joined on ALL
... 
```

作为我的加入条件，我已经尝试过

```
on case p.Prodgroup 
    when N'ALL' 
    then d.prodgrpid 
    else p.Prodgrpid = d.prodgrpid
AND p.Mkt = d.Mkt 
```

但它给了我

```
Dateid  Rep Mkt Prodgroup   Percent
201111  002 S   001         1.05
201111  002 R   001         1.06
201111  002 S   002         1.07
201111  002 R   002         1.08
201111  002 S   002         1.05 //Joined on ALL
201111  002 R   002         1.06 //Joined on ALL
201111  002 S   003         1.09
201111  002 R   003         1.10
201111  002 S   003         1.05 //Joined on ALL
201111  002 R   003         1.06 //Joined on ALL
201111  002 S   004         1.05
201111  002 R   004         1.06
... 
```

@percentageincrease 表中的元组也在 ALL 条件下加入。

这是作为更大查询的一部分在 SQL Server 2008 上作为存储过程运行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:18:36.700

假设表结构

```
declare @dimensions table 
    (Dateid varchar(10),  Rep varchar(10), Mkt varchar(10),Prodgroup varchar(10))
declare @percentageincrease table 
    (Prodgroup varchar(10),  Mkt varchar(10), [Percent] decimal(9,5)) 
```

然后

```
select 
     d.*, 
     isnull(pinc.[Percent], pincall.[Percent]) 
from @dimensions d
    left join @percentageincrease pinc 
        on d.Mkt = pinc.Mkt
      and d.Prodgroup = pinc.Prodgroup
    left join @percentageincrease pincall
        on d.Mkt = pincall.Mkt
      and pincall.Prodgroup ='all' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:59:46.043

尝试这个：

```
select * from 
(
select d.*,p.[Percent] from 
dimensions d inner join percentageincrease p
on d.Mkt = p.Mkt  and d.Prodgroup = p.Prodgroup 

union 

select d.*,p.[Percent] from 
dimensions d  join percentageincrease p
on d.Mkt = p.Mkt  and d.Prodgroup not in
  (select distinct d.Prodgroup  from  dimensions d inner join percentageincrease p
   on d.Mkt = p.Mkt  and d.Prodgroup = p.Prodgroup) 
  where p.Prodgroup='ALL'  
) a
order by a.Prodgroup 
```

# delphi - 如何使表单捕捉到屏幕边缘

> ID：12617885
> 
> 赞同：1
> 
> 时间：2012-09-27T09:11:23.733
> 
> 标签：delphi, delphi-xe2, firemonkey

我最近才开始学习Firemonkey，所以如果问题很愚蠢，请不要踢。如何制作粘在屏幕边缘的 Firemonkey 表单。在 VCL 中很容易通过使用属性 ScreenSnap: = true 和 SnapBuffer: = 15 来完成。另一种方式 - 处理消息 WM_WWINDOWPOSCHANGING 或 WM_MOVING。我怎样才能用 FireMonkey 做同样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:03:30.743

由于 FMX 是平台中立的，因此做特定于平台的事情要困难得多。现在使用 Delphi XE3 附带的 FM2 应该会变得更容易一些。

对于 Delphi XE2，可能最简单的方法是将 FMX 内容包装在 VCL 形式中。

# mysql-connector - 为什么 MySql.NET 驱动程序需要 .NET 2.0 用于 .NET 4 应用程序

> ID：12617894
> 
> 赞同：0
> 
> 时间：2012-09-27T09:11:55.510
> 
> 标签：mysql-connector

我正在推出一个使用实体框架但也有 MySqlConnection 连接的 WPF 应用程序。

在 Windows 7 上，只需安装 .net 4 就可以很好地推出，但在一些运行 XP 的旧硬件上，我遇到了困难。

症状多种多样。

1.  我安装了驱动程序并且实体框架操作成功但 MySqlCommands 失败 - 事件查看器（取决于哪台机器）显示 FileNotFound 异常或显示与 .NET 2 优化器相关的异常。

2.  我安装了驱动程序，但没有任何效果 - 错误是驱动程序无法加载。

3.  我尝试加载驱动程序，但安装程序抱怨即使存在 .net 4 也需要安装 .net 4 或 .net 2。

在我第一次尝试过的六个左右的 XP 工作站中，一个 XP 工作站完美运行——我在这台机器上注意到的是，在我执行 MySql 连接器安装之前，.net 版本 1.1、2.0、3.5 和 4 都存在。

我将尝试卸载 .net 4，重新安装 .net 2，然后安装 MySql 连接器，看看是否能解决问题，但老实说，我在不知道根本问题是什么的情况下就解决了这个问题。

谁能启发我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:13:26.020

我们发现，那些预装了 .NET 4“扩展”的工作站，以及预装了完整的 .NET 2、3.5、4.0 历史的工作站都可以正常工作。

MySqlConnector 不支持或不支持仅安装了 .NET 4“客户端配置文件”的工作站。我们发现许多不同的 MySqlConnector 版本都是如此。

# excel - 依次检查日期是否在两个日期之间

> ID：12617895
> 
> 赞同：0
> 
> 时间：2012-09-27T09:11:57.343
> 
> 标签：excel, vba

我有一个动态的日期列表，比如说他们相隔 3 个月，但是这些**可能会更改为相隔 5 个月、2 个月等**

然后我有一个相隔 1 个月的日期列表。我需要做的是检查相隔 1 个月的列表中的哪个日期位于动态列表中的哪个月份之间。

例如：

**动态列表**

01-Jun-12
01-Sep-12
01-Dec-12
01-Mar-13
01-Jun-13

**静态列表**

01-Jun-12
01-Jul-12
01-Aug-12
01-Sep-12
01-Oct-12
01-Nov-12
01-Dec-12
01-Jan-13
01-Feb-13 01-Feb-13
01-Mar-13 2013 年
4 月 1 日 13 年
5 月 1 日 2013 年
6 月 01 日

简单地说，它会检查 01-Jun-12 是否出现在 01-Jun-12 和 01-Sep-12 之间。如果是，则返回最早的月份。
然后它会检查静态列表的每一行在动态列表中每两个月之间的位置，然后返回它之前的月份。

IE。Jul 介于 01-Jun-12 和 01-Sep-12 之间，因此将返回 01-Jun-12。01-Oct-12 介于 01-Sep-12 和 01-Dec-12 之间，因此将返回 01-Sep-12

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:00:41.310

一个简单的 LOOKUP 公式应该这样做：

假设 A2:A6 中的动态列表和 C2:C20 中的静态列表然后将此公式放入 D2 复制下来

`=LOOKUP(C2,A$2:A$6)`

如果 C2 < A2 - 这可能会给你一个错误吗？

假设 A2:A6 按照您的示例升序排列

# eclipse - 如何使用 org.eclipse.ui.menus 向 Eclipse Package Explorer 上下文菜单项添加子菜单条目？

> ID：12617898
> 
> 赞同：10
> 
> 时间：2012-09-27T09:11:59.970
> 
> 标签：eclipse, plugins, popup, contextmenu, submenu

我正在尝试从 Eclipse 包资源管理器的上下文菜单中向项目添加子菜单条目。

菜单条目已经通过 org.eclipse.ui.popupMenus 在另一个插件中定义，而不是在我正在使用的插件中。（该插件已添加到我的插件的依赖项列表中）。它的子菜单中还添加了一些项目，但也使用 org.eclipse.ui.popupMenus，我正在尝试通过 org.eclipse.ui.menus 来执行此操作。

首先，我做了以下事情：

*   我添加了 org.eclipse.ui.commands 和 org.eclipse.ui.menus 扩展。
*   我定义了一个命令，分别是这样的 menuContribution：

![在此处输入图像描述](../Images/b9c2074e188bd60c88976517aad4282d.png)

这会在任何上下文菜单中添加项目......所以我必须将 locationURI 中的“org.eclipse.ui.popup.any?after=additions”替换为我希望我的项目出现的子菜单的 ID。

**我的问题是：如何确定正确的 locationURI？** 我使用了菜单间谍 (ALT+SHIFT+F2) 并检查了我想要贡献的子菜单，我收到了以下 URI：

菜单：YYY?after=ZZZ，其中：

YYY 是已经定义的菜单的 ID，我想向其中添加子菜单项 ZZZ 是我单击的子菜单中的操作的 ID（使用间谍）

我尝试了以下，但子菜单项没有出现：

*   菜单：YYY[?after=additions]
*   弹出窗口：YYY[?after=additions]

请帮忙 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T07:44:06.987

I managed to make it work by defining a new menu contribution and a menu having the same id and label as the menu already defined. The final solution looks like this:

```
<extension point="org.eclipse.ui.menus">
  <menuContribution
        locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?after=additions">
     <menu
           id="YYY"
           label="%YYYs_label">
     </menu>
  </menuContribution>
  <menuContribution
        locationURI="popup:YYY?after=additions">
     <command
           commandId="example.MyCommandHandlerID"
           icon="icons/somePhoto.gif"
           label="MyLabel"
           style="push">
     </command>
  </menuContribution>
</extension> 
```

# javascript - JQuery点击链接不起作用

> ID：12617901
> 
> 赞同：11
> 
> 时间：2012-09-27T09:12:14.250
> 
> 标签：javascript, jquery, hyperlink, click

我有以下代码：

```
<script type="text/javascript">
$(document).ready(function(){
    shortcut.add("Ctrl+Alt+N", function() {
        $("#btnSave").click();
    });
});
</script> 
```

其中 btnSave 是 ID 为 btnSave 的锚元素，快捷方式来自[http://www.openjs.com/scripts/events/keyboard_shortcuts/](http://www.openjs.com/scripts/events/keyboard_shortcuts/)。如果我将线路更改`$("#btnSave").click();`为`document.getElementById("btnSave").click()`- 一切正常。问题是为什么 jquery 实现在我的情况下不起作用？
**PS：为我的案例制作了 jsfiddle：http: [//jsfiddle.net/0x49D1/WCmeU/](http://jsfiddle.net/0x49D1/WCmeU/)**
这是有类似问题的人：[http ://forums.asp.net/t/1591818.aspx](http://forums.asp.net/t/1591818.aspx)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-27T09:19:23.047

而不是`$("#btnSave").click();`尝试`$("#btnSave").trigger('click');`

您还可以使用`$("#btnSave")[0].click();`which is jquery 等价于`document.getElementById("btnSave").click();`

**更新**：
不可能从 javascript 模拟用户链接点击，出于安全原因，您所能做的就是附加您自己的`click`事件处理程序并根据`href`链接的重定向，如下所示：

```
$("#btnSave").bind('click', function() {
    window.location.href = $(this).attr('href');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:55:04.993

试试这个

> ```
> <script type="text/javascript"> 
>       $(document).ready(function(){
>          shortcut.add("Ctrl+Alt+N", function() {
>             $("#btnSave").live('click',function(){
>            // do stuff here
>             });
>          }); 
>       }); </script> 
> ```

# objective-c - 如何对 iPhone 测验应用程序进行逐个字母验证？

> ID：12617906
> 
> 赞同：0
> 
> 时间：2012-09-27T09:12:26.137
> 
> 标签：objective-c, string, validation, letter

我正在编写一个测验类型的应用程序，我在 iTunes 上看到了一些你需要输入徽标是什么的地方，它似乎会检查用户输入的每个字母并根据你是否输入打勾或打叉正确命名。

例如，我见过测验应用程序，您需要在其中猜测著名品牌的徽标，但不是多项选择，而是将其品牌名称用叉号空白，并且在您键入时将叉号更改为勾号（假设您猜对了） ）。

我的问题是，您如何进行逐字验证？我认为正则表达式可能会有所帮助，但我只使用它来强制字符串输入为文本。

除此之外，我唯一能想到的是将答案字符串分解为一个数组并对照它检查您的输入，但我认为这听起来太慢了。

我想您可以循环浏览输入的每个字母，但是如果有更简单的解决方案可以对 iphone 测验应用程序进行逐个字母验证，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:19:45.420

```
char inputLetter = ...
if([answer characterAtIndex:i] == inputLetter)
{
    //Yay!
} 
```

这有什么慢？

# android - 应用程序品牌

> ID：12617910
> 
> 赞同：3
> 
> 时间：2012-09-27T09:12:39.033
> 
> 标签：android, android-theme

我希望我的应用程序可以在不同的品牌下使用——这意味着必须可以在少数地方轻松更改背景位图，而且还可以更改文本资源。

我的计划是使用主题和样式，我知道它们可用于切换位图，但它们是否允许我也更改 TextViews 中的文本？

是否也可以在样式或主题中指定文本标识符，然后在代码中动态读取它？

[编辑]

经过一番调查，当然可以用样式代替文本。应用程序品牌化带来的另一个问题是需要更改包名称 - 否则 Google Play 不会接受我们的品牌应用程序。

[编辑]

经过更多调查，下面我将包含有关如何添加两个可切换主题的小示例，这些主题将允许替换活动布局中的可绘制对象和文本视图中的文本资源。剩下的就是调用 setTheme(R.style.Theme1); 或 setTheme(R.style.Theme2); 在 setContentView 之前的 onCreate。

```
<-- attrs.xml />
<resources>
    <attr name="ProductName" format="reference"/>    
    <attr name="ProductBackground" format="integer"/>
</resources>

<-- styles.xml />
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="Theme1" parent="android:Theme.Light">
        <item name="ProductName">@string/s_product_1_name</item>
        <item name="ProductBackground">@drawable/back_1_vga</item>
    </style>    
    <style name="Theme2" parent="android:Theme.Light" >         
        <item name="ProductName">@string/s_product_2_name</item>
        <item name="ProductBackground">@drawable/back_2_vga</item>
    </style>
</resources>

<-- my activity layout />
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="?ProductBackground"
    >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        tools:context=".MainActivity"
        android:background="#ff0000"
        android:text="?ProductName" 
        />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T08:57:28.247

有两种方法可以为您的应用制作不同的品牌：

1）将您的应用程序拆分为多个库项目，通用代码在可以说 common_lib 库项目中，并且您的所有品牌都在使用 common_lib 的单独项目中，但更改了一些资源，如字符串、一些可绘制对象，还有包名。这是我们在应用程序中选择的方法。

2）使用 gradle 产品风格： http: [//developer.android.com/sdk/installing/studio-build.html](http://developer.android.com/sdk/installing/studio-build.html)，我认为这应该是现在首选的解决方案。

# php - PHP cURL：在进行大量 REST 调用时提高性能

> ID：12617911
> 
> 赞同：0
> 
> 时间：2012-09-27T09:12:41.613
> 
> 标签：php, rest, curl

我有一个经常调用外部休息服务的功能。多久取决于输入数据，例如。用户要求什么，但想法是批量转换一种特殊的数据和标识符。即使只有 50 次转换，这也非常慢。

使用 php_curl 调用 REST Web 服务。现在我认为为每次转换创建一个新连接会导致这种情况。我尝试重新使用相同的句柄并为每个调用调整 url，我也尝试了这个：

[http://technosophos.com/content/connection-sharing-curl-php-how-re-use-http-connections-knock-70-rest-network-time](http://technosophos.com/content/connection-sharing-curl-php-how-re-use-http-connections-knock-70-rest-network-time)

在这两种情况下，我的性能提升都为 0。我在 Windows 上。也许这就是问题？使用 TCPView 工具，我可以很容易地看到新连接是“集体”创建的。也许我解释错了，但对我来说，每次转换似乎仍在创建 1 个连接。

所以我有点迷路了。任何人都知道连接是否真的在 Windows 实现中被重用？会不会是远程服务器造成的？

编辑：

当前设置很简单：

```
if(empty($this->curlHandle)){
    $this->curlHandle = curl_init();
    curl_setopt($this->curlHandle, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($this->curlHandle, CURLOPT_PROXY, $this->proxy);
    curl_setopt($this->curlHandle, CURLOPT_PROXYPORT, $this->proxyPort);
    curl_setopt($this->curlHandle, CURLOPT_HTTP_VERSION, 1.1);
}        
//$ch = curl_init();
curl_setopt($this->curlHandle, CURLOPT_URL, $baseUrl . $identifier . '/' . $format);

$result = curl_exec($this->curlHandle); 
```

这里是一个示例调用返回的标头：

```
HTTP/1.1 200 OK
Date: Fri, 28 Sep 2012 05:23:37 GMT
Server: Apache/2.2.15 (Scientific Linux)
Last-Modified: Fri, 28 Sep 2012 05:16:37 GMT
ETag: "0924166dd08dd5845929794dbd07d288"
Expires: Mon, 08 Oct 2012 05:16:37 GMT
Cache-Control: max-age=864000
Access-Control-Allow-Origin: *
Connection: close
Content-Type: text/plain; charset=UTF-8 
```

编辑2：

有一个不同的远程 Web 服务提供类似的功能（但数据较少，例如查找 ID 数据）。在 Firefox 中运行时，该服务会返回一个保持活动的标头。所以我实现了它。但问题仍然存在。一样慢。然后我使用 curl cmd-line 玩了一下，发现使用 curl 时说服务器返回一个连接：关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:53:11.580

由于各种原因，重新使用相同的 CURL 句柄实际上并不能很好地工作。`curl_exec`并不是真的打算用于这种用途。

`curl_multi_exec` *确实*很好地处理了这种情况。但它通常需要远程主机也保持连接。

然而，在这些策略中的任何一个起作用之前，客户端和服务器必须同意保持连接打开，而这并没有发生。

根据您在上面发布的标题，“连接：关闭”从服务器返回。这意味着没有启用 Keep-alives。这可能是因为 REST 服务器（或您的代理服务器，如果有的话）不允许它们，这可能是有道理的。也可能是因为您的本地 CURL 调用由于某种原因没有向远程服务器发送“Connection: Keep-Alive”。

尝试以下操作：

*   检查 CURL 的出站标头以查看它是否要求保持活动状态。
*   尝试启用 CURLOPT_VERBOSE，这将显示低级连接详细信息

这些至少应该让你走上正轨。但是，归根结底，如果远程服务器不支持同一连接上的多个请求，那么您将无法做任何事情来改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:28:05.850

由于您正在批处理，因此您可以与 curl_multi_exec 并行执行多个调用

[http://php.net/manual/en/function.curl-multi-exec.php](http://php.net/manual/en/function.curl-multi-exec.php)

# iphone - 在 IOS 6 的 UITableView 上设置背景颜色

> ID：12617913
> 
> 赞同：13
> 
> 时间：2012-09-27T09:12:52.953
> 
> 标签：iphone, ipad, uitableview, ios6

> **可能重复：**
> [更改分组 UITableView 的背景](https://stackoverflow.com/questions/11047029/change-background-of-a-grouped-uitableview)

如果是，我无法更改 UITableView 的背景颜色`UITableViewStyleGrouped`。我的代码：

`[addressNewTbl setBackgroundColor:[UIColor redColor]];`

帮助！

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-27T09:15:54.967

您可能需要添加一些代码。尝试 -

`[UITableView setBackgroundView: nil];`

或者你也可以这样做：

```
UIView* bview = [[UIView alloc] init];
bview.backgroundColor = [UIColor yellowColor];
[tableView setBackgroundView:bview]; 
```

两者都会工作..

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T09:15:48.380

你试过了吗

```
addressNewTbl.backgroundView = nil;
[addressNewTbl setBackgroundColor:[UIColor redColor]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:15:38.990

您还需要禁用背景视图：

```
[addressNewTbl setBackgroundView:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T09:15:56.310

与其设置整个 的背景颜色，不如`UITableView`尝试设置其背景颜色时发生的情况`backgroundView`。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-27T09:17:53.263

在 cellForRowAtIndexPath 数据源 method.try 设置

```
[cell setBackgroundColor:[UIcolor redColor]]; 
```

# avalondock - 删除 avalondock 中显示的文档选项卡

> ID：12617914
> 
> 赞同：4
> 
> 时间：2012-09-27T09:12:54.920
> 
> 标签：avalondock

我的申请没有多个文件。所以我不需要 LayoutDocumentPane 中显示的选项卡。我发现它可以通过在这里使用样式来定制。[http://avalondock.codeplex.com/wikipage?title=Document%20tab%20restyling](http://avalondock.codeplex.com/wikipage?title=Document%20tab%20restyling)

但这似乎过于复杂。有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:31:42.353

如果您不需要多个文档，则可能根本不需要文档。您应该将您的内容放在一个普通的可停靠面板中。

在 AvalonDock 2.x 中，您可以使用 LayoutAnchorable，在 1.x 中使用 DockableContent，当然两者都嵌套在合适的容器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:08:26.707

在 avalondock 1.x 中有一个属性可以满足您的需要。它叫`DocumentPane.ShowHeader`.

它（还没有？）在 2.x 上不存在

如果您想修改 avalondock 来满足您的需求，我向添加该功能的项目提交了一个补丁。

它包含在这张票中： http: [//avalondock.codeplex.com/workitem/15626](http://avalondock.codeplex.com/workitem/15626)

# haskell - 为什么 ListT monad 转换器被认为是错误的 - 它违反了哪些 monad 法则？

> ID：12617916
> 
> 赞同：25
> 
> 时间：2012-09-27T09:12:58.523
> 
> 标签：haskell, functional-programming, monads, monad-transformers

我看到提到过

> `ListT`是一个不满足[monad 法则](http://www.haskell.org/haskellwiki/Monad_Laws)的有问题的 monad 转换器的典型例子。

这可以通过一个简单的例子来证明吗？

**编辑：**我的想法`ListT []`有点错误，我错过了[文档](http://hackage.haskell.org/packages/archive/mtl/latest/doc/html/Control-Monad-List.html)要求内部单子是可交换的。那么，`ListT`仅仅是有这个要求的意义上的越野车，还是还有其他问题？（[Haskell wiki 上的示例](http://www.haskell.org/haskellwiki/ListT_done_right#Examples)都使用`ListT IO`并且`IO`显然不是可交换的。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-27T09:12:58.523

一个简单的例子说明它是如何不符合结合律的：

```
v :: Int -> ListT [] Int
v 0 = ListT [[0, 1]]
v 1 = ListT [[0], [1]]

main = do
    print $ runListT $ ((v >=> v) >=> v) 0
    -- = [[0,1,0,0,1],[0,1,1,0,1],[0,1,0,0],[0,1,0,1],[0,1,1,0],[0,1,1,1]]
    print $ runListT $ (v >=> (v >=> v)) 0
    -- = [[0,1,0,0,1],[0,1,0,0],[0,1,0,1],[0,1,1,0,1],[0,1,1,0],[0,1,1,1]] 
```

更多示例（主要使用`IO`）以及如何修复的解决方案`ListT`可以在[ListT done right](http://www.haskell.org/haskellwiki/ListT_done_right)找到。

# c# - 在 c#.net 中使用 nant

> ID：12617922
> 
> 赞同：-1
> 
> 时间：2012-09-27T09:13:03.673
> 
> 标签：c#, .net, ant, nant

我有一个以下 xml 文件，据说是

```
<target name="run-command">
  <exec program="D:\ib2cmd.bat" basedir=".">
  </exec>
</target> 
```

并放在项目文件中

然后我在系统变量中为 nant-0.92-bin 路径设置环境变量。

最后我通过c#调用

```
System.Diagnostics.Process.Start("nant.exe -buildfile: d:xxx/xx/xxx.xml"); 
```

当我运行这个时，我得到了错误

```
INVALID INPUT FILE PATH 
```

我不知道我哪里出错了

等待您的宝贵建议和意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:17:42.917

您可以使用此代码 - 基于 ProcessStartInfo

```
 ProcessStartInfo startInfo = new ProcessStartInfo("nant.exe");
        startInfo.Arguments = "/-buildfile  \"d:\\xxx\\xx\\xxx.xml\"";
        Process.Start(startInfo); 
```

拉努克蝙蝠

```
 <target name="run-command">
   <exec program="..." basedir=".">
     <arg value="" />
   </exec>
 </target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:17:16.823

我最好使用：

```
System.Diagnostics.Process.Start("nant.exe -buildfile: \"d:\\xxx\\xx\\xxx.xml\""); 
```

我认为命令行没有正确获取路径，因为不是 Windows 格式。

# actionscript-3 - AS3 ExternalInterface.call，为什么它在 Chrome 或 IE 上不起作用？

> ID：12617923
> 
> 赞同：1
> 
> 时间：2012-09-27T09:13:06.520
> 
> 标签：actionscript-3, externalinterface

```
import flash.external.ExternalInterface;
var pageURL:String = ExternalInterface.call('window.location.href.toString'); 
```

上面的代码似乎可以在 Firefox 上运行，但是当我用 Chrome 或 IE 尝试它时它不起作用（它会导致错误并停止 swf 的执行）。

有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T09:16:38.537

`ExternalInterface`适用于所有主要浏览器的最新版本。您应该做的第一件事是将该调用包装在检查中以查看它当前是否可用：

```
if(ExternalInterface.available)
{
  ExternalInterface.call('window.location.href.toString');
} 
```

Chrome 和 IE 的问题可能是对 window.location.href 的调用。最好的办法是将其放入 JS 函数中，然后从 AS 调用该函数，如下所示：

```
//JS:

function reportHref(){
    return window.location.href.toString(); 
    // I'm not sure this is good cross-browser JS. 
    // If it isn't, you can at least test it directly in the browser
    // and get a javascript error that you can work on.
}

//AS:
var result:String = "";
if(ExternalInterface.available)
{
    result = ExternalInterface.call("reportHref");
}
else
{
    result = "External Interface unavailable";
}
trace(result); 
```

此外，请确保您尝试调用的函数已经存在于 DOM 中，然后再尝试调用它 - 如果您在添加脚本之前添加 SWF，并`ExternalInterface`立即调用，那么它将失败，因为`reportHref`没有还存在。

最后，从 SWF 内部对`window.location`对象的调用可能会由于沙盒而失败，如果您从页面中的 JS 函数进行调用，则不会出现这种情况。

上的文档`ExternalInterface`非常全面，有很好的例子：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T00:19:54.560

不能在 IE9 中工作

```
if(ExternalInterface.available)
{
  ExternalInterface.call('window.location.href.toString');
} 
```

无处不在

```
if(ExternalInterface.available)
{
  ExternalInterface.call('document.location.href.toString');
} 
```

# javascript - 如何在不使用 for 的情况下使用类型化数组？

> ID：12617932
> 
> 赞同：0
> 
> 时间：2012-09-27T09:13:37.480
> 
> 标签：javascript, html, buffer, bytearray

```
var sendBuffer = new ArrayBuffer(4096);
var dv = new DataView(sendBuffer);
dv.setInt32(0, 1234);
var service = svcName;
for (var i = 0; i < service.length; i++) 
{
    dv.setUint8(i + 4, service.charCodeAt(i));
}
ws.send(sendBuffer); 
```

如何在不使用 for 循环的情况下进行锻炼。在处理大量数据时，for 循环会降低性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:21:08.197

在 javascript 中，for() 循环相对于其他操作来说非常紧凑和高效。在每个排列上按顺序执行此操作（即摆脱 for() 循环）将是不雅的，也不会为您节省很多周期。

如果某项操作可能导致客户端停止运行，则需要将问题拆分为更小的组件，并警告用户执行该操作需要一些时间。

我建议将此操作拆分为更小的块，而不是尝试找到另一个不使用 for() 的算法。

也许像这样，使用回调可以防止代码阻塞：

```
var split = service.length/4;
function alpha(split, position, callback) {
  for (var i = split*(position-1); i < split*(position); i++) {
    dv.setUint8(i + 4, service.charCodeAt(i));}
  if(callback && (typeof(callback) == 'function') {
    callback();}
}

var split = service.length/4;
alpha(split, 1, function() {
  // poll here for other information or to confirm user wishes to proceed
  alpha(split, 2, function() {
    // poll here for other information or to confirm user wishes to proceed
    alpha(split, 3, function() {
      // poll here for other information or to confirm user wishes to proceed
      alpha(split, 4);}
  }
} 
```

这是一种*大大*简化的方法，但并不是实现此解决方案的最佳方法。但它会让您有机会优化正在进行的处理并优先考虑与其他操作相关的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:51:46.010

根据评论，您真正的问题是循环会使您的 UI 阻塞。

上面的拆分答案并没有为您提供防止阻塞的正确方法。在 Javascript 主线程中完成的所有操作都会阻塞 UI。

您需要使用 Web Workers（单独的线程）来处理您的数据，因此处理不会阻塞 UI 线程：

[http://updates.html5rocks.com/2011/09/Workers-ArrayBuffer](http://updates.html5rocks.com/2011/09/Workers-ArrayBuffer)

您使用 postMessage() 将数据发布到单独的 worker 进行处理，然后使用另一个 postMessage() 将结果数据发布回主线程。

# android - 如果用户在 EditText 中输入错误，如何设置错误消息？

> ID：12617936
> 
> 赞同：1
> 
> 时间：2012-09-27T09:14:01.597
> 
> 标签：android, android-edittext, validation, messages

我有一个应用程序，其中有 EditText 框。我已经为用户应该输入的输入框设置了验证。但是如果他输入错误的输入，我想设置错误消息，我不知道该怎么做。

这些是编辑文本的验证码

```
EditText txtDislikes = (EditText) findViewById(R.id.txtDislikes);
        txtDislikes.setHint("e.g. Skating, Photography separate by comma");
        txtDislikes.setFilters(new InputFilter[] {
                new InputFilter() {

                    @Override
                    public CharSequence filter(CharSequence source, int start,
                            int end, Spanned dest, int dstart, int dend)
                    {
                        if(source.equals(""))
                        {
                            return source;
                        }
                        if(source.toString().matches("[a-z A-Z -]+"))
                        {
                            return source;
                        }
                        return "";
                    }

                }
            }); 
```

我试着像输入一样`source.setError("ONLY LETTERS ARE ALLOWED");`输入

```
if(source.equals(""))
                        {
                            return source;
                        }
                        else
                        {
                            source.setError("ONLY LETTERS ARE ALLOWED");
                        }
                        if(source.toString().matches("[a-z A-Z -]+"))
                        {
                            return source;
                        }
                        else
                        {
                            source.setError("ONLY LETTERS ARE ALLOWED");
                        }
                        return ""; 
```

但我有错误说“方法 setError(String) 未定义 CharSequence 类型”。不确定那是什么意思。

另外，我找不到任何好的例子。提供的任何帮助或示例将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:11:57.860

type没有`setError()`方法`CharSequence`。

请参阅[TextView.setError()](http://developer.android.com/reference/android/widget/TextView.html#setError%28java.lang.CharSequence%29)，你应该`setError()`在你的`txtDislikes`而不是`source`.

# android - 在设备配置更改时恢复相同的活动

> ID：12617938
> 
> 赞同：0
> 
> 时间：2012-09-27T09:14:11.583
> 
> 标签：android, android-activity

我有一个活动。当我改变方向时，我们知道会调用 onCreate 。创建了一个新活动。但是我想继续我的旧活动，有没有办法恢复旧活动并继续它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:18:14.170

在您的活动标签中使用它

```
android:configChanges="orientation" 
```

# asp.net-mvc-3 - 在 mvc3 中本地化错误 500 页面

> ID：12617940
> 
> 赞同：2
> 
> 时间：2012-09-27T09:14:17.217
> 
> 标签：asp.net-mvc-3, error-handling, custom-error-pages

我一直在经历堆栈溢出，但找不到答案。我可以像这样让 500 页面正常显示：

```
<customErrors mode="On">
  <error statusCode="500"
         redirect="~/500.html"/>
</customErrors> 
```

我想做的是根据应用语言呈现页面的本地化版本。问题是我不想通过我在许多其他帖子中找到的错误控制器视图解决方案，以防应用程序中存在实际错误（缺少 DLL 等）。所以我必须提供一个纯 html 页面，但我需要能够选择本地化的页面，或者指示 IIS 如何找到它。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:58:47.773

这只是我的想法，你不能使用使用浏览器定义的接受语言重定向到 ~/500.en-us.html 和 ~/500.de.html 的 URL 重写/重定向规则吗或者你可能有路径设置？

web.config 中的示例规则：

```
<rule name="HTTP-Language-Error-Redirect" stopProcessing="true">
    <match url="^500.html$" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="true">
        <add input="{HTTP_ACCEPT_LANGUAGE}" pattern="^([a-z]{1,8}(-[a-z]{1,8})?)\s*(;\s*q\s*=\s*(1|0\.[0-9]+))?$" />
    </conditions>
    <action type="Redirect" url="500.{C:1}.html" redirectType="Found" />
</rule> 
```

我的想法是 redwrite/redirect 规则会起作用，因为它是 IIS 处理请求的进程的一部分，而不是应用程序代码。因此，理论上，如果 WebApp 由于某种原因被破坏，它仍然可以工作。不过，我的假设可能完全错误，我想我会诚实地试一试。

# php - JMSSerializerBundle 在 JSON 中以字符串形式返回双精度

> ID：12617941
> 
> 赞同：3
> 
> 时间：2012-09-27T09:14:18.447
> 
> 标签：php, symfony, doctrine-orm, jmsserializerbundle

所以我们`JMSSerializerBundle`在 Symfony2 项目中使用 为我们的客户生成一些 JSON。它正在序列化我们的 Doctrine2 实体并且像魅力一样工作，但有一个例外。所有双精度/十进制值都是生成的 JSON 中的字符串，这会使客户端感到困惑。

我们的序列化实体看起来像这样，我这里只粘贴了相关的属性/getter。

```
class Offer
{
    [...]

    /**
     * @var double $latitude
     *
     * @ORM\Column(name="latitude", type="decimal", precision=10, scale=7)
     * @Groups("offerlist")
     */
    private $latitude;

    /**
     * @var double $longitude
     *
     * @ORM\Column(name="longitude", type="decimal", precision=10, scale=7)
     * @Groups("offerlist")
     */
    private $longitude;

    [...]

    /**
     * Get latitude
     *
     * @return double
     */
    public function getLatitude()
    {
        return $this->latitude;
    }

    /**
     * Get longitude
     *
     * @return double
     */
    public function getLongitude()
    {
        return $this->longitude;
    }

    [...]
} 
```

纬度/经度值显示在 JSON 中，如下所示：

```
{
    "latitude" : "5.3452",
    "longitude" : "54.2312"
} 
```

如何摆脱引号，所以它是 JSON 中的数字而不是字符串？[这应该很容易，但我在文档](http://jmsyst.com/bundles/JMSSerializerBundle/master/reference/annotations)或网上找不到关于这个问题的任何内容。希望有人可以在这里帮我一把！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T11:06:56.747

您的纬度和经度列使用 Doctrine 的十进制类型，表示为字符串。

如果可以的话，你可以使用 Doctrine 的双重类型：

```
/**
 * ...
 * @ORM\Column(name="latitude", type="double")
 */
private $latitude; 
```

或使用 JMSSerializerBundle 的[`@Type`注解](http://jmsyst.com/bundles/JMSSerializerBundle/master/reference/annotations#type)：

```
/**
 * ...
 * @Serializer\Type("double")
 */
private $latitude; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-04T08:27:37.377

不要使用“double”作为列类型，因为您可能会遇到坐标表示格式错误的风险。更好地投射你的属性：

```
 /**
     * Get latitude
     *
     * @return double
     */
    public function getLatitude()
    {
        return (double)$this->latitude;
    }
```

# perl - 在 Perl 中是否有安全取消引用的便利？

> ID：12617944
> 
> 赞同：5
> 
> 时间：2012-09-27T09:14:30.987
> 
> 标签：perl, operators, dereference

所以 perl5porters 正在讨论添加一个安全的解引用运算符，以允许类似的东西

```
$ceo_car_color = $company->ceo->car->color
    if  defined $company
    and defined $company->ceo
    and defined $company->ceo->car; 
```

缩短为例如

```
$ceo_car_color = $company->>ceo->>car->>color; 
```

哪里的`$foo->>bar`意思`defined $foo ? $foo->bar : undef`。

**问题：**是否有一些模块或不显眼的 hack 让我得到这个运算符，或者具有视觉上令人愉悦的语法的类似行为？

为了您的享受，我将列出我能够提出的想法。

1.  多重解除引用方法（看起来很难看）。

    ```
    sub multicall {
        my $instance = shift // return undef;
        for my $method (@_) {
            $instance = $instance->$method() // return undef;
        }
        return $instance;
    }

    $ceo_car_color = multicall($company, qw(ceo car color)); 
    ```

2.  一个包装器，它变成`undef`一个代理对象（看起来更丑陋），它`undef`从所有函数调用中返回。

    ```
    { package Safe; sub AUTOLOAD { return undef } }
    sub safe { (shift) // bless {}, 'Safe' }

    $ceo_car_color = safe(safe(safe($company)->ceo)->car)->color; 
    ```

3.  由于我可以访问,和的实现`ceo()`，因此我考虑过直接从这些方法返回安全代理，但现有代码可能会中断：`car()``color()`

    ```
    my $ceo = $company->ceo;
    my $car = $ceo->car if defined $ceo; # defined() breaks 
    ```

    不幸的是，我没有看到任何`perldoc overload`关于重载安全代理的含义`defined`和`//`安全代理的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:01:12.010

也许这不是最有用的解决方案，但它是另一个 WTDI（nr. 1 的变体），它是[List::Util](http://p3rl.org/List%3a%3aUtil)的**reduce**的一个重要用例，这非常罕见。;)

## 代码

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature     'say';
use List::Util  'reduce';

my $answer = 42;
sub new { bless \$answer }
sub foo { return shift }        # just chaining
sub bar { return undef }        # break the chain
sub baz { return ${shift()} }   # return the answer

sub multicall { reduce { our ($a, $b); $a and $a = $a->$b } @_ }

my $obj = main->new();
say $obj->multicall(qw(foo foo baz)) // 'undef!';
say $obj->multicall(qw(foo bar baz)) // 'undef!'; 
```

## 输出

```
42
undef! 
```

*笔记：*

当然应该是

```
return unless defined $a;
$a = $a->$b; 
```

而不是上面的较短`$a and $a = $a->$b`的，以正确使用已定义但错误的值，但我的意思是使用**reduce**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:42:51.977

您可以使用`eval`：

```
$ceo_car_color = eval { $company->ceo->car->color }; 
```

但它当然会捕获任何错误，而不仅仅是在`undef`.

# jquery - 选择自 -> 选择至 jquery

> ID：12617945
> 
> 赞同：0
> 
> 时间：2012-09-27T09:14:31.677
> 
> 标签：jquery, select

您好，感谢您花时间回答我的问题。

我有一个带有两个选择元素的 div（请注意，它们是动态创建的并且没有 id）。它们都包含相同的选项元素（从 1 到 5 的技能级别）。当用户从 SelectFrom 下拉框中选择某些内容时，第二个选项 (Select To) 仅包含值大于 Select From 中所选值的选项。

如果用户在 Select From 下拉框中选择默认元素（没有值），我想用 5 个元素重新填充 Select to。

我发现我将拥有一个包含所有 5 个选项的隐藏选择元素，我将克隆这些元素并将 Select to Dropbox 重新填充。

前进的方向是什么。棘手的部分是我没有 ID，所以我正在使用 parent() 和兄弟姐妹()。谢谢你的时间

假设这是 HTML：

```
<div>
<select class="skillsFrom">
<option value="">Please select a value</option>
<option value="1">a</option>
<option value="2">a</option>
<option value="3">a</option>
<option value="4">a</option>
<option value="5">a</option>
</select>
<select class="skillsTo">
<option value="">Please select a value</option>
<option value="1">a</option>
<option value="2">a</option>
<option value="3">a</option>
<option value="4">a</option>
<option value="5">a</option>
</select>
</div> 
```

这是 JS：//btw helperSelect 是一个与其他两个选项相同的选择，它只是被隐藏了。

```
('.skillsFrom').bind('change', function(){

            var $optionsSkillLevel = $('#helperSelect option').clone();

            var selectedValue = $(this).val();

            $(this).parent().siblings('.skillsTo').html($optionsSkillLevel);

            if(selectedValue != ''){

            }

        }); 
```

我被困住了。我不知道如何从这里开始。我想遍历 Select To 中的所有元素并从 Select From 中删除那些低于所选值的元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:22:38.147

在第一个选择的每次更改中，您都需要隐藏/显示第二个选择的某些选项。

```
$('.skillsFrom').change(function() {
    var theValue = $(this).val();
    if($(this).val()==="") {
        // show all values of .skillsTo if .skillsFrom select is set to ""
        $(this).parent().find('.skillsTo option').show();
    } else {
        theValue = parseInt(theValue, 10);
        $(this).parent().find('.skillsTo option').each(function() {
           if(parseInt($(this).val(), 10) <= theValue) {
               // hide if value <= selected value from .selectFrom
               $(this).hide();
           } else {
               // show if value > selected value from .selectFrom
               $(this).show();
           }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:24:41.920

你可以这样做：

```
$('.skillsFrom').change(function() {
  var val = this.value;
  if(val == '') {
    // your reload logic here
  }
  else {
    $('.skillsTo option').hide().filter(function() {
        return this.value != '' && parseInt(this.value, 10) > parseInt(val, 10);
    }).show();
  }
}); 
```

# grails - grails 上的实时重新加载功能

> ID：12617947
> 
> 赞同：2
> 
> 时间：2012-09-27T09:14:35.280
> 
> 标签：grails, livereload

我正在开发一个 grails 应用程序。我希望浏览器页面即时刷新代码中的更改/编辑，而无需每次都手动点击刷新按钮。我尝试了 LiveReload，但无法让它与 grails 服务器一起使用。是否有任何其他应用程序用于此目的？我使用 Intellij Idea IDE 进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:51:50.147

**Grails 的作用：** Grails 自动重新编译对 Java 和 Groovy 源代码所做的更改。通过使用正确的插件，它还可以自动重新编译 Less、Sass 等文件。

**LiveReload 做什么：** LiveReload 监视文件系统上的文件和文件夹，并在其中一个监视文件发生更改时向浏览器发出刷新信号。

**如何结合两者：** 配置 LiveReload 以监控 Grails 项目的不同子文件夹。添加不同的 Grails 资源（视图、web-app/js、web-app/css、src/groovy、...）作为单独的受监控文件夹。您也不希望 liveReload 编译 Less、Sass、CoffeeScript 等资源，因为 Grails 会处理重新编译。

Grails 重新编译资源可能需要一些时间，因此我们要相应地配置 LiveReload 中每个资源的等待时间。否则，浏览器会在 Grails 使更改的资源可用之前刷新。

例如，对于我的带有 Less 文件的文件夹，等待时间设置为 4 秒，因为重新编译大多数 Less 文件至少需要几秒钟。我的带有 js 文件的文件夹的等待时间设置为 1 秒。需要进行一些实验才能为您的项目和系统找到最佳设置。

# wordpress - 如何防止重写器在不需要时更改 url 以包含查询字符串？

> ID：12617949
> 
> 赞同：2
> 
> 时间：2012-09-27T09:14:53.640
> 
> 标签：wordpress, .htaccess, mod-rewrite, prestashop

我在 .htaccess 文件中让 mod-rewrite 规则像我需要的那样工作时遇到了一些麻烦。

我正在尝试翻译来自以下内容的网络请求：

`http://www.masterongspropshop.com/blog/22`

至：

`.../blog.php?idPost=22`

当我尝试时，URL 总是恢复为`.../blog?idPost=22`. 我尝试了几种不同的变体，但所有变体似乎都以相似的结果结束。

目前的重写规则如下所示：

> ```
> RewriteRule ^blog$ blog.php [L]
> RewriteRule ^blog/([0-9]*)$ blog.php?idPost=$1 [L,QSA] 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:15:30.290

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^blog/([0-9]+)/?$ blog.php?idPost=$1 [L,QSA,NC] 
```

# iphone - iOS 6：UITableView 编辑和自动调整大小

> ID：12617950
> 
> 赞同：4
> 
> 时间：2012-09-27T09:14:57.143
> 
> 标签：iphone, ios, uitableview, ios6, autoresize

嗨，有人可以帮我了解如何在 iOS 6.0 中编辑时自动布局表格单元格的组件吗？我已将 UITableViewCell Autosizing 选项的 AutoLayout FALSE 设置为属性检查器的右上角！单元格的右侧图像视图通过删除按钮重叠。请参考附图。以下是此代码。无论如何我可以解决这个问题吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    PlayerCell *cell = (PlayerCell *)[tableView dequeueReusableCellWithIdentifier:@"PlayerCell"];
    Player *player = [self.players objectAtIndex:indexPath.row];
    cell.nameLabel.text = player.name;
    cell.gameLabel.text = player.game;
    cell.ratingImageView.image = [self imageForRating:player.rating];
    return cell;
}

- (UIImage *)imageForRating:(int)rating
{
    switch (rating)
    {
        case 1: return [UIImage imageNamed:@"1StarSmall.png"];
        case 2: return [UIImage imageNamed:@"2StarsSmall.png"];
        case 3: return [UIImage imageNamed:@"3StarsSmall.png"];
        case 4: return [UIImage imageNamed:@"4StarsSmall.png"];
        case 5: return [UIImage imageNamed:@"5StarsSmall.png"];
    }
    return nil;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [self.players removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }     
} 
```

我添加了以下委托方法，当我滑动单元格时它工作正常。

```
-(void)tableView:(UITableView *)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    PlayerCell *cell = (PlayerCell *)[tableView cellForRowAtIndexPath:indexPath];
    cell.ratingImageView.hidden = YES;
}

- (void)tableView:(UITableView *)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    PlayerCell *cell = (PlayerCell *)[tableView cellForRowAtIndexPath:indexPath];
    cell.ratingImageView.hidden = NO;
} 
```

...但是当我按下 editButtonItem 按钮时，不会调用此方法！那很奇怪！我错过了一些东西。我添加了以下方法，当按下“编辑/完成”按钮时会调用该方法，但无法检测将选择进行编辑的单元格！

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animate
{
    [super setEditing:editing animated:animate];
    if(editing)
    {
        NSLog(@"editMode on");
    }
    else
    {
        NSLog(@"Done leave editmode");
    }
} 
```

当用户单击左圆形按钮时，是否有在该按钮单击时添加选择器并获取单元格索引？

![图片](../Images/fd23039a1c0b155a120b8f83bcaff072.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T10:23:51.980

当您不使用 AutoLayout 时，您的 ratingImageView 使用自动调整大小的掩码来调整自身的大小和位置。默认情况下，这意味着到左侧和顶部的距离是固定的，大小不会改变。

当您切换单元格以编辑 contentView 移动和调整大小但您的 ratingImageView 保持固定在顶部和左侧时。您可以通过暂时（出于学习目的）为单元格 contentView 设置背景颜色来可视化这一点，并查看它在您编辑和删除单元格时如何调整大小。

您想要的是让您的评分视图与右边缘而不是左边缘保持固定距离。您可以通过设置 ratingImageView 的 autoresizingMask 属性在 InterfaceBuilder（在其中执行 XIB 或 Storyboard）或代码中更改此设置。

* * *

转到此选项卡

![转到此选项卡](../Images/7088c6d4edc350320a7f1c2c75db1f13.png)

像这样更改自动调整大小

![在此处输入图像描述](../Images/7b2f8e4fc98f977d0744b102d6ec826d.png)

或者在代码中做

```
// in code you specify what should be flexible instead of what should be fixed...
[ratingImageView setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin]; 
```

# opencv - 将点的位置从一个视角转换为另一个视角

> ID：12617951
> 
> 赞同：1
> 
> 时间：2012-09-27T09:14:58.053
> 
> 标签：opencv, transform, javac, perspective

我正在尝试将使用自由移动的相机（局部空间）拍摄的点的位置转换为同一场景的图像中的位置（全局空间）。该点的位置是在局部空间中给出的，我需要在全局空间中计算它。我在整个场景中都有标记，以便在全局和局部空间中都有相应的点来计算透视变换。

我试图通过在JavaCV（cvGetPerspectiveTransform（localMarker，globalMarker，mmat））的帮助下比较全局和局部空间中相应标记的点来计算透视变换矩阵。然后我借助透视变换矩阵 (cvPerspectiveTransform(localFieldPoints, globalFieldPoints, mmat)) 变换点在局部空间中的位置。

我虽然这足以解决我的问题，但效果并不好。我还注意到，当我计算视频的一个特定图像中不同标记的透视变换矩阵时，我得到了不同的透视变换矩阵。如果我理解一切正确，这不应该发生，因为这里的视角总是相同的，所以我应该总是得到相同的透视变换矩阵，不是吗？

因为我对这一切都很陌生，这是我的第一次尝试，我只是想知道我使用的方法是否普遍正确还是应该以不同的方式完成？也许我只是错过了什么？

编辑：

再一次，我有一张我看到的完整场景的图像和一个在场景中自由移动的摄像机的视频。现在我拍摄视频的每个图像并将其与完整场景的图像进行比较（我使用不同的相机来制作图像和视频，所以相机的内在本质实际上并不相同。这可能是问题吗？

[透视变换截图](http://img189.imageshack.us/img189/8241/stackoverflow.png)。

右侧是场景图像，左侧是视频图像。左侧视频图像中的红色圆圈是给定点。右图中的红色方块是借助透视变换计算得到的点。如您所见，计算的点不在正确的位置。

“我得到不同的透视变换矩阵”的意思是，当我在标记“0E3E”的帮助下计算透视变换矩阵时，我得到的矩阵与使用标记“0272”不同。

# ssrs-2008 - SSRS 行组的边框格式

> ID：12617953
> 
> 赞同：9
> 
> 时间：2012-09-27T09:14:58.963
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix, ssrs-grouping

这是我的报告。 ![在此处输入图像描述](../Images/2f5c7c36884051e49f62da2c934810b0.png)

上面的行包含一个父行组和一个子行组。我已经完成了报告的边框格式。我只需右键单击每个文本框并相应地给出边框。但是，我无法为整个集团设置边界。在组属性中没有边框选项。我不希望组的行之间有任何边界。我怎么能这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T11:03:48.537

进入要删除边框的文本框并删除顶部和底部边框。

当组展开时，您将在顶部看到组外第一个文本框的下边框和其下方组外第一个文本框的上边框。（但在同一组的单元格之间，不会有边界）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T23:25:41.730

如果您只想将边框设置为 Row 标题，则不应使用 Row 详细信息的边框属性。您不会在底部行标题上看到更改的原因是因为它与行详细信息的顶部边框重叠。解决此问题的一个好方法如下：您可以设置行标题的所有三个边（上、左、右）的颜色和边框宽度，并在预览中查看更改。但是，即使您更改了底部边框值的颜色，您也不会看到更改，直到您开始向下滚动。在大多数情况下，即使在报告的打印版本中[输入图像描述，可见性也不好。](http://i.stack.imgur.com/jDhAQ.jpg)解决方案：将底部边框宽度属性的边框宽度更改为大于默认值或详细顶部边框宽度属性。

警告：如果您更改详细信息列的顶部边框属性，它将重复详细信息。

例如。行标题边框属性：

边框颜色 黑色 边框宽度 1pt, , , , 2pt

行详细边框属性：

边框颜色 LightGrey 边框宽度 1pt

# c# - HtmlAgilityPack 上传文件

> ID：12617954
> 
> 赞同：1
> 
> 时间：2012-09-27T09:14:59.077
> 
> 标签：c#, post, file-upload, upload, html-agility-pack

我被困在 HtmlAgilityPack 中，它在将纯文本发布到服务器时工作正常。但目前我需要使用它来上传图片，使用 multipart/form-data 格式和 Content-Type: image/jpeg。我已经在谷歌上搜索了这个问题超过 2 天，但根本没有结果。如果您能给我任何解决此问题的想法，我将不胜感激。

或者你能建议我使用另一个可以完成这项任务的库吗？

非常感谢！

# objective-c - 如何将 int 变成浮点数？

> ID：12617977
> 
> 赞同：-6
> 
> 时间：2012-09-27T09:16:08.397
> 
> 标签：objective-c, xcode

```
int *SliderMaximum = V1.TeamAmountAfterSave;
[sliderTeamSelect setmaximum:SliderMaximum]; 
```

我需要转换`SliderMaximum`为浮点数我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:27:48.647

```
NSNumber *yourNumber = [NSNumber numberWithInt: SliderMaximum];
float yourFloat = [yourNumber floatValue]; 
```

而且您不需要*指向 int*的指针，它没用，计算分配一个*指针*并写入指向 int 的内部*地址指针*与分配一个*int*并在其中写入*int*相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:18:13.717

您是否尝试过将其乘以浮点数？

CGFloat sliderMaximum = SliderMaximum * 1.0f;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:20:03.827

```
[sliderTeamSelect setmaximum:[[V1.TeamAmountAfterSave] floatValue]]; 
```

# regex - perl中正则表达式中的OR条件

> ID：12617979
> 
> 赞同：3
> 
> 时间：2012-09-27T09:16:19.880
> 
> 标签：regex, perl, if-statement

我正在尝试编写一个通过 Perl 中的正则表达式执行 OR 函数的脚本。我写了一个代码，如果字符串包含'D'或'E'后跟'P'，它应该打印“D或E后跟P”，否则“D或E后不跟P”。假设如果我给 $s = 'ABCDEABCDEPABCDEAB' 它应该打印 else 条件，但我认为我的 if 语句不能正常工作。请帮忙。

```
my $s = 'ABCDEABCDEPABCDEAB';
if ($s =~ /D|E(?=P)/) {
    print "D or E is followed by P";
} 
else {
    print "D or E is not followed by P";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T09:20:31.970

```
if ($s =~ /[DE]P/) {
    print "D or E is followed by P";
}
else {
    print "neither D nor E is followed by P";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:19:47.383

我认为你的问题与括号有关，试试这个：

`$s =~ m/(D|E)(?=P)/`

此外，我想说的是，在您的字符串中，您`EP`的位置为 9。因此，它将评估`true`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T13:49:58.087

使用 Damian Conway's`Regexp::Debugger`并尝试 ' `rxrx`' 功能。它会引导您完成正则表达式匹配中的每一个字符比较，以便您可以准确地看到匹配的内容和时间。很有用。如果你在上面运行 perl，它也可以在 Windows 的 DOS 下运行（没有漂亮的颜色）。

# c++ - 获取列名 postgres

> ID：12617981
> 
> 赞同：1
> 
> 时间：2012-09-27T09:16:20.223
> 
> 标签：c++, postgresql

我是 POSTGRES 的新手。我想做一个 SELECT 并列出所有列的名称和值。

库 libpq-fe.h 中是否有一个函数来获取 sql 查询的列名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:30:03.330

在 Delphi 代码中，我使用 LibPQ 和`PQfname(SelectHandle, ColumnNr);`. 它在[http://www.postgresql.org/docs/9.2/static/libpq-exec.html中有描述](http://www.postgresql.org/docs/9.2/static/libpq-exec.html)

# list - 在 Jquery Mobile 中滚动特定的 Div？

> ID：12617982
> 
> 赞同：0
> 
> 时间：2012-09-27T09:16:22.133
> 
> 标签：list, jquery-mobile, scroll

我一直在jquery mobile中实现列表。当我滚动列表时，页眉也会滚动。有没有办法在触摸事件中只滚动特定的div而不滚动页面中的所有div。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:18:20.813

如果您只是希望您的标题保持固定，那么您可以对其应用 data-position="fixed" 属性。

```
<div data-role="header" data-position="fixed"> 
```

这将防止它在您滚动页面时从顶部滚动。

# apache - .htaccess 重写 url 中的查询字符串

> ID：12617983
> 
> 赞同：1
> 
> 时间：2012-09-27T09:16:27.243
> 
> 标签：apache, .htaccess

我正在尝试使用 mod_rewrite 仅将查询字符串保留在 url 中，并删除 index.php?p=。

例如，这个链接

```
http://domain.com/index.php?p=page-name-with-dashes 
```

进入

```
http://domain.com/page-name-with-dashes.html 
```

所有页面都是通过控制脚本 index.php 和查询 p=name 加载的，像这样

```
<?php
$page = isset($_GET['p']) ? $_GET['p'] : 'home';
...
require_once 'content-' . $page . '.php';
...
?> 
```

我已经尝试了以下所有变体，但没有一个有效 - 有些给出 404 一些给出 500 错误。

```
#RewriteRule ^index.php?p=(.*) $1/

#RewriteRule ^([^/]+)/?$ /index.php?p=$1 [QSA,L]

#RewriteRule ^(.*)$ index.php?p=$1 [NC,L,QSA] 
```

我究竟做错了什么？我不太了解 htaccess 规则，所以请原谅我的新手问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:20:32.380

试试这个：

```
RewriteRule ^(.*).html$  index.php?p=$1 [L] 
```

但是请注意，如果您有多种情况（例如要重写的其他类型的 url），请小心 RewriteRules 的排序，因为您可以轻松地用另一种覆盖...

# python - 用 numpy 最小二乘拟合线性曲面

> ID：12617985
> 
> 赞同：3
> 
> 时间：2012-09-27T09:16:44.403
> 
> 标签：python, numpy, least-squares, geometry-surface

所以我想解方程`z= a + b*y +c*x`，。得到`a,b,c`. 即：使（平面）表面适合3D空间中的散点负载。

但我似乎找不到任何东西！我认为对于这样一个简单的问题会有一个简单的模块。

我试过了，其中 x,y,z 是数组；

```
ys=zip(x,y)
(coeffs, residuals, rank, sing_vals) = np.linalg.lstsq(ys,z) 
```

我认为 coeffs = b,c 是否正确？还是我完全走错了方向。我似乎找不到任何其他可以在 3d 中使用的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:09:04.273

我认为你在正确的轨道上。您仍然可以尝试按照[`scipy.linalg`文档](http://docs.scipy.org/doc/scipy/reference/tutorial/linalg.html)的示例，特别是求解最小二乘法...`部分

```
A = np.column_stack((np.ones(x.size), x, y))
c, resid,rank,sigma = np.linalg.lstsq(A,zi) 
```

（我们为常数添加了一列 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:23:37.993

常数 a、b 和 c 是您需要求解的未知数。

如果您将 N (x, y, z) 点代入方程，您将有 N 个方程代表 3 个未知数。你可以把它写成一个矩阵：

```
[x1 y1 1]{ a }   { z1 }
[x2 y2 1]{ b }   { z2 }
[x3 y3 1]{ c } = { z3 }
    ...
[xn yn 1]        { zn } 
```

或者

```
Ac = z 
```

其中 A 是 Nx3 矩阵，c 是 3x1 向量，z 是 3xN 向量。

如果您将两边都预乘以 A 的转置，您将得到一个带有 3x3 矩阵的方程，您可以求解您想要的系数。

使用 LU 分解和前后替换。

# android-pay - 如何从 google checkout 卖家账户中的沙盒更改 google checkout 货币？

> ID：12617988
> 
> 赞同：1
> 
> 时间：2012-09-27T09:16:52.540
> 
> 标签：android-pay, google-checkout

我的购物车货币为澳元，但我的 google checkout 货币设置为美元。现在我无法在沙箱中处理请求的测试模式下执行成功的事务。我尝试了几次以找出 google checkout 商家帐户中的货币设置，但我失败了。请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:13:37.977

Google Checkout 仅适用于美国和英国商家。作为美国或英国商家，您可以向大多数国际买家销售商品，但交易货币必须与账户货币相同（美元或英镑）。

如果您销售数字商品，请考虑适用于 18 个国家/地区（包括澳大利亚和澳元）的商家的数字商品钱包 API：

[https://developers.google.com/in-app-payments/faq#faq-gen-02](https://developers.google.com/in-app-payments/faq#faq-gen-02)

[https://support.google.com/wallet/bin/answer.py?hl=en&answer=48414](https://support.google.com/wallet/bin/answer.py?hl=en&answer=48414)

# django - 托管在不同服务器中的 Django 应用程序之间的通信

> ID：12617992
> 
> 赞同：0
> 
> 时间：2012-09-27T09:17:02.690
> 
> 标签：django

我有一个托管在服务器中的 Django 项目，它希望与托管在另一台服务器中的另一个 django 应用程序进行交互。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T10:39:30.340

这实际上取决于您想要传达的内容。但无论采用何种特定技术，[RESTful API](http://en.wikipedia.org/wiki/Representational_state_transfer)都是应用程序之间通信的最佳实践之一。

已经开发了许多应用程序来帮助在 Django 中实现 RESTful。你可以试试[RestifyDjango](http://code.google.com/p/django-rest-interface/wiki/RestifyDjango)或[Django REST framework](https://github.com/tomchristie/django-rest-framework)

# objective-c - 按代码选择单元格后的奇怪行为

> ID：12617993
> 
> 赞同：0
> 
> 时间：2012-09-27T09:17:02.847
> 
> 标签：objective-c, ios, uitableview

使用此代码选择一个单元格后，我遇到了一些奇怪的行为：

```
NSIndexPath * indexPath = [NSIndexPath indexPathForRow:1 inSection:0];

CustomCell * cell = (CustomCell*)[_myTableView cellForRowAtIndexPath:indexPath];

[cell setSelected:YES animated:NO]; 
```

在此之后我无法准确选择这个单元格它只是没有响应并且

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath 
```

从未被调用。

这也没有被称为：

```
-(void)tableView: (UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:22:21.190

根据Apple的文档，您提到的方法在以编程方式选择单元格后永远不会被调用，这是预期的行为。更多信息[在这篇文章](https://stackoverflow.com/questions/2035061/select-tableview-row-programmatically)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:37:40.637

您需要手动调用这两种方法，因为手动选择单元格不会调用委托方法。

```
[cell setSelected:YES animated:NO];
[self tableView:_myTableView didSelectRowAtIndexPath:indexPath]; 
```

# php - 暂停逻辑mysql TIMEDIFF（）和PHP所用的时间

> ID：12617999
> 
> 赞同：1
> 
> 时间：2012-09-27T09:17:18.663
> 
> 标签：php, mysql

我得到了这个查询，它占用了我的 elapsed_time 并且工作正常，但后来我意识到我得到了 actual_elapsed 的值错误。actual_elapsed 是我使用 TIMEDIFF() 获取的计时器的运行时间。log_time 是一个日期时间，它是插入/执行操作（播放、暂停）时的日期时间。序列是 int，它告诉我每个用户首​​先发生的事情。status，也是 int，告诉我所做的操作是播放（1）、暂停（2）还是停止（3）。

就像我说的那样，我的问题是通过使用 TIMEDIFF(now(), log_time) 来获得实际经过的正确值。如果我没有暂停动作就好了。

示例数据库条目

```
log_time               sequence     status

2012-09-27 15:31:02     1            1                
2012-09-27 15:31:04     2            2               **2  +**
2012-09-27 15:40:08     3            1
2012-09-27 15:40:45     4            2               **39 +**
2012-09-27 15:40:47     5            1
2012-09-27 15:40:57     6            3               **10 =**
                                                     **49** 
```

我的查询给了我 09 分 57 秒，而我应该只有 49 秒。

我的示例查询。

```
 (" select sequence_num, elapsed_time, status, TIMEDIFF(now(), log_time) as actual_elapsed from tbl"); 
```

我正在尝试获取 actual_elapsed 的持续时间。为此，我必须以某种方式获取休息时间（暂停）的总持续时间，然后得到 elapsed_time 和休息时间的差异。但是我在这方面也遇到了麻烦，因为用户可以多次暂停计时器。

当我设计我的数据库时，这似乎很简单。我该怎么做才能没有这么多的混乱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:31:13.103

SELECT iStop-iStart FROM (SELECT SUM(log_time) AS iStop FROM tbl WHERE status IN (2,3)) a JOIN (SELECT SUM(log_time) AS iStart FROM tbl WHERE status=1) b;

上述查询仅在暂停或停止是最后一条记录时才有效